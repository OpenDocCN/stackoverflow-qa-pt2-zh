# StackOverflow 问答 16158000-16158999

# ruby-on-rails - 回形针保存文件但不读取它们

> ID：16158005
> 
> 赞同：1
> 
> 时间：2013-04-22T22:45:39.000
> 
> 标签：ruby-on-rails, image, paperclip, attachment

我正在做一个需要附件的项目。具体来说，我需要将图片附加到产品模型上。

也就是说，我遵循了 railscast（链接[在这里](http://railscasts.com/episodes/134-paperclip)）并且遵循了大部分说明（因为我认为有些说明已经过时）。我最终得到以下结果：

在产品**表格**中：

```
 <div class="field">
    <%= f.label "Pic"%><br />
    <%= f.file_field :pic %>
  </div> 
```

在产品**模型**中：

```
class Product < ActiveRecord::Base
  attr_accessible :brand_id, :name, :pic

  attr_accessor :pic_file_name
  attr_accessor :pic_content_type
  attr_accessor :pic_file_size
  attr_accessor :pic_updated_at

  has_attached_file :pic 
```

并查看生成的附件，在产品**显示**视图中：

```
<p>
  <b>Pic:</b>
  <%= image_tag @product.pic.url %>
</p> 
```

现在，问题是即使日志显示使用 选择的图像`file_field`已成功上传：

```
Started POST "/products" for 127.0.0.1 at 2013-04-22 17:10:56 -0500
Processing by ProductsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"llIJTXKH87e7vpjX1A7Kmcz6BD2UToPvIfVd1bqmA58=", "product"=>{"brand_id"=>"1", "name"=>"asda\
sdsa", "pic"=>#<ActionDispatch::Http::UploadedFile:0x007f9cfdb201c8 @original_filename="3.JPG", @content_type="image/jpeg", @headers="Conten\
t-Disposition: form-data; name=\"product[pic]\"; filename=\"3.JPG\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/var/folders/_r/d96rh\
0652xndcknb2txzn77r0000gn/T/RackMultipart20130422-2306-qoojw2>>}, "commit"=>"Create Product"}
  ^[[1m^[[36m (0.1ms)^[[0m  ^[[1mbegin transaction^[[0m
  ^[[1m^[[35mSQL (76.1ms)^[[0m  INSERT INTO "products" ("brand_id", "created_at", "image_content_type", "image_file_name", "image_file_size"\
, "image_updated_at", "name", "pic_content_type", "pic_file_name", "pic_file_size", "pic_updated_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?\
, ?, ?, ?, ?, ?, ?)  [["brand_id", 1], ["created_at", Mon, 22 Apr 2013 22:10:56 UTC +00:00], ["image_content_type", nil], ["image_file_name"\
, nil], ["image_file_size", nil], ["image_updated_at", nil], ["name", "asdasdsa"], ["pic_content_type", nil], ["pic_file_name", nil], ["pic_\
file_size", nil], ["pic_updated_at", nil], ["updated_at", Mon, 22 Apr 2013 22:10:56 UTC +00:00]]
[paperclip] Saving attachments.
  ^[[1m^[[36m (0.9ms)^[[0m  ^[[1mcommit transaction^[[0m
Redirected to http://localhost:3000/products/10
Completed 302 Found in 126ms (ActiveRecord: 77.1ms) 
```

我从来没有真正看到过这张照片，因为它总是说“失踪”。

现在，查看 public/system 目录，我可以看到那里的模型目录，以及 Paperclip 存储目录树，以及我试图保存的图像：

```
$ ls public/system/products/pics/000/000/010/original/
3.JPG 
```

我确实在文件中设置了 ImageMagick 路径

> 配置/初始化程序/paperclip.rb

持有：

```
Paperclip.options[:command_path] = "/Users/<my_user>/Documents/non-ios_apps/ImageMagick-6.8.1/bin/" 
```

所以在那里，我不知道为什么图像*是*但无法读取。就附件而言，这很可能与它没有将任何内容保存到数据库中有关，但我不确定它们是单独的问题还是一个触发另一个问题。

任何帮助表示赞赏。

谢谢！

使用：Rails 3.2.10 “回形针”、“~> 3.0”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:32:49.910

看起来文件正在与 post 请求一起上传，但如果您查看脚本正在运行的 SQL，则所有 pic 属性都设置为 nil。

我不确定模型中的 attr_accessor 行来自哪里，因为我没有在 railscast 或当前的回形针文档中看到它们。这些可能是导致您的问题的原因。

railscast 已经有五年的历史了，所以我建议去[https://github.com/thoughtbot/paperclip](https://github.com/thoughtbot/paperclip)上的 github 上的回形针项目，并阅读如何安装和使用当前版本的回形针。他们有一个非常简单的关于启动和运行的演练。

# django - Django-Simple-Friends 所有未连接为朋友的用户

> ID：16158007
> 
> 赞同：0
> 
> 时间：2013-04-22T22:45:48.847
> 
> 标签：django, django-queryset

我很想创建一个可以被 Django-Simple-Friends 邀请的用户列表

我希望列表包括所有活动用户减去登录用户和所有登录用户的朋友。

我有一个查询可以将所有活动用户减去登录用户，但不确定如何排除“朋友”

这是我用于所有活动用户减去登录用户的查询：

```
invite_user_list = User.objects.filter(~Q(id=request.user.id), is_active=True) 
```

有什么想法可以从列表中删除连接的朋友吗？

我很感激时间和专业知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:56:23.677

使用[排除](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-specific-objects-with-filters)：

```
invite_user_list = User.objects.filter(is_active=True).exclude(id=request.user.id).exclude(friendship__friends__user=request.user) 
```

# mongodb - MongoDB 嵌入式文档索引问题

> ID：16158011
> 
> 赞同：0
> 
> 时间：2013-04-22T22:46:08.093
> 
> 标签：mongodb, indexing, mongodb-.net-driver, mongodb-query

我在 mongodb 集合中有以下格式的数据：

```
{
    _id: ObjectId,
    Product: string,
    Modules: [
        {
            StaticModuleId: Int64,
            Set: [
                {
                    k: Int64,
                    v: {
                        Value: Double,
                        AnotherId: Int64

            }
            },
            ...
        ]
    }, 
    ...
] 
```

}

这是我的名为 MyIndex 的索引：

```
{
    Product: 1,
    'Modules.StaticModuleId': 1,
    'Modules.Set.k': 1,
    'Modules.Set.v.Value': 1
} 
```

集合中有 5 个文档，每个文档有 10 个模块，每个集合中有 100 个元素，集合中总共有 50 个模块和 5000 个条目。然后我运行了这个查询：

```
{
    'Product': 'Test',
    $and: [
        {
            'Modules.StaticModuleId': 2010220,
            'Modules.Set': {
                $elemMatch: {
                    k: 41439,
                    'v.Value': 2186233
                }
            }
        },
        {
            'Modules.StaticModuleId': 2010226
        },
        {
            'Modules.StaticModuleId': 2010228
        }
    ]
} 
```

这是.explain()：

```
{
    cursor: 'BtreeCursor MyIndex',
    isMultiKey: true,
    n: 4,
    nscannedObjects: 941,
    nscanned: 941,
    nscannedObjectsAllPlans: 941,
    nscannedAllPlans: 941,
    scanAndOrder: false,
    indexOnly: false,
    nYields: 0,
    nChunkSkips: 0,
    millis: 52  
} 
```

随着我继续添加额外的 $elemMatch 子句，性能下降到 > 200 毫秒。这种类型的查询是否可索引，如果可以，关于如何提高性能的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:20:26.213

尝试删除以前的索引并使用多键标志创建，如下所示：

```
db.collection.ensureIndex({{'Product':1, 'Modules.StaticModuleId':1, 'Modules.Set':1, 'Modules.Set.k':1, 'Modules.Set.v.Value':1}, {multikey:true}) 
```

在我的测试用例中，我只有 100 个扫描对象和 millis=0

提示：您可以通过以下方式将数据和/或索引加载到内存中：

```
db.runCommand({ touch: "collection", data: true, index: true }) 
```

我正在使用下一个脚本来重现问题和数据准备：

```
for(var prod=0; prod<1000; prod++) {
    prodObj={Product:"product" + prod};
    modObj=[];
    for(var mod=0; mod < 10; mod++) {
        seObj=[];
        for(var se=0; se < 100; se++) {
            seObj[se] = {k: "Int64-" + se, v:{Value:"Double-" + se}, AnotherId:"Int64"};
        }
        modObj[mod]={StaticModuleId:"Int64-"+prod, Set:seObj};
    }
    prodObj.Modules=modObj;
    db.so.insert(prodObj);
} 
```

可能这对你来说是不正确的任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:53:03.027

我认为数据模型不太好。这是一个类似模型的关系。如果您可以像这样将数据模型更改为简单：

```
{
  Product: "string",
  StaticModuleId: "string",
  Set:
  [
    {
      k: "string",
      v: 
      {
        Value: "double",
        AnotherId: "string"
      }
    }
  ]
} 
```

您将获得更好的性能和更少的复杂性

# google-app-engine - 生成谷歌云端点客户端库时出错

> ID：16158013
> 
> 赞同：12
> 
> 时间：2013-04-22T22:46:10.750
> 
> 标签：google-app-engine, google-cloud-endpoints, google-eclipse-plugin

在过去的几周里，我一直在使用**GAE/J**和**Google Cloud Endpoints开发应用程序**开发一个应用程序。我创建了我的自定义端点（使用注释），虽然我遇到了很多问题，但我可以解决它们并且一切都运行得很好。

但是现在（22/04/2013）我尝试在端点方法中进行更改，突然**Google Eclipse 插件**不再生成客户端库了！

我试图从我的项目中删除所有生成的 api 文件，但没有任何效果。我什至再次下载了 Eclipse，安装了所有最新版本的 GPE 和 GAE SDK，并从头开始了一个新项目，但我遇到了同样的错误......

* * *

*编辑*：在尝试了**一切之后，***谷歌的结局*似乎一定有问题。似乎 GPE 使用 a `CloudClientLibGenerator`，至少在最后一次没有工作......

## [ 75 小时 ... ]

现在我想知道：

1.  如果他们在本地拥有所有必要的信息（代码、库等），为什么还需要云生成器来生成端点的代码？或者他们没有？
2.  我正在使用 GAE 的*免费版本*，为大学开发一个应用程序（我的理学硕士最终项目），但如果我正在开发一个为 GAE 付费的真正应用程序怎么办？这是不是有点太*粗制滥造*了？

无论如何，我认为这个词是*终止*与端点的约会......

* * *

注意：我已经打开[**了这个问题**](https://code.google.com/p/googleappengine/issues/detail?id=9214)在 Google Code 中

*编辑*：**来自 Google 项目成员的回复**：“*目前普遍存在 Endpoints 问题，这会混淆任何当前或以前的库生成问题。我会在当前问题解决后进行更新。* ”

“*我们正在努力尽快解决问题。一旦问题解决，我们将发布更新。* ”

## 更新：一些用户现在在上述问题中发表评论，指出问题已解决！不过，谷歌没有发表官方评论。不幸的是，我暂时无法检查它...

* * *

## 可能的解决方法：

您必须更改为**以前的 GAE SDK 版本**。**1.7.5**和**1.7.6**都在工作。[**您可以从这里**](http://code.google.com/p/googleappengine/downloads/detail?name=appengine-java-sdk-1.7.5.zip&can=2&q=label:OpSys-All)下载 Java 版本[](http://code.google.com/p/googleappengine/downloads/detail?name=appengine-java-sdk-1.7.5.zip&can=2&q=label:OpSys-All)**。**

 **我已经尝试过，端点库生成正在工作！！！还有开发服务器中的 APIs Explorer，所以我们可以在等待 bug 修复的同时继续开发，根据谷歌团队**明天会发生什么......**

突然间，我已经部署的端点无法正常工作，现在又开始工作了！（尽管客户端生成仍然无法与 SDK 1.7.7 一起使用）

*编辑*：来自谷歌，他们说命令行的生成也有效。

* * *

尝试生成客户端库时引发的异常的堆栈跟踪（在 GPE 错误日志中）：

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmApiCreator.createClientLibFromApiConfig(SwarmApiCreator.java:121)
    at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmApiCreator.createSwarmApi(SwarmApiCreator.java:242)
    at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmServiceCreator.create(SwarmServiceCreator.java:364)
    at com.google.gdt.eclipse.appengine.swarm.wizards.GenerateSwarmApiAction$1.run(GenerateSwarmApiAction.java:84)
    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
    at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:507)
    at com.google.gdt.eclipse.appengine.swarm.wizards.GenerateSwarmApiAction.run(GenerateSwarmApiAction.java:80)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1053)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:942)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
Caused by: com.google.appengine.repackaged.com.google.api.client.http.HttpResponseException: 400 Bad Request
{"error": {"message": "Bad Request", "code": 400, "errors": [{"message": "api error", "debug_info": "Could not parse api"}]}}
    at com.google.appengine.repackaged.com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1155)
    at com.google.api.server.spi.tools.CloudClientLibGenerator.postRequest(CloudClientLibGenerator.java:52)
    at com.google.api.server.spi.tools.CloudClientLibGenerator.generateClientLib(CloudClientLibGenerator.java:43)
    ... 41 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T22:03:49.227

这现在在 GPE 3.2.3 和服务端得到了修复。您现在可以使用 App Engine 1.7.7。

还有一个问题：

[https://code.google.com/p/google-plugin-for-eclipse/issues/detail?id=191](https://code.google.com/p/google-plugin-for-eclipse/issues/detail?id=191)

它将在星期一修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:08:37.917

我也有同样的问题。似乎还没有修复。它开始突然发生。昨天我能够很好地生成云端点客户端库。但现在，没有。甚至创建一个新的模板项目也会出现错误。所以从错误中猜测，它看起来是谷歌的问题。

已记录一个未解决的问题： [https ://code.google.com/p/googleappengine/issues/detail?id=9180](https://code.google.com/p/googleappengine/issues/detail?id=9180)**

# java - Netbeans 中的数据库 onclick 按钮

> ID：16158016
> 
> 赞同：0
> 
> 时间：2013-04-22T22:46:17.867
> 
> 标签：java, netbeans

我正在关注有关在 Netbeans 中创建数据库的本教程：http: [//www.homeandlearn.co.uk/java/database_scrolling_buttons.html](http://www.homeandlearn.co.uk/java/database_scrolling_buttons.html) 我的 JPanel 上有一个按钮 Next，它必须调用此方法：

```
private void btnNextActionPerformed(java.awt.event.ActionEvent evt) {                                        
    try {
        String host = "jdbc:derby://localhost:1527/Employees";
        String uName = "bjorn";
        String uPass= "";
        conN = DriverManager.getConnection( host, uName, uPass );
        stmtN = conN.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
        String SQL = "SELECT * FROM App.Workers";
        rsN = stmtN.executeQuery( SQL );

        if ( rsN.next( ) ) {
            int id_col = rsN.getInt("ID");
            String id = Integer.toString(id_col);
            String first_name = rsN.getString("First_Name");
            String last_name = rsN.getString("Last_Name");
            String job = rsN.getString("Job_Title");

            textID.setText(id);
            textFirstName.setText(first_name);
            textLastName.setText(last_name);
            textJobTitle.setText(job);
        }
        else {
            rsN.previous( );
            JOptionPane.showMessageDialog(Workers.this, "End of File");
        }
    }
    catch (SQLException err) {
        JOptionPane.showMessageDialog(Workers.this, err.getMessage());
    }        // TODO add your handling code here:
} 
```

此方法必须在 JPanel 上显示数据库的下一个条目，但我无法使其正常工作。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:49:40.280

将其声明为 Main`Static Resultset rsN;`和以下数据库连接

```
try 
  {
    String host = "jdbc:derby://localhost:1527/Employees";
    String uName = "bjorn";
    String uPass= "";
    conN = DriverManager.getConnection( host, uName, uPass );
    stmtN = conN.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,  ResultSet.CONCUR_UPDATABLE);
    String SQL = "SELECT * FROM App.Workers";
   Static Resultset rsN = stmtN.executeQuery( SQL );
 }
catch (SQLException err) {
    JOptionPane.showMessageDialog(Workers.this, err.getMessage());
}        // TODO add your handling code here: 
```

在执行的按钮操作中你可以使用这个..

```
 private void btnNextActionPerformed(java.awt.event.ActionEvent evt)               {                                        

    try
    {
    if ( rsN.next( ) ) {
        int id_col = rsN.getInt("ID");
        String id = Integer.toString(id_col);
        String first_name = rsN.getString("First_Name");
        String last_name = rsN.getString("Last_Name");
        String job = rsN.getString("Job_Title");

        textID.setText(id);
        textFirstName.setText(first_name);
        textLastName.setText(last_name);
        textJobTitle.setText(job);
    }
    else {
        rsN.previous( );
        JOptionPane.showMessageDialog(Workers.this, "End of File");
    }
}
catch (SQLException err) {
    JOptionPane.showMessageDialog(Workers.this, err.getMessage());
}        // TODO add your handling code here:
} 
```

它的工作尝试这个..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:30:05.290

```
 PreparedStatement pstmt = conn.prepareStatement("SELECT * FROM  App.Workers",ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);

        ResultSet rs = pstmt.executeQuery();

    if(rs.next())
       {
      int id_col = rsN.getInt("ID");
        String id = Integer.toString(id_col);
        String first_name = rsN.getString("First_Name");
        String last_name = rsN.getString("Last_Name");
        String job = rsN.getString("Job_Title");

        textID.setText(id);
        textFirstName.setText(first_name);
        textLastName.setText(last_name);
        textJobTitle.setText(job);  

 }
   else
 {
   rs.beforeFirst();
   JOptionPane.showMessageDialog(Workers.this, "End of File");
  } 
```

尝试这个..

# haskell - 如何过滤结果以正确显示

> ID：16158018
> 
> 赞同：0
> 
> 时间：2013-04-22T22:46:24.707
> 
> 标签：haskell, functional-programming

我在数据库中有一个电影列表。

```
type Database = [Film]
type Title = String
type Actor = String
type Cast = [Actor]
type Fan = String
type Fans = [Fan]
type Year = Int
type Period = (Year, Year)
type Film = (Title, Cast, Year, Fans) 
```

我想要做的是找出我列表中的电影。

**功能一**

*   拥有最多粉丝
*   按特定演员名称过滤。

**功能二**

*   总体排名前 5 的电影（按粉丝数量）
*   降序排列

我目前有两个代码片段，我要么试图让它们一起工作。或者找到更好的解决方案：

```
inCast :: Actor -> Film -> Bool
inCast givenActor (_, cast, _, _) = any (\actor -> actor == givenActor) cast 
```

和

```
import Data.List
import Data.Ord

bestFilm :: Database -> Film
bestFilm = maximumBy $ comparing (length . fans) 
```

我在这件事上完全走错了吗？

非常感谢您提前提供的任何帮助。

编辑：我拥有的附加代码。不过，我似乎无法使用它来帮助我解决这部分问题。有任何想法吗？

```
filmsWithFan :: Fan -> [Film]
filmsWithFan givenFan = filter (isFan givenFan) testDatabase 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T23:04:45.730

我认为你绝对是在正确的轨道上。尽管`filmsWithFan`在这种情况下，最后一个函数 , 对您没有帮助。我会给你一些提示：

**功能一：**

首先考虑您希望为您的函数使用的类型签名：

```
topByFanAndActor :: Actor ->  Database -> Film
topByFanAndActor actor films = undefined 
```

想一想如何结合你提供的两个函数，主要是`inCast`为了`bestFilm`实现那个类型签名。您肯定需要使用处理列表的高阶函数。如果您需要另一个提示，我可以告诉您那将是什么功能。

编辑：

因此，您需要将给定列表`films`转换为给定`actor`明星所在的电影列表。为此，您需要[`filter`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3afilter)使用您的函数将该列表`inCast`。之后，您需要从该列表中提取具有最大粉丝数的电影，为此您将使用`bestFilm`.

**功能二：**

在这种情况下，类型签名将非常简单：

```
topFiveDesc :: Database -> Database 
```

但是如果你让电影的数量返回变量，你可以让它更好一点：

```
topDesc :: Database -> Int -> Database
topDesc films num = undefined 
```

想一想你现在与这些电影有什么关系。您需要按特定标准（粉丝数量）对其进行排序。与 中的标准类似定义的标准`bestFilm`。之后，您需要`num`从该列表中取出第一部电影。

# javascript - 防止 angularjs 动画在加载时最初隐藏的元素上运行

> ID：16158021
> 
> 赞同：2
> 
> 时间：2013-04-22T22:46:42.583
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-animation

[http://codepen.io/cflynn07/pen/hbgxf](http://codepen.io/cflynn07/pen/hbgxf)
^ 示例

我有一个 angularjs 动画，我不希望它在页面加载时运行应该隐藏的元素。

现在，元素被显示，然后上滑动画发生并隐藏元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T23:36:00.953

这是你要找的东西吗？

[http://codepen.io/anon/pen/JaHKL](http://codepen.io/anon/pen/JaHKL)

基本上你需要设置`style="display: none;"`来声明初始状态。

否则初始状态将是`display:inline`，当 AngularJS 读取时`data-ng-show="false"`，它将触发您的`hide`动画以匹配您的设置。

希望能帮助到你。

# javascript - jquery表单不打印输入

> ID：16158030
> 
> 赞同：0
> 
> 时间：2013-04-22T22:47:35.077
> 
> 标签：javascript, jquery

找到了一个不错的网站，可以替代在共享点中使用 /forms。我下面的代码虽然没有将我的输入打印到屏幕上。有什么建议么。

```
<script type="text/javascript">
    function printvalues() 
    {
        var div = document.getElementById("divId");
        div.innerHTML += "test";
        div.innerHTML += inputobj1.value;
    }
</script>

<div id="divId">
    username: <input name="inputobj1" value="" />

    <button id="idButton" type="button" onclick ="printvalues();">
        Generate!
    </button>

    <div id="divId">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:55:55.817

你的代码有两个问题。

首先，你缺少一个结束`</div>`标签；**并且**您有两个`<div>`具有相同`id`属性的元素！我认为您应该删除第一个 div 的`id`属性。

其次，您`<input />`缺少该`id`属性，因此它不是由`inputobj1`.

试试这个标记：

```
<script type="text/javascript">
    function printvalues() {
        var div = document.getElementById("divId");
        div.innerHTML += "test";
        div.innerHTML += document.getElementById("inputobj1").value;
    }
</script>
<div>
    username: <input id="inputobj1" name="inputobj1" value="" />

    <button id="idButton" type="button" onclick ="printvalues();">Generate!</button>

    <div id="divId"></div>
</div> 
```

这是一个[有效的 jsFiddle](http://jsfiddle.net/fSHNT/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:55:10.470

```
this doesnst work because you have two div with id="idButton" and your markup is not closed 
```

这也可以在您标记 jquery 时起作用

```
function printvalues() {
  var value = $('input[name="inputobj1"]').val();
  var $div = $('<div>',{text:value});
  $('#divId').append($div);
} 
```

或使用 divId div

```
function printvalues() {
  var value = $('input[name="inputobj1"]').val();
  $('#divId').text(value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:57:54.830

```
<script type="text/javascript">
    function printvalues() {
        var div = document.getElementById("divId");
        div.innerHTML += "test";
        div.innerHTML += inputobj1.value;
        }
</script>
<div id="divId2">
    username: <input name="inputobj1" value="" />

<button id="idButton" type="button" onclick ="javascript:printvalues();">
  Generate!
  </button>

<div id="divId"></div>
</div> 
```

或者

```
<div id="divId2">
    username: <input name="inputobj1" value="" />

<button id="idButton" type="button">
  Generate!
  </button>

<div id="divId"></div>
</div>
    <script type="text/javascript">
    function printvalues() {
        var div = document.getElementById("divId");
        div.innerHTML += "test";
        div.innerHTML += inputobj1.value;
        }
        $('#idButton').click(function(){
            printvalues()
        })
</script> 
```

你也有 2 个 divId，我假设女巫可以使用

# php - 如何抄送某人而不实际发送到php中的抄送

> ID：16158032
> 
> 赞同：0
> 
> 时间：2013-04-22T22:47:37.400
> 
> 标签：php, email

嘿，伙计们，我有一个电子邮件发件人，我的老板提出了一个我希望完成的想法，有没有办法在不将消息发送到抄送的情况下抄送某人？

例如：

```
to: test@test.com
cc: t@t.com <---- test@test.com should see he got cc'd but t@t.com should not receive this 
```

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:56:42.633

如果只是想在发送电子邮件时通知抄送地址。`e-mail`给他发一条不同的消息，比如“已发送”不是更好`blah`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T23:00:05.800

简短的回答是不，如果您在电子邮件中抄送某人，他们会收到电子邮件，没有“实际上不发送给他人 ccd”的神奇标志

您可能希望的最好结果是如果您可以访问邮件服务器，并将其修改为不发送抄送，但这将是服务器范围内的更改，所以稍后当您真正想要抄送某人时......运气不好

这可能会对您有所帮助，它显示了如何不发送到 TO 电子邮件，只发送到 CC [https://superuser.com/questions/156532/smtp-is-it-possible-to-cc-someone-without-sending -原本的](https://superuser.com/questions/156532/smtp-is-it-possible-to-cc-someone-without-sending-the-original)

# web-services - 为生成的 wsimport 文件定制 XmlAdapter

> ID：16158045
> 
> 赞同：4
> 
> 时间：2013-04-22T22:48:44.060
> 
> 标签：web-services, jax-ws

我正在使用 JAX-WS 执行合同优先的 Web 服务，以从 WSDL 生成文件。我们正在使用*jaxb-bindings.xml*使用自定义适配器将 XML 映射到 Java。然而 wsimport 动态生成了另一个适配器，它实现`XmlAdapter`并将其委托给我们的自定义适配器。

有没有办法自定义 wsimport 配置以使用我们自己的自定义`XmlAdapter`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T17:32:01.650

您可以将属性“-b”传递给 wsimport 命令以指定绑定的自定义文件，这里有一篇关于如何通过示例执行此操作的文章：http: [//docs.oracle.com/cd/E17802_01/webservices /webservices/docs/2.0/tutorial/doc/JAXBUsing4.html](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBUsing4.html)

# python - 使用键创建 python 字典：来自 d1 的值对和来自 d2 的值

> ID：16158046
> 
> 赞同：0
> 
> 时间：2013-04-22T22:48:56.403
> 
> 标签：python, string, dictionary

编辑为包含正确的虚拟代码。-由帝斯曼解决-

这个问题似乎很简单（在我的脑海中），我试图找到一种方法来“更新”一个基于另一个字典 k，v 对的字典值。

虚拟文本：

```
>>> dict1 = {'hello':'HELLO', 'bye':'BYE', 'right':'RIGHT', 'left':'LEFT'}
>>> dict2 = {'why':['hello', 'bye'], 'direction': ['left', 'right', 'right', 'right']} 
```

结果我想要： - 只需更新`dict2`以包含`dict1`' 键的值（如果存在）。

```
updated_dict = {'why':['HELLO', 'BYE'], 'direction':['LEFT', 'RIGHT', 'RIGHT', 'RIGHT']} 
```

我正在尝试这样做：

```
updated_dict = dict()
for v in dict2.values():
    id_list = dict2[v]
    for uniq_id in id_list: 
        new_id = dict1[uniq_id]
        if updated_dict.has_key(uniq_id):
            updated_dict[v].append(uniq_id)
        else:
            updated_dict[v] = list()
            updated_dict[v].append(uniq_id) 
```

由于不可散列列表，这将不起作用。这难倒我，我想不出解决这个问题的方法，有什么想法吗？

**注意**这**不是**一个简单的小写 -> 大写问题，这只是为了捕捉我的问题本质而创建的虚拟文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T22:56:35.993

疯狂的猜测：你在想这样的事情吗？

```
>>> dict1 = {'hello':'HELLO', 'bye':'BYE', 'right':'RIGHT', 'left':'LEFT'}
>>> dict2 = {'why': ['hello', 'bye'], 
    'direction': ['left', 'right', 'right', 'right'],
    'example': ["don't replace me", "right"]}
>>> new_d = {k: [dict1.get(x,x) for x in v] for k,v in dict2.items()}
>>> new_d
{'direction': ['LEFT', 'RIGHT', 'RIGHT', 'RIGHT'], 
'why': ['HELLO', 'BYE'], 
'example': ["don't replace me", 'RIGHT']} 
```

我使用了`get`接受默认值的字典方法，以允许您没有替换的值不变地通过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T23:01:31.940

可能不是最简单的，但适用于您的示例：

```
>>> m={ x:",".join([dict1[y] for y in dict2[x].split(", ")]) for x in dict2} 
```

或者

```
>>> m={ k:",".join([dict1[y] for y in v.split(", ")]) for k,v in dict2.items()} 
```

结果是一样的：

```
>>> m
>>> {'direction': 'LEFT,RIGHT,RIGHT,RIGHT', 'why': 'HELLO,BYE'} 
```

# java - 为什么我的登录用户 GUI 不能正确设置警告标签？

> ID：16158047
> 
> 赞同：4
> 
> 时间：2013-04-22T22:49:03.303
> 
> 标签：java, swing, user-interface

我正在编写一个简单的用户登录屏幕，它将通过序列化存储用户。GUI 很好，剩下的就是实现序列化，但是`warningLabel`当用户输入错误的密码或用户名时，我无法正确显示文本。它将显示第一条错误消息，但如果发生不同的错误，标签保持不变。每次出现错误时，我都需要更改标签。我将在下面发布整个代码。

UserCreateAccountGUI 类：

```
package userInfoAndSerialization;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Arrays;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
import javax.swing.UIManager;

public class UserCreateAccount implements ActionListener {

    public static int numOfUsers;

    String username;
    String password;

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e) {
            e.printStackTrace();
        }
        UserCreateAccount ucaGUI = new UserCreateAccount();
        ucaGUI.start();
    }

    JFrame frame;
    JPanel panel;
    JTextField usernameField;
    JPasswordField passwordField;
    JPasswordField confirmPasswordField;
    JLabel warningLabel;

    public void start() {
        frame = new JFrame("Create a new account");
        panel = new JPanel();

        panel.setLayout(new GridBagLayout());

        frame.getContentPane().add(BorderLayout.CENTER, panel);
        panel.setBackground(Color.ORANGE);

        JLabel userLabel = new JLabel("Username:");
        JLabel passwordLabel = new JLabel("Password:");
        JLabel confirmPasswordLabel = new JLabel("Confirm Password:");
        usernameField = new JTextField(15);
        passwordField = new JPasswordField(15);
        confirmPasswordField = new JPasswordField(15);

        GridBagConstraints right = new GridBagConstraints();
        right.anchor = GridBagConstraints.WEST;
        GridBagConstraints left = new GridBagConstraints();
        left.anchor = GridBagConstraints.EAST;

        right.weightx = (int) 2;
        right.fill = GridBagConstraints.REMAINDER;
        right.gridwidth = GridBagConstraints.REMAINDER;
        // actual GUI

        panel.add(userLabel, left);
        panel.add(usernameField, right);
        panel.add(passwordLabel, left);
        panel.add(passwordField, right);
        panel.add(confirmPasswordLabel, left);
        panel.add(confirmPasswordField, right);

        frame.setSize(300, 250);
        frame.setVisible(true);

        JButton createAccount = new JButton("Create this account");
        frame.getContentPane().add(BorderLayout.SOUTH, createAccount);
        createAccount.addActionListener(this);

        warningLabel = new JLabel();
        frame.getContentPane().add(BorderLayout.NORTH, warningLabel);
    }

    // this is where the problem is.
    public void actionPerformed(ActionEvent event) {
        if (!(passwordField.getPassword().toString().equals(confirmPasswordField.getPassword().toString()))) {
            warningLabel.setText("Your passwords do not match! Please try again!");
        } else if (passwordField.getPassword().toString().length() < 1 ) {
            warningLabel.setText("Your password is not long enough! Please try again!");
        } else if (usernameField.getText().length() < 1) {
            warningLabel.setText("Your username is not long enough! Please try again!");
        } else {
            warningLabel.setText("Account created successfully.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:55:21.677

这不会飞：

```
passwordField.getPassword().toString().
       equals(confirmPasswordField.getPassword().toString()) 
```

您最好打印出调用`.toString()`char 数组的结果，以确切了解我的意思。

例如，当我运行时：

```
String fooString = "Foo";
char[] fooArray = fooString.toCharArray();
System.out.println(fooArray.toString()); 
```

它不会像您期望的那样返回“Foo”，而是返回`toString()`char 数组的典型和预期表示：`[C@19821f`. 请注意，如果您运行此程序，您的哈希码编号将与我的不同（如果我再次运行此程序，则相同！）。

最好使用 Arrays 类`equals(...)`方法让您比较两个 char 数组。IE，

```
char[] pw1 = passwordField.getPassword();
char[] pw2 = confirmPasswordField.getPassword();
if (Arrays.equals(pw1, pw2)) {
   //...
} 
```

注意：一个不好的解决方案是使用 将 char 数组转换为“真正的”字符串`new String(myCharArray)`，但我强烈建议不要这样做，因为它会使您的密码非常脆弱且容易破解。

# java - 将 couchDB 与 vert.x 一起使用

> ID：16158049
> 
> 赞同：0
> 
> 时间：2013-04-22T22:49:09.127
> 
> 标签：java, couchdb, couchbase, vert.x

我正在研究一个与 Vert.x 一起使用的 NoSQL 数据库，基于 mongoDB 的结果不太好，所以我正在研究 CouchDB/CouchBase，至少因为我们的一些数据收集在由 Arduino 提供的 RaberryPI 上运行I/O（带有用于离线收集的 Rasbery PI CouchDB 实例）。

什么 Java 库最适合/最适合与 CouchDB 和 Vert.x 一起使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:47:15.590

我对 vert.x 了解不多，但它似乎在 JVM 上运行，所以你应该能够使用[Ektorp](https://github.com/helun/Ektorp)，这几乎是当今 CouchDB 的标准 Java 库。据我所知，它涵盖了所有核心功能，经过深思熟虑，并且维护者对拉取请求等做出了合理的响应。

[这里](http://www.ektorp.org/)有更多关于 Ektorp 的文档。

# javascript - Require.JS 是否阻止访问者查看/复制外部脚本？

> ID：16158053
> 
> 赞同：0
> 
> 时间：2013-04-22T22:49:53.717
> 
> 标签：javascript, requirejs

我最近进入了 RequireJS 并将其集成到我的主干应用程序中。在查看源代码时，我注意到所有单独的 javascript 都被引导文件替换，该行显示为：

```
<script data-main="js/main" src="js/require.js"></script> 
```

这一行阻止我查看附件。这是否意味着如果我通过引导文件加载所有脚本，用户就无法侵入我的外部源代码文件？

我最担心的是因为我在我的 Backbone 集合中使用了一个安静的 api 路由，并希望保证用户数据的安全。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T22:52:20.693

不，不是那个意思。这只是意味着脚本是动态加载的。任何人仍然可以下载您的 JS 文件或使用任何 Web 调试工具查看它们

# php - 如何使用 NULL 值更新

> ID：16158062
> 
> 赞同：0
> 
> 时间：2013-04-22T22:51:23.863
> 
> 标签：php

我正在尝试更新 mysql 表。如果没有值，我想要 null 但如果 $ODate 为空，我会得到 0。实际上我得到的是0000-00-00。我需要做的是摆脱''然后它将采用NULL值但是如果有一个有效的日期值它就不起作用。

```
if (($_POST['OrderDate'])==null){$ODate='NULL';}else {$ODate=$_POST['OrderDate'];} 
```

//这将更新有效日期，但如果设置为 NULL，则返回 0000-00-00

```
"UPDATE tblLoads SET OrderDate = '$ODate', 
```

//这将更新 NULL 但如果日期有效则返回 0000-00-00

```
"UPDATE tblLoads SET OrderDate = $ODate, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:57:25.463

```
$ODate = empty($_POST['OrderDate']) ? "NULL" : "'$_POST[OrderDate]'";

$query = "UPDATE tblLoads SET OrderDate = $ODate, ..."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:54:20.540

你可以有一个 if else，检查 if 是否`$ODate`为 NULL，如果是则不要使用引号，如果它不为空，则使用引号。

例如，

```
if (!is_null($ODate)) {
  $ODate = "'" . $ODate . "'";
}

"UPDATE tblLoads SET OrderDate = $ODate, 
```

# ios - 视频文件中的 AVFoundation 录制日期/时间戳

> ID：16158065
> 
> 赞同：0
> 
> 时间：2013-04-22T22:51:55.867
> 
> 标签：ios, xcode, avfoundation

我正在尝试做以下事情：使用 AVFoundation 在 iPhone 上录制视频并将视频与日期/时间戳（可能还有其他重要信息）合并。我的录音工作正常，输出很好。我还添加到 AVCaptureVideoPreviewLayer 并查看预览。在 AVCaptureVideoPreviewLayer 中，我添加了一个使用 NSTimer 更新的 CATextLayer - 这一切都很好。但是， CATextLayer 没有记录在 output.mov 文件中。

有没有人做过类似的事情或知道如何将 output.mov 与 CATextLayer 合并。这个想法是，当稍后观看 output.mov 时，用户应该看到拍摄视频的日期和时间（可能还有其他重要信息）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:11:16.970

您只是在预览顶部显示文本。您需要在编码之前将文本实际混合到图像缓冲区中。因此，您将使用 AVCaptureOutput 将视频数据放入应用程序的回调中。然后您需要在像素缓冲区上绘图，最后将混合缓冲区传递给 AVAssetWriterInput 进行编码和文件写入。

# java - 我的 PopUpMenu 什么也没做

> ID：16158068
> 
> 赞同：0
> 
> 时间：2013-04-22T22:52:06.853
> 
> 标签：java, android, android-intent

我正在编写[Android Developer Tutorial](http://developer.android.com/training/index.html)，当我尝试打开一个活动时，它什么也没做。

这是我的`Main.java`：

```
import android.annotation.TargetApi;
import android.app.Activity;
import android.content.Intent;
import android.os.Build;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.PopupMenu;
import android.widget.Toast;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class Main extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main); 
                Toast.makeText(getApplicationContext(), "Probandooo", Toast.LENGTH_LONG).show();
        }

        public void showPopup(View v) {
            PopupMenu popup = new PopupMenu(this, v);
            MenuInflater inflater = popup.getMenuInflater();
            inflater.inflate(R.menu.main, popup.getMenu());
            popup.show();
        }

        public boolean onMenuItemClick(MenuItem item) {
            switch (item.getItemId()) {
                case R.id.responder:
                        Intent i = new Intent (Main.this, Responder.class);
                        startActivity(i);
                    return true;
                case R.id.reenviar:
                        Toast.makeText(getApplicationContext(), "Reenviando...", Toast.LENGTH_SHORT).show();
                    return true;
                default:
                    return false;
            }
        }
        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
                // Inflate the menu; this adds items to the action bar if it is present.
                getMenuInflater().inflate(R.menu.main, menu);
                return true;
        }

} 
```

我已经在我的清单上声明了，我不知道是什么

# lua - 使用 Lua 移动角色

> ID：16158077
> 
> 赞同：0
> 
> 时间：2013-04-22T22:52:54.533
> 
> 标签：lua, coronasdk

我是 Lua 的新手，正在尝试模拟角色移动。我现在让角色左右移动。我希望角色一次移动 16 个像素。考虑到用户没有快速触摸手机，这很好用。在这种情况下，角色移动随机数量的像素。

我的问题是，我怎样才能让触摸事件一次只注册一次。

**我的代码：**

```
-- move character
function moveCharacter(event)
    if  event.phase == 'began' then
        if event.x > character.x+8 then
            transition.to(background, {time=800, x=background.x-16})
        end

        if event.x < character.x-8 then
            transition.to(background, {time=800, x=background.x+16})
        end
    end
end

function touchScreen(event)
    Runtime:removeEventListener('touch', moveCharacter)

    if  event.phase == 'began' then
        Runtime:addEventListener('touch', moveCharacter)
    end

end

Runtime:addEventListener('touch', touchScreen) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T02:52:03.750

您可以尝试使用“tap”侦听器而不是“touch”。它一次只记录一次触摸。

```
Runtime:addEventListener('tap', touchScreen) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:05:44.870

是你要找的吗..？

```
local isTransitionInProgress = false

local function resetFlag()
   isTransitionInProgress = false
end

function moveCharacter(event)
   if(event.x > character.x+8 and isTransitionInProgress==false)  then
     isTransitionInProgress = true
     transition.to(background, {time=800, x=background.x-16,onComplete=resetFlag()})
   end

   if(event.x < character.x-8 and isTransitionInProgress==false) then
     isTransitionInProgress = true
     transition.to(background, {time=800, x=background.x+16,onComplete=resetFlag()})
   end
end

background:addEventListener("tap", moveCharacter) 
```

继续编码... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T00:46:22.910

你可以试试这个：

```
function moveCharEF()
     if event.x > character.x+8 then
         background.x = background - 16
     end    
     if event.x < character.x-8 then
         background.x = background + 16
     end
end

function moveCharacter(event)
    if  event.phase == 'began' then
        display.getCurrentStage():setFocus( event.target )
        event.target.isFocus = true
        Runtime:addEventListener( "enterFrame", moveCharEF )
    elseif event.target.isFocus then
        if event.phase == "ended" then
            Runtime:removeEventListener( "enterFrame", moveCharEF )
            display.getCurrentStage():setFocus( nil )
            event.target.isFocus = false
        end
    end
end

function touchScreen(event)
    Runtime:removeEventListener('touch', moveCharacter)

    if  event.phase == 'began' then
        Runtime:addEventListener('touch', moveCharacter)
    end

end

Runtime:addEventListener('touch', touchScreen) 
```

顺便说一句，我不知道你的申请。所以角色可能移动得太快或太慢。只需更改 moveCharEF() 函数的相关行

# xaml - 如何从 Windows 8 应用程序中的单个对象中删除 EntranceThemeTransition？

> ID：16158078
> 
> 赞同：1
> 
> 时间：2013-04-22T22:52:55.240
> 
> 标签：xaml, user-interface, windows-8, microsoft-metro, winrt-xaml

似乎在 Windows 8 应用程序中添加到页面的每个对象都会获得这种“从右到左的幻灯片”-入口-转换，每当有人导航到该页面时就会开始。

是否有可能从此过渡中删除单个对象？

两者都不

```
<Object.Transitions>
      <TransitionCollection />
</Object.Transitions> 
```

[这个线程](https://stackoverflow.com/questions/12820097/how-to-remove-entrancethemetransition-from-object-or-container-in-windows-8-stor)也没有帮助......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T12:38:17.280

正如[Nigel](https://stackoverflow.com/users/90457/nigel-sampson)建议的那样，我发现的唯一解决方案是更改页面结构并将元素从具有动画的网格中取出：

```
<Page
    x:Class="App1.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App1"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.Transitions>
            <TransitionCollection/>
            <!-- Ensure no transitions in background -->
        </Grid.Transitions>

        <TextBlock FontSize="50" Margin="50">This item is not animated</TextBlock>
        <Grid>
            <Grid.ChildrenTransitions>
                <TransitionCollection>
                    <!-- add transitions here -->
                    <EntranceThemeTransition FromVerticalOffset="1500" FromHorizontalOffset="1500"/>
                </TransitionCollection>
            </Grid.ChildrenTransitions>
            <TextBlock Margin="50,100" FontSize="50">This item is animated</TextBlock>
        </Grid>
        <TextBlock FontSize="50" Margin="50,150">Another not animated item</TextBlock>
    </Grid>
</Page> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:40:17.937

AFAIK 无法将给定对象从其父对象应用的转换中豁免。我唯一能建议的是以不应用过渡的方式构建您的 xaml。我的意思是在没有子过渡的面板中拥有这个特殊项目，而页面的其余部分在具有子过渡的面板中。根据这个项目的位置，它可能非常容易或非常困难。

# batch-file - 在文件开头跳过 Microsoft 的消息

> ID：16158083
> 
> 赞同：6
> 
> 时间：2013-04-22T22:53:53.563
> 
> 标签：batch-file, vbscript

从 bat 文件运行 vbs 脚本时，有时会写入头输出文件

```
Microsoft (R) Windows Script Host Version 5.8 
Copyright (C) Microsoft Corporation 1996-2001\. Tous droits r‚serv‚s
example: cscript myvbs.vbs file.txt >result.txt 
```

我知道在输出文件上做更多+2，我可以忽略它。尽管如此，我想知道是否有可能以不同的方式做到这一点。

先感谢您

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T22:55:58.487

试试 `//Nologo Prevent logo display: No banner will be shown at execution time`

```
C:\>cscript
Microsoft (R) Windows Script Host Version 5.8
Copyright (C) Microsoft Corporation. All rights reserved.

Usage: CScript scriptname.extension [option...] [arguments...]

Options:
 //B         Batch mode: Suppresses script errors and prompts from displaying
 //D         Enable Active Debugging
 //E:engine  Use engine for executing script
 //H:CScript Changes the default script host to CScript.exe
 //H:WScript Changes the default script host to WScript.exe (default)
 //I         Interactive mode (default, opposite of //B)
 //Job:xxxx  Execute a WSF job
 //Logo      Display logo (default)
 //Nologo    Prevent logo display: No banner will be shown at execution time
 //S         Save current command line options for this user
 //T:nn      Time out in seconds:  Maximum time a script is permitted to run
 //X         Execute script in debugger
 //U         Use Unicode for redirected I/O from the console 
```

# javascript - 在三个 javascript 结果中的前两个中添加图像

> ID：16158084
> 
> 赞同：1
> 
> 时间：2013-04-22T22:54:12.157
> 
> 标签：javascript, twitter, blogger

我有一个博主脚本，可以从一个帐户中提取最新的三篇推特帖子，我是否对其进行了调整以在帖子底部添加一个图像分隔符，但不想在最后一篇帖子的底部看到分隔符。我坚持使用语法来计算前两个，然后在第三个中排除图像（或重写没有图像的行）。

这是代码块：

```
function twitterCallback2(twitters) 
{
    var statusHTML = [];
    for (var i=0; i<twitters.length; i++)
    {
        var username = twitters[i].user.screen_name;
        var status = twitters[i].text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g, function(url) 
        {
            return '<a href="'+url+'" target="_blank">'+url+'</a>';
        }).replace(/\B@([_a-z0-9]+)/ig, function(reply) 
        {
            return  reply.charAt(0)+'<a href="http://twitter.com/'+reply.substring(1)+'">'+reply.substring(1)+'</a>';
        });

        statusHTML.push('<li><span>'+status+'</span> <a class="date" href="http://twitter.com/'+username+'/statuses/'+twitters[i].id_str+'" target="_blank"><br /><p style="text-align:left; margin-top:4px;"><img src="../images/news/twitter-bird.png" style="margin:3px 2px 0 0;">'+relative_time(twitters[i].created_at)+'</a></p><img src="../images/news/twitter-divider.png" style="margin-top:4px;"></li>');
    }
    document.getElementById('twitter_update_list').innerHTML = statusHTML.join('');
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:59:10.093

未经测试，但这应该有效：

```
function twitterCallback2(twitters) {
  var statusHTML = [];
  for (var i=0; i<twitters.length; i++){
    var username = twitters[i].user.screen_name;
    var status = twitters[i].text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g, function(url) {
      return '<a href="'+url+'" target="_blank">'+url+'</a>';
    }).replace(/\B@([_a-z0-9]+)/ig, function(reply) {
      return  reply.charAt(0)+'<a href="http://twitter.com/'+reply.substring(1)+'">'+reply.substring(1)+'</a>';
    });
    var htmlToPush = '<li><span>'+status+'</span> <a class="date" href="http://twitter.com/'+username+'/statuses/'+twitters[i].id_str+'" target="_blank"><br /><p style="text-align:left; margin-top:4px;"><img src="../images/news/twitter-bird.png" style="margin:3px 2px 0 0;">'+relative_time(twitters[i].created_at)+'</a></p>';
    if (i<twitters.length-1)
        htmlToPush += '<img src="../images/news/twitter-divider.png" style="margin-top:4px;">';
    htmlToPush += '</li>';
    statusHTML.push(htmlToPush);
  }
  document.getElementById('twitter_update_list').innerHTML = statusHTML.join('');
} 
```

# android - Android 开发者 - 警报管理器与服务

> ID：16158086
> 
> 赞同：8
> 
> 时间：2013-04-22T22:54:19.203
> 
> 标签：android, alarmmanager

我正在制作一个应用程序，即使应用程序关闭，它也需要每小时执行一个功能。

首先，我想创建一个服务，但在我的测试过程中，我意识到 android 有时会杀死我的服务。所以我一直在寻找另一种解决方案，我找到了 AlarmManager。我已经实现了它，它似乎可以工作，但我怀疑它是否会与服务相同，或者它会永远运行？（直到重新启动手机...）

另一个问题，是需要创建一个新线程来执行警报管理器中的进程还是直接在其他线程中运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T22:58:58.660

> 我已经实现了它，它似乎可以工作，但我怀疑它是否会与服务相同，或者它会永远运行？（直到重新启动手机...）

它将运行到：

*   如您所述，设备已重新启动，或者
*   用户卸载您的应用，或
*   您自己取消活动，或
*   用户进入设置，在已安装应用程序列表中找到您的应用程序，点击该条目，然后单击强制停止按钮

您的应用升级后可能需要再次安排警报（我忘记了......）。

> 是否需要创建一个新线程来执行警报管理器中的进程或直接在其他线程中运行？？

除非您要做的工作只需要几毫秒，否则您将需要一个后台线程。这导致两种可能的模式：

1.  如果您不使用`_WAKEUP`-style 警报，请使用 a`getService()` `PendingIntent`将控制发送到`IntentService`每小时

2.  如果您使用的是`_WAKEUP`-style 警报，则需要使用 a `getBroadcast()` `PendingIntent`，并让它调用您的子类[my`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful)，或者您需要`WakeLock`自己管理 a 以在您做一些工作时保持设备唤醒

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T23:04:35.480

不，Android 不会终止预定的警报，除非更换应用程序或重新启动设备，否则它们会按计划执行。使用这些事件的广播接收器来重新安排警报。没有办法阻止强制停止，因为它会完全杀死您的所有应用程序组件和线程。

这取决于报警管理器做什么。如果它发送广播，则接收器限制为 10 秒。

如果它启动一个 Activity、Service 或 Intent Service，则没有限制。对于活动和服务，您必须完成或停止它，对于意图服务，您必须在流程完成之前完成。请注意，您不能在 Intent 服务中拥有另一个线程，并且您仅限于 OnHandleIntent 中的代码。

您还必须考虑设备状态。如果它处于睡眠状态并且您正在使用唤醒标志接收器，则不需要唤醒锁，但其他人则需要。设备很快就会重新进入睡眠状态。

不要因为服务而浪费系统资源，因为警报管理器可以满足您的需求。

# php - 显示前 5 个结果 PHP MySQL

> ID：16158090
> 
> 赞同：0
> 
> 时间：2013-04-22T22:54:54.030
> 
> 标签：php, mysql, forms, limit

我通过 PHP 创建了一份问卷。有十个问题，每个问题都与特定的职业有关。我拥有的代码与针对每个职业的每个问题的用户输入相匹配。在问卷结束时，结果将用户与十个职业的兼容性相匹配，以百分比形式给出匹配。我想显示前 5 个结果，但不确定要使用什么代码以及在哪里使用它。任何帮助，将不胜感激。这是代码：

```
<?php
//Footballer
$career2sequence1 = mysql_result(mysql_query("SELECT `q1` FROM `careers` WHERE    `careerid` = '2'"), 0);
?>

<?php
$career2result1 = $question1/$career2sequence1;
if ($career2result1>1) {
$career2result1 = $career2sequence1/$question1
?>

<?php 
}
?>

<?php
$careername1 = 'Nursing ';
$careername2 = 'Footballer ';
$careername3 = 'Dentist ';
$careername4 = 'Hairdressing ';
$careername5 = 'IT ';
$careername6 = 'Trade ';
$careername7 = 'Doctor ';
$careername8 = 'Teacher ';
$careername9 = 'Sales Assistant ';
$careername10 = 'Cook/Chef ';
?>

<h4>

<?php
$nursing = array("Nursing", $result1, "% ", "$link1");
$footballer = array("Footballer", $result2, "% ", "$link2");
$dentist = array("Dentist", $result3, "% ", "$link3");
$hairdresser = array("Hairdresser", $result4, "% ", "$link4");
$IT = array("IT", $result5, "% ", "$link5");
$Trade = array("Trade", $result6, "% ", "$link6");
$Doctor = array("Doctor", $result7, "% ", "$link7");
$Teacher = array("Teacher", $result8, "% ", "$link8");
$SalesAssistant = array("Sales Assistant", $result9, "% ", "$link9");
$CookChef = array("Cook/Chef", $result10, "% ", "$link10");

$items = array($nursing, $footballer, $dentist, $hairdresser, $IT, $Trade, $Doctor,    $Teacher, $SalesAssistant, $CookChef);

foreach ($items as $item) {
$item[1].'<-'.$item[0].'<br>';;
}

function compare($a, $b) {
if ($a[1] == $b[1]) {
    return 0;
}
return ($a[1] > $b[1]) ? -1 : 1;
}

usort($items, 'compare');

foreach ($items as $item) {

echo implode(' ',$item).'<br>';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:11:09.783

使用 LIMIT 直接在查询中使用它。

```
SELECT `q1` FROM `careers` WHERE `careerid` = '2' LIMIT 0,5 
```

# testing - CMake：为 ctest 设置环境变量（或者自动从 ctest/make test 获取失败的测试输出）

> ID：16158091
> 
> 赞同：43
> 
> 时间：2013-04-22T22:54:55.097
> 
> 标签：testing, cmake, environment-variables, output, ctest

我希望 ctest 默认向我显示失败的测试输出。也就是说，我想运行：

```
$ make all test 
```

并查看失败测试的任何输出，而无需`cat Testing/Temporary/LastTest.log`.

似乎有两种方法可以做到这一点：

(1) 设置`CTEST_OUTPUT_ON_FAILURE`环境变量：

```
 $ CTEST_OUTPUT_ON_FAILURE=1 make all test
 $ # or CTEST_OUTPUT_ON_FAILURE=1 ctest 
```

(2) 指定调用的`--output-on-failure`标志：`ctest`

```
 $ ctest --output-on-failure 
```

有没有办法编写 CMakeLists.txt 文件，以便 ctests 在正常的“全部测试”调用中默认转储失败的测试输出，而无需在会话中全局导出环境变量或使用自定义目标`make check`（如所述[在这里](https://stackoverflow.com/questions/5709914/using-cmake-how-do-i-get-verbose-output-from-ctest)）？

我知道该`SET_TESTS_PROPERTIES()`命令，但尝试如下：

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
PROJECT(testenv CXX)
ENABLE_TESTING()
ADD_EXECUTABLE(hello hello.cpp)
ADD_TEST(testhello hello)

# Following sets the environment variable for the shell in which the test
# progoram 'hello' is run, but not the shell in which ctest is run
SET_TESTS_PROPERTIES(testhello
    PROPERTIES ENVIRONMENT "CTEST_OUTPUT_ON_FAILURE=1") 
```

并且实验表明环境变量是在执行测试程序的shell中设置的，而不是在执行ctest的shell中设置的。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-23T07:12:06.673

内置`test`目标无法修改，但您可以添加自定义目标，该目标通过以下方式`check`调用开关：`ctest``--output-on-failure`

```
if (CMAKE_CONFIGURATION_TYPES)
    add_custom_target(check COMMAND ${CMAKE_CTEST_COMMAND} 
        --force-new-ctest-process --output-on-failure 
        --build-config "$<CONFIGURATION>")
else()
    add_custom_target(check COMMAND ${CMAKE_CTEST_COMMAND} 
        --force-new-ctest-process --output-on-failure)
endif() 
```

对于单一构建类型和多配置构建，必须以不同方式设置自定义目标。在后一种情况下，必须使用标志将活动构建配置传递给`ctest`调用。默认情况下由内置目标`--build-config`使用`--force-new-ctest-process`。`test`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-11T07:27:27.397

现在有一个列表变量`CMAKE_CTEST_ARGUMENTS`，您可以在其中设置 ctest 参数。

[https://cmake.org/cmake/help/latest/variable/CMAKE_CTEST_ARGUMENTS.html](https://cmake.org/cmake/help/latest/variable/CMAKE_CTEST_ARGUMENTS.html)

# drupal-7 - 使用 HTTPS:// 访问 drupal 站点时收到消息“此页面包含不安全的内容”？

> ID：16158099
> 
> 赞同：0
> 
> 时间：2013-04-22T22:55:53.800
> 
> 标签：drupal-7

我已经开发了 Drupal 站点。但是当我使用 HTTPS:// 访问我的网站时，浏览器会给我一条消息 "This page has insecure content" 。我已将我的站点数据放在安全站点上。

我出于某种目的在该页面中加载 JS 文件。那么，是JS文件问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:57:18.277

实际上，您可能从“非安全”源（使用 http 协议而不是 https）加载了一些资产（css 或 javascript）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:16:04.217

我认为这不应该是 JS 或 CSS 问题，除非您使用绝对 URL 包含它们：例如，如果您在主题的模板文件中添加以下行：

```
<link rel="stylesheet" type="text/css" href="http://yoursite/mystyle.css">
<script src="http://yoursite/myScript.js"></script> 
```

这通过`http`而不是`https`. 相反，您应该使用：

```
<link rel="stylesheet" type="text/css" href="mystyle.css">
<script src="myScript.js"></script> 
```

请注意，第二段代码中的 URL 包含相对 URL，并且将使用与通过浏览器访问站点相同的协议来提供文件。

如果不是这种情况，您必须扫描页面上的所有链接，并找到以 format`http://...`而不是`https://...`. 当浏览器发现并非所有页面内容都使用加密提供时，就会出现此问题。
希望这是有道理的。请随时询问进一步的问题。

# macos - 使用 CoreAnimation 层实现基于文档的应用程序

> ID：16158102
> 
> 赞同：1
> 
> 时间：2013-04-22T22:56:11.837
> 
> 标签：macos, cocoa, design-patterns, cocoa-design-patterns

我正在开发一个基于*CoreAnimation*框架的图表绘制应用程序。我有一个通用的功能集，包括：创建图表对象、编辑它们的几何属性、移动它们等。每个对象都表示为一个单独的`CALayer`（或一组图层）。

我的应用程序也是基于文档的，这意味着我遵循 Cocoa 强加的文档管理设计。

以下是应用程序外观的示例：

[图片 http://guitar.rizo.me/views/main.view/image3.png](http://guitar.rizo.me/views/main.view/image3.png)

尽管我确实了解事物应该如何工作的基本原则，但我无法弄清楚如何在模型/视图实现之间进行清晰的设计分离。

*   类是`CALayer`视图类还是我也可以将其视为模型（因为它的属性是应用程序数据的唯一部分）？

*   考虑到基于文档的体系结构，这样的应用程序的理想组织是什么？

我看不到任何干净的方法来解决这个设计问题，你会推荐什么？

提前致谢。

# objective-c - 对 UIBezierPath 应用缩放和平移转换

> ID：16158104
> 
> 赞同：4
> 
> 时间：2013-04-22T22:56:22.723
> 
> 标签：objective-c, uibezierpath, affinetransform

我有一个 UIBezierPath，我想：

*   移动到 UIView 上的任意坐标
*   变大或变小

我正在根据预定义坐标列表绘制 UIBezierPath。我实现了这段代码：

```
CGAffineTransform move = CGAffineTransformMakeTranslation(0, 0);

CGAffineTransform moveAndScale = CGAffineTransformScale(move, 1.0f, 1.0f);
[shape applyTransform:moveAndScale]; 
```

我也尝试过缩放然后移动形状，这似乎没什么区别。

使用此代码：

```
[shape moveToPoint:CGPointMake(0, 0)]; 
```

我开始在 (0, 0) 处绘制形状，但这就是发生的情况。我认为这是因为正在从 0、0 到列表中的下一个点绘制一条线。

![在此处输入图像描述](https://i.stack.imgur.com/s2us2.png)

当我将移动变换设置为 (0, 0) 时，这就是它绘制的位置。在这里，moveToPoint 设置为列表中的第一个坐标对。如您所见，它不在 0, 0 处。

![在此处输入图像描述](https://i.stack.imgur.com/ehP56.png)

最后，增加 1.0f 将形状完全移出屏幕，无论我告诉形状移动到哪里。

有人可以帮我理解为什么形状没有在 0、0 处绘制，以及为什么当我缩放它时它会移出屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:30:09.743

*（根据 OP 在上述评论中的要求）*

我可能在这方面错了，但这段代码不是

```
CGAffineTransformMakeTranslation(0, 0); 
```

只是说应该沿 x 轴移动 0 个像素，沿 y 轴移动 0 个像素？（[参考](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGAffineTransform/Reference/reference.html#//apple_ref/c/func/CGAffineTransformMakeTranslation)）它实际上不会将任何东西移动到 origo (0, 0)，就像您正在尝试做的那样。

此外，您似乎有点误解了如何正确使用`moveToPoint:`.. 将其视为移动光标的一种方式，但实际上并没有绘制任何东西。这只是一种表达“我想在此时开始绘画”的方式。绘图本身可以通过其他方法进行。如果你想画一个边长为*L*的正方形，那么你可以做这样的事情..

```
// 'shape' is a UIBezierPath
NSInteger L = 100;
CGPoint origin = CGPointMake(50, 50);
[shape moveToPoint:origin]; // Initial point to draw from
[shape addLineToPoint:CGPointMake(origin.x+L, origin.y)]; // Draw from origin to the right
[shape addLineToPoint:CGPointMake(origin.x+L, origin.y+L)]; // Draw a vertical line
[shape addLineToPoint:CGPointMake(origin.x, origin.y+L)]; // Draw bottom line
[shape addLineToPoint:origin]; // Draw vertical line back to origin 
```

请注意，此代码根本没有经过测试，但它应该让您了解如何使用`moveToPoint:`和`addLineToPoint:`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T23:08:05.190

您需要注意应用变换的顺序，并且应该考虑将变换连接在一起并一次性应用它们。

顺序很重要，因为每个变换都会影响路径中的所有 x,y 位置。因此，翻译受比例影响。颠倒顺序，路径将被缩放然后移动。

此外，坐标系也很重要，尤其是在缩放时。确保在 0,0 附近绘制，然后缩放，然后平移。如果您将点标准化，这是最简单的。归一化纬度/经度值意味着将纬度除以 90，将经度除以 180（这实际上会给您一个范围 -1..1）。执行此操作时，您应该首先缩放路径，然后将其平移到视图的中心，然后应用您想要的平移。

# c - 下标值既不是数组也不是指针函数错误

> ID：16158106
> 
> 赞同：0
> 
> 时间：2013-04-22T22:56:25.400
> 
> 标签：c, arrays, function

开发一个程序，该程序将从几个文件中读取数据，将其扫描成数组，并最终在屏幕上打印 13 个名称，每个名称旁边有 4 个数字，并且在一种分级表中这些数字后面有一个字母。

但是，我正在使用的功能之一是计算平均值时遇到问题。它将一个学生测试的所有分数组合成一个值，然后将其除以 4 以找到平均值，然后将该平均值存储到不同数组的一个元素中。

函数调用是：

```
avg(&scores, &average); 
```

分数和平均值定义如下：

```
int scores[13][4];
float average[13]; 
```

并且分数已使用此循环填充：

```
for(i=0; i<=13; i++)
{
    for(j=0; j<=4; j++)
    {
    fscanf(score, "%d", &scores[i][j]);
    }
}
fclose(score); 
```

作为参考，使用的文件打开语句是：

```
FILE *student, *score;
score = fopen("scores.dat", "r"); 
```

函数本身如下所示：

```
void avg(int *scores, float *average)
{
int total1 = scores[0][0] + scores[0][1] + scores[0][2] + scores[0][3];
int total2 = scores[1][0] + scores[1][1] + scores[1][2] + scores[1][3];
int total3 = scores[2][0] + scores[2][1] + scores[2][2] + scores[2][3];
int total4 = scores[3][0] + scores[3][1] + scores[3][2] + scores[3][3];
int total5 = scores[4][0] + scores[4][1] + scores[4][2] + scores[4][3];
int total6 = scores[5][0] + scores[5][1] + scores[5][2] + scores[5][3];
int total7 = scores[6][0] + scores[6][1] + scores[6][2] + scores[6][3];
int total8 = scores[7][0] + scores[7][1] + scores[7][2] + scores[7][3];
int total9 = scores[8][0] + scores[8][1] + scores[8][2] + scores[8][3];
int total10 = scores[9][0] + scores[9][1] + scores[9][2] + scores[9][3];
int total11 = scores[10][0] + scores[10][1] + scores[10][2] + scores[10][3];
int total12 = scores[11][0] + scores[11][1] + scores[11][2] + scores[11][3];
int total13=  scores[12][0] + scores[12][1] + scores[12][2] + scores[12][3];

float avg1 = total1 / 4;
float avg2 = total2 / 4;
float avg3 = total3 / 4;
float avg4 = total4 / 4;
float avg5 = total5 / 4;
float avg6 = total6 / 4;
float avg7 = total7 / 4;
float avg8 = total8 / 4;
float avg9 = total9 / 4;
float avg10 = total10 / 4;
float avg11 = total11 / 4;
float avg12 = total12 / 4;
float avg13 = total13 / 4;

return;
} 
```

还没有完成，我还是要告诉函数把 avg1-avg13 分配给数组。但是一旦我修复了这个错误，我就会努力解决这个问题。

尝试按原样运行程序会给我很多错误，所有这些都基本相同：

```
ghp11.c: In function 'avg':
ghp11.c:127: error: subscripted value is neither array nor pointer 
```

我不确定如何修复它以使其正常工作。我正在尝试将 4 个数组值组合成一个整数值并将其存储在 total1 中，等等；以便它们可以被平均化并存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:39:29.403

删除`&`from`&scores`和`&average`调用 to `avg`：

```
avg( scores, average ); 
```

将原型更改`avg`为

```
void avg( int (*scores)[4], float *average ) // or int scores[][4] 
```

并将身体更改`avg`为

```
{
  int i = 0;

  for ( i = 0; i < 13; i++ )
  {
    // you could write another loop for summing your total, 
    // but for just 4 elements writing it out isn't a big deal.

    int total = scores[i][0] + scores[i][1] + scores[i][2] + scores[i][3];
    average[i] = total / 4.0;
  }
} 
```

为什么会这样：除非它是 、 或一元运算符的操作数，`sizeof`“ `_Alignof`N`&`元素数组`T`”类型的表达式被转换（“衰减”）为“指针指向`T`”类型的表达式。由于`scores`调用中的类型`avg`是“4 元素数组的 13 元素数组`int`”，因此传递给函数的表达式将具有类型“指向 4 元素数组的指针`int`”，或者`int (*)[4]`。

同样，表达式“average”的类型将从“13-element array of `float`”转换为“pointer to `float`”。

的类型`&scores`将是“指向 4 元素数组的 13 元素数组的指针`int`”，或`int (*)[14][3]`. 您可以这样做，但您必须`scores`在`avg`函数中显式取消引用才能为其下标，例如

```
int total = {*scores)[0][0] + (*scores)[0][1] + ...; 
```

但是，由于我们将它传递为`int (*scores)[4]`，我们可以写

```
int total = scores[0][0] + scores[0][1] + ...; 
```

因为下标操作`scores[0]`隐式地取消引用指针。

请注意，在您的代码中，您的平均值最终都会被截断为较低的整数值；一个整数除以一个整数给出一个整数结果，所以像这样的表达式`5/4`会产生 1，并且`3/4`会产生 0。如果你想得到一个小数值，你需要将其中一个操作数设为浮点数：

```
average[i] = total / 4.0; 
```

最后，您不会将结果平均值写入`average`数组；您只是在创建和分配一堆`avg`函数本地的变量；一旦函数退出，这些变量就会消失。在上面的代码中，我只是用数组元素替换了你的变量。`avg*N*``avg*N*``average`

任何时候你发现自己创建了一堆变量，比如`avg1`, `avg2`, `avg3`，退后一步，意识到你*真正*想要的是一个数组。同样，当你发现自己在写这样的陈述时

```
avg1 = total1 / 4.0;
avg2 = total2 / 4.0;
avg3 = total3 / 4.0; 
```

你*真正*想要的是一个循环：

```
for ( i = 0; i < N; i++ )
   avg[i] = total[i] / 4.0; 
```

唯一真正剩下的缺陷是该`avg`函数假定每个数组中总是有 13 个元素，这限制了它的实用性。最好将行数作为单独的参数传递：

```
void average( int (*scores)[4], int *average, size_t rows )
{
  size_t i;

  for ( i = 0; i < rows; i++ )
  {

    int total = scores[i][0] + scores[i][1] + scores[i][2] + scores[i][3];
    average[i] = total / 4.0;
  }
} 
```

并将其称为

```
size_t rows = sizeof scores / sizeof scores[0]; // divides the total number of bytes
                                                // in the array by the number of bytes
                                                // in a single element, giving the
                                                // number of elements in the array
avg( scores, average, rows ); 
```

当然，其中的列数`scores`仍然固定为 4。如果您想支持具有任意列数的分数，那么您将不得不做一些不同的事情。但是，我们将把它留到未来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T23:04:42.880

要将二维数组传递给函数，您必须像这样编写函数定义

```
void avg( int score[][4], float *average ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T23:05:15.050

我注意到的第一件事是你的缓冲区溢出。for i 和 for j 循环溢出一个。

# regex - 正则表达式匹配字符串之间的所有内容 - 复杂

> ID：16158112
> 
> 赞同：1
> 
> 时间：2013-04-22T22:57:03.170
> 
> 标签：regex

我有这个代码： http: [//pastebin.com/7MHHVu2T](http://pastebin.com/7MZHVu2T)

我需要获取“公共函数 addTopicParticipants”和“公共函数 deleteTopics”之间的所有内容

我试过了：

```
/public function addtopicParticipants(.*?)public function deleteTopics/ 
```

这是我唯一记得的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:30:05.377

```
preg_match('/public function addTopicParticipants(.*?)public function deleteTopics/s', $text, $match;

$found = $match[1]; 
```

`s`修饰符允许`.`匹配换行符。

[在这里](http://regexpal.com/?flags=gs&regex=public%20function%20addTopicParticipants%28.%2a?%29public%20function%20deleteTopics&input=%20public%20function%20addTopicParticipants%28%20%24topicID,%20%24invitedUsers,%20%24readingMemberID%20%29%0A%20%0A%20%20%20%20%20%20%20%20%7B%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//-----------------------------------------%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20INIT%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//-----------------------------------------%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24topicData%20%20%20%20%20%20%20%20%20%20%20=%20%24this-%3EfetchTopicData%28%20%24topicID%20%29;%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24memberData%20%20%20%20%20%20%20%20%20%20=%20IPSMember%3a%3aload%28%20intval%28%20%24readingMemberID%20%29,%20%27extendedProfile,groups%27%20%29;%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24currentParticipants%20=%20%24this-%3EfetchTopicParticipants%28%20%24topicID%20%29;%0A%20%0A%20%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//-----------------------------------------%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Can%20access%20this%20topic?%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//-----------------------------------------%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%20%24this-%3EcanAccessTopic%28%20%24memberData%5B%27member_id%27%5D,%20%24topicData,%20%24currentParticipants%20%29%20!==%20TRUE%20%29%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Exception%28%20%27NO_PERMISSION%27%20%29;%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//-----------------------------------------%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Build%20invited%20users%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//-----------------------------------------%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24invitedUsersData%20=%20%24this-%3EcheckAndReturnInvitedUsers%28%20%24invitedUsers,%20%24memberData,%20count%28%24currentParticipants%29%20%29;%0A%20%0A%20%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%20isset%28%24invitedUsersData%5B%20%24topicData%5B%27mt_starter_id%27%5D%20%5D%29%20%29%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%20%24memberData%5B%27member_id%27%5D%20==%20%24topicData%5B%27mt_starter_id%27%5D%20%29%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Exception%28%20%27CANT_INVITE_SELF%27%20%29;%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%0A%20%0A%20%20%20%20%20%20%20%20%0A%20%0A%20%20%20%20%20%20%20%20public%20function%20deleteTopics%28%20%24memberID,%20%24ids,%20%24rawSQL=NULL,%20%24hardDelete=false%20%29%0A%20%0A%20%20%20%20%20%20%20%20%7B%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//-----------------------------------------%0A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Grab%20data)测试

# oauth - 带有证书的 OAuth 复制？

> ID：16158115
> 
> 赞同：4
> 
> 时间：2013-04-22T22:57:25.213
> 
> 标签：oauth, erlang, couchdb

感谢@Kxepal 的[详细回答](https://stackoverflow.com/questions/15127066/step-by-step-instruction-for-secure-replication)，使 OAuth 与 CouchDB 复制一起工作。现在我正在寻找如何用 X509（或其他）密钥替换管理员已知的密钥的洞察力，因此管理员将只有用户的公钥并且无法模拟一个。

使用 OAuth 身份验证密钥启用 CouchDB 复制的步骤是什么。

# mysql - MySQL 表通过普通 sql 错误进行规范化

> ID：16158124
> 
> 赞同：-1
> 
> 时间：2013-04-22T22:58:10.057
> 
> 标签：mysql, normalizing

我需要标准化我的桌子。所以我制作了一个我执行的脚本（sql）。我想将表 A（旧）中的所有现有客户插入表 B（新）中。

它只是用

```
INSERT INTO `A` SELECT * FROM `B`; 
```

但我想设置一些外键值。table 中有一个`city`字段，`A`但table 中有一个`city_id`字段`B`。我想到了这样的事情：

```
INSERT INTO `A` (`id`, `name`, `city_id`)
SELECT `id`, `name` FROM `B`,
(SELECT `cities`.`id` FROM `cities` WHERE `cities`.`name` = (SELECT `city` FROM `A` WHERE `A`.`id` = `B`.`id`)) `temp_cities`; 
```

不幸的是，这不起作用，因为`B`. `id`未设置:-(错误如下：

```
Error (1054): Unknown column 'B.id' in 'where clause') 
```

我什么时候搞砸了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:02:14.993

只需使用语法 SELECT id **AS 'city_id'** FROM B ，您可以“命名”选择中的每一列，然后您可以毫无问题地插入它。

您可以像这样停用外键约束：

```
SET foreign_key_checks = 0; 
```

并将其切换回

```
SET foreign_key_checks = 1; 
```

完成查询后。这不是最佳实践，但有时会有所帮助。

# django - Django 对象模型中的缓存

> ID：16158127
> 
> 赞同：1
> 
> 时间：2013-04-22T22:58:19.843
> 
> 标签：django

我正在运行一个系统，其中有几个工人从消息队列中获取作业，所有这些都使用 Django 的 ORM。在一种情况下，我实际上是在将消息从一个工作人员传递到另一个队列中的另一个工作人员。它是这样工作的：

*   queue1 中的 Worker1 创建一个对象（MySQL INSERT）并将消息推送到 queue2
*   Worker2 接受 queue2 中的新消息并检索对象（MySQL SELECT），使用 Djangos objects.get(pk=object_id)

这适用于第一条消息。但是在第二条消息中，worker 2 总是失败，因为它找不到 ID 为 object_id 的对象（Django 异常 DoesNotExist）。

这在我使用 Django 1.2.3 和 MySQL 5.1.66 的本地设置中可以无缝运行，问题只发生在我运行 Django 1.3.1 和 MySQL 5.5.29 的测试环境中。

如果我每次在worker1推送消息之前重新启动worker2，它就可以正常工作。这让我相信正在进行某种缓存。

Django 的 objects.get() 中是否有任何缓存在这些版本之间有所不同？如果是这种情况，我可以通过某种方式清除它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:48:30.010

该问题可能与使用 MySQL 事务有关。在发送方的站点上，事务必须在通知接收方要读取的项目之前提交到数据库。在接收方，必须设置用于会话的事务级别，以便在发送方提交后，新数据在会话中变得可见。

默认情况下，MySQL 使用`REPEATABLE READ`隔离级别。这会导致存在多个进程读取/写入数据库的问题。一种可能的解决方案是使用如下选项在 Django`settings.py`文件中设置隔离级别`DATABASES`：

```
'OPTIONS': {'init_command': 'SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED'}, 
```

但是请注意，更改事务隔离级别可能会产生其他副作用，尤其是在使用基于语句的复制时。

以下链接提供了更多有用的信息：

*   [如何强制 Django 忽略任何缓存并重新加载数据？](https://stackoverflow.com/questions/3346124/how-do-i-force-django-to-ignore-any-caches-and-reload-data)
*   [Django 票#13906](https://code.djangoproject.com/ticket/13906)

# sql - 用日期复制行

> ID：16158128
> 
> 赞同：0
> 
> 时间：2013-04-22T22:58:22.610
> 
> 标签：sql, sql-server-2008

我正在尝试为每个半月支付期和半月工资单为多个项目的数百名员工建立一个表格。我从ERP系统收到的行数据格式如下：

> 名称、项目、负担金额（所有期间的总工资）、calcbegin（日期）、calend（日期）

我想建立一个表格，将每一行复制 n 次（n 是 calcbegin 和 calcend 之间的半月支付期数）。

我的问题是如何生成范围之间的半月日期​​，然后使用 mssql 2008 生成包含每个日期和相关信息的行。

这是一个数据样本。我认为 CTE 是要走的路，但我不知道如何让它发挥作用。如果我能让 CTE 正常工作，我可以对日期感到不安。

```
Existing Data                   
Name    Amount   Per amt    calcbegin   calcend Pay Periods
Name1   5000     2,500  4/15/2013   5/15/2013   2
Name2   10000    2,000  4/15/2013   6/30/2013   5

Results Requested                   
Name    Amount   Pay amt    calcbegin   calcend Payperiods
1-Name1 5000     2,500  04/15/13    4/30/2013   1
2-Name1 5000     2,500  05/01/13    5/15/2013   1

1-Name2 10000    2,000  04/15/13    4/30/2013   1
2-Name2 10000    2,000  05/01/13    5/15/2013   1
3-Name2 10000    2,000  05/16/13    5/31/2013   1
4-Name2 10000    2,000  06/01/13    6/15/2013   1
5-Name2 10000    2,000  06/16/13    6/30/2013   1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:35:22.467

非常感谢 Justin Stolle，SQL: Turn a Date Range into a List of Dates found with Google。扩展他的示例，我能够构建一个正常工作的递归 CTE。现在调整日期

```
WITH cte (id, b, a_p, n,e ,pp, a, ae) AS 
          (SELECT        Range_ID as id
                        ,DATEADD(wk, 2,[calc begin]) AS B
                        ,[Activity/Project] AS a_p 
                        ,Name as n
                        ,[Calc End] as E
                        ,DATEDIFF(w,[calc begin],[Calc End])/14 as pp
                        ,([Salary Encumbrance] + [Benefits Encumbrance])/(DATEDIFF(w,[calc begin],[Calc End])/14) as a
                        ,[Account Executive] as ae
               FROM EncumReport
           WHERE [Account Executive] like '%25%' 

           UNION ALL
           SELECT    Range_Id as id
                    ,(DATEADD(wk, 2, cte.b)) AS b
                    ,[activity/project] as a_p 
                    ,Name as n
                    ,[Calc End] as E
                    ,DATEDIFF(w,[calc begin],[Calc End])/14 as pp
                    ,([Salary Encumbrance] + [Benefits Encumbrance])/(DATEDIFF(w,[calc begin],[Calc End])/14) as a
                    ,[Account Executive] as ae
               FROM cte
               INNER JOIN encumreport
                      ON cte.id = range_id
                WHERE cte.b < [calc end]-7)

     SELECT id AS range_id  
           ,b AS date_within_range,a_p as Projects,  n as Name,e as EndDate, pp as PayPeriods, a as Amounts,ae as AccountExecutive  
      FROM cte
     ORDER BY id, b 
```

# shim - 为什么我不能使用 VS 假框架来伪造 Thread.Sleep

> ID：16158130
> 
> 赞同：0
> 
> 时间：2013-04-22T22:58:31.110
> 
> 标签：shim

我无法在 mscorlib.fakes 库中找到伪造的 Thread.Sleep。我在[http://www.codewrecks.com/blog/index.php/2012/04/27/using-shims-in-visual-studio-11-to-test-untestable-code/遵循方向](http://www.codewrecks.com/blog/index.php/2012/04/27/using-shims-in-visual-studio-11-to-test-untestable-code/)

[http://msdn.microsoft.com/en-us/library/d00bd51t(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/d00bd51t(v=vs.100).aspx)显示 Thread.Sleep 在 mscorlib 中，所以我添加了它的假但 System.Threading.Fakes 命名空间不包含 ShimThread也不是 StubThread。Thread 是一个密封类，但 VS fake 框架应该能够在密封类中伪造静态方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-09T20:17:04.663

这是[很有可能的](http://msdn.microsoft.com/en-us/library/hh708916.aspx)。默认情况下，Fakes 框架不会为 mscorlib 的大多数类型（包括 System.Threading 命名空间中的类型）生成填充程序，因为 Fakes 框架本身使用 mscorlib。因此只有少数类型被填充，但是，您可以通过更改项目中添加的 mscorlib.fakes 文件来配置此行为。

```
<Fakes xmlns="http://schemas.microsoft.com/fakes/2011/">
    <Assembly Name="mscorlib" Version="4.0.0.0"/>
    <ShimGeneration>
        <Add Namespace="System.Threading!"/>
    </ShimGeneration>
</Fakes> 
```

现在构建测试项目，您可以看到`System.Threading`命名空间中类型的填充程序，包括`ShimThread.SleepInt32`.

[在此页面上](http://msdn.microsoft.com/en-us/library/hh708916.aspx)阅读有关 .fakes xml 文件的更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-06T07:15:00.090

这是因为 Shim 框架无法伪造 mscrolib 和 System 中的所有 .Net BCL 类，请参阅：[MSDN](http://msdn.microsoft.com/en-us/library/hh549176.aspx#bkmk_limitations)。

不幸的是，我找不到不受支持的类型列表。但似乎目前不支持主要不是纯 CLR 类或需要操作系统功能的类型（线程、FileSystemWatcher 等）。

# windows - 如何使用批处理文件进行ftp？

> ID：16158138
> 
> 赞同：54
> 
> 时间：2013-04-22T22:59:33.553
> 
> 标签：windows, batch-file, ftp

我想要一个批处理文件通过 ftp 传输到服务器，读出一个文本文件，然后断开连接。服务器需要用户名和密码。我试过了

```
@echo off
pause
@ftp example.com
username
password
pause 
```

但它从未登录过。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-07-04T05:18:31.517

[0x90h](https://stackoverflow.com/users/2309386/0x90h)的回答帮了大忙……

我将此文件保存为 u.ftp：

```
open 10.155.8.215 
user
password
lcd /D "G:\Subfolder\"
cd  folder/
binary
mget file.csv
disconnect
quit 
```

然后我运行了这个命令：

```
ftp -i -s:u.ftp 
```

它奏效了！！！

非常感谢人:)

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-04-23T01:43:01.907

使用 Windows FTP 客户端时，您可能希望使用该`-s:filename`选项来指定要运行的 FTP 客户端的脚本。该文档特别指出，您不应尝试使用`<`字符将输入通过管道传输到 FTP 客户端。

脚本的执行将立即开始，因此它适用于用户名/密码。

但是，此设置的安全性值得怀疑，因为您现在拥有 FTP 服务器的用户名和密码，任何决定查看您的批处理文件的人都可以看到。

无论哪种方式，您都可以从批处理文件动态生成脚本文件，然后将其传递给 FTP 客户端，如下所示：

```
@echo off

REM Generate the script. Will overwrite any existing temp.txt
echo open servername> temp.txt
echo username>> temp.txt
echo password>> temp.txt
echo get %1>> temp.txt
echo quit>> temp.txt

REM Launch FTP and pass it the script
ftp -s:temp.txt

REM Clean up.
del temp.txt 
```

将*servername*、*username*和*password*替换为您的详细信息，批处理文件将生成脚本作为 temp.txt 使用该脚本启动 ftp，然后删除该脚本。

如果您总是获得相同的文件，则可以将 替换`%1`为文件名。如果不是，您只需启动批处理文件并提供要获取的文件名作为参数。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-07-01T15:22:56.637

这是一篇旧文章，但是，一种替代方法是使用命令选项：

```
ftp -n -s:ftpcmd.txt 
```

-n 将禁止初始登录，然后文件内容将是：（将 127.0.0.1 替换为您的 FTP 站点 url）

```
open 127.0.0.1
user myFTPuser myftppassword
other commands here... 
```

这避免了用户/密码在不同的行

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-22T23:05:07.373

您需要将 ftp 命令写入文本文件，并将其作为 ftp 命令的参数，如下所示：

```
ftp -s:filename 
```

更多信息在这里：[http ://www.nsftools.com/tips/MSFTP.htm](http://www.nsftools.com/tips/MSFTP.htm)

我不确定它是否适用于用户名和密码提示。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-22T23:06:25.110

批处理文件的每一行都会被执行；但只有在上一行完成之后。在您的情况下，一旦它到达 ftp 行，ftp 程序就会启动并接管用户输入。当它关闭时，其余行将执行。这意味着用户名/密码永远不会发送到 FTP 程序，而是会在 ftp 程序关闭后被提供给命令提示符本身。

相反，您需要在 ftp 命令行上传递您需要的所有内容。就像是：

```
@echo off
echo user MyUserName> ftpcmd.dat
echo MyPassword>> ftpcmd.dat
echo bin>> ftpcmd.dat
echo put %1>> ftpcmd.dat
echo quit>> ftpcmd.dat
ftp -n -s:ftpcmd.dat SERVERNAME.COM
del ftpcmd.dat 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-04-22T23:08:46.040

利用

```
ftp -s:FileName 
```

如[Windows XP Professional 产品文档](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ftp.mspx?mfr=true)中所述。

您必须指定代替*FileName*的文件名必须包含您要发送到服务器的 FTP 命令。这些命令包括

*   **打开计算机 [端口]**以连接到 FTP 服务器，
*   **用户 UserName [Password] [Account]**与 FTP 服务器进行身份验证，
*   **获取 RemoteFile [LocalFile]**以检索文件，
*   **quit**结束 FTP 会话并终止 ftp 程序。

更多命令可以在[Ftp 子命令](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ftp.mspx?mfr=true)下找到。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-09T21:47:05.823

这是我使用的。在我的情况下，某些 ftp 服务器（一个是纯 ftpd）将始终提示输入用户名，即使使用 -i 参数，并将“用户用户名”命令作为交互式密码。我做的是输入几个NOOP（无操作）命令，直到ftp服务器超时，然后登录：

```
open ftp.example.com 
noop
noop
noop
noop
noop
noop
noop
noop
user username password
...
quit 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-30T13:53:08.187

您也可以使用 PowerShell；这就是我所做的。由于我需要根据模式下载文件，因此我动态创建了一个命令文件，然后让`ftp`其余的工作完成。

我使用了基本的 PowerShell 命令。我不需要下载任何其他组件。我首先检查是否存在必要数量的文件。如果他们第二次使用 Mget 调用 FTP。我从连接到 Windows XP 远程服务器的[Windows Server 2008运行它。](http://en.wikipedia.org/wiki/Windows_Server_2008)

```
function make_ftp_command_file($p_file_pattern,$mget_flag)
{
    # This function dynamically prepares the FTP file.
    # The file needs to be prepared daily because the
    # pattern changes daily.
    # PowerShell default encoding is Unicode.
    # Unicode command files are not compatible with FTP so
    # we need to make sure we create an ASCII file.

    write-output "USER" | out-file -filepath C:\fc.txt -encoding ASCII
    write-output "ftpusername" | out-file -filepath C:\fc.txt -encoding ASCII -Append
    write-output "password" | out-file -filepath C:\fc.txt -encoding ASCII -Append
    write-output "ASCII" | out-file -filepath C:\fc.txt -encoding ASCII -Append
    If ($mget_flag -eq "Y")
    {
        write-output "prompt" | out-file -filepath C:\fc.txt -encoding ASCII -Append
        write-output "mget $p_file_pattern" | out-file -filepath C:\fc.txt -encoding ASCII -Append
    }
    else
    {
        write-output "ls $p_file_pattern" | out-file -filepath C:\fc.txt -encoding ASCII -Append
    }

    write-output quit | out-file -filepath C:\fc.txt -encoding ASCII -Append
}

###########################  Init Section ###############################
$yesterday = (get-date).AddDays(-1)
$yesterday_fmt = date $yesterday -format "yyyyMMdd"
$file_pattern = "BRAE_GE_*" + $yesterday_fmt + "*.csv"
$file_log = $yesterday_fmt + ".log"

echo  $file_pattern
echo  $file_log

############################## Main Section ############################
# Change location to folder where the files need to be downloaded
cd c:\remotefiles

# Dynamically create the FTP Command to get a list of files from
# the remote servers
echo "Call function that creates a FTP Command "
make_ftp_command_file $file_pattern N

#echo "Connect to remote site via FTP"
# Connect to Remote Server and get file listing
ftp -n -v -s:C:\Clover\scripts\fc.txt 10.129.120.31 > C:\logs\$file_log

$matches=select-string -pattern "BRAE_GE_[A-Z][A-Z]*" C:\logs\$file_log

# Check if the required number of Files available for download
if ($matches.count -eq 36)
{
    # Create the FTP command file

    # This time the command file has an mget rather than an ls
    make_ftp_command_file $file_pattern Y

    # Change directory if not done so
    cd c:\remotefiles

    # Invoke ftp with newly created command file
    ftp -n -v -s:C:\Clover\scripts\fc.txt 10.129.120.31 > C:\logs\$file_log
}
else
{
    echo "The full set of files is not available"
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-06T10:53:57.280

我已经将脚本编写为 *.sh 文件

```
#!/bin/sh
set -x
FTPHOST='host-address'
FTPUSER='ftp-username'
FTPPASSWD='yourPass'

ftp -n -v $FTPHOST << EOT
ascii
user $FTPUSER $FTPPASSWD
prompt
##Your commands
bye
EOT 
```

对我来说很好

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-30T19:05:14.333

如果您需要将变量传递给 txt 文件，您可以即时创建并在之后删除。

此示例是以管理员身份运行的批处理脚本。它使用一些日期和时间变量创建一个 zip 文件。然后它会动态创建一个带有一些变量的 ftp 文本文件。然后它会删除 zip、文件夹和 ftp 文本文件。

```
set YYYY=%DATE:~10,4%
set MM=%DATE:~4,2%
set DD=%DATE:~7,2%

set HH=%TIME: =0%
set HH=%HH:~0,2%
set MI=%TIME:~3,2%
set SS=%TIME:~6,2%
set FF=%TIME:~9,2%

set dirName=%YYYY%%MM%%DD%
set fileName=%YYYY%%MM%%DD%_%HH%%MI%%SS%.zip

echo %fileName%

"C:\Program Files\7-Zip\7z.exe" a -tzip C:\%dirName%\%fileName% -r "C:\tozip\*.*" -mx5

(
    echo open 198.123.456.789
    echo user@somedomain.com
    echo yourpassword
    echo lcd "C:/%dirName%"
    echo cd  theremotedir
    echo binary
    echo mput *.zip
    echo disconnect
    echo bye
) > C:\ftp.details.txt

cd C:\
FTP -v -i -s:"ftp.details.txt"

del C:\ftp.details.txt /f 
```

# php - 如何在 mySQL 中调用 PHP 变量？

> ID：16158143
> 
> 赞同：0
> 
> 时间：2013-04-22T23:00:21.450
> 
> 标签：php, html, mysql

我的网站有很多页面。所有这些页面的顶部都有相同的标题，显示登录用户的选项和网站不同部分的链接。

我意识到，如果我想更改此标题的外观，我需要仔细检查并将更改应用到每一页。这似乎是一个我可以避免的问题，所以我决定将代码存储在 mySQL 数据点中，然后简单地将其回显到每个页面上。

到目前为止，它运行得非常好，但是我在其中的任何 PHP 代码（比如显示用户名）只返回物理代码本身，而不是结果。

调用代码工作得很好，所以这里是被调用的实际 mySQL 条目：

```
<table width="1332" border="0" cellspacing="0"><tr>
<td width="1002" style="background-color:#4DDB4D;">
<a href="http://www.AGLgaming.com/login/home"><img src="http://i378.photobucket.com/albums/oo223/Abyssion180/AGLLogoAlternate.png" alt="AGL Logo" width=170 height=90 align="left" /></a>
<img src="http://i378.photobucket.com/albums/oo223/Abyssion180/AGLBanner.png" width=825 height=90 />
</td>
<td width="330" style="background-color:#4DDB4D" align="right">
<div class="ex1">
<a href="http://www.AGLgaming.com/login/home/profile"><font color="blue" size="5">' . $user[0][0] . '</font></a>,<br>
<font size="1">Logged in: </font><a href="http://www.AGLgaming.com/login/home/logout"><font size="2" color="blue">Logout</font></a>
</div></td></tr>
<tr><td valign="center" style="background-color:#6EFF6E;height:31px;">
<div align="left"> ||
<a href="http://www.AGLgaming.com/login/home/forums"><font color="blue" size="5">Forums</font></a> |||
<a href="http://www.AGLgaming.com/login/home/guides"><font color="blue" size="5">Guides</font></a> |||
<a href="http://www.AGLgaming.com/login/home/external"><font color="blue" size="5">External</font></a> |||
<a href="http://www.AGLgaming.com/login/home/members"><font color="blue" size="5">Members</font></a> |||
<a href="http://www.AGLgaming.com/login/home/tournament"><font color="blue" size="5">Tournament</font></a> |||
<a href="http://www.AGLgaming.com/login/home/constitution_of_the_AGL"><font color="blue" size="5">Constitution of the AGL</font></a></div>
</td>
<td valign="center" style="background-color:#6EFF6E;height:31px;">
<div class="ex1" align="right">
<a href="http://www.AGLgaming.com/login/home/profile"><font color="blue" size="3">Profile</font></a> |
<a href="http://www.AGLgaming.com/login/home/denarii"><font color="blue" size="3">Denarii</font></a>: ' . $user[0][7] . ' |
<a href="http://www.AGLgaming.com/login/home/messages"><font color="blue" size="3">Messages</font></a>: ' . $user[0][9]; if($user[0][10]>0)  echo '<font size="2"><b>(' . $user[0][10] . ' New!)</b></font>'; . ' |
<a href="http://www.AGLgaming.com/login/home/settings"><font color="blue" size="3">Settings</font></a>
</div>
</td></tr></table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T23:07:30.097

如果我做对了，我会（不想刻薄）真的建议你重新考虑你的代码。你真的在从你的 MySQL 数据库中查询 HTML / PHP 代码吗？如果是这样，让我向您推荐另一种方法来获取不仅仅是一个站点的一些代码：只需将该代码放入一个额外的 php 文件中 - 例如 header.php 并使用

```
<?php require_once('header.php');?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T23:06:51.423

好吧，在我看来，您正在寻找的是一种模板系统。实现这一点的最简单方法是在您的 HTML 中使用特定的关键字，然后您的 PHP 可以提取和替换这些关键字。

例如，您可以使用该[`str_replace()`](http://php.net/manual/en/function.str-replace.php)功能。

```
$processedHtml = str_replace('{__USERNAME__}',$userName,$htmlFromDB); 
```

`{__USERNAME__}`在此示例中，您将在希望`$userName`变量出现的任何位置插入字符串。

* * *

话虽如此，我认为您正面临一个相当特殊的情况，将 HTML 存储在数据库中可能不是最佳选择。您可能要考虑使用 PHP 的[`include()`](http://php.net/manual/en/function.include.php)函数。这将允许您在当前脚本中插入一个附加文件。它将（正如其名称所描述的）简单地将代码包含在您放置 include 语句的位置。这将允许您将共享的标头代码集中在一个文件中，并在您需要的任何地方简单地“包含”它，您只需对一个文件进行编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T23:05:19.973

你应该做什么而不是使用数据库，所以这将是 php 的包含函数。假设您在名为 header.php 的文件中有以下代码

```
Awesome header
<?php 
    echo "working code";
?> 
```

在您可以放置​​的每个其他文件中

```
<?php
    include "header.php";
?> 
```

# security - 对密码存储文件进行重放攻击的有效解决方案是什么？

> ID：16158147
> 
> 赞同：0
> 
> 时间：2013-04-22T23:00:57.930
> 
> 标签：security, passwords, password-protection, password-storage

如何有效地阻止对包含用户名及其密码的密码文件的重放攻击？我有兴趣防止的攻击如下：

1.  爱丽丝的密码是 A。
2.  Mallory 知道密码 A。
3.  Alice 将她的密码更改为 B。
4.  Mallory 将密码文件替换为 Alice 的密码为 A 时使用的密码文件。
5.  Mallory 使用密码 A 验证为 alice。

显然，仅依靠操作系统读/写权限是不够的，或者将未散列的密码存储为明文也足够了。

真实系统是如何做到的？如果我用旧的替换我的 /etc/shadow 怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:02:27.863

我得出的解决方案是将密码时间戳与记录密码文件更改的审计日志一起存储。时间戳使用 HMAC 进行完整性保护。直接在密码上使用 HMAC 是一种替代解决方案，但审计日志已经存在于系统中，因此利用它似乎是可以接受的。

# ios - UIActivityIndi catorView 的旋转速率

> ID：16158148
> 
> 赞同：0
> 
> 时间：2013-04-22T23:01:08.517
> 
> 标签：ios, uiactivityindicatorview

a 的旋转速度是`UIActivityIndicatorView`多少？具体来说，完成一场革命需要多长时间？

**更新：**问这个的原因是我想[创建自己的活动指示器微调器](https://stackoverflow.com/questions/6010237/creating-a-custom-uiactivityindicatorview)，它比正常的小。但是我[不能改变普通的大小](https://stackoverflow.com/questions/2638120/can-i-change-the-size-of-uiactivityindicator)，所以我正在[制作自己的](http://blog.blackwhale.at/?p=336)via`UIImageView`的动画选项。我想在行为、时机、感觉等方面尽可能接近正常人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T10:24:34.697

从 iOS 6.1.4 开始，UIActivityIndi​​catorView 的旋转速率为 1.0。这个数字是一个实现细节，不能保证在未来的 iOS 版本中保持这个值。您可以通过访问 UIActivityIndi​​catorView 的第一个子视图（即 UIImageView）并查询其 animationDuration 属性来解决此问题。看起来 UIActivityIndi​​catorView 在引擎盖下使用了动画 UIImageView。

# python - Python：为什么这个字符串会打印但不会写入文件？

> ID：16158151
> 
> 赞同：0
> 
> 时间：2013-04-22T23:01:34.287
> 
> 标签：python, html, xml, xml-parsing, minidom

我是 Python 新手，正在开发一个将 XML 文件更改为 HTML 的实用程序。XML 来自对 的调用`request = urllib2.Request(url)`，我在代码前面生成自定义 url，然后设置`response = urllib2.urlopen(request)`，最后，`xml_response = response.read()`. 据我所知，这行得通。

我的麻烦在于解析响应。对于初学者，这是我返回的 XML 结构的部分示例：

![在此处输入图像描述](https://i.stack.imgur.com/h0fve.png)

我尝试在此处调整 minidom 教程中的幻灯片示例来解析我的 XML（顺便说一下，这是 ebay 搜索结果）：[http ://docs.python.org/2/library/xml.dom.minidom.html](http://docs.python.org/2/library/xml.dom.minidom.html)

到目前为止，我的代码看起来像这样，尝试块作为诊断问题的尝试：

```
doc = minidom.parseString(xml_response)

  #Extract relevant information and prepare it for HTML formatting.
  try: 
    handleDocument(doc)
  except:
    print "Failed to handle document!" 

def getText(nodelist):  #taken straight from slideshow example 
  rc = []
  for node in nodelist:
    if node.nodeType == node.TEXT_NODE:
      print "A TEXT NODE!" 
      rc.append(node.data)
  return ''.join(rc)       #this is a string, right?

def handleDocument(doc): 
  outputFile = open("EbaySearchResults.html", "w")
  outputFile.write("<html>\n")
  outputFile.write("<body>\n")
  try:
    items = doc.getElementsByTagName("item") 
  except:
    "Failed to get elements by tag name." 
  handleItems(items)
  outputFile.write("</html>\n")
  outputFile.write("</body>\n") 

def handleItems(items):
  for item in items:    
    title = item.getElementsByTagName("title")[0] #there should be only one title

    print "<h2>%s</h2>" % getText(title.childNodes) #this works fine!

    try: #none of these things work!
      outputFile.write("<h2>%s</h2>" % getText(title.childNodes))

      #outputFile.write("<h2>" + getText(title.childNodes) + "</h2>")

      #str = getText(title.childNodes) 
      #outputFIle.write(string(str)) 
      #outputFile.write(getText(title.childNodes))  

    except:
      print "FAIL" 
```

我不明白为什么正确的标题文本会打印到控制台但会引发异常并且不适用于输出文件。像这样编写纯字符串效果很好：`outputFile.write("<html>\n")`我的字符串构造发生了什么？据我所知，`getText`我在 minidom 示例中使用的方法返回一个字符串——这正是你可以写入文件的那种东西..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:23:10.903

如果我打印实际的堆栈跟踪...

```
...
      except:
        print "Exception when trying to write to file:"
        print '-'*60
        traceback.print_exc(file=sys.stdout)
        print '-'*60
        traceback.print_tb(sys.last_traceback)
... 
```

...我会立即看到问题：

```
------------------------------------------------------------
Traceback (most recent call last):
  File "tohtml.py", line 85, in handleItems
    outputFile.write(getText(title.childNodes))
NameError: global name 'outputFile' is not defined
------------------------------------------------------------ 
```

好像有什么东西超出了范围！

初学者，请注意。

# performance - 为什么比较双倍比 uint64 快？

> ID：16158154
> 
> 赞同：8
> 
> 时间：2013-04-22T23:01:40.390
> 
> 标签：performance, matlab, integer, compare, double

我使用 Matlab 的`profile`. double 和 uint64 都是 64 位变量。为什么比较两个 double 比比较两个 uint64 快得多？他们不是按位比较吗？

```
big = 1000000;

a = uint64(randi(100,big,1));
b = uint64(randi(100,big,1));
c = uint64(zeros(big,1));
tic;
for i=1:big
    if a(i) == b(i)
        c(i) = c(i) + 1;
    end
end
toc;

a = randi(100,big,1);
b = randi(100,big,1);
c = zeros(big,1);
tic;
for i=1:big
    if a(i) == b(i)
        c(i) = c(i) + 1;
    end
end
toc; 
```

这是轮廓的测量：

![个人资料截图](https://i.stack.imgur.com/85JHP.png)

这是 tictoc 测量的：

```
Elapsed time is 6.259040 seconds.
Elapsed time is 0.015387 seconds. 
```

当使用 uint8..uint32 或 int8..int32 而不是 64 位数据类型时，效果会消失。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T00:58:51.957

它可能是 Matlab 解释器和不支持 64 位 int 类型以及其他类型的底层 CPU 的组合。

Matlab 有利于`double`操作`int`。大多数值都存储在`double`类型中，即使它们表示整数值。`double`and操作将`int` `==`采用不同的代码路径，并且 MathWorks 将花费更多的精力来调整和优化`double`int 的代码，尤其是`int64`. 事实上，旧版本的 Matlab 根本不支持算术运算`int64`。（而且 IIRC，它仍然不支持混合整数数学。）当你做`int64`数学时，你使用的代码不太成熟，调整较少，同样的情况可能适用于`==`. Int 类型在 Matlab 中不是优先级。的存在`int64`甚至可能会干扰 JIT 优化该代码，但这只是一个猜测。

但这也可能有潜在的硬件原因。这是一个假设：如果您使用的是 32 位 x86，那么您正在使用 32 位通用（整数）寄存器。这意味着较小的 int 类型可以放入寄存器并使用快速指令进行比较，但 64 位 int 值不适合寄存器，并且可能需要更昂贵的指令序列进行比较。s，即使它们是 64 位宽，也适合 x87 浮点单元的`double`宽浮点寄存器，并且可以使用快速浮点比较指令在硬件中进行比较。这意味着`[u]int64`s 是唯一无法使用快速单寄存器单指令操作进行比较的。

如果是这种情况，如果您在 64 位 x86-64（在 64 位 Matlab 中）上运行相同的代码，则差异可能会消失，因为您拥有 64 位宽的通用寄存器。但是话又说回来，如果没有编译 Matlab 解释器的代码以利用它，它可能不会。

# jquery - scrollTop 0 作为条件语句

> ID：16158157
> 
> 赞同：1
> 
> 时间：2013-04-22T23:01:54.623
> 
> 标签：jquery, scrolltop

我正在尝试 .animate （假设两个条件为真）或（否则） .fadeOut 元素：

```
if (window.location.hash == '' && window.scrollTop() == '0') {
     //do .animate

if (window.location.hash == '' && (window).scrollTop() == '0') {
     //do .animate 
```

第一个有效，但窗口 scrollTop 我无法以正确的方式编写语法。

-格丽塔

PS这里是整个代码。除了顶部的 scrollTop 部分外，一切正常：

```
 if (window.location.hash == '' || $(window).scrollTop() == '0') {

        $('#preloader').delay(3000).animate({
                        width:'792px', left:'50%', top:'-.5cm', marginLeft:'-396px', opacity:'0.75'},600,'easeOutExpo').animate({        
                        height:'0px', top:'13cm', opacity:'0'}, 400, 'easeOutExpo', function(){ 
                $(this).remove();
        }); 
        $('#headerwrapper').addClass('delay55sec animated250 entryShot easeInExpo');
        $('#foot').animate({top:'-16cm'},0,'').delay(3700).animate({top:'0'},900,'easeOutBounce');
        $('.block-menu li a').animate({left:'-20cm'},0,'').delay(4000).animate({left:'0px'},1234,'easeInOutExpo');
        $('.bodoni').fadeTo(0, 0).delay(5000).fadeTo(1555, 1.0);  
        $('#content').hide(0).delay(5000).slideDown(999, 'easeInExpo');
        $('#nav').animate({left:'-1500px'},0,'').delay(6000).animate({'left': '0px'}, 1555, 'easeOutBounce');  

  } else {

        $.scrollTo($(window.location.hash+"_"), 4444, {axis:'y', easing:'easeInOutQuint'}); 
        $('#preloader').delay(600).fadeOut(3000, function(){ 
                $(this).remove();
        });            
  } 
```

# git - Github 公钥的公共 URL 是什么

> ID：16158158
> 
> 赞同：71
> 
> 时间：2013-04-22T23:01:56.370
> 
> 标签：git, github, bitbucket, public-key

我听说 github 上的所有用户都有一个公共 URL，您可以在其中访问他们的公钥，或者他们可以提供所有公钥的 URL。这是真的？如果是这样，该 URL 是什么。它也存在于 bitbucket 中吗？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-04-23T00:02:49.567

你可以得到：

```
curl https://github.com/<username>.keys 
```

替换`<username>`为 GitHub 用户的实际用户名。

这在您设置其他服务器的登录权限时很有用。只需将其输出保存到`~/.ssh/authorized_keys`. 要从命令行将其附加到末尾：

```
curl https://github.com/<username>.keys | tee -a ~/.ssh/authorized_keys 
```

也可以使用 Github API 完成

```
curl -i https://api.github.com/users/<username>/keys 
```

对于位桶，您可以使用以下内容：（此调用需要身份验证。）

```
curl -i https://bitbucket.org/api/1.0/users/<accountname>/ssh-keys 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2019-01-16T18:17:42.927

GPG 公钥现在可在`https://github.com/<username>.gpg`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-09-29T03:31:39.200

也适用于 gitlab。

```
https://gitlab.com/<username>.keys 
```

在 bash 脚本中也能很好地工作。

```
#GitProvider to fetch public keys (gitlab.com,github.com)
GitProvider="gitlab.com"
GitUsername="username"
curl https://${GitProvider}/${GitUsername}.keys | tee -a ~/.ssh/authorized_keys 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-12-26T13:51:29.780

此外，这些还提供了一种检索用户 PGP 密钥的方法：

**GitHub**：

```
https://github.com/USER.keys
https://gitlab.com/USER.gpg 
```

**亚搏体育app**：

```
https://gitlab.com/USER.keys
https://gitlab.com/USER.gpg 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-11T01:05:29.073

虽然密钥是*公开*的，但您并不总是希望从默认注释字段中显示您的内部主机名，所以`ssh-copy-id`如果您有 SSH 密码访问权限，`wormhole`在控制台和配置管理工具（如 Ansible、Puppet 等）上时，我建议您使用命令第一名。

# html - 在底部放置两个 div 块

> ID：16158159
> 
> 赞同：0
> 
> 时间：2013-04-22T23:02:03.603
> 
> 标签：html, css, position

我想要做的是，将两个 div 块，CV 和 Contact 放在页面底部，当将鼠标悬停在它上面时，它们会像在这种状态下一样覆盖整个页面。我尝试使用 margin-top 属性移动它们，但是当我将鼠标悬停在它们上时它们的行为不正常。另外，我不想要任何用户屏幕大小的滚动条，这些框总是出现在页面的角落。我的解决方案对此有效吗，还是我需要一些 javascript 来执行这些操作？这是我的jsfiddle：

[http://jsfiddle.net/cR9NL/](http://jsfiddle.net/cR9NL/)

在这种情况下我应该使用什么位置：`absolute`或`relative`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:10:39.797

html代码还是一样的，下面是我给你的css和demo：

**CSS**

```
html, body { height: 100%; max-width: 100%; margin: 0; padding: 0; }

#container {
    position: relative;
    height: 100%;
    width: 100%;
    overflow: hidden;
}

#container div {
    height: 25%;
    width: 15%;
    text-align: center;
}

#container>div:hover {
    height: 100%;
    width: 100%;
    text-align: center;
    position: absolute;
    z-index: 5;
}

#upper-left{
    background: #77cc00;
    float: left;
    border: solid 3px #99ee22;
}

#upper-right{
    background: #ffdd22;
    float: right;
    border: solid 3px #ffff44;
}
#lower-right {
    position: absolute;
    bottom:0;
    right: 0;
    background: #55bbff;
    border: solid 3px #77ddff;
}
#lower-left{
    position: absolute;
    bottom: 0;
    left: 0;
    background: #ff5522;
    border: solid 3px #ff7744;
}
#container>div>p {
    font-family: Tahoma; 
    margin: 28% auto;
    font-weight: 900;
    color: white;
    font-size: 30px;
} 
```

**演示**

[http://jsfiddle.net/bartekbielawa/cR9NL/2/](http://jsfiddle.net/bartekbielawa/cR9NL/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T23:05:44.593

使左下角和右下角的 div 定位为绝对值，分别为底部值和 0 为左值和右值。

小提琴:)：

```
position:absolute;
bottom:0;
right:0; 
```

[http://jsfiddle.net/cR9NL/1/](http://jsfiddle.net/cR9NL/1/)

# caching - 为什么我们可以像这样解释这个延迟与数组大小的关系图？

> ID：16158165
> 
> 赞同：1
> 
> 时间：2013-04-22T23:02:37.910
> 
> 标签：caching, gpu

我在谷歌上搜索并发现了[这篇](http://www.eecg.toronto.edu/~moshovos/CUDA08/arx/microbenchmark_report.pdf)关于测量图形处理单元缓存上的各种数据的论文。这篇论文有这个读取延迟与数组大小的关系图，看起来像一个阶梯函数。

![在此处输入图像描述](https://i.stack.imgur.com/guwou.png)

显然，从这张图中，我们可以看出缓存大小是 2048B（步骤开始的地方），行大小是单个步骤的宽度，“路大小”（不管是什么）是整个宽度步骤部分（2560B - 2048B）。

这真的很简洁，并且可以方便地确定缓存的结构，我认为通常不会为 GPU 记录这些结构。但是，我想知道这些解释来自哪里。他们背后的理由/逻辑是什么？

# wcf - WCF 网络管道端点

> ID：16158166
> 
> 赞同：0
> 
> 时间：2013-04-22T23:02:42.900
> 
> 标签：wcf, net.pipe

在我们的构建服务器上，我们有一个服务通过 net.pipe 在同一个盒子上调用另一个服务，但它没有说没有端点正在监听 net.pipe。IIS 确实为调用服务和被调用服务设置了 Net.pipe。

```
 <endpoint address="net.pipe://build.QQQQQ.com/QQQ/QQQ.svc"
            binding="netNamedPipeBinding" bindingConfiguration="NetNamedPipeBinding_IMembershipService"
            contract="QQQ.IMembershipService" name="NetNamedPipeBinding_IMembershipService">
    <identity>
      <servicePrincipalName value="host/ABCDF.XX.net" />
    </identity>
  </endpoint> 
```

注意：**build.QQQ.com**实际上是**ABCDF.XX.net**。这就是问题所在，即使它们相同，它们是否也需要匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:44:37.620

IMO - 他们**应该**很多。

我会尝试从地址中删除最后一个“/QQQ.svc”。

# emacs24 - emacs 24.2 制表符宽度始终设置为 2

> ID：16158168
> 
> 赞同：1
> 
> 时间：2013-04-22T23:03:01.937
> 
> 标签：emacs24

我一直在尝试使用我的`tab-width`变量，但显然我无法使用我的配置。它应该与前两行一起工作，但没有。问题是我总是得到 2 个空格来缩进，而不是 4 个。我复制了代码的重要部分。

```
(setq-default indent-tabs-mode nil)
(setq-default tab-width 4)
(setq indent-line-function 'insert-tab)

(mapc (lambda (hook)
        (add-hook hook (lambda ()
                         (setq-default tab-width 4))))
      '(js2-mode-hook
        js-mode-hook
        css-mode-hook
        less-css-mode-hook
        php-mode-hook
        html-mode-hook
)) 
```

我一直在尝试修改一些配置，但没有太多可做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-07T07:41:50.777

当我解决我的问题时，我忘了回答我自己的问题（这是不久前的事了）。接下来是我的 emacs 初始化文件中的代码部分。我不得不手动配置一些 emacs 模式，但它正在工作。

```
;; indentiation stuff (maybe some variable is missing for other language
(setq-default indent-line-function 4)
(setq-default tab-width 4)
(setq-default c-basic-offset 4)
(setq-default lisp-indent-offset 4)
(setq-default sgml-basic-offset 4)
(setq-default nxml-child-indent 4)
(setq tab-stop-list (number-sequence 4 200 4)) 
```

我希望它也能解决某人的问题。

# ios - 以编程方式拍摄 X 数量的照片

> ID：16158169
> 
> 赞同：0
> 
> 时间：2013-04-22T23:03:06.577
> 
> 标签：ios, objective-c, uiimagepickercontroller

`UIViewController`在为 iPhone 和 iPad输入 a 后，我正在尝试实现以编程方式拍摄 X 数量照片的功能。我查看了`UIImagePickerController`但我不想展示相机控件并让用户点击一个按钮来只拍摄一张照片。有没有办法在输入a后捕获X数量的照片`UIViewController`并最终存储所有照片以供将来参考？

## **编辑**：

```
-(void)viewDidAppear:(BOOL)animated
{
    // Create image picker controller
    picker = [[UIImagePickerController alloc] init];

    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        [picker setSourceType:UIImagePickerControllerSourceTypeCamera];
    }
    else
    {
        [picker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    }

    // Set source to the camera
    picker.sourceType =  UIImagePickerControllerSourceTypeCamera;

    // Delegate is self
    picker.delegate = self;

    // Allow editing of image ?
    picker.allowsEditing = NO;

    //picker.showsCameraControls = NO;

    // Show image picker
    [picker animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:04:47.827

立即使用 takePicture 您不能拍摄多个快照，因为您必须使用一些视频录制并在特定帧或时间中获取快照，为您提供更多参考，您可以使用此苹果文档进行批量快照[AVFoundation 编程指南](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW30)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:16:10.953

你可以尝试这样的事情：

```
int numberOfPhotos = 3; // Number of photos you want to take.
for ( int i = 0; i < numberOhPhotos; i++ )
{
    // Note that you should use some sort of a pause in between each photo.
    [picker takePicture];
} 
```

# ios - 滚动视图仅显示最后添加的子视图

> ID：16158170
> 
> 赞同：7
> 
> 时间：2013-04-22T23:03:19.893
> 
> 标签：ios, objective-c, uiscrollview

我的`UIScrollView`子视图出现了奇怪的行为，这个想法是以编程方式创建一个`UIView`带有自定义 nib 文件的实例，在我的情况下这是一个表单，用模型类中的数据填充该表单，并将其添加为我的`UIScrollView`. **问题**是当我处理多个子视图时，`UIScrollView`只保留最新的子视图，所以如果我创建了三个子视图，滚动视图将只显示第三个（最新的）子视图。虽然页面控件设置为子视图的核心数量（三个）。

该项目太长了，所以我将尝试用**相关**代码简要解释我的问题：

```
- (void)viewDidLoad {

    NSArray *sorted = [appArray sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];//this array contains the data from model, I debugged that to make sure I got the exact data, no more no less :)

    //Loop all NSManaged objects, for example let's say I have 3 model objects, don't worry about how I get data etc, because I debugged all and maked sure all data objects number are exact, etc.
    for (App_Table *_appTable in sorted) {
    //This looped 3 times as expected, I debugged that also and maked sure on each iteration I got the data I expected to have
    //App_Table is a subclass of NSManagedObject, it's my model class and get its data from coredata file
    [self addMoreView];//Call this method will create a new subview and add it as subview to the UIScrollView, it will also update the page control, update the content size property, etc.

    AppTableView *_appTableView = (AppTableView *) [[self.scrollView subviews] lastObject];//Remember addMoreView method create a new instance of AppTableView and add it as subview for the UIScrollView property, then I get that subview to fill it with data here

    _appTableView.txtADDRESS.text = _appTable.address;//Fill in the form, no need to write all the form fields code because it's the same way.

    // Scroll To First Page...
    self.pageControl.currentPage = 0;
    [self.scrollView scrollRectToVisible:CGRectMake(0, 0, viewWidth, viewHeight) animated:YES];

    self.scrollView.contentSize = CGSizeMake(viewWidth*noOfItems, viewHeight);//Set the content size to the sum of subviews width, I also debugged that to check it's correct
    self.scrollView.delegate = self;

    [super viewDidLoad];
} 
```

好的，所以当我有三个子视图时，滚动视图将加载三个子视图的宽度，如上面的行计算：

```
self.scrollView.contentSize = CGSizeMake(viewWidth*noOfItems, viewHeight);//Set the content size to the sum of subviews width, I also debugged that to check it's correct 
```

我可以滚动到 3 次移动（这是子视图的数量）并且`UIPageControl`也设置为三个点，**但只有一个子视图可见**，只有我能看到的最新一个，其他两个子视图消失了，滚动视图计算了内容它们的大小，但它们不可见。有什么想法吗 ？谢谢。

**编辑：**

值得注意的是，我第一次编辑视图时，一切正常，当我处理 3 个子视图时，它们都是可见的，但是当我转到另一个视图并回到这个视图时，只有最后一个子视图是可见的。

此外，我正在开发一个带有拆分视图的 iPad 项目。

**编辑：** 这是为`UIScrollView`

```
 -(IBAction) addMoreView
    {

        NSArray *arr = [[NSBundle mainBundle] loadNibNamed:@"AppTableView" owner:self options:nil];

        AppTableView *aView = [arr objectAtIndex:0];
        [aView setFrame:CGRectMake(startX, 0, aView.bounds.size.width, aView.bounds.size.height)];
        [self.scrollView addSubview:aView];
        self.scrollView.contentSize = CGSizeMake(self.scrollView.contentSize.width+aView.frame.size.width
                                             , self.scrollView.contentSize.height);

        startX = startX + aView.frame.size.width;//Update the X position, first 0, then 600, 1200, and so on.
        [self.scrollView scrollRectToVisible:aView.frame animated:YES];
        NSLog(@"%f",self.scrollView.contentSize.width);
        NSLog(@"%f",self.scrollView.contentSize.height);

    } 
```

假设我有 3 个子视图，上面的方法将被调用 3 次，因为它被放入`for`循环中。所以这是`NSLogs`上述方法的结果：

```
NSLog(@"%f",self.scrollView.contentSize.width);
NSLog(@"%f",self.scrollView.contentSize.height);

    First iteration:

    600.000000

    0.000000

    Second iteration:

    1200.000000

    0.000000

    Third iteration:

    1800.000000

    0.000000 
```

**编辑：**

rob mayoff 建议的命令让我明白为什么会发生这种情况：

```
 |    |    |    | <AppTableView: 0x1eef4700; frame = (0 18; 600 430); autoresize = LM+RM+TM+BM; tag = 990; layer = <CALayer: 0x1eef4790>>

   |    |    |    | <AppTableView: 0x1ee3f380; frame = (0 18; 600 430); autoresize = LM+RM+TM+BM; tag = 991; layer = <CALayer: 0x1ee3f410>>

   |    |    |    | <AppTableView: 0x1ee56910; frame = (0 18; 600 430); autoresize = LM+RM+TM+BM; tag = 992; layer = <CALayer: 0x1ee3f410>> 
```

所有三个子视图都绘制在同一个框架中，因此它们彼此上方，但是当我在运行时使用断点进行调试时，它们`x`正在发生变化，第一次是 0，然后是 600，然后是 1200，这让我认为它绘制正确。如何解决这个问题，尤其是 x 值正在正确递增，那么问题是什么，为什么他们仍然在相同的 x 坐标上绘图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T09:01:47.767

首先，您应该将`[super viewDidLoad]`调用放在`- (void)viewDidLoad`方法的顶部，而不是底部。

鉴于您实际看到的内容和期望看到的内容还不够清楚，将您的问题的最小工作示例作为可下载项目提供将有助于我们为您提供帮助。如果您只是尝试在不与托管对象交互但使用一些静态提供的数据的单独视图控制器中重现它，其他人将能够自己重现并调试它。或者你也可以在这个过程中自己弄清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T21:43:47.090

我回来的有点晚，但最后我找到了解决我的问题的方法，所以认为分享它以节省别人的时间是件好事。

就我而言，滚动视图是 nib 文件中的自定义视图。因此，通过在左侧和顶部激活其 Autosizing 蒙版，该错误得到了修复。

![在此处输入图像描述](https://i.stack.imgur.com/xWuFU.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:03:20.580

当然，您没有为 3 个项目正确设置内容大小：

```
self.scrollView.contentSize.width+aView.frame.size.width 
```

应该

```
self.scrollView.contentSize.width+ ( aView.frame.size.width * NUMBER_OF_SUBVIEWS) 
```

我想当您在滚动视图上水平滚动时，内容大小只允许一个子视图有足够的空间，对吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T21:47:42.247

这段代码`-addMoreView`就是问题所在：

```
AppTableView *aView = [arr objectAtIndex:0];
[aView setFrame:CGRectMake(startX, 0, aView.bounds.size.width, aView.bounds.size.height)];
[self.scrollView addSubview:aView]; 
```

如果`startX`从未更改，则您将在同一位置添加所有这些视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-18T01:45:08.397

尝试将 aView 设置`autoresizingMask`为`UIViewAutoresizingNone`addMoreView 方法内部。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-01T18:24:02.157

使用了一个静态变量，该变量在加载时重新初始化为 0，然后它增加子视图的宽度以开始在新的 X 位置上绘图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-18T16:34:53.580

我在姐妹帖子中[创建了一个](https://dl.dropboxusercontent.com/u/60414145/Overlapper.zip)使用您的代码的项目，并且它工作得很好。我在自动调整大小的掩码上添加了几个测试，如下所示。我建议您将其与您正在做的事情进行比较。当子视图或滚动视图上的掩码未设置为绑定到顶部/左侧时，会发生奇怪的事情。

我修改后的代码：

```
NSArray *colors = @[ [UIColor redColor], [UIColor greenColor], [UIColor blueColor] ];

UIViewAutoresizing mask;
mask = [self.scrollView autoresizingMask];
//assert(!self.scrollView.autoresizesSubviews); // has no affect here

if((mask & (UIViewAutoresizingFlexibleRightMargin|UIViewAutoresizingFlexibleBottomMargin)) != mask) NSLog(@"scrollView MASK WRONG");

for (int i=0; i<3; ++i) {

    NSArray *arr = [[NSBundle mainBundle] loadNibNamed:@"AppTableView" owner:self options:nil];

    NSLog(@"scrollView frame: %@", NSStringFromCGRect(self.scrollView.frame));
    if((mask & (UIViewAutoresizingFlexibleRightMargin|UIViewAutoresizingFlexibleBottomMargin)) != mask) NSLog(@"aView MASK WRONG");

    AppTableView *aView = [arr objectAtIndex:0];
    assert([aView isKindOfClass:[AppTableView class]]);
    NSLog(@"orig aView frame: %@", NSStringFromCGRect(aView.frame));
    UIViewAutoresizing mask = [aView autoresizingMask];
    if((mask & (UIViewAutoresizingFlexibleRightMargin|UIViewAutoresizingFlexibleBottomMargin)) != mask) NSLog(@"aView MASK WRONG");

    aView.frame = CGRectMake(startX, 0, aView.bounds.size.width, aView.bounds.size.height);
    NSLog(@"changed aView frame: %@", NSStringFromCGRect(aView.frame));
    aView.backgroundColor = colors[i];

    [self.scrollView addSubview:aView];
    self.scrollView.contentSize = CGSizeMake(self.scrollView.contentSize.width+aView.frame.size.width
                                             ,self.scrollView.contentSize.height);
    startX = startX + aView.frame.size.width;

   //AppTableView *_appTableView = (AppTableView *) [[self.scrollView subviews] lastObject];

    //_appTableView.txtADDRESS.text = _appTable.address;//Fill in the form, no need to write all the form fields code because it's the same way.
}
NSLog(@"scrollView frame: %@", NSStringFromCGRect(self.scrollView.frame));
NSLog(@"scrollView contentOffset: %@", NSStringFromCGPoint(self.scrollView.contentOffset)); 
```

# php - 在 PHP/HTML 中退出并显示错误消息

> ID：16158174
> 
> 赞同：2
> 
> 时间：2013-04-22T23:03:36.890
> 
> 标签：php, html, isset, exit-code

我正在检查是否使用 isset 设置了特定值。我想退出 HTML 并显示错误消息，例如“未找到名称，请输入有效名称”。目前我正在检查

```
if ((! isset($_GET["name"])) or (! is_dir($_GET["name"])) or (empty($_GET["name"]))) {

    Print "Name not found, Enter a valid name"
} 
```

打印后，我想退出而不进一步执行 HTML 代码。如何退出我的错误消息并且没有来自 PHP 的默认错误消息

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:04:43.330

死或退出：参见 php 文档

[http://php.net/die](http://php.net/die)

[http://php.net/exit](http://php.net/exit)

```
die ("I'm dyin over here"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:06:24.593

```
 die("Name not found, Enter a valid name"); 
```

那应该有帮助！

问候，菲利克斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T23:07:33.163

您将使用[die](http://php.net/manual/en/function.die.php)或[exit](http://php.net/manual/en/function.exit.php)方法。这将停止显示或执行所有 PHP 和 HTML。

例子：

```
if ((! isset($_GET["name"])) or (! is_dir($_GET["name"])) or (empty($_GET["name"]))) {

    die("Name not found, Enter a valid name");
} 
```

# javascript - 固定复制？

> ID：16158175
> 
> 赞同：2
> 
> 时间：2013-04-22T23:03:49.437
> 
> 标签：javascript, html, fix-protocol

我想创建类似于 fiximate 的东西，但我想做的不同是按场地过滤而不是 FIX 版本。

下载了 FIXmate 以供离线使用以了解设计。似乎开发人员使用了一种工具来解析 FIX XML 并根据字段标记和正文吐出 html 页面。

有没有人可以使用这样的工具？有没有另一种方法来设计类似的不太复杂的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T14:28:59.380

你问的不是微不足道的。这说明有一个商业产品：[https ://fixspec.com/](https://fixspec.com/)

# css - Twitter-bootstrap：如何正确使用 row-fluid 类？

> ID：16158176
> 
> 赞同：17
> 
> 时间：2013-04-22T23:03:51.440
> 
> 标签：css, twitter-bootstrap

我无法理解`row-fluid`课堂的运作方式。根据[文档](http://twitter.github.io/bootstrap/scaffolding.html#fluidGridSystem)，它会自行调整以适应流体设计，例如响应式设计。因此，如果它有足够的空间，它就可以放在同一行，否则它会转到下一行。

但是在这里看这个例子：[https ://duelify.com/](https://duelify.com/)

奇怪的是，前三个文章标题适合第一行。第二排和其余部分略微向右推。但是查看 html（如下）没有涉及额外的类来导致这种“副作用”。

![在此处输入图像描述](https://i.stack.imgur.com/k3NUc.png)

为什么文章标题不适合在一行中。为什么中间会有这种随机的差距？有没有办法让它们看起来有序而没有任何间隙？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-23T01:44:48.927

在你的情况下，正确的代码就像

```
<div class="row-fluid">
   <div class="span4"></div>
   <div class="span4"></div>
   <div class="span4"></div>
</div>
<div class="row-fluid">
   <div class="span4"></div>
   <div class="span4"></div>
   <div class="span4"></div>
</div>

etc... 
```

在每个`row-fluid`类中，类的最大总和`span`必须达到 12。跨度类有左边距。只有最后一个孩子`row-fluid`没有左边距。

现在再次查看[Twitter Bootstrap 文档](http://twitter.github.io/bootstrap/scaffolding.html#fluidGridSystem)中的示例。"*对于简单的两列布局，创建一个 .row 并添加适当数量的 .span 列。由于这是一个 12 列的网格，每个 .span 跨越这 12 列中的许多列，并且应该始终加起来 12每行（或父项中的列数）。* ”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T23:09:30.753

这里发生了几件事。请记住，默认情况下，fluid-row 中跨度的总大小应加起来为 12。这里还有很多，所以当 css 将 span4 的宽度定义为大约 33% 时，它们实际上超过了 100% ，所以他们要换一条新路线。但是它们并没有被清除，所以你最终会看到它们在页面上循环并制作列。

您在第二行左侧有空间的原因是引导程序定义了“排水沟”以给列一些边距。由于使用了过多的列，您会看到它们。有特定的 css 可以将行的第一个跨度上的装订线减少到 0，因此为什么第一个跨度上没有空间。

随后的“行”只有两列，因为附加排水沟的存在会影响数学运算并使三个 span4 加起来超过 100% 的宽度，从而导致它们换行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:40:53.803

以下代码将在容器之后工作（用于响应式布局）：

```
<div class="container-fluid">
    <div class="row-fluid">
       <div class="span4"></div> 
    </div>
    <div class="row-fluid">
      <div class="span4"></div>
    </div>
</div> 
```

# java - 为登录创建 Facebook 会话的正确方法？

> ID：16158184
> 
> 赞同：2
> 
> 时间：2013-04-22T23:04:44.370
> 
> 标签：java, android, facebook, facebook-login, facebook-android-sdk

所以，我有一个`Dialog`带有“分享”的按钮。当按钮被按下时，它会调用一个方法来共享用户信息，如果他们已经登录到 Facebook。但是，如果他们没有登录 Facebook，我希望它首先允许用户登录，然后分享他们的信息。这是我尝试在没有 的情况下登录用户`LoginButton`：

```
 Session.OpenRequest openRequest = new Session.OpenRequest(GameActivity.this);
                    StatusCallback callback = new StatusCallback(){

                        @Override
                        public void call(Session session, SessionState state, Exception exception) {
                            Log.d(TAG, "CALL");
                            if (Session.getActiveSession() != null && Session.getActiveSession().isOpened()){
                                Log.d(TAG, "sendBrag was called");
                                sendBrag();
                            }else{
                                Log.d(TAG, "session is not opened");
                            }
                            if (exception != null){
                                Log.d(TAG, "caught exception in call method");
                            }
                        }
                    };
                    openRequest.setCallback(callback);
                    openRequest.setDefaultAudience(SessionDefaultAudience.FRIENDS);
                    openRequest.setPermissions(PERMISSIONS);
                    Session session = new Session(GameActivity.this);
                    session.openForPublish(openRequest);
                    Session.setActiveSession(session); 
```

其中，`PERMISSIONS`是：

```
private static final List<String> PERMISSIONS = Arrays.asList("publish_actions"); 
```

问题是它永远不会登录！我要么收到一条`Toast`消息，说明“检查您的网络连接”（即使我的网络连接正常），要么什么也没发生。但从日志中我可以看出 Session 永远不会打开。**总结一下：**您如何使用该`Session`课程正确登录 Facebook？我在这里想念什么？任何帮助、建议或建议将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T00:48:14.307

我找到了解决问题的方法，该解决方案`SessionLoginSample`位于`Facebook SDK`. 首先，在`onCreate`我的活动中的方法中，我输入了以下代码：

```
 Session session = Session.getActiveSession();
    if (session == null) {
        if (savedInstanceState != null) {
            session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
        }
        if (session == null) {
            session = new Session(this);
        }
        Session.setActiveSession(session);
        if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
            session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
        }
    } 
```

在哪里`statusCallback`：

```
private Session.StatusCallback statusCallback = new SessionStatusCallback(); 
```

我活动中的`SessionStatusCallback`内部课程是：

```
 private class SessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        if (session.isOpened() && session != null){
            sendBrag();
        }
    }
}//end of SessionStatusCallback class 
```

然后，我创建了一个`Facebook`在用户尚未登录时处理登录的方法：

```
 private void onClickLogin() {
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
    } else {
        Session.openActiveSession(this, true, statusCallback);
    }
}//end of onClickLogin() method 
```

我从“分享”按钮中调用。最后，我认为代码中最重要的部分是`onActivityResult()`方法：

```
 @Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
}//end of onActivityResult() method 
```

这就是他们真正的目的。虽然，我不知道为什么它完全有效，因为我使用该方法`openForRead`而不是，`openForPublish`但它似乎有效。我希望这对遇到与我相同的问题的人有所帮助。

# url - 无法使用 DynamicNode 为 MvcSiteMapProvider 定义外部 URL

> ID：16158190
> 
> 赞同：0
> 
> 时间：2013-04-22T23:05:18.420
> 
> 标签：url, mvcsitemapprovider

我一直在思考这个问题几个小时，在我看来，虽然 XML 站点地图功能已更新为接受具有 URL 属性的外部 URL，但该功能并未通过 DynamicNode 扩展到动态定义。

我们有几个共享一个菜单的应用程序，因此我们需要对这些菜单项进行单一定义，每个都指向我们在 Intranet 中的一个应用程序。我们目前使用（对于 ASP.NET）一个自定义站点地图，该地图需要将 XML 文件部署到每个应用程序，并且我希望 MVC 实现能够动态读取项目 - 可能来自数据库。

由于 DynamicNode 没有 URL 属性，它显然要求路径是虚拟的并且基于其他属性（控制器、操作、路由）。我尝试实现一个 UrlResolver 来查看“HTTP”的“动作”，它有效，并且我返回了 URL 不变。然而，我收到了可怕的

> “ [http://site.com/App](http://site.com/App)不是有效的虚拟路径。”

错误。看来作者在 3.1.0 中为 XML 属性引入的更改并未转化为动态等效项。谁能帮我？这是我为扩展默认类而编写的代码。此代码已执行并且工作正常。在 ResolveUrl 返回我的 HTTP 后的某个时间，失败发生了，所以我想我要么遗漏了某些东西，要么无法完成。

```
 public class DynamicSiteMapNodeProvider : DynamicNodeProviderBase
    {
        override public IEnumerable<DynamicNode> GetDynamicNodeCollection()
        {
            var nodes = new List<DynamicNode>();
            nodes.Add(new DynamicNode
                {
                    Key = "Dynamic1",
                    Title = "Dynamic One!",
                    Action = "http://my.site.com/MyApp"

                });
            return nodes;

        }
    }

    public class FlexibleSiteMapUrlResolver: DefaultSiteMapNodeUrlResolver
    {
        public override string ResolveUrl(MvcSiteMapNode mvcSiteMapNode, string area, string controller, string action, IDictionary<string, object> routeValues)
        {
            // when action value is clearly a web site url, simply accept it.
            if (action.Substring(0, 5).ToLower() == "http:")
            {
                return action;
            }
            return base.ResolveUrl(mvcSiteMapNode, area, controller, action, routeValues);
        }
    } 
```

2013 年 5 月 15 日：没有人可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T19:24:35.677

这在版本 4 中已修复 - URL 属性已添加到 DynamicNode 对象，并且与其他任何地方的工作方式相同。

第 4 版在几周前发布，可在[NuGet](http://www.nuget.org/packages?q=mvcsitemapprovider)上使用。

# jms - Camel jms 到外部 activeMQ 与请求-回复给出 javax.jms.InvalidDestinationException：无法发布到已删除的目的地：

> ID：16158192
> 
> 赞同：1
> 
> 时间：2013-04-22T23:05:38.817
> 
> 标签：jms, activemq, apache-camel, connection-pooling, jmstemplate

我们有第三方应用程序对骆驼 cxfrs 端点进行安静的调用，然后将其路由到外部 activeMQ。有些应用程序使用这些 JMS 消息并提供 XML 响应。这一切都是使用camel InOut exchangePattern同步完成的。该架构非常简单明了。我们使用的是 activeMQ 5.5.0-fuse、camel-jms 2.8.x 和 activemq-pool 5.6。

使用此配置，我们会随机看到此异常：

```
 javax.jms.InvalidDestinationException: Cannot publish to a deleted Destination: temp-  queue://ID:testserver-37266-1366126830205-0:0:1
    at org.apache.activemq.ActiveMQSession.send(ActiveMQSession.java:1696)
    at org.apache.activemq.ActiveMQMessageProducer.send(ActiveMQMessageProducer.java:231)
    at org.apache.activemq.pool.PooledProducer.send(PooledProducer.java:74)
    at org.apache.activemq.pool.PooledProducer.send(PooledProducer.java:55) 
```

当这种情况发生时，服务器会停止，我们的服务都不会响应，直到我们重新启动 activeMQ、tomcat 和所有其他服务。

骆驼配置：

```
<import resource="classpath:META-INF/cxf/cxf.xml"/>

 <bean id="routeBuilder" class="gov.nasa.arc.tmi.route.TMIServiceRoute"/>

 <bean id="jaxbProvider" class="org.apache.cxf.jaxrs.provider.JAXBElementProvider">
     <property name="marshallerProperties" ref="propertiesMap"/>
    </bean>
    <util:map id="propertiesMap">
        <entry key="jaxb.formatted.output">
           <value type="java.lang.Boolean">true</value>
        </entry>
    </util:map>

<camelContext id="camel" xmlns="http://camel.apache.org/schema/spring">
    <routeBuilder ref="routeBuilder"/>
</camelContext>

<bean id="activemq" 
  class="org.apache.activemq.camel.component.ActiveMQComponent">
  <property name="brokerURL" value="tcp://localhost:61616"/> 
```

骆驼路由器类：//reroute from("cxfrs:/rr?resourceClasses=xyzroute.RerouteResource") .setExchangePattern(ExchangePattern.InOut) .process(new RerouteProcessor()) .to("activemq:queue:xyztmi.request") ;

下面是监听队列的应用程序的 spring 配置：xyztmi.request 使用 JMS 消息：

```
<context:annotation-config/>
<bean id="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL">
       <value>tcp://localhost:61616? wireFormat.maxInactivityDurationInitalDelay=30000</value>
    </property>
</bean> 

<bean id="pooledConnectionFactory" 
   class="org.apache.activemq.pool.PooledConnectionFactory" init-method="start" destroy-method="stop">
   <property name="maxConnections" value="8" />
   <property name="connectionFactory" ref="connectionFactory" />
</bean>

<bean id="destination" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg value="gov.nasa.arc.tmi.request"/>
</bean>

<bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">    
    <property name="connectionFactory" ref="pooledConnectionFactory"/>
    <property name="defaultDestination" ref="destination" />
</bean> 

<jms:listener-container  connection-factory="pooledConnectionFactory" concurrency="10">
 <jms:listener  destination="gov.nasa.arc.tmi.request" ref="tmiQueryListener" /> 
```

谷歌搜索后，我遇到了这些错误：

[https://issues.apache.org/jira/browse/CAMEL-6229](https://issues.apache.org/jira/browse/CAMEL-6229) [https://issues.apache.org/jira/browse/AMQ-3457](https://issues.apache.org/jira/browse/AMQ-3457)

基于这些，我们升级到了camel 2.10.4、activeMq 5.7和activemq-pool 5.7。即便如此，问题依然存在。

我真的被卡住了，不知道如何解决这个问题。有人可以指出可能出了什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:05:45.960

我想知道是不是因为处理另一端的 JMS 消息花费的时间太长，然后 ActiveMQ 的非活动监视器删除了临时目标，因为它的非活动时间超过了 30 秒。[http://activemq.apache.org/activemq-inactivitymonitor.html](http://activemq.apache.org/activemq-inactivitymonitor.html)

也许尝试将超时设置为更高的值，或者禁用它。

另一种选择是将固定队列用于回复队列而不是临时队列。

# java - 为什么我的 ListView 不显示项目列表？

> ID：16158194
> 
> 赞同：0
> 
> 时间：2013-04-22T23:05:43.820
> 
> 标签：java, android, listview, listactivity, simpleadapter

我试图在 ListActivity 中显示我的警报列表，但它不起作用。出现了行，但没有可见的文本。我不确定它是否从 HashMap 检索数据并正确插入行。

这是我的代码：

```
protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_alarm_list);
        List<Alarm> list;
        Database db = new Database(AlarmListActivity.this);
        list = db.getAllAlarms();

        List<HashMap<String, String>> alarmMap = new ArrayList<HashMap<String, String>>();
        for (Alarm alarm: list) {
           HashMap<String, String> map = new HashMap<String, String>();
           map.put(Integer.toString(alarm.getID()), alarm.toString());
           alarmMap.add(map);
        }

        if(!list.isEmpty() && list != null)
        {
            System.out.println("inside list");
            System.out.println(list);

            ListAdapter adapter = new SimpleAdapter(
                    AlarmListActivity.this,
                    alarmMap,
                    R.layout.list_item, 
                    new String[] { "id", "hour"},
                    new int[] { R.id.id, R.id.time});
            setListAdapter(adapter);

        }
        else
        {
            Toast.makeText(AlarmListActivity.this, "No Alarms Set",
                    Toast.LENGTH_SHORT).show(); 
        }
    } 
```

![列表](https://i.stack.imgur.com/LPTLL.png)

这就是我得到的。你可以隐约看到每一行的线条。但是没有文字或任何东西。所有 System.out.println() 都按预期工作，打印出 HashMap。列表中没有显示任何内容。我什`android:text="Testing"`至补充说：无济于事

# javascript - 纯 JavaScript 中 JSON 的轻量级和旧版浏览器兼容替代方案

> ID：16158198
> 
> 赞同：1
> 
> 时间：2013-04-22T23:05:56.967
> 
> 标签：javascript

我从存储在 javascript var 中的服务器获取文本响应。我可以完全控制此响应的格式。通常这个文本响应有 3 个我需要的元素，理想情况下我想用它`json.parse`来解决我的问题，比如：

```
var json = '{"result":true,"count":1, "state":"ON"}',
obj = JSON.parse(json);

alert(obj.result);
alert(obj.count);
alert(obj.state); 
```

优雅而简单，但是像 IE8,7,6 这样[的旧浏览器](http://caniuse.com/#search=JSON.parse)不支持 json.parse。在这一点上，我有两种可能的解决方案，一种当然是使用 Jquery，但我不想要，因为我想让我的代码尽可能小，另外两个可能是使用像[json2](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)这样的库来为我处理像 jquery 这样的不兼容问题确实如此，但同样的问题，对于这样一个简单的功能来说，代码太多了。

所以我认为最好的方法是将响应格式更改为类似`true%1%ON`然后拆分`%`，你怎么看？在我看来有点脏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T23:09:08.840

您可以从现有库中提取解析器的代码，而不是拥有所有东西，因为您只需要解析器。一个例子是从 jQuery 核心中[提取（第 523-551 行）](https://github.com/jquery/jquery/blob/1.9-stable/src/core.js#L523)[的实现。`$.parseJSON`](https://github.com/jquery/jquery/blob/1.9-stable/src/core.js#L523)显然它使用`new Function`方法而不是`eval`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T23:08:57.117

在我因不阅读问题而受到指责之前，让我改述一下：

在我看来（并不重要）使用该`json2.js`库不会导致显着的性能损失，它也不需要包含很多代码，尤其是在最小化时：

```
if(typeof JSON!=="object"){JSON={}}(function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];if(a&&typeof a==="object"&&typeof a.toJSON==="function"){a=a.toJSON(e)}if(typeof rep==="function"){a=rep.call(t,e,a)}switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a){return"null"}gap+=indent;u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1){u[n]=str(n,a)||"null"}i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]";gap=o;return i}if(rep&&typeof rep==="object"){s=rep.length;for(n=0;n<s;n+=1){if(typeof rep[n]==="string"){r=rep[n];i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}else{for(r in a){if(Object.prototype.hasOwnProperty.call(a,r)){i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}";gap=o;return i}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","   ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if(typeof JSON.stringify!=="function"){JSON.stringify=function(e,t,n){var r;gap="";indent="";if(typeof n==="number"){for(r=0;r<n;r+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i==="object"){for(n in i){if(Object.prototype.hasOwnProperty.call(i,n)){r=walk(i,n);if(r!==undefined){i[n]=r}else{delete i[n]}}}}return reviver.call(e,t,i)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})() 
```

您可以仅使用一行将其放入并完成。为已经完成的事情编写自己的语法将花费大量时间来完成其他工作以完成您的项目。您将编写的任何代码都必须经过与该库相同的严格测试，该`json`库已经过时间测试并证明可以工作。

这一行代码就是一个`3KB`文件。

[github上的json](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T23:11:34.743

好吧，就像你说的，你有两个选择：

*   要么包括像 JSON2 这样的库（未压缩 17KB，所以不是很大的负担）
*   构建自己的小解析器

然后还有第三个选项，它是潜在的安全问题，但它可能会这样做：使用 eval 来评估 json：

```
var json = '{"result":true,"count":1, "state":"ON"}';
obj = eval(json); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T23:12:40.120

你可以试试[json-sans-eval](https://code.google.com/p/json-sans-eval/)。它又快又小（只有 1.5Kb），但不验证您的 JSON。

# mysql - MySQL权限不恢复？

> ID：16158205
> 
> 赞同：0
> 
> 时间：2013-04-22T23:06:56.147
> 
> 标签：mysql, backup, privileges, reinstall

我刚刚在我的机器上重新安装了所有东西。我从旧的 MySQL 服务器导出了所有单独的数据库，并尝试在新的服务器上重新安装它们。

然而，即使在导入所有表之后，包括我认为应该包含所有权限的“mysql”表，除了授予之外，没有用户拥有任何权限。除了具有预期所有特权的根。

我已经刷新了权限并重新启动了数据库，但没有权限获得。我查看了整个服务器的旧备份，旧的 INFORMATION_SCHEMA 数据库在其中拥有比当前数据库更多的权限。但是，我知道这是一个虚拟表，应该从 MySQL 数据库和其他数据库中获取数据。

如何恢复权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:01:48.710

权限表位于`mysql`数据库中。检查内容是否相同，尤其是在`user`、`db`、和表`tables_priv`中。另一个问题是您是否也将服务器升级到更新版本？如果是这样，如果您需要了解的权限表中没有任何更改，请查看[MySQL 参考手册。](http://dev.mysql.com/doc/refman/5.6/en/installing.html)在 *unix 或Windows上运行程序。`columns_priv``proc_priv``mysql_fix_privilege_tables``SOURCE scripts/mysql_fix_privilege_tables.sql`

# php - 忽略php中重复的mysql值

> ID：16158215
> 
> 赞同：0
> 
> 时间：2013-04-22T23:07:52.877
> 
> 标签：php, mysql

一旦我运行我的查询，将几列连接在一起，我得到这样的结果：

```
id     item     category
1      item 1   A
1      item 1   B
1      item 1   C
2      item 2   A
2      item 2   D
3      item 3   B
3      item 3   E 
```

我有一个将输出每一行的while循环：。

```
while($results = mysql_fetch_array($raw_results)) {
    echo $results['item'].<br>;
    echo "Category: ".$results['category'];
} 
```

它给出了这个：

```
<div>
Item 1
Category: A
</div>

<div>
Item 1
Category: B
</div> 
```

依此类推，但我需要做的是将每个 ID 的所有值组合到一个空格中，因此结果如下所示：

```
<div>
Item 1
Category: A, B, C
</div>

<div>
Item 2
Category: A, D
</div>

<div>
Item 3
Category: B, E
</div> 
```

最好的方法是什么？我应该用每个 ID 的行创建另一个数组，然后循环遍历它（以及我将如何设置数组？）或者还有别的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T23:10:28.907

尝试`GROUP BY`_`GROUP_CONCAT`

[http://www.mysqlperformanceblog.com/2006/09/04/group_concat-useful-group-by-extension/](http://www.mysqlperformanceblog.com/2006/09/04/group_concat-useful-group-by-extension/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T23:11:01.957

您可以在查询中完成所有这些操作，而不是依赖 PHP。

```
 Select item, group_concat(category) FROM yourtable GROUP BY Item 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T23:12:33.223

我会做这样的事情：

```
select id, item, group_concat(category) from Table1
group by id, item 
```

[SQLFiddle](http://sqlfiddle.com/#!2/9e49f/2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T23:12:30.360

为每个项目创建一个类别数组：

```
while($results = mysql_fetch_array($raw_results)) {
    $items[$results['item']][] = $results['category'];
} 
```

然后用它来输出你的 HTML：

```
foreach ($items as $itemName => $categories) {
    echo $itemName.'<br>';
    echo 'Categories: '.implode(', ',$categories);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T23:13:26.130

If you do not have the ability to change the query that gets the data from the database you can use the PHP helper function `array_unique`. This function removes duplicate values from an array. While it is better to do this in MySQL, its not always possible for the developer to do this easily so this would help. Here is a link to the PHP manual on this function:

[http://www.php.net/manual/en/function.array-unique.php](http://www.php.net/manual/en/function.array-unique.php)

# memory-management - 数组列表的动态内存分配？

> ID：16158219
> 
> 赞同：0
> 
> 时间：2013-04-22T23:08:08.880
> 
> 标签：memory-management, assembly, arraylist, mips, mars-simulator

在 MARS 模拟器上使用 MIPS ISA 读取 midi 文件后，我试图将解码的事件存储在一个数组列表中，该列表将在每个事件的播放时读取。因为包含数据结构是一个数组列表，所以它必须能够动态收缩和增长。

在我的方案中，每个事件将作为两个单词存储在一个数组中。这意味着每次我向数组列表中添加一个元素时，列表必须增加 8 个字节。

我的问题是如何为分配期间不知道大小的数组动态分配足够的内存？然后我将如何浏览这个创建的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:46:10.420

要么在程序开始时从堆中为数组分配最大可能大小，要么使用不同的数据结构，例如链表，可以零碎地分配。

# python - 配置不当：导入中间件 treeio.core.middleware.user 时出错

> ID：16158221
> 
> 赞同：0
> 
> 时间：2013-04-22T23:08:16.290
> 
> 标签：python, django, django-middleware

我收到了这个错误：

```
[Mon Apr 22 23:45:42 2013] [error] [client 192.168.1.88] mod_wsgi (pid=19481): Exception occurred processing WSGI script '/home/projects/treeio/treeio.wsgi'.
[Mon Apr 22 23:45:42 2013] [error] [client 192.168.1.88] Traceback (most recent call last):
[Mon Apr 22 23:45:42 2013] [error] [client 192.168.1.88]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 236, in __call__
[Mon Apr 22 23:45:42 2013] [error] [client 192.168.1.88]     self.load_middleware()
[Mon Apr 22 23:45:42 2013] [error] [client 192.168.1.88]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 53, in load_middleware
[Mon Apr 22 23:45:42 2013] [error] [client 192.168.1.88]     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
[Mon Apr 22 23:45:42 2013] [error] [client 192.168.1.88] ImproperlyConfigured: Error importing middleware treeio.core.middleware.user: "No module named csrf.middleware" 
```

我有 Django 1.5.1 和 Python 2.7.3。我正在尝试安装 Tree.io。

有什么建议吗？

编辑：

```
MIDDLEWARE_CLASSES = (
    'johnny.middleware.LocalStoreClearMiddleware',
    'johnny.middleware.QueryCacheMiddleware',
    'django.middleware.gzip.GZipMiddleware',
    'treeio.core.middleware.domain.DomainMiddleware',
    'treeio.core.middleware.user.SSLMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'treeio.core.middleware.user.AuthMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'treeio.core.middleware.chat.ChatAjaxMiddleware',
    "django.contrib.messages.middleware.MessageMiddleware",
    "treeio.core.middleware.modules.ModuleDetect",
    "minidetector.Middleware",
    "treeio.core.middleware.user.CommonMiddleware",
    "treeio.core.middleware.user.PopupMiddleware",
    "treeio.core.middleware.user.LanguageMiddleware",) 
```

SO：Ubuntu 12.04.2 LTS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:33:50.430

你包括`treeio.core.middleware.domain.DomainMiddleware`之前`django.middleware.csrf.CsrfViewMiddleware`。`django.middleware.csrf.CsrfViewMiddleware`应该在列表之前`treeio`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T13:38:38.047

检查你的 Django 版本，treeio 适用于 Django 1.3。你可以更改为 1.3 版本编写

```
sudo pip install Django==1.3 
```

或者您可以使用 virtualenv。

# matlab - 使用 Matlab 读取 GRiB2 文件

> ID：16158222
> 
> 赞同：2
> 
> 时间：2013-04-22T23:08:21.477
> 
> 标签：matlab, grib

是否有任何工具箱可以将 GRIB2 数据读入 Matlab？

一个示例（由 NOAA 建模的波浪）可以是 GRIB2，可从[ftp://polar.ncep.noaa.gov/pub/history/waves 获得](ftp://polar.ncep.noaa.gov/pub/history/waves)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T11:25:18.340

在[NCTOOLBOX for Matlab](http://nctoolbox.github.io/nctoolbox/)中，您可以像打开本地 NetCDF 文件或远程 OPeNDAP 数据集一样打开 GRIB2 文件：

```
% download data
! wget ftp://polar.ncep.noaa.gov/pub/history/waves/multi_1.at_4m.dp.200607.grb2

% create ncgeodataset object
nc=ncgeodataset('multi_1.at_4m.dp.200607.grb2');

% list variables
nc.variables

% create geovariable object
dirvar=nc.geovariable('Primary_wave_direction_degree_true_surface');

% get data at 1st time step
dir=dirvar.data(1,:,:);

% get grid at 1st time step
g=dirvar.grid_interop(1,:,:);

% plot
pcolorjw(g.lon,g.lat,dir);
title(datestr(g.time)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/brasb.png)

# c - 更改 Linux 3.5.0 内核任务计划程序

> ID：16158223
> 
> 赞同：0
> 
> 时间：2013-04-22T23:08:23.963
> 
> 标签：c, linux, kernel, task, scheduler

作为我的操作系统课程中的一个项目，我们必须修改任务调度程序并将其使用的算法更改为自定义（并且相当愚蠢，例如通过最高 PID）算法。我已经在虚拟机上安装了 Ubuntu 12.04（服务器版），并且正在寻找我需要为此修改的文件。我下载了内核的开源版本，一直找不到。对于查找包含调度算法的文件，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:15:47.137

您可以在 Linux 内核源代码中找到调度程序`kernel/sched/`。

# html - 如何将“添加到购物车”、价格和“产品选项”移动到页面顶部

> ID：16158225
> 
> 赞同：0
> 
> 时间：2013-04-22T23:08:30.307
> 
> 标签：html, e-commerce, cart

这是我正在尝试做的事情：

![在此处输入图像描述](https://i.stack.imgur.com/JND7f.png)

我想将添加到购物车按钮以及所有其他价格和变体选项移动到产品图片旁边，并在定价信息下方开始显示产品信息。

我认为这些是代码的相关部分，但我仍然是初学者，所以不能确定。

```
<?php if((get_option('hide_addtocart_button') == 0) &&  (get_option('addtocart_or_buynow') !='1')) : ?>
                            <?php if(wpsc_product_has_stock()) : ?>
                                <div class="wpsc_buy_button_container">
                                        <?php if(wpsc_product_external_link(wpsc_the_product_id()) != '') : ?>
                                        <?php $action = wpsc_product_external_link( wpsc_the_product_id() ); ?>
                                        <input class="wpsc_buy_button" type="submit" value="<?php echo wpsc_product_external_link_text( wpsc_the_product_id(), __( 'Buy Now', 'wpsc' ) ); ?>" onclick="return gotoexternallink('<?php echo $action; ?>', '<?php echo wpsc_product_external_link_target( wpsc_the_product_id() ); ?>')">
                                        <?php else: ?>
                                    <input type="submit" value="<?php _e('Add To Cart', 'wpsc'); ?>" name="Buy" class="wpsc_buy_button" id="product_<?php echo wpsc_the_product_id(); ?>_submit_button"/> 
```

和

```
<?php if((get_option('hide_addtocart_button') == 0) &&  (get_option('addtocart_or_buynow') !='1')) : ?>
                            <?php if(wpsc_product_has_stock()) : ?>
                                <div class="wpsc_buy_button_container">
                                        <?php if(wpsc_product_external_link(wpsc_the_product_id()) != '') : ?>
                                        <?php $action = wpsc_product_external_link( wpsc_the_product_id() ); ?>
                                        <input class="wpsc_buy_button" type="submit" value="<?php echo wpsc_product_external_link_text( wpsc_the_product_id(), __( 'Buy Now', 'wpsc' ) ); ?>" onclick="return gotoexternallink('<?php echo $action; ?>', '<?php echo wpsc_product_external_link_target( wpsc_the_product_id() ); ?>')">
                                        <?php else: ?>
                                    <input type="submit" value="<?php _e('Add To Cart', 'wpsc'); ?>" name="Buy" class="wpsc_buy_button" id="product_<?php echo wpsc_the_product_id(); ?>_submit_button"/> 
```

编辑：对不起，我尝试按照您的指示进行操作，但我就是不明白。可以在 CSS 中完成吗？

```
`/*single product page*/
.imagecol,.productcol {float:left;}
.productcol {vertical-align:top; width:100%; margin:0 0 0 5px;}
.single_product_display h1  {line-height:20px; margin:0 0 17px;}
.single_product_display form  {margin:20px 0 0;}
.single_product_display label {float:left; margin:0 10px 0 0;}
.single_product_display input[type="text"] {width:20px; margin:0 0 0 10px; border:1px         solid #CCC;}
.pricedisplay {font-size:18px; font-weight:normal;}
.single_product_display form  {float:left;}
.single_product_display .wpsc_buy_button_container  {float:left; text-align:left     !important;}
.single_product_display .wpsc_buy_button {background:#CB8700; border:0; padding:5px !important; color:#FFF; cursor:pointer;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:18:47.207

这是您想要的格式：

```
<div id="container">
    <div id="maincolumn" style="float:left">
        <div id="itempreview" style="float:left">
            <!-- HTML/PHP goes here -->
        </div>
        <div id="itemsidebar" style="float:right">
            <div id="addtocart">
                <!-- HTML/PHP goes here -->
            </div>
            <div id="itemdescription">
                <!-- HTML/PHP goes here -->
            </div>
        </div>
    </div>
    <div id="items" style="float:right">
        <!-- HTML/PHP goes here -->
    </div>
</div> 
```

# java - SQL 语句中 ExecuteUpdate 的一般错误

> ID：16158226
> 
> 赞同：0
> 
> 时间：2013-04-22T23:08:42.463
> 
> 标签：java, sql, database, servlets, odbc

我一直在尝试执行 sql 插入，但它根本不起作用......有人遇到过同样的问题吗？

```
 java.sql.SQLException: General error
        at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6986)
        at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7114)
        at sun.jdbc.odbc.JdbcOdbc.SQLExecDirect(JdbcOdbc.java:3110)
        at sun.jdbc.odbc.JdbcOdbcStatement.execute(JdbcOdbcStatement.java:338)
        at sun.jdbc.odbc.JdbcOdbcStatement.executeUpdate(JdbcOdbcStatement.java:288)
        at GuardadoExamenes.doGet(GuardadoExamenes.java:72)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:619) 
```

这是我的代码……问题出在“stmt.executeUpdate(SQL);”中 因为它在终端上打印之前的行。

```
 try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        Connection conexion = DriverManager.getConnection("jdbc:odbc:Clickers");
        Statement stmt = conexion.createStatement();

        @SuppressWarnings("rawtypes")
        Map m = req.getParameterMap();
        @SuppressWarnings("rawtypes")
        Set s = m.entrySet();
        @SuppressWarnings("rawtypes")
        Iterator it = s.iterator();

        while(it.hasNext()){

            @SuppressWarnings("unchecked")
            Map.Entry<String,String[]> entry = (Map.Entry<String,String[]>)it.next();

            String key = entry.getKey();
            String[] value = entry.getValue();

            System.out.println("Key is "+key);

            if(value.length>1){    
                for (int i = 0; i < value.length; i++) {
                    System.out.println(value[i].toString());
                }
            }else
                System.out.println("Value is "+ value[0].toString());
                System.out.println(" ");

            if (key.contains("answer")) {

            }
            else if (key.contains("pregunta")){
                String sql = "SELECT COUNT(*) AS cPregunta FROM Preguntas WHERE cAsignatura=" + cAsignatura + "AND cTema=" + cTest;
                ResultSet rs = stmt.executeQuery(sql);
                rs.next();
                int cPregunta = rs.getInt("cPregunta") + 1;
                System.out.println(cPregunta);

                String SQL = "INSERT INTO Preguntas (cAsignatura, cPregunta, cTema, Pregunta) VALUES (" + cAsignatura + ", " + cPregunta + ", " + cTest + ",'" + value[0].toString()+ "') ";
                stmt.executeUpdate(SQL);
            }

        }

    }catch(SQLException sqlException){
        sqlException.printStackTrace();
        System.out.println("");
    }catch(ClassNotFoundException classNotFoundException){
        classNotFoundException.printStackTrace();
        System.out.println("");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:31:47.077

听起来 Pedro Fabregat 已经在他的评论中提供了解决方案，但值得注意的是，最佳实践是利用`PreparedStatement`这样的更新。这样做将正确地转义任何可以防止 SQL 注入攻击的输入，并且还可以使 SQL 语句更加清晰，因为它们不会被字符串连接语句弄乱。

例如：

```
String sql = "INSERT INTO Preguntas (cAsignatura, cPregunta, cTema, Pregunta) VALUES (?, ?, ?, ?)";

PreparedStatement preparedStatement = conn.prepareStatement(sql);
preparedStatement.setInt(1, cAsignatura);
preparedStatement.setInt(2, cPregunta);
preparedStatement.setInt(3, cTema);
preparedStatement.setString(4, Pregunta);

preparedStatement.executeUpdate();
preparedStatement.close(); 
```

# python - 金字塔读取http数据

> ID：16158231
> 
> 赞同：2
> 
> 时间：2013-04-22T23:09:09.547
> 
> 标签：python, rest, pyramid, cornice

```
APIURL ='http://localhost:6543/api/patches/alice_8b84090712bce46e15a8107839cefe/e5678'
data = {
    'patch_id' : 'e5678',
    'queue_id' : 'alice_8b84090712bce46e15a8107839cefe',
}
response = requests.get(APIURL, data=data) 
```

我有上面的代码来测试一个檐口金字塔 REST api。

但是我无法读取通过`data=data`参数输入的数据。

这是此端点的服务器功能：

```
@resource(collection_path='/api/patches', path="/api/patches/{queue_id}/{patch_id}")
class Patch(object):
    def __init__(self, request):
        self.request = request

    def get(self):   
        """
        """
        queue_id = self.request.matchdict.get('queue_id', '')
        patch_id = self.request.matchdict.get('patch_id', '')
        data = {
            'queue_id': 'e12525e1f90ad5e7395a965',
            'patch_id': 'a9651a8259a666c0032f343',
            'node_id': 'bef3a2adc76415b2be0f6942b5111f6c5e5b7002',
            'message': 'This is a patch on feature2.',
            'datetime': '.....',
        }

        #TODO call the patch method to get the public attributes

        return {'error':{}, 'data': data} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T00:24:11.343

请求忽略参数中提供的数据，`data`因为[该参数用于提供响应的*正文*](http://docs.python-requests.org/en/latest/api/#requests.Request)（并且`GET`没有正文）。如果您对传递查询字符串参数感到满意 - 那就是：

```
http://localhost:6543/api/patches?queue_id=12345&patch_id=910 
```

那么您可以改用`params`关键字参数：

```
requests.get(APIURL, params=data) 
```

否则，您可以使用标准库中的[`urljoin`](http://docs.python.org/2/library/urlparse.html#urlparse.urljoin)from构建您的 URL：`urlparse`

```
APIURL = "http://localhost:6543/api/patches"
with_queue = urljoin(APIURL, queue_id)
with_patch = urljoin(with_queue, patch_id)
response = requests.get(with_patch) 
```

# mysql - MySQL 全文搜索无法正常工作。为什么？

> ID：16158232
> 
> 赞同：1
> 
> 时间：2013-04-22T23:09:17.460
> 
> 标签：mysql, sql, full-text-search, myisam

**OBS：**我是全文搜索和 MyIsam 引擎的新手，所以假设我对此一无所知。

这是我的 DDL：

```
CREATE TABLE NotebookIndex (
    indexAutomatico TEXT,
    indexHumano TEXT,
    notebook BIGINT UNSIGNED
) CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE=MYISAM;
ALTER TABLE NotebookIndex ADD FULLTEXT(indexAutomatico, indexHumano); 
```

这是我现在的数据库：

![在此处输入图像描述](https://i.stack.imgur.com/1zfRH.png)

当我查询时：

```
SELECT notebook FROM NotebookIndex WHERE MATCH(indexHumano, indexAutomatico) AGAINST ('intel') 
```

我得到这个：

![在此处输入图像描述](https://i.stack.imgur.com/gL59P.png)

如果您仔细查看打印屏幕，您将能够看到`'intel'`确实存在于某些行中。

虽然，如果我更改`'intel'`为`'sony'`我会得到一些结果。我尝试了一些其他（存在的）词，但它也不起作用。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T23:21:05.900

如果该词出现在超过 50% 的行中，它将在[自然全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)中被忽略。如果您需要超过 50% 表的结果，请选择[BOOLEAN MODE](http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html)

# javascript - highcharts spline 1秒更新

> ID：16158233
> 
> 赞同：0
> 
> 时间：2013-04-22T23:09:20.337
> 
> 标签：javascript, highcharts

您好，我正在尝试让示例 highcharts spline 1 second update graph 工作。我以前使用过其他高图表工具，例如速度计，但我似乎无法使其正常工作。我的调试器说

```
 $(...).highcharts 
```

不是与

```
 data: (function() { 
```

以下。谢谢你的帮助

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>

<script>
 $(function () {
    $(document).ready(function() {
        Highcharts.setOptions({
            global: {
                useUTC: false
            }
        });

        var chart;
        $('#container').highcharts({
            chart: {
                type: 'spline',
                animation: Highcharts.svg, // don't animate in old IE
                marginRight: 10,
                events: {
                    load: function() {

                        // set up the updating of the chart each second
                        var series = this.series[0];
                        setInterval(function() {
                            var x = (new Date()).getTime(), // current time
                                y = Math.random();
                            series.addPoint([x, y], true, true);
                        }, 1000);
                    }
                }
            },
            title: {
                text: 'Live random data'
            },
            xAxis: {
                type: 'datetime',
                tickPixelInterval: 150
            },
            yAxis: {
                title: {
                    text: 'Value'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                formatter: function() {
                        return '<b>'+ this.series.name +'</b><br/>'+
                        Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) +'<br/>'+
                        Highcharts.numberFormat(this.y, 2);
                }
            },
            legend: {
                enabled: false
            },
            exporting: {
                enabled: false
            },
            series: [{
                name: 'Random data',
                data: (function() {
                    // generate an array of random data
                    var data = [],
                        time = (new Date()).getTime(),
                        i;

                    for (i = -19; i <= 0; i++) {
                        data.push({
                            x: time + i * 1000,
                            y: Math.random()
                        });
                    }
                    return data;
                })()
            }]
        });
    });
});
</script>
</head>
<body>
<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
<script type="text/javascript" src="js/highcharts.js"></script>
<script type="text/javascript" src="js/highcharts-more.js"></script
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:41:32.053

我让它运行起来。看起来我服务器上的 highcharts.js 文件不知何故损坏了。

# android - 图像重叠，因此 getHitRect() 方法返回 2 个值

> ID：16158243
> 
> 赞同：0
> 
> 时间：2013-04-22T23:10:15.127
> 
> 标签：android, piano

我正在尝试实现一个钢琴应用程序，所以我有 2 个白键图像和黑键图像之间。rect 与这 3 个图像相关联，在 onTouchListener 方法中，当我按下黑键时，getHitRect() 函数为我提供了所有 3 个值，并且所有 3 个声音同时播放。我应该进行哪些更改，以便只考虑外部图像按钮，即黑键坐标，并且只播放那个音符。它适用于图像不重叠的白键。

任何帮助深表感谢...

```
 myButtons = new ArrayList<ImageView>(); 
    myButtons.add(img_c);  //white key1
    myButtons.add(img_db); //black key
    myButtons.add(img_d);  //white key2

  getWindow().getDecorView()
    .findViewById(android.R.id.content)
    .setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View arg0, MotionEvent event) {
            int action = event.getAction();

            if (action != MotionEvent.ACTION_DOWN 
                && action != MotionEvent.ACTION_MOVE 
                && action != MotionEvent.ACTION_UP) return false;

            Rect hitRect = new Rect();
            ImageView button;
            for(int i = 0; i < myButtons.size(); i++) {
                button = myButtons.get(i);
                button.getHitRect(hitRect);

           if (hitRect.contains((int)event.getX(), (int)event.getY())) {

            if(action==MotionEvent.ACTION_DOWN)
                    {
                    //play the sound
                    }
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T15:58:10.643

矩形就是它们的本质：矩形。因此，重叠黑色按钮上的触摸事件也位于其下方左侧或右侧白色按钮的 hitRect 内（假设您的白色按钮不重叠）。这意味着单击黑色按钮总是会触发底层白色按钮的声音（首先或最后，取决于您按下黑色按钮的中轴的哪一侧）。

为避免这种情况，您需要检查白色按钮的触摸事件是否也在黑色按钮的 hitRect 内。如果是，忽略白色按钮，只触发黑色按钮。所以

```
if (hitRectWhite.contains((int)event.getX(), (int)event.getY()) && !hitRectBlack.contains((int)event.getX(), (int)event.getY())) 
```

然后触发白色并忽略黑色，否则忽略白色并仅触发黑色。玩弄它，这只是一个例子。这意味着您将不得不更改您的实现，以便同时拥有重叠的白色和黑色按钮的相关 hitRects。

要区分白色和黑色，您可以使用如下标签：

```
private enum ButtonColor {BLACK, WHITE}

img_c.setTag(ButtonColor.WHITE);
img_db.setTag(ButtonColor.BLACK);
img_d.setTag(ButtonColor.WHITE);

// and the check e.g. like this..
if (button.getTag() == ButtonColor.WHITE) {
  ...
} 
```

也许您也可以使用[contains()](http://developer.android.com/reference/android/graphics/Rect.html#contains%28android.graphics.Rect%29)、[intersects()](http://developer.android.com/reference/android/graphics/Rect.html#intersects%28int,%20int,%20int,%20int%29)等方法，但上述解决方案就足够了。

# c++ - 使用 strtok() 和 stringstream 的问题

> ID：16158244
> 
> 赞同：0
> 
> 时间：2013-04-22T23:10:20.863
> 
> 标签：c++, c, fstream, stringstream, strtok

我一直在摆弄这个，它返回的只是'save.rp'文件中单独行的前两个数字，

```
int characterPosition [2] = {0,0};

string convToStr(char *ch)
{
    stringstream ss;
    string res;
    ss << ch;
    ss >> res;
    return res;
}

int convToInt(string ch)
{
    stringstream ss(ch);
    int num;
    ss >> num;
    return num;
}

void loadSave()
{
    string loadPos;
    ifstream file("save.rp");
    if ((file.is_open())&&(file.good()))
    {
        getline(file,loadPos);
    }
    file.close();

    char str[] = {*loadPos.c_str()};
    char delim[] = "-";
    char *result = NULL;
    result = strtok(str, delim);
    int num = 0;
    while (result != NULL)
    {
        characterPosition[num] = convToInt(convToStr(result));
        cout << characterPosition[num] << endl;
        result = strtok(NULL, delim);
    }
} 
```

“save.rp”文件如下所示：400-2000

它应该分别返回每个数字，在这种情况下是 400 和 2000。

我在这里做傻事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:28:08.960

这条线

```
char str[] = {*loadPos.c_str()}; 
```

相当于

```
char str[] = {'4'}; 
```

这显然不是你想要的，你想要的

```
char str[] = "400-2000"; 
```

所以这样做

```
char str[500];                  // assuming your line length dont exceed 500
strcpy( str, loadPos.c_str() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:28:55.210

问题就在这里

```
char str[] = {*loadPos.c_str()}; 
```

`loadPos.cstr()`返回指向“400-2000”的指针；* 取消引用并给出第一个字符 - 即“4”。您使用第一个字符“4”初始化 str[]。str 现在是一个以 '4' 开头的数组，天知道之后会发生什么。您的所有操作都在此完成。

将上面的行更改为

```
char str[100];
strcpy(str,loadPos.c_str()); 
```

这里是如何避免 strtok 和 convToStr

```
int convToInt(string ch)
{
   stringstream ss(ch);
    int num;
    ss >> num;
    return num;
}

void loadSave()
{
    string loadPos;
    ifstream file("save.rp");
    if ((file.is_open())&&(file.good()))
    {
        getline(file,loadPos);
    }
    file.close();

    stringstream ss(loadPos);
    string token;

    while(getline(ss, token, '-'))
    {
        int r = convToInt(token);
        cout<<r<<endl;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T23:58:07.277

```
#include <fstream>
#include <iostream>
#include <sstream>
#include <string>

using namespace std;

int main() {
    ifstream inf("save.rp");
    int characterPosition [2] = {0,0};
    int num=0;
    string line_buff;
    while(inf.good()){
        getline(inf, line_buff, '-');
        stringstream ss(line_buff);
        ss >> characterPosition[num++];
    }
    cout << characterPosition[0] << ',' << characterPosition[1] << endl;
    return 0;
} 
```

# c - 如何创建 100 万个进程

> ID：16158250
> 
> 赞同：2
> 
> 时间：2013-04-22T23:10:47.393
> 
> 标签：c, multithreading, performance, process, fork

我的目标是简单地比较创建 100 万个进程与线程（按顺序）的性能。每个进程/线程什么都不做，它们只能在当前进程/线程完成后运行。

下面是我的代码。当我编译它时，我得到了几个错误实例：

```
-bash: fork: retry: Resource temporarily unavailable 
```

到底是怎么回事？

这是我的代码：

```
int main(int argc, char* argv[]){

int numberOfActions = 0;
int i;

if(argc != 3){
    printf("usage: <thread/process> <number_of_threads/processes>\n");
    exit(1);
}

numberOfActions = atoi(argv[2]); //number of threads/processes
if(strcmp(argv[1], "p") == 0){
    printf("process\n");
    int pid;
    int status;
    for(i = 0; i < numberOfActions; i++){
        pid = fork();

        if(pid < 0){//fork failed
            printf("fork failed\n");
            exit(0);
        }
        else{//fork succeeded
            if(pid == 0){//child
                continue;
            }
            else{//parent
                waitpid(pid, &status, WUNTRACED);
                exit(0);
            }
            exit(0);
        }
    }
}
else{
    printf("thread\n");
    pthread_t tidp;
    int thread0;
    int parameter = 0;
    for(i = 0; i < numberOfActions; i++){
        thread0 = pthread_create(&tidp, NULL, &continueThread, (void*) &parameter);
        if(thread0 != 0) printf("\ncan't create thread\n");
        pthread_join(tidp, NULL);
    }
}

return 1;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T23:26:20.197

在您的代码中，每个孩子都会立即创建另一个孩子。所以你没有连续运行这些进程。每个父级在其子级退出之前不会退出，因此实际上您正在尝试同时创建 100 万个进程。

相反，您可以执行以下操作：

```
for(i = 0; i < numberOfActions; i++){
    pid = fork();

    if(pid < 0){//fork failed
        printf("fork failed\n");
        exit(0);
    }
    else{//fork succeeded
        if(pid == 0){//child
            exit(0);
        }
        else{//parent
            waitpid(pid, &status, WUNTRACED);
        }
    }
} 
```

# mediawiki - 如何在 MediaWiki 中修改页面选项卡（内容操作选项卡）

> ID：16158251
> 
> 赞同：1
> 
> 时间：2013-04-22T23:10:52.940
> 
> 标签：mediawiki

我的 1.19 Mediawiki 的页面标签如下所示：
![在此处输入图像描述](https://i.stack.imgur.com/DpmnA.jpg)

我想将“观看”链接添加为应该如下所示的选项卡之一（**观看**作为星形图标而不是文本链接）：
![在此处输入图像描述](https://i.stack.imgur.com/oNaxE.jpg)

我整个早上都在谷歌上搜索，但不知道怎么做。似乎后者应该是 Mediawiki 的默认外观，但我就是无法理解。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:26:13.480

[终于从Mediawik 手册](http://www.mediawiki.org/wiki/Manual%3a%24wgAjaxWatch)中最晦涩的地方找到了答案。

放

> $wgVectorUseIconWatch

在您的 LocalSettings.php 中设置为 true。

# sql - Active Record：使用“where”子句加入查询

> ID：16158254
> 
> 赞同：-1
> 
> 时间：2013-04-22T23:10:59.457
> 
> 标签：sql, ruby-on-rails, activerecord, join

这是我的模型：

```
class Book < ActiveRecord::Base
    attr_accessible :author, :title
    validates :author, presence: true
    validates :title, :uniqueness => true, presence: true

    has_many :rentals 

    def rent?
        rentals.where(return_date: nil).count > 0
    end
end

class Rental < ActiveRecord::Base
    belongs_to :student
    belongs_to :book

    validates :student, presence: true
    validates :book, presence: true
    validates :rental_date, presence: true

    attr_accessible :rental_date, :return_date, :student, :book

    def pending?
        return return_date == nil
    end

    def overdue?
        if(return_date)
            return_date - rental_date > 7.days
        else
            Time.now - rental_date > 7.days
        end
    end
end 
```

我想查询所有不在租借中的书（即没有return_date 的这本书没有租借）。

我以为我可以使用我的“租金”？方法，但我无法使其工作，所以我尝试加入。

这就是我得到的：

```
Book.includes(:rentals).find(:all, :conditions => ['"rentals"."return_date" is NULL']) 
```

但我还想根据我的参数添加一些 where 查询。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:33:14.587

该`joins`方法适用于左外连接，但您需要自己构建 SQL 片段。下面，这被演示，结合一个`merge`和一个额外的租赁范围。

```
class Rental < ActiveRecord::Base
  scope :no_return, where('return_date IS NULL')
end

join_statement = 'LEFT OUTER JOIN rentals ON rentals.book_id = books.id'
Book.joins(join_statement).merge(Rental.no_return)
# => returns set of books with no rentals and 
# books with rentals that have no return date 
```

在不相关的注释中，您会发现许多人更喜欢这样编写您的`pending?`方法：

```
def pending?
  return_date.nil?
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:30:19.337

你应该使用`joins`：

```
Book.joins('LEFT OUTER JOIN rentals ON books.id = rentals.book_id')
    .where('rentals.return_date IS NULL') 
```

# java - TicTacToe：相对于显示扩展的文本扩展？改变听众？

> ID：16158256
> 
> 赞同：0
> 
> 时间：2013-04-22T23:11:06.440
> 
> 标签：java, swing, jframe, actionlistener, changelistener

我为一个项目创建了一个基于 Java 的井字游戏。游戏有一个带有`Jbutton`'s 的 Jframe 显示，通过事件监听器响应鼠标点击。GUI 显示可通过拖动边缘进行扩展。但是，`X`'s & `O`'s 的文本大小保持不变。我正在尝试查找可以与我的文本相关联的事件或更改侦听器或类似代码类型 - 当用户展开和折叠显示框时，根据显示的大小展开和折叠文本大小。

这是我迄今为止完成的代码：

```
package mytictactoe;

import java.awt.Color;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.AbstractButton;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

public class TicTacToeV1 implements ActionListener 
{
    /*Create winning combinations instance variable*/
    private int[][] winCombinations = new int[][] 
   {
            {0, 1, 2}, {3, 4, 5}, {6, 7, 8}, //horizontal wins
            {0, 3, 6}, {1, 4, 7}, {2, 5, 8}, //vertical wins
            {0, 4, 8}, {2, 4, 6}             //diagonal wins
   };//end winCombinations

    //Create the rest of the instance variables
    private String letter = "";
    private JFrame window = new JFrame("Tic-Tac-Toe ");
    private JButton buttons[] = new JButton[9];
    private int count = 0;
    private boolean win = false;

  //Create Window Display
    public TicTacToeV1()
    {
    window.setSize(300,300);
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.setLayout(new GridLayout(3,3));

    //MAC OS Specific Translucency Setting
    window.getRootPane().putClientProperty("Window.alpha", new Float(0.95f));

    //Set Window display color
    window.setBackground(Color.YELLOW);

    //Center display on screen
    window.setLocationRelativeTo(null);
    window.setVisible(true);

    //install buttons in window with a mouse click-event listener
    for(int i=0; i<=8; i++){
        buttons[i] = new JButton();
        window.add(buttons[i]);
        buttons[i].addActionListener(this);

    }// End Window Display creation

    //Make Game Window visible
    window.setVisible(true);
}//End TicTacToeV1 Board and Listener

    //Solicit user input

    /**
     When an object is clicked, perform an action.
     @param a action event object
     */
    public void actionPerformed(ActionEvent a) 
    {
        count++;

        //Determine X or O turn
        if(count % 2 == 0)
        {
            letter = "<html><font color = green>O</font></html>";
        }//End O turn 
        else 
        {
            letter = "<html><font color = blue>X</font></html>";
        }//End X turn

        //set font of X & O, when a button has been played, disable button from further use

         Font font = new Font("Times New Roman",Font.BOLD, 50);
         final JButton pressedButton = (JButton)a.getSource();//determine button selected 
         pressedButton.setFont(font);
         pressedButton.setText(letter);

         pressedButton.setEnabled(false);//disable selected buttons from further use  

        pressedButton.addActionListener(new ActionListener() //want expansion/drag listener - not action listener
         {//if display box increasing:  && if display box decreasing...  limit box size expand & shrink
             //button & font relative resizing 
             int size = 50;

             public void actionPerformed(ActionEvent ev)
             {

             pressedButton.setFont(new Font("Times New Roman",Font.BOLD, ++size));

             }    
         }
         );

        //Determine who won
        for(int i=0; i<=7; i++)
        {
            if( buttons[winCombinations[i][0]].getText().equals(buttons[winCombinations[i][1]].getText()) && 
                buttons[winCombinations[i][1]].getText().equals(buttons[winCombinations[i][2]].getText()) && 
                buttons[winCombinations[i][0]].getText() != "")
            { win = true;}
        }//End For loop for win determination

        //Show a dialog when game is over

        if(win == true)
        {
            if(count % 2 == 0)
            {
            char lineWinner = letter.charAt(letter.indexOf("O"));//necessary for lineWinner, which replaces HTML 'letter' variable
            JOptionPane.showMessageDialog(null, lineWinner + " wins the game!");//lineWinner was 'letter'
            System.exit(0);
            }//End O winner
            else
            {
            char lineWinner = letter.charAt(letter.indexOf("X"));//necessary for lineWinner, which replaces HTML 'letter' variable
            JOptionPane.showMessageDialog(null, lineWinner + " wins the game!");//lineWinner was letter
            System.exit(0); 
            }//End X winner
        }//End Win dialog

        //If game is a draw
            else if(count == 9 && win == false)
            {
            JOptionPane.showMessageDialog(null, "The game was tie!");
            System.exit(0);
            }//End Draw dialog        
    }//End ActionPerformed

    public static void main(String[] args)
    {
        DynamicFont re = new DynamicFont();
        re.setVisible(true);

        TicTacToeV1 starter = new TicTacToeV1();
    }//End main, which calls TicTacToeV1 method
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:12:15.273

*   一个猜测：您正在使用空布局并`setBounds(...)`定位您的组件。
*   解决方案：不要。使用布局管理器，一切都会迎刃而解。使用容器的 GridLayout(3, 3) 可以很好地保存 3 x 3 的 JButton 网格，并允许按钮相对于容器重新调整大小。
*   如果要在按钮调整大小时更改文本的字体大小，请考虑将 ComponentListener 添加到保存文本的 JButton 并在`componentResized(...)`方法中更改按钮字体的大小。您可能需要使用 FontMetrics 类才能使其正常工作。

# android - 微调器 JSON 加载

> ID：16158259
> 
> 赞同：0
> 
> 时间：2013-04-22T23:11:14.393
> 
> 标签：android, json, android-spinner

我确实看过[微调器](http://developer.android.com/guide/topics/ui/controls/spinner.html)，但是在我正在处理微调器上的数据的程序中是从 API 加载的……作为新手，我有点不知道将 JSONObjects 加载到微调器上。请帮忙。

API 回复有点像这样：

```
{"status":"","data":{"1":"scorpio"},"message":""} 
```

我必须在微调器中显示值“Scorpio”，并在传递表单时在后端分配值“1”。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:57:59.210

将您的 JSON 数组放入数组并简单地分配给循环中的微调器：

```
//json array
{"Employee":[{"Id":73,"Name":"Bård Pedersen","Email":"bp@spillbasen.com","Mobile":"9004422"}]}

ArrayList<String> TAG_ID = new ArrayList<String>();
ArrayList<String> TAG_NAME = new ArrayList<String>();
ArrayList<String> TAG_EMAIL = new ArrayList<String>();
ArrayList<String> TAG_PHONE_MOBILE = new ArrayList<String>();

  // Getting Array of Employee
        employee = json.getJSONArray("Employee");

        // looping through All Employee
        for (int i = 0; i < employee.length(); i++) {
            JSONObject c = employee.getJSONObject(i);

            // Storing each json item in variable
            id = c.getString("Id");
            name = c.getString("Name");
            email = c.getString("Email");
            mobile = c.getString("Mobile");

            // adding all get values into array
            if (name != "null" && mobile != "null") {
                TAG_NAME.add(name);
                TAG_ID.add(id);
                TAG_EMAIL.add(email);
                TAG_PHONE_MOBILE.add(mobile);
                close.add(R.drawable.close);
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:46:46.910

如果您的数据采用以下方式

> {“数据”：[{“1”：“天蝎座”}，{“2”：“宝马”}，{“3”：“斯柯达”}]}

然后你检索并在微调器中显示如下： -

```
String[] id,name;

JSONObject jObject = new JSONObject(your data);
JSONObject jdata = jObject.getJSONArray("data");

id = new String[jdata.length()];
name = new String[jdata.length()];

Iterator<?> keys = jSEngineers.keys();

for(int i=0;i<jdata.length();i++){
id[i] = (String) keys.next();
name[i] = (String) jSEngineers.getString(id[i]);
} 
```

现在您可以将这些值放入指定的数组中。现在您可以将所需的值分配给 Spinner。

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(YourActivity.this,android.R.layout.simple_spinner_item, name);
spinnerName.setAdapter(adapter); 
```

现在您可以按如下方式获取选定的微调器项目

```
spinnerName.getSelectedItemPosition(); 
```

有了这个，您将获得项目的位置。借助它，您可以检索用于背景目的所需的 id。如下..

```
Log.i("Item id is",id[spinnerName.getSelectedItemPosition()].toString()); 
```

# php - 使用 php 代码保存问题编辑数据

> ID：16158261
> 
> 赞同：0
> 
> 时间：2013-04-22T23:11:32.193
> 
> 标签：php, sql, sql-update, sql-delete

这是我的表单页面 editFormpackage.php
我可以将我的数据带回表单进行更新，但是当我更改值并单击更新时，iformation 不会保存。有人可以帮忙！我是 php 新手。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> AB Delivery </title>
<title> *Please enter details of employee took order. </title>
<link rel="stylesheet" type="text/css" href="style.css" />
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> AB Delivery </title>
<link rel="stylesheet" type="text/css" href="style.css" />
<link href= rel='stylesheet' type='text/css'>
<!-- jQuery file -->
<script src="js/jquery.min.js"></script>
<script src="js/jquery.tabify.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
var $ = jQuery.noConflict();
$(function() {
$('#tabsmenu').tabify();
$(".toggle_container").hide(); 
$(".trigger").click(function(){
    $(this).toggleClass("active").next().slideToggle("slow");
    return false;
});
});
</script>
</head>
<body>
<div id="panelwrap">

    <div class="header">
    <div class="title"><a href="#">AB Delivery</a></div>

    <div class="header_right">Welcome Admin </div>

    <div class="menu">
    <ul>
    <li><a href="http://localhost/delivery2/homepage.html" class="selected">New Entry</a></li>
    <li><a href="http://localhost/delivery2/showall.php">Show All</a></li>
    <li><a href="http://localhost/delivery2/edit.php">Edit</a></li>
    <li><a href="http://localhost/delivery2/search.html">Search</a></li>
    </ul>
    </div>

   <div class="center_content">  

    <div id="right_wrap">
    <div id="left_content">             
    <h2>Tables section</h2> 

<table id="rounded-corner">

<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("delivery", $con);

if(isset($_GET['package_id']))
{
$package_id=$_GET['package_id'];
if(isset($_POST['submit']))
{
$customer_id=$_POST['customer_id'];
$order_taken_by_employee_id=$_POST['order_taken_by_employee_id'];
$package_details=$_POST['package_details'];
$result=mysql_query("UPDATE package SET customer_id ='$customer_id',order_taken_by_employee_id='$order_taken_by_employee_id', package_details='$package_details' where package_id='$package_id'");
if($result)
{
header('location:edit.php');
}
}
$query1=mysql_query("SELECT * FROM package  WHERE package_id='$package_id'");
$query2=mysql_fetch_array($query1);
?>
<form method="post" action="http://localhost/delivery2/editFormpackage.php">
Customer ID:<input type="text" name="customer_id" value="<?php echo $query2['customer_id']; ?>" /><br />
Order Taken by Employee ID:<input type="text" name="order_taken_by_employee_id" value="<?php echo $query2['order_taken_by_employee_id']; ?>" /><br /><br />
Package Details:<input type="text" name="package_details" value="<?php echo $query2['package_details']; ?>" /><br /><br />
<br />
<input type="submit" name="submit" value="update" />
</form>

<?php
}
?>

 <div 

    <div class="clear"></div>
    </div> <!--end of center_content-->

    <div class="footer">
AB Delivery 
</div>

</div>

</body>
</html> 
```

这是来自edit.php 的代码，您可以看到我为所有要更新的表格创建了一个新页面。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> AB Delivery </title>
<title> *Please enter details of employee took order. </title>
<link rel="stylesheet" type="text/css" href="style.css" />
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> AB Delivery </title>
<link rel="stylesheet" type="text/css" href="style.css" />
<link href= rel='stylesheet' type='text/css'>
<!-- jQuery file -->
<script src="js/jquery.min.js"></script>
<script src="js/jquery.tabify.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
var $ = jQuery.noConflict();
$(function() {
$('#tabsmenu').tabify();
$(".toggle_container").hide(); 
$(".trigger").click(function(){
    $(this).toggleClass("active").next().slideToggle("slow");
    return false;
});
});
</script>
</head>
<body>
<div id="panelwrap">

    <div class="header">
    <div class="title"><a href="#">AB Delivery</a></div>

    <div class="header_right">Welcome Admin </div>

    <div class="menu">
    <ul>
    <li><a href="http://localhost/delivery2/homepage.html" class="selected">New Entry</a></li>
    <li><a href="http://localhost/delivery2/showall.php">Show All</a></li>
    <li><a href="http://localhost/delivery2/edit.php">Edit</a></li>
    <li><a href="http://localhost/delivery2/search.html">Search</a></li>
    </ul>
    </div>

   <div class="center_content">  

    <div id="right_wrap">
    <div id="left_content">             
    <h2>Tables section</h2> 

<table id="rounded-corner">

<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("delivery", $con);

$result = mysql_query("SELECT * FROM customers");

echo "<table border='19'>
<tr>
<th>Customer ID</th>
<th>Customer Address ID</th>
<th>Name</th>
<th>Phone Number</th>
<th>Email</th>
<th>Action</th>
</tr>";

while($row1 = mysql_fetch_array($result))

  {
  echo "<tr>";
  echo "<td>" . $row1['customer_id'] . "</td>";
  echo "<td>" . $row1['customer_address_id'] . "</td>";
  echo "<td>" . $row1['customer_name'] . "</td>";
  echo "<td>" . $row1['customer_phone'] . "</td>";
  echo "<td>" . $row1['customer_email'] . "</td>";
  echo "<td><a href='editFormcustomers.php?customer_id=".$row1['customer_id']."'>Edit</a></td>";
echo "<td><a href='deletecustomers.php?customer_id=".$row1['customer_id']."'>x</a></td><tr>";
  }

echo "</tr>";

echo "</table>";

mysql_close($con);

?>

<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("delivery", $con);

$result = mysql_query("SELECT * FROM address");

echo "<table border='19'>
<tr>
<th>Address ID</th>
<th>Address </th>
<th>Action</th>
</tr>";

while($row2 = mysql_fetch_array($result))

  {
  echo "<tr>";
  echo "<td>" . $row2['address_id'] . "</td>";
  echo "<td>" . $row2['line_1'] . "</td>";
  echo "<td><a href='editFormaddress.php?address_id=".$row2['address_id']."'>Edit</a></td>";
echo "<td><a href='deleteaddress.php?address_id=".$row2['address_id']."'>x</a></td><tr>";
  }

echo "</tr>";

echo "</table>";

mysql_close($con);

?>

<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("delivery", $con);

$result = mysql_query("SELECT * FROM package");

echo "<table border='19'>
<tr>
<th>Packasge ID</th>
<th> Customer ID</th>
<th>Employee ID</th>
<th>Details</th>
<th>Action</th>
</tr>";

while($row3 = mysql_fetch_array($result))

  {
  echo "<tr>";
  echo "<td>" . $row3['package_id'] . "</td>";
  echo "<td>" . $row3['customer_id'] . "</td>";
  echo "<td>" . $row3['order_taken_by_employee_id'] . "</td>";
  echo "<td>" . $row3['package_details'] . "</td>";
    echo "<td><a href='editFormpackage.php?package_id=".$row3['package_id']."'>Edit</a></td>";
echo "<td><a href='deletepackage.php?package_id=".$row3['package_id']."'>x</a></td><tr>";

  }

echo "</tr>";

echo "</table>";

mysql_close($con);

?>

<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("delivery", $con);

$result = mysql_query("SELECT * FROM employee");

echo "<table border='19'>
<tr>
<th>Employee ID</th>
<th>Employee Name</th>
<th>Phone Number</th>
<th>Other Details</th>
<th>Action</th>
</tr>";

while($row4 = mysql_fetch_array($result))

  {
  echo "<tr>";
  echo "<td>" . $row4['employee_id'] . "</td>";
  echo "<td>" . $row4['employee_name'] . "</td>";
  echo "<td>" . $row4['employee_phone'] . "</td>";
  echo "<td>" . $row4['other_employee_details'] . "</td>";
    echo "<td><a href='editFormemployee.php?employee_id=".$row4['employee_id']."'>Edit</a></td>";
echo "<td><a href='deleteemployee.php?employee_id=".$row4['employee_id']."'>x</a></td><tr>";

  }

echo "</tr>";

echo "</table>";

mysql_close($con);

?>

  <div 

    <div class="clear"></div>
    </div> <!--end of center_content-->

    <div class="footer">
AB Delivery 
</div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:49:56.057

这是正确的代码：

```
 <form method="post" action="http://localhost/delivery2/editFormpackage.php">
         Customer ID:<input type="text" name="customer_id" value="<?php echo     $query2['customer_id']; ?>" /><br />
        Order Taken by Employee ID:<input type="text" name="order_taken_by_employee_id" value="<?php echo $query2['order_taken_by_employee_id']; ?>" /><br /><br />
        Package Details:<input type="text" name="package_details" value="<?php echo $query2['package_details']; ?>" /><br /><br />
        <br />
        <input type="hidden" name="package_id" value="<?php echo $query2['package_id'];?>" />
        <input type="submit" name="submit" value="update" />
        </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:07:04.117

更新脚本中的 where 子句引用了包 ID，但是在表单中没有设置包 ID。

```
$result=mysql_query("UPDATE package SET customer_id ='$customer_id',order_taken_by_employee_id='$order_taken_by_employee_id', package_details='$package_details' where package_id='$package_id'"); 
```

在我们找到解决方案之前，我必须指出您非常容易受到 SQL 注入的影响，因为您在直接使用数据库之前没有对表单输入进行清理。看看这个，以帮助你在正确的轨道上[http://us2.php.net/manual/en/function.mysql-real-escape-string.php](http://us2.php.net/manual/en/function.mysql-real-escape-string.php)

下面的解决方案可以工作，但在 POST 中传递包 id 在技术上也可以被黑客入侵。在服务器或数据库会话中传递 ID 是最安全的（[使用 PHP 在两个页面之间传递变量的最安全方法](https://stackoverflow.com/questions/13142054/most-secure-way-to-pass-variables-between-two-pages-with-php)），但是下面的解决方案将使您顺利上路。

您正在从 GET 查询参数设置包 ID，但是一旦您的表单提交，它将提交到表单操作参数中定义的 URL，如您所见，该 URL 仍不包含包 ID。

要解决这个问题，您应该将 package_id 添加为隐藏的表单变量，如下所示：

```
<form method="post" action="http://localhost/delivery2/editFormpackage.php">
 Customer ID:<input type="text" name="customer_id" value="<?php echo     $query2['customer_id']; ?>" /><br />
Order Taken by Employee ID:<input type="text" name="order_taken_by_employee_id" value="<?php echo $query2['order_taken_by_employee_id']; ?>" /><br /><br />
Package Details:<input type="text" name="package_details" value="<?php echo $query2['package_details']; ?>" /><br /><br />
<br />
<input type="hidden" name="package_id" value="<?php echo $query2['package_id'];?>" />
<input type="submit" name="submit" value="update" />
</form> 
```

然后从 $_POST 超全局中的 package_id 设置 package_id，如下所示：

```
if(isset($_POST['submit']))
{
$package_id = $_POST['package_id'];
$customer_id=$_POST['customer_id'];
$order_taken_by_employee_id=$_POST['order_taken_by_employee_id'];
$package_details=$_POST['package_details'];
$result=mysql_query("UPDATE package SET customer_id ='$customer_id',order_taken_by_employee_id='$order_taken_by_employee_id', package_details='$package_details' where package_id='$package_id'");
// rest of your code 
```

# c# - 正则表达式获取第二个参数组

> ID：16158264
> 
> 赞同：1
> 
> 时间：2013-04-22T23:11:45.623
> 
> 标签：c#, regex

我目前的正则表达式如下：

```
(?<token>#gallery (?<id>[^#]+)#) 
```

我用它来获取一些信息。

如果是`#gallery d23d23d#`

它会`d23d23d`像名为 的分组一样好`Id`。

我需要扩展它以允许额外的参数，所以我可以抓住

`#gallery d23d23d foo#`并获得`d23d23d`和`foo`作为单独的组？

我的正则表达式技能毫无希望，我们将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:13:47.403

如果您想准确捕获两个组，请使用：

```
(?<token>#gallery\s+(?<id>[^\s#]+)\s+(?<foo>[^\s#]+)#) 
```

该组`foo`将包含第二个捕获组。请注意使用`\s`来解释除空格之外的空白字符，并在`\s+`组之间使用 以允许参数之间有多个空白字符。

要捕获零个、一个*或*两个组，请使用：

```
(?<token>#gallery(?:\s+(?<p1>[^\s#]+)(?:\s+(?<p2>[^\s#]+)(?:\s+(?<p3>[^\s#]+))?)?)?#) 
```

组`p1`、`p2`和`p3`将包含第一个出现时不需要`token`匹配的组。

要捕获任意数量的组（包括无组），请使用

```
(?<token>#gallery(?:\s+(?<id>[^\s#]+))*#) 
```

尽管`Value`of 组`id`将仅包含最后一个匹配的参数，但它的`Captures`属性将包含所有其他参数。

# android - 果冻豆中的飞行模式

> ID：16158265
> 
> 赞同：8
> 
> 时间：2013-04-22T23:11:59.990
> 
> 标签：android, reflection, android-ndk, android-4.2-jelly-bean

我正在尝试在装有 Android 4.2.2 的 Nexus 4 中设置飞行模式。我知道这是不可能的，因为 AIRPLANE_MODE_ON 已移至[全局系统设置](http://developer.android.com/reference/android/provider/Settings.Global.html)，它只是一个读取选项。

有没有其他方法可以做类似的事情，我的意思是禁用收音机？我可以禁用蓝牙、wifi 和 Internet 连接，但电话网络仍处于活动状态。

是否可以使用[NDK](http://developer.android.com/tools/sdk/ndk/index.html)创建一个库以完全禁用网络？

**编辑**：我尝试过使用`java.lang.reflect`这种方法：

```
@SuppressLint("NewApi")
@SuppressWarnings("rawtypes")
private boolean putStringAirplaneMode() throws ClassNotFoundException,
        NoSuchMethodException, IllegalArgumentException,
        IllegalAccessException, InvocationTargetException {

    ContentResolver resolver = context.getContentResolver();
    String name = Settings.Global.AIRPLANE_MODE_ON;
    String value = (isEnabled() ? "1" : "0");
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        Log.v("AirplaneBatterySaver",
                "Using reflection to change airplane mode");
        // For JELLY_BEAN_MR1 use reflection. TODO test if works reflection
        Class SystemProperties = android.provider.Settings.Global.class;

        Class[] parameterTypes = new Class[3];
        parameterTypes[0] = ContentResolver.class;
        parameterTypes[1] = String.class;
        parameterTypes[2] = String.class;

        @SuppressWarnings("unchecked")
        Method method = SystemProperties.getMethod("putString",
                parameterTypes);

        method.setAccessible(true);
        return (Boolean) method.invoke(new Object(), resolver, name, value);
        // return Settings.Global.putString(resolver, name, value);

    } else {
        Log.v("AirplaneBatterySaver",
                "Using Settings.System to change airplane mode");
        return Settings.System.putString(resolver, name, value);
    }
} 
```

如您所见，我替换了该方法`Settings.System.putString(resolver, name, value);`，`JELLY_BEAN_MR1`但是，当然，我得到了一个`SecurityException`，因为我的应用程序不是系统应用程序。这是跟踪：

```
Caused by: java.lang.SecurityException: Permission denial: writing to secure 
    settings requires android.permission.WRITE_SECURE_SETTINGS
at android.os.Parcel.readException(Parcel.java:1425)
at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:185)
at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:137)
at android.content.ContentProviderProxy.call(ContentProviderNative.java:574)
at android.provider.Settings$NameValueCache.putStringForUser(Settings.java:777)
at android.provider.Settings$Global.putStringForUser(Settings.java:5421)
at android.provider.Settings$Global.putString(Settings.java:5411) 
```

如果我使用`<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/>`我得到错误`Permission is only granted to system apps`。我正在检查 SDK 源（在来自跟踪的文件中），试图找到一种在没有此权限的情况下设置飞行模式的方法，但我没有取得任何成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T01:29:33.330

从 4.2.2 开始，您无法切换飞行模式，因为它是只读的。

你有两个选择。

1.  使您的应用程序成为`System`应用程序。即 Root 手机，将您的 APK 推送到`/system/app`并从那里安装。这将使您能够切换飞行模式。
2.  用于`Reflection`获取切换飞行模式的 Android 系统函数调用。

您应该获取有关如何使用反射来获取公开 API 的代码示例，否则不会通过 SDK 向开发人员公开。

# selenium - 想要在 Web 驱动程序中单击按钮的代码

> ID：16158271
> 
> 赞同：-2
> 
> 时间：2013-04-22T23:12:38.963
> 
> 标签：selenium, web

按钮单击的 selenium Web 驱动程序语法是什么？我的代码是

```
<input class="btn btn-primary" type="button" value="Register"
    href="/home/pages/home#/register" ng-click="register($event)"> 
```

我写的代码没有工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:55:29.963

这是使用 Selenium 2 用 Ja​​va 编写的

```
driver.findElement(By.cssSelector("input.btn.btn-primary")).click(); 
```

或者

```
driver.findElement(By.cssSelector("input[value='Register']")).click(); 
```

但是如果您有很多具有相同类或值的按钮，我建议您添加一个条件，例如

```
driver.findElement(By.cssSelector("input.btn.btn-primary[value='Register']")).click(); 
```

# c# - 在 WebBrowser 控件中禁用滚动

> ID：16158275
> 
> 赞同：2
> 
> 时间：2013-04-22T23:13:05.920
> 
> 标签：c#, image, windows-8, webbrowser-control

我有一个显示一个大图像的网页。我编写了一个需要该图像的应用程序。我尝试将该图像保存到网页中，在应用程序中使用，但我希望该功能在返回同一视图时或每 15 秒刷新一次该图像。但是，似乎 WebBrowser 框实际上更容易刷新，并且当您进入视图时它也会自动刷新。

**我想固定 WebBrowser 框，以便用户无法滚动**，仅框住图像。关于如何实现这一点或禁止与 WebBrowser 框交互的任何想法？

这是 XAML

```
<phone:WebBrowser x:Name ="Camera1" Source ="uri goes here" HorizontalAlignment="Left" 
Margin="10,42,0,0" VerticalAlignment="Top" Height="247" Width="439"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:06:55.397

[实际上，我只是在这篇](https://stackoverflow.com/questions/8218107/disable-scrolling-in-browser-control-for-wp7)文章和 Mod的帮助下才弄清楚了，因为它可以如此恰当地修改我的问题。

引用：

> 鉴于网络浏览器：
> 
> 禁用交互设置 IsHitTextVisible=false
> 
> ```
> <phone:WebBrowser Height="600" IsHitTestVisible="False" /> 
> ```
> 
> 要仅禁用滚动，请设置 ScrollViewer.VerticalScrollBarVisibility= disabled
> 
> ```
> <phone:WebBrowser Height="600" ScrollViewer.VerticalScrollBarVisibility="Disabled" 
> ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-19T14:22:55.233

以下设置未禁用 Windows 中 WebBrowser 中的垂直滚动...当用户在 LCD 上滑动时，我们如何使浏览器不向上/向下滚动？我正在实施签名应用程序。

要仅禁用滚动，请设置 ScrollViewer.VerticalScrollBarVisibility= disabled

# ios - 根据其值删除 NSArray 元素

> ID：16158279
> 
> 赞同：1
> 
> 时间：2013-04-22T23:13:32.527
> 
> 标签：ios, objective-c, nsarray, nsdictionary

我有一个 NSArray 的 NSDictionary 值，它们的 NSDictionay 结构看起来像这样

```
ID = 22;
SERIESID = 33;
YEAREND = 2002;
YEARSTART = 1996; 
```

我的数组中有十几个这样的元素，我想知道如何从 NSArray 中删除具有相同**SERIESID**的元素，或者在 NSArray 已经制作之后是否有可能。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T23:36:40.533

基本上，遍历数组，跟踪您看到的 SERIESID，如果当前元素的 SERIESID 是重复的，则将其标记为删除。

像这样：

```
NSMutableSet *seen = [NSMutableSet set];
NSMutableIndexSet *toDelete = [NSMutableIndexSet indexSet];
[yourArray enumerateObjectsUsingBlock:^(id dict, NSUInteger i, BOOL *stop) {
    if ([seen containsObject:dict[@"SERIESID"]]) {
        [toDelete addIndex:i];
    } else {
        [seen addObject:dict[@"SERIESID"]];
    }
}];
[yourArray removeObjectsAtIndexes:toDelete]; 
```

（作为旁注，即使它不是最直观的方法，您也必须以这种方式进行删除。NSMutableArray 并非设计为在您循环遍历它时进行更改，所以您如果你只是尝试`removeObjectAtIndex:`在你的循环中使用，会得到错误。这就是为什么我们建立一个我们想要删除的对象列表，然后在最后把它交给数组。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T23:38:34.837

我没有对此进行测试，但是您可以执行类似的操作：

```
NSMutableArray *seriesHolder = [NSMutableArray alloc]init];

for(NSMutableDictionary *dict in yourMutableArray)
{
   NSString *seriesID = [dict objectForKey:@"SERIESID"];

   if(![seriesHolder containsObject:seriesID])
   {
     [seriesHolder addObject:seriesID];
   }
   else
   {
     [yourMutableArray removeObject:dict];
   } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T23:36:43.523

创建一个`NSMutableSet`以包含 的使用值`SERIESID`。循环`for`遍历数组中的每个字典。当您遍历每个字典时，检查字典`SERIESID`键的对象。如果集合中还没有它，请添加它。如果它已经存在，则从数组中删除该对象。迭代完成后，数组中的每个值将只有一个对象`SERIESID`。请注意，显然 this 将意味着具有唯一性的字典的第一个实例`SERIESID`将被保留，因此在遍历数组之前，请确保字典的顺序可行。

如果您需要有关完成此操作所需的精确方法的更多特定信息，请查看[文档。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableSet_Class/Reference/NSMutableSet.html)

# c# - 如何呈现 XML Razor 视图？

> ID：16158280
> 
> 赞同：1
> 
> 时间：2013-04-22T23:13:33.970
> 
> 标签：c#, xml, excel, razor

我想创建一个剃刀 XML 视图并渲染它。例如：

```
@model SomeMessageClass

<?xml version="1.0"?>
<root>
    <message>
       <subject>@Model.Subject</subject>
       <to>@Model.To</to>
       <from>@Model.From</from>
       <body>@Model.Subject</body>
    </message>
</root> 
```

我怎样才能做到这一点？我应该只使用cshtml文件吗？

我的最终目标是使用 xml 和 razor 动态创建一个 excel 文件。然后将该文件作为下载流传输给用户。

# c# - 集线器里有什么？

> ID：16158290
> 
> 赞同：1
> 
> 时间：2013-04-22T23:14:25.423
> 
> 标签：c#, asp.net, signalr

所以我一直在深入*研究 SignalR*，它是一种非常简洁的技术，已经成为*ASP.NET*家族的一部分。我学习了一些教程，这些教程解释了如何构建一些简洁*的实时应用程序*，例如股票行情、聊天、仪表板和移动对象。

这些基本教程确实展示了框架背后的一些力量。我正在阅读一些文档，其中显示：

*   联系
*   集线器

所以基本上你有两种选择来连接你的*Client*和*Server*。但是在我偶然发现所有这些文档时，它指出：

> SignalR 可以利用连接或集线器；通过绘制一个连接，它将利用 Web 套接字。带有原始套接字的编码，但它是高保真和低延迟的。但正如我所说，这在对 Web Socket 的支持中都存在缺陷，直接对套接字进行编码。

这是有道理的，但随后他描述了`Hub`工作原理。直接在原始套接字上编码。这是有趣的部分，`Hub`它将应用以下传输方法：

*   网络套接字
*   长池化
*   服务器发送事件
*   永远的框架

显然，`Hub`它非常整洁。因为它确定了最佳的运输方法，然后实施该方法以实现目标。

我的问题**为什么你会想要直接编码到套接字，`Hub`无论如何都会自动选择最好的传输方法。包括Web Socket？**

澄清会很好。我不太明白为什么不使用`Hub`? 为什么要费心使用`Connection`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T23:35:13.000

Patrick Fletcher 在[SignalR 简介：连接和集线器](http://www.asp.net/signalr/overview/introduction/connections-and-hubs)中解释了为什么您可能希望使用基于集线器的连接。在所有其他情况下，您应该使用集线器，因为它们为您提供了许多附加功能。这是他写的：

> ## 连接与集线器
> 
> SignalR API 包含两种用于在客户端和服务器之间进行通信的模型：连接和集线器。
> 
> Connection 代表一个简单的端点，用于发送单个接收者、分组或广播消息。Connection API（由 PersistentConnection 类在 .NET 代码中表示）使开发人员可以直接访问 SignalR 公开的低级通信网络。使用过基于连接的 API（例如 Windows Communcation Foundation）的开发人员会熟悉使用连接通信模型。
> 
> 集线器是建立在连接 API 之上的更高级的管道，它允许您的客户端和服务器直接相互调用方法。SignalR 像魔术一样处理跨机器边界的调度，允许客户端像调用本地方法一样轻松地调用服务器上的方法，反之亦然。如果您的应用程序使用不同类型的消息，建议您使用 Hub 类，这样您就不必创建自己的调度；使用 Hub，您可以调用客户端上的方法，而不是发送需要接收、解释和操作的显式消息。使用过远程调用 API（例如 .NET Remoting）的开发人员会熟悉使用 Hubs 通信模型。
> 
> ### 选择沟通模式
> 
> 大多数应用程序应该使用 Hubs API。Connections API 可用于以下情况：
> 
> *   需要控制发送消息的格式。
> *   开发人员更喜欢使用消息传递和调度模型而不是远程调用模型。
> *   正在移植使用消息传递模型的现有应用程序以使用 SignalR。

# java - 运行多个线程的问题

> ID：16158292
> 
> 赞同：0
> 
> 时间：2013-04-22T23:14:45.537
> 
> 标签：java, multithreading

我正在制作一个多线程应用程序，用户一次添加一种成分来制作水果沙拉。允许将最大数量的水果放入碗中。

代码编译并运行，但问题是它只运行一个线程（Apple）。Strawberry 的 thread.sleep(1000) 时间与苹果相同。我尝试将草莓的睡眠更改为不同的睡眠时间，但并没有解决问题。

苹果.java

```
public class Apple implements Runnable
{
    private Ingredients ingredient;

    public Apple(Ingredients ingredient)
    {   
        this.ingredient = ingredient;
    }

    public void run() 
    {
        while(true)
        {
            try 
            { 
                Thread.sleep(1000);
                ingredient.setApple(6);
            } 
            catch (InterruptedException e) 
            { 
                e.printStackTrace();
            }
         }
     }
} 
```

配料.java

```
public interface Ingredients 
{
    public void setApple(int max) throws InterruptedException;
    public void setStrawberry(int max) throws InterruptedException;
} 
```

FruitSalad.java

```
public class FruitSalad implements Ingredients
{
    private int apple = 0;
    private int strawberry = 0;

    public synchronized void setApple(int max) throws InterruptedException 
    {
        if(apple == max)
            System.out.println("Max number of apples.");
        else
        {
            apple++;
            System.out.println("There is a total of " + apple + " in the bowl.");
        }
    }
    //strawberry
} 
```

主.java

```
public class Main 
{
       public static void main( String[] args )
       {
           Ingredients ingredient = new FruitSalad();

           new Apple(ingredient).run();
           new Strawberry(ingredient).run();   
       }
} 
```

输出：

*   碗里总共有 1 个苹果。
*   ……
*   碗里总共有 6 个苹果。
*   苹果的最大数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:18:40.477

当您`.run()`直接在另一个线程中调用 Runnable 上的方法时，您只需将该“线程”添加到同一个堆栈（即它作为单个线程运行）。

您应该将 Runnable 包装在一个新线程中并用于`.start()`执行该线程。

```
Apple apple = new Apple(ingredient);
Thread t = new Thread(apple);
t.start();

Strawberry strawberry = new Strawberry(ingredient);   
Thread t2 = new Thread(strawberry);
t2.start(); 
```

您仍然直接调用 run() 方法。相反，您必须调用该`start()`方法，该方法`run()`在新线程中间接调用。见编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:19:27.770

尝试这样做：

```
Thread t1 = new Thread(new Apple(ingredient));
t1.start;

Thread t2 = new Thread(new Strawberry(ingredient));
t2.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T23:22:34.883

让你的课程扩展`Thread`：

```
public class Apple extends Thread
public class Strawberry extends Thread 
```

然后你可以启动这些线程：

```
Apple apple = new Apple(ingredient);
Strawberry strawberry = new Strawberry(ingredient);   

apple.start();
strawberry.start(); 
```

您应该在两个线程上调用 join 以在终止之前等待它们：

```
apple.join();
strawberry.join(); 
```

# android - Android神秘的空指针异常

> ID：16158294
> 
> 赞同：2
> 
> 时间：2013-04-22T23:15:34.670
> 
> 标签：android, crash, null, nullpointerexception, illegalstateexception

自从我上传了我的应用程序后，我收到了许多 java.lang.NullPointerException 崩溃报告。我正在努力理解这个问题，因为它不会在模拟器或我亲自测试过的物理设备上崩溃。以下是其中一份报告的示例：

```
java.lang.IllegalStateException: Could not execute method of the activity
at android.view.View$1.onClick(View.java:2072)
at android.view.View.performClick(View.java:2408)
at android.view.View$PerformClick.run(View.java:8817)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:143)
at android.app.ActivityThread.main(ActivityThread.java:4914)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
at com.bryan.barrett.countdownforandroid.practiceSubscreen.openNumbersSelect(Unknown         Source)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at android.view.View$1.onClick(View.java:2067)
... 11 more
Caused by: java.lang.NullPointerException
... 15 more 
```

我认为当按下“openNumbersSelect”按钮时，这会在“practiceSubscreen”中崩溃。这是我对该按钮的一段代码：

```
public void openNumbersSelect(View view){
    Intent iNum = new Intent(this, numbersSelect.class);
    String gamemode = "practice";   //practice mode
    iNum.putExtra("gamemode", gamemode);
    startActivity(iNum);

    overridePendingTransition(R.anim.fadein, R.anim.fadeout);
    if(sound){
        soundPool.play(Main.SNDclick, audio.getStreamVolume(AudioManager.STREAM_MUSIC), 
                audio.getStreamVolume(AudioManager.STREAM_MUSIC), 1, 0, 1f);
    }
} 
```

这是要打开的以下 numbersSelect 类中的 onCreate 代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_numbers_select);

        Intent i = getIntent();
        gamemode = i.getStringExtra("gamemode");    
        gameround = i.getIntExtra("gameround", 0) + 1;
        points = i.getIntExtra("points", 0);    

        //Shared Preferences
        prefs = PreferenceManager.getDefaultSharedPreferences(this);
        sound = prefs.getBoolean("sound", true);

        //Sounds
        setVolumeControlStream(AudioManager.STREAM_MUSIC);
        audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        soundPool = Main.soundPool;

        //Big Numbers
        for (int n=25; n<=100; n+=25){      //add 25, 50, 75, 100
            bignumbers.add(n);              
        }
        //Small Numbers
        for (int m=1; m<=10; m++){      //adds 1-10 twice
            smallnumbers.add(m); 
            smallnumbers.add(m); 
        }

        //Screen metrics
        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        int screenw = metrics.widthPixels; int screenh = metrics.heightPixels;
        int unitw = (screenw/14); int unith = (screenh/40); //divide screen into 14 columns x 40 rows...

        num1 = (Button)findViewById(R.id.num1img); nums.add(num1); 
        num2 = (Button)findViewById(R.id.num2img); nums.add(num2); 
        num3 = (Button)findViewById(R.id.num3img); nums.add(num3); 
        num4 = (Button)findViewById(R.id.num4img); nums.add(num4); 
        num5 = (Button)findViewById(R.id.num5img); nums.add(num5); 
        num6 = (Button)findViewById(R.id.num6img); nums.add(num6); 
        for(int n=0; n<6; n++){
            nums.get(n).setHeight(screenh/4); nums.get(n).setTextSize(Main.fontSize); 
            nums.get(n).setWidth(screenw/6); nums.get(n).setPadding(1, 1, 1, 1);
        }
        lrg = (Button)findViewById(R.id.largebutton); lrg.setWidth((unitw*200)/35); 
        sml = (Button)findViewById(R.id.smallbutton); sml.setWidth((unitw*200)/35);

        Typeface scribble = Typeface.createFromAsset(getAssets(), "fonts/scribble.ttf");

        TextView numbersSeltext = (TextView)findViewById(R.id.numbersSeltext);
        numbersSeltext.setTypeface(scribble);
        numbersSeltext.setWidth(screenw); numbersSeltext.setHeight(unith*8);
        if(gamemode.equals("full")){
            numbersSeltext.setText("Round " + gameround + ": Select 6 Numbers");
        }
} 
```

如果有人能对此有所了解，将不胜感激！这是一个令人沮丧的问题，因为它在我自己测试过的设备上运行良好，而且根据反馈，它似乎在很多设备上运行良好，所以我什至不确定代码是否存在问题，或者某些设备是否存在问题已构建.. 如果需要，我可以抛出更多崩溃报告或代码！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:18:49.733

如果我是你，我会在使用之前测试所有 Buttons num1,num2... 和许多其他视图是否为空，因为如果视图由于任何原因尚未创建存在，那么简单地获取视图可能会引发 nullpointerexception（例如，可滚动的列表视图项仅填充可以适合屏幕的视图）。如果您让用户知道您的布局 xml 是什么，它可能会有所帮助。

# php - 如何更改 cakephp 为关联模型传递数据的方式？

> ID：16158297
> 
> 赞同：0
> 
> 时间：2013-04-22T23:16:02.730
> 
> 标签：php, cakephp, cakephp-model

我已经尝试寻找这个问题的答案，因为我确定它之前已经整理过，但我找不到任何讨论 cakephp 如何格式化从模型返回的数据的内容。通常我只是看到数据是如何来的，并根据每个控制器/视图的需要处理它。然而，在这种情况下，我想重用我的视图，不幸的是 cakephp 将来自不同控制器的数据交给我的方式给我带来了问题。

我有 2 个模型，关联如下：

```
class Group extends AppModel {
public $hasMany = array(  'User' ); 
}

class User extends AppModel {
public $belongsTo = array(
'Group'  ); 
} 
```

我想向`View/Groups/view/id` 我展示各个组的详细信息，以及属于该组的用户列表。理想情况下，我不想重新创建代码来显示用户列表，因为它已经存在于`View/Users/index`

我发现我可以使用 $this->extend('/Users/index') 但我不能像我想要的那样只使用 `$this->set('users',$group['User'])，因为数组的构建方式不同。

在 UsersController::index() 我会调用`$users = $this->find('all');`它给出这样的用户列表：`debug($users);`

```
array(
(int) 0 => array(
    'User' => array(
        'id' => '100',
        'group_id' => '101', 
    )
),
(int) 1 => array(
    'User' => array(
        'id' => '101',
        'group_id' => '101',
    )
)
) 
```

在 GroupsController 中使用 $this->Group->contain(array('User')); $group = $this->GroupsController->Group->find('first','conditions'=>array('id'=>$id);

它返回组列表，但采用这种格式`debug($group['User']);`

```
 'User' => array(
    (int) 0 => array(
        'id' => '101',
        'group_id' => '101', 
    ),
    (int) 1 => array(
        'id' => '100',
        'group_id' => '101',

    )
) 
```

无论如何我可以改变我调用模型数据的方式，让它在不同的控制器上以一致的方式传递，无论是主模型还是关联模型？还是我每次只需要循环浏览数据并以正确的格式重建数据？这似乎一旦我的数据集增长，它将成为一个效率问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:20:42.310

您以奇数格式获取数据的原因是因为您使用的是包含这意味着不会获取相关数据（不是直接数据）。

我建议不要为此实施规范化，而是修改您的 find() 调用：

```
$group = $this->GroupsController->Group->User->find('list', array(
    'conditions' => array('User.group_id' => $id)
)); 
```

注意：在不需要时使用 contains() 会在 SQL 查询中添加额外的 JOIN，这会影响性能。

我不想规范化/重新格式化我的 CakePHP 查找数据，因为它使它不标准。CakePHP 总是以可预测的方式返回数据，这只是习惯它并使用适当的方法来检索数据的问题。

检索直接数据将以以下格式返回：

```
 array(
    (int) 0 => array(
        'MODEL' => array(
            'field1' => 'value1',
            'field2' => 'value2', 
        )
    ),
    (int) 1 => array(
        'MODEL' => array(
            'field1' => 'value1',
            'field2' => 'value2',
        )
    )
  ) 
```

检索直接数据和相关数据（通过使用包含）将以以下格式返回：

```
 array(
    (int) 0 => array(
        'MODEL' => array(
            'field1' => 'value1',
            'field2' => 'value2', 
            'RELATEDMODEL' => array(
                (int) 0 => array(
                    'field1' => 'value1'
                    'field2' => 'value2'
                ),
                (int) 1 => array(
                    'field1' => 'value1'
                    'field2' => 'value2'
                )
            )
        )
    ),
    (int) 1 => array(
        'MODEL' => array(
            'field1' => 'value1',
            'field2' => 'value2',
            'RELATEDMODEL' => array(
                (int) 0 => array(
                    'field1' => 'value1'
                    'field2' => 'value2'
                ),
                (int) 1 => array(
                    'field1' => 'value1'
                    'field2' => 'value2'
                )
            )
        )
    )
  ) 
```

您的数据不同的原因是因为您告诉 MySQL 获取相关数据而不是直接获取它。

如果您真的想规范化您的数据（我不建议这样做），请继续阅读：

有几种方法可以做到这一点，但最合适的方法是在模型（或 AppModel）的 afterFind() 回调中实现数据规范化。

*   1.3 文档：[http ://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#afterfind](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#afterfind)

*   2.x 文档：[http ://book.cakephp.org/2.0/en/models/callback-methods.html#afterfind](http://book.cakephp.org/2.0/en/models/callback-methods.html#afterfind)

每次找到适用模型后都会触发此回调。在 AppModel::afterFind() 中实现它会影响应用中的每个查找调用。

旁注：标准化数据的一种简单方法是使用 Set::extract()，但是，根据我的经验，由于实现的健壮性，它可能比您自己循环数据导致更多开销。看看它是否符合您的需求可能是个好主意。就个人而言，我自己不会在 afterFind() 中使用它，因为它可能会增加开销，但是，我将它包括在这里，因为它可能符合您的需求。

1.3 设置提取文档：

*   [经典提取： http](http://book.cakephp.org/1.3/en/The-Manual/Core-Utility-Libraries/Set.html#classicextract) ://book.cakephp.org/1.3/en/The-Manual/Core-Utility-Libraries/Set.html#classicextract
*   提取：[http ://book.cakephp.org/1.3/en/The-Manual/Core-Utility-Libraries/Set.html#extract](http://book.cakephp.org/1.3/en/The-Manual/Core-Utility-Libraries/Set.html#extract)

2.0 设置提取文档：

*   [经典提取： http](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set::classicExtract) ://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set::classicExtract
*   提取：[http ://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set::extract](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set::extract)

关于效率问题：执行常规循环根本不会增加太多开销。然而，话虽如此，规范化当然会增加一点开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:13:24.347

事实上，手动修改数组是不可取的。试图影响模型返回关联数据的方式也是不明智的。

我能想到的最好的方法如下。

假设您的用户索引具有以下内容：

```
foreach($users as $user) {
    debug($user['User']); // made up for brevity
} 
```

在块的开头添加以下内容`foreach`：

```
if (!isset($user['User']) {
    $user = array('User' => $user);
} 
```

这似乎并没有那么昂贵。

# javascript - Javascript Div 最高

> ID：16158301
> 
> 赞同：0
> 
> 时间：2013-04-22T23:16:38.250
> 
> 标签：javascript, jquery, css, html, alignment

我正在尝试使一排 div 都与最高的高度相匹配，因此它们看起来很统一。

我已经阅读了很多关于此的内容，但似乎找不到任何可以跨浏览器工作的解决方案。

我正在使用的当前脚本是：

```
 var maxHeight = 1;

    $('.thumbnail').each(function() {
        maxHeight = maxHeight > $(this).height() ? maxHeight : $(this).height();
    });

    $('.thumbnail').each(function() {
        $(this).height(maxHeight);
    }); 
```

从逻辑上讲，我不明白为什么这不起作用？

在 Firefox 中运行良好，但似乎在 Chrome 和 Safari 中导致问题。

这是一个供您使用的小提琴：http: [//jsfiddle.net/UtMz3/](http://jsfiddle.net/UtMz3/)

真正奇怪的是它确实可以在小提琴中使用，但在我的网站上却不行。

*更新*

所以发生的事情是 Chrome 在图像加载到其中之前抓取了 DIV 高度。因此 Chrome 将 DIV 大小设为 120 像素，然后加载图像，从而将 DIV 大小更改为 290 像素。我无法弄清楚为什么会发生这种情况，似乎在 $(document).ready({}) 包装器中应该可以解决这个问题。我也尝试将 JavaScript 放在页面底部，但结果仍然相同。

非常感谢任何想法或评论，亲切的问候，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:51:10.753

您将需要检查内容是如何放入这些 div 中的。如果它还没有出现`$(document).ready()`，那么内容可能是动态添加的，您需要等到它添加到测量之后。

你如何等到内容出现之后取决于它是如何被添加的。

`$(document).ready()`不等待图像加载。您需要使用`$(window).load()`它，因此如果内容包含图像，那么您将需要找到一种方法来等待它们加载。 `$(window).load()`将等待所有图像加载，或者您可以`load`在尚未加载的每个图像对象上安装事件处理程序，以便在完成加载时收到通知。

# c++ - C++ 中的数组包装类

> ID：16158307
> 
> 赞同：1
> 
> 时间：2013-04-22T23:17:16.450
> 
> 标签：c++, arrays, class, wrapper

所以，我是 C++ 新手（全新），作为一项任务，我必须编写一个充当数组包装器的类。由于我很新，我不确定我的重载运算符和这样的工作是否有效，所以如果有人能告诉我我的代码看起来如何：

这将是标题：

```
class MyArray
{

private:
    string* sList;
    unsigned int size;

public:
    MyArray(const unsigned int size = 1);
    MyArray(const MyArray &toCopy);
    MyArray& operator=(const MyArray& toAssign);
    ~MyArray();
    //MyArray& operator+
    string& operator[](const int index);
    const int size();
}; 
```

这将是底层代码：

```
MyArray::MyArray(const unsigned int initSize)
    : size(initSize)
{
    sList = new string[initSize];
    return;
}

MyArray::MyArray(const MyArray &toCopy)
    : size(toCopy.size)
{
    if(toCopy.sList)
    {
        sList = new string[size];
        for(int a=0; a<size; a++){
            strcpy(sList[a], toCopy.sList[a]);
        }

    }
    else sList = NULL;
    return;

}

MyArray& operator=(const MyArray& toAssign)
{
    if(this != &toAssign)
    {
        if(sList)
        {
            delete [] sList;
        }

        size = toAssign.size;

        if (toAssign.sList)
        {
            sList = new string[size];

            for(int a=0; a<size; a++){
                strcpy(sList[a], toCopy.sList[a]);
            }
        }
        else
        {
            sList = NULL
        }
    }
}

MyArray::~MyArray()
{
    delete [] sList;
    return;
}

string& MyArray::operator[](const int index)
{
    return sList[index];
}

const int MyArray::size()
{
    return this.size;
} 
```

operator+ 函数仍然需要编写，但我想在继续之前确保我所掌握的内容是有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:34:29.293

您希望其他程序员（包括您）如何使用您的代码（即您正在编写的类）？

**编写一个示例程序来演示您的类的使用。**

示例程序用作基本测试集。您可以按照以下方式开始。

```
int main() {
    MyArray arr1( 5 );
    MyArray arr2( arr1 );
} 
```

您是否考虑过用户代码如何将（字符串？）元素放入`MyArray`类中？

当前版本的代码还有其他几个问题。一开始没问题，但学习测试自己的代码对你来说很重要；您需要学习对自己的代码（不一定是完美的代码）有基本信心的技能，因为您不能总是要求其他人测试您的代码。

建议：既然你提到你是新人，我建议你先为`int`'s 构建一个数组包装类。这是因为，管理`string`s 比管理 s 有一些额外的挑战`int`:-)。一旦你这样做了，你就可以轻松地为`string`s 做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:06:34.623

*   `size`和之间存在命名冲突`size()`
*   `=`使用, not复制 C++ 字符串`strcpy`（用于`char*`）
*   缺少`MyArray::`定义`operator=`
*   `toCopy`应该`toAssign`在`operator=`
*   后面缺少分号`sList = NULL`
*   `return *this;`结尾不见了`operator=`
*   在定义中`size()`，`this.size`应该是`size`，`this->size`或`(*this).size`

所有这些错误都将由编译器发现（您可能需要启用警告以报告丢失的返回；`g++`使用该`-Wall`标志）。这只是了解编译器的错误消息并知道如何解决问题的问题。

# python - 删除 django 站点应用程序

> ID：16158308
> 
> 赞同：0
> 
> 时间：2013-04-22T23:17:39.957
> 
> 标签：python, django, django-1.5

我想知道我是否可以在不破坏任何东西的`Sites`情况下放弃默认应用程序（将其注释掉`INSTALLED_APPS`等等）？

在文档中写到 django 的其他一些部分使用它（重定向框架、评论、平面页面、syndic、auth、快捷方式和现场视图），但没有明确说明它是否会破坏它们。是吗？

姜戈 1.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:28:36.727

如果您确定项目或应用程序中的某些其他文件没有任何依赖项，则可以安全地删除它们。先一个一个注释掉，每次在浏览器中检查项目是否运行正常。还要检查日志中的警告和错误。

# android - 使用自定义数组适配器过滤 ListView (Android)

> ID：16158310
> 
> 赞同：0
> 
> 时间：2013-04-22T23:17:59.300
> 
> 标签：android, listview

我在我的 ListView 上实现了一个过滤器，它建立在一个自定义数组适配器上。该列表显示名人姓名和该名人的照片。

```
public class Celebrities extends ListActivity {

private EditText filterText = null;
ArrayAdapter<CelebrityEntry> adapter = null;
private TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        adapter.getFilter().filter(s);
    }
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_celebrity);

     //disables the up button
     getActionBar().setDisplayHomeAsUpEnabled(true);

     filterText = (EditText) findViewById(R.id.search_box);
     filterText.addTextChangedListener(filterTextWatcher);

     adapter = new CelebrityEntryAdapter(this, getModel());
     setListAdapter(adapter); 
} 
```

我已经覆盖了`toString()`CelebrityEntry.java 中的方法：

```
public final class CelebrityEntry {

private String name;
private int pic;

public CelebrityEntry(String name, int pic) {
    this.name = name;
    this.pic = pic;
}

/**
 * @return name of celebrity
 */
public String getName() {
    return name;
}
/**
 * override the toString function so filter will work
 */
public String toString() {
    return name;
}
/**
 * @return picture of celebrity
 */
public int getPic() {
    return pic;
} 
```

}

但是，当我启动应用程序并开始过滤时，每个列表条目都有正确的图片，但名称只是原始列表，截断为实际满足过滤器的名人数量。假设 Kirsten Dunst 是列表中的第一个条目，Adam Savage 是第二个。如果我过滤 Adam Savage，我会得到他的照片，但名称仍然是 Kirsten Dunst，尽管这两条信息是单个对象的元素。

显然，这不是我们想要的结果。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:52:45.993

我不确定您是如何使用适配器的，所以我将向您展示我如何使用延迟加载过滤 ListView（这将回收行视图，而不是在您滚动时膨胀新视图）。创建一个 SlowAdapter 内部类：

```
private class SlowAdapter extends BaseAdapter {
    private LayoutInflater mInflater;

    public SlowAdapter(Context context) {
        mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }
    public int getCount() {
        if (filtered) {
            return filteredItems.length;
        } else {
            return unfilteredItems.length;
        }
    }
    public Object getItem(int position) {
        return position;
    }
    public long getItemId(int position) {
        return position;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        LinearLayout rowView;

        if (convertView == null) {
            rowView = (LinearLayout)mInflater.inflate(R.layout.row, parent, false);
        } else {
            rowView = (LinearLayout)convertView;
        }
        ImageView celebrity_image = rowView.findViewById(R.id.celebrity_image);
        TextView celebrity_name = rowView.findViewById(R.id.celebrity_name);

        if (!filtered) { // use position to get the filtered item.
            CelebrityEntry c = filteredItems[position];
             // do what you do to set the image and text for a celebrity.

        } else { // use position to get the unfiltered item.
            CelebrityEntry c = unfilteredItems[position];
             // do what you do to set the image and text for a celebrity.                 
        }   
        return rowView;
    }
} 
```

现在在您的 textWatcher 中，根据字符串将名人过滤到数组 filtersItems 中，然后设置 filters=true 并创建一个新的 SlowAdapter 并将其设置为您的 ListView。

unfilteredItems 将在未过滤任何内容时使用，并将用于将来从完整源进行过滤。

# mule - Mule - 找不到流类型的 StreamCloser：类 java.lang.String

> ID：16158311
> 
> 赞同：2
> 
> 时间：2013-04-22T23:18:12.423
> 
> 标签：mule

将 JMS 消息传递到队列后，我看到一条与 Stream Closer 相关的日志语句。在我看来它不正确.. 为什么我会看到这条消息？

```
2013-04-22 19:08:29,385 [DEBUG] org.mule.transport.jms.activemq.ActiveMQJmsConnector  - Returning dispatcher for endpoint: jms://retry.queue = EeJmsMessageDispatcher{this=5c5801d7, endpoint=jms://retry.queue, disposed=false}
2013-04-22 19:08:29,433 [DEBUG] org.mule.util.DefaultStreamCloserService  - Unable to find an StreamCloser for the stream type: class java.lang.String, the stream: <?xml version="1.0" encoding="UTF-8"?> < ....... rest of the XML   ....... />  will not be closed. 
```

它是什么意思 - “流：不会关闭。”？

我应该怎么做才能解决这个问题？

====编辑 =====

发生错误。JMS 消息将 XML 作为有效负载。骡子版本：3.3.2

这是我的流程

```
<flow name="sendToHost">
    <jms:inbound-endpoint queue="host.queue" exchange-pattern="one-way" />
    <copy-properties propertyName="*" />     
    <file:outbound-endpoint path="/hostmessages" outputPattern="outgoing-xml-[function:dateStamp].log" />
    <set-variable variableName="hostXML" value="#[payload]" />
    <flow-ref name="webServiceCall" />
    <flow-ref name="inspectWSResponse" />
    <exception-strategy ref="retryExceptionStrategy" />
</flow>

<flow name="resendFailedMessages">
    <description>   
        "*/15 07-18 * * ?" run every 15 minutes from 7 am to 6 pm every day -->
    </description>
    <quartz:inbound-endpoint jobName="hostRedeliveryJob" cronExpression="0 0/1 * * * ?">
        <quartz:endpoint-polling-job>
            <quartz:job-endpoint ref="redeliverToHost" />
        </quartz:endpoint-polling-job>
    </quartz:inbound-endpoint>
    <set-variable variableName="hostXML" value="#[payload]" />
    <logger message="QUARTZ found message for host" level="INFO" />
    <flow-ref name="webServiceCall" />
    <flow-ref name="inspectWSResponse" />
    <exception-strategy ref="retryExceptionStrategy" />
</flow>

<choice-exception-strategy name="retryExceptionStrategy">
    <catch-exception-strategy when="#[exception.causedBy(java.io.IOException)]">
        <logger message="In retryExceptionStrategy IO exception strategy. " level="ERROR" />
        <logger message="retryExceptionStrategy exception is #[exception.causeException]" level="ERROR" />
        <set-property propertyName="exception" value="#[exception.summaryMessage]" />
        <set-payload value="#[hostXML]" />
        <logger message="retryExceptionStrategy payload is #[payload]" level="ERROR" />
        <jms:outbound-endpoint queue="retry.queue" />
    </catch-exception-strategy>
    <catch-exception-strategy>
        <logger message="Other error in sending result to host in retryExceptionStrategy flow." level="INFO" />
        <set-property propertyName="exception" value="#[exception.summaryMessage]" />
        <set-payload value="#[hostXML]" />
        <jms:outbound-endpoint queue="declined.queue" />
    </catch-exception-strategy>
</choice-exception-strategy> 

<sub-flow name="webServiceCall">
    <cxf:proxy-client payload="body" enableMuleSoapHeaders="false">
        <cxf:inInterceptors>
            <spring:bean class="org.apache.cxf.interceptor.LoggingInInterceptor" />
        </cxf:inInterceptors>
        <cxf:outInterceptors>
            <spring:bean class="org.apache.cxf.interceptor.LoggingOutInterceptor" />
        </cxf:outInterceptors>
    </cxf:proxy-client>

    <outbound-endpoint address="${host.ws.url}" mimeType="text/xml" connector-ref="http.connector" />
    <byte-array-to-string-transformer />
</sub-flow>

 <sub-flow name="inspectWSResponse">
    <choice>
        <when expression="#[xpath('//acord:TestResult/acord:TestCode/acord:Name/@tc').value == '1']">
            <logger message="Message Delivered Successfully to host" level="INFO" />
        </when>
        <otherwise>
            <set-payload value="#[hostXML]" />
            <jms:outbound-endpoint queue="declined.queue" />
        </otherwise>
    </choice>
</sub-flow> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T23:36:57.780

`DEBUG`通常可以安全地忽略级别的日志条目。

在这种特殊情况下，Mule 似乎`StreamCloserService`在消息的有效负载上使用不是流而是字符串。

查看源代码，这似乎只有在处理异常并且 Mule 尝试强制关闭流式有效负载而不首先检查它是否实际上是流式传输时才可能发生。这是良性的，不会触发任何副作用，因此您可以放心地忽略此`DEBUG`声明。

# java - Java-有没有办法通过模态对话框获取 MouseEvents 或使非模态对话框等到输入？

> ID：16158312
> 
> 赞同：1
> 
> 时间：2013-04-22T23:18:18.857
> 
> 标签：java, swing, dialog, mouseevent, modal-dialog

我正在开发一个旨在跟踪赛跑的程序。该程序设置为在任何时候右键单击（尽管这可能会更改）将指示跑步者已经通过了终点线。这很重要，这样您就可以在任何时候做事并仍然将跑步者标记为通过。要完成比赛并编译结果，有一个按钮。为了防止误点击过早停止计时器，我有一个对话框在计时器仍在运行时进行确认。此对话框也可以右键单击以将跑步者标记为通过。我有一个方法可以从对话框中获取输入作为布尔值。

```
public static boolean showDialog(Frame parent, boolean modal,String text,RacePanel r)
    {
        ConfirmBox c=new ConfirmBox(parent,modal,text);//this makes the dialog
        for(Component comp:c.getComponents())//this adds a listener for right-click events, to record passing runners
            r.addListener(comp);
        c.setVisible(true);
        return c.yes;//yes is the boolean that should be returned
    } 
```

我最初有对话框模式，因此该`setVisible`方法将等待对话框关闭。但是，这使程序忽略了屏幕其余部分上的鼠标点击。当我将其设置为非模态时，此 showDialog 方法立即返回，始终为 false。我实际上并不关心对话框是否是模态的。

有没有办法通过模态对话框获取 MouseEvents 或使非模态对话框等到输入？

预先感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:21:03.243

您将需要使用侦听器来侦听对话框类状态的变化。例如，WindowListener 可以监听对话框的窗口关闭。如果要侦听对话框类中的其他状态更改，请考虑使用 PropertyChangeListener 创建“绑定”属性或字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:59:24.233

几个解决方案：

*   使用热键做出反应 - 会更快。所以F11表示停止比赛，用F12确认。并且 F9 表示跑步者已经通过了终点线有类似的 JNI 包[http://code.google.com/p/jintellitype/](http://code.google.com/p/jintellitype/)

*   让用户单击按钮并键入一个键或世界，例如“结束”，示例参见[http://code.google.com/p/baby-smash/source/browse/src/quick/KeyBoardListen.java](http://code.google.com/p/baby-smash/source/browse/src/quick/KeyBoardListen.java)不喜欢一个对话框，因为它们需要时间来渲染并且可以增加到计时器。

*   如果您必须使用对话框，请实现您自己的。在该类中获取主类（或控制器实现的接口）的实例，然后在窗口被操作时调用控制器上的方法（是或否按下或窗口关闭 - 默认）。在窗口关闭时不要关闭窗口而只是隐藏它。这意味着您下次可以更快地展示它。您还可以在启动时加载此类以使其在后台准备好

*   **如果您只想要鼠标事件**可以尝试扩展 JFrame 然后覆盖（java.awt.Component 的 javadoc）：protected void processMouseEvent(MouseEvent e)

通过将鼠标事件分派到任何已注册的 MouseListener 对象来处理此组件上发生的鼠标事件。

除非为此组件启用鼠标事件，否则不会调用此方法。发生以下情况之一时启用鼠标事件：

```
A MouseListener object is registered via addMouseListener.
Mouse events are enabled via enableEvents. 
```

# .htaccess - .htaccess 从特定文件重定向到已定义的重写器

> ID：16158313
> 
> 赞同：2
> 
> 时间：2013-04-22T23:18:25.330
> 
> 标签：.htaccess, mod-rewrite, redirect

我一直在检查，但似乎找不到确切的语法来实现我正在尝试的内容。

我目前正在更新一个网站，但由于它在 Google 中的位置非常好，我想保留所有链接，但这次我想使用漂亮的 url。所以，我遇到的问题如下：

我有这个 bases-generales (general-rules) 部分，我用它来重写：

```
RewriteRule     ^bases-generales/   bases.php?locale=es_LA 
```

我遇到的问题是当前（旧）文件名为 bases.php，因此我希望用户在直接从 Google 或其他链接打开 bases.php 时被重定向到 /bases-generales/。

我现在使用的规则是：

```
RewriteRule     /bases.php    http://mysite/bases-generales/ [R=301,L] 
```

现在，这个命令会重定向，但唯一的问题是 url 看起来像这样：

```
http://mysite/bases-generales/?locale=es_LA 
```

另一个问题是它会导致重定向循环。

有关更多信息，这是完整的 htaccess（mysite 当然是假的）

```
<Files ~ "^\.(htaccess|htpasswd)$">
deny from all
</Files>
order deny,allow

RewriteEngine on

RewriteCond %{HTTP_HOST} ^(mysite)(:80)? [NC]
RewriteRule ^(.*) http://mysite/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://mysite/$1/ [L,R=301]  

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteBase     /

RewriteRule     ^/          index.php?locale=es_LA
RewriteRule     ^bases-generales/   bases.php?locale=es_LA
RewriteRule     ^condiciones/       condiciones.php?locale=es_LA
RewriteRule     ^programa/      programa.php?locale=es_LA
RewriteRule     ^premios/       premios.php?locale=es_LA
RewriteRule     ^ganadores/     ganadores.php?locale=es_LA
RewriteRule     ^patrocinadores/    patrocinadores.php?locale=es_LA
RewriteRule     ^galeria/       galeria.php?locale=es_LA
RewriteRule     ^contacto/      contacto.php?locale=es_LA

RewriteRule     ^bases.php      http://mysite/bases-generales/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:27:37.183

关于您的第一个请求，您必须附加`?`到新的 url 以防止 Rewrite_mod 添加查询字符串，因此该指令将是

```
RewriteRule     ^bases.php    http://mysite/bases-generales/? [R=301,L] 
```

2）您应该添加`L`到您的重写规则以停止处理 url：

```
RewriteRule     ^bases-generales/   bases.php?locale=es_LA [L] 
```

htaccess 将是：

```
<Files ~ "^\.(htaccess|htpasswd)$">
deny from all
</Files>
order deny,allow

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://mysite/$1/ [L,R=301]  

RewriteBase     /

RewriteRule     ^bases.php    http://mysite/bases-generales/? [R=301,L]
RewriteRule     ^sample2.php    http://mysite/sample2/? [R=301,L]

RewriteRule     ^bases-generales/   bases.php?locale=es_LA [L]
RewriteRule     ^sample2/    sample2.php?locale=xx [L] 
```

# html - 当浏览器变小时，如何将右列浮动到左列的中间

> ID：16158316
> 
> 赞同：0
> 
> 时间：2013-04-22T23:18:36.320
> 
> 标签：html, css

当浏览器变小时，如何将右列浮动到左列的中间？

我想在第一个和第二个块之间浮动它。

CSS：

```
#leftcol{
    float:left;
    background:#039;
    width:300px

}
#rightcol{
    float:left;
    background:#3C0;
    width: 70%
}

#first{
    background:#F00;
    width:100%
}
#second{
    background:#666;
    width:100%
} 
```

HTML：

```
<div>
  <div id=leftcol>leftcol
    <div id=first>first block</div>
    <div id=second>second block</div>
  </div>
  <div id=rightcol>rightcol</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:40:34.037

更改 HTML：

```
<div id=first>first block</div>
<div id=rightcol>rightcol</div>
<div id=second>second block</div> 
```

使用这个 CSS：

```
#rightcol{
  float:left;
  background:#3C0;
  width: 70%;
}
#first{
  float:left;
  background:#F00;
  width: 300px;
  clear: both;
}
#second{
  float:left;
  background:#666;
  width:300px;
  clear: both;
} 
```

[jsFiddle](http://jsfiddle.net/ypjqM/)

# c++ - 从 C++ 类调用函数

> ID：16158320
> 
> 赞同：-2
> 
> 时间：2013-04-22T23:18:56.970
> 
> 标签：c++, class, function

头文件是这样的：

```
#include "Lib110ct.h"
class Circle
{
protected:
    double mx, my, mdx, mdy, mradius;
public:
    Circle(){}
    Circle(double x,double y,double dx,double dy,double rad):mx(x),my(y),mdx(dx),mdy(dy),mradius(rad){}
    void setPos(double x, double y){mx=x;my=y;}
    void setDir(double dx, double dy){mdx=dx; mdy=dy;}
    void setRadius(double rad){mradius=rad;}
    double getX(){return mx;}
    double getY(){return my;}

    void draw(Turtle * t);
    void clear(Win110ct& win);
    void move();
    bool collides(Circle & c);
};

#include "shape.h"

int main(int argc, char** argv)

    {
        Win110ct win;
        Turtle * t = win.getTurtle();
            Circle Circle;
            Circle.setPos(100, 300);
            Circle.setRadius(12);
            getX();
            getY();
            Circle.draw(t);

         return 0;
    } 
```

它给我的错误信息是：

> C:\Users\Oluwaseun\Documents\110ct\challenge2\programming\programming\main.cpp|13|未定义引用 `Circle::draw(Turtle*)'|

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:37:21.430

你需要**定义**

```
void draw(Turtle * t); 
```

请看一下：[http ://www.cprogramming.com/declare_vs_define.html](http://www.cprogramming.com/declare_vs_define.html)

基本上，您在为其编写代码时定义一个函数：

```
void draw(Turtle* t) {  
    // code here
} 
```

# d3.js - 圆半径在 d3 中的过渡时不更新

> ID：16158321
> 
> 赞同：4
> 
> 时间：2013-04-22T23:19:04.370
> 
> 标签：d3.js, transition

我在 d3 中的转换遇到问题。这个jsfiddle说明了这个问题：http: [//jsfiddle.net/3bzsE/](http://jsfiddle.net/3bzsE/)

当页面加载时，dataset01 用于为数组中的每个人创建一个圆圈。d.name 用作键。

图表下方的蓝色矩形是在点击时更新数据的按钮。

这是更新功能：

```
function updateVis(data) {
    var points = svg.selectAll('.nameinfo')
        .data(data, function(d) { return d.name;});

    var pointsEnter = points
        .enter()
        .append('g')
        .attr('class', 'nameinfo');

    pointsEnter
        .append('circle')
        .attr('cx', function(d) { return 10 + d.position * 100; })
        .attr('cy', width/2)
        .attr('r', 0)
        .style('fill', function(d) { return z(d.position); })
        .style('fill-opacity', 0.5)
        .style('stroke', '#232323')
        .append("title")
        .text(function(d) { return d.name; });

    pointsEnter
        .append('text')
        .attr('x', function(d) { return 10 + d.position * 100; })
        .attr('y', width/2)
        .attr("dy", "0.35em")
        .style("text-anchor", "middle")
        .style("font-size", "11px")
        .text(function(d, i) { return d.name; });

    pointsUpdate = points
        .selectAll('circle')
        .transition().duration(500)
        .attr('r', function(d){ return d.value/2;});

    var pointsExit = points.exit().transition().duration(500).remove();

    pointsExit
        .selectAll('circle')
        .attr('r', 0);
} 
```

进入和退出的行为符合预期，但对于进入和退出数据集中存在的名称，圆半径没有改变。

使用 Jim 的值的示例：在按钮 1 处于活动状态时单击按钮 3：

*   乔、珍妮特和朱莉退出
*   简和约翰进入
*   但是，Jim 的半径没有改变（它应该缩小，因为 d.value 从 130 变为 50）

在三个活动的情况下单击两个会导致 Jim 退出。单击两个中的三个会导致 Jim 以 dataset03 中的正确半径输入。

使用其他名称可以看到相同的行为。在所有情况下进入和退出工作，但如果两个数据集有一个同名元素，则半径不会在转换时更新

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T04:04:03.847

您可能必须专门为过渡选择圆圈，而不是尝试在外部组元素上进行。所以代替这个：

```
pointsUpdate = points
    .selectAll('circle')
    .transition().duration(500)
    .attr('r', function(d){ return d.value/2;}); 
```

做这个：

```
 svg.selectAll('.nameinfo circle')
    .data(data, function(d) { return d.name;})
    .transition().duration(500)
    .attr('r', function(d){ return d.value/2;}); 
```

**更新：**下面是另一种更适合重用现有数据/选择的整体 D3 理念的方法：

```
points
    .select('circle').transition().duration(500)
    .attr('r', function(d){ return d.value/2;}); 
```

# ios - iOS：仅在将代码添加到主屏幕后才运行代码

> ID：16158326
> 
> 赞同：0
> 
> 时间：2013-04-22T23:19:37.940
> 
> 标签：ios, icons

我想知道是否只有在将代码安装到 iOS 的主屏幕后才能运行一些代码。这仅供内部使用，所以我不需要它在其他平台上工作。只是iOS。

基本上，我想向执行特定操作的 iOS 设备添加一些**自定义图标。**一个人会打开一个 PDF，这就是我很难处理的那个。

所以，这里的流程...

用户在他们的基于 iOS 的设备上访问 URL，这里没有什么可看的，但随后他们将 URL 添加到他们的主屏幕。一旦他们点击主屏幕图标，页面就会打开并重定向到在线的 PDF。pdf 可以在线直播，因为他们总是有 wifi。

有什么建议么？

# python - Django Urls 正则表达式以支持旧的 php 页面

> ID：16158327
> 
> 赞同：0
> 
> 时间：2013-04-22T23:19:52.483
> 
> 标签：python, regex, django, python-2.7, django-urls

我正在将系统从 PHP 迁移到 Python/Django。

从旧网站上，我应该将访问量最大的网址保留一段时间，但我正在尝试，但我没有找到办法。

旧格式是：

```
detalhes.php?tipo=residuo&residuo_id=320 
```

我已经尝试了以下所有这些网址，但我不断收到 404：

```
url(r'^detalhes(?P<antigo>[\w]+)$','core.views.anuncio_antigo',name='anuncio-antigo'),
url(r'^detalhes(?P<antigo>[\w_-]+)$','core.views.anuncio_antigo',name='anuncio-antigo'),
url(r'^detalhes\.php\?tipo\=residuo\&residuo_id\=(?P<antigo>[\w_-]+)$','core.views.anuncio_antigo',name='anuncio-antigo'),
url(r'^(?P<antigo>[\w_-]+)$','core.views.anuncio_antigo',name='anuncio-antigo'), 
```

我总是收到这个：

```
[22/Apr/2013 20:08:58] "GET /detalhes.php?tipo=residuo&residuo_id=58 HTTP/1.1" 404 7099 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:37:56.653

在相同情况下对我有用的解决方案是将 Web 服务器配置为在不同引擎上路由请求。我们使用 nginx 的配置是这样的：

```
location ~ ^/(django\/adm|someurl|)/.*$ {
    uwsgi_pass unix:/var/www/path/to/uwsgi.sock;
    include uwsgi_params;
    }

location ~ ^/(_.*\.php)$ {
    fastcgi_pass   php_fastcgi;
    fastcgi_param SCRIPT_FILENAME /var/www/path/to/index/php/$1;
    fastcgi_param DOCUMENT_ROOT /var/www/path/to/index/php/$1;
    include fastcgi_params;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:17:16.893

做我想做的事情的正确方法是不要使用 URL 调度程序处理查询字符串。而不是，我这样做了：

```
url(r'^detalhes\.php/$', 'core.views.anuncio_antigo',name='anuncio-antigo'), 
```

现在任何这些 php 文件都会调用我的`anuncio_antigo`视图。然后在视图中我使用 处理查询字符串`request.GET`，如下所示：

```
tipo = request.GET.get('tipo')
residuo_id = request.GET.get('residuo_id') 
```

我认为网址中不可能有问号。

# ember.js - Ember Data：如何为记录设置 isDirty？

> ID：16158329
> 
> 赞同：7
> 
> 时间：2013-04-22T23:20:08.930
> 
> 标签：ember.js, ember-data

我有一个`details: DS.attr('recursive_object')`自定义转换（它是一个递归对象）。

`details`可以就地编辑 attr，而无需更改实际的对象引用（例如，编辑细节 attr 上的子细节）。但是，这不会触发父记录的`isDirty`标志。

**如何手动通知 DS.Model 记录已更新？**

型号定义：

```
App.MyRecord = DS.Model.extend
  details: DS.attr "recursive object" 
```

编辑 `details`

```
# record is an instance of App.MyRecord
# makes a change to the record's details attr 
record.makeChangeToDetails()
record.get('isDirty') # still false because Ember doesn't know that a sub-detail changed. 
```

**我尝试过的事情：**

`record.makeChangeToDetails()`用`will/didSetProperty`调用包装：

```
record.send 'willSetProperty', name: 'details'
record.makeChangeToDetails()
record.send 'didSetProperty', name: 'details' 
```

打电话`notifyPropertyChange`

```
record.notifyPropertyChange 'details' 
```

调用`set`并传递相同的对象

```
record.makeChangeToDetails()
record.set 'details', record.get('details') 
```

我还尝试从这里发送各种其他 DS.model 状态事件：[https](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/states.js) ://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/states.js 包括`didChangeData`，`becameDirty` 但是这些都不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-08T17:36:32.703

我从另一个问题中得到了一些线索：[How to manual set an object state to clean (saved) using ember-data](https://stackoverflow.com/questions/13342250/how-to-manually-set-an-object-state-to-clean-saved-using-ember-data?rq=1)

特别是关于：

`record.get('stateManager').transitionTo('loaded.saved')`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-03T18:06:56.213

使用`1.0.0-beta.7+canary.b45e23ba`，这似乎可以完成这项工作：

```
> record.isDirty()
< false
> record.send('becomeDirty')
< undefined
> record.isDirty()
< true 
```

# mysql - 从子查询返回多列并插入新表

> ID：16158330
> 
> 赞同：-1
> 
> 时间：2013-04-22T23:20:11.890
> 
> 标签：mysql, insert, subquery

我有一个使用子查询插入表的查询，问题是在子查询中有 2 列，并且带有 where 条件和 group by 子句。

子查询运行良好，任何人都可以帮助我吗？

查询：Account_name 是文本类型

```
insert into trial_bal (Account_name,Debit) values (

select convert(text,convert(varchar(max),Accounts)),SUM(ISNULL( Debit,0))-SUM( ISNULL(Credit,0)) 

from general

where Acount_Type='Assets'
group by convert(varchar(max),Accounts)
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:22:26.117

而不是使用，`INSERT INTO ..VALUES`您应该使用`INSERT INTO .. SELECT..FROM`从 select 语句中返回值：

```
insert into trial_bal (Account_name,Debit)
select convert(text,convert(varchar(max),Accounts)),
  SUM(ISNULL( Debit,0))-SUM( ISNULL(Credit,0))
from general
where Acount_Type='Assets' 
group by convert(varchar(max),Accounts) 
```

# html - Internet Explorer 8 忽略结束跨度标记并继续应用样式

> ID：16158335
> 
> 赞同：1
> 
> 时间：2013-04-22T23:21:01.933
> 
> 标签：html, css, internet-explorer-8

我有一些调整字体大小的类：

```
.text-tall {
    font-size: 1.5em;
}

.text-small {
    font-size: .8em;
} 
```

当我将类应用于段落元素时

```
<p class="text-tall">Some text goes here.</p> 
```

样式按预期工作。当我将它应用于跨度元素时

```
<p><span class="text-tall">Some text goes here.</span></p> 
```

调整后的`font-size`的内容会应用于页面元素下方的所有文本，有时会导致文本逐渐变大。

显而易见的解决方案是简单地始终将类应用于段落元素，但我的段落底部边距相对大小（`margin-bottom: 1.5em`），所以这样做也会增加边距，这是我不想做的事情。

这似乎只是 IE8 及更低版本中的问题。任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:58:42.900

谢谢大家的提示。原来我的`functions.php`文件（在 WordPress 中）中的一个函数正在删除结束`</span>`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:05:51.023

尝试`text-tall`在 CSS 中使用 span 指定 div。例如，您可以这样做：

```
.text-tall span {
font-size: 1.5em;
} 
```

您也可以对`text-small`.

# asp.net - 需要gridview行onrowdeleting的值

> ID：16158338
> 
> 赞同：0
> 
> 时间：2013-04-22T23:21:11.900
> 
> 标签：asp.net, gridview

我无法获得价值。我得到的是一个空白值或videoName =“”。如何获取 videoName 的值？在 rowdeleting 事件中，我使用 Rows(e.Index).Cells(2).Text 来获取值，但它是空白的。是否有另一种方法来获取字段“videoname”？

```
Protected Sub GridView1_RowDeleting(sender As Object, e As GridViewDeleteEventArgs)

    Dim videoName As String = gridview1.Rows(e.RowIndex).Cells(2).Text
    Dim val As String = videoName
    If File.Exists(HttpContext.Current.Server.MapPath(HttpContext.Current.Request.ApplicationPath) + "\contents\published" + videoName) Then
        File.Delete(HttpContext.Current.Server.MapPath(HttpContext.Current.Request.ApplicationPath) + "\contents\published" + videoName)
    End If
End Sub

<asp:GridView id="GridView1" runat="server" Width="680px" GridLines="None" DataSourceID="SqlDataSource2" DataKeyNames="id" CellSpacing="1" CellPadding="3" BorderWidth="2px" BorderStyle="Ridge" BorderColor="White" AutoGenerateColumns="False"
               AllowPaging="True" AllowSorting="True" EmptyDataText="No Record Found" OnRowDeleting="GridView1_RowDeleting" OnPageIndexChanging="GridView1_PageIndexChanging" PageSize="9" >
                <Columns>
                    <asp:BoundField HeaderText="Id" DataField="Id" ReadOnly="true" visible="false" />
                    <asp:BoundField HeaderText="CustomerID" DataField="CustomerID" ReadOnly="true" visible="false"/>
<asp:BoundField HeaderText="VideoName" DataField="VideoName" ReadOnly="true" visible="false"/>
                    <asp:TemplateField>
                        <HeaderStyle Width="5%" />
                        <ItemStyle Width="5%" />  
                        <ItemTemplate>
                            <asp:LinkButton ID="LinkButton1" Runat="server" OnClientClick="return confirm('Are you sure you want to delete this video?');"
                                CommandName="Delete">Delete</asp:LinkButton>
                        </ItemTemplate>
                    </asp:TemplateField>              
                    <asp:TemplateField HeaderText="Clip" SortExpression="ThumbName">  
                        <HeaderStyle Width="5%" />
                        <ItemStyle Width="5%" />                          
                        <ItemTemplate>                                    
                            <div style="margin:2px; width:133px; background-color:rgb(68,68,68); -moz-box-shadow: 5px 5px 5px rgba(68,68,68,0.6); -webkit-box-shadow:5px 5px 5px rgba(68,68,68,0.6);box-shadow:5px 5px 5px rgba(68,68,68,0.6); zoom: 1;">
                                <asp:hyperlink id="link" NavigateUrl='<%# Eval("VideoName", "~/Test/playVideos2.aspx?FileName={0}&Thumb=" + Eval("ThumbName") + "&Duration=" + Eval("Duration"))%>' runat="server">
                                    <asp:image id="img" ImageUrl='<%# String.Format("~/contents/thumbs/{0}",Eval("ThumbName"))%>' width="130" height="80" runat="server" />
                                </asp:hyperlink>  
                                <asp:Label ID="lblMovieName" Text='<%#Bind("VideoName") %>' runat="server"></asp:Label>                                          
                            </div>                                                     
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Date">
                        <HeaderStyle Width="15%" />
                        <ItemStyle Width="15%" />  
                        <ItemTemplate>
                           <asp:Label ID="date" runat="server" Text='<%# Bind("DateCreated") %>'></asp:Label><br />
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField>
                        <HeaderStyle Width="75%" />
                        <ItemStyle Width="75%" />  
                        <ItemTemplate>

                        </ItemTemplate>
                    </asp:TemplateField>

                </Columns>
                <RowStyle BackColor="#DEDFDE" ForeColor="Black" />
                <SelectedRowStyle BackColor="#9471DE" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#C6C3C6" ForeColor="Black" HorizontalAlign="Right" />
                <HeaderStyle BackColor="#4A3C8C" Font-Bold="True" ForeColor="#E7E7FF" />
            </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:04:07.423

当您将来从 gridview 添加或删除列时，这很容易出错，您的代码将再次失败。我建议您在模板字段中为您的 MovieName 字段使用标签并`FindControl`用于查找您的标签。象素

```
<asp:TemplateField HeaderText="Movie Name" >
            <ItemTemplate>
                <asp:Label ID="lblMovieName" Text='<%#Bind("MovieName") %>' runat="server"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField> 
```

背后的代码

```
 protected void gvCustomer_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        Label lblMovieName = gvCustomer.Rows[e.RowIndex].FindControl("yourLableControlName") as Label;
        // Perform your delete
    } 
```

**更新** 后我发现在您的代码中您将 movieName`Visible`属性设置为`false`. 这将阻止它在页面上呈现。您可以将值存储在`DataKeys`或删除 visible=false 以获取所需的值。

# python - 在 python 中为轨道绘制一个球体

> ID：16158339
> 
> 赞同：1
> 
> 时间：2013-04-22T23:21:17.183
> 
> 标签：python, 3d, scipy, ipython

如何`1737`在 的位置放置一个半径球体`(384400,0,0)`？

这个球体将是我轨迹中的月亮。

代码中的其他一切都很好，我只是不知道如何在该位置添加一个具有该半径的球体。

```
import numpy as np
from scipy.integrate import odeint
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

me = 5.974 * 10 ** (24)  #  mass of the earth                                     
mm = 7.348 * 10 ** (22)  #  mass of the moon                                      
G = 6.67259 * 10 ** (-20)  #  gravitational parameter                             
re = 6378.0  #  radius of the earth in km                                         
rm = 1737.0  #  radius of the moon in km                                          
r12 = 384400.0  #  distance between the CoM of the earth and moon                 
M = me + mm

pi1 = me / M
pi2 = mm / M
mue = 398600.0  #  gravitational parameter of earth km^3/sec^2                    
mum = G * mm  #  grav param of the moon                                           
mu = mue + mum
omega = np.sqrt(mu / r12 ** 3)
nu = -129.21 * np.pi / 180  #  true anomaly angle in radian                       

x = 327156.0 - 4671
#  x location where the moon's SOI effects the spacecraft with the offset of the  
#  Earth not being at (0,0) in the Earth-Moon system                              
y = 33050.0   #  y location                                                       

vbo = 10.85  #  velocity at burnout                                               

gamma = 0 * np.pi / 180  #  angle in radians of the flight path                   

vx = vbo * (np.sin(gamma) * np.cos(nu) - np.cos(gamma) * np.sin(nu))
#  velocity of the bo in the x direction                                          
vy = vbo * (np.sin(gamma) * np.sin(nu) + np.cos(gamma) * np.cos(nu))
#  velocity of the bo in the y direction                                          

xrel = (re + 300.0) * np.cos(nu) - pi2 * r12
#  spacecraft x location relative to the earth         
yrel = (re + 300.0) * np.sin(nu)

#  r0 = [xrel, yrel, 0]                                                           
#  v0 = [vx, vy, 0]                                                               
u0 = [xrel, yrel, 0, vx, vy, 0]

def deriv(u, dt):
    n1 = -((mue * (u[0] + pi2 * r12) / np.sqrt((u[0] + pi2 * r12) ** 2
                                               + u[1] ** 2) ** 3)
        - (mum * (u[0] - pi1 * r12) / np.sqrt((u[0] - pi1 * r12) ** 2
                                              + u[1] ** 2) ** 3))
    n2 = -((mue * u[1] / np.sqrt((u[0] + pi2 * r12) ** 2 + u[1] ** 2) ** 3)
        - (mum * u[1] / np.sqrt((u[0] - pi1 * r12) ** 2 + u[1] ** 2) ** 3))
    return [u[3],  #  dotu[0] = u[3]                                              
            u[4],  #  dotu[1] = u[4]                                              
            u[5],  #  dotu[2] = u[5]                                              
            2 * omega * u[5] + omega ** 2 * u[0] + n1,  #  dotu[3] = that         
            omega ** 2 * u[1] - 2 * omega * u[4] + n2,  #  dotu[4] = that         
            0]  #  dotu[5] = 0                                                    

dt = np.arange(0.0, 320000.0, 1)  #  200000 secs to run the simulation            
u = odeint(deriv, u0, dt)
x, y, z, x2, y2, z2 = u.T

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot(x, y, z)
plt.show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:38:40.790

您可以在以下代码之前添加以下代码来绘制球体`plt.show()`：

```
phi = np.linspace(0, 2 * np.pi, 100)
theta = np.linspace(0, np.pi, 100)
xm = rm * np.outer(np.cos(phi), np.sin(theta)) + r12
ym = rm * np.outer(np.sin(phi), np.sin(theta))
zm = rm * np.outer(np.ones(np.size(phi)), np.cos(theta))
ax.plot_surface(xm, ym, zm) 
```

但是，您的月亮看起来会被拉长，因为所有轴的比例都不相同。为了更改轴的比例，您可以添加类似

```
ax.auto_scale_xyz([-50000, 400000], [0, 160000], [-130000, 130000]) 
```

之前`plt.show()`。结果仍然不完全正确，但我让你自己去玩以获得更好的结果——我只是选择了一些让它看起来更好的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:36:15.947

球体的所有代码都在这里：

[http://matplotlib.org/examples/mplot3d/surface3d_demo2.html](http://matplotlib.org/examples/mplot3d/surface3d_demo2.html)

从那里你只需要向你想要的任何方向移动，并将 10 更改为你想要的任何半径。

# php - 排除部分消息被发送到 txt 文件

> ID：16158342
> 
> 赞同：-1
> 
> 时间：2013-04-22T23:21:42.967
> 
> 标签：php

我有一个脚本，我编写了几乎所有电子邮件形式的数据并将其发送到 txt 文件。我的问题是如何排除某些消息被发送到文本文件？我不想将此行发送到文本文件：

```
$message .= "A quote will be forwarded to 
Joe Greeninger before order is placed.\n"; 
```

请帮忙！如何？

```
<?php
//$silver_name_badges = !empty($_POST['silver_name_badges']) ? ($_POST['silver_name_badges'])) : false;
$SilverNameBadges = $_POST['Silver_Name_Badges'];
$CoffeeMug = $_POST['Coffee_Mug'];
$Plastic_Literature_Bag = $_POST['Plastic_Literature_Bag'];
$Amada_Bag = $_POST['Amada_bag'];
$Candy = $_POST['Candy'];
$Moist_Towlette = $_POST['Moist_Towlette'];
$Notepad_and_Pen = $_POST['Notepad_and_Pen'];
$Tuck_Box = $_POST['Tuck_Box'];
$Amada_Tie = $_POST['Amada_Tie'];
$Cap = $_POST['Cap'];
$name = $_POST['Attention_To'];
$Red_Lanyard = $_POST['Red_Lanyard'];
$White_Lanyard = $_POST['White_Lanyard'];
$Green_Lanyard = $_POST['Green_Lanyard'];
$Black_Lanyard = $_POST['Black_Lanyard'];
$Glass_LC2415_NT = $_POST['Glass_LC2415_NT'];
$Glass_FOM2NTRI = $_POST['Glass_FOM2NTRI'];
$Glass_ASTRO_165WNT = $_POST['Glass_ASTRO_165WNT'];
$Glass_FOL_AJ3015 = $_POST['Glass_FOL_AJ3015'];
$Glass_ACIES_NT = $_POST['Glass_ACIES_NT'];
$Notes = $_POST['Notes'];
$Ship_Preference = $_POST['Ship_Preference'];

// Please specify your Mail Server - Example: mail.yourdomain.com.
ini_set("SMTP","mail.amada-america.com");

// Please specify an SMTP Number 25 and 8889 are valid SMTP Ports.
ini_set("smtp_port","25");

// Please specify the return address to use
ini_set('sendmail_from', 'jgreeninger@amada.com');

// Set parameters of the email
$to = "ravila@amada.com";
$subject = "Amada Promo Items Ordered";
$from = " jgreeninger@amada.com";
$headers = "CC: ravila@amada.com";

$message = "";
$message .= date("m-d-Y\n");
$message .= "Order has been placed.  
Items:\n";
foreach ($_POST as $fieldName => $fieldValue){
    if (!empty($fieldValue))
        $message .= "   $fieldName: $fieldValue\n";
}
$message .= "A quote will be forwarded to 
Joe Greeninger before order is placed.\n";
$message = str_replace("_"," ",$message);

// Mail function that sends the email.
mail($to,$subject,$message,$footer,$headers);

$fp = fopen("latc.txt", "a");
fwrite($fp, $message."\r\n");
fclose($fp); 
  header('Location: index.html');

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:26:00.420

更改事物的顺序，以便在将该行添加到消息之前编写文件：

```
foreach ($_POST as $fieldName => $fieldValue){
    if (!empty($fieldValue))
        $message .= "   $fieldName: $fieldValue\n";
}
$message = str_replace("_"," ",$message);

$fp = fopen("latc.txt", "a");
fwrite($fp, $message."\r\n");
fclose($fp); 

$message .= "A quote will be forwarded to 
Joe Greeninger before order is placed.\n";

// Mail function that sends the email.
mail($to,$subject,$message,$footer,$headers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:25:53.063

尝试这个：

```
<?php
//$silver_name_badges = !empty($_POST['silver_name_badges']) ? ($_POST['silver_name_badges'])) : false;
$SilverNameBadges = $_POST['Silver_Name_Badges'];
$CoffeeMug = $_POST['Coffee_Mug'];
$Plastic_Literature_Bag = $_POST['Plastic_Literature_Bag'];
$Amada_Bag = $_POST['Amada_bag'];
$Candy = $_POST['Candy'];
$Moist_Towlette = $_POST['Moist_Towlette'];
$Notepad_and_Pen = $_POST['Notepad_and_Pen'];
$Tuck_Box = $_POST['Tuck_Box'];
$Amada_Tie = $_POST['Amada_Tie'];
$Cap = $_POST['Cap'];
$name = $_POST['Attention_To'];
$Red_Lanyard = $_POST['Red_Lanyard'];
$White_Lanyard = $_POST['White_Lanyard'];
$Green_Lanyard = $_POST['Green_Lanyard'];
$Black_Lanyard = $_POST['Black_Lanyard'];
$Glass_LC2415_NT = $_POST['Glass_LC2415_NT'];
$Glass_FOM2NTRI = $_POST['Glass_FOM2NTRI'];
$Glass_ASTRO_165WNT = $_POST['Glass_ASTRO_165WNT'];
$Glass_FOL_AJ3015 = $_POST['Glass_FOL_AJ3015'];
$Glass_ACIES_NT = $_POST['Glass_ACIES_NT'];
$Notes = $_POST['Notes'];
$Ship_Preference = $_POST['Ship_Preference'];

// Please specify your Mail Server - Example: mail.yourdomain.com.
ini_set("SMTP","mail.amada-america.com");

// Please specify an SMTP Number 25 and 8889 are valid SMTP Ports.
ini_set("smtp_port","25");

// Please specify the return address to use
ini_set('sendmail_from', 'jgreeninger@amada.com');

// Set parameters of the email
$to = "ravila@amada.com";
$subject = "Amada Promo Items Ordered";
$from = " jgreeninger@amada.com";
$headers = "CC: ravila@amada.com";

$message = "";
$message .= date("m-d-Y\n");
$message .= "Order has been placed.  
Items:\n";
foreach ($_POST as $fieldName => $fieldValue){
    if (!empty($fieldValue))
        $message .= "   $fieldName: $fieldValue\n";
}

$message = str_replace("_"," ",$message);

// Mail function that sends the email.
$mailMsg = $message . " A quote will be forwarded to Joe Greeninger before order is placed.\n";
mail($to,$subject,$mailMsg,$footer,$headers);

$fp = fopen("latc.txt", "a");
fwrite($fp, $message."\r\n");
fclose($fp); 
  header('Location: index.html');
?> 
```

# c# - asp.net：如何手动（c＃）从会话中选择gridview内radiobuttonlist中的radiobutton

> ID：16158344
> 
> 赞同：0
> 
> 时间：2013-04-22T23:22:20.683
> 
> 标签：c#, asp.net, gridview, radiobuttonlist

我在 asp.net / c# 中回发后遇到问题。gridview 中的所有单选按钮列表都在回发时被清除（每行一个单选按钮列表）。所以我将它们保存到 Session 变量中。

但我不能将它们从 Session 变量中设置回来。这是page_load中的代码：

```
//.. testing for null,etc
for (int i = 0; i < lstRadioButtons.Count; i++)
{
    RadioButtonList rbl = (RadioButtonList)gwTract.Rows[i].FindControl("RadioButtonList1");
    rbl.SelectedItem.Value = lstRadioButtons[i]; //list with strings "0", etc
    Debug.WriteLine("yep...");
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:33:10.760

假设`lstRadioButtons`包含给定行的值：

```
for (int itemIndex = 0; itemIndex < rbl.Items.Count; itemIndex++)
    if (rbl.Items[i].Value == lstRadioButtons[i])
        rbl.SelectedIndex = itemIndex; 
```

假设`lstRadioButtons`包含给定行的索引：

```
rbl.SelectedIndex = int.Parse(i); //You may want to use TryParse to handle failure 
```

# javascript - 将图像对象传递给函数

> ID：16158352
> 
> 赞同：0
> 
> 时间：2013-04-22T23:22:54.800
> 
> 标签：javascript, jquery, particles

我在玩粒子发射器（所有信用：[scurker.com](http://scurker.com/blog/2010/06/particle-generator-using-html5s-canvas/)）

在这里小提琴：http: [//jsfiddle.net/4REVD/](http://jsfiddle.net/4REVD/)

我试图创建我自己的可以与框架一起使用的图像对象。我应该能够做到这一点：

```
particles.update(myObject); 
```

到目前为止，我尝试的是：

```
 var myImage = new Image();
  myImage.src = "images/_cloud.gif";

  particles.update(myImage); 
```

然而，这似乎并没有做任何事情——除了破坏当前的默认火焰动画

有什么建议么？

# python - Python 使用确切位置计算文件中的行数

> ID：16158353
> 
> 赞同：1
> 
> 时间：2013-04-22T23:22:57.327
> 
> 标签：python, list, for-loop, count

我知道这很简单，但我不太了解如何使我的 for 循环工作。

我的第一个文件是两列数据的长列表：

```
ROW    VALUE
0      165   
1      115
2      32
3      14
4      9
5      0
6      89
7      26
.       .
406369  129
406370  103 
```

我的第二个文件是重要行号的列表：

```
1
43
192
so on 
```

我要做的就是转到文件 1 中感兴趣的行号，然后逐行向下走，直到值列达到零。然后输出将只是一个重要行号的列表，然后是行数，直到第一个文件达到零。例如，文件#2 中重要行号“1”的输出应该是 3，因为有三行，然后文件 #1 中的值达到 0。我很感激任何帮助！我有一些我已经开始的脚本，如果有帮助可以在编辑中发布。谢谢你！

编辑：

我已经开始了一些脚本：

```
for line in important_rows_file:
    line = line.strip().split()
    positive_starts.append(int(line[2])

countsfile = []
for line in file:
    line = line.strip().split()
    countsfile.append([line[0]] + [line[1]])

count = 0
i = 0
for i in range(0, len(countsfile)):
    for start in positive_starts:
    if int(countsfile[start + i][1]) > 0:
            count = count + 1
    else:
            count = count 
```

....不知道接下来会发生什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:40:33.887

这里有两种方法。

第一种方法在内存中为所有行号构建一个字典。这将是一个很好的方法，如果 a. 您将一遍又一遍地重复使用相同的数据（您可以将其存储并重新读取）或 b。您将处理第二个文件中的很多行（即，大多数行都需要这样做）。第二种方法只是对给定的行号进行一次性处理。

鉴于此作为输入文件：

```
ROW    VALUE
0      165
1      115
2      32
3      14
4      9
5      0
6      89
7      26
8      13
9      0 
```

方法一。

```
ref_dict = {}
with open("so_cnt_file.txt") as infile:
    next(infile)
    cur_start_row = 0
    cur_rows = []
    for line in infile:
        row, col = [int(val) for val in line.strip().split(" ") if val]
        if col == 0:
            for cur_row in cur_rows:
                ref_dict[cur_row] = row - cur_row - 1
            cur_start_row = row
            cur_rows = []
            continue
        cur_rows.append(row)
print ref_dict 
```

**输出**

```
{0: 4, 1: 3, 2: 2, 3: 1, 4: 0, 6: 2, 7: 1, 8: 0} 
```

方法二

```
def get_count_for_row(row=1):
    with open("so_cnt_file.txt") as infile:
        for i in range(0, row + 2):
            next(infile)
        cnt = 0
        for line in infile:
            row, col = [int(val) for val in line.strip().split(" ") if val]
            if col == 0:
                return cnt
            cnt += 1
print get_count_for_row(1)
print get_count_for_row(6) 
```

**输出**

```
3
2 
```

这是一个解决方案，它在一次调用中获取所有感兴趣的行。

```
def get_count_for_rows(*rows):
    rows = sorted(rows)
    counts = []
    with open("so_cnt_file.txt") as infile:
        cur_row = 0
        for i in range(cur_row, 2):
             next(infile)
        while rows:
            inrow = rows.pop(0)
            for i in range(cur_row, inrow):
                next(infile)
            cnt = 0
            for line in infile:
                row, col = [int(val) for val in line.strip().split(" ") if val]
                if col == 0:
                    counts.append((inrow, cnt))
                    break
                cnt += 1
            cur_row = row
    return counts

print get_count_for_rows(1, 6) 
```

**输出**

```
[(1, 3), (6, 2)] 
```

# ruby-on-rails - Ruby on Rails RSpec 路由失败

> ID：16158354
> 
> 赞同：1
> 
> 时间：2013-04-22T23:23:01.440
> 
> 标签：ruby-on-rails, ruby, rspec, routes

Rails 新手在这里。

尝试 RSpec 测试索引路由的 200 状态代码。

在我的**index_controller_spec.rb**：

```
require 'spec_helper'

describe IndexController do

    it "should return a 200 status code" do
    get root_path
    response.status.should be(200)
  end

end 
```

**路线.rb：**

```
Tat::Application.routes.draw do

    root to: "index#page"

end 
```

**索引控制器：**

```
class IndexController < ApplicationController

    def page
    end

end 
```

当我在浏览器上访问时一切都很好，但是 RSpec 命令行给出了**一个错误**：

```
IndexController should return a 200 status code
     Failure/Error: get '/'
     ActionController::RoutingError:
       No route matches {:controller=>"index", :action=>"/"}
     # ./spec/controllers/index_controller_spec.rb:6:in `block (2 levels) in <top (required)> 
```

'

我不明白？！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T23:55:20.690

欢迎来到 Rails 世界！测试有许多不同的风格。您似乎将控制器测试与路由测试混淆了。

您看到此错误是因为`root_path`正在返回`/`. RSpec`get :action`控制器内的测试旨在调用该控制器上的该方法。

如果你注意到你的错误信息，它会说`:action => '/'`

要测试您的控制器，请将您的测试更改为：

```
require 'spec_helper'

describe IndexController do
  it "should return a 200 status code" do
    get :page
    response.status.should be(200)
  end
end 
```

如果您对路由测试感兴趣，请参阅[https://www.relishapp.com/rspec/rspec-rails/docs/routing-specs](https://www.relishapp.com/rspec/rspec-rails/docs/routing-specs) 示例如下：

```
{ :get => "/" }.
  should route_to(
    :controller => "index",
    :action => "page"
  ) 
```

# eclipse - JUnit 测试失败并出现 java.lang.ClassNotFoundException: com.mysql.jdbc.Driver 在 Tycho 环境

> ID：16158355
> 
> 赞同：0
> 
> 时间：2013-04-22T23:23:01.580
> 
> 标签：eclipse, jdbc, junit, classnotfoundexception, tycho

我有一个非常奇怪的情况。我有一组 eclipse 插件项目，我使用 tycho 和 maven 来构建它们。我在其中一个项目中使用了 JDBC 驱动程序，并且我有一个测试插件来测试这个项目。由于 com.mysql.jdbc 插件在 eclipse p2 存储库中不可用（而且我们没有自己的 p2），我导入了 jdbc 插件并创建了一个 OSGi 插件并将依赖项添加到我的本地插件中。

我有多个 Eclipse 工作区。只有在创建测试和 jdbc 插件的第一个工作区中，当我使用 eclipse run as -> Junit test 命令运行 junit 测试时，它们才有效。当其他人甚至我检出源代码并尝试在不同的工作区中运行测试时，会抛出此异常：

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver 
```

我也尝试使用 tycho 集成测试（运行 mvn 集成测试），但这也不起作用，我仍然得到相同的异常。我尝试了很多搜索，但找不到答案。

更新：我认为这不是第谷问题。我只是尝试创建基于 com.jdbc.mysql jar 的 eclipse 插件。我在上面创建的工作区工作正常。但是，一旦我提交代码并将项目导入另一个工作区，测试就会停止工作。两个工作区之间的所有设置都是相同的，一个正在工作，另一个得到 ClassNotFound 异常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:39:57.723

`ClassNotFoundException`OSGi 运行时中的 s 表示 OSGi 清单中的导入和/或导出声明中有问题。最常见的情况是一个包声称要导出某个包，但实际上并没有该包的二进制文件/类文件。

在 Tycho 构建中，如果您`.`在.`bin.includes``build.properties`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:48:34.363

Tycho 基于测试包的传递依赖计算 OSGi 运行时。您可能对 mysql 驱动程序包没有设计时依赖（而仅依赖于它实现的 JDBC 接口）

尝试在 mysql jdbc 驱动程序包上添加测试运行时依赖项。有关如何执行此操作，请参阅[http://wiki.eclipse.org/Tycho/FAQ#How_to_add_a_undeclared_dependency.3F__.28e.g..2C_OSGi_declarative_service.29 。](http://wiki.eclipse.org/Tycho/FAQ#How_to_add_a_undeclared_dependency.3F__.28e.g..2C_OSGi_declarative_service.29)

# php - 使用 PHP 的单选按钮中的必填字段验证

> ID：16158356
> 
> 赞同：0
> 
> 时间：2013-04-22T23:23:26.533
> 
> 标签：php, validation, radio

我正在尝试将必填字段验证添加到有 5 个同名单选按钮的页面。如果用户单击按钮进入下一页，则应显示错误，以下是我当前正在使用的代码，但它没有做任何事情

```
<?php
if (empty($_POST) === false) {
$required_fields = array('q1');
foreach($_POST as $key=>$value) {
if (empty($value) && in_array($key, $required_fields) === true) {
    $errors[] = 'Please select a number between 1-5';
    break 1;
    }
}
if (empty($errors) === true) {
    if(!isset($_POST['q1'])){ 
    $errors[] = "Please select a number between 1-5"; 
} 

}
}
?>      

<h1>Assessment</h1>

<?php
if (isset($_GET['success']) && empty($_GET['success'])) {

} else {
if (empty($_POST) === false && empty($errors) === true) {
$updateassessment = array(
    'q1'                => $_POST['q1'],
);

updateassessment($updateassessment);
header ('Location: question2.php');
exit();

} else if(empty($errors) === false){
echo output_errors($errors);
}
?>

<form action="" method="post">

<p class="p1">
Question 1</p>
<p class="p4">
<?php
$result = mysql_query("SELECT * FROM traits WHERE Question = 'q1'");

while($row = mysql_fetch_array($result))
  {
  echo $row['fromtrait'] . ' - ' . $row['totrait'];
  echo "<br />";
  }

?></p>

<p class="p3">
<input type="radio" name="q1" value="1" />
1
<input type="radio" name="q1" value="2" />
2
<input type="radio" name="q1" value="3" />
3
<input type="radio" name="q1" value="4" />
4
<input type="radio" name="q1" value="5" />
5

</p><br><br>
  <input type="image" src="Images/image1.png" name="submit" align="right"/>
</form> 
```

我通过添加使这个工作

```
if (empty($errors) === true) {
    if(!isset($_POST['q1'])){ 
    $errors[] = "Please select a number between 1-5"; 
} 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:02:54.747

您必须将 action="" 设置为 action=" `<filename>`" （在您的表单中），否则 PHP 在用户提交表单后将不知道“去”到哪里。文件名是指 php 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T00:16:42.873

就其本质而言，PHP 是一种验证表单的低效方式，因为必须重新加载页面才能完成任何 PHP 检查。也许可以实现客户端解决方案，但如果不尝试这个，看看它是否符合您的要求......

```
$required_fields = array('q1');
foreach ($required_fields as $field) {
    if (isset($_POST[$field]) && !empty($_POST[$field])) {
         echo $field." was set<br>\n";
    } else {
        echo "validation for $field failed!<br>\n";
    }
} 
```

另外... Javascript 是一种选择吗？jquery ValidationEngine 非常有用，可以检查您的许多字段要求，并在提交表单之前进行验证，以减轻 PHP 进行检查的需要。

# php - 在 PHP 中创建矢量图像以允许放大

> ID：16158360
> 
> 赞同：0
> 
> 时间：2013-04-22T23:23:41.590
> 
> 标签：php, image, vector, imagick, cairo

这个问题有点长，所以我会尽量清楚。

在我共同开发的一个网站上，我创建了一个绘图应用程序，它将有关在`<canvas>`元素上绘制的线条的数据发送到服务器以创建图像并将其保存为多种尺寸，这很有效。有保存为 320x212 的标准保存，较小的版本保存为 240x176。但是，我网站上的一些用户使用相当陈旧的设备/浏览器来运行该应用程序。它还具有较小的视口，因此图像更小，因此服务器端我目前正在乘以坐标以在将图像保存为标准尺寸时进行补偿。但这具有显示图像的随机未填充部分的副作用，这些部分已填充在画布上。

[![示例图片](https://i.stack.imgur.com/6W3Ns.png)](https://i.stack.imgur.com/6W3Ns.png)
[（来源：[socialcu.be](http://socialcu.be/Images/qn/fd3127b2a03dc5fddcb4c47bb40fc1d87dd2/e5567e491d0dabb1d494e326c671b10b4eaf09d8bf9d545a4d.png)）]

（在较小设备视口的画布上，整个底部都是绿色的，而我乘以坐标来补偿的方法导致许多未填充的部分出现在放大的图像上）

所以我的第一个问题是，将图像制作为矢量图像，将其放大（同时仍然是矢量），然后将其保存为光栅图像可以解决该问题吗？

其次（如果第一个答案是肯定的），那么在 PHP 中执行此操作的最佳方法是什么？我听说过 Cairo，但是关于它的信息（即 PHP 包的教程）相当缺乏。最理想的是，有没有办法在 Imagick 中做到这一点，或者有关于如何使用 Cairo 的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:31:35.767

[Cairo](http://cairographics.org/)肯定缺乏 PHP 站点上的文档，因此学习起来会更加困难。我通过 Google 找到了一些关于[Cairo](http://cairographics.org/)的链接。这里有一篇关于某人使用它的经验的博客文章：[开罗入门](http://cambiatablog.wordpress.com/2010/11/06/getting-started-with-cairo-graphics-and-php/)

在那篇文章中引用了[Michael Maclean 的一些演练](http://mgdm.net/talks/)。

在 imagick 网站上有很多[使用 imagick 绘图的示例](http://www.imagemagick.org/Usage/draw/)，并且从在线可用示例研究的外观来看，imagick 有一个更好的支持社区（目前）。imagick 会输出一个光栅图像。

# c# - 如何创建模拟 HttpWebRequest 和 HttpWebResponse 对象

> ID：16158362
> 
> 赞同：12
> 
> 时间：2013-04-22T23:24:06.867
> 
> 标签：c#, unit-testing

如何创建模拟 HttpWebRequest 和 HttpWebResponse 对象我正在尝试对以下代码进行单元测试

```
HttpWebrequest request;   

if (null != request)
{                         
    var response = (HttpWebResponse)request.GetResponse();
    using (var sr = new StreamReader(response.GetResponseStream()))
    {
        jsonResult = sr.ReadToEnd();
    }

    var myRecords = SerializationHelper.Deserialize<Records>(jsonResult);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:58:38.007

您不能为 HttpWebResponse 创建模拟，而不是模拟 HttpWebResponse 是将调用包装在接口后面，然后模拟该接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-29T12:33:32.343

这是一个老问题，但也许它对某人有用。改编自[msdn 中的这个问题](http://social.msdn.microsoft.com/Forums/en-US/d41b577f-fc07-4249-a77b-a6c3f167b7e0/need-to-create-a-httpwebresponse-object?forum=ncl)：

```
private static WebResponse CreateWebResponse(HttpStatusCode httpStatus, MemoryStream responseObject)
{
  TcpListener l = new TcpListener(IPAddress.Loopback, 0);
  l.Start();
  int port = ((IPEndPoint)l.LocalEndpoint).Port;
  l.Stop();

  // Create a listener.
  string prefix = "http://localhost:" + port + "/";
  HttpListener listener = new HttpListener();
  listener.Prefixes.Add(prefix);
  listener.Start();
  try
  {
    listener.BeginGetContext((ar) =>
    {
      HttpListenerContext context = listener.EndGetContext(ar);
      HttpListenerRequest request = context.Request;

      // Obtain a response object.
      HttpListenerResponse response = context.Response;

      response.StatusCode = (int)httpStatus;

      // Construct a response.
      if (responseObject != null)
      {
        byte[] buffer = responseObject.ToArray();

        // Get a response stream and write the response to it.
        Stream output = response.OutputStream;
        output.Write(buffer, 0, buffer.Length);
      }

      response.Close();
    }, null);

    WebClient client = new WebClient();
    try
    {
      WebRequest request = WebRequest.Create(prefix);
      request.Timeout = 30000;
      return request.GetResponse();
    }
    catch (WebException e)
    {
      return e.Response;
    }
  }
  finally
  {
    listener.Stop();
  }

  return null;
} 
```

在这里，您可以在 responseObject 中编写任何您想要的内容或将其保留为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-12T05:59:11.667

您可以使用反射来重写您需要调整的响应字段以创建模拟响应。以下是使用状态码 429 创建响应的示例：

```
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
statusCode = (int)response.StatusCode;
ActivateCallback(responseCallback, response, url, string.Empty);

var fieldStatusCode = response.GetType().GetField("m_StatusCode", 
                                                   BindingFlags.Public | 
                                                   BindingFlags.NonPublic | 
                                                   BindingFlags.Instance);
var statusCodeNew = (HttpStatusCode)409;
fieldStatusCode.SetValue(response, statusCodeNew);
string responceBody = "{\"error\":{\"code\":\"AF429\",\"message\":\"Too many requests. Method=GetContents, PublisherId=00000000-0000-0000-0000-000000000000\"}}";

var propStream = response.GetType().GetField("m_ConnectStream", 
                                              BindingFlags.Public | 
                                              BindingFlags.NonPublic | 
                                              BindingFlags.Instance);

System.IO.MemoryStream ms = new System.IO.MemoryStream(
                           System.Text.Encoding.UTF8.GetBytes(responceBody));
propStream.SetValue(response, ms);
ms.Position = 0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-11T17:08:50.740

在我一直从事的一个项目中，我需要在一个仅在生产中引发错误的 ASMX Web 服务中进行一些覆盖，以找出该服务实际上正在流回什么 XML。为此，我必须创建一个新的 HttpWebResponse 对象。基本技巧是使用**Activator.CreateInstance**（它绕过了构造函数已被弃用的事实）。在下面的示例中，我利用了这样一个事实，即我只是克隆现有的 HttpWebResponse 对象并重置流，但是完全从头开始创建一个的技术是相同的。

```
 string sLastXML;

    public string LastXML
    {
        get
        {
            return sLastXML;
        }
    }

    protected override System.Net.WebResponse GetWebResponse(System.Net.WebRequest request)
    {
        // Get the XML Returned
        System.Net.HttpWebResponse oResponse = (System.Net.HttpWebResponse)request.GetResponse();
        System.IO.Stream oStream = oResponse.GetResponseStream();
        byte[] inStream = new byte[oResponse.ContentLength];
        int iActual = 0;
        while (iActual < oResponse.ContentLength)
        {
            iActual += oStream.Read(inStream, iActual, (int)oResponse.ContentLength - iActual);
        }
        sLastXML = System.Text.Encoding.Default.GetString(inStream);

        // Create new stream
        System.IO.MemoryStream oNewStream = new System.IO.MemoryStream();
        oNewStream.Write(inStream, 0, (int)oResponse.ContentLength);
        oNewStream.Position = 0;

        // Create new response object
        System.Net.HttpWebResponse oNewResponse = (System.Net.HttpWebResponse)System.Activator.CreateInstance(typeof(System.Net.HttpWebResponse));
        System.Reflection.PropertyInfo oInfo = oNewResponse.GetType().GetProperty("ResponseStream", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.FlattenHierarchy);
        oInfo.SetValue(oNewResponse,oNewStream);
        System.Reflection.FieldInfo oFInfo = oNewResponse.GetType().GetField("m_HttpResponseHeaders", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.FlattenHierarchy);
        oFInfo.SetValue(oNewResponse, oFInfo.GetValue(oResponse));
        oFInfo = oNewResponse.GetType().GetField("m_ContentLength", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.FlattenHierarchy);
        oFInfo.SetValue(oNewResponse, oFInfo.GetValue(oResponse));
        oFInfo = oNewResponse.GetType().GetField("m_Verb", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.FlattenHierarchy);
        oFInfo.SetValue(oNewResponse, oFInfo.GetValue(oResponse));
        oFInfo = oNewResponse.GetType().GetField("m_StatusCode", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.FlattenHierarchy);
        oFInfo.SetValue(oNewResponse, oFInfo.GetValue(oResponse));
        oFInfo = oNewResponse.GetType().GetField("m_StatusDescription", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.FlattenHierarchy);
        oFInfo.SetValue(oNewResponse, oFInfo.GetValue(oResponse));
        oFInfo = oNewResponse.GetType().GetField("m_IsMutuallyAuthenticated", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.FlattenHierarchy);
        oFInfo.SetValue(oNewResponse, oFInfo.GetValue(oResponse));
        oFInfo = oNewResponse.GetType().GetField("m_IsVersionHttp11", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.FlattenHierarchy);
        oFInfo.SetValue(oNewResponse, oFInfo.GetValue(oResponse));
        oFInfo = oNewResponse.GetType().GetField("m_MediaType", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.FlattenHierarchy);
        oFInfo.SetValue(oNewResponse, oFInfo.GetValue(oResponse));
        oFInfo = oNewResponse.GetType().GetField("m_Uri", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.FlattenHierarchy);
        oFInfo.SetValue(oNewResponse, oFInfo.GetValue(oResponse));
        oFInfo = oNewResponse.GetType().GetField("m_UsesProxySemantics", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.FlattenHierarchy);
        oFInfo.SetValue(oNewResponse, oFInfo.GetValue(oResponse));

        oNewResponse.Cookies = oResponse.Cookies;

        return oNewResponse;

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-31T09:10:51.093

模拟 HttpResponse 可能如下所示：

```
public SenHttpMockResponse(HttpListenerContext context)
{
   HttpListenerResponse response = context.Response;
   response.Headers.Add("Content-type", @"application/json");
   JObject message = JObject.Parse(@"{'SomeParameterName':'ParameterValue'}");
   StreamWriter writer = new StreamWriter(response.OutputStream);
   writer.Write(message);
   writer.Close();
} 
```

在这种情况下，默认响应代码为 200，但您也可以使用`Response.StatusCode = 400;`

要模拟一个请求，您可以使用例如调试器工具。例如，[Firefox 插件](https://addons.mozilla.org/en-US/firefox/addon/httprequester/)HttpRequester 非常酷。您可以提出所有类型的请求，您也会看到您的回复。我会说这是一个方便的东西

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-26T20:38:52.270

我没有亲自使用过它，但是[Moles](http://msdn.microsoft.com/en-us/library/ff798506.aspx)框架应该可以让你做你想做的事情。有关[拦截](https://stackoverflow.com/questions/5961982/using-moles-with-datetime)对`DateTime.Now`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-20T15:48:20.687

您还可以使用 SOAP 格式化程序来构造一个模拟 HttpWebRequest。首先将要模拟的 HttpWebRequest 捕获为字符串，然后您可以在单元测试中对其进行自定义，并通过反序列化字符串来重建 HttpWebRequest。

这是一个例子：

```
 static void Main(string[] args)
    {
        SoapFormatter formatter = new SoapFormatter();

        HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create("http://www.google.com");
        HttpWebResponse resp = (HttpWebResponse)myReq.GetResponse();

        // save this soapRequest as a string and customize it for your mocking up
        MemoryStream target = new MemoryStream();
        using(target)
        {
            formatter.Serialize(target, resp);
        }
        string soapRequest = Encoding.UTF8.GetString(target.GetBuffer());

        // now you can use the string to reconstruct the object from the string without needing anything special (other than substituting your own values into the XML)
        HttpWebResponse myMockedObject = (HttpWebResponse)formatter.Deserialize(
            new MemoryStream(Encoding.UTF8.GetBytes(soapRequest)));
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-08T21:11:52.713

我认为包装和抽象是最正确的方法。但是，这是我的 hacky 解决方案。

只需使用序列化构造函数重载（它也已过时，但会生成可以抑制的警告）并覆盖您需要更改的方法。

```
public class FakeHttpWebRequest : HttpWebRequest
{
    private static readonly SerializationInfo SerializationInfo = GetSerializationInfo();
    private readonly WebResponse response;

    public FakeHttpWebRequest(WebResponse response)
    #pragma warning disable CS0618 // Type or member is obsolete
        : base(
              SerializationInfo,
              new StreamingContext())
    #pragma warning restore CS0618 // Type or member is obsolete

    {
        this.response = response;
    }

    public override WebResponse GetResponse()
    {
        return response;
    }

    public override Stream GetRequestStream()
    {
        return new MemoryStream();
    }

    private static SerializationInfo GetSerializationInfo()
    {
        // dummy data required for HttpWebRequest() constructor
        var serializationInfo = new SerializationInfo(typeof(HttpWebRequest), new FormatterConverter());
        serializationInfo.AddValue("_HttpRequestHeaders", new WebHeaderCollection(), typeof(WebHeaderCollection));
        serializationInfo.AddValue("_Proxy", null, typeof(IWebProxy));
        serializationInfo.AddValue("_KeepAlive", false);
        serializationInfo.AddValue("_Pipelined", false);
        serializationInfo.AddValue("_AllowAutoRedirect", false);
        serializationInfo.AddValue("_AllowWriteStreamBuffering", false);
        serializationInfo.AddValue("_HttpWriteMode", 0);
        serializationInfo.AddValue("_MaximumAllowedRedirections", 0);
        serializationInfo.AddValue("_AutoRedirects", 0);
        serializationInfo.AddValue("_Timeout", 0);
        serializationInfo.AddValue("_ContentLength", (long)0);
        serializationInfo.AddValue("_MediaType", "");
        serializationInfo.AddValue("_OriginVerb", "GET");
        serializationInfo.AddValue("_ConnectionGroupName", "");
        serializationInfo.AddValue("_Version", new Version(1, 0), typeof(Version));
        serializationInfo.AddValue("_OriginUri", new Uri("https://fake.uri"), typeof(Uri));

        return serializationInfo;
    }
}

public class FakeHttpWebResponse : HttpWebResponse
{
    private static readonly SerializationInfo SerializationInfo = GetSerializationInfo();
    private readonly Stream responseStream;

    public FakeHttpWebResponse(HttpStatusCode statusCode, Stream responseStream)
    #pragma warning disable CS0618 // Type or member is obsolete
        : base(
              SerializationInfo,
              new StreamingContext())
    #pragma warning restore CS0618 // Type or member is obsolete
    {
        this.StatusCode = statusCode;
        this.responseStream = responseStream;
    }

    public override HttpStatusCode StatusCode { get; }

    public override Stream GetResponseStream()
    {
        return responseStream;
    }

    private static SerializationInfo GetSerializationInfo()
    {
        // dummy data required for HttpWebResponse() constructor
        var serializationInfo = new SerializationInfo(typeof(HttpWebResponse), new FormatterConverter());
        serializationInfo.AddValue("m_HttpResponseHeaders", new WebHeaderCollection(), typeof(WebHeaderCollection));
        serializationInfo.AddValue("m_Uri", new Uri("https://fake.uri"), typeof(Uri));
        serializationInfo.AddValue("m_Certificate", null, typeof(System.Security.Cryptography.X509Certificates.X509Certificate));
        serializationInfo.AddValue("m_Version", new Version(), typeof(Version));
        serializationInfo.AddValue("m_StatusCode", (int)HttpStatusCode.HttpVersionNotSupported);
        serializationInfo.AddValue("m_ContentLength", (long)0);
        serializationInfo.AddValue("m_Verb", "GET");
        serializationInfo.AddValue("m_StatusDescription", "");
        serializationInfo.AddValue("m_MediaType", "");
        return serializationInfo;
    }
} 
```

最后，在您的生产代码中提供一种方法来将 WebRequest 创建替换为您的测试代码。

```
 /// <summary>
    /// Delegate to create new web request. Can be set to mock actual requests.
    /// </summary>
    public Func<string, WebRequest> CreateWebRequest { get; set; } = url => WebRequest.Create(url); 
```

并从您的生产代码中使用此委托，而不是直接使用 WebRequest.Create()。

在测试中，您可以将此委托设置为您需要的任何内容。

# sql - 从一张表中获取相交数据的最佳方法是什么？

> ID：16158365
> 
> 赞同：3
> 
> 时间：2013-04-22T23:24:27.523
> 
> 标签：sql, sql-server, database, performance

假设我有下表

![在此处输入图像描述](https://i.stack.imgur.com/HnNNh.jpg)

```
CREATE TABLE [dbo].[TestData](
    [ID] [bigint] NOT NULL,
    [InstanceID] [int] NOT NULL,
    [Field] [int] NULL,
    [UserID] [bigint] NOT NULL
) ON [PRIMARY]

GO
INSERT [dbo].[TestData] ([ID], [InstanceID], [Field], [UserID]) 
VALUES (1, 1, NULL, 1000),(2, 1, NULL, 1002),(3, 1, NULL, 1000),
    (4, 1, NULL, 1003),(5, 2, NULL, 1002), (6, 2, NULL, 1005),
    (7, 2, NULL, 1006),(8, 2, NULL, 1007),(9, 3, NULL, 1002),
    (10, 3, NULL, 1006),(11, 3, NULL, 1009),(12, 3, NULL, 1010),
    (13, 1, NULL, 1006),(14, 2, NULL, 1002),(15, 3, NULL, 1003)
GO 
```

我寻找编写查询的最佳实践，以使用**UserID获取两个实例之间的相交数据的完整行**

例如，InstanceID 1 和 2 之间相交的**UserID**是（1002、1006），为了得到结果，我用以下两种不同的方式写了查询：

```
Select * From TestData
Where UserID in 
( 
    Select T1.UserID From TestData T1 Where InstanceID = 1
        Intersect
    Select T2.UserID From TestData T2 Where InstanceID = 2
)
and InstanceID in (1,2) Order By 1 
```

第二

```
Select * From TestData
Where UserID in 
( 
    Select Distinct T1.UserID 
    From TestData T1 join TestData T2 on T1.UserID = T2.UserID
    Where T1.InstanceID = 1 and T2.InstanceID = 2
)
and InstanceID in (1,2) Order By 1 
```

*所以结果将是*

![在此处输入图像描述](https://i.stack.imgur.com/In4Ze.jpg)

**上述查询之一是获得结果的最佳方式吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:51:48.123

您也可以使用聚合和连接来执行此操作：

```
select td.*
from TestData td join
     (select td.userid
      from TestData
      group by td.userId
      having sum(case when InstanceId = 1 then 1 else 0 end) > 0 and
             sum(case when InstanceId = 2 then 1 else 0 end) > 0
    ) td2
    on td.userid = td2.userid 
```

聚合的优点是该`having`子句使其在您可以表示的条件方面非常灵活。如果你有一个索引，性能将是最好的`userId, InstanceId`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:28:32.273

使用`EXISTS`比使用更好`IN`。使用`IN`子查询时，将处理整个结果集。使用`EXISTS`时，它只会在发现它们匹配时进行搜索。至于你的问题，我认为`INTERSECT`实现只是简单地加入，所以不应该有区别。

编辑：[这里](https://stackoverflow.com/questions/2065329/sql-server-in-vs-exists-performance)的一篇文章说对于`IN`vs `EXISTS`，优化器也会对它们一视同仁（截至 2008 年）。所以几乎我的猜测以及我刚刚阅读的内容归结为：**它们将执行相同的操作，因为优化器知道。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T23:44:05.330

如果您要使用 EXISTS 语句，以下是查询示例：

```
SELECT * 
FROM TestData td
WHERE td.InstanceID IN (1, 2)
AND EXISTS
    (SELECT 1
    FROM TestData sub
    WHERE td.UserID = sub.UserID
    AND sub.InstanceID = 2)
AND EXISTS
    (SELECT 1
    FROM TestData sub
    WHERE td.UserID = sub.UserID
    AND sub.InstanceID = 1)
ORDER BY 1; 
```

对于提供的样本数据，三种解决方案中的任何一种都没有明显的性能差异。但是，我同意 Scotch 的观点，即在特定场景下使用 EXISTS 语句将有助于提高 IN 语句的性能。

提高性能的最佳方法是使用 PRIMARY KEY 创建表。将 ID 字段设置为 PRIMARY KEY 将使性能提高 50%，因为查询的最高成本是对数据进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T09:18:08.633

该脚本用于Index seek 的两项操作和Distinct 排序的一项操作。

```
SELECT ID, InstanceID, Field, UserID
FROM [dbo].[TestData] t
WHERE InstanceID IN(1, 2) 
  AND EXISTS (
              SELECT 1
              FROM [dbo].[TestData] t2
              WHERE InstanceID IN(1, 2) AND t.UserID = t2.UserID
              HAVING COUNT(DISTINCT t2.InstanceID) = 2
              )
ORDER BY t.ID 
```

或者

```
;WITH cte AS
 (
  SELECT ID, InstanceID, Field, UserId
         ,COUNT(*) OVER(PARTITION BY InstanceID, UserID) AS cntInstanceUser
  FROM [dbo].[TestData] t
  WHERE InstanceID IN(1, 2)
  )
  SELECT c.ID, c.InstanceID, c.Field, c.UserID
  FROM cte c
  WHERE EXISTS (
                SELECT 1
                FROM cte c2 
                WHERE c2.UserId = c.UserID
                HAVING COUNT(*) != c.cntInstanceUser
                )
  ORDER BY c.ID 
```

为了提高性能，请使用此索引：

```
CREATE INDEX x ON [dbo].[TestData](InstanceID, UserID) INCLUDE(Id, Field) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/31434/1)上的演示[](http://sqlfiddle.com/#!3/31434/1)

# cordova - PhoneGap跨平台怎么做

> ID：16158368
> 
> 赞同：2
> 
> 时间：2013-04-22T23:24:43.547
> 
> 标签：cordova, mobile, cross-platform

我知道我会问一个愚蠢的问题。不过，我需要你的帮助。

我正在计划和设计我的第一个移动应用程序，我听说了很多关于电话差距的事情，所以我决定试一试。

所以，我开始在谷歌上搜索它并查看教程，我得到的所有信息都是针对：Phonegap for Android Phonegap for iPhone

所以，我不明白为什么会这样，如果两者的代码应该相同。或者几乎相似，也许每个操作系统都有一些特定的句子。

我得到了 iphone 我必须使用 x-code 和 android eclipse。

但是我怎样才能制作我的应用程序，然后为 Android 和 iPhone 生成构建？（或者这就是我想象的）我的意思是，同时为两者（以及其他 SO）开发应用程序。

那可能吗？

除此之外，你有最喜欢的教程想和我分享吗？

最后一个问题，我是否可以制作具有出色 UI 设计和可用性的应用程序，或者 phonegap 对此是否有点限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:10:36.037

对于教程，只需在此处使用 Phonegap：http: [//docs.phonegap.com/en/2.5.0/guide_getting-started_index.md.html#Getting%20Started%20Guides](http://docs.phonegap.com/en/2.5.0/guide_getting-started_index.md.html#Getting%20Started%20Guides)

只需使用与您瞄准的平台相关的教程。

关于 Phonegap 并为每个操作系统开发一个应用程序：当您使用其中一个教程创建“Phonegap 项目”时，您将创建一个文件结构，允许您在所选平台上部署您的应用程序。但在此架构内部，有一个“资产”文件夹，其中包含您的 HTML5/CSS3/Javascript 代码。此代码可以简单地复制/粘贴到其他平台项目以供重用。

事实上，您为每个操作系统创建了一个项目，但您复制了您的核心代码。

关于你的最后一个问题：设计没有Phonegap限制，因为你只是像制作网站一样使用HTML5/CSS3/Javascript......但就像网站一样，平台之间会有一些CSS差异，你必须像修复它一样你做一个网站。

希望这可以帮助 ！再见 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T12:39:34.827

有一种方法可以为不同平台共享资产文件夹...（我不喜欢在存储库中复制代码，也不在本地复制代码）

在本地计算机上，您可以使用指向此文件夹的符号链接（我猜在 windows 中这只是目录的快捷方式）

在存储库中，您可以选择对资产文件夹使用不同的存储库条目并将其包含在不同的平台中

对于 git：使用 git 子模块： http: [//git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

对于 svn：使用 svn externals：在您的 svn 目录中创建一个目录，提交后，使用 svn 属性并创建一个条目 svn:externals：[如何开始使用 svn:externals？](https://stackoverflow.com/questions/663155/how-to-get-started-with-svnexternals)

# javascript - 是否有管理 javascript 同步和异步调用的模式

> ID：16158373
> 
> 赞同：1
> 
> 时间：2013-04-22T23:25:18.093
> 
> 标签：javascript, ajax, asynchronous

我有一个 javascript 应用程序将所有数据保存在服务器上，然后使用 REST API 通信服务器和客户端。

它们工作正常，直到我们开始有越来越多的嵌套异步调用或隐藏异步调用的嵌套同步调用。例如：

```
function asyncFoo(callback) {
  callback();
}

function syncCallHidingAsyncCall(){
  syncStuff();
  asyncFoo(function(){
    syncFoo()
  });
}

function nestedAsyncCall(callback){
  asyncFoo(function(){
    anotherAsyncCall(callback);
  })
}
// this make refactor code become so hard.
// if we want add step2() after nestedAsyncCall();
// instead of add one line of code
// we need first add callback param in every asyncCall, then pass step2 as a callback 
```

还有一些不必要的异步调用：

```
// we actually only verify this once.
function isLogin(callback){
  if (!App._user) {
    ServerApi.getCurUser(function(data){
      App._user = data.user;
      callback(App._user)
    });
  }
  callback(App._user)
}

function syncCallNeedVerfifyLogin(callback){
  // user only need login once, so in most case this is really only a sync call.
  // but now I have to involve a unnecessary callback to get the return value
  isLogin(function(){
    callback(syncStuff())
  })
} 
```

所以随着项目越来越大，我们就开始忘记了他们的关系，哪个需要等待，哪个会变魔术。越来越多的功能变得异步只是因为一些非常小的东西需要在服务器上进行验证。

所以我开始觉得他们一定是这个项目中的一些设计问题。我正在寻找最佳实践或设计模式，或者在这种繁重的通信应用程序中需要遵循一些规则。

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T23:37:18.393

它们以多种模式存在，用于管理异步数据交换和例程执行。它们也有不同的名称：

*   承诺
*   事件发射器
*   延迟对象/延迟
*   控制流库
*   期货
*   回调聚合器
*   观察者/发布者-订阅者

一个常见的实现是[jQuery 的延迟对象](http://api.jquery.com/category/deferred-object/)，它也用于管理它的 AJAX 方法。在 NodeJS 中，还有[AsyncJS](https://github.com/caolan/async)和原生[EventEmitter](http://nodejs.org/api/events.html)。甚至还有[一个 20 行库](http://notes.jetienne.com/2011/03/22/microeventjs.html)，由某个实现 EventEmitter 的人制作，您可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:36:29.283

正如Bergi 在评论中所说，您正在寻找的模式称为延迟/承诺。jQuery 内置了一个[实现。](http://api.jquery.com/promise/)从文档：

> 通过调用 jQuery.Deferred() 方法创建的可链接实用程序对象。它可以将多个回调注册到回调队列中，调用回调队列，并中继任何同步或异步函数的成功或失败状态。

还有各种其他实现，其中一些在此[stackoverflow](http://api.jquery.com/category/deferred-object/)问题中进行了概述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T23:46:06.717

让自己成为一个队列系统，例如：

```
function Queue() {
    this.queue = [];
}
Queue.prototype.i = -1;
Queue.prototype.add = function(fn) {
    if (typeof fn !== "function")
        throw new TypeError("Invalid argument");

    this.queue.push(fn);
}
Queue.prototype.next = function() {
    this.i++;
    if (this.i < this.queue.length) {
        this.queue[this.i].appy(this, arguments);
    }
}
Queue.prototype.start = function() {
    if (this.i !== -1)
        throw new Error("Already running")
    this.next.apply(this, arguments);
} 
```

并像这样使用它：

```
var q = new Queue();

q.add(function() {
    // do something async
    // In the callback, call `this.next()`, passing
    //    any relevant arguments
})
q.add(function() {
    // do something async
    // In the callback, call `this.next()`, passing
    //    any relevant arguments
})
q.add(function() {
    // do something async
    // In the callback, call `this.next()`, passing
    //    any relevant arguments
})

q.start(); 
```

***演示：http:*** [//jsfiddle.net/4n3kH/](http://jsfiddle.net/4n3kH/)

# django - OSError：[Errno 32] 使用 Django 管道损坏管道

> ID：16158381
> 
> 赞同：0
> 
> 时间：2013-04-22T23:26:03.497
> 
> 标签：django, python-2.6, django-pipeline

我最近在 CentOS 5.7 上安装了 django-pipeline。我在 /usr/local/bin/yuglify 安装了 yuglify 并更改了 PIPELINE_YUGLIFY_BINARY 指向那里。

但是，每当我运行 collectstatic 时，我都会得到以下信息：

```
OSError: [Errno 32] Broken pipe 
```

任何帮助将不胜感激。（使用 Django 1.5.1 和 python 2.6.8）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:38:45.213

原来我必须对以下内容进行符号链接：

```
/usr/local/bin/node --> /usr/bin/node
/usr/local/bin/yuglify --> /usr/bin/yuglify 
```

# jquery - 如果单击 iframe，我如何知道在 iframe 的父节点中触发单击事件

> ID：16158382
> 
> 赞同：0
> 
> 时间：2013-04-22T23:26:14.700
> 
> 标签：jquery, iframe

我有一个用于谷歌地图的 iframe。如果单击 iframe，我正在尝试在其父 div 上触发单击事件。

我尝试过这样的事情

```
var maps = $('.map-frame');
$.each(maps, function(){
if (this.contents().find('#map-canvas').has(e.target).length > 0){
do_some_thing();
}
}); 
```

我的代码没有任何反应。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:09:27.540

这不起作用吗？您只想知道发生了点击吗？什么都没有？

```
$('.map-frame').click(function (){
  do_something();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:06:19.963

```
maybe this does the trick

var maps = $('.map-frame');
$.each(maps, function(){
  $(this).contents().contents().click(function(){
     do_some_thing();
  }};
}); 
```

但你最好看看 google maps api docs how to trigger a click on the map

就像是

```
google.maps.event.trigger(map, 'click') 
```

# java - 使用 jRuby 编写 Hive UDF

> ID：16158384
> 
> 赞同：0
> 
> 时间：2013-04-22T23:26:24.120
> 
> 标签：java, jruby, hive, user-defined-functions

可以做到吗？这是我尝试编写的测试 UDF：

```
java_package "com.foo.hive.udf"
java_import org.apache.hadoop.hive.ql.exec.Description
java_import org.apache.hadoop.hive.ql.exec.UDF

java_annotation 'Description(name = "foo", value = "_FUNC_(string) - just returns test.")'
class Foo < UDF
  def evaluate ts
    "test"
  end
end 
```

然后我像这样编译它：

```
jrubyc com/foo/hive/udf/Foo.rb
jar -cf Foo.jar com/foo/hive/udf/*.class /path/to/jruby-1.7.3/lib/jruby.jar 
```

然后我尝试使用它：

```
hive> ADD JAR path/to/Foo.jar;
Added /path/to/Foo.jar to class path
hive> CREATE TEMPORARY FUNCTION foo AS 'com.foo.hive.udf.Foo'; 
```

这给了我：

```
java.lang.NoClassDefFoundError: org/jruby/ast/executable/AbstractScript
  at java.lang.ClassLoader.defineClass1(Native Method)
  at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
  at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
  at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
  at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
  at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
  ...
FAILED: Execution Error, return code -101 from org.apache.hadoop.hive.ql.exec.FunctionTask
hive> ADD JAR /path/to/Foo.jar; 
```

同样的东西，用java写的，工作正常。所以这对我来说似乎是一个 jRuby 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T14:48:36.040

`java.lang.NoClassDefFoundError: org/jruby/ast/executable/AbstractScript`告诉您 JRuby 运行时 jar 不可用。当您编译 JRuby 类时，它会创建一个`.class`文件，该文件取决于您编译它时使用的 JRuby 版本。

我猜如果你下载了 JRuby 完整的 jar，你可以运行

```
> ADD JAR jruby-complete-1.7.4.jar 
```

然后您的类将配置其依赖项。

# javascript - 如何检测 ember 数据中的新记录是否已更改

> ID：16158385
> 
> 赞同：2
> 
> 时间：2013-04-22T23:26:30.320
> 
> 标签：javascript, ember.js, ember-data

我想检测新记录的变化。但是，从我创建记录的那一刻起，记录就是新的和肮脏的。

```
 var record = transaction.createRecord(App.ContentOfSomeSort, data);
   record.get('isNew'); // true
   record.get('isDirty'); // true 
```

是否有我可以观察/收听的事件或属性告诉我记录何时更改？我认为 isDirty 会对此有好处，但是一旦我创建它就很脏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:23:14.540

看起来`didSetProperty`可能是您正在寻找的东西

[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/attributes.js#L65](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/attributes.js#L65)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T20:21:49.247

`Object.keys(model.changedAttributes()).length === 0`如果您只是检查普通属性，它将起作用。 `changedAttributes()`现在有一个未解决的问题，如果模型上的关系已更改，它将不会报告。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T23:48:46.350

我不知道 ember.js（可能里面有一些原生函数/事件？），但不能通过设置将先前记录值与实际值进行比较的间隔来完成吗？

# php - 在android中使用php从mysql数据库中获取数据

> ID：16158386
> 
> 赞同：1
> 
> 时间：2013-04-22T23:26:35.903
> 
> 标签：php, android, mysql

我正在尝试访问数据库中的单个玩家，我收到响应 {"success":0,"message":"Required field(s) is missing"} 但这是错误的，应该输出单个玩家字段.

我认为问题出在php代码上，但我不确定。非常感谢任何帮助，谢谢。

php代码——

```
<?php

require('db_connection.php');

// check for post data
if (isset($_GET["playerid"])) {
$playerid = $_GET['playerid'];

// get a player from week1 table
$result = mysql_query("SELECT *FROM week1 WHERE playerid = $playerid");

if (!empty($result)) {
    // check for empty result
    if (mysql_num_rows($result) > 0) {

        $result = mysql_fetch_array($result);

        $player = array();
        $player["playerid"] = $result["playerid"];
        $player["score"] = $result["score"];
        $player["lastholeplayed"] = $result["lastholeplayed"];
        $player["overall"] = $result["overall"];

        // success
        $response["success"] = 1;

        // user node
        $response["player"] = array();

        array_push($response["player"], $player);

        // echoing JSON response
        echo json_encode($response);
    } else {
        // no player found
        $response["success"] = 0;
        $response["message"] = "No player found";

        // echo no users JSON
        echo json_encode($response);
    }
} else {
    // no player found
    $response["success"] = 0;
    $response["message"] = "No player found";

    // echo no users JSON
    echo json_encode($response);
}
} else {
// required field is missing
$response["success"] = 0;
$response["message"] = "Required field(s) is missing";

// echoing JSON response
echo json_encode($response);
}
?> 
```

相关的java类 -

```
public class InputScores extends Activity {

// Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object

    ArrayList<HashMap<String, String>> holesList;

    // url to get all products list
    private static String url_update_players = "http://192.168.2.4/realdeal/getplayer.php";

    // JSON Node names

    // products JSONArray
    JSONArray courseone = null;

    @Override
    public void onDestroy() {
        super.onDestroy();
        if (pDialog != null) {
            pDialog.cancel();
        }
    }

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.updatescores);

    Intent i = getIntent();
    i.getStringExtra("playerid");

    //String playerid = i.getStringExtra("playerid");
    //System.out.println(playerid);
    //TextView myTextView = (TextView)findViewById(R.id.);
    //myTextView.setText(playerid);
    //String playerid = "999";
    new loadplayerdetails().execute();

}
/**
 * Background Async Task to Load all holes by making HTTP Request
 * */
class loadplayerdetails extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(InputScores.this);
        pDialog.setMessage("Loading holes. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All holes from url
     * */
    protected String doInBackground(String... params) {

        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url_update_players);

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                    2);
            String playerid ="5";
            nameValuePairs.add(new BasicNameValuePair("playerid", playerid));

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            ResponseHandler<String> responseHandler = new BasicResponseHandler();

            String response = httpclient.execute(httppost,
                    responseHandler);
            // you will get json string here

            // check here your getting json string in logcat.
            Log.d("response", response);

        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }
    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all players
        if (pDialog.isShowing()) {
            pDialog.dismiss();
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:01:36.297

您发布的数据不使用“获取”。

当您使用 URL 中的所有内容进行调用时，您使用 $_GET：

```
http://blahblah.com/somescript.php?playerid=1234 
```

在您的代码中，您使用 $_GET 来获取它。当您发布时，就像您使用 $_POST 一样：

```
if (isset($_POST["playerid"])) {
    $playerid = $_POST['playerid']; 
```

# php - 在 PHP 中为 mysql dbase 展平递归文件夹结构

> ID：16158390
> 
> 赞同：0
> 
> 时间：2013-04-22T23:26:49.760
> 
> 标签：php, multidimensional-array

也许有比 PHP 路线更好的方法，我对想法持开放态度。

问题：我为每个用户都有一个文件夹结构。此文件夹可能包含文件或子文件夹。我只关心有文件的文件夹。我能够运行查询并在多维数组上获得递归列表（来自网络上发布的 PHP 代码）。问题是我得到一个多维数组，当展平时只列出最里面的文件名，我需要将路径和文件 - 或 - 路径+文件存储在我的 sql 数据库中。这个想法是允许用户使用网络界面查看他的文件并删除它们。

这是 PHP 递归函数的示例结果。在名为“Jimmy”的文件夹中，您会发现：

```
Array
(
[0] => info.txt
[1] => log.tmp
[2] => README.md
[css] => Array
    (
        [0] => style.css
    )

[images] => Array
    (
        [0] => flower.gif
    )
[3] => index.php
[testDir] => Array
    (
        [anotherTestDir] => Array
            (
                [0] => test2.php
            )

    )
[5] => listing.txt
[temp] => Array
    (
    )

) 
```

我希望看到的是：

```
/jimmy/info.txt
/jimmy/log.tmp
/jimmy/README.md
/jimmy/css/style.css
/jimmy/images/flower.gif
/jimmy/index.php
/jimmy/testDir/anotherTestDir/test2.php
/jimmy/listing.txt 
```

然后我需要对字符串进行排序并将其添加到 mysql dbase。任何有关如何实现此效果的帮助将不胜感激。一旦我有我的扁平数组，我想一次将它添加到用户的“文件夹”表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T23:33:03.040

```
<?php
$d = new RecursiveIteratorIterator(new RecursiveDirectoryIterator('/path/to/dir'));
foreach($d as $file){
        if($file->isFile()) echo $d->getSubPathname().PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T18:31:28.390

如果您真的阅读了这个问题，这些“文件”不在本地文件系统（或任何文件系统）上，而是在存储在数据库中的虚拟树中，因此迭代器示例在这种情况下并不直接有用。

但是，如果您为数据库结构编写文件流包装器，则可以使用该示例。但即便如此，你也会被困在一个艰难的递归 SQL 查询中（让你的数据库服务器“构建”计算字段中的字符串，这是我来这里希望找到的......），或者大量的 CPU 时间在 PHP 中通过结构整理来生成每个文件或文件夹的“长名称”。

但是，如果您只想将数据用作输入，则可以使用循环和一些 is_numeric() 或 is_string() 逻辑（尽管您不能有一个数字目录，这可能是也可能不是问题)... 或者通过它们没有数组子子元素的事实来检测叶子，然后你就知道这是一个“文件”，而无论数组索引“数据类型”如何，父母都是“文件夹”。对于像这样的递归数组，我通常使用按引用循环，特别是如果我要修改节点（或在树中添加元素，例如每个节点的“full_path”字段）。PHP 文档站点上有一些关于引用和取消引用的很好的例子。此外，如果您的数据集永远不会很大，这可能是可以接受的。在我的项目中不会，我们' 已经达到了一些资源限制，并且在每次“命中”到我们的文件管理器界面时处理时间太长。所以我强烈建议让数据库完成繁重的工作和字符串连接（然后告诉我你是怎么做到的！）

# django - Django 客户端和外网用户的区别

> ID：16158391
> 
> 赞同：0
> 
> 时间：2013-04-22T23:26:53.253
> 
> 标签：django, authentication, privileges

我正在构建一个具有公共访问权限、客户受限区域和经理受限区域的应用程序。

我有一个`Manager`模型和`Client`带有用户外键的模型。并且 Manager 会自动添加到 group`managers`和 client 到`clients`.

我有一个客户端外联网，现在受@login_required 限制。经理的外联网也是如此。

我需要禁用对经理外联网的访问客户端。

在经理组中创建特权并将其添加到外联网部分的每个视图中或以某种方式不同会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:00:34.923

另外，我使用名为**group_required的****user_passes_test找到了一个现有的装饰器**

 **可以在这里找到[http://djangosnippets.org/snippets/1703/](http://djangosnippets.org/snippets/1703/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:55:55.017

一种方法是使用`user_passes_test`装饰器：

在要限制为经理的视图之前添加此行。

```
@user_passes_test(lambda u: u.groups.filter(name='managers').count() > 0, login_url='/myapp/denied/') 
```**

# django - Django 模板遍历元组列表并为它们提供所有按钮

> ID：16158397
> 
> 赞同：2
> 
> 时间：2013-04-22T23:27:18.723
> 
> 标签：django, django-templates

我有一个用户模型，并且用户有大学属性。我希望用户能够滚动浏览大学列表并选择一个作为按钮，我不希望有一个下拉选择器的东西。所以我将`UserInfo.UNIVERSITY_CHOICES`（`UserInfo`与用户模型一对一）传递给我的模板并尝试使用以下方法迭代它：

```
<form method="get" action="/newUniversity/">
{% csrf_token %}

    {% for school in universityList %}
         <input class='submitbtn' type="submit" name="school" value="{{ school }}"></center>
    {% endfor %}
</form> 
```

但是，我得到了一堆按钮，`('Harvard','Harvard')`而不仅仅是哈佛。我试图通过做来索引元组，`school[1]`但这给了我一个错误。有没有办法做到这一点，还是我这样做是完全错误的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T23:34:55.047

如果`UserInfo.UNIVERSITY_CHOICES`是元组（就像您将与 django 管理员一起使用的元组），您必须选择您所追求的值：

```
school.0 
```

或者

```
school.1 
```

注意 Django 的模板语言不是 Python！您可以在此处查看该语言的参考： [https ://docs.djangoproject.com/en/dev/topics/templates/](https://docs.djangoproject.com/en/dev/topics/templates/)

# python - 找到点和曲线python之间的距离

> ID：16158402
> 
> 赞同：0
> 
> 时间：2013-04-22T23:28:15.803
> 
> 标签：python, numpy, scipy, ipython

我怎样才能找到我的轨迹和之间的最近距离`(384400,0,0)`？

另外，我怎么能从`(384400,0,0)`时间到路径的距离`t = 197465`？

我知道数组有数据，但是有没有办法让它检查所有点的距离`(x,y,z)`并返回我正在寻找的东西？

```
import numpy as np
from scipy.integrate import odeint
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

me = 5.974 * 10 ** (24)  #  mass of the earth                                     
mm = 7.348 * 10 ** (22)  #  mass of the moon                                      
G = 6.67259 * 10 ** (-20)  #  gravitational parameter                             
re = 6378.0  #  radius of the earth in km                                         
rm = 1737.0  #  radius of the moon in km                                          
r12 = 384400.0  #  distance between the CoM of the earth and moon                 
M = me + mm

pi1 = me / M
pi2 = mm / M
mue = 398600.0  #  gravitational parameter of earth km^3/sec^2                    
mum = G * mm  #  grav param of the moon                                           
mu = mue + mum
omega = np.sqrt(mu / r12 ** 3)
nu = -129.21 * np.pi / 180  #  true anomaly angle in radian                       

x = 327156.0 - 4671
#  x location where the moon's SOI effects the spacecraft with the offset of the  
#  Earth not being at (0,0) in the Earth-Moon system                              
y = 33050.0   #  y location                                                       

vbo = 10.85  #  velocity at burnout                                               

gamma = 0 * np.pi / 180  #  angle in radians of the flight path                   

vx = vbo * (np.sin(gamma) * np.cos(nu) - np.cos(gamma) * np.sin(nu))
#  velocity of the bo in the x direction                                          
vy = vbo * (np.sin(gamma) * np.sin(nu) + np.cos(gamma) * np.cos(nu))
#  velocity of the bo in the y direction                                          

xrel = (re + 300.0) * np.cos(nu) - pi2 * r12
#  spacecraft x location relative to the earth         
yrel = (re + 300.0) * np.sin(nu)

#  r0 = [xrel, yrel, 0]                                                           
#  v0 = [vx, vy, 0]                                                               
u0 = [xrel, yrel, 0, vx, vy, 0]

def deriv(u, dt):
    n1 = -((mue * (u[0] + pi2 * r12) / np.sqrt((u[0] + pi2 * r12) ** 2
                                               + u[1] ** 2) ** 3)
        - (mum * (u[0] - pi1 * r12) / np.sqrt((u[0] - pi1 * r12) ** 2
                                              + u[1] ** 2) ** 3))
    n2 = -((mue * u[1] / np.sqrt((u[0] + pi2 * r12) ** 2 + u[1] ** 2) ** 3)
        - (mum * u[1] / np.sqrt((u[0] - pi1 * r12) ** 2 + u[1] ** 2) ** 3))
    return [u[3],  #  dotu[0] = u[3]                                              
            u[4],  #  dotu[1] = u[4]                                              
            u[5],  #  dotu[2] = u[5]                                              
            2 * omega * u[5] + omega ** 2 * u[0] + n1,  #  dotu[3] = that         
            omega ** 2 * u[1] - 2 * omega * u[4] + n2,  #  dotu[4] = that         
            0]  #  dotu[5] = 0                                                    

dt = np.arange(0.0, 320000.0, 1)  #  200000 secs to run the simulation            
u = odeint(deriv, u0, dt)
x, y, z, x2, y2, z2 = u.T

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot(x, y, z)
plt.show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:17:36.923

要找到沿轨迹中每个点的距离：

```
my_x, my_y, my_z = (384400,0,0)

delta_x = x - my_x
delta_y = y - my_y
delta_z = z - my_z
distance = np.sqrt(np.power(delta_x, 2) + 
                   np.power(delta_y, 2) + 
                   np.power(delta_z, 2)) 
```

然后找到最小值和特定距离：

```
i = np.argmin(distance)
t_min = i / UNITS_SCALE  # I can't tell how many units to a second. Is it 1.6?
d_197465 = distance[int(197465 * UNITS_SCALE)] 
```

PS，我不是火箭科学家，因此实际上并没有检查过上面的东西`x, y, z, x2, y2, z2 = u.T`。我假设这些是你的轨迹的位置和速度？

# ms-access-2007 - 复选框禁用

> ID：16158404
> 
> 赞同：0
> 
> 时间：2013-04-22T23:28:28.877
> 
> 标签：ms-access-2007

我正在做一个管理数据库的项目。在这里，我必须制作一个清单，其中员工必须签入 MS-Access 2007 表单中的复选框，以便他们的回复在数据库中注册。但是，在某个时间之后，即截止日期字段，我想禁用该复选框，以便不再允许签入。我对 VBA 完全陌生。如果有人可以帮助我或指导我完成其中的编程部分，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:48:24.820

在将控制此复选框的 VBA 中，您可以使用一些选项。

```
MyCheckBox.Enabled = False
MyCheckBox.Locked = True
MyCheckBox.Visible = False 
```

第一个将禁用控件并将其变灰。
第二个将锁定任何更改，但它保持相同的颜色。
第三个将完全隐藏它。

希望这可以帮助。祝你好运。

# android - 无法在 android SDK 中创建项目

> ID：16158408
> 
> 赞同：3
> 
> 时间：2013-04-22T23:28:52.017
> 
> 标签：android

我正在尝试创建一个 Android 应用程序项目，但我遇到了很多问题。就像现在一样，我无法超越第一个对话框。这是屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/njRBD.jpg)

我还在读到我的每个 sdk 都达到了 Android 4.1，即使我只有 android 4.2，如以下屏幕截图所示：

![在此处输入图像描述](https://i.stack.imgur.com/RjGU9.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/ipqrk.jpg)

此外，当我打开 android 开发者工具程序时，会出现以下对话框：

![在此处输入图像描述](https://i.stack.imgur.com/cYR9X.jpg)

尽管如此，我的机器上安装了 Android Developer Toolkit 版本 21.1.0，如以下屏幕截图所示：

![在此处输入图像描述](https://i.stack.imgur.com/J3NCj.jpg)

我现在很困惑。有人可以帮我解决这些问题吗？真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:32:32.533

Holo Light Theme 不能应用于 Android 2.2。您至少需要 Android 3 的最低 sdk。

因此，要么不要使用 Holo 主题，要么将最低设置为 Android 3。

编辑：您可以改为查看：[Update Android SDK Tool to 22.0.4(Latest Version) from 22.0.1](https://stackoverflow.com/questions/14869929/update-android-sdk-tool-to-21-1-0-from-21-0-1)

# c# - FormAuthentication 持久为 false，但 chrome 仍处于登录状态

> ID：16158411
> 
> 赞同：1
> 
> 时间：2013-04-22T23:29:05.947
> 
> 标签：c#, asp.net-mvc-3, google-chrome, cookies, forms-authentication

我已经在 Firefox 和 Internet Explorer 上进行了测试，并且在关闭浏览器后都注销但 chrome 仍然处于登录状态。

```
FormsAuthentication.SetAuthCookie(username, false); 
```

真的很奇怪，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:42:20.840

修复了，够烦人的，chrome 的更新版本被设置为让 chrome 在后台运行以提高性能。这把我搞砸了。

# java - 静态成员未按预期初始化

> ID：16158418
> 
> 赞同：7
> 
> 时间：2013-04-22T23:29:57.420
> 
> 标签：java, static, static-members

下面的代码只是简单地从使用`java.util.Calendar`该类获得的当前年份中减去一个值（本例中为 10，仅用于演示）。

```
public final class Test
{   
    private static final Test TEST = new Test();
    private static final int YEAR = Calendar.getInstance().get(Calendar.YEAR);
    private final int eval=YEAR - 10;

    public static void main(String[] args)
    {
        System.out.println("Evaluation "+TEST.eval);
    }
} 
```

我希望此代码显示 2003 年（当年 - 10 年），但它显示的是`-10`. 我假设该常量`YEAR`尚未初始化。为什么在这种情况下会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T23:33:32.043

因为它不是`static`——你必须创建一个对象才能使用这个字段！（或将其更改为静态）

尝试：

```
public final class Test
{   
    private static final Test TEST = new Test();
    private static final int YEAR = Calendar.getInstance().get(Calendar.YEAR);    
    private final int eval=YEAR - 10;

    public static void main(String[] args)
    {
        Test t = new Test();
        System.out.println("Evaluation "+t.eval);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T23:49:36.720

发生这种情况是因为您在初始化`Test`之前进行了初始化`YEAR`- 这意味着它将转到（隐式）构造函数并初始化`eval`为`YEAR-10`之前`YEAR`的值（因此默认为 0）。

如评论中所述，只需在初始化中更改 YEAR 和 TEST 的顺序即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T23:36:25.923

使`eval`静态，它会工作。如果您不希望它是静态的，则在 main 方法中进行计算。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-03T20:25:12.440

正如其他人所提到的，问题出在静态字段的顺序上。但是，您可以通过使用方法延迟初始化来完全避免排序问题`TEST`（就像在[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)中所做的那样）：

```
public final class Test
{   
    private static Test TEST = null;
    private static final Test getInstance() {
        if (TEST == null) {
            TEST = new Test();
        }
        return TEST;
    }

    private static final int YEAR = Calendar.getInstance().get(Calendar.YEAR);
    private final int eval=YEAR - 10;

    public static void main(String[] args)
    {
        System.out.println("Evaluation "+Test.getInstance().eval);
    }
} 
```

# r - 唯一向量的索引

> ID：16158421
> 
> 赞同：2
> 
> 时间：2013-04-22T23:30:07.007
> 
> 标签：r, vector, indexing

我在 R 中有 2 个向量。我可以生成一个由它们的唯一元素组成的向量，但我需要知道向量的每个元素的索引`a`，例如：

```
 x <- c(0, 0, 2, 4, 8)
 y <- c(1, 4, 6, 6, Inf)
 a <- unique(sort(c(x, y)))

 > a
 [1]   0   1   2   4   6   8 Inf 
```

我需要证明`0`(in `a`) 的索引是`x1`和`x2`，的索引`1`是`y1`，对于`2`它是`x3`，因为`4`它们是`x4`等等`y2`。

我如何在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T23:36:41.630

```
sapply(unique(x), function(z) which(x==z)  ) 
```

这是非常基本的东西，你真的应该学习 R 的介绍并在你的控制台上处理示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:15:58.607

我猜你想要一个函数，应用`a`它会返回找到每个元素的向量的名称以及该向量中的位置。

这不是很漂亮，但应该做你想做的事：

```
fun1 <- function(i) {
        res <- NULL
        if (a[i] %in% x) res <- paste("x",which(x==a[i]),sep="")
        if (a[i] %in% y) res <- c(res, paste(" y",which(y==a[i]),sep=""))
        names(res) <- rep(a[i],length(res))
        return(res)
        } 
```

然后

```
unlist(sapply(1:length(a), FUN = fun1)) 
```

给

```
 0     0     1     2     2     4     6     6     8   Inf 
 "x1"  "x2" " y1"  "x3" " y2"  "x4" " y3" " y4"  "x5" " y5" 
```

**更新**是你要找的吗？

```
fun1 <- function(i) {
    res1 <- res2 <- NULL
    if (a[i] %in% x) res1 <- paste("x", which(x %in% a[i]),sep="",collapse=" ")            
    if (a[i] %in% y) res2 <- paste("y", which(y %in% a[i]),sep="",collapse=" ")
    res <- paste(res1,res2,collapse="")
    names(res) <- a[i]
    ascii:::trim(res)
    } 
```

这与以前的用法相同，给出

```
 0       1       2       4       6       8     Inf 
"x1 x2"    "y1" "x3 y2"    "x4" "y3 y4"    "x5"    "y5" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T01:57:21.643

为什么不命名原始向量，然后用它`tapply`来得到你想要的

```
names(x) <- paste0('x', seq_along(x))
names(y) <- paste0('y', seq_along(y))

# combine and sort
xy <- sort(c(x,y))
xy
## x1  x2  y1  x3  x4  y2  y3  y4  x5  y5 
##  0   0   1   2   4   4   6   6   8 Inf 

tapply(names(xy), xy, list)

# $`0`
# [1] "x1" "x2"
# 
# $`1`
# [1] "y1"
# 
# $`2`
# [1] "x3"
# 
# $`4`
# [1] "x4" "y2"
# 
# $`6`
# [1] "y3" "y4"
# 
# $`8`
# [1] "x5"
# 
# $`Inf`
# [1] "y5" 
```

# java - 数据库表中的 Quartz 作业

> ID：16158423
> 
> 赞同：0
> 
> 时间：2013-04-22T23:30:15.320
> 
> 标签：java, mysql, spring, tomcat, quartz-scheduler

我们使用 Quartz 2.1.6 在集群上进行作业调度，并将作业数据存储在 MySQL 数据库（MySQL 5.1）中的 JDBC 作业存储中。

我们所有的 Quartz 配置（调度程序、作业、触发器）都是在启动时通过 Spring 完成的。我们将数据存储在数据库中以进行聚类。

问题：我们有几个作业被添加，然后从 Quartz 配置中删除。它们不再存在于配置中，但它们仍然存在于表中。我们如何摆脱它们？阅读 Quartz 文档，似乎手动编辑表格是一件非常糟糕的事情。

我们似乎没有明确设置 JobDetail.setDurability(true)，所以我不确定为什么这些作业和触发器会一直存在，但它们确实存在。

有人有答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T20:31:09.180

是的，除非您非常清楚自己在做什么，否则在数据库中执行此操作不是最好的主意。所以，尝试以编程方式进行：

```
ISchedulerFactory factory = new StdSchedulerFactory();
IScheduler schedulder = factory.GetScheduler();

schedulder.DeleteJob(JobName, JobGroup); 
```

# excel - VB函数错误信息

> ID：16158424
> 
> 赞同：1
> 
> 时间：2013-04-22T23:30:26.913
> 
> 标签：excel, multidimensional-array, user-defined-functions, vba

所以我想创建一个函数来计算解决问题的“成本”。

我创建了一个包含整数值的一维数组 Sum(m)。这在不同的子过程中被引用。

```
Function Cost(sum As Integer, a As Integer) As Long

Dim total As Long

'Calculate cost
For m = 1 To 2 * n + 2
    total = total + (sum(m) - a) ^ 2
Next m
Cost = total

End Function 
```

我不确定我应该在该行的括号部分使用什么

```
Function Cost(sum As Integer, a As Integer) As Long 
```

当我尝试在我的子过程中调用该函数时，我收到错误消息 - **Compile Error: Expected array**。这发生在行

```
SolCost = Cost(sum, UBound(x)) 
```

我真的很困惑为什么会发生这个错误。这可能是由于严重缺乏 VB 经验。希望你们能帮助我。

如果您需要更多信息，请随时询问。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:59:41.927

你不能`UBound`像这样的多维数组。您必须`UBound`是数组的一个特定维度。所以如果`X(i,j)`是你的数组，你必须要么`UBound(X,1)`表示第一个维度，要么表示`UBound(X,2)`第二个维度。这可以扩展到您拥有的任何维度。看看[w3schools](http://www.w3schools.com/vbscript/func_ubound.asp)，他们的文章涵盖了多维数组。

# ios - 使用 setcontentsize 调整 UIScrollView 的大小

> ID：16158427
> 
> 赞同：0
> 
> 时间：2013-04-22T23:31:01.490
> 
> 标签：ios, objective-c, uiscrollview, uikit

我正在尝试在 UICollectionViewCell 内调整 UIScrollView 的大小，但它不会调整它的大小。

```
-(int)resizeScrollView:(int)height{

    NSLog(@"Before Scroll height %f",self.scrollView.frame.size.height);
    float currentHeight=self.scrollView.frame.size.height+height+200;
    NSLog(@"height %f",currentHeight);
    CGSize size=CGSizeMake(self.scrollView.frame.size.width ,
                           currentHeight + 10 );
    [self.scrollView setContentSize:size];    
    self.scrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    NSLog(@"After Scroll height %f",self.scrollView.frame.size.height);

    return currentHeight;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:40:42.087

设置`contentSize`调整滚动视图滚动的逻辑空间量。您需要设置`frame`或`bounds`来调整其父视图中滚动视图的大小。

```
CGRect scrollFrame = self.scrollView.frame;
scrollFrame.size.height += height + 210;
self.scrollView.frame = scrollFrame; 
```

# android - 从服务更新布局的 Textview

> ID：16158430
> 
> 赞同：0
> 
> 时间：2013-04-22T23:31:26.217
> 
> 标签：android, service, textview, inflate

我想更新布局中的 Textview，当服务检测到未接来电时，我在我的服务的 onCreat 方法中使用此代码：

```
 public void onCreate() {
    super.onCreate();

    final LayoutInflater mcInflator = (LayoutInflater) ctext.getSystemService(Context.LAYOUT_INFLATER_SERVICE );

    bla bla bla bla bla
    ...

if (call.toString().contains("Missed")){

                    View mcLayout= mcInflator.inflate(R.layout.m_call, null );
                    TextView mc = (TextView) mcLayout.findViewById(R.id.mcText);
                    mc.setText("Missed Call");
                }

                if (call.toString().contains("Outgoing")){

  bla bla bla bla bla .... 
```

但是当我检查我的布局时，Textview 没有改变？请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:42:53.517

哦，我的......好吧，我们开始：

*   您不想在服务中做任何 UI 工作。这是非常糟糕的做法。
*   您正在创建和修改视图的一个新实例，而不是屏幕上显示的那个。
*   您可能想要做的是在您的活动中绑定正在运行的服务。有关示例，请参见[此处。](https://stackoverflow.com/questions/3358230/how-to-bind-to-running-android-service)

# django - 如何制作下拉菜单以在 django 中搜索不同模型

> ID：16158431
> 
> 赞同：1
> 
> 时间：2013-04-22T23:31:43.083
> 
> 标签：django

我是 django 的新手，我做了一个搜索引擎，我想在模板中添加一个下拉菜单，用户可以在其中选择要搜索的模型。在模板中写什么以及写什么`views.py`是否需要表格.py ？？？

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:07:57.710

有2个解决方案。

1.  您可以将模型和过滤语句直接硬编码到您的 Django 视图中。如果查询不复杂并且模型不多，这没关系。

2.  或者你需要一个抽象——在你的 Django 模型上的搜索层。有很多不同的搜索引擎：solr、sphinx、弹性搜索。在您的情况下，这可以是例如带有 django-sphnix 插件的 Sphinx Search - 它可以聚合不同的数据源并使它们可用于搜索。

# html - 菜单和子菜单之间的 CSS 空间

> ID：16158434
> 
> 赞同：12
> 
> 时间：2013-04-22T23:31:56.100
> 
> 标签：html, css

这就是我想要做的：

![在此处输入图像描述](https://i.stack.imgur.com/bbjoj.jpg)

如果您注意到菜单和子菜单之间有空格。

问题是子菜单不能以这种方式工作，因为当鼠标指针离开菜单时，子菜单就会消失。

只有当它看起来像这样时它才有效：

![在此处输入图像描述](https://i.stack.imgur.com/4Gn0f.jpg)

我怎样才能离开菜单和子菜单之间的空间并让它工作？

**我的代码：**

[JSFIDDLE 代码](http://jsfiddle.net/EnKwU/)

**HTML：**

```
<body>
<nav>
    <ul>
        <li><a href="#">One</a>
            <ul>
                <li><a href="1.html">1.1</a></li>
                <li><a href="2.html">1.2</a>
            </ul>
        </li>
        <li><a href="#">Two</a>
            <ul>
                <li><a href="3.html">2.1</a></li>
                <li><a href="4.html">2.2</a></li>
                <li><a href="5.html">2.3</a></li>
            </ul>
        </li>
        <li><a href="#">Three</a>
            <ul>
                <li><a href="6.html">3.1</a></li>
                <li><a href="7.html">3.2</a></li>
            </ul>
        </li>
        <li><a href="8.html">Four</a></li>
    </ul>
</nav>
</body> 
```

**CSS：**

```
body {
    background-color: #cac3bc
}
nav {
    float: left;
}
nav ul ul {
    display: none;
}
nav ul li:hover > ul {
    display: block;
}
nav ul {
    background-color: #fff;
    margin-top: 10px;
    padding: 0 20px;  
    list-style: none;
    position: relative;
    display: inline-table;
    margin-right: -80px;
}
nav ul li {
    float: left;
}
nav ul li:hover {
    border-bottom: 5px solid #f5aa65;
    color: #fff;
}
nav ul li a:hover {
    color: #000;
}

nav ul li a {
    display: block; 
    padding: 15px 15px;
    font-family: 'PT Sans', sans-serif;
    color: #000; 
    text-decoration: none;
}
nav ul ul {
    background-color:#fff;
    border-radius: 0px; 
    padding: 0;
    position: absolute;
    top: 100%;
    box-shadow: 0px 0px 9px rgba(0,0,0,0.15);
}
nav ul ul li {
    float: none; 
    position: relative;
}
nav ul ul li a {
    padding: 15px 40px;
    color: #000;
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-22T23:38:32.807

您可以利用`:before`来扩展“可悬停”区域：

```
nav ul ul:before {
    content: "";
    display: block;
    height: 20px;
    position: absolute;
    top: -20px;
    width: 100%;
} 
```

[看这个演示。](http://jsfiddle.net/EnKwU/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-30T18:51:28.430

公认的答案非常简单和完美。但是，我想为像我这样不得不使用上述答案的变体的其他人添加一个替代方案。在我的情况下，我的子菜单是全宽的，因此我在子菜单上做了一个绝对位置，从主菜单下方开始 - 我引入了 :before 元素以引入 100px 的间隙。因此我的 :before 代码是

```
// Define the 100px gap between menu and submenu.
        &:hover ul.sub-menu:before {
            content: "";
            display: block;
            //Note: This height starts at the top:100% of the position absolute for the ul.sub-menu below, 
            //pushing the sub-menu down by the height defined here.
            height: 100px;
            width: 100%;
            background-color: transparent;
        } 
```

将子菜单放置在主菜单和全宽下方的绝对位置的代码是

```
 &:hover ul.sub-menu {
            background-color: transparent;
            display: block;
            position: absolute;
            border-top: 10px solid red;
            top: 100%;
            left: 0;
            width: 100%;
            // Sub-menu appears on top of main menu.
            z-index: 1;
enter code here 
```

# linux - 使用 PDFTK 或类似方法合并时为 PDF 文件添加边距

> ID：16158435
> 
> 赞同：13
> 
> 时间：2013-04-22T23:32:11.543
> 
> 标签：linux, document, margin, dompdf, pdftk

我有一大堆半页大小的 PDF 单页纸，它们保存在我的 Linux 服务器上的一个文件夹中。该站点的用户将希望从其中的一个**子集**创建一个小册子。小册子将被装订，因此集合的偶数页需要在右侧有更多页边距，而奇数页将需要在左侧有更多页边距。在 500 页的集合中最多可以有 200 页，所以我不想重新生成每一页来设置它的边距。通过 DOMPDF 运行内容将花费太多的服务器时间。使用 PDFTK 构建文档很快。

我想将文档与 PDFTK 从居中的 PDF 文件合并，并为奇数页或偶数页添加适当的边距。

如果不是 PDFTK，那么还有其他工具可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-07-23T09:45:55.480

如果你使用 ubuntu，你可以安装`pdfcrop`：

```
sudo apt-get install -y pdfcrop 
```

尽管它的名字，`pdfcrop`可以选择添加边距：

```
pdfcrop --margin '29 0 29 0' input.pdf output.pdf 
```

（注意：单位为 bp。72 bp = 1 英寸。29 bp 约为 1 厘米。）

然后，使用`pdfjam`对左右页面进行偏移技巧。

```
pdfjam --twoside --offset '1cm 0cm' file.pdf 
```

注意： pdfcrop 确实存在一些 pdf 文件的问题。（！！！错误：Ghostscript 以错误代码 139 退出！）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-28T14:36:43.783

如果您仍然对此感兴趣，您应该看看`pdfjam`哪些允许您偏移和剪辑 pdf。关于您的特定问题，您可能会做类似的事情

```
pdfjam --twoside --offset '2cm 0cm' file.pdf 
```

这会将偶数页向右移动 2 厘米，奇数页向左移动。是包的
`pdfjam`前端。`pdfpages``pdflatex`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-05T08:11:10.687

即使有点晚了，但它可能会帮助某人。作为对@ElkeSpaak [评论](https://stackoverflow.com/questions/16158435#comment53556394_31583736)的回应，它是包装`texlive-extra-utils`：

```
dpkg-query -S /usr/bin/pdfcrop 
texlive-extra-utils: /usr/bin/pdfcrop 
```

# lua - 如何在 Lua 中从整数中移位和屏蔽位？

> ID：16158436
> 
> 赞同：0
> 
> 时间：2013-04-22T23:32:16.487
> 
> 标签：lua, coronasdk

我正在将一个 Objective-C iOS 应用程序移植到使用 Lua 的 CoronaSDK。我有一个带**符号**的16 位整数，我想隔离其中的高字节和低字节。在 C 中，您可以简单地执行以下操作：

```
uint8_t a = (dx >> 8) & 0xff;
uint8_t b = dx & 0xff; 
```

Lua 没有位运算符。我怎样才能在 Lua 中做到这一点？这是用于移动应用程序和扩展 Lua 的外部二进制库，如果有的话，很可能不适用于所有设备。您可以建议任何针对此问题的纯 Lua 解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T23:44:22.693

我不知道Lua，但可以给你一个大致的想法。右移 n 相当于除以 2^n。您可以先除以 2^8 = 256 得到 MSB，然后乘以并除以 2^8 得到 LSB。

```
MSBs = dx / 256
LSBleftsifted = (ds * 256)
LSBs = LSBleftsifted / 256 
```

这是考虑到所有这些都是无符号整数运算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T00:13:50.647

基于@ash 的回答，这里有几个 Lua 函数。我确信它们可以被概括，但这正是我所需要的：

```
local function getLowByte16( value )
    local high_value = math.floor(value/256)
    high_value = high_value*256
    local low_value = value - high_value
    return low_value
end

local function getHighByte16( value )
    local high_value = math.floor(value/256)
    return high_value
end 
```

# xcode - xcode SimpleAudioEngine 增加音量

> ID：16158438
> 
> 赞同：0
> 
> 时间：2013-04-22T23:32:24.203
> 
> 标签：xcode

使用 SimpleAudioEngine 增加音量。我尝试添加 `playBackgroundMusic.volume = 1.0f;`到我的代码中，但没有运气

`[[SimpleAudioEngine sharedEngine] playBackgroundMusic:@"background_menu.mp3" loop:YES];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:16:17.093

这里的例子。另请注意，您必须先加载音乐才能更改音量：[http ://www.cocos2d-iphone.org/wiki/doku.php/cocosdenshion:cookbook](http://www.cocos2d-iphone.org/wiki/doku.php/cocosdenshion:cookbook)

> 调用 playBackgroundMusic 时使用 preloadBackgroundMusic 减少启动时间。您也可以这样做以确保在调用 playBackgroundMusic 之前有一个背景音乐对象可以设置属性（例如音量）。

```
SimpleAudioEngine *sae = [SimpleAudioEngine sharedEngine];
if (sae != nil) {
    [sae preloadBackgroundMusic:@"mula_tito_on_timbales.mp3"];
    if (sae.willPlayBackgroundMusic) {
        sae.backgroundMusicVolume = 0.5f;
    }
} 
```

# jquery - 为什么我的 jQuery 生成的列表项不显示？

> ID：16158440
> 
> 赞同：0
> 
> 时间：2013-04-22T23:32:27.587
> 
> 标签：jquery, asp.net, html, razor, visual-studio-2012

我有一个名为 Platypus.XML 的 XML 文件，我已将它添加到我的 Razor 2 项目中，与在 VS 2012 中创建新的 Razor 2 网站（_AppStart.cshtml、Default.cshtml 等）时默认提供的文件处于同一级别。 )

XML 文件似乎格式正确（此外，它已在其他地方成功使用）：

```
<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<Platypi>
  <Platypus>
    <PlatypusNumber>1</PlatypusNumber>
    <LocationNumber>1</LocationNumber>
    <PlatypusName>CCR, Inc. Site 1 Q &amp; A</PlatypusName>
  </Platypus>
. . .
</Platypi> 
```

我有这个 html 和 jQuery：

```
. . .
<ol class="round">
    <li class="one">
        <input type="submit" id="submit" value="Get Platypus.XML" />
        <div id="Platypus_Setup"></div>
    </li>

    <li class="two">
        <input type="submit" id="submit2" value="Get Platypus2.XML" />
        <div id="Platypus_Setup2"></div>
    </li>

    <li class="three">
        <input type="submit" id="submit3" value="Get Platypus3.XML"  />
        <div id="Platypus_Setup3"></div>
    </li>
</ol>

    <script>
        $(document).ready(function () {
            $('#submit').click(function () {
                $.ajax({
                    type: "GET",
                    url: "Platypus.XML",
                    dataType: "xml",
                    success: function (PlatypusRec) {
                        var platypusSetup = "<ul>";
                        $(PlatypusRec).find('Platypus').each(function () {
                            var platypusNum = $(this).find('PlatypusNumber').text()
                            platypusSetup += "<li>" + platypusNum + "</li>";
                        });
                        platypusSetup += "</ul>";
                        $('#Platypus_Setup').append(platypusSetup);
                    }
                });
                return false;
            });
        });
    </script> 
```

（我改编自 aPress 书籍“jQuery 食谱”，食谱 8-8）

尽管如此，混合“Get Platypus.XML”按钮不会将任何内容附加到 Platypus_Setup div 元素。它也不会抛出错误，它只是完全没有做任何事情（我可以​​看到）。

我在这里想念什么？

## 更新

针对 LOUD 的“手动点击文件”的建议：

从以下位置更改 URL：

```
http://localhost:53321/XMLFileViewer/Default.cshtml 
```

至：

```
http://localhost:53321/XMLFileViewer/PLATYPUS.XML 
```

...显示 XML 文件，以及顶部的消息：

*此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。*

另外，我在“return false;”上方添加了错误代码。线：

```
error: function (xhr, status) {
    alert(xhr.status);
}
return false; 
```

...但我不确定这是否是正确的位置，因为“状态”是灰色的；运行它并将按钮与新的异常处理程序混搭没有什么不同（我没有看到警报框）......

## 更新 2

移动上面的异常块：

```
error: function (xhr, status) {
                    alert(xhr.status);
                }
                });
                return false; 
```

...在 VS2012 中加粗了“状态”，但在捣碎按钮时仍然没有错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:37:55.680

至少，在下面的代码中将 $(Platypus) 更改为 $(PlatypusRec)：

```
success: function (PlatypusRec) {
    var platypusSetup = "<ul>";
    $(Platypus).find('Platypus') 
```

另外，您在谈论哪些文件（视图/控制器/等）？根据您的路线，它可能无法接收。

> 我有一个名为 Platypus.XML 的 XML 文件，我已将它添加到我的 Razor 2 项目中，与创建新 Razor 2 网站时默认提供的文件处于同一级别

我会尝试从同一路径在浏览器中手动点击文件。我还会添加一个失败事件来尝试捕获服务器状态代码（404、500 等）

```
error: function(xhr, status) {
    alert(xhr.status); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:18:50.080

Resharper、jsFiddle 和[这些问题是否被 jsFiddle 捕获导致点击事件发生故障？](https://stackoverflow.com/questions/16174165/are-these-problems-caught-by-jsfiddle-causing-the-click-event-to-malfunction/16174216?noredirect=1#16174216)帮我清理了 jQuery；一旦我的语法正确，它就可以正常工作：

```
$(document).ready(function () {
        $('#submit').click(function () {
            $.ajax({
                type: "GET",
                url: "DuckbillSETUP.XML",
                dataType: "xml",
                success: function (platypusSetupRec) {
                    var platypussetup = "<ul>";
                    $(platypusSetupRec).find('platypus').each(function () {
                        var platypusNum = $(this).find('platypusNumber').text();
                        platypussetup += "<li>" + platypusNum + "</li>";
                    });
                    platypussetup += "</ul>";
                    $('#platypus_Setup').append(platypussetup);
                },
                error: function (xhr, status) {
                    alert(xhr.status);
                }
            });
            return false;
        });
    }); 
```

# javascript - 将 MySQL 日期时间转换为毫秒 javascript

> ID：16158448
> 
> 赞同：0
> 
> 时间：2013-04-22T23:33:06.613
> 
> 标签：javascript, mysql

我正在编写一个`PHP/JavaScript`自动化工具。在该工具中，保存运行时间很重要，因此我们可以使用它来创建`Google Finance`股票图表样式，这使我们能够遵循这些测试的性能模式。进来的数据是基本的：`date`, a`DateTime`和`average`, 每次测试的平均时间。

```
id    Date                  Average

351   2013-04-22 15:57:49   154.3
347   2013-04-22 13:58:54   157
344   2013-04-22 12:00:06   444.7
340   2013-04-22 10:01:30   445.3
333   2013-04-22 08:02:24   263 
```

`JSON`从数据库中查询后，数据以, 的形式出现`MySQL`。但是，`API`我使用的需要数据为：

```
[
  [1145836800000,440.50],
  [1145923200000,427.16],
  [1146009600000,425.97],
  [1146096000000,420.03],
  [1146182400000,417.94]
] 
```

我正在使用[HighStock](http://www.highcharts.com/stock/demo/flags-shapes/gray)来生成这样的图表。如何`Datetime`在 JavaScript 中将字符串转换为毫秒？ ***我`PHP`在后端使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:37:26.573

我建议在后端进行转换。

从数据库中获取时间戳，而不是返回选定的时间戳，您应该简单地转换时间戳并将其返回到 JSON 中。

大多数服务器端编程语言都支持转换功能。

你可以在 PHP 中这样做：

```
// selectedTimeStamp is of the form 'Y-m-d H:i:s'
$strTime = strtotime($selectedTimeStamp); 
```

但是，如果您真的想在 javascript 中执行此操作..

```
d.getTime(); 
```

其中 d 是选定的时间戳。

例子：

```
// The selected timestamp, using a dummy value here.
var selected = "April 04, 2013 22:30:00"; 
var d = new Date(selected); 
var ms = d.getTime(); 
```

您可能必须将其转换为这种格式，但我认为 w3school 可以向您展示更多。

你可以阅读更多：[http ://w3schools.com/jS/js_obj_date.asp](http://w3schools.com/jS/js_obj_date.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T23:40:44.007

如果您希望使用 JavaScript 执行此操作，请尝试以下操作：

```
var ms = new Date("2013-04-22 15:57:49").getTime();  // 1366660669000 
```

![在此处输入图像描述](https://i.stack.imgur.com/bXHf8.png)

# knockout.js - Breeze.js 和 Knockout.js：将微风验证转换为淘汰验证会导致“堆栈空间不足”或“递归过多”

> ID：16158463
> 
> 赞同：1
> 
> 时间：2013-04-22T23:34:30.027
> 
> 标签：knockout.js, breeze, knockout-validation

我有一个由 Breeze/OData 生成的客户端模型，我使用本文中的代码[将](https://stackoverflow.com/questions/15635958/mark-fields-not-valid-as-red-with-knockout-durandal)其连接到 Knockout 验证。

它非常适合通过该`isValid()`方法验证单个字段。但是，每当我尝试`ko.validation.group`对 Breeze 实体使用（假设淘汰验证配置为）时，`{deep: true}`调用或任何其他对对象图执行树遍历的方法都会在运行时导致无限递归异常（请参阅） . 取决于浏览器可以是“堆栈空间不足”（IE）或“递归过多”（Firefox）。`showAllMessages``length`[`knockout.validation.js@231-271`](https://github.com/Knockout-Contrib/Knockout-Validation/blob/master/Src/knockout.validation.js)

我认为错误的根本原因是 Knockout Validation 中的算法没有跟踪以前访问过的节点。所有 Breeze 实体都包含一个`entityAspect`属性，其中的代码`knockout.validation`首先使用深度访问所有属性及其所有子项，但不记住已经访问过的节点。并且由于`entityAspect`包含对其包含实体的引用，因此会导致堆栈溢出。

```
validate(entity) // Initial call
    => validate(entity.entityAspect) // Validate the first property of the root
    => validate(entity.entityAspect.entity) // Validate the first property of the child, which points back to the root! 
```

所以在这一切之后，问题是：**你知道有什么办法可以避免这种行为吗？**

现在，我想我只是要在里面使用一个肮脏的廉价黑客`knockout.validation`来防止踏入`entityAspect`房产，但我相信应该有更好的方法。

# r - r 中是否有多个正交多项式函数？（除了聚）

> ID：16158465
> 
> 赞同：2
> 
> 时间：2013-04-22T23:34:34.030
> 
> 标签：r

我想为 50x30 矩阵生成多个正交多项式。

结果应该有 30 + 30 + 30C2 = 30 + 30 + 435 = 505 列和 50 行。我厌倦`poly`了`R`基本包，即使是第一次订购，它也耗尽了内存。R中是否有任何函数可以做多个正交多项式？（尝试过`orthopolynom` ，但它只适用于单变量）还是太难了？谢谢

这是我的代码

```
n=50
k=30
x=matrix(rnorm(n*k),nrow=n,ncol=k)
poly(x,degree=1)
Error in rep.int(rep.int(seq_len(nx), rep.int(rep.fac, nx)), orep) :  cannot allocate vector of length 1073741824 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T02:05:10.203

对于您的 30C2 项，您不需要正交多项式，而是所有双向交互项：

```
paste( combn( paste0("X", 1:30), 2, FUN=paste, collapse="*"), collapse="+") 
```

对于 2 次正交多项式，您可能需要：

```
paste( "poly(", paste0("X", 1:30), ", degree=2)", collapse="+") 
```

`as.formula`如果您想将其用于回归，则需要构建一个 R 公式。

我不确定这是否会给你的正交多项式，但它会给你一个所需复杂度的公式表达式：

```
as.formula( paste(" ~ (", paste0("X", 1:30 , collapse="+"), ")^2", collapse=""))
#--------------
~(X1 + X2 + X3 + X4 + X5 + X6 + X7 + X8 + X9 + X10 + X11 + X12 + 
X13 + X14 + X15 + X16 + X17 + X18 + X19 + X20 + X21 + X22 + 
X23 + X24 + X25 + X26 + X27 + X28 + X29 + X30)^2 
```

这将扩展到所有线性项、所有平方项和所有双向组合。见`help(formula)`。并查看扩展使用的内容：

```
terms( as.formula( 
         paste(" ~ (", paste0("X", 1:30 , collapse="+"), ")^2", collapse="")
       ) ) 
```

# css - 当我鼠标悬停时，导航栏的品牌部分以黑色突出显示，在 CSS 中找不到任何选项

> ID：16158467
> 
> 赞同：2
> 
> 时间：2013-04-22T23:34:46.787
> 
> 标签：css, ruby-on-rails, twitter-bootstrap-rails

我有一个带有品牌元素的导航栏顶部的 rails 应用程序。当我将鼠标悬停在它上面时，它的背面会变黑。我在浏览器控制台上看不到任何有帮助的东西。有人有这方面的经验吗？这是它的样子：

![在此处输入图像描述](https://i.stack.imgur.com/IbNqz.png)

以下是控制台检查元素部分中显示的所有 CSS：

```
media="all"
.navbar .brand {
float: left;
padding: 20px 5px 5px 0px;
margin-left: -20px;
font-size: 35px;
font-weight: 200;
color: white;
text-shadow: 0 0px 0;
}
localhostmedia="all"
.navbar .brand {
float: left;
display: block;
padding: 10px 20px 10px;
margin-left: -20px;
font-size: 20px;
font-weight: 200;
color: #777777;
text-shadow: 0 1px 0 #ffffff;
}
localhostmedia="all"
a:visited {
color: #666;
}
localhostmedia="all"
a {
color: #000;
}
localhostmedia="all"
a {
color: #0088cc;
text-decoration: none;
}
user agent stylesheeta:-webkit-any-link {
color: -webkit-link;
text-decoration: underline;
cursor: auto;
}
Inherited from div.navbar-inner
localhostmedia="all"
.navbar-inner {
color: #fff !important;
text-shadow: 0 -1px 0 rgba(0, 0, 0, 0);
}
Inherited from body.main
localhostmedia="all"
body {
color: #333;
font-family: verdana, arial, helvetica, sans-serif;
font-size: 13px;
line-height: 18px;
}
localhostmedia="all"
body {
font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 20px;
color: #333333;
}
Inherited from html
localhostmedia="all"
html {
font-size: 100%; 
```

这是导航栏所属的部分视图：

```
<div class="navbar navbar-top">
  <div class="navbar-inner">
    <div class="container-fluid">
     <a class="brand" href=<%= root_path %>>Visual Haggard (beta)</a>
        <ul class="nav">
          <li><a href= <%= illustrations_path %>>Illustrations</a></li>
          <li><a href= <%= novels_path %>>Novels</a></li>
          <% if current_user %>
            <li><a href= <%= editions_path %>>Editions</a></li>
          <% end %>
        </ul>

        <%= form_tag search_path, :method => 'get', :class => "form-search", :style => "height:24px;" do %>
          <div class="input-append" style="padding-top:5px;"> 
            <%= text_field_tag :search, params[:search], :class=>"span3 watermark search-query", :placeholder => "novel, illustration, or tag..."%>
            <button class="btn" type="submit"><i class="icon-search"></i></button>     
          </div>
        <% end %>                      
    </div> 
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:49:21.103

大多数浏览器（至少是 Mac 上的 Safari 和 Chrome）在您右键单击时都有“检查元素”选项。从那里，您可以看到应用于特定元素的所有 css 样式，然后在您的自定义样式表中覆盖它。发布视图和 css 将允许更具体的响应。

在 css 中有这一点：

```
a {
color: #000;
} 
```

它可能已被覆盖，但它可能优先于 :hover？我会尝试将 a 颜色指定为透明的，看看是否有区别。可能使用：

```
.navbar .brand:hover {
  color: transparent;
} 
```

对不起，如果它不正确，我绝不是 CSS 专家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:47:49.943

我建议创建一个样式表文件来覆盖`brand`该类。在[Bootstrap 的文档](http://twitter.github.io/bootstrap/components.html#navbar)中，您可以找到所有类的默认值。

# ssrs-2008 - 排除 SSRS 报告的“日期/时间”参数中的时间

> ID：16158469
> 
> 赞同：9
> 
> 时间：2013-04-22T23:34:52.733
> 
> 标签：ssrs-2008, reporting-services

在我的 SSRS 报告中，我希望允许用户指定一个日期（用于过滤报告中的数据）。当我这样做时，参数还包括时间。是否可以只允许用户选择日期而不显示时间？我也可以给它一个当前日期的默认值吗？

我已经应用于报告参数的步骤：

1.  将参数设置为“日期/时间”数据类型。
2.  将此参数的默认值设置为`=Now`。

当我这样做时，报告参数会告诉我：

```
23/04/2013 00:31:22 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-23T01:20:24.113

而不是使用`=Now()`你可以使用`=Today()`which 提供当前日期而没有时间。如果你从数据库中获取数据，那么你可以

```
=Format(Fields!YourDateColumn.Value,"dd/MM/yyyy") 
```

检查此[MSDN](http://msdn.microsoft.com/en-us/library/ms157328%28v=sql.90%29.aspx)文章以使用表达式和格式化日期时间列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-09T20:47:57.813

[![在此处输入图像描述](https://i.stack.imgur.com/Qn4Tq.png)](https://i.stack.imgur.com/Qn4Tq.png)取决于您使用的 IDE 类型，您可能无法使用其中一些建议的方法。这总是对我有用：设置参数类型=文本而不是日期/时间，然后在查询时将您的日期转换如下`SELECT Value=Convert(varchar(20),payperiod,101`：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T00:25:07.187

我希望这有帮助。我的实现方式是：

```
=DateSerial(Year(Now), Month(Now), Day(Now)) 
```

[![SSRS 默认日期参数](https://i.stack.imgur.com/4uv9x.png)](https://i.stack.imgur.com/4uv9x.png)

谢谢你，

# html - 在 iframe 中打开的下拉选项

> ID：16158473
> 
> 赞同：3
> 
> 时间：2013-04-22T23:35:15.047
> 
> 标签：html, iframe, drop-down-menu

我目前在 iframe 左侧有一个链接列表，有点像菜单。但是，我很快意识到这不是一个非常可扩展的选项。我想要做的是创建一个简单的下拉菜单，其中包含我的所有链接，并让它们仍然在我的 iframe 中打开。

我的链接之一的示例。

```
<li>
  <a href="http://pncw0787:24543/SoA/Team%20Folders/NOC/noc%20tool%20html%20pages/CS1000%20Name%20Change.htm"
    target="iframe1">CS1000 Name Change</a>
</li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:09:18.060

如果您想打开框架中的**所有**链接，那么您应该在文档 HEAD 部分中说明这一事实

```
<head>
  <base target="iframe1">
</head> 
```

我认为这就足够了。

# 更新

好的，这是另一种方式。

首先是您的链接样式，我只是使用了这些样式，但毫无疑问您有自己的样式。

```
.menulink
{ 
  color: #0000FF;
  cursor: pointer;
}

.menulink:hover
{ 
  color: #FF0000;
  cursor: pointer;
} 
```

接下来是在 IFrame 中打开链接的代码

```
<script type="text/vbscript" id="OpenInMyFrame">
  ' <!--
  Function OpenInMyFrame(LinkUrl)
    window.document.getElementById("MyFrame1").src = LinkUrl
  End Function
  ' -->
</script> 
```

最后你的链接和 iFrame

```
<ul id="MyMenu">
  <li class="menulink" onclick="OpenInMyFrame('http://www.bbc.co.uk')">Menu1</li>
  <li class="menulink" onclick="OpenInMyFrame('http://www.google.co.uk')">Menu2</li>
  <li class="menulink" onclick="OpenInMyFrame('http://www.microsoft.co.uk')">Menu3</li>
  <li class="menulink" onclick="OpenInMyFrame('http://www.ibm.co.uk')">Menu4</li>
</ul>
<iframe id="MyFrame1" name="MyFrame1" style="width: 1040px; height: 682px" src="Default.aspx">

</iframe>

<select id="MyMenu">
  <option class="menulink" onclick="OpenInMyFrame('http://www.bbc.co.uk')">Menu1</option>
  <option class="menulink" onclick="OpenInMyFrame('http://www.google.co.uk')">Menu2</option>
  <option class="menulink" onclick="OpenInMyFrame('http://www.microsoft.co.uk')">Menu3</option>
  <option class="menulink" onclick="OpenInMyFrame('http://www.ibm.co.uk')">Menu4</option>
</select> 
```

# 更新二

```
<script type="text/javascript">
  //<!--
  function OpenInMyFrame(var1)
  {
    window.document.getElementById("MyFrame1").src = var1;
  }
  //-->
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:48:49.783

先生，谢谢您的帮助。我能够让它与以下内容一起工作。我只需要更改 javascript 以满足我的需要。太感谢了 ！！

```
 <script language="javascript" type="text/javascript">
function jump(form) {
var myindex=form.menu.selectedIndex
if (form.menu.options[myindex].value != "0") 
{
window.open(form.menu.options[myindex].value, 
target="iframe1");
}
}
//-->
</script>

<form name="lissamenu2" ACTION=URI>
<select name="menu" onchange="jump(this.form)">
<option value="0">Select</option>   
<option value="0"></option>   (this adds a space).
<option value="http://pncw0787:24543/SoA/Team%20Folders/NOC/noc%20tool%20html%20pages/CS1000%20Name%20Change.htm">CS1000 Name Change</option>
</select>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T23:42:58.467

像这样的东西

```
<select id='selectLinks'>
    <option value='http://pncw0787:24543/SoA/Team%20Folders/NOC/noc%20tool%20html%20pages/CS1000%20Name%20Change.htm'>CS1000 Name Change</option>
    <option value='http://www.officedepot.com'>Go to Office Depot.com</option>
</select> 
```

然后你需要一些javascript来控制它。我推荐 jQuery 库，因为它使这变得简单。

**编辑：**更新我的例子实际上是正确的。还发现google不喜欢在iframe中打开，所以看起来它不起作用但它只是google很痛苦

```
<script type='text/javascript'>
    $(document).ready(function(){
        $("#selectLink").on("change", function(){
            var link = $(this).find("option:selected").val();
            $("#iframe1").attr("src", link);
         });                        

     });
 </script> 
```

这不是我的想法，我一直在喝这可能不准确

谢谢

# javascript - AngularJS：$watch 未在更改时触发（包含页面的 $scope 问题）

> ID：16158474
> 
> 赞同：3
> 
> 时间：2013-04-22T23:35:22.407
> 
> 标签：javascript, angularjs

**html:**

```
Filter: 
<input type="radio" ng-model="Type" value="Rear"> Rear
<input type="radio" ng-model="Type" value="Front"> Front
<br>
Select:
<name-value-select entry="entry" field="axleType" options="filterTypes"></name-value-select> 
```

**指示：**

```
 .directive('nameValueSelect', function () {
    return {
    restrict: "E",
    scope: {
        entry: "=",
        field: "@",
        options: "=",
        onInputChange: "&"
    },
    controller: function ($scope) {

        $scope.onChange = function () {
            console.log("selected changed");
            $scope.entry.type = $scope.option.value;
            $scope.onInputChange();
        };

        var getItemForValue = function (value) {
            var item = null;
            $scope.options.forEach(function (_option) {
                if (_option.value == value) {
                    item = _option;
                }
            });
            return item;
        };

        $scope.$watch("entry", function () {
            console.log("entry changed");
            $scope.option = getItemForValue($scope.entry[$scope.field]);
        }, true);

    },
    template: '<select ng-model="option" ng-options="o.Description for o in options" ng-change="onChange()"><option value="" selected="selected">Please Select </option></select>'

};  }) 
```

**控制器：**

```
$scope.Description = '';
$scope.entry = {Description: ''};
$scope.Type = 'Front';
$scope.entry.type = '';

$scope.$watch('Type', function (Type) {
    $scope.filterTypes = [];
    $scope.axleTypes = new API.GetAxleTypes(function () {
        angular.forEach($scope.axleTypes, function(axleType) {
            if (axleType.Type == Type) {
                this.push(axleType);
            }
            // if(!$scope.$$phase) $scope.$digest(); // tried this, does not have any affect
    }, $scope.filterTypes); // '}, $scope.filterTypes, true)'--> did nothing for me here     
}); 
    $scope.filterTypes.sort(function (a, b) {
        return a.Description.localeCompare(b.Description);
    });
}); // '}, true)' --> did nothing for me here 
```

**问题：**

自定义选择控件最初会填充类型为“Front”的项目，如果我将 Rear 设为默认值，也会填充“Rear”。

**但是，在单选按钮之间切换时，不会调用监视功能，并且选择不会填充满足新选择的过滤器类型的项目。**

///////////////////////////////////////// //// **缩小问题范围：** ////////////////////////////////// ////////////

将其移至独立项目时，我发现上面的代码有效:-(

**这是原始的 select NOT 作为自定义指令：**

```
 <select ng-model="$parent.selectedFrontAxle" ng-options="axleType.Description for axleType in axleTypes | filterByType: 'Front' | orderBy:'Description'"  id="frontAxles" class="formRequire" required>            
        <option value="" selected>Select Axle Type ..</option>  
    </select> 
```

**这是作为自定义指令的选择控件：**

```
 <name-value-select   entry="entry" field="axleType" options="filterTypes"></name-value-select> 
```

显然这是问题所在：**“ng-model="$parent.selectedFrontAxle"**

如果我采用指令“name-value-select”并将其移动到父页面，而不是包含语句，它就可以工作。

但这不是我想要的。所以我需要把它留在包含页面中。

但是，如果我使用**ng-model="$parent.selectedFrontAxle"**并将其添加到包含页面上的任何元素，则没有任何效果。

任何没有**ng-model="$parent.selectedFrontAxle"**，仍然没有任何作用。

我可以看到问题是范围，但我不知道如何纠正它。

啊！！！仍然没有解决办法。

//
//
////////////////////////////////////// ////////////// **马克·拉杰科克** /////////////////////////// //////////////////////////

一如既往地感谢您的帮助。虽然，当我说我有希望代码进行预过滤而不是用户的情况时，我认为我没有明确说明第 2 点。不过我想通了。因此，对于希望通过指令抽象出控件的任何人，并且在这种情况下，过滤过程由用户和代码执行，这里是 plunker 解决方案：

**[http://plnkr.co/edit/tnXgPKADfr5Okvj8oV2S?p=preview](http://plnkr.co/edit/tnXgPKADfr5Okvj8oV2S?p=preview)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T22:10:55.770

在[这个 plunker](http://plnkr.co/edit/q7NwuUDsFUXWcsv4NCaM?p=preview)中，我重新编写了代码以允许用户选择“后”或“前”，并且选择列表将动态更新。所选值`$scope.selected.item`在 MainCtrl 范围内可用。（我删除的指令中有很多不必要的代码。使用 ng-model 时不需要 onChange 处理程序。）

```
<name-value-select selected-item="selected.item" options="filterTypes">
</name-value-select>

app.directive('nameValueSelect', function () {
    return {
        restrict: "E",
        scope: {
            selectedItem: "=",
            options: '='
        },
        template: ... 
```

由于 ng-include 创建了一个子范围，所有原始属性都转换为对象属性，因此 JavaScript 原型继承将按预期工作（即，当值更改时，MainCtrl 中定义的 $scope 对象会更改，而不是新的原始属性在本地范围内创建）。

我相信上面提到的 plunker 将满足您的“第 1 点”。

我现在将考虑为“第 2 点”创建一个 plunker ...（我会在更新此答案时添加评论）。

* * *

[这个 plunker](http://plnkr.co/edit/V841HRwdiumD18gX7N0N?p=preview)过滤指令中的选择列表：

```
<name-value-select selected-item="selected.item" choice="choice.type"
 options="myTypes"></name-value-select>

app.directive('nameValueSelect', function () {
    return {
        restrict: "E",
        scope: {
            selectedItem: "=",
            choice:  "=",
            options: "=",
        },
        controller: function($scope)  {
          $scope.$watch('choice', function (selectedType) {
            $scope.selectedItem = '';  // clear selection
            $scope.filterTypes = [];
            angular.forEach($scope.options, function (type) {
              if (type.Type === selectedType) {
                this.push(type);
               }
            }, $scope.filterTypes);
            $scope.filterTypes.sort(function (a, b) {
              return a.Description.localeCompare(b.Description);
            });
          });
        },
        template: '<select ng-model="selectedItem" ' +
         'ng-options="o.Description for o in filterTypes">' +
         '<option value="" selected="selected">Please Select</option>' +
         '</select>'
    };
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T05:41:06.507

我不完全理解您的要求，但我只是假设您想根据单选按钮组的值动态更改选择的内容。选择被过滤和排序，您可以选择要显示的数据字段。

你可以看看这个[Plunker](http://plnkr.co/edit/ZLNWHvVDyyxqwQaENarO?p=preview)，它包含一个经过少量修改的演示。

**HTML**

```
Filter: 
<input type="radio" ng-model="filter.type" value="rear"> Rear
<input type="radio" ng-model="filter.type" value="front"> Front
<br />
Field:
<select ng-model="filter.field" ng-options="item for item in fields"></select>
<br />
Select:
<select ng-model="entry" ng-options="item[filter.field] for item in entries | filter:type=filter.type | orderBy:filter.field">
  <option value="">Default</option>
</select>
<br />
Selected: <span>{{entry}}</span>

<h2>Alternative</h2>
Filter: <span>{{filter}}</span>
<br />
<select ng-model="altentry" ng-options="item[filter.field] for item in altentries | orderBy:filter.field">
  <option value="">Default</option>
</select>
<br />
Selected: <span>{{altentry}}</span> 
```

**JS**

```
var app = angular.module('plunker', []);

app.controller('MainCtrl', function($scope) {
  $scope.name = 'World';

  /* Default filter values */
  $scope.filter = {
    type: 'rear',
    field: 'name'
  };

  /* List of fields */
  $scope.fields = [
    "id", "type", "name"
  ];

  /* Data coming from an API */
  $scope.entries = [
    {"id":1, "type":"rear", "name":"Rear Part 01"},
    {"id":2, "type":"rear", "name":"Rear Part 03"},
    {"id":3, "type":"rear", "name":"Rear Part 05"},
    {"id":4, "type":"rear", "name":"Rear Part 02"},
    {"id":5, "type":"rear", "name":"Rear Part 04"},
    {"id":6, "type":"front", "name":"Front Part 01"},
    {"id":7, "type":"front", "name":"Front Part 03"},
    {"id":8, "type":"front", "name":"Front Part 05"},
    {"id":9, "type":"front", "name":"Front Part 02"},
    {"id":10, "type":"front", "name":"Front Part 04"},
  ];

  /* Simulate different ajax return */
  $scope.$watch('filter.type', function(newval, oldval) {
    if (newval || newval !== oldval) {
      $scope.altentries = [];
      angular.forEach($scope.entries, function(v,k) {
        if (v.type === $scope.filter.type) {
          $scope.altentries.push(v);
        }
      });
    }
  });

  /* Monitoring any selected value */
  $scope.$watch('entry', function(newval, oldval) {
    console.log('entry:', oldval, newval);
  }, true);

  $scope.$watch('altentry', function(newval, oldval) {
    console.log('altentry:', oldval, newval);
  }, true);

}); 
```

# sql-server - 在日期内设置参数

> ID：16158475
> 
> 赞同：1
> 
> 时间：2013-04-22T23:35:39.940
> 
> 标签：sql-server, datetime

我正在 SQL Server 中编写一个应该插入一些数据（DUH）的脚本。

我的问题是日期的 MONTH（粗体字）每次都必须设置为不同的月份。

它应该类似于“2011-@month-27”，但这当然行不通。

这是脚本：

```
USE xxx

DECLARE @Month int;
DECLARE @DateToCopy datetime;

SET **@Month = 09**  -- The month
SET @DateToCopy = CONVERT(DATETIME, '2011-10-27 00:00:00', 102)  -- The date to copy

BEGIN TRANSACTION

INSERT INTO Z_T_CurrencyRate_Test (CurrencyID, RateDate, RateToMain, RateToSec, CurrencyRate)
    SELECT CurrencyID, **CONVERT(DATETIME, '2011-10-27 00:00:00', 102)**, RateToMain, RateToSec, CurrencyRate 
    FROM T_CurrencyRate
    WHERE (RateDate = @DateToCopy)

COMMIT TRANSACTION 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:48:41.943

如果我正确理解了您的问题，您希望指定日期/时间的*月份*部分，同时保持*日期*和*年份*相同。

这是一种将当前月份值修改为新值的方法：

```
DATEADD(month, -DATEPART(month, RateDate) + @Month, RateDate) 
```

上面的代码将*减去*当前月份，并*添加*新的月份；基本上取代了日期/时间的*月份*部分。请注意，这`RateDate`是您希望更改月份的列/变量。

上面使用的函数是[`DATEADD`](http://msdn.microsoft.com/en-us/library/ms186819.aspx)（将整数值添加/减去日期/时间的特定部分；月、日、年、小时等）和[`DATEPART`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)（提取特定的日期/时间部分；月、日、年等） .)。

* * *

根据[下面的评论](https://stackoverflow.com/questions/16158475/setting-a-parameter-inside-a-date/16158596?noredirect=1#comment23130221_16158596)，以下是插入该月每一天的信息的方法：

```
USE xxx

DECLARE @DateToCopy datetime;
DECLARE @Month int;
DECLARE @LastDay int;
DECLARE @CurrentDay int;

SET @DateToCopy = CONVERT(DATETIME, '2011-10-27 00:00:00', 102);  -- The date to copy
SET @Month = 09;  -- The month
SET @LastDay = DATEPART(day, DATEADD(day, -DATEPART(day, @DateToCopy), DATEADD(month, 1, @DateToCopy)));

BEGIN TRANSACTION

SET @CurrentDay = 1;
WHILE (@CurrentDay <= @Lastday)
BEGIN
    INSERT INTO Z_T_CurrencyRate_Test (CurrencyID, RateDate, RateToMain, RateToSec, CurrencyRate)
    SELECT
        CurrencyID,
        DATEADD(month, -DATEPART(month, RateDate) + @Month, DATEADD(day, -DATEPART(day, RateDate) + @CurrentDay, RateDate)), -- important bit!
        RateToMain,
        RateToSec,
        CurrencyRate
    FROM T_CurrencyRate
    WHERE (RateDate = @DateToCopy);

    SET @CurrentDay = @CurrentDay + 1;
END

COMMIT TRANSACTION 
```

**这是第一个新的混乱会做的事情：**

```
SET @LastDay = DATEPART(
                         day,
                         DATEADD(
                                  day,
                                  -DATEPART(day, @DateToCopy),
                                  DATEADD(month, 1, @DateToCopy)
                                )
                       ); 
```

从左到右（但是，请注意，由于嵌套，计算是向后发生的）：

1.  `DATEPART(day, ...)`将提取计算的日期（这将是该月的最后一天）。
2.  `DATEADD(day, -DATEPART(day, @DateToCopy), ...)`减去当前天数。
    *   例如，`2011-10-27`- `27`= `2011-09-30`。
3.  `DATEADD(month, 1, @DateToCopy)`直接跳到下个月，执行 #2 的减法运算。

**第二个新混乱：**

```
DATEADD(
         month,
         -DATEPART(month, RateDate) + @Month,
         DATEADD(
                  day,
                  -DATEPART(day, RateDate) + @CurrentDay,
                  RateDate
                )
       ), -- important bit! 
```

同样，从左到右，并向后计算（由于嵌套）：

1.  `DATEADD(month, ..., ...)`将从中替换月份`RateDate`。
2.  `-DATEPART(month, RateDate) + @Month`是*计算*的替换月份。
3.  `DATEADD(day, ..., RateDate)`将替换从`RateDate`.
4.  `-DATEPART(day, RateDate) + @CurrentDay`是*计算出*的更换日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:15:36.270

您只是希望您的**月份**每次都不同**。**您只需要执行以下操作：

```
SELECT CurrencyID, 
CONVERT(DATETIME, '2011-'+ @Month+'-27 00:00:00', 102), RateToMain, 
RateToSec, CurrencyRate 
FROM T_CurrencyRate 
```

你只需要`concatenate`.

# python - NameError...全局未定义

> ID：16158480
> 
> 赞同：0
> 
> 时间：2013-04-22T23:36:22.363
> 
> 标签：python, global-variables, defined

我在处理这段代码时遇到了问题。尽管名称错误似乎很普遍，但我无法通过搜索找到解决方法。这是代码...

```
def fmp_sel():
    with open ('MonPlotDb.csv', 'rU') as csvfile: 
            next(csvfile, None)
            fmpList = csv.reader(csvfile, delimiter=',', dialect=csv.excel_tab)
            for item in enumerate(fmpList):
                    print "[%d] %s" % (item)
    while True:
        try:
            in_Sel = raw_input(('''Choose from list or 'q' to quit:'''))                                               
             if in_Sel == 'q':
                print 'Quit?'                                           
                conf = raw_input('Really? (y or n)...')    
                if conf == 'y':                                              
                    print 'Seeya!'                                        
                    break
                else:
                    continue                                                        
             plotOrig = DataPlotLoc[int(in_Sel) + 1]                              
            print 'You selected', plotOrig[1]                
            break
        except (ValueError, IndexError):
            print 'Error: Try again' 
```

和追溯....

```
File "E:\FireRegDb\Rec_2012\dblist_outonly.py", line 28, in fmp_sel  
plotOrig = DataPlotLoc[int(in_Sel) + 1]                             
NameError: global name 'DataPlotLoc' is not defined 
```

这个函数是从 main() 调用的，但我不明白为什么“DataPlotLoc”是一个全局名称，因为它在这个函数中。无论哪种方式，我认为我缺少一条线来定义它，但是如何以及在哪里，我不知道。我很想得到一些帮助。

编辑：只是为了添加更多信息..'DataPlotLoc'是列表插入代码时的名称，即。DataPlotLoc=[['a', 'b', 'c',....]] 并且它起作用了。线 plotOrig = DataPlotLoc[int(in_Sel) + 1] 指的是这个列表，但显然它现在正在被 csv.reader 读入，所以现在我不确定如何分配这个变量。我假设在确认用户是否输入“q”之后，我仍然需要它接受一个整数，并且 +1 是添加到输入的数字上，以便它与从列表中选择的相应行项目的正确索引号对齐。对不起，如果这有点令人困惑，但我自己有点困惑......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:41:01.943

好吧，正如错误消息所说，您`DataPlotLoc`在定义它之前正在使用它。如果您搜索您的代码，您会发现它从未在任何地方定义过。在不知道您的意思的情况下，无法真正回答更多。

Python 假定您的意思是该名称的全局变量，因为您从未为它分配任何内容，这会使它成为局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:51:57.460

Python 之所以这么说，是`global name ... not defined`因为它在函数体中看不到任何赋值`DataPlotLoc`，所以它假定它必须是一个全局变量，并且无法在那里找到它。（请参阅下面的 abarnert 评论）

从您的代码来看，我想您想`DataPlotLoc`包含从中提取的信息`MonPlotDb.csv`，在这种情况下，您需要做两件事：

(A) 初始化`DataPlotLoc`

```
def fmp_sel():
    DataPlotLoc = []  # <-----------------!!!!
    with open ('MonPlotDb.csv', 'rU') as csvfile: 
```

`DataPlotLoc`(B)在循环和打印选项时将值附加到。

```
 next(csvfile, None)
    fmpList = csv.reader(csvfile, delimiter=',', dialect=csv.excel_tab)
    for item in enumerate(fmpList):
        DataPlotLoc.append(item[1])  # <---------!!!
        print "[%d] %s" % (item) 
```

我不确定为什么要在 行中添加一个`plotOrig = DataPlotLoc[int(in_Sel) + 1]`，并且我认为您可以将`csv.reader`行简化为以下内容`csv.reader(csvfile)`（我认为带逗号的 excel 是默认行为）

**编辑**：要从 CSV 的每一行中仅提取一列，请将 B 部分中的代码更改为如下所示：

```
 next(csvfile, None)
    fmpList = csv.reader(csvfile, delimiter=',', dialect=csv.excel_tab)
    for item in enumerate(fmpList):
        i, data = item  # enumerate returns tuples of the form (i, data)
        vals = (i, data[1])  # <----- put in the proper index of the column
        DataPlotLoc.append(vals)
        print "[%d] %s" % vals  # <--- assuming  you want to change the print as well 
```

# jquery - 如何合并具有相同类别但不同子项的列表部分，Jquery

> ID：16158490
> 
> 赞同：1
> 
> 时间：2013-04-22T23:37:14.207
> 
> 标签：jquery, node.js, list, mongoose, dust.js

我正在使用 Node.js 和 Dust.js 模板，这些模板通过 Mongoose 使用来自 MongoDB 的值填充分层列表。在数据到达模板之前尝试过滤数据显然是理想的，但我发现很少能帮助我弄清楚如何做到这一点，所以我在客户端通过 jQuery 进行。这段代码是一个严重的黑客，所以请原谅！但是，至少对于第一级合并，它是有效的。

我的 Mongoose 数据填充了按类别和子类别排列的卡片组的深入分层菜单（HTML 中的简单 ul li 类型列表结构）。并非每个牌组都有一个子类别，或相同数量的子类别。这些都嵌入在每个平台中，因为我在这里真正接受了 noSQL 的想法！但是来自 MySQL 的这绝对不是在 Mongoose 中那么容易安排的。

因此，当类别和子类别嵌入到每个卡片组的 JSON 中时，我需要合并所有类别，然后将子类别 1 一个一个地合并，这样卡片组就会进入适当的位置，以便快速导航到卡片组的数据。

我今天编写的代码（正如我所说的那样非常可怕！）将合并列表的顶层。运行此代码后，对于具有重复项的顶级类别，将它们合并，并保留所有子项。

我的问题：我想大大改进这段代码。现在我正在考虑为我的 4 或 5 个级别中的每一个创建一个这样的函数，这以一种我不想被限制的方式限制我（如果一个主题真的需要 6 个级别怎么办？）具体来说，我我喜欢：

1.  一种合并列表部分的方法，包括子项，递归地查看下一级是否有重复的主题。

2.  从底层开始合并是否明智？

正如我所说，在渲染模板之前过滤数据可能会更好，但我还没有尝试过考虑这一点。

这是我的代码：

```
function mergeLevel1() {

  var count = 0;  
  var subcatText;
  var subcatTextCurrent;

  $.each($("ul.rootlist > li").not("ul li ul a"), function() {
    var firstNode = $(this)
    var nodeText = $("a:first", this).text();
    //toastr.warning('nodeText is ' + nodeText)

    $.each($("ul.rootlist > li").not("ul li ul a").not(firstNode), function() {    
      var siblingNode = $(this)
      var siblingText = $("a:first", this).text();
      //toastr.info('running sibling,  siblingText is ' + siblingText)    

      if (nodeText == siblingText) {

        toastr.info('i found a duplicate for ' + siblingText)   
        siblingNode.children().find('li').each(function(){
          if (count == 0) {
            subcatText = $(this).text(); 
          }
          subcatTextCurrent = $(this).text(); 
          count++       

          toastr.warning("found children of a duplicate " + $(this).text())
          //var targetNode = $("a:first", theNode).text()

          toastr.info('try appending to ' + '#'+siblingText+'_ul'+'_'+subcatText)
          if (count > 1) {
            toastr.error('moving node!')
            $(this).appendTo('#'+siblingText+'_ul_'+subcatText);

          }
        })
      }
    });

    removeEmpties();    

  });

  // end merge level 1
}

function removeEmpties() {
$('ul:empty').parent().remove();
} 
```

# php - MySQL：有关 SQL 语法的异常错误

> ID：16158501
> 
> 赞同：-2
> 
> 时间：2013-04-22T23:38:10.713
> 
> 标签：php, mysql, sql

出于某种原因，我的广告功能有点问题。嗯，每次我按下添加表单上的提交按钮时，我都会用简单的英文收到这个错误..

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在“此处的内容，此处的内容”附近使用正确的语法，使其看起来像可读的英语。许多桌面 ' 在第 2 行

现在我并没有完全说 mysql，所以这对我来说只是个笑话。我想知道你们中的任何人是否可以为我理解它。有问题的代码以 ** 突出显示并以 ** 结尾。此外，所有 strtolower/htmlentities/strip_tags 都是我第一次尝试防止 sql 注入和 xss。对此的任何帮助也会很酷。提前致谢。

```
 $error = array();

//revalidate form in case javascript is disabled
if(isset($_POST['add'])){
    $title = strtolower(htmlentities(strip_tags($_POST['title'])));
    $price = strtolower(htmlentities(strip_tags($_POST['price'])));
    $location = strtolower(htmlentities(strip_tags($_POST['location'])));
    $cat = strtolower(htmlentities(strip_tags($_POST['list_one'])));
    $sub = strtolower(htmlentities(strip_tags($_POST['list_two'])));
    $description = htmlentities(strip_tags($_POST['description']));
    $email = strtolower(htmlentities(strip_tags($_POST['email'])));
    $password = strtolower(htmlentities(strip_tags($_POST['password'])));

    if(empty($title) || empty($price) || empty($location) || strcmp($cat,'none') == 0 
        || strcmp($sub,'none') == 0 || empty($description) || empty($email) || empty ($password)){
        $error[] = 'Please fill in the form!';
    }else if(!is_numeric($price)){
        $error[] = 'Price must be numeric!';
    }else if(!preg_match('/^[a-zA-Z0-9_]+$/', $title)){
        $error[] = 'Title must be alphanumeric!';
    }else if(!preg_match('/^[a-zA-Z]+$/', $location)){
        $error[] = 'Location must be characters only!';
    }else if(strlen($location) > 17){
        $error[] = 'Your location may not be more than 17 characters!';
    }else if(!preg_match('/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/',$email)){
        $error[] = 'Your email is not in the correct format!';
    }else if(strlen($password) < 6){
        $error[] = 'Your password must be atleast 6 characters long!';
    }else{
                //no errors. check email and password match

        $hashPass = md5($password);

        $query_user = mysql_query("SELECT * FROM users WHERE email='$email'") or die(mysql_error());

        if(mysql_num_rows($query_user) != 0){
            while($row = mysql_fetch_array($query_user)){
                $user_id = $row['id'];
                $pass = $row['password'];
            }

            if(strcmp($hashPass,$pass) == 0){
                **$insert_ad = mysql_query("INSERT INTO ads(id,user_id,title,price,location,category,sub_category,description,dateCreated)
                    VALUES('','$user_id','$title','$price','$location','$cat','$sub','$description',CURRENT_DATE())") or die(mysql_error());**
            }else{
                $error[] = 'Your password didn\'t match the password in our system';
            }
        }else{
            $insert_user = mysql_query("INSERT INTO users(id, email, password, vote_count) VALUES ('','$email','$hashPass', 0)") or die(mysql_error());
            $user_id = mysql_insert_id();
            **$insert_ad = mysql_query("INSERT INTO ads(id,user_id,title,price,location,category,sub_category,description, dateCreated)
                    VALUES ('', '$user_id', '$title', '$price', '$location', '$cat', '$sub', '$description', CURRENT_DATE())") or die(mysql_error());**
        }
    }

    if(!empty($error)){
        foreach($error as $key => $values){
            $error_message = "$values";
        }
        header('Location: add.php?error_with_add'.urlencode($error_message));
        exit();
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:56:25.363

您收到该错误的主要原因是您没有转义引号。例如，如果没有转义，这就是它的样子：

```
$query = "INSERT INTO foo (something) VALUES ('I'm really interested in coding here.')"; 
```

请注意单引号是如何在 I 后面结束的。

但是，当您使用 、或 MySQLi 或 PDO 转义该值时`mysql_real_escape_string`，它会变成这样：

```
$query = "INSERT INTO foo (something) VALUES ('I\'m really interested in coding here.')"; 
```

而且，没有显示错误，因为引号被转义了。

# css - 自 2013 年起，IE8 的响应式设计范围是否值得考虑？

> ID：16158502
> 
> 赞同：8
> 
> 时间：2013-04-22T23:38:16.670
> 
> 标签：css, internet-explorer-8, responsive-design, polyfills

我仍然在这里看到与为 IE8 或上帝保佑 IE7 进行响应式设计有关的问题。

由于缺乏对 Windows 相关设备的了解，我的直接想法是，由于今天仍然运行 IE8 的移动设备数量微不足道，因此不值得为 IE8 实施响应式设计。如果 IE8 剩余浏览器份额的 95% 以上是仅在具有安全假定的 1024+ 屏幕宽度的桌面上运行。

如果数量仍然相关，哪个移动平台仍然使用 IE8 浏览器，这将需要或证明对它们的响应式设计方法是必要的。请分享有用的相关链接。

PS：上下文仅使用标准模式，不包括在兼容性视图或怪癖模式下使用IE。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T05:33:25.380

因此，经过调查，我将用一些我正在寻找的相关统计数据来回答我自己的问题：

据我所知，没有已知的活动平板电脑或手机使用 IE8。事件最早的Windows Phones使用IE9引擎。因此，不包括笔记本电脑，“智能”移动设备不使用 IE8。

根据 w3counter、statcounter 和 3 个客户端站点的分析，2013 年 3 月 IE8 浏览器份额（基于美国站点）在 5% 到 11% 之间。平均 8%。

根据我研究的 3 个不同的美国网站，今天使用 800x600 像素或更小的屏幕分辨率的 IE8 用户数量占 IE8 用户群总数的 0.6% 到 1%。与 Jakob Nielsen 去年观察到的趋势一致，即“台式机和笔记本电脑的小屏幕越来越少”下降到 1% 的水平：[http ://www.nngroup.com/articles/computer-screens-getting-bigger /](http://www.nngroup.com/articles/computer-screens-getting-bigger/)

截至今天，这带来了屏幕尺寸为 800x600 或更小的 IE8 用户的平均预期约为 0.05%，如果包括 IE7，则最高为 0.1%；根据 ie6countdown.com 的数据，这低于美国 IE6 的整体使用率，为 0.2%

因此，为了 IE7 和 IE8 用户，IE9 以下的响应式设计兼容性要求只有在不需要任何后续努力的情况下才值得。

如果包含媒体查询 polyfill 或使用 Bootstrap 使其立即工作，那就太好了。但绝对不值得多花几个小时来处理大量潜在的错误（谷歌搜索“bootstrap ie8”就说明了这一点），就像不再值得让网站完全兼容 IE6 一样。

只要该网站在 IE8 中使用固定设计工作，这可能更容易实现，而不是试图痛苦地使其对 IE8/IE7 做出响应，到今天为止就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:27:38.740

我会的，但只是勉强。我不知道数字是多少，但我敢肯定仍然有相当多的笔记本电脑在野外仍然运行 Windows XP 和/或使用 IE7/8。让媒体查询与旧 IE 一起工作的问题的一个简单解决方案是[css3-mediaqueries.js](https://code.google.com/p/css3-mediaqueries-js/)。这是一个使媒体查询适用于所有浏览器的 polyfill。您可以使用条件注释将其包含在您的网站中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T22:38:55.090

简短回答：取决于您的要求

长答案：当我阅读了很多关于响应式设计以及评论中提到的两本书时。我会这样回答你的问题。响应式设计（在我的理解中）基本上与移动本身无关。它实际上更像是您的页面“响应”您的用户/客户用来浏览您的页面的内容。我知道其中一些方面在互联网背后的理念中有着非常深厚的根源，比如信息交换。盲人也应该得到一个可访问的网络，即使这与 CSS 无关，它仍然与响应式网络有关我的意见。

所以这个问题应该更像是——当涉及到响应式网站时，我们应该在多大程度上适应——而且可能没有真正的答案。从一个新的响应式（移动优先）网页开始的最好方法——如果我没记错的话——是构建一个页面，该页面可以在您可能支持的最差功能集下以尽可能低的分辨率工作。在您的情况下，我会在 320x240 屏幕上说 IE8（哇哦.. 另一个问题.. 对于 2015 年显示分辨率为 320x240 的手机而言，响应式设计的范围值得考虑，*例如*）。在超级书呆子粉丝博客的情况下，最低功能集可能是仅支持文本的终端（就像过去的美好时光；）-CSS？那是什么？跨外壳脚本？！Whahoo..).. 虽然花哨的 html5 视频页面也可能根本不需要使用 IE，因为没有剪辑路径，而您的设计完全依赖于此.. 还有连接方面，例如离线网站/不同的速度这可能会起作用。所以响应式设计不仅是我要说的前端，而且也是后端。例如，当没有有效的 http 标头时，uber nerd fanblog http 守护进程发送纯文本，不包含任何代码/标记。

很高兴您已经回答了您的问题并意识到这一切都取决于您的用户群/要求。

这并不是对操作问题的回答，而是对访问者的提示。

@chriz “尽管响应式设计确实针对移动设备。” - 不这么认为.. 几周前，我不得不为 4k+ 智能电视调整我的 css.. 如果您考虑当前的最佳实践，即移动优先逐步增强.. 大多数响应式设计都会在您启动时启动重新获得更多的显示空间并使用在小型移动屏幕上不起作用的东西来增强您的页面.. 响应式设计是让这些移动设备尝试使用所有具有放大/缩小功能的糟糕桌面页面以及所有这些失望的结果不工作的东西..

# android - Android HTML5 的视频编码

> ID：16158503
> 
> 赞同：1
> 
> 时间：2013-04-22T23:38:22.417
> 
> 标签：android, html, video, html5-video, mp4

我已经阅读了很多主题和文章，都包含有关如何在 Android 中为 HTML5 播放编码视频的指针。

无论我如何尝试各种设置，使用手刹或米罗，我仍然有麻烦。

一个例子：

该视频： http: [//mediasvcp5lc0xlx242lz.blob.core.windows.net/baby/wf_android.mp4](http://mediasvcp5lc0xlx242lz.blob.core.windows.net/baby/wf_android.mp4)

工作正常...

该视频使用完全相同的参数编码：http: [//mediasvcp5lc0xlx242lz.blob.core.windows.net/baby/Kia-1.mp4](http://mediasvcp5lc0xlx242lz.blob.core.windows.net/baby/Kia-1.mp4)

..才不是。

任何人都可以指出一些明确的东西来帮助我理解我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:44:34.360

第一个视频有效，因为它已使用 profile 编码`Baseline`，而第二个视频已使用 profile 编码`High`，因此无法在 Android 设备上播放。

它们都以 2.1 级编码，这还可以，但对于您拥有的分辨率和帧速率来说可能过高。如果您的编码器允许，您可以将其降低到 2 级。

尝试使用配置文件对第二个视频进行编码`Baseline`，它应该可以工作。

干杯，

# vb.net - 将 .txt 文件保存为特殊格式

> ID：16158504
> 
> 赞同：1
> 
> 时间：2013-04-22T23:38:32.100
> 
> 标签：vb.net, file, export

我需要知道如何能够`.txt`从我的`Visual Basic 2010`程序中保存文件并将其保存为特殊格式。

我需要它来保存`"monday:email@email.com" & "4/22/2013:email@email.com".`

我该怎么做？

我正在使用 Visual Basic 2010。

还有 2 个列表框也需要像这样保存。`"listbox1info:listbox2info"`.

我需要更新我的程序`ASAP`。

如何实现这一目标？

我的代码是：

```
Public Class Form1
    Dim streamer As IO.StreamReader

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        OpenFileDialog1.ShowDialog()
        ListBox1.Text = OpenFileDialog1.FileName
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        streamer = IO.File.OpenText(ListBox1.Text)
        Dim mystring() As String = streamer.ReadToEnd.Split(vbNewLine)
        ListBox1.Items.AddRange(mystring)
    End Sub

    Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
        OpenFileDialog1.ShowDialog()
        TextBox2.Text = OpenFileDialog1.FileName
    End Sub

    Private Sub Button4_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button4.Click
        streamer = IO.File.OpenText(TextBox2.Text)
        Dim mystring() As String = streamer.ReadToEnd.Split(vbNewLine)
        ListBox2.Items.AddRange(mystring)
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:06:32.007

那个星期一和 email@email.com 来自哪里？取决于你想要什么，相应地调整变量strFileName，比如当天，当前日期，从数据库中提取的动态电子邮件地址等；否则，这会做

```
Dim strFileName As String = ""
Dim strContent As String = ""

strFileName = "monday:email@email.com" & "4/22/2013:email@email.com" & ".txt"
strContent = "whatever you want"

My.Computer.FileSystem.WriteAllText(strFileName, strContent, True) 
```

# java - 接受键盘输入并用于可变事件

> ID：16158511
> 
> 赞同：2
> 
> 时间：2013-04-22T23:38:58.300
> 
> 标签：java, swing, keyboard, user-input, key-bindings

我有一个游戏，它有一艘可以在所有 6 个维度上移动的船。所有的物理工作，但我无法将键盘输入转换为可变输出。我希望 4 个引擎具有可变功率。有没有人有任何捕捉键盘输入的好主意/方法可以用来舒适地设置变量输出？到目前为止，我已经尝试让引擎加速用户按住键的时间越长，但它似乎不能很好地工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:04:19.933

这是一个“真正”的基本示例。

这个概念是，如果你按`1`，它会增加第一个推进器的功率，如果你按`Shift`+ `1`，它会减少它。

钥匙`2`和`3`控制其他推进器同样...

![在此处输入图像描述](https://i.stack.imgur.com/Ev3bz.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.image.BufferedImage;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Thrust {

    public static void main(String[] args) {
        new Thrust();
    }

    public Thrust() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private BufferedImage viper;
        private BufferedImage thrust;
        private BufferedImage maxThrust;

        private float[] power = new float[]{0f, 0f, 0f};

        public TestPane() {
            try {
                viper = ImageIO.read(getClass().getResource("/Viper01.png"));
                thrust = ImageIO.read(getClass().getResource("/ThrusterBurn01.png"));
                maxThrust = ImageIO.read(getClass().getResource("/MaxBurn01.png"));

                InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
                ActionMap am = getActionMap();

                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_1, 0), "Thruster1Up");
                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_1, KeyEvent.SHIFT_DOWN_MASK), "Thruster1Down");
                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_2, 0), "Thruster2Up");
                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_2, KeyEvent.SHIFT_DOWN_MASK), "Thruster2Down");
                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_3, 0), "Thruster3Up");
                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_3, KeyEvent.SHIFT_DOWN_MASK), "Thruster3Down");

                am.put("Thruster1Up", new ThrustAction(0, 0.1f));
                am.put("Thruster1Down", new ThrustAction(0, -0.1f));
                am.put("Thruster2Up", new ThrustAction(1, 0.1f));
                am.put("Thruster2Down", new ThrustAction(1, -0.1f));
                am.put("Thruster3Up", new ThrustAction(2, 0.1f));
                am.put("Thruster3Down", new ThrustAction(2, -0.1f));

            } catch (IOException exp) {
                exp.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(1000, 400);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (viper != null && thrust != null && maxThrust != null) {
                Graphics2D g2d = (Graphics2D) g.create();

                int yOffset = (getHeight() - viper.getHeight()) / 2;

                Point port[] = new Point[]{new Point(574, 111), new Point(576, 159), new Point(574, 210)};
                for (int index = 0; index < 3; index++) {
                    BufferedImage image = thrust;
                    if (power[index] >= 1f) {
                        image = maxThrust;
                    }
                    float progress = Math.min(Math.max(0, power[index]), 1f);
                    int width = image.getWidth();
                    int minWidth = (int)(width * 0.1f);
                    width -= minWidth;
                    width = (int)(width - (width * (1f - progress)));
                    width = Math.max(minWidth, width);
                    int x = port[index].x;
                    int y = yOffset + port[index].y - (image.getHeight()/ 2);
                    image = image.getSubimage(image.getWidth() - width, 0, width, image.getHeight());
                    g2d.drawImage(image, x, y, this);
                }

                int x = 0;
                g2d.drawImage(viper, x, yOffset, this);
                g2d.dispose();
            }
        }

        public class ThrustAction extends AbstractAction {

            private int thruster;
            private float modifer;

            public ThrustAction(int thruster, float modifier) {
                this.thruster = thruster;
                this.modifer = modifier;
            }

            @Override
            public void actionPerformed(ActionEvent e) {
                power[thruster] += modifer;
                power[thruster] = Math.min(Math.max(power[thruster], 0f), 1f);
                repaint();
            }

        }

    }
} 
```

# jquery - 不可知的模式 - 需要推荐 - Bootstrap / Jquery

> ID：16158516
> 
> 赞同：0
> 
> 时间：2013-04-22T23:39:37.527
> 
> 标签：jquery, html, twitter-bootstrap, modal-dialog

我正在尝试使这个模态不可知（假设我有 30 个模态窗口）

HTML：

```
<div class="aaa"> Modal One</div>

<div class="my-modal modal-class">

    <div class="modal-body">
        aaa 1
    </div>

</div>

<div class="aaa"> Modal Two</div>

<div class="my-modal modal-class">

    <div class="modal-body">
        aaa 2
    </div>

</div> 
```

jQuery：

```
 $(".aaa").click(function (e) {
   var thisDiv = $(this).closest("#my-modal").first();

   modalLaunch(thisDiv); / doesn't work - I'm trying to grab next hidden modal after the link is clicked.

   // modalLaunch("my-modal") - works just fine;
}); 
```

代码根据注释编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:50:47.390

尝试这个：

```
var thisDiv = $(this).next(".modal-class").attr('id'); 
```

共享相同元素的元素`id`不是有效的 HTML。modal`id`应该是唯一的，然后这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:18:05.637

它有效，但只是第一次。它会打开所有链接，尽管它只会打开一次。第二次单击它时，它将无法工作，直到您重新启动浏览器。

```
$('.launch-modal').click(function () {
        var thisDiv = $(this).next(".contact-modale");
        console.log("object " + thisDiv);
        modalLaunch(480, 180, thisDiv);
    }); 
```

# python - Pyqt4 - QProgressBar 如何在函数循环处理数据时指示每次

> ID：16158517
> 
> 赞同：1
> 
> 时间：2013-04-22T23:39:39.253
> 
> 标签：python, pyqt4, qprogressbar

1.  它第一次起作用，但在重新调用循环处理数据的函数时不再起作用。我有 2 个 python 程序。主要显示进度条，第二个循环围绕处理数据。我已经研究了整个 stackoverflow 和谷歌，并努力寻找解决方案。最接近的解决方案是“QProgressBar 完成加载 2 后出现无法解释的延迟”的问题，但我无法将其应用于我的问题。我也尝试应用 QApplication.processEvents() 但我没有成功。

    主程序……等等……

    ```
    def connectDevice(self)
      if self.usb_serial != None:
        self.ui.ProgressBar.setMinimum(0)  # settings for showing pyqt4 progress bar            
        self.ui.ProgressBar.setMaximum(0)  # not indicating as expected          
        self.ui.ProgressBar.setValue(0)    # first showing 0%
        self.device = ScopeDev(self.usb_serial)   # device.py my second Python program
        self.device.start()                       # Connect Call... class ScopeDev/def run(self):
        self.device.init_received.connect(self.init_received)     # end of data processing signal received
      else:
        self.Display_MSG("Connection Error", "device not plug into USB port." )

    def reprocessdata(self):
      logging.info("Re-Processing Data...")
      self.ui.ProgressBar.setMaximum(0)     # hoping to kick off the progress bar again. Not even showing 0% 
      self.ui.ProgressBar.setValue(0)       # I tried insert QApplication.processEvents() here but did not work
      self.device.init()                    # Call class ScopeDev/def init(self): data was being processed

    def init_received(self):
      logging.debug("Init received")
      self.ui.ProgressBar.setMaximum(1)         # indicated 100% on both times, when data processing completed
      self.ui.ProgressBar.setValue(1)           # first from connectDevice and second time from reprocessdata 
    ```

2.  我的第二个python程序......等等......

    ```
    class ScopeDev (QtCore.QThread):
      init_received = QtCore.pyqtSignal()

    def __init__(self, usb_serial, usb_serial_baud=9600, timeout=2):
      QtCore.QThread.__init__(self, None)
      self.serial = serial.Serial(usb_serial, usb_serial_baud, timeout=timeout)   # connect to Arduino
      logging.debug("Connected (%s)" % usb_serial)

    def run(self):
      self.init()                    #1 Call...def init(self):

    def init(self):
      self.serial.readline().rstrip()            # read println put out by Arduino/plaser.ino
      self.serial.write(b'init')                    
      self.sread(expect=b'^done_init$')

    def sread(self, expect=b'^cmd$'):   # loops around to process data from Arduino...etc. when completed...
      self.init_received.emit()       # emits the outbound signal back to the main 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T14:24:26.490

这里有一些建议：

**首先**删除第一个初始化，这 3 行：

```
self.ui.ProgressBar.setMinimum(0)  # settings for showing pyqt4 progress bar            
self.ui.ProgressBar.setMaximum(0)  # not indicating as expected          
self.ui.ProgressBar.setValue(0)    # first showing 0% 
```

这是默认完成的。

**第二**件事：`reprocessdata`尝试切换这两行：

```
 self.ui.ProgressBar.setMaximum(0)        
  self.ui.ProgressBar.setValue(0) 
```

**3.**代替前两行，尝试重置进度条：

> void QProgressBar::reset () [插槽]
> 
> 重置进度条。进度条“倒带”并且没有显示任何进度。

在你的情况下：`self.ui.ProgressBar.reset()`

**-**我不明白你为什么使用进度条？因为你只有两个状态 - 0 (0%) 和 1 (100%)

# ios - 找到 UILabel 底部位置，以便可以在下面创建第二个 UILabel

> ID：16158518
> 
> 赞同：1
> 
> 时间：2013-04-22T23:39:47.000
> 
> 标签：ios, objective-c, uilabel, cgrect

我正在创建一篇新文章。`UILabel`正在为文章标题添加A。标题文本有时可能是一、两或三行文本。然后我需要`UILabel`在标题下方创建一个。

`UILabel`由于标题具有动态高度，因此我无法定位日期。

是否有计算得到我`UILabel`的框架的底部位置？

注意：我`siteToFit`用来确保`UILabel`' 框架适合。

```
// Text
    UILabel *title = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, self.view.bounds.size.width-20, 50)];
    //title.backgroundColor = [UIColor clearColor];
    title.backgroundColor = [UIColor redColor];
    title.text = self.firstItem.title;
    //title.text = @"This is a test of a short title that is a little longer";
    title.textColor = [UIColor whiteColor];
    title.layer.shadowColor = [UIColor blackColor].CGColor;
    title.layer.shadowOffset = CGSizeMake(0, 0);
    title.layer.shadowRadius = 0.6;
    title.textAlignment = NSTextAlignmentLeft;
    title.layer.shadowOpacity = 1.0;
    title.layer.masksToBounds = NO;
    title.font = [UIFont boldSystemFontOfSize:16.0];
    title.numberOfLines = 0;
    [title sizeToFit];

    [self.firstNewsItemBackgroundView addSubview:title];
    self.cachedParalax = self.firstNewsItemBackgroundView.frame;

    // Fix positioning
    title.center = CGPointMake(title.center.x, self.imageView.frame.size.height - title.frame.size.height);

    // Date
    UILabel *titleDate = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, self.view.bounds.size.width-20, 50)];
    titleDate.backgroundColor = [UIColor clearColor];
    titleDate.text = self.firstItem.publishedDateString;
    titleDate.textColor = [UIColor whiteColor];
    titleDate.layer.shadowColor = [UIColor blackColor].CGColor;
    titleDate.layer.shadowOffset = CGSizeMake(0, 0);
    titleDate.layer.shadowRadius = 0.7;
    titleDate.textAlignment = NSTextAlignmentLeft;
    titleDate.layer.shadowOpacity = 0.95;
    titleDate.layer.masksToBounds = NO;
    titleDate.font = [UIFont italicSystemFontOfSize:12.0];
    titleDate.numberOfLines = 0;
    [title sizeToFit];
    [self.firstNewsItemBackgroundView addSubview:titleDate];

    // Fix positioning
    CGRect frame = titleDate.frame;
    titleDate.frame = CGRectMake(10, title.center.y + (title.frame.size.height/2), frame.size.width, frame.size.height); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T23:57:40.150

嗯，看起来你有一个错字。您再次调用 [title sizeToFit] 而不是 [titleDate sizeToFit] 这可能是问题的一部分。

至于假设 10px 空间定位您的日期标签：

```
CGRect dateFrame = titleDate.frame;
dateFrame.origin.y = title.frame.origin.y + title.frame.size.height + 10; 
[titleDate setFrame:dateFrame] 
```

# c# - 如何从其他表单/脚本访问 bool？

> ID：16158521
> 
> 赞同：1
> 
> 时间：2013-04-22T23:40:24.413
> 
> 标签：c#, .net, boolean

如何在 c# 中从另一个表单访问布尔值？例如，我想访问 public bool isTrue = true; 来自 Form2 中的 Form1。这该怎么做 ？

我只知道如何在 Unity3D Form1.isTrue = true; 中做到这一点 但这在带有 .Net Forms 的 C# 中不起作用....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:52:01.270

对于快速而肮脏的方法，只需将其声明为静态。

```
public static bool isTrue = true; 
```

然后您可以使用 Form1.isTrue = true; 访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:45:35.927

有很多方法可以解决这个问题。我建议创建一个类来保存您的各种共享状态，包括您的布尔值，然后构造传入此状态对象的两个表单。或者至少，使用传递状态的 Form2 的构造函数。

# c - strtok 仅在指定的分隔符上不进行标记

> ID：16158529
> 
> 赞同：1
> 
> 时间：2013-04-22T23:40:49.103
> 
> 标签：c, arrays, string, strtok

所以我是 C 新手，正在自学字符串处理。据我所知，我的问题是我标记 sp 的函数？输入的数字字符串不仅在空格上分裂。例如：如果我输入一个像 45 这样的数字，我的数组中的结果字符串将同时显示 45 和 5，因此无论出于何种原因，它都会在两位数中拆分数字。我已经搜索了很长时间，但没有任何运气。

希望这不是我忽略的明显错误。但是我已经到了无法继续学习的地步，因此不胜感激！

示例输出：

```
please enter your string: 1 45 30 82
converting strings to ints
Printing the string
 1, 0, 45, 5, 0, 30, 0, 0, 82, 2,
Press any key to continue . . . 
```

我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <assert.h>

#define STRING_LENGTH 81
#define MAX_TOKENS 40

int StrInput( char dataStr[]);
void atoiWorker( char dataStr[], char results[], int idx);
void printer ( char dataStr[], int idx);
void tokenize ( char dataStr[], char results[]);

int main()
{
    int idx;
    char dataStr[STRING_LENGTH];
    char results[STRING_LENGTH];
    idx = StrInput(dataStr);
    tokenize(dataStr, results);
    atoiWorker(dataStr, results, idx);
    printer(results, idx);
}

int StrInput(char dataStr[])
{
    int idx = 0;
    printf( "please enter your string: " );
    while (idx < (STRING_LENGTH) && ((dataStr[idx] = getchar()) != '\n'))
        idx++;

    dataStr[idx] = '\0';
    return idx;
}

void atoiWorker( char dataStr[], char results[], int idx)
{
    int i;
    printf( "converting strings to ints\n" );
    for (i = 0; i < idx; i++)
        results[i] = atoi(&dataStr[i]);
}

void tokenize(char dataStr[], char *results[])
{
    int count = 0;
    char delim[] = " ,\t\n"; //found this on msdn, hopefully it's right

    if (results[0] = strtok(dataStr, " \t"))
        count++;

    while (results[count] = strtok(NULL, delim/*" \t"*/))
        count++;
}

void printer(char dataStr[], int idx)
{
    int i;
    printf( "Printing the string\n" );
    for (i = 0; i < idx; i++)
        printf( " %d,", dataStr[i] );
    printf( "\n" );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:56:44.653

像这样修复

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <assert.h>

#define STRING_LENGTH 81
#define MAX_TOKENS 40

void StrInput( char dataStr[]);
void atoiWorker( char *tokens[], int results[], int idx);
void printer ( int results[], int idx);
int tokenize ( char dataStr[], char *results[]);

int main()
{
    int idx;
    char dataStr[STRING_LENGTH];
    char *tokens[MAX_TOKENS];
    int results[MAX_TOKENS];
    StrInput(dataStr);
    idx = tokenize(dataStr, tokens);
    atoiWorker(tokens, results, idx);
    printer(results, idx);
}

void StrInput(char dataStr[])
{
    int idx = 0;
    printf( "please enter your string: " );
    while (idx < (STRING_LENGTH) && ((dataStr[idx] = getchar()) != '\n'))
        idx++;

    dataStr[idx] = '\0';
}

void atoiWorker( char *tokens[], int results[], int idx)
{
    int i;
    printf( "converting strings to ints\n" );
    for (i = 0; i < idx; i++)
        results[i] = atoi(tokens[i]);
}

int tokenize(char dataStr[], char *results[])
{
    int count = 0;
    char delim[] = " ,\t\n"; //found this on msdn, hopefully it's right

    if (results[0] = strtok(dataStr, " \t"))
        count++;

    while (results[count] = strtok(NULL, delim/*" \t"*/))
        count++;
    return count;
}

void printer(int result[], int idx)
{
    int i;
    printf( "Printing the string\n" );
    for (i = 0; i < idx; i++)
        printf( " %d,", result[i] );
    printf( "\n" );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:00:51.180

设置后`results[]`，`tokenize()`然后将其覆盖在`atioWorker()`.

# ios - iOS 上带有 UIWebView 的多标签 Web 浏览器

> ID：16158531
> 
> 赞同：1
> 
> 时间：2013-04-22T23:40:55.007
> 
> 标签：ios, uiwebview, browser

我正在创建一个简单的网络浏览器。我希望我的用户同时添加标签并浏览多个网页，例如在 Safari、Firefox 或 Chrome 中。我已经这样做了，效果很好，但我不知道是否有更简单的方法可以做到这一点。

当用户添加一个新选项卡时，我的应用程序会在后台创建一个与新选项卡相关的新 UIWebView 并加载一个新 URL。当用户选择另一个选项卡时，与该选项卡相关的 UIWebView 会出现，而另一个则消失。只是它..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:48:53.277

我会使用带有标签的 UIViewController 作为父视图控制器。每个选项卡都将与包含 UIWebView 的子 UIViewController 相关联。当您单击不同的选项卡或创建一个新选项卡时，您可以隐藏当前子 UIViewController 的视图并显示新的。

# c++ - 有4个括号的数组的维数是多少

> ID：16158536
> 
> 赞同：0
> 
> 时间：2013-04-22T23:41:17.353
> 
> 标签：c++, arrays, multidimensional-array

说我有一个像这样的数组：

```
 double theArray[2][5][3][4]; 
```

我不太明白最后一个维度。

```
 first is [][][][][]

 second is [][][][][]
           [][][][][]

 third would make it 3 dimensional, 
```

第四个会做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T23:45:30.947

C++（就像之前的 C）并没有真正的多维数组，所以它们都不是真正的 2、3、4（等）维数组。

相反，C++ 提供的是数组、数组的数组等。有了四组括号，您就有了一个数组数组的数组。

现在，忘记我说过的那些——在 C++ 中使用数组很少是一个好主意，使用数组的数组通常更糟糕。如上所示，伪 4D 数组还要糟糕很多倍。只是不要这样做。

如果需要模仿2D、3D等，数组，使用类。它使生活变得更加简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T23:48:06.867

第四个维度是**时间**。它与三个空间维度一起形成了**时空**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T23:45:53.080

```
double theArray[2] ==> [][]

double theArray[2][5] ==> [][], [][], [][], [][], [][]

double theArray[2][5][3] ==> [][], [][], [][], [][], [][]
                             [][], [][], [][], [][], [][]
                             [][], [][], [][], [][], [][]

double theArray[2][5][3][4] ==> ............. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T23:58:25.147

在 C 和 C++ 中，二维数组只是数组的数组——不多也不少。

3维数组是数组数组的数组。

你有什么：

```
double theArray[2][5][3][4]; 
```

是一个4维数组，一个数组数组数组。

如果您在考虑空间维度，则数组的*任何维度都不一定具有任何物理意义。*它们只是元素的有序序列，其中序列本身可能是序列，依此类推。

数组可以具有的维数没有限制（除了编译时和运行时存储空间，也*可能*是编译器施加的一些任意限制）。

对于二维数组，您可以认为元素以矩形网格布局：

```
[][][][]
[][][][]
[][][][] 
```

但实际上整个过程是线性的，每一行紧跟在内存中的前一行之后。

```
[][][][][][][][][][][][]
- row0 -- row1- - row2 - 
```

您还可以构建其他类似于多维数组的数据结构。如果您使用指针、指针数组等，则元素和行可能会在内存中任意分散。但这对于大多数用途来说并不重要。

[comp.lang.c FAQ](http://www.c-faq.com/)的第 6 节很好地讨论了 C 中数组和指针之间经常令人困惑的关系，其中大部分也适用于 C++。

C++ 提供了其他数据结构，作为标准库的一部分，它们比 C 风格的数组更灵活、更健壮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T00:02:25.173

假设我们要使用多维数组来跟踪世界人口。

```
// Population per country: 
int population[ C ]; 
// the 1st dimension is the country index, C is the number of countries

// Population per country per state: 
int population[ C ][ S ];
// the 2nd dimension is the state index, S is the max number of states per cuntry

// Population per country per state per county: 
int population[ C ][ S ][ N ];
// the 3rd dimension is the county index, N is the max number of county per state

// Population per country per state per county per city: 
int population[ C ][ S ][ N ][ I ];
// the 4th dimension is the city index, I is the max number of city per county

// Population per country per state per county per city per gender

// Population per country per state per county per city per gender per age-group 
```

注意：这只是一个例子，它肯定不是人口建模的最佳方法。

注 2：参见 Jerry Coffin 的回答。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T00:27:19.247

我想要一个技巧来可视化什么是 4 维数组（数学术语中的 4 维矩阵），您可以将其表示为立方体数组（如果维度不相等，则矩形平行六面体更准确）。

就像一个 3 维数组可以表示为一个矩阵数组

# c# - Nullable List 编译但每次都抛出错误

> ID：16158538
> 
> 赞同：-1
> 
> 时间：2013-04-22T23:41:33.917
> 
> 标签：c#, generics

以下行似乎相当简单并且可以编译，但是每次我都会在该行上遇到错误

```
List<long?> persistantIds = new List<long?>(); 
```

我收到的错误消息是经典的“对象引用未设置为对象的实例”。

它为什么会出错是没有意义的。我还看到一件奇怪的事情是当我在 VS2012 中查看值时，值显示为

'' 一片空白

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:54:57.693

我正在使用 VS 2012.2，这在我的机器上效果很好。

```
static void Main(string[] args)
{
    List<long?> persistantIds = new List<long?>();
    Console.WriteLine(persistantIds.Count);
    Console.ReadLine();
} 
```

尝试进行干净的构建，如果所有其他方法都失败，请重新启动 VS。

# wordpress - 在 Wordpress 管理面板中时，页面和帖子的内容会出现，但在前端查看时会出现 404 错误

> ID：16158546
> 
> 赞同：0
> 
> 时间：2013-04-22T23:42:16.303
> 
> 标签：wordpress, view, http-status-code-404

主页也会出现，我可以从主页查看页面和帖子的摘录，但是每当我点击任何页面或帖子链接，或点击“查看页面”或“查看帖子”按钮时管理面板，页面返回 404 错误。

我确保数据库已正确连接，可能是什么错误？

# css - 在生产服务器中重命名css文件

> ID：16158548
> 
> 赞同：0
> 
> 时间：2013-04-22T23:42:20.880
> 
> 标签：css

我只是好奇为什么有些网站将他们的 css 文件名重命名为一个很长的名称。例如，我检查了链接的源代码：[https ://kippt.com/](https://kippt.com/)

他们的 css 文件名很长。据我了解，该公司正在使用 twitter bootstrap 作为他们的 Web UI 框架。

我只是想知道重命名css文件有什么好处吗？如果是这样，谁能告诉我这样做的正确方法是什么？

对不起这个愚蠢的问题。我对 Web 开发非常陌生，想了解更多相关信息。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:44:13.013

有时 CSS 文件是动态生成的，然后将该名称使用（插入）到页面中。这是一个“门户”页面还是模板站点？

# java - 多客户端聊天服务器抛出异常并在断开连接后不允许连接

> ID：16158553
> 
> 赞同：0
> 
> 时间：2013-04-22T23:42:57.687
> 
> 标签：java, exception, stream, connection, objectoutputstream

很难将它放在标题中，但是每次客户端断开连接时，都会引发很多异常，并且服务器不允许在 DC 之后进行任何连接。这是我得到的错误：

```
java.net.SocketException: Socket closed
at java.net.SocketInputStream.read(Unknown Source)
at java.net.SocketInputStream.read(Unknown Source)
at java.io.ObjectInputStream$PeekInputStream.read(Unknown Source)
at java.io.ObjectInputStream$PeekInputStream.readFully(Unknown Source)
at java.io.ObjectInputStream$BlockDataInputStream.readShort(Unknown Source)
at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
at java.io.ObjectInputStream.<init>(Unknown Source)
at ClientHandler.setupStreams(ClientHandler.java:34)
at ClientHandler.run(ClientHandler.java:22) 
```

现在我希望得到这个异常，因为是的......客户端关闭了服务器和客户端之间的连接。但我无法理解的是为什么客户端在第一次断开连接后不允许连接。我假设它打破了while循环，但为什么呢？这是获取客户端连接、接受它并将其交给处理程序类的代码：

```
public class ClientConnector
{
public static JTextField userText;
public static JTextArea chatWindow;
public static int Connections = 0;
public static Vector sendQueue = new Vector();
public static ArrayList<ObjectOutputStream> Streams = new ArrayList<ObjectOutputStream>();
public static Scanner input = new Scanner(System.in);

public ClientConnector()
{

}

public static void runServer()
{
    try
    {   
        System.out.println("[Info] Attempting to bind to port 1337.");
        @SuppressWarnings("resource")
        ServerSocket serversocket = new ServerSocket(1337);
        System.out.println("[Info] Bound to port 1337.");
        System.out.println("[Info] Waiting for client connections...");
        while(true)
        {
            Socket socket = serversocket.accept();
            new ClientHandler(socket).start();
            Connections += 1;

        }
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
}
} 
```

这很简单。现在对于处理客户端连接的代码：

```
public class ClientHandler extends Thread
{
Socket ConnectedClient;
static ObjectOutputStream Output;
static ObjectInputStream Input;
public static boolean isError = false;
public static int updateCounter = 0;

ClientHandler(Socket socket)
{
    ConnectedClient = socket;
}

public void run()
{

    while(true)
    {
        setupStreams();//22
        WhileChatting();
    }
}

public void setupStreams()
{
    try 
    {
        if(isError == false)
        {
            Output = new ObjectOutputStream(ConnectedClient.getOutputStream());
            Input = new ObjectInputStream(ConnectedClient.getInputStream());//34
            ClientConnector.Streams.add(Output);
        }   
    }
    catch (IOException e)
    {
        isError = true;
        e.printStackTrace();
    }

}

public static void WhileChatting()
{
    String Message = "";
    do
    {
        try
        {
            if(isError == false)
            {
                Message = (String)Input.readObject();
                for(int i = 0; i < ClientConnector.Streams.size(); i++)
                {
                    ClientConnector.Streams.get(i).writeObject(Message);
                    System.out.println(Message);
                }
            }

        }
        catch(ClassNotFoundException CNFE)
        {
            isError = true;
            CNFE.printStackTrace();
        }
        catch(EOFException eof)
        {
            for(int i = 0; i < ClientConnector.Streams.size(); i++)
            {
                try
                {
                    Output.close();
                    Input.close();
                    ClientConnector.Streams.get(i).close();
                    ClientConnector.Streams.remove(i);
                    System.out.println("Connection lost");
                }
                catch (IOException e)
                {
                    e.printStackTrace();
                }

            }
        }
        catch (IOException e)
        {
            isError = true;
            e.printStackTrace();
        }

    }
    while(Message != "/disconnect");
}

public static void sendMessage(String message)
{
    try
    {
        if(isError == false)
        {
            Output.writeObject(message);
            System.out.println(message);
        }
    }
    catch(IOException Ex)
    {
        isError = true;
        Ex.printStackTrace();
    }
}

public static void sendServerMessage(String message)
{
    int Limit = 0;
    try
    {
        for(int i = 0; i < ClientConnector.Streams.size(); i++)
        {
            if(Limit == 0)
            {
                ClientConnector.Streams.get(i).writeObject("\247c[Server] \247d" + message);
                System.out.println("\247c[Server] \247d" + message);
                Limit = 1;
            }
        }
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
}

public static void closeConnections()
{
    try
    {
        if(isError == false)
        {
            Output.close();
            Input.close();
            //ConnectedClient.close();
        }
    }
    catch(IOException Ex)
    {
        isError = true;
        Ex.printStackTrace();
    }
}

} 
```

我已经在受影响的行中发表了评论。客户端断开连接后发生错误。我不知道这是否是导致 while 循环中断的异常，或者是其他原因。在客户端断开连接后，如何使此代码继续允许传入的连接。我试过调试和使用 System.out.println。提前感谢所有回答的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:01:47.297

> 现在我希望得到这个异常，因为是的......客户端关闭了服务器和客户端之间的连接。

否。此异常意味着*您*关闭了*`Socket`*然后尝试对其进行进一步的 I/O。与同行无关。

> 但我无法理解的是为什么客户端在第一次断开连接后不允许连接。

您的代码存在许多问题。

1.  您必须在两端使用相同的`ObjectInputStream`and`ObjectOutputStream`在 , 的生命周期内。`Socket`目前，您正在创建一个新对，并将它们添加到数据结构中，每次循环。

2.  当你抓住`EOFException`一个`Socket`时，你正在关闭*所有*的套接字。您应该只关闭*一个，*即您从中获得异常的那个，*然后*您必须跳出所有循环并允许线程退出。

3.  您基本上应该将`while`循环从`while (true)`to更改为`while (!isError)`并停止`isError`在其他任何地方进行测试。我将摆脱该`whileChatting`方法并将其合并到此 while 循环中。而且你不需要内`do`循环。您只需要一个循环读取直到 EOS 或断开命令。

# google-maps-api-3 - 是否可以将 Google Places API 与 Google Geocoding API 合并？

> ID：16158556
> 
> 赞同：0
> 
> 时间：2013-04-22T23:43:13.850
> 
> 标签：google-maps-api-3

我正在构建一个预订系统，我想根据一个文本字段进行查找，以搜索企业和地址。

例如，用户会看到一个要求他们输入位置的**输入框。**我希望它支持**Businesses**和**Addresses**。

我当前的实现使用了地理编码网络服务，但它无法找到企业，所以我需要引入 Places API。

**我还需要**使用 Google Distance Matrix Web Service 找到这些地方之间的距离。

我以为我已经通过使用 Google Places API 解决了我的问题，但并非所有地址都列在上面。

非常感谢任何想法/以前的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:46:22.110

您可以在页面上同时使用这两种方法，并在其中一种（即缺失或空变量）上设置不成功搜索的条件以触发另一种。

# java - 使用 Java 使用 XSLT 将 XML 转换为 CSV 时无法嵌入分隔符

> ID：16158557
> 
> 赞同：0
> 
> 时间：2013-04-22T23:43:21.677
> 
> 标签：java, xml, xslt, csv

我正在尝试使用 XSLT 将 XML 转换为 CSV。我在这个网站上看到了很多类似的帖子，但想提一下具体要求和我在代码中看到的问题。

这是我格式良好的 XML 文件内容。请注意，我从数据库中获取这个 XML 作为字符串，所以它没有被格式化。

XML 文件

```
<myxml ver="1.0"><name>smile</name><email>test@gmail.com</email><phone_number/><job_title>Engineer</job_title><company_name>Stack Overflow</company_name><submission-datestamp>3/14/11 8:29 PM</submission-datestamp></myxml> 
```

这是 XSLT 文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/> 

<xsl:template match="myxml">
  <xsl:for-each select="*" >    
    <xsl:if test="position() != last()">
        <xsl:value-of select="normalize-space(.)"/>,
     </xsl:if>
 </xsl:for-each> 
</xsl:template>
</xsl:stylesheet> 
```

我得到低于 CSV 格式的内容：

```
smile,
    test@gmail.com,
    ,
    Engineer,
    Stack Overflow,
    3/14/11 8:29 PM 
```

要求是：

*   我需要先显示标题
*   逗号分隔列表，如

    微笑测试@gmail.com，EngineerStack 溢出，2011 年 3 月 14 日晚上 8 点 29 分

你能帮我修复我的代码吗？问题出在 XSLT 文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:21:30.700

您获得了额外的回车，因为您在模板内有混合内容。样式表假定逗号后面的空格很重要。您可以通过将文本放在`<xsl:text>`. 这告诉样式表哪些文本是输出的明确部分，因此如果除了空格之外没有其他内容，则假定它是无关紧要的。

我稍微修改了样式表，使其更像是一个“推式”样式表，使用`xsl:apply-templates`代替`xsl:for-each`，并且还在每行的末尾添加了回车：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
        <xsl:output method="text"/> 

<xsl:template match="/">
    <xsl:apply-templates mode="header"/>
    <xsl:apply-templates />
</xsl:template>

<xsl:template match="myxml/*" mode="header">
    <xsl:value-of select="local-name()"/>
    <xsl:choose>
        <xsl:when test="position() = last()">
            <xsl:text>&#xA;</xsl:text>
        </xsl:when>
        <xsl:otherwise>
            <xsl:text>,</xsl:text>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

<xsl:template match="myxml/*">
    <xsl:value-of select="normalize-space(.)"/> 
    <xsl:choose>
        <xsl:when test="position() = last()">
            <xsl:text>&#xA;</xsl:text>
        </xsl:when>
        <xsl:otherwise>
            <xsl:text>,</xsl:text>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

产生以下输出：

```
name,email,phone_number,job_title,company_name,submission-datestamp
smile,test@gmail.com,,Engineer,Stack Overflow,3/14/11 8:29 PM 
```

# css - 如何将页面设为私有

> ID：16158560
> 
> 赞同：-1
> 
> 时间：2013-04-22T23:43:45.140
> 
> 标签：css, html, web, admin

主意：

将某些页面设为私有。假设我有 4 个导航链接，当单击私有 libk 时，系统会提示您输入正确的用户名和密码。在我目前的实践网站上，我有大约 7 个链接指向不同的页面，出于个人原因，我正试图将一个链接设为私有。

我在谷歌上搜索，但找不到解决我的情况的方法。任何教程也会有帮助。如果需要我的代码的任何部分，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:56:34.787

GoDaddy 支持网站上的这份文档展示了如何使用 GoDaddy 基于 Windows 的主机为某些目录设置身份验证：

[http://support.godaddy.com/help/article/3977/password-protecting-web-directories-on-a-windows-hosting-account](http://support.godaddy.com/help/article/3977/password-protecting-web-directories-on-a-windows-hosting-account)

从文件：

*   使用 FTP 文件管理器限制对目录的 Web 访问
*   登录您的客户经理。
*   单击虚拟主机。
*   在您要使用的主机帐户旁边，单击启动。
*   从工具部分，单击 FTP 文件管理器。
*   选择适当的现有目录或创建新目录。
    *   如果创建新目录，请输入目录名称。
    *   单击确定。
    *   选择新目录。
*   单击操作栏中的权限图标。
*   确保未选中读取。
*   单击确定。

# zeromq - ZeroMQ 分布模式

> ID：16158565
> 
> 赞同：3
> 
> 时间：2013-04-22T23:44:05.550
> 
> 标签：zeromq

我目前正在运行一个发布/订阅系统，它允许客户端连接到中央消息路由守护进程，订阅一系列消息，然后开始聊天。路由守护进程跟踪和维护每个订阅者感兴趣的消息（基于一个简单的标签），并在每个订阅者生成它们时传递适当的感兴趣消息。本质上，每个连接都被认为是潜在的发布者*或*订阅者*，并且通常*两者，守护进程根据需要处理路由和传递。

例如，三个客户端都连接并订阅他们感兴趣的消息标签（MT）：

```
Client 1(C1) subscribes to MT => 123
Client 2(C2) subscribes to MT => 123 & 456
Client 3(C3) subscribes to MT => 123 & 456 & 789

C1 produces MT 456: daemon delivers a copy to C2 and C3
C2 produces MT 123: daemon delivers a copy to C1 and C3 (not self)
C3 produces MT 999: daemon delivers it to none (nobody subscribed) 
```

ZeroMQ 在与一位同事的讨论中提出，经过几天的修补后，我认为我没有看到实施/替换我们目前拥有的系统的正确模式。此外，我想使用 EPGM 来利用多播收益并消除我目前拥有的基于 TCP 的守护进程，即中间的猴子。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:46:04.073

使用 ZeroMQ 可以设计出类似的系统。基本上，您可以创建一个**绑定**两个套接字的守护进程：PULL 用于接收来自客户端的消息，而 PUB 用于发布消息。每个客户端都**将**SUB 套接字和 PUSH 套接字连接到服务器。EPGM 可能用于 PUB/SUB 套接字，但 PUSH/PULL 套接字仍然是 TCP。 ![](https://i.stack.imgur.com/tEVWt.png)

这种设计的缺点是主题过滤和丢弃自己的消息必须手动完成。例如，您可以创建三部分的消息：

1.  话题
2.  生产者标识
3.  邮件正文

客户端应立即逐部分阅读消息，丢弃它不感兴趣的消息尾部。指南的本节详细描述了使用 PUB/SUB 消息信封：http: [//zguide.zeromq.org/page :all#Pub -子消息信封](http://zguide.zeromq.org/page:all#Pub-Sub-Message-Envelopes)。客户端过滤不应影响性能，因为无论如何都必须将所有 PGM 数据包传递给所有连接的接收器。

这种设计非常简单但非常有效。它不包括可靠性、高可用性、故障恢复和其他重要方面——这些都可以使用 ZeroMQ 并在指南中介绍。ZeroMQ 的最佳特性可能是能够从简单的东西开始，并根据需要添加功能，而无需痛苦和/或进行重大重写。

指南的“可靠的 Pub-Sub（克隆模式）”一章中描述了非常相似的东西（加上状态快照、可靠性等等）：http://zguide.zeromq.org/page: [all#toc119](http://zguide.zeromq.org/page:all#toc119)

顺便说一句，也可以设计 p2p 系统，中央守护进程仅用作名称服务器，但肯定会更复杂。

# c# - 从 JS 变量中的服务器端变量获取数据？

> ID：16158569
> 
> 赞同：0
> 
> 时间：2013-04-22T23:45:16.893
> 
> 标签：c#, javascript

我想将数据从服务器端存储在客户端变量中，这是一个好习惯吗？

我有一个使用 Web 服务的应用程序，我不想在源代码上公开 ip，所以如果我可以使用该 ip 设置客户端变量会很好。

现在有人告诉我，例如从 Session 获取值并将它们存储在 JS 变量中可能被称为“坏事”，因为它代表一个 XSS 漏洞，我不希望我的网站被标记为“不安全” .

我想将值存储在客户端变量上的原因是我可以使用 JQUERY - AJAX，这样客户端就不必为每个请求重新加载页面。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:57:03.790

在客户端保存服务器端数据本身并没有错。

对于 PHP，这是一个简单的方法：

```
<script>var someValue = "<?php echo $some_value; ?>";</script> 
```

这会将 PHP 值保存在`someValue`JavaScript 变量中。

对于更复杂的数据结构，这是一种在两种语言之间转换的好方法：

```
<script>var someValue = JSON.decode("<?php echo json_encode($some_value); ?>");</script> 
```

仅当您要保存客户端的数据敏感时，这才成为一个坏主意。没有办法说出你的意图是什么，所以你必须使用你最好的判断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:00:58.170

**JS中的代码生成**

```
<script >
<%= SomeMethodFromCodeBehind() %> //JS goes here.
</script > 
```

*   优点：您可以访问服务器上所需的所有内容。
*   缺点：您正在使用 C# 编写 JS，而 C# 字符串方法并不完全是模板引擎。
*   您会认为您可以访问 Session，但仅限于代码生成时！
*   如果您将用户输入混合到结果中，那么这就是“JavaScript 注入”，它与 XSS 混为一谈。

**只生成数据的代码**

```
<script >
var myNumber =  parseInt(<%= Convert.ToInt32(Session["TheNumber"]) %>,10);
var id = '<% TextBox.ClientID %>';
</script > 
```

上面只是生成数据，而不是所有代码，所以更容易看到潜在的用户输入（可能是 Session 部分），然后将其强制为合适的数据类型，或者对字符串进行一些 JS 转义。

根据我的经验，我只需要对 ClientID 以及有时没有客户端 API 的控件属性执行此操作。

**呼叫服务**

如果您不编写返回 42 的生成函数的代码，也许您可​​以将函数留在服务器上，让 JS 收集参数。一方面，调用 web 服务不会受到 XSS 的影响——用户将不得不攻击 web 服务的参数，在代码生成中，用户可以进行各种攻击，只要他能弄清楚如何获取他的代码输出（尤其是在别人的浏览器上）。所以现在你可以创建一个 JS 友好的 Web API。以下是一些可能出错的事情：

```
<script >
//Things that used to be somewhat secret are potentially public now.
PageMethods.GetSesion("Blah",onSuccess); 

//Wow, something that used to be hard for the user to tamper with is now convenient to 
//tamper with. Now Session is ALL user input (and hence evil)
PageMethods.SetSession("Blah",42); 

//Okay, now the user has the ability to read your secrets, conveniently
PageMethods.Encrypt("Blah", onSuccess); 
PageMethods.Decrypt("Blah", onSuccess); 
if(password=="xyzzy")
{
   PageMethods.ShipTheGoods(address,goods); //User can call this directly.
}
</script > 
```

（我不是在推广 PageMethods，但它们的示例代码肯定比替代方法短）

当您习惯于编写服务器端代码时，当您编写 JS 代码时，上述类型的代码是另一个常见的问题。一本书称这种过于精细的 API 和对流控制的攻击（即 if 语句并不能真正保护 ShipTheGoods 在没有密码的情况下被调用）

总之，在一个 JS 页面中，跟踪状态（即 Session）的方式只是一个变量，" `var customerInFocus = 'joe'`)。你可以使用代码生成来输出一个值——然后当你准备好保存时，将它发送回服务器一个页面方法（或 Web 服务）调用并将所有这些参数视为可能在此过程中被篡改的用户输入。

# ruby-on-rails-3 - mandrill 从本地主机发送电子邮件

> ID：16158573
> 
> 赞同：3
> 
> 时间：2013-04-22T23:45:45.137
> 
> 标签：ruby-on-rails-3, email, heroku, mandrill

我正在使用 Mandrill 为网站上的用户构建反馈表（他们填写表单并给我发送电子邮件）。

我想在开发中测试电子邮件功能。我使用独角兽作为服务器，我的本地地址是 0.0.0:8080

但是我收到 500 服务器错误，Net::SMTPServerBusy : Relay Access Denied

我一步一步地按照 Heroku 的说明进行操作。

这是 m application.rb 配置：

```
config.action_mailer.smtp_settings = {
      :address => 'smtp.mandrillapp.com',
      :port => '587',
      :domain => 'heroku.com',
      :user_name => ENV['MANDRILL_USERNAME'],
      :password => ENV['MANDRILL_APIKEY']
    }

    ActionMailer::Base.delivery_method = :smtp 
```

我按照 mandrill/heroku 网页上的说明进行设置。

我有一个 .env 文件设置了一个 MANDRILL_USERNAME 和我的 MANDRILL_APIKEY

这是我的 ActionMailer 文件：

```
class FeedbackMailer < ActionMailer::Base
  default :from => ""
  default :to => "xxx@stanford.edu"
  default :subject => "feedback about xxx"

  def send_feedback(message)
    #debugger
    @message = message
    mail(:from => message[:sender_email])

  end
end 
```

任何帮助，将不胜感激。

我可以确认电子邮件已在生产中发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T12:59:16.020

如果您的所有设置都在生产环境中工作，但不是在本地工作，则有两种可能性：

1.  您如何将变量从 .env 加载到 ENV？环境变量可能没有按预期在本地加载。如果您在本地对凭据进行硬编码，它会起作用吗？

2.  您可能遇到了端口或出站 SMTP 流量被阻止的问题。考虑尝试端口 2525，因为它可能不太可能被本地 ISP 阻止。即使您的 ISP 阻止其他 SMTP 流量，启用 SSL 的端口 465 也可能工作

# mysql - 难以理解案例陈述

> ID：16158576
> 
> 赞同：0
> 
> 时间：2013-04-22T23:45:57.240
> 
> 标签：mysql

我有一个类似这样的案例陈述：

```
CASE
  WHEN purpose = "" THEN SET @sPurpose = "%%"
  WHEN purpose IS NULL THEN SET @sPurpose = "%%"
  ELSE SET @sPurpose = concat("%",purpose,"%");
END; 
```

但是当我尝试编译该过程时，它会引发此错误：

```
SQL Error: You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the right syntax to use near 
'WHEN purpose IS NULL THEN SET @sPurpose = "%%" ELSE SET @sPurpose = co' at line 13 
```

我只是错过了一些语法上的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T23:46:54.060

这是正确的方法，

```
SET @sPurpose = CASE
                     WHEN purpose = "" THEN  "%%"
                     WHEN purpose IS NULL THEN  "%%"
                     ELSE  concat("%",purpose,"%")
                END; 
```

# javascript - 从跨域脚本中提取对象的优雅方式

> ID：16158582
> 
> 赞同：0
> 
> 时间：2013-04-22T23:46:18.110
> 
> 标签：javascript, jquery, json, cross-domain, jsonp

为了加载一些 geojson 数据，我需要在外部域上获取脚本，比如`http://www.stat.ucla.edu/~jeroen/files/la_county_simplified.min.json`. 我无法控制这个脚本的内容；我只知道 url，以及我感兴趣的脚本中定义的对象的名称。脚本的虚拟版本如下所示：

```
var my_data = {"foo" : 123, "bar" : 456} 
```

现在在我的应用程序中，我想`my_data`从它的 URL 动态加载对象。因为是跨域的，所以不能用ajax。也不完全`jsonp`是，因为我的脚本定义了一个对象，而不是一个函数。一种方法是将其简单地作为 a 插入`<script>`当前文档的头部。但是，我想避免可能的副作用。

什么是更清洁的解决方案？我正在考虑创建一个`<iframe>`然后在 iframe 中插入`<script>`标签，并在 iframe 加载后提取对象。但是我不确定这是一个可靠的方法，可以跨浏览器工作（特别是绑定回调以在 iframe 中加载脚本后提取对象）。

是否有一些库或标准解决方案可以在干净的页面中加载脚本，并将特定对象的副本提取到主页？我已经依赖于 jQuery，所以这很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:52:55.103

如果你打算做这个纯客户端并且不能格式化你的数据，你可以使用 JSONP*和一个 twist*。我们没有修改数据以适应回调，而是重新调整加载器以适应数据。

我们听`onload`脚本的。当脚本加载时，变量现在应该在全局范围内，我们执行回调，将全局变量传递给我们的回调。

```
//your script loader
function loadData(url,varName,callback){

  var script = document.createElement('script');
  document.getElementsByTagName('head')[0].appendChild(script);

  //when the script loads, we pass in `window.my_data`
  script.onload = function(){
    callback.call(this,window[varName]);
  };
  script.src = url;

}

//using it
loadData('http://example.com/somefile.js','my_data',function(data){
  //executes when script is loaded, where data is `my_data`
}); 
```

这种方法的缺点是每次加载脚本时，都会将其加载到全局范围内，并且可能会发生冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:08:16.043

没有其他方法可以解决它，因为您必须击败相同的来源策略，您必须在新的脚本标签中加载脚本，JSONP 也可以这种方式工作，但 jquery 会为您隐藏它。

无论是那个还是站点都有 cors 标头，如果站点没有 cors 标头，您可以在这里加载数据（不使用 jsonp，因为它不是 jsonp 格式）：

```
function loadJS(url){
  var s=document.createElement("script");
  s.src=url;
  $(s).on("load",function(){
    console.log("var abvailable");//do something with the variable here
    $(s).remove();
  });
  document.head.appendChild(s);
}
loadJS("http://code.jquery.com/jquery-1.9.1.min.js"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T00:20:09.007

iframe 方法应该可以正常工作：

*   创建一个 iframe
*   注入指向文件的脚本标签
*   在脚本加载时，检索对象

我能想到的唯一跨浏览器问题是您需要在现代浏览器中使用 addEventListener 并在旧 IE 中使用 attachEvent 。

这是将 iframe 用作沙箱的标准用法 - 如果我理解正确，您担心可能与全局变量名称发生冲突。

[更新] 为了解决您的一些评论，这里是一些跨浏​​览器代码：

添加事件监听器：

```
function addEvent(element,event,fn,capture){
// capture defaults to false if omitted
if (element.addEventListener) {element.addEventListener(event,fn,(capture||false));}
// else for old IE
else {element.attachEvent('on'+event,fn);}
}; 
```

要访问 iframe 文档：

```
function iframeDocument(ifr){
var doc=ifr.contentWindow||ifr.contentDocument;
if (doc.document) doc=doc.document;
return doc;
}; 
```

如果您使用 jQuery，`.on("load")`并且`$(ifr).contents()`会处理这些跨浏览器兼容性问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T23:50:34.303

JSON-P 是一种从远程域加载 JavaScript 的方式。

JavaScript 的返回格式是以响应数据为参数调用函数。

```
someGlobalFunctionName({/* your response data */});

function someGlobalFunctionName(data) { /* do something with data */ } 
```

由于数据包含在对象中并传递给函数，因此除了全局函数本身之外，没有全局泄漏，这是不可避免的。

更多信息：http: [//json-p.org/](http://json-p.org/)

# dart - 如何在 Dart 中的类上调度构造函数？

> ID：16158584
> 
> 赞同：0
> 
> 时间：2013-04-22T23:46:22.383
> 
> 标签：dart

我以前有以下代码，它工作正常。（请注意，Card、SearchResults、Quiz 都扩展了 Persistable，而 Persistable 包含构造函数`.fromMap`。

```
Persistable fromString(String value){
  Map<String, dynamic> m = parse(value);

  switch(m['type']){
    case 'card':
      return new Card.fromMap(m);
    case 'searchresults':
      return new SearchResults.fromMap(m);
    case 'quiz':
      return new Quiz.fromMap(m);
  }
} 
```

这有点罗嗦，所以我想我会把它分成两部分。我首先有这个：

```
static final Map<String, Persistable> lookup =
    {'card': Card,
     'searchresults': SearchResults,
     'quiz': Quiz }; 
```

看起来很合理，但是当我尝试重新定义该方法时，我感到困惑。

```
Persistable fromString(String value){
  Map<String, dynamic> m = parse(value);
  String type = m['type'];
  Persistable p = lookup[type];
  ... Confused, this can't be right
  ... ultimately want to "return new p.fromMap(m)";
} 
```

`Persistable p`真正的意思是 class 的一个实例`Persistable`。如何键入我的`lookup`地图，使其值属于 class `Persistable`，以便我可以调用它们的`.fromMap`构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T08:39:56.330

首先，我认为您的初始方法是完全有效的，不应该仅仅因为它的冗长而被抛弃。我相信替代方法会引入额外的复杂性，并且仅在您确实需要动态调度时才合理。（例如，如果您为持久性编写库，并且希望为库的客户端添加为持久性注册任意类的能力）如果您必须使用动态调度，我相信有两种主要可能性：- 反射 API。最近反射库获得了同步 API，所以这种方式现在比以前便宜得多。我相信无论如何，反思总会产生一些成本。- 使用核心 DART 功能。

使用第二种方法，您可以使用某种技巧来动态模拟构造函数调用。例如，您可以在 map 中存储的不是类型变量，而是返回所需类实例的函数：

所以你的代码可能看起来像

```
static final Map<String, Function> lookup = new Map<String, Function>
static void registerClass(String className, factory) {
    lookup[className] = factory;
}
static Persistable getInstance(String className, Map map){
    return lookup[className](map);
} 
```

在客户端：

```
....
registerClass('quiz', (map)=> new Quiz.fromMap(map));
registerClass('card', (map)=> new Card.fromMap(map)); 
```

[（注意 - 我没有对此进行测试）您可以在https://github.com/vadimtsushko/objectory](https://github.com/vadimtsushko/objectory)中寻找该方法的工作示例代码

# ios - 加载 viewcontroller 后 App 运行缓慢，然后卸载约 15-20 次

> ID：16158586
> 
> 赞同：0
> 
> 时间：2013-04-22T23:47:03.227
> 
> 标签：ios, memory-leaks, rotation, viewcontroller, viewdidunload

使用：Xcode 4.6 Storyboards ARC Model segue to SecondViewController

我有一个应用程序，它的主 ViewController 会在设备向右旋转时加载一个新的 veiwController。当应用程序启动时，一切正常。如果我旋转设备，然后返回卸载 secondview 控制器，大约 15-20 倍的应用程序非常缓慢。我已经缩小范围，它仅在加载第二个视图控制器并且仅当我旋转设备数次时才会发生。我也缩小了范围，这是一个内存问题。我安装了一个应用程序来跟踪使用和可用的内存。当我多次旋转设备时，我的内存从 400mb 变为 900mb。我试图提供尽可能多的信息。每个视图都有 8 个每秒触发的 NSTimer。

有没有办法以编程方式卸载视图，以确保正在卸载？

我已包含此代码以确保加载和卸载：

`- (void)setView:(UIView *)aView { NSLog(@">>> 输入 %s <<<", **PRETTY_FUNCTION** );

```
if (!aView)         // view is being set to nil
{
    NSLog(@"Should be unloading now");
}

[super setView:aView];

NSLog(@"<<< Leaving %s >>>", __PRETTY_FUNCTION__); 
```

}

日志结果：2013-04-22 16:42:03.588 xxxxxxxx[xxxxxxx] >>> 进入 -[GraphViewController setView:] <<< 2013-04-22 16:42:03.589 xxxxxxxx[xxxxxxx] <<< 离开 -[ GraphViewController 设置视图：] >>>

` 我不确定我需要看什么来纠正这个问题。

任何朝着正确方向的“点”都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:08:42.187

您没有提供太多关于如何“卸载”SecondViewController 的信息。您是否也在对其进行模态搜索？如果是这样，那就是你的问题——每次你做一个转场，你实例化一个新的视图控制器，如果这些是模态转场，呈现的控制器有一个指向呈现控制器的强指针，所以这些控制器都不会被释放当你来回走动时。

通常，您不应该在情节提要中使用任何东西而不是展开转场来倒退。因此，您的问题的解决方案是使用展开转场从 SecondViewController 回到 MainViewController - 这实际上将回到您来自的 MainViewController 的同一个实例，并且 SecondViewController 将被释放。如果您不知道如何进行放松转场，我将编辑我的答案以向您展示如何。

**编辑后：**

为了放松转场，你要做两件事。在您要返回的控制器中，添加一个方法——两个重要的事情是它是一个 IBAction，并且它有一个输入到 UIStoryboardSegue* 的参数。你怎么称呼它并不重要，它甚至不需要在里面有任何代码，尽管我通常会放入一个日志语句来确保它被调用。然后，在您要从中展开的控制器中的 IB 中，您可以控制从 UI 元素（如按钮或表格视图单元格）（或者如果您想从代码中触发它，则从控制器本身）拖动到绿色的退出图标场景的底部——重要的是要注意，您是从 UI 元素拖动到同一控制器中的退出图标，而不是控制器之间。当您松开退出图标上的拖动时，您将看到使用我上面提到的签名创建的任何方法。选择你想要的，就是这样。如果您想将任何信息传递回目标控制器，您可以像任何其他 segue 一样在源控制器中实现 prepareForSegue。

# prolog - 在运行开始时调用谓词

> ID：16158589
> 
> 赞同：1
> 
> 时间：2013-04-22T23:47:31.817
> 
> 标签：prolog

我需要在 pl 的咨询或开始时自动检查调用谓词。有这样的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:37:54.630

指令在源代码咨询期间执行。然后当 Prolog 加载其中出现的文件时（例如）

```
...
:- writeln(hello).
:- writeln(world).
... 
```

会写消息。

一个特殊的指令是[初始化](http://www.swi-prolog.org/pldoc/doc_for?object=%28initialization%29/1)/1：

> 加载完成该指令所在的源文件后调用 Goal。

# c - c中多维数组的qsort导致段错误

> ID：16158601
> 
> 赞同：0
> 
> 时间：2013-04-22T23:49:00.323
> 
> 标签：c, multidimensional-array, qsort

我正在尝试使用 C 中的 qsort() 对二维数组进行排序。数组包含 3D 点数据，这些数据是使用 fscanf 从文件中读取的。我的编程技能相当有限，但我需要处理非常大的数据集。如果我的代码很糟糕，请提前道歉。

23127.947, 23127.947, 23127.947
523127.790, 523127.790, 523127.790
523127.747, 523127.747, 523127.747
523127.761, 523127.761, 523127.761
523127.768, 523127.768, 523127.768
(...for 3,158,632 points)

我使用 printf 来隔离我的代码中的问题似乎是 qsort() 行，这会导致分段错误。从我阅读的有关 Stack Overflow 的其他问题来看，这可能是我的“比较”功能的问题。做一维数组的例子看起来很简单，但是我看到的二维数组的例子并没有比较其他维度（首先是 X，然后如果 X1 = X2，比较 Y，然后如果 Y1 = Y2，比较 Z）。

```
 int main(int argc, char *argv[]) {
    int i,j,c;
    double x,y,z;
    int ROWS = 3158632;
    int COLS = 3;
    char buffer[100];

    double** data = Make2DDoubleArray(ROWS, COLS);

    //Open the plot file to read in, and have an output write file
    FILE *fp = fopen("Plot_1-2.txt","r");

    if(fp == NULL) {
        printf("Can't open file\n");
        exit;
    }

    fgets(buffer, 100, fp); //Ignore header

    for(i=0; ; i++){
        if ((c = fgetc(fp)) == EOF){
            break;
        }
        fscanf(fp,"%lf, %lf, %lf",&x, &y, &z);
        data[i][0] = x;
        data[i][1] = y;
        data[i][2] = z;
    }

    printf("First 5 unsorted numbers:\n");
    for(j=0;j<5;j++){
        printf("Line %d: %.3lf, %.3lf, %.3lf\n",j, data[j][0], data[j][0], data[j][0]);
    }
    printf("Last 5 unsorted numbers:\n");

    for(j=ROWS-5;j<ROWS;j++){
        printf("Line %d: %.3lf, %.3lf, %.3lf\n",j, data[j][0], data[j][0], data[j][0]);
    }

    /* Sort array using Quicksort algorithm: */
    printf("Sorting...\n");
    qsort(data, ROWS, COLS*sizeof(double), &compare);

    printf("First 10 sorted numbers:\n");
    for(j=0;j<10;j++){
        printf("Line %d: %.3lf, %.3lf, %.3lf\n",j, data[j][0], data[j][0], data[j][0]);
    }

    fclose(fp);

    for (i=0; i<ROWS; i++){
        free(data[i]);
    }
    free(data);

    return 0;
}

double** Make2DDoubleArray(int arraySizeX, int arraySizeY) {  
    double** theArray; 
    int i; 
    theArray = (double**) malloc(arraySizeX*sizeof(double*));  
    for (i = 0; i < arraySizeX; i++)  
        theArray[i] = (double*) malloc(arraySizeY*sizeof(double));  
    return theArray;  
}

int compare(const void *arg1, const void *arg2) {
    //double a, b, c, d, e, f;
    double *a = (double*)arg1;
    double *b = (double*)arg2;
    double *c = ((double*)arg1 + 1);
    double *d = ((double*)arg2 + 1);
    double *e = ((double*)arg1 + 2);
    double *f = ((double*)arg2 + 2);

    if(a > b)
        return 1;
    else if(a < b)
        return -1;
    else {
        if(c > d)
            return 1;
        else if(c < d)
            return -1;
        else {
            if(e > f)
                return 1;
            else if(e < f)
                return -1;
            else
                return 0;
        }
    }
} 
```

我想知道告诉 qsort 去“COLS * sizeof(double)”是否是错误的方法来处理我如何为 2D 数组分配内存？将这个问题视为一维数组是否会使其余部分工作？如果可能的话，我更愿意将其保留为二维数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:56:40.997

`qsort`期望排序的元素进入连续的内存块。您仍然可以将数据保存在 2D 数组中，如果您的所有单元构成可以解释为 1D 数组并与`qsort`.

不要像在 中那样为每一行单独分配内存，而是`Make2DDoubleArray`一次为所有行分配内存。然后，除了你现在返回的：一个指向行的指针数组；您还必须返回（使用逐个参数）包含所有行的内存块。

您正在为每一行分配内存

```
for (i = 0; i < arraySizeX; i++)  
    theArray[i] = (double*) malloc(arraySizeY*sizeof(double)); 
```

虽然您可以一步分配内存

```
 double *cells = malloc(sizeof(double) * arraySizeX * arraySizeY);
 if (cells == NULL) { ... }
 for (i = 0; i < arraySizeX; i++)
     theArray[i] = &cells[arraySizeY * i]; 
```

然后你将有两个数组：一个指向你现在拥有的行的指针数组（`theArray`在你的代码中调用）；和一个新的一维数组，它保留所有行（不是指向行的指针，而是单元格数组）（~~实际上，所有单元格~~，其中每一行，一个三元组，是一个数据点）并且可以用于`qsort`（在我的代码中称为`cells`） .

~~然后，将后一个 - `cells`（而不是`data`）传递给 qsort~~

 ~~```
 qsort(cells, ROWS * COLS, sizeof(double), &compare); 
```~~ 

还要注意问题中代码中的调用

```
 qsort(data, ROWS, COLS*sizeof(double), &compare); 
```

~~是错误的，因为您没有对一定数量的`ROWS`行进行排序，每行的大小为`COLS*sizeof(double)`.~~

编辑：呃，我很抱歉。我误解了您有一个二维条目数组，但现在我看到 COLS 代表一个单元格的字段。在这种情况下，您最好使用@SpacedMonkey 的解决方案。仅供参考，我的回答也可以，然后你会像你一样调用 qsort ，但是在单元格上

```
 qsort(cells, ROWS, COLS*sizeof(double), &compare); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:29:31.123

尝试使用结构来代替数据：

```
typedef struct {
    double x;
    double y;
    double z;
} point_data; 
```

那么你只需要一个这种新类型的一维数组：

```
point_data *array = malloc(linesRead * sizeof *array); 
```

并且您的比较功能仍然非常相似：

```
int compare(const void *arg1, const void *arg2) {
    point_data *point1 = arg1,
               *point2 = arg2;

    if ( point1->x > point2->x ) {
        return 1;
    else if ( point1->x < point2->x ) {
        return -1;
    } else {
        if ( point1->y > point2->y ) {
            return 1;
        else if ( point1->y < point2->y ) {
            return -1;
        } else {
            if ( point1->z > point2->z ) {
                return 1;
            else if ( point1->z < point2->z ) {
               return -1;
            } else {
               return 0;
            }
        }
    }
} 
```

另外，请不要硬编码点数，而是计算您读入的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T01:40:44.813

这一切都不意味着没有像`<stdio.h>`,`<stdlib.h>`等标题的任何东西......

请解释`exit;`。我想你的意思是`exit(0);`。

您的`main`. 因此`fgetc`，您的代码可能会丢失第一个值的最重要数字，这是一个微妙的错误。如果您想测试 EOF，请测试`scanf`（*天哪！我没想到！我希望他们在手册中写了这些东西！*呃，他们确实......）。文件末尾的示例比这更好，因为该示例确保三个值实际上由`fscanf`.

```
for(size_t i=0; fscanf(fp,"%lf, %lf, %lf",&x, &y, &z) != EOF; i++){
    data[i][0] = x;
    data[i][1] = y;
    data[i][2] = z;
} 
```

`Make2DDoubleArray`你的函数有问题。它分配*了许多*`qsort`无法处理的不相交数组。一步分配数组不是更干净吗？

```
void *Make2DDoubleArray(size_t x) {  
    double (*theArray)[3] = malloc(x * sizeof *theArray);
    return theArray;
} 
```

`theArray`被声明为指向 3 个双精度数组的指针。你甚至不需要一个`Make2DDoubleArray`。

函数有问题`compare`。

```
double *a = (double*)arg1;
double *b = (double*)arg2; 
```

`a`并且`b`是指针，

```
if(a > b)
    return 1;
else if(a < b)
    return -1; 
```

...但是您的代码将它们作为整数进行比较，从而导致排序出现故障。的地址`array[0]`永远小于 的地址`array[1]`。

* * *

```
#include <stdio.h>
#include <stdlib.h>
#include <stddef.h>

int main(int argc, char *argv[]) {
    int j,c;
    double x,y,z;
    size_t ROWS = 3158632;
    size_t COLS = 3;
    char buffer[100];
    double (*theArray)[COLS] = malloc(ROWS * sizeof *theArray);

    //Open the plot file to read in, and have an output write file
    FILE *fp = fopen("Plot_1-2.txt","r");

    if(fp == NULL) {
        printf("Can't open file\n");
        exit(0);
    }

    fgets(buffer, 100, fp); //Ignore header

    for(size_t i=0; fscanf(fp,"%lf, %lf, %lf", &x, &y, &z) == 3; i++){
        data[i][0] = x;
        data[i][1] = y;
        data[i][2] = z;
    }

    printf("First 5 unsorted numbers:\n");
    for(size_t j=0; j<5; j++){
        printf("Line %zu: %.3lf, %.3lf, %.3lf\n", j, data[j][0], data[j][0], data[j][0]);
    }
    puts("Last 5 unsorted numbers:");

    for(size_t j=ROWS-5; j<ROWS; j++){
        printf("Line %zu: %.3lf, %.3lf, %.3lf\n", j, data[j][0], data[j][0], data[j][0]);
    }

    /* Sort array using Quicksort algorithm: */
    puts("Sorting...");
    qsort(data, ROWS, sizeof *data, compare);

    puts("First 10 sorted numbers:");
    for(size_t j=0;j<10;j++){
        printf("Line %zu: %.3lf, %.3lf, %.3lf\n", j, data[j][0], data[j][0], data[j][0]);
    }

    fclose(fp);
    free(data);

    return 0;
}

int compare(const void *arg1, const void *arg2) {
    double (*x)[3] = arg1;
    double (*y)[3] = arg2;

    if ((*x)[0] > (*y)[0])
        return 1;
    else if ((*x)[0] < (*y)[0])
        return -1;
    else if ((*x)[1] > (*y)[1])
        return 1;
    else if ((*x)[1] < (*y)[1])
        return -1;
    else if ((*x)[2] > (*y)[2])
        return 1;
    else if ((*x)[2] < (*y)[2])
        return -1;
    else
        return 0;
} 
```

# ios - 想要在选择 UItableViewCell 时获得不同的地图视图

> ID：16158603
> 
> 赞同：0
> 
> 时间：2013-04-22T23:49:07.657
> 
> 标签：ios, json, uitableview, mapkit

作为我的应用程序的一部分，我的一个表格视图有七行/单元格。当您单击每一行时，它会将其数据显示到详细视图中，并使用与所选行/单元格相关的适当数据更改 UILabels。我正在使用 mysql 数据库并将其转换为 json 以获取 tableview 行/单元格的日期以及详细视图。

在 mysql 数据库中，每一列都包含与街道地址相关的名称、街道地址、经度和纬度坐标。

我的 tableview 以及我的详细视图正在填充正确的数据。但是，我还希望在我的详细视图中有子视图以包含一个地图视图，当详细视图显示特定数据时，它会根据街道地址或坐标而变化。

我可以按照下面的代码在我的 detailview.m 文件中创建一个地图视图/子视图，但我选择的每一行/单元格的地图都保持不变。我希望地图每行/单元格选择不同的坐标，并在详细视图中显示数据。

```
//Create NSCC MapView

MKMapView * mapView = [[MKMapView alloc] initWithFrame:CGRectMake(0, 446, 768, 415)];
[mapView setMapType:MKMapTypeStandard];
[mapView setZoomEnabled:YES];
[mapView setScrollEnabled:YES];
MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
region.center.latitude = 40.494828;
region.center.longitude = -74.443016;
region.span.longitudeDelta = 0.01f;
region.span.latitudeDelta = 0.01f;
[mapView setRegion:region animated:YES];

[mapView setDelegate:self];

//Set PIN Location for NSCC on MKMapView

NSCCDisplayMap *ann = [[NSCCDisplayMap alloc] init];
ann.title = @"NSCC New Brunswick";
ann.subtitle = @"18 Paterson Street New Brunswick, NJ 08901";
ann.coordinate = region.center;
[mapView addAnnotation:ann];

//Add NSCC MKMapView object as a subview to our view

[self.view addSubview:mapView]; 
```

所以我想我真正的问题是：？？？

1.  当我在我的表格视图中选择行/单元格并在我的详细视图中为七个行/单元格中的每一个正确显示来自数据库的 json 数据时，我怎样才能让地图视图更改为与显示的数据相关的适当坐标详细视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:58:49.247

如果您查看代码的这些行 -

```
region.center.latitude = 40.494828;
region.center.longitude = -74.443016; 
```

那么它清楚地表明您没有使用不同的`latitude`并`longitude`更改 的区域`MKMapView`，而不是您在此处硬编码了一些值。

您需要在这里做的是，当您选择一行时，`UITableView`您必须将与该行对应的坐标传递给您的详细信息视图。然后使用这些坐标来改变 的区域`MKMapView`。

# python - 让 Sphinx 在 PDF 输出中生成非典型代码块

> ID：16158605
> 
> 赞同：9
> 
> 时间：2013-04-22T23:49:17.913
> 
> 标签：python, latex, python-sphinx

PDF 输出中的代码块看起来很难看（检查引号）：

![在此处输入图像描述](https://i.stack.imgur.com/V8AoM.png)

我使用 1.1.3 版的 Sphinx，并使用以下命令生成文档：

```
$ make latexpdf 
```

此外，从 PDF 复制代码段会在粘贴时破坏缩进：

```
@view_config(route_name=’hello’)
def hello_world(request):
return Response(’Hello World!’) 
```

我希望这样：

```
@view_config(route_name=’hello’)
def hello_world(request):
    return Response(’Hello World!’) 
```

这会更好：

```
@view_config(route_name='hello')
def hello_world(request):
    return Response('Hello World!') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:36:22.697

Sphinx 确实是一个出色的工具，但我对 latexpdf 目标的默认 PDF 输出也有一些问题。

具体来说：

*   代码块中的单引号被转换为在源代码中看起来不正确的尖锐样式引号。
*   代码块没有从正文中缩进。对我来说，这使它们的可读性降低。
*   我更喜欢其他字体和 pygments，但这只是个人选择，可以配置。

其中一些可以在 Sphinx conf.py 的 LaTeX 前导部分中修复，但 Sphinx 将引号修改为自定义 LaTeX 实体，因此不能使用[upquote LaTeX 包来更正它们。](http://www.ctan.org/tex-archive/macros/latex/contrib/upquote)

在对不同的配置选项进行了大量实验之后，我最终编写了一个小脚本来在构建 PDF 之前修改 LaTeX 源代码。脚本在[这里](https://github.com/jmcnamara/XlsxWriter/blob/master/dev/release/modify_latex.pl)，我想要生成的输出在[这里](https://github.com/jmcnamara/XlsxWriter/blob/master/docs/XlsxWriter.pdf?raw=true)。（为了比较[，这里](https://media.readthedocs.org/pdf/xlsxwriter/latest/xlsxwriter.pdf)是同一文档的默认输出。）

如果有人有一个更清洁的解决方案，例如可以完全通过 Sphinx conf.py 完成的解决方案，那么 ReadTheDocs 会获取这些更改，[那么](https://readthedocs.org/)我会感兴趣。

此外，从 PDF 复制和粘贴时丢失缩进的问题可能不是 Sphinx/LaTeX 问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T06:57:00.423

这只是可能导致最终解决方案的部分答案。要在 Sphinx 中禁用 HTML 输出的印刷引号（也称为弯引号或智能引号），请将 SmartyPants 的[conf.py中的默认设置](http://sphinx-doc.org/config.html?highlight=smartypants#confval-html_use_smartypants) [从 True 更改为 False](https://github.com/Pylons/pyramid/commit/ffdc8cbde4fa77d55f159c4c085e0b51f8029674#diff-85987f48f1258d9ee486e3191495582d)。

我假设人们可以在 Sphinx 中找到转换引号的函数，并使用来自 HTML 输出的相同逻辑并将其应用于 PDF 输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-13T10:26:46.530

[Steve Piercy 提出的选项](https://stackoverflow.com/a/19175135)现在不再有效（自 Sphinx 1.6 起）：

```
Deprecated since version 1.6: Use the smart_quotes option 
in the Docutils configuration file (docutils.conf) instead. 
```

对我来说不明显的是如何应用此设置。您需要创建一个`docutils.conf`文件并将其放在[以下位置之一](http://docutils.sourceforge.net/docs/user/config.html#configuration-files)：

*   /etc/docutils.conf
*   ./docutils.conf
*   ~/.docutils

最简单的选择是将它放在您从中构建文档的位置 - YMMV。它至少应包含以下内容：

```
[general]
smart_quotes: no 
```

# c - C 编译器无法在 Ubuntu 12.04 中创建可执行文件

> ID：16158609
> 
> 赞同：6
> 
> 时间：2013-04-22T23:49:26.167
> 
> 标签：c, compiler-construction, ubuntu-12.04

我正在尝试为莱特币配置 cpuminer，我得到了

```
checking whether the C compiler works... no
configure: error: in `/home/username/cpuminer-2.2.3':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

这是在 Ubuntu 12.04 x64 上。

我不确定会发生什么，但我已经运行更新并安装了 gcc。我阅读了许多文章，但它们似乎指向不同的东西。

config.log 的输出是

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by cpuminer configure 2.2.3, which was
generated by GNU Autoconf 2.68\.  Invocation command line was

  $ ./configure CFLAGS=-03

## --------- ##
## Platform. ##
## --------- ##

hostname = comanche
uname -m = x86_64
uname -r = 3.5.0-27-generic
uname -s = Linux
uname -v = #46-Ubuntu SMP Mon Mar 25 19:58:17 UTC 2013

/usr/bin/uname -p = unknown
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = unknown
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /usr/local/sbin
PATH: /usr/local/bin
PATH: /usr/sbin
PATH: /usr/bin
PATH: /sbin
PATH: /bin

## ----------- ##
## Core tests. ##
## ----------- ##

configure:2300: checking build system type
configure:2314: result: x86_64-unknown-linux-gnu
configure:2334: checking host system type
configure:2347: result: x86_64-unknown-linux-gnu
configure:2367: checking target system type
configure:2380: result: x86_64-unknown-linux-gnu
configure:2424: checking for a BSD-compatible install
configure:2492: result: /usr/bin/install -c
configure:2503: checking whether build environment is sane
configure:2553: result: yes
configure:2694: checking for a thread-safe mkdir -p
configure:2733: result: /bin/mkdir -p
configure:2746: checking for gawk
configure:2776: result: no
configure:2746: checking for mawk
configure:2762: found /usr/bin/mawk
configure:2773: result: mawk
configure:2784: checking whether make sets $(MAKE)
configure:2806: result: yes
configure:2890: checking whether to enable maintainer-specific portions of Makefiles
configure:2899: result: no
configure:2925: checking for style of include used by make
configure:2953: result: GNU
configure:3024: checking for gcc
configure:3040: found /usr/bin/gcc
configure:3051: result: gcc
configure:3280: checking for C compiler version
configure:3289: gcc --version >&5
gcc (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:3300: $? = 0
configure:3289: gcc -v >&5
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.2-2ubuntu1' --    with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-    languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared     --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext     --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --    enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-    libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-    werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-    linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1) 
configure:3300: $? = 0
configure:3289: gcc -V >&5
gcc: error: unrecognized command line option '-V'
gcc: fatal error: no input files
compilation terminated.
configure:3300: $? = 4
configure:3289: gcc -qversion >&5
gcc: error: unrecognized command line option '-qversion'
gcc: fatal error: no input files
compilation terminated.
configure:3300: $? = 4
configure:3320: checking whether the C compiler works
configure:3342: gcc -03   conftest.c  >&5
gcc: error: unrecognized command line option '-03'
configure:3346: $? = 1
configure:3384: result: no
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "cpuminer"
| #define PACKAGE_TARNAME "cpuminer"
| #define PACKAGE_VERSION "2.2.3"
| #define PACKAGE_STRING "cpuminer 2.2.3"
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE_URL ""
| #define PACKAGE "cpuminer"
| #define VERSION "2.2.3"
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:3389: error: in `/home/username/cpuminer-2.2.3':
configure:3391: error: C compiler cannot create executables
See `config.log' for more details

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_build=x86_64-unknown-linux-gnu
ac_cv_env_CCASFLAGS_set=
ac_cv_env_CCASFLAGS_value=
ac_cv_env_CCAS_set=
ac_cv_env_CCAS_value=
ac_cv_env_CC_set=
ac_cv_env_CC_value=
ac_cv_env_CFLAGS_set=set
ac_cv_env_CFLAGS_value=-03
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_LDFLAGS_set=
ac_cv_env_LDFLAGS_value=
ac_cv_env_LIBS_set=
ac_cv_env_LIBS_value=
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=
ac_cv_env_host_alias_value=
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_host=x86_64-unknown-linux-gnu
ac_cv_path_install='/usr/bin/install -c'
ac_cv_path_mkdir=/bin/mkdir
ac_cv_prog_AWK=mawk
ac_cv_prog_ac_ct_CC=gcc
ac_cv_prog_make_make_set=yes
ac_cv_target=x86_64-unknown-linux-gnu

## ----------------- ##
## Output variables. ##
## ----------------- ##

ACLOCAL='${SHELL} /home/username/cpuminer-2.2.3/missing --run aclocal-1.11'
ALLOCA=''
AMDEPBACKSLASH='\'
AMDEP_FALSE='#'
AMDEP_TRUE=''
AMTAR='$${TAR-tar}'
ARCH_x86_64_FALSE=''
ARCH_x86_64_TRUE=''
ARCH_x86_FALSE=''
ARCH_x86_TRUE=''
AUTOCONF='${SHELL} /home/username/cpuminer-2.2.3/missing --run autoconf'
AUTOHEADER='${SHELL} /home/username/cpuminer-2.2.3/missing --run autoheader'
AUTOMAKE='${SHELL} /home/username/cpuminer-2.2.3/missing --run automake-1.11'
AWK='mawk'
CC='gcc'
CCAS=''
CCASDEPMODE=''
CCASFLAGS=''
CCDEPMODE=''
CFLAGS='-03'
CPP=''
CPPFLAGS=''
CYGPATH_W='echo'
DEFS=''
DEPDIR='.deps'
ECHO_C=''
ECHO_N='-n'
ECHO_T=''
EGREP=''
EXEEXT=''
GREP=''
HAVE_WINDOWS_FALSE=''
HAVE_WINDOWS_TRUE=''
INSTALL_DATA='${INSTALL} -m 644'
INSTALL_PROGRAM='${INSTALL}'
INSTALL_SCRIPT='${INSTALL}'
INSTALL_STRIP_PROGRAM='$(install_sh) -c -s'
JANSSON_LIBS=''
LDFLAGS=''
LIBCURL=''
LIBCURL_CPPFLAGS=''
LIBOBJS=''
LIBS=''
LTLIBOBJS=''
MAINT='#'
MAINTAINER_MODE_FALSE=''
MAINTAINER_MODE_TRUE='#'
MAKEINFO='${SHELL} /home/username/cpuminer-2.2.3/missing --run makeinfo'
MKDIR_P='/bin/mkdir -p'
OBJEXT=''
PACKAGE='cpuminer'
PACKAGE_BUGREPORT=''
PACKAGE_NAME='cpuminer'
PACKAGE_STRING='cpuminer 2.2.3'
PACKAGE_TARNAME='cpuminer'
PACKAGE_URL=''
PACKAGE_VERSION='2.2.3'
PATH_SEPARATOR=':'
PTHREAD_FLAGS=''
PTHREAD_LIBS=''
RANLIB=''
SET_MAKE=''
SHELL='/bin/bash'
STRIP=''
VERSION='2.2.3'
WANT_JANSSON_FALSE=''
WANT_JANSSON_TRUE=''
WS2_LIBS=''
_libcurl_config=''
ac_ct_CC='gcc'
am__EXEEXT_FALSE=''
am__EXEEXT_TRUE=''
am__fastdepCCAS_FALSE=''
am__fastdepCCAS_TRUE=''
am__fastdepCC_FALSE=''
am__fastdepCC_TRUE=''
am__include='include'
am__isrc=''
am__leading_dot='.'
am__nodep='_no'
am__quote=''
am__tar='$${TAR-tar} chof - "$$tardir"'
am__untar='$${TAR-tar} xf -'
bindir='${exec_prefix}/bin'
build='x86_64-unknown-linux-gnu'
build_alias=''
build_cpu='x86_64'
build_os='linux-gnu'
build_vendor='unknown'
datadir='${datarootdir}'
datarootdir='${prefix}/share'
docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
dvidir='${docdir}'
exec_prefix='NONE'
host='x86_64-unknown-linux-gnu'
host_alias=''
host_cpu='x86_64'
host_os='linux-gnu'
host_vendor='unknown'
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
install_sh='${SHELL} /home/username/cpuminer-2.2.3/install-sh'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
mandir='${datarootdir}/man'
mkdir_p='/bin/mkdir -p'
oldincludedir='/usr/include'
pdfdir='${docdir}'
prefix='NONE'
program_transform_name='s,x,x,'
psdir='${docdir}'
sbindir='${exec_prefix}/sbin'
sharedstatedir='${prefix}/com'
sysconfdir='${prefix}/etc'
target='x86_64-unknown-linux-gnu'
target_alias=''
target_cpu='x86_64'
target_os='linux-gnu'
target_vendor='unknown'

## ----------- ##
## confdefs.h. ##
## ----------- ##

/* confdefs.h */
#define PACKAGE_NAME "cpuminer"
#define PACKAGE_TARNAME "cpuminer"
#define PACKAGE_VERSION "2.2.3"
#define PACKAGE_STRING "cpuminer 2.2.3"
#define PACKAGE_BUGREPORT ""
#define PACKAGE_URL ""
#define PACKAGE "cpuminer"
#define VERSION "2.2.3"

configure: exit 77 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-23T00:11:24.217

看起来 gcc 是用 option`-03`而不是 调用的`-O3`，导致它出错。检查您可能指定的任何 CFLAGS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-30T17:58:34.260

我在构建 xz-5.0.5 时遇到了与原始海报相同的问题。
CFLAGS 参数没有问题。配置脚本试图验证编译器是否符合 c99。
我需要添加 CFLAGS 选项**--std=c99**以使其能够通过配置脚本中的此检查：

```
./configure CC=gcc CFLAGS="--std=c99 -O3" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T06:39:45.250

它对我有用：我将 LIBS 更改为 CLIBS

# c++ - cout 输入模板

> ID：16158611
> 
> 赞同：1
> 
> 时间：2013-04-22T23:49:29.540
> 
> 标签：c++, templates, stream, cout

我想创建一个函数，该函数接受`<<`操作员`std::cout`可以处理的任何内容。我有一个打破的例子。

```
#include <iostream>

template <typename T>
void my_print(const T &t) {
  std::cout << t;
}

int main() {
  my_print("hello\n"); // works
  my_print(4); // works
  my_print(std::endl); // compiler error
  return 0;
} 
```

如果我更改为`void my_print(T t)`. 编译器错误是

```
错误：没有匹配的函数调用'my_print（<未解析的重载函数类型>）'
注：候选人是
注意：模板<class T> void my_print(const T&)
```

为什么编译器看到参数`t`被放入时不能解析它`cout`？

有什么好的方法可以解决这个问题还是我必须手动提供额外的`<<`案例，例如`void my_print(ostream& (*pf)(ostream&));`

编辑：我知道`endl`是一个函数。那么答案是函数类型不被接受为模板吗？好像我不能拥有`[T = ostream& (*)(ostream&)]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:52:50.557

`std::endl`实际上是一个函数模板。[您可以在此处](http://en.cppreference.com/w/cpp/io/manip/endl)或[此处](http://www.cplusplus.com/reference/ostream/endl/)阅读完整的文档。它被定义为：

```
template< class CharT, class Traits >
std::basic_ostream<charT,traits>& endl( std::basic_ostream<CharT, Traits>& os ); 
```

编辑：你可以使用这个解决方案来实现你想要的（我从[这里](https://stackoverflow.com/a/1134467/401200)模糊地改编了）

```
#include <iostream>

// handles the other types
template <typename T>
void my_print(const T &t) {
  std::cout << t;
}

// alias a few things to make the prototypes readable
typedef std::basic_ostream<char, std::char_traits<char> > CoutType;
typedef CoutType& (*StandardEndLine)(CoutType&);

int main() {
  my_print("hello\n"); // works
  my_print(4); // works
  my_print((StandardEndLine)std::endl); // <- NOTE: there is an explicit cast
  return 0;
} 
```

# .net - 最好在任务内部或外部抛出 NotSupportedException？

> ID：16158613
> 
> 赞同：4
> 
> 时间：2013-04-22T23:50:08.670
> 
> 标签：.net, .net-4.0, task-parallel-library

我们有一个下游系统，一个 ERP 系统，它可以通过 SOAP 公开其表。它发布的 Web 服务通常具有 Create、Update 和 Delete 方法。然后，我们使用包含异步方法的 svcutil 在我们端生成代理。最后，我们在它前面放了一个 ACL，供其他系统交互。

我们还刚刚发现了一个重要的不变量——项目的成本计算信息不能由 ERP 系统本身以外的任何东西更新。然而，真正愚蠢的 API 将允许消费者这样做。

我解决这个问题的想法是对 WCF 代理进行子类化，并具有用于更新该 throw 的显式实现`NotSupportedException`。不，这不会阻止开发人员生成自己的代理并执行此操作。但至少我们可以保证在通过我们的 ACL 时不会发生这种情况。

```
 Update_Result Item_Port.Update(Update request)
    {
        throw new NotSupportedException();
    } 
```

对于异步方法，我可以这样做

```
 Task<Update_Result> Item_Port.UpdateAsync(Update request)
    {
        throw new NotSupportedException();
    } 
```

或者

```
 Task<Update_Result> Item_Port.UpdateAsync(Update request)
    {
        return Task.Factory.StartNew<Update_Result>(() =>
        {
            throw new NotSupportedException();
        });
    } 
```

从异步的角度来看，哪个更“正确”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T23:59:26.437

两者会有不同的行为。

在第一种情况下，此 API 的调用者将`NotSupportedException`在调用此方法后立即获得。

在您的第二种情况下，呼叫者将收到一个故障`Task<T>`（或在拨打电话后不久将出现故障）。这将导致任务继续或获取任务的值时出现异常（通过`task.Result`）。

鉴于您的目标，我个人会采用第一种方法。这具有更少的开销（您没有创建任务），并且它使呼叫站点立即明显地发现有问题。虽然它不如编译时错误好，但在调试过程中被遗漏的可能性要小得多，因为即使以“即发即弃”的方式调用任务也会抛出它。

# ios - 在 UIView 与 UIViewController 上绘图

> ID：16158615
> 
> 赞同：2
> 
> 时间：2013-04-22T23:50:11.373
> 
> 标签：ios, objective-c, xcode

我是 CG 绘图的新手，我对 CG 代码的去向感到困惑。

是什么阻止了将绘图函数放在 UIViewController 和 UIView 中的想法？我应该如何确定 CG 代码的哪些部分应该放在哪里？我看到一些教程在视图控制器的 viewDidLoad 中有代码，但其他人说它在视图中。什么决定什么去哪里？

（是的，这是一个 MVC 问题，但我仍然难以区分。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T23:55:58.523

自定义绘图代码的正确位置（几乎总是）`drawRect`在`UIView`. 通常的方法是创建 UIView 的自定义子类，并将其作为视图控制器的根视图。例如，在视图控制器的`loadView`方法中，您可以分配（`self.view = [[MyCustomView alloc] init];`如果您使用非 ARC 代码，则自动释放该视图！）然后您的自定义绘图代码应该进入`drawRect`.`MyCustomView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:57:07.107

Core Graphics 绘图代码可以去任何有效上下文的地方。这意味着如果您创建自己的上下文，它可以进入您自己的函数。

您通常将 Core Graphics 绘图代码放在 UIView 子类中的原因是您通常可能希望将代码封装在可重用的形式中。但是如果你打算从 Core Graphics 代码创建一个图像，你可以轻松地启动一个新的图像上下文，绘制，然后将上下文的内容保存到 UIImage 中。这种类型的绘图可以去任何地方，甚至是 UIViewController。Core Graphics 绘图甚至可用于生成 PDF。它只是一个简单的几何绘图框架。只要您有一个有效的上下文，无论`drawRect:`是在 UIView 中调用之前创建的上下文还是在命令中创建的上下文。

# jquery - 使用 Jquery 循环通过多个元素类型过滤的表单输入元素

> ID：16158616
> 
> 赞同：-1
> 
> 时间：2013-04-22T23:50:19.030
> 
> 标签：jquery, html, forms, radio-button

我有一个循环表单的 jQuery 函数：

```
var id = 'doesnt-matter';

$('#element_'+id+' input:[type!=hidden]').each(function () {
  // do stuff
}); 
```

我想排除隐藏字段和单选按钮。我试图做类似的事情

```
$('#element_'+id+' input:[type!=hidden, type!=radio]').each(function () {
  // do stuff
}); 
```

但这不起作用。是否可以这样做，或者我是否需要在循环内部检查 input:type ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:52:20.913

```
$('#element_'+id+' input[type!="hidden"][type!="radio"]').each(function () {
    // do stuff
}); 
```

请参阅：
[多属性选择器文档](http://api.jquery.com/multiple-attribute-selector/)
[属性不等于选择器文档](http://api.jquery.com/attribute-not-equal-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T23:52:59.993

```
$('#element_'+id+' input').not("[type=hidden],[type=radio]").each(function () {
 // do stuff
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T23:51:57.627

你可以使用`not`方法。

```
$('#element_'+id+' input').not('[type=hidden], [type=radio]').each(function() {
       // do stuff
}); 
```

# jquery - 在“每个”函数中使用 jQuery 查询 JSON 数据

> ID：16158626
> 
> 赞同：0
> 
> 时间：2013-04-22T23:51:25.333
> 
> 标签：jquery, json, each

我是 JSON 新手，正在尝试找到一种方法来查询 JSON 数据并将信息带到`<div>`我页面上的适当位置。我正在使用 Volusion，所以对代码的访问是有限的（它主要是从服务器端脚本动态生成的），所以我不得不做一些变通方法。基本上有一个产品表，获取产品代码的唯一方法是从这些产品的锚标签上生成的 URL 中获取它（每个产品都设置有一个链接，例如，/ ProductDetails.asp?ProductCode=aroma 用于芳香产品）。我编写了 Javascript 来提取产品代码（从 URL 的末尾）并将其设置为名为 productCode 的变量。

在我的 JSON 数据中，我将其设置为：

```
[
    {
        "item": "aroma",
        "title": "Aromatherapy Oils",
        "price": "$10.00",
    },

    {
        "item": "ah-chairbamboo",
        "title": "Modern Bamboo Chair",
        "price": "$100.00",
    },
    {
        "item": "hc-mirror",
        "title": "Cordless LED Lighting Pivoting Vanity Mirror",
        "price": "$45.00",
    },
    {
        "item": "macfrc",
        "title": "French Macarons",
        "price": "$15.00",
    }
] 
```

如果我想从 JSON 表中获取标题，其中“aroma”是项目并将其附加到 div 中的产品容器中怎么办？我的代码现在获取产品代码的方式是：

```
$(".v65-productDisplay a").each(function(){
    var productHref = $(this).attr("href");
    var productCode = productHref.substring(19,productHref.length); 
```

这是有效的，因为我已经提醒了 productCodes 并且它们都是正确的。

我希望这个 JSON 查询显然在每个函数中，以便它在页面上的每个产品上运行。用英语，我想说“如果项目值与 JSON 表中的产品代码匹配，我想打印出那个标题和价格”（是的，我知道这不是很好的英语......）。

我第一次查询它（并提醒值）失败的尝试是在这里。这是在：

```
$(".v65-productDisplay a").each(function(){
var productHref = $(this).attr("href");
var productCode = productHref.substring(19,productHref.length);

$.getJSON("/v/vspfiles/data/productinfo.js", function (data) {
            $.each(data, function () {
                  if (productCode = this['item'])
                     alert(this['price']); 
            });
        }); 
```

});

但这没有用。抱歉，如果这令人困惑，我正在尝试自己解开它。非常感谢您的帮助。

* * *

编辑

下面是 PSCoder 的回答之后的一个新的更新片段，但仍然不能完全正常工作：

```
$.getJSON("/v/vspfiles/data/productinfo.js", function (data) {
        $.each(data, function (i,o) {
              if (productCode == o.item)
                 alert(o.price); 
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:55:29.457

你可以这样做：

```
$.getJSON("/v/vspfiles/data/productinfo.js", function (data) {
            $.each(data, function () {
                  if (productCode.trim() === this.item)
                     console.log(this['price']); 
            });
        }); 
```

# java - 传递参数（新手）（Java）

> ID：16158627
> 
> 赞同：2
> 
> 时间：2013-04-22T23:51:28.190
> 
> 标签：java, parameter-passing, pass-by-value

当谈到 Java 时，我是相当初学者，因为我更关注大学的 Js，而不是它的 OOP 重的兄弟，因此，我不能完全正确地传递我的参数。

我希望在“generateMonsterCode”中生成一个随机数并将其传递给“chooseMonster”，但我不太了解如何完成此操作。

```
/**
 * Randomnly choose a type of monster of varying hp/mp/loot drops
 * @return rndGen
 */
public int generateMonsterCode (){
    Random rndGens = new Random();
    int rndGen = 0;

    for (int i = 1; i < 2; i++) {
       rndGen = rndGens.nextInt(4) + 1;
    }

    return rndGen;
}

/**
 * Define which monster is chosen
 */
public void chooseMonster(){

    switch(rndGen){
        case 1: System.out.println("Monster:" + rndGen);
        case 2: System.out.println("Monster:" + rndGen);
        case 3: System.out.println("Monster:" + rndGen);
        case 4: System.out.println("Monster:" + rndGen);
    }     
} 
```

任何帮助将不胜感激！

**关于反馈的更新**

```
 /**
 * Randomnly choose a type of monster of varying hp/mp/loot drops
 * @return rndGen
 */

public void generateMonsterCode (){
Random rndGens = new Random();
    int rndGen = 0;

    rndGen = rndGens.nextInt(4) + 1;

    chooseMonster(rndGen);

}

/**
 * Define which monster is chosen
 */

private void chooseMonster(int rndGen){

    switch(rndGen){
    case 1: System.out.println("Monster:" + rndGen);
            break;
    case 2: System.out.println("Monster:" + rndGen);
            break;
    case 3: System.out.println("Monster:" + rndGen);
            break;
    case 4: System.out.println("Monster:" + rndGen);
            break;
    }

} 
```

这可能是更好的代码实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:54:34.680

通过将参数放在方法声明旁边的括号中来指定参数。

`public void chooseMonster()`是一种不带参数的方法。

`public void chooseMonster(int i){`将 int 作为参数并`i`在方法的范围内对其进行命名。

当您为方法指定参数时，您必须传递调用它时指定类型的变量。因此，在`generateMonsterCode()`生成随机数之后，您只需调用`chooseMonster(rndgen)`.

在该方法中，您可以使用以下方法引用`int`您传递给它的内容：

`i.doSomething()`;

这有意义吗？如果我能更仔细地解释一下，请告诉我：我在这里讨论了面向对象编程的一些基本方面，如果你想在未来担任角色，掌握这些概念很重要。

仅供参考：方法声明的另一端是返回类型 - 在您的情况下，它是 void，这意味着没有返回任何内容。另一种构造它的方法是让你的`generateMonsterCode()`方法返回一个int：

```
public int generateMonsterCode(){ 
    .... generate random number
    return rdngen(); 
```

并在方法的开头调用它`chooseMonster()`。

```
public void chooseMonster() {
      int i = generateMonsterCode();
      ... do work
} 
```

请注意，这不一定比其他方式更好或更差，我只是出于解释的目的提及它。

另外仅供参考：@supericy 关于您在随机生成中使用的 for 循环是正确的。而且您可能还应该检查`public`访问修饰符的作用以及您是否真的需要它（您可能不需要） - 但这些问题超出了您的问题范围。

# tfs - 安装 TFS 2012 - 更新 2 后出错

> ID：16158629
> 
> 赞同：0
> 
> 时间：2013-04-22T23:51:49.803
> 
> 标签：tfs

我有一个带有更新 1 的 TFS 2012 环境，今天我将此环境更新为更新 2，安装成功完成，但我的门户网站访问不工作并返回以下错误

无法加载文件或程序集“System.Web.WebPages.Deployment，Version=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

在更新之前，我的环境运行平稳，但现在安装 Updete 2 后无法正常工作

这个错误是关于 ASP NET MVC 的，好吗？

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:26:15.820

我自己还没有安装更新 2，但你检查过你的`administration console`吗？并检查您的`event viewer`，也许您会在那里找到可以帮助您的有趣信息/错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T00:35:39.920

这看起来像是过去的经典狩猎和啄食。我不知道这会影响什么类型的安装，但我的是 2008 x64。基本上，我去了团队的web.config（程序文件，长路径，11.0，web...\bin）并启用了错误报告。

然后我用 IE 在 localhost 寻址中加载它以进入团队项目。基本上，它正在寻找一堆 .NET 2.0 DLL。将它正在寻找的每一个（找到它们在根目录下执行 dir /s，有一些）复制到本地 bin 文件夹。

想着这些日子已经过去了。希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:29:05.030

我已经安装了更新 2，但没有遇到您遇到的问题。我确实遇到了一些问题，最终关闭了门户的应用程序池，并`TFSServiceControl quiesce`在安装更新之前使用命令禁用了服务器上的 TFS。

我注意到的一件事是 TFS Update 2 将 .Net 4.0 版本的“System.Web.WebPages.Deployment”安装到 GAC 的位置：

C:\Windows\Microsoft.NET\assembly\GAC_MSIL\System.Web.WebPages.Deployment\v4.0_2.0.0.0__31bf3856ad364e35

假设您正在运行 x64，则此程序集的 .Net 2.0 版本在

C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v2.0\Assemblies

或者对于 x32 它应该在

C:\Program Files\Microsoft ASP.NET\ASP.NET 网页\v2.0\Assemblies

我建议将此 DLL 的 .Net 2.0 版本从该位置复制到 TFS 门户的 bin 文件夹，看看这是否能解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-13T09:44:58.520

将 TFS2012 RTM 升级到更新 4 后，我遇到了完全相同的问题。

我能够通过将应用程序池的用户修改为 TFS 管理员用户（我认为它被设置为网络服务）来解决问题。

# java - 从同一个 Storage 对象创建的 Insert 对象可以同时执行吗？

> ID：16158644
> 
> 赞同：4
> 
> 时间：2013-04-22T23:52:56.640
> 
> 标签：java, google-api-java-client, google-cloud-storage, google-api-client

我正在使用 Google 的 Java API 来处理 Google Cloud Storage (GCS)。

我有多个将对象插入 GCS 的工作线程。目前他们共享一个公共[`Storage`](http://javadoc.google-api-java-client.googlecode.com/hg/apis/storage/v1beta1/index.html)实例，并使用它来创建[`Storage.Object.Insert`](http://javadoc.google-api-java-client.googlecode.com/hg-history/92901c2b5aea5d9747060b3d240d64f38ea0b60c/apis/storage/v1beta1/com/google/api/services/storage/Storage.Objects.Insert.html)实例：

```
synchronized(LOCK)
{
    insertObject = mStorage.objects().insert(mBucketName, objectMetadata, mediaContent);
} 
```

他们稍后调用`execute()`实例`Insert`，将文件上传到 GCS。

```
insertObject.execute(); 
```

我的问题是我可以`execute()`在不同的线程中同时运行调用吗？该`Insert`对象是该线程独有的，但`Storage`创建它的对象是线程之间共享的，所以我担心这可能会导致问题。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-20T14:41:15.237

是的！:)

也就是说，假设您使用的 HttpTransport 实例是线程安全的，那么拥有一个共享的 Storage 实例应该是线程安全的。不安全的是在不提供额外锁定的情况下跨线程共享请求类本身或其响应。但只要每个线程都使用自己的请求类，它是安全的，实际上建议跨线程共享存储和实例。

注意：我是 google-api-java-client 项目的所有者

# android - 带有 SDK 8 的操作栏、OutlookBar、导航栏

> ID：16158647
> 
> 赞同：0
> 
> 时间：2013-04-22T23:53:28.423
> 
> 标签：android, navigation, outlook

我想要一个包含例如 6 个带有文本的图标的操作栏（导航或前景栏）。如果我单击一个图标，我想用一个内部控件替换外部控件的内容区域（嵌套 6 个按钮）以及顶部的小后退菜单。后退按钮还可以指示我们所在的位置。所以它与microsoft office 中使用的outlook bar 很接近。

我正在使用 android:minSdkVersion="8"。所以我没有仔细看android操作栏。我目前正在使用选项卡控件。但是，选项卡控件并不是我真正想要的。或者可以调整它以提供我描述的功能吗？我在运行时创建控件，所以如果有人知道如何让它接近我正在搜索的内容，我可以调整它。作为替代方案，我希望有一个具有这种控件的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T09:09:18.497

[Android 支持库，修订版 18](http://developer.android.com/tools/support-library/index.html)将对 ActionBar 的支持扩展到 API v7。[有](http://developer.android.com/tools/support-library/setup.html#libs-with-res)很好的说明如何将它（v7 appcompat）导入到您的项目中。

# python - Python 的 zipfile 模块的更快替代方案？

> ID：16158648
> 
> 赞同：14
> 
> 时间：2013-04-22T23:53:47.030
> 
> 标签：python, performance, zipfile

Python 2.7.4 zipfile 模块（使用 ZIP_DEFLATED）是否有明显更快的替代方法，用于将大量文件压缩到单个 zip 文件中？我查看了 czipfile [https://pypi.python.org/pypi/czipfile/1.0.0](https://pypi.python.org/pypi/czipfile/1.0.0)，但这似乎专注于更快的解密（而不是压缩）。

我经常不得不处理大量图像文件（约 12,000 个 .exr 和 .tiff 文件组合的文件），每个文件的大小在 ~1MB 到 6MB 之间（所有文件约为 9 GB）成一个用于装运的 zip 文件。处理此压缩大约需要 90 分钟（在 Windows 7 64 位上运行）。

如果有人可以推荐一个不同的 python 模块（或者一个 C/C++ 库，甚至是一个独立的工具），它能够在比 zipfile 模块更短的时间内将大量文件压缩成一个 .zip 文件，那就是非常感谢（任何接近约 5-10% 的速度（或更多）都会非常有帮助）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T01:47:00.503

正如 Patashu 提到的，外包给 7-zip 可能是最好的主意。

这里有一些示例代码可以帮助您入门：

```
import os
import subprocess

path_7zip = r"C:\Program Files\7-Zip\7z.exe"
path_working = r"C:\temp"
outfile_name = "compressed.zip"
os.chdir(path_working)

ret = subprocess.check_output([path_7zip, "a", "-tzip", outfile_name, "*.txt", "*.py", "-pSECRET"]) 
```

正如 martineau 所提到的，您可以尝试使用压缩方法。[本页](http://www.dotnetperls.com/7-zip-examples)提供了一些有关如何更改命令行参数的示例。

# .htaccess - htaccess 从 %{HTTP_HOST} 获取域名到变量中，减去 www

> ID：16158649
> 
> 赞同：9
> 
> 时间：2013-04-22T23:53:54.953
> 
> 标签：.htaccess, mod-rewrite

我目前在 htaccess 文件中有以下内容，如果根目录中不存在该文件，该文件会将某些请求重定向到所请求域的单个文件夹。

```
RewriteRule ^contact/?$ ASSETS/%{HTTP_HOST}/contact.php

RewriteCond %{REQUEST_URI} !^/ASSETS/%{HTTP_HOST}/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /ASSETS/%{HTTP_HOST}/$1
RewriteCond %{HTTP_HOST} ^(www.)?%{HTTP_HOST}$
RewriteRule ^(/)?$ ASSETS/%{HTTP_HOST}/index.php [L] 
```

当我的域文件夹命名为 /ASSETS/www.domain1.com、/ASSETS/www.domain2.com 等时，它可以正常工作

但是，我已经构建了很多代码，假设文件夹将被标记为 /ASSETS/domain1.com 等（域名，减去 www。）

我在想有一种方法可以将域名从 %{HTTP_HOST} 获取到一个新变量中并去掉 www. 部分（如 str_replace 或其他东西），但我找到的所有答案都是围绕基本重定向全部到 www。或没有 www。这是行不通的，因为我仍然希望用户从强制 www 访问该站点。版本。

我以前使用 RewriteCond %{HTTP_HOST} ^(www.)?domain1.com$ 为每个域单独运行规则，但现在有这么多域，为每个域都这样做是不可行的。

希望你能帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T04:49:26.033

您可以使用 a 捕获所需的主机部分[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)并像`%1`在[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

```
RewriteCond %{HTTP_HOST} ^(?:www\.)?(.+)$
RewriteRule ^$ ASSETS/%1/index.php [L] 
```

* * *

文件系统级别（没有 htaccess）的替代解决方案可能是符号链接。与其提取必要的主机部分，不如使用指向真实目录的符号链接，例如

```
- ASSETS -+-domain1.com (directory)
          |
          +-www.domain1.com -> domain1.com (symbolic link)
          |
          +-domain2.com (directory)
          |
          +-www.domain2.com -> domain2.com (symbolic link) 
```

* * *

为了说明不同的反向引用，请参见另一个示例

```
RewriteCond %{HTTP_HOST} ^(?:www\.)?(.+)$
RewriteRule ^foo/(.+)$ $1/%1/index.php [L] 
```

*   这里我们有一个`$1`，它从*RewriteRule*模式中获取捕获组`foo/(.+)`。
*   我们有一个`%1`，它从之前的*RewriteCond* `(?:www\.)?(.+)`中获取捕获组。
    请注意，这`(?:...)`是一个[*非捕获*](https://www.regular-expressions.info/brackets.html#noncap)组。这就是为什么我们使用`%1`而不是`%2`.

# sql - 在 JavaDB apache derby 中，我不知道是什么导致了错误：语法错误：在第 30 行第 1 列遇到“）”。SQLState：42X01

> ID：16158651
> 
> 赞同：1
> 
> 时间：2013-04-22T23:54:08.047
> 
> 标签：sql, syntax-error, derby, javadb

```
CREATE TABLE "TravelerProfile" (
  "idTravelerProfile" int NOT NULL,
  "AccountID" int NOT NULL,
  "GivenName" varchar(45) DEFAULT NULL,
  "FamilyName" varchar(45) DEFAULT NULL,
  "Title" varchar(45) DEFAULT NULL,
  "Department" varchar(45) DEFAULT NULL,
  "Position" varchar(45) DEFAULT NULL,
  "TravelBooker" varchar(45) DEFAULT NULL,
  "IDnumber" varchar(10) DEFAULT NULL,
  "BusinessAddress" varchar(255) DEFAULT NULL,
  "BusinessPhone" varchar(12) DEFAULT NULL,
  "BusinessFax" varchar(12) DEFAULT NULL,
  "BusinessEmail" varchar(45) DEFAULT NULL,
  "HomeAddress" varchar(255) DEFAULT NULL,
  "HomePhone" varchar(12) DEFAULT NULL,
  "HomeEmail" varchar(45) DEFAULT NULL,
  "MobilePhone" varchar(12) DEFAULT NULL,
  "SpouseName" varchar(45) DEFAULT NULL,
  "SpouseContactNumber" varchar(45) DEFAULT NULL,
  "SpouseEmail" varchar(45) DEFAULT NULL,
  "DoctorsName" varchar(45) DEFAULT NULL,
  "DoctorsConctactNumber" varchar(45) DEFAULT NULL,
  "DoctorsEmail" varchar(45) DEFAULT NULL,
  "KnownMedicalConditions" varchar(512) DEFAULT NULL,
  "AttachmentID" varchar(45) DEFAULT NULL,
  "DateCreated" timestamp  DEFAULT NULL,
  "DateModified" timestamp  DEFAULT NULL,
  PRIMARY KEY ("idTravelerProfile"),
); 
```

我不断收到此错误。

```
Error: Syntax error: Encountered ")" at line 30, column 1.
SQLState:  42X01
ErrorCode: -1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T23:55:22.673

因为在 which 之后有多余的逗号`PRIMARY KEY`需要删除

```
 "DateModified" timestamp  DEFAULT NULL,
   PRIMARY KEY ("idTravelerProfile"),       -- <<== remove this trailing comma
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:59:09.713

```
 PRIMARY KEY ("idTravelerProfile"),
); 
```

问题出在最后一行。它不应该`,`在最终`);`删除之前为我修复此错误。

2小时后。

# php - 包括像 iFrame 一样工作的 PHP？

> ID：16158653
> 
> 赞同：-2
> 
> 时间：2013-04-22T23:54:18.047
> 
> 标签：php, iframe, include

我想做一些类似于 PHP 的包含但让它像 iframe 一样工作。

**解释：**根据我微小的编码知识，iframe 的工作可以描述为实际浏览器选项卡中的单个选项卡。这很好，因为我可以单击 iframe 中的任何内容，而无需重新加载实际的浏览器选项卡或完全影响其内容。然而，PHP 的 include 方法并非如此；如果我使用包含，每当我单击包含页面内的链接时，它都会将我的浏览器选项卡从 index.php 导航到链接中定义的 URL。

我很乐意使用 iframe，但由于在其中导航时其内容的高度会动态变化，因此我永远无法摆脱其侧面的滚动条。

有解决问题的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:02:19.517

你不能从 PHP 做任何事情。PHP 仅用于为请求交付某些内容的 Web 浏览器创建静态响应。你需要一些东西来让它更有活力。

您可以使用 AJAX 加载内容，或使用 JavaScript 扩展 iframe。[jQuery](http://jquery.com)是一个非常好的用于 AJAX 或在 DOM 中查找元素的 JavaScript 框架。

# ruby-on-rails-3 - Rails 缓存：expires_in 写入缓存；我怎样才能忽略某些参数？

> ID：16158660
> 
> 赞同：1
> 
> 时间：2013-04-22T23:55:26.850
> 
> 标签：ruby-on-rails-3, caching

我一直在使用[expires_in](http://apidock.com/rails/ActionController/ConditionalGet/expires_in)`Cache-Control`为我的回复添加标题。这样，当给定的用户再次点击相同的页面时（例如，当他们点击返回按钮时）它不会打扰再次点击服务器，直到缓存过期。

我没有意识到的是，如果您指定，Rails 还会将 HTML 的副本写入其缓存`public: true`。这似乎无害，但如果您有大量 Adsense 流量，您会发现缓存很快就会填满，因为`gclid`参数（对于每个访问者来说都是唯一的）不会被`expires_in`. 如果您使用某种内存缓存（如 Redis 或 Memcache），这尤其成问题。

使用[caches_action](http://apidock.com/rails/ActionController/Caching/Actions)我可以指定一个`:caches_path`参数，并使用它来忽略某些参数，例如 gclid。有没有办法做类似的事情`expires_in`？还是使用 'public: false' 的唯一解决方案？

# java - 无法建造无法逾越的“墙”

> ID：16158663
> 
> 赞同：1
> 
> 时间：2013-04-22T23:55:49.473
> 
> 标签：java, swing, user-interface

我有一个基本程序，您可以在其中使用箭头键绕一圈移动。我正在尝试使球无法进入某个区域（蓝色矩形），但它不起作用。我正在使用 Eclipse。

```
package TLOT;
import java.awt.BorderLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.Timer;
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class Movement extends JPanel implements ActionListener, KeyListener
{
 Timer tm = new Timer(5,this);
 int x = 0, velX = 0;
 int y = 0, velY = 0;

 public Movement()
 {
  tm.start();
  addKeyListener(this);
  setFocusable(true);
  setFocusTraversalKeysEnabled(false);

 }

 public void actionPerformed(ActionEvent e)
 {
  if (x < 0){
   velX = 0;
   x = 0;
  }
  if (x > 633){
   velX = 0;
   x = 533;
  }
  if (y < 0){
   velY = 0;
   y = 0;
  }
  if (y > 410){
   velY = 0;
   y = 310;
  }
  //this is that part thats supposed to make it stop if it hits a certain point.
 if (50 < x && x < 100 && y > 50 && y > 100){
      velX = 0; //700 , 500
      velY = 0;
      }

  x = x + velX;
  y = y + velY;
  repaint();
 }

 public void keyPressed(KeyEvent e){
  int c = e.getKeyCode();
  if (c == KeyEvent.VK_LEFT || c == KeyEvent.VK_A){
   velX = -1;
   velY = 0;
  }
  if (c == KeyEvent.VK_UP || c == KeyEvent.VK_W){
   velX = 0;
   velY = -1;
  }
  if (c == KeyEvent.VK_RIGHT || c == KeyEvent.VK_D){
   velX = 1;
   velY = 0;
  }
  if (c == KeyEvent.VK_DOWN || c == KeyEvent.VK_S){
   velX = 0;
   velY = 1;
  }
 }

 public void keyTyped(KeyEvent e){}
 public void keyReleased(KeyEvent e){
  velX = 0;
  velY = 0;
 }

 public void paintComponent(Graphics g){
  super.paintComponent(g);
  g.setColor(Color.red);
  g.fillOval(x, y, 50, 50);
  g.setColor(Color.blue);
  g.fillRect(320, 200, 40, 60);
  tm.start();
 }

    public static void main(String[] args) { 
     Movement q = new Movement();
     JFrame jf = new JFrame();
     jf.setTitle("Movement Test");
     jf.setSize(700,500);
     jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     jf.add(q);
     jf.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T00:00:11.173

这可能是问题所在：

`y > 50 && y > 100`

当然应该是

`y > 50 && y < 100`

这就是为什么单元测试、调试器、桌面检查等都存在的原因——程序员的大脑到计算机的接口是错误的和不准确的；）

此外，最好检查添加 velX 和 velY 是否会将您嵌入墙中，而不是如果您已经嵌入墙中。否则，您第一次介入时就会陷入困境：

`50 < (x+velX) && (x+velX) < 100 && (y+velY) > 50 && (y+velY) < 100`

更好的行为是迈出更小的一步，这样你就完全靠在墙上了。执行此操作的方法包括进行几何交叉计算（圆/矩形、圆/圆、矩形/矩形、多边形/多边形...），或者只是在二分搜索中尝试越来越小的步骤，直到足够接近为止。

# twitter-bootstrap - Bootsrap 页面冲突中的两个响应式导航栏

> ID：16158664
> 
> 赞同：4
> 
> 时间：2013-04-22T23:55:51.860
> 
> 标签：twitter-bootstrap, navbar

使用引导响应框架我必须在我的页面中使用两个导航栏。它们工作正常，但在切换模式下单击图标会列出两个“nav-collapce”项目！

我试图重命名第二类的折叠类名称，但它没有用。你能告诉我如何在没有任何冲突的情况下运行两次“nav-collapse collapse”吗？

```
<div class="navbar">
<div class="navbar-inner">
    <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">Candete</a>
        <div class="nav-collapse collapse">
            <!-- .nav, .navbar-search, .navbar-form, etc -->
            <ul class="nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#">Products</a></li>
                <li><a href="#">Contact Us</a></li>
                <li><a href="#">About Us</a></li>
                <li><a href="#">All Products</a></li>
            </ul>
        </div>
    </div>
</div>
</div>

<div class="navbar">
<div class="navbar-inner">
    <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">Product Category</a>
        <div class="nav-collapse collapse">
            <!-- .nav, .navbar-search, .navbar-form, etc -->
            <ul class="nav">
                <li><a href="#">Gold</a></li>
                <li><a href="#">Copper</a></li>
                <li><a href="#">Zinc</a></li>
                <li><a href="#">Metals</a></li>
                <li><a href="#">Other</a></li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T01:28:34.997

在 Twitter Bootstrap 中，`.nav-collapse`是重要的类，所以不要更改它。什么是最好的解决方案？

在线`<div class="nav-collapse collapse">`添加一些新类，我们称之为`.menu1`. 所以新代码将是`<div class="nav-collapse collapse menu1">`. 然后`data-target=".nav-collapse"`更改为`data-target=".menu1"`.

您可以对第二个菜单和一些新`.menu2`课程做同样的事情，或者保持原样（它会起作用，因为两个菜单都有不同的`data-target`）。

这是工作演示[http://jsfiddle.net/xmLDd/](http://jsfiddle.net/xmLDd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:44:56.510

为`nav-collapse`元素提供唯一 ID 并使用 ID 定位它们：

```
<div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target="#nav-primary">
        ...
      </a>
      <div class="nav-collapse collapse" id="nav-primary">
        ...
      </div>
    </div>
  </div>
</div>

<div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target="#nav-secondary">
        ...
      </a>
      ...
      <div class="nav-collapse collapse" id="nav-secondary">
        ...
      </div>
    </div>
</div> 
```

# java - 返回行程数组中最常见的指南名称

> ID：16158665
> 
> 赞同：0
> 
> 时间：2013-04-22T23:55:52.880
> 
> 标签：java, arrays, element

我是java新手，也是计算机科学的新学生。

我有一个问题：如何在包含旅行信息的对象的数组中找到最常用的名称？

该数组有对象，每个对象都包含有关旅行的信息，并且有指南的名称。按逻辑，我知道我需要首先获取所有指南名称，然后计算每个名称，然后比较每个名称的计数器，找到最大计数器，然后返回包含该最大计数器的指南.. 但是我该怎么做?

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:07:15.837

有很多方法可以做到这一点。你的方法是正确的。这里有一些关于如何在 java 中做你提到的事情的更多细节。

“获取所有指南名称”这意味着您必须在数组上编写一个循环，并以某种数据结构收集名称。使用哪种数据结构取决于您想要做什么（更多内容见下文）。

“计算每个名字”啊哈，所以收集名字的数据结构应该也能够存储每个名字的计数。Java 中最通用的数据结构之一是 Map。在这种情况下，您可以使用 Map 来存储每个名称的计数。

“比较计数器”，“找到最大值” 您可以在将名称收集到地图后执行此操作，但在循环中执行此操作可能更简单。当您循环遍历数组中的项目并获取名称以更新计数时，您还可以跟踪“迄今为止的最大计数”以及随之而来的名称。每当您获得一个新计数大于此最大值的名称时，您就会有一个新的最大值和相应的名称（至少在您找到更大的名称之前）。然后在循环结束时，您将获得所需的名称。

# amazon-web-services - AWS：简单工作流服务和数据管道有什么区别？

> ID：16158671
> 
> 赞同：11
> 
> 时间：2013-04-22T23:56:25.953
> 
> 标签：amazon-web-services, workflow, pipeline

Amazon Simple Workflow Service 和 Amazon Data Pipeline 有什么区别？看起来它们几乎是相同的产品。不过，Data Pipeline 有一个不错的基于 Web 的图表编辑器。

干杯！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-20T22:38:22.667

来自[http://aws.amazon.com/datapipeline/faqs/](http://aws.amazon.com/datapipeline/faqs/)

> 问：AWS Data Pipeline 与 Amazon Simple Workflow Service 有何不同？
> 
> 虽然这两种服务都提供执行跟踪、重试和异常处理功能以及运行任意操作的能力，但 AWS Data Pipeline 专门设计用于促进大多数数据驱动的工作流中常见的特定步骤 - 特别是在他们的输入数据符合特定的就绪标准，可以轻松地在不同的数据存储之间复制数据，并安排链式转换。这种高度具体的重点意味着可以非常快速地创建其工作流定义，而无需任何代码或编程知识。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T03:54:06.570

Data Pipeline 是用于在 AWS 的各种服务之间传输数据的服务。例如，您可以使用 DataPipeline 从 EC2 读取日志文件并定期将它们移动到 S3。

Simple Workflow 服务是非常强大的服务。您甚至可以使用它编写工作流逻辑。示例：大多数电子商务系统的订单系统都存在可扩展性问题。您可以使用在 SWF 中编写代码来制作此订购工作流程本身。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-18T23:47:22.287

*[AWS 大数据博客](https://aws.amazon.com/blogs/big-data/automating-analytic-workflows-on-aws/)*在解释 SWF、Data Pipeline 和 Lambda 的关键特性方面做得非常出色。

下图是从博客中复制的。

[![SWF、数据管道和 Lambda 的关键特性](https://i.stack.imgur.com/xVLpB.png)](https://i.stack.imgur.com/xVLpB.png)

# jquery - 在滚动 jquery 上显示加载的内容

> ID：16158677
> 
> 赞同：0
> 
> 时间：2013-04-22T23:57:04.213
> 
> 标签：jquery, mysql

我有一个页面，我从我的 sql 数据库表中获取数据并加载它。需要在滚动时加载数据。因为我正在从数据库表中获取数据，所以很难弄清楚哪一行已经加载并加载除此之外的数据。那么有什么方法可以根据窗口高度向下滚动以显示更多数据 - 除了设置溢出以滚动主体或主容器？任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:02:40.703

您可以跟踪一个状态变量，该变量告诉您​​的 php 脚本返回什么偏移量。

```
var offset = 0;
var loading = false;

$(window).on('scroll', function(){

    if($('#element').offset().top >= ($(window).scrollTop() - $(window).height()))
    {
        loading = true;
        $.ajax({
            //all your ajax settings here
            data: {offset: offset}
            success: function(data){
                // add data to dom here
                loading = false;
                offset += 1;
            }
        });
    }

}); 
```

这样，您将偏移量传递给脚本并返回与此数字相关的数据，但是您选择解释它。

mysql中使用的偏移量。由于您没有指定语言，因此我将给出一个 php 示例：

```
$limit = "0, 20";
if(isset($_POST['offset']))
{
    // obviously you should sanitize this, but for example we
    // ignore that for now.

    $limit = ($_POST['offset'] * 20) .", 20";
}

$sql = "SELECT * FROM `table` ORDER BY `date` DESC LIMIT $limit";
// run your query and echo the results 
```

你看，传递的偏移量只是改变了查询以获取下一个数据块。在javascript中，我们在成功时增加这个数字，所以下次窗口到达底部时，它将下一个偏移量传递给php并返回下一个增量。我们使用任意数字 20 假设您正在返回某种具有行的数据，例如博客条目、图像等。

# xslt - 使用 XSLT 清除和添加列表

> ID：16158678
> 
> 赞同：0
> 
> 时间：2013-04-22T23:57:04.637
> 
> 标签：xslt

我有一个包含以下数据的 xml 文件：

```
<ConfigurationEntries>
  <ConfigurationUpdates enabled="false">
    <ListOfValues>
      <add id="1" />
      <add id="2" />
      <add id="3" />
    </ListOfValues>
  </ConfigurationUpdates>
</ConfigurationEntries> 
```

我想删除下面的条目`ListOfValues`并在那里添加一个条目：`<add id="100" />`

到目前为止，我有这个：

```
<xsl:template match="/ConfigurationEntries/ConfigurationUpdates/ListOfValues">
   <xsl:copy>
      <clear />
      <xsl:apply-templates select="@*" />
      // Not sure what goes here.
      <xsl:apply-templates select="*" />
    </xsl:copy>
</xsl:template 
```

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:39:02.090

希望对你有帮助。

```
<xsl:template match="/ConfigurationEntries/ConfigurationUpdates/ListOfValues">
    <ListOfValues>
        <add id="100" />
    </ListOfValues>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:26:35.073

所有你需要的是

```
<xsl:template match="/ConfigurationEntries/ConfigurationUpdates/ListOfValues">
   <xsl:copy>
      <clear />
      <add id="100" />
    </xsl:copy>
</xsl:template> 
```

但我不确定空`clear`元素在那里做什么，因为你没有提到它。您认为它在 XSLT 中做了什么吗？所发生的只是它被复制到输出中。

# php - ffmpeg FLV 到 FLV 转换失败

> ID：16158680
> 
> 赞同：0
> 
> 时间：2013-04-22T23:57:34.360
> 
> 标签：php, ffmpeg, clipbucket

我正在使用 ClipBucket。我已经设置了 ffmpeg，我可以毫无问题地将 AVI、WMV 文件转换为 FLV 视频文件，但现在我正在尝试将 FLV 视频文件转换为具有不同视频质量的 FLV 视频文件。

但是，转换中存在错误。有人能帮助我吗？

日志：

```
Preparing file...
Unknown file details - Unable to get video details using FFMPEG 

Converting Video
Conversion Command : /usr/local/bin/ffmpeg -i /home/myspace86/myspace86.com/files/conversion_queue/136667418894906.flv -f flv -vcodec libx264 -r 30 -vf 'movie=/home/myspace86/public_html/player_logo.png [watermark]; [in][watermark] overlay=main_w-overlay_w-10:main_h-overlay_h-10 [out]' -ab 320000 /home/myspace86/myspace86.com/files/videos/136667418894906.flv 2> /home/myspace86/myspace86.com/files/temp/136667424191b8e.tmp 
```

转换详情

```
ffmpeg version N-52385-g6d7ec4f Copyright (c) 2000-2013 the FFmpeg developers
built on Apr 22 2013 16:08:27 with gcc 4.1.2 (GCC) 20080704 (Red Hat 4.1.2-54)
configuration: --prefix=/usr/local --enable-shared --enable-gpl --enable-version3 --enable-nonfree --enable-postproc --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libvpx --enable-libx264 --enable-libxvid
libavutil 52\. 27.100 / 52\. 27.100
libavcodec 55\. 5.100 / 55\. 5.100
libavformat 55\. 3.100 / 55\. 3.100
libavdevice 55\. 0.100 / 55\. 0.100
libavfilter 3\. 60.101 / 3\. 60.101
libswscale 2\. 2.100 / 2\. 2.100
libswresample 0\. 17.102 / 0\. 17.102
libpostproc 52\. 3.100 / 52\. 3.100
Input #0, flv, from '/home/myspace86/myspace86.com/files/conversion_queue/136667418894906.flv':
Metadata:
metadatacreator : Yet Another Metadata Injector for FLV - Version 1.4
hasKeyframes : true
hasVideo : true
hasAudio : true
hasMetadata : true
canSeekToEnd : false
datasize : 40992128
videosize : 37546219
audiosize : 3247153
lasttimestamp : 728
lastkeyframetimestamp: 727
lastkeyframelocation: 40978250
Duration: 00:12:08.16, start: 0.000000, bitrate: 450 kb/s
Stream #0:0: Video: vp6f, yuv420p, 648x459, 409 kb/s, 29.97 tbr, 1k tbn, 1k tbc
Stream #0:1: Audio: mp3, 22050 Hz, mono, s16p, 32 kb/s
[libx264 @ 0x146d900] height not divisible by 2 (648x459)
Output #0, flv, to '/home/myspace86/myspace86.com/files/videos/136667418894906.flv':
Metadata:
metadatacreator : Yet Another Metadata Injector for FLV - Version 1.4
hasKeyframes : true
hasVideo : true
hasAudio : true
hasMetadata : true
canSeekToEnd : false
datasize : 40992128
videosize : 37546219
audiosize : 3247153
lasttimestamp : 728
lastkeyframetimestamp: 727
lastkeyframelocation: 40978250
Stream #0:0: Video: h264, yuv420p, 648x459, q=-1--1, 90k tbn, 30 tbc
Stream #0:1: Audio: none, 22050 Hz, mono, s16p
Stream mapping:
Stream #0:0 -> #0:0 (vp6f -> libx264)
Stream #0:1 -> #0:1 (mp3 -> libmp3lame)
Error while opening encoder for output stream #0:0 - maybe incorrect parameters such as bit_rate, rate, width or height

Unknown file details - Unable to get output video details using FFMPEG 

Time Took : 0.3056 seconds

conversion_status : completed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:48:31.087

```
[libx264 @ 0x146d900] height not divisible by 2 (648x459) 
```

那是你的错误。通常，在处理任意输入时，您可能希望包含一个强制输出可被 2 整除的缩放器，例如以下，其中高度固定为 460：

```
scale=trunc(oh*a*2)/2:460 
```

或者你之前解析你的输入文件，看看是否需要重新调整。另请参阅：[ffmpeg/avconv 强制缩放输出可被 2 整除](https://superuser.com/questions/571141/ffmpeg-avconv-force-scaled-output-to-be-divisible-by-2/571142#571142)

# jquery - 导航栏贴在顶部

> ID：16158681
> 
> 赞同：1
> 
> 时间：2013-04-22T23:57:37.467
> 
> 标签：jquery, html, css

我使用[Here](http://www.jay-han.com/2011/11/10/simple-smart-sticky-navigation-bar-with-jquery/)的代码来获取导航栏以粘贴在顶部。这很好用，但是当我添加我的实际导航 div 时，导航栏设置为距顶部约 20 像素，并在滚动时跳回顶部。

我在导航下添加了这个：

```
<div id="navbar">
<ul id="navlist">
<li><a href="#">About</a></li>
<li><a href="#">Prints</a></li> 
<li><a href="#">Services</a></li>   
<li><a href="#">Contact</a></li>
</ul>
</div> 
```

知道为什么我一在导航中添加列表或 div 就会把事情搞砸吗？ [http://jsfiddle.net/x4GQ5/3/](http://jsfiddle.net/x4GQ5/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:58:30.740

您需要包括`overflow: hidden;`on`ul#nav`因为它有浮动的后代（它的高度会因此而崩溃），并且您需要删除`<ul>`. 您还应该考虑包含一个[CSS 重置](http://www.cssreset.com/)，这样您就可以避免默认的浏览器样式规则。

[**jsFiddle**](http://jsfiddle.net/Adrift/x4GQ5/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T01:37:48.830

您需要`margin: 0`为您的 ul#nav 设置一个。

```
ul#nav  {
  list-style: none;
  line-height: 2em;
  margin: 0;    
} 
```

# actionscript-3 - 在 FlashDevelop 中使用 FLVplayback，在 AS3 中将 Sprite Class 添加到 World

> ID：16158683
> 
> 赞同：0
> 
> 时间：2013-04-22T23:57:40.613
> 
> 标签：actionscript-3, sprite, flashdevelop, addchild, flvplayback

嗨（如果有语法错误，请原谅，我是法国人），

我是 AS3 的初学者，但我更了解 Flashpunk；不管怎样，我在 AS3 中编写代码确实有些困难，并且不知道如何使用 FlashDevelop 在 AS3 项目中插入视频。

那么我找到了一些我正在寻找的代码，在这里插入一个flv视频：http://www.flashdevelop.org/community/viewtopic.php [? f=9&t=6407](http://www.flashdevelop.org/community/viewtopic.php?f=9&t=6407)

但是我有一些问题要让这段代码正常工作......正如我之前所说的，我知道更好的 Flashpunk，所以我很难将基本的 AS3 与我在 Flashpunk 中的知识联系起来。

我试图在课堂上组织它，但我知道这些是错误的，但是请谁能告诉我我应该怎么做才能让代码正常工作？我认为“addChild”只是一个 Sprite 或 Movieclip 函数，所以我的 FLVplayback 和 PlayerGfx 扩展了 Sprite，但我不知道如何添加它们并显示它们......这是我的代码：

```
public class testMyWorld extends World
{
    public var player:PlayerGfx;
    public var _FLV:testFLV;

    public function testMyWorld() 
    {

        _FLV = new testFLV;
        player = new PlayerGfx();

    }

}  

public class testFLV extends Sprite
{
    public var flvPlayback:FLVPlayback;
    public var player:PlayerGfx;

    public function testFLV() 
    {
        flvPlayback = new FLVPlayback(); 
        flvPlayback.skin = "none" 
        flvPlayback.autoPlay = false;
        flvPlayback.source = "FLVSkyrim.flv"    
        player.addChild(flvPlayback);
    }

} 
```

好吧，我不知道该放什么，但在链接之前有一个“玩家类”所以......

```
 public class PlayerGfx extends Sprite
{

    public function PlayerGfx() 
    {

    }

} 
```

我正在拼命寻求帮助，我找不到任何可以解释我应该做什么的人：/我只需要在学校的 AS3 项目中显示一个视频，我不想使用 FlashProfessional ......但是很多东西我都不懂，比如addChild、显示Sprite Class等等……但是如果你知道我可以使用的更好的其他代码并且你可以向我解释，我将非常感激。

提前致谢 ！

**编辑：**天哪，如果我在问这个问题时看到你的答案，我很抱歉。问题是，我在学校的一位同事给我写了一段相当不错的代码，它准确地回答了我需要做的事情，因为它有点棘手。我可以把它交给任何可能需要它的人，但我不确定它是否适合任何“通常”的情况，因为它非常个性化并且解释了 irl。无论如何，谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:24:56.767

这很棘手，因为 FlashPunk 将显示列表替换为自定义的基于位图的渲染器。

您的 World 对象不是常规显示对象，它不能包含 FLVPlayback 组件。

您最好的选择是将视频播放器连接到舞台。您的 Main 类（扩展引擎）是一个显示对象，因此它具有对舞台的引用。

首先，您需要对 Main 实例的全局引用，以便您可以找到阶段：

```
public class Main extends Engine
{
    static public instance:Main; // global static reference

    public function Main():void
    {
         instance = this;
         ...
    }
} 
```

现在您可以在舞台上（在 FlashPunk 舞台上）附加显示对象：

```
public class testMyWorld extends World
{
    private var player:MyPlayer; // your FLV player class extending Sprite

    public function testMyWorld() 
    {
        player = new MyPlayer();
    }

    // when the world is shown
    override public function begin():void 
    {
         Main.instance.stage.addChild(player);
    }

    // when the world is hidden
    override public function end():void 
    {
         if (player.parent) Main.instance.stage.removeChild(player);
    }
} 
```

PS：我实际上并没有运行此代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:14:14.497

为什么你的基类是 World？在纯 AS3 项目中，它应该是 Sprite。然后，一旦您的播放器 ( `FLVPlayback`) 被创建，您只需将其添加到显示列表中：

```
import fl.video.FLVPlayback;

public class Main extends Sprite
{
    private var flvPlayback:FLVPlayback;

    public function testMyWorld() 
    {    
        flvPlayback = new FLVPlayback(); 
        flvPlayback.skin = "none" 
        flvPlayback.autoPlay = false;
        flvPlayback.source = "FLVSkyrim.flv"    
        addChild(flvPlayback);    
    }

} 
```

简单点，你不需要所有这些类；）

# python - 在一种方法中创建的属性在另一种方法中不存在

> ID：16158684
> 
> 赞同：10
> 
> 时间：2013-04-22T23:57:53.963
> 
> 标签：python, class, attributes

这里我有一个属性'a'，它是在第一类方法中定义的，应该在第二类方法中更改。按顺序调用它们时，会出现以下消息：

> AttributeError：“类”对象没有属性“a”

我发现的唯一方法 - 在第二种方法中再次定义“a”，但在实际代码中它具有很长的继承性并且应用程序会被弄乱。为什么它不起作用？*self.a*不等于*Class.a*吗？

```
class Class(object):
    def method_1(self):
        self.a = 1
    def method_2(self):
        self.a += 1

Class().method_1()
Class().method_2() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T00:01:53.637

简短的回答，不。您的代码的问题在于每次创建新实例时。

**编辑**：正如 abarnert 在下面提到的，`Class.a`和之间有很大的不同`c.a`。实例属性（第二种情况）属于每个特定对象，而类属性属于类。查看下面 abarnert 的评论或[此处](https://stackoverflow.com/questions/207000/python-difference-between-class-and-instance-attributes)的讨论以获取更多信息。

您的代码相当于

```
c1 = Class()
c1.method_1()  # defines c1.a (an instance attribute)
c2 = Class()
c2.method_2()  # c2.a undefined (the c2 instance doesn't have the attribute) 
```

你可能想做类似的事情

```
c = Class()
c.method_1()  # c.a = 1
c.method_2()  # c.a = 2
print "c.a is %d" % c.a  # prints "c.a is 2" 
```

或者可能更好的是`c`使用`a`属性进行初始化

```
class Class:
    def __init__(self):
        self.a = 1  # all instances will have their own a attribute 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T00:01:14.443

当您不调用时，*新创建*的实例`Class`没有属性，如您的示例所示。`a``instance_of_class.method_2()``method_1`

考虑一下您的代码的这个稍微改变的版本：

```
class CreateNewClassInstance(object):
    def create_a(self):
        self.a = 1
    def add_one_to_a(self):
        self.a += 1

CreateNewClassInstance().create_a()
CreateNewClassInstance().add_one_to_a() 
```

每次调用`Class()`（或`CreateNewClassInstance()`）时，您都会创建一个具有自己属性的*新*`a`对象。在您初始化之前`a`，您没有具有该名称的属性。

大多数时候这不是问题 - 但是，`+=`会在添加一个之前尝试加载`self.a`- 这就是`AttributeError`在这种情况下导致您的原因。

# javascript - 在 Javascript 中对表格进行排序

> ID：16158688
> 
> 赞同：0
> 
> 时间：2013-04-22T23:58:16.560
> 
> 标签：javascript, sorting, dom

我有以下代码可以使用 Javascript 对表格进行排序。我想要做的是将表格的最后一行作为总计，因此需要附加我的代码以从排序中删除最后一行。我在完成这项任务时遇到了麻烦。

```
var TableSort = function ( tableId ) {
    var that = this;

    // Store a reference to the table node as a property
    this.table = document.getElementById(tableId);

    // Validate the table node
    if ( this.table && this.table.nodeType != 1 ) {
        throw new Error("TableSort: Table id is not a DOM element.");
    }
    if ( this.table.tagName != "TABLE" ) {
        throw new Error("TableSort: Table id is not a table element.");
    }

    // Set three global properties
    this.sortColumn = "";
    this.sortUp = true;
    this.imageNodes = [];

    // Get the header nodes
    var headers = this.table.getElementsByTagName("th");

    // Loop through the header nodes
    var header, columnName, imageNode, imageClick;
    for ( var i = 0; i < headers.length; i++) {
        header = headers[i];

        // Create a node for the image
        imageNode = document.createElement("img");

        // Add the "sort arrow" images to the header column
        // And set the first column as the default sort column
        columnName = header.className;
        if ( i == 0 ) {
            this.sortColumn = columnName;
            imageNode.src = "arrows_up.png";
        } else {
            imageNode.src = "arrows_off.png";
        }

        // Get the event handler for the image
        imageClick = this.imageClickHandler(columnName);

        // Add the event handler to the image
        jsLib.event.add(imageNode, "click", imageClick);

        // Add the image node to column header and to array of image nodes
        header.appendChild(imageNode);
        this.imageNodes[columnName] = imageNode;
    }

    // Sort the table
    this.sort();
}

TableSort.prototype.imageClickHandler = function (columnName) {
    var that = this;

    // return an event handler
    return function () {
        // If current sort column, toggle the sort direction
        if ( that.sortColumn == columnName ) {
            that.sortUp = ! that.sortUp;
        // Otherwise...
        } else {
            // Set the image for the old sort column
            that.imageNodes[that.sortColumn].src = "arrows_off.png";

            // Switch the current sort column and sort ascending
            that.sortColumn = columnName;
            that.sortUp = true;
        }

        // Set the appropriate arrows for the current sort column
        if ( that.sortUp ) {
            that.imageNodes[that.sortColumn].src = "arrows_up.png";
        } else {
            that.imageNodes[that.sortColumn].src = "arrows_down.png";
        }

        that.sort();
    }
}

TableSort.prototype.sort = function () {
    var that = this;
    if ( this.sortColumn == "" ) return;

    // Get the rows from the table
    var rowNodes = this.table.getElementsByTagName("tr");
    if (rowNodes.length <= 1 ) return;

    // Store a reference to each row in the rows array
    var rows = [];
    for ( var i = 0; i < rowNodes.length; i++) {
        rows.push( rowNodes[i] );
    }

    // Get a reference to the tbody node
    var tbodyNode = rows[0].parentNode;

    // Remove the header row from the array (but not the DOM)
    rows.shift();

    // Remove all rows except the header row from the DOM
    var row;
    for ( i = 0; i < (rows.length); i++ ) {
        row = rows[i];
        row.parentNode.removeChild(row);
    }   

    // Define two functions that check for data types
    var isMoney = function ( value ) {
        var m = value.replace( /[$,]/g, "" );
        return ! isNaN(m);
    }
    var isDate = function ( value ) {
        var d = new Date(value);
        return ! isNaN(d);
    }

    // Define the direction variable
    var direction = ( that.sortUp ) ? 1 : -1;

    // Define the function that compares the rows
    var compareColumnValues = function (rowA, rowB) {
        var valueA, valueB;
        var i, cell;

        // Get the cell value for row A
        var cellsA = rowA.getElementsByTagName("td");
        for ( i = 0; i < cellsA.length; i++ ) {
            cell = cellsA[i];
            if ( cell.className == that.sortColumn ) {
                valueA = cell.firstChild.nodeValue;
                break;
            }
        }

        // Get the cell value for row B
        var cellsB = rowB.getElementsByTagName("td");
        for ( i = 0; i < cellsB.length; i++ ) {
            cell = cellsB[i];
            if ( cell.className == that.sortColumn ) {
                valueB = cell.firstChild.nodeValue;
                break;
            }
        }

        // Convert the values to the appropriate data type
        if ( ! isNaN(valueA) && ! isNaN(valueB) ) {
            valueA = parseFloat(valueA);
            valueB = parseFloat(valueB);
        } else if ( isDate(valueA) && isDate(valueB) ) {
            valueA = new Date(valueA);
            valueB = new Date(valueB);
        } else if ( isMoney(valueA) && isMoney(valueB) ) {
            valueA = parseFloat(valueA.replace( /[$,]/g, "" ));
            valueB = parseFloat(valueB.replace( /[$,]/g, "" ));
        }

        // Compare the two values and return the appropriate comparison value
        if ( valueA < valueB ) {
            return -1 * direction;
        } else if ( valueB < valueA ) {
            return 1 * direction;
        } else {
            return 0;
        }
    }

    // Use the compareColumnValues function to sort the rows array
    rows.sort( compareColumnValues );

    // Add all rows back to the DOM
    for ( i = 0; i < rows.length; i++) {
        tbodyNode.appendChild( rows[i] );
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T00:17:11.763

您可以在 HTML 标记中使用更多结构来帮助您的代码确定可以排序的内容。

将总计行放在一个[`tfoot`](http://reference.sitepoint.com/html/tfoot)元素中，将可排序的行放在一个`tbody`元素中......现在您可以定位可排序的行，例如

```
var sortableRows = this.table.getElementsByTagName('tbody'),
    rowNodes = sortableRows.getElementsByTagName('tr'); 
```

**更新：**由于您无法更改标记，请从排序数组中删除最后一行并将其缓存。

```
...
// Remove the header row from the array (but not the DOM)
rows.shift();
// And now we remove the footer row and cache it
var footerRow = rows.pop(); 
```

然后修改您的代码以使用[`insertBefore`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)

```
...
// Add all rows back to the DOM, before the footer row
for ( i = 0; i < rows.length; i++) {
    tbodyNode.insertBefore(rows[i], footerRow);
} 
```

该循环实际上是一个性能问题，因为您正在对 DOM 进行多次写入。最好将所有这些排序的节点写入 a[`documentFragment`](https://developer.mozilla.org/en-US/docs/DOM/document.createDocumentFragment)并只写入一次 DOM，如下所示：

```
...
var sortedFragment = document.createDocumentFragment();

// Write all the sorted rows to a fragment
for ( i = 0; i < rows.length; i++) {
    sortedFragment.appendChild(rows[i]);
}

// Insert fragment containing sorted rows before footer
tbodyNode.insertBefore(sortedFragment, footerRow); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T13:28:23.690

我找到了一个很好的解决方案，我实际上在我的工作代码中使用了它！然而，我不能把功劳归于它，但我只是想为你们指出正确的方向：

[http://www.kryogenix.org/code/browser/sorttable/](http://www.kryogenix.org/code/browser/sorttable/)

"1.在这里下载Javascript库：[http ://www.kryogenix.org/code/browser/sorttable/sorttable.js](http://www.kryogenix.org/code/browser/sorttable/sorttable.js)

2.包含 Javascript 库，方法是在页面的 HEAD 中放置一个指向它的链接，如下所示：

3.通过给它一个“可排序”类将你的表标记为可排序的：

请注意，该库的 JavaScript 文件称为 sorttable（两个 T），但您添加到表中的类是可排序的（一个 T）。”

设置非常简单，应该允许升序和降序排序。如果您有任何问题，请告诉我。

谢谢！保罗

# haskell - 我想使用酸存储 aeson 的值类型

> ID：16158694
> 
> 赞同：6
> 
> 时间：2013-04-22T23:58:52.820
> 
> 标签：haskell, acid, aeson

我想使用酸商店存储 aeson Values。我采用了最小的酸实现，并试图天真地将类型切换到值。这些是我对 derivedSafeCopy 的调用：

```
$(deriveSafeCopy 0 'base ''Object)
$(deriveSafeCopy 0 'base ''Array)
$(deriveSafeCopy 0 'base ''Number)
$(deriveSafeCopy 0 'base ''Value)
$(deriveSafeCopy 0 'base ''JSONState)
$(deriveSafeCopy 0 'base ''JSONStateStore) 
```

JSONState 和 JSONStateStore 是我自己的类型。我收到此错误：

```
Can't derive SafeCopy instance for: (Data.Aeson.Types.Internal.Object,TyConI (TySynD Data.Aeson.Types.Internal.Object [] (AppT (AppT (ConT Data.HashMap.Base.HashMap) (ConT Data.Text.Internal.Text)) (ConT Data.Aeson.Types.Internal.Value)))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:06:53.857

显然，您已经达到了`deriveSafeCopy`Template Haskell 函数可以为您做的事情的极限。

您可以通过手动提供实例来解决此问题。[SafeCopy API](http://hackage.haskell.org/packages/archive/safecopy/0.8.1/doc/html/Data-SafeCopy.html)包含有关如何执行此操作的综合文档。对于其他示例，您可以查看[默认实例是如何声明的](http://hub.darcs.net/Lemmih/safecopy/browse/src/Data/SafeCopy/Instances.hs)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T23:15:06.953

对于那些仍然感兴趣的人，这是我的实现：

```
-- | ACID

$(deriveSafeCopy 0 'base ''JSONStateStore)
$(deriveSafeCopy 0 'base ''JSONState)
$(deriveSafeCopy 0 'base ''Value)
$(deriveSafeCopy 0 'base ''Number)

-- | An instance of SafeCopy for the Array Value.
instance SafeCopy a => SafeCopy (V.Vector a) where
    getCopy = contain $ fmap V.fromList safeGet 
    putCopy = putCopy . V.toList

-- | An instance of SafeCopy for the Object Value.
instance (SafeCopy a, Eq a, Hashable a, SafeCopy b) => SafeCopy (H.HashMap a b) where
    getCopy = contain $ fmap H.fromList safeGet 
    putCopy = contain . safePut . H.toList 
```

# c# - 适用于 Windows Phone 的 Facebook SDK：InvalidOperationException：由于对象的当前状态，操作无效

> ID：16158700
> 
> 赞同：2
> 
> 时间：2013-04-22T23:59:24.633
> 
> 标签：c#, facebook, windows-phone-7, facebook-c#-sdk, windows-phone

等待 LoginAsync 时出现此异常：

```
await fb.LoginAsync("user_about_me"); 
```

完整的堆栈跟踪如下：

```
{System.InvalidOperationException: Operation is not valid due to the current state of the object.
   at Microsoft.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at Microsoft.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccess(Task task)
   at Microsoft.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Microsoft.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at FacebookServiceClient.FbServiceClient.<Login>d__0.MoveNext()} 
```

我正在使用 Facebook 客户端 0.5.0。

奇怪的是，这个错误并不总是发生，通常当我开始一个编码会话时一切都很好，但是（在几次调试会话之后）每次都会弹出这个异常。有什么想法吗？

编辑：即使在 SDK github 示例上我也有这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:23:02.457

浏览代码后，问题与操作本身无关，我发现问题是当浏览器无法连接到 facebook 时，会引发此异常。

# c# - 将 int 简单解析为字符串

> ID：16158702
> 
> 赞同：0
> 
> 时间：2013-04-22T23:59:35.450
> 
> 标签：c#, string, parsing, int

在我的课堂上，我的老师给我看了类似的东西。Visual Studio 说字符串没有解析的定义。我记得在课堂上老师说的`something.parse(thingyouwanttoparse)`。没有逗号。我在网上搜索过，但所有选项都与老师给我的选项不同。我究竟做错了什么？

```
if (!ValidMenuOption)
{
    string errorMsg = "\n\t Option must be ";
    int iteration = 1;
    while (iteration <=numAvailable)
    {
        errorMsg = errorMsg + string.parse(iteration) + ", ";
        iteration += 1
    }
    errorMsg = errorMsg + "or 0";
    Console.WriteLine(errorMsg);
} //end if 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:11:01.490

解析是当你把一个字符串变成一个东西的时候。格式化与解析相反，在 C# 中，您可以通过调用`.ToString()`它来格式化一个 int。如果您要连接字符串，那么您甚至可以关闭此方法调用，因此您的代码可能变为

```
if (!ValidMenuOption){
    string errorMsg = "\n\t Option must be ";
    int iteration = 1;
    while (iteration <=numAvailable) {                        
        errorMsg = errorMsg + iteration + ", ";
        iteration+=1;
    }
    errorMsg = errorMsg + "or 0"; 
    Console.WriteLine(errorMsg);
} 
```

如果你想变得花哨，你也可以这样做：

```
if (!ValidMenuOption){
    string errorMsg = "\n\t Option must be "+string.Join(", ", Enumerable.Range(1, numAvailable)) + " or 0"; 
    Console.WriteLine(errorMsg);
} 
```

# java - 仅在预期一个 int 值时使用结果集

> ID：16158703
> 
> 赞同：0
> 
> 时间：2013-04-22T23:59:37.593
> 
> 标签：java, jdbc, resultset

我知道这是基础知识，可能真的很简单，但我在以下情况下苦苦挣扎放。

我已经在数据库管理系统中测试了查询并且它可以工作。我没有得到任何错误/堆栈，但我的方法的结果始终是-1。（这意味着它失败了:(因为没有解析任何 int ）

代码：

```
public int UserFactoryEngine(String n, String p){
        // query for user data, validate and return
        Connection conn = null;
        try {
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver").newInstance();
        } catch (InstantiationException | IllegalAccessException | ClassNotFoundException e) {
            System.out.println("Failure intialization of the driver! ");
            e.printStackTrace();
        }
        String connectionUrl = "jdbc:sqlserver://localhost:1433;" + "databaseName=BugsSurveillance;user=sa;password=1234;integratedSecurity=true;";
        try {
            conn = DriverManager.getConnection(connectionUrl);
        } catch (SQLException e) {
            System.out.println("Failure intialization of the connection! ");
            e.printStackTrace();
        }
        System.out.println("Connected... ");

        String sqlquery;
        PreparedStatement preparedStatement;
        ResultSet rs;
        try {
            preparedStatement = conn.prepareStatement("SELECT id FROM Users WHERE name = ?  AND pass = ? ",
                    ResultSet.TYPE_SCROLL_INSENSITIVE,  ResultSet.CONCUR_READ_ONLY);
            preparedStatement.setString(1, n);
            preparedStatement.setString(2, p);
            rs = preparedStatement.executeQuery();

            while (rs.next()){
                System.out.println(rs.getInt(1));
            }

        } catch (SQLException e) {
            System.out.println("Prepared statement failure!");
            e.printStackTrace();
        }
        return -1;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:05:30.173

您没有从控制台获得任何输出

```
while (rs.next()){
    System.out.println(rs.getInt(1));
} 
```

因为没有结果。最初，ResultSet 指向第一行之前。当 next() 被调用时，它会递增到下一行，并且仅当新的当前行有效时才返回 true，在这种情况下它不能是有效的。

既然您说该行存在，请尝试替换您的行

```
preparedStatement.setString(1, n);
preparedStatement.setString(2, p); 
```

带有硬编码值，用于测试。所以，如果你的用户名是 admin，你的密码是 1234。

```
preparedStatement.setString(1, "admin");
preparedStatement.setString(2, "1234"); 
```

您可以尝试的另一个测试是

```
SELECT * FROM users 
```

看看你是否得到任何结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:36:53.107

考虑到这是一个登录工厂（我正在尝试实现），我一直在使用 JPasswordField，当涉及到 getPassword() 方法时，它似乎需要更多注意。因此，我无法在数据库中成功找到一些匹配的字符串。

修复：使用带有隐藏字符的 JTextfield。

# .htaccess - htaccess 删除 html 和重复的 php 不起作用

> ID：16158707
> 
> 赞同：0
> 
> 时间：2013-04-22T23:59:47.810
> 
> 标签：.htaccess

此代码段适用于删除 php 扩展

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

但是，如果我添加 html 条件，它将不起作用

```
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:41:56.987

你可以试试这个，在根目录的一个 .htaccess 文件中：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On

RewriteCond %{REQUEST_FILENAME}      !-d
RewriteCond %{REQUEST_FILENAME}.php   -f
RewriteCond %{REQUEST_URI}   !\.php   [NC]
RewriteRule .*   %{REQUEST_URI}.php   [NC,L]

RewriteCond %{REQUEST_FILENAME}      !-d
RewriteCond %{REQUEST_FILENAME}.html  -f
RewriteCond %{REQUEST_URI}   !\.html  [NC]
RewriteRule .*   %{REQUEST_URI}.html  [NC,L] 
```

您应该知道代码中的实现**仅在请求没有尾部斜杠时才**有效。我刚刚修改了您的代码以使其正常工作，但我认为这个问题毫无价值。例如：

对于类似的请求`http://example.com/filename/`，与条件匹配的文件`RewriteCond %{REQUEST_FILENAME}.php -f`是`filename/.php`. 该文件不存在，因此，将永远不会使用相应的规则。

### 存在时删除尾部斜杠的选项：

`RewriteEngine On`在前面的代码之后添加这些行：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  /(.*[^/]+)/$ [NC]
RewriteRule .*              /%1          [NC,L] 
```

# windows-phone-7 - 清除 _SelectionChanged() 中的所有选定项目

> ID：16158708
> 
> 赞同：0
> 
> 时间：2013-04-22T23:59:49.837
> 
> 标签：windows-phone-7, listbox

我有一个多选列表框，我尝试取消选择所有这样的项目：

```
private void _SelectionChanged(object sender, SelectionChangedEventArgs e)  {

    foreach(var i in e.AddedItems) {
        // do whatever - works ok
    }

   //then clear all selected - doesn't work
   ((ListBox)(e.OriginalSource)).SelectedItems.Clear(); 

} 
```

我也试过`(e.OriginalSource as Listbox).SelectedItems.Clear()`了，但它只是抛出一个错误。

任何建议将不胜感激，谢谢。

编辑：

经过多次尝试，这有效：

```
((ListBox)sender).SelectedItem = null; 
```

不管它是多选不是单选ListBox！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:28:05.987

以下是您实际寻找的内容：

```
((ListBox)sender).SelectedItems.Clear(); 
```

调用`.SelectedItem = null`起作用的原因只是 ListBox 的行为。两者最终都做同样的事情。更“正确”的是我给你的那句话。

# php - 将 PHP 生成的 HTML 附加到文档片段

> ID：16158710
> 
> 赞同：2
> 
> 时间：2013-04-22T23:59:56.413
> 
> 标签：php, javascript, jquery, html

我需要将大量 PHP 生成的 HTML（5000 个 div 元素）附加到文档片段并将其附加到页面正文。

示例 HTML（这只是 StackOverflow 源代码的一部分，但类似）：

```
<div itemscope itemtype="http://schema.org/Article">
<link itemprop="image" href="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png">
<div id="question-header">
    <h1 itemprop="name"><a href="/questions/4287357/access-php-variable-in-javascript" class="question-hyperlink">Access PHP variable in JavaScript [duplicate]</a></h1>
</div>
<div id="mainbar">

<div class="question" data-questionid="4287357"  id="question">

            <div class="everyonelovesstackoverflow" id="adzerk1">
        </div>

    <table>
        <tr>
            <td class="votecell">

<div class="vote">
    <input type="hidden" value="4287357">
    <a class="vote-up-off" title="This question shows research effort; it is useful and clear (click again to undo)">up vote</a>
    <span class="vote-count-post ">2</span>
    <a class="vote-down-off" title="This question does not show any research effort; it is unclear or not useful (click again to undo)">down vote</a>

    <a class="star-off" href="#" title="This is a favorite question (click again to undo)">favorite</a>
    <div class="favoritecount"><b>1</b></div>   

</div> 
```

我已将问题分解为 2 个较小的问题：

1.  在 Javascript 中存储 PHP 变量：`var tmp = "<?php Print($DOM); ?>";`
2.  将 HTML 附加到文档片段中（看过[这个](https://stackoverflow.com/questions/9284117/inserting-arbitrary-html-into-a-documentfragment)，但它是关于别的东西）

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:19:28.987

我最近一直在使用[jsrender](https://github.com/BorisMoore/jsrender)来处理将大量 JSON/Javascript 数据格式化为 HTML。这让我可以将更多数据打包成更少的字节，然后让客户端使用模板创建大量 HTML。这是一个简单的例子：

```
<html><head>
    <script type="text/x-jsrender" id="historyTemplate">
        {{if orders}}
            <h1>Your Order History</h1>
            <table>
                <thead>
                    <tr><th>Order Name</th><th>Amount</th><th>Status</th><th>Tracking</th></tr>
                </thead>
                <tbody>
                    {{for orders}}<tr>
                        <td><a href="{{>orderId}}" class="orderDetailLink">{{>orderName}}</a></td>
                        <td>{{>total}}</td>
                        <td>{{>status}}</td>
                        <td>{{if trackingNumber}}
                            <a target="_new" href="{{:trackingURL}}">{{>trackingNumber}}</a>
                        {{/if}}</td>
                    </tr>{{/for}}
                </tbody>
            </table>
        {{else}}
            <h1>You have no prior webstore orders.</h1>
        {{/if}}
    </script>

    <script type="text/javascript">
        var customer = {
            name: 'Joe Bloe',
            orders: [
                {   orderName: 'Joe Bloe 2013/04/01 #595',
                    total: 59,
                    status: 'Not yet shipped',
                    trackingNumber: null,
                    trackingUrl: null
                },
                {   orderName: 'Joe Bloe 2013/04/15 #876',
                    total: 32.50,
                    status: 'Shipped',
                    trackingNumber: '55512345',
                    trackingUrl: 'http://www.shipper.com/track?55512345'
                },
            ]
        };
        $("#orderDiv").html( $('#historyTemplate').render(customer) );
    </script>
</head><body>
    <h1>Your Order History</h1>
    <div id="orderDiv"> </div>
</body></html> 
```

数据在提供时可以是页面的一部分，也可以通过 AJAX 或 JSONP 到达，也可以由客户端自己动态生成。到目前为止，我从来没有遇到过性能问题。

# python - 使用 QCompleter 全局输入？

> ID：16158715
> 
> 赞同：4
> 
> 时间：2013-04-23T00:00:34.193
> 
> 标签：python, regex, pyqt, glob, qcompleter

我在 a 中实现了一个标准的 PyQt `QCompleter`，`QLineEdit`其内容是：

```
self.cam_completer = QtGui.QCompleter( self.cameras, self )
self.cam_completer.setCaseSensitivity( 0 )
self.cam_completer.setCompletionMode( 2 )
self.CamerasSearch.setCompleter( self.cam_completer ) 
```

其中`self.cameras`a`list`是字符串，例如：

```
['cam0001:left', 'cam0001:right', 'cam0002:left', 'cam0002:right', etc...] 
```

在`QLineEdit`, 输入`cam`将返回所有项目，`cam0001`将只返回前 2 个，等等。但是，当我输入 时`cam*`，什么都不返回。

我希望能够在搜索时查找模式，包括`*`and `?`。例如，搜索会从结果中`cam000?:left`消除。`cam0010:left`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-11T06:12:23.430

看起来你将不得不实现你自己的完成者。下面是一个使用正则表达式过滤补全的例子：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

#---------
# IMPORT
#---------
import sys, random

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4 import QtGui, QtCore

#---------
# DEFINE
#---------
class QDialogTest(QtGui.QDialog):
    def __init__(self, parent=None):
        super(QDialogTest, self).__init__(parent)

        self.maxVisibleItems = 7

        self.lineEdit = QtGui.QLineEdit(self)
        self.lineEdit.textChanged.connect(self.on_lineEdit_textChanged)

        self.standardItemModel = QtGui.QStandardItemModel(self)

        with open("/usr/share/dict/words", "r") as fileInput:
            for line in  random.sample(fileInput.readlines(), 111):
                self.standardItemModel.appendRow(
                    QtGui.QStandardItem(line.strip())
                )

        self.sortFilterProxyModel = QtGui.QSortFilterProxyModel(self)
        self.sortFilterProxyModel.setSourceModel(self.standardItemModel)
        self.sortFilterProxyModel.setFilterKeyColumn(0)

        self.tableView = QtGui.QTableView(self)
        self.tableView.horizontalHeader().setStretchLastSection(True)
        self.tableView.setModel(self.sortFilterProxyModel)

        self.pushButtonClose = QtGui.QPushButton(self)
        self.pushButtonClose.setText("Close")
        self.pushButtonClose.clicked.connect(sys.exit)

        self.layoutVertical = QtGui.QVBoxLayout(self)
        self.layoutVertical.addWidget(self.tableView)
        self.layoutVertical.addWidget(self.lineEdit)
        self.layoutVertical.addWidget(self.pushButtonClose)

        self.tableViewPopup = QtGui.QTableView(self)
        self.tableViewPopup.setModel(self.sortFilterProxyModel)
        self.tableViewPopup.setWindowFlags(QtCore.Qt.Popup)
        self.tableViewPopup.setFocusPolicy(QtCore.Qt.NoFocus)
        self.tableViewPopup.setFocusProxy(self.lineEdit)
        self.tableViewPopup.setMouseTracking(True)
        self.tableViewPopup.setEditTriggers(QtGui.QTableView.NoEditTriggers)
        self.tableViewPopup.setSelectionBehavior(QtGui.QTableView.SelectRows)
        self.tableViewPopup.setFrameStyle(QtGui.QFrame.Box | QtGui.QFrame.Plain)
        self.tableViewPopup.setHorizontalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
        self.tableViewPopup.horizontalHeader().setStretchLastSection(True)
        self.tableViewPopup.horizontalHeader().hide()
        self.tableViewPopup.verticalHeader().hide()
        self.tableViewPopup.verticalHeader().setDefaultSectionSize(20)
        self.tableViewPopup.doubleClicked.connect(self.setCurrentCompletion)
        self.tableViewPopup.installEventFilter(self)

    def setCurrentCompletion(self):
        self.closePopup()

        indexes = self.tableViewPopup.selectionModel().selectedIndexes()

        self.lineEdit.blockSignals(True)
        self.lineEdit.setText(indexes[0].data(QtCore.Qt.DisplayRole))
        self.lineEdit.blockSignals(False)

    def closePopup(self):
        self.tableViewPopup.hide()
        self.lineEdit.setFocus()

    def eventFilter(self, obj, event):
        if obj != self.tableViewPopup:
            return False

        elif event.type() == QtCore.QEvent.MouseButtonPress:
            self.closePopup()

        elif event.type() == QtCore.QEvent.KeyPress:
            if event.key() in [
                QtCore.Qt.Key_Enter,
                QtCore.Qt.Key_Return
            ]:
                self.setCurrentCompletion()

            elif event.key() in [
                QtCore.Qt.Key_Escape
            ]:
                self.closePopup()

            elif not event.key() in [
                QtCore.Qt.Key_Up,
                QtCore.Qt.Key_Down,
                QtCore.Qt.Key_Home,
                QtCore.Qt.Key_End,
                QtCore.Qt.Key_PageUp,
                QtCore.Qt.Key_PageDown
            ]:
                self.lineEdit.event(event)

        return super(QDialogTest, self).eventFilter(obj, event)

    @QtCore.pyqtSlot(str)
    def on_lineEdit_textChanged(self, text):
        self.tableViewPopup.hide()

        if text != "":
            self.setCompletionPrefix(text)

    def setCompletionPrefix(self, prefix):
        self.sortFilterProxyModel.setFilterRegExp(QtCore.QRegExp(prefix))

        if self.sortFilterProxyModel.rowCount():
            self.complete()

    def complete(self):
        self.tableViewPopup.move(
            self.lineEdit.mapToGlobal(
                QtCore.QPoint(0, self.lineEdit.height())
            )
        )
        self.tableViewPopup.resize(
            self.lineEdit.width(), 
            self.tableViewPopup.verticalHeader().defaultSectionSize() * min(
                self.maxVisibleItems,
                self.sortFilterProxyModel.rowCount()
            ) + 2
        )
        self.tableViewPopup.setFocus()
        self.tableViewPopup.show()       

#---------
# MAIN
#---------
if __name__ == "__main__":    
    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('QDialogTest')

    main = QDialogTest()
    main.resize(333, 333)
    main.exec_()

    sys.exit(app.exec_()) 
```

# php - 在 WordPress 插件中通过 PHP 添加 .htaccess 会过期规则？

> ID：16158716
> 
> 赞同：-3
> 
> 时间：2013-04-23T00:00:44.037
> 
> 标签：php, .htaccess, wordpress

我正在尝试基于我的 .htaccess 想法创建我的第一个 WordPress 插件。我也不太了解 PHP，但我可以更改代码和其他东西。

如何使用 PHP for WordPress 将 .htaccess 规则添加到 .htaccess？

例如，我将如何使用 PHP 生成以下 .htaccess 代码？：

```
<FilesMatch "\.(js|css)$">
ExpiresDefault A604800
Header append Cache-Control "proxy-revalidate"
</FilesMatch> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:12:23.497

.htaccess 只是一个文本文件，因此您可以使用负责此操作的 PHP 函数写入/读取/删除其中的内容。也许`fopen`并且`fwrite`可以让你通过额外的编码和文件权限管理来做到这一点。

第二：.htaccess 中的重写规则与服务器配置有关，我认为 PHP 中没有负责配置服务器行为的函数。我仍在寻找这个，并会在这里给出反馈。

**编辑：**

看看这些：

[使用 PHP 编辑 .htaccess](https://stackoverflow.com/questions/8899805/edit-htaccess-with-php) **Jason Brumwell 答案**

[是否允许 PHP 修改当前文件夹中的 .htaccess 文件？](https://stackoverflow.com/questions/566950/is-php-allowed-to-modify-htaccess-file-in-current-folder)

[http://forums.devshed.com/php-development-5/editing-htaccess-with-php-552406.html](http://forums.devshed.com/php-development-5/editing-htaccess-with-php-552406.html)

祝你好运

# javascript - 在验证时，如果服务器必须始终检查凭据，那么 JavaScript 验证的意义何在？

> ID：16158717
> 
> 赞同：4
> 
> 时间：2013-04-23T00:00:48.113
> 
> 标签：javascript, forms, security

我有一个用户填写的表单，JavaScript 用于验证输入（例如，确保密码字段不留空）。由于 JavaScript 是客户端并且未编译，因此任何人都可以轻松地弄乱它。这是否意味着有必要在服务器上再次验证来自用户的数据？如果是的话，既然 JavaScript（理论上）已经做到了，那么它是否可以变得更高效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T00:03:00.870

是的，有必要在服务器上验证数据，因为最终用户客户端可能会弄乱它。

> 如果是的话，既然 JavaScript（理论上）已经做到了，那么它是否可以变得更高效？

它已经比仅使用服务器端验证更有效，因为您通过客户端验证避免了很多往返验证（您只需提交一次数据，除非验证不完整或被禁用，否则它将直接通过）。也提供了更好的用户体验。

您无法取消服务器端验证（如果您关心数据）。如果数据只返回给同一个用户并且没有在其他任何地方显示或使用（并且没有可能破坏系统上的任何内容），您可以稍微放松一下。举个极端的例子，Dropbox 可能不关心你上传什么文件，所以他们不会验证你上传的 HTML 是否包含恶意 Javascript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T00:03:31.677

只需单击鼠标，我就可以禁用您页面上的任何 javascript。我什至可以完全绕过 HTML 表单并将数据直接发送到您的服务器。

例如，如果您使用`$_GET`I 检索数据，只需弄乱地址栏即可绕过您的表单（和 javascript 验证）。不要认为 using`$_POST`会改变这一点：这只是编写 HTTP 请求的问题。

所以，是的......永远不要相信用户输入，即使使用 javascript 进行了清理。

正如上面有人发布的那样，javascript 验证可以防止合法的用户错误（从而将错误的数据保存到您的服务器然后返回给用户），但恶意用户仍然能够**非常**容易地绕过它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T00:03:42.977

简短的回答：是的，而且总是！

阅读有关 PDO、SQL 注入、UUID、令牌、MD5、SHA、跨站点请求伪造...您有一个全新的世界等着您去发现！:) 我的意思很好。了解这一点，您将建立更安全的网站

您始终需要牢记这一点：永远不要相信用户输入数据。绝不。所以你必须在服务器端执行额外的验证过程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T00:03:27.760

是的，一点没错。在重新发布到服务器之前，仍然有可能有人拦截表单并修改值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T00:03:33.603

用户当然可以禁用 JavaScript。由于源代码就在那里，因此也很容易弄乱它。用户还可以运行任意 JS，从而更容易弄乱你的东西。

因此，您也应该始终进行服务器端验证。客户端验证应仅用作用户的方便信息。永远不要相信它是您唯一的安全来源。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-29T18:19:05.260

是的，您必须在客户端和服务器端都进行验证。您必须考虑渐进增强。将 Javascript 视为只是增强的一个层，而不是必需品。因为用户始终可以自行决定在其浏览器中禁用 Javascript，从而使您的 Javascript 代码无用。

客户端验证的一个优点是您正在保存到服务器的往返验证用户名或密码是否为空，这可以在 javascript 中轻松完成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T00:05:40.273

是的，为了安全起见，您需要添加服务器端验证。
预期在客户端完成的任何事情都没有得到保证，因此您需要重复任何重要的事情。
此外，有些事情可能会在服务器端进行评估，但不会在客户端进行评估。诸如 SQL 注入检查之类的事情就属于这一类。

# jquery - 使用点击事件将用户输入发送到服务器的问题

> ID：16158720
> 
> 赞同：1
> 
> 时间：2013-04-23T00:01:02.277
> 
> 标签：jquery, click, dom-events

我在根据单击提交按钮来组合事件时遇到了一些麻烦。`Chat.send()`我的目标是在用户按下“发送”按钮时使用页面顶部字段中的用户输入来运行该功能。重申一下，我想将文本栏中的字符串传递给`Chat.send()`用户单击发送按钮时。我对此很陌生，正在寻找一个小方向。我对它进行了破解，但它根本不起作用..

```
 <!DOCTYPE html>
  <html>
   <head>
     <meta charset="utf-8">
     <script src="http://chatbuilder.hackreactor.com/ChatBuilder.js"></script>
      </head>
        <body>
          <script>
           Chat.guide.start();
          </script>

   <h2>Borken Chat</h2>

      <input class="draft" type="text"/> <button class="send" disabled>send</button>

<ul class="messages">

  <script>
     var Chat_Messages=[];

  function fetchNew() {
    var PrintChat=function(Chat_Messages){
    var y=Chat_Messages.length;
    for(i=0;i<y;i++){
      Chat.display(Chat_Messages[i]);
    }
    }
 Chat.fetch(PrintChat);
 }

 setInterval(fetchNew,3000);

 /*
 *$('#send').click(function(){
  var Input=<input class="draft" type="text">
  Chat.send(Input)
 }) **This was my attempt. I was trying to use the "send" button to trigger an event that calls Chat.fetch on a variable that I         was trying to define as the user input*/

  </script>

</ul>

 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:07:28.133

尝试这个：

```
$(function(){

  // <-- Stick the rest of your code here.

  $('.send').click(function(){      
    Chat.send($('.draft').val())
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T21:04:32.470

我知道这是一个很老的问题，但我只是能够弄清楚（大部分情况下），所以我想我会分享我所做的。我主要关心的是如何从`<input class="draft" type="text"/>`. 我决定给它一个像这样的值 `<input class="draft" type="text" value=""/>`

和其余的代码 -

```
$('.send').on('click', function(){
var myMessage = $('.draft').val();
Chat.send(myMessage);
}); 
```

它发送到服务器，但我现在唯一遇到的问题是单击 .send 时我输入的文本不会消失。应该不难弄清楚。

# java - 无法正确显示足够的 JLabels/TextField

> ID：16158721
> 
> 赞同：1
> 
> 时间：2013-04-23T00:01:09.177
> 
> 标签：java, swing, layout-manager

我试图在一个框架中显示大约 7 或 8 个多个文本字段和 JLabel。我很难让他们全部出现。我知道显示 GUI 各个部分的唯一方法是创建一个 JFrame，然后在该框架内创建一个容器，然后创建多个面板并将它们添加到容器中。有一个更好的方法吗？一个不那么限制并允许我显示超过 4 帧的？（我仅限于选择 NORTH、EAST、SOUTH、WEST，并且这些位置只会显示一项）

这是我的代码：

```
Container content = n.getContentPane();
         Container contentTwo = n.getContentPane();

            JTextField JField = new JTextField(agentID);
            JTextField stateField = new JTextField("Running");
            JTextField transField = new JTextField(5);
            JTextField opsField  = new JTextField("0");
            stateField.setEnabled(false);
            transField.setEnabled(false);
            JField.setEnabled(false);
            opsField.setEnabled(false);
            JLabel stateLabel = new JLabel("State:");
            JLabel transLabel = new JLabel("Amount transferred:");
            JLabel opsLabel = new JLabel("Operations Completed:");
            JPanel fundsPanel = new JPanel(new BorderLayout());
            JLabel agentLabel = new JLabel("Agent ID: ");
            agentLabel.setDisplayedMnemonic(KeyEvent.VK_ENTER);
            stateLabel.setLabelFor(stateField);
            transLabel.setLabelFor(transField);
            agentLabel.setLabelFor(JField);
            opsLabel.setLabelFor(opsField);
            fundsPanel.add(agentLabel, BorderLayout.WEST);
            fundsPanel.add(JField, BorderLayout.CENTER);
            content.add(fundsPanel, BorderLayout.NORTH);

            JLabel accLabel = new JLabel("Amount in $: ");
            JPanel accPanel = new JPanel(new BorderLayout());
            JPanel accPanelTwo = new JPanel(new BorderLayout());
            JPanel accPanelThree = new JPanel(new BorderLayout());
            accLabel.setDisplayedMnemonic(KeyEvent.VK_ENTER);
            JFormattedTextField accTextField = new JFormattedTextField(amount);
            accTextField.setEnabled(false);
            JLabel opLabel = new JLabel("Operations per second:");
            opLabel.setDisplayedMnemonic(KeyEvent.VK_ENTER);
            JTextField accTextFieldTwo = new JTextField(Double.toString(opsPerSec), 5);
            accTextFieldTwo.setEnabled(false);
            accLabel.setLabelFor(accTextField);
            opLabel.setLabelFor(accTextFieldTwo);
            accPanel.add(accLabel, BorderLayout.WEST);
            accPanel.add(accTextField, BorderLayout.CENTER);
            accPanelTwo.add(opLabel, BorderLayout.WEST);
            accPanelTwo.add(accTextFieldTwo, BorderLayout.CENTER);
            accPanelTwo.add(opsLabel, BorderLayout.EAST);
            accPanelTwo.add(opsField, BorderLayout.NORTH);
            accPanelThree.add(stateLabel, BorderLayout.WEST);
            accPanelThree.add(stateField, BorderLayout.CENTER);
            content.add(accPanel, BorderLayout.CENTER);
            content.add(accPanelTwo, BorderLayout.EAST);
            contentTwo.add(accPanelThree, BorderLayout.EAST);

        JButton jButton1 = new JButton("Stop agent"); 
        JButton jButton2 = new JButton("Dismiss");
        jButton1.addActionListener(handler); 
        jButton2.addActionListener(handler);
        buttonPanel.setLayout(new GridLayout(2, 3, 3, 3));
        n.getContentPane().add(buttonPanel, BorderLayout.SOUTH);
        buttonPanel.add(jButton2, null);
        buttonPanel.add(jButton1, null);
        n.pack(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:19:04.873

我刚刚使用 GridBagLayout 对面板的前几个字段进行了编码，以向您展示如何使用布局。

您必须完成编码才能创建完整的表单。

```
import java.awt.Component;
import java.awt.Container;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class GridBagPanel {

    protected static final Insets leftInsets = new Insets(10, 10, 0, 0);
    protected static final Insets rightInsets = new Insets(10, 10, 0, 10);

    protected JPanel mainPanel;

    protected String agentID;

    public GridBagPanel() {
        createPartControl();
    }

    private void createPartControl() {
        mainPanel = new JPanel();
        mainPanel.setLayout(new GridBagLayout());

        int gridy = 0;

        JLabel stateLabel = new JLabel("State:");
        addComponent(mainPanel, stateLabel, 0, gridy, 1, 1, leftInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        JTextField stateField = new JTextField("Running");
        stateField.setEnabled(false);
        stateLabel.setLabelFor(stateField);
        addComponent(mainPanel, stateField, 1, gridy++, 1, 1, rightInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        JLabel transLabel = new JLabel("Amount transferred:");
        addComponent(mainPanel, transLabel, 0, gridy, 1, 1, leftInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        JTextField transField = new JTextField(5);
        transField.setEnabled(false);
        transLabel.setLabelFor(transField);
        addComponent(mainPanel, transField, 1, gridy++, 1, 1, rightInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        JLabel opsLabel = new JLabel("Operations Completed:");
        addComponent(mainPanel, opsLabel, 0, gridy, 1, 1, leftInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        JTextField opsField = new JTextField("0");
        opsField.setEnabled(false);
        opsLabel.setLabelFor(opsField);
        addComponent(mainPanel, opsField, 1, gridy++, 1, 1, rightInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        JLabel agentLabel = new JLabel("Agent ID: ");
        addComponent(mainPanel, opsLabel, 0, gridy, 1, 1, leftInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        JTextField agentField = new JTextField(agentID);
        agentField.setEnabled(false);
        agentLabel.setLabelFor(agentField);
        addComponent(mainPanel, agentField, 1, gridy++, 1, 1, rightInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

    }

    protected void addComponent(Container container, Component component,
            int gridx, int gridy, int gridwidth, int gridheight, Insets insets,
            int anchor, int fill) {
        GridBagConstraints gbc = new GridBagConstraints(gridx, gridy,
                gridwidth, gridheight, 1.0D, 1.0D, anchor, fill, insets, 0, 0);
        container.add(component, gbc);
    }

} 
```

# php - PHP - MySQL 查询拒绝执行

> ID：16158724
> 
> 赞同：0
> 
> 时间：2013-04-23T00:01:14.643
> 
> 标签：php, mysql, execute

我有以下代码：

```
<?php

$usStates = array(
    'Alabama',
    'Alaska',
    'Arizona',
    'Arkansas',
    'California',
    'Colorado',
    'Connecticut',
    'Delaware',
    'Florida',
    'Georgia',
    'Hawaii',
    'Idaho',
    'Illinois',
    'Indiana',
    'Iowa',
    'Kansas',
    'Kentucky',
    'Louisiana',
    'Maine',
    'Maryland',
    'Massachusetts',
    'Michigan',
    'Minnesota',
    'Mississippi',
    'Missouri',
    'Montana',
    'Nebraska',
    'Nevada',
    'New Hampshire',
    'New Jersey',
    'New Mexico',
    'New York',
    'North Carolina',
    'North Dakota',
    'Ohio',
    'Oklahoma',
    'Oregon',
    'Pennsylvania',
    'Rhode Island',
    'South Carolina',
    'South Dakota',
    'Tennessee',
    'Texas',
    'Utah',
    'Vermont',
    'Virginia',
    'Washington',
    'West Virginia',
    'Wisconsin',
    'Wyoming',
);

$link = new mysqli("localhost", "drup197", "*******", "census");
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

foreach ($usStates as $state) {
    printf("Entering loop\n");
    printf("Current state = %s\n", $state);

    if (mysqli_query($link, "CREATE TABLE '$state'_age_and_gender_demographics LIKE national_age_and_gender_demographics")) {
        printf("%s_age_and_gender_demographics successfully created\n", $state);
    }
    if (mysqli_query($link, "CREATE TABLE '$state'_race_demographics_-_one_race LIKE national_race_demographics_-_one_race")) {
        printf("%s_race_demographics_-_one_race successfully craeted\n");
    }
    if (mysqli_query($link, "CREATE TABLE '$state'_race_demographics_-_multi-race LIKE national_race_demographics_-_multi-race")) {
        printf("%s_race_demographics_-_multi-race successfully craeted\n");
    }
    if (mysqli_query($link, "CREATE TABLE '$state'_race_demographics_-_hispanic_or_latino LIKE national_race_demographics_-_hispanic_or_latino")) {
        printf("%s_race_demographics_-_hispanic_or_latino successfully craeted\n");
    }
}
printf("Tables successfuly created");

mysqli_close($link);
?> 
```

基本上，我正在尝试为所有 50 个州创建表，使用州名作为表名的通配符。但是，这些查询似乎没有执行。你能告诉我这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:02:48.933

从查询字符串中删除单引号。您正在尝试创建名为 **'California'_age_and_gender_demographics 的**表。

或尝试：

```
if (mysqli_query($link, "CREATE TABLE ". $state ."_age_and_gender_demographics LIKE national_age_and_gender_demographics")) {
    printf("%s_age_and_gender_demographics successfully created\n", $state);
}
if (mysqli_query($link, "CREATE TABLE ". $state ."_race_demographics_-_one_race LIKE national_race_demographics_-_one_race")) {
    printf("%s_race_demographics_-_one_race successfully craeted\n");
}
if (mysqli_query($link, "CREATE TABLE ". $state ."_race_demographics_-_multi-race LIKE national_race_demographics_-_multi-race")) {
    printf("%s_race_demographics_-_multi-race successfully craeted\n");
}
if (mysqli_query($link, "CREATE TABLE ". $state ."_race_demographics_-_hispanic_or_latino LIKE national_race_demographics_-_hispanic_or_latino")) {
    printf("%s_race_demographics_-_hispanic_or_latino successfully craeted\n");
} 
```

# python - 有没有办法用 python 的 win32security 验证用户权限

> ID：16158725
> 
> 赞同：2
> 
> 时间：2013-04-23T00:01:19.717
> 
> 标签：python, windows, security, ssh, pywin32

我知道 win32security.LogonUser。我想要做的是检查输入的凭据以了解它们是否与本地 Windows 机器上的用户和密码匹配，以便我可以授予他们通过网络访问 Windows 机器的权限。这个想法是使用具有默认 Windows 身份验证的 paramiko 制作一个 pythonic ssh 服务器。我不想做的是每次建立新连接时注销用户，或者因为用户已经登录而导致身份验证过程失败。有没有办法在 Windows 上验证用户而无需创建登录会议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:07:23.513

事实证明，我只是`LogonUser`错误地使用了该功能。确实存在一个枚举值来传递函数以告诉它您希望返回一个安全上下文以使用该用户的凭据执行进程，并且如果曾经传入错误的用户名或密码，则会引发异常。

换句话说，这是调用该方法的可接受方式，因此如果用户已经登录或有多个会话正在运行，它不会引发异常。这也是一种能够即时验证用户凭据以满足任何应用程序需求的好方法：

```
try:
    hUser = win32security.LogonUser(username,
                                    domain,
                                    password,
                                    win32security.LOGON32_LOGON_INTERACTIVE,
                                    win32security.LOGON32_PROVIDER_DEFAULT) 
except win32security.error:
    print "Failed"
    import traceback
    traceback.print_exc() 
```

# angularjs - AngularJS 和字体真棒问题

> ID：16158733
> 
> 赞同：4
> 
> 时间：2013-04-23T00:02:38.113
> 
> 标签：angularjs, font-awesome

## 看法

```
<li ng-repeat="avatar in avatars" style="background-image: url(images/{{avatar.bg}})">
  <i>{{avatar.icon}}</i>      
</li>
<li><i>&#xf09b;</i></li> 
```

## 控制器

```
.controller('AboutCtrl', function($scope) {
  $scope.avatars = [
    {"icon": "&#xf09b;", "bg": "github.jpeg", "href": "http://google.com"},
    {"icon": "&#xf0d4;", "bg": "twitter.jpeg", "href": "http://google.com"},
    {"icon": "&#xf081;", "bg": "gplus.jpg", "href": "http://google.com"},
    {"icon": "&#xf082;", "bg": "fb.jpg", "href": "http://google.com"}
  ];
}) 
```

## 问题

我使用@font-face 将“Font Awesome”添加到我的 CSS 文件中，然后将其设置为所有`<i>`元素的字体。`<i>`但是由于某种原因，当我使用 Angular通过“avatar.icon”将特殊字符值插入到元素中时，我的字体不会呈现。

我在视图中添加了第二`<li>`组以确保它确实是 Angular 而不是 CSS 特异性问题，但第二个`<i>`标记中的特殊字符呈现得很好。

我知道我忽略了一些东西，但我无法弄清楚。提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:07:19.757

我相信您需要包含该`ngSanitize`模块并`ng-bind-html`像这样使用：

```
<i ng-bind-html='avatar.icon'></i> 
```

文档： [http ://docs.angularjs.org/api/ngSanitize.directive:ngBindHtml](http://docs.angularjs.org/api/ngSanitize.directive:ngBindHtml)

请注意，有一个单独的库 angular-sanitize.js，您可以像这样包含模块：

```
angular.module('yourApp', ['ngCookies','ngResource','ngSanitize']) 
```

更新：

根据其中一条评论，您还可以使用： `ng-bind-html-unsafe="{expression}"` [http ://docs.angularjs.org/api/ng.directive:ngBindHtmlUnsafe](http://docs.angularjs.org/api/ng.directive:ngBindHtmlUnsafe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:52:35.400

## 索引.html

```
<script src="components/angular/angular.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular-sanitize.min.js"></script> 
```

*   !important 确保添加 angular-sanitize.js，否则这些都不起作用。

## 应用程序.js

```
angular.module('myApp', ['ngSanitize'])
  .config(function ($routeProvider) {
    $routeProvider
      .when('/', {
        redirectTo: '/home'
      })
  }); 
```

*   将“ngSantize”注入 myApp

## main.js

```
angular.module('myApp')
  .controller('AboutCtrl', function($scope) {
    $scope.avatars = [
      {"icon": "&#xf09b;", "bg": "twitter.jpeg", "href": "http://google.com"},
      {"icon": "&#xf0d4;", "bg": "twitter.jpeg", "href": "http://google.com"},
      {"icon": "&#xf081;", "bg": "gplus.jpg", "href": "http://google.com"},
      {"icon": "&#xf082;", "bg": "fb.jpg", "href": "http://google.com"}
    ];
  }); 
```

*   这里没什么奇怪的只是设置范围

## about.html

```
<li ng-repeat="avatar in avatars" style="background-image: url(images/{{avatar.bg}})">
  <a class="social" href="{{avatar.href}}" target="_blank">
    <i ng-sanitize ng-bind-html="avatar.icon"></i>
  </a>
</li> 
```

*   使用 ng-bind-html 正确处理特殊字符
*   确保不要在 ng-bind-html 中添加花括号

## 解释

以上是我的完整解决方案，其中包含一些用于轴承的周边代码。

# node.js - Beaglebone (ARM) 上的串行端口节点错误

> ID：16158735
> 
> 赞同：1
> 
> 时间：2013-04-23T00:02:40.683
> 
> 标签：node.js, ubuntu, arduino, arm, johnny-five

我正在尝试在运行 Ubuntu 12.04 的 Beaglebone 上运行 Node Arduino 库 [https://github.com/rwldrn/johnny-5]。但是，当我尝试运行示例程序（servo.js 或任何其他程序）时，控制台会吐出：

```
/home/rov/node_modules/johnny-five/node_modules/firmata/node_modules/serialport/node_modules/bindings/bindings.js:91
  throw err
        ^
Error: Could not locate the bindings file. Tried:
 → /home/rov/node_modules/johnny-five/node_modules/firmata/node_modules/serialport/build/serialport.node
 → /home/rov/node_modules/johnny-five/node_modules/firmata/node_modules/serialport/build/Debug/serialport.node
 → /home/rov/node_modules/johnny-five/node_modules/firmata/node_modules/serialport/build/Release/serialport.node
 → /home/rov/node_modules/johnny-five/node_modules/firmata/node_modules/serialport/out/Debug/serialport.node
 → /home/rov/node_modules/johnny-five/node_modules/firmata/node_modules/serialport/Debug/serialport.node
 → /home/rov/node_modules/johnny-five/node_modules/firmata/node_modules/serialport/out/Release/serialport.node
 → /home/rov/node_modules/johnny-five/node_modules/firmata/node_modules/serialport/Release/serialport.node
 → /home/rov/node_modules/johnny-five/node_modules/firmata/node_modules/serialport/build/default/serialport.node
 → /home/rov/node_modules/johnny-five/node_modules/firmata/node_modules/serialport/compiled/0.8.15/linux/arm/serialport.node
    at bindings (/home/rov/node_modules/johnny-five/node_modules/firmata/node_modules/serialport/node_modules/bindings/bindings.js:88:9)
    at Object.<anonymous> (/home/rov/node_modules/johnny-five/node_modules/firmata/node_modules/serialport/serialport.js:7:44)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/home/rov/node_modules/johnny-five/node_modules/firmata/lib/firmata.js:9:18)
    at Module._compile (module.js:449:26) 
```

我尝试通过 npm (npm install serialport) 安装串行端口，但仍然遇到相同的错误。如何安装 serialport 以便它可以被servo.js 文件识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T07:45:00.090

`serialport`是`johnny-five`and的依赖关系`firmata`，但由于`firmata`它本身是依赖关系，`johnny-five`我相信`firmata`会`serialport`从 johnny-5/node_modules 引用。

另请注意，这[`serialport`需要 Python 2.x](https://github.com/voodootikigod/node-serialport#to-install)。

如果 npm 安装`johnny-five`正确，它应该已经将serialport.node 构建到**johnny-five/node_modules/serialport/build/Release** **-**你在那里看到了吗？

 **如果没有，请在新目录中尝试此操作

*   `$ git clone https://github.com/rwldrn/johnny-five`
*   `$ cd johnny-five`
*   `$ npm install`

它成功了吗？将**/home/rov/node_modules/johnny-5**替换为您刚刚构建的克隆存储库。**

# java - Java 中的 ActionListener 实现

> ID：16158743
> 
> 赞同：0
> 
> 时间：2013-04-23T00:03:18.390
> 
> 标签：java, swing, actionlistener, jtextfield

你能帮我在我的代码中正确使用 ActionListener 吗？代码编译，GUI 显示正确，但没有按钮工作！！如果要测试代码，请注意需要将图像与创建的项目文件放在同一文件夹中，并更改“ImageIcon myImageIcon = new ImageIcon("rodeo.jpg");”行 根据您的照片名称。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ImageApplication extends JFrame implements ActionListener
{
public Image myImage;
public JLabel myImageLabel;
public ImageIcon myImageIcon;
public JFrame frame;
public JTextField txtWidth, txtHeight;
public int origWidth, origHeight;

public static void main(String[] args)
{
    int origWidth, origHeight;
    ImageApplication ia = new ImageApplication();
    ia.setVisible(true);
    JFrame frame = new JFrame();
    ImageIcon myImageIcon = new ImageIcon("rodeo.jpg");
    JLabel myImageLabel = new JLabel(myImageIcon, JLabel.CENTER);
    Image myImage = myImageIcon.getImage();

    origWidth = myImageIcon.getIconWidth();
    origHeight = myImageIcon.getIconHeight();

    JMenuBar myMenuBar = new JMenuBar();
    JMenu myMenu = new JMenu("Options");
    JMenuItem myMenuItem1 = new JMenuItem("Double");
    JMenuItem myMenuItem2 = new JMenuItem("Reset");
    myMenu.add(myMenuItem1);
    myMenu.add(myMenuItem2);
    myMenuBar.add(myMenu);
    ia.setJMenuBar(myMenuBar);

    JButton bAL = new JButton("Align Left");
    JButton bAC = new JButton("Align Center");
    JButton bAR = new JButton("Align Right");
    JButton bResize = new JButton ("Resize");
    bAL.setFocusPainted(false);
    bAC.setFocusPainted(false);
    bAR.setFocusPainted(false);
    bResize.setFocusPainted(false);

    JLabel lWidth = new JLabel("Width:");
    JLabel lHeight = new JLabel("Height:");
    JTextField txtWidth = new JTextField(Integer.toString(origWidth));
    JTextField txtHeight = new JTextField(Integer.toString(origHeight));

    JPanel GRID = new JPanel(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();

    c.fill = GridBagConstraints.BOTH;
    c.weightx = 1f;
    c.weighty = 0f;

    c.gridx = 0;
    c.gridy = 0;
    GRID.add(bAL, c);
    c.gridx++;
    GRID.add(bAC, c);
    c.gridx++;
    GRID.add(bAR, c);
    c.gridx = 0;
    c.gridy = 1;
    c.gridwidth = 3;
    GRID.add(myImageLabel, c);
    c.gridwidth = 1;

    c.gridx = 0;
    c.gridy = 2;
    GRID.add(lWidth, c);
    c.gridx++;
    c.gridwidth = 2;
    GRID.add(txtWidth, c);
    c.gridwidth = 1;

    c.gridx = 0;
    c.gridy = 3;
    GRID.add(lHeight, c);
    c.gridx++;
    c.gridwidth = 2;
    GRID.add(txtHeight, c);
    c.gridwidth = 1;

    c.gridx = 0;
    c.gridy = 4;
    GRID.add(bResize, c);

    ia.add(GRID, BorderLayout.CENTER);
    ia.setSize(origWidth + 150, origHeight + 150);

    myMenuItem1.addActionListener(ia);
    myMenuItem1.setActionCommand("double");
    myMenuItem2.addActionListener(ia);
    myMenuItem2.setActionCommand("reset");
    bAL.addActionListener(ia);
    bAL.setActionCommand("left");
    bAC.addActionListener(ia);
    bAC.setActionCommand("center");
    bAR.addActionListener(ia);
    bAR.setActionCommand("right");
    bResize.addActionListener(ia);
    bResize.setActionCommand("resize");
}

private void ResizeImage(int Width, int Height)
{
    myImage = myImage.getScaledInstance(Width, Height, Image.SCALE_SMOOTH);
    myImageIcon.setImage(myImage);
    myImageLabel.setIcon(myImageIcon);

    txtWidth.setText(Integer.toString(Width));
    txtHeight.setText(Integer.toString(Height));

    setSize(Width + 150, Height + 150);
}

public void actionPerformed(ActionEvent e)
{
    String command = e.getActionCommand();

    if(command == "left") myImageLabel.setHorizontalAlignment(JLabel.LEFT);
    else if(command == "center") myImageLabel.setHorizontalAlignment(JLabel.CENTER);
    else if(command == "right") myImageLabel.setHorizontalAlignment(JLabel.RIGHT);
    else if(command == "resize") ResizeImage(Integer.parseInt(txtWidth.getText()),       
    Integer.parseInt(txtHeight.getText()));
    else if(command == "double") ResizeImage(myImageIcon.getIconWidth() * 2,  
    myImageIcon.getIconHeight() * 2);
    else if(command == "reset") ResizeImage(origWidth, origHeight);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T00:05:20.353

用于`String#equals`比较`String`内容。您正在使用`==`比较对象引用的运算符。

但是，由于按钮具有不同的功能，最好每个按钮都有一个单独的`ActionListener`. 这可以使用匿名`ActionListener`实例来完成。

`myImageLabel`附带问题：未分配类成员变量。`static`而是在main 方法中初始化另一个具有相同名称的变量。您需要将 main 方法中实例化的所有组件移动到一个实例方法中，并删除 JLabel 本地类声明。

*移动代码后：*

```
JLabel myImageLabel = new JLabel(myImageIcon, JLabel.CENTER); 
```

应该

```
myImageLabel = new JLabel(myImageIcon, JLabel.CENTER); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T00:14:43.040

试试这个方法：它的作用：它添加到按钮本身，当单击要执行的方法时：

```
buttonName.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                //do what ever
            }
        });
        //set bunds for the button itself, if not done otherwise, but for your layout. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T00:14:43.790

这些实例变量：

```
public JTextField txtWidth, txtHeight; 
```

从未初始化，但在您的侦听器代码中引用。您有要实例化的同名局部变量。改变这个：

```
JTextField txtWidth = new JTextField(Integer.toString(origWidth));
JTextField txtHeight = new JTextField(Integer.toString(origHeight)); 
```

对此：

```
txtWidth = new JTextField(Integer.toString(origWidth));
txtHeight = new JTextField(Integer.toString(origHeight)); 
```

对于您的其他实例变量也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-10T12:04:31.247

使用以下代码获取图像

ImageIcon myImageIcon = new ImageIcon("rodeo.jpg").getImage();

# wpf - Caliburn.Micro：如何更换导体 到指挥 .Collection.OneActive

> ID：16158750
> 
> 赞同：0
> 
> 时间：2013-04-23T00:03:45.203
> 
> 标签：wpf, silverlight, caliburn.micro

我有一个`Conductor<IScreen>`在应用程序中的主视图模型，它似乎工作正常。相应的视图有一个名为 ActiveItem 的 ContentControl，它显示了我可以在视图模型上使用 ActivateItem 激活的 ActiveItem。

但我想将其更改为`Conductor<IScreen>.Collection.OneActive`. 我认为在基本层面上，这将是一个将我的视图模型更改为的简单案例：

```
public class MyViewModel : Conductor<IScreen>.Collection.OneActive 
```

但这似乎破坏了视图中的元素（它们只是不显示）如果还有其他步骤我可能需要对此进行测试，任何人都可以解释一下吗？或者更改为 Conductor 的 Collection 实现会产生什么影响，这可能会破坏我认为的其他 UI 元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:53:29.110

最后的答案相当简单：

导体的集合实现添加的主要内容是 Items 属性。事实证明，我的视图中有一个 UI 元素也称为 Items，所以我猜 Caliburn.Micro 会自动将它绑定到视图中的 Items 元素，从而导致奇怪的事情发生。重命名 UI 元素解决了这个问题。

# javascript - jQuery/Javascript：按钮 - 替换图像

> ID：16158751
> 
> 赞同：0
> 
> 时间：2013-04-23T00:03:50.643
> 
> 标签：javascript, jquery, image

我对 JavaScript 知之甚少，需要一些帮助。我有这段代码（如下），当倒计时结束时，它会用新的图像替换图像。

我想修改它，而不是倒计时 - 而是按下按钮（img）。这是我的设计以获得一个想法：*[设计](http://i.imgur.com/p3bS0TU.jpg)*。

我猜这次我需要 4 个图像加载器而不是一个（每个框一个）和一些代码来制作它，以便当单击“旧 ->”按钮时它会触发图像的加载？

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript" charset="UTF-8"></script>
        <script src="js/jquery.countdown.js" type="text/javascript" charset="UTF-8"></script>
        <script type="text/javascript">
            <!-- The ready() function will force the browser to run wait running the javascript until the entire page has loaded -->
            $(document).ready(function() {

                // The jquery code for constructing and starting the counter
                // has been wrapped inside a function so we can call it whenever we want to
                function startCounter(imageLoader){
                    $('#counter_2').countdown({
                         image: 'img/digits.png',
                         startTime: '00:03',
                         timerEnd: function(){ callback(imageLoader) },
                         format: 'mm:ss'
                    })
                }

                // Takes care of whatever need to be done every time
                function callback(imageLoader){
                    // Replace image
                    $('#image').attr('src', imageLoader.nextImage());

                    // Clear the finished counter, so a new can be constructed in its place
                    $('#counter_2').empty();

                    // Construct a new counter and starts it
                    startCounter(imageLoader);
                }

                function ImageLoader(images){
                    this.images = images;
                    this.current = 0;
                    this.nextImage = function(){
                        this.current = (this.current+1) % this.images.length;
                        return this.images[this.current];;
                    }
                }

                // Fill in images in this array
                imageLoader = new ImageLoader(['img/turd.png', 'img/guitar.gif', 'img/carrot.jpg', 'img/puppy.jpg']);

                // Set everything off! (Construct a new counter and starts it)
                startCounter(imageLoader);
            });
        </script>
        <style type="text/css">
            div.counter{
                font-size: 36px;
                font-weight: bold;
                line-height: 77px;
            }
        </style>
    </head>
    <body>
        <div id="counter_2" class="counter"></div>
        <img id="image" src="img/turd.png" alt="Hot steaming turd">
    </body>
</html> 
```

谢谢大家，我真的很困惑，非常感谢你的帮助。

# macos - Delphi XE4 Professional + Mobile Add-On 的 Mac 要求

> ID：16158752
> 
> 赞同：1
> 
> 时间：2013-04-23T00:03:53.533
> 
> 标签：macos, delphi, delphi-xe4

我找不到有关 Mac 对 Delphi XE4（专业版）移动插件的系统要求的信息。

我的理解是，仍然需要 XCode 来签署应用程序二进制文件并将其部署在测试设备和/或 App Store 上。

我们的 Mac 太旧了，甚至无法安装最新 XCode 的 OSX 最低要求。

我想知道我们是否需要升级 Mac 以适应这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T00:28:01.273

好的 - 找到了答案：[https](https://www.embarcadero.com/products/rad-studio/rad-studio-data-sheet.pdf) ://www.embarcadero.com/products/rad-studio/rad-studio-data-sheet.pdf第二页：

> 运行 Windows 的 PC 与基于 Intel 的 Mac 连接，具有 2 GB 或更多 RAM，使用 SSH、VNC 或 Windows 文件共享解决方案在局域网上运行 OS X 10.8 (Mountain Lion) 或 10.7 (Lion)

如果您试图帮助我，我们深表歉意并非常感谢：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T00:10:18.097

XCode 仍然是必需的，因此您的 Mac 系统当然必须更新才能支持它。

XE3的[文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/Mac_OS_X_Application_Development)将为您提供该版本的最低要求，您应该要求 XE4 至少需要这些最低要求。由于您现有的系统似乎不满足这些要求，您可能可以确定它不支持 XE4 的要求。

您也可以联系 Embarcadero 销售人员咨询售前问题，并使用您期望的电子邮件地址（sales at the companyname.com）。

# google-analytics - 使用 Echo 进行 Google Analytics 事件跟踪

> ID：16158753
> 
> 赞同：0
> 
> 时间：2013-04-23T00:04:02.143
> 
> 标签：google-analytics, event-tracking

我正在尝试跟踪 onclick 事件以跟踪我网站上的按钮，但我对 PHP 不太熟悉。

这是代码在我的网站上的样子的示例：

```
<a href="<?php if($clang=='en') { echo "http://www.website.com/english/"; } 
else {
echo "http://www.website.com/news/"; } ?>" class="xyz_<?php echo $clang; ?>">News Button</a> 
```

我需要在下面添加此代码以跟踪用户何时单击“新闻按钮”图像：

```
onClick="_gaq.push(['_trackEvent', 'banner', 'click', 'News Button']);" 
```

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:16:54.280

```
<a href="<?php echo $clang == 'en' ? "http://www.website.com/english/" : "http://www.website.com/news/"; ?>" class="xyz_<?php echo $clang; ?>" onClick="_gaq.push(['_trackEvent', 'banner', 'click', 'News Button']);">News Button</a> 
```

这将是添加它的快速方法。如果您需要任何澄清，请告诉我。我将您的 php 压缩为由三元运算符处理。不需要像以前那样做 if 语句。

# python - 从路径导入 Python

> ID：16158755
> 
> 赞同：0
> 
> 时间：2013-04-23T00:04:24.743
> 
> 标签：python, import, path, package, sys

我正在研究这种结构或python中的一个项目：

```
 main.py      #must get all the classes from /handlers
 jhpy.py
 handlers/    #files must import jhpy without making meth code in the a, b, ... files
         /a.py
         /b.py
         /...
 entities/    # files in handlers may need these. foo, bar, ... must import jhpy without making creepy code
         /foo.py
         /bar.py
         /... 
```

主要目标是使所有这些提到的事情都起作用，而不必在每个文件中都执行 sys.blah blah。重点是，不要让 a, b, foo, bar, ... 有如此可怕的代码。

有任何想法吗？我很确定我必须做更多的文件。也许我需要添加`__init__.py`，如果是这样，我应该在这些文件中写什么？这些“额外”文件应该做脏活，这样当我向其中添加新文件时`/handlers`，`/entities`它们就会保持干净。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:23:14.167

您要用作模块的所有目录都应包含一个名为**init** .py的文件

您的项目结构如下所示：

```
main.py      #must get all the classes from /handlers
jhpy.py
handlers/  
         /__init__.py
         /a.py
         /b.py
         /...
 entities/   
         /__init__.py
         /foo.py
         /bar.py
         /... 
```

# javascript - 带有 Ajax 页面调用的 JQuery UI 选项卡中的另一个 JQuery 组件

> ID：16158757
> 
> 赞同：0
> 
> 时间：2013-04-23T00:04:48.810
> 
> 标签：javascript, jquery, html, css

我目前正在使用带有 Ajax 页面调用的 JQuery U 选项卡。在页面中，我有一个正常工作的自定义滚动条。我还有一个 ajax 搜索表，它在页面在浏览器中自行加载时工作，但在 JQuery UI 选项卡中调用时不工作。

以下是 JQuery UI 选项卡的代码。

Javascript 调用

```
 <script>
  $(function() {

    // getter
var heightStyle = $( ".selector" ).tabs( "option", "heightStyle" );

// setter
$( ".selector" ).tabs( "option", "heightStyle", "fill" );
    $( "#tabs" ).tabs({
      beforeLoad: function( event, ui ) {
        ui.jqXHR.error(function() {
          ui.panel.html(
            "Couldn't load this tab. We'll try to fix this as soon as possible. " +
            "If this wouldn't be a demo." );
        });
      }
    });
  });
  </script> 
```

HTML：

```
<div id="tabs">
                  <ul>
                    <li><a href="#tabs-1">View</a></li>
                    <li><a href="page2.html">Add</a></li>
                    <li><a href="page3.html">Modify</a></li>
                  </ul>
                  <div id="tabs-1">
</div>
</div> 
```

以下是 page2.html 中的代码：

```
<div class="tables">
    <div id="content_3" class="content">
    <div class="search">
        <div class="searchtitle">Search</div>
        <label for="search"><input type="text" id="search"/></label>        
    </div>

    <table id="tblData" class="target">
        <tbody>
            <tr>
                <th width="110px">Course</th>
                <th width="92px">Group</th>
                <th width="204px">Period</th>
                <th width="81px">Room</th>
                <th width="117px">Actions</th>
            </tr>
            <tr>
                <td class="odd">Unit 1</td>
                <td class="odd">Group 2</td>
                <td class="odd">00-00-00 - 00-00-00 </td>
                <td class="odd">Room 1</td>
                <td class="odd"><img src="../../Images/actions-delete-icon-normal.png"/><img src="../../Images/actions-edit-icon-normal.png"/></td>
            </tr>
            <tr>
                <td class="even">Unit#</td>
                <td class="even">###</td>
                <td class="even">00-00-00 - 00-00-00 </td>
                <td class="even">Room 2</td>
                <td class="even"><img src="../../Images/actions-delete-icon-normal.png"/><img src="../../Images/actions-edit-icon-normal.png"/></td>
            </tr>
            <tr>
                <td class="odd">Unit#</td>
                <td class="odd">###</td>
                <td class="odd">00-00-00 - 00-00-00 </td>
                <td class="odd">###</td>
                <td class="odd"><img src="../../Images/actions-delete-icon-normal.png"/><img src="../../Images/actions-edit-icon-normal.png"/></td>
            </tr>

        </tbody>
    </table>
</div>

</div>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<script type="text/javascript">
    $(document).ready(function()
    {
        $('#search').keyup(function()
        {
            searchTable($(this).val());
        });
    });
    function searchTable(inputVal)
    {
        var table = $('#tblData');
        table.find('tr').each(function(index, row)
        {
            var allCells = $(row).find('td');
            if(allCells.length > 0)
            {
                var found = false;
                allCells.each(function(index, td)
                {
                    var regExp = new RegExp(inputVal, 'i');
                    if(regExp.test($(td).text()))
                    {
                        found = true;
                        return false;
                    }
                });
                if(found == true)$(row).show();else $(row).hide();
            }
        });
    }
</script> 
```

我怀疑是page2.html 中的 Javascript 中的*$(document).ready(function()没有触发。*

对解决这个问题有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:40:52.057

当我使用您的代码创建测试时，加载搜索功能没有任何问题。但是，由于您没有显示起始页面的完整 html，因此您的问题可能是您在尝试获取任何其他页面之前没有加载 jQuery。其中有一些错误，例如调用`tab()`函数 3 次（以及在`selector`类中不存在的元素上）。当您只需要一个设置了所有选项时。我也改成`heightStyle`了`content`。无法创建 jsfiddle 演示，因为您有两个 html 页面，但这是我的代码，对我来说很好：

起始页：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js" type="text/javascript"></script>
        <script>
            $(function()
            {
                $( "#tabs" ).tabs(
                {
                    heightStyle: "content",
                    beforeLoad: function( event, ui )
                    {
                        ui.jqXHR.error(function()
                        {
                            ui.panel.html("Couldn't load this tab. We'll try to fix this as soon as possible. If this wouldn't be a demo." );
                        });
                    }
                });
            });
        </script>
    </head>
    <body>
        <div id="tabs">
            <ul>
                <li><a href="#tabs-1">View</a></li>
                <li><a href="page2.html">Add</a></li>
                <li><a href="page3.html">Modify</a></li>
            </ul>
            <div id="tabs-1">View Page</div>
        </div>
    </body>
</html> 
```

page2.html：

```
<div class="tables">
    <div id="content_3" class="content">
        <div class="search">
            <div class="searchtitle">Search</div>
            <label for="search"><input type="text" id="search"/></label>        
        </div>
        <table id="tblData" class="target">
            <tbody>
                <tr>
                    <th width="110px">Course</th>
                    <th width="92px">Group</th>
                    <th width="204px">Period</th>
                    <th width="81px">Room</th>
                    <th width="117px">Actions</th>
                </tr>
                <tr>
                    <td class="odd">Unit 1</td>
                    <td class="odd">Group 2</td>
                    <td class="odd">00-00-00 - 00-00-00 </td>
                    <td class="odd">Room 1</td>
                    <td class="odd">
                        <img src="../../Images/actions-delete-icon-normal.png"/>
                        <img src="../../Images/actions-edit-icon-normal.png"/>
                    </td>
                </tr>
                <tr>
                    <td class="even">Unit#</td>
                    <td class="even">###</td>
                    <td class="even">00-00-00 - 00-00-00 </td>
                    <td class="even">Room 2</td>
                    <td class="even">
                        <img src="../../Images/actions-delete-icon-normal.png"/>
                        <img src="../../Images/actions-edit-icon-normal.png"/>
                    </td>
                </tr>
                <tr>
                    <td class="odd">Unit#</td>
                    <td class="odd">###</td>
                    <td class="odd">00-00-00 - 00-00-00 </td>
                    <td class="odd">###</td>
                    <td class="odd">
                        <img src="../../Images/actions-delete-icon-normal.png"/>
                        <img src="../../Images/actions-edit-icon-normal.png"/>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function()
    {
        $('#search').keyup(function()
        {
            searchTable($(this).val());
        });
    });

    function searchTable(inputVal)
    {
        var table = $('#tblData');
        table.find('tr').each(function(index, row)
        {
            var allCells = $(row).find('td');
            if(allCells.length > 0)
            {
                var found = false;
                allCells.each(function(index, td)
                {
                    var regExp = new RegExp(inputVal, 'i');
                    if(regExp.test($(td).text()))
                    {
                        found = true;
                        return false;
                    }
                });

                if(found == true)
                    $(row).show();
                else
                    $(row).hide();
            }
        });
    }
</script> 
```

# java - 如何获取正确的外部 SDCard 位置

> ID：16158760
> 
> 赞同：0
> 
> 时间：2013-04-23T00:05:02.210
> 
> 标签：java, android, storage

为什么`Environment.getExternalStorageDirectory()`返回内部存储（storage/sdcard0/）？就我而言， sdcard0 是本地的， sdcard1 是外部的......等等。

还：

我一直在编码以获取正确的外部安装 SDCard 位置，但没有任何运气。

```
Environment.getExternalStorageDirectory().getAbsolutePath(); 
```

将返回本地存储。

我正在递归地扫描文件系统以查找特定类型的文件，但如果我不进行硬编码

```
String rootPath = File.separator+"storage"; 
```

然后我会递归地得到我需要的所有东西。

任何帮助将不胜感激。

目标是获取所有存储位置的所有根（我认为没有环境变量）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:21:38.280

对，那是正确的。`Environment.getExternalStorageDirectory().getAbsolutePath()`将根据供应商关于它应该是什么的决定返回一个安装点。现在大多数 OEM 将其指向一个内部挂载点，例如`sdcard0`or `/emulated/0/`。

但根挂载点将始终源自`/mnt`. 因此，如果您想查看与平常不同的安装内容，请从此处开始扫描。

# python - 想找到一种平均处理多个列表的方法

> ID：16158764
> 
> 赞同：6
> 
> 时间：2013-04-23T00:05:22.343
> 
> 标签：python, list, nested

假设我们在 python 中创建一个这样的列表：

```
[[1, 2, 3], [1, 3, 4], [2, 4, 5]] 
```

然后我想取`1+1+2`并除以 3，给我该元素的平均值并存储在一个新列表中。我想对第二个元素再次这样做，最后对第三个元素这样做。如何简洁地做到这一点？（我想不出除了多个循环之外的其他方法。）

输出应该是一个新列表`[(1+1+2), (2+3+4), (3+4+5)]`

非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T00:08:56.177

平均值：

```
>>> data = [[1, 2, 3], [1, 3, 4], [2, 4, 5]]
>>> from __future__ import division
>>> [sum(e)/len(e) for e in zip(*data)]
 [1.3333333333333333, 3.0, 4.0] 
```

总和：

```
>>> data = [[1, 2, 3], [1, 3, 4], [2, 4, 5]]
>>> [sum(e) for e in zip(*data)]
 [4, 9, 12] 
```

* * *

*   [压缩](http://docs.python.org/2/library/functions.html#zip)

> 返回一个元组列表，其中第 i 个元组包含来自每个参数序列或可迭代对象的第 i 个元素。

*   [解包参数列表](http://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists)

> 当参数已经在列表或元组中但需要为需要单独的位置参数的函数调用解包时......使用 *-operator 编写函数调用以将参数从列表或元组中解包出来。

```
>>> data
 [[1, 2, 3], [1, 3, 4], [2, 4, 5]]

>>> zip(*data)
 [(1, 1, 2), (2, 3, 4), (3, 4, 5)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:10:11.563

```
>>> l =  [[1, 2, 3], [1, 3, 4], [2, 4, 5]]
>>> zip(*l)
[(1, 1, 2), (2, 3, 4), (3, 4, 5)]
>>> def average(nums, default=float('nan')):
...   return sum(nums) / float(len(nums)) if nums else default
... 
>>> [average(n) for n in zip(*l)]
[2.0, 2.6666666666666665, 3.6666666666666665] 
```

# c++ - 将文件数据分配给结构数组

> ID：16158766
> 
> 赞同：0
> 
> 时间：2013-04-23T00:05:32.387
> 
> 标签：c++, struct, getline

我目前正在尝试将输入文件中的一行数据分配给结构数组。

这是我的结构：

```
struct student
    {
        int ID;
        int hours;
        float GPA;
    };

    student sStudents[MAX_STUDENTS]; // MAX_STUDENTS = 10 
```

在哪里：

```
for (int i = 0; !inputFile.eof(); i++)
{
    getline(inputFile, dataLine);
    cout << dataLine << endl; // Everything outputs perfectly, so I know dataLine is getting the correct information from getline()
            //??
} 
```

在通过 Google 爬了一个小时后，我仍然不知道如何将我的 getline() 数据放入每个结构数组中。

我努力了，

```
sStudents[i] = dataLine;
sStudents[i] << dataLine;
sStudents.ID = dataLine; 
```

这是我的数据文件：

```
1234  31  2.95
9999  45  3.82
2327  60  3.60
2951  68  3.1
5555  98  3.25
1111  120 2.23
2222  29  4.0 
```

在这一点上，我变得沮丧，我只是不知道该怎么办。在这一点上，我确信我的做法完全错误，但不确定如何从这里继续。我知道存在 sStudents 的 10 个元素，这很好，但是如何将输入文件中的值获取到每个 .ID、.hours、.GPA 中？也许 getline() 在这里使用不正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:09:34.860

您可以简单地执行以下操作：

```
int ID = 0;
int hours = 0;
float GPA = 0.0;
int i = 0;
ifstream inputFile("data.txt");
while (inputFile >> ID >> hours >> GPA)
{
   sStudents[i].ID = ID;
   sStudents[i].hours = hours;
   sStudents[i].GPA = GPA;
   i ++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:23:09.747

使用标准库的建议。

```
#include<iostream>
#include<fstream>
#include<vector>

// your data structure
struct Student {
  int id;
  int hours;
  float gpa;
};

// overload the input stream operator
bool operator>>(std::istream& is, Student& s) {
  return(is>>s.id>>s.hours>>s.gpa);
}

// not necessary (but useful) to overload the output stream operator
std::ostream& operator<<(std::ostream& os, const Student& s) {
  os<<s.id<<", "<<s.hours<<", "<<s.gpa;
  return os;
}

int main(int argc, char* argv[]) {
  // a vector to store all students
  std::vector<Student> students;
  // the "current" (just-read) student
  Student student;

  { // a scope to ensure that fp closes                                     
    std::ifstream fp(argv[1], std::ios::in);    

    while(fp>>student) {
      students.push_back(student);
    }
  }

  // now all the students are in the vector
  for(auto s:students) {               
    std::cout<<s<<std::endl;
  }

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T00:12:45.427

要从输入流中获取数据，请使用`>>`运算符。所以：

```
int i;
file >> i; 
```

从文件中提取一个整数。默认情况下，它是空格分隔的。使用它，看看你是否能走得更远。

# image - 带有引导程序的 IE7 中未显示按钮图像

> ID：16158770
> 
> 赞同：0
> 
> 时间：2013-04-23T00:05:48.227
> 
> 标签：image, button, twitter-bootstrap, internet-explorer-7

我在很多地方都有这个问题。这是一个：

```
<button type="button" name="remove_subnmc" class="btn"><img src="/static/img/delete.png"/></button> 
```

该按钮在 IE7 中仅显示为空。在所有其他浏览器中看起来都很好。

没有 class="btn" 它看起来更糟。

我正在使用 Django，但我认为这无关紧要，所以我没有标记它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:05:48.227

手动设置按钮的宽度可以解决此问题，即使您选择了按钮已经显示的确切宽度。

有趣的是，在图像或按钮上设置至少图像大小的最小宽度，同时根本不更改按钮，也可以解决此问题。任何小于该值的图像都会相应地缩小。在这种情况下，我所有的按钮都有 16px 的图像，并且我的所有按钮都至少有这么宽，所以在 IE7 中应用到我所有按钮的一般最小宽度是一个可以接受的解决方案。

但是，如果我想在某些情况下添加更宽的按钮图像，我需要为 IE7 设置特定的例外，所以如果有人知道更优雅的解决方案，我很想听听。

# php - 按类名自动加载类，如 Zend Framework

> ID：16158774
> 
> 赞同：1
> 
> 时间：2013-04-23T00:05:52.230
> 
> 标签：php, zend-framework, model-view-controller, autoload, zend-autoloader

如何像[Zend Framework](http://framework.zend.com/)那样通过类名自动加载我的框架控制器和模型？

Zend Framework 自动加载类，如下所示：

`new Application_Controller_Index();`

意味着控制器类位于`application/controllers/IndexController.php`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:57:31.747

为什么不去看看源代码呢？[http://framework.zend.com/svn/framework/standard/trunk/library/Zend/Loader.php](http://framework.zend.com/svn/framework/standard/trunk/library/Zend/Loader.php)

以防万一，可能是最简单的方法：

```
spl_autoload_register(function($classname){
    include str_replace('_', DIRECTORY_SEPARATOR, $classname) . '.php';
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:10:44.053

只需使用函数 __autoload 就可以了。

PHP手册上有很好的例子：http: [//php.net/manual/en/language.oop5.autoload.php](http://php.net/manual/en/language.oop5.autoload.php)

另请注意，__autoload 可能很快就会被弃用。要解决这个问题，请按照手册所述使用[spl_autoload_register()](http://www.php.net/manual/en/function.spl-autoload-register.php)。

# applescript - AppleScript iTunes：按位置选择文件？

> ID：16158775
> 
> 赞同：1
> 
> 时间：2013-04-23T00:06:00.997
> 
> 标签：applescript, itunes

我想通过命令行的绝对位置在我的 iTunes 中选择一个或多个曲目，例如：

```
osascript Refresh.scpt /Users/elliot/Music/iTunes/iTunes\ Media/Music/Apocalyptica/Apocalyptica/06\ Fisheye.m4a /Users/elliot/Music/iTunes/iTunes\ Media/Music/Apocalyptica/Apocalyptica/10\ Ruska.m4a 
```

选择曲目后，我可以刷新他们的标签......或者他们是另一种告诉 iTunes 外部刷新特定曲目的方式？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T02:28:41.047

您将在[此页面](http://dougscripts.com/itunes/)上找到有用的脚本和工具。

# firefox-addon - 在 firefox 扩展中使用 pdf.js 打开本地 pdf 文件

> ID：16158776
> 
> 赞同：1
> 
> 时间：2013-04-23T00:06:13.910
> 
> 标签：firefox-addon, pdf.js

我`pdf.js`用来从 Firefox 插件中的 pdf 文件中提取注释。除了打开本地 pdf 文件外，一切都很好。`PDFJS.getDocument('http://...').then(function(pdf) { ...`工作，但`PDFJS.getDocument('file:///...').then(function(pdf) {`没有。我收到此错误：`Unexpected server response (0) while retrieving PDF ...`

这是一个跨域问题吗？我认为这应该不是问题，因为我的代码是从扩展程序运行的。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:06:03.370

将文件读入 Uint8Array 并将其`source`作为`getDocument`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T09:17:28.193

这是一个简化的 JS，仅用于说明 - 您首先将文件作为数组缓冲区 (e.target.result) 获取，然后将其转换为 Uint8 数组并将其作为数据 (docInitParams) 而不是 URL 传递给 PDF.js

```
var reader = new FileReader();
    reader.readAsArrayBuffer(input.files[0]);
    reader.onload = function (e) {

     var myData = new Uint8Array(e.target.result)
	 var docInitParams = { data: myData };

	 PDFJS.getDocument(docInitParams).then(function(pdf) {.....})   

}
```

# html - 如何使用循环通过 Excel 电子表格创建单独的 HTML 发布页面

> ID：16158777
> 
> 赞同：0
> 
> 时间：2013-04-23T00:06:18.863
> 
> 标签：html, excel, vba

我正在尝试使用 Excel 电子表格上的循环函数创建单个 HTML 页面。我一直在手动发布每个页面，但我有数千个条目，所以我需要一个使用宏的自动化方法。我通过如下所示的手动方法使用我使用的步骤录制了一个宏：

```
Sub HTMLexport()

Columns("A:W").Select
With ActiveWorkbook.PublishObjects.Add(xlSourceRange, _
    "C:\Users\<user_name>\Desktop\Excel2HTML\Articles\1045_VSE.htm", _
    "Sheet1", "$A:$W", xlHtmlStatic, _
    "FileName_10067", "")
    .Publish (True)
End With
Columns("W:W").Select
Selection.EntireColumn.Hidden = True
End Sub 
```

最终我想要的是能够选择 A 列和下一列（例如 B、C、H 等），然后将这两个列发布到 HTML 页面中。我希望基于单元格引用的文件名。前任。单元格 W3 的值为 1045，文件名保存为 1045_VSE.htm，其中 _VSE 在循环过程中是恒定的。这样，每个新的 HTML 页面名称都会根据单元格引用递增。保存 HTML 页面后，隐藏该列并移至下一个，冲洗并重复。对此的任何帮助将是惊人的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:08:21.260

这应该相当简单地放入循环中。

这是一个例子。我假设文件名将来自子范围中的第一行/第二列，您可以轻松修改它，或者问我如何修改。我还假设 Div ID ("FileName_100067") 是恒定的。同样，如果需要，这可以很容易地修改。

```
Sub HTMLinLoop()
Dim wb As Workbook: Set wb = ActiveWorkbook
Dim ws As Worksheet: Set ws = ActiveSheet
Dim rng As Range '##  The full range including all columns'
Dim subRng As Range '## a variable to contain each publishObjects range'
Dim pObj As PublishObject '## A variable to contain each publishObject as we create it.'
Dim p As Long '## use this integer to iterate over the columns in rng'
Dim fileName As String '## represents just the file name to export'
Dim fullFileName As String '## the full file path for each export'
Dim divName As String '## variable for the DivID argument, assume static for now'

Set rng = ws.Range("A3:W30") '## modify as needed'

For p = 1 To rng.Columns.Count
    'Identify the sub-range to use for this HTML export:'
    ' this will create ranges like "A:B", then "A:C", then "A:D", etc.'
    Set subRng = Range(rng.Columns(1).Address, rng.Columns(p + 1).Address)

    'Create the filename:'
    '## modify as needed, probably using a range offset.'
    fileName = subRng.Cells(1, 2).Value & "_VSE.htm"

    'Concatenate the filename & path:'
    '## modify as needed.'
    exportFileName = "C:\Users\" & Environ("Username") & "\Desktop\" & fileName

    'Create hte DIV ID:'
    divName = "FileName_10067" '## modify as needed, probably using a range offset.'

    '## Now, create the publish object with the above arguments:'
    Set pObj = wb.PublishObjects.Add( _
        SourceType:=xlSourceRange, _
        fileName:=exportFileName, _
        Sheet:=ws.Name, _
        Source:=subRng.Address, _
        HtmlType:=xlHtmlStatic, _
        DivID:=divName, _
        Title:="")

    '## Finally, publish it!'
    pObj.Publish

    '## Hide the last column:'
    rng.Columns(p+1).EntireColumn.Hidden = True

Next

End Sub 
```

# c# - 文本更改事件期间垂直滚动闪烁文本框

> ID：16158780
> 
> 赞同：0
> 
> 时间：2013-04-23T00:06:45.147
> 
> 标签：c#, .net, scroll, scintilla

使用字符串设置 Scintilla.Net 文本框并滚动到最后一行不起作用。

本问答[如何在 Scintilla 中进行自动滚动？](https://stackoverflow.com/questions/2898722/how-make-autoscroll-in-scintilla)有答案，但它不会**与设置文本同时工作**工作。

裸骨再现：

```
private void button1_Click(object sender, EventArgs e)
{
    string s = RandomString(400);
    scintilla1.Text = s + " " + s + " " + s + " " + s + " " + s;
    scintilla1.Scrolling.ScrollBy(0, 10000);    //<-doesn't work (but does work eg in a Button2_click)
}

private static Random random = new Random((int)DateTime.Now.Ticks);
private string RandomString(int size)
{
    StringBuilder builder = new StringBuilder();
    char ch;
    for (int i = 0; i < size; i++)
    {
        ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
        builder.Append(ch);
    }
    return builder.ToString();
} 
```

有谁知道设置文本后如何垂直向下滚动到结束行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T03:05:59.533

好吧，您可以尝试在添加文本后放置 Refresh() ；

> scintilla1.Text = s + " " + s + " " + s + " " + s + " " + s;
> 闪烁1.刷新（）；

对于这种情况，我发现您需要 Refresh() 两次，具体取决于您放在文本框中的字符串的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T03:18:57.967

对于任何想知道最后我放弃 Scintilla 转而支持[ICSharpCode.TextEditor](https://github.com/KindDragon/ICSharpCode.TextEditor)的人。<- 这个有点不稳定，所以我使用了ICsharp.TextEditor 的[Digitalrune 版本](http://www.digitalrune.com/Downloads/DigitalRuneTextEditorControl.aspx)

我发现与 Scintilla 相比，[增强 ICSharpCode.TextEditor](https://stackoverflow.com/questions/3476014/icsharpcode-texteditor-veritical-scrolling/16259271#16259271)是微不足道的。

ICSharpCode.TextEditor 的另一个巨大好处是允许您自定义/构建自己的语法突出显示，例如：[https ://github.com/icharpcode/SharpDevelop/wiki/Syntax-highlighting](https://github.com/icsharpcode/SharpDevelop/wiki/Syntax-highlighting)

# perl - 使用来自 bash 的标准输入的多行 perl 的 heredoc 语法

> ID：16158784
> 
> 赞同：1
> 
> 时间：2013-04-23T00:07:10.863
> 
> 标签：perl, bash, stdin, heredoc

如何将文件传递给 perl 脚本进行处理，并为多行 perl 脚本使用 heredoc 语法？我已经尝试过这些但没有运气：

```
cat ng.input | perl -nae <<EOF
if (@F==2) {print $F[0] . "\t". $F[1] . "\n"} else { print "\t" . $F[0] . "\n" }
EOF

cat ng.input | perl -nae - <<EOF
if (@F==2) {print $F[0] . "\t". $F[1] . "\n"} else { print "\t" . $F[0] . "\n" }
EOF 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:21:59.437

真的不需要here-docs。您可以简单地使用多行参数：

```
perl -nae'
    if (@F==2) {
       print $F[0] . "\t". $F[1] . "\n"
    } else {
       print "\t" . $F[0] . "\n"
    }
' ng.input 
```

干净，比 Barmar 的更便携，并且只使用一个过程而不是 Barmar 的三个。

* * *

请注意，您的代码可能会缩小到

```
perl -lane'unshift @F, "" if @F!=2; print "$F[0]\t$F[1]";' ng.input 
```

甚至

```
perl -pale'unshift @F, "" if @F!=2; $_="$F[0]\t$F[1]";' ng.input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:12:38.123

使用进程替换：

```
cat ng.input | perl -na <(cat <<'EOF'
if (@F==2) {print $F[0] . "\t". $F[1] . "\n"} else { print "\t" . $F[0] . "\n" }
EOF
) 
```

还要在标签周围加上单引号，`EOF`这样`$F`在 perl 脚本中就不会被扩展为 shell 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-02T08:52:29.883

也可以将heredoc 作为“-”第一个参数传递给perl：

```
perl -lna - ng.input <<'EOF'
if (@F==2) {print $F[0] . "\t". $F[1] . "\n"} else { print "\t" . $F[0] . "\n" }
EOF 
```

# javascript - jquery数据属性多个值

> ID：16158791
> 
> 赞同：1
> 
> 时间：2013-04-23T00:08:08.667
> 
> 标签：javascript, jquery, show-hide

我在数据标签中使用多个值并基于此 ID 应用过滤器时遇到问题。因为它在数据标签中显示了多个 id，所以它不会显示两个 id。

[http://jsfiddle.net/rWhVN/](http://jsfiddle.net/rWhVN/)上的示例

```
<script type="text/javascript">
        $(function () {
            $('#content').removeClass('nojs');
            $('.row').not('#q1').hide();
            $('select').on('change', function () {
                var question = $(this).parent().parent().attr('id');
                var answerID = $(this).children('option:selected').attr('id');
                var loadQuestion = $(this).children('option:selected').data('load');
                $('#' + question).addClass('answered');
                $('.row').not('.answered').hide();
                $('#' + loadQuestion).fadeIn();
                console.log(loadQuestion);
            });
        });
    </script>

<option id="q1a1" data-load="q2, q8">Answer 1</option> 
```

问题一答案一应该显示问题二和问题八。

不知道你是如何把它分开的，所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:12:10.027

`$('#' + loadQuestion)`will be `$('#q2, q8')`，它不会是 and 的选择`#q2`器`#q8`。

你可以做`data-load="#q2, #q8"`，然后就做`$(loadQuestion)`。

***[请参阅演示](http://jsfiddle.net/rWhVN/1/)***。

如果你不能改变`data-load`属性，那么你可以这样做：

```
$($.map(loadQuestion.split(/ *, */), function(el) {return '#'+el;}).join(',')).fadeIn(); 
```

# python - 无法将日期转换为 datetime64

> ID：16158795
> 
> 赞同：17
> 
> 时间：2013-04-23T00:08:38.503
> 
> 标签：python, numpy, pandas

下面的一段代码：

```
import pandas as pd
import numpy as np

data = pd.DataFrame({'date': ('13/02/2012', '14/02/2012')})
data['date'] = data['date'].astype('datetime64') 
```

在一台机器（windows）上工作正常，在另一台机器（linux）上不能工作。numpy 和 pandas 都安装在两者上。

我得到的错误是：

```
ValueError: Cannot create a NumPy datetime other than NaT with generic units 
```

这个错误是什么意思？我第一次看到它，我在网上找不到太多东西。是缺少一些依赖吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-23T00:18:50.883

改为这样做。Pandas 在内部将日期时间保存为`datetime64[ns]`. 像这样的转换非常有问题（因为各种 numpy 版本中的问题，尤其是 1.6.2）。使用 pandas 例程，然后像查看实际日期时间对象一样操作。你想做什么？

```
In [30]: pandas.to_datetime(data['date'])
Out[30]: 
0   2012-02-13 00:00:00
1   2012-02-14 00:00:00
Name: date, dtype: datetime64[ns] 
```

# php - array_key_exists('submit_input_name',$_POST) 是否优于 ($_POST["MM_insert"] == "submit_input_name")

> ID：16158800
> 
> 赞同：0
> 
> 时间：2013-04-23T00:09:05.350
> 
> 标签：php, forms, dreamweaver

我已经掌握了 MySQL 和 HTML，但仍在学习 PHP。我有一点时间安排，所以当我注意到 Dreamweaver 会为我编写 PHP 时，我开始使用该功能。我立即注意到，当然，它插入的代码并不是那么好。

在调查“注意：未定义的索引：”时，我遇到了[PHP 错误：注意：未定义的索引：](https://stackoverflow.com/questions/4465728/php-error-notice-undefined-index)。

DeaconDesperado 指出，alibenmessaoud 的代码试图在设置后值之前进行处理。因此，我查看了相同问题的代码，并注意到 Dreamweaver 正在使用

`if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "name_of_your_submit_input"))`

代替

`if(isset($_POST) && array_key_exists('name_of_your_submit_input',$_POST))`

我误解了 Dreamweaver 的代码吗？检查帖子是否是提交名称与检查它是否存在不一样吗？我误解了array_key_exists（）吗？最后一个问题，我的支票是否高于表格本身是否重要？

感谢您容忍尚未完成 w3schools PHP 教程的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:30:54.120

您给出的两个示例没有做同样的事情，因此两者都不是更好。

你的第一个例子是询问 key 是否`MM_insert`存在`$_POST`并且它的值是`name_of_your_submit_input`.

而您的第二个示例是询问密钥是否`name_of_your_submit_input`存在，这也可能如下所示：

```
if (isset($_POST["name_of_your_submit_input"])) 
```

无论如何，这两个示例都不会引起 PHP 通知。

# mysql - 如何在 MySQL blob 列中搜索部分十六进制字符串？

> ID：16158801
> 
> 赞同：1
> 
> 时间：2013-04-23T00:09:03.463
> 
> 标签：mysql, sql, blob, mysql-workbench

我想通过搜索 Blob 的十六进制字符串值来选择表行。我有一个 blob 值，我想找到它的十六进制表示为 0041b074351bfa1092fd740c146f26ae。我希望能够通过输入全部或部分字符串来选择这一行。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:36:34.360

尝试这个：

```
SELECT * 
FROM t1
WHERE UNHEX(hex_col) LIKE '%value%'; 
```

ps：在性能方面可能真的很慢。当心。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T06:39:51.280

简单的查询对我来说很好。请尝试这样

**例如。**

选择 *

FROM **YOUR_TABLE_NAME_HERE**

WHERE **YOUR_BLOB_FIELD_NAME_HERE** LIKE '% **SEARCH_TEXT_HERE** %'

# .htaccess - 使用 .htaccess 文件阻止对目录的直接访问

> ID：16158808
> 
> 赞同：0
> 
> 时间：2013-04-23T00:10:19.620
> 
> 标签：.htaccess, directory

如何阻止对我的目录图像的直接访问？我正在尝试这个：

```
deny from all 
```

但这也会阻止文件夹内的图像，因此图像不会出现在站点中。如何仅阻止对目录的直接访问？比如Google，如果你尝试访问图片的URL，你可以，但是如果你尝试查看包含所有图片的目录，他会给出404错误。我希望你理解我的问题并帮助我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:25:04.910

要防止目录列表，请使用以下指令：

```
Options -Indexes 
```

# python - SQLAlchemy 过滤器 in_ 运算符

> ID：16158809
> 
> 赞同：19
> 
> 时间：2013-04-23T00:10:20.097
> 
> 标签：python, sqlite, sqlalchemy

我正在尝试对 sqlalchemy 中的查询进行简单的过滤操作，如下所示：

```
q = session.query(Genotypes).filter(Genotypes.rsid.in_(inall)) 
```

在哪里

inall 是一个字符串列表 Genotypes 映射到一个表：class Genotypes(object): pass

```
Genotypes.mapper = mapper(Genotypes, kg_table, properties={'rsid': getattr(kg_table.c, 'rs#')}) 
```

这对我来说似乎很简单，但是当我执行上述查询时出现以下错误`q.first()`：

> "sqlalchemy.exc.OperationalError: (OperationalError) too many SQL variables u'SELECT" 后跟 inall 列表中 1M 项的*列表* 。但它们不应该是 SQL 变量，而只是一个列表，其成员资格是过滤条件。

我做的过滤不正确吗？

（数据库是 sqlite）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-23T00:30:29.307

如果您`rsid`从中获取 s 的表在同一个数据库中可用，我会使用[子查询](http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.subquery)将它们传递到您的`Genotypes`查询中，而不是在 Python 代码中传递一百万个条目。

```
sq = session.query(RSID_Source).subquery()
q = session.query(Genotypes).filter(Genotypes.rsid.in_(sq)) 
```

问题是，为了将该列表传递给 SQLite（或任何数据库，真的），SQLAlchemy 必须将您的`in`子句的每个条目作为变量传递。SQL 大致翻译为：

```
-- Not valid SQLite SQL
DECLARE @Param1 TEXT;
SET @Param1 = ?;
DECLARE @Param2 TEXT;
SET @Param2 = ?;
-- snip 999,998 more

SELECT field1, field2, -- etc.
FROM Genotypes G
WHERE G.rsid IN (@Param1, @Param2, /* snip */) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-07T07:09:53.783

以下解决方法对我有用：

```
q = session.query(Genotypes).filter(Genotypes.rsid.in_(inall))
query_as_string = str(q.statement.compile(compile_kwargs={"literal_binds": True}))
session.execute(query_as_string).first() 
```

这基本上强制查询在执行之前编译为字符串，从而绕过了整个变量问题。有关这方面的一些详细信息，请参阅[此处](http://sqlalchemy.readthedocs.io/en/latest/faq/sqlexpressions.html#how-do-i-render-sql-expressions-as-strings-possibly-with-bound-parameters-inlined)的 SQLAlchemy 文档。

顺便说一句，如果您不使用 SQLite，则可以使用 ANY 运算符将列表对象作为单个参数传递（请参阅我对这个问题的回答[）](https://stackoverflow.com/questions/13190392/how-can-i-bind-a-list-to-a-parameter-in-a-custom-query-in-sqlalchemy/42591722#42591722)。

# google-maps - 在嵌入式 Google 地图中提供 KML 数据，但如何向用户隐藏 KML

> ID：16158811
> 
> 赞同：0
> 
> 时间：2013-04-23T00:10:38.103
> 
> 标签：google-maps, kml

我已经多次嵌入谷歌地图，但只做基本的事情。

现在我需要在城市上覆盖地区。我努力获取、解析和调整所有地区的所有坐标，我不希望其他人复制我的坐标。

我可以显示叠加层，但阻止用户读取 KML 坐标吗？除了在 javascript api 块中让每个人都可以看到路径之外，还有其他方法可以嵌入它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:37:15.467

尝试使用 FusionTablesLayer。您可以将您的 KML 导入 FusionTable，并阻止其下载，但将其显示在地图上。人们将能够查看您的坐标，但很难（但可能并非不可能）抓住它们。

# controller - 有多个 FXML 文件（在 SceneBuilder 中创建），但只有一个控制器。每个场景是否加载它自己的控制器副本？

> ID：16158815
> 
> 赞同：6
> 
> 时间：2013-04-23T00:10:53.197
> 
> 标签：controller, javafx, fxml

我在 SceneBuilder 中创建了多个 FXML 文件和一个控制器文件。当我在一个场景中编辑一个值（例如，一个整数值），然后切换场景时，该值在新场景中似乎没有改变。

为场景加载 fxml 文件时，我的程序是否仅为该 fxml 文件加载控制器文件的副本（并且仅由该 fxml 文件使用）？

非常感谢你们可以回答这个问题的任何帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T00:34:49.860

您的控制器文件是一个 Java 源文件，它被编译成一个 Java 类，可以从中创建许多 Java 对象实例。

在运行时，每次调用 fxml 加载器的[load 方法](http://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html#load%28%29)时，默认的 fxml 加载器控制器工厂实现都会创建一个新的控制器实例（即新对象） 。

即使你一遍又一遍地加载同一个 fxml 文件，加载器每次都会创建一个新的控制器实例，每个都有自己的内部状态，独立于所有其他的。

同样，如果您加载不同的 fxml 文件，它们都由同一个控制器类支持 - 每次您访问任何 fxml 文件时，您都会获得一个新的控制器实例。

* * *

*更新以回答有关控制器数据共享的其他问题*

要使用依赖注入或单独的初始化方法在控制器之间共享信息，请参阅：

[传递参数 JavaFX FXML](https://stackoverflow.com/questions/14187963/passing-parameters-javafx)

此外，使用[静态类成员](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)将允许您共享信息。只是不要将 static 与 结合使用`@FXML`，[因为那是行不通的](https://stackoverflow.com/questions/23105433/javafx-8-compatibility-issues-fxml-static-fields)。

有一个很好的教程来处理多个 fxml 文件，您可能会发现它很有帮助：

*   [第一部分](https://blogs.oracle.com/acaicedo/entry/managing_multiple_screens_in_javafx1)
*   [第二部分](https://blogs.oracle.com/acaicedo/entry/managing_multiple_screens_in_javafx)

* * *

*注意：技术上可以在多个 FXML 文件之间共享一个控制器*

正如格雷格布朗在评论中指出的那样：

> `FXMLLoader#setController()`使用和可以更好地控制控制器实例化`FXMLLoader#setControllerFactory()`。

我强烈不推荐以下方法，相关答案中对此进行了进一步解释：

*   [JavaFX 多个 FXML 和 1 个共享控制器](https://stackoverflow.com/questions/17914254/javafx-multiple-fxml-and-1-shared-controller)

# c# - 在文件路径上插入

> ID：16158816
> 
> 赞同：2
> 
> 时间：2013-04-23T00:11:00.910
> 
> 标签：c#, asp.net-mvc-4

现在我有文件输出到路径；"C:\Users\Daniel\Average.txt"

我正在尝试编写一个函数来在“平均值”之后但在 .txt 之前输入当前时间戳

我知道这是非常初级的，但我不知道从哪里开始......

编辑：我最初是硬编码的； `string path = "C:\Users\Daniel\Average.txt";`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:20:09.873

您可以改用它：

```
var outputFile = @"C:\Users\Daniel\Average.txt";
var outputDir = Path.GetDirectoryName(outputFile);

var fileWithTimeStamp = string.Format("{0}_{1}{2}", Path.GetFileNameWithoutExtension(outputFile),
                                 DateTime.Now.ToString("yyyyMMddHHmmssffff"),
                                 Path.GetExtension(outputFile));
var outputWithTimeStamp = Path.Combine(outputDir, fileWithTimeStamp); 
```

我对 LINQPad 的测试：

```
outputWithTimeStamp.Dump(); 
```

`C:\Users\Daniel\Average_201304230828184465.txt`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T00:14:00.860

您可以使用`Path.GetFileNameWithoutExtension`.

```
var info=new FileInfo(@"C:\Users\Daniel\Average.txt");
var span=TimeSpan.FromTicks(DateTime.Now.Ticks).ToString();
var name=Path.GetFileNameWithoutExtension(info.FullName);
name=(new[] { name, span, info.Extension }).Aggregate(String.Concat); 
```

这`name`就是你最终想要的。

还有另一种合成全名的方法：

```
var info=new FileInfo(@"C:\Users\Daniel\Average.txt");
var span=TimeSpan.FromTicks(DateTime.Now.Ticks).ToString();
var fullName=info.FullName;
var length=fullName.LastIndexOf(info.Extension);
fullName=fullName.Substring(0, length);
fullName=(new[] { fullName, span, info.Extension }).Aggregate(String.Concat); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T00:18:04.493

我认为这样的事情对你有用：

```
StreamWriter sw = new StreamWriter("C:\Users\Daniel\Average"+DateTime.Now.ToString(ADD_FORMAT_HERE) +".txt"); 
```

然后，您需要将内容转储到文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T03:38:47.147

//有一个字符串变量来保存你的输出

字符串输出；

File.WriteAllText("C:\Users\Daniel\Average" + DateTime.Now + ".txt",output);

这将创建文本文件并将输出写入该文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T00:14:14.100

试试 string.format：

```
string Today = DateTime.Now.ToString("MMMM_dd");
string name = string.Format(@"Average_{0}.txt",Today); 
```

您可以更改`DateTime.Now.ToString(`包括秒、分钟等...

# c++ - 继承和默认构造函数的一些问题

> ID：16158818
> 
> 赞同：0
> 
> 时间：2013-04-23T00:11:05.647
> 
> 标签：c++, visual-c++, inheritance, constructor, struct

我有两个结构

```
 template<typename T>
        struct Node{
               T obj;
               Node* next;
               Node* prev;
               Node();
               Node(T a, Node<T>* b=NULL, Node<T>* c=NULL);
        };

        template<typename T>
        struct Monomial : public Node<T>{
               int n;
               Monomial(T coeff = 0, int p = 0) : Node<T>(coeff){ n=p; }
        }; 
```

编译器告诉我我做错了什么但我无法弄清楚？

我试图在`main`函数中这样做：

```
 Monomial<int> *m1;
         m1->n=5;
         m1->obj=6; 
```

我得到的错误消息是“运行时检查失败#3 - 变量'm1'正在被使用而没有被初始化。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:16:29.557

像这样初始化 m1。

```
Monomial<int> *m1 = new Momonial<int>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T00:17:05.360

声明指针不会创建对象。

```
// Allocate memory for the object and create it.

Monomial<int> *m1 = new Monomial<int>;
m1->n=5;
m1->obj=6;

// When you are done with the object, destroy it and deallocate memory.
delete m1; 
```

在堆栈上交替创建对象

```
Monomial<int> m1;
m1.n=5;
m1.obj=6; 
```

无需致电`new`或`delete`

# matplotlib - matplotlib：值误差 x 和 y 具有不同的维度

> ID：16158819
> 
> 赞同：0
> 
> 时间：2013-04-23T00:11:07.070
> 
> 标签：matplotlib

在绘制按文本/名称字段和一系列日期分组的值时遇到一些困难。问题是，虽然我可以按名称分组并为某些日期范围生成图，但在某些情况下分组包含缺失的日期值（只是整个数据集的性质）。

也就是说，我很可能能够为某些分组值绘制 date_range('10/1/2013', '10/31/2013') ，但有些情况下没有 '10 /15/2013' 在该范围内，因此将抛出本文标题中提到的错误。

感谢您的任何意见！

```
plt.rcParams['legend.loc'] = 'best'

  dtable = pd.io.parsers.read_table(str(datasource), sep=',')
  unique_keys = np.unique(dtable['KEY'])

  index = date_range(d1frmt, d2frmt)
  for key in unique_keys:

      values = dtable[dtable['KEY'] == key]

      plt.figure()

      plt.plot(index, values['VAL']) <--can fail if index is missing a date

      plt.xlim(xmin=d1frmt,xmax=d2frmt)
      plt.xticks(rotation=270)
      plt.xticks(size='small')
      plt.legend(('H20'))
      plt.ylabel('Head (ft)')
      plt.title('Well {0}'.format(key))
      fig =  str('{0}.png'.format(key))

      out = str(outputloc) + "\\" + str(fig)

      plt.savefig(out)
      plt.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:36:43.500

您的 dtable 中**必须**有一个日期列或索引。否则你不知道哪个`values['Val']`属于哪个日期。

如果你这样做，有两种方法。

由于您基于键创建子集，因此您可以使用该子集的索引（如果它是日期时间！）：

```
plt.plot(values.index.to_pydatetime(), values['VAL']) 
```

或将子集重新索引到您的“目标”范围”：

```
values = values.reindex(index)
plt.plot(index.to_pydatetime(), values['VAL']) 
```

默认情况下，重新索引插入 NaN 值作为缺失数据。

如果您给出一个工作示例会更容易，如果不知道您的 Dataframe 是什么样子，这有点难以回答。

# sql - 如何用 HQL 或使用 Criteria 编写此 SQL？

> ID：16158822
> 
> 赞同：0
> 
> 时间：2013-04-23T00:11:37.450
> 
> 标签：sql, hibernate, hql, hibernate-criteria, detachedcriteria

有没有办法在 Hbernate HQL 或使用 Hibernate Criteria（或 DetachedCriteria）中重写等效于以下 SQL 的方法？它应该从数据库返回单个记录。

建议使用 HQL 或 Criteria 还是仅使用原生 SQL 哪一个？

```
Select * from X where x.name="name" and x.date =(select max(x.date) from X where x.name="name" ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:02:49.823

等价休眠：来自 Xpojo x where x.name="name" and x.date =(select max(y.date) from Xpojo y where y.name="name" ) 它适用于任何数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:13:39.687

```
Select Model from X model where model.name="name" and 
model.date =(select max(model1.date) from X model1 where model1 .name="name" ) 
```

或者

如果您使用的是`Hibernate3` use `order by date`，那么 q`uery.setMaxResults()`确实是您唯一的选择。

如果您正在使用，`Hibernate2`那么您可以使用`LIMIT`

# android - SQLitedatabase 每个用户名都有相同的列表

> ID：16158824
> 
> 赞同：1
> 
> 时间：2013-04-23T00:11:51.653
> 
> 标签：android, listview, sqlite

在我的应用程序的数据库中，我有 2 个名为“PLAYERS”的表，其中包含每个用户的数据和“FRIENDSLIST”，旨在成为每个注册帐户的个人“朋友”列表。我的应用程序中的过程是什么时候玩家 (Joe) 注册了一个用户名，他的信息进入“PLAYERS”表，现在他可以进入我的 FindFriends 活动，在应用程序中搜索他朋友的用户名 (Bob)，然后单击添加按钮。

然后，朋友（Bob）被添加到“FRIENDSLIST”表中。当他进入 PlayAFriend 活动时，将加载一个列表，显示他添加的“朋友”。这一切都很好，直到我意识到当我登录到他的一个朋友的帐户 (Bob) ，该朋友的列表与 (Joe) 的列表相同。

我知道我用来加载（Joe）的朋友列表的光标与我用来加载（Bob）的朋友列表的光标相同，所以我要问的问题是，

我如何让 Joe 和 Bob 拥有自己的个人好友列表？

我已经尝试在这个网站上搜索并在谷歌上搜索如何找到任何关于如何做到这一点的例子，但我发现我没有找到任何关于这个主题的教程或帖子很疯狂，即使这种类型的做法在每个流行的应用程序中都使用过.对不起，我知道这不是一个简单的问题，所以我必须详细解释问题所在。

我正在发布我的 DBAdapter 类，以显示我的制作方法是否能适应这个，我的 PlayAFriend 类会显示我的 Cursor 和 ListView 的实际效果。

DBAdapter 类

```
package com.fullfrontalgames.numberfighter;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {
    static final String KEY_ROWID = "_id";

    static final String KEY_USERNAME = "USERNAME";

    static final String KEY_PASSWORD = "PASSWORD";

    static final String KEY_EMAIL = "EMAIL";

    static final String KEY_NUMBERINPUT = "NUMBERINPUT";

    static final String KEY_SCORE = "SCORE";

    static final String KEY_FRIENDS = "FRIENDS";

    static final String TAG = "DBAdapter";

    static final String DATABASE_NAME = "NFDatabase";

    static final String DATABASE_TABLE1 = "PLAYERS";

    static final String DATABASE_TABLE2 = "FRIENDSLIST";

    static final int DATABASE_VERSION = 4;

    static final String DATABASE_CREATE_TABLE1 = "create table PLAYERS ( _id integer primary key autoincrement, "
            + "USERNAME text not null unique,PASSWORD text not null,EMAIL text,NUMBERINPUT text,SCORE text);";

    static final String DATBASE_CREATE_TABLE2 = "create table FRIENDSLIST (_id integer primary key autoincrement,"
            + "FRIENDS text not null,USERNAME text ,NUMBERINPUT text,SCORE text);";

    final Context context;

    DatabaseHelper DBHelper;

    static SQLiteDatabase db;

    public DBAdapter(Context ctx) {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper {

        public DatabaseHelper(Context context) {
            // TODO Auto-generated constructor stub
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            try {
                db.execSQL(DATABASE_CREATE_TABLE1);
                db.execSQL(DATBASE_CREATE_TABLE2);
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to " + newVersion
                    + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS PLAYERS");
            db.execSQL("DROP TABLE IF EXISTS FRIENDSLIST");
            onCreate(db);
        }

    }

    public DBAdapter open() throws SQLiteException {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        DBHelper.close();
    }

    // PLAYERS TABLE CRUD

    public long insertPlayer(String Username, String Password, String Email) {
        ContentValues initialValues = new ContentValues();
        initialValues.put("USERNAME", Username);
        initialValues.put("PASSWORD", Password);
        initialValues.put("EMAIL", Email);

        db.insert("PLAYERS", null, initialValues);

        return db.insertWithOnConflict("PLAYERS", null, initialValues,
                SQLiteDatabase.CONFLICT_IGNORE);
    }

    public boolean deletePlayer(long id) {
        Log.d(TAG, "delete is working");
        return db.delete("PLAYERS", KEY_ROWID + " = " + id, null) > 0;

    }

    public Cursor getAllPlayers() {
        return db.query(false, "Players", new String[] {
                "_id", "USERNAME", "PASSWORD", "EMAIL"
        }, null, null, null, null, null, null);

    }

    public String getData() {
        String[] columns = new String[] {
                "_id", "USERNAME", "PASSWORD"
        };
        Cursor mCursor = db.query("PLAYERS", columns, null, null, null, null, null);
        String result = "";
        int iRow = mCursor.getColumnIndex(KEY_ROWID);
        int iName = mCursor.getColumnIndex(KEY_USERNAME);

        for (mCursor.moveToFirst(); !mCursor.isAfterLast(); mCursor.moveToNext()) {
            result = mCursor.getString(iRow) + " " + mCursor.getString(iName) + "/n";
        }
        return result;
    }

    public Cursor getPlayer(int _id) throws SQLException {
        Cursor mCursor = db.query(true, "PLAYERS", new String[] {
                "_id", "USERNAME"
        }, KEY_ROWID + " =  " + "_id", null, null, null, null, null);
        while (mCursor.moveToNext()) {
            int id = mCursor.getInt(mCursor.getColumnIndex("_id"));
        }
        return mCursor;
    }

    public String getUsername(String Username) {
        Cursor mCursor = db.query("Players", new String[] {
            "USERNAME"
        }, "USERNAME = ?", new String[] {
            Username
        }, null, null, null);
        if (mCursor.moveToNext())
            return mCursor.getString(0);
        else
            return "";
    }

    public String getSinlgeEntry(String Username) {
        Cursor cursor = db.query("PLAYERS", null, " USERNAME=?", new String[] {
            Username
        }, null, null, null);
        if (cursor.getCount() < 1) // UserName Not Exist
        {
            cursor.close();
            return "NOT EXIST";
        }
        cursor.moveToFirst();
        String password = cursor.getString(cursor.getColumnIndex("PASSWORD"));
        cursor.close();
        return password;
    }

    public boolean updatePlayer(long _id, String Username, String Password, String Email) {
        ContentValues args = new ContentValues();
        args.put("USERNAME", Username);
        args.put("PASSWORD", Password);
        args.put("EMAIL", Email);
        return db.update("PLAYERS", args, KEY_ROWID + " = " + _id, null) > 0;
    }

    // FRIENDS TABLE CRUD

    public void insertFriend(String Friend) {
        ContentValues initialValues = new ContentValues();
        initialValues.put("FRIENDS", Friend);
        db.insert("FRIENDSLIST", null, initialValues);
    }

    public boolean deleteFriend() {
        return db.delete("FRIENDSLIST", KEY_ROWID + " = " + "_id", null) > 0;
    }

    public Cursor getAllFriends() {
        return db.query(false, "FRIENDSLIST", new String[] {
                "_id", "FRIENDS"
        }, null, null, null, null, null, null);
    }

    public Cursor getFriend(long rowid) throws SQLException {
        Cursor mCursor = db.query(true, "FRIENDSLIST", new String[] {
                "_id", "FRIENDS"
        }, KEY_ROWID + " =  " + "_id", null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    public boolean updateFriend(long _id, String Friends) {
        ContentValues args = new ContentValues();
        args.put("FRIENDS", Friends);

        return db.update("FRIENDSLIST", args, KEY_ROWID + " = " + _id, null) > 0;
    }

} 
```

PlayAFriend 类

```
package com.fullfrontalgames.numberfighter;

import android.app.ListActivity;
import android.content.Context;
import android.database.Cursor;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.TextView;

public class PlayAFriend extends ListActivity {

    DBAdapter DBAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playafriend);

        final DBAdapter db = new DBAdapter(this);
        DBAdapter = db.open();

        getListView().setAdapter(new FriendsListAdapter(this, db.getAllFriends()));

    }

    private class FriendsListAdapter extends BaseAdapter implements OnClickListener, ListAdapter {
        private Cursor fFriends;

        private Context fContext;

        public FriendsListAdapter(Context context, Cursor friends) {
            // TODO Auto-generated constructor stub
            fContext = context;
            fFriends = friends;
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return fFriends.getCount();
        }

        @Override
        public FriendInfo getItem(int position) {
            // TODO Auto-generated method stub
            if (fFriends.moveToPosition(position)) {
                String name = fFriends.getString(fFriends.getColumnIndex("FRIENDS"));

                return new FriendInfo(name);
            }
            return null;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            fFriends.moveToPosition(position);
            return fFriends.getLong(fFriends.getColumnIndex("_id"));
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            if (convertView == null) {
                convertView = LayoutInflater.from(fContext).inflate(R.layout.playafriendlistitems,
                        parent, false);
            }
            FriendInfo friendinfo = getItem(position);
            TextView friendTV = ViewHolder.get(convertView, R.id.textview_friends);
            Button playbutton = ViewHolder.get(convertView, R.id.playbutton, position);
            playbutton.setOnClickListener(this);

            friendTV.setText(friendinfo.getName());

            return convertView;
        }

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            DBAdapter db = new DBAdapter(fContext);
            db.open();
            int position = (Integer)v.getTag();
            fFriends.moveToPosition(position);
            long id = fFriends.getLong(fFriends.getColumnIndex("_id"));
            fFriends = db.getAllFriends();
            db.close();
        }

    }

} 
```

新的 DBAdapter

```
package com.fullfrontalgames.numberfighter;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {
    static final String KEY_ROWID = "_id";

    static final String KEY_USERNAME = "USERNAME";

    static final String KEY_PASSWORD = "PASSWORD";

    static final String KEY_EMAIL = "EMAIL";

    static final String KEY_NUMBERINPUT = "NUMBERINPUT";

    static final String KEY_SCORE = "SCORE";

    static final String KEY_FRIENDS = "FRIENDS";

    static final String TAG = "DBAdapter";

    static final String DATABASE_NAME = "NFDatabase";

    static final String DATABASE_TABLE1 = "PLAYERS";

    static final String DATABASE_TABLE2 = "FRIENDSLIST";

    static final int DATABASE_VERSION = 9;

    static final String DATABASE_CREATE_TABLE1 = "create table PLAYERS ( _id integer primary key autoincrement, "
            + "USERNAME text not null unique,PASSWORD text not null,EMAIL text,NUMBERINPUT text,SCORE text);";

    static final String DATBASE_CREATE_TABLE2 = "create table FRIENDSLIST (_id integer primary key autoincrement,"
            + "player_id integer not null references PLAYERS(_id) on update cascade on delete cascade,"
            + "FRIENDS text ,NUMBERINPUT text,SCORE text);";

    final Context context;

    DatabaseHelper DBHelper;

    static SQLiteDatabase db;

    public DBAdapter(Context ctx) {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper {

        public DatabaseHelper(Context context) {
            // TODO Auto-generated constructor stub
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            try {
                db.execSQL(DATABASE_CREATE_TABLE1);
                db.execSQL(DATBASE_CREATE_TABLE2);
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to " + newVersion
                    + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS PLAYERS");
            db.execSQL("DROP TABLE IF EXISTS FRIENDSLIST");
            onCreate(db);
        }

    }

    public DBAdapter open() throws SQLiteException {
        db = DBHelper.getWritableDatabase();
        db.execSQL("PRAGMA foreign_keys=ON;");
        return this;
    }

    public void close() {
        DBHelper.close();
    }

    // PLAYERS TABLE CRUD

    public long insertPlayer(String Username, String Password, String Email) {
        ContentValues initialValues = new ContentValues();
        initialValues.put("USERNAME", Username);
        initialValues.put("PASSWORD", Password);
        initialValues.put("EMAIL", Email);

        db.insert("PLAYERS", null, initialValues);

        return db.insertWithOnConflict("PLAYERS", null, initialValues,
                SQLiteDatabase.CONFLICT_IGNORE);
    }

    public boolean deletePlayer(long id) {
        Log.d(TAG, "delete is working");
        return db.delete("PLAYERS", KEY_ROWID + " = " + id, null) > 0;

    }

    public Cursor getAllPlayers() {
        return db.query(false, "Players", new String[] {
                "_id", "USERNAME", "PASSWORD", "EMAIL"
        }, null, null, null, null, null, null);

    }

    public String getData() {
        String[] columns = new String[] {
                "_id", "USERNAME", "PASSWORD"
        };
        Cursor mCursor = db.query("PLAYERS", columns, null, null, null, null, null);
        String result = "";
        int iRow = mCursor.getColumnIndex(KEY_ROWID);
        int iName = mCursor.getColumnIndex(KEY_USERNAME);

        for (mCursor.moveToFirst(); !mCursor.isAfterLast(); mCursor.moveToNext()) {
            result = mCursor.getString(iRow) + " " + mCursor.getString(iName) + "/n";
        }
        return result;
    }

    public Cursor getPlayer(int _id) throws SQLException {
        Cursor mCursor = db.query(true, "PLAYERS", new String[] {
                "_id", "USERNAME"
        }, KEY_ROWID + " =  " + "_id", null, null, null, null, null);
        while (mCursor.moveToNext()) {
            int id = mCursor.getInt(mCursor.getColumnIndex("_id"));
        }
        return mCursor;
    }

    public String getUsername(String Username) {
        Cursor mCursor = db.query("Players", new String[] {
            "USERNAME"
        }, "USERNAME = ?", new String[] {
            Username
        }, null, null, null);
        if (mCursor.moveToNext())
            return mCursor.getString(0);
        else
            return "";
    }

    public String getSinlgeEntry(String Username) {
        Cursor cursor = db.query("PLAYERS", null, " USERNAME=?", new String[] {
            Username
        }, null, null, null);
        if (cursor.getCount() < 1) // UserName Not Exist
        {
            cursor.close();
            return "NOT EXIST";
        }
        cursor.moveToFirst();
        String password = cursor.getString(cursor.getColumnIndex("PASSWORD"));
        cursor.close();
        return password;
    }

    public boolean updatePlayer(long _id, String Username, String Password, String Email) {
        ContentValues args = new ContentValues();
        args.put("USERNAME", Username);
        args.put("PASSWORD", Password);
        args.put("EMAIL", Email);
        return db.update("PLAYERS", args, KEY_ROWID + " = " + _id, null) > 0;
    }

    // FRIENDS TABLE CRUD

    public void insertFriend(long playerId, String Friend) {
        ContentValues initialValues = new ContentValues();
        initialValues.put("player_id", playerId);
        initialValues.put("FRIENDS", Friend);
        db.insertWithOnConflict("FRIENDSLIST", null, initialValues, SQLiteDatabase.CONFLICT_IGNORE);
    }

    public boolean deleteFriend() {
        return db.delete("FRIENDSLIST", KEY_ROWID + " = " + "_id", null) > 0;
    }

    public Cursor getAllFriends() {
        return db.query(false, "FRIENDSLIST", new String[] {
                "_id", "FRIENDS"
        }, null, null, null, null, null, null);
    }

    public Cursor getFriend(long player_id) throws SQLException {
        Cursor mCursor = db.query(true, "FRIENDSLIST", new String[] {
                "_id", "FRIENDS"
        }, "player_id" + " =  " + "player_id", null, null, null, null, null);
        // cursor from query is never null,
        // should just check for if (cursor.moveToFirst()) in the calling
        // activity
        return mCursor;
    }

    public boolean updateFriend(long _id, String Friends) {
        ContentValues args = new ContentValues();
        args.put("FRIENDS", Friends);

        return db.update("FRIENDSLIST", args, KEY_ROWID + " = " + _id, null) > 0;
    }

    public long getPlayerId(String Username) {
        // TODO Auto-generated method stub
        long id = 0;
        Cursor c = db.query("PLAYERS", new String[] {
            KEY_ROWID
        }, KEY_USERNAME + "=?", new String[] {
            Username
        }, null, null, null);
        if (c.moveToFirst()) {
            id = c.getLong(0);
        }
        c.close();
        return id;
    }

}

New PlayAFriend

package com.fullfrontalgames.numberfighter;

import android.app.ListActivity;
import android.content.Context;
import android.database.Cursor;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.TextView;

public class PlayAFriend extends ListActivity {

    DBAdapter DBAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playafriend);

        final DBAdapter db = new DBAdapter(this);
        DBAdapter = db.open();

        long player_id = 0;
        getListView().setAdapter(new FriendsListAdapter(this, db.getFriend(player_id)));

    }

    private class FriendsListAdapter extends BaseAdapter implements OnClickListener, ListAdapter {
        private static final long player_id = 0;

        private Cursor fFriends;

        private Context fContext;

        public FriendsListAdapter(Context context, Cursor friends) {
            // TODO Auto-generated constructor stub
            fContext = context;
            fFriends = friends;
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return fFriends.getCount();
        }

        @Override
        public FriendInfo getItem(int position) {
            // TODO Auto-generated method stub
            if (fFriends.moveToPosition(position)) {
                String name = fFriends.getString(fFriends.getColumnIndex("FRIENDS"));

                return new FriendInfo(name);
            }
            return null;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            fFriends.moveToPosition(position);
            return fFriends.getLong(fFriends.getColumnIndex("_id"));
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            if (convertView == null) {
                convertView = LayoutInflater.from(fContext).inflate(R.layout.playafriendlistitems,
                        parent, false);
            }
            FriendInfo friendinfo = getItem(position);
            TextView friendTV = ViewHolder.get(convertView, R.id.textview_friends);
            Button playbutton = ViewHolder.get(convertView, R.id.playbutton, position);
            playbutton.setOnClickListener(this);

            friendTV.setText(friendinfo.getName());

            return convertView;
        }

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            DBAdapter db = new DBAdapter(fContext);
            db.open();
            int position = (Integer)v.getTag();
            fFriends.moveToPosition(position);
            long id = fFriends.getLong(fFriends.getColumnIndex("_id"));
            fFriends = db.getFriend(id);
            db.close();
        }

    }

} 
```

找朋友活动

```
package com.fullfrontalgames.numberfighter;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TextView;
import android.widget.Toast;

public class Findfriends extends Activity {
    DBAdapter db;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.findfriends);

        final EditText sbar = (EditText)findViewById(R.id.PlayerSeachBar);
        Button search = (Button)findViewById(R.id.Search);
        Button Add = (Button)findViewById(R.id.Add);
        final TextView ResultText = (TextView)findViewById(R.id.ResultTextView);
        final FrameLayout ResultFrame = (FrameLayout)findViewById(R.id.ResultFrameLayout);

        ResultFrame.setVisibility(View.GONE);

        final DBAdapter db = new DBAdapter(this);
        db.open();

        search.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String Username = sbar.getText().toString();
                String foundplayer = db.getUsername(Username);

                if (Username.equals(foundplayer)) {

                    ResultFrame.setVisibility(View.VISIBLE);
                    ResultText.setText(foundplayer);
                    Toast.makeText(getApplicationContext(), "Player Found", Toast.LENGTH_LONG)
                            .show();

                } else {
                    Toast.makeText(getApplicationContext(), "Username Not Found", Toast.LENGTH_LONG)
                            .show();
                }
            }

        });

        Add.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String Friends = sbar.getText().toString();
                long playerId = db.getPlayerId(Friends);
                db.insertFriend(playerId, Friends);
                Toast.makeText(getApplicationContext(), "Player Has Been Added", Toast.LENGTH_LONG)
                        .show();

            }
        });
    }
} 
```

日志猫

```
 04-22 21:11:37.834: E/SQLiteDatabase(15862): Error inserting player_id=0 FRIENDS=null
    04-22 21:11:37.834: E/SQLiteDatabase(15862): android.database.sqlite.SQLiteConstraintException: foreign key constraint failed (code 19)
    04-22 21:11:37.834: E/SQLiteDatabase(15862):    at android.database.sqlite.SQLiteConnection.nativeExecuteForLastInsertedRowId(Native Method)
    04-22 21:11:37.834: E/SQLiteDatabase(15862):    at android.database.sqlite.SQLiteConnection.executeForLastInsertedRowId(SQLiteConnection.java:775) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:21:10.690

改变你的桌子 `FRIENDSLIST`

```
static final String DATBASE_CREATE_TABLE2 = 
    "create table FRIENDSLIST (_id integer primary key autoincrement,"
    + "player_id integer not null references PLAYERS("_id") on update cascade on delete cascade,"
        + "FRIENDS text not null,USERNAME text ,NUMBERINPUT text,SCORE text);"; 
```

当你插入

```
public void insertFriend(long playerId, String Friend) {
    ContentValues initialValues = new ContentValues();
    initialValues.put("player_id", playerId);
    initialValues.put("FRIENDS", Friend);
    db.insertWithOnConflict("FRIENDSLIST", null, initialValues, SQLiteDatabase.CONFLICT_IGNORE);
} 
```

结交朋友

```
public Cursor getFriend(long rowid) throws SQLException {
    Cursor mCursor = db.query(true, "FRIENDSLIST", new String[] {
            "_id", "FRIENDS"
    }, player_id + " =  " + "rowid", null, null, null, null, null);
    // cursor from query is never null, 
    // should just check for if (cursor.moveToFirst()) in the calling activity
    return mCursor;
} 
```

在数据库打开方法中添加

```
public DBAdapter open() throws SQLiteException {
    db = DBHelper.getWritableDatabase();
    db.execSQL("PRAGMA foreign_keys=ON;"); 
    return this;
} 
```

# java - Java Recursion 从一个方法调用中打印星号

> ID：16158829
> 
> 赞同：0
> 
> 时间：2013-04-23T00:12:29.483
> 
> 标签：java, recursion

我有一个在 Java 中介绍递归的作业，但我遇到了障碍。该赋值需要一种递归方法来输出多个星号的行数，具体取决于传递给它的整数值。例如，如果将 4 作为变量 n 传入，则输出将有一个星号的第一行，下一行 2 个星号，下一个 3 个星号，下一个 4，然后是 4、3、2 和 1。

我已经能够完成输出的前半部分（虽然不确定它是否是最佳的），但不知道如何让方法反转回来。这一切都将在一个方法调用中完成，并将变量 (n) 传递给该方法。

这是我到目前为止的方法：

```
 public static void myMethod(int n)
    {       
    if (n <= 1) {
            System.out.print("*");          
    } else {
        myMethod(n - 1);
        for (int i = 0; i < n; i++) {
            System.out.print("*");
        }
    }

    System.out.print("\n"); // new line
    } 
```

它是从 main 调用的：

```
 myMethod(n); 
```

所以我有一个for循环，它将在同一行'n'次打印一个星号。在 for 循环之后，它继续到下一行并循环，改变 n。但我不知道如何让它逆转。

我的方法从方法中打印出来。我的导师向我展示了一个示例版本，它传递了 2 个变量 (n) 和一个空字符串。

```
 public static String myMethod(int n, String displayStr) {       
        String currentStr = "";

    for (int i = 0; i < n; i++)
        currentStr += "*";
        currentStr += "\n";

        if (displayStr == null){
            return myMethod((n - 1), currentStr);   
        } // end base case

        else if (n > 0){
            return myMethod((n - 1), (currentStr + displayStr + currentStr));
        }

        else {
            return displayStr;
        }
    } // end recursion method myMethod 
```

他的版本使用以下代码行从 main 打印：

```
 System.out.println(myMethod(n, null)); 
```

我试过他的版本，它在它的侧面打印三角形，但最大的线只打印一次而不是两次。我花了一整天的时间试图改变他在中间添加重复的行，并且开始认为这是不可能的。

任何帮助将不胜感激。我对此完全停滞不前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:19:03.547

将方法签名更改为初始化为 false 但在打印星号时翻转为 true 的`public static void myMethod(int n, boolean reversed)`位置。在方法内部，如果为真，则反转您的逻辑。`reversed``n``reversed`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:33:01.507

您基本上只需要打印出当前行，然后进行递归调用，然后再次打印该行。这样，您会在向上的过程中积累堆栈，然后在向下的过程中再次堆积。

这是一个使用 2 个参数的示例，一个是最大长度，另一个是递归的迭代器。

```
// bootstrap method to start the recursion
public static void myMethod(int length)
{
    myMethod(length, length);
}

public static void myMethod(int length, int i)
{
    if (i > 0)
    {
        int rowLength = length - i + 1;

        printRow(rowLength, '*');

        myMethod(length, i - 1);

        printRow(rowLength, '*');
    }
}

public static void printRow(int length, char symbol)
{
    for (int i = 0; i < length; i++)
        System.out.print(symbol);
    System.out.println();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T02:00:55.740

因为输出*向上*计数（不是*向下计数为零），所以必须传入要打印的星号个数*和*最大个数，这样才能建立终止条件。

此外，您的方法的伪代码是：

*   如果 n > 最大返回（终止条件）
*   打印 n 个星号
*   递归调用 n + 1
*   打印 n 个星号

如果您传入的不是当前要打印的长度，而是星号字符串，则可以实现大量代码简化，因此您的（私有）递归方法可能很简单：

```
private static void myMethod(int n, String s) {
    if (s.length() < n) return;
    System.out.println(s);
    myMethod(n, s + "*");
    System.out.println(s);
} 
```

然后设置初始条件的公共方法是：

```
public static void myMethod(int n) {
    myMethod(n, "*");
} 
```

恕我直言，一个具有良好代码密度的优雅实现。

# visual-studio - 在哪里可以找到有关 MSBuild:* as VS Custom Tool 的信息？

> ID：16158834
> 
> 赞同：3
> 
> 时间：2013-04-23T00:13:11.597
> 
> 标签：visual-studio, msbuild

我已经看到在 Visual Studio 的最新版本中`MSBuild:SomeTarget`使用过`Custom Tool`（例如[MSBuild:Compile slow save](http://social.msdn.microsoft.com/Forums/en-US/silverlightdevtools/thread/a6cbbded-746b-41f9-8519-c09e0bd4dd01/)）。但是我在任何地方都找不到记录。

我在哪里可以找到相关文件？

# android - ArrayOutOfBounds 将 addHeaderView() 与 EndlessAdapter 一起使用时

> ID：16158837
> 
> 赞同：1
> 
> 时间：2013-04-23T00:13:24.303
> 
> 标签：android, android-asynctask, android-arrayadapter, commonsware-cwac

我正在`EndlessAdapter`使用`Commonsware`. 当我`header`添加了一个视图时，我得到了我的`listView`，这我得到了这个错误并且`LogCat`：

```
04-22 17:06:15.200: E/AndroidRuntime(6401): FATAL EXCEPTION: main
04-22 17:06:15.200: E/AndroidRuntime(6401): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
04-22 17:06:15.200: E/AndroidRuntime(6401):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at java.util.ArrayList.get(ArrayList.java:304)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.widget.HeaderViewListAdapter.isEnabled(HeaderViewListAdapter.java:164)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.widget.ListView.dispatchDraw(ListView.java:3207)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.draw(View.java:13715)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.widget.AbsListView.draw(AbsListView.java:3653)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12650)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12694)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12588)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12694)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12588)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12694)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12588)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12694)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12588)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12694)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12588)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12694)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12588)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12694)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12588)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12694)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12588)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.View.getDisplayList(View.java:12694)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:1198)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewRootImpl.draw(ViewRootImpl.java:2173)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2045)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1854)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.Choreographer.doFrame(Choreographer.java:532)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.os.Handler.handleCallback(Handler.java:725)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.os.Looper.loop(Looper.java:137)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at android.app.ActivityThread.main(ActivityThread.java:5226)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at java.lang.reflect.Method.invokeNative(Native Method)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at java.lang.reflect.Method.invoke(Method.java:511)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
04-22 17:06:15.200: E/AndroidRuntime(6401):     at dalvik.system.NativeStart.main(Native Method) 
```

如果我删除headerview，我会通过这一点。

补充：如果这与标题视图无关，这是其他代码：

```
public class EndlessProfileAdapter extends EndlessAdapter implements
            IItemsReadyListener {

        private boolean hasMoreData = true;
        private RotateAnimation rotate = null;
        private View pendingView = null;
        private ArrayList<ProfileReview> profileList;

        public EndlessProfileAdapter(Context context,
                ArrayList<ProfileReview> profileList, Typeface tf) {
            super(new ProfileAdapter(context, profileList, tf));

            this.profileList = profileList;

            rotate = new RotateAnimation(0f, 360f, Animation.RELATIVE_TO_SELF,
                    0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
            rotate.setDuration(600);
            rotate.setRepeatMode(Animation.RESTART);
            rotate.setRepeatCount(Animation.INFINITE);

        }

@Override
protected boolean cacheInBackground() throws Exception {
    Log.d("Cache Array Size", String.valueOf(profileList.size()));
    new ReviewTask(this, profileList.size()).execute();
    return hasMoreData;
}

@Override
protected void appendCachedData() {

}

void startProgressAnimation() {
    if (pendingView != null) {
        pendingView.startAnimation(rotate);
    }
}

public void onItemsReady(ArrayList<ProfileReview> data) {

    profileList.addAll(data);
    endlessAdapter.onDataReady();
    hasMoreData = profileList.isEmpty();
} 
```

内部任务`onPostExecute()`：

```
profileList = new ArrayList<ProfileReview>();

            for (int i = startPoint; i < startPoint + 10; i++) {
                ProfileReview p = new ProfileReview(itemIdList.get(i),
                        reviewIdList.get(i), reviews.get(i), datelist.get(i),
                        itemslist.get(i), ratings.get(i), cats.get(i));
                profileList.add(p);
            }

            return profileList; 
```

列表中`EndlessAdapter`有十人一组。前 10 项工作......但在 11 日，它崩溃了。LogCat 崩溃实际上发生在第 10 轮的第二轮（因此用户滚动到列表中的前 10 之后的第 11 项），并且在之前崩溃 `profileList.add(p);`

**更新了请求的信息**

里面`onActivityCreated()`：

```
 // for adapter constructor 
       tf = Typeface.createFromAsset(getActivity().getAssets(),
            "fonts/listitemfont.ttf");

   LayoutInflater inflater = getActivity().getLayoutInflater();

    ViewGroup header = (ViewGroup) inflater.inflate(
            R.layout.profile_header, listView, false);

    listView = getListView();
    listView.addHeaderView(header, null, false);

            // stuff like settings up buttons inside header

            // just before end of  `onActivityCreated()`

        if (endlessAdapter == null) {
           if (getActivity() != null) {

            profileList = new ArrayList<ProfileReview>();
            endlessAdapter = new EndlessProfileAdapter(getActivity(),
                    profileList, tf);
            endlessAdapter.setRunInBackground(false);
            listView.setAdapter(endlessAdapter);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:59:55.693

`EndlessAdapter`将无法支持页眉或页脚视图。当`HeaderListViewAdapter`您使用页眉或页脚视图时创建的 对底层适配器进行了一些假设，而`EndlessAdapter`.

我已经更新了`EndlessAdapter`文档以指出限制。

# java - 使用标准格式的时间值启动 AlarmManager 的最简单方法（例如 7:30）

> ID：16158839
> 
> 赞同：2
> 
> 时间：2013-04-23T00:13:28.597
> 
> 标签：java, android, time, alarmmanager

我想在用户指定的时间开始我的 AlarmManager 活动但是时间字符串以标准格式存储（例如 7:30）我如何使用 AlarmManager 与以标准格式存储的长值进行交互- 而不是通常的毫秒？是否可以在不将其转换为毫秒的情况下做到这一点？如果是这样 - 如何？如果不是 - 什么是第二好的选择？（如果我的时间字符串是标准格式，我只需要知道唤醒警报的最简单方法。）

资源：

```
 String time = 7:30 
 Intent intent2 = new Intent(New.this, Start.class);
        PendingIntent pintent2 = PendingIntent.getActivity(Rules.this, 0, intent2,
                0);
        AlarmManager alarm2 = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        alarm2.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                time != null ? 1000 : 0, pintent2); 
```

编辑：

我正在尝试使用我发现的以下方法：

```
public Date getTimeFromTimeString(String time)
    {
        String[] splitStrings = time.split(":");

        Date timeDate = new Date();
        timeDate.setHours(Integer.parseInt(splitStrings[0]));
        timeDate.setMinutes(Integer.parseInt(splitStrings[1]));
        return timeDate;
    } 
```

但是我收到警告说：

```
The method setMinutes(int) from the type Date is deprecated
The method setSeconds(int) from the type Date is deprecated 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:55:25.160

使用 a`[SimpleDateFormat](https://developer.android.com/reference/java/text/SimpleDateFormat.html)`将您解析`String`为`Calendar`. 从那里拉几毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:13:53.413

此链接中有日历的源代码[https://code.google.com/p/ancal/source/checkout](https://code.google.com/p/ancal/source/checkout) 它包含带有约会、任务和警报的日历。我不知道它是否会帮助你。但是如果你检查代码，你可以找到你想做的事情。（您必须创建SVN才能下载此项目）

# c++ - 使不可变类型可变（consts 和 boost）

> ID：16158844
> 
> 赞同：0
> 
> 时间：2013-04-23T00:13:56.657
> 
> 标签：c++, boost, mutable

我正在为我无法更改的代码库开发一项功能（除了我正在编写的内容），这里有一些类型：

```
// Pointer to a mutable thingy
typedef boost::shared_ptr<Thingy>       MPtr;

// Pointer to an immutable thingy
typedef boost::shared_ptr<const Thingy> Ptr; 
```

现在，我有一个 MPtr 类型的对象，我需要将它分配给 Ptr 类型的对象，但我不能（编译器告诉我没有可能的转换）。使用 const_cast 似乎也无济于事：

```
MPtr foo = const_cast<MPtr*>(moo); 
```

我收到一条错误消息，说它无法更改基础类型。关于如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:33:56.807

```
MPtr foo = boost::const_pointer_cast<Thingy>(moo); 
```

# javascript - 在 Chrome 中可以使用书签吗？

> ID：16158848
> 
> 赞同：1
> 
> 时间：2013-04-23T00:14:16.740
> 
> 标签：javascript, jquery, google-chrome

我试图在 chrome 中创建一个小书签（我正在使用控制台）。我收到以下错误：

```
Refused to load the script 'https://code.jquery.com/jquery-1.6.1.min.js' because
it violates the following Content Security Policy directive: "script-src 
https://*.facebook.com http://*.facebook.com https://*.fbcdn.net 
http://*.fbcdn.net *.facebook.net *.google-analytics.com *.virtualearth.net
*.google.com 127.0.0.1:* *.spotilocal.com:* 
chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl 'unsafe-inline' 
'unsafe-eval' https://*.akamaihd.net http://*.akamaihd.net". 
```

我的代码是

```
var jQueryLib = document.createElement("script");
jQueryLib.src = "https://code.jquery.com/jquery-1.6.1.min.js";
document.body.appendChild(jQueryLib); 
```

这是否意味着不再可能创建书签？我想做的是在我的 Facebook 群组上发表一堆新评论，并认为书签是个好主意。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:41:41.130

从该错误消息来看，Bookmarklet 本身没有问题。问题是 Facebook 已经声明了一个可以运行脚本的域列表。当您尝试注入 jQuery 脚本时，它会看到域（在本例中为 jquery.com）不在允许列表中并拒绝运行它。

作为替代方案，您可以将整个 jQuery 文件复制并粘贴到控制台中。这将绕过内容限制。您还可以将整个 jQuery 库变成一个小书签，以便更轻松地添加到页面中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-04-29T15:31:39.233

Yes Javascript Bookmarklets are allowed in Chrome. For example, copy and paste the code below into a bookmark. Change the title to whatever you want, but paste the code below into the URL section. Then press it.

javascript:alert("See, it works");

# memory - 取消映射在处理过程中创建的内存映射图像

> ID：16158853
> 
> 赞同：0
> 
> 时间：2013-04-23T00:15:27.463
> 
> 标签：memory, ffmpeg, indexing, mapping, png

我有一个很大的问题，虽然我只有症状和原因的理论。

我在 Windows 7x64 下有一个 C++ 应用程序，它使用对 FFMPEG 0.7.13 的系统调用从视频中提取帧。运行时，父应用程序在内存分析器（任务管理器、RAMMap）中保持了大约 2MB 的良好、可预测的内存占用。我可以看到对 FFMPEG 的个人调用也来来去去，没有发生任何事件。问题是，在对 FFMPEG 进行了大约 100 次调用，并创建了 70,000+ 个 PNG（没有一个目录有超过 1500 个 png）之后，Windows 内存页面大小逐渐从大约 2.5GB 增加到超过 7.0GB，并且系统被带到了它的膝盖。所有用户的进程总和与报告的内存页面量相差无几。

我认为这可能与 Windows Search 索引相关，所以我使用 SetFileAttributes() 和 FILE_ATTRIBUTE_NOT_CONTENT_INDEXED 关闭了相关输出目录的索引，虽然它似乎像宣传的那样工作，但似乎并没有解决手头的问题。我目前的运行理论是，所有这些提取的 PNG 都完全或部分通过 FFMPEG 或其他方式映射到内存。我还可以在 RAMMap Physical Pages 选项卡下看到输出 PNG 作为备用映射文件。

问题： - 这里是否有足够的信息来诊断确切的问题？- 我有办法解决这个问题吗？

提前致谢...

# magento - 由于 Magento 上的时区，报告不起作用

> ID：16158854
> 
> 赞同：0
> 
> 时间：2013-04-23T00:15:28.447
> 
> 标签：magento, timezone, report

我已经在论坛和带有教程的网站上尝试了几种可用的解决方案，但没有一个能够解决我的问题。

**不显示销售报告，如果时区**已更改，我总是会收到需要更新统计信息的消息。我已经更新了所有统计数据，我在管理员和`app/etc/config.xml`（美国/圣保罗）中更改了时区，但没有成功。

拜托，这周我需要紧急运送这家商店。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T15:30:59.697

考虑到自发布之日起的时间量，我真的怀疑知道问题的解决方案对您是否仍然有用。无论如何，这对其他人来说可能很有趣，所以它是这样的：

即使通知说“此报告取决于时区配置。更改时区后，需要刷新生命周期统计信息。最后更新时间：2013 年 15 月 10 日 12:25:34。要刷新前一天的统计数据，请单击此处。声称刷新统计数据，它没有。让它工作的正确方法是从管理面板转到报告->刷新统计信息。然后要做的就是选择所有项目并刷新它们。

这是一个巧妙的解决方案，与许多其他解决方案不同，它避免接触 Magento 的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-30T10:48:26.280

如果您的 magento 中没有任何重大问题，那么 Refresh Life Time Statistic 可能会解决该问题。

# mysql - 如何根据mysql中的时区平均分配用户帐户？

> ID：16158857
> 
> 赞同：0
> 
> 时间：2013-04-23T00:15:50.763
> 
> 标签：mysql, distribution, quicksort

我有1000个帐户。每个帐户都有 account_name、account_id、time_zone_id

我想为每个帐户生成 3 个用户的活动。

因此，我需要为已使用的#10 生成 333 个活动，为用户 #11 生成 333，为用户 #12 生成 334。但我需要确保时区分布均匀。因此，如果我在 18 时区有 200 个帐户，在 10 时区有 400 个帐户，在 7 时区有 200 个帐户，在 39 时区有 200 个帐户，那么我想确保我为用户平均分配这些新活动

我已经尝试过这样的选择来获得计数，看看我是否朝着正确的方向前进

```
SELECT count(ac.account_id) AS total, ac.time_zone_id,
(SELECT user_id FROM users where team_id = 4 ORDER BY RAND() LIMIT 1 ) AS user_id
FROM accounts AS ac
GROUP BY ac.time_zone_id 
```

这创造了活动，但分配不均。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:36:59.460

以下将为每个帐户返回一个 user_no ( 10-12 )。它按 time_zone_id 排序，然后使用 mod 函数依次选择三个用户中的每一个（第一个结果为用户 10，第二个结果为 11，第三个为 12，第四个为 10，依此类推）。

```
set @r = 0 ;
select 
  @r:=@r+1 row_no, 
  account_id, 
  account_name,
  mod(@r,3)+10 user_no 
from 
  account 
order by 
  time_zone_id 
```

**修订**

您可以通过类似的方式获得用户

```
set @ur = 0;
select 
  @ur:=@ur+1 user_row_no,
  user_id
from users
  where team_id = 4 
```

**再次修订**

会是这样的

**制作一些样本数据**

```
create table users( user_id int, team_id int) ;
insert into users select 2,4 
union select 3,4
union select 1,2
union select 7,4
union select 6,4;

create table account ( account_id int, 
                      account_name varchar(20),
                      time_zone_id varchar(3),
                      assigned_to int
                      );

insert into account(account_id ,account_name,time_zone_id)
select 1,'Janice','pst'
union select 2,'Jonny','gmt'
union select 3,'Jane','gmt'
union select 4,'Janet','pst'
union select 5,'James','gmt'; 
```

**制作一个表格来弹出我们感兴趣的用户** （可以/应该是 temp_table）

```
create table temp_user( id int AUTO_INCREMENT primary key,
                        user_id int
                       );

insert into temp_user( user_id ) 
select user_id 
from users 
where team_id = 4; 
```

**更新**

```
set @r=0;

update account join 
(
    select 
      @r:=@r+1 row_no, 
      account_id, 
      account_name,
      assigned_to
    from 
      account 
    order by 
      time_zone_id
  ) x 
on x.account_id = account.account_id
join
  temp_user 
  on

    temp_user.id=(1+ mod(row_no,(select count(*) from temp_user)))
  set account.assigned_to = temp_user.user_id 
```

[http://sqlfiddle.com/#!2/164733/10](http://sqlfiddle.com/#!2/164733/10)

# ruby-on-rails - Facebook Realtime API + Rails + POST 不工作

> ID：16158864
> 
> 赞同：1
> 
> 时间：2013-04-23T00:16:26.407
> 
> 标签：ruby-on-rails, facebook-graph-api, koala

我正在订阅 Facebook 的 Realtime API（使用 Koala gem 等）以在用户管理的页面每次更改时获取数据......

出于某种原因，我没有收到来自 Facebook 的任何 POST 数据，但是：

1.) 测试 'GET' 方法通过 Facebook 工作正常 2.) 当我从不同来源发布时，它工作正常。3.) 用户已授予`manage_pages`权限 4.) 回调 url 是公开的 - （即为什么第 1 步有效）

以下是控制器处理来自 Facebook 的请求的代码：

```
class RealtimeupdatesController < ApplicationController

  def verify
      if request.request_method == "GET"
        challenge = Koala::Facebook::RealtimeUpdates.meet_challenge(params,'testtoken')
        if(challenge)
          render :text => challenge
        else
          render :text => 'Failed to authorize facebook challenge request'
        end
      #elsif request.request_method == "POST"
      else
        Merchant.create(:email => "user@user.com")
      end
  end

end 
```

# javascript - 使用流星将数据传递给动态创建的模板

> ID：16158868
> 
> 赞同：1
> 
> 时间：2013-04-23T00:16:32.590
> 
> 标签：javascript, dynamic, meteor

跟进这个问题/答案（第二个答案）[在 Meteor.js 中动态加载模板](https://stackoverflow.com/questions/12968808/dynamically-loading-templates-in-meteor-js)

我已经在当前显示的模板中设置了一个助手，并且我正在动态返回模板。这很好用。

```
Template.template1.helpers({

    dynamicView: function(){
        return Template['dynamic_template']();
    }
}) 
```

这最终在模板 1 中显示了我的 html：

问题：

1.  我如何在创建此模板时将数据传递给它，我可以执行以下操作：

    模板['dynamic_template'](data1, jsonData2);

2.  我希望`dynamicView`template1 中的助手也是动态的，因为它可以根据其他一些标准具有不同的模板。我可以在这里使用 Session 并将 dynamicView 返回语句更改为如下所示：

    dynamicView: function(){ return Session.get('dynamicTemplate'); }

和其他地方`Session.set('dynamicTemplate', Template['dynamic_template']());`这工作，但它是推荐的。它只是一个字符串，但我担心性能问题和我的模板的大小被被动传递

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T01:06:44.573

好的，我想我必须将我的答案分开：

与 1。

模板是已编译的车把模板，因此您只需为它们提供上下文，以便可以填充车把数据：

```
data = {name1:value1, name2:value2}
return Template['dynamic_template'](data); 
```

这样`{{name1}}`和分别`{{name2}}`填满`value1`和`value2`。

与 2。

是的，这应该可以，您可以传递任何会导致 HTML 的数据。有关非常详细的视频广播，请查看有关模板功能的 EventedMind 截屏视频：[http ://www.eventedmind.com/posts/meteor-rendering-template-functions](http://www.eventedmind.com/posts/meteor-rendering-template-functions)

The template system's use case might not be this exactly. You might want to use [Meteor.render](http://docs.meteor.com/#meteor_render) instead, but it depends on what you want to do.

Despite the `Session` name, its just a reactive javascript variable so it should be fine with larger strings too to the same that would be used in an ordinary javascript variable

# javascript - 代码适用于 JSfiddle 但不适用于我的网站

> ID：16158871
> 
> 赞同：0
> 
> 时间：2013-04-23T00:16:59.910
> 
> 标签：javascript, jquery, html

jsfiddle上的以下代码：http: [//jsfiddle.net/mppcb/1/](http://jsfiddle.net/mppcb/1/)在那里完美运行，但是当我在我的网站（[http://www.tuivel.com/upload/index.html](http://www.tuivel.com/upload/index.html)）上复制相同的代码时不会工作：

HTML：

```
<form id="myform" novalidate="novalidate">
    <input type="text" name="field1[]">
    <br>
    <input type="text" name="field2[]">
    <br>
    <input type="text" name="field3[]">
    <br>
    <input type="file" name="field4[]" id="filename">
    <br>
    <input type="submit">
</form> 
```

JS 和 jQuery：

```
<script type="text/javascript">
$(document).ready(function() {

    function Checksize(){
    var iSize = ($("#filename")[0].files[0].size);
       alert(iSize);
     if (iSize < 2097152.00) 
         { 
        alert("Es menor a 2 megabytes!!!!");
         return true;
         }
       else{
           alert("Es mayor a 2mb!!");
           return false;
           }
    }

function Checkfiles() {
        var fup = document.getElementById('filename');
        var fileName = fup.value;
        var ext = fileName.substring(fileName.lastIndexOf('.') + 1);
        var chkext = ext.toLowerCase();
        //var fileSize = fup.size;

    if(chkext=="gif" || chkext=="jpg" || chkext=="jpeg" || chkext=="png") {
        alert("Successfully Uploaded!");
        return true;
    }
    else {
        alert("Upload GIF, PNG, JPG Images only");
        return false;
    }
} 

    $('#myform').validate({
        rules: {
            "field1[]": {
                required: true,
                minlength: 5
            },
            "field2[]": {
                required: true,
                url: true
            },
            "field3[]": {
                required: true,
                email: true
            },
            "field4[]": {
                required: true,
                minlength: 5
            }
        },
        submitHandler: function(form) { // for demo
            var result=Checkfiles();
            var size=Checksize();
            alert(size);
            alert(result);
            if(size==true && result==true) {
                alert("Ya se subió!!!");
                return true;
            } else {
                alert("Por algo no pasó!!!");
                return false;
            }

        }
    });

});
</script> 
```

我还包括 jQuery 库：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script> 
```

任何奇怪为什么不为我工作？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:25:29.333

```
$('#myform').validate({ 
```

您没有`validate`在您的网站上使用该插件，但 jsFiddle 的作者使用了：

![jsfiddle 验证插件](https://i.stack.imgur.com/c9mIo.png)

要解决此问题，只需下载`validate`插件，然后将其添加到脚本之前的 HTML 中：

```
<script type="text/javascript" src="path/to/validate/plugin.js"></script> 
```

为了将来参考，您可以通过单击 jsFiddle 左侧边栏的“外部资源”来查看所有包含的插件。

# android - 如何在 Android 应用中添加额外的菜单项？

> ID：16158874
> 
> 赞同：1
> 
> 时间：2013-04-23T00:17:32.930
> 
> 标签：android, menu

我的应用程序屏幕上已经有带有 4 个带有图像的菜单项的操作栏。我想添加更多项目，但不在操作栏中，但是当用户单击手机上的“菜单”按钮时，应该显示这些新项目。

我有以下财产`manifest.xml`：

```
android:uiOptions="splitActionBarWhenNarrow" 
```

在活动内部，我有以下代码。

```
final ActionBar actionBar = getActionBar();
actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM,
ActionBar.DISPLAY_SHOW_CUSTOM | ActionBar.DISPLAY_SHOW_HOME | ActionBar.DISPLAY_SHOW_TITLE); 
```

此外，我正在覆盖 onCreateOptionMenu(Menu menu) 以显示操作栏项目。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:22:35.503

在你的菜单 xml 添加

```
android:showAsAction="never" 
```

对于您想要在按钮中的每个项目，它们将被添加到您的溢出菜单或菜单按钮

# ms-access - MS Access - 表单是否具有“儿童”属性？

> ID：16158875
> 
> 赞同：1
> 
> 时间：2013-04-23T00:17:36.283
> 
> 标签：ms-access

我知道 Access 表单有一个名为 的属性`parent`，那么有什么方法可以引用他们的孩子吗？理想情况下是这样的：

`Forms!frmParentForm.Children`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:50:58.737

您可以循环浏览 Form 的 Controls 集合并确定控件的类型，如下所示：

```
Dim f As Form
Set f = Forms!MyForm
Dim ctl As Control
For Each ctl In f.Controls
  If TypeOf ctl Is SubForm Then
    MsgBox "subform: " & ctl.Name
  ElseIf TypeOf ctl Is TextBox Then
    MsgBox "Textbox: " & ctl.Name
  Else
     ' test for more control types / do something
  End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:45:43.910

表单上的所有控件都是该表单的“子项”，可以按名称引用，如`Me.Text1`文本框。如果您正在寻找其他*表单*的子表单，因为它们在子表单控件中使用，那么您可以通过枚举父表单上的控件、识别子表单控件 ( `.ControlType=112`)，然后检索它们的`.SourceObject`属性值来找到它们.

# zend-framework - 在zend框架中从带有子域的url获取路由名称

> ID：16158878
> 
> 赞同：0
> 
> 时间：2013-04-23T00:17:45.017
> 
> 标签：zend-framework

我可以使用以下代码段通过 url 获取路由器名称：

```
$url = myproject.com/test/new

$request = new Zend_Controller_Request_Http($url);

$frontController = Zend_Controller_Front::getInstance();

$router = $fontController->getRouter();

$router->route($request);

$router->getCurrentRouteName(); // Here I can get a router name 
```

当我有一个没有子域的 url 时，这对我有用。但是对于像“mysubdomain.myproject.com/test/new”这样的网址，我无法获得正确的路由器名称。但是当我在浏览器中打开这个 url 时，它会呈现正确的控制器和动作。要添加像“mysubdomain.myproject.com/test/new”这样的路由（Zend_Controller_Router_Route_Hostname），我使用 chain() 方法。那么，我怎样才能获得正确的路由器名称呢？

# matlab - 在 Matlab 中删除 3D 单元格数组中的空行

> ID：16158879
> 
> 赞同：0
> 
> 时间：2013-04-23T00:17:54.097
> 
> 标签：matlab, 3d, cell-array

我有一个大型**3D** CELL ARRAY (x1)，我必须删除空行。我怎样才能做到这一点？

我的单元格数组示例（变量的某些部分）：

```
val(:,:,1) = 

[20]    []    []    []    []    []    []    []
[ 0]    []    []    []    []    []    []    []
[ 0]    []    []    []    []    []    []    []
[]      []    []    []    []    []    []    []

(...)

val(:,:,42) = 

[ 34225]    [   215]    [    0]    [   0]    [    0]    [    0]    [    0]    [    0]
[ 85200]    [   545]    [    0]    [   0]    [    0]    [    0]    [    0]    [    0]
[ 65074]    [   190]    [ 1000]    [   0]    [    0]    [    0]    [    0]    [    0]
[ 81570]    [  1385]    [ 2475]    [   0]    [    0]    [    0]    [    0]    [    0]    
[ 67236]    [   530]    [  365]    [   0]    [    0]    [    0]    [    0]    [    0]
[ 61338]    [     0]    [  100]    [   0]    [    0]    [    0]    [    0]    [    0]
[]          []          []         []        []         []         []         []    
[]          []          []         []        []         []         []         []  
[]          []          []         []        []         []         []         [] 
```

在这种情况下，我想从这些变量中排除第 4 行`(:,:,1)`、最后三行以及所有其他行。`(:,:,42)`

我试过了

```
x1(all(all(cellfun((@isempty,x1),2),:,:) = []; 
```

但它给了我以下错误：

错误：表达式或语句不正确——可能是不平衡的 (、{ 或 [.

PS：我不能使用`"=="`，因为它是一个单元阵列。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:54:35.977

这里似乎有两个问题。一是您使用的是 3D 元胞数组，并且您似乎想从不同的平面删除不同数量的行。这会给你一些不能形成正确 MxNxP 结构的东西，因为 M 不会相同。

也就是说，我可以告诉您如何删除二维元胞数组中所有为空的行。假设`val`是 MxN。然后

```
val2 = val(~all(cellfun(@numel,val)==0,2),:); 
```

如果您想使用您描述的 3D 数据，您必须将每个平面的结果分别存储在一个单元格中。像这样的东西：

```
val2 = cell(1,1,size(val,3));
for i = 1:size(val,3)
    valplane = val(:,:,i);
    val2{i} = valplane(~all(cellfun(@numel,valplane)==0,2),:);
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:17:51.713

这应该适用于您的特定行，例如第一行：

```
i=1;    %Row number
val(~all(cellfun(@isempty,val(:,:,i)')),:,i); 
```

例如：

```
>> 
val = cell(4,8,2);
val(:,:,1) = {
[20]    []    []    []    []    []    []    []
[ 0]    []    []    []    []    []    []    []
[ 0]    []    []    []    []    []    []    []
[]      []    []    []    []    []    []    []
};
>> 
i=1;    %Row number
val(~all(cellfun(@isempty,val(:,:,i)')),:,i) 
```

结果是：

```
ans = 

    [20]    []    []    []    []    []    []    []
    [ 0]    []    []    []    []    []    []    []
    [ 0]    []    []    []    []    []    []    [] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:15:39.087

您**无法**从 3D 阵列中移除不同的行，您可以移除“地板”、层或“墙壁”。（如果你想象一个逐层的建筑物，我想要一个垂直且垂直的平面到你的视线，而墙壁是沿着你的视线的垂直平面）。

您**不应该**以这种方式存储数字数据，即每个单元格一个数字。当双精度标量只有 8 个字节时，每个单元会产生 112 个字节的**开销。**

根据我可以从您的示例中观察到的稀疏模式，您可能会通过将其转换为**稀疏**数组而受益，该数组仍然引用数组的原始大小但不存储`0`or `[]`。但是，稀疏数组只是二维的，其中附加层（来自第三维）沿第二维连续存储。

您的示例的简化版本将阐明：

```
val(:,:,1) = {
[20]    []    []    []
[ 0]    []    []    []
[ 0]    []    []    []
[]      []    []    []};
val(:,:,2) = {
[ 34225]    [   215]    [    0]    [   0]    
[ 85200]    [   545]    [    0]    [   0]   
[ 65074]    [   190]    [ 1000]    [   0]   
[]          []          []         []     };

% Find non-zero empty elements (0s will be discarded automatically)
[r,c] = find(~cellfun('isempty',val));

% Convert to sparse (note the coordinates are only 2D)
sp    = sparse(r,c,[val{:}]);
sp =
   (1,1)             20
   (1,5)          34225
   (2,5)          85200
   (3,5)          65074
   (1,6)            215
   (2,6)            545
   (3,6)            190
   (3,7)           1000

% Convert to full to see what happened with the 3rd dimension
full(sp)
ans =
     20      0      0      0  34225   215     0     0     
      0      0      0      0  65074   190     0     0
      0      0      0      0  85200   545  1000     0 
```

您可以看到第二层已水平连接（沿列）。如果需要恢复 3D，可以使用 reshape。

`val`vs的优势在于`sp`减少了存储：

```
 Name      Size             Bytes  Class     Attributes
  sp        3x8                200  double    sparse    
  val       4x4x2             3704  cell 
```

# xcode - 自定义复选框未按预期工作

> ID：16158881
> 
> 赞同：1
> 
> 时间：2013-04-23T00:17:59.307
> 
> 标签：xcode, uibutton

我正在尝试创建此检查按钮，然后在我的项目中任何我想要的地方调用该检查按钮，并通过添加应有的图像使其工作，但我什至无法将其发送到 NSLog ......进行测试目的...

下面是按钮 .h 和 .m 文件。以及我正在调用按钮并尝试使用的视图......

**CheckButton.h** #导入

```
@interface CheckButton : UIButton {
    BOOL _checked;
}

@property (nonatomic, setter=setChecked:) BOOL checked;

-(void) setChecked:(BOOL)check;

@end 
```

**检查按钮.m**

```
#import "CheckButton.h"

@implementation CheckButton
@synthesize checked = _checked;

-(id) init {
    if (self=[super init]) {
        self.checked = NO;
        [self addTarget:self action:@selector(setChecked:) forControlEvents:UIControlEventTouchUpInside];
    }
    return self;
}

-(void) awakeFromNib {
    self.checked = NO;
    [self addTarget:self action:@selector(OnCheck:) forControlEvents:UIControlEventTouchUpInside];

}

- (void) setChecked:(BOOL)check{
    _checked = check;
    if(_checked) {
        UIImage *img = [UIImage imageNamed:@"check.png"];
        [self setImage:img forState:UIControlStateNormal];
         NSLog(@"Checked");
    } else {
        UIImage *img = [UIImage imageNamed:@"uncheck.png"];
        [self setImage:img forState:UIControlStateNormal];
         NSLog(@"UnChecked");
    }
}

-(void) OnCheck:(id) sender {
    self.checked = _checked;
}

@end 
```

**GoToBedPopUp.h**

```
#import "CheckButton.h"

@interface GoToBedPopup : PopupContainer{
    IBOutlet  CheckButton *checkboxButton;
}

// Checkboxes - (CheckButton)
@property (nonatomic, strong) CheckButton *checkHR;

@end 
```

**GoToBedPopUp.m**

```
#import "GoToBedPopup.h"

@implementation GoToBedPopup

@synthesize checkHR, checkO2, checkMovement, checkNoise, checkSkinTemp;

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];

    // Checkbox Button
    checkHR = [[CheckButton alloc] initWithFrame:CGRectMake(17, 31, 23, 23)];

    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:16:43.483

嗨，我测试了你的代码，一切都好，你只改变一件事....

```
- (void) setChecked:(BOOL)check{
    _checked = !check; //** this is the only one change needed 
    if(_checked) {
        UIImage *img = [UIImage imageNamed:@"Check.png"];
        [self setImage:img forState:UIControlStateNormal];
        NSLog(@"Checked");
    } else {
        UIImage *img = [UIImage imageNamed:@"Uncheck.png"];
        [self setImage:img forState:UIControlStateNormal];
        NSLog(@"UnChecked");
    }
} 
```

示例项目[在这里](https://www.dropbox.com/s/2vsqjxr0uufzc1w/testCheckBox.zip)

# bash - 在Makefile中使用'！（...）'时，如何修复“意外标记'（'”附近的语法错误？

> ID：16158883
> 
> 赞同：4
> 
> 时间：2013-04-23T00:18:09.973
> 
> 标签：bash, shell, syntax, makefile, wildcard

我有一个`Makefile`如下：

```
test:
    rm -rf !(.git|folder1|folder2) 
```

运行后`make test`，文件夹中的所有内容都必须删除，除了`.git/`,`folder1/`和`folder2/`.

相反，我收到以下错误：

```
/bin/bash: -c: line 0: syntax error near unexpected token `('
/bin/bash: -c: line 0: `rm -rf !(.git|folder1|folder2)'
make: *** [test] Error 2 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:22:18.970

只有设置了 shell 选项 ( ) 时，`!(...)`通配符语法才有效。默认情况下不启用此选项。`extglob``shopt -s extglob`

另一种方法是：

```
find '(' -name .git -o -name folder1 -o -name folder2 ')' -prune -o -exec rm -rf {} \; 
```

# javascript - html textarea，末尾有常量静态不可编辑的只读文本

> ID：16158884
> 
> 赞同：0
> 
> 时间：2013-04-23T00:18:21.507
> 
> 标签：javascript, html, css

如今，在*感知*的文本输入中包含具有各种跨度/div 的“假”文本输入已经风靡一时。看看堆栈溢出。要在此处标记此问题，我将键入 html-<space>，它会将其转换为令牌/过滤器/标记。这很容易做到，将带有边框的外部 div 看起来像文本输入，隐藏真实文本输入的边框并将点击/焦点事件从 div 发送到文本输入。砰，你已经完成了。 [例子](http://jsfiddle.net/RGHwf/)

我需要在输入之后有静态文本*，*我需要它是多行。我很确定我可以让上面的文本输入示例在输入后通过轻微按摩获得静态文本。但是多行似乎*真的*很难。如果你去多行，你必须使用 textareas （这总是真的吗？）。这是我想要的图像：

![在此处输入图像描述](https://i.stack.imgur.com/FNF8O.png)

整个区域对用户来说就像一个文本区域。（背景颜色只是为了帮助解释问题）。想象一下最初没有绿色文本，但红色文本在那里。用户点击黑色边框内的任何地方，他的光标就会转到右上角，就像一个普通的空文本区域。然后他打字，红色的文字一直在移动。如果用户点击，比如说，“附加”，他的光标就在最后一个绿色句点之后，而不是在“附加”这个词中。光标只能在绿色部分。

如果将单行文本输入的解决方案扩展到此，您会说绿色是文本区域，红色是 div，黑色边框是容器 div。但是所有的 div 都必须是矩形的（我认为）。 [这](http://jsfiddle.net/3aggN/)是我用与上述类似的解决方案进行的天真的尝试。但这有很多问题。红色的第一行怎么能从中间开始，然后第二行在左边齐平呢？这是 jsfiddle 上的内容：

```
div{
    width:200px;
    border:1px solid #000;
}
textarea{
    border:none;
    font-size:12px;
}
label{
    cursor:text;
    font-size:12px;
}

<div>
<textarea id="textarea">this is what the user entered</textarea>
<br>
<label for="textarea">This is my constant text</label>
</div> 
```

我将使用 javascript 动态填充红色，但出于这个问题的目的，我认为只考虑静态的、常量的 html 是节省的。

这可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:37:44.727

**1）**创建*文本区域*

**2）**将您的*静态文本*存储在变量中。

**3）**用*静态文本*变量填充你的*文本区域*

 ***4）**当用户开始在*文本区域*（**即：** onkeydown 事件、鼠标事件..）中写入时，擦除您的静态内容。将动态内容存储在一个新变量中，并在用户不断输入时不断更新它。同时在*textarea*中，仅在用户停止输入后才在动态内容之后附加静态文本（**即：** onkeyup 事件）。不断重复这个过程。

**计算：**

> 动态文本 = *textarea*总文本的长度 -*静态文本的长度**

# git - C++ Builder 2009 是否与 Git 一起使用？

> ID：16158886
> 
> 赞同：-1
> 
> 时间：2013-04-23T00:18:37.777
> 
> 标签：git, c++builder

您可以使用带有 Git 的 C++ Builder 2009 的 IDE 管理源代码控制吗？我知道我可以在 IDE 之外完成它，我很好奇它是否会以集成方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T18:02:46.637

IDE 中没有内置功能，但您可以按照这个[答案](https://stackoverflow.com/questions/1482015/is-there-a-git-plugin-for-the-delphi-ide)。我认为这是一个很好的解决方法。

# eclipse - Eclipse 崩溃后无法启动

> ID：16158889
> 
> 赞同：59
> 
> 时间：2013-04-23T00:19:02.823
> 
> 标签：eclipse

Eclipse 崩溃了，我无法重新启动它。我如何从崩溃中恢复？

这是 .log 文件：

```
!SESSION 2013-04-22 20:12:27.799 -----------------------------------------------
eclipse.buildId=M20130204-1200
java.version=1.7.0_17
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.java.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.java.product

!ENTRY org.eclipse.osgi 4 0 2013-04-22 20:12:31.146
!MESSAGE An error occurred while automatically activating bundle com.android.ide.eclipse.adt (1128).
!STACK 0
org.osgi.framework.BundleException: Exception in com.android.ide.eclipse.adt.AdtPlugin.start() of bundle com.android.ide.eclipse.adt.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:52)
    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
    at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.Workbench$54.run(Workbench.java:2412)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: java.lang.NullPointerException
    at org.eclipse.ui.plugin.AbstractUIPlugin.imageDescriptorFromPlugin(AbstractUIPlugin.java:671)
    at com.android.ide.eclipse.adt.AdtPlugin.startEditors(AdtPlugin.java:1523)
    at com.android.ide.eclipse.adt.AdtPlugin.start(AdtPlugin.java:264)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 29 more
Root exception:
java.lang.NullPointerException
    at org.eclipse.ui.plugin.AbstractUIPlugin.imageDescriptorFromPlugin(AbstractUIPlugin.java:671)
    at com.android.ide.eclipse.adt.AdtPlugin.startEditors(AdtPlugin.java:1523)
    at com.android.ide.eclipse.adt.AdtPlugin.start(AdtPlugin.java:264)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:52)
    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
    at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.Workbench$54.run(Workbench.java:2412)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)

!ENTRY org.eclipse.osgi 4 0 2013-04-22 20:12:31.150
!MESSAGE An error occurred while automatically activating bundle com.android.ide.eclipse.adt (1128).
!STACK 0
org.osgi.framework.BundleException: Exception in com.android.ide.eclipse.adt.AdtPlugin.start() of bundle com.android.ide.eclipse.adt.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:52)
    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
    at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.Workbench$54.run(Workbench.java:2412)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: java.lang.NullPointerException
    at org.eclipse.ui.plugin.AbstractUIPlugin.imageDescriptorFromPlugin(AbstractUIPlugin.java:671)
    at com.android.ide.eclipse.adt.AdtPlugin.startEditors(AdtPlugin.java:1523)
    at com.android.ide.eclipse.adt.AdtPlugin.start(AdtPlugin.java:264)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 29 more
Root exception:
java.lang.NullPointerException
    at org.eclipse.ui.plugin.AbstractUIPlugin.imageDescriptorFromPlugin(AbstractUIPlugin.java:671)
    at com.android.ide.eclipse.adt.AdtPlugin.startEditors(AdtPlugin.java:1523)
    at com.android.ide.eclipse.adt.AdtPlugin.start(AdtPlugin.java:264)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:52)
    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
    at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.Workbench$54.run(Workbench.java:2412)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)

!ENTRY org.eclipse.ui 4 0 2013-04-22 20:12:31.153
!MESSAGE Error occurred during status handling
!STACK 0
java.lang.NullPointerException
    at org.eclipse.ui.internal.statushandlers.StatusHandlerRegistry.<init>(StatusHandlerRegistry.java:72)
    at org.eclipse.ui.internal.statushandlers.StatusHandlerRegistry.getDefault(StatusHandlerRegistry.java:91)
    at org.eclipse.ui.statushandlers.StatusManager.getStatusHandler(StatusManager.java:135)
    at org.eclipse.ui.statushandlers.StatusManager.handle(StatusManager.java:189)
    at org.eclipse.ui.statushandlers.StatusManager.handle(StatusManager.java:231)
    at org.eclipse.ui.statushandlers.StatusManager$StatusManagerLogListener.logging(StatusManager.java:305)
    at org.eclipse.core.internal.runtime.RuntimeLog.logToListeners(RuntimeLog.java:160)
    at org.eclipse.core.internal.runtime.PlatformLogWriter.logged(PlatformLogWriter.java:100)
    at org.eclipse.equinox.log.internal.ExtendedLogReaderServiceFactory.safeLogged(ExtendedLogReaderServiceFactory.java:86)
    at org.eclipse.equinox.log.internal.ExtendedLogReaderServiceFactory.logPrivileged(ExtendedLogReaderServiceFactory.java:205)
    at org.eclipse.equinox.log.internal.ExtendedLogReaderServiceFactory.log(ExtendedLogReaderServiceFactory.java:178)
    at org.eclipse.equinox.log.internal.ExtendedLogServiceFactory.log(ExtendedLogServiceFactory.java:65)
    at org.eclipse.equinox.log.internal.ExtendedLogServiceImpl.log(ExtendedLogServiceImpl.java:87)
    at org.eclipse.equinox.log.internal.LoggerImpl.log(LoggerImpl.java:54)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLogFactory$1.log(EclipseLogFactory.java:53)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:125)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:52)
    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
    at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.Workbench$54.run(Workbench.java:2412)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)

!ENTRY org.eclipse.ui.workbench 4 2 2013-04-22 20:12:31.155
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
!STACK 1
org.eclipse.core.runtime.CoreException: Plug-in com.android.ide.eclipse.adt was unable to load class com.android.ide.eclipse.adt.internal.welcome.AdtStartup.
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:176)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:52)
    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
    at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.Workbench$54.run(Workbench.java:2412)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle com.android.ide.eclipse.adt (1128).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
    ... 11 more
Caused by: org.osgi.framework.BundleException: Exception in com.android.ide.eclipse.adt.AdtPlugin.start() of bundle com.android.ide.eclipse.adt.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    ... 23 more
Caused by: java.lang.NullPointerException
    at org.eclipse.ui.plugin.AbstractUIPlugin.imageDescriptorFromPlugin(AbstractUIPlugin.java:671)
    at com.android.ide.eclipse.adt.AdtPlugin.startEditors(AdtPlugin.java:1523)
    at com.android.ide.eclipse.adt.AdtPlugin.start(AdtPlugin.java:264)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 29 more
!SUBENTRY 1 org.eclipse.equinox.registry 4 1 2013-04-22 20:12:31.156
!MESSAGE Plug-in com.android.ide.eclipse.adt was unable to load class com.android.ide.eclipse.adt.internal.welcome.AdtStartup.
!STACK 0
org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle com.android.ide.eclipse.adt (1128).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:52)
    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
    at org.eclipse.ui.internal.EarlyStartupRunnable.getExecutableExtension(EarlyStartupRunnable.java:117)
    at org.eclipse.ui.internal.EarlyStartupRunnable.run(EarlyStartupRunnable.java:66)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.Workbench$54.run(Workbench.java:2412)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: org.osgi.framework.BundleException: Exception in com.android.ide.eclipse.adt.AdtPlugin.start() of bundle com.android.ide.eclipse.adt.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    ... 23 more
Caused by: java.lang.NullPointerException
    at org.eclipse.ui.plugin.AbstractUIPlugin.imageDescriptorFromPlugin(AbstractUIPlugin.java:671)
    at com.android.ide.eclipse.adt.AdtPlugin.startEditors(AdtPlugin.java:1523)
    at com.android.ide.eclipse.adt.AdtPlugin.start(AdtPlugin.java:264)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 29 more
!SUBENTRY 1 org.eclipse.equinox.registry 4 1 2013-04-22 20:12:31.156
!MESSAGE Plug-in com.android.ide.eclipse.adt was unable to load class com.android.ide.eclipse.adt.internal.welcome.AdtStartup.
!STACK 0
org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle com.android.ide.eclipse.adt (1128).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at 
```

**编辑：**我尝试开始`-clean`但它没有解决它。

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2013-04-23T01:04:13.203

我遇到了类似的崩溃，使用`-clean`选项启动 Eclipse 并没有帮助。我最终删除了`.metadata\.plugins\org.eclipse.e4.workbench`文件，这解决了这个问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-08T08:16:16.740

这是正确的。您可以通过删除或重命名工作台目录中的此文件夹来解决此问题 - **.metadata/.plugins/org.eclipse.e4.workbench**为**.metadata/.plugins/org.eclipse.e4.workbench.temp**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-11T06:08:46.453

转到您的 Workspace/.metadata/.plugins 并删除其中的所有内容。Eclipse 将启动并重新生成文件夹和文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-19T02:43:29.227

对于 Windows 用户，此文件夹位于工作区中`C:\Users\elminson\workspace\\.metadata\\.plugins`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T00:32:22.240

**重要**如果您将项目保存在工作区文件夹中：立即备份

请参阅[如何以干净模式运行 eclipse？如果我们这样做会发生什么？](https://stackoverflow.com/questions/2030064/how-to-run-eclipse-in-clean-mode-and-what-happens-if-we-do-so)

[http://aglazkov.wordpress.com/2010/07/18/one-way-to-restore-eclipse-workspace/](http://aglazkov.wordpress.com/2010/07/18/one-way-to-restore-eclipse-workspace/)

[http://breathingtech.com/2009/how-to-reset-workspace-in-eclipse/](http://breathingtech.com/2009/how-to-reset-workspace-in-eclipse/)

*   打开你的任务管理器——>右键单击javaw.exe进程——>选择结束进程树（这将结束你计算机上运行的所有java运行时进程）。

然后转到您的 Eclipse 文件夹 -> configuration.settings 并删除 org.eclipse.ui.ide.prefs 文件。重新启动 Eclipse 并尝试再次打开您的工作区。这对我有用 :) 请注意，删除此文件会导致重置您的工作区历史记录，因此在启动 Eclipse 时，您需要手动浏览到您的工作区位置。

*   删除工作区文件夹或重命名它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-17T07:05:07.580

我的机器很慢，我尝试关闭 eclipse 。经过几次尝试，日食关闭了。重启机器后，eclipse没有打开，显示多个错误。

我删除了`.\metadata\.plugins\org.eclipse.jdt.ui\variablesAndContainers.data file and .\metadata\.plugins\org.eclipse.e4.workbench\workbench.xmi`文件。

之后日食开始工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-14T13:29:13.773

在上述几点对我不起作用之后，我只是在任务管理器中检查了 RAM 使用情况。令我震惊的是，我发现，在我拥有的 2 GB RAM 中，我只剩下 100 MB。Eclipse 需要 1 GB 的空间。我杀死了所有其他不需要的应用程序，然后重新运行 eclipse。

它只是工作:-)

如今，当我运行 eclipse 时，我运行它时没有任何**不需要的**、**消耗 RAM**的应用程序

# macos - 通过双击 osx 打开 ipython notebook

> ID：16158893
> 
> 赞同：28
> 
> 时间：2013-04-23T00:19:34.280
> 
> 标签：macos, osx-mountain-lion, ipython, ipython-notebook

我已经下载了几个 ipython 笔记本，我想在浏览器选项卡中打开它们，而不是导航到我下载它们的目录并运行`ipython notebook notebook_name.ipynb`.

我意识到这可能意味着我很懒，但这对我来说似乎是一个常见的用例。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-05-04T08:00:24.987

使用[Pineapple](https://nwhitehead.github.io/pineapple/)应用程序打开和处理您的 IPython/Jupyter 笔记本。这很酷。

# 更新：

现在有了[nteract](https://github.com/nteract/nteract)，这是一个新的类似 jupyter 的桌面应用程序。安装后，将其设为打开`.ipynb`文件的默认应用程序。然后只需双击任何笔记本即可立即启动它。

![交互geojson](https://cloud.githubusercontent.com/assets/836375/18421299/d95ad398-783b-11e6-8b23-d54cf7caad1e.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-10-28T23:38:32.467

我找到了一种使用 Automator 的好方法（2017 年 10 月；信息来自[此处](https://stackoverflow.com/questions/17242773/pass-in-variable-from-shell-script-to-applescript#17243326)）：

1.  打开**Automator**并创建一个新的**应用程序** [![菜单](https://i.stack.imgur.com/DAjNi.jpg)](https://i.stack.imgur.com/DAjNi.jpg)
2.  从列表中添加`Run Shell Script` **拖放**；可能需要这些设置`Shell: /bin/bash`和`Pass input: as arguments` [![运行外壳脚本](https://i.stack.imgur.com/8ijgt.jpg)](https://i.stack.imgur.com/8ijgt.jpg)
3.  **在下面插入代码**；如有必要，调整到 jupyter 的路径

## 代码

```
#!/bin/sh
variable="'$1'"
the_script='tell application "terminal" to do script "/usr/local/bin/jupyter notebook '
osascript -e "${the_script}${variable}\"" 
```

4.  **将脚本保存**为**应用程序**(!)
5.  尝试打开一个**`.ipynb`文件并将默认应用程序更改**为这个新创建的应用程序。

* * *

### 笔记

1.  这将打开一个终端并运行`jupyter notebook`命令，这样您就可以从那里中断和停止笔记本服务器。另请注意，您不能像在 Automator 中那样*测试*应用程序，但需要在其中添加`Get Specified Finder Items`并插入一些测试笔记本（*仅用于测试目的*）。

正如评论中指出的，还有两个注意事项：

2.  为避免使用笔记本向浏览器历史记录发送垃圾邮件，您可以在隐身/私人模式下启动笔记本：[在隐身窗口中运行 jupyter notebook](https://stackoverflow.com/questions/48787973/run-jupyter-notebook-in-incognito-window)

3.  如果您想在一台服务器上运行笔记本并且不介意额外的工具，Sachit Nagpal 指出（谢谢），也可以使用[nbopen](https://github.com/takluyver/nbopen)。要使用此工作流程，只需替换`"/usr/local/bin/jupyter notebook '`为`"nbopen '`. 任何其他工具都应该可以正常工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-02-02T05:51:41.897

1.  点安装[nbopen](https://github.com/takluyver/nbopen)。
2.  打开Automator，创建新的应用程序

    *   拖放`Run Shell Script`
    *   更改`Pass input`为`as arguments`
    *   复制/粘贴此脚本：

    ```
    variable="'$1'"
    the_script='tell application "terminal" to do script "nbopen '
    osascript -e "${the_script}${variable}\"" 
    ```

3.  将新应用程序保存到`Applications`目录中`nb_open`

4.  右键单击任何 ipynb 文件并选择“打开方式 > 其他”，然后`nb_open`在 Applications 文件夹中选择。不要忘记选中“始终打开方式”。
5.  选择一个 ipynb 文件，获取信息 ( `command + i`) > 打开方式（如果尚未选择，请选择 nb_open）> 单击`Change All...`。完毕。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-25T20:49:14.243

此处发布的应用程序对我来说效果很好：http: [//bioequity.org/2013/11/16/ipynbviewer/](http://bioequity.org/2013/11/16/ipynbviewer/) 您还需要下载 iTerm2，如该页面所述。

请注意，如果文件名中有空格，这将不起作用，但您可以对其进行修改，使其与文件名中的空格一起使用。按住 Control 键单击 iPyNbViewer.app 并选择“显示包内容”。编辑文件 Contents/Resources/Scripts/main.scpt。将“POSIX 路径”的三个实例更改为“POSIX 路径的引用形式”。现在它将使用文件名中的空格。

要将所有 .ipynb 文件设置为使用应用程序打开，您需要在其中一个文件上获取信息（命令-I）并选择 iPyNbViewer 应用程序以打开所有 .ipynb 文件。

如果这是双击 iPython 笔记本文件的默认行为，那就太好了……

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-16T11:54:11.253

我想出了一种在 Ubuntu 上做这件事的方法。（它对我有用，但我不承担任何责任）。[这里](https://termueske.wordpress.com/2015/03/16/a-hack-for-ipython-notebook/)解释了。简而言之，您需要[创建一个新的 MIME 类型](https://www.youtube.com/watch?v=1olY5Qzmbk8)，然后编写一个脚本，作为启动它们的应用程序：

```
#!/bin/bash
netstat -tln |grep "8902"
# if not found - equals to 1, start it
if [ $? -eq 1 ]
then
ipython notebook / --no-browser --port=8902 &
sleep .5
fi
xdg-open http://localhost:8902/notebooks$1 
```

这总是在端口 8902 上打开笔记本服务器，但首先检查是否已经有服务器在运行，如果有，则使用它。然后，您可以使用[ubuntu 调整](http://ubuntu-tweak.com/)来选择您的脚本作为您刚刚创建的 MIME 类型“IPython Notebook”的默认应用程序。在我看来，不是很优雅，但值得。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-02T21:00:34.497

PyCharm 现在支持 Jupyter ipynb 文件： [![在此处输入图像描述](https://i.stack.imgur.com/ENSYV.png)](https://i.stack.imgur.com/ENSYV.png)

这是来自文档[https://www.jetbrains.com/help/pycharm/editing-jupyter-notebook-files.html](https://www.jetbrains.com/help/pycharm/editing-jupyter-notebook-files.html)。

但是我觉得这个功能现在只有专业版才有；希望将来它会添加到社区版本中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-23T15:34:46.980

看看[这个链接](http://gureckislab.org/blog/?p=1310)。将 bash 脚本放在保存 ipython 笔记本的文件夹中，然后双击它打开一个笔记本实例。从上面的链接中，bash 脚本只有：

```
path=$0             # path is path to this file
cd ${path%/*.*}     # clip off the file name to get directory path and cd
ipython notebook --pylab inline 
```

最后，您需要`chmod u+x`脚本使其可执行，然后您就完成了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-10T02:00:01.307

我使用了命令行应用程序“nbopen”并将其放入鸭嘴兽包装器中，以便在 Macos 上拖放和双击打开。'nbopen' 可以使用 'pip' 下载 当 DanHickstein 如上所述使用它时效果很好。我的代码唯一的问题是它需要 nbopen 命令的完整路径。我知道我应该能够以某种方式使用“which nbopen”，但不能让它工作。这是我的鸭嘴兽代码：

```
#!/bin/bash
#  Opens ipynb files in a Jupyter Notebook
#  echo $1
#  $1 is the path of the dropped file
/Users/robw/anaconda/bin/nbopen $1
#  Based on an idea from 
#  https://www.quora.com/Is-there-a-straightforward-way-to-open-an-IPython-Notebook-in-Windows-by-double-clicking 
```

# actionscript-3 - 访问未定义的属性错误

> ID：16158894
> 
> 赞同：0
> 
> 时间：2013-04-23T00:19:36.117
> 
> 标签：actionscript-3, flash

在我开始学习 AS3 后，我遇到了很多错误（尝试将十字准线动态添加到舞台上，而不是使用鼠标光标进行射击游戏）：

```
Main.as, Line 13 1180: Call to a possibly undefined method addChild.
Main.as, Line 13 1120: Access of undefined property crosshair.
Main.as, Line 20 1120: Access of undefined property stage.
Main.as, Line 20 1120: Access of undefined property moveCursor. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:55:55.053

你的类中没有构造函数。

尝试这个 ：

```
package  {
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.ui.Mouse;
    import flash.media.Sound;
    import flash.media.SoundChannel;
    public class Main extends MovieClip {

    public var crosshair:crosshair_mc;

    public function Main()
    {
        //This creates a new instance of the cursor movie clip and adds it onto
        //the stage using the addChild method.
        crosshair = new crosshair_mc();
        addChild(crosshair);

        //Hides the default cursor on the stage so it will not be shown.
        Mouse.hide();

        //Adds an event listener onto the stage with the enter frame event which
        //repeatedly executes the moveCursor function.
        stage.addEventListener(Event.ENTER_FRAME, moveCursor);
    }

    //This function set the x & y positions of the custom cursor to the x & y positions
    //of the default cursor.
    function moveCursor(event:Event) 
    {
      crosshair.x=mouseX;
      crosshair.y=mouseY;
     }
   }
} 
```

# java - 如何将输入添加到继承中

> ID：16158899
> 
> 赞同：0
> 
> 时间：2013-04-23T00:20:32.470
> 
> 标签：java, inheritance

抱歉，如果这有点令人困惑，第一次使用这个网站，所以我不知道我输入的代码是否正确。所以我的问题是，当我在类驱动程序中运行这个程序时，我得到了这个：

```
name: No Name Yet
Manufacturer: no name yet
Engine Cyclinders: 0
Load: 0.0
Towing: 0.0 
```

这是默认设置，现在我试图能够在类驱动程序中输入一个输入，例如将名称更改为我从类`Person`中设置的任何名称。我试过这样做`p.setName("Tim")`，但它只会显示名称，就好像我从 class`tim`调用方法一样。如果我打电话给卡车，那么它说还没有名字。我把 super 放进去，但我不确定我做错了什么。任何帮助，将不胜感激 `writeouput``Person``writeoutput``writeoutput`

```
public class Person {

    private String name;

    public Person()
    {
        name = "No Name Yet";
    }
    public Person(String initialName)
    {
        name = initialName;
    }
    public void setName(String newName)
    {
        newName = "tim";
        name = newName;
    }
    public String getName()
    {
        return name;
    }
    public void writeOutput()
    {
        System.out.println("name: " + name);
    }
    public boolean hasSameName(Person otherPerson)
    {
        return this.name.equalsIgnoreCase(otherPerson.name);
    }

}
public class Vehicle extends Person {

    String manufactName;
    int engine;

    public Vehicle()
    {
        manufactName = "no name yet";
        engine = 0;
    }
    public Vehicle(String initialManufactName, int initialEngine)
    {
        manufactName = initialManufactName;
        engine = initialEngine;
    }
    public void setManufactName(String newManufactName)
    {
        manufactName = newManufactName;
    }
    public void setEngine(int newEngine)
    {

        engine = newEngine;
    }
    public String getManufactName()
    {

        return manufactName;
    }
    public double getEngine()
    {
        return engine;
    }
    public void writeOutput()
    {
        super.writeOutput();
        System.out.println("Manufacturer: " + manufactName);
        System.out.println("Engine Cyclinders: " + engine);
    }
    public boolean hasSameManufactName(Vehicle otherVehicle)
    {
        return this.manufactName.equalsIgnoreCase(otherVehicle.manufactName);
    }
    public boolean hasSameEngine(Vehicle otherVehicle)
    {
        return this.engine == (otherVehicle.engine);
    }
}

public class Truck extends Vehicle {

    private double load;
    private double towing;

    public Truck()
    {
        load = 0;
        towing = 0;
    }
    public Truck(double initialLoad, double initialTowing)
    {
        load = initialLoad;
        towing = initialTowing;
    }
    public void setLoad(double newLoad)
    {
        load = newLoad;
    }
    public void setTowing(double newTowing)
    {
        towing = newTowing;
    }
    public double getLoad()
    {
        return load;
    }
    public double getTowing()
    {
        return towing;
    }
    public void writeOutput()
    {
        super.writeOutput();
        System.out.println("Load: " + load);
        System.out.println("Towing: " + towing);
    }
    public boolean hasSameLoad(Truck otherTruck)
    {
        return this.load == (otherTruck.load);
    }
    public boolean hasSameTowing(Truck otherTruck)
    {
        return this.towing == (otherTruck.towing);
    }
}

public class Driver extends Truck{
    public static void main(String[] args){
        Person p = new Person();
        Vehicle v = new Vehicle();
        Truck t = new Truck();
        t.writeOutput();
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:33:11.350

您不需要在层次结构中创建每个类的实例。

尝试：

```
Truck t = new Truck();
t.setName("tim");
t.writeOutput(); 
```

此外，您的设计很奇怪：Vehicles 通常不会继承 Person，Driver 通常不会继承 Truck。Driver 是 Person 的子类。卡车将是车辆的子类，而车辆将“拥有”驾驶员。

# objective-c - 我们可以做类似 performBlockAndWait: without managed object context 的事情吗

> ID：16158902
> 
> 赞同：0
> 
> 时间：2013-04-23T00:20:45.297
> 
> 标签：objective-c, xcode4.5

假设我在后台线程中。假设我想在主线程上执行一些东西并等到它完成。

我该怎么做？

我想我能做到

```
 [[NSOperationQueue new] addOperationWithBlock:^{
        [[NSOperationQueue mainQueue]addOperationWithBlock:^{
            //Do something on main queue
            [[NSOperationQueue new] addOperationWithBlock:^{
                //Do something after finish
            }];
        }];
    }]; 
```

我想做类似的事情

```
//do stuff
[[NSOperationQueue mainQueue]addOperationWithBlockAndWaitTillFinished:^{
        //Do something on main queue

 }];
 //Do something after finish 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:30:33.917

我认为您正在寻找的是`dispatch_sync`它就像`dispatch_async`但是该块是同步执行的，

请确保不要在与当前队列相同的队列上运行该块，否则您将死锁。

# php - 如何使用 PDO 方法检索信息

> ID：16158904
> 
> 赞同：0
> 
> 时间：2013-04-23T00:20:59.440
> 
> 标签：php, mysql, pdo

我正在使用 PDO 方法构建登录脚本。我想从用户帐户注册一些会话。每次我尝试从数据库中提取信息时，我都会变得空白。我是 PDO 的新手。这是我到目前为止所拥有的：

```
try{
$conn = new PDO(...........);
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);
$conn->exec("SET CHARACTER SET utf8");

$sql = "SELECT * FROM $table WHERE USER = ':user' AND pass = ':pass'";

$UpdateSql = $conn->prepare($sql);
$UpdateSql->bindValue(':user',$user,PDO::PARAM_STR);
$UpdateSql->bindValue(':pass',$pass,PDO::PARAM_STR);

$results = $UpdateSql->execute();

/*Here is where the error comes in
foreach($results as $row)
{
$_SESSION['account'] = $row['account'];
}
*/

/*I also tried this
foreach($UpdateSql as $row)
{
$_SESSION['account'] = $row['account'];
}
*/

}catch(PDOException $e){
echo $e->getMessage();
} 
```

当我尝试第一个 foreach() 时，我收到一个错误**警告：在第 26 行的 C:\xampp\htdocs\drug_center\dc_login.php 中为 foreach() 提供的参数无效**，而第二个 foreach() 给了我一个空结果。有人可以向我解释我在哪里犯错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:23:21.700

您将需要该`$UpdateSql->fetchAll()`方法。这将为您提供一个可以遍历的结果集。

其次，您将通过 bindValue 指定参数，因此您不需要值周围的 '。

```
$table = (in_array($table, array('table1','table2')) ? $table : false;
//make sure you put some input-validation on the $table variabel!!

if($table){
  $sql = "SELECT * FROM $table WHERE user = :user AND pass = :pass";
  //lose the ' around the :pass

  $UpdateSql = $conn->prepare($sql);
  $UpdateSql->bindValue(':user',$user,PDO::PARAM_STR);
  $UpdateSql->bindValue(':pass',$pass,PDO::PARAM_STR);

  $UpdateSql->execute();
  foreach($UpdateSql->fetchAll() AS $row){
    // do some magic
  }
}else{
  throw new Exception("Error: table not allowed", 1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:26:52.463

Execute是在SQL Server上运行一个存储过程，可以

```
$results = $UpdateSql->fetchAll($sql);
foreach ($results as $row) 
     //stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T00:28:16.203

函数 prepare() 返回一个[PDOStatement](http://www.php.net/manual/en/class.pdostatement.php)类的对象。正如 PHP 手册中所说，[PDOStatement](http://www.php.net/manual/en/class.pdostatement.php) :: [execute()](http://www.php.net/manual/en/pdostatement.execute.php)不返回结果，而是返回一个布尔值来指示查询是否成功。您需要使用PDOStatement 具有的[fetch 命令。](http://www.php.net/manual/en/class.pdostatement.php)

# tfs - 如何使用备用凭据从 Visual Studio Online 获取最新代码？

> ID：16158910
> 
> 赞同：2
> 
> 时间：2013-04-23T00:22:28.997
> 
> 标签：tfs, msbuild, build-process, azure-devops

作为我们持续集成过程的一部分，我们希望从 Visual Studio Online 获取最新代码，以便在本地执行自动化测试。

我们已经可以下载最新的构建版本，但由于某种原因，我们无法使用已编译的程序集正确执行 Coded UI 测试。因此，我们想要获取最新的代码以便在本地编译和执行它。如何从 TFVC（Team Foundation 版本控制）项目中获取 Visual Studio Online 的最新代码？

# mediawiki - 在 MediaWiki 中强制进行摘要？

> ID：16158915
> 
> 赞同：4
> 
> 时间：2013-04-23T00:22:50.707
> 
> 标签：mediawiki

在编辑/移动/删除页面或阻止/解除阻止用户时，我希望执行上述功能之一的每个页面中的摘要字段是强制性的，以便更容易了解其中一项操作背后的动机。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-26T19:29:57.963

众所周知，这会吸引很多贡献，但您可以通过自定义 JavaScript 强制执行它，或者通过在以下位置设置`forceeditsummary`为 true 来软强制它[`$wgDefaultUserOptions`](https://www.mediawiki.org/wiki/Manual:$wgDefaultUserOptions)：

```
// in LocalSettings.php:
$wgDefaultUserOptions = [
    'forceeditsummary' => 1
]; 
```

启用此选项后，在`Save page`没有编辑摘要的情况下点击后，您必须`Save page`再次点击才能保存编辑。页面顶部会显示填写编辑摘要的提醒，但无论如何都会进行第二次保存。

正如我上面所说，经验表明许多编辑在此设置下会丢失。如果您认为人们忘记保存两次，而不仅仅是拒绝填写编辑摘要，您可以[使用 MediaWiki 样式表](https://www.mediawiki.org/wiki/Manual:Interface/Stylesheets)使警告更加明显，例如

```
#mw-missingsummary {
    background-color: #FFFFCC;
    color: #000000;
    border: 3px double #CC0000;
    margin: 0 0 1em;
    padding: 0.5em 1em;
} 
```

请注意，默认设置仅用于未注册用户和未自定义首选项的用户。注册用户可以随时覆盖该值：首选项 → 编辑 → 输入空白编辑摘要时提示我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-13T17:54:13.297

我刚刚在我从事的一个项目中实现了这个功能。它工作正常，并且与所有内置功能配合得很好，从非常早期的 MediaWiki 版本到 master 分支 (2015-12-13) 的当前版本。

我把这个放在我的`LocalSettings.php`：

```
function forceEditSummary($editor, $text, $section, &$error, $summary) {
    // Override the setting so far based on wpIgnoreBlankSummary form
    // variable, forceeditsummary user option and whether the page is the
    // editor’s own user or talk page:
    $editor->allowBlankSummary = false;
    return true; // continue processing
}

$wgHooks['EditFilter'][] = 'forceEditSummary'; 
```

MediaWiki:Missingsummary 和 MediaWiki:Missingcommentheader ¹消息应该被编辑为真实（第二次提交将不再通过）。

我使用[`EditFilter`钩子](https://www.mediawiki.org/wiki/Manual:Hooks/EditFilter)来设置`allowBlankSummary`编辑器（`EditPage`对象）的成员，从而覆盖之前关于编辑是否应该通过空白摘要的决定，或者不。有关原始设置的详细信息，请参见[类的](https://www.mediawiki.org/wiki/Manual:EditPage.php)[源代码。`EditPage`](https://www.mediawiki.org/wiki/Manual:EditPage.php)

有关更多选项（以及强调信息的补充样式`missingsummary`），请阅读[Nemo 的回答](https://stackoverflow.com/a/16762926/2157640)。

[¹消息在哪里`missingcommentheader`使用？我在代码中看到它，但我不知道什么时候`$editor->section == 'new'`。可能是我从未使用过的 MediaWiki 的一个功能……</sub>]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T23:36:26.087

你可以试试这个扩展：[https](https://www.mediawiki.org/wiki/Extension:SummaryRequired) ://www.mediawiki.org/wiki/Extension:SummaryRequired 。

> **这个扩展能做什么？**
> 
> 此扩展程序强制用户输入评论。

# javascript - 向页面添加多个元素

> ID：16158916
> 
> 赞同：0
> 
> 时间：2013-04-23T00:22:53.713
> 
> 标签：javascript, jquery

我创建了一个 JQuery 工具提示插件，并将其应用于一些 A 标签。

对于每个 A 标记，应该有一个与之关联的不同工具提示，所以我有：

```
var $tooltip = $("<div>").attr("id", tooltip.id).attr("class", options.class).appendTo('body'); 
```

其中工具提示 id 包含按如下方式创建的随机数：

```
id: "Tooltip_" + Math.floor(Math.random() * (9999 - 2000 + 1) + 2000) 
```

该插件表现不佳。我检查了添加到页面的 HTML。

页面中只添加了一个工具提示...始终相同。

我怎样才能解决这个问题？我究竟做错了什么？我有一个例子：[http ://codepen.io/mdmoura/pen/wgapv](http://codepen.io/mdmoura/pen/wgapv)

插件代码如下：

```
$(document).ready(function () {
  $("table a").Tooltip(); 
});

// Tooltip
(function ($) {

  $.fn.Tooltip = function (options) {

    var defaults = {          
      class: 'Tooltip',
      delay: [200, 200],
      offset: [0, -10],
      hide: function ($element, $tooltip) {
        $tooltip.fadeOut(200);
      },
      show: function ($element, $tooltip) {
        $tooltip.fadeIn(200);
      }
    };

    var options = $.extend({}, defaults, options);   
    var tooltip = { id: "Tooltip_" + Math.floor(Math.random() * (9999 - 2000 + 1) + 2000), ready: false, timer: null, title: '' };

    $(this).each(function (e) {     

      var $this = $(this);
      tooltip.title = $this.attr('title') || '';

      $this.mouseenter(function (e) {                  

        if (tooltip.ready) {
          var $tooltip = $("#" + tooltip.id);
        } else {
          var $tooltip = $("<div>").attr("id", tooltip.id).attr("class", options.class).appendTo('body');
          $tooltip.html(tooltip.title);
          tooltip.ready = true;
          $this.attr('title', '');
        }

        var position = [e.clientX + options.offset[0], e.clientY + options.offset[1]];

        $tooltip.css({ left: position[0] + 'px', top: position[1] + 'px' });

        tooltip.timer = window.setTimeout(function () {
          options.show($this, $tooltip.stop(true, true));
        }, options.delay[0] || 0);

        $("#" + tooltip.id).mouseenter(function () {
          window.clearTimeout(tooltip.timer);
          tooltip.timer = null;
        }); // Tooltip enter

        $("#" + tooltip.id).mouseleave(function () {
          tooltip.timer = setTimeout(function () {
            options.hide($this, $tooltip);
          }, 0);
        });

      }), // Mouse enter

      $this.mouseleave(function (e) {
        tooltip.timer = setTimeout(function () {
          options.hide($this, $("#" + tooltip.id).stop(true, true));
        }, options.delay[1] || 0);
      }) // Mouse leave  

    }); // Each

  }; // Tooltip

})(jQuery); // JQuery 
```

HTML如下：

```
<table>
  <tr><td><a href="#" title="Tooltip 01 Text">Tooltip 01</a></td></tr>
  <tr><td><a href="#" title="Tooltip 02 Text">Tooltip 02</a></td></tr>
  <tr><td><a href="#" title="Tooltip 03 Text">Tooltip 03</a></td></tr>
  <tr><td><a href="#" title="Tooltip 04 Text">Tooltip 04</a></td></tr>
  <tr><td><a href="#" title="Tooltip 05 Text">Tooltip 05</a></td></tr>
</table> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:29:40.433

你在循环`var tooltip`之外定义了`this.each`，这意味着只有一个`tooltip`实例

```
(function ($) {

  $.fn.Tooltip = function (options) {

    var defaults = {          
      class: 'Tooltip',
      delay: [200, 200],
      offset: [0, -10],
      hide: function ($element, $tooltip) {
        $tooltip.fadeOut(200);
      },
      show: function ($element, $tooltip) {
        $tooltip.fadeIn(200);
      }
    };

    var options = $.extend({}, defaults, options);   

    $(this).each(function (e) {     
        //moved this inside the loop
        var tooltip = { id: "Tooltip_" + Math.floor(Math.random() * (9999 - 2000 + 1) + 2000), ready: false, timer: null, title: '' };

      var $this = $(this);
      tooltip.title = $this.attr('title') || '';

      $this.mouseenter(function (e) {                  

        if (tooltip.ready) {
          var $tooltip = $("#" + tooltip.id);
        } else {
          var $tooltip = $("<div>").attr("id", tooltip.id).attr("class", options.class).appendTo('body');
          $tooltip.html(tooltip.title);
          tooltip.ready = true;
          $this.attr('title', '');
        }

        var position = [e.clientX + options.offset[0], e.clientY + options.offset[1]];

        $tooltip.css({ left: position[0] + 'px', top: position[1] + 'px' });

        tooltip.timer = window.setTimeout(function () {
          options.show($this, $tooltip.stop(true, true));
        }, options.delay[0] || 0);

        $("#" + tooltip.id).mouseenter(function () {
          window.clearTimeout(tooltip.timer);
          tooltip.timer = null;
        }); // Tooltip enter

        $("#" + tooltip.id).mouseleave(function () {
          tooltip.timer = setTimeout(function () {
            options.hide($this, $tooltip);
          }, 0);
        });

      }), // Mouse enter

      $this.mouseleave(function (e) {
        tooltip.timer = setTimeout(function () {
          options.hide($this, $("#" + tooltip.id).stop(true, true));
        }, options.delay[1] || 0);
      }) // Mouse leave  

    }); // Each

  }; // Tooltip

})(jQuery); 
```

演示：[CodePen](http://codepen.io/arunpjohny/pen/zjpGe)

# php - Codeigniter：活动记录插入唯一值

> ID：16158917
> 
> 赞同：1
> 
> 时间：2013-04-23T00:23:03.213
> 
> 标签：php, codeigniter

我正在从 Google API 导入 GMail 联系人，只想将唯一的电子邮件 ID 保存到数据库中。是否可以使用 codeigniter 的 Active Record 插入唯一记录？CodeIgniter 是否提供开箱即用的功能？
如果我使列唯一，则查询将引发异常。在深入研究文档后，我了解到 CodeIgniter 不提供`try catch`块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:42:23.757

您的电子邮件字段在表索引中必须是唯一的。

```
$query_string = $this->db->insert_string('table', $data);
$query_string = str_replace('INSERT INTO', 'INSERT IGNORE INTO', $query_string);

$req = $this->db->query($query_string);

if($req->affected_rows() == 1) {
   //data inserted
} else {
   //email exists already
} 
```

> 如果使用 IGNORE 关键字，则执行 INSERT 语句时发生的错误将被视为警告。例如，如果没有 IGNORE，复制表中现有 UNIQUE 索引或 PRIMARY KEY 值的行会导致重复键错误并且语句被中止。使用 IGNORE，行仍然没有插入，但不会发出错误。如果未指定 IGNORE，将触发错误的数据转换将中止语句。使用 IGNORE，将无效值调整为最接近的值并插入；会产生警告，但语句不会中止。

[MySQL INSERT 语法](http://dev.mysql.com/doc/refman/5.0/en/insert.html?ff=nopfpls)

[CI 数据库助手](http://ellislab.com/codeigniter/user-guide/database/helpers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:16:26.913

您可以创建一个基本模型（application/core/MY_Model.php）并实现一个保存功能，如果新就插入，如果存在则更新。从中扩展您的模型。

[这是来自http://thephpcode.com/blog/codeigniter/a-smart-codeigniter-model](http://thephpcode.com/blog/codeigniter/a-smart-codeigniter-model)的摘录

```
public function save($data,$tablename="")
{
if($tablename=="")
{
    $tablename = $this->table;
}
$op = 'update';
$keyExists = FALSE;
$fields = $this->db->field_data($tablename);
foreach ($fields as $field)
{
    if($field->primary_key==1)
    {
        $keyExists = TRUE;
        if(isset($data[$field->name]))
        {
            $this->db->where($field->name, $data[$field->name]);
        }
        else
        {
            $op = 'insert';
        }
    }
}

if($keyExists && $op=='update')
{
    $this->db->set($data);
    $this->db->update($tablename);
    if($this->db->affected_rows()==1)
    {
        return $this->db->affected_rows();
    }
}

$this->db->insert($tablename,$data);

return $this->db->affected_rows();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T05:20:03.080

如果您的数据来自 from，CI 提供了一个`form_validation`可以在服务器端验证您的表单的类。通过 form_validation 有一个称为`is_unique`检查给定值是否已存在于数据库中的规则。[你可以在这里](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html)看到完整而清晰的解释

或者，您可以在将电子邮件插入该 unqiue 列之前手动检查它。

```
$this->db->select('email');
$this->db->where(array('email'=>$email));
$query = $this->db->get('yourtable');
if($query->num_rows() > 0){
    // the query returned data, so the email already exist.
}else{
    // the email not exists, so you can insert it.
} 
```

# ios - 在 iOS 6.1 上的指令“svc 128”之后接收信号 SIGTRAP

> ID：16158922
> 
> 赞同：0
> 
> 时间：2013-04-23T00:23:17.083
> 
> 标签：ios, assembly, arm

每隔一段时间，在 iPad（OS 6.1.3，SDK 6.1）上调试应用程序时，程序会在收到`SIGTRAP`信号后暂停。我首先注意到这发生在`stat`函数内部 (from `/usr/include/stat.h`)，但它也发生在其他一些地方，例如`semwait_signal`(from `nanosleep`)。最明显的模式是它总是在运行指令后立即发生`svc #128`。在 的情况下`stat`，它返回`0`并且没有错误，因此它似乎不表示任何类型的故障状态。

有没有其他人经历过这种情况，或者知道如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:06:43.527

不幸的是，我没有发现为什么`SIGTRAP`这些基本功能会引发这些问题，但是当我解决了我的 iOS 项目的一个更大问题时，这种症状就消失了。

我链接的应用程序目标和静态库目标没有一致地定义预处理器宏`_DEBUG`，这会生成一些奇怪的程序集。它们具有相同级别的优化，但显然包含/排除`_DEBUG`产生了足够的差异来导致问题。

# algorithm - 如何在线性时间内反转图形？

> ID：16158926
> 
> 赞同：11
> 
> 时间：2013-04-23T00:23:32.010
> 
> 标签：algorithm, data-structures, graph, dijkstra

我知道有两种方法可以表示我的图表：一种是使用矩阵，另一种是使用列表。

如果我使用矩阵，我必须翻转矩阵中的所有位。这不需要 O(V^2) 时间吗？

如果我使用一个列表，我是不是必须一个一个地遍历每个列表并创建一个新集合？这似乎需要 O(V+E) 时间，这是线性的。我对么？

所以，我在这里有另一个问题。例如，考虑我在我的图（矩阵或列表）上使用 Dijkstra 算法，并且我们使用优先级队列作为场景背后的数据结构。图表示和数据结构的使用有什么关系吗？会不会影响算法的性能？

假设我要使用表示列表和 Dijkstra 算法的优先级队列，矩阵和使用 Dijkstra 的优先级队列之间会有区别吗？

我猜它只与`makeQueue`操作有关？或者他们根本没有什么不同？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-07-06T02:46:52.150

反转有向图的邻接表可以在线性时间内完成。我们只遍历图一次。复杂度的顺序将是 O(|V|+|E|)。

1.  维护 Adjaceny Lists 的 HashMap，其中键是顶点标签，值是键顶点的相邻顶点的 ArrayList。
2.  为了反转，创建一个相同类型的新 HashMap。扫描原始哈希图，并为您遇到的每个键，遍历相应的列表。
3.  对于值列表中找到的每个顶点，在新的hashMap中添加一个key，将原始HashMap的key作为一个条目放入ArrayList中，对应于新HashMap中的新key。

```
public static HashMap<Character,ArrayList <Character>> getReversedAdjLists(RGraph g)
{
    HashMap <Character, ArrayList<Character>> revAdjListMap = new HashMap <Character, ArrayList<Character>>();
    Set <Character> oldLabelSet = g.adjListMap.keySet();

    for(char oldLabel:oldLabelSet)
    {
        ArrayList<Character> oldLabelList = g.adjListMap.get(oldLabel);

        for (char newLabel : oldLabelList)
        {
            ArrayList<Character> newLabelList = revAdjListMap.get(newLabel);

            if (newLabelList == null)
            {
                newLabelList = new ArrayList<Character>();
                newLabelList.add(oldLabel);
            }
            else if ( ! newLabelList.contains(oldLabel))
            {
                newLabelList.add(oldLabel);
            }

            revAdjListMap.put(newLabel, newLabelList);
        }
    }

    return revAdjListMap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:35:59.873

我认为通过遍历列表来反转图形需要 O(V ² )，因为对于每个顶点，您必须添加或删除 (V-1) 边。

至于 Dijkstra 的算法，据我了解，如果您将图形表示为矩阵或列表，则该算法需要 O(V ² )，但其他一些数据结构更快。已知最快的是斐波那契堆，它给出 O(E + VlogV)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-21T03:35:07.550

由于我看到一些评论询问**就地**图形转置（反转），这是我的版本。请注意，这仅适用于 DAG。欢迎提供反馈和改进建议

```
def transpose(G):
    """
    Return the transpose of a directed graph i.e. all the edges are reversed (In Place)
    """
    #note this is not a standard lib function afaik and you would have to 
    #implement topological sort but that should be easy
    topsort = topological_sort(G) 
    topsort.reverse() # we want to process starting from sink node
    for v in topsort:
        for node in G[v]:
            G[node].append(v)
        #  remove all older members of the vertex 'v'  
        G[v] = []
    print(G) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-29T18:29:01.830

```
G = {"A":["B", "C","D"],"B":["C", "E"], "C":["D", "E"],"D":[],"E":["D"] }
res ={}
for k in G.keys():
    for val in G[k]:
        if val not in res.keys():
            res[val] = [k]
        else:
            res[val].append(k)

print(res) 
```

# iphone - NSOperation 中显示的 UIAlertView - 视图控制器无响应

> ID：16158929
> 
> 赞同：0
> 
> 时间：2013-04-23T00:24:21.427
> 
> 标签：iphone, ios, objective-c, nsoperation

我有一个`NSOperation`做一些繁重计算的子类。它也有一个代表。

如果用户没有提供正确的输入，我会在`main`方法中验证它，并通过`performSelectorOnMainThread`我创建并显示一个警报（来自我的`NSOperation`子类），然后我这样调用委托方法：

```
 -(void) main{
    [self performSelectorOnMainThread:@selector(showAnAlert)
                                       withObject:nil
                                    waitUntilDone:YES];
                [self cancel]; //I need to cancel the operation
                return; //don't want to finish main running.

    }

- (void) showAnAlert{
   //Create an alert here
   [alert show];
}

And in my VC I have this: 

- (void) aDelegateMethodFromMyOperation{
   [self.textField setEndEditing:YES];
} 
```

现在的问题是，一旦我解除警报，我就无法在我的 textField 中输入任何文本......它会在点击时显示键盘......但它不会接受我的输入......这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:34:42.260

也许尝试：

```
[textField becomeFirstResponder]; 
```

由于您在 中切换多个 UI 元素`NSOperation`，因此文本字段可能无法重新获得完全控制。

# orchardcms - 尝试更改 Orchard CMS 中的导航时出错

> ID：16158930
> 
> 赞同：0
> 
> 时间：2013-04-23T00:24:25.063
> 
> 标签：orchardcms, orchardcms-1.6

每次尝试向导航添加新项目（下面的第一个错误）或更改导航中菜单项的顺序（下面的第二个错误）时，我都会收到这些错误。我根本无法更改我的菜单。有什么想法可能导致这种情况吗？

**第一个错误**

w3wp.exe 中出现未处理的 Microsft.NET 框架异常 [9288]

**第二个错误**

“/”应用程序中的服务器错误。

序列不包含任何元素

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidOperationException：序列不包含任何元素

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[InvalidOperationException: Sequence contains no elements]
   System.Linq.Enumerable.First(IEnumerable`1 source) +514
   Cwm.Web.Infrastructure.ConstructorParametersModelBinder.CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType) +666
   System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +151
   System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +484
   System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +153
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +854224
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__19() +40
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +15
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +65
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +51
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +42
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +51
   Orchard.Mvc.Routes.HttpAsyncHandler.EndProcessRequest(IAsyncResult result) in c:\Users\sebros\My Projects\Orchard\src\Orchard\Mvc\Routes\ShellRoute.cs:162
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +606
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288 
```

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.18034

# three.js - Three.js 多边形三角剖分在伪重复点中失败

> ID：16158931
> 
> 赞同：6
> 
> 时间：2013-04-23T00:24:37.550
> 
> 标签：three.js, polygon, boolean-operations

在[three.js](https://github.com/mrdoob/three.js/blob/master/build/three.js)中有一个函数`triangulateShape()`。现在，我遇到了使用 Javascript Clipper 简化的多边形三角剖分失败。Clipper 中的简化是使用联合来完成的。[维基百科文章](http://en.wikipedia.org/wiki/Simple_polygon)将联合定义为找到包含两个简单多边形之一内的区域的一个或多个简单多边形。同一篇文章说，在简单多边形中，“每个顶点恰好有两条边相交”，并且还确定了一个弱简单的多边形，其中边可以相交，但没有提到边不相交但一些或多个顶点相交的边缘情况. 所以有点不清楚这种情况是简单的多边形还是弱简单的多边形。

Clipper 选择了一种宽​​松的方法：简单的多边形可以有这些类似接触（或伪重复）的顶点。[这种 Clipper 风格的许可方法](https://sourceforge.net/p/polyclipping/discussion/1148419/thread/4e614a38/)导致生成的简单多边形并不像 three.js:s 所`triangulateShape()`期望的那样简单。

下图显示了这种边缘情况的两个示例。左边的多边形是一个“简单”多边形，红点是一个“重复”。右边也是一个“简单”多边形，但红点是一个“重复”。

![在此处输入图像描述](https://i.stack.imgur.com/qIJOW.png)

`triangulateShape()`在这些情况下会失败，因为它会跟踪数组中的点`allPointsMap`并从那里检查该点是否重复。要删除这些重复项，我有两个选择：

* * *

`OPTION 1.`

更改 Javascript Clipper 内部代码以使用额外参数处理这些，例如。`breakPolygonByWeakDuplicates`对于`SimplifyPolygon()`和`SimplifyPolygons()`。正如 Angus Johnson[在他的帖子](https://sourceforge.net/p/polyclipping/discussion/1148419/thread/4e614a38/)中所描述的那样，变化将类似于：

在 IntersectEdges() 方法中，将以下内容从 ...

```
if ( e1Contributing && e2contributing )
{
  如果 ( e1stops || e2stops ||
    (e1Wc != 0 && e1Wc != 1) || (e2Wc != 0 && e2Wc != 1) ||
    (e1->polyType != e2->polyType && m_ClipType != ctXor) )
      AddLocalMaxPoly(e1, e2, pt);
  别的
      DoBothEdges（e1，e2，pt）；
}

```

至 ...

```
if ( e1Contributing && e2contributing )
{
    AddLocalMaxPoly(e1, e2, pt);
    AddLocalMinPoly(e1, e2, pt);
}

```

更改非常简单，但原来的 Angus Johnson Clipper 和 Javascript Clipper 将不再兼容。当然，如果原来的 Clipper 会做出改变，Javascript Clipper 也会跟着做。

* * *

`OPTION 2.`

更改 three.js`triangulateShape()`源代码以接受伪重复。

* * *

我的问题是：**应该在哪一端完成这种额外的简化程序？第一端是创建端（Clipper），另一端是三角剖分端（three.js）。**

我不知道各种 3D 库中的多边形三角剖分例程，所以无法想象三角剖分例程一般有多么宽松。如果有人知道这个领域，他/她可以给出更复杂的答案。

另外我不知道其他布尔库如何处理联合或简化这种伪重复。Clipper 允许使用简单多边形的方式肯定是有原因的（例如，与其他布尔库的兼容性），但这肯定会导致在 three.js 中对多边形进行三角剖分时出现问题。

参考这里是three.js的三角代码：

```
triangulateShape: function ( contour, holes ) {

    var shapeWithoutHoles = THREE.Shape.Utils.removeHoles( contour, holes );

    var shape = shapeWithoutHoles.shape,
        allpoints = shapeWithoutHoles.allpoints,
        isolatedPts = shapeWithoutHoles.isolatedPts;

    var triangles = THREE.FontUtils.Triangulate( shape, false ); // True returns indices for points of spooled shape

    // To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.

    //console.log( "triangles",triangles, triangles.length );
    //console.log( "allpoints",allpoints, allpoints.length );

    var i, il, f, face,
        key, index,
        allPointsMap = {},
        isolatedPointsMap = {};

    // prepare all points map

    for ( i = 0, il = allpoints.length; i < il; i ++ ) {

        key = allpoints[ i ].x + ":" + allpoints[ i ].y;

        if ( allPointsMap[ key ] !== undefined ) {

            console.log( "Duplicate point", key );

        }

        allPointsMap[ key ] = i;

    }

    // check all face vertices against all points map

    for ( i = 0, il = triangles.length; i < il; i ++ ) {

        face = triangles[ i ];

        for ( f = 0; f < 3; f ++ ) {

            key = face[ f ].x + ":" + face[ f ].y;

            index = allPointsMap[ key ];

            if ( index !== undefined ) {

                face[ f ] = index;

            }

        }

    }

    // check isolated points vertices against all points map

    for ( i = 0, il = isolatedPts.length; i < il; i ++ ) {

        face = isolatedPts[ i ];

        for ( f = 0; f < 3; f ++ ) {

            key = face[ f ].x + ":" + face[ f ].y;

            index = allPointsMap[ key ];

            if ( index !== undefined ) {

                face[ f ] = index;

            }

        }

    }

    return triangles.concat( isolatedPts );

}, // end triangulate shapes 
```

* * *

更新：我制作了一个 SVG [http://jsbin.com/ugimab/1](http://jsbin.com/ugimab/1)，其中是一个多边形示例，该多边形具有点 (150,150)，它是弱重复或伪重复。以下显示了表示此多边形的各种方法：

```
var weakDuplicate1 = [{"X":100,"Y":200},{"X":150,"Y":150},{"X":100,"Y":100},{"X" :200,"Y":100},{"X":150,"Y":150},{"X":200,"Y":200}];

var weakDuplicate2 = [100,200, 150,150, 100,100, 200,100, 150,150, 200,200];

var weakDuplicate3 = "M100,200 L150,150 L100,100 L200,100 L150,150 L200,200Z";

```

* * *

更新：如果有人设法找到一种解决方案来对具有这种弱重复点的多边形进行三角剖分，那么如果您发布您的发现将会非常有帮助。

* * *

更新：测试选项 1，但没有成功：http: [//jsbin.com/owivew/1](http://jsbin.com/owivew/1)。多边形仍然是一个整体，尽管它应该被分成两部分。也许安格斯约翰逊（快船的创造者）可以提供更好的解决方案。

* * *

更新：这是一个更复杂的“简单”多边形（在 Clipper 中简化后）。所有似乎在一起的点都是完全相同的。要将其划分为真正简单的多边形，需要将其分成几部分。我的眼睛说这里有 4 个底部多边形和一个（更大的）带有孔的上部多边形，因此总体简化这将产生 5 个外部多边形和 1 个孔。或者，一个具有 5 个孔的外部多边形。或者可能是其他一些外部和孔的组合。它可以通过许多不同的方式进行简化。

小提琴位于[http://jsbin.com/ugimab/3](http://jsbin.com/ugimab/3)（也是多边形的 JSON 版本）。

![在此处输入图像描述](https://i.stack.imgur.com/3Hhwx.png)

以下是从 0 到 25 编号的点：

![在此处输入图像描述](https://i.stack.imgur.com/ouqVn.png)

图像中的顶点 2,11,14,25 是相同的坐标，所以它是一个“伪多顶点”。Vertex3 不是重复的，但它触及边缘 6-7。

* * *

更新：

[基于移动重复点的建议方法](https://stackoverflow.com/a/16183613/1691517)似乎有效。如果将复制点替换为复制坐标一定距离上的两个点，产生“断笔尖”效果，三角剖分就可以了，因为生成的多边形是真正的简单多边形，这是三角剖分的要求。轮廓和孔之间以及孔和孔之间也不允许重复。下图显示了这种方法的效果。此处的距离为 10px 以显示效果，但实际上例如。0.001 足以使多边形变得简单。Three.js r58 中的默认三角测量器也无法按预期工作，但如果将其更改为 Poly2tri，则一切正常。这个过程在这个相当长的错误报告中描述：[https://github.com/mrdoob/three.js/issues/3386](https://github.com/mrdoob/three.js/issues/3386)。

![在此处输入图像描述](https://i.stack.imgur.com/mr8U2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T04:53:10.773

您可以编写一个函数来检测重复顶点并将它们向后移动 1px 以使它们离散（它们不再共享公共边）。这样就不会有更多的共同边缘，也不会产生错误，但视觉结果看起来仍然相同。

一种粗略的解决方案，但它可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-03T14:24:16.980

中使用的三角剖分解决方案存在几个问题`three.js`。还有其他几个可用的 javascript triangulation 库，很可能在未来，当前的库将被交换为其他东西，例如`earcut.js`. [在 GitHub 上的这个问题中](https://github.com/mrdoob/three.js/issues/5959)有一个关于这个的讨论。

您的自相交边缘问题对于耳切来说不是问题，正如[此处的多查看器所示](https://rawgit.com/Wilt/three.js_triangulation/master/viewers/multiple.html?shape=L-shape_with_four_intersecting_points.json)。

* * *

如果您已经想在您的项目中使用不同的三角测量解决方案，我想参考我制作的[three.js 三角测量库（一个适配器）](https://github.com/Wilt/three.js_triangulation)。该适配器允许将其他三个三角测量库无缝连接到您的 three.js 项目：

*   [earcut](https://github.com/mapbox/earcut) - 耳切三角测量库
*   [poly2tri](https://github.com/r3mi/poly2tri.js) - poly2tri 三角剖分库
*   [libtess](https://github.com/brendankenny/libtess.js/) - libtess 曲面细分库

您需要做的就是包含该`triangulation.js`文件：

```
<script src="triangulation.js"></script> 
```

`setLibrary`并使用以下方法设置您选择的库：

```
THREE.Triangulation.setLibrary('earcut'); 
```

根据您选择的库，您显然需要为库本身嵌入文件。目前需要`libtess`额外`tessy.js`的，可以在存储库中找到。

**[在 GitHub 上](https://github.com/Wilt/three.js_triangulation)**阅读有关该项目的更多信息。

# php - PHP 不遵循重定向

> ID：16158936
> 
> 赞同：0
> 
> 时间：2013-04-23T00:25:07.050
> 
> 标签：php, image, http, redirect

我在 PHP 5.2 上，我正在使用`fopen()`. 但是我遇到的一个问题是一些图像将我的服务器从直接图像链接重定向到图像页面（不是图像，在网页中显示图像）。

我已经尝试添加`max-redicts`，`fopen()`但是当我这样检查时它不会打开网址

```
$opts = array(
   'http' => array(
   'max-redirects' => '0')
);

$context = stream_context_create($opts);

$file = fopen($url,"rb", false, $context);
if(!$file)
   die("Couldn't open URL"); 
```

# pom.xml - 我在哪里可以找到构建 P2 存储库的 tycho pom first 功能项目？

> ID：16158940
> 
> 赞同：3
> 
> 时间：2013-04-23T00:25:33.223
> 
> 标签：pom.xml, tycho, p2

我想从驻留在 maven Central 上的 OSGI 包生成 P2 存储库。我有

1.  使用 dependencies=consider 定义了一个 POM 优先的功能项目
2.  使用范围编译定义 Maven 依赖项并键入 jar
3.  定义了一个 feature.xml，其中包含对 manifest.mf 中声明的包符号名称和版本的精确引用

当我尝试构建该功能时，我收到

```
No solution found because the problem is unsatisfiable.": ["Unable to satisfy dependency from org.codehaus.jackson.feature.group 1.9.1.qualifier to jackson-mapper-lgpl [1.9.12,1.9.13).", "Unable to satisfy dependency from org.codehaus.jackson.feature.group 1.9.1.qualifier to jackson-core-lgpl [1.9.12,1.9.13).", "No solution found because the problem is unsatisfiable."] 
```

其中*org.codehaus.jackson.feature*是我正在构建的功能，而*jackson-mapper-lgpl [1.9.12,1.9.13)*和*jackson-core-lgpl [1.9.12,1.9.13)*是 OSGI 的规范我试图包含的捆绑包。

当我打开调试模式时，我看到正在找到组件，这使得行为更加奇怪：

```
[DEBUG] P2Resolver: artifact org.codehaus.jackson:jackson-core-lgpl:1.9.12 at location /home/jsuess/.m2/repository/org/codehaus/jackson/jackson-core-lgpl/1.9.12/jackson-core-lgpl-1.9.12.jar resolves installable unit jackson-core-lgpl/1.9.12
[DEBUG] P2resolver.addMavenArtifact org.codehaus.jackson:jackson-mapper-lgpl:jar:1.9.12:compile
[DEBUG] P2Resolver: artifact org.codehaus.jackson:jackson-mapper-lgpl:1.9.12 at location /home/jsuess/.m2/repository/org/codehaus/jackson/jackson-mapper-lgpl/1.9.12/jackson-mapper-lgpl-1.9.12.jar resolves installable unit jackson-mapper-lgpl/1.9.12
[DEBUG] Registered artifact repository org.eclipse.tycho.repository.registry.facade.RepositoryBlackboardKey(uri=file:/resolution-context-artifacts@/home/jsuess/workspace/org.codehaus.jackson/features/org.codehaus.jackson) 
```

我相信从 maven 获取包并创建 P2 一定是一个常见的用例，所以我想知道是否有人可以指出我可以用作模板的工作示例 POM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T08:50:15.510

请注意，Tycho 构建中的每个模块都有一个单独的目标平台。

因此，如果您正在使用`pomDependencies=consider`，但您仅配置此开关和/或`eclipse-feature`模块上的依赖项，则 POM 依赖项将仅在模块的目标平台中。如果您随后尝试将该功能打包到一个`eclipse-repository`中，则该模块的依赖关系解析将失败，因为该功能缺少（传递）依赖关系。

在大多数情况下，您不需要每个模块有不同的目标平台，因此通常您应该将所有[目标平台配置](http://wiki.eclipse.org/Tycho/Target_Platform)和 POM 依赖项放入父 POM。

* * *

如果您已经这样做了，但您的某个模块似乎仍然具有不同的目标平台，请确保该模块的父 POM 引用是正确的 - 并且您没有引用父 POM 的旧版本。

# javascript - JavaScript 类未捕获的 TypeError

> ID：16158947
> 
> 赞同：1
> 
> 时间：2013-04-23T00:26:47.293
> 
> 标签：javascript, onload

我正在尝试构建一个 JavaScript 类，但我遇到了这一行的问题：
`this.ctx.drawImage(img.src, 0, 0, img.width, img.height);`

出现的错误消息是：**Uncaught TypeError: Cannot call method 'drawImage' of undefined**

```
function jraw(id){
    this.canvas = document.getElementById(id);
    this.ctx = this.canvas.getContext('2d');
    this.setImage = function(url){
        var img = new Image();
        img.src = url;
        img.onload = function(){
            this.ctx.drawImage(img.src, 0, 0, img.width, img.height);
        };
    };
} 
```

然后我这样称呼它：

```
<script>
    var j = new jraw("canvas");
    j.setImage("/images/my_image.jpg");
</script> 
```

我如何获得 onload 以访问该`ctx`属性？我做了一些测试，它在 setImage 方法中看到了 ctx 属性，但没有看到 onload 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:32:07.627

这是一种选择：

```
function jraw(id){
    this.canvas = document.getElementById(id);
    this.ctx = this.canvas.getContext('2d');
    var that = this;
    this.setImage = function(url){
        var img = new Image();
        img.src = url;
        img.onload = function(){
            that.ctx.drawImage(img, 0, 0, img.width, img.height);
        };
   };
} 
```

虽然不是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:37:04.993

尝试

```
this.setImage = function(url){
    var that = this;
    var img = new Image();
    img.src = url;
    img.onload = function(){
        that.ctx.drawImage(img, 0, 0, img.width, img.height);
    };
}; 
```

[.drawImage()](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Using_images#drawImage)的第一个参数也是图像对象，而不是`url`

演示：[小提琴](http://jsfiddle.net/arunpjohny/Qh7rp/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T00:36:30.613

我相信问题在于，这在您的 onload 函数中与在您的 setImage 方法中有所不同。当 this 与方法一起使用时，它将绑定到该函数/方法是其一部分的对象，当它是一个函数时，它将绑定到全局对象。

您需要将此设置为 onload 方法之外的变量，或从 onload 方法中访问全局对象（几乎总是窗口对象）。

# ruby-on-rails - 如何在 Rails 中提供非静态文件

> ID：16158949
> 
> 赞同：0
> 
> 时间：2013-04-23T00:27:18.170
> 
> 标签：ruby-on-rails

我有一个动作，它生成一个 PDF 文件并将其保存在 /public/output.pdf 中。

当我设置

```
config.serve_static_assets = false 
```

找不到这个文件。

怎么了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:36:52.097

从[文档](http://guides.rubyonrails.org/configuring.html)中：

> “config.serve_static_assets 将 Rails 本身配置为提供静态资产。默认为 true，但在生产环境中关闭，因为用于运行应用程序的服务器软件（例如 Nginx 或 Apache）应该提供静态资产。与默认设置不同在运行（绝对不推荐！）或使用 WEBrick 在生产模式下测试您的应用程序时，这是真的。否则，您将无法使用页面缓存，并且对公共目录下定期存在的文件的请求无论如何都会影响您的 Rails 应用程序。

这意味着如果您将其设置为 false，Rails 将不会从您的公用文件夹中提供任何资产，因为它假定前端 Web 服务器 (apache/nginx) 将处理它。这吸取了 Rails 上的负载，因为前端服务器在直接提供文件时效率要高得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:39:38.300

经过测试，我得出了这样的结论：

1) 使用命令时

```
rails s -e production 
```

Rails 只会提供静态文件。编译资产后创建的任何其他文件都不会被发现。

要处理这个问题，您需要在 Apache、Nginx 或其他 Web 服务器下执行您的应用程序。这些网络服务器将为您提供这些文件。

这看起来很明显，但不适合初学者。

# iphone - 阻止 init 并强制 initWithOption

> ID：16158952
> 
> 赞同：0
> 
> 时间：2013-04-23T00:27:47.913
> 
> 标签：iphone, ios

我知道您可以拥有@private 成员变量，但是否有办法阻止代码调用您的类的默认 init: 方法并强制创建和使用您的对象的代码仅使用另一个初始化程序，例如 initWithOptions：

我浏览了一些 Objective-C 书籍，但没有立即看到任何东西。

我已经看到堆栈溢出主题建议抛出异常，或断言/中止/[如何防止使用除我在 Objective-C 中的自定义方法之外的其他初始化方法](https://stackoverflow.com/questions/6646440/how-to-prevent-usage-of-other-init-methods-other-than-my-custom-method-in-object)

以及 depreciated 关键字的使用 [如何在 iPhone Objective C 头文件中将函数标记为已弃用？](https://stackoverflow.com/questions/1443599/how-do-i-flag-a-function-as-being-deprecated-in-an-iphone-objective-c-header-fil)

这两个似乎都不是优雅的解决方案，在Objective-C中真的没有面向语言的优雅方式来说doesNotImplmentSelector ...？

我来自 C++ 背景，只是有点像隐藏默认构造函数的能力......

R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:45:33.510

我认为标准的做法是使用一组默认选项调用 initWithOptions: 的 init 实现。

# javascript - 在与 Closure Compiler 兼容的 Javascript 中生成 getter 和 setter

> ID：16158957
> 
> 赞同：2
> 
> 时间：2013-04-23T00:29:03.130
> 
> 标签：javascript, google-closure

我正在编写一个库，希望在高级模式下与 Closure Compiler 兼容。库中的大多数对象都维护一个内部属性对象，这些属性通常是 API 的一部分，这导致我的源文件充满了很多这样的函数。

```
/*
 * Get name.
 */
Layer.prototype.getName = function() {
    return this.attrs.name;
}
/*
 * Set name.
 */
Layer.prototype.setName = function(name) {
    this.attrs.name = name;
} 
```

我可以想出十亿种方法来优化它，以稍微整理一下我的代码。一个例子：KineticJS，[根据这个相关的问题](https://stackoverflow.com/questions/12240591/google-closure-and-generated-getters-setters)，做了一些像这样的事情：

```
Global.addGettersSetters = function(obj, property) {
    obj['get'+property] = function() { return this.attrs[property] }
    obj['set'+property] = function(val) { this.attrs[property] = val }
}

// Later that day, in our original object, we have:

Global.addGettersSetters(Layer, 'name'); 
```

我的理解是，这对于 Closure Compiler 是一个禁忌——名称不会被缩短，函数也不会被优化，因为我将 Layer 的属性指定为字符串。

那么，有没有一种方法可以让我完全正确地定义接口而不会弄乱我的代码？也许我忽略了闭包库中的某些东西？

另一种解决方案：有没有办法在现代 JS 中实现 C# 风格的属性？Closure Compiler 在某种程度上认为是允许的？我有幸针对 Webkit 并且只有带有这个库的 Webkit，所以还没有完全实现的东西很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:54:39.203

如果 getter/setter 无论如何都是公开的，那么您需要它们不要在缩小的 js 中重命名。这意味着让他们使用字符串作为名称很好 - 它们不会被缩小，但这就是你想要的。

是的，[现代 JS 有 getters/setters](https://stackoverflow.com/questions/812961/javascript-getters-and-setters-for-dummies)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:02:07.890

您不能动态添加一个函数，然后该函数可以由 Closure Compiler 编译（并缩小/混淆），因为该动态“addGettersSetters”函数只能在运行时使用，因此编译器不知道它可以创建什么。使用编译器的缺点是有很多重复的预编译代码，但好处是大多数使用 getter 和 setter 的地方要么被缩小，要么只是更改为对变量的内联引用。

此外，通过放入显式 getter/setter 并使用 JsDoc 注释正确地注释它们：

```
 /*
 * Set name.
 * @param {string} name
 */
Layer.prototype.setName = function(name) {
    this.attrs.name = name;
} 
```

您可以在代码中添加某种级别的类型安全，以确保在有人调用“setName(5)”时在编译期间收到警告。

否则我会遵循 Chris 的建议并研究 JS getter/setter（[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects?#Defining_getters_and_setters)的其他参考）。虽然我没有将它们与闭包编译器一起使用，所以我不能保证它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T06:39:57.530

不是原始问题的完整答案，只是添加一些信息。

您可以看到各种 JavaScript OOP 框架如何处理 getter/setter，例如：[jsPerf.com - JavaScript Object Oriented Libraries Benchmark with getter and setter](http://jsperf.com/oop-benchmark/156)

### 有没有办法让我在不弄乱我的代码的情况下完全正确地定义接口？

Tan Nhu（基准的原始作者）创建了自己的 OOP 库`jsface`，可在以下网址获得：[https ://github.com/tnhu/jsface](https://github.com/tnhu/jsface)

我喜欢它，我正是出于这个原因使用它

**编辑：例如在 SO 文章**[get and set in TypeScript](https://stackoverflow.com/questions/12827266/get-and-set-in-typescript)中提到了如何在 TypeScript 中解决 getters/setters 生成器

有关其他框架的更完整列表及其编码 getter/setter 的方式，您可以查看[编译为 JS 的语言列表 · jashkenas/coffeescript Wiki · GitHub](https://github.com/jashkenas/coffeescript/wiki/List-of-languages-that-compile-to-JS)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T15:48:05.857

抱歉，我没有得到 ne8il 答案以及为什么它被标记为正确答案。

你可以做你想做的事，只需像这样在和`.prototype`之间添加：`obj``[`

```
function addGettersSetters(obj, property) {
    // You can also add this if you don't want to declare attrs = {} each time
    // if (!("attrs" in obj.prototype)) obj.prototype.attrs = {};
    obj.prototype['get'+property] = function() { return this.attrs[property] }
    obj.prototype['set'+property] = function(val) { this.attrs[property] = val }
} 
```

并且还要用大写字母写属性名称。然后你可以像这样使用它：

```
var Layer = function() { this.attrs = {}; };
// Or just: 'var Layer = function(){};' if you use the line commented above

addGettersSetters(Layer, 'Name');

var layer = new Layer();
layer.setName("John");
alert(layer.getName()); // "John" 
```

# wpf - 实现自己的窗口边框和标题栏最经济的方法是什么？

> ID：16158961
> 
> 赞同：0
> 
> 时间：2013-04-23T00:29:37.990
> 
> 标签：wpf, customization

我对 WPF 很陌生，我正坐在这本书中试图找出这个应用程序的最佳方法。

标题栏不是客户区的一部分，所以我正在制作自己的标题栏。

哪种方式最容易将其变成某种资源以应用于我创建的所有新窗口？

```
<Application.Resources>
    <Style x:Key="WindowTheme">
        <Setter Property="Window.WindowStyle" Value="None"/>

    </Style>
    <!--Would I create a user control here for the title bar/border and title bar buttons? Or would it be a style?-->
</Application.Resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:05:25.440

在 WPF 中，有两种使用样式的方法：*命名*样式和*类型化*样式。命名样式有一个`x:Key="..."`属性。类型化的样式没有名称，而是一个`TargetType="..."`属性（Rem：命名样式也可以并且经常确实有一个 TargetType，因此*命名*样式和*未命名*样式会更准确）。类型化样式会自动应用于范围内的所有控件，这些控件属于类型`TargetType`（不是派生类型）。

```
<Style TargetType="{x:Type Window}">
    <Setter Property="Background" Value="Blue" />
</Style> 
```

要创建自己的窗口，您可以将其模板属性设置为以下样式的 UserControl：

```
<Style TargetType="{x:Type Window}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>

            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

实现控件模板的专业方法是“从头开始”实现它，这意味着不使用派生自`Window`. 为此，您需要定义 Window 的可视化树，并使用 WPF 功能*TemplateParts*来定义控件模板的哪个部分负责窗口的哪些功能。

这是一个教程，它非常准确地描述了您想要做什么：

[代码项目教程](http://www.codeproject.com/Articles/140267/Create-Custom-Windows-in-WPF-with-Ease)

# android - 尝试使用选项菜单项打开对话框菜单

> ID：16158966
> 
> 赞同：1
> 
> 时间：2013-04-23T00:30:23.103
> 
> 标签：android, list, menu, dialog, alert

我正在尝试打开一个包含列表的警报对话框，供用户选择一些选项，但该对话框将从选项菜单项中打开。我已经包含了选项项目和对话框菜单的代码。

```
public void OnOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case SECTION:
            showDialogMenu();
            new DialogInterface.OnClickListener(){
                @Override
                public void onClick(DialogInterface dialog, int item) {
                    showDialogMenu();
                    Log.d("Dialog used.","here");
                }
            }; break;
        }
    }

public void showDialogMenu(){
    Log.d("showDialogMenu()", "Method was called.");
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle(R.string.dialogueTitle);
    builder.setPositiveButton("Melee", new DialogInterface.OnClickListener(){
        @Override
        public void onClick(DialogInterface dialog, int item) {
            num=0;
            whichImage(num);
        }
    });
    builder.setPositiveButton("Pistols", new DialogInterface.OnClickListener(){
        @Override
        public void onClick(DialogInterface dialog, int item) {
            num=27;
            whichImage(num);
        }
    });
    builder.setPositiveButton("Shotguns", new DialogInterface.OnClickListener(){
        @Override
        public void onClick(DialogInterface dialog, int item) {
            num=38;
            whichImage(num);
        }
    });
    builder.setPositiveButton("Rifles", new DialogInterface.OnClickListener(){
        @Override
        public void onClick(DialogInterface dialog, int item) {
            num=43;
            whichImage(num);
        }
    });
    builder.setPositiveButton("Sub-Machine Guns", new DialogInterface.OnClickListener(){
        @Override
        public void onClick(DialogInterface dialog, int item) {
            num=58;
            whichImage(num);
        }
    });
    builder.setPositiveButton("Light Machine Guns", new DialogInterface.OnClickListener(){
        @Override
        public void onClick(DialogInterface dialog, int item) {
            num=68;
            whichImage(num);
        }
    });
    builder.setPositiveButton("Sniper Rifles", new DialogInterface.OnClickListener(){
        @Override
        public void onClick(DialogInterface dialog, int item) {
            num=72;
            whichImage(num);
        }
    });
    builder.show();
} 
```

我确保有对话框的 show() 方法，我认为这是之前的问题，但是当单击菜单项时，什么也没有出现。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:43:57.290

简单的家伙......没有人认为你是愚蠢的。我不知道是什么`SECTION`，但您应该将其更改为您在菜单 xml 中提供的 id

```
<item android:id="MyItem" 
```

然后在你的`onOptionsItemSelected()`

```
public void OnOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.MyItem:
        showDialogMenu();
        break; 
```

将您的`showDialog()`方法移到此处之外，以便可以重新使用。

```
public void showDialogMenu(){
                Log.d("Dialog used.","here");
            } 
```

在这里使用 a 很好，`switch/case`因为您可能希望在某个时候添加更多项目

这应该有助于您当前的问题。但是您需要检查使用[MultiChoice Dialog](http://developer.android.com/guide/topics/ui/dialogs.html)来了解您正在做的事情

# ios - 覆盖 UIWebView 用户代理 - 但不适用于 Facebook SDK

> ID：16158970
> 
> 赞同：0
> 
> 时间：2013-04-23T00:30:39.673
> 
> 标签：ios, facebook, uiwebview

[我正在按照其他问题](https://stackoverflow.com/questions/478387/change-user-agent-in-uiwebview-iphone-sdk)中的说明为我的应用程序中的 webviews 设置自定义 UserAgent 。具体来说，我正在设置

```
NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:@"MyApp/MyLongVersionInfoString", @"UserAgent", nil];
[[NSUserDefaults standardUserDefaults] registerDefaults:dictionary]; 
```

在应用启动时。（只需为 UIWebView 使用的 NSMutableURLRequest 设置适当的标头 - UserAgent、User-Agent、User_Agent - 不起作用。）

这会导致我的嵌入式 webviews 使用正确的用户代理。但是，它也破坏了 Facebook SDK 用于对话框的嵌入式 webviews - 例如，在我发布到我的墙上后，FB 对话框 webview 的内容被替换为类似的*文本*`window.location.href="fbconnect:\/\/success?post_id=100002469633196_43677789308119...`，并且 webview 不会像往常那样关闭（用户必须手动关闭它）。这只发生在我设置了自定义用户代理时。

我想我可以通过在 Facebook 调用之前取消设置用户代理并在之后重置它来规避这个问题，但似乎我无法取消设置默认默认值；我尝试在每个 Facebook 调用之前调用`[[NSUserDefaults standardUserDefaults] removeObjectForKey:@"UserAgent"]`并`[[NSUserDefaults standardUserDefaults] removePersistentDomainForName:NSRegistrationDomain]`在调用的结果处理程序中再次设置它们，但我仍然看到相同的不当行为。

我尝试将我的初始设置切换为`[[NSUserDefaults standardUserDefaults] setObject:newUA forKey:@"UserAgent"];`，但是*我的*webviews 没有选择用户代理。

可以肯定的是，之前有人在具有非 Facebook 嵌入式 Web 视图的应用程序中使用过 Facebook SDK。我错过了什么？我已经为此进行了几轮，每一次似乎都几乎但不是完全解决了所有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T02:41:26.877

我最终不得不通过实现一个 NSURLProtocol 子类来做到这一点。虽然我的实现很混乱，但我在下面包含了一个经过清理的版本，因为我很惊讶无法在 StackOverflow 上找到一个示例。

```
#import <Foundation/Foundation.h>

@interface MyProtocol : NSURLProtocol {
    NSURLConnection *connection;
}

@property (nonatomic, retain) NSURLConnection *connection;

@end

@implementation MyProtocol

@synthesize connection;

#pragma mark -
#pragma mark custom methods

+ (NSString *)myUA {
    return [[NSUserDefaults standardUserDefaults] stringForKey:@"MyCustomUserAgent"];
}
+ (BOOL)canInitWithRequest:(NSURLRequest *)request
{
    NSString *scheme = [request.URL.scheme stringByAppendingString:@"://"];
    NSString *baseRequestString = [[[request.URL absoluteString] stringByReplacingOccurrencesOfString:request.URL.path withString:@""]
                                   stringByReplacingOccurrencesOfString:scheme withString:@""];
    if (request.URL.query != nil) {
        NSString *query = [@"?" stringByAppendingString:request.URL.query];
        baseRequestString = [baseRequestString stringByReplacingOccurrencesOfString:query withString:@""];
    }

    BOOL shouldIntercept = [baseRequestString isEqualToString:myWebHost];
    BOOL alreadyIntercepted = [[NSURLProtocol propertyForKey:@"UserAgent" inRequest:request] isEqualToString:[self myUA]];
    return shouldIntercept && !alreadyIntercepted;
}

+ (NSURLRequest *) canonicalRequestForRequest:(NSURLRequest *)request
{
    return request;
}

- (id)initWithRequest:(NSURLRequest *)request cachedResponse:(NSCachedURLResponse *)cachedResponse client:(id<NSURLProtocolClient>)client
{
    NSMutableURLRequest *mutableRequest = [NSMutableURLRequest requestWithURL:request.URL
                                                       cachePolicy:request.cachePolicy
                                                   timeoutInterval:request.timeoutInterval];
    [mutableRequest setAllHTTPHeaderFields:[request allHTTPHeaderFields]];
    [mutableRequest setHTTPMethod:[request HTTPMethod]];
    if ([request HTTPBody] != nil)
        [mutableRequest setHTTPBody:[request HTTPBody]];
    if ([request HTTPBodyStream] != nil)
        [mutableRequest setHTTPBodyStream:[request HTTPBodyStream]];
    [NSURLProtocol setProperty:[[self class] myUA] forKey:@"UserAgent" inRequest:mutableRequest];
    [mutableRequest setValue:[[self class] myUA] forHTTPHeaderField:@"User-Agent"];
    [mutableRequest setValue:[[self class] myUA] forHTTPHeaderField:@"User_Agent"];

    self = [super initWithRequest:mutableRequest cachedResponse:cachedResponse client:client];
    return self;
}

- (void) dealloc
{
    [connection release];
}

#pragma mark -
#pragma mark boilerplate NSURLProtocol subclass requirements

- (void) startLoading
{
    self.connection = [[NSURLConnection connectionWithRequest:[self request] delegate:self] retain];
}

- (void)stopLoading
{
    [self.connection cancel];
}

- (void)connection:(NSURLConnection*)conn didReceiveResponse:(NSURLResponse*)response
{
    [[self client] URLProtocol:self didReceiveResponse:response cacheStoragePolicy:[[self request] cachePolicy]];
}

- (void)connection:(NSURLConnection*)connection didReceiveData:(NSData*)data
{
    [[self client] URLProtocol:self didLoadData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection*)conn
{
    [[self client] URLProtocolDidFinishLoading:self];
}

- (NSURLRequest*)connection:(NSURLConnection*)connection willSendRequest:(NSURLRequest*)theRequest redirectResponse:(NSURLResponse*)redirectResponse
{
    return theRequest;
}

- (void)connection:(NSURLConnection*)conn didFailWithError:(NSError*)error
{
    [[self client] URLProtocol:self didFailWithError:error];
}

@end 
```

请注意，`[NSURLProtocol registerClass:[MyProtocol class]];`在您发出任何您希望它应用的 Web 请求之前，必须先注册该协议 - 例如，在`applicationDidFinishLaunchingWithOptions:`.

# php - FINEUPLOAD 将 ID 作为参数传递

> ID：16158976
> 
> 赞同：0
> 
> 时间：2013-04-23T00:31:32.937
> 
> 标签：php, fine-uploader

我有这个 div

```
<div id="thumbnail-uploader_1" class="thumbnail-uploader">
<div id="thumbnail-uploader_2" class="thumbnail-uploader"> 
```

和这个 Jquery 调用

```
$('.thumbnail-uploader').fineUploader({
request: {
    endpoint: '/core/ajax/add_avatar.php',
    params: {
    one: function() {
        return this.id;
     }
    }
},
multiple: false,
validation: {
    allowedExtensions: ['jpeg', 'jpg', 'gif', 'png'],
    sizeLimit: 551200 // 50 kB = 50 * 1024 bytes
},
text: {
    uploadButton: 'Klikněte nebo sem přetáhněte soubor'
}
}).on('complete', function(event, id, fileName, responseJSON) {
if (responseJSON.success) {
    $(this).append('<img src="/uploads/categories/' + fileName + '" alt="' + fileName + '">');
    $('.qq-upload-list').fadeOut(2500);
}
}); 
```

我要做的就是传递使用的上传者的 ID。但是通过这个调用，当我尝试在作为处理程序的“add_avatar.php”中使用它时，我得到了参数“one”的未定义值。我在那里使用全局数组 REQUEST 来检查值是否通过。但它未定义。

有人知道如何在我的 php 脚本中传递 ID 吗？我将在那里有更多此上传器的实例，因此我必须检查我更改头像的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:08:10.333

我通过为类别的每个迭代创建 jquery 调用来解决它，并将选择器从类更改为 ID，例如：

```
$('#thumbnail-uploader_1').fineUploader({.....
$('#thumbnail-uploader_2').fineUploader({..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:46:16.227

由于您使用的是 jQuery，也许这就是您正在寻找的。

```
return $(this).attr('id'); 
```

# bash - awk 和 CSV 只返回一个结果

> ID：16158980
> 
> 赞同：1
> 
> 时间：2013-04-23T00:32:15.803
> 
> 标签：bash, shell, csv, awk

大家好，尝试一个非常简单的 awk 脚本来解析一个简单的 CSV。脚本运行，但是我只得到一个结果而不是两个。

CSV 文件：

```
Test4|Test5|Test6
Test1|Test2|Test3 
```

脚本：

```
#!/bin/bash
awk -F "|" 'NR > 0 {print $2}' UserAgents.csv 
```

实际输出：

```
Test5 
```

预期输出：

```
Test5
Test2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:40:08.160

看起来你在 Mac 上，有`CR`行尾，这可以是解决方法：

```
awk '{print $2}' FS='|' RS='\r' 
```

结果：

```
Test5
Test2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:40:24.683

将文件编码更改为 Unix (LF) 解决了该问题。

# c++ - 如何检查是否有足够的堆内存可用？

> ID：16158981
> 
> 赞同：10
> 
> 时间：2013-04-23T00:32:21.097
> 
> 标签：c++, visual-c++, heap-memory

我有一个任务要求我创建一个分配和释放内存的“堆”类。我相信我的代码可以正常工作并且解决方案可以正常构建和运行，但我想确保我没有遇到任何内存泄漏。我还需要添加一些代码来检查分配给堆的所需数量是否可用......如果有人要分配非常大的数量。如果没有足够的内存，如何检查堆上分配的内存是否可用或 NULL。到目前为止，这是我的代码：

```
#include <iostream>
using namespace std;

class Heap{
public:

double* allocateMemory(int memorySize)
{
    return new double[memorySize];
};
void deallocateMemory(double* dMemorySize)
{
    delete[] dMemorySize;
};

};

int main()
{
Heap heap;
cout << "Enter the number of double elements that you want to allocate: " << endl;
int hMemory;
const int doubleByteSize = 8;
cin >> hMemory;

double *chunkNew = heap.allocateMemory(hMemory);

cout << "The amount of space you took up on the heap is: " <<
         hMemory*doubleByteSize << " bytes" << 
     starting at address: " << "\n" << &hMemory << endl; 

heap.deallocateMemory(chunkNew);

system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T00:35:36.233

无需事先检查，只需尝试分配内存，如果不能，则捕获异常。在这种情况下，它是类型`bad_alloc`。

```
#include <iostream>
#include <new>      // included for std::bad_alloc

/**
 * Allocates memory of size memorySize and returns pointer to it, or NULL if not enough memory.
 */
double* allocateMemory(int memorySize)
{
  double* tReturn = NULL;

  try
  {
     tReturn = new double[memorySize];
  }
  catch (bad_alloc& badAlloc)
  {
    cerr << "bad_alloc caught, not enough memory: " << badAlloc.what() << endl;
  }

  return tReturn;
}; 
```

## 重要的提示

一定要防止双重释放内存。一种方法是通过引用传递你的指针`deallocateMemory`，允许函数将指针值更改为，从而防止 -指针两次`NULL`的可能性。`delete`

```
void deallocateMemory(double* &dMemorySize)
{
   delete[] dMemorySize;
   dMemorySize = NULL; // Make sure memory doesn't point to anything.
}; 
```

这可以防止出现以下问题：

```
double *chunkNew = heap.allocateMemory(hMemory);
heap.deallocateMemory(chunkNew);
heap.deallocateMemory(chunkNew); // chunkNew has been freed twice! 
```

# php - 如何在文本框中创建 facebook 样式标记朋友

> ID：16158985
> 
> 赞同：0
> 
> 时间：2013-04-23T00:32:33.473
> 
> 标签：php, jquery, mysql

我想在用于创建博客文章的应用程序上使用 facebook 风格的朋友标记器。如果用户输入@符号，然后开始输入朋友的姓名（从用户表中），则应用程序将查找，然后用户将从列表中选择姓名。选择名称后，它将发送一封电子邮件，提及您已在博客文章 xyz 等中被标记。经过深入的谷歌搜索后，我在[http://www.9lessons.info/2010/08/tag-friends-with找到了类似的脚本-jquery-ajax-and-php.html](http://www.9lessons.info/2010/08/tag-friends-with-jquery-ajax-and-php.html)。但是我想知道是否还有更多示例？或为此的jquery扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:21:39.767

这不会花费太多时间来研究自己编写代码。使用 javascript / jQuery 检测 @ 符号并触发 ajax 函数以在该人的朋友列表中查找匹配的用户。也许为每个用户的朋友生成一个 xml / json 文件，这样您就可以更快地访问它们，而无需对数据库进行额外的查询。然后在一个简单的 CSS div 中显示用户名供他们选择。当他们选择一个名称时，它会用所选名称替换 @ 符号之后的所有内容。然后触发另一个 ajax 函数来触发并记录一条消息，以便该用户在下次登录时查看。

我知道我们在这里都处于不同的水平，但是如果您熟悉 php、javascript/jquery 和 ajax 调用，您应该能够喝几杯咖啡并在几个小时内完成这项工作。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:08:55.390

为此有一个 jQuery 插件。在此处查看演示：

[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

阅读插件文档以获取更多信息。简而言之：

*   您需要在客户端使用此插件。
*   在服务器上生成以下格式的 JSON 并将脚本文件的 url 传递给此插件

    [ {"id":"856","name":"House"}, {"id":"1035","name":"绝望主妇"}, ... ]

*   将 onAdd 事件侦听器绑定到此插件并将 ajax 请求发送到某些服务器端脚本以发送电子邮件。

# javascript - 数组映射和 parseInt 问题

> ID：16158986
> 
> 赞同：10
> 
> 时间：2013-04-23T00:32:42.977
> 
> 标签：javascript, string

鉴于以下情况：

```
> '10.0.0.1'.split('.').map(parseInt)
[10, NaN, 0, 1] 
```

为什么不是输出：

```
[10, 0, 0, 1] 
```

尽管以下情况成立：

```
> x = '10.0.0.1'.split('.');
["10", "0", "0", "1"]

> x[1] == x[2]
true 
```

或者使用`parseFloat`确实给了我想要的输出；但是我觉得我在这里遗漏了一些重要的东西。

**编辑：** `'10.0.0.1'.split('.').map(function(x) { return parseInt(x); })`按预期工作。

**EDIT2：**我使用的是 Chrome 版本 26.0.1410.64，但这也发生在我的本地 node.js 副本中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T00:39:21.460

查看此链接底部的“Tricky Use Case”，其中解释了`NaN`

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

通常使用带有一个参数（被遍历的元素）的回调。一些函数也通常与一个参数一起使用。这些习惯可能会导致令人困惑的行为。

```
// Consider:
["1", "2", "3"].map(parseInt);
// While one could expect [1, 2, 3]
// The actual result is [1, NaN, NaN]

// parseInt is often used with one argument, but takes two. The second being the radix
// To the callback function, Array.prototype.map passes 3 arguments: the element, the index, the array
// The third argument is ignored by parseInt, but not the second one, hence the possible confusion.
// See the blog post for more details

// Solution:
function returnInt(element){
  return parseInt(element,10);
}

["1", "2", "3"].map(returnInt);
// Actual result is an array of numbers (as expected) [1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T00:39:59.500

快速解决方案，使用`parseFloat`：

```
'10.0.0.1'.split('.').map(parseFloat); //=> [10,0,0,1] 
```

为什么`parseInt`没有按预期工作？在这里回答：[javascript - Array#map 和 parseInt](https://stackoverflow.com/questions/262427/javascript-arraymap-and-parseint)

# linux - 使用 imagemagick 将 PDF 转换为 JPG 的错误消息

> ID：16158989
> 
> 赞同：0
> 
> 时间：2013-04-23T00:33:01.740
> 
> 标签：linux, imagemagick, centos

命令：

```
convert small.pdf small.jpg 
```

输出：

```
sh: gs: not found
convert: Postscript delegate failed `small.pdf': ZkQV.cache @ error/pdf.c/ReadPDFImage/638.
convert: missing an image filename `small.jpg' @ error/convert.c/ConvertImageCommand/2940. 
```

版本：

```
Version: ImageMagick 6.6.0-4 2012-05-02 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2010 ImageMagick Studio LLC
Features: OpenMP 
```

使用的文件：[http ://www.relacweb.org/menuconferencia/menu/manual-memorias.pdf](http://www.relacweb.org/menuconferencia/menu/manual-memorias.pdf)

在 Linux 上。

# c++ - C++ 自引用对象和继承

> ID：16158991
> 
> 赞同：0
> 
> 时间：2013-04-23T00:33:09.257
> 
> 标签：c++, inheritance, self-reference

我有一个父类，它作为一个成员包含一个指向与其自身类型相同的对象的指针数组。我有另一个派生自父类的类。我希望派生类使用指向它自己的对象（而不是父类）的指针数组。派生类调用存储在指针数组中的那些对象的方法；它调用在派生类和基类中定义和实现的方法。下面的代码显然不能编译为父级不包含成员 z（在 derived::doX() 中）。我可以在访问 z 之前进行 dyanamic_cast(p[i]).z，但我必须在运行时对 b 中的每个方法都执行此操作。如果我在派生类中隐藏“p”（通过在对象构造期间强制转换 p），我基本上会得到两个指针 p 数组，但是，我希望所有方法都对相同的对象（驻留在 p 中）进行操作。我尝试了模板，但遇到了递归问题。知道如何解决这个问题吗？

```
#include <iostream>
#include <stdlib.h>
using namespace std;

class parent{
protected:
  parent** p;
  int num;
  int x;
public:
  parent(int _num, parent** _ps);
  virtual void doX();
  virtual void print();
};

class derived : public parent {
protected:
  //derived** p;
  int z;
public:
  derived(int _num, parent** _ps) : parent(_num, _ps){};
  virtual void doX();
  virtual void print();
};

void parent::doX(){
  for(int i=0;i<num;i++){
    p[i]->x = 1;
  }
}
void parent::print(){  cout << "x " << x << endl;
}

parent::parent(int _num, parent** _ds){
  num=_num;
  p = _ds;
}

void derived::doX(){
  for(int i=0;i<num;i++){
    p[i]->z = 2;
  }
  parent::doX();
}
void derived::print(){
  cout << "x " << x << endl;
  cout << "z " << z << endl;
}

int main(){
  const int NUM = 2;
  parent** ps = (parent**)malloc(sizeof(parent)*NUM);
  for(int i=0; i< NUM; i++){
    ps[i] = new derived(NUM, ps);
  }

  ps[0]->doX();
  ps[0]->print();
  ps[0]->print();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:45:59.263

你在正确的轨道上！您应该使用父类中定义的“p”。在派生类 setter 方法中，您强制必须使用派生类型（作为参数类型）。例如，您定义的构造函数将是：

```
derived(int _num, derived** _ps) : parent(_num, _ps){}; 
```

然后，当您在派生方法中使用 p 时，您知道 p*确实*是派生类型，并且您可以安全地转换它。

# arm - 尝试使用 qemu-arm 运行 arm 二进制文件时如何解决“加载共享库时出错”？

> ID：16158994
> 
> 赞同：14
> 
> 时间：2013-04-23T00:33:15.243
> 
> 标签：arm, qemu

我正在运行安装了 qemu、qemu-user 和 gnueabi 工具链的 Linux Mint 14。`arm-linux-gnueabi-gcc test.c -o test`我用 .c 编译了test.c。

当我尝试跑步时`qemu-arm /usr/arm-linux-gnueabi/lib/ld-linux.so.3 test`

我收到一条错误消息：`test: error while loading shared libraries: test: cannot open shared object file: No such file or directory`. `qemu-arm test`正如我之前尝试过的那样，Running给出了`/lib/ld-linux.so.3: No such file or directory`

但是，该文件确实存在并且可以访问。

```
$ stat /usr/arm-linux-gnueabi/lib/ld-linux.so.3
  File: `/usr/arm-linux-gnueabi/lib/ld-linux.so.3' -> `ld-2.15.so'
  Size: 10          Blocks: 0          IO Block: 4096   symbolic link
Device: 801h/2049d  Inode: 4083308     Links: 1
Access: (0777/lrwxrwxrwx)  Uid: (    0/    root)   Gid: (    0/    root)
Access: 2013-04-22 16:19:48.090613901 -0700
Modify: 2012-09-21 08:31:29.000000000 -0700
Change: 2013-04-22 15:58:41.042542851 -0700
 Birth: - 
```

有谁知道我如何让 qemu 运行一个 arm 程序而不必模拟整个 arm Linux 内核？

test.c 是

```
#include <stdio.h>
int main() {
    printf("this had better work\n");
} 
```

并且`file test`是

```
test: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.31, BuildID[sha1]=0xf2e49db65394b77c77ee5b65b83c0cc9220cbfc0, not stripped 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-06-20T05:57:10.433

您可以通过使用 -L 标志提供 arm-linux-gnueabi 共享库的路径来运行示例。

```
qemu-arm -L /usr/arm-linux-gnueabi/ 
```

还要确保未设置 LD_LIBRARY_PATH。

```
unset LD_LIBRARY_PATH 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-04-08T13:20:54.810

```
$ export QEMU_LD_PREFIX=/usr/arm-linux-gnueabi 
```

这对我有用。它基本上与以下内容相同：

```
$ qemu-arm -L /usr/arm-linux-gnueabi/ 
```

您可以将其添加到 ~/.bashrc 文件中，这样您就不必每次打开终端时都输入它。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-10-14T16:07:06.307

在使用汇编代码运行 C 程序时，我也遇到了这个问题。例如，我的解决方案是使用“-static”选项构建可执行文件

```
arm-linux-gnueabi-gcc -static -g main.c square.s 
```

然后

```
qemu-arm a.out 
```

不会报“找不到/lib/ld-linux.so.3”的错误。

唯一的缺点是可执行文件可能很大。但是当您只想测试您的代码时，它会很有帮助。

当然，您可以使用 Balau 的方法（请参阅 artless noise 的答案）。但是如果你不想在这一步中因为“UART串口”之类的东西而感到沮丧，这只是为了运行一个简单的“测试”功能，试试我的修复。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-23T19:25:27.957

我通过将以下库复制到 /lib 中解决了这个问题，但我相信应该有更好的解决方案，而不是我发明的这个讨厌的解决方案！

```
sudo cp  /usr/arm-linux-gnueabi/lib/ld-linux.so.3 /lib
sudo cp /usr/arm-linux-gnueabi/lib/libgcc_s.so.1 /lib
sudo cp /usr/arm-linux-gnueabi/lib/libc.so.6 /lib 
```

如果我有兴趣知道其他更好的解决方案，请告诉我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T01:34:45.240

如果你想在没有 Linux 的情况下运行**ARM**，那么你需要一个不同的编译器（至少）。 `arm-linux-gnueabi-gcc`是**Linux**的编译器。和编译器`libc`有着密切的联系。您将需要一个带有*qemu*`newlib`可移植层的编译器。^([移植新库](http://wiki.osdev.org/Porting_Newlib))

 *请参阅：[Balau](http://balau82.wordpress.com/2010/02/28/hello-world-for-bare-metal-arm-using-qemu/)和[Google newlib+qemu](https://www.google.ca/search?q=newlib+qemu)。一个`newlib`端口托管在[Github](https://github.com/balau/arm-sandbox/tree/master/qemu-newlib)上，似乎与*Balau*博客相同。

通常会调用非 Linux gcc `arm-none-eabi-gcc`。某些配置脚本可以识别前缀*arm-none-eabi- 。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-17T16:20:48.147

对我有用的一个变体是直接传递加载器库并使用 loader 参数指定所需的库路径`--library-path`。例如：

```
$ TOOLCHAIN_ROOT=/usr/local/gcc-linaro-arm-linux-gnueabihf-4.7-2013.03-20130313_linux/arm-linux-gnueabihf
$ qemu-arm $TOOLCHAIN_ROOT/libc/lib/ld-linux-armhf.so.3 --library-path $TOOLCHAIN_ROOT/libc/lib/arm-linux-gnueabihf:/$TOOLCHAIN_ROOT/lib ./my_executable 
```

或者等效地导出`LD_LIBRARY_PATH`而不是使用`--library-path`.*

# php - 针对变量的日期时间 PHP 验证

> ID：16158995
> 
> 赞同：1
> 
> 时间：2013-04-23T00:33:15.397
> 
> 标签：php

大家好，我整晚都在努力完成这项工作，我试图根据`$year`日期测试值以确保它不小于当前日期

这是我目前的代码它似乎不起作用我不确定我做错了什么

```
 public function checkDateField($month, $day, $year)
   {
        if (!is_numeric($month) || !is_numeric($day) || !is_numeric($year) || !checkdate($month, $day, $year)< date("m-d-y")) {
            $msg = '*Invalid date';

        }
        return $msg;    
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:38:19.927

直接对比一下：

```
if (checkdate($month, $day, $year) && mktime(0, 0, 0, $month, $day, $year) > mktime(0, 0, 1)) {
    echo 'Valid date';
}
else {
    echo 'Invalid date';
} 
```

这将检查提供的变量在组装时是否为有效的公历日期，如果是这样，则日期大于当天的 00:00:01。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T00:39:10.477

if(strtotime(("1 January ".$year)) < strtotime("now") ) echo '无效日期';

希望有帮助

# java - Switch-Case 使用引号 (')

> ID：16158998
> 
> 赞同：1
> 
> 时间：2013-04-23T00:33:27.730
> 
> 标签：java, char, switch-statement

这是我的代码，当我想检查情况时它给了我一个错误`'`

```
Case: '.' Case: '?' Case: '!' Case: ''' 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:35:30.503

```
Case: '\'' 
```

用反斜杠转义它：`\`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T00:36:24.613

用 \ 转义 '

```
Case: '\'' 
```