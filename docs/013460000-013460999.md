# StackOverflow 问答 13460000-13460999

# ruby - alias_method_chain 和猴子补丁

> ID：13460000
> 
> 赞同：1
> 
> 时间：2012-11-19T18:37:17.623
> 
> 标签：ruby

我想修补一个为其创建的方法，`alias_method_chain`但不调用覆盖的方法

```
# foo.rb
require 'active_support/core_ext'

class Foo
  def foo
    "original foo"
  end

  def foo_with_flag
    "foo with flag"
  end

  alias_method_chain :foo, :flag
end

# foo_ext.rb
class Foo
  def foo_with_flag
    "overridden foo with flag"
  end
end

foo = Foo.new
foo.foo # => "foo with flag"
foo.foo_with_flag # => "overridden foo with flag" 
```

我怎样才能`Foo#foo`使用的最后一个实现`Foo#foo_with_flag`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:53:26.140

第一个`alias_method_chain`做`alias_method :foo, :foo_with_flag`（第一个定义的*副本*），当您重新定义时`foo_with_flag` `:foo`仍然是第一个定义的别名。您必须`alias_method :foo, :foo_with_flag`在第二个定义（而不是“整个链”）之后再做一次。

# asp.net - 升级 ASP .NET Ajax 会产生 _header 错误。有人见过这个吗？

> ID：13460001
> 
> 赞同：1
> 
> 时间：2012-11-19T18:37:17.277
> 
> 标签：asp.net, .net-3.5, ajaxcontroltoolkit

当我通过 NuGet 将 AjaxControlToolkit.dll 升级到工具包的最新版本时，我的项目现在会产生一个错误，告诉我页面上有多个 ID 为 _header 的控件。我不确定在 _header 的 id 的客户端上实际生成了什么，但我想我会先询问 stackoverflow 社区，然后再回滚并从最后一个已知的工作版本的代码中检查出来。

这是错误的确切堆栈跟踪：

```
 EXCEPTION:Multiple controls with the same ID '_header' were found. FindControl requires that controls have unique IDs.
Data:System.Collections.ListDictionaryInternal
Stack Trace:   at System.Web.UI.Control.FillNamedControlsTable(Control namingContainer, ControlCollection controls)
   at System.Web.UI.Control.FillNamedControlsTable(Control namingContainer, ControlCollection controls)
   at System.Web.UI.Control.FillNamedControlsTable(Control namingContainer, ControlCollection controls)
   at System.Web.UI.Control.FillNamedControlsTable(Control namingContainer, ControlCollection controls)
   at System.Web.UI.Control.FillNamedControlsTable(Control namingContainer, ControlCollection controls)
   at System.Web.UI.Control.FillNamedControlsTable(Control namingContainer, ControlCollection controls)
   at System.Web.UI.Control.EnsureNamedControlsTable()
   at System.Web.UI.Control.FindControl(String id, Int32 pathOffset)
   at System.Web.UI.Control.FindControl(String id)
   at System.Web.UI.ControlUtil.FindTargetControl(String controlID, Control control, Boolean searchNamingContainers)
   at System.Web.UI.UpdatePanelControlTrigger.FindTargetControl(Boolean searchNamingContainers)
   at System.Web.UI.AsyncPostBackTrigger.Initialize()
   at System.Web.UI.UpdatePanelTriggerCollection.Initialize()
   at System.Web.UI.UpdatePanel.Initialize()
   at System.Web.UI.UpdatePanel.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:11:44.270

所以这就是最终的答案：当将 ASP .NET Ajax 版本更新到最新版本时，现在需要为 Accordion Control 内的每个 Accordion Pane 拥有一个 ID。如果您不为它们分配 ID，它会为您生成一个“_header”。就我而言，我有不止 1 个 Accordion Pane，所以确实有不止 1 个具有相同的 ID。我希望这对其他人有帮助。[这](http://forums.asp.net/t/1457688.aspx)是帮助我指出正确方向的帖子。大起大落 CurtWRC :)

# eclipse - 将 GlassFish 3.1.2 运行时添加到 Eclipse Juno

> ID：13460003
> 
> 赞同：2
> 
> 时间：2012-11-19T18:37:23.407
> 
> 标签：eclipse, runtime, glassfish-3, eclipse-juno

我最近安装了 Juno EE 版并试图设置我的 Glassfish 3.1.2.2（开源版）服务器运行时。

我通过 zip 文件单独安装了 Glassfish。我的目录如下所示：

```
C:\Servers\glassfish3112\glassfish 
```

在 Eclipse 中，我安装了“Glassfish Java EE Application Server Plugin for Eclipse”，它还安装了“Oracle Glassfish 服务器工具”。这些是添加到我的插件目录的 jars/目录：

*   oracle.eclipse.tools.glassfish_3.2.3.201106220649.jar
*   oracle.eclipse.tools.doc.javaee6_1.0.0.201106220649
*   oracle.eclipse.tools.doc.javaee5_1.0.0.201106220649
*   org.eclipse.datatools.sqltools.db.generic_1.0.0.v201107221520.jar（其中包含）
    *   oracle.eclipse.tools.glassfish_4.2.1.201207240841.jar
    *   oracle.eclipse.runtime.glassfish3122_3.1.2.201207240841.jar

然后我进入了我的偏好 | 服务器 | Runtim Environments 添加我的 Glassfish 服务器。当我选择上述路径时，我收到错误消息*在指定目录中没有有效的 GlassFish 安装。单击安装服务器按钮下载并安装到该目录。*

我发现这个 StackOverflow 问题[Glassfish 3.1.2 and Eclipse](https://stackoverflow.com/questions/9001120/glassfish-3-1-2-and-eclipse)表明 Marketplace 插件不适用于 GF 3.1.2 并提供此链接以获取 Juno 版本：[http ://dlc.sun.com.edgesuite.net/glassfish /eclipse/靛蓝/插件/](http://dlc.sun.com.edgesuite.net/glassfish/eclipse/indigo/plugins/)

该站点上最新的运行时和工具 jar 包含在 org.eclipse.datatools.sqltools.db.generic_1.0.0.v201107221520.jar 中。

有人可以向我解释我做错了什么以及如何设置我的运行时吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T21:56:33.397

您可以在此处获取 Juno 插件版本：http: [//dlc.sun.com.edgesuite.net/glassfish/eclipse/juno/](http://dlc.sun.com.edgesuite.net/glassfish/eclipse/juno/)

这包括对 GlassFish 3.1.2.2 的支持。

最好的，TM

PS。在安装此插件之前不要忘记卸载所有其他 Glassfish 插件。

# jquery - 有时 AJAX 调用不起作用

> ID：13460013
> 
> 赞同：0
> 
> 时间：2012-11-19T18:37:59.403
> 
> 标签：jquery, ajax

我们正在使用 jquery 进行 ajax 调用。大多数情况下，通话工作正常。有时相同的调用会给出 xhr status = 0、xhr.readystatus = 0 和 xhr.statusText = "error"。

```
"xhr":{"status":0,"statusText":"error","responseText":"","readyState":0} 
```

这是什么意思？浏览器端或服务器端有问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:39:19.583

*通常*当 xhr.status 返回时`0`，这意味着没有找到网络连接。

您也可以得到它的几个原因：

*   可能来自失败的跨域请求。
*   本地主机请求失败
*   用户在请求尚未完成时试图离开页面（后退按钮等）。

# debugging - 调试后台任务

> ID：13460015
> 
> 赞同：0
> 
> 时间：2012-11-19T18:38:29.623
> 
> 标签：debugging, windows-8, microsoft-metro

我总是在使用`BackgroundTaskRegistration`.

最糟糕的是，我不知道如何调试这样的任务！

任何想法或帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:20:53.227

好的，终于在msdn上找到[了](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj542416.aspx)。

# bash - 有没有办法引用在 bash 中输入的命令的其他部分，类似于历史扩展

> ID：13460023
> 
> 赞同：2
> 
> 时间：2012-11-19T18:38:39.397
> 
> 标签：bash, unix, zsh

我经常需要在 bash 命令中引用一段文本，例如：

```
git mv _fav-locations-cluster.html.erb partials/_fav_locations_cluster.html.erb 
```

**编辑#1**

请注意，它来自破折号 -> 下划线

我想做类似的事情（其中 $0 和选项卡将被评估或其他东西）：

```
git mv _fav-locations-cluster.html.erb partials/'$0 and tab' 
```

其中 $0 和 tab 将引用第一个参数。这可能在bash或zsh中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T20:09:46.450

历史扩展确实可以引用当前正在键入的行：

```
$ git mv _fav-locations-cluster.html.erb partials/!#:2:gs/-/_/ 
```

`!#`指当前行。`:2`指定第二个单词（文件名），并将该单词中`:gs/-/_/`所有出现的 替换`-`为`_`。展开后命令为

```
$ git mv _fav-locations-cluster.html.erb partials/_fav_locations_cluster.html.erb 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:05:51.527

一个简单的技巧是将值粘贴到变量中并使用它；这将适用于您上面的示例：

```
f=_fav-locations-cluster.html.erb; git mv "$f" partials/"${f//-/_}" 
```

或创建一个函数：

```
f() { git mv "$1" partials/"${1//-/_}".erb; }; f _fav-locations-cluster.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:52:02.990

在我的`.zshrc`我有：

```
bindkey -M emacs "\M-;" copy-prev-word 
```

这允许我使用`Meta`+`;`来复制前一个单词。在您的示例中，默认情况下会复制`partials/`，但小部件也可以使用数字前缀来指定应使用较早的单词。因此，在绑定之前使用`Meta`+将完成您正在寻找的内容。`2``copy-prev-word`

Bash 可能有类似的命令可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T18:56:03.480

`git mv {,partials/}_fav-locations-cluster.html.erb`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T19:07:22.610

除了其他解决方案：

```
f=_fav-locations-cluster.html.erb; git mv $f partials/$f 
```

此解决方案的优点是您可以在后续命令中使用 $f。缺点是 a) 需要两个命令来完成相同的任务，并且 b) 之后你得到了一个残差变量 $f。

# html - Rails：在模型中创建 HTML

> ID：13460031
> 
> 赞同：0
> 
> 时间：2012-11-19T18:39:09.193
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3

我有一个与贡献者有 has_many 关系的发布模型。在模型中，我有一个方法可以按行创建 html-ready：

```
def authors
  authors = []
  Contributor.where(:publication_id => self.id).each do |author|
    authors << "link_to "+author.name+", Contributor.find("+author.id.to_s+")"
  end
  authors.to_sentence
end 
```

在我看来，我有以下几行：

```
by <%= @publication.authors %> 
```

但它不是渲染链接，而是渲染原始代码，例如：

```
by link_to B, Contributor.find(1) 
```

我尝试通过将 .html_safe 添加到 @publication.authors 的末尾来修补此问题，但无济于事。有没有更好的方法将这些链接从模型传输到视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:49:12.873

您正在将字符串推入`authors`数组。它看起来像有效的代码，所以`eval`在它上面运行*应该可以*工作。（实际上`author.name`可能会评估为未定义的符号，所以从头开始。）

更好的方法是在模型上使用`has_many :authors, :model => 'Contributor'`关系，您可以通过简单地调用`Publication`来调出对象数组`Contributor`

```
@publication.authors 
```

你想在你的视图中迭代这些：

```
<% @publication.authors.each do |author| %>
  <%= link_to author.name, author %>
<% end %> 
```

另请注意，如果您`Publication`以这种方式在视图中显示多个对象，则`Publication.includes(:authors)`在检索它们时需要在控制器中使用它们以避免“N+1”问题。

现在，重复三行代码似乎并不是很昂贵，但是有一些方法可以在不违反 MVC 模式并使模型混乱的情况下干掉它：

*   将用于打印出版物作者的代码放入部分中，并根据需要调用部分。
*   将代码放入助手中，包含助手并根据需要调用方法。

这是源代码的一个片段`to_sentence`（我认为您可以根据需要对其进行调整）：

```
case length
  when 0
    ""
  when 1
    self[0].to_s.dup
  when 2
    "#{self[0]}#{options[:two_words_connector]}#{self[1]}"
  else
    "#{self[0...-1].join(options[:words_connector])}#{options[:last_word_connector]}#{self[-1]}"
end 
```

完整的源代码可以在[这里](http://apidock.com/rails/v3.2.8/Array/to_sentence)找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:49:26.753

看起来您正在尝试在您的行中使用 haml 语法。也许不是使用link_to，而是使用html超链接标签本身？

话虽这么说，为什么你有一个模型返回 html？

编辑：bdares 已经回答了我想说的话

# symfony - Doctrine 和 Symfony：魔术方法和缓存

> ID：13460036
> 
> 赞同：4
> 
> 时间：2012-11-19T18:39:27.450
> 
> 标签：symfony, doctrine, doctrine-orm, symfony-2.1

我目前正在实施学说结果缓存，所以我已经设置

```
result_cache_driver: apc 
```

进入我的配置。

然后我已经正确地在存储库中使用了查询缓存，例如

```
->setResultCacheId(sprintf('posts_for_user_%d', $userId)) 
```

当我在教义中使用这些东西时，第一个问题出现了：

```
$repository->findOneBy(array)
$repository->findBy(array) 
```

这可能很容易在存储库中被覆盖。

我无法解决的问题是使用 ParamConverter 来使用学说缓存以及实体关联。

例如，如果我有一个与 Player 具有 OneToMany 关系的 Team 实体，我通常会这样做

```
$team->getPlayers() 
```

我无法控制该查询的缓存。这在某种程度上可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:42:02.860

当您运行 find/findBy 之类的方法或通过 PersistentCollection 执行 $team->getPlayers() 处理时，UoW 使用 EntityPersister 和 ObjectHydrator 加载数据以水合对象。这些对象不支持结果缓存驱动程序。

另一方面，当您使用 DQL 或 QueryBuilder 时，您的代码会生成扩展 AbstractQuery 的 Query 对象。如果您查看 AbstractQuery::execute 内部，您将看到这段漂亮的代码，它使使用结果缓存驱动程序成为可能

```
$cache             = $queryCacheProfile->getResultCacheDriver();
$result            = $cache->fetch($cacheKey);

if (isset($result[$realCacheKey])) {
    return $result[$realCacheKey];
} 
```

所以我的建议 - 尝试使用 QueryBuilder 和 leftJoins 在子集合上加载您的实体。

```
$this->createQueryBuilder('x')->select('x, p')->leftJoin('x.players', 'p')->....; 
```

它将创造使用结果缓存驱动程序的可能性。

# python - ActiveTcl 8.5.11 下载资源

> ID：13460044
> 
> 赞同：0
> 
> 时间：2012-11-19T18:40:01.983
> 
> 标签：python, ide, python-3.x, python-idle, activetcl

嘿，我是 python 开发的新手，刚刚弄清楚 ActiveTcl 的哪个版本适用于我的 python 版本和我的操作系统。我按照 pyhton.org 的链接访问了 ActiveTcl 网站，似乎只能免费下载 8.5.12 和 8.6.0 版本。我想知道网站或网络上是否还有其他地方可以免费下载 ActiveTcl，或者 ActiveTcl 8.5.11 及以下版本是否是我们需要从 ActiveTcl 购买的付费软件包的一部分。

请务必回复，因为我真的很想开始使用 IDLE 进行 python 开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:17:54.123

[这里](http://www.python.org/getit/mac/tcltk/)有关于 Mac OS X 的可用 ActiveTcl 版本的更新信息和下载推荐的 [ActiveTcl 的链接，8.5.11.1](http://downloads.activestate.com/ActiveTcl/releases/8.5.11.1/)

# javascript - PhoneGap 插件：将 JSON 数据传输到本机的最快方法

> ID：13460049
> 
> 赞同：21
> 
> 时间：2012-11-19T18:40:12.060
> 
> 标签：javascript, android, cordova, phonegap-plugins

我一直在开发一个启用 WebGL 的 PhoneGap 插件，旨在将 HTML5 游戏发布到移动设备上。它被称为[WebGLGap](https://github.com/AshleyScirra/WebGLGap)。但是，PhoneGap 调用插件代码的方式（通过 exec）通常涉及将所有参数字符串化为 JSON，然后在另一端再次对其进行解析。根据[this question](https://stackoverflow.com/questions/13422138/phonegap-2-2-how-does-the-new-bridge-work/13425062)，即使在PhoneGap 2.2中也没有改变，它被宣传为具有更快的网桥。对于像 WebGL 这样的东西，这绝对是站不住脚的，即使是简单的演示也会降低性能（<10 FPS）。这是因为在许多情况下，尤其是 2D 游戏，每一帧都必须传输一大块 JSON 数据，表示要运行的所有 WebGL 命令。这包括所有顶点数据 - 想象每帧都有一个巨大的字符串“0.959455、0.959595、0.588575、0.585858...”等。

显然，字符串化和解析是一个不必要且低效的步骤，但我正在努力寻找一种方法将 JSON 数据从 JS 传递到本机，从而避免这种情况。理想情况下，这应该适用于 Android 和 iOS，但我很高兴现在坚持使用仅限 Android 的解决方案。有没有人对最有效的方法有任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T22:58:40.217

Linkedin 将 Web Sockets 用于他们的 iPad 应用程序。可能值得研究：[http ://engineering.linkedin.com/mobile/linkedin-ipad-nativeweb-messaging-bridge-and-websockets](http://engineering.linkedin.com/mobile/linkedin-ipad-nativeweb-messaging-bridge-and-websockets)

您正在寻找的一些好处

*   WebSockets 可以从 JavaScript 异步通信到本机。
*   WebSockets 没有负载限制
*   WebSockets 不需要我们将 JSON 字符串编码为 URL 参数
*   WebSockets 应该比 URL 方案导航更快

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T22:15:48.247

## Addressing performance

Looking at [CordovaPlugin.java](https://github.com/apache/incubator-cordova-android/blob/master/framework/src/org/apache/cordova/api/CordovaPlugin.java), as you mentioned, everything is a `String`:

```
public boolean execute(String action, String rawArgs, CallbackContext callbackContext) throws JSONException {
    JSONArray args = new JSONArray(rawArgs);
    return execute(action, args, callbackContext);
} 
```

If, for example, the conversion from `String` to `JSONArray` is the only bottleneck, then you could override this method in your plugin and perform your own deserialization. It's a small performance improvement, but it might be worth investigating.

## Creating an alternate bridge

As for creating an alternative bridge, that's trickier. I don't know much about Cordova / PhoneGap, but from what research I've gathered, [Cordova exposes a specific Javascript interface](https://github.com/apache/incubator-cordova-android/blob/master/framework/src/org/apache/cordova/CordovaWebView.java#L291) via `addJavascriptInterface`. If you could implement your own [`NativetoJSMessageQueue`](https://github.com/apache/incubator-cordova-android/blob/master/framework/src/org/apache/cordova/NativeToJsMessageQueue.java), you might be able to wire it all together.

**EDIT**
After conducting a bit more research, I can provide a bit more direction. The really relevant part of the NativetoJSMessageQueue is the various [BridgeModes](https://github.com/apache/incubator-cordova-android/blob/master/framework/src/org/apache/cordova/NativeToJsMessageQueue.java#L277) it implements (see [line 92](https://github.com/apache/incubator-cordova-android/blob/master/framework/src/org/apache/cordova/NativeToJsMessageQueue.java#L92)). You could look at the other bridge modes as an example.

Unfortunately, the `NativetoJSMessageQueue` has exactly four bridge modes registered; assuming that you could implement your own bridge mode, you would still need to some how register it as a new mode for the `NativetoJSMessageQueue`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T22:54:35.213

我不确定您到底想做什么，但我注意到在您的项目中您将 JSON 转换为 String，然后您将通过 PhoneGap 插件将其传递，将其转换为 JSON，然后将其转换为 Matrix！

如果您将数据保存在字符串中并将字符串直接转换为矩阵会怎样？这样您就可以跳过与 JSON 之间的转换部分

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T17:11:22.123

在 android 上，您可以尝试使用`addJavascriptInterface`( [link to WebView's documentation](http://developer.android.com/reference/android/webkit/WebView.html) ) 方法`WebView`“将 Java 对象注入 WebView”，这是 PhoneGap 用来添加用于地理定位、文件系统等的 api 的方法。

我想这会比使用插件方法更快（还没有测试过）。

检查`PhoneGapView`扩展的代码`WebView`： [https ://github.com/phonegap/phonegap/blob/3c7324ea8b3944b6e5d3d91e9e328c9c3939464b/android/framework/src/com/phonegap/PhoneGapView.java#L42](https://github.com/phonegap/phonegap/blob/3c7324ea8b3944b6e5d3d91e9e328c9c3939464b/android/framework/src/com/phonegap/PhoneGapView.java#L42)

**更新**

毕竟，这仅适用于简单类型，例如`int`or `String`，就像您在下面的评论中所说的那样。

[在 Android 上使用 addJavascriptInterface() 传递 JavaScript 对象](https://stackoverflow.com/questions/2250917/passing-a-javascript-object-using-addjavascriptinterface-on-android)

尝试不这样做将导致`android.webkit.WebViewCore`和`android.webkit.JWebCoreJavaBridge`类中的异常。

**更新 2**

好吧，您将使用这种方法实现的最佳代码将是这样的（来自[https://github.com/commonsguy/cw-advandroid/blob/master/WebView/GeoWeb1/src/com/commonsware/android/geoweb /GeoWebOne.java#L80](https://github.com/commonsguy/cw-advandroid/blob/master/WebView/GeoWeb1/src/com/commonsware/android/geoweb/GeoWebOne.java#L80)）：

```
public String getLocation() throws JSONException {
  Location loc=myLocationManager.getLastKnownLocation(PROVIDER);

  if (loc==null) {
    return(null);
  }

  JSONObject json=new JSONObject();

  json.put("lat", loc.getLatitude());
  json.put("lon", loc.getLongitude());

  return(json.toString());
} 
```

最有可能的是，所有参数都应该是 string'fied（或 JSON'fied...）

如果您在尝试从 javascript 端创建字符串时遇到性能问题，这可能会对您有所帮助：[http ://www.javascripture.com/ArrayBuffer](http://www.javascripture.com/ArrayBuffer)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T18:32:26.817

鉴于 json 的效率非常低，如果您采用这条路线，您可能会获得很多性能：

服务器端：数据模型-> protobuf（构建（）到二进制）-> 编码 base64（二进制到字符串）-> 添加为一个 json 字段或有效负载（最好是将二进制 blob 作为有效负载传递，但我不确定如果 PhoneGap 允许这样做）

客户端：从 base64 解码（字符串到二进制）-> protobuf（从二进制解析）-> 在代码中尽可能深入地直接使用 protobuf 对象 - 这是非常有效的数据模型

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-29T16:14:30.933

我已经阅读了有关在 png 中编码数据的信息。这是原始文章：[http ://cg.alexandra.dk/2012/11/26/webgl-tutorial-optimizing-data-transfer-for-webgl-applications/](http://cg.alexandra.dk/2012/11/26/webgl-tutorial-optimizing-data-transfer-for-webgl-applications/)

可能有用。

# adobe - Adobe Flash Recorder 不显示视频

> ID：13460050
> 
> 赞同：0
> 
> 时间：2012-11-19T18:40:13.843
> 
> 标签：adobe, webcam, flash, wowza

我正在使用 Adob​​e Flash 录制实时视频并流式传输到 Wowza 媒体服务器。以前在 Mac 和 PC 上的所有浏览器上一切正常。但是现在，对于我的一位使用 PC 的员工来说，Chrome（23 版）、Flash（11 版）出现了一个错误。

本质上，整个 .swf 对象都是可见的，除了您应该能够看到自己的区域——一个白色的屏幕取而代之。当我录制自己说话的视频并播放时，我只能听到音频；我看不到视频。当我离开网站时，他的网络摄像头一直开着。

当他重新启动计算机并先使用 Firefox 或 Skype，然后切换到 Chrome 时，一切都很好。但是当他使用我们的产品并且我们的 .swf 对象是第一个访问他的网络摄像头的程序时，它就不起作用了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:49:00.873

听起来 Chrome 中的 Pepper Flash 播放器又来了。Pepper Flash 是 Adob​​e 和 Google 在 Linux 平台上保持 Flash 播放器活力的尝试。不幸的是，因此，所有 Chrome 用户（无论他们的操作系统如何）都必须处理 Pepper Flash 的错误。

但是，您可以通过访问以下网址在 Chrome 中禁用 Pepper Flash：`chrome://plugins`

寻找 Adob​​e Flash 插件，你可能会发现已经安装了几个。找到路径中包含“pepper”的那个并禁用该插件。您的用户的问题可能会消失。

# java - Jain SIP 获取用户名

> ID：13460053
> 
> 赞同：1
> 
> 时间：2012-11-19T18:40:33.523
> 
> 标签：java, sip, jain-sip

我需要从“发件人”标题中获取分机号码，我已经尝试了所有方法，但没有任何效果。

甚至试图这样做：

```
byte[] raw = req.getRawContent(); 
```

并手动查找 From 和数字，但返回 null

我究竟做错了什么？如何获得该号码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:48:43.873

获取`FromHeader`然后从中提取您需要的信息。例如，如果扩展名是 URI 的用户部分：

```
FromHeader fromHeader = (FromHeader) req.getHeader("From");
Address fromAddress = fromHeader.getAddress();
URI fromURI = fromAddress.getURI();
if (fromURI.isSipURI()) {
  SipURI fromSipURI = (SipURI) fromURI;
  extension = fromSipURI.getUser();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:50:28.860

你看过javadoc吗？

getRawContent() 方法将消息内容作为原始字节数组返回，**如果没有设置内容，则返回 null**

你能再解释一下你的问题吗？我也许可以帮你。

# restlet - restlet 是否包含 XACML？

> ID：13460054
> 
> 赞同：0
> 
> 时间：2012-11-19T18:40:34.070
> 
> 标签：restlet, xacml

Restlet 是否支持 XACML？如果是这样，它是如何使用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T17:14:24.130

您并不特别需要 Restlet 本身的支持。您可以使用 Java XACML PEP SDK 编写将在 Restlet 应用程序中过滤的执行点。

看看 WSO2（开源）或 Axiomatics（供应商）。它们是主要的 XACML 3.0 实现，它们都有 Java SDK 来实现您自己的 PEP，包括对 Restlet 的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:16:10.347

Restlet 目前不支持 XACML。

这件事有一个[悬而未决](http://restlet.tigris.org/issues/show_bug.cgi?id=716)的问题，但已经 4 年没有被触及。它目前被认为是[低优先级](http://wiki.restlet.org/developers/172-restlet/g1/212-restlet.html)的增强。

# javascript - 递归加法

> ID：13460055
> 
> 赞同：2
> 
> 时间：2012-11-19T18:40:39.813
> 
> 标签：javascript, logic

努力写这段代码。

我正在尝试从 2 个对象中计算最大值。我开始了单独的“S”和“P”对象：

```
var S = [
    { id: '1', value: '##' },
    { id: '2', value: '##' },
    { id: '3', value: '##' },
    { id: 'N', value: '##' }
];

var P = [
    { id: '1', value: '##' },
    { id: '2', value: '##' },
    { id: '3', value: '##' },
    { id: 'N', value: '##' }
]; 
```

我创建了第三个对象：

```
var myobject = {
    'S1' = {
        'P1' = '25',
        'P2' = '32',
        'P3' = '65',
        'PN' = '##'
    },
    'S2' = {
        'P1' = '24',
        'P2' = '31',
        'P3' = '64',
        'PN' = '##'
    },
    'S3' = {
        'P1' = '26',
        'P2' = '33',
        'P3' = '66',
        'PN' = '##'
    },
    'SN' = {
        'P1' = '##',
        'P2' = '##',
        'P3' = '##',
        'PN' = '##'
    }
}; 
```

而且我需要遍历所有值以查看组合产生的最高值，例如：

```
S1.P1 + S2.P1 + S3.P1 = ?
S1.P1 + S2.P1 + S3.P2 = ?
S1.P1 + S2.P1 + S3.P3 = ?
S1.P1 + S2.P2 + S3.P1 = ?
S1.P1 + S2.P2 + S3.P2 = ?
S1.P1 + S2.P2 + S3.P3 = ?
... 
```

使用上面的示例值，我正在寻找的答案是：

```
S1.P3 + S2.P3 + S3.P3 = 195 
```

更复杂的是，在某些情况下，“P”值在等式中只能使用一次：

```
var P = [
    { id: '1', value: '##' },
    { id: '2', value: '##' },
    { id: '3', value: '##', once: true },
    { id: 'N', value: '##' }
]; 
```

如果“P3”只能使用一次，我正在寻找的答案，使用上面的示例值，是：

```
S1.P2 + S2.P2 + S3.P3 = 129; 
```

我猜这需要一点递归......但我的头很痛。

**编辑**

我迷失在试图创建计算的循环中，例如：

```
foreach "S"
    foreach "P"
        foreach "S"
            foreach "P"
                .... 
```

建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T18:43:44.773

因为`a + b > a + c`对于 any`a`和 all ，您不能只从每个, , ...`b > c`中获取最大值并将它们加在一起吗？`S1``S2``S3`

我不确定我是否完全理解您在做什么，但这应该有助于避免过多的递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:39:14.287

谢谢大家....我想我有一些有用的东西。

我将对象更改为：

```
var myobject = {
    'S1-P1' = '25',
    'S1-P2' = '32',
    'S1-P3' = '65',
    'S1-PN' = '##'
    'S2-P1' = '24',
    'S2-P2' = '31',
    'S2-P3' = '64',
    'S2-PN' = '##'
    'S3-P1' = '26',
    'S3-P2' = '33',
    'S3-P3' = '66',
    'S3-PN' = '##'
    'SN-P1' = '##',
    'SN-P2' = '##',
    'SN-P3' = '##',
    'SN-PN' = '##'
}; 
```

...并通过它运行它：

```
ids = [];
_.each(S, function(Sn){
    ids.push(Sn.id);
});

var totals = [];
while (ids.length){
    var best = { s_id: null, p_id: null, amount: 0 };
    for (var s1 in myobject) {
        if (best.amount < myobject[s1]){
            id = s1.split('-');
            best = { s_id: id[0], p_id: id[1], amount: myobject[s1] };
        }
    }
    var once = false;
    _.each(P, function(Pn){
        if (Pn.id == best.p_id & Pn.once)
            once = true;
    });
    for (var s2 in myobject) {
        id = s2.split('-');
        if (best.s_id == id[0])
            delete myobject[s2];
        if (once && best.p_id == id[1])
            delete myobject[s2];
    }

    var index = ids.indexOf(best.s_id);
    ids.splice(index, 1);

    totals.push(best);
}
console.log(totals); 
```

....似乎工作。

# php - 将拍卖出价添加到 MySQL 表

> ID：13460057
> 
> 赞同：2
> 
> 时间：2012-11-19T18:40:44.727
> 
> 标签：php, mysql

我目前正在开发一个简单的拍卖网站。我将出价存储在他们自己的名为“出价”的 MySQL 表中。我想知道确保不会同时提交两个相同投标的最佳方法是什么。

我目前验证提交的出价实际上是最高出价的策略是执行以下操作（例如）：

```
$sql = "SELECT * FROM bids WHERE amount >= '".$bidamount."'";
$result = mysql_query($sql);
if(mysql_num_rows($result) == 0) {
    $sql = "INSERT INTO bids SET amount = '".$bidamount."'";
    mysql_query($sql);
    $bidid = mysql_insert_id();
} 
```

上述查询集的问题在于，在运行 SELECT 查询和运行 INSERT 查询之间，另一个用户可以插入相同的出价。

是否有某种方法可以在 SELECT 期间锁定表以防止这种双重出价发生？当你有很多人同时出价时，我对为此目的锁定表的主要担忧是性能问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:09:18.647

您可能想要进行条件插入，例如：

```
$amount = intval($amount);
$query = "
    INSERT INTO 
        bids(amount) 
    SELECT 
        {$amount} 
    FROM 
        (SELECT 1) tmp_tbl 
    WHERE NOT EXISTS(
        SELECT * FROM bids WHERE amount >= {$amount}
    )
"; 
```

并检查受影响的（插入的）行。

# c - 修改 PHP rand 函数

> ID：13460062
> 
> 赞同：3
> 
> 时间：2012-11-19T18:41:06.457
> 
> 标签：c, php-internals

出于测试和学习的目的，我想修改[https://github.com/php/php-src](https://github.com/php/php-src) :ext/standard/rand.c中的 php **rand**和**mt_rand**函数。

我想在每次调用 rand 函数时给出一个固定的输出，为此我修改了代码

```
PHPAPI long php_rand(TSRMLS_D)
{
    long ret;

    if (!BG(rand_is_seeded)) {
        php_srand(GENERATE_SEED() TSRMLS_CC);
    }

#ifdef ZTS
    ret = php_rand_r(&BG(rand_seed));
#else
# if defined(HAVE_RANDOM)
    ret = random();
# elif defined(HAVE_LRAND48)
    ret = lrand48();
# else
    ret = rand();
# endif
#endif

    // ignoring the results coming from the calls above and 
    // returning a constant value 
    ret = 3264;

    return ret;
} 
```

编译

```
./configure
make
make install 
```

最后调用 rand 函数`echo rand(3000,4000);`，它总是返回`3000`。

修改此功能的方法是什么？为什么有`TSRMLS_D`但没有范围参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:04:11.323

从 PHP 调用的实际函数是声明[`PHP_FUNCTION(rand)`](https://github.com/php/php-src/blob/master/ext/standard/rand.c#L290)的函数，它调用[`php_rand()`](https://github.com/php/php-src/blob/master/ext/standard/rand.c#L63)您修改的函数。它执行以下操作：

```
PHP_FUNCTION(rand)
{
    long min;
    long max;
    long number;
    int  argc = ZEND_NUM_ARGS();

    if (argc != 0 && zend_parse_parameters(argc TSRMLS_CC, "ll", &min, &max) == FAILURE)
        return;

    number = php_rand(TSRMLS_C);
    if (argc == 2) {
        RAND_RANGE(number, min, max, PHP_RAND_MAX);
    }

    RETURN_LONG(number);
} 
```

如您所见，如果您传入 2 个参数，它会调用[`RAND_RANGE`](https://github.com/php/php-src/blob/master/ext/standard/php_rand.h#L43)宏，将结果`php_rand()`转换为给定的范围。

```
#define RAND_RANGE(__n, __min, __max, __tmax) \
    (__n) = (__min) + (long) ((double) ( (double) (__max) - (__min) + 1.0) * ((__n) / ((__tmax) + 1.0))) 
```

如果您希望它始终输出给定值，我建议修改`PHP_FUNCTION(rand)`，而不是`php_rand()`.

尽管如果您要寻找的只是稳定的随机数输出，以便每次都能得到相同的结果，但如果您不关心确切的结果，则可以[`srand(0)`](http://php.net/manual/en/function.srand.php)在程序开始时调用，以播种随机数具有恒定值的数字生成器。这意味着随机数生成器将始终为您提供相同的随机数序列，这对于测试目的很有用，并且可以在不修补 PHP 本身的情况下完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:57:14.810

查看 php_rand.h 中定义的 RAND_RANGE 宏。它会对输入值进行一些额外的排列/加扰，以使其适合您指定的范围。

如果您真的希望 rand() 函数返回 3264，即使它不适合传递给 rand() 的参数，请在 rand.c 中删除此块：

```
 if (argc == 2) {
    RAND_RANGE(number, min, max, PHP_RAND_MAX);
} 
```

如果您仍想考虑 min/max，那么如果您指定的 min/max 不包括硬编码的数字，您将需要弄清楚您想要实际执行的操作。

# r - 对多天 xts 的特定时间戳进行采样

> ID：13460065
> 
> 赞同：0
> 
> 时间：2012-11-19T18:41:17.673
> 
> 标签：r, xts

所以我有1分钟分辨率的数据。假设我只想在一小时后的 1 分钟内对我的子集中的每个点进行采样（例如 9:01、10:01...）。我该怎么做呢？我尝试使用端点，但似乎不可能。

编辑：

```
AUD_CAD AUD_CHF AUD_JPY AUD_NZD AUD_USD AUX_AUD BCO_USD CAD_CHF CAD_JPY CHF_JPY ETX_EUR EUR_AUD EUR_CAD EUR_CHF EUR_CZK EUR_DKK EUR_GBP EUR_HUF  EUR_JPY EUR_NOK
2012-09-30 17:01:00 1.020020 0.97523  80.827 1.25020 1.03652      NA      NA 0.95623  79.241 82.8625      NA 1.23938 1.26419 1.20882      NA 7.45529 0.79569 285.598 100.1815 7.36363 
```

这是数据的示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:49:49.330

```
## An example xts object with data pts at each minute in the past 12 hours
library(xts)
times <- seq(Sys.time() - 12*60*60, Sys.time(), by="min")
x <- xts(index(times), times)

## Extract only those occuring at one minute past an hour.
x[strftime(index(x), format="%M") == "01"]
#                     [,1]
# 2012-11-18 23:01:41    4
# 2012-11-19 00:01:41   64
# 2012-11-19 01:01:41  124
# 2012-11-19 02:01:41  184
# 2012-11-19 03:01:41  244
# 2012-11-19 04:01:41  304
# 2012-11-19 05:01:41  364
# 2012-11-19 06:01:41  424
# 2012-11-19 07:01:41  484
# 2012-11-19 08:01:41  544
# 2012-11-19 09:01:41  604
# 2012-11-19 10:01:41  664 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:16:03.910

如果您使用`.indexmin`. 假设您的 xts 对象名为`x`：

```
x[.indexmin(x)==1,] 
```

# sql - 从不同的表中查找记录

> ID：13460067
> 
> 赞同：0
> 
> 时间：2012-11-19T18:41:19.047
> 
> 标签：sql, oracle, oracle10g

**要求**

> 查找并显示在“通勤”类型和“普通”类型的飞机上执行航班的所有飞行员（员工 ID 和姓名）。

![在此处输入图像描述](../Images/009846d2db6f17162d0cb2f9cabfa4d9.png)

![在此处输入图像描述](../Images/546ed8069618c585ae4334c16aaca930.png)

![在此处输入图像描述](../Images/faa1794c6d7e4899e1f13085ccb35df2.png)

```
1st image is Plane_new table
2nd image is FlightI_new table
3rd image is Employee_new table 
```

**解决方案**

```
SELECT flightI_new.eid, employee_new.ename
FROM flightI_new
INNER JOIN employee_new ON flightI_new.eid = employee_new.eid
INNER JOIN plane_new ON flightI_new.pnum = plane_new.pnum
WHERE plane_new.ptype = 'Commuter' AND plane_new.ptype = 'Normal'; 
```

该代码适用于**OR**，但由于某种原因，我得到“没有返回行”。

知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:46:29.877

您`AND`不起作用，因为记录不能同时`ptype`在同一记录上。但是你应该能够使用这样的东西：

```
SELECT flightI_new.eid, employee_new.ename
FROM flightI_new
INNER JOIN employee_new 
    ON flightI_new.eid = employee_new.eid
INNER JOIN plane_new 
    ON flightI_new.pnum = plane_new.pnum
WHERE plane_new.ptype IN ('Commuter', 'Normal')
GROUP BY flightI_new.eid, employee_new.ename
HAVING count(distinct plane_new.ptype) = 2; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/1a205/8)

你可以使用这样的东西：

```
SELECT distinct flightI_new."eid", employee_new."name"
FROM flightI_new
INNER JOIN employee_new 
    ON flightI_new."eid" = employee_new."eid"
INNER JOIN plane_new 
    ON flightI_new."pnum" = plane_new."pnum"
WHERE plane_new."ptype" = 'commuter'
  AND flightI_new."eid" IN (select flightI_new."eid"
                            FROM flightI_new
                            INNER JOIN employee_new 
                                ON flightI_new."eid" = employee_new."eid"
                            INNER JOIN plane_new 
                                ON flightI_new."pnum" = plane_new."pnum"
                            WHERE plane_new."ptype" = 'normal') 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/1a205/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:17:18.263

错误就在这里

```
 WHERE plane_new.ptype = 'Commuter' AND plane_new.ptype = 'Normal'; 
```

plane_new.ptype 在你的数据库中不能有两个东西，computer 和 normal，它必须是其中之一，这就是为什么你没有返回任何行。所以也许你的意思是别的。在您的 WHERE 语句中，您只能使用`OR`. 他们返回的行是那些拥有`computer`和`normal`

# php - 方法重载：function __call($method, $arg)

> ID：13460070
> 
> 赞同：0
> 
> 时间：2012-11-19T18:41:25.053
> 
> 标签：php

我有两个班级：地址和学生。我需要编写 __call() 函数，以便可以使用学生实例检索和分配街道、城市和州的属性。

这是我的输出（我对 __call() 进行了编码，但到目前为止它仅适用于最后一行输出）：

```
John Smith
50
, ,
The address has been updated:
50 second street, Palo Alto, CA 
```

输出的第三行应该是：

```
100 main street, Sunnyvale, CA 
```

这就是我得到堆栈的地方。

这是我的代码。我将不胜感激。

```
<?php
class Address {
private $street;
private $city;
private $state;

function __construct($s, $c, $st) {
    $this->street = $s;
    $this->city = $c;
    $this->state = $st;
}
function setCity($c) {
    $this->city = $c;
}
function getCity() {
    return $this->city;
}
function setState($s) {
    $this->state = $s;
}
function getState() {
    return $this->state;
}
function setStreet($s) {
    $this->street = $s;
}
function getStreet() {
    return $this->street;
}
}
class Student {
private $name;
private $age;
private $address;

function __construct($n, $a, Address $address) {
    $this->name = $n;
    $this->age = $a;
    $this->address = $address;
}

function getName() {
    return ucwords($this->name);
}

function getAge() {
    return $this->age;
}

function setName($n) {
    $this->name = $n;
}

function setAge($a) {
    $this->age = $a;
}

function __set($name, $value) {
    $set = "set".ucfirst($name);
    $this->$set($value);
}

function __get($name) {
    $get = "get".ucfirst($name);
    return $this->$get();
}

function __call($method, $arguments) {
    // Need more code 

    $mode = substr($method,0,3);
    $var = strtolower(substr($method,3));
    if ($mode =='get'){
        if (isset($this -> $var)){
            return $this ->$var;
        }
    } elseif ($mode == 'set') {
        $this ->$var = $arguments[0];
        }
    } 

}
$s = new Student('john smith', 50, '100 main street', 'Sunnyvale', 'CA');
echo $s->name;
echo "\n";
echo $s->age;
echo "\n";
echo $s->address->street . ", " . $s->address->city . ", " . $s->address->state;
echo "\n";
$s->street = "50 second street";
$s->city = "Palo Alto";
$s->state = "CA";
echo "The address has been updated:\n";
echo $s->street . ", " . $s->city . ", " . $s->state;

//print_r($s);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:56:15.273

,和必须是`street`,或使用吸气剂。`city``state``public`

接下来改变：

```
$s = new Student('john smith', 50, '100 main street', 'Sunnyvale', 'CA'); 
```

接下来：

```
$s = new Student('john smith', 50, new Address('100 main street', 'Sunnyvale', 'CA')); 
```

接下来改变：

```
echo $s->address->street . ", " . $s->address->city . ", " . $s->address->state; 
```

接下来：

```
echo $s->address->getStreet() . ", " . $s->address->getCity() . ", " . $s->address->getState(); 
```

Student构造函数需要一个Address对象，并且属性“street”、“city”和“state”是“private”，需要使用“getters”。

;-)

# c - 可以在被调用函数中 malloc 数组但在调用函数中释放它吗？

> ID：13460072
> 
> 赞同：4
> 
> 时间：2012-11-19T18:41:28.827
> 
> 标签：c

我不是 C 方面的专家，但这是我正在尝试做的事情：

```
int main(void) {
    double *myArray;
    ...
    myFunction(myArray);
    ...
    /* save myArray contents to file */
    ...
    free(myArray);
    ...
    return 0;
}

int myFunction(double *myArray) {
    int len=0;
    ...
    /* compute len */
    ...
    myArray = malloc( sizeof(double) * len );
    if (myArray == NULL) 
      exit(1);
    ...
    /* populate myArray */
    ...
    return 0;
} 
```

我想保存`myArray`inside的内容`main`，但在程序进入 inside 之前我不知道所需的大小`myFunction`。

由于我使用的是 CentOS 6.2 Linux，因此我只能找到最高 4.4.6 的 gcc 构建（它不支持声明可变长度数组的 C99 功能；请参阅“可变长度数组”下的“损坏” [http://gcc.gnu.org/gcc-4.4/c99status.html](http://gcc.gnu.org/gcc-4.4/c99status.html)），我被困`-std=c89`在编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:45:08.303

简单的答案是否定的。

您没有传回指针。

利用

```
int main(void) {
    double *myArray;
    ...
    myFunction(&myArray);
    ...
    /* save myArray contents to file */
    ...
    free(myArray);
    ...
    return 0;
}

int myFunction(double **myArray) {
    int len=0;
    ...
    /* compute len */
    ...
    *myArray = malloc( sizeof(double) * len );
    if (NULL == *myArray) 
      exit(1);
    ... 
```

**编辑**

```
 poputateThis = *myArray;

    /* populate poputateThis */ 
```

**编辑结束**

```
 ...
    return 0; 
```

**编辑**

应该为您简化 }

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:43:14.840

您正在做的事情不好，因为`myFunction`不会更改`myArray`main 中的值；它只是更改自己的副本。

除此之外，即使在风格上值得商榷，也没关系。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T18:47:50.787

作为良好设计和实践的问题（除了其他答案中指出的语法问题），只要它与您的代码库的最佳实践一致并且透明，就可以了。您的函数应该记录在案，以便调用者知道它必须释放并且知道不分配自己的内存。此外，考虑制作一个抽象数据类型，例如：

```
// myarray.h
   struct myarray_t;
   int myarray_init(myarray_t* array); //int for return code
   int myarray_cleanup(myarray_t* array); // will clean up 
```

`myarray_t`将保存一个动态指针，该指针将从调用函数中封装，尽管在`init`和`cleanup`函数中它将分别分配和释放。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T18:49:48.587

你想做的很好，但你的代码没有这样做——`main`永远不会看到分配的内存。的参数使用函数调用中传递`myArray`的`myFunction`值进行初始化，但此后修改它不会修改`main`.

它出现在您`myFunction`始终返回的代码片段中`0`。如果是这样，那么修复代码的最明显方法是返回`myArray`（并且不带参数）。然后调用`main`看起来像`myArray = myFunction();`。

如果`myFunction`实际上已经使用了它的返回值，那么您可以传入一个指向 的*指针*，`double*`并将地址写入该指针的引用。这就是 Ed Heal 的回答。该`double **`参数通常称为“out-param”，因为它是指向函数用于存储其输出的位置的指针。在这种情况下，输出是缓冲区的地址。

另一种方法是做这样的事情：

```
size_t myFunction(double *myArray, size_t buf_len) {
    int len=0;
    ...
    /* compute len */
    ...
    if (buf_len < len) {
        return len;
    }
    /* populate myArray */
    ...
    return len;
} 
```

然后调用者可以自由地以任何他们喜欢的方式分配内存。典型的调用代码可能如下所示：

```
size_t len = myFunction(NULL, 0);
// warning -- watch the case where len == 0, if that is possible
double *myArray = malloc(len * sizeof(*myArray));
if (!myArray) exit(1);
myFunction(myArray, len);
...
free(myArray); 
```

您获得的是调用者可以从任何方便的地方分配内存。您失去的是调用者必须编写更多代码。

对于如何使用这种自由的示例，调用者可以写：

```
#define SMALLSIZE 10;

void one_of_several_jobs() {
    // doesn't usually require much space, occasionally does
    double smallbuf[SMALLSIZE];
    double *buf = 0;

    size_t len = myFunction(smallbuf, SMALLSIZE);
    if (len > SMALLSIZE) {
        double *buf = malloc(len * sizeof(*buf));
        if (!buf) {
            puts("this job is too big, skipping it and moving to the next one");
            return;
        }
    } else {
        buf = smallbuf;
    }

    // use buf and len for something
    ...

    if (buf != smallbuf) free(buf);
} 
```

这通常是一种不必要的优化，以避免`malloc`在只需要一个小缓冲区的常见情况下进行 - 这只是调用者可能想要对如何分配内存有发言权的一个例子。一个更紧迫的原因可能是您的函数被编译成与调用者函数不同的 dll，可能使用不同的编译器，并且两者不使用兼容的`malloc/free`.

# css - 调整窗口大小时，如何使 div 及其文本消失？

> ID：13460076
> 
> 赞同：0
> 
> 时间：2012-11-19T18:41:38.613
> 
> 标签：css, html, position

我有一个大容器（超过 2400 像素宽），里面有 2 个 DIV（见附图）。当窗口调整大小或计算机支持的分辨率较低时，**只有 DIV 1 应该可见，然后 DIV 2 应该消失**。

我试过了：

```
@media all and (max-width: 1800px) {
  #DIV2 { display: none; }
} 
```

当然，它确实有效，但我希望 DIV2 中的文本在调整窗口大小时保持在其位置而不向左移动——即使它只有几个像素。我玩弄了**position**属性和**margins**，但是没有用。如何修复文本？

提前致谢！

![全分辨率/大窗口](../Images/5f1e9fd505a6d0744dfdbf65a51aea87.png)

![小分辨率/小窗口](../Images/2e2f89742b83e8617253609957d3bc93.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:46:48.980

您可以使用`border:none`此问题代替`display:none`：

```
@media all and (max-width: 1800px) {
  #DIV2 { border: none; }
} 
```

# javascript - ExtJS4 获取一个商店的成员

> ID：13460077
> 
> 赞同：1
> 
> 时间：2012-11-19T18:41:39.533
> 
> 标签：javascript, extjs4

如何根据商品的属性在 ExtJS4 上的商店范围内获取商品的元素 ID？例如，我得到的商店如下：

```
var combobox = Ext.ComponentQuery.query('[xtype=mycombobox]')[0];
var items = combobox.getStore().getRange(); 
```

我想根据用户在其他地方选择的 productid 跳转到组合框中的正确项目：

```
combobox.select(elementid); 
```

我只是错过了让我说的逻辑

```
elementid = items.getWhere('prodid', 'productid'); // Or however its actually done. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:23:40.130

这就是我最终想出的，实际上需要两个单独的电话。不确定这是否是最有效的方法，但它似乎有效。

首先，我需要获得 productid 等于 value 的模型：

```
var model = combobox.getStore().findRecord('productId', value); 
```

然后，我需要弄清楚该模型在整个商店中的索引是什么：

```
var index = combobox.getStore().indexOf(model); 
```

然后我可以获取索引并将其应用回组合框：

```
combobox.select(index); 
```

# css - 调整窗口大小时调整图像大小而不在图像之间留下间隙

> ID：13460078
> 
> 赞同：2
> 
> 时间：2012-11-19T18:41:41.163
> 
> 标签：css, autoresize

我正在尝试建立一个网站，其中 4 列图像跨越整个页面。当用户重新调整浏览器的大小时，我希望这些图像也重新调整大小，当然是成比例的。我的问题是，如果窗口小于图像的最大宽度尺寸，我可以让这些图像正确调整大小。但是，如果浏览器较大，则列之间存在较大间隙。我希望图像相互堆叠，中间没有间隙。任何想法？我的替代解决方案是，如果浏览器更大，我希望将仍然相互堆叠的图像列放在页面中间。我不知道该怎么做。

代码如下。

HTML：

```
<body background="Images/BG_paper_008_dark.jpg">
<div id="header">
<div id="logo"><img src="Images/DTP_logo_final_white.gif" /></div>
<div id="menu">Wedding | Engagement | Family/Portrait | Products | Action | The world through my eyes </div>
</div>

<div id="midbody">
<div id="mainImg1"><img src="Images/FrontPage_L1_Image1.jpg" alt="Horse racing"/>
                   <img src="Images/FrontPage_L1_Image2.jpg" alt="Horse racing"/></div>
<div id="mainImg2"><img src="Images/FrontPage_L1_Image3.jpg" alt="Horse racing"/>
<img src="Images/FrontPage_L1_Image4.jpg" alt="Horse racing"/> </div>
<div id="mainImg3"><img src="Images/FrontPage_L1_Image5.jpg" alt="Horse racing"/>
<img src="Images/FrontPage_L1_Image6.jpg" alt="Horse racing"/></div>
<div id="mainImg4"><img src="Images/FrontPage_L1_Image7.jpg" alt="Horse racing"/>
<img src="Images/FrontPage_L1_Image8.jpg" alt="Horse racing"/></div>  
</div>
</body> 
```

CSS

```
#midbody {
clear: both;
width: 100%;
text-align: center;
}

#mainImg1 {
width: 25%;
clear: left;
float: left;
text-align: center;

}
#mainImg2 {
width: 25%;
float: left;
text-align: center;
}
#mainImg3 {
width: 25%;
float: left;
text-align: center;
}
#mainImg4 {
width: 25%;
clear: right;
float: left;
text-align: center;
}

img {
max-width: 100%;
height: auto;
width: auto\9; /* ie8 */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:22:17.850

为什么不能将 img 类设置为 width:100% 而不是使用最大宽度？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:48:45.013

我猜您不希望图像的缩放比例大于其“固有”宽度？

如果您知道图像的最大宽度，您可以在“中间体”中添加一个包含 100% 宽（继承自中间体）的 DIV，但其最大宽度为其中图像的总最大宽度：.. .

如果您不知道图像的总最大宽度，我认为您将不得不使用 javascript 或 PHP 或类似的东西，因为您将无法让 DIV 继承最大宽度。

# android - 设置运行参数？

> ID：13460082
> 
> 赞同：1
> 
> 时间：2012-11-19T18:42:11.780
> 
> 标签：android, runtime, dalvik

我将如何在 Android 上设置运行时参数以与 dalvik 一起使用？
例如，我会在使用“常规”JVM（如 Windows）的系统上使用 -Dsvnkit.http.sslProtocols=TLSv1 设置我需要的运行时参数。
我将如何为我的 Android 应用程序做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:49:52.493

你没有。您无法控制普通 Android 应用程序的此类运行时参数，即使 Dalvik 虚拟机使用此类参数也是如此。

需要此类参数的库（相对于也具有用于传递值的 API）可能需要修改为与 Android 兼容。

# ruby - 狼蛛 - 红宝石问题

> ID：13460085
> 
> 赞同：1
> 
> 时间：2012-11-19T18:42:32.013
> 
> 标签：ruby, rake, fedora, tarantula

我正在尝试使用 (https://github.com/prove/tarantula) 上的文档在 Fedora（内核 3.6.5-2.fc16.x86_64）上安装 Tarantula（ [http://www.testiatarantula.com/ ）。](http://www.testiatarantula.com/)

我遇到的问题是 Ruby 错误 (A) ：

```
/opt/tarantula/config/initializers/session_store.rb:3: syntax error, unexpected ':', 
expecting $end ...sion_store :cookie_store, key: '_tarantula_session'
                                              ^

Tasks: TOP => db:schema:load => environment
(See full trace by running task with --trace) 
```

执行命令时：

```
 sudo RAILS_ENV=test bundle exec rake tarantula:install 
```

这

```
 bundle exec 
```

命令用于克服另一个错误（B）：

```
sudo RAILS_ENV=production rake tarantula:install 
[sudo] password for admin: 
rake aborted!
You have already activated rake 10.0.2, but your Gemfile requires rake 0.9.2.2\. Using   
bundle exec may solve this.
/opt/tarantula/config/boot.rb:6
/opt/tarantula/config/application.rb:1
/opt/tarantula/Rakefile:5
(See full trace by running task with --trace) 
```

错误（A）可以追溯到[https://github.com/prove/tarantula/blob/master/config/initializers/session_store.rb](https://github.com/prove/tarantula/blob/master/config/initializers/session_store.rb)。

使用

```
--trace 
```

输出是：

```
sudo RAILS_ENV=production rake tarantula:install --trace
rake aborted!
You have already activated rake 10.0.2, but your Gemfile requires rake 0.9.2.2\. Using bundle exec may solve this.
/usr/lib/ruby/gems/1.8/gems/bundler-1.2.2/lib/bundler/runtime.rb:31:in `setup'
/usr/lib/ruby/gems/1.8/gems/bundler-1.2.2/lib/bundler/runtime.rb:17:in `setup'
/usr/lib/ruby/gems/1.8/gems/bundler-1.2.2/lib/bundler.rb:116:in `setup'
/usr/lib/ruby/gems/1.8/gems/bundler-1.2.2/lib/bundler/setup.rb:7
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:59:in `gem_original_require'
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:59:in `require'
/opt/tarantula/config/boot.rb:6
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
/opt/tarantula/config/application.rb:1
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
/opt/tarantula/Rakefile:5
/usr/lib/ruby/gems/1.8/gems/rake-10.0.2/lib/rake/rake_module.rb:25:in `load'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:581:in `raw_load_rakefile'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:87:in `load_rakefile'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:86:in `load_rakefile'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:70:in `run'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.2/lib/rake/application.rb:68:in `run'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.2/bin/rake:37
/usr/bin/rake:19:in `load'
/usr/bin/rake:19 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:47:02.257

指定要在 Gemfile 中使用的 rake 版本：

```
gem 'rake', '=0.9.2.2' 
```

和`bundle update`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:55:27.513

用这条线试试你`session_store.rb`的：

`Tarantula::Application.config.session_store :cookie_store, :key => '_tarantula_session'`

您正在运行的 Ruby 版本是什么？我怀疑它是 1.8.7 吗？

`ruby -v`对于 Ruby 版本。

**编辑**

在`wrap_parameters.rb`第 8 行：

```
wrap_parameters :format => [:json] 
```

# javascript - 如何使用 javascript 用多个图像替换 HTML 按钮？

> ID：13460086
> 
> 赞同：0
> 
> 时间：2012-11-19T18:42:29.477
> 
> 标签：javascript, dom, button

我目前有：

```
//javascript
function morshots()
{
    var mordor = document.getElementById("ss1");
    var shots= (
    mordor.innerHTML = <img src="http://i.imgur.com/83HCt.png" alt="scrns1"><img src="http://i.imgur.com/5mWIy.png" alt="scrns2"><img src="http://i.imgur.com/pPafl.png" alt="scrns3">;
} 
```

和

```
<!--html-->
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="screenshots.js"></script>
    </head>
    <body>
        <div id="ss1">
            <button onClick="morshots();">View Screenshots</button>
        </div>
    </body>
</html> 
```

目前，该按钮在单击时不执行任何操作。我想要的是图像替换页面上的按钮。这不是我的全部代码，但是为了便于阅读，我省略了不相关的一段代码。

- 编辑 -

我为图像标签周围的内部引号和非转义引号添加了转义符。我仍然得到与页面相同的结果（按钮单击什么都不做）

```
function morshots()
{
var mordor = document.getElementById("ss1");
mordor.innerHTML = '<img src=\"http://i.imgur.com/83HCt.png\" alt=\"scrns1\"><img src=\"http://i.imgur.com/5mWIy.png\" alt=\"scrns2\"><img src=\"http://i.imgur.com/pPafl.png\" alt=\"scrns3\">';
}' 
```

--- EDIT2:----

修复它，工作代码如下：

```
function morshots()
{var mordor = document.getElementById("ss1");
mordor.innerHTML = '<img src=\"http://i.imgur.com/83HCt.png\" alt=\"scrns1\"><img src=\"http://i.imgur.com/5mWIy.png\" alt=\"scrns2\"><img src=\"http://i.imgur.com/pPafl.png\" alt=\"scrns3\">';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:47:42.873

`<img>`在引号内添加s：

```
function morshots()
{
    var mordor = document.getElementById("ss1");
    mordor.innerHTML = '<img src="http://i.imgur.com/83HCt.png" alt="scrns1"><img src="http://i.imgur.com/5mWIy.png" alt="scrns2"><img src="http://i.imgur.com/pPafl.png" alt="scrns3">';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:55:26.897

添加引号并使用 html 在它们之前添加反斜杠 \ 转义它们：

```
var mordor = document.getElementById("ss1");
mordor.onclick = function () {
  var shots= "<img src=\"http://i.imgur.com/83HCt.png\" alt=\"scrns1\"><img src=\"http://i.imgur.com/5mWIy.png\" alt=\"scrns2\"><img src=\"http://i.imgur.com/pPafl.png\" alt=\"scrns3\">";
  mordor.innerHTML = shots;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:48:17.127

你检查你的 JavaScript 控制台是否有错误？

```
// syntax error:
var shots= (

// syntax error:
mordor.innerHTML = <img src="http://i.imgur.com/83HCt.png" alt="scrns1"><img src="http://i.imgur.com/5mWIy.png" alt="scrns2"><img src="http://i.imgur.com/pPafl.png" alt="scrns3">; 
```

您需要将字符串传递给`mordor.innerHTML`- 将您的 html 用引号括起来。我不确定你要做什么`shots`。

# c++ - 为什么没有发出 QThread::finished 信号？

> ID：13460096
> 
> 赞同：2
> 
> 时间：2012-11-19T18:43:16.747
> 
> 标签：c++, multithreading, qt, concurrency, qthread

我创建了我自己的`TestService`，它在单独`QThread`的. 我看到[了一个类似的问题](https://stackoverflow.com/questions/12946209/qthreadfinished-is-never-emitted)，但是那里的问题略有不同，因为 OP 超载，而我只是将我的课程移到了线程中。`MainLoop``QThread::finished``QThread`

请注意，**我没有重载**`QThread`类，我只`QObject`根据这个例子重载：http: [//mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation /](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)

这是我的`TestService`课：

```
#include <QObject>
#include <QThread>
#include <QMutex>
#include <QWaitCondition>
#include <iostream>

using namespace std;
class TestService: public QObject
{
    Q_OBJECT;
private:
    volatile int _count;
    QWaitCondition _monitor;
    QMutex _mutex;
    QThread* _thread;

public:
    TestService(int numSeconds)
    {
        _count = numSeconds;
        _thread = NULL;
        cout << "TestService()" << endl;
    }

    virtual ~TestService()
    {
        cout << "~TestService()" << endl;
    }

    void Start()
    {
        QMutexLocker locker(&_mutex);
        if(_thread == NULL)
        {
            _thread = new QThread;

            // Move this service to a new thread
            this->moveToThread(_thread);

            // The main loop will be executed when the thread
            // signals that it has started.
            connect(_thread, SIGNAL(started()), this, SLOT(MainLoop()));

            // Make sure that we notify ourselves when the thread
            // is finished in order to correctly clean-up the thread.
            connect(_thread, SIGNAL(finished()), this, SLOT(OnFinished()));

            // The thread will quit when the sercives
            // signals that it's finished.
            connect(this, SIGNAL(Finished()), _thread, SLOT(quit()));

            // The thread will be scheduled for deletion when the 
            // service signals that it's finished
            connect(this, SIGNAL(Finished()), _thread, SLOT(deleteLater()));

            // Start the thread
            _thread->start();
        }
    }

    void Stop()
    {
        _count = 0;
        _monitor.wakeAll();
    }
private slots:
    void MainLoop()
    {
        cout << "MainLoop() Entered" << endl;
        while(_count > 0)
        {
            cout << "T minus " << _count << " seconds." << endl;

            QMutexLocker locker(&_mutex);
            _monitor.wait(&_mutex, 1000);
            _count--;
        }
        cout << "MainLoop() Finished" << endl;
        emit Finished();
    }

    virtual void OnFinished()
    {
        cout << "OnFinished()" << endl;
    }
signals:
    void Finished();
}; 
```

这是测试代码：

```
void ServiceTest()
{
    cout << "Press q to quit." << endl;
    cout << "Press s to start." << endl;
    cout << "Press t to stop." << endl;
    QSharedPointer<TestService> testService(new TestService(10));
    char in = 'a';
    while( in != 'q' )
    {
        switch(tolower(in))
        {
        case 's':
            testService->Start();
            break;
        case 't':
            testService->Stop();
            break;
        default:
            break;
        }
        cin.get(in);
        in = tolower(in);
    }
}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    ServiceTest();

    QTimer::singleShot(0, &a, SLOT(quit()));

    return a.exec();
} 
```

输出是：

```
Press q to quit.
Press s to start.
Press t to stop.
TestService()
s
MainLoop() Entered
T minus 10 seconds.
T minus 9 seconds.
T minus 8 seconds.
t
MainLoop() Finished
q
~TestService()
Press any key to continue . . . 
```

任何人都可以解释为什么`finished`没有被发射我该如何解决它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T18:56:42.023

信号已完成（）因原因而发出，但您没有抓住它。

这里：

```
connect(_thread, SIGNAL(finished()), this, SLOT(OnFinished())); 
```

`Qt::QueuedConnection`被使用，因为`_thread`和`this`(service) 在不同的线程中。

在`finished()`发出的时候，`_thread`的事件循环已经完成执行，所以信号不会被传递到插槽。

您可以显式使用`Qt::DirectConnection`.

*编辑：*

QTherad 的工作原理是这样的：

```
QThread::start()
{
    emit started();
    run();
    emit finished();
}

QThread::run()
{
     eventloop->exec();
} 
```

因此，在`finished`发出时，eventloop 已经停止执行。当你移动`service`到 时`_thread`，服务的事件循环就是`_thread`事件循环。

请注意，它`QObject`本身没有自己的事件循环。事件循环由对话框、线程和应用程序创建。

* * *

实际上，我会建议在您的简单情况下只使用[`QtConcurent::run`](http://doc.qt.digia.com/qt/threads-qtconcurrent.html)，因为您不在新线程中执行实际的事件处理，而只是运行单个函数。

# assembly - 显示来自 ascii 十六进制值数组的字符串汇编语言

> ID：13460100
> 
> 赞同：3
> 
> 时间：2012-11-19T18:43:52.947
> 
> 标签：assembly, ascii, tasm

好的，我正在为基于英特尔的计算机作业组装，为了简单起见，教授让我们在 16 位上工作。分配是获取用户输入的数字并将其从 ASCII 转换为整数，然后将该整数存储在数组中。我的这部分工作正常。然后我们从数组中取出整数并将它们转换回 ASCII 并打印到屏幕上。在我打印之前，这在大多数情况下也可以正常工作。

我使用 tasm，当我使用调试器跟踪我的代码时，它会显示它应该显示的数字，但它们被很多空白空间和一些奇怪的字符包围。然后，当我尝试在命令提示符下运行代码时，我得到的只是一些非常混乱的字符，然后它似乎崩溃了。

编辑：现在打印工作正常，但我意识到其余的比我想象的更糟糕。例如，如果我输入任何低于 2559 的数字，它似乎工作得很好，但如果我输入任何数字 2560 或以上，我会得到除以零的错误。对此的任何帮助将不胜感激。

代码应该如何工作
它会提示您输入一个数字（该数字应该可以是任何无符号的 16 位整数）
您输入一个数字并按 Enter 输入
另一个数字按 Enter
输入另一个数字按 Enter（应该能够向上输入以这种方式最多输入 10 个数字）
当您输入完数字后，输入减号“-”
，然后它应该向您重复您输入的数字

这是我的代码：

```
.MODEL small

.STACK 200h
CR EQU 13
LF EQU 10

.DATA
;variables used by InputNumber procedure
BinaryValue dw 0
CharacterCount dw 0
Index dw 0
Multiplier dw 1
InputString db 7 dup (0)
prompt2 db 'Enter A Number:', '$'

;variables used by LoadArray prcedure
prompt1 db 'You may enter up to 10 positive integers then enter a -1', CR, LF,  '$'
userFlag db 0
numberArray dw 10 dup (0)
numArraySize dw 0

;variables for PrintArray
prompt3 db 'Array data is:', '$'
numSize dw 0

.CODE
Main proc
    MOV ax, @data
    MOV ds, ax
    CALL LoadArray
    CALL PrintArray
    MOV ax, 4c00h
    INT 21h
Main endp

LoadArray proc
    ; informs the user to enter numbers then enter a -1
    MOV ah, 09h
    MOV dx, offset prompt1
    INT 21h

    Mov di, 0
    While1:
        Mov BinaryValue, 0
        Mov CharacterCount, 0
        Mov Index, 0
        Mov Multiplier, 1
        Call InputNumber
        Cmp userFlag, 0
        Jne endWhile1
        Mov bx, BinaryValue
        Mov numberArray[di], bx
        Inc di
        Inc di
        jmp While1
    endWhile1:
    Mov numArraySize, di
    RET
LoadArray endp

InputNumber proc
    MOV ah, 09h
    MOV dx, offset prompt2
    INT 21h

    ;Get character from keyboard
    Mov ah, 01h
    Int 21h

    ;while that character is not the enter key keep getting keys from the keyboard
    Mov si, CharacterCount
    while2:
        Cmp al, 0Dh
        Je endWhile2
        Cmp al, 2Dh
        Je endOfProc
        Mov InputString[si], al
        Inc si
        Mov ah, 01h
        Int 21h
        jmp while2
    endWhile2:
    Mov CharacterCount, si

    ;initializing multiplier and index to the values needed
    Mov Multiplier, 1
    Dec si
    Mov Index, si

    ;loop through InputString array pulling out each character, convert it by removing its ascii bits and muliplying it by its place value  
    Mov cx, CharacterCount
    Mov CharacterCount, 0
    convertLoop:
        Mov al, InputString[si]
        And ax, 0Fh
        Mul Multiplier
        Add BinaryValue, ax
        Mov ax, 10
        Mul Multiplier
        Mov Multiplier, ax
        Dec si
        Loop convertLoop
    RET
endOfProc:
    Mov userFlag, 1
    RET
InputNumber endp

PrintArray proc
    MOV ah, 09h
    MOV dx, offset prompt3
    INT 21h

    Mov si, 0
    doWhile1:
        Mov bx, numberArray[si]
        Mov BinaryValue, bx
        call DisplayNumber
        Inc si
        Inc si
        Cmp si, numArraySize
        jb doWhile1
    RET
PrintArray endp

DisplayNumber proc
    Mov ax, BinaryValue
    ;determine size of the number in BinaryValue
    loop1:
        Mov bl, 10
        Div bl
        cmp al, 0 
        je end1
        Inc numSize
        Mov ah, 0
        jmp loop1
    end1:
    Inc numSize
    Mov di, numSize
    Mov InputString[di], '$'
    dec di
    Mov ax, 0
    Mov ax, BinaryValue
    while3:
        cmp ax, 10
        jb endWhile3
        Div bl
        Or ah, 30h
        Mov InputString[di], ah
        Mov ah, 0
        dec di
        jmp While3
    endWhile3:
    Or al, 30h
    Mov InputString[di], al

    ;print the ascii characters stored in InputString to the screen
    Mov dx, word ptr InputString[di]
    Mov ah, 09h
    Int 21h
    Ret
DisplayNumber endp
end main 
```

我会一直工作到它工作为止，因为我需要它来完成以后的任务。任何帮助将非常感激。即使它是关于如何清理代码或使其更好或更易读（包括样式）的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-14T09:49:01.050

我查看了您的代码，只注意了您问题的这一部分：

> 编辑：现在打印工作正常，但我意识到其余的比我想象的更糟糕。例如，如果我输入任何低于 2559 的数字，它似乎工作得很好，但如果我输入任何数字 2560 或以上，我会得到除以零的错误。对此的任何帮助将不胜感激。

问题出在`DisplayNumber`这里：

```
Mov ax, BinaryValue
;determine size of the number in BinaryValue
loop1:
    Mov bl, 10
    Div bl
    cmp al, 0 
    je end1 
```

`Div bl`是 8 位除以寄存器，所以源是`ax`. 它进行除法，并将结果`al`和余数放入`ah`- 如下语句`cmp al,0`测试。

问题是，如果除法的结果不适合`al`- 这正是`BinaryValue`2560 或更大时发生的情况：`2560 / 10 = 256`，不适合`al`. 所以处理器引发了一个`Divide`异常——俗称，`Division by zero`因为这是获得它的最简单方法，但在其他情况下也会引发它。

# asp.net - Oracle osuser - 它在 asp.net nHibernate 中的哪里指定？

> ID：13460101
> 
> 赞同：0
> 
> 时间：2012-11-19T18:43:55.293
> 
> 标签：asp.net, oracle, nhibernate

我们有一个使用 nHibernate 和 Oracle 后端数据库的 asp.net Web 应用程序。我们发现，在不同的环境（即开发和生产）中，osuser 登录 Oracle 时具有不同的值/字符串。那么Oracle是从哪里抢到asp.net应用的osuser呢？我在哪里可以专门解决为什么 osuser 的 2 个值不同的原因？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:48:14.127

`osuser`in应该是运行中间层应用程序服务器 (IIS)的`v$session`操作系统用户。如果您在不同的环境中看到不同的值，这意味着 IIS 在两个环境中作为不同的 Windows 用户运行。如果您的开发环境在您的本地笔记本电脑（可能是您的 Windows 用户）上运行 IIS，而生产环境使用 Windows 域帐户运行 IIS，则这是可以预料的。

# angularjs - Angularjs + kendoui 下拉列表

> ID：13460103
> 
> 赞同：0
> 
> 时间：2012-11-19T18:43:59.420
> 
> 标签：angularjs

我有这个指令

```
angular.module('xxx', [
])
    .directive('qnDropdown', [
        '$parse',
        function($parse) {
            return {
                restrict: 'A',
                require: 'ngModel',
                link: function(scope, elem, attr, ngModel) {
                    scope.$watch(attr.qnDropdown, function(source) {
                        var model = $parse(attr.ngModel);

                        elem.kendoDropDownList({
                            dataTextField: "Name",
                            dataValueField: "ID",
                            value: attr.value,
                            select: function(e) {
                                var item = this.dataItem(e.item.index());
                                scope.$apply(function() {
                                    model.assign(scope, item.value);
                                });
                            },
                            //template: '<strong>${ data.Name }</strong><p>${ data.ID }</p>',
                            dataSource: source
                        });

                    });
                }
            };
        }]); 
```

输入字段是

```
<input qn:dropdown="locations" ng:model="installation.LocationID" value="{{installation.LocationID}}" /> 
```

一切正常，但未填充 kendoDropDownList 的初始值（值：attr.value）。我想我在错误的地点或时间做某事，但不确定是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:30:09.860

你确定`{{installation.LocationID}}`有你期望的价值吗？我能够根据我的情况复制粘贴您的代码，并且下拉列表运行良好（感谢您为我所做的辛勤工作！）。我正在填充`value`输入字段，当指令执行时，`attr.value`拥有它并且 Kendo 按预期显示它。也许这是几个版本前的 Angular 问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:48:24.657

您可能需要使用`$observe`：

> 用于`$observe`观察包含插值的属性的值变化（例如`src="{{bar}}"`）。这不仅非常有效，而且也是轻松获得实际值的唯一方法，因为在链接阶段尚未评估插值，因此此时该值设置为未定义。-[文档](http://docs.angularjs.org/guide/directive)，请参阅**属性**部分。

这是我最近使用 $observe[的示例。](https://stackoverflow.com/questions/14204446/html5-how-to-set-focus-on-a-text-input-in-a-list-with-angularjs/14205885#14205885)另请参阅@asgoth 的答案，他在那里使用 $watch，但他也创建了一个隔离范围。

我仍然不清楚何时需要使用 $observe 以及何时可以使用 $watch。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T18:37:39.457

我有同样的问题，`attr.value`是空的。该问题与为获取数据而进行的 $http 异步调用有关。在指令中定义下拉列表时，范围数据尚未填充。

我通过观看`attr.ngModel`而不是`attr.qnDropdown`在指令的链接功能中解决了这个问题。这样，在填充范围数据时就可以定义下拉列表。

# objective-c - 无法启动 iOS 应用

> ID：13460109
> 
> 赞同：1
> 
> 时间：2012-11-19T18:44:21.157
> 
> 标签：objective-c, ios, xcode

我不知道我的 Xcode 发生了什么，但由于我从设备中删除了我的应用程序，并试图在我的 iPhone 上重新运行它，我从屏幕顶部收到了这条消息：

> 没有这样的文件或目录 ( `/Users/spazm/Library/Developer/Xcode/DerivedData/newProject-cfjhjgezzcapwoadaivpptyywptu/Build/Products/Debug-iphoneos/proj.app/proj`)

此外，您可以选择“活动方案”（iPhone / iPhone Simulator / iPad Simulator），我曾经有“iOS设备”，插入设备后，我会得到我的手机名称，一切都会好起来的.
现在，我只看到“iOS 设备”（插入后），我需要手动选择我的手机，这里似乎出了点问题。我不确定是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:13:02.020

*   在 xcode 管理器中删除“派生数据”

或者，您可以打开“~/Library/Developer/Xcode/DerivedData”文件夹并删除与您的应用程序关联的派生数据文件夹。您还应该进行清洁/构建。

*   对于第二个问题，再次在设备下的管理器窗口中找到您的设备并单击“用于开发”

编辑：今天又遇到了，这次删除派生数据并没有解决错误。在删除数据，进行干净的构建，从我的设备中删除应用程序后，我需要关闭并重新打开 xcode，这最终修复了错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T02:14:39.713

问题出在项目文件本身。使用我的备份加载旧项目，然后手动添加来自 bad-new-project 的所有文件。
一定是有什么设定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T23:05:46.803

Try checking the Deployment Target for the app. I was getting this same error when trying to deploy an app that required iOS 6.0 to a device that had 5.1 installed.

# javascript - 使用javascript动态地将样式表添加到头部

> ID：13460110
> 
> 赞同：1
> 
> 时间：2012-11-19T18:44:39.137
> 
> 标签：javascript, font-size

我需要在我正在构建的网站顶部使用旧的“调整字体大小”选项——一个是默认大小的链接，一个是让字体变大的链接，一个是让它们变大两倍的链接。它只需要影响一些导航和正文副本，所以我想简单地制作 2 个额外的样式表来设置这些元素的样式，然后单击其中一个链接，将额外的样式表加载到标题中。当您单击“默认”链接时，它将恢复到原始大小（不加载其他样式表）。

有没有办法在javascript中做到这一点？这是一个 Wordpress 网站。或者，我可以使用 js 将标签添加到正文并以这种方式定位元素。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:47:50.763

您应该只更改元素的类。这会将他们的 css 更改为样式表中该类指定的任何内容。您的第一个选项比它需要的更复杂。如果您使用 JQuery，您可以从字面上编写这一行代码。

```
$("span#applicableId").each(function(){ 
    $(this).class("theOtherClass");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:51:26.183

您可以使用以下内容动态添加样式表：

```
function loadNewStyleSheet() {
        var style = document.createElement('style');
        style.type = 'text/css';
        style.src = 'http://path/to/cssfile'
        document.body.appendChild(style);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:49:13.700

我会在 php 标记中作为包含语句来执行此操作。然后只需在每一页的顶部包含一个 php 文件。

php包含信息： http: [//php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

然后从那里我打赌那里有一些你可以重用的代码。

例如，也许这可能会有所帮助？它是一个 php 脚本，可以调整页面的 css 样式，并且不会干扰其他部分。 [http://www.phpclasses.org/package/1296-PHP-Resizes-text-on-a-page-using-styles-and-sessions-.html](http://www.phpclasses.org/package/1296-PHP-Resizes-text-on-a-page-using-styles-and-sessions-.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T18:49:29.753

我想不可能将它动态添加到 head 标签。当然，您可以这样做，但不会加载此样式表。也许您应该尝试通过 ajax 获取它并附加到您网站中的特殊脚本标记。如果用户将选择另一个选项，那么您将加载另一个内容，清除此脚本标签并在那里添加新内容。

# objective-c - 自定义 NSPopUpButtonCell 出口/绑定

> ID：13460116
> 
> 赞同：0
> 
> 时间：2012-11-19T18:45:13.183
> 
> 标签：objective-c, cocoa, cocoa-bindings, nspopupbuttoncell

`NSPopUpButtonCell`当表格视图通过绑定和`NSArrayController`.

弹出式按钮单元已创建，但是当尝试通过覆盖弹出式按钮单元的`setMenuItem:item`方法来访问插座时，它是`nil`.
**这是预期的行为..？**
**是否应该在创建时使用另一种方法来替换菜单？**

基本上，我需要插座链接回`NSWindowController`该文档窗口的控制器 ( )，以便`NSPopUpButtonCell`在填充时从自定义弹出按钮相应地自定义菜单。

使用绑定的解决方案会更好 - 但是在覆盖时，`setObjectValue:`我可以看到它从来没有使用`nil`参数调用.. 但是，使用库存`NSPopUpButtonCell`会导致正确填充的弹出菜单。
（另请参阅[为什么 NSPopUpButtonCell 仅在调用 setObjectValue:nil 时正确显示](https://stackoverflow.com/questions/9398496/why-is-nspopupbuttoncell-showing-correctly-when-only-setobjectvaluenil-is-calle)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:50:12.307

您无需覆盖任何内容即可在 NSTableView 列中填充 NSPopUpButtonCell。要知道的是您在 NSTableColumn 上而不是在单元格本身上设置绑定。通常，您的 xib 中有一个 NSArrayController 绑定到包含弹出窗口的所有选项的 NSArray，然后您将选择带有弹出单元格的列并转到*它的*绑定。就像在这个屏幕截图中一样（注意右侧检查器中填充的内容、内容对象和选定对象绑定）：

![显示弹出单元格列的 NSTableColumn 绑定的 Xcode 屏幕截图](../Images/508f785b59a8433b3e356693f33f56c1.png)

如果你想要一个工作示例，你可以查看我为另一个 StackOverflow 问题准备的[这个项目。](https://github.com/ipmcc/SOExamples/tree/master/bindings/NSPopUpButtonCellWithNSAttributedString)有一堆不相关的东西与使 NSPopUpButtonCell 使用 NSAttributedStrings 相关，但 xib 中的绑定构成了如何将 NSTableColumn 与弹出窗口绑定的工作示例，该弹出窗口的选项由绑定填充。

# iphone - 让用户在 4 个不同的图像视图 xcode 上更改背景

> ID：13460120
> 
> 赞同：0
> 
> 时间：2012-11-19T18:45:47.443
> 
> 标签：iphone, xcode

我正在尝试制作一个具有 4 个 ImageViews 的应用程序，并且我想允许用户通过按下每个 ImageView 下方的 UIButton 来更改不同 ImageViews 的背景。我已经从一个教程中为此编写了一个代码，该教程显示仅使用一个 ImageView 来执行此操作。我只是为每个按钮复制并粘贴了 4 次并更改了一些变量。但是当我运行它时，只有第一个 ImageView 会改变它的图片，即使我为第二个、第三个或第四个 ImageView 按下 UIButton。这里的代码：

```
#import "ViewController.h"

@interface ViewController ()
{
UIImagePickerController *imagePickerController;
UIImagePickerController *imagePickerController2;
UIImagePickerController *imagePickerController3;
UIImagePickerController *imagePickerController4;
}

@end

@implementation ViewController
@synthesize firstImageView, secondImageView, thirdImageView, fourthImageView;
- (void)viewDidLoad
{
[super viewDidLoad];

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];

}

- (IBAction)firstChangeButton:(id)sender
{
imagePickerController = [[UIImagePickerController alloc]init];
[imagePickerController setDelegate:self];
[imagePickerController setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
[self presentViewController:imagePickerController animated:YES completion:nil];

}
- (IBAction)secondChangeButton:(id)sender
{
imagePickerController2 = [[UIImagePickerController alloc]init];
[imagePickerController2 setDelegate:self];
[imagePickerController2 setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
[self presentViewController:imagePickerController2 animated:YES completion:nil];

}
- (IBAction)thirdChangeButton:(id)sender
{
imagePickerController3 = [[UIImagePickerController alloc]init];
[imagePickerController3 setDelegate:self];
[imagePickerController3 setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
[self presentViewController:imagePickerController3 animated:YES completion:nil];

}
- (IBAction)fourthChangeButton:(id)sender
{
imagePickerController4 = [[UIImagePickerController alloc]init];
[imagePickerController4 setDelegate:self];
[imagePickerController4 setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
[self presentViewController:imagePickerController4 animated:YES completion:nil];

}
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
UIImage *image1 = [info objectForKey:UIImagePickerControllerOriginalImage];

NSData *data = UIImagePNGRepresentation(image1);
NSString *myGrabbedImage = @"myGrabbedImage.png";
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory = [path objectAtIndex:0];
NSString *fullPathToFile = [documentDirectory stringByAppendingPathComponent:myGrabbedImage];

[data writeToFile:fullPathToFile atomically:YES];

[[self firstImageView]setImage:image1];

[self dismissViewControllerAnimated:YES completion:nil];

}
- (void)imagePickerController2:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info2
{
UIImage *image2 = [info2 objectForKey:UIImagePickerControllerOriginalImage];

NSData *data2 = UIImagePNGRepresentation(image2);
NSString *myGrabbedImage2 = @"myGrabbedImage2.png";
NSArray *path2 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory2 = [path2 objectAtIndex:0];
NSString *fullPathToFile2 = [documentDirectory2 stringByAppendingPathComponent:myGrabbedImage2];

[data2 writeToFile:fullPathToFile2 atomically:YES];

[[self secondImageView]setImage:image2];

[self dismissViewControllerAnimated:YES completion:nil];

}
- (void)imagePickerController3:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info3
{
UIImage *image3 = [info3 objectForKey:UIImagePickerControllerOriginalImage];

NSData *data3 = UIImagePNGRepresentation(image3);
NSString *myGrabbedImage3 = @"myGrabbedImage3.png";
NSArray *path3 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory3 = [path3 objectAtIndex:0];
NSString *fullPathToFile3 = [documentDirectory3 stringByAppendingPathComponent:myGrabbedImage3];

[data3 writeToFile:fullPathToFile3 atomically:YES];

[[self thirdImageView]setImage:image3];

[self dismissViewControllerAnimated:YES completion:nil];

}
- (void)imagePickerController4:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info4
{
UIImage *image4 = [info4 objectForKey:UIImagePickerControllerOriginalImage];

NSData *data4 = UIImagePNGRepresentation(image4);
NSString *myGrabbedImage4 = @"myGrabbedImage4.png";
NSArray *path4 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory4 = [path4 objectAtIndex:0];
NSString *fullPathToFile4 = [documentDirectory4 stringByAppendingPathComponent:myGrabbedImage4];

[data4 writeToFile:fullPathToFile4 atomically:YES];

[[self fourthImageView]setImage:image4];

[self dismissViewControllerAnimated:YES completion:nil];

}

@end 
```

我应该如何将它应用于所有 4 个 ImageView？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:09:36.583

问题是所有图像选择器都会调用相同的委托方法：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

当您像这样为图像选择器控制器设置委托时：

```
[imagePickerController setDelegate:self]; 
```

您基本上告诉图像选择器控制器*self*将能够响应图像选择器委托方法。正如您在[UIImagePickerControlDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html)中看到的那样，没有这样的事情：

```
– imagePickerController2:didFinishPickingMediaWithInfo: 
```

等等。

作为开始，我建议像这样重写您的委托方法：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image1 = [info objectForKey:UIImagePickerControllerOriginalImage];

    NSData *data = UIImagePNGRepresentation(image1);
    NSString *myGrabbedImage = @"myGrabbedImage.png";
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [path objectAtIndex:0];
    NSString *fullPathToFile = [documentDirectory stringByAppendingPathComponent:myGrabbedImage];

    [data writeToFile:fullPathToFile atomically:YES];

    if (picker == imagePickerController) {
        [[self firstImageView]setImage:image1];
    } else if (picker == imagePickerController2) {
        [[self secondImageView]setImage:image1];
    } else if (picker == imagePickerController3) {
        [[self thirdImageView]setImage:image1];
    } else {
        [[self fourthImageView]setImage:image1];
    }

    [self dismissViewControllerAnimated:YES completion:nil];

} 
```

这样，所有的图像选择器图像都将通过相同的方法处理，从而减少了代码量。

# iphone - iOS - 在动画过渡期间更新标签？

> ID：13460121
> 
> 赞同：4
> 
> 时间：2012-11-19T18:45:50.553
> 
> 标签：iphone, ios

我在屏幕上有一个 UIView 包含一些标签。我正在尝试进行翻转视图的转换，并且一旦我完成 nimation 的一半，我希望能够更新标签。我怎样才能做到这一点？

```
[UIView transitionWithView:self.myView
                          duration:.7
                           options:UIViewAnimationOptionTransitionFlipFromBottom
                        animations:^{
                            // It doesn't update the labels here, until I scoll the tableview (containing the view)
                            //[self.myView update];
                                            }
                        completion:^(BOOL finished){
                            // It doesn't look nice here because it doesn't look smooth, the label flashes and changes after the animation is complete
                            //[self.myView update];
                        }]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:36:08.533

问题是我启用了 shouldRasterize，它不允许在动画期间更新内容。解决方案是在动画之前关闭光栅化并在动画完成后将其重新打开。

我没有摆脱光栅化的原因是视图位于 tableView 内部，并且在滚动 tableView 时光栅化仍然有帮助。

```
self.layer.shouldRasterize = NO;

[UIView transitionWithView:self
              duration:animationDuration
               options:UIViewAnimationOptionTransitionFlipFromBottom
            animations:^{/*update the content here, I did it outside of the transition method though*/}
            completion:^(BOOL finished){
                if (finished)
                {
                           self.layer.shouldRasterize = YES;
                }
            }]; 
```

# c# - 将大于 59（秒）的值有效转换为 DateTime

> ID：13460123
> 
> 赞同：1
> 
> 时间：2012-11-19T18:45:52.380
> 
> 标签：c#, datetime, format

我得到了以秒为单位的整数形式的“播放时间”值。

如果要添加的时间少于 60 秒，当然很容易完成。

但是，很多值都超过 59 秒，因此不能轻易转换为 DateTime。

一个值的例子是：`159`，这意味着“播放时间”是`2 minutes and 39`秒。

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-19T18:47:31.307

一开始不应该将“秒数”存储在 a`DateTime`中。您应该使用`TimeSpan`，这很容易：

```
TimeSpan ts = TimeSpan.FromSeconds(159); 
```

当然，您可以为 any*添加*持续时间`DateTime`，但那是另一回事。

（如果您正在对日期和时间进行大量工作，您可能还想查看我的[Noda Time库……BCL 规定有点令人印象深刻。）](http://noda-time.googlecode.com)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T18:48:25.123

我想你想使用 a`TimeSpan`而不是 a `DateTime`。具体来说`TimeSpan.FromSeconds()`。

请参阅：http: [//msdn.microsoft.com/en-us/library/system.timespan.fromseconds.aspx](http://msdn.microsoft.com/en-us/library/system.timespan.fromseconds.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T18:48:03.593

你想要的是一个[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)结构。

# jquery - 通过 jQuery $.each 访问 JSON

> ID：13460130
> 
> 赞同：1
> 
> 时间：2012-11-19T18:46:29.620
> 
> 标签：jquery, each

我有一些 JSON，例如：

```
response = [
  {"FIRSTNAME":"Richard","ACCOUNT":5555,"ID":"5056","LASTNAME":"Harris"},  
  {"FIRSTNAME":"Gary","ACCOUNT":4444,"ID":"DFC7","LASTNAME":"Coles"},
  {"FIRSTNAME":"Jeff","CORPORATEACCOUNT":3333,"ID":"7F31","LASTNAME":"Hopper"},
  {"FIRSTNAME":"Jack","ACCOUNT":2222,"ID":"E051","LASTNAME":"Canrell"},
  {"FIRSTNAME":"Tim","ACCOUNT":1111,"ID":"5056","LASTNAME":"Johns"}
] 
```

我需要遍历它并为每个用户显示一行，而我的 jQuery 不起作用。我究竟做错了什么？

```
$.ajax({
    type: "POST",
    url: "/my-controller/my-method?format=json",
    data: {id: id},
    dataType: "json",
    success: function(response) {
        var resultHtml = '';
        $.each(response, function(i, response) {
            $.each(response, function(property, value) {
            resultHtml += value + '\n';
        });
        });

        alert(resultHtml);
    }
}); 
```

所以这呼应了：

```
Richard
5555
5056
Harris
Gary
4444
DFC7
Coles
etc.
etc.
etc. 
```

JSON 正在从控制器返回，但我如何循环并获取它？

```
Richard harris 5555 5056
Gary Coles 4444 DFC7
Jeff Hopper 3333 7F31
Jack Canrell 2222 E051
Tim Johns 1111 5060 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T18:50:43.177

你不需要`$.each`第二次。您有一个对象，只需使用您想要的字段。

```
$.each(response, function(i, value) {
    resultHtml += value.FIRSTNAME + value.LASTNAME + value.ACCOUNT + value.ID + '\n';
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:50:36.100

你需要先解析 JSON，试试 JSON.parse(response); 让它创建一个可以迭代的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:52:43.313

```
$.ajax({
    type: "POST",
    url: "/my-controller/my-method?format=json",
    data: {id: id},
    dataType: "json",
    success: function(response) {
        var resultHtml = '';
        $.each(response, function(i, row) {
            resultHTML += row.FIRSTNAME + " " + row.LASTNAME + " " + row.ACCOUNT + " " + row.ID + "\n";
        });
        alert(resultHtml);
    }
}); 
```

# drop-down-menu - 是否可以在 IE8 中隐藏菜单？

> ID：13460133
> 
> 赞同：0
> 
> 时间：2012-11-19T18:46:52.653
> 
> 标签：drop-down-menu, internet-explorer-8, zurb-foundation

我在使用 IE8 中 Foundation 框架的下拉菜单时遇到问题，我想知道如果用户使用的是 IE8，是否可以隐藏元素。

也许为 IE 用户制作一个更简单的菜单比制作下拉菜单更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:54:17.523

并不是说我赞成您的解决方案（修复它！），但您可以通过有条件的评论来实现您想要实现的目标。

```
<!--[if IE 8]>
<style type="text/css">
#yourElemId {
   display: none;
}
</style>
<![endif]--> 
```

# jquery - 使用 jQuery 在元素上调用函数

> ID：13460139
> 
> 赞同：0
> 
> 时间：2012-11-19T18:47:37.870
> 
> 标签：jquery, jquery-callback

我需要自动调用 DOM 元素上的函数。以下代码有效，但我想知道是否有更好的方法。

```
$('#toc > ul > li').first().find('a').each(loadTopic); 
```

我的选择器将只返回一个元素，因此运行“每个”似乎很不自然。有没有更好的方法在我的锚元素上调用“loadTopic”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:51:54.230

创建简单的 jquery 插件并调用`$('#toc > ul > li').first().find('a').myPlugin();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:55:33.520

Using`.each`和这里一样好，尤其是因为它自动从 jQuery 对象中传递原生 DOM 元素，而不是作为 jQuery 对象本身包装。哎呀，它甚至`this`会成为你的那个元素。

您可以实现一个`.call()`仅适用于 jQuery 对象中的第一个元素的插件，但这有点毫无意义......

# android - Android：使用资产文件时出现 ZipFile、FileNotFoundException

> ID：13460147
> 
> 赞同：1
> 
> 时间：2012-11-19T18:48:02.403
> 
> 标签：android, file, zip, assets

我有个问题。

我使用此代码来读取 zip 文件的内容：

```
 File file = new File(TogglesManager.EXTERNAL_STORAGE_THEMES_DIRECTORY+"filename.zip");
    ZipFile zip = new ZipFile(file); 
```

但是当我尝试使用资产时，我有一个`FileNotFoundException`.

要读取资产 zip 文件，我使用以下代码：

```
 File file = c.getFileStreamPath("assetsFile.zip");
    ZipFile zip = new ZipFile(file); 
```

“文件”不为空，因为如果我写，`file.getName();`我会看到正确的文件名。

我不想使用`ZipInputStream`类，但只`ZipFile`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:28:31.923

您无法使用正常的文件操作访问资产。你将不得不使用

```
AssetManager assetManager = mContext.getAssets();
InputStream is = assetManager.open("assetsFile.zip"); 
```

但是由于 ZipFile 不以 InputStream 作为参数，因此您必须将资产文件复制到内部存储中，然后使用`File`

进一步AFAIK，apk是压缩的，因此在资产中存储压缩文件可能不会改变使用的存储空间，所以也许您不需要在资产中使用zipfile。

# responsive-design - 基金会有反应吗？

> ID：13460150
> 
> 赞同：0
> 
> 时间：2012-11-19T18:48:07.880
> 
> 标签：responsive-design, zurb-foundation

我正在尝试找到一个完全响应的 CSS 框架，我相信 Foundation 是，但我不确定

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:50:34.443

Foundation 作为一个 CSS 框架可以完美运行，我肯定会使用它。

# iphone - 您如何逐行阅读 Objective-C 中呈现的网站的 html 代码？

> ID：13460151
> 
> 赞同：0
> 
> 时间：2012-11-19T18:48:06.090
> 
> 标签：iphone, objective-c, xcode, screen-scraping, nsinputstream

因此，我在阅读 Java 网站的渲染 html 源代码方面拥有丰富的经验。然而，我已经彻底研究了如何在 Objective-C 中做同样的事情，并且已经能够提出一个应该有效的解决方案，但它没有。这个想法是我想阅读每一行，例如：“view-source:www.apple.com”，我想逐行阅读该页面的结果。我不想要任何 Html 解析器等。这就是我所拥有的：

```
NSString *s = [NSString stringWithFormat:@"http://www.apple.com"];
NSURL *url = [NSURL URLWithString:s];

NSInputStream *iStream= [[NSInputStream alloc] initWithURL:url];

[iStream setDelegate:self];

[iStream scheduleInRunLoop:[NSRunLoop currentRunLoop]
                   forMode:NSDefaultRunLoopMode];

[iStream open];
NSLog(@"stream successfully opened");

NSInteger result;
uint8_t buffer[1024];
    while((result = [iStream read:buffer maxLength:1024]) != 0) {       
    if(result > 0) {
        NSLog(@"Buffer is %@",buffer);

        // buffer contains result bytes of data to be handled
    } else {
        NSLog(@"ERROR: %@",buffer);
        // The stream had an error. You can get an NSError object using [iStream streamError]
    }
    NSLog(@"end of while loop: %@",buffer);

}
// Either the stream ran out of data or there was an error

NSLog(@"Either the stream ran out of data or there was an error"); 
```

这可以正常运行和编译，但结果始终为 0。我再次进行了大量研究，但我不明白为什么结果为 0。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:15:12.423

这个其他解决方案有效......

```
NSString *s = [NSString stringWithFormat:@"http://www.apple.com"];
NSURL *url = [NSURL URLWithString:s];

NSData *data = [NSData dataWithContentsOfURL:url];
NSString* newStr = [[NSString alloc] initWithData:data
                                         encoding:NSUTF8StringEncoding];
NSArray *arr= [newStr componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]; 
```

虽然，我宁愿逐行阅读页面，因为这似乎效率低下 - 但我现在会解决这个问题，直到我能找到更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:48:30.897

您可能希望`NSInputStream`在此行之后检查您是否实际上是非零：

```
NSInputStream *iStream= [[NSInputStream alloc] initWithURL:url]; 
```

我看到的主要是你打开了一个`NSInputStream`但你从来没有用它发出任何 HTTP 请求。我认为您需要打开一个流对，`NSOutputStream`然后通过在`NSInputStream`.

这是一个说明性的代码片段：

```
#import <Foundation/Foundation.h>

@interface CCFStreamReader : NSObject <NSStreamDelegate>
- (void)readStream;
@end

@implementation CCFStreamReader {
    NSInputStream *_inputStream;
    NSOutputStream *_outputStream;
}
- (void)readStream {
    NSURL *url = [NSURL URLWithString:@"http://www.apple.com"];
    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)[url host], 80, &readStream, &writeStream);

    _inputStream = (__bridge_transfer NSInputStream *)readStream;
    _outputStream = (__bridge_transfer NSOutputStream *)writeStream;
    [_inputStream setDelegate:self];
    [_outputStream setDelegate:self];
    [_inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [_outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [_inputStream open];
    [_outputStream open];
    [[NSRunLoop currentRunLoop] runUntilDate:[NSDate distantFuture]];
    NSLog(@"input stream = %@",_inputStream);
    printf("read something");
}

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)streamEvent {
    printf("stream event: %d\n",(int)streamEvent);
    switch( streamEvent ) {
        case NSStreamEventHasSpaceAvailable:
        {
            if (aStream == _outputStream) {
                NSString *str = [NSString stringWithFormat:
                                  @"GET / HTTP/1.0\r\n\r\n"];
                const uint8_t *rawstring = (const uint8_t *)[str UTF8String];
                [_outputStream write:rawstring maxLength:str.length];
                [_outputStream close];
            }
            break;
        }
        case NSStreamEventHasBytesAvailable: {
            printf("Bytes available\n");
        }
    }

}

@end

int main(int argc, char *argv[]) {

    @autoreleasepool {
        CCFStreamReader *reader = [CCFStreamReader new];
        [reader readStream];
    }
} 
```

通常的警告——这个片段很可能充满了错误。它并不打算成为一个完全开发的解决方案。例如，我实际上并没有从流中获取任何数据，等等。运行循环永远运行，等等。

最后，这假设您真的很想以这种方式处理 HTML，无论出于何种原因。

# git - 在另一个分支中查找第一个祖先提交

> ID：13460152
> 
> 赞同：2
> 
> 时间：2012-11-19T18:48:08.977
> 
> 标签：git

我想找到另一个分支中包含的最新提交；鉴于历史

```
A-B-C---E  <-master
  └-F---G  <-develop
    └-H-I  <-branch1 
```

我要找F。注意我只知道起点branch1，不知道其他分支的名字。

我知道我可以简单地检查最低 i≥0 以便

```
git branch --contains branch1~i 
```

输出不止一行，但这似乎很浪费。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:03:35.677

为此，请查看您的 Git 发行版附带的[post-receive-email](https://github.com/git/git/blob/master/contrib/hooks/post-receive-email#L277)`/usr/share/doc/git-core/contrib/hooks/post-receive-email`脚本（如果您想要本地副本，应该安装在某个地方）。这有一个很长的评论，描述了如何只查找给定分支中的新提交，并且之前在任何其他分支中都没有见过：

```
 # Consider this:
    #   1 --- 2 --- O --- X --- 3 --- 4 --- N
    #
    # O is $oldrev for $refname
    # N is $newrev for $refname
    # X is a revision pointed to by some other ref, for which we may
    #   assume that an email has already been generated.
    # In this case we want to issue an email containing only revisions
    # 3, 4, and N.  Given (almost) by
    #
    #  git rev-list N ^O --not --all
    #
    # The reason for the "almost", is that the "--not --all" will take
    # precedence over the "N", and effectively will translate to
    #
    #  git rev-list N ^O ^X ^N
    #
    # So, we need to build up the list more carefully.  git rev-parse
    # will generate a list of revs that may be fed into git rev-list.
    # We can get it to make the "--not --all" part and then filter out
    # the "^N" with:
    #
    #  git rev-parse --not --all | grep -v N
    #
    # Then, using the --stdin switch to git rev-list we have effectively
    # manufactured
    #
    #  git rev-list N ^O ^X 
```

在评论和脚本的其余部分有更多处理极端情况的细节；但如果你只关心基本情况，这应该会给你答案：

```
git rev-parse --not --all | grep -v I | git rev-list --stdin I 
```

在那里你可以计算`I`为`$(git rev-parse branch1)`。结果的最后一个条目将是 commit ，您可以使用then到达*另一个*分支`H`中最近的祖先。*`H^`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:14:07.490

如果您知道带有 HI 的分支的名称，例如 branch1

`git reflog show --all|grep branch1`

荣誉中的最高数字是您在该分支上的第一次提交。*

# javascript - jquery标签不转换

> ID：13460156
> 
> 赞同：0
> 
> 时间：2012-11-19T18:48:17.990
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-tabs

我决定尝试使用 jQuery`$('#tabs').tabs();`并让我的选项卡垂直。我遇到了在选择选项卡时没有显示内容的问题。问题的一个例子在[这里 - JSFIDDLE](http://jsfiddle.net/Kxtvg/275/)我知道我显然缺少一些东西。我尝试查看 Jquery UI 文档，但仍然不知道我做错了什么。我会很感激知道我为什么会遇到这个问题，任何其他提示也将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:55:34.853

试试这个例子：http: [//jqueryui.com/tabs/#vertical](http://jqueryui.com/tabs/#vertical)

您需要一些额外的 CSS（您的 JS Fiddle 没有加载 jQuery UI CSS），例如：

```
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css"> 
```

需要额外的摆弄，但这是一个[更新的小提琴](http://jsfiddle.net/CWqXS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:09:44.853

两个问题：

*   您有重复的元素`id`。每个的第一个实例都`id`指向链接，而不是内容。从链接中删除`id`s。
*   选项卡小部件依赖于 CSS。添加[基本​​样式表](http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css)，它就可以工作了。

[jsfiddle.net/Kxtvg/280](http://jsfiddle.net/Kxtvg/280/)

要获得所需的布局，您必须从[基本样式表](http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css)开始并对其进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:10:15.113

首先，您`ID`不能在一页上出现两次。从您的`<li>`标签中删除它。其次，由于某种原因，jsfiddle 没有提取相关的 css 数据。我将我的剪切并粘贴到那里，它现在可以工作了。

[http://jsfiddle.net/Kxtvg/279/](http://jsfiddle.net/Kxtvg/279/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T19:25:56.280

我在头部部分包含了一些代码。在这里。

```
 <head>        
      <meta charset="utf-8" />
      <title>jQuery UI Tabs - Vertical Tabs functionality</title>
      <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
      <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
      <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
      <link rel="stylesheet" href="/resources/demos/style.css" />
      <script>
       $(function() {
         $( "#tabs" ).tabs().addClass( "ui-tabs-vertical ui-helper-clearfix" );
         $( "#tabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" );
       });
      </script>
      </head> 
```

参考：http: [//jqueryui.com/tabs/#vertical](http://jqueryui.com/tabs/#vertical)

工作模型：http: [//jsfiddle.net/abhijalgaonkar/qTXnN/](http://jsfiddle.net/abhijalgaonkar/qTXnN/)

尽量不要修改源 css 文件中的 css。越过 css 会是一个更好的选择。

让我知道它是否有帮助....

# jquery - 在jQuery中隔离a

> ID：13460163
> 
> 赞同：1
> 
> 时间：2012-11-19T18:48:31.533
> 
> 标签：jquery, html

我正在尝试编写一些 jQuery，如果其中两个 td 包含具有某个类的元素，它将隐藏一个 tr。这是标记。

```
<tr>
        <td>Name<i class="icon-warning-sign"></i></a></td>
        <td class="centered_text"><i class="icon-minus"></i></td>   
        <td class="centered_text"><i class="icon-minus"></i></td>
</tr> 
```

所以如果**最后两个 td 包含**i.icon-minus 隐藏 tr。我会通过向 tr 添加一个类并隐藏它来做到这一点。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:51:37.510

我建议（目前未经测试）：

```
$('tr').filter(function(){
    return $(this).find('i.icon-minus').length == 2;
}).hide(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7wKc8/)。

只在最后两个单元格中搜索，或者更准确地说，只在不是第*一个*单元格的单元格中搜索：

```
$('tr').filter(function(){
    return $(this).find('td:gt(0) i.icon-minus').length == 2;
}).hide(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7wKc8/1/)。

参考：

*   [`filter()`](http://api.jquery.com/filter/).
*   [`find()`](http://api.jquery.com/find/).
*   [`:gt()`（大于）选择器](http://api.jquery.com/gt-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:51:44.527

我会写一个像下面这样的简单过滤器，

> 我会通过向 tr 添加一个类并隐藏它来做到这一点。谁能帮我解决这个问题？

```
$('#tableId tr').filter(function () {
   return $('.icon-minus', this).length == 2;
}).addClass('hide'); 
```

或简单地说

```
$('#tableId tr').filter(function () {
   return $('.icon-minus', this).length == 2;
}).hide(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T18:57:38.203

您可以将[Next Adjacent 选择器](http://api.jquery.com/next-adjacent-Selector/)与[:has()](http://api.jquery.com/has-selector/)和[:last-child](http://api.jquery.com/last-child-selector/)结合使用来匹配`<td>`元素，然后使用[最接近的()](http://api.jquery.com/closest/)或[parent()](http://api.jquery.com/parent/)来获取`<tr>`元素：

```
$("td:has(i.icon-minus) + td:has(i.icon-minus):last-child").parent().hide(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T19:12:43.733

您可以使用[.filter()](http://api.jquery.com/filter/)函数来检查具有该类的 tr 内的 td 数量。使用 slice(-2) 将始终为您提供最后 2 个 td 的[.slice()](http://api.jquery.com/slice/)

```
$(function() {
    $('tr').filter(function() {
        // return the if td's returned == 2
        return $('td', this).slice(-2).filter(function() {
            // return if the last two td elements has icon-minus as class
            return $('i', this).hasClass('icon-minus');
        }).length == 2;
    }).addClass('hideThis');
});​ 
```

[http://jsfiddle.net/kMGL4/](http://jsfiddle.net/kMGL4/)

# core-data - 将数据预加载到核心数据中

> ID：13460167
> 
> 赞同：0
> 
> 时间：2012-11-19T18:48:51.440
> 
> 标签：core-data

我正在关注将现有数据库预加载到核心数据中的教程。代码编译得很好，直到我到达这一行：

```
NSEntityDescription *entity = [NSEntityDescription    insertNewObjectForEntityForName:@"FailedBankInfo" inManagedObjectContext:context]; 
```

它返回以下错误：2012-11-19 12:45:02.247 CoreDatTutorial2[2049:403] -[FailedBankInfo subentitiesByName]: unrecognized selector sent to instance 0x100301010'

我已经检查以确保它不为空并且它已保存到产品目录中。知道我做错了什么吗？如果我注释掉那行代码，项目编译没有问题。

这是其余的代码：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription insertNewObjectForEntityForName:@"FailedBankInfo" inManagedObjectContext:context];
    [fetchRequest setEntity:entity];
    NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
    for (FailedBankInfo *info in fetchedObjects){
    { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:39:53.860

```
insertNewObjectForEntityForName:inManagedObjectContext: 
```

创建一个*新的托管对象*并将其插入到托管对象上下文中。特别是，它返回类的对象`FailedBankInfo`（在您的情况下），而不是`NSEntityDescription`.

要创建`NSEntityDescription`，请使用`entityForName:inManagedObjectContext:`：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"FailedBankInfo"
                                inManagedObjectContext:context];
[fetchRequest setEntity:entity]; 
```

请注意（从 iOS 5.0 开始）您可以将其简化为

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"FailedBankInfo"]; 
```

# visual-studio-2012 - 声明“utf-16”中的 VS 2012 编码与文档“utf-8”不匹配

> ID：13460169
> 
> 赞同：5
> 
> 时间：2012-11-19T18:49:05.180
> 
> 标签：visual-studio-2012, utf-8, utf-16, file-encodings

当我打开 Visual Studio 2012 时，我收到消息“Visual Studio 声明中的编码 'utf-16' 与文档 'utf-8' 的编码不匹配”。

![Visual Studio 错误对话框](../Images/ae43223c9b6bb11122d83c7a697522f8.png)

有谁知道为什么会发生这种情况？或者我应该做什么故障排除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T23:00:22.407

事实证明，根本原因是连接到 TFS 服务器的问题，但我还必须[清除我的团队资源管理器缓存](http://geekswithblogs.net/TarunArora/archive/2012/08/19/how-to-clear-visual-studio-team-explorer-cache.aspx)。

要清除您的团队资源管理器缓存，请删除以下文件夹

*   C:\Users\[USER]\AppData\Local\Microsoft\Team Foundation\2.0\Cache
*   C:\Users\[USER]\AppData\Local\Microsoft\Team Foundation\3.0\Cache

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T06:20:53.317

可能还有其他原因，因为 TFS 服务器无法连接到数据库。打开 TFS 管理控制台并在“团队项目集合”中选择您的集合。在“常规”选项卡中查找 SQL 服务器实例。检查此实例是否可以从 TFS 服务器连接。在我的情况下，它在重新启动数据库服务器后工作。

# java - 为什么 JOptionPane 会导致 JFrame 从任务栏中消失？

> ID：13460170
> 
> 赞同：2
> 
> 时间：2012-11-19T18:49:05.777
> 
> 标签：java, swing, jframe, joptionpane

我有一个问题，我创建了两个单独`JFrame`的 s（一个是我的主应用程序，另一个使用控制台输出显示任务进度......）。

但是，随后弹出一个对话框会对两个任务栏图标（即`JFrame`s）产生奇怪的影响。也就是说，它会导致一个任务栏图标消失，尽管两个窗口仍然存在。请注意，可以通过最小化或最大化相应窗口来“恢复”丢失的任务栏图标。

以下示例代码会产生问题：

```
import javax.swing.JFrame;
import javax.swing.JOptionPane;

public class taskbarExample {

    private static JFrame frame1;
    private static JFrame frame2;

    public static void main (String[] args) {

        frame1 = new JFrame("Frame 1");
        frame1.setSize(200,600);
        frame1.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame1.setVisible(true);

        frame2 = new JFrame("Frame 2");
        frame2.setSize(600,200);
        frame2.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame2.setVisible(true);

        JOptionPane.showMessageDialog(null, "Dialog box");  

    }
} 
```

为了比较，请尝试注释掉该`JOptionPane`行...没有问题。

谁能解释这里发生了什么？我已经看到一个先前的问题提到了类似的问题，但没有示例代码，也没有对我有帮助的答案。[在这里](https://stackoverflow.com/questions/7526765/two-jframes-in-one-runnable-first-jframe-disappears-in-the-application-bar-afte)找到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:02:11.337

这是基本属性，`JOptionPane`

*   阻止代码执行，直到屏幕上可见，

*   此容器是模态的，并且在 JOptionPane 边界之外锁定鼠标和键盘事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:07:27.633

showMessageDialog 显示一个信息消息对话框。第一个参数确定显示对话框的框架。如果为 null，或者如果 parentComponent 没有 Frame，则使用默认 Frame。

当这个函数 (showMessageDialog) 被启动时，鼠标和键盘被阻止直到你关闭对话框信息。

这种效果是自然的，并不意味着图标消失了。

# wcf - WCF 服务的 TransactionFlowAttribute 错误

> ID：13460178
> 
> 赞同：1
> 
> 时间：2012-11-19T18:49:34.203
> 
> 标签：wcf, transactions, wshttpbinding

我有一个在本地开发环境中配置的 WCF 服务，并使用自签名证书通过 IIS 运行，因此我可以使用 wsHttpBinding 支持 SSL 和事务。

在我运行 IIS 7.5 的本地 Win7 机器上一切正常。

我正在将我的服务应用程序部署到运行 IIS 7.5 的 Win2008 R2 服务器。

应用程序池配置为集成 .NET 4.0。

当我运行构建并部署到我的开发服务器时，其中一项服务不断抛出 InvalidOperation 异常，指出我的服务正在使用的“WebHttpBinding”没有设置事务流属性。

这是我在 web.config 中配置的仅有的 2 个绑定：

```
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IRetrieval" closeTimeout="infinite" openTimeout="infinite" receiveTimeout="infinite" sendTimeout="infinite" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
    <wsHttpBinding>
        <binding name="wsHttpEndpointBinding" transactionFlow="true">
          <security mode="Transport">
            <transport clientCredentialType="None" />
          </security>
        </binding>
    </wsHttpBinding>
</bindings> 
```

为什么报错说配置的WebHttpBinding没有设置属性？我什至没有在配置中指定那种类型的绑定。

我有另一个服务也使用我在这里声明的 wsHttpBinding 并且工作正常。所以在这一点上，我几乎不知道为什么其中一个有效而另一个抛出错误。

我确实将服务标记为强制交易，并且我已经设置了所有内容来说明这一点。

任何人都知道为什么我的一项服务很糟糕，而另一项服务很好？

# javascript - 如何读取 javascript 对象

> ID：13460179
> 
> 赞同：1
> 
> 时间：2012-11-19T18:49:36.987
> 
> 标签：javascript, variables, object

我正在使用 Microsoft 的 Live Connect 开发人员中心

它为联系人返回这种类型的变量，但我不知道读取它的简单方法，会对其执行拆分但不知道如何读取此对象：

```
{"id":"contact.0d3d6bf0000000000000000000000000", "first_name":"William", "last_name":"Shakespeare", "name":"William Shakespeare", "gender":null, "is_friend":false, "is_favorite":false, "user_id":"2ae098749083cb3d", "email_hashes":["a790b818acfdef744a23bef534dfd9a4a53aa834250bdfe55f6874543129daa6"], "updated_time":"2012-10-04T19:23:34+0000"} 
```

我需要使用其中的内容访问名称和 email_hashes：a790b818acfdef744a23bef534dfd9a4a53aa834250bdfe55f6874543129daa6 - 不带括号。

只是不知道如何阅读这种对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:51:50.620

`JSON.parse()`专门设计用于获取 JSON 格式的字符串并生成 JavaScript 对象，然后您可以从中访问属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:53:44.530

这看起来像 JSON。如果你使用 jQuery，你可以这样做：

```
var jsonData = $.parseJSON('{"id":"contact..."}');
alert('name: ' + jsonData.id); 
```

有关更多使用示例，请参阅文档：http: [//api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:53:58.663

您收到的响应是键/值对。您可以使用密钥访问任何值

```
obj[key] // value 
```

或者

```
obj.key // value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T18:55:37.273

如果

```
var x = {"id":"contact.0d3d6bf0000000000000000000000000", "first_name":"William", "last_name":"Shakespeare", "name":"William Shakespeare", "gender":null, "is_friend":false, "is_favorite":false, "user_id":"2ae098749083cb3d", "email_hashes":["a790b818acfdef744a23bef534dfd9a4a53aa834250bdfe55f6874543129daa6"], "updated_time":"2012-10-04T19:23:34+0000"} 
```

然后

```
x.email_hashes 
```

返回

```
["a790b818acfdef744a23bef534dfd9a4a53aa834250bdfe55f6874543129daa6"] 
```

和

```
x.email_hashes[0] 
```

返回

```
"a790b818acfdef744a23bef534dfd9a4a53aa834250bdfe55f6874543129daa6" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T18:56:41.130

当您使用 JSON 获取变量时，请执行以下操作：

```
var stringData = {}, // Incoming data
    data = JSON.parse(stringData); 
```

然后，您可以像这样访问变量：

```
var id = data.id,
    firstName = data.first_name; 
```

要访问数组值，请执行以下操作：

```
var emailHashes = data.email_hashes;
if (emailHashes.length > 0) {
    var i = 0;

    for (; i < emailHashes.length; i++) {
         // perform some action on them.
    }         
} 
```

# c++ - 如何在 C++ 中初始化类中的非静态 const 变量？

> ID：13460181
> 
> 赞同：1
> 
> 时间：2012-11-19T18:49:37.287
> 
> 标签：c++

我在 Stack.h 中编写了以下代码：

```
class Stack{
public:
    inline bool full();
    int size();
    inline bool empty();
    bool push(const string&);
    bool pop(string &s);
    bool peek(string &s);
    virtual void print();
    virtual ~Stack(){}

protected:
    vector<string> _elem;
    int const _maxsize=10;    // line X
}; 
```

我得到了错误：

```
Stack.h:14: error: ISO C++ forbids initialization of member ‘_maxsize’
Stack.h:14: error: making ‘_maxsize’ static
make: *** [Stack.o] Error 1 
```

如果我在 X 行添加一个 static 关键字，并在类定义之外初始化变量，它可能没问题。

**但我的问题是，有没有可能的方法来声明一个非静态的 const 变量并仍然成功地初始化它？？？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:50:50.700

是的，在你的构造函数中初始化它

```
const int NumItems;

Foo::Foo():
NumItems(15)
{
//....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:53:11.987

您可以使用`enum`

```
class C {
  protected:
    enum { var = 10 }; 
} 
```

在这种情况下， C::var 将是编译时常量，甚至可以在模板中使用。

此外，c++11 允许您尝试使用的声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T18:50:24.320

这在 C++11 中有效。在 C++03 中，您必须在构造函数中对其进行初始化。或者，在 C++11 中：

```
class Stack{
    int const _maxsize{10};
}; 
```

# image - 强制 Wordpress 创建与上传图片大小相同的缩略图

> ID：13460188
> 
> 赞同：8
> 
> 时间：2012-11-19T18:50:03.267
> 
> 标签：image, wordpress, resize

AFAIK，Wordpress 仅在所需图像尺寸*较小*时（而不是在目标尺寸相同时）才生成缩略图（例如，“大”）。

我用

> `add_image_size( 'referenzen-big', 627, 490, true );`

因此，如果我的客户上传一个 627x490px 的文件，将使用原始图像。

但这并不是我们所希望的，因为这种习惯是出于善意，会以正确的大小上传图像，并且还可以进行最高的 .jpg 压缩。在这种情况下，这导致图像大约为 300kB。

一种实用但技术上并非完美无缺的方法是要求他上传 628x490 的图像，因此宽度增加 1px，从而强制重新缩放。这样的建议将不被接受:-)

到目前为止，我已经调查了负责图像创建的钩子，并跟踪了负责的函数；这是我找到的最后一个钩子： [image_make_intermediate_size()](http://xref.yoast.com/2.9/nav.html?wp-includes/media.php.source.html#l416)

这是负责实际调整大小的函数： [image_resize_dimensions()](http://xref.yoast.com/2.9/wp-includes/media.php.source.html#l266)。甚至有一句台词：

```
// if the resulting image would be the same size or larger we don't want to resize it
if ( $new_w >= $orig_w && $new_h >= $orig_h )
    return false; 
```

那么如何启用此“强制调整大小”功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-18T20:24:27.917

这是您正在寻找的解决方案，将放在您的 functions.php 文件中：

```
function thumbnail_upscale( $default, $orig_w, $orig_h, $new_w, $new_h, $crop ){
    if ( !$crop ) return null; // let the wordpress default function handle this

    $aspect_ratio = $orig_w / $orig_h;
    $size_ratio = max($new_w / $orig_w, $new_h / $orig_h);

    $crop_w = round($new_w / $size_ratio);
    $crop_h = round($new_h / $size_ratio);

    $s_x = floor( ($orig_w - $crop_w) / 2 );
    $s_y = floor( ($orig_h - $crop_h) / 2 );

    return array( 0, 0, (int) $s_x, (int) $s_y, (int) $new_w, (int) $new_h, (int) $crop_w, (int) $crop_h );
}
add_filter( 'image_resize_dimensions', 'thumbnail_upscale', 10, 6 ); 
```

可以在这里找到： [https ://wordpress.stackexchange.com/questions/50649/how-to-scale-up-featured-post-thumbnail](https://wordpress.stackexchange.com/questions/50649/how-to-scale-up-featured-post-thumbnail)

它将放大图像并为所有图像尺寸生成缩略图。唯一的失败，可能不是失败，是不管你会为所有上传的图像的每个图像大小获得一个单独的文件......即使它是一个小图标或其他东西。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T09:51:49.160

虽然仍然不是最优的，但使用像[Timthumb](http://www.binarymoon.co.uk/projects/timthumb/)这样的服务器端库然后提供原始源并使用“q”（=质量）参数不是更好吗？

这将使用原始大小优化图像。

可能有一些警告，但实际上 - 任何事情都比修改核心更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-24T18:36:06.137

如果磁盘空间不是问题，而只是下载速度，就像我的情况一样......

我面临的问题是客户没有注意特征图像上传的大小或尺寸。该主题是一个响应式主题，适用于图像高度范围并缩放到页面中所需的图像宽度。因此，如果坐在高速网络上，可以上传非常大的文件而不会注意到大小。

我添加了自定义图像大小，使用插件强制重新生成并修改主题以显示自定义大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-24T03:35:01.157

我遇到了类似的问题：客户网站应该产生更大的拇指。我最终构建了一个带有自定义图像编辑器的插件，如下所示：

```
require_once ABSPATH . WPINC . '/class-wp-image-editor.php';
require_once ABSPATH . WPINC . '/class-wp-image-editor-gd.php';

function im_add_image_editor($implementations) {
    array_unshift($implementations, 'IM_Image_Editor_GD');
    return $implementations;
}
add_filter('wp_image_editors', 'im_add_image_editor'); 
```

IM_Image_Editor_GD 扩展了 WP_Image_Editor_GD，将 _resize 函数（调用者`image_resize_dimensions`）更改为调用它的内部版本，如下所示：

```
class IM_Image_Editor_GD extends WP_Image_Editor_GD {
    public function __destruct() {
        parent::__destruct();
    }

    protected function _resize( $max_w, $max_h, $crop = false ) {
        $dims = $this->image_resize_dimensions( $this->size['width'], $this->size['height'], $max_w, $max_h, $crop );
        if ( ! $dims ) {
            return new WP_Error( 'error_getting_dimensions', __('Could not calculate resized image dimensions'), $this->file );
        }
        list( $dst_x, $dst_y, $src_x, $src_y, $dst_w, $dst_h, $src_w, $src_h ) = $dims;

        $resized = wp_imagecreatetruecolor( $dst_w, $dst_h );
        imagecopyresampled( $resized, $this->image, $dst_x, $dst_y, $src_x, $src_y, $dst_w, $dst_h, $src_w, $src_h );

        if ( is_resource( $resized ) ) {
            $this->update_size( $dst_w, $dst_h );
            return $resized;
        }

        return new WP_Error( 'image_resize_error', __('Image resize failed.'), $this->file );
    }

    protected function image_resize_dimensions($orig_w, $orig_h, $dest_w, $dest_h, $crop = false) {
        // Copied original image_resize_dimensions and changed the test
    }
} 
```

希望这对我的英语有所帮助和抱歉！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-06-05T12:59:38.943

您可以使用此插件访问[https://wordpress.org/plugins/simple-image-sizes/进行管理](https://wordpress.org/plugins/simple-image-sizes/)

### 简单的图像尺寸

此插件允许为您的站点创建自定义图像大小。直接在媒体选项页面上覆盖您的主题大小。您可以重新生成刚刚创建的所有尺​​寸并选择要重新生成的尺寸。您现在可以将所有代码复制并粘贴到您的函数主题文件中。现在您可以直接在帖子中使用生成的尺寸，并以正确的尺寸插入图片！现在您选择是否要在插入后的图像中显示大小。现在您可以在“媒体”常规窗格中一张一张地重新生成图像。现在，您可以通过“媒体”常规窗格中的批量操作重新生成图像。现在您可以在单个附件编辑页面上重新生成图像大小。

![在此处输入图像描述](../Images/1eb8d001f1aef0981b1b2eb97648afc7.png)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-07-22T11:00:33.793

WordPress 的默认图片大小为“缩略图”、“中”、“大”和“完整”（您上传的图片的大小）。这些图像大小可以在设置 > 媒体下的 WordPress 管理媒体面板中进行配置。这就是您如何使用 the_post_thumbnail() 使用这些默认大小的方法：

```
the_post_thumbnail();                  // without parameter -> 'post-thumbnail'
the_post_thumbnail('thumbnail');       // Thumbnail (default 150px x 150px max)
the_post_thumbnail('medium');          // Medium resolution (default 300px x 300px max)
the_post_thumbnail('large');           // Large resolution (default 640px x 640px max)
the_post_thumbnail('full');            // Full resolution (original size uploaded)
the_post_thumbnail( array(100,100) );  // Other resolutions 
```

另请参阅[http://codex.wordpress.org/Function_Reference/the_post_thumbnail中的完整文档](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-11-21T16:25:28.620

没关系，我换了核心。伤害了我的内心，但对于这个项目来说，这是最好的解决方案。

# sql - 累积差异

> ID：13460193
> 
> 赞同：2
> 
> 时间：2012-11-19T18:50:35.107
> 
> 标签：sql, oracle

我有一张桌子

```
Meter_Reading

MeterID    |    Reading     |     DateRead     |
1               10                1-Jan-2012
1               20                2-Feb-2012
1               30                1-Mar-2012
1               60                2-Apr-2012
1               80                1-May-2012 
```

读数是一个累积值，我需要计算上个月和当月的差异。

你能帮我弄清楚如何生成一个视图，我可以在其中查看每个月的消费（上个月读数 - 本月读数）吗？

我尝试过 between 函数：

```
select address, reading as Consumption, dateread
from ServiceAddress, reading, meter
where address like '53 Drip Drive%'
and dateread 
between (to_date('01-JAN-2012','DD-MON-YYYY')) and (to_date('30-SEP-2012', 'DD-MON-YYYY'))
and serviceaddress.serviceaddid = meter.serviceaddid and meter.meterid = reading.meterid; 
```

但我得到的只是每个月的读数，而不是差异。

我怎样才能让它列出每月的消费？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T18:58:32.670

尝试[分析函数](http://www.orafaq.com/node/55)。这样的事情应该可以解决问题：

```
SELECT meterid, dateread, 
    reading - LAG(reading, 1, 0) OVER(PARTITION BY meterid ORDER BY dateread)
FROM meter_reading 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T18:59:14.173

您可以使用该`LAG`功能获取上个月的读数。您发布的查询引用了三个表 - `ServiceAddress`、`Reading`，并且`Meter`都不是`Meter_Reading`您为其发布结构和数据的表。我将忽略您发布的查询，因为我不确定这些表中的数据是什么样的，并专注于`Meter_Reading`您发布数据的表

```
SELECT MeterID, 
       DateRead,
       Reading,
       PriorReading,
       Reading - PriorReading AmountUsed
  FROM (SELECT MeterID,
               DateRead,
               Reading,
               nvl(lag(Reading) over (partition by MeterID 
                                          order by DateRead), 
                   0) PriorReading
          FROM meter_reading) 
```

我假设如果没有之前的读数，你想假设之前的读数是 0

# c++ - 数据结构绑定转换c++

> ID：13460198
> 
> 赞同：2
> 
> 时间：2012-11-19T18:50:54.630
> 
> 标签：c++, binding, type-conversion

我认为这是一个经典问题，但我没有找到明确的答案（也许我的关键字不是很好的）。

假设我有一个形式的结构（这是我编程实践中经常出现的情况）：

```
std::vector< pair<unsigned int, double> > pairAgeSize; 
```

我有一个形式的功能：

```
double getMean(const std::vector<double> & sample); 
```

在元素 [pairAgeSize[0].first,...,pairAgeSize[n].first] 上调用 getMean 的“最佳”方法是什么？甚至在 [pairAgeSize[0].second,...,pairAgeSize[n].second] 上？

更一般地说，是否有任何实用的实践规则可以防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:53:50.973

`getMean`应该将迭代器作为完全通用的输入，并且您应该编写一个将返回的自定义迭代器`pair.first`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:06:15.363

如果您绝对无法摆脱`getMean`（也许这是您无法更改的库方法）：

```
std::vector<double> justSizes;
std::transform(pairAgeSize.begin(), pairAgeSize.end(), std::back_inserter(justSizes), [](const std::pair<unsigned int, double> &ageSize) { return ageSize.second; }); 
```

# android - 如何在 Android 的片段中引入 Tab 布局

> ID：13460199
> 
> 赞同：0
> 
> 时间：2012-11-19T18:51:12.770
> 
> 标签：android, android-layout, android-fragments

我的活动中有两个片段。这很好用。现在在我的片段中，我需要两个选项卡式内容。在每个选项卡中，我需要放大一个视图。如何在 oncreateview 方法中做到这一点？是否可以？

这是我的 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="300dp"
android:layout_height="match_parent"
android:background="@drawable/texture_background"
android:baselineAligned="false"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="60dp"
    android:background="#000" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="60dp"
        android:layout_marginBottom="10dp"
        android:padding="10dp"
        android:text="header"
        android:textColor="#fff"
        android:textSize="25dp" >
    </TextView>
</LinearLayout>
<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:visibility="gone" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </LinearLayout>
</TabHost>
</LinearLayout> 
```

这是我在片段中的 oncreateview 方法。

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
  View view = inflater.inflate(R.layout.saved_deals_fragment, container,false);
  TabHost tabs=(TabHost)view.findViewById(android.R.id.tabhost);
  tabs.setup();
  TabHost.TabSpec tab = tabs.newTabSpec("my tab content");
  tab.setIndicator("my tab content");
  tabs.addTab(tab);
  return view;
} 
```

这是我的错误：

```
 11-19 21:29:32.666: E/AndroidRuntime(28686): FATAL EXCEPTION: main
11-19 21:29:32.666: E/AndroidRuntime(28686): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example/com.example.WrapperActivity}:   java.lang.IllegalArgumentException: you must specify a way to create the tab content
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.os.Looper.loop(Looper.java:137)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.app.ActivityThread.main(ActivityThread.java:5039)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at java.lang.reflect.Method.invokeNative(Native Method)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at java.lang.reflect.Method.invoke(Method.java:511)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at dalvik.system.NativeStart.main(Native Method)
11-19 21:29:32.666: E/AndroidRuntime(28686): Caused by: java.lang.IllegalArgumentException: you must specify a way to create the tab content
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.widget.TabHost.addTab(TabHost.java:225)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at com.example.fragments.SavedFragment.onCreateView(SavedDealsFragment.java:120)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.app.Fragment.performCreateView(Fragment.java:1695)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:885)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1057)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.app.BackStackRecord.run(BackStackRecord.java:682)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1435)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.app.Activity.performStart(Activity.java:5113)
11-19 21:29:32.666: E/AndroidRuntime(28686):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2153) 
```

我需要提供任何其他详细信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:16:33.677

您不提供选项卡的内容。您可以使用 a`TabContentFactory`来构建这样的内容：

```
TabHost.TabSpec tab = tabs.newTabSpec("tab1");
tab.setIndicator("my tab content");
tab.setContent(new TabHost.TabContentFactory() {

            @Override
            public View createTabContent(String tag) {
                if (tag.equals("tab1")) {
                    // create/inflate the view for the tab 1
                    return view;
                } else {
                    // the same as tab 1 for the other tabs if you have any             
            }
        });
tabs.addTab(tab); 
```

# java - Gson.toJson 给出 StackOverFlowError，在这种情况下如何获取正确的 json？（公共静态类）

> ID：13460200
> 
> 赞同：3
> 
> 时间：2012-11-19T18:51:14.783
> 
> 标签：java, android, json

我目前有以下课程：

```
 static final class TabInfo{
   public final String tag;
   public final Class<?> clss;
   public Bundle args;

   TabInfo(String _tag, Class<?> _class, Bundle _args) {
       tag = _tag;
       clss = _class;
       args = _args;
   }
 } 
```

我想从中创建json。为此，我使用以下代码：

```
 Gson gson= new Gson();
 Type hmType= new TypeToken<TabInfo>(){}.getType();
 String json = gson.toJson(methodToGetAnInstanceOfTabInfoClassHere, hmType); 
```

当我这样做时，我得到一个 java.lang.StackOverFlowError：

```
E/AndroidRuntime(10353):    at Java.lang.StringBuffer.append(StringBuffer.java:219)
E/AndroidRuntime(10353):    at java.io.StringWriter.write(StringWriter.java:147)
E/AndroidRuntime(10353):    at com.google.gson.stream.JsonWriter.string(JsonWriter.java:519)
E/AndroidRuntime(10353):    at com.google.gson.stream.JsonWriter.writeDeferredName(JsonWriter.java:387)
E/AndroidRuntime(10353):    at com.google.gson.stream.JsonWriter.beginObject(JsonWriter.java:300)
E/AndroidRuntime(10353):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:190)
E/AndroidRuntime(10353):    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrap    E/AndroidRuntime(20692):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
E/AndroidRuntime(20692):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195) 
```

所以，我的问题是：我怎样才能让我的 gson 从类 TabInfo 创建 Java 对象的有效 json 而不会出现 stackoverflowerror？

顺便提一句。正如大家所看到的，我之前没有问过这么多问题，所以如果您对如何改进我的问题有任何反馈：请告诉我！

**编辑 1：** 捆绑类是标准捆绑，fi：捆绑 args = new Bundle(); args.putint("someint", 1);

查看更新的堆栈跟踪...

**编辑 2：** 如果我采用一个 TabInfo 的单个实例，通过使用 String.class 作为参数，例如：

```
 TabInfo test= new TabInfo("test", String.class, new Bundle());
  String result=gson.toJson(test, hmType); 
```

然后我得到以下堆栈跟踪：

```
E/AndroidRuntime(22068): java.lang.UnsupportedOperationException: Attempted to serialize java.lang.Class: java.lang.String. Forgot to register a type adapter?
E/AndroidRuntime(22068):    at com.google.gson.internal.bind.TypeAdapters$1.write(TypeAdapters.java:64)
E/AndroidRuntime(22068):    at com.google.gson.internal.bind.TypeAdapters$1.write(TypeAdapters.java:61)
E/AndroidRuntime(22068):    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
E/AndroidRuntime(22068):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
E/AndroidRuntime(22068):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195)
E/AndroidRuntime(22068):    at com.google.gson.Gson.toJson(Gson.java:586)
E/AndroidRuntime(22068):    at com.google.gson.Gson.toJson(Gson.java:565)
E/AndroidRuntime(22068):    at com.google.gson.Gson.toJson(Gson.java:520) 
```

这是否意味着我需要为可能属于 TabInfo 类的所有 24 个不同类创建一个 TypeToken？我该如何解决这个问题？

**编辑 3**

好的，感谢@Zaske，我找到了解决问题第一部分的方法。使用另一个类签名，如下所示

```
static final class TabInfo{
 TabInfo(String _tag, String _class, Bundle _args) {
   tag = _tag;
   clss = _class;
   args = _args;
 }

} 
```

现在我可以用它制作 json，但是，当我尝试通过创建实际的 HashMap < String, < Stack < TabInfo > > > 来做到这一点时，我又遇到了麻烦。我在这种情况下使用的 typetoken 是：

```
 Type hmType = new TypeToken<HashMap<String, Stack<TabInfo>>>(){}.getType(); 
```

所以，现在我的最后一个问题是：如何将 hashmap 中的一组 tabinfo-stacks 转换为 json？

**编辑 4** 这里有更多信息： 使用的 Bundle 类是 Android 中用于为活动和片段提供参数的 Bundle 类。（见[http://developer.android.com/reference/android/os/Bundle.html](http://developer.android.com/reference/android/os/Bundle.html)）

如果我做

```
 TabInfo test= new TabInfo("test", "String", new Bundle());
 //stage 1 test
 String result=gson.toJson(test);
 Log.d("new result=",result); 
```

然后我得到了我的 Json 输出（见下文）

```
 D/new result=(20816): {"args":{"mClassLoader":{"packages":{}},"mMap":{},"mHasFds":false,"mFdsKnown":true,"mAllowFds":true},"clss":"String","tag":"test"} 
```

但是，当我尝试从 TabInfo 类中制作堆栈的 Hashmap 时，它会中断（内存不足......）......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:08:12.117

正如我建议将“从类更改”为字符串一样，
为了我们的读者，我允许自己在这里回答第一部分：
不要将类用作字段，而是使用包含完整类名的
字符串 TabInfo 应该看起来像：

```
static final class TabInfo{
   public final String tag;
   public final String clss;
   public Bundle args;

   TabInfo(String _tag, Class<?> _class, Bundle _args) {
       tag = _tag;
       clss = _class.getName();
       args = _args;
   }
 } 
```

关于第二部分：
我不知道 Bundle 类是什么 - 请提供信息，
因为我必须进行一些更改并编写自己的实验类。

人员类是：

```
public class Person implements Serializable {
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public Person() {

    }

    public Person(String name, int age) {
        super();
        this.name = name;
        this.age = age;
    }
    public void setAge(int age) {
        this.age = age;
    }
    private String name;
    private int age;
} 
```

检查的主要类是：

```
public class Main {
    public static void main(String[] args) {
        Type type = new TypeToken<HashMap<String,Stack<Person>>>(){}.getType();
        Gson gson = new Gson();
        HashMap<String,Stack<Person>> map = new HashMap<String, Stack<Person>>();
        map.put("yair", new Stack<Person>());
        map.get("yair").add(new Person("Yair",36));
        String str = gson.toJson(map,type);
        System.out.println(str);
        map = gson.fromJson(str,type);
        String str2 = gson.toJson(map,type);
        System.out.println(str2);

    }
} 
```

随意运行它，你会看到 str 和 str2 都打印得很好。

**更新**
我检查了 Bundle 类，发现它包含太多信息（以我的拙见），不能成为一个简单的参数集合。
我不明白为什么在上述问题中不能使用简单的集合。
序列化应包含尽可能少的数据
（考虑将序列化数据存储在某个存储设备上或通过网络发送的情况）。因此，除非 Bundle 为您提供集合所没有的特殊功能 - 不要使用它。
根据经验，您不能使用 Json 序列化所有内容 - 存在限制（例如递归数据类型） - 所以是的，在某些情况下，您必须从一种类型转换为 JSON 可序列化类型。
这种模式也用在其他情况下，我建议你阅读更多关于[数据传输对象的信息](http://en.wikipedia.org/wiki/Data_transfer_object)

# file - Installshield文件夹权限不起作用

> ID：13460201
> 
> 赞同：3
> 
> 时间：2012-11-19T18:51:16.807
> 
> 标签：file, permissions, installshield

使用 InstallShield 2012 Professional 安装 ASP.NET 网站，以及在网络服务帐户的安全上下文中运行的自定义应用程序池。当我测试网站时，我遇到了权限问题（文件权限），网站失败并显示消息“错误：访问被拒绝。”。

使用 InstallShield，我为每个文件设置了对用户“Authenticated Users”的读取权限。我通过导航到“应用程序数据”->“文件和文件夹”在 InstallShield ISM 文件中设置权限

*   选择“目标计算机的文件夹”中的每个文件夹
*   右键单击“目标计算机的文件夹”中的每个文件夹
*   选择上下文菜单“属性”
*   点击按钮“权限”
*   在用户“Authenticated Users”的“Name(s):”部分添加条目，域为空白（选择“Read & Execute”、“List Folder Contents”、“Read”）

...然后对每个文件夹，然后对每个文件一遍又一遍地执行此操作。

一旦我测试，我发现我有问题。如果我导航到服务器上安装的实际文件并查看，它们看起来是正确的，但不能正常运行。事实上，我 - 作为经过身份验证的用户 - 没有导航文件夹结构的权限，但因为我是管理员，所以我可以调整权限并进入。如果我手动重置每个文件（和相关文件夹）的这些权限网站正常运行。这意味着应用程序池设置、文件复制和网络服务帐户都正常运行，并且问题与 IIS 试图访问的文件的权限严格相关。

有没有人遇到过这个问题，并克服了它？如果是这样，怎么做？（我宁愿避免使用 InstallScript 来设置权限。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T20:32:25.147

**备注：**。

在考虑“常规信息”区域中的设置时，特别是“锁定权限”属性 - InstallShield 中文件级别权限设置的行为会有所不同。选择“传统 Windows 安装程序处理”时，我从未成功添加显式权限。我注意到这样做时，文件夹上的所有继承权限都会消失。此外，虽然权限似乎是在 Windows 中设置的，但它们的行为就像没有设置一样。手动操作测试会显示它们没有正确设置。

将“锁定权限”属性设置为“自定义 InstallShield 处理”时，我能够添加权限并且所有继承的权限保持不变。有了这个，我能够将所需的权限应用于“应用程序数据”->“文件和文件夹”区域中的根安装目录，并且因为我选择了“自定义 InstallShield 处理”，所以我能够选中“应用”复选框这些对子对象的权限”在文件夹属性的权限区域的高级区域中。

**完成和解决我的问题的步骤：**

在 InstallShield（ISM 文件）中...

*   导航到“常规信息”（左侧窗格）
*   将锁定权限设置为“自定义 InstallShield 处理”
*   导航到“应用程序数据”
*   右键单击要安装程序的根文件夹
*   点击“属性”
*   点击按钮“权限”
*   在标有“名称”的白框区域中右键单击屏幕的上半部分
*   选择上下文菜单项“新建”
*   删除域用户，将此字段留空
*   添加了用户“经过身份验证的用户”
*   选中下部区域的复选框（“读取并执行”、“列出文件夹内容”、“读取”）
*   点击“高级”按钮
*   选中复选框“将这些权限应用于子对象”
*   单击“确定”按钮
*   单击“确定”按钮
*   单击“确定”按钮

重新编译安装程序并安装。现在工作。

# c# - 从 Asp.Net TextBox 中检索值

> ID：13460215
> 
> 赞同：1
> 
> 时间：2012-11-19T18:52:16.857
> 
> 标签：c#, asp.net

问题：我有一个 asp.net 文本框，我正在将文本放入其中，并且在文本更改时它应该将其值分配给一个变量，这不会发生。

问题：从文本框中检索值的最佳方法是什么？

C#代码：

```
protected void btnSourceConnect_Click(object sender, EventArgs e)
{
    if (Util.Connection(SourceString, 0))
    {
        lblTesting.Text = "Working!";
    }
    else
    {
        lblTesting.Text = "It No Work";
    }
}
protected void txtSourceServer_TextChanged(object sender, EventArgs e)
{
        SourceString.DataSource = txtSourceServer.Text;      
}

protected void txtSourceDatabase_TextChanged(object sender, EventArgs e)
{

        SourceString.InitialCatalog = txtSourceDatabase.Text;

}

protected void txtSourceUN_TextChanged(object sender, EventArgs e)
{

        SourceString.UserID = txtSourceUN.Text;

}

protected void txtSourcePass_TextChanged(object sender, EventArgs e)
{

        SourceString.Password = txtSourcePass.Text;   
} 
```

ASP.NET 代码：

```
<table style="width: 100%;Border:1px solid Black;">
    <tr>
            <td class="style1">
                &nbsp;
                Source Server:</td>
            <td class="style1">
                &nbsp;&nbsp;
                <asp:TextBox ID="txtSourceServer" runat="server" 
                    ontextchanged="txtSourceServer_TextChanged" AutoPostBack="True"></asp:TextBox>
            </td>
            <td class="style1">
                &nbsp; Source Database:
            </td>
            <td class="style1">
                &nbsp;&nbsp;
                <asp:TextBox ID="txtSourceDatabase" runat="server" 
                    ontextchanged="txtSourceDatabase_TextChanged" AutoPostBack="True"></asp:TextBox>
            </td>

        </tr>
        <tr>
            <td class="style1">
                &nbsp; User Name:
            </td>
            <td class="style1">
                &nbsp;&nbsp;
                <asp:TextBox ID="txtSourceUN" runat="server" 
                    ontextchanged="txtSourceUN_TextChanged" AutoPostBack="True"></asp:TextBox>
            </td>
            <td class="style1">
                &nbsp; Password:
            </td>
            <td class="style1">
                &nbsp;&nbsp;
                <asp:TextBox ID="txtSourcePass" runat="server" 
                    ontextchanged="txtSourcePass_TextChanged" AutoPostBack="True"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="style1">
                &nbsp;
            </td>
            <td class="style1">
                &nbsp;
            </td>
            <td class="style1">
                &nbsp;
            </td>
            <td class="style1">
                &nbsp;
                <asp:Button ID="btnSourceConnect" runat="server" Text="Test Connection" 
                    onclick="btnSourceConnect_Click" />
            </td>
        </tr>
        </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:57:36.183

> 从文本框中检索值的最佳方法是什么？

最好的方法就像我现在正在写的这个控件，你有一个回发按钮，然后你在后面的代码中读取文本框的值 - 在回发上。

在您使用的`AutoPostBack="True"`每个 TextBox 上使用都涉及到太多不必要的回发到服务器，最好使用“提交”按钮并在用户单击提交时保存所有值。

在您的情况下，您有一个按钮，您只需要在尝试连接时删除自动回发并设置您的值：

```
protected void btnSourceConnect_Click(object sender, EventArgs e)
{
    SourceString.UserID = txtSourceUN.Text;
    SourceString.DataSource = txtSourceServer.Text;      
    SourceString.InitialCatalog = txtSourceDatabase.Text;
    SourceString.Password = txtSourcePass.Text;   

    if (Util.Connection(SourceString, 0))
    {
        lblTesting.Text = "Working!";
    }
    else
    {
        lblTesting.Text = "It No Work";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:59:18.260

文本框上的 AutoPostback = true 将导致页面在文本框失去焦点时回发，而不是在每次文本更改时回发。

从您的代码的外观来看，大部分功能应该发生在客户端（即使用 javascript）。

# c++ - C++ 无法使用超类的方法？

> ID：13460216
> 
> 赞同：1
> 
> 时间：2012-11-19T18:52:24.360
> 
> 标签：c++, inheritance, methods, superclass

我现在觉得很愚蠢，很久没有做 C++ 了，不明白出了什么问题……但是我得到了以下课程：

```
#include <string>
class NamedObject
{
    public:
        NamedObject();
        virtual ~NamedObject();
        virtual std::string getName() const { return m_name };
        virtual void setName(const std::string name) { m_name = name };
    private:
        std::string m_name;
}; 
```

现在我继承了一个简单的类：

```
#include "NamedObject.h"
enum eTeam { eAttacker, eDefender, eSpectator, eNone };
class Player : public NamedObject
{
    public:
        Player();
        virtual ~Player();
        virtual void printName();
        virtual eTeam getTeam() const { return m_team };
        virtual void setTeam(const eTeam team) { m_team = team };
    private:
        std::string m_name;
        eTeam m_team;
}; 
```

但是，我无法在 main.cpp 中使用 player->setName("blabla")？这是主文件：

```
#include "Player.h"
int main()
{
    Player* p1 = new Player();
    p1->setName("Name Changed!")
    p1->printName(); // prints "Unnamed" since I declared that in default ctor
    return 0;
} 
```

我没有收到任何错误，一切运行良好，名称并没有简单地改变。此外，我得到了所有的构造函数和析构函数，以及我的`printName`-method 工作正常，问题不在它们之内。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:57:17.140

您看到的是`setName`修改了`m_name`父类中的 并`printName`打印出`m_name`派生类的 ，因为您在`std::string m_name;`派生类中重新声明。

从派生类中删除声明并标记`m_name`为父`protected`类中的成员：

```
#include <string>
class NamedObject
{
public:
    NamedObject();
    virtual ~NamedObject();
    virtual std::string getName() const { return m_name };
    virtual void setName(const std::string name) { m_name = name };
protected:
    std::string m_name;
}; 
```

正如 moswald 所建议的，您也可以保持`m_name`私有并使用该方法。`getName()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:55:14.390

`m_name`您在派生类中创建了另一个不同的变量，它隐藏了父类中的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:55:45.467

我可以看到这一定不是您的真实代码。

您的派生/超类正在重新声明 m_name。可能不是你的意思；）

# pagination - Cakephp分页与左右div组合

> ID：13460218
> 
> 赞同：1
> 
> 时间：2012-11-19T18:52:38.410
> 
> 标签：pagination, cakephp-2.0

我在一个 cakephp 2+ 项目中工作。我正在实现分页以在两个左右 div 组合中对产品列表进行排序。我可以制作左 div 但无法制作右 div，因为无法在分页中设置偏移量。我需要左 div 中的一半项目和右 div 中的一半项目，所以我可以设置限制但不能抵消。我怎样才能做到这一点？

```
Controller code

public function index()
{

$rows=$this->Product->find('count', array('conditions'=>array('Product.allow'=>1)));
if($rows%2==0) 
{
$this->paginate = array('conditions' => array('Product.allow'=>1,'limit'=>($rows/2));
$list_l = $this->paginate('Product');
$this->set('left_list',$list_l);
$this->paginate = array('conditions' => array('Product.allow'=>1,'limit'=>($rows/2), 'offset'=>$rows/2));
$list_r = $this->paginate('Product');
$this->set('right_list',$list_r);
} 
else 
{
$right_list=$this->Paginate('Product', array('Product.allow'=>1),array('limit'=>($rows-round($rows/2)), 'offset'=>round($rows/2)));
}
}

View Code

Foreach loop with array returned from controller 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:26:53.947

为什么不调用`$this->paginate()`一次并遍历所有项目并在视图本身中执行拆分？执行这两个调用相当浪费数据库资源。

在这种情况下，您将在控制器中调用 $this->paginate。假设您想要左栏中的五个项目和右栏中的五个项目：

```
$products = $this->paginate = array('conditions' => array('Product.allow'=>1, 'limit' => 10));
$this->set('products', $products); 
```

在视图中：

```
<div class="left-column">
<?php
  foreach ($products as $product) {
    debug($product);
    if ($count === 5) {
      echo "</div>\n<div class=\"right-column\">";
      $count = 1;
    }
    $count++;
  }
?>
</div> 
```

Another way would be to use [`array_chunk`](http://php.net/manual/en/function.array-chunk.php) in the Controller. Using this core PHP function you'll end up with multidimensional numerically indexed array which you can loop over and wrap the child arrays in their relevant divs.

```
<?php
  $limit = round(count($products)/2);
  $products = array_chunk($products, $limit);
  foreach ($products as $index=>$groupedProducts) {
    echo ($index === 0) ? '<div class="left-column">': '<div class="right-column">';
    foreach ($groupedProducts as $product) {
      debug($product);
    }
    echo '</div>';
  }
?> 
```

# jpa-2.0 - JPA 2 标准 - 使用“in”和子查询（？）

> ID：13460235
> 
> 赞同：1
> 
> 时间：2012-11-19T18:54:02.170
> 
> 标签：jpa-2.0, spring-data, spring-data-jpa

我在创建 JPA 2 查询时遇到了麻烦（实际上我正在使用 Spring Data JPA）。我有 2 个表：
-用户（id、company_id、姓名、姓氏、状态）
-用户组（id、user_id、group_id）。
用户可以（并且经常）连接到多个组。

我要做的是根据搜索表单中的过滤选项（姓名、姓氏、状态）和从登录用户（company_id、group_id）中获取的属性来获取不同的用户列表，因为我想只显示这个用户中的用户他所属的公司和集团。

我正在使用 JPA 2 和 Spring Data 中的规范/谓词/标准来执行此操作，并且我编写了以下代码：

```
public static Specification<User> filteredList(final ListFilterBean searchFilter, final LoggedUserBean loggedUser) {
    return new Specification<User>() {

        @Override
        public Predicate toPredicate(Root<User> root,
                CriteriaQuery<?> query, CriteriaBuilder cb) {

            List<Predicate> predicates = new ArrayList<Predicate>();

            root.join("userGroups");

            predicates.add(cb.equal(root.<Long>get(User_.companyId), loggedUser.getCompanyId()));
            predicates.add(cb.like(cb.upper(root.<String>get(User_.name)), getLikePattern(searchFilter.getName())));
            predicates.add(cb.like(cb.upper(root.<String>get(User_.surname)), getLikePattern(searchFilter.getSurname())));
            predicates.add(cb.equal(cb.upper(root.<String>get(User_.status)), searchFilter.getStatusId().charAt(0)));

            query.distinct(true);

            return cb.and(predicates.toArray(new Predicate[0]));
        }
    };
} 
```

这会产生以下 SQL：

```
select
    * 
from
    ( select
        distinct user0_.id as id5_,
        user0_.name as name5_,
        user0_.surname as surname5_
    from
        users user0_ 
    inner join
        user_group usergroup1_ 
            on user0_.id=usergroup1_.user_id 
    where
        user0_.company_id=1 
```

**和（user0_.id in (select distinct user_id from user_group where user_group.group_id in (1, 2, 3))）**

```
 and (
            upper(user0_.name) like '%'
        ) 
        and (
            upper(user0_.surname) like '%'
        ) 
        and upper(user0_.status)='A' ) 
where
    rownum <= 15 
```

代码的粗体部分实际上并不存在，这是我的主要问题。如何编写表达式（谓词）将这部分 SQL 合并到查询中？

提前致谢 ：）

# jquery - javascript 数学、列表和点击功能

> ID：13460236
> 
> 赞同：0
> 
> 时间：2012-11-19T18:54:06.160
> 
> 标签：jquery

[http://jsfiddle.net/mGGPu/](http://jsfiddle.net/mGGPu/)

我想要做的是当点击选择按钮时，项目名称将进入购物车以及项目的价格。然后，当添加更多项目时，javascript 将对所欠的整体“价格”进行数学计算。

也希望，在单击按钮后它会被禁用。

```
<div class="itemWrapper">
   <div id="item1" class="item">
      <span class="title">Item 1</span><br />
      <span class="image"><img src="http://www.thinkgeek.com/images/products/zoom/tqualizer_anim.gif" /></span><br />
      <div class="descrip">
         <span class="points">1000 pts</span><span class="sale">ON SALE</span><br />
         <span class="description">Here would be a simple description of the item for sale. 
         Then We will create a button below.</span>
      </div>
   </div>
   <input type="submit" class="button2" value="Add To Cart" />
</div>
<div class="cartWrapper" />
<div class="cart" id="cartj">
   <div class="cart_body">
      <div class="cart_title">Shopping Cart</div>
      <div class="cart_items">
         <ul>
            <li></li>
         </ul>
      </div>
   </div>
</div> 
```

有人能帮我吗？不确定此代码是否最好使用

```
$('.button2').on('click', function() {
  $(this).closest('.title').css("color","red");
}); 
```

那只是测试单击按钮并更改标题颜色。这只是一个测试代码，有点像后续查看点击功能是否正常工作。虽然没有。

也许这是为了让物品进入购物车？

```
(function($){
$(function(){ $('.button2').click(function();var   
 innerTxt=$(this).text();innerTxt=$.trim(innerTxt);var $obj=
 $('.cart_items li');$obj.val($obj.val()+innerTxt);})}); })(jQuery);​​​ 
```

虽然它不完整。我像睡不着一样继续奔跑，今天脑死了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:56:24.973

您需要在 Div.. 中找到跨度。

带类的 Span`title`不是按钮的祖先。它是一个兄弟姐妹。所以你需要遍历按钮的父元素并找到`e title`你正在寻找的东西。

```
$('.button2').on('click', function() {

  $(this).closest('.itemWrapper').find('.title').css("color","red");
}); 
```

[检查小提琴](http://jsfiddle.net/sushanth009/mGGPu/1/)

# python - 如何在opencv python中检测轮廓相交

> ID：13460237
> 
> 赞同：0
> 
> 时间：2012-11-19T18:54:04.360
> 
> 标签：python, opencv

我正在使用 opencv python 接口（不是 cv2）

```
contourmov =  cv.FindContours(image1, storage, cv.CV_RETR_CCOMP, cv.CV_CHAIN_APPROX_SIMPLE)
contourmove = cv.FindContours(image2, storage, cv.CV_RETR_CCOMP, cv.CV_CHAIN_APPROX_SIMPLE) 
```

我有来自 image1 和 image2 的轮廓，我需要两个轮廓之间的交集。

我用了

```
image3 = cv.CloneImage(image1)
cv.Set(image1, cv.Scalar(0,0,0));
image4 = cv.CloneImage(image1)
cv.Set(image2, cv.Scalar(0,0,0));
cv.DrawContours(image3,contourmov,cv.CV_RGB(0,255,0),cv.CV_RGB(0,255,0),1)
cv.DrawContours(image4,contourmove,cv.CV_RGB(0,255,0),cv.CV_RGB(0,255,0),1)
cv.And(image3,image4,image3) 
```

所以我假设 image3 将具有 image1 和 image2 轮廓的交集，但我没有看到它们。

请让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:27:57.717

我解决了这个问题。我不得不使用

```
 cv.DrawContours(image3,contourmov,cv.CV_RGB(0,255,0),cv.CV_RGB(0,255,0),1,cv.CV_FILLED) 
```

这会填充轮廓区域，您将获得交点。否则只有线，你会得到可能是点的线交叉点。

# email - 通过 gmail 从地址欺骗

> ID：13460240
> 
> 赞同：3
> 
> 时间：2012-11-19T18:54:18.703
> 
> 标签：email, smtp, openssl, gmail, spoof

我正在尝试使用 gmail 发送欺骗性电子邮件。在人们吓坏之前，不，我没有向任何人发送垃圾邮件（如果你必须知道为什么，下面是解释）。使用[这个问题和答案](https://stackoverflow.com/questions/11046135/how-to-send-email-using-simple-smtp-commands-via-gmail)，我能够向自己发送一封带有欺骗地址的测试电子邮件（它显示为我想要的），但是，无论我在字段中输入什么`MAIL FROM`或在`From:`字段中输入什么`DATA`，它总是出现在我用来认证的地址。

我的问题是是否也可以欺骗发件人地址。目标是使发件人地址显示为电子邮件地址以外的其他内容。（同样，解释如下）

**解释**

对于那些想知道我为什么要这样做的人来说，我的兄弟最近升职了，他和我都是《老爸老妈浪漫史》的粉丝。因此，我想向他发送一封*The Bro Code*批准的祝贺电子邮件，其格式必须为：

```
To: Bro
From: Bro
Subject: Bro!

Nice, Bro! 
```

因此，我需要发件人地址看起来只是“兄弟”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:00:26.410

我相信简短的回答是否定的。

电子邮件标题只是文本，所以如果您使用 sendmail 或其他东西，您可以使用任何您想要的东西。但是，它可能（请参阅：将可能）最终出现在他的垃圾邮件文件夹中。

Gmail 需要保护它的声誉，所以他们总是会添加一个面包屑来说明谁*实际*发送了电子邮件。例如，您可以将 gmail 设置为“从”非 Gmail 地址发送电子邮件，但邮件将“代表”您的非 Gmail 地址从您的 gmail 地址发送。

# java - 循环连续运行的问题

> ID：13460245
> 
> 赞同：-3
> 
> 时间：2012-11-19T18:54:29.707
> 
> 标签：java

我的循环问题似乎正在运行并且没有停止我没有让循环停止它继续运行并且不会停止

```
rate=interest/100;
double monthly_rate=rate/period;
double n=period*length;
payment = (principal * Math.pow((1 + monthly_rate), n)) / n;

System.out.printf("Test acoount amount is %.2f",payment);

for(double i=payment; n<=n; n++){
    System.out.println(i+ "" +(payment-i));

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:58:00.993

```
n <= n 
```

通常总是正确的。

您需要弄清楚循环的终止条件，并可能修复它`n++`。它可能是这样的：

```
for (int prd = 1; prd <= n; prd++) ... 
```

这将循环`n`时间并通过包容性`prd`保持值。`1``n`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:59:43.110

您的问题就在 for 语句本身中：

```
for(double i=payment; n<=n; n++){ 
```

在条件 **n<=n**

基本上，你的表达式永远不会计算出它所设置的值，因为 'n 将永远等于 n'

您需要的是让您的支票成为一个不同的变量或某种您希望切断的上限，例如：

```
int max = 10;
for(double i=payment; n<=max; n++){ 
```

您如何设置和/或控制最大值取决于您要达到的目标。

# ios - 单例视图控制器

> ID：13460252
> 
> 赞同：1
> 
> 时间：2012-11-19T18:55:23.370
> 
> 标签：ios, xcode

如何制作视图控制器单例，然后使用此代码：

```
FacebookManager *manager = [FacebookManager sharedManager];
[manager openSessionWithAllowLoginUI:NO] 
```

??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:01:03.210

那不一定是单身人士。单例在任何给定时间只能有一个实例。共享实例类似，但不会阻止创建其他实例。

您可以使用静态变量和类方法实现共享实例，如下所示：

```
+ (FacebookManager *)sharedManager
{
    static FacebookManager *shaderManager = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        shaderManager = [[FacebookManager alloc] init];
    });
    return shaderManager;
} 
```

不要忘记在标题中声明类方法。

# svn - 在颠覆中，有人删除了一个文件并在一次提交中将其添加回来，我该如何解决这个问题？

> ID：13460258
> 
> 赞同：5
> 
> 时间：2012-11-19T18:55:42.303
> 
> 标签：svn

有人做了一个单一的颠覆提交，删除了一个文件，并添加了一个同名的新文件，该文件由原始文件和大约 155 个新行组成。

（我不知道他们是如何做到这一点的。）

现在 'svn log' 只显示返回到该提交的历史记录，如果我想在他们执行此操作的时间点之前和之后区分该文件的修订版，我必须跳过箍。（例如 'svn diff url@oldrev url@newrev' 而不是 'svn diff -rn:m'）

发生这种情况后，已对该文件进行了一些提交。（大约 3 个）。

我怎样才能解决这个问题？

我在 Linux 上使用命令行“svn”客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:56:54.780

Mightymuke其实是对的：

以下是说明：

1.  注意新创建文件的所有修订（我称它们为 R1 .. 到 Rn）
2.  删除原始文件时的注释修订（我称之为 Rd）
3.  至少使用此文件检查工作副本
4.  删除新文件并提交更改并在提交消息中说明文件在提交 R1 中添加错误（说明修订并确保每个人都能理解为什么添加错误）
5.  更新您的工作副本（'svn update'）
6.  如果使用 tortoiseSVN，请使用 show log 并在历史记录中找到 Rd，单击它并右键单击已删除的文件并选择“Revert changes from this revision” 不要在整个修订中使用它，因为那样你也会撤消其他更改. 在其他操作系统上为此使用反向合并（“-c-Rd”表示例如“-c-50”，如果 50 是已删除文件的修订版）：

    svn合并-c-Rd

7.  将当前文件内容从已删除文件复制到重新启动并提交（在您的提交消息中声明撤消修订版 R2..Rn）。替代方案：您可以重新创建每个旧修订并分别提交（在每个提交消息中说明原始修订 R2...Rn）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:57:04.183

以下是命令：

```
$ svn log affected   # Find the last rev that is good, and write it down.
$ svn rm affected
$ svn ci -m'Reverting to save.' affected
$ svn cat -rGOOD_REV affected > affected
$ svn up # important
$ svn add affected
$ svn ci -m'Readding damaged file.' affected
$ svn up # important
# Get revisions after bad import
$ svn diff -rBAD_REV:BAD_REV_PLUS_ONE > diff1.txt
$ patch -p0 < diff1.txt
$ svn ci -m'Rescued -rBAD_REV_PLUS_ONE.' affected
$ svn diff -rBAD_REV_PLUS_ONE:BAD_REV_PLUS_TWO > diff2.txt
$ svn ci -m'Rescued -rBAD_REV_PLUS_TWO.' affected 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T19:23:32.787

我意识到这是一个老问题，但似乎还没有一个简单的答案。

最初描述的问题很容易解决。在一次提交中，您删除了一个文件。在以后的提交中，您重新添加该文件。这打破了具有相同名称的两个文件之间的 svn 历史记录。

修复很简单。您需要执行`svn rm`最新文件、`svn cp`正确的预删除文件修订，然后使用最新更新手动更新文件并重新签入。

例如，假设 myFile.h 在修订版 1234 中被删除：

```
$ cp myFile.h myFile.h.latest        # save copy of latest edits.
$ svn rm myFile.h                    # remove file from svn
$ svn cp myFile.h@1233 myFile.h      # restore the pre-deleted revision (along with history)
$ cp myFile.h.latest myFile.h        # overwrite local copy with latest edits
$ svn ci myFile.h                    # save to SVN 
```

# google-apps-script - 使用google app script ui服务时修改html Meta

> ID：13460259
> 
> 赞同：8
> 
> 时间：2012-11-19T18:55:44.087
> 
> 标签：google-apps-script

在使用 Google 应用脚本上的 ui 服务创建 Web 应用程序时，是否有向 html 标头添加元标记？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-23T21:18:50.533

引用 Caja 问题 1632，[定义视口的元标记未呈现](https://code.google.com/p/google-caja/issues/detail?id=1632)：

> Caja 旨在为访客内容提供页面的一部分，有点像 iframe。因此，作为一般规则，它不能做出影响整个页面显示的声明。为了拥有此功能，您必须让主机页面以某种方式明确允许它。

由于 Google 对 UI 和 HTML 服务页面使用 Caja 清理，并将清理后的输出包装为`<div>`它自己的主机页面中，因此 Google Apps 脚本需要明确允许设置元标记。

遗憾的是，Google Apps 脚本 API 不支持该功能。

# css - 如何使用 CSS 过渡淡入和淡出背景图像？

> ID：13460261
> 
> 赞同：0
> 
> 时间：2012-11-19T18:55:54.447
> 
> 标签：css, dojo

我有一个在加载应用程序时没有背景图像的元素。然后，当单击按钮时，会向元素添加一个 CSS 类，该类会为该元素设置背景图像几秒钟。问题是 - 我无法让背景图像淡入和淡出。

我尝试了什么：

```
.MyBox.formElementInput {
background-repeat: no-repeat;
background-position: 65px center;
background-size: "contain";
-webkit-transition:background-image 2s ease-in-out;
-moz-transition: background-image 2s ease-in-out;
-o-transition: background-image 2s ease-in-out;
transition: background-image 2s ease-in-out;
}

.MyBox.formElementInput.showSpinner {
    background-image : url("/PmDojo/dojox/widget/Standby/images/loading.gif");
} 
```

编辑：JQuery 不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:19:11.753

没有 javascript 插件，CSS 不会褪色或动画背景图像。如果你想要一个唯一的 CSS 选项，你需要将它包装在一个 div 中，并淡入/淡出整个 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T00:20:21.503

如果您也不介意`div`淡入/淡出的内容：

```
#div-with-bg{                
    -webkit-transition: opacity 1.5s linear;
    -moz-transition: opacity 1.5s linear;
    transition: opacity 1.5s linear;
    background: url(background.png);
    opacity: 0;
}
#div-with-bg:hover{
    opacity: 1;
} 
```

# .net - 无法运行/安装/卸载 ClickOnce 应用程序

> ID：13460262
> 
> 赞同：3
> 
> 时间：2012-11-19T18:55:57.343
> 
> 标签：.net, clickonce

我的办公室最近将用户帐户配置文件迁移到了不同​​的域。

一旦用户迁移到新域，他们就无法启动、卸载或重新安装已部署的 .NET 应用程序。这是我在不同 .NET 框架（2.0 和 3.5）上部署的许多应用程序的问题。当我尝试卸载应用程序（控制面板 --> 添加或删除程序）时，没有任何反应。我单击更改/删除，PC 停顿一秒钟，但没有任何反应。

一位用户报告了 DFSVC.EXE 的问题和“未知软件”错误消息。

用户仍然拥有发布应用程序的服务器的完全权限。

任何帮助将不胜感激。

# asp.net - 尝试创建用户时出错

> ID：13460263
> 
> 赞同：0
> 
> 时间：2012-11-19T18:56:01.777
> 
> 标签：asp.net, database, visual-studio

当我尝试在我的网站上注册新用户时出现错误。从我的计算机运行时它工作正常，但在将其上传到我的主机后，我收到以下错误。

我使用了 Visual Studio 预配置的登录/注册功能。

谢谢你的帮助。

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
 [SqlException (0x80131904): A network-related or instance-specific error occurred while         establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)             +5061946      
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity) +341
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +129
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +270
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +232
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +5075607
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
   System.Data.SqlClient.SqlConnection.Open() +125
   System.Web.DataAccess.SqlConnectionHolder.Open(HttpContext context, Boolean revertImpersonate) +95
   System.Web.DataAccess.SqlConnectionHelper.GetConnection(String connectionString, Boolean revertImpersonation) +206
   System.Web.Security.SqlMembershipProvider.CreateUser(String username, String password, String email, String passwordQuestion, String passwordAnswer, Boolean isApproved, Object providerUserKey, MembershipCreateStatus& status) +2587
   System.Web.UI.WebControls.CreateUserWizard.AttemptCreateUser() +302
   System.Web.UI.WebControls.CreateUserWizard.OnNextButtonClick(WizardNavigationEventArgs e) +111
   System.Web.UI.WebControls.Wizard.OnBubbleEvent(Object source, EventArgs e) +413
   System.Web.UI.WebControls.CreateUserWizard.OnBubbleEvent(Object source, EventArgs e) +121
   System.Web.UI.WebControls.WizardChildTable.OnBubbleEvent(Object source, EventArgs args) +19
   System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) +37
   System.Web.UI.WebControls.Button.OnCommand(CommandEventArgs e) +125
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +167
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:09:04.900

将你的数据库文件保存在服务器上，我想你已经给出了本地系统驱动器的路径。

```
data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:01:20.050

看起来您没有更改连接字符串以指向主机系统上的数据库。

如果您使用的是 sqlexpress 数据库，我认为这不会起作用。大多数共享主机站点禁用（不安装）sql express，因为它不像 sql server 那样对资源友好。

如果您使用的是共享托管环境，那么您将需要使用托管站点来创建数据库。他们还应该为您提供连接到数据库所需的连接字符串。

# c# - 我在 ADO.net 数据模型中选择的实体在哪里

> ID：13460264
> 
> 赞同：0
> 
> 时间：2012-11-19T18:56:02.090
> 
> 标签：c#, entity-framework, visual-studio-2012, entity-framework-5, edmx

我是第一次学习实体框架，我使用 Visual Studio 2012。

所以我有点困惑。

* * *

而是只`.edmx`使用其designer.cs 文件，我找到了四个文件，但我从未找到我在上一步中通过我的设计器中的ADO.net 实体数据模型向导选择的表和视图？

有人可以详细解释这些文件是什么吗？Entity Framework 5 比 Entity Framework 4.1 先进吗？

如果我想轻松学习实体框架，我应该返回使用 VS 2008 吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:05:31.043

.EDMX 是一个 XML 文件，用于存储数据库和对象（实体）之间的映射元数据。这是关于使用“模型优先”方法开发 EF 解决方案的一个很好的介绍会议：

[使用实体框架进行模型优先开发简介](http://msdn.microsoft.com/en-US/data/jj205424)

Entity Framework 5.0 中添加了许多新功能，但核心仍然相同。我还建议您查看[Entity Framework Code First 方法](http://msdn.microsoft.com/en-us/data/jj193542)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:03:32.477

您的 .edmx 文件是一个实体容器，只需创建新对象并使用您的数据。

您可以在 .edmx 属性中找到容器名称。

# asp.net-mvc - MVC 3，Asp.net 4 - 应用程序错误 - 找不到资源

> ID：13460269
> 
> 赞同：1
> 
> 时间：2012-11-19T18:56:17.507
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我刚刚创建了一个空应用程序，添加了一个视图、一个控制器并运行了它。

我收到以下错误：

“没有找到您要查的资源。” 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

我的代码：TestController.cs

```
namespace WOSubmittal.Controllers
{
    public class TestController : Controller
    {

        public ActionResult Index()
        {
            return View();
        }

    }
} 
```

视图位于视图/测试下

索引.cshtml

```
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2> 
```

我在 Index() 例程中设置了一个断点，它甚至没有被命中。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:57:52.943

更改`TestlController` 为`TestController`。

在为您的控制器寻找视图时，MVC 将在尝试解析它时使用您的控制器的名称，而不使用 Controller 一词。

根据您给出的代码，MVC 会查看 Views/Testl，而不是 Views/Test。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:26:00.507

改变这个 `public static void RegisterRoutes(RouteCollection routes)`

```
new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
```

为了这：

```
new { controller = "Test", action = "Index", id = UrlParameter.Optional } 
```

在您的 Global.asax.cs

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T17:21:51.380

在 Web.config 文件中更改此行：

```
<httpRuntime enable="false" targetFramework="4.5"/> 
```

到

```
<httpRuntime enable="true" targetFramework="4.5"/> 
```

# javascript - div卸载时如何使用ajax发送复选框而不单击任何提交按钮

> ID：13460270
> 
> 赞同：0
> 
> 时间：2012-11-19T18:56:21.193
> 
> 标签：javascript, ajax, checkbox, fancybox, onbeforeunload

我正在尝试在我的fancybox上设置一个完成按钮，当用户选中复选框时，它将被标记为完成，复选框值将在fancybox上的div卸载后提交，并且没有提交按钮可以点击，只有当fancybox内的div卸载时才会发送该值，我正在使用ajax提交值，

“问题是当fancybox卸载时，即使我使用onbeforeunload，“function donerem()”也不会执行”

![花式盒子](../Images/54abd91113b47acfc86f10e06cdd854c.png)

ajaxscript：这应该在fancybox关闭后触发

```
var R = jQuery.noConflict();
//REMINDER done Submit ===============================================================================
function donerem(){
    if ($('input[name=done]').attr('checked') === 'checked') {
    alert ('checked');
    var ID = $(this).attr("id");
    var dataString = 'msg_id=' + ID;
    R.ajax({
        type: "POST",
        url: "database/clientpanel/wall/donerem.php",
        data: dataString,
        cache: false,
        success: function(html){
                alert ('done');
                var div = document.getElementById("rem" + ID);
                div.parentNode.removeChild(div);

        }
    });

    }
    else
    alert ('not checked');
return false;
});
} 
```

fancybox : 完成按钮

```
<div align="left" class="post_box" onbeforeunload="donerem()">
<input type="checkbox" id="<?php echo $id; ?>" name="done">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:13:27.693

不完全确定我是否理解了这个问题。
要检查它是否被选中，您可以使用以下命令：

```
if ($('input[name=done]').attr('checked') === 'checked') {
    // selected
}
else {
    // not selected
} 
```

你可以像这样缩短它：

```
var selected = ($('input[name=done]').attr('checked') === 'checked') ? true : false; 
```

当 fancybox 关闭时，您需要触发 AJAX 调用。
您可以通过为事件分配一个侦听器来做到这一点，如下所示：

```
$("#some-element").fancybox({
    'scrolling' : 'no',
    'titleShow' : false,
    'onClosed' : function() {
        // make AJAX request
        donerem();
    }
}); 
```

从fancybox 博客中找到这段代码：http: [//fancybox.net/blog](http://fancybox.net/blog)

# mysql - 在linux命令行mysql脚本中没有记录到文件

> ID：13460274
> 
> 赞同：0
> 
> 时间：2012-11-19T18:56:38.873
> 
> 标签：mysql, logging

我正在尝试设置一个 Jenkins 进程来为在 lubuntu 服务器上运行的 mysql db 重建 ddl 和 dml。bash 脚本执行对 mysql 设置日志文件的调用，然后我运行 awk 来分析结果以查看是否发生任何错误。然而，对 mysql 的调用，虽然它正在重建数据库，但不会向日志文件输出任何内容。我尝试了不同的变体来解决这个问题：

```
mysql --user=<usr> --password=<pwd> <ddl.sql >ddl.log 
```

和

```
mysql --user=<usr> --password=<pwd> --tee=ddl.log ddl.sql 
```

在这两种情况下，日志的长度都保持为 0。如果我以交互方式运行 mysql 并输入：

```
\T ddl.log
\. ddl.sql 
```

然后 ddl 结果显示在日志中。我想知道我可能做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:34:09.120

默认情况下，`mysql`在批处理模式下运行时，它产生的唯一输出是查询结果，而不是在交互模式下产生的所有信息性消息。`-v`您可以通过使用该选项一次或多次来提高详细程度。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T19:00:06.100

只需将输出流重定向到文件`$ program-name > ddl.log` [http://www.cyberciti.biz/faq/redirecting-stderr-to-stdout/](http://www.cyberciti.biz/faq/redirecting-stderr-to-stdout/)

# html - Chrome 插件说页面是 W3C 有效的，但 W3C 验证器出现 90 个错误

> ID：13460278
> 
> 赞同：0
> 
> 时间：2012-11-19T18:56:46.267
> 
> 标签：html, w3c-validation

我的任务是改进这个网站 ( [http://www.bdc-construction.co.uk](http://www.bdc-construction.co.uk) )，我注意到的一件事是我的 Chrome 插件说它是 W3C 有效页面，但 W3C 验证器说有90个错误，主要是...

“（http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd）第 273 行，第 28 列：省略的标记最小化参数只有在指定 OMITTAG NO 时才能省略”

我最初没有设计这个网站，我也不知道这个错误是从哪里来的，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:09:31.090

我认为部分问题在于您将某些内容作为 text/html 提供，但您的 DOCTYPE 说它是 XHTML。

# jquery - Jquery Masonry 动画不起作用

> ID：13460279
> 
> 赞同：0
> 
> 时间：2012-11-19T18:56:46.147
> 
> 标签：jquery, jquery-masonry, modernizr

好的，所以我第一次尝试使用 Masonry，我从[http://www.netmagazine.com/tutorials/get-started-jquery-masonry](http://www.netmagazine.com/tutorials/get-started-jquery-masonry)下载了一个演示，演示有效，我遵循了所有的指示。当我尝试将它实现到我自己的网站时，动画不起作用。

错误

```
GET file://localhost/Users/Lencor/Desktop/ElaineSite/js/modernizr-2.5.3.min.js          portfolio.html:26
GET file://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js  portfolio.html:26
GET file://localhost/Users/Lencor/Desktop/ElaineSite/js/jquery.masonry.min.js  portfolio.html:26
Uncaught ReferenceError: $ is not defined script.js:1
Uncaught TypeError: undefined is not a function bootstrap.min.js:6
GET file://localhost/Users/Lencor/Desktop/ElaineSite/js/jquery-1.7.1.min.js  portfolio.html:135 
```

脚本.js

```
$(document).ready(function() {
  // Initialize Masonry
  $('#content').masonry({
    columnWidth: 320,
    itemSelector: '.item',
    isFitWidth: true,
    isAnimated: !Modernizr.csstransitions
  }).imagesLoaded(function() {
    $(this).masonry('reload');
  });
}); 
```

css

```
#content {
  /*width: 980px;*/
  /*width: 95%;*/
  width: auto;
  margin: 0 auto;
}

.item {
  display: block;
  float: left;
  width: 300px;
  margin: 0 20px 20px 0;
  -webkit-transition: left .4s ease-in-out, top .4s ease-in-out .4s;
  -moz-transition: left .4s ease-in-out, top .4s ease-in-out .4s;
  -ms-transition: left .4s ease-in-out, top .4s ease-in-out .4s;
  -o-transition: left .4s ease-in-out, top .4s ease-in-out .4s;
  transition: left .4s ease-in-out, top .4s ease-in-out .4s;
}

.item img {
  width: 300px;
  height: auto;
} 
```

html

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>site</title>
    <!-- <meta name="description" content=""> -->
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <style>
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }
    </style>

    <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
    <!-- <link rel="stylesheet" href="css/main.css"> -->
    <link rel="stylesheet" href="css/style.css">

    <script src="js/modernizr-2.5.3.min.js"></script>

</head>
<body>
    <!--[if lt IE 7]>
        <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
    <![endif]-->

    <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="index.html">site title</a>
                <div class="nav-collapse collapse">
                    <ul class="nav">
                        <li class="dropdown">
                            <a href="portfolio.html" class="dropdown-toggle" data-toggle="dropdown">Portfolio <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Retouching</a></li>
                                <li><a href="#">Design</a></li>
                                <li><a href="#">Print Design</a></li>
                            </ul>
                        </li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                    <!-- <form class="navbar-form pull-right">
                        <input class="span2" type="text" placeholder="Email">
                        <input class="span2" type="password" placeholder="Password">
                        <button type="submit" class="btn">Sign in</button>
                    </form> -->
                </div><!--/.nav-collapse -->
            </div>
        </div>
    </div>

    <div class="container">

       <header class="container">
        <h1>Masonry Demo by <a href="http://www.lukeshumard.com">Luke Shumard</a></h1>
      </header>

      <div id="content" class="container clearfix">

        <div class="item">
          <img src="img/single-1.jpg" alt="" />
        </div>

        <div class="item">
          <img src="img/single-2.jpg" alt="" />
        </div>

        <div class="item featured">
          <img src="img/double-1.jpg" alt="" />
        </div>

        <div class="item">
          <img src="img/single-3.jpg" alt="" />
        </div>

        <div class="item">
          <img src="img/single-4.jpg" alt="" />
        </div>

        <div class="item featured">
          <img src="img/double-2.jpg" alt="" />
        </div>

        <div class="item">
          <img src="img/single-5.jpg" alt="" />
        </div>

        <div class="item">
          <img src="img/single-6.jpg" alt="" />
        </div>

        <div class="item">
          <img src="img/single-7.jpg" alt="" />
        </div>

        <div class="item">
          <img src="img/single-8.jpg" alt="" />
        </div>

        <div class="item">
          <img src="img/single-9.jpg" alt="" />
        </div>

        <div class="item">
          <img src="img/single-10.jpg" alt="" />
        </div>

      </div>

        <hr>

        <footer>
            <p class='pull-right'><small>&copy; 2012</small></p>
        </footer>
    </div> <!-- /container -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.7.1.min.js"><\/script>')</script>

    <script src="js/jquery.masonry.min.js"></script>
    <script src="js/script.js"></script>

    <script src="js/vendor/bootstrap.min.js"></script>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T17:45:56.147

$ 未定义意味着您没有包含 jQuery 库。您可以下载它并将其包含到您的项目中，或者使用某人提供的一些 CDN 链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T08:14:11.623

```
$(document).ready(function () {
     $('#content').imagesLoaded(function () {
      var container = document.querySelector('#content');
      var msnry = new Masonry( container, {   
            // options
            colWidth:320,
            itemSelector: '.item',
            isFitWidth: true,
            isAnimated: true,
             animationOptions: {
            duration: 1000,
            easing: 'linear',
            queue: false
          },
        isInitLayout: false
      });

      msnry._isLayoutInited = true;
      msnry.layout();
    });
    }); 
```

# sql - 实体数据检索

> ID：13460285
> 
> 赞同：1
> 
> 时间：2012-11-19T18:57:04.933
> 
> 标签：sql, database

我需要使用 sql Server 从简单实体中提取数据的帮助。

库存实体具有列`(pk,fk)product_id, (pk,fk)warehouse_id, inventory_amount, inventory_max_stock, inventory_reorder_point`。

我需要库存记录作为产品 ID 列表和以下列的总和：库存数量、库存最大库存和库存再订购点。仅显示`inventory_amount > 900`.

```
SELECT PRODUCT_ID, SUM(INVEN_AMOUNT), SUM(INVEN_MAX_STOCK),
SUM(INVEN_REORDER_POINT) FROM INVENTORY
GROUP BY PRODUCT_ID HAVING INVEN_AMOUNT > 900; 
```

那是我尝试过的代码。但我不断收到错误，即它不是按表达式分组的。关于我为什么会收到该错误的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:38:32.230

`HAVING INVEN_AMOUNT > 900` isn't allowed since you aren't grouping by `INVEN_AMOUNT`. Use WHERE instead:

```
SELECT PRODUCT_ID, SUM(INVEN_AMOUNT), SUM(INVEN_MAX_STOCK), SUM(INVEN_REORDER_POINT)
FROM INVENTORY
WHERE INVEN_AMOUNT > 900
GROUP BY PRODUCT_ID; 
```

If you want to limit those groups with sums > 900, then use `SUM(INVEN_AMOUNT)`:

```
SELECT PRODUCT_ID, SUM(INVEN_AMOUNT), SUM(INVEN_MAX_STOCK), SUM(INVEN_REORDER_POINT)
FROM INVENTORY
GROUP BY PRODUCT_ID 
HAVING SUM(INVEN_AMOUNT) > 900; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:12:12.830

`INVEN_AMOUNT`与 一起使用时无效`having`，但`SUM(INVEN_AMOUNT)`有效。`Having`用于 sum()、avg() 和 max() 等聚合函数，否则使用`where`更好

```
SELECT PRODUCT_ID, SUM(INVEN_AMOUNT) as INVEN_AMOUNT,
SUM(INVEN_MAX_STOCK), SUM(INVEN_REORDER_POINT) FROM INVENTORY
GROUP BY PRODUCT_ID Having SUM(INVEN_AMOUNT) > 900; 
```

[**在这里查看**](http://sqlfiddle.com/#!3/7c353/17)

# xcode - 如何将 -v 添加到 XCode 4.4 编译？

> ID：13460287
> 
> 赞同：0
> 
> 时间：2012-11-19T18:57:13.003
> 
> 标签：xcode, linker-errors

我正在尝试查找链接器错误的来源：

```
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我正在尝试将 -v 添加为命令行参数，但在**Product / Edit Scheme : Build**我看不到这样做的选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:43:45.533

Xcode 的构建脚本将让您查看链接器命令，以便您了解导致链接器失败的原因。通过选择 View > Navigator > Show Log Navigator 打开日志导航器。从日志导航器中选择您的构建以打开构建结果窗口。从构建结果窗口中选择链接步骤。单击步骤右侧的小按钮以打开构建脚本。

![在此处输入图像描述](../Images/987930d952b7781090c9d21fd1593704.png)

# python - 如何在 selenium 远程 webdriver 中指定浏览器二进制文件？

> ID：13460288
> 
> 赞同：3
> 
> 时间：2012-11-19T18:57:15.177
> 
> 标签：python, selenium, webdriver

我正在尝试使用 Firefox 便携版在 python 中进行测试。在普通的 webdriver 中它可以工作，但我想知道如何在远程 webdriver 中做到这一点。我能找到的只是如何传递 firefox 配置文件，但如何指定 webdriver 使用哪个二进制文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T04:41:38.543

```
FirefoxBinary binary = new FirefoxBinary('path/to/binary');
IWebDriver driver = new FirefoxDriver(binary); 
```

希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:43:55.837

非常 hacky，但您可以修改 Webdriver Firefox 插件以指向您的二进制文件。

# python - 如何计算 numpy 2D 网格中的孔数？

> ID：13460290
> 
> 赞同：3
> 
> 时间：2012-11-19T18:57:17.823
> 
> 标签：python, numpy, scipy

我有大小合适的 numpy 2D 浮动网格（例如 > 20k x 10k 单元格）。我想计算网格中 nodata 值的连续组的数量。我可以在 python 中实现一个简单的疼痛填充方法，但似乎必须有办法在 numpy 或 scipy 中有效地做到这一点，但我没有找到一个明显的 ndimage 方法。我在想必须有一种方法来计算补丁，我可以创建一个二进制网格并计算与 nodata 对应的补丁。scipy的fcluster可以做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T20:08:34.737

您可以使用[scipy.ndimage.measurements.label](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.measurements.label.html) () 计算连续区域，使用 numpy.isnan() 仅获取 nodata 值的掩码。例子：

```
>>> a = numpy.zeros( (5, 5) )
>>> a[0,0] = numpy.NaN
>>> a[3,3:5] = numpy.NaN
>>> a
array([[ nan,   0.,   0.,   0.,   0.],
       [  0.,   0.,   0.,   0.,   0.],
       [  0.,   0.,   0.,   0.,   0.],
       [  0.,   0.,   0.,  nan,  nan],
       [  0.,   0.,   0.,   0.,   0.]])
>>> labels, num_labels = scipy.ndimage.measurements.label ( numpy.isnan( a ) )
>>> labels
array([[1, 0, 0, 0, 0],
       [0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0],
       [0, 0, 0, 2, 2],
       [0, 0, 0, 0, 0]])
>>> num_labels
2 
```

这假设“连续”是指“位于网格中的相邻单元格中”而不是“具有相邻值”。

PS 这适用于任意数量的维度，请查看标签函数的文档以了解如何为多个维度中的邻接指定结构元素。

# javascript - 图像的 jQuery load() 事件处理程序

> ID：13460292
> 
> 赞同：0
> 
> 时间：2012-11-19T18:57:32.797
> 
> 标签：javascript, jquery, ajax, modal-dialog

晚上好！

我正在创建一个模态，并且想等到图像加载后再显示模态，但是 jQuerys load() 事件处理程序有一些跨浏览器问题。有没有一种优雅的方式来 void load()，比如使用某种 ajax 调用？

当点击图片的链接时，jQuery 通过“content”将 img-tag 发送到 method.open

```
 method.open = function (content) {
    var img = $(content).attr("href");
    $content.empty().append("<img src='" + img + "' />");
    $(img).load(function(){
        //Move show up here
        //console.log("WUHU");
    });
    $modal.show(); 
```

链接到小提琴：http: [//jsfiddle.net/EUMnF/1/](http://jsfiddle.net/EUMnF/1/)

# java - SQL Server 查询在 Mybatis 中挂起，但在 Management Studio 中没有

> ID：13460296
> 
> 赞同：1
> 
> 时间：2012-11-19T18:57:42.547
> 
> 标签：java, sql-server-2008, mybatis

我有一个问题，我可以在 SQL Sever 管理工作室中运行查询，但是当我从 Mybatis 运行它时，相同的查询挂起。活动监视器显示由查询启动的许多进程，这些进程似乎通过许多 cxpacket 和 pageiolatch_sh 等待相互计时。

audit_player 表有 2.67 亿行，player 和 playerInfo 350,000 和货币 20。

关于可能导致这种情况的任何想法？

```
select 'INS' as typeOfChange,
   p.playerId as "model.id"
   from Player p       
INNER join         
   (select DISTINCT(playerId) as playerId          
     from Audit_Player          
     where modifiedDate > '2012-11-14 14:35:47' and action in ('INS', 'UPD') and tester = 0) ap 
on p.playerId = ap.playerId       
left outer join PlayerInfo i on i.playerId = p.playerId       
left outer join Currency c on c.curName = i.curName where c.curCode <> 'XXX'       
UNION       
 select 'DEL' as typeOfChange,
   playerId as "model.id"
 from Audit_Player       
 where modifiedDate > '2012-11-14 14:35:47' and action = 'DEL' 
```

# c - C 结构指针问题

> ID：13460297
> 
> 赞同：2
> 
> 时间：2012-11-19T18:57:47.417
> 
> 标签：c, pointers, struct

我正在构建一个链表，这是列表项结构：

```
struct TListItemStruct
{
    void* Value;
    struct TListItemStruct* NextItem;
    struct TListItemStruct* PrevItem;
};
typedef struct TListItemStruct TListItem;
typedef TListItem* PListItem; 
```

我在几个功能中使用它，到目前为止看起来还不错。但是，当我定义以下变量时：

```
PListItem item; 
```

我收到以下错误：

```
error C2275: 'PListItem' : illegal use of this type as an expression 
```

这是为什么？定义指向结构的类型指针变量有什么问题？

编辑：这是更多的功能。这不起作用

```
BOOL RemoveItem(PListItem item)
{
    // Verify
    if (item == NULL)
    {
        return FALSE;
    }
    // Get prev and next items
    PListItem prev;
    prev = item->PrevItem;
    //PListItem next = (PListItem)(item->NextItem);
 ... 
```

但是，这有效：

```
BOOL RemoveItem(PListItem item)
{
    PListItem prev;
    // Verify
    if (item == NULL)
    {
        return FALSE;
    }
    // Get prev and next items
    prev = item->PrevItem;
    //PListItem next = (PListItem)(item->NextItem);
 ... 
```

我正在使用VS2012，也许这是一个标准的东西？在函数的开头声明变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:04:08.367

MSVC 使用 C89，它不*支持*C99，因此您需要在函数开头声明所有变量或编译为 C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:18:50.257

在 C89（Visual Studio 2012 支持）中，您必须在作用域的开头声明变量。这就是为什么您的后一个示例可以正常工作的原因。

# vb.net - 迭代非顺序命名的文本框

> ID：13460304
> 
> 赞同：0
> 
> 时间：2012-11-19T18:58:18.170
> 
> 标签：vb.net, telerik

我在一个屏幕上有 44 个文本框（准确地说是 RadNumericTextBoxes，但这并不密切）。它们遵循无法以编程方式复制的通用命名模式 (rntb_[NameOfDBField])。

如何为每个名称为 ^= rntb_ 的控件设置`.Value`为？`Nothing`我尝试了以下方法：

```
Private Sub ClearValues()
    For Each c as Control in Controls
        If TypeOf c Is RadNumericTextBox Then
            TryCast(c, RadNumericTextBox).Value = Nothing
        End If
    Next
End Sub 
```

但是，Controls.Count = 1 并且只包含母版页的名称。

我需要将参数传递给 Controls，还是需要完全做其他事情？它“只有”44 个文本框，所以我可以手动清除每个文本框，但如果可能的话，我宁愿以编程方式进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:21:47.850

如果 RadNumericTextBoxes 在表单上而不是在容器中，那么类似于

```
Private Sub ClearValues()
    For Each c As Control In Me.Controls
        If TypeOf c Is RadNumericTextBox Then
            Dim rntb = DirectCast(c, RadNumericTextBox)
            If rntb.Name.StartsWith("rntb_") Then
                rntb.Value = Nothing
            End If
        End If
    Next
End Sub 
```

但是，如果它们在 GroupBox1 中，那么您将`Me.Controls`在上面替换为`GroupBox1.Controls`.

`End For`你的代码是什么？For..Next 循环`Next`在 VB.NET 中位于其主体的末尾。

# mysql - 我怎样才能加快这个连接自身表的查询？

> ID：13460307
> 
> 赞同：2
> 
> 时间：2012-11-19T18:58:24.643
> 
> 标签：mysql

我们有一个“用户”表，其中包含有关我们用户的信息。此表中的一个字段称为“查询”。我正在尝试选择具有相同查询的所有用户的用户 ID。所以我的输出应该是这样的：

```
user1_id    user2_id    common_query
   43          2            "foo"
   117         433          "bar"
   1           119          "baz"
   1           52           "qux" 
```

不幸的是，我无法在一个小时内完成此查询（用户表非常大）。这是我当前的查询：

```
SELECT u1.id,
       u2.id,
       u1.query
FROM users u1
INNER JOIN users u2
        ON u1.query = u2.query
       AND u1.id <> u2.id 
```

我的解释：

```
+----+-------------+-------+-------+----------------------+----------------------+---------+---------------------------------+----------+--------------------------+
| id | select_type | table | type  | possible_keys        | key                  | key_len | ref                             | rows     | Extra                    |
+----+-------------+-------+-------+----------------------+----------------------+---------+---------------------------------+----------+--------------------------+
|  1 | SIMPLE      | u1    | index | index_users_on_query | index_users_on_query | 768     | NULL                            | 10905267 | Using index              |
|  1 | SIMPLE      | u2    | ref   | index_users_on_query | index_users_on_query | 768     | u1.query                        |       11 | Using where; Using index |
+----+-------------+-------+-------+----------------------+----------------------+---------+---------------------------------+----------+--------------------------+ 
```

正如您从解释中看到的，用户表在查询中被索引，并且该索引似乎正在我的 SELECT 中使用。我想知道为什么表 u2 上的“行”列的值为 11，而不是 1。我可以做些什么来加快这个查询的速度吗？我的 '<>' 在 join 中的比较是不好的做法吗？此外，id 字段是主键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:10:50.840

查询的主要驱动因素是`query`字段上的相等性——如果它被索引的话。<> 到 the`id`可能不是很具体，它通过用于它的选择类型显示为 'ref'

以下仅适用于“查询”未编入索引的情况......

如果`id`是主键，你可以这样做：

```
CREATE INDEX index_1  ON users (query); 
```

添加此类索引的结果将是查询的覆盖索引，并将导致查询的最快执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:22:05.333

我最关心的是`key_len`，它表示 MySQL 必须比较最多 768 个字节才能查找每个索引条目。

对于这个查询，hash index on`query`的性能可能要高得多（因为它会涉及更短的比较，代价是计算 hash 并且无法使用该索引对记录进行排序）：

```
ALTER TABLE users ADD INDEX (query) USING HASH 
```

您也可以考虑将其作为一个组合，`(query, id)`以便 MySQL 无需扫描到记录本身来测试`<>`标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:10:50.583

你有多少查询？您可以添加表 UsersInQueries：

```
id   queryId   userId
0      5         453   
1      23        732 
2      15        761 
```

然后从此表中选择并按 queryId 分组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T19:21:20.660

如果每个查询最多只有两个用户，则可以改为：

```
select query, min(id) as FirstID, max(id) as SecondId
from users
group by query
having count(*) > 1 
```

如果你有两个以上的用户有相同的查询，你能解释一下为什么你想要所有这样的用户对吗？

# ios - 禁用应用 Facebook 帖子的 Facebook 赞/评论功能

> ID：13460310
> 
> 赞同：1
> 
> 时间：2012-11-19T18:58:30.337
> 
> 标签：ios, facebook

> **可能重复：**
> [禁用对通过 Facebook API 发表的特定帖子的评论或点赞](https://stackoverflow.com/questions/6820576/disabling-comments-or-likes-on-a-specific-post-made-via-the-facebook-api)

我正在创建一个应用程序，该应用程序通过操作和墙帖发布到 Facebook，并且我希望能够禁用 Facebook 用户对帖子点赞/评论的功能。如果我查询用户操作，我看到存在“can_like”和“can_comment”字段，并且默认情况下都设置为 true；有没有办法在发布时将它们设置为 false？

# android - ActionBar/ActionBarSherlock 上的菜单溢出按钮

> ID：13460316
> 
> 赞同：2
> 
> 时间：2012-11-19T18:58:54.370
> 
> 标签：android, android-actionbar, actionbarsherlock

这个应用程序是在硬件菜单按钮被弃用之前设计的，所以现在它会在我们的应用程序底部自动显示一个菜单溢出按钮。我们宁愿在需要时将其楔入我们 4 个标签栏项目的右侧。

如果这不可行，我们至少希望能够将孤独的菜单溢出按钮居中，就像它出现在这里的第一张图片上一样 - > [http://www.droid-life.com/2012/05/30/dear -developers-can-we-quit-with-the-menu-button-already-and-adopt-an-action-overflow/](http://www.droid-life.com/2012/05/30/dear-developers-can-we-quit-with-the-menu-button-already-and-adopt-an-action-overflow/)

我们正在使用 ActionBarSherlock。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T09:30:59.647

您必须使用 setAddOptionMenu(true) 手动添加它；

然后在 xml 中创建它，例如：

```
<item
    android:id="@+id/video"
    android:title="@string/video"
    android:icon="@drawable/video"
    android:showAsAction="ifRoom|withText"
/>

<item
    android:id="@+id/email"
    android:title="@string/email"
    android:icon="@drawable/email"
    android:showAsAction="ifRoom|withText"
/> 
```

然后给它充气

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.items, menu);
    return super.onCreateOptionsMenu(menu);
} 
```

如果你想在屏幕底部拆分 actionBar，你可以使用

```
android:uiOptions=”splitActionBarWhenNarrow” 
```

在清单中的活动中

希望能帮助到你

# python - 如何使用 ZODB 进行正确的内存管理？

> ID：13460318
> 
> 赞同：4
> 
> 时间：2012-11-19T18:58:55.273
> 
> 标签：python, memory-management, zodb

我阅读了几个 ZODB 教程，但我仍然不明白一件事：如何释放已经序列化（并提交）到（比如说）FileStorage 的内存？

更具体地说，我希望以下代码停止吃掉我所有的记忆：

```
for i in xrange(bignumber):
    iobtree[i]=Bigobject() # Bigobject is about 1Mb
    if(i%10==0): 
        transaction.commit() # or savepoint(True)
transaction.commit() 
```

如何做到这一点？是否可以释放 iobtree 存储的引用并将其替换为可按需访问的“弱引用”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T19:12:05.697

创建保存点并提交事务已经清除了很多内存。

*   您需要检查 ZODB 缓存参数的设置，并根据需要调整这些参数。缓存大小参数指示缓存的*对象*数，而不是字节数，因此您必须根据对象的大小进行调整。

*   您可以尝试调用`.cacheMinimize()`ZODB 连接对象，这会显式停用缓存中任何未修改（或已提交）的对象。

除此之外，请注意即使 Python 从内存中释放对象，操作系统也不会总是回收释放的内存，直到它需要其他东西。操作系统报告的内存使用情况不一定反映 Python 进程的实际内存需求。

# ironworker - 如何使用 CLI 在本地测试 IronWorker 任务？

> ID：13460323
> 
> 赞同：3
> 
> 时间：2012-11-19T18:59:20.267
> 
> 标签：ironworker

如何使用 CLI 在本地测试 IronWorker 任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:20:24.677

```
iron_worker run worker_name -p '{"foo":"bar","baz":[1,2,3]}' 
```

其中可选的“-p”标志 - 有效载荷

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-28T23:54:30.633

假设您安装了 Docker，您还可以使用 Docker 命令在本地运行您的工作程序：

```
$ docker run --rm -v "$(pwd)":/worker -w /worker iron/php sh -c 'php name_of_worker.php' 
```

只需确保您的 Docker 快速入门终端已启动并正在运行。

如果它适用于 Docker，那么它将适用于 IronIO。正如[此处](http://dev.iron.io/worker/getting_started/)的 Iron 文档所述。

# objective-c - XCode 警告 - 尝试更改项目名称时重复 CMakeLists.txt

> ID：13460324
> 
> 赞同：1
> 
> 时间：2012-11-19T18:59:29.167
> 
> 标签：objective-c, ios, cocoa-touch, cocos2d-iphone, project

我试图更改我的 xcode 项目的名称（它使用 cocos2d 框架），但由于某种原因，我的主文件夹（包含所有 .h 和 .mm 文件的文件夹）不会更改名称。所以然后我手动单击“MyProj TARGETS -> Build Settings”并手动更改了字段：

1.  Info.plist 文件
2.  标头搜索路径
3.  用户标题搜索路径
4.  前缀标题

使用“MyProj/”而不是“PrevName/”（我之前命名该项目的名称），但现在我收到了这两个奇怪的警告：

```
Warning: Multiple build commands for output file /Users/me/Library/Developer/Xcode/DerivedData/MyProj-fzlkaghtvjzkgkenbpejhzwvxsft/Build/Products/Debug-iphonesimulator/MyProj.app/CMakeLists.txt
Warning: The Copy Bundle Resources build phase contains this target's Info.plist file 'MyProj/Resources/Info.plist'. 
```

你会看到这也在下面提到： http: [//www.cocos2d-iphone.org/forum/topic/33245](http://www.cocos2d-iphone.org/forum/topic/33245) 但没有人回答这部分

我试图在[Xcode 警告下查看：“输出文件的多个构建命令”](https://stackoverflow.com/questions/2718246/xcode-strange-warning-multiple-build-commands-for-output-file) 以在“构建阶段 - > 复制捆绑资源”下查看......事实上，有 2 个 CMakeLists.txt 文件。一个是：

```
MyProj/libs/Box2D 
```

另一个是：

```
MyProj/libs/kazmath/src 
```

我需要哪一个？还是我都需要，因为我认为 xcode 曾经同时使用两者进行编译？

我应该提到，如果我留下警告，我的项目现在*似乎*运行良好。但我不喜欢我不理解的警告，而且我知道我*可以*将我的源/资产交换到一个新项目摆脱警告，但我想知道如何正确重命名 xcode 项目中的所有内容以供将来参考。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:46:28.597

哦，哇...我不知道这些天 stackoverflow 上的流量如此之低...（或者至少对于 xcode 和 iOS 开发人员来说） *叹息*

无论如何，我*想*我想出了一个解决办法。

我为第二个警告阅读了[苹果开发者指南](https://developer.apple.com/library/ios/#qa/qa2009/qa1649.html)

对于第一个警告，我查看了我创建的另一个文件，并将我的项目设置与其他项目的设置进行了比较。（这么简单的解决方案，呃，我为什么没有想到这个>_<），结果证明，在 下`Copy Bundle Resources`，你只应该有：

1.  您的 .png 文件和代码中使用的其他资源（但不是您的 plist 文件，原因在上面的链接中给出）
2.  iTunes艺术品
3.  变更日志

实际上，我不确定您是否需要#2 或#3。我会给`upvote`任何尝试它的人。所以....解决方案是简单地删除所有其他`CMakeLists`和`cmakes`所有垃圾，包括`plist`:)

# algorithm - 如何使用 kinect 检测三角形手势？

> ID：13460327
> 
> 赞同：2
> 
> 时间：2012-11-19T18:59:45.337
> 
> 标签：algorithm, kinect, gesture, kinect-sdk

我正在尝试实现一个手势识别系统，它可以解释用户做出的几何手势并将其绘制在屏幕上，

我对如何识别圆有一些想法，但是我不知道如何开始识别三角形。

我拥有的数据是手势通过的所有点的 X 和 Y 坐标。我通过跟踪右手得到这些数据。

我在网上找到了一个叫做霍夫变换的东西，它用于检测线，但我不确定它是否适用于离散的点集合。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:57:39.217

如果您的手牌已经有 x,y 对，那么想到的最简单的事情就是尝试[1 美元的 Unistroke Recognizer](http://depts.washington.edu/aimgroup/proj/dollar/)。

![1 美元 Unistroke 识别器](../Images/367c51ad8891f794e43fc6e61c9bbb6c.png)

一个方便的东西是[动态时间规整（DTW）](http://en.wikipedia.org/wiki/Dynamic_time_warping)。我看过一个有趣的 Processing/SimpleOpenNI 项目，它利用了这种技术和名为[KineticSpace](http://code.google.com/p/kineticspace/)的完整骨架。由于它是开源的，因此可能值得一试。

我建议先尝试 1 美元的 Unistroke 识别器。您可能需要制定一个系统来模拟按下/释放（也许使用 z 上的手速度符号（正到负转换/负到正转换）？）。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:06:57.603

您可以寻找空间填充曲线。它减少了二维并重新排序点。它还添加了一些空间信息。也许你可以用一些模拟退火或蚁群优化来训练或比较新的重新排序的一维索引？！空间填充曲线用于地图平铺程序。

# variable-assignment - 如何在运行时改变 Simulink 中增益模块的增益值

> ID：13460329
> 
> 赞同：2
> 
> 时间：2012-11-19T18:59:55.807
> 
> 标签：variable-assignment, simulink

Simulink 中的 Gain 模块和 Continuous 模块要求用户指定增益。这可以是工作区变量。但我想在运行时改变这个增益。我似乎无法为此找到解决方案。这个想法很简单，但我不敢相信它很难实现。

我尝试使用另一个块写入工作区，但发现“到工作区”块仅在模拟结束或暂停后写入工作区。

我可以将变量存储在数据存储块中，但在这种情况下，我不知道如何为增益/PID 块指定增益值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:53:23.897

如果您关闭了内联参数（它在配置集的优化页面上），您可以打开增益块对话框并更改值。如果要使用工作区变量，则可以在模拟运行时更改工作区变量的值并执行更新图 (^D)。

还有一个称为[Slider Gain](http://www.mathworks.com/help/simulink/slref/slidergain.html)的块，它允许您使用滑块 UI 更改增益值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T08:21:09.687

可能在某些时候会有所帮助：尝试使用 MATLAB Function Block（可直接在 Simulink 中使用的 Matlab 用户定义函数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:39:24.113

作为命令行替代方案，您可以使用[SET_PARAM](http://www.mathworks.com/help/simulink/slref/set_param.html)函数在模型仿真期间更改模块的增益值。

例如，以下代码会将名为“my_model.mdl”的模型顶层名为“My Gain”的模块的增益值更改为 20：

> ```
> set_param('my_model/My Gain','Gain','20'); 
> ```

但是请注意，只有[可调参数](http://www.mathworks.com/help/simulink/ug/using-tunable-parameters.html)可以在运行时使用[SET_PARAM](http://www.mathworks.com/help/simulink/slref/set_param.html)进行更改。

# javascript - 如何完全禁用/启用 html 元素？

> ID：13460330
> 
> 赞同：0
> 
> 时间：2012-11-19T18:59:58.570
> 
> 标签：javascript, html

我在页面上有几个元素。就像是：

```
<div id="el1"><div id="el2"><span id="el3">1</span><span id="el4">2</span></div><span id="el5">3</span></div> 
```

我需要使用它们的 ID 禁用/启用它们中的任何一个。

```
<input type="radio" name="do" onclick="disable(document.getElementById('el4'));">        
<input type="radio" name="do" onclick="enable(document.getElementById('el4'));"> 
```

disable() 和 enable() 函数中应该包含什么才能真正禁用元素？

“禁用”是指使其对用户不可见，“id”无法访问，并且可以通过“enable()”函数恢复。

是否可以打开/关闭元素？完全，我的意思是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:00:38.157

您可以使用

```
document.getElementById('el4').style.display='none'; // hide
document.getElementById('el4').style.display=''; // show 
```

你可以定义这样的函数：

```
function hide(element){
   element.style.display='none';
}
function show(element){
   element.style.display='';
} 
```

我真的建议**不要**使用*启用*和*禁用*词，因为它们有其他含义（禁用的小部件是您可以看到但无法更改的小部件）。

更好的解决方案是定义一个 CSS 类

```
.hidden {
   display: none;
} 
```

并更改 js 中的类：

```
document.getElementById('el4').classname='hidden'; // hide 
```

如果你想完全删除一个元素，你可以使用[removeChild](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)：

```
var node = document.getElementById('el4');
node.parentNode.removeChild(node); 
```

但它几乎从来没有用过。喜欢像通常那样隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:02:55.753

```
function  addEl4(){
   var elem = document.getElementById('el2'); 
   var newElem = document.createElement('div');
   newElem.setAttribute('id', 'el4');
   newElem.innerHTML = 2;
   elem.appendChild(newElem);
};

function  disable(elem){
   var container = document.getElementById('el2'); 
   container.removeChild(elem);
}; 
```

如果您正在谈论从页面中完全删除元素。然后您可以使用该`.removeChild()`方法..然后需要将其附加到您正在谈论的div中..

**[检查小提琴](http://jsfiddle.net/sushanth009/YhPkj/)**

# git - 使用 Git 将特定提交移动到新分支时出错

> ID：13460332
> 
> 赞同：3
> 
> 时间：2012-11-19T19:00:02.933
> 
> 标签：git, git-branch, git-rebase, git-cherry-pick

我有这个：

```
branch-1     a--b--c--d 
```

我需要这个：

```
branch-1     a--c--d
branch-2     b 
```

我试过这个：

```
$git checkout -b branch-2
$git cherry-pick <SHA-1 b> 
```

但我得到了这个：

```
error: could not apply <SHA-1 b>... [comment]
hint: after resolving the conflicts, mark the corrected paths
hint: with 'git add <paths>' or 'git rm <paths>'
hint: and commit the result with 'git commit' 
```

所以我做`$git status`了并得到了`Unmerged paths ... both modified: .gitignore`. 在再次尝试之前，我`git add`ed 和`git commit`ted 再次得到相同的错误消息。

如何将特定提交移至新分支？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:10:24.333

当您提交合并时，就完成了`branch-2`. 你不应该再跑`cherry-pick`了。Cherry-pick 不会改变历史，`branch-1`所以你需要使用交互式变基来做到这一点。

# android - 卸载使用PhoneGap构建的应用程序时，android是否会删除应用程序SQL数据库？

> ID：13460337
> 
> 赞同：1
> 
> 时间：2012-11-19T19:00:28.050
> 
> 标签：android, sql, cordova

我在 Android 上安装了一个可以访问 SQL 数据库的 PhoneGap 应用程序。如果我卸载应用程序然后尝试重新安装它，我会收到一个安全错误，提示我无法访问数据库文件。如果我通过 App/Settings 删除此数据库文件，那么我可以重新安装该应用程序并且它工作正常。

我想在卸载应用程序时自动删除数据库，以便我（或其他用户）无需进入设置即可重新安装。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:17:15.510

这是发生错误时的 LogCat 数据，我省略了一些我认为与此问题无关的内容，希望我没有遗漏任何内容：

```
11-27 18:10:52.859: I/dalvikvm(32482): Could not find method android.webkit.WebView.<init>, referenced from method org.apache.cordova.CordovaWebView.<init>
11-27 18:10:52.859: W/dalvikvm(32482): VFY: unable to resolve direct method 3200: Landroid/webkit/WebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
11-27 18:10:52.859: D/dalvikvm(32482): VFY: replacing opcode 0x70 at 0x0001
11-27 18:10:52.859: D/dalvikvm(32482): VFY: dead code 0x0004-005b in Lorg/apache/cordova/CordovaWebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
11-27 18:10:52.898: I/CordovaLog(32482): Changing log level to DEBUG(3)
11-27 18:10:52.898: I/CordovaLog(32482): Found preference for useBrowserHistory=true
11-27 18:10:52.898: D/CordovaLog(32482): Found preference for useBrowserHistory=true
11-27 18:10:52.898: I/CordovaLog(32482): Found preference for exit-on-suspend=false
11-27 18:10:52.898: D/CordovaLog(32482): Found preference for exit-on-suspend=false
11-27 18:10:52.898: D/JsMessageQueue(32482): Set native->JS mode to 2
11-27 18:10:52.906: D/DroidGap(32482): DroidGap.init()
11-27 18:10:52.906: D/CordovaWebView(32482): >>> loadUrl(file:///android_asset/www/index.html)
11-27 18:10:52.906: D/PluginManager(32482): init()
11-27 18:10:52.914: D/CordovaWebView(32482): >>> loadUrlNow()
11-27 18:10:52.914: D/DroidGap(32482): Resuming the App
11-27 18:10:52.921: D/SoftKeyboardDetect(32482): Ignore this event
11-27 18:10:52.953: D/DroidGap(32482): onMessage(onPageStarted,file:///android_asset/www/index.html)
11-27 18:10:52.953: D/SoftKeyboardDetect(32482): Ignore this event
11-27 18:10:52.960: I/gralloc(520): Allocated 0x660072 size 6488161
11-27 18:10:52.992: D/SoftKeyboardDetect(32482): Ignore this event
11-27 18:10:53.015: D/szipinf(32482): Initializing inflate state
11-27 18:10:53.015: D/szipinf(32482): Initializing zlib to inflate
11-27 18:10:53.023: D/szipinf(32482): Initializing inflate state
11-27 18:10:53.023: D/szipinf(32482): Initializing zlib to inflate
11-27 18:10:53.039: D/szipinf(32482): Initializing inflate state
11-27 18:10:53.039: D/szipinf(32482): Initializing inflate state
11-27 18:10:53.039: D/szipinf(32482): Initializing zlib to inflate
11-27 18:10:53.039: D/szipinf(32482): Initializing zlib to inflate
11-27 18:10:53.164: I/ActivityManager(520): Displayed com.example.ezbrzy_homework_planner/.EzBrzy_Main: +407ms
11-27 18:10:53.398: D/dalvikvm(520): GC_CONCURRENT freed 1451K, 27% free 12851K/17543K, external 9751K/11799K, paused 3ms+8ms
11-27 18:10:54.054: D/Cordova(32482): onPageFinished(file:///android_asset/www/index.html)
11-27 18:10:54.054: D/DroidGap(32482): onMessage(onNativeReady,null)
11-27 18:10:54.054: D/DroidGap(32482): onMessage(onPageFinished,file:///android_asset/www/index.html)
11-27 18:10:54.070: I/Database(32482): sqlite returned: error code = 14, msg = cannot open file at source line 25467
11-27 18:10:54.085: D/DroidGap(32482): onMessage(networkconnection,wifi)
11-27 18:10:54.093: D/DroidGap(32482): onMessage(spinner,stop)
11-27 18:10:54.093: I/gralloc(520): Allocated 0x660072 size 6488161
11-27 18:10:54.234: I/Database(32482): sqlite returned: error code = 23, msg = not authorized
11-27 18:10:54.304: D/dalvikvm(32482): GC_EXTERNAL_ALLOC freed 595K, 44% free 3534K/6279K, external 2755K/2773K, paused 30ms
11-27 18:10:54.328: I/gralloc(520): Allocated 0x660072 size 6488161
11-27 18:10:55.539: I/gralloc(520): Allocated 0x660072 size 6488161
11-27 18:10:56.062: D/DroidGap(32482): onMessage(spinner,stop)
11-27 18:10:57.164: I/Database(32482): sqlite returned: error code = 1, msg = no such table: assignments
11-27 18:10:57.218: I/gralloc(520): Allocated 0x660072 size 6488161
11-27 18:10:58.414: I/gralloc(520): Allocated 0x660072 size 6488161 
```

如果我只是将数据库名称更改为其他名称，它就可以正常工作。现在我什至无法清除设备上的应用程序数据并让旧名称再次运行（在 droid razr 上）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:48:43.373

我猜你正在使用 SQLite 我曾经使用过它，但是我在将我的应用程序移植到 ios 时遇到了问题，然后我使用了 Phonegap 提供的非常易于使用的这种数据库：

[http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#Storage)

您可以使用以下查询删除数据库：

```
db = window.openDatabase("TSSE", "1.0", "TSSE_DB", 200000);
db.transaction(populateDB, errorCB, successCB);
function populateDB(tx) {
   tx.executeSql('DROP TABLE IF EXISTS DB_name');
   tx.executeSql('CREATE TABLE IF NOT EXISTS DB_name (id, name, password, money)');
} 
```

# asp.net - Asp.Net MVC 3/4 保存和创建按钮

> ID：13460339
> 
> 赞同：0
> 
> 时间：2012-11-19T19:00:28.977
> 
> 标签：asp.net, asp.net-mvc

我在 ASP.Net MVC 4 中有一个基本的 CRUD 应用程序。CRUD 格式的创建视图有一个带有“保存”和“取消”按钮的表单。当我点击保存按钮时，数据正确存储在数据库中，视图刷新到以前的列表记录。我想制作一个“保存和添加”按钮，用户单击它，然后数据将存储并再次加载“创建”视图。对不起，我的英语不好...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:06:20.480

您需要在 Create 操作中更改重定向。这称为[发布/重定向/获取](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式。当您发布表单数据时，您的操作会将其保存到数据库中，然后重定向到其他地方。现在它正在将您重定向到您的项目列表操作（可能是 RedirectToAction("Index")）。将其更改为重定向回创建。

```
public ActionResult Create(DataModel data)
{
    if (ModelState.IsValid)
    {
        // save data here

        return RedirectToAction("Create");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:15:51.407

就 mfanto 而言，如果您希望能够像我相信的那样检测单击了哪个按钮，只需使用 type="submit" 创建两个按钮，并且两者都具有相同的名称。但是，给它们两个不同的值。喜欢：

```
<input type="submit" name="whichButton" value="Save" />
<input type="submit" name="whichButton" value="SaveAndAdd" /> 
```

然后在您的控制器中，您将在与按钮名称相同的参数中收到按钮值：

```
public ActionResult ActionName(Model model,string whichButton){
    switch(whichButton) {
        case "Save" : //do stuff and redirect to the list of records
        break;
        case "SaveAndAdd" : //do stuff and redirect to create
        break;
    }
} 
```

# asp.net-mvc-3 - 如何伪造 HttpContext 及其 HttpRequest 以将它们注入服务构造函数

> ID：13460347
> 
> 赞同：1
> 
> 时间：2012-11-19T19:01:12.887
> 
> 标签：asp.net-mvc-3, inversion-of-control, ninject, console-application, ninject-2

在控制台应用程序中，我想使用通常需要将当前 http 上下文传递给其构造函数的服务。我正在使用 Ninject，我想我可以简单地伪造一个 http 上下文并定义正确的绑定，但是我已经为此苦苦挣扎了几个小时而没有成功。

**细节：**

该服务实际上是一个来自 ASP.Net MVC 项目的邮件服务。我也在为 IoC 使用 Ninject。邮件服务需要将当前的 http 上下文传递给它的构造函数。我按如下方式进行绑定：

```
kernel.Bind<IMyEmailService>().To<MyEmailService>()
    .WithConstructorArgument("httpContext", ninjectContext => new HttpContextWrapper(HttpContext.Current)); 
```

但是，我现在想在控制台应用程序中使用此邮件服务，该应用程序将用于在夜间运行自动化任务。为了做到这一点，我想我可以简单地伪造一个 http 上下文，但我已经为此苦苦挣扎了几个小时。

上下文中的所有邮件服务需求都是这两个属性：

*   httpContext.Request.UserHostAddress
*   httpContext.Request.RawUrl

我以为我可以做这样的事情，但是：

定义我自己的假请求类：

```
public class AutomatedTaskHttpRequest : SimpleWorkerRequest
{
    public string UserHostAddress;
    public string RawUrl;

    public AutomatedTaskHttpRequest(string appVirtualDir, string appPhysicalDir, string page, string query, TextWriter output)
        : base(appVirtualDir, appPhysicalDir, page, query, output)
    {
        this.UserHostAddress = "127.0.0.1";
        this.RawUrl = null;
    }
} 
```

定义我自己的上下文类：

```
public class AutomatedTasksHttpContext
{
    public AutomatedTaskHttpRequest Request;

    public AutomatedTasksHttpContext()
    {
        this.Request = new AutomatedTaskHttpRequest("", "", "", null, new StringWriter());
    }
} 
```

并在我的控制台应用程序中按如下方式绑定它：

```
 kernel.Bind<IUpDirEmailService>().To<UpDirEmailService>()
        .WithConstructorArgument("httpContext", ninjectContext => new AutomatedTasksHttpContext()); 
```

不幸的是，这行不通。我尝试了各种变体，但没有一个有效。请多多包涵。所有 IoC 的东西对我来说都很新鲜。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:45:28.443

我最近回答了关于使用 HttpContextFactory 进行测试的问题，它对控制台应用程序同样采用了不同的方法。

```
public static class HttpContextFactory
    {
        [ThreadStatic]
        private static HttpContextBase _serviceHttpContext;

        public static void SetHttpContext(HttpContextBase httpContextBase)
        {
            _serviceHttpContext = httpContextBase;
        }

        public static HttpContextBase GetHttpContext()
        {
            if (_serviceHttpContext!= null)
            {
                return _serviceHttpContext;
            }

            if (HttpContext.Current != null)
            {
                return new HttpContextWrapper(HttpContext.Current);
            }
            return null;
        }
    } 
```

然后在你的代码中：

```
var rawUrl = HttpContextFactory.GetHttpContext().Request.RawUrl; 
```

然后在您的测试中使用该属性作为接缝

```
HttpContextFactory.SetHttpContext(HttpMocks.HttpContext()); 
```

其中 HttpMocks 具有以下内容，并将针对您的测试进行调整：

```
public static HttpContextBase HttpContext()
      {
          var context = MockRepository.GenerateMock<HttpContextBase>();
          context.Stub(r => r.Request).Return(HttpRequest());
          // and stub out whatever else you need to, like session etc
          return context;
      }

      public static HttpRequestBase HttpRequest()
      {
          var httpRequest = MockRepository.GenerateMock<HttpRequestBase>();
          httpRequest.Stub(r => r.UserHostAddress).Return("127.0.0.1"); 
          httpRequest.Stub(r => r.RawUrl).Return(null); 
          return httpRequest;
      } 
```

# asp.net - 使用 IIS 配置 ASP.net 项目的最佳实践

> ID：13460350
> 
> 赞同：0
> 
> 时间：2012-11-19T19:01:23.287
> 
> 标签：asp.net, visual-studio, iis

我想要一些关于开发 asp.net 应用程序的最佳实践的意见和想法。在之前的项目中，我们遇到了创建 DNS 名称和向主机文件添加条目，然后更改 Web 项目设置以将该地址作为“自定义 Web 服务器”的麻烦。

据我了解，这导致所有流量都使用完整的 IIS 系统而不是子集。通过使用 localhost 以外的其他内容，它会导致 IIS 对用户进行完全身份验证，而不是使用内部“环回”。

它还可能取决于您将主机文件条目设置为 127.0.0.1 还是系统的实际 IP 地址。

但是，我似乎在网上找不到任何真正解决这个问题的文章。

谢谢

dbl

# c++ - 为什么对齐的参数编译正确，但在运行时崩溃？

> ID：13460351
> 
> 赞同：4
> 
> 时间：2012-11-19T19:01:36.553
> 
> 标签：c++, visual-studio-2010

我在两个 VS2010 项目中有这段代码：

```
__declspec(align(16)) struct S {
    int a;
};

void f(S v) {} 
```

它不应该编译，因为你不能将对齐的参数传递给函数（除非你通过引用传递它们）；正如我所料，一个项目*确实*拒绝了它。但是另一个项目编译它OK，然后它在运行时崩溃。

我的问题是：为什么允许编译？

我查看了所有编译器选项，但找不到任何相关内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:24:26.767

您是否确认您没有在任何地方定义名为“align”的宏？如果没有，那么放置

```
#undef align 
```

直接在代码上方并重新编译。如果它失败了，那么你在某处定义了那个宏。

# python - 如何从 rabbitmq 消息中获取 pika python 中的 basicproperties 头字段？

> ID：13460352
> 
> 赞同：9
> 
> 时间：2012-11-19T19:01:36.690
> 
> 标签：python, rabbitmq, amqp, pika

```
def callback(ch, method, properties, body):
        prop = properties
        print prop
        #print prop[1]
        #print prop[“headers”]
        #print prop.headers()
        print body 
```

这是来自道具的列表：

```
<BasicProperties(['delivery_mode=2', "headers={'BIProto.ClickEvent': 'BIProto.ClickEvent'}", 'content_type=application/x-protobuf'])> 
```

我可以打印正文和基本属性列表。但是我怎样才能得到标题呢？

函数中的所有#print 语句都出错了。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-19T20:24:21.357

没关系，我所要做的就是打印 prop.headers

# html - IE 8 CSS 问题

> ID：13460353
> 
> 赞同：0
> 
> 时间：2012-11-19T19:01:49.667
> 
> 标签：html, css, internet-explorer, cross-browser, font-face

我的网站在 IE9 上看起来不错，但在 IE8 上却不行。Davideugenepeterson 类和 id 不起作用。谁能指出问题出在哪里？这是我的CSS：

```
 @charset "utf-8";

body
{ min-width:839px;
  max-width:none;
  margin-left:0;
  margin-top:0;
  margin-right:0;
  margin-bottom:0;
  background-color:#fff; }

#Container
{ margin-left:auto;
  margin-right:auto;
  position:relative;
  overflow:auto; }

  #Banner
{ position:relative;
  background-color:#000;
  height:37px;
  width:auto;
  z-index:1; }

    #Theportfolioof
{
  position:absolute;
  text-align:center;
  width:170px;
  height:37px;
  left:-192px;
  top:9.4px;
  bottom:0;
  right:0px; }

.Theportfolioof
{ white-space:nowrap;
  color:#888888;
  text-align:center;
  letter-spacing:1.3px;
  text-transform:uppercase;
  word-spacing:5px;
  line-height:3px;
  font:normal 21px "Quaver Sans";
  font-weight:100;
  margin-left:auto;
  margin-right:auto;
  overflow:visible;
  z-index:1; }

 #Davideugenepeterson
{ position:absolute;
  text-align:center;
  width:170px;
  height:37px;
  left:182px;
  top:1px;
  bottom:0px;
  right:0px; }

.Davideugenepeterson
{ white-space:nowrap;
  color:#FFF;
  text-align:center;
  letter-spacing:0.8px;
  text-transform:capitalize;
  word-spacing:4px;
  line-height:3px;
  font :normal 18px "Pacifico";
  font-size:18px;
  font-weight:100;
  margin-left:auto;
  margin-right:auto;
  overflow:visible;
  z-index:1; }

#Logo
{ width:117px;
  height:117px;
  background-image:url(images/logo.png);
  background-repeat:no-repeat;
  position:absolute;
  left:0;
  top:37px;
  bottom:0;
  right:0;
  margin-left:auto;
  margin-right:auto;
  z-index:1; } 
```

这是我的 HTML：

```
 <body>
    <div id="Container">
    <div id="Banner"><div id="Theportfolioof" class="Theportfolioof">the portfolio of</div><div id="Davideugenepeterson" class="Davideugenepeterson">david eugene peterson</div></div>
    <div id="Logo"></div>
    </div>
  </div>
    </div>
    </body> 
```

这是 IE9 浏览器屏幕截图：这就是它的外观![IE9](../Images/b1912437ef7115beb87824aa226f9739.png)

这就是与 IE8 的不同之处。 ![IE8](../Images/448526e477b518c5b860933e15bd2190.png)

我已经用 W3C 对其进行了验证，css 对 html 4.01 strict 有效，并且 html 也有效。有谁知道是什么问题？就好像它甚至无法识别我设置的字体。（是的，所有字体都正确安装在我的服务器上）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:20:23.897

`.Davideugenepeterson`您的班级的一个属性中有一个错字：

```
font :normal 18px "Pacifico"; 
```

应该：

```
font: normal 18px "Pacifico"; 
```

我敢打赌，IE8 的 CSS 解析器正在读取`"font "`（带有空格）作为属性名称并且无法识别它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:51:25.783

您可能正在不同的 PC 上对其进行测试。带有 IE 9 的一个安装了 Pacifico 和 Quaver Sans，另一个没有。

这不是网络字体的工作方式。如果你想使用自定义的，你必须`font-family`在 CSS 中定义：

```
@font-face {
  font-family: 'MyFontFamily';
  src: url('fonts/myfont-webfont.eot?#iefix') format('embedded-opentype'), 
       url('fonts/myfont-webfont.woff') format('woff'), 
       url('fonts/myfont-webfont.ttf') format('truetype'),
       url('fonts/myfont-webfont.svg#svgFontName') format('svg');
} 
```

其中`url()`包含相对于 CSS 文件的字体路径。

如果您没有上述所有格式的字体文件，请使用[Font Squirell 的`@font-face`生成器](http://www.fontsquirrel.com/fontface/generator)。如果您想知道是否真的需要所有这些，请查看[The New Bulletproof @Font-Face Syntax](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)。

# jquery - 宽度 jquery 选项卡

> ID：13460354
> 
> 赞同：1
> 
> 时间：2012-11-19T19:01:57.663
> 
> 标签：jquery, css, tabs, width

我试图修复一些朋友的网站。我已经实现了一些 jquery 选项卡，但是我找不到使选项卡在容器内充满或至少居中的方法。我已经花了 20 多个小时试图解决这个问题，但我完全卡住了。我认为是一个非常简单的事情，但我真的不明白。

该网站是 tinyurl.com/ccs7blz，标签位于右侧（detalle 等）。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:09:52.510

也许您可以通过编辑 style.css 第 59 行来获得完整宽度

```
.tabsContent {
    padding: 0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:53:00.377

有一个非常简单的 jQuery 插件可以为你做到这一点。

[http://sebnitu.github.com/Horizo​​ntalNav/](http://sebnitu.github.com/HorizontalNav/)

只需确保它正确链接到您的网站（以及 jQuery 库本身），然后添加

```
 $('.my-nav-selector').horizontalNav({}); 
```

到您的自定义 js 文件（或在您的 html 中的脚本标签中）。

如果还有更多您想做的事情，还有很多选项可以自定义它。

* * *

编辑：**CSS解决方案**

如果您只想要一种 CSS 方式，那么您可能会做一些更简单的事情。看起来`<li>`您的菜单选择器上没有任何修饰符。如果您将整个菜单的百分比 (100%) 除以菜单项的数量 (6)，您可以将该数字作为百分比宽度添加到 ul li。

例如，如果我有

```
ul {
width:100%;
} 
```

我有 5 种不同的菜单项

```
<ul>
<li>First</li>
<li>Second</li>
<li>Third</li>
<li>Fourth</li>
<li>Fifth</li>
</ul> 
```

然后我将菜单宽度的百分比除以菜单项的数量：

100% / 5 个菜单项 = 20%；

所以我补充说：

```
ul li {
width:20%;

} 
```

这应该使菜单分布在整个包含 div 中。

# linux - 在 Linux 上，如何伪造域的 MX 记录？

> ID：13460361
> 
> 赞同：6
> 
> 时间：2012-11-19T19:02:39.843
> 
> 标签：linux, email, ubuntu, dns, mail-server

我正在测试两台邮件服务器，它们位于两台（虚拟）机器上，并为电子邮件提供了域名。当其中一台服务器需要向另一台服务器发送电子邮件时，它似乎对收件人域的 MX 记录执行 DNS 查找，无论我放置什么 IP/域映射，它都不会将发件人服务器指向正确的 IP在`/etc/hosts`.

那么我应该安装 DNS 服务器并为收件人域创建自定义 MX 记录吗？我如何在 Ubuntu 上执行此操作，或者有更简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:03:25.977

假设现在的 Ubuntu 服务器通常使用 Postfix 作为消息传输代理，可以通过[`disable_dns_lookups`](http://www.postfix.org/postconf.5.html#disable_dns_lookups)配置参数告诉 Postfix 禁用 SMTP 的 DNS 查找。添加以下行

> disable_dns_lookups = 是

到 Postfix 的配置文件位于`/etc/postfix/main.cf`. 这将使 Postfix`/etc/hosts`在尝试解析邮件收件人的域地址时进行检查。

# macos - Fortran 程序编译：仅在 Windows 上出现分段错误

> ID：13460362
> 
> 赞同：1
> 
> 时间：2012-11-19T19:02:44.207
> 
> 标签：macos, windows-7, fortran, gfortran

我正在尝试在[此处编译 Datcom 更多信息](http://www.pdas.com/datcom.html)，我在 Mac OSX 上使用 gfortran 成功完成了此操作。为了在 W7 上做同样的事情，我下载了 MinGW 并做了我在 Mac 上做的同样的事情，但我得到了

```
Program received signal SIGSEGV: Segmentation fault - invalid memory reference 
Backtrace for this error:
#0 6f6a5456
#1 6f69321f
#2 004011e9 
```

当我启动程序时...

```
$ datcom.exe
Enter the input file name:
EX1.INP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:06:48.880

感谢您的所有建议，我成功构建了 datcom。我使用 gcc4 成功安装了 Cygwin（随 4.5.3 gfortran 版本一起提供）。有了这个版本，只需做

```
gfortran -o datcom *.F90 
```

正确编译软件。

我不知道它是否适用于 Cygwin 和新版本的 gfortran。

非常感谢

# jquery - jQuery悬停 - 鼠标悬停不起作用

> ID：13460366
> 
> 赞同：0
> 
> 时间：2012-11-19T19:03:09.280
> 
> 标签：jquery

我在这里有以下脚本......当我将鼠标悬停在项目上时它可以工作......但是当鼠标离开时，它不会隐藏任何东西。事实上，它看起来就像一个无限循环。请帮忙！:-)

```
<script type="text/javascript">
$(document).ready(function() {
        // Handler for .ready() called.
    $(".hover").hover(
      function () {
         $('.hide').hide();
        var clss = $(this).attr('id');
        $('.pop_'+clss+'').show('slow');
      }, 
      function () {
        $('.hide').hide('slow');
      }
    );

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:46:52.587

盒子里的苍蝇一进入就会获得焦点，这会触发您实现的 mouseleave 功能并且它们会消失。为了获得您想要的功能，您需要：

1.  将 mouseleave 绑定到出现的 .hide div
2.  使新的 div 不会与 .hover 元素重叠

# javascript - 多次单击侦听器 - java 脚本

> ID：13460370
> 
> 赞同：2
> 
> 时间：2012-11-19T19:03:34.063
> 
> 标签：javascript, click

我正在开发一个从文件 myjs.js 中导入一些 javascript 规则的项目，该文件在标题中被调用（在项目的所有网页上）。该文件管理复选框的行为，实际上切换每个复选框对的检查。问题是在某些情况下，这种行为是错误的，但我无法更改此 js 文件中的任何内容，因为它太复杂了。所以，在某个页面上，我决定在某个复选框上监听 click 事件以纠正行为：问题是脚本冲突，我无法触发我的脚本（放在这个页面上）。我怎样才能强制它让我的 java 脚本首先被监听？

实际上checkbox是由myjs.js构造的，应用于html序列

```
<div class="left">
          <input type="radio" name="isPubOk" id="pubOk" checked="checked" />
           <label for="pubOk"><?php echo _("Oui"); ?></label>
</div>
<div class="left">
          <input type ="radio" name="isPubNok" id="pubNok" checked="" />
          <label for="pubNok"><?php echo _("Non"); ?></label>
</div> 
```

这是 js 文件的示例：

```
function initCustomForms() {
    getElements();
    separateElements();
    replaceRadios();
    replaceCheckboxes();
    replaceSelects();
    // hide drop when scrolling or resizing window
    if (window.addEventListener) {
        window.addEventListener("scroll", hideActiveSelectDrop, false);
        window.addEventListener("resize", hideActiveSelectDrop, false);
    }
    else if (window.attachEvent) {
        window.attachEvent("onscroll", hideActiveSelectDrop);
        window.attachEvent("onresize", hideActiveSelectDrop);
    }
}

function refreshCustomForms() {
    // remove prevously created elements
    if(window.inputs) {
        for(var i = 0; i < checkboxes.length; i++) {
            if(checkboxes[i].checked) {checkboxes[i]._ca.className = "checkboxAreaChecked";}
            else {checkboxes[i]._ca.className = "checkboxArea";}
        }
        for(var i = 0; i < radios.length; i++) {
            if(radios[i].checked) {radios[i]._ra.className = "radioAreaChecked";}
            else {radios[i]._ra.className = "radioArea";}
        }
        for(var i = 0; i < selects.length; i++) {
            var newText = document.createElement('div');
            if (selects[i].options[selects[i].selectedIndex].title.indexOf('image') != -1) {
                newText.innerHTML = '<img src="'+selects[i].options[selects[i].selectedIndex].title+'" alt="" />';
                newText.innerHTML += '<span>'+selects[i].options[selects[i].selectedIndex].text+'</span>';
            } else {
                newText.innerHTML = selects[i].options[selects[i].selectedIndex].text;
            }
            document.getElementById("mySelectText"+i).innerHTML = newText.innerHTML;
        }
    }
}

// getting all the required elements
function getElements() {
    // remove prevously created elements
    if(window.inputs) {
        for(var i = 0; i < inputs.length; i++) {
            inputs[i].className = inputs[i].className.replace('outtaHere','');
            if(inputs[i]._ca) inputs[i]._ca.parentNode.removeChild(inputs[i]._ca);
            else if(inputs[i]._ra) inputs[i]._ra.parentNode.removeChild(inputs[i]._ra);
        }
        for(i = 0; i < selects.length; i++) {
            selects[i].replaced = null;
            selects[i].className = selects[i].className.replace('outtaHere','');
            selects[i]._optionsDiv._parent.parentNode.removeChild(selects[i]._optionsDiv._parent);
            selects[i]._optionsDiv.parentNode.removeChild(selects[i]._optionsDiv);
        }
    }

    // reset state
    inputs = new Array();
    selects = new Array();
    labels = new Array();
    radios = new Array();
    radioLabels = new Array();
    checkboxes = new Array();
    checkboxLabels = new Array();
    for (var nf = 0; nf < document.getElementsByTagName("form").length; nf++) {
        if(document.forms[nf].className.indexOf("default") < 0) {
            for(var nfi = 0; nfi < document.forms[nf].getElementsByTagName("input").length; nfi++) {inputs.push(document.forms[nf].getElementsByTagName("input")[nfi]);
            }
            for(var nfl = 0; nfl < document.forms[nf].getElementsByTagName("label").length; nfl++) {labels.push(document.forms[nf].getElementsByTagName("label")[nfl]);}
            for(var nfs = 0; nfs < document.forms[nf].getElementsByTagName("select").length; nfs++) {selects.push(document.forms[nf].getElementsByTagName("select")[nfs]);}
        }
    }
}

// separating all the elements in their respective arrays
function separateElements() {

    var r = 0; var c = 0; var t = 0; var rl = 0; var cl = 0; var tl = 0; var b = 0;
    for (var q = 0; q < inputs.length; q++) {
        if(inputs[q].type == "radio") {
            radios[r] = inputs[q]; ++r;
            for(var w = 0; w < labels.length; w++) {
                if((inputs[q].id) && labels[w].htmlFor == inputs[q].id)
                {
                    radioLabels[rl] = labels[w];
                    ++rl;
                }
            }
        }
        if(inputs[q].type == "checkbox") {
            checkboxes[c] = inputs[q]; ++c;
            for(var w = 0; w < labels.length; w++) {
                if((inputs[q].id) && (labels[w].htmlFor == inputs[q].id))
                {
                    checkboxLabels[cl] = labels[w];
                    ++cl;
                }
            }
        }
    }
}

//replacing radio buttons
function replaceRadios() {

    for (var q = 0; q < radios.length; q++) {

        radios[q].className += " outtaHere";
        var radioArea = document.createElement("div");
        if(radios[q].checked) {
            radioArea.className = "radioAreaChecked";
        }
        else
        {
            radioArea.className = "radioArea";
        }
        radioArea.id = "myRadio" + q;
        radios[q].parentNode.insertBefore(radioArea, radios[q]);
        radios[q]._ra = radioArea;

        radioArea.onclick = new Function('rechangeRadios('+q+')');
        if (radioLabels[q]) {
            if(radios[q].checked) {
                radioLabels[q].className += "radioAreaCheckedLabel";
            }
            radioLabels[q].onclick = new Function('rechangeRadios('+q+')');
        }
    }
    return true;
}

//checking radios
function checkRadios(who) {
    var what = radios[who]._ra;
    for(var q = 0; q < radios.length; q++) {
        if((radios[q]._ra.className == "radioAreaChecked") && (radios[q]._ra.nextSibling.name == radios[who].name))
        {
            radios[q]._ra.className = "radioArea";
        }
    }
    what.className = "radioAreaChecked";
}

//changing radios
function changeRadios(who) {
    if(radios[who].checked) {
        for(var q = 0; q < radios.length; q++) {
            if(radios[q].name == radios[who].name) {
                radios[q].checked = false;
            }
            radios[who].checked = true;
            checkRadios(who);
        }
    }
}

//rechanging radios
function rechangeRadios(who) {
    if(!radios[who].checked) {
        for(var q = 0; q < radios.length; q++) {
            if(radios[q].name == radios[who].name) {
                radios[q].checked = false;
            }
            if(radioLabels[q]) {
                radioLabels[q].className = radioLabels[q].className.replace("radioAreaCheckedLabel","");
            }
        }
        radios[who].checked = true;
        if(radioLabels[who] && radioLabels[who].className.indexOf("radioAreaCheckedLabel") < 0) {
            radioLabels[who].className += " radioAreaCheckedLabel";
        }
        checkRadios(who);

        if(window.$ && window.$.fn) {
            $(radios[who]).trigger('change');
        }
    }
}

//replacing checkboxes
function replaceCheckboxes() {
  if (replaceCheckBoxes == 0)
    return;
    for (var q = 0; q < checkboxes.length; q++) {
        // checkboxes[q].className += " outtaHere";
        var checkboxArea = document.createElement("div");
        if(checkboxes[q].checked) {
            checkboxArea.className = "checkboxAreaChecked";
            if(checkboxLabels[q]) {
                checkboxLabels[q].className += " checkboxAreaCheckedLabel"
            }
        }
        else {
            checkboxArea.className = "checkboxArea";
        }
        checkboxArea.id = "myCheckbox" + q;
        checkboxes[q].parentNode.insertBefore(checkboxArea, checkboxes[q]);
        checkboxes[q]._ca = checkboxArea;
        checkboxArea.onclick = new Function('rechangeCheckboxes('+q+')');
        if (checkboxLabels[q]) {
            checkboxLabels[q].onclick = new Function('changeCheckboxes('+q+')');
        }
        checkboxes[q].onkeydown = checkEvent;
    }
    return true;
}

//checking checkboxes
function checkCheckboxes(who, action) {
    var what = checkboxes[who]._ca;
    if(action == true) {
        what.className = "checkboxAreaChecked";
        what.checked = true;
    }
    if(action == false) {
        what.className = "checkboxArea";
        what.checked = false;
    }
    if(checkboxLabels[who]) {
        if(checkboxes[who].checked) {
            if(checkboxLabels[who].className.indexOf("checkboxAreaCheckedLabel") < 0) {
                checkboxLabels[who].className += " checkboxAreaCheckedLabel";
            }
        } else {
            checkboxLabels[who].className = checkboxLabels[who].className.replace("checkboxAreaCheckedLabel", "");
        }
    }

}

//changing checkboxes
function changeCheckboxes(who) {
    setTimeout(function(){
        if(checkboxes[who].checked) {
            checkCheckboxes(who, true);
        } else {
            checkCheckboxes(who, false);
        }
    },10);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:07:53.313

请在此处查看 jquery`stopImmediatePropagation()`函数：http: [//docs.jquery.com/Types/Event#event.stopImmediatePropagation.28.29](http://docs.jquery.com/Types/Event#event.stopImmediatePropagation.28.29)

我相信这将实现您想要做的事情。

编辑：有了更多细节，我也许可以提供更好的答案。

编辑 2：在 Javascript 中似乎没有保证的执行顺序，因此内联代码可能不会在动态添加的代码之前运行。此外，此特定功能可能仅在使用 jQuery 添加其他处理程序时才有效。

编辑3：

一个快速而肮脏的解决方法是添加

`<script type="text/javascript">var executeHandlers = false;</script>`

到一个 html 文件的顶部。

然后编辑 javascript 文件，使事件处理程序具有

`if (executeHandlers !== false) { ... do the logic you normally would here ... }`

作为身体

这会在需要区别对待的 html 文件中添加一行，并且不应影响其他页面上的执行。

请注意，这是一个快速而肮脏的修复，并且有更好的方法来做到这一点。使用现有 .js 文件的约束，并且只有一个文件需要区别对待，这似乎是达到预期结果的最快/最简单的方法，不一定是最好的。

# php - 有没有更好或更有效的方法来做到这一点？

> ID：13460371
> 
> 赞同：1
> 
> 时间：2012-11-19T19:03:32.950
> 
> 标签：php, html

这段代码正在为我需要它做的事情而工作，但是（在我看来）它看起来很糟糕，所以我希望有人知道一种更清洁或更有效的方法来做同样的事情。我从数据库中提取了几个条目，我希望它们的样式相同。只有徽标和链接名称最终会更改，我将添加说明。这是代码：

```
<div class="content">

    <?PHP
        while($row = $stmt->fetch())
        {
            $name = $row['name'];
            $id = $row['id'];
            $logo = $row['logo'];
            $username = $row['username'];
            echo "<div class=" . "Links" . ">";

            echo "<div class=" . "linkImages" . ">";                        
            echo "<br>" . "<a href=" . "Profile.php?id=".$id . ">" . "<img src=" . "users/" . $username . "/images/" . $logo . " " . "width=" . "200" . " " . "height=" . "auto" . " " . "border=" . "0" . "/>" . "</a>";
            echo  "</div>";

            echo "<div class=" . "linkName" . ">";
            echo "<a href=" ."Profile.php?id=".$id .">" . $name ."</a>";
            echo "</div>";

            echo "</div>";

        }
    ?>

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:09:02.093

[您可以通过切换到HEREDOC 轻松](http://php.net/heredoc)删除大部分回声和字符串连接：

```
while($row = $stmt->fetch()) {
   echo <<<EOL
<div class="links">
yadayada
<br><a href="Profile.php?id={$row['id']}"><img src="users/{$row['username']}" etc....
yada yada yada
EOL; 
```

请注意，其中没有转义，允许在标签属性周围使用适当的引号，以及`{}`嵌入变量的符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:09:30.250

不要使用额外的变量名。相反，请使用原件。

另外，不要用 PHP 输出每一行。使用纯 HTML 并稍后在其中添加变量：

```
<div class="Links">
<a href="Profile.php?id="<?=$row['id']?>"><?=$row['name']?></a> 
```

或者只是回显为 1 行，无需串联

```
echo "<div class=\"linkImages\">"; 
```

或者

```
echo '<div class="linkImages">'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:10:08.520

```
echo '<div class="content">';

while($row = $stmt->fetch()){
    $name = $row['name'];
    $id = $row['id'];
    $logo = $row['logo'];
    $username = $row['username'];
    echo '<div class="Links">
            <div class="linkImages">
                <br><a href="Profile.php?id='.$id .'"><img src="users/'.$username.'/images/'. $logo .'" width="200" height="auto" border="0"></a>
            </div>
            <div class="linkName">
                <a href=Profile.php?id='.$id .'">'.$name.'</a>
            </div>
        </div>';
}

echo '</div>'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T19:13:14.700

我会这样写：

```
<div class="content">
    <?php
    while ($row = $stmt->fetch()){
        echo '<div class="Links">';
        echo '<div class="linkImages">';
        echo '<br /><a href="Profile.php?id='. $row['id'] .'"><img src="users/'. $row['username'] .'/images/'. $row['logo'] .'" width="200" /></a>';
        echo '</div>';
        echo '<div class="linkName">';
        echo '<a href="Profile.php?id='. $row['id'] .'">'. $row['name'] .'</a>';
        echo '</div>';
    }
    ?>
</div> 
```

请注意，我删除了 img 标记的边框 =“0” - 这应该使用 CSS 完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T19:16:39.397

简短的回答是肯定的。几乎总是有一种更清洁或更有效的方法来做到这一点。

这样的事情怎么样？

```
 <div class="content">

        <?PHP while($row = $stmt->fetch()) { ?>

            <div class="Links">
                <div class="linkImages">
                    <br><a href="Profile.php?id="<?=$row['id'] ?>"><img src="users/<?=$row['username'] ?>/images/<?=$row['logo'] ?> width="200" height="auto" border="0" /></a>
                </div>
                <div class="linkName">
                <a href="Profile.php?id="<?=$row['id'] ?>><?=$row['name'] ?></a>
                </div>
            </div>

        <?PHP } ?>

    </div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T19:17:12.143

这里面有很多错误的符号等，它伴随着练习，但这样的事情可能值得尝试

```
<?php
while($row = $stmt->fetch()) {
  $string = "";

  $string .= "<div class=\"Links\">\n";
  $string .= "<div class=\"linkImages\">\n";                        
  $string .= "<br />\n";
  $string .= "<a href=\"Profile.php?id=\"".$row['id'] . "><img src=\"users/". $row['name'] ."/images/" . $row['logo'] . "\" width=\"200\" height=\"auto\" border=\"0\" /></a>\n";
  $string .= "</div>\n";

  $string .= "<div class=\"linkName\">\n";
  $string .= "<a href=\"Profile.php?id=". $row['id'] .">". $row['name'] ."</a>\n";
  $string .= "</div>\n";
  $string .= "</div>\n";

  echo $string;
}
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-19T19:22:39.073

我建议学习如何使用[`printf()`](http://ca3.php.net/manual/en/function.printf.php)函数系列。

```
$frame = '<a href="Profile.php?id=%s"><img src="users/%s/images/%s" width="200" height="auto" border="0"/></a>';
printf($frame, $id, $username, $logo); 
```

# iphone - 核心数据错误？

> ID：13460375
> 
> 赞同：2
> 
> 时间：2012-11-19T19:03:57.507
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios6

我正在开发一个使用 coredata 保存 url 的应用程序。我在 CoreDataRepository 对象类而不是 AppDelegate 中定义 NSManagedObjectContext、NsManagedObjectModel、NSPersistentStoreCoordinator。我正在使用 CoreDataRepository 的引用保存这个 url。我遇到了错误。

```
Undefined symbols for architecture i386:
   "_OBJC_CLASS_$_CoreDataRepository", referenced from:
      objc-class-ref in HomeViewController.o
      objc-class-ref in DashBoardUrlViewController.o
    ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

关于这个错误的任何想法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:12:17.613

链接器找不到您的`CoreDataRepository`课程。查看目标的构建阶段并将该源或库添加到编译或链接阶段，具体取决于它的定义位置。

# jquery-mobile - jquery移动加载页面

> ID：13460380
> 
> 赞同：1
> 
> 时间：2012-11-19T19:04:15.333
> 
> 标签：jquery-mobile, pageload

我试图弄清楚如何使用`$.mobile.loadPage`. 我在加载外部页面时遇到问题。这是我的代码片段：

```
<!DOCTYPE HTML>
<html>
   <head>
      <title>test</title>
      <meta name="viewport" content="width=device-width; initial-scale=1">
      <meta http-equiv="cache-control" content="no-cache">
      <meta http-equiv="pragma" content="no-cache">

      <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />

      <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
      <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
      <script>
         function loadme () {
            $.mobile.loadPage( "external.html", {pageContainer: $('#homecontent')} );            
         }          
         ///////////////////////////////////////////////////////////////////
         $(document).bind ("pagebeforeload", function (event, data) {
            alert ("ext - pagebeforeload");
         });
         $(document).bind ("pageload", function (event, data) {
            alert ("ext - pageload");
         });
         $(document).bind ("pageloadfailed", "#page2", function (event, data) {
            alert ("pageloadfailed");
         });
      </script>
   </head>
   <body>

      <div data-role="page" id="home">
         <div data-role="header" data-id="myheader" data-position="fixed">
            <h1>Home Page</h1>
         </div>
         <div data-role="homecontent">
            <span onclick="loadme();" style="cursor:pointer;">load me</span>
         </div>
         <div data-role="footer" data-id="myfooter" data-position="fixed">
            <h1>footer</h1>
         </div>
      </div>

      <div data-role="page" id="page2" data-add-back-btn="true">
         <div data-role="header" data-id="myheader" data-position="fixed">
            <h1>Page 2</h1>
         </div>
         <div data-role="page2content">
         </div>
         <div data-role="footer" data-id="myfooter" data-position="fixed">
            <h1>footer</h1>
         </div>      
      </div>
   </body>
</html> 
```

以下是我得到的错误

> XMLHttpRequest 无法加载 file:///C:/Documents%20and%20Settings/.../external.html。Access-Control-Allow-Origin 不允许 Origin null。

我正在本地桌面上进行测试。欢迎任何建议。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:24:43.743

您的浏览器有一些限制，阻止某些类型的交互将本地文件。假设您使用的是 Chrome，您需要添加一个命令行选项来启用这种类型的访问。在 Windows 中它将是：

```
chrome.exe --allow-file-access-from-files 
```

# entity-framework - 无法将表（带主键）添加到 EF 设计器

> ID：13460381
> 
> 赞同：0
> 
> 时间：2012-11-19T19:04:17.380
> 
> 标签：entity-framework

我无法将新表拖到我的实体框架设计器上。当我将表格拖到设计器上时，会显示带有一条线的圆圈图标，我无法将表格拖放到设计器上。

根据我的研究，似乎最大的问题是表缺少主键。好吧，我的表有一个主键。

[另一个网站](http://forums.asp.net/t/1661255.aspx/1)建议：“请记住，您的表格应该相互关联，而不是相互隔离。” 我不确定这有什么意义。有些表与其他表无关。

关于我所缺少的任何想法？

![在此处输入图像描述](../Images/a1e2010def9e3d00742582b4c6345082.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:23:01.850

我想我可能已经找到了。此[链接](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/d65c71f5-3887-4f2a-bbd3-e799a4ac6fdc/)指出，如果 Visual Database Tools DLL 得到更新，则可能会导致问题。我确实是最近才安装 SQL Server Data Tools。

但是，我没有尝试该修复，而是找到了一个不错的解决方法：我只需右键单击设计器并选择从数据库更新模型......这很有效。

希望这可以帮助遇到此问题的其他人...

![在此处输入图像描述](../Images/327f3ff7dcf7529a8b422fa60b5b56ee.png)

# bash - 为什么我可以在 zsh 中执行“cmd & ; cmd2”而不是 bash？

> ID：13460387
> 
> 赞同：1
> 
> 时间：2012-11-19T19:05:05.977
> 
> 标签：bash, shell, zsh, background-process

为什么我可以在 zsh 中这样做：

```
zsh$ sleep 5 &; echo foo
[1] 14742
foo 
```

但不是在bash？

```
bash$ sleep 5 &; echo foo
bash: syntax error near unexpected token `;' 
```

有没有办法在bash中做同样的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T19:07:26.683

我通常不使用`zsh`，但这似乎是等效的：

```
sleep 5 & echo foo 
```

它也适用于`zsh`.

我检查了 zsh 文档，并没有看到该组合有任何特殊含义`&;`。这似乎只是一个后台命令，后跟一个空命令，会被忽略。`bash`，另一方面，不允许空命令；如果您键入以下内容，则会收到相同的错误：

```
; echo foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:07:08.010

一种方法是为后台进程生成一个子shell：

```
bash$ (sleep 5 &); echo foo 
```

但我不确定它是否严格等同于您正在寻找的意义。

# jquery - 砌体从 CSS 中检索排水沟值

> ID：13460388
> 
> 赞同：1
> 
> 时间：2012-11-19T19:05:22.090
> 
> 标签：jquery, jquery-masonry, gutter

我正在使用响应式 CSS 网格和砌体。css 网格边距随不同的 .wrapper 大小而变化，所以我想知道是否可以在 css 文件中为 gutter 设置一个值并在 jquery 中检索该值

砌体js

```
jQuery(document).ready(function($){

    var $container = $('.wrapper');
    //get the value from .gutter in css file
    var $gutter = parseInt($('.gutter').css('margin'), 10);

    $container.imagesLoaded( function(){
        $container.masonry({
            itemSelector : '.container',
            singleMode:true,
            isAnimated:true,
            gutterWidth: gutter
        });
    });
}); 
```

的CSS：

```
@media only screen and (min-width:1200px) {
.gutter {margin:20px}
}

@media only screen and (min-width: 768px) and (max-width: 959px) {
.gutter {margin:10px}
} 
```

# javascript - 在给定函数的范围内使用变量而不传递

> ID：13460389
> 
> 赞同：0
> 
> 时间：2012-11-19T19:05:26.687
> 
> 标签：javascript, function, scope, local-variables

我想在给定的“functionToRun”范围内使用像“thisModule”这样的局部变量，而不将它们作为参数传递。

```
Onsetsu.run = function (functionToRun) {
    var thisModule = Onsetsu.namespace(resolvedModule.moduleName);
    functionToRun();
};

Onsetsu.run(function() {
    /* thisModule should be visible here */
}); 
```

不幸的是，“thisModule”没有在范围内定义。有没有一种方便的方法可以将“thisModule”带入函数范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:10:53.037

您可以将 thisModule 附加到 functionToRun 内的 this 引用

```
Onsetsu.run = function (functionToRun) {
    var thisModule = Onsetsu.namespace(resolvedModule.moduleName);
    functionToRun.apply(thisModule,[]);
}; 
```

因此，在您的函数中，您可以像这样引用 thisModule ：

```
function myFunc(){
    console.log(this); // which will refer to thisModule
}
Onsetsu.run(myFunc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:25:41.953

在 和 的最近共享范围内定义一个`functionToRun`变量`Onsetsu.run`。在 内分配变量`Onsetsu.run`：

```
var thisModule;
Onsetsu.run = function (functionToRun) {
    thisModule = Onsetsu.namespace(resolvedModule.moduleName);
    functionToRun();
};

Onsetsu.run(function() {
    /* thisModule should be visible here */
}); 
```

假设您的实际代码比这更复杂：

```
(function(){
    var thisModule;
    var Onsetsu = (function(){
        var resolvedModule = { moduleName: "something" };
        return {
            run: function (functionToRun) {
                thisModule = Onsetsu.namespace(resolvedModule.moduleName);
                functionToRun();
            },
            namespace: function(moduleName){ ... }
        };
    })();
    Onsetsu.run(function() {
        /* thisModule should be visible here */
    });
})(); 
```

如果`Onsetsu`是一个您不能（或不想）修改的库，那么您就不走运了。

**编辑：**您还可以在函数本身上分配一个属性：

```
Onsetsu.run = function (functionToRun) {
    var thisModule = Onsetsu.namespace(resolvedModule.moduleName);
    functionToRun.module = thisModule;
    functionToRun();
}; 
```

您可以`functionToRun`通过以下方式访问该物业`arguments.callee`：

```
Onsetsu.run(function() {
    var module = arguments.callee.module;
}); 
```

或者通过给函数命名：

```
Onsetsu.run(function fn() {
    var module = fn.module;
}); 
```

# r - 制作黑白线图

> ID：13460393
> 
> 赞同：0
> 
> 时间：2012-11-19T19:05:55.387
> 
> 标签：r, ggplot2

假设我正在制作一个大约有十条线左右的折线图，并且我希望每条线都能以黑白区分。有没有办法“自动”给每个分组一个不同的线结构（即虚线、点线、粗细），类似于你可以用不同的颜色做同样的事情？这些是什么并不重要，只是为了使它们能够区分。

编辑：我正在寻找比

```
aes(linetype=group) 
```

# c++ - std::unique_ptr 如何没有大小开销？

> ID：13460395
> 
> 赞同：42
> 
> 时间：2012-11-19T19:06:01.680
> 
> 标签：c++, c++11

如果空类的大小不能为 0，那么 std::tuple 有什么魔力，所以 unique_ptr 的 sizeof 在 64 位机器中返回 8？

在 unique_ptr 中，成员定义为：

```
 typedef std::tuple<typename _Pointer::type, _Dp>  __tuple_type;                 
  __tuple_type  _M_t; 
```

其中 _Dp 是删除器类。

编译器是 gcc 版本 4.7.1 (Debian 4.7.1-7)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-11-19T19:23:26.177

原因是`typename _Dp = default_delete<_Tp>`是一个空类，`tuple`模板采用了空基类优化。

如果您`unique_ptr`使用非默认删除实例化 ，您应该会看到大小增加。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-11-19T19:21:59.863

`unique_ptr`如指定的那样可以有零开销，因为实现它唯一需要的是修改复制/移动原始指针的过程；不需要额外的信息。因此`unique_ptr`除了指针之外不需要存储任何东西，并且可以与指针大小相同。

至于您的特定实施如何实现这一目标；只有大多数派生类型的大小才需要大于零。空基类可以占用零字节。从容器中的无状态分配器到元组，标准库实现利用所谓的“空基类”优化对各种事物进行优化是很常见的。

# jquery - 每行剔除不同的单选按钮列表

> ID：13460403
> 
> 赞同：2
> 
> 时间：2012-11-19T19:06:24.463
> 
> 标签：jquery, knockout.js

我有一份人员名单。对于每个人，我都有一个真/假状态。我希望这对每个人都有约束力。如果您检查下面的小提琴，它绑定正确，但我的单选按钮没有按预期工作。我希望每一行都有自己的一组单选按钮（每行的名称不同）。

例如。第 1 行点击为真，第 2 行点击为假。这应该是允许的，但名称是冲突的，因此删除了第一行的选择。谢谢

[http://jsfiddle.net/ef3fV/5/](http://jsfiddle.net/ef3fV/5/)

```
<table width="300px;">
    <thead>
        <tr>
            <th>Name</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: people">
        <tr>
            <td>
                <span data-bind="text: Name"></span>
            </td>
            <td>
                <input type="radio" name="Status" value="true" data-bind="checked: Status" />
                <input type="radio" name="Status" value="false" data-bind="checked: Status" />
            </td>
            <td><button data-bind="click: $root.changeStatus">Change Status</button></td>
        </tr>
    </tbody>
</table> 
```

​</p>

```
function People(data) {
    var self = this;
    self.Name= data.Name;
    self.Status = ko.observable(data.Status);
}

function PeopleViewModel(userId) {
    var self = this;

    self.people = ko.observable([
                            { Name: 'Bert', Status: true },
                            { Name: 'Charles', Status: true },
                            { Name: 'Denise', Status: false }
                        ]);
    self.changeStatus = function()
    {
        alert("Change " + this.Name + " to " + this.Status);
    };
}

ko.applyBindings(new PeopleViewModel()); 
```

​</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:16:16.983

一些东西：

*   `name`所有人的属性都是一样的。您可以使用`attr`绑定和在每个单选按钮组前面加上人名来更改此设置。
*   您可能打算制作`people`一个`observableArray`而不仅仅是一个`observable`.
*   `Status`如果您希望更新底层数据模型，每个人的属性也应该是可观察的。
*   `value`您分配给的`Status`应该是一个字符串。

这是带有更新的修改后的代码：

**HTML：**

```
<table width="300px;">
    <thead>
        <tr>
            <th>Name</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: people">
        <tr>
            <td>
                <span data-bind="text: Name"></span>
            </td>
            <td>
                <input type="radio" value="true" data-bind="attr: { name: Name + '-status' }, checked: Status" />
                <input type="radio" value="false" data-bind="attr: { name: Name + '-status' }, checked: Status" />
            </td>
            <td><button data-bind="click: $root.changeStatus">Change Status</button></td>
        </tr>
    </tbody>
</table> 
```

**JavaScript：** ​</p>

```
function People(data) {
    var self = this;
    self.Name = data.Name;
    self.Status = ko.observable(data.Status);
}

function PeopleViewModel(userId) {
    var self = this;

    self.people = ko.observableArray([
    {
        Name: 'Bert',
        Status: ko.observable('true')
    },
    {
        Name: 'Charles',
        Status: ko.observable('true')
    },
    {
        Name: 'Denise',
        Status: ko.observable('false')
    }]);

    self.changeStatus = function() {
        alert("Change " + this.Name + " to " + this.Status());
        if (this.Status() === "true") {
            this.Status('false');
        } else {
            this.Status('true');
        }
    };
}

ko.applyBindings(new PeopleViewModel());​ 
```

**示例：http:** [//jsfiddle.net/AKKvz/](http://jsfiddle.net/AKKvz/)

# terminal - 关闭带有从函数生成的 ssh 会话的终端窗口会孤立 ssh 而不是杀死它

> ID：13460404
> 
> 赞同：0
> 
> 时间：2012-11-19T19:06:27.820
> 
> 标签：terminal, zsh

我最近开始通过 zsh 中的一个函数包装我的 ssh 调用，我注意到现在如果我关闭带有活动 ssh 进程的终端（Mac OS X / iTerm2），ssh 进程不会死，而是孤立的（PPID =1)。这随后会连接该 ssh 连接上的任何 tty 应用程序（即屏幕）。

我已将这个问题缩小到 zsh + 函数。这就是重现所需的全部内容：

```
zsh# function foo() { ssh user@host.com }
zsh# foo
--> Close the terminal window (via cmd-w)

zsh# ps ax -o pid,ppid,command | tee >(head -1) | grep -v grep | grep ssh
  PID  PPID COMMAND
29361     1 ssh user@host

zsh# kill 29361
--> everything is OK again. 
```

我已经验证这是一个 zsh 问题，因为它不会在 bash 中重现，并且我已经验证它不是 ssh 问题，因为它确实使用 zsh 中从函数内部启动的任何命令进行重现。

我已经使用 zsh 4.2.x-5.xx 重现了这个问题

我不了解观察到的行为，但想了解。我不确定这是预期的还是 zsh 中的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:51:18.480

当您最初启动 ZSH 时，您是否也观察到此行为

```
env -i TERM=$TERM zsh -f 
```

即没有您的自定义配置文件的来源？

控制 ZSH 的作业控制的一个重要选项是`NO_HUP`.

另请参阅[superuser.com 上的此讨论](https://superuser.com/q/552031/69517)

# php - 将 Delphi TList.Sort 移植到 PHP

> ID：13460406
> 
> 赞同：0
> 
> 时间：2012-11-19T19:06:30.400
> 
> 标签：php, delphi, porting, tlist

我需要从 TList 移植排序过程以接收 PHP 数组

```
procedure TList.Sort(Compare: TListSortCompare);
begin
  if (FList <> nil) and (Count > 0) then
    QuickSort(FList, 0, Count - 1, Compare);
end; 
```

并通过具有以下代码的 QuickSort 导航：

```
procedure QuickSort(SortList: PPointerList; L, R: Integer;
  SCompare: TListSortCompare);
var
  I, J: Integer;
  P, T: Pointer;
begin
  repeat
    I := L;
    J := R;
    P := SortList^[(L + R) shr 1];
    repeat
      while SCompare(SortList^[I], P) < 0 do
        Inc(I);
      while SCompare(SortList^[J], P) > 0 do
        Dec(J);
      if I <= J then
      begin
        T := SortList^[I];
        SortList^[I] := SortList^[J];
        SortList^[J] := T;
        Inc(I);
        Dec(J);
      end;
    until I > J;
    if L < J then
      QuickSort(SortList, L, J, SCompare);
    L := I;
  until I >= R;
end; 
```

我不明白这个原型是什么意思：

```
procedure QuickSort(SortList: PPointerList; L, R: Integer;
  SCompare: TListSortCompare); 
```

PPointerList => OK, L, R => OK

**SCompare：TListSortCompare ??? 这是什么？？？**

```
TListSortCompare = function (Item1, Item2: Pointer): Integer; 
```

我无法理解这个代码流。

如您所见，http: [//php.net/sort](http://php.net/sort)使用 » Quicksort 的实现 - 但不是相同的代码流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:24:18.647

最接近的实现是 PHP 原生函数**usort()**在回调中使用自定义函数。

[http://www.php.net/manual/en/function.usort.php](http://www.php.net/manual/en/function.usort.php)

它解决了我的问题。谢谢！

# nginx - 允许特定用户代理访问特定文件

> ID：13460407
> 
> 赞同：1
> 
> 时间：2012-11-19T19:06:32.963
> 
> 标签：nginx

我只想允许特定的用户代理“Mozilla/4.0”在某些主机上获取某些特定文件：

```
location ~* ^.+.(txt|doc).*?$ {
        if ($http_user_agent !~ ^Mozilla/4\.0$) {
                return 404;
        }
} 
```

并且似乎不起作用，我做错了什么？

# vb.net - C# 应用程序块 - 静态类和方法

> ID：13460411
> 
> 赞同：0
> 
> 时间：2012-11-19T19:06:58.130
> 
> 标签：vb.net

我为连接到 Oracle 和 SQL 数据库的应用程序开发了一个数据访问层。我在这里编写了一个与 Application Blocks 提供的类似的类：http: [//www.sharpdeveloper.net/source/SqlHelper-Source-Code-cs.html](http://www.sharpdeveloper.net/source/SqlHelper-Source-Code-cs.html)。

我不确定为什么链接中的方法是静态的。当我想执行 CRUD 操作时，我会创建一个类的实例，然后调用相应的函数。为什么方法是静态的？

VB.NET 不允许共享类（仅共享函数）。因此，我正在考虑使所有功能共享。在我这样做之前，我想了解为什么链接中的方法是静态的。

我研究过这个。例如，以下链接说明这些方法是静态的，但没有说明原因：[http](http://www.4guysfromrolla.com/articles/062503-1.aspx) ://www.4guysfromrolla.com/articles/062503-1.aspx 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:16:04.083

我想到了几个重要的原因。

*   简单

运行该方法所需的一切都通过参数列表到达。开发人员不必遵循实例化实现的任何怪癖。

*   速度。

根据下面的链接，静态方法调用比它们的实例化方法快大约 4-5 倍。

[http://msdn.microsoft.com/en-us/library/ms973852.aspx](http://msdn.microsoft.com/en-us/library/ms973852.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:17:14.920

在 vb 中，模块的行为与 c# 中的静态类一样。当您只想要一个具有所有共享方法的辅助类型类时很有用。

作为一个非常普遍的规则，静态/共享方法应该更有效。因为您不需要实例化一个类来进行相同的调用。因此，您不会生成整个对象来执行您不需要完整对象来执行的操作。例如，一个简单的数学函数。

```
public shared function AddNumbers(number1 as integer, number2 as integer) as integer 
```

与修改或访问对象数据的东西相比。

```
public function AccrueInterest() as integer 
```

这可能是访问同一对象上的 interestRate 和 Balance 属性的东西。

# ios - YouTube-Api 视频评论

> ID：13460412
> 
> 赞同：0
> 
> 时间：2012-11-19T19:06:58.463
> 
> 标签：ios, http, post, youtube, youtube-api

我正在尝试通过 youtube api 对 youtube 视频发表评论。我必须向他们的服务器发送一些 XML，但是当我这样做时，它什么也没给我，也没有在视频上评论它。

[这是 api 文档](https://developers.google.com/youtube/2.0/developers_guide_protocol)的链接！

> 发布 /feeds/api/videos/VIDEO_ID/comments HTTP/1.1
> 
> 主办方：gdata.youtube.com
> 
> 内容类型：application/atom+xml
> 
> 内容长度：CONTENT_LENGTH
> 
> 授权：承载ACCESS_TOKEN
> 
> GData-版本：2
> 
> X-GData-Key: key=DEVELOPER_KEY

```
<?xml version="1.0" encoding="UTF-8"?>
<entry xmlns="http://www.w3.org/2005/Atom"
    xmlns:yt="http://gdata.youtube.com/schemas/2007">
<content>This is a crazy video.</content>
</entry> 
```

我非常感谢您的所有帮助，因为我已经坚持了好几天了。谢谢！

这是我的代码： NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

```
NSString *requestString = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"UTF-8\"?><entry xmlns=\"http://www.w3.org/2005/Atom\"xmlns:yt=\"http://gdata.youtube.com/schemas/2007\"><content>%@</content></entry>", [textField text]];

NSData *postData = [requestString dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];

[request setURL:[NSURL URLWithString:@"https://gdata.youtube.com/feeds/api/videos/4NE7Nmmt0R4/comments"]];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/atom+xml" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"key=%@", [defaults objectForKey:@"accessToken"]] forHTTPHeaderField:@"Authorization"];
[request setValue:@"key=AI39si4apF3QyQkXbH_C5IHIClkyP2mio2QJ3JBUUpvPbO2rhch7tpYjMavZgt5QzGaGrHBfom5mNpoUq_ZLRPPa35KO21O9Pw" forHTTPHeaderField:@"X-GData-Key"];
[request setValue:@"2" forHTTPHeaderField:@"GData-Version"];

[request setHTTPBody:postData];

NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

[conn start]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:03:10.553

每当您发出 HTTP 请求时，YouTube API 都会**发送一个 HTTP 响应。**即使您发出完全无效的 HTTP 请求，您也会收到 HTTP 错误响应。请仔细检查您是否收到任何回复。如果你真的没有，那么我的猜测是你实际上并没有完成你的 HTTP 请求——也许由于某些网络问题，它永远不会到达 API 服务器，或者你计算不`CONTENT_LENGTH`正确（假设你是尝试手动计算）。

另外，如果您还没有，我建议您使用[GData Objective-C 客户端库。](http://code.google.com/p/gdata-objectivec-client/)

# android - Android SoundPool 如何加载 Settings.System.DEFAULT_NOTIFICATION_URI

> ID：13460413
> 
> 赞同：2
> 
> 时间：2012-11-19T19:06:58.663
> 
> 标签：android, soundpool

我正在尝试将手机默认通知声音加载到我的 SoundPool 中。

我试过了

`soundPool.load(Settings.System.DEFAULT_NOTIFICATION_URI.getPath(), 1)`

并得到

```
11-19 20:57:39.770: E/SoundPool(2948): error loading /system/notification_sound 
```

我怎样才能加载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:23:58.417

[在这个](https://stackoverflow.com/a/12050562/1092770)线程中找到了我的答案。

```
RingtoneManager.getRingtone(this, Uri.parse("content://media/internal/audio/media/122")).play(); 
```

# svg - 将 kml 多边形转换为 svg 路径

> ID：13460415
> 
> 赞同：2
> 
> 时间：2012-11-19T19:07:04.857
> 
> 标签：svg, raphael, kml

我有一个带有地标的 KML 文件，每个地标都有多边形坐标。我想根据我从 json 文件中读取的值动态更改多边形的填充颜色。我的理解是谷歌缓存了 kml 文件，所以你不能轻易地动态更改多边形的填充颜色。

所以我试图将我的 kml 多边形转换为 svg 路径，以便我可以使用 Raphael 将我的多边形放在我的谷歌地图上。然后我可以用javascript改变填充颜色。

但是如何将多边形坐标转换为 svg 路径，有人知道吗？

一组坐标样本将是：

```
 <Polygon><outerBoundaryIs><LinearRing><coordinates>-80.098181,40.42127 -80.096479,40.421262 -80.096464,40.421409 -80.096448,40.421551 -80.096444,40.421583 -80.096434,40.421666 -80.096406,40.421931 -80.096389,40.422087 -80.096353,40.422423 -80.09583,40.426101 -80.095525,40.428234 -80.095315,40.429714 -80.095276,40.429989 -80.092585,40.428593 -80.092273,40.428431 -80.09069,40.430519 -80.090384,40.430924 -80.08989,40.430618 -80.089699,40.4305 -80.089499,40.430359 -80.088738,40.429886 -80.088418,40.429688 -80.088254,40.429585 -80.087931,40.429384 -80.087086,40.428859 -80.086867,40.428722 -80.086658,40.428592 -80.086493,40.42849 -80.08617,40.428282 -80.086177,40.428265 -80.08621,40.428188 -80.0864,40.427742 -80.086397,40.42749 -80.086394,40.427125 -80.08631,40.426427 -80.086335,40.425887 -80.086235,40.425409 -80.085776,40.425327 -80.085442,40.42527 -80.084993,40.424585 -80.085076,40.42448 -80.085542,40.423842 -80.085679,40.423125 -80.085659,40.423011 -80.085626,40.422827 -80.085191,40.421758 -80.08467,40.420859 -80.084258,40.420336 -80.083828,40.4201 -80.083078,40.420005 -80.082504,40.420072 -80.081444,40.420196 -80.080888,40.420181 -80.080775,40.420178 -80.080604,40.420173 -80.080122,40.420161 -80.079753,40.420151 -80.07947,40.420144 -80.079287,40.420139 -80.078239,40.420296 -80.077661,40.420418 -80.076213,40.420726 -80.075673,40.420766 -80.075298,40.420719 -80.075127,40.420625 -80.074909,40.420307 -80.075028,40.419779 -80.07539,40.419028 -80.07583,40.41836 -80.076065,40.418108 -80.076528,40.417616 -80.077217,40.417124 -80.077503,40.417002 -80.077725,40.416907 -80.078391,40.416622 -80.078614,40.416528 -80.078657,40.41651 -80.078693,40.416491 -80.078755,40.416457 -80.079174,40.416233 -80.079205,40.416217 -80.079292,40.416128 -80.079439,40.415977 -80.079456,40.41596 -80.079614,40.415473 -80.079604,40.415377 -80.079584,40.415179 -80.07958,40.415168 -80.079539,40.415042 -80.079499,40.414915 -80.079407,40.414785 -80.079742,40.414965 -80.08086,40.415568 -80.081458,40.415889 -80.081535,40.41593 -80.082292,40.416343 -80.08238,40.416392 -80.082597,40.41651 -80.082624,40.416525 -80.082787,40.416614 -80.083508,40.417007 -80.083934,40.417239 -80.084422,40.417505 -80.084622,40.417432 -80.084852,40.417348 -80.085329,40.417179 -80.085419,40.417141 -80.085948,40.41695 -80.086252,40.417184 -80.088463,40.418885 -80.088964,40.418631 -80.089036,40.418595 -80.089145,40.418539 -80.089173,40.418525 -80.089346,40.418438 -80.089376,40.418457 -80.089398,40.418471 -80.089964,40.418827 -80.090299,40.419055 -80.091306,40.419739 -80.091642,40.419967 -80.091803,40.420088 -80.091966,40.420043 -80.092445,40.419915 -80.092561,40.419885 -80.096792,40.418748 -80.098853,40.41815 -80.098868,40.418242 -80.09943,40.421273 -80.098181,40.42127</coordinates></LinearRing></outerBoundaryIs></Polygon> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T20:55:33.207

免责声明：我对大地测量学有点生疏，但认为您的第一个问题是坐标系 - lat、lng 是依赖于投影的数据点，而您的屏幕是平面像素。您需要做的是首先将这些转换为北点和东点。

有一个名为**proj.4**的投影转换库- 使用它来转换您的坐标。如果需要，它有一个 javascript 端口，您可以在[https://trac.osgeo.org/proj/轻松适应您的使用](https://trac.osgeo.org/proj/)

通用转换过程如下所示（LAT、LNG 是实际坐标。）

```
var source = new Proj4js.Proj('WGS84');
var dest = new Proj4js.Proj('GOOGLE');
var p = new Proj4js.Point( LATITUDE, LONGITUDE ); // replace with actual coords!
var pdest = Proj4js.transform(source, dest, p); 
```

此时，pdest.x 和 pdest.y 将包含您的 SVG 兼容坐标。

将坐标转换为像素单位后，只需绘制它们 - 并注意范围和单位。北距和东距坐标将在 800,000 范围内，因此您可能会应用一些变换，例如平移和缩放。

最终结果应该是这样的（生锈了，我可能搞砸了并翻转了 lat/lng 等）

这是一个带有转换和绘图的工作**jsfiddle ：http:** [//jsfiddle.net/LPzKV/1/](http://jsfiddle.net/LPzKV/1/)

![最终结果](../Images/0c994551cc9ebd90f004ad3f546cfc5f.png)

# c# - 无法在 Datatemplate 中设置 CommandBinding

> ID：13460421
> 
> 赞同：2
> 
> 时间：2012-11-19T19:07:32.673
> 
> 标签：c#, .net, wpf, routed-commands

以下是两个 xaml 片段，其中唯一的区别是一个示例直接填充窗口的可视化树，`DataContext`而另一个示例通过应用数据模板构造相同的窗口。

## 可视化树内容/DataContext

```
<Window>
    <Window.DataContext>
        <local:MyType />
    </Window.DataContext>

    <DockPanel>
        <DockPanel.CommandBindings>
            <CommandBinding Command="ApplicationCommands.New"
                            CanExecute="OnCanExecuteNew"
                            Executed="OnExecuteNew"
                            />
        </DockPanel.CommandBindings>
        <ToolBarTray DockPanel.Dock="Top">
            <ToolBar>
                <Button Command="ApplicationCommands.New"
                        Content="New"
                        />
            </ToolBar>
        </ToolBarTray>
        <ContentPresenter Content="{Binding SomeProperty}" />
    </DockPanel>
</Window> 
```

## 业务对象内容和数据模板

```
<Window>
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:MyType}">
            <DockPanel>
                <DockPanel.CommandBindings>
                    <CommandBinding Command="ApplicationCommands.New"
                                    CanExecute="OnCanExecuteNew"
                                    Executed="OnExecuteNew"
                                    />
                </DockPanel.CommandBindings>
                <ToolBarTray DockPanel.Dock="Top">
                    <ToolBar>
                        <Button Command="ApplicationCommands.New"
                                Content="New"
                                />
                    </ToolBar>
                </ToolBarTray>
                <ContentPresenter Content="{Binding SomeProperty}" />
            </DockPanel>
        </DataTemplate>
    </Window.Resources>
    <Window.Content>
        <local:MyType />
    </Window.Content>
</Window> 
```

第一个示例（可视树内容和数据上下文）按预期工作，而设计者在第二个示例中引发编译时错误：“*无法绑定到目标方法，因为它的签名或安全透明度与委托类型。* ”尽管出现设计器错误，我仍然可以在本地运行应用程序，我已验证路由命令处理程序正在执行。当尝试在其他 PC 上运行应用程序时，应用程序在启动时静默失败，在 Windows 事件日志中留下 xaml 加载错误日志条目。当我从第二个片段中删除命令绑定时，设计器错误消失了，应用程序在本地和其他 PC 上执行都没有问题。

有人可以向我解释异常的原因以及如何在模板中指定命令绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:35:00.337

我可以在设计器中重现以下错误（VS2010 SP1 目标框架 .NET4.0） ，但我可以构建应用程序，它可以在我的本地机器上运行。 我认为设计师在这里的工作方式与 WPF 运行时不同。当在设计时应用模板并且 CommandBinding 的事件处理程序得到解析时，生成的模板可视化树仍然不是窗口可视化树的一部分。这就是处理程序无法解决的原因。作为一种解决方法，我会考虑以下选项。 1）将CommandBindings放在窗口中 `System.Windows.Markup.XamlParseException: Failed to create a 'CanExecute' from the text 'OnCanExecuteNew'
System.ArgumentException: Error binding to target method.`

```
<Window.CommandBindings>
    <CommandBinding Command="ApplicationCommands.New"
                    CanExecute="OnCanExecuteNew"
                    Executed="OnExecuteNew"/>
</Window.CommandBindings> 
```

2) 在 UserControl 中包装数据模板的内容，并将事件处理程序放在它的代码隐藏中。

用户控件.xaml

```
<UserControl x:Class="WpfApplication1.UserControl1">
    <DockPanel>
        <DockPanel.CommandBindings>
            <CommandBinding Command="ApplicationCommands.New"
                            CanExecute="OnCanExecuteNew"
                            Executed="OnExecuteNew"/>
        </DockPanel.CommandBindings>
        <ToolBarTray DockPanel.Dock="Top">
            <ToolBar>
                <Button Command="ApplicationCommands.New" Content="New"/>
            </ToolBar>
        </ToolBarTray>
        <ContentPresenter Content="{Binding SomeProperty}" />
    </DockPanel>
</UserControl> 
```

窗口.xaml

```
<DataTemplate DataType="{x:Type local:MyType}">
    <local:UserControl1/>
</DataTemplate> 
```

3) 根本不要使用 CommandBindings 并将您的命令对象放在视图模型 (MVVM) 中。

```
<Button Command="{Binding NewCommand}" Content="New"/> 
```

作为一般规则，我建议避免数据模板和代码后面的紧密耦合。数据模板应该是您获取并放入资源字典的内容。

# python - 在 django 中获取用户配置文件

> ID：13460426
> 
> 赞同：19
> 
> 时间：2012-11-19T19:07:54.793
> 
> 标签：python, django, django-views

你好，我是 python 和 django 的新手，我需要一个获取当前用户配置文件的视图，我知道我应该使用来自 User 的 get_profile，但我不知道如何使用它。我阅读了 django 文档，但对我没有帮助。这是我从文档中找到的：

```
from django.contrib.auth.models import User
profile=request.user.get_profile() 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-19T19:34:10.867

Django 的文档说明了一切，特别是[Storing additional information about users](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)部分。首先，您需要在`models.py`字段中的某处定义一个模型，以获取用户的其他信息：

**模型.py**

```
from django.contrib.auth.models import User

class UserProfile(models.Model):
    # This field is required.
    user = models.OneToOneField(User)

    # Other fields here
    accepted_eula = models.BooleanField()
    favorite_animal = models.CharField(max_length=20, default="Dragons.") 
```

然后，您需要通过在您的内部设置来表明此模型 ( `UserProfile`) 是用户配置文件：`AUTH_PROFILE_MODULE``settings.py`

**设置.py**

```
...
AUTH_PROFILE_MODULE = 'accounts.UserProfile'
... 
```

您需要替换`accounts`为您的应用程序的名称。最后，您希望在每次`User`创建实例时通过注册`post_save`处理程序来创建配置文件，这样每次创建用户时 Django 也会创建他的配置文件：

**模型.py**

```
from django.contrib.auth.models import User

class UserProfile(models.Model):
    # This field is required.
    user = models.OneToOneField(User)

    # Other fields here
    accepted_eula = models.BooleanField()
    favorite_animal = models.CharField(max_length=20, default="Dragons.")

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

### 访问配置文件

要在您的视图中访问当前用户的个人资料，只需使用`User`请求提供的实例，并在其上调用[get_profile](https://docs.djangoproject.com/en/1.5/ref/contrib/auth/#django.contrib.auth.models.User.get_profile)：

```
def your_view(request):
    profile = request.user.get_profile()
    ...
    # Your code 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T20:13:46.057

基本上 django 用户模型将只提供对字段的访问（名字、姓氏、电子邮件、密码、is_staff、is_active、last_login）。

但是，如果我们想在这个模型中添加任何额外的字段，比如我们需要为每个用户添加一个名为 dateofbirth 的新列，那么我们需要在 User 模型中添加一个名为 DOB 的列。但这是不可能的，因为我们无法编辑 django 用户模型。

为了实现这一点

1.我们可以有一个单独的新表，其中包含email id & DOB 列，这样User 模型中的列与新表中的列映射。但这将为每个数据库请求创建一个新的数据库实例。说如果你想找到客户的出生日期，

*   首先，我们需要从 User 表中获取客户映射 id 的值。
*   使用上述值，从新表中获取 DOB。

在第二种方法中，

不要使用 django 用户模型，而是使用您自己的自定义模型以及所需的所有字段。但是，如果任何与安全相关的更新或对 django 用户模型进行了一些增强，我们就不能直接使用它。我们需要在最后做更多的代码更改（无论我们在哪里使用我们的自定义模型。）这对于开发人员识别代码和进行更改来说会有点痛苦。

为了克服上述问题，django 引入了 django profile，它非常简单且更灵活。优点是

*   无需大量修改代码即可应用对用户模型的更新/增强
*   无需创建新的数据库实例来获取额外的值。
*   由于该字段具有 onetoone 映射，从一个表中删除数据也会删除其他表。
*   更安全，因为我们使用 django 模型（没有 sql 注入）

如何使用这个：

在 settings.py 创建一个变量 AUTH_PROFILE_MODULE = **"appname.profiletable"**

*   在 models.py 中，创建一个包含所需字段的新表，并确保 User 模型中的 id 与新表单映射。
*   创建一个信号，每当将新条目添加到用户模型中时，该信号就会在新表中插入一行。
*   可以使用 User 对象本身访问新表中的值。

比如说，我们创建了一个新的表 extrauser，它有 DOB，emailid。要查找客户的 DOB，请使用

```
a=User.objects.get(email='x@x.xom')
a.get_profile().DOB will give the dateofbirth value from extrauser table. 
```

希望以上细节能让您清楚地了解 django 配置文件。如果有任何进一步的帮助，请告诉我。我在我的项目中使用了 django 配置文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-25T04:17:50.993

*老问题，但我认为今天看到它的任何人都可以从中受益：*

Django 1.5 增加了——轻松地——扩展用户模型的能力。这可能更可取，因为您现在只需要处理一个对象而不是两个！似乎更现代的方式。

[https://hurricanelabs.com/blog/django-user-models/](https://web.archive.org/web/20131213030824/https://hurricanelabs.com/blog/django-user-models/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T19:29:59.947

您需要通过设置`AUTH_PROFILE_MODULE = 'accounts.UserProfile'`（例如）指定哪个类是您的“个人资料”

[https://docs.djangoproject.com/en/1.4/topics/auth/](https://docs.djangoproject.com/en/1.4/topics/auth/)

# python - Scipy / Numpy Reimann 总和高度

> ID：13460428
> 
> 赞同：0
> 
> 时间：2012-11-19T19:08:04.687
> 
> 标签：python, numpy, scipy

我正在研究一个可视化模型，该模型在平面上模拟对象的轨迹。目前，我提供的算法使用简单的轨迹函数（其中提供速度和重力）和龙格-库塔积分来检查曲线上的 n 个点是否有速度变为 0 的点。我们不考虑任何大气相互作用。

我想做的是引入非平面表面，例如来自数字地形模型（栅格）。我的想法是计算每个像素的 Reimann 和，并确定与平面的偏移是否等于或小于底层地形与平面的偏移。

是否可以使用 numpy 或 scipy 计算 Reimann 矩形的高度？相反，矩形的面积（中点很好）会起作用，因为我知道宽度 nd 可以计算高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:30:46.380

要计算 Reimann 和，您可以查看 numpy.cumsum()。我不确定你是否可以用这种方法做一个表面或只做一个数组。但是，您始终可以遍历地形的所有行，并将每一行存储在一个二维数组中。为您留下所有地形高度的数组。

# django - django 在单独的 html 和文本文件中使用全局变量

> ID：13460429
> 
> 赞同：0
> 
> 时间：2012-11-19T19:08:09.473
> 
> 标签：django

我用过[邮递员](https://bitbucket.org/psam/django-postman/wiki/Home)，一切正常。它使用`.txt`包含邮件正文的文件。多个应用程序使用此文件。我希望他们每个人在这个文件中都有一个包含地址的变量。我的意思是这个文件有这样一行：

```
U can see the message from this address:{{address}} 
```

我想有不同的地址。我试图发送这个变量`views.py`：

```
return render_to_response('PersonHub/index.html',{'address':'azhans.net'},context_instance=RequestContext(request)) 
```

但它没有用。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:13:07.353

您可以定义自定义上下文处理器以在 RequestContext 中包含额外的变量，这些变量将在所有要使用的模板中可用。

**my_context_processor.py**

```
def my_func(request):
    return {'address': 'azhans.net'} 
```

并在您的`settings.py`文件中将其添加到您的`TEMPLATE_CONTEXT_PROCESSORS`

**设置.py**

```
TEMPLATE_CONTEXT_PROCESSORS = (
    #some previous context processor
    ....
    'your_app_folder.my_context_processor.my_func'
) 
```

# ios - 未找到构建“Cordova/CDVViewController.h”文件上的 PhoneGap Xcode 缺少头文件

> ID：13460432
> 
> 赞同：1
> 
> 时间：2012-11-19T19:08:37.113
> 
> 标签：ios, xcode, cordova

我正在使用 PhoneGap 2.2.0 和 XCode 4.5.2。

我可以在模拟器中测试我的程序，也可以将它们放在我的设备上进行测试。

但我根本无法为分发而构建。它总是失败并出现以下错误：

my-projevt-path/Classes/AppDelegate.h:30:9: 'Cordova/CDVViewController.h' 文件未找到

我已经在网上看到了这个问题，但仍然无法让它工作，因为已经发布了任何解决方案。

我已经更改了构建设置中的内容，我已经重新安装了 PhoneGap，我已经在终端中运行了新行，我已经完成了我的应用程序从头开始一个新的 PhoneGap 项目，我已经检查了 Xcode 中构建位置中的首选项...我根本想不通。

请问，有人可以帮忙吗？我已经为此工作了好几天。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:46:12.330

Xcode 中的问题

如果您遇到与缺少标头相关的编译问题，则构建产品应构建到相同的构建目录中。您可能需要将首选项“Xcode Preferences -> Locations -> Derived Data -> Advanced...”设置为“Unique”。这是全新安装时 Xcode 的默认设置，如果您从旧版本的 Xcode 升级，您可能有一个需要更新的旧偏好。

找到答案了！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:41:53.700

是的，我遇到了同样的问题，是的，一些帮助可能会很棒.....即使使用 ./update_cordova_subproject 路径，我也遵循了所有说明，但它也不起作用。我也解决了锁定问题，但我找不到解决这个问题的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:48:38.100

就我而言，答案似乎与正在发送的错误消息无关。缺少头文件？那似乎不是问题。或者，至少，不是问题的直接原因。

这是我的配置/证书不正确的问题。我已经多次重新创建它们，但它仍然是一个问题。

我将作业发送给另一个开发人员，他在他的机器上打开它，撤销我的证书并创建新证书，然后在没有更改任何其他内容的情况下构建它。他将证书、配置和工作档案转发给了我。我在 xCode 中打开存档并对其进行验证并上传。这很好。

如果您遇到此问题，请确保您的证书/配置设置正确。我以为是我的，但显然不是？“Apple 流程”肯定很奇怪，当证书/配置文件搞砸时，就会出现问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-24T07:27:59.620

我遇到了同样的问题，刚刚解决了！第一个问题很可能是因为您的分发配置文件......但是当您在顶层查看 xCode 中的项目导航器时，您有您的项目，并且在里面您有**CordovaLib.xcodeproj**单击此文件，您将请参阅 iOS 部署目标。确保在那里选择了正确的 IOS 版本。这是 1/2。

2）然后您需要复制 Release 配置并将其重命名为**Distribution**。在选择 CordovaLib.xcodeproj 时进行构建，然后构建实际项目。这对我来说很顺利。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-14T13:43:23.660

将此行添加到您的`Build Settings -> Header Search Paths`：

```
$(OBJROOT)/UninstalledProducts/$(PLATFORM_NAME)/include 
```

不要替换看起来相似的现有行，它仍然需要向后兼容 Xcode 7 和 Xcode 6.4。

# python - 使用 wget 下载 CSV

> ID：13460434
> 
> 赞同：0
> 
> 时间：2012-11-19T19:08:42.913
> 
> 标签：python, shell, wget

从下面的页面单击我同意后，我需要下载 csv 文件 -

[http://www.gasbb.com.au/](http://www.gasbb.com.au/)

点击区域 SA 点击我同意

页面左侧的链接 Forecast Pipeline Flows Capacity Outlook

你能告诉我这是否可以使用 wget 完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:01:26.773

是的。您需要做的就是使用浏览器的开发者控制台（或萤火虫）找出资源的公共 url 在哪里。

在这种情况下，我已经为您找到了。所以：-

```
wget http://www.gasbb.com.au/Data/Public/E_AUST/int923_v1_forecast_pipeline_flow_r_1~20121122000650.csv 
```

参考我的 chrome 的开发者控制台：-

![在此处输入图像描述](../Images/ee32a85a2669ff199211c269e9289ebb.png)

# http - 如何找到数据丢失的原因？

> ID：13460442
> 
> 赞同：0
> 
> 时间：2012-11-19T19:09:27.153
> 
> 标签：http, networking, web, memcached

我正在开发一个使用两个配置为集群的 memcache 服务器的应用程序。我目前正处于测试应用程序的阶段，为此有时我会手动关闭 MEmcache 的一个实例。

有时我们的网络会启动/关闭，有时它有时不会收到数据，我很困惑数据丢失是由于网络问题/还是导致 memcace 实例关闭。

供您参考，我正在使用 xmemcached 1.3.8、ketamamemcachesessionlocator 和 repcached 2.3 进行复制

客户端中的故障模式关闭。

所以我很确定根本不会有数据丢失（如果我错了，请纠正我）

我的问题是，有没有什么情况可以让我知道这种损失是由于什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:13:05.263

它是内存缓存。丢失数据就是它的作用。您永远不应该指望它用于任何类型的持久存储。

# java - Primefaces 日历仅适用于弹出按钮

> ID：13460449
> 
> 赞同：1
> 
> 时间：2012-11-19T19:09:54.133
> 
> 标签：java, jsp, jsf, primefaces

我遇到的问题是主要面孔日历输入字段。在你那一刻，我使用弹出按钮可以正常工作。因此，您单击按钮会出现日历，以便您选择日期。然而，我正在处理的页面所需的影响是当输入字段具有焦点时会出现日历。

在[Primesfaces 日历展示](http://www.primefaces.org/showcase-labs/ui/calendarBasic.jsf)中，我正在寻找的功能显示在标有“弹出”的示例中。

从网站上的示例中，我可能天真地假设，从按钮更改为焦点激活日历所需要做的就是删除 showOn="button" 属性。

前：

```
 <p:calendar id="fldDateOfBirth"
                    value="#{pc_CreatePatient.patient.dateOfBirth}"
                    binding="#{pc_CreatePatient.dobComp}" navigator="true"
                    display="inline" pattern="dd/mm/yyyy" yearRange="-100"
                    title="#{msg.user_date_format_default_tip}" showOn="button" /> 
```

后：

```
 <p:calendar id="fldDateOfBirth"
                    value="#{pc_CreatePatient.patient.dateOfBirth}"
                    binding="#{pc_CreatePatient.dobComp}" navigator="true"
                    display="inline" pattern="dd/mm/yyyy" yearRange="-100"
                    title="#{msg.user_date_format_default_tip}"/> 
```

进行更改后，portlet 根本不会呈现，并且日志包含以下错误信息：

```
[11/19/12 18:47:30:942 GMT] 00000043 RpmMaintainUs E RpmExceptionHandler handle Throwable=>class java.lang.IllegalArgumentException<==>component identifier must not be a zero-length Stringnent identifier must not be a zero-length Stringcomponent identifier must not be a zero-length String 
```

提前感谢您对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:16:26.307

你应该使用它，它会工作得很好：

```
 <p:calendar id="fldDateOfBirth"
 value="#{pc_CreatePatient.patient.dateOfBirth}"
 title="#{msg.user_date_format_default_tip}"/> 
```

所选日期将显示在您的弹出行中。如果您想在其他地方使用选定的日期：

```
<h:outputText value="Popup Date:" />  
            <h:outputText value="#{pc_CreatePatient.patient.dateOfBirth}" id="popupDate">  
                <f:convertDateTime pattern="d/M/yyyy"/>  
            </h:outputText> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:00:46.667

我发现我的问题的解决方案是在没有按钮的情况下标记日历输入字段，您需要删除许多属性。我最初认为您只需要删除 'showOn="button"' 但我还必须删除 'display="inline"' 才能使其工作。最终标记如下：

```
 <p:calendar id="fldDateOfBirth"
                    value="#{pc_CreatePatient.patient.dateOfBirth}"
                    binding="#{pc_CreatePatient.dobComp}" navigator="true"
                    pattern="dd/mm/yyyy" yearRange="-100"
                    title="#{msg.user_date_format_default_tip}"/> 
```

我意识到这可能是一个新手问题，但我不得不说我没有发现 primefaces 网站在实际实施它的一些玩具方面很有帮助。如果有人对 primefaces 库有任何好的网站或教程，请添加到评论中。

# c# - 将元文件或位图放入所需的图片框中

> ID：13460450
> 
> 赞同：2
> 
> 时间：2012-11-19T19:09:56.240
> 
> 标签：c#, bitmap, visual-studio-2012, metafile

好吧，我有两个图片框。第一个用于元文件图像，第二个用于位图图像。当按下按钮后图片在剪贴板中时，我需要检查图片的格式并将其放入适当的图片框中。我做了下一步，但由于某种原因它不起作用。请帮帮我。

```
 if (iData.GetDataPresent(DataFormats.MetafilePict)== true )
            try
            {
                if (ClipboardFunctions.OpenClipboard(this.Handle))
                {
                    if (ClipboardFunctions.IsClipboardFormatAvailable(CF_ENHMETAFILE) != 0) //CF_ENHMETAFILE=14
                    {
                        IntPtr intptr = ClipboardFunctions.GetClipboardData(CF_ENHMETAFILE);
                        pictureBox2.SizeMode = PictureBoxSizeMode.Zoom;
                        pictureBox2.Image = new System.Drawing.Imaging.Metafile(intptr, true);

                    }
                }
            }
        finally { ClipboardFunctions.CloseClipboard();  }
        else if (iData.GetDataPresent(DataFormats.Bitmap) == true)
            pictureBox1.Image = Clipboard.GetImage(); 
```

# mysql - 如何将表中的行中的变量获取到列表中？（示例）（数据透视表？）

> ID：13460453
> 
> 赞同：1
> 
> 时间：2012-11-19T19:10:04.907
> 
> 标签：mysql, sql, pivot

我很难用语言解释我的问题。所以这就是为什么我的表格示例：

假设我想要一个结果表，例如：

```
user_id |data_a |data_b
1       |hello  |world 
```

我需要以这种形式将其从表“数据集”中提取出来

```
data_id |user_id|data_type  |data_data
1       |1      |data_a     |hello
2       |1      |data_c     |xxx
3       |2      |data_a     |xxx
4       |1      |data_b     |world 
```

我做某事喜欢

```
SELECT user_id , data_a, data_b
FROM dataset
WHERE ( data_type = data_a OR data_type = data_b )
AND user_id = 1

AND a = ( SELECT data_data WHERE data_type = data_a )
AND b = ( SELECT data_data WHERE data_type = data_b ) 
```

但是它不起作用。我知道我做错了，但我不知道该怎么做以及如何调用它。我认为是一个 privot 表，但我不确定这就是为什么描述如此模糊，我希望有人能理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:15:20.587

这基本上是一个`PIVOT`但 MySQL 没有`PIVOT`函数，因此您可以使用聚合函数和`CASE`语句来复制它。所以你的 SQL 将是这样的：

```
select user_id,
  max(case when data_type = 'data_a' then data_data end) data_a,
  max(case when data_type = 'data_b' then data_data end) data_b
from dataset
group by user_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/cc616/1)

结果：

```
| USER_ID | DATA_A | DATA_B |
-----------------------------
|       1 |  hello |  world |
|       2 |    xxx | (null) | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:26:53.557

您可以使用 UNION 附加两个结果：

```
SELECT user_id, 'data_a', data_a FROM t1 
UNION 
SELECT user_id, 'data_b', data_b FROM t1; 
```

结果

```
+---------+--------+--------+
| user_id | data_a | data_a |
+---------+--------+--------+
|       1 | data_a | hello  |
|       1 | data_b | world  |
+---------+--------+--------+ 
```

通过 user_id 订购：

```
SELECT * 
FROM  
    (
     (select user_id, 'data_a' as data_type, data_a as data_data from t1) 
     UNION 
     (select user_id, 'data_b' as data_type, data_b as data_data from t1)
    ) as data 
ORDER by user_id; 
```

结果为

```
 +---------+-----------+-----------+
 | user_id | data_type | data_data |
 +---------+-----------+-----------+
 |       1 | data_a    | hello     |
 |       1 | data_b    | world     |
 |       2 | data_a    | bye       |
 |       2 | data_b    | people    |
 +---------+-----------+-----------+ 
```

# sql - SQL时间比较

> ID：13460455
> 
> 赞同：2
> 
> 时间：2012-11-19T19:10:10.090
> 
> 标签：sql, time, compare

我试图显示在当前时间之后具有小时值（24H 格式）的行。目前我正在使用：

```
where time(hour)>time(now()) 
```

但是当当前时间为例如 23:50 并且存储值为 00:10 时，此比较失败。

有什么办法可以正确地复制它吗？

这是查询的一部分，以显示公交车站上最近的公交车发车时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:14:46.150

好吧，你可以试试：

```
where time(hour)>time(now()) or time(hour) = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:17:15.830

我认为最好先检查它是否在将来，然后检查差异。据我了解，这将更适合您的使用：

```
WHERE time > NOW() and TIMESTAMPDIFF(MINUTE,time,NOW()) < 60 
```

# python - 如何使用 Python 测试网页是否在线

> ID：13460459
> 
> 赞同：1
> 
> 时间：2012-11-19T19:10:24.020
> 
> 标签：python

> **可能重复：**
> [给定一个大的 url 列表，有什么方法可以检查哪些是活动的/非活动的？](https://stackoverflow.com/questions/13424753/given-a-big-list-of-urls-what-is-a-way-to-check-which-are-active-inactive)

我最近想到了一个非常简单的实用程序脚本，它可以使用两个参数来测试网站是否在线：开始测试的 url 和详细程度（在不发出警报的情况下可以接受多少丢包）。我想用 Python 2.7.3 编写代码并使其尽可能简单。

这是我的伪代码。

```
def urlCheck(url, verbosity):
    badcount = 0
    iteration = 0
    while iteration < 10:
                #ping code here
                if website is down:
                       badcount += 1
                iteration += 1
    if badcount > verbosity:
                print "Phooey. It appears your server is down."
    if badcount <= verbosity:
                print "Whew! Your server appears to be running smoothly." 
```

我的问题是，我应该在注释行中放置什么代码？(#ping 代码在这里)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:27:56.233

如果您坚持使用标准库，`urllib2`将使用 HEAD 请求完成工作：

```
import urllib2

class HeadRequest(urllib2.Request):
    def get_method(self):
        return "HEAD"

def url_is_reachable(url):
    response = urllib2.urlopen(HeadRequest(url))
    return response.getcode() == 200 
```

第三方[请求库](http://docs.python-requests.org/)让它变得更好 - 不需要做那个丑陋的方法覆盖：

```
import requests

def url_is_reachable(url):
    requests.head(url).status_code == requests.codes.ok 
```

# c# - XDocument 到 XElement

> ID：13460461
> 
> 赞同：19
> 
> 时间：2012-11-19T19:10:28.407
> 
> 标签：c#, xml, linq-to-xml, xelement

如何将 XDocument 转换为 XElement？

我通过搜索找到了以下内容，但它是用于在 XDocument 和 XmlDocument 之间转换，而不是在 XDocument 和 XElement 之间转换。

```
public static XElement ToXElement(this XmlElement xmlelement)
{
    return XElement.Load(xmlelement.CreateNavigator().ReadSubtree());
}

public static XmlDocument ToXmlDocument(this XDocument xdoc)
{
    var xmldoc = new XmlDocument();
    xmldoc.Load(xdoc.CreateReader());
    return xmldoc;
} 
```

我找不到任何东西可以将 XDocument 转换为 XElement。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-19T20:07:11.393

其他人已经说过，但这里有一个将 XDocument 转换为 XElement 的示例：

```
 XDocument doc = XDocument.Load(...);
 return doc.Root; 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-19T19:36:03.140

XDocument 到 XmlDocument：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(xdoc.CreateReader()); 
```

XmlDocument 到 XDocument

```
XDocument xDoc = XDocument.Load(new XmlNodeReader(xmlDoc)); 
```

要从您使用的 XDocument 中获取根元素`xDoc.Root`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-23T14:58:30.260

从 XDocument 到 XElement 的简单转换

```
XElement cvtXDocumentToXElement(XDocument xDoc)
{
    XElement xmlOut = XElement.Parse(xDoc.ToString());
    return xmlOut;
} 
```

# android - Android：ListFragment：如何刷新列表

> ID：13460462
> 
> 赞同：9
> 
> 时间：2012-11-19T19:10:27.680
> 
> 标签：android, android-listfragment

我有一个显示在片段上的列表视图。我在屏幕底部有一个按钮，按下该按钮时，将调用 Web 服务来获取任何其他数据。如果有其他数据，我需要将其添加到列表视图中。我已经搜索了这个论坛和许多其他网站，试图找到如何做到这一点，但我没有成功。任何帮助深表感谢。

我现在在想我是否需要动态添加片段，而不是在以下 XML 布局中定义它。

我正在使用 ListFragment 来扩展屏幕上的列表视图。

我有一个屏幕，上面有两个片段。屏幕的 XML 如下： -

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <fragment
            android:name="atos.mobilereporting.com.ReportList"
            android:layout_width="323dp"
            android:layout_height="match_parent" />

        <fragment
            android:name="atos.mobilereporting.com.ReportDetail"
            android:layout_width="958dp"
            android:layout_height="match_parent" />
    </LinearLayout>

    <Button
        android:id="@+id/getReports"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Refresh Mobile Reports" />

</LinearLayout> 
```

膨胀视图的代码如下： -

```
 public class ReportList extends ListFragment {

      public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            // Get list of reports...
            repList = ReportDefinitionFactory.buildReportList(3);

            activity = getActivity();

            ListAdapter la = new ArrayAdapter<String>(getActivity(),
                    android.R.layout.simple_list_item_1,
                    ReportDefinitionFactory.getReportDescriptions(repList));

            setListAdapter(la);

        }

    } 
```

这段代码显示了一个简单的列表视图，上面有 3 行。

正是在这一点上，我必须停下来，因为我不知道从这里出发。我的代码将向用于最初构建列表视图的数组添加额外的行，但我不知道如何在列表视图上调用刷新。

谢谢

马丁

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-19T19:17:51.930

数据更改后，您需要调用`la.notifyDataSetChanged()`强制刷新列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:18:00.503

使用 ArrayAdapter`notifyDataSetChanged()`函数。

如果这是更新数据的位置，则可以将其添加到 ArrayAdapter 中。否则，将其添加到调用`la.add()`.

# python - 如何一次获得多个帧？

> ID：13460463
> 
> 赞同：1
> 
> 时间：2012-11-19T19:10:27.997
> 
> 标签：python, opencv, mpi

我正在用 Python 编写一个程序，该程序会抓取给定输入视频中的所有帧并对每一帧进行一些处理。我在一组机器上运行这个程序，并希望通过让每个进程负责使用 MPI 处理单个帧来并行化这个程序。

我正在使用 cv2 读取输入视频的帧。cv2 提供了一个函数[grab](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-grab)来一次获取一个输入视频的帧。我可以使用另一个函数来一次获取所有帧列表吗？我想对这些帧执行分散操作以将它们分散到各个进程，然后在最后使用聚集来组合所有现在处理的帧。一次抓取每一帧似乎是在序列化整个程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:34:46.260

我正在考虑两种可能的情况：

1) 与每帧的实际处理相比，抓取每一帧是一项相当轻松的操作。在这种情况下，“序列化”抓取部分并不是真正的问题。

或者

2）集群中的每个主机都有责任抓取一组特定的帧。因此，您可以“分散帧号”而不是“分散帧”，而主机会完成这项工作。

# iphone - 将值传递给不同类中的方法 - Objective C

> ID：13460465
> 
> 赞同：1
> 
> 时间：2012-11-19T19:10:37.157
> 
> 标签：iphone, objective-c, methods, parameters

我有两个班级：`Drawing`和`Game`。其中`Drawing`有一个名为 的类`redraw`，如下所示：

`- (void) redraw:(int)x:(int)y {`

现在，还有许多其他方法`Drawing`不需要将值传递给它，我什至可以`Game`使用以下代码调用它们`[drawing callSomeMethod];`：

（顺便说一下，`drawing`是在 中创建的`Game.m`，像这样：`Drawing *drawing`.

我会假设在上面的方法中，从我必须做的所有事情`redraw`中调用它 write: ，但我不断收到以下错误：`Game``[drawing someMethod(val1, val2)];``No visible @interface for 'Drawing' declares the selector 'redraw:'"`

如何将 val1 和 val2（在 中定义`Game.m`）传递给 中的方法`Drawing.m`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:12:57.060

确保在 Drawing.h 中声明此方法

```
- (void) redraw:(int)x:(int)y; 
```

完成后，这将起作用：

```
Drawing *drawing = [[Drawing alloc] init];
[drawing redraw:3:5]; // where 3 and 5 are whatever x and y values you choose. 
```

# python - Apache ImportError：Django 上的 wsgi 部署中没有名为 _socket 的模块

> ID：13460469
> 
> 赞同：5
> 
> 时间：2012-11-19T19:10:46.920
> 
> 标签：python, django, mod-wsgi, apache2.2

我将 WSGI 3.3 用于 Apache 2.2 的 Python 2.7.3（32 位）。[我从http://code.google.com/p/modwsgi/downloads/detail?name=mod_wsgi-win32-ap22py27-3.3.so](http://code.google.com/p/modwsgi/downloads/detail?name=mod_wsgi-win32-ap22py27-3.3.so)下载了 wsgi并将其重命名并将其转移到 APACHE 模块。

我一直在尝试部署应用程序，但不断收到`ImportError: no module named _socket`. 我已经包含了我的 wsgi 和错误日志。

我不确定我做错了什么。我想也许我可以包含一个 PythonPath 但不确定。如果需要，我可以尝试提供更多信息。先感谢您。

阿帕奇配置：

```
LoadModule wsgi_module modules/mod_wsgi.so

<Directory C:/Users/xxxxd/Documents/cahd>
AllowOverride None
Options None
Order deny,allow
Allow from all
</Directory>

WSGIScriptAlias / C:/Users/xxxxd/Documents/cahd/cahd/django.wsgi 
```

WSGI 文件：

```
import os, sys    
sys.path.append('C:/Users/xxxxd/Documents)
sys.path.append('C:/Users/xxxxd/Documents/cahd/')
os.environ['DJANGO_SETTINGS_MODULE'] = 'cahd.settings'
import django.core.handlers.wsgi application = django.core.handlers.wsgi.WSGIHandler() 
```

错误是：

```
[Mon Nov 19 09:44:17 2012] [error] [client 127.0.0.1] Traceback (most recent call last):
[Mon Nov 19 09:44:17 2012] [error] [client 127.0.0.1] File "C:/Users/xxxxd/Documents/cahd/django.wsgi", line 10, in 
[Mon Nov 19 09:44:17 2012] [error] [client 127.0.0.1] import django.core.handlers.wsgi
[Mon Nov 19 09:44:17 2012] [error] [client 127.0.0.1] File "C:\django\Django-1.4.1\django\core\handlers\wsgi.py", line 8, in 
[Mon Nov 19 09:44:17 2012] [error] [client 127.0.0.1] from django import http
[Mon Nov 19 09:44:17 2012] [error] [client 127.0.0.1] File "C:\django\Django-1.4.1 \django\http\_init_.py", line 11, in 
[Mon Nov 19 09:44:17 2012] [error] [client 127.0.0.1] from urllib import urlencode, quote
[Mon Nov 19 09:44:17 2012] [error] [client 127.0.0.1] File "C:\Python27\Lib\urllib.py", line 26, in 
[Mon Nov 19 09:44:17 2012] [error] [client 127.0.0.1] import socket
[Mon Nov 19 09:44:17 2012] [error] [client 127.0.0.1] File "C:\Python27\Lib\socket.py", line 47, in 
[Mon Nov 19 09:44:17 2012] [error] [client 127.0.0.1] import _socket
[Mon Nov 19 09:44:17 2012] [error] [client 127.0.0.1] ImportError: No module named _socket 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-30T21:34:00.973

尽管重新安装 python 可能有效。我发现 _socket 是位于 DLLs 文件夹中的 _socket.pyd 文件，通过将其添加到 Windows 中的 pythonpath 中，我能够使我的应用程序工作。谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-02T11:22:53.073

尝试将目录“C:\Python27\DLLs”包含/添加到您的 PYTHONPATH 环境变量中。这解决了我系统上 _socket 的问题。如果您检查文件夹，那里有一些文件，包括 _socket.pyd

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T08:37:54.850

嗨，我在重新安装 Django 和 Python2.7.3 时遇到了这个问题，这困扰了我将近 2 个小时。最后我通过删除 Python 2.7.3 解决了这个问题，但安装了 Python 2.7.6。希望它也对你有用，祝你好运！

# .net - 如何正确停止单线程 Windows 服务（onStop）？

> ID：13460475
> 
> 赞同：1
> 
> 时间：2012-11-19T19:11:03.677
> 
> 标签：.net, windows-services, manualresetevent, single-threaded

我有一个用 VS 2010 / .NET 4.0 编写的 Windows 服务。

该服务遵循以下代码片段的方案：使用计时器，它每几分钟执行一些所需的行为。每隔几分钟执行一次“期望行为”的要求现在已经发展为大约需要 10 秒的工作。

我在该服务中只需要一个线程，没有理由创建多个线程，这就是为什么我将 Windows 服务称为单线程。

我担心的是，如果有人通过管理控制台停止服务，那么服务可能只是在这 10 秒的工作中偶尔执行。

我已经阅读了一些关于 SO 以及如何停止服务的内容，但有点迷失了。有时会创建 WorkerThreads，有时会创建 ManualResetEvents，但到目前为止，我还不能完全掌握 Windows 服务的最佳前进方向。

我在想我需要在 10 秒执行期间检查某种标志，然后只有在该标志没有告诉我应该停止时才继续。在 onStop 方法中，我可能需要等到处理正确完成。

理论就这么多；），但是我最好的前进方式是什么，同时考虑下面的代码片段？

谢谢大家！

```
Public Class MyService
   Public _timer As System.Timers.Timer

   Protected Overrides Sub OnStart(ByVal args() As String)
       _timer = New System.Timers.Timer()
       'more timer settings
       AddHandler _timer.Elapsed, AddressOf _timer_Tick
       _timer.Start()
   End Sub

   Protected Overrides Sub OnStop()
   ' ????????????????????????
   End Sub

   Private Sub _timer_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs)
       SyncLock Me
           try
              _timer.Stop()
           catch ex as Exception            
           finally
              _timer.Start()
           end try
       End SyncLock
   End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:30:22.723

只需锁定，以便 OnStop() 不能与 Elapsed 事件处理程序同时运行：

```
 Protected Overrides Sub OnStop()
       SyncLock Me
           _timer.Stop()
       End SyncLock
   End Sub 
```

哪个可以竞争，Elapsed 事件处理程序可能已经计划运行但尚未进入锁定。因此，请验证计时器是否仍处于启用状态：

```
 Private Sub _timer_Elapsed(ByVal sender As Object, ByVal e As EventArgs)
       SyncLock Me
           If Not _timer.Enabled Return
           '' etc.. 
```

喜欢一个专用的锁对象而不是我。并注意服务控制器愿意在放弃之前等待的 30 秒，您正在接近。

# java - 找到随机数组的最大值

> ID：13460478
> 
> 赞同：0
> 
> 时间：2012-11-19T19:11:13.550
> 
> 标签：java, arrays, debugging, loops

我一直在尝试找出如何找到随机数数组的最大值。这是我正在调试的代码：到目前为止，我得到的只是数组中的一个值，但它不是最大值。

```
public static void main(String[] args) {
        System.out.println(intOfMaxInRange(randomIntArray(10), 1,30));
    }
     public static int random(int low, int high){
        int x=(int)(Math.random()*high+low);
        return x;
    }
    public static int[] randomArray(int n){
        int[] a = new int[n];
        for (int i = 0; i<a.length; i++) {
        a[i] = randomInt (1,30);
    }
        return a;
    }
    public static int intOfMax( int[] array){
        int max=array[0];
        for(int i=1;i<array.length;i++){
            if (array[i] > max) {
        }
        }
        return max;

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T19:12:37.603

你是在正确的方式，只需添加 `max = array[i];`到`intOfMax()`方法：

```
 for(int i=1;i<array.length;i++)
 {
    if (array[i] > max)
       {
          max = array[i];
       }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:15:19.127

```
if (array[i] > max) {
    } 
```

您在这里忘记了这些行：

```
 max = array[i]; 
```

# c# - 使用 datagridviewcomboboxcolumn 的值将 datagridviewtextboxcolumn 绑定到数据库

> ID：13460479
> 
> 赞同：0
> 
> 时间：2012-11-19T19:11:18.917
> 
> 标签：c#, winforms, ado.net

我制作了一个`DataGridViewTextBoxColumn`名为“prod”的产品，其中列出了所有产品名称和 ID。

现在我正在尝试`DataGridViewTextBoxColumn`从中获取产品的价格`DataGridViewTextBoxColumn`。

```
private void Form1_Load(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(constring);
    SqlCommand cmd = new SqlCommand("select First_Name,Customer_id from customers",con);
    SqlDataAdapter Adapter = new SqlDataAdapter(cmd);
    DataSet ds = new DataSet();
    Adapter.Fill(ds,"customers");
    comboBox1.DataSource = ds.Tables["customers"];
    comboBox1.DisplayMember = "First_Name";
    comboBox1.ValueMember = "Customer_id";

    SqlConnection cons = new SqlConnection(constring);
    SqlCommand cmds = new SqlCommand("select product_id,Product_Name from Products", cons);
    SqlDataAdapter Adapters = new SqlDataAdapter(cmds);
    DataSet dss = new DataSet();
    Adapters.Fill(dss, "Products");

    //DataGridViewComboBoxColumn prod = new DataGridViewComboBoxColumn();

    prod.DataSource = dss.Tables["Products"];
    prod.DisplayMember = "Product_Name";
    prod.ValueMember = "product_id";
    dataGridView1.Columns.Add(prod);
    price_txt = new DataGridViewTextBoxColumn();
    price_txt.HeaderText = "price";
    price_txt.HeaderCell.Style.Alignment = DataGridViewContentAlignment.MiddleCenter;
    dataGridView1.Columns.Add(price_txt);
}

private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
    //SqlConnection cons = new SqlConnection(constring);
    //string cmdstring = string.Format("select Price from products where product_id='{0}'",id);
    //SqlCommand cmd = new SqlCommand(cmdstring,cons);
    //con.Open();
    SqlConnection cons = new SqlConnection(constring);
    if (e.ColumnIndex ==0)
    {
        //SqlConnection cons = new SqlConnection(constring);
        int id = Convert.ToInt32(dataGridView1.Rows[e.RowIndex].Cells[0].Value.ToString());
        string cmdstring = "select Price from Products where product_id= "+id;
        SqlCommand cmd = new SqlCommand(cmdstring, cons);
        cons.Open();
        int p = Convert.ToInt32(cmd.ExecuteScalar());
        dataGridView1.Rows[e.RowIndex].Cells[1].Value = p;
         cons.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:28:38.277

您可以为您的控件添加`CellValueChanged`事件处理程序`DataGridView`，然后执行以下操作：

```
private void dataGridView1_CellValueChanged(object sender, DataGridViewCellEventArgs e)
        {
            if(dataGridView1.Columns[ e.ColumnIndex] is DataGridViewComboBoxColumn)
                  dataGridView1.Rows[e.RowIndex].Cells[iTextBoxColumn].Value = ((DataGridViewComboBoxCell)dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex]).ValueMember;
        } 
```

# bash - 使用 find 排除子目录

> ID：13460482
> 
> 赞同：130
> 
> 时间：2012-11-19T19:11:28.677
> 
> 标签：bash, unix

我有这样的目录结构

```
data
|___
   |
   abc
    |____incoming
   def
    |____incoming
    |____processed
   123
    |___incoming
   456
    |___incoming
    |___processed 
```

Data 目录内的所有文件夹中都有一个传入的子文件夹。我想从除 def/incoming 和 456/incoming 目录之外的所有文件夹和子文件夹中获取所有文件。我尝试了以下命令

```
 find /home/feeds/data -type d \( -name 'def/incoming' -o -name '456/incoming' -o -name arkona \) -prune -o -name '*.*' -print 
```

但它没有按预期工作。

拉维

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-11-19T19:22:27.833

这有效：

```
find /home/feeds/data -type f -not -path "*def/incoming*" -not -path "*456/incoming*" 
```

**解释：**

*   `find /home/feeds/data`: 从指定路径开始递归查找
*   `-type f`: 只查找文件
*   `-not -path "*def/incoming*"`：不要`def/incoming`在其路径中包含任何内容
*   `-not -path "*456/incoming*"`：不要`456/incoming`在其路径中包含任何内容

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-08-04T07:15:53.880

只是为了记录：您可能需要更深入地挖掘，因为有很多 search'n'skip 星座（就像我不得不这样做）。结果可能`prune`是你的朋友，而`-not -path`不会做你期望的事情。

因此，这是 15 个排除目录的查找示例中的一个有价值的示例：

[http://www.theunixschool.com/2012/07/find-command-15-examples-to-exclude.html](http://www.theunixschool.com/2012/07/find-command-15-examples-to-exclude.html)

要链接到最初的问题，不包括 finally 像这样为我工作：

```
find . -regex-type posix-extended -regex ".*def/incoming.*|.*456/incoming.*" -prune -o -print 
```

然后，如果您希望找到一个文件并仍然排除路径，只需添加`| grep myFile.txt`.

它也可能取决于您的查找版本。我懂了：

```
$ find -version
GNU find version 4.2.27
Features enabled: D_TYPE O_NOFOLLOW(enabled) LEAF_OPTIMISATION SELINUX 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-19T19:16:29.110

`-name`只匹配文件名，而不是整个路径。您想`-path`改用用于修剪目录的部分，例如`def/incoming`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-17T22:12:58.963

```
find $(INP_PATH} -type f -ls |grep -v "${INP_PATH}/.*/" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-08T11:45:31.163

通过以下关于[如何在 find 中排除目录的答案。命令](https://stackoverflow.com/a/4210072/2402577)：

```
find . \( -name ".git" -o -name "node_modules" \) -prune -o -print 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-29T23:23:18.243

这就是我为排除所有`.git`目录并将其传递给`-exec`在

```
find . -not -path '*/\.*' -type f -exec grep "pattern" [] \; 
```

*   `-not -path '*/\.*'`将排除所有隐藏目录
*   `-type f`只会列出类型文件，然后您可以将其传递给`-exec`或任何您想做的事情

# c# - 如何在 C# 中为 GridEX 打开 FilterMode，但关闭编辑模式

> ID：13460486
> 
> 赞同：0
> 
> 时间：2012-11-19T19:11:50.927
> 
> 标签：c#, gridex

我需要不在我的 GridEX 中编辑行，但是，如果我关闭 EditMode，它不允许您“编辑”顶部的过滤器部分。GridEX 行没有编辑选项，只有列有，所以有什么办法可以解决这个问题吗？我是否必须将事件处理程序作为解决方法？如果是这样，有没有什么特别有效的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-13T07:36:43.393

使用 GridEX1.AllowEdit 关闭整个编辑然后为每一列打开 EditMode。这样您就无法编辑记录，但可以编辑过滤器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:31:11.960

使用 CurrentCellChanging 事件，然后将 AllowEdit 设置为 False

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-16T21:28:40.677

正如之前的用户所说，在 CurrentCellChanged 事件中：

GridEX1.AllowEdit = InheritableBoolean.False

# smartgwt - smartGWT：如何在 selectOtherItem 中添加项目

> ID：13460487
> 
> 赞同：0
> 
> 时间：2012-11-19T19:11:58.503
> 
> 标签：smartgwt

我在 SmartGWT 中创建了一个 selectOtherItem 。

我刚刚从我们简单做的 GWT 转移

```
 listBox.addItem("some Item"); 
```

并放置来自循环的值，并针对每个项目保存 id（对于来自 db 的值）

```
 for(int i =0;i <list.size; i++){
          listBox.addItem(list.getName(i), list.getId(i));
               } 
```

但我无法在 smartGWT 中做这些事情。现在我正在使用 selectOtherItem 。如果可以，请指导我如何在 smartGWT 中做同样的事情，我已经在上面展示了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:15:16.743

SmartGWT 也具有相同的功能。您可以直接将字符串添加到 a`ComboBoxItem`或`SelectItem`如下所述：

```
comboboxItem.setValueMap("s", "a", "d"); 
```

或者您也可以准备一个`LinkedHashMap`, 来指定键值对，如下所述：

```
LinkedHashMap<String, String> map = new LinkedHashMap<String, String>();
for (Obj obj : objList) {
    map.put(String.valueOf(obj.getId()), obj.getName());
}
comboboxItem.setValueMap(map); 
```

此外，您还可以填写 a`ComboBoxItem`或`SelectItem`使用 a `DataSource`。

有关详细信息，请参阅此[链接](http://www.smartclient.com/smartgwt/showcase/#styled_combobox_category)。

# java - 为什么 BoneCP 没有建立连接？

> ID：13460491
> 
> 赞同：1
> 
> 时间：2012-11-19T19:12:37.653
> 
> 标签：java, bonecp

我正在尝试使用他们网站上的测试代码来测试 BoneCP。但是，我似乎无法真正建立与在线托管服务器的连接。我的代码在下面，因为我是菜鸟，所以我可能会犯新手错误。感谢您的帮助！

```
 package org.chocolms.db;

 import java.sql.*; 
 import com.jolbox.bonecp.BoneCP;
 import com.jolbox.bonecp.BoneCPConfig;
 import com.jolbox.bonecp.BoneCPDataSource;
 import java.io.FileInputStream;
 import java.io.FileNotFoundException;
 import java.io.IOException;
 import java.io.InputStream;
 import java.util.Properties;

 public class ConnPoolTest
 {
public static void main(String[] args) throws Exception{

    BoneCP connectionPool = null;
    Connection connection = null;

    try {
        // load the database driver (make sure this is in your classpath!)
        Class.forName("com.mysql.jdbc.Driver");
    } catch (Exception e) {
    }

    try {
        // setup the connection pool

        BoneCPConfig config = new BoneCPConfig();
        config.setJdbcUrl("jdbc:mysql:mysql.lms.shawnathon.com");   //could the problem be here?
        // jdbc url specific to your database, eg jdbc:mysql://127.0.0.1/yourdb
        config.setUsername("removedforSecurity"); 
        config.setPassword("removedforSecurity");
        config.setMinConnectionsPerPartition(5);
        config.setMaxConnectionsPerPartition(10);
        config.setPartitionCount(1);

        System.out.print("code reaches here");
         connectionPool = new BoneCP(config);

          System.out.print("code doesn't reache here");     // where I'm stuck

        connection = connectionPool.getConnection(); // fetch a connection
   System.out.print("Or here");
        if (connection != null){
            System.out.println("Connection successful!");
            Statement stmt = connection.createStatement(); // do something with the connection.
            ResultSet rs = stmt.executeQuery("SELECT resource_name, BOOK.resource_id"
                                            + "FROM BOOK, RESOURCE "
                                            + "WHERE BOOK.resource_id = RESOURCE.resource_id;"); 

            while(rs.next()){
                System.out.println(rs.getString(1)); // printing everyting in column 1
            }
        }
        connectionPool.shutdown(); // shutdown connection pool.
    } catch (SQLException e) { System.out.print("cannot");
    } finally {
        if (connection != null) {
            try {
                connection.close();
            } catch (SQLException e) {
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:58:07.870

正如您在评论中所说，JDBC URL 必须具有要连接的主机和数据库。因此，您缺少要连接的数据库。所以 JDBC URL 应该是这样的：

```
config.setJdbcUrl("jdbc:mysql://mysql.lms.shawnathon.com/database"); 
```

注意：我假设数据库的主机是 mysql.lms.shawnathon.com

# jquery - 没有hoverintent插件的jQuery菜单悬停延迟

> ID：13460498
> 
> 赞同：1
> 
> 时间：2012-11-19T19:13:08.603
> 
> 标签：jquery, menu

您好我正在尝试在菜单上添加悬停延迟，但我无法使用 hoverIntent 插件

```
 $('#topMenu #menu>li').hover(function () {
     $(this).children('#subNav3').show();
     $(this).addClass('linkExtend');

},

function () {
     $(this).children('#subNav3').hide();
    $(this).removeClass('linkExtend');
}); 
```

请找[demo](http://jsfiddle.net/3f8mC/2/)

所以根据演示，如果我尝试将鼠标从菜单 2 移动到菜单 2.1

# java - Quartz，如何在另一个工作完成后开始工作？

> ID：13460502
> 
> 赞同：1
> 
> 时间：2012-11-19T19:13:25.177
> 
> 标签：java, quartz-scheduler, job-scheduling

我想在一个项目中使用石英，但它似乎缺少一些功能。我需要的很简单，在完成执行后触发另一项工作。理想情况下，这将通过存储的触发器来完成，但石英只考虑基于时间的触发器，而不考虑其他类型的触发器。我正在为石英寻找某种工作依赖系统。

实际上应该有很多触发器，例如其他作业完成，文件正在修改，数据库表正在更新等。

这是一个等待 5 秒的作业：

```
public class JobA implements Job, JobListener {

public static final String LISTENER_NAME = "JobA";

public void execute(JobExecutionContext arg0) throws JobExecutionException {

    System.out.println("Job A, Waiting for 5 seconds");
    try {
        Thread.sleep(5L * 1000L);
    } catch (InterruptedException e) {

        e.printStackTrace();
    }
    System.out.println("Done waiting");
}

public String getName() {
    return LISTENER_NAME;
}

public void jobExecutionVetoed(JobExecutionContext context) {
    //TODO
}

public void jobToBeExecuted(JobExecutionContext context) {
    String jobName = context.getJobDetail().getKey().toString();
    System.out.println("Job : " + jobName + " is going to start...");

}

public void jobWasExecuted(JobExecutionContext context,
        JobExecutionException jobException) {
    //      System.out.println("jobWasExecuted");

    String jobName = context.getJobDetail().getKey().toString();
    System.out.println("Job : " + jobName + " is finished...");

    if (!jobException.getMessage().equals("")) {
        System.out.println("Exception thrown by: " + jobName
                + " Exception: " + jobException.getMessage());
    }

    JobKey jobKey = new JobKey("JobA", "group1");
    try {
        context.getScheduler().triggerJob(jobKey);
    } catch (SchedulerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
} 
```

context.getScheduler().triggerJob(jobKey) 行根本不起作用。我试过添加完整的工作、递归工作，但似乎什么都做不了。使用此侦听器时如何获得另一份工作？

# tfs - TFS 永久合并两个文件（如何跟踪？）

> ID：13460510
> 
> 赞同：1
> 
> 时间：2012-11-19T19:13:53.937
> 
> 标签：tfs, merge

我有两个文件，`A.cs`并且`B.cs`，在同一个分支中彼此相邻。我想复制/粘贴`B.cs`到`A.cs`包含`A.cs`其原始内容以及`B.cs`.

在 TFS 中，这意味着对 的删除操作`B.cs`和对 ​​的编辑操作`A.cs`。但是，我们丢失了`B.cs`. 有没有办法告诉 TFS`B.cs`是现在`A.cs`？

这是毫无根据的合并的用例吗？

```
tf merge /baseless B.cs A.cs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:38:20.423

是的，在这种情况下，您可以挂起一个毫无根据的合并`B.cs`作为目标和`A.cs`源，然后挂起删除`B.cs`。

在这种情况下，您将`B.cs`可以在查看以下历史记录时访问历史记录`A.cs`：

![Baseless 合并 + 删除后的文件历史记录](../Images/0971f5cba37532aa196316c52f954376.png)

# facebook - 身份验证后重定向回Facebook页面选项卡？

> ID：13460514
> 
> 赞同：0
> 
> 时间：2012-11-19T19:14:09.560
> 
> 标签：facebook, drupal, drupal-7, facebook-iframe, fbjs

我在我的页面标签应用程序中使用 facebook 的 drupal，并且有一定的问题 -

身份验证后，用户将通过自定义模块重定向，代码如下 -

```
<?php
function fb_example_fb($op, $data, &$return) {
  $fb_app = isset($data['fb_app']) ? $data['fb_app'] : NULL;
  $fb = isset($data['fb']) ? $data['fb'] : NULL;
  if ($op == FB_OP_AJAX_EVENT) {

    if ($data['event_type'] == 'session_change') {
      if ($fbu = fb_facebook_user()) {
        $url = url('http://apps.facebook.com/appname',
                   array('absolute' => TRUE, 'fb_canvas' => fb_is_canvas()));
        $return[] = 'FB_JS.reload("'. $url .'");';
      }
    }
  }
}
?> 
```

当我希望用户被重定向到画布应用程序时，一切都很好。问题是，我希望用户在身份验证后被“重定向”回页面选项卡，因此我需要刷新 iframe/主要内容 div，以便用户单击“登录”按钮并进行身份验证，页面选项卡将使用自定义驱动内容进行更新。我的目标是在不让他们离开标签的情况下将其提供给用户。

当我尝试将上面代码中的 $url 路径设置为 - [https://www.facebook.com/appname/app_4557794143](https://www.facebook.com/appname/app_4557794143)（页面选项卡的路径）时，我在页面刷新后从 facebook 收到以下错误，而不是显示标签 - “

> 对不起，我们无法处理你的请求。请再试一次”

如何更改功能以便在按下连接按钮后刷新窗口？有人可以说明以正确的方式处理这个问题吗？ **非常感谢大家。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:47:23.710

最后，解决方案非常简单，有点像黑客......由于某种原因，当我尝试通过 fb.js 重定向时没有任何效果，而 facebook 一直给出同样的错误。所以，剩下要做的就是“覆盖” fb.js.redirect 并使用 -

```
 if ($fbu = fb_facebook_user()) {
    $return[] = 'top.location.href="https://www.facebook.com/exampleapp/app_707794143";';
  } 
```

对于所有未来的谷歌员工......

# java - ListView OnItemClickListener 不适用于 LazyAdapter ListView

> ID：13460516
> 
> 赞同：0
> 
> 时间：2012-11-19T19:14:22.903
> 
> 标签：java, android, listview, android-lazyadapter

我已经使用 LazyAdapter 实现了一个自定义 ListView 来显示缩略图。最后，在我让这个 LazyAdapter 工作之后， OnItemClickListener 不显示数据而只是返回空字符串。如果我删除 ListView 的自定义 LazyAdapter 类，代码工作正常。

```
 class LoadAllDirectories extends AsyncTask<String, String, String> {

        protected String doInBackground(String... args) {

            UserFunctions fn = new UserFunctions();
            String id = fn.getID(getApplicationContext());

            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("id", id));

            JSONObject json = 
            jParser.makeHttpRequest(url_all_directories, "GET", params);

            Log.d("All Directories: ", json.toString());

            try {

                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {

                    directories = json.getJSONArray(TAG_DIRECTORIES);

                    for (int i = 0; i < directories.length(); i++) {
                        JSONObject c = directories.getJSONObject(i);

                        String eid = c.getString(TAG_ID);
                        String name = c.getString(TAG_NAME);                        
                        String image = c.getString(TAG_IMG);

                        HashMap<String, String> map = 
                        new HashMap<String, String>();

                        map.put(TAG_ID, eid);
                        map.put(TAG_NAME, name);                        
                        map.put(TAG_IMG, image);

                        directoryList.add(map);
                    }

                } else {

                    Intent i = new Intent(getApplicationContext(),
                            DirectoryActivity.class);

                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        protected void onPostExecute(String file_url) {

            runOnUiThread(new Runnable() {
                public void run() {

                    ListAdapter adapter = new LazyAdapter(
                    DirectoryAllActivity.this, directoryList);                  
                    setListAdapter(adapter);
                }
            });

        }

    }

} 
```

错误日志

更新：部分重复的日志已被删除。

```
11-19 14:17:12.612: W/System.err(16343): java.net.MalformedURLException: Protocol not found: null
11-19 14:17:12.612: W/System.err(16343):    at java.net.URL.<init>(URL.java:178)
11-19 14:17:12.612: W/System.err(16343):    at java.net.URL.<init>(URL.java:127)
11-19 14:17:12.612: W/System.err(16343):    at com.app.android.library.ImageLoader.getBitmap(ImageLoader.java:70)
11-19 14:17:12.612: W/System.err(16343):    at com.app.android.library.ImageLoader.access$0(ImageLoader.java:58)
11-19 14:17:12.612: W/System.err(16343):    at com.app.android.library.ImageLoader$PhotosLoader.run(ImageLoader.java:135)
11-19 14:17:12.612: W/System.err(16343):    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
11-19 14:17:12.622: W/System.err(16343):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-19 14:17:12.622: W/System.err(16343):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-19 14:17:12.622: W/System.err(16343):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-19 14:17:12.622: W/System.err(16343):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-19 14:17:12.622: W/System.err(16343):    at java.lang.Thread.run(Thread.java:856)
11-19 14:17:12.653: D/memalloc(16343): ion: Mapped buffer base:0x5e951000 size:3768320 offset:0 fd:55 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:19:44.030

```
Caused By: java.net.MalformedURLException 
```

您需要使用真实的 URL，而不是这个：

```
private static String url_all_directories = "a_web_url"; 
```

您可以从教程建议的 URL 开始： http: [//api.androidhive.info/music/music.xml](http://api.androidhive.info/music/music.xml)

* * *

嘿！你偷偷改变了你的 LogCat。

无论如何，现在问题是一个图像 URL：

```
at com.app.android.library.ImageLoader.getBitmap(ImageLoader.java:70) 
```

检查“a_web_url”中的数据，这显然在你的服务器上......

# javascript - 将 json 转换为下划线列表

> ID：13460522
> 
> 赞同：2
> 
> 时间：2012-11-19T19:14:48.700
> 
> 标签：javascript, underscore.js

我想使用`_.where`下划线函数，但我似乎无法让它在对象数组上工作。我有以下json：

```
var Planets = [
        {name:"maths", percComp: "2", preReq: "english"},
        {name:"english", percComp: "20", preReq: "geog"},
        {name:"german", percComp: "20", preReq: "english"},
        {name:"history", percComp: "20", preReq: "german"},
        {name:"irish", percComp: "20", preReq: "geog"},
        {name:"geog", percComp: "20", preReq: ""},        
        {name:"french", percComp: "20", preReq: "spanish"},
        {name:"spanish", percComp: "57", preReq: "french"}          
    ]; 
```

然后我使用以下代码将每个代码添加到数组中：

```
$(jQuery.parseJSON(JSON.stringify(Planets))).each(function(){
        var planet = new Class.Planet(this, paper);
        universe.push(planet);            
    }); 
```

我正在尝试使用下划线从列表中获取项目，如下所示：

```
var planets = _.where(universe, {name: "maths"}); 
```

但我收到以下脚本错误：

```
Uncaught TypeError: Object function (a){return new j(a)} has no method 'where' 
```

**编辑** 你也可以使用类似的东西

```
var planets = _.filter(Planets, function(p){ return p.name === "maths"}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:21:10.160

`_.where`仅在 1.4.0 [http://underscorejs.org/#where中可用](http://underscorejs.org/#where)

你必须使用 Varon 的建议`_.find`

或者您可以简单地使用 JS [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

示例：http: [//jsfiddle.net/4mxjb/2/](http://jsfiddle.net/4mxjb/2/)

```
// returns an array with objects where their name 
// property is equal to 'maths'
Planets.filter(function(obj){
    return obj.name === 'maths'
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T19:19:44.903

使用 underscorejs 就可以得到这个星球

```
var planet = _.find(Planets, function(p) {return p.name == 'maths'}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-26T13:04:44.447

只是为了消除旧答案中的混乱：

1.  [`_.find`](http://underscorejs.org/#find)
    *   输入：*比较函数*
    *   返回第**一个**匹配元素；
2.  [`_.filter`](http://underscorejs.org/#filter)
    *   输入：*比较函数*
    *   返回**所有**匹配的元素；
3.  [`_.where`](http://underscorejs.org/#where)
    *   输入：*对象*
    *   返回**所有**匹配的元素；
4.  [`_.findWhere`](http://underscorejs.org/#findWhere)
    *   输入：*对象*
    *   返回第**一个**匹配元素。

```
var Planets = [
    {name:"maths", percComp: "2", preReq: "english"},
    {name:"english", percComp: "20", preReq: "geog"},
    {name:"german", percComp: "20", preReq: "english"},
    {name:"history", percComp: "20", preReq: "german"},
    {name:"irish", percComp: "20", preReq: "geog"},
    {name:"geog", percComp: "20", preReq: ""},        
    {name:"french", percComp: "20", preReq: "spanish"},
    {name:"spanish", percComp: "57", preReq: "french"}        
];

console.log('---FIND---\n', // Returns only ONE matching element
  _.find(Planets, function(o){ return o.preReq === 'english'; })
);
console.log('---FILTER---\n', // Returns ALL matching elements
  _.filter(Planets, function(o){ return o.preReq === 'english'; })
);
console.log('---WHERE---\n', // Returns ALL matching elements
  _.where(Planets, {preReq: 'english'})
);
console.log('---FINDWHERE---\n', // Returns only ONE matching element
  _.findWhere(Planets, {preReq: 'english'})
);
```

```
<script
src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js">
</script>
```

# c# - 如何在 JsonConverter 中的 Json.net 中设置只读属性值

> ID：13460526
> 
> 赞同：4
> 
> 时间：2012-11-19T19:15:01.573
> 
> 标签：c#, serialization, json.net

我正在使用 Json.net 4.5。我正在使用 JsonConverter 将数据从一个版本转换为另一个版本。

版本 1

```
 public class AV1
    {
        public string PNr { get; set; } // "x253yN-69Uj"
    } 
```

版本 2

```
 public class AV2
    {
        public string FirstNr { get; private set; } // "x253yN"
        public string LastNr { get; private set; } // "69Uj"

        public void SetFirstAndLastNr(string a, string b, string c)
        {
            //Logic to set the values of FirstNr and LastNr
        }
    } 
```

在派生的 JsonConverter 中，我正在创建`AV2`类的实例。但是由于属性现在是只读属性，我应该如何设置这些属性的值？Json.net 是否提供任何方法来做同样的事情？还是我必须使用反射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-19T08:31:25.770

如果你想反序列化只读属性，也许试试这个

```
public class AV2
{
    [JsonProperty]
    private readonly string _firstNr;
    [JsonProperty]
    private readonly string _lastNr;
    public string FirstNr => _firstNr// "x253yN"
    public string LastNr => _lastNr// "69Uj"

} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-06-28T01:52:39.320

正如您所说，您有数百个不同的类需要转换，`JsonDeserializer`可能不是最佳选择。

看看**AutoMapper**等其他解决方案不是一个坏主意：[http](http://automapper.org/) ://automapper.org/、https : [//github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)

如果您花一两个小时查看示例代码，您会发现将不同的对象相互转换（映射）是如此强大和灵活。

# .net - 连接到 AsyncPostBackTrigger

> ID：13460527
> 
> 赞同：1
> 
> 时间：2012-11-19T19:15:05.103
> 
> 标签：.net, vb.net

如何将“asp:buttonfield”连接到更新面板 AsyncPostBackTrigger？

我知道这似乎是一个简单的问题，但 AsyncPostBackTrigger 需要 ControlID 并且“asp:buttonfield”没有“ID”属性。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:45:07.683

您无需将 ButtonField 设置为触发器。您可以使用 Button 设置 TemplateField 并为 Button 设置 onCommand。之后，请将 GridView 设置为触发器。

请检查此线程：[http ://forums.asp.net/t/1322657.aspx](http://forums.asp.net/t/1322657.aspx)

# ecmascript-6 - for...of 如何在其他语言中使用，使其与 ECMAScript-6 相关？

> ID：13460531
> 
> 赞同：0
> 
> 时间：2012-11-19T19:15:12.277
> 
> 标签：ecmascript-6, methodology, syntactic-sugar, convenience-methods, for-of-loop

我注意到[for...of](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...of)循环被添加到 ECMAScript-6 提案中，但直到现在才听说过它们。他们的典型用例是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:11:11.373

用例是当您想对数组的每个元素执行某些操作时。 `for...in`在 ECMAScript 中会有点让你检查数组*索引*（甚至是不正确的）。

ES6 的 Python 等价物`for...of`是`for...in`，如下所示：

```
myList = [ "a", "b", 5]
for el in myList:
  # el takes on the values "a", "b", 5 in that order
  pass 
```

# iphone - 标签文本混淆

> ID：13460535
> 
> 赞同：1
> 
> 时间：2012-11-19T19:15:17.160
> 
> 标签：iphone, ios, xcode

下面显示的 tableView 包含`label`. 它们被添加`subView`为每个单元格。

当我第一次运行我的程序时，屏幕上出现的单元格具有正确的文本。但是当我滚动表格时，标签中的文本开始混淆。据我了解，创建单元格时，一个单元格的标签会覆盖在另一个单元格的顶部。这已在后两个屏幕截图中显示。每次滚动后，不同的单元格会重叠在一起。（所以没有固定的模式。）我试图通过观察哪个单元格从屏幕上出来以及哪个单元格正在进入来理解这个问题。我试图将此信息与单元格上的标签相关联，但我无法理解。

我请求您帮助我了解造成这种差异的原因。

谢谢！

![在此处输入图像描述](../Images/19cdfcbd92e2eefa63c5a906d3416315.png)

我的代码的相关部分如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    NSLog(@"s = %d, r = %d", indexPath.section, indexPath.row);

    if (indexPath.section == 0)
    {
        switch(indexPath.row)
        {
            case 0:
            [cell addSubview:classA];
            break;

            case 1:
            [cell addSubview:classB];
            break;

        case 2:
            [cell addSubview:classC];
            break;

        case 3:
            [cell addSubview:classD];
            break;

        case 4:
            [cell addSubview:classE];
            break;

        default:
            break;
    }
}

if(indexPath.section == 1)
{
    switch(indexPath.row)
    {
        case 0:
            [cell addSubview:classF];
            break;

        case 1:
            [cell addSubview:classG];
            break;

        case 2:
            [cell addSubview:classH];
            break;

        default:
            break;
    }
}

if(indexPath.section == 2)
{
    switch (indexPath.row)
    {
        case 0:
            [cell addSubview:classI];
            break;

        case 1:
            [cell addSubview:classJ];
            break;

        case 2:
            [cell addSubview:classK];
            break;

        default:
            break;
    }
}

return cell;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:32:56.583

*重复使用*表格视图单元格：如果向上或向下滚动，`dequeueReusableCellWithIdentifier`可能会返回一个以前用于不同（现在不可见）行的单元格。

在这种情况下，单元格已经包含您的一个子视图，并且您添加了一个额外的子视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:33:27.107

原因是，您正在使用`dequeueReusableCellWithIdentifier`重复使用单元格。因此，当您滚动时，超出可见区域的单元格将被重新用于当前可见单元格。

由于您已经`classB`在这些单元格中添加了诸如 etc.. 之类的标签并且之后没有删除，之后当您`classI`在相同的重复使用的单元格中添加诸如 etc.. 之类的标签时，它会被绘制在此标签的顶部。由于这些标签的背景颜色设置为透明色，因此它也会显示在其后面绘制的标签，从而给人一种重叠的感觉。

根据屏幕截图，所有单元格看起来都相同，您绝对可以使用`dequeueReusableCellWithIdentifier`. 那么，为什么不改变在外部创建标签的逻辑，`cellForRowAtIndexPath`而只是`cell.TextLabel.text = @"Class B";`在此方法内的相应 if 条件中将其用作 etc..？

你的代码看起来像，

```
if (indexPath.section == 0)
    {
        switch(indexPath.row)
        {
            case 0:
            cell.textLabel = [self createLabelForRow:indexPath.row section:indexPath.section];
//or if it is jut a simple label, you can just set font and other properties in cell.textLabel directly
            cell.textLabel.text = @"Class A";
            break; 
```

**更新：**`dequeueReusableCellWithIdentifier`如果所有单元格都是静态的，这是一个不太好的重用修复。但这不是推荐的方法。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

  NSString *CellIdentifier = [NSString stringWithFormat:@"CellForRow%dSection%d",indexPath.row, indexPath.section];
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil)
   { 
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
   }

  //or try this

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil];
  if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:nil];
    } 
```

**Update2：**因此，如果您遇到上述问题，请尝试此操作。使用我的第一种方法并执行以下操作。

```
if (indexPath.section == 0)
    {
        switch(indexPath.row)
        {
            case 0:
            cell.textLabel = [self createLabelForRow:indexPath.row section:indexPath.section];

            // or do the following,

            [self removeAllTextFieldsFromCell:cell];
            UITextField *aTextField = [self createTextFieldForRow:indexPath.row section:indexPath.section];
            [cell.contentView addSubview:aTextField];
         } 
```

在`removeAllTextFieldsFromCell:`方法上使用 RA 的建议。

例如：-

```
- (void)removeAllTextFieldsFromCell:(UITableViewCell *)cell {

    for (UITextField *textField in cell.contentViews.subViews) {
        [textField removeFromSuperView];
    }
} 
```

或者只是使用，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    NSLog(@"s = %d, r = %d", indexPath.section, indexPath.row);

    //if it is all textfields in the cell, it will look like,
    [self removeAllTextFieldsFromCell:cell];
    UITextField *aTextField = [self createTextFieldForRow:indexPath.row section:indexPath.section];
    [cell.contentView addSubview:aTextField];

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:43:40.863

正如您在评论中所说`textfield`，那么您需要`remove the old` `textField`从您的单元格中。您可以在`if statement for indexPath.section checking`.

```
for (UITextField *textField in cell.contentViews.subViews) {
    [textField removeFromSuperView];
} 
```

# ember.js - emjer.js 视图不读取上下文

> ID：13460541
> 
> 赞同：0
> 
> 时间：2012-11-19T19:15:40.780
> 
> 标签：ember.js, ember-old-router

我有以下 js，基于 emberjs.com 路由教程。var 'wontAppear' 不会映射到相应的视图中。

```
Quiz = Em.Application.create({
ApplicationView: Ember.View.extend({
    templateName: 'App'
}),
IntroSettings : Ember.Object.extend(),
ApplicationController: Ember.Controller.extend({
    titlebar: 'My New App',
}),

IntroView: Ember.View.extend({
    templateName: 'Intro'
}),
IntroController: Em.ObjectController.extend({ house: "2" }),

CountDownView: Ember.View.extend({
    templateName: 'CountDown',
    didInsertElement: function () {
        this.$().hide().show('drop', { direction: "right" }, 200);
    },
}),
CountDownController: Em.ObjectController.extend({

}),

Router: Em.Router.extend({
    enableLogging: true,
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            connectOutlets: function (router, context) {
                router.get('applicationController').connectOutlet('body','Intro');
            },
            countDown: Ember.Route.transitionTo('countDown')
        }),
        countDown: Ember.Route.extend({
            connectOutlets: function (router, context) {
                router.get('applicationController').connectOutlet('body', 'CountDown',     { wontAppear: "5" });
            }
        })
    })
})
});

Quiz.initialize(); 
```

视图是这样设置的：

```
 <script type="text/x-handlebars"  data-template-name="App">
    <div id="quiz-container">
        <div id="headerPanel">
            <div class="title">{{titlebar}}</div>
            <div class="timerDiv"> </div>
            <div class="timerDivText"></div>
        </div>
        {{outlet body}}
    </div>
</script>
<script type="text/x-handlebars" data-template-name="Intro">
    <div id="introPanel">
        <img id="helpimg" src="images/helpimage.jpg" />
        <button id="startButton" {{action "countDown" on="click"}}>Start Game</button>
    </div>
</script>

<script  type="text/x-handlebars" data-template-name="CountDown">
    <div class="countdown">
        {{wontAppear}}
    </div>
</script> 
```

我可以让数据出现在视图中的唯一方法是将其添加到应用程序控制器。我认为倒计时视图会从它对应的 countdownController 中获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:56:43.940

我认为您（以及您在[底漆](http://emberjs.com/guides/router_primer/)中阅读的示例）在 Application 命名空间中缺少一个新添加的属性。

Ember 现在会自动启动应用程序，因此您不需要调用`App.initialize()`（`Quiz.initialize()`在您的情况下），但是，如果您愿意/需要，您可以将`autoinit`应用程序的设置为**false**，您不会有任何问题打电话`App.initialize()`。如果不设置为false并调用initialize，Ember会抛出异常说不能多次调用initialize。

另一件事，当你使用任何框架时，命名/大小写约定很重要，它与 Ember 没有什么不同，所以你`connectOutlet`应该是这样的：

```
// ... other code
// note that "countDown" starts with a lower cased "c"
router.get('applicationController')
      .connectOutlet(
          'body', /* outlet name*/
          'countDown', /* view/controller pair name in cammelCase */
          { wontAppear: "5" } /* your context object*/
      );
// ... other code 
```

你的应用仍然会抛出一个错误：

> 未捕获的类型错误：对象# 的属性“#”不是函数

但我不确定那是什么，我只是想通过调用`connectOutlet`你的`countDown`路线来解决这个特定问题。

看这个例子的**[小提琴](http://jsfiddle.net/schawaska/MwXjG/16/)**

# mysql - 如何在 drupal 7 db_select 查询中编写自定义 orderby？

> ID：13460548
> 
> 赞同：2
> 
> 时间：2012-11-19T19:16:15.940
> 
> 标签：mysql, drupal, drupal-7

`db_select`以下查询的等效查询是什么，

```
$nids = array(5, 3, 1, 4, 2);

$sql = "SELECT
          nid, title, FIELD(nid, :nids) sortkey
          FROM
            {node}
          WHERE
            nid IN (:nids)
            AND type = :type
            AND status = 1
          ORDER BY sortkey";

$result_nid = db_query($sql, array(':nids' => $nids, ':type' => 'article'))
                ->fetchAll(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:46:37.510

这是我从 drupal.org 获取的高级查询。

你应该很容易适应

```
$query = db_select('node', 'n');

$query->join('users', 'u', 'n.uid = u.uid'); //JOIN node with users

$query->groupBy('u.uid');//GROUP BY user ID

$query->fields('n',array('title','created'))//SELECT the fields from node
->fields('u',array('name'))//SELECT the fields from user
->orderBy('created', 'DESC')//ORDER BY created
->range(0,2);//LIMIT to 2 records

$result = $query->execute(); 
```

希望能帮助到你

公关

# amazon-ec2 - 如何在多个 ec2 实例上更改应用程序？

> ID：13460552
> 
> 赞同：2
> 
> 时间：2012-11-19T19:16:30.693
> 
> 标签：amazon-ec2, amazon-ebs, amazon-elb

我是 AWS 新手。谁能指出我如何更新驻留在多个 ec2 实例上的应用程序的正确方向？

我找到了这个答案： [如何更新多个负载均衡的 EC2 实例？](https://stackoverflow.com/questions/5382427/how-do-i-update-multiple-ec2-instances-that-are-load-balanced) 指向这篇文章： http: [//linuxforloves.wordpress.com/2009/04/11/sharing-amazon-elastic-block-store-among-multiple-instances/](http://linuxforlovers.wordpress.com/2009/04/11/sharing-amazon-elastic-block-store-among-multiple-instances/) 文章已更新并说明您可以从 EBS 启动- 支持的 AMI 到现在基本上可以具有无限大小。

这是否意味着我可以在 ec2 实例上加载应用程序，创建保存到 ebs 卷的 ami，然后从 EBS 支持的 ami 启动，而不是拥有可以使用我的应用程序更新的 ebs 实例？

这是否意味着我将启动配置设置为使用 ami 而不是 ami 的 ebs 音量？

本质上，我的问题是，如何更新在多个 ec2 实例上运行的应用程序，而无需登录每台机器并更改应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:33:30.650

Netflix 使用您描述的方法，每个新应用程序版本都会创建自己的 AMI，然后他们使用开源[Asgard](https://github.com/Netflix/asgard)软件进行滚动重启、终止旧实例并生成运行新 AMI 的新实例。

这是一种完全有效的工作方式，但对于我的大部分工作来说，这是矫枉过正的。AMI 的构建和管理通常比简单地将新软件放在服务器上更麻烦。我主要使用[capistrano](https://github.com/capistrano/capistrano)来自动启动代码（主要涉及执行 a `git pull`）和重新启动网络服务器，我使用[chef](https://github.com/opscode/chef)来更改服务器配置和第三方软件安装。如果涉及的系统更改足够多，我将刻录一个新的 AMI 并使用它重新启动。

所以我认为这取决于您的工作流程的哪些方面正在造成瓶颈。如果只是部署自动化，请查看 capistrano 和 chef。如果更新您的应用程序涉及很多摩擦和部署麻烦，那么 AMI 可能是一个不错的选择。无论哪种方式，我总是确保我的厨师食谱可以根据任何特定的软件版本规范构建服务器。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:45:59.560

我认为实现这一点的方法是在推出每个新软件时创建一个新的 ami。然后为每个 ami 构建一个新的启动配置。然后，您使用新的启动配置更新您的扩展组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-15T11:31:30.197

您可以使用[AWS CodeDeploy](https://aws.amazon.com/codedeploy/details/?nc1=h_ls)在多个 EC2 上更新您的应用程序。它通过逐步跨实例工作并允许应用程序保持可用并继续为流量提供服务来最大限度地减少停机时间。

您还可以跟踪部署、停止、回滚……如果您的应用程序在 EC2 上运行，它是免费的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T18:46:08.933

现在[OpsWorks](https://aws.amazon.com/opsworks/)已经发布，情况发生了一些变化。看看那个，因为它是亚马逊支持的一种做你想做的事的方式——不过可能对你的需求有点过分了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T01:50:00.840

查看[capistrano](https://github.com/capistrano/capistrano)，这是一个用 Ruby 编写的部署工具，可以准确解决您描述的问题。

虽然它是一个 Ruby 工具，但它可用于部署非 Ruby 的应用程序。

它管理同时 SSH'ing 到多个服务器，更新代码，并执行为每个服务器的角色量身定制的部署任务。

# java - 具有两个 toString 方法的自定义 JCombobox 模型

> ID：13460555
> 
> 赞同：2
> 
> 时间：2012-11-19T19:16:43.500
> 
> 标签：java, swing, jcombobox

我有一个非常相似的问题，比如这个[Java ComboBox Different Value to Name](https://stackoverflow.com/questions/10387932/java-combobox-different-value-to-name)

我已经更改了代码，所以我会得到一个`Employee`-Object（我更改了我的类名，因为上面链接中的类名是`Employee`）。

就我而言，我已经有一个`toString()`方法，我不想覆盖它。（我在其他地方需要它）

但我不想`toString()`在我的`JCombobox`. 但它会自动执行。

我不想返回任何字符串！我需要这些物品。

有没有办法在创建 JCombobox 时说“采取另一种`toString()`方法，让我们说”？`toStringDifferent()`

```
this.comboEmployees = new JComboBox(new EmployeeComboboxModel(getEmployees())); 
// this will give me the toString-method's return-value of the Employee object. 
// But i want the toStringDifferent() method's result. 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T19:29:00.937

事实上，*不*使用`toString`.

```
comboEmployees.setRenderer(new DefaultListCellRenderer() {
    @Override
    public Component getListCellRendererComponent(JList list,
                                               Object value,
                                               int index,
                                               boolean isSelected,
                                               boolean cellHasFocus) {
        Employee employee = (Employee)value;
        value = employee.toStringDifferent();
        return super.getListCellRendererComponent(list, value,
                index, isSelected, csellHasFocus);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:30:17.097

使用`ListCellRenderer`. 可以[在 Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer)中找到一个示例。

另一种方法是将对象包装在定义自己的`toString()`方法的对象中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:29:25.090

您需要创建您的 JComboBox 并实现您的 toString 方法。

例子：

```
public class        MyComboBox
    extends     JComboBox
{
  public String toString() {
    return "My toString";
    }
} 
```

# delphi - 与 RealVNC 客户端集成

> ID：13460557
> 
> 赞同：0
> 
> 时间：2012-11-19T19:16:48.063
> 
> 标签：delphi, winapi, delphi-2010

我正在做一个通过 Real VNC 客户端自动登录的项目。我有一个局域网，并且在许多电脑上用这个客户端做这样的程序很无聊。所以我决定自动化这个过程。我用我的程序（使用 CreateProcess）打开 VNC 客户端，并将用于连接的 IP 作为参数传递。我现在的意图是发送该机器的密码并模拟 [enter]，我被困在这一步。我将用下面的代码更好地解释：

```
procedure TForm1.VncAuth;
var
  StartInfo: TStartupInfo;
  ProcInfo: TProcessInformation;
  CmdLine: string;
begin
  FillChar(StartInfo,SizeOf(TStartupInfo),#0);
  FillChar(ProcInfo,SizeOf(TProcessInformation),#0);
  StartInfo.cb := SizeOf(TStartupInfo);
  CmdLine:= 'vnc.exe 192.168.1.14';
  UniqueString(CmdLine);
  CreateProcess(NIL ,PChar(CmdLine), NIL, NIL, False, CREATE_NEW_CONSOLE or NORMAL_PRIORITY_CLASS
                                  , NIL, NIL, StartInfo, ProcInfo);
  WaitForInputIdle(ProcInfo.hProcess, INFINITE);
  Timer:= TTimer.Create(Nil);
  Timer.Interval:= 5000;
  Timer.OnTimer:= DoVNCAuth;
  Timer.Enabled:= true;
end; 
```

好的，上面的程序打开vnc.exe并传递IP进行连接。所以我等了 5 秒，是时候连接到 IP 和 vnc 询问密码，5 秒后我进入程序 DoVNCAuth。就像这样：

```
procedure TForm1.DoVNCAuth(Sender: TObject);
var
  pass: string;
begin
  pass:= 'password';
  VNCChild:= FindWindowEx(0, 0, Nil, 'VNC Viewer - Authentication');
  if VNCChild > 0 then
    begin
      VNCHandle:= FindWindowEx(VNCChild, 0, 'Edit', 0);
      SendMessage(VNCHandle, WM_SETTEXT, 0, Integer(PChar(pass)));
    end;
end; 
```

此过程中，搜索要求 vnc auth 的窗口。所以我在窗口内搜索编辑并发送我的密码。问题是：这个窗口有 2 个编辑，一个用于用户（禁用）和一个用于通行证（这是我的焦点），但我只能将我的通行证写入用户的编辑。如何获得正确编辑的句柄？它们在同一个窗口中，并且来自同一个“编辑”类......下面是所发生情况的屏幕截图： ![在此处输入图像描述](../Images/e723b456288362e877f1c882e6d4a313.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:45:29.440

你让它变得比它需要的困难得多。RealVNC 已经配备了允许您无需交互即可连接的功能。您需要做的就是创建一个包含必要选项的文本文件，并在启动时将其传递给 RealVNC 查看器程序。

文本文件可能如下所示：

```
[联系]
主机=myhost.com::666
加密=永远在线
用户名=域\用户
密码=********
[选项]
……

```

您可以让 RealVNC 为您创建文件，方法是打开连接，调出 RealVNC 菜单（即使用 F8），然后选择**Save Connection**。这将保存一个 .vnc 文件，其中包含该连接的所有设置。只需在启动时将该 .vnc 文件传递​​给查看器程序就可以了。

因此，您需要做的就是：

1.  创建 .vnc 连接文件。
2.  将命令行更改为`'vnc.exe connection.vnc'`.
3.  调用后删除所有代码`CreateProcess`。
4.  调用`CloseHandle`返回的两个句柄`CreateProcess`。

对于您的需要，我建议调用`ShellExecute`可能比`CreateProcess`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T06:56:15.743

我为服务器和客户端制作了一个 UltraVnc dll（来自原始 c++ 源）。也许这可以帮助你？ [http://code.google.com/p/asmprofiler/source/browse/trunk/-Other-/UltraVnc+As+Dll/?r=294](http://code.google.com/p/asmprofiler/source/browse/trunk/-Other-/UltraVnc+As+Dll/?r=294)

# asp.net - 如何在 WebForm 中使用 C# 显示消息

> ID：13460559
> 
> 赞同：2
> 
> 时间：2012-11-19T19:17:05.610
> 
> 标签：asp.net, webforms

当我写的条件在任何人的 html 表单中不正确时，我需要使用 C# 语言在我的 aspx 页面中显示一条消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:19:38.570

绝对最简单和最肮脏的方法是：-

```
// YourCondition defined as public property of the .aspx page
<% if ( YourCondition != true ) { %>
Your conditional text.
<% } %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:22:50.007

在您的 ASPX 中：

```
<asp:Label runat="server" id="conditionalLabel" visible="false" /> 
```

在您的代码隐藏中：

```
private void Page_Load()
{
    if(!conditionToCheck)
    {
        conditionalLabel.Visible = true;
        conditionalLabel.Text = "This is my label text";
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T19:39:12.327

Andrew 的解决方案更优雅，但如果你觉得 hackish，还有一种更简单的方法。缺点是这种方法缺乏对消息放置位置的控制。它将显示在检查时已经缓冲/发出的任何 html 之间：

```
private void Page_Load()
{
    if(!conditionToCheck)
    {
        Response.Write("You messed up!");
    }
} 
```

# jenkins - 您如何或可以控制矩阵项目结果的视觉方向

> ID：13460562
> 
> 赞同：1
> 
> 时间：2012-11-19T19:17:13.937
> 
> 标签：jenkins

我创建了一个矩阵项目来控制代码测试，它有 3 个轴代表 1）一组测试，2）机器架构，以及 3）另一个配置参数。该项目做我想做的事，即将每个测试分派到正确的节点并使用 config 参数运行测试脚本。我想要控制结果矩阵的显示方式。

当我创建项目时，我似乎可以根据每个轴的定义顺序来控制视觉呈现。但是，一旦我重新启动 Jenkins，结果矩阵就会显示为一个狭长的矩阵（最少的列，很多行）。

我希望将结果矩阵显示为更宽的矩阵（更多列，更少行）。

有没有办法控制詹金斯如何显示轴？

# css - CSS3 媒体查询在 Safari 中不起作用

> ID：13460566
> 
> 赞同：5
> 
> 时间：2012-11-19T19:17:18.467
> 
> 标签：css, safari, media-queries

我在这里有一个测试站点：69.16.224.73

媒体查询在 IE9+、Firefox、Chrome 和 Opera 上运行良好。但它们不适用于 Safari（5.1.7 版）。以前没见过，有人有想法吗？

这是我在我的网站上的两个媒体查询：

```
@media only screen and (min-width: 600px) { }

@media only screen and (min-width: 900px) { } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T08:41:40.960

你下面有这个吗

```
<meta name="viewport" content="width=device-width" /> 
```

你可以把它放在你头的结束标签之前

# c# - 添加存储过程后 edmx 文件损坏

> ID：13460568
> 
> 赞同：0
> 
> 时间：2012-11-19T19:17:29.537
> 
> 标签：c#, asp.net-mvc, visual-studio-2010

处理现有的 ASP MVC 3 应用程序。该应用程序有一个 edmx 文件，其中包含大约 30 个表（实体）和 4 或 5 个视图。我在 SQL Server Management Studio 中创建了一个存储过程，将存储过程添加到现有 edmx 文件后，edmx 文件损坏。

我的意思是腐败，其中一个视图的所有列都重复了，所以现在看起来像：

PersonId FirstName LastName personid firstname lastname

这会导致发生几个“未映射”错误。

此外，该应用程序的行为就像大约一半的模型不存在一样。例如，有一个现有的视图模型引用了 12 个不同的模型，我得到“名称空间或类型不存在，您是否缺少引用？” 等等。

我试图从旧版本恢复 edmx 文件，甚至重建。从旧的恢复没有帮助，但重建工作，直到我再次添加了 stred proc。

我的存储过程可能有问题吗？其他想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:21:44.887

我曾经遇到过同样的问题，所以我所做的是我删除了视图，然后通过再次添加视图来更新 edmx（右键单击画布并更新）

# android - Android 4.2 无法连续建立蓝牙 RFCOMM 连接

> ID：13460569
> 
> 赞同：10
> 
> 时间：2012-11-19T19:17:38.413
> 
> 标签：android, bluetooth, rfcomm

我有一个应用程序，它通过蓝牙通过 RFCOMM 与自定义设备通信。通信代码基于BluetoothTalk示例工程。它之前在 Galaxy S3、Galaxy S2、Galaxy Note 和 Nexus 7 上都可以正常运行。

最近，Nexus 7 升级到 Android 4.2 之后，问题出现如下：

1.  首次使用app建立连接时，即设备刚开机，app刚启动，没问题，可以正常获取数据。

2.  然后，如果您停止通信并尝试重新启动，则通信失败并出现错误“java.io.IOException: bt socket closed, read return: -1”。从那时起，无论您尝试重新连接多少次，它总是会失败。

3.  让它再次工作的唯一方法是，如果您重新启动自定义设备和应用程序，然后尝试连接，通信就会正常。但是，一旦您停止并重新启动通信，它就会继续失败。

我借了一台装有 Android 4.2 的 Nexus 4，但问题仍然存在。

这真的很烦人，因为我们设备的主要价值是依赖于蓝牙 RFCOMM 应用程序。我仔细检查了 Android 4.2 中关于 BT 的文档，没有发现任何重大变化。我对自己的代码相当有信心，因为它适用于任何不运行 4.2 的 Android 设备

任何提示或建议将不胜感激。该设备需要在 12 月初进行演示，我们真的很想尽快解决这个问题。

编辑：现在 4.2.1 已经发布，但问题仍未解决。我们至少可以确认它是否正在工作并且很快就会修复吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T00:39:00.393

这对您没有多大帮助，但请注意，Google 在 4.2 中引入了一个全新的蓝牙堆栈。

这应该是一件好事——根据我作为用户和开发人员的经验，带有 Bluez（旧组合）的 Android 从未可靠地运行，所以我很高兴听到他们进行了全面重写。

我想我只能说，听起来您在新堆栈中遇到了错误或怪癖。很遗憾听到新堆栈也存在问题。

关于您的演示，请注意 Google 发布了他们所有 Nexus 设备 (https://developers.google.com/android/nexus/images) 的固件映像，并且将它们刷新到您的设备相当容易。

所以我建议你提交一个错误报告，然后将你的设备刷到 4.1.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T11:42:33.343

它也发生在我的测试中。我是 BluetoothChat 示例代码，您应该查看 connectionLost 方法。我不记得是否有任何变量可以保持丢失的连接数，但您可以自己添加。在 connectionLost 方法中，测试丢失的连接数是否小于预定义的数量（在我的情况下为 3）。如果是这样，请使用 mHandler（吐司）向 UI 发送一条消息，然后再次调用 connect(device)。如果不是这样（您失去连接超过 3 次），请调用 stop() 方法。

还要确保像这样在 ConnectThread 中打开套接字：

```
 public ConnectThread(BluetoothDevice device, boolean isSecure) {
        mmDevice = device;
        BluetoothSocket tmp = null;
        mSocketType = isSecure ? "Secure" : "Insecure";
        // Get a BluetoothSocket for a connection with the given BluetoothDevice
        if (isSecure) {
            // reflection is better to use
            Method m = null;
            try {
                Log.d(TAG, "create reflection");
                m = device.getClass().getMethod("createRfcommSocket",new Class[] { int.class });
                } catch (NoSuchMethodException e1) {
                e1.printStackTrace();
            }
            try {
                tmp = (BluetoothSocket) m.invoke(device, 1);
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                e.printStackTrace();
            }
            mmSocketFallBack = tmp;
        } else {
            Log.d(TAG, "create insecure");
            try {
                tmp = device
                        .createInsecureRfcommSocketToServiceRecord(MY_UUID);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        mmSocket = mmSocketFallBack;
    } 
```

您的 connectionLost 应该类似于：

```
public void connectionLost() {
    init = false;
    Log.d(TAG, "connectionLost -> " + mConnectionLostCount);
    mConnectionLostCount++;
  if (mConnectionLostCount < 3) {
    // Send a reconnect message back to the Activity
        Message msg = mHandler.obtainMessage(cBluetooth.MESSAGE_TOAST);
        Bundle bundle = new Bundle();
        bundle.putString(WebAppInterface.TOAST, "Connection lost. Reconnecting...");
        msg.setData(bundle);
        mHandler.sendMessage(msg);
        connect(mSavedDevice,true);     
    } else {
    mConnectionLostCount = 0;
    Message msg = mHandler.obtainMessage(cBluetooth.MESSAGE_TOAST);
    Bundle bundle = new Bundle();
    bundle.putString(WebAppInterface.TOAST,"Device connection was lost!");
    msg.setData(bundle);
    mHandler.sendMessage(msg);
    cBluetooth.this.stop();
    }
} 
```

我希望你能适应你的情况。您也可以查看此链接，它们对我帮助很大：

1.  [遥控器示例](https://github.com/luugiathuy/Remote-Bluetooth-Android/blob/master/RemoteBluetooth/src/com/luugiathuy/apps/remotebluetooth/BluetoothCommandService.java)
2.  [连接死机解决方案](https://stackoverflow.com/questions/2660968/how-to-prevent-android-bluetooth-rfcomm-connection-from-dying-immediately-after)
3.  [从中获得灵感的蓝牙服务示例](https://github.com/cxemnet/CxemCar1/blob/master/src/com/cxem_car/cBluetooth.java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-12T02:35:36.290

我有一个类似的问题，并花了一些时间调试这个问题。我正在运行 Android 4.3，发现 BluetoothChat 示例代码所需的唯一基本修改是设置：

```
MY_UUID_SECURE = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"); 
```

我正在尝试连接到 HC-05 蓝牙模块，我相信它使用此 UUID 指示的 SPP 配置文件。您可以使用这行代码查询设备的 UUID：

```
UUID uuid = device.getUuids()[0].getUuid(); 
```

根据您连接的设备类型，验证 UUID 并查看它是否与有意义的配置文件匹配。

```
MY_UUID_SECURE = uuid; 
```

UUID 可能指示不同类型的设备配置文件，具体取决于您连接的内容。使用正确的 UUID，我仍然能够运行 AcceptThread 代码并作为 BluetoothServerSocket 侦听，没有任何问题。我希望这会有所帮助，但是，我对 Android 和蓝牙开发相对较新，所以如果我的假设是错误的，请纠正我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T12:56:45.380

遇到过类似的问题。通过使用 17 作为构建目标的 4.2 SDK 构建修复了其中的一些问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T16:17:42.590

我终于找到了解决方案。

事实证明，这不是新蓝牙驱动程序中的错误。这是蓝牙示例应用程序中未考虑的极端情况，更具体地说，是由 Android SDK 提供的 BluetoothChat 项目。

在 BluetoothChat 示例项目中的蓝牙服务代码中，当连接失败或丢失时，它总是重新启动服务以重新启动监听模式。手机作为服务器是没有问题的，但是在某些情况下手机作为客户端，一旦进入监听模式，就无法连接到其他服务器。因为在“连接”函数中，它不会取消 (In)SecureAcceptThread。所以本质上你正在作为服务器监听其他连接，同时尝试作为客户端连接到其他服务器。这是矛盾的。

解决此问题的方法是，如果您确定您的手机不会被用作监听传入连接的服务器，则只需删除代码以在连接失败或停止后重新启动监听模式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-03T09:08:15.840

我的 Nexus 4 遇到了同样的问题。

就我而言，我认为问题在于 SDP 服务发现协议。设备和服务器必须为某个服务使用相同的 UUID。

我在我的应用程序中使用 SPP（串行端口协议）。因此，我将 BluetoothChat 示例代码中的 UUID 从“fa87c0d0-afac-11de-8a39-0800200c9a66”更改为 SPP“00001101-0000-1000-8000-00805F9B34FB”。现在好了。

我在 BluetoothChatService.start() 中禁用了 acceptThread 的监听代码。现在更简洁了。希望它会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-21T22:23:08.523

我在 4.2.2 上也有同样的经历。

但是我发现蓝牙堆栈只有在我的应用程序下降或在没有正确清理资源（套接字和/或流）的情况下被杀死后才开始出现异常。在此之前，当我正确关闭我的应用程序时，它可以正常工作。

例如，当我关闭套接字然后终止应用程序时，我可以启动它并再次正常连接。如果我在之前没有关闭套接字的情况下杀死了我的应用程序，那该死的，我必须重新启动设备才能使其再次工作。

因此，似乎新的 Android 蓝牙堆栈在隐式清理机制中存在一些错误。当应用程序崩溃时，Android 应该清理没有发生的打开的蓝牙资源。

我的蓝牙管理代码在 Application 子类中。没有办法 - 或者我看不到 - 如何挂钩应用程序销毁并进行清理。

任何建议表示赞赏

**编辑：**

我做了一个相当混乱的解决方法。

我创建了包含单个远程服务的单独应用程序。我将所有通信代码（套接字和流的打开、读取、写入、关闭）移到了这个远程服务中。然后，如果主应用程序崩溃或被杀死，该服务仍在运行。当我再次启动应用程序时，连接仍然正常。从蓝牙输入流中读取的字节通过标准服务消息传递到主应用程序。就我而言，这没问题，因为我传输的数据量非常少。

当包含该服务的应用程序被杀死时，仍然会发生同样的混乱。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-06T05:59:18.183

我面临同样的问题。这对我有用：

```
try {
    Thread.sleep(1000); 
}
catch(Exception e3)
{
    Toast.makeText(getApplicationContext(), "wa ni sud sa thread sleep!", Toast.LENGTH_SHORT).show();
}
btSocket.close(); 
```

# jquery - 使用 jquery 检查元素是否具有类并单独处理链接的元素子项

> ID：13460571
> 
> 赞同：0
> 
> 时间：2012-11-19T19:17:42.250
> 
> 标签：jquery

抱歉这个令人困惑的问题，但这就是我想要做的。我有一个包含多个（ul）项目的页面。我正在使用 jquery 来操作 (ul) 和 (li) 的类。我想要做的是将每个（ul）视为一个个体，而不是一个整体。例如我的：

```
<ul class="bNav">
  <li><a href="#">Home</a></li>
  <li><a href="#">The Artists</a></li>
  <li><a href="#">The Art</a></li>
</ul>

<ul class="bNav opp">
  <li><a href="#">Home</a></li>
  <li><a href="#">The Artists</a></li>
  <li><a href="#">The Art</a></li>
</ul> 
```

我试图用我的 jquery 做的是，如果存在“opp”类，则向其添加特定代码。如果它不在那里，那么做其他事情。我遇到的问题是，当我进行 if 检查时，如果该类存在，它将把所有（ul）都视为拥有该类。这是我的代码：

```
if ($('.bNav').is('.opp')) {
    $('.bNav').addClass('nav').wrap('<nav class="navbar navbar-inverse"><div class="navbar-inner">');
} else {
    $('.bNav').addClass('nav').wrap('<nav class="navbar"><div class="navbar-inner">');
}

$('.bNav > li > ul').addClass('dropdown-menu').parent('li').addClass('dropdown').find('a:first').attr('data-toggle', 'dropdown').addClass('dropdown-toggle').append('<span class="caret"></span>');  
$('.bNav ul ul').addClass('dropdown-menu').parent('li').addClass('dropdown-submenu'); 
```

同样，代码将所有 (ul) 视为一个。所以如果类“opp”出现在任何（ul）中，那么它会触发所有（ul）的“opp”类的if语句。我如何让它发挥作用，以便每个人（ul）都被这样对待？提前感谢您的帮助！

达米安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:24:46.663

来自文档：
***.is()*** *根据选择器、元素或 jQuery 对象检查当前匹配的元素集，如果这些元素中至少有一个与给定参数匹配，则返回 true。*

尝试：

```
$('.bNav.opp').addClass('nav').wrap('<nav class="navbar navbar-inverse"><div class="navbar-inner">');
$('.bNav').not('.opp').addClass('nav').wrap('<nav class="navbar"><div class="navbar-inner">'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:24:53.353

使用`.each`循环（并尝试`.hasClass()`）：

```
$('.bNav').each(function(i,el) {
    if ($(this).hasClass('opp')) { 
```

[http://api.jquery.com/each](http://api.jquery.com/each)

[http://api.jquery.com/hasClass](http://api.jquery.com/hasClass)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:26:29.993

试试这个：

```
$('.bNav')
    .addClass('nav')
.filter('.opp')
    .wrap('<nav class="navbar navbar-inverse"><div class="navbar-inner">')
.end().not('.opp')
    .wrap('<nav class="navbar"><div class="navbar-inner">')
; 
```

# php - 自定义验证器在 zend 中不起作用

> ID：13460573
> 
> 赞同：1
> 
> 时间：2012-11-19T19:17:53.377
> 
> 标签：php, validation, zend-framework, date, zend-form

所以我编写了一个名为 Date 的自定义日期验证器，当我尝试使用它时，zend 回退到 zend_validate_date 调用：

```
 $datePosted = new Zend_Form_Element_Text('datePosted');
    $datePosted->setLabel('Date Job Was Posted?: ')
            ->setRequired(true)
            ->addFilter('stripTags')
            ->addFilter('stringTrim')
            ->addPrefixPath('Hg2_Validate_Date', 'Hg2/Validate/', 'validate')
            ->addValidators(array(
                array(
                    'validator' => 'NotEmpty',
                    'breackChainOnFailure' => true
                ),
                array(
                    'validator' => 'stringLength',
                    'options' => array(0, 10)
                ),
                array(
                    'validator' => 'Date'
                ),
                array(
                    'validator' => 'alnum',
                    'options' => array('allowWhiteSpaces' => true)
                )
            ));

    return $datePosted; 
```

这就是我所拥有的，它应该使用我的日期而不是 zends 日期吗？

可以通过 addPrefixPath() 看到自定义验证，我将自定义验证器添加到此元素。我的理解是，现在如果我在“验证器”中调用 Date 或 date bellow，它将调用我的 date 而不是 zends？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:36:05.330

作为前缀，您不必添加`_Date`到路径中。如果您查看文档

```
addPrefixPath($prefix, $path, $type = null)
adds a prefix/path association to the loader specified by $type. 
```

`Hg2_Validate_Date_Date`使用您当前的前缀参数，这可能会扩展到它不会找到的名为的类。

所以这应该适合你

```
->addPrefixPath('Hg2_Validate', 'Hg2/Validate/', 'validate') 
```

# php - 使用高级自定义字段 (Wordpress) 在 Flexslider 中为每个列表项显示 3 个图像

> ID：13460580
> 
> 赞同：0
> 
> 时间：2012-11-19T19:18:33.810
> 
> 标签：php, jquery, wordpress, twitter-bootstrap, flexslider

我正在使用 Bootstrap 框架中的 Advanced Custom Fields 插件和 Flexslider 构建一个 Wordpress 幻灯片。我的目标是在一个列表项中显示 3 个帖子的内容，以便 flexslider 将 3 个图像显示为一张幻灯片。我现在拥有的代码在一张幻灯片中显示 3 张图像，但它是相同的图像重复 3 次。我很接近，但我无法完全弄清楚。

这是我的代码：

```
<?php while(the_flexible_field("slideshow")): ?>
        <?php if(get_row_layout() == "new_slide"): ?>
            <li>
            <?php while(get_row_layout() == "new_slide"): $count++;?>
                    <?php $image = wp_get_attachment_image_src(get_sub_field('slide_image'), 'large'); ?>
                    <img src="<?php echo $image[0]; ?>" alt="<?php  the_sub_field('slide_heading');?>" class="rotate"/>
                    <?php if($count==3) break; ?>
            <?php endwhile; ?>
            </li> 
            <li><a href="<?php echo the_sub_field('slide_link');?>"><img src="<?php echo $image[0]; ?>" alt="<?php  the_sub_field('slide_heading');?>" class="rotate"/></a>
                <div class="container homeslide">
                    <div class="row">
                        <div class="span4">
                            <div class="flex-caption"><h4><?php echo the_sub_field('slide_heading');?></h4><?php echo the_sub_field('slide_description');?></div>
                        </div>
                    </div>
                </div>
            </li>  
        <?php endif; ?>
    <?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:12:29.680

你每次都得到相同的索引（`$image[0];`）它应该是`$image[$count]`。每个帖子附件都存储在另一个索引中。因此，如果您继续要求索引 0，您将继续获得相同的图像。

# javascript - android web 按钮加载更多

> ID：13460581
> 
> 赞同：0
> 
> 时间：2012-11-19T19:18:35.617
> 
> 标签：javascript, android, parsing

我有一个应用程序，它解析来自网站的数据。该网站没有任何 API。在页面末尾有一个按钮“加载更多”。这是这个按钮的代码：

```
<a href="#" id="js-index_load_more_posts" class="b-load_more_posts_button" onclick="moreHandler.loadPosts(this, {'load_more' : true}); return false;">Load more</a> 
```

如何从我的应用程序中调用此按钮以加载更多数据以稍后从页面解析它？

为了理解这一点，我应该阅读哪些内容。也许是谷歌搜索的一些关键字，因为我什么都没找到。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:25:34.137

您需要解析出 javaScript 的作用，特别是`moreHandler.loadPosts`. 最简单的方法是在 Chrome 中打开该站点并使用 JavaScript 控制台查看发出了哪些 url 请求以提取附加信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:25:36.313

如果使用`WebView`控件加载内容，可以在`JavaScript`其中执行以下代码：

```
moreHandler.loadPosts(this, {'load_more' : true}); return false; 
```

通过做这样的事情：

```
webView.loadUrl("javascript:moreHandler.loadPosts(this, {'load_more' : true}); return false;"); 
```

确保`JavaScript`在您的`WebView`控件中启用：

```
webView.getSettings().setJavaScriptEnabled(true); 
```

# java - 如何检查 JPassword 字段是否为空

> ID：13460582
> 
> 赞同：2
> 
> 时间：2012-11-19T19:18:40.860
> 
> 标签：java, swing, jpasswordfield

我想在 Swing 中检查用户名和密码。

该检查适用于用户名，但不适用于 JPaswordfield。我正在发布相关代码：

```
//Here I get the password
Char[] pwd = jt1.getPassword(); 
String s = new String(pwd);  //converting char to string
String p = s;

//In the JButton checking username and password(Username check works fine but not passwordfield)

jb.addActionListener(new ActionListener() {
                         public void actionPerformed(ActionEvent e)
                           {
                            if ((jt.getText().length()) == 0)
                            {
                                   JFrame jf1 = new JFrame("UserName");
                                         jf1.setSize(401, 401);
                                         //jf1.setVisible(true);
                                         jf1.setDefaultCloseOperation(jf1.EXIT_ON_CLOSE);
                                         JOptionPane.showMessageDialog(jf1, "User Name is empty");
                            }

                         else if((p.length()) == 0)
                            {

                                   JFrame jf1 = new JFrame("Password");
                                         jf1.setSize(401, 401);
                                         //jf1.setVisible(true);
                                         jf1.setDefaultCloseOperation(jf1.EXIT_ON_CLOSE);
                                         JOptionPane.showMessageDialog(jf1, "Password is empty");
                            }

                         else if ((p.length() == 0) && (jt.getText().length()) == 0)
                            {
                                   JFrame jf1 = new JFrame("UserName and Password");
                                         jf1.setSize(401, 401);
                                         //jf1.setVisible(true);
                                         jf1.setDefaultCloseOperation(jf1.EXIT_ON_CLOSE);
                                         JOptionPane.showMessageDialog(jf1, "Username and Password is 
empty");
                            }

                            else
                            { //go to another method}
Can someone help 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T19:53:47.707

非常简单的获取文本，使用[`JPasswordField#getPassword()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPasswordField.html#getPassword%28%29)它返回`char[]`文本的 a，然后简单地获取数组的长度并检查它是否等于 0：

```
JPasswordField jpf...

if(jpf.getPassword().length == 0) {
    // it is empty
}else {
   // it is not empty
} 
```

# php - 正确使用 facebook 访问令牌？

> ID：13460586
> 
> 赞同：1
> 
> 时间：2012-11-19T19:19:03.270
> 
> 标签：php, facebook, facebook-graph-api

在我解释问题之前的一些背景。我正在做一个项目，其中：

1) 用户 "Sam" 通过 facebook 登录
2) 创建一个事件
3) 从 facebook 上传一个相册到这个事件
4) 邀请他的朋友 "foo","bar" 和 "temp" 来查看这个相册
5) 朋友可以接受邀请并查看这些相册

到目前为止，一切都很好。但以下也是用例的一部分：

6) 用户“foo”也可以将他的 Facebook 相册上传到活动中。“bar”和“temp”也可以。

第 6 点）是问题出现的地方。想象一下“foo”将专辑添加到事件的情况。**"foo" 也不是 "bar" 和 "temp" 的朋友**。除非“foo”添加的相册不是公开的，否则“bar”和“temp”无法使用访问令牌查看此相册。所以这就是我的提议，我希望 stackoverflow 的专家评论这是否是正确的方法。

**解决方案 1**
当用户将相册上传到我们应用中的活动时，将该相册的所有照片 url 保存到我们的数据库中。这样，该活动的所有用户都可以看到每个人的照片

**解决方案 2**
将用户“foo”的长期访问令牌保存到 db。当用户“bar”尝试查看此相册时，使用用户“foo”的访问令牌来获取照片。

我不确定这两种解决方案，因为我担心我可能会违反 Facebook 的隐私政策。我可以在用户“foo”使用此应用程序之前询问“您的照片将被此活动邀请的每个人查看”并且只有当他接受时，我们才会执行上述任一解决方案。够了吗？我不想被起诉:)

很抱歉这个问题很长，但我认为有必要解释整个用例。

# javascript - 压缩字典

> ID：13460587
> 
> 赞同：1
> 
> 时间：2012-11-19T19:19:06.553
> 
> 标签：javascript, pusher

我正在使用[Pusher](http://www.pusher.com)将 JSON 文件发送到我的 web 应用程序。我的问题是 pusher 可以推送的大小限制为 10Kb，而我的 JSON 大约为 14-20Kb（精确到 1816 字节）。所以它返回错误 413。

我可以压缩这个 dict / JSON 并在我的应用程序中用 javascript 解压缩它吗？我怎样才能做到这一点？我环顾四周，但找不到任何我能理解（我是初学者）或使用的东西。

我用 pusher 发送的 dict 样本。[http://pastebin.com/x2jkhqmr](http://pastebin.com/x2jkhqmr)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:56:54.157

我没有尝试压缩您的数据，而是将其分解并以每个小于 10K 的多个部分发送。
压缩有一个限制，而您可以根据需要发送尽可能多的数据块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:50:06.943

# c# - 为格式化方法提供正确的参数

> ID：13460593
> 
> 赞同：1
> 
> 时间：2012-11-19T19:19:35.483
> 
> 标签：c#, visual-studio-2012, code-analysis

我的代码中有以下方法

```
public override string ToString()
{
    return string.Format(
        CultureInfo.InvariantCulture, "{{0}} Text = \"{1}\"", Matrix, Text);
} 
```

`Matrix`是一个结构并且`Text`是一个字符串。

但是，代码分析为我提供了该方法的以下警告：

```
CA2241
Provide correct arguments to formatting methods
Method 'XX.ToString()' calls
'string.Format(IFormatProvider, string, params object[])'
and does not provide a format item for argument "1".
The provided format string is: '"{{0}} Text = \"{1}\""' 
```

对我来说，代码似乎`ToString()`是有效的。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:30:19.177

看起来您正在转义 {0} 的花括号。试试 {{{0}}}。

# java - 使用带小数的 string.split() - 不起作用

> ID：13460595
> 
> 赞同：8
> 
> 时间：2012-11-19T19:19:42.260
> 
> 标签：java, regex, string

我正在尝试将一行文本分成多个部分。文本的每个元素都由句点分隔。我正在使用 string.split("."); 将文本拆分为字符串数组，但无处可去。

这是代码示例：

```
String fileName = "testing.one.two";

String[] fileNameSplit = fileName.split(".");

System.out.println(fileNameSplit[0]); 
```

有趣的是，当我尝试“：”而不是“。”时，它有效吗？我怎样才能让它工作一段时间？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-19T19:20:37.260

[`String.split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)接受[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)（简称正则表达式），点是正则表达式中的特殊字符。这意味着“匹配除换行符之外的所有字符”。因此，您必须使用前导反斜杠对其进行转义。但是前导反斜杠是 java 字符串文字中的特殊字符。它表示一个转义序列。所以它也必须用另一个反斜杠转义。像这样：

```
fileName.split("\\."); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T19:20:31.217

试试这个：`fileName.split("\\.");`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T19:20:28.653

```
fileName.split("."); 
```

应该

```
fileName.split("\\."); 
```

**.** 是特殊字符并且[split()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29)接受正则表达式。因此，您需要转义特殊字符。

> 以反斜杠开头的字符`(\)`是转义序列，对编译器具有特殊意义。请阅读本[文档](http://docs.oracle.com/javase/tutorial/java/data/characters.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-19T19:22:28.903

这是因为 to 的参数`split`是一个正则表达式，并且`.`基本上意味着任何字符。使用`"\\."`代替，`"."`它应该可以正常工作。

文字句点（与任何字符相反`.`）的正则表达式是`\.`（使用`\`转义字符强制文字解释）。

而且，因为它在一个`\`已经具有特殊含义的字符串中，所以您也需要对其进行*转义*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T19:25:39.393

您需要转义“。” 字符，因为 split 接受正则表达式和 . 表示任何字符，因此要对 split 方法说按点拆分，您必须像这样对其进行转义：

```
String[] array = string.split('\\.'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T19:25:32.333

[split()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)接受一个[正则表达式](http://www.coderanch.com/t/324803/java/java/Java-regular-expression-dot-pattern)的参数

尝试使用

```
String[] fileNameSplit = fileName.split("\\."); 
```

# r - R - 具有大量虚拟变量的模型

> ID：13460598
> 
> 赞同：4
> 
> 时间：2012-11-19T19:19:49.093
> 
> 标签：r, model, linear-regression

如果我在具有多个变量的数据集中有一列，我将如何创建这些虚拟变量。

示例：假设我有一个名为颜色的列，它有：红色、绿色、黄色、蓝色、粉红色和灰色作为汽车颜色的选项。

将这些变量转化为因子的最佳方法是什么。无需手动创建一堆虚拟变量？

编辑：所以我做了格雷格推荐的，这就是我所拥有的。不过，我想知道 NA 输出，但不确定它为什么存在。

```
 > data$Trim<-factor(data$Trim)
 > data$Model<-factor(data$Model)
 > data$Type<-factor(data$Type)
 > data=cbind(Price,Mileage,Buick,Cadillac,Chevrolet,Pontiac,SAAB,Saturn,Model,Trim,Type,Cylinder,Liter,Doors,Cruise,Sound,Leather)
 > fit <- lm( Price ~ Mileage+Buick+Cadillac+Chevrolet+Pontiac+SAAB+Saturn+Model+Trim+Type+Cylinder+Liter+Doors+Cruise+Sound+Leather, x=TRUE )
 > summary(fit) 
```

然后我收到一条消息“系数：（由于奇异性而未定义 21）”，对于某些变量，输出为 NA。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T20:14:57.650

R 会自动为您创建虚拟变量，这是一个基本示例：

```
> mycars <- mtcars
> mycars$cyl <- factor(mycars$cyl)
> fit <- lm( mpg ~ wt+cyl, data=mycars, x=TRUE )
> summary(fit)

Call:
lm(formula = mpg ~ wt + cyl, data = mycars, x = TRUE)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.5890 -1.2357 -0.5159  1.3845  5.7915 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)  33.9908     1.8878  18.006  < 2e-16 ***
wt           -3.2056     0.7539  -4.252 0.000213 ***
cyl6         -4.2556     1.3861  -3.070 0.004718 ** 
cyl8         -6.0709     1.6523  -3.674 0.000999 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 2.557 on 28 degrees of freedom
Multiple R-squared: 0.8374,     Adjusted R-squared:  0.82 
F-statistic: 48.08 on 3 and 28 DF,  p-value: 3.594e-11 

> head(fit$x)
                  (Intercept)    wt cyl6 cyl8
Mazda RX4                   1 2.620    1    0
Mazda RX4 Wag               1 2.875    1    0
Datsun 710                  1 2.320    0    0
Hornet 4 Drive              1 3.215    1    0
Hornet Sportabout           1 3.440    0    1
Valiant                     1 3.460    1    0
> 
```

`x=TRUE`调用中的告诉`lm`它返回实际使用的 x 矩阵，其中包括虚拟变量。如果您不想查看创建的虚拟变量，则可以将其省略。`?contrasts`如果要设置虚拟变量的创建方式，请参阅更多详细信息。

# php - 在php中查找哪个文件创建了某个html字符串

> ID：13460599
> 
> 赞同：1
> 
> 时间：2012-11-19T19:19:52.027
> 
> 标签：php, joomla

关于 PHP 语言，我和他们一样绿色。现在我承担了开始学习 PHP 和 Joomla 的任务。

这就是我一直卡住的地方：我有一段需要更改的 html，例如我需要从标签中删除一个类。通过在 Chrome 中使用检查元素，我可以找到这段代码，我什至可以在 Chrome 中测试更改它并让它做我需要的事情。

但是我如何从那里移动到在 Joomla 模板中找到同一段 html 呢？我是否需要手动浏览每个文件并搜索字符串，或者是否有更智能的方法来找出负责将该 html 字符串插入站点的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:28:02.637

如果要进行模板覆盖，最好的方法是这样做。

您的课程来自模块，因此您需要覆盖模块的布局。这很简单。[这是](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)有关如何执行此操作的文档。

在您的模板文件夹中，应该有一个名为“html”的文件夹。如果没有，请创建一个。完成后，创建一个与模块文件夹同名的新文件夹，因此它应该类似于**mod_art-box**。然后在您的 Joomla 站点的根目录中，转到**modules/mod_art-box/tmpl**并将 default.php 从那里复制到您之前创建的文件夹中。然后打开文件，搜索类并将其删除。

我建议进行模板覆盖的原因是因为如果扩展或 Joomla 本身被更新，那么它将覆盖您的更改，使您必须再次进行。模板覆盖不会被覆盖。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:24:01.287

从 PHP 本身来看，没有“简单”的方法来做到这一点（我一直在纠缠一些人允许重载`echo`- 所以你可以追踪哪一行与什么相呼应，而不必完全重构所有内容，这将非常方便处理遗留代码）。Joomla 可能有一个值得称道的模板系统，所以你最好利用它。

如果您有时间，请找出模板/文件在 joomla 中是如何呈现的，并查看是否有一个函数用于一直执行输出 - 如果它不做最后的也没关系输出 - 并搭载某种跟踪功能。这将允许您在完成后跟踪输出。

遗憾的是，没有更好的通用解决方案。如果您有一些代码要显示，我也许可以提供更具体的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T01:08:17.637

任何页面上的 html 都应该由该页面的视图的布局文件、该页面的模块的布局文件或偶尔从内容插件布局生成。如果它正在创建某种复杂的模块镶边，我想有些也可能来自模板中的模块文件。一些基本的 html（如 body 和 head 标签）将在模板索引中，但是除了设置页面的主要区域和为它们分配类之外的布局覆盖之外，模板通常不应该对 html 承担太多责任。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T08:58:57.537

```
find /joomla-root -name *.php -exec grep -l 'your search string' {} \; 
```

I find myself doing this all the time. it's not instantaneous, but it's much faster than manually checking all likely override files, template files, modules, components, plugins, etc.

# javascript - 使用 cakephp 上传图像时如何使用 onClick/hover 组合显示表单而不隐藏它

> ID：13460601
> 
> 赞同：0
> 
> 时间：2012-11-19T19:19:57.680
> 
> 标签：javascript, jquery, cakephp

我想要一个在将鼠标悬停在我的图像上时显示的按钮，然后当我单击该按钮时，我希望出现一个表单，但是当我单击“选择文件”时我不希望它消失

```
<script type="text/javascript">

$("#profile_pic, #edit_pic").hover(
   function(){
      $('#edit_pic').removeClass('hidden');
   }
);
$("#edit_pic").click(function (){
 $("#upload_form").removeClass('hidden');
});

</script>

<html>

<div id="profile_pic">
</div>

<div id="edit_pic">
</div>

<div id="upload_form">
  //upload image form using cakephp
            <?php 
            echo $this->Form->create('Account', array('enctype' => 'multipart/form-data', 'url' => array('controller' => 'images', 'action' => 'before_crop', 'accounts' , $current_user['id']))); 
            echo $this->Form->input('image_relpath', array('type' => 'hidden'));
            echo $this->Form->input('Account.image', array('type' => 'file', 'label' => false));
            echo $this->Form->end('Upload');
         ?>&nbsp;
</div>

</html> 
```

我无法判断我的 jquery 是否错误，或者 cakephp 是否自动将事情搞砸了，但是一旦我单击“选择文件”（由表单创建的按钮），整个表单就会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:26:26.663

我可以很容易地发现您的代码中的一些问题。

首先在 HTML 上，不要忘记在标签的属性中**打开和关闭引号。**

其次，在你的 jQuery 选择器上，当引用一个 ID 时，永远不要忘记使用*尖* **号 #**。

尝试修复它们，看看会发生什么。

* * *

你也可以使用这个例子：

```
<style type="text/css">
#edit_pic, #upload_form {
    display: none;
}
</style>

<script type="text/javascript">
$("#profile_pic").mouseenter(function(){
    $("#edit_pic").show();
});

$("#edit_pic").click(function(){
    $("#upload_form").show();
});
</script> 
```

小心，因为这样，`#edit_pic`按钮一旦显示就永远不会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:48:24.517

您的代码中没有任何内容表明事物消失的原因。很明显你的例子并不完整。如果您可以提供一个完整的示例来重现您遇到的错误，我们可以尝试找出问题所在并解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:49:17.260

在我的 .click 函数中添加“return false”解决了这个问题。

```
$("#edit_pic").click(function (){
  $("#upload_form").removeClass('hidden')
  return false;
}); 
```

# c# - 如何在不刷新页面的情况下修改 Silverlight 中的查询字符串？

> ID：13460603
> 
> 赞同：0
> 
> 时间：2012-11-19T19:20:00.840
> 
> 标签：c#, silverlight

我已经看到基于此的其他几个问题，但在处理 Silverlight 时没有明确的答案。

我正在使用 Silverlight 5 和导航框架在我的应用程序的不同部分之间导航。我想做的是在用户执行我想要更新 url 的操作时提供到我的应用程序的深层链接。

我知道我可以通过调用来做到这一点，`NavigationService.Navigate`但这样做会重新初始化整个页面和我的视图模型，而我真正需要做的就是允许用户直接刷新到该视图或从地址栏保存直接链接。

我知道我应该能够使用 javascript 来执行此操作，但如果在 Silverlight 中有任何人都知道的方法来执行此操作，我宁愿不这样做。

**进一步澄清**

我的一页是报告。该报告已经具有分页功能。我希望能够在`#MyReport?Page=2`不实际重新加载页面的情况下更新 URL（就像我说的分页已经处理好了）。我只需要处理 OnNavigatingTo 函数中的查询字符串，而无需在每次单击某些内容时完全重新加载页面。这将允许用户复制该 URL 并将其放入电子邮件或他们想要放置的任何位置，其他用户将直接访问该 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:29:13.847

我没有在任何地方看到此文档，但是当您手动向 url 添加哈希时，它会在地址栏中显示为美元符号。

因此，如果我加载到页面：`/MyReport`导航框架通过 UriMapper 将其放入 url 栏中`#/MyReport`，当他们单击以转到报告中的下一组数据（或过滤器，或我决定使其可导航的任何其他数据时）这样）我可以告诉导航服务去，`/MyReport#page=2&otherkey=othervalue`导航框架会在幕后改变它`#/MyReport$page=2&otherkey=othervalue`，这不会重新加载页面。

然后我可以在 中添加我的自定义功能`OnNavigatedTo`以添加额外的初始化。当我在代码中对这个值做出反应时，它会将美元符号改回`NavigationService.CurrentSource`.

我相信这是因为 silverlight 正在对浏览器中的“hashchanged”事件做出反应并进行适当的导航。它似乎将美元符号处理为一种允许开发人员添加哈希而不搞砸导航的方式。

**更新**

即使这会修改 url，也无法根据前进/后退导航对其进行更新。由于导航框架将我的 # 重写为 $ 它并没有进行任何导航，因为我们仍然在同一页面上。向前/向后点击浏览器将转到最后一个 url，但不会触发任何更改，因此我必须手动执行此操作。这可以在页面内对象的`FragmentNavigation`事件`NavigationService`内完成。如果处理得当，这将允许在同一个 Silverlight 页面内向前/向后导航。

此解决方案允许深度链接和额外的向前/向后导航，而无需不断重新初始化页面和视图模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:31:37.680

最简洁的答案是不。

来自客户端的请求是请求；虽然您可以决定通过重定向或简单地发送任何内容来交付您喜欢的任何内容，但您无法在不重定向的情况下更改请求。

如果用户请求 mysite/contenta 并且您真的希望他们看到 mysite/contentb，唯一的问题是您是否重定向，以便他们会在地址栏中看到新的 url，或者您是否只是提供 mysite/contentb 和不在乎用户在地址栏中看到什么。

# javascript - IE8 中的 javascript 返回 - 对象不支持此属性或方法

> ID：13460604
> 
> 赞同：1
> 
> 时间：2012-11-19T19:20:01.807
> 
> 标签：javascript, internet-explorer, return

```
var result = Object.prototype.toString.call(nodes);
return (
    typeof nodes === 'object'
    &&
    /^\[object (HTMLCollection|NodeList|Object)\]$/.test(result)
    &&
    nodes.hasOwnProperty('length')
    &&
    (nodes.length == 0 || (typeof nodes[0] === "object" && nodes[0].nodeType > 0))
) 
```

这在 Chrome 中可以正常工作，但在 IE8（也可能是 7）中会引发错误。在线发生错误`return`。

这是我从这里的某个地方偷来的（我会继续寻找链接）。它应该确定给定对象 ( `nodes`) 是否是节点列表。这个错误有很多结果，但我找不到这个案例。有什么东西跳出来攻击任何人吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:30:25.363

感谢@STLRick：

`Object.prototype.hasOwnProperty.call(nodes, 'length')`

好像已经修好了！至少，它不再抛出错误了。不是 100% 确定它是否会影响节点检查，但它在我正在运行的几个测试用例中工作！

# asp.net - 通过 javascript 禁用客户端验证

> ID：13460605
> 
> 赞同：2
> 
> 时间：2012-11-19T19:20:09.077
> 
> 标签：asp.net, validation, .net-4.0

我的网站上有一个 javascript 方法，可在 X 分钟后重定向用户（只需将他们带到登录页面，因为他们的会话已过期）。

如果页面上有任何验证控件，我会遇到问题，当 javascript 方法设置 window.location 属性以重定向用户时，验证可能会失败。

有没有办法我仍然可以重定向用户但停止 ASP.Net 验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:23:16.637

您应该可以致电：

```
ValidatorEnable("nameOfYourValidator", false); 
```

对于每个控件

* * *

以下是 ASP.Net 客户端验证信息的完整列表：

[http://msdn.microsoft.com/en-us/library/aa479045.aspx#aspplusvalid_clientside](http://msdn.microsoft.com/en-us/library/aa479045.aspx#aspplusvalid_clientside)

> **验证器验证（val）**
> 
> 将客户端验证器作为输入。使验证器检查其输入并更新其显示。
> 
> **验证器启用（验证，启用）**
> 
> 接受一个客户端验证器和一个布尔值。启用或禁用客户端验证器。被禁用将阻止它进行评估，并且它将始终显示为有效。
> 
> **ValidatorHookupControl（控制，验证）**
> 
> 接受一个输入 HTML 元素和一个客户端验证器。修改或创建元素的更改事件，以便在更改时更新验证器。这对于依赖多个输入值的自定义验证器很有用。

# google-app-engine - 适用于 Python 2.7 运行时的 AppEngine 本地单元测试指南

> ID：13460614
> 
> 赞同：1
> 
> 时间：2012-11-19T19:20:37.023
> 
> 标签：google-app-engine

我们正在尝试在本地对我们的 GAE 应用程序（模型和处理程序）进行单元测试。官方网站/文档在细节或测试模式方面提供的很少。正如该页面所建议的，我们正在使用`unittest`，`testbed`但仅此而已。谷歌搜索带来了 08-10 的大部分过时结果，当时测试平台还没有出来。我们正在为本地单元测试寻找详尽的指南、模式等。如上所述，我们还没有找到一个最近的或相关的。TIA。

# c# - 封闭对象上的垃圾收集

> ID：13460617
> 
> 赞同：0
> 
> 时间：2012-11-19T19:20:40.343
> 
> 标签：c#, asp.net, c#-4.0, garbage-collection

**注意**以下代码来自 asp.net。

* * *

如果我有下面的（写得不好）代码

```
AmazonS3 s3Client = Amazon.AWSClientFactory.CreateAmazonS3Client();

// ...
// details elided
// ...

BackgroundWorker worker = new BackgroundWorker();

worker.DoWork += new DoWorkEventHandler((s, args) =>
{
    s3Client.PutObject(titledRequest);
});

new Thread(() => worker.RunWorkerAsync()).Start(); 
```

`s3Client`垃圾收集器会足够聪明，在后台工作人员完成之前永远不会收集对象吗？

* * *

请注意，我在线程内启动后台工作人员只是为了修复在我直接关闭后台工作人员时在 asp.net 中引发的恼人错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:23:27.700

是的，它会。编译器将为您生成一个新类，其中包含您在闭包中引用的每个局部变量的字段。闭包体将被发送到该类的方法中，并且包含函数中的所有局部变量将由编译器重写以引用该闭包对象上的字段。

所有这些魔法都发生在编译时；运行时不需要知道任何关于它的信息。由于运行时已经足够聪明，不会收集作为委托目标的对象，因此闭包引用的本地对象的生命周期可以保证延长到生成的委托对象的生命周期。

为了说明，编译器将吐出如下内容：

```
[System.Runtime.CompilerServices.CompilerGeneratedAttribute]
internal class ClosureImplementation // See note 1
{
    public AmazonS3 s3Client;

    public void Method(object s, EventArgs args)
    {
        s3Client.PutObject(titledRequest); // See note 2
    }
} 
```

然后，在您的方法中，它被发出：

```
ClosureImplementation closure = new ClosureImplementation();
closure.s3Client = Amazon.AWSClientFactory.CreateAmazonS3Client();

// ...

worker.DoWork += closure.Method; 
```

笔记：

1.  生成的类的名称由编译器选择；`ClosureImplementation`只是一个例子。
2.  我没有足够的上下文来知道`titledRequest`从哪里来，所以我故意没有说明编译器将如何处理它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T19:25:31.997

简而言之，是的。

您正在为您的事件处理程序使用 lambda，并且您正在关闭一个局部变量。这意味着您正在使用定义 lambda 的块之外的范围内的变量。这意味着，当编译器将 lambda 转换为“真实”方法时（在类内部，具有真实名称和一个对象实例和所有）它将包含对您作为该类的字段关闭的局部变量的引用。这将使该对象保持在范围内，直到 lambda 不再在任何地方被引用或在任何地方执行。

# c++ - 为什么这个程序会抛出“std::system_error”？

> ID：13460618
> 
> 赞同：4
> 
> 时间：2012-11-19T19:20:43.490
> 
> 标签：c++, c++11, stdthread

> **可能重复：**
> [为什么这个简单的 std::thread 示例不起作用？](https://stackoverflow.com/questions/6485705/why-does-this-simple-stdthread-example-not-work)

代码：

```
#include <iostream>
#include <thread>

void f()
{
  std::cout << "hi thread" << std::endl;
}

int main()
{
  std::thread t(f);
  std::cout << "hi" << std::endl;
  t.join();
} 
```

问题：

```
$ g++ -o thread_test thread_test.cpp -std=c++0x
$ ./thread_test         
terminate called after throwing an instance of 'std::system_error'
  what():  Operation not permitted
Abortado 
```

“Abortado”在我的语言环境中意味着“中止”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T19:21:49.397

您应该将其链接到`pthread`：

```
g++ -o thread_test thread_test.cpp -std=c++0x -lpthread 
```

`libstdc++`的`std::thread`实现要求您将应用程序链接到`libpthread`，否则`std::system_error`当您尝试创建线程时它们会抛出 a 。

# playframework-2.0 - 播放框架：如何从 javascript 文件中引用图像

> ID：13460619
> 
> 赞同：2
> 
> 时间：2012-11-19T19:20:48.953
> 
> 标签：playframework-2.0

我正在尝试在静态 js 脚本中设置图像，但它不起作用。

```
var _pointer = document.createElement("DIV");
_pointer.style.backgroundImage = 'url(../images/repeater_1x4.jpg)'; 
```

它返回此错误：

```
GET http://localhost:9000/images/repeater_1x4.jpg 404 (Not Found) 
```

我还尝试了以下操作，因为我将静态资源从公用文件夹映射到 assets/url 路径，它不会返回任何错误，但又不会显示图像。

```
var _pointer = document.createElement("DIV");
_pointer.style.backgroundImage = 'url(@routes.Assets.at("images/repeater_1x4.jpg"))'; 
```

如果您想知道这是在我的路线文件中：

```
GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

这样做的正确方法是什么？我正在使用播放！2.0，我的脚本在 public/javascripts 中，我的图像在 public/images 中，正如您所料。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:29:48.863

利用：

```
_pointer.style.backgroundImage = 'url(/assets/images/repeater_1x4.jpg)'; 
```

# python - 按索引雕刻 2D numpy 数组

> ID：13460624
> 
> 赞同：6
> 
> 时间：2012-11-19T19:21:20.117
> 
> 标签：python, arrays, numpy, slice

我如何根据索引公式“雕刻”或屏蔽 2D numpy 数组？我不关心元素值是什么，只关心它在数组中的位置。

例如，给定一个 mxm 数组，我如何提取地址符合的所有元素

```
for i in range(0,m):
    for j in range(0,m):
        if j-i-k>=0:
            A[i,j] = 1
        elif j-p-k>=0:
            A[i,j] = 1
        elif i-k>=0:
            A[i,j] = 1
        else:
            A[i,j] = 0
        j=j+1
    i=i+1 
```

在哪里

k 和 p 是任意栅栏

认为

```
k<m
p<m 
```

这最终看起来像一个对角切片 + 一个水平切片 + 一个垂直切片。没有上面的 for 循环可以完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:40:00.990

```
In [1]: import numpy as np

In [2]: k = 2

In [3]: i, j = np.ogrid[0:5,0:5]

In [4]: mask = (j-i-k < 0)

In [5]: mask
Out[5]: 
array([[ True,  True, False, False, False],
       [ True,  True,  True, False, False],
       [ True,  True,  True,  True, False],
       [ True,  True,  True,  True,  True],
       [ True,  True,  True,  True,  True]], dtype=bool)

In [6]: mask.shape
Out[6]: (5, 5)

In [7]: mask.dtype
Out[7]: dtype('bool') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:42:34.143

```
xdim,ydim = data.shape
k = 2
a, b = np.meshgrid(range(ydim),range(xdim))
mask = (b - a -k) < 0

new_data = data[mask]

new_data2 = np.array(data) # to force a copy
new_data2[~mask] = 0 
```

`new_data`是一个向量，因为掩蔽过程（以这种方式完成）使阵列变平。您正在选择一个不能表示为数组的参差不齐的形状。如果您只想将未选择的值设置为 0，请使用 new_data2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:45:43.133

这是另一种使用方式[`np.indices`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.indices.html)：

```
>>> import numpy as np
>>> a = np.arange(90).reshape(10,9)
>>> b = np.indices(a.shape)
>>> k = 2
>>> i = b[1] - b[0] - k
>>> a[i < 0]
array([ 0,  1,  9, 10, 11, 18, 19, 20, 21, 27, 28, 29, 30, 31, 36, 37, 38,
   39, 40, 41, 45, 46, 47, 48, 49, 50, 51, 54, 55, 56, 57, 58, 59, 60,
   61, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78,
   79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89]) 
```

# java - 来自静态上下文的非静态变量

> ID：13460638
> 
> 赞同：1
> 
> 时间：2012-11-19T19:22:04.473
> 
> 标签：java

我是java新手。
我收到此错误消息“***无法从静态上下文引用非静态变量***”。
我已经在 SO 中阅读了一些答案，但我无法根据我的问题调整解决方案。

这是代码：

```
package test;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

public class test{

public class Pass {    
    private int identity;
    private ArrayList<Date> logged_in;
    private ArrayList<Date> logged_out;
    public Pass(int identity){ 
        this.identity = identity;
        this.logged_in = new ArrayList<Date>();
        this.logged_out = new ArrayList<Date>();
    }    
}

public class Officer {    
    private Pass pass;
    public Officer(Pass pass){ this.pass = pass; }    
}    

public static void main(String[] args) throws ParseException {  
    Officer officer1 = new Officer(new Pass(1111));// PROBLEM IN THIS LINE 
}
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T19:25:40.993

您将希望在“测试”课程之外参加军官和通行证课程，以便他们与“测试”课程并肩生活，而不是在其中。

更新：正如其他答案所暗示的，每个文件只有一个公共类。我已经更新了代码以反映这一点。此外，类通常放置在它们自己的文件中，并且不会一起存在。

```
package test;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

class Pass {    
    private int identity;
    private ArrayList<Date> logged_in;
    private ArrayList<Date> logged_out;
    public Pass(int identity){ 
        this.identity = identity;
        this.logged_in = new ArrayList<Date>();
        this.logged_out = new ArrayList<Date>();
    }    
}

class Officer {    
    private Pass pass;
    public Officer(Pass pass){ this.pass = pass; }    
}    

public class test{
    public static void main(String[] args) throws ParseException {  
        Officer officer1 = new Officer(new Pass(1111));// PROBLEM IN THIS LINE 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:37:03.767

您的代码唯一的问题是内部类的用户。由于您是初学者，所以我假设您不想深入研究内部类。

所以你必须定义3个相互独立的类。

Class Pass是公开课...

班主任是第二公开课

类 Test 是另一个公共测试功能。

所以

```
Pass{
}

Officer{

}

Test{

} 
```

一开始我们把自己弄糊涂了，试着把所有的东西都写在大括号里。但这并不总是正确的。但在单个文件中声明一个类是一种很好的做法。所以在你的例子中......

Pass.java 应该包含 Pass 类...

```
Pass {

} 
```

officer.java 应该包含officer类...

```
Officer {

} 
```

同样适用于测试类......

除此之外，你可以选择从一些好书上学习，这将帮助你首先建立你的基础。

# ruby-on-rails-3 - 集合不包括错误后提示

> ID：13460652
> 
> 赞同：0
> 
> 时间：2012-11-19T19:23:25.547
> 
> 标签：ruby-on-rails-3

我有一个集合集，其中包含从 1 月到 31 月的日期。我在我的模型中进行验证。当页面加载时出现 :birth 错误提示“Day”不再出现在我的下拉框中。

在我看来

```
<%= f.label :birth %>
<%= f.collection_select(:birth_day, 1..31, :to_i, :to_i , :prompt=>'Day') %> 
```

在我的模型中

```
validate :validate_dates

def validate_dates  
  b_month = self.birth_month.to_i

  if (b_month == 4 || b_month == 6 || b_month == 9 || b_month == 11)
    if (self.birth_day == 31)
      self.errors.add(:birth, "is invalid")
    end
  end
end 
```

生成的源 - 错误之前

```
<label for="individual_birth">Birth</label>
<select id="individual_birth_day" name="individual[birth_day]">
  <option value="">Day</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  ....
 </select> 
```

生成的源 - 错误后

```
<div class="field_with_errors"><label for="individual_birth">Birth</label></div>
<select id="individual_birth_day" name="individual[birth_day]">
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  ....
  <option value="31" selected="selected">31</option>
 </select> 
```

请让我知道我做错了什么。我需要下拉菜单中的提示，因为 Day 不是必填字段。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:57:14.420

尝试`field_error_proc`通过将此代码放在`config/application.rb`

```
config.action_view.field_error_proc = Proc.new { |html_tag, instance| 
  "#{html_tag}".html_safe 
} 
```

另一个覆盖`field_error_proc` [https://gist.github.com/1464315的示例](https://gist.github.com/1464315)

信用：[https ://stackoverflow.com/a/5268106/643500](https://stackoverflow.com/a/5268106/643500)

如果那不这样做，请查看该功能以及它正在做什么导致`:prompt=>'Day'`消失。

**编辑：**

经过更多测试后，问题似乎是用户已经选择了一个值并尝试提交表单。这会导致出现所有其他错误，同时仍保留新选择的值，`collection_select`因此省略提示（已有值）

要解决此问题，请将您更改`collection_select`为`select`with`options_from_collection_for_select`

就像是

```
<%= f.select "element_name", options_from_collection_for_select(@my_select_collection, :my_value_method, :my_text_method, 0), {:prompt => "Day"} %> # 0 or nothing (holds default) 
```

这样，我们将默认值设置为始终 0 或将其留空`nil`。这样我们保证没有有效值被默认（如果默认为有效值提示将不会显示）

另一种方法是使用`:include_blank`，但不会有“Day”。这适用于您的场景，无需更改任何内容。只需替换`:prompt => 'Day'`为`:include_blank => true`. 总会有一个空选项。您可以使用 JS 将空白重置为一个值。

# vb.net - 如何在 vb.net 中使用 Stacktrace 返回错误行号

> ID：13460656
> 
> 赞同：12
> 
> 时间：2012-11-19T19:23:29.540
> 
> 标签：vb.net, error-handling, stack-trace, erl

我正在尝试创建某种错误捕获方法，该方法将返回错误行号。我们有一封中止电子邮件，当进程中止时发送给我们*err.number*和*err.description*，但我想知道实际错误在哪里。

我知道您可以执行以下操作：

```
1: code here
2: code here
3: code here 
```

等等，并使用 ERL 来获取数字，但是这样输入每一行会很乏味。

有没有一种方法可以自动执行此操作，或者使用 Stacktrace 会更容易吗？如果 Stacktrace 更好，你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-13T17:57:22.970

我从其他论坛改编了一个例子，在我的例子中，我没有得到导致错误的行号，所以我开始玩弄并找到了解决方案，代码如下：

```
Public Class Form1
    Private Sub a2()
        Dim b As Integer = 0
        Dim a As Integer = 1 / b
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, _
ByVal e As System.EventArgs) Handles Button1.Click
        Try
            a2()
        Catch ex As Exception
            Dim st As New StackTrace(True)
            st = New StackTrace(ex, True)
            MessageBox.Show("Line: " & st.GetFrame(0).GetFileLineNumber().ToString, "Error")
        End Try
    End Sub
End Class 
```

在这个例子中，第 4 行会触发错误异常，但是一旦我将原理应用到现实生活中的应用程序中，行是 0，所以我开始玩 GetFrame 属性中的索引，它的范围从 0 到 4，当我把4 在对象 EUREKA 中，我得到了导致问题的行号。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-19T19:36:05.667

在异常堆栈跟踪中生成行号是 CLR 的内置功能。但是，您必须提供将代码地址映射到行号所需的信息。切换到项目的发布配置。项目+属性，编译选项卡，高级编译选项。将“生成调试信息”设置从 pdb-only 更改为 Full。将 .pdb 文件与您的程序一起部署。

请注意，您获得的行号始终是估计值，因此不要盲目相信您所看到的。由于抖动优化器内联方法以及移动代码以使程序运行得更快，映射是不完美的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-01T13:08:30.663

```
 Try
        Dim x As Integer
        x = " "

    Catch ex As Exception
        Dim trace = New Diagnostics.StackTrace(ex, True)
        Dim line As String = Strings.Right(trace.ToString, 5)
        Dim nombreMetodo As String = ""
        Dim Xcont As Integer = 0

        For Each sf As StackFrame In trace.GetFrames
            Xcont = Xcont + 1
            nombreMetodo = nombreMetodo & Xcont & "- " & sf.GetMethod().ReflectedType.ToString & " " & sf.GetMethod().Name & vbCrLf
        Next

        MessageBox.Show("Error en Linea number: " & line & ex.Message & vbCrLf & "Metodos : " & vbCrLf & nombreMetodo)

    End Try 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T19:35:41.797

您绝对应该使用堆栈跟踪，因为您可以使用只需要编写一次代码的全局异常捕获机制。

要获得引发错误的确切行，您需要将 pdb 文件与您的应用程序一起提供。这些 pdb 文件包含调试信息，包括错误的行号。

如果您想知道如何优雅地捕获未处理的异常，请查看[这篇 codeproject 文章](http://www.codeproject.com/Articles/7482/User-Friendly-Exception-Handling)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-31T21:44:43.250

```
 Try
        Dim x As Integer
        x = " "

    Catch ex As Exception
        Dim trace = New Diagnostics.StackTrace(ex, True)
        Dim line As String = Strings.Right(trace.ToString, 5)
        Dim nombreMetodo As String = ""

        For Each sf As StackFrame In trace.GetFrames
            nombreMetodo = sf.GetMethod().Name & vbCrLf
        Next

        MessageBox.Show("Error en Linea number: " & line & vbCrLf & ex.Message & vbCrLf & "Metodos : " & nombreMetodo)
    End Try 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-15T03:47:27.843

如果您希望继续使用 On Error Goto，只需将代码复制并粘贴到 UltraEdit 等程序员编辑器中，然后在单列编辑操作中插入所有行号。确保突出显示第一列，然后使用列/插入编号...

然后将其复制并粘贴回您的程序中。瞧，除了选择案例语句之后的第一个案例。在每个选择案例之后从第一个案例条目中删除您插入的行号。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-04-12T07:10:08.647

您可以使用**StackTrace**检索错误的行号。

```
Try 
    'Put your code here

Catch ex As Exception
    Dim trace = New Diagnostics.StackTrace(ex, True)
    Dim line As String = Right(trace.ToString, 5)
    MessageBox.Show("'" & ex.Message & "'" & " Error in- Line number: " & line)

End Try 
```

# java - 如何避免 Java 将数据保存为参考而产生的问题？

> ID：13460657
> 
> 赞同：0
> 
> 时间：2012-11-19T19:23:44.823
> 
> 标签：java

所以我有一个名为 Graph 的 ArrayList 有 8 个条目。条目 1 是对称为“源”的整数数组的引用，条目 2-8 是对称为“数据”的整数数组的引用。但是，我真正想做的只是将数据保存在“源”和“数据”中，而不是保存对它们的引用。现在正因为如此，更改“数据”会破坏“图形”，编辑存储在“图形”中的数据很麻烦。

在这一点上，我希望能够在 while/for 循环中一次从“Graph”中提取一个数据，将其存储到一个名为 temp 的整数数组中，修改 temp，然后将其存储回“Graph” ，但这不起作用，因为这最终意味着“Graph”中的每个条目都只是对“temp”的引用，它们最终都会具有相同的值，这当然是错误的。

在 Graph 中编辑数据或重建数据以便避免这个问题的好方法是什么？

这是代码。我正在从一个告诉我如何构建图表的文本文件中读取数据。

```
 BufferedReader br = new BufferedReader(new FileReader("graph.txt"));
    StringBuilder sb = new StringBuilder();
    String line = br.readLine();

    while(line.charAt(z)!=' '){
        sizeString=sizeString+line.charAt(z);
        z++;
    }
     size = Integer.valueOf(sizeString);
     int graph[][] = new int[size][size];

    while (line != null) {
        sb.append(line);
        sb.append("\n");
        line = br.readLine();
        z=0;
        if(line != null){
            while(line.charAt(z)!=' '){
                xString=xString+line.charAt(z);
                z++;
            }
            z++;
            while(line.charAt(z)!=' '){
                yString=yString+line.charAt(z);
                z++;
            }
            z++;
            while(z<line.length()){
                weightString=weightString+line.charAt(z);
                z++;
            }
            System.out.println(xString+yString+weightString);
            x=Integer.valueOf(xString);
            y=Integer.valueOf(yString);
            weight=Integer.valueOf(weightString);

            graph[x][y]=weight;
            xString="";yString="";weightString="";
            vertices++;     
        }
    }

    //Set non adjacent node weights to infinity
    ArrayList Graph = new ArrayList();
    int[] source = new int[2];
    int[] data = new int[2];

    source[0]=0;
    source[1]=-1;

    Graph.add(0,source);

    data[0]=99999;      //Represents 'infinity'
    data[1]=-1;         //No source node
    x=1;

    while(x<graph.length){
        Graph.add(x, data);
        x++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:23:02.110

好的，我将尝试根据您对评论的回复提供答案。我在您的示例代码中没有看到任何名为“temp”的变量，所以我假设您还没有尝试编写该部分。

```
List<int[]> Graph = new ArrayList<int[]>(8); //specify the capacity if it is fixed
//Your existing code that populates Graph here...
for (int[] temp : Graph) {
    //Do some operations on temp...
} 
```

或者如果您只想对 Graph 的元素 1..n 进行操作：

```
for (int ii = 1; ii < Graph.size(); ii++) {
    int[] temp = Graph.get(ii);
    //Do some operations on temp...
} 
```

此外，当您填充 Graph 时，如果您不想保存引用，则需要制作数组的副本然后存储它：

```
int[] srcCopy = new int[source.length];
System.arraycopy(source, 0, srcCopy, 0, source.length); 
```

我还建议您使用不同的变量名而不是“Graph”。大写的标识符只能用于类/接口变量。

# php - Facebook Access Token 是否过期

> ID：13460660
> 
> 赞同：-1
> 
> 时间：2012-11-19T19:23:56.747
> 
> 标签：php, facebook, api, facebook-graph-api

如何使用 Facebook PHP SDK 检查访问令牌是否过期？

因为我猜它没有记录，而且这个链接不是关于 SDK 的，不是吗？那么他们有什么方法可以检查使用 SDK 还是我需要使用 curl ？

[https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:49:53.220

> 如何使用 Facebook PHP SDK 检查访问令牌是否过期？

为此目的有一个 API 端点，请参见此处：[https ://developers.facebook.com/docs/howtos/login/debugging-access-tokens/](https://developers.facebook.com/docs/howtos/login/debugging-access-tokens/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T15:16:34.570

要获取令牌过期和其他相关令牌信息，您可以对 Graph API 调试端点进行 GET 调用，如下所示。

```
GET /debug_token?
     input_token={input-token}&
     access_token={access-token} 
```

`input_token`您要获取有关信息的访问令牌

`access_token`您的应用访问令牌或来自应用开发者的有效用户访问令牌

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-02T09:45:01.727

您需要触发此 api 调用以了解访问令牌的状态：

```
https://graph.facebook.com/oauth/access_token_info?access_token=xxxxxxxxx 
```

它将显示`expires_in`：`SECONDS_TO_EXPIRE`

# html - Html Mp4 音频工作但不是视频

> ID：13460668
> 
> 赞同：0
> 
> 时间：2012-11-19T19:24:34.107
> 
> 标签：html, mp4

使用此代码，我在我的网页中获得了一个视频播放器，但只能播放音频。它在音频运行时向我显示黑屏。视频文件很好，我检查了不止一次。

```
<video width="400" height="400" controls="controls" autoplay="autoplay">
  <source src="PetShop_Preview.ogg" type="video/ogg">
  <source src="PetShop_Preview.mp4" type="video/mp4">
<object data="PetShop_Preview.mp4" width="400" height="400">
  <embed width="400" height="400" src="PetShop_Preview.swf">
</object>
</video> 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:49:59.197

检查资源被用作的 MIME 类型。确保它与您提供的类型属性相匹配。

要在 tomcat 中执行此操作，您必须编辑 web.xml 文件。[http://wiki.metawerx.net/wiki/Web.xml.MimeMapping](http://wiki.metawerx.net/wiki/Web.xml.MimeMapping)

# php - 只读集合

> ID：13460677
> 
> 赞同：1
> 
> 时间：2012-11-19T19:25:12.257
> 
> 标签：php, oop, collections

我正在寻找 PHP 中的只读集合。我已经搜索过了，但我还找不到本机实现。我认为我绝对不是第一个需要这样的程序员：

我的情况如下：一个购物车类包含许多购物车项目。cartItems 应该只能通过购物车编辑（它是聚合根）。要显示这些项目，我的购物车需要返回一个集合类型。（此集合中的项目已设为只读）。我更喜欢通过引用传递集合，因此共享集合始终是最新的。（甚至认为我在提取集合后删除/添加了一个项目）。

这些项目存储在购物车的 ArrayObject 中。是否有一个本机类将 ArrayObject 包装为只读？如果没有，这种包装器是否存在于另一种类型的集合中，还是我需要自己编写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:28:44.017

您很可能需要自己编写它，利用`private`类中可用的属性类型。我认为，这是唯一可行的方法。请记住，即使这也不是万无一失的，因为您可以使用反射绕过它。尽管如此，它仍然遵循通常的格言：如果有人想打破它，他们就会打破它。

将您的 ArrayObject 包装为更大类的私有属性，并且只允许通过类的方法（静态或动态，无关紧要）访问对象。这将为您尝试做的事情提供最接近的匹配，因为它允许您人为地让读取（想到魔术方法 __get()）而不是写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:53:56.743

在这次讨论中，我有一个想法可以解决我的问题：我让我的购物车实现 Iterator。所以我的视图能够显示我的购物车及其物品。结果，购物车总是返回只读的 cartItemObjects。所以我永远不需要发布一个集合。感谢您的参与！

# ios - 空中应用 - 实现 Facebook

> ID：13460678
> 
> 赞同：2
> 
> 时间：2012-11-19T19:25:14.647
> 
> 标签：ios, actionscript-3, facebook-graph-api

我目前正在开发一个将在 iOS 上运行的 adobe air game (as3)。我正在尝试实现 facebook api（as3 的图形 api）。但我无法让它工作，甚至找不到可靠的教程。我已经设法弄清楚如何调用登录对话框。代码如下：

```
public final class LoadingFacebook extends Sprite
{

    private const APP_ID:String = "47878787754564";
    private const PERMISSIONS:Array = new Array("read_friendlists","publish_stream");
    private var accessToken:String = "";
    private var facebookWebView:StageWebView = new StageWebView();

    public function LoadingFacebook()
    {
        FacebookMobile.init(APP_ID, initCallBack);
    }

    private function initCallBack(result:Object, fail:Object):void{
    if(result == null){FacebookMobile.login(onFacebookInit,this.parent.stage,PERMISSIONS,facebookWebView)}
    }

    private function onFacebookInit(result:Object, fail:Object):void{

        if(result == null){
            trace("not logged in");
        }else{
            trace("logged in");
        }
}
} 
```

应用程序总是打印出（除了我的跟踪：“未登录”）此错误：

```
 TypeError: Result of expression 'j' [undefined] is not an object.
     at http://static.ak.fbcdn.net/rsrc.php/v2/y3/r/g8SHMmXU-df.js : 25
     at http://static.ak.fbcdn.net/rsrc.php/v2/y3/r/g8SHMmXU-df.js : 25 
```

我真的不知道这意味着什么以及为什么要打印出来。

此外，我想问一下这是否是正确的方法，或者我应该在 air 的本机扩展中使用本机 Graph iOS api，因为 as3 图形 API 已经过时并且似乎表现得有点错误和随机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:06:39.943

查看新的 Adob ​​e[游戏 SDK](http://www.adobe.com/devnet-docs/gamingsdk/anedocs/)，其中包括一组新的 Adob​​e 支持的库，例如及其各自的文档 (Asdocs)。特别是 com.adobe.ane.social 库。

这并不能解决您想通过 Facebook 或通过 Facebook 完成的所有任务，但它的功能正在增长。暂时基本上可以从您的应用程序中添加帖子，包括图像、文本和 URL。

以为你可能会感兴趣。

# iphone - iOS：如何判断 UILabel 的字体是否已自动调整大小？

> ID：13460679
> 
> 赞同：2
> 
> 时间：2012-11-19T19:25:14.417
> 
> 标签：iphone, ios, cocoa-touch, uilabel, autoresize

有没有办法以编程方式确定标签中的文本是否已自动调整大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:34:58.490

您可能可以使用字体检查文本的大小并将其与标签的宽度进行比较。

也许是这样的：

```
CGSize size = [yourLabel.text sizeWithFont:label.font constrainedToSize:CGSizeMake(100000, yourLabel.frame.size.height)  lineBreakMode:yourLabel.lineBreakMode];

if(size.width > label.frame.size.width)
{
    //you are being autosized
} 
```

# ruby-on-rails - Rails 500 错误页面 - 使用 REST API 创建 Redmine 问题

> ID：13460692
> 
> 赞同：1
> 
> 时间：2012-11-19T19:25:52.210
> 
> 标签：ruby-on-rails, api, redmine, redmine-api

我有一个 Redmine 2.1.2 服务器正在运行。在我尚未移植到 Rails-3 Rails 2 的应用程序中，我想创建 500.html 页面以具有用户可以就错误提出 Redmine 问题的表单，并使用[Redmine API](http://www.redmine.org/projects/redmine/wiki/Rest_Issues)创建它。但是，我不确定如何从 500 页面实际“发送”API 调用，因为它是一个“平面”页面（即没有控制器、视图等）

是否可以在 Javascript 中执行此操作（似乎很危险）？或者我是否需要从 500 页面调用我的 Rails 控制器之一，并从控制器方法执行 API？我在互联网上浏览了一些关于这个主题的信息，但我很难找到任何具体的东西。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:32:13.603

您可以定义错误 500 页面来访问您的应用程序的特定操作，如此[处](http://tomayko.com/writings/adopt-an-open-source-process-constraints)所述。

然后，在此操作中，您可以使用一些 gem 连接到 redmine api。一些示例可能是 Rest-client 或[ApiClient](https://github.com/zertico/api-client)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:51:38.727

这有两个部分。首先是在显示 500 错误时，为时已晚。[这里有一个关于处理动态错误页面](https://stackoverflow.com/questions/5331008/dynamic-error-pages-in-rails-3)的很好的stackoverflow答案——看看建议使用的答案`rescue`（不是接受的答案）。这意味着虽然发生了一些不好的事情，但 Rails 仍在运行，您可以执行代码。

然后，您可以根据需要收集信息以创建 RedMine 问题，并使用RestClient或其他[工具轻松执行 REST 请求。](https://github.com/archiloque/rest-client)

您可能还想考虑使用出色的[ExceptionNotifier gem](https://github.com/rails/exception_notification)作为替代方案。如果您一遍又一遍地遇到相同的异常，您最终会遇到一堆 Redmine 问题（或者需要更复杂的管理来处理这个问题）。异常通知器在电子邮件中为您提供所需的一切（我会将其发送到邮件组），然后您可以输入一个更具建设性的 Redmine 问题。

# java - 在 Java 中使用“sincos”

> ID：13460693
> 
> 赞同：16
> 
> 时间：2012-11-19T19:25:52.907
> 
> 标签：java, math, optimization, trigonometry

在很多情况下，我不仅需要正弦，还需要相同参数的余弦。

对于 C，`sincos`在通用 unix`m`数学库中有该函数。实际上，至少在 i386 上，这应该是一条汇编指令，`fsincos`.

> sincos, sincosf, sincosl - 同时计算 sin 和 cos

我猜这些好处是存在的，因为在计算正弦和余弦方面存在明显的重叠：`sin(x)^2 + cos(x)^2 = 1`. 但是 AFAIK 尝试将其简化为 并没有回报`cos = Math.sqrt(1 - sin*sin)`，因为该`sqrt`功能的成本相似。

有没有办法在 Java 中获得同样的好处？我想我会为此付出代价`double[]`；由于添加了垃圾收集，这可能会使所有努力都变得毫无意义。

或者 Hotspot 编译器是否足够聪明，可以识别出我需要两者，并将其编译为`sincos`命令？我可以测试它是否识别它，并且我可以帮助它识别它吗，例如通过确保`Math.sin`and`Math.cos`命令在我的代码中是直接连续的？从 Java 语言的角度来看，这实际上是最有意义的：让编译器优化它以使用`fsincos`汇编调用。

从一些汇编器文档中收集：

```
Variations    8087         287        387      486     Pentium
fsin           -            -       122-771  257-354   16-126  NP
fsincos        -            -       194-809  292-365   17-137  NP
 Additional cycles required if operand > pi/4 (~3.141/4 = ~.785)
sqrt        180-186      180-186    122-129   83-87    70      NP 
```

`fsincos`应该需要一个额外的pop，但这应该是1个时钟周期。假设 CPU 也没有对此进行优化，`sincos`应该几乎是调用`sin`两次的两倍（第二次计算余弦；所以我认为它需要做一个加法）。`sqrt`在某些情况下可能更快，但正弦可以更快。

**更新**：我在 C 中做了一些实验，但没有定论。有趣的是，`sincos`它似乎比`sin`（没有）还要快一些，并且当您计算两者时，`cos`GCC 编译器将使用- 所以它可以做我希望 Hotspot 做的事情（或者 Hotspot 也做？）。我还不能阻止编译器通过使用除了不使用. 然后它将回退到 C ，而不是.`fsincos``sin``cos``fsincos``cos``sin``fsin`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T19:42:31.440

我已经用卡尺进行了一些微基准测试。在 -4*pi .. 4*pi 范围内的（预先计算的）随机数数组上进行 10000000 次迭代。我尽我最大的努力来获得我能想到的最快的 JNI 解决方案 - 很难预测你是否真的会得到`fsincos`或一些被模仿`sincos`的 . 报告的数字是 10 次卡尺试验中最好的（这又包括 3-10 次试验，报告了其中的平均值）。所以大致每个内循环运行 30-100 次。

我已经对几个变体进行了基准测试：

*   `Math.sin`仅（参考）
*   `Math.cos`仅（参考）
*   `Math.sin`+`Math.cos`
*   `sincos`通过 JNI
*   `Math.sin`+ cos via `Math.sqrt( (1+sin) * (1-sin) )`+ 符号重建
*   `Math.cos`+ sin via `Math.sqrt( (1+cos) * (1-cos) )`+ 符号重构

`(1+sin)*(1-sin)=1-sin*sin`在数学上，但如果 sin 接近 1 它应该更精确？运行时差异很小，您节省了一项。

符号重建通过`x %= TWOPI; if (x<0) x+=TWOPI;`然后检查象限。如果您知道如何用更少的 CPU 做到这一点，我很乐意听到。

数字损失`sqrt`似乎是可以的，至少对于常见的角度。在粗略实验的 1e-10 范围内。

```
Sin         1,30 ==============
Cos         1,29 ==============
Sin, Cos    2,52 ============================
JNI sincos  1,77 ===================
SinSqrt     1,49 ================
CosSqrt     1,51 ================ 
```

`sqrt(1-s*s)`vs.`sqrt((1+s)*(1-s))`产生大约 0,01的差异。如您所见，`sqrt`基于方法的方法胜过其他任何方法（因为我们目前无法`sincos`在纯 Java 中访问）。JNI`sincos`比计算`sin`和更好`cos`，但该`sqrt`方法仍然更快。`cos`本身似乎始终比 好一个刻度 (0,01) `sin`，但重构符号的大小写区分有一个额外的`>`测试。我不认为我的结果支持`sin+sqrt`或`cos+sqrt`显然更可取，但与那时相比，它们确实节省了大约 40% 的`sin`时间`cos`。

如果我们将 Java 扩展为具有**内在优化的 sincos**，那么这可能会更好。恕我直言，这是一个常见的用例，例如在图形中。在 AWT、Batik 等中使用时，许多应用程序都可以从中受益。

如果我再次运行它，我还会添加 JNI`sin`和 a`noop`来估算 JNI 的成本。也许还可以`sqrt`通过 JNI 对技巧进行基准测试。只是为了确保`sincos`从长远来看我们确实需要一个内在函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:31:36.527

大多数 sin 和 cos 计算都是直接调用硬件。没有比这更快的计算方法了。具体来说，在 +- pi/4 范围内，速率非常快。如果您通常使用硬件加速，并尝试将值限制为指定的值，那么您应该没问题。[来源](http://www.java.net/node/645530)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:31:59.853

您可以随时配置文件。

然而，一般来说，sqrt 的速度应该与除法相同，因为 div 和 sqrt 的内部实现非常相似。

正弦和余弦，OTOH 是用高达 10 度的多项式计算的，没有任何公共系数，并且可能难以模 2pi 减少——这是正余弦中唯一共享的公共部分（不使用 CORDIC 时）。

**编辑**修订的分析（纠正错字）显示时间差异

```
sin+cos:  1.580 1.580 1.840 (time for 200M iterations, 3 successive trials)
sincos:   1.080 0.900 0.920
sin+sqrt: 0.870 1.010 0.860 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T11:12:40.417

查看 Hotspot 代码，我相当确信 Oracle Hotspot VM 没有将 sin(a) + cos(a) 优化为 fsincos：请参见[assembler_x86.cpp](http://hg.openjdk.java.net/jdk7/hotspot/hotspot/file/9b0ca45cd756/src/cpu/x86/vm/assembler_x86.cpp)，第 7482ff 行。

但是，我怀疑单独使用 fsin 和 fcos 所增加的机器周期数很容易被其他操作（例如运行 GC）所掩盖。我会使用标准的 Java 功能并分析应用程序。只有当配置文件运行表明在 sin/cos 调用中花费了大量时间时，我才会冒险去做一些事情。

在这种情况下，我将创建一个使用 2 元素 jdoublearray 作为输出参数的 JNI 包装器。如果您只有一个使用 sincos JNI 操作的线程，则可以在 Java 代码中使用静态初始化的 double[2] 数组，该数组将被反复重用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-15T02:37:09.073

常规 Java中没有可用的**fsincos 。**此外，JNI 版本可能比对 java.lang.Math.sin() 和 cos() 的双重调用要慢。

我猜你担心 sin(x)/cos(x) 的速度。所以我给你一个快速三角运算的建议，代替 fsincos：查找表。下面是我的原帖。我希望它对你有帮助。

=====

我尝试使用查找表 (LUT) 在三角函数（sin 和 cos）上实现最佳性能。

我发现了什么：

*   LUT 可以比 java.lang.Math.sin()/cos() 快**20-25 倍。**可能与本机 fsin / fcos 一样快。也许和 fsincos 一样快。
*   但是如果使用 0 到 45 度之间的角度，java.lang.Math.sin() 和 cos()**比任何其他计算 sin/cos 的方法都要快；**
*   但请注意，低于 12 度的角度的 sin(x) 几乎 == x。它甚至更快；

*   一些实现使用浮点数组来存储 sin，另一种用于存储 cos。这是不必要的。请记住：

`cos(x) == sin(x + PI/2)`

*   也就是说，如果你有 sin(x) 表，你就有 cos(x) 表是免费的。

我使用 java.lang.Math.sin();对**范围 [0..45] 内的角度进行了一些测试，使用 sin()；**一个简单的 360 位置查找表，一个优化的 LUT90，表值范围为 [0..90]，但扩展为使用 [0..360]；并使用插值查找表。注意警告后，java.lang.Math.sin() 比其他更快：

```
Size test: 10000000
Angles range: [0.0...45.0]
Time in ms
Trial | Math.sin() | Lut sin() | LUT90.sin() | Lut sin2() [interpolation]
0    312,5879        25,2280        27,7313      36,4127
1    12,9468         19,5467        21,9396      34,2344
2    7,6811          16,7897        18,9646      32,5473
3    7,7565          16,7022        19,2343      32,8700
4    7,6634          16,9498        19,6307      32,8087 
```

此处提供的资源[GitHub](https://github.com/AlessandroBorges/IDX3D/tree/idx3d_Java6/source/idx3d/tests)

**但是，如果您需要range[-360..360]**的高性能，java.lang.Math 库会更慢。查找表 (LUT) 大约快 20 倍。如果需要高精度，可以使用带插值的 LUT，它比 java.lang.Math 慢一点，但仍然快。在上面的链接中查看我在 Math2.java 中的 sin2()。

以下数字用于角度高范围：

```
Size test: 10000000
Angles range: [-360.0...360.0]
Time in ms
Trial|Math.sin() | Lut sin() | LUT90.sin() | Lut.sin2() [interpolation]
0    942,7756        35,1488        47,4198      42,9466
1    915,3628        28,9924        37,9051      41,5299
2    430,3372        24,8788        34,9149      39,3297
3    428,3750        24,8316        34,5718      39,5187 
```

# facebook - Facebook 登录按钮 javascript

> ID：13460697
> 
> 赞同：2
> 
> 时间：2012-11-19T19:26:14.023
> 
> 标签：facebook, facebook-javascript-sdk, facebook-login, user-registration

我坚持使用 facebook 登录按钮，登录效果很好，但是当我通过 logout.php 从网站注销时，它让我在 facebook 按钮上登录（但从网站注销！）请帮助我..这里是代码

```
<div id="fb-root" style="display:none;"></div>
<script src="//connect.facebook.net/en_US/all.js"></script>
<script>
    (function(d, debug){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        ref.parentNode.insertBefore(js, ref);
        }(document, /*debug*/ false));

    window.fbAsyncInit = function() {
    FB.init({
        appId      : '<?php echo FACEBOOK_APP_ID; ?>',
        channelUrl : 'www.###.com', // Channel File for x-domain communication
        status     : true, // check the login status upon init?
        cookie     : true, // set sessions cookies to allow your server to access the session?
        xfbml      : true  // parse XFBML tags on this page?
    });
    FB.Event.subscribe('auth.login', function () {
        window.location = 'www.????????.com';
    });
</script>
    <fb:login-button autologoutlink='true' perms='email' length="short" size="medium">Log In with Facebook
    </fb:login-button> 
```

# python - YouTube API v3：用 Python 点赞视频

> ID：13460699
> 
> 赞同：3
> 
> 时间：2012-11-19T19:26:22.680
> 
> 标签：python, youtube-api

我需要能够通过新的 YouTube API v3 为经过身份验证的用户按 ID“喜欢”特定视频。我正在关注此处的活动/插入指南：

[https://developers.google.com/youtube/v3/docs/activities/insert](https://developers.google.com/youtube/v3/docs/activities/insert)

此示例代码可以很好地向我的频道发布公告，但是当我尝试修改正文以形成类似的声明时，我不断收到 400 错误。这是我从设置正文 dict 的原始示例更改的内容：

```
body = {}
body["snippet"] = dict(type='like')
body["contentDetails"] = dict(
    like=dict(
        resourceId=dict(
            kind="youtube#video",
            videoId='_M9khs87xQ8'
        )
    )
) 
```

根据以下文档，这些字段似乎设置正确。

[https://developers.google.com/youtube/v3/docs/activities](https://developers.google.com/youtube/v3/docs/activities)

但是我一直像这样得到 400 HttpEror

```
<HttpError 400 when requesting https://www.googleapis.com/youtube/v3/activities?alt=json&part=snippet%2CcontentDetails returned "Bad Request"> 
```

我也尝试过调整它以收藏视频动作，但得到相同的结果。我是否缺少一些必填字段？这是创建类似操作的正确端点吗？

在此先感谢，贾斯汀

# **更新**

杰夫已经回答了这个问题，工作解决方案发布在下面

```
for item in youtube.channels().list(part='contentDetails', mine=True).execute().get('items', []):
    playlists = item['contentDetails'].get('relatedPlaylists', {})
    if 'likes' in playlists:
        body = {
            "snippet": {
                "playlistId": playlists['likes'],
                "resourceId": {
                    "kind": 'youtube#video',
                    "videoId": '_M9khs87xQ8'
                }
            }
        }
        youtube.playlistItems().insert(body=body, part='snippet').execute() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:39:06.343

要“喜欢”v3 中的视频，您需要将其添加到特定的播放列表 ID。（您还可以阅读此播放列表以获取您之前“喜欢”的视频列表。）

正确调用 make 是一个`playlistItems.insert()`（即 POST 到`https://www.googleapis.com/youtube/v3/playlistItems`），请求正文如下：

```
"body": {
  "snippet": {
    "playlistId": LIKED_LIST_ID,
    "resourceId": {
      "kind": "youtube#video",
      "videoId": VIDEO_ID
    }
  }
} 
```

要插入的两个东西是`LIKED_LIST_ID`和`VIDEO_ID`。`VIDEO_ID`希望应该是不言自明的。`LIKED_LIST_ID`对应于发出 channels.list(part=contentDetails) 请求时返回的播放列表 ID。响应看起来像

```
"contentDetails": {
  "relatedPlaylists": {
    "likes": "LL0c49w3rVoFjTkQVbyRs8Sg",
    "favorites": "FL0c49w3rVoFjTkQVbyRs8Sg",
    "uploads": "UU0c49w3rVoFjTkQVbyRs8Sg",
    "watchHistory": "HL0c49w3rVoFjTkQVbyRs8Sg",
    "watchLater": "WL0c49w3rVoFjTkQVbyRs8Sg"
  }
} 
```

您可以插入其中一些其他播放列表 ID，例如，将视频添加为收藏夹或将其添加到帐户的稍后观看列表中。该代码与“喜欢”视频的代码相同。

# java - 调用java方法绘制图形

> ID：13460705
> 
> 赞同：1
> 
> 时间：2012-11-19T19:26:45.567
> 
> 标签：java, swing, graphics

我正在尝试在框架上绘制一些简单的图形。我还希望能够调整我从主要方法中绘制的内容。例如，设置要打印的字符串变量，或者矩形的坐标。

我似乎遇到的问题`paintComponent`是在我设置类变量之前调用了该方法。我将如何更改此代码以便能够在它绘制到屏幕之前设置`JPanel`/变量？`JFrame`

谢谢

```
import java.awt.*;
import javax.swing.*;

public class Test {

    public static void main(String[] args) {
        FrameTest test_frame = new FrameTest();
        test_frame.test_string = "I WANT TO DRAW THIS STRING";
    }
}

class FrameTest extends JFrame{
    private static final long serialVersionUID = 1L;
    String test_string;

    public FrameTest(){
        this.test_string = "TEMP STRING FROM FRAME";
        JFrame gui = new JFrame();
        gui.setTitle("Test Title");
        gui.setSize(400,400);
        gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Painting painting = new Painting();

        Container pane = gui.getContentPane();
        pane.setLayout(new GridLayout(1,1));

        pane.add(painting);
        gui.setVisible(true);

    }
}

class Painting extends JPanel{
    private static final long serialVersionUID = 1L;
    String test_string;

    public Painting(){
        setBackground(Color.WHITE);
        this.test_string = "TEMP STRING FROM PANEL";
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        g.setColor(Color.RED);
        g.drawString(test_string, 20, 20);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:36:37.810

在这里，您分配了一个字符串`test_string`，`FrameTest`其中不更新同名变量`Painting`：

```
test_frame.test_string = "I WANT TO DRAW THIS STRING"; 
```

为什么不添加更新方法，`FrameTest`因为您对此有参考：

```
public void setTestString(String test_string) {
    painting.setTestString(test_string);
} 
```

并致电：

```
FrameTest test_frame = new FrameTest();
test_frame.setTestString("I WANT TO DRAW THIS STRING"); 
```

注意：Java 使用 CamelCase，例如`testString`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T19:58:00.523

从 FrameTest 类中删除 test_string。直接使用 set 方法设置 test_string。参见示例：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.GridLayout;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class Test {

    public static void main(String[] args) {
        FrameTest1 test_frame = new FrameTest1();
        test_frame.setContentString("I WANT TO DRAW THIS STRING");
    }

}

class FrameTest1 extends JFrame {
    private static final long serialVersionUID = 1L;

    Painting painting = new Painting();

    public FrameTest1() {
        JFrame gui = new JFrame();
        gui.setTitle("Test Title");
        gui.setSize(400, 400);
        gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Container pane = gui.getContentPane();
        pane.setLayout(new GridLayout(1, 1));

        pane.add(painting);
        gui.setVisible(true);

    }

    public void setContentString(String value) {
        painting.test_string = value;
    }
}

class Painting extends JPanel {
    private static final long serialVersionUID = 1L;
    String test_string;

    public Painting() {
        setBackground(Color.WHITE);
        this.test_string = "TEMP STRING FROM PANEL";
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        g.setColor(Color.RED);
        g.drawString(test_string, 20, 20);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T19:44:19.847

您可以通过构造函数将要绘制的文本传递给绘画类，并以相同的方式将绘画传递给 FrameSet。

要了解有关 java 构造函数和参数的更多信息，请阅读以下内容： http: [//docs.oracle.com/javase/tutorial/java/javaOO/constructors.html](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)

我已经修改了你的代码来做你需要的，虽然我还没有测试过。

```
import java.awt.*;
import javax.swing.*;

public class Test {

    public static void main(String[] args) {
        Painting painting = new Painting("I WANT TO DRAW THIS STRING");
        FrameTest test_frame = new FrameTest(painting);
    }
}

class FrameTest extends JFrame{
    private static final long serialVersionUID = 1L;
    String test_string;

    public FrameTest(painting){
        super();
        this.test_string = "TEMP STRING FROM FRAME";
        JFrame gui = new JFrame();
        gui.setTitle("Test Title");
        gui.setSize(400,400);
        gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Container pane = gui.getContentPane();
        pane.setLayout(new GridLayout(1,1));

        pane.add(painting);
        gui.setVisible(true);

    }
}

class Painting extends JPanel{
    private static final long serialVersionUID = 1L;
    String test_string;

    public Painting(String test_string){
        super();
        this.test_string = test_string;
        setBackground(Color.WHITE);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        g.setColor(Color.RED);
        g.drawString(test_string, 20, 20);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T22:42:48.987

> 例如，设置要打印的字符串变量，或者矩形的坐标。

创建一个`BufferedImage`in `main(String[])`，有一个方法`Painting.setImage(Image)`，在一个中显示图像`JLabel`。

这是更通用的，因为它可以接受字符串的图像，或椭圆的图像，或在渐变 BG 上的椭圆的一部分上的字符串的图像。

## 显示许多图像

![许多（OK 3）图像](../Images/9087d2d94f3f77169e73b6a6dc3f587e.png)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
import javax.swing.border.EmptyBorder;
import java.util.Random;

public class ImageViewer {

    JPanel gui;
    /** Displays the image. */
    JLabel imageCanvas;

    /** Set the image as icon of the image canvas (display it). */
    public void setImage(Image image) {
        imageCanvas.setIcon(new ImageIcon(image));
    }

    public void initComponents() {
        if (gui==null) { 
            gui = new JPanel(new BorderLayout());
            gui.setBorder(new EmptyBorder(5,5,5,5));
            imageCanvas = new JLabel();

            JPanel imageCenter = new JPanel(new GridBagLayout());
            imageCenter.add(imageCanvas);
            JScrollPane imageScroll = new JScrollPane(imageCenter);
            imageScroll.setPreferredSize(new Dimension(300,100));
            gui.add(imageScroll, BorderLayout.CENTER);
        }
    }

    public Container getGui() {
        initComponents();
        return gui;
    }

    public static Image getRandomImage(Random random) {
        int w = 100 + random.nextInt(400);
        int h = 50 + random.nextInt(200);
        BufferedImage bi = new BufferedImage(
                w,h,BufferedImage.TYPE_INT_RGB);

        return bi;
    }

    public static void main(String[] args) throws Exception {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                JFrame f = new JFrame("Image Viewer");
                // TODO Fix kludge to kill the Timer
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                final ImageViewer viewer = new ImageViewer();
                f.setContentPane(viewer.getGui());

                f.pack();
                f.setLocationByPlatform(true);
                f.setVisible(true);

                ActionListener animate = new ActionListener() {

                    Random random = new Random();

                    @Override
                    public void actionPerformed(ActionEvent arg0) {
                        viewer.setImage(getRandomImage(random));
                    }
                };
                Timer timer = new Timer(1500,animate);
                timer.start();
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

# eclipse - Avrdude 配置 linux

> ID：13460709
> 
> 赞同：3
> 
> 时间：2012-11-19T19:26:56.157
> 
> 标签：eclipse, avr, avrdude, ubuntu-12.10

我正在尝试 ubuntu 12.10。我想使用 Eclipse IDE + avrdude。问题是，我有一个自定义的 ft232rl 程序员，它不包含在标准的 avrdude 配置中。在Windows中我会添加

```
#FTDI_Bitbang
programmer
  id    = "ftbb";
  desc  = "FT232R Synchronous BitBang";
  type  = ft245r;
  miso  = 3;  # CTS(11 PIN FT232R) 
  sck   = 5;  # DSR(9 PIN FT232R)
  mosi  = 6;  # DCD(10 PIN FT232R)
  reset = 7;  # RI (6 PIN FT232R)
; 
```

这对 avrdude.conf 并且它会正常工作。但是当我想将它与 AVR Eclipse 插件一起使用时，它不会在 project-properties-avr-avrdude “new”按钮中显示任何可用的配置。我按下按钮，没有任何反应。如果我撤消 avrdude.conf 中的更改，它会显示可用程序员列表等。

那么如何至少从终端使用 avrdude 和自定义程序员。如果可能的话，如何在eclipse中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:31:48.293

我`/etc/avrdude.conf`在 Ubuntu 上有这个配置：

```
programmer
  id    = "ftdi";
  desc  = "SparkFun FTDI Basic Breakout";
  type  = ft232r;
  miso  = 1;  # RXD
  sck   = 3;  # CTS
  mosi  = 0;  # TXD
  reset = 4;  # DTR
; 
```

我认为您应该在同一个文件中使用您的配置。

注意：AFAIK avrdude 不支持在没有一些补丁的情况下使用基于 ft232 的设备进行 bitbanging，我按照本[教程从源代码构建它](http://doswa.com/2010/08/24/avrdude-5-10-with-ftdi-bitbang.html)

# windows - 在 Windows 上为 Apache 2.2 配置 SSL

> ID：13460710
> 
> 赞同：2
> 
> 时间：2012-11-19T19:27:00.900
> 
> 标签：windows, apache, tomcat, ssl

我是配置 apache 的新手，我正在尝试将其配置为使用 ssl。这是我的配置文件。

httpd.conf 文件：我取消了以下行的注释：

```
LoadModule ssl_module modules/mod_ssl.so
Include conf/extra/httpd-ssl.conf 
```

这是我的 httpd-ssl 文件：

```
Listen 443

AddType application/x-x509-ca-cert .crt
AddType application/x-pkcs7-crl    .crl

SSLPassPhraseDialog  builtin

SSLSessionCache        "shmcb:C:/Program Files/Apache Software    Foundation/Apache2.2/logs/ssl_scache(512000)"
SSLSessionCacheTimeout  300

SSLMutex default

##
## SSL Virtual Host Context
##

    <Directory "c:/tracker">
   Order Deny,Allow
   Allow from all
   AllowOverride all
</Directory>

<virtualHost *:443> 
  SSLEngine on
  SSLCertificateFile "C:/keys/myco.biz.cert"
  SSLCertificateKeyFile "C:/keys/myco.biz.key"

 ServerName myco.biz
 ServerAlias myco.biz
 ServerAdmin test@test.net
 DirectoryIndex index.cfm index.html index.htm
 DocumentRoot "c:/tracker"
 # here comes the proxy details!!!
 ProxyRequests on    
<proxy *>
    Order deny,allow
    Allow from all
</proxy>
ProxyPass / ajp://localhost:8109/
ProxyPassReverse / ajp://localhost:8109/ 
```

这是我在 Tomcat 中的 server.xml 文件：

```
<Connector port="8180" protocol="HTTP/1.1"
           connectionTimeout="20000"
           redirectPort="8443" />

<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
           clientAuth="false" sslProtocol="TLS" />

<!-- Define an AJP 1.3 Connector on port 8109 -->
<Connector port="8109" protocol="AJP/1.3" redirectPort="8443" enableLookups="false" /> 
```

使用此配置，我可以重新启动 apache。但我无法访问我的网站。我在 chrome 中收到一个无响应的服务器错误。

如果我从 httpd-ssl 文件中取出配置并将其放入 httpd-vhosts 并将端口从 443 更改为端口 80。我能够访问该站点。但它不是 ssl 连接。非常感谢任何帮助。我在 apache 或 Windows 事件查看器中的错误日志中没有任何错误。

我在服务器上运行 Windows server 2003 R2。我还使用 openssl 生成了我的证书和密钥文件。我没有任何与证书相关的错误。

关于我所缺少的任何想法或建议？

谢谢

# 3d - 给定原点和半径，如何确定 p(x,y,z) 是否在圆环内？

> ID：13460711
> 
> 赞同：5
> 
> 时间：2012-11-19T19:27:04.623
> 
> 标签：3d, lua, geometry

我试图在块游戏中创建一个 3D 圆环，所以我需要评估一系列坐标以查看它们是否在圆环内。我用球体做的方式是：

```
shapefunc = function (pos,fields)
  map = {}
  pos.x = math.floor(pos.x+0.5)
  pos.y = math.floor(pos.y+0.5)
  pos.z = math.floor(pos.z+0.5)

  for x=-fields.radius,fields.radius do
    for y=-fields.radius,fields.radius do
      for z=-fields.radius,fields.radius do
        if x*x+y*y+z*z <= fields.radius*fields.radius then
          table.insert(map,{x=pos.x+x,y=pos.y+y,z=pos.z+z})
        end
      end
    end
  end
  return map
end 
```

给定高度（在 y 轴上）、小半径和大半径（在 xz 轴上）和原点，我尝试过的评估表达式都没有给我任何接近圆环的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:04:13.227

据此，[这](https://groups.google.com/forum/?fromgroups=#!topic/comp.soft-sys.math.mathematica/jXf71566HVU)是一个测试表达式符号的问题：

(x^2+y^2+z^2-(a^2+b^2))^2 - 4*a*b*(b^2-z^2)

其中点为 {x,y,z}，环面的小半径为 b，大半径为 a。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-26T15:45:07.883

上面的公式对我不起作用。考虑 b = 0，公式应该减少为一个圆圈，而实际上在接受的答案中它减少为一个球体。

根据我的计算，您必须测试表达式的符号

(x^2+y^2+z^2+a^2-b^2)^2-4a^2(x^2+y^2)

其中点为 {x,y,z}，环面的小半径为 b，大半径为 a。

编辑：等效地，并且更接近于原始接受的答案，表达式将是

(x^2+y^2+z^2-(a^2+b^2))^2-4a^2(b^2-z^2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-19T17:27:00.427

保罗的解决方案对我不起作用。相反，我在 Python 中提出了这个简单的工作解决方案：

```
def INSIDE_TORUS(p):
    angle_xy = np.arctan2(p[1], p[0])
    p = [p[0] - TOROIDAL_RADIUS * np.cos(angle_xy), p[1] - TOROIDAL_RADIUS * np.sin(angle_xy), p[2]]
    return -POLOIDAL_RADIUS <= np.linalg.norm(p) <= POLOIDAL_RADIUS 
```

其中`TOROIDAL_RADIUS`是大半径，`POLOIDAL_RADIUS`是小半径。假设环面以原点为中心，其主要半径位于 XY 平面内。

它的工作原理是通过减去主半径矢量简单地将小圆“拉回”到原点。然后我们可以检查该点`p`是否在小圆内。

为此，首先使用 计算 XY 平面中的角度`np.arctan2(y, x)`。

# html - html单选按钮与div对齐

> ID：13460715
> 
> 赞同：0
> 
> 时间：2012-11-19T19:27:26.170
> 
> 标签：html

我有两个单选按钮和两张地图。我想在每张地图下方显示每个单选按钮。地图应该并排显示。我试过但没有成功。单选按钮出现在不相关的位置。请你帮助我好吗 ？

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta name="viewport" content="inital-scale=1.0 , user-scalable=no" />
     <script src="http://maps.googleapis.com/maps/api/js?&sensor=false"></script>

            <script >
            function initialize() {

                var fenway = new google.maps.LatLng(48.1391265, 11.580186300000037);

                var mapOptions = {
                    zoom: 10,
                    center: fenway,
                    mapTypeId: google.maps.MapTypeId.ROADMAP

                };

                var map= new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
              var map2= new google.maps.Map(document.getElementById("map_canvas2"),mapOptions);

            }
        </script>
    </head>

    <body onload="initialize()">

      <form >

        <div class="left-div" id="map_canvas" style="width: 500px; height: 500px;"></div>
        <input type="radio" name="A" id="choice1" value="c1" >A:
        <label for="choice1" >
        </label><br>

     <label for="choice2" >
          <input type="radio" name="B" id="choice2" value="c2" >B:
          <div class="right-div" id="map_canvas2" style="width: 500px; height: 500px;"></div>

        </label><br>

    </form> 
```

这是CSS

```
.left-div {
    float: left;
    margin-right: 8px;

}
.right-div {
    margin-left: 508px;

}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:49:40.457

我会几乎完全重写 html（你有一些奇怪的排序，两张地图之间没有一致性）

你想要做的是这样的：

```
<form>
    <div class="leftdiv>
        <div id="map1"></div>
        <input type="radio">A:
    </div>
    <div class="rightdiv">
        <div id="map2"></div>
        <input type="radio">B:<br>
    </div>
</form> 
```

我会把细节和 CSS 留给你去解决......祝你好运:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:59:37.960

我想这将达到目的。我使用了 4 个 div 并将它们以固定宽度向左浮动。（[演示](http://jsfiddle.net/ZZUUE/)）

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="inital-scale=1.0 , user-scalable=no" />
 <script src="http://maps.googleapis.com/maps/api/js?&sensor=false"></script>

        <script >
        function initialize() {

            var fenway = new google.maps.LatLng(48.1391265, 11.580186300000037);

            var mapOptions = {
                zoom: 10,
                center: fenway,
                mapTypeId: google.maps.MapTypeId.ROADMAP

            };

            var map= new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
          var map2= new google.maps.Map(document.getElementById("map_canvas2"),mapOptions);

        }
    </script>
</head>

<body onload="initialize()">

  <form >

    <div style="width:500px; float:left; height:600px" id="map_canvas"></div>
    <div style="width:500px; float:left; height:50px">     
    <input type="radio" name="A" id="choice1" value="c1" >A:<label for="choice1"></label><br>
    </div>
    <div style="width:500px; height:600px; float:left" id="map_canvas2"></div>
    <div style="width:500px; float:left; height:50px">          
    <label for="choice2" ><input type="radio" name="B" id="choice2" value="c2" >B:</label>
    </div>
</form> 
```

​</p>

# javascript - Adobe PhoneGap 和 Appcelerator Titanium 有替代品吗？

> ID：13460717
> 
> 赞同：0
> 
> 时间：2012-11-19T19:27:34.420
> 
> 标签：javascript, html, cordova

我只想要一个框架，它允许我使用 HTML5 构建至少适用于 iOS 和 Android 的跨平台应用程序。我在这里遇到的问题是我无法为 iOS 构建 PhoneGap 或 Appcelerator Titanium 应用程序，因为我没有 99 美元的开发者订阅。我将来可能有一个，但现在我不能。有没有类似这些框架不需要iOS序列的东西？**我不想使用不需要编码的在线工具之一。**最好是 PhoneGap 之类的东西，这样我就可以访问手机的一些传感器，例如 GPS 和相机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:45:54.870

如果您想在 App Store 中发布，您需要一个开发者帐户。为了进入 App Store，您的应用程序必须首先通过 Apple 的内部审批流程，并且您只有在拥有帐户的情况下才能申请该审批。

*没有*您自己的帐户在 App Store 中发布的唯一方法是使用*其他人的*帐户（例如，在朋友的帐户下发布）。任何发布服务都不太可能让您搭载他们的帐户：如果您尝试发布恶意代码并让他们的帐户与 Apple 发生问题怎么办？

如果您不需要在 App Store 中发布，您未经批准的 iOS 应用仍然可以在越狱设备上运行。如果您确实想在 App Store 中拥有您的应用程序，您必须获得一个帐户。

# android - 重置 TextView 值 onPause()

> ID：13460727
> 
> 赞同：0
> 
> 时间：2012-11-19T19:28:29.050
> 
> 标签：android, android-edittext

我创建了一个由 2 EditText（用户名、密码）和一个按钮表示的登录应用程序。当我单击登录时，它当然会检查信息，如果错误，它会打印一个带有重试按钮的对话框。当我回到登录活动时，旧的用户名和密码文本仍然存在，我想重置它。我尝试在 onPause() 方法上执行此操作，因为当错误对话框弹出时会生成 onPause() 方法但我失败了。

任何的想法？谢谢。

编辑：根据您的建议，我决定重新安排我的代码并按应有的方式声明 EditText。结果还是一样=\

```
public class MainActivity extends Activity 
{
    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";
    private EditText username,password;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    this.username = (EditText)findViewById(R.id.username);
    this.password = (EditText)findViewById(R.id.password);
}
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
@Override
public void onPause()
{
    this.username.setText("");
    this.password.setText("");

    super.onPause();
}
public void showMsg(View view)
{
    String user = this.username.getText().toString();
    String pass = this.password.getText().toString();

    if(user.equals("a") && pass.equals("a"))
    {
        Intent i1 = new Intent(this,DisplayMessageActivity.class);
        i1.putExtra(EXTRA_MESSAGE, user);
        startActivity(i1);
    }
    else
    {   
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Error!");
        builder.setMessage(R.string.failure);
        builder.setPositiveButton("Try again", null);
        builder.show();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:30:52.410

> 我尝试在 onPause() 方法上执行此操作，因为当错误对话框弹出时会生成 onPause() 方法但我失败了。

我不知道这意味着什么，但您应该能够执行以下操作：

```
@Override
protected void onPause() {
    editText.setText("");
    super.onPause();
} 
```

如果这不能帮助指导您，您需要发布您尝试过的内容和 LogCat 错误。否则我们将无能为力...

* * *

**加法**
当用户名和密码组合错误时，您实际上并没有离开 Activity，因此`onPause()`永远不会被调用。试试这个：

```
public void showMsg(View view)
{
    String user = this.username.getText().toString();
    String pass = this.password.getText().toString();
    this.username.setText("");
    this.password.setText(""); 
```

或者，如果您只想清除 else 块（创建 AlertDialog 的位置）中的用户名和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:31:40.633

单击按钮后，您可以设置一个空的 EditText：

```
editText.setText(""); 
```

或尝试在 xml 中设置提示属性：

```
android:hint="Enter Name" 
```

# grails - Grails 资源 - 无法在布局中添加 r.script？

> ID：13460733
> 
> 赞同：1
> 
> 时间：2012-11-19T19:28:45.500
> 
> 标签：grails, grails-2.0

我制作了一个脚本，根据当前的请求语言环境加载内容。就像是

```
class ScriptsTagLib {
  static namespace = "my"
  def loadLangInfo = { attrs ->
    Locale locale = RequestContextUtils.getLocale(request)
    r.script() {
      out << '$(function(){ loadLangInfo("'+locale.language+'") });'
    }
  }
} 
```

如果我在布局中添加它，页面会抛出错误：

> 在第 [6] 行评估表达式 [my.loadLangInfo()] 时出错：无法将需要处置 [defer] 的模块 [-page-fragments-] 添加到此请求 - 该处置已被呈现。
> 
> 错误 2012-11-19 15:13:54,801 [http-bio-8080-exec-5] 错误 [Tomcat].[localhost] - 异常处理 ErrorPage[errorCode=500, location=/grails-errorhandler] 消息：java。 io.UnsupportedEncodingException: 不支持字符编码 [null]

但是如果我在我的页面而不是布局中添加这个标签，页面就会成功呈现。

不能添加`r.script()`到布局？

**编辑：**问题实际上出在布局中的资源上。另一个失败的例子是：

```
<g:layoutHead/>
<r:script>
$(function(){ });
</r:script>
<r:layoutResources /> 
```

**编辑 2：**有关上下文的更多信息

*   圣杯 2.0.4
*   资源 1.2.RC2

此外，它是插件内部的布局，而不是一个应用程序。

未在 Grails 2.1 中测试，但会这样做。

**编辑 3**：

刚刚测试，`Grails 2.1.1`新`Grails 2.0.4`的**插件项目**，布局中的脚本标签被忽略了！

./views/layout/test.gsp -> 脚本被忽略

```
<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title><g:layoutTitle default="Insoft4 UI Plugin"/></title>
        <g:layoutHead/>

        <r:layoutResources />
    </head>
    <body>
        <g:layoutBody/>
        <r:script disposition="defer">
            alert('layout!');
        </r:script>
        <r:layoutResources />
    </body>
</html> 
```

./views/index.gsp -> 脚本确定

```
<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Teste</title>
        <meta name="layout" content="teste" />
                <r:script disposition="defer">
            alert('index!');
        </r:script>
        <r:layoutResources />
    </head>
    <body>
        <h1>Testing this index!</h1>
        <r:layoutResources />
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T11:10:56.410

我发现当您`<r:layoutResources />`在布局和页面中都声明并尝试在布局中添加脚本时会出现问题。

为了更正，我`layoutResources`从每个视图中删除了，只保留在布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:56:51.017

尝试在布局的最后一个 r:layoutResources 之前添加标签。

# asp.net - 使用 stringbuilder 作为存储过程的参数并返回数据集

> ID：13460736
> 
> 赞同：0
> 
> 时间：2012-11-19T19:29:09.807
> 
> 标签：asp.net, dataset, sqldatareader

我有几个问题与将多个值传递给存储过程的参数之一以及返回转换为数据集以便将其绑定到 MS ReportViewer 的结果有关。

我收到的错误表明阅读器已关闭。

我的相关代码片段是：

```
 Dim _listOfSites As New StringBuilder()
    Dim _resultDataSet As DataSet = New DataSet

    Using _conn as New SqlConnection()

     _conn.ConnectionString = _connString

       Try

          For i as Integer = 0 To _sites.Count - 1
            _listOfSites.Append(_sites(i))
              If _sites.Count > 1 Then
                _listOfSites.Append(",")
              End If
          Next

          _conn.Open()

          Dim _sqlCommand as SqlCommand = New SqlCommand("GetResults", _conn)

          _sqlCommand.Parameters.Add("@Sites", SqlDbType.Varchar).Value = _listOfSites
          _sqlCommand.Parameters.Add("@Date", SqlDbType.Date).Value = _date

         Dim _reader as SqlDataReader = _sqlCommand.ExecuteReader

         While _reader.Read
               _resultDataSet.Load(_reader, LoadOption.PreserveChanges, New String() {"RegionalResults"})
         End While
         _reader.Close() 
```

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:30:35.787

看起来你不应该调用 _reader.Read ，因为 _resultDataSet.Load 自己做，它可以关闭 SqlDataReader。所以而不是

```
 Dim _reader as SqlDataReader = _sqlCommand.ExecuteReader

 While _reader.Read
           _resultDataSet.Load(_reader, LoadOption.PreserveChanges, New String() {"RegionalResults"})
 End While
 _reader.Close() 
```

写吧

```
 Using  _reader as SqlDataReader = _sqlCommand.ExecuteReader
      _resultDataSet.Load(_reader, LoadOption.PreserveChanges, New String() {"RegionalResults"})
 End Using 
```

希望有帮助

# asp.net - RadioButtonList SelectedIndexChanged 通用事件未触发

> ID：13460740
> 
> 赞同：0
> 
> 时间：2012-11-19T19:29:29.707
> 
> 标签：asp.net, asp.net-4.0

开发了一个稍微动态的页面，该页面基于数据库中的信息构建了一个问答页面。一切都很好，除了我无法让 RadioButtonList 事件触发一个次要的 MsgBox 响应来验证对象发送者和选定的 ListItem 信息。

### Page_Load

```
 If Not Page.IsPostBack Then
        With Globals.tst

            .GetBrandInformation(Page.RouteData.Values("brand"),
              Page.RouteData.Values("year"),
              Page.RouteData.Values("month"))

            'Load up Question DataSet
            For Each quest As Question In .Questions

                Dim tr As New HtmlControls.HtmlTableRow
                Dim td As New HtmlControls.HtmlTableCell
                td.Attributes.Add("class", "tdQ")       'Add class attribute to <td> element, creating 'class="tdQ"'
                Dim lbl As New Label
                lbl.ID = "lbl" & quest.ID
                lbl.Text = quest.Text

                td.Controls.Add(lbl)
                tr.Cells.Add(td)
                tblContent.Rows.Add(tr)

                tr = New HtmlControls.HtmlTableRow
                td = New HtmlControls.HtmlTableCell
                td.Attributes.Add("class", "tdA")       'Add class attribute to <td> element, creating 'class="tdA"'

                Dim rbl As New RadioButtonList
                rbl.ID = "rblT" & .ID & "_Q" & quest.ID
                AddHandler rbl.SelectedIndexChanged, AddressOf rbl_SelectedIndexChanged     'Attach generic event handler to control

                Dim li As New ListItem

                'Load up Answer Dataset
                For Each answ As Answer In quest.Answers
                    li.Text = answ.Value
                    li.Value = "T" & .ID & "-Q" & quest.ID & "-A" & answ.ID & "-C" & answ.Correct

                    'Add built ListItem to RadioButtonList
                    rbl.Items.Add(li)
                    li = New ListItem
                Next

                td.Controls.Add(rbl)
                tr.Cells.Add(td)
                tblContent.Rows.Add(tr)
            Next

        End With
        '
    End If 
```

下面是我试图附加到 RadioButtonList(s) 的通用事件处理程序逻辑。

```
Protected Sub rbl_SelectedIndexChanged(sender As Object, e As EventArgs)
    MsgBox(CType(sender, RadioButtonList).ID & " Clicked.")
    MsgBox("Radio Button Selected: " & CType(sender, RadioButtonList).ID & " is Correct? " & CType(sender, RadioButtonList).SelectedValue)
End Sub 
```

任何人都看到设计有任何问题，或者知道为什么没有触发事件？

### 2012-11-20 编辑

好的，更改了`rbl`要执行的对象，`AutoPostBack = true`但这使生活更加难以忍受；）然后迅速恢复为我的问答列表是在问题和答案中随机生成的，因此最终用户将在每次点击时获得新的随机问题顺序的列表项。

尽管我从回调中得到了一些响应，但仍然没有通过使用定义的 JavaScript 文件或内联`Response.Write`/得到我期望的 JavaScript 响应`ClientScript.Register`。

在内容页面中创建了一个调试方法：

```
Public Shared Sub Show(msg As String, Optional pg As Page = Nothing)
    Dim cmsg As String = msg.Replace("'", "\'")
    Dim scr As String = "<script type=""text/javascript"">alert('" & cmsg & "');</script>"

    If pg Is Nothing Then
        pg = CType(HttpContext.Current.CurrentHandler, Page)
    End If

    If (pg IsNot Nothing) And Not (pg.ClientScript.IsClientScriptBlockRegistered("alert")) Then
        pg.ClientScript.RegisterClientScriptBlock(GetType(Alert), "alert", scr)
    End If
End Sub 
```

在页面加载此方法按预期触发，但当放置在 SelectedIndexChanged 事件中时，它永远不会触发。

仍然对为什么它适用于一般执行而不是触发执行感到困惑。

适合那些喜欢创建实现 Javascript 的 .Net 方法的用户的有用方法。[.Net Slave - Javascript Alert.Show 类](http://madskristensen.net/post/JavaScript-AlertShow(e2809dmessagee2809d)-from-ASPNET-code-behind.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:01:47.027

你必须把它从`If Not Page.IsPostBack Then`

这是因为当您进行回发时，...

```
 AddHandler rbl.SelectedIndexChanged, AddressOf rbl_SelectedIndexChanged 
```

...需要反弹才能发射。

所以基本上，删除`If Not Page.IsPostBack Then`and `End If`。

哦，还要摆脱`MsgBox()`代码 - 这会杀死页面做任何事情。如果要输出`Alert()`然后执行以下操作：

```
 Dim script As String = String.Format("alert('{0}');", ""Radio Button Selected: " & CType(sender, RadioButtonList).ID & " is Correct? " & CType(sender, RadioButtonList).SelectedValue")
    page.ClientScript.RegisterClientScriptBlock(page.[GetType](), "alert", script, True) 
```

**更新：**

你还想`AutoPostback = true;`在你的 RBL 上设置。这告诉页面一旦改变就回发。处理程序仅在`AutoPostBack`为真时触发。

# php - PHP中变量的默认值？

> ID：13460744
> 
> 赞同：8
> 
> 时间：2012-11-19T19:29:40.180
> 
> 标签：php

我对此进行了搜索，但找不到我的问题的答案。

当一个变量被声明时没有值，像这样：

```
$var;
public $aVar; 
```

变量的值是未知的，就像在许多语言中一样（即之前在内存中的任何内容），还是默认设置为变量`null`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T19:30:49.787

默认情况下，声明没有值的变量和未定义/未声明的变量`null`。

但是，仅做`$var;`不会声明变量，因此您只能在对象中声明没有值的变量。

演示：

```
<?php
class Test { public $var; }
$var;
$t = new Test();
var_dump($var);
var_dump($t->var); 
```

输出：

```
Notice: Undefined variable: var in - on line 5
NULL
NULL 
```

# javascript - 从 responseText 中获取特定内容

> ID：13460745
> 
> 赞同：6
> 
> 时间：2012-11-19T19:29:44.040
> 
> 标签：javascript, xmlhttprequest, element, responsetext

我正在进行 ajax 调用，并从`responseText`.

我通过`alert`在里面使用它来确认，它`responseText`包含整个页面作为`string`.

没关系。现在我需要通过将字符串转换为 DOM 并使用等从字符串中提取特定`getElementsByTagName`内容`getElementsByName`...

我的问题是这些似乎都不起作用。

我已经阅读了很多关于使用`responseXML`而不是的参考资料，`responseText`但这让我回来了`null`。

那么，通过坚持`responseText`，我怎样才能得到我想要的特定元素呢？

例如，如果我的回复包含以下内容：

```
<html>
<head>....</head>
<body>....
 .....
 <table>
 <tr>
 <td>sometext</td>
 <td>someothertext</td>
 </tr>
 <tr>
 <td>sometext</td>
 <td>someothertext</td>
 </tr>
 <tr>
 <td>sometext</td>
 <td>someothertext</td>
 </tr>    
 </table> 
 <div> somediv </div>
 </body>
 </html> 
```

如何访问表格的第二行及其值？或 div 等。所以，现在在我的实际 html 中，我有这样的东西

```
<html>
<head>.....</head>
<body>
<table><tr><td id="test">Test</td></tr></table>
</body>
</html> 
```

我希望在我的实际 html 表中解析提取的元素/值。

document.getElementById('test').innerHTML = the_extracted_elements_from_responseText

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T19:34:15.803

您需要`DOMParser`在 html 上使用 a 并在结果文档上使用 DOM 遍历方法以返回所需的节点。

```
 var parser=new DOMParser();
  var xmlDoc=parser.parseFromString(responseText,"text/xml");
  var tds = xmlDoc.getElementsByTagName("td"); 
```

请注意，IE 将需要`new ActiveXObject("Microsoft.XMLDOM");`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-02T02:50:01.930

创建变量数组并进行推送。

```
const result = [];
for(let i = 1; i < ?? ; i++) {
const test = document.getElementById('test').innerHTML;
result.push({ test })
}
return { result }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-18T06:38:39.860

试试这个：

```
var temp = document.createElement('div');
temp.innerHTML = xhr.responseText;//xhr is your own xhr obj
//select the element u want, such as the follow one
var foo = temp.querySelector('#foo'); 
```

# c# - 不正确的双精度到整数转换

> ID：13460748
> 
> 赞同：1
> 
> 时间：2012-11-19T19:29:57.617
> 
> 标签：c#, type-conversion

我真的很抱歉问这么简单的问题，但我真的不知道是什么问题。我想将任何标记转换为 12 年级量表。我正在尝试如下：

```
double coef=(4/20)*12;
int mark=(int)coef; 
```

但是当我通过调试器执行这段代码时，我看到它`coef`等于零。为什么这是双变量？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-19T19:31:35.863

因为即使您*将*结果分配给一个`double`值，*计算*也是使用整数执行的。而`4 / 20`在 C# 的整数算术中是`0`. 所以你需要类似的东西

```
double coef = 4.0 / 20 * 12; 
```

`4.0`确保其余计算使用s `double`。但通常将所有数字明确化实际上是一个好习惯，这样读者就不必了解类型转换规则：

```
double coef = 4.0 / 20.0 * 12.0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:31:27.313

在需要转换之前，它是整数除法......

```
4/20 = 0
0 * 12 = 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T19:35:52.207

另一种选择是：

```
4 * 12 / 20; 
```

但是请注意，结果将被截断为 2（因为这仍然是整数除法），这没关系，因为这就是你的演员`int`无论如何都会做的。

另外，请注意，转换为`int`将截断，而不是四舍五入。`Math.Round`如果您想实际舍入结果，请使用。这与您提供的数字没有区别，但我认为您实际上不会只使用这些常量！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T19:31:30.360

您首先进行整数除法，然后乘以 12。

当你这样做时：

```
(4/20) 
```

计算结果为 0，因为它们都是整数。

通过以下方式将其修改为明确声明双打：

```
double coef = (4.0 / 20.0) * 12; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T19:32:04.580

尝试

```
double coef = (4.0/20.0)*12; 
```

然后

```
int mark = (int)coef; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-19T19:32:06.350

代码中所有的常量都是整数，4/20的结果，作为整数，是0。

您需要将其重写为：

```
(4.0/20.0)*12.0; 
```

# c++ - 在 std::abs 函数上

> ID：13460750
> 
> 赞同：21
> 
> 时间：2012-11-19T19:29:59.467
> 
> 标签：c++, c++11, standards-compliance, absolute-value

该`std::abs()`函数是否为 C++11 中的所有算术类型定义良好，并且返回`|x|`时不会出现近似问题？

奇怪的是，使用 g++4.7, `std::abs(char)`, `std::abs(short int)`, `std::abs(int)`, `std::abs(long int)`and`std::abs(long long int)`似乎返回一个双精度值（相反：[http](http://en.cppreference.com/w/cpp/numeric/math/abs) ://en.cppreference.com/w/cpp/numeric/math/abs ）。如果将数字转换为双精度数，对于非常大的数字（如`-9223372036854775806LL = 2^63-3`），我们可能会有一些近似误差。

那么我是否有保证`std::abs(x)`将始终返回`|x|`所有算术类型？

编辑：这是一个进行一些测试的示例程序

```
#include <iostream>
#include <iomanip>
#include <cmath>
#include <typeinfo>

template<typename T>
void abstest(T x)
{
    static const unsigned int width = 16;
    const T val = x;
    if (sizeof(val) == 1) {
        std::cout<<std::setw(width)<<static_cast<int>(val)<<" ";
        std::cout<<std::setw(width)<<static_cast<int>(std::abs(val))<<" ";
    } else {
        std::cout<<std::setw(width)<<val<<" ";
        std::cout<<std::setw(width)<<static_cast<T>(std::abs(val))<<" ";
    }
    std::cout<<std::setw(width)<<sizeof(val)<<" ";
    std::cout<<std::setw(width)<<sizeof(std::abs(val))<<" ";
    std::cout<<std::setw(width)<<typeid(val).name()<<" ";
    std::cout<<std::setw(width)<<typeid(std::abs(val)).name()<<std::endl;
}

int main()
{
    double ref = -100000000000;
    abstest<char>(ref);
    abstest<short int>(ref);
    abstest<int>(ref);
    abstest<long int>(ref);
    abstest<long long int>(ref);
    abstest<signed char>(ref);
    abstest<signed short int>(ref);
    abstest<signed int>(ref);
    abstest<signed long int>(ref);
    abstest<signed long long int>(ref);
    abstest<unsigned char>(ref);
    abstest<unsigned short int>(ref);
    abstest<unsigned int>(ref);
    abstest<unsigned long int>(ref);
    abstest<unsigned long long int>(ref);
    abstest<float>(ref);
    abstest<double>(ref);
    abstest<long double>(ref);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-19T19:41:04.830

保证正确的重载出现在`<cmath>`/中`<cstdlib>`：

C++11，[c.math]：

> 除了`int`中某些数学函数的版本之外`<cstdlib>`，C++ 还添加`long`和`long long`重载了这些函数的版本，具有相同的语义。
> 
> 添加的签名是：
> 
> ```
> long abs(long);            // labs()
> long long abs(long long);  // llabs() 
> ```
> 
> [...]
> 
> 除了`double`中的数学函数的版本之外`<cmath>`，这些函数的重载版本具有相同的语义。C++ 添加`float`和`long double`重载了这些函数的版本，具有相同的语义。
> 
> ```
> float abs(float);
> long double abs(long double); 
> ```

因此，您应该确保正确包含`<cstdlib>`( `int`, `long`,`long long`重载)/ `<cmath>`( `double`, `float`,`long double`重载)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T19:40:47.287

您不能保证`std::abs(x)`始终返回`|x|`所有算术类型。例如，大多数有符号整数实现比正数多一个负数的空间，所以结果`abs(numeric_limits<int>::min())`将不等于`|x|`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:36:21.013

检查您实际上使用的是`std::abs`from`<cstdlib>`而不是`std::abs`from `<cmath>`。

PS。哦，刚刚看到示例程序，好吧，你去吧，你正在使用`std::abs` .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T13:09:39.460

当您将`std::abs`from`<cmath>`与整数类型一起使用时，g++（使用 C++11 标准）返回双精度并不奇怪：来自[http://www.cplusplus.com/reference/cmath/abs/](http://www.cplusplus.com/reference/cmath/abs/)：

> 自 C++11 起，在此标头 ( `<cmath>`) 中为整数类型提供了额外的重载：这些重载在计算之前有效地将 x 强制转换为 double （为 T 定义为任何整数类型）。

这实际上是这样实现的`/usr/include/c++/cmath`：

```
template<typename _Tp>
inline _GLIBCXX_CONSTEXPR
typename __gnu_cxx::__enable_if<__is_integer<_Tp>::__value,
                                double>::__type
abs(_Tp __x)
{ return __builtin_fabs(__x); } 
```

# java - byte[] InputStream 转换为 String

> ID：13460753
> 
> 赞同：0
> 
> 时间：2012-11-19T19:30:06.030
> 
> 标签：java, inputstream

这是我的情况：我正在使用一个库来从存储库中读取文件（我无法修改该库），该库有一个`getContent`返回字符串的方法（它用于`BasicResponseHandler`将响应转换为字符串），但是存储库也包含二进制文件，我需要`bytes[]`将其保存为文件。我尝试使用 `content.getBytes("UTF-8")`它，它适用于文本文件，但对于图像等其他文件，我得到一个损坏的文件。

`BasicResponseHandler`使用它来将输入转换为字符串（字符集是 UTF-8）：

```
Reader reader = new InputStreamReader(instream, charset);
CharArrayBuffer buffer = new CharArrayBuffer(i); 
try {
    char[] tmp = new char[1024];
    int l;
    while((l = reader.read(tmp)) != -1) {
        buffer.append(tmp, 0, l);
    }
} finally {
    reader.close();
}
return buffer.toString(); 
```

有谁知道我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:32:41.810

当您阅读图像时，它不是字符串，不应该被转换。只需将 byte[] 写回文件，您将在所述文件中存储图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:56:40.150

如果您无法编辑正在使用的库代码，我建议您寻找要使用的新库。也许一个对文件内容类型不做任何假设的人。

# flash - Flash 声音动作脚本启动音乐并自动停止背景声音

> ID：13460755
> 
> 赞同：0
> 
> 时间：2012-11-19T19:30:08.770
> 
> 标签：flash, actionscript

我正在研究闪存。我想在单击 MUSIC ON 按钮时自动停止背景声音，并在单击 MUSIC OFF 时开始（自动背景声音）。

请尽快给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T06:27:47.983

```
var mySound:Sound = new Sound();
var myChannel:SoundChannel = new SoundChannel();

music_on_btn.addEventListener(MouseEvent.CLICK, onClickStart);
music_off_btn.addEventListener(MouseEvent.CLICK, onClickStop);

function onClickStart(e:MouseEvent):void
{
mySound.load(new URLRequest("myFavSong.mp3"));
myChannel = mySound.play();
}

function onClickStop(e:MouseEvent):void
{
myChannel.stop();
} 
```

有关更多查询，您还可以通过这些链接 [http://www.republicofcode.com/tutorials/flash/as3sound/](http://www.republicofcode.com/tutorials/flash/as3sound/) [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media /声音.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html)

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T06:59:08.063

```
var mySound:Sound = new Sound();
var myChannel:SoundChannel = new SoundChannel();
var lastPosition:Number = 0;
mySound.load(new URLRequest("mysong.mp3"));
myChannel = mySound.play();

pause_btn.addEventListener(MouseEvent.CLICK, onClickPause);

function onClickPause(e:MouseEvent):void{
lastPosition = myChannel.position;
myChannel.stop();
}

play_btn.addEventListener(MouseEvent.CLICK, onClickPlay);

function onClickPlay(e:MouseEvent):void{
myChannel = mySound.play(lastPosition);
} 
```

# windows-7 - 如何下载 Windows Media 设备管理器 11 SDK？

> ID：13460758
> 
> 赞同：2
> 
> 时间：2012-11-19T19:30:18.343
> 
> 标签：windows-7, msdn, winapi, mtp

我想编译[Windows Media Device Manager 11 SDK](http://msdn.microsoft.com/en-us/library/windows/desktop/ff801840%28v=vs.85%29.aspx)的[示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ff801002%28v=vs.85%29.aspx)- 但我不知道如何下载它。原始下载链接不起作用 - 在 Windows SDK 中我找不到示例！

EDIT2：我想使用自定义应用程序在 Windows 7 上通过 MTP 访问设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:37:04.293

您可以尝试以下链接：

[http://download.microsoft.com/download/a/c/3/ac367925-39e7-4451-a175-a224f94fbdce/wmformat11sdk.exe](http://download.microsoft.com/download/a/c/3/ac367925-39e7-4451-a175-a224f94fbdce/wmformat11sdk.exe)

它隐藏在 SDK 文档的评论中。

**编辑：**

如果您想在 Windows 7 上执行 MTP，您可能需要查看适用于 MTP 的 Windows 7 Portable Device Enabling Kit：

[http://msdn.microsoft.com/en-us/windows/hardware/gg463543.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463543.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:16:50.090

您为该 SDK 提供的网页指出**Windows Media Device Manager 11 SDK是*****Microsoft Kit***的一个组件。

我通过 Google 搜索发现，根据您使用的 Windows 版本，有不同的工具包。

同样的第一页还显示了*[Aaron Stebner 的 WebLog](http://blogs.msdn.com/b/astebner/archive/2009/02/13/9420404.aspx)*，它提供了下载适用于***Windows 7***的套件所需的 Microsoft 链接：

[**Microsoft Windows Media 软件开发工具包**](http://www.microsoft.com/en-us/download/details.aspx?id=18400)

该**112.5 MB 工具包**还包含***文档***、***工具***和***示例代码***，可帮助您入门。

由于**MTP**（**[媒体传输协议](http://en.wikipedia.org/wiki/Media_Transfer_Protocol)**）是该套件框架的一部分，我希望在您[**下载并安装完整套件的 MSI 软件包**](http://download.microsoft.com/download/6/C/6/6C6B665D-6240-4958-A028-A944B8BD6860/WindowsMediaCenterSDK6.msi)后提供示例，但这应该会让您朝着正确的方向前进。

# joomla - 如何从 Joomla 1.5 的 url 中删除文章 ID？

> ID：13460760
> 
> 赞同：-1
> 
> 时间：2012-11-19T19:30:38.317
> 
> 标签：joomla, joomla1.5

在 Joomla 1.5 中使用标准 SEF 我有如下链接：`mysite.com/news/36-good-news-tooday`. 我需要从 url 中删除文章 ID 并获得如下内容：`mysite.com/news/good-news-today`。

**注意：**这意味着我不想使用任何插件（如 HP 路由器等）我想编辑 Joomla 自己的 SEF。

**UPD：**终于我找到了决定。这是 router.php 的完整列表，您可以在`components/com_content`

```
<?php
/**
* @version      $Id: router.php 14401 2010-01-26 14:10:00Z louis $
* @package      Joomla
* @copyright    Copyright (C) 2005 - 2010 Open Source Matters. All rights reserved.
* @license      GNU/GPL, see LICENSE.php
* Joomla! is free software. This version may have been modified pursuant
* to the GNU General Public License, and as distributed it includes or
* is derivative of works licensed under the GNU General Public License or
* other free or open source software licenses.
* See COPYRIGHT.php for copyright notices and details.
*/

function ContentBuildRoute(&$query)
{
    $segments = array();
$menu = &JSite::getMenu();
if (empty($query['Itemid'])) {
    $menuItem = &$menu->getActive();
} else {
    $menuItem = &$menu->getItem($query['Itemid']);
}
$mView  = (empty($menuItem->query['view']))? null : $menuItem->query['view'];
$mCatid = (empty($menuItem->query['catid']))? null : $menuItem->query['catid'];
$mId    = (empty($menuItem->query['id']))? null : $menuItem->query['id'];

if(isset($query['task'])) {
    return $segments;
}

if(isset($query['view']))
{
    $view = $query['view'];
    if(empty($query['Itemid'])) {
        $segments[] = $query['view'];
    }
    unset($query['view']);
};

if (($mView == 'article') and (isset($query['id'])) and ($mId == intval($query['id']))) {
    unset($query['view']);
    unset($query['catid']);
    unset($query['id']);
}

if (isset($view) and ($view == 'section' && !empty($query['Itemid']))) {
    if (($mView != 'section') or ($mView == 'section' and $mId != intval($query['id']))) {
        $segments[] = 'section';
        unset($query['Itemid']);
    }
}

if (isset($view) and $view == 'category') {
    if ($mId != intval($query['id']) || $mView != $view) {
        $temp = explode(':',$query['id']);
        if(count($temp) > 1)
        {
            $query['id'] = $temp[1];
        }

        $segments[] = $query['id'];
    }
    unset($query['id']);
}

if (isset($query['catid'])) {

    if ((($view == 'article') and ($mView != 'category') and ($mView != 'article') and ($mCatid != intval($query['catid'])))) {
        $temp = explode(':',$query['catid']);
        if(count($temp) > 1)
        {
            $query['catid'] = $temp[1];
        }

        $segments[] = $query['catid'];
    }
    unset($query['catid']);
};

if(isset($query['id'])) {
    if (empty($query['Itemid'])) {
        $temp = explode(':',$query['id']);
        if(count($temp) > 1)
        {
            $query['id'] = $temp[1];
        }

        $segments[] = $query['id'];
    } else {
        if (isset($menuItem->query['id'])) {
            if($query['id'] != $mId) {
                $temp = explode(':',$query['id']);
                if(count($temp) > 1)
                {
                    $query['id'] = $temp[1];
                }

                $segments[] = $query['id'];
            }
        } else {
            $temp = explode(':',$query['id']);
            if(count($temp) > 1)
            {
                $query['id'] = $temp[1];
            }

            $segments[] = $query['id'];
        }
    }
    unset($query['id']);
};

if(isset($query['year'])) {

    if(!empty($query['Itemid'])) {
        $segments[] = $query['year'];
        unset($query['year']);
    }
};

if(isset($query['month'])) {

    if(!empty($query['Itemid'])) {
        $segments[] = $query['month'];
        unset($query['month']);
    }
};

if(isset($query['layout']))
{
    if(!empty($query['Itemid']) && isset($menuItem->query['layout'])) {
        if ($query['layout'] == $menuItem->query['layout']) {

            unset($query['layout']);
        }
    } else {
        if($query['layout'] == 'default') {
            unset($query['layout']);
        }
    }
};

return $segments;
}

function ContentParseRoute($segments)

{
    $vars = array();

$menu =& JSite::getMenu();
$item =& $menu->getActive();
$db =& JFactory::getDBO();
$count = count($segments);

if(!isset($item))
{
    $vars['view']  = $segments[0];
    $vars['id']    = $segments[$count - 1];
    if($vars['view'] == 'article')
    {
        $query = 'SELECT id FROM #__content WHERE alias = '.$db->Quote($vars['id']);
    } elseif($vars['view'] == 'category') {
        $query = 'SELECT id FROM #__categories WHERE section > 0 && alias = '.$db->Quote($vars['id']);
    }
    $db->setQuery($query);
    $vars['id'] = $db->loadResult();
    return $vars;
}

switch($item->query['view'])
{
    case 'section' :
    {
        if($count == 1) {
            $vars['view'] = 'category';

            if(isset($item->query['layout']) && $item->query['layout'] == 'blog') {
                $vars['layout'] = 'blog';
            }
        }

        if($count == 2) {
            $vars['view']  = 'article';
            $vars['catid'] = $segments[$count-2];
        }

        $vars['id']    = $segments[$count-1];

    } break;

    case 'category'   :
    {
        $vars['id']   = $segments[$count-1];
        $vars['view'] = 'article';

    } break;

    case 'frontpage'   :
    {
        $vars['id']   = $segments[$count-1];
        $vars['view'] = 'article';

    } break;

    case 'article' :
    {
        $vars['id']   = $segments[$count-1];
        $vars['view'] = 'article';
    } break;

    case 'archive' :
    {
        if($count != 1)
        {
            $vars['year']  = $count >= 2 ? $segments[$count-2] : null;
            $vars['month'] = $segments[$count-1];
            $vars['view']  = 'archive';
        } else {
            $vars['id']   = $segments[$count-1];
            $vars['view'] = 'article';
        }
    }
}

$alias = explode(':', $vars['id']);
if((int) $alias[0] > 0)
{
    $vars['id'] = $alias[0];
} else {
    if(count($alias) > 1)
    {
        $vars['id'] = $alias[0].'-'.$alias[1];
    }

    if($vars['view'] == 'article')
    {
        $query = 'SELECT id FROM #__content WHERE alias = '.$db->Quote($vars['id']);
    } elseif($vars['view'] == 'category') {
        $query = 'SELECT id FROM #__categories WHERE section > 0 && alias = '.$db->Quote($vars['id']);
    }
    $db->setQuery($query);
    $vars['id'] = $db->loadResult();
}

return $vars;
} 
```

我不是作者！路由器代码由[Marvin Ryan](http://joomlavisually.com/main/48-tips-and-tricks/5438-remove-joomla-articles-id.html)修改。

这段代码在大多数情况下都能完美运行！但是我在使用 JoomFish 语言切换时遇到了一些问题。它有这样的链接，`www.mysite.com/news/22` 所以我只得到文章 ID，而不是文章别名。这个问题仍然存在！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-20T00:47:42.273

为每篇文章创建菜单项。

# backbone.js - Backbone collection.create 不在本地创建模型

> ID：13460764
> 
> 赞同：0
> 
> 时间：2012-11-19T19:30:53.943
> 
> 标签：backbone.js

我终于放弃了。我一直在努力让这个工作，但没有运气。我只是有一个这样的 collection.create 调用：

```
 var createData = {
                        full_name : full_name,
                        email : email,
                        role_id : role_id
                    };

                    var that = this;
                    app.collections.teamMembers.create(createData,{
                        wait: true,
                        success : function(){
                            log("in success")
                        },
                        error : function(a,b,c){
                            log("in error")
                        }
                    }) 
```

服务器是 PHP，它返回的结果如下：

```
header('Content-type: application/json');
    echo json_encode(array(
        "data" => $data,
        "meta" => $meta
    )); 
```

在上面， $data 实际上是数组（“attr”=>“val”，...），它与该集合的模型的定义方式完全匹配。

问题是，由于我没有直接返回类似于原始模型的 JSON 对象，而是使用命名空间（数据/元），因此我在模型上使用 model.parse，如下所示：

```
parse : function(response){
        log(response, "inside model parse, this is the response from server")
        return response.data;
    }, 
```

ISSUE: 模型没有在客户端创建。不会触发“添加”事件。我也在使用 wait:true 选项。

但是，如果出现以下情况，模型会在本地创建： - 我不使用 wait:true - 我使用 wait true 但从服务器返回准确的 JSON 模型，没有名称间距。

我想使用 wait:true 以及命名空间。请帮忙 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:58:57.833

最后我能够修复它，我在我的引导程序中覆盖主干集合和模型以具有我无论如何都不会使用的加载状态。所以我注释掉了整个代码。现在它工作正常。这是我注释掉的引导程序中的代码：

```
// OVERRIDINGS AND SETTINGS
    //----------------------

    // Adding close method to all views
    Backbone.View.prototype.close = function() {
        if (this.onClose) {
            this.onClose();
        }
        _.each(this.childViews, function(childView){ 
            childView.close();
            delete childView;
        })
        this.remove();
        this.unbind();
    };

    // Adding loading state to every model and collection
    Backbone.Collection.prototype.loading = false;
    Backbone.Model.prototype.isLoading = false;

    // Set isLoading to true when fetch starts
    var oldFetch = Backbone.Collection.prototype.fetch;
    Backbone.Collection.prototype.fetch = function(options) {
        this.isLoading = true;
        oldFetch.call(this, options);
    }
    Backbone.Model.prototype.fetch = function(options) {
        this.isLoading = true;
        oldFetch.call(this, options);
    }

    // Turn off isLoading when reset
    Backbone.Collection.prototype.on('reset', function(){
        this.isLoading = false;
    })
    Backbone.Model.prototype.on('reset', function(){
        this.isLoading = false;
    }) 
```

# node.js - 猫鼬中的 findOne 子文档

> ID：13460765
> 
> 赞同：28
> 
> 时间：2012-11-19T19:30:54.827
> 
> 标签：node.js, mongodb, express, mongoose

我正在尝试在 Mongoose 中对子文档进行 findOne 查询，但运气不佳...

我的架构如下所示：

```
var Team = mongoose.Schema({
    teamName:       String,
    teamURL:        String,
    teamMembers:    [{username: String, password: String, email: String, dateCreated: Date}],
});

var Team = db.model('Team', Team); 
```

我需要简单地从我正在使用此查询的文档中找到用户的电子邮件

```
Team.findOne({'teamMembers.username': 'Bioshox'}, {'teamMembers.$': 1}, function (err, team) {
    if (team) {
        console.log(team[1].email);
    }
}); 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-19T20:27:57.230

您缺少`teamMembers`对象的级别，因此您的代码需要更改为以下内容：

```
Team.findOne({'teamMembers.username': 'Bioshox'}, {'teamMembers.$': 1},
    function (err, team) {
        if (team) {
            console.log(team.teamMembers[0].email);
        }
    }
); 
```

# java - aqapi13.jar 的 Maven 依赖项

> ID：13460769
> 
> 赞同：2
> 
> 时间：2012-11-19T19:31:02.847
> 
> 标签：java, oracle, maven, jms, activemq

我正在将一个项目从 Ant 升级到 Gradle。该项目使用aqapi13.jar（这是oracle aq jar。这是项目从oracle-queue读取并写入activemq队列时需要的。）

ant 项目在 libs 文件夹中包含 jar aqapi13.jar。但是我试图从存储库中获取此依赖项，而不是将其放在 libs 文件夹中。

但是，我无法找到包含此 jar 的存储库。我见过的所有存储库都包含 aqapi13-9i.jar，但没有 aqapi13.jar。

任何人都知道 aqapi13.jar 和 aqapi13-9i.jar 之间的区别以及如何从存储库中获取所需的 aqapi13.jar。

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:02:54.543

由于它们拥有的许可证，某些依赖项永远不会在公共存储库中找到。

使用此依赖项的一种方法是创建您自己的存储库（例如 artifactory、nexus、archiva）。然后您可以自由地放入您想要的每个工件（只要您不发布存储库）。这个存储库也可以作为 maven 的镜像。

另一种方法可能是将这种依赖关系标记为[系统范围](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)。

# shell - 如何解决调用 nawk 的 Unix 脚本中的救助错误？

> ID：13460772
> 
> 赞同：0
> 
> 时间：2012-11-19T19:31:21.203
> 
> 标签：shell, unix, awk

当我不将以下命令写入脚本文件时，它可以正常工作，但是当我将此命令放入脚本文件时，它会显示错误。

```
nawk 'c-- >0;$0~s{if(b)for(c=b+1;c >1;c--)print r[(NR-c+1)%b];print;c=a}b{r[NR%b]=$0}' b=10 a=10 s="string pattern" file 
```

错误是：

```
nawk: syntax error at source line 1 context is >>> ' <<< missing }
nawk: bailing out at source line 1 
```

* * *

对“你的脚本是什么样子”的众多请求之一的评论回复之一是：

```
#!/bin/ksh
Stringname=$1
directory=$2
d=$3
Command="nawk 'c-- >0;$0~s{if(b)for(c=b+1;c >1;c--)print r[(NR-c+1)%b];print;c=a}b{r[NR%b]=$0}' b=10 a=10 s=\"$stringname\" $directory"
$Command> $d 
```

将整个命令存储在这样的字符串中非常令人担忧；不要这样做！这是不必要的，而且非常非常难以做到正确。

```
#!/bin/ksh
Stringname=$1
directory=$2
d=$3
nawk 'c-- >0;$0~s{if(b)for(c=b+1;c >1;c--)print r[(NR-c+1)%b];print;c=a}b{r[NR%b]=$0}' b=10 a=10 s="$stringname" $directory > $d 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:15:18.720

我敢打赌你正在尝试执行你的脚本`nawk -f file`而不是仅仅`./file`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:00:10.730

解决匹配前打印 N 行和匹配后打印 M 行问题的最快方法是安装 GNU`grep`并使用：

```
grep -B $N -A $M 'string pattern' file 
```

如果做不到这一点，这是我大约 5 年前用来完成这项工作的 Perl 脚本。请注意，如果您要求比赛前 10 行和比赛后 10 行，则会出现一些复杂情况，并且您有：

*   第 7 行的匹配项（之前不是 10 行）
*   第 30 行匹配，第 35 行匹配（需要打印第 20-45 行）
*   第 60 行的匹配，其中最后一行是第 65 行（之后不是 10 行）
*   并且有多个文件要处理。

这段代码确实处理了所有这些。它可能可以改进。

```
#!/usr/bin/perl -w
#
# @(#)$Id: sgrep.pl,v 1.6 2007/09/18 22:55:20 jleffler Exp $
#
# Perl-based SGREP (special grep) command
# 
# Print lines around the line that matches (by default, 3 before and 3 after).
# By default, include file names if more than one file to search.
#
# Options:
# -b n1     Print n1 lines before match
# -f n2     Print n2 lines following match
# -n        Print line numbers
# -h        Do not print file names
# -H        Do     print file names

use strict;
use constant debug => 0;
use Getopt::Std;
my(%opts);

sub usage
{
    print STDERR "Usage: $0 [-hnH] [-b n1] [-f n2] pattern [file ...]\n";
    exit 1;
}

usage unless getopts('hnf:b:H', \%opts);
usage unless @ARGV >= 1;

if ($opts{h} && $opts{H})
{
    print STDERR "$0: mutually exclusive options -h and -H specified\n";
    exit 1;
}

my $op = shift;

print "# regex = $op\n" if debug;

# print file names if -h omitted and more than one argument
$opts{F} = (defined $opts{H} || (!defined $opts{h} and scalar @ARGV > 1)) ? 1 : 0;
$opts{n} = 0 unless defined $opts{n};

my $before = (defined $opts{b}) ? $opts{b} + 0 : 3;
my $after  = (defined $opts{f}) ? $opts{f} + 0 : 3;

print "# before = $before; after = $after\n" if debug;

my @lines = (); # Accumulated lines
my $tail  = 0;  # Line number of last line in list
my $tbp_1 = 0;  # First line to be printed
my $tbp_2 = 0;  # Last line to be printed

# Print lines from @lines in the range $tbp_1 .. $tbp_2,
# leaving $leave lines in the array for future use.
sub print_leaving
{
    my ($leave) = @_;
    while (scalar(@lines) > $leave)
    {
        my $line = shift @lines;
        my $curr = $tail - scalar(@lines);
        if ($tbp_1 <= $curr && $curr <= $tbp_2)
        {
            print "$ARGV:" if $opts{F};
            print "$curr:" if $opts{n};
            print $line;
        }
    }
}

# General logic:
# Accumulate each line at end of @lines.
# ** If current line matches, record range that needs printing
# ** When the line array contains enough lines, pop line off front and,
#    if it needs printing, print it.
# At end of file, empty line array, printing requisite accumulated lines.

while (<>)
{
    # Add this line to the accumulated lines
    push @lines, $_;
    $tail = $.;

    printf "# array: N = %d, last = $tail: %s", scalar(@lines), $_ if debug > 1;

    if (m/$op/o)
    {
        # This line matches - set range to be printed
        my $lo = $. - $before;
        $tbp_1 = $lo if ($lo > $tbp_2);
        $tbp_2 = $. + $after;
        print "# $. MATCH: print range $tbp_1 .. $tbp_2\n" if debug;
    }

    # Print out any accumulated lines that need printing
    # Leave $before lines in array.
    print_leaving($before);
}
continue
{
    if (eof)
    {
        # Print out any accumulated lines that need printing
        print_leaving(0);
        # Reset for next file
        close ARGV;
        $tbp_1 = 0;
        $tbp_2 = 0;
        $tail  = 0;
        @lines = ();
    }
} 
```

# asp.net - 我可以在 ASP.NET 中使用多客户端证书吗？

> ID：13460775
> 
> 赞同：2
> 
> 时间：2012-11-19T19:31:34.727
> 
> 标签：asp.net, asp.net-web-api, x509certificate, x509

我正在使用 ASP.NET Web API 开发应用程序，并且我正在使用 WPF 客户端使用的用户名/密码进行身份验证，并且我正在使用 SSL，但对于安全应用程序，我想与客户端证书 (x.509 ）。

我正在关注这个例子： http: [//www.codeproject.com/Tips/159604/SSL-MakeCert-pvk2pfx-Client-Server-Certificate-Gen](http://www.codeproject.com/Tips/159604/SSL-MakeCert-pvk2pfx-Client-Server-Certificate-Gen)

该示例显示在服务器和客户端上设置密钥。目前我有几家公司使用相同的服务，每家公司有多个用户。

我的问题是，我可以为公司使用一个客户端密钥，即：多个用户访问同一个密钥吗？

如果没有，有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:52:11.007

如果您的服务使用 SSL，为什么需要基于证书的安全性开销？您是否考虑过它可能对性能产生的影响？

如果您想为您的服务继续使用基于证书的 PKI 类型的加密，那么您甚至可以与所有客户端的所有用户共享相同的公钥。只需保持私钥真正私密即可。

# ios - 有什么方法可以使用一些 Scala 进行 iOS 编码？

> ID：13460780
> 
> 赞同：23
> 
> 时间：2012-11-19T19:31:42.780
> 
> 标签：ios, scala

我希望能够使用 Scala 编写 iOS 程序。有什么可用的工具吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-24T20:10:48.933

您可以在 iOS 上运行 JavaScript，因此您可以使用[Scala.js](http://www.scala-js.org/)将您的 Scala 编译为 JavaScript 。这有明显的巨大限制——我不想尝试编写实际的原生 iOS UI——但对于某些跨平台逻辑来说可能是实用的。将它与[React Native](https://facebook.github.io/react-native/)结合起来可能会很有趣。

几个月前还有[Scala Native ；](http://www.scala-native.org/ "斯卡拉本机")这可能应该在 iOS 上运行。它还没有准备好用于生产，但请留意它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-03T19:52:31.807

好了，现在你可以使用[RoboVM](http://www.robovm.org/) - 一个用于本地 IOS 开发的 Java 库

也可以看看：

*   RoboVM 的 SBT 插件[https://github.com/roboscala/sbt-robovm](https://github.com/roboscala/sbt-robovm)
*   一篇关于 IOS Scala 开发的博文[http://ajhager.com/](http://ajhager.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T16:11:25.240

我最近开发了一个基于 IKVM 和 MonoTouch 的工具链，允许您在 Scala 中开发 iOS 应用程序。我在这里整理了一个工具链的演示：

[https://github.com/samskivert/ios-scala-demo](https://github.com/samskivert/ios-scala-demo)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T01:51:35.583

不是今天，但可能很接近：

*   [http://java.dzone.com/articles/oracle-gets-java-running-ios](http://java.dzone.com/articles/oracle-gets-java-running-ios)
*   [http://www.oracle.com/technetwork/developer-tools/adf/overview/adf-mobile-096323.html](http://www.oracle.com/technetwork/developer-tools/adf/overview/adf-mobile-096323.html)

但是，虽然 Apple 直接反对在 iOS 设备上使用 JVM，但这样做毫无意义（现在还处于早期阶段）。你会遇到一个又一个的障碍，并且无法保证你今天写的代码明天就能在 iOS 上运行。

与您的 Android、Ubuntu 和爆米花一起坐在场边，让大佬们与之抗衡。

[与此同时……你可以在PhoneGap](http://phonegap.com/)中编写一个精简的前端（适用于大多数现代移动设备），使用[Spray](http://spray.io/)编写服务，并在 Scala 中享受后端的乐趣。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-13T07:19:56.617

目前[Codename One](https://www.codenameone.com/)没有对 Scala 的内置支持，但它对[Kotlin 的支持相当不错](https://www.codenameone.com/blog/kotlin-support-public-beta.html)。这里有一篇[博](https://www.codenameone.com/blog/how-to-port-jvm-languages-to-codename-one.html)文，介绍了改编 Codename One 以支持其他 JVM 语言的过程。通过这样做，您可以立即免费获得对其他平台的支持，例如 iOS、UWP、JavaScript/Web、Android 和桌面 mac/windows。

Codename One 的核心包括虚拟机、API 和大多数工具是[开源](https://github.com/codenameone/CodenameOne/)的。

# ios - 确定zip文件的大小？

> ID：13460792
> 
> 赞同：0
> 
> 时间：2012-11-19T19:32:10.550
> 
> 标签：ios

为了减少我的应用程序的总大小，我想将一些非常大的数据库作为 ZIP 文件分发，然后根据需要解压缩它们。是否有一种简单的方法可以确定 ZIP 中文件的大小，以便我提前知道设备上是否有空间甚至可以尝试解压缩其中一个？

ZIP 文件将只包含一个文件。是的，我可以提前测量大小并对其进行硬编码，但这很容易出错，因为我会定期更新数据库。

最好的问候，安德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:29:20.443

有一些用于处理 ZIP 文件的 3rd 方 Objective-C 库。这些将允许您查询 zip 文件的内容，而无需先解压缩它们。

查看[ZipKit](https://bitbucket.org/kolpanic/zipkit/wiki/Home)或[Objective-Zip](http://code.google.com/p/objective-zip/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T01:32:43.680

你也可以像这样使用[zipzap](https://github.com/pixelglow/zipzap)：

```
NSUInteger wantedFileSize = NSNotFound;
ZZArchive* archive = [ZZArchive archiveWithURL:zipFileURL error:nil];
for (ZZArchiveEntry entry in archive.entries)
  if ([entry.fileName isEqualToString:wantedFileName])
  {
     wantedFileSize = entry.uncompressedSize;
     break;
  } 
```

这将很快，因为它只扫描 zip 文件的最后一个块以查找所需条目的未压缩大小，并且不进行任何解压缩。

# unix - 查找命令在其他目录中不起作用

> ID：13460796
> 
> 赞同：2
> 
> 时间：2012-11-19T19:32:29.393
> 
> 标签：unix

我的目录结构看起来像

X

```
 /log

   /bin 
```

我从 dir-x/bin 给出这个命令

```
find ../log -type f -name \*.log  -mtime +90 -exec ls -l {} \; 
```

（查找并显示超过 90 天的文件列表。）它不显示任何内容。

而如果我在 dir-x/log 中执行相同的命令

```
find . -type f -name \*.log  -mtime +90 -exec ls -l {} \; 
```

它给了我一个超过 90 天的文件列表。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:37:09.150

两个建议。
首先，使用 \* 转义 *。如果当前目录中有任何日志文件，它们将在命令执行之前被扩展。
其次，我认为您的意思是 find ../x/log ...？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:37:45.297

回想一下路径是相对的。

如果你有一个看起来像的目录结构

```
 x
   /log
   /bin 
```

并且你在 x/bin 中，那么你需要给出 x/log 的相对路径，即

```
 pwd
 x/bin
find ../x/log -type f -name \*.log  -mtime +90 -exec ls -l {} \; 
```

我希望这有帮助。

# python - os.path.join 没有正确格式化路径

> ID：13460799
> 
> 赞同：6
> 
> 时间：2012-11-19T19:32:39.667
> 
> 标签：python, windows

我正在用 Python 为 Windows 编写一个命令行目录导航器，并且在 os.path.join 上有点挣扎。本质上，这就是我想要做的事情：

```
abspath = "C:\Python32\Projects\ls.py"
abspath = abspath.split('\\')
print(abspath) #this prints ['C:', 'Python32', 'Projects', 'ls.py']

if(options.mFlag):  
        print(os.path.join(*abspath)) #this prints C:Python32\Projects\ls.py
        m = time.ctime(os.path.getmtime(os.path.join(*abspath))) #this throws an exception 
```

问题是 os.path.join 没有在“C:”之后插入“/”，我不知道为什么。有什么帮助吗？

编辑：如果将来有人来这里寻找解决方案，我只是在“C：”之后添加了 os.sep，而不是硬编码反斜杠，这很有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T19:39:29.240

从[文档中](http://docs.python.org/2/library/os.path.html#os.path.join)：

> 请注意，在 Windows 上，由于每个驱动器都有一个当前目录，因此`os.path.join("c:", "foo")`表示相对于驱动器 C: (c:foo) 上的当前目录的路径，而不是 c:\foo。

很难说出您要完成的工作，因为您的所有代码似乎都针对的是拆分路径，然后将其按原样重新组合在一起，在这种情况下，为什么要首先拆分它? 但也许[`os.path.splitdrive`](http://docs.python.org/2/library/os.path.html#os.path.splitdrive)会帮助你？它从路径中拆分驱动器号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T19:38:48.787

文档（[http://docs.python.org/2/library/os.path.html](http://docs.python.org/2/library/os.path.html)）指定了这种行为：

> 请注意，在 Windows 上，由于每个驱动器都有一个当前目录，因此 os.path.join("c:", "foo") 表示相对于驱动器 C: (c:foo) 上的当前目录的路径，而不是 c ：\富。

# ios - 是否可以在 iOS 中检测到设备的电话号码？

> ID：13460804
> 
> 赞同：3
> 
> 时间：2012-11-19T19:32:56.950
> 
> 标签：ios, iphone, xcode, phone-number

我的数据库中有一堆客户的电话号码信息和他们的个人资料。

我打算做的是，一旦应用程序运行，iPhone 就会在我的数据库中搜索匹配的电话号码及其客户的个人资料。它会在屏幕上显示客户资料。

问题是..我被告知iOS 4.x之前允许这样做......但在那个版本之后不再允许：S 我仍然可以访问设备信息并获取它的号码吗？如果是，如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T19:53:30.830

没有。iTunes商店不会接受它。你做了你的研究，这就是它的结束。获得它的唯一方法是在应用程序首次运行期间要求用户输入电话号码，并可能与您已有的数据库进行交叉检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T00:55:20.977

您可以使用 CoreTelephony.framework 中的 CTSettingCopyMyPhoneNumber()

```
extern NSString* CTSettingCopyMyPhoneNumber();
NSString *phone = CTSettingCopyMyPhoneNumber();
NSLog(@"Phone : %@", phone); 
```

# sql-server-2008 - 使用 nhibernate 映射文件创建带有“包含”列的封面索引

> ID：13460813
> 
> 赞同：2
> 
> 时间：2012-11-19T19:33:53.307
> 
> 标签：sql-server-2008, nhibernate, indexing, nhibernate-mapping, non-clustered-index

我需要创建一个包含 INCLUDE 列的非聚集索引（参见`<create>`下面的标签）。这是映射文件：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="MyApp" assembly="MyApp">
  <class name="User" table="user" >
    <id name="Id" type="Guid" column="user_id">
      <generator class="guid.comb"/>
    </id>

    <property name="Name" column="name" not-null="true"  />
    <property name="Phone" column="phone" />
    <property name="Zipcode" column="zipcode" />
  </class>

  <database-object>
    <create>
      CREATE NONCLUSTERED INDEX [IX_user_zipcode_id]
      ON User (Zipcode)
      INCLUDE (Name, Phone)
    </create>
    <drop>
      DROP INDEX IX_user_zipcode_id
    </drop>
    <dialect-scope name="NHibernate.Dialect.MsSql2000Dialect"/>
    <dialect-scope name="NHibernate.Dialect.MsSql2005Dialect"/>
    <dialect-scope name="NHibernate.Dialect.MsSql2008Dialect"/>

  </database-object>

</hibernate-mapping> 
```

我遇到的问题是根本没有创建索引。似乎什么都没有发生。这是我第一次使用`<database-object>`，所以我可能在这里做错了什么。

我猜 INCLUDE 是特定于 Sql Server 的，这就是方言范围存在的原因。我知道如何创建单列和多列索引，但这不是我想要的。我想要在查询的 INCLUDE 子句的用户表部分中的邮政编码和所有其他列上的单列索引。有没有办法使用映射文件或其他方式创建这种类型的索引？

这可能是一个很长的镜头，但最好不必指定每一列，而是在查询的 INCLUDE 部分中指定索引的列...而不是让 nhibernate 将任何新列添加到作为属性添加的索引中到映射文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:19:02.870

所以问题的一部分确实是我对标签缺乏理解，`database-object`主要是由于文档不足。根据我收集的信息，`<create>`and`<drop>`标签仅在使用时使用`SchemaExport`：

```
 Dim schemaExport As SchemaExport = New SchemaExport(NhibernateConfiguration)
    schemaExport.Execute(False, True, False) 
```

我的应用程序不使用该类创建架构。相反，它使用`SchemaUpdate`这样架构不会每次都被吹走（数据库可能已经存在于用户机器上）：

```
 Dim schemaUpdate As SchemaUpdate = New SchemaUpdate(NhibernateConfiguration)
    schemaUpdate.Execute(False, True) 
```

这就是问题所在。下一个要问的逻辑问题是如何使用`SchemaUpdate`. 答案……你不能。看到这篇文章：[https ://forum.hibernate.org/viewtopic.php?f=6&t=969584&view=next](https://forum.hibernate.org/viewtopic.php?f=6&t=969584&view=next)

唉，我只能使用原始 sql。也许有一天他们会添加一个`<update>`标签。

# sharethis - 使用 AJAX 分享此单击/悬停事件

> ID：13460816
> 
> 赞同：0
> 
> 时间：2012-11-19T19:34:01.863
> 
> 标签：sharethis

我遇到了一个问题，我正在进行 AJAX 调用以将图像加载到轮播中，并且它破坏了与每个图像（电子邮件、推特和脸书）关联的 shareThis 单击/悬停事件。

我已经通过这样做阅读了所有内容

```
stButtons.locateElements(); 
```

它应该解决问题，但它没有。什么都没有发生，按钮仍然不可点击/没有悬停事件。我也尝试过重新加载脚本：

```
var switchTo5x = true;
$.getScript('//ws.sharethis.com/button/buttons.js', function () {
   stLight.options({ "publisher": "publisher-code" }); 
}); 
```

这只会导致 button.js 抛出此错误：“未捕获的 TypeError：无法调用 null 的方法 'process'”。

关于如何重新绑定事件的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:04:38.990

我最终找到了解决方案，尽管 button.js 仍然抛出错误。

在我运行 getScript 之前，我将 stButtons 设置为 null 并解决了我的问题。这是最终结果：

```
if (stButtons) {

    // Reset the share this buttons to null
    stButtons = null;
    try {
       // Reload the script from scratch
       var switchTo5x = true;
       $.getScript('//ws.sharethis.com/button/buttons.js', function () {
           stLight.options({ "publisher": "pub-id" });
       });
    }
    catch (err) { }
} 
```

我仍然从 button.js 收到此错误：未捕获的 TypeError：无法读取 null 的属性“messageQueueInstance”。但是，它现在正在工作。下次会更多地研究这个错误。

# asp.net - 拼写检查器不检查大写字母

> ID：13460820
> 
> 赞同：0
> 
> 时间：2012-11-19T19:34:12.023
> 
> 标签：asp.net, infragistics

以下是我的 ASPX 页面代码：

```
<td colspan="2">
    <asp:TextBox ID="txtMessageBody" runat="server" Rows="8" TextMode="MultiLine" Width="1180px"
        CssClass="Label" />
    <igspc:WebSpellChecker ID="wscSpellCheck" runat="server"  TextComponentId="txtMessageBody" ButtonId="btnCcheck">
        <DialogOptions ShowNoErrorsMessage="true"  />
    </igspc:WebSpellChecker>
    <div runat="server" id="divSpecllCheck">                                 
        <input type="button" id="btnCcheck"  value="Spell Check" />
    </div>                                       
</td> 
```

我无法检查所有大写字母的拼写。否则，如果我为 CAT 输入 CTA，它会说没有找到匹配的单词

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:17:04.207

将 SpellOptions.PerformanceOptions.AllowCapitalizedWords 设置为 False。WebSpellChecker 的更新标记：

```
<ig_spell:WebSpellChecker ID="wscSpellCheck" runat="server" TextComponentId="txtMessageBody" ButtonId="btnCcheck">
    <SpellOptions>
        <PerformanceOptions AllowCapitalizedWords="False"/>
    </SpellOptions>
    <DialogOptions ShowNoErrorsMessage="true" />
</ig_spell:WebSpellChecker> 
```

有关更多详细信息，请参阅 NetAdvantage API 文档中的[PerformanceOptions 类成员](http://help.infragistics.com/NetAdvantage/ASPNET/Current/CLR4.0/?page=Infragistics4.WebUI.WebSpellChecker.v12.2~Infragistics.WebUI.WebSpellChecker.PerformanceOptions_members.html)。

# iphone - SBJson 解析后的执行 (__NSArrayM objectForKey:)

> ID：13460824
> 
> 赞同：0
> 
> 时间：2012-11-19T19:34:30.130
> 
> 标签：iphone, ios, json, parsing, sbjson

我在尝试使用 SBJson 解析 Json 时遇到了一些问题，我做了一些研究，但找不到有用的东西......

我关注了一些关于如何做到这一点的博客，但我仍然得到那个错误：“__NSArrayM objectForKey:”

所以这是我要解析的Json：

```
{
"result": [
    {
        "authors": [
            "Eric Ries"
        ],
        "bc": 9780671607,
        "title": "Yeah",
        "urlImage": "www.yeah.hey",
        "description": "Hey..."
    }
    ]
} 
```

这是我正在使用的代码：

```
SBJsonParser *json;
NSDictionary *jsonResults;
NSError *jsonError;

json = [ SBJsonParser new ];

// Get result in a NSDictionary
jsonResults = (NSDictionary*) [ json objectWithString:output error:&jsonError ];

// Check if there is an error
if (jsonResults == nil) {
    NSLog(@"Erreur lors de la lecture du code JSON (%@).", [ jsonError localizedDescription ]);  
} else {
    NSDictionary *book = (NSDictionary *)[ jsonResults objectForKey:@"result"];
    NSArray *items = (NSArray *) [book objectForKey:@"title"];
} 
```

错误 ：

```
-[__NSArrayM objectForKey:]: unrecognized selector sent to instance 0x7a2d390
2012-11-19 20:32:36.336 FMS[500:11f03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM objectForKey:]: unrecognized selector sent to instance 0x7a2d390'
*** First throw call stack:
(0x2245012 0x16a3e7e 0x22d04bd 0x2234bbc 0x223494e 0x8c6a 0x36093 0xb39e83 0x2204376 0x2203e06 0x21eba82 0x21eaf44 0x21eae1b 0x219f7e3 0x219f668 0x8365c 0x2d6d 0x2c95)
libc++abi.dylib: terminate called throwing an exception
Current language:  auto; currently objective-c 
```

通过使用 valueForKey 而不是 objectForKey

```
[book valueForKey:@"title"]; 
```

我得到这个：

```
(
    "Yeah"
) 
```

而不仅仅是是

而且我不想再次解析（“是的”）至少得到是的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:43:59.280

您会收到该错误，因为“book”是一个数组，而不是字典。如果所有结果都像这样，那就是“书”只有一个外部对象。您可以将定义书的行更改为：

```
NSDictionary *book = [[ jsonResults objectForKey:@"result"] lastObject]; 
```

# html - 为什么这个 CSS3 渐变会破坏我在 IE 中的页面布局？

> ID：13460825
> 
> 赞同：0
> 
> 时间：2012-11-19T19:34:51.453
> 
> 标签：html, internet-explorer, css, gradient

我花了很长时间才弄清楚是什么破坏了我的布局（问题仅在 ie 中）。我正在使用 html5（带有 moderizr），如果我从 css 中删除以下内容，我发现布局很好：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#f5ede1, endColorstr=#f5ede1); 
```

不过，我想要那里的设计渐变......为什么过滤器会破坏 Internet Explorer 中的布局？

标题的 html 是：

```
<header>
    <section id="header">
      <div id="logo"><a href="/"><img alt="Congress" src="../img/congress-logo.png"></a></div>
      <div id="ons-logo"><a target="_blank" href="http://ons.org"><img width="175" height="77" alt="Oncology Nursing Society" src="../img/ons-logo.png"></a></div>
  </section>
  <nav id="main-nav">  
      <ul>
            <li id="register"><span>Register</span>
              <ul class="subNav">
                    <li>subnav</li>
                </ul>
              </li>

    <li id="exhibit"><span>Exhibit Hall</span>
               <ul class="subNav">
               <li>subnav</li>
              </ul>
            </li>
            <li id="networking"><span>Networking</span>
              <ul class="subNav" style="display: none;">
                <li>subnav</li>   
             </ul>
            </li>
      </ul>
  </nav>  
</header> 
```

这是我的 CSS：

```
img { 
    border: 0; 
    width: 100%; 
    display: block; 
    max-width: 100%; 
}

header{
    background: #f5ede1; /* Old browsers */
    background: -moz-linear-gradient(top,  #f5ede1 0%, #fbf8f3 48%, #f5ede1 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f5ede1), color-stop(48%,#fbf8f3), color-stop(100%,#f5ede1)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #f5ede1 0%,#fbf8f3 48%,#f5ede1 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #f5ede1 0%,#fbf8f3 48%,#f5ede1 100%); /* Opera 11.10+ */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#f5ede1, endColorstr=#f5ede1); /*IE6-9 */
    background: -ms-linear-gradient(top,  #f5ede1 0%,#fbf8f3 48%,#f5ede1 100%); /* IE10+ */
    padding-bottom: 10em;
    position:relative;
    max-width: 100%; 
    margin: 0px;

}
.ie7 header/*, .ie8 header*/{
    padding-bottom:0px;
}
section#header{
    max-width: 900px; 
    margin: auto; 
    position: relative;

}

div#logo {
    float: left;
    margin: 1em 0 0 2em;
    max-width:365px;
}
.ie8 div#logo{
    width:365px;
}

div#ons-logo{
    max-width: 175px; 
    padding-left: 23em; 
    float:left; 

}

.ie8 div#ons-logo{
    width: 175px; 
}

nav#main-nav {
    margin-top: -30px;

    padding: 0.5em 5% 0.5em 35%;
    width: 60%;
    float: left;
    background: #d56d2a; /* Old browsers */
    background: -moz-linear-gradient(top,  #d56d2a 1%, #f47d31 10%, #f47d31 85%, #ea8f52 100%, #f47d31 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#d56d2a), color-stop(10%,#f47d31), color-stop(85%,#f47d31), color-stop(100%,#ea8f52), color-stop(100%,#f47d31)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #d56d2a 1%,#f47d31 10%,#f47d31 85%,#ea8f52 100%,#f47d31 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #d56d2a 1%,#f47d31 10%,#f47d31 85%,#ea8f52 100%,#f47d31 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #d56d2a 1%,#f47d31 10%,#f47d31 85%,#ea8f52 100%,#f47d31 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #d56d2a 1%,#f47d31 10%,#f47d31 85%,#ea8f52 100%,#f47d31 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d56d2a', endColorstr='#f47d31',GradientType=0 ); /* IE6-9 */

    border-bottom: 2px solid #F5D8C7;
    border-top: 2px solid #F5D8C7;
    box-shadow: 0 10px 9px rgba(0, 0, 0, 0.55);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:57:11.527

在标头中添加此元标记以与 IE9 兼容：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T19:37:55.230

尝试使用 colorzilla 生成渐变：

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

这很简单。

# r - 从数据中省略列

> ID：13460827
> 
> 赞同：-1
> 
> 时间：2012-11-19T19:28:22.537
> 
> 标签：r, linear-regression, lm

该数据集有 252 个观测值和 18 个变量。我需要每十次观察的测试样本和剩余数据的训练样本，因此我创建了两个单独的数据集：

```
id <- seq(1, nrow(fat), by=10)
test  <- fat[id,]
train <-fat[id,] 
```

我可以使用除`brozek`and之外的所有预测变量进行线性回归`density`：

```
model2 <- lm(siri ~ .-brozek -density, train) 
```

我需要做一个主成分回归模型

```
fatpca<-prcomp(fat[-id,] 
```

但这仍然包括变量`brozek`和`density`。

我如何排除这些变量来做 PCR 模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:16:33.753

要删除几个变量，您有几个选择：

```
trainsub <- subset(train,select=-c(brozek,density)) 
```

或者

```
trainsub <- train[!colnames(train) %in% c("brozek","density")) 
```

或者

```
trainsub <- dplyr::select(train,-c(brozek,density)) 
```

您还可以使用公式接口`prcomp`，即

```
prcomp(~ . -brozek - density, data=train) 
```

# vb.net - VB.Net Kinect 鼠标

> ID：13460830
> 
> 赞同：0
> 
> 时间：2012-11-19T19:35:32.960
> 
> 标签：vb.net, kinect

我有一个问题，“Evil Closet Monkey”回答了关于 Kinect 鼠标项目的问题，我将代码从 C# 转换为 VB.Net。代码如下：

```
Private Sub TrackHandMovement(skeleton As Skeleton)
    Dim leftHand As Joint = skeleton.Joints(JointType.HandLeft)
    Dim rightHand As Joint = skeleton.Joints(JointType.HandRight)

    Dim leftShoulder As Joint = skeleton.Joints(JointType.ShoulderLeft)
    Dim rightShoulder As Joint = skeleton.Joints(JointType.ShoulderRight)

    Dim rightHip As Joint = skeleton.Joints(JointType.HipRight)

    ' the right hand joint is being tracked
    If rightHand.TrackingState = JointTrackingState.Tracked Then
        ' the hand is sufficiently in front of the shoulder
        If rightShoulder.Position.Z - rightHand.Position.Z > 0.4 Then
            Dim xScaled As Double = (rightHand.Position.X - leftShoulder.Position.X) / ((rightShoulder.Position.X - leftShoulder.Position.X) * 2) * SystemParameters.PrimaryScreenWidth
            Dim yScaled As Double = (rightHand.Position.Y - rightShoulder.Position.Y) / (rightHip.Position.Y - rightShoulder.Position.Y) * SystemParameters.PrimaryScreenHeight

            ' the hand has moved enough to update screen position (jitter control / smoothing)
            If Math.Abs(rightHand.Position.X - xPrevious) > MoveThreshold OrElse Math.Abs(rightHand.Position.Y - yPrevious) > MoveThreshold Then
                RightHandX = xScaled
                RightHandY = yScaled

                xPrevious = rightHand.Position.X
                yPrevious = rightHand.Position.Y

                ' reset the tracking timer
                trackingTimerCounter = 10
            End If
        End If
    End If
End Sub 
```

我已经导入了 Microsoft.Kinect

现在我有这些错误显示：

'xPrevious' 未声明。由于其保护级别，它可能无法访问。未声明“MoveThreshold”。由于其保护级别，它可能无法访问。'yPrevious' 未声明。由于其保护级别，它可能无法访问。未声明“MoveThreshold”。由于其保护级别，它可能无法访问。未声明“RightHandX”。由于其保护级别，它可能无法访问。未声明“RightHandY”。由于其保护级别，它可能无法访问。'xPrevious' 未声明。由于其保护级别，它可能无法访问。'yPrevious' 未声明。由于其保护级别，它可能无法访问。未声明“trackingTimerCounter”。由于其保护级别，它可能无法访问。

我知道他们没有被宣布，真的不知道该怎么做，有人可以帮我解决这个问题吗？

对不起我的无知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:37:16.620

这些是全局变量，需要在函数之外定义。

`xPrevious`是函数退出时您的手的最后位置。当函数再次运行以查看您的阈值是否已超过时，会再次引用它。

`yPrevious`同上，只是`y`坐标。

`MoveThreshold`是您的手必须在`x`或`y`轴上移动的量，该功能才能识别它已移动。

因此，在您的功能之外，您应该有类似...

```
Dim xPrevious As Double
Dim yPrevious As Double
Dim RightHandX As Double
Dim RightHandY As Double
Dim MoveThreshold As Double = 0.04 
```

（自从我用 VB 编码以来已经有一段时间了，所以我上面的声明可能有点不对劲）

也就是说，我不再那样处理抖动控制了。我使用的内置功能比我在那里的小黑客工作做得更好。对于抖动控制，您应该在初始化 Kinect 传感器时声明如下内容：

```
new TransformSmoothParameters
{
    // as the smoothing value is increased responsiveness to the raw data
    // decreases; therefore, increased smoothing leads to increased latency.
    Smoothing = 0.5f,
    // higher value corrects toward the raw data more quickly,
    // a lower value corrects more slowly and appears smoother.
    Correction = 0.5f,
    // number of frames to predict into the future.
    Prediction = 0.5f,
    // determines how aggressively to remove jitter from the raw data.
    JitterRadius = 0.05f,
    // maximum radius (in meters) that filtered positions can deviate from raw data.
    MaxDeviationRadius = 0.04f
};

sensor.SkeletonStream.Enable(this.TransformSmoothParameters) 
```

（以上是C#代码）

这`trackingTimerCounter`是一个在后台运行的计时器。如果它用完，那么用户在 10 秒内没有移动他们的手，所以手形光标将被隐藏，直到他们再次移动。只需删除该行。

有了以上几点，您发布的功能将更改为：

```
Private Sub TrackHandMovement(skeleton As Skeleton)
    Dim leftHand As Joint = skeleton.Joints(JointType.HandLeft)
    Dim rightHand As Joint = skeleton.Joints(JointType.HandRight)

    Dim leftShoulder As Joint = skeleton.Joints(JointType.ShoulderLeft)
    Dim rightShoulder As Joint = skeleton.Joints(JointType.ShoulderRight)

    Dim rightHip As Joint = skeleton.Joints(JointType.HipRight)

    ' the right hand joint is being tracked
    If rightHand.TrackingState = JointTrackingState.Tracked Then
        ' the hand is sufficiently in front of the shoulder
        If rightShoulder.Position.Z - rightHand.Position.Z > 0.4 Then
            Dim xScaled As Double = (rightHand.Position.X - leftShoulder.Position.X) / ((rightShoulder.Position.X - leftShoulder.Position.X) * 2) * SystemParameters.PrimaryScreenWidth
            Dim yScaled As Double = (rightHand.Position.Y - rightShoulder.Position.Y) / (rightHip.Position.Y - rightShoulder.Position.Y) * SystemParameters.PrimaryScreenHeight

            RightHandX = xScaled
            RightHandY = yScaled
        End If
    End If
End Sub 
```

`RightHandX`现在`RightHandY`告诉你光标应该放在屏幕上的什么位置。

我现在做的这一切略有不同，但上面的方法仍然可以将你的手的位置转换为屏幕上的一个点。

P.S. Never apologize for ignorance, it is where we all started from. Ask questions; it is how we all learn. :)

# powershell - PowerShell #requires 和 .SYNOPSIS 不太好用

> ID：13460831
> 
> 赞同：6
> 
> 时间：2012-11-19T19:35:38.903
> 
> 标签：powershell, powershell-2.0

您可以将 PowerShell 脚本标记为[需要特定版本](http://blogs.msdn.com/b/powershell/archive/2009/02/06/requires-your-scripts.aspx)：

```
#requires -version 2.0 
```

您可以在 PowerShell 脚本中添加额外的帮助文本：

```
<#
.SYNOPSIS

Frobnicates the blargnozzle.
#> 
```

不幸的是，他们似乎玩得不好：

*   如果放在第`#requires`1 行，`Get-Help Frob-Blargnozzle.ps1`则不显示概要，仅显示参数摘要。
*   如果您将 放在`#requires`除第一行之外的任何行上，即使紧跟在`<# ... #>`注释之后，它也会被忽略。

建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:48:01.977

尝试`#requires -version 2.0` 在结束评论中排一行`#>`

```
<#
.SYNOPSIS

Frobnicates the blargnozzle.

#requires -version 2.0
#> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-03T19:54:16.517

[Microsoft 文档](https://docs.microsoft.com/en-gb/powershell/module/Microsoft.PowerShell.Core/about_Requires)在第一次检查时有点令人困惑：

> **使用规则**
> 
> *   #Requires 语句必须是脚本中一行的第一项。
> *   一个脚本可以包含多个#Requires 语句。
> *   #Requires 语句可以出现在脚本的任何行上。

这很容易被误解为您需要将 the`#Requires`放在第一行。事实上，它的意思是你可以`#Requires`在*任何*行上放 a，但它必须是那些行上*唯一*的东西。

此外，您*可以*放在`#Requires`第一行，并且仍然可以正常工作`.SYNOPSIS`- 您只需要在中间添加一个空行：

```
#Requires -Version 3

<#
.SYNOPSIS
My script
#> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T02:37:18.217

将 #Requires 放在注释块 (<#..#>) 之外。它可以在脚本的任何一行，但我倾向于将它们放在初始注释块之后，然后放在任何其他块或代码之前。

# android - XML Layout Alternative（我的得到一个 Lint 警告）

> ID：13460835
> 
> 赞同：1
> 
> 时间：2012-11-19T19:35:50.800
> 
> 标签：android, android-layout

我有一个`ListView`，其中每一行都是一个`GridLayout`有两行的。我希望每个列表项至少有 48dp 高（推荐的新闻目标最小尺寸），因为每个都可以被按下，`GridLayout`如果它不展开它，我希望它在行中垂直居中。

为此，我将`GridLayout`a 放入内部`FrameLayout`，将 设置`FrameLayout`为 48dp 的最小高度，并将 设置`layout_gravity`为`GridLayout`居中。如果我不使用`FrameLayout`并且只设置 的最小高度，那么由于' 的虚假空间分布`GridLayout`，我无法将整个东西很好地垂直居中。`GridLayout`

因此，使用`FrameLayout`给了我想要的结果，但在我的 XML 文件中生成了一个 Lint 警告，“这个 GridLayout 布局或其 FrameLayout 父级是无用的。” 显然它不是没用的，因为它排列正确，但是有没有更好的方法来做到这一点，我错过了？

这是我的 XML（我在 GridLayout 中删除了一堆 TextView，因为它们与这种情况无关）：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:minHeight="48dp"
>
<GridLayout
    android:layout_gravity="center"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:orientation="vertical"
    android:rowCount="2"
    android:useDefaultMargins="true"
>
    <TextView android:id="@+id/number"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="2dp"
        android:layout_rowSpan="2"
        android:minEms="1"
    />
    <TextView android:id="@+id/a"
        android:layout_gravity="center_vertical"
        android:layout_rowSpan="2"
        android:minEms="2"
    />
    <TextView android:id="@+id/b"
        android:layout_marginBottom="0dp"
        android:minEms="3"
    />
    <TextView android:id="@+id/c"
         android:layout_marginTop="0dp"
        android:minEms="3"
    />
    ...
</GridLayout>
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:08:18.210

除非您看到性能问题，否则我会保持这种状态。如果您遇到性能问题，这是*因为*额外的 FrameLayout（如果您直接使用 GridLayout，您可以知道问题是否消失），那么（并且只有这样）我会尝试直接修复 GridLayout。

如果是这样的话，那么我所知道的是 GridLayout 根据*灵活性*的原则分配多余的空间。如果该原则不足以消除歧义，那么您会看到它为最右边的列和底行提供多余空间的行为。我会尝试使用 row/col 属性以确保它了解如何均匀分布。您可以通过设置GridLayout 的子项（在您的情况下为 TextViews）的*重力来控制它。*尝试将它们设置为“中心”，看看是否有帮助。如果没有，更多信息请访问：

[http://developer.android.com/reference/android/widget/GridLayout.html](http://developer.android.com/reference/android/widget/GridLayout.html)

# jquery - 在带有 not() 的 jquery 选择器中使用变量

> ID：13460837
> 
> 赞同：1
> 
> 时间：2012-11-19T19:35:53.120
> 
> 标签：jquery, variables, selector

我有一个包含其他 div（许多类）的 div（id =container）我可以将容器用作字符串“AAAA”，但不能对变量 mystring 执行相同的效果

```
<div id="container">
<div class="AAAA">AAAA content</div>
<div class="AAAA">AAAA content</div>
<div class="BBBB">BBBB content</div>
<div class="CCCC">CCCC content</div>
<div class="DDDD">DDDD content</div>
<div class="AAAA">AAAA content</div>
</div>

<script>
var myclass = "#container>div:not("+".AAAA"+")"; // works
$(myclass).css("background-color", "red"); //works fine
//var mystring = "AAAA";
//var myclass = "\"#container>div:not(."+mystring+")\"";
//$(myclass).css("background-color", "red"); // doesn't work
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:37:02.663

删除转义的引号：

```
var myclass = "#container>div:not(."+mystring+")"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:39:53.150

**工作演示** [http://jsfiddle.net/xWWcZ/](http://jsfiddle.net/xWWcZ/)

原因：您不需要转义`\#`哈希。

希望休息适合事业。

**代码**

```
//var myclass = "#container>div:not("+".AAAA"+")"; // works
//$(myclass).css("background-color", "red"); //works fine
var mystring = "AAAA";
var myclass = "#container>div:not(."+mystring+")";
$(myclass).css("background-color", "red"); // work now​​​ 
```

# asp.net - ASP.NET 通过匹配来自 SQL Server 的用户 ID 使用窗口身份验证

> ID：13460838
> 
> 赞同：0
> 
> 时间：2012-11-19T19:35:58.760
> 
> 标签：asp.net, sql-server, iis

你能给我一个很好的例子，他们将验证我的用户标识，它来自窗口登录工作站并匹配 SQL Server 表中的用户标识列表？我正在使用 IIS，它们都在同一台服务器上，但在不同的机器上。如果我的用户 ID 与表中的用户 ID 之一不匹配，那么它会自动阻止我进入特定网站。我不想要登录或表单。我只想在允许我进入网站之前自动检测我的用户 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:48:29.917

您在网站上使用什么身份验证机制？形式？融合的？证书映射？

最后，身份验证机制将生成一个 cookie，您可以通过 HttpContext.Current.User.Identity.Name 在代码中引用该 cookie。

您的工作是弄清楚您正在使用哪种身份验证机制并了解正在生成的 Identity.Name 值，因为身份验证机制对此进行控制并将用户表中的值与此值同步。不一定需要是用户表的主键；事实上，如果您根本不公开用户表的主键，安全性会略有提高。任何唯一的键都可以；一般来说，我使用 Guid，因为我可以独立生成它们，并且它们的顺序（通常）是不可预测的。

# c - 如何在 C 编程语言中检测 Ctrl-z 文件结束标记

> ID：13460839
> 
> 赞同：2
> 
> 时间：2012-11-19T19:35:59.307
> 
> 标签：c, file-io, fread

我正在尝试检测文件中的最后一个字节是否是 control-z [(MS-DOS 原始文件字节结尾 - 0x1A)](http://en.wikipedia.org/wiki/Control-Z)，但我没有任何成功。我正在使用

```
fseek(filePointer,-1,SEEK_END); 
```

隔离最后一个字节，然后我正在使用

```
fread(buffer, sizeof(buffer[0]), sizeof(custom_char), filePointer); 
```

尝试读取最后一个字节。

当我尝试读取该字节时，我基本上得到了垃圾，我想知道 fread 是否默认忽略了 0x1A 字节，或者人们过去在执行此操作时是否遇到过任何其他古怪的行为。

当前的逻辑出现故障，正在尝试读取最后一个字节并考虑如果 fread 返回 0（fread 应该返回读取的元素数，对吗？）找到的文件标记的结尾：

```
if(fread(buffer, sizeof(buffer[0]), sizeof(custom_char), filePointer) == 0)
{
    // strip off the last byte
} 
```

编辑：我应该补充一点，我在调用 fopen 之后出现的问题，BOM 被写入，并且 BOM 的第 3 个字节被错误地认为是文件标记的 0xA1 结尾并被剥离。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:08:53.203

您需要以二进制模式打开文件：

```
FILE *filePointer = fopen("yourfile.txt", "rb"); 
```

否则文件以文本模式打开，这会将 CR-LF 字符对转换为 C '\n' 字符，并在 Windows/MSDOS 上摆脱 EOF 字符。

# java - 如何对 3 个并行数组进行排序？

> ID：13460840
> 
> 赞同：4
> 
> 时间：2012-11-19T19:36:02.073
> 
> 标签：java, sorting, collections

我目前有 3 个信息数组，不确定如何根据其中一个值对它们进行排序：

```
int[] rank = { 1, 3, 4, 2, 5 };
String[] game = { "Snake", "Mines", "Fragged", "Siege", "Tower" };
int[] year = { 1980, 1983, 1981, 1995, 1992 }; 
```

我想按等级对其进行排序，并且我已经看到很多使用比较器对 2 个并行数组进行排序的示例，但我还没有看到任何对超过 2 个进行排序的示例。

我的第一个想法是为每个对象创建一个带有变量的类，然后对该对象进行排序，但是对于排序真的需要一个额外的类吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T19:37:55.307

> 我的第一个想法是为每个对象创建一个带有变量的类，然后对该对象进行排序，但是对于排序真的需要一个额外的类吗？

这不是绝对*必要*的——如果你真的想的话，你绝对可以写一些代码来避免它。但是，我会说这是一件*非常好的事情*。

您实际上并没有三个单独的项目集合：您有*一个*项目集合，每个项目都有三个属性。所以让你的代码匹配。每当您发现您有并行集合，例如`a[0]`与`b[0]`相关`c[0]`等相关时，您应该考虑将这些信息封装在一个单独的类中。它将使您的代码*更*易于维护，并增强一致性。

例如，这些数组具有不同的长度是没有意义的：但是声明中没有任何内在的东西可以阻止这种情况。如果您有*一个*集合，那么您不可能为不同的属性拥有不同数量的项目，这正是因为您有一个集合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T19:40:18.170

我认为创建一个新类将是最干净的解决方案。每当您将交换应用到第一个数组（排名）时，您都可以手动实现一个新的排序函数来将交换复制到其他 2 个数组，但这很快就会变得混乱。

您只需要以下内容：

```
public class Game implements Comparable<Game>{
    private int rank = 0;
    private int year = 0;
    private String name = "";
    ...
    // Constructor +
    // Usual getters and setters here
    ..
    public int compareTo(Game anotherGame) {
       return this.rank - anotherGame.getRank();
    }
} 
```

然后你可以简单地做：

```
List<Game> games = new ArrayList<Game>();
...
// Add some games to your games list
...
Collections.sort(games); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T19:51:25.327

额外的课程是必要的吗？不，当然不是。你可以想出一个排序例程来保持一切一致。但是，如果下周您决定需要第 4 个数组，例如发布者，会发生什么情况？现在您的排序程序将不起作用，您必须编写一个新程序。

如果你写一个类来保存这些字段作为属性，你可以极大地简化排序逻辑，而且你只需要担心一个数组。您现在所做的任何额外工作都将很快得到补偿，然后下次您必须维护此代码。

# ruby-on-rails - “捆绑”和“捆绑安装”导轨3之间的区别？

> ID：13460842
> 
> 赞同：32
> 
> 时间：2012-11-19T19:36:04.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, bundle, bundler

我已经使用 Rails 3 有一段时间了，从来没有遇到过运行`bundle`和`bundle install`安装 gem之间区别的答案`Gemfile`。

这两个命令有什么区别吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-19T19:39:07.857

No. `install`只是该`bundle`命令的默认选项。但是，不要在您的 Gemfile 中运行任何一个，只需指定`gem "fubar"`那里 - 捆绑器知道如何读取和处理该文件。

# visual-studio-2010 - Azure SDK 1.8 杀死 VS2010 配置切换

> ID：13460846
> 
> 赞同：5
> 
> 时间：2012-11-19T19:36:09.733
> 
> 标签：visual-studio-2010, azure, azure-sdk-.net

自从升级到 Azure SDK 1.8 以来，我们在 VS2010 中的构建配置之间切换时一直存在极长的延迟。在调试和发布版本之间切换可能需要几分钟。我们还看到 VS 窗口在切换期间有时会自行最小化和最大化。

这发生在每台已升级所有 Windows 7 的机器上 100% 的时间。我们按照此页面上的说明执行手动安装：http: [//www.microsoft.com/en-us/download/details.aspx ?id=35448](http://www.microsoft.com/en-us/download/details.aspx?id=35448)

还有人看到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T14:38:59.207

您是否尝试过通过 Web 平台安装程序安装最新的“Windows Azure SDK for .NET (VS 2010 SP1) - 2.1”？我认为它应该清除这些问题。

以下是 Microsoft 下载页面的直接链接：

[http://www.microsoft.com/en-ca/download/details.aspx?id=39708](http://www.microsoft.com/en-ca/download/details.aspx?id=39708)

# php - PHP正则表达式在tẽt中查找特殊的字符串组

> ID：13460863
> 
> 赞同：1
> 
> 时间：2012-11-19T19:37:21.107
> 
> 标签：php, regex

我有一个像这样的字符串：

```
$string = 'hay qua nhi @[3818||Vinh HandSome] và @[101623||Vũ Hoài Anh] '; 
```

我想把它转换成一个数组：

```
$array  = array([0]=>'@[3818||Vinh HandSome]',[1]=>'@[101623||Vũ Hoài Anh]'); 
```

并且还想将原始字符串替换为：

```
$string  = 'hay qua nhi <a href='users/3818'>Vinh HandSome</a> và <a href='users/101623'>Vũ Hoài Anh</a>'; 
```

所以我尝试使用正则表达式：

```
echo preg_replace("/@\[([0-9]+)\|\|(.*)\]/","<a href='/users/$1'>$2</a>",$string);
preg_match_all("/@\[([0-9]+)\|\|(.*)\]/", $string, $result, PREG_PATTERN_ORDER);
print_r($result[0]); 
```

但这似乎不起作用。有没有人知道这种情况下正确的正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:51:41.653

为两个正则表达式尝试一个惰性运算符：`/@\[([0-9].+?)\|\|(.+?)\]/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:53:49.700

```
$subject = 'hay qua nhi @[3818||Vinh HandSome] và @[101623||Vũ Hoài Anh] ';
$pattern = '/@\[([\d]+)\|\|([^\]]+)\]/';
$replacement = "<a href='users/$1'>$2</a>";
$result = preg_replace($pattern, $replacement, $subject); 
```

现在，`$result`将包含

```
hay qua nhi <a href='users/3818'>Vinh HandSome</a> và <a href='users/101623'>Vũ Hoài Anh</a> 
```

# android - Android MediaStore ActivityNotFound 异常，是骗人的

> ID：13460864
> 
> 赞同：0
> 
> 时间：2012-11-19T19:37:27.320
> 
> 标签：android, video, android-intent, android-activity, mediastore

我正在尝试加载仅显示系统库中视频文件的文件列表。

```
final Intent intent1 = new Intent(Intent.ACTION_PICK);
intent1.setDataAndType(android.provider.MediaStore.Video.Media.EXTERNAL_CONTENT_URI, "video/*");
startActivityForResult(intent1, ACTIVITY_SELECT_VIDEO); 
```

并且我`ActivityNotFound`在调试器上遇到异常，导致应用程序崩溃**但**在画廊确实加载的实际手机上仅显示视频文件。

这正是仅加载图像文件时的工作原理，除非没有崩溃。

我如何：

a）一致地加载正确的画廊

b) 捕获此异常或使用条件语句避免它，因为它在所有设备上的行为都不相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:08:35.537

> 一致地加载正确的画廊

我会转储`"video/*"`并`Uri`在`Intent`构造函数中提供。`android.provider.MediaStore.Video.Media.EXTERNAL_CONTENT_URI`应该已经对视频进行了限定，这是集合的错误 MIME 类型。

或者，`android.provider.MediaStore.Video.Media.CONTENT_TYPE`用作 MIME 类型，它不是`"video/*"`.

> 捕捉这个异常

使用`try`/`catch`块，就像在 Java 中捕获任何异常一样。`ActivityNotFoundException`是一个`RuntimeException`。

> 或用条件语句避免它

使用`PackageManager`and`queryIntentActivities()`或`resolveActivity()`。

# r - 为什么 `knitr' 中的 `options(digits=3)` 会被忽略？

> ID：13460865
> 
> 赞同：3
> 
> 时间：2012-11-19T19:37:39.367
> 
> 标签：r, options, digits, knitr

当我在 R 中逐行运行以下命令时，它可以正常工作，但是`knitr`会`options(digits=3)`被忽略。

为什么？有什么解决办法吗？

```
<<cor>>=
#mock up data set.
x <- c(rnorm(100))
y <- c(rnorm(100))
z <- c(rnorm(100))
df <- as.data.frame(cbind(x,y,z))
df$x<- as.numeric(df$x)
df$y<- as.numeric(df$y)
df$z<- as.numeric(df$z)
options(digits=3)
cor(df, use = 'na.or.complete', method = c("spearman"))
@ 
```

感谢您的任何帮助或指点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:33:49.107

我在寻找其他问题时找到了解决方案。离开`options(digits=3)`并使用

```
round(cor(df, use = "na.or.complete", method = c("spearman")), digits = 3) 
```

这留下了为什么`options(...)`不起作用的问题。但我可以愉快地忍受它！

感谢大家的时间！

格瑞特

# facebook-graph-api - 如何通过 Facebook 的城市 ID 查找城市名称？

> ID：13460867
> 
> 赞同：1
> 
> 时间：2012-11-19T19:37:41.657
> 
> 标签：facebook-graph-api, city

或者，我可以下载一个国家的所有城市，然后在内存中搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-12T20:52:19.920

它实际上很简单，但没有（显然）记录在案......只需`http://graph.facebook.com/106078429431815`使用`106078429431815`城市 ID 进行查询（本例中为伦敦）。

# jquery - 将 ListNav 与数据属性一起使用

> ID：13460874
> 
> 赞同：0
> 
> 时间：2012-11-19T19:37:59.243
> 
> 标签：jquery

我正在使用 jquery 插件 ListNav 按字母顺序显示我的“作者”列表。

这非常适合按字母顺序排序名字，但我需要它按姓氏排序。

有没有办法使用 ListNav 插件来实现这一点？也许一种方法是将姓氏存储在数据属性中（data-last-name="Smith"），然后让插件使用该数据属性对列表进行排序？

（插件）[http://www.ihwy.com/Labs/jquery-listnav-plugin.aspx](http://www.ihwy.com/Labs/jquery-listnav-plugin.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T15:35:53.757

看看我的 ListNav 版本[https://github.com/esteinborn/jquery-listnav](https://github.com/esteinborn/jquery-listnav)。

您可以分配一个`filterSelector`选项以按选择器过滤：

将您的姓氏包裹在一个`<span class="lastname"></span>`

然后设置选项`filterSelector: '.lastname'`，你应该都设置好了。

# objective-c - XCode 不会将我的 iPhone 设置为活动方案

> ID：13460875
> 
> 赞同：1
> 
> 时间：2012-11-19T19:38:10.803
> 
> 标签：objective-c, ios, xcode, linker

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:41:44.673

通过执行以下步骤删除此项目的派生数据目录：

关闭项目，但保持 Xcode 处于打开状态。转到“组织者”-> 项目。在左侧，选择您的项目，然后单击导出数据的“删除”按钮。

一旦它消失了，打开项目，运行 Product -> Clean 并尝试重新部署。

如果“删除”按钮显示为灰色，请单击派生目录路径右侧的小箭头（这将打开 Finder）。关闭 Xcode，然后将该目录发送到垃圾箱。重新启动 Xcode，在项目上运行 Product -> Clean 并尝试重新部署。

# linux - 一个目标有一个依赖，该依赖本身不是一个目标

> ID：13460879
> 
> 赞同：0
> 
> 时间：2012-11-19T19:38:33.657
> 
> 标签：linux, makefile

这是 Linux 中制作文件的教程：http: [//mrbook.org/tutorials/make/](http://mrbook.org/tutorials/make/)

这是一个make文件示例：

```
all: hello

hello: main.o factorial.o hello.o
    g++ main.o factorial.o hello.o -o hello

main.o: main.cpp
    g++ -c main.cpp

factorial.o: factorial.cpp
    g++ -c factorial.cpp

hello.o: hello.cpp
    g++ -c hello.cpp

clean:
    rm -rf *o hello 
```

对我来说，这条线令人困惑`main.o: main.cpp` 是什么意思？据我了解，这意味着目标`main.o`具有`main.cpp`依赖性。但是没有目标，`main.cpp` 这意味着目标（`main.o`）具有依赖项（`main.cpp`），而该依赖项（`main.cpp`）本身不是目标。那么它是什么（`main.cpp`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:41:46.220

`main.cpp`是一个*文件*。

从扩展名来看，我们期望它是一个 c++ 源文件，并且相关的规则表明是这种情况。

该规则将在`main.cpp`比`main.o`（这也是一个文件）更新的任何时间执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:42:10.463

`main.cpp`是你的源代码。没有目标的事实`main.cpp`意味着 Make 无法生成该文件。您应该自己创建它。

# java - Instances and iterations. Which one is better?

> ID：13460881
> 
> 赞同：9
> 
> 时间：2012-11-19T19:38:38.197
> 
> 标签：java, performance, iteration, instantiation

I wanna read documents and process them. Each iteration processes one document.

Which kind of code is better?

1.

```
BufferedReader br;
for(File f : files)
{
    br = new BufferedReader(......);
    ......
} 
```

2.

```
for(File f : files)
{
    BufferedReader br = new BufferedReader(......);
    ......
} 
```

My point is which one is more efficient in terms of space and speed?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T19:40:40.463

在我看来，后者更清楚。一般来说，更喜欢用尽可能小的范围声明局部变量，理想情况下在声明点初始化它们。

它不会*直接*影响性能 - 但会影响可读性和维护，这会影响您进行更改的难易程度，从而*影响*性能。

一般来说：

*   制定你的表现和行为要求（以及你将如何测试两者）
*   编写实现你想要的行为的最简单、最干净的代码
*   看看它是否满足您的性能要求
*   如果不是，请分析问题出在哪里，并做出“最少不干净”的更改以改进事情。（这可能意味着进行设计更改而不是微优化。）
*   起泡、冲洗、重复，直到您的代码满足您的性能要求并且尽可能干净。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T19:41:05.910

1.  它们完全相同，编译成字节码后所有差异都将丢失。
2.  即使我们想象最糟糕的情况，理论上（在另一个 Java 中）可能相当于一次额外的内存写入，但差异会非常小，以至于您需要世界上最精确的原子钟来测量它。
3.  对您而言，真正的区别应该在于代码的整体可维护性，这应该比低于 2-3% 的实际速度差异更令人担忧。例如，许多设计模式引入了某种开销，但人们更愿意为它为代码库提供的灵活性付出代价。

在代码优化中很容易陷入*小胜大败*的陷阱：每个单独的方法可能优化到完美，但由于全局架构的不足，整体系统性能仍然可能是灾难。必须始终自上而下进行优化，这样做时，您会发现如果替换为优化版本，实际上只有 1% 或更少的代码行对整体性能有贡献。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T19:39:38.537

如果您不在`br`其他地方使用该变量，则它们完全相同。

注意不要浪费太多时间尝试纳米优化。即使字节码不同，在优化显而易见的情况下，JIT 也不会那么糟糕。您不需要在使用它的块之前声明变量，也不应该因为它使变量的用途不太清楚。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T19:44:00.573

唯一的区别是`br`第二种情况在循环范围内是本地的，而在第一种情况下它可以在循环外访问。但请注意，即使在第一种情况下，`br`ref 变量也可以在循环外使用，而不是您在 for 循环中提供的值。

否则它们是一样的。虽然第二种情况更具可读性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T19:42:05.937

效率方面两者是相同的，大部分时间都被编译成相似的字节码。

在可读性方面，第二种方法更好。通常，当代码增长时，它会很有帮助。特别是在调试时，您不必担心稍后在该块之外修改该变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T20:19:47.483

3.

```
for(File f : files)
{
    try( BufferedReader br = new BufferedReader(......) )
    {
        ......
    }
} 
```

# javascript - How to change an image when active to a seperate image?

> ID：13460884
> 
> 赞同：0
> 
> 时间：2012-11-19T19:38:51.813
> 
> 标签：javascript, css, twitter-bootstrap

I would like to do something similar to what was posted here...

[Make Twitter Bootstrap navbar link active](https://stackoverflow.com/questions/11813498/make-twitter-bootstrap-navbar-link-active)

Except instead of an item on the navbar becoming bolded, I would like it to use another image when active. From this...

![before](../Images/8bd09634f4772a2b5f5ee865bd36ea47.png)

to this...

![after](../Images/21e399f0c87d431c0bc3e529af6d37ad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:00:06.837

在您发布的示例链接中，他们所做的只是将 CSS .active 类添加到活动链接。如果你做同样的事情并将活动类添加到正确的元素中，你可以在 css 中做一些事情，比如，

```
.active{
    background: url('path/to/image.jpg') no-repeat;
} 
```

# c# - 更新实体框架模型后，Visual Studio 看不到变化

> ID：13460886
> 
> 赞同：53
> 
> 时间：2012-11-19T19:39:02.687
> 
> 标签：c#, entity-framework, entity-framework-5

如果我对我的 EF 5.0 模型进行任何更改，VS 似乎看不到这些更改。我尝试添加一个新表，该表在模型中显示良好，但是如果我尝试在某处使用它，该表不会出现在智能感知中，我无法使用它。

我也尝试过更改列的数据类型，如果我查看 .edmx 模型文件，它再次显示良好，但 Visual Studio 仍然会在该字段上给我编译器错误，因为我试图分配不正确的数据类型。

如果我完全删除 EDMX 并重新创建它，那么更改工作正常。但是每次我应该能够“从数据库更新模型”并重建时，从数据库重新生成是很烦人的。

我以前从未遇到过 EF 的这些问题。有谁知道这个问题的原因或解决方法？

谢谢。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-10-02T05:35:11.517

首先构建您的项目，如果成功，请右键单击**“model.tt”**文件并选择**运行自定义工具**。它会修复它。

再次构建您的项目并指向**“model.context.tt”**运行自定义工具。它将更新**DbSet**列表。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-28T07:22:00.210

如果这是位于文件夹中的 edmx 文件的错误，现在已修复 - 下载并安装 VS 2012 Update 1。您可以从以下网址获取它：http: [//www.microsoft.com/visualstudio/eng/downloads#d-视觉工作室 2012 更新](http://www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-28T06:29:09.770

这显然是实体框架中的一个错误，即当您的 Edmx 文件位于文件夹内时，模型不会更新。目前可用的解决方法是：

1.  安装 VS 2012 Update 1 应该可以修复这个错误。
2.  如果您无法安装 Update 1，则必须右键单击 model.tt T4 模板文件并单击运行自定义工具。这将为您更新课程。

希望能帮助那里的人。

链接：[http ://thedatafarm.com/blog/data-access/watch-out-for-vs2012-edmx-code-generation-special-case/](http://thedatafarm.com/blog/data-access/watch-out-for-vs2012-edmx-code-generation-special-case/)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-03-27T12:23:00.143

我也有这个问题，但是，右键单击 model.tt 文件并运行“自定义工具”对我没有任何影响，但是 Ghlouw 链接到的页面上的评论提到使用菜单项“BUILD > 转换所有 T4 模板。” 为我做的

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-01-13T10:15:29.037

右键单击该`.tt`文件并选择“运行自定义工具”，这应该会更新它： [![看图片](../Images/d613adf713f44f52839af6c1aa3aab6c.png)](https://i.stack.imgur.com/bcK9i.png)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-11-19T19:51:38.670

您应该在`<XXX>Model.tt`某处有一个文件，该文件是生成模型类的 T4 模板。

如果它在不同的项目中，则在保存 edmx 文件时它不会更新。

无论如何，尝试在解决方案资源管理器中右键单击它并选择`Run Custom Tool`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-05-19T17:09:45.663

我搜索了这个答案，因为我在 VS2013 中遇到了类似的情况。就我而言，我发现一个简单的“ `Clean Solution`”清除了所有旧定义。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-19T19:42:16.813

您在 N 层项目中工作吗？如果是这样，请在使用之前尝试重建您的数据层（或存储 EDMX 文件的任何位置）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-01T14:11:41.507

我也遇到过这个问题，在 model.tt 文件下没有生成任何类。就我而言，这取决于我如何在 SQL2012 中构建数据库。我将表中的一列设置为可为空的，这也是一个外键，虽然我认为你应该能够做到这一点，但它在 EF5 中引起了问题。

一旦这被清除并且图表从数据库中更新，它们就会重新出现。

EF5 VS2013

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-20T10:12:03.943

更改笔记本电脑后当我更新实体框架模型时，代码中看不到存储过程

我做了什么来使这个工作

*   更新 Visual Studio 2012 更新 5（不工作）
*   从程序更新/修改（不工作）
*   更新存储过程后，再次构建项目然后转到 context.cs，右键单击并运行自定义工具（不工作）
*   做RND（有人说问题是由于MSSQL中的一些权限）但不幸的是我在MSSQL中做了很多权限但是（不工作）
*   安装 2019 并运行项目。现在一切正常

结论

*   Visual Studio 2012 有一个错误（错误已在更新 1、2、3 和 4 中解决）
*   更改 Visual Studio 版本将解决问题

# php - 如果访问者不是来自某个页面（在同一域上），则阻止访问 PHP 页面

> ID：13460888
> 
> 赞同：0
> 
> 时间：2012-11-19T19:39:05.693
> 
> 标签：php, nginx, http-referer

正如标题所说，如果访问者不是来自特定 URL，我想阻止访问者查看页面内容。我怎样才能做到这一点？我在 Nginx 上有 PHP。使用 PHP 或 Nginx 会更好吗？

我读到 using`HTTP_REFERER`不是最好的主意，因为它对浏览器不是强制性的……你会怎么做（代码示例）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:42:39.290

可能并不完美，但我会在初始页面上设置一个 $_SESSION，然后在链接页面上检查并删除它。

```
$_SESSION['allow'] = 'yes'; 
```

然后在下一页

```
if(isset($_SESSION['allow']) && $_SESSION['allow'] == 'yes') {
    $_SESSION['allow'] = 'now viewing';
} 
```

或类似的东西....

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T19:42:46.327

最防弹的解决方案是传递一个 _GET 参数，这个参数并不容易从一页猜测到下一页，a-la 唯一标记。

然而，要正确实现它需要付出巨大的努力，因为它不是最简单的解决方案，而且到目前为止也不是最简单的实现。

按照复杂性的顺序，最简单的在顶部，您的替代方案是：

*   推荐人
*   使用固定的 GET 参数
*   Cookie 放置在用户的第一页上。不适用于不接受 cookie 的访问者，如果您在欧盟工作，则需要 cookie 政策。
*   使用 nonce 作为 GET 参数

**最后一个解决方案详细**

您的初始页面生成一次性字符串，并将其附加到每个链接。然后检查此字符串是否与数据库/平面文件中的条目匹配，如果是，则允许访问。如果没有，您拒绝访问。然后，您使令牌无效，因此用户必须再次浏览该页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:42:14.987

限制对页面访问的唯一方法是使用某人的凭据，没有可靠的方法来检测用户来自哪里，因为这可能会被欺骗。

因此，只有当用户刚刚来自页面 A 时，才允许访问页面 B（除非您通过`HTTP_REFERER`

您还可以在页面 A 上设置 cookie（或会话变量）而不显示页面 B，除非用户设置了 cookie（会话变量），但这并不要求用户直接从页面 A 转到页面 B

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T19:43:17.290

一种简单的方法是在第一页设置一个一次性会话变量，然后在第二页读取该变量。

例如，第 1 页：

```
$_SESSION['viewed_page1'] = true; 
```

第2页：

```
if(!$_SESSION['viewed_page1']){
  echo 'You need to visit page 1 first!';
} 
```

.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T19:42:45.933

您可以使用会话变量并从一个页面传递特定的“密钥”，并在下一页上要求它以显示它。

[你可以在这里](http://us2.php.net/manual/en/book.session.php)找到关于会话的信息

# python - 如何在 Python 中重定向包含类的所有方法？

> ID：13460889
> 
> 赞同：15
> 
> 时间：2012-11-19T19:39:06.427
> 
> 标签：python, inheritance, pandas, composition

如何实现组合模式？我有一个`Container`具有属性 object的类`Contained`。我想通过简单地调用来重定向/允许访问`Contained`类的所有方法。我是否以正确的方式做正确的事？`Container``my_container.some_contained_method()`

我使用类似的东西：

```
class Container:
   def __init__(self):
       self.contained = Contained()
   def __getattr__(self, item):
       if item in self.__dict__: # some overridden
           return self.__dict__[item] 
       else:
           return self.contained.__getattr__(item) # redirection 
```

**背景：**

我正在尝试构建一个类 ( `Indicator`)，以增加现有类 ( `pandas.DataFrame`) 的功能。`Indicator`将拥有所有的方法`DataFrame`。我可以使用*继承*，但我遵循“优先*组合*优于*继承*”的建议（例如，参见：[python:inheriting or composition](https://stackoverflow.com/questions/2389816/python-inheriting-or-composition)中的答案）。不继承的一个原因是因为基类不可序列化，我需要序列化。

我找到[了这个](http://yauhen.yakimovich.info/blog/tag/composition/)，但我不确定它是否符合我的需要。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-19T21:07:07.253

注意事项：

*   DataFrames 有很多属性。如果`DataFrame`属性是数字，您可能只想返回该数字。但是如果`DataFrame`属性是`DataFrame`你可能想要返回一个`Container`. 如果`DataFrame`属性是一个`Series`或一个描述符，我们应该怎么做？要`Container.__getattr__`正确实现，您确实必须*为每个属性*编写单元测试。
*   还需要进行单元测试`__getitem__`。
*   您还必须定义和单元测试`__setattr__`and `__setitem__`, `__iter__`,`__len__`等。
*   Pickling 是序列化的一种形式，所以如果`DataFrames`是可腌制的，我不确定`Container`s 如何真正帮助序列化。

一些评论：

*   `__getattr__`仅当属性不在 中时才调用`self.__dict__`。所以你不需要`if item in self.__dict__`在你的`__getattr__`.

*   `self.contained.__getattr__(item)`直接调用`self.contained`'s `__getattr__`方法。这通常不是您想要做的，因为它绕过了整个 Python 属性查找机制。例如，它忽略了该属性可能位于`self.contained.__dict__`或位于`__dict__`的基数之一中的可能性，`self.contained.__class__`或者如果`item`指代描述符。而是使用`getattr(self.contained, item)`.

* * *

```
import pandas
import numpy as np

def tocontainer(func):
    def wrapper(*args, **kwargs):
        result = func(*args, **kwargs)
        return Container(result)
    return wrapper

class Container(object):
   def __init__(self, df):
       self.contained = df
   def __getitem__(self, item):
       result = self.contained[item]
       if isinstance(result, type(self.contained)):
           result = Container(result)
       return result
   def __getattr__(self, item):
       result = getattr(self.contained, item)
       if callable(result):
           result = tocontainer(result)
       return result
   def __repr__(self):
       return repr(self.contained) 
```

下面是一些随机代码，用于测试是否——至少在表面上——正确地`Container`委托给`DataFrame`s 并返回`Containers`：

```
df = pandas.DataFrame(
    [(1, 2), (1, 3), (1, 4), (2, 1),(2,2,)], columns=['col1', 'col2'])
df = Container(df)
df['col1'][3] = 0
print(df)
#    col1  col2
# 0     1     2
# 1     1     3
# 2     1     4
# 3     2     1
# 4     2     2
gp = df.groupby('col1').aggregate(np.count_nonzero)
print(gp)
#       col2
# col1      
# 1        3
# 2        2
print(type(gp))
# <class '__main__.Container'>

print(type(gp[gp.col2 > 2]))
# <class '__main__.Container'>

tf = gp[gp.col2 > 2].reset_index()
print(type(tf))
# <class '__main__.Container'>

result = df[df.col1 == tf.col1]
print(type(result))
# <class '__main__.Container'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-08T13:12:22.353

我发现 unbutbu 的答案对我自己的应用程序非常有用，我遇到了在 jupyter 笔记本中正确显示它的问题。我发现将以下方法添加到类中解决了这个问题。

```
def _repr_html_(self):
    return self.contained._repr_html_()

def _repr_latex_(self):
    return self.contained._repr_latex_() 
```

# c - 监听 DNS 请求

> ID：13460897
> 
> 赞同：2
> 
> 时间：2012-11-19T19:39:30.333
> 
> 标签：c, sockets, dns

我正在尝试在本地主机上收听浏览器的 DNS 请求。

我写了这段代码：

```
WSADATA wsaData;
unsigned char hostname[100];

int sockfd;
struct addrinfo hints, *servinfo, *p;
int rv;
int numbytes;
struct sockaddr_storage their_addr;
char buf[1000];
socklen_t addr_len;

memset(&hints, 0, sizeof hints);
hints.ai_family = AF_UNSPEC; // set to AF_INET to force IPv4
hints.ai_socktype = SOCK_DGRAM;
hints.ai_flags = AI_PASSIVE; // use my IP

if (WSAStartup(MAKEWORD(2,0), &wsaData) != 0) 
{
    fprintf(stderr, "WSAStartup failed.\n");
    exit(1);
}

if ((rv = getaddrinfo(NULL, "53", &hints, &servinfo)) != 0) {
    fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
    return 1;
}

// loop through all the results and bind to the first we can
for(p = servinfo; p != NULL; p = p->ai_next) {
    if ((sockfd = socket(AF_INET, SOCK_DGRAM,IPPROTO_UDP)) == -1) {
        perror("listener: socket");
        continue;
    }

    if (bind(sockfd, p->ai_addr, p->ai_addrlen) == -1) {
        closesocket(sockfd);
        perror("listener: bind");
        continue;
    }

    break;
}

if (p == NULL) {
    fprintf(stderr, "listener: failed to bind socket\n");
    return 2;
}

freeaddrinfo(servinfo);

printf("listener: waiting to recvfrom...\n");
addr_len = sizeof their_addr;
if ((numbytes = recvfrom(sockfd, buf, 1000-1 , 0,(struct sockaddr *)&their_addr, &addr_len)) == -1) {
    perror("recvfrom");
    exit(1);

    printf("listener: packet is %d bytes long\n", numbytes);
    buf[numbytes] = '\0';
    printf("listener: packet contains \"%s\"\n", buf);
}

closesocket(sockfd); 
```

我收到了一些奇怪的 39 字节数据包和一些我无法阅读的字符......而且它总是在 53 上收到数据包，当不上网时，这不是收听 dns 请求的好方法吗？

我在 Windows 上将我的 DNS Ip 更改为 127.0.0.1。

亲切的问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:48:51.680

[DNS](http://en.wikipedia.org/wiki/Domain_Name_System)不是像 HTTP 这样的基于文本的协议，您应该对数据包进行解码。查看[`RFC 1035`](http://www.ietf.org/rfc/rfc1035.txt)详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:56:04.097

我是这样解析的：

```
 pointer = substring( buffer, 14, numbytes-18);
    //printf("Substring: %s \n",pointer);
    //printf("listener: packet contains \"%x\"\n", buffer);

    for( i = 0; i < strlen(pointer); i++)
    {
        // Indien kleiner als 32 dan moet het een . worden
        if(pointer[i] < 32)
            result[i] = '.';
        // Indien groeter als 32 en kleiner als 127 is het een char
        else if(pointer[i] > 32 && pointer[i] < 127)
            result[i] = (char)(pointer[i]);
        else
            continue;
    }
    result[i] = '\0'; 
```

然后在你的结果中你有类似“www.google.com”的东西。

# iphone - 仪器中的 UIImage 泄漏

> ID：13460899
> 
> 赞同：0
> 
> 时间：2012-11-19T19:39:52.093
> 
> 标签：iphone, ios6, instruments

当按下 UIButton 从文件中加载图像以进行滚动视图时，它会在仪器中泄漏

**泄漏的对象**是 UIImage

**大小**为 48 字节

**负责任的图书馆**是基础

**负责框架**是_NSThread_main_

当我单击地址箭头以获取历史记录时

**类别 事件类型 RefCt 大小 责任库 责任调用者**

Malloc 32 字节 Malloc 1 32 libsystem_c.dylib strdup Malloc 32 字节空闲 0 -32 libsystem_c.dylib asl_client_release UIImage Malloc 1 48 Foundation **NSThread_main** ***UIImage*** **Retain** **2 0 Foundation **NSThread_main*** **UIImage Retain 3 0 Foundation __NSThreadPerformPerform UIImage Retain 4 0 Foundation __NSThreadPerformPerform UIImage Release 3 0 Foundation __NSThreadPerformPerform UIImage Retain 4 0 Foundation -[NSInvocationOperation main] UIImage Retain 5 0 Foundation -[NSInvocationOperation main] UIImage Release 4 0 Foundation -[NSInvocationOperation main] UIImage Release 3 0 Foundation -[NSInvocationOperation main] UIImage Release 2 0 Foundation __NSThreadPerformPerform UIImage Release 1 0 Foundation -[NSInvocationOperation dealloc]***

 ***```
-(void)ScrollView:(id)sender
{
NSMutableArray *photos = [[[NSMutableArray alloc] init]autorelease];

Photo *photo;

photo = [Photo photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"image0" ofType:@"png"]];
[photos addObject:photo];

photo = [Photo photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"image1" ofType:@"png"]];
[photos addObject:photo];

photo = [Photo photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"image2" ofType:@"png"]];
[photos addObject:photo];

photo = [Photo photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"image3" ofType:@"png"]];
[photos addObject:photo];

photo = [Photo photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"image4" ofType:@"png"]];
[photos addObject:photo];

photo = [Photo photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"image5" ofType:@"png"]];
[photos addObject:photo];

 ImageViewController *imageviewcontroller = [[[ImageViewController alloc] initWithPhotos:photos]autorelease];

imageviewcontroller.displayActionButton = YES;

UINavigationController *navigationController = [[[UINavigationController alloc]
                                                initWithRootViewController:imageviewcontroller]autorelease];

navigationController.navigationBar.tintColor = [UIColor clearColor];

[self presentViewController:navigationController animated:YES completion:NULL];
}

 + (Photo *)photoWithFilePath:(NSString *)path {
return [[[Photo alloc] initWithFilePath:path]autorelease]; 
```

如果有人可以就问题可能提出一些想法，那将不胜感激。

提前致谢。***

# api - 有限收集的 HTTP 状态码？

> ID：13460902
> 
> 赞同：6
> 
> 时间：2012-11-19T19:39:59.013
> 
> 标签：api, http, rest, http-status-codes

我有一个安静的服务，其中一个集合是有限的（出于用户体验的原因）。在这种情况下，它有 25 个项目的上限。如果超过，则必须先删除资源，然后才能添加更多资源。例如，如果客户提交：

```
POST http://somesite.com/api/v2/stuff
{"cool":"stuff"} 
```

里面有< 25件东西：

```
200 OK 
```

如果 > 25 东西：

```
???

DELETE http://somesite.com/api/v2/stuff/:id

POST http://somesite.com/api/v2/stuff
{"cool":"stuff"}

200 OK 
```

什么是最好的代码？直400？409冲突？429？没有一个似乎完全正确..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T22:53:19.510

使用 409。来自[httpbis 第 7.5.8 节](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p2-semantics-21#section-7.5.8)：

> “由于与资源的当前状态冲突，请求无法完成。此代码仅在预期用户可能能够解决冲突并重新提交请求的情况下才允许使用。有效负载应包含足够的供用户识别冲突来源的信息。”

在您的情况下，资源是由 标识的资源`http://somesite.com/api/v2/stuff`，并且`POST`由于与其当前状态（即它已经被最大化）冲突而无法完成请求。在您的回复中，为用户提供足够的信息（最好是链接）以删除现有成员之一、超出限制或采取其他措施。然后他们可以重新提交原始请求。

# cuda - 内核构造和并行构造之间的区别

> ID：13460903
> 
> 赞同：15
> 
> 时间：2012-11-19T19:39:59.663
> 
> 标签：cuda, gpu, gpgpu, openacc

我研究了很多文章和 OpenACC 的手册，但我仍然不明白这两种结构的主要区别。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-20T02:13:31.777

`kernels`指令是更一般的情况，如果您以前编写过 GPU（例如 CUDA）内核，您可能会想到这种情况。 `kernels`简单地指示编译器处理一段代码，并生成任意数量的“内核”，任意“维度”，按顺序执行，以将特定代码部分并行化/卸载到加速器。该`parallel`构造允许更细粒度地控制编译器将如何尝试在加速器上构建工作，例如通过指定并行化的特定维度。例如，作为`parallel`指令的一部分，工人和帮派的数量通常是恒定的（因为通常只暗示一个潜在的“内核”），`kernels`

[这篇 PGI 文章](http://www.pgroup.com/lit/articles/insider/v4n2a1.htm)中包含对这个特定问题的良好处理。

引用文章摘要：“OpenACC 内核和并行结构都试图解决相同的问题，识别循环并行性并将其映射到机器并行性。内核结构更加隐含，让编译器更自由地查找和映射并行性到目标加速器的要求。并行构造更明确，需要程序员进行更多分析以确定何时合法和合适。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T23:42:43.323

OpenACC 指令和 GPU 内核只是表示同一事物的两种方式——一段可以并行运行的代码。

当改造现有应用程序以利用 GPU 和/或希望让编译器处理与内存管理等问题相关的更多细节时，OpenACC 可能是最佳选择。这可以加快编写应用程序的速度，但可能会降低性能。

从头开始编写 GPU 应用程序和/或需要更细粒度的控制时，内核可能是最好的。这可能会使应用程序花费更长的时间来编写，但可能会提高性能。

我认为刚接触 GPU 的人可能会倾向于使用 OpenACC，因为它看起来更熟悉。但我认为实际上最好另辟蹊径，从编写内核开始，然后可能转向 OpenACC 以节省一些项目的时间。原因是 OpenACC 是一个[泄漏的抽象](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)。因此，虽然 OpenACC 可能会让 GPU 细节看起来像是抽象出来的，但它们仍然存在。因此，在不了解后台发生的情况下使用 OpenACC 编写 GPU 代码可能会令人沮丧，在尝试编译时会出现奇怪的错误消息，并导致应用程序性能低下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-29T08:49:22.137

**并行构造**

1.  定义应编译以在加速器设备上并行执行的程序区域。

2.  并行循环指令是程序员的断言，即并行化受影响的循环既安全又可取。这依赖于程序员正确识别代码中的并行性并删除代码中可能对并行化不安全的任何内容。如果程序员错误地断言循环可能被并行化，那么生成的应用程序可能会产生不正确的结果。

3.  并行结构允许更细粒度地控制编译器将如何尝试在加速器上构建工作。因此它不会严重依赖编译器自动并行化代码的能力。

4.  当并行循环用于访问相同数据的两个后续循环时，编译器可能会也可能不会在两个循环之间的主机和设备之间来回复制数据。

5.  更有经验的并行程序员可能已经在他们的代码中识别出并行循环，他们可能会发现并行循环方法更可取。

例如[参考](http://www.bu.edu/tech/files/2017/04/OpenACC-2017Spring.pdf)

```
#pragma acc parallel
{
    #pragma acc loop
    for (i=0; i<n; i++) 
         a[i] = 3.0f*(float)(i+1);
    #pragma acc loop
    for (i=0; i<n; i++) 
         b[i] = 2.0f*a[i];
} 
```

 生成一个内核

 两个循环之间没有障碍：第二个循环可能在第一个循环结束之前开始。（这与 OpenMP 不同）。

**内核构造**

1.  定义应编译为内核序列以在加速器设备上执行的程序区域。

2.  关于内核构造需要注意的重要一点是，编译器将分析代码并仅在确定这样做安全时才进行并行化。在某些情况下，编译器在编译时可能没有足够的信息来确定循环是否安全并行化，在这种情况下它不会并行化循环，即使程序员可以清楚地看到循环是安全并行的。

3.  kernels 构造为编译器提供了最大的余地来并行化和优化它认为适合目标加速器的代码，但也很大程度上依赖于编译器自动并行化代码的能力。

4.  内核构造提供的一个更显着的好处是，如果多个循环访问相同的数据，它只会被复制到加速器一次，这可能会导致更少的数据移动。

5.  并行编程经验较少或代码包含大量需要分析的循环的程序员可能会发现内核方法要简单得多，因为它给编译器带来了更多负担。

例如[参考](http://www.bu.edu/tech/files/2017/04/OpenACC-2017Spring.pdf)

```
#pragma acc kernels
{
   for (i=0; i<n; i++)
       a[i] = 3.0f*(float)(i+1);
   for (i=0; i<n; i++)
        b[i] = 2.0f*a[i];
} 
```

 生成两个内核

 两个循环之间存在隐含的障碍：第二个循环将在第一个循环结束后开始。

# c# - 字符串末尾的 /" 的 C# 正则表达式

> ID：13460905
> 
> 赞同：1
> 
> 时间：2012-11-19T19:40:05.957
> 
> 标签：c#, regex, parsing, double-quotes

我有一组 url，我需要编写正则表达式来过滤所需的内容。

> /data/43492-someText/"
> 
> /data/221639-anotherText/"
> 
> /data/116345-不同文本/"
> 
> /data/6630-boooing/"
> 
> /data/220742-foo/"

我需要的只是最后没有 /" 的字符串，所以

> /data/220742-foo

我的正则表达式如下所示：

```
@"/data/[0-9]{1,10}-.*""\s" 
```

注意：我不想用字符串替换来做这个，因为我的项目有一些限制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:42:17.703

如果（不以 结尾的字符串`/`）是唯一要求，则使用如下内容：

```
var desiredUrls = urls.Where(url => !url.EndsWith("/\"")) 
```

我最初将该问题阅读为过滤网址的愿望，但我可以看到它如何可能是一个映射问题。

```
var withoutSuffix = urls.Select(url => url.TrimEnd("/\"".ToCharArray()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T19:48:11.950

我认为正则表达式对于您正在尝试做的事情来说有点矫枉过正。

无论如何，你可以使用这样的[东西](http://regexr.com?32s1k)：

```
@"/data/[0-9]{1,10}-[^/]+" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T19:42:40.633

您可以使用[`TrimEnd`](http://msdn.microsoft.com/en-us/library/system.string.trimend.aspx)从字符串末尾删除字符：

```
s.TrimEnd('/', '"') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T19:43:02.283

你可以使用类似的东西：

```
(/data/[0-9]{1,10}-.+)/ 
```

没有尾随 / 的字符串将在第一个捕获组中。

# objective-c - 在 xcode 故事板中隐藏键盘

> ID：13460910
> 
> 赞同：0
> 
> 时间：2012-11-19T19:40:37.583
> 
> 标签：objective-c, ios

xcode 的新手，我正在 xcode 4.2 中创建一个简单的登录表单，我想隐藏键盘，我认为我有正确的代码，从教程中它说我需要将视图的类更改为 UIControl 但那里对此没有选择，在使用故事板时还有其他方法吗？

```
- (IBAction)backGroundTouched:(id)sender
{
    [emailTextField resignFirstResponder];
    [passTextField resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T12:44:55.413

假设您在 viewCotroller 中执行它们，请调用

```
[self.view endEditing:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:49:35.383

如果您的两个文本字段是某些更高级别视图的子视图，您也可以使用`[higherLevelView endEditing];`而不关心当前哪个子视图处于活动状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T21:07:43.967

我遵循了本教程：[http](http://www.techotopia.com/index.php/Writing_iOS_7_Code_to_Hide_the_Keyboard) ://www.techotopia.com/index.php/Writing_iOS_7_Code_to_Hide_the_Keyboard它对我有用：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [[event allTouches] anyObject];
    if ([_textField isFirstResponder] && [touch view] != _textField) {
        [_textField resignFirstResponder];
    }
    [super touchesBegan:touches withEvent:event];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T12:12:39.620

```
Make sure your both text fields is connect with it's IBOutlets.
No need to change UIView to UIControl.

// Connect every textfield's "Did end on exit" event with this method.
-(IBAction)textFieldReturn:(id)sender
{
    [sender resignFirstResponder];

}

// Use this method also if you want to hide keyboard when user touch in background

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [emailTextField resignFirstResponder];
    [passTextField resignFirstResponder];
} 
```

# flexslider - 黑莓剧本上的 Flexslider WP 插件

> ID：13460912
> 
> 赞同：1
> 
> 时间：2012-11-19T19:40:41.280
> 
> 标签：flexslider, playbook

我正在将 Flexslider 用于移动网站上的图片库，我们的目标基本上是月球下的每一台平板电脑，并且画廊 prev/next 按钮在黑莓剧本上失败，图片滑动也不起作用（但我已经给出就这样）。滑动和 prev/next 在 ipad 和 androids 平板电脑上工作，所以我知道它工作正常，只是不在剧本上。如果有人知道为什么这只发生在剧本上和/或修复它，我会是一个超级快乐的人:)

# css - 内页css取消了asp .net mvc中无点引用的效果

> ID：13460917
> 
> 赞同：0
> 
> 时间：2012-11-19T19:41:05.470
> 
> 标签：css, asp.net-mvc, dotless

当我不使用内页样式时，无点样式* 完美运行。*但是，当我使用内页样式（没有其他改变）时，内页样式有效，但无点样式不再有效。*这是一个错误，还是有解决方案？

*我所说的“无点样式”是页面引用的 .less 文件的样式。

**内页样式**：

```
<style type="text/css">
        .detailRow {
            border: 1px solid burlywood;
        }
</style> 
```

**无点文件参考**：

```
<link href="@Url.Content("~/_Stil/Ortak/TableFormat.less")" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:11:27.610

由于引用的无点文件中的 css 在没有页面样式的情况下工作正常，然后在添加样式标记后它停止工作，我必须做出一些假设..

既然你说它们中只有一个可以同时工作，我假设它们是相互覆盖的。

就像如果您在 less 文件中有完全相同的 css 类，然后在页面上添加样式标记，您可能会覆盖文件中的 css 类（取决于文件 ofc 中的标记）。这可能会产生一种错觉，即 less 文件中的 css 类已停止工作。

我建议你在 less 文件中使用 id 或类似的东西来限定 css 类，以赋予它更多的特异性，看看会发生什么。否则，您应该显示来自 less 文件的一些内容和页面的一些 HTML 标记。

# android - repo forall 硬重置标签问题

> ID：13460923
> 
> 赞同：0
> 
> 时间：2012-11-19T19:41:42.807
> 
> 标签：android, linux, git, github

由于以下问题，我无法理解 git reset 硬概念：

考虑存储库结构：

安卓>A

甲>乙

A>C

A>D

（B、C、D 是 A 的子分支，其中包含 .git）

在 linux putty 终端中，我这样做了：

cd Android/A

CDC

C: git 描述

Shows -> YesterdayTag（没关系，现在我想将每个 .git 更改为“tagLatest”

光盘..

光盘

B: git 描述

Shows -> YesterdayTag（很酷，现在我想更改这个和其他所有 .git ）

B: repo forall -c git reset --hard tagLatest

B: git 描述

Shows--> tagLatest（正确，这是我所期望的！但见下文）

光盘..

CDC

C: git 描述

仍然显示-> yesterDayTag ，我希望 repoforall 将每个 .git 更改为“tagLatest”

如果您有任何线索，请告诉我。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:44:22.873

这些不是您正在谈论的分支。您有嵌套的 git 存储库。如果您希望重置工作，您最好在所有存储库中都有标签。

# jquery - 从 JSON 对象数组和字符串创建列表

> ID：13460932
> 
> 赞同：0
> 
> 时间：2012-11-19T19:42:12.133
> 
> 标签：jquery, json, jquery-mobile

我有，我假设，是一个相对简单的外部但本地 JSON 文件，我想从中剥离数据并保存为变量以在 HTML 中使用。

会有字符串和数字，我希望从中创建列表的字符串，以及我希望用作各种 CSS 值的数字。

对象的索引之间存在关系——希望当您阅读 JSON 时会清楚这一点。

并不是说它与这个问题特别相关，但出于背景考虑，有多个 JSON 文件，所有格式都相同，用户通过导航“过滤”。

页面和数据使用 JQuery 加载，尤其是 JQuery Mobile。

所以示例 JSON 如下...</p>

```
{"glass" :[
    {"name" : "Gin and tonic",
      "ingredients" : {
         "liquids" : ["Gin", "Tonic"],
         "amounts" : [60, 40],
         "colours" : ["f5f5f5", "666666"]
      }
    },
    {"name" : "Tom Collins",
      "ingredients" : {
      "liquids" : ["Gin", "Soda"],
      "amounts" : [60, 80],
      "colours" : ["f5f5f5", "373737"]
      }
    }
]} 
```

多亏了你们，我现在知道如何将饮料的名称与特定的对象匹配……</p>

```
function viewRecipe (recipeNamePassed) {
recipe = (recipeNamePassed);

//Get the JSON list and search through it for a match to the recipe name
$.getJSON(url, function(data) {
cache:false;
  for (var i=0;i<data.glass.length;i++){
    if (data.glass[i].name == recipe){
     // do stuff 
```

…但我似乎仍然无法创建剩余对象的列表。

换句话说，一个“液体”列表和另一个“数量”列表。

我有这样的事情发生，但它没有给我我需要的结果

```
var output="<ul>";
for (var i in ingredients.liquids) {
    output+="<li>" + ingredients.liquids[i] + "</li>";
}
output+="</ul>";

document.getElementById("ingredientsList").innerHTML=output; 
```

我想要的是将所有成分写入“ingredientsList”，并将“数量”和“颜色”保存为可用于更改 CSS 的变量。

您可能会说，我对这一切都很陌生，所以我非常感谢您的耐心。

在此先感谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:19:55.830

您可能错过了通往 itens 的整个路径。

像这样的东西应该可以解决问题。

```
var output="<ul>";
for (var i in data.glass[i].ingredients.liquids) {
   output+="<li>" + data.glass[i].ingredients.liquids[i] + "</li>";
}
output+="</ul>";

document.getElementById("ingredientsList").innerHTML=output; 
```

或者您可以将数据复制到变量中以使其更容易，例如

```
for (var i=0;i<data.glass.length;i++){
  var glass = data.glass[i]
  if (glass.name == recipe){

    var output="<ul>";
    for (var i in glass.ingredients.liquids) {
      output+="<li>" + glass.ingredients.liquids[i] + "</li>";
    }
    output+="</ul>";

    document.getElementById("ingredientsList").innerHTML=output;
  }
} 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:24:18.083

我知道您只发布了代码的快照，但您必须先访问该列表才能处理它...

```
var ingredients = data.glass[i].ingredients;
var output="<ul>";
for (var i in ingredients.liquids)
.... 
```

# c - strcpy 使用指针

> ID：13460934
> 
> 赞同：5
> 
> 时间：2012-11-19T19:42:15.487
> 
> 标签：c

我正在尝试使用指针自己编写 strcpy，但在运行时出现错误。

```
void str_cpy(char **destination, const char *source) {
//    char *s1 = *destination;

   while (*source != '\0') {
      **destination++ = *source++; //Get an error here
   }
   **destination = '\0';
} 
```

我调用函数如下：

```
char *str = NULL;
str_cpy(&str, "String"); 
```

不好吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T19:45:35.677

不，这不好。为什么？因为`str`是`NULL`指针。它什么都没有。当您尝试将值写入其中时，它们会去哪里？它没有指向任何分配的内存！

您首先必须为`str`. 你可以做：

```
char *str = malloc(strlen("String") + 1); // + 1 for the '\0' character at the end of C-style strings 
```

或者你可以这样做：

```
char str[256]; // make str large enough to hold 256 chars. Note that this is not as safe as the above version! 
```

另外，`destination`应该是单指针，而不是双指针。好吧，使用双指针在技术上并没有错，只是没有必要。

或者，您可以在函数中分配内存`str_cpy`，如下所示：

```
void str_cpy(char **destination, const char *source) {
    *destination = malloc(strlen(source) + 1);
    // ... continue as normal 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T19:50:31.457

为简单起见，这可以在函数的一行中完成。

```
void mystrcpy(char *dest, const char *src) {
  while (*dest++ = *src++);
} 
```

话虽这么说，您确实需要为`dest`预先使用分配内存，`malloc`或者只是通过使用像`char dest[256]`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T19:45:49.173

我认为不需要传递指针到指针：

```
void str_cpy(char *dst, const char *src) {
   while (*src != '\0') {
      *dst++ = *src++; 
   }
   *dst = '\0';
} 
```

并且您需要`dst`在传递之前分配内存：

```
const char *src = "String";
char *str = malloc(strlen(src)+1); //plus one for null byte
str_cpy(dst, src); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T19:44:30.380

您可能应该为该指针分配一些内存，然后再将其传递给填充其指向的函数*（*在本例中为 NULL）。

例子：

```
char *str = malloc(128);
if (str)
{
   str_cpy(&str, "String");
   free(str);
   str = NULL;
} 
```

`strcpy()`我建议不要在不提供目标缓冲区大小信息的情况下执行此操作（即，如果您正在编写自己的内容，则对目标缓冲区进行边界检查，否则您的版本具有与已经足够糟糕的相同的安全漏洞）。

注意：除非您打算更改作为目标传递的指针所持有的地址，否则您也不需要使用双指针。您使用的双指针用法阻止了以下传统`strcpy()`使用模式：

```
char str[128];
str_cpy(&str, "Hello"); // error. 
```

数组地址不能作为指针传递，因此您的代码不能在没有中间指针的情况下填充静态数组：

```
char str[128];
char *p = str;
str_cpy(&p, "Hello");  //ok. passing address of pointer. 
```

`strdup()`如果这不是故意的（除非您有在内部模拟NULL 指针通道的想法，否则我不明白为什么会这样）您应该解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-18T00:26:29.190

这是一个完整的实现。好文章来自这里。描述时间和性能。虽然我没有测量自己。 [http://www.howstuffworks.com/c35.htm](http://www.howstuffworks.com/c35.htm)

```
char* mystrcpy(char *dst, const char *src) {
char *ptr = dst;
while ((*dst++ = *src++) ) ;
return ptr;
}

int main(int argc, char *argv[]) {
const char *src = "This is C.\0";
char *dst = malloc(sizeof(char)*(strlen(src)+1)); //+1 for the null character
dst = mystrcpy(dst, src);
printf("%s",dst);
return 1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-11T17:11:51.060

最近我遇到了与上述相同的问题`double pointer strcpy implementation`

它可能对以下代码的其他人有所帮助

```
 void strcpy_i( char **dst, const char *src )
 {
    *dst=(char *)malloc((strlen(src)+1)*sizeof(char));

    char *tmp=*dst;

    if(tmp == NULL || src == NULL)
    return ;

    while((*tmp++=*src++)!='\0');
}

int main()
{
    char v[]="Vinay Hunachyal";
    char *d=NULL;

    strcpy_i(&d,v);
    printf("%s",d);

 return 0; 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-26T19:31:07.020

```
#include<stdio.h>
void main()
{

    void mystrcpy(char *,char *);

    char s1[100],s2[100];
    char *p1;
    char *p2;
    p1=s1;
    p2=s2;
    printf("Enter the string to copy to s2...?\n");
    scanf("%s",p1);

    mystrcpy(p2,p1);

    printf("S2 after copying = %s",p2);

}
void mystrcpy(char *p2,char *p1)
{
    while(*p1!='\0')
    {
        *p2=*p1;
        p2++;
        p1++;
    }
    *p2='\0';

} 
```

这是我的解决方案..**简单易懂**..

# debugging - CakePhp 调试/var_dump 样式

> ID：13460937
> 
> 赞同：0
> 
> 时间：2012-11-19T19:42:31.793
> 
> 标签：debugging, cakephp, var-dump

对于那些比我更擅长 CakePHP 的人来说，这可能是一个简单的问题，但是：

我有两个环境[工作和家庭]，我一直在使用 github 在它们之间工作。

如果我在我的工作机器上运行一个 var_dump()，得到的转储是一个 CakePHP 格式的 HTML 列表。非常适合调试。

如果我在家中对相同的代码运行 var_dump()，我会看到一个更传统的列表：用空格格式化，但不是 HTML。

我很确定这是某个地方的设置，但我不知道它在哪里 - 所有在线文档似乎都指向 debug() 函数，我实际上发现它不太有用。

有人知道吗？提前致谢。瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:35:06.613

或者，尝试 dump_r.php (php 5.3+)

演示： http: [//o-0.me/dump_r/](http://o-0.me/dump_r/)
回购：[https ://github.com/leeoniya/dump_r.php](https://github.com/leeoniya/dump_r.php)

也可以通过 Composer 安装
*require: "leoniya/dump-r": "dev-master"*
[https://packagist.org/packages/leoniya/dump-r](https://packagist.org/packages/leeoniya/dump-r)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-02T16:23:20.310

有一个简单的方法：在您的家用计算机上，单击“查看源代码”，您将在那里看到格式良好的 var_dump() 输出。

魏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T00:03:02.757

为什么不使用 debug() 而不是 var_dump()？

*   你在两台机器上都使用 xdebug 吗？
*   两台机器上的php版本是否相同？
*   xdebug 和错误级别的相同 php.ini 设置？

# safari - Safari 中的 CSS 过渡和固定定位

> ID：13460948
> 
> 赞同：1
> 
> 时间：2012-11-19T19:43:05.267
> 
> 标签：safari, css-transitions, css-position, parallax

我遇到了一些仅在 Safari 中出现的网站问题。我在 Mac 上运行版本 5.1.7 (7534.57.2)。

您可以在此处查看该网站：http: [//mcad.edu/annual-report-2011-12/](http://mcad.edu/annual-report-2011-12/)。

该网站是视差滚动的，具有相对定位的内容 div 包含所有内容，包括 3 个视差滚动背景，它们都是固定的，顶部和左侧设置为 0。

在固定视差背景容器中，当用户将鼠标悬停在彩色图像上时，彩色图像会逐渐变为全彩色图像。对于每个“图像”，堆叠了两个 div，每个 div 都有由 background-position 定位的背景图像。底部的 div 具有彩色图像。顶部的 div 将全彩色图像作为背景，并将其不透明度设置为 0，直到鼠标悬停。淡入淡出是使用 opacity 属性上的 CSS 过渡来实现的，以便顶部 div 变得可见。

因此，仅在 Safari 中，当我将鼠标悬停在任何这些 div 上时，过渡会顺利进行，但同一视差滚动背景 div 中的所有内容都会在此过程中移动/跳跃。如果我删除 CSS 过渡，则不会发生这种情况。

我认为这可能与 transition/webkit-transition 属性不能很好地与 Safari 中的固定位置容器配合使用有关。但是，我发现的所有与此相关的问题都来自 2010 年，并且提到了一个我认为已经修复的 Safari 错误……两年后。但也许不是。

Catalyst 部分还有另一个问题（右侧导航中的第 3 个点）。这些动画图像在 Chrome、Firefox 和 Opera 中用作链接，但在 Safari 中则不行。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T15:19:00.800

我创建的标题菜单的固定位置和过渡持续时间也有类似的问题。当访问者向下滚动时，菜单会出现一个淡入到位的框阴影。好吧，当在 MacOS 的 safari 上查看时，我遇到了一个奇怪的问题。为了轻松解决此问题，在花费大量时间寻找答案之后，我正在删除 Mac 的过渡效果。这解决了问题的幻灯片，但遗憾地摆脱了过渡效果。

因此，正如您推测的那样，这可能也是您项目的过渡持续时间。最好的办法可能是制作一个 Mac-Safari CSS 文件，摆脱该特定区域的过渡持续时间并继续您的项目。

我现在可以建议的最好的。希望能帮助到你。

# css - 如何将 CSS 标题重置为默认大小？

> ID：13460949
> 
> 赞同：0
> 
> 时间：2012-11-19T19:43:11.350
> 
> 标签：css

如何将标题的大小重置为默认大小？这是我拥有的一些 HTML：

```
<h2>Hello World</h2> 
```

这是它的CSS：

```
h2 {
    font-size: 16px;
    margin: 1em 0 0.5em;
}

/*I'd like to reset that height of 16px and use the default browser height */
h2 {
    font-size: 100%;
} 
```

我需要覆盖旧`h2`选择器并将标题重置为默认大小？我用谷歌搜索了这个，它说标题大小取决于浏览器，我不想对标题大小进行硬编码。

这是我知道的一个非常基本的问题，但不知何故我无法理解我需要使用什么值来重置高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:50:57.427

根据[A List Apart](http://www.alistapart.com/articles/howtosizetextincss/)，默认`body`字体大小是`16px`（这在浏览器中是一致的）。

[W3C 推荐](http://www.w3.org/TR/CSS21/sample.html)的默认样式表将`h2`大小显示为`1.5 em`.

一些简单的计算将我们带到`16 * 1.5 = 24px`.

因此，将您的 h2 设置`font-size`为`24px`应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:34:31.903

通常，您不能将元素的属性设置为其默认值，除非不在任何作者样式表中设置该属性。为此建议的方法是基于误解或对默认值的一些假设，但默认值取决于浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:45:35.833

您可以[`Normalize.css`](http://necolas.github.com/normalize.css/)从一开始就使用它，它将跨浏览器标准化标题大小：

> Normalize.css 使浏览器更一致地呈现所有元素并符合现代标准。它仅针对需要规范化的样式。

例如，这里是对`<h1>`标签的修复：

```
/*
 * Addresses `h1` font sizes within `section` and `article` in Firefox 4+,
 * Safari 5, and Chrome.
 */

h1 {
    font-size: 2em;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T20:14:45.843

没有办法回到浏览器的默认字体大小，因为每个人的做法都有点不同。

当您更改 h2 上的字体大小时，它也会影响边距的大小（因为它们在 中定义`em`）。我怀疑您正在尝试将 font-size 修改为 16px 以尝试匹配也在`em`. 如果是这种情况，您将需要以不同方式设置属性：

```
h2 {
    font-size: 1.5em;
    margin: .75em 0 0.333em; /* (1 / 1.5) 0 (.5 / 1.5) */
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-19T19:45:18.097

标头的默认`font-size`值为`medium`. 见这里：[https ://developer.mozilla.org/en-US/docs/CSS/font-size](https://developer.mozilla.org/en-US/docs/CSS/font-size)

所以你会这样做：

```
h2 {font-size: medium;} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-19T19:51:59.067

将标题字体大小设置回默认值的最简单方法可能是从您已经拥有的 h2 元素中删除字体大小声明，而不是：

```
h2 {
    font-size: 16px;
    margin: 1em 0 0.5em;
} 
```

你只会有

```
h2 {
    margin: 1em 0 0.5em;
} 
```

您还需要检查您的样式表是否有可能声明 h2 字体大小的任何其他位置。如果您不能或不想删除字体大小声明，您可以执行以下操作将所有 h2 元素的字体大小重置为默认值

```
h2 {
    font-size: medium !important;
} 
```

medium 的字体大小是所有浏览器的默认值，最后的 !important 使其覆盖所有其他声明的样式。不过，您需要小心使用重要，因为它使确定样式将如何通过元素级联和/或如何应用它变得更加困难。

干杯，这有什么帮助。

默认值来源：[http ://www.w3schools.com/cssref/pr_font_font-size.asp](http://www.w3schools.com/cssref/pr_font_font-size.asp)

# php - 如果 action == something 则提交表单

> ID：13460953
> 
> 赞同：0
> 
> 时间：2012-11-19T19:43:17.210
> 
> 标签：php, javascript

如果出现以下情况，我想`<form>`自动提交：

```
if(isset($_POST['action']) && ($_POST['action'] =='confirmado')){ 
```

提交表格。

我不知道我是否应该使用 javascript 脚本。我尝试这样做，但它不起作用。

```
<script>

    if(isset($_POST['action']) && ($_POST['action'] =='confirmado')){
    $("#form").submit(function(){
    document.form.submit(); 
    return false;
    }

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:44:50.050

您正在尝试将 PHP（一个`server-side language`.）与 Javascript（一个`client-side language`. 所以，那是行不通的。

此外，a 的提交`<form>`不会在其 $_POST 数组中捕获为 $POST['action']。提交的方法是`POST`，`$_POST`数组包含通过表单的html元素提交的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:47:14.517

尝试这个：

```
$( '#form' ).submit(function () {
    if ( this.action !== 'confirmado' ) return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:51:03.610

首先，我同意 coder1984：您正在将 PHP 与 Javascript 混合，并且您试图在客户端访问 POST 数据，这是不可能的。如果我能猜到你想要做什么，也许这段代码会对你有所帮助：

```
<script type="text/javascript">
if (<?php echo (isset($_POST['action']) && ($_POST['action'] =='confirmado')) ? '1' : '0'; ?>) {
  document.form.submit();
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T20:03:38.383

如果我正确理解您的代码，您只想在“action”字段等于“confirmando”时提交表单。既然你已经在使用 jQuery，让我们继续使用它。

JavaScript：

```
<script>
        $('document').ready(function() {
            $('input[name=action]').change(function() {
                if($(this).val() == 'confirmando') {
                    $('form').submit(); // If you would like to do a normal sumbit
                    $.post('my_php_file.php', $('form').serialize(), function(data)) { // or use AJAX
                        /* var data now contains the output of the PHP file  */
                    }
                }
            });
        });
    </script> 
```

当您从表单接收数据时，在 PHP 中检查提交的表单仍然有意义。

# c# - WinAPI 调整大小会破坏 minwidth/minheight ......我该如何解决这个问题？

> ID：13460956
> 
> 赞同：0
> 
> 时间：2012-11-19T19:43:27.510
> 
> 标签：c#, wpf

我有一个无边框的 WPF 窗口。我已经使用 WinAPI 编写了调整大小/拖动功能，但它忽略了窗口的最小宽度和最小高度。如何执行这些值？

我的代码如下：

```
private void Resize(object sender, MouseButtonEventArgs e)
{
    String resizeHandle = (sender as System.Windows.Shapes.Rectangle).Name;

    ResizeDirection direction = 
            resizeHandle == "PART_RESIZEHANDLE_TOP" ? ResizeDirection.Top
          : resizeHandle == "PART_RESIZEHANDLE_BOTTOM" ? ResizeDirection.Bottom
          : resizeHandle == "PART_RESIZEHANDLE_LEFT" ? ResizeDirection.Left
          : resizeHandle == "PART_RESIZEHANDLE_RIGHT" ? ResizeDirection.Right
          : resizeHandle == "PART_RESIZEHANDLE_TOPLEFT" ? ResizeDirection.TopLeft
          : resizeHandle == "PART_RESIZEHANDLE_TOPRIGHT" ? ResizeDirection.TopRight
          : resizeHandle == "PART_RESIZEHANDLE_BOTTOMLEFT" ? ResizeDirection.BottomLeft
          : resizeHandle == "PART_RESIZEHANDLE_BOTTOMRIGHT" ? ResizeDirection.BottomRight 
          : 0;

    if (direction == ResizeDirection.Unknown)
        throw new ArgumentException();

    SendMessage(hwndSource.Handle, WM_SYSCOMMAND, (IntPtr)(61440 + direction), IntPtr.Zero);

}

[DllImport("user32.dll", CharSet = CharSet.Auto)]
private static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam); 
```

# javascript - Windows 8 Metro 打开本地文件 (.html)

> ID：13460959
> 
> 赞同：1
> 
> 时间：2012-11-19T19:43:41.350
> 
> 标签：javascript, windows-8, microsoft-metro

我想从 Windows 8 Metro (javascript) 应用程序打开一个本地 html 文件。我试过这样做：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh701484.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh701484.aspx)。只要我继续提供实际的 http 地址，它就可以正常工作，但是一旦我用我的本地文件路径替换它们，每次成功返回都是错误的。

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:58:04.547

您可以使用 StorageAPI 并读取文件中的所有 HTML。然后创建一个 DOM 元素并设置它的 innerHTML。（如果您使用 jQuery 来操作 DOM，这会容易得多）。

我有一个类似的例子——我从应用程序的本地存储目录中读取文件，并在 Web 浏览器控件中显示 HTML。该示例在 C#/XAML 中，但可以使用类似的逻辑（无需 Web 浏览器控件 - 因为您的应用程序将在可以像浏览器一样直接显示 HTML 的主机内运行）：

[http://krishnanadiminti.blogspot.com.au/2012/09/howto-provide-in-app-help-using-html.html](http://krishnanadiminti.blogspot.com.au/2012/09/howto-provide-in-app-help-using-html.html)

# gridview - 如何从组合框extjs 4中获取传递参数的值

> ID：13460973
> 
> 赞同：3
> 
> 时间：2012-11-19T19:44:25.667
> 
> 标签：gridview, combobox, extjs4, parameter-passing

我有一个组合框和一个网格。在组合框中选择一个值时，我需要获取该值并将其作为参数传递给我的控制器，以便它可以更新我的网格。请帮忙。这是我商店的代理...

```
proxy: {
            type: 'ajax',
            scope: this,
            url: 'myController/getValue',
            extraParams: {
                State: Ext.getCmp('mycombo').getValue() //this is not possible
            }, 
```

这是我的组合框。

```
items: [{
                    xtype: 'combobox',
                    id: 'mycombo',
                    scope: this,
                    editable: false,
                    store: this.store,
                    fieldLabel: 'Select State',
                    displayField: 'State',
                    queryMode: 'remote',
                    labelWidth: 125,

                    listeners: {
                        scope: this,
                        store.load()
                    }

                    valueField: 'State'
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:22:57.700

在你的组合框中试试这个：

```
change:function (field, newValue, oldValue, options) {
    console.log('combo changed to ' + newValue + ' from ' + oldValue); 
    gridPanel.store.load({params:{State:this.value}});
} 
```

# verilog - Verilog 模拟将 x 作为输出

> ID：13460975
> 
> 赞同：-1
> 
> 时间：2012-11-19T19:44:36.710
> 
> 标签：verilog

我正在尝试使用 veriwell 模拟以下电路。但是，模拟结果给了我每个网络的值作为 x。由于电路没有任何反向循环，我猜每个网络都应该有 1 或 0 信号。

```
module dff (CK,Q,D);
input CK,D;
output Q;

  wire NM,NCK;
  wire NQ,M;

  nmos N7 (M,D,NCK);
  not P3 (NM,M);
  nmos N9 (NQ,NM,CK);
  not P5 (Q,NQ);
  not P1 (NCK,CK);

endmodule

module s27(clk, in1, in2, GO, HO, AO, BO, CO, DO, EO, FO, a1, a2, a3, a4, o1, o2);
input clk, in1, in2;
output GO, HO, AO, BO, CO, DO, EO, FO, a1, a2, a3, a4, o1, o2; 
wire AO, BO, CO, DO, EO, FO; 
wire a1, a2, a3, a4; 
wire o1, o2; 

  dff A(clk,AO,in1);
  dff B(clk,BO,in2);
  dff C(clk,CO,o1);
  dff D(clk,DO,a1);
  dff E(clk,EO,a2);
  dff F(clk,FO,o2);
  dff G(clk,GO,a3);
  dff H(clk,HO,a4);

  and AND2_1 (a1, AO, CO);
  and AND2_2 (a2, CO, BO);
  and AND2_3 (a3, AO, FO);
  and AND2_4 (a4, FO, BO);

  or OR2_1(o1, AO, BO);
  or OR2_2(o2, DO, EO);
endmodule 
```

我正在使用以下测试台（使用脚本生成）：

```
 `timescale 1ns/1ps

module testbench;

parameter sOutFileName = "beSimOut.txt";
parameter nVectorWidth = 3;
parameter nVectorSpace = 1000;
parameter nSimCycle = 10;

/* simulation memory */
reg [nVectorWidth - 1:0] mSimMemory [nVectorSpace - 1:0];

/* simulation vector */
reg [nVectorWidth - 1:0] vSimVector;

/* bench variables */
integer nOutFile, nIndex;

/* connection variable declarations */
wire clk, in1, in2, G0, H0, A0, B0, C0, D0, E0, F0, a1, a2, a3, a4, o1, o2;
/* drive inputs */
assign clk = vSimVector[2];
assign in1 = vSimVector[1];
assign in2 = vSimVector[0];

/* simulation memory population routine */
task populateSimulationMemory;
begin
    for (nIndex = 0; nIndex < nVectorSpace; nIndex = nIndex + 1)
        mSimMemory[nIndex] = { $random };
end
endtask

/* simulation */
initial
begin
    /* start monitoring */
    $monitor($time, ": clk = %b, in1 = %b, in2 = %b, GO = %b, HO = %b, AO = %b, BO = %b, CO = %b, DO = %b, EO = %b, FO = %b, a1 = %b, a2 = %b, a3 = %b, a4 = %b, o1 = %b, o2 = %b", clk, in1, in2, GO, HO, AO, BO, CO, DO, EO, FO, a1, a2, a3, a4, o1, o2);

    /* populate simulation memory */
    populateSimulationMemory;

    /* open dump file */
    nOutFile = $fopen(sOutFileName);
    if (nOutFile == 0)
    begin
        $display("Can't open %s file for dumping. Exiting ...", sOutFileName);
        $finish;
    end

    /* simulate inputs */
    for (nIndex = 0; nIndex < nVectorSpace; nIndex = nIndex + 1)
        #nSimCycle vSimVector = mSimMemory[nIndex];

    #1 $fclose(nOutFile);
    nOutFile = 0;
    $finish;
end

/* instantiation */
s27 inst (.clk(clk), .in1(in1), .in2(in2), .GO(GO), .HO(HO), .AO(AO), .BO(BO), .CO(CO), .DO(DO), .EO(EO), .FO(FO), .a1(a1), .a2(a2), .a3(a3), .a4(a4), .o1(o1), .o2(o2));

/* dump */
always @(clk or in1 or in2 or GO or HO or AO or BO or CO or DO or EO or FO or a1 or a2 or a3 or a4 or o1 or o2)
    if (nOutFile != 0)
        $fdisplay(nOutFile, $time, ": clk = %b, in1 = %b, in2 = %b, GO = %b, HO = %b, AO = %b, BO = %b, CO = %b, DO = %b, EO = %b, FO = %b, a1 = %b, a2 = %b, a3 = %b, a4 = %b, o1 = %b, o2 = %b", clk, in1, in2, GO, HO, AO, BO, CO, DO, EO, FO, a1, a2, a3, a4, o1, o2);

endmodule 
```

关于为什么我没有得到正确输出的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:54:31.917

dff 未正确建模。使用当前的 dff，当 CK 为高电平时，M 将浮动（高 Z）。

dff 应如下所示：

```
not N1 (NCK,CK);
cmos C1 (M,D,NCK,CK);
cmos C2 (M,NNM,CK,NCK);
not N2 (NM,M);
not N3 (NNM,NM);
cmos C3 (NNQ,NNM,CK,NCK);
cmos C4 (NNQ,Q,NCK,CK);
not N3 (NQ,NNQ);
not N4 (Q,NQ); 
```

或作为与非门：

```
nand DN1 (NM,D,CK);
nand DN2 (M,NM,CK);
nand DN3 (Q,NQ,NM);
nand ND4 (QN,Q,M); 
```

或作为行为：

```
always @(posedge CK)
  Q <= D; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:21:57.620

当我尝试使用 VCS 模拟器编译代码时，出现编译错误：

> 尚未声明标识符“GO”。如果此错误不是预期的，请检查您是否已将 `default_nettype 设置为 none。

在您的测试台模块中，您声明了一条线`G0`（数字零），然后使用`GO`（大写字母 O）。您应该将零更改为字母 O。

我认为这不会完全解决您的问题，但这太复杂了，无法放入评论中。

# c++ - 添加 Boost.Log 以使用 CMake 提升库

> ID：13460978
> 
> 赞同：2
> 
> 时间：2012-11-19T19:44:52.870
> 
> 标签：c++, logging, boost, cmake

我正在尝试`Boost.Log`使用 CMake 添加到 Boost 库，但是在尝试链接到我的程序时遇到了麻烦。

我在 周围添加了一个包装器，`Boost.Log`并生成了一个名为`libcls_utils.so`. Boost 库（连同`Boost.Log`）似乎已构建并`.so`在正确的位置正确生成所有文件，`libcls_utils.so`.
当我尝试链接我的文件时，我收到以下错误：

> /media/data/workspace/mdxdev/tmp/staging/i686-mv-linux/usr/lib/libcls_utils.so：未定义引用`boost::log_mt_posix::sinks::basic_text_file_backend::construct(boost::fil‌​ esystem2::basic_path, std::allocator >, boost::filesystem2::path_traits> const&, std::_Ios_Openmode, unsigned long long, boost::function0 const&, bool)

据我所知，我正在链接所有正确的库。有没有人成功尝试过这个？我究竟做错了什么？
我正在使用来自 svn 主干的 CMake 2.8.8、Boost-1.49.0 和 Boost.Log。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T09:55:53.753

您可能需要定义[BOOST_LOG_DYN_LINK](http://www.boost.org/doc/libs/1_54_0/libs/log/doc/html/log/rationale/namespace_mangling.html)：

```
g++ -DBOOST_LOG_DYN_LINK blog.cpp -lboost_log -lpthread 
```

# django - 记录 Tastypie 请求（访问日志）

> ID：13460979
> 
> 赞同：3
> 
> 时间：2012-11-19T19:44:53.560
> 
> 标签：django, logging, tastypie, access-log

我在为我的 sweetpie restfull 应用程序创建访问记录器时遇到问题。我想在对服务器的请求中记录几个 HTTP 标头，并将它们传递给 django 设置文件中定义的记录器/处理程序。这个想法是将每个 HTTP 请求记录到访问日志文件中。

我遇到了几个日志模块（应用程序），但它们都使用数据库，我想要一些更简单的基本访问日志。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:00:07.110

我最终在应用程序根目录中的 middleware.py 中创建了自己的中间件类。

我也放在`'appname.middleware.RequestLoggerMiddleware',`Settings.py Middleware 部分。

这是我的访问日志中间件类的代码：

```
import logging

logger = logging.getLogger('access')

class RequestLoggerMiddleware(object):
    def process_request(self, request):
        ... logging logic here...

        logger.info('logging message'))
        return None 
```

有关中间件组件的更多信息，请参阅[Django 中间件文档](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T16:59:53.307

另一种可能性是在自定义对象中覆盖该`ModelResource.dispatch()`方法：`ModelResource`

```
class CustomModelResource(ModelResource):
    def dispatch(self, request_type, request, **kwargs):
        """
        Override for systematic logging.
        """
        log_user = request.META['USER']
        log_request_type = request_type
        log_resource_name = kwargs['resource_name']
        log_api_name = kwargs['api_name']
        log_response = {}

        try:
            response = super(CustomModelResource, self).dispatch(request_type, request, **kwargs)
            log_response['response_code'] = response.status_code
        # Also log what could go wrong
        except Exception, e:
            log_response['error_type'] = e.__class__.__name__
            log_response['error_message'] = e.message
            log_response['response_code'] = http.HttpBadRequest.status_code
            raise
        finally:
            # Log all the things
            logger.debug('%s asked for %s on %s through api %s: \n%s' % (
                log_user,
                log_request_type,
                log_resource_name,
                log_api_name,
                log_response,
            ))

        return response

class Meta:
    # Other custom stuff 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-19T20:04:56.750

```
import logging

logger = logging.getLogger('project.app.view')

def my_view(request):
    entry = '%s %s for %s' % (request.method, request.get_full_path(), request.META['REMOTE_ADDR'])
    logger.info(entry) 
```

请参阅[https://docs.djangoproject.com/en/1.4/topics/logging/](https://docs.djangoproject.com/en/1.4/topics/logging/)

# ssis - 设计器中的复制粘贴问题

> ID：13460981
> 
> 赞同：0
> 
> 时间：2012-11-19T19:45:00.920
> 
> 标签：ssis

我有 SSAS Designer 版本 9.00.4035.00

我在复制粘贴操作方面遇到了真正的问题。当我粘贴一个任务时，所有的序列容器都会被炸得很大。

它不是世界末日，但它需要一件简单的事情，并为这个过程增加了很多额外的调整大小。有人有什么想法吗？

谢谢

格雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:15:32.947

SSIS 设计器工具在处理复制/粘贴的可视布局部分方面做得很糟糕，而且我还没有找到任何方法来让它们正常工作。OTOH，一旦布局搞砸了，我发现 Visual Studio 中的`Format | Autosize`和`Format | Autolayout`菜单是让 SSIS 包看起来不错的最有效方法。

# performance - 提高 RadGrid 客户端性能

> ID：13460982
> 
> 赞同：2
> 
> 时间：2012-11-19T19:45:04.883
> 
> 标签：performance, telerik-grid, google-chrome-devtools

我有一个呈现以编程方式创建的 RadGrid 的 aspx 页面。大约有 15 列，刚刚超过 1000 行。从加载到完成大约需要 6-7 秒，其中只有 3 秒是服务器端处理。我绝对可以优化这一点。但是剩下的 4 秒似乎发生在客户端收到服务器的响应之后。

*   单击按钮后，网格仅在 6-7 秒后加载。
*   但 Fiddler 显示总经过时间为 2.2 秒。
*   我有一个 GIF 在 AjaxLoadingPanel 中显示“正在加载...”，它在最后 4 秒内挂起（没有动画）。

我查看了 Chrome 的时间线，这就是我所看到的： ![在此处输入图像描述](../Images/9505932136bc8289285692115c9877ec.png)

*   我在 2 秒左右发送页面请求（**发送请求**）。我开始看到 GIF 加载动画。
*   大约 4.2 秒时，GIF 动画停止。在接下来的 3-4 秒内，您会在时间线中看到“ **XHR 就绪状态更改**”。
*   大约 8.5 秒时，GIF 动画开始播放，我的页面已完全加载。
*   Fiddler 告诉我页面加载总共需要 2.2 秒。

基于此，我猜测浏览器正在尝试在最后 4 秒内解析和呈现页面。现在我该怎么做？我可以进一步挖掘以了解原因吗？

*   似乎有很多“布局”事件来自各种 ScriptResource.axd 文件，这些都是由 Telerik 生成的。
*   布局记录中还会显示一条警告，上面写着“*强制同步布局是可能的性能瓶颈*”。这是我能控制的吗？将 .axd 文件合并到一个文件中（使用自定义 HTTP 处理程序？）会有任何帮助吗？ ![在此处输入图像描述](../Images/1a9d75e606cdb839286c5b5be321f920.png)

这些是什么意思？Radgrid 发出了太多代码让浏览器无法处理？

1.  分页已打开，但客户希望每页至少看到 1000 条记录。
2.  排序、分页、行选择、行右键菜单等都启用/可用。

感谢您的帮助，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:11:18.647

我在您的时间线中看到仅 1 秒用于执行 JS 代码。其余时间用于布局。您需要以某种方式修改代码并减少强制布局的位置数量。我认为这份文件对你来说可能很有趣。[http://gent.ilcore.com/2011/03/how-not-to-trigger-layout-in-webkit.html](http://gent.ilcore.com/2011/03/how-not-to-trigger-layout-in-webkit.html)

另一种方法是使用视口模式。例如，您只需要为页面的可见部分创建行，并为不可见部分使用具有必要大小的空 div。通常在数据量很大时使用。例如 Sources 面板就是这样工作的，可以显示一个包含 500k 行代码的文件。

时间轴面板中使用了相同的技术。

# .net - NetSparkle：管理数据文件

> ID：13460985
> 
> 赞同：1
> 
> 时间：2012-11-19T19:45:19.920
> 
> 标签：.net, installation, upgrade

我有一个 .Net 应用程序，我希望它具有 NetSparkle 的自动更新功能。

每次创建应用程序更新时，我希望新更新使用用户计算机上预先存在的安装目录中已存储的数据。

例如这里是我的应用程序文件的结构

```
app.exe
some.dll
database.db 
```

当用户使用应用程序时，数据库会建立并包含应用程序运行所需的信息。

当我发布新的更新时，使用了一个新的 database.db，它是空的..

如何使用新更新的 exe/dll 而不是空的数据库文件使以前的数据库文件可用？

PS：可能是它的一个非常基本的东西，但我对 NetSparkle 绝对陌生。

请帮忙谢谢。。

# servicestack - POST 到 ServiceStack 服务并检索 Location Header

> ID：13460993
> 
> 赞同：7
> 
> 时间：2012-11-19T19:45:36.260
> 
> 标签：servicestack

我正在尝试发布到我的 ServiceStack 服务并从我的 CREATED 实体的响应中检索 Location 标头。我不确定使用 IReturn 是否有效，但我不确定如何从我的客户端访问响应标头。有人可以帮助我了解如何正确与 HttpResult 交互吗？代码底部有一个测试用例来演示我想要做什么。这是鳕鱼：

```
 public class ServiceStackSpike
{
    public class AppHost : AppHostHttpListenerBase
    {
        public AppHost() : base("TODOs Tests", typeof(Todo).Assembly) { }

        public override void Configure(Container container)
        {
            //noop
        }
    }

    [Route("/todos", "POST")]
    public class Todo:IReturn<HttpResult>
    {
        public long Id { get; set; }
        public string Content { get; set; }
        public int Order { get; set; }
        public bool Done { get; set; }
    }

    public class TodosService : Service
    {
        public object Post(Todo todo)
        {
            //do stuff here
            var result = new HttpResult(todo,HttpStatusCode.Created);
            result.Headers[HttpHeaders.Location] = "/tada";
            return result;
        }

    }

    public class NewApiTodosTests : IDisposable
    {
        const string BaseUri = "http://localhost:82/";

        AppHost appHost;

        public NewApiTodosTests()
        {
            appHost = new AppHost();
            appHost.Init();
            appHost.Start(BaseUri);                
        }

        [Fact]
        public void Run()
        {
            var restClient = new JsonServiceClient(BaseUri);

            var todo = restClient.Post(new Todo { Content = "New TODO", Order = 1 });
            Assert.Equal(todo.Headers[HttpHeaders.Location], "/tada"); //=>fail
        }

        public void Dispose()
        {
            appHost.Dispose();
            appHost = null;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T21:23:58.633

有关自定义 HTTP 响应的所有不同方法，请参阅[自定义 HTTP 响应](https://github.com/ServiceStack/ServiceStack/wiki/Customize-HTTP-Responses)ServiceStack wiki 页面。

A`HttpResult`只是自定义 HTTP 响应的一种方式。如果要重定向绝对网址，通常需要包含它，例如：

```
public object Post(Todo todo)
{
    var todo = ...;
    return new HttpResult(todo, HttpStatusCode.Created) { 
        Location = base.Request.AbsoluteUri.CombineWith("/tada")
    };
} 
```

注意 HTTP 客户端**永远不会**看到`HttpResult`DTO。HttpResult本身**不是 DTO**，它的唯一目的是捕获和修改您想要的自定义 HTTP 响应。

所有 ServiceStack 客户端将返回 HTTP 正文，在本例中为`Todo`响应 DTO。**Location**确实添加到了 HTTP 响应标头中，要查看返回的整个 HTTP 响应，您应该使用 HTTP 嗅探器，例如 Fiddler、WireShark 或 Chrome 的 WebInspector 。

如果您想使用 ServiceStack 的 HTTP 客户端访问它，您需要添加一个响应过滤器，让您可以访问`HttpWebResponse`，例如：

```
restClient.ResponseFilter = httpRes => {
      Assert.Equal(httpRes.Headers[HttpHeaders.Location], "/tada"); 
 };

Todo todo = restClient.Post(new Todo { Content = "New TODO", Order = 1 }); 
```

### 使用 Web 请求扩展检查响应标头

如果您只想检查 HTTP 响应，另一个轻量级的选择是使用 ServiceStack 的便捷 WebRequest 扩展方法，例如：

```
var url = "http://path/to/service";
var json = url.GetJsonFromUrl(httpRes => {
      Assert.Equal(httpRes.Headers[HttpHeaders.Location], "/tada"); 
}); 
```

# sql - 基本的 oracle 更新语句

> ID：13460994
> 
> 赞同：2
> 
> 时间：2012-11-19T19:45:37.757
> 
> 标签：sql, oracle, stored-procedures

我正在使用 oracle 编写存储过程。我是 oracle 和存储过程的新手，但我想做的事情似乎相当简单，但我遇到了麻烦。

我有 2 张桌子`BATCH_ISA`和`BATCH_TEMP`

临时表是使用来自`BATCH_ISA`以及其他一些表的记录创建的。`BATCH_ISA`在记录成功移入表后，我需要将表中的标志从“Y”更新为“N” `BATCH_TEMP`。

我正在尝试对在两个表中都找到`BATCH_ISA`该`ISA_KEY`字段的所有记录进行更新，并将标志设置为“N”

我应该使用什么基本更新语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:48:29.977

```
-- SET EVERYTHING TO 'N' FIRST:
UPDATE BATCH_ISA 
SET
    FLAG = 'N';

-- NOW UPDATE ONLY MATCHED ROWS TO 'Y':
UPDATE BATCH_ISA 
SET
    FLAG = 'Y' 
WHERE
    EXISTS (
        SELECT * FROM BATCH_TEMP
        WHERE BATCH_ISA.ISA_KEY = BATCH_TEMP.ISA_KEY
);

COMMIT; 
```

我在第一次更新后删除了提交，但如果有很多行，您可以使用它来节省重做日志开销。

# php - 带有php的jquery文件上传插件如何接收ajax数据

> ID：13460995
> 
> 赞同：0
> 
> 时间：2012-11-19T19:45:37.193
> 
> 标签：php, jquery

我正在使用[jQuery 文件上传插件](https://github.com/blueimp/jQuery-File-Upload)

我已阅读提供的所有文档。有一个 php 集成类，但该类非常复杂，根本没有评论我只想如何接收 JSON 数据和对插件的响应。

因为我想要一个简单的实现，只需接收 $_FILES 数组并使用移动上传的文件上传文件。这是一个简单的插件：

```
$('#fileupload').fileupload({

     dataType: 'json',
  done: function (e, data) {
      $.each(data.result, function (index, file) {
        $('<p/>').text(file.name).appendTo(document.body);
      });
  }
}); 
```

html是：

```
 <input id="fileupload" type="file" name="files[]" data-url="server/php/" multiple> 
```

问题是如何从这个插件接收 $_FILES 数组并响应它？？？

请问有人可以帮我吗？只是一个简单的代码片段，我会做剩下的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:29:23.927

好的，在 php 端获取数据：

这应该是这样的：

```
<?php
foreach( $_FILES as $f )
{
    echo "name = ".$f['name'][0]."\n";
    echo "type = ".$f['type'][0]."\n";
    echo "tmp_name = ".$f['tmp_name'][0]."\n";
    echo "error = ".$f['error'][0]."\n";
    echo "size = ".$f['size'][0]."\n";

}
?> 
```

如果它不起作用（在您的 php 处理程序中）：

```
# ...
error_log( print_r( $_REQUEST, true ) )
error_log( print_r( $_FILES, true ) )
# ... 
```

输出将写入服务器的错误日志。它看起来应该有点像：

```
# $_REQUEST
array(0) {
}

# $_FILES
array(1) {
  ["files"]=>
  array(5) {
    ["name"]=>
    array(1) {
      [0]=>
      string(30) "some.pdf"
    }
    ["type"]=>
    array(1) {
      [0]=>
      string(15) "application/pdf"
    }
    ["tmp_name"]=>
    array(1) {
      [0]=>
      string(14) "/tmp/phpkqOz2M"
    }
    ["error"]=>
    array(1) {
      [0]=>
      int(0)
    }
    ["size"]=>
    array(1) {
      [0]=>
      int(51869)
    }
  }
} 
```

您将不得不遍历 $_FILES 数组并将每个数组移动到存储它的位置...

```
foreach( $_FILES as $f ){
    move_uploaded_file( $f['tmp_name'][0], './some/path/'.$f['name'][0] );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:37:26.527

这个插件有一些很酷的服务器端代码，已经为你完成了存储文件的工作。您可以覆盖[构造函数](https://github.com/blueimp/jQuery-File-Upload/blob/master/server/php/UploadHandler.php)中定义的所有默认值。这是一个基于这个伟大插件的项目页面上有点太短的[例子的例子。](https://github.com/blueimp/jQuery-File-Upload/blob/master/server/php/index.php)

```
<?php
require('UploadHandler.php');
$upload_handler = new UploadHandler( array(
  'upload_dir' => dirname(__FILE__).'/files/',
  'accept_file_types' => '/(jpg|gif|txt)$/i',
) );
?> 
```

这将接受所有 jpg、gif 和 txt 文件并将它们存储到“/files/”目录，这是该脚本所在目录下的本地路径。当然，您可以指定另一个路径，只要它是绝对路径。也许它甚至可以与相对路径一起使用。

只需根据需要覆盖[UploadHandler.php](https://github.com/blueimp/jQuery-File-Upload/blob/master/server/php/UploadHandler.php)的第 39 - 107 行中的选项。

# ruby-on-rails - 未定义的方法，当我尝试在另一个使用 belong_to 和 mongoid 的情况下添加新文档时

> ID：13460996
> 
> 赞同：1
> 
> 时间：2012-11-19T19:45:40.653
> 
> 标签：ruby-on-rails, mongoid

我正在尝试有两个文档，一个用于帖子，一个用于回复，并使用“Referenced 1-N”关系将它们连接起来。

根据我从[mongoid 文档](http://mongoid.org/en/mongoid/docs/relations.html#has_many)中读到的内容，您所要做的就是添加`has_many`和`belongs_to`到两个类中，mongoid 将允许我添加指向父级的子文档。

**所以我想做的只是**

1.  创建一个指向父级的新回复文档
2.  如果可能的话，有一个包含孩子 ID 的数组

我试图以各种方式访问​​帖子的回复，但它不起作用。因此，如果有人能为我破解这个难题，那就太好了:)

**输出**

> #< PostsController: > 的未定义方法“回复”

**模型**

```
class Post
  include Mongoid::Document
  has_many :replies
  field :text,:type => String
end

class Reply
  include Mongoid::Document
  belongs_to :post
  field :name, :type => String
  field :text, :type => String
end 
```

**控制器**

```
def create_reply
  post = Post.find(params[:post_id])
  post.reply.new(params[:post])
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:09:38.987

`reply`为您的`Post`班级未定义，因为`Post`有很多`replies`，不是`reply`。

尝试改用`post.replies.new(params[:post])`您的`create_reply`方法编写。