# StackOverflow 问答 14170000-14170999

# c - 易失性和编译器优化

> ID：14170000
> 
> 赞同：4
> 
> 时间：2013-01-05T08:20:38.290
> 
> 标签：c, compiler-optimization, volatile

如果关闭编译器优化（即（gcc -o0 ....）），可以说'volatile'关键字没有区别吗？

我已经制作了一些示例“C”程序，并且仅在打开编译器优化时才看到生成的汇编代码中易失性和非易失性之间的区别，即（（gcc -o1 ....）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T08:23:24.947

不，做出这样的声明是没有根据的。

`volatile`具有标准中规定的特定语义。您断言`gcc -O0`总是生成代码，使得每个变量（`volatile`或不）都符合这些语义。这不能保证；即使它恰好是特定程序和特定版本的情况`gcc`，例如，当您升级编译器时，它也可能会发生变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T08:23:41.550

可能与-for GCC 4.7 或更早版本`volatile`没有太大区别。`gcc -O0`然而，这可能会在 GCC 的下一个版本（即未来的 4.8，即当前的主干）中发生变化。并且下一个版本还将提供`-Og`对调试友好的优化。

在 GCC 4.7 和更早版本中，没有优化意味着值并不总是保存在从一个 C（甚至 Gimple，即 GCC 内部的内部表示）指令到下一个指令的寄存器中。

此外，`volatile`对于符合标准的编译器和人类都有特定的含义。例如，如果阅读一些带有不是的变量的代码，我会*感到*`sig_atomic_t`不安！ *`volatile`*

 *顺便说一句，您可以使用`-fdump-tree-all`GCC 的选项来获取大量转储文件，或者使用[MELT](http://gcc-melt.org/)域特定语言和插件，特别是它的[探针](http://gcc-melt.org/#probe_id)通过图形界面查询 GCC 内部表示。*

# asp.net - 我的气球弹出不起作用

> ID：14170003
> 
> 赞同：0
> 
> 时间：2013-01-05T08:21:12.080
> 
> 标签：asp.net, popup, asp.net-ajax

我正在使用弹出窗口，但它无法在最终渲染中显示任何内容。任何人都可以告诉我我的鳕鱼有什么问题吗：非常感谢这是我的代码：面板鳕鱼：

```
 <asp:Panel ID="Panel2" runat="server">
<b>   Test.</b>
 </asp:Panel> 
```

气球弹出代码：

```
<asp:BalloonPopupExtender ID="len_BalloonPopupExtender" runat="server" BalloonPopupControlID="Panel1"

CustomCssUrl="" DisplayOnClick="False" DisplayOnMouseOver="True" DynamicServicePath=""

Enabled="True" ExtenderControlID="" TargetControlID="len" DisplayOnFocus="False"

BalloonStyle="Rectangle">

</asp:BalloonPopupExtender> 
```

文本框代码：

```
<asp:TextBox ID="len" onmouseout="this.BalloonPopupControlBehavior.hidePopup();" runat="server" BorderColor="#3399FF" BorderStyle="Groove" BorderWidth="2px" Width="50"  AutoPostBack="true" TabIndex="2" MaxLength="4"></asp:TextBox> 
```

还有一件事是我一个也`<asp:BalloonPopupExtender>`没用`<Ajax:BalloonPopupExtender>`！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:31:54.723

您指定`BalloonPopupControlID="Panel1"`，但您的面板 id 是**Panel2**。

只需将其更改为正确的值即可：

![在此处输入图像描述](../Images/3dbfb4fe9291965dcf3689279e1aa6b8.png)

# javascript - 使用 Jquery 显示当前日期和时间

> ID：14170009
> 
> 赞同：1
> 
> 时间：2013-01-05T08:23:12.923
> 
> 标签：javascript, jquery, html, jquery-plugins

我不是 jQuery 开发人员，但我想要这样的输出：

> 2007 年 6 月 9 日，星期六，下午 5:46:21

请查看此代码 ( [jsFiddle](http://jsfiddle.net/NgHZB/) )。

```
<span id="date"></span>

var now = new Date();
dateFormat(now, "dddd, mmmm dS, yyyy, h:MM:ss TT");
 // Saturday, June 9th, 2007, 5:46:21 PM
$('#date').append(now); 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T08:42:36.637

使用[moment.js](http://momentjs.com/)

[演示](http://jsfiddle.net/mplungjan/yS4da/)

```
var now = moment().format("dddd, MMMM Do, YYYY, h:mm:ss A");
     // Saturday, June 9th, 2007, 5:46:21 PM
$('#date').append(now); 
```

输出：

```
Saturday, January 5th, 2013, 9:01:22 AM 
```

[但是，如果您要使用 Ian Atkin 为您找到的较旧的 (2009) date.format.js](http://stevenlevithan.com/assets/misc/date.format.js)并且您需要首先包含以下内容，则无需更改任何内容：

[演示](http://jsfiddle.net/mplungjan/LqVmx/)

输出

`Saturday, January 5th, 2013, 9:48:33 AM`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T08:39:18.413

使用此`dateFormat`功能，可在[此链接](http://blog.stevenlevithan.com/archives/date-time-format)获得。它甚至具有您询问的完全相同的格式。

包含该功能后，您可以原样运行**代码**！

```
/*
 * Date Format 1.2.3
 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
 * MIT license
 *
 * Includes enhancements by Scott Trenda <scott.trenda.net>
 * and Kris Kowal <cixar.com/~kris.kowal/>
 *
 * Accepts a date, a mask, or a date and a mask.
 * Returns a formatted version of the given date.
 * The date defaults to the current date/time.
 * The mask defaults to dateFormat.masks.default.
 */

var dateFormat = function () {
    var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
        timezone = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
        timezoneClip = /[^-+\dA-Z]/g,
        pad = function (val, len) {
            val = String(val);
            len = len || 2;
            while (val.length < len) val = "0" + val;
            return val;
        };

    // Regexes and supporting functions are cached through closure
    return function (date, mask, utc) {
        var dF = dateFormat;

        // You can't provide utc if you skip other args (use the "UTC:" mask prefix)
        if (arguments.length == 1 && Object.prototype.toString.call(date) == "[object String]" && !/\d/.test(date)) {
            mask = date;
            date = undefined;
        }

        // Passing date through Date applies Date.parse, if necessary
        date = date ? new Date(date) : new Date;
        if (isNaN(date)) throw SyntaxError("invalid date");

        mask = String(dF.masks[mask] || mask || dF.masks["default"]);

        // Allow setting the utc argument via the mask
        if (mask.slice(0, 4) == "UTC:") {
            mask = mask.slice(4);
            utc = true;
        }

        var _ = utc ? "getUTC" : "get",
            d = date[_ + "Date"](),
            D = date[_ + "Day"](),
            m = date[_ + "Month"](),
            y = date[_ + "FullYear"](),
            H = date[_ + "Hours"](),
            M = date[_ + "Minutes"](),
            s = date[_ + "Seconds"](),
            L = date[_ + "Milliseconds"](),
            o = utc ? 0 : date.getTimezoneOffset(),
            flags = {
                d:    d,
                dd:   pad(d),
                ddd:  dF.i18n.dayNames[D],
                dddd: dF.i18n.dayNames[D + 7],
                m:    m + 1,
                mm:   pad(m + 1),
                mmm:  dF.i18n.monthNames[m],
                mmmm: dF.i18n.monthNames[m + 12],
                yy:   String(y).slice(2),
                yyyy: y,
                h:    H % 12 || 12,
                hh:   pad(H % 12 || 12),
                H:    H,
                HH:   pad(H),
                M:    M,
                MM:   pad(M),
                s:    s,
                ss:   pad(s),
                l:    pad(L, 3),
                L:    pad(L > 99 ? Math.round(L / 10) : L),
                t:    H < 12 ? "a"  : "p",
                tt:   H < 12 ? "am" : "pm",
                T:    H < 12 ? "A"  : "P",
                TT:   H < 12 ? "AM" : "PM",
                Z:    utc ? "UTC" : (String(date).match(timezone) || [""]).pop().replace(timezoneClip, ""),
                o:    (o > 0 ? "-" : "+") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),
                S:    ["th", "st", "nd", "rd"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]
            };

        return mask.replace(token, function ($0) {
            return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);
        });
    };
}();

// Some common format strings
dateFormat.masks = {
    "default":      "ddd mmm dd yyyy HH:MM:ss",
    shortDate:      "m/d/yy",
    mediumDate:     "mmm d, yyyy",
    longDate:       "mmmm d, yyyy",
    fullDate:       "dddd, mmmm d, yyyy",
    shortTime:      "h:MM TT",
    mediumTime:     "h:MM:ss TT",
    longTime:       "h:MM:ss TT Z",
    isoDate:        "yyyy-mm-dd",
    isoTime:        "HH:MM:ss",
    isoDateTime:    "yyyy-mm-dd'T'HH:MM:ss",
    isoUtcDateTime: "UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"
};

// Internationalization strings
dateFormat.i18n = {
    dayNames: [
        "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat",
        "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"
    ],
    monthNames: [
        "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec",
        "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"
    ]
};

// For convenience...
Date.prototype.format = function (mask, utc) {
    return dateFormat(this, mask, utc);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T08:44:04.043

我认为这就是你想要的：

HTML：

```
<span id="date"></span> 
```

Javascript：

```
function date (format, timestamp) {
    var that = this,
      jsdate,
      f,
      formatChr = /\\?([a-z])/gi,
      formatChrCb,
      // Keep this here (works, but for code commented-out
      // below for file size reasons)
      //, tal= [],
      _pad = function (n, c) {
        n = n.toString();
        return n.length < c ? _pad('0' + n, c, '0') : n;
      },
      txt_words = ["Sun", "Mon", "Tues", "Wednes", "Thurs", "Fri", "Satur", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
  formatChrCb = function (t, s) {
    return f[t] ? f[t]() : s;
  };
  f = {
    // Day
    d: function () { // Day of month w/leading 0; 01..31
      return _pad(f.j(), 2);
    },
    D: function () { // Shorthand day name; Mon...Sun
      return f.l().slice(0, 3);
    },
    j: function () { // Day of month; 1..31
      return jsdate.getDate();
    },
    l: function () { // Full day name; Monday...Sunday
      return txt_words[f.w()] + 'day';
    },
    N: function () { // ISO-8601 day of week; 1[Mon]..7[Sun]
      return f.w() || 7;
    },
    S: function () { // Ordinal suffix for day of month; st, nd, rd, th
      var j = f.j();
      if(j < 4 || j > 20){
        return (['st', 'nd', 'rd'])[j % 10 - 1];
      }
      else
      {
        return 'th';
      }
    },
    w: function () { // Day of week; 0[Sun]..6[Sat]
      return jsdate.getDay();
    },
    z: function () { // Day of year; 0..365
      var a = new Date(f.Y(), f.n() - 1, f.j()),
        b = new Date(f.Y(), 0, 1);
      return Math.round((a - b) / 864e5);
    },

    // Week
    W: function () { // ISO-8601 week number
      var a = new Date(f.Y(), f.n() - 1, f.j() - f.N() + 3),
        b = new Date(a.getFullYear(), 0, 4);
      return _pad(1 + Math.round((a - b) / 864e5 / 7), 2);
    },

    // Month
    F: function () { // Full month name; January...December
      return txt_words[6 + f.n()];
    },
    m: function () { // Month w/leading 0; 01...12
      return _pad(f.n(), 2);
    },
    M: function () { // Shorthand month name; Jan...Dec
      return f.F().slice(0, 3);
    },
    n: function () { // Month; 1...12
      return jsdate.getMonth() + 1;
    },
    t: function () { // Days in month; 28...31
      return (new Date(f.Y(), f.n(), 0)).getDate();
    },

    // Year
    L: function () { // Is leap year?; 0 or 1
      var j = f.Y();
      return j % 4 === 0 & j % 100 !== 0 | j % 400 === 0;
    },
    o: function () { // ISO-8601 year
      var n = f.n(),
        W = f.W(),
        Y = f.Y();
      return Y + (n === 12 && W < 9 ? 1 : n === 1 && W > 9 ? -1 : 0);
    },
    Y: function () { // Full year; e.g. 1980...2010
      return jsdate.getFullYear();
    },
    y: function () { // Last two digits of year; 00...99
      return f.Y().toString().slice(-2);
    },

    // Time
    a: function () { // am or pm
      return jsdate.getHours() > 11 ? "pm" : "am";
    },
    A: function () { // AM or PM
      return f.a().toUpperCase();
    },
    B: function () { // Swatch Internet time; 000..999
      var H = jsdate.getUTCHours() * 36e2,
        // Hours
        i = jsdate.getUTCMinutes() * 60,
        // Minutes
        s = jsdate.getUTCSeconds(); // Seconds
      return _pad(Math.floor((H + i + s + 36e2) / 86.4) % 1e3, 3);
    },
    g: function () { // 12-Hours; 1..12
      return f.G() % 12 || 12;
    },
    G: function () { // 24-Hours; 0..23
      return jsdate.getHours();
    },
    h: function () { // 12-Hours w/leading 0; 01..12
      return _pad(f.g(), 2);
    },
    H: function () { // 24-Hours w/leading 0; 00..23
      return _pad(f.G(), 2);
    },
    i: function () { // Minutes w/leading 0; 00..59
      return _pad(jsdate.getMinutes(), 2);
    },
    s: function () { // Seconds w/leading 0; 00..59
      return _pad(jsdate.getSeconds(), 2);
    },
    u: function () { // Microseconds; 000000-999000
      return _pad(jsdate.getMilliseconds() * 1000, 6);
    },

    // Timezone
    e: function () { // Timezone identifier; e.g. Atlantic/Azores, ...
      // The following works, but requires inclusion of the very large
      // timezone_abbreviations_list() function.
/*              return that.date_default_timezone_get();
*/
      throw 'Not supported (see source code of date() for timezone on how to add support)';
    },
    I: function () { // DST observed?; 0 or 1
      // Compares Jan 1 minus Jan 1 UTC to Jul 1 minus Jul 1 UTC.
      // If they are not equal, then DST is observed.
      var a = new Date(f.Y(), 0),
        // Jan 1
        c = Date.UTC(f.Y(), 0),
        // Jan 1 UTC
        b = new Date(f.Y(), 6),
        // Jul 1
        d = Date.UTC(f.Y(), 6); // Jul 1 UTC
      return ((a - c) !== (b - d)) ? 1 : 0;
    },
    O: function () { // Difference to GMT in hour format; e.g. +0200
      var tzo = jsdate.getTimezoneOffset(),
        a = Math.abs(tzo);
      return (tzo > 0 ? "-" : "+") + _pad(Math.floor(a / 60) * 100 + a % 60, 4);
    },
    P: function () { // Difference to GMT w/colon; e.g. +02:00
      var O = f.O();
      return (O.substr(0, 3) + ":" + O.substr(3, 2));
    },
    T: function () { // Timezone abbreviation; e.g. EST, MDT, ...
      // The following works, but requires inclusion of the very
      // large timezone_abbreviations_list() function.
/*              var abbr = '', i = 0, os = 0, default = 0;
      if (!tal.length) {
        tal = that.timezone_abbreviations_list();
      }
      if (that.php_js && that.php_js.default_timezone) {
        default = that.php_js.default_timezone;
        for (abbr in tal) {
          for (i=0; i < tal[abbr].length; i++) {
            if (tal[abbr][i].timezone_id === default) {
              return abbr.toUpperCase();
            }
          }
        }
      }
      for (abbr in tal) {
        for (i = 0; i < tal[abbr].length; i++) {
          os = -jsdate.getTimezoneOffset() * 60;
          if (tal[abbr][i].offset === os) {
            return abbr.toUpperCase();
          }
        }
      }
*/
      return 'UTC';
    },
    Z: function () { // Timezone offset in seconds (-43200...50400)
      return -jsdate.getTimezoneOffset() * 60;
    },

    // Full Date/Time
    c: function () { // ISO-8601 date.
      return 'Y-m-d\\TH:i:sP'.replace(formatChr, formatChrCb);
    },
    r: function () { // RFC 2822
      return 'D, d M Y H:i:s O'.replace(formatChr, formatChrCb);
    },
    U: function () { // Seconds since UNIX epoch
      return jsdate / 1000 | 0;
    }
  };
  this.date = function (format, timestamp) {
    that = this;
    jsdate = (timestamp === undefined ? new Date() : // Not provided
      (timestamp instanceof Date) ? new Date(timestamp) : // JS Date()
      new Date(timestamp * 1000) // UNIX timestamp (auto-convert to int)
    );
    return format.replace(formatChr, formatChrCb);
  };
  return this.date(format, timestamp);
}

$(function(){
    $('#date').text(date('l, F jS, Y, h:i:s A'));
}); 
```

这可以像 PHP 的`date`函数一样格式化您的日期。

**[JSFiddle](http://jsfiddle.net/licson0729/jHHsm/)**

**更新**该功能得到改进，以提供正确和所需的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T08:28:23.440

我不知道为什么，但是添加一个空字符会给出所需的输出

另外，我替换`append`为`html`

[**JS 演示**](http://jsfiddle.net/NgHZB/11/)

PS：很想从更有经验的人那里知道为什么需要在`now2`变量之前或之后添加一个空白字符以显示输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-05T16:42:28.283

```
var now = moment().format("dddd, MMMM Do, YYYY, h:MM:ss A");
     // ___day, month _th, 20__, _:__:__ _M
$('#date').append(now); 
```

格式：*2007 年 6 月 9 日，星期六，下午 5:46:21*。此代码有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-13T13:39:29.070

也许它有帮助。

```
 $(function(){
	var d = new Date();
    var n = d.getDay()
	var y = d.getFullYear();
	var m = d.getMonth();

	/* Days */
	var weekday = new Array(7);
    weekday[0] = "Sunday";
    weekday[1] = "Monday";
    weekday[2] = "Tuesday";
    weekday[3] = "Wednesday";
    weekday[4] = "Thursday";
    weekday[5] = "Friday";
    weekday[6] = "Saturday";
	var day = weekday[d.getDay()];

	/* Months */
	var month = new Array(); 
    month[0] = "January";
    month[1] = "February";
    month[2] = "March";
    month[3] = "April";
    month[4] = "May";
    month[5] = "June";
    month[6] = "July";
    month[7] = "August";
    month[8] = "September";
    month[9] = "October";
    month[10] = "November";
    month[11] = "December";
	var n = month[d.getMonth()];

	var dated = n +" , "+day+" , "+m+" , "+y;

    /* 12 hours format */
	var TwentyFourHour = d.getHours();
    var hour = d.getHours();
   	if(hour > 12) { hour = hour - 12;}    
    if(hour==0){ hour=12; }

	/* AM and PM */
	var min = d.getMinutes();
	var mid = ' PM';
    if (min < 10) { min = "0" + min; }
	if(TwentyFourHour < 12) { mid = 'am'; }  

   /* Good Day , Good Morning , Good evening */
    var greeting;
    var time = new Date().getHours();
    if (time < 10) {
        greeting = "Great attitude is like a perfect cup of coffee – don’t start you day without it. Good morning.";
    } else if (time < 20) {
        greeting = "The power of imagination makes us infinite. Good day";
    } else {
        greeting = "Believe in yourself! Have faith in your abilities!. Good evening";
    }
   document.getElementById("dated").innerHTML =dated +","+hour+':'+min + mid;
   document.getElementById("extra").innerHTML =dated +","+hour+':'+min + mid + " " +greeting;

    });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<div style="font-family:sans-serif; font-weight:300" id="dated" ></div> 

<div style="font-family:sans-serif; font-weight:300" id="extra" ></div>
```

# c++ - 严格的别名和内存对齐

> ID：14170010
> 
> 赞同：19
> 
> 时间：2013-01-05T08:23:19.027
> 
> 标签：c++, c, casting, type-punning

我有性能关键代码，并且有一个巨大的函数，它在函数开始时在堆栈上分配了 40 个不同大小的数组。这些数组中的大多数必须具有一定的对齐方式（因为使用需要内存对齐的 cpu 指令（对于 Intel 和 arm CPU）在链的其他地方访问这些数组。

由于某些版本的 gcc 根本无法正确对齐堆栈变量（特别是对于 arm 代码），甚至有时它说目标架构的最大对齐比我的代码实际要求的要少，我别无选择，只能分配这些数组在堆栈上并手动对齐它们。

所以，对于每个数组，我需要做类似的事情来让它正确对齐：

```
short history_[HIST_SIZE + 32];
short * history = (short*)((((uintptr_t)history_) + 31) & (~31)); 
```

这样，`history`现在在 32 字节边界上对齐。对所有 40 个数组做同样的事情是很乏味的，而且这部分代码真的是 cpu 密集型的，我根本无法为每个数组做相同的对齐技术（这种对齐混乱使优化器感到困惑，不同的寄存器分配会大大减慢函数的速度，为了更好的解释，请参阅问题末尾的解释）。

所以......显然，我只想进行一次手动对齐，并假设这些数组一个接一个。我还为这些数组添加了额外的填充，以便它们始终是 32 字节的倍数。所以，然后我只需在堆栈上创建一个巨型字符数组并将其转换为具有所有这些对齐数组的结构：

```
struct tmp
{
   short history[HIST_SIZE];
   short history2[2*HIST_SIZE];
   ...
   int energy[320];
   ...
};

char buf[sizeof(tmp) + 32];
tmp * X = (tmp*)((((uintptr_t)buf) + 31) & (~31)); 
```

类似的东西。也许不是最优雅的，但它产生了非常好的结果，并且手动检查生成的程序集证明生成的代码或多或少是足够的和可接受的。构建系统已更新为使用更新的 GCC，突然我们开始在生成的数据中出现一些工件（例如，即使在禁用 asm 代码的纯 C 构建中，验证测试套件的输出也不再精确）。调试该问题花费了很长时间，它似乎与别名规则和较新版本的 GCC 有关。

那么，我该如何完成呢？请不要浪费时间试图解释它不是标准的、不可移植的、未定义的等（我已经阅读了很多关于此的文章）。此外，我无法更改代码（我可能会考虑修改 GCC 来解决问题，但不重构代码）......基本上，我想要的只是应用一些黑魔法，以便更新的 GCC在不禁用优化的情况下为此类代码生成功能相同的代码？

**编辑：**

*   我在多个操作系统/编译器上使用了这段代码，但是当我切换到基于 GCC 4.6 的更新的 NDK 时开始出现问题。使用 GCC 4.7（来自 NDK r8d）我得到了同样糟糕的结果*   我提到了 32 字节对齐。如果它伤害了您的眼睛，请将其替换为您喜欢的任何其他数字，例如 666（如果有帮助）。甚至没有必要提到大多数架构不需要这种对齐方式。如果我在堆栈上对齐 8KB 的本地数组，我会为 16 字节对齐松散 15 个字节，而我会为 32 字节对齐松散 31 个字节。我希望我的意思很清楚。
    *   我说在性能关键代码中堆栈上有大约 40 个数组。我可能还需要说它是一个运行良好的第三方旧代码，我不想弄乱它。好与坏不用说，没有意义。
    *   此代码/功能具有经过良好测试和定义的行为。我们有该代码要求的确切数量，例如它分配 Xkb 或 RAM，使用 Y kb 的静态表，并消耗多达 Z kb 的堆栈空间，并且它无法更改，因为代码不会更改。
    *   通过说“对齐混乱使优化器感到困惑”，我的意思是，如果我尝试分别对齐每个数组，代码优化器会为对齐代码分配额外的寄存器，而代码的性能关键部分突然没有足够的寄存器并开始丢弃堆栈而不是哪个导致代码变慢。在 ARM CPU 上观察到了这种行为（顺便说一下，我根本不担心英特尔）。
    *   我所说的伪像是指输出变得不精确，添加了一些噪声。要么是因为这种类型的别名问题，要么是编译器中存在一些错误，最终导致函数输出错误。

    简而言之，问题的重点......我如何分配随机数量的堆栈空间（使用 char 数组或`alloca`，然后对齐指向该堆栈空间的指针，并将这块内存重新解释为具有一些明确定义的布局的结构，只要结构本身正确对齐，就可以保证某些变量的对齐。我正在尝试使用各种方法来转换内存，我将大堆栈分配移动到一个单独的函数中，但我仍然得到错误的输出和堆栈损坏，我真的开始越来越多地认为这个巨大的函数会遇到一些问题gcc 中的一种错误。很奇怪，通过这个演员阵容，无论我尝试什么，我都无法完成这件事。顺便说一句，我禁用了所有需要对齐的优化，它现在是纯 C 风格的代码，但我仍然得到不好的结果（非精确输出和偶尔的堆栈损坏崩溃）。解决这一切的简单修复，我写而不是：

    ```
    char buf[sizeof(tmp) + 32];
    tmp * X = (tmp*)((((uintptr_t)buf) + 31) & (~31)); 
    ```

    这段代码：

    ```
    tmp buf;
    tmp * X = &buf; 
    ```

    然后所有的错误都消失了！唯一的问题是这段代码没有对数组进行正确的对齐，并且会在启用优化时崩溃。

    **有趣的观察：**
    我提到这种方法效果很好并产生了预期的输出：

    ```
    tmp buf;
    tmp * X = &buf; 
    ```

    在其他一些文件中，我添加了一个独立的 noinline 函数，它只是将一个 void 指针转换为该结构 tmp*：

    ```
    struct tmp * to_struct_tmp(void * buffer32)
    {
        return (struct tmp *)buffer32;
    } 
    ```

    最初，我认为如果我使用 to_struct_tmp 转换分配的内存，它会欺骗 gcc 产生我期望得到的结果，但它仍然会产生无效的输出。如果我尝试以这种方式修改工作代码：

    ```
    tmp buf;
    tmp * X = to_struct_tmp(&buf); 
    ```

    然后我得到同样**糟糕**的结果！哇，我还能说什么？也许，基于严格的别名规则 gcc 假设它`tmp * X`不相关`tmp buf`并`tmp buf`在从 to_struct_tmp 返回后立即作为未使用的变量删除？或者做了一些奇怪的事情，产生了意想不到的结果。我也尝试检查生成的程序集，但是，更改`tmp * X = &buf;`为`tmp * X = to_struct_tmp(&buf);`为函数生成截然不同的代码，因此，该别名规则不知何故影响了代码生成。

    **结论：**
    经过各种测试，我知道为什么无论我尝试什么都无法让它工作。基于严格的类型别名，GCC 认为静态数组是未使用的，因此不会为其分配堆栈。`tmp`然后，也使用堆栈的局部变量被写入存储我的结构的同一位置；换句话说，我的巨型结构与函数的其他变量共享相同的堆栈内存。只有这样才能解释为什么它总是导致同样的坏结果。-fno-strict-aliasing 解决了这个问题，正如在这种情况下所预期的那样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T13:31:40.497

首先，当您要求不要谈论“违反标准”、“依赖于实施”等问题时，我绝对支持您。恕我直言，您的问题绝对是合法的。

您将所有数组打包在一个中的方法`struct`也很有意义，这就是我要做的。

从问题表述中不清楚您观察到哪些“伪影”。是否生成了任何不需要的代码？还是数据错位？如果是后者 - 您可以（希望）使用诸如`STATIC_ASSERT`确保在编译时正确对齐的东西。或者至少`ASSERT`在调试构建时有一些运行时间。

正如 Eric Postpischil 建议的那样，您可以考虑将此结构声明为全局结构（如果这适用于这种情况，我的意思是多线程和递归不是一个选项）。

我想注意的另一点是所谓的堆栈探测。当您在单个函数中从堆栈分配大量内存时（准确地说是超过 1 页） - 在某些平台（例如 Win32）上，编译器会添加额外的初始化代码，称为堆栈探测。这也可能会对性能产生一些影响（尽管可能很小）。

此外，如果您不需要同时使用所有 40 个数组，您可以将其中一些排列在`union`. 也就是说，您将拥有一个大`struct`的，其中一些子`structs`将被分组到`union`中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T13:04:11.837

这里有很多问题。

**对齐：**很少需要 32 字节对齐。16 字节对齐有利于当前 Intel 和 ARM 处理器上的 SIMD 类型。在当前 Intel 处理器上使用 AVX 时，使用 16 字节对齐但不是 32 字节对齐的地址的性能成本通常很小。跨越高速缓存行的 32 字节存储可能会有很大的损失，因此 32 字节对齐可能会有所帮助。否则，16 字节对齐可能没问题。（在 OS X 和 iOS 上，`malloc`返回 16 字节对齐的内存。）

**关键代码中的分配：**您应该避免在性能关键代码中分配内存。通常，内存应该在程序开始时分配，或者在性能关键工作开始之前分配，并在性能关键代码期间重用。如果您在性能关键代码开始之前分配内存，那么分配和准备内存所需的时间基本上是无关紧要的。

**堆栈上的大而多的数组：**堆栈不适用于大内存分配，并且对其使用有限制。即使您现在没有遇到问题，将来代码中明显不相关的更改也可能与使用堆栈上的大量内存进行交互并导致堆栈溢出。

**阵列众多：** 40 个阵列很多。除非这些都同时用于不同的数据，而且必然如此，否则您应该寻求将一些相同的空间重新用于不同的数据和目的。不必要地使用不同的数组可能会导致更多的缓存抖动。

**优化：**不清楚您所说的“对齐混乱使优化器感到困惑，不同的寄存器分配会大大减慢函数的速度”是什么意思。如果您在一个函数中有多个自动数组，我通常希望优化器知道它们是不同的，即使您通过地址算术从数组中派生指针。例如，给定诸如 之类的代码`a[i] = 3; b[i] = c[i]; a[i] = 4;`，我希望优化器知道`a`,`b`和`c`是不同的数组，因此`c[i]`不能与 相同`a[i]`，因此可以消除`a[i] = 3;`。也许您遇到的一个问题是，对于 40 个数组，您有 40 个指向数组的指针，所以编译器最终会将指针移入和移出寄存器？

在这种情况下，为多种目的重用更少的数组可能有助于减少这种情况。如果您有一个实际上一次使用 40 个数组的算法，那么您可能会考虑重组算法，以便一次使用更少的数组。如果一个算法必须指向内存中的 40 个不同位置，那么您基本上需要 40 个指针，无论它们分配在何处或如何分配，而 40 个指针比可用的寄存器多。

如果您对优化和寄存器使用有其他顾虑，您应该更具体地了解它们。

**混叠和伪影：**您报告存在一些混叠和伪影问题，但您没有提供足够的细节来理解它们。如果您有一个大型`char`数组，您将其重新解释为包含所有数组的结构，则该结构内没有别名。所以不清楚你遇到了什么问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-06T00:40:59.000

### 只需禁用基于别名的优化并收工

如果您的问题实际上是由与严格别名相关的优化引起的，那么`-fno-strict-aliasing`将解决问题。此外，在这种情况下，您不必担心失去优化，因为*根据定义，*这些优化对您的代码是不安全的，您*不能*使用它们。

[Praetorian](https://stackoverflow.com/users/241631/praetorian)的观点很好。我记得在 gcc 中引入别名分析引发了一位开发人员的歇斯底里。某个 Linux 内核作者想要 (A) 给事物起别名，并且 (B) 仍然得到那个优化。（这过于简单化了，但似乎`-fno-strict-aliasing`可以解决问题，而且花费不多，而且他们肯定还有其他鱼要炸。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-05T08:54:05.183

32 字节对齐听起来好像您将按钮推得太远了。没有 CPU 指令需要这么大的对齐。基本上，与架构的最大数据类型一样宽的对齐方式就足够了。

C11 有 fo 的概念`maxalign_t`，它是架构最大对齐的虚拟类型。如果您的编译器还没有它，您可以通过类似的方式轻松模拟它

```
union maxalign0 {
  long double a;
  long long b;
  ... perhaps a 128 integer type here ...
};

typedef union maxalign1 maxalign1;
union maxalign1 {
  unsigned char bytes[sizeof(union maxalign0)];
  union maxalign0;
} 
```

现在您有了一个数据类型，它具有您平台的最大对齐方式，并且默认初始化为所有字节设置为`0`.

```
maxalign1 history_[someSize];
short * history = history_.bytes; 
```

这避免了您当前执行的可怕地址计算，您只需要采取一些`someSize`措施即可考虑到您总是分配多个`sizeof(maxalign1)`.

还要确保这没有混叠问题。首先`unions`在 C 中为此而生，然后总是允许字符指针（任何版本）为任何其他指针起别名。

# asp.net-mvc - 在使用 LINQ To SQL 数据模型的 Asp.Net MVC 3 中同时按 2 个条件过滤 Iem 时出现问题

> ID：14170021
> 
> 赞同：0
> 
> 时间：2013-01-05T08:24:20.050
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq, linq-to-sql

我的数据模型由 4 个表组成：项目引用产品、运输和用户。我想按产品字段对项目进行排序：类别和条件。在我的应用程序中，我使用 LINQ To SQL 类。这是我的代码：

```
public ViewResult Content(string category, string condition, int page = 1)
{
    var Items = _itemsRepository.GetItems()
                .Where(i => category == null && condition == null || 
                (i.Product.Category != null && i.Product.Category == category) ||
                (i.Product.Condition != null && i.Product.Condition == condition))
                .OrderBy(i => i.ItemId)
                .Skip((page - 1) * PageSize)
                .Take(PageSize)
                .Select(i => i);
     // return Items to the view
} 
```

问题也可能是由路由引起的，所以这里是 global.asax 内容：

```
 // without categories and conditions
        routes.MapRoute(
            null,
            "Store/Content/Page{page}",
            new { controller = "Store", action = "Content", category = (string)null, condition = (string)null },
            new { page = @"\d+" });

        // with conditions
        routes.MapRoute(
            null,
            "Store/Content/{condition}/Page{page}",
            new { controller = "Store", action = "Content", category = (string)null },
            new { page = @"\d+" });

        // with categories
        routes.MapRoute(
            null,
            "Store/Content/{category}/Page{page}",
            new { controller = "Store", action = "Content", condition = (string)null },
            new { page = @"\d+" });

        // Default route
        routes.MapRoute(
            null,
            "{controller}/{action}",
            new { controller = "Home", action = "Index"}); 
```

如果我将带有类别的路线放在带有条件的路线之上，它可以按类别排序，反之亦然。如何同时按类别和条件排序？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:54:17.337

这是一个经过优化的查询（顺便说一句，您没有按产品属性对项目进行排序 - 您正在过滤它们）：

```
public ViewResult Content(string category, string condition, int page = 1)
{
    var Items = _itemsRepository.GetItems()
         .Where(i => ((category == null) || (i.Product.Category == category)) &&
                     ((condition == null) || (i.Product.Condition == condition)))
         .OrderBy(i => i.ItemId)
         .Skip((page - 1) * PageSize)
         .Take(PageSize)
         .Select(i => i);
    // return Items to the view
} 
```

关于路由 - 正如我在评论中所说，您的类别路由无法执行。因此，如果类别和条件都是可选的，那么您可以传递一个参数，其中类别和条件由特殊字符分隔，或者两者都传递为`category=foo&condition=bar`.

还有一点 - 确保您的存储库在调用时不会将项目加载到内存中`GetItems()`

# asp.net - 在文本框中输入数据时如何触发按钮的特定单击事件

> ID：14170024
> 
> 赞同：0
> 
> 时间：2013-01-05T08:24:46.247
> 
> 标签：asp.net

我添加了三个带有三个按钮的文本框，我希望在输入第一个文本框时，第一个按钮的事件触发以及在第二个文本框上输入时，第二个按钮的事件触发为 on..

但面临的问题是这一切都在用户控制中，当在第一个文本框中输入时，第一个按钮的事件触发，当输入第二个或第三个文本框时，第一个按钮的事件也被触发。

我在文本框（key == 13）的按键事件上添加了 java 脚本和 Jquery 函数，但是这些函数没有在用户控件中进行检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:30:01.530

您可以使用 jquery[更改](http://api.jquery.com/change/)方法或[focusin](http://api.jquery.com/focusin/)

```
$('#firsttxtbox').change(function() {
  alert('First textbox's text changed');
}); 
```

# xpages - XPages：如何使用客户端JS中的数据作为dataview控件的数据源？

> ID：14170027
> 
> 赞同：-1
> 
> 时间：2013-01-05T08:25:21.633
> 
> 标签：xpages

我使用客户端JS收集一些数据，并希望将这些数据用作一些常见xpages控件的数据源，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:04:58.193

我假设您的意思是 ViewPanel、DataTable 或重复的数据源？

*   使用客户端 js 将数据放在隐藏字段中。
*   执行服务器端操作。（在服务器端操作中，如果需要，您可以将隐藏字段中的数据放入范围变量中）
*   从服务器端操作执行部分刷新，并确保您正在刷新需要使用客户端数据作为数据源的控件。
*   将控件的数据源指向隐藏字段（或范围变量，如果这是您使用的）
*   根据需要处理数据。例如，如果您的字段包含“一、二、三”作为值，则需要使用 string.split() 将其转换为数组。

# android - 在非活动类中使用窗口？

> ID：14170029
> 
> 赞同：3
> 
> 时间：2013-01-05T08:25:30.193
> 
> 标签：android, android-activity, window, statusbar, titlebar

之前，我看到这个片段在`Height of statusbar?(and also Tiltebar)` [这里](https://stackoverflow.com/a/3356263/1043882)找到：

```
Rect rectgle= new Rect();
Window window= getWindow();
window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
int StatusBarHeight= rectgle.top;
int contentViewTop= 
    window.findViewById(Window.ID_ANDROID_CONTENT).getTop();
int TitleBarHeight= contentViewTop - StatusBarHeight; 
```

昨天，我试图在一个类中使用这个片段。`AsyncTask`所以我将我的 Activity 实例发送到`AsyncTask`类，在`onCreate`Activity 中：

```
LongOperation loper = new LongOperation(this, vg, vArray, hintsArray,x_positionArray, y_positionArray);//Here `this` refers to current Activity
loper.execute("YES"); 
```

在 AsynkTask 类的 doInBackground 中，我只做了：

```
Thread.sleep(3000); 
```

在`onPostExecute`方法中，我复制上面的代码来计算状态栏和标题栏的高度。但是应用程序崩溃，没有任何有用的 logcat 登录。然后我评论一些这样的行：

```
Rect rectgle = new Rect();
    Window window = activity.getWindow();
//  window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
//  int StatusBarHeight= rectgle.top;
    contentViewTop = window.findViewById(Window.ID_ANDROID_CONTENT)
            .getTop();
//  int TitleBarHeight= contentViewTop - StatusBarHeight; 
```

并且应用程序工作正常。所以看起来

> window.getDecorView().getWindowVisibleDisplayFrame(rectgle);

导致应用程序崩溃，但我不知道为什么？我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:02:31.690

好吧，如果您在 Android 2.3.3 中运行您的应用程序，那么可能会发生该应用程序崩溃。因为这种方法有点坏了。所以[这个](https://stackoverflow.com/questions/7659652/getwindowvisibledisplayframe-gives-different-values-in-android-2-2-2-3-but-n)解决方案可能会对您有所帮助。

希望这可以帮助 ：）

# image-processing - 矫正一对立体图像会改变基线吗？

> ID：14170034
> 
> 赞同：2
> 
> 时间：2013-01-05T08:26:31.357
> 
> 标签：image-processing, graphics, computer-vision

我有一系列经过校正的立体图像，以左侧相机为参考，（R0 是身份，T0 ~ 0）。我在右相机 R1 和 T1 上有外在因素，其中 T1 的 x 分量是基线。

我也有校正前后的投影矩阵，K0 和 K1，以及 K0_rect 和 K1_rect。

如果我只是使用修正后的投影矩阵，我还能使用 T1 的基线，还是它改变了？

此外，校正后的投影矩阵是一个 3x4 矩阵，除了 K1_rect 的 x 分量具有非零数外，它全为零。

谢谢！

# javascript - air xmlhttprequest 无法发送 GET 参数

> ID：14170035
> 
> 赞同：1
> 
> 时间：2013-01-05T08:26:35.890
> 
> 标签：javascript, air, xmlhttprequest

这是在单击按钮时调用的代码并且工作正常

```
var console = console || 
    {log:function(msg){window.runtime.trace(msg);}};
    console.log("opening link:"+bannerurl);
    var xmlhttp = new XMLHttpRequest(); 
    xmlhttp.open("GET", bannerurl,false);
    xmlhttp.send(null);
    document.getElementById("banner").innerHTML=xmlhttp.responseText; 
```

输出是：

> 打开链接：http://www.mysite.com

当我添加以下行时：

```
bannerurl=bannerurl+"?hi=22"; 
```

输出是：

```
> opening link:http://www.mysite.com?hi=22 
> Error: NETWORK_ERR:XMLHttpRequest Exception 101 
> setup1 at app:/js/result.js : 435 
```

url [http://www.mysite.com?hi=22](http://www.mysite.com?hi=22)（以 mysite 替换真实 url 作为示例）工作得很好，代码在 Firefox 中使用 forcecors 工作得很好，但不会在 AIR 中运行。

当我被允许时，关于 AIR 的咆哮将在稍后回答这个问题。问题是 IE 设置为脱机工作，因此只有已经缓存的页面才能工作，但新的页面不能工作（使用不同的 GET 参数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:09:39.983

我发现 Internet Explorer 处于离线模式。我几乎从不使用 IE，所以没有注意到这一点。

# java - 是否可以在 Java 中创建创建文本以在 Chrome 中链接的程序？

> ID：14170041
> 
> 赞同：5
> 
> 时间：2013-01-05T08:28:44.973
> 
> 标签：java, swing, hyperlink

我为这个冗长的问题道歉。

前几天我在浏览一个论坛，我看到一些链接到 youtube 和其他网站的文本。我必须始终突出显示，然后在谷歌浏览器中复制和粘贴或右键单击“转到”。

由于我一直在使用 Java，所以我想制作自己的小程序，该程序将提供指向具有 address 的文本的链接。例如，如果我说“嘿，看看我前几天看到的 'www.youtube.com' 的这个视频”，我希望 youtube 部分是可点击的。

谁能告诉我这样的事情是否可能，如果是的话，我必须为此使用哪些库，最后，如何找到java中所有导入和库的列表？

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-05T08:43:24.730

使用 HTML in[`JEditorPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JEditorPane.html)和 add[`HyperLinkListener`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/HyperlinkListener.html)来检测对 URL 的点击。

比使用[桌面 API](http://docs.oracle.com/javase/tutorial/uiswing/misc/desktop.html)打开带有 URL 的默认浏览器。

就像是：

![在此处输入图像描述](../Images/e92a14e89c020beb09501ee005f81fbf.png)

```
import java.awt.Desktop;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.event.HyperlinkEvent;
import javax.swing.event.HyperlinkListener;

public class Test {

    public static void main(String[] argv) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {

                JEditorPane jep = new JEditorPane();
                jep.setContentType("text/html");//set content as html
                jep.setText("Welcome to <a href='http://stackoverflow.com/'>StackOverflow</a>.");

                jep.setEditable(false);//so its not editable
                jep.setOpaque(false);//so we dont see whit background

                jep.addHyperlinkListener(new HyperlinkListener() {
                    @Override
                    public void hyperlinkUpdate(HyperlinkEvent hle) {
                        if (HyperlinkEvent.EventType.ACTIVATED.equals(hle.getEventType())) {
                            System.out.println(hle.getURL());
                            Desktop desktop = Desktop.getDesktop();
                            try {
                                desktop.browse(hle.getURL().toURI());
                            } catch (Exception ex) {
                                ex.printStackTrace();
                            }
                        }
                    }
                });

                JFrame f = new JFrame("HyperlinkListener");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.add(jep);
                f.pack();
                f.setVisible(true);
            }
        });
    }
} 
```

# ios - iOS zip 子目录文档文件夹

> ID：14170042
> 
> 赞同：0
> 
> 时间：2013-01-05T08:28:48.277
> 
> 标签：ios, zip

我正在使用适用于 iOS 的 ZipKit 我正在尝试压缩我的 Documents 文件夹的子目录。我已经提到了这个[问题](https://stackoverflow.com/questions/8565568/how-to-zip-a-directory-in-ios-with-zipkit)，但它似乎仍然不起作用。我的代码是：

```
ZKFileArchive *archive = [ZKFileArchive archiveWithArchivePath:@"Documents/test.zip"];
NSInteger result = [archive deflateDirectory:@"/Documents/test" relativeToPath:@"/Documents" usingResourceFork:NO]; 
```

我有一个“测试”子目录，我想将它压缩到 test.zip 中。“结果”返回 1，但没有出现 zip 文件夹。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T08:54:25.557

弄清楚了。对于任何有同样问题的人，您只需要设置实际文档文件夹的相对路径：

```
NSArray *documentPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentFolder = [documentPath objectAtIndex:0];

ZKFileArchive *archive = [ZKFileArchive archiveWithArchivePath:@"Documents/test.zip"];
NSInteger result = [archive deflateDirectory:@"/Documents/test" relativeToPath:documentFolder usingResourceFork:NO]; 
```

# css - 绝对定位菜单无法显示在 IE8 的固定标题中

> ID：14170049
> 
> 赞同：0
> 
> 时间：2013-01-05T08:30:15.607
> 
> 标签：css, internet-explorer-8, hidden, fixed, absolute

HTML 和样式如下：

```
<style type="text/css">
    .header {
        position: fixed;
        top: 0;
        width: 100%;
        height: 50px;
        background: #AAA;
    }
    .menu {
        position: relative;
        float: right;
        margin-right: 100px;
    }

    ul {
        display: none;
        position: absolute;
        top: 100%;
        height: 50px;
        width: 100px;
        background: #CCC;
        color: #C00;
    }
    .menu:hover ul {
        display: block;
    }
</style>
<div class="header">
    <div class="menu">
        <a>HOVER~</a>
        <ul><li>SHOW ME!!</li></ul>
    </div>
</div> 
```

标题是位置固定的，菜单是绝对位置的，简单的代码在我的 IE8 中运行良好。但是在线版本的菜单是不可见的，似乎菜单被父级溢出和隐藏，这应该不是。我尝试切换 CSS 规则或设置 z-index，仍然无法找出问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:38:12.427

据我所知，问题不在于发布的代码，如果您对其进行摆弄，一切正常（也在 ie 中）。我认为问题（我在 ie9 中也有）是类中的样式规则：.sub-header。这是您的原始代码：

```
.sub-header {
    height: 32px;
    border-bottom: 1px solid #1B1B1B;
    background-color: #2B2B2B;
    background-image: -moz-linear-gradient(bottom,#3B3B3B 0,#2B2B2B 100%);
    background-image: -webkit-gradient(linear,left bottom,left top,color-stop(0%,#3B3B3B),color-stop(100%,#2B2B2B));
    background-image: -webkit-linear-gradient(bottom,#3B3B3B 0,#2B2B2B 100%);
    background-image: -o-linear-gradient(bottom,#3B3B3B 0,#2B2B2B 100%);
    background-image: -ms-linear-gradient(bottom,#3B3B3B 0,#2B2B2B 100%);
    background-image: linear-gradient(bottom,#3B3B3B 0,#2B2B2B 100%);
    /* the following line should be removed, wrong syntax and causes height/display problems */
    *filter: progid:DXImageTransform.Microsoft.gradient(startcolorstr=#FF3B3B3B,endcolorstr=#FF2B2B2B)url(0/);
    background: url(http://img.yesneaker.com/img/common/gray-stripe.png) #3B3B3B repeat;
    background: url(http://img.yesneaker.com/img/common/black-circle.png) #222 repeat fixed;
    background: url(http://img.yesneaker.com/img/common/header-bg.png) 50% 0 #2B2B2B repeat;
} 
```

问题是过滤器（首先在行尾有错误 - url），其次，渐变过滤器和元素高度存在一些问题 - 尝试将其删除，看看它是否有效。

# c++ - std::map 是一个好的解决方案吗？

> ID：14170058
> 
> 赞同：0
> 
> 时间：2013-01-05T08:31:59.380
> 
> 标签：c++, sorting, stl

全部，

我有以下任务。

我有有限数量的字符串（类别）。然后在每个类别中都会有一组团队和价值对。团队的数量是有限的，基于用户的选择。

两种尺寸都不超过 25。

现在值将根据用户输入发生变化，当它发生变化时，应该根据值对团队进行排序。

我希望 STL 有某种自动排序的向量或列表容器，但我唯一能找到的是 std::map<>。

所以我认为我需要的是：

```
struct Foo
{
    std::string team;
    double value;
    operator<();
};

std::map<std::string,std::vector<Foo>> myContainer; 
```

当值发生变化时，只需调用 std::sort() 即可。

还是有更有效的方法来做到这一点？

[编辑] 我想我需要澄清我的意思。这样想吧。

你有一张桌子。此表的行是团队。此表的列是类别。该表的单元格被分成两半。上半部分是给定团队的类别值。这个值随着每个玩家的增加而增加。现在当球员加入球队时，球员的得分类别将被加入球队，并且列中的数据将被排序。因此，对于“A”类，它可能是 team1、team2；对于类别“B”，它可能是 team2、team1。然后根据每个团队的位置，为每个团队/类别分配分数。我需要展示这个分数。

我希望这将阐明我正在努力实现的目标，并且更清楚我在寻找什么。[/编辑]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:44:16.430

这实际上取决于您多久修改一次地图中的数据，以及您多久搜索一次 std::string 并获取向量。

如果您的访问模式是添加映射条目，然后填充向量中的所有条目，然后访问下一个条目，填充向量中的所有条目，等等。然后随机访问该向量的映射然后..没有映射可能不是最好的容器。您最好使用包含标准字符串和向量对的向量，然后在添加所有内容后对其进行排序。

事实上，如上所述组织它可能是设置它的最有效方式（但我承认这并不总是可能的）。此外，强烈建议使用某种哈希值代替 std::string，因为哈希比较比字符串比较快很多倍。无论如何，您也将字符串存储在 Foo 中。

map 会，但是，工作，但它真的取决于你想要做什么。

# windows-phone-7 - Windows phone 计算距离

> ID：14170059
> 
> 赞同：1
> 
> 时间：2013-01-05T08:32:13.950
> 
> 标签：windows-phone-7, background-agents, windows-mobile-gps

我正在开发 Windows Phone 应用程序。公共无效观察者_PositionChanged（对象发送者，GeoPositionChangedEventArgs e）{}

当应用程序在后台而不是前台运行时，此事件是否适用于每个位置变化？我想在应用程序在后台运行时每 10 秒计算一次行驶距离。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:32:03.790

你不能。微软对允许在后台运行的内容非常具体。

[有关更多信息，请参阅本文。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202866%28v=vs.105%29.aspx)

# java - 为什么单击按钮 NUM0-9 的 Java 代码不会打印出字符？

> ID：14170060
> 
> 赞同：1
> 
> 时间：2013-01-05T08:32:24.510
> 
> 标签：java, java-me, lcdui, j2mepolish, java-canvas

为什么单击按钮 NUM0-9 的 Java 代码不会打印出字符？

```
Code:
switch(this.getGameAction(keyCode)){
            case Canvas.KEY_NUM2:
                System.out.println('A');
                break;

            case Canvas.KEY_NUM0:
                System.out.println('B');

        } 
```

甚至没有出现错误。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:42:58.730

您没有对 KEY_NUM0-9 值使用 getGameAction()，也没有对 KEY_STAR 和 KEY_POUND 使用。你这样做：

```
public void keyPressed(int kc) {
 if (kc == KEY_NUM1 ) {} // key number 1 pressed
 if (getGameAction(kc) == LEFT) {} // left pressed
} 
```

# c++ - 在代码块中开发 vtk

> ID：14170062
> 
> 赞同：0
> 
> 时间：2013-01-05T08:32:43.777
> 
> 标签：c++, vtk

我在debian6.0.6中成功安装了vtk，我建立了一个静态库。我运行示例，一切正常。

但我想在代码块中开发。所以我在代码块中创建了一个项目，将代码“cone.cxx”复制到我的项目中，我设置了包含路径和链接器。但是有像“undefined reference to...”这样的编译错误，我猜那是因为它在静态库中找不到接口。

我想在编译我的项目之前我需要一些#defines。我可以在visual studio2008中看到pre_defines，但我无法在代码块中得到它，因为代码块项目默认使用它的makefile。如果我不想编写makefile，我可以获得解决方案吗？

# ios - 如何在objective-c中以编程方式更改字体的样式

> ID：14170066
> 
> 赞同：8
> 
> 时间：2013-01-05T08:33:09.123
> 
> 标签：ios, objective-c, uifont

我想以编程方式更改字体的样式（如粗体、常规、浅色、倾斜）。我知道我可以使用 IB，但我想以编程方式更改它。在这方面需要一些指导。对不起，如果这是一个愚蠢的问题。

例如，我的代码如下所示：

```
lblAge.font = [UIFont fontWithName:@"Helvetica" size:20]; 
```

我想添加常规的样式。我该怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-05T08:36:10.783

这应该让你去

```
offerTitle.font = [UIFont fontWithName:@"TimesNewRomanPS-ItalicMT" size:14.0f];//here offerTitle is the instance of `UILabel` 
```

希望这可以帮助：）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T08:38:40.013

试试这个解决方案：

```
myLabel.font = [UIFont boldSystemFontOfSize:16.0f];
myLabel.font = [UIFont italicSystemFontOfSize:16.0f]; 
```

对于常规尺寸：

```
myLabel.font = [UIFont systemFontOfSize:16.0f]; 
```

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-08T23:35:34.447

对于 iOS 8.2 及更高版本，[`+ systemFontOfSize:weight:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIFont_Class/#//apple_ref/occ/clm/UIFont/systemFontOfSize:weight:)您可以指定加权系统字体。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T08:39:25.137

查看 UIFont 的 API。将创建的字体分配给指定对象的属性“字体”

```
oneLabel.font=[UIFont fontWithXXX]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-09T11:06:07.597

```
static NSString *_myCustomFontName;
+ (NSString *)myCustomFontName:(NSString*)fontName{

    if ( !_myCustomFontName ){
        NSArray *arr = [UIFont fontNamesForFamilyName:fontName];
        // I know I only have one font in this family
        if ( [arr count] > 0 )
            _myCustomFontName = arr[0];
    }
    return _myCustomFontName;
} 
```

# php - php和mysql统计数量

> ID：14170067
> 
> 赞同：3
> 
> 时间：2013-01-05T08:33:10.813
> 
> 标签：php, mysql

我试图通过口袋妖怪的名称和类型来显示游戏中某个口袋妖怪的数量，（有两种类型正常和闪亮）我希望它只抓住一种难以解释的类型......对现在它抓住了这两种类型，我不知道为什么这是我的代码：/

```
$sql23 = "
    SELECT * FROM user_pokemon
    WHERE belongsto='". $_SESSION['username']."'AND (slot='1')
";
$result = mysql_query("
    SELECT * FROM user_pokemon
    WHERE belongsto='". $_SESSION{'username'}."'AND (slot='1')
");
while($row = mysql_fetch_array($result))
{
$sql = "SELECT * FROM pokemon WHERE name='".$row['pokemon']."'";
$result = mysql_query($sql) or die(mysql_error());
$battle_get = mysql_fetch_array($result);

$count = mysql_query("
    SELECT count(*) FROM user_pokemon WHERE pokemon='".$row['pokemon']."
    'AND type='".$row['type']."'
");
$count2 = mysql_fetch_array($count); 
```

老实说，我不明白为什么它不起作用，任何帮助将不胜感激:)

`$row['pokemon']`是口袋妖怪的名字

`$row['type']`是口袋妖怪的类型（闪亮、正常等）

`user_pokemon`表问：

```
Field       Type          Null      Default        Comments
-----------------------------------------------------------
id          int(11)       No                       
hp          int(55)       No        30             
pokemon     varchar(50)   No                       
belongsto   varchar(50)   No                       
exp         int(50)       No        500            
item        varchar(50)   No        No Item        
nickname    varchar(50)   No        No Nickname    
move1       varchar(50)   No        Ember          
move2       varchar(50)   No        Ember          
move3       varchar(50)   No        Ember          
move4       varchar(50)   No        Ember          
slot        int(50)       No                       
level       int(90)       No        5              
time_stamp  timestamp     No        CURRENT_TIMESTAMP
gender      varchar(25)   No        Male           
type        varchar(55)   No        Normal         Type: normal/shiny etc
safari_zone int(10)       No        0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:52:38.467

我经常在 StackOverflow 上看到的一件事是缺少代码格式。在我看来，解决这个问题是让你的代码对你自己（帮助学习）和其他人（帮助你的读者在这里）更具可读性的好方法。它还减少了水平滚动的需要，允许您在屏幕上并排放置多个编辑器。

这是带有建议的代码格式的代码：

```
$sql23 = "
    SELECT
        *
    FROM
        user_pokemon
    WHERE
        belongsto = '{$_SESSION['username']}'
        AND (slot = '1')
";
$result = mysql_query($sql23) or die(mysql_error());
while($row = mysql_fetch_array($result))
{
    $sql = "
        SELECT * FROM pokemon WHERE name = '{$row['pokemon']}'
    ";
    $result = mysql_query($sql) or die(mysql_error());
    $battle_get = mysql_fetch_array($result);

    $count = mysql_query("
        SELECT
            COUNT(*)
        FROM
            user_pokemon
        WHERE
            pokemon='{$row['pokemon']}'
            AND type='{$row['type']}'
    ");
    $count2 = mysql_fetch_array($count);
} 
```

这有助于表明您缺少右括号，并且实际上并未使用`while`该变量。`$sql23`另请注意，您可以在双引号字符串中使用内联数组值，方法是将它们包裹在大括号中。

如评论中所述，您应该升级到 PDO 或 mysqli。此外，如果值来自用户，请小心将值直接注入 SQL，因为这可能导致 SQL 注入漏洞。查看查询参数化，或者至少不污染，以确保您的代码是安全的。

# regex - 为什么 [^] 不是有效的正则表达式？

> ID：14170071
> 
> 赞同：3
> 
> 时间：2013-01-05T08:33:42.327
> 
> 标签：regex

在 Oreilly 的书《Classic Shell Scripting》第 3.2.2.4 节“锚文本匹配”中，为什么对应的 [^] 不是正则表达式？

我不明白为什么它不是正则表达式？有人可以给我小费吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T08:37:49.467

`[]`表示一个字符类。

在字符类的上下文中，`^`开头的 a 表示否定 - 也就是说，*不应*匹配所有*以下*字符。

 *所以，`[^]`是没有意义的，所以不允许。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T08:56:13.607

它实际上取决于正则表达式的味道是否`[^]`有效。

在 JavaScript 中，`[^]`有效并表示任意字符。但大多数其他风格规定字符类声明不能为空。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T08:38:36.453

只是猜测，因为几乎没有上下文，而是`[^]`一个不完整的字符类，因此不是正则表达式。`[^a]`将是一个正则表达式：匹配一个不是“a”的字符。*

# css - 确认框的位置

> ID：14170075
> 
> 赞同：2
> 
> 时间：2013-01-05T08:34:12.720
> 
> 标签：css, positioning

我使用绝对内部相对定位来定位确认框。由于页面包含很多内容，因此页面的高度非常大。ConfirmBox 位于页面中心，但不在屏幕中心。由于可以通过网页上的多个链接在多个点打开确认框，因此需要将确认框定位在屏幕中心（而不是页面中心）。我怎样才能做到这一点？

**CSS**

```
#confirmBox {
background:#fff;
border:1px solid #80686f;
border-radius:5px;
-webkit-box-shadow: 0 8px 6px -6px #766A65;
 -moz-box-shadow:0 8px 6px -6px #766A65;
box-shadow: 0 8px 6px -6px #766A65;
font-size:15px;
height:217px;
position:absolute;
text-align:center;
z-index:109;
width:400px;
top:50%;
left:50%;
margin-top:-108px;
margin-left:-200px;
} 
```

**HTML**

```
<div style="position:relative">
<div id="confirmBox">
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T08:45:57.220

尝试使用“固定”而不是绝对

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T09:02:19.103

使用`fixed`而不是`absolute`，您不能使用绝对将元素放置在整个页面的中心。检查这个 CSS，我给了**top|right|bottom|left** * *0px* * 它将使盒子在水平和垂直的中心。

```
#confirmBox {
border:1px solid #80686f;
height:217px;
position:fixed;
text-align:center;
z-index:109;
width:400px;
margin:auto;
left:0px;
right:0px;
bottom:0px;
top:0px;
} 
```

小提琴：JsFiddle 不工作，检查 JsBin 示例（输出）[http://jsbin.com/uxafal/1/](http://jsbin.com/uxafal/1/) 。查看代码[http://jsbin.com/uxafal/1/edit](http://jsbin.com/uxafal/1/edit)

# django - 使用 django-social-auth 在浏览器关闭时强制会话到期

> ID：14170077
> 
> 赞同：2
> 
> 时间：2013-01-05T08:34:14.387
> 
> 标签：django, session-timeout, django-sessions

当使用 FB/Google 登录到我的网站的用户关闭浏览器时，我正在寻找一种强制重新登录的方法。我正在阅读[https://django-social-auth.readthedocs.org/en/latest/configuration.html](https://django-social-auth.readthedocs.org/en/latest/configuration.html)，但我不认为：

```
SOCIAL_AUTH_EXPIRATION = 'expires' 
```

或者

```
SOCIAL_AUTH_SESSION_EXPIRATION = True 
```

真的做了我想要的。我尝试以这种方式添加自定义管道，将到期时间设置为 0 作为管道中的最后一件事：

```
def expire_session_on_browser_close(backend, details, response, social_user, uid, user, request, *args, **kwargs):
    request.session.set_expiry(0)

SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    #'social_auth.backends.pipeline.associate.associate_by_email',
    'social_auth.backends.pipeline.user.get_username',
    'social_auth.backends.pipeline.user.create_user',
    'social_auth.backends.pipeline.social.associate_user',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details',
    'useraccount.pipeline.expire_session_on_browser_close',
) 
```

但它似乎没有生效。环境

```
SESSION_EXPIRE_AT_BROWSER_CLOSE = True 
```

也没有效果。

在类似的说明中，我的网站还允许用户“以传统方式”登录，并且我能够拥有

```
request.session.set_expiry(0) 
```

在那里做伎俩，用户在关闭浏览器时被迫登录。只是不适用于 FB/Google 登录。

有什么想法吗？

谢谢！

**编辑：**

如果我去玩弄：

```
UserSocialAuthMixin::expiration_datetime() 
```

从

```
db\base.py 
```

并强制它返回 0，我的问题得到解决。

但这很糟糕，糟糕的黑客行为。有没有更好、更优雅的方式？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T21:21:29.703

哦，伙计，我过度设计到了 N 级。我需要做的就是设置：

```
SOCIAL_AUTH_SESSION_EXPIRATION=False 
```

这样，如果 Provider 的响应包含 'expires' 或任何 SOCIAL_AUTH_EXPIRATION 包含的内容，django-social-auth 将不会在该解析值上调用 set_expiry() 。

此外，我还设置了管道功能（如我原来的问题中所见），以便我可以设置自己的到期时间（在我的情况下为 0）。

# jquery - Firefox / Windows 7 中的 jQuery 地理定位表单提交异常

> ID：14170078
> 
> 赞同：2
> 
> 时间：2013-01-05T08:34:18.257
> 
> 标签：jquery, html, firefox, geolocation

以下代码在 IE、Safari、Mac 和 Windows 上的 Chrome、Mac 上的 Firefox 中正确提交，但在 Windows 7 上的 Firefox (17.01) 中，从不调用 submitForm 函数。

jQuery

```
$(document).ready(function() {
    $('#submit').on('click', function() {
        if(navigator.geolocation)
            navigator.geolocation.getCurrentPosition(success,submitForm); 
        else 
            submitForm();
    });
});

function success(locationData) {
    $("#lat").val(locationData.coords.latitude);
    $("#lng").val(locationData.coords.longitude);
    submitForm();
}

function submitForm() {
  alert('About to submit');
  $("#theForm").submit();
  return false;
} 
```

HTML

```
<form id="theForm" name="theForm" >
  <input type="text" id="lat" placeholder="Latitude" value="" />
  <input type="text" id="lng" placeholder="Longitude" value="" />
</form>
<button id="submit">OK</button> 
```

示例[小提琴](http://jsfiddle.net/yv28K/)

# javascript - Twitter 喜欢按钮悬停效果

> ID：14170080
> 
> 赞同：0
> 
> 时间：2013-01-05T08:34:38.710
> 
> 标签：javascript, css, twitter

我想知道如何实现类似Twitter的链接控制。

我的意思是当你在他们的推文页面上并且当你将鼠标悬停在推文上时，会有回复、删除和收藏的链接，当你不悬停它时它们就会消失。

我不知道要搜索什么关键字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:03:27.237

纯 CSS3

[http://jsbin.com/evebij/2/edit](http://jsbin.com/evebij/2/edit)

```
 <div>TWeeeet, tweeeet, tweet! ok , hover me now...
    <br>
    <br>
    <a href="#" class="tweetLink">Share</a>
    <a href="#" class="tweetLink">Replay</a> 
    <a href="#" class="tweetLink">Add to Favourite</a> 
  </div> 
```

```
.tweetLink {
  opacity: 0;
  visibility: hidden;
  -webkit-transition: visibility 0.2s linear, opacity 0.2s linear;
  -moz-transition: visibility 0.2s linear, opacity 0.2s linear;
  -o-transition: visibility 0.2s linear, opacity 0.2s linear;
}

div:hover .tweetLink {
  visibility: visible;
  opacity: 1;
} 
```

# paypal - 用户使用短信为付费内容付费

> ID：14170081
> 
> 赞同：0
> 
> 时间：2013-01-05T08:34:52.597
> 
> 标签：paypal, sms

我的网站具有高级内容应该授予特权用户访问权限。只有当这些用户向某个号码发送短信时，才应将这些用户分配到特权组。我如何从我的贝宝帐户上的这些用户短信中收款。

我有优质内容和贝宝帐户。已经花了太多时间寻找这种方法的体面解释，但我没有找到任何有用的教程。

所以，请分享一些链接或想法，解释我应该完成哪些步骤才能像上面解释的那样设置它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:29:13.680

如果您以非常低的价格（低于 10 美元和最高 10 美元）提供服务或内容，则 SMS 交易是合适的，否则就没有任何意义。您应该考虑取消基于此付款的用户会员资格，主要是因为此付款方式用于匿名用户。

谷歌是你的朋友，一些更好的调查和正确的关键词，你应该找到答案。

希望这有帮助，祝你好运。

# ios - restkit 将相同的响应映射到不同的类

> ID：14170087
> 
> 赞同：1
> 
> 时间：2013-01-05T08:36:08.407
> 
> 标签：ios, core-data, mapping, restkit

我要做的是将相同的响应映射到两个不同的类，其中一个是 NSManagedObject。所以我所拥有的是：

```
RKObjectMapping *movellasMapping = [RKObjectMapping mappingForClass:[Movella class]];
[movellasMapping addAttributeMappingsFromDictionary:@{
 @"numfavourites" : @"numfavourites",
 @"numcomments" : @"numcomments",
 @"id" : @"id",
 @"title" : @"title",
 @"cover" : @"cover",
 @"synopsis" : @"synopsis",
 @"numviews" : @"numviews",
 @"numlikes" : @"numlikes",
 }];

RKRelationshipMapping* relationShipMappingForMovella = [RKRelationshipMapping relationshipMappingFromKeyPath:@"author"
                                                                                                               toKeyPath:@"author"
                                                                                                             withMapping:userSimpleMapping];
[movellasMapping addPropertyMapping:relationShipMappingForMovella];

//Core Data
RKEntityMapping *movellasCDMapping = [RKEntityMapping mappingForEntityForName:@"MovellaCD" inManagedObjectStore:managedObjectStore];
movellasCDMapping.identificationAttributes = @[ @"id" ];

[movellasCDMapping addAttributeMappingsFromArray:@[ @"title", @"id", @"cover", @"chapters" ]];

RKResponseDescriptor *responseDescriptorForMovellas2 = [RKResponseDescriptor responseDescriptorWithMapping:movellasMapping pathPattern:@"movella/:id/"
                                                                                                                  keyPath:nil statusCodes:[NSIndexSet indexSetWithIndex:200]];

RKResponseDescriptor *responseDescriptorForMovellasCD = [RKResponseDescriptor responseDescriptorWithMapping:movellasCDMapping pathPattern:@"movella/:id/"
                                                                                                       keyPath:nil statusCodes:[NSIndexSet indexSetWithIndex:200]]; 
```

NSManagedObject 类是：

```
@interface MovellaCD : NSManagedObject

@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSString * id;
@property (nonatomic, retain) NSString * cover;
@property (nonatomic, retain) ChapterCD *chapters;
@end 
```

NSObject 类是：

```
@interface Movella : NSObject

@property (nonatomic, strong) NSArray* chapters;
@property (nonatomic, strong) NSNumber* pubdate;
@property (nonatomic, strong) NSNumber* numfavourites;
@property (nonatomic, strong) NSNumber* updateddate;
@property (nonatomic, strong) NSNumber* numcomments;
@property (nonatomic, strong) NSString* lang;
@property (nonatomic, strong) NSString* id;
@property (nonatomic, strong) UserSimple* author;
@property (nonatomic, strong) NSString* category;
@property (nonatomic, strong) NSString* title;
@property (nonatomic, strong) NSString* cover;
@property (nonatomic, strong) NSNumber* numwords;
@property (nonatomic, strong) NSString* synopsis;
@property (nonatomic, strong) NSString* rating;
@property (nonatomic, strong) NSNumber* numviews;
@property (nonatomic, strong) NSNumber* numlikes;

@end 
```

如您所见，即使响应相同，属性也会有所不同，这就是为什么我收到此错误 [MovellaCD author]: unrecognized selector sent to instance 0x96a3180

这些属性是不同的，因为这就是我的核心数据模型所需要的全部。任何帮助都会受到称赞。谢谢

# android - 如何在android中设置活动样式

> ID：14170089
> 
> 赞同：2
> 
> 时间：2013-01-05T08:36:13.747
> 
> 标签：android, background, styles

我在网上冲浪，偶然得到了这张图片.. [http://blog.donnfelker.com/wp-content/uploads/2011/11/qonqr-example.png](http://blog.donnfelker.com/wp-content/uploads/2011/11/qonqr-example.png)

因此，我尝试为我的活动添加背景颜色，但问题是整个活动都被该颜色覆盖。如果我不希望将颜色应用于`EditText`字段怎么办...？

还请告诉如何获得这种`TextView`风格，如“创建帐户”中的图像？

PS我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T08:41:24.733

尝试将您的活动拆分为不同的布局。然后将背景颜色应用于这些布局。对于 edittext，您设置其不同的背景。

# iphone - ZUUIRevealViewController 在后视图控制器和前视图控制器之间传递值

> ID：14170091
> 
> 赞同：2
> 
> 时间：2013-01-05T08:36:46.047
> 
> 标签：iphone

我正在使用`ZUUIRevealViewController`. 我`UITableview`在前视图控制器和后视图控制器中各有一个。根据传递的值，我必须`UITableview`在两个控制器中动态重新加载。如何将值从前视图控制器传递到后视图控制器，反之亦然？我用于导航的代码是

```
[(ZUUIRevealController *)self.navigationController.parentViewController revealToggle:nil]; 
```

和回去

```
 RevealController *revealController = [self.parentViewController isKindOfClass:[RevealController class]] ? (RevealController *)self.parentViewController : nil;
[revealController revealToggle:self]; 
```

# html - 填充被添加到 div 的宽度

> ID：14170093
> 
> 赞同：2
> 
> 时间：2013-01-05T08:37:22.423
> 
> 标签：html, css

我用这个代码

```
<div class="main">
<div class="babyOne">
</div>
<div class="babyTwo">
</div>
</div>

.main{
width:100%;
position:relative;
}
.babyOne,.badyTwo{
width:50%;
float:left;
} 
```

上面的这个 CSS 一切正常。

但是一旦我给内部 div 填充所有 ui 中断，

```
.babyOne,.badyTwo{
width:50%;
float:left;
padding:5px;
} 
```

并且 fire bug 显示 div 的宽度增加等于填充。根据填充属性，这不应该发生。知道如何防止这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T08:54:57.450

首先你需要学习CSS`box-model`

![在此处输入图像描述](../Images/b6edb2f84e219f9948b9a376fb785c92.png)

这表明无论`padding, border, margin`您添加到元素中的任何内容都会在它之外计算，因此例如元素是`200px width`and `100px height`，如果您添加`padding`say`5px`而不是`width`and`height`将分别是`205px`and `105px`，因此为了解决此问题，您需要使用 CSS3`box-sizing`属性，但是作为仍然是`CSS3`属性，如果 IE 是您想要支持的主要内容，我建议您根据需要调整元素的大小

因此，例如具有这些样式的 div

```
div {
   height: 100px;
   width: 200px;
   padding: 5px;
} 
```

您可以将上面的大小重新调整为

```
div {
   height: 95px;
   width: 195px;
   padding: 5px;
} 
```

CSS3`box-sizing` [参考](http://www.css3.info/preview/box-sizing/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T08:42:05.897

WRAPPER 必须具有固定大小：http: [//jsfiddle.net/esVgH/1](http://jsfiddle.net/esVgH/1)示例：

```
.main{
   width:200px;
   position:relative;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T08:40:32.737

您的问题是预期的行为。
你设置一个宽度，然后你说给它一些填充。
所以宽度加上填充将大于原始宽度。

你可以试试 CSS3s`box-sizing`属性：[http ://www.quirksmode.org/css/box.html](http://www.quirksmode.org/css/box.html)

我不确定它的支持范围有多广。

这里还有很多 SO 答案：[如何在不增加 div 大小的情况下在 HTML 中应用填充？](https://stackoverflow.com/questions/10162476/how-apply-padding-in-html-without-increasing-the-div-size)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T08:44:53.800

另一种解决方案是将 .baby 显示为表格单元格：

```
.babyOne, .badyTwo {
   display: table-cell;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T08:50:34.173

.babyOne,.badyTwo{

宽度：45%；/* 正如你所喜欢的基于填充 */

向左飘浮;

填充：5px；

}

# c# - 如何在 C# 中格式化和读取这种 CSV 文件

> ID：14170109
> 
> 赞同：0
> 
> 时间：2013-01-05T08:39:12.300
> 
> 标签：c#, csv

这只是我需要从 csv 文件中读取的数据的一个示例。
如何将第一行作为所有列的名称？
如何解析这些数据？
（我将使用数据绘制图表）

> 年份;I1;I2;I3;II1;III2
> 2012;2.4;3.1;1.2;3.7;0.8
> 2007;-1.1;-5.1;-2.5;-0.8;0.6
> 2001;3.9;4.4;1.8;2.4;5.9

感谢所有帮助我的人，我解决了我的问题，谢谢；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:42:10.130

我建议为此使用专门的库 - [FileHelpers](http://filehelpers.sourceforge.net/)是一种流行的第三方选择：

> FileHelpers 是一个免费且易于使用的 .NET 库，用于从文件、字符串或流中的固定长度或分隔记录导入/导出数据。

如果必须使用微软库，[`TextFieldParser`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)在`Microsoft.VisualBasic.FileIO`命名空间中也可以使用：

> 提供用于解析结构化文本文件的方法和属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:22:50.100

另一个免费工具是[CSV 阅读器](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)。无需一遍又一遍地发明轮子；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T08:39:57.700

您需要逐行读取文件，然后将[`String.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)其拆分`';'`为一个数组。

*   [如何：一次读取一行文本文件 (Visual C#)](http://msdn.microsoft.com/en-us/library/94223t4d.aspx)

# excel - 具有特定条件的 SUMPRODUCT

> ID：14170112
> 
> 赞同：0
> 
> 时间：2013-01-05T08:39:38.350
> 
> 标签：excel, excel-formula, pivot-table, worksheet-function

我想在某些条件下使用 SUMPRODUCT（或其他公式）来以类似形状的数据透视表显示结果。我有一个数据库“客户、成本中心、月份、收入”。对于某些客户，我们可能有多个成本中心。我需要这个公式来显示收入，具体取决于：客户、成本中心、月份在同一张表中，最终在这个矩阵中：

```
 Month1   Month2    Month3
Client_1       Cost_center1
               Cost center2
Client_2       Cost center1
               Cost center3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T15:24:25.543

=SUMPRODUCT 在这种情况下似乎是纯粹的受虐狂，因此为您提供答案可能会剥夺您的一些乐趣，但是：

```
=SUMPRODUCT(--($A$2:$A$9=$F3)*--($B$2:$B$9=$G3)*--($C$2:$C$9=H$2)*$D$2:$D$9) 
```

在 H3 中，向下复制到 J6 可能适合（例如布局）：

![SO14170112 示例](../Images/642b773e2b393139c1dabf63b766c5fd.png)

下面的数据透视表输出用于比较。

# c# - 验证使用隐藏代码创建的文件夹的名称

> ID：14170116
> 
> 赞同：0
> 
> 时间：2013-01-05T08:40:14.663
> 
> 标签：c#, asp.net

我正在根据用户在 asp.net 后面的代码中在文本框中给出的名称创建文件夹。现在我想在创建文件夹之前验证用户输入的名称。我想最好在客户端验证名称（例如使用 javascript 或 jquery）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T08:47:02.767

您*也必须*在服务器端和/或客户端进行检查。对于客户端，您可能会考虑一些简单的*正则表达式*，在服务器端您可以使用`Path.GetInvalidPathChars`并检查用户提供的字符串是否包含其中任何一个。

请记住，在*客户端*可能是不同的 OS es，因此文件名中的一组有效字符也可能会有所不同，因此您可以做的就是仅使用 set valid for OS 您在*服务器端*使用的。

# ios - AES-256 加密和 Apple iTunes 导出限制

> ID：14170121
> 
> 赞同：5
> 
> 时间：2013-01-05T08:40:52.693
> 
> 标签：ios, macos, encryption, app-store-connect

我有一个非常大的问题。

我开发了 3 个应用程序 2 用于 IOS 和 1 用于 mac osx 以使用[`RNCryptor`](https://github.com/rnapier/RNCryptor)（女巫是`CCCryptor`（AES 加密）包装器）加密文件。申请被拒绝了两次，他们在解决中心将其发送给我（两次）：

> ----- 解放军 2.3 -----
> 
> 我们发现您的应用程序描述声明它加密数据。
> 
> 但是，您的应用没有出口合规性，这不符合 App Store 审查指南所要求的 iOS 开发者计划许可协议。
> 
> iOS 开发者程序许可协议第 2.3 节规定，
> 
> “您证明 (i) 任何许可应用程序均不包含、使用或支持任何数据加密或加密功能；或 (ii) 如果任何许可应用程序包含、使用或支持任何此类数据加密或加密功能，您将应要求，向 Apple 提供美国商务部、工业和安全局颁发的您的加密注册号 (ERN) 或出口分类裁定 (CCATS) 的 PDF 副本，以及其他国家授权的 PDF 副本该许可应用程序的进口授权，根据需要。”
> 
> 请检查您的应用程序的加密能力，并在重新提交二进制文件时，检查 iTunes Connect 的“出口合规性”部分中问题的适当答案。您可能会被问到一些后续问题，以确定您的应用程序中的加密级别；您可能还会被要求提供一份 CCATS 副本。
> 
> 如果您对出口合规性和您的应用程序使用加密有任何疑问，请通过 appstore.ec@apple.com 联系 App Store 出口合规性团队。

1.  我第一次对密码学问题说“是”并遵循其余问题。
2.  其次，我说可能是因为 RNCryptor 使用内置 SDK 加密我必须重播“否”，但该应用程序再次被拒绝。

我认为现在，我必须根据本文注册我的应用程序以加密“CCATS”或“SNAP-R [”](http://tigelane.blogspot.it/2011/01/apple-itunes-export-restrictions-on.html)。但接受（或不接受）我的请求可能需要一个月或更长时间。

我的问题是：

1.  使用`CCCryptor`（使用 RNCryptor），我是否需要将加密证书的副本交付给 Apple，或者我还缺少其他东西？
2.  如果是，我怎样才能加快这个过程（我不在美国）？
3.  最后，苹果问：`are you releasing your product in France?`，他们的意思是我的公司是法语的，或者那个应用程序将在法语的存储中出售？
4.  我如何获得法语认证？我们是否有像美国认证这样的在线表格，或者我们必须用法语去行政部门才能获得一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-03T00:58:58.543

> 我如何获得法语认证？我们是否有像美国认证这样的在线表格，或者我们必须用法语去行政部门才能获得一个？

为了通过 App Store 在法国提供您的应用程序，您必须通过单独的申请流程获得法国声明。我们向一家律师事务所支付了 2000 美元来提交文件以接收法国声明，因为法国是我们应用程序的重要市场。

以下是 Apple 在 2014 年 3 月的回应，当时我们选择“World”作为我们应用程序的预期分发。“世界”包括法国，因此即使我们获得了美国 ERN，我们的应用程序也被拒绝了。因此，如果您已经拥有美国 ERN 但不想在法国分发，请不要选择法国。

你好。

感谢您将您的应用程序提交到 AppStore。

目前，您的应用程序正在等待“出口合规审查”，因为您提供了有关您的应用程序使用加密的问题的答案。

你表示你不打算在法国释放。但是，在提交过程的其他地方，您将应用程序的预期分发标记为“世界”。

为了从当前保留中释放您的应用程序，我们要求您采取措施遵守法国进口法规。

法国监管要求

法国当局已同意限制对使用、访问、实施或包含以下内容的 Apple App Store 应用程序的监管批准要求：

• 任何尚未被IEEE、IETF、ISO、ITU、ETSI、3GPP、TIA等国际标准机构标准化或未以其他方式公布的加密算法；或 • 标准（例如，AES、DES、3DES、RSA）加密算法，而不是访问或使用 Apple OS 中的加密，或除此之外

根据要求，如果您的应用程序符合上述标准，Apple 将要求您在将应用程序提交到 App Store 时上传您批准的法语声明的副本。

如果您不打算在法国发布您的应用程序

我们需要您从您的应用程序的分发国家/地区列表中明确删除法国。

请转到定价元数据页面并取消选中法国：

PastedGraphic-1.tiff

完成后向我们发送电子邮件，然后我们将能够从出口合规审查阶段发布您的应用程序。

如果您打算在法国发布您的应用程序

请按照上述步骤操作，以便我们可以将您的应用从当前保留状态中释放出来。

然后，在您获得法国声明后，将副本通过电子邮件发送给我们，然后重新检查法国，并让我们知道您已经这样做了。这将使我们能够发布您的应用程序以供全球分发，包括法国。

相关的法国加密法规可在以下网址找到：

[http://www.legifrance.gouv.fr/affichTexte.do?cidTexte=LEGITEXT000005789847&dateTexte=#LEGIARTI000006421577](http://www.legifrance.gouv.fr/affichTexte.do?cidTexte=LEGITEXT000005789847&dateTexte=#LEGIARTI000006421577) [http://www.ssi.gouv.fr/en/regulation/cryptology/](http://www.ssi.gouv.fr/en/regulation/cryptology/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T08:52:27.727

您将必须执行 CCATS/SNAP-R 程序。问题是 Apple 的服务器在美国，而您将应用程序运回欧洲。是的，在我们的案例中，完成所有工作大约需要 3 周时间。

现在为您的问题：

> 使用 CCCryptor（与 RNCryptor），我是否需要向 Apple 提供加密证书的副本，或者我还缺少其他东西？

不，您不需要向苹果提供任何证书或代码。

> 如果是，我怎样才能加快这个过程（我不在美国）？

今天开始这个过程......这是唯一有帮助的事情。

> 最后，苹果问：你是在法国发布你的产品吗？他们的意思是我的公司是法国的，或者那个应用程序将在法国商店销售？

苹果正在询问您将在哪些商店销售，仅在法国，欧洲，全球范围内

> 我如何获得法语认证？我们是否有像美国认证这样的在线表格，或者我们必须用法语去行政部门才能获得一个？

我认为没有翻译，您只需要填写在线表格并填写长长的问题列表即可。

祝你好运，

# grails - 圣杯表达式

> ID：14170122
> 
> 赞同：0
> 
> 时间：2013-01-05T08:40:54.797
> 
> 标签：grails

想知道这个表达是否有问题

```
${message(code:'${domianObject.paymentMode }.label', default:'Test')} 
```

我所做的只是遍历域对象列表并尝试使用资源包替换属性的值。上面的代码导致奇怪的解析错误

期待 '''，在第 95 行第 132 列找到 '\r'。

${domianObject.paymentMode })

```
 ^ 
```

1 个错误

```
at java.lang.Thread.run(Thread.java:662) 
```

引起：org.codehaus.groovy.control.MultipleCompilationErrorsException：启动失败：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:23:54.270

gstring 表达式的嵌套可能有点麻烦，但是一旦你在 a`${}`中，你可以使用任何 Groovy 表达式，所以你可以说而不是内部 gstring

```
${message(code:(domainObject.paymentMode  + '.label'), default:'Test')} 
```

使用正常的字符串连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:18:23.503

我认为这是一个简单的错字。不是domianObject，而是domainObject。不是吗？

# linux - CPU 亲和力的优缺点

> ID：14170127
> 
> 赞同：3
> 
> 时间：2013-01-05T08:41:59.847
> 
> 标签：linux, multithreading, multicore, affinity

假设我有一个多线程应用程序（比如大约 40 个线程）在以 Linux 作为操作系统的多处理器系统（比如 8 个内核）上运行，其中不同的线程更本质上是由内核调度的 LWP（轻量级进程）。

使用 CPU 亲和性有什么好处/缺点？CPU 亲和性是否会通过将线程本地化到核心子集从而最小化缓存共享/未命中来提供帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:28:10.380

如果您使用严格的关联，则特定线程必须在该处理器（或一组处理器）上运行。如果您有许多完全独立工作的线程，并且它们在比几千字节更大的内存块上工作，那么您不太可能从在一个特定内核上运行中受益 - 因为其他线程很可能在这个特定 CPU 上运行会抛出任何 L1 缓存，很可能也会抛出 L2 缓存。哪个对性能更重要——cahce 内容还是“更快地运行”？某些 CPU 是否始终处于空闲状态，或者每个内核上的 CPU 负载是否为 100%？

但是，只有您知道（直到您告诉我们）您的线程在做什么。每次运行时它们接触的“工作集”（多少内存 - 代码和数据）有多大？每个线程在运行时运行多长时间？与其他线程的交互是什么？其他线程是否使用与“this”线程共享的数据？多少，分享的模式是什么？

最后，最终的答案是“是什么让它跑得更快？” - 只有通过良好的（现实的）基准并尝试不同的可能选项才能找到答案。即使你给我们每一行代码、每个线程的运行时间测量等等，我们也只能做出或多或少复杂的猜测——直到这些已经被尝试和测试（使用不同的使用模式），几乎不可能知道。

一般来说，我建议有很多线程要么表明每个线程不是很忙（CPU 方面），要么你“做错了”......如果它们都运行平缓，更多线程并不好out - 在这种情况下最好有更少的线程，因为它们只会互相争斗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T08:56:10.247

调度程序已经尝试将线程保持在相同的内核上，并避免迁移。这表明手动管理线程亲和性可能并不多，除非：

*   您可以证明由于某种原因内核对您的特定应用程序做得不好；或者
*   有一些关于您的应用程序的特定知识，您可以利用这些知识取得良好效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T09:02:46.340

> 将线程本地化到核心子集，从而最大限度地减少缓存共享/未命中

不一定，您也必须考虑缓存一致性，如果两个或多个线程访问共享内存缓冲区并且每个线程都绑定到不同的 CPU 内核，则如果一个线程写入共享缓存行，则它们的缓存必须同步使其他缓存无效的巨大开销。

# javascript - 当用户进入我的网站时查找和存储邮政编码

> ID：14170129
> 
> 赞同：1
> 
> 时间：2013-01-05T08:42:06.543
> 
> 标签：javascript, jquery, html, ajax

我需要创建一个网站来自动检索用户的邮政编码，这样当他们进入我的网站时，该用户的邮政编码就会存储到我的数据库中。我将如何研究这个主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:45:37.757

[jsBin 演示](http://jsbin.com/uqutuc/2/edit)

(HTML5) ...用户必须同意分享它的位置。（当然。）
在手机上试试，它非常准确；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:08:49.253

您正在尝试做的是反向地理编码。你在这里看到一个例子。

[https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding](https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding)

# amazon-web-services - 使用云形成创建 ec2 实例以及 IAM 角色

> ID：14170132
> 
> 赞同：4
> 
> 时间：2013-01-05T08:42:21.917
> 
> 标签：amazon-web-services, amazon-cloudformation

我对 Amazon cloudformation 技术非常陌生。我正在尝试与 IAM 角色一起启动一个 ec2 实例。

我为此准备了 cloudformation 脚本。但我面临的问题是创建了 IAM 角色和 Ec2 实例，但它们并没有相互关联。

`AWS::IAM::Role`我确实使用and创建了 IAM 角色`AWS::IAM::InstanceProfile`。

还有其他我应该使用的命令吗？

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-23T21:43:01.520

不得不挖掘以获得最终结果，但这里有一个例子

1.  定义访问角色（这将允许 EC2 实例进入/承担角色），
2.  为角色定义策略（即当 EC2 担任角色时，它有权访问哪些资源），
3.  定义实例配置文件（由 EC2 实例引用，并在其中映射访问角色）

    ```
    "S3AccessRole" : {
        "Type"  : "AWS::IAM::Role",
        "Properties" : {
            "AssumeRolePolicyDocument" : {
                "Statement" : [ {
                    "Effect" : "Allow",
                    "Principal" : {
                        "Service" : [ "ec2.amazonaws.com" ]
                    },
                    "Action" : [ "sts:AssumeRole" ]
                } ]
            },
            "Path" : "/"
        }
    },

    "S3RolePolicies" : {
        "Type" : "AWS::IAM::Policy",
        "Properties" : {
            "PolicyName" : "s3access",
            "PolicyDocument" : {
                "Statement" : [ {
                    "Effect" : "Allow",
                    "Action" : "s3:*",
                    "Resource" : "*"
                }]
            },
            "Roles" : [ { "Ref" : "S3AccessRole" } ]
        }
    },

    "S3InstanceProfile" : {
        "Type" : "AWS::IAM::InstanceProfile",
        "Properties" : {
            "Path" : "/",
            "Roles" : [ { "Ref" : "S3AccessRole" } ]
        }
    } 
    ```

上述策略允许所有对 s3 资源的访问。根据您的需要进行调整。EC2 实例属性中的 IamInstanceProfile 引用将是`{ "Ref" : "S3InstanceProfile" }`

请注意，截至 2015 年 5 月，当您创建一个创建 IAM 角色的堆栈时，您需要选中一个确认此类创建的框，否则您会收到`"Stack creation error: Requires capabilities : [CAPABILITY_IAM]"`错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T09:36:00.687

解决此类问题的最简单方法是使用[CloudFormer](https://console.aws.amazon.com/cloudformation/home?region=us-east-1#cstack=sn~AWSCloudFormer%7Cturl~https://s3.amazonaws.com/cloudformation-templates-us-east-1/AWSCloudFormer.template)。CloudFormer 是一种工具，可从您在环境中运行的 AWS 资源创建起点模板。

> CloudFormer 工具被打包为一个独立的应用程序，您可以在 AWS 环境中启动它。该应用程序通过 AWS CloudFormation 在 t1.micro Amazon EC2 实例上启动。

启动 Cloud Form 后，您将获得一个 Web 界面（检查已启动堆栈的输出部分中的 URL），该界面将能够描述您在特定区域中的所有资源。它将引导您了解您希望在每个类别（DNS、网络、计算...）中使用的资源。最后，您可以看到模板并将其复制，或将其保存在 S3 中。

但是，如果您希望手动执行此操作，则需要将`AWS::IAM::InstanceProfile`您创建的添加`Properties`到`AWS::EC2::Instance`as`IamInstanceProfile`

```
{
   "Type" : "AWS::EC2::Instance",
   "Properties" : {
      "AvailabilityZone" : String,
      "BlockDeviceMappings" : [ EC2 Block Device Mapping, ... ],
      "DisableApiTermination" : Boolean,
      "EbsOptimized" : Boolean,
      "IamInstanceProfile" : String,
      "ImageId" : String,
      "InstanceType" : String,
...
      "UserData" : String,
      "Volumes" : [ EC2 MountPoint, ... ]
   }
} 
```

[在此处](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html)查看更多详细信息`AWS::EC2::Instance`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T15:55:15.507

假设您创建的 AWS::IAM::InstanceProfile 资源名为`MyNewRole`. 要创建具有该角色的实例（在同一 CloudFormation 模板中），请将 EC2 资源的`IamInstanceProfile`属性设置为该资源的 Ref。这是一个示例（省略了许多其他细节）：

```
"Resources": {
    "MyNewRole": {
        "Type": "AWS::IAM::InstanceProfile",
        ... more stuff here
    },
    "MyNewEc2Instance": {
        "Type": "AWS::EC2::Instance",
        "Properties": {
            "IamInstanceProfile": { "Ref": "MyNewRole" },
            ... more stuff here
        }
    }
} 
```

# c# - 从 WPF WebBrowser 控件读取 json 数据

> ID：14170133
> 
> 赞同：2
> 
> 时间：2013-01-05T08:42:29.180
> 
> 标签：c#, ajax, webbrowser-control

我将如何读取 Web 服务器返回的 json 数据，以响应我的 wpf Web 浏览器控件内的 html 文档中的 ajax 调用/轮询？客户端和服务器之间的连接是安全的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:05:37.547

可以从 Javascript 调用 C# 代码，反之亦然，即从 C# 调用页面中的 Javascript。根据您的场景，您可以使用其中任何一个来返回 JSON 字符串。

[有关更多信息](http://www.dotnetfunda.com/articles/article840-working-with-webbrowser-in-wpf.aspx)，请参阅本文

如果您无法控制 html 页面，即您无法更改它，您可能必须解析整个页面，您可以获得这样的[页面](https://stackoverflow.com/a/5762063/1045728)

# java - MVC for Web App：按钮显示代码应该在视图还是模型中？

> ID：14170138
> 
> 赞同：0
> 
> 时间：2013-01-05T08:43:03.307
> 
> 标签：java, ajax, spring-mvc

我已经构建了一个使用 Ajax 和 Spring MVC 的网络应用程序游戏。

当玩家按下屏幕上的“开始新游戏”按钮时，我在视图中的代码会隐藏该按钮并显示其他游戏按钮。这个逻辑在视图中而不是在模型中。

我的问题是，在视图中有这样的逻辑是不好的 MVC 做法吗？视图应该“尽可能愚蠢”吗？

所有其余的逻辑都在我的模型中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:36:28.533

在我看来，这是一个哲学问题。

在 MVC 中，模型应该是无逻辑的，控制器包含控制器逻辑，您的视图包含视图逻辑。这意味着您的视图中应该有逻辑，但只是与模型显示相关的逻辑。

为了在控制器中放置所有逻辑，您可以在此处执行的最佳操作是在按下“开始新游戏”按钮时触发 Ajax 调用，并从控制器返回 true。然后你必须在你的 Javascript 中有一些视图逻辑位来隐藏开始按钮并显示其他游戏按钮。

在打开和关闭按钮时是视图逻辑。您无法避免将其放入视图中。

# java - 使用实际上执行后增量的 ++ 运算符是一种好的编程习惯吗？

> ID：14170143
> 
> 赞同：1
> 
> 时间：2013-01-05T08:43:47.837
> 
> 标签：java, coding-style

在许多情况下，大多数情况下，当您循环遍历数组并向元素分配值时，可以使用后自增运算符。这是否被认为是一种好习惯。

例如，在下面的复制代码中，哪一个更好。

```
int [] to_assign;
int [] to_include;
int [] from_assign;

// Version 1
int count = 0;
while(i<<some_value>){
  if(to_include[i]==1)
     to_assign[count++] = from_assign[i];
}

// Version 2
int count = 0;
while(i<<some_value>){
  if(to_include[i]==1)
  {     
      to_assign[count] = from_assign[i];
      count++;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T08:46:42.550

这纯粹是风格问题。就个人而言，我会使用最合乎逻辑的任何一个。如果增量在逻辑上是操作的一部分，则使用后增量。如果不是，请使用单独的增量操作。

此外，当您单独使用增量运算符时，通常首选使用预增量。虽然对于像整数这样的简单类型来说并不重要，对于更复杂的类型来说，它在像 C++ 这样具有运算符重载的语言中效率更高，因为预增量不需要同时存在两个实例。Java 对性能没有影响，因为它没有运算符重载，但如果你想要一个一致的样式规则，它应该是前置增量而不是后置增量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T08:56:59.407

我认为第二种解决方案可能更容易阅读。即眼睛观察到正在进行分配，然后有一个增量。将它们放在同一行上会使一目了然地阅读起来稍微不那么容易。所以，我更喜欢解决方案二。

也就是说，这是一个偏好问题。我认为在这里无法谈论已确立的最佳或更好的做法。

在每一盎司的性能都很重要的日子里，第一个版本会是首选，因为编译器在第一个解决方案中发出稍微更优化的程序集的变化更大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T08:48:06.240

无论如何，任何好的编译器都会为您优化它。只要它们是人类可读的，一切都很好。

“++”是指针算术时代的遗留物——我们中有些人更喜欢用“+= 1”表示整数。但是编译器应该正确地管理这样的简单情况，无论如何。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T08:51:41.673

现代编译器无论如何都会优化这种代码，因此最终如何以及在何处增加变量并不重要。

从风格的角度来看，第一个版本更小，并且更易于阅读。

从代码理解的角度来看，第二个版本对于初学者开发者来说更​​容易理解。

从性能的角度来看，忽略编译器优化，这甚至更快：

```
// Version 3
int count = -1;
while(i<<some_value>){
    if(to_include[i]==1)
    {
        to_assign[++count] = from_assign[i];
    }
} 
```

它更快，因为理论上`count++`在增量之前创建值的临时副本，而`++count`增量并使用相同的变量。但同样，不再需要这种*过早的优化，因为编译器可以检测到这种频繁的情况并优化生成的代码。*

# ember.js - 在 Ember 模板中使用绑定元素类名称的函数？

> ID：14170147
> 
> 赞同：2
> 
> 时间：2013-01-05T08:44:47.257
> 
> 标签：ember.js

当我有一个类似于以下的模板时：

```
{{#view App,NavItemView}}
<li {{bindAttr class="isActive:active"}}>Item 1</li>
{{/view}} 
```

和一个视图

```
App.NavItemView = Ember.View.extend({
  tagName: 'ul',
  isActive: function() {
    return false;
  }
}); 
```

呈现的模板将始终在`li`元素上呈现“活动”类。因此，基于此，似乎不可能设置条件类？

理想情况下，我希望根据函数的结果打开和关闭 li 元素的类。我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T09:11:22.380

您需要为这类事情使用计算属性。

```
App.NavItemView = Ember.View.extend({
  tagName: 'ul',
  isActive: function() {
    return false;
  }.property()
}); 
```

查看[计算属性指南](http://emberjs.com/guides/object-model/computed-properties/)以获取更多详细信息。

# javascript - SyntaxError：未终止的字符串文字奇怪的错误

> ID：14170153
> 
> 赞同：10
> 
> 时间：2013-01-05T08:45:16.270
> 
> 标签：javascript

我在 JavaScript 中有这个奇怪的未终止字符串文字错误。当我只输出一个像“php”这样的单词时（在 cache_open.handler 变量中）。没有错误。这是脚本，以下工作正常：

```
 <script>
        var cache_open = {};
        var cache_name_open={};         
        var handler='open';
        cache_open.handler='<pre class="brush: html;">php</pre>';           
        cache_name_open.handler='PHP prepared statement';           
        </script> 
```

但是，当我将代码（html 实体输出的源代码）输出到罪魁祸首变量 cache_open.handler 时，它会在控制台中返回未终止的字符串文字错误。

这是返回错误的示例输出：

```
 <script>
        var cache_open = {};
        var cache_name_open={};         
        var handler='open';
       cacheObj_open.handler='<pre class="brush: html;">
       &lt;?php
       $stmt = $dbh-&gt;prepare(&quot;SELECT * FROM REGISTRY where name = ?&quot;);
       if ($stmt-&gt;execute(array($_GET['name']))) {
       while ($row = $stmt-&gt;fetch()) {
       print_r($row);
       }
       }
       ?&gt;</pre>';            
    cache_name_open.handler='PHP prepared statement';           
        </script> 
```

起初我以为这只是返回的代码的复杂性（例如包含引号等）。但即使是简单的 HTML 代码也会返回错误：

```
 <script>
        var cache_open = {};
        var cache_name_open={};         
        var handler='open';
        cacheObj_open.handler='<pre class="brush: html;">&lt;html&gt;
        &lt;body&gt;
        &lt;p&gt;Hello world.&lt;/p&gt;
        &lt;/body&gt;
        &lt;/html&gt;</pre>';           
    cache_name_open.handler='PHP prepared statement';           
        </script> 
```

任何想法是什么导致了错误？任何修改建议都非常感谢，谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-05T08:48:41.797

Javascript strings can't break across newlines without an escape (`\`). See this question for detailed answers:

*   [How do I break a string across more than one line of code in JavaScript?](https://stackoverflow.com/questions/508269/how-do-i-break-a-string-across-more-than-one-line-of-code-in-javascript)

# c++ - C++中的密码程序

> ID：14170154
> 
> 赞同：0
> 
> 时间：2013-01-05T08:45:36.583
> 
> 标签：c++

密码程序不起作用....请帮助....对于正确的输入也说错误的密码

```
#include<stdio.h>
#include<conio.h> 
#include<string.h>
#include<iostream.h>

void main()
{  
  clrscr();
  int ctr=0;
  int  o;
  char pass[5];

  cout<<"enter password";
  for(int i=0;i<5 && (o=getch())!=13  ;i++)
  {  
    pass[i]=o;

    putch('*');
  }

  ctr=strcmp(pass,"luck");
  cout<<ctr;
  if(ctr==0)
  {
    cout<<"welcome";
  }
  else
  {
    cout<<"wrong password";
  }
  getch();
} 
```

我想知道为什么这个密码程序不起作用....是他们的任何其他方式

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T08:48:05.847

为了能够使用`strcmp()`，您需要 NUL 终止`pass`。您还需要确保它`pass`足够大以容纳 NUL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:11:15.080

在`<conio.h>`使用中，我假设正在使用 Windows。对于那些感兴趣的人，这里是正确方法的开始。我输入了一行作为密码，在按下 enter 时结束，并且不显示星号，因为它们很容易泄露长度。

```
//stop echoing input completely
HANDLE inHandle = GetStdHandle(STD_INPUT_HANDLE); //get handle to input buffer
DWORD mode; //holds the console mode
GetConsoleMode(inHandle, &mode); //get the current console mode
SetConsoleMode(inHandle, mode & ~ENABLE_ECHO_INPUT); //disable echoing input

//read the password
std::string password; //holds our password
std::getline(std::cin, password); //reads a line from standard input to password

//compare it with the correct password
std::cout << (password == "luck" ? "Correct!\n" : "Wrong!\n"); //output result

//return console to original state
SetConsoleMode(inHandle, mode); //set the mode back to what it was when we got it 
```

当然，您可以做一些事情来改进它（硬编码的密码字符串绝不是一件好事），如果您愿意，可以继续这样做，但关键是它可以作为基本的密码输入系统，并且有一个简单的- 跟随结构。在输入密码时，您仍然可以使用您喜欢的东西，而不是一次输入一个字符并诉诸 C 字符串和代码。

# jsp - 使用标签在 JSF 中创建会话

> ID：14170156
> 
> 赞同：2
> 
> 时间：2013-01-05T08:45:51.500
> 
> 标签：jsp, jsf, session, jakarta-ee

> **可能重复：**
> [在 jsf 中启动会话的基本步骤](https://stackoverflow.com/questions/6020994/basic-steps-for-starting-session-in-jsf)

通过我们可以创建会话并维护它，JSF 中是否有任何标记。我已经看到[BalusC 关于 JAVA 会话](https://stackoverflow.com/questions/6020994/basic-steps-for-starting-session-in-jsf)的精彩回答。但是我可以使用简单的 JSF 标记来完成所有这些吗？或者我必须把所有的东西都放在支持豆里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:12:52.350

我能想到您为什么要这样做的唯一原因是您可以将输入数据绑定到会话，而无需创建托管 bean。这个有可能。

此输入字段值绑定到`foo`会话上的属性：

```
<h:inputText value='#{sessionScope.foo}' /> 
```

但这是一种虚假的经济。如果您想对这些数据采取行动，您可能需要将其注入到 bean 中，以便您的业务逻辑可以使用它。一无所获。

# java - Java 是否具有能够使用 BODMAS 评估顺序评估任意算术表达式的库或功能

> ID：14170159
> 
> 赞同：0
> 
> 时间：2013-01-05T08:46:15.273
> 
> 标签：java

我们可以在 Java 中使用[BODMAS规则制作计算器程序吗？](http://en.wikipedia.org/wiki/Order_of_operations)

```
String valfromtextbox = "2(2*2)+5";

long total = Long.parseLong(valfromtextbox); 
```

我们可以做类似上面的事情，或者我们必须制定整个逻辑来做到这一点。

如果我们必须做出整个逻辑，那么请给我提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T08:58:10.047

您*可以*使用[Java 表达式语言 (JEXL)](http://commons.apache.org/jexl/)：

```
 // Create or retrieve a JexlEngine
    JexlEngine jexl = new JexlEngine();
    // Create an expression object
    String valfromtextbox = "2(2*2)+5";
    Expression e = jexl.createExpression( valfromtextbox );

    // Create a context and add data
    JexlContext jc = new MapContext();

    // Now evaluate the expression, getting the result
    Object o = e.evaluate(jc); 
```

# java - 将货币转换为具有长值的单词

> ID：14170161
> 
> 赞同：0
> 
> 时间：2013-01-05T08:46:31.297
> 
> 标签：java

我再次尝试解决错误，但无法获得正确的输出，我试图从文本字段插入长整数值，但我猜字符串生成器出现问题。它非常有问题，无法做出正确的更正决定在哪里更正。前 3 个 if 语句没有错误地执行，问题在于其余的 if 语句。

```
 public static String numberToWord(final long num) { 
    // special case to simplify later on 
    if (num == 0) { 
    return "zero"; 
    } 

    // constant number names for each category 

    // single digits 
    final String n_1_9[] = new String[]{"", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine"}; 
    // unfortunate special cases for ten, eleven, twelve, and teens 
    final String n_10_19[] = new String[]{"ten", "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen"}; 
    // tens 
    final String n_20_90[] = new String[]{"", "twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety"}; 
    final String n_100 = "hundred"; 
    final String n_1000 = "thousand"; 
    final String n_100000 = "lakh";
    final String n_10000000 = "crore"; 

    // use StringBuilder for efficient modifications 
    StringBuilder numWord = new StringBuilder(); 

    long n = num; 

    // append with selective recursion for all our cases 

    if (n >= 10000000) { 
    numWord.append(numberToWord(n / 10000000)); 
    numWord.append(' '); 
    numWord.append(n_10000000); 
    numWord.append(' '); 
    n %= 10000000; 
    } 

    if (n >= 100000) { 
    numWord.append(numberToWord(n / 100000)); 
    numWord.append(' '); 
    numWord.append(n_100000); 
    numWord.append(' '); 
    n %= 100000; 
    } 

    if (n >= 1000) { 
    numWord.append(numberToWord(n / 1000)); 
    numWord.append(' '); 
    numWord.append(n_1000); 
    numWord.append(' '); 
    n %= 1000; 
    } 
    if (n >= 100) { 
    numWord.append(n_1_9[n / 100]); 
    numWord.append(' '); 
    numWord.append(n_100); 
    numWord.append(' '); 
    n %= 100; 

    } 
    if (n >= 20) { 
    numWord.append(n_20_90[(n / 10) - 1]); 
    numWord.append(' '); 
    n %= 10; 
    } 
    if (n >= 10) { 
    numWord.append(n_10_19[n - 10]); 
    } 
    if (n < 10) { 
    numWord.append(n_1_9[n]); 
    } 

    return numWord.toString().trim(); 
    }
        private void jTextField2ActionPerformed(java.awt.event.ActionEvent evt) {

        }

        private void jTextField2MouseClicked(java.awt.event.MouseEvent evt) {
            if(evt.getSource()==jTextField2){
                long jml = Long.parseLong(jTextField3.getText());
                jTextField1.setText(numberToWord(jml));

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:53:51.857

这是问题所在：

```
numWord.append(n_1_9[n / 100]); 
```

As `n`is a `long`,`n / 1000`不能用作索引。您需要转换为`int`：

```
numWord.append(n_1_9[(int) n / 100]); 
```

编辑：对其他指数做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T08:57:01.807

将 long 转换为最后四个 if 块的 int

```
 if (n >= 100) { 
        numWord.append(n_1_9[(int) (n / 100)]); 
        numWord.append(' '); 
        numWord.append(n_100); 
        numWord.append(' '); 
        n %= 100; 

        } 
        if (n >= 20) { 
        numWord.append(n_20_90[(int) ((n / 10) - 1)]); 
        numWord.append(' '); 
        n %= 10; 
        } 
        if (n >= 10) { 
        numWord.append(n_10_19[(int) (n - 10)]); 
        } 
        if (n < 10) { 
        numWord.append(n_1_9[(int) n]); 
        } 
```

您从 main() 调用的方法

```
String str = numberToWord(100222222222L);
System.out.println("str:: "+ str); 
```

# android - TelephonyMagager.getDeviceId 在 Galaxy S3 上的 BootTime 期间失败

> ID：14170163
> 
> 赞同：1
> 
> 时间：2013-01-05T08:46:43.417
> 
> 标签：android, boot, galaxy, imei

我的应用程序用于`TelephonyMagager.getDeviceId()`获取设备的 IMEI。我已经实现了一个在启动时启动的服务。这适用于 Xperia (4.0.4) 和 Nexus (4.1.1) 没有问题。

在 Galaxy S3（运行 4.1.1）上，如果我在启动时间后启动服务，它工作正常，但如果我让服务在启动时间`getDeviceId()`启动，它会返回。`NULL`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:25:33.797

从方法描述中，如果设备 ID 不可用，该方法返回 null。似乎在启动时，由于某种原因，设备 ID 确实不可用。我认为您可以使用[此](http://android-developers.blogspot.in/2011/03/identifying-app-installations.html)博客文章来满足您的需求。

# c# - 如何将此 WPF 控件添加到我的 WinForm 中？

> ID：14170165
> 
> 赞同：17
> 
> 时间：2013-01-05T08:46:50.373
> 
> 标签：c#, wpf, winforms, avalonedit

我知道我必须使用一个`ElementHost`在 WinForm 中显示 WPF 控件，但由于 WPF 控件是第三方软件，它只带有一个 XML 文件和一个 DLL 文件。

控件是[AvalonEdit](http://www.codeproject.com/Articles/42490/Using-AvalonEdit-WPF-Text-Editor "阿瓦隆编辑")，我将`ICSharpCode.AvalonEdit.xml`和`ICSharpCode.AvalonEdit.dll`文件都添加到了我的项目中，然后我去`Project -> Add Reference`添加了 DLL 作为参考。现在我可以`ICSharpCode`在我的代码中访问命名空间，所有的类和方法都暴露了，但是从这一点来看，我不确定如何在我的 WinForm 中实际使用该控件。

我期待 WPF 控件出现在解决方案资源管理器中，但它没有。无论如何，我尝试向我的 WinForm添加`ElementHost`控件，但是当我尝试选择托管内容时，没有控件出现，因此它不知道我的 WPF 控件。如何在我的 WinForm 中使用 AvalonEdit WPF 控件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-05T09:04:03.310

如果您希望能够在设计时设置托管内容，则控件需要成为您的解决方案的一部分。实现此目的的一种方法是创建一个自定义 WPF 用户控件，其中包含您要使用的 AvalonEdit 组件。IE

1.  创建一个 WPF 用户控件库项目并创建一个包含 AvalonEdit 组件的用户控件。

2.  将用户控件项目添加到您的 Winforms 解决方案。

现在您应该能够选择您的新用户控件作为托管内容。

或者您可以直接在代码中添加 AvalonEdit 控件，如下所示：

```
public Form1()
{
  InitializeComponent();

  ElementHost host= new ElementHost();
  host.Size = new Size(200, 100);
  host.Location = new Point(100,100);

  AvalonEditControl edit = new AvalonEditControl();
  host.Child = edit;

  this.Controls.Add(host);
} 
```

不确定该控件的名称，因此请酌情替换 AvalonEditControl。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-07T00:01:09.317

您还需要一个有关如何进行代码着色/语法突出显示的示例：

```
public Form1()
{
    InitializeComponent();
    ICSharpCode.AvalonEdit.TextEditor textEditor = new ICSharpCode.AvalonEdit.TextEditor();
    textEditor.ShowLineNumbers = true;
    textEditor.FontFamily = new System.Windows.Media.FontFamily("Consolas");
    textEditor.FontSize = 12.75f;

    string dir = @"C:\Temp\";
    #if DEBUG
    dir = @"C:\Dev\Sandbox\SharpDevelop-master\src\Libraries\AvalonEdit\ICSharpCode.AvalonEdit\Highlighting\Resources\";
    #endif

    if (File.Exists(dir + "CSharp-Mode.xshd"))
    {
      Stream xshd_stream = File.OpenRead(dir + "CSharp-Mode.xshd");
      XmlTextReader xshd_reader = new XmlTextReader(xshd_stream);    
      // Apply the new syntax highlighting definition.
      textEditor.SyntaxHighlighting = ICSharpCode.AvalonEdit.Highlighting.Xshd.HighlightingLoader.Load(xshd_reader, ICSharpCode.AvalonEdit.Highlighting.HighlightingManager.Instance);
      xshd_reader.Close();
      xshd_stream.Close();
    }
    //Host the WPF AvalonEdiot control in a Winform ElementHost control
    ElementHost host = new ElementHost();
    host.Dock = DockStyle.Fill;
    host.Child = textEditor;
    this.Controls.Add(host);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-20T00:14:55.157

[![这是结果](../Images/30242112a8bc53092615251f3bb79fea.png)](https://i.stack.imgur.com/pSrfa.png)

```
 ElementHost host = new ElementHost();
        host.Size = new Size(200, 100);
        host.Location = new Point(100, 100);

        ICSharpCode.AvalonEdit.TextEditor edit = new 
        ICSharpCode.AvalonEdit.TextEditor();

        host.Child = edit;

        this.Controls.Add(host); 
```

# facebook - 即使 og:url 设置为重定向目标以避免调试器中的错误，Facebook 是否会重新抓取永久链接 URL？

> ID：14170169
> 
> 赞同：1
> 
> 时间：2013-01-05T08:47:02.013
> 
> 标签：facebook, facebook-opengraph

对于我的 Open Graph 对象，我制作了固定链接，例如

(1)`http://www.example.com/go?id=123456`

重定向到非永久 URL，例如

(2)`http://www.example.com/controller/something.php?session=abc&page=654321`

当我设置`og:url`为 (1) 时，[调试器](http://developers.facebook.com/tools/debug)显示“循环重定向路径”错误，与我是否使用 301、302、303 或 307 重定向无关。

当我发布一个使用 (1) 作为 URL 引用对象的 Open Graph 故事时，在 Facebook 上指向该对象的链接是 (2)。

当 (2) 发生变化时，Facebook 会在 7 天后通过重新抓取 (1) 获得该变化吗？我不确定，因为我在 Facebook 的 GUI 上的任何地方都看不到 (1)。

# autohotkey - SCITE4Autohotkey 调试器不工作

> ID：14170170
> 
> 赞同：1
> 
> 时间：2013-01-05T08:47:01.763
> 
> 标签：autohotkey

我在 autohotkey 最新版本下安装了 SCITE4Autohotkey，一切正常，但我无法激活调试器。当我在第号线附近设置项目符号时（并按调试模式）。代码未在 [F5] 或 RUN 上停止

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T22:28:37.077

结束进程 InternalAHK.exe*32

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T16:17:49.823

首先保存您的文件。通过单击行号旁边的设置停止项目符号（红点）。
转到第一行代码，先按调试（小昆虫）（图标更改并出现新的单行图标），然后按运行（蓝色三角形）或单行（蓝色箭头）。
“运行”现在将运行代码直到第一个红点，然后您可以继续单行执行（蓝色箭头）或继续运行（蓝色三角形）直到下一个红色停止项目符号。
与我的系统（Win-7，AHK_L）完美配合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-01T11:01:06.120

只需选择一个平台即可解决此问题，只需单击它 并从下拉菜单中[![设置当前平台按钮（此处为图片）](../Images/2d889c211ee8c871aee15f451622fd8c.png)](https://i.stack.imgur.com/sZzOb.png)选择**默认即可。**

（我无法在 SciTE4AutoHotkey 中运行和调试脚本）

# build - BuildForge - 将变量作为声明为 Assing Hidden 的参数传递

> ID：14170174
> 
> 赞同：0
> 
> 时间：2013-01-05T08:47:25.383
> 
> 标签：build, batch-file, buildforge

我有一个构建伪造作业，它执行一个 bat 文件和输入密码作为参数。如果我将此参数变量声明为普通文本，则它可以正常工作。但是，当我将密码声明为“Assing Hidden”时，它不起作用并抛出如下所示的错误。

任何帮助表示赞赏。我正在执行的命令

调用 MpToSbx.bat SF %account% %password% %REL_NUM% %Track%

条件 1\. 如果将密码作为常规文本进行处理，则可以正常工作。2.当密码分配为隐藏时，它会抛出如下错误。我觉得命令没有正确迭代。

错误信息：系统找不到指定的路径。EXEC 'MpToSbx.bat' 不是内部或外部命令、EXEC 可运行程序或批处理文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:41:28.020

此错误的最可能原因是 %password% 在文件中被视为单个单词`MpToSbx.bat`。要解决此错误，首先编辑该文件并更改`%2`为`%~2`（以消除参数中的引号），然后在调用中将密码括在引号之间；例如：

```
call MpToSbx.bat SF %account% "%password%" %REL_NUM% %Track% 
```

# ruby - 如何将此 case 语句更改为 if 语句？

> ID：14170184
> 
> 赞同：3
> 
> 时间：2013-01-05T08:48:55.650
> 
> 标签：ruby, chef-infra

我想检查节点属性的值。这个`case`声明是我迄今为止所拥有的，它有效：

```
case node[:languages][:ruby][:host_cpu]
   when "x86_64"
   ...
   when "i686"
   ...
end 
```

我想做的是改用`if`语句。这是我尝试过的：

```
if node[:languages][:ruby][:host_cpu]?("X86_64")
   ...
end 
```

这是基于以下内容，哪个有效。

```
if platform?("ubuntu")
    ...
end 
```

然而，我的尝试没有奏效。它在行上给出了一个语法错误，`if`说有一个意外`\n`并且`$end`是预期的。

我发现有两种执行`if`. 第一个是我在上面演示的，它（显然）只适用于资源，并且`if_only`适用于节点。像这样

```
if_only {node[:languages]} 
```

这似乎仅适用于检查节点的存在，并且在 do 上下文中。

如何使用`if`语句检查节点的值？一种方法确实检查值，但仅检查资源，另一种方法检查节点，但仅检查它们的存在，而不检查它们的值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T11:39:16.453

您正在混合使用许多不同的条件变体，其中大部分是 Chef 的一部分，而不是 Ruby。让我尝试一一描述不同的选项。

通常，a`case`大致相当于一系列`if`and`elsif`语句。你的`case`上面

```
case node[:languages][:ruby][:host_cpu]
   when "x86_64"
   ...
   when "i686"
   ...
end 
```

因此大致相当于

```
if node[:languages][:ruby][:host_cpu] == "x86_64"
  ...
elsif node[:languages][:ruby][:host_cpu] == "i686"
  ...
end 
```

附带说明一下，`case`实际上使用的`===`运算符通常不是可交换的，但功能更强大。对于简单的比较，它的工作原理与此相同`==`。这两种变体都是 Ruby 语言的一部分，您可以在其中编写食谱。

您提到的其他选项实际上是 Chef 在 Ruby 之上定义的 API 的一部分。这通常被称为 Chef DSL（代表域特定语言，即语言的扩展或改编，在这种情况下 Ruby 用于特定使用域，在这种情况下是配置管理。）

该`platform?`方法是 Chef 定义的一种方法，用于检查当前平台是否是传递的值之一。您可以阅读更多相关信息（以及类似的方法，例如`platform_family?`Chef docs 现在推荐的用于[一般食谱的](http://docs.opscode.com/essentials_cookbook_recipes.html)方法和一些[常用的 ruby​​ idioms](http://docs.opscode.com/essentials_cookbook_recipes_use_ruby.html)。

附带说明一下：您可能会惊讶于 Ruby 允许`?`和`!`字符出现在方法名称的末尾，这使得 Ruby 在这方面的类似语言中相当独特。这些字符只是方法名称的一部分，对语言没有特殊意义。它们仅按惯例用于程序员以更好地识别方法的目的。如果一个方法`?`的末尾有一个，它将用于检查某些条件，并期望返回一个真值或假值。以 a`!`结尾的方法通常会执行一些潜在的危险操作，例如更改对象、删除内容……同样，这只是一个约定，不会被语言解释。

您提到的最后一个选项，`only_if`and 通过扩展`not_if`用于定义 Chef 资源的条件，以确保它们仅在某个条件为真时（或使用时`not_if`，如果为假）执行。由于这些属性仅用于 Chef 资源，它们自然也由 Chef 定义。

要了解它们为何有用，有必要了解 Chef 运行的工作原理。详细信息可以在[Chef Run 的解剖](http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run)描述中找到。重要的是，您基本上有两个执行阶段：资源编译和收敛。第一步，执行定义资源的实际代码。在这里，您的`case`语句中的代码也将运行。在加载了所有配方并定义了所有资源后，Chef 进入第二阶段，即收敛阶段。在那里，执行更改的资源的实际实现（创建文件和目录，安装包，...）运行。只有在这个阶段，才会检查`only_if`和`not_if`条件。

其实你可以观察到两者的区别

```
file "/tmp/helloworld"
  action :create
  content "hello world"
end   

if File.exist?("/tmp/helloworld")
  file "/tmp/foobar"
    action :create
    content "foobar"
  end
end 
```

和

```
file "/tmp/helloworld"
  action :create
  content "hello world"
end   

file "/tmp/foobar"
  action :create
  content "foobar"
  only_if{ File.exist?("/tmp/helloworld") }
end 
```

在第一个变体中，`/tmp/foobar`在资源编译期间检查条件是否存在。此时，实际创建`/tmp/helloworld`文件的代码尚未运行，因为它仅在转换步骤中运行。因此，在您第一次运行期间，`/tmp/foobar`不会创建该文件。

然而，在第二个变体中，检查是`only_if`在转换期间进行评估的。在这里，您会注意到这两个文件都是在第一次运行时创建的。

如果您想了解更多关于 Ruby 中条件的定义是如何工作的（而且您绝对应该），您可以阅读[Ruby Blocks](http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/)，它们或多或少是可以传递以供以后执行的代码片段。

# hadoop - Hive 中的 LeaseExpiredException

> ID：14170186
> 
> 赞同：1
> 
> 时间：2013-01-05T08:49:00.470
> 
> 标签：hadoop, hive

全部。我运行 hive 查询运行到 97%，异常显示 org.apache.hadoop.hdfs.server.namenode.LeaseExpiredException: No lease on sth。

任何人都可以解释发生此错误的原因吗？这是一个单用户 Hive 集群环境。

先感谢您。

```
2013-01-02 22:16:17,833 ERROR org.apache.hadoop.hdfs.DFSClient: Exception closing file /tmp/hive-hadoop/hive_2013-01-01_21-21-32_067_6367259756570557828/_task_tmp.-ext-10002/_tmp.000004_1 : org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.hdfs.server.namenode.LeaseExpiredException: No lease on /tmp/hive-hadoop/hive_2013-01-01_21-21-32_067_6367259756570557828/_task_tmp.-ext-10002/_tmp.000004_1 File does not exist. Holder DFSClient_attempt_201301012114_0002_m_000004_1 does not have any open files.
        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:1631)
        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:1622)
        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.completeFileInternal(FSNamesystem.java:1677)
        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.completeFile(FSNamesystem.java:1665)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.complete(NameNode.java:718)
        at sun.reflect.GeneratedMethodAccessor13.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
        at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
        at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:415)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)

org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.hdfs.server.namenode.LeaseExpiredException: No lease on /tmp/hive-hadoop/hive_2013-01-01_21-21-32_067_6367259756570557828/_task_tmp.-ext-10002/_tmp.000004_1 File does not exist. Holder DFSClient_attempt_201301012114_0002_m_000004_1 does not have any open files.
        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:1631)
        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:1622)
        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.completeFileInternal(FSNamesystem.java:1677)
        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.completeFile(FSNamesystem.java:1665)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.complete(NameNode.java:718)
        at sun.reflect.GeneratedMethodAccessor13.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
        at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
        at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:415)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)

        at org.apache.hadoop.ipc.Client.call(Client.java:1070)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
        at $Proxy2.complete(Unknown Source)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
        at $Proxy2.complete(Unknown Source)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.closeInternal(DFSClient.java:3897)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.close(DFSClient.java:3812)
        at org.apache.hadoop.hdfs.DFSClient$LeaseChecker.close(DFSClient.java:1345)
        at org.apache.hadoop.hdfs.DFSClient.close(DFSClient.java:275)
        at org.apache.hadoop.hdfs.DistributedFileSystem.close(DistributedFileSystem.java:328)
        at org.apache.hadoop.fs.FileSystem$Cache.closeAll(FileSystem.java:1446)
        at org.apache.hadoop.fs.FileSystem.closeAll(FileSystem.java:277)
        at org.apache.hadoop.fs.FileSystem$ClientFinalizer.run(FileSystem.java:260) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:35:21.600

您的 Hive 查询是否创建并行 MR 作业？我遇到了同样的问题，发现：[LeaseExpiredException：HDFS 上没有租约错误](https://stackoverflow.com/questions/7559880/leaseexpiredexception-no-lease-error-on-hdfs)：

当工作结束时，他删除 /data/work/ 文件夹。如果并行运行的作业很少，则删除也将删除另一个作业的文件。实际上我需要删除/data/work/。

换句话说，当作业尝试访问不再存在的文件时会引发此异常

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T04:10:34.127

设置 hive.exec.max.dynamic.partitions=100000; 设置 hive.exec.max.dynamic.partitions.pernode=100000;

# ajax - 如何使用图像名称将数据插入 mysql 数据库，这将是自动上传图像而无需提交和即时显示

> ID：14170187
> 
> 赞同：0
> 
> 时间：2013-01-05T08:49:12.590
> 
> 标签：ajax, codeigniter

我的代码如下

看法

```
<form id="form1" name="form1" method="post" enctype="multipart/form-data" action="<?php echo base_url();?>index.php/setup_con/add_user_info">
Picture <input name="userfile" type="file" />
Name <input name="name" type="text" />
<input name="" type="submit" />
</form> 
```

控制器

```
$config['upload_path'] = './uploads/';
$config['allowed_types'] = 'gif|jpg|png';
$config['max_size'] = '800';
$config['max_width']  = '184';
$config['max_height']  = '142;

$this->load->library('upload', $config);

if (!$this->upload->do_upload())
{
$error = array('error' => $this->upload->display_errors());
echo $error;
}
else
{

$data = array('upload_data' => $this->upload->data());
$img =  $data ['upload_data']['file_name'];

$data = $this->setup_model->add_user_info($img);
} 
```

模型

```
$name = $this->input->post('name');
$img = $img
$data = array (
     'img' =>$img,
     'name' =>$name
    );
$this->db->insert('user',$data); 
```

通常我可以做到

基本上，我想首先在不提交的情况下进行自动图像上传（可能是通过 ajax）并立即显示，然后我将提交然后将数据插入到用户表中，并带有图像名称和名称。

请帮助我如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T19:22:26.947

抱歉，如果我误读了您的问题，但这听起来像是在上传之前询问如何预览图像的很长的路要走。这是在进行任何上传之前执行此操作的一种方法，然后您可以在提交时将实际图像与数据库内容一起上传。

**HTML**

```
 <img id="preview_img" src="" />
 <input id='img_upload' type="file" name="userfile" /> 
```

**查询**

```
$('body').on("change", "#img_upload", function(event) {
    if (this.files && this.files[0]) {
        var reader = new FileReader();

        reader.onload = function(e) {
        $('#preview_img').attr('src', e.target.result);
        }
        reader.readAsDataURL(this.files[0]);
    }
}); 
```

# maven-plugin - 分析 csharp 项目时 sonar-maven-plugin 出错

> ID：14170189
> 
> 赞同：-1
> 
> 时间：2013-01-05T08:50:03.177
> 
> 标签：maven-plugin, sonarqube

在 sonar 3.1.1 中分析 csharp 项目时出现错误
它无法执行 sonar-maven-plugin。这是我的日志文件数据。

```
[ERROR] Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli) on 
project MyProject: Can not execute Sonar: Error occured while reading Visual Studio files.   
Could not evaluate the expression com.sun.org.apache.xpath.internal.jaxp.XPathExpressionImpl@ec73b9 on project
D:\projects\MyProject\src\framework\MyPro\MyPro.csproj: XPathExpressionException: org.apache.xerces.parsers.XIncludeAwareParserConfiguration
cannot be cast to org.apache.xerces.xni.parser.XMLParserConfiguration -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read   
the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVE/MojoExecutionException 
```

请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:36:14.863

您可能添加了一个额外的 JAR，它弄乱了类路径。您应该尝试进行全新安装，一切都应该没问题。

# javascript - 使用 JavaScript 和 D3 可调整大小的 SVG 元素

> ID：14170197
> 
> 赞同：6
> 
> 时间：2013-01-05T08:51:00.010
> 
> 标签：javascript, svg, d3.js

是否有人知道任何允许根据用户设置的窗口大小调整 svg 元素（也包括整个内容）大小的 js 代码。我的用户将希望在其活动桌面上以小型自定义视图查看 d3 图形。同时其他人将在其活动桌面上全屏运行。这意味着图表需要根据用户的偏好自行调整大小。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T19:56:19.863

几天前，我整理了一个关于这种期望行为的演示。在这里查看 - [http://bl.ocks.org/4444770](http://bl.ocks.org/4444770)

基本上，您听窗口的大小，对包裹所有 SVG 元素的 g 元素应用比例变换，然后调整父 SVG 的大小。在页面加载和窗口调整大小时调用此代码，其中“容器”是保存 SVG 的 div：

```
d3.select("g").attr("transform", "scale(" + $("#container").width()/900 + ")");
$("svg").height($("#container").width()*0.618); 
```

如果您的 SVG 放置在 div 中，这是一个很好的方法。

另一种方法是使用 SVG 视图框，正如 Mike Bostock 在这里演示的那样 - [http://bl.ocks.org/harlantwood/raw/6900108/](http://bl.ocks.org/harlantwood/raw/6900108/)。如果您要将 SVG 附加到正文，则此方法是最好的，并且我确信在将 SVG 放置在 div 内时有一种方法可以使用此方法，但我无法找到解决方案，因此创建了上面解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T21:47:43.340

您可以在加载页面或调整大小时调整 svg.attr("width").attr("height") ，但您需要在代码中添加其他行为以使 d3 元素随新大小而变化。

您还可以查看 svg 对象的 .viewBox 属性，该属性将动态缩放 svg 元素，但我发现它在不同浏览器中的行为参差不齐：

[http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute](http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute)

# internet-explorer - SendMessage 和 FireFox/IE/Web 浏览器

> ID：14170200
> 
> 赞同：-2
> 
> 时间：2013-01-05T08:51:48.823
> 
> 标签：internet-explorer, firefox, browser, sendmessage, hwnd

是否可以将消息发送到 Webbrowser 组件内的 HTML 控件？如果是这样，我怎样才能获得他们的 HWND？我一直在为 Spy++ 和 WINID 苦苦挣扎，我无法访问这些控件 HWND。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:58:46.807

IE 的控件不是嵌套窗口，所以不能用来`SendMessage()`向它们发送消息。IE 绘制了自己的控件，它们的内部工作是不公开的，并且依赖于版本。

Firefox 使用 Gecko，我相信它也实现了自己的控件，所以你也不会有运气。

在一个新问题中，您应该解释为什么要向这些控件发送消息，因为可能有一种方法可以做您真正想做的事情。我的超能力告诉我，使用[IAccessible](http://msdn.microsoft.com/en-us/library/accessibility.iaccessible.aspx)系列接口可能是您真正想要的。

# delphi - Delphi：应该手动释放 PChar 数组的分配元素吗？

> ID：14170201
> 
> 赞同：3
> 
> 时间：2013-01-05T08:51:57.523
> 
> 标签：delphi, freepascal

考虑以下代码：

```
procedure Test;
var
  MyPCharArray: array of PChar;

begin
  SetLength(MyPCharArray, 3);

  GetMem(MyPCharArray[0], 5);
  GetMem(MyPCharArray[1], 5);
  GetMem(MyPCharArray[2], 5);

  StrCopy(MyPCharArray[0], 'test');
  StrCopy(MyPCharArray[1], 'abcd');
  StrCopy(MyPCharArray[2], '1234');

  // Are these necessary?
  FreeMem(MyPCharArray[0], 5);
  FreeMem(MyPCharArray[1], 5);
  FreeMem(MyPCharArray[2], 5);
end; 
```

应该手动释放分配的元素，还是编译器会在`MyPCharArray`超出范围时自动释放数组元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T09:08:50.297

实际上，您对 GetMem 的每个调用都必须与对 FreeMem 的调用相匹配。

我不确定你为什么有这个数组。这不是我希望在纯 Pascal 代码中看到的类型。所以我的猜测是你正在将 PChar 数组传递给一些外部库。在这种情况下，我会声明一个字符串数组以及 PChar 数组。然后通过在字符串数组的相应元素上使用 PChar(...) 来制作每个 PChar 元素。然后你可以避免使用 StrCopy、GetMem 和 FreeMem。

```
procedure CallLib(const str: array of string);
var
  i: Integer;
  parr: array of PChar;
begin
  SetLength(parr, Length(str));
  for i := 0 to high(parr) do
    parr[i] := PChar(str[i]);
  // call library now
end; 
```

# javascript - splice 正在影响以前复制的变量

> ID：14170205
> 
> 赞同：11
> 
> 时间：2013-01-05T08:52:26.447
> 
> 标签：javascript

> **可能重复：**
> [在javascript中按值复制数组](https://stackoverflow.com/questions/7486085/copying-array-by-value-in-javascript)

我有一个有趣的 javascript 问题。我复制一个数组变量以仅对副本进行修改，然后拼接副本以删除一个元素。但是原始数组变量受拼接影响 - 就好像副本是“通过引用复制”：

```
window.onload = function() {
  var initial_variable = ['first', 'second', 'third'];
  var copy_initial_variable = initial_variable;
  copy_initial_variable.splice(0, 1);
  alert('initial variable - ' + initial_variable);
};
//output: initial variable - second,third 
```

**首先**，这是 javascript 的故意行为还是错误？

**其次**，我怎样才能制作一个数组的副本并删除副本中的一个元素而不是原始元素？

让我认为上面可能是一个 javascript 错误的一件事是，这种行为只发生在数组而不是整数。例如：

```
window.onload = function() {
  var initial_variable = 1;
  var copy_initial_variable = initial_variable;
  copy_initial_variable = 2;
  alert('initial variable - ' + initial_variable);
};
//output: initial variable - 1 
```

如果行为是一致的，那么这应该输出`2`，因为分配可能是通过引用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-05T09:05:37.550

这绝不是一个错误，而是一个非常普遍的误解。让我们看看我说的时候会发生什么

```
var a = b; 
```

整数和其他 javascript 原语，如浮点数和布尔值，是“按值分配的”。这意味着*b*具有的任何值都将被复制到*a*。对于计算机而言，这意味着将*b*引用的内存部分复制到 a 引用的内存*中*。这就是您所期望的行为。

当像这样使用数组和其他对象（以及`new Object()`调用的“后代”）时，就会有一个引用副本。这意味着*a*的值现在引用 b 的值，*b**引用*的内存 不会被复制或修改。因此，当写

 *```
a = [1,2,3];
b = a; 
```

*b*和*a*可以互换。他们引用相同的内存地址。要实现您想要做的事情，请使用

```
var copy_initial_variable = initial_variable.slice(0); 
```

阅读[JavaScript 是否通过引用传递？](https://stackoverflow.com/questions/13104494/does-javascript-pass-by-reference)了解更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T09:01:10.460

在第一种情况下，您正在使用通过引用传递的数组。在第二种情况下，您正在使用按值传递的素数类型。在第一种情况下，您应该复制初始数组（例如 with `initial_variable.slice(0)`）。尝试类似的东西

```
window.onload = function() {
  var initial_variable = ['first', 'second', 'third'];
  var copy_initial_variable = initial_variable.slice(0); //returns new array!!!!
  copy_initial_variable.splice(0, 1);
  alert('initial variable - ' + initial_variable);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T08:55:42.513

问题不在于`splice`行为方式，而在于`initial_variable`and`copy_initial_variable`引用同一个数组这一事实。

```
alert (copy_initial_variable === initial_variable); 
```

在 JavaScript 中有两种类型的值：原始值，如数字和布尔值，以及对象，包括数组。变量保存原始值，但它们保存对对象的引用。“复制”原始值按您的预期工作，创建一个新的原始值，以便更改`copy`变量不会更改原始变量。但是“复制”一个对象实际上复制了指向该对象的引用，它不会创建一个新对象。

这**不是**JavaScript 错误，这是预期的行为。*

# node.js - createWriteStream 与 writeFile？

> ID：14170210
> 
> 赞同：9
> 
> 时间：2013-01-05T08:53:02.190
> 
> 标签：node.js, file-io, stream, request, fwrite

这两种操作的基本区别是什么？

```
someReadStream.pipe(fs.createWriteStream('foo.png')); 
```

对比

```
someReadStream.on('data', function(chunk) { blob += chunk } );
someReadStream.on('end', function() { fs.writeFile('foo.png', blob) }); 
```

当使用请求库进行抓取时，我可以保存图片（png，bmp）等。只有前一种方法和后一种方法有相同的乱码（二进制）数据，但图像不呈现。

它们有何不同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T10:35:50.533

当您在 node.js 中使用流时，您应该更喜欢管道它们。

根据[Node.js 的流事件文档](http://nodejs.org/api/stream.html#stream_event_data)，`data`事件会发出缓冲区（默认情况下）或字符串（如果`encoding`已设置）。

当您使用文本流时，您可以使用`data`事件将字符串数据块连接在一起。然后，您将能够将数据作为一个字符串处理。

但是当处理二进制数据时，它就不是那么简单了，因为你会收到缓冲区。要连接缓冲区，您可以使用特殊方法，例如[`Buffer.concat`](http://nodejs.org/api/buffer.html#buffer_class_method_buffer_concat_list_totallength). 可以对二进制流使用类似的方法：

```
var buffers = [];
readstrm.on('data', function(chunk) {
    buffers.push(chunk);
});
readstrm.on('end', function() {
    fs.writeFile('foo.png', Buffer.concat(buffers));
}); 
```

您可以通过检查输出文件的大小来发现出现问题的时间。

# silverlight - 在 windows phone webbrowser 控件中显示滚动条

> ID：14170212
> 
> 赞同：0
> 
> 时间：2013-01-05T08:53:40.190
> 
> 标签：silverlight, scroll, browser, windows-phone

我有一些内容要阅读，加载到 webbrowser 控件中。我想在阅读时看到进度。是否可以以某种方式在 webbrowser 控件中显示垂直滚动条？尝试`ScrollViewer.VerticalScrollVisibility`将整个网络浏览器放入 ScrollViewer，没有任何效果！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-25T19:30:04.857

根据 MisterGoodcat 的想法查看我的解决方案。我创建了一个自定义 Web 浏览器控件，它在页面加载后注入 javascript。

XAML：

```
<UserControl x:Class="Wallet.Views.Controls.WebBrowserWithScrollbar"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
xmlns:command="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Platform"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
d:DesignHeight="480" d:DesignWidth="480">

<Grid>
    <phone:WebBrowser 
            Name="WebBrowserControl"
            IsScriptEnabled="True"
            Margin="0 0 5 0"
            ScriptNotify="WebBrowser_OnScriptNotify">

    </phone:WebBrowser>

    <ScrollBar x:Name="DisplayScrollBar"
                Orientation="Vertical"
                HorizontalAlignment="Right"
                VerticalAlignment="Stretch"
                Minimum="0"
                Maximum="100"
                Value="0" 
                Visibility="Collapsed"/>
</Grid> 
```

后面的代码：

```
/// <summary>
/// Adds a vertical scrollbar to the normal WebBrowser control
/// </summary>
public partial class WebBrowserWithScrollbar : UserControl
{
    #region Dependency Properties
    public static readonly DependencyProperty SourceProperty = DependencyProperty.Register(
        "Source", typeof(string), typeof(WebBrowserWithScrollbar), new PropertyMetadata(string.Empty, OnSourcePropertyChanged));

    #endregion

    #region Fields
    private int _visibleHeight;
    private int _scrollHeight;
    #endregion

    #region Constructors
    public WebBrowserWithScrollbar()
    {
        InitializeComponent();
        this.LoadCompleted += this.WebBrowserControlLoadCompleted;
    }
    #endregion

    #region Event Handlers

    public event LoadCompletedEventHandler LoadCompleted
    {
        add
        {
            WebBrowserControl.LoadCompleted += value;
        }

        remove
        {
            WebBrowserControl.LoadCompleted -= value;
        }
    }

    public event EventHandler<NotifyEventArgs> ScriptNotify
    {
        add
        {
            WebBrowserControl.ScriptNotify += value;
        }

        remove
        {
            WebBrowserControl.ScriptNotify -= value;
        }
    }

    public event EventHandler<NavigationEventArgs> Navigated
    {
        add
        {
            WebBrowserControl.Navigated += value;
        }

        remove
        {
            WebBrowserControl.Navigated -= value;
        }
    }

    public event EventHandler<NavigatingEventArgs> Navigating
    {
        add
        {
            WebBrowserControl.Navigating += value;
        }

        remove
        {
            WebBrowserControl.Navigating -= value;
        }
    }

    public event NavigationFailedEventHandler NavigationFailed
    {
        add
        {
            WebBrowserControl.NavigationFailed += value;
        }

        remove
        {
            WebBrowserControl.NavigationFailed -= value;
        }
    }

    #endregion

    #region Properties
    public string Source
    {
        get
        {
            return (string)this.GetValue(SourceProperty);
        }

        set
        {
            this.SetValue(SourceProperty, value);
        }
    }
    #endregion

    #region Static Methods

    private static void OnSourcePropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var controlWrapper = d as WebBrowserWithScrollbar;
        if (controlWrapper != null)
        {
            var webBrowser = controlWrapper.WebBrowserControl;
            var newSource = e.NewValue as string;
            Uri uri;

            if (webBrowser != null &&
                newSource != null &&
                e.NewValue != e.OldValue &&
                !string.IsNullOrEmpty(newSource) &&
                Uri.TryCreate(newSource, UriKind.Absolute, out uri))
            {
                webBrowser.Source = uri;
            }
        }
    }

    #endregion

    #region Methods
    private void WebBrowserControlLoadCompleted(object sender, NavigationEventArgs e)
    {
        this.InitializeScrollBarScript();
    }

    private void WebBrowser_OnScriptNotify(object sender, NotifyEventArgs e)
    {
        var parts = e.Value.Split('=');
        if (parts.Length != 2)
        {
            return;
        }

        int number;
        if (!int.TryParse(parts[1], out number))
        {
            return;
        }

        if (parts[0] == "scrollHeight")
        {
            _scrollHeight = number;
            if (_visibleHeight > 0)
            {
                DisplayScrollBar.Maximum = _scrollHeight - _visibleHeight;
            }
        }
        else if (parts[0] == "clientHeight")
        {
            _visibleHeight = number;
            if (_scrollHeight > 0)
            {
                DisplayScrollBar.Maximum = _scrollHeight - _visibleHeight;
            }
        }
        else if (parts[0] == "scrollTop")
        {
            DisplayScrollBar.Value = number;
        }

        this.DisplayScrollBar.Visibility = this._visibleHeight >= this._scrollHeight ? Visibility.Collapsed : Visibility.Visible;
    }

    private void InitializeScrollBarScript()
    {
        try
        {
            WebBrowserControl.InvokeScript(
                "eval",
                new[]
                    {
                        "function onScroll() { " + "var scrollPosition = document.body.scrollTop;"
                        + "window.external.notify(\"scrollTop=\" + scrollPosition.toString());"
                        + "window.external.notify(\"scrollHeight=\" + document.body.scrollHeight.toString());"
                        + "window.external.notify(\"clientHeight=\" + document.body.clientHeight.toString()); } "

                        + "window.external.notify(\"scrollHeight=\" + document.body.scrollHeight.toString());"
                        + "window.external.notify(\"clientHeight=\" + document.body.clientHeight.toString()); "
                        + "window.onscroll = onScroll"
                    });
        }
        catch (Exception xcp)
        {
            Debug.WriteLine("Exception occured while executing invoke script:");
            Debug.WriteLine(xcp);
            DisplayScrollBar.Visibility = Visibility.Collapsed;
        }
    }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:30:39.283

..没有人回答..
但我已经找到了解决方案。不是很理想，而且有点脏，但它可以工作，我现在可以显示阅读进度。[http://www.pitorque.de/MisterGoodcat/post/Somethings-Missing-from-the-WebBrowser-Control.aspx](http://www.pitorque.de/MisterGoodcat/post/Somethings-Missing-from-the-WebBrowser-Control.aspx)主要思想是在页面中注入一些javascript并通知浏览器滚动事件；之后更改放置在浏览器附近某处的自定义滚动条控件的位置。

# java - 如何实现椭圆渐变画？

> ID：14170213
> 
> 赞同：4
> 
> 时间：2013-01-05T08:53:43.967
> 
> 标签：java, awt, graphics2d, affinetransform, radial-gradients

我们知道`RadialGradientPaint`在 Java 中有一个类，我们可以用它来绘制圆形的渐变画。

但我想要一个椭圆形（椭圆）`GradientPaint`。如何实现椭圆`GradientPaint`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-05T09:10:20.653

[`AffineTransform`](http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html)绘制时使用`RadialGradientPaint`. 这将需要转换的比例实例。它可能最终看起来像这样：

![OvalGradientPaint](../Images/ada716d594d32ba02614329568e3ad84.png)

```
import java.awt.*;
import java.awt.MultipleGradientPaint.CycleMethod;
import java.awt.geom.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class OvalGradientPaint {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                // the GUI as seen by the user (without frame)
                JPanel gui = new JPanel(new BorderLayout());
                gui.setBorder(new EmptyBorder(2, 3, 2, 3));

                gui.add(new OvalGradientPaintSurface());
                gui.setBackground(Color.WHITE);

                JFrame f = new JFrame("Oval Gradient Paint");
                f.add(gui);
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                // See http://stackoverflow.com/a/7143398/418556 for demo.
                f.setLocationByPlatform(true);

                // ensures the frame is the minimum size it needs to be
                // in order display the components within it
                f.pack();
                // should be done last, to avoid flickering, moving,
                // resizing artifacts.
                f.setVisible(true);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
}

class OvalGradientPaintSurface extends JPanel {

    public int yScale = 150;
    public int increment = 1;
    RadialGradientPaint paint;
    AffineTransform moveToOrigin;

    OvalGradientPaintSurface() {
        Point2D center = new Point2D.Float(100, 100);
        float radius = 90;
        float[] dist = {0.05f, .95f};
        Color[] colors = {Color.RED, Color.MAGENTA.darker()};
        paint = new RadialGradientPaint(center, radius, dist, colors,CycleMethod.REFLECT);
        moveToOrigin = AffineTransform.
                getTranslateInstance(-100d, -100d);
        ActionListener listener = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                if (increment < 0) {
                    increment = (yScale < 50 ? -increment : increment);
                } else {
                    increment = (yScale > 150 ? -increment : increment);
                }
                yScale += increment;
                repaint();
            }
        };

        Timer t = new Timer(15, listener);
        t.start();
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D)g;
        AffineTransform moveToCenter = AffineTransform.
                getTranslateInstance(getWidth()/2d, getHeight()/2d);
        g2.setPaint(paint);
        double y = yScale/100d;
        double x = 1/y;
        AffineTransform at = AffineTransform.getScaleInstance(x, y);

        // We need to move it to the origin, scale, and move back.
        // Counterintutitively perhaps, we concatentate 'in reverse'.
        moveToCenter.concatenate(at);
        moveToCenter.concatenate(moveToOrigin);
        g2.setTransform(moveToCenter);

        // fudge factor of 3 here, to ensure the scaling of the transform
        // does not leave edges unpainted.
        g2.fillRect(-getWidth(), -getHeight(), getWidth()*3, getHeight()*3);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(500, 200);
    }
} 
```

**原始图像：** 应用程序的原始静态（无聊）“屏幕截图”。

![OvalGradientPaint](../Images/b8adbea5190a64c39d525d5cf02e0879.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-13T19:48:51.357

`RadialGradientPaint`提供了两种将自身绘制为椭圆而不是圆形的方法：

1.  在构造时，您可以指定渐变的变换。例如，如果您提供以下变换：`AffineTransform.getScaleInstance(0.5, 1)`，您的渐变将是一个直立的椭圆（x 维度将是 y 维度的一半）。

2.  或者，您可以使用需要`Rectangle2D`提供的构造函数。将创建适当的变换以使渐变椭圆边界与提供的矩形边界匹配。我发现类文档很有帮助： [RadialGradientPaint API](http://docs.oracle.com/javase/7/docs/api/java/awt/RadialGradientPaint.html)。特别是，请参阅[此构造函数](http://docs.oracle.com/javase/7/docs/api/java/awt/RadialGradientPaint.html#RadialGradientPaint(java.awt.geom.Rectangle2D,%20float[],%20java.awt.Color[],%20java.awt.MultipleGradientPaint.CycleMethod))的文档。

# php - 将对象属性传递给下一个的简单方法

> ID：14170217
> 
> 赞同：1
> 
> 时间：2013-01-05T08:54:04.913
> 
> 标签：php

这可能有点难以理解，所以如果不够清楚，我提前道歉。

我正在编写自己的 MVC 框架，但又一次陷入困境。

我正在为框架编写控制器类。基本上这是它的工作原理：

*   实例化扩展抽象类的类 coreController
*   coreController 通过解释查询字符串设置要加载的控制器
*   查询存储在变量中的字符串值
*   其他变量赋值
*   新控制器已加载
*   新控制器检查是否需要实例化动作对象。
*   新的动作控制器已加载
*   动作控制器检查它是否是所需的最终对象。
*   动作控制器作为要在脚本的其余部分引用的对象返回。

可以调用通用 $controller->method() 并引用加载的最终控制器。

另一个概述：

```
coreController
    pageController
       pageControllerActionAdd
       return as object to start

$controller->something(); //References pageControllerActionAdd 
```

基本上我想要做的是能够输入一个网址，如： [http ://www.mywebsite.com/page/modify/](http://www.mywebsite.com/page/modify/)

并让脚本将 PageModifyController 作为变量提取，以便我可以执行它的方法。

如果你能告诉我一个更好的方法来做我正在做的事情，请继续。您不必编写任何代码，只要这个想法很棒。只是我目前做的方式很混乱，很难调试。我最终会得到多个嵌套对象，我不喜欢这样的概念。

我一直在阅读很多其他源代码，发现它也可以非常复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:58:36.180

我实际上创建了一个框架，该框架可以按照您尝试实现的方式工作。我认为您缺少的是 RoutingHandler 类。路由是对 URL 的物理操作，它告诉您的应用程序要加载哪个 Controller 以及要运行哪个 Action。

在我的世界里我也有模块，所以基本的路由方案是

```
Module -> Controller -> Action 
```

这三个项目以这种方式映射到我的 URI 方案。变量也可以像这样附加......

[http://www.domain.com/module/controller/action/var1/val1/var2/val2](http://www.domain.com/module/controller/action/var1/val1/var2/val2)

那么，在解析 URI 并将控制权传递给适当的控制器和操作之后会发生什么？让我们编写一些代码来演示一个简单的示例......

```
<?php    
    class indexController extends Controller {

        protected function Initialize() {
            $this->objHomeModel = new HomeModel;

            $this->objHeader = new Header();
            $this->objFooter = new Footer();

            $this->objHeader
                ->SetPageId('home');
        }

        public function indexAction() {
            $this->objHeader->SetPageTitle('This is my page title.');
        }

        // other actions and/or helper methods...
    }
?> 
```

在该`Initialize`方法中，我设置了一些控制器范围的东西，并获取我的模型实例以供以后使用。真正的肉在`indexAction`方法。您可以在此处设置要在视图中使用的内容。例如...

```
public function randomAction() {
    $this->_CONTROL->Append($intSomeVar, 42);
} 
```

`_CONTROL`是我操作并传递给视图的一组值。该类`Controller`知道如何为 View 找到正确的模板，因为它以 Action 命名（并且在同级目录中）。

`Controller`父类采用动作方法的名称并像这样解析它......

```
indexAction -> index.tpl.php 
```

您还可以在这里做一些其他有趣的事情，例如...

```
Application::SetNoRender(); 
```

...会告诉控制器不要在模板内渲染，而只是完成该方法。这对于您实际上不想输出任何内容的情况很有用。

最后，所有的控制器、模型和视图都存在于它们自己的模块目录中，就像这样......

```
my_module
    controllers
        indexController.class.php
        someotherController.class.php
        :
        :
    models
        HomeModel.class.php
        :
        :
    templates
        index.tpl.php
        someother.tpl.php
        :
        : 
```

我可以根据需要拥有尽可能多的模块，这意味着我可以通过模块和/或控制器分离功能。

我可以继续，但我是凭记忆写的，这里和那里都有一些皱纹，但希望这能让你深思。

# ruby-on-rails - 用于 heroku 的名称服务器是什么？

> ID：14170218
> 
> 赞同：0
> 
> 时间：2013-01-05T08:54:05.577
> 
> 标签：ruby-on-rails, heroku

我在 heroku 托管我的应用程序，我的域是 godaddy。如何将我的域指向我的 heroku 应用程序？

我应该将 NameServer 1 和 NameServer 2 更改为 myApp.herokuapp.com 和 myApp.herokuapp.com 吗？

我已按照 heroku 的说明进行操作，但是，我想确保我走在正确的道路上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:31:28.423

您无需更改名称服务器，Heroku 不是 DNS 提供商。您可以将域管理留在任何您觉得舒服的地方，然后编辑记录以指向您在 Heroku 上的应用程序。

[它在https://devcenter.heroku.com/articles/custom-domains#dns-setup](https://devcenter.heroku.com/articles/custom-domains#dns-setup)有更多详细信息，但总而言之，如果您有一个在 GoDaddy 注册的域 foobah.com 将使用他们的控制面板（可能是高级控制面板）编辑 DNS 记录以指向 Heroku。您需要有一个 www.foobah.com 的 CNAME 记录，其值设置为 myapp.herokuapp.com。当您注册域或现有站点时，您可能会发现您已经为您设置了 A 记录，您应该删除它。然后，您还需要将自定义域 www.foobah.com 添加到您在 Heroku 上的应用程序中。

# ios - 如何使 initWithNibName 表现得像 instantiateViewControllerWithIdentifier

> ID：14170220
> 
> 赞同：0
> 
> 时间：2013-01-05T08:54:32.223
> 
> 标签：ios, xcode, storyboard, nib, uistoryboard

我正在尝试将视图控制器容器[库](https://github.com/edgecase/ECSlidingViewController)添加到[remail](http://code.google.com/p/remail-iphone/)电子邮件客户端。这个想法是视图控制器容器 `presents its child view controllers in two layers. It provides functionality for sliding the top view to reveal the views underneath it.`

在库描述中，这是将子 controllerView 附加到其父级的建议方法：

```
if (![self.slidingViewController.underLeftViewController 
        isKindOfClass:[MenuViewController class]]) {
    self.slidingViewController.underLeftViewController  = 
        [self.storyboard instantiateViewControllerWithIdentifier:@"Menu"];
  } 
```

*滑动视图控制器*在哪里`the top-level instance of the view controller container. With this instance, you can set the view controllers underneath the top view and add panning.`

我使用的是 xib 文件，而不是楼层板。所以我的代码看起来像这样：

```
if (![self.slidingViewController.underLeftViewController 
        isKindOfClass:[MenuViewController class]]) {
    self.slidingViewController.underLeftViewController  =
         [[MenuViewController alloc] initWithNibName:@"Menu" bundle:nil];
} 
```

但使用该代码..我收到此错误：
`-[__NSArrayM insertObject:atIndex:]: object cannot be nil`

这可以追溯到slidingViewController 执行以下操作：
`[self.view insertSubview:_underTopViewController.view atIndex:0];`

[查看文档..我看到instantiateViewControllerWithIdentifier](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIStoryboard_Class/Reference/Reference.html#//apple_ref/occ/instm/UIStoryboard/instantiateViewControllerWithIdentifier%3a)和[initWithNibName](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/initWithNibName%3abundle%3a)之间存在区别：前者始终返回一个对象..而后者仅加载`the first time the view controller’s view is accessed`。

**问题：**如何让 initWithNibName 返回加载的 viewcontroller 对象，而不管该视图是否已被访问......类似于 instantiateViewControllerWithIdentifier？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:15:16.027

您应该可以通过[访问`view`属性](https://stackoverflow.com/a/1935566/477878)来触发它，例如；

```
if (![self.slidingViewController.underLeftViewController 
              isKindOfClass:[MenuViewController class]]) 
{
    MenuViewController *vc = 
      [[MenuViewController alloc] initWithNibName:@"Menu" bundle:nil];
    [vc view];  // <-- access the view and trigger loading
    self.slidingViewController.underLeftViewController  = vc;
} 
```

# mongodb - 创建可扩展的 MongoDB 短 ID 的策略

> ID：14170221
> 
> 赞同：3
> 
> 时间：2013-01-05T08:54:35.677
> 
> 标签：mongodb

我想要一个比 MongoDB 的 ObjectID 更友好的面对 id（即 Youtube 风格：/posts/cxB6Ey6）。

我读到为了可扩展性，最好将 _id 保留为 ObjectID，所以我考虑了两种解决方案：

1）为每个文档添加一个索引的 postid 字段

2）创建_id和postid之间的映射集合

[在这两种情况下，都使用https://github.com/dylang/shortid](https://github.com/dylang/shortid)之类的东西来生成短 id，并在生成时通过查询数据库确保 id 是唯一的。（这个查询生成插入可以是原子操作吗？）

这些解决方案会对性能产生显着影响吗？

这样做的最佳策略是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T16:16:37.847

这样做的正常方法是对一个唯一的 id 进行 base64 编码，但是：

> 为每个文档添加一个索引的 postid 字段

你肯定想采用这种方法。在这两种方法中，我会说这种方法很容易是最具可扩展性和性能的，因为它只需要一次往返即可获得简短的 URL 详细信息，而第二种选择需要 2 次。另一个考虑是索引开销不足维护一个额外的集合，这有点不费吹灰之力。

我也不会替换`_id`文档中的字段，因为默认值`ObjectId`在可预见的将来仍然有用。

因此，这将其限制为 URL 短代码的单独字段和索引（唯一键）。

接下来是您不想要一个 ID，它会在每次插入之前强制您查询数据库的唯一性。这就是`ObjectId`闪耀的地方。擅长在`ObjectId`客户端应用程序中创建，同时在数据库中是唯一的，而无需专门查询这些假设。

不需要首先查询数据库的唯一 ID 通常是基于时间的。在 PHP ( [http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php) ) 和 MongoDB 驱动程序 ( [http://docs.mongodb.org/manual/core/object-id/](http://docs.mongodb.org/manual/core/object-id/) ) 甚至插件中- 在您链接到 github（[https://github.com/dylang/shortid/blob/master/lib/shortid.js#L50](https://github.com/dylang/shortid/blob/master/lib/shortid.js#L50)）时，它们都使用时间作为独一无二的基础。

考虑到您链接的插件不会查询数据库以检查其自己的 ID 唯一性，我会说这个插件可能非常高效，如果您将它与您所说的第一个解决方案一起使用，您应该从中获得一个很好的基准.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T09:57:06.657

`ObjectID`如果你想用自定义的用户友好的短 id替换内置，那么就这样做。您可以使用内置`_id`字段或`id`为您的自定义 ID 添加新的唯一索引字段。使用 build-in 的好处`ObjectID`是即使您的数据库非常大，它们也不会重复。因此，通过用短 id 替换它们，您将承担 id 重复的风险。

现在关于性能。我认为最好的解决方案是不要在数据库中查询 id，因为通过适当调整 id 长度，重复的概率非常小。因此，在此模型中处理 ids 重复的最佳方法是检查 Mongo 响应。如果它以“重复键错误”响应，那么您将生成一个新的。

现在关于缩放。要扩展您的自定义 ID，您只需向其添加更多符号。“重复键错误”应是进行该更改的触发器。一般不会出现这样的错误。因此，如果它们开始出现，那么是时候扩大规模了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T15:52:12.380

我认为`ObjectId`为`_id`字段生成不会直接影响可伸缩性或性能。这会发生在哪里？

主要区别在于 ObjectId 是由 MongoDB 创建的，您不必为此承担责任。否则，您必须自己确定 id 的最佳大小并确保`_id`集合中存储的文档的每个字段的唯一值。它是必需的，因为`_id`用作主键。如果您没有很大的集合并且您需要标识符的自定义值，这可能是合理的。

但是，您可以使用`_id`存储 ObjectId 值的字段作为从时间创建对象 id 的机会，并在查询中利用这一事实来发挥您的优势，从而获得额外的好处。您还可以使用[getTimestamp()](http://docs.mongodb.org/manual/reference/method/ObjectId.getTimestamp/#ObjectId.getTimestamp)方法获取 ObjectId 创建的时间戳。在这种情况下排序`_id`相当于按创建时间排序。

但是，如果您要在 URL 或 HTML 中使用 ObjectId，那么出于安全考虑，您可以对其进行加密。防止信息泄露和获取对象的创建时间。这可能是安全风险。

关于您的解决方案：

1）我想这是非常方便和灵活的解决方案。在这种情况下，您可以指定任何`postId`不直接依赖于`_id`.

但是这个解决方案的小缺点是你必须有额外的字段并创建额外的索引。While`_id`被自动索引。

2）从noSQL方法的性能和理念的角度来看，我认为这不是一个好的解决方案。

# opengl - glGenTextures 和 glGenBuffers 是否共享相同的名称库？

> ID：14170222
> 
> 赞同：1
> 
> 时间：2013-01-05T08:54:51.470
> 
> 标签：opengl

我在做这个简单的游戏，并决定自己管理缓冲区和纹理 ID（无符号整数）。原因并不重要，因为我们有能力这样做，我有我的理由。

但后来想到了这个奇怪的问题。我应该为纹理和 vbo ID 使用不同的计数器吗？纹理 ID 和 VBO ID 使用相同的“名称”是否有效或发生某种冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:03:22.097

唯一共享名称空间的 OpenGL 对象是着色器和程序对象。因此纹理和缓冲区对象不共享相同的名称空间。

# php - 在文本框中显示值

> ID：14170228
> 
> 赞同：-1
> 
> 时间：2013-01-05T08:56:39.957
> 
> 标签：php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:03:29.620

HTML 中的某些字符具有特殊含义，至少在某些上下文中是这样。`"`例如表示“开始一个属性值”或“结束一个属性值”。

你有`"`你的数据，所以它会`value`在遇到时结束属性的值。

如果您想要`"`“作为数据的引号”而不是“属性值的结尾”，那么您需要用字符引用来表达它`&quot;`。

PHP 函数`htmlspecialchars($string)`会将 HTML 中具有特殊含义的大多数字符转换为其等效的字符引用。（该函数的第二个参数将修改要转换的字符，因此您可以指定将更改所有具有特殊含义的字符）。

每当您将一些文本插入到 HTML 文档中时，您必须首先运行`htmlspecialchars`它。

# java - Java中JTextfield的表单验证？

> ID：14170232
> 
> 赞同：5
> 
> 时间：2013-01-05T08:57:03.873
> 
> 标签：java, swing, validation, jtextfield

有没有简单的方法来`validate`一组`JTextFields`in `Java`. 我目前正在使用`sqlite manager`,`neatbeans IDE`创建一个简单的表单来收集信息以将作业添加到数据库中。我意识到有太多的 JTextFields。如何通过 sqllite 引发可以自定义的异常错误，或者在 Neatbeans 中通过属性对话框验证每个 JTextFields。验证是存在检查，即是否输入了一个值。自定义验证消息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T09:03:17.287

使用`InputVerifier`，如[*如何使用焦点子系统：验证输入*](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification)中所示。[这里](https://stackoverflow.com/a/11818946/230513)有一个相关的例子，[等等](https://stackoverflow.com/q/11818080/230513)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T11:46:46.210

+1 t 垃圾神回答。

您还可以使用：

*   [`DocumentFilter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)/[`DocumentListener`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/DocumentListener.html)并将其添加到`JTextField`.

有关示例和此[变体](https://stackoverflow.com/questions/13517057/how-to-make-cursor-can-enter-jtextfield-but-the-only-way-to-give-it-a-text-is-cl/13517107#13517107)，请参见[此处](https://stackoverflow.com/questions/14058505/jtextfield-accept-only-alphabet-and-white-space/14060047#14060047)。

`DocumentFilter`允许您在显示更改之前验证文本，即通过`super.XXX`在成功验证文本后调用重写方法的实现），而 as`DocumentListener`没有。在大多数情况下，它通常更好地满足于`DocumentFilter`.

请参阅此处获取更多帮助：

*   [如何编写文档监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)
*   [实现文档过滤器](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)

或者：

*   `JFormattedTextField`看[这里](https://stackoverflow.com/questions/11881301/best-way-to-constrain-user-to-enter-a-time-in-a-jtextfield/11881523#11881523)的例子。

# c# - 用于匹配以下条件的字符串的正则表达式

> ID：14170235
> 
> 赞同：-6
> 
> 时间：2013-01-05T08:57:44.820
> 
> 标签：c#, regex

我想创建一个`Regex`对象来匹配具有以下规范的字符串：

1.  字符串包含最少 6 个和最多 50 个字母数字。

2.  它只能包含字符和特殊字符，除了“*”、“/”、“”、“:”、“<”、“>”、“?”、“\”、“|”、“™”、 “©”、“®”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:59:58.007

`"^[^ put_anything_you_dont_want_like_specials_and_space_in_here]{6,50}$"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T08:59:37.967

[您接受的字符列表]{6,50}

# java - 使用 imageJ 查找边缘数组

> ID：14170238
> 
> 赞同：0
> 
> 时间：2013-01-05T08:58:16.413
> 
> 标签：java, imagej, edges

感谢 imageJ 库，我已经找到了图像的边缘。

现在，我想要一个包含这些边的数组。

这里有一个关于它的话题，但我无法发表评论，也没有答案： [Find Edges with ImageJ Programmatically](https://stackoverflow.com/questions/10652578/find-edges-with-imagej-programatically)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:06:51.197

如[*§29.3 Find Edges*](http://rsbweb.nih.gov/ij/docs/guide/146-29.html#toc-Subsection-29.3)中所述，该命令使用[Sobel 运算符](http://en.wikipedia.org/wiki/Sobel_operator)。最终图像的每个点都是水平和垂直卷积[的梯度大小。](http://en.wikipedia.org/wiki/Sobel_operator#Formulation)整个数组的副本由 selected 的`get*Array()`方法返回[`ImageProcessor`](http://rsbweb.nih.gov/ij/developer/api/ij/process/ImageProcessor.html)；可以使用各种`get*()`方法访问数组的各个元素。

附录：你说，“我的目标是得到边缘。我的问题是没有得到每个像素值。”

[*边缘检测*](http://en.wikipedia.org/wiki/Edge_detection)并[非易事](http://en.wikipedia.org/wiki/Edge_detection#Why_edge_detection_is_a_non-trivial_task)；它通常是一个多阶段的过程。幅值数组只是[应用一阶](http://en.wikipedia.org/wiki/Edge_detection#Other_first-order_methods)Sobel 算子*的初始*结果管道中的下一个[阶段](http://en.wikipedia.org/wiki/Edge_detection#Thresholding_and_linking)，例如阈值、链接、细化，取决于您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:09:00.793

是的，我知道这很旧，但这需要一个答案。以编程方式使用 imageJ

```
 float edgePixels[][];
 ImagePlus imp = null;
 Opener op = new Opener();
 imp =  op.openImage("lib/EP07-J.jpg");
 ImageProcessor improc = imp.getProcessor().duplicate();

 improc.medianFilter();
 improc.findEdges();
 edgePixels = improc.getFloatArray(); 
```

恭喜，您现在拥有一个表示边缘检测后像素的多维数组。

# c# - Windows Store 应用程序中是否有与 AffectsRender 类似的东西？

> ID：14170240
> 
> 赞同：0
> 
> 时间：2013-01-05T08:58:27.507
> 
> 标签：c#, xaml, windows-8, windows-runtime

我有一个用户控件，其中包含一个图像、一个文本框和一个按钮。它实现了`MeasureOverride()`and `ArrangeOverride()`，它基本上考虑了文本框的 Text 属性来调整自身的大小。

但是......`ArrangeOverride()`并且在设置文本*之前*`MeasureOverride()`只调用一次。通过数据绑定更改/更新文本后，它们不会再次被调用以重新计算。

 *我知道 WPF 中有一个`AffectsRender`元数据标志，还有一个`InvalidateVisual`，但我在 Windows 8 运行时领域。我怎么能在这里做到这一点？

```
protected override Size MeasureOverride(Size availableSize)
{
  Size panelDesiredSize = new Size();

  m_textbox.Measure(availableSize);

  if (m_textbox.DesiredSize.Height < m_textbox.MinHeight)
  {
    panelDesiredSize = new Size(
      m_textbox.DesiredSize.Width, m_textbox.MinHeight);
  }
  else
  {
    panelDesiredSize = m_textbox.DesiredSize;
  }

  return panelDesiredSize;
}

protected override Size ArrangeOverride(Size finalSize)
{
  double x = 0;
  double y = 0;

  m_textbox.Arrange(new Rect(new Point(x, y), finalSize));
  m_button.Arrange(new Rect(new Point(x, y), finalSize));
  m_image.Arrange(new Rect(new Point(x, y), finalSize));

  m_button.Width = finalSize.Width;
  m_button.Height = finalSize.Height;

  m_image.Width = finalSize.Width;
  m_image.Height = finalSize.Height;

  return finalSize; // Returns the final Arranged size
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T22:16:39.140

我认为这与 Silverlight 中的情况类似。没有元数据花哨，您需要在适当的元素上设置属性更改/事件处理程序并触发失效。因此，例如在您感兴趣的元素上注册一个事件处理程序并调用其中一个`TextChanged`，或强制布局循环。`SizeChanged``InvalidateMeasure``InvalidateArrange``UpdateLayout`*

# android - Android Gridview显示蓝色背景，如何将背景更改为白色？

> ID：14170242
> 
> 赞同：1
> 
> 时间：2013-01-05T08:58:46.197
> 
> 标签：android, gridview, background

当我启动我的应用程序gridview显示蓝色背景我想设置白色背景如何设置

在这里我放了我的 xml 和 imge

> Gridview.xml

```
<LinearLayout android:id="@+id/bodyfirst"
         android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:orientation="vertical"
          android:padding="15dp"
        <GridView
               android:id="@+id/gridview"
               android:layout_width="match_parent"
               android:layout_height="wrap_content"
               android:numColumns="3" 
               android:drawSelectorOnTop="true"
               android:gravity="center_vertical"
               android:background="@android:color/white">
        </GridView>
    </LinearLayout> 
```

![在此处输入图像描述](../Images/f700a15fa5914fe04b0d71ebdcd6b88b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T09:23:26.463

你应该添加背景`LinearLayout`，这个代码是正确的，例如

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@android:color/white">
<GridView
    android:id="@+id/gridview"
    android:layout_width="match_parent"
    android:layout_height="115px"
    android:numColumns="3"
    android:drawSelectorOnTop="true"
    android:gravity="center_vertical"
    android:background="@android:color/holo_blue_dark" />
<GridView
    android:id="@+id/gridview"
    android:layout_width="match_parent"
    android:layout_height="100px"
    android:numColumns="3"
    android:drawSelectorOnTop="true"
    android:gravity="center_vertical"
    android:background="@android:color/holo_blue_dark"
    android:layout_marginTop="13.0dp" />
  </LinearLayout> 
```

你应该添加`xmlns:android="http://schemas.android.com/apk/res/android"`到 LinearLayout ![在此处输入图像描述](../Images/0f6050ba393cf5f7cdf67a7f33292cc8.png)

# c# - 检索图像的名称

> ID：14170246
> 
> 赞同：0
> 
> 时间：2013-01-05T08:59:03.610
> 
> 标签：c#, winforms

这也许是一个愚蠢的问题，但想知道如何检索图像的名称。

例如

```
string name;
 Image imageOne = Image.FromFile("../../Images/PozeOne.jpg");
name = ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T09:00:57.543

您可以使用 Path.GetFilename

```
var path  = "../../Images/PozeOne.jpg";

Image imageOne = Image.FromFile(path);

string name = Path.GetFilename(path); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T11:06:12.137

```
 "PozeOne.jpg" is the name of image.... :-) 
```

* * *

```
 string path="../../Images/PozeOne.jpg";
    string[] imageName=path.split('/');
    string image_Name_Is= imageName[imageName.Lenght-1]; 
```

# android - ListView 滚动流畅度

> ID：14170253
> 
> 赞同：0
> 
> 时间：2013-01-05T09:00:39.190
> 
> 标签：android, android-listview, android-listfragment

我有一个功能齐全的`listview`（在 a 中`ListFragment`）和一个自定义`ArrayAdapter`. 适配器的布局由一个`imageview`、一个`button`、一个`gridview`和一对组成 `textviews`。
问题是列表视图在滚动时非常紧张。我已经实现了这个`ViewHolder`模式，它稍微提高了性能。包括我在 a 中检索的联系人图像，
并且还使用应用程序缓存来显示位图。我还能做些什么来使这个滚动平滑？ 我在适配器的方法中 使用了如下所示的视图回收`GridView``AsyncTask``listview`
`getView`

```
public View getView(int position, View convertView, ViewGroup parent) {
    View myView;
    holder = new ViewHolder();
    if (convertView == null) {
        inflater = (LayoutInflater) getContext().getSystemService(
                                  Context.LAYOUT_INFLATER_SERVICE);
        myView = inflater.inflate(R.layout.events_list_activity, parent, false);
    }
    else {
        myView = convertView;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:13:53.087

[这个](https://stackoverflow.com/a/6293919/1626878)问题可能对您的列表视图的紧张行为有解释。

如果你想提高滚动速度，试试这个，

```
getListView().setFastScrollEnabled(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T13:11:11.823

1.Flatten您的ViewItem层次结构并使用合并标签

2.实现ViewHolder模式，或者使用androidannotation的注入功能

3.在另一个线程中进行重载。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-05T09:20:38.920

它会给你从你的布局顶部滚动，它也会给你流畅的滚动体验。

```
mainScrollView=(ScrollView)findViewById(R.id.scrollview);
mainScrollView.smoothScrollTo(0, 0);
mainScrollView.fullScroll(mainScrollView.FOCUS_UP); 
```

# asp.net-mvc - 在 foreach 中显示第一个项目 - MVC

> ID：14170254
> 
> 赞同：2
> 
> 时间：2013-01-05T09:00:44.307
> 
> 标签：asp.net-mvc, asp.net-mvc-4, foreach

如何在 MVC4 的 foreach 中只显示前三个项目？

```
@foreach (var item in Model) {
<div class="media">
  <div class="media-body">
    <h4>@Html.DisplayFor(modelItem => item.Newstitle)</h4>

    <div class="media">
        @Html.DisplayFor(modelItem => item.Newsmessage)
    </div>
  </div>
</div>
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T09:14:49.833

`.Take(3)`在您的模型中使用。从您的代码：

```
@foreach (var item in Model.Take(3)) {
<div class="media">
  <div class="media-body">
    <h4>@Html.DisplayFor(modelItem => item.Newstitle)</h4>

    <div class="media">
        @Html.DisplayFor(modelItem => item.Newsmessage)
    </div>
  </div>
</div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:15:08.960

您的模型是可枚举的，因此您可以这样做：

```
foreach(var item in Model.Take(3)) ... 
```

# java - 在 Swing 中的表单验证期间绘制警告符号

> ID：14170257
> 
> 赞同：2
> 
> 时间：2013-01-05T09:00:49.757
> 
> 标签：java, swing, background, jtextfield

我开发了一个swing 表单，它在JTextComponent 失去焦点时验证条目，如果条目正确，则背景涂成绿色，否则涂成红色。

这是代码：-

```
import java.awt.Color;
import java.awt.GridLayout;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.text.JTextComponent;

public class Form extends JFrame implements FocusListener{
JTextField fname,lname,phone,email,address;
BufferedImage img;
public static void main(String args[])
{
SwingUtilities.invokeLater(new Runnable(){public void run(){new Form();}});
}

public Form()
{
super("Form with Validation Capability");
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setSize(400,300);
setLayout(new GridLayout(5,3));

try {
    img=ImageIO.read(new File("src/warning.png"));
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

add(new JLabel("First Name :"));
add(fname=new JTextField(20));
add(new JLabel("Last Name :"));
add(lname=new JTextField(20));
add(new JLabel("Phone Number :"));
add(phone=new JTextField(10));
add(new JLabel("Email:"));
add(email=new JTextField(20));
add(new JLabel("Address :"));
add(address=new JTextField(20));

fname.addFocusListener(this);
lname.addFocusListener(this);
phone.addFocusListener(this);
email.addFocusListener(this);
address.addFocusListener(this);

setVisible(true);
}

public void focusGained(FocusEvent e)
{
((JTextComponent) e.getSource()).setBackground(Color.WHITE);
}
public void focusLost(FocusEvent e)
{
if(e.getSource().equals(fname))
{
    validationForText(fname);
}
else if(e.getSource().equals(lname))
{
    validationForText(lname);
}
else if(e.getSource().equals(email))
{
    validationForEmail(email);
}
else if(e.getSource().equals(phone))
{
    validationForNumber(phone);
}
else{
    ((JTextComponent) e.getSource()).setBackground(Color.GREEN);
}
}
public void validationForText(JTextComponent comp)
{
String temp=comp.getText();
if (temp.matches("^[A-Za-z]+$")) {
    comp.setBackground(Color.GREEN);
}
else
    comp.setBackground(Color.RED);
}
public void validationForNumber(JTextComponent comp)
{
String text=comp.getText();
if(text.matches("^[0-9]+$"))
    comp.setBackground(Color.GREEN);
else
    comp.setBackground(Color.RED);
}
public void validationForEmail(JTextComponent comp)
{
String text=comp.getText();
if(text.matches("[^@]+@([^.]+\\.)+[^.]+"))
    comp.setBackground(Color.GREEN);
else
    comp.setBackground(Color.RED);
}

} 
```

这是我的简单应用程序的输出：

![在此处输入图像描述](../Images/befa2cfe4ee94f5587d30064ba53935e.png)

现在我还想在不正确字段的左下角绘制一个警告符号（缓冲图像）。谁能帮助我如何做到这一点，因为我不知道在哪里绘制图像。（我想使用 JLayeredPane 来完成它，因为我正在学习它的应用程序，任何代码片段都会有帮助）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T09:06:01.407

为什么不简单地添加一个`JLabel`（使用适当`LayoutManager`的位置来定位它）带有内置的 Swing 警告图标`UIManager.getIcon("OptionPane.warningIcon")`

![在此处输入图像描述](../Images/a3a3501358093b2a48b98c315d3e9a4c.png)

像这样：

```
JLabel label=new JLabel(UIManager.getIcon("OptionPane.warningIcon")); 
```

看到[这里](http://en-human-begin.blogspot.com/2007/11/javas-icons-by-default.html)更多。

**更新：**

根据您的评论，我宁愿为此使用`GlassPane`（并添加`JLabel`到玻璃窗格中），而不是`JLayeredPane`。有关更多信息，请参见[此处](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)`RootPanes`

**一些建议：**

*   `JFrame`不要不必要地扩展

*   不要打电话`setSize`。在必要时`JFrame`使用正确的`LayoutManager`和/或覆盖，并在设置可见**之前**将调用替换为。`getPreferredSize()``setSize``pack()` **`JFrame`**

***   `FocusListener`除非您想与其他类共享功能，否则不要在类上实现。

    *   还要养成使用`FocusAdapter`vs`FocusListener`这适用于一些附加 Listener 的习惯，即`MouseListener`可以替换为`MouseAdapter`. 这允许我们只覆盖我们想要的方法。在这种情况下，侦听器是正确的，因为我们对两种被覆盖的方法都做了一些事情，但是正如我所说的更多关于这个习惯

    *   也总是调用`super.XXX`覆盖方法的实现，`focusGained(FocusEvent fe)`除非你因为某种原因忽略它** 

 **这是具有上述修复的代码，包括在字段为红色时显示警告图标的玻璃窗格：

![在此处输入图像描述](../Images/95b09e9587b0f68ff817c5529311772c.png)

并在纠正时将其删除：

![在此处输入图像描述](../Images/98cbbe5dfb1c3f1ad861ea5575182afb.png)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.RenderingHints;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import java.awt.event.FocusAdapter;
import java.awt.event.FocusEvent;
import java.awt.image.BufferedImage;
import java.util.HashMap;
import java.util.Map;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.text.JTextComponent;

/**
 *
 * @author David
 */
public class GlassValidationPane extends JComponent {

    private static JTextField fname, lname, phone, email, address;
    private static GlassValidationPane gvp = new GlassValidationPane();

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {

                JFrame f = new JFrame("Form with Validation Capability");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                //f.setResizable(false);
                f.setLayout(new GridLayout(5, 3));

                f.add(new JLabel("First Name :"));
                f.add(fname = new JTextField(20));
                f.add(new JLabel("Last Name :"));
                f.add(lname = new JTextField(20));
                f.add(new JLabel("Phone Number :"));
                f.add(phone = new JTextField(10));
                f.add(new JLabel("Email:"));
                f.add(email = new JTextField(20));
                f.add(new JLabel("Address :"));
                f.add(address = new JTextField(20));

                f.addComponentListener(new ComponentAdapter() {
                    @Override
                    public void componentResized(ComponentEvent ce) {
                        super.componentResized(ce);
                        gvp.refreshLocations();
                    }
                });
                FocusAdapter fl = new FocusAdapter() {
                    @Override
                    public void focusGained(FocusEvent fe) {
                        super.focusGained(fe);
                        ((JTextComponent) fe.getSource()).setBackground(Color.WHITE);
                    }

                    @Override
                    public void focusLost(FocusEvent fe) {
                        super.focusLost(fe);
                        if (fe.getSource().equals(fname)) {
                            validationForText(fname);
                        } else if (fe.getSource().equals(lname)) {
                            validationForText(lname);
                        } else if (fe.getSource().equals(email)) {
                            validationForEmail(email);
                        } else if (fe.getSource().equals(phone)) {
                            validationForNumber(phone);
                        } else {
                            gvp.removeWarningIcon(((Component) fe.getSource()));
                            ((JTextComponent) fe.getSource()).setBackground(Color.GREEN);
                        }
                    }
                };

                fname.addFocusListener(fl);
                lname.addFocusListener(fl);
                phone.addFocusListener(fl);
                email.addFocusListener(fl);
                address.addFocusListener(fl);

                f.setGlassPane(gvp);

                f.pack();
                f.setVisible(true);
                gvp.setVisible(true);
            }

            public void validationForText(JTextComponent comp) {
                String temp = comp.getText();
                if (temp.matches("^[A-Za-z]+$")) {
                    setGreen(comp);
                } else {
                    setRed(comp);
                }
            }

            public void validationForNumber(JTextComponent comp) {
                String text = comp.getText();
                if (text.matches("^[0-9]+$")) {
                    setGreen(comp);
                } else {
                    setRed(comp);
                }
            }

            public void validationForEmail(JTextComponent comp) {
                String text = comp.getText();
                if (text.matches("[^@]+@([^.]+\\.)+[^.]+")) {
                    setGreen(comp);
                } else {
                    setRed(comp);
                }
            }

            private void setRed(JTextComponent comp) {
                comp.setBackground(Color.RED);
                gvp.showWarningIcon(comp);
            }

            private void setGreen(JTextComponent comp) {
                comp.setBackground(Color.GREEN);
                gvp.removeWarningIcon(comp);

            }
        });
    }
    private HashMap<Component, JLabel> warningLabels = new HashMap<>();
    private ImageIcon warningIcon;

    public GlassValidationPane() {
        setLayout(null);//this is the exception to the rule case a layoutmanager might make setting Jlabel co-ords harder
        setOpaque(false);
        Icon icon = UIManager.getIcon("OptionPane.warningIcon");
        int imgW = icon.getIconWidth();
        int imgH = icon.getIconHeight();
        BufferedImage img = ImageUtilities.getBufferedImageOfIcon(icon, imgW, imgH);
        warningIcon = new ImageIcon(ImageUtilities.resize(img, 24, 24));
    }

    void showWarningIcon(Component c) {
        if (warningLabels.containsKey(c)) {
            return;
        }

        JLabel label = new JLabel();
        label.setIcon(warningIcon);

        //int x=c.getX();//this will make it insode the component
        int x = c.getWidth() - label.getIcon().getIconWidth();//this makes it appear outside/next to component
        int y = c.getY();

        label.setBounds(x, y, label.getIcon().getIconWidth(), label.getIcon().getIconHeight());
        add(label);
        label.setVisible(true);
        revalidate();
        repaint();
        warningLabels.put(c, label);
    }

    public void removeWarningIcon(Component c) {
        for (Map.Entry<Component, JLabel> entry : warningLabels.entrySet()) {
            Component component = entry.getKey();
            JLabel jLabel = entry.getValue();
            if (component == c) {
                remove(jLabel);
                revalidate();
                repaint();
                break;
            }
        }
        warningLabels.remove(c);
    }

    public void refreshLocations() {
        for (Map.Entry<Component, JLabel> entry : warningLabels.entrySet()) {
            Component c = entry.getKey();
            JLabel label = entry.getValue();
            //int x=c.getX();//this will make it insode the component
            int x = c.getWidth() - label.getIcon().getIconWidth();//this makes it appear outside/next to component
            int y = c.getY();

            label.setBounds(x, y, label.getIcon().getIconWidth(), label.getIcon().getIconHeight());
            revalidate();
            repaint();
        }
    }
}

class ImageUtilities {

    public static BufferedImage resize(BufferedImage image, int width, int height) {
        BufferedImage bi = new BufferedImage(width, height, BufferedImage.TRANSLUCENT);
        Graphics2D g2d = (Graphics2D) bi.createGraphics();
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
        g2d.drawImage(image, 0, 0, width, height, null);
        g2d.dispose();
        return bi;
    }

    public static BufferedImage getBufferedImageOfIcon(Icon icon, int imgW, int imgH) {
        BufferedImage img = new BufferedImage(imgW, imgH, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = (Graphics2D) img.getGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        icon.paintIcon(null, g2d, 0, 0);
        g2d.dispose();
        return img;
    }
} 
```**

# ruby-on-rails - 使用没有 JavaScript 的carrierwave 进行多次上传

> ID：14170259
> 
> 赞同：2
> 
> 时间：2013-01-05T09:00:59.473
> 
> 标签：ruby-on-rails, carrierwave

这个想法是在控制器中循环图像数组，然后存储它们中的每一个。该请求显示有关上传图像的正确信息

```
{"utf8"=>"✓",
"authenticity_token"=>"usbr1ma8uKWBPiVFKh8AKoGYeaZTWAlLXscMBlFYyhw=",
"painting"=>{"name"=>"",
"image"=>[#<ActionDispatch::Http::UploadedFile:0x007fb414becad8 @original_filename="union_creek.jpg", @content_type="image/jpeg",
@headers="Content-Disposition: form-data; name=\"painting[image][]\"; filename=\"union_creek.jpg\"\r\nContent-Type: image/jpeg\r\n",
@tempfile=#<File:/var/folders/80/2pcl195n7_x0l8bnrjrp4xw40000gn/T/RackMultipart20130105-7179-kr8a7e>>,
#<ActionDispatch::Http::UploadedFile:0x007fb414beca10 @original_filename="what_lies_beneath.jpg",
@content_type="image/jpeg",
@headers="Content-Disposition: form-data; name=\"painting[image][]\"; filename=\"what_lies_beneath.jpg\"\r\nContent-Type: image/jpeg\r\n",
@tempfile=#<File:/var/folders/80/2pcl195n7_x0l8bnrjrp4xw40000gn/T/RackMultipart20130105-7179-iclmmw>>]},
"commit"=>"Create Painting",
"gallery_id"=>"13"} 
```

但是，当carrierwave 尝试存储图像时出现误导性错误

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

风景

```
= form_for [@gallery, @gallery.paintings.new] do |f|
  %p= f.text_field :name, placeholder: "Enter painting name"
  %p= f.file_field :image, multiple: true
  %p= f.submit %> 
```

控制器

```
uploader = ImageUploader.new
params[:painting][:image].each do |img|
  uploader.store!(img) # crash here
end 
```

我发现控制器有问题，但我想不出更好的方法来使用运营商存储多个文件。

谁能指出我？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:23:33.453

这是任何有同样问题的人的解决方案

```
params[:painting][:image].map { |img| gallery.paintings.create(name: img.original_filename , image: img) 
```

# javascript - 输入类型文件 onmouseover

> ID：14170261
> 
> 赞同：2
> 
> 时间：2013-01-05T09:01:05.700
> 
> 标签：javascript, jquery

触发事件时是否弹出输入类型文件对话框`onmouseover`？还是除此之外的其他活动`onclick`？（我希望出现对话框`onshake`，并且我正在使用 jQuery 插件来处理移动设备的抖动事件）

有一个 hack，你可以`onclick`在一个项目上，然后它会使用 JavaScript/jQuery 单击输入类型文件元素（这将是不可见的），但是当我将项目更改为`onmouseover`或另一个事件时它不起作用。

**编辑：**我的代码看起来有点像这样，除了我使用的是 onshake 事件（带有 jQ​​uery 插件）而不是 onmouseover。不过有些问题：

```
<button onmouseover="javascript:opendialogbox('imageuploadform1');">nope!</button>
<script>
function opendialogbox(inputid){
document.getElementById(inputid).click();
}
</script>
<input type="file" id="imageuploadform1" name="picture" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:18:11.747

**你不能：**

在这个演示中点击：http: [//jsbin.com/eqenoz/1/edit](http://jsbin.com/eqenoz/1/edit)

现在在这里尝试任何其他事件：http: [//jsbin.com/eqenoz/2/edit](http://jsbin.com/eqenoz/2/edit)

打开弹出窗口的操作**必须**由用户自己执行，并且必须是**DIRECT-USER-CLICK**事件。
因此，mousemove、mouseenter、mouseleave、shakeme、pushme、smileme，......将不起作用，并且会引发浏览器安全警告。

您唯一能做的就是请您的用户确认警告异常。

# c++ - 有没有办法将字符串放入 `string.insert("", "")` 函数中？

> ID：14170263
> 
> 赞同：3
> 
> 时间：2013-01-05T09:01:23.020
> 
> 标签：c++

所以这是我所指的代码行：

```
x.insert("a", "hello"); 
```

我试图在字符串中的每个“a”之后插入字符串“hello”。是否可以使用该`insert`功能执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T09:54:26.790

在[此评论](https://stackoverflow.com/questions/14170263/is-there-a-way-to-put-strings-in-the-string-insert-function#comment19634577_14170357)之后，您可以在（非无限）循环中执行此操作：

```
void insert_after_each(std::string& s, const std::string& target, const std::string& to_insert)
{
    for (std::string::size_type i = s.find(target);
        i != std::string::npos;
        i = s.find(target, i + target.size() + to_insert.size()))
    {
        s.insert(i + target.size(), to_insert);
    }
} 
```

这会在（我称之为）`target`字符串之后插入文本，并在每次迭代中跳过目标文本（“a”）和插入的文本（“hello”）。

## 示例用法：

```
std::string s = "A cat sat on a mat";
insert_after_each(s, "a", "hello");
assert(s == "A cahellot sahellot on ahello mahellot"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T09:04:33.567

> 用插入功能不能做到这一点吗？

没错，你不能通过一次调用来做到这一点，`insert()`因为`std::string`没有具有`insert()`这些语义的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T09:18:26.557

你想要做的是`a`通过使用[std::string::find 找到](http://en.cppreference.com/w/cpp/string/basic_string/find)位置，然后调用[std::string::insert](http://en.cppreference.com/w/cpp/string/basic_string/insert)将字符串插入到正确的位置。例如：

C++11

```
 auto pos = x.find("a"); 
 x.insert(pos, "app"); 
```

C++03：

```
 std::string b(x);
  int n = 0;
  for(std::string::iterator iter = x.begin(); iter!=x.end(); ++iter)
  {
    if ((*iter) == 'a')
    {
      int pos = rep.size()* n + distance(x.begin(), iter);
      cout << distance(x.begin(), iter) << " " << rep.size() << endl;
      b.insert(pos,"app");
      n++;
    }    
  } 
```

现在字符串`b`就是你所追求的。

# php - Joomla 文章的 Joomla 自定义字段输出

> ID：14170265
> 
> 赞同：0
> 
> 时间：2013-01-05T09:01:36.653
> 
> 标签：php, joomla

我尝试按照本文档中的描述在 Joomla 文章中实现自定义字段：http: [//docs.joomla.org/Adding_custom_fields_to_the_article_component](http://docs.joomla.org/Adding_custom_fields_to_the_article_component)

但是输出被包装在一个表输出中

```
<div class="rating"><table><tbody>
    <tr class="row0">
        <td>Texture</td>
        <td>Rough and Chuncky</td>
    </tr>
    <tr class="row1">
        <td>Temperatur</td>
        <td>10</td>
    </tr>
    <tr class="row0">
        <td>Taste</td>
        <td>Sweet and Sour</td>
    </tr>
</tbody></table></div> 
```

我怎样才能划分输出所以我的输出可以是这样的：

```
<div class="wrapper">
    <div class="div-texture-Title">Texture</div> 
    <div class="div-texture-content">Rough and Chuncky</div> 
    <div class="div-temperature-title">Temperatur</div> 
    <div class="div-temperature-content">10</div> 
    <div class="div-taste-title">Taste</div> 
    <div class="div-taste-content">Sweet and Sour</div> 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:25:04.377

您必须`onContentPrepare`根据您的要求更改功能。

试试这个-

```
public function onContentPrepare($context, &$article, &$params, $page = 0)
{
  if (!isset($article->rating) || !count($article->rating))
     return;

  // add extra css for table
  $doc = JFactory::getDocument();
  $doc->addStyleSheet(JURI::base(true).'/plugins/content/rating/rating/rating.css');   

  $output= '';
  foreach ($article->rating as $attr => $value) {
      $output .= '<div class="div-'.$attr.'-Title>'.$attr.'</div>';
      $output .= '<div class="div-'.$attr.'-content>'.$value.'</div>';
  }

  // wrap table in a classed <div>
  $suffix = $this->params->get('ratingclass_sfx', 'rating');
  $html = '<div class="'.$suffix.'">'.(string)$output .'</div>';

  $article->text = $html.$article->text;
} 
```

# android - Android相机闪光灯打开延迟

> ID：14170279
> 
> 赞同：2
> 
> 时间：2013-01-05T09:03:27.210
> 
> 标签：android, camera

我正在使用相机闪光灯闪烁，但是当我按下按钮让相机闪光灯闪烁但闪光灯在几毫秒后闪烁时，我希望闪光灯在按下按钮后立即闪烁？如何减少时间延迟。

这是我在单击按钮时开始闪烁的代码：

```
 cam = Camera.open();
                params = cam.getParameters();
                params.setFlashMode(Parameters.FLASH_MODE_TORCH);
                cam.setParameters(params);
                cam.startPreview(); 
```

# flume - 如何安装和配置 Apache Flume？

> ID：14170282
> 
> 赞同：9
> 
> 时间：2013-01-05T09:03:36.823
> 
> 标签：flume

我是 Apache Flume 的新手。我需要在 HDFS 集群环境之上安装水槽。我用谷歌搜索过，都说使用 cloudera 发行版，但我需要从源代码安装和配置。

那么任何人都可以建议我，从哪里开始以及如何自定义水槽代理和接收器服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T04:46:00.330

我刚刚在 Ubuntu 上安装了 Apache Flume 1.3。

您需要为您的操作系统下载二进制 zip，解压缩并创建一个类似于 Java 中的属性文件的配置文件。

代理的安装和运行是一个愚蠢/简单的过程，只需阅读[此内容](http://flume.apache.org/FlumeUserGuide.html#setup)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-04T13:06:09.787

安装步骤

```
#step1
goto http://flume.apache.org/download.html

#click following link
apache-flume-1.4.0-bin.tar.gz 
```

[http://apache.mesi.com.ar/flume/1.4.0/apache-flume-1.4.0-bin.tar.gz](http://apache.mesi.com.ar/flume/1.4.0/apache-flume-1.4.0-bin.tar.gz)

```
#Download apache-flume by double clicking on the above link

tar -xvzf   apache-flume-1.4.0-bin.tar.gz
mv apache-flume-1.4.0-bin.tar.gz flume
chown -R hduser:hadoop flume

#go to flume conf  path

../../flume/conf
vi  flume-env.sh.template

#mention  JAVA Path
#mantion flume Classpath 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T22:19:55.240

这是我整理的一个示例教程，它在 vagrant 环境中使用了 flume、apache、flask 和 kibana。

底部有一个视频可以提供更好的介绍：

[https://github.com/mross462/Flume-Elasticsearch](https://github.com/mross462/Flume-Elasticsearch)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T11:47:23.190

在**大数据大学**提供的**将数据迁移到 Hadoop**的课程中​​：http : [//bigdatauniversity.com/bdu-wp/bdu-course/moving-data-into-hadoop/](http://bigdatauniversity.com/bdu-wp/bdu-course/moving-data-into-hadoop/)教您介绍水槽和帮助您的实验室练习配置和运行水槽。

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-07T11:24:28.430

对于 CENT 操作系统

*step1 下载

```
[https://downloads.apache.org/flume/1.9.0/apache-flume-1.9.0-bin.tar.gz][1] 
```

*安装apache水槽“tar -xvf apache-flume-1.9.0-bin.tar.gz”

*移动“mv apache-flume-1.9.0-bin.tar.gz usr/local/flume”

*设置路径“vim /etc/profile”

“导出 FLUME_HOME=/usr/local/flume 导出 PATH=$PATH:$FLUME_HOME/bin”

*版本“​​flume-ng 版本”

*conf "usr/local/flume/conf" in flume-conf.properties 设置你的hadoop属性**

# vaadin - vaadin 在 XML 中创建 ui 的活动插件

> ID：14170285
> 
> 赞同：1
> 
> 时间：2013-01-05T09:04:35.243
> 
> 标签：vaadin

我基本上来自 vaadin，我尝试了 vaadin，它看起来很有希望，我发现了一些插件 clara、XMLUI 等

哪个是最好的，或者哪个类似于 zkoss 和 active，或者哪个是 vaadin 中最好的设计模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T07:59:00.047

The question is very old but maybe the following webinar concerning Clara can help others: [http://www.youtube.com/watch?v=GFS5gkq2AzQ](http://www.youtube.com/watch?v=GFS5gkq2AzQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:47:12.123

[克拉拉](https://vaadin.com/directory#addon/clara)稍微成熟一点。我建议试一试。

无论如何，任何基于 XML 的 UI 生成工具背后都有很多限制。因此，请遵循[PoC](http://en.wikipedia.org/wiki/Proof_of_concept)方法，以确保您的任务可以使用这些插件中的任何一个来解决。

# c++ - 未来的可组合性和 boost::wait_for_all

> ID：14170287
> 
> 赞同：8
> 
> 时间：2013-01-05T09:04:45.237
> 
> 标签：c++, multithreading, boost, c++11, future

我刚刚阅读了文章 ' [Futures Done Right](http://bartoszmilewski.com/2009/03/10/futures-done-right/) '，而 c++11 承诺所缺少的主要内容似乎是从现有的期货中创建复合期货

我现在正在查看[boost::wait_for_any的文档](http://www.boost.org/doc/libs/1_52_0/doc/html/thread/synchronization.html#thread.synchronization.futures.reference.wait_for_any)

但请考虑以下示例：

```
int calculate_the_answer_to_life_the_universe_and_everything()
{
    return 42;
}

int calculate_the_answer_to_death_and_anything_in_between()
{
    return 121;
}

boost::packaged_task<int> pt(calculate_the_answer_to_life_the_universe_and_everything);
boost:: future<int> fi=pt.get_future();
boost::packaged_task<int> pt2(calculate_the_answer_to_death_and_anything_in_between);
boost:: future<int> fi2=pt2.get_future();

....

int calculate_the_oscillation_of_barzoom(boost::future<int>& a, boost::future<int>& b)
{
    boost::wait_for_all(a,b);
    return a.get() + b.get();
}

boost::packaged_task<int> pt_composite(boost::bind(calculate_the_oscillation_of_barzoom, fi , fi2));
boost:: future<int> fi_composite=pt_composite.get_future(); 
```

这种可组合性方法有什么问题？这是实现可组合性的有效方法吗？我们是否需要一些优雅的句法来超越这种模式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T18:00:41.040

`when_any`并且`when_all`是构成期货的完全有效的方法。它们都对应于并行组合，其中组合操作等待一个或所有组合操作。

我们还需要顺序组合（Boost.Thread 中没有）。例如，这可能是一个`future<T>::then`函数，它允许您将使用未来值的操作排队并在未来准备好时运行。可以自己实现，但需要权衡效率。[Herb Sutter 在他最近的 Channel9 视频](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Herb-Sutter-Concurrency-and-Parallelism)中谈到了这一点。

[N3428](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3428.pdf)是将这些特性（以及更多特性）添加到 C++ 标准库的提案草案。它们都是库功能，不会向语言添加任何新语法。此外，[N3328](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3328.pdf)提议为将在内部使用的*可恢复函数*（如在 C# 中使用`async`/ ）添加语法。`await``future<T>::then`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-08T06:10:27.937

[*edulcorant*](https://en.wiktionary.org/wiki/edulcorant)这个词的使用要点。:)

您的示例代码的问题是您将所有内容打包成任务，但您从未*安排*这些任务执行！

```
int calculate_the_answer_to_life() { ... }

int calculate_the_answer_to_death() { ... }

std::packaged_task<int()> pt(calculate_the_answer_to_life);
std::future<int> fi = pt.get_future();
std::packaged_task<int()> pt2(calculate_the_answer_to_death);
std::future<int> fi2 = pt2.get_future();

int calculate_barzoom(std::future<int>& a, std::future<int>& b)
{
    boost::wait_for_all(a, b);
    return a.get() + b.get();
}

std::packaged_task<int()> pt_composite([]{ return calculate_barzoom(fi, fi2); });
std::future<int> fi_composite = pt_composite.get_future(); 
```

如果此时我写

```
pt_composite();
int result = fi_composite.get(); 
```

***我的程序将永远阻塞。***它永远不会完成，因为`pt_composite`在 上`calculate_barzoom`被阻止，在 上和`wait_for_all`上都被阻止，在或分别执行之前，这两个都不会完成而且没有人会执行它们，因为我的程序被阻止了！`fi``fi2``pt``pt2`

你可能是想让我写这样的东西：

```
std::async(pt);
std::async(pt2);
std::async(pt_composite);
int result = fi_composite.get(); 
```

*这*将起作用。但它的效率极低——我们产生了三个工作线程（通过三个调用`async`），以执行两个线程的工作。第三个线程 - 正在运行的线程 -`pt_composite`将立即生成，然后*就坐在那里睡着*直到`pt`完成`pt2`运行。这比*spin*好，但比*不存在*要糟糕得多：这意味着我们的线程池的工作线程比它应该有的少一个。在一个看似合理的线程池实现中，每个 CPU 内核只有一个线程，并且一直有很多任务进入，这意味着我们有一个 CPU 内核处于空闲状态，因为工作线程本来*就是*要在那个内核上运行，当前被阻塞在里面`wait_for_all`。

我们*想要*做的是声明性地声明我们的意图：

```
int calculate_the_answer_to_life() { ... }

int calculate_the_answer_to_death() { ... }

std::future<int> fi = std::async(calculate_the_answer_to_life);
std::future<int> fi2 = std::async(calculate_the_answer_to_death);
std::future<int> fi_composite = std::when_all(fi, fi2).then([](auto a, auto b) {
    assert(a.is_ready() && b.is_ready());
    return a.get() + b.get();
});

int result = fi_composite.get(); 
```

然后让库和调度程序一起工作以做正确的事情：不要产生任何不能立即继续其任务的工作线程。如果最终用户甚至必须编写显式休眠、等待或阻塞的单行代码，那么肯定会损失一些性能。

换句话说：***在它的时间之前不产生任何工作线程。***

* * *

显然，在没有库支持的*情况*下，可以在标准 C++ 中完成所有这些工作；这就是库本身的实现方式！但是从头开始实施是一个巨大的痛苦，有许多微妙的陷阱；所以这就是为什么图书馆支持似乎即将到来是一件好事。

[Roshan Shariff 的回答](https://stackoverflow.com/a/14174701/1424877)中提到的 ISO 提案[N3428](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3428.pdf)已更新为[N3857](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3857.pdf)，[N3865](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3865.pdf)提供了更多便利功能。

# php - 当一列为空时如何连接两个表？

> ID：14170293
> 
> 赞同：-1
> 
> 时间：2013-01-05T09:06:14.867
> 
> 标签：php, mysql, codeigniter, activerecord

我有两张桌子`t1`和`t2`.

`t1`有 3 列`a`, `b`,`c`有`t2`2 列`x`, `y`.

我想加入这两个表`t2.x=t1.c`。它对我有用，虽然真正的问题是什么时候`t1.c`出现`null`。我该如何解决这个问题。我正在使用 Codeigniter Active Record 类和 mysql。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T09:11:00.867

利用[`LEFT JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)

像这样：

```
SELECT * FROM t2 
    LEFT JOIN t1
    ON t2.x = t1.c 
```

这将显示 t2 的记录，即使 t1.c 是`NULL`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T09:12:31.747

在 Code Igniter 中 - 您需要指定 join 函数的第三个参数。例子：

`$this->db->join('t2', 't1.x = t2.c', 'left');`

# c - 在 c 中实现图的数据结构的想法

> ID：14170295
> 
> 赞同：-2
> 
> 时间：2013-01-05T09:06:58.030
> 
> 标签：c, data-structures, linked-list

我想在 C 中实现一个图。我对如何存储每个节点感到困惑。我首先考虑使用链表，但是如何存储连接到一个节点的下一个节点。

任何想法我应该使用什么数据结构以及我应该如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:11:48.213

有一些众所周知的方法可以做到这一点。

一种是使用大小为 [n][n] 的二维数组，其中 n 是节点数。如果存在从 a 到 b 的链接，则设置 graph[a][b]= 1。这种方法通常速度很快，但会占用大量内存，尤其是在没有那么多链接和节点的情况下。

另一种方法是创建所有节点的列表（或数组），并将每个节点的内容设置为指向动态数组或链接到的节点列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:13:50.297

如果您的图形稀疏，则有用的数据结构是[邻接列表](http://en.wikipedia.org/wiki/Adjacency_list)（链表的链表），即顶点之间的连接（边）很少。

如果您的图很[密集](http://en.wikipedia.org/wiki/Dense_graph)，则使用[邻接矩阵](http://en.wikipedia.org/wiki/Adjacency_matrix)(nxn) 二维数组，即您的顶点之间有很多边。

# c# - 如何在数据表上设置各种级别的 ROW INDEX？

> ID：14170297
> 
> 赞同：0
> 
> 时间：2013-01-05T09:07:31.610
> 
> 标签：c#

我有一个带有以下示例数据的 C# 数据表，

![在此处输入图像描述](../Images/9276215d4fafcefc5bafcea231852881.png)

现在，我正在尝试在 3 个不同级别的“类别”（“Grand_Total”、“Overall_Total”和“PROJ_TOTAL”）上添加 3 个更多列作为行号（以降序从零开始），这是我想要实现的, ![在此处输入图像描述](../Images/b2c706fcb52a890ce355f02e19524821.png)

我只能在数据表逻辑中添加一列“G_T_I”和总行数，但无法弄清楚破解其他两列“O_T_I”和“P_T_I”的逻辑。请帮助/建议？

```
class Program
{
    static void Main(string[] args)
    {
        // Get the DataTable.
        DataTable table = GetTable();

        //get new data table 
        DataTable newTable = GetNewTable();

        for(int i = table.Rows.Count - 1; i > -1; i--)
        {
            var gTotalIndex = (table.Rows.Count - i) - 1;
            newTable.Rows.Add(i, table.Rows[gTotalIndex]["Category"], table.Rows[gTotalIndex]["Name"], table.Rows[gTotalIndex]["PROJID"], table.Rows[gTotalIndex]["Type"], table.Rows[gTotalIndex]["Amt"]);
        }

    }

    static DataTable GetNewTable()
    {
        DataTable table = new DataTable();
        table.Columns.Add("G_T_I", typeof(int));
        table.Columns.Add("Category", typeof(string));
        table.Columns.Add("Name", typeof(string));
        table.Columns.Add("PROJID", typeof(string));
        table.Columns.Add("Type", typeof(string));
        table.Columns.Add("Amt", typeof(decimal));
        return table;
    }

    static DataTable GetTable()
    {
        DataTable table = new DataTable();
        table.Columns.Add("Category", typeof(string));
        table.Columns.Add("Name", typeof(string));
        table.Columns.Add("PROJID", typeof(string));
        table.Columns.Add("Type", typeof(string));
        table.Columns.Add("Amt", typeof(decimal));

        table.Rows.Add("NEW_PROJ", "ABC", "100", "Acost", 10);
        table.Rows.Add("SAME_PROJ", "", "", "Bcost", 20);
        table.Rows.Add("PROJ_TOTAL", "", "100 Total", "", 30);
        table.Rows.Add("NEW_PROJ", "", "200", "Acost", 40);
        table.Rows.Add("PROJ_TOTAL", "", "200 Total", "", 40);
        table.Rows.Add("OVERALL_TOTAL", "ABC Total", "", "", 70);
        table.Rows.Add("NEW_PROJ", "PQR", "300", "Acost", 10);
        table.Rows.Add("SAME_PROJ", "", "", "Bcost", 10);
        table.Rows.Add("PROJ_TOTAL", "", "300 Total", "", 20);
        table.Rows.Add("OVERALL_TOTAL", "PQR Total", "", "", 20);
        table.Rows.Add("GRAND_TOTAL", "", "", "", 90);

        return table;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:42:55.697

尝试这个 ：

```
 using System;
using System.Collections.Generic;
using System.Data;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            // Get the DataTable.
            DataTable table = GetTable();

            //get new data table 
            DataTable newTable = GetNewTable();

            for (int i = table.Rows.Count - 1; i > -1; i--)
            {
                var gTotalIndex = (table.Rows.Count - i) - 1;
                newTable.Rows.Add(i,null,null, table.Rows[gTotalIndex]["Category"], table.Rows[gTotalIndex]["Name"], table.Rows[gTotalIndex]["PROJID"], table.Rows[gTotalIndex]["Type"], table.Rows[gTotalIndex]["Amt"]);
            }

            var oTotal = 0;
            for (int i = newTable.Rows.Count - 1; i > -1; i--)
            {
                if (newTable.Rows[i]["Category"].ToString() == "GRAND_TOTAL")
                    continue;
                if (newTable.Rows[i]["Category"].ToString() == "OVERALL_TOTAL")
                {
                    oTotal = 0;
                    newTable.Rows[i]["O_T_I"] = oTotal;
                    oTotal++;
                }
                else
                {
                    newTable.Rows[i]["O_T_I"] = oTotal;
                    oTotal++;
                }
            }

            var pTotal = 0;
            for (int i = newTable.Rows.Count - 1; i > -1; i--)
            {
                if (newTable.Rows[i]["Category"].ToString() == "GRAND_TOTAL" || newTable.Rows[i]["Category"].ToString() == "OVERALL_TOTAL")
                    continue;
                if (newTable.Rows[i]["Category"].ToString() == "PROJ_TOTAL")
                {
                    pTotal = 0;
                    newTable.Rows[i]["P_T_I"] = pTotal;
                    pTotal++;
                }
                else
                {
                    newTable.Rows[i]["P_T_I"] = pTotal;
                    pTotal++;
                }
            }

        }

        static DataTable GetNewTable()
        {
            DataTable table = new DataTable();
            table.Columns.Add("G_T_I", typeof(int));
            table.Columns.Add("O_T_I", typeof(int));
            table.Columns.Add("P_T_I", typeof(int));
            table.Columns.Add("Category", typeof(string));
            table.Columns.Add("Name", typeof(string));
            table.Columns.Add("PROJID", typeof(string));
            table.Columns.Add("Type", typeof(string));
            table.Columns.Add("Amt", typeof(decimal));
            return table;
        }

        static DataTable GetTable()
        {
            DataTable table = new DataTable();
            table.Columns.Add("Category", typeof(string));
            table.Columns.Add("Name", typeof(string));
            table.Columns.Add("PROJID", typeof(string));
            table.Columns.Add("Type", typeof(string));
            table.Columns.Add("Amt", typeof(decimal));

            table.Rows.Add("NEW_PROJ", "ABC", "100", "Acost", 10);
            table.Rows.Add("SAME_PROJ", "", "", "Bcost", 20);
            table.Rows.Add("PROJ_TOTAL", "", "100 Total", "", 30);
            table.Rows.Add("NEW_PROJ", "", "200", "Acost", 40);
            table.Rows.Add("PROJ_TOTAL", "", "200 Total", "", 40);
            table.Rows.Add("OVERALL_TOTAL", "ABC Total", "", "", 70);
            table.Rows.Add("NEW_PROJ", "PQR", "300", "Acost", 10);
            table.Rows.Add("SAME_PROJ", "", "", "Bcost", 10);
            table.Rows.Add("PROJ_TOTAL", "", "300 Total", "", 20);
            table.Rows.Add("OVERALL_TOTAL", "PQR Total", "", "", 20);
            table.Rows.Add("GRAND_TOTAL", "", "", "", 90);

            return table;
        }
    }
} 
```

# backbone.js - 如何访问 Handlebar 模板中的主干模型属性

> ID：14170298
> 
> 赞同：10
> 
> 时间：2013-01-05T09:07:39.603
> 
> 标签：backbone.js, handlebars.js

如果有一个名为的主干模型`Person`，它具有属性`firstName`，`lastName`。通常，访问它就像`person.get('firstName')`和`person.get('lastName')`。

我如何在 Handlebar 模板中做类似的事情，其中​​ a`person`已暴露于上下文中。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-05T09:16:14.167

渲染 Handlebars 模板时，需要传入模型的属性。推荐的方法是调用，它返回模型内部哈希`Model.toJSON`的副本。`attributes`

```
var template = Handlebars.compile(templateHtml);
var rendered = template({ person: model.toJSON() }); 
```

在模板中，您可以通过属性名称访问上下文。

```
<span>{{person.firstName}} {{person.lastName}}</span> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T00:22:35.737

实际上，我有很多 .toJSON 的地方，所以我开发了一个 Handlebars 修改来处理主干模型：

[https://gist.github.com/4710958](https://gist.github.com/4710958)

它将检查一个值是否是 Backbone.Model 的实例，如果是，它将调用 .get() 方法。

Backbone.Model 应该是全局的才能使用它。

```
{{ user.address.street }} 
```

将被解析为：

```
user.get("adress").street 
```

# linux - 此 makefile 语句中的符号 ` 或 \` 是什么意思：export SRVHOME=`readlink -f \`dirname $0\`/../`

> ID：14170300
> 
> 赞同：0
> 
> 时间：2013-01-05T09:08:08.160
> 
> 标签：linux, shell, makefile, command

```
export SRVHOME=`readlink -f \`dirname $0\`/../` 
```

我知道它导出一个目录变量。但是命令周围的符号“\`”或“`”是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T09:22:31.810

无论你在两个 ` 字符之间放置什么，都是在你的 shell 的一个分支上运行的命令。在这种情况下，命令本身包含另一对 ` 字符 - 因此，它们必须被转义，这是通过在前面添加一个`\`字符来完成的。

另一个例子：

```
$ set -x
$ date -d @`echo \`date +%s\``
+++ date +%s
++ echo 1357377825
+ date -d @1357377825
Sat Jan  5 11:23:45 EET 2013 
```

*注意*：`set -x`显示命令的所有步骤。有助于调试。

在**bash**中，您可以运行几个封装的命令`$(command)`：

```
$ date -d @$(echo $(date +%s))
+++ date +%s
++ echo 1357378055
+ date -d @1357378055
Sat Jan  5 11:27:35 EET 2013 
```

# ruby-on-rails - 如何在rails中定义has_and_belongs_to关联

> ID：14170303
> 
> 赞同：1
> 
> 时间：2013-01-05T09:08:37.113
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我正在关注这个视频[http://railscasts.com/episodes/258-token-fields-revised](http://railscasts.com/episodes/258-token-fields-revised)我也成功地实现了这个。但现在我正在使用命名空间。我在资产文件夹内的文件夹员工中有借贷控制器。这是我的借贷控制器模型

```
class Employee::Asset::Lend
  include Mongoid::Document
  include Mongoid::Timestamps
  field :name, type: String
  field :text, type: String
  field :date
  field :asset_tokens
  field :user_id, type: String
  has_and_belongs_to_many :assets
  belongs_to :tags
def asset_tokens=(tokens)
 self.asset_ids = Asset.ids_from_tokens(tokens)
 end
end 
```

现在我有另一个模型资产。在那里我必须定义拥有和属于这个借出模型我也这样做了

```
class Asset
  include Mongoid::Document
  field :name, type: String
  field :description, type: String
  field :serial_number, type: String
  field :status, type: Integer
  field :tag_tokens
  field :quantity, type: Integer
  validates_presence_of :name 
  validates :serial_number,:uniqueness => true

  has_and_belongs_to_many :employee_asset_lends
  has_and_belongs_to_many :tags

  def self.tokens(query)
   assets = where(name: /#{Regexp.escape(query)}/i)

  end 
```

借出控制器的表格是

```
<%= f.label :asset_tokens, "Assets" %>
  <%= f.text_field :asset_tokens, data: {load: @employee_asset_lend.assets}%><br>
  <%= f.input :date,:input_html => { :class => "dp1"},:label=> "Lend Date"%> 
```

在lend.js.coffee的coffescript文件中

```
jQuery ->
  $('#employee_asset_lend_asset_tokens').tokenInput '/assets.json'
    theme: 'facebook'
    prePopulate: $('#employee_asset_lend_asset_tokens').data('load') 
```

但它给出了错误`uninitialized constant EmployeeAssetLend from asset views.` ，从借出的角度来看，它给出了像`undefined method`all_of' for Employee::Asset:Module` 的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T09:27:23.933

[请检查制作HABTM-has_and_belongs_to_many 关联](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)的正确方法以获取更多详细信息

# postgresql - 在 postgresql 中编写库函数

> ID：14170307
> 
> 赞同：0
> 
> 时间：2013-01-05T09:09:16.147
> 
> 标签：postgresql

我想在 postgresql 中编写库函数。是否可以在.Net 中编写这样的函数，或者我应该使用像 C 这样的特殊语言来做到这一点。你能给我看一个很好的例子或文章吗？太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:39:20.773

根据[PostgreSQL 过程语言矩阵](https://wiki.postgresql.org/wiki/PL_Matrix)，不支持在 .NET 中编写后端函数。但也许那里列出的其他语言中的一种会适合您；它不一定是 C。

# javascript - Javascript 更改元值

> ID：14170308
> 
> 赞同：1
> 
> 时间：2013-01-05T09:09:21.700
> 
> 标签：javascript, meta

我目前正在使用 google plus 按钮。google plus 返回的值基于我的 head 标签上 meta 中包含的内容

我有一个要使用 g+1 提交的列表，但它在标签下，这就是为什么我无法更新将要在 google plus 上发布的内容

这些是我的代码

```
<meta itemprop="name" content="<?=$content?>">
<meta itemprop="description" content="<?=$description?>">
<meta itemprop="image" content="http://mysite/image.png"> 
```

这些线下面是

```
 <div> content to submit by g+1
        <div class='g-plusone' data-size='medium' data-annotation='none'></div>
    </div>

    <div> content to submit by g+1
        <div class='g-plusone' data-size='medium' data-annotation='none'></div>
    </div>

    <div> content to submit by g+1
        <div class='g-plusone' data-size='medium' data-annotation='none'></div>
    </div>

 etc. 
```

我如何使用 javascript，所以每当鼠标悬停在 google plus 按钮上时，我可以更新我的 meta 上的值是什么？

喜欢

```
<div onmouseover='change_meta(x)' class='g-plusone' data-size='medium' data-annotation='none' ></div> 
```

我已经知道如何在 javascript 函数上传递参数。我想知道的是，我需要在该函数中包含什么，以便我可以更新元值。

```
<script language="JavaScript">
function change_meta(x) {
   what do i need to do here?
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T09:17:04.353

您在浏览器上更改的任何元标记都不会被从您的服务器读取 html 的任何人拾取。您需要更改服务器上的元标记以使其生效，除非相关站点使用实际读取标记当前内容的小书签。您使用的格式似乎是谷歌专有的[微数据格式](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=176035)

也就是说，如果您需要更改标签，您可以这样做

```
var metas = document.getElementsByTagName("meta"); 
```

并循环查找您想要的标签：

```
for (var i=0; i<metas.length; i++) {  
  if (metas[i].getAttribute("itemprop") && 
      metas[i].getAttribute("itemprop")==="description") {
    metas[i].setAttribute("content","new description");
  }
} 
```

# c# - 下拉列表不允许正确选择项目

> ID：14170309
> 
> 赞同：0
> 
> 时间：2013-01-05T09:09:29.580
> 
> 标签：c#, asp.net, drop-down-menu

我正在 ASP.NET WebForms 中制作一个项目。虽然我已经做了很多次，但是这次下拉列表让我很困扰。

我从数据库中获取项目，然后使用 FOR 循环将它们一一添加到我的下拉列表中。这很好用。但问题是我无法从列表中舒适地选择一个项目，每当我尝试从下拉列表中选择一个项目时，它会将选择捕捉到第一个元素，因此很难选择所需的项目。

我怎么能解决这个问题？

假设我将光标移到列表中的第 9 项上，然后它也交替选择第 1 项和第 9 项，以至于我看到它们都被选中。

代码隐藏

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        DropDownList1.Items.Clear();

        con.ConnectionString = ConfigurationManager.ConnectionStrings["familyConnectionString"].ConnectionString;
        con.Open();

        adp = new SqlDataAdapter("select distinct family_head from family", con);
        DataSet ds = new DataSet();
        adp.Fill(ds, "family");
        con.Close();

        for (int i = 0; i < ds.Tables["family"].Rows.Count; i++)
            DropDownList1.Items.Add(ds.Tables["family"].Rows[i][0].ToString());
    }
} 
```

ASPX

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:DropDownList ID="DropDownList1" runat="server" Width="150px">
    </asp:DropDownList>
    &nbsp;&nbsp;&nbsp;&nbsp;
    <asp:DropDownList ID="DropDownList2" runat="server" Width="150px">
    </asp:DropDownList>
    &nbsp;&nbsp;&nbsp;&nbsp;

    <asp:Button ID="Button1" runat="server" Height="30px" onclick="Button1_Click" 
        Text="Submit" Width="145px" BackColor="#465767" ForeColor="White" />

    <asp:RoundedCornersExtender ID="Button1_RoundedCornersExtender" runat="server" 
        Enabled="True" TargetControlID="Button1" Corners="All" Radius="10">
    </asp:RoundedCornersExtender>
    <br />
    <br />
    <br />
</asp:Content> 
```

CSS 关键帧动画在页面背景中工作，这可能是原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:45:33.410

对于 WebControl 的数据绑定如何工作，似乎存在某种混淆。最好的参考是：http: [//msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

假设显示了 DropDownList1 的所有绑定代码：

```
DropDownList1.Items.Clear(); 
```

不应该是必需的，因为这些项目不应该在每个 PostBack 中持续存在。（至少我假设，因为如果 DataSource 没有再次绑定，则在每次 PostBack 之后所有项目都将丢失）。

如果要使用 DropDownList，则 DropDownList 需要在每个 PostBack 上都有项目。您正在使用

```
if (!Page.IsPostBack) 
```

这意味着，如果您有 PostBack，则不会再次绑定项目。在上面发布的链接中，您可以看到控件在 LoadEvent 期间设置其属性（例如在单击按钮之前选择了哪个项目），这意味着需要在生命周期的早期绑定项目，例如在 OnInit 期间。

尝试这样的事情：

```
protected void BindDropDownList1()
{
 con.ConnectionString = ConfigurationManager.ConnectionStrings["familyConnectionString"].ConnectionString;
 con.Open();
 adp = new SqlDataAdapter("select distinct family_head from family", con);
 DataSet ds = new DataSet();
 adp.Fill(ds, "family");
 con.Close();
 for (int i = 0; i < ds.Tables["family"].Rows.Count; i++)
   DropDownList1.Items.Add(ds.Tables["family"].Rows[i][0].ToString());
}

    protected override void OnInit(EventArgs e)
    {
       this.BindDropDownList1();
       base.OnInit(e);
    } 
```

另一个建议是 DropDownList 的 DataSource 属性，而不是`DropDownList1.Items.Add`. 如果使用这种方式，则需要设置 DropDownList 的 DataKeyValue 和 DataKeyMember 属性：

```
protected void BindDropDownList1()
{
 con.ConnectionString = ConfigurationManager.ConnectionStrings["familyConnectionString"].ConnectionString;
 con.Open();
 adp = new SqlDataAdapter("select distinct family_head from family", con);
 DataSet ds = new DataSet();
 adp.Fill(ds, "family");
 con.Close();
 DropDownList1.DataSource = ds;
 DropDownList1.DataBind();
} 
```

**编辑**：
我想我发现了你的错误。您正在使用 AjaxControlToolKit 中的控件，但仍在使用`ScriptManager`. 大约 2 年来，来自 AjaxControlToolKit 的控件需要`ToolkitScriptManager`. 将 替换`ScriptManager`为`ToolkitScriptManager`。

# iphone - 从 mfmailcomposer 发送附件时无法查看邮件附件中的数据

> ID：14170311
> 
> 赞同：0
> 
> 时间：2013-01-05T09:09:55.400
> 
> 标签：iphone, objective-c, ios, ios5, mfmailcomposeviewcontroller

在`MFMailComposer`我附上一个附件。我将该附件发送到另一个邮件地址。

在目标邮件中，附件显示的是下载选项，而不是查看选项。实际上，该附件来自链接。我不知道附件是`pdf`或`word`文件或任何其他。我需要帮助，该怎么办？

我正在使用这段代码：

```
NSURL *url = [[NSURL alloc] initWithString:self.fileString];
NSData *attachments = [NSData dataWithContentsOfURL:url];
[mailView addAttachmentData:attachments mimeType:@"application/pdf" fileName:self.useridString]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:48:16.630

mimetype 的更改可能会对您有所帮助。

```
[mailView addAttachmentData:attachments mimeType:@"text/pdf" fileName:self.useridString]; 
```

# ios - 为什么将 UILabel 设置为完全透明会丢失点击手势？

> ID：14170329
> 
> 赞同：3
> 
> 时间：2013-01-05T09:13:23.523
> 
> 标签：ios, uikit, uigesturerecognizer, uiviewanimation

我无法弄清楚这一点，我认为[这](https://stackoverflow.com/questions/11142176/view-transparency-and-gesture-handling)也不能真正解释它。

我有一个`UILabel`可以被用户点击来隐藏或显示它，设置如下：

```
self.numberLabel.userInteractionEnabled = YES;
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] 
    initWithTarget:self action:@selector(hideOrShowNumber)];
[self.numberLabel addGestureRecognizer:tapGesture]; 
```

我想通过`alpha`在`UILabel`. 但是，如果我将 alpha 值设置为`0.0f`，则标签不再接受点击，因此即使用户可以隐藏标签，她也无法再显示了！

我的解决方法是这样的：

隐藏标签时： - 将 alpha 值设置为 0.0f。- 将标签的文本颜色设置为黑色（由于背景为黑色，使其不可见） - 将 alpha 重置为 1.0f。

显示标签时： - 将 alpha 设置为 0.0f（因为隐藏标签时它保留在 1.0f）。- 将文本颜色设置为黑色以外的其他颜色（取决于游戏状态）。- 将 alpha 值设置为 1.0f。

代码看起来像这样（包含一些状态变量，但是`self.numberLabel`是对 的引用`UILabel`）：

```
NSTimeInterval duration = 0.6f;

if (self.numberIsVisible) {
    [UIView animateWithDuration:duration
                     animations:^{
                         self.numberLabel.alpha = 0.0f;
                     }
                     completion:^(BOOL done) {
                         self.numberLabel.textColor = [UIColor blackColor];
                         self.numberLabel.alpha = 1.0f;
                     }
    ];
    self.numberIsVisible = NO;
}
else {
    UIColor *rightColor = [UIColor whiteColor];

    if ([GameState sharedGameState].haveMatch) {
        rightColor = [UIColor colorWithRed:0.0/255.0 green:127.0/255.0 blue:255.0/255.0 alpha:1.0];
    }

    self.numberLabel.alpha = 0.0f;
    self.numberLabel.textColor = rightColor;

    [UIView animateWithDuration:duration
                     animations:^{
                         self.numberLabel.alpha = 1.0f;
                     }
    ];

    self.numberIsVisible = YES;
} 
```

它有效，但有点笨拙。

那么问题来了，*为什么*设置透明度`UILabel`会使其失去用户交互呢？这是设计使然吗，是否记录在某处？`UIGestureRecognizer`我在文档中找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T09:18:19.903

来自官方[文档](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MultitouchEvents/MultitouchEvents.html)（**Regulating Touch Event Delivery 部分**）

> 关闭触摸事件的传递。默认情况下，视图接收触摸事件，但您可以将其 userInteractionEnabled 属性设置为 NO 以关闭触摸事件的传递。**如果视图是隐藏的或者是透明的，它也不会接收到这些事件**。

在视图上具有完全透明度（alpha = 0）被认为与隐藏视图相似，因此在这种情况下没有理由处理用户交互。您可以尝试使用几乎透明的`UILabel`方式。一个 alpha`0.1`似乎是极限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T09:28:31.653

似乎任何具有 < 0.1f 的 alpha 的 UIView 的行为都好像 hidden 属性设置为 YES。换句话说，由于你的视图是透明的，它不会接收到触摸事件。看到这个[帖子](https://stackoverflow.com/questions/11011974/uiview-background-color-affects-touches-in-ios-5)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-14T04:51:05.690

至少在 iOS 8 中，您可以将 alpha 设置为 0.01（不再是限制 0.1）并且将触发触摸事件。如果为 0.0 则不会触发触摸事件。

更新：我在 iOS 8.2 和更早的版本中发现，限制是 0.001960785。非常接近完全透明。也许这个数字可能会更小，我没有更进一步的小数位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T09:26:45.493

显然这种行为曾经被记录在案，但我在当前文档中找不到它。

请参阅此答案：[当 alpha 设置为零时，为什么 touchesBegan 不会在 UIViews 上触发？](https://stackoverflow.com/questions/2215834/iphone-why-doesnt-touchesbegan-fire-on-uiviews-when-alpha-is-set-to-zero)

“默认情况下，视图接收触摸事件，但您可以将其 userInteractionEnabled 属性设置为 NO 以关闭事件传递。如果视图隐藏或透明，视图也不会接收事件。”

没有理由`UILabel`您隐藏的视图必须与接收触摸的视图相同。一个更简单的解决方法是：

1.  在您希望用户能够点击的地方添加一个包装器 UIView
2.  将手势识别器添加到包装视图
3.  使手势识别器的动作只是隐藏或显示标签

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T21:52:36.340

按照设计，当 alpha 设置为 0 时，视图不会收到触摸。您可以尝试将 alpha 设置为 0.1。检查苹果链接[https://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MultitouchEvents/MultitouchEvents.html](https://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MultitouchEvents/MultitouchEvents.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-09T15:48:56.743

我通过创建一个包含空格的 UILabel 解决了这个问题，然后根据需要使用自动布局约束来增长/缩小。

# android - android开发者如何选择目录来存储他们的文件

> ID：14170330
> 
> 赞同：0
> 
> 时间：2013-01-05T09:13:41.480
> 
> 标签：android

我想在开发 android 应用程序时存储一些文件。有两种方式来存储文件：使用内部目录或使用外部目录。

就我而言，如果开发人员不希望他们的用户或其他应用程序可以访问这些文件，则该文件应该存储在内部目录中。如果开发人员确实希望用户或其他应用程序可以访问这些文件，则该文件将存储在外部目录中。

这是我的问题：

选择在外部目录中存储文件时，我应该将文件的类型分类并将其存储在不同的目录中，如“下载”，“电影”，“”图片“...或为我的应用程序制作单个目录并存储所有我的文件在那个目录中。

作为一个安卓手机用户，我不喜欢第二种解决方案。所以我想知道为什么这么多应用程序（例如 Evernote）选择在我的外部目录“/sdcard”中创建一个目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:26:52.063

我会说如果用户或其他应用程序感兴趣的文件将其存储在特定类型的目录中。

第二种方法，每个应用程序一个目录，可用于应用程序私有的文件。许多设备的外部存储空间比内部存储空间多。因此，应用程序可以选择将其文件放在那里，即使它们本质上是内部的。

# sql - 查询每个人最近参加的活动

> ID：14170334
> 
> 赞同：3
> 
> 时间：2013-01-05T09:15:04.230
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我有一个名为 CampRegistration 的表，其结构如下：

```
[EID] INT, [CampName] VARCHAR(100), [StartDt] DATETIME 
```

EID 是参加营地的人的标识符。我希望选择 CampRegistration 表中每个人在给定日期之前参加的最后一个营地。

这是我的第一次尝试：

```
@DECLARE @currentCampDt DATETIME = '2012-8-4';
SELECT [EID], [CampName], MAX([StartDt]) [StartDt]
FROM [CampRegistration]
WHERE [StartDt] < @currentCampDt 
GROUP BY [EID],[CampName]
order by [EID] 
```

这里的问题是，如果有人参加了多个不同名称的营地，我会得到那个人的多个结果（每个营地名称的最后参加者）。我只希望为每个人找回一个记录，他们参加的任何名字的最后一个营地。我最终确实需要为每条记录（EID、CampName 和营地的 StartDt）获取这三条信息，所以我不确定我是否真的可以从`Group By`.

我正在使用 SQL Server 2012，非常感谢有关如何实现此类查询结果的任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T09:24:06.427

一种方法是使用 CTE（通用表表达式）。

使用此 CTE，您可以按某些标准（即您的）对数据进行分区，`EID`并让 SQL Server 为每个“分区”从 1 开始为您的所有行编号，并按某些标准排序。

所以尝试这样的事情：

```
;WITH CampEvents AS
(
   SELECT 
       EID, CampName, StartDt,
       RowNum = ROW_NUMBER() OVER(PARTITION BY EID ORDER BY StartDt DESC)
   FROM 
       dbo.CampRegistration
)
SELECT 
   EID, CampName, StartDt
FROM 
   CampEvents
WHERE
   RowNum = 1 
```

在这里，我只为每个“分区”（即每个`EID`）选择“第一个”条目 - 按降序排序`StartDt`- 所以最新、最近的事件有`RowNum = 1`.

这是否接近你正在寻找的东西？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T09:23:58.630

这不会很快，但会做到：

```
@DECLARE @currentCampDt DATETIME = '2012-8-4';

SELECT o.[EID], o.[CampName], o.[StartDt]
FROM [CampRegistration] o
WHERE o.[StartDt] = ( 
                      SELECT MAX(i.[StartDt]) 
                      FROM [CampRegistration] i WHERE i.[StartDt] < @currentCampDt
                      AND
                      i.[EID] = o.[EID]
                    )
order by o.[EID] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T09:23:18.567

你可以这样做：

```
WITH LastCampsAttended
As
(
  SELECT *,
    ROW_NUMBER() OVER(PARTITION BY EID ORDER BY StartDt DESC) AS rownum
  FROM CampRegistration
  WHERE [StartDt] < @currentCampDt 
)
SELECT 
  EID,
  CampName,
  StartDt
FROM LastCampsAttended
WHERE rownum = 1; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!6/d1a3f/2)

**或者：**

```
SELECT
  camps.*
FROM CampRegistration camps
INNER JOIN 
(
  SELECT EID, MAX(StartDt) LatestDate
  FROM CampRegistration
  GROUP BY EID
) LatestCamps  ON camps.EID = LatestCamps.EID
              AND camps.StartDt = LatestCamps.LatestDate
WHERE camps.StartDt < @currentCampDt ; 
```

## [更新的 SQL 小提琴演示](http://sqlfiddle.com/#!6/d1a3f/3)

# django - mod_wsgi 和多个项目

> ID：14170337
> 
> 赞同：5
> 
> 时间：2013-01-05T09:15:32.040
> 
> 标签：django, apache, mod-wsgi

在这里扯我的头发，试图弄清楚为什么我的两个 django 项目没有单独提供服务......似乎首先访问的静态文件成为两个项目的事实上的静态文件，或者类似效果的东西。

我正在尝试通过同一个 IP 地址的两个域名为两个项目（实际上是同一原始项目的不同版本 - 具有不同的数据库和不同的物理位置）提供服务。最初我在多个 IP 地址（按端口区分）上尝试了虚拟主机，但失败了。不幸的是 - 我在使用具有不同域名的虚拟主机时遇到了完全相同的问题。

Apache http.conf 的虚拟主机部分如下：

```
WSGIApplicationGroup %{GLOBAL}

Listen 80
NameVirtualHost *:80

<VirtualHost *:80>
ServerAdmin shane.brown@gmail.com
ServerName www.toastprojects.tk
WSGIScriptAlias / "C:/Python27/sites/Adaptwater/adaptwater/wsgi.py"
Alias /static/ "C:/Python27/sites/Adaptwater/static/"
</VirtualHost>

<Directory "C:/Python27/sites/Adaptwater/static/">
Order deny,allow
Allow from all
</Directory>

<Directory "C:/Python27/sites/Adaptwater/adaptwater/">
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory>

<VirtualHost *:80>
ServerAdmin shane.brown@gmail.com
ServerName toastprojects.power.on.net
WSGIScriptAlias / "C:/git_clones/adaptwater/adaptwater/adaptwater/wsgi.py"
Alias /static/ "C:/git_clones/adaptwater/adaptwater/static/"
</VirtualHost>

<Directory "C:/git_clones/adaptwater/adaptwater/static/">
Order deny,allow
Allow from all
</Directory>

<Directory "C:/git_clones/adaptwater/adaptwater/adaptwater/">
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

我已经为每个设置了 wsgi.py （绝对路径对应于特定项目的位置）：

```
import os, sys

sys.path.append('C:/git_clones/adaptwater/adaptwater')
sys.path.append('C:/git_clones/adaptwater')
#os.environ.setdefault("DJANGO_SETTINGS_MODULE", "adaptwater.settings")
os.environ['DJANGO_SETTINGS_MODULE'] = "adaptwater.settings"

from django.core.wsgi import get_wsgi_application

application = get_wsgi_application() 
```

同时通过开发服务器在 localhost 上运行这些（并使用 nginx 提供静态文件）没有问题。假设我想一次访问一个站点，然后重新启动 Apache - 每个工作都单独在外部提供服务。有什么明显的原因导致这个问题吗？

干杯，谢恩

* * *

更新 ：

在这一点上，我不得不得出结论，由于 mod_wsgi 和 windows 平台的结合并不完美（我应该提到这个平台——我匆忙忽略了——windows 7 专业版 64），所以我想做的事情无法完成。我不能使用 WSGIDaemonProcess，并且必须将 WSGIApplicationGroup 设置为全局，并且从我从与此问题相关的讨论中收集到的信息中，这意味着我处于死胡同。

我已经设法使用 nginx 和 fastcgi 代替奇怪的设置混合来服务第二个项目......作为权宜之计。到目前为止，这个组合一直对我很好。

nginx 服务静态文件和代理传递到 django 开发服务器的更不重要的选项也可以作为外部服务的并行安排。还没有同时尝试两个 nginx/fastcgi 服务版本的项目 - 但我将把它作为练习留给另一个令人沮丧的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:34:04.600

您必须`<directory>`在相应的配置指令中包含您的配置`<virtualhost>`指令。

# iphone - cocos2d缩放精灵不失真？

> ID：14170338
> 
> 赞同：1
> 
> 时间：2013-01-05T09:15:33.047
> 
> 标签：iphone, cocos2d-iphone, game-engine

我想在 Cocos2d 中用捏合手势实现精灵的缩放。

如何在图像不像素化的情况下实现它？

我尝试使用矢量但没有成功，我注定要使用光栅位图图像。

1.  我是否需要尽可能大且分辨率最高的图像才能让它看起来不错？

2.  cocos2d中png的大小限制是多少？

3.  我还需要考虑哪些其他陷阱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:05:48.937

1.  是的。例如，如果精灵在放大到最大时应覆盖 1024x1024 像素的区域，则需要将图像创建为 1024x1024 并将 scale 属性设置为低于 1 以创建较小的版本。如果您使用大于 1.0 的比例，图像将始终丢失细节并且随着比例的增加变得更加模糊。

2.  cocos2d 没有大小限制，是设备施加了限制。大多数设备都可以处理 2048x2048，除了仅支持 1024x1024 的第一代和第二代。不过，您通常不会支持这些旧设备，因此 2048x2048 应该是默认值。一些较新的设备（iPad 2+、iPhone 4S+）最多可以使用 4096x4096 纹理。

3.  内存消耗。不确定您要做什么，但开发人员通常对内存纹理消耗多少以及可用内存量知之甚少。例如，具有 32 位颜色的 2048x2048 格式的 PNG 会占用 16 MB 内存。不要计划使用超过 4-5 个，除非您能够减少颜色位深度并使用 TexturePacker 能够使用压缩的 .pvr.ccz 格式。[阅读我关于优化内存使用的文章以获取更多信息](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/)。

# asp.net-mvc - MVC4 重复的 UserProfile 表

> ID：14170339
> 
> 赞同：2
> 
> 时间：2013-01-05T09:15:33.743
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

在我的项目中，我使用 MVC4 和一些使用 Entity 作为 orm 的外部数据库。

我决定使用 MVC 提供的成员资格，所以我只是将默认更改`ConnectionString`为指向我的外部数据库。

然后，当我第一次启动该应用程序时，添加了一些表格，到目前为止一切都很好。现在，**问题是**，当我将新创建的 userProfile 表映射到我的 dataContext 模型中时，我遇到了冲突，因为该表已经存在于 accountModel 中。

帐户模型和我新生成的模型在同一个命名空间中，我不想更改，那我该怎么办？

这是 ADO 实体模型使用视图添加表方法生成的类：

```
public partial class UserProfile
    {
        public UserProfile()
        {
            this.Predictions = new HashSet<Prediction>();
        }

        public int UserId { get; set; }
        public string UserName { get; set; }

        public virtual ICollection<Prediction> Predictions { get; set; }
    } 
```

从会员这里

```
[Table("UserProfile")]
    public partial class UserProfile
        {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        public string UserName { get; set; }
        } 
```

两者都存在于同一个名称空间中，并且存在冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T05:43:55.500

您可以删除自动生成的类并创建一个部分类来扩展 AccountModel UserProfile 类。

创建一个具有相同名称和相同命名空间的部分类：

```
public partial class UserProfile
{
    public UserProfile()
    {
        this.Predictions = new HashSet<Prediction>();
    }        

    public virtual ICollection<Prediction> Predictions { get; set; }
} 
```

通过这样做，您就拥有`Predictions`了成员资格`UserProfile`类的属性。

# objective-c - UITableView 滞后第一次显示包含 UITextView 的单元格

> ID：14170341
> 
> 赞同：3
> 
> 时间：2013-01-05T09:16:11.883
> 
> 标签：objective-c, ios, uitableview, scroll, uitextview

当特定单元格移动到超级视图时，我遇到了 UITableView 在滚动时滞后的问题。

我编写了自己的 IPFormKit，以便轻松创建具有不同类型 inputViews 的漂亮输入表单，而无需为每个表单字段/单元格手动重新编码所有内容。

我有一个 UITableViewController 来初始化我的 IPFormKit 及其字段。加载出列的`- (UITableViewCell *) cellForRowAtIndexPath:(NSIndexPath)indexPath;`自定义单元格（称为 IPFormTableViewCell）并将 IPFormField 分配给每个单元格。

自定义 UITableViewCell (IPFormTableViewCell) 在初始化时使用 CGRectZero 创建所有（可能）需要的输入视图（UITextField、UITextView、CustomUILabel）。

`inputView`根据 IPFormField 的类型（已作为单元格的 iVar 初始化）的匹配被调整大小并作为子视图添加到内部`cell.contentView`。

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath)indexPath 
```

对于 UITextField 和 CustomUILabel 这可以完美地工作，但是**当 inputView 是 UIText *View*时，当第一次显示这个单元格时，UITableView 的滚动滞后（稍微）明显。**

当滚动一点后单元格将在稍后再次显示时（即使单元格被重用，因此 UITextView 被删除和读取），这些单元格*没有*延迟并且滚动非常流畅。

我已经没有想法了，这种滞后的原因可能是什么。任何想法都值得赞赏。

PS：延迟在 iPhone 4 和 iPhone 4S 上都很明显，并且持续时间几乎完全相同（因此它不应该与 CPU 相关）

`UITableViewController.m`：

**- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath**

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"IPFormFieldCell";

    // Get Form Field for indexPath
    IPFormField *formField = [self.form fieldAtIndexPath:indexPath];

    IPTableViewCell *cell = (IPTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[[IPTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.backgroundView = nil;
        cell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background.png"]];
        cell.selectedBackgroundView = nil;
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    [cell assignFormField:formField];

    return cell;
} 
```

`IPFormTableViewCell.m`：

**- (void)assignFormField:(IPFormField *)field:**

```
- (void) assignFormField:(IPFormField *)field {
    if (formField != nil) {
        formField.inputView = nil; // unlink old field
    }

    self.formField = field;

    // Change Field Label
    [fieldLabel setText:[field label]];

    // Add an Input View to the Field
    UIView *labelView = nil;
    UIView *inputView = nil;

    switch (formField.type) {
        case IPFormFieldTypeTextField:
        {
            labelView = fieldLabel;

            UITextField *textField = inputTextField;
            textField.delegate = (IPFormTextField *)formField;
            textField.inputAccessoryView = [formField.form inputAccessoryView];
            textField.placeholder = [self.formField stringFromValue:self.formField.defaultValue];
            textField.keyboardType = [(IPFormTextField *)formField keyboardType];

            if (self.formField.value == nil || [[self.formField stringFromValue:self.formField.value] isEqualToString:[self.formField stringFromValue:self.formField.defaultValue]]) {
                textField.clearsOnBeginEditing = YES;
            } else {
                textField.text = [self.formField stringFromValue:self.formField.value];
                textField.clearsOnBeginEditing = NO;
            }

            inputView = textField;
            break;
        }

        case IPFormFieldTypeTextArea:
        {            
            UITextView *textView = inputTextView;
            textView.delegate = (IPFormTextArea *)formField;
            textView.inputAccessoryView = [formField.form inputAccessoryView];

            if (self.formField.value == nil || ![[self.formField stringFromValue:self.formField.value] length] > 0) {
                textView.text = [self.formField stringFromValue:self.formField.defaultValue];
            } else {
                textView.text = [self.formField stringFromValue:self.formField.value];
            }

            inputView = textView;
            break;
        }

        default:
            break;
    }

    self.leftItem = labelView;
    self.rightItem = inputView;

    if (leftItem != nil) {
        [self.contentView addSubview:leftItem];
    }

    if (rightItem != nil) {
        [self.contentView addSubview:rightItem];
    }

    formField.inputView = rightItem;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:49:14.477

显然，`cellForRowAtIndexPath:`我的 dataSource 使用了一个字段的属性，该属性设置为`@property (nonatomic, copy)`而不是`@property (nonatomic, readonly)`.

现在我已经修复了它，滚动不再滞后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:33:57.207

正如我猜想的那样，您的问题在于您的自定义控件。是的，您正在重用该单元格，但这并没有在您的情况下提供任何内容，因为每次您请求该单元格时，您都在为每个单元格创建新的自定义控件。我的建议是，您可以创建自定义控件并将其保留为实例变量，并在需要时返回它们而无需很多`if-else`s，或者，您可以为两种情况创建自定义单元格，并使用不同的单元格标识符将它们出列并重用它们。祝你好运！

# tcp - 如何读取 TCP 数据包？

> ID：14170343
> 
> 赞同：1
> 
> 时间：2013-01-05T09:16:14.493
> 
> 标签：tcp

> **可能重复：**
> [TCP IP：是否可以读取程序远程发送的 TCP/UDP 数据？](https://stackoverflow.com/questions/14168577/tcp-ip-is-it-possible-to-read-what-tcp-udp-data-a-program-is-sending-remotely)

我想读取我用 Wireshark 捕获的数据包。数据包包含数据，长度为 133 个字节。它没有加密。然而，HEX 形式的数据在 Wireshark 中解码为一串几乎无法理解的乱码。

有没有办法以人类可读的形式读取这些数据？我只是想弄清楚游戏客户端是如何工作的，仅此而已。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T09:21:42.323

您必须知道将其转换为人类可读形式的格式。这就像一本用中文写的书——如果你不会中文，它看起来就像是难以理解的胡言乱语。但这对任何懂中文的人来说都很有意义。

仅从数据中找出格式就像仅从中文书籍中学习中文一样困难。这是可以做到的，但这是一门高度专业化的艺术。

例如，您可以尝试不动并查看哪些数字保持不变。然后移动，看​​看哪些数字发生了变化。这可能会提示您位置信息的位置。但是，整个数据包可能会使用伪随机序列进行加扰，在这种情况下，如果不对软件进行逆向工程，几乎是不可能的。

# ruby - 扩展 ruby 特征类以加载 CarrierWave

> ID：14170344
> 
> 赞同：1
> 
> 时间：2013-01-05T09:16:30.470
> 
> 标签：ruby, ruby-on-rails-3, activerecord, carrierwave, dci

***更新***：我已经简化了我的问题；您可以通过查看[我的编辑修订](https://stackoverflow.com/posts/14170344/revisions)来查看完整的历史记录。感谢[iain](https://stackoverflow.com/users/335847/iain)和[bernardk](https://stackoverflow.com/users/1851041/bernardk)让我走到这一步。

* * *

我想将载波功能加载到我的`User < ActiveRecord::Base`模型实例中。

```
require 'uploaders/avatar_uploader'

module HasAnAvatar
  def self.extended(host)
    if host.class == Class
      mount_uploader :avatar, AvatarUploader
    else
      class << host
        mount_uploader :avatar, AvatarUploader
      end
    end
  end
end 
```

执行：

```
(user = User.first).extend(HasAnAvatar).avatar 
```

结果是：

> NoMethodError：未定义的方法`new' for nil:NilClass from /Users/evan/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/carrierwave-0.6.2/lib/carrierwave/mount.rb:306:in` 上传器'

我怀疑问题是`mount_uploader`在`HasAnAvatar`eigenclass 上没有正确调用 in `user`，因此[没有`uploaders`填充散列](https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/mount.rb#L150)。

关于如何使它工作的任何想法？

* * *

这是针对此问题的示例 Rails 应用程序：[https ://github.com/neezer/extend_with_avatar_example](https://github.com/neezer/extend_with_avatar_example)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:34:54.370

这里有两种方法可以将模块包含到实例中（基本上是扩展实例的特征类）。我不认为这是对您的问题的最佳答案，即使它可以回答问题（部分）。

```
class A
end
# => nil

module B
  def blah
    "Blah!"
  end
end
# => nil

a = A.new
=> #<A:0x0000010086cdf0>

a.blah
# NoMethodError: undefined method `blah' for #<A:0x0000010086cdf0>

class << a
  include B
end

a.blah
# => "Blah!"

b = A.new
# => #<A:0x0000010083b818>

b.blah
# NoMethodError: undefined method `blah' for #<A:0x0000010083b818>

b.extend B
# => #<A:0x0000010083b818>

b.blah
# => "Blah!"

c.blah
# NoMethodError: undefined method `blah' for #<A:0x0000010085eed0> 
```

* * *

从您的编辑：

```
module Pacifiable
  def pacified_with(mechanism)
    class_eval do
      define_method(:"pacified_with_#{mechanism}?") { true }
    end
  end
end
# => nil

class JellyFish
  define_method(:is_squishy?) { true }
end
# => #<Proc:0x00000100850448@(irb):10 (lambda)>

class Lobster
  extend Pacifiable
  pacified_with :polar_bear
  define_method(:is_squishy?) { false }
end
# => #<Proc:0x00000100960540@(irb):16 (lambda)>

lobster = Lobster.new
# => #<Lobster:0x0000010095aa50>

lobster.pacified_with_polar_bear?
# => true

jelly = JellyFish.new
# => #<JellyFish:0x00000100951108>

jelly.pacified_with_polar_bear?
# NoMethodError: undefined method `pacified_with_polar_bear?' for #<JellyFish:0x00000100951108>

class << jelly
    extend Pacifiable
    pacified_with :polar_bear
  end
# => #<Proc:0x0000010093ddd8@(irb):4 (lambda)>

jelly.pacified_with_polar_bear?
# => true

big_jelly = JellyFish.new
# => #<JellyFish:0x0000010091ad38>

big_jelly.pacified_with_polar_bear?
# NoMethodError: undefined method `pacified_with_polar_bear?' for #<JellyFish:0x0000010091ad38> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:51:02.703

> 根据我对 Ruby 类的了解，一旦我将一个模块包含到一个类中，......但不会追溯更改任何现有的 User 实例。

相反，包含/扩展会立即影响所有现有实例，因为它是类与其超类之间的指针问题。请参阅[继承如何在 Ruby 中工作？](https://stackoverflow.com/questions/14153667/how-does-inheritance-work-in-ruby/14155007#14155007)还有里面的链接。

```
module HasAnAvatar
    def m
        puts 'in HasAnAvatar#m'
    end
end

class AvatarUploader; end

class User
end

user = User.new
print 'user.respond_to?(:m) ? ';         puts user.respond_to?(:m) ? 'yes' : 'no'
print '1) user.respond_to?(:avatar) ? '; puts user.respond_to?(:avatar) ? 'yes' : 'no'

class User
    include HasAnAvatar
end

print 'user.respond_to?(:m) ? ';         puts user.respond_to?(:m) ? 'yes' : 'no'
print '2) user.respond_to?(:avatar) ? '; puts user.respond_to?(:avatar) ? 'yes' : 'no'

module HasAnAvatar
  def self.included(base)
    puts "#{self} included into #{base}"
#    base.mount_uploader :avatar, AvatarUploader
    base.send(:attr_reader, :avatar)
  end
end

class User
    include HasAnAvatar
end

print '3) user.respond_to?(:avatar) ? '; puts user.respond_to?(:avatar) ? 'yes' : 'no'
print 'user.avatar : '; p user.avatar
print 'user.avatar.class : '; p user.avatar.class

user.instance_variable_set(:@avatar, AvatarUploader.new)
print 'after set, user.avatar : '; p user.avatar
print 'user.avatar.class : '; p user.avatar.class 
```

执行（Ruby 1.9.2）：

```
$ ruby -w t.rb 
user.respond_to?(:m) ? no
1) user.respond_to?(:avatar) ? no
user.respond_to?(:m) ? yes
2) user.respond_to?(:avatar) ? no
HasAnAvatar included into User
3) user.respond_to?(:avatar) ? yes
user.avatar : nil
user.avatar.class : NilClass
after set, user.avatar : #<AvatarUploader:0x007fcc2b047cf8>
user.avatar.class : AvatarUploader 
```

因此，包含的方法立即可用于所有现有实例。
为什么`user.avatar`回答 nil ？因为实例变量属于......单个实例。请参阅[为什么 Ruby 中的符号不​​被视为一种变量？](https://stackoverflow.com/questions/13850971/why-are-symbols-in-ruby-not-thought-of-as-a-type-of-variable/13861177#13861177) 在这种情况下，没有为旧用户分配头像。

但是你为什么得到`user2.avatar.class #=> AvatarUploader`. 我想，在幕后，`base.mount_uploader :avatar, AvatarUploader`做了一些事情，使得 :avatar 不是相应实例变量的访问器，或者定义了一个初始化方法，该方法开始将此变量设置为新实例。

这是第二个示例的解决方案：

```
module Pacifiable
    def self.extended(host)
        puts "#{host} extended by #{self}"
        def host.pacified_with(mechanism)
            @@method_name = "pacified_with_#{mechanism}?"
            puts "about to define '#{@@method_name}' into #{self} of class #{self.class }"
            if self.class == Class
            then # define an instance method in a class
                define_method(@@method_name) { true }
            else # define a singleton method for an object
                class << self
                    define_method(@@method_name) { true }
                end
            end
        end
    end
end

class JellyFish
  define_method(:is_squishy?) { true }
end

class Lobster
  extend Pacifiable
  pacified_with :polar_bear
  define_method(:is_squishy?) { false }
end

a_lobster = Lobster.new
print 'a_lobster.pacified_with_polar_bear? '; p a_lobster.pacified_with_polar_bear?
print 'a_lobster.is_squishy? '; p a_lobster.is_squishy?

jelly = JellyFish.new

### Add functionality to instance
#
## what I want:
#
jelly.extend(Pacifiable)
jelly.pacified_with(:polar_bear)
print 'jelly.pacified_with_polar_bear? '; p jelly.pacified_with_polar_bear? #=> true 
```

执行 ：

```
Lobster extended by Pacifiable
about to define 'pacified_with_polar_bear?' into Lobster of class Class
a_lobster.pacified_with_polar_bear? true
a_lobster.is_squishy? false
#<JellyFish:0x007fcc2b047640> extended by Pacifiable
about to define 'pacified_with_polar_bear?' into #<JellyFish:0x007fcc2b047640> of class JellyFish
jelly.pacified_with_polar_bear? true 
```

关于`jelly.class.pacified_with(:polar_bear)`：错误是打电话`class`，接听课`JellyFish`；你想要的是实例对象果冻的单例类。一旦在对象的单例类中定义了方法，就可以将其直接发送给对象。这同样适用于作为 Class 的实例的类。一旦在类的单例类中定义了方法，就可以直接将其发送给该类。我们称它们为类方法，它们实际上是类的单例类的实例方法。哎呀！

最后一个 OR ：如解释的那样，如果您扩展类，它对所有现有实例都有效。因此，您必须扩展单个实例：

```
class JellyFromTheBigBlueSea
  def find
    puts 'in JellyFromTheBigBlueSea#find'
    jelly = JellyFish.new
    jelly.extend(Pacifiable)
    jelly.pacified_with :polar_bear
    jelly
  end
end

class JellyFromAnIsolatedCove
  def find
    puts 'in JellyFromAnIsolatedCove#find'
    JellyFish.new
  end
end

normal_jelly   = JellyFromTheBigBlueSea.new.find
ignorant_jelly = JellyFromAnIsolatedCove.new.find

## what I want:
#
print 'normal_jelly.pacified_with_polar_bear? ';   p normal_jelly.pacified_with_polar_bear?
print 'ignorant_jelly.pacified_with_polar_bear?' ; p ignorant_jelly.pacified_with_polar_bear? 
```

执行 ：

```
in JellyFromTheBigBlueSea#find
#<JellyFish:0x007fb5d9045060> extended by Pacifiable
about to define 'pacified_with_polar_bear?' into #<JellyFish:0x007fb5d9045060> of class JellyFish
in JellyFromAnIsolatedCove#find
normal_jelly.pacified_with_polar_bear? true
ignorant_jelly.pacified_with_polar_bear?t.rb:109:in `<main>': undefined method `pacified_with_polar_bear?' for #<JellyFish:0x007fb5d9044d18> (NoMethodError) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T10:13:17.203

首先，您的上下文或至少命名有些奇怪。上下文不返回 RolePlayers。角色仅存在于上下文中。角色方法不能也不应该在上下文之外访问。也就是说，在 ruby​​ 中处理 DCI 的标准方法是方法注入。这种方法并非完美无缺，但迄今为止最接近 Ruby 中的纯 DCI。[有一个名为alias_dci](https://github.com/rebo/alias_dci)的实验性库可能会有所帮助。

**编辑** 现在有一个 gem 可以在 Ruby 中实现无注入 DCI。它基于[Marvin](https://github.com/runefs/Marvin)的工作，这是第一种支持无注入 DCI 的语言。gem 被称为[Moby](https://github.com/runefs/Moby)并且可以安装

```
gem install Moby 
```

它目前仍处于试验阶段，但能够从[fullOO](http://fulloo.info)实现 DCI 示例的冒烟测试已经通过

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T10:30:15.680

1.  首先，实例`extend`调用的方式是有效的（见文末）。

    1.  然后您应该考虑[一些认为这对性能不利的意见](http://tonyarcieri.com/dci-in-ruby-is-completely-broken/)
    2.  最后，根据[消息来源](https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/orm/activerecord.rb)，它应该可以按预期工作。所以我建议你戴上你的调试帽，试着看看到底发生了什么`user.extend`。例如，查看是否`mount_uploader`使用`Carrierwave::Mount#mount_uploader`方法，因为定义了“上传者”everrides。

* * *

```
1.9.3p327 :001 > class A
1.9.3p327 :002?>   def foo
1.9.3p327 :003?>     '42'
1.9.3p327 :004?>     end
1.9.3p327 :005?>   end
 => nil 
1.9.3p327 :006 > A.new.foo
 => "42" 
1.9.3p327 :011 > module Ext
1.9.3p327 :012?>   def foo
1.9.3p327 :013?>     'ext'
1.9.3p327 :014?>     end
1.9.3p327 :015?>   end
 => nil 
1.9.3p327 :016 > class AFancy
1.9.3p327 :017?>   def call
1.9.3p327 :018?>     a = A.new
1.9.3p327 :019?>     a.extend Ext
1.9.3p327 :020?>     a
1.9.3p327 :021?>     end
1.9.3p327 :022?>   end
 => nil 
1.9.3p327 :023 > a1 = A.new
 => #<A:0x00000000e09b10> 
1.9.3p327 :024 > a2 = AFancy.new.call
 => #<A:0x00000000e17210> 
1.9.3p327 :025 > a3 = A.new
 => #<A:0x00000000e1bd38> 
1.9.3p327 :026 > [a1, a2, a3].map(&:foo)
 => ["42", "ext", "42"] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T04:30:28.973

好吧，我想我找到了导致我的问题的原因......

在[https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/mount.rb](https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/mount.rb)的定义中`CarrierWave::Mount::Mounter`，对`record.class`. 这正确地引用了主`User`类，它没有我加载到用户元类中的扩展方法。因此，我将其更改为：[https](https://gist.github.com/4465172) ://gist.github.com/4465172 ，它似乎有效。

如果像在 CarrierWave 文档中那样正常使用，似乎也可以继续工作，所以这也很好。不过会继续测试它。

# php - 如果表单 POST 为空，如何阻止 php 执行脚本？

> ID：14170351
> 
> 赞同：0
> 
> 时间：2013-01-05T09:17:41.827
> 
> 标签：php, forms, post, user-input, string

我有两个输入字段，每当我打开我的页面时，它都会显示错误，因为在开始时用户没有在任何字段中输入任何输入（并且显示错误是因为用户输入在 sql 查询中用于检索数据）。我只想在页面开始时显示这两个表单而不是错误。`Compare`执行按钮需要两个输入。如果用户没有输入任何一个输入，则不应向 php 发送请求以进行脚本编写。我的意思是`Compare`按钮应该仅在两个输入都填充时才发送请求，否则它应该向用户发送消息`Type the required fields`。这该怎么做？

```
$trimUser= trim ($_POST['name']);
if(empty($name) || empty($name2))
{
echo "Enter a name ";
}
else if (isset($_POST['name']))
{   
$name=$_POST['name'];
}
else if (isset($_POST['name2']))
{
$name2=$_POST['name2'];
} 
```

&这是我的表格：

```
<form action="index.php" method="POST">
<input class="span3 search-query" placeholder="Type User A" type="text" name="name" id="field"/
<input class="span3 search-query" placeholder="Type User B"  name="name2" type="text"
id="field2"/>
<button class="btn btn-primary" data-loading-text="Loading..." >Compare</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:28:23.900

您可以添加检查以验证请求是否为发布请求：

```
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
     // Place your error checking code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T10:05:41.603

Ehs4n 是对的，但我会更具体，并执行以下操作：

```
if(!empty($_POST['compare'])) {
   #validation
} 
```

您的按钮代码必须更改为：

```
<button name="compare" value="1" class="btn btn-primary" data-loading-text="Loading..." >Compare</button> 
```

我会这样做有两个原因：

1.  使用 !empty() 可确保在 $_POST['compare'] 为空时不会出错
2.  检查 $_POST['compare'] 而不仅仅是 $_POST 确保只有在有人单击按钮时才显示错误。

最后一点很关键，因为如果您在页面上有多个表单，或者您碰巧在其他地方设置了 $_POST 变量，您仍然会显示错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T10:45:55.593

在加载 post.ie 之前将 if 条件与 isset($_POST) 一起使用，

```
if (isset($_POST)) {
if(empty($name) || empty($name2))
{
echo "Enter a name ";
}
else if (isset($_POST['name']))
{   
$name=$_POST['name'];
}
else if (isset($_POST['name2']))
{
$name2=$_POST['name2'];

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T10:48:56.250

您必须使用 java 脚本或 jQuery 来验证两个字段是否为空。例如..

```
<form action="index.php" method="POST" onsubmit="return validate()">
  <input class="span3 search-query" placeholder="Type User A" type="text" name="name"     id="field"/>

   <input class="span3 search-query" placeholder="Type User B"  name="name2" type="text"
id="field2"/>

   <button class="btn btn-primary" data-loading-text="Loading..." >Compare</button>
</form>

<script type="text/javascript">
   function validate(){
       var field1 = document.getElementById('field').value;
       var field2 = document.getElementById('field2').value;

        if(field1 != '' && field2 != '' ){
           return true;
         } else{
            alert('Type the required fields');
            return false;
         }
    }
</script> 
```

在这里，如果两个字段都不为空，则允许提交表单。并在 PHP 脚本中添加

```
if(isset($_POST) && !empty($_POST)){
     //code comes here
} 
```

我希望它对你有帮助。

谢谢

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-05T13:03:04.210

`error_reporting(E_ERROR | E_PARSE);`我只是通过在代码开头添加它来消除所有错误。但是，如果有人想检查显示验证错误消息，可以通过其他人提到的内容轻松完成。即通过使用 if($_Post)。无论如何，谢谢大家的帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-05T09:24:46.427

添加`if`子句如

```
if($_POST) {
...your validation code
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-03T12:17:44.620

考虑在错误发生后将人们重定向到他们所在的页面：

```
 echo '<script>location.href=\'example.php\'</script>'; 
```

# c++ - 如何从位图文件创建 .sub (vobsub sutitle sub/idx) 文件

> ID：14170354
> 
> 赞同：1
> 
> 时间：2013-01-05T09:17:48.270
> 
> 标签：c++, ffmpeg, mpeg, subtitle, mpeg-2

我有一些位图文件（jpeg，png，...），我想编写一个 C++ 程序，将这些位图文件连接到 pes 流（mpeg-2 格式），然后创建一个子文件（.sub/.idx:vobsub字幕文件）。

你能给我一些提示吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-05T09:22:29.343

你不能打电话给 ffmpeg 吗？

[第一个护目镜结果： http](http://tooloftrade.blogspot.fr/2011/10/merging-images-into-movie-using-ffmpeg.html) ://tooloftrade.blogspot.fr/2011/10/merging-images-into-movie-using-ffmpeg.html

# java - 在 logcat 中使用 NullPointerException 强制关闭应用程序

> ID：14170358
> 
> 赞同：0
> 
> 时间：2013-01-05T09:18:26.957
> 
> 标签：java, android, root

eclipse中没有错误..但是每当我启动应用程序时，它就是FC :(我正在尝试制作一个应用程序，每当我按下按钮时都会将脚本安装到init.d。我认为问题在于括号，因为它们困扰了我很多！你可以看到，它们的排列是杂乱无章的。

**MainActivity.java**

```
package com.example.kernel.version;

import java.io.IOException;
import java.util.concurrent.TimeoutException;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

import com.stericson.RootTools.Command;
import com.stericson.RootTools.RootTools;

public class MainActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Button button= (Button) findViewById(R.id.button);

        button.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

        RootTools.remount("/system/", "rw");
        Command command = new Command(0, "su", "cp /sdcard/scripts/* /system/etc/init.d/")
        {
                @Override
                public void output(int id, String line)
                {

                }
        };
        try {
            RootTools.getShell(true).add(command).waitForFinish();
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (TimeoutException e) {
            e.printStackTrace();
        }
            }
        });}} 
```

**Activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="22dp"
        android:layout_marginTop="141dp"
        android:text="Install Scripts" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T09:22:50.327

我认为**NullPointerException**上线，`button.setOnClickListener(new View.OnClickListener() {`

`setContentView(R.layout.Activity_main);`因为您在从布局 Xml 文件访问 Button 之前错过了。所以您`Button button`是**NULL**。

就像是，

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // You missed this code line,
        setContentView(R.layout.Activity_main);

        Button button= (Button) findViewById(R.id.button); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T09:26:35.047

首先创建Button实例然后添加监听Button按钮；

```
public void onCreate(Bundle savedInstanceState) {

    button = (Button) findViewById(R.id.button);

     button.setOnClickListener(new View.OnClickListener() {
    }
} 
```

# photoshop - 在不改变分辨率的情况下减小图像尺寸

> ID：14170359
> 
> 赞同：0
> 
> 时间：2013-01-05T09:18:46.463
> 
> 标签：photoshop

如何在 Photoshop 中为 iPhone UI 准备具有较小图像文件大小的清晰 UI 设计？在我的 Iphone 应用程序中，由于大尺寸图像，我的应用程序大小大大增加。所以有没有其他方法可以减小图像的大小，但我需要清晰度不应该改变..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T09:24:15.197

Photoshop 通常可以很好地创建高效的图像，但是，您通常可以使用 Yahoo 的[smush.it](http://smush.it)工具或命令行工具进一步无损压缩它们。我个人使用[optipng](http://optipng.sourceforge.net/)，您可以通过 MacPorts 安装它。

您还可以尝试完全删除 @2x 图像，然后只提交 2x 分辨率的普通图像。在大多数情况下，非视网膜设备会对较大的图像进行下采样，但始终值得首先在实际设备上进行测试。

# algorithm - 遍历二叉树的最低成本是多少

> ID：14170360
> 
> 赞同：0
> 
> 时间：2013-01-05T09:18:55.567
> 
> 标签：algorithm, graph, tree, graph-algorithm, tree-traversal

我想以最低成本遍历二叉树，其中每条边的成本为 1。 **当访问树的每个节点时，遍历就完成了。**

例如，遍历后续树的最小成本是 13。

```
 *
      / \
     *   *
    / \   \
   *   *   *
  /   /     \
 *   *       * 
```

遍历后续树的最小成本为 12。

```
 *
       / \
      *   *
     / \   \
    *   *   *
   /     \
  *       *
 /
* 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T09:20:39.310

**`n-1`**遍历树的成本是`n`节点的数量。

这是真的，因为每棵树都有精确的`n-1`边——并且您需要使用所有边才能访问所有节点。

* * *

确切地说，已知接下来的 3 个语句对于具有节点的*图是等效的：* `T``n`

1.  T 是一棵树（无环连接）
2.  T 是连通的并且有 n-1 条边
3.  T 没有环，有 n-1 条边

从上面我们可以得出结论，在一棵树中，为了到达所有节点，我们必须使用所有边（因为没有循环，所以没有冗余边）——而且确实有`n-1`这些。

* * *

**编辑**：

从您的示例看来，您似乎也在计算从每个边缘返回的时间（即某些边缘被计算两次）。

那么，在这种情况下，最佳解决方案将是：

```
cost = (n-1)*2 - height 
```

**解释/证明指南：** 树中恰好
有边。`n-1`除了从根到最深节点的那些之外，它们中的每一个都被遍历了两次。
您必须准确地使用每条边（除了提到的）两次，因为除了最后一个分支 - 您从每个节点返回。
由于`height`最后一个分支中恰好有边，因此您总共得到`cost = (n-1)*2 - height`

请注意，它与您得到的基本相同：

```
height + 2*(n-1-height) = height + 2(n-1) -2height = 2(n-1) - height 
```

# ember.js - 无法获取 hasMany 关联

> ID：14170370
> 
> 赞同：6
> 
> 时间：2013-01-05T09:20:40.237
> 
> 标签：ember.js, ember-data

我使用 commit [eaa1123](https://github.com/emberjs/ember.js/commit/eaa11231062e93567c9a1406415c8f21c4792e6b) (ember) 和[508479d](https://github.com/emberjs/data/commit/508479dee764c2e9926487131a5a4814cfda1bf6) (ember-data) 来构建 JS 文件。

我从我的 Rails 后端返回了以下 JSON，它是使用[active_model_serializers](https://github.com/rails-api/active_model_serializers) (0.6.0) 生成的：

```
{
  "posts": [
    {
      "id": 408,
      "title": "Lorem Ipsum",
      "body": "In at quo tempora provident nemo.",
      "comments": [
        {
          "id": 956,
          "body": "Quo incidunt eum dolorem."
        },
        ...
      ]
    }
  ]
} 
```

和以下 Ember 模型：

```
App.Post = DS.Model.extend({
  title: DS.attr('string'),
  body: DS.attr('string'),
  comments: DS.hasMany('App.Comment', {
    embedded: true
  })
});

App.Comment = DS.Model.extend({
  body: DS.attr('string'),
  post: DS.belongsTo('App.Post')
}); 
```

一切看起来都很正常：

```
post = App.Post.find(408);
post.get('title')
// => "Lorem Ipsum" 
```

但是，我似乎无法获得评论：

```
comments = post.get('comments')
comments.get('firstObject') instanceof App.Comment
// => true
comments.forEach(function(comment) {
  console.log(comment.get('body'))
})
//=> undefined 
```

当我使用：

```
comments.content 
```

我得到一个包含对象的数组，所以：

```
comments.content[0]
//=> { body: "Quo incidunt eum dolorem.", id: 956 } 
```

但这不是我所期望的。

这似乎很明显，所以我一定做错了什么。作为副作用：目前我无法以简单的方式在模板中呈现我的评论，所以我希望有人可以帮助我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T12:49:07.530

如果您使用了该提交，则意味着您处于最新的 ember-data 修订版，即 11 版。添加 **embedded: true** 以加载嵌入式关联在修订版 5 或 9 之间已被弃用，再次不太确定。

如果您使用默认的 restAdapter，您现在需要将嵌入式加载定义为如下所示的映射，而不是关联选项：

```
App.store = DS.Store.create({
  revision: 11,
  adapter: DS.RESTAdapter.create()
});

App.store.adapter.serializer.map('App.Post', {
   comments: {embedded: 'load'}
});

App.Post = DS.Model.extend({
  title: DS.attr('string'),
  body: DS.attr('string'),
  comments: DS.hasMany('App.Comment')
});

App.Comment = DS.Model.extend({
   body: DS.attr('string'),
   post: DS.belongsTo('App.Post')
}); 
```

您可以通过以下链接关注之前的所有讨论：

[https://github.com/emberjs/data/issues/504#issuecomment-11256934](https://github.com/emberjs/data/issues/504#issuecomment-11256934) https://github.com/emberjs/data/pull/430#issuecomment-10925506

加载嵌入记录的各种修复： [https ://github.com/emberjs/data/pull/541](https://github.com/emberjs/data/pull/541)

**这没有直接关系，但如果我上面写的所有** 内容都失败了，那么在使用 findAssociation 和 extractHasMany 钩子进行异步 HasMany 时，将此解决方案添加到 mix BelongsTo 关联中： [https ://github.com/emberjs/data/issues/525](https://github.com/emberjs/data/issues/525)

**任何想要快速查看关于“App.store.adapter.serializer.map”调用的定义的内部结构**

当我们调用“App.store.adapter.serializer.map”时，对序列化程序的调用在下面的第 536 行定义，并且地图在第二个链接中的在线 696

[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/adapter.js#L536](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/adapter.js#L536) https://github.com/emberjs/data/blob/master/packages/ember -data/lib/system/adapter.js#L696

在 扩展**DS.Adapter的****DS.RESTAdapter**的第 67 行，**序列化程序属性**指向**DS.RESTSerializer**，其中添加了特定于**RestAdapter**的附加功能。

 ******[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/rest_adapter.js#L67](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/rest_adapter.js#L67)******

# javascript - 用 json_encode 编码的 JS 变量返回 SyntaxError: missing ; 声明之前

> ID：14170371
> 
> 赞同：-1
> 
> 时间：2013-01-05T09:20:47.953
> 
> 标签：javascript, json

以前，我在JS中遇到“未终止的字符串文字奇怪错误”：[SyntaxError：未终止的字符串文字奇怪错误](https://stackoverflow.com/questions/14170153/syntaxerror-unterminated-string-literal-strange-error)

我有点用 json_encode 修复它，因为换行符被转义了。

现在我得到了这些奇怪的结果，例如这个 JS 变量（用 json_encode 处理）：

```
 cacheObj_open.handler='<pre class="brush: html;">"&lt;html&gt;\r\n&lt;body&gt;\r\n&lt;p&gt;Hello world.&lt;\/p&gt;\r\n&lt;\/body&gt;\r\n&lt;\/html&gt;"</pre>'; 
```

将输出带有双引号的代码：

```
"<html>
<body>
<p>Hello world.</p>
</body>
</html>" 
```

上面的代码运行没有控制台错误。但是下面的（也用 json_encode 处理）抛出*SyntaxError: missing ; 之前的语句*错误：

```
cacheObj_open.handler='<pre class="brush: html;">"\r\n&lt;?php\r\n$stmt = $dbh-&gt;prepare(&quot;SELECT * FROM REGISTRY where name = ?&quot;);\r\nif ($stmt-&gt;execute(array($_GET['name']))) {\r\n  while ($row = $stmt-&gt;fetch()) {\r\n    print_r($row);\r\n  }\r\n}\r\n?&gt;"</pre>'; 
```

将 HTML 实体源代码输出到 JS 变量时，避免任何错误的最佳方法是什么？我知道 json_encode 会转义一些新行（这是一个好主意），但是基于上面的示例，它仍然会为某些代码引发错误。我感谢任何意见和建议。

我曾尝试在 PHP 端添加 addlashes，但它仍然会引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:25:44.650

这种情况下的错误是 at `execute(array($_GET['name']`，这里的单引号关闭了整个字符串周围的引号。他们应该用反斜杠转义。

# php - 显示 Apache 目录结构而不是我的应用程序

> ID：14170394
> 
> 赞同：0
> 
> 时间：2013-01-05T09:24:20.500
> 
> 标签：php, cakephp, apache2

我正在做我的第一个 CakePHP 项目，我做了以下工作：

*   [从 ( http://cakephp.org/](http://cakephp.org/) )下载 CakePHP 源代码
*   重命名为 sampleapp 并将整个文件夹复制到 /var/www/html
*   须藤 /etc/init.d/httpd 重启

当我去的时候`http://localhost`，它显示了 Centos 的正确 Apache 欢迎页面。但是当我去`http://localhost/sampleapp`它时，它会向我显示目录结构

```
http://localhost/sampleapp

Parent Directory         -   
app/    05-Jan-2013 14:20    -   
build.properties    05-Jan-2013 14:20   177  
build.xml   05-Jan-2013 14:20   8.6K     
html/   05-Jan-2013 14:20    -   
index.php   05-Jan-2013 14:20   1.4K     
lib/    05-Jan-2013 14:20    -   
plugins/    05-Jan-2013 14:20    -   
vendors/    05-Jan-2013 14:20 
```

我在这里想念什么？我检查了 .htaccess 文件也在那里

通过一些 SO 研究，我添加了以下行`/etc/httpd/conf/httpd.conf`

```
AddType application/x-httpd-php .php 
```

并重新启动Apache，但它没有用。

我在用着

*   阿帕奇2
*   CakePHP 2.2.4
*   森托斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:49:13.663

首先你应该禁用 Apache 的索引。

之后确保 php 由 Apache 加载。

`httpd -l`并`httpd -M`搜索“php”或类似名称。

我不确定 cake-php 但在 symfony2 中的文档根是`/root-to-page/web`

如果 cake-php 使用`.htaccess`您必须在 vHost 或服务器设置中更改`AllowOverride None`的文件`AllowOverride All`

# php - 如何在表单中制作单选按钮、选择框和复选框必填字段？

> ID：14170396
> 
> 赞同：0
> 
> 时间：2013-01-05T09:24:52.160
> 
> 标签：php, input, checkbox, radio-button, required-field

我已经设置了我的代码，以便它需要表单中的所有字段，但由于某种原因，它仅适用于文本、电子邮件和密码的输入类型。所以我的问题是如何让单选按钮、选择框和复选框成为表单中的必填字段？这是我的代码：

```
<form action="" method="post">  
     <ul id="register">
        <li>
          <input type="text" name="first_name" placeholder="First Name">
        </li>

        <li>
        <input type="text" name="last_name" placeholder="Last Name">
        </li>

       <li>
        <input type="email" name="email" placeholder="Email"><br><br>
        </li>

        <li>
      <input type="password" name="password" placeholder="Password">
        </li>

        <li>
        <input type="radio" name="sex" value="male">Male
        <input type="radio" name="sex" value="female">Female
        </li>
        <li>

        Birthday:

            <select name="month">
                    <option value="January">January</option>
                    //all the other month options
                </select>

                <select name="day">
                    <option value="1">1</option>
                    //all the other days of the month
                </select>

                <select name="year">
                    <option value="2013">2013</option>
                    //ton of year options here
                </select><br><br>
            </li>
            <li>
                <input type="checkbox" name="terms_of_service" value="termsofservice">Terms of Service<br><br>
            </li>
            <li>
                <input type="submit" name="registrationform" value="Sign up">
            </li>
        </ul>
    </form>

    <?php

    if (empty($_POST) === false) {
        $required_fields = array('first_name', 'last_name', 'email', 'password', 'sex', 'birthday', 'terms_of_service');
        foreach ($_POST as $key=>$value) {
            if (empty($value) && in_array($key, $required_fields) === true) {
                $errors[] = 'You didn\'t fill in all of the categories.';
                break 1;
            }
        }
    }
    print_r($errors);

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:36:52.780

试试这个..

```
 if(isset($_POST['registrationform'])){
       $required_fields = array( /* all required fields including radio, select and 
checkboxes  as associative array with key as actual name and value as field name */);
       foreach ( $required_fields as $key=>$value) {
             if (!isset($_POST[$value]) || $_POST[$value]=='') {
                  $errors[$value] = $key." is required";

                }
       }

       print_r($errors);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T09:41:20.623

**服务器端和客户端验证：**

服务器端验证在服务器中处理。某些数据无法在客户端进行验证，必须在服务器端进行验证。例如数据库中两个日期之间的日期。

客户端验证在提交表单之前在客户端进行处理。使用客户端验证的优点是它减少了网络流量，因为验证是在客户端机器本身中处理的。例如电子邮件数字 isdate 等。

如果您想要服务器端验证（在 PHP 中），您需要编写如下条件：

```
if($_SERVER['REQUEST_METHOD'] == 'POST'){
    $error_msg = array();
    if(!isset($_POST['your_radio_button_name'])){
        $error_msg[] = "Enter the required fields";
    }
    if(!isset($_POST['your_checkbox_button_name'])){
        $error_msg[] = "Enter the required fields";
    }
    if(!isset($_POST['your_select_box_name'])){
        $error_msg[] = "Enter the required fields";
    }

    if(isset($error_msg) && count($error_msg) == 0){
        // do some form processing
    }
    else{
        // redirect to the form again.
    }
} 
```

阅读更多关于 php 中的表单验证的信息：

[http://phpmaster.com/form-validation-with-php/](http://phpmaster.com/form-validation-with-php/)

如果你想要客户端验证，那么有很多可用的选项：

检查以下文章：

[http://www.jeasyui.com/tutorial/form/form3.php](http://www.jeasyui.com/tutorial/form/form3.php)

希望它会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T10:04:33.993

试试这个：

```
<form action="" method="post">  
    <ul id="register">
        <li><input type="text" name="first_name" placeholder="First Name"></li>
        <li><input type="text" name="last_name" placeholder="Last Name"></li>
        <li><input type="email" name="email" placeholder="Email"><br><br></li>
        <li><input type="password" name="password" placeholder="Password"></li>
        <li>
            <input type="radio" name="sex" value="male">Male
            <input type="radio" name="sex" value="female">Female
        </li>
        <li>
            Birthday:
            <select name="month">
                <option value="">Choose</option>
                <option value="January">January</option>
                <option value="February">February</option>
            </select>

            <select name="day">
                <option value="">Choose</option>
                <option value="1">1</option>
                <option value="2">2</option>
            </select>

            <select name="year">
                <option value="">Choose</option>
                <option value="2012">2012</option>
                <option value="2013">2013</option>
            </select><br><br>
        </li>
        <li><input type="checkbox" name="terms_of_service" value="termsofservice">Terms of Service<br><br></li>
        <li><input type="submit" name="registrationform" value="Sign up"></li>
    </ul>
</form>

<?php
if (!empty($_POST)) {
    $required_fields = array('first_name', 'last_name', 'email', 'password', 'sex', 'month', 'day', 'year', 'terms_of_service');
    foreach ($required_fields as $value) {
        if (empty($_POST["$value"])) {
            $errors .= "$value is required<br>";
        }
    }            
    echo $errors;
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T10:09:20.973

Ultimate 的答案是完美的，是您所需要的。

我将向您解释什么是服务器和本地验证。

本地验证是当您检查 html 代码或使用 javascript 中的输入时。速度很快，因为它是在**浏览器**中检查的。但是任何访问您页面的人都可以通过很少的技术技能禁用该验证。

服务器验证是在您检查 php 代码中的输入时进行的。（之间的代码`<?php and ?>`）。然后在**服务器**中对其进行检查。因此，任何访问您页面的人都**无法**禁用该验证。

无论如何，我建议同时使用两者。因为本地验证很快，而服务器验证很安全。

添加本地验证，这个链接会很好的解释：http: [//www.w3schools.com/html5/att_input_required.asp](http://www.w3schools.com/html5/att_input_required.asp)

[确保您在代码的第一部分中将 doctype 设置为使用 html5：

```
<!DOCTYPE html>
<html>
<head>
...blablabalblabla more html code... 
```

然后您的带有验证的 HTML 将产生如下结果：

```
<form action="" method="post">  
 <ul id="register">
    <li>
      <input type="text" name="first_name" placeholder="First Name" required="required">
    </li>

    <li>
    <input type="text" name="last_name" placeholder="Last Name" required="required">
    </li>

   <li>
    <input type="email" name="email" placeholder="Email" required="required"><br><br>
    </li>

    <li>
  <input type="password" name="password" placeholder="Password" required="required">
    </li>

    <li>
    <input type="radio" name="sex" value="male" required="required">Male
    <input type="radio" name="sex" value="female" required="required">Female
    </li>
    <li>
... 
```

这就是 html5 本地验证。

# javascript - 在“修改后”事件中更改坐标

> ID：14170397
> 
> 赞同：1
> 
> 时间：2013-01-05T09:25:03.657
> 
> 标签：javascript, fabricjs

当我移动对象时。在“修改”事件中，我检查我是否没有将对象移出网格。如果我这样做了，那么我将对象返回到它的初始坐标。它返回正确。但是当我再次尝试移动它时。我拖不过去 看起来视觉坐标已更新。但是有些碰撞坐标没有。如何更新这个交互层坐标？

[http://jsfiddle.net/4Ubjk/3/](http://jsfiddle.net/4Ubjk/3/)

```
canvas.on({
      'object:moving': function(e) {
        e.target.opacity = 0.5;
        canvas.renderAll();
      },
      'object:modified': function(e) {
        e.target.opacity = 1;
         //e.target.left = 10;
        var nx = Math.floor((e.target.left - offset)/60);
        var ny = Math.floor((e.target.top - offset)/60);
        if(nx > 4 || nx < 0 || ny > 4 || ny < 0)
        {
          nx = e.target.ix;
          ny = e.target.iy;
        }
        e.target.ix = nx;
        e.target.iy = ny;
        //e.target.set('top', offset + 30+e.target.iy*60);
        //e.target.set('left', offset + 30+e.target.ix*60);

        e.target.set('top', offset + 30+ny*60);
        e.target.set('left', offset + 30+nx*60);
        canvas.renderAll();
      }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:59:48.547

阅读源代码后，尝试了下一个功能，它有所帮助。

```
e.target.setCoords(); 
```

# javascript - Javascript 程序在 Eclipse 中运行，但在 Notepad++ 中不运行

> ID：14170398
> 
> 赞同：0
> 
> 时间：2013-01-05T09:25:18.970
> 
> 标签：javascript

当我单击使用 JavaScript 的按钮时，我试图在网页中动态插入文本框。我是 JavaScript 的初学者。我尝试在 Chrome、Firefox 和 Opera（启用 JavaScript）中执行该程序。但是，当我单击按钮时，程序不会插入文本框。我尝试在 Eclipse 中运行相同的代码，而 Eclipse 中的 HTTP 预览器运行相同的代码。谁能说出发生这种情况的原因以及如何在浏览器中执行相同的代码？

这是我使用的代码：

```
<html>
<head>
<title>Doing some random programming</title>
</head>
<body>
Add input elements here:
<br/>
<input type = "button" value = "Add another element" id = "AddButton" onClick = "AddTextBox()" />
<div id = "Division"></div>
<script type = "text/javascript">   
<!--
//var addButton = document.getElementById('AddButton');
function AddTextBox()
 {      
    var divis = document.getElementById('Division');
    var inputTxt = document.createElement("<input type = \"text\" />");
    var div = document.createElement('div');
    //input.type = "text";      
    div.appendChild(inputTxt);
    divis.appendChild(div);
}
//-->
</script>
<noscript>
    Needs javascript
</noscript>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T09:27:10.757

该`createElement`方法采用元素类型的名称，而不是 HTML 字符串。

```
var inputTxt = document.createElement("<input type = \"text\" />"); 
```

应该

```
var inputTxt = document.createElement("input"); 
```

或（如果您想明确声明`type="text"`，则不需要，因为它是默认值）：

```
var inputTxt = document.createElement("input");
inputTxt.setAttribute('type', 'text'); 
```

# maven - 构建 xunit Jenkins 插件

> ID：14170401
> 
> 赞同：1
> 
> 时间：2013-01-05T09:25:34.730
> 
> 标签：maven, jenkins-plugins

我正在尝试使用 maven 从源代码构建[xunit](https://github.com/jenkinsci/xunit-plugin)插件。我收到以下错误：

```
[ERROR]   The project org.jenkins-ci.plugins:xunit:1.53-SNAPSHOT (/Users/admin/Downloads/xunit-plugin-master/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not find artifact org.jenkins-ci.plugins:plugin:pom:1.410 in guice-maven (http://guice-maven.googlecode.com/svn/trunk) and 'parent.relativePath' points at wrong local POM @ line 4, column 13 -> [Help 2] 
```

我该如何解决`pom.xml`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T09:10:15.247

正如它所说，它无法从在线存储库中获取工件。尝试配置另一个 repo 以获取工件。

```
<settings>
<profiles>
   <profile>
     <id>myprofile</id>
     <repositories>
       <repository>
         <id>my-repo2</id>
         <name>your custom repo</name>
         <url>http://jarsm2.dyndns.dk</url>
       </repository>
     </repositories>
   </profile>
   </profiles>
 <activeProfiles>
   <activeProfile>myprofile</activeProfile>
</activeProfiles>
</settings> 
```

# emacs - 使用 Paredit 包装现有表达式

> ID：14170403
> 
> 赞同：6
> 
> 时间：2013-01-05T09:25:40.303
> 
> 标签：emacs, clojure, lisp, paredit

我在 Paredit 模式下使用 Emacs 来处理 Lisp 代码。

我正在尝试在 println 中包装一个函数调用：

```
(square 5)
(println (square 5)) 
```

paredit 中最终发生的事情是这样的：

```
(square 5)
(println) (square 5) 
```

我无法删除 println 的结束括号并将其移至末尾。

我现在这样做的方式是： 1\. 删除函数调用并在 println 中拉出它 2\. 不带括号编写 println，直观地选择代码并用括号括起来

```
(square 5)
println (square 5)
=> select block of code and type (
(println (square 5)) 
```

这两种方法都很乏味。每当我在 Paredit 中从里到外编写代码时，这似乎都是一个常见问题。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T09:40:10.543

`paredit-wrap-round`命令可能会有所帮助（绑定到 M-（在我使用的 paredit 版本中）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-05T14:34:42.733

与其他答案相比，我倾向于为此使用 Ctrl-Right：在你得到

```
(println|) (square 5) 
```

（`|`光标在哪里），我只需按 Ctrl-Right 即可获得正确的结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-05T09:38:57.363

`M-(`

您可以调用`paredit-insert-html-examples`生成 HTML 网页备忘单。一个版本在[这里](http://mumble.net/~campbell/emacs/paredit.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-05T11:00:06.670

在您的情况下，解决方案是`M-2 M-(`or `M-( C-)`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-20T07:35:48.657

逐步将打印表单包裹在方形表单上的三种方法。（其他答案中已经提到了这三种方式中的两种）

(1) 剪切&打字&粘贴

```
(+ (square 3) 4)
;;; make sure cursor is at right place (| is cursor)
(+ |(square 3) 4)
;;; mark-sexp and kill-region
(+ | 4)
;;; type the print form and make sure cursor is at right place
(+ (print |) 4)
;;; paste
(+ (print (square 3)) 4) 
```

(2) type & slurf

```
(+ (square 3) 4)
;;; make sure cursor is at right place (| is cursor)
(+ |(square 3) 4)
;;; type the print form and make sure cursor is at right place
(+ (print|) (square 3) 4)
;;; paredit-forward-slurp-sexp
(+ (print (square 3)) 4) 
```

(3) 包装和类型

```
(+ (square 3) 4)
;;; make sure cursor is at right place (| is cursor)
(+ |(square 3) 4)
;;; paredit-wrap-round
(+ (|(square 3)) 4)
;;; type print
(+ (print (square 3)) 4) 
```

剪切&类型&粘贴是最乏味的。它不依赖于 paredit，并且最容易推广到将复杂的外部形式包装在多个可能是多行格式的内部形式周围的情况，例如，转动

```
(let ((x 1))
  (moo)
  (oink)
  (oink)) 
```

进入

```
(let ((x 1))
  (moo)
  (mapc (lambda (x)
          (oink)
          (oink))
        (list 1 2 3))) 
```

通过在两个 oink 周围包裹一个 mapc-over-lambda 形式。

Type & slurf 似乎是最知名的。它也可以推广到 mapc-over-lambda 的情况。

Wrap & type 是最容易输入的。当您将其推广到 map-over-lambda 情况时，您选择两个 oink，然后按`(`将其换行，并完成 lambda 形式的编写，然后选择 lambda 形式，按`(`将其换行，键入 mapc，您可以使用 CMf跨越 lambda 形式和类型（列表 1 2 3）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-06T14:28:12.990

有几种方法可以做到这一点。我通常这样做的方式是输入

"("

这让你

()println

然后是 CS-) 这让你

（打印）

开始使用 paredit 的最佳方法是将一张纸上的 paredit 备忘单贴在显示器的一侧。或者，您也可以安装 paredit-menu，它添加一个带有工具提示的菜单项，显示与 cheetsheet 相同的示例。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-05T23:31:02.493

我使用 MC-(，它将立即将以下 sexp 包装在括号中。

# ipad - willRotateToInterfaceOrientation 未从呈现的视图控制器中调用

> ID：14170404
> 
> 赞同：7
> 
> 时间：2013-01-05T09:25:41.433
> 
> 标签：ipad, uiviewcontroller, presentmodalviewcontroller, screen-rotation

我**在 ipad 上有 uiviewcontroller，**配置如下：

`shouldAutorotate (true) supportedInterfaceOrientations (UIInterfaceOrientationMaskAll)` 在里面`willRotateToInterfaceOrientation`我执行了一些技巧来调整我的界面。

从这个控制器的一个孩子，我展示了一个带有这个 -poor- 代码的 QuickLookController。

```
[[[[[UIApplication sharedApplication] delegate] window] rootViewController] presentViewController:previewController animated:YES completion:nil]; 
```

但是如果我旋转我的 ipad 方法`willRotateToInterfaceOrientation`不会被调用，所以我无法调整界面。

有人可以解释我或给我一些建议吗？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-05T10:02:50.433

**原因：** 这个问题可能有很多可能性。

1）如果您的视图`viewController`是 a不是 a`subView`的其他视图，则旋转调用可能不会传播到子视图的控制器。`rootViewController``navigationController`

2）我在某处读到，如果`Super`在需要的地方没有正确调用方法，那么它可能是旋转问题的原因，这意味着视图堆栈中与自动旋转相关的所有 ViewController 都必须调用`super`方法实现中的方法（即调用`[super viewDidLoad]`来自 ViewController 的`viewDidLoad`）。

**您可以使用以下技巧来处理方向更改。**

在 viewWillAppear 中注册一个通知器。

```
-(void)viewWillAppear:(BOOL)animated{
[[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(orientationChanged:)  name:UIDeviceOrientationDidChangeNotification  object:nil];} 
```

方向更改将通知以下功能。

```
- (void)orientationChanged:(NSNotification *)notification{
[self handleOrientation:[[UIApplication sharedApplication] statusBarOrientation]];} 
```

这将调用以下方法，您可以在其中处理方向更改。

```
 - (void) handleOrientation:(UIInterfaceOrientation) orientation {

        if (orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown) 
        { 
            //handle the portrait view    
        }
        else if (orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight) 
        {
            //handle the landscape view 
        }
     } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T09:56:18.003

我在苹果文档中找到了一段：

> 如果发生旋转时视图控制器的内容不在屏幕上，则它不会看到旋转消息列表。例如，考虑以下事件序列：
> 
> *   您的视图控制器全屏显示另一个视图控制器的内容。
> *   用户旋转设备以改变用户界面方向。
> *   您的应用程序会关闭呈现的视图控制器。
> 
> 在这个例子中，当旋转发生时呈现视图控制器是不可见的，因此它不会接收任何旋转事件。相反，当它重新出现时，它的视图会使用普通视图布局过程简单地调整大小和定位。如果您的布局代码需要知道设备的当前方向，它可以读取应用程序对象的 statusBarOrientation 属性来确定当前方向。

这正是我的问题所在，所以我在 -(void)viewWillAppear:(BOOL)animated 中添加了一些逻辑，以调整我的布局，如果某些东西在正确的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T12:02:38.507

确保将您的视图控制器添加为根视图控制器的子级，然后传递消息。

```
[rootViewController addChildViewController:viewController]; 
```

# windows-8 - Windows 8 地图应用程序中的方向边栏？

> ID：14170409
> 
> 赞同：1
> 
> 时间：2013-01-05T09:26:31.770
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我是 Windows 8 开发的新手。我想在 Windows 8 的 Microsoft 地图应用程序中实现类似于以下内容： 在地图应用程序中，当用户单击应用程序栏中的方向菜单项时，右侧会出现一个侧栏。

我怎样才能实现这样的侧边栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:23:42.833

不幸的是，WinRT 中没有内置这样的控件。最接近您所寻找的将是`SettingsFlyout`来自[Callisto](http://nuget.org/packages/Callisto)的控制。它不适合这种情况，因为它被设计为用作设置弹出窗口。最值得注意的是，您需要摆脱打开设置魅力的后退按钮。您可以尝试覆盖样式或获取控件[源代码](https://github.com/timheuer/callisto/blob/master/src/Callisto/Controls/Flyout/Flyout.cs)并对其进行修改。

不过，它使用起来非常简单：

```
var flyout = new SettingsFlyout();
flyout.FlyoutWidth = SettingsFlyout.SettingsFlyoutWidth.Narrow;
flyout.HeaderText = "Flyout";

flyout.Content = new FlyoutControl();
flyout.IsOpen = true; 
```

`FlyoutControl`将是`UserControl`您要显示的自定义。

# android - 在android中完成Imgage下载后在后台加载节目

> ID：14170411
> 
> 赞同：1
> 
> 时间：2013-01-05T09:26:33.873
> 
> 标签：android, android-layout, lazy-loading

正如您可以从屏幕截图中识别的那样，在完成图像下载后，它显示进度`dialog`仍在后台加载。我已经`Async`在我的项目中实现了从服务器加载图像并显示的任务。我也放`m_ProgressDialog.dismiss();`了。在 HDPI 中它不显示而`LDPI`它`MDPI`显示。我已将一个空白框架作为第一层，然后加载然后下载的图像。有什么解决办法吗？

![您可以在图像背景中看到仍在加载](../Images/f15ce17df3a8283a7833866c4b104511.png)

![在此处输入图像描述](../Images/502788fb685d5e3ef1bf456bb664f519.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:43:22.777

您的问题对我来说不是很清楚，并且屏幕截图很小，请提供更多详细信息。

可能是 View.SetVisibility(View.Invisible) 可以帮助你？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:53:52.703

保留`m.ProgressDialog.dismiss();`在 onPostExecute 方法中：

```
onPostExecute(String result) 
{
    m.ProgressDialog.dismiss();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T12:02:54.533

解决了，我的一位同事在该代码中采用了动态进度条，我刚刚减小了该进度条的大小。所以它会自动出现在图像后面。所以看不到那个酒吧。

# ios - 在 iOS 应用程序中执行 bash 命令

> ID：14170416
> 
> 赞同：2
> 
> 时间：2013-01-05T09:27:08.893
> 
> 标签：ios, bash, command

是否可以在 iOS 应用程序中执行 bash 命令？例如，我想在我的应用程序中执行“ping”命令，并且我还需要获取命令的输出。希望我正确描述了我的问题，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T09:33:28.627

是的，你可以，但它非常有限，而且 ping 可能不起作用......不管使用 system() 并检查 gdb。

[从 iPhone 应用程序运行 BASH 脚本？](https://stackoverflow.com/questions/1039207/running-bash-script-from-iphone-app)

但是昆汀关于使用 PING 是正确的。

注意：这仅对调试有用，不应用于实际应用程序。

此屏幕截图显示 ls 通过 C 函数 system() 在 ios 模拟器中运行。 ![这表明 ls 正在 ios 模拟器中运行。](../Images/c47941179be14076783c87711fe87769.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:32:08.407

> 是否可以在 iOS 应用程序中执行 bash 命令？

据我所知，默认情况下，bash 并未安装在 iOS 上，因此您需要在应用程序中包含 bash 的副本。

> 例如，我想在我的应用程序中执行“ping”命令，并且我还需要获取命令的输出。

`ping`不是[bash 命令](http://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html)。它是一个单独的应用程序。Apple 有一个[为 iOS 编写 ping 功能的指南](http://developer.apple.com/library/mac/#samplecode/SimplePing/Introduction/Intro.html)。

# android - WebViewClient 正在重定向，即使没有 URL

> ID：14170417
> 
> 赞同：4
> 
> 时间：2013-01-05T09:27:10.180
> 
> 标签：android

我使用下面的代码来显示我的 Twitter 登录页面。

第一次，它正在调用`public void onPageStarted----->public void onPageFinished(WebView view, String url)`，在我登录后它正在重定向 url 和调用`public boolean shouldOverrideUrlLoading()`。所以流程看起来像：

1.  `onPageStarted`
2.  `onPageFinished`
3.  `shouldOverrideUrlLoading`

但是当我注销并第二次来时，我期望与上面相同的流程，但流程更改为：

1.  `onPageStarted`
2.  `shouldOverrideUrlLoading`
3.  `onPageFinished`

我不明白为什么会发生这种变化，以及为什么`shouldOverrideUrlLoading()`即使之前没有 URL 也会调用它。

我打印了 webviews url，`null`但这仍然是它重定向到此方法的原因。

```
 private class TwitterWebViewClient extends WebViewClient {

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {

                Log.d(TAG, "Redirecting URL " + url);

                if (url.startsWith(TwitterApp.CALLBACK_URL)) {
                    mListener.onComplete(url);
                    Log.e("starts","starts with");
                    TwitterDialog.this.dismiss();

                    return true;
                }  else if (url.startsWith("authorize")) {

                    Log.e("authorize","authorization");
                    return false;
                }

                return true;
            }

            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                Log.d(TAG, "Page error: " + description);

                super.onReceivedError(view, errorCode, description, failingUrl);

                mListener.onError(description);

                TwitterDialog.this.dismiss();
            }

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                Log.e("page started in",url);
                Log.d(TAG, "Loading URL: " + url);
                super.onPageStarted(view, url, favicon);
                mSpinner.show();
            }

            @Override
            public void onPageFinished(WebView view, String url) {
                super.onPageFinished(view, url);
                String title = mWebView.getTitle();
                if (title != null && title.length() > 0) {
                    Log.e("title","settitle");
                    mTitle.setText(title);
                }
                mSpinner.dismiss();
            }

        } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T10:59:51.840

在 Android < 3.0 上的 shouldOverrideUrlLoading 上有一个错误，我有这段代码来获取 twitter oauth：

```
authorizationWebView.setWebViewClient(new WebViewClient() {

                @Override
                public void onPageStarted(WebView view, String url, Bitmap favicon) {
                    super.onPageStarted(view, url, favicon);

                    // 11 = Build.VERSION_CODES.HONEYCOMB (Android 3.0)
                    if (Build.VERSION.SDK_INT < 11) {

                        // According to this page:
                        //
                        // http://www.catchingtales.com/android-webview-shouldoverrideurlloading-and-redirect/416/
                        //
                        // shouldOverrideUrlLoading() is not called for redirects on
                        // Android earlier than 3.0, so call the method manually.
                        //
                        // The implementation of shouldOverrideUrlLoading() returns
                        // true only when the URL starts with the callback URL and
                        // dummyCallbackUrl is true.

                        if (shouldOverrideUrlLoading(view, url)) {
                            view.stopLoading();
                        }
                    }
                }

                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url) {

                    // If the url is the same host, not override (api.twitter.com)
                    if (Uri.parse(url).getHost().equals(Uri.parse(Constants.AUTHORIZE_URL).getHost())) {

                        return false;

                    } else if (url.startsWith(Constants.OAUTH_CALLBACK_URL)) {

                        // Retrieve access token in vase of oauth_verifier
                        Uri uri = Uri.parse(url);
                        String verifier = uri.getQueryParameter("oauth_verifier");

                        twitterOauth.retrieveAccessToken(verifier, MainActivity.this);

                        return true;

                    }

                    // If the user clicks in this webview on a link of other host, redirect to a browser.
                    Intent i = new Intent(Intent.ACTION_VIEW);
                    i.setData(Uri.parse(url));
                    startActivity(i);

                    return true;

                }

            }); 
```

希望这段代码对您有所帮助。

# android - 如何在facebook中搜索附近的地方

> ID：14170421
> 
> 赞同：0
> 
> 时间：2013-01-05T09:27:23.653
> 
> 标签：android, facebook, facebook-graph-api

我想在`Facebook`使用时搜索附近的地方`Graph Api`。

```
 double lat = 23.454554,lon=76.554545;
        Bundle params = new Bundle();
        params.putString("type", "place");
        params.putString("center", lat + "," + lon);
        params.putString("distance", "5000");
        params.putString("limit", "40");

        mFacebookRunner.request("search", params,
                new SearchPlaces()); 
```

即使我将距离增加到 10,000 米，我也能得到 20 个结果，它只提供 20 个结果。我想检索 40 个搜索结果..

**编辑 ：**

[https://graph.facebook.com/search?limit=60&type=place¢er=23.032852,72.637334&distance=10000&access_token=my_access_token](https://graph.facebook.com/search?limit=60&type=place&center=23.032852,72.637334&distance=10000&access_token=my_access_token)

我可以获得近 50 个搜索结果，但第一个选项不会提供超过 20 个结果。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:29:02.260

您有一个未记录的方法 distance() 可以使用，如下所述：

[Facebook FQL：获取范围内的签到](https://stackoverflow.com/questions/5250368/facebook-fql-get-checkins-within-range)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T21:06:28.827

我能够得到接近 40 但不准确的 40 的搜索结果。

```
 double lat = 23.454554,lon=76.554545;
    Bundle params = new Bundle();
    params.putString("type", "place");
    params.putString("center", lat + "," + lon);
    params.putString("distance", "5000");
    params.putString("limit", "40");

    mFacebookRunner.request("search", params,
            new SearchPlaces()); 
```

Log cat 仅显示 20 个结果（由于其限制），但是当我检查数组的长度时，它接近 40 .. 它可以搜索位置..

# javascript - 在 WebGL 中，如何加载使用多个纹理的 3D 模型（波前）？

> ID：14170423
> 
> 赞同：1
> 
> 时间：2013-01-05T09:27:48.120
> 
> 标签：javascript, graphics, html5-canvas, webgl

截至目前，我的代码支持加载 .obj（波前）文件并将其转换为 WebGL 对象（GL 缓冲区和渲染函数）。但是，我现在只能将一个纹理映射到整个对象。

我的文件加载器逐行读取，当前忽略`usemtl`.obj 文件的行。我的对象渲染函数看起来像这样（改编自[http://learningwebgl.com/blog/?page_id=1217](http://learningwebgl.com/blog/?page_id=1217)教程） - 还不完美，但为了完整起见，我发布了整个工作函数：

```
this.render = function(gl){
    // push identity to the matrix stack (to apply changes only to this object)
    mvPushMatrix();

    // apply translations
    mat4.translate(mvMatrix, [this.transX, this.transY, this.transZ]);

    // apply scaling
    mat4.scale(mvMatrix, [this.scaleX, this.scaleY, this.scaleZ]);

    // apply rotations
    mat4.rotate(mvMatrix, this.rotX, [1, 0, 0]);
    mat4.rotate(mvMatrix, this.rotY, [0, 1, 0]);
    mat4.rotate(mvMatrix, this.rotZ, [0, 0, 1]);

    // load position buffer
    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionVertexBuffer);
    gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,
        this.positionVertexBuffer.itemSize, gl.FLOAT, false, 0, 0);

    // load normals buffer
    gl.bindBuffer(gl.ARRAY_BUFFER, this.normalVertexBuffer);
    gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute,
        this.normalVertexBuffer.itemSize, gl.FLOAT, false, 0, 0);

    // load texture buffer
    gl.bindBuffer(gl.ARRAY_BUFFER, this.textureVertexBuffer);
    gl.vertexAttribPointer(shaderProgram.textureCoordAttribute,
        this.textureVertexBuffer.itemSize, gl.FLOAT, false, 0, 0);

    // load and apply the texture
    gl.activeTexture(gl.TEXTURE0);
    gl.bindTexture(gl.TEXTURE_2D, this.texture);
    gl.uniform1i(shaderProgram.samplerUniform, 0);

    // if blending is turned on, apply the blending and alpha value
    if(this.blending || this.firstRun){
        gl.blendFunc(gl.SRC_ALPHA, gl.ONE);
        gl.enable(gl.BLEND);
        gl.disable(gl.DEPTH_TEST);
        gl.uniform1f(shaderProgram.alphaUniform, this.alpha);
    }
    // otherwise, disable blending mode and render normally
    else{
        gl.disable(gl.BLEND);
        gl.enable(gl.DEPTH_TEST);
        gl.uniform1f(shaderProgram.alphaUniform, 1.0);
    }

    // render with indices IF indices are enabled
    if(this.indicesEnabled){
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexVertexBuffer);
        setMatrixUniforms();
        gl.drawElements(gl.TRIANGLES,
            this.indexVertexBuffer.numItems, gl.UNSIGNED_SHORT, 0);
    }
    // otherwise, render normally
    else {
        setMatrixUniforms();
        gl.drawArrays(gl.TRIANGLES, 0, this.textureVertexBuffer.numItems);
    }

    // pop the matrix stack
    mvPopMatrix();

    // unflag first run after first frame rendering
    this.firstRun = false;
} 
```

我想做的是读入使用多个纹理的文件。我怎样才能做到这一点？我最初的假设是从 .obj 中读取一个纹理的所有面，一旦纹理发生变化，就开始读取一个单独的缓冲区，然后将对象分成多个部分（每个纹理一个部分）并将它们渲染为如果它们是单独的对象。但是在更改代码之前，我想看看这是否正确，或者是否有解决此问题的特别好的方法？

老实说，我根本不知道该怎么做。有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:20:49.417

是的，这几乎就是它的完成方式。

通常对于专业游戏，艺术家需要为每个对象使用 1 个纹理，因为两个 100 多边形模型对 gl.drawXXX 的 2 次调用比一个 200 多边形模型对 gl.drawXXX 的 1 次调用慢。

否则，一些团队有工具可以读取文件并将所有内容转换为 1 个纹理，将纹理合并为一个超级纹理。其他团队拥有将多边形分类为每个纹理 1 个模型的工具。

他们有效地为每个多边形找出它属于哪个纹理，然后他们将这些顶点放入该纹理的桶中。最后他们写出每个桶，每个纹理 1 个。

# python - sqlite3 order by 需要时间

> ID：14170424
> 
> 赞同：1
> 
> 时间：2013-01-05T09:27:58.283
> 
> 标签：python, sql, select, sqlite, sql-order-by

我在 sqlite3 db 中有位于内存映射分区上的表。我有如下查询计划的 select 语句：

```
sqlite3> EXPLAIN QUERY PLAN SELECT sst.prefix, 0 AS pb, sst.rate, 
sst.rate_n, sst.interval_1, sst.interval_n
FROM sch AS sst
WHERE
sst.i_workbook_id = 989 AND 
sst.prefix IN ('', '1', '19', '191', '1919', '19198') AND 
sst.activation_date <= DATETIME('now') AND 
(sst.expiration_date > DATETIME('now') OR sst.expiration_date IS NULL) AND
sst.start_time <= TIME('now') AND 
sst.end_time >= TIME('now');

0|0|0|SCAN TABLE sch AS sst (~185 rows)
0|0|0|EXECUTE LIST SUBQUERY 1 
```

现在，如果我添加订单，那么他的查询计划会两次命中主表，并且比以前长 4 倍，而表有 130 万行但过滤的行只有两个。

这是新的查询计划：

```
sqlite3> EXPLAIN QUERY PLAN SELECT sst.prefix, 0 AS pb, sst.rate, 
sst.rate_n, sst.interval_1, sst.interval_n
FROM sch AS sst
WHERE
sst.i_workbook_id = 989 AND 
sst.prefix IN ('', '1', '19', '191', '1919', '19198') AND 
sst.activation_date <= DATETIME('now') AND 
(sst.expiration_date > DATETIME('now') OR sst.expiration_date IS NULL) AND
sst.start_time <= TIME('now') AND 
sst.end_time >= TIME('now') order by sst.prefix;     

0|0|0|EXECUTE LIST SUBQUERY 1
0|0|0|SEARCH TABLE sch AS sst USING AUTOMATIC COVERING INDEX (i_workbook_id=?) (~7 rows)
0|0|0|EXECUTE LIST SUBQUERY 1
0|0|0|SEARCH TABLE sch AS sst USING AUTOMATIC COVERING INDEX (i_workbook_id=?) (~7 rows)
0|0|0|EXECUTE LIST SUBQUERY 1
0|0|0|USE TEMP B-TREE FOR ORDER BY 
```

有任何想法吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:20:39.247

`i_workbook_id`SQLite 尝试通过在列上创建临时索引来优化您的第二个查询。该查找被多次完成，因为`OR`无法以更好的方式优化表达式。（请参阅[查询优化器](http://www.sqlite.org/optoverview.html)和[查询规划](http://www.sqlite.org/queryplanner.html)器文档。）

你可以尝试做的是

*   在列上创建索引`i_workbook_id`；或者
*   `i_workbook_id`在和`prefix`列上创建索引；或者
*   首先在这两个上创建一个*覆盖*索引，然后在`SELECT`and`WHERE`子句中提到的所有其他列上创建一个覆盖索引。

# apache - 如何设置无法通过 Apache Sling 中的浏览器寻址访问的 jsp 页面？

> ID：14170432
> 
> 赞同：0
> 
> 时间：2013-01-05T09:29:10.273
> 
> 标签：apache, jackrabbit, jcr, sling, jsr170

我正在开发一个吊索 WCMS。当我在浏览器中调用某个页面的地址[eg 'http://localhost:8080/apps/bcms/pages/test.jsp'] 时，会出现一个保存对话框并要求保存jsp 文件。如何防止通过直接寻址访问jsp页面？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:33:41.700

只需删除匿名的权限。脚本解析和执行由脚本用户运行。

# android - 空指针异常 - 警报对话框 Android 中的表单

> ID：14170433
> 
> 赞同：0
> 
> 时间：2013-01-05T09:29:11.497
> 
> 标签：android, android-edittext, android-alertdialog

每当我单击对话框中的“确定”按钮时，都会遇到空指针异常。

```
public class TestActivity extends ListActivity {

    private Context context;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        context = this;
        setContentView(R.layout.activity_bucket_crud);

    }

    public void addTestItem(View view) {
        LayoutInflater inflater = getLayoutInflater();
        new AlertDialog.Builder(this)
            .setTitle("Add Item")
            .setIcon(R.drawable.add)
            .setView(inflater.inflate(R.layout.activity_bucket_crudadd, null))
            .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    EditText text = (EditText)findViewById(R.id.editTextAdd);
                    DatabaseHandler myDbHelper = new DatabaseHandler(context);
                    myDbHelper.insertItem(text.getText().toString());
                }
            })
            .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    dialog.cancel();
                }
            }).show();
    }

} 
```

这是错误

```
01-05 09:20:35.052: E/AndroidRuntime(761): FATAL EXCEPTION: main
01-05 09:20:35.052: E/AndroidRuntime(761): java.lang.NullPointerException
01-05 09:20:35.052: E/AndroidRuntime(761):  at com.example.test.TestActivity$1.onClick(TestActivity.java:65)
01-05 09:20:35.052: E/AndroidRuntime(761):  at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166) 
```

我的布局是这样

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="150dp">

    <EditText
        android:id="@+id/editTextAdd"
        android:layout_width="wrap_content"
        android:layout_height="100dp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:ems="10"
        android:inputType="textMultiLine"
        android:layout_margin="5dp" 
        android:padding="3dp">

        <requestFocus />
    </EditText>

</RelativeLayout> 
```

似乎当我在 EditText 中输入文本时，没有读取该值..

```
EditText text = (EditText)findViewById(R.id.editTextAdd); 
```

这是因为该行指向**空指针**`(text.getText().toString()`的原因吗？如果是，**我怎样才能得到文本的价值**？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T09:33:00.530

因为`EditText text`是**NULL**。您不是指`EditText text`来自**Dialog Layout**。

只是改变你的线路，让我知道发生了什么..

```
 EditText text = (EditText) dialog.findViewById(R.id.editTextAdd); 
```

要从 Dialog Layout 获取`EditText`参考，您必须使用`dialog`reference with`findViewById()`方法。

**更新：**

```
LayoutInflater inflater = getLayoutInflater();
View view = null;
view  = inflater.inflate(R.layout.activity_bucket_crudadd, null);
        new AlertDialog.Builder(this)
            .setTitle("Add Item")
            .setIcon(R.drawable.add)
            .setView(view) 
```

现在访问编辑文本，例如，

```
EditText text = (EditText) view.findViewById(R.id.editTextAdd); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T09:30:26.817

您不能在`OnClick()`对话框侦听器的方法内创建 EditText 实例。将 EditText 实例创建为全局对象，并在将其插入数据库时​​使用该引用。`findViewById()`方法只能在子活动中使用，当您尝试在其他类/接口中使用时，上下文将被更改。

或者你可以试试下面的代码：

```
EditText text = (EditText)TestActivity.this.findViewById(R.id.editTextAdd); 
```

# android - Android 片段意外关闭

> ID：14170435
> 
> 赞同：0
> 
> 时间：2013-01-05T09:29:23.633
> 
> 标签：android, android-fragments, android-framelayout

我使用 FrameLayout 的持有人活动。

在那里我放了一个带有列表视图的片段。它工作正常。

```
ft = getSupportFragmentManager().beginTransaction();
ft.add(R.id.fragments, feedFragment);
ft.commit(); 
```

然后我添加另一个片段。

```
android.support.v4.app.Fragment targetFragment = new MainPhotoFragment();
ft = getSupportFragmentManager().beginTransaction();
ft.add(R.id.fragments, targetFragment);
ft.addToBackStack(null);
ft.commit(); 
```

在这里，我使用 add() 而不是 replace() 在回击键时返回到列表视图的先前位置。它工作正常。

但是可以从第二个片段导航到第三个片段。

```
android.support.v4.app.Fragment targetFragment = new FullPhotoFragment();
ft = getSupportFragmentManager().beginTransaction();
ft.replace(R.id.fragments, targetFragment);
ft.addToBackStack(null);
ft.commit(); 
```

在这里，我使用替换来强制第二个片段在回击键时重新加载。

有时来自第三个片段的返回键工作正常，它显示正在重新加载的第二个片段出现。

但有时（正如我在尝试此步骤时第一次看到的那样）从第三个片段回击键会导致我进入第一个片段，而不是我的期望关闭第二个片段。第一个片段正在重新加载。

如何防止这种奇怪的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:48:35.310

add() 方法会将 Fragments 添加到 Container 中，并且添加到 Container 的任何其他 Fragment 都将排在第一个 Fragment 后面。它们将不可见，除非第一个片段变为不可见。我希望这是您面临的问题。如果您也将 replace() 用于第一个 --> 第二个片段导航，那就太好了。

# css - css 效果在 IE 中不起作用

> ID：14170436
> 
> 赞同：0
> 
> 时间：2013-01-05T09:29:33.760
> 
> 标签：css

我有一个基本代码，它必须根据屏幕分辨率对齐图像的大小......这个脚本在 Mozilla 上运行良好，但在 IE 中完全失败......这是一个示例代码......

```
<html>
<style>
@media screen and (max-width:1024px){
#bar{width:90px;height:7px;}
}
</style>
</head>
<body>
   <p>
      <img id="bar" src="bgn.jpg">
   </p>
</body>
</html> 
```

是否有任何调整或我必须在脚本中包含的任何内容...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:40:01.357

尝试实施[Modernizr](http://modernizr.com/)以获得 IE6 及更高版本的有效回退。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T09:39:22.207

缺少文档类型

利用`<!DOCTYPE html>`

# xcode - 在 iOS 6 中发布 Facebook

> ID：14170437
> 
> 赞同：1
> 
> 时间：2013-01-05T09:29:46.893
> 
> 标签：xcode, facebook, sdk, ios6

如何在我的 Facebook 墙上发布可点击的名称，以便在我点击名称时打开链接，在 iOS 6 中使用 SLComposeViewController。

提前致谢，

# ios - 在 Cordova/PhoneGap 中捕获本机异常

> ID：14170438
> 
> 赞同：3
> 
> 时间：2013-01-05T09:29:48.867
> 
> 标签：ios, cordova, exception-handling

我有一个在 iOS 上运行的 Cordova/PhoneGap + JQueryMobile 应用程序，一些客户报告说该应用程序在某些交互点期间只是“消失”在他们身上。

不幸的是我无法重现它，所以我有点卡住了。我打赌该应用程序内存不足，或者可能遇到了其他类型的 iOS 级别异常。

我想知道的是 - 有没有人对在 PhoneGap 中捕获本机异常并记录它们或触发用户可以通过电子邮件发送给我们的崩溃报告的好方法有任何建议？在我们看到崩溃是由什么触发之前，没有修复它的希望。

# python - 我的 post 方法返回 (u'') 并且 django 保存时包含 (u'') 字符串

> ID：14170439
> 
> 赞同：0
> 
> 时间：2013-01-05T09:29:51.153
> 
> 标签：python, django, post

这就是我从网页中检索帖子数据的方式。可以保存人员模型，但它包含`"(u'')"`字符串。例如，如果将其更改`firstname`为“Alex”，它会获取原始值`u('Alex')`并保存它。

```
def submit_e(req, person_id=None):

if(req.POST):

    try:
        person_id = req.POST['driver']
        person = Person.objects.get(pk=person_id)

        person.firstname = req.POST['firstname'],
        person.midname   = req.POST['middleinitial'],
        person.lastname  = req.POST['lastname'],

        person.full_clean()
        person.save()
    except Exception as e:
        print e
    return HttpResponseRedirect(reverse('users:user_main')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:50:34.180

*注意：以下是我根据您的问题对您所看到的内容的最佳猜测。如果我猜错了，请用更多详细信息更新您的帖子 -`print`在您的代码中放置语句并将输出添加到您的帖子中将是一个好的开始。*

字符串上的`u`前缀表示 Unicode 字符串。它实际上不是字符串内容的一部分。如果我们在解释器中创建一个字符串：

```
>>> name = u'Me' 
```

然后请求字符串的详细信息，

```
>>> name
u'Me' 
```

然后`u`显示它，因为它是关于字符串的信息的一部分，这是我们所要求的。如果我们打印字符串的内容

```
>>> print name
Me 
```

然后`u`不显示（就像不显示引号一样）。

使用解释器尝试重现您的问题，我为用户名创建了一个带有 Unicode 字符串的新用户：

```
>>> from django.contrib.auth.models import User
>>> new_user = User()
>>> new_user.username = u'Me'
>>> new_user.save() 
```

和以前一样，如果我们请求有关字符串的详细信息，我们会看到`u`和引号，但如果我们打印字符串的内容，我们不会：

```
>>> new_user.username
u'Me'
>>> print new_user.username
>>> Me 
```

为了进一步确认`u`没有存储，我们可以直接浏览数据库：

```
sqlite> select username from auth_user;
Me 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T04:45:07.060

您需要删除每行末尾的“，”，因此，之前：

```
person.firstname = req.POST['firstname'],
person.midname   = req.POST['middleinitial'],
person.lastname  = req.POST['lastname'], 
```

后

```
person.firstname = req.POST['firstname']
person.midname   = req.POST['middleinitial']
person.lastname  = req.POST['lastname'] 
```

# jsp - 如何获取我可以在页面源代码上查看的提交按钮的名称字段的值？

> ID：14170441
> 
> 赞同：1
> 
> 时间：2013-01-05T09:30:07.893
> 
> 标签：jsp, servlets

我创建了一个 HTML 表单，它由 和 的多个按钮`"edit"`组成`"delete"`。我把它们放在一个`for`循环中，以便在另一个页面上查看它们中的许多。

如何在下一个 JSP 页面上获取提交按钮的名称字段，或者我单击的任何按钮？或者，您可以为我提供一个替代方案吗？

```
<% for (int t = 1; t < 10; t++) { %>
    <label>
        <input type="submit" name="<%=t %>" value="edit" onclick="this.form.action='df1.jsp?flag=1&act=1';this.form.submit();" />
        <input type="submit" name="<%=t %>" value="delete" onclick="this.form.action='df1.jsp?flag=1&act=1';this.form.submit();" />
    </label>
<% } %> 
```

当我查看页面源时，它显示`name="1"`for edit 和`name="1"`for delete until `10`。

我想在服务器端获取名称字段的值。我也不能申请`request.getParameter()`，因为我不知道用户会点击哪个按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:32:20.703

由于您已经在 onclick 中更改了表单操作 URL（这是一种非常糟糕的做法，但除此之外），为什么不同时添加行标识符呢？

```
<input type="submit" name="<%=t %>" value="edit" onclick="this.form.action='df1.jsp?flag=1&act=1&edit=<%=t%>';this.form.submit();" />
<input type="submit" name="<%=t %>" value="delete" onclick="this.form.action='df1.jsp?flag=1&act=1&delete=<%=t%>';this.form.submit();" /> 
```

这样你就可以这样做：

```
String edit = request.getParameter("edit");

if (edit != null) {
    // Edit button of row "edit" was invoked. Do your job here.
}

String delete = request.getParameter("delete");

if (delete != null) {
    // Delete button of row "delete" was invoked. Do your job here.
} 
```

否则，您需要在按钮名称前加上一些固定标识符：

```
<input type="submit" name="edit_<%=t %>" value="edit" onclick="this.form.action='df1.jsp?flag=1&act=1';this.form.submit();" />
<input type="submit" name="delete_<%=t %>" value="delete" onclick="this.form.action='df1.jsp?flag=1&act=1';this.form.submit();" /> 
```

这样你就可以做到：

```
for (int t = 1; t < 10; t++) {
    if (request.getParameter("edit_" + t) != null) {
        // Edit button on index "t" was invoked. Do your job here.
        break;
    }

    if (request.getParameter("delete_" + t) != null) {
        // Delete button on index "t" was invoked. Do your job here.
        break;
    }
} 
```

* * *

**与具体问题无关，使用***scriptlet* 以这种方式编写 JSP`<% %>`十年以来一直被认为是老派和糟糕的做法。另请参阅[如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:34:10.600

您可以采取几种方法来解决这个问题。

# 查看所有提交的字段

*   获取所有提交的字段（根据[这个问题](https://stackoverflow.com/questions/2548687/get-all-parameters-from-jsp-page)）
*   循环它们
*   模式匹配它们的名称，直到找到与提交按钮的命名约定匹配的名称

# 查找所有可能的提交按钮名称

*   生成您可能拥有的所有提交按钮名称的列表
*   遍历该列表，尝试获取每个名称的参数，直到找到一个

* * *

鉴于您的名字是数字，可能性的数量可能不是有限的。所以第一种方法可能更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T09:47:13.450

使用隐藏标签，它存储点击按钮的值

```
<input type="hidden" name="hidBt" /> 
```

将此隐藏标签放在值之外。

```
<label>
    <input type="submit" name="<%=t %>" value="edit" onclick="this.form.hidBt.value=this.value;this.form.action='df1.jsp?flag=1&act=1';this.form.submit();" />
    <input type="submit" name="<%=t %>" value="delete" onclick="this.form.hidBt.value=this.value;this.form.action='df1.jsp?flag=1&act=1';this.form.submit();" />
</label> 
```

之后调用隐藏变量

```
String butValue = request.getParameter("hidBt"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-05T09:34:01.593

```
you can get button using 

String buttonName =  request.getParameter("button-name") 
```

然后你必须将值作为隐藏值传递到下一页；

# java - ${user.home} 的值是如何初始化的？

> ID：14170443
> 
> 赞同：5
> 
> 时间：2013-01-05T09:30:14.163
> 
> 标签：java, java-7

```
echo %userprofile%
C:\Users\f.lastname 
```

但价值`${user.home}`在于`\\LOGONSERVER\RedirectedFolders\f.lastname\`网络驱动。

那么如何`${user.home}`初始化以及如何将其值更改为普通用户配置文件目录？

**解决！**
通过修复“HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders”中的桌面路径值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:37:43.243

该变量由 JVM 定义，而不是由 Maven 定义，它取自系统设置。如果值错误，则系统未正确配置。

也许[这个答案可以帮助你](https://stackoverflow.com/questions/2134338/java-user-home-is-being-set-to-userprofile-and-not-being-resolved)。

# asp.net-mvc-4 - @Html.DropDownListFor; 如何为 DDL 中的每个项目设置不同的背景颜色？

> ID：14170444
> 
> 赞同：2
> 
> 时间：2013-01-05T09:30:23.880
> 
> 标签：asp.net-mvc-4, dropdownlistfor

我有一个下拉列表（@html.DropDownListFor），其中我显示颜色的名称...我想显示具有单独背景颜色的每个项目。例如，项目“绿色”应该是绿色背景，“黄色”在黄色背景。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:32:12.660

不要忘记，您始终可以在视图中编写老式 HTML（OMG！）。

但是，如果您在多个地方使用该代码，则编写一个扩展 DropDownListFor 的助手来创建带有样式的选择。如果您使用过一次，您可以简单地编写如下内容：

```
<select>
    @foreach (var item in Model.Items)
    {
        <option style="background-color: @item.Color;" value="@item.Value">@item.Text</option>
    }
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T16:36:12.763

[在 ASP.NET 论坛上查看已解决的解决方案](http://forums.asp.net/t/1871921.aspx/1?%20Html%20DropDownListFor%20How%20to%20set%20different%20background%20color%20for%20each%20item%20in%20DDL%20)

# android - 从任何地方调用 Activity 类提供的函数

> ID：14170445
> 
> 赞同：0
> 
> 时间：2013-01-05T09:30:25.880
> 
> 标签：android, android-layout, android-intent, android-activity

如何从不扩展 Activity 的类中调用 Activity 类提供的功能？理论上，是的，如果我不扩展 Activity 我不能直接使用它提供的功能。但是是否为此提供了解决方法？如果没有，这些功能是否有替代品或替代方法？

例如，如果我的类扩展了 Activity，我可以调用`setContentView()`以实例化我的布局 xml 文件。但是如果我的类扩展了其他一些类并且没有扩展 Activity，那么我可以使用 LayoutInflater 来完成任务。但是其他功能`registerReceiver()`呢？我如何`registerReceiver()`从任何其他类中获得 '' 的功能，显然我不希望每个这样的类都扩展 Activity。通过“”进行静态访问`Activity.function_name`也是不可能的，因为这些函数不是静态的。

某些服务可以从任何地方访问。例如 ' `println()`' 或`Log.e()`, 系统函数可以在需要时从任何地方调用。其他关键功能是否有类似的方法？

**结论：**

将上下文传递给目标类。然而，为了访问某些函数，需要将传递的 Context 类型转换为 Activity。

Changdeo和BT的答案都是正确的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T09:44:46.510

尽管我没有找到任何明确说明原因的文档，但在我曾经需要这样做的每种情况下，只需传递`Activity`'s`Context`就足够了。

对于传递给任何函数的`Context`调用`contextActivity`，以下将允许访问您需要的这些成员函数：

```
((Activity) contextActivity).<anyMemberFunction> 
```

或者，如果您在多种情况下都需要这些功能，那么执行以下操作可能是最简单的：

```
Activity myActivity = (Activity) contextActivity; 
```

从那里您可以随时使用以下方法访问这些`Activity`成员函数：

```
myActivity.<desiredFunction>; 
```

正如我所提到的，我从未发现任何这种方法不起作用的情况，但也没有可靠的文档说明这将始终有效。这是我看到的一贯使用的技巧。如果有人有更多要补充的，请做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T09:36:08.973

对于前

```
Class XYZActivity extends Activity
{
   ......
    ......
    MyClass myClass = new MyClass(this);
    // OR you can pass just context
    // MyClass myClass = new MyClass(getContext());
}

Class MyClass
{
  Context context;
  Myclass(Context context)
  {
   this.context = context;
   context.registe....//Or any function 
   }
} 
```

# mysql - MySQL - BOOLEAN 模式下的 FULLTEXT + 使用视图字段的相关性

> ID：14170450
> 
> 赞同：1
> 
> 时间：2013-01-05T09:31:20.623
> 
> 标签：mysql, database-design, full-text-search

我有下表：

```
CREATE TABLE IF NOT EXISTS `search`
(
    `id` BIGINT(16) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `string` TEXT NOT NULL,
    `views` BIGINT(16) NOT NULL,
    FULLTEXT(string)
) ENGINE=MyISAM; 
```

它共有 5,395,939 个条目。要对某个词（如“a”）执行搜索，我使用以下查询：

```
SELECT * FROM `search` WHERE MATCH(string) AGAINST('+a*' IN BOOLEAN MODE) ORDER BY `views` DESC LIMIT 10 
```

但是真的很慢=(。上面的查询用了15.4423秒执行。显然，不用排序就快了`views`，不到0.002s。

我正在使用 ft_min_word_len=1 和 ft_stopword_file=

有没有办法在全文搜索中使用视图作为相关性，而不会让它太慢？例如，我希望搜索词“a b”匹配“big apple”，而不是“ibg apple”（只需要匹配搜索前缀）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:11:42.613

由于没有人回答我的问题，我发布了我的解决方案（不是我希望看到的我是否在谷歌搜索的解决方案，因为它不像简单的数据库设计那样容易应用，但它仍然是一个解决方案到这个问题）。我无法用 MySQL 使用的任何引擎或函数真正解决它。对不起=/。

所以，我决定开发自己的软件来做这件事（用 C++，但你可以用任何其他语言应用它）。如果您要寻找的是一种在小字符串中搜索某些单词前缀的方法（我的字符串的平均长度是15），那么您可以使用以下算法：

```
1\. Create a trie. Each word of each string is put on the trie.
   Each leaf has a list of the ids that match that word.
2\. Use a map/dictionary (or an array) to memorize the informations
   for each id (map[id] = information). 
```

搜索字符串： 注意：字符串的格式为“word1 word2 word3...”。如果它有一些符号，如#、@、$，您可能会将它们视为“”（空格）。示例：“拉斐尔·佩雷拉”

```
1\. Search for the prefix "Rafael" in the trie. Put all the ids you
   get in a set (a Binary-Search Tree that ignores repeated values).
   Let's call this set "mainSet".
2\. Search for the prefix "Perrella" in the trie. For each result,
   put them in a second set (secSet) if and only if they are already
   in the mainSet. Then, clear mainSet and do mainSet = secSet.
3\. IF there are still words lefting to search, repeat the second step
   for all those words. 
```

在这些步骤之后，您将拥有一个包含所有结果的集合。使用 (views, id) 对创建一个向量，并按降序对向量进行排序。所以，只要得到你想要的结果......我限制了 30 个结果。

注意：您可以先对单词进行排序以删除具有相同前缀的单词（例如，在“Jan Ja Jan Ra”中您只需要“Jan Ra”）。我不会解释它，因为算法很明显。

这种算法有时可能很糟糕（例如，如果我搜索“abcdef ... z”，我将搜索整个 trie...）。所以，我做了一个改进。

```
1\. For each "id" in your map, create also a small trie, that will
   contain the words of the string (include a trie for each m[id]...
   m[id].trie?). 
```

然后，进行搜索：

```
1\. Choose the longest word in the search string (it's not guaranteed,
   but it is probably the word with the fewest results in the trie...).
2\. Apply the step 1 of the old algorithm.
3\. Make a vector with the ids in the mainSet.
4\. Let's make the final vector. For each id in the vector you've created
   in step 3, search in the trie of this id (m[id].trie?) for all words
   in the search string. If it includes all words, it's a valid id and
   you might include it in the final vector; else, just ignore this id.
5\. Repeat step 4 until there are no more ids to verify. After that, just
   sort the final vector for <views, id>. 
```

现在，我将数据库用作轻松存储和加载数据的一种方式。该表中的所有查询都直接向该软件询问。当我添加或删除记录时，我会同时发送到数据库和软件，所以我总是保持更新。加载所有数据大约需要 30 秒，但是查询很快（最慢的查询为 0.03 秒，平均为 0.001 秒；使用我自己的笔记本，没有在专用主机中尝试过，可能很多快点）。

# excel - 使用 Excel VBA 将数据对齐到行

> ID：14170451
> 
> 赞同：0
> 
> 时间：2013-01-05T09:31:22.760
> 
> 标签：excel, vba

我需要使用 VBA 将这些数据与 Excel 中的行对齐。我有大量这种格式的数据。我需要把它排成行

```
SUBSCRIBER DETAILS
IMSI             MSISDN           STATE
405845001382775  919085919027     IDLE

DATE             TIME             CELLID
130103           122725           404-29-12906-15353

IMEI
356395024630200

SUBSCRIBER DETAILS
IMSI             MSISDN           STATE
405845002463183  919085325090     IDET

DATE             TIME             CELLID
130103           103447           404-29-12107-23993

IMEI
354917031429730 
```

所需输出：-

```
IMSI        MSISDN           STATE  DATE             TIME             CELLID            DATE             TIME             CELLID            IMEI
405845001382775  919085919027     IDLE              130103           122725           404-29-12906-15353            356395024630200
IMSI             MSISDN           STATE DATE             TIME             CELLID            DATE             TIME             CELLID            IMEI
405845002463183  919085325090     IDET              130103           103447           404-29-12107-23993            354917031429730 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T21:25:11.037

这是您正在寻找的部分。选择范围后根据需要使用。每种对齐方式都与“With 语句”一起使用

```
With Selection
    .HorizontalAlignment = xlLeft
    .HorizontalAlignment = xlCenter
    .HorizontalAlignment = xlRight
    .VerticalAlignment = xlTop
    .VerticalAlignment = xlCenter
    .VerticalAlignment = xlBottom
End With 
```

# android - 案例变体是否存在？

> ID：14170457
> 
> 赞同：6
> 
> 时间：2013-01-05T09:32:01.187
> 
> 标签：android, eclipse

我下载了一个APP源代码。我第一次上传它调试得很好。然后我不小心关闭并删除了该项目。

当我解压APP的源代码并再次导入源代码时，我遇到了提示：`case variant exists.`

![在此处输入图像描述](../Images/f6465a3ac0ec42580408aaa62a998ad0.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T01:18:28.810

我遇到了同样的问题，问题只是我的工作区中有另一个项目，名称相同，但大小写不同。从工作区中删除第一个项目后，它导入良好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T07:09:42.063

I have not heard of this before - mysterious. I would be that it's related to the Project Name (app name) you entered before you downloaded any source. There is a known issue when special characters like quotes, apostrophes, hyphens, and punctuation are used in project names. I don't know what your project is named but I would start there. If you are using special characters in the name - rename the app in the control panel then re-download the source and see what happens

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T12:34:36.087

Is the file you want to import in workspace folder?If it is so move it

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-13T17:13:55.103

*   确保您没有其他同名项目。
*   确保您没有来自旧项目的任何残留物包含相同的名称（SVN 文件或任何隐藏的文件和文件夹）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T12:15:41.347

Eclipse 项目名称不区分大小写，这意味着您不能有两个项目名称相同（但大小写不同）；例如“myApp”与“MyApp”

*   检查您的项目列表中是否没有类似的项目（Menu\Window\Show View\Project Explorer 或 Package Explorer）
*   检查您没有在运行配置中定义类似的项目（菜单\运行\运行配置\Adroid 应用程序）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T04:26:25.840

您只需要在提取之前重命名 file.zip。删除项目名称中使用的特殊字符，如引号、撇号、连字符和标点符号。

# android - 如何通过按钮断开电话？

> ID：14170461
> 
> 赞同：1
> 
> 时间：2013-01-05T09:32:11.933
> 
> 标签：android

如何通过按钮断开电话。我正在使用以下代码：

```
try {
        // Java reflection to gain access to TelephonyManager's
        // ITelephony getter
        Log.v(TAG, "Get getTeleService...");
        Class c = Class.forName(tm.getClass().getName());
        Method m = c.getDeclaredMethod("getITelephony");
        m.setAccessible(true);
        com.android.internal.telephony.ITelephony telephonyService = (ITelephony) m
                .invoke(tm);
    } catch (Exception e) {
        e.printStackTrace();
        Log.e(TAG, "FATAL ERROR: could not connect to telephony subsystem");
        Log.e(TAG, "Exception object: " + e); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:46:30.363

要以编程方式断开呼叫，您必须`ITelephony.AIDL`在项目中添加文件。如果您已添加它，那么您的包名称必须是`com/android/internal/telephony/ITelephony.AIDL`：有关详细信息，请参阅[阻止来电](http://androidsourcecode.blogspot.in/2010/10/blocking-incoming-call-android.html)。[从这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/com/android/internal/telephony/ITelephony.java)下载 AIDL 文件。

断开呼叫使用`endCall();`方法`ITelephony`

# python - 为什么 Ninja-ide 看不到已安装的 sip 版本？

> ID：14170466
> 
> 赞同：2
> 
> 时间：2013-01-05T09:33:01.780
> 
> 标签：python, macos, ide

我正在尝试安装和运行 Ninja-ide。我已按照[此处文档中的说明进行操作](http://ninja-ide.readthedocs.org/en/latest/installing.html)

我移动到 Ninja-ide 文件夹并运行建议的命令：

```
$ python ninja-ide.py 
```

并获得以下信息：

```
XXXX-XXXX-MacBook-Pro:ninja-ide twmeggs$ python ninja-ide.py
Traceback (most recent call last):
  File "ninja-ide.py", line 26, in <module>
    import ninja_ide
  File "/Users/XXXX/ninja-ide/ninja_ide/__init__.py", line 48, in <module>
import sip
ImportError: No module named sip 
```

所以我尝试重新安装 sip：

```
XXXX-XXXX-MacBook-Pro:ninja-ide $ brew install sip 
```

只是被告知它已经安装：

```
Error: sip-4.13.3 already installed 
```

现在，我会在这里举手说我只是习惯了使用 shell 执行命令，只是习惯了 Mac 中的文件/目录/文件夹布局，所以我完全有可能我在这里搞砸了一些简单的事情。

如果有人可以提供一些帮助，甚至是朝着正确的方向轻推，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:22:44.163

感谢您的想法 seumas - 我最终不必这样做。

事实证明，虽然我已经下载并解压缩了 sip，但我没有正确安装它。我需要运行：

```
$ python configure.py
$ make
$ make install 
```

从 sip 文件夹

完成后，我必须对 PyQt 包重复相同的操作。完成后，我可以毫无问题地从 shell 启动 Ninja-ide。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:38:31.097

听起来你可能有两个不同版本的 python，尝试运行：

```
brew doctor 
```

它将告诉您存在哪些重复项，如果您通过 brew 安装 python，请尝试编辑路径以将 usr/local/bin 放置在 usr/bin 之前，如此处所述

[默认情况下python自制](https://stackoverflow.com/questions/5157678/python-homebrew-by-default)

# sql-server - Java 异常：语句未返回结果集

> ID：14170467
> 
> 赞同：0
> 
> 时间：2013-01-05T09:33:12.700
> 
> 标签：sql-server, jdbc, websphere

我原来的环境是**SQL server 2005 + WebSphere v6.0(JDBC 3.0)**。当我运行如下程序时，它运行良好。

```
ResultSet rs=stmt.executeQuery(sql);
rs.next(); 
```

但是，当我将环境升级到**SQL server 2005 + WebSphere v8.5(JDBC 4.0)**时，我收到错误消息：

> com.microsoft.sqlserver.jdbc.SQLServerException：语句未返回结果集。

从这个论坛的信息来看，我似乎有多个结果集，所以我尝试如下更改程序，它工作正常。

```
stmt.execute(sql);
stmt.getMoreResults();
stmt.getMoreResults();
ResultSet rs=stmt.getResultSet();
rs.next(); 
```

我的问题是，有什么方法可以让我的程序保持不变，并且可以很好地与等`JDBC 4.0 driver(WAS v8.5)`任何组合一起使用。`SQL svr 2000 + WAS v8.5`

请给我任何指示，您的建议对我很有价值，谢谢。

安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:18:40.053

您正在尝试使用 执行生成多个结果集或不生成结果集（例如`UPDATE`等`INSERT`）的查询`executeQuery`。该[方法的 Javadoc](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeQuery%28java.lang.String%29)明确指出：

> 抛出： SQLException - 如果发生数据库访问错误，则在关闭的语句上调用此方法，给定的 SQL 语句**会生成除单个 ResultSet 对象之外的任何内容**

您要么需要使用该`executeUpdate`方法（如果它实际上是一个更新/插入/删除，或者`execute`然后使用结果`boolean`和[`getMoreResults()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getMoreResults%28%29)决定如何继续。

# php - 如果出现错误，在提交后显示新添加的行

> ID：14170472
> 
> 赞同：-1
> 
> 时间：2013-01-05T09:34:08.427
> 
> 标签：php, javascript, html

我正在使用这个 Javascript 在`preq`已经包含 4 行的表中添加行。问题是，当我使用此 Javascript 行添加行时，会在表单上正确添加行，但如果表单上出现一些错误，并且如果重新加载表单，则新添加的行不可见，我还希望行内输入的文本可见 ![在此处输入图像描述](../Images/cbcebd40572789267b870efe852964e9.png)

`javascript`

```
<script type="text/javascript">
            var counter = 5;
            function addrow()
            {
                if (counter > 10)
                {
                    alert("Only 10 Kind of Works are allowed");
                return false;
                }
            $('#preq > tbody:last').append('<tr><td><input title="Enter Kind Of work" readonly="readonly" onclick="if(this.value!=\'\'){this.value=\'\';opendrop();}else{opendrop();}" id="other_work' + counter + '" name="other_work' + counter + '" type="text" size="30" onclick="opendrop()" <?php if (isset($errors)) { echo 'value="'.htmlentities(@$_POST['other_work' + counter + '']).'"'; } ?>></td><td><input name="client_name' + counter + '" type="text" id="client_name' + counter + '" size="40"/></td><td><input name="firm_name' + counter + '" type="text" id="firm_name' + counter + '" size="40"/></td></tr>');
                counter++;
            }
            </script> 
```

html代码

```
<table align="left" id="preq" style="display: none;">
                <tr>
                                </tr>
                                    <tr>
                                    <th align="left"><label id="Label1"> Kind of Work </label></th>
                                    <th align="left"><label id="Label1"> Name Of The Client </label></th>
                                    <th align="left"><label id="Label1">Name of Firm / Organisation </label></th>
                                    </tr>
            <tbody>

            <!--4 rows alredy present here-->
            </tbody>
    <tr><td colspan="3"><input type="button" class="button" value="Add Kind of Work" onclick="addrow()"/></td></tr>

            </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:09:38.393

如果您希望新添加的行即使在重新加载表单后仍然存在，那么您需要将其保存到数据库中，否则每次重新加载页面时数据都会丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:46:59.427

尝试 add `else`，因此，只有在没有错误时才添加行（在 上发出警报`if()`）。

```
if (counter > 10) {
  alert("Only 10 Kind of Works are allowed");
  return false;
} else {
  $('#preq > tbody:last').append('<tr><td><input title="Enter Kind Of work" readonly="readonly" onclick="if(this.value!=\'\'){this.value=\'\';opendrop();}else{opendrop();}" id="other_work' + counter + '" name="other_work' + counter + '" type="text" size="30" onclick="opendrop()" <?php if (isset($errors)) { echo 'value="'.htmlentities(@$_POST['other_work' + counter + '']).'"'; } ?>></td><td><input name="client_name' + counter + '" type="text" id="client_name' + counter + '" size="40"/></td><td><input name="firm_name' + counter + '" type="text" id="firm_name' + counter + '" size="40"/></td></tr>');
  counter++;
  return true;
} 
```

# python - 使用基于类的视图时在 Django 中获取绝对 URL

> ID：14170473
> 
> 赞同：9
> 
> 时间：2013-01-05T09:34:08.190
> 
> 标签：python, django

您好我正在迁移我的应用程序以使用基于类的视图而不是基于函数的视图。在我的旧代码中，我能够以这种方式获取与函数视图相关的对象的绝对 URL：

```
class Category(models.Model):
    name = models.CharField(max_length=100,unique=True)
    slug = models.SlugField(unique=True)
    description = models.TextField()
    parent = models.ForeignKey('self',null=True,blank=True)

    def get_absolute_url(self):
        return reverse('blog.views.showcategory',args=[str(self.slug)]) 
```

我找不到我应该在我的获取绝对 url 函数中更改什么以获得相同的结果。

这是我基于类的新视图

```
class CategoryView(ListPosts):
    template_name = "postlist.html"
    context_object_name="posts"
    def get_queryset(self):
         return Post.objects.filter(category__slug=self.kwargs['slug']).order_by('created') 
```

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-05T11:29:11.850

您应该始终为您的 URL 命名，并参考：

```
url(r'/category/(?P<slug>\w+)/$', CategoryView.as_view(), name='category_view'), 
```

现在：

```
@models.permalink
def get_absolute_url(self):
    return ('category_view', (), {'slug': self.slug}) 
```

注意我使用了永久链接装饰器，它与调用相同，`reverse`但更简洁一些。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-02-05T14:38:01.443

这是我的`get_absolute_url`配置：

**网址.py**

```
urlpatterns = patterns('',
    url(r'^products/(?P<slug>[\w\d\-\_]+)/$', views.ProductView.as_view(), name='product'),
    ) 
```

**模型.py**

```
def get_absolute_url(self):
    return reverse('products:product', kwargs={'slug':self.slug}) 
```

我的 urls.py 在“产品”应用程序下，因此 url 命名空间是“产品：产品”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-15T07:35:22.970

这个问题的 2018 年答案与@Aaron 的答案基本相同，但为了快速访问，这里是：

```
def get_absolute_url(self):
    from django.urls import reverse
    return reverse('people.views.details', args=[str(self.id)]) 
```

来自[https://docs.djangoproject.com/en/2.1/ref/models/instances/#get-absolute-url](https://docs.djangoproject.com/en/2.1/ref/models/instances/#get-absolute-url)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-29T13:35:06.220

这个函数对我有用，它使用多个参数：

```
def get_absolute_url(self):
return reverse('video', kwargs={'slug':self.chapiter.course.slug,'chpiter_slug':self.chapiter.chpiterSlug,'pk':str(self.index).zfill(2)}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-26T09:05:02.500

这是您在`Django >= 2.0`.

在`urls.py`

```
from django.urls import path

app_name = 'my_app'

urlpatterns = [
    path('products/<slug:slug>', views.ProductDetailView.as_view(), name='products')
] 
```

将以下代码添加到您的`models.py`

```
class Product(models.Model):
    name = models.CharField(max_length=125)
    slug = models.SlugField(unique=True)
    # rest of the fields

   def get_absolute_url(self):
         return reverse('my_app:products', kwargs={'slug': self.slug}) 
```

要显示详细信息，请在您的`views.py`

```
class ProductDetailView(DetailView):
     template_name = 'my_app/detail.html'

     def get_queryset(self):
         return Product.objects.all() 
```

# php - 什么是使用 real_escape_string 的合适时间？当数据到达 POST 时，或者就在编写查询之前？

> ID：14170475
> 
> 赞同：3
> 
> 时间：2013-01-05T09:34:52.023
> 
> 标签：php, database, mysqli, escaping, code-injection

我们知道，为了防止[SQL 注入问题](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)，必须在编写 SQL 查询之前对字符串值进行转义——尤其是来自用户或其他外部来源的字符串值。

什么时候应该进行这种转义？是否应该在值进入程序时完成，存储转义值以供以后使用？还是应该存储未转义的值，并在编写查询时对其进行转义？哪种方法更安全？权衡是什么？

1) 收到值时转义的示例：

```
$test = $mysqli->real_escape_string($_POST['test']);
. 
. 
. 
$query=" UPDATE * from test_panel where test='" . $test . "'"; 
```

2）组成查询时转义的示例：

```
$test = $_POST['test'];
. 
. 
. 
$query=" UPDATE * from test_panel where test='" . $mysqli->real_escape_string('$test') . "'"; 
```

这些方法之间有区别吗？哪种方法更容易注射，最安全的预防方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:51:10.447

That's quite interesting question but the answer is not that easy.

> What is the proper time to use real_escape_string? When data arrives in POST, or just before composing the query?

**NEITHER**

Let me explain it a bit.

First, let's sort out the terminology. There are many mistakes in the way the question put in.

1.  Let's talk not of *escaping* using real_escape_string but rather of *formatting*. Just because escaping has a very limited use - it's only a part of the formatting rules of just one type of SQL literals. While other types require different formatting rules.
2.  Therefore, formatting when data "arrives in POST" is out of question - we just can't tell which field is going into which position in the query and thus we just don't know which rules to apply.
3.  Last but not least: nor POST nor any other external source has **absolutely nothing to do with query formatting.** Once you have to put a string literal into query, you have to format it according to SQL syntax rules, **no matter of it's source**. Same goes for the numbers and such.

So, the only proper time when we have to *format* our data is right before the query composing.

Yet applying real_escape_string() right in the application code is a very bad practice.

1.  As it was mentioned above, escaping is **insufficient** to format a string. String formatting involves both escaping and quoting. So, whatever facility intended to format strings for the SQL query, it should always perform both tasks, not one. Both quoting and escaping. Because these 2 rules are totally useless if applied one without another. So, it's *essential* to couple them together, in one facility.
2.  Don't forget of different formatting rules for different data types. Numbers have to be cast to it's type explicitly, while escaping will do no good for them.
3.  Manual escaping is just silly. Repeated `$mysqli->real_escape_string('$test')` makes your code bloated and hard to read. Why not to ask a database driver to do all the formatting for you? So, you have to follow the most modern technology - use a *placeholder* to represent data in the query. While processing such a placeholder, driver will automatically format the data going on it's place.
    And **it will be either safe and convenient.**

There are 2 methods of using placeholders easy way (without manual binding which is no better than manual escaping in terms of readability):

*   Use PDO, as it lets you just pass a variable to be used in the prepared query

so, the code going to be

```
$db->prepare("SELECT * from test_panel where test=?");
$db->execute(array($_POST['test'])); 
```

and PDO will do all the formatting internally

*   or invent your own wrapper to implement placeholders

like this one

```
function paraQuery()
{
    global $mysqli;

    $args  = func_get_args();
    $query = array_shift($args);
    $query = str_replace("%s","'%s'",$query); 

    foreach ($args as $key => $val)
    {
        $args[$key] = $mysqli->real_escape_string($val);
    }

    $query  = vsprintf($query, $args);
    $result = $mysqli->query($query);
    if (!$result)
    {
        throw new Exception($mysqli->error()." [$query]");
    }
    return $result;
}

$query  = "SELECT * FROM table where a=%s AND b LIKE %s LIMIT %d";
$result = paraQuery($query, $a, "%$b%", $limit); 
```

or, for your current query:

```
$result = paraQuery("SELECT * from test_panel where test=%s", $_POST['test']); 
```

look - it become short, sane and safe.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:49:25.850

你应该尽可能晚地逃脱它们。

您想要这样做的原因是您的数据始终是准确的。例如，如果您在一开始就对字符串进行转义，`strlen`则不会相同（与未转义的版本相同），这可能会在某些情况下导致混淆/错误。

* * *

您问题的*真正*（imo）答案就是忘记转义并使用[`prepared statements`'](http://php.net/manual/en/mysqli.prepare.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-05T09:42:31.140

无论您在查询之前还是在查询中转义输入都没有关系。

是的，一切都必须逃脱。没有理由，为什么不想逃避自己的事情。

如果你不想逃避字符串，你会意识到它;-)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-05T10:21:22.210

在实际用于编写查询之前，绝不应转义值。无论您使用准备好的语句/PDO 还是使用 real_escape_string 将查询组合为 SQL 格式的字符串，这都是正确的。

过早清理/转义数据值并以这种形式保存它的做法会导致错误。如果变量包含数据值，例如客户姓名或帐号，则该变量应包含未转义的原始值。

只有当您实际形成查询时，您才应该确保所有值在*放入该查询时*都已正确编码。

将保存原始数据值的变量视为与保存查询的变量不同类型的变量。永远不要将查询值直接分配给原始数据值，也不要结合原始数据值进行查询。查询的组成是了解您应该对原始数据值进行编码的触发器。

通过实践，这种编码发生的位置将变得清晰且一致，您将减少双重编码或编码失败的可能性。

想象一下，您尝试做相反的事情：对所有值进行预编码。这实际上是不可能的，因为您有很多字符串值，并且并非所有这些值都将在查询中使用。在某个地方，您可能有一个变量既可用作显示器的输出，也可用于查询。显示转义值是不正确的。同样难以（或不可能）跟踪哪些变量用于查询，哪些变量用于其他非 SQL 用途。

始终在所有字符串变量中存储原始（未转义）值，直到您实际编写查询。这种做法也与使用准备好的语句一致，因为准备好的语句传递了一个未转义的值。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-05T09:49:29.030

首先，您应该将连接作为 mysqli 真实转义字符串中的第二个参数传递其次，您还应该使用准备好的语句

[http://php.net/manual/en/mysqli.prepare.php](http://php.net/manual/en/mysqli.prepare.php)

# android - 活动管理器 权限不起作用

> ID：14170477
> 
> 赞同：5
> 
> 时间：2013-01-05T09:35:01.910
> 
> 标签：android, android-permissions

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="per.sainik.activity"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="10" />

<user-permission android:name="android.permission.GET_TASKS" >
</user-permission>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity android:name=".LogViewActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

和

```
import android.app.Activity;
import android.app.ActivityManager;
import android.os.Bundle;
import android.util.Log;

public class LogViewActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ActivityManager activityManager = (ActivityManager) getApplication()
            .getSystemService(ACTIVITY_SERVICE);
    Log.v("LOG_SERVICE", activityManager.getRunningTasks(1).get(0)
            .toString());
} 
```

}

它得到异常，命名为：

```
01-05 14:55:05.207: E/AndroidRuntime(334): java.lang.RuntimeException: Unable to start activity ComponentInfo{per.sainik.activity/per.sainik.activity.LogViewActivity}: java.lang.SecurityException: Permission Denial: getTasks() from pid=334, uid=10037 requires android.permission.GET_TASKS 
```

获取权限问题。任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-05T09:37:27.263

您拼错了权限。确切的许可是，

```
<uses-permission android:name="android.permission.GET_TASKS" >
</uses-permission> 
```

不是，

```
<user-permission android:name="android.permission.GET_TASKS" >
</user-permission> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T09:49:55.147

你把这个词拼错`<uses-permission >`了`<user-permission >`。

# python - 在 mongoengine 中更新嵌入式文档

> ID：14170479
> 
> 赞同：9
> 
> 时间：2013-01-05T09:35:25.950
> 
> 标签：python, mongodb, mongoengine

我在 mongoengine 有一堂课

```
class Post(EmbeddedDocument):
        uid = StringField(required=True)
        text = StringField(required=True)
        value = StringField()

class Feed(Document):
        label = StringField(required=True)
        feed_url = StringField(required=True)
        posts = ListField(EmbeddedDocumentField(Post)) 
```

我正在尝试从某个“父”文档中更新 Post EmbeddedDocument 属性名称文本。作为第一步，我检索提要文档

```
model = Feed.objects(_id="....").first() 
```

然后我想更新嵌入文档“Post”的属性文本。

如何使用 mongoengine 实现它？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T10:27:24.423

我解决了:)

```
Feed.objects(_id="...", posts__text="findvalue").update(set__posts__S__value="updatevalue") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:13:16.720

如果我理解这个问题，我认为这样的事情会起作用：

```
model = Feed.objects(_id="....").first()
for post in model.posts:
    if post.text == "title":
        post.value = "placeholder for real update"
model.save() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-06T04:08:57.503

扩展@hoangvu68 的答案。这是另一个例子：[https ://gist.github.com/pingwping/92219a8a1e9d44e1dd8a](https://gist.github.com/pingwping/92219a8a1e9d44e1dd8a)

格式为：

```
MyModel.objects.find(<model-key> = <model-val>, <embedded-doc-key>__<embedded-doc-lookup-key>=<lookup-key-val>).update(set__<embedded-doc-key>__S__<embedded-doc-lookup-key> = <new-val>) 
```

请注意，这可以分为 2 行

```
doc = MyModel.objects.find(<model-key> = <model-val>, <embedded-doc-key>__<embedded-doc-lookup-key> = <lookup-key-val>)
doc.update(set__<embedded-doc-key>__S__<embedded-doc-lookup-key> = <new-val>) 
```

# spring - Grails + Spring Web Flow - 无法获取对话锁（LockTimeoutException）

> ID：14170480
> 
> 赞同：2
> 
> 时间：2013-01-05T09:35:27.913
> 
> 标签：spring, grails, spring-webflow, grails-2.0

我们在使用 Web Flow 2.0.0 插件（基本上是 Spring Web Flow 2.0.8.RELEASE）的 Grails 应用程序中遇到了一个奇怪的行为。我们有时会收到***LockTimeoutException***，它是由正在通过我们的 Web 流程的用户触发的；这通常会导致服务器宕机。

在阅读了有关 Spring Web Flow 的更多信息后，我意识到问题可能出在长时间运行的任务中（我已经使用 Thread.sleep(30000) 对此进行了测试）。如果用户在第一次计算需要很长时间（默认超过 30 秒）时单击“下一步”按钮两次，则无法满足第二个请求（无法锁定流），因此会抛出此异常。

这种行为也可以通过“疯狂”单击下一步按钮来实现，而计算时间更短（比如说 5 秒）。在足够数量的点击之后，最新的请求/线程将需要等待超过 30 秒，因此会失败。（我认为这是我们在生产中的情况，因为我们的计算应该需要很短的时间；想象一下疯狂点击的住院用户 :-)

**我的问题是：**

***有什么标准方法可以解决这个问题吗？***

*   例如，如果第一个请求未完成，则以某种方式丢弃第二个请求？- 这会导致死锁吗？
*   还是在第一次单击后禁用“下一步”按钮？
*   我认为增加锁定超时时间只会推迟这个麻烦......

***有没有防止服务器宕机的措施？***

*   当我在本地（使用 Thread.sleep()）对其进行测试时，它并没有出现故障，只是在生产中

我认为这个问题不仅与 Grails 网络流用户有关，而且与 Spring 网络流用户有关......

谢谢你的建议，马特奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:01:51.653

我建议在第一次单击后禁用 [Next] 按钮。其他解决方案（如增加 LockTimeout 会将该问题推迟更长的时间（例如，不是 30 秒，而是 60 秒等）。禁用 [Next] 将是完美的解决方案（尽管它只是一种解决方法，而不是服务器端的真正解决方案）。

# hadoop - 当减速器仍在运行时，我可以读取减速器输出吗？

> ID：14170483
> 
> 赞同：1
> 
> 时间：2013-01-05T09:35:47.177
> 
> 标签：hadoop, mapreduce, hdfs

我正在尝试减少数据流中 mapreduce 作业的延迟，并且我想使用 hdfs-api 连续跟踪 reducer part-xxxx 文件的输出，而不是在作业完成后读取它。但我想知道这对于 hadoop 工作是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:19:46.377

当您使用`FileOutputFormat`基于输出格式（文本、序列文件等）时，它们会使用一个公共的公共文件，该公共文件`FileOutputCommitter`负责在减速器输出成功/失败等时提交或中止它。

在幕后，当你的 reducer 正在写入输出时，它会被写入你指定的 HDFS 输出目录的 _temporary 子目录。

当 reducer 完成时，作业跟踪器将表示该 reducer 尝试的一个特定实例（请记住，对于推测性执行，reducer 任务尝试可能会运行 1 次或多次）作为最终输出，并向输出提交者发出信号以提交该版本的reducer 输出（其他尝试将被中止）。

当输出提交者提交尝试输出时，它只是将 part-r-xxxxx 文件从尝试临时目录移动到指定的输出目录。

因此，考虑到这一点，当您在输出目录中看到 part-r-* 文件时，这些文件已经完全写入并且可以安全跟踪。因此，从这个意义上说，您可以在处理减速器输出时获得跳跃（假设您有 10K 减速器在 1000 个减速器插槽集群上运行） - 但您不能安排另一个映射/减少作业来处理此输出，因为只有减速器输出具有finished 将在下一个 map reduce 作业中使用（提交作业时，它只会考虑当前可用的文件作为输入，不会继续扫描作业提交后出现的新文件）。

您还应该考虑您的工作实际上可能在最后几个减速器中失败 - 在这种情况下，您是否仍然希望急切地处理那些在失败之前已完成的减速器输出，或者您只想在整个工作完成时处理（这对大多数工作来说更有意义）。

# c# - 如何获取谷歌阅读器订阅标志

> ID：14170494
> 
> 赞同：0
> 
> 时间：2013-01-05T09:37:44.060
> 
> 标签：c#, http, subscription

正在开发`C#`需要访问`Google reader`. 我正在使用**非官方的 Google Reader OAth API**。感谢 Martin Doms 等人的许多想法，我能够为 Google Reader 编写很多代码。

有一种方法可以从 Google 阅读器获取所有订阅的列表，但此列表使用以下 URL “http://www.google.com/reader/api/0/unread-count?allcomments=true&output=xml&ck=1255643091105&client =滚动”。结果（无论是`XML`还是`JSON`）不包含指向代表新闻来源徽标的缩略图/图像的链接。假设我订阅了 Engadget、Al Jazeera 和 CNET，我想在代码中访问 Engadget、Al Jazeera 和 CNET 徽标。任何想法我该怎么做？

# delphi - 配置 MSBuild 以调用 XE2 dcc32.exe

> ID：14170496
> 
> 赞同：5
> 
> 时间：2013-01-05T09:37:58.680
> 
> 标签：delphi, msbuild, delphi-xe2, dcc32

我的机器（Windows 7、64 位）上同时安装了 Delphi 2010 和 XE2。我使用 FinalBuilder 5.5 构建我的 Delphi 项目，它调用 DCC32.exe 进行完整构建。

现在我将我的项目从 Delphi 2010 升级到 XE2，我正面临这个问题：MSBuild 不断调用 Delphi 2010 dcc32.exe（即 C:\Program Files (x86)\Embarcadero\RAD Studio\9.0\Bin\dcc32\. exe) 而不是 XE2 的 dcc32.exe

我去了并更新了环境中的路径以及 bds 路径，但它没有帮助。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T10:10:18.317

您需要在构建环境中设置所有适当的环境变量。这样做的方法是执行 Delphi bin 目录中的 rsvars.bat 脚本。

我的另一个提示是从系统路径中删除所有 Delphi 条目。这迫使您明确为正确的版本设置适当的环境变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T08:46:26.677

转到“Windows 环境变量”设置，找到变量“路径”。

请检查并确保您的“....\Rad Studio\9.0\bin”（Delphi XE2 版本）的路径位于任何包含 dcc32.exe（旧 delphi 版本）的文件夹之前。当您将较新的 Delphi 版本安装到已经安装了较旧的 delphi 版本的机器上时，通常会发生这种情况。

# ruby - 使用 ruby 的聊天应用程序

> ID：14170500
> 
> 赞同：1
> 
> 时间：2013-01-05T09:38:56.260
> 
> 标签：ruby, sockets, chat

我正在尝试在 linux 上使用 ruby​​ 构建一个聊天应用程序，所以我的客户端不能发送很多消息，它只是先发送一条消息

服务器代码：

```
#!/usr/bin/ruby
require 'socket'

server = TCPServer.new(2008)

while (session = server.accept) && (input = session.gets)
    puts input

end 
```

客户代码：

```
#!/usr/bin/ruby
require 'socket'

begin
 clientSession = TCPSocket.new( "localhost", 2008 ) 

rescue StandardError => bang
  puts "Error !! "
else

while !(clientSession.closed?) 

print "Enter message :  "
msg = gets
clientSession.puts msg 
end

end 
```

非常感谢您的时间！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T10:32:50.643

你的问题在这里：

```
while (session = server.accept) && (input = session.gets)
  puts input
end 
```

您在 while 循环中接受连接。你想要的是首先接受连接，然后循环：

```
connection = server.accept

while (input = connection.gets)
  puts input
end 
```

# javascript - mustache.js 模板引擎中的表示逻辑

> ID：14170503
> 
> 赞同：1
> 
> 时间：2013-01-05T09:39:38.053
> 
> 标签：javascript, mustache

使用客户端[mustache.js 模板引擎](https://github.com/janl/mustache.js)实现以下演示的最简单方法是什么？

```
var view = {
  search_term: 'something',
  number_of_hits: 3,
  hits: [...]
}; 
```

如果`number_of_hits`== 0 则在屏幕上打印：“未找到结果”

如果`number_of_hits`== 1 则在屏幕上打印：“找到一个结果”

如果`number_of_hits`> 1，则在屏幕上打印：“找到*N*个结果”

知道 mustache 是无逻辑的模板引擎，是否可以使用现有的 mustache 标签来完成它，或者我将不得不更改 JSON 响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:00:58.397

使用 Mustache，可以使用and标签区分值`0`和非`0`值：`{{#section}}``{{^inverted}}`

```
<!-- If number_of_hits is not 0, show hits -->
{{#number_of_hits}}
 {{number_of_hits}} hits
{{/number_of_hits}}

<!-- If number of hits is 0 (or any other falsy value) -->
{{^number_of_hits}}
  No hits
{{/number_of_hits}} 
```

据我所知，Mustache 无法检测到 1 和 2 之间的差异。为此，您必须修改`view`传递给模板的对象。可能是这样的：

```
var hits = 3;
var view = {
  search_term: 'something',
  number_of_hits: hits,
  hitkind: { 
    none: hits === 0,
    one:  hits === 1,
    many: hits > 1
  }
}; 
```

并且在模板中

```
{{#hitkind.none}} No hits {{/hitkind.none}}
{{#hitkind.one }} One hit {{/hitkind.one}}
{{#hitkind.many}} {{number_of_hits}} hits {{/hitkind.many}} 
```

或者，您可以考虑将模板引擎更改为[Handlebars.js](http://handlebarsjs.com/)。Handlebars 是 Mustache 的超集，这意味着您的所有 Mustache 模板都可以使用它。Handlebars 模板和 Mustache 一样是无逻辑​​的，因此它不能让您直接将逻辑写入模板。相反，它提供了一个概念`Helpers`，或可从您的模板调用的函数。

使用 Handlebars，您可以定义一个助手，例如：

```
Handlebars.registerHelper('hitCount', function(count) {
  if(count === 0) return "No hits";
  if(count === 1) return "One hit";
  return count + " hits".
}); 
```

并从模板中调用它：

```
{{hitCount number_of_hits}} 
```

# swing - 将 JSplitPane 拆分器恢复到“默认”位置

> ID：14170509
> 
> 赞同：0
> 
> 时间：2013-01-05T09:41:13.650
> 
> 标签：swing, position, splitter, jsplitpane

我有一个顶部有一个标签的面板，`JSplitPane`底部有一个标签。在使用此函数添加之前设置拆分器：`JTable``JTextFields`

```
splitPane.setResizeWeight(1.0); 
```

现在，我有一个按钮，可以使用以下代码“隐藏”底部面板：

```
splitPane.setDividerLocation(splitPane.getHeight());
splitPane.setEnabled(false); 
```

基本上你可以在底部看到分离器（这是我想要的），但你不能用它做任何事情。现在，如何将其恢复到默认位置（为底部面板提供所需空间的位置）？

我知道我可以通过在按下按钮之前记住分离器的相对位置来使用它，但是是否有任何功能可以将分离器“刷新”到满足`setResizeWeight(1.0)`功能条件所需的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:04:31.960

这可以通过执行以下操作轻松完成：

```
splitPane.setDividerLocation(-1); 
```

# division - MusicXML 分区和持续时间

> ID：14170511
> 
> 赞同：6
> 
> 时间：2013-01-05T09:41:25.507
> 
> 标签：division, duration, music-notation, musicxml

我有一个来自一些测试套件的 MXL 文件，其中第一个度量是 Division 是 8（即每四分音符 8 个单位）。

小节 4 在 3/4 拍内，其余部分如下：

```
<note>
    <rest measure="yes"/>
    <duration>24</duration>
    <voice>1</voice>
</note> 
```

我希望看到`<dot/>`这里。由于 24 除以 8 是 3，我是否应该推断出这个音符应该是点状的？这是否意味着我必须为缺少的特殊情况编写代码，`<dot/>`但该注释显然应该被点缀？

我对这种表示感到困惑。我希望他们自己将`type`属性设为强制性...如果有人能解释应该如何表示虚线和连音持续时间，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T10:05:39.763

是的，有musicXML 专家在关注这个论坛:-) 一个完整的小节休息本身就是一个符号。您不需要/不允许用点扩展它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-25T11:29:28.957

为什么要加点注释？如果除法是 8，这意味着 8 个单位代表一个四分音符。所以 24 代表三个四分音符，在 3/4 时间的情况下是一个完整的小节休止符。

至于连音，我也很好奇。这是从音乐 xml 网站的教程片段“ [apres un reve](http://www.musicxml.com/tutorial/notation-basics/looks-vs-sounds/) ”中获取的示例。这也是 3/4，有 24 个分区。时间修改属性指定连音的比例，在这种情况下是三个八音符的三连音。

```
 <time-modification>
      <actual-notes>3</actual-notes>
      <normal-notes>2</normal-notes>
    </time-modification> 
```

上面的时间修改表明，**三个八分音符的持续时间通常是两个**。

```
 <note default-x="92">
    <pitch>
      <step>E</step>
      <alter>-1</alter>
      <octave>5</octave>
    </pitch>
    <duration>8</duration>
    <tie type="stop"/>
    <voice>1</voice>
    <type>eighth</type>
    <time-modification>
      <actual-notes>3</actual-notes>
      <normal-notes>2</normal-notes>
    </time-modification>
    <stem default-y="-40">down</stem>
    <beam number="1">begin</beam>
    <notations>
      <tied type="stop"/>
      <tuplet bracket="no" number="1" placement="above" type="start"/>
    </notations>
  </note>
  <note default-x="122">
    <pitch>
      <step>D</step>
      <octave>5</octave>
    </pitch>
    <duration>8</duration>
    <voice>1</voice>
    <type>eighth</type>
    <time-modification>
      <actual-notes>3</actual-notes>
      <normal-notes>2</normal-notes>
    </time-modification>
    <stem default-y="-42">down</stem>
    <beam number="1">continue</beam>
    <lyric default-y="-80" number="1">
      <syllabic>single</syllabic>
      <text>que</text>
    </lyric>
  </note>
  <note default-x="162">
    <pitch>
      <step>C</step>
      <octave>5</octave>
    </pitch>
    <duration>8</duration>
    <voice>1</voice>
    <type>eighth</type>
    <time-modification>
      <actual-notes>3</actual-notes>
      <normal-notes>2</normal-notes>
    </time-modification>
    <stem default-y="-45">down</stem>
    <beam number="1">end</beam>
    <notations>
      <tuplet number="1" type="stop"/>
    </notations>
    <lyric default-y="-80" number="1">
      <syllabic>begin</syllabic>
      <text>char</text>
    </lyric>
  </note> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-04T19:44:45.380

该`<dot/>`元素仅在乐谱中有一个点时使用。在您的示例中，我们有一个没有点的完整测量休息。它看起来像这样：

![在此处输入图像描述](../Images/1df0bea18f555403ada3216d960b09ea.png)

另一方面，如果您想休息一下以反映测量的持续时间，它看起来像这样：

![在此处输入图像描述](../Images/b6ca9b948178ac6e73c61ca20bba4df2.png)

xml代码是这样的：

```
 <note>
    <rest />
    <duration>24</duration>
    <voice>1</voice>
    <type>half</type>
    <dot />
  </note> 
```

在您的示例中，`type`不需要该属性，因为 rest 属性`measure="yes"`已经告诉我们其余部分应该是什么样子。

# filesystems - 目录的唯一字符串

> ID：14170513
> 
> 赞同：1
> 
> 时间：2013-01-05T09:41:47.207
> 
> 标签：filesystems, erlang

我想创建一个唯一的目录来控制目录的磁盘配额。唯一的目录名称创建如下：

```
unique_string()->
    base64:encode_to_string(term_to_binary(make_ref())). 
```

但是在调试的时候，问题就出现了：

```
 exception exit: {{badmatch,
                         {error,
                             " g3IAA2QAFGVtYWNzQHl1cy1pTWFjLmxvY2FsAwAB/ncAAAA8AAAAAA==: No such file or directory.\r\n"}}, 
```

unique_string 包含“/”，它会导致问题。

恐怕如果只是删除“/”，唯一的功能就会丢失。如何解决问题？另外，目录中是否还有其他字符不能使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:12:25.387

一个 erlang VM 保证为每个时间请求提供不同的值。即使在通常以 1 ms 精度给出时间的 Windows 机器上，多次访问也能以 1µs 给出结果：

```
2> R = {now(),now(),now(),now()}.
{{1357,408695,109000},
 {1357,408695,109001},
 {1357,408695,109002},
 {1357,408695,109003}} 
```

因此，如果您认为调用频率确实低于每秒 1 000 000 次调用（重要的是要避免对 erlang 时间造成重大干扰），则该方法可以有效地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T09:56:49.013

您可以按如下方式替换`base64:encode_to_string`为函数。`hexify`

```
hexify(Binary) ->
  lists:flatten([io_lib:format("~2.16.0b", [B]) || <<B>> <= Binary]). 
```

您还可以调整此功能以允许使用不同的字符集。

顺便说一句，我建议对 ref 进行一些散列以使名称具有相同的长度。

```
hexify(crypto:md5(term_to_binary(make_ref()))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:26:16.783

Riak 使用来自 ref 和时间戳的 sha 哈希来生成唯一键。

```
crypto:sha(term_to_binary({make_ref(), os:timestamp()})) 
```

[https://github.com/basho/riak_core/blob/1.2.1p1/src/riak_core_util.erl#L135](https://github.com/basho/riak_core/blob/1.2.1p1/src/riak_core_util.erl#L135)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:37:59.327

使用 ref() 作为字符串，如果您重新启动 VM，您可以获得相同的目录名称。有关系吗？正如其他用户所说，如果调用频率小于每微秒 1 次调用，您可以使用 now()。

两个建议

```
random_md5_name() -> 
    Str =  lists:flatten(io_lib:format("~p", [now()])),
    lists:flatten([io_lib:format("~2.16.0b", [B]) || <<B>> <=  erlang:md5(Str)].

random_numeric_name() ->
    lists:flatten(io_lib:format("~p~p~p", tuple_to_list(now()))). 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T10:05:56.750

如果您只需要一个唯一值，并且每毫秒不需要超过 1 个，那么为什么不直接使用当前系统时间到毫秒呢？它比您上面提到的功能要快得多，并且非常独特。

如果有机会在一毫秒内获得超过一个，您可以将最后一个唯一值存储在静态变量中，并确保新的值大于它，否则使用最后一个值加一。

# ios - 下周五在 ios 中的本地推送通知

> ID：14170515
> 
> 赞同：0
> 
> 时间：2013-01-05T09:41:56.130
> 
> 标签：ios, timezone, uilocalnotification

我想在下周四晚上 8 点设置本地推送通知。

我已经尝试过，但由于某些时区问题，我无法获得准确的时间。

如果有人有想法，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:45:43.687

您必须设置`notif.timeZone = [NSTimeZone defaultTimeZone];`假设`notif`是您的本地通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:47:24.497

评论这一行

```
tuesdayWeek1Notification.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0]; 
```

或者

使用此代码

```
tuesdayWeek1Notification.timeZone = [NSTimeZone defaultTimeZone]; 
```

希望对你有帮助

# ember.js - Ember Route.transitionTo 已移除

> ID：14170519
> 
> 赞同：7
> 
> 时间：2013-01-05T09:42:39.610
> 
> 标签：ember.js

我刚刚升级到最新的 ember，以下代码被破坏，我在路由器上定义了许多这些操作

```
App.Router = Em.Router.extend
  showUser: Ember.Route.transitionTo('root.users.user') 
```

带有以下错误消息

> 未捕获的类型错误：对象 Ember.Route 没有方法“transitionTo”

更新日志中没有关于此更改的任何内容，但已从 Route 类中删除。它仍然存在于实例上。

我还能如何在可以从其他地方调用的路由器上定义此类操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T09:55:12.170

最近 ember 推出了一款新的路由器。[他们的指南](http://emberjs.com/guides/routing)已经相当成熟，所以请检查这些如何实现您的路由。

简而言之：

```
App.Router.map(function(match) {
  match('/').to('index');
  match('/posts').to('posts');
});

App.IndexRoute = Ember.Route.extend({
  redirect: function() {
    this.transitionTo('posts');
  }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T10:01:19.133

如果您是从 master 构建的，您会`ember-old-router.js`在 dist 目录中找到，这将允许您基于“旧”路由器的代码在您过渡到新的做事方式时继续运行。

要了解现在的情况，请查看[此要点](https://gist.github.com/3981133)或官方网站的指南部分。

# c++ - 在类中实现并在全局命名空间中调用的友元函数

> ID：14170523
> 
> 赞同：3
> 
> 时间：2013-01-05T09:42:57.030
> 
> 标签：c++, friend

我写了以下代码：

```
#include<iostream>
using namespace std;

class foo {
private:    
    int i;
public:
    foo(): i(1) { }
    friend int func1(int i) {
        return 0;
    }
    friend int func2(foo &f) {
        return f.i;
    }
};

int main()
{
    foo f;
    cout << func2(f) << endl;
    cout << func1(1) << endl;
    return 0;
} 
```

但它无法编译并出现以下错误：

```
ss.cpp: In function ‘int main()’:
ss.cpp:28:17: error: ‘func1’ was not declared in this scope 
```

当我删除这一行时：

```
cout << func1(1) << endl; 
```

它编译成功

这是否意味着如果我想在一个类中定义一个朋友函数并在全局命名空间中调用它，它必须与类有某种关系？如果是这样，详细的规则是什么？

我的编译器是 g++-4.7.2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T09:47:34.920

您似乎已经找到了自己的规则。要被发现，函数必须有一个类类型的参数。

请参阅Wikipedia 上的[参数相关查找](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)。

# java - 休眠中的 java.lang.ClassCastException

> ID：14170524
> 
> 赞同：0
> 
> 时间：2013-01-05T09:43:01.943
> 
> 标签：java, hibernate, jakarta-ee, exception, object

我有两个表`Doctor`，`shift` 通过 Hibernate 查询语言，我在单个查询中从表中选择两个`fields`，从`Doctor`表中选择两个字段，`Shift`所以我面临显示该数据的问题。我为此写了一个`bean`类，喜欢`DoctorShift`将列表转换为`List<DoctorShift>`我得到的`java.lang.ClassCastException`结果，所以该做什么给出相同的想法.....

```
code is like this

Query qry="-----";//valid query

List<DoctorShift> list=(List<DoctorShift>)qry.list();
System.out.println(" Size of list is "+list.size());// i'm getting 2

DoctorShift ds=list.get(0);// here i'm getting Exception

qry="select s.shiftNameId,s.shiftName,d.doctorRegnumvar,"
      +"d.doctorFnamevar,d.doctorLnamevar,d.doctorstatus," 
      +"sm.shiftstatus,s.shiftTime from ShiftDaoBean s,"
      + "DoctorDaoBean d,DoctorShiftMappingBean sm where "
      +"d.doctorid=sm.doctoridfk and  s.shiftID=sm.shiftidfk"
      +" and d.doctorid=:doctorID "; 
```

帮我...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:13:25.270

我认为你可以通过两种方式做你想做的事：

1) 在接受所有必要参数的 DoctorShift 类中创建构造函数，并在您的 HQL 查询中使用此构造函数创建对象：

```
qry="select new com.yourpackage.DoctorShift(s.shiftNameId,s.shiftName,d.doctorRegnumvar,"
      +"d.doctorFnamevar,d.doctorLnamevar,d.doctorstatus," 
      +"sm.shiftstatus,s.shiftTime) from ShiftDaoBean s,"
      + "DoctorDaoBean d,DoctorShiftMappingBean sm where "
      +"d.doctorid=sm.doctoridfk and  s.shiftID=sm.shiftidfk"
      +" and d.doctorid=:doctorID "; 
```

2) 获取 Object[] 数组的列表，而不是 DoctorShifts 对象的列表。每个数组将代表结果集中的行。例如：

```
Query qry="-----";//valid query

List<Object[]> list=(List<Object[]>)qry.list();
System.out.println(" Size of list is "+list.size());// i'm getting 2

Object[] firstRow =list.get(0);

System.out.println(firstRow[0]);// will output shiftNameId
System.out.println(firstRow[1]);// will output shiftName
... 
```

在第二种情况下，您的查询仍将与您发布的相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:56:30.377

否则，您可以使用 ResultTransformer 在 bean 中加载数据。可能[这个博客](http://keyurj.blogspot.com/2013/02/loading-unmanaged-entities-in-hibernate.html)会有所帮助

# iphone - IOS 5 将 .CAF 上传到 Web 服务器但为空白

> ID：14170525
> 
> 赞同：1
> 
> 时间：2013-01-05T09:43:11.260
> 
> 标签：iphone, objective-c, ios, upload, caf

我正在尝试将记录的 .caf 文件上传到我的网络服务器。该文件在那里，因为它在录制后播放，而且我的播放配置也是正确的，因为我可以在我的应用程序中从我的服务器播放常规的 .caf 文件。但是，当我上传 caf 时，php 脚本返回“SUCCESS”，并创建了一个“假定”为上传的 .caf 文件的文件，但该文件为空白或 2 个字节大小。我知道文件不正确，因为当我下载它并将文件放入音频编辑软件时，它是空白的。我有以下 OBJECTIVE-C 代码：

```
 NSString *file2 = [[NSBundle mainBundle] pathForResource:filePath ofType:@"caf"];
NSData *file1Data = [[NSData alloc] initWithContentsOfFile:file2];
NSString *urlString = @"http://sayroom.com/SR_Mobile_App/scripts/upload_audio.php";
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"thefile.caf\"\r\n"]] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:file1Data]];
    [body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
NSLog(@"Return String= %@",returnString);
NSLog(@"Audio Sent Successfully"); 
```

这是我的php代码：

```
 $uploaddir = 'audio/';
    $file = basename($_FILES['userfile']['name']);
    $uploadfile = $uploaddir . $file;

    if(!$_FILES['userfile']['tmp_name']){
echo "no file";
exit();
    }

    if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
    echo $_FILES['userfile']['tmp_name']."done";
    } else {
    echo "ERROR";
    } 
```

我整天都在处理这个问题，我在网上找不到任何帮助。我尝试了很多方法，但我还没有看到任何进展。

有任何想法吗？

# css - 引导组合下拉按钮空间问题

> ID：14170529
> 
> 赞同：2
> 
> 时间：2013-01-05T09:43:32.997
> 
> 标签：css, twitter-bootstrap, safari

我正在使用引导拆分按钮下拉菜单，但在按钮和下拉菜单按钮之间有一个空格。此问题仅与 safari 浏览器有关。它适用于其他浏览器。我正在使用这里的代码：

[Bootstrap 拆分下拉菜单](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)

即使在官方网站上，它也会中断并在拆分按钮下拉列表中有一个空格。这只是 safari 的问题。在其他浏览器中运行良好。我检查了 2-3 个不同的 safari 安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:30:59.883

已经报告了这个错误，而且似乎立场是引导程序根本不支持 Windows 的 safari。

[https://github.com/twitter/bootstrap/issues/5644](https://github.com/twitter/bootstrap/issues/5644)

此外，这个错误似乎只发生在 Windows 版本的 safari 上。

如果您不能忍受这个错误，请尝试以 safari 为目标，但请确保您在 win 和 mac 上都对其进行测试，这样您就不会在 win 上修复它，而是在 mac 上破坏它。

瞄准Safari的方法：

添加一个额外的 # 只会被 safari 读取（非常hacky）

```
##id {width:100px;} 
```

如何使用 js 仅针对 Windows 代理：

```
if (navigator.appVersion.indexOf("Mac")!=-1) {
} else {
    $('body').addClass('win');
} 
```

如果用户使用 Windows，这会将类 win 添加到正文中。

之后，您可以使用 css 定位 safari：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {

    .win { height: 100%; }

} 
```

结果是，您将只针对 Windows 上的 safari。

之后，您只需要调整，无论是什么导致了问题。

很可能是按钮元素上的填充或边距，或者可能是宽度。尝试使用这些，如果没有其他帮助相对位置甚至负边距可能会有所帮助。

来自引导程序的相关 HTML：

```
<!-- /btn-group -->
              <div class="btn-group">
                <button class="btn btn-primary">Action</button>
                <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                <ul class="dropdown-menu">
                  <li><a href="#">Action</a></li>
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li><a href="#">Separated link</a></li>
                </ul>
              </div><!-- /btn-group --> 
```

如果要定位下拉菜单，请使用：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {

    .win .dropdown-menu { height: 100%; }

} 
```

现在你可以破解了！

或者，根本不支持 Windows 上的 safari :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:53:56.990

使用的问题`@media screen and (-webkit-min-device-pixel-ratio:0)`是它也针对 Chrome 浏览器。

我找到了使用 z-index 定位的解决方案，这解决了 Safari 和 Chrome 浏览器上的问题，并且不需要任何 JavaScript 或更改 HTML 代码：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
.btn-group > .btn + .btn {
    margin-left: -5px;
}  
.btn-group:hover a {
    z-index:1;
}
.btn-group:hover button{
    z-index:10;
}
.input-append input{
    z-index:1;
}
.input-append  a{
    z-index:10;
}} 
```

# vb.net - 数据临时保存到访问数据库。当我终止应用程序时，数据会自动从数据库中删除

> ID：14170530
> 
> 赞同：0
> 
> 时间：2013-01-05T09:43:34.757
> 
> 标签：vb.net, ms-access

VB.NET 数据临时保存在 access 数据库中，当我终止应用程序时，数据会自动从数据库中删除。这是代码： -

```
con1.Open()
Dim da As New OleDbDataAdapter
Dim cmd As New OleDb.OleDbCommand
cmd.Connection = con1
cmd.CommandText = "INSERT INTO Journal(UsedAccount,Effect,Purpose,EffectedAccount,Amount,Datex) VALUES( '" & Me.ComboBox1.SelectedItem & "','" & effect & "','" & Me.TextBox1.Text & "','" & Me.ComboBox3.SelectedItem & "','" & Me.TextBox2.Text & "','" & Me.DateTimePicker1.Value & "')"
cmd.ExecuteNonQuery()
con1.Close() 
```

我的代码做错了什么？如何防止数据被自动删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T10:07:59.400

您的项目文件中可能包含您的 MDB (ACCDB) 文件。
如果您检查与此项目文件关联的属性，您会发现一个名为

`Copy to Output Directory`设置为`Copy Always`.

您的连接字符串还包含快捷方式

`Data Source = "|DataDirectory|\yourdb.mdb"`

如果这个场景是正确的，那么

*   您启动您的应用程序，MDB 文件从原始位置复制到 BIN\DEBUG 目录。
*   您在那里插入数据而不会出错。
*   您停止调试会话以修复错误或其他问题
*   您重新启动应用程序，您的数据库的新副本（但为空）将再次复制到输出目录中。

修复它，将属性设置为“从不复制”或将连接字符串更改为指向固定位置。

附带说明：切勿使用字符串连接来构建您的 sql 命令。这将是一个巨大的安全风险（Sql 注入攻击）和众多解析问题的根源（日期格式、带单引号的字符串、非整数的小数分隔符）。始终使用参数化查询。

# jquery - jquery左侧导航菜单

> ID：14170532
> 
> 赞同：0
> 
> 时间：2013-01-05T09:43:39.467
> 
> 标签：jquery, navigation

我在左侧有一个导航菜单，当我单击 h3 时，我正在使用 jquery 向下滑动子菜单但不会关闭之前的h3内容。

这是一个[链接](http://jsbin.com/welcome/69893/edit)，可以查看我在说什么。

感谢 roXon，我的问题得到了解决，但现在当我在 h3 标签内添加超链接时，它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T09:48:38.020

这将允许您：

*   在打开点击的之前隐藏所有打开的
*   在一个“按钮”上切换（显示/隐藏）

[http://jsbin.com/welcome/69899/edit](http://jsbin.com/welcome/69899/edit)

```
$(document).ready(function (){

$('.hide').hide();
$('.arrowlistmenu li:has(".hide")').find('h3').click(function() {
    var el = $(this).next('.hide'),
    check = (el.is(':visible')) ? el.slideUp() : ($('.hide').slideUp()) (el.slideDown());
});

}); 
```

# android - 我将如何在我的应用程序中实现这个颜色选择器？

> ID：14170534
> 
> 赞同：0
> 
> 时间：2013-01-05T09:43:57.617
> 
> 标签：android, color-picker, android-holo-everywhere

我目前正在[将此颜色选择器](https://github.com/gsingh93/android-ColorPickerPreference)用于 android，但我不确定如何从该颜色选择器中设置`textview`另一个a 的 textColor `activity`。有人对这个库有任何经验吗？谢谢！另外，如果您需要我的任何代码，请询问！

编辑：感谢您的回答！我去了类似的东西，但你的回答有很大帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T09:47:40.360

从 gitHab 添加项目作为库项目，并在项目中使用 ColorPickerDialog，就像使用简单对话框一样。从自述文件[https://github.com/gsingh93/android-ColorPickerPreference#readme](https://github.com/gsingh93/android-ColorPickerPreference#readme)您可以在 PreferenceActivity 中使用 ColorPickerPreference。

只需像这样设置 onColorChangeListener ：

```
public void setOnColorChangedListener(OnColorChangedListener listener) {
    mListener = listener;
} 
```

从 gitHub 上的源代码是正确的方法）因为如果用户单击面板并选择任何颜色，则会调用此回调。

祝你好运！

# javascript - Jade 中包含和阻塞的区别

> ID：14170537
> 
> 赞同：27
> 
> 时间：2013-01-05T09:44:42.783
> 
> 标签：javascript, node.js, express, pug

创建 Jade 模板时，block 和使用 include 有什么区别？你什么时候使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-05T17:05:24.573

块是占位符。它的内容来自另一个玉文件。包含也是一个占位符。它的内容也来自另一个玉文件。

到目前为止，两者都是平等的。

但：

include 嵌入一个完整的文件。包含文件定义要包含的文件。因此，include 适用于外包部分，例如页脚或页眉，它们总是以相同的方式加载。

块只是在顶层文件中定义了一个占位符。包含哪些内容不是由这个文件定义的，而是由一个子文件定义的。因此，对所包含内容的控制正在被逆转。

使用包含，A 说：导入 B。使用块，B 说：这是占位符的内容，请使用文件 A 及其占位符填写我的内容。

include 表示自上而下，blocks 表示自下而上。

此外，一个文件可能包含多个块。

什么时候用什么：

*   在带有块的母版页中定义站点的整体布局是很常见的。
*   单页包含每个单独文件的内容，引用主文件并填充其块。
*   使用包含设置主视图或页面中的子视图。

这有帮助吗？

# iphone - 在 tableview 单元点击上推送一个新的视图控制器

> ID：14170539
> 
> 赞同：1
> 
> 时间：2013-01-05T09:44:54.907
> 
> 标签：iphone, uiviewcontroller, ios6, uitableview, didselectrowatindexpath

我有一个头文件是

```
@interface DemoFirstViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>

@end 
```

在这个头文件的源文件中我已经声明了这个方法

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    AnotherViewController *anotherViewController=[[AnotherViewController alloc]   initWithNibName:@"AnotherViewController" bundle:nil];
    [self.navigationController pushViewController:anotherViewController animated:YES];

    NSLog(@"didSelectRowAtIndexPath: row=%d", indexPath.row);

} 
```

和另一个ViewController 文件是

```
@interface AnotherViewController : UIViewController
{
    IBOutlet UILabel *message;
}

@property (nonatomic , retain) UILabel *message;

@end 
```

我正在使用 Xib 文件完成这一切。不是故事板。

这是`tabbased Application`. 并且已经在 Appdelegate 中声明了两个视图控制器

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController *viewController1 = [[DemoFirstViewController alloc] initWithNibName:@"DemoFirstViewController" bundle:nil];
    UIViewController *viewController2 = [[DemoSecondViewController alloc] initWithNibName:@"DemoSecondViewController" bundle:nil];
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[viewController1, viewController2];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;

} 
```

bt 在点击表格单元格时，anotherViewcontroller 没有出现。请尽快回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:13:10.380

这背后可能有几个原因：

1.  `UINavigationController`应在`Appdelegate`课堂上正确实施。
2.  `UITableView`不应添加任何`subView`.`self.view`
3.  如果`didSelectRowAtIndexPath:`被调用，那没关系，否则你忘记设置`tableView`代表了。

    ```
    tableView.delegate = self; 
    ```

**编辑：**我读[了 Zeel](https://stackoverflow.com/users/1868637/zeel)的评论，他说他正在使用`TabBar`，但他之前没有提到，所以我正在编辑我的答案：-

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    DemoFirstViewController *viewController1 = [[DemoFirstViewController alloc] initWithNibName:@"DemoFirstViewController" bundle:nil];
    UINavigationController *nav1 =[[UINavigationController alloc] initWithRootViewController:viewController1];
    DemoSecondViewController *viewController2 = [[DemoSecondViewController alloc] initWithNibName:@"DemoSecondViewController" bundle:nil];
    UINavigationController *nav2 =[[UINavigationController alloc] initWithRootViewController:viewController2];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[nav1, nav2];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:12:38.693

```
NSLog(@"Navigation Controller: %@", self.navigationController); 
```

检查此行打印的内容。我怀疑您忘记在层次结构中添加 navigationController

更新：根据您的 AppDelegate 代码，像这样更新它以解决您的问题：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController *viewController1 = [[DemoFirstViewController alloc] initWithNibName:@"DemoFirstViewController" bundle:nil];

    // here I create a Navigation Controller and set its root view controller to viewController1
    UINavigationController *navController1 = [[UINavigationController alloc] initWithRootViewController:viewController1];

    UIViewController *viewController2 = [[DemoSecondViewController alloc] initWithNibName:@"DemoSecondViewController" bundle:nil];
    self.tabBarController = [[UITabBarController alloc] init];

    // updated this line to show the navController1 (which contains viewController1)
    self.tabBarController.viewControllers = @[navController1, viewController2];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;

} 
```

如果 viewController2 是一个 UITableViewController 需要推送一些东西，在它上面做同样的事情（添加另一个 UINavigationController，设置根视图控制器，并设置一个 TabBarController 的视图控制器）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T10:30:45.437

以上所有答案都指向正确的方向。以防万一您还没有掌握它，请检查您是否在`appdelegate`,

```
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];  
self.window.rootViewController = navigationController; 
```

并再次检查。

# python - 在我的 Windows 7 机器上安装 django 1.4.3 时出现多个语法错误

> ID：14170540
> 
> 赞同：0
> 
> 时间：2013-01-05T09:44:57.767
> 
> 标签：python, django, python-3.x, pip

我尝试在安装了 Python 3.3 的 Windows 7 机器上安装 django 1.4.3。

我使用`pip install django`了但收到了几个 SyntaxError: invalid syntax messages on installation。

一个例子是：

```
SyntaxError: invalid syntax

byte-compiling C:\Python33\Lib\site-packages\django\utils\unittest\case.py to c
se.cpython-33.pyc
  File "C:\Python33\Lib\site-packages\django\utils\unittest\case.py", line 327
    except SkipTest, e:
                   ^
SyntaxError: invalid syntax

byte-compiling C:\Python33\Lib\site-packages\django\utils\unittest\loader.py to
loader.cpython-33.pyc
  File "C:\Python33\Lib\site-packages\django\utils\unittest\loader.py", line 92
    except Exception, e:
                    ^ 
```

Django 不能与 Python 3.3 一起运行吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T09:49:00.513

> Django 1.5 是第一个支持 Python 3 的 Django 版本。

[资源](https://docs.djangoproject.com/en/dev/topics/python3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:54:29.627

我遇到了类似的问题..我得到了 Python 3.3，Django 1.4.3 的安装似乎还可以，但是当我尝试创建项目文件夹时，我收到语法错误消息...

# asp.net - 需要下拉或列表框中的 optgroup 等功能

> ID：14170544
> 
> 赞同：1
> 
> 时间：2013-01-05T09:45:32.223
> 
> 标签：asp.net, drop-down-menu, listbox

我想在下拉或列表框中显示类别和子类别中的内容。

内容示例

```
 Mobile
  Nokia
  IPhone
  LG
 Laptop
  Dell
  HP
  HCL 
```

在此示例中，移动设备和笔记本电脑是类别，其余是子类别。我希望该用户无法选择类别，但它会显示。用户只选择子类别。

请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:52:31.320

问题有点不清楚，但如果您正在寻找标记，请尝试

```
<select>
  <optgroup label="Mobile">
    <option>Nokia</option>
    <option>IPhone</option>
    <option>LG</option>
  </optgroup>
  <optgroup label="Laptop">
    <option>Dell</option>
    <option>HP</option>
    <option>HCL</option>
  </optgroup>
</select> 
```

为了在 asp.net 中实现这一点，[这篇文章](http://weblogs.asp.net/raduenuca/archive/2011/02/26/asp-net-mvc-extending-the-dropdownlist-to-show-the-items-grouped-by-a-category.aspx)解释了如何修改 MVC 的`DropDownList`实现。

# c# - 找不到程序集“Microsoft.Practices.ServiceLocation”

> ID：14170549
> 
> 赞同：0
> 
> 时间：2013-01-05T09:46:01.433
> 
> 标签：c#, wpf, prism, xbap

我已经部署了我`WPF browser application`的使用`Prism`with `MEF`on `IIS 7`。但是在 IE 完成下载应用程序文件后，我遇到了以下错误。在我忘记之前，我应该提到它在调试模式下以及当我通过 IE 浏览 xbap 文件时也可以正常工作。我`VS2010 sp1`在`Windows 7 sp1`机器上使用。

这是详细的错误：

```
System.Runtime.Serialization.SerializationException: Unable to find assembly 'Microsoft.Practices.ServiceLocation, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.

   at System.AppDomain.nCreateInstance(String friendlyName, AppDomainSetup setup, Evidence providedSecurityInfo, Evidence creatorsSecurityInfo, IntPtr parentSecurityDescriptor)
   at System.Runtime.Hosting.ApplicationActivator.CreateInstanceHelper(AppDomainSetup adSetup)
   at System.Runtime.Hosting.ApplicationActivator.CreateInstance(ActivationContext activationContext, String[] activationCustomData)
   at System.Windows.Interop.PresentationApplicationActivator.CreateInstance(ActivationContext actCtx)
   at System.Activator.CreateInstance(ActivationContext activationContext)
   at System.Deployment.Application.DeploymentManager.ExecuteNewDomain()
   at System.Deployment.Application.InPlaceHostingManager.Execute()
   at MS.Internal.AppModel.XappLauncherApp.ExecuteDownloadedApplication()
   at System.Windows.Interop.DocObjHost.RunApplication(ApplicationRunner runner)
   at MS.Internal.AppModel.XappLauncherApp.XappLauncherApp_Exit(Object sender, ExitEventArgs e)
   at System.Windows.Application.OnExit(ExitEventArgs e)
   at System.Windows.Application.DoShutdown()
   at System.Windows.Application.ShutdownImpl()
   at System.Windows.Application.ShutdownCallback(Object arg)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.ProcessQueue()
   at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.Run()
   at System.Windows.Application.RunDispatcher(Object ignore)
   at System.Windows.Application.StartDispatcherInBrowser(Object unused)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.ProcessQueue()
   at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam) 
```

* * *

```
PresentationHost.exe v3.0.6920.4902 built by: NetFXw7 - C:\Windows\System32\PresentationHost.exe
ntdll.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\SYSTEM32\ntdll.dll
kernel32.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\kernel32.dll
KERNELBASE.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\KERNELBASE.dll
ADVAPI32.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\ADVAPI32.dll
msvcrt.dll v7.0.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\msvcrt.dll
sechost.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\SYSTEM32\sechost.dll
RPCRT4.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\RPCRT4.dll
USER32.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\USER32.dll
GDI32.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\GDI32.dll
LPK.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\LPK.dll
USP10.dll v1.0626.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\USP10.dll
ole32.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\ole32.dll
OLEAUT32.dll v6.1.7600.16385 - C:\Windows\system32\OLEAUT32.dll
mscoree.dll v4.0.31106.0 (Main.031106-0000) - C:\Windows\System32\mscoree.dll
SHLWAPI.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\SHLWAPI.dll
WININET.dll v8.00.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\WININET.dll
Normaliz.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\Normaliz.dll
urlmon.dll v8.00.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\urlmon.dll
CRYPT32.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\CRYPT32.dll
MSASN1.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\MSASN1.dll
iertutil.dll v8.00.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\iertutil.dll
SHELL32.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\SHELL32.dll
IMM32.DLL v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\IMM32.DLL
MSCTF.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\MSCTF.dll
PresentationHost_v0400.dll v4.0.30319.1 built by: RTMRel -C:\Windows\Microsoft.NET\Framework\v4.0.30319\WPF\PresentationHost_v0400.dll
MSVCR100_CLR0400.dll v10.00.30319.1 - C:\Windows\System32\MSVCR100_CLR0400.dll
VERSION.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\VERSION.dll
PSAPI.DLL v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\PSAPI.DLL
CRYPTBASE.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\CRYPTBASE.dll
uxtheme.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\uxtheme.dll
CBTLaunch.dll v3.7.0.32 - C:\Program Files\Red Gate\SQL Prompt 4\CBTLaunch.dll
CLBCatQ.DLL v2001.12.8530.16385 (win7_rtm.090713-1255) - C:\Windows\system32\CLBCatQ.DLL
CRYPTSP.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\CRYPTSP.dll
rsaenh.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\rsaenh.dll
RpcRtRemote.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\RpcRtRemote.dll
dwmapi.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\dwmapi.dll
comctl32.dll v6.10 (win7_rtm.090713-1255) - C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7600.16385_none_421189da2b7fabfc\comctl32.dll
SspiCli.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\SspiCli.dll
profapi.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\profapi.dll
ws2_32.DLL v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\ws2_32.DLL
NSI.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\NSI.dll
dnsapi.DLL v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\dnsapi.DLL
iphlpapi.DLL v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\iphlpapi.DLL
WINNSI.DLL v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\WINNSI.DLL
RASAPI32.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\RASAPI32.dll
rasman.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\rasman.dll
rtutils.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\rtutils.dll
sensapi.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\sensapi.dll
peerdist.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\peerdist.dll
USERENV.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\USERENV.dll
AUTHZ.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\AUTHZ.dll

mswsock.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\mswsock.dll
wshtcpip.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\wshtcpip.dll
NLAapi.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\NLAapi.dll
rasadhlp.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\rasadhlp.dll
dfshim.dll v4.0.31106.0 (Main.031106-0000) - C:\Windows\System32\dfshim.dll
mscoreei.dll v4.0.30319.1 (RTMRel.030319-0100) - C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscoreei.dll
clr.dll v4.0.30319.225 (RTMGDR.030319-2200) - C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
wship6.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\wship6.dll
fwpuclnt.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\fwpuclnt.dll
msxml3.dll v8.110.7600.16385 - C:\Windows\System32\msxml3.dll
ieproxy.dll v8.00.7600.16385 (win7_rtm.090713-1255) - C:\Program Files\InternetExplorer\ieproxy.dll
SXS.DLL v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\SXS.DLL
PresentationHostProxy.dll v4.0.31106.0 built by: Main - C:\Windows\System32\PresentationHostProxy.dll
mshtml.dll v8.00.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\mshtml.dll
msls31.dll v3.10.349.0 - C:\Windows\System32\msls31.dll
mlang.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\mlang.dll
msimtf.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\msimtf.dll
IEFRAME.dll v8.00.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\IEFRAME.dll
OLEACC.dll v7.0.0.0 (win7_rtm.090713-1255) - C:\Windows\System32\OLEACC.dll
jscript.dll v5.8.7600.16385 - C:\Windows\System32\jscript.dll
ImgUtil.dll v8.00.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\ImgUtil.dll
pngfilt.dll v8.00.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\pngfilt.dll
mscorlib.ni.dll v4.0.30319.225 (RTMGDR.030319-2200) - C:\Windows\assembly\NativeImages_v4.0.30319_32\mscorlib\eb4e1e70734f6efb9c7de7ec5f452c9e\mscorlib.ni.dll
nlssorting.dll v4.0.30319.225 (RTMGDR.030319-2200) - C:\Windows\Microsoft.NET\Framework\v4.0.30319\nlssorting.dll
System.ni.dll v4.0.30319.225 built by: RTMGDR - C:\Windows\assembly\NativeImages_v4.0.30319_32\System\4d67e7b436c61b8141d19f99f7d2c75e\System.ni.dll
WindowsBase.ni.dll v4.0.30319.225 built by: RTMGDR - C:\Windows\assembly\NativeImages_v4.0.30319_32\WindowsBase\bde920dbf9e20e926b60106042e16d64\WindowsBase.ni.dll
PresentationCore.ni.dll v4.0.30319.225 built by: RTMGDR - C:\Windows\assembly\NativeImages_v4.0.30319_32\PresentationCore\887688af9665ecb951b418d5982a3c5d\PresentationCore.ni.dll
PresentationFramework.ni.dll v4.0.30319.225 - C:\Windows\assembly\NativeImages_v4.0.30319_32\PresentationFramewo#\5f8ab715f37b56cc76c8a130dbc6e74b\PresentationFramework.ni.dll
dwrite.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\dwrite.dll
wpfgfx_v0400.dll v4.0.30319.225 built by: RTMGDR - C:\Windows\Microsoft.NET\Framework\v4.0.30319\WPF\wpfgfx_v0400.dll
PresentationNative_v0400.dll v4.0.30319.1 built by: RTMRel - C:\Windows\Microsoft.NET\Framework\v4.0.30319\WPF\PresentationNative_v0400.dll
msimg32.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\msimg32.dll
System.Xaml.ni.dll v4.0.30319.1 built by: RTMRel - C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Xaml\0c8167f224c2ac6fdba796bd53cdd338\System.Xaml.ni.dll
System.Deployment.ni.dll v4.0.30319.1 (RTMRel.030319-0100) - C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Deployment\f2aa6fd240cb912568c2b6811b101726\System.Deployment.ni.dll
shfolder.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\shfolder.dll
System.Configuration.ni.dll v4.0.30319.1 (RTMRel.030319-0100) - C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Configuration\9ea5f775ad6b7af3e326a08e26ff06a3\System.Configuration.ni.dll
System.Xml.ni.dll v4.0.30319.225 built by: RTMGDR - C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Xml\c27f2137e0e6185d243251544f9ec0c9\System.Xml.ni.dll
winhttp.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\winhttp.dll
webio.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\webio.dll
credssp.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\credssp.dll
dhcpcsvc6.DLL v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\dhcpcsvc6.DLL
dhcpcsvc.DLL v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\dhcpcsvc.DLL
System.Security.ni.dll v4.0.30319.1 (RTMRel.030319-0100) - C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Security\31b164d1230fb8b86e10858ba96e6cd5\System.Security.ni.dll
cryptnet.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\cryptnet.dll
WLDAP32.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\WLDAP32.dll
dsrole.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\dsrole.dll
clrjit.dll v4.0.30319.225 (RTMGDR.030319-2200) - C:\Windows\Microsoft.NET\Framework\v4.0.30319\clrjit.dll
System.Drawing.ni.dll v4.0.30319.1 built by: RTMRel - C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Drawing\c751ad524dc3ec593de1883b9f0ad0ae\System.Drawing.ni.dll
System.Windows.Forms.ni.dll v4.0.30319.1 built by: RTMRel - C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Windows.Forms\d43f6750bf5e42fd2183991957147df1\System.Windows.Forms.ni.dll
GPAPI.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\GPAPI.dll
Cabinet.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\Cabinet.dll
DEVRTL.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\DEVRTL.dll
ncrypt.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\ncrypt.dll
bcrypt.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\bcrypt.dll
bcryptprimitives.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\system32\bcryptprimitives.dll
gdiplus.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\WinSxS\x86_microsoft.windows.gdiplus_6595b64144ccf1df_1.1.7600.16385_none_72fc7cbf861225ca\gdiplus.dll
WindowsCodecs.dll v6.1.7600.16385 (win7_rtm.090713-1255) - C:\Windows\System32\WindowsCodecs.dll
System.Core.ni.dll v4.0.30319.225 built by: RTMGDR - C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Core\58cbae39cc6370050c776b0ffeffcab3\System.Core.ni.dll
diasymreader.dll v10.0.30319.1 built by: RTMRel - C:\Windows\Microsoft.NET\Framework\v4.0.30319\diasymreader.dll 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T21:26:36.107

[您可以从https://servicelocation.codeplex.com/](https://servicelocation.codeplex.com/)下载 Microsoft.Practices.ServiceLocation.dll 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:37:53.590

也许您应该将此接口的程序集添加到已部署的程序集中？Prism 不是 .NET 框架的一部分，因此需要与您的应用程序一起安装/部署。

# javascript - 谷歌地图标记消失

> ID：14170550
> 
> 赞同：1
> 
> 时间：2013-01-05T09:46:09.567
> 
> 标签：javascript, jquery, html, google-maps-api-3, google-maps-markers

我的地图标记有问题。第一次加载地图时，一切正常。然而，当 div 被隐藏并重新显示（并调用相同的函数 map()）时，地图加载正常，但标记不会出现，即使地图位于我真正所在的位置的中心。

这是地图编码的片段：

```
function map(){ 
  var latlng = new google.maps.LatLng(38.54, 15.35);
  infowindow = new google.maps.InfoWindow();

  var mapOptions = {
zoom: 5,
center: latlng,
panControl: false,
mapTypeControl: false,
scaleControl: false,
streetViewControl: false,
overviewMapControl: false
};

  map = new google.maps.Map(document.getElementById("map"), mapOptions);    
  switch (map_view_id) {
case "1" :  map.setMapTypeId(google.maps.MapTypeId.ROADMAP);
            break;
case "2" :  map.setMapTypeId(google.maps.MapTypeId.SATELLITE);
            break;
case "3" :  map.setMapTypeId(google.maps.MapTypeId.HYBRID);
            break;
  } 

  google.maps.event.addListenerOnce(map, 'tilesloaded', function(){     
    updateMap();           
   }); 
  }

function updateMap() {
  map.setCenter(new google.maps.LatLng(latitude, longitude));
  map.setZoom(13);

  marker = new google.maps.MarkerImage("/android_asset/www//graphics/car.png",
new google.maps.Size(96.0, 96.0),
new google.maps.Point(0, 0),
new google.maps.Point(48.0, 48.0)
 );

  markerShadow = new google.maps.MarkerImage("/android_asset/www/graphics/car_shadow.png",
new google.maps.Size(145.0, 96.0),
new google.maps.Point(0, 0),
new google.maps.Point(48.0, 48.0)
 ); 

  point = new google.maps.LatLng(latitude,longitude);

  if(!markerUserPosition){
// Create marker
markerUserPosition = new google.maps.Marker({
  position: point,
  map: map,
  icon: marker,
  shadow: markerShadow,
  draggable:false,
      animation: google.maps.Animation.DROP
    });
  } else {
     // Move marker
      markerUserPosition.setPosition(point);        
  }

} 
```

**更新：** 有没有办法完全摧毁谷歌地图？因为在隐藏时，我可以在技术上完全破坏地图并在需要时加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:18:18.830

一旦你`$("#target-map-block").show();`，你可以重建地图

`map = new google.maps.Map(document.getElementById("map"), mapOptions);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:08:29.617

像这样试试

```
$("#button-id-to-show").click(function() {
  $("#target-map-block").show();
  updateMap();
}); 
```

# java - 使用java调用Postgresql的过程

> ID：14170553
> 
> 赞同：0
> 
> 时间：2013-01-05T09:46:50.543
> 
> 标签：java, postgresql, call, procedure

从 postgresql 的文档中我发现：

`con.setAutoCommit(false);`

## 过程调用。

```
CallableStatement proc = con.prepareCall("{ ? = call doquery ( ? ) }");
proc.registerOutParameter(1, Types.Other);
proc.setInt(2, -1);
proc.execute();
ResultSet results = (ResultSet) proc.getObject(1); 
```

参考[这里](http://www.postgresql.org/docs/7.4/static/jdbc-callproc.html)

虽然，我试图创建一个程序，就像

```
CREATE OR REPLACE FUNCTION PSSQLPRC(pA IN VARCHAR,pB IN NUMERIC,PC OUT NUMERIC)
RETURNS NUMERIC
AS $$<br> begin

... ... 
end;
$$ Language PLPGSQL; 
```

使用java调用postgresql过程如下

```
CallableStatement proc = con.prepareCall("{ ? = call PSSQLPRC(?,?,?) }");
proc.registerOutParameter(1, Types.NUMERIC);
proc.setString(2,"abc");
proc.setInt(3,10);
proc.registerOutParameter(4, Types.NUMERIC);
proc.execute(); 
```

当 CallableStatement 的对象执行时，会发生错误。我能做些什么来解决这个错误？上述陈述是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:04:33.780

您真的需要存储过程的 2 个返回值吗？如果没有，请尝试将功能更改为：

```
CREATE OR REPLACE FUNCTION PSSQLPRC(pA IN VARCHAR,pB IN NUMERIC)
RETURNS NUMERIC 
```

和Java代码：

```
CallableStatement proc = con.prepareCall("{ ? = call PSSQLPRC(?,?) }");
proc.registerOutParameter(1, Types.NUMERIC);
proc.setString(2,"abc");
proc.setInt(3,10);
proc.execute(); 
```

# jquery - javascript在页面加载时调用点击处理函数而不传递事件对象

> ID：14170562
> 
> 赞同：0
> 
> 时间：2013-01-05T09:47:34.010
> 
> 标签：jquery, javascript-events, javascript

我有一个期望点击事件对象作为参数的函数。例如

```
toggle: function (e) {
//does all the required work and then calls cancelEvent

this.cancelEvent(e);//IMPORTANT TO HANDLE LOCAL ANCHORS
    },

cancelEvent:function(e) {
    if (!e) e = window.event;
        if (e.preventDefault) {
        e.preventDefault();
                  } else {
            e.returnValue = false;
                  }
    }, 
```

我需要在页面加载时调用切换功能。

我尝试在不传递事件参数的情况下调用它。但是，这样做会破坏预期的功能，并且一切都变得不可编辑。

无论如何我可以获取当前事件对象并将其传递给函数吗？

还是我应该将加载事件也附加到事件侦听器中？

请让我知道出路是什么？

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:03:12.563

No need to even use jQuery. JavaScript in the browser includes a native Event object. So you should be able to call your toggle function directly (assuming you have access to the scope it was defined in) like this...

```
var fakeEvent = new Event('click');
toggle(fakeEvent); 
```

Be sure to test thoroughly. If your code is relying on certain property values that the event would only have if it were triggered from a real user click then this may not work for you.

A better option would be to refactor so that the functionality that is shared by both page load and click is factored into a new function which can be called from both the click event handler function and the page load logic.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:54:22.407

是的，您可以使用 jQuery 创建事件：

```
var e = $.Event('click');
$element.trigger(e); // Triggers click event on element 
```

[这是](http://docs.jquery.com/Events/jQuery.Event)关于`$.Event`. 通过以下方式使用 jQuery 触发点击事件也会为您创建一个事件对象：

```
$element.click(); 
```

# ember.js - 如何在 ember 路由中获取当前对象的子级

> ID：14170566
> 
> 赞同：1
> 
> 时间：2013-01-05T09:48:02.757
> 
> 标签：ember.js, ember-router

Ember 指南中的模板部分描述了如何使用 linkTo 帮助器。但是，我似乎无法找到以下问题的答案：

我有一个页面显示 Post 对象的一些属性。该页面包含一个“评论”链接，该链接需要显示属于当前帖子的评论。

```
// Router
App.Router.map(function(match) {
  match('/posts').to('posts', function(match) {
    match('/:post_id').to('post', function(match) {
      match('/').to('postIndex');
      match('/comments').to('comments');
    });
  });
});

// post template
...
{{#linkTo "comments"}}Comments{{/linkTo}}
...
{{outlet}} 
```

如何定义我的 CommentsRou​​te 以使用当前帖子的评论填充控制器的内容？

```
App.CommentsRoute = Ember.Route.extend({
  model: function() {
    // I need to get the content of the postController here
    // this.controllerFor('post') seemed obvious, but doesn't work
    post = ????;
    post.get('comments')
  }
}) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:59:29.860

`controllerFor`您可以从路由中访问 postController ：

```
App.CommentsRoute = Ember.Route.extend({
  model: function() {
    var controller = this.controllerFor('post');
    return controller.get('comments');
  }
}); 
```

你在使用 ember-data 吗？在这种情况下，加载帖子数据时侧载评论数据可能是有意义的。[https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md#revision-11](https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md#revision-11)

`get('comments')`更新：唱到`get('comments.content')`

更新：恢复`get('comments')`

# android - 如何从 sdcard android 加载不同大小的图像？

> ID：14170567
> 
> 赞同：0
> 
> 时间：2013-01-05T09:48:08.083
> 
> 标签：android

我想将 4mb、19mb、3mb 大小的图像从 sd 卡加载到图像视图中。

```
BitmapFactory.Options options=new BitmapFactory.Options();
 options.inJustDecodeBounds=true;
 InputStream inputStream=new BufferedInputStream(new FileInputStream(fileName));
 options.inSampleSize=2;
 options.inJustDecodeBounds=false;
 Bitmap bmp=BitmapFactory.decodeFile(fileName,options); 
```

当我使用此代码时，我无法获得所有图像的确切尺寸。根据屏幕功能，应加载图像。如果屏幕能够加载 19mb 图像，我不想使用 option.insampleSize=2。如果它没有那个，那一次我只想为那个 18Mb 和其他我不想那样做的图像减小图像的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:59:08.130

你可以做这样的事情

```
int sampleSize = 1;

while (true) {
    try {
        BitmapFactory.Options options = new BitmapFactory.Options();

        options.inSampleSize = sampleSize;
        options.inJustDecodeBounds = false;

        InputStream inputStream = new BufferedInputStream(new FileInputStream(fileName));
        Bitmap bmp=BitmapFactory.decodeFile(fileName,options);

        // some code here

        break;
    } catch (OutOfMemoryError oom) {
        sampleSize++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:00:27.470

您可以动态请求屏幕大小

```
int screenSize = (resources.getConfiguration().screenLayout &
        Configuration.SCREENLAYOUT_SIZE_MASK);
DisplayMetrics metrics = resources.getDisplayMetrics(); 
```

然后使用

```
metrics.widthPixels, metrics.heightPixels 
```

或者

```
if (screenSize == Configuration.SCREENLAYOUT_SIZE_SMALL) // or another constant screen sizes in Configuration class. 
```

并请求图像大小而不使用图像的 URI 加载整个图像：

```
InputStream input = contentResolver.openInputStream(uri);
BitmapFactory.Options onlyBoundsOptions = new BitmapFactory.Options();
onlyBoundsOptions.inJustDecodeBounds = true;
BitmapFactory.decodeStream(input, null, onlyBoundsOptions);
input.close();
int originalHeight = onlyBoundsOptions.outHeight; 
int originalWidth = onlyBoundsOptions.outWidth; 
```

然后在运行时选择 inSampleSize。

# javascript - 用于检查下拉菜单是否具有相同值的 Javascript 函数

> ID：14170570
> 
> 赞同：-2
> 
> 时间：2013-01-05T09:48:37.380
> 
> 标签：javascript

以一种简单的形式，我如何检查动态生成的“n”次特定下拉菜单在单击“提交”按钮时是否具有相同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:07:38.877

在一个通用的 jQuery 选择器上执行`.each()`并将每个值存储在一个数组中以进行比较。

现在将存储原始值的数组的长度与[underscore.js`_.unique`函数](http://underscorejs.org/#uniq)返回的数组的长度进行比较。

当您：（说明您尝试过的内容）和（（接受更多答案）或（给出一个很好的理由为什么您只有 17% 的接受率）时，我会给您更好的示例代码）

# c++ - C ++扫描硬盘驱动器以查找 MP3 文件并将其写入文本文件

> ID：14170571
> 
> 赞同：-3
> 
> 时间：2013-01-05T09:48:40.730
> 
> 标签：c++, search, mp3

你好，我在 C++ 编程方面很糟糕，我有这个项目要做。因此程序必须在整个硬盘驱动器中搜索 MP3 文件，并将它们的名称、路径和 ID 标签写入文本文件，并为 Windows 平台制作。整体不使用数组。谁能帮我一点忙？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T10:52:35.353

这很简单，首先您需要递归遍历所有文件/文件夹，过滤具有您感兴趣的扩展名的文件/文件夹（在本例中为 .mp3 文件），然后读取元数据以获取 ID 标签。

您可以这样做：

**遍历文件和文件夹：**

C++ 没有提供执行此操作的标准方法，因此您必须研究可供您使用的不同可能的解决方案。

如果您使用的是**Windows**，则可以使用 Win32 API：

*   查找第一个文件
*   查找下一个文件
*   查找关闭

如果您在**Unix/Linux**中工作：

*   打开目录
*   读目录
*   关闭

如果你想要一个跨平台的解决方案，你可以查看 boost 文件系统模块。

互联网上有几种使用前一种功能和方法的实现。

**过滤文件：**

一般的方法是使用“。”分割文件路径的字符串。（点）字符作为分隔符并获取最后一个元素（您必须考虑由于文件没有点而导致拆分不成功的情况）。

示例（未测试）：

```
bool fileHasExtension(const std::string& fileName, const std::string& extension)
{
    if(fileName.find_last_of(".") != std::string::npos)
        return extension.compare(fileName.substr(fileName.find_last_of(".") + 1)) == 0;

    return false;
} 
```

**获取元数据：**

你可以在这里阅读它[http://id3.org/](http://id3.org/)

> ID3 标签是以规定格式存储的 MP3 音频文件中的数据容器。该数据通常包含当前音频文件的艺术家姓名、歌曲名称、年份和流派。

**例子：**

这是上面解释的一些概念的工作实现，该程序递归遍历所有文件和文件夹，并在屏幕上打印扩展名为 .mp3 的文件和文件夹（它不会获取 ID3 标签上的元数据信息）。

```
#include <windows.h>
#include <string>
#include <iostream>

void GetFileListing(std::string directory, std::string fileFilter, bool recursively = true)
{
  if (recursively)
    GetFileListing(directory, fileFilter, false);

  directory += "\\";

  WIN32_FIND_DATA FindFileData;
  HANDLE hFind = INVALID_HANDLE_VALUE;

  std::string filter = directory + (recursively ? "*" : fileFilter);

  hFind = FindFirstFile(filter.c_str(), &FindFileData);

  if (hFind == INVALID_HANDLE_VALUE)
  {
    return;
  }
  else
  {
    if (!recursively)
    {
      std::cout << directory + std::string(FindFileData.cFileName) << std::endl;
    }

    while (FindNextFile(hFind, &FindFileData) != 0)
    {
      if (!recursively)
      {
        std::cout << directory + std::string(FindFileData.cFileName) << std::endl;
      }
      else
      {
        if ((FindFileData.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)>0 && FindFileData.cFileName[0]!='.')
        {
          GetFileListing(directory + std::string(FindFileData.cFileName), fileFilter);
        }
      }
    }

    DWORD dwError = GetLastError();
    FindClose(hFind);
    if (dwError != ERROR_NO_MORE_FILES)
    {
      std::cout << "FindNextFile error. Error is "<< dwError << std::endl;
    }
  }
}

int main(int argc, char* argv[])
{
  GetFileListing("C:\\", "*.mp3");
} 
```

它使用 Windows API，因此如果您使用 Linux 或只是想要一个跨平台解决方案，您将不得不更改代码。

# google-chrome-extension - 在当前 chrome 稳定版本中启用 chrome.commands

> ID：14170578
> 
> 赞同：0
> 
> 时间：2013-01-05T09:49:14.030
> 
> 标签：google-chrome-extension

我正在开发一个 chrome 扩展，计划使用 Chrome 即将推出的 API [chrome.commands](http://developer.chrome.com/stable/extensions/commands.html)来定义全局键盘快捷键。

此 API 可能会在 Chrome 25 中发布（[此处说](http://developer.chrome.com/trunk/apps/commands.html)），目前可在 Canary、Dev 和 Beta 中使用。（已在 Canary 上测试过，但尚未在 Dev 或 Beta 上尝试过）。

我的问题是：有没有办法在当前稳定版本的 Chrome 中启用这个 API？我尝试启用“实验扩展 API”，但这没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:51:04.530

如果您在[此处查看Say](http://src.chromium.org/viewvc/chrome/releases/) **23.0.1248.0** 的源代码，您找不到这些代码的引用！因此，它们在任何旧版本中都未定义。

# mysql - 如何避免对带有 order by 语句的前缀查询的 mysql 复合索引进行文件排序？

> ID：14170579
> 
> 赞同：1
> 
> 时间：2013-01-05T09:49:13.867
> 
> 标签：mysql, performance, sql-order-by, query-optimization, composite-index

我有一个 1 GB 的 mysql 表，其中包含三个列（德国二元组）：

```
create table sortedindex (source varchar(60),target varchar(60),score float)
engine=myisam character set utf8 collate utf8_bin; 
```

我还创建了一个复合索引：

```
create index sortedstd_ix on sortedindex (source(60), target(60), score); 
```

另外我压缩了表格并使其只读并使用以下方法对索引进行排序：

```
myisamchk --keys-used=0 -rq sortedindex
myisampack sortedindex
myisamchk -rq sortedindex --sort_buffer=3G --sort-index --sort-records=1 
```

现在我询问具有以下结构的查询：

*   修复源
*   为目标指定前缀
*   按分数检索前 k 行

如下所示：

```
select * from sortedindex where source like "ein" and target like "interess%" order by score desc limit 5; 
```

mysql explain 告诉我仍然使用文件排序！

```
mysql> explain select * from sortedindex where source like "ein" and target like "interess%" order by score desc limit 5;
+----+-------------+-------------+-------+---------------+--------------+---------+------+------+------------------------------------------+
| id | select_type | table       | type  | possible_keys | key          | key_len | ref  | rows | Extra                                    |
+----+-------------+-------------+-------+---------------+--------------+---------+------+------+------------------------------------------+
|  1 | SIMPLE      | sortedindex | range | sortedstd_ix  | sortedstd_ix | 366     | NULL |   17 | Using where; Using index; Using filesort |
+----+-------------+-------------+-------+---------------+--------------+---------+------+------+------------------------------------------+
1 row in set (0.00 sec)` 
```

我明白，如果我将查询更改为：

```
explain select * from sortedindex where source like "ein" and target like "interess%" order by source, target, score desc limit 5; 
```

将没有文件排序，但错误的是涉及文件排序。

```
mysql> explain select * from sortedindex where source like "ein" and target like "interess%" order by source, target, score desc limit 5;
+----+-------------+-------------+-------+---------------+--------------+---------+------+------+------------------------------------------+
| id | select_type | table       | type  | possible_keys | key          | key_len | ref  | rows | Extra                                    |
+----+-------------+-------------+-------+---------------+--------------+---------+------+------+------------------------------------------+
|  1 | SIMPLE      | sortedindex | range | sortedstd_ix  | sortedstd_ix | 366     | NULL |   17 | Using where; Using index; Using filesort |
+----+-------------+-------------+-------+---------------+--------------+---------+------+------+------------------------------------------+
1 row in set (0.00 sec) 
```

从[这个讨论](https://stackoverflow.com/questions/6602578/mysql-not-using-index-for-order-by)中我意识到 desc 关键字是问题所在。所以我们不检查：

```
mysql> explain select * from sortedindex where source like "ein" and target like "interess%" order by source, target, score limit 5;
+----+-------------+-------------+-------+---------------+--------------+---------+------+------+--------------------------+
| id | select_type | table       | type  | possible_keys | key          | key_len | ref  | rows | Extra                    |
+----+-------------+-------------+-------+---------------+--------------+---------+------+------+--------------------------+
|  1 | SIMPLE      | sortedindex | range | sortedstd_ix  | sortedstd_ix | 366     | NULL |   17 | Using where; Using index |
+----+-------------+-------------+-------+---------------+--------------+---------+------+------+--------------------------+
1 row in set (0.00 sec) 
```

完美的工作。

**但我想要对分数而不是目标进行降序排序。**以这种方式创建索引

```
create index sortedstd_ix on sortedindex (source(60), score desc, target(60)); 
```

不是一个选项，因为目标过滤器将为文件排序产生然后或者如果不是，则如果前缀很长并且源是一个常用词，则需要遍历的元素的结果列表可能非常长。

我不知何故感觉没有明显的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:52:12.803

试试这个 ：：

```
select * from sortedindex 
where source like "ein" and target like "interess%" 
order by score desc, source, target limit 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:19:56.520

你说的对。对此没有明显的解决方案。需要排序，因为您要求目标的多个值（例如“interess%”）。因此，索引不会为您提供按分数排序的行。

# machine-learning - Refactoring of decision trees using automatic learning

> ID：14170582
> 
> 赞同：1
> 
> 时间：2013-01-05T09:49:28.743
> 
> 标签：machine-learning, expression-trees, decision-tree

The problem is the following:

I developed an expression evaluation engine that provides a XPath-like language to the user so he can build the expressions. These expressions are then parsed and stored as an expression tree. There are many kinds of expressions, including logic (and/or/not), relational (=, !=, >, <, >=, <=), arithmetic (+, -, *, /) and if/then/else expressions.

Besides these operations, the expression can have constants (numbers, strings, dates, etc) and also access to external information by using a syntax similar to XPath to navigate in a tree of Java objects.

Given the above, we can build expressions like:

```
/some/value and /some/other/value

/some/value or /some/other/value

if (<evaluate some expression>) then 
    <evaluate some other expression> 
else 
    <do something else> 
```

Since the then-part and the else-part of the if-then-else expressions are expressions themselves, and everything is considered to be an expression, then anything can appear there, including other if-then-else's, allowing the user to build large decision trees by nesting if-then-else's.

As these expressions are built manually and prone to human error, I decided to build an automatic learning process capable of optimizing these expression trees based on the analysis of common external data. For example: in the first expression above (*/some/value and /some/other/value*), if the result of */some/other/value* is false most of the times, we can rearrange the tree so this branch will be the left branch to take advantage of short-circuit evaluation (the right side of the AND is not evaluated since the left side already determined the result).

Another possible optimization is to rearrange nested if-then-else expressions (decision trees) so the most frequent path taken, based on the most common external data used, will be executed sooner in the future, avoiding unnecessary evaluation of some branches most of the times.

Do you have any ideas on what would be the best or recommended approach/algorithm to use to perform this automatic refactoring of these expression trees?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:12:47.563

I think what you are describing is compiler optimizations which is a huge subject with everything from

*   inline expansion
*   deadcode elimination
*   constant propagation
*   loop transformation

Basically you have a lot of rewrite rules that are guaranteed to preserve the functionality of the code/xpath.

In the question on rearranging of the nested if-else I don't think you need to resort to machine-learning. One (I think optimal) approach would be to use Huffman coding of your links [huffman_coding](http://en.wikipedia.org/wiki/Huffman_coding) Take each path as a letter and we then encode them with Huffman coding and get a so called Huffman tree. This tree will have the least evaluations running on a (large enough) sample with the same distribution you made the Huffman tree from.

If you have restrictions on ``evaluate some expression''-expresssion or that they have different computational cost etc. You probably need another approach.

And remember, as always when it comes to optimization you should be careful and only do things that really matter.

# c++ - 到 ATL 的静态链接总是失败

> ID：14170585
> 
> 赞同：1
> 
> 时间：2013-01-05T09:50:12.557
> 
> 标签：c++, visual-studio-2010, com, mfc, atl

我使用一些 ATL 函数来创建媒体控件，但似乎我只能使用动态链接到 ATL 选项。当我切换到 ATL 的静态链接时，我无法成功创建控件。

我很混乱。任何人都可以帮助我吗？

这是我的代码：

```
//related headers
#include <wmp.h>
#include <atlbase.h>
#include <atlcom.h>
#include <atlhost.h>
#include <atlctl.h>

//related vars
CAxWindow  m_wndView;  // ActiveX host window class.    CComPtr<IWMPPlayer>  
m_spWMPPlayer;  // Smart pointer to IWMPPlayer interface.

//related function code:
CComPtr<IAxWinHostWindow>  spHost;
HRESULT  hr;
m_wndView.Create(m_hWnd, rect, NULL, WS_CHILD | WS_VISIBLE | WS_CLIPCHILDREN, WS_EX_CLIENTEDGE);
hr = m_wndView.QueryHost(&spHost);
/*
when I switch to "Static Link to ATL" option, I will fail here
E_FAIL == hr;//the failure flag
*/
if(!SUCCEEDED(hr)) return FALSE;

hr = spHost->CreateControl(CComBSTR(_T("{6BF52A52-394A-11d3-B153-00C04F79FAA6}")), m_wndView, 0);
if(!SUCCEEDED(hr)) return FALSE;

hr = m_wndView.QueryControl(&m_spWMPPlayer);
if(!SUCCEEDED(hr)) return FALSE; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:10:58.087

当静态链接到 ATL 时，你必须使用预处理器：_ATL_DLL，

您可以在此处进行设置：属性页 | C/C++ | 预处理器

# vb.net - VB .NET，检查dll是否存在

> ID：14170587
> 
> 赞同：0
> 
> 时间：2013-01-05T09:50:38.517
> 
> 标签：vb.net

在我的 VB .NET 项目中，我有几个函数使用 winusb.dll 中的非托管代码。我在一些根本没有安装驱动程序（winusb）的机器上测试了代码，当然会出现错误：“无法加载winusb.dll ....”

现在我不想尝试/捕获每个导入的函数，因为会降低性能（或不？）相反，我想在我的组件构造函数中使用一些检查 winusb.dll 的存在，引发错误事件并禁止所有功能直到下一个程序开始。没有那个 dll，所有功能都毫无意义。这是一个好方法吗？

现在如何检查所有平台（xp、wista、7、8）是否存在该dll？我需要专家意见来优化解决问题，并在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:17:30.983

```
 If System.IO.File.Exists("C:\Windows\System32\winusb.dll") Then
        ' go ahead
    Else
        ' abort
    End If 
```

然而，更好的方法是将 winusb 库与您的应用程序一起安装。不安装所有必需库的安装程序是毫无价值的。

# qt - 在 Linux 上为 Windows 构建 Qt 5

> ID：14170590
> 
> 赞同：63
> 
> 时间：2013-01-05T09:50:54.690
> 
> 标签：qt, qt5, mxe

我想迁移我的 Qt 4 应用程序以改用 Qt 5。[由于MXE](http://mxe.cc)构建 Qt 5 的方式存在一些差异，[这些指令](https://stackoverflow.com/a/13211922/)失败了，包括它使用模块化 Qt tarball，而不是一个大的 tarball。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-01-05T09:50:54.690

以下是完整说明：

*   得到它：

    ```
    git clone https://github.com/mxe/mxe.git 
    ```

*   安装[构建依赖项](http://mxe.cc/#requirements)

*   为 Windows 构建 Qt 5：

    ```
    cd mxe && make qtbase 
    ```

    这将首先构建其依赖项和交叉构建工具；在具有良好互联网访问权限的快速机器上应该花费不到一个小时。

    由于 Qt 5 新的模块化特性，各种主要的 Qt 组件现在位于不同的 tarball 中。上面选择的那个`qtbase`，应该为您提供足够的功能来运行普通的 GUI 应用程序，这是我自己的（小型）应用程序所需要的。

    如果您想构建所有 Qt 5，则需要运行`make qt5`（而不是`make qtbase`）。请注意，这将需要更长的时间才能完成，因此请确保您需要额外的功能。

*   进入您的应用程序目录，然后运行 ​​Qt Makefile 生成器工具：

    ```
    <mxe root>/usr/bin/i686-w64-mingw32.static-qmake-qt5 
    ```

*   构建您的项目：

    ```
    make 
    ```

*   您应该在 ./release 目录中找到二进制文件：

    ```
    wine release/foo.exe 
    ```

一些注意事项：

*   这是在我的 64 位 Debian 8 上测试过的，当然也在 Windows 上。

*   输出是一个 32 位静态可执行文件，在 64 位 Windows 上运行良好。

*   如果您想要 64 位可执行文件，请使用以下命令构建 Qt：

    ```
    make MXE_TARGETS=x86_64-w64-mingw32.static qtbase 
    ```

    默认`MXE_TARGETS`值为`i686-w64-mingw32.static`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-03T20:17:32.900

git checkout 命令不正确。您现在必须获得他们的稳定分支，否则它将无法构建。

```
git clone https://github.com/mxe/mxe.git 
```

应该...

```
git clone -b stable https://github.com/mxe/mxe.git 
```

仅此一项就解决了我构建 qtbase 的所有问题，但完成后没有留下 qt 文件夹。然后 qt5 目标将失败并出现晦涩的错误。删除文件夹，检查稳定，它工作完美。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-10T17:24:05.550

对于那些直接想要 GCC10 64 位编译的 Qt5（例如文件系统库）的人，以下是完整说明：

得到它：

```
git clone https://github.com/mxe/mxe.git 
```

安装[构建依赖项](http://mxe.cc/#requirements)

为 Windows 构建 Qt 5 并激活 gcc10 64bits 插件：

```
cd mxe && make MXE_TARGETS=x86_64-w64-mingw32.shared MXE_PLUGIN_DIRS=plugins/gcc10 qt5 
```

经过 2-3 小时的构建后，您可以构建您的应用程序（在您的 .pro 目录中）：

```
<mxe root>/usr/x86_64-w64-mingw32.shared/qt5/bin/qmake 
```

编译器的导出路径并构建您的项目：

```
export PATH=<mxe root>/usr/bin:$PATH
make 
```

您应该在 ./release 目录中找到二进制文件并使用 wine (或 wine64) 启动它：

```
wine foo.exe 
```

我真的不知道为什么，但我需要将 MXE 编译器目录添加到 wine 路径，因为它找不到 DLL：

```
WINEPATH="<mxe root>/usr/x86_64-w64-mingw32.shared/bin/" wine64 foo.exe 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-14T18:48:58.017

如果您尝试这样做，对我来说工作正常！

```
su
mv mxe /opt/mxe
cd /opt/mxe && make 
```

# android - 在 db 不是 null 时，在 db.query 上获取 null

> ID：14170592
> 
> 赞同：0
> 
> 时间：2013-01-05T09:51:10.633
> 
> 标签：android, database

我试图在我的数据库中获取所有项目，而第一步是我的数据库是空的，然后我从我的数据库中插入一些项目。我插入正确（没有任何错误并且插入的 num 大于 0）。但是在尝试从数据库中取回所有项目时插入后，dbAdper.getAllTitles();

这是我的代码

```
public ArrayList<Object> getWantedItemsList(Context context,String item,String item2,String item3,String item4){
        ArrayList<Object> ListRssLinkAndTitle=new ArrayList<Object>();
        DBAdapter dbAdper=new DBAdapter(context);
        Cursor CursorDb =null;
        try
        {
            dbAdper.open();
            dbAdper.drop();
            dbAdper.createTable();
            dbAdper.insertTitle(context,"Ynet", "http://www.ynet.co.il/Integration/StoryRss2.xml", "rtl",null);
            dbAdper.insertTitle(context,"BBC", "http://feeds.bbci.co.uk/news/world/us_and_canada/rss.xml", "rtl",null);
            CursorDb =dbAdper.getAllTitles();
            CursorDb.moveToFirst();
            if (CursorDb.getCount()>0)
                do
                { 
                    ListRssLinkAndTitle.add(new rssLinkAndTitle(CursorDb.getString(CursorDb.getColumnIndex(item)),CursorDb.getString(CursorDb.getColumnIndex(item2)),CursorDb.getString(CursorDb.getColumnIndex(item3)),CursorDb.getBlob(CursorDb.getColumnIndex(item4))));
                }
                while(CursorDb.moveToNext());
        }
        finally{
            if (CursorDb.equals("null"))
            CursorDb.close();
            dbAdper.close();
            return ListRssLinkAndTitle;
        }

    } 
```

得到 null 的方法是

```
public Cursor getAllTitles()  throws SQLException
    {
        return db.query(DATABASE_TABLE, new String[] {
                KEY_ROWID, 
                link,
                RssTitle,
                Rtl,
                image
        }, 
        null, 
        null, 
        null, 
        null,
        null
                );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:52:58.573

您尚未在数据库帮助程序类中创建数据库对象 db。请确保在将值插入表后没有关闭数据库。

# java - Canvas j2me 上的项目（对象、图像、绘制对象）在绘制、绘制后如何删除？

> ID：14170594
> 
> 赞同：-1
> 
> 时间：2013-01-05T09:51:16.537
> 
> 标签：java, java-me, j2mepolish, java-micro-editon-sdk3.0

Canvas 上的项目（对象、图像、绘制对象）如何在绘制、绘制后被删除（移除、取消放置，其位置删除（移除））？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:23:37.107

如果您想在绘画后设置颜色，请在您的程序中尝试此方法：

```
paint(Graphics g){
g.setColor(Color.WHITE);  getBackground();} 
```

# iphone - XCode v4.2 和 Default-568h@2x.png --> 提交 iOS 应用程序时出现“Invalid Binary”消息

> ID：14170600
> 
> 赞同：0
> 
> 时间：2013-01-05T09:52:12.843
> 
> 标签：iphone, ios, xcode, ios6, xcode4.2

我花了很多时间试图解决这个问题。当我通过 XCode4.2 提交我的应用程序时，Apple 不断接受我上传的二进制文件，但几分钟后才宣布二进制文件无效。原来是因为我在资源文件夹里放了“Default-568h@2x.png”，试图支持iPhone 5的闪屏，去掉“信箱模式”（上下黑条）……我我使用的是 2006 MacBook Pro，因此无法升级到 Lion OS 或 Xcode4.5。此外，我能够为我的客户构建在 iPhone 5 上运行良好的 AdHoc 版本（填满整个屏幕）。

有谁知道我可以实施一种解决方法来让 Apple 接受我的二进制文件，同时仍然能够支持 iPhone 5 的大屏幕（没有黑色的顶部或底部条）？如果我重命名“Default-568h@2x.png”，我可以让 Apple 接受我的二进制文件，但我会失去与 iPhone5 的兼容性吗？

我在搜索中找到了以下链接，这似乎表明启动图像与 iPhone 5 的信箱模式无关，可以标记任何名称。但是，我必须承认，当作者开始讨论“视口”和“媒体查询”时，我相当迷茫……

[http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers](http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers)

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T10:45:22.983

Apple 已深思熟虑地决定只允许两种类型的应用程序：

1.  使用 XCode 4.4 及更早版本构建的应用程序，适用于最高版本 5 的 iOS，包括支持*armv6*（iPhone 3G 需要），但不支持 iOS 6，也不支持 iPhone 5 的大屏幕。

2.  使用 XCode 4.5 构建的应用程序，至少为 iOS 4.3 构建，可能支持更大的屏幕 ( `Default-568h@2x.png`)，但不支持 4.3 之前的 iOS 并且不支持*armv6*架构（iPhone 3G 需要）。

现在，如果您将所有其他应用上传到 App Store，它们将被拒绝。您的应用程序被拒绝，因为它包含`Default-568h@2x.png`以下内容之一：*armv6*支持或对 4.3 之前的 iOS 的支持。

如果没有 XCode 4.5，就不可能创建支持更大的 iPhone 5 屏幕并被 Apple 接受的应用程序。

有些人设法构建和上传了同时支持 iPhone 3G 和 iPhone 5 的应用程序。但这非常棘手，需要并行安装至少 XCode 4.5 和一个更早版本。

**更新：**

如果我没记错的话，支持大屏的关键点是：

*   发射图像`Default-568h@2x.png`
*   *Base SDK*的设置为iOS *6*（或更高版本）

如果您在未将*Base SDK*设置为*iOS 6*的情况下添加启动图像，iTunes Connect 将拒绝您的应用：

> “无效的启动图像 - 您的应用包含带有大小修饰符的启动图像，仅支持使用 iOS 6.0 SDK 或更高版本构建的应用。”

如果没有 XCode 4.5，您将无法选择*iOS 6*作为*Base SDK*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T06:59:55.943

我能够按照以下说明在我的 XCode v4.2 上安装 iOS 6.0 SDK： [Is it possible to get the iOS 5.1 SDK for Xcode 4.2 on Snow Leopard?](https://stackoverflow.com/questions/9613565/is-it-possible-to-get-the-ios-5-1-sdk-for-xcode-4-2-on-snow-leopard) 之后，我可以创建一个具有 Apple 接受的以下属性的二进制文件。

*   启动图像 Def​​ault-568h@2x.png
*   Base SDK 的设置为 iOS 6（或更高版本）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T23:02:47.310

我有一台 2006 年的 Mac mini，运行 Snow Leopard，Xcode 4.2。昨晚（2013 年 5 月 2 日）我的提交也遇到了完全相同的问题。组织者上传了应用程序，并说一切都很好。几分钟之内，下面的电子邮件就通过了。我按照电子邮件的建议做了。然后我仔细检查，三次检查所有设置，重新创建证书/配置文件....仍然无效的二进制文件。

在开发早期，我能够破解 dmg 以在我的机器上安装 iOS6。我把`Default-568h@2x.png`我的应用程序。我在第 5 代 iPod Touch 上测试了临时安装 - 一切正常，但 Apple 不会接受我的应用程序。

反正我今年打算买一台新的mac。我今晚要去苹果商店买一个。这是来自 Apple 的电子邮件：

> 亲爱的开发者，
> 
> 我们发现您最近交付的“Gazoodle Colours”存在一个或多个问题。要处理您的交付，必须更正以下问题：
> 
> 无效签名 - 确保您已使用分发证书而不是临时证书或开发证书对应用程序进行签名。验证 Xcode 中的代码签名设置在目标级别是否正确（覆盖项目级别的任何值）。此外，确保您上传的包是使用 Xcode 中的 Release 目标构建的，而不是 Simulator 目标。如果您确定您的代码签名设置正确，请在 Xcode 中选择“Clean All”，删除 Finder 中的“build”目录，然后重新构建您的发布目标。
> 
> 更正这些问题后，请转到“版本详细信息”页面并单击“准备上传二进制文件”。继续完成提交过程，直到应用状态为“等待上传”。然后，您可以提供更正后的二进制文件。
> 
> 问候，
> 
> 应用商店团队

更新：得到了一个新的 macbook pro，用最新的 Xcode (4.6.2) 构建了我的应用程序并重新提交了应用程序。我的应用程序终于处于 Waiting for Review 状态。不确定购买新计算机是否能解决问题，但这是升级硬件的好借口，它实际上解决了无效二进制问题！

# delphi - ffmpeg 和 windows 命令行

> ID：14170610
> 
> 赞同：1
> 
> 时间：2013-01-05T09:53:17.230
> 
> 标签：delphi, ffmpeg, pascal, lazarus

我正在尝试使用 ffmpeg for windows 将数千个图像和声音转换为单个视频文件。

```
ffmpeg -i apples.jpg -i oranges.jpg -i orangessound.wav -i bananas.jpg -vcodec mpeg4 test.avi 
```

我的 delphi 程序将命令行生成为字符串，我使用 shellexecute 来调用它。

但是命令行不能超过 8191 个字符是真的吗？如果是这样，ffmpeg 可以改为从文件中读取参数吗？

在这种情况下不能用连续的数字重命名图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:15:16.517

您可能需要考虑在自己的代码中使用开源[libavcodec 库。](http://ffmpeg.org/libavcodec.html)它与 ffmpeg 内部使用的库相同（有一个名为[libav](http://www.libav.org)的单独库，它是原始 ffmpeg libavcodec 库的分支）。然后你可以对文件做任何你想做的事情。您可以查看 ffmpeg 源代码以了解它如何解释您要使用的参数，然后将该逻辑调整为您自己的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:52:34.347

ffmpeg 不支持从文件中获取整个命令。您需要修改代码以供您自定义使用。

它可以使用“-fpre”选项获取编码参数。

# android - 如何解决位图大小超出 VM 预算

> ID：14170611
> 
> 赞同：1
> 
> 时间：2013-01-05T09:53:20.800
> 
> 标签：android, android-memory

我设计了一个自定义图像视图库，它在我的三星 Galaxy S3 上就像一个魅力，但是当我尝试让它在我的 HTC Wildfire S 上工作时，它会抛出一个 java.lang.OutOfMemoryError：位图大小超出 VM 预算。代码如下，有什么线索吗？

```
public class ImageViewFlipper extends Activity {

private static final int EXIT = 0;
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
private static final String DIRECTORY = "/sdcard/edu";
private static final String DATA_DIRECTORY = "/sdcard/edu";
private static final String DATA_FILE = "/sdcard/imagelist.dat";
private GestureDetector gestureDetector;
View.OnTouchListener gestureListener;
private Animation slideLeftIn;
private Animation slideLeftOut;
private Animation slideRightIn;
private Animation slideRightOut;
private ViewFlipper viewFlipper;
private int currentView = 0;
List<String> ImageList;
private int currentIndex = 0;
private int maxIndex = 0;

FileOutputStream output = null;
OutputStreamWriter writer = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.main);
    ImageView iv = (ImageView) findViewById(R.id.zero);

    File data_directory = new File(DATA_DIRECTORY);
    if (!data_directory.exists()) {
        if (data_directory.mkdir()) {
            FileUtils savedata = new FileUtils();
            Toast toast = Toast.makeText(ImageViewFlipper.this,
                    "Please wait while we search your SD Card for images...", Toast.LENGTH_SHORT);
            toast.show();
            SystemClock.sleep(100);
            ImageList = FindFiles();
            savedata.saveArray(DATA_FILE, ImageList);

        } else {
            ImageList = FindFiles();
        }

    }
    else {
        File data_file= new File(DATA_FILE);
        if (!data_file.exists()) {
            FileUtils savedata = new FileUtils();

            SystemClock.sleep(100);
            ImageList = FindFiles();
            savedata.saveArray(DATA_FILE, ImageList);
        } else {
            FileUtils readdata = new FileUtils();
            ImageList = readdata.loadArray(DATA_FILE);
        }
    }

    if (ImageList == null) {
        quit();
    }

    SharedPreferences indexPrefs = getSharedPreferences("currentIndex",
            MODE_PRIVATE);
    if (indexPrefs.contains("currentIndex")) {
        currentIndex = indexPrefs.getInt("currentIndex", 0);
    }

    maxIndex = ImageList.size() - 1;

    Log.v("currentIndex", "Index: "+currentIndex);

    viewFlipper = (ViewFlipper) findViewById(R.id.flipper);

    slideLeftIn = AnimationUtils.loadAnimation(this, R.anim.slide_left_in);
    slideLeftOut = AnimationUtils
            .loadAnimation(this, R.anim.slide_left_out);
    slideRightIn = AnimationUtils
            .loadAnimation(this, R.anim.slide_right_in);
    slideRightOut = AnimationUtils.loadAnimation(this,
            R.anim.slide_right_out);

    viewFlipper.setInAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_in));
    viewFlipper.setOutAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_out));

    iv.setImageDrawable(Drawable.createFromPath(ImageList
            .get(currentIndex)));
    System.gc();

    gestureDetector = new GestureDetector(new MyGestureDetector());
    gestureListener = new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (gestureDetector.onTouchEvent(event)) {
                return true;
            }
            return false;
        }
    };

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    int NONE = Menu.NONE;
    menu.add(NONE, EXIT, NONE, "Exit");
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case EXIT:
        quit();
        break;
    }

    return super.onOptionsItemSelected(item);
}

protected void onPause() {
    super.onPause();

    SharedPreferences indexPrefs = getSharedPreferences("currentIndex",
            MODE_PRIVATE);

    SharedPreferences.Editor indexEditor = indexPrefs.edit();
    indexEditor.putInt("currentIndex", currentIndex);
    indexEditor.commit();
}

protected void onResume() {
    super.onResume();
    SharedPreferences indexPrefs = getSharedPreferences("currentIndex", MODE_PRIVATE);
    if (indexPrefs.contains("currentIndex")) {
        currentIndex = indexPrefs.getInt("currentIndex", 0);
    }   
}

private List<String> FindFiles() {
    final List<String> tFileList = new ArrayList<String>();
    Resources resources = getResources();
    // array of valid image file extensions
    String[] imageTypes = resources.getStringArray(R.array.image);
    FilenameFilter[] filter = new FilenameFilter[imageTypes.length];

    int i = 0;
    for (final String type : imageTypes) {
        filter[i] = new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return name.endsWith("." + type);
            }
        };
        i++;
    }

    FileUtils fileUtils = new FileUtils();
    File[] allMatchingFiles = fileUtils.listFilesAsArray(
            new File(DIRECTORY), filter, -1);
    for (File f : allMatchingFiles) {
        tFileList.add(f.getAbsolutePath());
    }
    return tFileList;
}

public class FileUtils {

    public void saveArray(String filename, List<String> output_field) {
         try {
            FileOutputStream fos = new FileOutputStream(filename);
            GZIPOutputStream gzos = new GZIPOutputStream(fos);
            ObjectOutputStream out = new ObjectOutputStream(gzos);
            out.writeObject(output_field);
            out.flush();
            out.close();
         }
         catch (IOException e) {
             e.getStackTrace(); 
         }
      }

      @SuppressWarnings("unchecked")
    public List<String> loadArray(String filename) {
          try {
            FileInputStream fis = new FileInputStream(filename);
            GZIPInputStream gzis = new GZIPInputStream(fis);
            ObjectInputStream in = new ObjectInputStream(gzis);
            List<String> read_field = (List<String>)in.readObject();
            in.close();
            return read_field;
          }
          catch (Exception e) {
              e.getStackTrace();
          }
          return null;
      }

    public File[] listFilesAsArray(File directory, FilenameFilter[] filter,
            int recurse) {
        Collection<File> files = listFiles(directory, filter, recurse);

        File[] arr = new File[files.size()];
        return files.toArray(arr);
    }

    public Collection<File> listFiles(File directory,
            FilenameFilter[] filter, int recurse) {

        Vector<File> files = new Vector<File>();

        File[] entries = directory.listFiles();

        if (entries != null) {
            for (File entry : entries) {
                for (FilenameFilter filefilter : filter) {
                    if (filter == null
                            || filefilter
                                    .accept(directory, entry.getName())) {
                        files.add(entry);
                        Log.v("ImageViewFlipper", "Added: "
                                + entry.getName());
                    }
                }
                if ((recurse <= -1) || (recurse > 0 && entry.isDirectory())) {
                    recurse--;
                    files.addAll(listFiles(entry, filter, recurse));
                    recurse++;
                }
            }
        }
        return files;
    }
}

class MyGestureDetector extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        try {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                return false;
            // right to left swipe
            if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                viewFlipper.setInAnimation(slideLeftIn);
                viewFlipper.setOutAnimation(slideLeftOut);

                if (currentIndex == maxIndex) {
                    currentIndex = 0;
                } else {
                    currentIndex = currentIndex + 1;
                }
                if (currentView == 0) {
                    currentView = 1;
                    ImageView iv = (ImageView) findViewById(R.id.one);
                    iv.setImageDrawable(Drawable.createFromPath(ImageList
                            .get(currentIndex)));
                    System.gc();
                } else if (currentView == 1) {
                    currentView = 2;
                    ImageView iv = (ImageView) findViewById(R.id.two);
                    iv.setImageDrawable(Drawable.createFromPath(ImageList
                            .get(currentIndex)));
                    System.gc();
                } else {
                    currentView = 0;
                    ImageView iv = (ImageView) findViewById(R.id.zero);
                    iv.setImageDrawable(Drawable.createFromPath(ImageList
                            .get(currentIndex)));
                    System.gc();
                }
                Log.v("ImageViewFlipper", "Current View: " + currentView);
                viewFlipper.showNext();
            } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                viewFlipper.setInAnimation(slideRightIn);
                viewFlipper.setOutAnimation(slideRightOut);
                if (currentIndex == 0) {
                    currentIndex = maxIndex;
                } else {
                    currentIndex = currentIndex - 1;
                }
                if (currentView == 0) {
                    currentView = 2;
                    ImageView iv = (ImageView) findViewById(R.id.two);
                    iv.setImageDrawable(Drawable.createFromPath(ImageList.get(currentIndex)));
                } else if (currentView == 2) {
                    currentView = 1;
                    ImageView iv = (ImageView) findViewById(R.id.one);
                    iv.setImageDrawable(Drawable.createFromPath(ImageList.get(currentIndex)));
                } else {
                    currentView = 0;
                    ImageView iv = (ImageView) findViewById(R.id.zero);
                    iv.setImageDrawable(Drawable.createFromPath(ImageList
                            .get(currentIndex)));
                }
                Log.v("ImageViewFlipper", "Current View: " + currentView);
                viewFlipper.showPrevious();
            }
        } catch (Exception e) {
            // nothing
        }
        return false;
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (gestureDetector.onTouchEvent(event))
        return true;
    else
        return false;
}

public void quit() {
    SharedPreferences indexPrefs = getSharedPreferences("currentIndex",MODE_PRIVATE);

    SharedPreferences.Editor indexEditor = indexPrefs.edit();
    indexEditor.putInt("currentIndex", 0);
    indexEditor.commit(); 
    File settings = new File(DATA_FILE);
    settings.delete();
    finish();
    int pid = android.os.Process.myPid();
    android.os.Process.killProcess(pid);
    System.exit(0);
}

@Override 
public void onDetachedFromWindow() {
    try {
      super.onDetachedFromWindow();
    } catch (IllegalArgumentException e) {

    }
  } 
@Override
public void onConfigurationChanged(Configuration newConfig) {
  super.onConfigurationChanged(newConfig);

}

 @Override
    protected void onDestroy() {
    super.onDestroy();
    System.gc();
    } 
```

}

编辑（原木猫）：

```
 01-05 15:56:38.049: I/Process(573): Sending signal. PID: 573 SIG: 9
     01-05 15:59:38.389: D/dalvikvm(637): GC_EXTERNAL_ALLOC freed 64K, 52% free    2613K/5379K, external 1625K/2137K, paused 49ms
      01-05 15:59:48.739: D/dalvikvm(637): GC_EXTERNAL_ALLOC freed 9K, 52% free 2634K/5379K, external 3139K/3903K, paused 53ms
      01-05 15:59:49.070: D/szipinf(637): Initializing inflate state
      01-05 16:00:02.489: V/currentIndex(637): Index: 1
      01-05 16:00:02.791: D/dalvikvm(637): GC_EXTERNAL_ALLOC freed 57K, 50% free 2748K/5447K, external 5580K/5793K, paused 36ms
      01-05 16:00:03.180: D/dalvikvm(637): GC_EXPLICIT freed 48K, 51% free 2700K/5447K, external 8692K/10740K, paused 38ms
      01-05 16:00:04.670: D/dalvikvm(637): GC_EXTERNAL_ALLOC freed 8K, 50% free 2737K/5447K, external 8692K/10740K, paused 34ms
      01-05 16:00:05.069: D/dalvikvm(637): GC_EXPLICIT freed 32K, 51% free 2705K/5447K, external 13317K/15365K, paused 54ms
      01-05 16:00:05.069: V/ImageViewFlipper(637): Current View: 1
      01-05 16:00:05.170: D/dalvikvm(637): GC_EXTERNAL_ALLOC freed <1K, 51% free 2705K/5447K, external 14817K/15365K, paused 33ms
       01-05 16:00:19.109: D/dalvikvm(637): GC_EXTERNAL_ALLOC freed 5K, 50% free 2734K/5447K, external 14817K/16865K, paused 41ms
      01-05 16:00:19.139: E/dalvikvm-heap(637): 4736340-byte external allocation too large for this process.
       01-05 16:00:19.249: E/GraphicsJNI(637): VM won't let us allocate 4736340 bytes
     01-05 16:00:19.249: D/dalvikvm(637): GC_FOR_MALLOC freed 0K, 50% free 2734K/5447K, external 14817K/16865K, paused 36ms
     01-05 16:00:19.259: D/skia(637): --- decoder->decode returned false
       01-05 16:00:19.259: D/AndroidRuntime(637): Shutting down VM
      01-05 16:00:19.259: W/dalvikvm(637): threadid=1: thread exiting with uncaught exception (group=0x40015560)
     01-05 16:00:19.270: E/AndroidRuntime(637): FATAL EXCEPTION: main
      01-05 16:00:19.270: E/AndroidRuntime(637): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
      01-05 16:00:19.270: E/AndroidRuntime(637):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
     01-05 16:00:19.270: E/AndroidRuntime(637):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:470)
     01-05 16:00:19.270: E/AndroidRuntime(637):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:284)
     01-05 16:00:19.270: E/AndroidRuntime(637):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:309)
     01-05 16:00:19.270: E/AndroidRuntime(637):     at android.graphics.drawable.Drawable.createFromPath(Drawable.java:800)
     01-05 16:00:19.270: E/AndroidRuntime(637):     at com.edubridge.ImageViewFlipper$MyGestureDetector.onFling(ImageViewFlipper.java:307)
     01-05 16:00:19.270: E/AndroidRuntime(637):     at android.view.GestureDetector.onTouchEvent(GestureDetector.java:568)
     01-05 16:00:19.270: E/AndroidRuntime(637):     at com.edubridge.ImageViewFlipper.onTouchEvent(ImageViewFlipper.java:354)
     01-05 16:00:19.270: E/AndroidRuntime(637):     at android.app.Activity.dispatchTouchEvent(Activity.java:2099)
     01-05 16:00:19.270: E/AndroidRuntime(637):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
     01-05 16:00:19.270: E/AndroidRuntime(637):     at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2194)
     01-05 16:00:19.270: E/AndroidRuntime(637):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1878)
     01-05 16:00:19.270: E/AndroidRuntime(637):     at android.os.Handler.dispatchMessage(Handler.java:99)
      01-05 16:00:19.270: E/AndroidRuntime(637):    at android.os.Looper.loop(Looper.java:123)
      01-05 16:00:19.270: E/AndroidRuntime(637):    at android.app.ActivityThread.main(ActivityThread.java:3683)
      01-05 16:00:19.270: E/AndroidRuntime(637):    at java.lang.reflect.Method.invokeNative(Native Method)
      01-05 16:00:19.270: E/AndroidRuntime(637):    at java.lang.reflect.Method.invoke(Method.java:507)
      01-05 16:00:19.270: E/AndroidRuntime(637):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
      01-05 16:00:19.270: E/AndroidRuntime(637):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
      01-05 16:00:19.270: E/AndroidRuntime(637):    at dalvik.system.NativeStart.main(Native Method)
      01-05 16:01:27.619: I/Process(637): Sending signal. PID: 637 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:03:15.337

你需要缩小图像以消耗更少的内存，看看[这个](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)答案，看看如何以正确的方式缩小它，当你需要知道图像的宽度和高度而不将其加载到内存时，请使用此代码，

```
BitmapFactory.Options bitmapOptions = new BitmapFactory.Options();
bitmapOptions.inJustDecodeBounds = true;
BitmapFactory.decodeStream(inputStream, null, bitmapOptions);
int imageWidth = bitmapOptions.outWidth;
int imageHeight = bitmapOptions.outHeight;
inputStream.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:12:41.103

```
 if (currentView == 0) {
                    currentView = 1;
                    BitmapFactory.Options opts = new BitmapFactory.Options();
                    //The max size of any dimension (height or width) is 400 px
                    opts.inSampleSize = OG;
                    //Drawable X = Drawable.createFromPath(ImageList.get(currentIndex));
                    Bitmap bmp = BitmapFactory.decodeFile(ImageList.get(currentIndex), opts);

                    ImageView iv = (ImageView) findViewById(R.id.one);
                    iv.setImageBitmap(bmp);
                    System.gc();
                    //ImageView iv = (ImageView) findViewById(R.id.one);
                    //iv.setImageDrawable(Drawable.createFromPath(ImageList.get(currentIndex)));
                    //System.gc(); 
```

# jquery - Jquery DatePicker：如何根据系统日期格式设置日期格式

> ID：14170612
> 
> 赞同：0
> 
> 时间：2013-01-05T09:53:20.897
> 
> 标签：jquery, date

jquery datepicker 的默认格式是 [MM/dd/yy]。即使我像 [dd/MM/yyy] 这样更改系统日期格式，datepicker 也会采用默认格式，即 [MM-dd-yy]。如何根据系统日期时间格式设置日期选择器格式。

请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:18:27.313

`navigator.language`根据[Best way to determine user's locale inside browser](https://stackoverflow.com/q/673905/1741542)，使用 javascript 时，使用的语言环境的唯一提示似乎是。从[Datepicker 小部件](http://api.jqueryui.com/datepicker/)（搜索本地化）中，您可以使用类似

```
$(selector).datepicker($.datepicker.regional['fr']); 
```

从服务器端确定首选语言环境、评估[`Accept-Language`](http://de.wikipedia.org/wiki/Content_Negotiation)和发送自定义 JS 文件会更容易。

在[Format date](http://jqueryui.com/datepicker/#date-formats)和[Localize calendar](http://jqueryui.com/datepicker/#localization)中也有示例，可让用户选择他们喜欢的格式。

# search - 将多个搜索和替换表达式合并为一个，供 Notepad++ 等编辑器使用

> ID：14170615
> 
> 赞同：2
> 
> 时间：2013-01-05T09:53:33.953
> 
> 标签：search, notepad++, replace

有没有办法将多个搜索和替换语句组合成一个用于 Notepad++ 的语句。

我要求 Notepad++ 支持正则表达式。

例如：假设我必须在一个需要 20 多个查找和替换操作的大型代码文件中更改很多值。这20个动作能合二为一吗？

我也愿意接受使用其他编辑器或实现的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:22:22.243

使用 Notepad++，最直接的方法是记录一个宏或一系列宏，这取决于您将重用搜索替换集的程度。对于一次性任务，手动完成可能比将整个事情记录为宏更有意义。

还可以选择只记录一个搜索替换操作，然后在shortcuts.xml 中编辑宏（[更多内容在这个](https://stackoverflow.com/questions/362444/how-to-write-macro-for-notepad "在这一步")步骤中），复制搜索替换“算法”并编辑每个步骤。我用它来用四个动作进行简单的字符串替换，我想正则表达式应该也能正常工作。

这是我的shortcuts.xml 中一个简单的一步正则表达式搜索替换（用空白“”替换引号中的所有内容）操作：

```
<Action type="3" message="1700" wParam="0" lParam="0" sParam="" />
<Action type="3" message="1601" wParam="0" lParam="0" sParam='[&quot;].*[&quot;]' />
<Action type="3" message="1625" wParam="0" lParam="2" sParam="" />
<Action type="3" message="1602" wParam="0" lParam="0" sParam='&quot;&quot;' />
<Action type="3" message="1702" wParam="0" lParam="768" sParam="" />
<Action type="3" message="1701" wParam="0" lParam="1609" sParam="" /> 
```

编辑第 2 行和第 4 行中的 sParam。根据需要重复。我仍然建议您录制自己的示例宏，以防它产生不同的东西，这样您就可以确信它可以与您一起使用。

# asp.net-mvc - 防止 URL 篡改访问其他用户数据

> ID：14170621
> 
> 赞同：0
> 
> 时间：2013-01-05T09:54:23.530
> 
> 标签：asp.net-mvc, asp.net-mvc-3, forms-authentication, url-routing

我只是想就我应该如何解决这个问题并最终寻求快速取胜来评估意见（思考事情的错误方式坚果时间压力意味着我必须快速思考和行动！

我得到了一个有一点问题的网站。

我使用标准表单身份验证作为 User1234 登录，我的网址如下：

www.mywebsite.co.uk/1234/Contact。

这将带我到 User1234 的详细信息。

您可以将两个和两个放在一起，并正确假设 1234 是某种用户 ID。

一旦通过身份验证，我可以访问存在 [Authorize] 属性的视图，任何匿名/未经身份验证的用户都会被重定向。

但是，一旦以 User1234 身份登录，我就可以像这样修改 url：

www.mywebsite.co.uk/1235/Contact。

所以我被认证为 User1234 但可以看到 User1235 的数据。这很糟糕，原因很明显。

当我登录时，我主动在会话中设置登录 ID，所以理论上，我可以在用户点击 ActionResult 时进行检查，我可以交叉检查 URL 中存在的 ID 与会话登录 ID。然而，这是一个包含大量操作结果的相当项目，因此，我不愿意在周六下午为每个操作结果添加一些内容。

global.asax 中是否有我可以使用的事件在每个 ActionResult 请求中被命中，我可以在其中将会话登录 ID 与 url ID 进行比较？

或者，任何人都可以就我如何实现这一点或限制 URL 篡改提供一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T21:53:29.330

您可以尝试做一个基本控制器

```
public class BaseController : Controller 
{
     protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        //Do your stuff here
        base.OnActionExecuted(filterContext);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:51:03.493

我假设您不想更改 URL 路由，因为您也可以从会话中检索用户 ID。一个快速的解决方案是使用可以放置在受影响的控制器或操作方法上的 ActionFilter：

```
public class VerifyUserIdAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var sessionUserId = filterContext.HttpContext.Session["UserId"];

        var routeUserId = filterContext.RouteData.Values["UserId"];
        if (routeUserId != null && sessionUserId == routeUserId)
            filterContext.Result = new RedirectResult("<<url to redirect to>>");
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-05T23:03:13.160

我不明白为什么 URL 包含数据入口点。这似乎是一个设计缺陷。我将删除所有使用 URL 参数的代码，并确保控制器根据登录用户查找 ID。

# c - ac函数结束后数组被释放？

> ID：14170625
> 
> 赞同：0
> 
> 时间：2013-01-05T09:54:44.217
> 
> 标签：c, scope, postgis

我有一个函数，我传递一个指针，然后在函数内部分配内存。

```
count = rt_band_get_ray(band,x1,y1,x2,y2,&npixels); 
```

这是函数体：

```
/**
* Processes an array of pixels that fall on the ray from x1,y1 to x2,y2.
 * @param band : band to be processed
 * @param x1 : starting x-cordinate ( 0 based )
 * @param y1 : starting y-cordinate ( 0 based )
 * @param x2 : ending x-crodinate ( 0 based ) 
 * @param y2 : ending y-cordinate ( 0 based )
 * @param npixels : pointer to array of pixels
 * 
 * @return -1 on error 0 for sucess.
 * http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm
 */
int 
rt_band_get_ray(rt_band band, int x1, int y1, int x2, int y2, rt_pixel *npixels )
{
  int x;
  int y;
  int xinc1;
  int yinc1;
  int xinc2;
  int yinc2;
  int dx;
  int dy;
  int den;
  int num;
  int numadd;
  int curpixel;
  double pixval;
  int isnodata = 0;
  rt_pixel pixel = NULL;
  int count;

  dx = abs( x2 - x1 );
  dy = abs( y2 - y1 );

  x = x1;
  y = y1;

  // considerations for all eight quads

  if ( x2 >= x1 )  // the x-values are increasing 
    {
      xinc1 = 1;
      xinc2 = 1;
    }
  else   // the x-values are decreasing
    {
    xinc1 = -1;
    xinc2 = -1;
    }

  if( y2 >= y1 ) // the y-values are increasing
    {
      yinc1 = 1;
      yinc2 = 1;
    }
  else  // the y-values are decreasing
    {
      yinc1 = -1;
      yinc2 = -1;
    }

  if ( dx >= dy )  // there is at least one x-value for every y-value
    {
      xinc1 = 0;   //don't change x when numerator >= denominator
      yinc2 = 0;   // don't change y for every iteration
      den = dx;
      num = dx / 2;
      numadd = dy;
      count = dx;  // there are more x-values than y-values
    }
  else
    {
      xinc2 = 0;
      yinc1 = 0;
      den = dy;
      num = dy / 2;
      numadd = dx;
      count = dy;
    }

  // allocate array
    if (npixels == NULL)
     *npixels = (rt_pixel) rtalloc(sizeof(struct rt_pixel_t) * count);
    else
     *npixels = (rt_pixel) rtrealloc(*npixels, sizeof(struct rt_pixel_t) * count);
    if (npixels == NULL) {
      rterror("rt_band_get_ray: Unable to allocate memory for ray pixel(s)");
      return -1;
    } 

  for ( curpixel = 0; curpixel < count; curpixel++)  //itterate through all pixels on the line
    {
      // set current pixel to array
      rt_band_get_pixel(band,x,y,&pixval,&isnodata);
      pixel = &((*npixels)[curpixel]);
      pixel->x = x;
      pixel->y = y;
      pixel->nodata = isnodata;
      pixel->value = pixval;

      num += numadd;  // increase the numerator by the top of the fraction
      if ( num >= den )  // check if numerator >= denominator
    {
      num -= den;  // calculate the new numerator value
      x += xinc1;  // change x as appropriate
      y += yinc1;  // change y as appropriate
    }
      x += xinc2;   // change x as appropriate
      y += yinc2;   // change y as appropriate
    }
  return count; // return number of npixel elements.

} 
```

我想我正在失去函数内部分配的内存的范围。并遇到分段错误。在这些线上：

```
for ( i = 0; i < count; i++ ){
      pixel = &((*npixels)[i]);
      results[i] =  pixel->value;
    } 
```

我是否失去了函数内部分配的数据的范围？如果是这样，我该如何完成，在这个函数内部分配一个数组而不丢失范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:07:50.797

您需要使用指向指针的指针，以便您可以从函数内部更改实际的指针值。你的 func 原型应该看起来像

```
int rt_band_get_ray(rt_band band, int x1, int y1, int x2, int y2,
                    rt_pixel **p_npixels) 
```

当心 - 函数内对 npixels 的所有引用都应更改为 (*p_npixels)，就像代码中的示例行一样：

```
if (npixels == NULL)
    *npixels = (rt_pixel) rtalloc(sizeof(struct rt_pixel_t) * count); 
```

应该成为

```
if (*p_npixels == NULL)
    **p_npixels = (rt_pixel) rtalloc(sizeof(struct rt_pixel_t) * count); 
```

并被称为

```
rt_pixel *npixels;

rt_band_get_ray(band, x1, y1, x2, y2, &npixels); 
```

之后代码应该可以正常工作

# maven - giraph-formats - 构建带有依赖项的 jar

> ID：14170632
> 
> 赞同：0
> 
> 时间：2013-01-05T09:55:56.763
> 
> 标签：maven, hadoop, giraph

我正在尝试构建 giraph-formats jar...与依赖项.. 将其用于我的项目，但即使在成功构建之后，我也无法获取 jar 文件。

我曾尝试将程序集部分添加到 pom，以构建具有依赖项的 jar，但它几乎没有遗漏 hive 的定义，这会导致更难解决的错误。我不知道出了什么问题。

我正在使用**maven 3.04**和**hadoop 0.20.2**

运行命令：

```
giraph/trunk/giraph-formats-contrib$ mvn -Phadoop_non_secure verify -Dcheckstyle.skip 
```

有 2 个我无法解决的警告：

* * *

结果 ：

```
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0

13/01/05 13:42:03 INFO zk.ZooKeeperManager: run: Shutdown hook started.
[INFO] 
[INFO] --- maven-jar-plugin:2.3.2:jar (default-jar) @ giraph-formats-contrib ---
[INFO] Building jar: /home/dipu/Downloads/pradeep/giraph/trunk/giraph-formats-contrib/target/giraph-formats-contrib-0.2-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-jar-plugin:2.3.2:test-jar (default) @ giraph-formats-contrib ---
[INFO] Building jar: /home/dipu/Downloads/pradeep/giraph/trunk/giraph-formats-contrib/target/giraph-formats-contrib-0.2-SNAPSHOT-tests.jar
[INFO] 
[INFO] --- maven-checkstyle-plugin:2.9:check (default) @ giraph-formats-contrib ---
[INFO] 
[INFO] >>> findbugs-maven-plugin:2.5.1:check (default) @ giraph-formats-contrib >>>
[WARNING] Failure to transfer asm:asm/maven-metadata.xml from file:../../local.repository/trunk was cached in the local repository, resolution will not be reattempted until the update interval of local.repository has elapsed or updates are forced. Original error: Could not transfer metadata asm:asm/maven-metadata.xml from/to local.repository (file:../../local.repository/trunk): No connector available to access repository local.repository (file:../../local.repository/trunk) of type legacy using the available factories WagonRepositoryConnectorFactory
[WARNING] Failure to transfer asm:asm/maven-metadata.xml from file:../../local.repository/trunk was cached in the local repository, resolution will not be reattempted until the update interval of local.repository has elapsed or updates are forced. Original error: Could not transfer metadata asm:asm/maven-metadata.xml from/to local.repository (file:../../local.repository/trunk): No connector available to access repository local.repository (file:../../local.repository/trunk) of type legacy using the available factories WagonRepositoryConnectorFactory
[INFO] 
[INFO] --- findbugs-maven-plugin:2.5.1:findbugs (findbugs) @ giraph-formats-contrib ---
[INFO] Fork Value is true
     [java] The following classes needed for analysis were missing:
     [java]   org.apache.hadoop.security.token.Token
     [java]   org.apache.hadoop.security.Credentials
     [java] Missing classes: 1
[INFO] Done FindBugs Analysis....
[INFO] 
[INFO] <<< findbugs-maven-plugin:2.5.1:check (default) @ giraph-formats-contrib <<<
[INFO] 
[INFO] --- findbugs-maven-plugin:2.5.1:check (default) @ giraph-formats-contrib ---
[INFO] BugInstance size is 0
[INFO] Error size is 0
[INFO] No errors/warnings found
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:27.588s
[INFO] Finished at: Sat Jan 05 13:42:38 IST 2013
[INFO] Final Memory: 39M/186M
[INFO] ------------------------------------------------------------------------ 
```

* * *

**我在下面粘贴的 giraph 格式的默认 pom .....**

* * *

```
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>org.apache.giraph</groupId>
    <artifactId>parent</artifactId>
    <version>0.2-SNAPSHOT</version>
  </parent>
  <artifactId>giraph-formats-contrib</artifactId>
  <packaging>jar</packaging>

  <name>Apache Giraph Formats</name>

  <properties>
    <top.dir>${project.basedir}/..</top.dir>
    <lib.dir>${top.dir}/lib</lib.dir>
  </properties>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-checkstyle-plugin</artifactId>
        <version>2.9</version>
        <configuration>
          <configLocation>${top.dir}/checkstyle.xml</configLocation>
          <headerLocation>${top.dir}/license-header.txt</headerLocation>
          <enableRulesSummary>false</enableRulesSummary>
          <failOnError>true</failOnError>
          <includeTestSourceDirectory>false</includeTestSourceDirectory>
        </configuration>
        <executions>
          <execution>
            <phase>verify</phase>
            <goals>
               <goal>check</goal>
             </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.6</version>
        <configuration>
          <systemProperties>
            <property>
              <name>prop.jarLocation</name>
              <value>${top.dir}/giraph/target/giraph-${project.version}-${forHadoop}-jar-with-dependencies.jar</value>
            </property>
          </systemProperties>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>findbugs-maven-plugin</artifactId>
        <version>2.5.1</version>
        <configuration>
          <xmlOutput>true</xmlOutput>
          <findbugsXmlOutput>false</findbugsXmlOutput>
          <excludeFilterFile>${top.dir}/findbugs-exclude.xml</excludeFilterFile>
        </configuration>
        <executions>
          <execution>
            <phase>verify</phase>
            <goals>
              <goal>check</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>

  <repositories>
    <!-- This is the main maven repository. Normally we wouldn't need to put
       it here when it's the only one being used, but since we need to add
       special repositories to get hcatalog we need to mention this one
       specifically otherwise it won't be included. -->
    <repository>
      <id>central</id>
      <name>Maven Repository</name>
      <url>http://repo1.maven.org/maven2</url>
      <releases>
        <enabled>true</enabled>
      </releases>
    </repository>
    <!-- This is necessary for hcatalog. -->
    <repository>
      <id>apache</id>
      <name>Apache Repository</name>
      <url>https://repository.apache.org/content/repositories/snapshots</url>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
    </repository>
    <!-- This is necessary for hive-metastore dependencies for hcatalog. -->
    <repository>
      <id>datanucleus</id>
      <name>datanucleus maven repository</name>
      <url>http://www.datanucleus.org/downloads/maven2</url>
      <layout>default</layout>
      <releases>
        <enabled>true</enabled>
        <checksumPolicy>warn</checksumPolicy>
      </releases>
    </repository>
  </repositories>

  <profiles>
    <profile>
      <id>hadoop_0.20.203</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <dependencies>
        <dependency>
          <groupId>org.apache.hadoop</groupId>
          <artifactId>hadoop-test</artifactId>
          <version>${hadoop.version}</version>
          <scope>test</scope>
        </dependency>
      </dependencies>
    </profile>

    <profile>
      <id>hadoop_1.0</id>
      <dependencies>
        <dependency>
          <groupId>org.apache.hadoop</groupId>
          <artifactId>hadoop-test</artifactId>
          <version>${hadoop.version}</version>
          <scope>test</scope>
        </dependency>
      </dependencies>
    </profile>

    <profile>
      <id>hadoop_non_secure</id>
      <dependencies>
        <dependency>
          <groupId>org.apache.hadoop</groupId>
          <artifactId>hadoop-test</artifactId>
          <version>${hadoop.version}</version>
          <scope>test</scope>
        </dependency>
      </dependencies>
    </profile>

    <profile>
      <id>hadoop_facebook</id>
      <dependencies>
        <dependency>
          <groupId>org.apache.hadoop</groupId>
          <artifactId>hadoop-test</artifactId>
          <version>${hadoop.version}</version>
          <scope>system</scope>
          <systemPath>${lib.dir}/facebook-hadoop-0.20-test.jar</systemPath>
        </dependency>
      </dependencies>
    </profile>
  </profiles>

  <dependencies>
    <!-- compile dependencies. sorted lexicographically. -->
    <dependency>
      <groupId>commons-cli</groupId>
      <artifactId>commons-cli</artifactId>
    </dependency>
    <dependency>
      <groupId>commons-io</groupId>
      <artifactId>commons-io</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.giraph</groupId>
      <artifactId>giraph</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.hbase</groupId>
      <artifactId>hbase</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.hcatalog</groupId>
      <artifactId>hcatalog-core</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.hive</groupId>
      <artifactId>hive-common</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.hive</groupId>
      <artifactId>hive-exec</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.hive</groupId>
      <artifactId>hive-metastore</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.zookeeper</groupId>
      <artifactId>zookeeper</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.giraph</groupId>
      <artifactId>giraph</artifactId>
      <version>0.2-SNAPSHOT</version>
      <type>test-jar</type>
    </dependency>

    <!-- provided dependencies. sorted lexicographically. -->
    <dependency>
      <groupId>org.apache.accumulo</groupId>
      <artifactId>accumulo-core</artifactId>
      <scope>provided</scope>
    </dependency>

    <!-- test dependencies. sorted lexicographically. -->
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.hbase</groupId>
      <artifactId>hbase</artifactId>
      <type>test-jar</type>
      <scope>test</scope>
    </dependency>
  </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T23:11:49.570

这些警告看起来无害。如果您担心，您应该删除它警告的缓存文件，然后让它再次下载它们。

# web-services - Axis2 中 POJO 参数中空格的编码

> ID：14170634
> 
> 赞同：0
> 
> 时间：2013-01-05T09:56:44.127
> 
> 标签：web-services, tomcat, axis2

我创建了一个非常简单的服务，它只是将一些文本回显到控制台。该服务只是一个带有方法 echo 的 POJO，只有一个参数：

```
public class EchoTest
{
    public void echo(String myMessage)
    {
        System.out.println(myMessage);
    }
} 
```

这是来自 services.xml：

```
<service name="EchoTest">
    <description>Echo test</description>
    <parameter name="ServiceClass">EchoTest</parameter>

     <operation name="echo">
        <messageReceiver  class="org.apache.axis2.rpc.receivers.RPCMessageReceiver" />
    </operation>
</service> 
```

此外，我使用一个非常简单的 HTML 表单将数据提交给服务：

```
<html>
<body>
    <form method="post" target="responseFrame" action="../../services/EchoTest/echo">
        <input name="myMessage" type="text">
        <input value="Send" type="submit"/>         
    </form>
    <iframe width=500 height=500 name="responseFrame"></iframe>
</body>
</html> 
```

我遇到的问题是空格被替换为“+”。例如，如果我输入这样的消息：

```
Hey you & you - # % @ 
```

结果是这样的：

```
Hey+you+&+you+-+#+%+@ 
```

我是否必须以某种方式对其进行编码，或者它不应该像这样？或者可能是设置问题？我正在使用 Tomcat 作为 Web 容器。有关信息，我在 Tomcat 中使用 servlet 过滤器来过滤 IP 地址，在那里我可以看到 myMessage 参数看起来不错，没有 + 符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:43:25.597

事实证明，问题实际上出在 Axis2 本身。我不确定，但我使用的版本是 2009 年 10 月的 1.5.1 版本。让我烦恼的是我没有找到任何关于它的错误报告。可能是它很快就修好了，而我很不幸。

升级到最新版本的 Axis2 解决了这个问题。

# c# - 具有通用类型参数的方法的单元测试

> ID：14170637
> 
> 赞同：0
> 
> 时间：2013-01-05T09:57:04.817
> 
> 标签：c#, unit-testing, generic-type-argument

我有一个系统，其中我的所有类都扩展了基类`Sol.Data.Object`。在这个基类中，我有一种从数据库中检索数据的方法：

```
public static ObjectType ReadById<ObjectType>(string schema, long id)
{
    SqlCommand command = User.CreateCommand(string.Format("{1}.Retrieve{0}",
                                            typeof(ObjectType).Name,
                                            schema),
                                            new SqlParameter("@ID", id));
       .....
} 
```

例如，我将像这样调用此方法： `Sol.Movie.ReadId("dbo", 2)`

我使用 Visual Studio 2010 为这个方法创建了一个单元测试：

```
public void ReadByIdTestHelper<ObjectType>()
{
    string schema = "dbo";
    long id = 1;
    ObjectType expected = default(ObjectType); //What should I put in here?!
    ObjectType actual;
    actual = Sol.Data.Object.ReadById<ObjectType>(schema, id);
    Assert.AreEqual(expected, actual);
    Assert.Inconclusive("Verify the correctness of this test method.");
}

[TestMethod()]
public void ReadByIdTest()
{
    ReadByIdTestHelper<Sol.Movie>();
} 
```

我应该如何定义预期类型？我试过`typeof(ObjectType)`了，但它给了我编译错误。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:59:37.200

我使用这种方法来解决问题：

```
public void ReadByIdTestHelper<ObjectType>()
{
    string schema = "dbo";
    long id = 1;
    Sol.Movie movie = new Movie();
    ObjectType actual;
    actual = Sol.Data.Object.ReadById<ObjectType>(schema, id);
    Assert.AreEqual((actual is ObjectType), true);
}

[TestMethod()]
public void ReadByIdTest()
{
    ReadByIdTestHelper<Sol.Movie>();
} 
```

不知道这是否是最好的方法。

# javascript - 在悬停时更改 HTML/CSS 框的尺寸

> ID：14170639
> 
> 赞同：3
> 
> 时间：2013-01-05T09:57:19.607
> 
> 标签：javascript, jquery, html, css

我有一个网页有一些*相同*大小的框。其中一些是隐藏的 ( `.dummy`)，其他是可见的，可以说`.A`，`.B`&`.C`如下图所示：[**为简单起见，仅在图像中显示****。** `dummy` **在实际的 HTML 代码中，它们没有任何背景/边框，因此是不可见的。**]

![在此处输入图像描述](../Images/eb5a4a872148989b6015115decd3a500.png)

现在，如果用户点击`link A`，所有的盒子都期望 '.A' 类的盒子会`fadeOut`。同样，对于此处显示的其他链接。

![在此处输入图像描述](../Images/0b21994183d0d207d058556d0feec699.png)

当指针悬停时，我只希望该`div#1`框更改尺寸。但是，当我应用 .hover 命令时，整个页面都会被扭曲。我希望每个盒子都保持原样，只有宽度`#div 1`会增加。同样，只有 的`height`才能`#div 2`增加。为此，我是否必须为每个效果编写单独的类？

**编辑#1**

这些是我的相关代码：

```
.dummy {
    float:left;
    position:relative;
    overflow:hidden;
    width:6.36896%;
    height:22.2287%;
    margin:2px;
    background:none;
}

.A, .B, .C{
    background:rgba(0, 0, 0, .30);
    float:left;
    position:relative;
    overflow:hidden;
    width:6.36896%;
    height:22.2287%;
    margin:2px;
    box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
    -moz-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
    -webkit-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:51:52.983

如果所有 A 类 div 都在同一个父级下，您可以尝试 nth-of-type 选择器，

例如，

```
<html>
    <head>
        <style>
            .A {
                width: 50px;
                height: 50px;
                border: 1px solid #CCC;
            }
            #outer div:nth-of-type(1) .A:hover {
                width: 300px;
            }
        </style>
    </head>
    <body>
        <div id="outer">
            <div>
                <div class="A"></div>
            </div>
            <div>
                <div class="A"></div>
                <div class="A"></div>
            </div>
        </div>
    </body>
</html> 
```

再生：

[W3C CSS 选择器参考](http://www.w3schools.com/cssref/css_selectors.asp)

# android - 在 MySQL 中存储图像以在 Android listview 建议中显示

> ID：14170640
> 
> 赞同：1
> 
> 时间：2013-01-05T09:57:21.727
> 
> 标签：android, mysql, image, store

我需要一些建议。我正在android平台上做一个杂货清单应用程序。我打算将产品图像和名称添加到列表视图中。我正在使用 MySQL 和 php（使用 XAMPP localhost）来显示数据。到目前为止，我使用 AndroidHive 的连接教程成功地进行了文本显示。

我的问题是我应该如何存储图像：

1.  使用数据类型 BLOPB 或
2.  将图像传输到 localhost(htdocs) 文件夹，然后存储目录路径（使用 varchar 数据类型）[不确定是否可能，但我在 asp.net 中做了类似的事情]

我在这里看到了一些例子，但不太确定哪个对我来说更容易（初级）。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:09:33.873

如果您将图像存储到 localhost 并在 db 中使用关联的位置会更好。

因为，转换图像文件然后将其存储在数据库中会很困难。另一方面，它会极大地影响您的数据库大小。

将数据存储在 localhost 会很有效，因为本地磁盘的大小不是问题。此外，您将可以直接访问图像文件。

# c# - ASPX 中的 IsPostBack

> ID：14170642
> 
> 赞同：0
> 
> 时间：2013-01-05T09:57:31.950
> 
> 标签：c#, asp.net, database, forms, webforms

我有这个 ASPX 代码：

```
<form name="AddArticle" action="Register.aspx" method="post">
<b>
title :<br /></b><input id="Text1" type="text" name="ArticleTitle"/><p></p>
<b>

date: <br /></b><input id="Text2" type="text" name="ArticleDate"/><p></p>

<b>
author : <br /></b><input id="Text3" type="text" name="ArticleAuthor"/><p></p>
<b>
text: <br /></b> <textarea rows="10" cols="60"  name="ArticleBody"></textarea>
<br />
<input id="Reset1" type="reset" value="clean" />
<input id="Submit1" type="submit" value="send" /></form> 
```

我有这个 ASPX.C# 代码：

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Data.OleDb;

public partial class Register : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {
        string ArticleTitle = "", ArticleBody = "", ArticleAuthor = "", ArticleDate = "";
        if (IsPostBack)
        {
            try
            {
                ArticleTitle = Request.Form["ArticleTitle"].ToString();
                ArticleDate = Request.Form["ArticleDate"].ToString();
                ArticleAuthor = Request.Form["ArticleAuthor"].ToString();
                ArticleBody = Request.Form["ArticleBody"].ToString();

                string dpath = Server.MapPath(@"App_Data") + "/MySite.mdb";
                string connectionstring = @"Data source='" + dpath + "';Provider='Microsoft.Jet.OLEDB.4.0';";
                OleDbConnection con = new OleDbConnection(connectionstring);
                string QuaryString = string.Format("insert into tblArticles(ArticleTitle,ArticleBody, ArticleAuthor, PostDate) values ('{0}','{1}','{2}','{3}')", ArticleTitle, ArticleBody, ArticleAuthor, ArticleDate);
                OleDbCommand cmd = new OleDbCommand(QuaryString, con);
                con.Open();
                cmd.ExecuteNonQuery();

            }
            catch
            {
                Response.Redirect("Default.aspx");
            }
        }
    }
    } 
```

我的问题是为什么当我点击“发送”按钮时，表单中的信息（标题，作者......）没有插入到数据库中？我该如何解决？希望得到帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:51:18.633

最好的方法是使用按钮单击事件，但在您的情况下。您可以为每个元素使用 AutoPostBack 属性：

```
<asp:TextBox ID="ArticalTitle" runat="server" Text="Button"  AutoPostBack="true"/> 
```

当用户更改此元素的焦点时（按 TAB 等），代码将回发文本框中的值。但是在这种情况下，您的值会一一传递，因此您需要在尝试将它们写入数据库之前存储这些值，或者您可以使用面板控件并在面板控件之外放置一个虚拟按钮以更改焦点：

```
<asp:Panel ID="Panel1" runat="server" AutoPostBack="true">
    <asp:TextBox ID="TextBox1" Text="asd" runat="server" />
    <asp:TextBox ID="TextBox2" Text="asd" runat="server" />
</asp:Panel>
<asp:Button ID="Button1" runat="server" Text="Button" /> 
```

当用户单击按钮面板控件自动回发时，您可以捕获文本框中的值。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T10:05:57.577

我认为您应该编写一个按钮单击事件来调用该函数：

。CS

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        ArticleTitle = Request.Form["ArticleTitle"].ToString();
            ArticleDate = Request.Form["ArticleDate"].ToString();
            ArticleAuthor = Request.Form["ArticleAuthor"].ToString();
            ArticleBody = Request.Form["ArticleBody"].ToString();

            string dpath = Server.MapPath(@"App_Data") + "/MySite.mdb";
            string connectionstring = @"Data source='" + dpath + "';Provider='Microsoft.Jet.OLEDB.4.0';";
            OleDbConnection con = new OleDbConnection(connectionstring);
            string QuaryString = string.Format("insert into tblArticles(ArticleTitle, PostDate) values ('{0}','{1}','{2}','{3}')", ArticleTitle, ArticleBody, ArticleAuthor, ArticleDate);
            OleDbCommand cmd = new OleDbCommand(QuaryString, con);
            con.Open();
            cmd.ExecuteNonQuery();
    } 
```

.aspx：

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" /> 
```

在 web.config 中使用 StoredProcedure： connectString：</p>

```
<add name="CGB_GlobalInfoConnectionString" connectionString="Data Source=127.0.0.1;Initial Catalog=TestDB;Persist Security Info=True;User ID=sa;Password=11111" providerName="System.Data.SqlClient" /> 
```

。CS：

```
SqlConnection connection = new SqlConnection(DataManager.DBConnectString);
            try
            {
                SqlCommand cmd = new SqlCommand();
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Connection = connection;
                cmd.CommandText = "Insert_AddSomething";
                cmd.Parameters.Add("@UserID", SqlDbType.Int).Value = userid;

                connection.Open();
                cmd.ExecuteNonQuery();

                } 
```

# c - fork 父子通信

> ID：14170647
> 
> 赞同：16
> 
> 时间：2013-01-05T09:57:55.643
> 
> 标签：c, fork, ipc

我需要某种方式让父进程分别与每个子进程进行通信。

我有一些孩子需要与其他孩子分开与父母沟通。

父母有没有办法与每个孩子建立私人沟通渠道？

例如，孩子也可以向父母发送一个结构变量吗？

我对这类事情不熟悉，因此感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-05T11:05:16.273

（我假设我们在这里谈论的是 linux）

正如您可能发现的那样，`fork()`它本身只会复制调用过程，它不处理[IPC](http://en.wikipedia.org/wiki/Inter-process_communication)。

> 从前叉手册：
> 
> fork() 通过复制调用进程来创建一个新进程。新进程（称为子进程）是调用进程（称为父进程）的完全副本。

一旦你 forked() 处理 IPC 最常见的方法是使用管道，特别是如果你想要“每个孩子的私人通信通道”。这是一个典型且简单的使用示例，类似于您可以在`pipe`手册中找到的示例（不检查返回值）：

```
 #include <sys/wait.h>
   #include <stdio.h>
   #include <stdlib.h>
   #include <unistd.h>
   #include <string.h>

   int
   main(int argc, char * argv[])
   {
       int pipefd[2];
       pid_t cpid;
       char buf;

       pipe(pipefd); // create the pipe
       cpid = fork(); // duplicate the current process
       if (cpid == 0) // if I am the child then
       {
           close(pipefd[1]); // close the write-end of the pipe, I'm not going to use it
           while (read(pipefd[0], &buf, 1) > 0) // read while EOF
               write(1, &buf, 1);
           write(1, "\n", 1);
           close(pipefd[0]); // close the read-end of the pipe
           exit(EXIT_SUCCESS);
       }
       else // if I am the parent then
       {
           close(pipefd[0]); // close the read-end of the pipe, I'm not going to use it
           write(pipefd[1], argv[1], strlen(argv[1])); // send the content of argv[1] to the reader
           close(pipefd[1]); // close the write-end of the pipe, thus sending EOF to the reader
           wait(NULL); // wait for the child process to exit before I do the same
           exit(EXIT_SUCCESS);
       }
       return 0;
   } 
```

代码非常不言自明：

1.  父叉（）
2.  孩子从管道中读取（）直到 EOF
3.  父母 write() 到管道然后 close() 它
4.  数据已共享，万岁！

从那里你可以做任何你想做的事；只要记住检查您的返回值并阅读`dup`, `pipe`, `fork`, `wait`... 手册，它们就会派上用场。

还有许多其他方法可以在进程之间共享数据，尽管它们不符合您的“私人”要求，但它们可能会让您感兴趣：

*   [共享内存“SHM”](http://www.cs.cf.ac.uk/Dave/C/node27.html)，名字就说明了一切……
*   [套接字](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html)，如果在本地使用，它们显然也能正常工作
*   [FIFO 文件](http://www.gnu.org/software/libc/manual/html_node/FIFO-Special-Files.html#FIFO-Special-Files)，它们基本上是具有名称的管道

甚至是一个简单的文件......（我什至曾经使用 SIGUSR1/2[信号](http://unixhelp.ed.ac.uk/CGI/man-cgi?signal%207)在进程之间发送二进制数据......但我不建议这样做哈哈。）可能还有一些我没有考虑过的事情现在。

祝你好运。

# emacs - 如何在 Paredit 模式下删除多余的括号？

> ID：14170649
> 
> 赞同：38
> 
> 时间：2013-01-05T09:57:58.753
> 
> 标签：emacs, clojure, lisp, paredit

我在 Emacs 中使用 Paredit 来编辑 Lisp 代码。如何删除我不小心插入的一对额外的括号？如果没有额外的命令，Paredit 不允许这样做。

`((square 5))`进入`(square 5)`

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-05T10:04:56.610

这就是所谓`paredit-splice-sexp`的，键绑定是`M-s`。看看[这里](http://emacswiki.org/emacs/PareditCheatsheet)的 paredit 备忘单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T12:56:33.477

阅读 barfage 和 slurpage。

您还可以安装“paredit-menu.el”，它提供了一个操作菜单，并带有向您显示其效果的工具提示。

Paredit 有时会让您陷入这样一种情况，最简单的方法就是将其关闭、修复所有问题并重新打开。然而，这是值得的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T11:53:56.380

如果我在插入这些额外的括号后立即意识到意外的额外括号，我会调用 undo 命令。如果我很晚才看到额外的括号，那么有 paredit 命令可以将其修复为指定的其他答案，但是如果我不知道这些命令，那么我会在内部表单中的某个位置放置点，然后键入以下内容，前提是CUA 模式已开启。

```
C-M-u C-M-SPC C-x <timeout> <left> C-M-SPC C-v 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-22T09:58:23.800

当里面有任何元素时，paredit 不会让我们删除括号。我的诀窍是剪切正确的代码并将其粘贴到相邻的其他位置。它会将多余的括号留空，然后我可以删除它。实际上正确的方法是使用`M-s`它来重新缩进它。`C-q (`相反，我们可以使用or插入单括号`C-q }`。

# c - 使用多个文件 C 而不是将其全部放入单个文件时，二进制文件有区别吗？

> ID：14170651
> 
> 赞同：0
> 
> 时间：2013-01-05T09:58:01.697
> 
> 标签：c, runtime

我知道到目前为止，多个文件将使代码更容易。但是，它们是否会在“将其全部塞入一个文件”之间提供性能差异，或者像 gcc 这样的现代编译器是否会为两者创建相同的二进制文件。当我说性能差异时，我指的是文件大小、编译时间和运行时间。

这仅适用于 C。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:12:43.727

可以说，多个文件的编译时间会有所改善，因为您只需要重新编译已更改的文件（假设您有一个不错的依赖关系跟踪构建系统）。

链接可能需要更长的时间，因为还有更多工作要做。

传统上，编译器无法跨多个源文件执行优化（内联函数之类的事情很棘手）。因此，生成的可执行文件可能会有所不同，并且可能会更慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T10:16:29.590

当一切都在一个文件中时，有更多的优化机会。例如，gcc，`-O2`如果它们的主体可用，则将内联一些函数，即使它们没有被声明为内联（甚至更多的函数有资格内联`-O3`）。因此运行时间存在差异，有时您甚至有机会注意到它们。更是如此`-fwhole-program`，告诉 GCC 你不关心外部函数的离线版本，除了`main()`（GCC 表现得好像你的所有外部函数都变成了静态的）。

总体编译时间可能会增加（因为要分析的内容更多，并且并非所有优化器算法都是线性的）或减少（当不需要多次解析相同的标头时）。二进制大小可能会增加（由于内联，以换取运行速度更快）或减少（不太可能；但有时，内联将调用者的代码简化到代码大小减小的程度）。

为了便于开发和维护，你可以使用 sqlite 的方法：它有多个源文件，但在编译之前它们被挤成一个（“合并”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T10:10:06.163

从一些测试来看，编译和链接需要更长的时间。您将收到一个不同的二进制文件，至少我收到了，但是我的二进制文件在另一个字节之内。

`.000764 MS` 在运行的多文件版本中运行的多合一文件`.000769 MS` 一定要对基准测试持保留态度，因为我确实在大约 5 分钟内将它放在一起，而且它是一个小程序。

所以总体上真的没有区别。

# java - 在mysql中获取最后插入的自动增量ID

> ID：14170656
> 
> 赞同：16
> 
> 时间：2013-01-05T09:58:41.793
> 
> 标签：java, mysql

我正在尝试获取 mysql_insert_id(); 之类的 mysql 命令；它检索最后插入的行的 auto_increment id。我该怎么做才能在 Java 中获得它？

```
rs = st.executeQuery("select last_insert_id() from schedule");
lastid = rs.getString("last_insert_id()"); 
```

我的lastid被宣布为INT。我不知道在 rs.get 中使用什么以及参数..

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-05T10:04:54.490

使用 JDBC，您可以使用**[Connection.PreparedStatement(query, int)](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#prepareStatement%28java.lang.String,%20int%29)**方法。

```
PreparedStatement pstmt = conn.prepareStatement(Query, Statement.RETURN_GENERATED_KEYS);  
pstmt.executeUpdate();  
ResultSet keys = pstmt.getGeneratedKeys();    
keys.next();  
key = keys.getInt(1); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-05T10:00:13.500

尝试使用别名

```
rs = st.executeQuery("select last_insert_id() as last_id from schedule");
lastid = rs.getString("last_id"); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-18T12:16:10.823

请参阅[此](https://stackoverflow.com/questions/4246646/mysql-java-get-id-of-the-last-inserted-value-jdbc)帖子以获取答案和解释

```
Statement stmt = db.prepareStatement(query, Statement.RETURN_GENERATED_KEYS);
numero = stmt.executeUpdate();

ResultSet rs = stmt.getGeneratedKeys();
if (rs.next()){
    risultato=rs.getInt(1);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-05T10:01:09.013

为什么不

```
SELECT MAX(id) FROM schedule 
```

如果 id 您的列的名称不同于`id`，则需要在上述查询中相应地替换它。

你可以像这样使用它：

```
rs = st.executeQuery("SELECT MAX(id) AS id FROM schedule");
int lastid = rs.getInt("id"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-16T11:54:57.490

您可以使用以下查询来获取最后插入行的最后一个 auto_incremented ID。

```
SELECT (max(auto_incr_id)) from table_name; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-16T03:57:13.240

另外一个选项：

`SELECT id FROM table_name ORDER BY id DESC LIMIT 1;`

# cocoa-touch - 为什么我需要在我正在观察的对象被释放之前删除通知观察者？

> ID：14170661
> 
> 赞同：3
> 
> 时间：2013-01-05T09:59:48.453
> 
> 标签：cocoa-touch, nsnotificationcenter

来自[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)：

> 您必须在 addObserverForName:object:queue:usingBlock: 指定的任何对象被释放之前调用 removeObserver: 或 removeObserver:name:object:

为什么在我正在观察其通知的对象被释放之前停止观察很重要？我理解为什么*我*作为观察者需要停止观察，如果*我*要消失并且块取决于我的存在，但我不明白为什么被观察对象的生命周期很重要。我误解了这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T10:21:56.627

> 我理解为什么我作为观察者需要停止观察，如果我要消失并且块取决于我的存在，但我不明白为什么被观察对象的生命周期很重要。

我认为可能的解释如下。

`addObserverForName:object:queue:usingBlock`描述 说：

> 向接收者的调度表添加一个条目，其中包含一个通知队列和一个要添加到队列的块，以及可选条件：通知名称和发送者。

在这种情况下，“sender”只是`object`参数的另一个名称，在以下术语中进行了描述：

> 要将块添加到操作队列的通知的对象。如果你传递 nil，通知中心不会使用通知的发送者来决定是否将块添加到操作队列中。

因此，`object`充当一种过滤器：当通知进入时，通知中心根据该值（如果存在）决定是否必须将块添加到指定的操作队列。

现在，考虑一下：

1.  被观察对象在没有观察者被移除的情况下被释放；

2.  创建了一个不同的对象，也能够发布通知，并且它恰好与在点 1 处释放的对象具有相同的地址；

3.  现在观察者将对第二个对象发布的通知做出反应。

我承认这是一个非常罕见的情况，但它可能会发生，所以你最好针对它编写代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T10:03:34.333

如果您不删除观察者，则可能会导致您已经销毁对象但仍会发送通知的情况-这将导致“消息发送到已释放实例”错误

# django - 无法让我的 Django 表单工作

> ID：14170664
> 
> 赞同：1
> 
> 时间：2013-01-05T10:00:21.373
> 
> 标签：django, forms

我不知道这里发生了什么：我以为我正在实现一个非常简单的 Django 表单，遵循 Django Docs 中的 ContactForm 示例（尽管我对 forms.py 使用了不同的示例）。但是，由于某种原因，当页面加载时，我得到了模板，但没有出现任何表单。根据模板，所有的 HTML 都在那里，但 Django 的东西（`theTest`我添加的表单和变量）没有呈现。

我有一半希望在我无法识别的地方出现并发症，但是，我担心我犯了一个 n00b 错误，我应该能够接受......

如果有人可以帮助我，我将不胜感激！

## 我的代码：

**表格.py：**

```
class ContactSupportForm(forms.Form):
    fields = ('theSubject', 'theMessage')
    widgets = {
        'theMessage': forms.Textarea(attrs={'cols': 55, 'rows': 12}),
        }
    error_css_class = 'error'
    required_css_class = 'required' 
```

**视图.py：**

```
from forms import ContactSupportForm

@login_required
def postSupportMessage(theRequest):
"""The new view to which the support form is submitted"""
isLoggedIn = linfiniti.isUserLoggedIn(theRequest)
if isLoggedIn == True:
    myRequestingUser = theRequest.user
    myRequestingUserEmail = myRequestingUser.email
else:
    return HttpResponseForbidden()
if theRequest.POST:
    theForm = ContactSupportForm(theRequest.POST)
    if theForm.is_valid():
        theIssueSummary = theForm.cleaned_data['theSubject']
        theMessageDesc = theForm.cleaned_data['theMessage']
        theIssueDesc = '%s \n \n Username: %s \n \n User Email: %s' % \
            (theMessageDesc, myRequestingUser, myRequestingUserEmail)
        theIssue = json.dumps({
            "fields": {
                "project":
                      {
                      "key": "SUPPORT"
                      },
                "summary": theIssueSummary,
                "description": theIssueDesc,
                "issuetype": {
                     "name": "Bug"
                    }
                }
          })
        myRequest = urllib2.Request('http://MYURL')
        myAuthString = base64.standard_b64encode('%s:%s' % ('USERNAME', 'PASSWORD'))
        myRequest.add_header("Authorization", "Basic %s" % myAuthString)
        theResult = urllib2.urlopen(myRequest, theIssue, {'Content-Type': 'application/json'})
        myReturn = theResult.read()
        if myReturn:
            theNewKey = myReturn.key
            return HttpResponse(json.dumps({
                "success": True,
                "theNewKey": theNewKey
                }))
        else:
            return HttpResponse(json.dumps({
                "success": False
                }))
    else:
        theForm = ContactSupportForm()
        theTest = 'crap'
else:
    theForm = ContactSupportForm()
    theTest = 'rubbish'

return render_to_response('contact-support.html',
                                     {
                                     'theForm': theForm,
                                     'test': theTest
                                     },
                                     context_instance=RequestContext(theRequest)
                                     ) 
```

**HTML：**

```
<h5>Contact Support</h5>
      <div class="buttons" id="reload-support-form">
        <a data-ignore="true" class="btn btn-mini" href="javascript:void(null);" id="show-sent" onClick="reLoadSupportForm();">
          <i class="icon-refresh"></i> Reload Form
        </a>
      </div>
    </div>
    <h1>{{test}}</h1>
    <div class="widget-content" id="support-message-container">
      <div id="message-support-content">
        <form action="" method="post" id="compose-message-form" class="form-horizontal">

{% csrf_token %}
{% for field in theForm %}
  <fieldset class="control-group {% if field.errors %}error{% endif %}">
    <label class="control-label" for="{{ field.auto_id }}">{{ field.label }}</label>
    <div class="controls">
      {{ field }}
      {% if field.help_text %}
        <span class="help-inline">{{ field.help_text }}</span>
      {% endif %}
      {% if field.errors %}
        <span class="help-inline">{{ field.errors|striptags }}</span>
      {% endif %}
    </div>
  </fieldset>
{% endfor %}
<div class="control-group">
  <div class="controls">
    <input id="support-message-submit" class="btn btn-primary" type="submit"/>
  </div>
</div> 
```

## 编辑

根据下面的答案/评论，我更新了 forms.py（我还`else`从视图中删除了第二个）：

```
class ContactSupportForm(forms.Form):
theSubject = forms.CharField(max_length=100)
theMessage = forms.CharField(widget=forms.Textarea(attrs={'cols': 55, 'rows': 12}))
error_css_class = 'error'
required_css_class = 'required' 
```

但是，我仍然没有在模板中获得表单，我也没有`theTest`在模板中获得。视图正确返回模板，但不返回表单或`theTest`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:19:59.627

正如 Aamir 指出的那样，您没有在表单上定义任何字段，并且不清楚您从哪里得到按照您的方式进行操作的想法。[文档](https://docs.djangoproject.com/en/1.4/topics/forms/#form-objects)清楚地显示了该怎么做：

```
class ContactForm(forms.Form):
    subject = forms.CharField(max_length=100)
    message = forms.CharField(widget=forms.Textarea(attrs={'cols': 55, 'rows': 12}))
    error_css_class = 'error'
    required_css_class = 'required' 
```

`widgets`和`fields`属性仅在 ModelForms 的内部 Meta 类中使用，它们是从模型生成的表单，当您想要覆盖该模型上的默认字段/字段小部件时。你在这里不这样做，所以他们没有意义。

此外，在您看来，您应该删除第二个`else`子句：当出现验证错误时，您将重新实例化表单，因此错误不会显示在 HTML 页面上。删除该子句将允许执行直接进入 render_to_response 调用。

（关于变量名的主题，除了驼峰式问题之外，我无法想象为什么你觉得需要在一半变量`the`前加上`my`.

# ios - iOS 保存应用内购买数据并处理越狱

> ID：14170667
> 
> 赞同：3
> 
> 时间：2013-01-05T10:00:48.597
> 
> 标签：ios, in-app-purchase

我创建了使用应用内购买的应用，一切正常。现在假设设备越狱并且无法访问互联网（因此我无法验证商店收据）并且用户找到了我保存购买信息的文件并对其进行了操作。

我该如何处理这种情况？有苹果定义的方式吗？或者我应该使用加密（以及获取 ERN 的过程）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T13:48:02.533

在大多数情况下，可以忽略越狱设备。如果有人**真的**想在越狱设备上盗版您的应用内购买，他/她将能够做到。

是的，你可以让它变得更难，但值得付出努力吗？您不会通过添加一些功能并让您的应用程序更具吸引力而获得更多利润（通过获得更多销售额）吗？

此外，Apple 正在努力使 iPhone 难以越狱，现在看来，他们这样做会相当成功。

不，据我所知，没有 Apple 定义的方式。是的，您可以使用设备 ID 作为密钥的加密（或类似的东西）。您还可以使用 iOS 钥匙串代替文件来存储您的购买信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:42:38.550

我使用的是我自己的“技巧”来处理这个问题。

首先，我选择 2 个不同的大素数（应该是 5-6 位数字）并将它们相乘并加 1。其中一个是“主素数”，另一个取决于在商店购买的商品。

(master_prime * 素数)+1;

生成的数字是 9~15 位数字。

我将其保存在我的应用程序的 2 个不同位置（例如将[NSKeyedArchiver](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html)保存到文件和 NSUserDefaults 中）。

这就是用户从商店购买东西时发生的情况。

当我启动应用程序时，我会进行一些检查：

*   如果 2 个文件具有相同的编号
*   如果 prime = (9-digit number/master_prime - 1) 的结果是素数
*   如果素数具有某种性质（通常数字之和等于某个数字）

如果其中任何一个不正确，那么我会尝试连接到互联网以恢复购买。如果我不能...再见购买（直到我可以再次连接到互联网...ofc）。

为了优化这个……你可以检查第一个条件……如果不是真的，不需要检查其他条件。

我给了我的一个朋友这样的数字来破解它..他花了大约 5 个小时来完成它，其中 1 个 7 位数字作为主素数，5 位数字作为存储变量素数。这是因为他知道自己在做什么……如果你不知道如何得出这些数字，那将需要几天甚至几个月的时间。

您可以使用 3 个素数而不是 2.. 或更大的数字来改进这一点……或者每个素数都有不同的属性。

# php - 无错误更新基于 PHP 的站点的最佳方法

> ID：14170669
> 
> 赞同：0
> 
> 时间：2013-01-05T10:01:01.753
> 
> 标签：php, apache, file-io

我有一个网站，我在本地进行编码和测试，准备好后，我通过 FTP 将文件上传到远程服务器，这有时会有点慢。

如果用户尝试访问包含当前正在上传的页面的 require_once 的页面，他们将收到错误，因为在该特定时刻该文件似乎不存在或仅部分上传。即使用户尝试直接访问例如 example.php 的页面，他们也可能遇到同样的问题。

我通过创建一个自定义包含函数来检查文件的最后一行是否有标记，从而克服了 require_once 问题，但这对非包含页面没有帮助，而且真的很混乱。

有没有更好的方法来更新网站而不会因错误而激怒用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:13:22.500

您是否研究过 FTP 以外的部署选项？许多部署工具（如[Capistrano](https://github.com/capistrano/capistrano)）通过 SSH 工作，将新文件复制到新文件夹中，然后`current`在整个上传和更新过程完成时将目录符号链接到新文件夹。这确保了原子（全部或全部）更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:07:27.677

是的，在您的主 idex 文件中，您应该先上传如下内容：

```
<h1>Page under update</h1>
<h2>Please revisit after 10 minuts</h2>
<?php die();?>
// ... Your code is belowe 
```

现在您可以更新其他文件，并在结束时从主 index.php 中删除上述行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T10:12:03.103

1\. 您始终可以通过以下方式关闭所有错误报告：

```
error_reporting(0); 
```

（好吧，说实话 - 不好的解决方案）。

2\. 然而，这可能不是你想要的。另一种消除错误的方法是在行前添加@。所以你可以通过写来解决它：

```
@require_once(FILE) 
```

（再次 - 糟糕的解决方案。你不想让错误沉默）。

3\. 您可能想要使用 include_once 而不是 require_once，这样即使文件不存在，您也可以继续加载页面。

（可能会做得更好，不是吗？）

4\. 最推荐的做法是先检查file_exists是否存在，然后为所欲为。如果该页面是其余代码所必需的，您可能希望放置自己的自定义错误消息并停止页面的加载。

```
try {
    if (!file_exists('page.php')) {
        throw new Exception('Page has not been found, please try again later.');
    }
    if (!@include_once('page.php'))
    {
        throw new Exception('Page under construction, please try again later.');
    }
}
catch(Exception $e) {    
  echo $e->getMessage();
} 
```

（我认为这是真的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T10:13:27.283

使用符号链接指向您的 Web 应用程序目录，并在您的 Web 服务器配置中引用该符号链接。将所有内容上传到实时网络应用程序的不同目录；然后在一切就绪后简单地更改符号链接。

**编辑**

或者......如果您使用 APC 进行操作码缓存，请上传所有内容，并且原始文件仍应位于操作码缓存中（您应该在生产服务器中禁用 apc stat 测试）；然后在上传所有内容后刷新操作码缓存。

# php - php/html 编码风格

> ID：14170673
> 
> 赞同：1
> 
> 时间：2013-01-05T10:01:27.177
> 
> 标签：php, html, coding-style

变体 1：

```
<?php
for ($i = 0; $i<10; $i++) {
?>
    <p>some text</p>
<?php
}
?> 
```

变体 2：

```
<?php
for ($i = 0; $i < 10; $i++) {
     echo '<p>some text</p>';
}
?> 
```

这种编码风格在性能上有区别吗？或者这只是口味问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T10:03:05.797

品尝。还有**[第三个](http://php.net/manual/en/control-structures.alternative-syntax.php)**，它被认为更具可读性：

```
<?php for ($i = 0; $i < 10; $i++) : ?>
    <p>Some Text</p>
<?php endFor; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T10:05:56.550

首先是良好的编码标准。我们应该避免在 php 中回显 html

好标准

```
<?php for ($i = 0; $i < 10; $i++) : ?>
    <p>Some Text</p>
<?php endFor; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T10:08:07.877

这是一个口味问题，但我会避免使用变体 2。

它类似于缩进之类的东西：没有固定的规则，但在我看来，这是最易读的：

```
<?php for ($i = 0; $i < 10; $i++) : ?>
<p>Some Text</p>
<?php endFor; ?> 
```

我相信，这也是大多数时候使用的，因为正如 Kalai 所说：

> “我们应该避免在 php 中回显 html”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T10:10:43.240

如果您不想逃跑，`<?php ?>`那么您应该使用`print`而不是`echo`. 打印函数比`echo`（实际上不是函数而是特殊语法）更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T10:13:11.790

我建议您遵循 Zend 编码标准[http://framework.zend.com/manual/1.12/en/coding-standard.html](http://framework.zend.com/manual/1.12/en/coding-standard.html)

# php - PHP 中的 While 循环条件

> ID：14170677
> 
> 赞同：0
> 
> 时间：2013-01-05T10:02:32.997
> 
> 标签：php, operators, conditional

我在许多示例中都看到了以下 while 循环条件，甚至我也多次使用过它。我知道它是如何工作的以及如何使用它。但是当我在这里编码条件时没有任何意义。

正如我看到的代码，条件就像它总是正确的。就像*while(1)*一样。因为对*mysql_fetch_assoc()*来说，传递的数据都是一样的。所以条件是常数。

```
while($arr = mysql_fetch_assoc($data)) 
{
      //other code
} 
```

现在，我错在哪里？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T10:04:21.820

每次调用都从结果集中`mysql_fetch_assoc`获取*下一行。*如果不再有行，则返回`false`并终止循环。

`$data`是一种[资源](http://php.net/manual/en/language.types.resource.php)数据类型，可能会保留最后获取哪一行的状态。
这并不罕见，甚至数组也有一个指向当前元素的内部指针，可以使用某些数组函数对其进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:05:27.813

从[PHP 网站](http://php.net/manual/en/function.mysql-fetch-assoc.php)mysql_fetch_assoc “*返回对应于获取行的字符串关联数组，如果没有更多行，则返回 FALSE。* ”

因此，只要仍有可用的行，`mysql_fetch_assoc`将返回行内容的关联数组，将指针递增到下一行并`while`执行循环。

当没有更多行将`mysql_fetch_assoc`返回时`FALSE`，循环将中断。

另请注意，从 PHP 5.5.5 开始，该函数将被弃用。

# android - 4.2.1 background_holo_dark xml

> ID：14170678
> 
> 赞同：1
> 
> 时间：2013-01-05T10:02:48.167
> 
> 标签：android

在 Android 4.0 - 4.1.2 中，framework-res.apk 中的 drawable-nodpi 目录包含 background_holo_dark.png。在 4.2.1 中。XML 具有渐变而不是指向目录。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient android:startColor="#ff000000" android:endColor="#ff272d33" android:angle="270.0" />
</shape> 
```

我需要输入什么来删除渐变并让 xml 指向我放置 background_holo_dark.png 的目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:52:32.250

如果您想将其用作背景，您可以直接调用它，例如

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/background_holo_dark" /> 
```

现在，如果您想使用它进行选择，您可以在 drawable 中创建一个文件并执行类似的操作。假设我称之为 selected_item.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Active tab -->
    <item android:drawable="@drawable/list_gradient" android:state_focused="false" android:state_pressed="false" android:state_selected="true"/>
    <!-- Inactive tab -->
    <item android:drawable="@drawable/button_listpage_77px" android:state_focused="false" android:state_pressed="false" android:state_selected="false"/>
    <!-- Pressed tab -->
    <item android:drawable="@drawable/list_gradient" android:state_pressed="true"/>
    <item android:drawable="@drawable/button_listpage_77px" />

</selector> 
```

然后不要调用 background_holo_dark 你这样做

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/selected_item" /> 
```

# android - 滚动时在列表视图中丢失了一些项目

> ID：14170680
> 
> 赞同：0
> 
> 时间：2013-01-05T10:03:02.677
> 
> 标签：android, listview, android-listview, listviewitem

我有一个带有 1 个复选框和 2 个按钮的列表视图，我设置了复选框 VISIBLE 和两个按钮 GONE。在主类中，我有 1 种方法可以再次打开/关闭显示 2 按钮 VISIBLE/GONE，工作完美，但是当我滚动列表视图时，列表视图的某些行再次丢失了 2 按钮。

这是[我的源代码](http://jumpshare.com/v/qILtLN?b=T7C9Fp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:16:26.920

您应该使用数组或列表来保存按钮/复选框状态，并根据保存的按钮/复选框状态在适配器的 getView() 方法中处理 VISIBLE/GONE。因为当你滚动时，单元格内容可能会被 getView() 重建。

# c# - .NET，如何确定字段是否已为空

> ID：14170682
> 
> 赞同：1
> 
> 时间：2013-01-05T10:03:07.527
> 
> 标签：c#, memory-management, garbage-collection

这很容易，我敢肯定。我试图寻找，但没有快乐。

假设我有一个 type 的对象，它有一个type`A`的公共字段。我创建一个实例并设置.`F``B``B``A.F=B`

结果`A.F == null`为假。结果`A.F is B`为真。

但是然后`B`设置为null。该`A.F`属性仍然持有旧实例的句柄`B`。并且运行时查找`A.F`仍将其显示为 type `B`。所以测试`A.F == null`仍然给出 False，测试`A.F is B`仍然给出 True。虽然`B`已经被废了。

那么如何检查`A.F`属性以查看其句柄现在是否指向消失的对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T10:07:48.920

.NET 引用永远不会指向消失的对象；这就是 GC 的全部意义所在。您的示例描述了对单个对象的两个独立但相同的引用。更改一个引用不会更改任何其他引用。基本上你描述的是这样的：

```
 int x = 1;
 obj.Foo = x;
 x = 0; 
```

然后期望 obj.Foo 为 0。它不会是：它会是 1，直到你改变它。引用的工作方式相同。

您没有“丢弃” `B`. 那个实例仍然非常高兴。您刚刚删除了对它的一个引用。

换句话说：在我的 Facebook 上，我将“Donna”列为我的妻子。如果我现在清除该字段（我没有计划这样做），我还没有删除她的帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:03:57.620

如果`A.F == null`is`False`和`A.F`is `B`，则`A.F`和`B`引用同一个对象，该对象不为空。如果您认为`B`代码中此时应该为 null，因为您之前将其设置为 null，那么您的代码中可能还有另一个错误。

# java - 意外的“瞬态”构造函数修饰符

> ID：14170684
> 
> 赞同：11
> 
> 时间：2013-01-05T10:03:16.857
> 
> 标签：java, reflection, jvm

我在使用反射时发现了有趣的事情。我试图检索简单类的构造函数及其修饰符。

```
public class Test {
    public Test(Object... args) {}
} 
```

这是检索构造函数修饰符的代码：

```
Class<?> clazz = Test.class;
Constructor<?>[] ctors = clazz.getDeclaredConstructors();
for (Constructor<?> ctor : ctors) {        
    int mod = ctor.getModifiers();
    /*if not package-private modifier*/
    if(mod!=0) {
        System.out.println( Modifier.toString(mod)));
    }
} 
```

结果是：

```
 public transient 
```

如果我传递给构造函数不是变量参数，而只是数组，那没关系。

```
public class Test {
    public Test(Object[] args) {}
} 
```

结果是：

```
 public 
```

无论构造函数修饰符（public、protected、private）或参数类型（原始或引用）如何，都会发生同样的情况。怎么可能，而“瞬态”不是构造函数的有效修饰符？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-05T10:11:54.663

访问修饰符在类文件中编码为位掩码。JVM 规范根据它们是否出现在方法修饰符或字段修饰符中为某些位分配不同的含义。第 7 位 ( `0x0080`) 就是这样的一位。

[对于方法](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.6)：

```
ACC_VARARGS    0x0080  Declared with variable number of arguments. 
```

[对于字段](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.5)：

```
ACC_TRANSIENT  0x0080  Declared transient; not written or read by a persistent
                       object manager. 
```

由于您正在查看一种方法，因此此修饰符的正确解释是`ACC_VARARGS`and not `ACC_TRANSIENT`。

但是，[`Modifier`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Modifier.html)该类似乎只能处理 JVM 规范中定义的修饰符子集。因为它只需要一个，`int`它无法区分。`ACC_VARARGS``ACC_TRANSIENT`

# symfony - Assetic Symfony2 less+compress 过滤器

> ID：14170685
> 
> 赞同：5
> 
> 时间：2013-01-05T10:03:19.417
> 
> 标签：symfony, filter, compression, less, assetic

有没有办法让assetic自动编译**和**压缩.less文件？

我试过这个配置：

```
assetic:
debug:          "%kernel.debug%"
use_controller: true
bundles:        ['BloggerBlogBundle', "FOSCommentBundle"]
#java: /usr/bin/java
filters:
    cssrewrite: ~
    less:
      node: /home/igor/nvm/v0.8.16/bin/node
      node_paths: [/home/igor/nvm/bin/node_modules]
      apply_to: "\.less$"
    yui_css:
      jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar
      apply_to: "\.css$|\.less" 
```

但这会导致**.css**文件被压缩而 **.less**文件被编译。**我不能同时做到：编译然后压缩我的 .less 文件。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T12:25:36.173

这是我用于同时编译+压缩 .less 文件的配置和树枝代码：

配置.yml

```
# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    java: %java_path%
    filters:
        less:
            node:       %node_base_path%
            node_paths: [%node_lib_path%, %node_modules_path%]
        cssrewrite: ~
        yui_css:
            jar: %kernel.root_dir%%jar_file%
        yui_js:
            jar: %kernel.root_dir%%jar_file% 
```

在我的树枝上：

```
{% block stylesheets %}
    {% stylesheets
        '@MyBundle/Resources/public/css/event.less'
        'css/colorpicker.css'
        filter='less,?yui_css'
        output='build/event_layout_2cols.css'
    %}
        <link href="{{ asset_url }}" rel="stylesheet" media="screen" />
    {% endstylesheets %}
{% endblock %} 
```

这是编译和压缩的命令：

```
./app/console assetic:dump --env=prod --no-debug 
```

希望有帮助！

# c++ - 为什么函数完成时指针数组会自行初始化？

> ID：14170686
> 
> 赞同：0
> 
> 时间：2013-01-05T10:03:20.573
> 
> 标签：c++, arrays, pointers

我周末的任务是创建一个函数，它获取一个整数数组和数组的大小，并创建一个指针数组，以便使用冒泡排序对指针进行排序（不更改原始数组）。

在调试时我发现它工作得很好，但是当函数返回 main() 时，指针数组被初始化并且一切都消失了。

```
#include <iostream>
using namespace std;

void pointerSort(int arr[], int size, int* pointers[]);
void swap(int a, int b);
void main()
{
    int arr[5]={7,2,5,9,4};
    int size = 5;
    int* pointers[5];

    pointerSort(arr, size, pointers);

    for (int i = 0; i < 5 ; i++)
        cout << *pointers[i] << endl;
}
void pointerSort(int arr[], int size, int* pointers[])
{
    int j, i;
    bool change = true;

    pointers = new int*[size];
    for (i = 0; i < size; i++)
        pointers[i] = &arr[i];

    i = 0;
    j = 1;
    while (i <= size-1 && change == true)
    {
        change = false;
        for (i = 0; i < size-j; i++)
        {
            if (*pointers[i] > *pointers[i+1])
            {
                swap(pointers[i], pointers[i+1]);
                change = true;
            }
        }
        j++;
    }
}
void swap(int&a, int&b)
{
    int temp;

    temp = a;
    a = b;
    b = temp;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T10:05:36.283

```
pointers = new int*[size]; 
```

此时`pointers`已经是一个指针数组，不需要分配。

在此行之后`pointers` **不再是您的主要功能中的数组**。

**这就是您的函数失败的**原因，因为您正在重新分配`pointers`指向的数组。原始数组 ISNT 被重新初始化，它只是在整个代码中被忽略。

正如 ATaylor 所提到的，这也是[内存泄漏](http://en.wikipedia.org/wiki/Memory_leak)，因为您没有删除分配的空间，也无法在函数完成后删除空间。

要解决所有问题：只需删除上面的行。

# objective-c - 推送未进入分发模式

> ID：14170691
> 
> 赞同：0
> 
> 时间：2013-01-05T10:03:45.577
> 
> 标签：objective-c, ios, push-notification

大家好，我的推送问题不是以分发模式出现，而是以开发模式出现。有时它以分发模式出现，但这次没有出现。

你能告诉我我出了什么问题吗

谢谢-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:08:16.260

对于分发模式，您需要另一个推送证书（分发推送证书；），并且您需要使用此证书签署您的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:10:03.993

确保您已创建`.pem`文件`Distribution certificate`并检查`SSL Server`指向的文件`gateway.push.apple.com`

# jquery - jquery绑定动作到警报框

> ID：14170700
> 
> 赞同：1
> 
> 时间：2013-01-05T10:04:41.793
> 
> 标签：jquery, ruby-on-rails, ajax, internet-explorer

我想将一个动作绑定到显示使用警报的框

就像我的 js 文件中有这段代码一样... alert('sss') ...

当此代码运行时，将显示一个对话框，其中有一个确定按钮，我想将一个操作绑定到该确定按钮

是否可以？

你可能会好奇我为什么需要这个

我可以尝试解释，但我不确定我会说清楚

有一个链接，我将单击以对 db 使用 ajax 进行一些更改，之后将触发另一个 ajax 从服务器获取一些信息，问题是第二个 ajax 不会等待第一个 ajax 完成，所以它得到旧的数据

这个问题只存在于 ie 中，看起来是 async: false not work in ie

当第一个 ajax 完成时，这将是一个警报调用，所以我想将第二个 ajax 绑定到这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:15:44.983

尝试在第一个 ajax 的**完整**回调中调用第二个 ajax，例如

```
$.ajax({
  url: '/some_url',
  complete: function(data) {
    // call your second ajax here
  } 
```

});

# vb.net - 如何在 VB.NET (Visual Basic 2010) 中使用 span ID 从 HTML 中获取文本？

> ID：14170701
> 
> 赞同：1
> 
> 时间：2013-01-05T10:04:41.180
> 
> 标签：vb.net, vb.net-2010

如何在 VB.NET (Visual Basic 2010) 中使用 span ID 从 HTML 文档中获取字符串？

我正在做一个项目，我想从网页跨度中提取文本到我的应用程序的`textbox1.text`. 到目前为止，我只使用了这个：

```
TextBox1.Text = WebBrowser1.Document.All.GetElementsByName("***I put the span id here, but it didn't work.***")(0).InnerText 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:32:01.723

您正在使用`...ByName`而不是`...ByID`意味着您需要使用元素的`name`属性：`span`

```
<span name="myName">...</span> 
```

要使用 ID 而不是名称，请尝试将您的代码替换为（未经测试）：

```
TextBox1.Text = _
 WebBrowser1.Document.GetElementById("spanID").GetAttribute("innerText") 
```

...

```
<span id="spanID">...</span> 
```

# httpwebrequest - 在 .net 4.5 中通过提琴手捕获流量

> ID：14170708
> 
> 赞同：0
> 
> 时间：2013-01-05T10:05:13.900
> 
> 标签：httpwebrequest, fiddler

我在 VS2010 上编写了发送 httpwebrequest 的简单应用程序，并且没有任何配置的提琴手捕获了这个请求。但是之后，我安装了 VS2012 并运行 fiddler，当我发送请求时，我有异常“操作超时”并且请求没有被捕获。当我关闭提琴手时，所有请求都会发送。我删除了 VS2012 和 .net framework 4.5。在该请求被发送和提琴手捕获它们之后。
为什么安装 .net4.5 时提琴手不捕获流量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:12:56.127

您是否尝试过设置HttpWebRequest的[Host属性？](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.host.aspx)这可能是您的问题的原因。

我也安装了 .NET 4.5 并遇到了同样的情况。当提琴手正在运行**并**充当代理时，我得到了同样的错误。错误是：

> System.Net.WebException：操作在 System.Net.HttpWebRequest.GetResponse() 处超时

这是一个重现问题的简单示例：

```
using System;
using System.IO;
using System.Net;

namespace WebRequestTest
{
    class Program
    {
        static void Main(string[] args)
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.microsoft.com");
            request.Host = "www.microsoft.com";//If I comment this line, capturing with fiddler works OK.
            request.Method = "GET";
            request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0";

            using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
            using (Stream stream = response.GetResponseStream())
            using (StreamReader sr = new StreamReader(stream))
            {
                string content = sr.ReadToEnd();
                Console.WriteLine(content);
            }
        }
    }
} 
```

就我而言，我只需要评论该`request.Host="www.microsoft.com"`行，一切正常。

我怀疑在使用 fiddler 以外的 HTTP 代理时会发生同样的行为，但我还没有测试过。

# asp.net - asp.net 和 silverlight 两个不同应用程序之间的通信

> ID：14170711
> 
> 赞同：1
> 
> 时间：2013-01-05T10:05:27.933
> 
> 标签：asp.net, silverlight-5.0

我是网络开发新手

我有两个不同的应用程序

1.  asp.net 许可证系统

2.  银光应用

在 asp.net 按钮上单击我想在下一个选项卡上打开 silverlight 并且我想传递用户 ID 和密码变量

silverlight 应该在加载时访问这些变量，并且根据用户，它将禁用 silverlight 应用程序中的一些工具

我不想使用 queryString

我尝试使用 http POST，webRequest 没有运气

如何将用户名和密码传递给 silverlight？

感谢和问候 usr22

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:55:06.233

您可以使用 Silverlight 对象的 InitParams。

当您生成包含 Silverlight 应用程序的页面时，您可以使用“InitParams”参数将信息传递给 Silverlight 应用程序。请注意，如果您的数据是敏感数据（密码、DRM 等），您至少应该混淆它们，因为它们将在页面源中。

[MSDN 链接](http://msdn.microsoft.com/en-us/library/cc838255%28v=VS.95%29.aspx)

# java - 如何使用 Java 的 selenium Web 驱动程序获取特定 optgroup 下的选项？

> ID：14170713
> 
> 赞同：3
> 
> 时间：2013-01-05T10:05:35.473
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我想从多选选项列表字段中选择特定 optgroup 下的选项，例如

```
<select id="xyz">
   <optgroup label="Group1">
      <option value="1">pick1</option>
      <option value="2">pick2</option>
   </optgroup>
   <optgroup label="Group2">
       <option value="3">pick3</option>
       <option value="4">pick4</option>
   </optgroup>
</select> 
```

如果选择列表字段如上所示，我可以使用

```
new Select(driver.findElement(By.id("xyz"))).selectByVisibleText("pick1");
new Select(driver.findElement(By.id("xyz"))).selectByVisibleText("pick2"); 
```

用于从上面选择 optgroup -Group1 下的所有选项。

在这里，我知道 Group1 中存在的所有选项，因此我可以像上面那样选择。

但我的要求是动态的，我需要选择 optgroup-Group1 下的所有选项。

如果我想动态选择所有选项，包括第 1 组和第 2 组

然后我可以使用

```
new Select(driver.findElement(By.id("xyz"))).getOptions(); 
```

将所有选项作为列表获取，我可以将其存储为数组，我可以使用数组一一选择所有选项

但是，我怎样才能获得仅在一个特定的 optgroup 下的所有选项，比如 Group1 或 Group2？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T11:03:06.767

您应该使用**xpath**和`findElements`：

```
driver.findElements(By.xpath("xpath = "//select[@id='xyz']/optgroup[@label='Group1']/option"))) 
```

# excel - 如何在 Web 应用程序中使用 EPPlus 删除 XLSX 文件的列

> ID：14170717
> 
> 赞同：1
> 
> 时间：2013-01-05T10:05:51.463
> 
> 标签：excel, xlsx, epplus

如何`.XLSX`在 Web 应用程序中使用 EPPlus 删除文件的列？

我使用 EPplus 生成 Excel 报告和一个存储过程来从数据库中获取数据。

问题是我想通过 EPplus 删除报告文件中的一列信息（不应更改存储过程。）

我会删除其中的附加列，并且还想将页面布局方向更改为（从右到左），但它不起作用

```
'----/// Click Report Button ///----
Protected Sub btnExcel_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnExcel.Click
        If "MYcondition is true" Then
            GenerateXLSXFile(CreateDataTable())
        End If
End Sub

'----/// Generate Report ///----
Private Sub GenerateXLSXFile(ByVal tbl As DataTable)
        Dim excelPackage = New ExcelPackage
        Dim excelWorksheet = excelPackage.Workbook.Worksheets.Add("My_Worksheet")

        excelWorksheet.View.ShowGridLines = False
        excelWorksheet.Cells.Style.Border.Bottom.Style = Style.ExcelBorderStyle.Thick

        excelWorksheet.Cells("A5").LoadFromDataTable(tbl, True)

       '-----/// Hide a Column ///---------
        excelWorksheet.Column(2).Hidden = True    

       '----/// Change PageLayout Direction ///---------------  
        excelWorksheet.View.PageLayoutView = excelWorksheet.View.RightToLeft  

        excelWorksheet.Cells("A5").Value = "header_1"
        excelWorksheet.Cells("B5").Value = "header_2"
        excelWorksheet.Cells("C5").Value = "header_3"

        Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
        Response.AddHeader("content-disposition", "attachment;  filename=My_ExcelName.xlsx")

        Dim stream As MemoryStream = New MemoryStream(excelPackage.GetAsByteArray())
        Response.OutputStream.Write(stream.ToArray(), 0, stream.ToArray().Length)
        Response.Flush()
        Response.Close()
End Sub

'----/// Create Data Table for Exel Report (use stored procedure) ///----
Private Function CreateDataTable() As DataTable
        Dim dataTable As New DataTable("tbl_Name")
        Dim dataAdapter As New SqlDataAdapter()

        Dim conn As New SqlConnection(ConfigurationManager.ConnectionStrings("ProvidersCS").ToString)
        Dim cmd As New SqlCommand("My Select Command", conn)

        cmd.CommandType = CommandType.StoredProcedure
        Try
            conn.Open()
            dataAdapter.SelectCommand = cmd
            dataAdapter.Fill(dataTable)
        Catch ex As Exception
        Finally
            conn.Close()
        End Try

        Return dataTable        
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T20:55:14.353

EPPlus API 上的插入和删除列方法尚未实现，因为它不适用于具有当前单元存储设计的大型工作表。

删除列的唯一方法是自己移动单元格。

本主题是关于 EPPlus Codeplex Page 的讨论。

参考= [http://epplus.codeplex.com/discussions/262729](http://epplus.codeplex.com/discussions/262729)

# git - 如何让 git push 运行得更快

> ID：14170722
> 
> 赞同：6
> 
> 时间：2013-01-05T10:06:07.890
> 
> 标签：git, github, git-push

有没有办法告诉 git 更快地将更改推送到 github 远程服务器。即使在一个最小的 Rails 应用程序中对几个文件进行细微更改，也需要更长的时间（约 8-10 秒）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-05T14:57:14.090

尝试创建一个目录`~/.ssh/control`，然后将其添加到您的`~/.ssh/config`：

```
Host github.com
  ControlMaster auto
  ControlPath ~/.ssh/control/%r@%h:%p
  ControlPersist 3600 
```

这将导致 ssh 在 1 小时内重复使用与 github 的现有连接，这将消除在此期间重新进行身份验证所花费的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:00:43.433

如果您使用的是 http/https 协议，则应尝试使用 ssh 协议。

# paypal - 关于使用 Walmart Debit VISA 卡支付到 Paypal 的问题

> ID：14170725
> 
> 赞同：-1
> 
> 时间：2013-01-05T10:06:24.193
> 
> 标签：paypal

我已经在我的网站中集成了 Paypal。背景是使用Paypal express checkout。我面临的问题是，当我使用 Walmart Debit VISA 卡付款时，Paypal 服务响应 Success，但 Walmart Debit VISA 卡中的钱并没有减少，而且我的 Paypal 商家帐户也没有收到钱。这里可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:50:10.097

您是否正在调用 DoExpressCheckoutPayment，并且您是否指向 Live API 端点？
（https://api-3t.paypal.com/nvp 而不是[https://api-3t.sandbox.paypal.com/nvp](https://api-3t.sandbox.paypal.com/nvp)）。

既然您提到“PayPal 服务响应成功”，我假设您正在查看 ACK=Success。这仅仅是对 API 调用已成功处理的确认；对于交易状态，我建议查看 PAYMENTSTATUS=Completed。这在 DoExpressCheckoutPayment API 响应中返回。

# asp.net-mvc - 在 MVC4 中设置 SimpleMembership

> ID：14170726
> 
> 赞同：7
> 
> 时间：2013-01-05T10:06:49.387
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在阅读 MVC4 中的内容以设置简单的成员资格，我应该执行以下步骤：

在 AppSettings 中包含一行：

```
<add key="enableSimpleMembership" value="true" /> 
```

但是，当我查看从模板生成的样本时，它们只有：

```
 <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

那么为什么我一直在阅读有必要设置 enableSimpleMembership 键？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T10:26:09.320

默认情况下，`SimpleMembershipProvider`当您创建新的 ASP.NET MVC 4 应用程序时启用。但是某些托管服务提供商可能会通过在更高级别的 web.config 中覆盖此设置来禁用它。

引用关于[SimpleMembership](http://www.asp.net/web-pages/tutorials/security/16-adding-security-and-membership)的文章：

> 如果您看到一个错误，告诉您属性必须是 ExtendedMembershipProvider 的实例，则该站点可能未配置为使用 ASP.NET 网页成员资格系统 (SimpleMembership)。如果托管服务提供商的服务器配置与您的本地服务器不同，有时会发生这种情况。要解决此问题，请将以下元素添加到站点的 Web.config 文件中：
> 
> `<appSettings>`
> 
> ```
>  <add key="enableSimpleMembership" value="true" /> 
> ```
> 
> `</appSettings>`

此设置由`WebMatrix.WebData.PreApplicationStartCode`在您的站点运行时自动执行的方法使用，并将使用此设置的值来启用简单的成员资格提供程序。

实际上`SimpleMembershipProvider`，我建议您明确配置：

```
<membership defaultProvider="SimpleMembershipProvider">
  <providers>
    <clear/>
    <add name="SimpleMembershipProvider" 
         type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData"/>
  </providers>
</membership> 
<roleManager enabled="true" defaultProvider="SimpleRoleProvider">
  <providers>
    <clear/>
    <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
  </providers>
</roleManager> 
```

现在，已经没有混淆的余地了。成员资格和角色提供者都是显式配置的。

# javascript - 在 href 属性中隐藏 HTML 链接

> ID：14170728
> 
> 赞同：1
> 
> 时间：2013-01-05T10:07:00.073
> 
> 标签：javascript, html, onclick

好的，我不太擅长 HTML，但我会尽量表达自己。

假设我在 href 属性中有一个游戏链接。通过使用 JS on.click，一旦用户点击链接，他就会弹出一个窗口，迫使他订阅。他们订阅后，链接会自动打开并开始下载。

但问题是链接是可见的，所以他可以简单地右键单击它，复制链接位置，粘贴它，然后......你明白了。悬停链接时，它也会显示在底部（取决于您的浏览器）。

如何向用户隐藏该链接（仍需要在鼠标单击时使用）？

他不需要看，只要他订阅它就会打开。

感恩的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T10:31:51.697

如果您提供`href='#'`并使用相同的 JS 函数将用户重定向到链接，则效果会更好。

使用来自其他应答者的一些文本..

```
<a href="#" onClick="window.location = 'my-website.com/download/super-game.zip';"> Download link </a> 
```

这将打开链接，但我会这样做......

```
 <a href="#" onClick="download('my-website.com/download/super-game.zip')"> Download link </a> 
```

然后在一个 JavaScript 文件中

```
function download(link)
{
 window.location = link;
 return false;
} 
```

这就是我的做法，但它非常愚蠢......愚蠢的意思是愚蠢的，为什么你希望用户能够点击但看不到链接？只有一种方法可以做到这一点，它使用服务器端语言，因此用户将无法看到链接......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T10:15:58.680

最好给出 href='#' 并使用相同的 JS 函数将用户重定向到链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-20T09:16:18.723

GIT：[https ://github.com/michaelhartomo/js-ninja-href](https://github.com/michaelhartomo/js-ninja-href)

# js-ninja-href

Javascript 本机库隐藏/隐藏您的真实 url 链接。

隐藏您的推荐链接非常有用。

获得所有损失的收入，因为有些人不想使用您的推荐链接。

它会无辜地显示一个干净的 url，但是当用户单击（左、中、右）时，它会将它们重定向到其他地方。

安装 下载并解压 .zip 文件：[https ://github.com/michaelhartomo/js-ninja-href/archive/master.zip](https://github.com/michaelhartomo/js-ninja-href/archive/master.zip)

设置包含脚本：ninja-href.min.js

```
<script src="js/ninja-href.min.js"></script> 
```

现在运行 ninja-href 函数（默认情况下，它将监听 ninja-href 类）

```
ninja_href(".ninja-href"); 
```

像这样设置要隐藏/隐藏的链接（在新窗口中打开）：

```
<a href="http://google.com/" class="ninja-href" data-ninja-url="http://frozenfire.us/" data-ninja-target="_blank"> Go to Google </a> 
```

您也可以在当前窗口中打开链接：

```
<a href="https://tomplayer.top/" class="ninja-href" data-ninja-url="https://m.do.co/c/9072c848dc6e" data-ninja-target="_self"> TOP Charts 100 WORLD & 50 K-POP! </a> 
```

像这样隐藏推荐链接非常有用：

```
<a href="https://google.com/free/RlJPWkVORklSRS1UT01QTEFZRVIuQVBQLU1JQ0hBRUxIQVJUT01PLkNPTQ==" class="ninja-href" data-ninja-url="https://m.do.co/c/9072c848dc6e" data-ninja-target="_self"> GET FREE 10 USD FOR SSD VPS HOSTING! ( You can use it for 2 months ) </a> 
```

jsFiddle 示例：[https ://jsfiddle.net/t5f7n7gL/1/](https://jsfiddle.net/t5f7n7gL/1/)

# android - 在包“android”中找不到属性“uiOptions”的资源标识符

> ID：14170730
> 
> 赞同：0
> 
> 时间：2013-01-05T10:07:16.843
> 
> 标签：android

```
<?xml version="1.0" ?>
<manifest android:screenOrientation="landscape" android:versionCode="3"
android:versionName="3" package="com.tablet3" xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-sdk android:minSdkVersion="11" android:targetSdkVersion="11" />
    <!-- TI_MANIFEST -->
    <application android:debuggable="false" android:icon="@drawable/appicon"
    android:label="actiobar" android:name="actiobarApplication">
        <!-- TI_APPLICATION -->a
        <activity android:configChanges="keyboardHidden" android:screenOrientation="landscape"
        android:label="mob" android:name=".actiobarActivity" android:theme="@style/Theme.Titanium">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:configChanges="keyboardHidden" android:name="org.appcelerator.titanium.TiActivity"
        android:screenOrientation="landscape" />
        <activity android:configChanges="keyboardHidden" android:name="org.appcelerator.titanium.TiTranslucentActivity"
        android:screenOrientation="landscape" />
        <activity android:configChanges="keyboardHidden" android:name="org.appcelerator.titanium.TiModalActivity"
        android:screenOrientation="landscape" />
        <activity android:configChanges="keyboardHidden" android:name="ti.modules.titanium.ui.TiTabActivity"
        android:uiOptions="splitActionBarWhenNarrow" android:screenOrientation="landscape"
        />
        <activity android:name="ti.modules.titanium.ui.android.TiPreferencesActivity"
        android:screenOrientation="landscape" />
        <service android:exported="false" android:name="org.appcelerator.titanium.analytics.TiAnalyticsService"
        />
    </application>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"
    />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"
    />
    <uses-permission android:name="android.permission.INTERNET" />
</manifest> 
```

当我将 uiOptions 添加到我的活动时，我收到此错误。

```
AndroidManifest.xml:22: error: No resource identifier found for attribute 'uiOptions' in package 'android' 
```

我希望 ActionBar 降下来，所以我实际上正在尝试在我的 Activity 中使用 uiOptions。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:18:14.777

此属性是在 API 14 中添加的，但您已指定 targetSdkVersion 11

# python - ImportError：没有名为ini的mudule

> ID：14170731
> 
> 赞同：0
> 
> 时间：2013-01-05T10:07:21.310
> 
> 标签：python, pythonpath

我有一个像这样的目录结构

```
akom
   DB
     DBinit.py 
     __init__.py
     server.py 

   Configuration(dir)
   urls.py
   settings.py 
   manage.py 
   ini.py
   __init__.py 
```

我已将 .bashrc 中的 PYTHONPATH 设置为`export PYTHONPATH=$PYTHONPATH:/home/dir1/dir2/`

里面 dir2 akom 驻留。

我正在导入`ini.py`类似`server.py`但`import ini` 我收到的错误

```
ImportError: No module named ini 
```

请告诉我哪里出错了。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:09:14.557

由于`akom`它本身是一个包，因此您需要首先通过包名称引用该包内的模块 - 例如，使用`import akom.ini`而不是`import ini`.

更新：阅读上面的内容，有点不清楚是否`ini.py`在`Configuration`目录中 - 如果是，您将需要做`import akom.Configuration.ini`.

# c++ - 如何使用 std::forward_list 在恒定时间内进行范围拼接？

> ID：14170746
> 
> 赞同：7
> 
> 时间：2013-01-05T10:08:29.883
> 
> 标签：c++, c++11, forward-list

我想拼接 range `[first, last]`，包括两个端点。我对元素*before* `first`和 to有迭代器`last`。我可以做到这一点，`splice_after()`但只能在线性时间内。

**我相信这个拼接可以在恒定时间内完成。**我该怎么做`std::forward_list`？

如果问题不清楚，这里是显示我的问题的示例代码：

[实时工作空间](http://liveworkspace.org/code/2TYJKT%240)代码

```
#include <algorithm>
#include <forward_list>
#include <iostream>
#include <iterator>
using namespace std;

int main() {   
    forward_list<char> trg{'a','b','c'};
    forward_list<char> src{'1','2','3','4'};

    auto before_first = src.begin();
    auto last = find(src.begin(), src.end(), '4');
    cout << "before_first = " << *before_first << ", last = " << *last << "\n";

    // trg.splice(trg.begin(), src, before_first, last); // no such splice
    auto end = last;
    ++end; // Ouch! splice has to find last again although I already had it  :(
    trg.splice_after(trg.begin(), src, before_first, end);

    cout << "Target after splice:\n";
    copy(trg.begin(), trg.end(), ostream_iterator<char>(cout," "));

    cout << "\nSource after splice:\n";
    copy(src.begin(), src.end(), ostream_iterator<char>(cout," "));

    cout << endl;
} 
```

输出：

```
before_first = 1, last = 4
Target after splice:
a 2 3 4 b c
Source after splice:
1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T21:52:59.237

的规范`forward_list`说`(first, last)`应该拼接范围，不幸的是没有办法在 O(1) 时间内做到这一点，因为需要访问来`last-1`做到这一点，而获得访问权限的唯一方法`last-1`是从`first`.

如果规范是拼接 range `(first, last]`，那么 O(1) 拼接是可能的。我知道没有办法用当前的`forward_list`规范来实现这一点。

我认为这是一个缺陷。但是我已经尝试过但未能修复它：

[http://cplusplus.github.com/LWG/lwg-defects.html#897](http://cplusplus.github.com/LWG/lwg-defects.html#897)

然而，过去的问题已经逆转，尤其是当投诉来自非委员会成员（例如您自己）时。提出投诉的方式是打开一个新问题，并在适当的情况下引用任何旧问题或相关问题。打开问题的说明在[这里](http://cplusplus.github.com/LWG/lwg-active.html#submit_issue)。

PS：关于这个问题的+1。

# c - PE 文件 .text 部分大小

> ID：14170748
> 
> 赞同：0
> 
> 时间：2013-01-05T10:09:10.847
> 
> 标签：c, portable-executable

我写了代码并将其编译为exe，现在.text部分需要更大，如果我有代码并且我想在编译之前从代码中分配.text部分的更多空间，该怎么做？分配一些缓冲区？

我正在尝试更改代码或编译选项以生成带有 LARGER .TEXT 部分的二进制文件

我的编译器 VisualStudio2010 或 cl.exe

给二进制文件打补丁比较复杂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:24:17.607

假设它真的是你想要的，你可以使用内联汇编。例如对于 gcc+gas：`void unused_global() { __asm(".space 10000"); }`

对于 Visual Studio 的 cl.exe，它似乎更棘手：内联 asm 中没有指令，甚至 REPT 都不可用。我会用 masm 分别编译一堆 nop；否则我们必须做这样的事情：

```
#define NOP __asm { NOP } ;
#define NOP8 NOP NOP NOP NOP NOP NOP NOP NOP
#define NOP64 NOP8 NOP8 NOP8 NOP8 NOP8 NOP8 NOP8 NOP8 
#define NOP512 NOP64 NOP64 NOP64 NOP64 NOP64 NOP64 NOP64 NOP64
#define NOP4096 NOP512 NOP512 NOP512 NOP512 NOP512 NOP512 NOP512 NOP512
#define NOP32768 NOP4096 NOP4096 NOP4096 NOP4096 NOP4096 NOP4096 NOP4096 NOP4096
void unused_global() { NOP32768 } 
```

# android - 创建自己的拨号器

> ID：14170752
> 
> 赞同：0
> 
> 时间：2013-01-05T10:09:35.443
> 
> 标签：android

我想创建自己的拨号器，它有自己的用于呼叫连接和断开的小部件。怎么做？请帮助我，因为我是初学者简要告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:22:46.513

此处已回答，因此您可以将其用于[自定义拨号器](https://stackoverflow.com/questions/10303138/how-to-make-my-own-custom-dialer-in-an-android-phone)部分：

至于小部件部分，我发现谷歌的指南最有帮助：http: [//developer.android.com/guide/topics/appwidgets/index.html](http://developer.android.com/guide/topics/appwidgets/index.html)

# css - 向 TinyMCE 字体选项添加新字体

> ID：14170758
> 
> 赞同：8
> 
> 时间：2013-01-05T10:10:15.277
> 
> 标签：css, fonts, tinymce, font-face

我已经查看了这个线程：[Google Fonts 和 TinyMCE](https://stackoverflow.com/questions/4201296/google-fonts-and-tinymce)，实际上之前甚至已经成功地为用户的 TinyMCE 字体选项添加了新字体。

但是我不确定这里出了什么问题以及为什么我不能再这样做了。我正在尝试添加一种新字体，`Samman`这是我刚从 MyFonts.com 获得的。

在我的 TinyMCE 初始化中，我包括以下内容：

```
content_css : "css/fonts.css,css/userdesigntool.css,http://fonts.googleapis.com/css?family=Paytone+One,http://fonts.googleapis.com/css?family=Aclonica", 
```

`css/fonts.css`是我描述新字体的地方。在这个文件中，我刚刚保存在`fonts/css`服务器文件夹中的新字体如下所示：

```
@font-face {
font-family: 'sammanregular';
src: url('fonts/samman/samman-webfont.eot');
src: url('fonts/samman/samman-webfont.eot?#iefix') format('embedded-opentype'),
     url('fonts/samman/samman-webfont.woff') format('woff'),
     url('fonts/samman/samman-webfont.ttf') format('truetype'),
     url('fonts/samman/samman-webfont.svg#sammanregular') format('svg');
font-weight: normal;
font-style: normal;

} 
```

我从 Font-Squirrel 生成了这些（正如我之前使用其他字体成功完成的那样），并且我已经仔细检查以确保文件实际上在预期的路径上，并且它们是。

在`theme_advanced_fonts`TinyMCE 初始化的条目中，我有这个：

```
 theme_advanced_fonts : tm_fonts,
            // some more stuff below 
```

`tm_fonts`我的 javascript 中描述的变量在哪里，如下所示：

```
var tm_fonts = "Andale Mono=andale mono,times;"+
                    "Arial=arial,helvetica,sans-serif;"+
                    "Arial Black=arial black,avant garde;"+
                    "Book Antiqua=book_antiquaregular,palatino;"+
                    "Corda Light=CordaLight,sans-serif;"+
                    "Courier New=courier_newregular,courier;"+
                    "Flexo Caps=FlexoCapsDEMORegular;"+                 
                    "Lucida Console=lucida_consoleregular,courier;"+
                    "Georgia=georgia,palatino;"+
                    "Helvetica=helvetica;"+
                    "Impact=impactregular,chicago;"+
                    "Museo Slab=MuseoSlab500Regular,sans-serif;"+                   
                    "Museo Sans=MuseoSans500Regular,sans-serif;"+
                    "Oblik Bold=OblikBoldRegular;"+
                    "Sofia Pro Light=SofiaProLightRegular;"+                    
                    "Symbol=webfontregular;"+
                    "Tahoma=tahoma,arial,helvetica,sans-serif;"+
                    "Terminal=terminal,monaco;"+
                    "Tikal Sans Medium=TikalSansMediumMedium;"+
                    "Times New Roman=times new roman,times;"+
                    "Trebuchet MS=trebuchet ms,geneva;"+
                    "Verdana=verdana,geneva;"+
                    "Webdings=webdings;"+
                    "Wingdings=wingdings,zapf dingbats"+
                    "Aclonica=Aclonica, sans-serif;"+
                    "Michroma=Michroma;"+
                    "Paytone One=Paytone One, sans-serif;"+
                    "Andalus=andalusregular, sans-serif;"+
                    "Arabic Style=b_arabic_styleregular, sans-serif;"+
                    "Andalus=andalusregular, sans-serif;"+
                    "KACST_1=kacstoneregular, sans-serif;"+
                    "Mothanna=mothannaregular, sans-serif;"+
                    "Nastaliq=irannastaliqregular, sans-serif;"+
                    "Samman=sammanregular;"; 
```

现在发生的事情是，它`Samman`确实显示在用户可以在 TinyMCE 中选择的字体列表中，但是当我选择这种字体时，文本没有任何反应，文本只是保留在它使用的任何现有字体上。

当我使用浏览器的调试器时，果然可以看到 TinyMCE 的 iframe 确实包含`css/fonts.css`提到 Samman 的正确文件。但是当我在 TinyMCE 中更改字体时，我可以在调试器中看到该文本的`span`样式`font-family`没有改变。如果我选择另一种字体，`span`样式会发生变化，但如果我选择`Samman`，则不会发生任何事情。

自从我添加字体以来已经有一段时间了，所以也许我只是忘记了一些东西？但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T10:18:50.983

好的，我发现了问题。

我看到列表中字体列表的最后一行`theme_advanced_fonts`是这样的：

```
 "Mothanna=mothannaregular, sans-serif;"+
                "Nastaliq=irannastaliqregular, sans-serif;"+
                "Samman=sammanregular;", 
```

我所要做的就是去掉最后的分号，所以新字体显示得很好：

```
 "Mothanna=mothannaregular, sans-serif;"+
                "Nastaliq=irannastaliqregular, sans-serif;"+
                "Samman=sammanregular", 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-21T05:00:06.750

不要因为更多的代码而感到压力。只需编写一些简单的函数即可在您的帖子编辑器上获得所需的字体。

[http://kvcodes.com/2014/05/how-to-add-google-webfonts-to-wordpress-tinymce-editor/](http://kvcodes.com/2014/05/how-to-add-google-webfonts-to-wordpress-tinymce-editor/)

# jquery - 修改 jquery 函数以匹配 textarea

> ID：14170760
> 
> 赞同：0
> 
> 时间：2013-01-05T10:10:26.927
> 
> 标签：jquery

我使用这个 jquery 函数在表单的输入中显示提示。现在我需要修改这个函数来在 textarea 中显示一个提示。任何人都可以帮我做到这一点。？

```
function textboxHint(id, options) {
    var o = { selector: 'input:text[title]', blurClass:'blur' };
    $e = $('#'+id);
    $.extend(true, o, options || {});

    if ($e.is(':text')) {
      if (!$e.attr('title')) $e = null;
    } else {
      $e = $e.find(o.selector);
    }
    if ($e) {
      $e.each(function() {
      var $t = $(this);
      if ($.trim($t.val()).length == 0) { $t.val($t.attr('title')); }
      if ($t.val() == $t.attr('title')) {
    $t.addClass(o.blurClass);
      } else {
        $t.removeClass(o.blurClass);
      }

     $t.focus(function() {
    if ($.trim($t.val()) == $t.attr('title')) {
      $t.val('');
      $t.removeClass(o.blurClass);
    }
    }).blur(function() {
      var val = $.trim($t.val());
      if (val.length == 0 || val == $t.attr('title')) {
        $t.val($t.attr('title'));
        $t.addClass(o.blurClass);
      }
    });

         // empty the text box on form submit               
    $(this.form).submit(function(){
      if ($.trim($t.val()) == $t.attr('title')) $t.val('');
    });
   });
 }
} 
```

我像这样在我的脚本中简单地使用它..

```
textboxHint("block1"); 
```

注意：我使用 TITLE 属性来添加提示..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:12:18.287

我认为您只需要`textarea`像这样添加到您的选择中：

```
var o = { selector: 'input:text[title], textarea[title]', blurClass:'blur' }; 
```

# asp.net-mvc - 当我添加新行时，resx Designer.cs 文件不再更新

> ID：14170761
> 
> 赞同：0
> 
> 时间：2013-01-05T10:10:30.797
> 
> 标签：asp.net-mvc, resources

我最近将我的 MVC 应用程序从 Visual Studio 2010 迁移到 Visual Studio 2012，从那时起，每当我在任何 .resx 文件中添加新行时，资源设计器都不会更新，我也无法访问新的在代码中通过其相应的属性创建资源行。所有其他资源条目（在迁移到 VS 2012 之前创建）都可以访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:55:50.173

经过多次尝试和大量时间损失，我设法让它工作。我对每个资源文件所做的是**将自定义工具修改**为 PublicResXFileCodeGenerator（来自 GlobalResourceProxyGenerator），**将构建操作修改**为嵌入式资源（来自内容），**将自定义工具命名空间修改**为类似于 MyWebAppNamespace 的内容。**App_GlobalResources**。

在前两个步骤之后，我可以使用 DesignerClass.ResourceKeyName 属性访问资源，但不能通过调用 DesignerClass.ResourceManager.GetString("ResourceKeyName") 来访问资源，这会引发异常，告诉我在命名空间 MyWebAppNamespace.App_GlobalResources。即使我必须重命名整个应用程序中的所有资源命名空间，这第三步也解决了我的所有问题。

# python - 在 SOAPpy (WSDL) 中验证输入数据

> ID：14170762
> 
> 赞同：0
> 
> 时间：2013-01-05T10:10:40.703
> 
> 标签：python, wsdl, soappy

我的 client.py 看起来像这样：

```
from SOAPpy import WSDL
wsdlFile = 'D:/Downloads/w1.1.wsdl'
server = WSDL.Proxy(wsdlFile) 
server.soapproxy.config.dumpSOAPOut = 1     
server.soapproxy.config.dumpSOAPIn = 1
result = server.packageRequest({'wrongParameter': 'wrong value'})
print result 
```

和我的 server.py：

```
import SOAPpy
def packageRequest(data):
    return "Hello World"
server = SOAPpy.SOAPServer(("localhost", 8080))
server.registerFunction(packageRequest)
server.serve_forever() 
```

最重要的是**w1.1.wsdl**，因为它定义了例如输入数据的限制：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- edited with XMLSpy v2013 sp1 (http://www.altova.com) by Krzysztof (Wroclaw University of Technology) -->
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tns="http://new.webservice.namespace" targetNamespace="http://new.webservice.namespace">
    <wsdl:types>
        <xs:schema targetNamespace="http://new.webservice.namespace" elementFormDefault="qualified"/>
        <xsi:schema xmlns:xsi="http://www.w3.org/2001/XMLSchema" targetNamespace="http://new.webservice.namespace" elementFormDefault="qualified">
            <xsi:element name="request">
                <xsi:complexType>
                    <xsi:sequence>
                        <xsi:element name="info">
                            <xsi:complexType>
                                <xsi:attribute name="company" type="xs:integer" use="required"/>
                                <xsi:attribute name="packageId" type="xs:integer" use="required"/>
                                <xsi:attribute name="storehouseId" type="xs:integer" use="required"/>
                                <xsi:attribute name="giving" type="xs:dateTime" use="required"/>
                                <xsi:attribute name="send" type="xs:dateTime" use="required"/>
                                <xsi:attribute name="weight" type="xs:integer" use="required"/>
                                <xsi:attribute name="unit" type="xs:string" use="required"/>
                            </xsi:complexType>
                        </xsi:element>
                        <xsi:element name="recipient">
                            <xsi:complexType>
                                <xsi:sequence>
                                    <xsi:element name="firstname" type="xs:string"/>
                                    <xsi:element name="lastname" type="xs:integer"/>
                                    <xsi:element name="street" type="xs:string"/>
                                    <xsi:element name="city" type="xs:string"/>
                                    <xsi:element name="zip">
                                        <xsi:simpleType>
                                            <xsi:restriction base="xs:string">
                                                <xsi:pattern value="[0-9]{2}-[0-9]{3}"/>
                                            </xsi:restriction>
                                        </xsi:simpleType>
                                    </xsi:element>
                                </xsi:sequence>
                            </xsi:complexType>
                        </xsi:element>
                        <xsi:element name="sender">
                            <xsi:complexType>
                                <xsi:sequence>
                                    <xsi:element name="firstname" type="xs:string"/>
                                    <xsi:element name="lastname" type="xs:string"/>
                                    <xsi:element name="street" type="xs:string"/>
                                    <xsi:element name="city" type="xs:string"/>
                                    <xsi:element name="zip">
                                        <xsi:simpleType>
                                            <xsi:restriction base="xs:string">
                                                <xsi:pattern value="[0-9]{2}-[0-9]{3}"/>
                                            </xsi:restriction>
                                        </xsi:simpleType>
                                    </xsi:element>
                                </xsi:sequence>
                            </xsi:complexType>
                        </xsi:element>
                    </xsi:sequence>
                </xsi:complexType>
            </xsi:element>
        </xsi:schema>
        <xs:schema xmlns:xsi="http://www.w3.org/2001/XMLSchema" targetNamespace="http://new.webservice.namespace" elementFormDefault="qualified">
            <xs:element name="response">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="companyId"/>
                        <xs:element name="packageId"/>
                        <xs:element name="packageGivingDate"/>
                        <xs:element name="responseSendDate"/>
                        <xs:element name="packageWeight"/>
                        <xs:element name="packageUnit"/>
                        <xs:element name="recipient">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="firstName"/>
                                    <xs:element name="lastName"/>
                                    <xs:element name="city"/>
                                    <xs:element name="zip"/>
                                    <xs:element name="street"/>
                                </xs:sequence>
                            </xs:complexType>
                        </xs:element>
                        <xs:element name="sender">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="firstName"/>
                                    <xs:element name="lastName"/>
                                    <xs:element name="city"/>
                                    <xs:element name="zip"/>
                                    <xs:element name="street"/>
                                </xs:sequence>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:schema>
    </wsdl:types>
    <wsdl:message name="request">
        <wsdl:part name="parameter" element="tns:request"/>
    </wsdl:message>
    <wsdl:message name="response">
        <wsdl:part name="parameter" element="tns:response"/>
    </wsdl:message>
    <wsdl:portType name="NewPortType">
        <wsdl:operation name="packageRequest">
            <wsdl:input message="tns:request"/>
            <wsdl:output message="tns:response"/>
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding name="NewBinding" type="tns:NewPortType">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
        <wsdl:operation name="packageRequest">
            <soap:operation soapAction="packageRequest" style="document"/>
            <wsdl:input>
                <soap:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="NewService">
        <wsdl:port name="NewPort" binding="tns:NewBinding">
            <soap:address location="http://localhost:8080/"/>
        </wsdl:port>
    </wsdl:service>
</wsdl:definitions> 
```

如果我运行我的 client.py，我会得到响应“Hello World！”。为什么？我预计输入数据错误的错误（WDSL 定义了诸如 company、packageId、storehouseId 之类的输入数据......但我只给出了无用的字典*{'wrongParameter': 'wrong value'}*）

我做错了什么？为什么 WSDL 验证不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:17:06.667

> 为什么 WSDL 验证不起作用？

因为您的 Web 服务接收一些数据并输出“Hello World！” 细绳。这就是它所做的一切。

只是为了明白我的意思，将您的服务器代码更改为此并查看 SOAP 消息和您得到的结果：

```
import SOAPpy

def packageRequest(data):
    result = {"HelloWorld": "Message from server"}
    if isinstance(data, str):
        result["plainString"] = data
    else:
        result.update([(k, v) for k, v in data.__dict__.iteritems() if not k.startswith("_")])
    return result

server = SOAPpy.SOAPServer(("localhost", 8080))
server.registerFunction(packageRequest)
server.serve_forever() 
```

**您必须自己正确实现该`packageRequest`方法并处理验证。WSDL 与它无关。**

Web 服务是在网络上公开的一组操作。它接受格式正确的 SOAP 消息并输出 SOAP 消息。但是，如果客户端需要调用您的 Web 服务，它如何知道如何格式化消息？输入 WSDL！

您使用 WSDL 来描述客户端成功与您的 Web 服务交互所必须遵循的契约。它被用作一种文档形式和一种自动生成知道如何调用 Web 服务的客户端存根的方式。

您还可以使用 WSDL 生成服务器框架，但我不知道 SOAPpy 是否可以这样做（我认为它只能创建客户端代理），因此您需要自己进行实现并拒绝格式错误的消息。

# seo - WP SEO插件的内在机制

> ID：14170764
> 
> 赞同：0
> 
> 时间：2013-01-05T10:10:49.223
> 
> 标签：seo, wordpress

这更像是一个概念性问题，但它具有实际影响。

通过各种 SEO 插件，我没有发现应该嵌入到实际 HTML 页面中并回显元数据的 PHP 标记。那么它是如何工作的呢？

仅将其保存到数据库似乎还不够。插件将 SEO 数据“注入”到页面的机制是什么？如果我在页面中有自己的`meta`标签怎么办 - 它会覆盖插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:17:42.583

这些机制通常是来自 wordpress[插件 API的](http://codex.wordpress.org/Plugin_API)[过滤](http://codex.wordpress.org/Plugin_API#Filters)器和操作[挂钩](http://codex.wordpress.org/Plugin_API#Actions)

这不是特定于 SEO 插件，而是几乎所有改变实际内容的插件。

简单的说 ：

> 动作挂钩

动作钩子是在 WordPress 核心本身、某些插件或主题给您一个特殊的“断点”来插入代码以执行某些操作或在触发某个操作时更改某些内容时使用的设计。

> 过滤器挂钩：

Filter Hooks 与 Action Hooks 非常相似，但它们所做的是接收一个值并可能返回该值的修改版本。

**更新我**

看这个简单的例子（把你的主题的function.php

```
add_filter( 'the_content', 'my_the_content_filter' );

function my_the_content_filter(){

echo ':::::: THIS CONTENT WILL BE ADDED TO ANY POST :::::';

} 
```

或这个 ：

```
add_filter( 'the_title', 'my_the_title_filter' );

function my_the_title_filter(){
echo ':::::: THIS CONTENT WILL BE ADDED TO ANY TITLE :::::';
} 
```

**更新二**

但是，如果您的问题实际上是关于 SEO 的工作原理，而不是插件本身：SEO 是一个很大的主题，但简单地说，它是关于元标签、标题、描述、链接、rels 等......这就是SEO 插件正在发生变化。

他们改变的东西像 -

*   为图像添加自动描述和标题
*   更改页面标题
*   通过帖子添加元标记
*   等等等等……

..-但它们都使用上述机制*`actions`和`filters`钩子*。*您在代码中看不到*它的事实是您不知道要查找什么。

尝试在插件激活之前和之后保存页面源，然后对两者进行比较。你会看到差异...

# jquery - jquery，更改父 td 的 css 类

> ID：14170766
> 
> 赞同：1
> 
> 时间：2013-01-05T10:10:52.013
> 
> 标签：jquery, jquery-ui, jquery-plugins, fullcalendar

我有这样的表：

```
<table class="content">
<tbody>
   <tr class="fc-first">

      <td class="fc-widget-content fc-day0 fc-first">
    <div>
        <div class="fc-day-number">1</div>
        <div class="fc-day-content">
            <div style="position:relative"> </div>
        </div>
    </div>
      </td>
      <td class="fc-widget-content fc-day1">
    <div>
        <div class="fc-day-number">2</div>
        <div class="fc-day-content">
            <div style="position:relative"> </div>
        </div>
    </div>
      </td>
      <td class="fc-widget-content fc-day2">
    <div>
        <div class="fc-day-number">3</div>
        <div class="fc-day-content">
            <div style="position:relative"> </div>
        </div>
    </div>
      </td>
   </tr>
   <tr class="fc-week1"></tr>
   <tr class="fc-week2"></tr>
</tbody>
</table> 
```

并且我想添加 CSS 类以仅基于 到目前为止`td`包含我的 jquery 代码的内容：`<div> class"fc-day-number">2</div>`

```
var content_td;
var content = $('.content' );
content_td = content.find('td'); 
```

我以为我可以使用嵌套查找，但不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:26:05.103

你需要的是`.closest()`方法

```
$('table.content td[class="fc-day-number"]').closest('td').addClass('SOME_CLASS'); 
```

和你的固定 HTML

```
<table class="content">
<tbody>

   <tr class="fc-first">

    <td class="fc-widget-content fc-day0 fc-first">
      <div>
        <div class="fc-day-number">1</div>
        <div class="fc-day-content">
            <div style="position:relative"> </div>
        </div>
      </div>
    </td>
    <td class="fc-widget-content fc-day1">
      <div>
        <div class="fc-day-number">2</div>
        <div class="fc-day-content">
            <div style="position:relative"> </div>
        </div>
      </div>
    </td>
    <td class="fc-widget-content fc-day2">
      <div>
        <div class="fc-day-number">3</div>
        <div class="fc-day-content">
            <div style="position:relative"> </div>
        </div>
      </div>
    </td>

   </tr>

   <tr class="fc-week1"></tr>
   <tr class="fc-week2"></tr>

</tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T10:12:43.117

确保引用类选择器，使其成为字符串文字。另外，将 content_td 设为变量。

```
var content = $(".content"); //Quotes added
var content_td = content.find('td'); 
```

# php - 如何使用不同的 html 输入自动填充 html 输入

> ID：14170768
> 
> 赞同：-3
> 
> 时间：2013-01-05T10:11:16.553
> 
> 标签：php, html, mysql

```
<html>
<input name='name'>
<input name='handphone'>
</html> 
```

如果用户键入名称并且他们存储在 db 上的“手机”数据将显示在第二个输入表单上，我需要一些脚本

例如，如果完成

```
<form>
<input name='name' value='surya'>
<input name='handphone' value='081392111098'>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:58:03.850

我想你需要那个`if Any User type name input and if name is in database then headphone input autofill from database`。为此，您必须使用`ajax`或`jQuery`。

谢谢

# jquery - 如何检查是否对表单进行了更改

> ID：14170769
> 
> 赞同：2
> 
> 时间：2013-01-05T10:11:23.520
> 
> 标签：jquery, ruby-on-rails, user-interface

我们有一个包含多个字段的简单表单，如果用户进行任何修改，我们应该显示“保存”按钮，否则不应该显示。当用户在下拉列表中选择某些内容并随后返回到原始值（例如，从 ValA 到 ValB，然后最终到 ValA）时，您如何处理场景。我们应该如何在 Rails 应用程序中处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:36:21.953

**编辑**

我做了一些更新。这不是最漂亮的，但已经晚了，这是我目前能做的最好的。

添加了辅助函数来评估值并与对象中的现有值进行比较。如果存在，我们迭代一个变量。如果表单元素的长度与默认值的出现次数匹配，那么我们隐藏显示按钮。我在函数中允许了 2 个参数，我们想要检查值的元素，以及我们希望切换可见性的元素。

希望这会有所帮助。

```
$(function () {
  var defaults = {},
      eles =  $('form *').filter(':input'),
      btn = $('.submit');
  function checkEmpty(objs, toggle){
    var len = objs.length,
        occurences = 0;
    $.each(objs, function(i,obj){
      if(defaults[i].value == obj.value){
          occurences++;
      }
    });
    if(len == occurences){
        toggle.hide();
    }else{
        toggle.show(); 
    }
  }
  eles.each(function (i, ele) {
    defaults[i] = {
      'id': this.id,
      'value': this.value
    };
  });
  eles.on('keyup propertychange change paste input focusout', function (e) {
    checkEmpty(eles, btn);
  });
}); 
```

[您的工作示例](http://jsbin.com/iwihoz/9/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T10:35:35.390

我希望 jquery-form-observe 插件能满足你的要求。签出这个

[http://code.google.com/p/jquery-form-observe/](http://code.google.com/p/jquery-form-observe/)

# c++ - 未解析的外部符号“public: virtual struct QMetaObject const * __thiscall Parent

> ID：14170770
> 
> 赞同：81
> 
> 时间：2013-01-05T10:11:25.960
> 
> 标签：c++, qt, qobject

我从 QObject 继承了一个类：

```
class Parent: public QObject
{
    Q_OBJECT
    QObject* cl;

public:
    Parent(QObject *parent=0):QObject(parent) {
        cl = NULL;
    }

    QObject* getCl() const {
        return cl;
    }
    void setCl(QObject *obj) {
        cl = obj;
    }
}; 
```

但是当我写：

```
Parent ev; 
```

我收到以下错误：

```
main.obj:-1: error: LNK2001: unresolved external symbol "public: virtual struct QMetaObject const * __thiscall Parent::metaObject(void)const " (?metaObject@Parent@@UBEPBUQMetaObject@@XZ)

main.obj:-1: error: LNK2001: unresolved external symbol "public: virtual void * __thiscall Parent::qt_metacast(char const *)" (?qt_metacast@Parent@@UAEPAXPBD@Z)

main.obj:-1: error: LNK2001: unresolved external symbol "public: virtual int __thiscall Parent::qt_metacall(enum QMetaObject::Call,int,void * *)" (?qt_metacall@Parent@@UAEHW4Call@QMetaObject@@HPAPAX@Z) 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-05T14:35:12.107

您应该删除`debug`应用程序的文件夹并再次运行它以更正此问题。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-04-09T22:10:58.500

如果您使用的是 Visual Studio，请`Q_OBJECT`从头文件中删除该行，保存文件，放`Q_OBJECT`回头文件，再次保存文件。这应该会生成`moc_*`文件，并且应该正确构建和链接。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-07-03T06:22:01.993

我注意到一些答案是基于 Visual Studio 的。

这个答案基于 Qt Creator。

不像名字所暗示的那样，`Rebuild Project`不会消灭一切并从头开始构建。如果您最近将`QObject`（和/或 Q_OBJECT）添加到您的班级，您将不得不`qmake`再次运行，例如

1.  清洁项目
2.  运行 qmake
3.  构建项目

这是因为，默认情况下，`qmake`仅当您对解决方案进行重大更改（例如添加新源文件或修改`.pro`文件）时才会运行。如果您对现有文件进行编辑，它不知道它需要运行`qmake`.

作为后备，为了暴力 Qt 从头开始​​构建所有内容，请删除`Debug`or`Release`文件夹。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-27T00:36:45.033

所以问题是我需要 Qt MOC 编译器来编译我的 .h 文件。这对于扩展 QObject 或其子之一的任何类都是必需的。修复涉及（对我而言）右键单击头文件，选择属性，并将项目类型设置为“Qt MOC 输入”，然后在头上点击“编译”，然后将生成的 moc_myfilename.cpp 文件添加到我的项目。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-07-12T09:09:44.807

我手动将 cpp/ui 文件添加到我的项目中，但忘记将头文件显式添加为头文件。现在，在编译时，我收到了与上面类似的错误消息，并且 moc_*.cpp 文件未在构建的调试（或发布）目录中生成。这不是一个明显的错误，qmake 没有抱怨，除了链接器消息之外我没有收到任何错误。

因此，如果有人再次遇到同样的问题（或犯同样的复制和粘贴错误）：**确保头文件也已添加到您的项目文件中**

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-12-25T12:07:42.880

如果您的 moc 文件是在 Visual Studio 项目中生成的，请尝试将它们包含到项目中，如果它们未包含在项目中，则重新构建。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-08-31T02:39:55.110

我在 Visual Studio 中遇到了同样的问题，并通过以下步骤解决了它：

1.  在解决方案资源管理器中右键单击头文件
2.  特性
3.  将“项目类型”更改为“自定义构建工具”

然后在自定义构建工具配置中：

1.  转到一般
2.  将“命令行”设置为：

    "$(QTDIR)\bin\moc.exe" "%(FullPath)" -o ".\GeneratedFiles\$(ConfigurationName)\moc_%(文件名).cpp" "-fStdAfx.h" "-f../ ../../src/ **FileName.h** " -DUNICODE -DWIN32 -DWIN64 -DQT_DLL -DQT_NO_DEBUG -DNDEBUG -DQT_CORE_LIB -DQT_GUI_LIB -DQT_WIDGETS_LIB -DQT_NETWORK_LIB -DWIN32_LEAN_AND_MEAN -DDIS_VERSION=7 -D_MATH_DEFINES_DEBUG "-I-I-DEFINES_DEFINED" .\GeneratedFiles" "-I." "-I$(QTDIR)\include" "-I.\GeneratedFiles\$(ConfigurationName)。" "-I$(QTDIR)\include\QtCore" "-I$(QTDIR)\include\QtGui" "-I$(QTDIR)\include\QtNetwork"

3.  将“输出”设置为：

    .\GeneratedFiles\$(ConfigurationName)\moc_%(Filename).cpp

4.  将“附加依赖项”设置为：
    $(QTDIR)\bin\moc.exe;%(FullPath)

* * *

您的确切值可能不同。它们通常通过 Qt 插件应用。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-05-18T09:18:15.027

当我的 cpp 文件中有 Q_OBJECT 类定义时，我在 Visual Studio 2012 中遇到了这个问题。将类定义移动到头文件解决了这个问题。

看起来应该可以通过将 cpp 文件添加到 moc 来支持 cpp 文件中的 Q_OBJECT 类，但我没有尝试过。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-10-28T03:16:04.533

我使用 CMake 来管理 Qt 项目，并且需要在 QT4_WRAP_CPP 调用下添加新的 Q_OBJECT。这将生成 moc_*.cxx 以包含在项目中并清理未解析的外部。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-11-30T02:32:23.677

我的问题是我的一个使用 Qt 宏的文件没有被 moc'ed。我发现，Visual Studio 的 Qt 插件无法识别`Q_NAMESPACE`宏，因此不会将文件添加到 moc'ing 列表中。

所以我使用[这个答案](https://stackoverflow.com/a/43533605/6411540)中的解决方案将文件添加到麦克风列表中：

> 您应该找到一个成功生成“moc_*”的.h文件，并将“自定义构建工具->常规”中的所有内容复制到新的.h文件设置页面。

请注意`Debug`和`Release`-Mode 的不同选项。

> 之后，构建您的项目。

在-Mode`Debug`中构建一次`Release`

> 最后，将生成的“moc_*”文件添加到您的项目中。

现在，“moc_filename.cpp”应该在`Generated Files\Debug`and中`Generated Files\Release`。

右键单击它们中的每一个并更改它们的属性：

*   中的文件`Debug`： 将配置更改为`Release`，然后更改`General->Excluded from build`为`yes`.
*   中的文件`Release`： 将配置更改为`Debug`，然后更改`General->Excluded from build`为`yes`.

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-11-17T18:56:34.207

在链式 CMake 目标的情况下面临此问题。`CMAKE_AUTOMOC`事实证明，即使在不直接（传递）使用 Qt 的目标中，我也必须启用。事实证明，`CMAKE_AUTOMOC`不能`find_package(QtX)`在同一`CMakeLists.txt`或`CMakeLists.txt`父级中使用 w/o。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-07-10T09:31:06.267

就我而言（将 QtAdd-in 与 VS2012 和 Qt v4.8.4 一起使用），上述建议均无效。由于某种原因，VS 无法生成正确的 moc 文件（构建输出：未找到相关类。未生成输出。）当我手动编译相关头文件（将 qt moc 设置为编译器并单击“编译”）时，它产生了空 moc 文件.

起作用的是从命令行（moc -o moc_SomeClass.cpp SomeClass.h）编译所有必要的 mocs，然后在 GeneratedFiles 文件夹中替换错误的 mocs。

这只是成功构建项目的解决方法（对于大型项目来说不是一种方便的方法），但并不能真正解释奇怪的 VS/QtAdd-in 行为。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-01-22T08:22:07.607

将 QtAdd-in 与 VS2010 一起使用，我意识到 moc_*.cpp 文件已在 GeneratedFiles/Debug 文件夹中更新，尽管我处于发布模式。将文件复制到 Release 文件夹对我有用。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-03-06T22:37:34.240

**在使用“ PIMPL** ”（私有实现）编程模式时，我在 Qt 中使用“私有类”时遇到了这个问题。Qt 在整个源代码中都使用了这个模型。我自己已经非常喜欢它了。

这种技术涉及在公共头文件中使用“私有”前向声明的类，该类将被“公共”类（即它的“父”）使用。然后父级有一个指向私有类实例的指针作为数据成员。

“私有”类完全在公共类的 cpp 文件中定义。私有类没有头文件。

所有“肮脏的工作”都是通过该私人课程完成的。这隐藏了公共类的所有实现，通常包括所有其他私有成员（数据和函数）。

我强烈建议您学习 PIMPL 模式——尤其是如果您要阅读内部 Qt 源代码。

在不进一步解释该编码风格的情况下，这是与此问题相关的要点...要使`Q_OBJECT`宏在 cpp 内工作，以使“私有”类成为可以使用信号/插槽等的 QObject，**您需要明确将 .moc 包含到 cpp 内的公共类中**：

```
#include "MyPublicClass.moc" 
```

您可以忽略有关此行的任何 IDE 警告。

我不确定它是否完全重要，但我总是看到在私有类定义之后完成的包含，而不是在 cpp 的顶部（就像通常放置的包含一样）。因此，cpp 布局如下所示：

1.  “正常”包括已定义。
2.  定义了私有类。
3.  公共类的 moc 是#included。
4.  定义了公共类实现。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-02-06T08:48:37.827

视觉工作室 2017。

我已将文件添加到已设置 Qt 项目并收到此错误。我如何修复它：

右键单击解决方案资源管理器 *属性中的标题...* ->*配置属性*->*常规*->*项目类型* 从*C/C++ 标题*更改为*Qt 元对象编译器（moc）*

瞧：）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-10-03T20:27:38.530

我最近从 MingW 切换到 MSVC 时发生了这种情况。我有一个原型类/结构列为类，MingW 不介意。

MSVC 肯定看到了原型设计之间`class`的差异。`struct`

希望有一天能帮助别人。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-02-19T16:35:05.670

就我而言，上述方法均无效，但这完全是我的错误。

我在 .h 文件中覆盖了虚函数（声明了它们），但从未在 .cpp 中定义它们 :)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-01-11T14:36:17.350

我通过将其添加到我的头文件中解决了我的问题：

```
#ifndef MYCLASSNAME_H
#define MYCLASSNAME_H

... // all the header file content.

#endif 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-08-12T19:02:51.290

在 VS 2013 环境中，任何一个答案都适用于我。*我最终通过从项目中删除.h/* .cpp 并将其添加回来 解决了这个问题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-07-09T17:59:43.790

我正在使用集成的 Perforce p4v 客户端在 VS2015 中工作。就我而言，Perforce 尝试将 moc 文件添加到 depo，当我恢复此操作时，Perforce 从项目中删除了这个 moc 文件并将其删除。该文件在下一次编译后重新创建，但它没有包含在项目中，我必须手动将其添加到生成的文件中，当我终于明白问题出在哪里时。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-06-29T17:28:09.683

我有同样的问题，我的解决方案是编码（我的带有“UTF16LE BOM”的文件不能用 moc.exe 生成），你创建另一个带有 ASCII 编码的文件并且它可以工作。

HxD HexEditor 可以帮助您查看编码。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-07-23T12:30:48.153

我知道这是一个非常古老的问题，但它似乎仍然很有趣（过去几个月我至少来过这里 4 或 5 次）并且似乎我找到了另一个可能导致此错误的原因。

在我的头文件中，我输入错误：

```
#include "MyClass.h"" 
```

只有在检查了整个输出之后，我才发现编译器在那一行发出了警告。

现在我删除了额外的引号，我的 QObject 可以完美编译！

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-09-13T01:38:37.660

对我来说，这就是原因：QT的项目文件中没有包含一些头文件或源文件

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-12-11T14:48:09.113

在我的情况下，我在项目的子文件夹中有问题 QObject 祖先的 .h 和 .cpp 文件。当我将它们移到 CMakeLists.txt（项目根文件夹）旁边时，它成功链接。我可能缺少一些 CMake 命令来在子目录中包含 mocs fot 文件。

# php - shift+空格的正则表达式

> ID：14170771
> 
> 赞同：0
> 
> 时间：2013-01-05T10:11:36.990
> 
> 标签：php

我有一个 UTF8 编码的字符串，在字符之间有很多 shift+space 字符，我想用空格替换它们！怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:35:09.447

最简单的方法是在正则表达式中使用半个空格：

```
$new = preg_replace("/ /", "-SPACE-", $yourstring); 
```

前提是您的源文件是 UTF8 编码的（因此正则表达式*中斜线之间的内容*实际上是 UTF8 半空格），**并且**您的 PHP 具有完整的 UTF8 支持（我相信所有安装都是从 5.0 之后的某个时间开始的，但您永远不知道... ）。

如果您不能这样做并且需要 UTF8 十六进制表示，您可以对文件（或其中包含字符的最短文件）进行十六进制转储并找出代码是什么。您会看到类似 C3 A0 的内容，并且您会知道可以将`/...\xc3\xa0.../`其用作正则表达式；请记住，反斜杠可能需要转义。

否则，你也许可以做这样的事情——我使用另一个 UTF8 字符，因为我不知道你的编辑器使用什么作为“半空格”——你只需准备一个包含该字符的字符串并在 PHP 中对其进行解码。

```
<?php
    $string = "é"; // THE SOURCE FILE MUST BE UTF8 CODED, OF COURSE...
    $hex    = bin2hex($string);
    $seq    = str_split($hex, 2);
    $search = "\\x".implode("\\x", $seq);

    print "The sequence is $search .\n";
?> 
```

现在，如果您想将其用于替换正则表达式，只需将其插入：

```
 print preg_replace("/$search/", "(E)", "Déja vu"); 
```

在我的系统上输出“D(E)ja vu”。

**注意**：你*确定*你需要一个正则表达式吗？`str_replace`可能更快，根本不需要十六进制代码：

```
$new = str_replace(" ", " ", $old); // The first space is really a "half space" 
```

**更新**：您也可以直接在 MySQL 中执行上述操作（首先备份数据库；-)）：

```
UPDATE table SET field = REPLACE(field, '<A HALF SPACE HERE>', ' '); 
```

（您可能需要先发出一个`SET NAMES UTF8;`，以确定库字符编码）。

# ios - 在使用 CoreData 的 TableView 中将行移至底部

> ID：14170772
> 
> 赞同：1
> 
> 时间：2013-01-05T10:11:43.540
> 
> 标签：ios, uitableview, ios5, core-data, ios6

在我的应用程序中，我有一个文件夹文件（一对多关系）。因此，当我打开我的应用程序时，我的 firstViewController 包含所有文件，当单击每个文件夹时，它会打开一个 tableViewController 显示该文件夹中的文件。

现在，每当我滑动任何行时，它都会移动到底行并且表格会相应更新，下一个滑动行将位于第一个滑动行的上方。

例如，目前如果我的表包含

```
0 1 2 3
A B C D 
```

刷A后

```
0 1 2   3
B C D **A** 
```

刷B后

```
0 1   2 3
C D **B A** 
```

等等，

要执行此功能，我还应该更新 NSOrderedSet，如下所示

```
for (int i = 0; i < [self.folder.file count]; i++)
        {
            File *file =  [self.folder.file objectAtIndex:i];
            if(file.completedStatus == false)
            {
                m_position = i;
                m_finalIndexPath = [NSIndexPath indexPathForRow:i inSection:0];
            }
        }

        file.completedStatus = YES;

        id obj = [self.folder. file objectAtIndex:row];

        NSMutableOrderedSet *files = [self.folder.file mutableCopy];
        [files removeObjectAtIndex:row];
        [files insertObject:obj atIndex:m_position];

        NSIndexPath *currentIndexPath = [NSIndexPath indexPathForRow:row inSection:0];
        [m_tableView moveRowAtIndexPath:currentIndexPath toIndexPath:m_finalIndexPath];         
        self.folder.file = files;       
         }
         [self.managedObjectContext save:nil];    
         [m_tableView reloadData]; 
```

这在此视图中运行良好，这里 self.folder 是用户单击的特定文件夹

现在我有另一个名为 TestViewController 的 ViewController ，其中有一些文件对象，无论它们存在于哪个文件夹中。我已经用这些文件填充了这个 TestViewController 的表格，现在在这里，当我滑动单元格时，它们会改变颜色但不会像上面那样移动它们的位置

例如

```
0 1 2 3
A C B D

after swiping A and B

  0   1   2   3
**A** C **B** D 
```

现在这里A可以属于文件夹1，B可以属于文件夹2，

当我关闭（关闭）这个 TestViewController 时，应该发生的是

a) 默认情况下它向我显示 fileViewController b) 文件 A 的颜色应该改变并且它应该通过检查是否已经有任何滑动单元格移动到一个位置。如果是，则应将其放置在其上方或底部。

c) 颜色 B 类似。

问候兰吉特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:58:50.707

兰吉特，

关于你的问题，我无法理解你在这里问什么。所以，请提供一些其他的细节。

要知道特定文件所属的文件夹，这很容易实现。

如果您在文件和文件夹之间设置了反向关系，只需访问该关系即可。

例如，如果调用反向关系`toFolder`，您可以检索当前文件夹，如

```
Folder* currentFolder = currentFile.toFolder; // or access it through KVC 
```

要创建反向关系，请看这里：[核心数据结构是否使用多个实体？](https://stackoverflow.com/questions/14072475/core-data-structure-use-multiple-entities-or-not/14072768#14072768)

# r - 从`if`函数解释“条件长度> 1”警告

> ID：14170778
> 
> 赞同：42
> 
> 时间：2013-01-05T10:12:23.337
> 
> 标签：r, if-statement

我有一个数组：

```
a <- c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0) 
```

并希望实现以下功能：

```
w<-function(a){
  if (a>0){
    a/sum(a)
  }
  else 1
} 
```

此函数想检查是否有任何`a`大于 0 的值，如果是，则将每个元素除以总数之和。

否则它应该只记录 1。

我收到以下警告消息：

```
 Warning message:
 In if (a > 0) { :
 the condition has length > 1 and only the first element will be used 
```

如何更正该功能？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-05T10:25:47.573

也许你想要`ifelse`：

```
a <- c(1,1,1,1,0,0,0,0,2,2)
ifelse(a>0,a/sum(a),1)

 [1] 0.125 0.125 0.125 0.125 1.000 1.000 1.000 1.000
 [9] 0.250 0.250 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-01-05T10:29:32.343

`if`语句未向量化。对于向量化的 if 语句，您应该使用`ifelse`. 在你的情况下，写就足够了

```
w <- function(a){
if (any(a>0)){
  a/sum(a)
}
  else 1
} 
```

或简短的矢量化版本

```
ifelse(a > 0, a/sum(a), 1) 
```

这取决于您要使用哪个，因为第一个函数给出长度为 1 的输出向量（在 else 部分）并`ifelse`给出长度等于长度的输出向量`a`。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-04-30T13:56:01.467

只是在整个讨论中添加一个关于为什么会出现这个警告的观点（我以前不清楚）。如前所述，之所以得到这个，是因为在这种情况下，'a' 是一个向量，不等式 'a>0' 会产生另一个 TRUE 和 FALSE 向量（其中 'a' 是否 >0）。

如果您想测试是否有任何值 'a>0'，您可以使用函数 - 'any' 或 'all'

最好的

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-01-05T12:42:10.523

这是一个没有 的简单方法`ifelse`：

```
(a/sum(a))^(a>0) 
```

一个例子：

```
a <- c(0, 1, 0, 0, 1, 1, 0, 1)

(a/sum(a))^(a>0)

[1] 1.00 0.25 1.00 1.00 0.25 0.25 1.00 0.25 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-11-13T00:22:28.743

我遇到这个问题的方式是，当我尝试做类似的事情时，我正在定义一个函数，并且像其他人指出的那样用数组调用它

你可以做这样的事情，但是与 Sven 的方法相比，在这种情况下它不太优雅。

```
sapply(a, function(x) afunc(x))

afunc<-function(a){
  if (a>0){
    a/sum(a)
  }
  else 1
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-31T11:28:17.523

`lapply`正常创建函数后使用函数。

```
lapply(x="your input", fun="insert your function name") 
```

`lapply`给出一个列表，所以使用`unlist`函数将它们从函数中取出

```
unlist(lapply(a,w)) 
```

# windows - Qt 没有找到 windows.h

> ID：14170787
> 
> 赞同：4
> 
> 时间：2013-01-05T10:13:16.077
> 
> 标签：windows, qt, qt5, visual-studio-2010

我在安装了 SDK7 的 Windows 7+msvc2010 下使用 Qt5、QtCreator 运行一个简单的程序。我必须在这个程序中调用特定的 Windows 函数。

如果我尝试编译它，我总是得到：

> 错误：C1083：无法打开包含文件：'Windows.h'：没有这样的文件或目录。

当然，我设置“正常”开发。QtCreator（Microsoft Visual C++ Compiler 10.0）中的套件，我之前尝试运行 vcvars32.bat。它仍然无法正常工作。

另一点：为什么在编译时，我看不到任何与 Windows SDK 相关的包含（-I...）？

我的错误在哪里？

# ios - ios是否可以查看所有其他应用程序

> ID：14170793
> 
> 赞同：-1
> 
> 时间：2013-01-05T10:13:28.733
> 
> 标签：ios, view, window, overlay

从后台应用程序发出通知的主要思想。后台应用程序从 GPS 获取坐标。当我们找到确定的坐标时——我们在所有其他程序上绘制视图一段时间。（就像安卓中的吐司一样）。例如 - 顶部是导航程序，但我的窗口绘制在它们的顶部。我找到了部分解决方案 iToast - 但它在后台不起作用。仅当应用程序处于活动状态时。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:33:36.883

从后台通知用户的唯一方法是[本地通知](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1)。

[这个关于后台位置更新和本地通知的讨论](http://iphonedevsdk.com/forum/iphone-sdk-development/55668-background-location-and-local-notification.html)可能会对您有所帮助。

希望这可以帮助。

# c# - C# ExpressionVisitor.VisitBinary

> ID：14170794
> 
> 赞同：1
> 
> 时间：2013-01-05T10:13:32.733
> 
> 标签：c#, expressionvisitor

**来自：如何：修改表达式树（C# 和 Visual Basic）**

[http://msdn.microsoft.com/en-us/library/bb546136.aspx](http://msdn.microsoft.com/en-us/library/bb546136.aspx)

```
protected override Expression VisitBinary(BinaryExpression b)
    {
        if (b.NodeType == ExpressionType.AndAlso)
        {
            Expression left = this.Visit(b.Left);
            Expression right = this.Visit(b.Right);

            // Make this binary expression an OrElse operation instead of an AndAlso operation. 
            return Expression.MakeBinary(ExpressionType.OrElse, left, right, b.IsLiftedToNull, b.Method);
        }

        return base.VisitBinary(b);
    } 
```

如果我对这种方法的目的及其工作方式有误，请纠正我。谢谢你。

如果我有一个现有的表达式，Expresstion Visitor 会将每个 BinaryExpression 发送到这个方法，所以这两行，据我了解是浪费：

```
Expression left = this.Visit(b.Left);
Expression right = this.Visit(b.Right); 
```

因为这两行做同样的事情，将负责将每个 BinaryExpression 发送到此方法。我对吗？

Expression.MakeBinary 的目的是将 BinaryExpression 更新为新的。那么为什么不使用这个方法：b.Update??

最后一件事，这个方法是否会将这个表达式上的每个 AndAlso 替换为 OrElse ？

**提前感谢您的时间。**

# ruby-on-rails - 贪婪地匹配 Rails 中的所有路线？

> ID：14170796
> 
> 赞同：1
> 
> 时间：2013-01-05T10:13:52.040
> 
> 标签：ruby-on-rails

无论深度如何，我都想贪婪地匹配所有路线。我可以对第一层路线执行此操作，直到第一个'/'

```
get '*foo', to: 'home#index' 
```

似乎是必要的`*foo`，因为解析器不会接受 just `*`。

解析器也不会接受`**/*`用于递归匹配的公共。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:34:49.057

不确定问题是什么：`get '*foo', to: 'home#index'`应该捕获任何请求，即使其中有斜线。请参阅[有关路由通配符的文档](http://guides.rubyonrails.org/routing.html#route-globbing)。

# drupal-7 - 为什么我在 Drupal 7 中收到 404 page not found 错误？

> ID：14170797
> 
> 赞同：1
> 
> 时间：2013-01-05T10:13:59.867
> 
> 标签：drupal-7

在更新一个人的详细信息或一条内容（例如博客条目）时，有时，虽然似乎并非一直如此，但我的 Drupal 7 网站会尝试打开以下干净的 url：

/admin/people
或
/admin/content

而不是

?q=admin/people
或
?q=admin/content

我得到一个 404 page not found 错误。

我有开箱即用的标准未更改的 .htaccess 文件。

我没有尝试启用干净的网址。

我添加了一些非常标准的模块：Insert、Computed Field 和 CKEditor。就这样。

如果重要的话，我的托管服务是 1&1。

为什么我会收到论文 404？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:08:20.547

解决方案是实际**启用**干净的 url。也许开发人员错误地将干净的 url 编码到源代码中，如果您没有启用干净的 url，就会出现问题。我认为它们是默认启用的，但我的不是因为，我认为，我的 drupal 站点位于子目录中。为了解决这个问题，我在 .htaccess 文件中取消了 RewriteBase 的注释，并添加了我的子目录的路径。

# java - 每次出现时段落中字符串的索引

> ID：14170798
> 
> 赞同：2
> 
> 时间：2013-01-05T10:14:14.967
> 
> 标签：java

```
String word="i love apples i love orange";
String w=scan.next();
    int index = word.indexOf(w);
    System.out.println (index);
while (index >= 0) {
    System.out.println(index);
    index = word.indexOf(w, index + 1);
} 
```

所以我知道这段代码会告诉我爱的索引是（2,17），但我要找的是我希望它为我返回单词的索引是（1,4），也就是说它很重要字符串中的字符串而不是字符......我也需要它来指示索引，每次它找到它就像上面的那个一样谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:28:50.177

如果在您的变量“单词”单词中仅使用空格分隔，您可以使用这样的代码

```
String word="i love apples i love orange";
String w=scan.next();
String[] words = word.split(" ");
for (int i=0; i< words.length; i++){
    if (words[i].equals(w)){
        System.out.println(i);
    }
} 
```

更新：如果你想计算字数试试这个 -

```
String word="i love apples i love orange";
String w=scan.next();
String[] words = word.split(" ");
int count = 0;
for (int i=0; i< words.length; i++){
    if (words[i].equals(w)){
        System.out.println(i);
        count ++;
    }
}
System.out.println("Count = "+count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:38:25.233

此代码查找输入在单词中的位置以及单词在字符串中的位置。

```
public static void main(String[] args) {
    int lastIndex = 0;
    Scanner scan = new Scanner(System.in);
    String w = scan.next();

    String word = "i love apples i love orange";
    String[] tokens = word.split(" ");

    for (String token : tokens) {
        if (token.contains(w)) {
            for (int x = 0; x < token.length(); x++) {
                System.out.println("Input found in token at position: " + (token.indexOf(w) + 1));
            }

            System.out.println("Word found containing input in positions: " + (word.indexOf(token, lastIndex) + 1)
                    + "-" + ((word.indexOf(token, lastIndex)) + token.length()));
            lastIndex = ((word.indexOf(token,lastIndex)) + token.length());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T10:47:11.177

此代码每次出现时都会在段落 (str) 中查找字符串 (needle)。针可以包含空格，每次都打印单词索引。

```
String str = "i love apples i love orange";
String needle = "i love";
int wordIndex = 0;
for (int start = 0; start < str.length(); start++) {
  if (Character.isWhitespace(str.charAt(start))) wordIndex++;
  if (str.substring(start).startsWith(needle)) {
    System.out.println(wordIndex);
  }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-26T04:55:44.800

```
package JavaPractice;

public class CountNumberOfWords {
public static void main(String[] args) {
    String str = "My name is srikanth. srikanth is working on a java program. " + 
            "srikanth dont know how many errors atr there. so, " +
            "srikanth is going to find it.";
    String Iwant = "srikanth";
    int wordIndex = 0;
    int count =0;
    for (int start = 0; start < str.length(); start++) {
      if (Character.isWhitespace(str.charAt(start))) wordIndex++;
      if (str.substring(start).startsWith(Iwant)) {
        System.out.println("Index of the String Iwant "+wordIndex);
        count++;
      }
    }
    System.out.println("Number of times srikanth in str is="+count);

}
} 
```

输出：

```
字符串索引 Iwant 3
字符串索引 Iwant 4
字符串索引 Iwant 11
字符串索引 Iwant 20
str 中 srikanth 的次数是=4

```

# go - 如何在 Go 中获得“虚拟主机”功能？

> ID：14170799
> 
> 赞同：11
> 
> 时间：2013-01-05T10:14:27.080
> 
> 标签：go, virtualhost

使用 Nginx/Django 创建虚拟主机就像编写适当的配置一样容易。

对于 Go，我找到了这个[https://codereview.appspot.com/4070043](https://codereview.appspot.com/4070043)并且我知道我必须使用`ServeMux`但如何实现它？

我的意思是我的所有项目都必须有 1 个二进制文件，或者我必须创建一些“路由器”服务器来根据主机名路由请求？如何做到“走”？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-05T13:18:34.210

您是正确的，您将使用 ServeMux。ServeMux的[godoc](http://golang.org/pkg/net/http/#ServeMux)有一些关于如何使用它的详细信息。

在标准的 http 包中，有可以使用顶级 Handle 函数操作的 DefaultServeMux。例如，一个简单的虚拟主机应用程序可能如下所示：

```
package main

import (
    "fmt"
    "net/http"
)

func main() {
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprintf(w, "Hello, world!")
    })
    http.HandleFunc("qa.example.com/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprintf(w, "Hello, improved world!")
    })
    http.ListenAndServe(":8080", nil)
} 
```

在这个例子中，对 qa.example.com 的所有请求都将命中第二个处理程序，而对其他主机的所有请求都将命中第一个处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-06T21:13:45.243

这是另一个如何使用 golang 提供“虚拟主机”功能的示例：

```
package main

import(
    "net/url"
    "net/http"
    "net/http/httputil"
)

func main() {
    vhost1, err := url.Parse("http://127.0.0.1:1980")
    if err != nil {
            panic(err)
    }
    proxy1 := httputil.NewSingleHostReverseProxy(vhost1)
    http.HandleFunc("publicdomain1.com/", handler(proxy1))

    vhost2, err := url.Parse("http://127.0.0.1:1981")
    if err != nil {
            panic(err)
    }
    proxy2 := httputil.NewSingleHostReverseProxy(vhost2)
    http.HandleFunc("publicdomain2.com/", handler(proxy2))

    err = http.ListenAndServe(":80", nil)
    if err != nil {
          panic(err)
    }
}

func handler(p *httputil.ReverseProxy) func(http.ResponseWriter, *http.Request) {
    return func(w http.ResponseWriter, r *http.Request) {
            p.ServeHTTP(w, r)
    }
} 
```

在这种情况下，每个“虚拟主机”可以是任何 http 服务器，如其他 golang net.http 网络服务器，甚至其他常规网络服务器，如 nginx。它们中的每一个都可以在同一个 ip 和另一个端口中，或者在另一个 ip 和任何端口中。如果您愿意，是否转发到不同的物理服务器并不重要。

# android - 如何在 web 视图中根据设备加载不同语言的 html 页面，就像我们处理不同语言支持的字符串文件一样

> ID：14170801
> 
> 赞同：2
> 
> 时间：2013-01-05T10:14:52.537
> 
> 标签：android, android-layout, internationalization, android-widget

我想在我的应用程序中添加一些不同语言的 html 文件，以支持我的应用程序使用不同的语言。我已经完成了 string.xml 文件，但现在我想根据设备语言在 web 视图上添加 html 页面。我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:27:35.583

假设您想将 HTML 文件存储在 中`/res/string`，那么您可以使用语言限定符来指定资源所指的语言，例如`/res/string-en`或`/res/string-nl`（分别用于英语和荷兰语文件）。

所有其他资源类型也是如此，例如`/res/drawable`,`/res/raw/`等。

有关更多信息，请查看[Android 本地化](http://developer.android.com/guide/topics/resources/localization.html#using-framework)页面。

要从字符串加载 HTML 并在您`WebView`使用的[`loadData()`](http://developer.android.com/reference/android/webkit/WebView.html#loadData%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法中显示它：

```
html = resources.getString(R.string.my_html_page);
myWebView.loadData(html, "text/html", myEncoding); 
```

# c# - 来自 Axis2 Web 服务的 OMElement 的 C# 客户端

> ID：14170803
> 
> 赞同：0
> 
> 时间：2013-01-05T10:15:12.740
> 
> 标签：c#, axis2, axiom

我有一个使用 AXIOM 实现的 Axis2 Web 服务，它返回一个字符串列表。

有效的Java客户端代码片段如下。

```
 // * send SOAP message
   sender.fireAndForget( requestObject );

   // * get response
   OMElement reponseObject = sender.sendReceive( requestObject );

    // * iterator for String
    Iterator elementItr = reponseObject.getChildElements();

     while(elementItr.hasNext())
    {
         OMElement element = (OMElement)elementItr.next();

         // * print each message
         System.out.println( element.getText() );
    } 
```

我需要实现使用上述服务的 ac# 客户端。

我已经能够测试返回单个 String 对象的 ac# 客户端，如下所示。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using HDMClient.hdssWS;

namespace HDMClient
{
    class Program
    {
        static void Main(string[] args)
        {
        HDMClient.hdssWS.StockQuoteServicePortTypeClient client = new hdssWS.StockQuoteServicePortTypeClient("StockQuoteServiceHttpSoap11Endpoint");

        client.update("apple", 1232.123);
        Console.WriteLine(client.getPrice("apple"));
        Console.ReadLine();   
        }
    }
} 
```

app.config 中的消息类型为“MTOM”，WAS 中axis2.xml 中的配置设置为

```
 <parameter name="enableMTOM">true</parameter> 
```

我可以处理单个字符串响应。

但我不知道如何处理上面的字符串列表。

我搜索过类似的案例

但看起来我没有遇到这种情况。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:01:47.017

经过数小时的搜索，我们找到了一些解决方法，其中不使用 AXIOM，而是基于 POJO

网络服务。

这是返回字符串列表的服务。

```
package samples.quickstart.service.pojo;

import java.util.HashMap;
import java.util.ArrayList;
import java.util.List;

 public class StockQuoteService {
    private HashMap map = new HashMap();

    public List<String> getPrice(String symbol, int number) {
    Double price = (Double) map.get(symbol);

    List<String> retValue = new ArrayList<String>();

    retValue.add("1");
    retValue.add("2");

    return retValue;
}

public void update(String symbol, double price) {
    map.put(symbol, new Double(price));
}
} 
```

在 .Net 项目的 Reference.cs 中，我添加了

```
[System.ComponentModel.EditorBrowsableAttribute        (System.ComponentModel.EditorBrowsableState.Advanced)]
    HDMClient.hdssWS.getPriceResponse HDMClient.hdssWS.StockQuoteServicePortType.getPrice(HDMClient.hdssWS.getPriceRequest request)
    {
        return base.Channel.getPrice(request);
    }

    public string [] getPrice(string symbol, int number)
    { 
        HDMClient.hdssWS.getPriceRequest inValue = new HDMClient.hdssWS.getPriceRequest();
        inValue.symbol = symbol;
        inValue.number = number;
        HDMClient.hdssWS.getPriceResponse retVal = ((HDMClient.hdssWS.StockQuoteServicePortType)(this)).getPrice(inValue);
        return retVal.@return;
    }

    [System.ComponentModel.EditorBrowsableAttribute    (System.ComponentModel.EditorBrowsableState.Advanced)]
    void HDMClient.hdssWS.StockQuoteServicePortType.update(HDMClient.hdssWS.update request)
    {
        base.Channel.update(request);
    }

    public void update(string symbol, double price)
    {
        HDMClient.hdssWS.update inValue = new HDMClient.hdssWS.update();
        inValue.symbol = symbol;
        inValue.price = price;
        ((HDMClient.hdssWS.StockQuoteServicePortType)(this)).update(inValue);
    } 
```

如果您查看代码，我没有在 C# 的 Generic 中使用 List 或 ArrayList。

返回值是字符串数组。-> ( public string [] getPrice(string symbol, int number) )

C# 客户端代码如下所示。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using HDMClient.hdssWS;

namespace HDMClient
{
class Program
{
    static void Main(string[] args)
    {
        HDMClient.hdssWS.StockQuoteServicePortTypeClient client = new hdssWS.StockQuoteServicePortTypeClient("StockQuoteServiceHttpSoap11Endpoint");

        client.update("apple", 1232); 

        string [] result = client.getPrice("apple", 12);

        for (int i = 0; i < result.Length; i++) 
        {
            Console.WriteLine(result[i]);
        }

    }
}
} 
```

它通过在控制台中以字符串类型向我显示 1、2 来按预期工作。

任何想要实现 Axis2 Web 服务以供 .Net 客户端和

需要返回原始数据类型列表的服务，可以参考我的案例。

虽然有些例子中输出只是一个原始类型，而不是像 Generic 这样的

用 Java 列出。

# html - iframe：后续点击会在新标签页中加载新网址

> ID：14170807
> 
> 赞同：0
> 
> 时间：2013-01-05T10:16:18.417
> 
> 标签：html, google-chrome, firefox, iframe

！！求救！！

**问题背景：**我有一个文件，其中包含一些页面标题和相应的 URL。我正在动态读取此文件并生成一个表格，其中每一行都显示（可点击）标题。页面上有一个 iframe。我希望当用户单击其中一行时，相应的页面应该加载到 iframe 中。这些 url 可能属于不同的域。

**主要问题：**第一次单击在 iframe 中完美打开了相应的 url。但是，任何后续点击（在同一行或不同行上）都会在新窗口中打开 url，而不是替换 iframe 中的早期 url。

尝试了很长时间的谷歌搜索，但似乎这个问题仍未解决（很多没有回复的空帖子:-()

请回复此帖。如果需要，我很乐意为您提供更多信息/代码。

问候 P

PS：顺便说一下，这个更简单的 html 代码也发生了同样的事情。只有两个链接和一个 iframe。复制粘贴此 html 文件并尝试。一个链接将加载 iframe 中的内容，另一个链接将重定向到新选项卡：x：x

```
<html>
<table>
<tr><td><a style="text-decoration:none; line-height: 150%; color:darkslategray;" href="http://www.usatoday.com/story/money/markets/2013/01/04/stocks-higher-bull-market-high/1810075/" target="main_frame">GM, Peugeot to Decide on Brazil Factory This Month, Veja Says <br>Bloomberg News &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2012-05-19</a></td></tr>
<tr><td><a style="text-decoration:none; line-height: 150%; color:darkslategray;" href="http://www.reuters.com/article/2013/01/04/us-markets-stocks-idUSBRE8BG0D620130104" target="main_frame">GM, Peugeot no Decide on Brazil Factory This Month, Veja Says <br>Bloomberg News &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2012-05-20</a></td></tr>
</table>

<iframe name="main_frame" frameborder="0" marginheight="0" marginwidth="0" scrolling="yes" height="100%" width="100%" src=""></iframe>

</html> 
```

在 chrome 和 firefox 上测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:57:21.137

解决了！！！

使用了这两个链接：[https](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe) ://developer.mozilla.org/en-US/docs/HTML/Element/iframe 和[Firefox 在浏览器的新选项卡中打开针对 iFrame 的链接](https://stackoverflow.com/questions/8302247/firefox-opens-links-targeted-for-iframe-in-browsers-new-tab-instead)

和以下代码：

```
<html>
<head>
<script type="text/javascript">
function navigate(url)
{
    var iframe = document.getElementsByTagName( "iframe" )[0];
    iframe.src = url;
}
</script>
</head>

<body>
<table>
<tr><td><a href="javascript:navigate('http://www.usatoday.com/story/money/markets/2013/01/04/stocks-higher-bull-market-high/1810075/')">Some title</a></td></tr>
<tr><td><a href="javascript:navigate('http://www.reuters.com/article/2013/01/04/us-markets-stocks-idUSBRE8BG0D620130104')">Some Other title</a></td></tr>
</table>

<iframe name="main_frame" frameborder="0" marginheight="0" marginwidth="0" scrolling="yes" height="100%" width="100%" src=""></iframe>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:23:58.393

其中一个网页更改了`window.name`其窗口，并且通过窗口名称而不是框架名称进行定位...

# jquery - 在 jquery 中禁用和启用提交按钮

> ID：14170809
> 
> 赞同：13
> 
> 时间：2013-01-05T10:16:55.013
> 
> 标签：jquery, html, css, yii

我正在使用 jquery 禁用提交按钮并加载加载图像，

在提交按钮中，我使用以下内容：

```
<div id="registerbtn" name="registerbtn">
<input type="submit" class="btn btn-primary" icon="ok white" value="Register" id="register" name="register"/>
</div>
<div class="span4" style="display:none;" id="loadingtext">
                            <?php echo  $imghtml=CHtml::image('images/loading.gif');?>                      
                        </div> 
```

在 JQuery 中，我使用以下代码：

```
$(document).ready(function() {

    $('#register').click(function() {
        $('input[type="submit"]').attr('disabled','disabled');

     });
        $("#loadingtext").show();
    });
}); 
```

当我这样做时，此按钮将被永久禁用，但如果我想删除，我该怎么办？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-05T10:32:39.303

在回调函数中使用[`.prop()`](http://api.jquery.com/prop/)方法和使用`$(this)`引用目标元素

```
jQuery(function($) {

  const $register = $("#register"),
        $loading = $("#loading");

  $register.on("click", function() {

    $(this).prop('disabled', true);
    $loading.show();

    setTimeout(function() {
      $register.prop('disabled', false);
      $loading.hide();
    }, 2000);

  });

});
```

```
<input id="register" value="Register" type="submit">
<div id="loading" style="display:none;">Wait 2 sec...</div>

<script src="//code.jquery.com/jquery-3.1.0.js"></script>
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-05T10:21:36.873

这在[jQuery 常见问题解答中得到了回答](http://learn.jquery.com/using-jquery-core/faq/how-do-i-disable-enable-a-form-element/)

> **如何禁用/启用表单元素？**
> 有两种方法可以禁用/启用表单元素。

将 'disabled' 属性设置为 true 或 false：

```
 // Disable #x
 $('#x').attr('disabled', true);
 // Enable #x
 $('#x').attr('disabled', false); 
```

添加或删除“禁用”属性：

```
 // Disable #x
 $("#x").attr('disabled', 'disabled');
 // Enable #x
 $("#x").removeAttr('disabled'); 
```

**更新：**现在的方法（如常见问题解答所述）只有：

```
// Disable #x
$( "#x" ).prop( "disabled", true );

// Enable #x
$( "#x" ).prop( "disabled", false ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T10:22:22.653

永久删除按钮

```
$('#register').remove(); 
```

恢复按钮

```
$('#register').attr('disabled',false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T10:22:46.047

是`$('#divID').remove();`你要找的吗？

[http://docs.jquery.com/Manipulation/remove](http://docs.jquery.com/Manipulation/remove)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-05T09:54:50.970

## 启用禁用的属性

```
 $('#apply-coupon').removeAttr('Disabled'); 
```

## 禁用禁用的属性

```
$('#apply-coupon').attr('disabled', 'disabled' ); 
```

# c# - .Net Micro Framework - 要浮动的字符串

> ID：14170810
> 
> 赞同：0
> 
> 时间：2013-01-05T10:17:06.503
> 
> 标签：c#, string, floating-point, .net-micro-framework

如何在 .Net Micro Framework 中将a 转换`string`为 a ？`float`

字符串格式化为：`"38.5000"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T20:08:23.037

答案是，*你不*使用，`Double`而是使用 - `double.Parse`。非常感谢 Jon Skeet 在路上帮助我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T11:07:41.520

```
float f = Convert.ToSingle("38.5"); 
```

# cloud-foundry - 云代工厂设置错误

> ID：14170811
> 
> 赞同：0
> 
> 时间：2013-01-05T10:17:15.263
> 
> 标签：cloud-foundry

我安装 can foundry（4 个节点），安装 dea 节点时，出现一些错误：致命：无法加载 Moneta 后端“BasicFile”错误：运行异常处理程序错误：异常处理程序完成致命：Stacktrace 转储到 /var/chef/cache /chef-stacktrace.out FATAL: LoadError: no such file to load -- moneta/basic_file 为什么，帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:06:08.500

如果您想使用 Chef 来部署 Cloud Foundry，请在此处考虑 Andrea Campi 的脚本：[https](https://github.com/zephirworks) ://github.com/zephirworks - 请注意，这是一个独立的项目。Cloud Foundry 团队正在从 dev_setup 转向 BOSH 安装和 Micro Cloud Foundry 部署。”

# git - Git : 关于在 Git 中的cherrypick 提交的查询

> ID：14170813
> 
> 赞同：0
> 
> 时间：2013-01-05T10:17:32.863
> 
> 标签：git

我有两个分支，即 master 和 development 。我只需要从开发分支中选择一些特定的提交并将它们合并到 master 。

我尝试使用`git cherry-pick`，但不确定我是否以正确的方式使用

我需要挑选**a400452d64**或**a7644fc2bc7b09fe88cb1cbb75e0547dd1d7321d** **请看图片**

![在此处输入图像描述](../Images/bf7819900da6da196d02f936cbffc529.png)

我遵循了以下方法。

```
git checkout master 

git pull 
```

`git cherry-pick a400452d64`

或者

```
git cherry-pick  a7644fc2bc7b09fe88cb1cbb75e0547dd1d7321d

git commit -m "My Commit"  # Is this necessary ??

git push -u origin master   # Is this necessary ?? 
```

如果我做错了什么，请告诉我？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:20:37.047

“父”提交是该提交之前的提交，因此“提交”哈希是您要使用的那个。为免生疑问，您可以这样做：

```
git show a7644fc2bc7b09fe88cb1cbb75e0547dd1d7321d 
```

并在执行之前检查它是正确的提交：

```
git checkout master
git pull
git cherry-pick a7644fc2bc7b09fe88cb1cbb75e0547dd1d7321d
git push 
```

如果上游配置正确，则可能不需要在推送上指定来源。

# python - 在openoffice calc中插入行时python中求和函数的公式

> ID：14170819
> 
> 赞同：1
> 
> 时间：2013-01-05T10:18:17.150
> 
> 标签：python, openoffice.org

使用ods制作计算报告

创建报告没有问题，但结果中的总和是静态的。现在我尝试使用 sum() calc 函数来计算使用 python 循环创建的行的总和，从而获得动态总和。

*   我尝试将 sum() 放在一个单元格中，但循环插入行而不更改函数中的范围。*   在 python 代码中找不到将函数放入单元格而不是文本的语法。

有人知道在 python 代码中使用的语法来将 sum 函数放在报告中，或者在 ods 文件中插入 line 时更改 sum 函数范围的方式？

# mysql - 连接两个表时Mysql不同的最大列

> ID：14170820
> 
> 赞同：1
> 
> 时间：2013-01-05T10:18:34.020
> 
> 标签：mysql, sql, select, greatest-n-per-group

我有两个表，我正在尝试加入并根据另一列的最大值加上另一个表中的标识符在一个列中获取唯一值。这是我的结构。

```
Partial Table 1 (reward_webuid):
╔════╦═════════╦═════════╦══════════╦═════════════════════╦═════════╗
║ ID ║ WEB_UID ║ ITEM_ID ║ PLAYERID ║      TIMESTAMP      ║ EXPIRED ║
╠════╬═════════╬═════════╬══════════╬═════════════════════╬═════════╣
║  8 ║ 1209520 ║   73410 ║  1926406 ║ 2013-01-05 04:47:06 ║       0 ║
║  9 ║ 1209520 ║   73425 ║  1926406 ║ 2013-01-02 09:40:27 ║       1 ║
║ 10 ║ 1209520 ║   73424 ║  1926406 ║ 2013-01-05 09:40:05 ║       0 ║
║ 11 ║ 1209520 ║   73425 ║  1926406 ║ 2013-01-05 09:40:27 ║       0 ║
║ 12 ║ 1209521 ║   73424 ║ 21555896 ║ 2013-01-05 01:33:20 ║       0 ║
║ 13 ║ 1209521 ║   75000 ║  5599854 ║ 2013-01-05 01:35:09 ║       1 ║
╚════╩═════════╩═════════╩══════════╩═════════════════════╩═════════╝

Partial Table 2 (rewards):
╔═════════╦═════════════════╦══════════════╦═════════════╗
║ ITEM_ID ║ CUST_LOADOUT_ID ║ REWARD_LEVEL ║ EXPIRY_TIME ║
╠═════════╬═════════════════╬══════════════╬═════════════╣
║   73410 ║               1 ║            5 ║           0 ║
║   73424 ║               2 ║           10 ║           0 ║
║   73425 ║               3 ║           15 ║          30 ║
║   75000 ║               4 ║           50 ║          60 ║
╚═════════╩═════════════════╩══════════════╩═════════════╝ 
```

我想获得的样本返回（cust_loadout_id 和 playerID 用于奖励级别的最大值，基于表 1 中尚未过期的 item_id）每个 playerID 应该只有一个值

```
╔══════════╦═════════════════╗
║ PLAYERID ║ CUST_LOADOUT_ID ║
╠══════════╬═════════════════╣
║  1926406 ║               3 ║
║ 21555896 ║               2 ║
╚══════════╩═════════════════╝ 
```

如果有人可以提供帮助，将不胜感激。我搜索了大多数与同一张表或 3 个或更多表相关的查询。我管理的最好的方法是返回我需要的数据，但它没有正确排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:34:22.553

```
SELECT  a.*, b.*
FROM    reward_webuid a
        INNER JOIN rewards b
            ON a.item_id = b.item_ID
        INNER JOIN
        (
            SELECT  aa.PLAYERID, MAX(bb.REWARD_LEVEL) maxLevel
            FROM    reward_webuid aa
                    INNER JOIN rewards bb
                        ON aa.item_id = bb.item_ID
            WHERE   aa.expired = 0
            GROUP   BY aa.PLAYERID
        ) c ON  a.PLAYERID = c.PLAYERID AND
                b.REWARD_LEVEL = c.maxLevel AND
                a.Expired = 0 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/029f6/9)
*   [SQLFiddle 演示（*仅限选定的列*）](http://sqlfiddle.com/#!2/029f6/10)

# java - 如何使用java将数据添加到电子表格？

> ID：14170823
> 
> 赞同：0
> 
> 时间：2013-01-05T10:18:58.733
> 
> 标签：java, google-sheets

如何使用java在电子表格中插入数据

```
ListEntry row = new ListEntry();
row.getCustomElements().setValueLocal("EmpNo", "1234");  
row.getCustomElements().setValueLocal("empno", "12345");
row = spreadsheetService.insert(listFeedUrl, row); 
```

预期输出：

```
EmpNo empno
1234  12345 
```

当前输出：

```
EmpNo empno
12345 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:48:18.840

可能重复：[如何在电子表格中写入数据（重新生成的标题）](https://stackoverflow.com/questions/14159362/how-to-write-the-data-in-spreadsheetreapated-headers)

一直在查看文档（[旧文档](https://developers.google.com/gdata/javadoc/com/google/gdata/data/spreadsheet/CustomElementCollection#setValueLocal%28java.lang.String,%20java.lang.String%29)和[新文档](https://developers.google.com/google-apps/spreadsheets/?hl=de-DE)），据我所知，尚未记录是否`setValueLocal(String header, String value)`接受区分大小写的标头值。

因此，根据您显示的内容，指定的标题似乎不区分大小写，这意味着解决此问题的最简单方法是重命名电子表格中的标题，为其赋予唯一的名称。

# android - android返回错误的ArrayList值

> ID：14170826
> 
> 赞同：1
> 
> 时间：2013-01-05T10:20:11.187
> 
> 标签：android, arraylist, return-value

我试图`List<String[]>`在函数之间传递一个，但我得到了一个奇怪的结果。

功能！

```
public List<String[]> tes(){

    List<String[]> test = new ArrayList<String[]>();

    String[] temp = {"a","b","c"};
    test.add(temp);

    temp[0] = "d";
    temp[1] = "e";
    temp[2] = "f";

    test.add(temp);

    return test;
 } 
```

提取。

```
 String output = "";
    List<String[]> Results = db.tes();
    for (String[] row: Results) {
        output = output + row[0] + " " + row[1] + "\n";
    } 
```

结果：

```
d e
d e 
```

我真的不明白。应该是`a b d e`，但不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:37:31.943

是的，这是因为，您在列表测试中添加了两次相同的对象 (temp)。

list(test) 两次持有同一个对象的引用。

如果您在添加到列表后尝试更改对象的值，它也会在列表中发生更改，因为列表包含对象的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:24:35.230

你有一个对象温度。这意味着列表中的所有对象都与您单独的临时文件有链接。尝试使用`new`每个字符串，您的结果会有所不同。

祝你好运！

# java - 浏览器后退按钮如何处理自动 URL 重定向？

> ID：14170832
> 
> 赞同：2
> 
> 时间：2013-01-05T10:20:53.897
> 
> 标签：java, url, browser, javafx, url-redirection

我正在尝试创建一个浏览器来实践 JavaFX。我用 Stack 实现了 Back 按钮。

1.  当页面的 URL 发生变化时，将 url 添加到 Stack(java.util.Stack)
2.  按下后退按钮时，从堆栈中弹出 1 项并显示页面

但这在 URL 重定向的情况下不起作用。例如。我输入[http://www.google.com](http://www.google.com)，它会自动重定向到[http://www.google.co.in](http://www.google.co.in)（印度）。这会在 Stack 中生成 2 个条目，这会破坏 Back 按钮逻辑，因为页面相同但取自不同位置。

请帮助我解决这个问题。

谢谢你的帮助

```
webEngine.locationProperty().addListener(new ChangeListener<String>(){

        @Override
        public void changed(ObservableValue<? extends String> observable, String oldValue, String newValue) {
            //urlField is a text Field
            urlField.setText(newValue);
            addURLToStack(oldValue);
            if(backButtonStack.size() ==1){ //means on last url of Stack
                backButton.setDisable(true);
            }
            else{
                backButton.setDisable(false); 
            }}      
    });
 backButton.setOnMouseClicked(new EventHandler<MouseEvent>(){

        @Override
        public void handle(MouseEvent event) {
            if(backButtonStack != null && !backButtonStack.isEmpty()){
                String poppedURL = backButtonStack.pop();
                webEngine.load(poppedURL);

            }
        }

    });
private void addURLToStack(String url) {
    if(backButtonStack == null){
        backButtonStack = new Stack<String>();
    }

    backButtonStack.push(url);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:05:05.367

你不需要解决这个问题。

JavaFX [WebEngine](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebHistory.html) has a [WebHistory](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebHistory.html) object which has all the API you need to completely manage the history and it should take care of not adding redirected URLs to the history for you. And, if you don't want to use that, you can use `webengine.executeScript("history.back()");` to have the engine's JavaScript engine handle the navigation for you.

Chris Gerken 所说的关于监控 http 状态返回码以确定是否将对象置于历史记录中的说法是正确的。JavaFX的难点在于`WebEngine`http状态返回码发生在网络层，没有通过WebEngine接口暴露出来。因此，如果您只是在执行过程中监控 WebEngine 的位置属性，那么很难获得高质量的导航界面。我在实现 JavaFX WebBrowser 以获得 JavaFX 体验时发现了这一点，并且[我的浏览器的历史机制使用带有当前索引指针的 ObservableList 与](http://code.google.com/p/willow-browser/source/browse/src/main/java/org/jewelsea/willow/History.java)您在问题中指出的问题完全相同。如果我今天再次实现相同的功能，我会使用新的`WebHistory`更高版本的 JavaFX 提供的功能，而不是自己编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:56:09.810

我觉得你需要在你的逻辑中处理重定向。每当重定向发生时；不要将原始 URL 放在您的数据结构中（堆栈或 LinkedQueue 等等）；仅将最终 URL 放入您的数据结构中。当发生 2-3 次重定向时，您甚至可能会遇到一些情况。你需要让它通用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T13:02:34.660

仅将您实际显示的 URL 放入您的堆栈中。在发送重定向时，您将返回 307 状态代码以及新 URL。只将该 URL 放入您的堆栈中（除非有一些奇怪的机会您又得到了另一个 307 ……但您明白了）。

而且您可能想使用列表而不是堆栈。这将使您前进和后退。您可能还需要坚持其他事情，例如使用的 HTTP 动词等。

# android - 这个 if-else 有什么问题？

> ID：14170833
> 
> 赞同：-1
> 
> 时间：2013-01-05T10:20:56.133
> 
> 标签：android, camera

我正在创建一个让闪光灯相机闪烁的应用程序，但我在关闭该方法时遇到了问题。这些是我的变量：

```
Camera camera = null;
Parameters parameters;
int delay = 600;
int period = 600;
int delay1 = 300;
int period1 = 600;
Timer timer, timer2; 
```

我用来使闪光灯相机闪烁的这种方法：

```
timer = new Timer();
    timer.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
            cameraOn();
            }
    },delay1,period1);

    timer2 = new Timer();
    timer2.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
            cameraOff();
            }
    },delay,period); 
```

现在问题来了，有一个按钮可以关闭所有这些，但有时它可以工作，有时它不能。有时它会完美关闭，有时它会像我想要的那样回到以前的活动，但闪光灯相机保持打开状态。怎么了？以下是关闭相机闪光灯的方法：

```
private void cameraOff() {
     parameters.setFlashMode(Parameters.FLASH_MODE_OFF);
     camera.setParameters(parameters);
     camera.release();
     camera = null;
}

private void cameraOn() {
     camera = Camera.open();
     parameters = camera.getParameters();
     parameters.setFlashMode(Parameters.FLASH_MODE_TORCH);
     camera.setParameters(parameters);
} 
```

这是按钮：

```
@Override
public void onClick(View arg0) {
    timer.cancel();
    timer2.cancel();
    if(camera != null){
        cameraOff();
    }else{
        finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:39:30.303

由于设计缺陷，您的应用程序（如提供的）永远不会工作：

在`cameraOff()`您设置`camera`为的方法中`null`。此方法以固定间隔触发，因此下次再次调用该方法时，您将`NullPointerException`as`camera`设置为`null`...

我不知道你为什么会有将它设置为的冲动`null`，但你需要在其他地方这样做，或者添加检查是否`camera`是`null`。

此外（可能是您的问题的原因），它们`TimerTasks`是在不同的线程上执行的。当您取消计时器时， 的值`camera`是未知的，可能会`cameraOff()`被调用两次。一次来自`TimerTask`线程（因为它即将执行），一次来自您的主线程（因为`camera`尚未设置`null`）。

同样，我想知道为什么您需要设置`camera`为`null`，因为这似乎会导致您的大部分问题。

# android - 如何在普通 Fragment 中添加 DialogFragment？

> ID：14170834
> 
> 赞同：2
> 
> 时间：2013-01-05T10:21:02.637
> 
> 标签：android, android-fragments, android-dialogfragment

此来源显示已`DialogFragment`创建新`Fragment`并阻止所有屏幕 ( `FragmentActivity`)。我需要在其中添加一个`Dialog` ， `Fragment`这样当我可以滚动屏幕并且`DialogFragment`不会干扰时。当前代码：

```
FragmentManager fm = fa.getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
            // create dlg fragment
            DialogFragment fragment = new DialogFragment();
            // show the dialog.
            fragment.show(fm, "android:switcher:888889:1"); // "android:switcher:888889:1" - existing fragment! 
```

![在此处输入图像描述](../Images/b3dea9b566a5c4e3e59c70a0dc9e89b1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:03:08.013

> 我需要在“片段”中添加对话框然后我可以滚动屏幕并且片段对话框不会干扰

normal `DialogFragment`（或 normal `Dialog`）不适用于您想要的。Insted 你可以使用 nested `Fragments`。更准确地说，您需要修改您的 current`Fragment`的视图，以使用 a或 a`ViewPager`包装其当前布局，并在内容顶部添加另一个容器（a ）。`RelativeLayout``FrameLayout``FrameLayout`

顶部的额外`FrameLayout`内容将用作`Dialog`支架（因此`Dialog`将显示为浮动在正常内容的顶部），并且您将在此容器中添加 a`Fragment`来表示`Dialog`（正常的`Fragment`，而不是 a `DialogFragment`）。然后你就可以`ViewPager`用你的假表演来刷屏了`Dialog`。

另外，请记住，`ViewPager`尽管`Dialog`屏幕上显示了 a，但滑动对用户来说可能是反直觉的。

# objective-c - 需要有关核心运动的帮助

> ID：14170835
> 
> 赞同：0
> 
> 时间：2013-01-05T10:21:08.973
> 
> 标签：objective-c, ios, core-motion

使用核心运动我得到 3 个偏航、俯仰、滚动的值，现在使用这些值我需要创建一个自定义加载器，当用户向右、向前、向左、向后移动设备时，这个加载器将填充。所以我用这个核心图形方法画了一个圆

```
void CGContextAddArc (
   CGContextRef c,
   CGFloat x,
   CGFloat y,
   CGFloat radius,
   CGFloat startAngle,
   CGFloat endAngle,
   int clockwise
); 
```

其中所有值都是固定的，并通过计算弧度将 startAngle 的值传递给 pitch

```
myRadianMethod(myPitchValue) 
```

现在，当我移动设备时，圆圈开始填充，但我想让它填充向右、向前、向左、向后四个移动。我如何微调我的代码来完成这个？

> 设备移动就像...用户将他/她的 iphone 保持在横向位置...现在用户首先必须向右倾斜设备，这将填充一些部分，现在用户将 iPhone 向自己倾斜这将填充更多，然后用户将向左倾斜然后向后倾斜以完成填充...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:02:02.707

Have a look at: [http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMDeviceMotion_Class/Reference/Reference.html#//apple_ref/occ/instp/CMDeviceMotion/rotationRate](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMDeviceMotion_Class/Reference/Reference.html#//apple_ref/occ/instp/CMDeviceMotion/rotationRate)

RotationRate only reflects the changes in angles around the three axes. So each time there is a positive change in the direction you are awaiting you could sum these changes up to a certain value.

Is that what you are looking for?

# grails - 如何在匹配约束中转义正斜杠

> ID：14170837
> 
> 赞同：4
> 
> 时间：2013-01-05T10:21:34.460
> 
> 标签：grails, groovy, grails-constraints

使用匹配约束时，如何转义正则表达式中的正斜杠？这是我尝试过的：

```
constraints {
    url (
        matches: "^http://www.google.com/$"
    )
} 
```

错误：`solution: either escape a literal dollar sign "\$5" or bracket the value expression "${5}"`

```
constraints {
    url (
        matches: "^http:\/\/www.google.com\/$"
    )
} 
```

错误：`unexpected char: '\'`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T10:50:05.260

在用双引号 ( `".."`) 定义的字符串中，groovy 将变量替换为`$`.

```
def var = "world"
def str = "hello $var" // "hello world" 
```

在您的验证正则表达式中，这会导致错误。您想将`$`用于正则表达式，而不是用于变量替换。为避免变量替换，您可以在单引号 ( `'..'`)中定义字符串

```
def str = 'hello $var' // "hello $var" 
```

在字符串中定义正则表达式时不需要转义`/`，但应该转义`.`。在正则表达式`.`中匹配任何字符。所以正则表达式`^http://www.google.com/$`匹配`http://wwwAgoogleB.com/`。

要转义字符串中的字符，您必须使用`\\`（第一个`\`用于转义第二个`\`）。所以下面的表达式应该起作用：

```
static constraints = {
    name (
        matches: '^http://www\\.google\\.com/$'
    )
} 
```

通常，您也可以使用 groovy 正则表达式语法 ( `/../`)。在这种情况下，正则表达式看起来像这样

```
~/^http:\/\/www\.google\.com\/$/ 
```

您不需要双反斜杠来转义，但因此您必须转义斜杠（因为它们用于终止正则表达式）。但据我所知，这种语法不适用于 grails 的匹配约束。

# windows - 在鼠标光标旁边显示一个图标

> ID：14170845
> 
> 赞同：0
> 
> 时间：2013-01-05T10:22:27.857
> 
> 标签：windows, visual-c++

只要我的应用程序正在下载文件，我就会尝试在鼠标光标旁边显示一个图标。我仅限于视觉 C++。即使在我的应用程序之外，更改后的光标也应该可见。

许多应用程序（如 Synaptics 触摸板驱动程序）已经这样做了。例如，当您进行捏合缩放时，当前光标旁边会显示一个“移动”图标。 [http://blog.quppa.net/wp-content/uploads/cursor1.png](http://blog.quppa.net/wp-content/uploads/cursor1.png)

我查了`SetSystemCursor` [http://msdn.microsoft.com/en-us/library/ms648395%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms648395%28VS.85%29.aspx) 但是这个功能只能整体改变整个光标，如果应用程序崩溃或异常终止，原始光标不会被恢复。

# asp.net - 等效于 MVC 中的 Web 表单标签

> ID：14170850
> 
> 赞同：3
> 
> 时间：2013-01-05T10:23:05.653
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, label, postback

在 Web 窗体中，`Label`显示在回发之间持续存在的文本。MVC4 中的等价物是什么？

我的意思不是`Html.LabelFor`因为这不会保留它在回发时绑定的模型属性。目前，我正在做：

```
@Model.Property
@Html.HiddenFor(o => o.Property) 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T10:30:03.823

> MVC4 中的等价物是什么？

```
@Html.LabelFor(o => o.Property) 
```

将创建一个`<label>`引用相应元素的 HTML`<input>`元素。

或者：

```
@Html.DisplayFor(o => o.Property) 
```

它将简单地将属性的值输出为纯文本。

或者，如果您想在回发中保留值，您可以使用隐藏字段（就像您已经做的那样）或编辑器模板：

```
@Html.EditorFor(o => o.Property) 
```

如果你想让标签的值显示在屏幕上并发送到服务器，你可以使用 DisplayFor 和 HiddenFor 元素的结合：

```
@Html.DisplayFor(o => o.Property)
@Html.HiddenFor(o => o.Property) 
```

# javascript - Javascript 工具单页应用导览

> ID：14170855
> 
> 赞同：8
> 
> 时间：2013-01-05T10:23:48.277
> 
> 标签：javascript, jquery, web-applications, jquery-plugins, canvas

我曾经看到一个 javascript 工具（可能是 jquery 插件）来实现功能/导游功能，不幸的是我没有为页面添加书签。

它使用了一个覆盖并专注于文档元素，可能基于 id 属性。

![在此处输入图像描述](../Images/39e0ca0af0ec89472159719fe60202e5.png)

[Joyride](http://www.zurb.com/playground/jquery-joyride-feature-tour-plugin)或我在谷歌上发现的任何东西都不支持这一点。

你有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-23T02:54:29.760

[**Sideshow**](http://fortesinformatica.github.io/Sideshow)是一个现代且强大的库，用于为 Web 应用程序和站点创建交互式导览。

Sideshow 不仅可以指导您的用户，还可以与他们互动：

*   通过屏蔽屏幕的其余部分（Sideshow 不为此使用 z-index 方法，它的掩码是'不定位在元素后面，而是真正围绕它）。
*   监控用户的行为和某些屏幕的状态。
*   为您的教程创建智能步骤，当满足某些条件时自动进行
*   在您的教程之间创建关系，这样，当您的用户完成一些教程时，会显示一个包含相关教程的列表。
*   使用 Markdown 丰富格式化步骤描述
*   使用事件（例如 beforeStep/afterStep、beforeWizardStarts/afterWizardEnds）来执行一些准备或其他任何事情
*   根据用户正在查看的屏幕显示上下文教程，每个教程都有自己的条件来检查它是否符合该屏幕的条件

**和其他强大的功能！**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-21T12:15:33.333

[Intro.js](http://usablica.github.io/intro.js/)是一个更好的网站和功能介绍，为您的项目提供分步指南。

特征：

*   键盘+鼠标导航
*   又快又小
*   浏览器兼容性
*   免费和开源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:59:59.763

[jquerypowertour.com](http://www.jquerypowertour.com/)可以突出显示元素等等。我没有用过，但它看起来很强大。

但我认为像[JoyRide](http://www.jquerypowertour.com/)或[Guiders-JS](http://www.zurb.com/playground/jquery-joyride-feature-tour-plugin)这样的东西可以很容易地修改为与[jQuery Highlighter 插件](http://www.dailymarkup.com/)结合使用- [Demo](http://www.dailymarkup.com/highlighter/demo1/demo.html#)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-15T01:58:01.450

在这个时间点，我很可能会为此目的选择[Shepherd 。](https://shepherdjs.dev/)（不过，Intro 和 Sideshow 将紧随其后。）

代码很干净，它有很好的默认样式，很容易替换，注意使其易于访问并提供键盘支持，并且它与多个框架集成：

*   反应
*   角
*   余烬
*   Vue
*   Rails（通过[亚伯拉罕](https://github.com/actmd/abraham)）
*   可能是我不知道的其他人

当然，它也适用于 vanilla JS 或 ES 模块。

此外，它不需要 jQuery。需要 jQuery 的一切似乎都是 2005 年的事。

# android - Android 和 PC 上的流式套接字应用程序

> ID：14170856
> 
> 赞同：0
> 
> 时间：2013-01-05T10:23:47.930
> 
> 标签：android, sockets

我需要构建一个应用程序来将文件从 PC 发送到 Android 智能手机。在 PC 端，我使用 C# 程序读取文件并通过流套接字发送它，在 Android 端我必须构建一个程序来接收文件作为流。所以任何人都可以帮助我或给出一个简单的一步一步的流套接字应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:05:15.990

之前我正在使用它来读取通过 IOS 和 Mac 的套接字发送的流，所以我想它也应该对你有用：

```
 ServerSocket serverSocket = null;
        Socket client = null;
        try {
            serverSocket = new ServerSocket(5000); // port number which the server will use to send the stream
            Log.d("","CREATE SERVER SOCKET");
        } catch (IOException e) {
             e.printStackTrace();
        }
        try {
            if(serverSocket!=null){
                client = serverSocket.accept();
                client.setKeepAlive(true);
                client.setSoTimeout(10000);
                InputStream is = client.getInputStream();

                Log.w("READ","is Size : "+is.available());

                byte[] bytes = DNSUtils.readBytes(is);

            }
        } catch (IOException e) {
                e.printStackTrace();
        } 
```

这就是您实际读取发送字节的方式：

```
 public static byte[] readBytes(InputStream inputStream) throws IOException {
     // this dynamically extends to take the bytes you read
     ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();

     // this is storage overwritten on each iteration with bytes
     int bufferSize = 1024;
     byte[] buffer = new byte[bufferSize];

     // we need to know how may bytes were read to write them to the byteBuffer
     int len = 0;
     while ((len = inputStream.read(buffer)) != -1) {
       byteBuffer.write(buffer, 0, len);
     }

     // and then we can return your byte array.
     return byteBuffer.toByteArray();
 } 
```

希望它也对你有用。

# box-api - OAuth2 刷新令牌仅有效期 14 天

> ID：14170857
> 
> 赞同：5
> 
> 时间：2013-01-05T10:24:11.440
> 
> 标签：box-api

我刚刚将我们的 Box 代码升级到 OAuth2。

我们已经实现了允许用户在我们的网络服务器和他们的 Box（以及 SkyDrive、Dropbox、Google Drive）帐户之间传输文件的代码。用户的访问和刷新令牌存储在我们的数据库服务器中。

根据[http://developers.box.com/oauth/](http://developers.box.com/oauth/)，它说 **每个刷新令牌的有效期为 60 天**

SkyDrive 和 Drive 都使用 OAuth2，并且没有刷新令牌到期。是否可以有永不过期的刷新令牌？

某些应用程序可能不需要刷新令牌，那么您是否会考虑引入新的 OAuth2 范围，例如

1.  box.read
2.  box.read_write
3.  box.offline_access

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T21:21:39.963

据我了解，Box OAuth2 实现使用*可选*的刷新令牌轮换方案，每次发出访问令牌时，也会发出一个新的刷新令牌。[请参阅oauth 规范文档](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-10.4)的第 10.4 节。这是一项可选功能，Google 和 Microsoft 不使用该功能，因为它们为 OAuth2 实现发布永久刷新令牌（或者至少刷新具有足够长生命周期的令牌，所以它不是真正的问题）。

在我看来，这是 Box 的一个非常不幸的选择。

您在应用程序中要做的是，每次请求新的访问令牌时，您还必须保存返回的新刷新令牌，以便下次请求访问令牌时使用新的刷新令牌。这样一来，您最终会得到一个过期的刷新令牌的唯一情况是，如果用户 60 天没有使用他们的 Box 登录。只要他们积极使用该应用程序，您就会获得新的刷新令牌，并且 60 天的生命周期不是问题。到目前为止一切都很好，但这并不总是如此，现在是吗？

我的问题是，您必须在每个请求上保存刷新令牌，但是如果由于某种原因失败了怎么办：网络中断，电池电量不足，磁盘写入异常，您的应用程序被关闭操作系统....那么您将不得不要求用户再次登录，而用户将责怪应用程序开发人员。

如果您有足够的用户使用您的应用程序，这将会发生。随着时间的推移，可能只有 2-5%，但在我看来这仍然是一个大问题。

至少如果刷新令牌是（半）永久的，您可以重试身份验证过程，直到它完成。然后你知道你已经保存了令牌，当上述情况发生时，你可以继续使用它，也可以重试，但轮换方案并非如此。

我已经在考虑为遇到此问题的用户制作标准支持电子邮件，并链接到此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T18:53:33.383

感谢您的意见，Box 已根据此反馈更改了我们处理刷新令牌的方式，以及与我们的一些合作伙伴开发人员和客户的一些详细讨论。

盒子从 14 天移到 60 天。这本身应该会减少超出大多数应用程序开发人员对其应用程序所需的超时用户数。

我们还可能更重要的是，当网络错误发生时，我们不会在发布新令牌后立即使刷新令牌无效。如果由于某种原因您没有获得新的刷新令牌，只需回调以使用旧的刷新令牌获取新令牌。您可以根据需要多次执行此操作，直到获得新的访问令牌和刷新令牌。

一旦您使用新的访问令牌成功调用，我们就知道您已经获得了新的对，并且我们使旧的刷新令牌无效。这也有助于多服务器环境更好地工作，因为获取新 RT 的同时请求将从集群中的多个服务器工作。

# javascript - 如何在浏览器上的链接和后台服务上的java程序之间进行通信。？

> ID：14170863
> 
> 赞同：0
> 
> 时间：2013-01-05T10:25:23.050
> 
> 标签：javascript, jsp

我正在尝试开发反网络钓鱼软件。我想获取在浏览器上单击的 url，并将其发送到一个 java 应用程序，该应用程序在后台作为服务运行，然后再访问 url 的页面。我是新手。我在net中搜索了浏览器和java之间的通信，但我找不到解决方案。请帮助我，我想知道开发它需要了解哪些语言和概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:33:58.770

您需要使用`ajax`并`javascript`构建异步请求。

[在这里](http://en.wikipedia.org/wiki/Ajax_%28programming%29)查看一般描述。

然后，您可以使用像[jQuery](http://jquery.com/)这样的 javascript 框架来进行简单的请求。

# php - jquery datatables mysql php DataTables warning (table id='displayData'): DataTables warning: JSON data from could not be parsed

> ID：14170864
> 
> 赞同：0
> 
> 时间：2013-01-05T10:25:23.330
> 
> 标签：php, jquery, mysql, datatables

加载数据表时出现以下消息错误

DataTables 警告（表 id='displayData'）：DataTables 警告：无法解析来自的 JSON 数据。

我的灵感来自 http://datatables.net/examples/server_side/server_side.html

我的html代码：

```
<!DOCTYPE html>

<html>

    <head>
        <title>Hello jQuery world!</title>
        <link rel="stylesheet" type="text/css" href="../jquery/css/192/ui-lightness/jquery-ui-1.9.2.custom.css">
        <style type="text/css">
            @import "../jquery/datatables/194/media/css/demo_page.css";
            @import "../jquery/datatables/194/media/css/demo_table.css";
        </style>
        <script type="text/javascript" src="../jquery/js/183/jquery-1.8.3.js"></script>
        <!-- <script type="text/javascript" src="../jquery/js/192ui/jquery-ui-1.9.2.custom.js"></script> -->
        <script type="text/javascript" charset="utf-8" src="../jquery/datatables/194/media/js/jquery.dataTables.js"></script>
        <script type="text/javascript" src="../js/26script.js"></script>
    </head>

    <body>

<table cellpadding="0" cellspacing="0" border="0" class="display" id="displayData"> 

    <thead>
        <tr>
            <th align="left">id</th>
            <th align="left">codepays</th>
            <th align="left">CodePostal</th>
            <th align="left">Ville</th>
            <th align="left">nomadmin</th>

        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="5" class="dataTables_empty">Loading data from server</td> 
        </tr>
    </tbody>
</table>
</html> 
```

我的javascript 26script.js：

```
$(document).ready(function() {

    $('#displayData').dataTable({

        "sAjaxSource" : "../data/json/261arrays.php",

    });
}); 
```

我也尝试过以下选项

```
$(document).ready(function() {

    $('#displayData').dataTable({
                "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource" : "../data/json/261arrays.php",

    });
}); 
```

我的 php 脚本。（我正在使用 PDO 访问我的 mysql 数据库。）

```
<?php

$aColumns = array('id', 'codepays', 'CodePostal', 'Ville', 'nomadmin');

$dsn = 'mysql:host=localhost;dbname=';
$db = 'fde_travel';
$username = 'root';
$password = 'root';

//Initialisation de la liste
$list = array();
$listt = array();
$sTable = "tvl_cp";
$sIndexColumn = "id";

//Connexion MySQL
$options = array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8", PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);

try {
    $db = new PDO($dsn . $db, $username, $password, $options);
} catch (Exception $ex) {
    echo $ex -> getMessage();
}

//Construction de la requete
$sQuery = "SELECT id id ,codepays  , CP CodePostal, VILLE Ville, nomadmin1 nomadmin FROM tvl_cp limit 100";

$query = $db -> prepare($sQuery);

$query -> execute();

$ar = array();
$num = 0;

while ($listt = $query -> fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_NEXT)) {
    $ar[$num] = $listt;
    $num = $num + 1;

}

$oututt['aaData'] = $ar;

//header('Content-type: application/json');

echo json_encode($oututt);

?> 
```

当我记录我的结果数组时，我得到一个具有以下结构的数组：

```
{
    "aaData": [
        [
            "1",
            "BE",
            "1000",
            "Bruxelles",
            "Bruxelles-Capitale"
        ],
        [
            "2",
            "BE",
            "1005",
            "Conseil Region Bruxelles-Capitale",
            "Bruxelles-Capitale"
        ],
        [
            "3",
            "BE",
            "1006",
            "Raad Vlaamse Gemeenschapscommissie",
            "Bruxelles-Capitale"
        ],
        [
            "4",
            "BE",
            "1007",
            "Ass. Commiss. Communau. française",
            "Bruxelles-Capitale"
        ],
        [
            "100",
            "BE",
            "1700",
            "Dilbeek Sint-Ulriks-Kapelle",
            "Vlaanderen"
        ]
    ]
} 
```

我在 http://jsonlint.com/ 中检查了这个数组，它是格式良好的 json 数组

例如，当我复制这个数组并粘贴到一个扩展名为 file.json 的文件中时，如果我修改了我的脚本，我的数据表就会被加载，我可以在屏幕上看到结果。

我也尝试过 http://debug.datatables.net/ 错误来查看我的数组中的最终问题，但我不明白它是如何工作的。

我修改了什么以在屏幕上显示，我的 json 数组由 php 脚本实现？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T21:38:32.417

是的，似乎 php 返回的预期结果无法处理数据表库。

json 文件中的数组模式不能与 php 脚本生成的 json 数组模式相同。[因此，如果我们遵循参考http://www.datatables.net/examples/data_sources/server_side.html](http://www.datatables.net/examples/data_sources/server_side.html)的示例中发生的情况

```
$output = array(
        "sEcho" => 1,
        "iTotalRecords" => 100,
        "iTotalDisplayRecords" => 100,
        "aaData" => array()
    );

while ($aRow = $query -> fetch(PDO::FETCH_ASSOC)) {
    $row = array();
    for ( $i=0 ; $i<count($aColumns) ; $i++ ) {
        if ( $aColumns[$i] != ' ' ) {
            /* General output */
            $row[] = $aRow[ $aColumns[$i] ];
        }
    }
    $output['aaData'][] = $row;
}

echo json_encode($output); 
```

我们得到以下由 php 脚本生成的 json 数组的结构

```
{
    "sEcho": 1,
    "iTotalRecords": 100,
    "iTotalDisplayRecords": 100,
    "aaData": [
        [
            "1",
            "BE",
            "1000",
            "Bruxelles",
            "Bruxelles-Capitale"
        ],
        [
            "2",
            "BE",
            "1005",
            "Conseil Region Bruxelles-Capitale",
            "Bruxelles-Capitale"
        ],
        [
            "3",
            "BE",
            "1006",
            "Raad Vlaamse Gemeenschapscommissie",
            "Bruxelles-Capitale"
        ],
        [
            "4",
            "BE",
            "1007",
            "Ass. Commiss. Communau. française",
            "Bruxelles-Capitale"
        ],
        [
            "100",
            "BE",
            "1700",
            "Dilbeek Sint-Ulriks-Kapelle",
            "Vlaanderen"
        ]
    ]
} 
```

在 datatables.net 网站中，使用“mysql_query”获取数据（我不喜欢，因为 php 弃用了 mysql 接口）。php 建议mysqli 接口。但是对于其他数据库，我们可能需要使用 PDO 接口。要使用 PDO 接口获得相同模式的相同结果，必须编写： fetch(PDO::FETCH_ASSOC)

# mysql - 每个 SELECT 字段的 WHERE 子句？

> ID：14170865
> 
> 赞同：2
> 
> 时间：2013-01-05T10:25:28.560
> 
> 标签：mysql

```
id  by  for  amount
 1   8   5     50
 2   5   7     30
 3   6   5     80
 4   5   3     40 
```

我该怎么做

```
 SELECT SUM(`amount`)[//WHERE for=5] - SUM(`amount`)[//WHERE by=5] FROM table
 i.e. 130-70 
```

所以我有一张桌子..
我想像上面那样执行查询..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:27:52.413

你可以使用一个`case`语句

```
SELECT SUM(case when `for`=5 then `amount` else 0 end) - 
       SUM(case when `by`=5 then `amount` else 0 end)
FROM table 
```

`amount`仅针对特定情况添加，`0`否则添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:37:21.710

你可以做这样的事情，

```
SELECT DISTINCT((SELECT SUM(amt) FROM tablename WHERE for = 5) - 
      (SELECT SUM(amt) FROM tablename WHERE by = 5)) 
FROM tablename; 
```

在 MySQL 中为我工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T10:38:44.297

您还可以使用[`IF()`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html/) 功能：

```
SELECT SUM( IF(`for`=5, `amount`, 0)) - 
       SUM( IF(`by`=5,  `amount`, 0))
FROM tablename 
```

`IF()`工作方式如下：

```
IF(<condition>, <value if true>, <value if false>) 
```

我使用 `IF()`within`SUM()` **来添加** `amount`，**如果** `for/by`等于`5` **else** `0`将被添加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T10:54:27.807

```
 SELECT 
  SUM(
 CASE
    WHEN _for = 5
    THEN amount
    ELSE 0
 END
 ) - SUM(
 CASE
    WHEN _by = 5
    THEN amount
    ELSE 0
 END
 ) AS val
  FROM temp 
```

# android - Android json error.index 超出范围

> ID：14170866
> 
> 赞同：0
> 
> 时间：2013-01-05T10:25:31.087
> 
> 标签：android

我正在尝试从 mysql 获取值并将它们插入到 sqlite 数据库中。但是我在 json 索引超出范围时遇到错误。

**这是我的代码**。 **我得到 json 解析异常**：

```
 protected void onPostExecute(Void v) 
     {
        try{
            Database1 db=new Database1(getApplicationContext());

            JSONArray jArray = new JSONArray(result);

            for(int i=0;i<=jArray.length();i++)
              {
                 JSONObject json_data = jArray.getJSONObject(i);

                    // list1.add(json_data.getString("id"));
                            int s=json_data.getInt("id");
                  j=json_data.getString("name");

              db.open();
              db.inserttable1(s,j);

                   Toast.makeText(getBaseContext(),s+j,Toast.LENGTH_LONG).show();

                  }
              }            
            catch(JSONException e)
             {
                    Log.e("log_tag", "Error parsing data "+e.toString());
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T10:31:15.313

看这里：`for(int i=0;i<=jArray.length();i++)`

`i=jArray.length()`当过于频繁时，循环仍将执行。

将循环更改为

```
for(int i=0;i<jArray.length();i++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T10:30:48.510

将您的 for 循环更改为以下代码

```
 for(int i=0;i<jArray.length();i++)
              {
                        JSONObject json_data = jArray.getJSONObject(i);

                // list1.add(json_data.getString("id"));
                        int s=json_data.getInt("id");
              j=json_data.getString("name");

             db.open();
          db.inserttable1(s,j);

               Toast.makeText(getBaseContext(),s+j,Toast.LENGTH_LONG).show();

              } 
```

# php - yii 过滤器占位符

> ID：14170870
> 
> 赞同：1
> 
> 时间：2013-01-05T10:26:25.900
> 
> 标签：php, yii

在我的`CGridview`过滤器部分，我需要占位符。这在 Yii 中可能吗？

或者这是否可以通过扩展到包含占位符的`CGridview`容纳标签来实现。`filterOptions`如果是，如何扩展 CGridview？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:27:04.340

I don't think that extending class is need for this purpose, just use

```
'filter'=>CHtml::activeTextField($model, attribute, 
                 array('placeholder'=>'place holder text'))), 
```

# regex - Bash 正则表达式电子邮件匹配

> ID：14170873
> 
> 赞同：4
> 
> 时间：2013-01-05T10:26:55.907
> 
> 标签：regex, bash, email

我正在尝试使用 bash 中的正则表达式匹配一些电子邮件地址。目前得到了表达

```
"^[a-zA-Z0-9!#\$%&'\*\+/=?^_\`{|}~-]+(\.[a-zA-Z0-9!#\$%&'\*\+/=?^_\`{|}~-]+)*@([a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\$" 
```

哪个成功匹配了我需要的所有电子邮件，但是当尝试添加“收件人：”字段时，我似乎无法获得任何匹配项，我不知道为什么。这是我的 To 字段代码。

```
"^To:\s[a-zA-Z0-9!#\$%&'\*\+/=?^_\`{|}~-]+(\.[a-zA-Z0-9!#\$%&'\*\+/=?^_\`{|}~-]+)*@([a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\$" 
```

哪个 AFAIK 应该与“收件人：bob@bob.co.uk”匹配，但不匹配:( 有什么建议吗？

代码示例

```
Reply-To: "service@paypal.com" <service@paypal.com>
To: bob@bob.co.uk
Date: Mon, 21 Jun 2012 21:34:10 -0300 
```

用于搜索文件并添加到数组的代码

```
regex="^[a-zA-Z0-9!#\$%&'\*\+/=?^_\`{|}~-]+(\.[a-zA-Z0-9!#\$%&'\*\+/=?^_\`{|}~-]+)*@([a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\$"

for i in $(cat mailbox.mbx); do 
    if [[ $i =~ $regex ]]; then
    echo $i
    sortarray[$index]=$i
    index=$(($index+1))
    fi
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T13:52:42.127

bash 正则表达式不理解 perl-ish `\s`。你必须使用 posix-ish `[[:space:]]`。你也应该在那里添加一个量词

我看到你有锚`$regex`：那些绊倒你吗？

对于像这样的大量正则表达式，我喜欢零碎地构建它们：

```
char='[[:alnum:]!#\$%&'\''\*\+/=?^_\`{|}~-]'
name_part="${char}+(\.${char}+)*"
domain="([[:alnum:]]([[:alnum:]-]*[[:alnum:]])?\.)+[[:alnum:]]([[:alnum:]-]*[[:alnum:]])?"
begin='(^|[[:space:]])'
end='($|[[:space:]])'

# include capturing parentheses, 
# these are the ** 2nd ** set of parentheses (there's a pair in $begin)
re_email="${begin}(${name_part}@${domain})${end}"

line="To: joe.smith@example.com"

[[ $line =~ $re_email ]] && echo ${BASH_REMATCH[2]}
# prints: joe.smith@example.com 
```

当然，电子邮件地址非常复杂——http: [//www.w3.org/Protocols/rfc822/#z8——](http://www.w3.org/Protocols/rfc822/#z8)几乎任何地方都应该允许评论和空格。其实`(hi there) "My First Name".lastname (another comment) @ domain.(really)invalid`应该算是一个有效的地址。有一个 Perl 模块[Email::Address](https://metacpan.org/module/Email%3a%3aAddress)生成这个正则表达式：

```
$ perl -MEmail::Address -E 'say $Email::Address::addr_spec'  
(?-xism:(?-xism:(?-xism:(?-xism:(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|))*\s*\)\s*)))*\s*\)\s*)|\s+)*(?-xism:[^\x00-\x1F\x7F()<>\[\]:;@\\,."\s]+(?:\.[^\x00-\x1F\x7F()<>\[\]:;@\\,."\s]+)*)(?-xism:(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|))*\s*\)\s*)))*\s*\)\s*)|\s+)*)|(?-xism:(?-xism:(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|))*\s*\)\s*)))*\s*\)\s*)|\s+)*"(?-xism:(?-xism:[^\\"])|(?-xism:\\(?-xism:[^\x0A\x0D])))+"(?-xism:(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|))*\s*\)\s*)))*\s*\)\s*)|\s+)*))\@(?-xism:(?-xism:(?-xism:(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|))*\s*\)\s*)))*\s*\)\s*)|\s+)*(?-xism:[^\x00-\x1F\x7F()<>\[\]:;@\\,."\s]+(?:\.[^\x00-\x1F\x7F()<>\[\]:;@\\,."\s]+)*)(?-xism:(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|))*\s*\)\s*)))*\s*\)\s*)|\s+)*)|(?-xism:(?-xism:(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|))*\s*\)\s*)))*\s*\)\s*)|\s+)*\[(?:\s*(?-xism:(?-xism:[^\[\]\\])|(?-xism:\\(?-xism:[^\x0A\x0D]))))*\s*\](?-xism:(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|(?-xism:\s*\((?:\s*(?-xism:(?-xism:(?>[^()\\]+))|(?-xism:\\(?-xism:[^\x0A\x0D]))|))*\s*\)\s*)))*\s*\)\s*)|\s+)*))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:04:30.460

此正则表达式应匹配所需的字符串：

```
"^To: (.+@.+)$" 
```

电子邮件存储在`$1`

# vb.net - 在 LongListSelector 中绑定数据

> ID：14170878
> 
> 赞同：0
> 
> 时间：2013-01-05T10:27:36.630
> 
> 标签：vb.net, windows-phone-7, longlistselector

当我尝试更新 LongListSelector 控件的 ItemsSource 属性时，发生 ArgumentNullReference 异常。

**XAML 代码：**

```
<phone:LongListSelector x:Name="LongListSelectorMain" Margin="-12,0,0,0" ItemsSource="{Binding Items}" LayoutMode="List">
            <phone:LongListSelector.DataContext>
                <local:MainViewModel/>
            </phone:LongListSelector.DataContext>
            <phone:LongListSelector.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="0,0,0,30">
                        <TextBlock FontSize="25" Text="{Binding LineOne}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                        <TextBlock FontSize="25" Text="{Binding LineTwo}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                        <TextBlock FontSize="25" Text="{Binding LineThree}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                    </StackPanel>
                </DataTemplate>
            </phone:LongListSelector.ItemTemplate>
        </phone:LongListSelector> 
```

**物品类别**

```
Public Class ItemViewModel
Implements INotifyPropertyChanged
Private _lineOne As String
''' <summary>
''' Proprietà ViewModel di esempio: questa proprietà viene utilizzata per visualizzare il relativo valore mediante un'associazione.
''' </summary>
''' <returns></returns>
Public Property LineOne() As String
    Get
        Return _lineOne
    End Get
    Set(ByVal value As String)
        If Not value.Equals(_lineOne) Then
            _lineOne = value
            NotifyPropertyChanged("LineOne")
        End If
    End Set
End Property

Private _lineTwo As String
''' <summary>
''' Proprietà ViewModel di esempio: questa proprietà viene utilizzata per visualizzare il relativo valore mediante un'associazione.
''' </summary>
''' <returns></returns>
Public Property LineTwo() As String
    Get
        Return _lineTwo
    End Get
    Set(ByVal value As String)
        If Not value.Equals(_lineTwo) Then
            _lineTwo = value
            NotifyPropertyChanged("LineTwo")
        End If
    End Set
End Property

Private _Skipass As Skipass
''' <summary>
''' Proprietà ViewModel di esempio: questa proprietà viene utilizzata per visualizzare il relativo valore mediante un'associazione.
''' </summary>
''' <returns></returns>
Public Property Skipass() As Skipass
    Get
        Return _Skipass
    End Get
    Set(ByVal value As Skipass)
        If Not value.Equals(_Skipass) Then
            _Skipass = value
            NotifyPropertyChanged("Skipass")
        End If
    End Set
End Property

Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged
Private Sub NotifyPropertyChanged(ByVal propertyName As String)
    Dim handler As PropertyChangedEventHandler = PropertyChangedEvent
    If Nothing IsNot handler Then
        handler(Me, New PropertyChangedEventArgs(propertyName))
    End If
End Sub 
```

结束类

**数据上下文**

```
Public Class MainViewModel
Implements INotifyPropertyChanged

Public Sub New()
    Me.Items = New ObservableCollection(Of ItemViewModel)()
End Sub

''' <summary>
''' Raccolta per oggetti ItemViewModel.
''' </summary>
Private _items As ObservableCollection(Of ItemViewModel)
Public Property Items() As ObservableCollection(Of ItemViewModel)
    Get
        Return _items
    End Get
    Private Set(ByVal value As ObservableCollection(Of ItemViewModel))
        _items = value
    End Set
End Property

Private _sampleProperty As String = "Sample Runtime Property Value"
''' <summary>
''' Proprietà ViewModel di esempio: questa proprietà viene utilizzata per visualizzare il relativo valore mediante un'associazione
''' </summary>
''' <returns></returns>
Public Property SampleProperty() As String
    Get
        Return _sampleProperty
    End Get
    Set(ByVal value As String)
        If Not value.Equals(_sampleProperty) Then
            _sampleProperty = value
            NotifyPropertyChanged("SampleProperty")
        End If
    End Set
End Property

Private _isDataLoaded As Boolean
Public Property IsDataLoaded() As Boolean
    Get
        Return _isDataLoaded
    End Get
    Private Set(ByVal value As Boolean)
        _isDataLoaded = value
    End Set
End Property

''' <summary>
''' Crea e aggiunge alcuni oggetti ItemViewModel nella raccolta di elementi.
''' </summary>
Public Sub LoadData()
    'Dati di esempio; sostituirli con dati reali
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime one", .LineTwo = "Maecenas praesent accumsan bibendum", .LineThree = "Facilisi faucibus habitant inceptos interdum lobortis nascetur pharetra placerat pulvinar sagittis senectus sociosqu"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime two", .LineTwo = "Dictumst eleifend facilisi faucibus", .LineThree = "Suscipit torquent ultrices vehicula volutpat maecenas praesent accumsan bibendum dictumst eleifend facilisi faucibus"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime three", .LineTwo = "Habitant inceptos interdum lobortis", .LineThree = "Habitant inceptos interdum lobortis nascetur pharetra placerat pulvinar sagittis senectus sociosqu suscipit torquent"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime four", .LineTwo = "Nascetur pharetra placerat pulvinar", .LineThree = "Ultrices vehicula volutpat maecenas praesent accumsan bibendum dictumst eleifend facilisi faucibus habitant inceptos"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime five", .LineTwo = "Maecenas praesent accumsan bibendum", .LineThree = "Maecenas praesent accumsan bibendum dictumst eleifend facilisi faucibus habitant inceptos interdum lobortis nascetur"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime six", .LineTwo = "Dictumst eleifend facilisi faucibus", .LineThree = "Pharetra placerat pulvinar sagittis senectus sociosqu suscipit torquent ultrices vehicula volutpat maecenas praesent"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime seven", .LineTwo = "Habitant inceptos interdum lobortis", .LineThree = "Accumsan bibendum dictumst eleifend facilisi faucibus habitant inceptos interdum lobortis nascetur pharetra placerat"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime eight", .LineTwo = "Nascetur pharetra placerat pulvinar", .LineThree = "Pulvinar sagittis senectus sociosqu suscipit torquent ultrices vehicula volutpat maecenas praesent accumsan bibendum"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime nine", .LineTwo = "Maecenas praesent accumsan bibendum", .LineThree = "Facilisi faucibus habitant inceptos interdum lobortis nascetur pharetra placerat pulvinar sagittis senectus sociosqu"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime ten", .LineTwo = "Dictumst eleifend facilisi faucibus", .LineThree = "Suscipit torquent ultrices vehicula volutpat maecenas praesent accumsan bibendum dictumst eleifend facilisi faucibus"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime eleven", .LineTwo = "Habitant inceptos interdum lobortis", .LineThree = "Habitant inceptos interdum lobortis nascetur pharetra placerat pulvinar sagittis senectus sociosqu suscipit torquent"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime twelve", .LineTwo = "Nascetur pharetra placerat pulvinar", .LineThree = "Ultrices vehicula volutpat maecenas praesent accumsan bibendum dictumst eleifend facilisi faucibus habitant inceptos"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime thirteen", .LineTwo = "Maecenas praesent accumsan bibendum", .LineThree = "Maecenas praesent accumsan bibendum dictumst eleifend facilisi faucibus habitant inceptos interdum lobortis nascetur"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime fourteen", .LineTwo = "Dictumst eleifend facilisi faucibus", .LineThree = "Pharetra placerat pulvinar sagittis senectus sociosqu suscipit torquent ultrices vehicula volutpat maecenas praesent"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime fifteen", .LineTwo = "Habitant inceptos interdum lobortis", .LineThree = "Accumsan bibendum dictumst eleifend facilisi faucibus habitant inceptos interdum lobortis nascetur pharetra placerat"})
    'Me.Items.Add(New ItemViewModel() With {.LineOne = "runtime sixteen", .LineTwo = "Nascetur pharetra placerat pulvinar", .LineThree = "Pulvinar sagittis senectus sociosqu suscipit torquent ultrices vehicula volutpat maecenas praesent accumsan bibendum"})

    Me.IsDataLoaded = True
End Sub

Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged
Private Sub NotifyPropertyChanged(ByVal propertyName As String)
    Dim handler As PropertyChangedEventHandler = PropertyChangedEvent
    If handler IsNot Nothing Then
        handler(Me, New PropertyChangedEventArgs(propertyName))
    End If
End Sub 
```

结束类

如您所见，我刚刚使用了 Microsoft 提供的默认示例……但老实说，我无法弄清楚为什么我会得到 NullReference。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:01:27.750

您可以在声明 ItemsSource 绑定到的资源的位置发布 XAML 吗？

这是一个猜测，因为您尚未发布此内容，但如果您提供 Name 和 Key 则资源未初始化，这将导致您的空引用异常...

```
<UserControl.Resources>
    <viewModel:FeedsViewModel x:Key="FeedsViewModel" x:Name="FeedsViewModel"/>
</UserControl.Resources> 
```

如果您只声明一个密钥，那么它会自动初始化......

```
<UserControl.Resources>
    <viewModel:FeedsViewModel x:Key="FeedsViewModel"/>
</UserControl.Resources> 
```

但请记住，您必须通过用户控件的资源字典来引用它，而不是作为用户控件的属性。

# c - USB协议实现的程序设计

> ID：14170881
> 
> 赞同：4
> 
> 时间：2013-01-05T10:28:15.530
> 
> 标签：c, usb, libusb

我有一个想要实现的 USB 协议，但我对实现它的最佳方式有点迷茫。

USB 协议涉及来回交换数据和确认数据包，如下所示：

```
Device: data
Host: ACK
Host: reply
Device: ACK 
```

但有时，数据包可能会像这样异步传入：

```
Device: data #1
Device: data #2
Host: ACK #1
... 
```

我希望有一个 API 可以抽象出 USB 的所有细节，让程序只处理实际数据，而不必担心数据包标头或确认数据包或类似的事情。理想情况下，会有一个`write_to_device`函数在设备确认数据包之前阻塞，一个函数`read_from_device`会阻塞直到接收到数据包，以及一个`is_data_available`函数会立即返回队列中是否有任何数据。

我正在考虑运行一个单独的线程来处理 USB 事件。该线程将处理所有数据封装和确认。

当数据包进来时，处理线程将发送一个 ACK​​ 数据包，然后提取原始数据并将其写入管道。该`read_from_device`函数（从主线程调用）将简单地从此管道读取并自然阻塞，直到有数据。但是如果我使用这个方案，我将没有一种干净的方式来实现一个`is_data_available`函数——没有办法在不读取管道的情况下检查管道中是否有数据。

像这样的东西：

```
[ Main thread    ][ Processing thread   ]
| Read from pipe ||                     |
|                || USB packet comes in |
|                || Send ACK packet     |
|                || Extract data        |
|                || Write data to pipe  |
| Read succeeds  ||                     |
| Return data    ||                     | 
```

真正的问题是实现一个`write_to_device`功能。

```
[ Main thread                ][ Processing thread      ]
| Somehow signal write       ||                        |
| Wait for write to complete ||                        |
|                            || Send the data          |
|                            || Wait for ACK packet    |
|                            || Somehow signal that write completed
| Return                     ||                        | 
```

我怎样才能干净地实现一种发送数据包的方法，等待确认数据包然后返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:19:11.773

我建议您创建一个自定义管道类或结构或其他东西。为此，您定义了一个 write 方法，该方法还等待信号量触发。如果您在 linux 上，`sem_wait`（来自信号量函数系列，`sem_*`）是您想要查看的内容。

然后 write 函数将数据写入 FIFO 并等待信号量被标记。但是，写入线程如何知道所有数据何时通过您要发送的管道到达？如果线程必须以阻塞方式读取，则此处可能会出现问题。

所以我建议你在从主线程到处理线程的管道内使用微格式，发送一个整数大小，它定义了你要写入的字节数。然后，处理线程将读取该数量的字节，将其转发到设备并在标记所有数据后立即标记信号量。该`write`函数将等待信号量，因此在处理线程完成之前不会忙阻塞。

这就是可以起草自定义管道结构和概述的写入函数的方式：

```
#include <stdlib.h>
#include <unistd.h>
#include <semaphore.h>

typedef struct {
    int write_to_pipe, read_from_pipe;
    sem_t *write_sem;
} MyPipe;

MyPipe *pipe_new() {
    int fds[2];
    if (pipe(fds)) {
        // handle error here
        return NULL;
    }

    sem_t *sem = NULL;
    if (sem_init(sem, 0, 0)) {
        // handle error here
        close(fds[0]);
        close(fds[1]);
        return NULL;
    }

    MyPipe *result = malloc(sizeof(MyPipe));
    result->write_to_pipe = fds[1];
    result->read_from_pipe = fds[0];
    result->write_sem = sem;
    return result;
}

void pipe_write(MyPipe *pipe, const unsigned char *buf, const int size) {
    write(pipe->write_to_pipe, &size, sizeof(int));
    write(pipe->write_to_pipe, buf, size);
    sem_wait(pipe->write_sem);
} 
```

处理线程将知道`MyPipe`实例并在需要时读取`read_from_pipe`。它首先读取主线程写入管道的字节数，然后读取所有字节任意块。在所有数据都已发送到设备并被它确认后，它可以发送`sem_post`信号量，因此`pipe_write`将返回。

可选地，可以添加*另一个*信号量，该信号量`pipe_write`发布以使处理线程仅在实际有数据可用时才读取数据。

**免责声明：**没有测试代码，只检查它是否可以编译。需要用 构建`-pthread`，才能`sem_*`使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:31:23.537

`libusb`或多或少已经完成了您所描述的一切。每个 USB 端点都可以看作是一个数据报套接字，您可以使用`libusb_interrupt_transfer`（或`libusb_control_transfer`）对其进行写入。在这些函数中，您传递一个用作输入或输出的数组。无需发送确认等。输入或输出的方向取决于端点的配置。

还有一个[异步 API](http://libusb.sourceforge.net/api-1.0/group__asyncio.html)，您可以在其中启动传输并将一些文件描述符添加到您的主循环`select`或`poll`循环中，并最终在 I/O 完成时获得回调。

# android - 通过preferenceActivity清除webview的历史？

> ID：14170883
> 
> 赞同：0
> 
> 时间：2013-01-05T10:28:53.987
> 
> 标签：android

我已经在我的应用程序中设置了一个preferenceActivity，并且我添加了一个 . 单击该首选项时，我想删除我在主要活动中拥有的 web 视图的历史记录。

我怎样才能做到这一点？我无法从首选项活动创建指向 web 视图的链接，因为它不在屏幕上，并且使用`MyActivity.wv.clearHistory();`不起作用。

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:37:43.827

如果我在“onPageFinished”中执行此操作，我仍然遇到无法清除历史记录的情况，因此我最终在 WebChromeClient 的“onProgressChanged”中执行此操作：

```
webView.setWebChromeClient(new WebChromeClient() {
  public void onProgressChanged(WebView view, int progress) {
    if (progress == 100 && mClearWebViewOnPageLoaded) {
      view.clearHistory();
      mClearWebViewOnPageLoaded = false;
    }
  }
}); 
```

# c# - 编辑注册表项

> ID：14170886
> 
> 赞同：2
> 
> 时间：2013-01-05T10:29:13.007
> 
> 标签：c#, .net, c#-4.0, registry, registrykey

我需要编辑那些注册表项

```
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\SafeBoot\Minimal
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\SafeBoot\Network 
```

至

```
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\SafeBoot\Minimal-
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\SafeBoot\Network- 
```

我试过了

```
RegistryKey key = Registry.LocalMachine.OpenSubKey(@"System\CurrentControlSet\Control\SafeBoot\Minimal", true); 
```

但是没有重命名，复制方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T10:31:52.423

从[复制和重命名注册表项](http://www.codeproject.com/Articles/16343/Copy-and-Rename-Registry-Keys)项目：

```
using System;
using System.Collections.Generic;
using System.Text;
using Microsoft.Win32;

// RenameRegistryKey © Copyright 2006 Active Computing
namespace RenameRegistryKey
{
    public class RegistryUtilities
    {
        /// <summary>
        /// Renames a subkey of the passed in registry key since 
        /// the Framework totally forgot to include such a handy feature.
        /// </summary>
        /// <param name="regKey">The RegistryKey that contains the subkey 
        /// you want to rename (must be writeable)</param>
        /// <param name="subKeyName">The name of the subkey that you want to rename
        /// </param>
        /// <param name="newSubKeyName">The new name of the RegistryKey</param>
        /// <returns>True if succeeds</returns>
        public bool RenameSubKey(RegistryKey parentKey, 
            string subKeyName, string newSubKeyName)
        {
            CopyKey(parentKey, subKeyName, newSubKeyName);
            parentKey.DeleteSubKeyTree(subKeyName);
            return true;
        }

        /// <summary>
        /// Copy a registry key.  The parentKey must be writeable.
        /// </summary>
        /// <param name="parentKey"></param>
        /// <param name="keyNameToCopy"></param>
        /// <param name="newKeyName"></param>
        /// <returns></returns>
        public bool CopyKey(RegistryKey parentKey, 
            string keyNameToCopy, string newKeyName)
        {
            //Create new key
            RegistryKey destinationKey = parentKey.CreateSubKey(newKeyName);

            //Open the sourceKey we are copying from
            RegistryKey sourceKey = parentKey.OpenSubKey(keyNameToCopy);

            RecurseCopyKey(sourceKey, destinationKey);

            return true;
        }

        private void RecurseCopyKey(RegistryKey sourceKey, RegistryKey destinationKey)
        {
            //copy all the values
            foreach (string valueName in sourceKey.GetValueNames())
            {        
                object objValue = sourceKey.GetValue(valueName);
                RegistryValueKind valKind = sourceKey.GetValueKind(valueName);
                destinationKey.SetValue(valueName, objValue, valKind);
            }

            //For Each subKey 
            //Create a new subKey in destinationKey 
            //Call myself 
            foreach (string sourceSubKeyName in sourceKey.GetSubKeyNames())
            {
                RegistryKey sourceSubKey = sourceKey.OpenSubKey(sourceSubKeyName);
                RegistryKey destSubKey = destinationKey.CreateSubKey(sourceSubKeyName);
                RecurseCopyKey(sourceSubKey, destSubKey);
            }
        }
    }
} 
```

# php - MYSQL + PHP 将两行的数据显示为一列

> ID：14170893
> 
> 赞同：0
> 
> 时间：2013-01-05T10:30:11.437
> 
> 标签：php, mysql

我有一个表格，其中包含以下格式的数据

```
region   gender  age_group  population 

Dallas    M        1          200  
Dallas    F        1          500 
NY        M        1          320 
NY        F        1          310 
Dallas    M        2          300 
Dallas    F        2          600 
NY        M        2          400 
NY        F        2          800 
```

我正在寻找以以下格式输出数据的最佳查询

```
region/age_group      1           2
Gender             M     F       M    F
Dallas             200   500    300  600
NY                 320   310    400  800 
```

我的查询仅返回顶部列和区域。不知道如何将顶部列细分为如上所示的性别

```
SELECT distinct (region), a.group_one, b.group_two 
FROM city_populations c  
LEFT JOIN city_populations AS a ON a.age_group=1 AND c.age_group=a.age_group  
LEFT JOIN city_populations AS b ON b.age_group=2 AND c.age_group=a.age_group 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:33:24.920

//首先我从数据库中获取所有数据

```
$result = mysql_query("select * from test2")or die(mysql_error());
$regions = array();
$age_groups = array();
while($det = mysql_fetch_array($result)){

    if(!in_array($det['region'], $regions)){
        $regions[] = $det['region'];
    }
    if(!in_array($det['age_group'], $age_groups)){
        $age_groups[] = $det['age_group'];
    }
    $rows[] = $det;
} 
```

//然后在php中处理以显示你想要的

```
echo "<table>";
echo "<tr><td>Age group</td>";
foreach($age_groups as $keyAG => $valueAG){
    echo "<td colspan='2'>$valueAG</td>";
}
echo "</tr>";
echo "<tr><td>Gender</td>";
foreach($age_groups as $keyAG => $valueAG){
    echo "<td>M</td>";
    echo "<td>F</td>";
}
echo "</tr>";
foreach($regions as $keyR => $valueR){

    echo "<tr>";
    echo "<td>".$valueR."</td>";
    foreach($age_groups as $keyAG => $valueAG){

        foreach($rows as $keyROWS => $valueROWS){
            if($valueROWS['region'] == $valueR && $valueROWS['age_group'] == $valueAG){
                if($valueROWS['gender'] == 'M'){
                    echo "<td>".$valueROWS['population']."</td>";
                }
                elseif($valueROWS['gender'] == 'F'){
                    echo "<td>".$valueROWS['population']."</td>";
                }
            }
        }
        $data[$valueR][$valueAG] = array($maleValue, $femaleValue);

    }
    echo "</tr>";
}
echo "</table>"; 
```

注意：强烈建议使用 mysqli_* 而不是 mysql。

# javascript - 如何让 jQuery UI Slider 小部件自动播放多年的文本时间线？

> ID：14170897
> 
> 赞同：1
> 
> 时间：2013-01-05T10:30:35.790
> 
> 标签：javascript, jquery, html, jquery-ui-slider

我不确定如何创建一个 jQuery 滑块，它可以在它的***滑块***中显示一个**年度时间线**，并让它**自动播放*****手柄中显示***的当前年份？

热门网站示例： http: **[//maps.eyesontheforest.or.id/](http://maps.eyesontheforest.or.id/)**

在左侧面板中有一个**“天然森林覆盖”**部分，这是我想要实现的。

这是以蓝色显示的 JavaScript 时间线的屏幕截图。

![在此处输入图像描述](../Images/65e713372161ebdca312841c8c79d270.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T12:24:49.067

[**jsFiddle 演示**](http://jsfiddle.net/MFNkD/)

您网页中的参考 URL 为该动画使用了 JavaScript 以外的框架，其中包括播放功能。**编辑：**它使用[**Google Maps API 可视化库**](http://maps.googleapis.com/maps/api/js?sensor=false&libraries=visualization)

然而，我上面的 jsFiddle 是使用**jQuery**和**jQuery UI**完成的，因为使用了带有自己 CSS的**Slider 插件。**

![在此处输入图像描述](../Images/bc1bb7ed93f4b8434eea32f90b173acb.png)

使用`years`紫色文本时，您很快就会发现这些只是标签，不一定反映实际位置值……*只是位置 location*。

[**jsFiddle DEMO YEARS with Autoplay Timeline Button *setTimeout*方法**](http://jsfiddle.net/GpULk/)

[**jsFiddle DEMO YEARS with Autoplay Timeline Button *setInterval*方法**](http://jsfiddle.net/GpULk/1/)

![在此处输入图像描述](../Images/d72b12bd2d455fbc2cfaace6f14d281e.png)

# sqlite - 是否可以从 C API 检测 SQlite 3 编译选项？

> ID：14170901
> 
> 赞同：0
> 
> 时间：2013-01-05T10:30:56.560
> 
> 标签：sqlite

SQLite 3 是否提供宏或其他方式来检查预处理器的编译选项？基本上，我想编写一个函数，`sqlite3_enable_load_extension`如果没有编译 SQLite，则调用该函数，`SQLITE_OMIT_LOAD_EXTENSION`否则返回错误代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:43:22.743

这里有这样的功能： [http ://www.sqlite.org/c3ref/compileoption_get.html](http://www.sqlite.org/c3ref/compileoption_get.html)

# c - 在确定是通过内联还是通过Linux内核中的宏实现功能时，是否有任何标准？

> ID：14170909
> 
> 赞同：1
> 
> 时间：2013-01-05T10:32:31.653
> 
> 标签：c, linux, linux-kernel

就像在 linux 内核源代码中一样，我发现很多函数都是用内联形式实现的，还有很多其他的函数也是用 MACRO 实现的。

所以我想知道在决定选择哪一个时所涉及的考虑是什么，因为我认为两者都是合适的。或者这只是一种个人风格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:40:50.503

宏不进行类型检查并且需要其他特殊注意事项（即只对表达式求值一次），因此应尽可能避免使用它们。但是，不检查类型的优点是允许您在 C89 中编写泛型函数。

编写真正的`inline`函数还允许（使用可以在内核配置中激活的某个标志）编译器也可以取消内联它，如果这具有性能优势，而这对于宏来说是不可能的，因为它是一个简单的文本替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:41:19.617

作为文本替换的宏可以做的不仅仅是内联函数。它们也可能有不必要的副作用。考虑众所周知的交换宏。

```
#define SWAP(a,b) {int t=a; a=b; b=t} 
```

并注意到`SWAP(i,t[i])`做不想要的事情。

内联函数具有类似语义的函数调用的优点（参数被评估一次，等等......）。

所以这主要是编码风格的问题，以及认识到宏和函数是不同种类的动物。

而且您的问题与内核并没有真正相关。任何 C（甚至 C++）程序都有同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T11:05:05.443

请记住，Linux 内核中的许多代码已经存在了很长一段时间。一些宏还对输入/环境的其他部分做“聪明的事情”，而不是函数会/可以/应该做的事情。

作为一般规则，尽可能使用（内联）函数，因为函数的“陷阱”较少，如上所述。

如果您进行巧妙的替换或其他一些“只能在宏中执行”，那么如果可能的话，最好制作一个形成函数参数的宏。例如

```
#define ASSERT(x)  do { if (!(x)) { fprintf(stderr, "Assertion failed on %s:%d", __FILE__, __LINE__); exit(1); } while(0); 
```

可以这样做：

```
#define ASSERT(x) do_assert(!!(x), __FILE__, __LINE__);

void do_assert(bool val, const char *file, int line)
{
    if (!val)
    {
        fprintf(....);
        exit(1);
    }
} 
```

例如，现在您可以在调试构建中，在 if 内的断言中设置断点，并且每当您的断言失败时，您都可以看到您是如何到达那里的。使用宏，这是不可能的。

如果有一半的机会，现代编译器在适当的时候内联事物方面做得非常好。

# javascript - 如何使用引导程序显示表格每一行的详细信息？

> ID：14170916
> 
> 赞同：0
> 
> 时间：2013-01-05T10:33:36.990
> 
> 标签：javascript, php, twitter-bootstrap, html-table, popover

我的表代码。它包括弹出按钮，我想显示除名称和国家以外的其他详细信息。

```
 while ($data = mysql_fetch_array($result)) 
           {
           echo "<tr>";
           $Name = $data['Name'];
           $Address = $data['Address']; 
           $Tel = $data['Tel'];
           $Email = $data['Email'];
           $Country = $data['Country'];
           $ManufacturerKey = $data['ManufacturerKey'];
           echo "<td>{$Name}</td><td>{$Country}</td>";
           echo '<td><a href="#" id="detail" class="btn btn-danger" rel="popover" data-content="Test" data-original-title="detail">detail</a></td>';
           echo "</tr>"; 
           }
           echo "</table></center>";
           } 
```

和 Javascript：

```
<script>  
    $(function ()  
    { $("#detail").popover({placement:'left'});  
    });  
</script> 
```

我的问题是对 id 感到困惑。在每个表行中，它具有相同的 id，例如“详细信息”。我该如何解决？感谢所有回答。如果您想要更多代码，请告诉我，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:39:07.980

每个标签都必须有一个唯一的 id，这个 html 是不正确的。

您必须使用类选择器。

```
 //add detail in your class
echo '<td><a href="#" id="detail" class="btn btn-danger detail" rel="popover" data-content="Test" data-original-title="detail">detail</a></td>'; 
```

**编辑**：不要忘记更改 id。例如，`id="detail'.$data['id'].'"`如果你有一个 id，你可以这样做。

在您的`JS`（`jQuery`如他所用`bootstrap`）中：

```
//use class selector instead of id selector
$(function ()  {
        $(".detail").popover({placement:'left'});  
    }); 
```

# mysql - 在不同区域运行应用程序是否会导致访问时缓慢

> ID：14170921
> 
> 赞同：0
> 
> 时间：2013-01-05T10:34:21.170
> 
> 标签：mysql, latency, amazon-rds

如果应用程序在不同的区域上运行，延迟是否会显着增加。我的 rails 应用程序在**us-east-1a**上运行，我的 MySQL RDS 数据库在**us-east-1d**上。我的应用程序访问似乎很慢，这会是区域问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:02:20.940

这些区域在不同的数据中心运行，因此延迟肯定会增加。话虽如此，Amazon EC2 用户指南说：

> Amazon EC2 提供将实例放置在多个位置的能力。Amazon EC2 位置由区域和可用区组成。可用区是不同的位置，旨在与其他可用区中的故障隔离，并为同一区域中的其他可用区提供廉价、低延迟的网络连接。

（[来源](http://aws.amazon.com/ec2/)）

所以涨幅应该不会太大。我不知道您所说的“大幅”增加是什么意思（是几毫秒吗？几秒钟？），但我想您确定这是否导致您的延迟问题的最简单方法是运行您的app 和 MySQL 服务器在同一个区域，看看这是否会再次降低延迟。

# java - 创建运行时类特定注册系统的最佳方法？

> ID：14170923
> 
> 赞同：0
> 
> 时间：2013-01-05T10:34:48.020
> 
> 标签：java, c++, oop

我目前正在尝试创建一个系统，在该系统中，我希望能够在运行时为类分配唯一的家庭 ID。本质上，我希望能够在运行时注册后基于整数值区分类。

用例是该系统将用作组件系统的官僚机构。所有类都是类 Component 的后代（不一定直接）；并在运行时注册。

我希望能够这样做有几个原因：

*   **扩展的轻松和安全**：人们不必修改基础组件系统中的巨大列表来添加组件。
*   **效率**：内部查找是使用这个整数值完成的，因此可以是 O(1) 而不是搜索查找。由于这些组件将构成系统的大部分，因此我不希望将其设为实例变量。我不能忽略这方面，因为测试用例已经表明我无法承受 > O(1) 的删除和插入。（第一个实现使用地图查找表）

我正在寻找一个编译时检查的实现；不是基于合同的解决方案。Java中基于合约的解决方案是：

```
interface Component {

   // Should return the value of a static variable
   int getFamilyID();
   int setFamilyID(int id);
}

class Foo implements Component {

   static int familyID = 0;

   int getFamilyID(){ return familyID; }
   int setFamilyID(int id){ familyID = id; }
}

class System {  // Singleton
   static int registeredComponents = 0;
   void register(Component c){ c.setFamilyID(registeredComponents++); }   
} 
```

这显然行不通，原因有两个：

*   除非我将变量公开，否则我无法指定 A.getFamilyID()；用例：c.getFamilyID() == Foo.getFamilyID(); （而不是实例）
*   到处都是冗余代码；Component 的每个实现都需要复制粘贴的实现。

我认为我可以使用指定静态变量的模板来解决 C++ 中的问题，但是当类不是 Component 的直接后代时，这将变得不可用。

我也不能在 Java 中使用枚举，因为它们是特定于语言的，并且组件的数量会使单个文件的代码变得庞大。（另外；它们都必须在一个地方再次指定）

在这件事上的任何帮助或对我为什么要“做错事”（TM）的见解都会很有帮助:-)

**编辑：**为了澄清，我想要一些方法来确保在编译时可以在组件类中设置的静态整数的代码约定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:02:54.483

您基本上要求的是在编译时检查特定的运行时行为。在一般情况下，这根本是不可能的：您可以编写所有想要的函数，但编译器将永远无法确保您为每种类型调用一次给定函数，并且只调用一次。最好的办法是使用某种静态变量，将函数设为私有，然后在构造函数中调用注册：

```
class Component
{
protected:
    class Registrator
    {
        static int nextId;
        int id;
    public:
        Registrator() ; id( nextId ++ ) {}
        int id() const { return id; }
    };
    //  ...
};

class Derived ; public Component
{
    static Registrator ourId;
    //  ...
}; 
```

（您也可以在 Java 中执行此操作。只需`static Registrator ourId = new Registrator();`在每个派生类中放入一个静态块。）

您仍然必须（通过合同）要求每个派生类包含一个且仅包含一个 type 的静态成员`Registrator`。顺便说一句，我认为您无法避免这种情况。

请注意，一般来说，只要您有一个基类和派生类，您就需要依靠契约。例如，如果基类具有虚函数`clone`（具有通常的语义），则每个派生类都必须实现它。没有办法在编译时强制执行这种事情；某些按合同习惯进行的编程将允许在运行时强制执行对象`clone`返回的动态类型是正确的，但是即使在运行时，您也无法强制返回的对象是实际副本，而不是一些完全不相关的实例。

我只能说，我在实践中从未发现这是一个问题。任何派生自`Component`（或任何其他基类）的人都必须知道 `Component`. 您可以（并且应该）验证某些事情，但最终，您无法验证所有内容，并且在实践中，派生的人会忽略合同，将创建不起作用的代码，您无能为力关于它。（代码审查在这里有很长的路要走。特别是还包括测试覆盖率的代码审查，坚持所有合同问题都经过测试）

## 编辑：

最后一条评论：我反对使用 an`int`作为标识符。如果比较标识符的性能很重要，您仍然可以使用`char const[]`; 如果您保证所有正确获得的标识符都指向`char const*`相同的字符串（因为您使用的实际标识符将是 a ），您可以只比较指针。派生类的契约是：

```
class Derived : public Component
{
public:
    static char const* className() { return "Derived"; }
    //  overriding virtual function in Component...
    char const* type() const { return className(); }
    //  ...
}; 
```

然后，只需使用`char const*`返回的`className`或 `type`作为您的标识符。

这对于派生类的作者来说要输入更多，但至少在 C++ 中，总是有宏来简化它。事实上，即使使用上面的原始解决方案，我也会为这类事情推荐一个宏。如果派生类都使用宏，您可以更改策略而无需更改任何其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:08:40.977

在 C++ 中，您可以使用[奇怪重复的模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)来避免代码重复。

```
class Component 
{
public:
    virtual ~Component() {}
    virtual int getFamilyId() const = 0;
};

// each instance is assigned a unique int at construction
class FamilyId 
{ 
    static int numberOfExistingIds = 0;
    int id;
public:
    FamilyId() : id( numberOfExistingIds++ ) {}
    int getId() const { return id; }
};

// implementation is done only in this template class
template <typename Derived, typename Base = Component> 
class ComponentImpl : public Base 
{
    static FamilyId familyId; // one instance per class for unique id
public:
    virtual int getFamilyId() const 
    { 
        assert( typeid(*this) == typeid(Derived) ); 
        return familyId.getId(); 
    }
}; 
```

设置好之后，您可以轻松地在 Component 类层次结构中创建新类。

```
// first derived class, automagically implemented by template magic
class MyGeneralComponent 
    : public ComponentImpl<MyGeneralComponent> 
{
     /* add new methods here */ 
};

// class further down in the hierarchy are also possible, 
// by using the second template argument. The implementation still works. 
class MySpecificComponent 
    : public ComponentImpl<MySpecificComponent,MyGeneralComponent> 
{
     /* add new methods here */ 
}; 
```

`assert(...)`如果您正确地从模板派生，它将在运行时自动检查。所以你会发现像这样的错误

```
class MySpecificComponent : MyGeneralComponent 
{
}; 
```

在运行时。否则，这个派生类将使用与直接基类相同的接口实现并使用相同的静态变量，这将是一个错误。

您可能已经注意到您不需要手动注册任何课程。这是通过在 main() 函数启动之前对静态变量进行动态初始化来完成的。所以你不需要对此做任何事情。通过这种方式，您可以轻松地在一个地方实现您的类，而无需更改其他文件并且无需大量代码重复 -卓越的[开放/封闭原则。](http://en.wikipedia.org/wiki/Open/closed_principle)

# vb.net - 如何在 VB.NET 中找到来自键盘或条形码阅读器的值

> ID：14170926
> 
> 赞同：0
> 
> 时间：2013-01-05T10:35:01.443
> 
> 标签：vb.net

我在 VB.NET 中有一个 Windows 应用程序。我想知道一个值是用户通过键盘输入的，还是来自条形码阅读器。我想将来自键盘的值存储在与来自条形码阅读器的值不同的数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:42:07.210

**选项1：**

获取连接到串行端口（由 COM 端口读取的原始串行设备）的条形码扫描仪。由于大多数条码扫描仪模拟键盘敲击，因此无法直接区分条码扫描仪输入和键盘输入（请参阅下一个选项），而无需进入低级别（请参阅上次更新）。

一个连接到串行端口（或通过 USB 模拟一个，因为串行端口不再那么常见）使您可以完全控制输入的来源。

**选项 2：**

计算按时间键入的字符数。与打字相比，条形码扫描仪注入序列（行）非常快。通过计算按键来测量文本框中使用的时间（使用 CR+LF 作为测量点，因为这些按键也是由扫描仪发送的）可以为您提供一种区分人类是否正在打字的方法（除非有一个快速打字的人如 f) 或内容被注入。如果超时只是拒绝/清除输入。

此外，除了时间测量之外，条形码的校验和（如果您使用包含该校验和的）可用于进行额外的验证。

（您可以通过在下一个选项中覆盖 ctrl + v 来检测粘贴）。

**选项 3：**

结合选项 2，但不是在文本框中测量，而是点击 ProcessCmdKey() 函数（通过覆盖它）并在文本框有焦点时测量。这样，您可以首先缓冲输入，测量时间，如果在设定的超时值内，将行注入文本框。

**选项 4：**

这也可能是一个不错的选择：http:
[//nicholas.piasecki.name/blog/2009/02/distinguishing-barcode-scanners-from-the-keyboard-in-winforms/](http://nicholas.piasecki.name/blog/2009/02/distinguishing-barcode-scanners-from-the-keyboard-in-winforms/)

**选项 5：**非技术方法 -

可用性改进：使条形码必须用扫描仪输入而不是打字在视觉上非常清晰。我将其作为一个选项包括在内，因为它很简单，如果正确也有效（不幸的是，没有正确答案是正确的）。

接近的可能包括 f.ex。文本框中的水印（“不要输入，扫描！”或按此顺序排列的内容）。给它一个不同的颜色、边框、大小等，以将它与普通文本框区分开来，并有一个相关的帮助文本并随时可用，以提高清晰度。

# sql - 登录失败。登录来自不受信任的域，不能用于 Windows 身份验证

> ID：14170927
> 
> 赞同：20
> 
> 时间：2013-01-05T10:35:06.093
> 
> 标签：sql, web-services, sql-server-2008, https

我的网页位于安全服务器 (https) 上，我正在尝试连接 SQL Server 2008 数据库，这是普通服务器。我在页面本身上写连接字符串，而不是在 web.config 文件中。我收到以下错误：-

```
System.Data.SqlClient.SqlException: Login failed.
The login is from an untrusted domain and cannot be used with Windows authentication. 
```

请帮忙，我该如何连接它，我是否必须为它做一些网络服务。

我的代码如下：

```
public void FillCity()
{
    SqlConnection con = new SqlConnection();
    con.ConnectionString = "integrated security=SSPI;data source=dev-fcb; user id=sa;password=password;" 
    +"persist security info=False;database=mediapro";
    con.Open();
    SqlDataAdapter da = new SqlDataAdapter();
    da.SelectCommand = new SqlCommand("select * from StateCityMaster where IsActive='1' order by CityName", con);
    DataSet ds = new DataSet();
    da.Fill(ds);
    string CityName = string.Empty;
    if (ds.Tables[0].Rows.Count > 0)
    {
        CityName = ds.Tables[0].Rows[0]["CityName"].ToString();
    }
    DataSet dset = new DataSet();
    da.Fill(dset);
    if (dset.Tables[0].Rows.Count > 0)
    {
        drpCity.DataSource = dset;
        drpCity.DataTextField = "CityName";
        drpCity.DataValueField = "CityName";
        drpCity.DataBind();
    }
    drpCity.Items.Insert(0, new ListItem("--Select--", "0"));
    con.Close();
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-05T18:24:57.897

您的连接字符串告诉它使用集成安全 SSPI，它将使用 Windows 凭据。

如果您要提供用户名和密码，请设置`Integrated Security`为。`false`

此外，考虑将连接字符串放在 web.config 文件中 - 它更安全且可重用。

从[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring(v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring(v=VS.100).aspx)：

*如果为 false，则在连接中指定用户 ID 和密码。如果为 true，则使用当前 Windows 帐户凭据进行身份验证。识别值为true、false、yes、no、sspi（强烈推荐），相当于true。如果指定了 User ID 和 Password 并且 Integrated Security 设置为 true，则 User ID 和 Password 将被忽略并使用 Integrated Security。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-10-16T16:33:28.220

我创建了一个新的 Asp.Net Core MVC 站点，但我遇到了同样的错误。我试图在通过 VPN 连接到网络时连接到我公司的数据库。这对我有用：

代替

```
"DevConnection": "Server=DevDBServer;Database=MyDatabase;User ID=some_userid;Password=some_password;Integrated Security=SSPI;Trusted_Connection=True;" 
```

我用了

```
"DevConnection": "Server=DevDBServer;Database=MyDatabase;User ID=some_userid;Password=some_password;Integrated Security=False;Trusted_Connection=False;" 
```

关键更改是确保 Trusted_Connection=False，这与错误消息一致。通常我不会使用不受信任的连接。在这种情况下，我连接到一个开发/测试数据库，所以很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-25T09:02:26.963

对于未来的谷歌人：

如果您*确实*需要`Integrated Security`并且遇到此错误，则可能是您使用的是 a`local account`而不是`domain account`.

我遇到了这个在本地运行的 Visual Studio 并试图连接到另一台机器上的数据库。一种解决方法是以不同的用户身份运行 Visual Studio，提示不起作用，但运行下面的命令可以（确保替换`DOMAIN\USER`，您将被要求提供凭据）：

`runas /netonly /user:DOMAIN\USER "C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\Common7\IDE\devenv.exe"`

（这是针对 VS2019 的，您的路径可能会有所不同）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-16T08:26:01.253

老问题，我的症状略有不同，但错误相同。我的连接字符串是正确的（集成安全性，我不提供用户和密码）`data source`设置为`127.0.0.1`. 多年来它工作得很好。

但是最近我在静态主机文件中添加了一行用于测试目的（`C:\Windows\System32\drivers\etc\hosts`）

```
127.0.0.1           www.blablatestsite.com 
```

删除这一行，错误就消失了。

我从这篇关于主机名和环回的文章 ( [https://support.microsoft.com/en-gb/kb/896861 ) 中得到了线索。](https://support.microsoft.com/en-gb/kb/896861)

其他可能的解决方法（如果您需要将该行保留在 hosts 文件中）是使用主机名（如`MYSERVER01`）而不是连接字符串中的`127.0.0.1`。`data source`

# php - 更新mysql中的表

> ID：14170933
> 
> 赞同：0
> 
> 时间：2013-01-05T10:35:49.610
> 
> 标签：php, mysql

嗨，我计划通过使用这些代码行来更新我的 sql 数据库

```
 <?php
  //session_start();
  $user=$_SESSION['user_level'];
  // Check if a file has been uploaded
  if(isset($_FILES['fileToUpload'])) {
  // Make sure the file was sent without errors
  if($_FILES['fileToUpload']['error'] == 0) {
    // Connect to the database
    $dbLink = new mysqli('$host', '$user', '$pass', 
    '$tbl_name');
    if(mysqli_connect_errno()) {
        die("MySQL connection failed: ". mysqli_connect_error());
    }

    // Gather all required data
    //$id= mysql_insert_id(); 
    $name = $dbLink->real_escape_string($_FILES['fileToUpload']['name']);
    $mime = $dbLink->real_escape_string($_FILES['fileToUpload']['type']);
    $data = $dbLink->real_escape_string(file_get_contents($_FILES  ['fileToUpload']
    ['tmp_name']));
    $size = intval($_FILES['fileToUpload']['size']);
    // Create the SQL query
    $query = "
        UPDATE userinfo SET resume=$name
            WHERE FirstName=$user";
    // Execute the query
    $result = $dbLink->query($query);}}
    ?>
    <?php 

    move_uploaded_file($_FILES["fileToUpload"]["tmp_name"],   
    "/home/u152912911/public_html/upload/" . $_FILES["fileToUpload"]["name"]);
    ?>

    <?php
    if ($_FILES["fileToUpload"]["error"] > 0)
    {
     echo "Apologies, an error has occurred.";
     echo "Error Code: " . $_FILES["fileToUpload"]["error"];
    }
    else
    {
    move_uploaded_file($_FILES["fileToUpload"]["tmp_name"],
    "/home/u152912911/public_html/upload/" . $_FILES["fileToUpload"]["name"]);
    }
    if (($_FILES["fileToUpload"]["type"] == "image/DOC")
    || ($_FILES["fileToUpload"]["type"] == "image/jpeg")
    || ($_FILES["fileToUpload"]["type"] == "image/png" )
    && ($_FILES["fileToUpload"]["size"] < 10000))
    {
    move_uploaded_file($_FILES["fileToUpload"]["tmp_name"],
    "/home/u152912911/public_html/upload/" . $_FILES["fileToUpload"]["name"]);

ECHO "Files Uploaded Succesfully";
echo'<script type="text/javascript">

    window.location.href ="resume2.php"
    </script>';
    }
    else
    {
    }
    echo "Your Resume was Successfully Upload";
    ?> 
```

问题是它不起作用。我的简历栏没有改变。我错过了什么吗？因为它没有显示任何错误。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:01:27.980

您只需使用以下行

```
$query = "UPDATE userinfo SET resume='$name' WHERE FirstName='$user'"; 
```

代替

```
$query = "UPDATE userinfo SET resume=$name WHERE FirstName=$user"; 
```

去尝试一下。它可能有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:21:59.430

***尝试以下方法：***

**PHP部分：**

```
<?php
$host = 'Your Host Name';
$user = 'Your Database Username';
$pass = 'Your Database Password';
$db_name = 'Your Database Name';
$first_name = 'john';//Here your session user firstname

//Check if a file has been uploaded

if(isset($_FILES['fileToUpload'])) {

// Connect to the database
$dbLink = new mysqli(''.$host.'', ''.$user.'', ''.$pass.'',''.$db_name.'');

/*
 * This is the "official" OO way to do it,
 * BUT $connect_error was broken until PHP 5.2.9 and 5.3.0.
 */
if ($dbLink->connect_error) {
    die('Connect Error (' . $dbLink->connect_errno . ') '. $dbLink->connect_error);
}

$name       = $_FILES['fileToUpload']['name'];
$mime       = $_FILES['fileToUpload']['type'];
$temp_name  = $_FILES['fileToUpload']['tmp_name'];
$size       = intval($_FILES['fileToUpload']['size']);
$first_name = $_POST['first_name'];

if(($_FILES["fileToUpload"]["type"] == "image/DOC") || ($_FILES["fileToUpload"]["type"] == "image/jpeg") || ($_FILES["fileToUpload"]["type"] == "image/png" ) && ($_FILES["fileToUpload"]["size"] < 10000)) {

 // Create the SQL query
 $query = "UPDATE `userinfo` SET `resume`='$name' WHERE `FirstName`='$first_name'";
 // Execute the query
 $result = $dbLink->query($query);

 move_uploaded_file($temp_name,"gallery3/".$name);

 echo "Files Uploaded Succesfully";

}
else {
 echo "Apologies, an error has occurred.";
 echo "Error Code: " . $_FILES["fileToUpload"]["error"];
}
}
?> 
```

**HTML部分：**

```
<form action="" method="post" enctype="multipart/form-data" name="fileupload">
<input type="file" name="fileToUpload">
<input type="hidden" name="first_name" value="<?php echo $first_name;?>">
<input type="submit" name="uploading" value="File Upload">
</form> 
```

我认为这可以帮助您解决问题。

# django - Django 模板 - 是否可以制作 url-aware 模板

> ID：14170936
> 
> 赞同：0
> 
> 时间：2013-01-05T10:35:56.693
> 
> 标签：django, django-templates

是否可以在没有 javascript 的情况下使 django 模板 URL 感知？

例如，我想将 twitter bootstrap 中某个选项卡或药丸的 css 类修改为“活动”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:42:41.887

如果您`request`在上下文中可用，那么您可以在模板中使用[request.path](https://docs.djangoproject.com/en/dev/ref/request-response/#attributes)来了解 url 并制作 css 类`active`或`inactive`基于它。您需要添加`django.core.context_processors.request`您`TEMPLATE_CONTEXT_PROCESSORS`的项目设置。

或者，只需传递一个`page_name`请求上下文并使用它。

正如所`arie`指出的：检查[django-activelink](https://github.com/j4mie/django-activelink#readme)它基本上似乎使用了我提到的上述相同方法，但它在顶部添加了一些模板标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:46:51.337

是的，您可以这样做，但是生成的模板代码会有点难以阅读。向模板添加大量逻辑会减少/消除 MVC 的关注点分离优势。

您需要做的是将请求信息传递给模板，最简单的方法是添加模板上下文处理器。在你的 settings.py 中添加这样的内容：

```
from django.conf.global_settings import TEMPLATE_CONTEXT_PROCESSORS

TEMPLATE_CONTEXT_PROCESSORS += (
    'django.core.context_processors.request',
) 
```

然后，您可以访问模板中的 request.path 信息并构建逻辑以根据您的需要更改输出。

# android - 编辑存档是否违法

> ID：14170937
> 
> 赞同：0
> 
> 时间：2013-01-05T10:35:59.027
> 
> 标签：android

我一直在考虑制作一个应用程序，它将现有的**地铁冲浪游戏**保存数据替换为另一个保存的数据。基本上我在游戏中获得了很多积分并获得了很多硬币。我会将我的保存数据复制到用户保存的数据中。所以用户将获得我所做的所有硬币、高分和解锁。

我只想知道制作这样的应用程序是否违法？

# mercurial - 是否可以恢复最近的更改？

> ID：14170940
> 
> 赞同：2
> 
> 时间：2013-01-05T10:36:25.100
> 
> 标签：mercurial

我最近对几个文件进行了不必要的更改。是否可以根据时间还原它们（例如还原过去 10 分钟内所做的所有更改）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T21:05:34.453

### 选项 1：回滚或剥离

如果您已经提交（而不是推送）一些不需要的更改，这很容易：

```
$ hg strip <firts-unwanted-revision> 
```

这需要[~~`mq`~~](http://mercurial.selenic.com/wiki/MqExtension#Configuration)[`strip`要启用的扩展](http://mercurial.selenic.com/wiki/StripExtension)。

或者检查该`rollback`命令是否足以满足您的情况。

### 选项 2：仅还原所选文件

否则，您只能将文件恢复到上次提交的状态。Mercurial（作为 Git、SVN 和大多数其他版本控制系统）仅在您提交时跟踪更改。两者之间的一切都超出了 Mercurial 的控制。这就是为什么通常最好尽早并经常提交。

但是，您可以利用文件的修改时间，只恢复最近 10 分钟内修改过的文件。请注意，这会还原每个文件的*所有*更改，即 10 多分钟前对这些文件所做的更改。它仅保护您正确编辑的文件，其中最后一次更改已超过 10 分钟。

```
$ hg revert <files-touched-within-last-10-minutes> 
```

`find`在 Unix 系统上，您可以使用以下命令获取最近 10 分钟内修改的所有文件的列表：

```
$ find -mmin -10 
```

### 选项 3：提交好的更改，丢弃不好的更改

最后，当您的错误更改没有覆盖好的更改但存在于它们旁边时，第三个选项效果很好。这里一个好的策略是

1.  只提交好的更改（使用[记录](http://mercurial.selenic.com/wiki/RecordExtension)或[crecord](http://mercurial.selenic.com/wiki/CrecordExtension)命令），然后
2.  恢复所有剩余的更改（例如使用`hg up -r . -C`）

* * *

HG-Book 有更多关于[处理不需要的更改的](http://hgbook.red-bean.com/read/finding-and-fixing-mistakes.html)提示。

# excel - VBA 在 MAC 上打开/关闭工作簿引发错误

> ID：14170947
> 
> 赞同：0
> 
> 时间：2013-01-05T10:37:29.307
> 
> 标签：excel, vba, macos

以下宏在 Windows 上没有问题，但在 MAC 上引发运行时错误。问题是我没有 MAC 来测试它。该代码只是从另一张纸上的单元格中提取 2 个文件（A 和 B）的位置，打开它们，将数据复制到另一张纸上并进行一些计算。

```
Sub Compile()
Application.ScreenUpdating = False

ThisBook = ActiveWorkbook.Name

'open A
Workbooks.Open (Sheets("Control").Range("C2"))
ABook = ActiveWorkbook.Name

'copy data from A
Workbooks(ThisBook).Sheets("Data").Cells.Clear
ActiveSheet.UsedRange.Copy Workbooks(ThisBook).Sheets("data").Range("A1")

'close A
Workbooks(ThisBook).Activate
Workbooks(ABook).Close False

'prep A
Sheets("data").Activate
C = Range("A" & Cells.Rows.Count).End(xlUp).Row

'some calculation

'open B
Workbooks.Open (Sheets("Control").Range("C5"))
BBook = ActiveWorkbook.Name

'prep B
D = ActiveSheet.Range("A" & Cells.Rows.Count).End(xlUp).Row

'some calculation

'copy B
Range("M2:M" & D).Copy Workbooks(ThisBook).Sheets("data").Range("O2")

'close B
Workbooks(ThisBook).Activate
Workbooks(BBook).Close False

'calculate
Sheets("data").Activate

'some more calculations

Application.ScreenUpdating = True
End Sub 
```

数据已经在其他工作表上的同一工作簿中的版本可以正常工作。所以它必须在不起作用的工作簿之间打开/关闭/切换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:45:27.387

好吧，没有关于变量内容的详细信息，我只是猜测它是 Windows 和 Mac 之间的文件位置 URI 差异......里面有什么`Sheets("Control").Range("C2")`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:01:38.813

尝试完全限定所有内容并声明所有变量 - 看看这是否让处理器更明显：

```
Sub Compile()
Excel.Application.ScreenUpdating = False

Dim ThisBook As String 
ThisBook = Excel.ActiveWorkbook.Name

'open A
Workbooks.Open (Sheets("Control").Range("C2"))
ABook = ActiveWorkbook.Name

'copy data from A
with Excel.Workbooks(ThisBook)
     .Sheets("Data").Cells.Clear
     .ActiveSheet.UsedRange.Copy .Sheets("data").Range("A1")
end with

'close A
Excel.Workbooks(ThisBook).Activate
Excel.Workbooks(ABook).Close False

'prep A
with Excel.Workbooks(ThisBook).Sheets("data")
    .Activate
    Dim c as integer
    C = .Range("A" & .Rows.Count).End(Excel.xlUp).Row
end with

'some calculation

'open B
Excel.Workbooks.Open (Excel.Workbooks(ThisBook).Sheets("Control").Range("C5"))
dim BBook as string
BBook = Excel.ActiveWorkbook.Name

'prep B
dim D as integer
with Excel.ActiveSheet.
  D = .Range("A" & .Rows.Count).End(Excel.xlUp).Row
end with

'some calculation

'copy B
Range("M2:M" & D).Copy Excel.Workbooks(ThisBook).Sheets("data").Range("O2")

'close B
Excel.Workbooks(ThisBook).Activate
Excel.Workbooks(BBook).Close False

'calculate
Excel.Workbooks(ThisBook).Sheets("data").Activate

'some more calculations

Excel.Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-29T08:08:43.247

取决于 2011（：作为分隔符）与 2016（Posix 路径）Office for Mac

[http://www.rondebruin.nl/mac/mac017.htm](http://www.rondebruin.nl/mac/mac017.htm)

# ruby-on-rails - Ruby on Rails 中帖子的用户和角色

> ID：14170954
> 
> 赞同：1
> 
> 时间：2013-01-05T10:38:42.643
> 
> 标签：ruby-on-rails, activerecord, has-many-through

我有许多用户在许多帖子中具有不同的角色。这些角色是`owner`, `editor`, `viewer`, `none`。每个用户可能只有**一个**帖子角色。我将其表示为在 Rails 中有许多直通关系，如下所示：

```
class User < ActiveRecord::Base
  has_many :roles
  has_many :posts, :through => :roles
end

class Post < ActiveRecord::Base
  has_many :roles
  has_many :users, through => :roles
end

class Role < ActiveRecord::Base
  attr_accessor :role
  belongs_to :users
  belongs_to :posts
end 
```

其中角色属性用于指示用户在帖子中拥有的角色类型。设置新角色时，我不能简单地使用`<<`运算符，因为它不会设置`role`属性。处理这种情况的首选方法是什么？如何强制每个用户/帖子组合只有一个角色并在我的`Role`创建逻辑中强制执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:42:45.660

您可以检查 User 的角色创建，如果他已经分配了角色，在这种情况下您可以跳过分配此角色。

```
unless user.roles.present?
  user.roles.create
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:09:02.070

我了解您希望确保没有用户对某个帖子拥有多个角色。如果这是您想要实现的，那么您只需向您的`Role`模式添加唯一性验证

`validates :user_id, uniqueness: {scope: :post_id, message: 'User can have one role per post'}`

这将确保 和 的组合`user_id`是`post_id`唯一的，您可以在 rails guide on [validation with scope](http://guides.rubyonrails.org/active_record_validations_callbacks.htm)看到更多信息。

# ios6 - 如何在 RestKit v0.20.0 中设置 serviceUnavailableAlertEnabled

> ID：14170956
> 
> 赞同：2
> 
> 时间：2013-01-05T10:38:55.890
> 
> 标签：ios6, restkit, afnetworking

在 v0.20.0 之前的 Restkit 版本中，它曾经很简单，可以检查服务不可用性并显示适当的响应。

```
objectManager.client.serviceUnavailableAlertEnabled = YES; 
```

我们如何在最新的 RestKit 中实现同样的效果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T10:38:55.890

我自己想通了。

由于 RKClient 在最新的 RestKit 中不再存在，它已被 AFNetworking 的 AFHTTPClient 取代。AFNetworking 中的可达性包装器使用起来非常简单。

*   首先将 SystemConfiguration.framework 添加到您的项目中。

*   然后添加`#import <SystemConfiguration/SystemConfiguration.h>`到您的`.pch`文件中。

最后，只要网络可达性发生变化，就注册一个回调块。

```
[objectManager.HTTPClient setReachabilityStatusChangeBlock:^(AFNetworkReachabilityStatus status) {
    if (status == AFNetworkReachabilityStatusNotReachable) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No network connection"
                                                        message:@"You must be connected to the internet to use this app."
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
    }
}]; 
```

当应用程序在没有互联网连接的情况下启动时，这也适用。

# forms - 在 Microsoft access 的子表单面板中的表单之间切换

> ID：14170963
> 
> 赞同：0
> 
> 时间：2013-01-05T10:39:56.950
> 
> 标签：forms, ms-access-2007

我是 Microsoft Access 的新手。我想要的是根据用户从下拉列表中选择的方式在子表单面板中的表单之间切换。附加文件包含我想要的![在此处输入图像描述](../Images/31c71901984f4a7b03805c613bf5c344.png)

我谷歌了很多，但没有找到任何帮助。感谢您的帮助。

这是屏幕截图。但我对找到子表单的控制感到困惑。 ![在此处输入图像描述](../Images/1355bc2eb9384260b60334fd657f69f4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T11:01:17.447

```
Forms("frmMain").Form.subFormControl.SourceObject = "SubForm_2_A" 
```

..应该是你所需要的。
`subFormControl`是包含 Subform2 的子窗体容器控件的*名称。*
`frmMain`是父表单的名称，未在您的图片中标记（实际上，您可能不必将 subform1 放在子表单中，它的内容可能在父表单上）。

编辑：
红框标记一个子表单。单击 -1- 以确保主窗体具有焦点。然后单击*一次*-2-，控件被选中，其属性显示在右侧的属性框中。
请注意，您在数据页面中找到“源对象”，在“其他”页面中找到控件的名称。Access 使（控件的）名称与表单相同，这确实不是一个好主意，而且相当混乱。

![样本图像](../Images/0b2cc501d8a1f59727eca06444d11c0a.png)

# java - &&和||短路怎么办 在java中工作？

> ID：14170965
> 
> 赞同：-8
> 
> 时间：2013-01-05T10:40:05.273
> 
> 标签：java

假设我们使用**and**运算符使得

```
if (a.enable() && b.enable()) 
```

所以上面的陈述表明这两个陈述都需要为真才能继续

如果`a.enable()`return false 的情况如何，如果我们编写这样的语句

```
if (a.enable() && (b.enable() || c.enable())) 
```

所以上面的这个陈述意味着`a.enable()`需要是真实的，并且从第二部分来看，要么是真实的，要么`b.enable()`是`c.enable()`真实的。其中任何一个都需要为真才能继续，但如果`a.enable()`不为真，则条件失败，无需任何进一步检查。

这个对吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T10:42:37.300

是的，`&&`手段`AND`，`||`手段`OR`。而且它们都是短路的，所以在以下情况下：

```
if (a.enable()  &&  b.enable()) 
```

`b.enable()``a.enable()`如果返回 false，甚至不会被调用。

在以下情况下：

```
if (a.enable()  ||  b.enable()) 
```

`b.enable()`甚至不会被称为 af`a.enable()`返回 true。

这就是允许像这样的条件

```
if (s != null && s.equals(foo)) 
```

`NullPointerException`如果操作员没有短路，这将导致 a 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-18T19:31:21.533

```
if (a.enable()  &&  b.enable()) 
```

只有当第一个条件为真时，才会调用第二个条件。

# struts2 - 注销在struts2中无法正常工作

> ID：14170970
> 
> 赞同：0
> 
> 时间：2013-01-05T10:41:04.777
> 
> 标签：struts2

我正在开发一个struts项目。

在登录页面操作中，会话中存储了用户名和密码。

在使用 session.invalid 的注销操作类中并删除了该会话详细信息并重定向到索引页面。

但是我在浏览器中单击返回按钮，它会转到上一页。

现在我需要示例代码，如果我在注销后单击返回按钮，它将显示错误消息或显示索引页面，如雅虎邮件。

需要struts2中的样本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T11:00:05.143

据我所知，JS方面很难做到。因为后退按钮属于网络浏览器。我们的项目执行以下方式：注销时，关闭当前窗口并打开新窗口。这将帮助您清除历史记录。

# google-app-engine - Get an entity by a key passed via GET parameter

> ID：14170985
> 
> 赞同：1
> 
> 时间：2013-01-05T10:43:36.160
> 
> 标签：google-app-engine, google-cloud-datastore, go

I have

```
http://localhost:8080/?key=ahFkZXZ-ZGV2LWVkdW5hdGlvbnIOCxIIVXNlckluZm8YLAw 
```

I would like to ask on how to:

1.  Decode and convert the "key" to a `*datastore.Key`
2.  And use it to get an entity.

Thanks for your help!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T12:49:52.710

First: You should think about *which* packages you need this case. Since you're trying to read a `GET` value from a `URL` you need probably a function from [`net/http`](http://golang.org/pkg/net/http/). In particular: [`FormValue(key string)`](http://golang.org/pkg/net/http/#Request.FormValue) returns `GET` and `POST` parameters.

Second: Now open the [`appengine/datastore`](https://developers.google.com/appengine/docs/go/datastore/reference) documentation and find functions which do the following:

*   Decode a `string` to a `*datastore.Key` ([DecodeKey(encoded string)](https://developers.google.com/appengine/docs/go/datastore/reference#DecodeKey))
*   Get a specified key from the datastore ([Get(c appengine.Context, key *Key, dst interface{})](https://developers.google.com/appengine/docs/go/datastore/reference#Get))

Now it's a really easy thing:

```
func home(w http.Response, r *http.Request) {
    c := appengine.NewContext(r)

    // Get the key from the URL
    keyURL := r.FormValue("key")

    // Decode the key
    key, err := datastore.DecodeKey(keyURL)
    if err != nil { // Couldn't decode the key
        // Do some error handling
        http.Error(w, err.Error(), http.StatusInternalServerError)
        return
    }

    // Get the key and load it into "data"
    var data Data
    err = datastore.Get(c, key, data)
    if err != nil { // Couldn't find the entity
        // Do some error handling
        http.Error(w, err.Error(), http.StatusInternalServerError)
        return
    }
} 
```

# c - C 数组初始化：tmp.c:5：错误：“{”标记之前的预期表达式

> ID：14170986
> 
> 赞同：1
> 
> 时间：2013-01-05T10:43:49.097
> 
> 标签：c, arrays, gcc, multidimensional-array

我尝试了以下方法：

```
#include <stdio.h>

int main(void) {
     char multi[3][10];
     multi[0] = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9'};
     multi[1] = {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'};
     multi[2] = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'};
     printf("&multi[2][2]: %d \n", (int) &multi[2][2]);
     printf("(*multi + 2) + 2: %d \n" , (int) (*multi + 2) + 2);
} 
```

并产生了这个输出：

```
dominik@luna:~$ gcc tmp.c 
tmp.c: In function ‘main’:
tmp.c:5: error: expected expression before ‘{’ token
tmp.c:6: error: expected expression before ‘{’ token
tmp.c:7: error: expected expression before ‘{’ token 
```

我已经做了一些研究，发现[这个线程](https://stackoverflow.com/questions/10683147/expected-expression-before-token-c-program)弗拉基米尔说“你应该在你声明它们的同一行初始化你的数组”。这仍然让我感到困惑，你不应该像你不应该写意大利面条代码那样做，还是意味着你不能这样做。

或者可能是我在做其他完全错误的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:46:08.280

可以以这种方式初始化数组，但不能分配数组。

```
#include <stdio.h>

int main(void) {
     char multi[3][10] = {
         {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9'},
         {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'},
         {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'}
     }
     printf("&multi[2][2]: %d \n", (int) &multi[2][2]);
     printf("(*multi + 2) + 2: %d \n" , (int) (*multi + 2) + 2);
} 
```

另请注意，这将截断您打印出来的堆栈地址，至少在 64 位系统上是这样。您是否要打印堆栈地址？做这个：

```
printf("&multi[2][2]: %p\n", (char *) &multi[2][2]);
printf("(*multi + 2) + 2: %p\n" , (char *) (*multi + 2) + 2); 
```

在我的系统上，此更改将导致它打印正确的地址，这些地址刚好低于 2 ^(47)（上图`0x7fff00000000`），超出`int`.

# view - 使用新的 EmberJS 路由器组织视图和控制器

> ID：14170990
> 
> 赞同：1
> 
> 时间：2013-01-05T10:45:06.207
> 
> 标签：view, controller, ember.js, router

我想在包/文件夹中组织我的视图以避免长列表。使用（伟大的）新路由器，默认情况下会提供一个视图，我们可以通过创建一个具有约定名称的新视图来更改该视图。例如：

```
match('/').to('home'); 
```

用途：

*   “家”车把模板
*   App.HomeView
*   App.HomeController

现在我想使用：

*   “my_package/home”车把模板（作品）
*   App.MyPackage.HomeView
*   App.MyPackage.HomeController

当我使用 gem“ember-rails”（GIT 版本）和生成器时：

```
rails g ember:view my_package/home 
```

我得到：

```
DemoEmberRails.MyPackage::HomeView = Ember.View.extend({
}); 
```

这不是正确的 javascript 代码（似乎是 ruby​​ 代码的摘录）。

我试过了：

```
DemoEmberRails.MyPackage = {};
DemoEmberRails.MyPackage.HomeView = Ember.View.extend({
}); 
```

但它不被路由器使用。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T22:15:42.460

看起来目前不支持此功能，但是，存在添加此功能的拉取请求。

见： [https ://github.com/emberjs/ember.js/pull/1679](https://github.com/emberjs/ember.js/pull/1679)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:49:34.847

正如你所说

```
match('/').to('home'); 
```

预计和。`AppName.HomeRoute`_ 所以如果你有一个模板和一个类似于`AppName.HomeView``AppName.HomeController``data-template-name="home"`

```
AppName.HomeView = Ember.View.extend({
  teplateName: 'home'
}); 
```

然后 ember 会自动将`/`路由与这个视图连接起来。

新的[ember 路由指南](http://emberjs.com/guides/routing/)在这里很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T11:18:39.473

我认为您应该使用 Ember.Namespace 对它们进行命名空间。我仍然不确定路由器是否会自动搜索命名空间，但它可以吗？

[http://emberjs.com/api/classes/Ember.Namespace.html](http://emberjs.com/api/classes/Ember.Namespace.html)

# iphone - 自定义 URL 在 iPhone 上打开我的应用程序 - 就像使用 Youtube 一样

> ID：14170993
> 
> 赞同：4
> 
> 时间：2013-01-05T10:45:36.837
> 
> 标签：iphone, ios, cocoa-touch, url-scheme

> **可能重复：**
> [是否可以为 iPhone 应用程序（如 YouTube 和地图）注册基于 http+域的 URL 方案？](https://stackoverflow.com/questions/1108693/is-it-possible-to-register-a-httpdomain-based-url-scheme-for-iphone-apps-like)

我知道我可以创建自定义 URL 方案并使用它启动我的应用程序。所以我可以像这样捕获 URL：

```
myapp://image/1 
```

并打开显示用户图像 ID=1 的 myapp。

但就我而言 - YouTube 应用程序的行为有点不同，使用如下网址：

```
http://youtube.com/v/<ID> 
```

iPhone 将捕获该`http`计划，但从 youtube 地址开始并打开 YT 应用程序。

我自己的应用程序可以做到这样的事情，还是一些私人 api 的事情？我可以以某种方式在打开 URL 时启动我的应用程序：

```
http://app.myapp.com/image/1 
```

还是根本不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:56:46.293

http/https/ftp 方案名称用于 Safari 打开的网页。我知道这些例外

*   指向[http://maps.google.com](http://maps.google.com)的网络链接被重定向到地图应用程序。
*   指向[http://www.youtube.com](http://www.youtube.com)的网络链接被重定向到 YouTube 应用程序。
*   iTunes 商店链接 (http://phobos.apple.com/etc..) 被发送到 iTunes（或 App Store）应用程序。

我不认为你可以做类似[http://app.myapp.com/image/1](http://app.myapp.com/image/1)的事情来重定向到你的应用程序。

这是Youtube URL 方案的 Apple[链接。](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/YouTubeLinks.html#//apple_ref/doc/uid/TP40007895-SW1)

# javascript - 需要帮助在提交时重定向表单

> ID：14170996
> 
> 赞同：2
> 
> 时间：2013-01-05T10:46:00.103
> 
> 标签：javascript, html, drupal

我需要帮助。当我提交此表单时，我希望它自动重定向到选择列表中的值选项（即 url）。

因此，在选择列表中选择的艾哈迈达巴德按下提交时，它应该重定向到[http://intranet.guj.nic.in/passport](http://intranet.guj.nic.in/passport)

目前它没有重定向。**使用内联 javascript 代码的最佳方法是什么？**

```
<html><body>
<form  id="pass-form" >
<select id="pass-dropdown" ><option selected="selected">Select Passport Office
for Status page </option><option value="http://intranet.guj.nic.in/passport/">Ahemadabad
</option><option value="http://passportstatus.nic.in/passmain.php?city=asr">Amritsar
</option><option value="http://rpobangalore.gov.in/npassport.asp">Bangalore
</option><option value="http://passportstatus.nic.in/passmain.php?city=bly">Bareilly
</option></select>
<input type="submit"  onsubmit="var sel = document.getElementById('pass-dropdown'); window.location = sel.options[sel.selectedIndex].value" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T10:57:09.293

**onsubmit**是`<form>`元素的事件，而不是提交按钮的事件。

将您的表单代码更改为：

```
<form id="pass-form" onsubmit="window.location.href = 'newlocation'; return false;">
...
    <input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-21T23:27:16.173

在某些情况下，您可能必须使用`return`来确保使用所需的返回值：

```
<form onsubmit="return redirectMe();">
  <input placeholder="Search" type="text">
</form>

... more code here ...

function redirectMe() {
  window.location.replace("http://stackoverflow.com");
  return false;
} 
```

来源：[如何将事件对象传递给 Javascript 中的函数？](https://stackoverflow.com/questions/1276870/how-to-pass-an-event-object-to-a-function-in-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T10:53:05.350

更改`type = "submit"`为按钮

```
<input type="button" onclick="var sel = document.getElementById('pass-dropdown'); window.location = sel.options[sel.selectedIndex].value" /> 
```

*更新*

```
<input type="button" onclick="var sel = document.getElementById('pass-dropdown'); 
       var frm = document.getElementById("pass-form"); frm.action = sel; frm.submit();" /> 
```

如果你把它放在一个函数中并调用这个函数会更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T11:01:35.233

```
<form  id="pass-form" onsubmit="var sel = document.getElementById('pass-dropdown'); window.location = sel.options[sel.selectedIndex].value" >
    ...
    <input type="submit" />
</form> 
```

您必须对表单标签执行提交属性。然后它应该工作。 [http://www.w3schools.com/jsref/event_form_onsubmit.asp](http://www.w3schools.com/jsref/event_form_onsubmit.asp)

# delphi - Delphi ShellExecute 在 Windows 7 中不起作用

> ID：14170998
> 
> 赞同：2
> 
> 时间：2013-01-05T10:46:07.887
> 
> 标签：delphi, windows-7, shellexecute

我只知道这很简单，但是我已经尝试了我在这个论坛上可以找到的所有建议，但我仍然无法获得以下 ShellExecute 语句，它在 XP 上运行了四年，在 Windows 上运行良好7.

任何建议都感激不尽！

```
ShellExecute(Handle, 'open', PChar('command.com'), PChar('/c ftp -s:c:\checkout\WebFTPParams.txt 91.208.99.4'), Nil, SW_SHOW);
ShellExecute(Handle, 'open', PChar('command.com'), PChar('/c ftp -s:c:\checkout\WWFTPParams.txt 212.78.232.39'), Nil, SW_SHOW); 
```

* * *

无论如何，谢谢，伙计们，但我发现了问题。我应该一直使用 CMD.EXE 而不是旧的 Command.com。对不起，打扰你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T10:48:15.013

Command.com 不再在 Windows 中（它在 DOS 中使用）。使用 cmd.exe

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T19:05:22.300

不同版本的 Windows 使用不同的命令行解释器。旧版本使用**command.com**，新版本使用**cmd.exe**。用于`GetEnvironmentVariable('COMSPEC')`发现要使用的正确解释器。

话虽如此，在这种情况下您不需要使用任何解释器。 **ftp.exe**是它自己的应用程序，因此您可以直接运行它。尽管您可以使用`ShellExecute()`它来运行 exe 文件，但它确实不是为了那个。它只会委托给`CreateProcess()`，所以你真的应该去掉中间人并`CreateProcess()`直接使用。

Even better, rather than use an external process, you should consider using the FTP protocol directly in your own code. There are plenty of third-party components, like Indy, ICS, Synapse, etc, and APIs, like WinInet, libcurl, etc, that have FTP client implementations, and are easily usable in Delphi.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T11:22:57.293

如前所述，command.com 是 DOS/Windows 9x 命令解释器。但我认为根本没有理由调用命令解释器。我会这样做：

```
ShellExecute(Handle, nil, 'ftp.exe', '-s:c:\checkout\WWFTPParams.txt 212.78.232.39', nil, SW_SHOW); 
```

这里也不需要指定动词。