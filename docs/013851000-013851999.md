# StackOverflow 问答 13851000-13851999

# c++ - Eclipse (Juno) CDT 索引器：“解析时出错...”一个 Makefile 项目

> ID：13851002
> 
> 赞同：0
> 
> 时间：2012-12-13T00:19:50.277
> 
> 标签：c++, eclipse, parsing, eclipse-cdt, indexer

我正在 Eclipse CDT 中克隆这个[Github 项目](https://github.com/blackrim/lagrange)，但我还没有设法创建它的无错误索引（下面给出了错误日志的示例`AncSplit.cpp`）。所有 CPU 资源（Intel® Core™ i7 CPU X 940 @ 2.13GHz × 8 with 8Gb RAM）都被占用了一段时间，项目中的每个文件都会产生解析`.cpp`错误`.h`。

为了重现/识别问题，我只将源文件和自定义项目 Makefile 保存在一个文件夹中。我还删除了 Eclipse（和工作区首选项...）并[从头开始](http://eclipse.org/downloads/)重新安装它。
**NB**我也做了以下修改`-Xms1G`，为了绕过堆空间不足的文件`-Xmx2G`和文件相关的问题。 我正在使用 Eclipse：**版本：Juno Service Release 1** **Build id：20121004-1855**`-XX:MaxPermSize=1G``eclipse.ini`

提前致谢。

```
!SESSION 2012-12-12 23:44:47.084 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.7.0_10
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.cpp.product
Command-line arguments:  -os linux -ws gtk -arch x86_64 -product org.eclipse.epp.package.cpp.product

!ENTRY org.eclipse.cdt.core 4 0 2012-12-13 00:07:02.918
!MESSAGE Error while parsing /lagrange/AncSplit.cpp.
!STACK 0
java.lang.NullPointerException
    at org.eclipse.cdt.internal.core.dom.parser.Value.isDependentValue(Value.java:373)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.isDependentArgument(CPPTemplates.java:2323)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.hasDependentArgument(CPPTemplates.java:2313)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiate(CPPTemplates.java:181)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiate(CPPTemplates.java:166)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.resolveDeferredClassInstance(CPPTemplates.java:2468)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.resolveUnknown(CPPTemplates.java:2393)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateType(CPPTemplates.java:1173)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.resolveUnknown(CPPTemplates.java:2401)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateType(CPPTemplates.java:1173)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.AbstractCPPClassSpecializationScope.getBases(AbstractCPPClassSpecializationScope.java:158)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPClassSpecialization.getBases(CPPClassSpecialization.java:219)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.ClassTypeHelper.getBases(ClassTypeHelper.java:243)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.BaseClassLookup.lookupInBaseClass(BaseClassLookup.java:192)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.BaseClassLookup.lookupInBaseClass(BaseClassLookup.java:235)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.BaseClassLookup.lookupInBaseClasses(BaseClassLookup.java:54)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPSemantics.lookup(CPPSemantics.java:983)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPSemantics.resolveUnknownName(CPPSemantics.java:3679)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.resolveUnknown(CPPTemplates.java:2425)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateType(CPPTemplates.java:1173)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateType(CPPTemplates.java:1223)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.TemplateArgumentDeduction.deduceFromFunctionArgs(TemplateArgumentDeduction.java:125)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.TemplateArgumentDeduction.deduceForFunctionCall(TemplateArgumentDeduction.java:88)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateForFunctionCall(CPPTemplates.java:1749)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateForFunctionCall(CPPTemplates.java:1728)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPSemantics.resolveFunction(CPPSemantics.java:2363)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.EvalFunctionSet.resolveFunction(EvalFunctionSet.java:187)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.EvalFunctionCall.instantiate(EvalFunctionCall.java:202)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.EvalUnary.instantiate(EvalUnary.java:281)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.EvalBinary.instantiate(EvalBinary.java:343)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateValue(CPPTemplates.java:866)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.createSpecialization(CPPTemplates.java:786)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPClassSpecialization.specializeMember(CPPClassSpecialization.java:176)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.AbstractCPPClassSpecializationScope.getBindings(AbstractCPPClassSpecializationScope.java:116)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPSemantics.getBindingsFromScope(CPPSemantics.java:1205)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPSemantics.lookup(CPPSemantics.java:953)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.EvalID.resolveName(EvalID.java:320)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.EvalID.instantiate(EvalID.java:307)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.EvalBinary.instantiate(EvalBinary.java:343)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.EvalBinary.instantiate(EvalBinary.java:343)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateValue(CPPTemplates.java:866)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.createSpecialization(CPPTemplates.java:786)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPClassSpecialization.specializeMember(CPPClassSpecialization.java:176)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.AbstractCPPClassSpecializationScope.getBindings(AbstractCPPClassSpecializationScope.java:116)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPSemantics.getBindingsFromScope(CPPSemantics.java:1205)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPSemantics.lookup(CPPSemantics.java:953)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.EvalID.resolveName(EvalID.java:320)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.EvalID.instantiate(EvalID.java:307)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateValue(CPPTemplates.java:866)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateArgument(CPPTemplates.java:1079)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateArguments(CPPTemplates.java:1053)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.resolveDeferredClassInstance(CPPTemplates.java:2447)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.resolveUnknown(CPPTemplates.java:2393)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateType(CPPTemplates.java:1173)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.resolveUnknown(CPPTemplates.java:2401)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPTemplates.instantiateType(CPPTemplates.java:1173)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.AbstractCPPClassSpecializationScope.getBases(AbstractCPPClassSpecializationScope.java:158)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPClassSpecialization.getBases(CPPClassSpecialization.java:219)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.ClassTypeHelper.getBases(ClassTypeHelper.java:243)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.SemanticUtil.inheritanceClosure(SemanticUtil.java:153)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.SemanticUtil.getConversionOperators(SemanticUtil.java:129)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.BuiltinOperators.getClassConversionTypes(BuiltinOperators.java:669)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.BuiltinOperators.arithmeticAssignement(BuiltinOperators.java:487)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.BuiltinOperators.create(BuiltinOperators.java:195)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.BuiltinOperators.create(BuiltinOperators.java:68)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPSemantics.findOverloadedOperator(CPPSemantics.java:3383)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.CPPSemantics.findOverloadedBinaryOperator(CPPSemantics.java:2992)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.EvalBinary.computeOverload(EvalBinary.java:242)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.semantics.EvalBinary.getOverload(EvalBinary.java:224)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTBinaryExpression.getOverload(CPPASTBinaryExpression.java:262)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTBinaryExpression.getImplicitNames(CPPASTBinaryExpression.java:131)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTBinaryExpression.accept(CPPASTBinaryExpression.java:164)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTExpressionStatement.accept(CPPASTExpressionStatement.java:73)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTCompoundStatement.accept(CPPASTCompoundStatement.java:85)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTIfStatement.accept(CPPASTIfStatement.java:145)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTCompoundStatement.accept(CPPASTCompoundStatement.java:85)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTIfStatement.accept(CPPASTIfStatement.java:145)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTCompoundStatement.accept(CPPASTCompoundStatement.java:85)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTFunctionDefinition.accept(CPPASTFunctionDefinition.java:201)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTTemplateDeclaration.accept(CPPASTTemplateDeclaration.java:127)
    at org.eclipse.cdt.internal.core.dom.parser.cpp.CPPASTNamespaceDefinition.accept(CPPASTNamespaceDefinition.java:139)
    at org.eclipse.cdt.internal.core.dom.parser.ASTTranslationUnit.accept(ASTTranslationUnit.java:251)
    at org.eclipse.cdt.internal.core.pdom.PDOMWriter.extractSymbols(PDOMWriter.java:444)
    at org.eclipse.cdt.internal.core.pdom.PDOMWriter.addSymbols(PDOMWriter.java:225)
    at org.eclipse.cdt.internal.core.pdom.AbstractIndexerTask.writeToIndex(AbstractIndexerTask.java:1170)
    at org.eclipse.cdt.internal.core.pdom.AbstractIndexerTask.parseFile(AbstractIndexerTask.java:1007)
    at org.eclipse.cdt.internal.core.pdom.AbstractIndexerTask.parseLinkage(AbstractIndexerTask.java:828)
    at org.eclipse.cdt.internal.core.pdom.AbstractIndexerTask.runTask(AbstractIndexerTask.java:508)
    at org.eclipse.cdt.internal.core.pdom.indexer.PDOMIndexerTask.run(PDOMIndexerTask.java:139)
    at org.eclipse.cdt.internal.core.pdom.indexer.PDOMRebuildTask.run(PDOMRebuildTask.java:87)
    at org.eclipse.cdt.internal.core.pdom.PDOMIndexerJob.run(PDOMIndexerJob.java:137)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T00:31:19.383

想通了，这确实是一个错误（[我已经提交了一个](https://bugs.eclipse.org/bugs/show_bug.cgi?id=397203)）。
我的一位同事设法完美地索引了 Github 项目，结果如下：

```
Indexed 'src' (20 sources, 1,061 headers) in 43.46 sec: 86,471 declarations; 231,728 references; 0 unresolved inclusions; 12 syntax errors; 592 unresolved names (0.19%) 
```

他在使用默认软件包 Eclipse Juno CDT 的 Fedora 发行版。这意味着他正在使用：

**Eclipse C/C++ 开发工具
版本：8.1.0.201206111645**

这与标准的 Juno CDT 下载不太一样：

**Eclipse C/C++ 开发工具
版本：8.1.1.201209170703**

我通过安装 Classic Juno 和[CDT 8.1.0](http://www.eclipse.org/downloads/download.php?file=/tools/cdt/releases/juno/r/cdt-master-8.1.0.zip)在我的 Ubuntu 系统（12.04 LTS）上检查了这个解决方法，并且索引/解析现在正常工作。

# javascript - 带有选择下拉菜单而不是输入标签字段的日期选择器

> ID：13851003
> 
> 赞同：1
> 
> 时间：2012-12-13T00:20:01.140
> 
> 标签：javascript, jquery, css, datepicker

好的，所以我到处找这个，但因为找不到它而感到惊讶。

我知道 jQuery Datepicker API 只允许使用输入标签或在 span 或 div 标签内实现它。

我使用日期选择器作为 3 个下拉菜单的辅助功能。

我有：

```
<select name="dateSelect-day" id="dateSelect-day">
    <option value="01">01</option>
    .....
</select>
<select name="dateSelect-month" id="dateSelect-month">
    <option value="01">01</option>
    .....
</select>
<select name="dateSelect-year" id="dateSelect-year">
    <option value="01">01</option>
    .....
</select> 
```

它定义了我的三个下拉菜单来选择日期。本质上，表单提交操作将从这些下拉选择中发送值。

但我还需要一个已经像这样实现的日期选择器：

标记：

```
<input type="text" size="35" id="singleDate" name="singleDate" /> 
```

JS：

```
<script>
$(function() {
    var dateFrom = $( "#dateFrom" );
    var dateTo = $("#dateTo");
    var singleDate = $("#singleDate");
    var formatter = $("#format");

    dateFrom.datepicker({
        dateFormat: "dd/mm/yy" , 
        // defaultDate: "+1w" ,   //1 week after today
        firstDay: 1 , //Monday is set as the first day of the week
        // minDate: "-3m" , //Minimum date is 3 months from today, use "y", "m","w","d"
        showOn: "both",
        buttonImage: "./calendar.png",
        buttonImageOnly: true,
        buttonText: "Pick a Date",
        numberOfMonths: 1,
        changeMonth: true,
        changeYear: true,
        // beforeShowDay: $.datepicker.noWeekends,
        beforeShowDay: $.datepicker.noWeekends,
        onClose: function( selectedDate ) {
            dateTo.datepicker("option", "minDate", selectedDate );
        }
    });

    dateTo.datepicker({
        dateFormat: "dd/mm/yy" , 
        firstDay: 1 , //Monday is set as the first day of the week
        // minDate: "-3m" , //Minimum date is 3 months from today, use "y", "m","w","d"
        showOn: "both",
        buttonImage: "./calendar.png",
        buttonImageOnly: true,
        buttonText: "Pick a Date",
        numberOfMonths: 1,
        changeMonth: true,
        changeYear: true,
        beforeShowDay: $.datepicker.noWeekends,
        onClose: function (selectedDate) {
            dateFrom.datepicker("option", "maxDate", selectedDate);
        }
    });

    singleDate.datepicker({
        dateFormat: "dd/mm/yy" , 
        // defaultDate: "+1w" ,   //1 week after today
        firstDay: 1 , //Monday is set as the first day of the week
        // minDate: "-3m" , //Minimum date is 3 months from today, use "y", "m","w","d"
        showOn: "both",
        buttonImage: "./calendar.png",
        buttonImageOnly: true,
        buttonText: "Pick a Date",
        numberOfMonths: 1,
        changeMonth: true,
        changeYear: true
    });

    formatter.change(function() {
        dateFrom.datepicker( "option", "dateFormat", $( this ).val() );
        dateTo.datepicker( "option", "dateFormat", $( this ).val() );
        singleDate.datepicker( "option", "dateFormat", $( this ).val() );
    });

    $("body").on('hover', function() {
        $('#val1').html($("#dateFrom").val());
        $('#val2').html($("#dateTo").val());
        $('#val3').html($("#singleDate").val());
    });
});
</script> 
```

所以目前我有 3 个不同的日期选择器。前两个用于选择日期范围..但我需要帮助的是最后一个名为 singleDate 的日期选择器。

我需要日期选择器在被选中后自动从下拉菜单中选择值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:50:52.323

于是想出了解决办法：

```
var onClose = function (selectedDate) {
            var tokens = selectedDate.split('/');
            var day = tokens[0];
            var month = tokens[1];
            var year = tokens[2];

            $('select.dateSelect:selected').each(function() {
                var node = $(this);
                node.attr("selected",'');
            });

            $("#dateSelect-day option:nth-child(" + (parseInt(day)) +")").attr("selected", "selected");
            $("#dateSelect-month option:nth-child(0)").attr("selected", '');
            $("#dateSelect-month option:nth-child(" + (parseInt(month)+1) +")").attr("selected", "selected");
            $("#dateSelect-year").children().each(function() {
                var node = $(this);
                if (node.val() == year) {
                    node.attr("selected", "selected");
                    return;
                }
            })
        }; 
```

# php - 难倒——需要关于 PHP 5.3 的正则表达式和 preg_replace 的建议

> ID：13851006
> 
> 赞同：1
> 
> 时间：2012-12-13T00:20:19.570
> 
> 标签：php, regex

我无法弄清楚如何在 PHP（运行 5.3.x）中实现这一点。

我有以下文本字符串，我将其从 txt 文件中提取到字符串变量中：

```
garbage here, more garbage here, more garbage, mor ..., garbage here, more garbage here, more garbage, mor ..., more garbage here, yet more garbage 
```

我试图让字符串看起来像并放回 txt 文件是：

```
garbage here, more garbage here, more garbage, garbage here, more garbage here, more garbage, more garbage here, yet more garbage 
```

我试图找出一种方法来找到每个出现的“...”，然后删除“...”后面的所有文本，直到它第一次出现“，”，但没有任何运气。这可以使用带有 preg_replace 函数的正则表达式来完成吗？到目前为止，我只设法删除了第一次出现“，”和“...”之间的所有文本，但这不是我想要的。:(

“garbage here”字符串中不会有额外的逗号或“...”...此外，“...”并不总是有尾随“，”。可能只是“这里有更多的垃圾”

我只有 PHP 可用于此任务。可以做到吗？今天下午我拿起一本正则表达式书，但到目前为止，我还没有找到任何可以完全实现我想要完成的东西。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T00:25:35.363

您应该能够使用以下正则表达式：

```
(^|,)[^,]*\.{3} 
```

用空字符串替换匹配项。

解释：

```
(^|,)    # match a ',' or at the start of the string
[^,]*    # match any number of characters that are not ','
\.{3}    # match three '.' characters 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:27:38.043

除了你的书，看看[这个教程](http://www.regular-expressions.info/tutorial.html)。

您可以在它之前和之后匹配`...`尽可能多的非`,`字符（我们将使用否定字符类表示）（尽可能多，非常简单，因为重复是贪婪的）：

```
$string = preg_replace('/[^,]*[.]{3}[^,]*/', '', $string); 
```

现在的问题只是剩下的逗号。我会简单地删除`,,`字符串开头或结尾的双引号和逗号：

```
$string = preg_replace('/^,+|,+(?=,)|,+$/', '', $string); 
```

[工作演示。](http://ideone.com/AfqObF)

在一个正则表达式中完成所有操作可能会变得棘手，因为您需要处理三种情况：前导元素包含`...`（删除尾随`,`），中心元素包含`...`（删除周围之一`,`）和尾随元素包含`...`（删除前导`,`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T00:34:05.980

它是高度具体的，但应该这样做：

```
$string = 'garbage here, more garbage here, more garbage, mor ..., garbage here, more garbage here, more garbage, mor ..., more garbage here, yet more garbage';
echo preg_replace('/,[^,]*\.{3}/', '', $string); 
```

# java - 如何将一维数组添加到二维数组？

> ID：13851009
> 
> 赞同：4
> 
> 时间：2012-12-13T00:20:30.383
> 
> 标签：java, arrays, jtable

抱歉第一次在这里提问。

如果我有这样的二维数组：

```
int[][] array2d = {{1, 2, 3}, {6, 7, 8}}; 
```

如何像这样添加多个一维数组：

```
int[] array1d = {3, 2, 1};
int[] array1d2 = {8, 7, 6}; 
```

这样我原来的二维数组就变成了这样：

```
int[][] array2d = {{1, 2, 3}, {6, 7, 8}, {3, 2, 1}, {8, 7, 6}}; 
```

**注意：**这是为了在按下按钮时将来自 JTextfield 的信息添加到 JTable 中。因此，二维数组将用作表内的数据。如果有更好的方法来实现这一点，我也会很感激。=)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T00:27:14.717

你的数组：

```
int[][] array2d = {{1, 2, 3}, {6, 7, 8}}; 
```

大小是固定的，因此您必须创建一个具有足够容量的副本来保存新值：

```
int[][] newArray = Arrays.copyOf(array2d, 4);
newArray[2] = array1d;
newArray[3] = array1d2; 
```

要将数据添加到`JTable`数组中，必须首先将其转换为非原始类型，例如`Integer`数组。一种选择是使用 Apache Commons：

```
model.addRow(ArrayUtils.toObject(array)); 
```

对于数组的每一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T00:24:40.273

数组是固定大小的，因此要附加它，您需要调整数组的大小，请查看 java.util.Arrays。

然后设置数组位置

```
arra2d[index] = array1d; 
```

您是否有理由不使用

```
TableModel.addRow(dataArray); 
```

?

# javascript - JavaScript 点击

> ID：13851014
> 
> 赞同：1
> 
> 时间：2012-12-13T00:20:49.400
> 
> 标签：javascript, html, knockout.js, onclick

我有这个文件，它允许我有一个多选选择问卷，点击进度。

我如何去用图像代替这里的文字？（并且仍然有机制，一旦单击 [图像]，就会提出下一个问题）

我已经尝试使用 UL/H1 设置背景图像进行一些基本的 div 操作，但正如您所料，这让我毫无用处。

我很好奇是不是因为“标题”需要是别的东西。

```
 var questions = [
                {
                    caption: 'Question 1?',
                    answers: [
                        { caption: 'It sucks!' },
                        { caption: 'It rules!' }
                    ]
                } 
```

我的其余代码正在进行中：http: [//jsfiddle.net/Rbzy6/19/](http://jsfiddle.net/Rbzy6/19/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:44:42.667

做这样的事情怎么样：[小提琴](http://jsfiddle.net/Dim13i/Rbzy6/24/)

我所做的是我将图像名称设置为答案：

```
var questions = [
        {
            caption: 'Question 1?',
            answers: [
                { caption: 'It sucks!' },
                { caption: 'It rules!' }
            ]
        },
        {
            caption: 'Question 2?',
            answers: [
                { caption: '_62880798_62880797.jpg' },
                { caption: '_62880035_62880034.jpg' }
            ]
        }
]; 
```

然后：

```
self.currentQuestion(questions[currentQuestionIndex]); 
```

我添加了这个 jQuery 代码：

```
$('#lol').find('li').each(function() {
    var imgPath = 'http://news.bbcimg.co.uk/media/images/62880000/jpg/';
    var imgName = $(this).text();
    $(this).html('<img src="'+imgPath+imgName+'" width="20" />');
}); 
```

我使用元素的内容`li`（答案）来获取图像的名称，然后将`li`元素的内容替换为图像标签 ( `<img src="" />`)。

# c# - 如何在 Windows Phone 中绘图（替代 Java 中的图形）

> ID：13851018
> 
> 赞同：0
> 
> 时间：2012-12-13T00:21:06.883
> 
> 标签：c#, windows-phone-7

Windows Phone 中的 Java 图形有什么替代品吗？我想绘制一个组件（类似手表），它指示用户距离“正确状态”有多少。它适用于吉他调音器。谢谢

PS：我根本不想用 XAML 来做，只是简单地绘制图形并在需要时重新绘制。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-13T03:02:19.260

解决此问题的最佳方法是在 Expression Blend 中打开您的项目。它可以让您绘制各种组件、添加图片、编辑图片并为其添加故事线。

例如，一旦你画了手，你可以根据调谐器调整手的宽度，让用户知道他离所需目标有多远。如果您希望包含动画，Expression Blend 还允许您制作故事板。

# c# - OnClientClick 事件不会从代码隐藏中注册 javascript 警报

> ID：13851021
> 
> 赞同：3
> 
> 时间：2012-12-13T00:21:21.590
> 
> 标签：c#, javascript, asp.net

好吧，我有一个令人尴尬的简单问题，希望有一个令人尴尬的简单答案。我正在尝试获取一个 asp:ImageButton 来显示一条警报消息，其中包含来自我的代码隐藏的变量。这是代码的过度简化版本：

```
public string AlertMe
{
    get
    {
        return "alert('hi');";
    }
} 
```

现在，当我尝试以这种方式访问​​它时：

```
<asp:ImageButton ID="btn" runat="server" ImageUrl="/Images/img.ico" OnClientClick='<%=AlertMe%>'/> 
```

我看到回发，但没有警告消息，好像它根本无法访问我的财产。同时，这两行：

```
<%=AlertMe%><br />
<a onclick="<%=AlertMe%>">click this</a> 
```

两者都工作得很好而且花花公子。（第一个显示 javascript 警报的代码，第二个触发警报没有问题。）

所以我的大问题是：为什么asp控件的OnClientClick事件无法注册警报？我是否缺少明显的缺陷，或者我真的需要从代码隐藏中注册整个事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T00:25:44.393

您不能使用`<%= ... %>`语法来设置服务器控件的属性。要在服务器控件上设置动态属性，您必须在代码中进行设置。

```
this.btn.OnClientClick = this.AlertMe; 
```

这是因为`<%= ... %>`是`Response.Write()`. 因此，直到aspx 被解析、评估和渲染开始*后才会调用它。*到那时为时已晚。

作为在后面的代码中设置值的替代方法，您可以使用这种准声明性技术：

```
<asp:ImageButton ID="btn" runat="server" ImageUrl="/Images/img.ico" />
<%
btn.OnClientClick = <%=AlertMe%>;
%> 
```

还有其他方法可以绕过它。 [This answer to a similar question](https://stackoverflow.com/a/8738681/361684)讨论了您可以采取的几种方法。我找不到任何专门提到这一点的“官方”参考资料（例如，msdn），但我看起来并不难。这里有几篇博客文章也讨论了这个问题：

*   Jim Black 的博客文章：[服务器标签不能包含 <% ... %> 结构](http://jblack.wordpress.com/2006/12/15/server-tags-cannot-contain-constructs/)
*   weblogs.asp.net 上的博客文章：[使用 ExpressionBuilder 避免“服务器标签不能包含 <% ... %> 结构”</a>](http://weblogs.asp.net/alnurismail/archive/2009/04/18/use-expressionbuilder-to-avoid-server-tags-cannot-contain-lt-gt-constructs.aspx)
[](http://weblogs.asp.net/alnurismail/archive/2009/04/18/use-expressionbuilder-to-avoid-server-tags-cannot-contain-lt-gt-constructs.aspx)

[](http://weblogs.asp.net/alnurismail/archive/2009/04/18/use-expressionbuilder-to-avoid-server-tags-cannot-contain-lt-gt-constructs.aspx)

[或者](http://weblogs.asp.net/alnurismail/archive/2009/04/18/use-expressionbuilder-to-avoid-server-tags-cannot-contain-lt-gt-constructs.aspx)[用 bing 搜索它以](http://www.bing.com/search?q=Server+tags+cannot+contain+%3C%25+%25%3E+constructs&first=13&FORM=PORE)获得更多有趣的阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:40:14.267

对于遇到此问题的其他人，我从很久以前就遇到了这个博客： [http ://weblogs.asp.net/infinitiesloop/archive/2006/08/09/The-CodeExpressionBuilder.aspx](http://weblogs.asp.net/infinitiesloop/archive/2006/08/09/The-CodeExpressionBuilder.aspx)

我发现关于 Expression Builders 和 ViewState 问题的部分内容特别丰富。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T00:27:05.870

我认为这是一个引用问题。尝试

```
OnClientClick="<%=AlertMe%>" 
```

# jdbc - 在 Glassfish 上为 DB2 设置 currentSchema 时遇到问题

> ID：13851022
> 
> 赞同：1
> 
> 时间：2012-12-13T00:21:23.727
> 
> 标签：jdbc, glassfish, db2

我一直在努力将应用程序从 MySQL 迁移到 DB2，目前在部署时遇到了 currentSchema 的问题。

查询：

```
SELECT count(*) FROM SomeTable WHERE BooleanColumn=1 
```

会给我一个错误（SQLCODE=-204），这意味着该对象不存在。

相反，如果我发出这样的查询：

```
SELECT count(*) FROM SCHEMA.SomeTable  WHERE BooleanColumn=1 
```

一切都如我所料。

似乎我应该能够将其设置为默认的某个模式，此时我专注于 Glassfish 中的 JDBC 连接池。似乎我通常能够构建一个类似于“jdbc:db2://SERVER_NAME:PORT/DATABASE:currentSchema=SCHEMA_NAME;”的 JDBC URL，并且 currentSchema 会满足我的需求，但我不知道如何在 Glassfish 的管理控件中执行此操作。我显然对 Glassfish 不太了解 - 我很可能找错地方了。

我的“附加属性”部分配置如下：

废话。我想我太新了，无法嵌入图片……这个链接是这样的：

[http://i.stack.imgur.com/IqUQd.jpg](http://i.stack.imgur.com/IqUQd.jpg)

获得此设置的任何帮助都会很棒...我不想寻找每个表引用并在其前面加上模式名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:54:26.520

您可以在同一连接中发出[此语句：](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0001016.html)

```
SET SCHEMA = my_schema; 
```

默认情况下，DB2 使用您的用户名作为模式。

# nhibernate - Orchard 如何处理物品？

> ID：13851024
> 
> 赞同：2
> 
> 时间：2012-12-13T00:21:45.500
> 
> 标签：nhibernate, orchardcms, dispose, autofac

我对果园比较陌生。我知道它使用 Autofac 进行依赖注入，而 NHibernate 是 ORM。我查看了香草果园安装附带的其他模块，但我没有看到任何处理对象的标准方式。我知道 Autofac 用于管理对象的生命周期，但是如果不深入研究 Orchard 代码，就很难说出它是如何完成的。我为用于查询数据库的模块创建了记录，并且我特别想知道如何处理该连接。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T02:01:40.263

请参阅[http://docs.orchardproject.net/Documentation/How-Orchard-works#DependencyInjection](http://docs.orchardproject.net/Documentation/How-Orchard-works#DependencyInjection)

大多数对象实现 IDependency，其范围/生命周期是请求。一些对象由于实现了 ITransientDependency 而寿命较短。这些对象在每次被请求时都会重新创建，并随着它们的范围消失，即使用它们的代码块。其他一些对象，通过实现 ISingletonDependency，具有与 shell 相同的生命周期，即与租户相同。那些保留在每个租户一个副本中，并且只会随着应用程序池而死。

# c# - 使用 c# sdk 在 facebook 的业务页面上发布问题

> ID：13851026
> 
> 赞同：1
> 
> 时间：2012-12-13T00:21:59.870
> 
> 标签：c#, facebook, winforms

今晚我读了很多文章，但仍然不明白我应该做什么才能在 Facebook 的商业页面上发布。这是我的代码：

```
string token = getHtml("https://graph.facebook.com/oauth/access_token?client_id=clientID&client_secret=secretKey&grant_type=client_credentials");
token = token.Replace("access_token=", "");
FacebookClient fbClient = new FacebookClient(token);
var args = new Dictionary<string, object>();
args["message"] = "Testing 12qwe3";
fbClient.Post("/pageID/feed", args); 
```

它总是说应用程序未授权。如何授权？我读了很多文章，但仍然无法做到。

在研究许多文章完全失败后，我发布了这篇文章。请让我知道有什么问题吗？

**- - 更新**

我做了第一部分，让自己成为经理页面，然后创建一个应用程序，然后为该应用程序提供管理页面和发布等的能力......但是当我这样做时，即使使用上面的代码，我仍然会得到另一个问题同样的错误。但是当我使用facebook网站的工具（**GRAPH API EXPLORER**）部分并选择这个应用程序并生成一个令牌时。我比直接在应用程序中使用它并且它发布得很好。金迪让我知道出了什么问题！

# android - 有什么方法可以将自定义列添加到android中的ContactsContract数据库

> ID：13851032
> 
> 赞同：0
> 
> 时间：2012-12-13T00:22:59.263
> 
> 标签：android

我想知道是否可以在 android 中向现有的 ContactsContract 数据库添加自定义列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:11:42.650

实际上：

1.  ContactsContract 是一个包含常量的类。这些常量描述了联系人提供程序中的各种表和列。
2.  您可以将自定义行添加到 ContactsContract.Data 定义的表中，但须遵守文档中描述的注意事项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:56:46.050

不，抱歉，该数据库由您以外的其他应用程序维护。更改数据库的唯一方法是构建自己的 Android 操作系统副本，并使用该`ContentProvider`.

# javafx-2 - 为什么我的表格视图代码中的 JavaFX2.2 按钮不可见？

> ID：13851033
> 
> 赞同：1
> 
> 时间：2012-12-13T00:23:05.693
> 
> 标签：javafx-2

JavaFX2 教程有一个地址簿示例，它是一个表格视图。

教程： [http ://docs.oracle.com/javafx/2/fxml_get_started/fxml_tutorial_intermediate.htm#CACFEHBI](http://docs.oracle.com/javafx/2/fxml_get_started/fxml_tutorial_intermediate.htm#CACFEHBI)

增强编辑单元格： [http ://docs.oracle.com/javafx/2/ui_controls/table-view.htm](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)

修改添加复选框： http: [//download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html#SAMPLES/Controls/Table/Table](http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html#SAMPLES/Controls/Table/Table) Cell Factory

在文本框中输入数据并单击添加按钮将一行添加到表中。但是，不能删除行。我试图查看是否可以在每个单元格中添加一个删除按钮 - 单击它将删除该行。我修改了现有的示例代码。不知何故，按钮不可见。任何指针表示赞赏。

//FXML_tableview.fxml文件

```
<?import javafx.collections.*?> 
<?import javafx.geometry.Insets?>
<?import java.lang.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.*?>
<?import javafx.scene.layout.*?>
<?import fxmltableview.*?> 
 <Scene fx:id="root" width="550" height="550"
    fx:controller="fxmltableview.FXMLTableViewController" 
    xmlns:fx="http://javafx.com/fxml">      
    <GridPane alignment="center" hgap="10" vgap="10">
        <padding>
            <Insets top="10" right="10" bottom="10" left="10"/>
        </padding>

        <TableView fx:id="tableView" GridPane.columnIndex="0" 
                   GridPane.rowIndex="1">
        </TableView>

        <HBox spacing="10" alignment="bottom_right" GridPane.columnIndex="0" 
              GridPane.rowIndex="2">
            <TextField fx:id="firstNameField" promptText="First Name"
                       prefWidth="90"/>
            <TextField fx:id="lastNameField" promptText="Last Name"
                       prefWidth="90"/>
            <TextField fx:id="emailField" promptText="Email"
                       prefWidth="150"/>
            <Button text="Add" onAction="#addPerson"/>
        </HBox>
    </GridPane>
 </Scene> 
```

// FXMLTableView.java

```
package fxmltableview;

import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.fxml.FXMLLoader;
import javafx.scene.Scene;
import javafx.scene.control.TableColumn;
import javafx.stage.Stage;
import javafx.beans.property.BooleanProperty;
import javafx.beans.property.SimpleBooleanProperty;
import javafx.beans.property.StringProperty;
import javafx.beans.property.SimpleStringProperty;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.fxml.FXML;
import javafx.geometry.Pos;
import javafx.scene.control.Button;
import javafx.scene.control.CheckBox;
import javafx.scene.control.TableCell;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableColumn.CellEditEvent;
import javafx.scene.control.TableView;
import javafx.scene.control.TextField;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.input.KeyCode;
import javafx.scene.input.KeyEvent;
import javafx.scene.layout.AnchorPane;
import javafx.util.Callback;

public class FXMLTableView extends Application {
   static public ObservableList<Person> data;
   @FXML Scene root;
   @FXML TableView tableView;
    @Override
    public void start(Stage primaryStage) throws Exception {

        primaryStage.setTitle("FXML TableView Example");
        root = (Scene)FXMLLoader.load(getClass().getResource("fxml_tableview.fxml"));
        primaryStage.setScene(root);
                data = FXCollections.observableArrayList(
                new Person(true, "Jacob", "Smith", "jacob.smith@example.com"),
                new Person(false, "Isabella", "Johnson", "isabella.johnson@example.com"),
                new Person(true, "Ethan", "Williams", "ethan.williams@example.com"),
                new Person(true, "Emma", "Jones", "emma.jones@example.com"),
                new Person(false, "Michael", "Brown", "michael.brown@example.com"));

        tableView = (TableView) root.lookup("#tableView");
        TableColumn delCol = new TableColumn<Person, Boolean>();
         delCol.setMinWidth(50);
        delCol.setCellFactory(new Callback<TableColumn<Person, Boolean>, TableCell<Person, Boolean>>() {

            public TableCell<Person, Boolean> call(TableColumn<Person, Boolean> p) {
                return new DeleteTableCell<Person, Boolean>();
            }
        });
        //"Invited" column
        TableColumn invitedCol = new TableColumn<Person, Boolean>();
        invitedCol.setText("Invited");
        invitedCol.setMinWidth(50);
        invitedCol.setCellValueFactory(new PropertyValueFactory("invited"));
        invitedCol.setCellFactory(new Callback<TableColumn<Person, Boolean>, TableCell<Person, Boolean>>() {

            public TableCell<Person, Boolean> call(TableColumn<Person, Boolean> p) {
                return new CheckBoxTableCell<Person, Boolean>();
            }
        });
        //"First Name" column
        TableColumn firstNameCol = new TableColumn();
        firstNameCol.setText("First");
        firstNameCol.setCellValueFactory(new PropertyValueFactory("firstName"));
        //"Last Name" column
        TableColumn lastNameCol = new TableColumn();
        lastNameCol.setText("Last");
        lastNameCol.setCellValueFactory(new PropertyValueFactory("lastName"));
        //"Email" column
        TableColumn emailCol = new TableColumn();
        emailCol.setText("Email");
        emailCol.setMinWidth(200);
        emailCol.setCellValueFactory(new PropertyValueFactory("email"));

        //Set cell factory for cells that allow editing
        Callback<TableColumn, TableCell> cellFactory =
                new Callback<TableColumn, TableCell>() {

                    public TableCell call(TableColumn p) {
                        return new EditingCell();
                    }
                };
        emailCol.setCellFactory(cellFactory);
        firstNameCol.setCellFactory(cellFactory);
        lastNameCol.setCellFactory(cellFactory);

        //Set handler to update ObservableList properties. Applicable if cell is edited
        updateObservableListProperties(emailCol, firstNameCol, lastNameCol);

        tableView.setItems(data);
        //Enabling editing
        tableView.setEditable(true);
        tableView.getColumns().addAll(invitedCol, firstNameCol, lastNameCol, emailCol, delCol);
 //       root.getChildren().add(tableView); 
        primaryStage.show();
    }
   private void updateObservableListProperties(TableColumn emailCol, TableColumn firstNameCol,
            TableColumn lastNameCol) {
        //Modifying the email property in the ObservableList
        emailCol.setOnEditCommit(new EventHandler<TableColumn.CellEditEvent<Person, String>>() {           
            @Override public void handle(TableColumn.CellEditEvent<Person, String> t) {
                ((Person) t.getTableView().getItems().get(
                        t.getTablePosition().getRow())).setEmail(t.getNewValue());
            }
        });
        //Modifying the firstName property in the ObservableList
        firstNameCol.setOnEditCommit(new EventHandler<TableColumn.CellEditEvent<Person, String>>() {          
            @Override public void handle(TableColumn.CellEditEvent<Person, String> t) {
                ((Person) t.getTableView().getItems().get(
                        t.getTablePosition().getRow())).setFirstName(t.getNewValue());
            }
        });
        //Modifying the lastName property in the ObservableList
        lastNameCol.setOnEditCommit(new EventHandler<TableColumn.CellEditEvent<Person, String>>() {           
            @Override public void handle(TableColumn.CellEditEvent<Person, String> t) {
                ((Person) t.getTableView().getItems().get(
                        t.getTablePosition().getRow())).setLastName(t.getNewValue());
            }
        });
    }
   //CheckBoxTableCell for creating a CheckBox in a table cell
    public static class CheckBoxTableCell<S, T> extends TableCell<S, T> {
        private final CheckBox checkBox;
        private ObservableValue<T> ov;

        public CheckBoxTableCell() {
            this.checkBox = new CheckBox();
            this.checkBox.setAlignment(Pos.CENTER);

            setAlignment(Pos.CENTER);
            setGraphic(checkBox);
        } 

        @Override public void updateItem(T item, boolean empty) {
            super.updateItem(item, empty);
            if (empty) {
                setText(null);
                setGraphic(null);
            } else {
                setGraphic(checkBox);
                if (ov instanceof BooleanProperty) {
                    checkBox.selectedProperty().unbindBidirectional((BooleanProperty) ov);
                }
                ov = getTableColumn().getCellObservableValue(getIndex());
                if (ov instanceof BooleanProperty) {
                    checkBox.selectedProperty().bindBidirectional((BooleanProperty) ov);
                }
            }
        }
    }
     public static class DeleteTableCell<S, T> extends TableCell<S, T> {
        private final Button del;
        private ObservableValue<T> ov;

        public DeleteTableCell() {
            this.del = new Button("X");
            del.setStyle("-fx-base: red;");
            this.del.setAlignment(Pos.CENTER);

            setAlignment(Pos.CENTER);
            setGraphic(del);
            del.setOnAction(new EventHandler<ActionEvent> () {
                @Override
                public void handle(ActionEvent t) {
                    int i= getIndex();
                    FXMLTableView.data.remove(i);
                }                
            });
        } 

        @Override public void updateItem(T item, boolean empty) {
            super.updateItem(item, empty);
            if (empty) {
                setText(null);
                setGraphic(null);
            } else {
                setGraphic(del);
            }
        }
    }
    // EditingCell - for editing capability in a TableCell
    public static class EditingCell extends TableCell<Person, String> {
        private TextField textField;

        public EditingCell() {
        }

        @Override public void startEdit() {
            super.startEdit();

            if (textField == null) {
                createTextField();
            }
            setText(null);
            setGraphic(textField);
            textField.selectAll();
        }

        @Override public void cancelEdit() {
            super.cancelEdit();
            setText((String) getItem());
            setGraphic(null);
        }

        @Override public void updateItem(String item, boolean empty) {
            super.updateItem(item, empty);
            if (empty) {
                setText(null);
                setGraphic(null);
            } else {
                if (isEditing()) {
                    if (textField != null) {
                        textField.setText(getString());
                    }
                    setText(null);
                    setGraphic(textField);
                } else {
                    setText(getString());
                    setGraphic(null);
                }
            }
        }

        private void createTextField() {
            textField = new TextField(getString());
            textField.setMinWidth(this.getWidth() - this.getGraphicTextGap() * 2);
            textField.setOnKeyReleased(new EventHandler<KeyEvent>() {                
                @Override public void handle(KeyEvent t) {
                    if (t.getCode() == KeyCode.ENTER) {
                        commitEdit(textField.getText());
                    } else if (t.getCode() == KeyCode.ESCAPE) {
                        cancelEdit();
                    }
                }
            });
        }

        private String getString() {
            return getItem() == null ? "" : getItem().toString();
        }
    } 

    public static void main(String[] args) {
        launch(args);
    }
} 
```

// FXMLTableViewController.java

```
package fxmltableview;

import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.fxml.FXML;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.TextField;

public class FXMLTableViewController {
    @FXML private TableView<Person> tableView;
    @FXML private TextField firstNameField;
    @FXML private TextField lastNameField;
    @FXML private TextField emailField;

    @FXML
    protected void addPerson(ActionEvent event) {
        ObservableList<Person> data = tableView.getItems();
        data.add(new Person(false, firstNameField.getText(),
            lastNameField.getText(),
            emailField.getText()
        ));

        firstNameField.setText("");
        lastNameField.setText("");
        emailField.setText("");   
    }

} 
```

// Person.java

```
package fxmltableview;

import javafx.beans.property.BooleanProperty;
import javafx.beans.property.SimpleBooleanProperty;
import javafx.beans.property.SimpleStringProperty;
import javafx.beans.property.StringProperty;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;

//Person object
public class Person {
    private BooleanProperty invited;
    private StringProperty firstName;
    private StringProperty lastName;
    private StringProperty email;

    Person(boolean invited, String fName, String lName, String email) {
        this.invited = new SimpleBooleanProperty(invited);
        this.firstName = new SimpleStringProperty(fName);
        this.lastName = new SimpleStringProperty(lName);
        this.email = new SimpleStringProperty(email);
        this.invited = new SimpleBooleanProperty(invited);

        this.invited.addListener(new ChangeListener<Boolean>() {
            public void changed(ObservableValue<? extends Boolean> ov, Boolean t, Boolean t1) {
                System.out.println(firstNameProperty().get() + " invited: " + t1);
            }
        });            
    }

    public BooleanProperty invitedProperty() { return invited; }

    public StringProperty firstNameProperty() { return firstName; }

    public StringProperty lastNameProperty() { return lastName; }

    public StringProperty emailProperty() { return email; }

    public void setLastName(String lastName) { this.lastName.set(lastName); }

    public void setFirstName(String firstName) { this.firstName.set(firstName); }

    public void setEmail(String email) { this.email.set(email); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:31:31.447

缺少 delCol 的单元格值工厂。添加

```
delCol.setCellValueFactory(new PropertyValueFactory("invited")); 
```

PropertyValueFactory 的参数在这里并不重要。

# php - 使用 javascript 提交 php 弹出表单

> ID：13851035
> 
> 赞同：0
> 
> 时间：2012-12-13T00:23:21.470
> 
> 标签：php, javascript

我在 php 中有一个由 javascript 打开的弹出表单。我希望在单击提交时将其发送到我的数据库。php 表单在没有 javascript 的情况下可以正常工作，但是在添加时它不起作用。你知道如何解决这个问题吗？

```
 </style>
 <script type='text/javascript'>
 $(document).ready(function() {
  $('#box_form').dialog({
    autoOpen: false,
    height: 375,
    width: 350,
    modal: true,
    buttons: [
        {
        text: "Cancel",
        click: function() {
            $(this).dialog("close");
        }},
    {
        text: "Submit",
        click: function() {
            $('#former').submit();
        }}
    ]
});
$('#clicky').button().click(function(e){
    $('#box_form').dialog('open');
});
  });
    </script>
    </head>
   <body>
   <form id="former" method="post" action="film_post.php" name="former">
  <div id="box_form">
   <select id="option" name="option">
                    <option value="film">film</option>
                    <option value="livre">livre</option>
                    <option value="musique">musique</option>            
            </select></p>
    <p>
    <select id="star" name="star">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option> 

            </select></p>
    <label for="nom">nom</label> :  <input type="text" name="nom" id="nom" /><br />

 </div>
 </form>
 <input type="button" id="clicky" value="Show Form"> 
```

而film_post.php 文件是：

```
 try
  {
$bdd = new PDO('mysql:host=localhost;dbname=website', 'root', 'root');
   }
  catch(Exception $e)
 {
    die('Erreur : '.$e->getMessage());
   }

    $option = $_POST['option'];
      $star = $_POST['star'];

    if ($option == film AND $star = 1) {
   $req = $bdd->prepare('INSERT INTO film (film, star) VALUES(?,?)');
     $req->execute(array($_POST['nom'],$_POST['star'] )); }

     elseif ($option == film AND $star = 2) {
    $req = $bdd->prepare('INSERT INTO film (film, star) VALUES(?,?)');
    $req->execute(array($_POST['nom'],$_POST['star'] )); }

     elseif ($option == film AND $star = 3) {
   req = $bdd->prepare('INSERT INTO film (film, star) VALUES(?,?)');
   $req->execute(array($_POST['nom'],$_POST['star'] )); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:15:17.550

显然我还不能发布图片，所以这里有一个链接，指向我在下面的答案中谈到的那个。[http://i.stack.imgur.com/xgExo.png](http://i.stack.imgur.com/xgExo.png)

我执行了您的代码，获取了必要的脚本 src 标签，我假设您在实际代码中拥有这些标签，并发现了与您相同的问题。在查看了 firebug 控制台后，就像 jchapa 建议的那样，我发现了您在上图中可以看到的内容。

您正在使用的 jquery ui 以这样一种方式重写您的 from ，它不仅给它提供了那些气泡图形，而且还过早地终止了您的表单标记，正如我在 "" 文本下划线的地方所见。

你如何解决这个问题，我不知道，但这就是你的问题所在。您可能会考虑在线查找如何在此 jquery ui 中设置表单，或者您可能只是从对话框中构建自己的表单。不过，不可否认，图形不会那么圆滑。

# c++ - 运行 Green Hills 调试器时的幻象输入

> ID：13851042
> 
> 赞同：0
> 
> 时间：2012-12-13T00:24:26.503
> 
> 标签：c++, rtos, greenhills

我在 Green Hills INTEGRITY 5.0.10 下的 Marvell Monahans PXA320 上运行。我正在使用 MULTI 4.2.3 进行开发。我正在使用 RTSERV 连接进行调试，我被要求接管一个菜单驱动的程序。

我注意到如果我暂停程序（修改断点）然后恢复它，任务会进入一个无限循环，在调试器 I/O 选项卡中显示菜单。在打印每个菜单实例后，它说我做了非法选择。所以，一些输入显然被输入到任务中，就好像我输入了它一样（这个输入显然对应于无效的菜单选择）。我在显示屏上看不到这个幻象输入是什么。

我能做些什么来防止停止/恢复搞砸 I/O？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T19:56:01.817

我的第一个猜测是 getc() （或您的等价物）正在返回-1。如果您的输入缓冲区因停止应用程序而溢出，则可能会发生这种情况。当应用程序停止时，I/O 继续流动......

在使用 INTEGRITY 进行调试时停止程序通常不是一个好主意。您通常最好将调试器附加到单个线程（空闲或不经常使用的东西），在该线程中设置“任何任务”断点，然后恢复线程。（不要关闭窗口！这样做会删除断点。）您将在命中断点的线程上看到“DebugBrk”状态——然后您可以双击并附加到该特定线程。

遵循该替代过程应该（希望！）防止 I/O 错误。

# elasticsearch - 有没有更聪明的方法来重新索引弹性搜索？

> ID：13851044
> 
> 赞同：45
> 
> 时间：2012-12-13T00:24:29.877
> 
> 标签：elasticsearch, downtime

我问是因为我们的搜索在我们解决问题时处于不断变化的状态，但是每次我们对索引进行更改（更改标记器或过滤器，或分片/副本的数量）时，我们都必须删除整个索引并将我们所有的 Rails 模型重新索引到 Elasticsearch 中……这意味着我们必须考虑停机时间来重新索引所有记录。

有没有我不知道的更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-07-03T11:15:23.460

我认为@karmi 是对的。但是，让我解释一下简单一点。我需要偶尔使用一些新属性或分析设置升级生产模式。我最近开始使用下面描述的场景来进行实时、恒定负载、零停机时间的索引迁移。您可以远程执行此操作。

以下是步骤：

## 假设：

*   你有 index`real1`和 aliases `real_write`，`real_read`指向它，
*   客户端只写入`real_write`和读取`real_read`，
*   `_source`文档的属性可用。

## 1\. 新索引

`real2`使用您选择的新映射和设置创建索引。

## 2\. Writer别名切换

使用以下批量查询开关写入别名。

```
curl -XPOST 'http://esserver:9200/_aliases' -d '
{
    "actions" : [
        { "remove" : { "index" : "real1", "alias" : "real_write" } },
        { "add" : { "index" : "real2", "alias" : "real_write" } }
    ]
}' 
```

这是原子操作。从此时起`real2`，所有节点上的新客户端数据都将被填充。读者仍然使用旧的`real1`via `real_read`。这是最终的一致性。

## 3.旧数据迁移

数据必须从 迁移`real1`到，但是不能用旧条目覆盖其中的`real2`新文档。`real2`迁移脚本应使用`bulk`带有操作的 API `create`（不是`index`或`update`）。我使用具有良好 ETA 状态的简单 Ruby 脚本[es-reindex ：](https://github.com/pgaertig/es-reindex)

```
$ ruby es-reindex.rb http://esserver:9200/real1 http://esserver:9200/real2 
```

*UPDATE 2017*您可以考虑使用新的[Reindex API](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-reindex.html)而不是使用脚本。它具有许多有趣的功能，例如冲突报告等。

## 4.阅读器别名切换

现在`real2`是最新的，客户正在写入它，但他们仍在读取`real1`. 让我们更新阅读器别名：

```
curl -XPOST 'http://esserver:9200/_aliases' -d '
{
    "actions" : [
        { "remove" : { "index" : "real1", "alias" : "real_read" } },
        { "add" : { "index" : "real2", "alias" : "real_read" } }
    ]
}' 
```

## 5.备份和删除旧索引

写入和读取转到`real2`。`real1`您可以从 ES 集群中备份和删除索引。

完毕！

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-13T09:21:29.297

是的，有更聪明的方法可以在不停机的情况下重新索引数据。

首先，永远不要使用“最终”索引名称作为您的真实索引名称。因此，如果您想将索引命名为“articles”，请不要将该名称用作物理索引，而是创建一个索引，例如“articles-2012-12-12”或“articles-A”、“articles” -1”等。

其次，创建一个指向该索引的别名“alias”。然后，您的应用程序将使用此别名，因此您永远不需要手动更改索引名称、重新启动应用程序等。

第三，当您想要或需要重新索引数据时，将它们重新索引到*不同*的索引中，比如说“articles-B”——Tire 的索引工具链中的所有工具都支持您。

完成后，将别名指向新索引。这样，您不仅可以最大程度地减少停机时间（没有任何停机时间），而且还拥有一个安全的快照：如果您以某种方式将索引弄乱到新索引中，您可以切换回旧索引，直到您解决问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-07T15:30:59.527

写了一篇关于我最近如何在没有停机的情况下处理重新索引的博客文章。需要一些时间来弄清楚需要到位的所有小事情。希望这可以帮助！

[https://summera.github.io/infrastructure/2016/07/04/reindexing-elasticsearch.html](https://summera.github.io/infrastructure/2016/07/04/reindexing-elasticsearch.html)

总结一下：

### 第 1 步：准备新索引

使用新映射创建新索引。这可以在同一个 Elasticsearch 实例上，也可以在一个全新的实例上。

### 第 2 步：使索引保持最新

在重新编制索引时，您希望使新旧索引都保持最新。对于写操作，这可以通过将写操作发送到新旧索引上的后台工作人员来完成。

删除有点棘手，因为在删除记录和将记录重新索引到新索引之间存在竞争条件。因此，您需要跟踪在重新索引期间需要删除的记录，并在完成后处理这些记录。如果您没有执行多次删除，另一种方法是在重新索引期间消除删除的可能性。

### 第 3 步：执行重新索引

您需要使用[滚动搜索](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-scroll.html)来读取数据并使用[批量 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html)进行插入。由于在第 2 步之后，您将在后台将新的和更新的文档写入新索引，因此您要确保不会使用批量 API 请求更新新索引中的现有文档。

这意味着您希望批量 API 请求的操作是创建，而不是索引。来自[文档](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html#docs-bulk)：“如果已经存在具有相同索引和类型的文档，则创建将失败，而索引将根据需要添加或替换文档”。这里的要点是您不希望滚动搜索快照中的旧数据覆盖新索引中的新数据。

github 上有一个很棒的脚本可以帮助您完成这个过程：[es-reindex](https://github.com/geronime/es-reindex)。

### 第 4 步：切换

完成重新索引后，就该将搜索切换到新索引了。您需要重新打开删除或处理新索引的排队删除作业。您可能会注意到搜索新索引一开始有点慢。这是因为 Elasticsearch 和 JVM 需要时间来预热。

执行您需要的任何代码更改，以便您的应用程序开始搜索新索引。如果遇到问题并需要回滚，您可以继续写入旧索引。如果您觉得这是不必要的，您可以停止写信给它。

### 第 5 步：清理

此时您应该完全过渡到新索引。如果一切顺利，请执行任何必要的清理工作，例如：

*   如果旧索引主机与新索引主机不同，则删除它
*   删除与旧索引相关的序列化代码

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-13T00:26:41.290

也许创建另一个索引，并将所有数据重新索引到该索引上，然后在重新索引完成后进行切换？

# python - 使用python在html中读取带有新行的文本文件

> ID：13851045
> 
> 赞同：0
> 
> 时间：2012-12-13T00:24:34.407
> 
> 标签：python, html

我有一个文本文件，我想在我的 cgi 脚本中读取它，每行之间会出现一个新行，但它只是作为一堵巨大的文本墙出现。我不知道在哪里放置'\ n'。我尝试了多个位置，但没有一个工作。这是我的代码。

```
cgitb.enable()

form = cgi.FieldStorage()

keyword = form.getvalue('keyword')

f = open('%s.txt' %keyword, 'r')

print 'Content-type: text/html\r\n\r'
print '<html>'
print '<title> keyword + "tweets" </title>'
print f.readlines()
print '</html>'

f.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:27:58.523

默认情况下，HTML 将换行符视为空格。将它们转换为`<br>`元素，或者将文本包装在`<pre>`元素中，或者确保`white-space`在 CSS 中进行处理是适当的。

另外，`print f.readlines.join('\n')`或者`print f.read()`（或者`print f.readlines().join('<br>')`如果您选择第一选择）；否则你应该得到列表的代表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:39:39.460

如果您真的希望输出显示为纯文本，那么将 Content-Type 标头的值简单地设置为“text/plain”而不是“text/html”会容易得多，然后大多数浏览器只会在没有需要穿插 HTML。

请注意，如果您确实想要生成 HTML，您应该在文件内容周围包含一个打开和关闭 <BODY> 标记（除非它们恰好出现在文件中）。

# java - 在 Eclipse 或 Intellij 中取消封装重构？

> ID：13851046
> 
> 赞同：4
> 
> 时间：2012-12-13T00:24:35.023
> 
> 标签：java, eclipse, refactoring, intellij-idea

考虑一个包装类`W`，wrapping `C`，这意味着对于 的大多数属性`C`，都有一个对应的属性`A`，`W`其逻辑无非是委托给`C`的`A`。下图可以最准确地描述这种情况：

```
class W {
    private C c;

    getX() { return c.getX(); }
    getY() { return c.getY(); }
} 
```

问题是我已经决定我不想摆脱`getX()`，我宁愿作为一个暂时的步骤`C c`公开，让所有的调用代码`W`do a`w.c.getX()`或者`w.c.getY()`或者或者把 create a `W.getC()`,并有所有的电话，`getX()`并`getY()`通过它。

这一切归结为“非封装”重构。在 Eclipse 或 Intellij 中是否有任何东西可以执行这个急需的任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T00:38:17.380

使用 IntelliJ，您可以使用[Remove Middleman](http://blogs.jetbrains.com/idea/2008/12/intellij-idea-8-refactorings-remove-middleman/)重构。

考虑：

**之前**：

```
public class W {
    private C c;

    Object getX() { return c.getX(); }
    Object getY() { return c.getY(); }
}

public class C {
    private Object x;
    private Object y;

    public Object getX() {
        return x;
    }

    public Object getY() {
        return y;
    }
}

public class UsesW {
    W w;
    public void useW() {
        Object x = w.getX();
        Object y = w.getY();
    }
} 
```

将光标放在`W.c`. 然后选择**重构 | 删除中间人**。结果使您到达想要的位置的一半：

**之后**：

```
public class W {
    private C c;

    public C getC() {
        return c;
    }
}

/* class C is unchanged */

public class UsesW {
    W w;
    public void useW() {
        Object x = w.getC().getX();
        Object y = w.getC().getY();
    }
} 
```

然后你可以引入一个 in 类型的`C`变量`UsesW`。将光标放在其中一个调用上`w.getC()`并将其内联：**重构 | 内联...**（`Ctrl-Alt-N`是默认快捷方式），选择内联所有实例。它会给你留下这个：

```
public class UsesW {
    W w;
    public void useW() {
        final C c = w.getC();
        Object x = c.getX();
        Object y = c.getY();
    }
} 
```

最终完全摆脱`W`是您可能比我回答得更好的问题，但现在这项工作变得容易得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T00:26:31.873

1.  写下你的新`getC()`方法。
2.  改写`getX()`为`return getC().getX()`.
3.  内联`getX()`。

也是如此`y`。

# javascript - Javascript onclick 在浏览器选项卡中的“正在连接...”左侧

> ID：13851048
> 
> 赞同：1
> 
> 时间：2012-12-13T00:24:38.230
> 
> 标签：javascript

第一次在这里提问。

我有两个简单的 Javascript 函数，它们 1\. 生成一个随机字母，以及 2\. 填充一个 10x10 表，每个单元格中只有一个字母。创建表格的主要函数是通过一个带有 onclick 的简单 HTML 按钮调用的，它看起来像这样：

```
function BGen()
{
    var board = "<table border='0' width='300' cellpadding='3'>";
    for (h = 1; h <= 10; h++) {
        board = board + "<tr>";
        for (v = 1; v <= 10; v++) {
            board = board + "<td>" + RLGen() + "</td>";
        }
        board = board + "</tr>";
    }
    board = board + "</table>";
    document.write(board);
} 
```

出于某种原因，当单击按钮时，表格会按原样生成，但之后浏览器会停留在“正在连接...”上，就好像它在等待其他东西一样。

任何人都可以对此有所了解吗？我不知道为什么会这样。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:28:13.530

您不应该在页面加载后使用 document.write。那是不好的做法。

您应该使用 innerHTML 或 appendChild 添加新元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:27:57.367

尝试

`event.stopPropagation();`后`document.write`

不知道你是如何调用该函数的。

*欢迎来到 StackOverflow*

# python - 如何在pygame中使用精灵组

> ID：13851051
> 
> 赞同：9
> 
> 时间：2012-12-13T00:24:50.033
> 
> 标签：python, pygame, sprite

所以我在我的程序中已经到了需要为一些玩家可以碰撞而不会死亡的精灵创建一个组（就像我在屏幕上可能有的其他精灵一样）。

我搜索了谷歌，但似乎官方的 pygame 文档没有用和/或难以理解。我正在寻找任何对此有所了解的人的帮助。

首先，我需要了解如何创建群组。它会进入初始游戏设置吗？

然后在创建组时将精灵添加到组中。pygame 网站在这个问题上有这样的说法：

```
Sprite.add(*groups) 
```

那么......如何使用它？假设我有一个名为 gem 的精灵。我需要将 gem 添加到 gems 组。是吗：

```
gem = Sprite.add(gems) 
```

我对此表示怀疑，但没有任何例子可以在网站上发布，我很茫然。

此外，我希望能够编辑某个组的属性。这是通过像我一样定义一个班级来完成的吗？或者它是我在现有精灵的定义中定义的东西，但是有一个'if sprite in group'？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T00:35:04.607

回答您的第一个问题；要创建一个组，您可以执行以下操作：

```
gems = pygame.sprite.Group() 
```

然后添加一个精灵：

```
gems.add(gem) 
```

关于您要编辑的组的属性，这取决于它们是什么。例如，您可以定义如下内容来指示组的方向：

```
gems.direction = 'up' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T23:46:25.440

我知道这个问题已经得到解答，但最好的方法就像 kelwinfc 建议的那样。我会详细说明，以便更容易理解。

```
# First, create you group
gems = pygame.sprite.Group()

class Jewel (pygame.sprite.Sprite): # Inherit from the Sprite
    def __init__ (self, *args): # Call the constructor with whatever arguments...
        # This next part is key. You call the super constructor, and pass in the 
        # group you've created and it is automatically added to the group every 
        # time you create an instance of this class
        pygame.sprite.Sprite.__init__(self, gems) 

        # rest of class stuff after this.

>>> ruby = Jewel()  
>>> diamond = Jewel()  
>>> coal = Jewel()

# All three are now in the group gems. 
>>> gems.sprites()
[<Jewel sprite(in 1 groups)>, <Jewel sprite(in 1 groups)>, <Jewel sprite(in 1 groups)>] 
```

您还可以添加更多内容，`gems.add(some_sprite)` 也可以使用 删除它们`gems.remove(some_sprite)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:34:20.400

只需使用组列表调用超级`__init__`函数。例如：

```
def __init__(self):
    pygame.sprite.Sprite.__init__(self, self.groups) 
```

然后，在层次结构的每个类中，您应该定义一个属性 self.groups 并且超级构造函数会将每个实例添加到其组中。这是我认为最干净的解决方案。否则，只需使用每个类中的组列表显式调用超级构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T14:48:06.890

更简单的是，您可以将精灵直接传递给构造函数：

```
gems = pygame.sprite.Group(gem1, gem2) 
```

# c# - 更新/插入绑定到 List 的 DataGridView 而不是数据表？

> ID：13851053
> 
> 赞同：0
> 
> 时间：2012-12-13T00:25:18.317
> 
> 标签：c#, winforms, datagridview

如何获取`DataGridView`绑定到`List<T>`而不是 a 的这些编辑/更新的行`DataTable`？

`DataGridView`如果 a绑定到，最后一个新行（带有“*”的行）也消失了`DataTable`？

`DataTable`构建可编辑时必须使用它`DataGridView`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:31:16.343

快速的解决方案是使用 a`BindingList<T>`而不是 a `List<T>`。

这将允许您向集合中添加行。

从长远来看，您将需要考虑扩展`BindingList`，因为开箱即用`BindingList`不支持排序和其他好东西。

# iphone - rotating UILabel roller

> ID：13851056
> 
> 赞同：0
> 
> 时间：2012-12-13T00:25:40.750
> 
> 标签：iphone, uilabel, cgaffinetransform

I've set out to make a rotating roller uipicker like [these](https://itunes.apple.com/au/app/convert-units-free-hd/id400116711?mt=8). I know how to rotate a UILabel but I need help with the math to know how to progressively rotate the UILabel's based on their position on a circle of x circumference? Any math whizzes out there or am I over-thinking it?

What I'm thinking so far:

*   I need to find the angle of the tangent of a circle at a particular degree so I know which angle to rotate the label (this shouldn't be hard)
*   Hard bit will be working out the x/y coordinates and working how how much space to put between each value

**EDIT**

I'm thinking it might be easier to treat it as a half octagon and I can tweak the angles manually until it looks good. Then the only problem is working out how to animate between the positions but that won't be hard as it is just a rotate/move animation.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:41:10.567

Here's a good tutorial on how to implement it.

[http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit](http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit)

# objective-c - 在代码中存储和引用第 3 方 API 密钥和常量列表的最佳方式？

> ID：13851060
> 
> 赞同：0
> 
> 时间：2012-12-13T00:25:51.857
> 
> 标签：objective-c, ios, c, xcode

我有一个数字 api 的常量列表，我想在代码中的一个位置收集这些常量，我想知道最好的方法来做到这一点。这是我到目前为止所拥有的..

一个包含所有常量的静态数组...

```
static NSDictionary* kApiConstants =
    [NSDictionary dictionaryWithObjectsAndKeys:
     @"crittercism-app-id", @"myAppId",
     @"crittercism-key",    @"myAppKey",
     @"crittercism-secret", @"mySecretKey",

     @"content-server-url-dev", @"http://my-dev-url/",
     @"content-server-url-stg", @"http://my-staging-url",
     @"content-server-url-pro", @"http://my-production-url",
     nil]; 
```

然后我有一个宏来快速检索数组中的项目......

```
#define MYAPIKEY(x) [kApiConstants objectForKey:x] 
```

我喜欢这个设置。它使代码更易于整体阅读，并使我们的 git 存储库中的分支之间的合并更容易。我希望在构建/编译时拥有的一个功能是，如果字典中没有字符串，则将标记构建和/或编译器错误以指示这一点。

我敢肯定，其他人之前遇到过这种情况，因为有这么多的 3rd 方库、sdk 以及你在项目中拥有的东西，很难跟踪它们。对于那些愿意分享你想出什么系统来帮助解决这个问题的人？

就我而言，这是针对 iOS 项目的，但这种情况确实适用于任何类型的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:27:58.257

与仅将它们自己设为常量相比，使用字典有什么优势？你的愿望：

`One feature I would love to have at build/compile time is if a string is not in the dictionary then a build and/or compiler error would get flagged to indicate this.`

只需使它们本身成为常数即可解决。

# javascript - 如何使用 JavaScript 将插入符号滚动到文本框中的视图中？

> ID：13851063
> 
> 赞同：4
> 
> 时间：2012-12-13T00:26:06.057
> 
> 标签：javascript, textbox, caret, cursor-position

**无论插入符号在哪里，**我都需要一种滚动到文本框中插入符号位置的方法。我遇到的问题与这个问题非常相似：

[可以使用 JavaScript 将插入符号滚动到单个 HTML 文本字段内的视图中吗？](https://stackoverflow.com/questions/7892902/possible-to-scroll-caret-into-view-inside-a-single-html-text-field-with-javascri)

我提到的另一个问题的解决方案是在末尾添加一个额外的字符（它将插入符号的位置设置为文本的末尾），然后模拟退格键按下（滚动到文本的末尾） . 当用户继续输入时它工作正常，文本滚动正常，因为我们总是在字符串的末尾添加字符。但是，例如，如果用户单击文本框中的某个位置，它会设置一个新的插入符号位置，然后如果用户从新的插入符号位置开始输入，则额外的键/退格解决方案无法正常工作，因为它总是需要我们到字符串的末尾。

无论光标在哪里，我都需要一种在用户键入时滚动到光标位置的方法。更多附加信息：使用 Firefox 时，在我的 Javascript 代码中设置文本框值会滚动到文本框的最左侧位置，尽管光标位于末尾。[可以使用 JavaScript 将插入符号滚动到单个 HTML 文本字段内的视图](https://stackoverflow.com/questions/7892902/possible-to-scroll-caret-into-view-inside-a-single-html-text-field-with-javascri)中的插图吗？说明我的意思。它不会发生在 IE、Chrome、Safari 上。所以这个问题中提到的问题仅在 Firefox 中对我来说是一个问题。有任何想法吗？

# android-emulator - 谷歌电视模拟器挂在谷歌电视标志上

> ID：13851065
> 
> 赞同：1
> 
> 时间：2012-12-13T00:26:28.670
> 
> 标签：android-emulator, google-tv

我正在尝试在 Ubuntu 12.04 上运行 Google TV 模拟器。模拟器启动，但挂在屏幕中央，屏幕中间有一个 Google TV 徽标。我通过 adb 连接，日志循环显示以下消息：

```
I/CameraService( 1038): CameraService started (pid=1038)
I/AudioFlinger( 1038): AudioFlinger's thread 0x9bb5a78 ready to run
I/ServiceManager(  795): Waiting for service SurfaceFlinger...
I/ServiceManager(  795): Waiting for service SurfaceFlinger...
I/ServiceManager(  795): Waiting for service SurfaceFlinger...
I/ServiceManager(  795): Waiting for service SurfaceFlinger...
I/ServiceManager(  795): Waiting for service SurfaceFlinger...
D/AndroidRuntime( 1048): 
D/AndroidRuntime( 1048): >>>>>> AndroidRuntime START com.android.internal.os.ZygoteInit <<<<<<
D/AndroidRuntime( 1048): CheckJNI is ON
E/dalvikvm( 1048): Bad heap size parameters (start=5242880, max=33554432, limit=100663296)
W/dalvikvm( 1048): JNI_CreateJavaVM failed
E/AndroidRuntime( 1048): JNI_CreateJavaVM failed
I/ServiceManager(  782): service 'media.audio_flinger' died
I/ServiceManager(  782): service 'media.player' died
I/ServiceManager(  782): service 'media.camera' died
I/ServiceManager(  782): service 'media.audio_policy' died
I/Netd    ( 1050): Netd 1.0 starting
I/        ( 1049): ServiceManager: 0x8c6fed8
E/        ( 1049): Failed to switch to AID_MEDIA user, error -1
W/GoogleTVMediaApi( 1049): InitializeGTVMediaLibraries not implemented
W/AVAPIService( 1049): InstantiateAVAPIService not implemented
W/AudioHardwareInterface( 1049): Using stubbed audio hardware. No sound will be produced.
D/AudioHardwareInterface( 1049): setMode(NORMAL) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T16:58:12.217

有一个新版本的模拟器即将推出（很快）。在此期间，您可以检查您的 AVD 参数。我的如下：

```
hw.lcd.density=213
hw.keyboard.charmap=Emulator
sdcard.size=1G
skin.name=720p
skin.path=add-ons/addon-google_tv_addon-google-12/skins/720p
hw.cpu.arch=x86
abi.type=x86
vm.heapSize=256
hw.ramSize=1024
disk.dataPartition.size=128
image.sysdir.1=add-ons/addon-google_tv_addon-google-12/images/x86/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-27T09:39:32.720

错误是由于“Bad heap size parameters”而出现的。所以调整堆大小：对我来说，我将堆大小从 64 更改为 128。在编辑 Android 虚拟设备中。

![在此处输入图像描述](../Images/877c5d1bfb12b18bed94fd1c2f51df31.png)

# curve - 如何在计算机视觉算法中绘制 ROC 曲线？

> ID：13851069
> 
> 赞同：3
> 
> 时间：2012-12-13T00:26:36.610
> 
> 标签：curve, roc

我使用检测算法在 100 张图像中检测到对象，每张图像正好包含 2 个真值，即每张图像包含 2 个对象。然后我添加了噪音并找到了最好的。我计算了检测结果和ground truth intArea的交集区域，以及联合区域unionArea = rectA + rectB - intArea。然后我打算使用这些比率来绘制 ROC 曲线如下：

```
init TP, FP as 100X1 array.
for threshold = 0..1, step = 0.01
    curIdx = 1;
    for each ratio(i), i = 1..100
        if ratio(i) > threshold then
           TP(curIdx) = TP(curIdx) + 1;
        else
           FP(curIdx) = FP(curIdx) + 1;
     end
end 
```

然后我用TP/100作为Y轴值，TP/(TP+FP)作为X轴值来绘制ROC曲线。但结果不如预期：（我现在无法发布图片，因为我是新用户-_-） [https://lh4.googleusercontent.com/-cuNKyobdV7E/UMkiJmrhTFI/AAAAAAAEQg/B5twqcZtlQA/s560/roc。 jpg](https://lh4.googleusercontent.com/-cuNKyobdV7E/UMkiJmrhTFI/AAAAAAAAEQg/B5twqcZtlQA/s560/roc.jpg)

那么，有人会帮助我并告诉我我错在哪里吗？谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:44:43.407

[VLFeat](http://www.vlfeat.org/index.html)实现了一个非常简单的方法，可以在 Matlab 环境下绘制 ROC 曲线。请查看此链接：[http ://www.vlfeat.org/overview/plots-rank.html](http://www.vlfeat.org/overview/plots-rank.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T13:04:24.613

如果您想了解 ROC 图生成的内部原理，可以阅读[Tom Fawcett 关于 ROC Graphs 的报告](http://www.hpl.hp.com/techreports/2003/HPL-2003-4.pdf)或他的 [ScienceDirect 文章](https://ccrma.stanford.edu/workshops/mir2009/references/ROCintro.pdf)。

如果您只想生成绘图而不涉及其技术细节，您可以使用[Yard phyton 库](https://github.com/ntamas/yard)或[ROCR R 包](http://rocr.bioinf.mpi-sb.mpg.de/)

# ruby-on-rails - 您如何访问 rails active 关联中的内部关系？

> ID：13851070
> 
> 赞同：0
> 
> 时间：2012-12-13T00:26:38.550
> 
> 标签：ruby-on-rails, activerecord, model, associations

我让我的同事以这种方式成立。

事件 - (has_many) - 供应商 - (has_many) - 产品 - (has_many) - productTags - (belongs_to) - 标签

我正在尝试检索事件的标签数组，但仅包括那些具有产品的标签。

最初我可以通过

```
@event = Event.find(1) 
```

我很难从关联的兔子洞中找到所有产品的标签数组。

任何帮助或朝着正确方向的推动将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:37:51.690

```
class Event < ActiveRecord::Base

  def tags
    Tag.includes(:product_tags => {:product => {:vendor => {:event => {}}}}).where(["events.id = ?", self.id])
  end

end

@event = Event.find(1)
@event.tags 
```

# php - iso - 加载本地 php 文件 UIWebView 并添加信息

> ID：13851076
> 
> 赞同：0
> 
> 时间：2012-12-13T00:27:30.683
> 
> 标签：php, ios, nsstring, code-injection

我有一个正确编码的 HTML 页面，可以在我的应用程序中显示。

该文件本地嵌入在应用程序中，但它从 API 中提取数据。它是一个与 PHP 一起工作的 Rest API。

所以我现在的问题是 - 是否可以让 NSString 将它的值注入到 php 文件中，以便它可以显示所需的结果，或者 PHP 和 Objective-c 不是为了做到这一点而设计的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:40:17.653

如果您希望在您的 iOS 应用程序中实际解析和执行 PHP，恐怕您可能不走运。

如果您只是想动态更新静态 HTML 页面上的某些元素并利用 PHP 服务来执行此操作，那么您最好的选择可能是使用 javascript 和 AJAX 从服务中放置动态内容。

或者，您可以将 HTML 文件视为模板，调用 PHP 服务以获取动态内容；将该内容合并到模板中并显示模板。

我想什么最适合你的情况，最终取决于你想要的用户体验。

# android - GridView - 持有更多屏幕外视图？

> ID：13851077
> 
> 赞同：0
> 
> 时间：2012-12-13T00:27:35.793
> 
> 标签：android

我在使用网格视图的适配器时遇到问题。每次需要特定项目时，适配器都会加载位图。我有一个磁盘缓存和内存缓存，我在滚动时禁用加载，所以一般来说，gridview 很快。

但我真正想要的是消除不断将特定位图重新绑定到 ImageView 的情况。由于 gridview 正在重用视图，getView 方法必须不断重置 ImageView 并从内存中重新加载图像。这会产生一个非常愚蠢的效果，因为项目会滑出屏幕，并且当从内存缓存中读取位图并将其发布到 ImageView 时会产生延迟。

有没有办法让 GridView '坚持'更多的意见，而不是真正节俭？我最多有大约 20 个项目，并且我正在缩放所有位图，所以如果可能的话，我真的很想保留更多的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:54:16.490

我能够使用更好的内存缓存来解决这个问题。真正的区别是添加一种机制来检查图像是否在内存中，如果所需的图像在内存中，则不会“重置”视图。似乎没有一种简单的方法可以为网格视图设置屏幕外缓存视图的数量，但更好的内存缓存管理使问题不那么明显。

# iterator - 如何在 find_if 谓词中引用迭代器？

> ID：13851082
> 
> 赞同：3
> 
> 时间：2012-12-13T00:27:57.697
> 
> 标签：iterator, c++

我想确保一个字符串至少有一个 alpha。简单的：

```
if ( find_if(field_name.begin(), field_name.end(), isalpha) == field_name.end() ) 
```

但我想使用一个`locale`. 我知道我可以轻松编写一个单独的函数，但我更喜欢在 find_if 中使用它。IE，

```
include <locale>

std::locale loc;

if ( find_if(field_name.begin(), field_name.end(), isalpha(*this_iterator,loc) == field_name.end() ) 
```

问题：有没有办法`this_iterator`引用当时的迭代器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T00:32:25.267

在 C++11 中，您可以使用 Timo 建议的 lambda 或[`std::bind()`](http://en.cppreference.com/w/cpp/utility/functional/bind)使用`std::bind(isalpha, std::placeholders::_1, loc)`.

Pre-C++11，你可以使用[`std::bind2nd()`](http://www.cplusplus.com/reference/functional/bind2nd/)。不过这有点复杂，因为它需要一个`unary_function`or`binary_function`作为参数，而不是任何旧的函数对象。我们可以使用 来创建一个[`std::ptr_fun()`](http://www.cplusplus.com/reference/functional/ptr_fun/)，尽管出于某种原因我们需要明确地告诉它模板参数是什么。我们需要使用`std::isalpha()`而不是`isalpha()`为了获得启用语言环境的版本。所以完整的表达式看起来像

```
std::bind2nd(std::ptr_fun<char, const std::locale&, bool>(std::isalpha), loc) 
```

不用说，C++11 版本要简单得多。

* * *

顺便说一句，如果您使用的是 C++11，那么您可以使用[`std::any_of(...)`](http://en.cppreference.com/w/cpp/algorithm/all_any_none_of)而不是`std::find_if(...) == foo.end()`. 它的行为应该相同，但更具可读性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-13T00:31:02.147

在 C++11 中，您可以使用 lambda：

```
if (std::find_if(field_name.begin(), field_name.end(),
                 [&loc](char c)
                 {
                   return isalpha(c, loc);
                 }) == field_name.end())
{
  ...
} 
```

在 C++11 之前的版本中，您可能必须使用 boost::bind 或 boost::lambda 之类的东西来实现相同的功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T00:39:45.943

在 C++11 之前的版本中，您可以`isalpha()`使用覆盖运算符的对象包装`()`，然后将其用作谓词，如果您不想使用`std::bind...()`或提升，例如：

```
#include <locale>

struct isalphaloc
{
    const std::locale &_loc;

    isalphaloc(const std::locale &loc) : _loc(loc) {}

    bool operator(const char c) const
    {
        return isalpha(c, _loc);
    }
}; 
```

.

```
std::locale loc;
if ( find_if(field_name.begin(), field_name.end(), isalphaloc(loc)) == field_name.end() ) 
```

# java - 从 ArrayList 中查询学生姓名并在文本区域中返回结果

> ID：13851083
> 
> 赞同：2
> 
> 时间：2012-12-13T00:27:57.773
> 
> 标签：java, user-interface

我正在尝试完成一个简单的学生管理系统的程序（是的，家庭作业）。

学生的姓名和成绩（作业和考试）从 XML 文档中解析出来，然后将姓名存储在 a 中`JList`，并将成绩存储在`ArrayList`.

我试图弄清楚如何实现一个查询按钮，以便用户可以输入学生的姓名并在 GUI 的文本区域中列出学生的姓名和成绩。到目前为止，这是我为查询编写的方法：

```
 void queryStudent(){

       if (!students.isEmpty()) {
          queryResultTextArea.setText("Student's Name: " + students.get(0).getName() + newline);

            for(int i=0; i<6; i++){
               queryResultTextArea.append("Homework " + (i + 1) + ": " +  String.valueOf(students.get(0).getRecordList().get(i).getResult()) + newline);
            }

            for(int j=0; j<3; j++){
                queryResultTextArea.append("Exam " + (j + 1) + ": " + String.valueOf(students.get(0).getRecordList().get(j+6).getResult()) + newline);
            }

            queryResultTextArea.append("Final Grade: " + String.valueOf(students.get(1).getFinalGrade()));

         }else {
             queryResultTextArea.setText("Please load data first!");

        }
    } 
```

如您所见，我不确定如何对方法进行编码，以便查询的学生与成绩相关联并在文本区域中返回。我什至不确定我是否正确地传达了这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:31:24.627

我会想象你有一个 Student 类，它包含一个学生的姓名、等级和可能的识别码，并且你的 JList 的模型包含 Student 对象，并有一个自定义单元格渲染器来按每个学生的名字显示每个学生。也许按姓名搜索的最佳方法是将相同的学生集合放入一个`Map<String, Student>`诸如 a`HashMap<String, Student>`中，以便您可以使用他/她的名字作为关键字找到学生。这将要求没有重复的名称。

# java - 从 LinkedHashMap 获取对象值

> ID：13851085
> 
> 赞同：0
> 
> 时间：2012-12-13T00:28:11.620
> 
> 标签：java, android

所以对于我的本地数据结构，我有以下

```
DataStructure ds = new DataStructure();

    //Examples to put in the Data Structure "ds"
    ds.menu_item.put("Pizza", new DescItems("A Pizza",2.50,4));
    ds.menu_item.put("Hot Dog", new DescItems("A yummy hot dog",3.50, 3));
    ds.menu_item.put("Corn Dog", new DescItems("A corny dog",3.00));
    ds.menu_item.put("Unknown Dish", new DescItems(3.25)); 
```

DataStructure 类有一个 LinkedHashMap 实现，这样

```
LinkedHashMap<String, DescItems> menu_item = new LinkedHashMap<String, DescItems>(); 
```

最后 DescItems 类是

```
public final String itemDescription;
public final double itemPrice;
public final double itemRating;

public DescItems(String itemDescription, double itemPrice, double itemRating){
    this.itemDescription = itemDescription;
    this.itemPrice = itemPrice;
    this.itemRating = itemRating;
} 
```

还有其他构造函数可以解释没有 itemDescription 和/或 itemRating

我正在尝试应用一种方法来检查一个值是否有 itemRating 不是 0（0 表示没有评级）

但具体来说，我遇到了这个问题：

```
DescItems getC1 = (DescItems)ds.menu_item.get("Pizza");
    System.out.println(getC1.toString()); 
```

仅打印出参考信息，例如 DescItems@142D091

我应该怎么做才能获取特定的对象变量而不是引用该对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:30:14.083

您可以覆盖类中的`toString()`方法`DescItems`。例如：

```
public class DescItems {
    . . .

    @Override
    public String toString() {
        // whatever you want here
        return String.format("%1$s (price: $%2$.2f; rating: %3$f)",
            itemDescription, itemPrice, itemRating);
    }
} 
```

的默认实现`toString()`返回一个对象标识字符串，如您所见。

另一种方法是打印您想要的确切字段：

```
System.out.println(getC1.itemDescription); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T00:30:20.193

您需要覆盖中的`toString()`方法`DescItems`

像这样的东西：

```
@Override
public String toString() {
     return itemDescription + " " + itemPrice + currencySymbol + " (" + itemRating + ")";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T00:31:08.210

你只需要重写 toString() 方法来返回你想要的文本。

# javascript - 如何在不绑定 this 的情况下绑定函数参数？

> ID：13851088
> 
> 赞同：124
> 
> 时间：2012-12-13T00:29:07.463
> 
> 标签：javascript

在 Javascript 中，如何在不绑定`this`参数的情况下将参数绑定到函数？

例如：

```
//Example function.
var c = function(a, b, c, callback) {};

//Bind values 1, 2, and 3 to a, b, and c, leave callback unbound.
var b = c.bind(null, 1, 2, 3); //How can I do this without binding scope? 
```

`this`我怎样才能避免必须绑定函数的范围（例如设置= null）的副作用？

**编辑：**

对困惑感到抱歉。我想绑定参数，然后能够稍后调用绑定函数并让它的行为就像我调用原始函数并将绑定参数传递给它一样：

```
var x = 'outside object';

var obj = {
  x: 'inside object',
  c: function(a, b, c, callback) {
    console.log(this.x);
  }
};

var b = obj.c.bind(null, 1, 2, 3);

//These should both have exact same output.
obj.c(1, 2, 3, function(){});
b(function(){});

//The following works, but I was hoping there was a better way:
var b = obj.c.bind(obj, 1, 2, 3); //Anyway to make it work without typing obj twice? 
```

我还是新手，很抱歉造成混乱。

谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-09-07T16:42:31.460

您可以这样做，但最好避免将其视为“绑定”，因为这是用于设置“this”值的术语。也许将其视为将参数“包装”到函数中？

您所做的是创建一个函数，该函数通过闭包内置了所需的参数：

```
var withWrappedArguments = function(arg1, arg2)
    {
        return function() { ... do your stuff with arg1 and arg2 ... };
    }(actualArg1Value, actualArg2Value); 
```

希望我在那里得到了语法。它所做的是创建一个名为 withWrappedArguments() 的函数（迂腐的是，它是一个分配给变量的匿名函数），您可以在任何时间任何地点调用该函数，并且始终使用actualArg1Value 和actualArg2Value 以及您想要放入的任何其他内容那里。如果需要，您还可以让它在调用时接受进一步的参数。秘密是最后一个右大括号后面的括号。这些导致外部函数立即执行，并使用传递的值，并生成可以稍后调用的内部函数。然后在生成函数时冻结传递的值。

这实际上是 bind 所做的，但这样一来，被包装的参数就很明确地只是局部变量的闭包，并且不需要更改 this 的行为。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-05-06T14:12:43.140

在 ES6 中，这很容易通过使用[rest 参数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters)和[扩展运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator)来完成。

所以我们可以定义一个`bindArgs`类似的函数`bind`，除了只绑定参数，而不绑定上下文`this`(

```
Function.prototype.bindArgs =
    function (...boundArgs)
    {
        const targetFunction = this;
        return function (...args) { return targetFunction.call(this, ...boundArgs, ...args); };
    }; 
```

然后，对于指定的函数`foo`和对象`obj`，语句

```
return foo.call(obj, 1, 2, 3, 4); 
```

相当于

```
let bar = foo.bindArgs(1, 2);
return bar.call(obj, 3, 4); 
```

其中只有第一个和第二个参数绑定到`bar`，而使用调用中指定的上下文`obj`，并且在绑定参数之后附加了额外的参数。返回值只是转发。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-12-13T01:01:27.893

在本机[`bind`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)`this`中，结果函数中的值会丢失。但是，您可以轻松地重新编码通用 shim 以不使用上下文参数：

```
Function.prototype.arg = function() {
    if (typeof this !== "function")
        throw new TypeError("Function.prototype.arg needs to be called on a function");
    var slice = Array.prototype.slice,
        args = slice.call(arguments), 
        fn = this, 
        partial = function() {
            return fn.apply(this, args.concat(slice.call(arguments)));
//                          ^^^^
        };
    partial.prototype = Object.create(this.prototype);
    return partial;
}; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-02-08T11:42:20.607

另一个小实现只是为了好玩：

```
function bindWithoutThis(cb) {
    var bindArgs = Array.prototype.slice.call(arguments, 1);

    return function () {
        var internalArgs = Array.prototype.slice.call(arguments, 0);
        var args = Array.prototype.concat(bindArgs, internalArgs);
        return cb.apply(this, args);
    };
} 
```

如何使用：

```
function onWriteEnd(evt) {}
var myPersonalWriteEnd = bindWithoutThis(onWriteEnd, "some", "data"); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-11-10T22:29:50.067

```
var b = function() {
    return c(1,2,3);
}; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-13T00:37:57.990

很难准确地说出你最终想要做什么，因为这个例子有点随意，但你可能想看看部分（或柯里化）：http: [//jsbin.com/ifoqoj/1/edit](http://jsbin.com/ifoqoj/1/edit)

```
Function.prototype.partial = function(){
  var fn = this, args = Array.prototype.slice.call(arguments);
  return function(){
    var arg = 0;
    for ( var i = 0; i < args.length && arg < arguments.length; i++ )
      if ( args[i] === undefined )
        args[i] = arguments[arg++];
    return fn.apply(this, args);
  };
};

var c = function(a, b, c, callback) {
  console.log( a, b, c, callback )
};

var b = c.partial(1, 2, 3, undefined);

b(function(){}) 
```

链接到 John Resig 的文章：[http ://ejohn.org/blog/partial-functions-in-javascript/](http://ejohn.org/blog/partial-functions-in-javascript/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-25T06:51:36.857

可能您想在最后绑定**this**的引用，但您的代码：-

```
var c = function(a, b, c, callback) {};
var b = c.bind(null, 1, 2, 3); 
```

已经应用了绑定，例如**this**和以后你不能改变它。我建议也将参考用作这样的参数：-

```
var c = function(a, b, c, callback, ref) {  
    var self = this ? this : ref; 
    // Now you can use self just like this in your code 
};
var b = c.bind(null, 1, 2, 3),
    newRef = this, // or ref whatever you want to apply inside function c()
    d = c.bind(callback, newRef); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-06T22:36:12.950

使用`protagonist`!

```
var geoOpts = {...};

function geoSuccess(user){  // protagonizes for 'user'
  return function Success(pos){
    if(!pos || !pos.coords || !pos.coords.latitude || !pos.coords.longitude){ throw new Error('Geolocation Error: insufficient data.'); }

    var data = {pos.coords: pos.coords, ...};

    // now we have a callback we can turn into an object. implementation can use 'this' inside callback
    if(user){
      user.prototype = data;
      user.prototype.watch = watchUser;
      thus.User = (new user(data));
      console.log('thus.User', thus, thus.User);
    }
  }
}

function geoError(errorCallback){  // protagonizes for 'errorCallback'
  return function(err){
    console.log('@DECLINED', err);
    errorCallback && errorCallback(err);
  }
}

function getUserPos(user, error, opts){
  nav.geo.getPos(geoSuccess(user), geoError(error), opts || geoOpts);
} 
```

基本上，你想要传递参数的函数变成了一个代理，你可以调用它来传递一个变量，它返回你真正想要做的事情的函数。

希望这可以帮助！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-06-09T20:48:51.263

那么对于你给出的例子，这会做

```
var b= function(callback){
        return obj.c(1,2,3, callback);
}; 
```

如果要保证参数的封装：

```
var b= (function(p1,p2,p3, obj){
        var c=obj.c;
        return function(callback){
                return c.call(obj,p1,p2,p3, callback);
        }
})(1,2,3,obj) 
```

但如果是这样，你应该坚持你的解决方案：

```
var b = obj.c.bind(obj, 1, 2, 3); 
```

这是更好的方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-01-11T16:02:06.617

我正在使用这个功能：

```
function bindArgs(func, ...boundArgs) {
    return function (...args) {
        return func(...boundArgs, ...args);
    };
}
// use
const deleteGroup = bindArgs(this.props.deleteGroup, "gorupName1"); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-07-17T22:58:59.597

一位匿名用户发布了以下附加信息：

> 基于这篇文章中已经提供的内容——我见过的最优雅的解决方案是对你的论点和上下文进行*柯里化：*

```
function Class(a, b, c, d){
    console.log('@Class #this', this, a, b, c, d);
}

function Context(name){
    console.log('@Context', this, name);
    this.name = name;
}

var context1 = new Context('One');
var context2 = new Context('Two');

function curryArguments(fn) {
    var args = Array.prototype.slice.call(arguments, 1);
    return function bindContext() {
      var additional = Array.prototype.slice.call(arguments, 0);
      return fn.apply(this, args.concat(additional));
    };
}

var bindContext = curryArguments(Class, 'A', 'B');

bindContext.apply(context1, ['C', 'D']);
bindContext.apply(context2, ['Y', 'Z']); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-11-08T12:06:49.957

# 就这么简单？

```
var b = (cb) => obj.c(1,2,3, cb)
b(function(){}) // insidde object 
```

更通用的解决方案：

```
function original(a, b, c) { console.log(a, b, c) }
let tied = (...args) => original(1, 2, ...args)

original(1,2,3) // 1 2 3
tied(5,6,7) // 1 2 5
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-04-11T18:10:19.123

使用**LoDash**，您可以使用该`_.partial`功能。

```
const f  = function (a, b, c, callback) {}

const pf = _.partial(f, 1, 2, 3)  // f has first 3 arguments bound.

pf(function () {})                // callback. 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-03-02T23:27:04.803

为什么不在函数周围使用包装器将其保存为 mythis ？

```
function mythis() {
  this.name = "mythis";
  mythis = this;
  function c(a, b) {
    this.name = "original";
    alert('a=' + a + ' b =' + b + 'this = ' + this.name + ' mythis = ' + mythis.name);
    return "ok";
  }    
  return {
    c: c
  }
};

var retval = mythis().c(0, 1); 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2018-01-21T19:50:37.133

[jQuery 1.9 正是通过代理功能带来了这个特性。](https://api.jquery.com/jQuery.proxy/)

> 从 jQuery 1.9 开始，当上下文为 null 或 undefined 时，将使用与调用代理相同的 this 对象调用代理函数。这允许 $.proxy() 用于部分应用函数的参数而不更改上下文。

例子：

```
$.proxy(this.myFunction, 
        undefined /* leaving the context empty */, 
        [precededArg1, precededArg2]); 
```

* * *

## 回答 #16

> 赞同：-6
> 
> 时间：2014-07-11T14:01:36.507

jQuery用例：

反而：

```
for(var i = 0;i<3;i++){
    $('<input>').appendTo('body').click(function(i){
        $(this).val(i); // wont work, because 'this' becomes 'i'
    }.bind(i));
} 
```

用这个：

```
for(var i = 0;i<3;i++){
    $('<input>').appendTo('body').click(function(e){
        var i = this;
        $(e.originalEvent.target).val(i);
    }.bind(i));
} 
```

# jquery - 将 jQuery off() 应用于一个表列

> ID：13851089
> 
> 赞同：2
> 
> 时间：2012-12-13T00:29:09.763
> 
> 标签：jquery, html-table, cell

我将 jQuery`on()`应用于每个表格行。用户单击任何行后，另一个页面开始加载：

```
table_tag.on("click", "tbody tr", function(event) {                
    var search_id = datatable.fnGetData(this)[0];                                
    if(event.ctrlKey) {                                                                                        
        window.open("/search/"+search_id+"/");
    } else {
        window.location.assign("/search/"+search_id+"/");
    }
}); 
```

我在表格中添加了一个新列。它的每个单元格只有一个复选框：

```
<td><input type="checkbox" /></td> 
```

在用户单击此复选框后，我需要防止加载另一个页面。我试过这个：

```
table_tag.off("click", "tbody tr td input:parent") 
```

但它不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:32:04.953

你没有处理程序`"tbody tr td input:parent"`。您只有一个处理程序，在`"tbody tr"`.

相反，要更加小心你绑定的内容：`"tbody tr :not(input:checkbox)"`应该更好。

编辑：正如 popnoodles 所说，问题尚不清楚。以上是为了防止在用户单击复选框时加载新页面（否则我认为该复选框有些无用）。如果您的目的是在单击设置了复选框的行时禁止打开新页面，这是对我可以看到的问题的另一种解释，则将上述补丁应用于您的选择器，并从内部检查复选框状态处理程序。

EDIT2：缺少冒号的错误；`not(...)`不正确，应该是`:not(...)`。

编辑太多：[Fiddle](http://jsfiddle.net/JewCk/)， with `tbody tr td:not(:has(input:checkbox))`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:36:39.207

目前您正在尝试从 td 中删除点击事件，但您已将其应用于 tr。

你想要达到的目标是模棱两可的。您要么只尝试做一次，在这种情况下使用 one()

```
table_tag.one("click", "tbody tr", function(event) {   ... 
```

或者您不希望单击复选框冒泡并触发对 tr 的单击

```
table_tag.on("click", "tbody tr", function(event) { 
     if (this.target!=event) return; // will ONLY catch the tr being clicked
     ... 
```

或者是其他东西

# codeigniter - 我想在变量中显示预定义的 HTML

> ID：13851093
> 
> 赞同：0
> 
> 时间：2012-12-13T00:29:58.507
> 
> 标签：codeigniter, smarty

我正在使用 Codeigniter，一切正常。我可以将 PHP 变量分配给 smarty 并显示它们。

但现在我正在调用一个网络服务，这个网络服务返回一个完整的 HTML（和 javascript）页面。我想在一个聪明的模板中显示这个。

所以我做了以下事情：我已经将 web 服务的输出分配给一个 PHP 变量，并将它分配给一个 smarty 变量 ( `HTMLstring`)，就像我一直做的那样。那部分有效。在我的 smarty 模板中，除了显示变量的内容外，我不需要任何东西。所以我的模板只包含一行：

```
{HTMLstring} 
```

但这会显示文字 HTML，包括标签和所有内容。我想显示输出。

（如果我将输出复制粘贴到一个单独的 html 文件中，然后打开它，它看起来就很好）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-17T08:59:56.630

我“想出了”答案。
如果我从代码中调用模板或者只是在浏览器中输入完整的 url 以进行测试，这似乎会有所不同。后者不起作用，前者起作用。我仍然不知道为什么。抱歉...
问题已关闭。

# java - java中的char多维数组排序

> ID：13851094
> 
> 赞同：-3
> 
> 时间：2012-12-13T00:30:05.327
> 
> 标签：java, arrays, sorting, char

我的教授要求按列对二维字符数组进行排序，因此他想要排序的附加数组是

```
 unsorted          sorted last column
Lcekoeddhoffbmg     Balgfcaelhfkgeb
Lkcmggjcdhhglif     Kmlhmhcddfoeilc
Cgldjhcekjigcdd     Cgldjhcekjigcdd
Cgldjhcekjigcdn     Lkcmggjcdhhglif
Bffmdbkcenlafjk     Lcekoeddhoffbmg
Fggdijijegfblln     Jjlncnimjldfedj
Jjlncnimjldfedj     Bffmdbkcenlafjk
Amliglfohajcdmm     Amliglfohajcdmm
Balgfcaelhfkgeb     Fggdijijegfblln
Kmlhmhcddfoeilc     Cgldjhcekjigcdn 
```

但问题是他希望整行都是相同的字符，所以如果我们对最后一列进行排序，我们只需相应地向上或向下移动行。我不知道如何开始这项工作，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:40:24.683

您可以将每个 char 数组转换为字符串，然后使用 java 的字符串排序功能。然后将您的字符串转换回 char 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:40:40.987

假设您知道如何对一维数组进行排序（否则查找它），这非常相似。

而不是交换两个字符（当您使用冒泡排序或任何其他基于交换项目的排序算法时），您交换两个完整的行。所以你会得到这样的东西（对于冒泡排序）：

```
for char1 of each_last_row_char
  for char2 of each_last_row_char_after_char1
    if char2 < char2 then
      swap rows of char1 and char 2
    end
  end
end 
```

交换完整的行也不是那么困难。您迭代行中的项目数量（假设它们具有相同数量的字符），并交换两行的项目：

```
for index of row_items
  tmp = row1[index]
  row1[index] = row2[index]
  row2[index] = tmp
end 
```

就像常规的交换实现一样，但是对于所有项目。

# facebook-graph-api - PHP facebook graphapi 获取“必须使用活动访问令牌来查询有关当前用户的信息。”

> ID：13851102
> 
> 赞同：0
> 
> 时间：2012-12-13T00:30:38.747
> 
> 标签：facebook-graph-api, facebook-php-sdk

我有需要帮助的 PHP 代码

这就是我所拥有的

```
$facebook = new Facebook(array(
            'appId'  => FB_APP_ID,
            'secret' => FB_APP_SECRET,
            'cookies' => 'true'
        ));

$FBuser = $facebook->getUser();

$token_url =    "https://graph.facebook.com/oauth/access_token?" .
                            "client_id=" . FB_APP_ID .
                            "&client_secret=" . FB_APP_SECRET .
                            "&grant_type=client_credentials"; 
```

到目前为止一切顺利..但后来我尝试

```
$permissions = $facebook->api("/me/permissions"); 
```

我收到错误“必须使用活动访问令牌来查询有关当前用户的信息。”

我知道用户已经安装了我的应用程序。我一定错过了一些简单的东西？？

谢谢兰迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:06:27.087

这个：

```
$token_url =    "https://graph.facebook.com/oauth/access_token?" .
                            "client_id=" . FB_APP_ID .
                            "&client_secret=" . FB_APP_SECRET .
                            "&grant_type=client_credentials"; 
```

只需获取 APP 的访问令牌。没有用户附加到此。阅读有关获取用户登录 url 的[文档。](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)然后，您在该 redirect_uri 处拥有的 facebook SDK 将为您完成工作，并为您提供`access_token`. 从那里你只需要打电话`$permissions = $facebook->api("/me/permissions");`，它应该工作得很好。

可以肯定的是，在您`access_token`在当前脚本中获得它之后，在[调试器](https://developers.facebook.com/tools/debug)中运行它以确保将 user_id 绑定到它。

# c++ - 将非托管 C++ dll 添加到托管 C++ dll

> ID：13851104
> 
> 赞同：0
> 
> 时间：2012-12-13T00:30:52.813
> 
> 标签：c++, visual-c++, c++-cli

我正在尝试将非托管 C++ dll 添加到托管 (CLI) C++ dll 项目中。当我单击“类向导”时，我收到“MFC 类只能添加到 MFC 项目”错误消息。据我所知，我没有使用 MFC（在我的非托管 dll 的项目页面下，使用 MFC 是空白的）。是否有另一种方法可以将非托管 dll 添加到我的托管 dll 的项目中？

对于任何有兴趣的人，我已经在我的 DropBox 帐户上抛出了稀有的解决方案：[https ://dl.dropbox.com/u/98752313/CplusplusArrayTest.rar](https://dl.dropbox.com/u/98752313/CplusplusArrayTest.rar)

我意识到有太多设置可能对我来说是错误的，无法简单地将所有内容复制并粘贴到可用空间中。

此解决方案中有三个项目。CplusplusArray（应该是完整的，是非托管的.dll），ManagedCpluspplusArray（需要添加非托管的dll，并修改一些东西，是托管的.dll），以及一个C#测试程序（还没写，希望能和大佬交流）非托管 dll 通过托管 dll）。

如果您想知道，这个项目的整个目标是让 C# 能够使用带有 long 的数组作为索引器。如果您以前使用过任何数量的 .Net，您可能已经遇到了 CLR 中对象大小的 Int32/Uint32 限制。我希望通过在 C++ 领域实现数组，然后针对它修改/编译一些 Mono Collections.Generics 类来解决这个问题，从而给我们一些喘息的空间。我做 C# -> C++/CLI -> C++ 的原因是，根据我的研究，我们可以使用面向对象的代码；DllImport 的东西只适用于类 C 的函数，我想保留 OOP，而不是修改东西以像 C 一样工作。由于数组是 List / etc. 类的构建块，据我所知，Collections 命名空间，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:32:53.490

您需要添加一个新项目，而不是一个新类。一旦你“添加项目”，你会被问到你想添加什么类型的项目，一个普通的 C++ DLL 将是你的选择之一。

在解决方案中拥有两个项目（C++/CLI DLL 项目和 C++ DLL 项目）后，您可以转到工作区依赖项并指出其中一个依赖于另一个。

* * *

补充说明：

类向导是关于添加 MFC 类的。因为您对添加 MFC 类不感兴趣，所以这不是正确使用的工具。

当我编写了一个使用本地 C++ DLL 的 C++/CLI DLL 时，我需要添加指令以链接到 C++ DLL 的导入库。这是在
“项目属性 > 配置属性 > 链接器 > 输入 > 附加依赖项”中配置的

工作区依赖保证首先构建非托管库，并且如果更新了非托管库，托管库将在需要时重新编译或重新链接。

# ios - UIButtonContent setImage：EXC_BAD_ACCESS？

> ID：13851109
> 
> 赞同：1
> 
> 时间：2012-12-13T00:31:14.643
> 
> 标签：ios, image, crash, uibutton, exc-bad-access

所以当我测试我的应用程序时，我在控制台中遇到了这个崩溃：

```
3   UIKit                           0x32fe529e -[UIButtonContent setImage:] + 26
4   UIKit                           0x32fe51dc -[UIButton setImage:forState:] + 136
5   App                         0x0005ce20 -[MainView resetPicture] (MainView.mm:138) 
```

所以我检查了 MainView 的 resetPicture，这是第 138 行或附近的代码：

```
if ([myButton imageForState:UIControlStateNormal] != theImage) {
      [myButton setImage:theImage forState:UIControlStateNormal];
} 
```

现在我对 ViewDidLoad 中的 theImage 执行此操作：

```
nib = [UIImage imageNamed:@"My-Image-Button.png"]; 
```

现在这里有什么可能导致这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:46:06.817

你在用ARC吗？如果没有，那么您需要保留正在加载的 UIImage，并将其存储在实例变量中，如代码所示。（或使用一个属性。）否则，它可能会在您到达 resetPicture 时被释放。

# servicestack - 从 ServiceStack 中的请求过滤器中使用正确的内容类型进行响应的最佳方式是什么？

> ID：13851112
> 
> 赞同：3
> 
> 时间：2012-12-13T00:31:34.757
> 
> 标签：servicestack

ServiceStack 服务非常适合响应`Accept`标头中请求的内容类型。但是，如果我需要在请求过滤器中尽早关闭/结束响应，有没有办法以正确的内容类型进行响应？我在请求过滤器中只能访问原始 IHttpResponse 所以在我看来唯一的选择是繁琐地手动检查`Accept`标头并执行一堆 switch/case 语句来确定要使用哪个序列化程序然后直接编写到`response.OutputStream`.

为了进一步说明问题，在正常的服务方法中，您可以执行以下操作：

```
public object Get(FooRequest request)
{
    return new FooResponseObject()
    {
        Prop1 = "oh hai!"
    }
} 
```

ServiceStack 将确定要使用的内容类型以及要使用的序列化程序。我可以在请求过滤器中做任何类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:53:30.387

[ServiceStack](http://www.servicestack.net/)根据许多因素（例如 Accept: header、QueryString 等）预先计算 Requested Content-Type，并将此信息存储在`httpReq.ResponseContentType`属性中。

您可以将它与注册表一起使用，该`IAppHost.ContentTypeFilters`注册表在 ServiceStack 中存储所有注册的内容类型序列化程序的集合（即内置 + 自定义）并执行以下操作：

```
var dto = ...;
var contentType = httpReq.ResponseContentType;
var serializer = EndpointHost.AppHost
    .ContentTypeFilters.GetResponseSerializer(contentType);

if (serializer == null)
   throw new Exception("Content-Type {0} does not exist".Fmt(contentType));

var serializationContext = new HttpRequestContext(httpReq, httpRes, dto);
serializer(serializationContext, dto, httpRes);
httpRes.EndServiceStackRequest(); //stops further execution of this request 
```

注意：这只是将响应序列化到输出流，它不会按照正常的 ServiceStack 请求执行任何其他请求或响应过滤器或其他用户定义的钩子。

# clojure - Clojure 中可编写脚本的窗口管理器

> ID：13851113
> 
> 赞同：2
> 
> 时间：2012-12-13T00:31:39.733
> 
> 标签：clojure

## 目标

我想要一个可以在 Clojure 中编写脚本的 WindowManager（适用于 Linux）。

## 问题：

是否有任何现有的窗口管理器：XMonad、AwesomeWM、Ion、XFce4 ......允许通过一些外部接口（TCP 端口、Unix 套接字......）来查询和控制自己？基本上任何可以让我在外部完全控制 WM 的东西。

这似乎是一种比将 JVM 嵌入其中一个 WM 更简单的方法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:41:43.573

您可以尝试 stumpwm ( [http://www.nongnu.org/stumpwm/](http://www.nongnu.org/stumpwm/) )。它是用普通的 lisp 编写的，甚至可以通过 slime 进行控制。

# ruby-on-rails - 暂时禁用 Heroku 帐户插件

> ID：13851115
> 
> 赞同：1
> 
> 时间：2012-12-13T00:31:46.003
> 
> 标签：ruby-on-rails, heroku, ssh, rake, accounts

我已经搜索了一个明确的答案，但在任何地方都找不到。

我在一个 heroku 帐户下为我的应用程序创建了一个 SSH 密钥。它将 SSH 放置在默认位置。一切都很棒，直到我开始使用第二个 Heroku 帐户，我开始使用 ddollar 帐户插件。太好了，它允许我为不同的帐户存储多个 ssh 密钥集！

但是，我仍然拥有我为没有帐户插件（在默认位置）创建密钥的第一个帐户。所有者要求我更新，虽然我仍然可以推送到 heroku，但它不允许我运行任何 rake 命令，因为它要求我在使用这些命令时使用 --account accountname。没有账户名，只是默认...

有没有办法暂时禁用 Heroku 帐户，这样我仍然可以访问在安装插件之前创建的 SSH 密钥！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:39:33.460

您将在 ~/.heroku/plugins 中找到该插件 - 您可以将其移出，做您需要做的事情，然后将其移回

# java - 转换为货币格式

> ID：13851117
> 
> 赞同：0
> 
> 时间：2012-12-13T00:32:04.900
> 
> 标签：java

```
 System.out.print(toLn+toFn+toStr+toC+toSt+toZ+fromLn+fromFn+fromStr+fromC+fromSt+fromZ+beforeN+d+ship+bsize+msg+"\n");
                //add info to addOrder
                double test = manager.addOrder(toLn, toFn, toStr, toC, toSt, toZ, fromLn, fromFn, fromStr, fromC, fromSt, fromZ, beforeN, d, ship, bsize, msg);

                beforeN = false;

                totalField.setText(Double.toString(test));
            }
        }
    } 
```

我遇到的问题是 totalfield.setText(Double.toString(test)); 带来的值 是一个值，比如说 52.0。它显示 52.0 但我想要它做的是在 TextField 中显示 $ 52.0。关于如何做的任何快速建议？}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:42:23.480

totalField.setText("$" + Double.toString(test));

# audio - 音频文件不会在模板内自动播放

> ID：13851118
> 
> 赞同：1
> 
> 时间：2012-12-13T00:32:07.643
> 
> 标签：audio, meteor, autoplay

将 Meteor 与默认 Handlebars 模板一起使用时出现问题。当我将下面的标签移动到 html 正文中时，它会自动播放。但是在车把模板的上下文中，我看到了控件，但它不会自动播放。有什么办法克服吗？？

```
<template name="showMedia">
  <div class="background_audio">
    <audio controls autoplay> 
         <source src="assets/screenDisplayAlert.wav">
    </audio>
  </div>
</template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:00:13.460

用于`Template.showMedia.rendered`在 Meteor 渲染模板后执行一些代码。例如，您可以调用 audio.play() 或重新应用任何缺少的自动播放属性。

这不起作用的原因可能与浏览器连接自动播放时有关。被 Meteor 重新渲染可能不会调用那些相同的钩子。就个人而言，我觉得这应该“正常工作”。如果你不能修复它，你可以考虑[在 Github 上提交一个错误](https://github.com/meteor/meteor/issues)，看看开发人员是否可以重现或弄清楚发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T01:27:18.060

`Meteor.startup()`您可以尝试在客户端的块内添加一些 javascript 。有关参考，请参阅[在 Javascript 中启动和停止音频](https://stackoverflow.com/questions/4927838/starting-and-stopping-audio-in-javascript)以及[如何在页面加载时播放声音剪辑？](https://stackoverflow.com/questions/3362426/how-can-i-play-a-sound-clip-on-page-load).

我不知道为什么它在模板之外而不在模板内部起作用，但我很确定 JS 会起作用，而且谨慎是勇气的更好部分:)

# java - 使用 Jersey 和 Jackson 进行 JSON 格式化

> ID：13851121
> 
> 赞同：1
> 
> 时间：2012-12-13T00:32:41.573
> 
> 标签：java, jersey, jackson

使用 Java 6、Tomcat 7、Jersey 1.15、Jackson 1.9.9，创建了一个具有以下架构的简单 Web 服务：

我的 POJO（模型类）：

家庭.java：

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Family {

    private String father;
    private String mother;

    private List<Children> children;

    // Getter & Setters
} 
```

儿童.java：

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Children {

    private String name;
    private String age;
    private String gender;

    // Getters & Setters
} 
```

使用实用程序类，我决定对 POJO 进行硬编码，如下所示：

```
public class FamilyUtil {
    public static Family getFamily() {
        Family family = new Family();
        family.setFather("Joe");
        family.setMother("Jennifer");

        Children child = new Children();
        child.setName("Jimmy");
        child.setAge("12");
        child.setGender("male");
        List<Children> children = new ArrayList<Children>();

        children.add(child);

        family.setChildren(children);
        return family;
    }
} 
```

我的网络服务：

```
@Path("")
public class MyWebService {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Family getFamily {
        return FamilyUtil.getFamily();
    }
} 
```

产生：

```
{"children": [{"age":"12","gender":"male","name":"Jimmy"}],"father":"Joe", "mother":"Jennifer"} 
```

我需要做的是让它以更清晰的方式生成它：

```
{ 
    "father":"Joe", 
    "mother":"Jennifer",
    "children": 
    [
        {
            "name":"Jimmy",
            "age":"12","
            "gender":"male"
        }
    ]
} 
```

只是在寻找一种实现方式，以便它可以显示某种带有缩进/制表符的格式。

如果有人可以帮助我，将不胜感激。

感谢您抽出时间来阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:46:08.363

您可以只返回一个字符串，而不是返回一个家庭（Web 服务调用者不会注意到差异）

```
@Path("")
public class MyWebService {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public String getFamily {
        // ObjectMapper instantiation and configuration could be static...
        ObjectMapper mapper = new ObjectMapper();
        mapper.configure(SerializationConfig.Feature.INDENT_OUTPUT, true); 
        return mapper.writeValueAsString(FamilyUtil.getFamily());
    }
} 
```

虽然，正如我在对您的问题的评论中所说，您的服务确实不应该这样做。应该由 Web 服务调用者将响应格式化为他们需要的任何格式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T22:18:35.250

通过使用以下代码，我能够解决这个问题（不必要的引号和换行符转义序列）：

```
@GET
@Produces(MediaType.APPLICATION_JSON)
public Family getFamily() throws JsonGenerationException, 
                                 JsonMappingException, 
                                 IOException {
        ObjectMapper mapper = new ObjectMapper();
        mapper.configure(SerializationConfig.Feature.INDENT_OUTPUT, true); 
        Family family = FamilyUtil.getFamily();
        return mapper.readValue(mapper.writeValueAsString(family),
                               FamilyUtil.getFamily().getClass());
} 
```

像这样使用卷曲：

```
curl -X GET http://localhost:8080/mywebservice 
```

产量：

```
{"children":[{"age":"12","gender":"male","name":"Jimmy"}],"father":"Joe","mother":"Jennifer"} 
```

好像什么都没发生……

以下是我的 pom.xml 文件中列出的依赖项：

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>2.0.6</version>
</dependency>

<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-annotations</artifactId>
    <version>2.0.6</version>
</dependency>

<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.0.6</version>
</dependency> 
```

有谁知道我可能做错了什么？

是否有其他库可以使整个过程变得更容易？杰克逊似乎没有工作......

# grails - 在 Grails 中读取响应内容

> ID：13851126
> 
> 赞同：-1
> 
> 时间：2012-12-13T00:33:06.930
> 
> 标签：grails, groovy

我如何读取 Grails 中的响应内容（它是二进制数据）？任何示例代码表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:54:58.417

数据控制器：

```
class DataController {

    static allowedMethods = [save: "POST", update: "POST", delete: "POST"]

    def doSomeThing() {
        def myData = dataService.dataMethod(params)
        render(view: "show", model:[myData:myData])
    }
............
} 
```

显示.gsp：

```
...........
<!-- show response data -->
${myData}
<!-- thats it --> 
```

# c++ - 我想知道如何验证函数签名

> ID：13851127
> 
> 赞同：0
> 
> 时间：2012-12-13T00:33:11.113
> 
> 标签：c++, function

我目前认为是编译器或返回类型执行此操作，但我不确定我是否需要澄清

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T00:35:36.483

函数签名首先匹配它的名称，然后匹配它的参数。永远不要使用它的返回类型。例如，如果您有两个方法，`Add`一个取两个`int`值并返回 a `int`，一个取两个`string`值并返回 a `string`，并且您将其称为传递`int`s ，那么您将其设置为 int 版本将被调用。

当您尝试使用不同数值的方法重载时，这会给您带来一些麻烦。编译器会尝试帮助你（如果你调用一个需要整数的方法但传递一个短的，它会尝试找出你想要做什么）。

# c# - 与 SQL Server 2012 LocalDB 实例的 ODBC 连接

> ID：13851133
> 
> 赞同：2
> 
> 时间：2012-12-13T00:33:39.513
> 
> 标签：c#, odbc, sql-server-2012, localdb

我们有一个“遗留”应用程序，它使用 ODBC 连接到底层数据库，可以是 Access、Oracle 或 SQL Server。出于单元（或者，也许更准确地说，“集成”）测试的目的，我想连接一个 SQL Server 2012 LocalDB 实例。但是，我无法确定要使用的正确 ODBC 连接字符串。

我试过了：

```
 [TestMethod]
    public void OdbcConnectionToLocalDb()
    {
        string connectionString = "DRIVER=SQL Server Native Client 11.0;Trusted_Connection=Yes;SERVER=(localdb)\v11.0;Description=LocalDB;";
        using (OdbcConnection connection = new OdbcConnection(connectionString))
        {
            using (var command = new OdbcCommand("select * from Person", connection))
            {
                connection.Open();
                // ... 
            }
        }
    } 
```

但是，当打开连接时，会抛出以下异常：

```
System.Data.Odbc.OdbcException: ERROR [08001] [Microsoft][SQL Server Native Client 11.0]Named Pipes Provider:  Could not open a connection to SQL Server [67]. 
ERROR [HYT00] [Microsoft][SQL Server Native Client 11.0]Login timeout expired
ERROR [08001] [Microsoft][SQL Server Native Client 11.0]A network-related or instance-specific error has occurred while establishing a connection to SQL Server. Server is not found or not accessible. Check if instance name is correct and if SQL Server is configured to allow remote connections. For more information see SQL Server Books Online. 
```

是否可以通过 ODBC 连接/驱动程序连接到 SQL Server 2012 LocalDB？是否可以连接到特定文件？

**[编辑]** Garrett 指出这是可能的，太好了。我一定是连接字符串错了，所以我的问题应该是：连接字符串应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:56:09.973

您需要像这样指定连接字符串：

```
Provider=SQLNCLI11.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=TestDB;Data Source=(localdb)\v11.0 
```

我认为主要是您将其引用为数据源而不是服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:47:17.087

是的，这是可能的。确保安装最新的驱动程序：SQL Server Native Client“Denali”（用于 ODBC 和 OLE DB）。

在这里查看更多信息：http: [//blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)

# java - 如何渲染令人信服的天穹？

> ID：13851138
> 
> 赞同：14
> 
> 时间：2012-12-13T00:34:14.963
> 
> 标签：java, opengl-es-2.0, libgdx, jogl

我正在编写一个渲染 3D 岛的 OpenGL ES 2.0 应用程序。我已经有了在岛上生成天空穹顶的代码。这是一个由三角形组成的半球，这些三角形覆盖在岛上，z 点向上。

圆顶有一些非常基本的移动云，使用覆盖在自身上的柏林噪声纹理创建并以不同的速度移动。

但最终我需要穹顶来渲染：

*   太阳（在天空中追踪） 月亮（包括相位）
*   星星（晚上）
*   遥远的土地作为静态纹理
*   不同的颜色来模拟夜晚、黎明、黄昏、白天

我需要非常有效地做到这一点，因为它最终会在 Android 上运行，尽管目前它在测试工具中运行。因此，例如太阳、月亮和星星将只是纹理，尽管它们的点可以以合理的精度绘制。

我已经有了生成圆顶的代码，以及根据日期和时间绘制太阳的代码。所以主要是我需要的着色器以及它们提供的内容。

有没有例子可以证明这些事情？我发现很多可以做基本立方体贴图或有限的东西，但没有达到我需要的复杂程度。显然，由于这是 OpenGL ES 2.0，它必须在着色器中完成。

我现有天穹的着色器渲染了 2 层柏林噪声来模拟云。纹理连续包裹，因此我可以根据圆顶顶点与 xy 平面的角度计算 u 偏移量（通过将 x 和 y 输入 atan）和使用圆顶顶点 z 的 v 偏移量。

顶点着色器演示了我是如何做到的：

```
#ifdef GL_ES
precision mediump float;
precision mediump int;
#endif

attribute vec4 aVertex;

uniform mat4 uPMVMatrix;
uniform float uTime;
uniform float uSkyDomeRadius;

const float PI = 3.1415926535897932384626433832795;

varying vec2 texCoord0, texCoord1;

void main()
{
    vec2 centre = vec2(600., 600.);

    gl_Position = uPMVMatrix * aVertex;

    float slow_time = uTime / 100.;

    vec2 dome_point = aVertex.xy - centre;
    float tex_u = atan(dome_point.x, dome_point.y);// / (.25 * PI);
    float tex_v = aVertex.z / (uSkyDomeRadius * .5);

    texCoord0 = vec2(tex_u / 2.0 + slow_time, tex_v / 2.0);
    texCoord1 = vec2(tex_u + slow_time / 2.0, tex_v);
} 
```

我还使用时间来抵消每一帧的 ua 位，以便云移动。这工作得很好，除了 atan 从 -PI 到 PI 并且片段着色器插值的 texCoord0 和 texCoord1 值突然分开了很长的距离，这对插值进行了软管处理。

描述它的最好方法是，如果我的底部有 16 个三角形，那么从 0/16 到 1/16 的插值有效，从 1/16 到 2/16 有效，依此类推。但是当我到达 15/16 到 0/16 时，插值器会向后移动，并且较大的变化会导致碎片着色器在一个小空间中一遍又一遍地重复纹理，从而导致如图所示的条纹。

![随着角度反转，插值变得混乱](../Images/999407da28699d002686bfa99b9adcfc.png)

我看不到任何获得无缝 360 度视图的方法 我认为解决此问题的唯一方法是如果我旋转整个圆顶，以便接缝始终位于相机后面，但如果相机直接指向镜头，它可能仍会显示一个圆顶的顶部。

一个带有源代码的工作示例会很棒，特别是如果它解决了这些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T17:39:12.273

问题是，您以 0° 和 360° 的角度使用相同的顶点。所以你现在有一个三角形，其中第一个顶点的纹理坐标为 15/16, 0，第二个顶点的纹理坐标为 0, 0 而不是 1,0。要解决这个问题，您必须打开球体，以便在相同的空间位置有一对顶点，一个用于 0°，一个用于 360°。这样两个顶点可以有不同的纹理坐标，不会有任何干扰的纹理。

要旋转它们，您必须使用环绕模式，确保纹理环绕设置为重复。如果没改应该设置正确，但是可以用function设置`glTexParameter`，参数是`GL_TEXTURE_WRAP_S`and `GL_TEXTURE_WRAP_T`，值必须是`GL_REPEAT`。然后，如果纹理值 > 1，它将不会环绕，而是重复纹理。现在您只需要能够区分球体开始处的顶点（对于 0° 的顶点）和末端的顶点（对于 360° 的顶点），这样您就可以更正`tex_u`，您可能需要一个额外的属性。

# css - 对齐和堆叠 div

> ID：13851140
> 
> 赞同：2
> 
> 时间：2012-12-13T00:34:34.543
> 
> 标签：css, html, alignment

如果问题措辞不正确或不清楚，我深表歉意。让我解释。

**我在中间 div 中有 4 个 div。旨在如下所示：**

```
 --------------  -----------   -------------
|custExpBox    || techSumBox| |escalationBox|
 -------------  |           |  -------------
 -------------- |           |
|workaroundnBox||           |
 -------------   ----------- 
```

**但相反，我得到：**

```
 -------------   -----------   -------------
|custExpBox    || techSumBox| |escalationBox|
 -------------  |           |  -------------
                |           |
                |           |
 -------------  -----------
|workaroundBox|
 ------------- 
```

**这是 html 代码的精简版：**

```
<div id="middle">
    <div id="custExpBox"></div>          
    <div id="techSumBox">  </div>
    <div id="escalationBox"> </div>
    <div id="workaroundBox"> </div>
</div> 
```

**CSS 代码：**

```
#middle{

    width:100%;
    margin-top:16px;
    margin-bottom: 5px;
    display:inline-block;
    border:1px dashed black;
}

#custExpBox{

    display: inline-block;
    float:left;
    width:40%;
    background-color:#EAF2D3;
    line-height:17px;
    padding:3px;
    height:200px;
    overflow:scroll;

}

#techSumBox{

    display: inline-block;
    float:left;
    width:30%;
    background-color:#EAF2D3;
    line-height:17px;
    padding:4px;
    height:406px;
    overflow:scroll;
    border:1px solid black;
    overflow:auto;
}

#escalationBox{

    margin-top:16px;
    display: inline-block;
    float:right; 
    width:18%;
    border:1px solid black;
    background-color:#E9EBA9;
    line-height:17px;
    border-radius:5px;  
    padding:4px;
}

#workaroundBox{
   display: inline-block;
   float:left;
   width:40%;
   background-color:#EAF2D3;
   line-height:17px;
   padding:3px;
   height:198px;
   overflow:scroll;
   margin-top:6px;  
} 
```

感谢帮助。谢谢！

**编辑 1**：我想我会让你知道，如果我将 techSumBox div 的高度更改为与 custExpBox 相同的大小，它会根据需要显示。问题是当高度大于 custExpBox div 时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:01:10.073

您应该做的是考虑将堆叠在左列中的两个元素包装在自己的 div 中。确保包装 div 具有正确的宽度定义。然后删除浮动并将每个包含的 div 定义为 inline-block。接下来，确保右侧的两列与顶部垂直对齐。

这可能是你所追求的：http: [//jsfiddle.net/y75Fc/](http://jsfiddle.net/y75Fc/)

html:

```
<div id="middle">
 <div id="custworkHolder">
  <div id="custExpBox">1</div>
  <div id="workaroundBox">2</div> 
 </div>
 <div id="techSumBox">3</div>
 <div id="escalationBox">4</div>
</div>​ 
```

CSS：

```
#middle{
 width:100%;
 margin-top:16px;
 margin-bottom: 5px;
 border:1px dashed black;
}

#custworkHolder
{
 width:40%;
 display:inline-block;
}

#custExpBox{
 background-color:#EAF2D3;
 line-height:17px;
 padding:3px;
 height:200px;
 overflow:scroll;
}

#workaroundBox{
 background-color:#EAF2D3;
 line-height:17px;
 padding:3px;
 height:198px;
 overflow:scroll;
 margin-top:6px;  
}

#techSumBox{
 vertical-align:top;
 display:inline-block;
 width:30%;
 background-color:#EAF2D3;
 line-height:17px;
 padding:4px;
 height:406px;
 overflow:scroll;
 border:1px solid black;
 overflow:auto;
}

#escalationBox{
 vertical-align:top;
 display:inline-block;
 margin-top:16px;
 width:18%;
 border:1px solid black;
 background-color:#E9EBA9;
 line-height:17px;
 border-radius:5px;  
 padding:4px;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T00:48:28.363

所有元素都浮动到左侧并且`workaroudbox`是最后一个元素，因此当它包装时，它会将自身定位在底部，这是预期的行为。可以将其想象为将它们堆叠在另一个顶部的左侧，无论高度如何，它们都不能重叠。在这里你有[小提琴](http://jsfiddle.net/kxYna/)。我刚刚添加了`#dummy`div 并将其浮动到左侧。

## 更新

[新小提琴](http://jsfiddle.net/kxYna/1/)。

## 新更新

代码：

HTML：

```
 <div id="middle">
        <div id="dummy">            
            <div id="custExpBox"></div>          
            <div id="workaroundBox"> </div>
        </div>
        <div id="techSumBox">  </div>
        <div id="escalationBox"> </div>
    </div>​ 
```

CSS：

```
 #dummy{float:left;}

    #middle{
        width:100%;
        margin-top:16px;
        margin-bottom: 5px;
        display:inline-block;
        border:1px dashed black;
    }
    #custExpBox{
        display: inline-block;
        float:left;
        width:80px;
        background-color:#EAF2D3;
        line-height:17px;
        padding:3px;
        height:100px;
        overflow:scroll;
        background-color: red;
    }
    #techSumBox{
        display: inline-block;
        float:left;
        width:80px;
        background-color:#EAF2D3;
        line-height:17px;
        padding:4px;
        height:180px;
        overflow:scroll;
        border:1px solid black;
        overflow:auto;
        background-color: blue;
    }
    #escalationBox{
        display: inline-block;
        float:left; 
        width:40px;
        height: 60px;
        border:1px solid black;
        background-color:#E9EBA9;
        padding:4px;
        background-color: green;
    }
    #workaroundBox{
       display: inline-block;
       float:left;
       width:80px;
       background-color:#EAF2D3;
       line-height:17px;
       padding:3px;
       height:50px;
       overflow:scroll;
       background-color: cyan;
       clear: both;
    }​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T00:42:40.800

**编辑 1**

[此解决方案](http://jsfiddle.net/rn9Mx/)不需要包装器 div。也许这对你会更好。

只需重新排列 HTML 并更新 CSS。

HTML

```
<div id="middle">
    <div id="escalationBox">escalationBox</div>
    <div id="custExpBox">custExpBox</div>
    <div id="workaroundBox">workaroundBox</div>    
    <div id="techSumBox">techSumBox</div>
</div>​ 
```

CSS

```
#middle{

    width:100%;
    margin-top:16px;
    margin-bottom: 5px;
    display:inline-block;
    border:1px dashed black;
}

#custExpBox{

    display: inline-block;
    float:left;
    width:40%;
    background-color:#EAF2D3;
    line-height:17px;
    padding:3px;
    height:50px;
    overflow:scroll;

}

#techSumBox{

    width:30%;
    background-color:#EAF2D3;
    line-height:17px;
    padding:4px;
    height:300px;
    overflow:scroll;
    border:1px solid black;
    overflow:auto;
}

#escalationBox{

    margin-top:16px;
    float:right;
    width:18%;
    border:1px solid black;
    background-color:#E9EBA9;
    line-height:17px;
    border-radius:5px;  
    padding:4px;
}

#workaroundBox{
   display: inline-block;
   float:left;
   clear:left;
   width:40%;
   background-color:#EAF2D3;
   line-height:17px;
   padding:3px;
   height:198px;
   overflow:scroll;
   margin-top:6px;  
}​ 
```

**编辑 0**

这个[更新的示例](http://jsfiddle.net/HFPF9/1/)类似于您的 ascii 示例。两个左 div 只需要`width:100%;`跨越整个左 div 容器。

* * *

如果将左侧的两个 div 组合在一起，您可以获得所需的结果。此处示例：http: [//jsfiddle.net/HFPF9/](http://jsfiddle.net/HFPF9/)。

因此，包含两个左侧 div 的新 div：

HTML

```
<div id="Left">
    <div id="custExpBox">custExpBox</div>          
    <div id="workaroundBox">workaroundBox </div>        
</div> 
```

CSS

```
#Left {
    float:left;
    width:40%;
} 
```

然后`workaroundBox`将需要以`clear: left;`正确堆叠。

**所有代码**

HTML

```
<div id="middle">
    <div id="custworkHolder">
        <div id="custExpBox">1</div>
         <div id="workaroundBox">2</div> 
    </div>
    <div id="techSumBox">3</div>
    <div id="escalationBox">4</div>
</div>​ 
```

CSS

```
#middle{
    width:100%;
    margin-top:16px;
    margin-bottom: 5px;
    display:inline-block;
    border:1px dashed black;
}

#Left {
    float:left;
    width:40%;
}

#custExpBox{
    display: inline-block;
    float:left;
    width:100%;
    background-color:#EAF2D3;
    line-height:17px;
    padding:3px;
    height:200px;
    overflow:scroll;
}

#techSumBox{
    display: inline-block;
    float:left;
    width:30%;
    background-color:#EAF2D3;
    line-height:17px;
    padding:4px;
    height:406px;
    overflow:scroll;
    border:1px solid black;
    overflow:auto;
}

#escalationBox{

    margin-top:0px;
    display: inline-block;
    float:right; 
    width:25%;
    border:1px solid black;
    background-color:#E9EBA9;
    line-height:17px;
    border-radius:5px;  
    padding:4px;
}

#workaroundBox{
   display: inline-block;
   float:left;
   clear: left;
   width:100%;
   background-color:#EAF2D3;
   line-height:17px;
   padding:3px;
   height:198px;
   overflow:scroll;
   margin-top:6px;  
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T00:45:57.533

最简单的解决方案是包装浮动的`divs`. 看看[这个 Fiddle](http://jsfiddle.net/rdiaz/4TSfD/)。

# c# - 如何在 C# UserControl 中路由拖动事件？

> ID：13851144
> 
> 赞同：1
> 
> 时间：2012-12-13T00:34:59.980
> 
> 标签：c#, user-controls, drag-and-drop

我的意图是编写一个 LabelOrText UserControl，其行为类似于 Label 或 TextField - 取决于其构造函数中的模式参数。UserControl 有一个 Text 属性，它包含一个 Label 和一个 TextField - 但一次只能看到两者中的一个。因此，在任何应用程序源中，我现在可以用我的 LabelOrText UserControl 替换所有标签和所有 TextFields，而无需更改任何源代码......（当然，不仅 Text 属性被委托给可见的内部控件，Font 属性和BackColor 属性和所有其他属性都委托给可见的内部控件...）

这工作正常，除了 DragOver 和 DragDrop 事件不能正常工作。

--> LabelOrText1.DragDrop += myDDHandler 应该像 Label1.DragDrop += myDDHandler 一样工作

--> LabelOrText1.DragOver += myDOHandler 应该像 Label1.DragOver += myDOHandler 一样工作

和

--> 使用鼠标在内部 Label 上的任何 DragOver 动作都应该调用 myDOHandler(o, e)

--> 使用鼠标在内部 Label 上的任何 DragDrop 操作都应该调用 myDDHandler(o, e)

* * *

所以在任何应用程序的源代码中用我的 LabelOrText UserControl 替换标签控件非常简单。

* * *

任何关于如何通过 UserControl 透明地从内部控件路由拖动事件的想法都将受到高度赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:40:22.790

单独的文本框听起来不错，但如果你想在父容器中处理拖放，只需将标签、文本和自身的 DragDrop 事件设置为父/自身；

您可以通过连接父类中的事件来透明地做到这一点，这应该很容易。

在父对象 CTOR 或其他地方

```
//psuedocode
label.DragDrop += parentEvent;  //aggregate object
text.DragDrop += parentEvent;
DragDrop += parentEvent; 
```

我用一个面板来做这个，这样任何被推动和拖动的东西都会导致整个东西跟随你的手指/鼠标并滚动。平移。

# iphone - XCode4 Autosizing 无法在盒子内调整

> ID：13851146
> 
> 赞同：0
> 
> 时间：2012-12-13T00:35:12.477
> 
> 标签：iphone, xcode4

我无法调整盒子内的自动调整大小。我该如何调整或者我必须重新创建视图...？

![图片](../Images/85b449ae3ec1d2305c5fe8cf7653c1bb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:41:02.953

自动调整大小行为是视图的大小和位置在其父级更改时相对于其父级的更改方式。因此，要在框内进行调整，您将调整子视图。

你是说视图有子视图并且你想调整它们的自动调整大小吗？您可以只选择子视图并调整它们。

# ios - ios - 模拟器看起来与故事板屏幕上的布局不同

> ID：13851147
> 
> 赞同：3
> 
> 时间：2012-12-13T00:35:20.997
> 
> 标签：ios, ios5, storyboard

我有一个奇怪的情况。我在情节提要上创建了一个非常简单的屏幕，其中包含一些按钮，然后当我运行模拟器（说模拟器或模拟器是否正确？）时，其中一个按钮的间距错误。

我正在添加屏幕截图。模拟器位于情节提要屏幕的右侧。

知道为什么会发生这种情况吗？

![在此处输入图像描述](../Images/5e3ac0a6ad699e4a5b971c9fc2857b32.png)

我还以为是按钮的问题。它可能是。但是当我拿出两个较低的按钮时，我得到了一些更奇怪的东西，如下图所示：

![在此处输入图像描述](../Images/8f1b316a787b3f253906900691b22e33.png)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T05:20:52.083

看起来您正在使用自动布局，并且除了 Investment 之外的所有按钮都具有 Top 约束，而 Investment 具有 Bottom 约束，导致 Investment 到底部的距离在屏幕变高时保持不变。

点击投资按钮，点击顶部菜单中的[编辑器 -> 引脚 -> 顶部空间到 Superview]。

再次点击投资按钮。单击右侧面板中右侧的第二个选项卡（您可以设置框架的选项卡）。查找 Top Space to Superview 约束，右键单击并删除。如果没有，那么 XCode 就完成了它的工作。再次尝试运行模拟器。

编辑：我只想说，当您刚刚拖入 xib 的视图位于其容器的上半部分时，XCode 习惯为您添加 Top 约束，而当它位于下半部分时，为您添加 Bottom 约束。我知道 XCode 试图提供帮助，但有时它让我发疯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T00:43:47.020

看起来您正在使用 3.5" 模拟器并为 4" 设备布局，因此将调整视图大小。

如果您使用自动调整大小蒙版，按钮上的某些自动调整大小蒙版是否不正确？您可能希望它们都停留在屏幕顶部。检查以确保每个按钮的自动调整大小与此图像匹配。（您需要单击“标尺”图标才能查看这些设置。）

![自动调整图片大小](../Images/54440b46e1f771f556ddbe3fcdf451c8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T00:43:28.680

我假设您使用的是默认提供 NSAutoLayout 的 XCode4。当您将对象放置到情节提要时，NSAutolayout 会自动创建约束，这些约束会针对不同的设备（iPhone4、iPhone5）或方向（纵向/横向）自动在屏幕上布局对象。请检查 NSAutolayout 类和约束。如果您愿意，您可以删除 NSAutolayout 并且您的对象将正常显示在模拟器上，但在这种情况下，您必须手动调整对象以适应不同的方向和屏幕

希望有所帮助。

# mips - MIPS 相对寻址

> ID：13851148
> 
> 赞同：0
> 
> 时间：2012-12-13T00:35:25.227
> 
> 标签：mips

有人可以帮我回答这三个问题吗？：

这里确定了两个：http: [//s11.postimage.org/lrb0exx5v/Capture2.png](http://s11.postimage.org/lrb0exx5v/Capture2.png)当我们将直接操作数乘以 4 时，我们是将二进制还是十进制乘以 2^2？加号是连接的吗？

$s 的最大偏移量是多少？： http: [//s11.postimage.org/emt75wpwj/Capture.png](http://s11.postimage.org/emt75wpwj/Capture.png)

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:51:55.577

处理器只处理二进制数。小数只是为人类显示二进制数字的一种方便方式。这里的加号表示正常的算术加法。

16 位立即数乘以 4，因为 MIPS 指令总是在 4 字节边界上对齐，所以合法分支地址的低 2 位总是`00`。偏移量指定**字**偏移量并乘以 4 以计算与 4 字节边界对齐的字节地址。

最大偏移量`$s`为 +/- 4 * 2^15，因为立即数是有符号的

# c++ - 实现功能时keyPressedEvent错误Qt

> ID：13851154
> 
> 赞同：0
> 
> 时间：2012-12-13T00:36:37.583
> 
> 标签：c++, qt, keypress, qmainwindow

我在尝试捕获击键的 qt 程序中遇到错误。在我的 qt 程序的 keyPressedEvent 函数中，但我遇到了一个奇怪的错误：

```
frenzywindow.cpp:16:50: error: no 'void FrenzyWindow::keyPressEvent(QKeyEvent*)' member function declared in class 'FrenzyWindow'
make: *** [frenzywindow.o] Error 1 
```

该类扩展了 qmainwindow

这是我的头文件：

```
#ifndef FRENZYWINDOW_H
#define FRENZYWINDOW_H

#include <QMainWindow>
#include "frenzy.h"

namespace Ui {
class FrenzyWindow;
}

class FrenzyWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit FrenzyWindow(QWidget *parent = 0);
    ~FrenzyWindow();

signals:
    void moveUp();
    void moveDown();
    void moveLeft();
    void moveRight();

private:
    Ui::FrenzyWindow *ui;
    Frenzy f;
};

#endif // FRENZYWINDOW_H 
```

这是我的 cpp 文件：

```
#include "frenzywindow.h"
#include "ui_frenzywindow.h"

FrenzyWindow::FrenzyWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::FrenzyWindow)
{
    ui->setupUi(this);
}

FrenzyWindow::~FrenzyWindow()
{
    delete ui;
}

void FrenzyWindow::keyPressEvent(QKeyEvent *event)
{

    switch(event->key())
    {
    case Qt::UpArrow:
        emit moveUp();
        break;
    case Qt::DownArrow:
        emit moveDown();
        break;
    case Qt::LeftArrow:
        emit moveLeft();
        break;
    case Qt::RightArrow:
        emit moveRight();
        break;
    default:
            event->ignore();
            break;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:40:51.850

你读过编译器错误吗？这正是问题所在。您需要`keyPressEvent`在头文件中定义。

```
protected:
    void keyPressEvent(QKeyEvent *event); 
```

# security - OAuth2 和 Google API：访问令牌过期时间？

> ID：13851157
> 
> 赞同：69
> 
> 时间：2012-12-13T00:37:05.137
> 
> 标签：security, google-api, oauth-2.0, google-api-java-client, google-oauth

我们有一个独立的 Java 应用程序（参见[“已安装的应用程序”](https://developers.google.com/identity/protocols/OAuth2#installed)），它定期运行并使用 Google API（从客户数据库/ldap/...更新一些信息）。

为了访问 Google API，我们将用户名和密码存储在配置文件中，这是一个安全风险，客户不喜欢这样。所以我们想改用 OAuth2 长寿命*访问令牌*。

> **Google OAuth2 访问令牌的默认到期时间是多少？**

由于我们在应用程序中只有*访问令牌，因此当**访问令牌*过期时，应用程序本身无法刷新它。

*我个人认为在这种情况下 OAuth2 实施不会带来任何重大好处，但让我们关注主要问题 - 默认到期时间。*

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-12-13T02:00:44.163

您不应该根据访问令牌的特定生命周期来设计您的应用程序。假设它们（非常）短命。

但是，在成功完成 OAuth2 安装应用程序流程后，您将获得一个刷新令牌。此刷新令牌永不过期，您可以根据需要使用它来交换访问令牌。保存刷新令牌，并使用它们按需获取访问令牌（应立即用于访问用户数据）。

编辑：尽管上面有我的评论，有两种简单的方法可以获取访问令牌到期时间：

1.  `expires_in`当您交换刷新令牌（使用 /o/oauth2/token 端点）时，它是响应 ( ) 中的一个参数。[更多细节。](https://developers.google.com/accounts/docs/OAuth2WebServer#handlingtheresponse)
2.  还有一个 API 可以返回 access_token 的剩余生命周期：

    [https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=](https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=) {accessToken}

    这将返回一个包含`expires_in`参数的 json 数组，该参数是令牌生命周期中剩余的秒数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-27T11:53:29.970

google oauth2 访问令牌的默认到期日期为 1 小时。expiry_date 以 Unix 纪元时间为单位，以毫秒为单位。如果你想以人类可读的格式阅读它，那么你可以在这里简单地检查它.. [Unix 时间戳到人类可读的时间](https://www.freeformatter.com/epoch-timestamp-to-date-converter.html)

# jquery - Jquery tmpl 和 razor 混合

> ID：13851158
> 
> 赞同：0
> 
> 时间：2012-12-13T00:37:07.800
> 
> 标签：jquery, asp.net-mvc, razor

```
<script id="newsTemplate" type="text/x-jquery-tmpl"> 
    <div class="news_item" style="margin-left:0 !important;">
        <div class="ni_image"><img src="@Url.Action("ViewImage", "Image", new {path = "${Thumbnail.Path}"})" alt="${Title}" /></div>

    </div>

</script> 
```

我正在尝试在页面上渲染图像，为此我必须将缩略图路径传递给图像控制器。

Jquery tmpl 不喜欢它。

我怎样才能解决这个问题？

有关背景，请参阅： [将 div 替换为 JSON 调用中的内容](https://stackoverflow.com/questions/13848471/replace-divs-with-content-from-json-call)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:47:05.447

该问题是由混合服务器代码 (Razor) 和客户端代码引起的。

您正在使用 Razor（在服务器上）创建链接，但为了创建链接，您需要Razor 无法访问`path`的字段（客户端）中的值。`${Thumbnail.Path}`

为了帮助您提出解决方案，我需要更多地了解您的代码。

# intellij-idea - IntelliJ“忽略的文件”和 .gitignore 有什么区别

> ID：13851160
> 
> 赞同：6
> 
> 时间：2012-12-13T00:37:23.607
> 
> 标签：intellij-idea, gitignore

IntelliJ 为[“忽略的文件”](http://www.jetbrains.com/idea/webhelp/ignored-files.html)提供了一个对话框，它不会从我的基本目录中的 .gitignore 文件中提取数据。是否应该使用忽略文件对话框？它会在任何地方创建一个 .gitignore 文件吗？我正在阅读[本教程](http://wiki.jetbrains.net/intellij/Using_Git_Locally)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T02:32:32.093

此对话框仅在使用 IDEA 时将忽略文件，而`.gitignore`应用于全局排除文件，无论是从 IDEA 还是从命令行使用版本控制时`git`。

此对话框不会创建`.gitignore`.

# c - 用 C 处理“JACK 音频”数据？

> ID：13851163
> 
> 赞同：0
> 
> 时间：2012-12-13T00:37:46.320
> 
> 标签：c, audio, jack

我的问题有点抽象，但有充分的理由。我已经成功运行了一个用 C 编写的 JACK 脚本，它将麦克风音频数据循环到扬声器，但是我想知道如何在播放过程中改变我自己的音频流，也许我想尝试的一件事是过滤高（或低）频率（完全切断它们）。据我了解，音频以模拟信号的形式出现并转换为数字值（在一定范围内）。

我猜我被迫采用两种方法中的一种，我认为一种方法是处理每个值并检查它是否低于我不想要的频率（或高于频率），然后将值更改为0（或上一个循环周期的前一个值，以防止播放期间音频中出现空白点）。我猜测的第二种方式是 JACK 为缓冲区提供了由频谱分配的完整值数组。我该怎么做呢？（将来我想用原始数据做其他事情，但我认为这是熟悉原始音频处理的一个很好的开始）

**这是我的简化代码： http:** [//pastebin.com/Hmiumqkz](http://pastebin.com/Hmiumqkz) 你可以看到我尝试打印*in*值，因为它应该是一个“浮点数”，我想我可以从那里过滤频率，但我不是当然，当我运行此代码时，我没有在控制台中打印任何内容，它只是将麦克风循环回扬声器，但没有任何打印到控制台.....

注意：我已经成功编译和测试了使用 Gstreamer、ALSA、NAudio、irrKang 和 Phonon 库的程序，它们不允许我在操作系统和我需要的原始音频数据之间具有交叉兼容性项目，我所要求的只是在懒惰地报告我使用“其他库”之前请三思而后行，只是为了“更容易”，但我已经尝试过它们，但它们都让我失望了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:55:42.837

您还没有真正提出可以在 SO 上回答的问题，所以我将向您指出一些外部资源。

这是一个基于流行的[RBJ 滤波器](http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt)设计 EQ 的教程：

[http://blog.bjornroche.com/2012/08/basic-audio-eqs.html](http://blog.bjornroche.com/2012/08/basic-audio-eqs.html)

其中大部分是用类似 C 的伪代码编写的，并将逐步引导您完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T06:09:19.870

这是正确的答案（您会注意到 proccess(){} 回调函数中的 printf() 函数）for 循环打印出缓冲区中的当前帧（频域但 for() 循环正在打印时间，所以它也是时域——它的频率和时间）

[http://pastebin.com/axDLw7cc](http://pastebin.com/axDLw7cc)

# c# - 如何从 txt 文件中正确读取瑞典语字符

> ID：13851173
> 
> 赞同：10
> 
> 时间：2012-12-13T00:39:07.620
> 
> 标签：c#, file, encoding, character-encoding, stream

我正在读取一个文件（逐行），其中包含像 äåö 这样的瑞典语字符，但我如何才能读取和保存带有瑞典语字符的字符串。这是我的代码，我使用的是 UTF8 编码：

```
TextReader tr = new StreamReader(@"c:\testfile.txt", System.Text.Encoding.UTF8, true);
tr.ReadLine() //returns a string but Swedish characters are not appearing correctly... 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-13T01:03:16.287

您需要将 System.Text.Encoding.UTF8 更改为 System.Text.Encoding.GetEncoding(1252)。见下文

```
 System.IO.TextReader tr = new System.IO.StreamReader(@"c:\testfile.txt", System.Text.Encoding.GetEncoding(1252), true);
        tr.ReadLine(); //returns a string but Swedish characters are not appearing correctly 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:01:17.607

我自己想通了，即`System.Text.Encoding.Default`支持瑞典字符。

```
TextReader tr = new StreamReader(@"c:\testfile.txt", System.Text.Encoding.Default, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-17T08:31:40.757

`System.Text.Encoding.UTF8`应该足够了，它在 .NET Framework 和 .NET Core 上都受支持[https://docs.microsoft.com/en-us/dotnet/api/system.text.encoding?redirectedfrom=MSDN&view=netframework-4.8](https://docs.microsoft.com/en-us/dotnet/api/system.text.encoding?redirectedfrom=MSDN&view=netframework-4.8)

如果您仍然对 �� 字符（而不是 ÅÖÄ）有问题，请检查源文件 - 它有什么样的编码？也许是**ANSI**，那么你必须转换为**UTF8**。

你可以在记事本++中做到这一点。您可以打开文本文件并转到*Encoding - Convert to UTF-8*。

或者在源代码（C#）中：

```
var myString = Encoding.UTF8.GetString(File.ReadAllBytes(pathToTheTextFile)); 
```

# ios-simulator - 我的模拟器快疯了。模拟器比例不同，然后 ViewController 和文本已损坏

> ID：13851177
> 
> 赞同：0
> 
> 时间：2012-12-13T00:39:52.980
> 
> 标签：ios-simulator

为什么？

![第一次尝试](../Images/c0590cfcc811a175e6d069428b436b3f.png)

有时是这样的： ![几分钟后](../Images/e6d07db2fc523aaae9acecf8e6582ff8.png)

它是一个错误吗？有解决办法吗？我只是将一个按钮和一个文本字段拖到视图控制器。

![还有一个错误](../Images/7c80170bd26f03292c1e8947a7dec2de.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:44:19.930

这很奇怪，我想到的东西很少

*   检查您是否使用自动布局或“自动调整子视图大小”
*   检查您是否以编程方式进行任何布局
*   检查您是否使用纵向/横向

我怀疑这是一个错误，这么明显的问题现在已经解决了

# wix - 升级不会更新 VirtualStore 文件

> ID：13851181
> 
> 赞同：1
> 
> 时间：2012-12-13T00:40:22.953
> 
> 标签：wix

如果启用了 UAC，我有一个安装程序必须以提升的管理员权限运行。这工作正常。当我升级应用程序（使用 MajorUpgrade 元素）时，应用程序会被正确卸载并重新安装。

在运行时，应用程序尝试更改程序文件文件夹中的一些文件，这些文件将它们的项目复制到用户虚拟存储中。这些在卸载过程中不会被删除。

在升级/重新安装过程中，是否有正确的方法来删除 VirtualStore 中所有用户的应用程序文件副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:51:33.420

根据谁和何时编写它们的定义，放置到虚拟存储中的文件是每个用户的数据文件。此类文件通常不应在卸载期间删除。如果所讨论的文件实际上不是每个用户的数据文件，那么导致它们被写入的应用程序应该被修复为写入适当的位置，以受控方式更新它们，甚至根本不写入它们。

# php - 从 PHP 中的一个 sql 请求接收多列

> ID：13851187
> 
> 赞同：0
> 
> 时间：2012-12-13T00:40:54.573
> 
> 标签：php, mysql, mysqli

我正在开发一个朋友列表功能，但我不知道如何正确接收这些值。

我的代码如下所示：

```
$getuid = $mysqli->prepare("SELECT `uid` FROM `users` WHERE  name = ? OR name = ?");
$getuid->bind_param("ss", $user, $friend);
$getuid->execute();
$getuid->bind_result($uid);
$getuid->fetch();
$getuid->close();
$resetpass = $mysqli->prepare("INSERT INTO `friendlist` SET `friend1`=?, `friend2`=?, `accept`=0");
$resetpass->bind_param("ss", $uid[0], $uid[1]); 
```

通过第一个查询，我得到了两个 uid 值。我想在第二个查询中使用它们。似乎`bind_result`不起作用，无论是作为数组还是在`bind_result`. 如何使用 mysqli 执行此操作。我不能使用`get_result`，因为我在 PHP 5.2 上。

任何人都可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:51:07.547

我想你需要这样的东西。我还没有测试过，可能有更好的方法来做到这一点。我刚刚尝试了我可以对您的原始代码进行的最快更改以使其正常工作。

```
$query = "SELECT uid FROM users WHERE  name = '".$user."' OR name = '".$friend."'";
$getuid = $mysqli->query($query);
if($uid = $getuid->fetch_assoc())
    {
    $query = "INSERT INTO friendlist SET friend1= '".$uid['uid'][0]."', friend2='".$uid['uid'][1]."', accept=0";
    $mysqli->query($query)
    }
$getuid->close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:31:49.207

好的，我终于理解了 fetch 的概念。

为了接收所有值，我必须在 while 循环中检索它们。

这是解决方案：

```
$getuid = $mysqli->prepare("SELECT `uid` FROM `users` WHERE  name = ? OR name = ?");
$getuid->bind_param("ss", $user, $friend);
$arra = array();
$getuid->execute();
$getuid->bind_result($uid);
while ($getuid->fetch()) {
    $arra[] = $uid;
} 
```

`$arra[0]`现在我可以使用和调用数组值`$arra[1]`

# awk - if else 代码中的 csh awk 语法错误

> ID：13851190
> 
> 赞同：2
> 
> 时间：2012-12-13T00:41:28.927
> 
> 标签：awk, csh

我有以下脚本：

```
#!/bin/csh
echo "jones 2143 78 84 77" >! student-marks
echo "Gondrol 2243 88 94 87" >> student-marks

awk '{
if ($3 >=35 && $4 >= 35 && $5 >= 35)
    print $0,"=>","Pass";
else
    print $0,"=>","Fail";
}' student-marks 
```

我直接从 URL [http://www.thegeekstuff.com/2010/02/awk-conditional-statements/复制](http://www.thegeekstuff.com/2010/02/awk-conditional-statements/)

作为一个例子来学习如何在 awk 中使用 if else 逻辑。不幸的是，我不断收到错误 Unmatched ' 任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:59:37.690

[DigitalRoss](https://stackoverflow.com/users/140740/digitalross)是正确的，csh 处理多行引用字符串的方式与 POSIX shell 不同，并且使用`sh`or`bash`可能更容易。 `csh`通常被认为是一个糟糕的脚本选择（尽管有些人更喜欢它，特别是在它的`tcsh`变体中，用于交互使用）。

有关使用for 脚本编写问题的讨论，请参阅[“Csh Programming Considered Harmful” 。](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/)`csh`

但是可以使用 csh 做你想做的事。您只需要在多行引用字符串中的每一行末尾添加一个反斜杠：

```
#!/bin/csh -f
echo "jones 2143 78 84 77" >! student-marks
echo "Gondrol 2243 88 94 87" >> student-marks

awk '{\
if ($3 >=35 && $4 >= 35 && $5 >= 35)\
    print $0,"=>","Pass";\
else\
    print $0,"=>","Fail";\
}' student-marks 
```

输出：

```
jones 2143 78 84 77 => Pass
Gondrol 2243 88 94 87 => Pass 
```

我又偷偷做了一个小改动：将`-f`选项添加到该`#!`行。这可以防止`csh`加载任何资源或启动文件，因此脚本 (a) 将启动得更快一些，并且 (b) 将避免意外依赖您自己的文件`.cshrc`和`.login`文件。（这*不适*用于`sh`和`bash`脚本；对于那些 shell，该`-f`选项具有完全不同的含义。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T00:47:14.020

更改`csh`为`sh`或`bash`。

```
#!/bin/sh
... 
```

Csh 不像 Posix shell 那样处理多行引用的字符串。

# java - 你如何用java下载一个jar文件？

> ID：13851193
> 
> 赞同：0
> 
> 时间：2012-12-13T00:41:37.023
> 
> 标签：java, networking, download

我正在尝试在我的程序中实现更新功能。如果有可用更新，则必须下载一个（如果不是多个）不同的 .jar 文件。我在开发下载这些文件的方法时遇到问题。我查看了 URLConnection API 以及与此相关的其他 API。我可以毫无问题地下载常规文本文件，但是当我需要下载 jar 文件时，它就无法下载。没有抛出错误，只是没有传输数据。

如果有人能指出正确的方向来成功下载 jar 文件，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:47:56.447

JAR 文件本身并没有什么特别之处。像任何其他文件一样传输它（FileInputStream -> SocketOutputStream: SocketInputStream->FileOutputStream）。诀窍是在`ClassLoader`将 JAR 保存到磁盘后，使用 将类链接到正在运行的程序中。

# java - GWT - HTML 小部件 - 如何不换行

> ID：13851196
> 
> 赞同：0
> 
> 时间：2012-12-13T00:41:53.293
> 
> 标签：java, swing, gwt

我刚刚遇到了一个关于 HTML 小部件的有趣的事情。事情是...

如果**每行的字长太长，**那么 HTML 小部件会变得更宽，无法将其全部放入

所以我的问题是......是否有可能让 HTML 小部件将长词**切成小块**而不是使其本身变得更宽？

与 Swing 相比，我的意思是当自动换行关闭时 JTextArea 之类的效果（见图）

![在此处输入图像描述](../Images/f7422681a3ea2223f9a3c8530bce984f.png)

* * *

**编辑**

我尝试在`word-break: break-all;`这里使用 css 是代码：

复合代码：

```
public MyTestUI(){//constructor

 html.setStyleName("my-test");
}

public void setLongWord(String word)//method
{
  html.setHTML(word);
} 
```

css

```
.my-test {
color:gray;
font-family:verdana;
white-space: normal;
word-break: break-all;
} 
```

... css 在 Chrome 中有效，但在 FF 中无效 :( 如何使这个词打破跨浏览器一个？

*   GWT 2.3 版

非常感谢任何有用的评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:27:14.120

`word-wrap:break-word`使用以下链接中描述的CSS 属性。即使 HTML 小部件具有静态高度和宽度，这也将起作用。

[http://www.w3schools.com/cssref/css3_pr_word-wrap.asp](http://www.w3schools.com/cssref/css3_pr_word-wrap.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T01:09:27.783

将 CSS 样式添加到您的 HTML 小部件以打破长字：

[http://www.w3schools.com/cssref/css3_pr_word-break.asp](http://www.w3schools.com/cssref/css3_pr_word-break.asp)

编辑：

我保持正确：自动换行是更好的选择。看更多：

[CSS中的“word-break：break-all”与“word-wrap：break-word”有什么区别](https://stackoverflow.com/questions/1795109/what-is-the-difference-between-word-break-break-all-versus-word-wrap-break)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T04:31:02.583

使用 CSS 属性`word-break:normal;`或尝试`word-break:hyphenate;`

# jquery - 而不是更改选择标签javascript插入模板的动态选择

> ID：13851200
> 
> 赞同：0
> 
> 时间：2012-12-13T00:42:39.287
> 
> 标签：jquery, ruby-on-rails, ajax, html-select

我正在尝试创建动态选择，它开始以某种奇怪的方式工作。javascript 插入模板 html 的内容，而不是 select 标签的新选项

index.html.erb

```
 <%= collection_select(nil, :site_id,  @sites,  :id, :name, {:prompt   => "Select a Site"}, { :id => "sites_select"}) %>
                                <br/>
                        <%= collection_select(nil, :floor_id, @floors, :id, :name, {:prompt   => "Select a Floor"}, {:id => "floors_select"}) %>
                        <br/>
                        <%= collection_select(nil, :pod_id, @pods, :id, :name, {:prompt   => "Select a pod"}, {:id => "pods_select"}) %>
                        <script>
                              $(document).ready(function() {
                               $("#sites_select").change(function(){
                                        $.ajax({
                                          url: "#{update_floors_path}",
                                          //orther options ...
                                          success: function(data){
                                              site_id : $('#sites_select').val()
                                              $("#floors_select").html(data);
                                          }
                                        });

                                    });
                                $("#floors_select").change(function(){
                                        $.ajax({
                                          url: "#{update_pods_path}",
                                          //orther options ...
                                          success: function(data){
                                              floor_id : $('#floors_select').val()
                                              $("#pods_select").html(data);
                                          }
                                        });

                                    });

                              });
                            </script> 
```

来源：

```
 <select id="floors_select" name="[floor_id]">

   <title>ELS Reservation Tool</title>
  <link href="/assets/style.css?body=1" media="screen" rel="stylesheet" type="text/css">

 <meta content="authenticity_token" name="csrf-param">
<meta content="3F+WpxiRZx+7u9POFOgeRHZ0QlhMrs3ccLnvUgjodio=" name="csrf-token"> etc... 
```

devices_controller.rb

```
 #for dynamic select
   def update_floors
    # updates floors and pods based on genre selected
    site = Site.find(params[:site_id])
    # map to name and id for use in our options_for_select
    @floors = site.floors.map{|a| [a.name, a.id]}.insert(0, "Select a Floor")
    @pods   = site.pods.map{|s| [s.name, s.id]}.insert(0, "Select a Pod")

    respond_to do |format|
         format.js
        end 
  end

   def update_pods
    # updates pods based on floor selected
    floor = Floor.find(params[:floor_id])
    @pods =floor.pods.map{|s| [s.name, s.id]}.insert(0, "Select a Pod")

        respond_to do |format|
             format.js
            end 
  end

    <title>ELS Reservation Tool</title>
    <meta http-equiv="refresh" content="10000; URL=http://els-hq-reserve:3000/">
    <link href="/assets/style.css?body=1" media="all" rel="stylesheet" type="text/css">

    <meta content="authenticity_token" name="csrf-param">
    <meta content="3F+WpxiRZx+7u9POFOgeRHZ0QlhMrs3ccLnvUgjodio=" name="csrf-token">

    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <div id="header">
      <img src="/images/elspmrt.png">     
    </div>
    <div id="navigation">
        <ul>
            <li><a href="#">Saved Views</a></li>
            <li><a href="#">Power Group</a></li>
            <li><a href="#">Reserved</a></li>

        </ul>
    </div>
      <div id="content-container1">

    <div id="content">
    <div class="container">
      <h2>Search</h2>

              <form accept-charset="UTF-8" action="/devices" method="get"><div         style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
              <label for="label">Super Search:</label>
                    <input id="superstring" name="superstring" type="text">

              <input name="commit" type="submit" value="Search">

</form> 
```

路线.rb

```
 get 'devices/update_floors', :as => 'update_floors'
      get 'devices/update_pods', :as => 'update_pods'
      root :to => "devices#index" 
```

update_floors.js.erb

```
# app/views/devices/update_floors.js.erb
$('#floors_select').html("#{escape_javascript(options_for_select(@floors))}");
$('#pods_select').html("#{escape_javascript(options_for_select(@pods))}"); 
```

update_pods.js.erb

```
# app/views/home/update_pods.js.erb
$('#pods_select').html("<%= escape_javascript(options_for_select(@pods)) %>"); 
```

任何建议将不胜感激，谢谢你，D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:04:07.020

我在您的代码中看到了多个问题，我不知道您是否为了举例而更改了您必须编辑的实际代码，但它令人困惑，例如，

```
url: "#{update_pods_path}", 
```

不应该工作，因为它似乎不在红宝石块内，你应该这样做

```
url: "<%= update_pods_path %>", 
```

除非有什么我想念的。无论如何，除了所有其他可能的问题：

根本问题的答案是您请求的 url 错误。当你这样做时：

```
$.ajax({ 
```

在 jquery 中，它只是对您传递的 url 路径执行获取请求。您需要通过以下方式指定它是 jQuery 中的 JS 请求：

```
$.getScript(url, function(data, textStatus, jqxhr) {

}); 
```

此外，除非您请求 JSON，或者您实际上想要原始 html（仅当您直接从控制器渲染 html 部分），您不应该对响应做任何事情，JS 响应应该替换或更新视图直接地。它只是直接返回 myresponse.js.erb 文件中的 javascript，然后在页面上执行。-- 以下内容应该是您所需要的：

```
$.getScript(url); 
```

您的 JS 响应应该对您的页面进行更改。看起来像你的

```
update_pods.js.erb
$('#pods_select').html("<%= escape_javascript(options_for_select(@pods)) %>"); 
```

写得正确，楼层需要更新以匹配后者。

# java - 如何将变量设置为等于word文档中的文本

> ID：13851202
> 
> 赞同：0
> 
> 时间：2012-12-13T00:42:50.593
> 
> 标签：java, string, variables

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:40:51.853

好的，所以根据您的编辑，您正在使用文本文件而不是 word 文件（两个非常不同的东西；））

这很简单，您只需使用扫描仪类：

```
 File file = new File("data.txt");

    String s = new String();
    try{
        Scanner sc = new Scanner(file);

        while (sc.hasNextLine()) {
            s += sc.nextLine();
        }

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } 
```

现在请记住，如果您一次只想要文本文件中的一行（我不知道您要查找的是什么，或者数据是什么样的），那么您更有可能想要存储您的数据作为字符串数组或链表

# octave - 八度：我可以打印结构的格式吗？

> ID：13851205
> 
> 赞同：1
> 
> 时间：2012-12-13T00:42:58.957
> 
> 标签：octave

我可以在命令行上探索一个结构，比如，

```
octave:1> fieldnames(data)
ans = 
{
  [1,1] = training
  [2,1] = validation
  [3,1] = test
}
octave:2> fieldnames(data.training)
ans = 
{
  [1,1] = inputs
  [2,1] = targets
} 
```

但是，有什么办法可以倾倒整个结构吗？我正在设想某种输出，例如，

```
data :: struct
   training :: struct
       inputs :: 256x1000 double
... 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:55:44.250

Take a look at [Basic Usage & Examples](http://www.gnu.org/software/octave/doc/interpreter/Basic-Usage-and-Examples.html) where it says

> Note that when Octave prints the value of a structure that contains other structures, only a few levels are displayed. [...] This prevents long and confusing output from large deeply nested structures. The number of levels to print for nested structures may be set with the function `struct_levels_to_print`, and the function `print_struct_array_contents` may be used to enable printing of the contents of structure arrays.

# mapreduce - 模拟 Map Reduce 环境

> ID：13851211
> 
> 赞同：0
> 
> 时间：2012-12-13T00:44:13.357
> 
> 标签：mapreduce, processing

为了设计一些算法，我需要模拟 map-reduce 环境。我假设我有几个工作，每个工作都由一组 map 和 reduce 任务组成。我必须对地图的处理时间和减少任务做出假设。例如作业“j1”有 3 个 map 任务和 2 个 reduce 任务。现在map任务和reduce任务的处理时间有什么限制吗？通常情况如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:43:11.000

如果不知道你的 map 和 reduce 任务是做什么的，就很难做出任何假设。map 或 reduce 任务的处理时间完全取决于您希望他们做什么，您不能真正做出笼统的假设。

例如，您的个人地图功能可能正在处理单个文件作为输入，或单个行或单个单词，所有这些都直接影响处理时间。

减速机同理；它可以做很多处理，少量处理，甚至根本不处理。（使用 Hadoop 的 MapReduce 实现，您甚至不必为您的 MapReduce 任务使用 reducer，这证明了处理量不同的事实）。这仅取决于单个任务的要求。

如果您知道模拟的 MapReduce 作业实际上会做什么，您可以使用它来确定不同任务的一般处理时间将彼此比较。

# c - ioctl - 无效参数

> ID：13851212
> 
> 赞同：0
> 
> 时间：2012-12-13T00:44:19.640
> 
> 标签：c, linux, driver

我有

```
#define IOCTL_ALLOC_MSG _IO(MAJOR_NUM, 0) 
#define IOCTL_DEALLOC_MSG _IO(MAJOR_NUM, 1) 
```

在头文件中。

在我写的驱动文件中：

```
struct file_operations memory_fops = {
  unlocked_ioctl: device_ioctl,
  open: memory_open,
  release: memory_release
};

int memory_init(void) {
  int result;

  /* Registering device */
  result = register_chrdev(MAJOR_NUM, "memory", &memory_fops);
  if (result < 0) {
    printk("<1>memory: cannot obtain major number %d\n", MAJOR_NUM);
    return result;
  }

  allocfunc();

  printk("<1>Inserting memory module\n");
  return 0;

}

int device_ioctl(struct inode *inode,   /* see include/linux/fs.h */
         struct file *file, /* ditto */
         unsigned int ioctl_num,    /* number and param for ioctl */
         unsigned long ioctl_param)
{
    /* 
     * Switch according to the ioctl called 
     */
    printk ( "<l> inside ioctl \n" );
    switch (ioctl_num) {
    case IOCTL_ALLOC_MSG:
        allocfunc();
        break;
    case IOCTL_DEALLOC_MSG:
        deallocfunc();
        break;
    }

    return 0;
} 
```

我创建了像这样的字符文件

```
mknod /dev/memory c 60 0 
```

应用调用失败

```
int main(int argc, char *argv[]) {
    FILE * memfile;

    /* Opening the device parlelport */
    memfile=fopen("memory","r+");
    if ( memfile <0) {
        printf ( " cant open file \n");
        return -1;
    }

    /* We remove the buffer from the file i/o */
    int ret_val;
    if ( argc > 1 ) {
        if ( strcmp (argv[1], "mem" ) ==0 ) {

            ret_val = ioctl(memfile, IOCTL_ALLOC_MSG);

            if (ret_val < 0) {
                printf("ioctl failed. Return code: %d, meaning: %s\n", ret_val, strerror(errno));
                return -1;
            }
        } 
```

当我运行应用程序时，我得到“ioctl 失败。返回代码：-1，意思是：无效参数”在：strerror(errno)

打印：

```
Inserting memory module 
```

仅供参考，我尝试了“/dev/memory”“memory”不同的名称和主要数字组合 - 但徒劳无功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T03:11:25.230

您将 a 传递`FILE*`给`ioctl()`函数，而它需要一个文件描述符，即`int`.

它至少应该产生一个很大的警告，说您正在将指针转换为没有强制转换的整数，不是吗？

有两个明显的解决方案：

1.  使用该`fileno()`函数从`FILE*`. 它应该是类似的东西`ioctl(fileno(memfile), IOCTL_ALLOC_MSG)`。
2.  使用`open()`而不是`fopen()`. 如果您正在编写低级代码，这是首选的解决方案，因为您避免了附加的抽象层`FILE*`（所有缓冲的东西等等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:48:41.700

我将假设更改`fopen("memory")`为`fopen("/dev/memory1")`将解决您的代码的初始问题。

@SunEric 还在对您的问题的评论中指出，您`allocFunc()`在驱动程序的初始化函数 ( `memory_init()`) 中有一个调用，但这似乎是您想要`IOCTL_ALLOC_MSG`做的。这很可能是您需要解决的下一个问题。

# opengl - opengl 不要在渲染中调用 glClear()

> ID：13851214
> 
> 赞同：0
> 
> 时间：2012-12-13T00:44:29.103
> 
> 标签：opengl, jogl

每次渲染时，我都会越来越多地绘制 GLUT 基元。为了让事情变得更快，我决定不每次都清除，只是放入新的原语。那是错的吗？

当我这样做时，我眨了眨眼。放置 sleep() 表明一帧是好的，第二帧是空的，依此类推。

编辑：执行一次的渲染（显示）中的简短代码（我使用Java的JOGL）：

```
gl.glPushMatrix(); 
gl.glColor3f(1, 1, 0);
gl.glTranslatef(0, 0, 0);
glut.glutSolidCube(10);
gl.glPopMatrix();
drawable.swapBuffers(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:32:08.167

肯定是空的。当你清除时，你清除了前缓冲帧。然后，当调用后缓冲帧的 swapBuffers() 变为前，同时你的东西正在被绘制到前缓冲帧，它刚刚变成后缓冲帧。然后，当后缓冲帧完成时，缓冲区交换完成（由对 swapBuffers() 的调用触发。这就是双缓冲的工作原理。如果你不清除帧颜色，你会累积你的绘图随着时间的推移在前端缓冲区中，我不确定这是理想的结果。在每个渲染循环开始时清除一次前端缓冲区对性能影响不大。当您频繁调用 glClear() 时会出现问题，就像之前调用它一样每个对象绘制也没有意义，因为在这种情况下，您只会看到最后绘制的对象。对于闪烁 - 你应该更详细地描述你是如何做到这一切的。从你的例子中，不清楚它为什么会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:17:30.857

```
gl.glDisable(GL_DEPTH_TEST); 
```

?

如果没有看到更多代码，很难说。

当我在 openGL 代码中得到意想不到的结果时，我会在脑海中浏览状态可能性列表并将它们设置为启用或禁用：

*   深度测试
*   纹理
*   灯光
*   混合
*   剔除
*   帧缓冲区
*   着色器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T08:31:32.947

Swapbuffers(HDC) 实际上并不复制缓冲区的内容，而只是交换前后缓冲区，这就是为什么你看到每个奇数帧，但看不到偶数帧的原因。

# php - 删除重复的 MySQL 查询结果？

> ID：13851220
> 
> 赞同：2
> 
> 时间：2012-12-13T00:45:35.180
> 
> 标签：php, mysql, sql, duplicates

我正在使用 SELECT COUNT 检查我的 mysql 表是否有任何重复项，如果有，我希望它删除重复项。

这是查询结果的截图：http: [//s.prelicio.us/lDyRV.png](http://s.prelicio.us/lDyRV.png)

现在我的桌子上有 2 个“Aanpassingen voor 网站 Chat-Garden”。这是正确的，所以我计算了“Aantal”所在的位置，它会告诉我“Aanpassingen voor website Chat-Garden”有多少行。

但现在我希望它删除我的屏幕截图中的重复行，因为“2”已经显示在“Aantal”。然后我不需要屏幕截图中的额外行。（对不起我的英语不好）

这是当前代码：

```
<?php 

$products = mysql_query('SELECT * FROM `preo_invoices-products`');
if(!$products || mysql_num_rows($products) == '0') echo '<li>Er zijn geen producten voor dit factuur.</li>'; 

else $i == '0'; while($product = mysql_fetch_object($products)) {

$color = ($i % 2 == 0) ? ' class="grey"' : ''; $i++;

$result = mysql_query('SELECT *, COUNT(`id`) FROM `preo_invoices-products` WHERE `invoiceid` = "'.$paid->id.'" GROUP BY `description`');
while($row = mysql_fetch_array($result)) { 

?>

<li<?php echo $color; ?>>

<span class="inv9"><?php echo $row['COUNT(`id`)']; ?></span> // This one is the 'Aantal' where it shows 2
<span class="inv3">

<?php 
$services = mysql_query('SELECT * FROM `preo_services` WHERE `id` = "'.$product->serviceid.'" LIMIT 1');
while($service = mysql_fetch_object($services)) echo strtoupper($service->name); 
?>

</span>
<span class="inv14"><?php echo $product->description; ?></span>
<span class="inv9"><?php echo $product->tax; ?>%</span>
<span class="inv12">&euro;<?php echo $product->sum; ?>,-</span>
<span class="inv15">&euro;<?php echo $product->sum*$row['COUNT(`id`)']; } ?>,-</span>

</li>

<?php } ?> 
```

它现在实际上必须删除重复的行，因为“Aantal”显示我有一个重复的行。但是当我有 3 行相同的行时，它会在 Aantal 显示“3”，并且仍然必须在我的屏幕截图中显示 1 行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T00:47:05.007

您可以`DISTINCT`在查询中添加，例如

```
SELECT DISTINCT * FROM tableName 
```

# php - Apache RewriteRule 规则

> ID：13851226
> 
> 赞同：2
> 
> 时间：2012-12-13T00:46:01.950
> 
> 标签：php, apache, .htaccess

好吧，我放弃了。我只是不能完全围绕 apache 重写，我已经查看了很多 stackoverflow 建议，但对我来说似乎没有任何意义。

所以，我有一个脚本，当前基于 www.example.com/index.php?article=some-article-name 呈现内容

但是，我希望用户认为该页面是`www.example.com/section/some-article-name`

我试过使用类似的东西

```
# Turn on URL rewriting
RewriteEngine On
RewriteRule ^/section/([a-zA-Z0-9\-]+)$ index.php?article=$1 
```

由于所有这些人的指导，我找到了答案。

```
RewriteRule ^section/([a-zA-Z0-9]+)$ test.php?article=$1
RewriteRule ^section/([a-zA-Z0-9]+)/$ test.php?article=$1 
```

您需要同时处理 2 种不同类型的请求，最后带有 / 的请求和不带 / 的请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:56:08.720

您可能想要一个更简单的规则，例如。

```
 RewriteRule ^/section/(.*) index.php?article=$1 
```

像这样的名字`some-article-name`会失败，因为你不会匹配连字符。如果您想要有限的正则表达式，请尝试以下操作：

```
 RewriteRule ^/section/([-_.a-zA-Z0-9]+)$ index.php?article=$1 
```

这将匹配 ASCII 字母数字字符以及最可能出现在名称中的标点符号。

如果传入请求中有参数，这些规则中的任何一个都将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:55:45.687

你的正则表达式是如此接近。您有一个捕获组`([a-zA-Z0-9]+)`正在寻找一个或多个小写字母、大写字母和/或数字，但它不寻找的是连字符。试试这个：

```
RewriteRule ^/section/([a-zA-Z0-9\-]+)$ index.php?article=$1 
```

因为连字符在正则表达式中具有特殊意义，所以您需要对其进行转义。

# python - 如何在 django 中将请求从一个项目转发到另一个项目

> ID：13851235
> 
> 赞同：0
> 
> 时间：2012-12-13T00:47:10.680
> 
> 标签：python, django

我有一个 Django 项目 A，目前有 2 个应用程序。一个是水果应用程序，另一个是身份验证应用程序。当用户登录 时`http://myip/auth/login`，将根据成功或不成功的尝试显示登录消息。然后用户可以访问`http://myip/auth/fruits`哪个显示系统中的所有水果。

还有另一个独立的 Django 项目 B，它是由另一位处理蔬菜的作者编写的。我希望我的项目充当具有更多应用程序的蔬菜项目的代理。当用户请求`http://myip/auth/vegetables`时，我希望我的应用程序将请求转发到另一个项目中的蔬菜应用程序。

请注意，这是两个不同的项目，它们有两个不同的设置文件。项目 A 连接到 2 个数据库，项目 B 连接到一个。他们都是不同的。

请告诉我如何实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:53:58.850

[如果您只对重定向感兴趣，您可以使用包含HttpResponseRedirect](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseRedirect)的内置[`redirect`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)函数

```
from django.shortcuts import redirect
def my_view(request):
    ...
    return redirect('http://myip/auth/vegetables') 
```

# git - GIT - msysgit 不会要求输入密码

> ID：13851237
> 
> 赞同：0
> 
> 时间：2012-12-13T00:47:14.177
> 
> 标签：git, ssh, msysgit

我有一个远程 GIT 存储库（ubuntu），并且在 Windows 7 上本地工作。我的工作很好，并设置了 SSH 密钥。在这个过程中的某个时刻，我似乎禁用了 GIT/msysgit 询问密码。我现在有一个没有密钥设置的新远程 git repo（在 ubuntu 上），它不会询问我的密码。我试过了

`git clone ssh://<user>:<pass>@<ip>:<myport>/mygitrepopath`

它也不起作用。但我可以使用具有相同凭据的 putty 登录。

**编辑**

这是我收到的信息

```
Cloning into 'myhub'...
The server's host key is not cached in the registry. You
have no guarantee that the server is the computer you
think it is.
The server's rsa2 key fingerprint is:
ssh-rsa blah blah blah
Connection abandoned.
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:41:15.853

我认为您不会使用`ssh://`URL `user:password@host`。

如果删除您的`known_hosts`文件不起作用（`rm ~/.ssh/known_hosts`），请尝试将该`ssh-rsa blah blah blah`行添加到该文件（如果您刚刚删除它，请创建它，他）。

那应该有帮助。

应该有一个选项可以让 git/ssh 不中止与未知主机的连接，但我不知道。

# c++ - 在 c++ 和 c 之间传递数据

> ID：13851241
> 
> 赞同：-2
> 
> 时间：2012-12-13T00:47:42.600
> 
> 标签：c++, c

嗨，我有两个项目：一个从操纵杆获取数据，用 VC++ 编写；这些数据将通过 udp 发送到另一个程序客户端，该程序是用 C 语言编写的，带有编译器 gcc。

我试试这个代码：VC++

```
#include "stdafx.h"
#include <stdio.h>
 extern "C" int cfunc(int);

int main() {
  int result, y;

  y=5;
  result=cfunc(y);  /* by value */

  if (y==5 && result==6)
printf("It worked!\n");
return 0;
} 
```

但是当我用 Visual Studio 2010 编译它时，出现了一些错误：

```
Error 1 error LNK2019: unresolved external symbol _cfunc referenced in function _main
Error 2 error LNK1120: 1 unresolved externals 
```

和我的 C 代码：

```
#include <stdio.h>

cfunc(int newval)
{
  ++newval;
  return newval;
}

main()
{ 
 int y;
 cfunc(y);
 printf(" %i ",y);
 } 
```

可以编译

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:54:07.490

该错误可能是链接器错误，因为您尚未编译 C 代码文件，并且 C++ 代码链接依赖于已作为可链接对象存在的 C 代码。尝试先编译 C 文件，然后针对该目标文件使用 C++ 链接。

# xcode - 如何在 Cocos2D 中使用库

> ID：13851242
> 
> 赞同：0
> 
> 时间：2012-12-13T00:47:45.183
> 
> 标签：xcode, cocos2d-iphone

我正在尝试在[这里使用这个库](https://github.com/sneakyness/SneakyInput)

但我不确定如何将它与 cocos2D 集成。

有人能告诉我怎么做吗？

我正在尝试遵循这个答案：

[Cocos2d。数字操纵杆（手柄）？](https://stackoverflow.com/questions/9734793/cocos2d-digital-joystick-joypad)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:27:06.640

看看[这个](http://www.qcmat.com/sneakyinput-joystick-dpad-and-buttons-for-cocos2d/)。希望在链接上您能找到详细的必要用法。

# c++ - 无法在 MinGW 中捕获 bad_alloc

> ID：13851244
> 
> 赞同：4
> 
> 时间：2012-12-13T00:48:06.517
> 
> 标签：c++, exception, g++, mingw, try-catch

我正在为家庭作业编写一个程序，我需要分配许多对象来检查位置和性能等方面的东西。我似乎无法捕捉到抛出的异常`new`

```
#include "List.h"
#include<iostream>
#include <exception>

int main(int argc, char **argv) {
    cout << "size of List c++ : " << sizeof(List) << endl;  //16
    List * ptrList = new List();
    unsigned long var = 0;
    try {
        for (;; ++var) {
            List * ptrList2 = new  List();
            ptrList->next = ptrList2;
            ptrList2->previous = ptrList;
            ptrList = ptrList2;
        }
    } catch (bad_alloc const& e) {
        cout << "caught : " << e.what() << endl;
//  } catch (...) { //this won't work either
    } 
```

结果是 ：

> 此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。

如果我将分配部分更改为：

```
 List * ptrList2 = new (nothrow) List();
            if (!ptrList2) {
                cout << "out of memory - created " << var << " nodes" << endl;
                break;
            } 
```

我得到一个很好的：

```
out of memory - created 87921929 nodes 
```

为什么我抓不到`bad_alloc`？

我在 Windows 7 x64 Pro 上使用 mingwin

```
C:\Users\MrD>g++ --version
g++ (GCC) 4.7.2 
```

名单 ：

```
class List {
    long j;
public:
    List * next;
    List * previous;
    virtual long jj() {
        return this->j;
    }
    List() {
        next = previous = 0;
        j = 0;
    }
    virtual ~List() {
        if (next) {
            next->previous = this->previous;
        }
        if (previous) {
            previous->next = this->next;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:02:13.800

由于没有人自愿[我这样做了](http://mingw-users.1079350.n2.nabble.com/unable-to-catch-bad-alloc-td7579725.html)-尤其是 George Koehler 的一些`gdb`调试答案-似乎毕竟是一个错误，但~~在得到验证之前我不会接受我的答案~~ -厌倦了等待。

# nhibernate - 从集合中删除而不加载所有集合数据。混淆使用哪个集合映射

> ID：13851246
> 
> 赞同：1
> 
> 时间：2012-12-13T00:48:31.767
> 
> 标签：nhibernate, fluent-nhibernate

我在分配和用户之间有一个多对多的关系

尝试从作业中删除用户时，我看到所有用户都已加载到集合中。

我该如何避免呢？

```
public class User
{
  public virtual int Id { get; private set; }
  public virtual IList<Assignment> Assignments { get; set; }
}

public class Assignment
{
   public virtual int Id { get; private set; }
   public virtual ICollection<User> Users { get; set; }
} 
```

映射：

```
HasManyToMany(user => user.Assignments).Table("UserToAssignment").ParentKeyColumn("UserId").ChildKeyColumn("AssignmentId").Inverse().ExtraLazyLoad();  

HasManyToMany(productAssignment => productAssignment.Users).AsSet().Table("UserToAssignment").ParentKeyColumn("AssignmentId").ChildKeyColumn("UserId").LazyLoad(); 
```

调用代码：

```
assignment.Users.Remove(user) 
```

最初我使用 Bag 而不是 Set 进行分配映射，但是在更新它时，它正在删除然后重新插入 AssignmentsToUsers 表中的很多行。所以我改用Set。

但是现在我看到了使用 Set 的一个问题：它将所有数据都带入内存。

推荐的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:05:41.263

你无法避免这种情况，如果性能可以接受，我会忽略它。如果性能是一个问题，我可以想到三种方法来解决它：

1.  如果集合的另一端（User.Assignments）重量较轻，则改为从用户那里删除分配。
2.  对多对多表建模，直接删除对象。您必须确定不会在此之前加载用户集合，因为内存中的表示仍将包含已删除的记录。
3.  使用 SQL 直接删除 - 这与 #2 有相同的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:53:22.877

您还应该对 Assignment.Users 使用额外的惰性模式。

# wcf-data-services - 无法添加 WCF 数据服务引用

> ID：13851261
> 
> 赞同：1
> 
> 时间：2012-12-13T00:50:57.637
> 
> 标签：wcf-data-services

我可以使用浏览器通过 'http://localhost:57695/AgentDataService.svc 进行导航，但是当我尝试在我的解决方案中向控制台应用程序添加服务引用时，我收到错误消息：

下载“http://localhost:57695/AgentDataService.svc/_vti_bin/ListData.svc/$metadata”时出错。请求失败，HTTP 状态为 404：未找到。元数据包含无法解析的引用：

我不知道是什么原因造成的。

# ios - 在 MagicalRecord 中获取一对多关系

> ID：13851271
> 
> 赞同：0
> 
> 时间：2012-12-13T00:51:55.200
> 
> 标签：ios, core-data, magicalrecord

我正在使用 MagicalRecord，并且我有一对多的关系。说部门有很多员工。给定属性，在特定部门中查找特定员工的语法是什么。（获取多个属性，但其中之一是一对多关系）。

出于性能目的，我想避免从部门检索一组员工，并通过 for 循环手动搜索该数组......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:25:49.147

假设 Employee 有一个“employeeID”并且部门的逆对一关系和部门作为雇员与雇员有一对多关系

您应该能够做到以下几点：

```
Department * dept = [self getDepartmentManagedObjectFromCD];
NSString * employeeID = @"52";

[NSPredicate predicateWithFormat:@"employeeID == %@ && department == %@", employeeID, dept]; 
```

您实际上可以将部门对象作为搜索参数传递 - 我不经常使用 MagicalRecord，但您想要一个采用 NSPredicate 的 MR_findBy

# php - 带有消息“SQLSTATE [42000] 的 PDOException”：

> ID：13851273
> 
> 赞同：-2
> 
> 时间：2012-12-13T00:52:11.450
> 
> 标签：php, mysql, pdo

我收到以下错误：

```
Fatal error: Uncaught exception 'PDOException' with message 
'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error 
in your SQL syntax; 
```

但是，我无法解决。行号说它是 15 这是

```
$res->execute(array_values($params)); 
```

你能发现问题吗？

```
function fetchBgnew(array $conditions){ 
    $db = Core::getInstance();              
    $sql = "SELECT p.id, p.bg, p.bg_desc, p.bg_id, p.user_id, p.panel_id, p.domainurl, 
                   p.type, p.price 
              FROM ".USERS_BG." as p 
              left join ".USERS." as u on p.user_id=u.id WHERE u.status !=0 and 1 and";
    $params = array();
    foreach ($conditions as $column => $value) {
        if (preg_match('/^[a-z]+$/', $column)) {
            $sql .= "$column = ?";
            $params[] = $value;
            $sql .= "group by p.id desc, LIMIT 0,25";
        }
    }                
    $res = $db->dbh->prepare($sql);
    $res->execute(array_values($params));                
    $res->fetchAll(PDO::FETCH_ASSOC);

    $sql="SELECT p.id FROM ".USERS_BG." as p 
            left join ".USERS." as u on p.user_id=u.id WHERE u.status !=0 and";
    $params = array();
    foreach ($conditions as $column => $value) {
        if (preg_match('/^[a-z]+$/', $column)) {
            $sql .= "$column = ? group by p.id desc LIMIT 0,25";
            $params[] = $value;
        }
    }
    $cnt = $db->dbh->prepare($sql);
    $cnt->execute(array_values($params));           
    $cnt->rowCount();

    return $result = array("data"=>$res, "count"=>$cnt);
}
function fetchUser(array $conditions){       
    $db = Core::getInstance();
    $sql = "SELECT id FROM ruj_users_jel WHERE";
    $params = array();
    foreach ($conditions as $column => $value) {
        if (preg_match('/^[a-z]+$/', $column)) {
            $sql .= "$column = ?";
            $params[] = $value;
        }
    }

    $res = $db->dbh->prepare($sql);
    $res->execute(array_values($params));
    $numrows = $res->rowCount();

return $numrows;

}
$bgdataarr = fetchBgnew(array("p.status"=>'1'));

$bgdata = $bgdataarr['data'];

$page_title = "Home";
foreach($bgdata as $brag){
    print_r($bgdata[$i]['countjellys']=fetchUser(array('brag_id'=>$bg['id']))); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T00:57:36.220

看起来你忘记了空格。

```
$sql = "SELECT p.id,p.bg,p.bg_desc,p.bg_id,p.user_id, p.panel_id,p.domainurl,p.type,p.price FROM ".USERS_BG." as p left join ".USERS." as u on p.user_id=u.id WHERE u.status !=0 and 1 and";
...
$sql .= "$column = ?";
...
$sql .= "group by p.id desc, LIMIT 0,25"; 
```

这将导致如下语句`SELECT ... andcolumn =`（注意“and”和“column”之间缺少空格）

此外，您的`GROUP BY`语法不正确（DESC 后不应有逗号）并且再次缺少空格。想象一下如果你有两个字段会发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:04:09.763

除了@TomvanderWoerdt的（正确...）答案：您的sql语句无效，您只能`LIMIT`在末尾添加一个子句。

这同样适用于`GROUP BY`条款。

# c - libjpeg错误版本错误

> ID：13851274
> 
> 赞同：0
> 
> 时间：2012-12-13T00:52:21.133
> 
> 标签：c, libjpeg

我正在尝试使用 libjpeg 将内存块中包含的 jpeg 解压缩为其 RGB 值。我的系统上最初有 6.2 版，但我需要函数 jpeg_mem_src 所以我升级到 8d。我使用以下命令来安装/配置：

```
./configure
sudo make clean
sudo make
sudo make uninstall
sudo make install 
```

并编译我使用的程序（不包括删除 .o 文件并重新编译它们的命令）：

```
g++ main.o googlestreetview.o -lopencv_core -lopencv_highgui -lcurl -ltinyxml2 -ljpeg -o example 
```

但是，在运行此代码时：

```
 struct jpeg_decompress_struct cinfo;
struct jpeg_error_mgr jerr;
cinfo.err = jpeg_std_error( &jerr );
jpeg_create_decompress(&cinfo); 
```

我只是得到：“错误的 JPEG 库版本：库是 62，调用者期望 80”

这看起来很奇怪，因为我不仅从系统中手动删除了 libjpeg，而且还重新编译了 8d 并安装了很多次。我可以采取哪些步骤来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T02:05:06.387

尝试

```
./configure --with-jpeg8 
```

之前重新编译它。

# apache - apache mod_rewrite 在 url 后显示奇怪的字符

> ID：13851275
> 
> 赞同：1
> 
> 时间：2012-12-13T00:52:38.210
> 
> 标签：apache, mod-rewrite

我正在使用 mod_rewrite 从我的 url 中删除 .php 但由于某种原因，mod_rewrite 在 url 之后添加了奇怪的字符。

例如我去：

[http://www.mydomain.com.br/como-funciona](http://www.mydomain.com.br/como-funciona)

我被重定向到：

[http://www.mydomain.com.br/como-funciona#.UMkkyuR2x8E](http://www.mydomain.com.br/como-funciona#.UMkkyuR2x8E)

这是我的 .htaccess 文件：

```
RewriteEngine on
# remove .php; use THE_REQUEST to prevent infinite loops 
RewriteCond %{HTTP_HOST} ^www\.domain\.com
RewriteCond %{THE_REQUEST} ^GET\ (.*)\.php\ HTTP
RewriteRule (.*)\.php$ $1 [R=301]

# remove index
RewriteRule (.*)index$ $1 [R=301]

# remove slash if not directory
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /$
RewriteRule (.*)/ $1 [R=301]

# add .php to access file, but don't redirect
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.php [L] 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:31:54.387

正如@MJK 指出的那样，是 addthis 中的一些代码生成了这些奇怪的 url。谢谢。

# javascript - 基于输入值的Javascript输出文本

> ID：13851276
> 
> 赞同：0
> 
> 时间：2012-12-13T00:53:28.467
> 
> 标签：javascript, forms, if-statement, input, textbox

我正在尝试制作一个表单，您可以在其中向文本框输入数字，并基于该文本响应将文本响应放入文本框中。这是我一直在努力工作的一个例子：

```
<html>
    <head>
        <script type="text/javascript">
            function calculate()
            {
                var ph = document.test.ph.value;
                if (ph > 7.45) {
                    var str = "Alkalosis";
                }
                else if (ph < 7.35) {
                    var str = "Acidosis";
                }
                else {
                    var str = "Normal";
                }
                document.test.acidalk.value = str;
            }
        </script>
    </head>
    <body>
        <form name="test">
            pH<input type="textbox" name="ph"><br>
            <input type="submit" value="Calculate"><br>
            <input type="textbox" id="acidalk" >
        </form>
    </body>
</html> 
```

我想要实现的想法是，如果在第一个文本框中输入高于 7.45 的数字，单击按钮，然后在第二个文本框中输入“碱中毒”一词，但如果数字小于7.35，这个词改为“酸中毒”。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:58:16.127

嗯，你大部分都在那里。不要让按钮成为提交按钮，而是尝试

```
<input type="button" onclick="calculate();" value="Calculate" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T01:03:21.557

您的代码的基础这将是一种方法：

```
<html>
<head>
    <script type="text/javascript">
        function calculate(){
            var ph = document.getElementById('ph').value;
            if(ph > 7.45){
                var str="Alkalosis";
            }else if(ph < 7.35){
                var str="Acidosis";
            } else{
                var str="Normal";
            }
            document.getElementById('acidalk').value =str;
        }
    </script>
</head>
<body>
    pH<input type="textbox" name="ph"><br>
    <button onclick="calculate()">Calculate</button>
    <input type="textbox" id="acidalk" >
</body>
</html> 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T01:10:22.197

你有形式，你有功能，你只需要一种方法将它们联系在一起。通过指定`calculate()`为表单事件的事件处理程序来做到这一点`submit`。确保`return false`否则表单将被提交并且`calculate()`不会看到结果。

```
<form name="test" onsubmit="calculate(); return false"> 
```

[jsfiddle.net/UhJG2](http://jsfiddle.net/UhJG2/)

绑定到表单的`submit`事件而不是按钮的`click`事件具有在按下时调用函数的额外好处`enter`。它还确保表单不会被意外提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T01:46:31.477

使用 jQuery：

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
</head>

<body>pH
    <input type="textbox" name="ph" id="ph">
    <br>
    <button id="calculate">Calculate Acid Level</button>
    <br />
    <input type="textbox" id="acidalk" value="" />
</body>
<script type="text/javascript">
    $("#calculate").click(function () {
        var ph = $("#ph").val();
        if (ph > 7.45) str = "Alkalosis";
        else if (ph < 7.35) var str = "Acidosis";
        else var str = "Normal";

        $("#acidalk").val(str);
    });
</script>
</html> 
```

# mysql - 空的mysql_query，想不通

> ID：13851283
> 
> 赞同：1
> 
> 时间：2012-12-13T00:54:14.707
> 
> 标签：mysql, sql, database, join

我无法使此查询正常工作，我有 2 个表，其中一个包含客户信息，另一个包含产品信息。在查询数据库时尝试加入它们。

```
mysql_query(
    "SELECT client.id, client.email, client.prodid, prod.id, prod.name
    FROM client, prod
    WHERE client.id ="'.mysql_real_escape_string($_GET["id"]).'"
    AND client.prodid =prod.id"
); 
```

但该查询不返回任何内容。我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T00:57:17.407

你的报价是错误的。

您在方法中使用 " 开始字符串。在中间使用`"'.mysql_real_escape_string($_GET["id"]).'"`。请注意，您使用`"'`而不是`'"`.

这应该会更好（从 PHP 的角度来看，我没有检查您的 SQL 语法）：

```
mysql_query(
    "SELECT client.id, client.email, client.prodid, prod.id, prod.name
    FROM client, prod
    WHERE client.id ='".mysql_real_escape_string($_GET["id"])."'
    AND client.prodid =prod.id"
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:00:31.453

您的报价似乎取消了动态 ID 变量。如果您的 client.id 字段是数字，那么您应该删除 mysql_real_escape_string() 周围的单引号：

```
mysql_query(
 "SELECT client.id, client.email, client.prodid, prod.id, prod.name
 FROM client, prod
 WHERE client.id = ".mysql_real_escape_string($_GET["id"])." AND client.prodid = prod.id"
); 
```

如果它在 PHPMyAdmin 中工作，那么查询就可以了。启用调试并使用 var_dump()：

```
ini_set('display_errors','on');
error_reporting(E_ALL);
$result = mysql_query($sql_query);
var_dump($result); 
```

# java - 如何在 dispose 时添加 actionlisten

> ID：13851284
> 
> 赞同：0
> 
> 时间：2012-12-13T00:54:27.407
> 
> 标签：java, dispose, actionlistener

我想在窗户关闭时停止声音，如何在处置时添加动作列表？

```
 public Tetris(boolean sound) {

    statusbarLabel = new JLabel(" 0");
    add(statusbarLabel, BorderLayout.SOUTH);
    Board board = new Board(this);
    if(sound){
        Sound.gameSound.play();
    }

    add(board);
    board.start();

    setSize(200, 400);
    setTitle("Tetris");
    setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    this.setLocationRelativeTo(null);
    this.setVisible(true); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:57:34.693

最简单的方法是添加一个`WindowListener`：

```
addWindowListener(new WindowAdapter() {

   @Override
   public void windowClosing(WindowEvent e) {
     Sound.gameSound.stop();
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:56:23.567

[java.awt.event.WindowListener.windowClosing/Closed](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html)

# cuda - cuda 和 cudamalloc 分配大块内存失败

> ID：13851287
> 
> 赞同：3
> 
> 时间：2012-12-13T00:55:11.597
> 
> 标签：cuda, malloc

我有一个具有 2Gb 内存的 GTX570，当我尝试通过一个 cudamalloc 调用分配比大约 804Mb 更多的内存时，我遇到了麻烦。有人知道为什么会这样吗？这是我的第一个电话，所以我怀疑它是碎片化的。

没问题：

```
Memory avaliable: Free: 2336116736, Total: 2684026880
requesting 804913152 bytes
no error
Memory avaliable: Free: 1531199488, Total: 2684026880
requesting 804913152 bytes
no error
Memory avaliable: Free: 726286336, Total: 2684026880 
```

问题：

```
Memory avaliable: Free: 2327601152, Total: 2684026880
requesting 805306368 bytes
out of memory
Memory avaliable: Free: 2327597056, Total: 2684026880
requesting 805306368 bytes
out of memory
Memory avaliable: Free: 2327597056, Total: 2684026880 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:25:22.307

这是由 Windows WDDM 子系统施加的限制引起的。可以分配多少内存有一个硬性限制，计算为

```
MIN ( ( System Memory Size in MB - 512 MB ) / 2, PAGING_BUFFER_SEGMENT_SIZE ) 
```

对于桌面窗口 PAGING_BUFFER_SEGMENT_SIZE 约为 2Gb IIRC。您有两个选项可以解决此问题：

1.  获取 Telsa 卡并使用专用的 Windows TCC 模式驱动程序，该驱动程序将设备的内存管理从 WDDM 中分离出来，消除了限制。
2.  安装 linux 或使用支持 CUDA 的实时分发版进行 GPU 计算。Linux 驱动程序对超出设备可用内存容量的内存分配没有限制。

# casting - golang中数字类型之间的转换

> ID：13851292
> 
> 赞同：20
> 
> 时间：2012-12-13T00:55:40.233
> 
> 标签：casting, go, numeric

有人可以告诉我 go 是否支持数字类型的自动转换。现在我必须手动将所有计算的结果转换为 int 或 int64 并跟踪我正在使用的数字类型。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T01:30:19.467

Go 不会自动为您转换数字类型。

从语言规范：

> 当表达式或赋值中混合了不同的数值类型时，需要进行转换。例如，int32 和 int 不是同一类型，即使它们在特定架构上可能具有相同的大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T03:26:14.533

Go does not support implicit type conversions in numeric type.

Refer [spec](http://golang.org/ref/spec#Numeric_types). I think this is for reasons of safety and predictability. One more thing I found was a bit weird/interesting is that you cant even convert from int to int32 implicitly, which is weird cause both are of the same size.

![type conversion](../Images/52231a225e923f971aea55032e7612b2.png) ![error](../Images/3f944899e2f33101c041b86fcd173c50.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-01T23:33:42.140

您必须手动在类型之间进行转换，例如

```
var b byte = byte(x % 256); 
```

# content-management-system - ModX Revo：创建受密码保护的页面

> ID：13851294
> 
> 赞同：0
> 
> 时间：2012-12-13T00:55:52.617
> 
> 标签：content-management-system, password-protection, modx, modx-revolution

我想为我网站的访问者（客户）创建几个受密码保护的页面。我了解创建访问和资源组并将 ModX 用户分配到该组 - 但有几件事我不明白：

1.  您如何设置登录页面以访问安全资源？

2.  如果我为我的客户设置一个用户组并分发用户名和密码，他们是否能够像管理员一样登录到 ModX (/manager) 的后端？

3.  最好只使用像 DocPassword 这样的插件来保护页面密码（没有用户名）？

任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:43:23.483

我发现这对我有很大帮助：

[http://rtfm.modx.com/display/ADDON/Login.Tutorials](http://rtfm.modx.com/display/ADDON/Login.Tutorials)

我不知道的是您必须安装一个名为“登录”的插件

# mysql - 无法优化使用 ORDER BY 子句的 MySQL 查询

> ID：13851296
> 
> 赞同：15
> 
> 时间：2012-12-13T00:56:14.363
> 
> 标签：mysql, indexing, sql-order-by, query-optimization

我将 Drupal 6 与 MySQL 版本 5.0.95 一起使用，并且陷入僵局，其中一个基于最近文章日期显示内容的查询速度变慢，并且由于使用频率完全降低了站点性能。有问题的查询如下：

```
 SELECT n.nid, 
            n.title, 
            ma.field_article_date_format_value, 
            ma.field_article_summary_value
       FROM node n 
 INNER JOIN content_type_article ma ON n.nid=ma.nid
 INNER JOIN term_node tn            ON n.nid=tn.nid 
      WHERE tn.tid= 153 
        AND n.status=1 
   ORDER BY ma.field_article_date_format_value DESC 
      LIMIT 0, 11; 
```

查询的解释显示以下结果：

```
+----+-------------+-------+--------+--------------------------+---------+---------+----------------------+-------+---------------------------------+
| id | select_type | table | type   | possible_keys            | key     | key_len | ref                  | rows  | Extra                           |
+----+-------------+-------+--------+--------------------------+---------+---------+----------------------+-------+---------------------------------+
|  1 | SIMPLE      | tn    | ref    | PRIMARY,nid              | PRIMARY | 4       | const                | 19006 | Using temporary; Using filesort |
|  1 | SIMPLE      | ma    | ref    | nid,ix_article_date      | nid     | 4       | drupal_mm_stg.tn.nid |     1 |                                 |
|  1 | SIMPLE      | n     | eq_ref | PRIMARY,node_status_type | PRIMARY | 4       | drupal_mm_stg.ma.nid |     1 | Using where                     |
+----+-------------+-------+--------+--------------------------+---------+---------+----------------------+-------+---------------------------------+ 
```

该查询看起来相对简单直接，检索属于类别（术语）153 且状态为 1（已发布）的文章。但显然使用临时表和使用文件排序意味着查询肯定会从我所了解的浏览中失败。

从 ORDER BY 子句中删除 field_article_date_format_value 解决了使用临时性问题；使用 filesort 减少了查询执行时间，但它是必需的，不能折衷，不幸的是，同样适用于站点性能。

我的直觉是，大部分问题来自 term_node 表，该表将文章映射到类别，并且是多对多关系表，这意味着如果文章 X 与 5 个类别 C1..C5 相关联，它将在该表中有 5 个条目，此表来自开箱即用的 drupal。

处理繁重的数据库内容对我来说是新事物，并且经历了一些类似的查询（ [按日期 desc 排序时，“使用临时”会减慢查询速度](https://stackoverflow.com/questions/10218194/when-ordering-by-date-desc-using-temporary-slows-down-query)， [MySQL 性能优化：按日期时间字段排序](https://stackoverflow.com/questions/714950/mysql-performance-optimization-order-by-datetime-field)）我尝试为在 ORDER BY 子句中使用其日期时间字段的 content_type_article 以及其中的另一个键 (nid) 并尝试强制索引。

```
 SELECT n.nid, n.title,
           ma.field_article_date_format_value, 
           ma.field_article_summary_value 
      FROM node n 
INNER JOIN content_type_article ma FORCE INDEX (ix_article_date) ON n.nid=ma.nid 
INNER JOIN term_node tn ON n.nid=tn.nid 
     WHERE tn.tid= 153 
       AND n.status=1 
  ORDER BY ma.field_article_date_format_value DESC 
     LIMIT 0, 11; 
```

结果和以下 EXPLAIN 查询似乎没有多大帮助

```
+----+-------------+-------+--------+--------------------------+-----------------+---------+----------------------+-------+---------------------------------+
| id | select_type | table | type   | possible_keys            | key             | key_len | ref                  | rows  | Extra                           |
+----+-------------+-------+--------+--------------------------+-----------------+---------+----------------------+-------+---------------------------------+
|  1 | SIMPLE      | tn    | ref    | PRIMARY,nid              | PRIMARY         | 4       | const                | 18748 | Using temporary; Using filesort |
|  1 | SIMPLE      | ma    | ref    | ix_article_date          | ix_article_date | 4       | drupal_mm_stg.tn.nid |     1 |                                 |
|  1 | SIMPLE      | n     | eq_ref | PRIMARY,node_status_type | PRIMARY         | 4       | drupal_mm_stg.ma.nid |     1 | Using where                     |
+----+-------------+-------+--------+--------------------------+-----------------+---------+----------------------+-------+---------------------------------+ 
```

字段 n.nid、ca.nid、ma.field_article_date_format_value 均已编入索引。使用 ORDER BY 子句查询限制为 0,11 的数据库大约需要 7-10 秒，但没有它，查询几乎不需要一秒钟。数据库引擎是 MyISAM。对此的任何帮助将不胜感激。

任何可以帮助我像普通查询一样获得此查询的答案（与没有按日期排序的查询的速度相同）都会很棒。我尝试将复合查询创建为查询中的`nid`and`field_article_date_format_value`和 use 的组合并没有帮助解决问题。我愿意提供有关该问题的更多信息和任何新建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T04:03:05.657

查看您的查询和解释，似乎在 where 子句中使用 n.status=1 会使搜索效率非常低，因为您需要返回连接定义的整个集合，然后应用 status = 1。尝试从由 WHERE 立即过滤的 term_node 表开始连接，然后使连接立即添加状态条件。试一试，请告诉我进展如何。

```
 SELECT n.nid, n.title,
           ma.field_article_date_format_value, 
           ma.field_article_summary_value 
      FROM term_node tn
INNER JOIN node n ON n.nid=tn.nid AND n.status=1
INNER JOIN content_type_article ma FORCE INDEX (ix_article_date) ON n.nid=ma.nid 
     WHERE tn.tid= 153 
  ORDER BY ma.field_article_date_format_value DESC 
     LIMIT 0, 11; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T17:51:04.660

# 1) 覆盖索引

我认为简单的答案可能是“覆盖索引”。

尤其是在`content_type_article`桌子上。“覆盖索引”将 ORDER BY 中的表达式作为前导列，并包括查询引用的所有列。这是我创建的索引（在我的测试表上）：

```
CREATE INDEX ct_article_ix9 
    ON content_type_article 
       (field_article_date_format_value, nid, field_article_summary_value); 
```

这是我从查询中得到的 EXPLAIN 的摘录（在我使用 InnoDB 引擎构建示例表之后，包括每个表上的覆盖索引）：

```
_type  table type  key              ref          Extra                     
------ ----- ----- --------------   -----------  ------------------------
SIMPLE  ma   index ct_article_ix9   NULL         Using index
SIMPLE  n    ref   node_ix9         ma.nid       Using where; Using index
SIMPLE  tn   ref   term_node_ix9    n.nid,const  Using where; Using index 
```

注意计划中没有`'Using filesort'`显示，计划`'Using index'`针对查询中引用的每个表显示，这基本上意味着查询所需的所有数据都是从索引页面中检索的，不需要从底层引用任何页面桌子。（你的表比我的测试表有更多的行，但是如果你能得到一个看起来像这样的解释计划，你可能会得到更好的性能。）

* * *

为了完整起见，这是整个 EXPLAIN 输出：

```
+----+-------------+-------+-------+---------------+----------------+---------+---------------------+------+--------------------------+
| id | select_type | table | type  | possible_keys | key            | key_len | ref                 | rows | Extra                    |
+----+-------------+-------+-------+---------------+----------------+---------+-------- ------------+------+--------------------------+
|  1 | SIMPLE      | ma    | index | NULL          | ct_article_ix9 | 27      | NULL                |    1 | Using index              |
|  1 | SIMPLE      | n     | ref   | node_ix9      | node_ix9       | 10      | testps.ma.nid,const |   11 | Using where; Using index |
|  1 | SIMPLE      | tn    | ref   | term_node_ix9 | term_node_ix9  | 10      | testps.n.nid,const  |   11 | Using where; Using index |
+----+-------------+-------+-------+---------------+----------------+---------+---------------------+------+--------------------------+
3 rows in set (0.00 sec) 
```

* * *

除了省略`FORCE INDEX`提示外，我没有对您的查询进行任何更改。这是我在查询中引用的其他两个表上创建的另外两个“覆盖索引”：

```
CREATE INDEX node_ix9
    ON node (`nid`,`status`,`title`);

CREATE INDEX term_node_ix9
    ON term_node (nid,tid); 
```

（请注意，如果`nid`是表上的聚簇键，则`node`可能不需要节点表上的覆盖索引。）

* * *

# 2) 使用相关子查询代替连接？

如果前面的想法没有改进任何东西，那么作为另一种选择，由于原始查询最多返回 11 行，您可以尝试重写查询以避免连接操作，而是使用相关子查询。类似于下面的查询。

请注意，此查询与原始查询有很大不同。不同之处在于，使用此查询，`context_type_article`表中的一行将只返回一次。`node`通过使用连接的查询，该表中的一行可以与表中的多行匹配`term_node`，这将多次返回同一行。这可能被视为可取或不可取的，它实际上取决于基数以及结果集是否符合规范。

```
 SELECT ( SELECT n2.nid
            FROM node n2 
           WHERE n2.nid = ma.nid
             AND n2.status = 1
           LIMIT 1
        ) AS `nid`
      , ( SELECT n3.title 
            FROM node n3
           WHERE n3.nid = ma.nid
             AND n3.status = 1
           LIMIT 1
        ) AS `title`
      , ma.field_article_date_format_value
      , ma.field_article_summary_value
   FROM content_type_article ma
  WHERE EXISTS 
        ( SELECT 1
            FROM node n1
           WHERE n1.nid = ma.nid
             AND n1.status = 1
         )                 
     AND EXISTS
         ( SELECT 1
             FROM term_node tn
            WHERE tn.nid = ma.nid
             AND tn.tid = 153
         )
   ORDER BY ma.field_article_date_format_value DESC
   LIMIT 0,11 
```

（有时，使用这种类型的“或相关子查询”的查询可能比执行连接操作的等效查询的性能要差得多。但在某些情况下，这样的查询实际上可以执行得更好，特别是考虑到非常有限的行数回来。）

这是该查询的解释输出：

```
+----+--------------------+-------+-------+---------------+----------------+---------+---------------------+------+--------------------------+
| id | select_type        | table | type  | possible_keys | key            | key_len | ref                 | rows | Extra                    |
+----+--------------------+-------+-------+---------------+----------------+---------+---------------------+------+--------------------------+
|  1 | PRIMARY            | ma    | index | NULL          | ct_article_ix9 | 27      | NULL                |   11 | Using where; Using index |
|  5 | DEPENDENT SUBQUERY | tn    | ref   | term_node_ix9 | term_node_ix9  | 10      | testps.ma.nid,const |   13 | Using where; Using index |
|  4 | DEPENDENT SUBQUERY | n1    | ref   | node_ix9      | node_ix9       | 10      | testps.ma.nid,const |   12 | Using where; Using index |
|  3 | DEPENDENT SUBQUERY | n3    | ref   | node_ix9      | node_ix9       | 10      | testps.ma.nid,const |   12 | Using where; Using index |
|  2 | DEPENDENT SUBQUERY | n2    | ref   | node_ix9      | node_ix9       | 10      | testps.ma.nid,const |   12 | Using where; Using index |
+----+--------------------+-------+-------+---------------+----------------+---------+---------------------+------+--------------------------+
5 rows in set (0.00 sec) 
```

再次注意，每次访问都是`'Using index'`，这意味着直接从索引页满足查询，而不必访问基础表中的任何数据页。

* * *

# 示例表

以下是我根据您的问题中的信息构建和填充的示例表（以及索引）：

```
CREATE TABLE `node` (`id` INT PRIMARY KEY, `nid` INT, `title` VARCHAR(10),`status` INT);
CREATE INDEX node_ix9 ON node (`nid`,`status`,`title`);
INSERT INTO `node` VALUES (1,1,'foo',1),(2,2,'bar',0),(3,3,'fee',1),(4,4,'fi',0),(5,5,'fo',1),(6,6,'fum',0),(7,7,'derp',1);
INSERT INTO `node` SELECT id+7,nid+7,title,`status` FROM node;
INSERT INTO `node` SELECT id+14,nid+14,title,`status` FROM node;
INSERT INTO `node` SELECT id+28,nid+28,title,`status` FROM node;
INSERT INTO `node` SELECT id+56,nid+56,title,`status` FROM node;

CREATE TABLE content_type_article (id INT PRIMARY KEY, nid INT, field_article_date_format_value DATETIME, field_article_summary_value VARCHAR(10));
CREATE INDEX ct_article_ix9 ON content_type_article (field_article_date_format_value, nid, field_article_summary_value);
INSERT INTO content_type_article VALUES (1001,1,'2012-01-01','foo'),(1002,2,'2012-01-02','bar'),(1003,3,'2012-01-03','fee'),(1004,4,'2012-01-04','fi'),(1005,5,'2012-01-05','fo'),(1006,6,'2012-01-06','fum'),(1007,7,'2012-01-07','derp');
INSERT INTO content_type_article SELECT id+7,nid+7, DATE_ADD(field_article_date_format_value,INTERVAL 7 DAY),field_article_summary_value FROM content_type_article;
INSERT INTO content_type_article SELECT id+14,nid+14, DATE_ADD(field_article_date_format_value,INTERVAL 14 DAY),field_article_summary_value FROM content_type_article;
INSERT INTO content_type_article SELECT id+28,nid+28, DATE_ADD(field_article_date_format_value,INTERVAL 28 DAY),field_article_summary_value FROM content_type_article;
INSERT INTO content_type_article SELECT id+56,nid+56, DATE_ADD(field_article_date_format_value,INTERVAL 56 DAY),field_article_summary_value FROM content_type_article;

CREATE TABLE term_node (id INT, tid INT, nid INT);
CREATE INDEX term_node_ix9 ON term_node (nid,tid);
INSERT INTO term_node VALUES (2001,153,1),(2002,153,2),(2003,153,3),(2004,153,4),(2005,153,5),(2006,153,6),(2007,153,7);
INSERT INTO term_node SELECT id+7, tid, nid+7 FROM term_node;
INSERT INTO term_node SELECT id+14, tid, nid+14 FROM term_node;
INSERT INTO term_node SELECT id+28, tid, nid+28 FROM term_node;
INSERT INTO term_node SELECT id+56, tid, nid+56 FROM term_node; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T03:00:01.553

`Using temporary; Using filesort`仅表示MySQL需要构造一个临时结果表并对其进行排序以获得您需要的结果。这通常是`ORDER BY ... DESC LIMIT 0,n`您用于获取最新帖子的构造的结果。它本身并不是失败的标志。看到这个： [http ://www.mysqlperformanceblog.com/2009/03/05/what-does-using-filesort-mean-in-mysql/](http://www.mysqlperformanceblog.com/2009/03/05/what-does-using-filesort-mean-in-mysql/)

这里有一些可以尝试的东西。我不完全确定它们会起作用；如果没有您的数据进行试验，很难知道。

是否有 BTREE 索引`content_type_article.field_article_date_format_value`？如果是这样，那可能会有所帮助。

你必须显示最近的 11 篇文章吗？或者您能否显示最近一周或一个月内出现的 11 篇最新文章？如果是这样，您可以将此行添加到您的`WHERE`子句中。它会按日期过滤您的内容，而不必一直追溯到匹配文章的开始时间。如果您有一个历史悠久的 Drupal 站点，这将特别有用。

```
 AND ma.field_article_date_format_value >= (CURRENT_TIME() - INTERVAL 1 MONTH) 
```

首先，尝试翻转 INNER JOIN 操作的顺序。其次，将 tid=153 合并到连接标准中。这可能会减少您需要排序的临时表的大小。我的建议如下：

```
 SELECT n.nid, 
           n.title, 
           ma.field_article_date_format_value, 
           ma.field_article_summary_value
      FROM node n 
INNER JOIN term_node tn            ON (n.nid=tn.nid AND tn.tid = 153) 
INNER JOIN content_type_article ma ON n.nid=ma.nid
     WHERE n.status=1 
       AND ma.field_article_date_format_value >= (CURRENT_TIME() - INTERVAL 1 MONTH)
  ORDER BY ma.field_article_date_format_value DESC 
     LIMIT 0, 11; 
```

那些是

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-13T02:46:56.430

MySQL 正在“优化”您的查询，以便它首先从 term_node 表中选择，即使您指定先从节点中选择。不知道数据，我不确定哪个是最佳方式。term_node 表肯定是您的性能问题所在，因为从那里选择了大约 19,000 条记录。

没有 ORDER BY 的限制几乎总是更快，因为 MySQL 一旦找到指定的限制就会停止。使用 ORDER BY，它首先必须找到所有记录并对其进行排序，然后获得指定的限制。

尝试的简单方法是将 WHERE 条件移到 JOIN 子句中，这是它应该在的位置。该过滤器特定于要连接的表。这将确保 MySQL 不会错误地优化它。

```
INNER JOIN term_node tn ON n.nid=tn.nid AND tn.tid=153 
```

更复杂的事情是在 term_node 表上执行 SELECT 并在其上进行 JOIN。这称为派生表，您将在 EXPLAIN 中看到它是这样定义的。既然你说它是多对多的，我添加了一个 DISTINCT 参数来减少要加入的记录数。

```
SELECT ...
FROM node n
INNER JOIN content_type_article ma FORCE INDEX (ix_article_date) ON n.nid=ma.nid
INNER JOIN (SELECT DISTINCT nid FROM term_node WHERE tid=153) tn ON n.nid=tn.nid
WHERE n.status=1
ORDER BY ma.field_article_date_format_value DESC 
LIMIT 0,11 
```

MySQL 5.0 对派生表有一些限制，所以这可能行不通。虽然有变通办法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-22T19:34:13.357

如果可以通过利用预排序索引，您真的想完全避免发生排序操作。

要确定这是否可能，请想象将您的数据非规范化到一个表中，并确保必须包含在 WHERE 子句中的所有内容都可以使用 SINGLE VALUE 指定。例如，如果您必须在其中一列上使用 IN 子句，那么排序是不可避免的。

这是一些示例数据的屏幕截图：

![样本数据非规范化并按 tid、状态 DESC、日期 DESC 排序](../Images/c26bac3d412b8460e4eda74211f07545.png)

因此，如果您确实对数据进行了非规范化，则可以使用单个值查询 tid 和 status，然后按日期降序排序。这意味着在这种情况下，以下索引将完美运行：

```
create index ix1 on denormalisedtable(tid, status, date desc); 
```

如果你有这个，你的查询只会命中前 10 行，并且永远不需要排序。

那么-如何在不进行非规范化的情况下获得相同的性能...

我认为你应该能够使用[STRAIGHT_JOIN](https://stackoverflow.com/questions/5818837/why-does-straight-join-so-drastically-improve-this-query-and-what-does-it-mean)子句来强制 MySQL 从表中选择的顺序 - 你想让它从你最后排序的表中选择。

尝试这个：

```
SELECT n.nid, 
        n.title, 
        ma.field_article_date_format_value, 
        ma.field_article_summary_value
FROM node n 
STRAIGHT_JOIN term_node tn            ON n.nid=tn.nid 
STRAIGHT_JOIN content_type_article ma ON n.nid=ma.nid
WHERE tn.tid= 153 
    AND n.status=1 
ORDER BY ma.field_article_date_format_value DESC 
LIMIT 0, 11; 
```

这个想法是让 MySQL 从节点表中选择，然后从 term_node 表中选择，然后最终从 content_type_article 表（包含您正在排序的列的表）中选择。

最后一个连接是您最重要的连接，您希望它使用索引来实现，这样 LIMIT 子句就可以工作而无需对数据进行排序。

这个单一索引可能会起作用：

```
create index ix1 on content_type_article(nid, field_article_date_format_value desc); 
```

或者

```
create index ix1 on content_type_article(nid, field_article_date_format_value desc, field_article_summary_value); 
```

（对于覆盖指数）

我说可能，因为我对 MySQL 优化器的了解不够多，无法知道它是否足够聪明地处理多个“nid”列值，这些值将被输入到 content_type_article 中而无需使用数据。

从逻辑上讲，它应该能够快速工作 - 例如，如果将 5 个 nid 值输入到最终的 content_type_article 表中，那么它应该能够直接从索引中获取每个值的前 10 个并将结果合并在一起，然后选择最终的顶部10，这意味着从该表中读取的总共 50 行插入了您当前看到的完整 19006。

让我知道事情的后续。

如果它适合您，则可以使用覆盖其他表上的索引来加速前两个连接的进一步优化。

# html - 更改单个列表项的颜色

> ID：13851302
> 
> 赞同：4
> 
> 时间：2012-12-13T00:56:55.343
> 
> 标签：html, css, html-lists

HTML/CSS 中是否有一种方法可以仅更改一个列表项的颜色而不是全部？我只想更改它们每个的颜色，以便用户知道他在哪个页面上。现在我只能做到这一点，`a:hover`但我不知道我该怎么做才能保持颜色。

HTML：

```
<div id="nav">
    <div class="wrapper">
        <ul id="buttons">
        <li><a href="index.html">| About</a></li>
        <li><a href="html/gallery.html">| Gallery</a></li>
        <li><a href="html/prices.html">| Prices</a></li>
        <li><a href="html/faq.html">| FAQ</a></li>
        <li><a href="html/contact_us.html">| Contact Us</a></li>
        <div class="clear"></div>
        </ul>
    </div>
</div> 
```

CSS：

```
#buttons {
background-color: black;
}

.clear { clear: both; }

#buttons li a
{
position:block;
color:#fff;
padding:1em;
text-decoration:none;
float:left;
width:95px;
}

#buttons li a:hover
{
background-color:#bc1b32;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T01:06:59.853

看：http: [//jsfiddle.net/qzXgJ/](http://jsfiddle.net/qzXgJ/)

细节：

**HTML**

```
<div>
    <div class="wrapper">
        <ul>
        <li><a id="index" href="#">| About</a></li>
        <li><a id="gallery" href="#">| Gallery</a></li>
        <li><a id="prices" href="#">| Prices</a></li>
        <li><a id="faq" href="#">| FAQ</a></li>
        <li><a id="contact_us" href="#">| Contact Us</a></li>
        <div class="clear"></div>
        </ul>
    </div>
</div>​​​ 
```

**JS**

```
$(".wrapper li a").click(function () {

    $('.wrapper li a').each(function() {
        $(this).removeClass('selected');
    });

    $(this).addClass('selected');

    $(".wrapper ul li a").click(function () {

    $('.wrapper ul li a').each(function() {
        $(this).removeClass('selected');
    });

    $(this).addClass('selected');

    console.log($(this).attr('id'));

    /* Get html by jQuery */ 
    $.get($(this).attr('id'),function(data){
        $('#result').html(data);
    });

    return false;
}); 
```

**CSS**

```
.selected
{
    background-color:#b51ba2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:00:39.050

最简单的方法是创建一个类，假设选中，将其添加到您想要更改颜色的标签中，就是这样：

```
.selected { background-color: green; } 
```

那么您的链接将是：

```
<li><a class='selected' href="index.html">| About</a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T01:00:05.867

我用这个答案解决了同样的问题，结果很好：http: [//hicksdesign.co.uk/journal/highlighting-current-page-with-css](http://hicksdesign.co.uk/journal/highlighting-current-page-with-css)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T01:00:18.773

这个问题有点含糊；要指示用户在哪个页面上，您可以向包含他们上次单击的链接的特定列表项添加一个类：

```
<li class="current">
    <a href="html/prices.html">| Prices</a>
</li> 
```

然后，您为此提供特定样式：

```
li.current {
    background-color: #f1f1f1;
} 
```

# javascript - CreateJS：处理位图

> ID：13851303
> 
> 赞同：0
> 
> 时间：2012-12-13T00:57:05.190
> 
> 标签：javascript, image, canvas, createjs

使用 EaselJS（HTML Canvas 框架，来自 CreateJS）

我有一个tileset，我需要绘制一个tilemap。所以我将我的图块集位图分配给每个图块。但是当然，每个图块只需要绘制图块集的一部分。

我想出了如何绘制位图的一部分（Bitmap.sourceRect），但这意味着我必须为每个图块克隆图块集！

来自 Flash AS3 背景，我选择了这个库，因为它应该是相似的，但是它在图像处理方面似乎有所不同（这个问题是通过使用多个 Bitmap 和一个 BitmapData 来解决的）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:52:14.367

考虑改用 SpriteSheet 和 BitmapAnimation。GitHub 中有一些可以提供帮助的示例。

[https://github.com/CreateJS/EaselJS/blob/master/examples/SpriteSheet.html](https://github.com/CreateJS/EaselJS/blob/master/examples/SpriteSheet.html) http://www.createjs.com/#!/EaselJS/demos/spritesheet

# r - 在 R 中使用存在语句

> ID：13851304
> 
> 赞同：3
> 
> 时间：2012-12-13T00:57:06.423
> 
> 标签：r, if-statement, crash, progress-bar

我使用 R 中的 winProgressBar 方法制作了一个进度条。我想要做的是，如果有人在我的程序进行所有处理时实例化我的程序，我希望关闭当前进度条。我试着用一个声明说

```
if(exists(progressBar)) {
  close(progressBar);
} 
```

但我从控制台收到一个错误，上面写着

```
Error in exists(progressBar) : object 'progressBar' not found 
```

我知道在我的程序的第一次迭代期间它不会存在，但是我没有理由发现它会使 if 语句导致程序崩溃。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T01:01:47.280

如果您阅读帮助，`exists`您将在 Arguments 下看到以下内容

> xa 变量名（以字符串形式给出）。

所以

```
exists('progressBar') 
```

将返回 TRUE 或 FALSE。

# ember.js - 如何观察静态对象的变化？

> ID：13851314
> 
> 赞同：1
> 
> 时间：2012-12-13T00:57:55.240
> 
> 标签：ember.js

我正在尝试使用谷歌地图 JSON API 实现地理编码。

我为位置和 ObjectController 创建了一个模型，该模型具有异步地理编码逻辑。

我希望控制器观察模型的变化以反映最新的数据。

我正在尝试绑定和观察，但两者都不起作用：

```
App.Location = Ember.Object.extend({
    formatted_address: null,
    location: {
        lat: null,
        lng: null
    }
})

App.Location.reopenClass({
    geocoded: Ember.Object.create(),
    geocode: function(address) {
        $.ajax({
            url: 'http://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=' + address,
            dataType: 'json',
            context: this,
            success: function(response) {
                App.Location.geocoded.set('response', response);
            }
        });

        return this.geocoded;
    }
});

App.LocationController = Ember.ObjectController.extend({
    contentBinding: 'App.Location.geocoded',
    testProperty: function() {
        console.log('test');    
    }.property('content'),
    testObserve: function() {
        console.log('test');
    }.observes('App.Location.geocoded')
}); 
```

编辑：更改以`observes('App.Location.geocoded.response')`解决问题。它也可以与绑定一起使用吗？有一个更好的方法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:03:04.250

这里当你写`contentBinding: 'App.Location.geocoded'`的时候，内容会随着 App.Location.geocoded 的变化而更新。但是在成功处理程序中，您不会更改地理编码对象，而只是更新其响应属性。

所以，如果你想保持与地理编码对象的绑定，你可以尝试做

```
App.Location.set('geocoded', Ember.Object.create({response: response})); 
```

在 ajax 成功处理程序中。

# logging - 日志查看器 - MDC 支持

> ID：13851319
> 
> 赞同：2
> 
> 时间：2012-12-13T00:58:13.987
> 
> 标签：logging, log4j, viewer, mdc, ndc

我正在尝试为 log4j 生成的支持 MDC 的纯文本文件查找日志查看器。我看过一些像 Chainsaw、LogSaw、Otros 但他们似乎只支持 NDC。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:05:04.537

试试[OtrosLogViewer](http://code.google.com/p/otroslogviewer/)。它支持 MDC（显示为属性）。

![OtrosLogViewer 屏幕截图](../Images/38f22f5b54fad7b58b643502453ad591.png)

**免责声明**：我是 OtrosLogViewer 的作者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:33:42.550

Chainsaw 支持它 - 尝试最新的开发者快照： http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

然后使用配置对话框告诉 Chainsaw 处理常规文本日志文件，如果您使用带有 FileAppender 条目的 log4j.properties 或 log4j.xml 来生成日志文件，则告诉 Chainsaw 使用 FileAppender 条目来构建配置。

# ruby-on-rails-3 - Rails 3 ActiveRecord 查询问题

> ID：13851322
> 
> 赞同：1
> 
> 时间：2012-12-13T00:58:41.550
> 
> 标签：ruby-on-rails-3, activerecord

我已经实现了“跟随”功能。显示“用户 A 正在关注的人”很简单，但显示“正在关注用户 A 的人”给我带来了麻烦。

我有 follow_links，其中有 id、user_id 和 follow_you_id 列。当用户 A 开始关注用户 B 时，列将类似于 (user_id = A, follow_you_id = B)。

为了向用户显示 A(@user) 正在关注，我可以简单地做

```
@follow_yous = @user.follow_yous 
```

但我不确定如何显示关注 A(@user) 的用户

为此，我首先找到了所有相关链接。

```
@follow_links = FollowLink.where(:follow_you_id => @user.id) 
```

现在我以为我可以这样做`@follow_mes = @follow_links.users`，但它说`user`是一个未定义的方法。所以我想我可以打电话`user.follow_yous`或`follow_you.users`.

我的下一个方法是

```
@follow_links = FollowLink.where(:follow_you_id => @user.id)
@follow_mes = User.where(:id => @user.id, :include => @follow_links) 
```

我打算找到所有具有提供的 @follow_links 对象的 User 对象，但我认为语法错误。经过一番研究，我找不到一个像样的解决方案。我会很感激任何帮助。

**更新：FollowLink 模型**

```
 belongs_to :user
  belongs_to :follow_you, :class_name => "User" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:08:46.773

你可以[`joins`](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)这样使用：

```
@users = User.joins(:follow_links).where(:follow_links => { :follow_you_id => @user.id }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:03:27.350

您可以使用以下内容：

```
@follow_links = FollowLink.where(:follow_you_id => @user.id)
@follow_links.collect(&:user) # :user should be the name of your relation to user in your followlink model
=> [User1, User2,...] 
```

# oracle - 通过 JOOQ 比较 Oracle DATE 列与 java.sql.timestamp

> ID：13851326
> 
> 赞同：1
> 
> 时间：2012-12-13T00:59:07.683
> 
> 标签：oracle, date, jooq

我正在使用 jooq 为 Oracle 构建查询。除日期外，一切正常：

```
public static void main(String[] args) throws SQLException {
    java.sql.Timestamp now = new java.sql.Timestamp(new Date().getTime());
    Connection con = DriverManager.getConnection(... , ... , ...);
    final Factory create = new OracleFactory(con);
    Statement s = con.createStatement();
    s.execute("create table test_table ( test_column DATE )");
    s.execute("insert into test_table values (to_date('20111111', 'yyyymmdd'))");

    // -- using to_date
    ResultSet rs = s.executeQuery("select count(1) from test_table where test_column<to_date('20121212', 'yyyymmdd')");
    rs.next();
    System.out.println(""+rs.getInt(1));
    rs.close();     

    // -- using a preparedstatement with java.sql.timestamp
    PreparedStatement ps = con.prepareStatement("select count(1) from test_table where test_column<?");
    ps.setTimestamp(1,now);
    rs = ps.executeQuery();
    rs.next();
    System.out.println(""+rs.getInt(1));
    rs.close();

    // -- using jooq with java.sql.timestamp
    final org.jooq.Table<org.jooq.Record> table = create.tableByName("TEST_TABLE");
    final org.jooq.SelectSelectStep sss = create.select(create.count());
    final org.jooq.SelectJoinStep sjs = sss.from(table);
    final org.jooq.SelectConditionStep scs = sjs.where(create.fieldByName("TEST_COLUMN").lessThan(now));
    System.out.println(scs.toString());
    rs = s.executeQuery(scs.toString());
    rs.next();
    System.out.println(""+rs.getInt(1));
    rs.close();

    s.close();

} 
```

给出以下输出：

```
 1
   1
   select count(*) from "TEST_TABLE" where "TEST_COLUMN" < '2012-12-12 19:42:34.957'
   Exception in thread "main" java.sql.SQLDataException: ORA-01861: literal does not match format string 
```

我原以为 JOOQ 会检查 lessThan(Object) 中的 Object 类型以确定它是否可以提出合理的转换，但显然在这种情况下它只是执行 Object.toString() 。我还记得我从来没有在 MySQL 中通过 JOOQ 进行日期查询的问题（尽管这是前一阵子）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:59:23.517

我怀疑这个问题是由于`create.fieldByName()`不知道列的类型（因此是对象），并在比较谓词的右侧强制该未知类型。这应该在 jOOQ 中修复。我为此注册了#2007： [https ://github.com/jOOQ/jOOQ/issues/2007](https://github.com/jOOQ/jOOQ/issues/2007)

同时，尝试在您的字段上明确设置类型：

```
create.fieldByName(Timestamp.class, "TEST_COLUMN").lessThan(now) 
```

# vb.net - 如何为图像添加边框

> ID：13851337
> 
> 赞同：1
> 
> 时间：2012-12-13T01:00:26.577
> 
> 标签：vb.net

这是我的代码：

```
Public Class Form1
  Public TheImage As Image = PictureBox1.BackgroundImage
  Public Function AppendBorder(ByVal original As Image, ByVal borderWidth As Integer) As Image
    Dim borderColor As Color = Color.Red
    Dim mypen As New Pen(borderColor, borderWidth * 2)
    Dim newSize As Size = New Size(original.Width + borderWidth * 2, original.Height + borderWidth * 2)
    Dim img As Bitmap = New Bitmap(newSize.Width, newSize.Height)
    Dim g As Graphics = Graphics.FromImage(img)

    ' g.Clear(borderColor)
    g.DrawImage(original, New Point(borderWidth, borderWidth))
    g.DrawRectangle(mypen, 0, 0, newSize.Width, newSize.Height)
    g.Dispose()
    Return img
  End Function

  Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim OutputImage As Image = AppendBorder(TheImage, 2)
    PictureBox1.BackgroundImage = OutputImage
  End Sub
End Class 
```

有一个以内部为中心的实际背景图像`PictureBox1`，我在设计器中添加了它。但是当我调试时，我收到错误消息：

> InvalidOperationException 未处理

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:27:48.403

```
 Public TheImage As Image = PictureBox1.BackgroundImage 
```

那是行不通的。执行此语句时 PictureBox1 还没有值，直到 InitializeComponent() 方法运行后才会发生。您可能从未听说过，神奇的咒语是您输入“Public Sub New”。当你按下回车键时，你会看到：

```
Public Sub New()

    ' This call is required by the Windows Form Designer.
    InitializeComponent()

    ' Add any initialization after the InitializeComponent() call.

End Sub 
```

这就是*构造函数*，是 .NET 类的一个非常重要的部分。请注意生成的“添加任何初始化”注释。这就是你初始化 TheImage 的地方。让它看起来像这样：

```
Public TheImage As Image

Public Sub New()
    InitializeComponent()
    TheImage = PictureBox1.BackgroundImage
End Sub 
```

如果这一切仍然很神秘，那么请阅读书籍以了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:27:59.253

这部分代码：

```
Public TheImage As Image = PictureBox1.BackgroundImage 
```

在调用`TheImage`之前初始化，因此此时尚未创建。当我将这件作品移入 a时，一切正常：`InitializeComponent``PictureBox1``Form_Load`

```
Public TheImage As Image
'...
Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
  TheImage = PictureBox1.BackgroundImage
End Sub 
```

# jquery-mobile - jQuery Mobile 动态删除数据主题然后刷新

> ID：13851346
> 
> 赞同：1
> 
> 时间：2012-12-13T01:01:35.020
> 
> 标签：jquery-mobile

我正在实现一个“尚未查看”列表，其中用户在 ul 中看到项目列表，并且用户尚未查看的项目应用了数据主题来突出显示它们。当用户单击它显示的项目时，我需要删除数据主题，以便该项目不再突出显示。

我有正确的逻辑来实际删除该属性，正如我在 Chrome 开发者工具的 Elements 部分中看到的那样，该属性不再位于 li 中。但是在渲染的页面中仍然可以看到突出显示。

我已经搜索并看到了许多涉及刷新页面、列表等的建议，但都无济于事。您可以看到一些尝试如下（在函数“this”中是 li）：

```
 $(this).removeAttr("data-theme");
    //$(this).closest("ul").listview("refresh");
    //$(this).closest("ul").listview();
    //$('#mylist').listview();
    //$("#content-notifications").page();
    //$("#content-notifications").page("destroy").page();
    //if ( $("#content-notifications").data("page") ) {
    //      $(this).closest("ul").listview("refresh");
        //}; 
```

任何人都有正确的解决方案，因为我找不到它！

谢谢-

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:46:41.217

您必须手动删除 li 中旧主题的类并添加新主题的类。

```
$(document).on("click","li",function(){
  $(this).attr("data-theme","b").removeClass("ui-btn-up-a").addClass("ui-btn-up-b")
}); 
```

演示在这里 - [http://jsfiddle.net/ENYxw/](http://jsfiddle.net/ENYxw/)

# wget - wget 仅返回（预期的）“401 未授权”但没有 html

> ID：13851351
> 
> 赞同：2
> 
> 时间：2012-12-13T01:02:12.200
> 
> 标签：wget

在使用浏览器测试我们的网站时，我故意输入了错误的用户名/密码，并从应用程序返回一个 html 页面，告诉我登录失败并“请检查我的用户名和密码，然后再试一次”。查看此页面的源代码，我在任何地方都找不到嵌入的“401”。

但是使用 wget 模仿上述内容：

```
wget http://servername:8011/ui/login.do --post-data="loginId=NotAUser&password=NotAPassword" -U Mozilla -o log.txt 
```

输出文件包含“401 Unauthorized”，但没有上面提到的 html。

有没有办法获得我期待的 html 页面，只需检查带有“$”的 401 返回码？测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:12:21.537

您得到的“401 Unauthorized”位于服务器响应的标头中。401 响应没有 HTML - 它只是一个错误代码。

您在浏览器中描述的页面实际上是由浏览器生成的，而不是从服务器发回的。浏览器供应商会生成有意义的错误页面，而不仅仅是向用户显示“401 Unauthorized”或“404 Page Not Found”。无法使用 wget 获取您看到的 HTML 代码，因为它不是 HTTP 对话的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T01:48:28.137

`wget`用于在非 200 响应代码上停止并且不检索回复的正文。它已更新以纠正此行为，版本 1.14-1 及更高版本应按预期工作：

[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=247985](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=247985)

如果您被旧版本卡住或无法正常工作，为什么不试试`curl`呢？

[https://superuser.com/questions/253826/how-to-use-wget-to-download-http-error-pages](https://superuser.com/questions/253826/how-to-use-wget-to-download-http-error-pages)

# scala - Scala：使具体类型符合具有边界的泛型

> ID：13851352
> 
> 赞同：3
> 
> 时间：2012-12-13T01:02:34.960
> 
> 标签：scala, generics

我已经用泛型定义了一个函数，但我在理解编译器给我的错误时遇到了一些麻烦。问题可以简单地表达为：

```
def myfunc[T <: MyClass](param:MyClass):T = param 
```

它`param`在我的正文中给了我这个错误：MyClass 类型的表达式不符合预期的 T 类型。

为什么？`param`符合 T 的上限。如何在不将 param 转换为 T 的情况下进行类似的工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T05:36:25.200

好的。假设，您有以下内容：

```
class Animal
class Dog extends Animal 
```

现在让您的功能如下：

```
def myfunc[T <: Animal](param:Animal):T = param 
```

现在假设，编译器不会抛出错误。在调用`myfunc[Dog](new Animal)`时，它应该`Dog`根据函数定义返回一个。但实际上，您只是将`Animal`. 这不应该被允许。因此错误。

现在是：

```
def myfunc[T >: Dog](param:Dog):T = param 
```

在这里打电话`myfunc[Animal](new Dog)`。返回类型为`Animal`. 但是该函数返回的 a 和 a一样`Dog`正确。希望它澄清`Dog``Animal`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T01:23:32.953

你有向后的差异。如果`T <: MyClass`，那么您可以提供预期的`T`位置。`MyClass`但是你不能给出预期的`MyClass`地方。`T`

为了显示：

```
def myfunc(x: Any): String = x 
```

出于同样的原因，这给出了同样的错误。An`Any`不是`String`， 你`MyClass`的也不是`T`。

这可能是您的意思：

```
def myfunc[T >: MyClass](param:MyClass):T = param 
```

哪个工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T19:05:25.923

您认为*param*与*T*相关的假设是因为它们具有共同的祖先是错误的。

例如，基类*A*可以有两个子类*B*和*C*。如果*T*属于*B*类型并且*param*属于*C*类型，则*param*不是与*T*相关的类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T01:22:39.650

看这个：

```
class A(); class B extends A;

scala> def myfunc[T <: A,U >: A](param: U):T = param
<console>:8: error: type mismatch;
found   : param.type (with underlying type U)
required: T
       def myfunc[T <: A,U >: A](param: U):T = param 
```

你`param:MyClass`确实有一个下限 ( `>: MyClass`)，就像在 Java 中一样——它可以是`MyClass`. 那么，您如何`myfunc(B)`在类图上运行并返回高于 的类型`A`？B 在继承图中被认为低于 A，您返回 B 但说它真的是`<: A`。错误。

有时显式声明所有这些类型（如 T、U、V 等）并查看编译器所说的内容很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T01:12:48.360

我希望能帮助你。

参数类型是 T 而不是 MyClass。

```
object StackOverFlow13851352 extends App {
    class MyClass
    class YourClass extends MyClass
    def myfunc[T <: MyClass](param: T): T = param

    val clazz: YourClass = myfunc(new YourClass)
} 
```

Scala 代码运行器版本 2.10.0-RC2 -- 版权所有 2002-2012，LAMP/EPFL

java版本“1.7.0_09”

# android - Sqlite 3.7.4 与 android 2.2

> ID：13851354
> 
> 赞同：0
> 
> 时间：2012-12-13T01:02:49.717
> 
> 标签：android, sqlite

如何在 android 2.2 中使用 sqlite 3.7.4？因为，任何查询都不能在 android 2.2 上工作，但可以工作蜂窝，ICS。请帮我。

这是我的查询：

```
select snippet(content,'<b>','</b>','...',-1) as mytext,docid as _id from content where text match 'book*'"

public Cursor getSearchResult(String str) {
    String query = new StringBuilder().append("select snippet(content,'<b>','</b>','...',-1) as mytext,docid as _id from content where").append(" text match '").append(str).append("*'").toString();
    return database.rawQuery(query, null);
} 
```

我正在使用 fts3 表。

日志：

```
android.database.sqlite.SQLiteException: SQL logic error or missing database 
```

此查询适用于 ICS。

我读[了这个](https://stackoverflow.com/questions/2421189/version-of-sqlite-used-in-android)和[这篇](http://www.sqlite.org/fts3.html#section_4_2)文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:21:24.610

您无法更改设备固件中的 SQLite 版本。就是这样，[这个 SO 答案](https://stackoverflow.com/a/4377116/115145)有一个很好的名单，说明了它对于不同版本的含义。

您可以尝试[SQLCipher for Android](http://sqlcipher.net/sqlcipher-for-android/)，我认为它基于比 3.7.4 更新的 SQLite 版本，如果您愿意，它可以为您提供加密。但它会为您的 APK 大小增加几 MB。

否则，您将需要将架构和查询重新设计为在旧 SQLite 版本上成功运行的内容，或者停止支持具有太旧 SQLite 版本的旧 Android 版本。

# java - Java：如何将代码从按钮单击更改为加载

> ID：13851356
> 
> 赞同：0
> 
> 时间：2012-12-13T01:03:06.580
> 
> 标签：java, swing, onload

我有以下代码可以正常工作，但我希望在加载时显示人名，而不是在用户单击按钮时显示。我将如何实现这一点？

```
public class NameSwing implements ActionListener {

    private JTextArea tf = new JTextArea(20, 20);
    private JFrame f = new JFrame("names");
    private JButton b = new JButton("view");
    static String fullName;

    public NameSwing() {
        f.add(new JLabel("Name"));
        tf.setEditable(true);
        f.add(tf);

        b.addActionListener(this);
        f.add(b);

        f.setLayout(new FlowLayout());
        f.setSize(600, 600);
        f.setVisible(true);

    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == b) {
            tf.setText(fullName);
        }
    }

    public static void main(String[] args) throws FileNotFoundException, IOException {
        NameSwing nameSwing = new NameSwing();

        Names t = new Names();
        t.OpenFile();
        t.ReadFile();
        t.CloseFile();

        fullName = Names.fullName;
    }

} 
```

`Names`班级：

```
package names;

public class Names {

    Scanner scan;
    static String Firstname = null;
    static String Surname;
    static String Fullname;
    static String fullName;
    String myArray[];

    public void OpenFile() {
        try {
            scan = new Scanner(new File("/Users/nikhilpatel/NetBeansProjects/Names/src/names/test.txt"));
            System.out.println("File found!");
        } catch (Exception e) {
            System.out.println("File not found");
        }
    }

    public void ReadFile() {
        while (scan.hasNext()) {
            Firstname = scan.next();
            Surname = scan.next();
            Fullname += Firstname + " " + Surname + "\n";
            fullName = Fullname.replace("null", "");

            System.out.println(fullName);
        }

    }

    public void CloseFile() {
        scan.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:59:04.263

有几种选择，具体取决于您想要实现结果的“优雅”程度，一种可能是重构您的代码，将`actionPerformed`方法主体提取为更独立的方法，然后`main`调用该公共方法：

```
@Override
public void actionPerformed(ActionEvent e) {
   fillTextArea();
}

public void fillTextArea() {
    // You can drop this line, this Listener is registered for 'b', so 'b' 
    // is the only one who fires the ActionEvent, not need to recheck 
    //
    // if (e.getSource() == b) {

    tf.setText(fullName);
}

public static void main(String[] args) throws FileNotFoundException, IOException {
    NameSwing nameSwing = new NameSwing();

    Names t = new Names();
    t.OpenFile();
    t.ReadFile();
    t.CloseFile();

    fullName = Names.fullName;

    // Invoke the new method
    nameSwing.fillTextArea();
} 
```

另一种方法（也是一种棘手的方法）是像这样简单地调用该[方法`doClick`](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#doClick%28%29)`b`：

```
// Add a getter for 'b' 
public JButton getButton() { 
    return b;
}

public static void main(String[] args) throws FileNotFoundException, IOException {
    NameSwing nameSwing = new NameSwing();

    Names t = new Names();
    t.OpenFile();
    t.ReadFile();
    t.CloseFile();

    fullName = Names.fullName;

    // This will simulate a 'click' on the button, loading the names 
    nameSwing.getButton().doClick();
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:04:53.013

```
public static void main(String[] args) throws FileNotFoundException, IOException {
    NameSwing nameSwing = new NameSwing();

    Names t = new Names();
    t.OpenFile();
    t.ReadFile();
    t.CloseFile();

    fullName = Names.fullName;
    tf.setText(fullName);
} 
```

只需将这些`actionPerformed`东西添加进去。或者创建一个新方法（称为 buttonClick 或其他东西）并`actionPerformed`在`main`.

# java - 如何获取 HSSFCell apache POI API 的 Excell 范围名称？

> ID：13851358
> 
> 赞同：1
> 
> 时间：2012-12-13T01:03:19.263
> 
> 标签：java, apache-poi, excellibrary

作为标题，我在这里有点麻烦。我可以从单元格中获取字体

```
HSSFFont font =
    cell.getRow().getSheet().getWorkbook().
    getFontAt(cell.getCellStyle().getFontIndex()); 
```

但现在我需要获取它的范围名称。实际上我需要一些东西来锚定和确定关键单元格和它自己的值单元格。

是否有一些方法可以获取范围名称，例如`workBook.getName()`或者`.getNameAt()`如何从 HSSFCell获取**名称索引？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T23:33:20.223

除了富文本字符串，一个单元格只分配了一种字体，但它可能被多个命名范围引用。因此，您需要遍历工作簿的命名范围并检查是否引用了单元格。为了简单起见，我对所有内容进行了迭代`area.getAllReferencedCells()`- 如果范围很大，您需要检查该区域`isContiguous()`是否以及您的单元格/行索引是否在边界框的单元格/行索引`getFirstCell()`内。`getLastCell()`

有关更多信息，请查看[Busy Developers' Guide to HSSF and XSSF Features](http://poi.apache.org/spreadsheet/quick-guide.html#NamedRanges)。

[或者在stackoverflow上搜索...](https://stackoverflow.com/search?q=%5Bapache-poi%5D+range+name)

（在我的测试用例中，一个单元格（第 4 行，第 3 列）被三个不同形状的命名范围引用）

```
import java.io.File;
import java.util.*;
import org.apache.poi.ss.usermodel.*;
import org.apache.poi.ss.util.*;

public class XlsRangeNames {
    public static void main(String[] args) throws Exception {
        Workbook wb = WorkbookFactory.create(new File("src/test/resources/name-range.xls"));

        Cell cell = wb.getSheetAt(0).getRow(3).getCell(2);

        for (Name n : getNamedRangesForCell(wb, cell)) {
            System.out.println(n.getNameName());
        }
    }

    static List<Name> getNamedRangesForCell(Workbook wb, Cell cell) {
        int col = cell.getColumnIndex();
        int row = cell.getRowIndex();
        String sheetName = cell.getSheet().getSheetName();
        List<Name> result = new ArrayList<Name>();

        for (int i=0; i<wb.getNumberOfNames(); i++) {
            Name name = wb.getNameAt(i);
            if (!sheetName.equals(name.getSheetName())) continue;

            AreaReference area = new AreaReference(name.getRefersToFormula());
            CellReference crList[] = area.getAllReferencedCells();
            for (CellReference cr : crList) {
                if (cr.getCol() == col
                    && cr.getRow() == row) {
                    result.add(name);
                    continue;
                }
            }
        }

        return result;
    }
} 
```

# c++ - 可以使用vector.back() 为向量的最后一个元素赋值吗？

> ID：13851367
> 
> 赞同：11
> 
> 时间：2012-12-13T01:04:32.257
> 
> 标签：c++, vector

我有一些代码需要将向量的第一个和最后一个元素分配为特殊情况。

somevector.back() 是左值吗？下面的代码会起作用吗？

```
some_vector.front()=first_value;
some_vector.back()=last_value; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-13T01:09:53.910

是的，它可以，因为它返回对最后一个元素的引用。最好先确保它不是空的！

# capybara - Capybara：是否可以为 save_and_open_page 指定场景名称

> ID：13851368
> 
> 赞同：0
> 
> 时间：2012-12-13T01:04:47.403
> 
> 标签：capybara

我想知道是否可以重命名在 Capybara 中使用 save_and_open_page 作为场景名称时创建的默认文件？

到目前为止，我已经创建了以下内容：

```
After do |scenario|
   if(scenario.failed?)
     save_and_open_page 
   end
end 
```

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:26:54.880

`save_and_open_page` [可以采用可选的文件名参数](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Session#save_and_open_page-instance_method)：

```
save_and_open_page('page.html') 
```

# c++ - C++更快的方法来做字符串加法？

> ID：13851370
> 
> 赞同：6
> 
> 时间：2012-12-13T01:04:58.670
> 
> 标签：c++, string, performance

我发现标准字符串添加非常慢，所以我正在寻找一些可以加快我拥有的一些代码的技巧/技巧。

我的代码基本上结构如下：

```
inline void add_to_string(string data, string &added_data) {
   if(added_data.length()<1) added_data = added_data + "{";
   added_data = added_data+data;
}

int main()
{
   int some_int = 100;
   float some_float = 100.0;
   string some_string = "test";

   string added_data;
   added_data.reserve(1000*64);

   for(int ii=0;ii<1000;ii++)
   {
      //variables manipulated here
      some_int = ii;  
      some_float += ii;
      some_string.assign(ii%20,'A');
      //then we concatenate the strings!
      stringstream fragment;
      fragment<<some_int <<","<<some_float<<","<<some_string;
      add_to_string(fragment.str(),added_data);
   }
   return;
} 
```

做一些基本的分析，我发现在 for 循环中使用了大量的时间。我能做些什么来显着加快速度吗？使用 c 字符串而不是 c++ 字符串会有所帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T01:17:10.890

字符串添加不是您面临的问题。std::stringstream 由于它的设计而被称为慢。在 for 循环的每次迭代中，stringstream 至少负责 2 次分配和 2 次删除。这 4 种操作中的每一种操作的成本都可能高于字符串添加的成本。

分析以下内容并测量差异：

```
std::string stringBuffer;
for(int ii=0;ii<1000;ii++)
{
  //variables manipulated here
  some_int = ii;  
  some_float += ii;
  some_string.assign(ii%20,'A');
  //then we concatenate the strings!
  char buffer[128];
  sprintf(buffer, "%i,%f,%s",some_int,some_float,some_string.c_str());
  stringBuffer = buffer;
  add_to_string(stringBuffer ,added_data);
} 
```

理想情况下，将 sprintf 替换为 _snprintf 或编译器支持的等效项。

根据经验，默认情况下使用 stringstream 进行格式化，并在性能很重要时切换到更快、更不安全的函数，如 sprintf、itoa 等。

编辑：那个，以及 didierc 所说的： added_data += data;

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T01:15:05.663

如果您不在`add_to_string`循环中调用，您可以节省大量字符串操作。

我相信这也是一样的（尽管我不是 C++ 专家，也不知道具体是做什么[`stringstream`](http://en.cppreference.com/w/cpp/io/basic_stringstream)的）：

```
stringstream fragment;
for(int ii=0;ii<1000;ii++)
{
  //variables manipulated here
  some_int = ii;  
  some_float += ii;
  some_string.assign(ii%20,'A');
  //then we concatenate the strings!
   fragment<<some_int<<","<<some_float<<","<<some_string;
}

// inlined add_to_string call without the if-statement ;)
added_data = "{" + fragment.str(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T01:27:12.023

我看到您在 上使用了 reserve 方法`added_data`，这应该有助于避免在字符串增长时对其进行多次重新分配。

您还应该`+=`尽可能使用字符串运算符：

```
added_data += data; 
```

`added_data`我认为通过避免在进行连接时在临时字符串中来回进行不必要的复制，以上内容应该可以节省大量时间。

该`+=`运算符是该`string::append`方法的一个更简单的版本，它只是`data`直接在`added_data`. 由于您进行了预留，因此仅该操作就应该非常快（几乎相当于 strcpy）。

~~但是，当您已经在使用字符串流来处理输入时，为什么还要经历这一切呢？一开始就把它全放在那里！~~

stringstream 类确实效率不高。

如有必要，您可以查看[stringstream 类](http://www.cplusplus.com/reference/sstream/stringstream/)以获取有关如何使用它的更多信息，但您使用字符串作为缓冲区的解决方案似乎避免了该类速度问题。

无论如何，除非您真的知道自己在做什么，否则不要尝试在纯 C 中重新实现速度关键代码。其他一些 SO 帖子支持这样做的想法，但我认为最好（阅读*更安全*）尽可能多地依赖标准库，这将随着时间的推移而得到增强，并照顾你（或我）的许多极端情况) 不会想到的。如果您的输入数据格式是一成不变的，那么您可能会开始考虑走这条路，否则就是过早的优化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-13T01:10:51.097

如果您`added_data`以 a开头`"{"`，您将能够`if`从您的`add_to_string`方法中删除 ：`if`当字符串为空时，只执行一次，因此您不妨立即将其设为非空。

此外，您`add_to_string`制作了一份`data`; 这不是必需的，因为它不会被修改。接受`data`引用`const`应该会为您加快速度。

最后，更改`added_data`from `string`to`sstream`应该可以让您在循环中附加到它，而无需在循环`sstream`的每次迭代中创建、复制和丢弃中介。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-13T01:44:21.500

请查看LLVM 中使用的[Twine 。](http://llvm.org/doxygen/classllvm_1_1Twine.html)

> Twine 是一种绳索，它使用二叉树表示连接的字符串，其中字符串是节点的前序。由于 Twine 在使用其结果时可以有效地呈现到缓冲区中，因此它避免了为中间字符串结果生成临时值的成本——尤其是在从不需要 Twine 结果的情况下。通过显式跟踪叶节点的类型，我们还可以避免为转换操作创建临时字符串（例如将整数附加到字符串）。

它可能有助于解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T02:07:03.350

这种方法怎么样？

这是 MSVC 2010 报告的 DevPartner。

![在此处输入图像描述](../Images/074b37d73dc71a9d71525ed552be9a62.png)

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-12-13T01:10:41.597

字符串 newstring = stringA & stringB;

我不认为字符串很慢，它的转换会使它变慢，也许你的编译器可能会检查变量类型是否不匹配。

# asp.net - 除特定 URL 之外的所有 ASP.Net 重定向规则

> ID：13851373
> 
> 赞同：3
> 
> 时间：2012-12-13T01:05:46.627
> 
> 标签：asp.net, regex

我有以下重定向规则，一个用于非 www url (http://mysite.co.uk/....)，另一个用于将 www URL 重定向到[http://www.mysite2.co.uk /](http://www.mysite2.co.uk/) ...

目前规则是包罗万象的。如果点击包含“/mystring/mystring.aspx”的某个 URL，我不希望执行规则。

谁能帮我写这个规则？

```
 <rule name="Canonical Host Name - mysite" stopProcessing="true">
      <match url="(.*)" />
      <conditions>
        <add input="{HTTP_HOST}" pattern="^(?:www|[^.]+\.)*mysite\.co.uk$" />
      </conditions>
      <action type="Redirect" url="http://www.mysite2.co.uk/{R:1}" redirectType="Permanent" />
    </rule>     
    <rule name="Canonical Host - mysite 2" stopProcessing="true">
      <match url="(.*)" />
      <conditions>
        <add input="{HTTP_HOST}" pattern="^www\.mysite\.co.uk$" />
      </conditions>
      <action type="Redirect" url="http://www.mysite2.co.uk/{R:1}" redirectType="Permanent" />
    </rule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:15:50.903

您应该能够通过添加条件并使用`negate="true"`. 像这样的东西：

```
<conditions logicalGrouping="MatchAll">
    <add input="{HTTP_HOST}" pattern="^(?:www|[^.]+\.)*mysite\.co.uk$" />
    <add input="{PATH_INFO}" pattern="mystring\/mystring\.aspx" negate="true" />
</conditions> 
```

# opencv - OpenCV OutputArray 堆损坏？

> ID：13851375
> 
> 赞同：3
> 
> 时间：2012-12-13T01:05:54.083
> 
> 标签：opencv, parameter-passing, heap-corruption

我正在编写一个使用 OpenCV 2.4.3 进行一些图像处理的函数，并且我使用 InputArray 和 OutputArray 作为参数类型。在使用 Visual Studio 2008 Express 的 Debug 构建中，下面的代码（最小测试用例）在 for(;;) 循环的第一次迭代后给了我这个非常奇怪的错误：

*“HEAP [Test.exe]：0032F598 处的堆块在 0032F5D0 处修改，超过 30 的请求大小 Windows 已触发 Test.exe 中的断点。这可能是由于堆损坏，这表明 Test.exe 中存在错误或它已加载的任何 DLL。这也可能是由于用户在 Test.exe 获得焦点时按 F12。*

```
struct Corner
{
    float x;
    float y;
    float response;
};

void my_CornerDetector(InputArray _image, OutputArray _corners)
{
    vector<Corner> corners;
    Corner c;
    c.x = 150; c.y = 200; c.response = 0.1485;
    corners.push_back(c);
    corners.push_back(c);
    corners.push_back(c);
    Mat(corners).copyTo(_corners);
}

void main()
{
    Mat frame, frame_gray;    
    namedWindow("Output", CV_WINDOW_AUTOSIZE ); 

    VideoCapture capture;
    capture.open(0);
    for (;;)
    {
        capture >> frame;
        if (frame.empty())
            break;

        cvtColor( frame, frame_gray, CV_BGR2GRAY );

        vector<Corner> corners;
        my_CornerDetector( frame_gray, corners);

        for( int i = 0; i < corners.size(); i++ )
            circle( frame, Point2f(corners[i].x, corners[i].y), 4, CV_RGB(255,0,0), -1, 8, 0 ); 

        imshow("Output", frame);

        char key = (char)waitKey(2);
        switch (key)
        {
        case 27:
        case 'q':
          return;
          break;
        }
    }
} 
```

请注意，在第一次迭代期间和崩溃之前，for 循环中的角具有正确的值（相同角的 3 倍）。如果我不使用我的 Corner 类型作为 std::vector 我使用 Point2f （并且我忘记了响应字段），则该示例按预期工作。如果我不使用 OutputArray 而不是使用 std::vector &_corners 它也可以正常工作。这是怎么回事？？我觉得可能我需要在某处注册我的类型 Corner 以便它可以与 OutputArray 一起使用，但我在 OpenCV 文档中没有看到这样的东西。

顺便说一句，我没有按 F12 ;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:24:12.067

问题在于通过矢量角。它不会转换为 OutputArray。

替换块：

```
vector<Corner> corners;
my_CornerDetector( frame_gray, corners);    
for( int i = 0; i < corners.size(); i++ )
circle(frame, Point2f(corners[i].x, corners[i].y), 4, CV_RGB(255,0,0), -1, 8, 0 ); 
```

和：

```
Mat corners;
my_CornerDetector( frame_gray, corners);        
for( int i = 0; i < corners.rows; i++ )
{
  Corner c = corners.at<Corner>(i, 0);
  circle(frame, Point2f(c.x, c.y), 4, CV_RGB(255,0,0), -1, 8, 0 );
} 
```

# heroku - Heroku RoR 应用程序在启动时崩溃 - 无法加载 rails_config/sources/yaml_source

> ID：13851376
> 
> 赞同：1
> 
> 时间：2012-12-13T01:05:55.923
> 
> 标签：heroku

我有一个应用程序，我已经成功推送了好几次，当我尝试将它推送到 heroku 时，它刚刚开始崩溃。

我认为我所做的唯一更改是对 yaml 配置文件进行了更改，因此我用早期版本替换了该文件，但崩溃仍在继续。关于如何追踪它的任何想法？

```
heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 38838`
app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- rails_config/sources/yaml_source (LoadError)
app[web.1]:     from /app/vendor/bundle/ruby/1.9.1/gems/rails_config-0.3.1/lib/rails_config.rb:4:in `<top (required)>' 
```

[添加 - 2012 年 12 月 13 日] 有趣的是 - 克隆本地 repo 并使用它创建一个新的 Heroku 应用程序工作正常，所以它看起来是实例而不是 repo。触摸文件重新部署并不能修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:26:07.293

原来这是 .slugignore 中的一个问题。

我通过查看 Heroku 如何构建捆绑包并在本地复制它来诊断这一点：

```
bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment. 
```

检查生成的包，我确认确实存在缺少的 yaml_source 文件（来自 rails_config）。然后我记得一半注意到 slug 编译器说它正在删除 3 个文件而不是通常的 1 个。

我有一个试图排除的顶级“来源”目录

```
sources 
```

在 .slugignore 文件中。这与 gem 中的源目录匹配。将条目更改为预期

```
/sources/ 
```

一切都好起来了。

这留下了 Heroku 似乎在不同情况下使用不同版本的 Slug 编译器的观察结果，并且它似乎已经改变。（我的应用程序在不同的实例上运行，并且 .slugignore 文件长期以来一直不正确）

# php - 在 Imagick 中自动设置压缩级别以达到最大文件大小

> ID：13851377
> 
> 赞同：4
> 
> 时间：2012-12-13T01:06:12.423
> 
> 标签：php, imagemagick, imagick

我在上传图像时检索图像的大小：

```
$im->getImageSize(); 
```

这将返回图像的大小（以字节为单位）。

我想自动设置压缩级别，以便文件大小永远不会超过某个大小。如果我想限制为 70kb，最小允许压缩级别为 60（范围为 0-100），我会先执行以下操作：

```
 public function getCompLevel($size)
 {
                    $maxsize = 70000; // Set rough max size of file
                    $mincomp = 60;   // Set minimum compression level allowed

                    if($size > $maxsize ){   // If file size exceeds max allowed size, perform calculation
                        $comp = **EQUATION**
                    }

        return ($comp < $mincomp) ? $mincomp : $comp; // if output is less than minimum allowed compression , return minimum.  If not return calculated compression level
 } 
```

我想弄清楚的是根据文件大小计算所需压缩级别的近似值所需的等式。我知道由于颜色会影响文件大小，这可能不是那么准确，但我想尽可能接近。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:33:28.420

我喜欢这个问题，虽然真的没有正确的答案。我已经复制了多个实例，其中变量`$x`将表示从零开始的文件大小，并将增加到最大文件大小的两倍。此外，我创建了一个变量`$equalizer`。该变量以指数方式起作用，而将其设置为`100`将创建更高的压缩级别，或者越接近`0`将创建更大的间隙。

```
<?php
$max_file_size = 70000;
$max_compression = 60;
$equalizer = 100;

for($x=0;$x<$max_file_size+$max_file_size;$x+=10000){
    if($x < $max_file_size){
        echo $max_compression.'<br>';
    }else{
        echo $max_compression - (($x / $max_compression * $max_file_size) / ($max_file_size * $max_compression * $equalizer)).'<br>';
    }

}?> 
```

在您的真实世界情况中，我会想象您的功能看起来像：

```
<?php
function getCompLevel($size){
    $maxsize = 70000;
    $compression = 60;
    $equalizer = 100;

    if($size > $maxsize ){
        $compression = $compression - (($size / $compression * $maxsize) / ($maxsize * $compression * $equalizer));
    }

    return $compression;
}?> 
```

# php - 无法让 knockout.js 与 PHP 一起使用

> ID：13851381
> 
> 赞同：0
> 
> 时间：2012-12-13T01:06:48.450
> 
> 标签：php, javascript, knockout.js

我遵循了 knockout.js 网站上的基本教程之一，现在我只是想让它在 localhost 上运行。在头中，我包含了两个文件：knockout.js 和 misc_form.js。

```
<head>
<script src="/knockout.js"></script>
<script src="/misc_form.js"></script>
</head> 
```

我将省略 misc_form.js 的代码，因为我没有修改它，它在 live knockout.js 教程中 100% 有效。

这是HTML

```
//form.php
function display_form(){
?>
<table>
    <thead><tr>
    <th>Passenger name</th><th>Meal</th><th>Surcharge</th><th></th>
    </tr></thead>
    <!-- Todo: Generate table body -->
    <tbody data-bind="foreach: seats">
    <tr>
        <td><input data-bind="value: name" /></td>
        <td><select data-bind="options: $root.availableMeals, value: meal, optionsText: 'mealName'"></select></td>
        <td data-bind="text: formattedPrice"></td>
        <td><a href="#" data-bind="click: $root.removeSeat">Remove</a></td>
    </tr>       
</tbody>
</table>
<button data-bind="click: addSeat">Reserve another seat</button>
 <?
 } 
```

**编辑 - 我更改了文件的路径，现在我收到以下错误**

```
Uncaught TypeError: Cannot read property 'nodeType' of null  //in reference to knockout.js 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:14:46.403

检查脚本文件的路径，这些看起来很奇怪。尝试`http://localhost/Applications/XAMPP/xamppfiles/htdocs/misc_form.js`在网络浏览器中访问，你看到你的 JavaScript 代码了吗？

从网址来看，我猜它们应该是：

```
<head>
<script src="/knockout.js"></script>
<script src="/misc_form.js"></script>
</head> 
```

因为`htdocs`很可能是作为`/`.

# ruby-on-rails - FactoryGirl has_many 与验证的关联

> ID：13851382
> 
> 赞同：19
> 
> 时间：2012-12-13T01:06:52.320
> 
> 标签：ruby-on-rails, factory-bot

我有一个标准的`has_many`关系（预订有很多订单），并验证没有至少一个订单就不会保存预订。我试图用我的 FactoryGirl 工厂复制它，但验证阻止我这样做。

```
class Booking < ActiveRecord::Base
  has_many :orders
  validates :orders, presence: true
end

class Order < ActiveRecord::Base
  belongs_to :booking
end 
```

以下是 FactoryGirl 的 GitHub wiki 页面中每个型号的 FactoyGirl 工厂规格。

```
FactoryGirl.define do                                                    

  factory :booking do                                                                                                                   
    factory :booking_with_orders do

      ignore do                                                                                                                         
        orders_count 1                                                                                                                  
      end                                                                                                                               

      before(:create) do |booking, evaluator|                                                                                           
        FactoryGirl.create_list(:order, evaluator.orders_count, booking: booking)                                                       
      end                                                                                                                               
    end                                                                                                                                 
  end 

  factory :order do
    booking
  end

end 
```

当我尝试`FactoryGirl.create(:booking_with_orders)`从我的规范运行时，我得到：

```
Failure/Error: @booking = FactoryGirl.create(:booking_with_orders)
ActiveRecord::RecordInvalid:
  Validation failed: Orders can't be blank 
```

似乎验证检查甚至在`before(:create) [...]`理论上会为预订创建订单之前运行。

[这篇文章](https://stackoverflow.com/questions/4047793/factory-girl-error-with-has-many-relationship)建议不要向`has_many`你的工厂添加关系，但如果有一个好的方法，我还是想解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-05-07T01:19:14.380

笏？不可能的？一点也不。

只需将您的代码更改为如下所示：

```
after :build do |booking, evaluator|
  booking.orders << FactoryGirl.build_list(:order, evaluator.orders_count, booking: nil)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T14:05:11.630

从@jassa 的回答出发，如果您只需要添加具有特定属性的单个（必需）关联记录，则此模式对我有用：

```
factory :booking do
  ignore do
    order_name "name"
  end

  after :build do |factory, evaluator|
    factory.orders << FactoryGirl.build(:order, name: evaluator.order_name, booking: nil)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T18:35:16.030

这似乎是一个过于简单化的观察，但您实际上要做的是确保在`Order`之前存在`Booking`，这是不可能的，因为`Order`没有它就无法存在`booking_id`（意味着`Booking`需要首先创建）。

您的工厂中的 has_many 关系没有任何问题，问题在于您的验证。这目前在您的应用程序中有效吗？在这种情况下，您如何保存记录？创建订单和预订的流程是什么？

即使是臭名昭著的`accepts_nested_attributes_for`人在这里也帮不了你。

我的建议是重新考虑您的记录保存和验证策略，使其更加理智。

# javascript - Firefox 中为分配给 javascript 的侦听器的 Javascript 事件

> ID：13851383
> 
> 赞同：0
> 
> 时间：2012-12-13T01:06:54.567
> 
> 标签：javascript, firefox, event-handling

好的，所以这里有一个关于 Firefox 没有响应 window.event 的问题，这里经常被问到，你需要在函数中添加一个额外的参数。我对此没有任何问题；我的问题是，如果我想从不同的 Javascript 函数中分配事件侦听器，我该怎么做？

基本上，我想要做的是一个常见的效果，当你可以有一个带有灰色文本的表单框，例如，“你的名字......”然后当你单击框时，文本消失并且颜色变为黑色；unfocus 框仍然为空，提示文本将返回。

现在，我没有直接为我想要使用它的每个页面编写代码，而是尝试创建一个可以使用表单 ID 调用的函数，它会自动将其应用于每个输入元素。这是代码：

```
function fadingForm(formElementID, endColor)
{
  var form = document.getElementById(formElementID);

  for(var i = 0; i < form.elements.length; i++)
  {
    form.elements[i].originalValue = form.elements[i].value;
    form.elements[i].originalColor = form.elements[i].style.color;
    form.elements[i].changedColor  = endColor;

    // Somehow I need to get that event parameter in here I guess?
    // I tried just putting the variable event in as a parameter,
    //   but as you'd expect, that doesn't work.
    form.elements[i].onfocus = function() { focused(); };
    form.elements[i].onblur  = function() { blurred(); };
  }
}

function focused(e)
{
  evt = e || window.event;
  element = evt.target;

  if(element.value == "" || element.value == element.originalValue)
  {
    element.value = "";
    element.style.color = element.changedColor;
  }
}

function blurred(e)
{
  evt = e || window.event;
  element = evt.target;

  if(element.value == "" || element.value == element.originalValue)
  {
    element.value = element.originalValue;
    element.style.color = element.originalColor;
  }
} 
```

当然，这在 Chrome、Safari 等中非常有效……只是在 Firefox 中不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:19:20.197

您的事件侦听器`focused`并`blurred`接受事件对象`e`，但您从不提供事件对象。提供给匿名包装函数的事件对象从不使用也不传递给`focused`/ `blurred`。因此，`e`始终未定义。

相反，当您设置侦听器时，请执行以下操作：

```
form.elements[i].onfocus = function(e) { focused(e); };
form.elements[i].onblur  = function(e) { blurred(e); }; 
```

甚至：

```
form.elements[i].onfocus = focused;
form.elements[i].onblur  = blurred; 
```

以便将事件对象直接传递到您的侦听器函数中。

# c - 在c中保留变量数组的地址

> ID：13851388
> 
> 赞同：3
> 
> 时间：2012-12-13T01:07:25.530
> 
> 标签：c, variables, reserved

我有一个似乎很简单的问题，我确信我之前已经解决了，但是我很难再次找到答案，所以希望有人可以为我指明正确的方向

我有一块内存区域，我想为我的代码中的特定变量“保留”。

我知道我可以通过编辑链接器脚本并从 rom 部分中删除我的数据块来做到这一点，以确保程序代码没有写入特定地址 - 而不是编辑脚本我记得在 c 代码中做了很长时间过去。我使用编译指示或类似的东西做了它，从记忆中它看起来像这样（代码不正确，但这就是我记得的模糊内容！）

"#pragma _address @0x00040000 char mydata[1024];"

这将在地址 0x00040000 处保留 1024 个字节的数据。

有谁知道上述代码的正确格式？

对于上下文 - 我正在使用基于闪存的微处理器编写嵌入式 C 应用程序。该区域是闪存，我想在那里存储闪存配置数据（由我的程序生成）。要使用闪存，我需要将我的数据对齐到正确的块中，所以我需要指定地址。我想做的是保留一块不会被我的程序代码填充的闪存区域，以便我可以用我的配置数据填充它。

谢谢你的帮助！

斯蒂沃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:14:16.970

该`#pragma`指令具有实现定义的关键字，因此您的答案取决于您的编译器。建议查阅您的编译器手册。

# python - python eval() 中的有效语句是什么？

> ID：13851389
> 
> 赞同：4
> 
> 时间：2012-12-13T01:07:33.497
> 
> 标签：python, eval

我试过了

```
eval('print("hello world")')
eval('return 0') 
```

这两个都不正确。为什么它们无效，使用时我应该遵循哪些规则`eval()`（除了尽可能少）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T01:09:16.907

在 Python 中，`eval()`计算*表达式*（产生值的东西）。`print`和都`return`定义为*语句*（然而在 Python 3 中，`print`实际上是一个函数调用，它是一个表达式）。在执行语句的情况下，您需要使用[语句`exec`来](http://docs.python.org/2/reference/simple_stmts.html#grammar-token-exec_stmt)代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:52:53.987

**eval() 用于评估变量的值作为变量。**

例子：

```
var="Hello World!"
code="var"
print eval(code) 
```

输出应该是：

```
Hello World! 
```

# java - 使用spring mvc在jsp中显示来自相对路径的所有图像

> ID：13851392
> 
> 赞同：3
> 
> 时间：2012-12-13T01:08:08.550
> 
> 标签：java, image, spring-mvc, path, relative-path

我将图像上传到文件夹并将相对路径保存到数据库。但是当我尝试显示所有图像时，它只显示一个图像（第一个），然后我得到一个错误：

```
 SEVERE: Servlet.service() for servlet jsp threw exception
    java.lang.IllegalStateException: getOutputStream() has already been called for this response
at org.apache.catalina.connector.Response.getWriter(Response.java:636)
at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:214) 
```

任何人怎么知道我可以解决这个问题？各种帮助将不胜感激。

这是用于读取文件的控制器：

```
 @RequestMapping(value = "/allpictures", method = RequestMethod.GET)
public String getAllImages(ModelMap model, HttpServletRequest req, HttpServletResponse response, SecurityContextHolderAwareRequestWrapper request)
{

    String name = request.getUserPrincipal().getName();
    model.addAttribute("username", name);

    Collection<UploadImage> images = img.showAllPictures();

    for (UploadImage uploadImage : images)
    {
        System.out.println("name "+uploadImage.getFileName());
        System.out.println("path "+uploadImage.getFilePath());
        System.out.println("upload "+uploadImage);
        OutputStream out;
        try
        {
            out = response.getOutputStream();
            InputStream inputStream = new FileInputStream(new File(uploadImage.getFilePath()));

            byte[] buf = new byte[32 * 102400];
            int nRead = 0;
            while ((nRead = inputStream.read(buf)) != -1)
            {
                out.write(buf, 0, nRead);
            }
            model.addAttribute("all", uploadImage);
            out.flush();
            out.close();
            return "allpictures";
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }
    return "redirect:/index";
} 
```

这是jsp代码：

```
<%@ page language="java" contentType="text/html; charset=US-ASCII"
pageEncoding="US-ASCII"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
 <%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
 <%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4   /loose.dtd">
 <html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
  </head>
 <body>
 <c:forEach var="all" items="${all}">
 <img alt="pictures3" src="<%=request.getContextPath()%>/${all}" width="70"     height="70">        
 </c:forEach>

 </body>
 </html> 
```

# firebase - firebase 不保存数据

> ID：13851393
> 
> 赞同：0
> 
> 时间：2012-12-13T01:08:09.360
> 
> 标签：firebase

我正在使用 firebase，由于某种原因，我的代码没有推送数据，而且我没有在 firebase url 中看到数据。我的代码是这个

```
var chatref = new Firebase('https://flockedin.firebaseio.com/');
chatref.push({ ChatId: $('#conversationId').text(), User: $('#username').html(), Message: $('#txtchat').val() }, function (response) { if (response) { alert('saved'); } }); 
```

我收到警报“已保存”，但我无法在 firebase url 中找到数据。

此外，为 Firebase 中的每个 url 提供的 API Key 的用途是什么。

更新：这发生在 IE10 中。在其他浏览器中它工作正常

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T22:31:38.143

IE10 似乎对我有用。您能否提供有关您使用的版本（台式机/平板电脑/手机？）的更多详细信息。

另外，您的 jquery 选择器是否有可能返回 null？如果您设置的对象中的所有值都评估为 null，Firebase 会将其视为删除调用。请参阅文档中的注释集：[https ://www.firebase.com/docs/javascript-client/firebase/set.html](https://www.firebase.com/docs/javascript-client/firebase/set.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-18T08:30:22.900

尝试转到您的 FireBase 控制台-> 数据库-> 规则并将它们设置为：

```
{
  "rules": {
    ".read": true,
    ".write": true
  }
} 
```

执行此操作时，请确保您的应用不公开。Lmk 如果有帮助。

# swingworker - 无法在摇摆工人中调用方法

> ID：13851395
> 
> 赞同：0
> 
> 时间：2012-12-13T01:08:24.737
> 
> 标签：swingworker

我有一个带有 ActionListener 的按钮，并尝试在 SwingWorker 中调用 CopyTask 方法，但 Eclipse 显示错误“对于 ActionListener(){} 类型的方法 CopyTask(File, File) 未定义”。你们能帮忙吗

```
//imported everything needed
 public class A extends JFrame implements PropertyChangeListener
 {
 File src;
 File dest;
 CopyTask task;
//other components
          JTextFiles jt = new JTextField();

                                 src = new File(jt.getText()); //getting input from JTextField
                     dest = new File ("\\C$\\Web"); //providing the location manually

                CopyTask task = this.new CopyTask(src, dest);
                task.addPropertyChangeListener(this);
                        task.execute();

             @Override
       public void propertyChange(PropertyChangeEvent evt)
       {
           if("progress".equals(evt.getPropertyName()))
           {
               int progress = (Integer) evt.getNewValue();
               progressAll.setValue(progress);
           }
       }

       class CopyTask extends SwingWorker<Void, Integer>
       {
           private File source;
           private File target;
           private long totalBytes = 0;
           private long copiedBytes = 0;

           public CopyTask(File src, File dest)
           {
               this.source = src;
               this.target = dest;

               progressAll.setValue(0);
          //     progressCurrent.setValue(0);
           } 

   @Override
   public Void doInBackground() throws Exception
           {
               ta.append("Retrieving some info ... ");
               retrieveTotalBytes(source);
               ta.append("Done!\n");

               copyFiles(source, target);
               return null;
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T10:10:52.477

您能否稍微重构您的代码，以便它可以完全独立地用作示例。我真的看不出（从您的代码示例中）按钮现在在哪里起作用？

例子 ：

```
public class A extends JFrame {

  File src;
  File dst;
  JButton button;

  public A() {
    // Add button to JFrame

    // Set button action
    button.setAction(new AbstractAction() {
      public void actionPerformed() {
        CopyTask ct = new CopyTask(src, dst);
        ct.execute();
      }
    }
  }

  class CopyTask extends SwingWorker<Void, Integer> { ... }
} 
```

# javascript - Javascript if 语句不起作用

> ID：13851399
> 
> 赞同：6
> 
> 时间：2012-12-13T01:09:06.547
> 
> 标签：javascript, if-statement

我想做的事情非常简单：

*   如果输入是`0`，这意味着他们没有输入数字，它应该告诉你。
*   当输入为`7`时，它应该说你做对了。
*   其他任何事情，它都应该告诉你你弄错了。

但无论输入是什么，它都只会输出“7 是正确的”行，我无法弄清楚哪里出了问题。

```
<script type="text/javascript">
function problem2 ()
{
var number = 0;
var text=document.getElementById("output");
number = prompt("Enter a number between 1 and 10 please" , 0);
if (number = 0)
    {
     text.value = "You didn't enter a number!";
    }
if (number = 7)
    {
     text.value = "7 is correct!";
    }
else
    {
     text.value = "Sorry, ", input, "is not correct!";
    }
}
</script>
<input type="button" value="Click here" onclick="problem2()">
<input id="output" type="text"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T01:09:50.083

您正在分配`=`. 使用`==`或`===`。

```
if( 0 == number ){

  text.value = "You didn't enter a number!";
} 
```

另外，请注意您的支架放置。Javascript 喜欢在行尾自动添加分号。[来源](https://stackoverflow.com/questions/2846283/what-are-the-rules-for-javascripts-automatic-semicolon-insertion)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T01:12:15.627

您正在使用赋值运算符作为条件而不是比较运算符：

```
if (number = 0) // falsy. Same as if (false)
    {
     text.value = "You didn't enter a number!";
    }
if (number = 7) // truthy. Same as if (true)
    {
     text.value = "7 is correct!";
    }
else
    {
     text.value = "Sorry, ", input, "is not correct!";
    } 
```

或者，您可以使用开关并更轻松地组织条件：

```
switch (number) {
    case 0: 
        text.value = "You didn't enter a number!";
        break;

    case 7:
        text.value = "7 is correct!";
        break;

    default:
        text.value = "Sorry, ", input, "is not correct!";
        break;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T01:19:35.597

这是包含一些修复和改进的代码（我评论了我所做的更改）：

```
function problem2 (){
    //I multiplied by * 1 to work with numbers, also used || to default to 0 in case of NaN
    var num = (prompt("Enter a number between 1 and 10 please" , 0) * 1) || 0;
    var msg = "";

    if (!num){ //I prefer this over 'num == 0'
         msg = "You didn't enter a number!";
    //you should use 'else if' in this case
    }else if (num == 7){//'=' is for assignment, use '==' or '===' instead
         msg = "7 is correct!";
    }else{
        //you had an undefined var 'input', you probably meant 'num'
        //you also were connecting var and strings using commas, use '+' instead
         msg = "Sorry, " + num + " is not correct!"; //added a space in ' is'
    }

    //no need to store the element in a var anymore :D
    document.getElementById("output").value = msg;
} 
```

此外，还可以进行另外两项更改：

*   只有一个`var`（例如`var something = "", somethingElse = 99;`）
*   从头开始分配默认文本，喜欢`var msg = "default"`并删除`else`

**注意：**我所做的一个未记录的更改是重命名了一些 var，我鼓励大家停止使用 var `number, text, string`，如果你有这个坏习惯，你最终会错误地使用非法的 var 名称。

# php - 设置邮件 (PHP)

> ID：13851401
> 
> 赞同：0
> 
> 时间：2012-12-13T01:09:15.683
> 
> 标签：php, sql, email

> **可能重复：**
> [从 PHP 页面使用 GMail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

我对 PHP 中的邮件很陌生，我想设置 mail()。

问题是，经过几个小时的尝试让它工作，我根本做不到！

我希望这种情况发生：

我想通过我的 gmail 地址向我网站上的用户发送电子邮件。

1.  我不确定我在哪里为 gmail 配置 SMTP。我是否编辑 php.ini (ssl:smtp.gmail.com; 465) 中的设置？

2.  有没有一种方法可以使用 PHP mail() 函数发送电子邮件而无需使用 pear 之类的东西？我只是想使用 mail() 函数。

3.  如果这是不可能的，有没有办法可以通过本地主机设置向我的用户发送电子邮件？

在过去的几个小时里四处寻找答案后，我很困惑。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:11:32.860

我发现让 PHP 使用 SMTP 发送邮件的最简单方法是通过[`Mail`Pear 包](http://pear.php.net/manual/en/package.mail.mail.send.php)。

这样您就不必涉及和过度使用 PHPMailer 等第三方库。

* * *

这是一个例子：

```
<?php
require_once "Mail.php";

$headers = array(
  'From' => "Sandra Sender <sender@example.com>",
  'To' => $to="Ramona Recipient <recipient@example.com>",
  'Subject' => "Hi!"
);

$smtp = Mail::factory('smtp', array(
  'host' => "ssl://smtp.gmail.com",
  'port' => 465,
  'auth' => true,
  'username' => "smtp_username",
  'password' => "smtp_password"
));

$body = "Hi,\n\nHow are you?";

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) {
  echo $mail->getMessage();
}
else {
  echo "mail sent successfully";
} 
```

# ms-access - 报表生成器（数字隐喻）在详细信息带中添加空行，直到页面末尾

> ID：13851404
> 
> 赞同：4
> 
> 时间：2012-12-13T01:09:39.530
> 
> 标签：ms-access, row, delphi-2006, reportbuilder

我在 Delphi 2006 中使用 ReportBuilder 10 和 Access 2000 数据库。我正在尝试使用过滤查询创建报告。

[Telerik 报告：详细信息带中的淀粉线或添加空行](https://stackoverflow.com/questions/12070782/telerik-report-starch-line-in-detail-band-or-add-empty-rows)

[在报表生成器/SSRS 的每一页上重复一条垂直线](https://stackoverflow.com/questions/11106936/repeat-a-vertical-line-on-every-page-in-report-builder-ssrs)

与上面的问题类似，我试图在过滤后的查询记录之后在 ReportBuilder 的详细信息带中添加空行（或记录）。直到填满页面。我的详细信息带就像一个 excel 表，每页可以占用 25 行。如果我有 30 条记录，那么第一页很好。但第二页将有 5 条记录。然后，细节和页脚带之间会出现巨大的差距。那看起来很糟糕。

我试图搜索这个，但没有出现。只有上面的第二个链接。但是没有发布我可以使用的解决方案。

我希望我能正确地向你们解释我的问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-10T23:33:31.150

我不太了解 ReportBuilder，无法提供详细信息，但我建议

1.  在报表的查询结果中添加 25 个空白行。您应该能够使用一系列 UNION 命令来执行此操作。确保任何排序操作都将它们放在结果的末尾。
2.  创建一个布尔变量`isBlankLine`，在评估布局时为每行详细信息更新。如果记录是空行（在步骤 1 中添加的行之一），则此变量简单地设置为 true。
3.  `isReportEnd`创建另一个在页脚上计算的布尔变量。如果`isBlankLine`为真，则设置为真，否则设置为假。
4.  最后，对于每个详细信息行，如果`isReportEnd`为真，则取消该行。

这将允许页面填充空白行并禁止任何其他页面。我能想到的唯一问题是，如果报告以 25 条记录结束，这样下一页的第一行将是空白行，那么您的最后一页将是空白的。

# python - 编辑边界以消除 matplotlib 绘图中的空白

> ID：13851410
> 
> 赞同：0
> 
> 时间：2012-12-13T01:10:17.393
> 
> 标签：python, matplotlib, plot, whitespace

![在此处输入图像描述](../Images/a0a9b0da5f13598178f32bc83e573056.png)![左：2000-2040 年的数据，右：2001-2039 年的数据][2]

有没有办法可以手动编辑我的情节范围？当我的 x 轴数据从 2000 年运行到 2040 年时，matplotlib 重新排列绘图，以便在绘图的左右两侧产生大量空白，如左图所示。但是，当我将 x 轴数据从 2001 更改为 2039 时，右图中没有空格。我怀疑这是因为 matplotlib 如何自动排列刻度。问题是如何手动操作 x-ticks 以避免不必要的空白？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:16:49.693

`xlim`您可以使用称为, `ylim`（设置轴的限制），`xticks`, `yticks`（设置刻度位置）等的各种 pyplot 函数。阅读[文档](http://matplotlib.org/api/pyplot_api.html)。

# cocoa - 从子视图中删除视图不会调用 willRemoveSubview

> ID：13851416
> 
> 赞同：0
> 
> 时间：2012-12-13T01:11:27.057
> 
> 标签：cocoa, nsview, subview, addsubview, superview

我有一个管理视图控制器，当用户选择一个菜单项时，它会切换一组先前分配的子视图控制器中的一个。

当我切换到视图控制器时，我将管理视图控制器的视图连接到子视图控制器中的视图。

[mvc.view addSubview:subvc.view];

一切似乎都很好。

但是，当从视图层次结构中删除该子视图控制器的视图时（例如，在应用程序中切换页面时）：

[subvc.view removeFromSuperview];

*   自定义视图类中的 willRemoveSubview 方法永远不会触发。我已经确认，当我进行 removeFromSuperview 调用时，我是在我的自定义视图类的实例上调用它。

我的自定义视图类中的其他方法确实会触发，例如 viewWillMoveToWindow。

NSView 参考文档说应该调用这个方法？

谁能建议为什么这不起作用？

我在 10.8.2 上运行，使用 Xcode 4.5.2 为 10.7 编译

谢谢

达伦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:56:29.257

`willRemoveSubview:`，顾名思义，是在超级视图上调用的，而不是被移除的子视图。

# php - 在 Mysql 上存储大量表单信息的最佳方法是什么？

> ID：13851420
> 
> 赞同：1
> 
> 时间：2012-12-13T01:11:45.140
> 
> 标签：php, mysql, database-design

我正在创建一个非常简单的网站，您可以在其中注册您的锻炼，以便其他人可以看到它并发表评论。

问题是，例如，如果你每周训练 6 天，做 10 个练习，我将不得不在 Mysql 上存储 60 个练习。

我正在考虑创建一个有 60 行的表，然后我会将所有这些信息存储在那里，但由于某种原因，这似乎不是最好的方法。

所以我该怎么做？我在 Stack Overflow 中查看这里，我看到了一些关于使用数组存储它并使用 PHP 对其进行序列化的内容，但我对此不太确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T01:15:25.413

在担心此类问题之前，您应该考虑什么是数据库。mysql 处理数百万个条目是很常见的。在正常情况下，您不太可能超过此值。如果您确实获得了大量流量并且您的数据库增长到可以进行扩展和升级的程度，那么您会咨询。现在，mysql 将成为你的冠军。

序列化有其用途，但是当您想要单独检查结果时，您将需要使用关系设计。这样，您就可以存储特定锻炼会话的所有信息，并为用户提供更好的统计数据。毕竟，统计数据令人上瘾。该站点上的许多用户不断回来构建统计数据。

我阅读您的问题的方式是，您认为单独存储 60 次锻炼是大量数据。您有一个包含许多字段的表单，并且您想知道如何以一种有意义的方式将这些字段存储在数据库中。不仅适合您，也适合任何进来并注册的人。尽管如此，对于任何数据库来说，这仍然是一项相对较小的任务。关系设计绝对是两种方式的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T01:27:55.547

您应该首先从逻辑上决定要存储什么，而不是如何存储它们。

一旦知道要存储什么，就应该对数据进行规范化以删除冗余数据。这通常通过将数据转换为 3nf 来完成。见 [http://en.m.wikipedia.org/wiki/Database_normalization](http://en.m.wikipedia.org/wiki/Database_normalization)

这样您就可以确保捕获了所有必需的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T01:28:39.777

我建议您在任何情况下都使用数据库，因为您正在“存储”数据。数组序列化并不是真正存储数据，它更多的是存储一个进程供以后使用。

有了数据库，你可以做更多的事情，你现在可能没有幻想，但如果有一天你会对使用你收集的数据有一个新的计划，你会有更多的扩展空间。

# python - 如何遍历对象

> ID：13851425
> 
> 赞同：0
> 
> 时间：2012-12-13T01:12:35.993
> 
> 标签：python, django

我在寻找解决方案时遇到了一些问题。我希望能够输出一些按日期时间过滤的数据，但这样它就可以为具有特定日期的每组对象显示一个单独的 div。这可能吗？我在 django 文档中找不到什么可以让我这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:32:04.180

您想根据日期[重新组合](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#regroup)序列。

# angularjs - 何时以及何时不使用 AngularJS 视图文件中的 {{...}}？

> ID：13851427
> 
> 赞同：1
> 
> 时间：2012-12-13T01:13:16.640
> 
> 标签：angularjs, jwplayer

我正在尝试在我的 AngularJS 项目中使用视频播放器（jwplayer）。这篇文章由两部分组成：第 1 部分是背景，第 2 部分是我的问题。谢谢。

第 1 部分：解决“加载播放器时出错：未找到可播放源”问题。

起初视频没有显示，只有页面 ui 上的一个黑色矩形，以及一条非常误导性的控制台消息，上面写着“没有找到合适的播放器并启用后备”。

几个小时后，我碰巧将 jwplayer 大小配置从“height:450, width:800”更改为“height:'100%', width:'100%'”。这次 jwplayer 在页面 ui 上显示一条消息：“加载播放器时出错：找不到可播放的源”。

这给了我方向。我的 jwplayer 用法如下所示：

```
<!-- this is my index.html -->
<div id="jw_container">Loading the player ...</div>
<script>
    var player = jwplayer("jw_container").setup({
        file:"{{model.my_video.video_url}}",
...... 
```

将该文件行更改为硬编码的绝对视频 url 将起作用，这表明这是真正的问题。所以最终我得到了：

```
file: angular.element(document.getElementById('ng-wrapper')).scope().model.my_video.video_url, 
```

然后问题解决了，现在。（但在我看来，仍然丑陋，不直观。）

================================= 分隔符================= ==

第 2 部分：我真正的问题

来自传统模板引擎的世界，人们可能倾向于在任何他想要的地方使用 {{...}}。但在 AngularJS 中，情况就不同了。

除了上面的例子，这是我之前的另一个例子：

```
<img title="{{my_title}}" src='logo.png'> <!-- This works -->
<img src="{{my_image}}"> <!-- This doesn't. Use ng-src instead. --> 
```

所以一般来说，**什么时候什么时候不使用 AngularJS 视图文件中的 {{...}} ？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-15T16:54:24.123

仅适用于第 1 部分：如果您正在使用 jwplayer 和 Angular，那么我强烈建议您从 Angular 调用 jwplayer，而不是反过来（您在做什么）。

例如

```
myModule.controller('MyController', function ($scope, stuffINeed) {
    jwplayer.key = "myKey";
    jwplayer("myElement").setup({
                file: "MyFileName"
            }); 
```

只要 jwplayer.js 已经加载（在 index.html 中链接或使用 require.js 之类的东西），你就可以开始了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-02T22:12:22.610

将 Jw Player 包装为指令。你可以使用这样的东西：[https ://github.com/ds62987/angular-jwplayer](https://github.com/ds62987/angular-jwplayer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T06:00:20.210

试图就这个话题发表我自己的想法。

规则 #1：永远不要`{{...}}`在 AngularJS 的`<script>...</script>`标签内写入内容。仅仅是因为 AngularJS 的模板系统不能以这种方式工作。相反，使用这个：

```
//This is the usage in the view
angular.element(document.getElementById('the_id')).scope().foo 
```

或者，您可以在视图文件中定义一个额外的助手：

```
//This is another usage in the view
function bar(foo) {
    //do something with foo
} 
```

然后通过控制器文件以“通常”的方式使用您的模型：

```
//This is inside controller file
function YourCtrl($scope) {
    bar($scope.foo);
} 
```

这就对了。

但是我仍然不确定何时以及何时不在视图的 html 部分中使用 {{...}} 。将此部分留给其他人回答。（我现在只是第 2 周的新 AngularJS 学习者。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T18:42:45.727

编辑：我添加了测试插件：[http ://plnkr.co/edit/BMGN4A](http://plnkr.co/edit/BMGN4A)

你能提供一个完整的例子吗？因为我写如下，但`Cannot read property 'videoUrl' of undefined`虽然我`$scope.videodata.videoUrl = "bla bla";` 在我的控制器中有消息。

```
<script type="text/javascript">
    jwplayer("myElement").setup({
        file: angular.element(document.getElementById('myElement')).scope().videodata.videoUrl,
        image : "http://i3.ytimg.com/vi/2hLo6umnjcQ/mqdefault.jpg",
        autostart : "false",
        id : 'playerID',
        width: '700px',
        height: '400px',
        primary : "flash",
        stretching : "uniform",
        modes : [{
            type : 'html5'
        }, {
            type : 'download'
        }, {
            type : 'flash',
            src : 'player.swf'
        }]
    });
</script> 
```

# php - PHP system() 和 exec() 函数不适用于临时文件

> ID：13851428
> 
> 赞同：2
> 
> 时间：2012-12-13T01:13:34.083
> 
> 标签：php, web-services

我正在使用`system()`PHP 中的函数来调用我需要使用的 CLI 程序，该程序当前在 PHP 中不可用（下面的代码）。我正在使用 xml2brl (liblouisxml) CLI 生成包含盲文 ASCII 文本的输出文件。使用下面的代码，成功创建了两个文件，第一个文件成功写入了输入文本；但是，输出文件（第二个文件）永远不会将翻译后的文本写入其中。

不过，这是奇怪的部分。使用传递给的相同命令`system()`和我在 PHP 中创建的相同临时文件，我可以在终端中以我的用户身份成功运行该命令。这个问题可能是由什么引起的？当我通过 运行`whoami`命令时`system()`，我得到了我的用户，并且临时文件或 CLI 命令都不需要特殊权限`xml2brl`。

目前，我正在 PHP 中创建两个临时文件：

```
//Create the temporary files that will be passed to xml2brl
$_standardText = tempnam("~/tmp", "pll_");
$_translatedText = tempnam("~/tmp", "pll_"); 
```

临时文件存储在 /private/tmp 中，并带有`pll_`前缀，以标识 PHP 脚本正在创建的文件。

然后，我将传递的文本的内容写入临时文件，如下所示：

```
//Write the contents of the passed text to the temp file
$handle = fopen($_standardText, "w");
fwrite($handle, $text);
fclose($handle); 
```

现在，位于其中的临时文件中`/private/tmp/xxxx`写入了文本（验证了这一点），然后我继续格式化命令：

```
$command = escapeshellcmd("xml2brl -p" . " " . $_standardText . " " .  $_translatedText); 
```

回显 $command 变量时，它的格式如下：

```
xml2brl -p /private/tmp/pll_MYRy9m /private/tmp/pll_DmiK7E 
```

继续运行 exec 命令，它应该处理输入文件并将翻译后的文本写入输出文件，但它没有：

```
exec($command); 
```

`ls`现在，这是奇怪的部分……当我尝试只做一个使用 Apache，但无论何时运行此命令，它都不起作用。但是，当我不删除临时文件并`xml2brl -p /private/tmp/pll_MYRy9m /private/tmp/pll_DmiK7E`在 CLI 中使用相同的 PHP 创建的命令 ( ) 和临时文件时，我可以在我的用户下运行它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:59:44.790

您应该做的第一件事（确保您的脚本可以运行简单的命令，例如`/bin/ls`）是充分利用`exec()`的参数：

```
exec($command, $out, $code);
if ($code) {
    // an error occurred while running the command
} 
```

其次，确保路径正确。`xml2brl`可能在您的路径中，但可能不在您的脚本路径中：

```
$command = '/usr/bin/xml2brl -p ' . escapeshellarg($_standardText);

exec($command, $out, $code);
if ($code) {
    die("An error occurred while attempting torun xml2brl");
} else {
    echo "Output was: ", join("\n", $out);
} 
```

如果这仍然不起作用，您可以重定向`stderr`：

```
exec("$command 2>&1", $out, $code); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T01:51:32.687

包括错误报告（E_ALL）；在脚本的开头，看看是否有任何你没有注意到的警告。chmod xml2brl 到 777 以确保 apache 可以执行它。只是出于好奇，xml2brl 位于哪里？确保 apache 有权访问此目录。你说你可以通过一个术语自己做，如果你也一直在手动做这些文件，你是否肯定 apache 制作了这些文件？

确保 apache 具有对临时文件的读写权限，并确保 apache 具有执行 xml2brl 的访问权限和权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T02:11:16.360

尝试在您的命令中首先包含 xml2brl 的完整路径，然后让我们知道结果。就像是

```
$command = escapeshellcmd("/opt/local/bin/xml2brl -p" . " " . $_standardText . " " . $_translatedText); 
```

# php - 我可以通过 mailto 提交表单吗：如果我无法在服务器上处理它？

> ID：13851430
> 
> 赞同：-2
> 
> 时间：2012-12-13T01:14:05.777
> 
> 标签：php, javascript, jquery, html, forms

我正在为带有 PHP 表单处理器的客户端创建一个小型网站。`mailto`如果 PHP 在 Web 服务器中不可用，我希望联系表单回退到该方法。这看起来很奇怪，但我只需要确保他们可以在任何地方部署它。

现在我有：

```
form method="post" action="my_form_processor.php" 
```

有没有办法处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:25:26.353

这是一个坏主意。如果您的客户拒绝安装服务器端语言，他们将不会获得动态网站。

只是为了好玩，你可能会做这样的事情：

```
<script>
    if ('<?php ?>'.length != 0) {
        $('#form').attr('action', 'mailto:fallback@example.com');
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:21:44.403

这听起来是个坏主意，但在技术上并不难解决：

*   使用 php 设置一个 javascript 变量：`var myVar = "<?php echo 'php'; ?>";`
*   在 javascript 中测试 if`myVar === 'php'`并更改`action`表单的属性（如果结果）`false`。

当然，如果访问者禁用了 javascript，这也会失败，因此您最好为您的客户提供服务器要求列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T01:20:01.330

您可以在一个目录中提供两个文件：index.html 和 index.php。内容是相同的，除了表单的工作方式。

如果安装了 php，它将（通常，可以根据服务器配置更改）在提供主页时更喜欢 index.php 而不是 index.html。如果 php 不存在，服务器将改为提供 index.html。

链接时，只需转到目录而不是文件。例如链接到 example.com/foo/ 而不是 example.com/foo/index.php。

虽然我同意评论说你可能想做其他事情，比如需要 php，因为 form mailto 有点糟糕，而 php 真的很常见。

# javascript - 将“无显示”替换为淡出

> ID：13851435
> 
> 赞同：0
> 
> 时间：2012-12-13T01:14:36.737
> 
> 标签：javascript, css

如何修改它以使其淡出并自行移除？

```
<script>
 close = document.getElementById("close");
 close.addEventListener('click', function() {
   preloader = document.getElementById("preloader");
   preloader.style.display = 'none';     <--- this part, obviously
 }, false);
</script> 
```

单击“显示：无”时感觉太刺耳/不流畅。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:22:14.297

取决于您需要支持的浏览器，您可以使用 css-transitions 来做到这一点：

```
.fadeOut{
    opacity: 0;
    -webkit-transition: opacity .5s ease-out;
    -moz-transition: opacity .5s ease-out;
    -o-transition: opacity .5s ease-out;
    transition: opacity .5s ease-out;
} 
```

只需将 -class 添加`.fadeOut`到元素，有关转换的更多信息，请参阅[MDN 文章](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions)。可以在[caniuse.com上查看兼容浏览器列表](http://caniuse.com/#search=css-transitions)

除此之外，像 jQuery 这样的库有内置的 fadeIn/fadeOut - 效果，这些效果只是使用 JavaScript 实现的，并且兼容所有主流浏览器。（[jQuery API -> 淡出](http://api.jquery.com/fadeOut/)）

如果您希望在没有 jQuery 的情况下执行此操作，您可以查看他们如何直接在源代码中实现它。[jsapi.info](http://jsapi.info/jquery/1.8.0/jQuery.fn.fadeOut)是一个不错的代码浏览器，它链接了使用的内部函数，让您有机会快速查看被调用的内容以及被调用函数的外观。

编辑：

此外，我刚刚在 Codereview.SE 上偶然发现了一个可以帮助您的问题：[Fade In Fade Out in pure JavaScript](https://codereview.stackexchange.com/questions/7315/fade-in-and-fade-out-in-pure-javascript)

# java - 如何使此 Java 代码正常运行？[多线程，竞争条件]

> ID：13851437
> 
> 赞同：3
> 
> 时间：2012-12-13T01:15:01.777
> 
> 标签：java, multithreading, race-condition

`x++`我从一个学生那里得到了这段代码，由于涉及and的竞争条件，它不能正常工作`x--`。他添加`synchronized`了`run()`试图摆脱这个错误的方法，但显然这只排除了线程进入**同一个**`run()`对象（这从一开始就不是问题），但不会阻止独立对象更新相同的静态变量同时。**`x`**

 **```
public class DataRace implements Runnable {
  static volatile int x;

  public synchronized void run() {
    for (int i = 0; i < 10000; i++) {
          x++;
          x--;
    }
  }

  public static void main(String[] args) throws Exception {
    Thread [] threads = new Thread[100];

    for (int i = 0; i < threads.length; i++)
        threads[i] = new Thread(new DataRace());
    for (int i = 0; i < threads.length; i++)
        threads[i].start();
    for (int i = 0; i < threads.length; i++)
        threads[i].join();

    System.out.println(x); // x not always 0!
  }
} 
```

由于我们无法同步 on `x`（因为它是原始的），我能想到的最佳解决方案是创建一个新的静态对象，例如并将and`static String lock = "";`包含在一个块中，锁定 on 。但这似乎真的很尴尬。有没有更好的办法？`x++``x--``synchronized``lock`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T01:24:01.283

Using[`AtomicInteger`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)做你想做的事，它明确了对`x`原子操作的意图。经过多次运行以下操作后，我`0`每次都得到 's ：

```
import java.util.concurrent.atomic.AtomicInteger;

public class DataRace implements Runnable {
    static volatile AtomicInteger x = new AtomicInteger(0);

    public void run() {
        for (int i = 0; i < 10000; i++) {
            x.incrementAndGet();
            x.decrementAndGet();
        }
    }

    public static void main(String[] args) throws Exception {
        Thread[] threads = new Thread[100];

        for (int i = 0; i < threads.length; i++)
            threads[i] = new Thread(new DataRace());
        for (int i = 0; i < threads.length; i++)
            threads[i].start();
        for (int i = 0; i < threads.length; i++)
            threads[i].join();

        System.out.println(x); // x **is now** always 0!
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:22:25.293

[AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)是您正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:02:24.120

该变量`x`是静态的并且驻留在一个类中，因此对它的访问应该在该类上同步：要么创建一个静态方法，要么在`DataRace.class`.**

# python - 如何存储一个大字典？

> ID：13851438
> 
> 赞同：4
> 
> 时间：2012-12-13T01:15:03.573
> 
> 标签：python, dictionary, pickle

我有一个大字典（28 MB）'MyDict' 存储在一个`MyDict.py`文件中。

如果我执行语句：

```
from MyDict import MyDict 
```

`MemoryError`抛出异常。

如何使用`cPickle`或`shelve`模块访问此字典。

如何将此`MyDict.py`文件写入`cPickle`或`shelve`不访问 MyDict。

这个 MyDict 是通过写入文件生成的。这是字典中的键值对：

```
{"""ABCD""" : [[(u'2011-03-21', 35.5, 37.5, 35.3, 35.85, 10434.0, 35.85), (u'2012-03-03', 86.0, 87.95, 85.55, 86.2, 30587.0, 86.2), (u'2011-03-23', 36.9, 36.9, 35.25, 36.1, 456.0, 36.1)],
    [(u'2011-03-18', 37.0, 38.0, 36.5, 36.5, 861.0, 36.5), (u'2012-03-03', 86.0, 87.95, 85.55, 86.2, 30587.0, 86.2), (u'2011-03-21', 35.5, 37.5, 35.3, 35.85, 10434.0, 35.85)],
    [(u'2011-03-16', 37.0, 37.9, 36.3, 36.7, 3876.0, 36.7), (u'2012-03-03', 86.0, 87.95, 85.55, 86.2, 30587.0, 86.2), (u'2011-03-21', 35.5, 37.5, 35.3, 35.85, 10434.0, 35.85)],
    [(u'2010-12-09', 40.5, 41.95, 36.3, 36.75, 42943.0, 36.75), (u'2011-10-26', 67.95, 71.9, 66.45, 70.35, 180812.0, 70.35), (u'2011-03-21', 35.5, 37.5, 35.3, 35.85, 10434.0, 35.85)],
    [(u'2009-01-16', 14.75, 15.0, 14.0, 14.15, 14999.0, 14.05), (u'2010-01-11', 50.0, 52.8, 49.0, 50.95, 174826.0, 50.95), (u'2009-01-27', 14.3, 15.0, 13.9, 14.15, 3862.0, 14.15)]]} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T01:22:00.567

`shelve`这里其实是一个不错的选择。它就像一个字典，但它由 BDB（或类似的）键值数据库文件支持，Python 将处理所有缓存等，因此它不需要一次将整个内容加载到内存中。

以下是创建搁置文件的方法。请注意，架子键必须是字符串。另请注意，我正在就地创建架子，而不是首先创建一个`dict`并搁置它。这样一来，您就避免了必须构建`dict`最初导致问题的巨大内存的成本。

```
from contextlib import closing
import shelve

def makedict(shelf):
    # Put the real dict-generating code here, obviously
    for i in range(500000);
        shelf[str(i)] = i

with closing(shelve.open('mydict.shelf', 'c')) as shelf:
    makedict(shelf) 
```

并且要使用它，实际上不要读入它；将其保留为磁盘架：

```
from contextlib import closing
import shelve

with closing(shelve.open('mydict.shelf')) as d:
    # Put all your actual work here.
    print len(d) 
```

如果您的字典使用代码不能轻易地适应范围，请将`with`语句替换为普通的`open`，并在完成后显式地替换`close`它。

`pickle`可能不是一个好主意，因为您仍然必须将整个内容读入内存。与导入定义巨型文字的模块相比，它可能会使用更少的瞬态内存，也许还有磁盘空间，但是，拥有一个巨大的内存哈希表仍然是一个问题。但是您始终可以对其进行测试，看看它的效果如何。

以下是创建泡菜文件的方法。请注意，您可以（几乎）使用任何您想要的作为键，而不仅仅是字符串。`dict`但是，您必须先构建整体`pickle`。

```
import cPickle

def makedict():
    # Put the real dict-generating code here, obviously
    return {i:i for i in range(500000)}

with open('mydict.pickle', 'wb') as f:
    cPickle.dump(d, f, -1) 
```

这将创建一个 47MB 的文件。

现在，要在您的主应用程序中使用它：

```
import cPickle

def loaddict():
    with open('mydict.pickle', 'rb') as f:
        return cPickle.load(f) 
```

`pickle`对于必须保存和加载的任何其他持久性格式（无论是您自己编写的自定义内容，还是 JSON 或 YAML 之类的标准内容），go 都会遇到相同的基本问题。（当然，如果您需要与其他程序的互操作性，尤其是在其他语言中，则可以使用 JSON 之类的方法。）最好使用数据库；唯一的问题是，什么样的数据库。

类型数据库的优点`anydbm`是您可以像使用它一样使用它`dict`，而不必担心如何加载/保存/访问它（除了`open`and`close`行）。问题`anydbm`在于它只允许您将字符串映射到字符串。

该`shelve`模块有效地包装`anydbm`了 ，并对每个值进行了酸洗。您的键仍然必须是字符串，但您的值几乎可以是任何东西。因此，只要您的键是字符串，并且您没有从值到外部对象的任何引用，它就是一个非常透明的`dict`.

其他选项——<code>sqlite3、各种现代 nosql 数据库等——要求您更改访问数据的方式，甚至是组织数据的方式。（“列表列表”并不是一个明确的 ER 模型。）当然，从长远来看，这可能会带来更好的设计，所以如果您认为您真的应该使用关系模型，请考虑这个想法。

* * *

`dbm`从评论中，@ekta 希望我解释为什么存在一些限制`shelve`。

首先，`dbm`可以追溯到 70 年代。一个可以简单有效地将 8 位字符串映射到字符串的数据库在当时是一笔巨大的交易。将各种类型的值存储为它们的字符串表示形式也很常见——或者，如果不是这样，那么只存储恰好代表当前机器上本机值的字节。（XML、JSON，甚至字节顺序交换对于当时的机器来说可能太昂贵了，或者至少对于当时的想法来说。）

扩展`dbm`以处理值的其他数据类型并不难。它们永远不需要散列或比较，只需无损地存储和检索。由于`pickle`可以处理非常广泛的类型，不是太低效，并且带有 Python，因此使用它是有意义`pickle`的，所以`shelve`也确实如此。

但钥匙是另一回事。您需要的编码不仅是无损可逆的，而且还确保当且仅当它们实际上相等时，两个值将编码为相等的字节。请记住，在 Python 中，`1 == True`，但显然`pickle.dumps(1) != pickle.dumps(True)`,`b'1' != b'True'`等。

如果您只关心该类型，则有很多类型可以无损且保持相等地转换为字节。例如，对于 Unicode 字符串，只需使用 UTF-8。（实际上，`shelve`它会为您处理好。）对于 32 位有符号整数，请使用`struct.pack('>I')`. 对于三个字符串的元组，编码为 UTF-8，反斜杠转义，并用换行符连接它们。等等。对于许多特定领域，有一个简单的答案；没有适用于大多数领域的通用答案。

因此，如果您想使用 a`dbm`来使用三个 UTF-8 字符串的元组作为键，您可以编写自己的包装器`dbm`(or `shelve`)。与 stdlib 中的许多模块一样，`shelve`它旨在提供有用的示例代码以及可用的功能，这就是[文档](https://docs.python.org/3/library/shelve.html)具有指向[源代码的链接的原因](http://hg.python.org/cpython/file/default/Lib/shelve.py)。这很简单，新手应该能够弄清楚如何对其进行分叉、子类化或包装以进行自己的自定义密钥编码。（请注意，如果您 wrap ，`shelve`您将不得不将您的自定义值编码为，`str`以便它可以将其编码为`str``bytes``bytes``struct.pack`调用上面。这对于简单性/可读性和性能来说可能会更好。）

# java - 音乐播放器“找不到文件”异常？

> ID：13851445
> 
> 赞同：0
> 
> 时间：2012-12-13T01:15:51.723
> 
> 标签：java, file, embedded-resource, javasound

我正在尝试为一个简单的小型 Java 游戏添加配乐，并且我已经研究了如何在我拥有可编译代码的范围内做到这一点。但是，当我运行它时，我得到一个 FileNotFound 异常。我正在使用 Eclipse，我的 wav 文件与 .class 文件位于同一目录中。

这是我的例外：

> java.io.FileNotFoundException: bach.wav (没有这样的文件或目录)

我的音乐播放器代码：

```
public static void play()
{
  try
  {
      Clip clip = AudioSystem.getClip();
      clip.open(AudioSystem.getAudioInputStream(new File("bach.wav")));
      clip.start();
  }
  catch (Exception exc)
  {
      exc.printStackTrace(System.out);
  }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:19:59.210

`AudioSystem.getAudioInputStream`有一个[重载的方法](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream%28java.net.URL%29)，它需要一个`URL`. 这将根据需要使用缓冲流。由于该`.wav`文件与类文件位于同一位置，您可以使用`getResource`：

```
AudioSystem.getAudioInputStream(getClass().getResource("bach.wav")); 
```

您`play`将`static`需要：

```
AudioSystem.getAudioInputStream(MyClass.class.getResource("bach.wav")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:19:20.283

当您说`new File("bach.wav")`您必须将文件放在项目的根文件夹中时 src 和 bin 文件夹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T01:24:49.367

尝试改变：

```
new File("bach.wav") 
```

到：

```
new File("bach.wav").getAbsolutePath() 
```

# c++ - 尝试使用 cout 打印向量中包含的对象列表并排序错误

> ID：13851446
> 
> 赞同：0
> 
> 时间：2012-12-13T01:16:05.553
> 
> 标签：c++, io, operator-overloading

我有一个专辑类，旨在存储艺术家姓名（字符串）、专辑标题（字符串）和曲目对象列表（向量）。我正在尝试重载“<<”运算符以启用基于流的输出。

相关代码是这样的：

```
std::ostream& Album::printTracks (std::ostream &out, std::vector<Track> &t)
{
    unsigned int i;
    for (i=0; i<t.size(); i++)
        out << " " << t.at(i);
     return out;
}
std::ostream& operator<< (std::ostream &out, Album &a)
{
    out << "Artist name: " << a.artistName << "\n" <<
        "Album Title: " << a.albumTitle << "\n" <<
        "Tracks: " << a.printTracks(out,a.getTracks());
    return out;
} 
```

应该按以下顺序打印：

*   艺术家姓名
*   专辑名称
*   曲目列表

相反，当我给它测试数据时它会打印出来：

*   曲目列表
*   艺术家姓名
*   专辑名称

“曲目：”后跟一个内存位置。

```
Constructor for "Track Class" is:
Track::Track (std::string t, Duration* d)
    {
        title = t;
        duration = d;
    } 
```

在“track”类中重载“<<”的代码是：

```
std::ostream& operator<< (std::ostream &out, Track &t)
    {
    out << "Title: " << t.title << "\n" <<
        "Duration: " << *t.duration << "\n";
    return out;
    } 
```

用于输出的最终代码是：

```
Duration* d = new Duration(3,4,50); //creating duration objects for testing
Duration* d2 = new Duration(5,7,300);
Duration* d4 = new Duration(3,3,50);
Track t1 = Track("Test",d); //creating track objects
Track t2 = Track("Test2",d2);
Track t3 = Track("Test3",d4);
std::vector<Track> tracks; //forming tracks into vector
tracks.push_back(t1);
tracks.push_back(t2);
tracks.push_back(t3);
Album a = Album("Test Artist","Test Album",tracks); //create album object
cout << a << endl; // output album object 
```

想知道为什么订单没有按预期打印？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T01:19:43.000

未指定您的参数的评估顺序。其中一个具有副作用（打印轨道），因此如果首先评估它，您将首先看到打印的那些。

# elisp - Emacs Lisp 格式时间字符串中的错误类型参数

> ID：13851448
> 
> 赞同：1
> 
> 时间：2012-12-13T01:16:21.870
> 
> 标签：elisp, org-mode

我正在使用 org-mode 并尝试设置捕获模板以将 TODO 放在当前日期命名的标题下。例如，对于今天（2012 年 12 月 12 日），我的标题是：

```
*** Dec 12 
```

所以我在我的模板中尝试了这个：

```
 '(org-capture-templates (quote
                          (
                           ;;; note: this template works
                           ("d" "Defect" entry (file+headline "~/doc/org/defects.org" "Open") "** TODO %^{Defect}")
                           ;;; this template does not
                           ("t" "Todo" entry (file+headline "~/doc/org/timesheet.org"  (format-time-string "%h %e")) "**** TODO %i%?")))) 
```

但是，我得到一个`wrong-type-argument stringp`例外。这是一些堆栈跟踪：

```
Debugger entered--Lisp error: (wrong-type-argument stringp (format-time-string "%h %e"))
  regexp-quote((format-time-string "%h %e"))
  (format org-complex-heading-regexp-format (regexp-quote hd))
  (re-search-forward (format org-complex-heading-regexp-format (regexp-quote hd)) nil t)
  (if (re-search-forward (format org-complex-heading-regexp-format ...) nil t) (goto-char (point-at-bol)) (goto-char (point-max)) (or (bolp) (insert "\n")) (insert "* " hd "\n") (beginning-of-line 0))
 ... snip ... 
```

我感觉这更像是一个通用的 Emacs Lisp 问题，而不是 org-mode 问题，但我不确定它可能是什么。我遇到了一篇帖子（我再也找不到它了），上面说通过将 format-time-string 放入括号中，Lisp 没有将其视为字符串。这似乎是正确的，因为如果我评估它，除非我进行插入，否则不会打印任何内容。但我不想插入它 - 我希望表达式被评估并用作字符串。 [另一个问题](https://stackoverflow.com/questions/10755677/emacs-lisp-how-to-make-a-string-from-a-variable-of-any-type)让我有类似的想法，我必须做一些事情才能让格式化的字符串显示为字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:13:53.597

似乎引用太多，并且从未评估过调用。正如您所说，字符串有效，因此您可以尝试将其内部更改`quote`为准引号和逗号。另外，看看格式，这个变量似乎是一个列表列表，你有一个列表列表。我的猜测是这样的：

```
`(org-capture-templates (
                         ("t" "Todo" entry (file+headline "~/doc/org/timesheet.org" ,(format-time-string "%h %e")) "**** TODO %i%?"))) 
```

我不知道模板格式，但您必须确保对函数调用进行评估以生成具有评估值的实际列表。

# android - 使用 Monkey 测试小部件

> ID：13851456
> 
> 赞同：0
> 
> 时间：2012-12-13T01:17:36.323
> 
> 标签：android, testing, monkey

我正在尝试在我的应用程序的小部件上运行 Monkey Test。我的应用程序包是 com.myapp.mycompany.appstore，我的小部件的包是 com.myapp.mycompany.appstore.appwidget

我的清单中列出了意图类别，但仍然收到错误消息：

:IncludeCategory: android.intent.category.LAUNCHER :IncludeCategory: android.intent.category.MONKEY ** 没有找到要运行的活动，猴子中止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:58:34.510

好吧，小部件根本不是 Activity，所以它不应该是 Monkey Testable。

# iphone - 显示 UITableViewCell 重新排序控件而不将单元格内容向右移动？

> ID：13851459
> 
> 赞同：7
> 
> 时间：2012-12-13T01:17:41.050
> 
> 标签：iphone, objective-c, uitableview

我实现了 moveRowAtIndexPath 来重新排列 UITableView 中单元格的顺序并设置 UITableViewCellEditingStyleNone 以便在编辑模式下仅显示重新排序控件。

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {

    return UITableViewCellEditingStyleNone;

} 
```

它工作正常，但是当进入编辑模式时，它仍然将每个单元格的内容缩进到右边，希望为删除或插入控件腾出空间。我没有使用任何一个，所以它变成了一个奇怪的空白空间。有没有办法在编辑模式下避免这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T01:34:56.837

您是否尝试在 UITableViewCell 上将 shouldIndentWhileEditing 设置为 NO？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-26T07:07:37.713

试试这个 UITableViewDelegate 方法。它将允许重新排序，而无需在左侧显示 Delete 按钮，也无需将行向右移动：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath{
    return UITableViewCellEditingStyleNone; 
}

- (BOOL)tableView:(UITableView *)tableview shouldIndentWhileEditingRowAtIndexPath:(NSIndexPath *)indexPath {
    return NO;
}

- (BOOL)tableView:(UITableView *)tableview canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
} 
```

# c# - 如何编写针对 WAMS 的参数化查询？

> ID：13851460
> 
> 赞同：0
> 
> 时间：2012-12-13T01:17:56.137
> 
> 标签：c#, linq-to-sql, windows-8, windows-store-apps, azure-mobile-services

在这里使用一些代码：

[http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2012/09/19/experimenting-with-windows-azure-mobile-services.aspx](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2012/09/19/experimenting-with-windows-azure-mobile-services.aspx)

...作为查询 WAMS 表的“灵感”，我想出了这个：

```
public static async Task<string> GetMammalDeviceID(string mammalID, string zoologistDeviceID)
{
    IMobileServiceTable<DUCKBILLED_PLATYPI> table = App.MobileService.GetTable<DUCKBILLED_PLATYPI>();

    MobileServiceTableQuery<String> query =
        table.Where(i => i.mammalID == mammalID).
              Where(j => j.zoologistDeviceID == zoologistDeviceID).
              Select(k => k.mammalDeviceID);
    return query.ToString();
} 
```

不过，我质疑这是否真的是“做到这一点的方法”，甚至是一种好的方法。有人有查询 WAMS 表的示例代码吗？

同样，以下哪种方法是插入记录的首选方法？

这：

```
DUCKBILLED_PLATYPI platypus = new DUCKBILLED_PLATYPI { mammalID = mammalEmail, zoologistDeviceID = zoologistDeviceID, zoologistName = zoologistName };
await App.MobileService.GetTable<DUCKBILLED_PLATYPI>().InsertAsync(platypus); 
```

...或这个：

```
DUCKBILLED_PLATYPI platypus = new DUCKBILLED_PLATYPI { mammalID = mammalEmail, zoologistDeviceID = zoologistDeviceID, zoologistName = zoologistName };
IMobileServiceTable<DUCKBILLED_PLATYPI> platypi = App.MobileService.GetTable<DUCKBILLED_PLATYPI>();
await platypi.InsertAsync(platypus); 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:37:16.553

`query.ToString()`将为您提供底层移动服务类的字符串表示形式，可能`Microsoft.WindowsAzure.MobileServices.MobileServiceTableQuery``1[System.String]`不是您想要的！

我假设您想返回实际的哺乳动物设备 ID？如果是这样，您需要进行两次调整，

1.  您不能假设只会返回一行，因此需要期待 a`List<String>`而不仅仅是 a `String`。如果您只想要一个返回，您可以添加`Take(1)`到查询中（但它仍然是一个列表）。
2.  您需要通过在客户端上实现查询来*执行*查询，在这种情况下，`ToListAsync()`应该可以工作。

所以像：

```
public static async Task<List<string>> GetMammalDeviceID(string mammalID, string zoologistDeviceID)
{
    IMobileServiceTable<DUCKBILLED_PLATYPI> table = App.MobileService.GetTable<DUCKBILLED_PLATYPI>();

    MobileServiceTableQuery<String> query =
        table.Where(i => i.mammalID == mammalID).
              Where(j => j.zoologistDeviceID == zoologistDeviceID).
              Select(k => k.mammalDeviceID);
    return await query.ToListAsync()
} 
```

至于第二部分，除了冗长之外没有其他区别。我认为第一个选项的流动性更具可读性。

# c# - 如何在 Windows 应用商店应用程序中读取二进制文件？

> ID：13851462
> 
> 赞同：4
> 
> 时间：2012-12-13T01:18:16.717
> 
> 标签：c#, .net-4.5, windows-store-apps

当 System.IO 命名空间不包含 File 类时，如何在 Windows 应用商店应用程序中读取二进制文件，或者更具体地说，如何创建我的 Stream？

BinaryReader的[文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh454050.aspx)示例无济于事地使用 File！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T05:51:51.650

您始终使用[StorageFile](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.aspx)类访问 Windows 应用商店应用程序中的文件：

```
StorageFile file = await ApplicationData.Current.LocalFolder.GetFileAsync(filename); 
```

然后，您可以使用 WinRT API 获取文件的二进制内容：

```
IBuffer buffer = await FileIO.ReadBufferAsync(file);
byte[] bytes = buffer.ToArray(); 
```

如果你想使用[BinaryReader](http://msdn.microsoft.com/en-us/library/windows/apps/system.io.binaryreader.aspx)你需要一个流来代替：

```
StorageFile file = await ApplicationData.Current.LocalFolder.GetFileAsync("a");
Stream stream = (await file.OpenReadAsync()).AsStreamForRead();
BinaryReader reader = new BinaryReader(stream); 
```

在这种情况下，请确保您只对二进制数据使用[ReadBytes()](http://msdn.microsoft.com/en-us/library/windows/apps/system.io.binaryreader.readbytes.aspx)，这不考虑编码。

# c - Valgrind在二维数组中无效读取大小为1

> ID：13851463
> 
> 赞同：0
> 
> 时间：2012-12-13T01:18:20.477
> 
> 标签：c, memory-management, size, valgrind

我对 valgrind 和 C 都很陌生，并且无法准确解释我的代码有什么问题。我在第 285 行得到一个无效的读取大小 1，它说在分配 5 个块后地址为 0 个字节。我的分配如下：

```
output = malloc(sizeof(char**));
output[0] = malloc(sizeof(char*)*size);
for(i = 0; i < size; i++){
    output[0][i] = malloc(wordLength);
} 
```

无效的读取大小和周围的行是：

```
for(j = 0; j < size; j++){
    printf("%s, ", output[0][j]);
    free(output[0][j]);
} 
```

我不会在代码中的其他任何地方释放这些数据，所以我不确定出了什么问题。此外，输出中实际上不止一个二维数组，但我认为没有必要深入探讨，因为这个错误似乎与这种特定情况有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:30:30.397

这个数据结构中的词放在哪里？该`%s`指令将读取字符，直到遇到`\0`空终止符。因此，如果该单词比分配的内存块长一个字符，则 printf 行将读取结束后的一个字节。

# python - 对 python 蜘蛛中的 Scrapy 规则感到困惑

> ID：13851467
> 
> 赞同：3
> 
> 时间：2012-12-13T01:18:51.970
> 
> 标签：python, scrapy

我对scrapy spider有一个疑问。假设我有这段代码

```
 name = 'myspider'
    allowed_domains = ['domain.com']
    start_urls = ['http://www.domain.com/foo/']

    rules = (
        Rule(SgmlLinkExtractor(allow=r'-\w+.html$'), callback='parse_item', follow=True),
    )

    def parse_item(self, response):
        hxs = HtmlXPathSelector(response) 
```

我想知道蜘蛛会先去起始网址解析页面，然后使用规则提取链接

或蜘蛛不解析第一页，而是从规则开始

我已经看到，如果我的规则不匹配，那么我不会得到任何结果，但至少它不应该解析起始页

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:25:01.210

我正在编写一个由 Michael Herman 编写的示例教程， [https://github.com/mjhea0/Scrapy-Samples](https://github.com/mjhea0/Scrapy-Samples)，它从 BaseSpider 示例开始，然后发展到 CrawlSpider 示例。第一个例子没什么大不了的，但第二个例子没有刮第一页——只有第二页——我不知道我做错了什么。然而，当我从 github 运行代码时，我意识到他的代码并没有抓取第一页！我想这与 CrawlSpider vs BaseSpider 的意图有关，在做了一些研究之后，我想出了这个：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from craigslist.items import CraigslistItem
from scrapy.http     import Request

class MySpider(CrawlSpider):
name = "CraigslistSpider"
allowed_domains = ["craigslist.org"]
start_urls = ["http://annapolis.craigslist.org/sof/"]

rules = (
    Rule (SgmlLinkExtractor(allow=("index\d00\.html", ),
    restrict_xpaths=('//p[@id="nextpage"]',)),
    callback="parse_items", follow= True),
)

#
# Need to scrape first page...so we hack-it by creating request and
# sending the request to the parse_items callback
#
def parse_start_url(self, response):
    print ('**********************')
    request = Request("http://annapolis.craigslist.org/sof/", callback=self.parse_items)
    return request

def parse_items(self, response):
    hxs = HtmlXPathSelector(response)
    titles = hxs.select("//p")
    items = []
    for titles in titles:
        item = CraigslistItem()
        item ["title"] = titles.select("a/text()").extract()
        item ["link"] = titles.select("a/@href").extract()
        items.append(item)
    return items 
```

在我的例子中，我使用的是 CrawlSpider，它要求我实现 'parse_start_url' 以使用在 start_urls 中找到的相同 url 创建一个请求对象，即第一页。之后，从第一页开始抓取。顺便说一句，我已经 3 天大了scrapy 和 python！

# utf-8 - 在 vbscript 中读取 utf-8 文本文件

> ID：13851473
> 
> 赞同：27
> 
> 时间：2012-12-13T01:19:33.473
> 
> 标签：utf-8, character-encoding, vbscript

我有一个保存为 UTF-8 的文本文件，当我尝试读取该文件时，它给了我奇怪的字符而不是正确的字符（它包含中文字符）。我怎样才能让它给我正确的汉字？

```
Option Explicit

Dim objFSO, strTextFile, strData, strLine, arrLines, aniTextFile, aniData, aniLines, aniLine, objTextFile, fso, inputFileList, listFile, fname
Dim iim1, iret, iret2, iret3, i
Const ForReading   = 1

Set objFSO = CreateObject("Scripting.FileSystemObject")
strTextFile = "C:\Users\admin\Desktop\ArtistCG\folder.txt"
strData = objFSO.OpenTextFile(strTextFile,ForReading).ReadAll
arrLines = Split(strData,vbCrLf)

aniTextFile = "C:\Users\admin\Desktop\ArtistCG\folder-list.txt"
aniData = objFSO.OpenTextFile(aniTextFile,ForReading).ReadAll
aniLines = Split(aniData,vbCrLf)

For i = 0 To UBound(arrLines)
  strData = objFSO.OpenTextFile(arrLines(i),ForReading).ReadAll
  WScript.Echo strData

  Set listFile = objFSO.OpenTextFile(aniLines(i),ForReading)
  Do While Not listFile.AtEndOfStream
    fName = listFile.ReadLine
    WScript.Echo fName
  Loop
  listFile.Close
Next 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-13T07:48:17.150

[从文档中](http://technet.microsoft.com/en-us/library/ee198708.aspx)：

> FSO 只能读取 ASCII 文本文件。您不能使用 FSO 读取 Unicode 文件或读取 Microsoft Word 或 Microsoft Excel 等二进制文件格式。

既然你有奇怪的字符，我想这有点不正确，并且文件是在一些 8 位 Windows 代码页中读取的，因为如果它真的只能读取 ASCII，你会看到`????`

无论如何，如果你可以使用[ADO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676526(v=vs.85).aspx)，你可以这样做：

```
Dim objStream, strData

Set objStream = CreateObject("ADODB.Stream")

objStream.CharSet = "utf-8"
objStream.Open
objStream.LoadFromFile("C:\Users\admin\Desktop\ArtistCG\folder.txt")

strData = objStream.ReadText()

objStream.Close
Set objStream = Nothing 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-03-14T23:29:05.027

使用文件系统对象时，您可以使用 , True 来读取 UTF 8 格式的文件。

```
sFile = "C:\Users\admin\Desktop\ArtistCG\folder.txt"
Set FS = CreateObject("scripting.filesystemobject")
Set oReadfile = FS.OpenTextFile(sFile, 1, False, True)
TextFromFile = sReadfile.ReadAll 
```

# c# - 如何创建抽象用户控件并从中派生其他子控件？

> ID：13851478
> 
> 赞同：2
> 
> 时间：2012-12-13T01:20:10.027
> 
> 标签：c#, winforms, user-controls, abstract-class

在 C# WinForms 中，是否可以创建一个抽象的用户控件并从中派生其他子控件？如果是，是否有可能在设计时完成？

我想使用一个基本用户控件，其中包含一个 ListBox，然后将该 ListBox 重用于我创建的所有其他新用户控件。

我想这样做的原因当然是它的多面性。例如：

```
private void SomeMethod(UserControl_Base uc)
{
    //some logic
    uc.my_listBox.Name = "some name"; // a derived User Control would actually be passed.
    //more logic
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T01:24:52.237

是的。

但是，设计器不能对继承抽象类的控件进行操作。（因为设计表面实际上是基类的一个实例）

要么使用接口，要么使基​​类非抽象。

# ios - iPhone 上的 HTTP 实时流媒体服务器

> ID：13851481
> 
> 赞同：9
> 
> 时间：2012-12-13T01:20:28.050
> 
> 标签：ios, node.js, streaming, avfoundation, http-live-streaming

我正在尝试在 iPhone 上运行 HTTP 实时流媒体服务器，该服务器从摄像头捕获视频流并将其提供给 HTML5 客户端（支持 HTTP 实时流媒体）。

到目前为止，我有以下工作。

1.  iOS 上的 HTTP 直播流服务器（用 Node.js 编写），它从视频捕获模块生成的传输流（视频/MP2T）文件列表中动态更新索引文件。
2.  视频捕获模块，它使用 AVCaptureMovieFileOutput 连续生成一系列 10 秒的 QuickTime 文件（它们之间有一个小的差距，但对于我的应用程序来说已经足够小了）。

我需要的是一个即时转换器，它将每个 QuickTime 文件转换为传输流文件（无需更改编码，我只需要一个不同的容器），它桥接了上面的两个模块。

我采用这种方法是因为据我所知，这是利用 iPhone 硬件视频编码器的唯一方法（我在这里对此主题进行了相当多的研究，我有 99% 的把握。请告诉我知道我是否错了）。

一些人建议使用 ffmpeg，但我宁愿使用带有 MIT 许可证（如果有的话）的更小的代码，或者从头开始编写一些东西（并使用 MIT 许可证将其开源）。

我对这个媒体容器很陌生，如果有人能指出我正确的方向（示例代码、开源、文档……），我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T03:35:44.933

我在苹果开发者论坛上发布了这个，我们进行了热烈的（请原谅双关语）讨论。这是对提出类似概念的人的回答。

如果我错了，我想纠正我，并举个例子，如果你不同意从 AVCaptureVideoDataOutput 获得的原始 h264 创建 mpeg ts 不是一件容易的事，除非你使用 x264 或类似的东西进行转码。让我们假设您可以轻松获取 mpeg ts 文件，然后在 m3u8 容器中编译它们，启动一个小型 Web 服务器并为它们提供服务将是一件简单的事情。据我所知，并且有很多应用程序可以做到这一点，从设备使用 localhost 隧道不是拒绝问题。因此，也许您可​​以以某种方式从设备生成 hls，我质疑您将获得的性能。

等到技术 2 仍然使用 AvCaptureVideoDataOutput，您捕获帧，将它们包装在一些简洁的小协议、json 或者更深奥的东西中，比如 bencode 打开一个套接字并将它们发送到您的服务器。啊……祝你好运，最好有一个强大的网络，因为即使通过 wifi 发送未压缩的帧也需要带宽。

等等技术3。

您使用 avassetwriter 编写新电影并使用标准 c 函数从临时文件中读回，这很好，但是您拥有的是原始 h264，mp4 不完整，因此它没有任何 moov 原子，现在有趣的部分正在重新生成这个标题。祝你好运。

等等，似乎实际上有一些优点的技术 4

我们创建的不是一个而是两个 avassetwriter，我们使用 gcd dispatch_queue 管理它们，因为在实例化 avassetwriter 后只能使用一次，我们在计时器上启动第一个，在预定时间段（例如 10 秒）之后，我们开始第二个，而拆掉第一个。现在我们有了一系列包含完整 moov 原子的 .mov 文件，每个文件都包含压缩的 h264 视频。现在我们可以将它们发送到服务器并将它们组合成一个完整的视频流。或者，我们可以使用一个简单的流媒体，它获取 mov 文件并使用 librtmp 将它们包装在 rtmp 协议中并将它们发送到媒体服务器。

我们是否可以将每个单独的 mov 文件发送到另一台苹果设备，从而实现设备到设备的通信，这个问题被误解了很多次，通过 wifi 在同一子网中定位另一台 iPhone 设备非常容易并且可以完成。通过蜂窝连接在 tcp 上定位另一个设备几乎是神奇的，如果它可以在使用可寻址 ip 的蜂窝网络上完成，而不是所有常见的运营商都可以做到。

假设您可以，那么您还有一个额外的问题，因为非 avfoundation 视频播放器将能够处理许多不同的单独电影文件之间的转换。您可能必须基于 ffmpeg 解码编写自己的流媒体播放器。（那确实工作得很好）

# javascript - 关于在表单提交上使用 JSONP 的时间问题

> ID：13851482
> 
> 赞同：0
> 
> 时间：2012-12-13T01:20:29.147
> 
> 标签：javascript, forms, jsonp

我正在尝试使用 JSONP 在服务器 B 的页面上提交表单后将数据推送到服务器 A。

这是我的 JS -

```
my.submitOrder = function () {

    var scriptTag = document.createElement('SCRIPT');
    scriptTag.src = ServerAUrl + "?" + urlData;
    scriptTag.type = "text/javascript";
    scriptTag.async = 0;

    document.getElementsByTagName('HEAD')[0].appendChild(scriptTag);

}; 
```

我希望在用户提交表单时执行这个 js，所以这是我认为可以完成工作的 HTML -

```
<form action="http://localhost:3348" onsubmit="return my.submitOrder();" >
    <input type="submit" value="submit"  />
</form> 
```

提交正常，submitOrder 函数执行，但我对 ServerAUrl 的调用在它到达服务器 A 之前被“取消”（根据萤火虫）。实际上，它成功了大约 5 次，但似乎没有一个模式。我知道这样的事情是可能的，因为谷歌分析做到了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:23:35.610

您没有阻止提交事件，因此表单在加载目标页面时照常发送。在卸载过程中，打开的请求（如 JSONP 脚本）被取消。

要防止事件的默认操作，请调用其[`preventDefault`](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)方法（尤其是在使用[高级事件注册](http://www.quirksmode.org/js/events_advanced.html)或仅从`return false`您的内联处理程序时。目前，您正在返回`undefined`.

# jquery - Kendo UI 图表 - 当值轴倒置（自上而下）时，自下而上渲染条形系列

> ID：13851483
> 
> 赞同：1
> 
> 时间：2012-12-13T01:20:45.390
> 
> 标签：jquery, charts, kendo-ui

我有一个 Kendo UI 图表，我在 3 个不同的值轴上显示 3 个系列的数据。

“广告位置”值轴是倒置的，1 是可能的最高值（根据图像）。![带有倒 Y 轴的图表](../Images/913c146501770a2670543df3314e3eb3.png)

如您所见，这导致“广告排名”系列呈现“自上而下”。

有谁知道强制这个系列渲染“自下而上”的方法，例如让条形图从最低值（4.5）开始渲染。

**Javascript：**

```
var categories = Array();
var series1 = Array();
var series2 = Array();
var series3 = Array();

// data is populated by parsing a html table
// $chart is passed in as a variable
$chart.kendoChart({                
    theme: "bootstrap",                
    title: {
        text: "Hour of Day Avg. Position"
    },
    legend: {
        position: "bottom"
    },
    seriesDefaults: {
        type: "line",                    
    },
    series: [{
        data: series1,
        name: "Avg. Ctr",
        tooltip: {
            visible: true,
            template: "#= category #: #= value #%"                        
        },
        axis: "ctr"
    },
    {
        type: "bar",
        data: series2,
        name: "Avg. Position",
        tooltip: {
            visible: true,
            template: "#= category #: #= value # Avg. Pos."
        },
        axis: "adPos"
    },
    {
        data: series3,
        name: "Clicks",
        tooltip:
        {
            visible: true,
            template: "#= category #: #= value # Clicks"
        },
        axis: "clicks"
    }],
    valueAxes: [
    {
        title: { text: "Click Through Rate" },
        name: "ctr",
        labels: {
            visible: true,
            format: "{0}%"
        }
    },
    {
        title: {text: "Clicks per Hour"},
        name: "clicks",
        labels: {
            visible: true,
            format: "{0}"
        }
    },
    {
        title: { text: "Ad Position" },
        name: "adPos",                    
        labels: {
            visible: true,
            format: "{0}"
        },
        min: 1,
        reverse: true
    }],
    categoryAxis: {
        categories: categories,
        labels: {
            rotation: 45
        },
        title: {
            text: "Hour of Day (24Hr)"
        },
        reverse: false,
        axisCrossingValues: [0,30]
    }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:17:33.700

这不受支持，但我可以使用隐藏轴实现类似的效果。它应该具有相同的范围，但在法线方向：

```
series: [{
   axis: "hidden"
   // ...
}],
valueAxes: [{
  reverse: true,
  min: 1,
  max: 4.5
}, {
  visible: false,
  name: "hidden",
  min: 1,
  max: 4.5
}] 
```

请参阅[此 jsBin](http://jsbin.com/enegof/1/edit)以获取工作演示。

另一种方法是使用烛台系列来模拟范围条。这个想法是只使用一对开/低和高/收盘值。[在此处](http://jsbin.com/enegof/1/edit)查看演示。

不过，专用范围条形图将是最佳解决方案。[随意对UserVoice](http://feedback.kendoui.com/forums/127393-kendo-ui-feedback)投票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:14:55.377

[*Telerik 的直接回答：*](http://www.kendoui.com/forums/dataviz/chart/bar-chart---reverse-y-valueaxis-without-rendering-from-top-down.aspx#2413853)

一般来说，`reverse: true`轴的属性只会反转轴的方向，不会改变两个轴和类别轴的交点。因此，为了获得所需的结果，您应该指定值轴`axisCrossingValue`的。`"adPos"`例如：

```
$("#chart").kendoChart({
    //....
    valueAxes: [
        //....
    },
    {
        title: { text: "Ad Position" },
        name: "adPos",                   
        //....
        reverse: true,
        axisCrossingValues: 50
    }]
}); 
```

# ruby-on-rails - 从日期集合中选择每个月的最后日期

> ID：13851484
> 
> 赞同：1
> 
> 时间：2012-12-13T01:20:57.103
> 
> 标签：ruby-on-rails, ruby

在 Ruby on Rails 中，我有一个数据集合，需要过滤这些数据以获取每个月最近创建的数据。执行此操作的**最佳优化**方法是什么？

例如

```
["2012-1-2","2012-1-18", "2012-1-5", "2012-2-15","2012-2-23","2012-2-4"] 
```

结果应该是

```
["2012-1-18, "2012-2-23", ..] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:49:59.603

```
def last_in_month(dates)
  dates = dates.map {|date_string| Date.parse(date_string)}
  grouped_by_month = dates.group_by {|date| date.month}
  grouped_by_month.map do |month, dates_in_month|
    dates_in_month.max_by {|d| d.day}
  end
end

last_in_month(your_nested_arrays.flatten) 
```

返回日期对象。

再次转换为字符串:)

```
last_in_month(your_nested_arrays.flatten).map {|d| d.to_s(:db)} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:34:34.620

```
["2012-1-2","2012-1-18", "2012-1-5", "2012-2-15","2012-2-23","2012-2-4"]
.group_by{|s| s[/\d+-\d+/]}
.values
.map{|a| a.max_by{|s| s[/\d+\z/].to_i}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T01:39:00.620

这应该有效：

```
my_date = ["2012-1-2","2012-1-18", "2012-1-5", "2012-2-15","2012-2-23","2012-2-4"]
my_date.sort_by{|date| month,day,year=date.split("-");[year,month,day]} 
```

但如果这些日期来自数据库表，也许您可​​以考虑在那里对其进行排序。那会快一点（特别是如果有很多记录）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:39:50.057

```
["2012-1-2","2012-1-18", "2012-1-5", "2012-2-15","2012-2-23","2012-2-4"].map { |d| Date.parse(p) }.sort.group_by { |d| [d.month, d.year].join('/') }.map { |k,v| v.last.strftime("%Y-%-m-%-d") } 
```

# ios - 弹出视图控制器调用是否释放其所有属性？

> ID：13851495
> 
> 赞同：0
> 
> 时间：2012-12-13T01:22:36.567
> 
> 标签：ios, model-view-controller, properties, uiviewcontroller, retain

我对IOS编程比较陌生。我已经完成了一门课程，其中所有的编程都是在没有 ARC 的情况下完成的，我遇到了一个内存管理问题，我希望可以澄清一下。

我的情况是这样的：我有一个应用程序，其中“父”视图控制器持有另一个“子”视图控制器，它将推送。所以当这个子视图被推送然后弹出时，它不会被释放，因为父视图会保留它。但即便如此，我认为这个子视图在弹出时仍然会调用其所有属性的释放。我在其中有（非原子，保留）属性，它必须调用这些属性的释放，因为这些字段最终被释放并且在弹出子视图时为空，即使该子视图控制器本身仍然存在。

我以为只要我在前一个视图控制器中持有子视图控制器，即使它被弹出它也不会释放它的任何属性，但我想事实并非如此。我对此是否正确？我找不到，但是是否有一个参考页面说明了弹出视图时调用的所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:29:44.707

不应该是这样的。当您弹出视图控制器时，它会将子项的保留计数减一。但是子控制器不会释放它的元素，直到它的dealloc方法在它的retain达到零时被调用。如果您正确地将其保留在父级中，则不应将其释放。

# html - 正在继承标题第一列的宽度

> ID：13851500
> 
> 赞同：3
> 
> 时间：2012-12-13T01:23:02.077
> 
> 标签：html, css, html-table

我正在尝试制作一个表格，a）可以按列排序，b）在保持标题不变的同时有一个用于正文的滚动条。为了创建我的表格（我仍在学习 HTML 和 JavaScript），我基于以下示例： [Body scroll](http://jsfiddle.net/FeU3T/2/)和[Table Sorter](http://tablesorter.com/docs/)。所以我的代码看起来与那些非常相似。

内容是在从数据库加载时生成的，效果很好。如果我只是在我的代码中使用排序功能，它也可以正常工作，如果我只对正文实现滚动也是如此。当我尝试合并它们时出现问题。发生的情况是标题显示得很好，而正文显示就好像其父容器仅具有第一列的宽度。

```
<table id="myTable" class="tablesorter">
  <thead class="fixedHeader">
    <tr>
     <th><span class="text">Group</span></th>
     <th><span class="text">Activities</span></th>
     <th><span class="text">Classes</span></th>
     <th><span class="text">Discussions</span></th>
     <th><span class="text">Happy Hours</span></th>
     <th><span class="text">Parties</span></th>
     <th><span class="text">Workshops</span></th>
   </tr>
  </thead>
  <tbody class="scrollContent">
    <tr>
      <td>Austin TNG</td>
      <td></td>
      <td></td>
      <td><iframe iconcolor="#0000FF" src="SVG/Discussionx.svg" style="height:30px;width:30px;border:0px;color:white">1</iframe></td>
      <td><iframe iconcolor="#0000FF" src="SVG/HHG.svg" style="height:30px;width:30px;border:0px;color:white">2</iframe></td>
      .....
    </tr>
    <tr>
     <td>...</td>
     ....
    </tr>
    ....
  </tbody>
</table> 
```

这部分的 CSS 是：

```
div.table-scroll{
  height:100%;
  width:85%;
  float:left;
  overflow:hidden; 
}

table.tablesorter {
    font-family:arial;
    background-color: #FFFFFF;
    margin:10px 0pt 15px;
    font-size: 90%;
    width: 100%;
    max-height: 100%;
    height:auto;
    text-align: center;
    /*table-layout: fixed;*/    
}

table.tablesorter thead tr .header {
    background-image: url(bg.gif);
    background-repeat: no-repeat;
    background-position: center right;
    cursor: pointer;
    height:30px;
}

table.tablesorter thead tr th {
    background-color: #000000;
    color: #FFFFFF;
    border: 1px solid #000000;
    font-size: 120%;
    padding: 4px;
    height:30px;
    position: relative;
    overflow-x:hidden;
}

table.tablesorter tbody.scrollContent {
    height: 85%;
    width: 100%;
    display: block;
    overflow:auto;
}

table.tablesorter tbody td {
    color: #3D3D3D;
    padding: 4px;
    background-color: #FFF;
    vertical-align: middle;
    height:30px;    
} 
```

如您所见，滚动条显示在第一列结束的位置。应该是“车间”栏结束的时候。

![](../Images/e67cdd1ddf02a1e880036d5a2cfbd820.png)

知道是什么原因造成的吗？“检查元素”部分中的代码对我来说似乎是正确的，这是我的浏览器看到 Javascript 生成的代码的方式。如果有人能给我一个关于在哪里解决这个问题的想法，我将不胜感激。

# java - 在我的 Java 程序中实现搜索框

> ID：13851504
> 
> 赞同：2
> 
> 时间：2012-12-13T01:23:35.197
> 
> 标签：java

我正在制作简单的浏览器。我想实现一个搜索框，它会自动重定向到搜索结果，例如[http://uk.ask.com/](http://uk.ask.com/)它看起来很简单。

如果我要搜索“hello SO”，它的链接将如下所示。

`http://uk.ask.com/web?qsrc=1&o=0&l=dir&q=hello+SO+&dm=all`

所以我想要做的是创建一个 JTextField，用户可以在其中输入他正在搜索的内容，然后只需填写他在 url 中输入的任何内容

`http://uk.ask.com/web?qsrc=1&o=0&l=dir&q="FILL HERE WITH + instead of spaces "&dm=all`

我不知道如何拆分输入的字符串并用 + 符号填充空格。任何的想法 ？这也是我认为可以做到的方式。我将不胜感激任何其他建议。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T01:28:58.557

您需要对字符串进行[URL 编码](http://docs.oracle.com/javase/7/docs/api/java/net/URLEncoder.html#encode%28java.lang.String,%20java.lang.String%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:28:12.070

干得好

```
url.replace(" ", "+"); 
```

# python - 对字典值执行计算

> ID：13851507
> 
> 赞同：0
> 
> 时间：2012-12-13T01:23:44.120
> 
> 标签：python, list, dictionary, iterator

我有一本字典：

```
adict = {'key1':{'t1':{'thedec':.078, 'theint':1000, 'thechar':100},
                          't2':{'thedec':.0645, 'theint':10, 'thechar':5},
                          't3':{'thedec':.0871, 'theint':250, 'thechar':45},
                          't4':{'thedec':.0842, 'theint':200, 'thechar':37},
                          't5':{'thedec':.054, 'theint':409, 'thechar':82},
                          't6':{'thedec':.055, 'theint':350, 'thechar':60}}} 
```

我使用以下循环，以便我可以在向量中配对“theint”的值，以便最终我可以轻松地对它们执行统计计算：

```
for k1 in adict:
    x = []
    for t, record in sorted(adict[k1].items(), key = lambda(k,v):v['thedec']):
        x.append(record['theint'])
    y = [0]*(len(x)/2)
    for i in xrange(0,len(x),2):
        y[i/2] = sum(x[i:i+2]) 
```

我想知道是否： 1\. 有一种比使用 .append() 更快的方法来提取 'theint' 的值 2\. 我可以采用一种方法，例如，所有 'theint' 值的平均值 3 . 有一种方法可以让我在一个字典中循环遍历，这样我就可以以某种方式跳过首先复制所有值的步骤，然后立即将它们作为求和对添加到向量中。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T01:28:59.577

```
>>> [x['theint'] + y['theint'] for x, y in zip(*[iter(sorted(adict['key1'].values(), key=operator.itemgetter('thedec')))] * 2)]
[759, 1010, 450] 
```

# regex - grep 和正则表达式 - 元/通配符

> ID：13851508
> 
> 赞同：2
> 
> 时间：2012-12-13T01:23:59.777
> 
> 标签：regex, r

这是一个更大更复杂数据集的最小示例，只是试图让我了解一些东西。

```
> grep("X10\\.1+",c("X10.10","X10.11","X10.12"))
[1] 1 2 3 
```

现在我本来希望只`2`返回，因为“+”应该是“前一个元素的 1 个或多个”。我认为逃避这个时期（我必须处理，所以想在例子中保留它）可能是导致问题的原因。

```
> grep("X101+",c("X1010","X1011","X1012"))
[1] 1 2 3 
```

那么，我对'+'功能的理解是错误的吗？

结论：

谢谢@詹姆斯。所以我的理解是 + 是“前一个元素的另一个或多个”，而不是它的实际含义，即“前一个元素的一个或多个”。

11+ 会完成我的想法（在第一个 1 之后有一个额外的 1 或更多 1 等）。干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T01:33:02.443

您需要表示在任意数量的 1 之后，您想要匹配字符串的结尾。你`$`用来做这个。

```
grep("X10\\.1+$",c("X10.10","X10.11","X10.12"))
[1] 2 
```

同样，`^`如果要限制匹配开始，则匹配字符串的开头`X10.`，而不是`PX10.`例如将由现有正则表达式匹配的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T01:35:28.337

在这种情况下，前面的元素是数字“1”，它出现在所有 3 个元素中的那个位置。您之前对“+”的理解是正确的。

# asp.net-mvc-4 - KendoUI 网格列模板 ActionLink

> ID：13851510
> 
> 赞同：0
> 
> 时间：2012-12-13T01:24:38.147
> 
> 标签：asp.net-mvc-4, kendo-ui

我在剑道网格模板中有一个 Ajax.ActionLink。我想单击链接，执行操作，并且永远不要离开当前视图。我使用 Ajax 链接来获取确认和成功消息，但我也测试了正常的 A 和 Html.ActionLink。在每种情况下，都会执行 ActionLink 并返回一个空白页。ActionLink 本身调用了导出 + 电子邮件功能。

此外，Ajax.ActionLink 不会执行其“确认”命令，但不会发生 Javascript 错误。OnSuccess 当然也不会执行。Kendo Grid 之外的 Ajax.ActionLink 也不执行其中任何一个。

```
@(Html.Kendo().Grid(Model.Contacts)
    .Name("contacts")
    .Columns(columns =>
    {
         columns.Bound(e => e.FirstName);
         columns.Bound(e => e.LastName);
         columns.Bound(e => e.Email);
         columns.Template(@<text></text>).ClientTemplate(
            @Ajax.ActionLink("Email Report", "Export", new { EquipmentId = @Model.EquipmentId, WeekDate = @Model.WeekStart.ToString("yyyy-MM-dd"), EmailAddress = "#=Email#" }, new AjaxOptions { HttpMethod = "POST", Confirm = "Are you sure?", OnSuccess = "emailSuccess" }).ToHtmlString()
            );
    })
    .DataSource(dataSource => dataSource
        .Ajax()
        .ServerOperation(false)
        .Model(model => { model.Id(e => e.ContactId);})
    )
) 
```

控制器动作：

```
public ActionResult Export(int EquipmentId, string WeekDate, string EmailAddress)
{
    ...
    return new Extensions.Report.XlsExportResult(...);
} 
```

动作扩展：

```
public class XlsExportResult : ActionResult
{
    ...
    public override void ExecuteResult(ControllerContext context)
    {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:44:57.050

Ajax.ActionLink 方法有效……它不起作用的原因是我是个白痴……并且没有为 Ajax 捆绑正确的脚本。

```
bundles.Add(new ScriptBundle("~/bundles/jqueryajax").Include("~/Scripts/jquery.unobtrusive*")); 
```

# ruby-on-rails - 使用 proc 在 Rails 中渲染布局会引发 ArgumentError

> ID：13851512
> 
> 赞同：3
> 
> 时间：2012-12-13T01:24:38.897
> 
> 标签：ruby-on-rails, ruby

这是我不明白的事情。为什么第一个示例不起作用（ArgumentError），但第二个？

```
class FooController < ActionController::Base
  layout proc { request[:action] == 'index' ? 'foo' : false }
end

class FooController < ActionController::Base
  layout proc { |controller| request[:action] == 'index' ? 'foo' : false }
end 
```

我正在创建一个`proc`而不是一个`lambda`. 而且我一直认为只`lambdas`需要正确的论点。

将块转换为`lambda`某个地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:36:41.077

`proc`也可以带 args，至少在`layout`方法内，它需要`request`对象，另一方面，您可以阅读[何时使用 lambda，何时使用 Proc.new？](https://stackoverflow.com/questions/626/when-to-use-lambda-when-to-use-proc-new)`proc`看看和之间有什么区别`lambda`。

# visual-studio-2012 - 发布寻找 MSVCR110d.dll 的应用程序

> ID：13851522
> 
> 赞同：10
> 
> 时间：2012-12-13T01:25:56.783
> 
> 标签：visual-studio-2012

我已经用 Visual Studio 2012 构建了一个 c++ 应用程序。我试图让它在另一台没有安装 VS2012 的机器上运行，但它不会运行。它一直在寻找 msvcr110d.dll（不是 msvcr110.dll），我已经在发布模式下构建了应用程序，并且我为多线程 dll (/MD) 设置了运行时库（尽管我已经尝试了所有没有的选项有用）。我不知道为什么这没有运行。目标机器确实安装了可再发行组件。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T01:30:07.877

后缀表示 C++ 运行时 DLL的`d.dll`调试版本。这意味着您的 exe 是调试版本，它需要`MSVCR110d.dll`.

您应该部署您的 exe 的发布版本，这需要`MSVCR110.dll`.

要求用户安装[VC2012 runtime redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=30679)，`MSVCR110.dll`将被安装。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T15:53:17.300

确保不仅您正在制作的解决方案是使用发布模式配置构建的，而且所有依赖项也都使用非调试 DLL。正如您所写的那样，您正在使用导入的库（freeglut），所以也要检查它们。由于 freeglut 是开源的，您可能也想从头开始构建它（使用发布模式），而不是使用预构建的 DLL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-28T17:20:23.347

问题很可能是 freeglut 是一个调试库，而不是一个发布库，因此试图链接到调试模式 DLL。可能还存在 freeglut 的发布模式版本，您需要更改项目配置以使用该 freeglut 库。

然而，这里有一个更深层次的问题：你如何确定这一点？如果有另一个库导致问题，或者如果它是您自己的可执行文件中的一些模糊设置怎么办？我发现[Dependency Walker](http://www.dependencywalker.com/)工具非常有用。它的页面声称它包含在 Visual C++ 中，但我在任何 Visual C++ 安装中都找不到它（可能是因为我没有安装所有可选组件）。请注意，包含的帮助文件对我也不起作用，但您可以在网页上查看帮助文件的内容。

![在 Dependency Walker 中查看的 freeglut](../Images/173e05355dc5595093ff6f9e2080df54.png)

*freeglut.dll 依赖项的视图。我已经强调了这个版本的 FreeGLUT 使用的特定 C 运行时——你的可能不同。右侧的函数列表向您展示了 MSVCRT 导出的内容，突出显示的那些是似乎使用的函数。例如，看起来这个版本的 FreeGLUT 使用了 operator new。如果你的名字被打乱了，按 F10 取消 C++ 名字的修饰，看看函数是什么。所有丢失的 DLL 似乎都是“延迟加载”的 DLL（请参阅沙漏），因此它们可能不是问题。*

我已经使用 Dependency Walker 找出了一些令人讨厌的 DLL 问题。虽然对于您的特定问题来说这可能是矫枉过正，但我​​认为很高兴知道哪些工具可以让您真正*看到*问题，而不是仅仅推断它就在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T18:44:57.257

快速简便的方法是将 msvcr110d.dll 从您的开发机器复制到目标机器。确保您使用的是与构建应用程序的体系结构相对应的目录中的一个（Windows\System32 或 Windows\SysWOW64）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-20T09:54:37.703

即使您构建了 Release EXE 或 DLL 并尝试在没有 Visual Studio 2012 的机器上使用它们， 您也需要安装[Visual C++ Redistributable for Visual Studio 2012。](http://www.microsoft.com/en-us/download/details.aspx?id=30679)

# ada - 如何在ada中分配除一个以外的所有元素？

> ID：13851524
> 
> 赞同：2
> 
> 时间：2012-12-13T01:25:59.170
> 
> 标签：ada

如何在ada中分配除一个以外的所有元素？

如果我有这个

```
element_to_ignore : integer := 3;
a : array(1..4) := (5,3,2,6);
b : array(1..a'length-1) := a( all but element_to_ignore ); 
```

我需要这个结果：
b = (5,3,6)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T02:41:59.360

使用切片和数组连接。

该程序演示了如何执行此操作，并修复了代码中的一些问题（例如，您没有指定数组的元素类型）：

```
with Ada.Text_IO; use Ada.Text_IO;
procedure Foo is
    Element_To_Ignore : Integer := 3;
    type Array_Of_Integer is array(Positive Range <>) of Integer;
    A : Array_Of_Integer(1..4) := (5,3,2,6);
    B : Array_Of_Integer(1..A'Length-1)
        := A(A'First .. Element_To_Ignore-1) &
           A(Element_To_Ignore+1 .. A'Last);
begin
    for I In B'Range Loop
        Put_Line(Integer'Image(B(I)));
    end loop;
end Foo; 
```

您还可以省略声明的边界，`A`并`B`让它们从初始化中获取边界。这确实意味着当`Element_To_Ignore`为 1 时，`B`将有边界`2..4`而不是`1..3`。只要您始终引用`B'First`, `B'Last`,`B'Range`而不是使用硬连线常量，这应该不是问题。这也意味着设置`Element_To_Ignore`为 0 或 5 会导致`B`设置为`(5,3,2,6)`.

我在[这里](https://gist.github.com/4278738)创建了一个更详细的演示。

# javascript - 如何使用 PHP 弹出警告消息框？

> ID：13851528
> 
> 赞同：140
> 
> 时间：2012-12-13T01:27:37.037
> 
> 标签：javascript, php, messagebox

如何使用 PHP 弹出警告消息框？

* * *

## 回答 #1

> 赞同：302
> 
> 时间：2012-12-13T01:33:10.210

您可以使用 Javascript：

```
// This is in the PHP file and sends a Javascript alert to the client
$message = "wrong answer";
echo "<script type='text/javascript'>alert('$message');</script>"; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-11-29T14:07:30.507

创建警报功能

```
<?php
alert("Hello World");

function alert($msg) {
    echo "<script type='text/javascript'>alert('$msg');</script>";
}
?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T01:53:11.733

PHP 呈现 HTML 和 Javascript 以发送到*客户端的*浏览器。PHP 是一种*服务器端*语言。这就是它允许它在服务器上的数据库中执行诸如 INSERT 之类的操作的原因。

但是客户端的浏览器会呈现警报。您必须通过 javascript 工作才能获得警报。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-24T23:05:04.293

我是这样做的：

```
<?php 
$PHPtext = "Your PHP alert!";
?>

var JavaScriptAlert = <?php echo json_encode($PHPtext); ?>;
alert(JavaScriptAlert); // Your PHP alert! 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-10-06T20:58:24.657

您需要一些 JS 来实现这一点，只需`alert('Your message')`在您的 PHP 代码中添加即可。

请参阅下面的示例

```
 <?php 

//my other php code here

        function function_alert() { 

            // Display the alert box; note the Js tags within echo, it performs the magic
            echo "<script>alert('Your message Here');</script>"; 
        } 

        ?> 
```

当您使用应该触发您的路由访问您的浏览器时`function_alert`，您将看到带有您的消息的警报框显示在您的屏幕上。

阅读更多[https://www.geeksforgeeks.org/how-to-pop-an-alert-message-box-using-php/](https://www.geeksforgeeks.org/how-to-pop-an-alert-message-box-using-php/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T03:54:09.800

在 php 命令之前使用 jQuery`alert`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-24T07:50:05.053

看这个例子：

```
<?php
echo "<div id='div1'>text</div>"
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="js/jquery1.3.2/jquery.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#div1').click(function () {
                alert('I clicked');
            });
        });
</script>
</head>
<body>

</body>
</html> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-12T13:51:40.433

此 .php 文件内容将生成带有警报的[有效 html](https://validator.w3.org/nu/#textarea)（您甚至可以删除`<?php...?>`）

```
<!DOCTYPE html><html><title>p</title><body onload="alert('<?php echo 'Hi' ?>')"> 
```

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2016-03-26T10:36:03.580

您可以使用 DHP 来执行此操作。它绝对简单，而且比脚本快。只是写`alert('something');` 它不是编程语言，它有点像 jquery。您需要在顶部需要 dhp.php，在底部需要 dhpjs.php。目前它不是开源的，但当它是你可以使用它时。这是我们的编程语言；）

# modal-dialog - 对话框顶部的Jquery位置

> ID：13851529
> 
> 赞同：0
> 
> 时间：2012-12-13T01:27:41.303
> 
> 标签：modal-dialog

我创建了代码以在单击 div 时显示 jquery 对话框。现在对话框在点击位置后的 5 点处弹出。

我正在尝试从 li 的顶行显示对话框，这意味着 li 的顶部边框应该与对话框的顶部边框对齐。有人可以指出我正确的逻辑，以找出如何通过获取 li 顶部边框位置来打开对话框。

```
 <div class="editionDetailAction">Action for Item 1</div>
<div class="editionDetailAction">Action for Item 2</div>
<div class="editionDetailAction">Action for Item 3</div>
<div class="editionDetailAction">Action for Item 4</div>

<div id="actionsPopup">
    <ul><li><a href="http://www.google.com">Add xyz</a></li></ul>
    <ul><li>Manage xyz</li></ul>
    <ul><li>Show xyz</li></ul>
</div>

.editionDetailAction { width: 130px; height: 30px; border: solid 1px #ddd; }
.actionsPopup .ui-dialog-titlebar { display:none; }

$(document).ready(function () {
    $('.editionDetailAction').click(function (e) {
        $("#actionsPopup").dialog("option", { position: [e.pageX+5, e.pageY+5] });
    });

    $("#actionsPopup").dialog({
            autoOpen: false,  
dialogClass: 'actionsPopup',
        maxWidth:100,
                    maxHeight: 100,
                    width: 100,
        height: 80,
resizable: false,

    });
    $(".editionDetailAction").bind("click", function () {
        $("#actionsPopup").dialog('open'); 
    });
    $(".actionsPopup").bind("mouseover", function () {
        $("#actionsPopup").dialog('open');
    }); $(".actionsPopup").bind("mouseleave", function () {
        $("#actionsPopup").dialog('close');
    });

    $(".editionDetailAction").bind("mouseleave", function () {
        $("#actionsPopup").dialog('close'); 
    });

   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:45:46.340

试试这个：

```
$('.editionDetailAction').click(function() {
    var pos = $(this).position();
    $("#actionsPopup").dialog("option", {
        position: [pos.left+5, pos.top+5]
    });
}); 
```

见例子：http: [//jsfiddle.net/Twisty/DZm9d/1/](http://jsfiddle.net/Twisty/DZm9d/1/)

# python - 如何根据条件表达式从 pandas DataFrame 中删除行

> ID：13851535
> 
> 赞同：509
> 
> 时间：2012-12-13T01:28:24.500
> 
> 标签：python, pandas

我有一个 pandas DataFrame，我想从中删除特定列中字符串长度大于 2 的行。

我希望能够做到这一点（根据[这个答案](https://stackoverflow.com/questions/11881165/slice-pandas-dataframe-by-row)）：

```
df[(len(df['column name']) < 2)] 
```

但我只是得到错误：

```
KeyError: u'no item named False' 
```

我究竟做错了什么？

（注意：我知道我可以`df.dropna()`用来删除包含 any 的行`NaN`，但我没有看到如何根据条件表达式删除行。）

* * *

## 回答 #1

> 赞同：1245
> 
> 时间：2014-12-08T14:26:11.697

要直接回答这个问题的原始标题“如何根据条件表达式从熊猫数据帧中删除行”（我理解这不一定是 OP 的问题，但可以帮助其他用户遇到这个问题），一种方法是使用[掉落](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.drop.html)方法：

```
df = df.drop(some labels)
df = df.drop(df[<some boolean condition>].index) 
```

**例子**

要删除列 'score' < 50 的所有行：

```
df = df.drop(df[df.score < 50].index) 
```

就地版本（如评论中指出的那样）

```
df.drop(df[df.score < 50].index, inplace=True) 
```

**多个条件**

（参见[布尔索引](https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#boolean-indexing)）

> 运算符是：`|`for `or`、`&`for`and`和`~`for `not`。这些必须使用括号进行分组。

删除列 'score' < 50 和 > 20 的所有行

```
df = df.drop(df[(df.score < 50) & (df.score > 20)].index) 
```

* * *

## 回答 #2

> 赞同：248
> 
> 时间：2012-12-13T01:37:01.637

当你这样做时，`len(df['column name'])`你只会得到一个数字，即 DataFrame 中的行数（即列本身的长度）。如果要应用于`len`列中的每个元素，请使用`df['column name'].map(len)`. 所以试试

```
df[df['column name'].map(len) < 2] 
```

* * *

## 回答 #3

> 赞同：146
> 
> 时间：2016-10-18T14:01:04.270

您可以将 分配给`DataFrame`自身的过滤版本：

```
df = df[df.score > 50] 
```

这比`drop`：

```
%%timeit
test = pd.DataFrame({'x': np.random.randn(int(1e6))})
test = test[test.x < 0]
# 54.5 ms ± 2.02 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)

%%timeit
test = pd.DataFrame({'x': np.random.randn(int(1e6))})
test.drop(test[test.x > 0].index, inplace=True)
# 201 ms ± 17.9 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)

%%timeit
test = pd.DataFrame({'x': np.random.randn(int(1e6))})
test = test.drop(test[test.x > 0].index)
# 194 ms ± 7.03 ms per loop (mean ± std. dev. of 7 runs, 10 loops each) 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2019-02-16T03:35:51.633

我将扩展@User 的通用解决方案以提供`drop`免费的替代方案。这适用于根据问题标题（不是 OP 的问题）在此处指导的人

假设您要删除所有具有负值的行。一种衬垫解决方案是：-

```
df = df[(df > 0).all(axis=1)] 
```

**一步一步解释：--**

**让我们生成一个 5x5 随机正态分布数据框**

```
np.random.seed(0)
df = pd.DataFrame(np.random.randn(5,5), columns=list('ABCDE'))
      A         B         C         D         E
0  1.764052  0.400157  0.978738  2.240893  1.867558
1 -0.977278  0.950088 -0.151357 -0.103219  0.410599
2  0.144044  1.454274  0.761038  0.121675  0.443863
3  0.333674  1.494079 -0.205158  0.313068 -0.854096
4 -2.552990  0.653619  0.864436 -0.742165  2.269755 
```

**让条件是删除否定。满足条件的布尔 df：-**

```
df > 0
      A     B      C      D      E
0   True  True   True   True   True
1  False  True  False  False   True
2   True  True   True   True   True
3   True  True  False   True  False
4  False  True   True  False   True 
```

**满足条件的所有行的布尔系列** 注意如果行中的任何元素不符合条件，则该行被标记为 false

```
(df > 0).all(axis=1)
0     True
1    False
2     True
3    False
4    False
dtype: bool 
```

**最后根据条件从数据框中过滤掉行**

```
df[(df > 0).all(axis=1)]
      A         B         C         D         E
0  1.764052  0.400157  0.978738  2.240893  1.867558
2  0.144044  1.454274  0.761038  0.121675  0.443863 
```

您可以将其分配回 df 以实际*删除*上面完成的vs *filter*
`df = df[(df > 0).all(axis=1)]`

这可以很容易地扩展以过滤掉包含 NaN s（非数字条目）的行：-
`df = df[(~df.isnull()).all(axis=1)]`

对于以下情况，这也可以简化：删除 E 列为负数的所有行

```
df = df[(df.E>0)] 
```

我想以一些分析统计数据结束@User 的`drop`解决方案为什么比基于原始列的过滤慢：-

```
%timeit df_new = df[(df.E>0)]
345 µs ± 10.5 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
%timeit dft.drop(dft[dft.E < 0].index, inplace=True)
890 µs ± 94.9 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each) 
```

一列基本上是`Series`一个`NumPy`数组，它可以被索引而不需要任何成本。对于那些对底层内存组织如何影响执行速度感兴趣的人来说，这里是[加速 Pandas 的一个很好的链接](http://www.cs.sfu.ca/CourseCentral/732/ggbaker/content/pandas-speed.html)：

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-11-07T02:30:47.273

在 pandas 中，您可以`str.len`使用边界并使用布尔结果对其进行过滤。

```
df[df['column name'].str.len().lt(2)] 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-02-02T02:32:11.867

如果您想根据列值上的某些复杂条件删除数据框行，那么以上述方式编写可能会很复杂。我有以下更简单的解决方案，它总是有效的。让我们假设您要删除带有“标题”的列，因此首先将该列放入列表中。

```
text_data = df['name'].tolist() 
```

现在对列表的每个元素应用一些函数并将其放入熊猫系列中：

```
text_length = pd.Series([func(t) for t in text_data]) 
```

就我而言，我只是想获得令牌的数量：

```
text_length = pd.Series([len(t.split()) for t in text_data]) 
```

现在在数据框中添加一个带有上述系列的额外列：

```
df = df.assign(text_length = text_length .values) 
```

现在我们可以在新列上应用条件，例如：

```
df = df[df.text_length  >  10] 
```

```
def pass_filter(df, label, length, pass_type):

    text_data = df[label].tolist()

    text_length = pd.Series([len(t.split()) for t in text_data])

    df = df.assign(text_length = text_length .values)

    if pass_type == 'high':
        df = df[df.text_length  >  length]

    if pass_type == 'low':
        df = df[df.text_length  <  length]

    df = df.drop(columns=['text_length'])

    return df 
```

# api - 具有实时 API 的文件共享平台

> ID：13851540
> 
> 赞同：0
> 
> 时间：2012-12-13T01:28:46.937
> 
> 标签：api, file-sharing

我一直在玩弄一个以实时文件共享为核心的 Web 应用程序。会有用户组，人们可以与组共享他们的文件。需要通过 Web 界面和其他用户的计算机立即访问文件。

我有一个基本版本，在服务器上使用 Dropbox 的无头 Linux 客户端。用户将与服务器的帐户共享一个文件夹，并且在服务器端发生了令人讨厌的巫术以正确地整理所有内容。我查看了 ~/Dropbox 文件夹以获取更新，并做了任何需要做的事情。由于 Dropbox 的结构，文件副本必须为每个用户存储一次，这意味着需要大量的磁盘空间。我的解决方案有效，但几乎没有。

我尝试转换为 Dropbox 的 API，但发现他们对更新文件的轮询建议是每 5 分钟一次。如果您保持比每 2 分钟一次快得多的速度，他们会阻止您。即便如此，轮询 API 确实不是一种选择。我需要文件上传的那一刻；10秒后真的太慢了​​。Google Drive 的 API 给了我类似的麻烦。

我曾短暂考虑过编写自己的桌面应用程序供用户安装，但很快就放弃了这个想法。我不是桌面软件开发人员，所以该程序无疑会有问题。更重要的是，这个应用程序并不适合精通技术的书呆子。它适用于普通人。桌面应用程序需要尽可能简单：他们的计算机上有一个文件夹，他们将东西放在文件夹中，然后奇迹发生了，他们的文件在互联网上。Dropbox 做得非常好，但他们的开发者 API 完全无法满足我的需求。

谁能建议我可以研究的其他应用程序？我没有太多的预算，所以免费更好。我不介意将文件存储在我的服务器上，总文件大小可能最多只能保持几个演出。如果需要任何服务器端二进制文件，我使用的服务器运行 Ubuntu 12.04。唯一真正重要的事情是桌面应用程序对于非技术人员来说很容易使用，并且有一些方法可以在文件更新时通知我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:36:58.530

我最终建立了自己的基于[OwnCloud](http://owncloud.org/)的自托管解决方案。到目前为止，它对我来说一直很好。他们有一个非常好的 API，很容易集成，如果需要，我可以随时修改自己的 UI。我可以通过在其数据目录中放置一个文件系统观察程序来捕获文件更改，或者我可以编写一个与其核心集成的应用程序，并在发生更改时发出信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T02:31:07.250

我们是一家文件共享公司，最近发布了功能齐全的 RESTful API。您可以添加用户、组、权限、文件、动态链接，甚至实时搜索。

[http://www.smartfile.com/dev/](http://www.smartfile.com/dev/)

# java - 使用休眠时返回的小写列名

> ID：13851541
> 
> 赞同：0
> 
> 时间：2012-12-13T01:28:47.987
> 
> 标签：java, mysql, json, spring, hibernate

我有一个 Javascript 应用程序，它使用 Java 作为 Hibernate、Spring 和 MySQL 的后端。问题是，即使我在我的数据库以及我的实体源中将列大写，我在从后端返回的 JSON 中获得了小写的列名。

这是模型来源：

```
package app.model;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

import org.codehaus.jackson.annotate.JsonAutoDetect;

@JsonAutoDetect
@Entity
@Table(name="resources")
public class Resource {

    @Id
    @GeneratedValue
    @Column(name="Id")
    private int Id;

    @Column(name="Name", nullable=false)
    private String Name;

    public int getId() {
        return Id;
    }

    public void setId(int id) {
        this.Id = id;
    }

    public String getName() {
        return Name;
    }

    public void setName(String name) {
        this.Name = name;
    }
} 
```

和返回的 JSON ：

`{"data":[{"name":"Tom","id":8},{"name":"Mike","id":9},{"name":"Jerry","id":10},{"name":"Larry","id":11},{"name":"Tina","id":12},{"name":"Tony","id":15}],"success":true}`

这种行为是否可以以某种方式覆盖/可配置？如果需要更多信息，我将使用所需数据更新帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:57:14.210

尝试这个..

```
@JsonProperty("Id")
public int getId() {
    return Id;
}

public void setId(int id) {
    this.Id = id;
}
@JsonProperty("Name")
public String getName() {
    return Name;
}

public void setName(String name) {
    this.Name = name;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T01:49:23.190

这是 Jackson 基于 getter 方法名称的常规输出。使用[@JsonProperty](http://fasterxml.github.com/jackson-annotations/javadoc/2.1.1/com/fasterxml/jackson/annotation/JsonProperty.html)注释来覆盖此行为。

# python - PIL 可以使用 pyqt4 资源文件打开图像吗？

> ID：13851542
> 
> 赞同：1
> 
> 时间：2012-12-13T01:28:51.443
> 
> 标签：python, image, python-imaging-library, pyqt4, pyrcc

PIL 可以使用 pyqt4 资源文件打开图像吗？

```
from PIL import Image, ImageWin
import res_rc #resource file

image = Image.open(":/images/image.png")
dim = ImageWin.Dib(image) 
```

我收到此错误

`IOError: [Errno 22] invalid mode ('rb') or filename :/images/image.png'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:21:50.680

要从资源中读取图像文件，请使用 QFile 打开它并将原始数据传递给 PIL 可以使用的类文件对象：

```
from PyQt4.QtCore import QFile
from cStringIO import StringIO
from PIL import Image, ImageWin
import res_rc

stream = QFile(':/images/image.png')
if stream.open(QFile.ReadOnly):
    data = stream.readAll()
    stream.close()
    image = Image.open(StringIO(data))
    dim = ImageWin.Dib(image) 
```

请注意，资源旨在*编译到*应用程序中，因此它们是严格只读的。

# facebook-like - Facebook like 按钮最小宽度

> ID：13851547
> 
> 赞同：4
> 
> 时间：2012-12-13T01:29:21.633
> 
> 标签：facebook-like

我的网站上有 Facebook 按钮的 xfbml 版本，我注意到当页面加载时，按钮在右侧加载，然后自行居中（它应该在哪里）。我尝试过尝试不同尺寸的宽度，最后将其设置为 0 或自动完全解决问题。按钮加载在中心并且不会移动。

我的问题很简单，是否允许它具有“宽度：自动”，因为在 Facebook 开发者页面上它声明最小值为“225”。

我提前道歉，但我是一个完整的初学者。

```
<fb:like href="http://mywebsite.com" send="false" layout="button_count" width="auto" show_faces="false" font="verdana"></fb:like> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T11:50:31.110

你说得对，没有办法让 Like 按钮有`auto`宽度。

作为一种解决方法，您可以测量按钮应占用的空间宽度，并在按钮代码中动态指定它，但在这种情况下，您必须使用 FB.parse() 将`<fb:like>`代码转换为工作按钮。

前任。：

```
$(document).ready(function(){

    btnWidth = parseInt($(".buttonContainer").width(), 10) - 5;

    $(".buttonContainer").append('<fb:like href="http://mywebsite.com" send="false" layout="button_count" width="' + btnWidth  + '" show_faces="false" font="verdana"></fb:like>');
    FB.parse($(".buttonContainer").get());

}); 
```

# performance - 加速 R 中的文本处理

> ID：13851549
> 
> 赞同：0
> 
> 时间：2012-12-13T01:29:41.070
> 
> 标签：performance, r, optimization, text

我正在优化一个软件，最昂贵的行是代码的文本处理行。通过拆开程序并注释掉某些部分，我发现 if 语句中的一个小参数导致了程序中的大部分瓶颈。在声明中询问是否

```
allele1 %in% rownames(seqMat) 
```

是真的，如果是这样，下面的语句将被调用。这个 if 语句循环了数千次，导致程序显着变慢。我的问题是，如何更改该语句以帮助加快程序速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T02:13:36.403

您只能为所有等位基因调用`%in%`一次，并将其输出存储在循环内以供重复使用。这是一个概念证明：

```
a <- sample(1:1000, 100000, replace = TRUE)
b <- -1000:1000

system.time({
    stored <- a %in% b
    for (i in seq_along(a))
        stored[i]
}) 
#    user  system elapsed 
#   0.056   0.001   0.056 

system.time({
    for (i in seq_along(a))
        a[i] %in% b
})
#    user  system elapsed 
#   3.634   0.374   3.957 
```

此外，Hadley 建议使用`any`and`==`并没有太大的改进：

```
system.time({
    for (i in seq_along(a))
        any(a[i] == b)
})
#    user  system elapsed 
#   1.661   0.164   1.835 
```

# android - 为什么自定义 DialogPreference 不会在 onSharedPreferenceChanged 侦听器上触发？

> ID：13851554
> 
> 赞同：4
> 
> 时间：2012-12-13T01:30:23.847
> 
> 标签：android, listener, sharedpreferences, dialog-preference

我正在尝试在首选项中设置对话框首选项，用户只需单击肯定按钮即可触发某些操作。（清除数据库？否 | 是）

```
public class MyDialogPreference extends DialogPreference {

    public MyDialogPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        super.onDialogClosed(positiveResult);
        Log.d(MainActivity.TAG, "# onDialogClosed: " + positiveResult);
    }

} 
```

我实际上不想保留任何东西，只需触发 onSharedPreferenceChanged 侦听器，这样我就可以在活动中处理它。但我不知道如何触发它

//解决方案

```
@Override
protected void onDialogClosed(boolean positiveResult) {
    super.onDialogClosed(positiveResult);
    if(positiveResult) {
        persistBoolean(!getPersistedBoolean(true));
    }
    Log.d(MainActivity.TAG, "# onDialogClosed: " + positiveResult);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T19:29:59.533

`onSharedPreferenceChanged`由于在 上注册的内置回调而被调用`sharedpreference`，因此除非您更改与 dialogPreference 关联的键，否则您将不会获得`onSharedPreferenceChanged`回调。

因此，您可以做的是每次关闭对话框时，您都可以更改键中的值。像下面的东西

```
text = getPersistedString("1")
if(text.length() > 10)
   text = "1";
persistString(text+"1"); 
```

确保您的 dialogPreference 有一个键和 android:persistent 在 xml 中为 true

# java - 单击输入类型“按钮”以编程方式从 java 调用 asp 方法

> ID：13851558
> 
> 赞同：0
> 
> 时间：2012-12-13T01:31:08.327
> 
> 标签：java, http-post, web-scraping, jsoup, httpurlconnection

我正在做一个从网站上抓取数据的项目。html 页面可以选择将数据保存在 excel 文件中。输入元素如下所示：

```
<input type="button" id="SaveXLS" class="func_button excel_sel" title="some title" onclick="doSave2XLS(1886);"> 
```

下面是提交表单的标题，在我手动单击按钮以将数据保存在文件中之后。我想根据提交的表单和生成的数据以编程方式保存文件：

```
http://www.somewebsite.com/iss/modules/dosearch.asp

POST /iss/modules/dosearch.asp HTTP/1.1
Host: www.somewebsite.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: text/html, */*; q=0.01
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
X-Requested-With: XMLHttpRequest
Referer: http://www.somewebsite.com/dbsearch/dbsearchru/companies/
Content-Length: 352
Cookie: ssid=198455487; ASPSESSIONIDQSBATRTS=GLKHPLMDGMBMNCGPIBDFDJNK; have_cookies=1; b=b; bask%5Fid=708D9FFEF85146BC9C50AA2B101F153D; storedID=5777322648552; user%5Flogin=CGUTST; sessionid=198455487; ASPSESSIONIDSQAATQSS=LDGPAKNDAEOOHEJPAPCNCKHN; ASPSESSIONIDQQDCTRSS=MACDCIODILPFNHAFEJMLJCCO; ASPSESSIONIDQSACSRSS=FEOLDGPDIJJOCHKAKLEIICGD; ASPSESSIONIDQSDCTRST=CFFLHEBALAGBCMHBPIGDHLBN; ASPSESSIONIDQQBCTQTS=NDOBIIBAGFFEBKCHDELOCIEP; ASPSESSIONIDQSBDSRTT=GGJFKMBAHHJAHLDLPAPCCFOP; ASPSESSIONIDSSAASRST=ADFFOACAPFMPIGKMFOCEPGAL; ASPSESSIONIDSSCBSRTS=EPPPPECAKIIAIIFGADGNFHOB; ASPSESSIONIDQSCDQQTS=IDAKMKHANNHLMGEMKCPNKAKA; 1stopen=1; ASPSESSIONIDQQABSRTS=LPLDOIIAKPNOJMJILGFCLPAG
Pragma: no-cache
Cache-Control: no-cache
company=&strict=1&phone=&address=&ruler=&constitutor=&regions=&is_okato=1&reg_excl=0&industry=&is_okonh=0&ind_excl=0&ind_main=0&okopf=&okopf_excl=0&okfs=&okfs_excl=0&rfi=-1&rfi_excl=0&status=&status_excl=0&trades=000&gaap=0&bankrupt=0&kod=&kod_type=1&dbeg=&dend=&group_id=0&page_no=1&rcount=30&user_id=1886&top1000=0&group_name=&fas=&fas_excl=0&rgstr=0
HTTP/1.1 200 OK
Date: Thu, 13 Dec 2012 00:42:51 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Content-Length: 18894
Content-Type: text/html
Expires: Thu, 13 Dec 2012 00:42:49 GMT
Set-Cookie: ssid=198455487; expires=Mon, 14-Jan-2013 20:00:00 GMT; path=/
Cache-Control: private
----------------------------------------------------------
http://www.somewebsite.com/iss/modules/doSave2XLS_sel.asp

POST /iss/modules/doSave2XLS_sel.asp HTTP/1.1
Host: www.somewebsite.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://www.somewebsite.com/dbsearch/dbsearchru/companies/
Cookie: ssid=198455487; ASPSESSIONIDQSBATRTS=GLKHPLMDGMBMNCGPIBDFDJNK; have_cookies=1; b=b; bask%5Fid=708D9FFEF85146BC9C50AA2B101F153D; storedID=5777322648552; user%5Flogin=CGUTST; sessionid=198455487; ASPSESSIONIDSQAATQSS=LDGPAKNDAEOOHEJPAPCNCKHN; ASPSESSIONIDQQDCTRSS=MACDCIODILPFNHAFEJMLJCCO; ASPSESSIONIDQSACSRSS=FEOLDGPDIJJOCHKAKLEIICGD; ASPSESSIONIDQSDCTRST=CFFLHEBALAGBCMHBPIGDHLBN; ASPSESSIONIDQQBCTQTS=NDOBIIBAGFFEBKCHDELOCIEP; ASPSESSIONIDQSBDSRTT=GGJFKMBAHHJAHLDLPAPCCFOP; ASPSESSIONIDSSAASRST=ADFFOACAPFMPIGKMFOCEPGAL; ASPSESSIONIDSSCBSRTS=EPPPPECAKIIAIIFGADGNFHOB; ASPSESSIONIDQSCDQQTS=IDAKMKHANNHLMGEMKCPNKAKA; 1stopen=1; ASPSESSIONIDQQABSRTS=LPLDOIIAKPNOJMJILGFCLPAG
Content-Type: application/x-www-form-urlencoded
Content-Length: 1251
uid=1886&iss=%27on%27%2C%27AABAAD075E0470BEC325674A0039F724%27%2C%273DC84DD11D61CC51C32567400032199E%27%2C%27FB9900A46791499BA0535468BC3CFA39%27%2C%27E21096B5CCABA8424325685700350F60%27%2C%2795345C101FAE47979E25CBF409044F11%27%2C%2791001D2C33036B8C43256735005A6F38%27%2C%27A407F1FA59BB4243A2321D1D561D05FC%27%2C%27038D4548E9E3448DA85C397BB8E7813C%27%2C%2743256B410056E49F43256B6600535ADB%27%2C%277A3678AD5AE14B0A945D0EB6B7919F6E%27%2C%273E7F2B1C9DF045C2B490D064C27012E0%27%2C%2709D6465D27A13F4443256918005508F6%27%2C%27432569290063957443256A3C002D1886%27%2C%2706303D64278B47F143256735005AB499%27%2C%2799F954C23CAB4D5884AC647F1D03A991%27%2C%273A4856543CEF4C7BA37F4CFBA837EA23%27%2C%27612B5284D9604368B86A3CFF7BF84916%27%2C%2714C8FC8A807C4F46AB8DE94C29F5DA20%27%2C%27B44C85F39BA64922BAC5E665DD9D968C%27%2C%27A4519C3DC0CB4F8E83EA3CBCB19DC60C%27%2C%2741DDBC39B3584C5CB81ABF9B3EFA91E5%27%2C%27D3068AD3F90441E7B8ABCCE5ADD12D07%27%2C%277E75E0F682AD84B4C3256763002EA999%27%2C%27A1DAA1A271404F049AB543DC7FD14CC5%27%2C%27A43E335F235F4F5CA087B2B1B42304BC%27%2C%275E7E15B019C84AA188BFB03B5C416639%27%2C%27F695456883C04C91B47D204576FA6033%27%2C%27E765622FA33F4B13AAC56348E62C69C5%27%2C%2741113AD02A6A43F9A6A6F20D0CDEA7F1%27%2C%270F36F00CC10F4E60B9226BCE04EA462B%27
HTTP/1.1 200 OK
Date: Thu, 13 Dec 2012 00:42:58 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Content-Disposition: attachment; filename=1886442458.xls;
Content-Length: 33491
Content-Type: application/vnd.ms-excel
Expires: Thu, 13 Dec 2012 00:42:58 GMT
Set-Cookie: ssid=198455487; expires=Mon, 14-Jan-2013 20:00:00 GMT; path=/
Cache-Control: private
----------------------------------------------------------
http://www.somewebsite.com/tramp/tramp_session.asp

GET /tramp/tramp_session.asp HTTP/1.1
Host: www.somewebsite.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: application/json, text/javascript, */*; q=0.01
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
X-Requested-With: XMLHttpRequest
Referer: http://www.somewebsite.com/dbsearch/dbsearchru/companies/
Cookie: ssid=198455487; ASPSESSIONIDQSBATRTS=GLKHPLMDGMBMNCGPIBDFDJNK; have_cookies=1; b=b; bask%5Fid=708D9FFEF85146BC9C50AA2B101F153D; storedID=5777322648552; user%5Flogin=CGUTST; sessionid=198455487; ASPSESSIONIDSQAATQSS=LDGPAKNDAEOOHEJPAPCNCKHN; ASPSESSIONIDQQDCTRSS=MACDCIODILPFNHAFEJMLJCCO; ASPSESSIONIDQSACSRSS=FEOLDGPDIJJOCHKAKLEIICGD; ASPSESSIONIDQSDCTRST=CFFLHEBALAGBCMHBPIGDHLBN; ASPSESSIONIDQQBCTQTS=NDOBIIBAGFFEBKCHDELOCIEP; ASPSESSIONIDQSBDSRTT=GGJFKMBAHHJAHLDLPAPCCFOP; ASPSESSIONIDSSAASRST=ADFFOACAPFMPIGKMFOCEPGAL; ASPSESSIONIDSSCBSRTS=EPPPPECAKIIAIIFGADGNFHOB; ASPSESSIONIDQSCDQQTS=IDAKMKHANNHLMGEMKCPNKAKA; 1stopen=1; ASPSESSIONIDQQABSRTS=LPLDOIIAKPNOJMJILGFCLPAG

HTTP/1.1 200 OK
Date: Thu, 13 Dec 2012 00:43:13 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Content-Length: 0
Content-Type: text/html
Expires: Thu, 13 Dec 2012 00:43:13 GMT
Set-Cookie: ssid=198455487; expires=Mon, 14-Jan-2013 20:00:00 GMT; path=/
Cache-Control: private 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:55:36.070

你想提交表单生成数据，然后将这些数据下载到excel文件中？

使用 jxl.jar 创建 Excel 数据。( [http://jexcelapi.sourceforge.net/](http://jexcelapi.sourceforge.net/) )

例如，一些 servlet 文件中的代码。

```
public void doPost(HttpServletRequest request,HttpServletResponse response) throws Exception{

                response.reset();
                response.setContentType("application/vnd.ms-excel");
                response.setHeader("Content-Disposition",
                                "attachment;filename=filename.xls");
                WritableWorkbook wb = Workbook.createWorkbook(response
                                .getOutputStream());
                WritableSheet sheet = wb.createSheet("sheet1", 0);
                WritableCellFormat wcfFC = new WritableCellFormat(new     jxl.write.WritableFont(WritableFont.ARIAL, 10,
                                                 WritableFont.BOLD, false,
                                                 UnderlineStyle.NO_UNDERLINE, jxl.format.Colour.RED));
//create headers
java.util.Enumeration names = request.getParameterNames();
int c=0;
while(names.hasMoreElements()){
String name = (String)names.nextElement();
String value = request.getParameterValue(name);
sheet.addCell(new Label(c, 0, name,wcfFC));
sheet.addCell(new Label(c, 1, value));
c++;
}
 wb.write();
 wb.close();
} 
```

# flash - CS6 Flash 上的 Myriad Pro 不再正确嵌入

> ID：13851561
> 
> 赞同：1
> 
> 时间：2012-12-13T01:31:27.823
> 
> 标签：flash, windows-7, fonts, adobe, embed

如果我打开一个嵌入 Myriad Pro 以进行运行时共享的 FLA，如果我发布它，字体在 IDE 和运行时会显示为空白。如果字体未嵌入，您通常会在 textFields 中看到它。这是唯一可以做到这一点的字体。我已经使用 Myriad 很长时间了，这是我第一次遇到这个问题。

我正在使用 Windows 7 / CS6。

当我尝试这样做时，字体似乎没有完全卸载。当我卸载并重新启动，然后重新安装时，我总是被问到是否要复制现有的 Myriad Pro Regular，就好像它仍然安装一样，但是在目录中找不到该字体（包括如果我查看目录使用命令提示符）。

如果我在使用 CS5 或 5.5 的计算机上打开 flash 文件，该文件将正确打开、运行和发布。

这个问题最近才开始，尽管我已经使用我的新 Windows 7 机器几个月了。

感谢您的任何帮助，您可以提供！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:34:06.443

删除最后一个 Windows 安全更新[KB2753842](http://support.microsoft.com/kb/2753842) 之后，一切都很好。

# ios - 本地化 iOS 智能应用横幅

> ID：13851562
> 
> 赞同：2
> 
> 时间：2012-12-13T01:31:42.650
> 
> 标签：ios, mobile-safari

我为客户创建了一个智能应用程序横幅，但如果用户的设备设置为法语，则无法使横幅以法语显示（仍以英语显示）。iOS 应用程序支持英语（默认）和加拿大法语。

有谁知道这样做的方法？Apple 文档 (http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html) 没有提供任何有关本地化的见解。

谢谢！

# nlp - 如何编写高效的代码来提取名词短语？

> ID：13851563
> 
> 赞同：0
> 
> 时间：2012-12-13T01:31:43.160
> 
> 标签：nlp

我正在尝试使用下面提到的规则来提取短语，这些规则已被 POS 标记

1) NNP -> NNP (-> 表示后跟) 2) NNP -> CC -> NNP 3) VP -> NP 等。

我以这种方式编写了代码，有人可以告诉我如何以更好的方式做。

```
 List<String> nounPhrases = new ArrayList<String>();
    for (List<HasWord> sentence : documentPreprocessor) {

        //System.out.println(sentence.toString());
        System.out.println(Sentence.listToString(sentence, false));
        List<TaggedWord> tSentence = tagger.tagSentence(sentence);

        String lastTag = null, lastWord = null;
        for (TaggedWord taggedWord : tSentence) {
            if (lastTag != null && taggedWord.tag().equalsIgnoreCase("NNP") && lastTag.equalsIgnoreCase("NNP")) {
                nounPhrases.add(taggedWord.word() + " " + lastWord);
                //System.out.println(taggedWord.word() + " " + lastWord);

            }
            lastTag = taggedWord.tag();
            lastWord = taggedWord.word();
        }

    } 
```

在上面的代码中，我只对 NNP 进行了 NNP 提取，我如何对其进行概括，以便我也可以添加其他规则。我知道有库可用于执行此操作，但想手动执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:02:06.450

也许你应该尝试使用 Chunker。你可以试试 OpenNLP Chunker。看起来您对 POS 使用相同的标记集。你可以在这里找到用法：

[http://opennlp.apache.org/documentation/1.5.2-incubating/manual/opennlp.html#tools.chunker](http://opennlp.apache.org/documentation/1.5.2-incubating/manual/opennlp.html#tools.chunker)

输入示例：

```
Rockwell_NNP International_NNP Corp._NNP 's_POS Tulsa_NNP unit_NN said_VBD it_PRP signed_VBD a_DT tentative_JJ agreement_NN extending_VBG its_PRP$ contract_NN with_IN Boeing_NNP Co._NNP to_TO provide_VB structural_JJ parts_NNS for_IN Boeing_NNP 's_POS 747_CD jetliners_NNS ._. 
```

输出：

```
[NP Rockwell_NNP International_NNP Corp._NNP ] [NP 's_POS Tulsa_NNP unit_NN ] [VP said_VBD ] [NP it_PRP ] [VP signed_VBD ] [NP a_DT tentative_JJ agreement_NN ] [VP extending_VBG ] [NP its_PRP$ contract_NN ] [PP with_IN ] [NP Boeing_NNP Co._NNP ] [VP to_TO provide_VB ] [NP structural_JJ parts_NNS ] [PP for_IN ] [NP Boeing_NNP ] [NP 's_POS 747_CD jetliners_NNS ] ._. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:37:14.637

大多数现有的库实现确实创建了一个有限状态机来实现此功能。它们可靠、高效且开放。然而，一个非常幼稚的实现想法可以是在 POS-Tag 数组上制定正则表达式，然后使用偏移量来标记短语。听起来合乎逻辑且简单，但可能不正确。

# extjs4.1 - 如何在分机的网格列中格式化电话号码

> ID：13851564
> 
> 赞同：0
> 
> 时间：2012-12-13T01:31:45.830
> 
> 标签：extjs4.1, phone-number

我正在尝试将网格列中的电话号码从 1234567890 格式化为 123-456-7890。我尝试过这样的事情...

```
renderer: Ext.util.Format.dateRenderer('Y-m-d') 
```

但显然这只适用于日期。有没有办法呈现电话号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:24:37.353

对于需要它的其他人，这是电话号码的解决方案

```
 renderer: function (value) {
                    return value.replace(/^(\d{3})(\d{3})(\d{4})$/, '$1-$2-$3');} 
```

# android - 安卓 NDK：64 位原子（ARM）

> ID：13851565
> 
> 赞同：0
> 
> 时间：2012-12-13T01:31:51.463
> 
> 标签：android, android-ndk, 64-bit, arm, atomic

网上有一些关于如何编写 64 位原子代码的资料，例如：

[如何保证 64 位写入是原子的？](https://stackoverflow.com/questions/78277/how-to-guarantee-64-bit-writes-are-atomic)

.. 但在我走这条路之前，如果有的话，我更愿意使用 Android NDK / ARM 特定的解决方案。

我正在移植一个需要 32 位和 64 位原子操作的 C++ 引擎。我研究并实现了 GCC 内置的 __sync_* 函数，但是当需要链接时，我遇到了 64 位操作的这些错误：

```
error: undefined reference to '__sync_fetch_and_or_8'
error: undefined reference to '__sync_lock_test_and_set_8'
error: undefined reference to '__sync_fetch_and_and_8'
error: undefined reference to '__sync_fetch_and_add_8'
error: undefined reference to '__sync_val_compare_and_swap_8' 
```

我的目标是 armeabi-v7a，我读过它有一些 64 位原子（ldrexd/strexd）的汇编指令，那么有没有办法通过 GCC 内置原子访问它们？如果没有，还有哪些其他选择？

*   使用互斥锁来保护每个 64 位操作
*   编写汇编代码以利用 ldrexd/strexd
*   将超级机密标志传递给 NDK 工具链以启用 64 位内在函数？
*   等待ARMv8？:)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:51:48.160

由于我的问题，NDK r8d 已发布，它支持内置的 64 位原子。

[http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)

> 将 ARM 的 64 位内置原子函数向后移植到 GCC 4.6。

# c - 检查 C 库：更好的 C 字符串库

> ID：13851569
> 
> 赞同：2
> 
> 时间：2012-12-13T01:32:26.690
> 
> 标签：c, string, strlen

> **可能重复：**
> [函数名称周围的括号是什么意思？](https://stackoverflow.com/questions/13600790/what-do-the-parentheses-around-function-name-mean)

作为练习和学习经验，我决定阅读由 Paul Hsieh 编写的名为更好的 C 库 ( [linky ) 的 C 库的源代码。](http://bstring.sourceforge.net/)我之所以选择这个项目，是因为源代码看起来非常干净和有条理，而且由于它处理的是字符串，所以看起来相对较短且易于理解。这也是学习如何编写可移植代码的好方法。

所以我计划在这篇文章中发布来自这个项目的 style/logic/c 特定相关问题。我的第一个问题是像这样调用 strlen 有什么意义：

```
(strlen)((char *) buff->data) 
```

代替

```
strlen((char *) buff->data) 
```

谢谢，

# powershell - 如何确定 EventLog 是否已经存在

> ID：13851577
> 
> 赞同：39
> 
> 时间：2012-12-13T01:33:17.273
> 
> 标签：powershell, event-log, eventlog-source

我正在使用以下行来创建新的事件日志

```
new-eventlog -LogName "Visual Studio Builds" -Source "Visual Studio" 
```

我想每次都运行它，因为如果我从新计算机运行构建，我仍然希望查看事件日志。

问题是每次在创建日志后运行脚本时，都会引发错误。

```
New-EventLog : The "Visual Studio" source is already registered on the "localhost" computer.
At E:\Projects\MyApp\bootstrap.ps1:14 char:13
+ new-eventlog <<<<  -LogName "Visual Studio Builds" -Source "Visual Studio"
    + CategoryInfo          : InvalidOperation: (:) [New-EventLog], InvalidOperationException
    + FullyQualifiedErrorId : Microsoft.PowerShell.Commands.NewEventLogCommand 
```

现在我知道我可以“搜索”事件日志

```
Get-EventLog -list | Where-Object {$_.logdisplayname -eq "Visual Studio Builds"} 
```

但是现在我如何确定它是否存在？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-09-23T20:22:32.263

```
# Check if Log exists
# Ref: http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.exists(v=vs.110).aspx
[System.Diagnostics.EventLog]::Exists('Application');

# Ref: http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.sourceexists(v=vs.110).aspx
# Check if Source exists
[System.Diagnostics.EventLog]::SourceExists("YourLogSource"); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-13T01:33:17.273

所以我走上了正确的道路`Get-EventLog`。

我不只是阅读它，而是将它存储在一个变量中。然后我检查了变量是否为`null`.

这已经实现了我想要做的事情。

```
$logFileExists = Get-EventLog -list | Where-Object {$_.logdisplayname -eq "Visual Studio Builds"} 
if (! $logFileExists) {
    New-EventLog -LogName "Visual Studio Builds" -Source "Visual Studio"
} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-01-06T16:51:58.933

```
if ([System.Diagnostics.EventLog]::SourceExists("Visual Studio") -eq $False) {
    New-EventLog -LogName "Visual Studio Builds" -Source "Visual Studio"
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-12-13T06:46:55.697

检查`Exists`方法：

```
[System.Diagnostics.EventLog]::Exists('Visual Studio Builds') 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-09T08:52:22.003

简单地检查是否存在：

```
$EventLogName = "LogName"
if ( !($(Get-EventLog -List).Log.Contains($EventLogName)))
{} 
```

但是要创建新的，您需要“作为管理员”权限。为了解决这个问题，我曾经调用一个子进程：

```
Start-Process -verb runAs powershell.exe  -ArgumentList "-file $PSScriptRoot\CreateLog.ps1" -wait 
```

使用简单的 CreateLog.ps1：

```
New-EventLog -LogName ScriptCheck -Source ScriptCheck
Write-EventLog –LogName ScriptCheck `
–Source ScriptCheck –EntryType Information –EventID 100 `
–Message "Start logging!" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-13T05:34:27.707

我认为以下方法可以减少过滤器的工作量`where`

```
 try
    {
        Get-EventLog -LogName "Visual Studio Builds" -ErrorAction Ignore| Out-Null
    }
    catch {
        New-EventLog -LogName "Visual Studio Builds" -Source "Visual Studio"
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-25T09:23:14.010

不太复杂：

```
 if (!(Get-Eventlog -LogName "Application" -Source "YourLog")){
      New-Eventlog -LogName "Application" -Source "YourLog"
 } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-05-08T00:38:49.013

这个对我有用。希望它可以帮助某人。

```
$EventLog = "SLAPS"
If ([System.Diagnostics.EventLog]::SourceExists("$EventLog") -eq $false) {
    New-EventLog -LogName "SLAPS_PasswordRotation" -Source "$EventLog"
    Write-EventLog -LogName "SLAPS_PasswordRotation" -Source "$EventLog" -Message "EventLog Succesfully Created" -EventId 10000 -EntryType SuccessAudit
}
Else {
    Write-EventLog -LogName "SLAPS_PasswordRotation" -Source "$EventLog" -Message "New Rotation Started Succesfully" -EventId 1 -EntryType SuccessAudit
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-12T18:33:54.827

### Get-/Test-EventLogSource

`System.Diagnostics`方法是有限的。计算机上只能有一个来源。不同的计算机可能具有相同的源，但在不同的日志中。根据我的经验，在使用这些方法并创建/删除日志和源之后，您开始遇到问题。我写了以下内容来验证我的自定义日志/源。

```
Set-StrictMode -Version Latest

function Get-EventLogSource {
    [CmdletBinding()]
    param(
        [string]$LogFile = '*',
        [string]$Source = '*'
    )

    Get-CimInstance -Class Win32_NTEventLOgFile -Verbose:$false | ForEach-Object {

        $_logName = $PSItem.FileName

        $PSItem.Sources | ForEach-Object {

            $oResult = New-Object PSCustomObject -Property @{
                Source  = $PSItem
                LogName = $_logName
            } | Select-Object  -Property Source, LogName

            Write-Output $oResult
        }
    } | Sort-Object -Property Source | Where-Object { $PSItem.Source -like $Source -and $PSItem.LogName -like $LogFile }    
}

function Test-EventLogSource {
    [CmdletBinding()]
    param(
        [string]$LogFile = '*',
        [Parameter(Mandatory)]
        [string]$Source
    )
    $_result = Get-EventLogSource -LogFile $LogFile -Source $Source
    return ($null -ne $_result)
}

Clear-Host

#Test-EventLogSource -LogFile 'System' -Source '.NET*' -Verbose
#Test-EventLogSource -LogFile 'Application' -Source '.NET*' -Verbose
#Test-EventLogSource -LogFile 'dummy' -Source '.NET*' -Verbose
#Test-EventLogSource -LogFile '*' -Source '.NET*' -Verbose
#Test-EventLogSource -Source '.NET*' -Verbose

#Test-EventLogSource -LogFile 'Application' -Source 'vs' -Verbose
#Test-EventLogSource -LogFile '*' -Source 'vss' -Verbose

#Test-EventLogSource -Source '*power*'

#Get-EventLogSource
#Get-EventLogSource -LogFile 'System' -Source '.NET*' -Verbose | Format-Table
#Get-EventLogSource -LogFile 'Application' -Source '.NET*' -Verbose | Format-Table
#Get-EventLogSource -LogFile 'dummy' -Source '.NET*' -Verbose | Format-Table
#Get-EventLogSource -LogFile '*' -Source '.NET*' -Verbose | Format-Table
#Get-EventLogSource -Source '.NET*' -Verbose | Format-Table

#Get-EventLogSource -LogFile 'Application' -Source 'vs' -Verbose | Format-Table
#Get-EventLogSource -LogFile '*' -Source 'vss' -Verbose | Format-Table

#Get-EventLogSource -Source '*power*'| Format-Table 
```

### 使用 Get-WinEvent

```
Get-WinEvent -ListProvider * -ErrorAction SilentlyContinue |
    Select-Object -Property Name -ExpandProperty LogLinks | 
    Select-Object -Property Name, LogName |
    Sort-Object -Property Name 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-14T15:45:32.277

```
$SourceExists = [System.Diagnostics.Eventlog]::SourceExists("XYZ")
if($SourceExists -eq $false){
    [System.Diagnostics.EventLog]::CreateEventSource("XYZ", "Application")
} 
```

仅仅这样做是不够的。即使您已经创建了事件源，`$SourceExists`也将始终是`false`. 我也通过运行`CreateEventSource`then对其进行了测试，但`Remove-EventLog`删除它失败了。创建事件源后，您必须向其写入内容。运行后附加这个`CreateEventSource`。

```
Write-EventLog -LogName "Application" -Source "XYZ" -EventID 0 -EntryType Information -Message "XYZ source has been created." 
```

感谢[https://stackoverflow.com/users/361842/johnlbevan](https://stackoverflow.com/users/361842/johnlbevan)指出这一点（在评论中）。

# iphone - 网址更改后检索网络视图网址？

> ID：13851580
> 
> 赞同：0
> 
> 时间：2012-12-13T01:33:19.817
> 
> 标签：iphone, xcode, uiwebview, ios6

我有一个 NSTimer 每隔一秒左右调用一次这个方法，所以我可以更新一个 URL 标签

```
-(void)update {
NSString *currentURL = theView.request.URL.absoluteString;
theURL.text = currentURL;
} 
```

我真的不喜欢使用计时器，它可以工作，但我宁愿只在网络视图 url 更改后才更改它，有什么方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:18:22.017

[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)有[委托](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)，每次 webview 启动另一个 url 时都会调用它。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSString *currentURL = [[request URL] absoluteString] ;

    return YES;
} 
```

但请记住，将委托设置为您的`webview`.

# python - 打印列表，子列表内出现三个点

> ID：13851581
> 
> 赞同：10
> 
> 时间：2012-12-13T01:33:23.577
> 
> 标签：python, list

我打印了一个列表的内容，我得到了以下输出：

```
[[...], [...], [...], [...], [...], [...]] 
```

这些奇怪的点是什么？

我使用了 python 2.7.3

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T01:39:30.853

可能你不小心构建了一个包含对自身的引用的列表（或者这里有很多引用）：

```
>>> a = ['x']
>>> a
['x']
>>> a[0] = a
>>> a
[[...]] 
```

使用三个点是为了使字符串表示不会淹没在递归中。您可以使用`id`and`is`运算符来验证这一点：

```
>>> id(a)
165875500
>>> id(a[0])
165875500
>>> a is a[0]
True 
```

# php - PHP + MYSQL 页面 - OOP 和 PDO

> ID：13851584
> 
> 赞同：1
> 
> 时间：2012-12-13T01:33:45.900
> 
> 标签：php, mysql, pdo

我对 OOP 和 PDO 还很陌生，并且无法弄清楚如何按页面显示 MYSQL 结果（例如每页 10 个）。最好的方法是什么？

```
 public function getResults() { 
    try {

        $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
        $con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

        $sql = "SELECT * FROM table ORDER BY id DESC LIMIT 10";
        $result = $con->query($sql);

        while($row = $result->fetch(PDO::FETCH_ASSOC)) {
        $msg_id = $row['id'];
        echo '<div id="results">' .$msg_id. '</div>';
        }

      $con = null;   

     }catch(PDOException $e) {

     echo $e->getMessage();

     }

 }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:04:28.747

在我看来，“物有所值”，是我遇到的最好的分页课程。您只需四行代码即可实现它。它将在顶部和底部设置页面链接，并允许用户选择每页有多少行。

[分页类链接](http://www.catchmyfame.com/category/php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T01:47:39.057

这似乎是一个好的开始。要获得下一组结果，您需要使用以下语句：

```
SELECT * FROM table ORDER BY id DESC LIMIT 10, 10 
```

这将返回结果 11 到 20。

更一般地说，您希望有一个 GET 参数，使您能够显示任何集合：

[http://mywebsite.com/mypage.php?set=1](http://mywebsite.com/mypage.php?set=1)

然后，您将根据设置的数字动态构建查询：

```
$sql = sprintf("SELECT * FROM table ORDER BY id DESC LIMIT %s, 10", $con->quote($_GET['set'] - 1)*10)); 
```

关于引用的部分非常重要，因为它可以保护您免受 SQL 注入（您可以搜索它以获取更多信息）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T01:50:01.163

尝试向函数 getResults() 添加附加参数，附加参数将是`$start`, `$count`，然后在查询中使用这些变量

```
public function getResults($start, $count) { 
    try {

        $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
        $con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
        $query = $con->prepare("SELECT * FROM table ORDER BY id DESC LIMIT :start, :count");
        $query->bindValue(':start', $start);
        $query->bindValue(':count', $count);
        $query->execute();

        while($row = $query->fetch(PDO::FETCH_ASSOC)) {
            $msg_id = $row['id'];
            echo '<div id="results">' .$msg_id. '</div>';
        }

       $con = null;   

    } catch(PDOException $e) {
         echo $e->getMessage();
    }

} 
```

# java - 如何从给定的字符串中“分隔”一个整数？

> ID：13851588
> 
> 赞同：9
> 
> 时间：2012-12-13T01:35:19.340
> 
> 标签：java, regex, loops, pattern-matching, delimiter

我正在做一个练习，我必须从键盘输入一个字符串。该字符串将是简单的算术运算，例如“2 + 4 + 6 - 8 + 3 - 7”。是的，格式必须是这样的。之间的单个空格。

这个想法是获取这个字符串并最终打印出它的答案。到目前为止，这是我的代码：

```
public class AddemUp {
  public static void main(String[] args) {
    Scanner kb = new Scanner(System.in);
    System.out.print("Enter something like 8 + 33 + 1345 + 137: ");
    String s = kb.nextLine();
    Scanner sc = new Scanner(s);
    sc.useDelimiter("\\s*\\+\\s*|\\s*\\-\\s*");
    int sum = 0;
    int theInt;
    Scanner sc1 = new Scanner(s);
    sc1.useDelimiter("\\s*\\s*");
    String plusOrMinus = sc1.next();
    int count = 0;
    if(s.startsWith("-"))
    {
        sum -= sc.nextInt();
    }
    while(sc.hasNextInt())
    {
        theInt = sc.nextInt();
        if(count == 0)
        {
            sum += theInt;
        }
        else if(plusOrMinus.equals("+"))
        {
            sum += theInt;
        }
        else
        {
            sum -= theInt;
        }
        sc1.next();
        count++;
    }
    System.out.println("Sum is: " + sum);
    }
  }
} 
```

在“sc1.delimiter”所在的第 25 行，我不知道如何让代码跳过所有整数（以及空格）并仅隔离“+”或“-”。一旦实现了这一点，我可以简单地将其实现到 while 循环中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-23T05:19:59.433

如果要消除数字，留下操作数数组，拆分除加号或减号以外*的字符：*

```
String[] ops = str.split("[^+-]+"); 
```

仅供参考，当减号是字符类中的第一个或最后一个时，它是一个字面减号（否则它是一个范围）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T01:44:06.067

尝试改用`split()`( [JavaDoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29) ) 方法。这要容易得多。

```
"8 + 33 + 1345 + 137".split("\\+|\\-") 
```

应该返回一个带有数字的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-08T13:41:29.330

您可以使用以下代码

```
 "8 + 33 + 1345 + 137".split("(\\s\\d*\\s)|(\\s\\d*)|(\\d*\\s)") 
```

这里正则表达式检查字符串中的数字以及它之前/之后/周围的空格。

此拆分返回数组**[, +, +, +]**

除非字符串以 +/- 开头，否则第一位将始终为空，您可以从 [1] 位置访问数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-06T03:47:12.970

我不会为此使用 Scanner，我会使用模式匹配。它们的相反之处在于扫描程序需要在您想要的字符之间使用分隔符，而模式匹配则标识您想要的字符。

要找到您可以拥有的运营商...

```
 Pattern p = Pattern.compile("[+-]");
    Matcher m = p.matcher("2 + 4 + 6 - 8 + 3 - 7");
    while (m.find()) {
        String token = m.group(0);
        System.out.println(token);
    } 
```

当数字和运算符一起在循环中时，逻辑可以直接处理。这就是为什么我包括这个。

```
 Pattern p = Pattern.compile("([^\\s]+)(?:\\s+|$)");
    Matcher m = p.matcher("2 + 4 + 6 - 8 + 3 - 7");
    while (m.find()) {
        String token = m.group(1);
        System.out.println(token);
    } 
```

[regex101](https://regex101.com/)是一个测试正则表达式的好站点。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-13T02:34:54.833

试试这个：

```
String str = ...
int total = 0;
int operand;
for(int  i = 0; i < str.length(); i++){
    if(Character.isWhiteSpace(str.charAt(i)))
    ; // empty
    else if(Character.isDigit(str.charAt(i))){
        StringBuilder number = new StringBuilder();
        while(Character.isDigit(str.charAt(i))){
            number.append(str.charAt(i));
            i++;
        }
        operand = Integer.parseInt(number.toString);
    }
    else if(str.charAt(i)) == '+')
        total += operand;
    else if(str.charAt(i)) == '-)
        total -= operand;
    else
        throw new IllegalArgumentException();
} 
```

当然，您应该更好地检查非法条目。我只是给你的想法。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-12-19T22:10:10.297

下面的代码可以只计算运算符'+'和'-'的序列我希望它有帮助

```
public class test1 {

public static void main(String[] args) {
    String s= "9-15";
    s=s+"/"; /* add / to execute the last operation */
    String split[]= new String[s.length()];
    for (int i=0;i<split.length;i++){   /* split the string to array */
        split[i]=s.substring(i,i+1);
    }
    String val1="",op="+"; /* val1 : container of the value before the operator to calculate it with total
                              op : the operator between val1 and val2 at the begin is + */
    int som=0;
    for (int i=0;i<split.length;i++){
        try{
            val1=val1+Integer.parseInt(split[i]); /* saving the number after the operation in a string to calculate it,
                                                 a number format exception is throwing when the case don't contain integer*/ 
        }catch(NumberFormatException e){
            if(op.equals("+"))  {
                som=som+Integer.parseInt(val1); /*calculate the total */
                val1=""; /*initialize val1 to save the second number */
                op=split[i]; /* save the operator of the next operation */
            }else{
            if(op.equals("-"))  {
                som=som-Integer.parseInt(val1);
                val1="";
                op=split[i];
            }
        }
        }
    } 
    System.out.println(som);
}
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-02-22T18:34:28.417

加油，希望对你有帮助...

您即将看到的代码可以求解所有基本方程，这意味着它可以求解方程中**仅**包含`.`、`+`、`-`、`*`和/或`/`符号的方程。此等式还可以*加*、*减*、*倍数*和/或*除*小数。这**无法**求解包含 a `x^y`、`(x)`、`[x]`等的方程。

```
public static boolean isNum(String e) {
    String[] num=new String[] {"1", "2", "3", "4", "5", "6", "7", "8", "9", "0"};
    boolean ret=false;
    for (String n : num) {
        if (e.contains(n)) {
            ret=true;
            break;
        }
    }
    return ret;
}
public static boolean ifMax(String[] e, int i) {
    boolean ret=false;
    if (i == (e.length - 1)) {
        ret=true;
    }
    return ret;
}

public static String getResult(String equation) {
    String[] e=equation.split(" ");
    String[] sign=new String[] {"+", "-", "*", "/"};
    double answer=Double.parseDouble(e[0]);
    for (int i=1; i<e.length; i++) {
        if (isNum(e[i]) != true) {
            if (e[i].equals(sign[0])) {
                double cc=0;
                if (ifMax(e, i) == false) {
                    cc=Double.parseDouble(e[i+1]);
                }
                answer=answer+(cc);
            } else if (e[i].equals(sign[1])) {
                double cc=0;
                if (ifMax(e, i) == false) {
                    cc=Double.parseDouble(e[i+1]);
                }
                answer=answer-(cc);
            } else if (e[i].equals(sign[2])) {
                if (ifMax(e, i) == false) {
                   answer=answer*(Double.parseDouble(e[i+1]));
                }
            } else if (e[i].equals(sign[3])) {
                if (ifMax(e, i) == false) {
                   answer=answer/(Double.parseDouble(e[i+1]));
                }
            }
        }
    }
    return equation+" = "+answer;
} 
```

这是一个例子：

**输入：**

```
System.out.println(getResult("1 + 2 + 3 + 4 / 2 - 3 * 6")); 
```

**输出：**

```
1 + 2 + 3 + 4 / 2 - 3 * 6 = 12 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-06-10T10:30:36.190

```
int total = 0;
    final String s = "9 - 15";
    final String[] arr = s.split(" ");
    int i = 0;
    while (i != arr.length)
    {
        switch (arr[i])
        {
            case ("+"):
                total += Integer.parseInt(arr[++i]);
                break;
            case ("-"):
                total -= Integer.parseInt(arr[++i]);
                break;
            case ("*"):
                total *= Integer.parseInt(arr[++i]);
                break;
            case ("/"):
                total /= Integer.parseInt(arr[++i]);
                break;
            default:
                total = Integer.parseInt(arr[i++]);
        }
        if (i == arr.length - 1)
        {
            break;
        }
    }
    System.out.println(total); 
```

希望这可以帮助你....thnx

# linux-kernel - 在 Ubuntu 12.04 LTS 中更新内核似乎不起作用

> ID：13851592
> 
> 赞同：0
> 
> 时间：2012-12-13T01:35:35.743
> 
> 标签：linux-kernel, virtualbox, ubuntu-12.04, kernel-module, uname

我正在尝试将 Ubuntu 12.04 LTS 的内核从 3.4.0 更新到可用的最新版本，但无论我做什么都会`uname -r`继续返回。`3.4.0`我也试过多次重启我的系统，但无济于事。

的输出`sudo update-grub`如下：

```
Generating grub.cfg ...
Found linux image: /boot/vmlinuz-3.5.0-19-generic
Found initrd image: /boot/initrd.img-3.5.0-19-generic
Found linux image: /boot/vmlinuz-3.4.0-030400-generic-pae
Found initrd image: /boot/initrd.img-3.4.0-030400-generic-pae
Found linux image: /boot/vmlinuz-3.2.0-34-generic-pae
Found initrd image: /boot/initrd.img-3.2.0-34-generic-pae
Found linux image: /boot/vmlinuz-3.2.0-34-generic
Found initrd image: /boot/initrd.img-3.2.0-34-generic
Found linux image: /boot/vmlinuz-2.6.38-8-generic
Found initrd image: /boot/initrd.img-2.6.38-8-generic
Found memtest86+ image: /boot/memtest86+.bin
Found unknown Linux distribution on /dev/sda3
Found unknown Linux distribution on /dev/sda5
Found Ubuntu 12.04.1 LTS (12.04) on /dev/sda7
done 
```

如果有人知道如何更新/升级到最新内核，那就太好了。[当我说更新时，我不完全确定这意味着什么，但我正在尝试安装标头、图像，尤其是构建模块（因为我相信 VirtualBox 不会在我的系统上运行，因为某种模块问题）]。

作为提醒，我已经做了很多谷歌搜索来试图找到答案，所以我解决这个问题的尝试有很大的不同，但是我对内核的整个想法（和更新它们）以及它们的组成部分的工作知识，相当有限。

如有必要，我非常乐意在终端中运行任何命令，如果您确实遇到了答案，请记住我是内核的“新手”，所以详细的解释和步骤，或链接（s ) 非常感谢。

最后一点，我正在运行由 Jay Lee 的脚本安装的 32 位 ChrUbuntu（仅供参考，/dev/sda3 和 /dev/sda5 上的未知 Linux 发行版是 ChromeOS [我的 chromebook 的默认操作系统]），它可能或可能与这个问题没有任何关系，但我不是专家，所以任何见解都会很酷，但绝不是必要的。

**编辑**：/boot/grub/grub.conf 的内容如下：

```
#
# DO NOT EDIT THIS FILE
#
# It is automatically generated by grub-mkconfig using templates
# from /etc/grub.d and settings from /etc/default/grub
#

### BEGIN /etc/grub.d/00_header ###
if [ -s $prefix/grubenv ]; then
  set have_grubenv=true
  load_env
fi
set default="0"
if [ "${prev_saved_entry}" ]; then
  set saved_entry="${prev_saved_entry}"
  save_env saved_entry
  set prev_saved_entry=
  save_env prev_saved_entry
  set boot_once=true
fi

function savedefault {
  if [ -z "${boot_once}" ]; then
    saved_entry="${chosen}"
    save_env saved_entry
  fi
}

function recordfail {
  set recordfail=1
  if [ -n "${have_grubenv}" ]; then if [ -z "${boot_once}" ]; then save_env recordfail; fi; fi
}

function load_video {
  insmod vbe
  insmod vga
  insmod video_bochs
  insmod video_cirrus
}

insmod part_gpt
insmod ext2
set root='(hd0,gpt7)'
search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
if loadfont /usr/share/grub/unicode.pf2 ; then
  set gfxmode=auto
  load_video
  insmod gfxterm
  insmod part_gpt
  insmod ext2
  set root='(hd0,gpt7)'
  search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
  set locale_dir=($root)/boot/grub/locale
  set lang=en_US
  insmod gettext
fi
terminal_output gfxterm
if [ "${recordfail}" = 1 ]; then
  set timeout=-1
else
  set timeout=10
fi
### END /etc/grub.d/00_header ###

### BEGIN /etc/grub.d/05_debian_theme ###
set menu_color_normal=white/black
set menu_color_highlight=black/light-gray
### END /etc/grub.d/05_debian_theme ###

### BEGIN /etc/grub.d/10_linux ###
function gfxmode {
    set gfxpayload="${1}"
    if [ "${1}" = "keep" ]; then
        set vt_handoff=vt.handoff=7
    else
        set vt_handoff=
    fi
}
if [ "${recordfail}" != 1 ]; then
  if [ -e ${prefix}/gfxblacklist.txt ]; then
    if hwmatch ${prefix}/gfxblacklist.txt 3; then
      if [ ${match} = 0 ]; then
        set linux_gfx_mode=keep
      else
        set linux_gfx_mode=text
      fi
    else
      set linux_gfx_mode=text
    fi
  else
    set linux_gfx_mode=keep
  fi
else
  set linux_gfx_mode=text
fi
export linux_gfx_mode
if [ "${linux_gfx_mode}" != "text" ]; then load_video; fi
menuentry 'Ubuntu, with Linux 3.5.0-19-generic' --class ubuntu --class gnu-linux --class gnu --class os {
    recordfail
    gfxmode $linux_gfx_mode
    insmod gzio
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux   /boot/vmlinuz-3.5.0-19-generic root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro   crashkernel=384M-2G:64M,2G-:128M quiet splash $vt_handoff
    initrd  /boot/initrd.img-3.5.0-19-generic
}
menuentry 'Ubuntu, with Linux 3.5.0-19-generic (recovery mode)' --class ubuntu --class gnu-linux --class gnu --class os {
    recordfail
    insmod gzio
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    echo    'Loading Linux 3.5.0-19-generic ...'
    linux   /boot/vmlinuz-3.5.0-19-generic root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro recovery nomodeset 
    echo    'Loading initial ramdisk ...'
    initrd  /boot/initrd.img-3.5.0-19-generic
}
submenu "Previous Linux versions" {
menuentry 'Ubuntu, with Linux 3.4.0-030400-generic-pae' --class ubuntu --class gnu-linux --class gnu --class os {
    recordfail
    gfxmode $linux_gfx_mode
    insmod gzio
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux   /boot/vmlinuz-3.4.0-030400-generic-pae root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro   crashkernel=384M-2G:64M,2G-:128M quiet splash $vt_handoff
    initrd  /boot/initrd.img-3.4.0-030400-generic-pae
}
menuentry 'Ubuntu, with Linux 3.4.0-030400-generic-pae (recovery mode)' --class ubuntu --class gnu-linux --class gnu --class os {
    recordfail
    insmod gzio
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    echo    'Loading Linux 3.4.0-030400-generic-pae ...'
    linux   /boot/vmlinuz-3.4.0-030400-generic-pae root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro recovery nomodeset 
    echo    'Loading initial ramdisk ...'
    initrd  /boot/initrd.img-3.4.0-030400-generic-pae
}
menuentry 'Ubuntu, with Linux 3.2.0-34-generic-pae' --class ubuntu --class gnu-linux --class gnu --class os {
    recordfail
    gfxmode $linux_gfx_mode
    insmod gzio
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux   /boot/vmlinuz-3.2.0-34-generic-pae root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro   crashkernel=384M-2G:64M,2G-:128M quiet splash $vt_handoff
    initrd  /boot/initrd.img-3.2.0-34-generic-pae
}
menuentry 'Ubuntu, with Linux 3.2.0-34-generic-pae (recovery mode)' --class ubuntu --class gnu-linux --class gnu --class os {
    recordfail
    insmod gzio
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    echo    'Loading Linux 3.2.0-34-generic-pae ...'
    linux   /boot/vmlinuz-3.2.0-34-generic-pae root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro recovery nomodeset 
    echo    'Loading initial ramdisk ...'
    initrd  /boot/initrd.img-3.2.0-34-generic-pae
}
menuentry 'Ubuntu, with Linux 3.2.0-34-generic' --class ubuntu --class gnu-linux --class gnu --class os {
    recordfail
    gfxmode $linux_gfx_mode
    insmod gzio
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux   /boot/vmlinuz-3.2.0-34-generic root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro   crashkernel=384M-2G:64M,2G-:128M quiet splash $vt_handoff
    initrd  /boot/initrd.img-3.2.0-34-generic
}
menuentry 'Ubuntu, with Linux 3.2.0-34-generic (recovery mode)' --class ubuntu --class gnu-linux --class gnu --class os {
    recordfail
    insmod gzio
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    echo    'Loading Linux 3.2.0-34-generic ...'
    linux   /boot/vmlinuz-3.2.0-34-generic root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro recovery nomodeset 
    echo    'Loading initial ramdisk ...'
    initrd  /boot/initrd.img-3.2.0-34-generic
}
menuentry 'Ubuntu, with Linux 2.6.38-8-generic' --class ubuntu --class gnu-linux --class gnu --class os {
    recordfail
    gfxmode $linux_gfx_mode
    insmod gzio
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux   /boot/vmlinuz-2.6.38-8-generic root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro   crashkernel=384M-2G:64M,2G-:128M quiet splash $vt_handoff
    initrd  /boot/initrd.img-2.6.38-8-generic
}
menuentry 'Ubuntu, with Linux 2.6.38-8-generic (recovery mode)' --class ubuntu --class gnu-linux --class gnu --class os {
    recordfail
    insmod gzio
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    echo    'Loading Linux 2.6.38-8-generic ...'
    linux   /boot/vmlinuz-2.6.38-8-generic root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro recovery nomodeset 
    echo    'Loading initial ramdisk ...'
    initrd  /boot/initrd.img-2.6.38-8-generic
}
}
### END /etc/grub.d/10_linux ###

### BEGIN /etc/grub.d/20_linux_xen ###
### END /etc/grub.d/20_linux_xen ###

### BEGIN /etc/grub.d/20_memtest86+ ###
menuentry "Memory test (memtest86+)" {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux16 /boot/memtest86+.bin
}
menuentry "Memory test (memtest86+, serial console 115200)" {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux16 /boot/memtest86+.bin console=ttyS0,115200n8
}
### END /etc/grub.d/20_memtest86+ ###

### BEGIN /etc/grub.d/30_os-prober ###
menuentry "unknown Linux distribution (on /dev/sda3)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt3)'
    search --no-floppy --fs-uuid --set=root 00000000-0000-0000-0000-000000000000
    linux /boot/vmlinuz root=/dev/sda3
}
menuentry "unknown Linux distribution (on /dev/sda3)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt3)'
    search --no-floppy --fs-uuid --set=root 00000000-0000-0000-0000-000000000000
    linux /boot/vmlinuz root=/dev/sda3
}
menuentry "unknown Linux distribution (on /dev/sda3)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt3)'
    search --no-floppy --fs-uuid --set=root 00000000-0000-0000-0000-000000000000
    linux /boot/vmlinuz-3.4.0 root=/dev/sda3
}
menuentry "unknown Linux distribution (on /dev/sda5)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt5)'
    search --no-floppy --fs-uuid --set=root 00000000-0000-0000-0000-000000000000
    linux /boot/vmlinuz root=/dev/sda5
}
menuentry "unknown Linux distribution (on /dev/sda5)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt5)'
    search --no-floppy --fs-uuid --set=root 00000000-0000-0000-0000-000000000000
    linux /boot/vmlinuz root=/dev/sda5
}
menuentry "unknown Linux distribution (on /dev/sda5)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt5)'
    search --no-floppy --fs-uuid --set=root 00000000-0000-0000-0000-000000000000
    linux /boot/vmlinuz-3.4.0 root=/dev/sda5
}
menuentry "Ubuntu, with Linux 3.5.0-19-generic (on /dev/sda7)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux /boot/vmlinuz-3.5.0-19-generic root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro crashkernel=384M-2G:64M,2G-:128M quiet splash $vt_handoff
    initrd /boot/initrd.img-3.5.0-19-generic
}
menuentry "Ubuntu, with Linux 3.5.0-19-generic (recovery mode) (on /dev/sda7)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux /boot/vmlinuz-3.5.0-19-generic root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro recovery nomodeset
    initrd /boot/initrd.img-3.5.0-19-generic
}
menuentry "Ubuntu, with Linux 3.4.0-030400-generic-pae (on /dev/sda7)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux /boot/vmlinuz-3.4.0-030400-generic-pae root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro crashkernel=384M-2G:64M,2G-:128M quiet splash $vt_handoff
    initrd /boot/initrd.img-3.4.0-030400-generic-pae
}
menuentry "Ubuntu, with Linux 3.4.0-030400-generic-pae (recovery mode) (on /dev/sda7)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux /boot/vmlinuz-3.4.0-030400-generic-pae root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro recovery nomodeset
    initrd /boot/initrd.img-3.4.0-030400-generic-pae
}
menuentry "Ubuntu, with Linux 3.2.0-34-generic-pae (on /dev/sda7)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux /boot/vmlinuz-3.2.0-34-generic-pae root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro crashkernel=384M-2G:64M,2G-:128M quiet splash $vt_handoff
    initrd /boot/initrd.img-3.2.0-34-generic-pae
}
menuentry "Ubuntu, with Linux 3.2.0-34-generic-pae (recovery mode) (on /dev/sda7)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux /boot/vmlinuz-3.2.0-34-generic-pae root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro recovery nomodeset
    initrd /boot/initrd.img-3.2.0-34-generic-pae
}
menuentry "Ubuntu, with Linux 3.2.0-34-generic (on /dev/sda7)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux /boot/vmlinuz-3.2.0-34-generic root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro crashkernel=384M-2G:64M,2G-:128M quiet splash $vt_handoff
    initrd /boot/initrd.img-3.2.0-34-generic
}
menuentry "Ubuntu, with Linux 3.2.0-34-generic (recovery mode) (on /dev/sda7)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux /boot/vmlinuz-3.2.0-34-generic root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro recovery nomodeset
    initrd /boot/initrd.img-3.2.0-34-generic
}
menuentry "Ubuntu, with Linux 2.6.38-8-generic (on /dev/sda7)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux /boot/vmlinuz-2.6.38-8-generic root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro crashkernel=384M-2G:64M,2G-:128M quiet splash $vt_handoff
    initrd /boot/initrd.img-2.6.38-8-generic
}
menuentry "Ubuntu, with Linux 2.6.38-8-generic (recovery mode) (on /dev/sda7)" --class gnu-linux --class gnu --class os {
    insmod part_gpt
    insmod ext2
    set root='(hd0,gpt7)'
    search --no-floppy --fs-uuid --set=root 48ba90b7-e174-4460-9b09-308e40541728
    linux /boot/vmlinuz-2.6.38-8-generic root=UUID=48ba90b7-e174-4460-9b09-308e40541728 ro recovery nomodeset
    initrd /boot/initrd.img-2.6.38-8-generic
}
### END /etc/grub.d/30_os-prober ###

### BEGIN /etc/grub.d/40_custom ###
# This file provides an easy way to add custom menu entries.  Simply type the
# menu entries you want to add after this comment.  Be careful not to change
# the 'exec tail' line above.
### END /etc/grub.d/40_custom ###

### BEGIN /etc/grub.d/41_custom ###
if [ -f  $prefix/custom.cfg ]; then
  source $prefix/custom.cfg;
fi
### END /etc/grub.d/41_custom ### 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:12:50.170

从`update-grub`它的输出看来，内核 3.5.0-19 已成功安装

您是否在启动时看到 grub 菜单？那里有什么选择？

可能要`sudo grub-set-default X`设置默认启动条目，检查`/boot/grub/grub.cfg`哪个条目是 3.5.0-19 并进行`X`相应设置（可能为 0）

# c++ - 使用 mpl::vector 作为函数表

> ID：13851593
> 
> 赞同：1
> 
> 时间：2012-12-13T01:35:39.073
> 
> 标签：c++, metaprogramming, boost-mpl

我正在编写一些 C++，它读取 XML 字符串并使用与 XML 文件中的属性键匹配的值填充一些结构成员。目前，第一遍生成一个键值对的 stl::unordered_map。下一步是解释值字符串并将它们作为要存储在结构中的目标类型返回。有些类型有点复杂，但我有可以转换它们的方法。

我想要做的是使用 mpl::vector 使用 get_value_* 方法将键映射到结构成员以转换值。我认为它看起来有点像：

```
typedef boost::mpl mpl;
using namespace std;

template<string K, typename T, T& dest, boost::function<void(MapTypePtr, string, T& dest)> >
struct MapperRow {};

struct Mapper : mpl::vector<
    MapperRow < "death_star_radius", Length, death_star.radius, get_value_units >,
    MapperRow < "death_star_energy", Energy, death_star.energy, get_value_units >,
    MapperRow < "operational",       bool,   death_star.operational, get_value_simple >,
    MapperRow < "num_tie_fighters",  int,    death_star.tie_fighers, get_value_simple >
> {}; 
```

Length 和 Energy 类型是 boost::units::quantities 的 typedef。

这对 boost 元编程可行吗？如果我在正确的轨道上，我该如何让它运行？我需要迭代 mpl::vector 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:25:42.573

这绝对是可能的（见下文），但我不确定它是否值得麻烦......你不能使用更简单的方法，也许是继承和多态性？

不过，这里有一个使用 Boost.MPL 的可行解决方案：

```
// MapperRow holds the necessary parsing informations: type of the member,
// type of the object, pointer to the appropriate member, parsing function
template<typename Type, typename Clazz, Type Clazz::*Member, 
         void (*Parser)(const std::string &, Type &)>
struct MapperRow
{
    typedef Type type;
    typedef Clazz clazz;
    typedef Type Clazz::*memberType;
    static const memberType member;
    typedef void (*parserType)(const std::string &, Type &);
    static const parserType parser;
};

template <typename Type, typename Clazz, Type Clazz::*Member,
          void (*Parser)(const std::string &, Type &)>
const typename MapperRow<Type, Clazz, Member, Parser>::memberType
    MapperRow<Type, Clazz, Member, Parser>::member = Member;

template <typename Type, typename Clazz, Type Clazz::*Member,
          void (*Parser)(const std::string &, Type &)>
const typename MapperRow<Type, Clazz, Member, Parser>::parserType
    MapperRow<Type, Clazz, Member, Parser>::parser = Parser;

// fill iterates over a map key->MapperRow, trying to find the given key.
// if found, it calls the parsing function, otherwise it asserts false (should
// probably throw an exception instead)
template <typename Clazz, typename First, typename Last>
struct fill_impl
{
    static void apply(Clazz &obj, const std::string &key,
                      const std::string &value)
    {
        typedef typename mpl::deref<First>::type entry;
        static const char *curKey = 
            mpl::c_str< typename 
                mpl::first<entry>::type
            >::value;

        if (key == curKey)
        {
            typedef typename mpl::second<entry>::type Row;

            Row::parser(value, obj.*Row::member);
        }
        else
        {
            fill_impl<
                Clazz, typename
                mpl::next<First>::type,
                Last
            >::apply(obj, key, value);
        }
    }
};

template <typename Clazz, typename Last>
struct fill_impl<Clazz, Last, Last>
{
    static void apply(Clazz &obj, const std::string &key,
                      const std::string &value)
    {
        assert(false && "key not found");
    }
};

template <typename Map, typename Clazz>
void fill(Clazz &obj, const std::string &key, const std::string &value)
{
    fill_impl< 
        Clazz, typename 
        mpl::begin<Map>::type, typename 
        mpl::end<Map>::type
    >::apply(obj, key, value);
} 
```

样品用途：

```
template <typename T>
void get_value_units(const std::string &str, T &value)
{
    value = T::from_value(boost::lexical_cast<typename T::value_type>(str));
}

template <typename T>
void get_value_simple(const std::string &str, T &value)
{
    value = boost::lexical_cast<T>(str);
}

typedef boost::units::quantity<boost::units::si::energy> Energy;
typedef boost::units::quantity<boost::units::si::length> Length;

struct DeathStar
{
    Length radius;
    Energy energy;
    bool operational;
    int tie_fighters;
};

// Could be clearer with MPLLIBS_STRING*
typedef mpl::map<
    mpl::pair<
        mpl::string<'deat','h_st','ar_r','adiu','s'>, 
        MapperRow< Length , DeathStar, &DeathStar::radius, 
                   &get_value_units<Length> > >,
    mpl::pair<
        mpl::string<'deat','h_st','ar_e','nerg','y'>,
        MapperRow< Energy, DeathStar, &DeathStar::energy, 
                   &get_value_units<Energy> > >,
    mpl::pair< 
        mpl::string<'oper','atio','nal'>, 
        MapperRow< bool, DeathStar, &DeathStar::operational, 
                   &get_value_simple<bool> > >,
    mpl::pair< 
        mpl::string<'num_','tie_','figh','ters'>, 
        MapperRow< int, DeathStar, &DeathStar::tie_fighters, 
                   &get_value_simple<int> > >
> death_star_map;

int main()
{
    DeathStar ds;
    fill<death_star_map>(ds, "death_star_radius", "12");
    fill<death_star_map>(ds, "death_star_energy", "34");
    fill<death_star_map>(ds, "operational", "1");
    fill<death_star_map>(ds, "num_tie_fighters", "56");

    std::cout << "Radius: " << ds.radius << '\n';
    std::cout << "Energy: " << ds.energy << '\n';
    std::cout << "Operational: " << std::boolalpha << ds.operational << '\n';
    std::cout << "Tie fighters: " << ds.tie_fighters << '\n';
} 
```

* [MPLLIBS_STRING](http://abel.web.elte.hu/mpllibs/metaparse/MPLLIBS_STRING.html)

# command-line-arguments - 隐藏 Windows 命令行参数

> ID：13851596
> 
> 赞同：1
> 
> 时间：2012-12-13T01:36:10.610
> 
> 标签：command-line-arguments

我想从另一个应用程序（“跑步者”）运行一个 Windows 应用程序（“目标”）

我不拥有目标。

有什么办法可以做到这一点，而我传递的参数不会出现在进程资源管理器中（我正在传递密码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:44:37.407

不幸的是，没有办法。如果我理解得很好，您想将 CLEARTEXT 中的密码传递给目标。不让它显示的唯一方法是让目标程序查找一些存储密码的文件，或者查找一些密钥来读取加密的密码。

我假设不拥有目标您不能要求进行该修改。您最好的运气是查看目标应用程序的手册

我希望它有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:49:54.113

看看[这个博客文章和评论线程](http://blogs.msdn.com/b/oldnewthing/archive/2009/02/23/9440784.aspx "这")。表示一个进程可以在另一个进程的命令行中获取的方法。是否可以运行程序启动进程，然后在一段时间后进入（允许启动的进程首先使用命令行参数）并更改命令行，使报告的命令行不是原来的？

# c++ - 如何在 i686-apple-darwin11-llvm-g++-4.2 中包含 Accelerate 框架？

> ID：13851597
> 
> 赞同：0
> 
> 时间：2012-12-13T01:36:10.447
> 
> 标签：c++, osx-lion, accelerate-framework

我正在尝试在一个小型 C++ 程序上使用[Accelerate 框架。](https://developer.apple.com/library/mac/#documentation/Accelerate/Reference/AccelerateFWRef/_index.html)我什至没有使用 XCode，只有一个简单的 Makefile。

当我在代码中添加以下行时，编译器会抱怨：

```
#include <Accelerate/Accelerate.h> 
```

错误如下：

```
In file included from /System/Library/Frameworks/vecLib.framework/Headers/vecLib.h:41,
                 from /System/Library/Frameworks/Accelerate.framework/Headers/Accelerate.h:20,
                 from Diana.cpp:20:
/System/Library/Frameworks/vecLib.framework/Headers/vDSP.h:9008: error: expected identifier before numeric constant
/System/Library/Frameworks/vecLib.framework/Headers/vDSP.h:9008: error: expected `}' before numeric constant
/System/Library/Frameworks/vecLib.framework/Headers/vDSP.h:9008: error: expected unqualified-id before numeric constant
/System/Library/Frameworks/vecLib.framework/Headers/vDSP.h:9028: error: expected declaration before ‘}’ token 
```

我正在使用的编译器是**i686-apple-darwin11-llvm-g++-4.2**，它是一个 gcc 4.2.1，我用来编译（而不是链接）的行是：

```
i686-apple-darwin11-llvm-g++-4.2 -D__MACOSX_CORE__ -c -o Diana.o Diana.cpp 
```

编译时我应该添加一些额外的标志吗？我尝试添加“-framework Accelerate”，但它并没有改变任何东西，因为这应该只包含在链接过程中（对吗？）。

我用谷歌搜索了其中一些错误消息，但没有找到任何东西。

我真的很感激任何帮助。谢谢！

PS：我的 OS X 版本是 Lion 10.7.5，XCode 是 4.4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:44:32.813

我想通了：我检查了 vDSP.h 第 9008 行的内容，问题是我在包含 Accelerate.h 之前声明了 FFT_FORWARD 常量。

固定的！

# sql - 查询计算不同值的数量？

> ID：13851607
> 
> 赞同：8
> 
> 时间：2012-12-13T01:37:16.063
> 
> 标签：sql, ms-access, count, distinct, ms-access-2003

我在 MS Access 2003 中有一个如下所示的表：

```
    *网址编号*
    example.com 红色
    example.com 蓝色
    example.com 蓝色
    other.com 红色
    other.com 橙色
    more.com 蓝色

```

对于每个 URL，我想知道有多少个唯一 ID。所以在这种情况下，结果应该是：

```
    *不同id的url计数*
    example.com 2（因为红色和蓝色是唯一的值）
    其他.com 2
    更多.com 1

```

这与 SQL 查询非常相似，[用于计算不同值的数量，](https://stackoverflow.com/questions/5253214/sql-query-to-count-number-of-different-values)只是在这种情况下解决方案不起作用，因为它依赖于`COUNT DISTINCT`，但 Access 不支持。我试图在 Access 中查找不同计数的替代方法，但恐怕我不明白答案。

所以我猜这个问题可以概括为“如何在msaccess中模拟count distinct”。

如果有人能给我提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T01:47:51.720

这应该在 MS Access 2003 中工作（*我刚刚测试过*）：

```
SELECT url, count(id) as CountOfId
FROM
(
   SELECT distinct id, url
   FROM yourtable
) x
GROUP BY url 
```

在这种情况下，您会在子查询中获得不同的 id 和 url，然后计算该结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:55:34.970

这是另一种不使用 distinct 关键字的方法。（虽然看起来更高版本的访问会支持它）：

```
SELECT t.url, Count(*) AS distinct_id_count
FROM
(
    SELECT url
    FROM *source_table_name_here*
    GROUP BY url, id
) AS t
GROUP BY t.url
ORDER BY COUNT(*) DESC, t.url; 
```

# jquery - Firefox 的内联块元素 mouseenter/mouseleave 问题

> ID：13851609
> 
> 赞同：1
> 
> 时间：2012-12-13T01:37:33.030
> 
> 标签：jquery, css, jquery-animate

我制作了一个非常简单的导航元素。

它在 Chrome 和 Safari 中看起来不错，但是当我在 Firefox 中查看它时，我注意到当您滚动“关于”时，导航的隐藏部分会“跳”起来。我正在使用 CSS 重置。

**的HTML：**

```
<nav>
    <ul class="menu">
        <li>
            <a>About</a>
            <ul class="sub-menu">
                <li><a>People</a></li>
                <li><a>Approach</a></li>
            </ul>
        </li>
        <li><a>Projects</a></li>
        <li><a>Contact</a></li>
    </ul>
</nav> 
```

**​CSS** ：

 **```
nav li {
    display: inline-block;
    font-size: 10px;
    height: 10px;
    margin-right: 16px;
    text-transform: uppercase;
}

.sub-menu {
    display: inline-block;
    white-space: nowrap;
}​ 
```

**JS：**

```
$('.sub-menu').hide();

$('nav > ul > li').on({
    mouseenter: function() {
        $(this).find('ul.sub-menu').stop().animate({width: 'toggle'});
    },
    mouseleave: function(){
        $(this).find('ul.sub-menu').stop().animate({width: 'toggle'});
    }
}); 
```

**小提琴：http:** [//jsfiddle.net/HYPX8/](http://jsfiddle.net/HYPX8/)

**截图：**

![在此处输入图像描述](../Images/0009599df376604c9efeff1a6938844f.png)

我试过使用 just`inline`并且发生同样的事情。

我尝试`float: left`在所有的 li 元素上使用，`.sub-menu`但后来我遇到了子`li`元素`.sub-menu`折叠的问题`mouseleave`

谁能推荐如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:40:48.883

**编辑 0**

如果您注释掉`$('.sub-menu').hide();`并切换宽度，您会发现问题在于 JQuery 如何更改 CSS，因为它在加载时正确呈现。我会进一步调查。

此外，将宽度更改为高度会产生您可能想要使用的东西。见这里：http: [//jsfiddle.net/HYPX8/5/](http://jsfiddle.net/HYPX8/5/)。

```
$(this).find('.sub-menu').stop().animate({height: 'toggle'}); 
```

* * *

**解决方案示例：http:** [//jsfiddle.net/HYPX8/2/](http://jsfiddle.net/HYPX8/2/)。

将以下内容添加到`.sub-menu`CSS 似乎可以防止发生这种下降。

```
height: 10px;
margin-right: 16px; 
```

看起来如果你真的想要你可以组合 CSS，但它会在左边添加一点填充。

```
nav li, .sub-menu {
    display: inline-block;
    font-size: 10px;
    height: 10px;
    margin-right: 16px;
    text-transform: uppercase;
} 
```

但是，要获得理想的结果，您只需要以下内容。

```
.sub-menu {
    display: inline-block;
    height: 10px;
    margin-right: 16px;
    white-space: nowrap;
} 
```**

# php - 试图在我的折线图的 x 轴上绘制时间？

> ID：13851610
> 
> 赞同：1
> 
> 时间：2012-12-13T01:37:33.170
> 
> 标签：php, json, d3.js

任何人都可以帮忙吗？我试图在我的折线图的 x 轴上绘制时间。对 JSON 和 PHP 来说是全新的，并且在这方面存在真正的问题。

目前 y 轴描绘了“阅读”：

```
 d3.json('getdata.php',function (jsondata) { 
    var data = jsondata.map(function(d) { return d.reading; }); 

    var x = d3.scale.linear().domain([0, data.length]).range([0, width]);
    var y = d3.scale.linear().domain([0, d3.max(jsondata, function(d) { 
    return parseInt(d.reading); })]).range([height,0]); 
```

“getdata.php”的输出格式如下：

```
[{"reading":"10","Time":"2012-11-01 00:00:00"},{"reading":"10.2","Time":"2012-11-01 00:02:00"}...... 
```

如果我改变，我会得到一个解析错误：

```
 var data = jsondata.map(function(d) { return d.reading; }); 
```

到

```
 var data = jsondata.map(function(d) { return d.Value; }); 
```

我知道这似乎是一个非常简单的问题，但我如何返回“阅读”和“时间”？

也非常感谢有关如何格式化/解析 DateTime 以仅描述时间的任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:48:13.960

实际上，您无需执行任何操作即可返回读数和时间，您的 JSON 对象已经采用这种形式。也许如果你以另一种形式看到它，你就会明白我的意思：

`[{"reading":"10","Time":"2012-11-01 00:00:00"},{"reading":"10.2","Time":"2012-11-01 00:02:00"}`

这是 JavaScript 将如何看待它：

```
[
  {
    reading: "10",
    Time: "2012-11-01 00:00:00"
  },
  {
    reading: "10.2",
    Time: "2012-11-01 00:02:00"
  }
]; 
```

如果将其传递给，则可以通过和`.data()`访问各个属性。`d.reading``d.Time`

对于您的电话`d3.max`，我只是`+d.reading`用来将读数转换为 int - 要么，要么确保提供 radix: `parseInt(d.reading, 10)`：

# awk - 比较连续行中不在同一列中的两个字段

> ID：13851614
> 
> 赞同：2
> 
> 时间：2012-12-13T01:37:53.287
> 
> 标签：awk, compare, field

我搜索了论坛，但没有找到我的问题的答案。我有一个看起来像这样的文件：

```
chr left_pos    right_pos
1   2596    3084
1   3084    5869
1   18500   21000
3   21000   21536
3   22872   23179 
```

我已经对第一列和第二列的文件进行了排序：如果第一列中的字段相同，我想将字段 3 中的数字与下一行中字段 2 中的数字进行比较。如果是，则在行尾添加标签 equal 。如果不加不等于。

输出应如下所示

```
chr left_pos    right_pos   
1   2596    3084    not_equal
1   3084    5869    equal
1   18500   21000   not_equal
3   21000   21536   not_equal
3   22872   23179   not_equal 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:52:39.547

这应该适合你：

```
awk 'NR==1 { print; next } { print $0, ($1 == a && $2 == b) ? "equal" : "not_equal"; a = $1; b = $3 }' file | column -t 
```

结果：

```
chr  left_pos  right_pos
1    2596      3084       not_equal
1    3084      5869       equal
1    18500     21000      not_equal
3    21000     21536      not_equal
3    22872     23179      not_equal 
```

# objective-c - 自定义 UITableView 单元格中的标签未在 iOS6 中分配内存

> ID：13851615
> 
> 赞同：0
> 
> 时间：2012-12-13T01:38:13.770
> 
> 标签：objective-c, uitableview, ios6, uilabel

我做了一个自定义`UITableViewCell`，其中包含 label 和 a`segmentcontrol`但是当我尝试访问元素中的元素时，`cellforrowatindexpath`这些元素没有分配任何内存。单元实例已分配内存。我检查了xib并连接了插座。这是`cellforrowatindexpath`-中的代码

```
SegmentCell *cell;
[tableView registerNib:[UINib nibWithNibName:@"SegmentCell" bundle:nil] forCellReuseIdentifier:@"SegmentCell"];
[tableView registerClass:[SegmentCell class] forCellReuseIdentifier:@"SegmentCell"];
cell = (SegmentCell *)[tableView dequeueReusableCellWithIdentifier:@"SegmentCell" forIndexPath:indexPath];
cell.title.text=@"Hell*emphasized text*o";
return cell; 
```

标题是在打印描述中显示 nil 的标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:55:49.877

由于`title`它是您的自定义类*SegmentCell*的一个属性，因此您有责任分配一个 UILabel 实例并将其分配给标题。如果它包含在您的 Nib 文件中，请确保它已绑定到类属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T01:46:54.453

UITableViewCell`title`是 NSString 类型的弃用属性，而不是 UILabel。改为使用该`titleLabel`属性。

`cell.titleLabel.text = @"whatever";`

# safari - Safari 未能检测到开发者证书

> ID：13851616
> 
> 赞同：1
> 
> 时间：2012-12-13T01:38:52.570
> 
> 标签：safari, certificate

我想在我的 Windows 7 电脑上创建一个 safari 扩展。我已经正确创建了一个 Safari 开发者证书，但我无法真正安装它。经过一番谷歌搜索后，我尝试将其导入个人和受信任的根证书颁发机构。但是 Extension Builder 一直显示“没有 Safari 开发者证书”。我什至撤销了证书并创建了一个新证书。仍然没有运气。有谁能够帮我？

# php - 更新 MySQL 数据库中的会话 ID - PHP

> ID：13851620
> 
> 赞同：0
> 
> 时间：2012-12-13T01:39:50.340
> 
> 标签：php

以下函数应该接受`PHP` `session_id`并更新它，否则用户将在 5 分钟内注销：

```
function update_session_id( $session_id = "" )
{
    $stmt = "UPDATE session SET start=NOW() WHERE id='$session_id';";
    $query = mysql_query( $stmt )
        or die( mysql_error() );

    if( $query )
    {
        return true;
    }
    return false;
} 
```

出于某种原因，即使我正在使用，它也会`PHP`返回我，这似乎根本没有删除那些斜线。这就是我的查询不起作用的原因......调用该函数的代码非常简单：`"\"p9bb7t9gmchtvr6scr8hseufm6\""``stripslashes()`

```
else if( strcmp( $action, "query" ) == 0 )
    {
        $session_id = stripslashes( $_POST['session_id'] );
        $data = getCustomer();
        update_session_id( $session_id );
        echo json_encode( $session_id );
    } 
```

但我不知道为什么我的字符串上有那些额外的斜线。有什么想法吗？ **更新**一个查询示例：

```
"UPDATE session SET start=NOW() WHERE id='\"p9bb7t9gmchtvr6scr8hseufm6\"';" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:03:35.477

生成语句的正确代码是：

```
$stmt = sprintf("UPDATE session SET start=NOW() WHERE id='%s'", 
    mysql_real_escape_string($session_id)
); 
```

如果您在结果查询中看到双引号，则表示双引号**已经存在**。

也可以看看：[`PDO`](http://www.php.net/pdo)

# java - 从 open jdk 切换到 Sun jdk

> ID：13851621
> 
> 赞同：6
> 
> 时间：2012-12-13T01:40:02.230
> 
> 标签：java, openjdk

我在 /usr/lib/jvm 中有 jdk1.7.0 目录以及其他 open-jdk 版本。我希望我的 Ubuntu 12.04 将此 jdk(jdk1.7.0) 视为其主要 jdk，即我不想使用 open-jdks。

当我键入 java -version 或 javac -version 时，它返回的时间都表明它正在使用 openjdk 及其 jre。怎么改成jdk1.7.0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T01:49:44.983

将类似于以下内容的内容放入您的`~/.bashrc`

```
export JAVA_HOME="/usr/lib/jvm/jdk1.7.0"
export PATH="$JAVA_HOME/bin:$PATH" 
```

要加载更改，您只需键入“bash”即可运行新的 bash：]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T01:42:25.443

更改 PATH 变量，使其`/usr/lib/jvm`列在包含 Open JDK 的目录之前。如果您使用的是 bash，则可以`.bashrc`在主目录中的文件中执行此操作。

# google-apps-script - 正确使用 formSubmitReply

> ID：13851622
> 
> 赞同：0
> 
> 时间：2012-12-13T01:40:20.203
> 
> 标签：google-apps-script

我对使用触发器 formSubmitReply 的函数有疑问。我创建了这个脚本，以便能够接收已填写表格的通知，但是当我收到包含信息的电子邮件时，我收到了来自我的帐户的电子邮件。脚本是否可以代表填写表格的人发​​送电子邮件？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:49:21.767

根据[文档](https://developers.google.com/apps-script/execution_container_triggers)，**特定于容器的可安装触发器以创建触发器的用户身份执行。**

onFormSubmit 触发器就是其中之一，因此这是正常行为。

如果您使用的是 googleApps 帐户，您可以获得填写表单的用户的身份，表单本身会显示一条警告，但邮件本身仍会使用您的帐户发送

另一种选择是使用 UiApp 创建您的表单并将 webapp 作为“访问应用程序的用户”运行，然后电子邮件将由用户的帐户发送，此 webapp 将在执行前请求授权。

# objective-c - 使用 ARC 将委托传递给另一个对象

> ID：13851624
> 
> 赞同：0
> 
> 时间：2012-12-13T01:40:31.653
> 
> 标签：objective-c, ios, cocoa-touch, delegates

我有 2 节课，`MPRequest`并且`MPModel`. 该类`MPModel`具有从核心数据存储中查找某些内容的方法，如果未找到，则创建一个`MPRequest`通过标准 HTTP 请求检索它的方法（该方法`MPModel`是静态的，而不是实例方法）。

我想要的是能够获得当前 HTTP 请求的进度。我知道如何做到这一点，但我对如何通知视图控制器有点卡住了。我尝试创建一个协议，在`MPRequest`类中定义一个委托属性，更改方法`MPModel`以接受此委托，然后将其传递给`MPRequest`它的创建时。

这很好，但是 ARC 会在请求运行时释放这个委托，因此不会做我想要的。我试图避免让我的委托对象成为强引用，以防它抛出任何引用循环，但我不知道有任何其他方法可以做到这一点。

要启动请求，从我正在运行的视图控制器

```
[MPModel findAllWithBlock:^(NSFetchedResultsController *controller, NSError *error) {
    ....
} sortedBy:@"name" ascending:YES delegate:self] 
```

在 findAllWithBlock 方法中，我有

```
MPRequest *objRequest = [MPRequest requestWithURL:url];
  objRequest.delegate = delegate;

[objRequest setRequestMethod:@"GET"];
[MPUser signRequest:objRequest];

[objRequest submit:^(MPResponse *resp, NSError *err) {
    ...
} 
```

在`MPRequest`课堂上，我定义了以下属性：

```
@property (nonatomic, weak) NSObject<MPRequestDelegate> *delegate; 
```

有什么想法或建议吗？

根据要求，这里有更多关于如何调用事物的代码：

在视图控制器中：

```
[MPPlace findAllWithBlock:^(NSFetchedResultsController *controller, NSError *error) {
        _placesController = controller;
        [_listView reloadData];
        [self addAnnotationsToMap];
        [_loadingView stopAnimating];

        if (_placesController.fetchedObjects.count > 0) {
            // We've got our places, but if they're local copies
            // only, new ones may have been added so just update
            // our copy
            MPSyncEngine *engine = [[MPSyncEngine alloc] initWithClass:[MPPlace class]];
                 engine.delegate = self;
            [engine isReadyToSync:YES];
            [[MPSyncManager sharedSyncManager] registerSyncEngine:engine];
            [[MPSyncManager sharedSyncManager] sync];
        }
    } sortedBy:@"name" ascending:YES delegate:self]; 
```

在这里，由于明显的原因， self 永远不会被释放，所以我不明白这是怎么回事。

上面，`MPPlace`是 的子类`MPModel`，但实现`findAllWithBlock:sortedBy:ascending:delegate:`完全在`MPModel`

里面的方法`MPModel`是这样的

```
NSManagedObjectContext *context = [[MPCoreDataManager sharedInstance] managedObjectContext];
[context performBlockAndWait:^{
    __block NSError *error;
    NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:NSStringFromClass([self class])];
    [request setSortDescriptors:@[[[NSSortDescriptor alloc] initWithKey:key ascending:asc]]];

    NSFetchedResultsController *controller = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                                 managedObjectContext:context
                                                                                   sectionNameKeyPath:nil
                                                                                            cacheName:nil];

    [controller performFetch:&error];

    if (!controller.fetchedObjects || controller.fetchedObjects.count == 0) {
        // Nothing found or an error, query the server instead
                NSString *url = [NSString stringWithFormat:@"%@%@", kMP_BASE_API_URL, [self baseURL]];
        MPRequest *objRequest = [MPRequest requestWithURL:url];
          objRequest.delegate = delegate;

        [objRequest setRequestMethod:@"GET"];
        [MPUser signRequest:objRequest];

        [objRequest submit:^(MPResponse *resp, NSError *err) {
            if (err) {
                block(nil, err);
            } else {
                NSArray *objects = [self createListWithResponse:resp];
                         objects = [MPModel saveAllLocally:objects forEntityName:NSStringFromClass([self class])];
                [controller performFetch:&error];
                block(controller, nil);
            }
        }];
    } else {
        // Great, we found something :)
        block (controller, nil);
    }
}]; 
```

委托只是被传递给`MPRequest`正在创建的对象。我最初担心的是正在创建的 MPRequest 对象是由 ARC 释放的（我猜可能是这样），但是当我更改它时它并没有解决任何问题。我无法将其设为 iVar，因为该方法是静态的。

请求的提交方法如下所示：

```
_completionBlock = block;
   _responseData = [[NSMutableData alloc] init];

[self prepareRequest];

[self prepareRequestHeaders];
_connection = [[NSURLConnection alloc] initWithRequest:_urlRequest
                                              delegate:self]; 
```

当应用程序开始下载数据时，它会调用：

```
[_responseData appendData:data];
[_delegate requestDidReceive:(float)data.length ofTotal:_contentLength]; 
```

其中 _contentLength 只是`long`存储响应的预期大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:36:25.140

得到它的工作。这部分是线程问题，核心数据线程在我的请求之前结束，我完全查看来自不同请求的输出，以及 ARC 以块为单位处理内存的方式。

谢谢你们的帮助

# javascript - Knockoutjs 复杂绑定组合选择表

> ID：13851628
> 
> 赞同：1
> 
> 时间：2012-12-13T01:40:42.993
> 
> 标签：javascript, json, knockout.js, knockout-2.0

我有一个用于添加新预算详细信息的表格，如下图所示：

![在此处输入图像描述](../Images/3d0cc06702961ddf8816fa14ca2ef82a.png)

当我选择一个收入帐户时，视图模型集合中会添加另一行：

![在此处输入图像描述](../Images/061b2afff120f3af6d8ef6bb36975a3d.png)

**我想在**添加新行时将所有字段值设置为“0.00”，**而且我遇到了一个问题**，因为如果我删除一行，那么组合的“更改”事件不存在，因此无法添加新行更改最后一个组合时。

有什么线索吗？这是小提琴工作示例：http: [//jsfiddle.net/rLUyS/9/](http://jsfiddle.net/rLUyS/9/)

这是我用来将更改操作绑定到最后添加的组合的代码：

```
$('select[name=cboincomeaccount_' + newRowIndex + ']').bind("change", {
    combo: $(this)
}, handler);

function handler(event) {

    newRowIndex++;
    var combo = jQuery(this);
    var row = combo.parent().parent();

    appViewModel.addRow();

    // Unbind
    combo.unbind('change');
    // Bind new combo
    jQuery('select[name=cboincomeaccount_' + newRowIndex + ']').bind("change", {
        combo: jQuery(this)
    }, handler)

    jQuery(row).find('input[name^="txtincmonth"]').removeAttr('disabled');    
}; 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:38:43.437

这可能不是敲除问题，而是用户界面问题。

> 添加新行时，我想将所有字段值设置为“0.00”

好吧，这很容易。只需将可观察行初始化为全零。

> 当我选择一个收入帐户时，另一行被添加到视图模型集合中......而且我也遇到了一个问题，因为如果我删除一行，那么组合的“更改”事件不存在，因此无法添加新的更改最后一个组合时的行。

这可能是一个可以协商的要求。

为什么不创建一个“添加”按钮，而不是坚持这种“漂亮”的行为，即当用户在下拉列表中创建一个部分时添加一行？

此外，即使我们可以完成您的要求（我可以设想一种我们可以做到的方式），当需要将用户的输入保存到服务器时，您会怎么做？您是否打算忽略最后一个空行？

# java - ArrayList 和单链表一样吗？

> ID：13851629
> 
> 赞同：6
> 
> 时间：2012-12-13T01:40:47.117
> 
> 标签：java, arraylist, singly-linked-list

在 Java 中，我被要求将整数值存储在单链表中，然后打印存储在列表中的元素。这是我想出的：

```
int max = 10;
List<Integer> list = new ArrayList<Integer>();

for (int num = 0; i < max; i++){
     list.add(num);
}
System.out.print(list); 
```

我想知道，ArrayList 和单链表是一样的吗？我想确保我正确地回答了这个问题。这有意义吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T01:47:45.813

不 -`ArrayList`根本不是链表 - 它是一个数组列表。`ArrayList`将其元素存储在数组中，而链表通过将对象链接在一起将它们存储在任意内存中。

`LinkedList`是一个双向链表，我敢肯定，有各种单链表实现可供您使用，但鉴于这是一个作业，如果您尝试使用某人提交代码，您将被标记或彻底失败else 的实现。

相反，找到一篇描述链表的[文章等，并尝试自己实现一个。](http://en.wikipedia.org/wiki/Linked_list)

通常，这些是通过具有包含类型和值`SomeClass`的前向链接的类在 java 中构建的。您可以通过前向链接将每个实例链接到下一个实例来`SomeClass`构建列表。`SomeClass`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T01:43:57.157

No`ArrayList`绝对和单链表*不一样。*事实上，它根本不是一个*链表*：它是一个使用数组作为后备存储的列表。这使您可以`ArrayList`按任意顺序访问，而不是必须按顺序访问的链表。

Java 库有一个双向链表，但没有单链表；你需要自己写。

互联网上有几个很好的实现；在 codereview 网站上查看[这个答案，](https://codereview.stackexchange.com/a/7193/16837)以获得有关如何实现您自己的单链表的一些想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T01:43:22.310

不，[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)是[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)使用支持[数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)存储数据的接口的实现。听起来任务希望您编写自己的[单链接](http://en.wikipedia.org/wiki/Linked_list#Singly_linked_list) `List`实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T01:45:22.327

不， an`ArrayList`由数组支持。数组利用连续存储（即数组的开头 + 数组中存储的任何大小的偏移量 == 下一个元素）。Java 有一个`LinkedList`类，然而，这是一个双向链表，这意味着它包含两个引用：一个指向前一个元素，一个指向下一个元素。

Java 没有单链表作为内置数据结构。问题是要求您编写自己的单链表实现，或者当它说使用单链表时是不正确的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-12T22:39:57.767

名称`"Array"`List 表明底层实现使用“数组”进行管理。每当我们谈论`"Linked"`列表时，我们实际上是在考虑“节点”列表，即每个元素都有一个指向前向节点的指针（如果是双向链表，则为前一个节点）。至少这就是[这本 DSA 书](http://www.mta.ca/~rrosebru/oldcourse/263114/Dsa.pdf)（Granville Barnett 和 Luca Del Tongo 所著）所说的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T01:49:34.830

在商业生活中，您的解决方案是完美的，但不幸的是，似乎要求您使用在标准 Java 中不存在的单链接列表。（并且没有多大意义）对于培训目的，您必须编写自己的列表。

# django - Django/Celery 快速入门示例不起作用（工作人员没有执行任何任务）

> ID：13851633
> 
> 赞同：1
> 
> 时间：2012-12-13T01:41:23.323
> 
> 标签：django, celery, django-celery, kombu

我正在使用[Django/Celery Quickstart ... 或者，我是如何学会停止使用 cron 并喜欢 celery](http://chase-seibert.github.com/blog/2010/07/09/djangocelery-quickstart-or-how-i-learned-to-stop-using-cron-and-love-celery.html)的，而且似乎这些作业正在排队，但从未运行。

任务.py：

```
from celery.task.schedules import crontab
from celery.decorators import periodic_task

# this will run every minute, see http://celeryproject.org/docs/reference/celery.task.schedules.html#celery.task.schedules.crontab
@periodic_task(run_every=crontab(hour="*", minute="*", day_of_week="*"))
def test():
    print "firing test task" 
```

所以我运行芹菜：

```
bash-3.2$ sudo manage.py celeryd -v 2 -B -s celery -E -l INFO  

/scratch/software/python/lib/celery/apps/worker.py:166: RuntimeWarning: Running celeryd with superuser privileges is discouraged!
  'Running celeryd with superuser privileges is discouraged!'))

 -------------- celery@myserver v3.0.12 (Chiastic Slide)
---- **** ----- 
--- * ***  * -- [Configuration]
-- * - **** --- . broker:      django://localhost//
- ** ---------- . app:         default:0x12120290 (djcelery.loaders.DjangoLoader)
- ** ---------- . concurrency: 2 (processes)
- ** ---------- . events:      ON
- ** ---------- 
- *** --- * --- [Queues]
-- ******* ---- . celery:      exchange:celery(direct) binding:celery
--- ***** ----- 

[Tasks]
  . GotPatch.tasks.test

[2012-12-12 11:58:37,118: INFO/Beat] Celerybeat: Starting...
[2012-12-12 11:58:37,163: INFO/Beat] Scheduler: Sending due task GotPatch.tasks.test (GotPatch.tasks.test)
[2012-12-12 11:58:37,249: WARNING/MainProcess] /scratch/software/python/lib/djcelery/loaders.py:132: UserWarning: Using settings.DEBUG leads to a memory leak, never use this setting in production environments!
  warnings.warn("Using settings.DEBUG leads to a memory leak, never "
[2012-12-12 11:58:37,348: WARNING/MainProcess] celery@myserver ready.
[2012-12-12 11:58:37,352: INFO/MainProcess] consumer: Connected to django://localhost//.
[2012-12-12 11:58:37,700: INFO/MainProcess] child process calling self.run()
[2012-12-12 11:58:37,857: INFO/MainProcess] child process calling self.run()
[2012-12-12 11:59:00,229: INFO/Beat] Scheduler: Sending due task GotPatch.tasks.test (GotPatch.tasks.test)
[2012-12-12 12:00:00,017: INFO/Beat] Scheduler: Sending due task GotPatch.tasks.test (GotPatch.tasks.test)
[2012-12-12 12:01:00,020: INFO/Beat] Scheduler: Sending due task GotPatch.tasks.test (GotPatch.tasks.test)
[2012-12-12 12:02:00,024: INFO/Beat] Scheduler: Sending due task GotPatch.tasks.test (GotPatch.tasks.test) 
```

这些任务确实在排队：

```
python manage.py shell
>>> from kombu.transport.django.models import Message
>>> Message.objects.count()
234 
```

并且计数随着时间的推移而增加：

```
>>> Message.objects.count()
477 
```

日志文件中似乎没有任何行表明正在执行任务。我期待类似的东西：

```
[... INFO/MainProcess] Task myapp.tasks.test[39d57f82-fdd2-406a-ad5f-50b0e30a6492] succeeded in 0.00423407554626s: None 
```

有什么建议如何诊断/调试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-25T16:00:25.530

您应该检查您是否在 django 的 settyngs.py 中指定了 BROKER_URL 参数。

`BROKER_URL = 'django://'`

你应该检查你在 django、mysql 和 celery 中的时区是否相等。它帮助了我。

附言：

`[... INFO/MainProcess] Task myapp.tasks.test[39d57f82-fdd2-406a-ad5f-50b0e30a6492] succeeded in 0.00423407554626s: None`

此行表示您的任务已安排（！未执行！）

请检查您的配置，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:42:47.150

我也是 celery 的新手，但从您提供的链接上的评论来看，教程中似乎有错误。其中一条评论指出：

> 在这个命令
> 
> sudo ./manage.py celeryd -v 2 -B -s celery -E -l INFO
> 
> 您必须添加“-I tasks”才能加载 tasks.py 文件...

你试过吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-16T14:56:52.660

我希望有人可以从我的黑客经验中学习。

根据教程设置完所有内容后，我注意到当我打电话时

```
add.delay(4,5) 
```

什么都没发生。工人没有收到任务（stderr 上没有打印任何内容）。

问题出在rabbitmq安装上。事实证明，默认的可用磁盘大小要求是 1GB，这对我的 VM 来说太大了。

让我走上正轨的是阅读 rabbitmq 日志文件。为了找到它，我不得不停止并启动 rabbitmq 服务器

```
sudo rabbitmqctl stop
sudo rabbitmq-server 
```

rabbitmq 将日志文件位置转储到屏幕上。在文件中我注意到了这一点：

```
=WARNING REPORT==== 14-Mar-2017::13:57:41 ===
disk resource limit alarm set on node rabbit@supporttip.

**********************************************************
*** Publishers will be blocked until this alarm clears ***
********************************************************** 
```

然后我按照此处的说明来减少可用磁盘限制 [Rabbitmq 忽略 Ubuntu 12 上的配置](https://stackoverflow.com/questions/12588971/rabbitmq-ignores-configuration-on-ubuntu-12)

作为基线，我使用了来自 git [https://github.com/rabbitmq/rabbitmq-server/blob/stable/docs/rabbitmq.config.example的配置文件](https://github.com/rabbitmq/rabbitmq-server/blob/stable/docs/rabbitmq.config.example)

变化本身：

```
{disk_free_limit, "50MB"} 
```

# android - 将 Android 应用的主 Activity 切换为其他名称后出现“未安装应用”

> ID：13851635
> 
> 赞同：2
> 
> 时间：2012-12-13T01:41:44.947
> 
> 标签：android, android-activity, android-manifest

在我的`AndroidManifest`应用程序文件中， main一直是：`Activity``android:name`

```
android:name=".MainActivity" 
```

最近，我更改了应用程序以使用库。所有代码都已转移到库项目中，因此我可以提供免费和付费版本，两者都使用相同的代码（除了一些修改）。

现在`Activity`清单文件中的主要名称是：

```
android:name="com.name.library.MainActivity" 
```

不幸的是，用户现在报告他们无法再在手机上打开更新的应用程序。安卓 说：`App not installed!`

经过一番搜索，我[在这里找到了导致此问题的原因](http://android-developers.blogspot.de/2011/06/things-that-cannot-change.html)：您无法更改`Activity`' 的名称而不会导致其他尝试将`Intent`s 用于此应用的应用出现问题。我猜报告问题的用户已将我的应用程序放在他们的主屏幕上，并且启动器应用程序不再找到旧`Activity`名称。真的吗？

但这是否也会影响列出所有应用程序的菜单？实际上，Android 应该`Activity`在更新时更新 's name，不是吗？

以及如何解决这个问题？`Activity`我唯一的想法是使用旧名称创建一个新名称，并在`onCreate(...)`其中放置以下代码：

```
Intent i = new Intent(MainActivity.this, MainActivity.class);
i.setComponentName("com.app.library", "com.app.library.MainActivity);
startActivity(i); 
```

但这不是一个令人愉快的解决方案，显然......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T19:37:11.203

我想您也可以使用活动别名。

```
<activity-alias
        android:targetActivity="com.name.library.MainActivity"
        android:name=".MainActivity"
        android:label="@string/label"
        android:icon="@drawable/icon">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
    </intent-filter>
</activity-alias> 
```

android:name 应该与旧的活动名称匹配

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T18:36:20.033

我认为您以错误的方式进行了更改。您没有太多选择：因为当用户在他的主屏幕上放置您的应用程序的快捷方式时，该快捷方式指的是特定的 uri（you.old.package.MainActivity），我认为您唯一能做的就是你所说的，即使不是一个令人愉快的解决方案。另一种解决方案是用户删除并重新创建应用程序的快捷方式，因为当应用程序更改其内部结构时，启动的意图始终是带有意图过滤器的意图

```
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

在舱单中声明；所以重新创建快捷方式将解决问题。

您应该进行更改以使旧项目成为库项目，并创建 Lite 和 Pro 项目以使用原始项目成为库项目。这样，您的活动的uri就不需要更改

# html - 下拉菜单将全部移动 以下。如何预防？

> ID：13851636
> 
> 赞同：3
> 
> 时间：2012-12-13T01:42:10.140
> 
> 标签：html, css

检查这个网站[My Html](http://jsfiddle.net/toksis/BBJv5/2/)。当您将鼠标悬停在产品上时，菜单会向下移动。但是如何在不移动任何内容的情况下使下拉菜单出现？就像下拉菜单在顶部而不插入中间一样？对不起，但我只是这个的新手..

谢谢。

我的 HTML 代码

```
<!DOCTYPE html>
<!-- Template by freewebsitetemplates.com -->
<html>
<head>
<meta charset="utf-8" />
<title>LotMovement</title>
<link rel="stylesheet" type="text/css" href="style.css" media="all" />
</head>
<body>
    <div id="header">
            <div id="logo">
                <a href="index.html"><img src="images/logo.jpg" alt="" /></a>       
            </div>      
            <nav>
            <ul>
                <li class="selected"><a href="index.html"><span>home</span></a></li>
                <li>
                  <a href="about.html"><span>Product </span></a>

                        <ul>
                             <li>
                                <a href="#">Input</a> 
                            </li>

                            <li>
                                <a href="#">Enquiry</a> 
                            </li>

                        </ul>

                </li>
              <li><a href="services.html"><span>Movement</span></a></li>

                <li><a href="contact.html"><span>contact us</span></a></li>         
            </ul>
            </nav>
    </div>
<div id="body">
        <div class="header">
            <div>
                <ul>
                    <li><img src="images/discuss.jpg" alt="" /></li>    

                  <li><img src="images/graph.jpg" alt="" /></li>        
                </ul>       
                <div>
                    <h3>Lot Movement Tracking System</h3>

                    <form>
                     User Name
                     Pass Pasword
                    </form>

                </div>
            </div>
        </div>
</div>
    <div id="footer">
        <div>
            <div>
                <h3>AusTralAsia</h3>
                <ul>
                    <ul>
                      <li>+630212013129 -Main</li>
                  </ul>
                </ul>           
            </div>      
            <div>
                <h3>europe</h3>
                <ul>
                    <li>To Be Announced</li>
                </ul>           
            </div>  
            <div>
                <h3>canada</h3>
                <ul>

                    <li>To Be Announced</li>
                    <li></li>
                </ul>           
            </div>  
            <div>
                <h3>middle east</h3>
                <ul>

                    <li>To Be Announced</li>
                    <li></li>
                </ul>           
            </div>  
            <div>
                <h3>follow us:</h3>
                <a class="facebook" href="http://www.facebook.com/" target="_blank">facebook</a>        
                <a class="twitter" href="http://twitter.com" target="_blank">twitter</a>
            </div>  
        </div>
        <div>
            <p>&copy Copyright 2012\. All rights reserved</p>
        </div>
    </div>
</body>
</html> 
```

我的 CSS

```
/* Template by freewebsitetemplates.com */
body {
    font-family: Arial, Helvetica, sans-serif;
    margin:0;
    padding: 0; 
}

nav ul ul {
    display: none;
}

    nav ul li:hover > ul {
        display: block;
    }

#body {
    background: url(images/bg-content.gif) repeat-x top left;
    margin: 0;
    padding: 0; 
    min-width: 960px;
}
#body .header {
    background: url(images/bg-body.gif) repeat-x bottom center; 
    margin: 0 0 30px 0;
}
#body .header div {
    background: url(images/smiling-man.jpg) no-repeat bottom right;
    height: 472px;
    margin: 0 auto;
    padding: 0;
    width: 960px;   
}
#body .header div div {
    background: none;   
    margin: 0;
    padding: 0 0 0 13px;
    height: 200px;
    width: 490px;
}
#body .header div h3 {
    color: #2a4f5e; 
    font-size: 20px;
    line-height: 30px;
    margin: 18px 0 0 0;
    padding: 0;
    text-shadow: 1px 1px 1px #fff;
}
#body .header div h3 span {
    display: block; 
    font-size: 25px;
}
#body .header div h3 a {
    color: #2a4f5e;
    text-decoration: none;  
}
#body .header div h3 a:hover {
    color: #507685; 
}
#body .header div p {
    color: #507685;
    font-size: 14px;
    line-height: 24px;
    margin: 12px 0 6px 0;
    padding: 0; 
    text-shadow: 1px 1px 1px #fff;
}
#body .header div p a {
    color: #507685; 
}
#body .header div p a:hover {
    color: #2a4f5e; 
}
#body .header ul {
    overflow: hidden;
    margin: 0;
    padding: 49px 0 0;
}
#body .header ul li {
    float: left;    
    list-style: none;
    padding: 0 5px;
}
#body .body {
    border: 1px solid #e0e0e0;
    margin: 0 auto 34px auto;
    overflow: hidden;
    padding: 0 2px;
    width: 954px;
}   
#body .body div {
    float: left;    
}
#body .body .section {
    background: url(images/bg-section.gif) repeat-x top left;
    height: 193px;
    margin: 0;
    padding: 35px 0 0 40px;
    width: 186px;   
}
#body .body .section img {
    display: block;
}
#body .body .section a {
    color: #2a4f5e;
    display: block;
    font-size: 14px;
    font-weight: bold;
    height: 145px;
    text-align: center;
    text-decoration: none;
    text-transform: uppercase;
    width: 145px;
}   
#body .body .section a:hover {
    color: #507685; 
}
#body .body .section img {
    border: 0;  
}
#body .body .article {
    background: url(images/bg-article.gif) no-repeat top center;
    overflow: hidden;
    padding: 19px 16px;
    width: 470px;   
}
#body .body .article img {
    border: 0;
    float: left;
    padding: 0 10px 0 0;
}   
#body .body .article h4 {
    color: #2a4f5e;
    font-size: 15px;
    font-weight: bold;
    margin: 12px 0;
    padding: 0; 
}
#body .body .article h4 a {
    color: #2a4f5e;
    text-decoration: none;  
}
#body .body .article h4 a:hover {
    color: #507685; 
}
#body .body .article p {
    color: #2a4f5e;
    font-size: 14px;
    line-height: 22px;
    margin: 0;
    padding: 0; 
}
#body .body .article p a {
    color: #2a4f5e; 
}
#body .body .article p a:hover {
    color: #346b84; 
}
#body .footer {
    margin: 0 auto;
    overflow: hidden;
    padding: 0 0 15px 0;
    width: 960px;   
}
#body .footer div {
    float: left;    
    margin: 0;
    padding: 0;
}
#body .footer div ul {
    margin: 0;
    padding: 0; 
}
#body .footer div ul li {
    list-style: none;
    margin: 0 0 15px;
    padding: 0 0 15px;  
}
#body .footer h3 {
    color: #2a4f5e;
    font-size: 14px;
    line-height: 26px;
    margin: 0 0 12px 0;
    padding: 0; 
    text-align: justify;
    text-transform: uppercase;
}
#body .footer h3 a {
    color: #2a4f5e; 
    text-decoration: none;
}
#body .footer h3 a:hover {
    color: #507685; 
}
#body .footer .section {
    padding: 0 10px;
    width: 220px;   
}
#body .footer ul li {
    background: url(images/border-dashed.gif) repeat-x bottom left; 
}
#body .footer ul li:last-child {
    background: none;   
}
#body .footer li p {
    color: #5d5d5d;
    font-size: 14px;    
    line-height: 20px;
    margin: 0;
    padding: 0;
    text-align: justify;
}
#body .footer li p a {
    color: #5d5d5d; 
    text-decoration: underline;
}
#body .footer li p a:hover {
    color: #aeaeae; 
}
#body .footer li span {
    color: #aeaeae;
    display: block;
    font-size: 10px;    
    line-height: 16px;
    margin: 5px 0 0;
    padding:0;
}
#body .footer ul.news li p {
    background: url(images/bullets.gif) no-repeat 0 8px;
    padding: 0 0 0 15px;
}
#body .footer .featured {
    padding: 0 18px 0 24px;
    width: 438px;   
}
#body .footer .featured ul li {
    overflow: hidden;   
}
#body .footer .featured img {
    border: 1px solid #dbddde;
    float: left;
    margin: 0 20px 0 0; 
    padding: 1px;
}
#body .footer .featured p {
    margin: 0;
    padding: 0; 
}
#body .contact,
#body .about,
#body .services,
#body .blog {
    margin: 0 auto;
    padding: 25px 10px 50px 10px;   
    width: 940px;
}
#body h1 {
    color: #2a4f5e;
    font-size: 27px;
    font-weight: bold;
    height: 74px;
    line-height: 74px;
    margin: 0;
    padding: 0; 
    text-indent: 10px;
    text-transform: uppercase;  
}
#body .contact p {
    color: #7b7b7b;
    font-size: 15px;
    font-weight: bold;
    line-height: 26px;
    margin: 0;
    padding: 40px 0;    
    text-align: justify;
    width: 830px;
}
#body .contact p a {
    color: #7b7b7b; 
}
#body .contact p a:hover {
    color: #2a4f5e; 
}
#body .contact div {
    margin: 0;
    padding: 0 0 30px 0;    
}
#body .contact div h3 {
    color: #5d5d5d;
    font-size: 14px;
    font-weight: bold;
    margin: 0;
    padding: 0 0 5px 0; 
}
#body .contact div ul {
    margin: 0;
    padding: 0 0 20px 0;        
}
#body .contact div ul li {
    color: #5d5d5d;
    font-size: 14px;
    list-style: none;
    margin: 0;
    padding: 5px 0; 
}
#body .about div {
    padding: 50px 0 0 0;    
}
#body .about h2 {
    color: #2a4f5e;
    font-size: 16px;
    font-weight: bold;
    margin: 0;
    padding: 0; 
    text-transform: uppercase;
}
#body .about p {
    color: #5d5d5d;
    font-size: 14px;
    line-height: 24px;
    margin: 10px 0 0;
    padding: 0; 
    text-align: justify;
    width: 830px;
}
#body .about p a {
    color: #5d5d5d;
}
#body .about p a:hover {
    color: #2a4f5e; 
}
#body .services div {
    overflow: hidden;   
    margin: 0;
    padding: 40px 0 0;
}
#body .services h2 {
    color: #2a4f5e;
    font-size: 16px;
    font-weight: bold;
    line-height: 24px;
    margin: 0;
    padding: 0;
    text-transform: uppercase;
}
#body .services h2 a {
    color: #2a4f5e; 
}
#body .services h2 a:hover {
    color: #507685; 
}
#body .services h3 {
    color: #2a4f5e;
    font-size: 14px;
    font-weight: bold;
    line-height: 24px;
    margin: 15px 0 0;
    padding: 0 30px 0 0;
    text-transform: uppercase;  
}
#body .services h3 a {
    color: #2a4f5e; 
}
#body .services h3 a:hover {
    color: #507685; 
}
#body .services h4 {
    color: #2a4f5e;
    font-size: 16px;
    font-weight: normal;
    line-height                 <ul>
A 0;
    padding: 0;
    text-transform: uppercase;  
}
#body .services p {
    color: #5d5d5d;
    font-size: 14px;    
    line-height: 24px;
}
#body .services p a {
    color: #5d5d5d; 
}
#body .services p a:hover {
    color: #2a4f5e; 
}
#body .services div ul {
    float: left;
    margin: 0;
    padding: 20px 0 0;
    width: 312px;   
}
#body .services div ul li {
    background: url(images/bullets.gif) no-repeat center left;
    color: #5d5d5d;
    font-size: 14px;
    list-style: none;
    margin: 0;
    padding: 5px 0 5px 12px;    
    text-align: left;
}
#body .services div div {
    overflow: hidden;   
    margin: 0;
    padding: 0 0 5px 0;
}
#body .services div div img {
    float: left;    
    padding: 0 10px 0 0;
}
#body .services div div p {
    padding: 0 30px 0 0;
    text-align: justify;    
}
#body .products {
    margin: 0 auto;
    padding: 25px 0 70px 0;
    width: 960px;
}   
#body .products h2 {
    color: #2a4f5e; 
    font-size: 26px;
    margin: 0;
    text-align: center;
    text-transform: uppercase;
    padding: 90px 0 30px 0; 
}
#body .products p {
    color: #5d5d5d;
    font-size: 14px;
    line-height: 24px;
    margin: 0;
    padding: 0 10px;    
    text-align: justify;
}
#body .products p a {
    color: #5d5d5d; 
}
#body .products p a:hover {
    color: #2a4f5e; 
}
#body .products div {
    overflow: hidden;   
    margin: 0 0 45px 0;
    padding: 0;
}
#body .products div div {
    float: left;
    margin: 0;
    padding: 0 10px;
    text-align: center;
    width: 300px;   
}
#body .products div div h3 {
    color: #2a4f5e;
    font-size: 16px;
    line-height: 24px;
    margin: 0;
    padding: 0 0 10px 0;
    text-align: justify;    
    text-transform: uppercase;
}
#body .products div p {
    font-size: 16px;    
}
#body .products div div p {
    font-size: 14px;
    margin: 0;
    padding: 0;
    text-align: justify;    
}
#body .blog {
    overflow: hidden;   
}
#body .blog div {
    float: left;
    padding: 60px 0 0 0;
    width: 630px;   
}
#body .blog ul {
    float: left;
    margin: 0;
    padding: 38px 0 0 30px;
    width: 280px;   
}
#body .blog ul li {
    background: url(images/border-dashed.gif) repeat-x bottom left;
    list-style: none;
    margin: 0;
    padding: 22px 0;    
}
#body .blog ul li:last-child {
    background: none;   
}
#body .blog h2 {
    color: #2a4f5e;
    font-size: 16px;
    margin: 0;
    padding: 0;
    text-transform: capitalize; 
}
#body .blog h3 {
    color: #5d5d5d;
    font-size: 14px;
    margin: 0;
    padding: 0;
    text-align: justify;    
}
#body .blog h3 a {
    color: #5d5d5d; 
}
#body .blog h3 a:hover {
    color: #2a4f5e; 
}
#body .blog p {
    color: #5d5d5d; 
    font-size: 14px;
    line-height: 24px;
    margin: 0;
    padding: 0;
    text-align: justify;
}
#body .blog p a {
    color: #5d5d5d; 
}
#body .blog p a:hover {
    color: #2a4f5e; 
}
#body .blog div p {
    padding: 15px 0;    
}
#body .blog div p.article {
    font-weight: bold;  
}
#footer {
    background: #f5f5f5 url(images/bg-footer.gif) repeat-x top left;    
    margin: 0;
    min-width: 960px;
    padding: 0;
}
#footer div {
    margin: 0 auto;
    overflow: hidden;
    padding: 26px 0 0;  
    width: 960px;
}
#footer div div {
    float: left;
    margin: 0;
    padding: 0;
    text-align: center;
    width: 192px;   
}
#footer div div h3 {
    color: #818a8c;
    font-size: 12px;
    font-weight: bold;
    margin: 0 0 5px 0;
    padding: 0;
    text-transform: uppercase;
}
#footer div div ul,
#footer div div ul li {
    margin: 0;
    list-style: none;
    padding: 0; 
}   
#footer div div ul li {
    font-size: 12px;
    line-height: 22px;
    color: #818a8c; 
}
#footer div a.facebook,
#footer div a.twitter {
    display: block;
    float: left;
    height: 27px;
    margin: 10px 0 0;
    text-indent: -99999em;
    width: 40px;    
}
#footer div a.facebook,
#footer div a.twitter {
    background: url(images/icons.gif) no-repeat;    
}
#footer div a.facebook {
    background-position: 0 0;
    margin: 10px 0 0 58px;
    _margin: 10px 0 0 28px;
}
#footer div a.twitter {
    background-position: 0 -37px;
}
#footer div p {
    color: #c1c1c1;
    font-size: 12px;
    margin: 0;
    padding: 0 0 30px 0;
    text-align: center; 
    text-shadow: 1px 1px 1px #fff;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T01:59:41.843

尝试向元素添加`position: absolute;`属性：`ul`

```
nav ul ul {
    display: none;
}

nav ul li:hover > ul {
    position: absolute;
    display: block;
} 
```

# css - HTML CSS 相关属性

> ID：13851641
> 
> 赞同：-2
> 
> 时间：2012-12-13T01:42:39.123
> 
> 标签：css, html, css-position

我有以下情况。

```
<div id="wrapper" style="position: relative">
  <div id="header">
   <div id="logout" style="position: absolute"></div>
  </div>
</div> 
```

`logout`div 是如何定位的：它是相对于`wrapper`还是相对于`header`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:50:05.560

您的`#logout`div 相对于具有该属性的 div `position: relative`- 您的包装器

* * *

[**证明**](http://jsfiddle.net/qGa69/)它是正确的并且是`#logout`相对于`#wrapper`

# php - MySQL 语法错误（PHP）

> ID：13851642
> 
> 赞同：-1
> 
> 时间：2012-12-13T01:43:03.293
> 
> 标签：php, mysql, sql

当我尝试进行 SQL 查询时。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '\'foo@gmail.com\' LIMIT 1' 附近使用正确的语法。完成的查询：

```
SELECT * FROM `members` WHERE `email` = \'foo@gmail.com\' LIMIT 1
$sql = "SELECT * FROM `members` WHERE `email` = '$email' LIMIT 1"; 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T01:45:24.727

这个查询将完全执行得很好，

```
$sql = "SELECT * FROM `members` WHERE `email` = '$email' LIMIT 1"; 
```

但不要转义查询本身的单引号，因为字符串必须用单引号括起来，删除`\`

```
SELECT * FROM `members` WHERE `email` = 'foo@gmail.com' LIMIT 1 
```

请注意您的 PHP 代码易受攻击`SQL Injection`，请阅读以下文章以保护自己免受`SQL Injection`

*   [如何**防止**PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:45:07.347

为什么你有那些`\`围绕电子邮件的价值？这就是您的语法错误所在，从您收到的错误消息中可以很明显地看出这一点。

# python - 在scrapy中使用BaseSpider时如何提及链接提取器规则

> ID：13851655
> 
> 赞同：0
> 
> 时间：2012-12-13T01:44:31.707
> 
> 标签：python, scrapy

假设这是我的代码

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

from dmoz.items import DmozItem

class DmozSpider(BaseSpider):
   domain_name = "dmoz.org"
   start_urls = [
       "http://www.dmoz.org/Computers/Programming/Languages/Python/Books/",
       "http://www.dmoz.org/Computers/Programming/Languages/Python/Resources/"
   ]

   def parse(self, response):
       hxs = HtmlXPathSelector(response)
       sites = hxs.select('//ul[2]/li')
       items = []
       for site in sites:
           item = DmozItem()
           item['title'] = site.select('a/text()').extract()
           item['link'] = site.select('a/@href').extract()
           item['desc'] = site.select('text()').extract()
           items.append(item)
       return items

SPIDER = DmozSpider() 
```

如果我使用了 crawlSpider，那么我可以使用规则来实现链接提取器，但是我如何在基础蜘蛛中提及规则。就像上面的例子一样。因为规则仅适用于 crawlspider 而不是 base spider

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:25:28.833

也许您可以根据您的规则标准解析响应，然后将成功的响应传递给第二个回调？伪代码如下：

```
def parse(self, response):
    # check response for rule criteria
    ...
    if rule: 
        # create new request to pass to second callback
        req = Request("http://www.example.com/follow", callback=self.parse2)
        return req

def parse2(self, response):
    hxs = HtmlXPathSelector(response)
    # do stuff with the successful response 
```

# llvm - 使用 clang 将 Apache httpd 编译成 LLVM 字节码

> ID：13851661
> 
> 赞同：1
> 
> 时间：2012-12-13T01:44:42.243
> 
> 标签：llvm, clang, apache, llvm-clang

我想使用**clang将****httpd**编译成 LLVM 字节码。首先，我尝试使用**gcc**对其进行编译，为此我执行了以下操作：

 ****```
./configure --prefix=/home/varun/apache/httpd/gcc --with-included-apr
make
sudo make install 
```

并且安装成功！

现在，我尝试使用 clang 编译它，为此我执行以下操作：

```
CC="clang" CFLAGS="-O4" ./configure --prefix=/home/varun/apache/httpd/clang --with-included-apr
make   # didn't come to this step
sudo make install # didn't come to this step 

```

而且，配置本身失败。我选择了**-O4**，因为我读到 LLVM 输出字节码，如果你使用 -O4 或 -emit-llvm 作为 CFLAGS（它们都不工作）。

这是我得到的错误：

```
checking whether the C compiler works... no
configure: error: in `/home/varun/apache/httpd/httpd-2.4.3/srclib/apr':
configure: error: C compiler cannot create executables 
```

这与链接器无法链接 LLVM 字节码文件有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T06:16:18.013

[我知道这与链接步骤有关，但无法正常工作。终于编译成功了，所以我在写我自己的答案]

**方法 1（失败）**

1.  使用 Synaptic 包管理器在我的系统上安装了 clang。
2.  安装了 binutils-gold，因为这是将 LLVMgold.so 作为插件提供给链接器所必需的。但是为此安装的clang，应该有gold插件。

尝试使用以下命令配置 httpd：

```
CC="clang" CFLAGS="-O4" ./configure --prefix=/home/varun/work/httpd/build --with-included-apr 
```

这里，httpd 需要 --with-included-apr。-O4 是必需的，以便通过字节码进行编译。

此配置步骤本身***失败***，因为安装的 clang 没有适当的插件来使链接器能够链接字节码目标文件。

**方法 2（成功）**

1.  安装 binutils-gold。也获得了binutils的源码。
2.  编译LLVM，使用binutils源码编译，使LLVM拥有gold插件。

编译 LLVM，

```
../configure --with-binutils-include=/usr/src/binutils/binutils-2.22/include --enable-gold --prefix=/usr/local
make
sudo make install

ln -s /usr/local/lib/LLVMgold.so /usr/lib/bdf-plugins/LLVMgold.so 
```

现在，编译**httpd**

```
CC="clang" CFLAGS="-O4" ./configure --prefix=/home/varun/work/httpd/build --with-included-apr
make
sudo make install 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:54:51.330

LLVM 字节码是 LLVM 中使用的中间表示。它不能由任何机器执行。这就是配置脚本抱怨的原因

```
C compiler cannot create executables. 
```

不要输出 LLVM 字节码。尝试改用其他优化级别。（也不要使用`-emit-llvm`in `CFLAGS`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-26T23:27:30.607

我在这里回答了一个非常相似的问题：

[为 httpd 生成 LLVM IR](https://stackoverflow.com/questions/30401450/generate-llvm-ir-for-httpd?rq=1)

为大多数编写良好的项目构建 IR 实际上很容易。

我们工具的无耻插件：

[https://github.com/SRI-CSL/whole-program-llvm](https://github.com/SRI-CSL/whole-program-llvm)

祝你好运。****

# c - C中的sprintf和无符号整数数组

> ID：13851663
> 
> 赞同：7
> 
> 时间：2012-12-13T01:44:52.880
> 
> 标签：c, printf, variadic-functions

我有一个指向整数数组的指针和数组的长度：

```
unsigned int length = 3;
int *array;        // Assume the array has 3 initialized elements 
```

我还有一个字符串和一个缓冲区（假设它足够大）可以这样放入 sprintf ：

```
char buffer[128];
const char *pattern = "(%d, %d, %d)\n"; 
```

假设其中`pattern`只有 "%d"s 和其他字符，但可以是任何形式（即 "Test %d: %d" 或 "%d %d"），并且长度`array`始终相同作为“%d”的数量。

由于数组的长度可以是任何值，有什么方法可以在`sprintf (buffer, pattern, &array[0], &array[1], &array[2])`不显式枚举 的元素的情况下做`array`吗？类似的东西`sprintf (buffer, pattern, array)`。我可以根据需要编写尽可能多的辅助函数。我正在考虑伪造一个 va_list，但这似乎是一种不好的做法，因为它将程序限制为某个编译器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T01:58:26.257

在单个`va_list`中传递所有元素不会有帮助，因为无论如何都需要在循环中创建格式字符串。由于无论如何您都无法逃脱循环，因此您不妨在同一个循环中进行打印：

```
int data[] = {12, 345, 6789, 101112};
char buf[128], *pos = buf;
for (int i = 0 ; i != 4 ; i++) {
    if (i) {
        pos += sprintf(pos, ", ");
    }
    pos += sprintf(pos, "%d", data[i]);
}
printf("%s\n", buf); 
```

这是[ideone 上演示的链接](http://ideone.com/clone/tyvKi2)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T01:52:23.263

你可以做类似...

```
char* format_uint_array(char *b, unsigned int* data, int length, char* delim, char* fmt)
    {
        int i;
        char s[50];
        b[0] = 0;
        for( i = 0; i < length; i++ )
        {
            s[0]=0;
            sprintf( s, fmt, data[i], (i<length-1)?delim : "");
            strcat(b, s);    
        }
        return b;
    } 
```

然后像使用它

```
char buffer[128];
char formattedints[128];
sprintf("(%s)\n", format_uint_array(formattedints, array, 3, ", ", "%d%s")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T01:59:05.183

没有循环：

```
#include <stdio.h>

int array[3] = {1, 2, 3};     
char buffer[128];

char *array_to_str(char * str, int *array, unsigned int n) {
  int r;
  if (n == 0) return 0;
  if (n == 1) r = sprintf(str, "%d", array[0]);
  else        r = sprintf(str, "%d, ", array[0]);
  array_to_str(str + r, array + 1, n - 1); 
  return str;
}

int main() { 
  printf("(%s)\n", array_to_str(buffer, array, 3));
  return 0;  
} 
```

# c# - 使用 XNA 获取较大 Texture2d 的一部分

> ID：13851665
> 
> 赞同：0
> 
> 时间：2012-12-13T01:44:57.063
> 
> 标签：c#, xna, texture2d

所以我正在制作一个类似小行星的游戏，用于在 XNA 中进行练习。我有一个大纹理用于纹理图集，如 RBWhitaker 的 wiki 中所述：http: [//rbwhitaker.wikidot.com/texture-atlases-1](http://rbwhitaker.wikidot.com/texture-atlases-1)

我现在已经从 wiki 分支出来，并试图为我的船和外星人进行碰撞检测。问题是我需要将地图集中的当前精灵作为单独的 texture2d 来进行准确的碰撞检测。我已经阅读了使用 texture2d.GetData 方法的示例，但我似乎无法获得有效的实现。该方法或其他选项的任何详细实现将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T02:12:42.287

在您的图集纹理上使用`Texture.GetData<Color>()`以获取代表单个像素的颜色数组：

```
Color[] imageData = new Color[image.Width * image.Height];
image.GetData<Color>(imageData); 
```

当您需要纹理中的数据矩形时，请使用如下方法：

```
Color[] GetImageData(Color[] colorData, int width, Rectangle rectangle)
{
    Color[] color = new Color[rectangle.Width * rectangle.Height];
    for (int x = 0; x < rectangle.Width; x++)
        for (int y = 0; y < rectangle.Height; y++)
            color[x + y * rectangle.Width] = colorData[x + rectangle.X + (y + rectangle.Y) * width];
    return color;
} 
```

`rectangle`如果超出原始纹理的范围，上述方法将引发 index out of range 异常。`width`参数是纹理的宽度。

使用`sourceRectangle`特定精灵：

```
Color[] imagePiece = GetImageData(imageData, image.Width, sourceRectangle); 
```

如果你真的需要另一个纹理（虽然我想你实际上需要每个像素碰撞的颜色数据），你可以这样做：

```
Texture2D subtexture = new Texture2D(GraphicsDevice, sourceRectangle.Width, sourceRectangle.Height);
subtexture.SetData<Color>(imagePiece); 
```

* * *

旁注 - 如果您需要不断使用纹理中的颜色数据进行碰撞测试，请将其保存为颜色数组，而不是纹理。在 CPU 等待时从纹理获取数据会使用 GPU，这会降低性能。

# python - 使用 Python 3.2 从头开始 创建 Unicode XML

> ID：13851671
> 
> 赞同：6
> 
> 时间：2012-12-13T01:45:34.193
> 
> 标签：python, xml, unicode, python-3.x, xml.etree

所以基本上，我想用从python字典中的数据生成的元素生成一个XML，其中的标签是字典的键，文本是字典的值。我不需要为项目提供属性，我想要的输出看起来像这样：

```
<AllItems>

  <Item>
    <some_tag> Hello World </some_tag>
    ...
    <another_tag />
  </Item>

  <Item> ... </Item>
  ...

</AllItems> 
```

我尝试使用 xml.etree.ElementTree 包，通过创建树，将元素“AllItems”设置为根，如下所示：

```
from xml.etree import ElementTree as et

def dict_to_elem(dictionary):
    item = et.Element('Item')
    for key in dictionary:
        field = et.Element(key.replace(' ',''))
        field.text = dictionary[key]
        item.append(field)
    return item

newtree = et.ElementTree()
root = et.Element('AllItems')
newtree._setroot(root)

root.append(dict_to_elem(  {'some_tag':'Hello World', ...}  )
# Lather, rinse, repeat this append step as needed

with open(  filename  , 'w', encoding='utf-8') as file:
    tree.write(file, encoding='unicode') 
```

在最后两行中，我尝试省略 open() 语句中的编码，省略 write() 方法中的编码并将其更改为 'UTF-8'，我要么得到一个错误，即 "') 是 str 类型不可序列化

**所以我的问题**- 我想知道的是我应该如何使用上述格式从头开始创建 UTF-8 XML，是否有使用另一个包的更强大的解决方案，这将允许我正确处理 UTF-8人物？我没有与 ElementTree 结婚以获得解决方案，但我宁愿不必创建模式。提前感谢您的任何建议/解决方案！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T08:45:12.427

在我看来，这`ElementTree`是一个不错的选择。`lxml`如果你以后需要更强大的包，你可以切换到使用相同接口的第三方模块。

您的问题的答案可以在文档[http://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write中找到](http://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write)

> 输出是字符串 (str) 或二进制 (bytes)。这由 encoding 参数控制。如果 encoding 为“unicode”，则输出为字符串；否则，它是二进制的。请注意，如果它是一个打开的文件对象，这可能与文件的类型冲突；确保不要尝试将字符串写入二进制流，反之亦然。

基本上，你做对了。你`open()`在文本模式下的文件，这样文件接受字符串，你需要`'unicode'`使用`tree.write()`. 否则，您可以以二进制模式打开文件（ 中没有编码参数）`open()`并使用`'utf-8'`.`tree.write()`

一些独立工作的清理代码：

```
#!python3
from xml.etree import ElementTree as et

def dict_to_elem(dictionary):
    item = et.Element('Item')
    for key in dictionary:
        field = et.Element(key.replace(' ',''))
        field.text = dictionary[key]
        item.append(field)
    return item

root = et.Element('AllItems')     # create the element first...
tree = et.ElementTree(root)       # and pass it to the created tree

root.append(dict_to_elem(  {'some_tag':'Hello World', 'xxx': 'yyy'}  ))
# Lather, rinse, repeat this append step as needed

filename = 'a.xml'
with open(filename, 'w', encoding='utf-8') as file:
    tree.write(file, encoding='unicode')

# The alternative is...    
fname = 'b.xml'
with open(fname, 'wb') as f:
    tree.write(f, encoding='utf-8') 
```

这取决于目的。在这两者中，我个人更喜欢第一种解决方案。它清楚地表明您编写了一个文本文件（并且 XML 是一个文本文件）。

但是，您不需要告诉编码的最简单的替代方法是将文件名传递给`tree.write`这样的：

```
tree.write('c.xml', encoding='utf-8') 
```

它打开文件，*使用给定的编码*写入内容（在下面塞巴斯蒂安的评论后更新），然后关闭文件。而且您可以轻松阅读它，并且在这里不会出错。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T11:58:56.690

这不是必需的，但如果您的工具不理解生成的 xml 文件，您可以显式添加 xml 声明：

```
#!/usr/bin/env python3
from xml.etree import ElementTree as etree

your_dict = {'some_tag': 'Hello World ☺'}

def add_items(root, items):
    for name, text in items:
        elem = etree.SubElement(root, name)
        elem.text = text

root = etree.Element('AllItems')
add_items(etree.SubElement(root, 'Item'),
          ((key.replace(' ', ''), value) for key, value in your_dict.items()))
tree = etree.ElementTree(root)
tree.write('output.xml', xml_declaration=True, encoding='utf-8') 
```

### 输出.xml：

```
<?xml version='1.0' encoding='utf-8'?>
<AllItems><Item><some_tag>Hello World ☺&lt;/some_tag></Item></AllItems> 
```

# php - 使用 preg_match_all 用 PHP 解析一个 html 表

> ID：13851675
> 
> 赞同：0
> 
> 时间：2012-12-13T01:45:52.923
> 
> 标签：php

我使用以下 PHP 脚本来解析表。

如果每个元素都在同一行上，它就可以工作，例如：

```
<td></td>
<td></td>
<td></td> 
```

如果“开始标签”和“结束标签”在不同的行上，我怎样才能让它工作？像这样：

```
<td></td>
<td>
</td>
<td></td> 
```

**PHP 脚本：**

```
function parseTable($html)
{
  // Find the table
  preg_match("/<table.*?>.*?<\/[\s]*table>/s", $html, $table_html);

  // Get title for each row
  preg_match_all("/<th.*?>(.*?)<\/[\s]*th>/", $table_html[0], $matches);
  $row_headers = $matches[1];

  // Iterate each row
  preg_match_all("/<tr.*?>(.*?)<\/[\s]*tr>/s", $table_html[0], $matches);

  $table = array();

  foreach($matches[1] as $row_html)
  {
    preg_match_all("/<td.*?>(.*?)<\/[\s]*td>/", $row_html, $td_matches);
    $row = array();
    for($i=0; $i<count($td_matches[1]); $i++)
    {
      $td = strip_tags(html_entity_decode($td_matches[1][$i]));
      $row[$row_headers[$i]] = $td;
    }

    if(count($row) > 0)
      $table[] = $row;
  }
  return $table;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:49:39.100

Preg_match 不是用来解析 HTML 的，因为它不是正则表达式。最好的解决方案是使用

[XML Parser - PHP Doc](http://php.net/manual/en/book.xml.php)

每个工具都有自己的问题需要解决，解析不是 preg_match 的

# yii - Predis Aysnc 怀疑

> ID：13851683
> 
> 赞同：1
> 
> 时间：2012-12-13T01:46:58.920
> 
> 标签：yii, redis, predis

有人告诉我，如果我想使用 predis-async，那么我将使用某种异步 Web 框架（可能使用[https://github.com/reactphp/react](https://github.com/reactphp/react)构建）。我目前正在使用 Yii。

我也被告知

```
$client->getEventLoop()->run(); 
```

该行将启动事件循环，在终止与 Redis 的所有连接并调用所有回调后，该循环不会返回。所以这意味着这条线将阻塞你的代码。尝试运行以下代码（说明 Predis Async 用法的最简单代码）：

```
$client = new Predis\Async\Client('tcp://127.0.0.1:6379');
$client->set('test', 'value');

$client->getEventLoop()->run();
echo 'END'; 
```

END 可能不会显示很长时间，也可能永远不会显示，但肯定会比使用非异步 Predis 执行相同的操作更多。

但是，我自己的理解是，现有的 PHP 系统应该能够开箱即用地使用 Predis Async 作为库。这意味着现有的 PHP 系统不需要在 ReactPHP 上。我使用 predis async 的想法类似于使用 mongodb 异步提交。当 PHP 调用 mongodb lib 提交写操作时，它是异步的。Mongodb 立即返回调用，而不是等待写入发生。在这种情况下，mongodb 也不需要异步 php 框架。

是不是真的

> END 可能不会显示很长时间，也可能永远不会显示，但肯定会比使用非异步 Predis 执行相同的操作更多。

# java - 为什么我不能访问 2D ArrayList 的元素？

> ID：13851687
> 
> 赞同：1
> 
> 时间：2012-12-13T01:47:13.237
> 
> 标签：java, string, arraylist

我有一个二维 ArrayList，它在 while 循环中填充了字符串值。这些值来自使用读取的 CSV 文件，`BufferedReader`然后使用`StringTokenizer`. 1D ArrayList 在 while 循环中添加到 2D ArrayList。

我的问题是我无法在 while 循环之外访问 2D 数组的元素。从以下代码可以看出：

```
public String[][] readInCSV(String mg) {

    List<List<String>> twoDim = new ArrayList<List<String>>();
    List<String> row = new ArrayList<String>();
    try {

        BufferedReader CSVFile = new BufferedReader(new FileReader("C:\\minuteTest.csv"));
        String dataRow="";
        int y=0;

        while ((dataRow = CSVFile.readLine()) != null) {
            StringTokenizer st = new StringTokenizer(dataRow, ",");

            while(st.hasMoreTokens()){

                row.add(st.nextToken());

            }
            System.out.println("row: " + row.get(2));
            twoDim.add(row);
            System.out.println("twoDimTest: " + twoDim.get(y).get(2) + "  y: " + y);
            row.clear();
            y++;
        }

        for(int x=0; x<twoDim.size(); x++){

            System.out.println("twoDim: " + twoDim.get(x).size());
        }
        CSVFile.close();

    } 
    catch (FileNotFoundException e1) {
        System.out.println("file not found: " + e1.getMessage());
    } 
    catch (IOException e1) {
        System.out.println("could not read file: " + e1.getMessage());
    }

    return strArray;
} 
```

"twoDimTest" 准确地打印出 "row" 在 while 循环中所做的事情，但 "twoDim" 在 for 循环中打印出 0。如果我尝试：

```
twoDim.get(0).get(2); 
```

它返回一个 IndexOutOfBoundsException。如果我尝试：

```
twoDim.size(); 
```

它返回正确的行数。

为什么我的二维数组的行填充在 while 循环中，而不是在 while 循环之外？
如何在 while 循环之外访问我的二维数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:51:48.593

您的外部列表包含同一内部列表的许多副本，您`row.clear();`随后会使用这些副本。

您需要`new ArrayList<>()`为每一行创建一个，而不是清除它。

# breeze - 新实体所需的并发/时间戳

> ID：13851690
> 
> 赞同：1
> 
> 时间：2012-12-13T01:47:35.797
> 
> 标签：breeze

尝试使用此字段保存新实体

```
[Timestamp]
    public byte[] TimeStamp { get; set; } 
```

引发验证错误`Required`。保存前我没有在 TimeStamp 上设置任何值。保存现有项目会按预期更改数据库中的时间戳。

该值由数据库本身设置，因此不需要初始化，还是我错了？

编辑：

我认为这很有效，因为它可以为空

```
[ConcurrencyCheck]
    public int? RowVersion { get; set; } 
```

新的 DB-Entry 具有 null 作为值。我的应用程序中的任何更改都会改变这一点并添加 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:14:49.507

这是一个错误，现已在 v 0.76.4 中修复。您现在应该可以干净利落地使用 SQL Server 时间戳了。...谢谢你找到这个，萨沙。

# java - 提交给 Executor 的 FutureTask 没有运行

> ID：13851695
> 
> 赞同：4
> 
> 时间：2012-12-13T01:48:11.053
> 
> 标签：java, android, concurrency, futuretask

我写了一个类，它的一系列实例打算从 AsyncTask 中调用，它会从方法 runReport() 返回一个结果。它创建了一个工作线程就好了，但由于某种原因它不执行 Callable 的 call() 方法。我究竟做错了什么？

```
//Problem: doStuff() never gets called, even though the worker thread gets created.

@Override
public ReportResult runReport() throws InterruptedException, ExecutionException {
    Callable<ReportResult> report = new Callable<ReportResult>() {

        @Override
        public ReportResult call() throws Exception {
            doStuff();
            ...
            return new ReportResult(varWrittenByMethod);
        }
    };
    FutureTask<ReportResult> result = new FutureTask<ReportResult>(report);

    //I tried a few of these ExecutorService factory methods, with the same result.
    //I only made my own ThreadFactory to verify the worker was created
    ExecutorService es = Executors.newSingleThreadExecutor(new ThreadFact());
    es.submit(report);

    ReportResult finalResult = result.get();
    es.shutdownNow();
    return finalResult;
}

private class ThreadFact implements ThreadFactory{

    @Override
    public Thread newThread(Runnable r) {
        Log.d(TAG, "Created worker Thread");
        return new Thread(r);
    }

} 
```

据我所知，我必须在自己的线程中作为 FutureTask 执行此操作，因为它需要执行以下操作（除了返回之外，所有这些都在 doStuff() 内部）：

*   进行一些同步设置（AsyncTask 将其保持在 UI 线程之外）
*   调用 Looper.prepare()
*   注册一个监听器
*   调用 Looper.loop()，在一段时间内捕获来自监听器的一些回调。
*   当我有足够的数据点时，在侦听器回调中调用 Looper.myLooper().quit()
*   返回结果

我愿意接受更好的方法来做到这一点。我最初让 AsyncTask 进行此调用，然后在其线程上运行 Looper.loop()，但我无法处理这些对象的队列，因为我需要在返回结果之前从侦听器调用 Looper.myLooper.quit() ，这会不可逆地毒化线程的消息队列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T01:53:14.750

您的线程工厂不会将传递的 Runnable 传播到创建的线程。在您的 ThreadFactory 中，尝试：

```
return new Thread(r); 
```

此外，您应该使用提交方法返回的 FutureTask，而不是您明确创建的。例如

```
FutureTask<ReportResult> result = es.submit(report);
ReportResult finalResult = result.get(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T02:07:44.440

请注意，您可能会后悔从 AsyncTask 执行此级别的工作，因为 AsyncTask 中的线程将在 Activity 生命周期更改期间被终止。最好在 IntentService 中进行异步设置。如果你不需要 Looper()，你可以使用普通线程而不是 HandlerThreads。

# java - 如何通过 GET 将 unix 路径作为 JSON 对象的一部分发送到 Web 服务

> ID：13851699
> 
> 赞同：0
> 
> 时间：2012-12-13T01:48:34.750
> 
> 标签：java, web-services, rest, get

抱歉，如果这是一个重复的问题，但谷歌不够聪明，无法理解我，或者我太笨，无法简单地表达我的问题，以至于它可以理解。

我不知道这是否是我的问题，但我有 90% 的把握就是这样。我想知道如何在 GET 请求中表示 Unix 路径，以便我的 Web 服务不返回 404。我认为这是因为查询中的 JSON 字段之一是 Unix 路径，并且由于斜线，网络服务认为它是 URL 的一部分，而不是我的查询的一部分。

例如，我正在使用作为 Mozilla 的附加组件的 RESTClient 来测试我的 Web 服务。对于 POST 请求，我输入为 url

```
http://mytestserver:8080/mydir/ 
```

在正文中，我放入了我的 JSON 对象

{“文件名”：“obit.jpg”，“路径”：“ **test/2/1** ”}

这种方法效果很好。我得到一个状态码 200 和一个带有预期输出的返回 JSON 对象。

当我对 GET 请求使用相同的字符串时，我得到一个状态码 404 并且没有返回 JSON 对象。我在 RESTClient 中作为 url

```
http://mytestserver:8080/mydir/{"filename":"obit.jpg", "Path":"test/2/1"} 
```

我得到一个状态码 404 并且响应正文只是说 404 - 未找到

为了进一步测试我的理论，我在 GET 请求中输入了以下 url，从路径中删除了 /2/1，这很有效。

```
http://mytestserver:8080/mydir/{"filename":"obit.jpg", "Path":"test"} 
```

我已经尝试将整个 JSON 字符串封装在引号中，但这也不起作用，所以我已经没有办法尝试了。

提前感谢您能给我的任何帮助。如果我需要显示一些代码，请告诉我，虽然，我不认为这是一个代码问题，我认为这是一个表示问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:31:17.550

发现 JSON 对象通常是通过 POST 而不是 GET 发送的。由于我通过 GET 将它附加到 URL，它给我带来了问题。根据[如何在查询中发送带有“/”的 GET 请求](https://stackoverflow.com/questions/13944458/how-to-send-a-get-request-with-a-in-the-query)

# jquery - jQuery 选择器和 $(this)

> ID：13851702
> 
> 赞同：0
> 
> 时间：2012-12-13T01:48:44.030
> 
> 标签：jquery, jquery-selectors

我有一个有趣的选择器语句：

```
$("span#dateofbirth").bind('click', function() {
  $("span#dateofbirth>form>input.inplace_field").blur();
  $("span#dateofbirth>form>input.inplace_field").removeClass("inplace_value");
  $("span#dateofbirth>form>input.inplace_field").datepicker({dateFormat:'yy-mm-dd'});
  $("span#dateofbirth>form>input.inplace_field").addClass("inplace_value");
  $("span#dateofbirth>form>input.inplace_field").focus();
}); 
```

它实际上是由其他人插入的，以使 jQuery UI 日期选择器与 Edit-in-Place 插件一起工作。它似乎更像是一种黑客/创可贴。但它有效。

我想继续使用它，但我想将它修改为对任何带有日期的元素更加全局。

所以，我给跨度一个类`.datepicker`

但是，它并不完全有效，因为绑定更喜欢特定的 ID，以本地化到该元素。

有没有办法解决这个问题，也许将`$(this)`, 与选择器语句的其余部分结合使用？

也许类似的东西？

```
$("span.datepicker").bind('click', function() { 

  $(this+">form>input.inplace_field").blur();

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:50:48.343

选择器是普通的字符串。

你正在尝试写

```
$(this).find(">form>input.inplace_field") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T01:51:17.850

利用`.find()`

```
$(this).find(">form>input.inplace_field") 
```

**或者**

```
$(">form>input.inplace_field" , this)  // Provide a context to search in 
```

**JS**

```
$("span#dateofbirth").bind('click', function() {
  $(">form>input.inplace_field" , this).blur()
          .removeClass("inplace_value")
          .datepicker({dateFormat:'yy-mm-dd'})
          .addClass("inplace_value")
          .focus();
}); 
```

您应该`chain`或`cache`选择器来减少查询**DOM 的次数。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T02:36:23.243

子选择器`>`现在在 jQuery 选择器中已被弃用（在 CSS 中仍然可以）。

您应该使用以下内容：

```
$(".datepicker").on('click', function() {
  $(this).children("form").children("input.inplace_field").blur()
          .removeClass("inplace_value")
          .datepicker({dateFormat:'yy-mm-dd'})
          .addClass("inplace_value")
          .focus();
}); 
```

# mysql - MySQL 更新问题 - NULL 字段得到更新，但不是已经包含数据的字段

> ID：13851712
> 
> 赞同：0
> 
> 时间：2012-12-13T01:50:03.910
> 
> 标签：mysql, phpmyadmin

我正在为 MySQL 查询而苦苦挣扎。这是问题所在：

```
SELECT * from sf_forecasts WHERE contentid='1234' AND fulldate='2012-12-13' 
```

我的表中有一条记录符合这个条件，这个查询很容易找到它。但是，当我使用此查询进行更新时...

```
UPDATE sf_forecasts
SET listingTitle ='Some Snow Resort', location ='49.23, -115.22'
WHERE contentid='1234' AND fulldate='2012-12-13' 
```

...我总是收到“0 行受影响”的通知。奇怪的是，查询实际上是在更新记录，但它只是触及 NULL 字段。如果我的示例记录的“位置”值为 NULL，则查询将更新数据，但如果它已经包含非 NULL 值，则查询不会更改它，即使查询清楚地包含新信息。

是什么赋予了？

PS如果这很重要，我正在使用contentid + fulldate（b-tree，唯一）的PRIMARY键。

PSS 下面是“SHOW CREATE TABLE sf_forecasts”的结果，要求如下：

```
sf_forecasts    CREATE TABLE `sf_forecasts` (
`contentid` int(11) NOT NULL,
`fulldate` varchar(10) COLLATE utf8_unicode_ci NOT NULL,
`listingTitle` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
`location` varchar(10) COLLATE utf8_unicode_ci NOT NULL,
`dayofmonth` smallint(2) NOT NULL,
`dayofweek` varchar(10) COLLATE utf8_unicode_ci NOT NULL,
`minTempF` smallint(4) NOT NULL,
`maxTempF` smallint(4) NOT NULL,
`minTempC` smallint(4) NOT NULL,
`maxTempC` smallint(4) NOT NULL,
`skyCondition` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
`precip` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
`snowPotential` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
`wind` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
`minTempF_custom` smallint(4) DEFAULT NULL,
`maxTempF_custom` smallint(4) DEFAULT NULL,
`minTempC_custom` smallint(4) DEFAULT NULL,
`maxTempC_custom` smallint(4) DEFAULT NULL,
`baseH_custom` smallint(4) DEFAULT NULL,
`baseL_custom` smallint(4) DEFAULT NULL,
`topH_custom` smallint(4) DEFAULT NULL,
`topL_custom` smallint(4) DEFAULT NULL,
`skyCondition_custom` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL,
`precip_custom` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL,
`snowPotential_custom` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL,
`wind_custom` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL,
`icon` varchar(30) COLLATE utf8_unicode_ci NOT NULL,
`icon_custom` varchar(30) COLLATE utf8_unicode_ci DEFAULT NULL,
`shortrange_custom` varchar(5000) COLLATE utf8_unicode_ci DEFAULT NULL,
`longrange_custom` varchar(5000) COLLATE utf8_unicode_ci DEFAULT NULL,
`scCode` varchar(10) COLLATE utf8_unicode_ci DEFAULT NULL,
`scUpdate` varchar(10) COLLATE utf8_unicode_ci DEFAULT NULL,
`lastUpdate` varchar(10) COLLATE utf8_unicode_ci DEFAULT NULL,
`skys` varchar(30) COLLATE utf8_unicode_ci DEFAULT NULL,
PRIMARY KEY (`contentid`,`fulldate`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:11:52.303

问题在于定义的数据类型长度和正在更新的数据长度不同

您的位置是`varchar(10)`并且您正在尝试插入`14 characters`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:26:53.780

您可以随时检查查询执行后是否有错误：

```
SHOW ERRORS;

SHOW WARNINGS; 
```

# actionscript - 错误 #2044：未处理的 IOErrorEvent：。文本=错误 #2036：加载从未完成

> ID：13851714
> 
> 赞同：1
> 
> 时间：2012-12-13T01:50:23.483
> 
> 标签：actionscript

我有一个 .swf 文件，当我尝试在浏览器中加载它时会引发此错误。与此处的其他帖子类似，这是代码：

```
var mySpite:Sprite = new Sprite();
var button:Loader = new Loader();
var url:String = "images/btnImage.png";
var urlReq:URLRequest = new URLRequest(url);
button.load(urlReq);
.... 
```

当我在 Flex Build 中运行动作脚本时，它工作正常。此外，当我双击存储它的文件夹中的 .swf 文件时，它工作正常。我不知道为什么当我在 .jsp 页面中加载它时它只是不起作用并引发此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:51:00.567

这很可能是您的路径的问题。请记住，图像的路径将相对于嵌入 SWF 的页面。

在回答您关于在部署时必须更改路径的评论时，根据您构建和调试 SWF 的方式，可以使用`Capabilities.playerType`（请参阅[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html)）为当前环境选择正确的路径。另一种选择可能是将所有图像引用放在几个 XML 文件中（一个本地文件和一个远程文件）。只要本地和远程环境之间的 XML 文件路径一致，您就可以更新 SWF 而无需担心图像路径。

# android - 在按钮单击时动态添加布局并从布局中获取文本？

> ID：13851725
> 
> 赞同：1
> 
> 时间：2012-12-13T01:51:49.173
> 
> 标签：android, layout, dynamic, android-edittext, viewgroup

所以我有一个布局，每次用户按下按钮时都会添加到主布局中。我做得很好，但是那个布局恰好由几个 EditTexts 组成。从 EditText 获取文本的最佳方法是什么？我只有布局本身的 id，而不是布局内的 EditTexts。

我想只是一个一个地动态添加 EditTexts，但是有没有更有效的方法呢？我宁愿每次单击按钮时都膨胀一个 xml 布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:29:01.210

我假设您通过膨胀它们来添加新视图，然后将它们添加到类似于下面的主视图中。

```
LinearLayout newView = (LinearLayout)this.getLayoutInflater().inflate(R.layout.my_layout, null);

LinearLayout mainView = (LinearLayout)this.findViewById(R.id.mainLayout);
mainView.addView(newView); 
```

您可以在 newView 上使用 findViewById() 根据需要访问每个 EditText。

```
EditText editText = (EditText) newView.findViewById(R.id.myButton);
String text = editText.getText().toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:34:17.317

由于它是从特定 XML 文件扩展的固定布局，因此您还可以使用 getChildAt(int index) 来查找 ViewGroup 的特定视图。

# android - Android - 如何在视图上绘制

> ID：13851728
> 
> 赞同：10
> 
> 时间：2012-12-13T01:52:13.217
> 
> 标签：android, view, paint, android-custom-view

我想在我自己的视图（R.id.view）上绘画，但这段代码似乎没有任何效果。它根本不允许我画任何东西。

```
public class MainActivity extends Activity implements OnTouchListener
        {
Path mPath;
Canvas canvas;
Paint mPaint;
MaskFilter mEmboss;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        View view=(View)findViewById(R.id.view1);
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0xFFFF0000);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(12);

        canvas = null;
        //view.draw(canvas);
        mPath = new Path();
        Bitmap mBitmap;
        //Paint mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        mBitmap = Bitmap.createBitmap(210, 170, Bitmap.Config.ARGB_8888);
        canvas = new Canvas(mBitmap);
        canvas.drawColor(0xFFAAAAAA);

        canvas.drawBitmap(mBitmap, 0, 0, mPaint);

        //canvas.drawPaint(mPaint);
        view.draw(canvas);
        canvas.drawPath(mPath, mPaint);

        mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },
                                       0.4f, 6, 3.5f);

        view.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                float x = event.getX();
                float y = event.getY();
                Log.d("x", String.valueOf(x));
                Log.d("y", String.valueOf(y));

                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        Log.d("a","down");
                        touch_start(x, y);
                        //invalidate();
                        break;
                    case MotionEvent.ACTION_MOVE:
                        touch_move(x, y);
                       // invalidate();
                        break;
                    case MotionEvent.ACTION_UP:
                        touch_up();
                       // invalidate();
                        break;
                }
                return true;
            }
        });

       // mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
    }
    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        canvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        mPath.reset();
    }

} 
```

我该怎么做才能在我自己的视图上使用 freehanf 手指画？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T02:26:58.503

最好创建一个扩展视图的类，并将其设置为内容视图。这样更有活力。

此外，`Action_Move`在触摸事件期间该参数会被多次调用，因此最好注意这一点，否则当您想要曲线时会得到一条直线。

你会从`onCreate`改变开始

```
View view = new MyView();
setContentView(view); 
```

在您的`MyView`班级内部，您将拥有一个`ArrayList`对象`Path`。每次`Action_UP`被调用时，您将路径添加到`ArrayList`, use `view.Invalidate();`，然后该类将调用`onDraw`您视图类中的方法。所以你像这样覆盖它：

```
@Override
public void onDraw(Canvas c) {
    for (Path p : listOfPaths) {
        c.drawPath(p, paint);
    }
} 
```

请注意，虽然这对于简单的绘图很有用，但不要指望使用这种方法在平板电脑或手机上绘制蒙娜丽莎，因为一旦有很多线条，您可能会注意到滞后。如果您想变得更复杂和专业，请查看该`view.Invalidate(Rect r)`方法，它不会使整个视图无效，而只会使您刚刚绘制的部分无效。

# windows-phone-8 - 如何在 Windows Phone 8 中使用 LongListSelector 实现下拉刷新？

> ID：13851734
> 
> 赞同：2
> 
> 时间：2012-12-13T01:53:02.433
> 
> 标签：windows-phone-8, longlistselector

我正在使用 Microsoft.Phone.Controls 程序集中附带的现成的 LongListSelector 编写一个新的 WP8 应用程序。谁能提供一个实现pull-to-refresh的代码示例，最初由Tweetie for iPhone流行，现在在iOS和Android上很常见？现有示例使用非标准控件，我想在 WP8 中继续使用 LongListSelector。

编辑

我在 StackOverflow 上找到了一个很好的答案，描述了 Twitter 示例以及如何更详细地执行此操作：

[使用 LongListSelector 进行连续分页](https://stackoverflow.com/questions/13381752/continuous-pagination-with-longlistselector)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T03:32:49.240

你不。

下拉刷新不是标准的 Windows Phone 交互，因此您不应该实现它。

没有本机/第一方 Windows Phone 应用程序使用此功能，几乎没有第三方应用程序也使用此功能。这是有原因的。

要刷新页面的内容（或者在您的情况下是 a `LongListSelector`），您应该使用**refresh** `ApplicationBacIconButton`，就像在邮件应用程序中一样。这是管理刷新的标准和首选方式。

Windows Phone**不是**Android，也不是 iOS。在为它设计应用程序时请记住这一点。

这不是动物园，有规则。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T19:48:57.710

实际上，我刚刚在 2012 年 11 月 30 日发现了一个上传到 Windows Phone 开发中心的项目，该项目使用 Twitter Search 和 Windows Phone 8 LongListSelector 实现了“无限滚动”。

下载此项目：[http ://code.msdn.microsoft.com/wpapps/TwitterSearch-Windows-b7fc4e5e](http://code.msdn.microsoft.com/wpapps/TwitterSearch-Windows-b7fc4e5e)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T20:18:56.103

如果您真的必须这样做（请参阅 Miguel Rochefort 的回答），那么可以在[http://blogs.msdn.com/b/jasongin/archive/2011/04/13/pull-down-to-refresh-a找到详细信息-wp7-listbox-or-scrollviewer.aspx](http://blogs.msdn.com/b/jasongin/archive/2011/04/13/pull-down-to-refresh-a-wp7-listbox-or-scrollviewer.aspx)

基本上，它`ScrollViewer`具有隐藏/未记录的状态，允许检测列表顶部或底部的“压缩”，您可以使用它来触发加载。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-29T22:53:15.047

这并非完全无关紧要，但一种方法是使用 GestureService

```
 this.gestureListener = GestureService.GetGestureListener(containerPage);
        this.gestureListener.DragStarted += gestureListener_DragStarted;
        this.gestureListener.DragCompleted += gestureListener_DragCompleted;
        this.gestureListener.DragDelta += gestureListener_DragDelta; 
```

但是，它有一些错误。例如， DragCompleted 并不总是被引发，因此您需要使用 ManipulationCompleted 事件仔细检查，这似乎更可靠。

```
 containerPage.ManipulationStarted += delegate { this.manipulationInProgress = true; };
        containerPage.ManipulationCompleted += delegate
        { 
            this.manipulationInProgress = false;
            PerformDragComplete(); 
        }; 
```

另一个问题是 DragDelta 偶尔会报告错误的坐标。所以你需要这样的修复：

```
 Point refPosition = e.GetPosition(null);
    if (refPosition.X == 0 && refPosition.Y == 0)
    {
        Tracer.WriteLine("Skipping buggy event");
        return;
    } 
```

最后，您可以找到 list 是否一直位于顶部：

```
public double VerticalOffset
{
    get
    {
        ViewportControl viewportControl = this.FindChildByName("ViewportControl") as ViewportControl;
        if (viewportControl != null)
        {
            Tracer.WriteLine("ViewPort.Bounds.Top=" + viewportControl.Bounds.Top +  " ViewPort.Top=" + viewportControl.Viewport.Top.ToString() + " State=" + this.ManipulationState);
            return viewportControl.Bounds.Top - viewportControl.Viewport.Top;
        }
        return double.NaN;
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-02T08:53:59.307

您可以查看 [https://github.com/Kinnara/WPToolkit](https://github.com/Kinnara/WPToolkit)中的示例， 它有一个出色的实现，称为 longllistselector 控件的 ListView 扩展，这将真正帮助您。

并记住 longlistselector 总是尝试加载至少 20 个项目。=)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-16T11:20:01.390

由于 WP8 LLS 不使用滚动查看器，我想您将不得不检查 UI 树以获取视口控件并查看您可以使用 ViewportControl.Viewport 属性做什么......

哦... twitter 应用程序现在正在使用拉动刷新交互。我喜欢 WP 平台的 UI 指南，但规则一旦掌握，就会被打破；）

[此处](https://stackoverflow.com/questions/15121139/how-can-i-get-the-verticaloffset-of-a-longlistselector-in-wp8?rq=1)的这篇文章可以为您提供有关如何获取视口控件和检索滚动偏移量的提示。当列表弹跳时，此滚动偏移量必须具有特定值

# python - 编程语言翻译器是如何工作的？

> ID：13851739
> 
> 赞同：0
> 
> 时间：2012-12-13T01:53:39.107
> 
> 标签：python, c, compiler-construction

我很好奇像睡衣这样的交叉编译器是如何工作的。他们只是有一个列表关键字并用翻译的代码逐行替换每个单词吗？我想明白。

我为我的无知道歉，我只是好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:58:32.127

没有一个通用的答案总是有效的，但通常语言到语言的翻译器的工作方式与编译器的工作方式大致相同 - 它读取源代码，构建程序的内部表示，然后发出代码一种目标语言。但是，普通编译器和交叉编译器之间的主要区别在于，普通编译器通常输出汇编（或某种字节码），而交叉编译器通常输出不同编程语言的构造。

如果您想了解有关构建此类翻译器的关键技术的更多信息，您可能需要阅读通用编译器构建技术。这真的很酷！

希望这可以帮助！

# c# - 格式化自动属性的语法

> ID：13851740
> 
> 赞同：1
> 
> 时间：2012-12-13T01:54:10.370
> 
> 标签：c#, .net

我有一个典型的 C# 自动属性。当我只有一个 get 时，如何应用 WebUtility.HtmlDecode() ；放;？

更新：

好吧，今天的愚蠢错误。我有一个奇怪的问题，我的 web.config 数据库连接字符串指向正确的服务器，但由于某种原因，因为我有 2 个实例（一个 sql 2008 和 2012），它仍然在 2008 年获取该数据库的实例，该实例具有编码还在。我已经通过我在 2012 年数据库中创建的单元测试解码标题来解决编码问题，在这种情况下，整个 fing 帖子在堆栈中是不必要的，因为最终问题是它是从旧数据库中读取的（搞砸了我） .

无论如何，我已经修复了这个问题，终于摆脱了 2008 年的副本，现在它在我修复后可以正常阅读：

```
 [Test]
    public void CleanAllPostEntries_DecodeHTML_DecodeWasSuccessful()
    {
        // Arrange

        // Act
        IEnumerable<Entry> posts = PostCRUD.GetAllPosts();

        foreach (Entry post in posts)
        {
            post.Title = WebUtility.HtmlDecode(post.Title);
            post.Body = WebUtility.HtmlDecode(post.Body);
            post.MetaTitle = WebUtility.HtmlDecode(post.MetaTitle);

            PostCRUD.UpdatePost(post);

            //System.Diagnostics.Debug.WriteLine("id: " + post.Id);
            //System.Diagnostics.Debug.WriteLine("title: " + WebUtility.HtmlDecode(post.Title));
            //System.Diagnostics.Debug.WriteLine("body: " + WebUtility.HtmlDecode(post.Body));
        }

        //Assert
        // TODO: add asserts
    } 
```

所以我认为我毕竟不需要解码......我已经做到了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T01:58:43.370

你不能，*我想*。唯一的方法是有一个单独的方法来格式化值并将其分配给属性，例如

```
private string SamplePropery {get; set;}
private string FormatMethod(string value) {}

private void SampleExecute()
{
    // format and set to property
    SampleProperty = FormatMethod("hello world");

    // get property and format the value
    string _value = FormatMethod(SampleProperty);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T02:32:37.047

属性的值一旦设置就不应改变。它应该返回您设置的相同值。这就是为什么它被称为属性。`HtmlDecode`在设置属性值之前调用。

如果其他人使用您的类并且无法访问您的源代码，他们不会想象您在设置属性值时正在执行任何类型的处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T02:36:41.043

您真的不想通过属性进行 HTML 编码/解码，尽管如果您愿意的话也可以。这有几个问题：

1.  您将对*属性的每一次访问（*无论是读取还是写入）都进行编码/解码。
2.  HTML 编码/解码是一种“有损”转换，您只想对每个字符串执行一次；当您在多个属性上折腾时，您不希望不断地编码、解码和重新编码同一个字符串，您将开始以这种方式丢失信息。
3.  内容的 HTML 编码不是您存储它的对象的属性，它是内容本身的属性。

您真正想要做的是使用表示 HTML 编码字符串的更强类型。

.NET 4.0 框架包含一个`System.Web.HtmlString`您应该用于此目的的类型。事实上，`System.Web.IHtmlString`如果您希望保持一般性，请使用该界面。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T02:28:06.497

你不能用神奇的 getter 和 setter 自动完成。您需要创建自己的私有财产并将其用作公共财产的后备存储。

例子：

```
private string _Item;

public string Item
{
    get
    {
        return _Item;
    }
    set
    {
        _Item = WebUtility.HtmlDecode(value);
    }
} 
```

但是，这个问题的其他答案是正确的，这可能是一个坏主意。例如，如果您的代码曾在 HTML 应用程序之外使用，则必须在设置此属性之前对所有文本进行 HTML 编码。

# ruby-on-rails - 在 Ruby 1.9.3 中安装 Mongrel

> ID：13851741
> 
> 赞同：9
> 
> 时间：2012-12-13T01:54:20.433
> 
> 标签：ruby-on-rails, ruby, mongrel

如何为 ruby​​ 1.9.3 成功安装 Mongrel

这是错误：

```
Building native extensions.  This could take a while...
ERROR:  Error installing mongrel:
    ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
checking for main() in -lc... yes
creating Makefile

make
compiling http11_parser.c
compiling http11.c
http11.c: In function ‘http_field’:
http11.c:70:3: error: format not a string literal and no format arguments [-Werror=format-security]
http11.c:71:3: error: format not a string literal and no format arguments [-Werror=format-security]
http11.c:77:22: error: ‘struct RString’ has no member named ‘ptr’
http11.c:77:50: error: ‘struct RString’ has no member named ‘len’
http11.c:77:27: warning: left-hand operand of comma expression has no effect [-Wunused-value]
http11.c: In function ‘request_uri’:
http11.c:102:3: error: format not a string literal and no format arguments [-Werror=format-security]
http11.c: In function ‘fragment’:
http11.c:113:3: error: format not a string literal and no format arguments [-Werror=format-security]
http11.c: In function ‘request_path’:
http11.c:124:3: error: format not a string literal and no format arguments [-Werror=format-security]
http11.c: In function ‘query_string’:
http11.c:135:3: error: format not a string literal and no format arguments [-Werror=format-security]
http11.c: In function ‘header_done’:
http11.c:172:13: error: ‘struct RString’ has no member named ‘ptr’
http11.c:172:13: error: ‘struct RString’ has no member named ‘ptr’
http11.c:172:13: error: ‘struct RString’ has no member named ‘ptr’
http11.c:174:89: error: ‘struct RString’ has no member named ‘ptr’
http11.c:176:52: error: ‘struct RString’ has no member named ‘ptr’
http11.c:177:26: error: ‘struct RString’ has no member named ‘len’
http11.c: In function ‘HttpParser_execute’:
http11.c:298:23: error: ‘struct RString’ has no member named ‘ptr’
http11.c:299:23: error: ‘struct RString’ has no member named ‘len’
http11.c:307:5: error: format not a string literal and no format arguments [-Werror=format-security]
cc1: some warnings being treated as errors
make: *** [http11.o] Error 1

Gem files will remain installed in /var/lib/gems/1.9.1/gems/mongrel-1.1.5 for inspection.
Results logged to /var/lib/gems/1.9.1/gems/mongrel-1.1.5/ext/http11/gem_make.out 
```

我已经试过`sudo gem install mongrel --pre` 了，甚至是那个`--source`

我不知道为什么它不起作用。它与 Ruby 1.9.1 及更高版本兼容吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T02:40:28.320

[你并不孤单。](https://web.archive.org/web/20130121164448/http://isitruby19.com/mongrel)但是，在线程中，有[一个指向可能修复的链接](http://rubynyc.wordpress.com/ruby-1-9-1/installing-mongrel-1-1-5-on-ruby-1-9-1/)。我还没有尝试过，所以 YMMV，但这似乎是一个合理的解决方案。

但是，鉴于 Mongrel 不再更新，为什么不切换到[Thin](http://code.macournoyer.com/thin/)之类的东西呢？

**编辑：**对不起，我看到你问的是 1.9.3。我的理解是 Mongrel （应该）与 1.9.1 兼容，但在 1.9.2+ 中被破坏。另一个很好的理由来切换到更现代和维护的东西。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-22T09:25:29.287

在命令下，

```
gem install mongrel --pre 
```

效果很好。

参考：[查看此链接以获取更多详细信息](http://kevin.h-pk-ns.com/2011/08/11/using-mongrel-on-ruby-1-9-2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T09:12:38.107

正如 John B 所说，切换到 Thin。

在无法使用我当前的 Ruby 1.9.3 设置安装 Mongrel 后，我从我的 Gemfile 中注释掉了 Mongrel 并添加了 Thin。这让我的应用程序完全安装并运行良好。

在我的 Gemfile

```
#gem 'mongrel', '1.2.0.pre2'
gem 'thin' 
```

然后运行

```
bundle install 
```

# java - 如何将数字格式化为十六进制字符串？

> ID：13851743
> 
> 赞同：31
> 
> 时间：2012-12-13T01:54:26.483
> 
> 标签：java, formatting

我想将 int 数字格式化为十六进制字符串。 `System.out.println(Integer.toHexString(1));`打印`1`，但我希望它为`0x00000001`. 我怎么做？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-12-13T02:01:37.153

尝试这个

```
System.out.println(String.format("0x%08X", 1)); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-13T02:01:13.920

您可以使用 String.format 将整数格式化为十六进制字符串。

```
 System.out.println(String.format("0x%08X", 1)); 
```

也就是说，用零填充，并使总宽度为 8。1 会为您转换为十六进制。上面的行给出：`0x00000001`和

```
 System.out.println(String.format("0x%08X", 234)); 
```

给出：`0x000000EA`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-13T02:02:04.117

从 Java 的[Formatter](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)类中记录的格式化语法：

```
Integer intObject = Integer.valueOf(1);
String s = String.format("0x%08x", intObject);
System.out.println(s); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T02:04:59.737

我不太了解 Java，但必须有一种方法可以将 toHexString 函数的输出用“0”填充到长度为 8。如果“0x”总是在开头，只需加上那个字符串到开头。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-05T16:46:59.270

#### Java 17+

有一个新的不可变类专门用于转换和格式化十六进制数。最简单的方法是使用[`HexFormat::toHexDigits`](https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/util/HexFormat.html#toHexDigits(int))其中包括前导零：

```
String hex = "0x" + HexFormat.of().toHexDigits(1);
// 0x00000001 
```

**请注意**，必须与`"0x"`前缀连接，因为这种方法会忽略已定义的前缀和后缀，因此以下代码段无法按预期工作（只有[`HexFormat::formatHex`](https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/util/HexFormat.html#formatHex(byte%5B%5D))方法适用于它们）：

```
String hex = HexFormat.of().withPrefix("0x").toHexDigits(1);
// 00000001 
```

> 返回 int 值的八个十六进制字符。值的从最高有效到最低有效的每个半字节`(4 bits)`都被格式化为`toLowHexDigit(nibble)`. **不使用分隔符、前缀和后缀。**

**或者**使用[`HexFormat::formatHex`](https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/util/HexFormat.html#formatHex(byte%5B%5D))格式化为两个十六进制字符的优势，并将 a`StringBuilder`作为`Appendable`包含 的前缀`"0x"`：

> 每个字节值都被格式化为前缀、从大写或小写数字中选择的**两个十六进制字符和后缀。**

```
StringBuilder hex = HexFormat.of()
    .formatHex(new StringBuilder("0x"), new byte[] {0, 0, 0, 1});
// 0x00000001 
```

```
StringBuilder hex = HexFormat.of()
    .formatHex(new StringBuilder("0x"), ByteBuffer.allocate(4).putInt(1).array());
// 0x00000001 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T02:01:27.107

您可以在 PrintStream 上使用[java.util.Formatter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)或[printf 方法。](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-15T20:50:44.647

不那么冗长：

```
System.out.printf("0x%08x", 1); //"Use %0X for upper case letters 
```

# c# - 有什么方法可以让 ServiceStack 反序列化 Silverlight 客户端上的复杂类型？

> ID：13851744
> 
> 赞同：2
> 
> 时间：2012-12-13T01:55:04.803
> 
> 标签：c#, silverlight, servicestack

我想反序列化来自 Silverlight 客户端的 JSON 响应。

我的 DTO 在可移植类库中，从服务器和客户端都引用。

```
public class MyDTOResponse
{
    public IEnumerable<MyType> ResponseData {get; set; }
} 
```

当我使用ServiceStack C# 客户端（即不是来自Silverlight）时，一切正常：MyType 在客户端上得到补充。

来自 Silverlight，但是 ResponseData 为空。

Silverlight 中的简单类型也可以正常工作。例如，这有效：

```
public class MyDTOResponse
{
    public IEnumerable<string> ResponseData {get; set; }
} 
```

注意：DTO 上没有注释。

在客户端，我正在使用：

```
var serviceClient = new ServiceStack.ServiceClient.Web.JsonServiceClient(baseUri); 
```

我的解决方法是更改​​ DTO，使它们只使用简单的类型，然后在客户端手动合并我的业务对象。

我能做得比这更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T12:46:36.037

尝试将 [DataContract] 属性添加到类 MyDTOResponse 和 [DataMember] 属性到属性 ResponseData

# java - 如何在运行时通过读取 XML 配置向类动态添加字段和方法？

> ID：13851746
> 
> 赞同：0
> 
> 时间：2012-12-13T01:55:16.453
> 
> 标签：java, class, runtime

为了使 Java Bean 中的所有字段都可以配置，我想在运行时动态地从读取 XML 配置到基本 Java 类的字段和方法。有没有办法做到这一点？如果有一个简单的样品可以在这里提供？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:29:40.950

java 在运行时不是动态语言。

但您可以使用 ASM 框架 ( [http://asm.ow2.org/](http://asm.ow2.org/) )。

# ruby-on-rails - 来自同一个表的两个不同的登录名和用户名

> ID：13851749
> 
> 赞同：-1
> 
> 时间：2012-12-13T01:55:37.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3, login, devise

如果它们引用不同的控制器，我需要两种登录，例如：

```
site.com/consumers
site.com/panel 
```

`site.com/consumers`登录用于发表评论，`site.com/panel`用于广告商和用户的管理部分。

我是`users`数据库同一张表中的所有消费者和广告商。

谁能帮我让两个登录在同一个表上进行验证，登录后发送到不同的视图和控制器？

在我的路线中，我试图使用：

```
devise_for :panel, :class_name => "User" 
```

但是登录的布局是相同的，并且需要不同。

**== 更新 ==**

我有三类人。1) 消费者 2) 广告商 3) 管理员

记录在同一个表中。但是每条记录都有一个你喜欢的列“类型”箭头（*消费者、广告商或管理员*）到目前为止我已经设法解决了。

问题是这样的：

当用户通过以下方式访问时：**www.site.com/comment** 该用户可以登录到网站上发表评论。

当用户通过以下方式访问时：**www.site.com/panel** 该用户可以登录以从他那里访问面板，他可能是（消费者、广告商或管理员）。

我想进行两种类型的登录，一种用于站点布局的/评论，另一种用于面板布局的/面板，但在同一个表上进行验证，在这种情况下（用户）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:48:33.207

你的问题有点难以理解。它看起来像你使用的设计。我不确定您是否尝试使用两种不同的模型，并且有两种不同类型的设计用户，也许具有不同的权限？或者，如果您试图根据用户登录后的身份将他们引导至不同的页面？

我建议您在设计中结帐 after_sign_in_path。您可以在应用程序控制器中定义它。如果您尝试将某人送回网站的不同部分，具体取决于他们登录的位置，您可以设置一个会话变量，然后在该函数中使用它来决定将某人发送到哪里。

如果您重写您的问题，我将尝试给出更好的答案。

# java - 使用 C、C++ 或 Java 以编程方式获取 Java 和 Flash 的版本号

> ID：13851750
> 
> 赞同：4
> 
> 时间：2012-12-13T01:55:58.793
> 
> 标签：java, c++, c, flash, version

我想查找计算机上安装的当前 Java 版本的版本号以及安装在任何具有 Flash 的给定 Web 浏览器上的 Flash 的当前版本。有没有办法使用 Java、C 或 C++ 来做到这一点？如果是这样，我应该研究什么课程/图书馆？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T02:04:54.090

如果你在 Java

```
 System.out.println(System.getProperty("java.version"));
    System.out.println(System.getProperty("java.vendor"));
    System.out.println(System.getProperty("java.vm.name")); 
```

输出

```
1.7.0_03
Oracle Corporation
Java HotSpot(TM) Client VM 
```

还有更多关于 Java 的道具

```
 for(Map.Entry e  : System.getProperties().entrySet()) {
        if (((String)e.getKey()).startsWith("java")) {
            System.out.println(e);
        }
    } 
```

.

```
java.runtime.name=Java(TM) SE Runtime Environment
java.vm.version=22.1-b02
java.vm.vendor=Oracle Corporation
java.vendor.url=http://java.oracle.com/
java.vm.name=Java HotSpot(TM) Client VM
java.vm.specification.name=Java Virtual Machine Specification
java.runtime.version=1.7.0_03-b05
.... 
```

至于其他语言，我认为您可以通过`%JAVA_HOME%/java -version`从您的应用程序运行，阅读输出来做到这一点

```
java version "1.7.0_03"
Java(TM) SE Runtime Environment (build 1.7.0_03-b05)
Java HotSpot(TM) Client VM (build 22.1-b02, mixed mode, sharing) 
```

或者你可以像上面那样对一个 JavaProps 应用程序，运行它`%JAVA_HOME%/java JavaProps`并读取输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:29:09.577

Detecting java version from C/C++ could be tricky, the thing is that there is not standard API you can use to get the installed JRE properties. A way to do it is creating a subprocess that invokes `java -version` and get the output from this process (also you can make the subprocess write to a specific file and then retrieve the data from it) , then parse it and get the version.

The following is a modified version of a Windows .exe launcher routine I did sometime ago that uses what I just explained (create the subprocess for `java -version`, make the subprocess write to a temp file, open the file and read its content, parse the version):

```
void printJVMVersion() { 
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    size_t sizeOfStartupInfo = sizeof(STARTUPINFO);
    ZeroMemory(&si, sizeOfStartupInfo);
    si.cb = sizeOfStartupInfo;

    SECURITY_ATTRIBUTES sa = { sizeof(sa) };    // Open files in inheritable mode
    sa.bInheritHandle = TRUE;                   // Allow inheritance
    sa.lpSecurityDescriptor = NULL;             // Handles to the child process

    si.dwFlags = STARTF_USESTDHANDLES;
    const std::string DEFAULT_TEMP_FILE_NAME = "temp_file.txt";
    const size_t MAX_PATH = 256;
    char buffer[MAX_PATH];

    char tempPathBuffer[MAX_PATH];
    GetTempPath(MAX_PATH, tempPathBuffer);
    std::string file_name;
    if ( GetTempFileName(tempPathBuffer, "some_random_prefix", 0, buffer) != 0 ) { 
        file_name = std::string(buffer);
    } else {
        file_name = DEFAULT_TEMP_FILE_NAME;
    }

    si.hStdError = CreateFileA(file_name.c_str(), GENERIC_WRITE, FILE_SHARE_READ, &sa, CREATE_ALWAYS, 0, NULL);
    si.hStdOutput = CreateFileA(file_name.c_str(), GENERIC_WRITE, FILE_SHARE_READ, &sa, CREATE_ALWAYS, 0, NULL);

    if (si.hStdOutput == NULL) {
        MessageBox(NULL, "Error checking for the installed Java Virtual Machine, operation aborted", "Launching", MB_ICONERROR | MB_OK);
        return false;
    }

    if (!CreateProcessA(NULL, "java -version", NULL, NULL, true, 0, NULL, NULL, &si, &pi)) {
        MessageBox(NULL, "It appears that neither you have the Java Virtual Machine installed on your system nor its properly configured", "Launching", MB_ICONERROR | MB_OK);
        ErrorExit("CreateProcessA");
        return false;
    }

    WaitForSingleObject( pi.hProcess, INFINITE );

    if( si.hStdError ) {
        CloseHandle( si.hStdError );
    }
    if( si.hStdOutput ) {
        CloseHandle( si.hStdOutput );
    }

    // "Parse" the txt file
    std::ifstream ifs(file_name.c_str());
    std::string line;
    int versionIndex = 0;
    int value[2];
    value[0] = value[1] = 0;

    while (std::getline(ifs, line)) {
        const std::string JAVA_VERSION_STRING = "java version ";
        size_t index = line.find(JAVA_VERSION_STRING.c_str());
        if (index != std::string::npos) { 
            // get either the 1.X.X or 2.X.X
            std::string version = line.substr(JAVA_VERSION_STRING.size());

            std::string::iterator ite = version.begin();
            std::string::iterator end = version.end();
            std::string tmp = "";
            for (; ite != end; ++ite) { 
                char c = *ite;
                if (isdigit(c)) { 
                    tmp += c;
                } else if (c == '.') {
                    value[versionIndex] = atoi(tmp.c_str());
                    versionIndex++;
                    tmp = "";
                    // If we have, version, major and minor, then another set of digits is unnecessary
                    if (versionIndex == 2) 
                        break;
                }
            }
            std::cout << "detected java version: " << (value[0]) << ", " << (value[1]) << std::endl;
        }
    }

    // Delete the temp file
    DeleteFile(file_name.c_str());
} 
```

Hope this can be of any help

# c++ - 是否可以恢复为“默认”全局命名空间？

> ID：13851751
> 
> 赞同：4
> 
> 时间：2012-12-13T01:56:00.043
> 
> 标签：c++, namespaces, using-directives

基本上，我正在使用一些提供的具有以下格式的头文件：

```
#include <iostream>

using namespace std;

class bar
{
public:
    void printSomething(void)
    {
        cout << "This is an example." << endl;
    }
} 
```

我的问题是，由于我无法修改提供的标头，如何剥离`std`文件中的命名空间并返回默认的全局命名空间？我已经尝试过“ `using namespace ::;`”和“ `using namespace ;`”，但编译器对其中任何一个都不满意。关于如何用命名空间强制一个干净的石板有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T01:59:51.003

你不能。这就是为什么该`using namespace`条款如此多变的原因。不过，您可以将这些标头包含在另一个命名空间中：

```
namespace bleh {
    #include "library_that_uses_evul_using_namespace.h"
} 
```

那只会污染`bleh`命名空间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T01:58:56.630

您无法摆脱“使用命名空间”。您可以有多个“使用命名空间”语句，它们是相加的。

但是，您可以将恶意标头包装到它自己的命名空间中：

```
namespace Crap
{
    #include "maliciousHeader.h"
} 
```

这样，“使用命名空间标准”仅适用于命名空间废话。我建议将上述代码放入另一个标题中，这是您实际包含在程序中的标题。

# java - 如何设置字符串等于.txt文件中的文本

> ID：13851752
> 
> 赞同：0
> 
> 时间：2012-12-13T01:56:06.077
> 
> 标签：java, string, variables, text

> **可能重复：**
> [如何从文件内容创建 Java 字符串](https://stackoverflow.com/questions/326390/how-to-create-a-java-string-from-the-contents-of-a-file)

我有一个要保存在字符串变量中的 .txt 文件。我用`File f = new File("test.txt");`. 现在我试图把它的内容放在一个`String`变量中。我找不到如何做到这一点的明确解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:00:52.597

使用[`Scanner`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)：

```
Scanner file = new Scanner(new File("test.txt"));

String contents = file.nextLine();

file.close(); 
```

当然，如果您的文件有多行，您可以`nextLine`多次调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:10:00.657

```
BufferedReader br = new BufferedReader(new FileReader("file.txt"));

try {
    StringBuilder sb = new StringBuilder();
    String line = br.readLine();

    while (line != null) {
        sb.append(line);
        sb.append("\n");
        line = br.readLine();
    }
    String everything = sb.toString();
} finally {
    br.close();
} 
```

# python - 如何将在推送队列的后端创建的 Channel API 令牌发送到 Python 中的前端？

> ID：13851757
> 
> 赞同：1
> 
> 时间：2012-12-13T01:56:24.897
> 
> 标签：python, google-app-engine, backend, channel-api

我正在尝试将 Channel API 消息从 GAE python 后端推送队列发送到客户端。[这个问题](https://stackoverflow.com/questions/8292540/python-google-app-engine-javascript-channel-api-to-call-back-end)的答案是，必须在后端进程中创建通道才能将消息从后端发送到客户端。答案表明

> “但是，您可以在后端实现一个 servlet，该 servlet 调用 createChannel 并将其返回到您的前端，以便包含在您的前端呈现的 javascript 中。”

我的问题是：如何将后端在推送队列中创建的令牌发送到前端，以便将令牌发送给客户端？我使用以下内容创建后端推送队列：

```
taskqueue.Task(url='/flow/', params = {'json_request': json_request}, target='flowbackend').add(queue_name='flow-queue') 
```

而且我无法弄清楚如何轻松地将信息发送回前端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:31:09.823

您想在后端创建一个频道有点奇怪。最明显的方法是将其存储在数据存储中的某个位置，并有一个单独的 URL，您的 HTTP 客户端可以轮询该 URL 以获取令牌。

如果可以的话，我建议在将任务入队之前在您的 GAE 前端创建通道，然后将令牌与任务一起发送，并将令牌嵌入到客户端的 HTTP 响应中，然后客户端和后端都可以通信.

# python - 从 models.CharField 继承的 Django 有选择给出错误

> ID：13851759
> 
> 赞同：1
> 
> 时间：2012-12-13T01:56:48.960
> 
> 标签：python, django, forms, models

我有两个用于应用程序逻辑的类。一个叫做方向，另一个叫做指南针。方向是指南针的成员。我要实现的是一个包装了 Direction 类的 modelField，我可以将其用作 Compass 模型中的成员。DirectionField 类继承自 models.CharField 并从父类中设置选项。

我认为这是一个不错的设计，因为我可以在许多其他类中使用 DirectionField，而且它很容易维护。但是，当我在 Django 的管理页面中保存 Compass 模型时出现错误。错误是“值不是一个有效的选择”。

我使用 Python 2.7 和 Django 1.4。

有人可以查看此问题并提出问题所在以及我如何解决它。

这是来源：

```
class Direction():
    choices = (('N','North'),
               ('S','South'),
               ('E','East'),
               ('W','West'),)

    def __init__(self, value=None):
        self.value = value

class DirectionField(models.CharField):

    def __init__(self, *args, **kwargs):
        super(DirectionField, self).__init__(choices=Direction.choices,
                                             *args, **kwargs)

    __metaclass__ = models.SubfieldBase

    def to_python(self, value):
        if isinstance(value, Direction) or value is None:
            return value
        return Direction(value)

    def get_prep_value(self, value):
        return value.value

class Compass(models.Model):
    name = models.CharField(max_length=20)
    direction = modelFields.DirectionField(max_length=10)
    class Meta:
        db_table = 'campass'
    def __unicode__(self):
        return "%s/%s" % (self.name, self.direction)    

class CompassForm(forms.ModelForm):
    class Meta:
        model = Compass
    def clean(self):
        return self.cleaned_data 
```

保存 Compass 时出现的管理页面（或表单视图）错误：

```
Value <src.bo.tgEnum.Direction instance at 0x03E97E18> is not a valid choice. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:35:15.643

要通过字段验证，您需要将此函数添加到 Direction 类：

```
def __eq__(self, value):
    return self.value == value

def __len__(self):
    return len(self.value) 
```

因为它将值与选择键进行比较，并且值具有字典类型，所以键是字符串。

# ruby-on-rails - 防止 Rails 转义 url 参数中的特殊字符

> ID：13851760
> 
> 赞同：1
> 
> 时间：2012-12-13T01:57:06.377
> 
> 标签：ruby-on-rails, escaping

我有如下请求：

/campaigns/info/2.json?query=campaign_info&resource=2&ts=1355348205& **sig=%2B%5Cx97%5Cx19D%5C%22%5Cx15%5B%5CxE7J%5CtyTiA*%3D%3A%2B%5CxCE'8q%5CxF9% 20Fl%24B%5Cx8D%5Cx118%5Cr%25%5CxFC%5Cx98-%5CxA33%5CxF4%5Cx0F!w%24%5CxD6d4m%5Cx1D%5CxE5J%2B%5Ce%5Cx94%5B%5Cx88j%5Cx1A%5CxB8g%5Ca%D %3Bf** &api_key=7XFtqgcVROs17xOEcjum

当我的 rails 服务器收到此请求时，它会确定 params[:sig] 为：

```
+\\x97\\x19D\\\"\\x15[\\xE7J\\tyTiA*=:+\\xCE'8q\\xF9 Fl$B\\x8D\\x118\\r%\\xFC\\x98-\\xA33\\xF4\\x0F!w$\\xD6d4m\\x1D\\xE5J+\\e\\x94[\\x88j\\x1A\\xB8g\\a]0;f 
```

当我真的希望 params[:sig] 成为：

```
+\x97\x19D\"\x15[\xE7J\tyTiA*=:+\xCE'8q\xF9 Fl$B\x8D\x118\r%\xFC\x98-\xA33\xF4\x0F!w$\xD6d4m\x1D\xE5J+\e\x94[\x88j\x1A\xB8g\a]0;f 
```

如何获得第二个输出？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-02-05T14:02:23.863

我终于做到了：

```
while str.gsub!(/[^0-9A-Za-z]/, ''); end 
```

但是因为我只需要 0-9 和 az。希望这可以帮助！

# css - CSS 列底部的额外空间

> ID：13851773
> 
> 赞同：1
> 
> 时间：2012-12-13T01:59:26.540
> 
> 标签：css, multiple-columns, column-count

我有一个里面有图像的容器。我使用 CSS 列和媒体查询来确定我的布局。我在底部放了一个段落标签，并注意到它底部有多余的空间。这就是我在这个小提琴中所说的。[http://jsfiddle.net/sEe7x/11/](http://jsfiddle.net/sEe7x/11/)。奇怪的是发生在黄色和橙色的断点处。有谁知道是什么原因造成的？

这是我的代码

```
-- HTML --

<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width" />

    <title>Portraits</title>
    <meta name="description" content="">

    <link href='http://fonts.googleapis.com/css?family=Raleway:200' rel='stylesheet' type='text/css'>

</head>
<body class="photography">
    <nav class="site_navigation cf">
    <ul id="nav_drop" class="nav_links cf">
        <li class="nav_home"><a href="#">Home</a></li>
        <li class="nav_blog"><a href="#">Blog</a></li>
        <li class="nav_photography"><a href="#">Photography</a></li>
        <li class="nav_projects"><a href="#">Projects</a></li>
        <li class="nav_contact"><a href="#">Contact</a></li>
    </ul>
</nav>
        <div class="main photography_wrapper">        

            <h1>Portraits</h2>

            <div class="gallery_wrapper">
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a>                
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
            </div>

            <p>Random collection of portraits.</p>

            <div class="more_galleries">
                <h2>More Galleries</h2>
                <div class="more_gallery_photos">
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a> 
                    <a href="#"><img src="http://placedog.com/400/400" alt=""></a>                </div>
            </div>
        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://dev.danielcgold.com/js/selectnav.min.js"></script>
    <script src="http://dev.danielcgold.com/js/functions.js"></script>

</body>
</html>​

-- CSS --

* {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -ms-box-sizing: border-box;
    box-sizing: border-box;
}

.cf:before,.cf:after {
    content: "";
    display: table;
}

.cf:after {
    clear: both;
}

.cf {
    *zoom: 1;
}

img {
    max-width: 100%;
}

body {
    font-family: Arial, sans-serif;
    font-size: 100%;
    background: #fffff6;
    margin: 0;
    padding: 2em;
    padding-top: 6.375em;
    color: #252525;
}

h1,h2,h3,h4,h5,h6 {
    font-family: serif;
    font-weight: normal;
    margin-bottom: 1em;
}

h1 {
    font-size: 3em;
}

p {
    line-height: 1.5em;
    word-wrap: break-word;
}

strong {
    font-family: 'pt_sans_captionbold', sans-serif;
    font-weight: normal;
}

a {
    color: #ff830a;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

.selectnav {
    display: none;
}

.site_navigation {
    font-family: 'Raleway', sans-serif;
    font-weight: 200;
    background: #fff;
    padding: 1em;
    border-bottom: 0.063em solid rgba(0,0,0,0.15);
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 4.375em;
    -moz-box-shadow: rgba(0,0,0,0.15) 0 0 0.4em;
    -webkit-box-shadow: rgba(0,0,0,0.15) 0 0 0.4em;
    -o-box-shadow: rgba(0,0,0,0.15) 0 0 0.4em;
    box-shadow: rgba(0,0,0,0.15) 0 0 0.4em;
}

.site_navigation a {
    text-decoration: none;
    color: #444;
    display: block;
    margin: .5em;
    padding-bottom: .25em;
}

.nav_links {
    list-style: none;
    margin: 0;
    padding: 0;
    float: right;
}

.nav_links li {
    float: left;
}

.gallery_wrapper {
    -moz-column-count: 5;
    -webkit-column-count: 5;
    -o-column-count: 5;
    column-count: 5;
    line-height: 0;
}

.more_galleries {
    margin-top: 6em;
}

.more_gallery_photos {
    -moz-column-count: 5;
    -webkit-column-count: 5;
    -o-column-count: 5;
    column-count: 5;
}

.more_gallery_photos a {
    display: block;
    margin-bottom: 1em;
}

.gallery_wrapper a {
    display: block;
    margin-bottom: 1em;
}

.gallery_wrapper img {
    display: block;
    height: auto;
}

@media screen and (max-width: 60em) {

    .gallery_wrapper {
        -moz-column-count: 4;
        -webkit-column-count: 4;
        -o-column-count: 4;
        column-count: 4;
    }

    .more_gallery_photos {
        -moz-column-count: 4;
        -webkit-column-count: 4;
        -o-column-count: 4;
        column-count: 4;
    }

    .gallery_wrapper a {
        margin-bottom: 1em;
    }

    .more_gallery_photos a {
        display: block;
        margin-bottom: 1em;
    }
}

@media screen and (max-width: 48em) {

    .nav_links {
        float: left;
    }

    .gallery_wrapper {
        -moz-column-count: 3;
        -webkit-column-count: 3;
        -o-column-count: 3;
        column-count: 3;
    }

    .more_gallery_photos {
        -moz-column-count: 3;
        -webkit-column-count: 3;
        -o-column-count: 3;
        column-count: 3;
    }

    .gallery_wrapper a {
        margin-bottom: 1em;
    }

    .more_gallery_photos a {
        display: block;
        margin-bottom: 1em;
    }
}

@media screen and (max-width: 30em) {
    .site_navigation {
        height: 3.5em;
    }

    .nav_links {
        display: none;
    }

    .selectnav {
        display: block;
        margin-left: 1.5em;
    }

    .gallery_wrapper {
        -moz-column-count: 1;
        -webkit-column-count: 1;
        -o-column-count: 1;
        column-count: 1;
    }

    .more_gallery_photos {
        -moz-column-count: 2;
        -webkit-column-count: 2;
        -o-column-count: 2;
        column-count: 2;
    }

    .more_gallery_photos a {
        display: block;
        margin-bottom: 1em;
    }
}​
​ 
```

编辑：第一个小提琴解决了。我更新了一个 JS fiddle，我的真实代码被剥离并重新创建了这个问题。我使用 SASS，所以 CSS 是输出。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T02:15:58.517

### 这是因为图像`<img />`标签呈现为`inline-block`.

```
img {display: block;} 
```

### 小提琴：http: [//jsfiddle.net/nUGfe/](http://jsfiddle.net/nUGfe/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T02:03:45.050

添加`display: block`到您的图像将解决此问题。

```
img { display: block; } 
```

**更新：** 这是一个更新的小提琴：http: [//jsfiddle.net/sEe7x/2/](http://jsfiddle.net/sEe7x/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-29T20:58:06.393

这对我有帮助

将他添加到列数块中：

```
:after {
      content: '';
      display: block;
      width: 100%;
      height: 20px;
      margin-top: -20px;
    } 
```

# python - Python 模块级常量

> ID：13851776
> 
> 赞同：2
> 
> 时间：2012-12-13T01:59:48.743
> 
> 标签：python, module, python-2.7, package

我正在创建我的第一个相当复杂的模块，并且像 wx 模块一样，我希望提供各种常量来简化程序员设置样式的任务。

假设以下目录结构：

```
Module
   +-__init__py
   +- Frame.py 
```

和**init** .py的内容

```
__ALL__=["Frame.py"]
FRAME_DEFAULT_SIZE = (640, 480)
FRAME_DEFAULT_TITLE = "Some Simple Title" 
```

然后在 Frame.py

```
class Frame(object)
    """Some docstrings go here
    """
    def __init__(self, parent, ID=-1,title=HOW DO I REFERENCE MY CONSTANT,
                 size = HOW DO I REFERENCE THIS CONSTANT):
        etc ... 
```

如果我要导入我的模块以在一段程序代码中使用，则常量将分别作为 Module.FRAME_DEFAULT_SIZE 和 Module.FRAME_DEFAULT_TITLE 使用。

但是，当它们在单独的文件中定义时，我如何将它们作为应该位于模块名称空间中的类定义的一部分来引用？

我意识到常量（如果命名得当并且使用得当）应该只适用于父类及其子类，所以我可以在 Frame.py 文件中实例化它们。但是如何做到这一点呢？

任何帮助在这里表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:27:25.477

导入`Module`并访问它。这部分不会因为您在子模块中而改变。

# mysql - 我可以在 2 列上有 2 个唯一键但不能组合吗？

> ID：13851779
> 
> 赞同：2
> 
> 时间：2012-12-13T01:59:54.793
> 
> 标签：mysql, sql, multiple-columns, unique-key

我有一张桌子

```
table userinfo (
     user,
     email,
     address,
     primary key(user)
); 
```

在此表中，“用户”字段与插入时的“电子邮件”相同。但是用户可以稍后更改他们的“电子邮件”。所以我希望电子邮件也是唯一的，如果表中已经存在电子邮件，则插入查询失败。

可能吗？

在此先感谢，这只是一个例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T02:03:20.733

是的，添加一个`UNIQUE`约束

```
table userinfo (
     user,
     email,
     address,
     primary key(user),
     CONSTRAINT tb_uq UNIQUE (email)
); 
```

该表现在将具有 unique`USER`和 unique `Email`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T02:03:54.403

您可以在一个表上创建多个索引。因此，如果您仅在所需的列上创建 2 个唯一索引，它将按照您的意愿工作。如果您在多个列上创建 1 个索引，则这些列的组合需要是唯一的。

# c# - 使用静态类作为其他对象的集合/容器

> ID：13851780
> 
> 赞同：0
> 
> 时间：2012-12-13T02:00:28.447
> 
> 标签：c#, automated-tests, mstest, coded-ui-tests

我有一个设计问题。我正在使用某人编写并正在维护的编码 UI 测试框架。我确信这种设计方式不正确，但我想我会得到一些其他的意见。它基本上是一个大型静态类，其唯一目的是创建和返回其他对象。

好/坏...为什么？我正在游说进行一项非常重要的重构，并希望我的经理令人信服地取悦我的情况。

```
public static class ParentClass
{
    private static ChildClass1 childClass1;
    private static ChildClass2 childClass2;
    // 10+ more of the same

    // Properties
    public ChildClass1 ChildClass1
    {
        get 
        {
            if (childClass1 == null)
            {
                childClass1 = new ChildClass1();
            }
            return childClass1;
        }
     }

    public ChildClass2 ChildClass2
    {
        get 
        {
            if (childClass2 == null)
            {
                childClass2 = new ChildClass2();
            }
            return childClass2;
        }
    }
    // 10+ more of the same
}

[TestClass]
public class TestClass1
{
    [TestMethod]
    public void TestMethod1()
    {
        var x = ParentClass.ChildClass1.SomeMethod();
        Assert.IsNotNull(x);
    }

    [TestMethod]
    public void TestMethod2()
    {
        var x = ParentClass.ChildClass2.SomeMethod();
        Assert.IsNotNull(x);
    }

    // 10+ more of the same
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:15:43.207

这有点像单例模式，但从提供的代码中并不清楚为什么要这样设计。

```
var x = ParentClass.ChildClass1.SomeMethod(); 
```

可以很容易地替换为

```
var x = new ChildClass1().SomeMethod(); 
```

然后你可以摆脱`ParentClass.ChildClass1`和`ParentClass.childClass1`除非`ParentClass.ChildClass1`被多次使用，并将状态从方法调用传递到方法调用。

但是虽然这看起来并不优雅并且可能过于冗长，但我不会认为这是一个主要问题。

就我个人而言，我会以这种方式实现它，但很难判断这是否适用于所有省略的代码。

```
[TestClass]
public class TestClass1
{
    private static void ExecuteTestCore<T>() where T : new(), IHaveAMethod
    {
        var x = new T().SomeMethod();

        Assert.IsNotNull(x);
    }

    [TestMethod]
    public void TestMethod1()
    {
        TestClass1.ExecuteTestCore<ChildClass1>();
    }

    [TestMethod]
    public void TestMethod2()
    {
        TestClass1.ExecuteTestCore<ChildClass2>();
    }

    // 10+ more of the same.
}

internal interface IHaveAMethod
{
    void SomeMethod();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:12:03.107

在不知道如何使用的情况下很难判断这是“好”还是“坏”，但我建议查看 IoC 容器。他们提供这种类型的功能以及更多开箱即用的功能

一般来说，如果将 IoC 容器用作依赖注入的一部分，它会非常有用。如果您不使用 DI，那么这个静态类可能不是很有帮助

[https://stackoverflow.com/questions/2515124/whats-the-simplest-ioc-container-for-c](https://stackoverflow.com/questions/2515124/whats-the-simplest-ioc-container-for-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T02:13:50.500

对于我所看到的这个类是一个“单例容器”，我认为这可以。如果存在更好的方法来做到这一点？我认为这取决于使用的上下文。

有用的链接： [SingletonPattern](http://en.wikipedia.org/wiki/Singleton_pattern) [ObjectFactory](http://en.wikipedia.org/wiki/Factory_%28software_concept%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T02:15:50.407

如果您很难向西装推荐 IoC（正如其他人所建议的那样）.. 向他们展示更小的代码？

```
public class ParentClass<T> where T : class, new() {
    private static T _instance = null;
    private static readonly object _locker = new object();

    public static T GetObject() {
        if (_instance == null) {
            lock (_locker) {
                if (_instance == null) {
                    return new T();
                }
                return _instance;
            }
        }
    }
} 
```

（免责声明：未经测试。可能也不是最好的线程安全实现）

另外：目前的设计很难维护......并且违反了 DRY。

# java - 为什么我不能使用 DefaultTableModel？我错过了什么明显的东西吗？（爪哇）

> ID：13851788
> 
> 赞同：0
> 
> 时间：2012-12-13T02:01:32.440
> 
> 标签：java, swing, jtable, defaulttablemodel

这是我的代码：

```
import javax.swing.*; 
import java.awt.*; 
import java.awt.event.*;

 class Test{ 
        static CardLayout cardLayout;  
        static JPanel card = new JPanel();

        public static void main(String[] args) {
            JFrame frame = new JFrame("AddressBook");
            JPanel contentPane = (JPanel)frame.getContentPane();
            card.setLayout(cardLayout = new CardLayout());                          

            JPanel cardTop = new JPanel();
            DefaultTableModel model = new DefaultTableModel();
            model.addColumn("Name");
            model.addColumn("Number");
            String[] John = {"John", "1234"};
            model.addRow(John);
            String[] Beth = {"Beth", "4444"};
            model.addRow(John);
            JTable table = new JTable(model);       
            JScrollPane jsp = new JScrollPane(table);
            cardTop.add(jsp);

            card.add("Card Top", cardTop);
            contentPane.add(card);

            frame.setVisible(true);
            frame.setSize(507, 191);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setResizable(false);
        }
    } 
```

当我尝试编译时，它说它无法识别 DefaultTableModel。此外，上面的代码是我的主要代码的一部分，我确信我已经导入了正确的库。

这是错误：

```
Test.java:15: error: cannot find symbol
            DefaultTableModel model = new DefaultTableModel();
            ^
  symbol:   class DefaultTableModel
  location: class Test
Test.java:15: error: cannot find symbol
            DefaultTableModel model = new DefaultTableModel();
                                          ^
  symbol:   class DefaultTableModel
  location: class Test
2 errors 
```

请帮忙？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T02:42:35.043

```
import javax.swing.*; 
import java.awt.*; 
import java.awt.event.*; 
```

还不够。

`DefaultTableModel`存在于`javax.swing.table`包中，您需要将其包含在您的导入中...

```
import javax.swing.table.* 
```

# php - 新手 - php - 测试“空”字符串

> ID：13851793
> 
> 赞同：2
> 
> 时间：2012-12-13T02:02:10.087
> 
> 标签：php, compare, quotes, zero

> **可能重复：**
> [php中的双等号和三等号](https://stackoverflow.com/questions/8547487/double-equals-and-tripple-equals-in-php)

我正在尝试针对各种非空的“空”变量进行测试。经常出现的一种情况是

> 如果字符串等于“''”（即两个单引号字符），则执行 xyz，否则执行 abc

我有不同类型的变量，可能是 0、'0'（即字符 '0'、ASCII 48，而不是值 0）和“”（空字符串）。所有这些都与“''”相同，即包含两个单引号的字符串。很明显，它们不一样！一个是两个字符的字符串——ASCII 39、ASCII 39——其他的可能是 0、ASCII 48 等。

我已经想出了使用 is_numeric() 等的变通方法，但我不禁想到必须有更好的方法。处理这类事情的首选方法是什么？

非常感谢您对这个看似非常幼稚的问题的耐心。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T02:11:04.393

您还可以使用`if(!empty($string))` [http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)获取更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T02:05:41.037

您可以使用相同的运算符 (===) 来检查类型和值。有关详细信息，请参阅[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T02:05:14.320

如果您进行相同的检查

```
if ($string === '') 
```

然后你会得到你想要的结果。

有关运算符类型及其影响的更多详细信息，请参阅[此先前的 SO 答案](https://stackoverflow.com/questions/2063480/the-3-different-equals)。

# python - 如何在 Python 中实现详细的正则表达式

> ID：13851794
> 
> 赞同：15
> 
> 时间：2012-12-13T02:02:12.440
> 
> 标签：python, regex

我正在尝试在 Python (2.7) 中使用详细的正则表达式。如果这很重要，我只是想让它更容易回去，并在未来的某个时候更清楚地理解这个表达。因为我是新手，所以我首先创建了一个紧凑的表达式，以确保我得到了我想要的。

这是紧凑的表达式：

```
test_verbose_item_pattern = re.compile('\n{1}\b?I[tT][eE][mM]\s+\d{1,2}\.?\(?[a-e]?\)?.*[^0-9]\n{1}') 
```

它按预期工作

这是详细表达式

```
verbose_item_pattern = re.compile("""
\n{1}       #begin with a new line allow only one new line character
\b?       #allow for a word boundary the ? allows 0 or 1 word boundaries \nITEM or \n  ITEM
I        # the first word on the line must begin with a capital I
[tT][eE][mM]  #then we need one character from each of the three sets this allows for unknown case
\s+       # one or more white spaces this does allow for another \n not sure if I should change it
\d{1,2}    # require one or two digits
\.?        # there could be 0 or 1 periods after the digits 1\. or 1
\(?        # there might be 0 or 1 instance of an open paren
[a-e]?      # there could be 0 or 1 instance of a letter in the range a-e
\)?         # there could be 0 or 1 instance of a closing paren
.*          #any number of unknown characters so we can have words and punctuation
[^0-9]     # by its placement I am hoping that I am stating that I do not want to allow strings that end with a number and then \n
\n{1}     #I want to cut it off at the next newline character
""",re.VERBOSE) 
```

问题是当我运行详细模式时出现异常

```
Traceback (most recent call last):
File "C:/Users/Dropbox/directEDGAR-Code-Examples/NewItemIdentifier.py", line 17, in <module>
 """,re.VERBOSE)
 File "C:\Python27\lib\re.py", line 190, in compile
  return _compile(pattern, flags)
 File "C:\Python27\lib\re.py", line 242, in _compile
 raise error, v # invalid expression
 error: nothing to repeat 
```

恐怕这会很愚蠢，但我无法弄清楚。我确实采用了我的详细表达式并逐行压缩它，以确保压缩版本与详细版本相同。

错误消息指出没有什么可重复的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-13T02:41:56.173

*   在定义正则表达式模式时，使用原始字符串文字是一个好习惯。许多正则表达式模式使用反斜杠，并且使用原始字符串文字将允许您编写单个反斜杠，而不必担心 Python 是否会将您的反斜杠解释为具有不同的含义（并且在这些情况下必须使用两个反斜杠）。

*   `\b?`不是有效的正则表达式。这是说 0 或 1 字边界。但要么你有一个单词边界，要么你没有。如果你有一个单词边界，那么你有 1 个单词边界。如果您没有单词边界，那么您有 0 个单词边界。所以`\b?`（如果它是有效的正则表达式）总是正确的。

*   正则表达式区分字符串的结尾和行的结尾。（一个字符串可能由多行组成。）

    *   `\A`仅匹配字符串的开头。
    *   `\Z`仅匹配字符串的结尾。
    *   `$`匹配字符串的结尾，以及 re.MULTILINE 模式下的行尾。
    *   `^`匹配字符串的开头，以及 re.MULTILINE 模式下的行开头。

* * *

```
import re
verbose_item_pattern = re.compile(r"""
    $            # end of line boundary
    \s{1,2}      # 1-or-2 whitespace character, including the newline
    I            # a capital I
    [tT][eE][mM] # one character from each of the three sets this allows for unknown case
    \s+          # 1-or-more whitespaces INCLUDING newline
    \d{1,2}      # 1-or-2 digits
    [.]?         # 0-or-1 literal .
    \(?          # 0-or-1 literal open paren
    [a-e]?       # 0-or-1 letter in the range a-e
    \)?          # 0-or-1 closing paren
    .*           # any number of unknown characters so we can have words and punctuation
    [^0-9]       # anything but [0-9]
    $            # end of line boundary
    """, re.VERBOSE|re.MULTILINE)

x = verbose_item_pattern.search("""
 Item 1.0(a) foo bar
""")

print(x) 
```

产量

```
<_sre.SRE_Match object at 0xb76dd020> 
```

（表示有匹配）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T02:57:59.203

正如评论中所说，即使使用三引号，您也应该转义反斜杠或使用原始字符串。

```
verbose_item_pattern = re.compile(r"""
... 
```

# php - ci-merchant authorize.net AIM - 完整的工作示例

> ID：13851795
> 
> 赞同：1
> 
> 时间：2012-12-13T02:02:16.507
> 
> 标签：php, authorize.net, ci-merchant

谁能指出我使用 authorize.net AIM 驱动程序的文档示例。我已成功安装 spark (ci-merchant)，但我无法弄清楚

*   如何通过简单交易的付款金额，

*   为什么我的**回应-> `message()`；**正在返回一个空字符串。

此驱动程序的文档应位于[http://ci-merchant.org/gateways/authorize-net-aim.html](http://ci-merchant.org/gateways/authorize-net-aim.html)但不是。

任何帮助指出我使用此驱动程序的工作示例将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T09:28:26.057

```
Merchant_response Object
(
    [_status:protected] => failed
    [_message:protected] => 
    [_reference:protected] => 
    [_data:protected] => 
    [_redirect_url:protected] => 
    [_redirect_method:protected] => GET
    [_redirect_message:protected] => 
    [_redirect_data:protected] => 
) 
```

# web-services - 我可以使用 SSIS 提交文件吗

> ID：13851797
> 
> 赞同：0
> 
> 时间：2012-12-13T02:02:51.657
> 
> 标签：web-services, ssis, attachment

有人问我是否可以通过 Web 服务向客户提供文件。我们经常使用 Scribe 向 Web 服务发送数据，但我无法发送附件。任何人都知道我是否可以使用 SSIS（或其他工具）做这样的事情：

这是客户端用来上传 purl 更新的方法。这是以 CSV 格式上传的单个文件，第一行是标题。该方法需要五 (5) 个参数：

```
Parameters (1) a string that is the login name.
Parameters (2) a string that is used for the password.
Parameters (3) a string that is used to specify which application.
Parameters (4) a string that is the file name. This is used to identify a specific file upload.
Parameters (5) an array of bytes that is the content of the file.
Parameters (6) an integer that defines the length of the file upload. 
RETURNS an integer that will return the number of items successful uploaded or a negative number that returns an error.
Sample:
    //  Connect to the Web Service
    PurlService.ServiceFile     service   = new PurlService.ServiceFile();
    // Test the method
    string            login          = “mylogin”;
    string            password       = “mypassword”;
    string            application    = “FSI”;
    string            filename       = “myfilename.csv”;
    byte []           bytes          = new byte[file.ContentLength];
    file.InputStream.Read( bytes, 0, file.ContentLength)
    int               returnValue    = service.UploadFile(login, password, application, fileName, bytes, bytes.Length );    //  If successful, the returnValue will be a text message. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:19:59.023

SSIS 提供对 .NET 库的访问，因此如果您可以在控制台应用程序中编写它，则可以在 SSIS 中进行（我有一个播放 MP3 的 SSIS 包只是为了证明这一点）。[脚本任务](http://msdn.microsoft.com/en-us/library/ms141752.aspx)是您进行 Web 服务调用的方式。有一个内置的 Web 服务任务，但它很垃圾。上面的代码对于 Web 服务调用看起来有点正确，尽管我的都是 Windows Auth，所以我设置了不同的凭据。

工作流程方面，我希望您的包看起来像`Data Flow`生成 CSV 提取，然后是脚本任务来调用您的 Web 服务，然后可能是文件任务来存档 CSV 或执行 SQL 任务来记录传输细节在一张桌子上。

# objective-c - 这三种声明变量的方式有什么区别？

> ID：13851798
> 
> 赞同：0
> 
> 时间：2012-12-13T02:03:05.230
> 
> 标签：objective-c, memory-management, properties

我正在学习Objective-C，只是好奇。我可以在这些地方创建一个对象`NSString`，请提供任何其他对象。对我来说，他们都做同样的事情。我不知道他们之间有什么区别。它存储在哪里？我可以从哪里访问它？有什么优势？

1)

```
// .h
@interface ...
@property (strong,nonatomic) NSString *text;
@end 
```

2)

```
// .h
@interface ... { 
NSString *text
}
@end 
```

3)

```
// .m
@interface ... ()
@property (strong,nonatomic) NSString *text;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:57:57.907

首先，我的回答是基于最新的 Clang 编译器，旧版本的工作方式略有不同。

因此，您也没有在其中*创建*对象。你甚至没有在其中两个中**声明**一个对象。

在第一种情况下，您实际上是在告诉编译器您需要公开一个名为`text`type的属性`NSString`。编译器所做的是为您声明一个实例变量`_text`（顺便说一句，您可以毫无问题地访问它）以及获取和设置该实例变量所需的方法。正如您所看到的，存储仍然是内部的，您只需为您设置 getter 和 setter。

在第二种情况下，您实际上是在自己声明一个实例变量（ivar），就像编译器对`_text`. 习惯于在它前面加上`_`. 存储仍然是内部的。最重要的是，您无法从外部访问您的 ivar，因为它没有 getter 或 setter，并且隐式声明是`@private`.

在第三种情况下，您创建一个匿名类别（因此是空括号），它将属性添加到您的类。对此的存储有点难以解释/更长，如果您对此感到好奇，可以搜索 Apple 文档，查看类别是什么等等。在这种情况下，您只能从您的类中访问您的属性，这使得它在某种程度上是多余的（getter 和 setter），您可以将其声明为 ivar。

您还可以像这样声明您的 ivars：

```
@interface GenericViewController : UIViewController{
    NSString * text;
}

@end

@implementation GenericViewController{
    NSString * text;
}

@end 
```

以上两者都有本地存储和私有可见性（不能从外部访问）。两者的区别在于实现中声明的实例变量是隐式隐藏的，不能用@public、@protected 和@private 改变可见性。如果您使用这些指令，您将不会收到编译器错误，但会被忽略。

# perl - Perl CGI 从文件向浏览器显示图像

> ID：13851799
> 
> 赞同：2
> 
> 时间：2012-12-13T02:03:10.873
> 
> 标签：perl, cgi

朋友们，
我一直在网上搜索使用 Perl 将图像显示到网络浏览器的解决方案，但没有找到适合我的解决方案。
我尝试了可能的解决方案，例如：
[如何使用 Perl 显示图像](https://stackoverflow.com/questions/8896481/how-to-display-an-image-with-perl)
[输出图像数据](http://docstore.mik.ua/orelly/linux/cgi/ch13_02.htm)
[从脚本返回图像](http://www.youtube.com/watch?v=BEv0iw5uxq4)
，但没有一个适用于我正在做的事情。我想拒绝客户端访问图像（或者甚至只是将图像文件放在 www 根目录之外）并将其发送到服务器端。
这是我正在做的一个例子：

在我的主 perl 文件中：

```
...
my $query = CGI->new();

sub main {
### This grabs page content from a module, depending on the page name.
### The module returns the HTML.
my $html = get_page('page', 'session');

### Perform any special conditionals here before printing the header...

print $query->header(some cookie/session data here);
print $html

} 
```

在其中一个模块中：

```
sub return_page_content {

return <<HTML;
<html>
  <body>
    <img src="GET IMAGE HERE..." />
  </body>
</html>
HTML
} 
```

我曾考虑在临时目录位置创建图像的副本，但这似乎会破坏将图像保持在客户端访问之外的整个目的。
可能的解决方案不会生成图像。我不确定从这里去哪里，所以我希望这里有人有想法。太感谢了！
如果我需要提供其他信息，请告诉我。我觉得这可能对很多人都有好处。我希望至少 ;-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:21:37.737

对于简单的“将文件发送到浏览器解决方案”，只需向浏览器发送正确的标题（让浏览器知道接下来会发生什么），然后打开图像并将内容打印到 STDOUT。

```
select(STDOUT); $| = 1;   #unbuffer STDOUT
print "Content-type: image/png\n\n";

open (IMAGE, '<', '/image_outside_webroot/image.png');
print <IMAGE>;
close IMAGE; 
```

一旦工作正常，请查看[ImageMagick](http://www.imagemagick.org/script/perl-magick.php)。您可以进行各种即时、有趣的图像处理（调整大小、着色等）

您的 cgi 脚本将包含如下所示的代码：

```
select(STDOUT); $| = 1;   #unbuffer STDOUT

my $image = Image::Magick->new();
my $x = $image->Read(filename =>"/images_outside_web_root/image1.png");

#some manipulation of the image here

print "Content-type: image/png\n\n";
binmode STDOUT;
$x = $image->Write(.png:-'); 
```

您可以在上面链接的网站上阅读更多相关信息。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T18:24:20.880

好吧，事实证明这不起作用的原因是因为我完全忘记了我没有在标准 cgi_bin 目录之外使用 CGI 进行操作。相反，我使用 .htaccess 文件告诉服务器如何以及何时将根目录中的文件解释为 cgi。

所以，这就是我最终在我的图像碟形脚本中使用的：

imagedish.pm

```
use CGI;

my $cgi = new CGI;

open (IMAGE, 'logo.png');
my $size = -s "logo.png";
my $data;
read IMAGE, $data, $size;
close (IMAGE);

print $cgi->header(-type=>'image/png'), $data; 
```

这成功了，就像它从一开始就应该做的那样，但是在我的 .htaccess 文件中，我添加了：

```
<files imagedish.pm>
SetHandler cgi-script
</files> 
```

这就是诀窍（嗯，那个，以及进入终端并运行 chmod +x imagedish.pm 以使其可执行）！当然，接下来的步骤是额外的安全措施，但至少它现在正在工作！:-)

完整的解决方案：主文件：

```
!/usr/bin/perl 

use CGI;
use CGI::Carp qw(fatalsToBrowser);
use CGI::Session qw/-ip-match/;
use DBI;
use strict;
use warnings;

# Variables
my $query = CGI->new();
my %vars = $query->Vars();

sub main {

    my $p1 = $vars{p1};

    $p1 = 'Home' if (!$p1);

    my $html = get_page();

    #I use this method in case we have multiple sessions
    #I've omitted how I acquire the session, as this is not part of the solution ;-)
    print $query->header(-cookie=>[$query->cookie($vars{p1}=>$session->id)]);
    print $html;
}

sub get_page {
    return <<HTML;
<!DOCTYPE HTML>
<html>
    <head>
        <title>Image Disher</title>
        <link rel="shortcut icon" href="images/favicon.ico" />
        <link href="css/style.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div class="container">
            <div class="addentry">
                <div class="iaddentry">
                    <form name="client" action="" method="POST">
                        <div class="form-header" action="">
                            <center>
                                <img src="imagedish.pm" width="305" alt=""/><br>
                            </center>
                            <br>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </body>
</html>
HTML
}

main(); 
```

在这里，img 标签查找源“imagedish.pm”，一旦找到，.htaccess 文件会告诉它作为 CGI 脚本执行。那时，它会适当地提供信息，而不是像以前那样。

请注意，这不是最安全的方法，但它让我朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T03:46:56.370

还有一种方法是使用`<img src="data:image/...,base64,...">`格式嵌入图像。

这会破坏浏览器缓存，并且不适用于非常大的图像。但是，如果将图像构建为初始页面加载的一部分更容易，或者您不希望通过文件系统管理/服务它们的麻烦，那么它很有用。

```
#!/user/bin/perl
use warnings; use strict;
use MIME::Base64 qw();

sub return_page_content {
    my $image_type = shift;
    my $image_data = shift;

    my $image_base64 = MIME::Base64::encode($image_data);
    $image_base64 =~ s{\n}{}g; # lose newlines

return <<HTML;
<html>
  <body>
    <img src="data:image/${image_type};base64,${image_base64}" />
  </body>
</html>
HTML
}

my $image_path =  "/tmp/test.jpg";
open(my $fh, '<', $image_path)
    or die "unable to open file $image_path: $!";

binmode($fh);
my $image_data = do {local $/; <$fh>};
close($fh);

print return_page_content("jpeg", $image_data); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T02:53:35.400

您找到的链接（第一个除外）描述了如何执行此操作，我认为您只是对*交付图像*和*交付带有 img 标签的 html 文件*之间的区别感到困惑。请记住，当您的浏览器在解析 html 文件并遇到 img 标签时，它会获取标签中的 src url 并对其发出额外的 get 请求。

尝试使用 curl、wireshark 等从图像请求中捕获原始输出。结果就是您想要尝试创建的结果。只需返回内容类型 http 标头，然后是二进制图像数据。

再看一下[这个](http://docstore.mik.ua/orelly/linux/cgi/ch13_02.htm)例子，去掉 random_file 子，并替换这一行：

```
 my $image = random_file( IMAGE_DIRECTORY, '\\.(png|jpg|gif)$' ); 
```

有了这个：

```
 my $image = "path to an image file accessible by www-user"; 
```

希望一旦您开始工作并了解它在做什么，您就会知道下一步需要做什么。

# xcode - 文件夹未从 XCode 显示在磁盘上

> ID：13851801
> 
> 赞同：1
> 
> 时间：2012-12-13T02:03:12.127
> 
> 标签：xcode

我在 XCode 中为我的项目添加了一个文件夹并将其命名为 Themes，它将用于存储我的 iPad 应用程序的主题。在此之下，我有红色、蓝色等。

它们出现在 XCode 中。但是当我查看物理文件夹时，没有 Themes 目录（显然它下面有任何东西）。

为什么不？它去哪儿了？如何在不同的路径（主题）下存储图像（可能具有相同的名称）？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T03:27:44.703

XCode 不创建“文件夹”，它创建“组”。组是文件的逻辑组织，独立于其下的文件系统组织

如果你想真正拥有一个文件夹，最简单的方法是首先在文件系统上创建一个（通过 Finder），然后将它拖到 XCode 的项目导航器中。弹出确认窗口时，保留默认设置（*“将项目复制到目标”*和*“为任何添加的文件夹创建组”*）

这将导入文件夹及其中的所有文件，但是在此之后它不会自动将新添加的文件导入文件夹（您必须手动添加它们）。

如果您确实想将新添加的文件从文件系统文件夹自动导入 XCode 中的该组，而不是使用*“为任何添加的文件夹创建组”*，请更改为*“为任何添加的文件夹创建文件夹引用”*

# vba - 函数调用时对象需要错误

> ID：13851805
> 
> 赞同：1
> 
> 时间：2012-12-13T02:03:38.123
> 
> 标签：vba, outlook

我制作了一个类模块并将其命名为 Time。我想在其中创建一个创建 Time 对象实例并返回它的函数。请参阅下面的代码。如果您能想出更好的方法来编写函数，我会全力以赴。就目前而言，我遇到的问题是当我发表以下声明时：

> tsheet.MondayStart = Time.Construct(Item.Value)

此调用之前的 debug.print 语句显示 Item.Value 为“08:30”。tsheet 是 TimeSheet 类型，MondayStart 属性期望分配一个 Time 类型的对象。但是，当此语句在运行时执行时，我得到 object required 错误。我什至尝试删除括号，但所做的只是引发另一个错误“编译错误：预期的语句结束”

我该如何解决？请指教。太糟糕了 vba 不支持构造函数的概念 :-(

艾伦

```
'IN TIME CLASS MODULE
Public Function Construct(Value As String) As Time
  'This function expects a string formatted like: 08:30
  'Time.Delimiter returns ":"
  Dim tempTime As Time
  Dim vhours As Integer
  Dim vminutes As Integer
  Dim arrTime() As Time

  arrTime = Split(Value, Time.Delimiter)
  hours = CInt(Trim(arrTime(0)))
  minutes = CInt(Trim(arrTime(1)))
  Set tempTime = New Time
  tempTime.hours = vhours
  tempTime.minutes = vminutes

  Construct = tempTime
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:43:38.480

实际上，我建议您使用已经实现的 VBA 方法 DateValue 和 TimeValue ，它们将接受一个字符串并为您提供所需的内容。

我不确定您是否需要在这里重新发明轮子。当然，我可能错过了一些东西，所以请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:17:10.073

使用 new 的结果如下：

```
Set MonStart = New TimeFrame
Set tsheet.MondayStart = MonStart.Initialize(MonStart, Item.Value) 
```

（为了比较，这里是以前的：

```
Set MonStart = New TimeFrame
Set tsheet.MondayStart = TimeFrame.Initialize(MonStart, Item.Value) 
```

)

也用于`Set`函数返回值赋值。

对于第一个代码示例：

```
...
    Set Construct = tempTime
End Function 
```

对于其他代码示例：

```
...
    Set Initialize = Value
End Function 
```

# openstack - nova-api 应该在不同的计算节点上运行吗？

> ID：13851807
> 
> 赞同：2
> 
> 时间：2012-12-13T02:03:51.073
> 
> 标签：openstack, openstack-nova

我正在处理 OpenStack（Folsom），我想部署 OpenStack 以在不同的
计算节点上工作。是否需要在每个节点上运行 Nova Api 服务？

似乎每个计算节点在我的设备中都需要一个 nova-api 服务，但我认为这没有意义。

据我了解，洞云系统只需要一个 nova-api 服务。

请求 -> nova-api -> nova-schedule 来确定使用哪个节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:06:58.993

是的，我认为是这样，并且根据 OpenStack[安装附加计算节点](http://docs.openstack.org/trunk/openstack-compute/install/apt/content/installing-additional-compute-nodes.html)所写的办公室指南，只应安装附加计算节点上的依赖项和 nova-* 组件，或者只安装 nova-compute 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:01:10.860

不需要在每个计算节点上运行 Nova-API 服务。但是，如果您将一些可用的图像与从 Nova API 中查找元数据的云初始化脚本一起使用，那么您需要将其安装在每个计算节点中。

如果您可以在没有云初始化脚本的情况下构建自己的 VM 映像，则不需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:31:49.160

一般来说，你只需要运行一个 nova-api 服务。

但是，如果您的网络配置为[多主机](http://docs.openstack.org/folsom/openstack-compute/admin/content/existing-ha-networking-options.html)，那么您将需要在每个计算节点上运行元数据服务。在这种情况下，您需要在每个计算节点上运行 nova-api-metadata 服务。

# github - 如何在 github 上向上游推送错误

> ID：13851808
> 
> 赞同：1
> 
> 时间：2012-12-13T02:03:52.640
> 
> 标签：github

我已经在 github 上创建了一个 repo 来做我自己的定制。

但是，在此过程中，我发现了一个错误并修复了它，并想向上游发送一个拉取请求。

我按照以下指南操作：http: [//gun.io/blog/how-to-github-fork-branch-and-pull-request/](http://gun.io/blog/how-to-github-fork-branch-and-pull-request/)

并且创建了一个只包含错误修复的分支 - 但是当我向上游提交拉取请求时 - 它列出了我自分叉以来所做的所有更改，我似乎无法找到一种方法来隔离错误修复补丁。我不想发送我所有的更改，我猜他们不想接收它们 - 那么我如何只发送错误修复？

如果有帮助，repo 是 [https://github.com/chrisjensen/ankusa](https://github.com/chrisjensen/ankusa) 分支是 untrainfix

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:08:18.450

拉取请求的工作方式是从上游仓库顶部的分支应用提交。

为此，最简单的方法是在与您打算在上游存储库上应用它的分支（通过发出拉取请求）*相同的分支上进行修复。*

换句话说，您的所有更改都应该在自定义分支中完成，除了修复之外，您应该在与原始上游存储库中使用的分支相同的分支上执行（或通过樱桃采摘报告）。

如果您想`master`从上游修复错误，请在`master`fork 的分支中进行修复，首先确保您的分支与上游的`master`分支相同 ( `git pull`)。

# c++ - 我无法弄清楚这个访问冲突错误。有人可以帮我吗？

> ID：13851819
> 
> 赞同：-2
> 
> 时间：2012-12-13T02:05:00.850
> 
> 标签：c++, oop, visual-studio-2012, access-violation

我找不到这个问题来自哪里，它让我发疯！我的主要链接和 pastebin 链接如下。我不断收到此错误：

`First-chance exception at 0x0FFE108E (msvcr110d.dll) in MasterMindFSM.exe: 0xC0000005: Access violation reading location 0x2CF0D131. Unhandled exception at 0x0FFE108E (msvcr110d.dll) in MasterMindFSM.exe: 0xC0000005: Access violation reading location 0x2CF0D131.`

这是我的主要内容：

```
#pragma once

#include <iostream>
#include "Answer.hpp"

using namespace Games::MasterMind;

int main() {
   Answer Line;

   std::cout << Line.getAnswer(0) << std::endl;
   std::cout << Line.getAnswer(1) << std::endl;
   std::cout << Line.getAnswer(2) << std::endl;
   std::cout << Line.getAnswer(3) << std::endl;

   system("pause");

   return 0;
} 
```

这是伴随主要的头文件：（对不起，它失去了它的格式）

[答案.hpp](http://pastebin.com/bVHELPas/ "Pastebin 链接")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:08:45.593

问：什么是“线”？

问：它的构造函数是否分配了一个答案（0），答案（1），答案（2），...？

在使用之前未能分配实体很容易导致分段违规；）

=======================================

我只是看了你的（巧妙地隐藏了;））“Answer.hpp”。

问题：

1）“getAnswer（）”看起来非常好（我认为那是你遇到问题的地方）

2) 实际问题出在“setAnswer()”中——你的数组已经用完了！

# php - PHP会话 - 每个用户多个会话 - 如何同步？

> ID：13851821
> 
> 赞同：0
> 
> 时间：2012-12-13T02:05:14.530
> 
> 标签：php, session

我在会话中存储了一些用户信息，因此我不必每次用户更改页面时都查询数据库。如果该用户使用多个浏览器/计算机并且旧会话现在有无效数据怎么办？如何使它们保持同步？注销用户的旧会话很好，但如果可能的话，我想避免将会话信息写入数据库。

我确实意识到这是一个相当普遍的问题，但在谷歌搜索后我无法找到正确的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:08:43.690

将会话存储在每个特定用户的数据库中。

然后每次用户访问您的网站（无论使用哪种浏览器） - 所有信息始终位于一个位置，您无需执行任何花哨的“同步”操作。

注意：他们仍然必须从每个不同的浏览器“登录”。在登录过程中，您需要检查该用户的数据库中是否已经存在会话。如果是这样，您需要将此新登录名附加到该会话（而不是创建一个新登录名）。

# svn - 如何克隆 hgsubversion 存储库并保留 Subversion 修订信息？

> ID：13851828
> 
> 赞同：0
> 
> 时间：2012-12-13T02:06:49.467
> 
> 标签：svn, mercurial, hgsubversion

我有什么似乎是一个独特的情况。我需要有一个中央 Mercurial 存储库，它可以从 Subversion 服务器拉取并且其克隆也能够从同一个 Subversion 服务器拉取更新。更新将与通过 Mercurial 提交的更改一起提交到 Mercurial 存储库。

现在，hgsubversion 一开始*似乎*运行良好，克隆了 Subversion 存储库，允许我通过 Mercurial 提交更改，并正确地从 Subversion 存储库中提取更新。但是，当我克隆 hgsubversion 存储库时，克隆会尝试重新拉取整个 Subversion 存储库，尽管它已经在存储库中。

有没有办法解决这个问题？有没有更好的方法来设置它？

作为参考，我当前的设置是存储在 Mercurial 存储库中的 Subversion 存储库。Mercurial 提交也提交 .svn 文件夹，因此任何克隆存储库的人都可以简单地在该文件夹上运行 SVN Cleanup，然后运行 ​​SVN Update 以从 Subversion 服务器获取最新文件。然后他们运行 hg Commit，然后将文件推送到中央 Mercurial 存储库。这工作得很好，但我更愿意找到更好的解决方案。

注意：我不需要将更改推送回 Subversion 服务器。我只需要拉取更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:32:58.780

中央服务器（即使在 Mercurial 中）是**CENTRAL SERVER**。如果它克隆了 Subversion 存储库并具有拉取周期*，为什么客户端要重复此操作*？这是浪费时间......但它不能破坏任何东西，因为

> 我当前的设置是存储在 Mercurial 存储库中的 Subversion 存储库。

只是**错了**。不是“不优雅”、“无效”、“容易出错”，而是 -**错误！！！**

Subversion 存储库的 Mercurial 克隆（带有 hgsubversion）是 Mercurial 经典存储库，它在外部具有 Subversion（`[paths]`作为目标之一）和一些特定于链接的元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:01:24.210

显然这是在“hg help subversion”中回答的：

```
When interacting with Subversion, hgsubversion relies on information
about the previously converted changesets. This information will not be
updated if pushing or pulling converted changesets to or from any other
source. To regenerate the stored metadata, run "hg svn rebuildmeta
[URI]". This must also be done if any converted changesets are ever
removed from the repository. 
```

使用“hg svn rebuildmeta [URI]”完美地解决了克隆无法正确提取新修订的问题。

# c# - 如何使用 StringCollection 填充（标记为选中）checkedListBox

> ID：13851829
> 
> 赞同：2
> 
> 时间：2012-12-13T02:06:51.557
> 
> 标签：c#, checkedlistbox

我的 Windows 窗体上的 Collection 中有一个包含 10 个项目的checkedListBox。使用 C# VS210。

我正在寻找一种简单的方法，通过使用存储在 Settings.Settings 文件中的值（存储为 System.Collections.Specialized.StringCollection）将我的 checkedListBox 中的两个项目标记为已选中。我无法在那里找到这个示例，我知道我应该以某种方式使用 CheckedListBox.CheckedItems 属性，但还没有找到示例。

```
private void frmUserConfig_Load(object sender, EventArgs e)
{
    foreach (string item in Properties.Settings.Default.checkedListBoxSystem)
    {
        checkedListBoxSystem.SetItemCheckState(item, CheckState.Checked);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:08:05.637

使用[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)怎么样？

```
static class CheckedListBoxHelper
{
    public static void SetChecked(this CheckedListBox list, string value)
    {
        for (int i = 0; i < list.Items.Count; i++)
        {
            if (list.Items[i].Equals(value))
            {
                list.SetItemChecked(i, true);
                break;
            }
        }
    }
} 
```

并稍微更改加载事件中的逻辑，如下所示：

```
private void frmUserConfig_Load(object sender, EventArgs e)
{
    foreach (string item in Properties.Settings.Default.checkedListBoxSystem)
    {
        checkedListBoxSystem.SetChecked(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:16:09.063

的第一个参数`SetItemCheckState`采用索引 (int)。尝试获取要检查的项目的索引，然后使用`SetItemCheckState`索引进行检查。

# c++ - Cmake 不尊重 -D CMAKE_CXX_COMPILER=g++

> ID：13851830
> 
> 赞同：14
> 
> 时间：2012-12-13T02:06:53.287
> 
> 标签：c++, g++, cmake

我正在尝试强制 cmake 使用 g++ 构建我的 cpp 代码，因为默认情况下它使用 clang。所以我使用：`cmake -D CMAKE_CXX_COMPILER=g++ ../src/CMakeLists.txt`之后 cmake 检查 gcc 和 g++ （成功），但仍然`make VERBOSE=1`产生

```
/usr/bin/c++     -o CMakeFiles/trial_cpp.dir/trial.cpp.o -c "/Users/Kuba/Code/Sketchpad/Trial     project/src/trial.cpp"
Linking CXX executable trial_cpp
/opt/etlocal/bin/cmake -E cmake_link_script CMakeFiles/trial_cpp.dir/link.txt --verbose=1
/usr/bin/c++    -Wl,-search_paths_first -Wl,-headerpad_max_install_names   CMakeFiles/trial_cpp.dir/trial.cpp.o  -o trial_cpp 
```

因为它调用 /usr/bin/c++ 而不是 /usr/bin/g++ 我同意它仍然使用 clang。知道有什么问题吗？我知道我有 g++，它在 /usr/bin/ 中。我正在运行 Mac OS X 10.8.2

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T13:00:02.853

CMAKE_CXX_COMPILER 只能在第一次在给定的构建目录中运行 cmake 时设置。在随后的运行中，它被忽略。为了更改 CMAKE_CXX_COMPILER 您首先需要删除构建目录的内容，然后使用该选项再次运行 cmake。

来源：[http ://www.cmake.org/Wiki/CMake_Useful_Variables](http://www.cmake.org/Wiki/CMake_Useful_Variables)

我相信仅在第一次运行时使用该变量的原因是因为稍后更改它可能会使已构建的所有内容（包括配置检查）无效，因此 cmake 无论如何都必须从头开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T02:42:18.893

我这样做是这样的：

```
CXX=/usr/bin/g++ cmake ../src/CMakeLists.txt 
```

# wpf - 无法获取 ItemTemplate 的样式以显示何时将样式用于 ListBox

> ID：13851831
> 
> 赞同：0
> 
> 时间：2012-12-13T02:06:56.763
> 
> 标签：wpf, listbox, itemtemplate

我为 ListBox 及其项目设置样式的简单代码：

```
 <Style x:Key="SelectorPanelListBoxStyle" TargetType="{x:Type ListBox}">
    <Setter Property="Background" Value="{x:Null}"/>
    <Setter Property="Foreground" Value="White"/>
    <Setter Property="Border.CornerRadius" Value="2"/>
    <Setter Property="ItemTemplate" x:Name="MyItemTemplate">

        <Setter.Value>
            <DataTemplate >
                <Border BorderBrush="White" BorderThickness="1" CornerRadius="5" OverridesDefaultStyle="True">
                    <Grid Height="57" Width="145">

                            <Label Content="{TemplateBinding Content}" />

                            <ContentControl Content="{Binding}" Foreground="White" />

                        </Grid>
                        </Border>

            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我的每个样式都作为资源库文件存储在我的项目的资源部分中，链接为“资源库”主文件中的“合并字典”，该文件由 App.xaml 引用。这显然是有效的，因为我已经有很多这些样式在使用中。

我使用视图中的样式类似于以下示例：

```
 <ListBox Style="{StaticResource SelectorPanelListBoxStyle}" ..../> 
```

不幸的是，BorderBrush、BorderThickness、CornerRadius/etc 仅在混合中显示在面包屑编辑器中，并且在实际使用样式时不应用。有时甚至没有。我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:02:41.620

我认为您需要使用 a`<ControlTemplate>`而不是 a `<DataTemplate>`。我会把你的上述风格写成：

```
<Style x:Key="SelectorPanelListBoxStyle" TargetType="{x:Type ListBox}">
<Setter Property="Background" Value="{x:Null}"/>
<Setter Property="Foreground" Value="White"/>
<Setter Property="Border.CornerRadius" Value="2"/>
<Setter Property="ItemTemplate" x:Name="MyItemTemplate">
    <Setter.Value>
        <ControlTemplate>
            <Border BorderBrush="White" BorderThickness="1" CornerRadius="5" OverridesDefaultStyle="True">
                <Grid Height="57" Width="145">
                    <Label Content="{TemplateBinding Content}" />
                    <ContentControl Content="{Binding}" Foreground="White" />
                </Grid>
            </Border>
        </ControlTemplate>
    </Setter.Value>
</Setter>
</Style> 
```

下面是我自己的 ListBox 样式之一，以防它对您有所帮助：

```
 <Style TargetType="{x:Type ListBox}">
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="AllowDrop" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListBox}">
                    <Border BorderThickness="0">
                        <ScrollViewer Margin="0">
                            <StackPanel Margin="0" IsItemsHost="True"/>
                        </ScrollViewer>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <DataTemplate x:Key="GridViewTemplate">
        <Border BorderBrush="LightBlue" BorderThickness="0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" CornerRadius="0">
            <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                <DockPanel VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                    <TextBlock FontFamily="Segoe UI Light" FontSize="18" Text="{Binding PropFullName}" Margin="2,2,2,2" DockPanel.Dock="Top"/>
                    <TextBlock FontFamily="Segoe UI Light" FontSize="18" Text="{Binding PropTitle}" Margin="2,2,2,2" DockPanel.Dock="Top"/>
                </DockPanel>
            </Grid>
        </Border>
    </DataTemplate> 
```

然后按如下方式设置 DataTemplate：

```
 <ListBox.ItemTemplate>
         <StaticResource ResourceKey="GridViewTemplate"/>
    </ListBox.ItemTemplate> 
```

编辑1：

```
 <DataTemplate x:Key="MyListBoxTemplate">
            <Border BorderBrush="White" BorderThickness="1" CornerRadius="5" OverridesDefaultStyle="True">
                <Grid Height="57" Width="145">
                    <Label Content="{TemplateBinding Content}" />
                    <ContentControl Content="{Binding}" Foreground="White" />
                </Grid>
            </Border>
        </DateTemplate>

    <Style TargetType="{x:Type ListBox}">
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="AllowDrop" Value="True"/>
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <StaticResource ResourceKey="MyListBoxItemTemplate"
            </Setter.Value>
        </Setter>
    </Style> 
```

# regex - wordpress url中的sed匹配日期

> ID：13851836
> 
> 赞同：4
> 
> 时间：2012-12-13T02:08:17.507
> 
> 标签：regex, sed

使用 sed 在创建 sitemap.xml 之前尝试从 txt 文件中匹配和删除博客条目时遇到问题

```
# Contents of filename:
# http://www.example.com/2008/10/article3.html
# http://www.example.com/2009/11/article7.html

#!/bin/bash
hostName="www.example.com"
hostTLD="$(echo ${hostName}|cut -d . -f 3)" # results in "com"

sed -i '/\.'"${hostTLD}"'\/\([0-9]{4}\)\/\([0-9]{2}\)/d' filename 
```

我不知道如何匹配年/月位。我想删除所有包含“.TLD/year/month/”的行

我知道 $hostTLD 部分有效，因为我将它与不同的匹配项一起使用：

```
sed -i '/\.'"${hostTLD}"'\/category\//d' filename # works! ".TLD/category/" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:22:30.783

您已经很接近了，但是您需要在`sed`命令周围使用双引号并转义大括号。试试这个：

```
sed -i "/\.$hostTLD\/[0-9]\{4\}\/[0-9]\{2\}/d" filename 
```

对于您的第二个命令，请使用以下命令：

```
sed -i "/\.$hostTLD\/category\//d" filename 
```

# javascript - 什么是鼠标悬停功能上的快速反应文本？

> ID：13851842
> 
> 赞同：1
> 
> 时间：2012-12-13T02:09:33.993
> 
> 标签：javascript, html, css

我已经尝试过以下方法：

```
html title="whatever" tag
onmouseover="javascript:alert('Whatever') 
```

这些都可以正常工作，但我发现文本框出现之前的延迟对于我的目的来说太长了。什么是我可以使用的对鼠标悬停事件有即时或接近即时的反应？

```
<p><font color="black" title="大地(Daichi) ground/earth/the solid earth/the  land">(大地)&nbsp;&nbsp;&nbsp;<font color="black" title="が(ga) indicates sentence subject / indicates possessive /  but/however/still/and">(が)&nbsp;&nbsp;&nbsp;<font color="black" title="揺れ(Yure) vibration/flickering/jolting/tremor">(揺れ)&nbsp;&nbsp;&nbsp;<font color="black" title="始め(Hajime) beginning/start/outset/opening/  first / origin/  such as .../not to mention ...">(始め)&nbsp;&nbsp;&nbsp;<font color="black" title="、(、) Japanese comma">(、)&nbsp;&nbsp;&nbsp;<font color="black" title="警報(Keihou) alarm/warning">(警報)&nbsp;&nbsp;&nbsp;<font color="black" title="が(ga) indicates sentence subject / indicates possessive /  but/however/still/and">(が)&nbsp;&nbsp;&nbsp;<font color="black" title="鳴り(Nari) ringing/sound">(鳴り&nbsp;&nbsp;&nbsp;</font>)(<font color="black" title="響い(Hibii) no dictionary result, likely a conjigated verb">響い</font>)&nbsp;&nbsp;&nbsp;<font color="black" title="た(ta) indicate past completed or action/ indicates light imperative">(た)</p> 
```

是的，我知道延迟很短，但出于我的目的，我认为它太长了。此外，鼠标必须静止才能显示也使延迟看起来更长。所以基本上我需要一个即时消息窗口，即使鼠标在文本上移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:18:00.257

使用 CSS 工具提示。基本上你要做的就是将标题位推离屏幕，然后将其重新悬停。没有延迟，它可以很好地设计。

这里有一个很好的例子说明如何做到这一点：http: [//sixrevisions.com/css/css-only-tooltips/](http://sixrevisions.com/css/css-only-tooltips/)

还有一个使用你的第一个例子的例子：http: [//jsfiddle.net/calder12/PBsJA/](http://jsfiddle.net/calder12/PBsJA/)

根据 SO 标准，我将在此处发布代码，但我并没有因为编写它而受到赞扬，只是将其关联起来。

HTML：

```
 <p><span class="tooltip">(大地)<span class="classic">大地(Daichi) 
    ground/earth/the solid earth/the  land"</span></span></p> 
```

CSS：

```
.tooltip {
border-bottom: 1px dotted #000000;
color: #000000; outline: none;
cursor: help; text-decoration: none;
position: relative;
}
.tooltip span {
margin-left: -999em;
position: absolute;
}

.tooltip:hover span {
font-family: Calibri, Tahoma, Geneva, sans-serif;
position: absolute;
left: 1em;
top: 2em;
z-index: 99;
margin-left: 0;
width: 250px;
}
.tooltip:hover img {
border: 0;
margin: -10px 0 0 -55px;
float: left;
position: absolute;
}
.tooltip:hover em {
font-family: Candara, Tahoma, Geneva, sans-serif;
font-size: 1.2em;
font-weight: bold;
display: block;
padding: 0.2em 0 0.6em 0;
}
.classic { padding: 0.8em 1em; }
.custom { padding: 0.5em 0.8em 0.8em 2em; }
* html a:hover { background: transparent; }​ 
```

# javascript - document.getElementById('').scrollHeight 没有得到实际高度

> ID：13851845
> 
> 赞同：1
> 
> 时间：2012-12-13T02:09:48.717
> 
> 标签：javascript, jquery, height

我有一个 div，它在其中嵌套文本、更频繁地更改的图像，因此 div 的高度也会相应地改变..

我需要得到 div 的高度。

我试过jquery `$("div#ID").height();`，但它总是返回一个小于实际高度的值，请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:16:03.253

也许你应该尝试，

```
$("#divID").outerHeight();
$("#divID").outerHeight(true); //includes margin of element 
```

# python - Paramiko SFTPClient - 设置缺少主机密钥策略？

> ID：13851846
> 
> 赞同：5
> 
> 时间：2012-12-13T02:09:55.070
> 
> 标签：python, ssh, paramiko

我知道使用 Paramiko 的 SSHClient 类，您可以设置一个宽松的缺少主机密钥策略，如下所示：

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy()) 
```

但是，我通过 SFTP（不是 SSHClient）打开文件流，如下所示：

```
t = paramiko.Transport((process['hostname'], 22))
keyfile = paramiko.DSSKey.from_private_key_file('./id_dsa')
t.connect(username = 'user', pkey = keyfile)
sftp = paramiko.SFTPClient.from_transport(t) 
```

我无法在文档中找到通过 Transport 或 SFTPClient 设置丢失主机密钥策略的任何内容。

有什么方法可以使用 SFTPClient 实现相同的目标吗？

干杯，维克多

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T02:29:05.603

可以通过使用从 SSH 客户端获取 SFTP 客户端`open_sftp()`。

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())

sftp = ssh.open_sftp() 
sftp.get('remotefile', 'localfile') 
```

虽然我没有测试过这个。

# c# - 如何找到文化的默认日期格式

> ID：13851854
> 
> 赞同：9
> 
> 时间：2012-12-13T02:10:50.967
> 
> 标签：c#, culture, currentculture

好吧，我正在尝试获取文化的默认日期格式。

例如 en-us 有 "m/dd/yyyy" ， en-uk 'd/mm/yyyy'。文化可以是客户端机器上的任何东西。和 Dateformat 也可以是任何东西。喜欢文化是 en-us 但日期格式是 dd-MMM-yyyy。

所以在这种情况下，我想将 ShortDateformatString 作为 m/dd/yyyy 而不是 dd-MMM-yyyy。

我尝试使用以下方法为所有文化做到这一点：

```
string _cultureInfo = CultureInfo.CurrentCulture.IetfLanguageTag;
CultureInfo shortDatefomatString = new CultureInfo(_cultureInfo);
string old = shortDatefomatString.DateTimeFormat.ShortDatePattern; 
```

但它总是返回 mt `dd-MMM-yyyy`。我需要默认的而不是机器上的设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T02:41:10.590

我认为问题在于您检索所需文化的方式。

这应该为您提供默认的文化设置：

```
var cultureLanguageTag = CultureInfo.CurrentCulture.IetfLanguageTag;
var defaultCulture =  CultureInfo.GetCultureInfoByIetfLanguageTag( cultureLanguageTag ); 
```

用字符串构造一个应该与文化名称一起使用，我不知道它是否应该与 IETF 标签一起使用，在这种情况下它可能只是返回了当前的文化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T02:39:00.857

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture.aspx)，`CurrentCulture`将通过以下方式之一返回文化：

1.  `CultureInfo.DefaultThreadCurrentCulture`如果不为空，则返回。（请注意，除非您专门设置文化，否则这将始终为空。）
2.  它返回调用 Windows`GetUserDefaultLocaleName`函数的结果。这将返回您在控制面板中设置的任何文化。

如果您在控制面板中更改区域性，则可能会在重新启动计算机之前看不到更改。

要测试文化是否显示正确的日期，您可以手动选择一种文化，而不是使用系统文化，方法是使用`CultureInfo.CreateSpecificCulture("en-US");`（将“en-US”替换为其他国家/地区的文化代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:35:28.050

以下似乎对我有用。

```
Console.WriteLine(CultureInfo.GetCultureInfo("en-us").DateTimeFormat.ShortDatePattern);
Console.WriteLine(CultureInfo.GetCultureInfo("en-gb").DateTimeFormat.ShortDatePattern); 
```

输出：M/d/yyyy dd/MM/yyyy

# android - 在sqlite android中创建表

> ID：13851857
> 
> 赞同：1
> 
> 时间：2012-12-13T02:11:28.923
> 
> 标签：android, sqlite

我正在尝试在 android 中为我的 sqlite 数据库创建三个表，但这些表不会创建，只是数据库。使用查看 DDMS，创建了数据库，但是当我使用 SQLite 浏览器查看它时，没有创建表，只创建了元数据。

这是我的做法：

```
private static final String DATABASE_NAME = "fgtDB";
private static final String DATABASE_TABLE = "profiles";
private static final String DATABASE_TABLE2 = "routines";
private static final String DATABASE_TABLE3 = "UserRoutines";
private static final int DATABASE_VERSION = 3;

private static final String DATABASE_CREATE =
    "create table if not exists profiles (_id integer primary key autoincrement, "
    + "firstname VARCHAR not null, age VARCHAR not null, " 
    + "heightft VARCHAR not null, heightin VARCHAR not null, weight VARCHAR not null, duration VARCHAR not null, bmi VARCHAR not null, weightclass VARCHAR not null,);";

private static final String DATABASE_CREATE2 =
        "create table if not exists routines (_id integer primary key autoincrement, "
        + "weightclass VARCHAR not null, musclegroup VARCHAR not null, " 
        + "exercise VARCHAR not null, numberofsets VARCHAR not null, numberofrepitition VARCHAR not null, day VARCHAR not null);";

private static final String DATABASE_CREATE3 =
        "create table if not exists UserRoutines (userid integer not null, "
        + "musclegroup VARCHAR not null, day VARCHAR not null" 
        + "exercise VARCHAR not null, numberofsetsleft VARCHAR not null, numeberofrepitition VARCHAR not null, isdone VARCHAR not null);";

private final Context context; 

private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter(Context ctx) 
{
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper 
{
    DatabaseHelper(Context context) 
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {
        try
        {
            db.execSQL(DATABASE_CREATE);
            db.execSQL(DATABASE_CREATE2);
            db.execSQL(DATABASE_CREATE3);
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
        Log.w(TAG, "Upgrading database from version " + oldVersion 
                + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS profiles");
        onCreate(db);
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:15:18.387

您在 DATABASE_CREATE 末尾有一个不应该存在的逗号。

```
...  weightclass VARCHAR not null,);" 
```

应该

```
...   weightclass VARCHAR not null);" 
```

# c++ - 断言失败，列表迭代器不可取消引用

> ID：13851858
> 
> 赞同：1
> 
> 时间：2012-12-13T02:11:34.923
> 
> 标签：c++

我从以下代码中的这一行得到一个断言失败“列表迭代器不可取消引用”：

iter2 = iter->vertex_list.erase(iter2);

我不确定为什么会发生这种情况，我确保列表不为空。完整代码如下：

```
void Map_Quad_List::Vertex_List_Duplicate_Removal() {
    for (std::list<Map_Polygon>::iterator iter = map_polygon_list.begin(); iter != map_polygon_list.end(); iter++) { //iterate through polygons
        std::vector<XMFLOAT3> position_list; //list of vertices already tried
            for (std::list<Vertex>::iterator iter2 = iter->vertex_list.begin(); iter2 != iter->vertex_list.end(); iter2++ ) {//iterate through vertices
                bool dup = false;
                for (std::vector<XMFLOAT3>::iterator pos_list_iter = position_list.begin(); pos_list_iter != position_list.end(); pos_list_iter++) { //check vertex against position_list
                    if ((!position_list.empty()) && (XMFLOAT3_Comparison(*pos_list_iter, iter2->position))) { //if vertex already exists in position_list
                        iter2 = iter->vertex_list.erase(iter2); //remove vertex from polygon's vertex_list
                        dup = true;
                    }
                }
                if (dup == false) //if there is not a duplicate in position_list, add it to position_list
                position_list.push_back(iter2->position);
            }

    }
} 
```

map_polygon_list 是类类型 Map_Polygon 的 std::list

Map_Polygon 类具有类类型 Vertex 的 std::list

Vertex是一个由一个XMFLOAT3（位置）和一个XMFLOAT4（颜色）组成的类，这个函数只处理位置（XMFLOAT3）

XMFLOAT3_Comparison 是一个比较两个 XMFLOAT3 的函数，如果它们相同则返回 true

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:28:25.323

看起来`iter2`可能会进入`iter->vertex_list.end()`最里面的 for 循环，这将导致这个断言，因为指向的项目是空的。

# android - ruby ENV['ANDROID_HOME'] 说 nil，但它已设置

> ID：13851860
> 
> 赞同：0
> 
> 时间：2012-12-13T02:11:39.847
> 
> 标签：android, ruby

我有一个 ANDROID_HOME 变量集：

```
$ set | grep ANDROID_HOME
ANDROID_HOME=/Users/jenkins/android-sdk-macosx 
```

但是，当我启动 ruby​​ 时，它没有看到它：

```
$ irb
1.9.3p194 :001 > ENV["ANDROID_HOME"]
 => nil 
```

然而，它看到了其他变量：

```
1.9.3p194 :002 > ENV["HOME"]
 => "/Users/jenkins" 
```

ANDROID_HOME 变量在我的 ~/.profile 中定义。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:28:34.217

您需要`export`该变量，否则它在任何子进程中都不可见：

```
export

Set an environment variable. Mark each name to be passed to child 
processes in the environment.

Syntax
      export [-fn] [-p] [name[=value]] 
```

所以在你的`.profile`：

```
export ANDROID_HOME=${HOME}/android-sdk-macosx 
```

# sql-server - 来自pyodbc的sql打印语句

> ID：13851865
> 
> 赞同：7
> 
> 时间：2012-12-13T02:12:06.210
> 
> 标签：sql-server, tsql, pyodbc, python-db-api

如何从 中获取输出`sql_query`？

```
import pyodbc

sql_query = "print 'Hello World'"

conn = pyodbc.connect("DRIVER={SQL Server};
SERVER=myserver;
DATABASE=mydatabase;
UID=myusername;
PWD=mypassword")

cur = conn.cursor()

cur.execute(sql_query)
cur.commit()

for row in cursor.fetchall():
    print row 
```

到目前为止，我认为 SQL 打印*超出*了通常的结构化响应的范围？

[http://www.easysoft.com/developer/languages/perl/sql_server_unix_tutorial.html#print_statement_status_messages](http://www.easysoft.com/developer/languages/perl/sql_server_unix_tutorial.html#print_statement_status_messages)与我在 Perl 中尝试做的事情类似。

我能看到的最接近的是可选的：http: [//www.python.org/dev/peps/pep-0249/#cursor-messages](http://www.python.org/dev/peps/pep-0249/#cursor-messages)所以我猜它只是没有实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-07T20:55:55.277

运行查询 PRINT 'Hello World' 时，输出将作为控制台输出（字符串）返回，而 fetchall 正在查看查询的结果集（对象）。RAISERROR 是一个错误条件，可以停止进程。我并不是说这不是一个解决方案，但也许您只是想打印一些反馈而不创建错误条件。

我认为你可以通过改变来达到你想要的结果

[打印'Hello World'] 到 [SELECT'Hello World']

我认为这将在结果集中创建一行数据，其中包含您想要的文本，它应该显示在 fetchall 中，并查看您是否获得了预期的结果。

希望这有助于提供您可以尝试的替代方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:28:10.360

在 PRINT 上使用[RAISERROR 。](http://msdn.microsoft.com/en-us/library/ms177497%28v=sql.105%29.aspx)将它与[NOWAIT](http://www.mssqltips.com/sqlservertip/1660/using-the-nowait-option-with-the-sql-server-raiserror-statement/)一起使用可立即获得输出。我不知道如何在 python 中处理这个问题，但在 ADO.NET 中，您可以在 SqlConnection 上使用[InfoMessage事件。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.infomessage.aspx)也许在 Python 中有类似的东西。

# css - 调整以 rems 为单位的字体大小

> ID：13851867
> 
> 赞同：1
> 
> 时间：2012-12-13T02:12:18.953
> 
> 标签：css, font-size

因此，我最近开始调整 rems 中的字体大小，以避免使用 ems 导致的后代问题，例如嵌套 li's。

所以我将我的 html 字体大小调整为 62.5%，所以我可以做 p {font-size 2.5rem} /* 25px */

当我想更改某个元素的字体大小时，问题就出现了，通常我只是给说一个文本块的父级，大小为 0.8em，以使事情变得更小。但由于 rems 是相对于 html 元素的，我不能只写 say .parent {font-size 0.8rem}，因为它不会影响其中的任何内容。

我也对如何使用媒体查询调整大小感到困惑。我是否再次写出所有选择器，或者我只是给我的 html 一个小于 62.5% 的字体大小以使字体在更小的屏幕尺寸下更小？

几天来我一直在阅读有关字体大小的信息，我很想得到一个关于什么是最佳实践的明确答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:50:24.327

老实说，我认为使用 62.5% 会导致不好的做法，这就是为什么您现在会感到困惑（阅读以下内容：[http ://csswizardry.com/2011/05/font-sizing- with-rem-could-be-avoided/](http://csswizardry.com/2011/05/font-sizing-with-rem-could-be-avoided/)）。我建议在使用 100% 的字体大小时学习如何进行数学运算。然后您只需按照您所说的进行操作，只需减小较小屏幕的根字体大小（这样会更有意义）。

例如，如果您使用 100% (16px) 的根字体大小，并且想要 20 像素的字体大小，请使用以下公式：

```
font-size = target / context 
```

所以在这种情况下，你会做`20 / 16`which给你`1.25rem`。

此外，当您想更改特定元素的字体大小时，最好直接更改该元素，而不是更改父元素。这样，当您或其他人正在寻找字体大小时，它就在一个有意义的地方！

此外，如果您希望字体大小嵌套，您仍然可以`rem`混合`em`。

# java - 因为一个所有部署都失败了

> ID：13851869
> 
> 赞同：1
> 
> 时间：2012-12-13T02:12:23.257
> 
> 标签：java, eclipse, jsf, jakarta-ee, jboss

> **可能重复：**
> [java.lang.NoSuchMethodError: javax.servlet.ServletContext.getContextPath()Ljava/lang/String;](https://stackoverflow.com/questions/8611777/java-lang-nosuchmethoderror-javax-servlet-servletcontext-getcontextpathljava)

```
2012-12-12 20:35:34,047 INFO  [org.apache.catalina.core.StandardEngine] (main) Starting Servlet Engine: JBoss Web/2.1.10
2012-12-12 20:35:34,094 INFO  [org.apache.catalina.startup.Catalina] (main) Server startup in 87 ms
2012-12-12 20:35:34,125 INFO  [org.jboss.web.tomcat.service.deployers.TomcatDeployment] (main) deploy, ctxPath=/invoker
2012-12-12 20:35:34,640 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/invoker]] (main) Exception sending context initialized event to listener instance of class org.jboss.web.jsf.integration.config.JBossJSFConfigureListener
java.lang.NoSuchMethodError: javax.servlet.ServletContext.getContextPath()Ljava/lang/String;
    at com.sun.faces.config.WebConfiguration.getServletContextName(WebConfiguration.java:250)
    at com.sun.faces.config.WebConfiguration.<init>(WebConfiguration.java:100)
    at com.sun.faces.config.WebConfiguration.getInstance(WebConfiguration.java:158)
    .
    .
    .
    at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:256)
    at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)
    at org.jboss.Main.boot(Main.java:221)
    at org.jboss.Main$1.run(Main.java:556)
    at java.lang.Thread.run(Thread.java:662)
2012-12-12 20:35:34,640 ERROR [org.apache.catalina.core.StandardContext] (main) Error listenerStart
2012-12-12 20:35:34,640 ERROR [org.apache.catalina.core.StandardContext] (main) Context [/invoker] startup failed due to previous errors
2012-12-12 20:35:34,718 ERROR [org.jboss.kernel.plugins.dependency.AbstractKernelController] (main) Error installing to Start: name=jboss.web.deployment:war=/invoker state=Create mode=Manual requiredState=Installed
org.jboss.deployers.spi.DeploymentException: URL file:/C:/EDM/JBoss-EAP/jboss-eap-5.1/jboss-as/server/default/deploy/http-invoker.sar/invoker.war/ deployment failed
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:342)
    .
    .
    .
    at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:256)
    at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)
    at org.jboss.Main.boot(Main.java:221)
    at org.jboss.Main$1.run(Main.java:556)
    at java.lang.Thread.run(Thread.java:662)
2012-12-12 20:35:34,749 INFO  [org.jboss.web.tomcat.service.deployers.TomcatDeployment] (main) deploy, ctxPath=/jbossws
2012-12-12 20:35:34,796 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/jbossws]] (main) Exception sending context initialized event to listener instance of class org.jboss.web.jsf.integration.config.JBossJSFConfigureListener
java.lang.NoSuchMethodError: javax.servlet.ServletContext.getContextPath()Ljava/lang/String;
    at com.sun.faces.config.WebConfiguration.getServletContextName(WebConfiguration.java:250)
    at com.sun.faces.config.WebConfiguration.<init>(WebConfiguration.java:100)
    at com.sun.faces.config.WebConfiguration.getInstance(WebConfiguration.java:158)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:145)
    at org.jboss.web.jsf.integration.config.JBossJSFConfigureListener.contextInitialized(JBossJSFConfigureListener.java:60)
    .
    .
    .
    at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:256)
    at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)
    at org.jboss.Main.boot(Main.java:221)
    at org.jboss.Main$1.run(Main.java:556)
    at java.lang.Thread.run(Thread.java:662)
2012-12-12 20:35:34,796 ERROR [org.apache.catalina.core.StandardContext] (main) Error listenerStart
2012-12-12 20:35:34,796 ERROR [org.apache.catalina.core.StandardContext] (main) Context [/jbossws] startup failed due to previous errors
2012-12-12 20:35:34,796 ERROR [org.jboss.kernel.plugins.dependency.AbstractKernelController] (main) Error installing to Start: name=jboss.web.deployment:war=/jbossws state=Create mode=Manual requiredState=Installed
org.jboss.deployers.spi.DeploymentException: URL file:/C:/EDM/JBoss-EAP/jboss-eap-5.1/jboss-as/server/default/deploy/jbossws.sar/jbossws-management.war/ deployment failed
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:342)
    .
    .
    .
    at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:256)
    at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)
    at org.jboss.Main.boot(Main.java:221)
    at org.jboss.Main$1.run(Main.java:556)
    at java.lang.Thread.run(Thread.java:662)
2012-12-12 20:35:34,796 INFO  [org.jboss.web.tomcat.service.deployers.TomcatDeployment] (main) deploy, ctxPath=/web-console
2012-12-12 20:35:34,827 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/web-console]] (main) Exception sending context initialized event to listener instance of class org.jboss.web.jsf.integration.config.JBossJSFConfigureListener
java.lang.NoSuchMethodError: javax.servlet.ServletContext.getContextPath()Ljava/lang/String;
    at com.sun.faces.config.WebConfiguration.getServletContextName(WebConfiguration.java:250)
    .
    .
    .
2012-12-12 20:35:39,199 ERROR [org.jboss.kernel.plugins.dependency.AbstractKernelController] (main) Error installing to Real: name=vfszip:/C:/EDM/JBoss-EAP/jboss-eap-5.1/jboss-as/server/default/deploy/RDSGUIWeb.war/ state=PreReal mode=Manual requiredState=Real
org.jboss.deployers.spi.DeploymentException: URL file:/C:/EDM/JBoss-EAP/jboss-eap-5.1/jboss-as/server/default/tmp/5j2at36-3k5zwg-han7uhp7-1-han7uyj0-9u/RDSGUIWeb.war/ deployment failed
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:342)
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:145)
    at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:461)
    at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118)
    at org.jboss.web.deployers.WebModule.start(WebModule.java:97)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206)
    at $Proxy38.start(Unknown Source)
    at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)
    at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)
    at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
    at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
    at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:297)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1652)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:938)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:988)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:826)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:556)
    at org.jboss.system.ServiceController.doChange(ServiceController.java:688)
    at org.jboss.system.ServiceController.start(ServiceController.java:460)
    at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:163)
    at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99)
    at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46)
    at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
    at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:55)
    at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1454)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1172)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1193)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1113)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1652)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:938)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:988)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:826)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:556)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:789)
    at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:699)
    at org.jboss.system.server.profileservice.repository.MainDeployerAdapter.process(MainDeployerAdapter.java:117)
    at org.jboss.system.server.profileservice.repository.ProfileDeployAction.install(ProfileDeployAction.java:70)
    at org.jboss.system.server.profileservice.repository.AbstractProfileAction.install(AbstractProfileAction.java:53)
    at org.jboss.system.server.profileservice.repository.AbstractProfileService.install(AbstractProfileService.java:403)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1652)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:938)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:988)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:778)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:543)
    at org.jboss.system.server.profileservice.repository.AbstractProfileService.registerProfile(AbstractProfileService.java:308)
    at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:256)
    at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)
    at org.jboss.Main.boot(Main.java:221)
    at org.jboss.Main$1.run(Main.java:556)
    at java.lang.Thread.run(Thread.java:662)
2012-12-12 20:35:39,699 INFO  [org.jboss.system.server.profileservice.ProfileServiceBootstrap] (main) Loading profile: ProfileKey@12b7414[domain=default, server=default, name=default]
2012-12-12 20:35:39,699 ERROR [org.jboss.system.server.profileservice.ProfileServiceBootstrap] (main) Failed to load profile: Summary of incomplete deployments (SEE PREVIOUS ERRORS FOR DETAILS):

DEPLOYMENTS IN ERROR:
  Deployment "jboss.web.deployment:war=/web-console" is in error due to the following reason(s): org.jboss.deployers.spi.DeploymentException: URL file:/C:/EDM/JBoss-EAP/jboss-eap-5.1/jboss-as/server/default/deploy/management/console-mgr.sar/web-console.war/ deployment failed
  Deployment "jboss.web.deployment:war=/jbossws" is in error due to the following reason(s): org.jboss.deployers.spi.DeploymentException: URL file:/C:/EDM/JBoss-EAP/jboss-eap-5.1/jboss-as/server/default/deploy/jbossws.sar/jbossws-management.war/ deployment failed
  Deployment "vfszip:/C:/EDM/JBoss-EAP/jboss-eap-5.1/jboss-as/server/default/deploy/RDSGUIWeb.war/" is in error due to the following reason(s): org.jboss.deployers.spi.DeploymentException: URL file:/C:/EDM/JBoss-EAP/jboss-eap-5.1/jboss-as/server/default/tmp/5j2at36-3k5zwg-han7uhp7-1-han7uyj0-9u/RDSGUIWeb.war/ deployment failed
  Deployment "jboss.web.deployment:war=/invoker" is in error due to the following reason(s): org.jboss.deployers.spi.DeploymentException: URL file:/C:/EDM/JBoss-EAP/jboss-eap-5.1/jboss-as/server/default/deploy/http-invoker.sar/invoker.war/ deployment failed

2012-12-12 20:35:39,715 INFO  [org.apache.coyote.http11.Http11Protocol] (main) Starting Coyote HTTP/1.1 on http-127.0.0.1-8080
2012-12-12 20:35:39,746 INFO  [org.apache.coyote.ajp.AjpProtocol] (main) Starting Coyote AJP/1.3 on ajp-127.0.0.1-8009
2012-12-12 20:35:39,746 INFO  [org.jboss.bootstrap.microcontainer.ServerImpl] (main) JBoss (Microcontainer) [5.1.0 (build: SVNTag=JBPAPP_5_1_0 date=201009150028)] Started in 25s:322ms 
```

嗨，当我的 war 文件部署到 jboss 部署文件夹中时，我遇到了一个问题，即部署失败，我确信这与配置和类路径问题有关，但我无法找出导致问题。

这是我遵循的程序/方法。实际上，我正在使用 ant 构建脚本（在 eclipse 中）构建 .WAR 文件。最后，我的 war 文件将不包含 lib 文件夹（这意味着内部没有 .jars，这就是 .WAR 文件不应过重的要求）但是每个 .jar（包括 servlet-api.jar）文件都需要 . WAR 在 jboss 类路径配置中可用，但我在部署时仍然收到错误和异常。请在上面查找日志以获取更多详细信息（已粘贴 server.log 信息）。

注意：在我的 ant 构建脚本中，我没有在内部编译/链接任何类。我的意思是：即使是 ant 文件 .jar 也可以通过 ant 类路径获得。

这是我的 build.xml 的摘要：

```
<target name="compile" depends="clean, init">
    <javac destdir="${rds.build}" debug="true" srcdir="${rds.src}">
    </javac>
</target>

<target name="war" depends="compile, doTestLevel, doProdLevel">
  <war destfile="${rds.dist.bin}/RDSGUIWeb.war" >
    <fileset dir="${projectRootDir}/WebContent">    
        <include name="**/*"/>
        <exclude name="/WEB-INF/lib/**" />
    </fileset>
    <classes dir="${rds.build}" />
  </war>
</target> 
```

更新：我尝试通过从其类路径中删除 servlet-api.jar 来运行 jboss，此时我将得到类似 com.icesoft.faces.util.event.servlet.ContextEventRepeater 类的应用程序侦听器未实例化的内容。在这两种方式（无论是否包括 servlet-api.jar）我都无法成功。这就是我接近stackoverflow的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:48:14.787

我将所有 jar 复制到默认文件夹中的**lib****文件**夹（即默认 JBOSS 实例的库文件夹），而不是让它们在 JBOSS 的类路径/构建路径用户条目中可用。终于成功了！！！

# javascript - 页面特定事件注册设计模式

> ID：13851883
> 
> 赞同：0
> 
> 时间：2012-12-13T02:14:38.990
> 
> 标签：javascript, design-patterns

我的应用程序中有几个页面，每个页面都有特定的 pageid 和一个常见的 js 文件。我在 pageid 上的 javascript 中使用 switch 语句来注册页面特定的事件注册。我想知道是否有任何设计模式来实现这个解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:45:38.227

原谅我，你所做的对我来说毫无意义。恕我直言，您可以将此中心代码分成特定于您的页面的单个 js 文件。这样每个页面只有自己的js代码，不需要switch case。

有资格成为中心/通用的代码通常是与客户端不依赖或松散耦合的工具和库。在您的情况下，您将中心/通用代码与特定的页面 id 紧密耦合。

# wordpress - P 文本添加到 html 文本

> ID：13851886
> 
> 赞同：4
> 
> 时间：2012-12-13T02:15:12.183
> 
> 标签：wordpress, formatting, paragraph

我知道这方面有很多话题，我已经看过所有这些话题，但没有一个解决方案适用于我。

我已经在页面编辑器的“文本”侧放置了一个简码来运行响应式滑块的 jscript。然而，当我加载页面时，源代码在每行 javascript 之后都有大量的段落标签。它甚至在它甚至要求内容本身之前都有一个段落标签。

我已经尝试编辑我的主题的functions.php 文件（原因2.0），但我不确定我是否可以正确标记它，它非常重php。我还尝试了这里建议的五个插件。它们都没有任何效果。

代码很可怕，看起来像这样：

```
 <p>                <!-- START REVOLUTION SLIDER --></p>
 <div id="rev_slider_1_1_wrapper" class="rev_slider_wrapper" style="margin:0px auto;background-color:#E9E9E9;padding:0px;margin-top:0px;margin-bottom:0px;">
 <div id="rev_slider_1_1" class="rev_slider" style="display:none;">
<ul>
 <li data-transition="slidehorizontal" data-slotamount="5" data-masterspeed="300" data-link="http://www.secondhandculture.org/mad-men-and-attraction"  >
                    <img src="http://www.secondhandculture.org/wp-admin/admin-ajax.php?action=revslider_show_image&#038;img=uploads%2F2012%2F12%2Fmad-men-image.jpg&#038;h=300&#038;t=exact" ></p>
<div class="caption sft"<br />
                 data-x=&#8221;400&#8243;<br />
                 data-y=&#8221;20&#8243;<br />
                 data-speed=&#8221;300&#8243;<br />
                 data-start=&#8221;200&#8243;<br />
                 data-easing=&#8221;easeOutExpo&#8221;><img src="http://www.secondhandculture.org/wp-content/uploads/2012/12/Mad-men-text.png" alt="Mad Men"></div>
<div class="caption big_white sfr"<br />
                 data-x=&#8221;550&#8243;<br />
                 data-y=&#8221;140&#8243;<br />
                 data-speed=&#8221;300&#8243;<br />
                 data-start=&#8221;500&#8243;<br />
                 data-easing=&#8221;easeOutExpo&#8221;>How it makes us love      <br><br />
what we know we should hate, <br><br />
 and asks us why</div>
 </li>
 </ul>
 <div class="tp-bannertimer tp-bottom"></div>
</p>
</div>
</div>
 <p>            <script type="text/javascript"></p>
 <p>                var tpj=jQuery;</p>
 <p>                                    tpj.noConflict();</p>
 <p>                tpj(document).ready(function() {</p>
 <p>                if (tpj.fn.cssOriginal != undefined)
                tpj.fn.css = tpj.fn.cssOriginal;</p>
 <p>                var revapi1 = tpj('#rev_slider_1_1').show().revolution(
                {
                    delay:9000,
                    startwidth:,
                    startheight:300,
                    hideThumbs:200,</p>
 <p>                        thumbWidth:100,
                    thumbHeight:50,
                    thumbAmount:1,</p>
 <p>                        navigationType:"none",
                    navigationArrows:"nexttobullets",
                    navigationStyle:"round",</p>
 <p>                        touchenabled:"on",
                    onHoverStop:"on",</p>
 <p>                        navOffsetHorizontal:0,
                    navOffsetVertical:20,</p>
 <p>                        shadow:2,
                    fullWidth:"off",</p>
 <p>                        stopLoop:"off",
                    stopAfterLoops:-1,
                    stopAtSlide:-1,</p>
 <p>                        shuffle:"off"
                });</p>
 <p>                }); //ready</p>
 <p>            </script></p>
 <p>                            <!-- END REVOLUTION SLIDER --></p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-12T07:54:44.403

我曾经遇到过同样的问题，并且`add_filter( 'the_content', 'wpautop')`不适用于我的主题。所以我做了以下事情：

1.  在**revo 滑块**管理区域中，选择显示不佳的滑块。

2.  查找**故障排除**选项卡（右下），然后更改值

3.  Jquery 无冲突模式 = ON

4.  将 JS 包含到正文 = FALSE

5.  （**重要部分**）输出滤波器保护=**通过压缩输出**

这样，脚本将仅在一行中，因此自动段落过滤器只会将 p 标签添加到单行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:35:02.670

造成这种情况的一个常见原因是主题作者更改了主题中输出过滤器的优先级，甚至用他/她自己的替换了默认过滤器。因此，当您插入 Revolution Slider 短代码时，段落标签是围绕每一行输出的插入器，从而破坏了 Javascript 代码。Firefox 错误控制台中的常见消息是：

```
Error: SyntaxError: syntax error
Source Code:
</p> 
```

这是主题作者应该解决的主题问题。如果您想尝试自己修复它，请查找以下行：

```
add_filter( 'the_content', 'wpautop' , 99); 
```

并将过滤器的优先级（99）更改为 9。这可能会有所帮助，但也会破坏其他东西。在某些主题中，代码并不完全一样，但您可以从简码输出中寻找添加或删除过滤器的函数。您可以在下面链接的页面中查看示例。

但是，**在这样做之前，请尝试以下操作：Revolution Slider 的最新版本可以选择避免被过滤**。创建滑块时，在疑难解答框中，有一个名为“输出过滤器保护”的选项。启用它（我使用了“通过回声输出”选项）。

这是某些 Wordpress 主题的已知问题。另请注意，如果主题影响了这个插件，它肯定会影响其他插件。

关于这个问题的一些评论发布在[http://pippinsplugins.com/never-remove-the-default-the_content-filters-in-themes/](http://pippinsplugins.com/never-remove-the-default-the_content-filters-in-themes/)和[http://theandystratton.com/2011/shortcode-autoformatting-html-带段落和换行符](http://theandystratton.com/2011/shortcode-autoformatting-html-with-paragraphs-and-line-breaks)

从第一个链接（从不删除主题中的默认 the_content 过滤器）：

> 主题开发人员有一种可怕的做法，即删除一些应用于帖子和页面内容的默认过滤器......

从第二个链接（带有段落和换行符的短代码自动格式化 HTML）：

> ......我的短代码输出的这个神秘问题被神秘地自动格式化为段落标签和换行符......它正在全局删除 WP 内置的两个非常重要的核心内容过滤器......这使得这个主题完美地工作并且对具有短代码的任何和所有插件产生负面影响......

最终解决方案是第二篇文章中评论的那个：

> 不要使用其中包含糟糕代码的主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T02:58:55.283

不要使用内联 JS - 使用[register_script()](http://codex.wordpress.org/Function_Reference/wp_register_script)和[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

```
function o99_load_my_scripts()  
{  
    // Register for a plugin:  
    wp_register_script( 'custom-script', plugins_url( '/js/my-custom-script.js', __FILE__ ) );  
    // or  
    // Register for a theme:  
    wp_register_script( 'custom-script', get_template_directory_uri() . '/js/my-custom-script.js' );  
    // then, you can then enqueue the script:  
    wp_enqueue_script( 'custom-script' );  
}  
add_action( 'wp_enqueue_scripts', 'o99_load_my_scripts' ); 
```

# javascript - 如何更改 LeafletJS 中的默认加载磁贴颜色？

> ID：13851888
> 
> 赞同：22
> 
> 时间：2012-12-13T02:15:22.550
> 
> 标签：javascript, css, maps, leaflet, geomap

默认情况下，当 LeafletJS 加载地图时，背景图块都是灰色的。我想将该颜色更改为黑色（或任何其他任意颜色）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-13T02:37:15.293

它由文件'leaflet.css'中的以下css规则控制：

```
.leaflet-container {
    background: #ddd;
} 
```

所以你只需要改变这个规则。

# r - 在 R 中使用 xpath 更新节点（未知深度）？

> ID：13851890
> 
> 赞同：2
> 
> 时间：2012-12-13T02:15:42.907
> 
> 标签：r, xpath

如果我有一个如下所示的 XMLNode 对象：

```
<foo>
 <a>1</a>
 <b>
  <c>1</c>
  <d>2</d>
 </b>
</foo> 
```

（作为 dput 转储提供：[https](https://gist.github.com/4273470) ://gist.github.com/4273470 ）

在不知道“c”节点的嵌套性的情况下，如何将其值从“1”更改为“2”？我一直在使用 XML 包，但不是很清楚 - 大多数示例似乎处理提取而不是更新信息。

我也尝试过使用`xmlToList`，但是我也不知道如何识别/更新任意深度列表上的节点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:31:22.247

这是一个两步法。（`test`是`dput`您包含的输出）。

**找到通往的路径`$c`**

```
> xmlApply(test,names)
$a
  text 
"text" 

$b
  c   d 
"c" "d" 
```

**`$c`知道路径后替换**

```
xmlChildren(test[["b"]][["c"]]) <- "2" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T03:21:42.777

您可以（可能，几乎）总是想出循环和条件的强力组合，但它的确切结构和复杂性将取决于您的假设。

例如，假设已知最大深度为 2（父节点 =`c("a", "b")`和子节点 =`c("c", "d")`如示例中所示，加上已知的候选目标子节点列表（例如，“c”和“d”），但未知父节点-child 关系，你可以这样做：

```
replacement.list <- list(c = 2)

test.list <- xmlToList(test)
parent.names <- names(test.list)
for(replacement.name in names(replacement.list)){
  for(parent.name in parent.names){
    child.names <- names(test.list[[parent.name]])
    if(replacement.name %in% child.names){
      xmlChildren(test[[parent.name]][[replacement.name]]) <- replacement.list[[replacement.name]]
    }
  }
} 
```

更新：使用递归函数的更优雅的方法在这里：[https ://stackoverflow.com/a/26154446/199217](https://stackoverflow.com/a/26154446/199217)

# python - python文件读取缓冲区边界

> ID：13851897
> 
> 赞同：0
> 
> 时间：2012-12-13T02:16:46.613
> 
> 标签：python, file-io

当我们使用函数 open() 打开文件时，我们可以设置缓冲区大小以提高性能。但是我只是怀疑我们是否设置了1024，但是文件中的数据是这样的：

1999999999 3232344 54354364576 2343243254 6453623453245r3245235 5342453245233333333333333333 534545454364536 4355545...

所以我不知道这是否会切断一个数字，就像第一次阅读一样，缓冲区将是 1999999999 3232344 54354364576 2343243254 6453623453245r3245235 53424532,

接下来我们读取缓冲区将是 45233333333333333333 534545454364536 4355545，依此类推。

还是python的缓冲工具解决了这个问题？谁能给我一些指示？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:33:14.137

如果您使用不带任何参数的 read 方法，它将返回整个文件内容。如果您只想一次读取文件的一部分，则可以使用 size 参数。

有关更多信息，请参阅文档[http://docs.python.org/2.7/tutorial/inputoutput.html#reading-and-writing-files](http://docs.python.org/2.7/tutorial/inputoutput.html#reading-and-writing-files)

# java - 将 PDFStampers 中的两个 pdf 内存流合并为一个 2 页的内存流

> ID：13851905
> 
> 赞同：0
> 
> 时间：2012-12-13T02:18:27.150
> 
> 标签：java, pdf, merge, itext, memorystream

这是我对 .NET 的 iText5 的第一次体验，到目前为止，除了一项任务外，非常成功。

我创建了两个 VB.Net 类，每个类都成功返回一个有效的 MemoryStream，其中包含一个单页 PDF 文档，该文档可以单独返回到浏览器并显示，也可以附加并通过电子邮件发送。

我想知道如何将两个流合并为一个包含两页文档的流，以便我可以将文档作为单个附件发送，将流返回到浏览器以显示一个包含两个页面的文档。

此代码将在我的代码隐藏页面中用于在创建后返回并通过电子邮件发送内容。正如您在附加代码中看到的那样，我想提供一个流，其中包含每个当前文档的单独页面。在下面的代码中，标识符`EitherSingleStream`显示了我单独插入每个流的位置，并且该代码适用于该单个页面。

一些代码可能是多余的，它是我第一个用于 .NET 郊游的 iText5，任何帮助将不胜感激。我到目前为止的代码如下。

```
Private Sub btnSubmit_Click(sender As Object, e As System.EventArgs) Handles btnSubmit.Click
    Dim Emplid As String = txtEMPLID.Text,
        BankInfo As String = txtBankInfo.Text,
        AsOfDate As String = Request.Form("AsOfDate")

    lEmp = New VOELibrary.Employee(Emplid)

    lEmp.EarningsAsOfDate = AsOfDate
    lEmp.EarningsYears = 3
    lEmp.LoadEarningsSummary()
    lEmp.LoadEmploymentHistory()

    ' request logging meta data object
    Dim FormRequest As New VOELibrary.FormRequest

    ' Function that uses first template and Styamper to return first document stream
    Dim FM1005 As New VOELibrary.FannieMae1005(lEmp, BankInfo, UserInfo)
    Dim streamForm1005PDF As MemoryStream = FM1005.PDFStream

    ' Function that uses second template and stamper to return second docuemnt stream
    Dim VOESummary As New VOELibrary.VOESummary(lEmp, UserInfo)
    Dim streamVOESummaryPDF As MemoryStream = VOESummary.PDFStream

    *EitherSingleStream*.Position = 0

    MailPDF(*EitherSingleStream*, FormRequest)

    *EitherSingleStream*.Position = 0

    Dim response As HttpResponse = HttpContext.Current.Response
    response.Clear()
    response.AddHeader("Content-Disposition", "attachment; filename= FM1005.pdf")
    response.ContentType = "application/pdf"
    response.BinaryWrite(*EitherSingleStream*.ToArray())
    response.Flush()
    response.End()

    With FormRequest
        .Req_UID = UserInfo(0).ToString
        .Req_UserName = UserInfo(1).ToString
        .EMPID = lEmp.EmplID
        .FormDate = Date.Now.ToShortDateString
        .Requestor = BankInfo
        .AsOfDate = AsOfDate
        .Log()
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:03:33.160

您将修改函数以返回 PdfPage 而不是整个文档，然后将页面组合到另一个函数中，并在组合它们后输出 MemoryStream。

或者您将创建一个函数来获取一组文档，然后对于文档中的每个 PdfPage，您将向新文档添加一个新页面并返回该页面。

请参阅[如何将不同的文档合并为一个？](https://stackoverflow.com/questions/5941715/how-to-merge-different-documents-into-single-pdf?rq=1)

# jquery-mobile - 用于输入样式的 jQuery Mobile

> ID：13851907
> 
> 赞同：0
> 
> 时间：2012-12-13T02:18:38.360
> 
> 标签：jquery-mobile

使用 jQuery Mobile，输入字段的样式似乎都像这样

![在此处输入图像描述](../Images/7f5ede6c0c788443895ab926e8b08f0b.png)

但大多数移动应用程序，或者至少是 iPhone，这些领域往往被定义为

![在此处输入图像描述](../Images/607007102fda9db9bd2a5f0bae955ec4.png)

如何让 jQuery Mobile 使用更标准的输入样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:44:00.587

移动 Web 和本机应用程序之间存在一些真正的权衡，但是当您开始将两者混合时，UI 会变得混乱。

jQuery Mobile 在许多移动平台上呈现了一个非常相似的 Web 外观界面，我相信这是它最大的优势之一。用户看到 Web 并体验 Web 般的交互。

[像 Telerik 的Kendo](http://www.kendoui.com/)这样的框架在 iOS、Android 和 BlackBerry 上呈现非常原生的界面，但它们并没有以原生方式感受或交互，这令人困惑。用户看到的是原生的，但体验的是网络交互。

如果您真的想要原生，请考虑其他框架。

# php - 如何在 PHP 中更新用户会话？

> ID：13851908
> 
> 赞同：1
> 
> 时间：2012-12-13T02:18:39.257
> 
> 标签：php

当用户登录到我的站点时，我会获取他们所有的用户信息并将其存储在一个名为`user_info`. 这样我就不必进行连续的数据库查找来获取几乎每个页面上都需要的有关用户的常见信息。当 var 转储时，用户信息会话如下所示：

```
array(17) {
  ["user_id"]=>
  string(7) "1165771"
  ["username"]=>
  string(2) "Jake"
  ["who"]=>
  string(1) "1"
  ["seeking"]=>
  string(1) "2"
  ["orientation"]=>
  string(1) "1"
  ["dob"]=>
  string(10) "1985-07-08"
  ["zip"]=>
  string(5) "25140"
  ["email"]=>
  string(17) "foo@bar.com"
  ["account_status"]=>
  string(1) "1"
  ["role"]=>
  string(1) "1"
  ["paused"]=>
  string(1) "0"
  ["latitude"]=>
  string(11) "37.89955100"
  ["longitude"]=>
  string(12) "-81.52641100"
  ["region"]=>
  string(2) "WV"
  ["city"]=>
  string(5) "NAOMA"
  ["avatar"]=>
  string(21) "1165771_50c6816a8fad1"
  ["email_setting"]=>
  string(1) "1"
} 
```

现在有一个“帐户设置”页面，用户可以在其中更新他们的一些信息。因此，如果他们更改了他们的用户名，例如我这样做是为了更新他们的会话，以便它现在包含新值：

```
$_SESSION['user_info']['username'] = 'NEW VALUE'; 
```

现在问题来了。如果我决定在管理面板中审核时禁止用户，那么他们的帐户状态将在数据库中从 1（表示活跃）更新为 2（表示被禁止）。但是，要使此更改反映在他们的 user_info 会话中，我不能这样做：

```
$_SESSION['user_info']['account_status'] = 2; 
```

因为它只会在我的计算机上更新我的用户信息，而不是在他/她的计算机上更新用户的会话。他们将能够继续使用该网站，即使他们在技术上被禁止，直到他们注销并尝试重新登录。

然后他们将被阻止进入，因为为了让登录 SQL 查询返回 true，除了正确获取凭据之外，用户还必须具有 1 的帐户状态。

## 问题

1.  当我更改个人用户的帐户时，如何更新他们的会话。

2.  如何从我的服务器中完全删除用户的会话，以便他们立即注销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:29:11.163

如果您需要此更改立即生效，那么据我所知，您必须检查每个页面上的用户状态，如果用户被禁止，请采取适当的措施。

[这个答案](https://stackoverflow.com/a/1149835/505722)建议更改文件作为替代方案，但即使作者也不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:31:26.317

> ```
> How can I update the session of an individual user when I make a change to their account. 
> ```

就我个人而言，我只是切换到数据库会话 - 在代码开头轮询数据库一次，以将所有用户数据放入一个变量中。

这样，如果在页面更改期间管理员权限发生更改，用户会立即拥有新的访问级别。

> ```
> How I can delete a user's session completely from my server so they are immediately logged out. 
> ```

然后，您还可以从数据库中“删除”一个会话 - 强制用户注销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T02:32:22.897

只需在每次页面加载时添加对会话的检查。例如，有一个数据库表，您可以在其中临时编写活动会话。如果用户重新加载并且表中没有这样的条目，他必须再次登录并重写会话。如果他注销或者你有 3 把他踢出去，你只需删除或修改条目。这也可以成为一个经典的工具——目前无论用户在sit3 ecc...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T02:35:36.750

另一种解决方案（而不是直接断开连接）是向会话添加时间戳并每 xx 分钟刷新一次（如果会话数据早于 xx 分钟，则执行数据库查询）。

这样，被阻止的用户不会立即被踢出，但您可以控制时间并减少数据库查询的数量（每 xx 分钟而不是每个请求）。

However, I would first check if the queries to the user database really have that big of an impact.

# javascript - 为什么在 JavaScript 中必须传递一个参数，即使它不会在函数内部使用？

> ID：13851909
> 
> 赞同：0
> 
> 时间：2012-12-13T02:18:41.470
> 
> 标签：javascript

不确定这是否是一个愚蠢的问题。我已经开始使用一些 JavaScript 框架，当我看到一个没有在函数内部使用的参数时，我总是感到困惑。

一个[主干](http://backbonejs.org/)示例（**模型**arg）：

```
var Todo = Backbone.Model.extend({
  validate: function(attribs){
    if(attribs.title === undefined){
      return "Title can't be undefined";
    }
  },

  initialize: function(){
    console.log('This model has been initialized');
    this.on('error', function(model, error){
      console.log(error);
    });
  },
}); 
```

[Express](http://expressjs.com/)示例（**req**和**下一个**参数）：

```
app.use(function(err, req, res, next){
  console.error(err.stack);
  res.send(500, 'Something broke!');
}); 
```

所以，我想知道，这些值会被忽略吗？如果你把它们排除在外会发生什么？为什么必须首先将它们包括在内？（我习惯这样的想法，如果一个函数传递一个参数是因为它将在函数中使用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:27:06.060

在*初始化*的情况下：

未使用变量*模型，但**错误*是。因为错误是第二个参数，模型必须作为占位符传递。

*在使用*中也是如此：

变量*req*没有​​被使用，但它作为占位符是必需的，因此可以使用*res 。*

* * *

为什么函数的参数似乎没有被使用？

也许是为了向后兼容或可扩展性。

我假设这些都是开源库（我从来没有使用过）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T02:29:13.287

如果忽略这些值，则不会发生任何事情，并且效果也很好。不管这些值是否被忽略，无论你是否使用它们，它们实际上都是传入的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T02:31:49.247

您不必这样做，除非您使用的是在您不使用的参数之后的参数。即使这样，您也可以在函数中使用参数对象来获取正确索引处的参数。

```
function myFunc(){
 console.log(arguments);
}

myFunc(1,2,3,4,5,6); // logs 1,2,3,4,5,6 
```

但是，在文档中，最好让开发人员知道回调中注入了哪些参数，以便开发人员可以清楚地了解延续配置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T03:21:41.697

你是对的，如果你不使用它们，这些参数将被忽略。此外，它们可以安全地排除在外。但是，如果您只想访问第二个参数，则需要将第一个参数作为占位符。

至于为什么会有这些论点？重要的是要了解您传入的是回调函数。然后，您传递给它的函数稍后会调用此回调。因此，调用回调函数并传入这些参数的是框架提供的函数。框架无法知道您的特定用例是什么，并且知道您的回调需要哪些数据的确切方法。因此，框架的作者传递了几个带有足够数据的参数，以覆盖尽可能多的用例。虽然您的回调函数没有使用这些参数，但使用这些框架的其他开发人员可能正在编写一个使用这些参数的回调。

# c# - 调用数组时替换 foreach 的 C#“First”-like 语句

> ID：13851910
> 
> 赞同：0
> 
> 时间：2012-12-13T02:18:48.303
> 
> 标签：c#, arrays, foreach, nvelocity

我对 C# 很陌生，但我需要更改一个查看数组的小函数。在我正在处理的代码中，foreach 用于遍历项目数组并将它们作为列表项呈现在网页上。现在，我必须找到类似这样的各种代码块，并将它们更改为不循环遍历整个数组，而是选择特定项目并渲染它们。

如果我只想拉出数组中绝对最新的项目，我该怎么做？我需要更改的示例：`#foreach($product in $Website.Products)`需要更改为类似`#firstitem($product in $Website.Products)`

这是上下文的整个块：

```
 <div class="slider-content">
        #if($Website.Products.Count != 0)
        <ul class="slider-list">
            #foreach($product in $Website.Products)
            <li class="slider-page">
                <div class="vdd-container">
                    <div class="vdd">
                        <blockquote>
                            <span class="quote-open"></span>
                            <q><span>${product.Message}</span></q>
                            <span class="quote-close"></span>
                        </blockquote>
                    </div>
                </div>
                <cite>
                    <strong class="pnx">${product.Name}</strong>
                </cite>
            </li>
            #end
        </ul>
        #else
        <div class="not-found">No products in store.</div>
        #end
    </div> 
```

同样，只需要输出第一项，而不是循环执行每一项。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:25:32.203

看看 LINQ`First()`和/或`FirstOrDefault()`扩展方法。它们允许您获得任何`IEnumerable<T>`. 您还可以指定必须满足的条件

[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx)

```
//Gets the first product in the Products collection
var firstProduct = Website.Products.First();

//Gets the first product where a given condition is true
var firstExpensiveProduct = Website.Products.First(p => p.Cost > 100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T02:23:41.563

您应该能够通过多种方式做到这一点。

1.  您可以使用数组访问器：`$Website.Products[0]`
2.  ~~您可以使用 LINQ：`$Website.Products.First()`~~

~~使用简单数组时，第一个选项更有效。后一个选项在某些情况下可能看起来更好，并且如果您使用某些类型的集合（而不是简单的数组），可能会表现得更好。~~

* * *

您的模板语法暗示您正在使用 nVelocity 模板引擎。如[其他 SO questions](https://stackoverflow.com/q/5082908/829970)中所述，nVelocity 似乎无法处理扩展方法。由于`First()`是扩展方法，这意味着您不能使用它。

数组访问器应该可以工作。

# image - 如何从 Lua 中的 base 64 字符串生成图像文件？

> ID：13851912
> 
> 赞同：3
> 
> 时间：2012-12-13T02:19:03.313
> 
> 标签：image, lua, base64

我可以从 WCF 获取 base 64 字符串，需要通过 Lua 将其转换为图像文件吗？有人对此有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:09:22.163

你可以用 LuaSocket 做这样的事情：

```
local ltn12 = require "ltn12"
local mime = require "mime"

mystring = "somedata"
myoutfile = "out.gif"

ltn12.pump.all(
  ltn12.source.string(mystring),
  ltn12.sink.chain(
    mime.decode("base64"),
    ltn12.sink.file(io.open(outfile,"w"))
  )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:13:43.450

如果您使用的是 luarocks：

```
luarocks install lbase64 
```

还要检查一下：

[https://github.com/LuaDist/lbase64](https://github.com/LuaDist/lbase64)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:52:40.180

[在http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#lbase64](http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#lbase64)有一个用于 Lua 的 base64 C 库。

# iphone - iphone游戏加载/保存/配置级别

> ID：13851913
> 
> 赞同：2
> 
> 时间：2012-12-13T02:19:07.707
> 
> 标签：iphone, ios, cocos2d-iphone

我想通过 plist 或某种平面文件设置我的 iphone 游戏的每个级别的配置。这样做的一个缺点是用户可能会打开应用程序并更改平面文件。我现在正在考虑将其硬编码为say`Config`类的实例。这是一个好主意吗？保存/加载/配置级别的传统方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:45:23.283

我经常使用的方法有两个：首先，将数据写成数据而不是文本，只是为了让它不那么明显。如果您使用的是 plist，则可以将其序列化为 NSData 元素。其次，创建数据的散列（SHA-1 等），加盐和/或与程序内部的某些值连接，并将散列存储在数据旁边或其他地方。然后当数据被读回时，您可以验证它没有被篡改。

您可以以各种方式混淆数据，或者在存储之前对其进行实际加密。然而，加密具有出口影响。

# csv - 如何在 tcl 中拆分逗号分隔值

> ID：13851914
> 
> 赞同：1
> 
> 时间：2012-12-13T02:19:28.647
> 
> 标签：csv, tcl

我在文件中有几行用逗号分隔，我想将逗号分隔的值添加到列表中。我该怎么做？拆分命令给了我一个列表。但我想维护数组以保存这些值。

```
 For example : Jack,John,Ted 
```

我想创建一个数组来保存这些值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:54:47.643

很可能 Tcl 列表实际上是满足您需求的正确数据结构。对 Tcl 的一个常见误解是它的`list`数据结构类似于传统的链表数据结构，具有其所有含义（例如 O(n) 访问时间）。事实上，Tcl 实际上`list`是一个向量，通过 O(1) 访问元素，以及通过`foreach`命令进行高效枚举。相比之下，Tcl`array`实际上是一个哈希表，这可能是您想要的——但如果您只需要遍历元素或有效地访问特定元素，那么 Tcl`list`是完美的。

要遍历元素，请使用`foreach`，如前所述：

```
foreach name $values {
    puts $name
} 
```

要访问特定元素，请使用`lindex`. 请记住，列表是 0 索引的，因此索引 2 是列表中的第三个元素：

```
puts [lindex $values 2] 
```

# php - 拖放图像上传在服务器上不起作用

> ID：13851918
> 
> 赞同：3
> 
> 时间：2012-12-13T02:20:00.227
> 
> 标签：php, javascript, ajax, drag-and-drop, draggable

我正在尝试实现拖放图像上传。我在网上找到了一个相当简单的脚本并适应了我的使用。在我的本地安装中，文件上传非常好，但不是在服务器上。从我的调试尝试中，$_SERVER['HTTP_X_FILENAME'] 甚至没有被 php 设置。

我尝试了以下方法： - 确保上传文件夹设置为 755 - 更改 php 临时上传路径并增加允许的最大文件大小

不会发生任何类型的 php 或 js 错误。因为我有 die(print_r($_SERVER)); 在 php 中，我使用 chrome 检查器获得了 $_SERVER 转储，它不包含 HTTP_X_FILENAME 索引。

我的PHP是：

```
<?php
$fn = (isset($_SERVER['HTTP_X_FILENAME']) ? $_SERVER['HTTP_X_FILENAME'] : false);

if ($fn) {

      // AJAX call
      file_put_contents(
        '../usr/photos/' . $fn,
        file_get_contents('php://input')
       );
       echo "$fn uploaded";
       exit();

}
else {
      // form submit
  if(!$_FILES['fileselect']) die(print_r($_SERVER));
  else $files = $_FILES['fileselect'];

  foreach ($files['error'] as $id => $err) {
    if ($err == UPLOAD_ERR_OK) {
        $fn = $files['name'][$id];
        move_uploaded_file(
            $files['tmp_name'][$id],
            '../usr/photos/' . $fn
        );
        echo "<p>File $fn uploaded.</p>";
    }
    }
 } 
```

js如下：

//拖放照片上传(function() {

```
 // getElementById
    function $id(id) {
        return document.getElementById(id);
    }

    // output information
    function Output(msg) {
        var m = $id("messages");
        m.innerHTML = msg + m.innerHTML;
    }

    // file drag hover
    function FileDragHover(e) {
        e.stopPropagation();
        e.preventDefault();
        e.target.className = (e.type == "dragover" ? "hover" : "");
    }

    // file selection
    function FileSelectHandler(e) {

        // cancel event and hover styling
        FileDragHover(e);

        // fetch FileList object
        var files = e.target.files || e.dataTransfer.files;

        // process all File objects
        for (var i = 0, f; f = files[i]; i++) {
            ParseFile(f);
            UploadFile(f);
        }

    }

    // output file information
    function ParseFile(file) {

        /*Debug*/
        Output(
            "<p>File information: <strong>" + file.name +
            "</strong> type: <strong>" + file.type +
            "</strong> size: <strong>" + file.size +
            "</strong> bytes</p>"
        );

        // display an image
        if (file.type.indexOf("image") == 0) {
            var reader = new FileReader();
            reader.onload = function(e) {
                Output(
                    "<p>" +
                    //"<strong>" + file.name + ":</strong><br />" +
                    '<img width="130" height="100" src="' + e.target.result + '" />' +
                    '<br />' +
                    '<input type="text" name="photo_name" value="'+ file.name +'" />' +
                    '<br />' +
                    '<input type="text" name="photo_caption" value="Caption" /></p>'
                );
            }
            reader.readAsDataURL(file);
        }

        // display text
        if (file.type.indexOf("text") == 0) {
            var reader = new FileReader();
            reader.onload = function(e) {
                Output(
                    "<p><strong>" + file.name + ":</strong></p><pre>" +
                    e.target.result.replace(/</g, "&lt;").replace(/>/g, "&gt;") +
                    "</pre>"
                );
            }
            reader.readAsText(file);
        }

    }

    // upload JPEG files
    function UploadFile(file) {

        // following line is not necessary: prevents running on SitePoint servers
        if (location.host.indexOf("sitepointstatic") >= 0) return

        var xhr = new XMLHttpRequest();
        if (xhr.upload && (file.type == "image/jpeg" || file.type == "image/png") && file.size <= $id("MAX_FILE_SIZE").value) {

            // create progress bar
            var o = $id("progress");
            var progress = o.appendChild(document.createElement("p"));
            progress.appendChild(document.createTextNode("upload " + file.name));

            // progress bar
            xhr.upload.addEventListener("progress", function(e) {
                var pc = parseInt(100 - (e.loaded / e.total * 100));
                progress.style.backgroundPosition = pc + "% 0";
            }, false);

            // file received/failed
            xhr.onreadystatechange = function(e) {
                if (xhr.readyState == 4) {
                    progress.className = (xhr.status == 200 ? "success" : "failure");
                }
            };

            // start upload
            xhr.open("POST", $id("upload").action, true);
            xhr.setRequestHeader("X_FILENAME", file.name);
            xhr.send(file);

        }

    }

    // initialize
    function Init() {

        var fileselect = $id("fileselect"),
            filedrag = $id("filedrag"),
            submitbutton = $id("submitbutton");

        // file select
        fileselect.addEventListener("change", FileSelectHandler, false);

        // is XHR2 available?
        var xhr = new XMLHttpRequest();
        if (xhr.upload) {

            // file drop
            filedrag.addEventListener("dragover", FileDragHover, false);
            filedrag.addEventListener("dragleave", FileDragHover, false);
            filedrag.addEventListener("drop", FileSelectHandler, false);
            filedrag.style.display = "block";

            // remove submit button
            submitbutton.style.display = "none";
        }

    }

    // call initialization file
    if (window.File && window.FileList && window.FileReader) {
        Init();
    }

})(); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-12T09:58:19.560

你现在可能已经解决了你的问题，但我在这里发布这个解决方案是为了帮助其他遇到同样问题的人。在您的 js 中，有一行内容为

```
 xhr.setRequestHeader("X_FILENAME", file.name); 
```

但应该阅读

```
 xhr.setRequestHeader("X-FILENAME", file.name); 
```

since underscores are deprecated in later Apache releases (see also [Header names with underscores ignored in php 5.5.1 / apache 2.4.6](https://stackoverflow.com/questions/18185366/header-names-with-underscores-ignored-in-php-5-5-1-apache-2-4-6))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:13:00.090

我在我的一个 Ubuntu WAMP 安装中遇到了这个问题。您的上传 URL（在 Javascript 方面指定的 POST URL）需要是完全限定路径而不是相对路径。但是，我看不到该值，但似乎`$id("upload").action`是您代码中任何内容的值。如果您有权访问它们，您可以通过查看 apache 日志来确认这是原因。如果您在尝试发送文件时看到 404 错误，那么这就是您的问题。那是假设请求甚至完全命中您的服务器。

# security - 没有浏览器的独立应用程序授权？

> ID：13851921
> 
> 赞同：4
> 
> 时间：2012-12-13T02:20:25.750
> 
> 标签：security, google-api, oauth-2.0, google-http-client

是否需要浏览器重定向才能获得授权和访问令牌？有没有办法以编程方式获得自动化？我有点惊讶我在 OAuth2 谷歌文档中发现了这个：

[https://developers.google.com/accounts/docs/OAuth2#scenarios](https://developers.google.com/accounts/docs/OAuth2#scenarios) > 章节安装的应用程序

> 序列首先将浏览器（嵌入在应用程序中的浏览器或系统浏览器）重定向到具有一组查询参数的 Google URL，这些参数指示应用程序所需的 Google API 访问类型...

我们在我们的谷歌帐户的配置文件中运行包含用户名和密码的小型 Java 实用程序应用程序。我希望有办法在没有任何浏览器交互的情况下获得自动化和访问令牌（当我们在虚拟服务器上将它作为 cron 作业运行时，这有点难）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:32:35.600

这是关于凭证持有者（用户）和身份验证实体（它可以通过谷歌应用程序的服务器、openID 或 facebook ......）之间的可信路径。使用 OAuth 的人将他的凭据提供给他信任的服务器，而该服务器又不会泄露有关他的任何秘密数据，从而为您的应用程序提供身份保证。

所以你必须为 Oauth 提供者提供可信的路径。这可以通过在您的应用程序中打开一个简单的 http 服务器并打开指向它的用户浏览器来完成，然后使用浏览器完成身份验证，并且在身份验证完成后，您的服务器将恢复 OAuth 响应并且您的应用程序可以对用户进行身份验证。

就是这样，我不会将我的“全局”凭据输入到某个应用程序，并相信它不会在以后复制和使用它们。您已经在特定的 OAuth 提供商中注册，只有他应该知道并接收您的凭据。

# session - 使用 sha256 播放框架会话返回错误值

> ID：13851923
> 
> 赞同：2
> 
> 时间：2012-12-13T02:20:36.630
> 
> 标签：session, playframework

我在播放框架 1.2.4 中的会话有问题。当我将特定字符串（“testDude5”）的 SHA256 哈希添加到会话并随后检索它时，值不一样。像“testDude1”这样的其他字符串不会发生这种情况。这是重现结果的示例代码。

```
package controllers;

import java.io.UnsupportedEncodingException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import play.mvc.Controller;

public class ExampleController extends Controller
{

    public static final String test1 = "testDude1";
    public static final String test2 = "testDude5";

    public static void set()
    {
        session.put("test1", getHash(test1));
        session.put("test2", getHash(test2));
    }

    public static void get()
    {
        String output = "";

        output += "Test 1 compare: ";
        output += session.get("test1").equals(getHash(test1)) ? "success" : "failed";
        output += "\n";

        output += "Test 2 compare: ";
        output += session.get("test2").equals(getHash(test2)) ? "success" : "failed";
        output += "\n";

        renderText(output);
    }

    /**
     * Generates the hash value for a password.
     * 
     * @param password
     * @return hash
     */
    public static String getHash(String password)
    {
        // Create an digest object
        MessageDigest md;

        try
        {
            // Try to get sha-265
            md = MessageDigest.getInstance("SHA-256");

            // Encrypt the password
            md.update(password.getBytes("UTF-8"));

            // Get the encrypted password
            byte[] digest = md.digest();

            // Convert byte array to String
            String str = new String(digest);

            // Return encrypted password
            return str;
        }
        catch (NoSuchAlgorithmException e)
        {
            e.printStackTrace();
        }
        catch (UnsupportedEncodingException e)
        {
            e.printStackTrace();
        }

        return null;
    }

} 
```

我对此完全感到困惑。有谁知道那里发生了什么。感谢您的任何建议。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:42:22.747

问题出在您的 getHash 函数中。播放框架会话没有任何问题。

```
public static String getHash(String password) {
    ....
    // Get the encrypted password
    byte[] digest = md.digest();
    // Convert byte array to String
    String str = new String(digest); // DON'T do this with digest! 
    // The behavior is unspecified. 
```

根据Java API doc，这个构造函数“通过使用平台的默认字符集解码指定的字节数组来构造一个新的字符串......**当给定字节在默认字符集中无效时，这个构造函数的行为是未指定的**”。但是，您的哈希摘要可能包含在默认字符集中无效的内容。

Play 框架提供了一个很好的实用函数 Codec.byteToHeString() 将 byte[] 中的摘要转换为十六进制字符串。这可能正是您所需要的。

```
 // Codec resides in play.libs
    String str = Codec.byteToHexString(digest); 
```

# iphone - lowercaseStringWithLocale 有什么作用？

> ID：13851924
> 
> 赞同：1
> 
> 时间：2012-12-13T02:20:37.863
> 
> 标签：iphone, objective-c, ios, localization, nsstring

有谁确切知道 NSString 的新（iOS 6）lowercaseStringWithLocale 方法是做什么的？[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)非常简陋，我在 Apple的开发者论坛中没有找到对这种方法的单一引用。

在本地化我的应用程序时，我有兴趣将字符串文件中的单词在句子中出现时更改为小写——德语版本除外，其中某些单词应始终保持大写。这就是这个方法的目的吗？还是完全不同的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:27:03.700

中的讨论[`lowercaseString`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)可能会有所启发：

> **注意：**此方法执行规范（非本地化）映射。它适用于需要稳定结果而不取决于用户的区域设置偏好的编程操作。对于呈现给用户的字符串的本地化大小写映射，请使用相应的`lowercaseStringWithLocale:`方法。

因此，如果您出于不区分大小写的数据库查找等目的计算字符串的小写版本，请使用`lowercaseString`. 如果您打算向用户显示结果，请使用`lowercaseStringWithLocale`.

请注意，`lowercaseStringWithLocale`不会根据实际单词来决定单词是否应该小写。它会做你要求它做的事情，并且不会质疑你的动机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:43:31.787

小写/大写确实取决于语言环境。我知道的唯一例子（它是一个杀手，是许多全球化错误的根源）是土耳其语 i 问题。请参阅此处了解概述： http: [//www.codinghorror.com/blog/2008/03/whats-wrong-with-turkey.html](http://www.codinghorror.com/blog/2008/03/whats-wrong-with-turkey.html)

基本上，当你大写“Hi”时，你会得到“HI”，除了土耳其，你会得到“Hİ”

同样，当您将“HI”小写时，您会得到“hi”，但土耳其除外，您会得到“hı”

# sql - Oracle SQL - Substr 没有删除足够的字符

> ID：13851926
> 
> 赞同：2
> 
> 时间：2012-12-13T02:20:48.540
> 
> 标签：sql, oracle, character-encoding, substr

我面临一个奇怪的问题。我有这样的代码。

```
insert into my_table
    substr(my_name,1,199) 
```

给出的错误是：

列的值太大...（实际：246，最大值：200）

看看我表中最大的名字，我有类似的东西：“8”x12"“

是否有可能发生了一些字符集的事情，所以当它插入时，字符数会增加？如果是这样，我该如何补救？我已经尝试在子字符串化之前显式转换为 UTF8，但这根本没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:44:22.683

我建议尝试：

```
insert into my_table(col)
    select cast(substr(my_name,1,199) as varchar(200)) 
```

（我总是在插入中包含明确的列名。）

显式转换为 varchar 可以解决引擎认为字符串太长的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T02:46:39.817

根据上述两个评论，您想检查基础知识。此外，如果您可以同时执行 substrb、substr on select 并观察差异，这也可能会有所帮助。

这是一篇很棒的[文章](http://gerardnico.com/wiki/database/oracle/byte_or_character)

> " 从历史上看，保存字母数字数据的数据库列是使用它们存储的字节数定义的。这种方法很好，因为当使用单字节字符集时，字节数等于字符数。随着多字节使用的增加支持全球化数据库的字符集带来了字节不再等同于字符的问题。VARCHAR2和CHAR类型支持两种指定长度的方法：以字节为单位：VARCHAR2（10字节）。这将支持最多10字节的数据，这可以在多字节字符集中最少两个字符。在字符中：VARCHAR2(10 char)。这将支持最多 10 个字符的数据，这可能是多达 40 个字节的信息。

**建议**

当使用 UTF8 等多字节字符集时，由于您的意图可能是定义一个实际上可以存储数据字符的列，您可以使用：

*   VARCHAR2/CHAR 定义中的 CHAR 修饰符。也就是说，使用 VARCHAR2(80 CHAR)，而不是 VARCHAR2(80)。

*   会话或系统参数 NLS_LENGTH_SEMANTICS 将默认行为从 BYTE 更改为 CHAR。

不建议在系统级别范围内更改此设置，而是在 SESSION 范围内更改。

它说，

人们经常遇到的两个问题是：

*   使用多字节字符集时，即 VARCHAR2(N) 不一定包含 N 个字符，而是 N 个字节。

*   VARCHAR2 的最大字节长度为 4,000，在 CHAR 中为 2,000：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-14T13:57:20.717

您还可以使用 substrb：

```
 insert into my_table
     substrb(my_name,1,199) 
```

这会将字符串限制为前 199 个字节，而不是字符。

# grails-orm - Grails 2.0 的多数据源特性是否支持关系？

> ID：13851927
> 
> 赞同：3
> 
> 时间：2012-12-13T02:20:55.777
> 
> 标签：grails-orm, grails-2.0

我正在尝试支持一些旧表，并且能够创建一个使用这些旧表的单独数据源的域。

但是，当我尝试从 a 中的单独数据源使用该域时`hasMany`，它会失败。

是否可以将 hasMany 与不同数据源上的域相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T13:16:43.227

不幸的是，您不能让 GORM 自动管理跨多个数据源的关联。但是，这意味着您可以很容易地编写代码来完成您正在寻找的内容并同时解决 GORM 的一些潜在性能问题。已经有一个[很好](https://stackoverflow.com/questions/18768667/grails-gorm-domain-association-across-two-datasources)的例子。

# facebook - 如何从 url 获取评论 facebook？

> ID：13851934
> 
> 赞同：1
> 
> 时间：2012-12-13T02:21:39.730
> 
> 标签：facebook, facebook-comments

我使用 facebook 评论作为网址（例如：[http](http://test.com/check.html) ://test.com/check.html ）

我用`https://graph.facebook.com/?ids=http://test.com/check.html`

结果无法显示来自该网址的评论，如何显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:46:29.013

试试这个：

[http://graph.facebook.com/comments/?ids=http://test.com/check.html](http://graph.facebook.com/comments/?ids=http://test.com/check.html)

希望能帮到你！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T02:32:14.317

你想访问什么？对于团体来说，这要困难得多。但是，总的来说，您需要我在下面描述的内容：

我不确定您是否有此信息，但您需要在 url 中有访问令牌。也就是说，你的 URL 应该是这样的：`'https://graph.facebook.com/[pageidhere]/feed?access_token=[access token here]'` 之后，你需要使用 json_decode($FBPageContent) 来轻松地遍历数据。

我使用上述信息（以及更多内容）制作的一个示例在这里：[http ://www.johnalibet.com/fb.php](http://www.johnalibet.com/fb.php)

如果您能提供更多信息，我会尽我所能完善这个答案。

# git - 文件重命名后git合并

> ID：13851936
> 
> 赞同：2
> 
> 时间：2012-12-13T02:22:24.387
> 
> 标签：git, version-control, merge, conflict, mv

我有两个文件`A`，并且`B`在master中。我创建了一个分支`feature`，我在其中修改了`A`和`B`。然后，其他人删除并重`B`命名`A`为`B`in `master`（使用 git mv）。

当我 merge `feature`into`master`时，git 比较`B`in`feature`和`B`in `master`，这与我预期的不一样，因为in`B`的内容实际上是`A`in master 的内容。

当我合并它时，是否有任何内置功能可以与`A`in链接？`feature``B``master`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:37:38.023

重命名文件以匹配任一侧或更改阈值百分比，直到 git 将它们视为同一个文件。我相信这是一个`-M`选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:28:28.350

`B`你的`master`分支会发生什么？如果`A`应该被调用`B`，那么为什么不在你的`feature`分支中重命名它。当然首先重命名`B`为其他类似的东西`C`，它会正常合并。

# ruby - 如何在中断前执行方法

> ID：13851939
> 
> 赞同：1
> 
> 时间：2012-12-13T02:22:39.847
> 
> 标签：ruby, interrupt

在编写 Ruby 脚本时，有没有办法在脚本因键盘中断而停止之前指定要执行的命令`Ctrl``C`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T02:26:01.553

[在Ruby 文档中`Interrupt`](http://www.ruby-doc.org/core-1.9.3/Interrupt.html)找到它，对于那些感兴趣的人

```
begin
  puts "Press ctrl-C when you get bored"
  loop {}
rescue Interrupt => e
  puts "Note: You will typically use Signal.trap instead."
end 
```

# css - 纯 CSS 解决方案 - 方形元素？

> ID：13851940
> 
> 赞同：24
> 
> 时间：2012-12-13T02:23:05.407
> 
> 标签：css, layout, width, aspect-ratio

如果我有`<div>`一个相对宽度（例如*width: 50%*），是否有一种简单的方法可以使其具有与高度相同的宽度而不使用 JavaScript？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-10-18T11:22:21.823

实际上可以通过我在 [这个博客上找到的这个巧妙的技巧来实现它](https://pagecrafter.com/maintain-aspect-ratio-for-html-element-using-only-css-in-a-responsive-design/)

```
#square {
   width: 100%;
   height: 0;
   padding-bottom: 100%;
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-13T03:05:19.880

## 不，是的（有点）

好的，所以简短的回答是“不”，不可能。很长的答案是，“是的”，考虑到某些约束和让步（即额外的 html 标记，以及对可以做什么的限制）。

鉴于此 CSS：

```
.square {
    position: relative;
    margin: 20px;
    display: inline-block; /* could be float */
    overflow: auto; /* UPDATE: if content may overflow square */
}
.sq-setter-w {
    width: 100%;
    height: auto;
    visibility: hidden;
}
.sq-setter-h {
    width: auto;
    height: 100%;
    visibility: hidden;
}
.sq-content {
    position: absolute;
    z-index: 1;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
} 
```

使用此 HTML：

```
<div class="square" style="width: 200px">
    <img src="http://dummyimage.com/50x50/000/fff.gif&text=50x50" class="sq-setter-w"/>
    <div class="sq-content">Here is content</div>
</div>
<div class="square" style="height: 100px">
    <img src="http://dummyimage.com/50x50/000/fff.gif&text=50x50" class="sq-setter-h"/>
    <div class="sq-content">Here is content</div>
</div>
<div class="extrawrapper">
<div class="square" style="width: 200px">
    <img src="http://dummyimage.com/50x50/000/fff.gif&text=50x50" class="sq-setter-w"/>
    <div class="sq-content">Here is content</div>
</div>
</div>
<div class="extrawrapper">
<div class="square" style="height: 100px">
    <img src="http://dummyimage.com/50x50/000/fff.gif&text=50x50" class="sq-setter-h"/>
    <div class="sq-content">Here is content</div>
</div>
</div> 
```

## 你可以让它做[这个小提琴显示](http://jsfiddle.net/UWERB/4/)的事情。

关键是：

1.  使用的图像必须是方形图像，因为它正在驱动比例大小（`img`元素是唯一可以进行这种比例工作的元素，因为它可以根据图像本身的比例确定其大小）。
2.  您必须知道是否要设置`width`或`height`以便您可以正确设置图像类以调整其大小。*（可选*）在自身上设置`width`or ，那么您无需担心将类设置为该值。我的演示假设您在包装器 div（我的班级）上设置了大小。`height``img``100%``.square`
3.  要使 the`div`折叠在哪个驱动比例大小的驱动器上`img`，您需要设置`display: inline-block`或 a （如上面的 css 中所述）。`float``div`
4.  因为#3，如果你想让它表现`div`得更像“块状”，你需要给它们一个额外的包装器`div`，就像第三个和第四个显示的那样。

*显然，这个解决方案涉及很多额外的标记。*所以在很多方面，最好说“只使用 javascript”，但我确实想证明它可以（至少在某些情况下）纯粹使用 HTML 和 CSS 来完成。

## 更新：显示灵活调整大小的可能性

[**请参阅此小提琴以了解驱动大小的百分比**](http://jsfiddle.net/UWERB/12/)，并使用此 html 示例（`width`设置为`30%`）：

```
<div class="square" style="width: 30%">
    <img src="http://dummyimage.com/50x50/000/fff.gif&text=50x50" class="sq-setter-w"/>
    <div class="sq-content">Here is content</div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-29T23:09:44.260

我今天需要实现类似的东西，并且对图像有相同的想法。我想检查其他可能性，谷歌把我带到了这里。

...你真的不需要图像`src`。`hash`如果你想要一个正方形，你可以简单地使用 a 。它保存了一个http请求。

如果你想获得不同的纵横比，你应该使用 a`src`虽然。如果您想获得 16:9 的比例，则图像应`16px`宽且`9px`高（尽可能小）

* * *

## 比较两种技术（请参阅此线程中的其他答案）

### `img`对比`padding-bottom`

这是一个显示版本兼容程度[的小提琴](http://jsfiddle.net/pixelass/V8Y5c/)`img`（也可以轻松处理`px`值（间隔将每秒调整“正方形”的大小）

如果您使用百分比值，两种技术都可以达到相同的结果，但填充版本不需要额外的标记 ( `<img src="#"/>`)

* * *

## 结论：

根据实现，每种技术都有其优缺点。

* * *

### HTML

```
<div class="floater">
    <div class="square square_noImg">
        <div class="inner">Hey blue you look totally squared</div>
    </div>
    <div class="square square_img">
        <img src="#"/>
        <div class="inner">Hey red you seem off</div>
    </div>
</div> 
```

### CSS

```
.floater {
    font-size: 0;
}
.square {
    position: relative;
    display: inline-block;
    width: 100px;
    margin: 0 5px; 
}
.square_noImg {
    padding-bottom: 100px;
    background: red;
}
.square_img {    
    background: blue;
}
img{
    width: 100%;
    height: auto;
    border: 0;
    visibility: hidden;
}
.inner {
    position: absolute;
    top: 10%;
    right: 10%;
    bottom: 10%;
    left: 10%;
    background: white;
    font-size: 14px;
    text-align: center;
    overflow: hidden;
    padding: 10px 5px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-14T11:41:18.837

回应@Dave 对@praveen-kumar 回答的评论的原生JS 方法：

```
var squareElement = function(el) {
    el.style.height = el.offsetWidth + 'px';
} 
```

并在任何地方使用它

```
squareElement(document.querySelector('your-selector')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T02:31:21.233

仅靠 CSS 无法做到这一点。使用 jQuery，你可以通过这样做来实现这一点

```
var chld = $('.child').width();
$('.child').css({'height':chld+'px'}); 
```

[在http://jsfiddle.net/4Jnfq/](http://jsfiddle.net/4Jnfq/)检查工作示例

* * *

可以在最后一次“根据内容调整大小”更新中找到仅 CSS 的解决**[方案](https://stackoverflow.com/a/9359039/607874)**。
虽然它适用于圆形，但您可以删除它`border-radius: 50%`以使其适用于正方形。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T02:32:05.180

不使用相对单位`%`，因为它们是相对于容器元素计算的。`px`但是，如果您使用类似的单位或`em`设置两个维度，则可以使元素成为正方形。

# header - 标头来源与主机

> ID：13851946
> 
> 赞同：36
> 
> 时间：2012-12-13T02:24:59.960
> 
> 标签：header, cross-domain

*我对Origin*和*Host* HTTP 标头的工作有疑问。

我有一个 Ajax 页面“ *Page A* ”，它将调用 Ajax 提要“ *Page B* ”。

我看到来自 Ajax 调用的“ *Page B ”的请求标头包含标头：*

```
Origin: http://example.com
Host: example.com 
```

但是，如果我直接调用“ *Page B* ”，请求标头将只包含`Host`标头：

```
Host: example.com 
```

`Origin`因此，我想知道和标头之间有什么区别`Host`，为什么它们会出现在非直接调用中？

可以在*Origin*之前添加并传递给服务器吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-12-14T02:44:24.440

Host 是请求被发送*到*的域。引入了此标头，因此托管站点可以在单个 IP 上包含多个域。

Origin 标头是请求源自的*域*。

始终包含 Host 标头。有时会包含 Origin 标头：它始终包含在跨域请求中（跨所有浏览器），在 Chrome/Safari 中，它也包含在同源 PUT/POST/DELETE 请求中。同源 GET 请求不包含 Origin 标头。

# android - 方向改变时如何在画布中重绘绘图

> ID：13851950
> 
> 赞同：2
> 
> 时间：2012-12-13T02:25:13.330
> 
> 标签：android, drawing, android-canvas

我的代码工作正常，直到桌子或设备旋转。旋转时，绘图被清除，我了解到它会发生，因为当设备旋转时，活动会重新启动。我的问题是如何重绘并将数据保存到 onSaveInstanceState。很多人说我必须使用onSaveInstanceState来保存绘图，但是当我必须保存的数据类型是Path时我不知道该怎么做。

这是我的代码片段

```
public class MyDrawView extends View implements OnTouchListener {
    MyDrawView drawView;
    float prevX = 0;
    float prevY = 0;

    private Bitmap mBitmap;
    private Canvas mCanvas;
    private Path mPath;
    private Paint mBitmapPaint;
    private Paint mPaint;
    private int w,h;
    private ArrayList<Path> paths = new ArrayList<Path>();
    private ArrayList<Paint> bitPaints = new ArrayList<Paint>();
    private ArrayList<Paint> pathPaints = new ArrayList<Paint>();
    Paint tempPaint;
    private String filename="";

    public MyDrawView(Context c,String filename) {
        super(c);
        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);

        this.filename=filename;
        setFocusable(true);
        setFocusableInTouchMode(true);
        this.setOnTouchListener(this);
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(Color.RED);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(6);
        tempPaint=new Paint(mPaint);
        mCanvas = new Canvas();
        mPath = new Path();
        if (rotated){
            setDefaultDrawing();
        }

    }
    public void setDefaultDrawing()
    {

    }
    public Bitmap getBitmap(){
        return this.mBitmap;
    }
    public void setStrokeWidth(float width){
        mPaint.setStrokeWidth(width);
    }
    public void setColor(int color){
        mPaint.setColor(color);
    }
    public String getFileName(){
        return this.filename;
    }
    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        this.w=w;
        this.h=h;
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
        Path tempPath=new Path(mPath);
        paths.add(tempPath);
        Paint tempPaint=new Paint(mPaint);
        pathPaints.add(tempPaint);
        Paint tempBitPaint=new Paint(mBitmapPaint);
        bitPaints.add(tempBitPaint);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

        canvas.drawPath(mPath, mPaint);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:07:19.727

我想通了，因为 Path 是一个自定义对象，所以我创建了一个保存 Path 的类对象，这样，我可以将类对象保存在我的 onSaveInstanceState 中并使用相同的类对象检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-02T07:41:26.843

对于任何其他偶然发现这一点的人。您需要创建一个包含 Path 的类，并且该路径需要实现 Parcelable。

例如

```
public static class CustomPath extends Path implements Parcelable {

    private Path path;

    public CustomPath() {

    }

    protected CustomPath(Parcel in) {
        path = (Path) in.readValue(Path.class.getClassLoader());
    }

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeValue(path);
    }

    @SuppressWarnings("unused")
    public final Parcelable.Creator<CustomPath> CREATOR = new Parcelable.Creator<CustomPath>() {
        @Override
        public CustomPath createFromParcel(Parcel in) {
            return new CustomPath(in);
        }

        @Override
        public CustomPath[] newArray(int size) {
            return new CustomPath[size];
        }
    };
} 
```

完成后，您需要将 CustomPath 保存在 Activity 方法中`onSaveInstanceState()`

例子

```
@Override
public void onSaveInstanceState(@NonNull Bundle outState) {
    super.onSaveInstanceState(outState);

    outState.putParcelable("_Canvas", _DrawingView.getPath());
} 
```

然后恢复你之前的 Canvas`onViewStateRestored()`

例子：

```
 @Override
    public void onViewStateRestored(@Nullable Bundle savedInstanceState) {
       super.onViewStateRestored(savedInstanceState);         
       _DrawingView.setPath(savedInstanceState.getParcelable("_Canvas"));
    } 
```

显然检查密钥是否存在并且 Bundle 不为空。

**如果您的画布**正在改变大小，则可以调整路径大小。添加以下代码

```
 Matrix scaleMatrix = new Matrix();
                    RectF rectF = new RectF();
                    path.computeBounds(rectF, true);
                    scaleMatrix.setScale(1.25f, 1.25f,rectF.centerX(),rectF.centerY());
                    path.transform(scaleMatrix); 
```

# android - AutoCompleteTextView 退格问题

> ID：13851951
> 
> 赞同：0
> 
> 时间：2012-12-13T02:25:17.103
> 
> 标签：android, autocompletetextview, backspace

任何人都可以查明我的代码中的问题所在。

当我按下退格键时，我的 AutoCompleteTextView 有奇怪的行为。起初，当我在文本框上键入时，它会显示正确的值。例如，我有一个字符串列表，即“ **Pallanos** ”、“ **Palana** ”、“ **Pandor** ”、“ **Pasdi** ”。

当我输入***Pal***时，会显示**Pallanos**和**Palana**。但是当我按下**退格键**时，建议保管箱**没有**刷新。我应该有四个结果，即上面的字符串。

**这是我的适配器**

```
class EmployeeAdapter extends ArrayAdapter<EmployeeDetails>{

Context context; 
int layoutResourceId;
ArrayList<EmployeeDetails> data;
ArrayList<EmployeeDetails> objects;
//EmployeeDetails data[] = null;

public EmployeeAdapter(Context c, int paramlayoutResourceId, ArrayList<EmployeeDetails> collection) { //EmployeeDetails[] collection) {
    super(c, paramlayoutResourceId, collection);
    this.layoutResourceId = paramlayoutResourceId;
    this.context = c;
    this.data = collection;
    this.objects = collection;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;

    if(row == null) {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, null);
    }

    EmployeeDetails emp = data.get(position);
    Departments dept = new Departments(context);
    AccountTypes accType = new AccountTypes(context);

    ((TextView) row.findViewById(R.id.tvMainHeader)).setText(emp.getFirstName() + ", " + emp.getLastName());
    ((TextView) row.findViewById(R.id.tvSubHeader)).setText(dept.GetDepartmentName(emp.getDepartmentID()).toString() + " - " + accType.GetAccountTypeName(emp.getAccountTypeID()).toString());
    ((ImageView) row.findViewById(R.id.imgHeader)).setImageResource(R.drawable.id_card);

    return row;
}

@Override
public Filter getFilter() {
    //return nameFilter;

    Filter nameFilter = new Filter() {

        public String convertResultToString(Object resultValue) {
            String str = ((EmployeeDetails)(resultValue)).getLastName();
            return str;
        }

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            ArrayList<EmployeeDetails> suggestions = new ArrayList<EmployeeDetails>();
            FilterResults filterresults = new FilterResults();

            if (constraint != null) {
                suggestions.clear();

                for (EmployeeDetails employee : objects) {
                    if (employee.getLastName().toLowerCase().startsWith(constraint.toString().toLowerCase())) {
                        suggestions.add(employee);
                    }
                }

                filterresults.values = suggestions;
                filterresults.count = suggestions.size();
            }

            return filterresults; 
        }

        @Override
        @SuppressWarnings("unchecked")
        protected void publishResults(CharSequence constraint, FilterResults results) {
            ArrayList<EmployeeDetails> filteredList = (ArrayList<EmployeeDetails>) results.values;

            if (filteredList != null && filteredList.size() > 0) {
                clear();
                for (EmployeeDetails employee : filteredList) {
                    add(employee);
                }
                notifyDataSetChanged();
            } else {
                notifyDataSetInvalidated();
            }
        }
    };

    return nameFilter;
} 
} 
```

下面的代码显示了我如何在 AutoCompleteTextView 中使用适配器

```
 EmployeeAdapter adapter = new EmployeeAdapter(this, R.layout.list_row, empFunction.GetAllEmployees());

    AutoCompleteTextView empAuto = (AutoCompleteTextView)findViewById(R.id.auto_Employee);
    empAuto.setThreshold(1);
    empAuto.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:17:45.960

我找到了解决问题的方法。但它有点慢。如果有人可以优化，请随时发布您的答案。:)

我没有将**`object`**( *`this.objects = collection`*) 变量放在我的构造函数中，而是将它放在`performFiltering`. **`objects`**这个想法是在每次`performFiltering`方法触发时刷新变量。

有些人添加`TextWatcher`了 TextView 来刷新他们的适配器。

**下面是我修改后的 perFormFiltering**

```
 protected FilterResults performFiltering(CharSequence constraint) {
            EmployeeDetails empFunction = new EmployeeDetails(context);
            ArrayList<EmployeeDetails> suggestions = new ArrayList<EmployeeDetails>();
            FilterResults filterresults = new FilterResults();

            if (constraint != null) {
                suggestions.clear();
                objects = empFunction.GetAllEmployees();
                for (EmployeeDetails employee : objects) {
                    if (employee.getLastName().toLowerCase().startsWith(constraint.toString().toLowerCase())) {
                        suggestions.add(employee);
                    }
                }

                filterresults.values = suggestions;
                filterresults.count = suggestions.size();
            }

            return filterresults; 
        } 
```

谢谢

# asp.net-mvc - 我的“索引”视图中的“创建”视图，这可能吗？

> ID：13851958
> 
> 赞同：2
> 
> 时间：2012-12-13T02:25:53.907
> 
> 标签：asp.net-mvc, asp.net-mvc-4, razor

我正在使用带有 EF 的 ASP.NET MVC 4，我有一个带有索引和创建视图的 PostController。我希望将两者放在同一页面上以添加帖子，并将其可视化在同一页面上。我该怎么做 ？

感谢您的建议

****___***编辑***__****

 **控制器 ：

```
 public ActionResult Index()
        {
            return View(db.Posts.ToList());
        }

        [HttpGet]
        public ActionResult Create()
        {
            return PartialView("_Create", **Here I can't declare model**);
        }

        [HttpPost]
        public ActionResult Create(FormCollection values)
        {
            var post = new Post();
            TryUpdateModel(post);

            if (ModelState.IsValid)
            {
                /** somme code **/

                db.Posts.Add(post);
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View("_Create", post);
        } 
```

我的 _Create 部分视图：

```
@model MyProject.Models.Post

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    /**some stuff **/
} 
```

我的索引视图：

```
@model IEnumerable<MyProject.Models.Post>

@{
    ViewBag.Title = "Index";
}

<p>
    /** some stuff **/
</p>

@Html.Partial("_Create", **Here I can't declare model**) 
```

还有我的帖子模型：

```
public int PostId { get; set; }    
public int UserId { get; set; }       
public string Content { get; set; } 
```

它告诉我“传入字典的模型项的类型为‘System.Collections.Generic.List`1[MyProject.Models.Post]’，但该字典需要‘MyProject.Models.Post’类型的模型项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T03:32:04.537

这实际上取决于您的代码现在的外观。如果您有一个单独的`Create`操作方法返回 a `PartialView`，如下所示：

```
[HttpGet]
public ActionResult Create()
{
    // Do stuff here to populate your model, if necessary
    return PartialView("_Create", model);
} 
```

然后在您的视图中，您将使用`Html.RenderAction()`要`_Create`显示局部视图的位置：

```
<div id="IndexViewStuff">
    <p>Some stuff in your normal Index view.</p>
    @{Html.RenderAction("Create", "Post");}
</div> 
```

如果您没有单独的操作方法`Create`并且只有一个局部视图来使事情更清洁，那么只需`Html.Partial()`在您的`Index`视图中使用就可以了：

```
@Html.Partial("_Create") // If your _Create partial does not require a model
@Html.Partial("_Create", Model.CreateViewModel) // If it does require a model 
```

**更新**

查看您的代码后，有两种方法可以做到（我将向您展示两种方法）。出现您的问题是因为您将帖子列表传递给您的`Index`视图，而您的`_Create`部分视图需要一个`Post`模型。由于您在调用模型时没有将模型显式传递给局部视图，因此它会自动尝试在`Index`视图中使用模型（您的帖子列表）。解决问题的第一种方法需要对代码进行最少的更改。

更改您的`Create`操作方法如下：

```
[HttpGet]
public ActionResult Create()
{
    // You have to pass a new Post
    return PartialView("_Create", new MyProject.Models.Post());
} 
```

然后在您`Index`看来，使用：

```
@{Html.RenderAction("Create", "Post");} 
```

第二种方法是使用一个视图模型，它公开要在`Index`视图上显示的帖子列表，并且还有一个“空”`Post`模型，可用于在`_Create`局部视图中创建新帖子。我更喜欢这种方法，但这是你的电话。

您的视图模型：

```
public class MyViewModel
{
    public IEnumerable<Post> Posts { get; set; }
    public Post CreatePost { get; set; }
} 
```

您的`Index`操作方法：

```
public ActionResult Index()
{
    MyViewModel model = new MyViewModel()
    {
        Posts = db.Posts.ToList(),
        CreatePost = new MyProject.Models.Post()
    };

    return View(model);
} 
```

您的`Index`看法：

```
@model The.Namespace.MyViewModel

@{
    ViewBag.Title = "Index";
}

@foreach (var post in Model.Posts)
{
    <p>post.Content</p> // Or however you want to display your posts
}

@Html.Partial("_Create", Model.CreatePost) // Pass the correct model 
```

您的`_Create`局部视图将保持不变。**

# mysql - 如何在 mysql SELECT 的 WHERE 中设置超过 2 个过滤器

> ID：13851960
> 
> 赞同：1
> 
> 时间：2012-12-13T02:26:42.643
> 
> 标签：mysql

你好我有mysql选择。我要从核心中选择 loc。这个 loc 必须从具有 dateid=('".$dateid."') 和 location=('".$id."') 的行中选择，我还需要在 WHERE 中添加两个条件。我的意思是我可以像**WHERE dateid=('".$dateid."') AND location=('".$id."') AND BETWEEN '2012-10-1' AND '2012-10-4 '"**这不起作用。我如何添加这个时间跨度？

```
$SQL = "SELECT loc FROM core WHERE dateid=('".$dateid."') AND location=('".$id."')";

$result = mysql_query($SQL);
 if($result){
$db_field = mysql_fetch_array($result);
$rs[$i]=$db_field[$select[$i]];}

} 
```

我可以在哪里添加开始日期和结束日期？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:29:09.170

只需删除前两个中的大括号，然后使用运算符添加剩余的两个过滤器`AND`。你应该很好，即

```
 SELECT loc FROM core WHERE dateid=$dateid AND location=$id
       AND startdate = STR_TO_DATE('$startdate', '%d/%m/%y') 
       AND enddate = STR_TO_DATE('$enddate', '%d/%m/%y') ; 
```

我假设`dateid`and`id`是数字字段，而`startdate`and`enddate`是包含日期值的字符串值，例如`12/12/2012`.

请使用正确的列名和变量名。还提供字符串的日期格式。

# android - 在 XML 中为 android 传递参数？

> ID：13851964
> 
> 赞同：0
> 
> 时间：2012-12-13T02:27:04.020
> 
> 标签：android, xml, media-player

也许我只是走错了路，但我正在尝试使用一个名为 playSong 的函数，并且根据按下的按钮，我想通过 xml 将参数传递给 playSong 函数，以便它可以选择正确的歌曲按资源 ID。

有没有更好的方法来实现这一点，或者我正在尝试的方式是可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:58:53.953

在您的应用程序中传递参数时，最好直接发送一个对象。由于发送 xml/json 或其他文本格式需要解析。在这种情况下，您可以为 Button 创建一个参数类并将其传递给 playSong 函数。如果必须传递文本或字符串，也可以对对象进行序列化。

```
class ButtonParam{
    int id;
    // anything else.
}

ButtonParam param = new ButtonParam();
param.id = 3;
// set your param here.
mButton.setTag(param);
mButton.setOnClickListener(new OnClickListener(){
    public void onClick(View view){
        ButtonParam p = (ButtonParam)view.getTag();
        // call you method.
        playSong(p);
    }
}); 
```

# ruby-on-rails - Rails：缓存名称默认为模型的 _id 而不是 cache_key

> ID：13851970
> 
> 赞同：0
> 
> 时间：2012-12-13T02:27:57.860
> 
> 标签：ruby-on-rails, caching, memcached

我将模型的实例传递给缓存函数，并希望 Rails`cache_key`用作片段缓存的名称：

```
<% cache @ask do %>
 code
<% end %> 
```

但它使用了`._id`修饰符：

```
Exist fragment? views/50c919b646b5001be700002f (0.8ms)
Read fragment views/50c919b646b5001be700002f (0.0ms) 
```

（id 看起来像这样，因为我使用的是 mongoDB）。我正在使用 Rails 3.0.5。为什么会这样？

**编辑：**我正在使用 mongoid 2.0.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T11:03:01.727

Mongoid 2.4.0版本介绍`cache_key`功能：[https ://github.com/mongoid/mongoid/blob/master/lib/mongoid/document.rb#L242:L246](https://github.com/mongoid/mongoid/blob/master/lib/mongoid/document.rb#L242:L246)

如果您无法升级，则可以在您的模式下执行此操作：

```
def cache_key
  # insert your cache key logic here
end 
```

# c++ - 使用 sort 函数根据函数对列表进行排序

> ID：13851980
> 
> 赞同：2
> 
> 时间：2012-12-13T02:28:42.240
> 
> 标签：c++, list, sorting, g++

我试图使用排序函数对包含比较它们的第二个值的对的列表进行排序。这就是我正在使用的：

```
std::sort(score_list.begin(), score_list.end(), compare_pair); 
```

这是排序功能：

```
bool Highscore::compare_pair (std::pair<std::string, int> first, std::pair<std::string, int> second)

{
  if (first.second<second.second) return true;
  else return false;
} 
```

我收到此错误消息：

```
error: no matching function for call to ‘sort(std::list<std::pair<std::basic_string<char>, int> >::iterator, std::list<std::pair<std::basic_string<char>, int> >::iterator, <unresolved overloaded function type>)’ 
```

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:39:27.953

您不能直接将成员函数作为比较器传递。使用函数时，实际传递的是指向函数的指针——但指向函数的指针与指向*成员函数的指针**完全*不同。

 *C++98/03 有几个命名的适配器`mem_fun`，`mem_fun_ref`它们（有点）处理这个问题。

C++11 添加`mem_fn`和弃用`mem_fun`and `mem_fun_ref`. 假设你有一个足够新的编译器来包含它，它会更容易使用。

但是，如果您的编译器是新的，那么它可能还会包含 lambda，这可以使任务变得相当干净，因为您可以使用函数对象的“就地”定义来处理比较：

```
typedef std::pair<std::string, int> data_t;

std::sort(score_list.begin(), score_list.end(),
    [](data_t const &a, data_t const &b) { 
        return a.second < b.second; 
    }); 
```

如果你用谷歌搜索“C++11 lambda”之类的东西，你应该会找到更多关于这个的信息（其中大部分几乎肯定会直接回到这里）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T02:39:33.920

此外，您几乎肯定希望通过 const 引用而不是按值将这些对传递给您的排序函数。

```
static bool Highscore::compare_pair (const std::pair<std::string, int> &first, const std::pair<std::string, int> &second) 
```

并且`typedef`是你的朋友。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T03:18:48.790

如果要对 a 进行排序`std::list`，则应该使用[`std::list::sort`](http://en.cppreference.com/w/cpp/container/list/sort)成员函数。该`std::sort`算法需要*随机访问迭代器*并且`std::list`只提供*双向迭代器*。*

# javascript - 为图像数据创建画布然后清除它？

> ID：13851989
> 
> 赞同：1
> 
> 时间：2012-12-13T02:29:21.040
> 
> 标签：javascript, canvas

我想知道一旦您不再需要画布及其图像数据，是否有办法释放它？

我正在做的一个例子如下所示：

```
img = new Image();
img.src = "test.png";
img.onload = function() {
  var c = document.createElement('canvas'), d, img = this;
  if( c.getContext) {
    c.width = img.width;
    c.height = img.height;
    c = c.getContext("2d");
    c.drawImage(img,0,0);
    d = c.getImageData(0,0,img.width,img.height);
    img.getPixel = function(x,y) {
      return d.slice((y*img.width+x)*4,4);
    };
  }
  else {
    // canvas not supported, fall back
    img.getPixel = function(x,y) {return [0,0,0,0];}
  }
}; 
```

一旦我得到结果，我想删除当前加载的画布和 imageData 以释放一些内存.. 有没有一种简单的方法来删除临时画布？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:34:59.720

# 更新

所以，这实际上是我需要为我自己的个人项目更彻底地调查的东西，所以我做了一些测试。

看起来（至少在 Chrome 中）如果您只是创建画布并获取数据 URL，但实际上并未将其设置为 Image 元素，那么您很好，它会进行垃圾收集。这意味着您的示例应该自行收集垃圾。

当事情变成梨形时（很可能是由于浏览器处理图像的方式），当您获取数据 URL 并将其分配给 Image 元素时。

* * *

一旦对该画布的所有引用都消失了，它自然会自行收集垃圾。因此，只需确保在未关闭的范围内没有任何变量引用它。

看起来你正在做什么，画布应该消失。

...或者至少它应该是这样工作的。

实际上，看起来大多数浏览器在整个页面被卸载之前不会从内存中释放它们，这是有问题的（至少对于 Firefox 和 Chrome 来说，似乎有不少人在跟踪这个问题）。

同时，处理它的最相关的方法是使画布成为全局的（或者更好的是，将它藏在某种漂亮的管理器中），这样您就可以一遍又一遍地重用同一个画布。不理想，但它至少可以解决问题，因为您不会使用那么多内存。

# javascript - TypeScript 中的别名外部模块

> ID：13851990
> 
> 赞同：1
> 
> 时间：2012-12-13T02:29:22.900
> 
> 标签：javascript, typescript

我正在做一个项目，我想将我的源代码打包到多个模块中（在不同的文件中）。我这样做是为了在某些页面上只包含某些部分以减少整体重量。

我遇到的问题是我无法弄清楚可以让我为外部模块起别名的语法，而且我真的不想每次都写出完整的模块（因为它通常类似于 ABCD 用于组织）。

当我编译时，我有一个抓取所有文件的脚本，所以我将外部定义文件作为第一个参数。

如果我写出整个模块`(A.B.C.D.MyClass)`，它会识别出来。如果我尝试这样做：

```
module MyModule {
    import ABCD = A.B.C.D;

    export MyClass {
        //...
        public myFunc(obj:ABCD.MyClass) {}
    }
} 
```

它会告诉我`'The name "ABCD" does not exist in the current scope."'`

如果重要，我会导出我的所有类，但不导出任何模块。我生成了包含的定义文件（所以在我编译时，包含 ABCD 的定义文件在我的列表中是第一个）。

有任何想法吗？

# 更新

为了详细说明我的文件结构，我有这样的事情：

*   一个
    *   乙
        *   a.ts
        *   b.ts
    *   C
        *   c.ts
        *   d.ts

然后在其他地方我也可能有：

*   一个
    *   D
        *   等
        *   f.ts
        *   乙
            *   g.ts
            *   h.ts

在这种情况下，我会将第一组构建成类似于 ABts 的东西，方法是使用以下内容编译它们：

```
tsc A/B/a.ts A/B/b.ts A/B/C/c.ts A/B/C/d.ts --out A.B.ts --declarations 
```

然后，当我去打包下一个时，我会做类似的事情：

```
tsc /path/to/A.B.d.ts A/D/e.ts A/D/f.ts A/D/E/g.ts A/D/E/h.ts --out A.D.ts --declarations 
```

我通过递归一组我指定的文件来动态构建这些编译器命令，以便它获取那些编译器的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:25:18.750

如果要将模块打包到多个文件中以便使用 AMD 模块加载模式加载它们，则需要执行以下操作...

文件名就是模块名，不用加`module`声明

例如...

```
module MyModule {
    export class MyClass {
    }
} 
```

实际上应该是`MyModule.ts`这样的：

```
export class MyClass {
} 
```

然后，您将使用以下方法加载它：

```
import my = module('MyModule'); 
```

我认为您目前正在尝试将 TypeScript 代码的捆绑样式与加载的模块样式混合，这是不兼容的。捆绑时，文件名无关紧要，因为您负责在页面上获取脚本。当您使用 AMD 或 CommonJS 时，您需要遵守文件命名规则（即文件名等于模块名），并省略封闭的`module`.

附带说明一下，0.8.1.1 中有一个错误会影响这一点，因此如果您使用的是 0.8.1.1，则可能需要通读：http: [//typescript.codeplex.com/discussions/405800](http://typescript.codeplex.com/discussions/405800)

# c++ - 如何根据内容确定文本文件的大小

> ID：13851991
> 
> 赞同：1
> 
> 时间：2012-12-13T02:29:37.237
> 
> 标签：c++, sizeof

假设一个文本文件包含以下文本：

```
1.11111111
2.22222222
3.33333333
4.44444444
5.55555555 
```

文件的大小是多少？我们如何确定它？

假设：[5*（每行 10 个字符 10 个字节）+ 每个字符串末尾的 5 个空指针] = 55 个字节。

但是 Windows 显示了 3 个额外的字节，总共 58 个字节。3 个字节从何而来？

编辑： NULL 指针占用零字节。所以，我们从某个地方得到了 8 个额外的字节。

更多编辑：经过一些试验，每次我们按 ENTER 键都会创建 2 个字节。这就是 8 个字节的来源——按 ENTER 4 次。这些字节在编程术语中称为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:34:32.067

`\n`并`\r`在除最后一行之外的每一行的末尾分别取 1 个字节。

# c# - 使用 C# 使用带有多个选择项的下拉框

> ID：13851993
> 
> 赞同：1
> 
> 时间：2012-12-13T02:29:49.493
> 
> 标签：c#, asp.net

我正在使用带有复选框的下拉菜单，我可以在其中选择多个项目，并且我正在使用它将数据插入到我的详细信息视图中。我的问题是，如果我从下拉列表中选择了多个项目，即使我从下拉框中选择了多个项目，它也只会插入第一个被选中的项目。我在这里做错了什么？请。帮助

```
 protected void DetailsView1_ItemInserting(object sender, DetailsViewInsertEventArgs e)
    {

        foreach (ListItem listItem in cblCustomerList.Items)
        {
            if (listItem.Selected)
            {

                string GroupName = cblCustomerList.SelectedValue;

            sqlcon.Open();
            string eno = ((TextBox)DetailsView1.FindControl("txteno")).Text.ToString();
            string empname = ((TextBox)DetailsView1.FindControl("txtempname")).Text.ToString();
            string sal = ((TextBox)DetailsView1.FindControl("txtsal")).Text.ToString();
            SqlCommand cmd = new SqlCommand("select eno from emp where eno = '" + eno + "'", sqlcon);
            SqlDataReader dr = cmd.ExecuteReader();
            if (dr.Read())
            {
                lblmsg.Text = "Employee No already exists";
            }
            else
            {
                dr.Close();
                sqlcmd = new SqlCommand("insert into emp values('" + eno + "', '" + empname + "','" + sal + "' , '" + GroupName + "')", sqlcon);
                sqlcmd.ExecuteNonQuery();
              //  DetailsView1.ChangeMode(DetailsViewMode.Insert);
            }
            sqlcon.Close();
           // LoadDet();
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:06:08.557

首先，您应该使用 ListBox 的[SelectedItems](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selecteditems.aspx)属性，它为您提供所有选定项目的集合（然后您可以获取它们的值）。这比手动浏览所有项目更容易。

您的代码中的问题是您使用 的`SelectedValue`属性`cblCustomerList`，而您应该使用 的`Value`属性`listItem`。

尝试这个：

```
protected void DetailsView1_ItemInserting(object sender, DetailsViewInsertEventArgs e)
{

    foreach (ListItem listItem in cblCustomerList.Items)
    {
        if (listItem.Selected)
        {

            string GroupName = listItem.Value; // fix is here

        sqlcon.Open();
        string eno = ((TextBox)DetailsView1.FindControl("txteno")).Text.ToString();
        string empname = ((TextBox)DetailsView1.FindControl("txtempname")).Text.ToString();
        string sal = ((TextBox)DetailsView1.FindControl("txtsal")).Text.ToString();
        SqlCommand cmd = new SqlCommand("select eno from emp where eno = '" + eno + "'", sqlcon);
        SqlDataReader dr = cmd.ExecuteReader();
        if (dr.Read())
        {
            lblmsg.Text = "Employee No already exists";
        }
        else
        {
            dr.Close();
            sqlcmd = new SqlCommand("insert into emp values('" + eno + "', '" + empname + "','" + sal + "' , '" + GroupName + "')", sqlcon);
            sqlcmd.ExecuteNonQuery();
          //  DetailsView1.ChangeMode(DetailsViewMode.Insert);
        }
        sqlcon.Close();
       // LoadDet();
        }

    }
} 
```

# json - 未处理的异常：调用 JSON.parse 时的预期字符串文字

> ID：13851994
> 
> 赞同：1
> 
> 时间：2012-12-13T02:30:05.413
> 
> 标签：json, dart

以下代码引发未处理的异常：

```
Map map = JSON.parse("{'foo':1}");
var debug = map["foo"];
print("$debug"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T08:45:37.703

[JSON 规范](http://www.ietf.org/rfc/rfc4627.txt)的第 2.5 章说：

```
string = quotation-mark *char quotation-mark
...
quotation-mark = %x22      ; "
... 
```

这意味着 JSON 中的字符串**必须**看起来像`"..."`并且`'...'`不是有效的 JSON 字符串。

Dart 中的 JSON 解析器只要求您遵守规范。

# javascript - 为什么我的 javascript 匹配返回 null？

> ID：13851997
> 
> 赞同：0
> 
> 时间：2012-12-13T02:30:23.323
> 
> 标签：javascript, regex

使用以下文本作为我的 msg 变量：

```
/private UserName:some message without leading whitespace
/private UserName: some message with leading whitespace 
```

以及下面的 javascript 来解析它：

```
if(msg.indexOf('/private') == 0){
    msg = msg.substring(8,msg.length);
    var parts = msg.match(/\s+(.+?)\:\s*(.+?)/);

    alert("Name: " + parts[0]);
    alert("Message: " + parts[1]);
} 
```

我希望索引 0 包含**用户名** ，索引 1 包含**一些带有...的消息**

有人看到我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:35:19.273

稍微调整一下你的正则表达式：

```
/^\/private\s+(.*?):\s*(.*?)$/ 
```

并简化您的代码：

```
var regex = /^\/private\s+(.*?):\s*(.*?)$/;
var parts = regex.exec(msg);

if (parts){
    alert("Name: " + parts[1]);
    alert("Message: " + parts[2]);
} 
```

`parts[0]`是整个匹配的字符串。你想要`parts[1]`和`parts[2]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T02:48:37.393

```
var msg = '/private UserName:some message without leading whitespace \
/private UserName: some message with leading whitespace';

if (msg.indexOf('/private') == 0) {
   msg = msg.substring(8,msg.length);
   var parts = msg.match(/\s+(.+?)\:\s*(.+?)/);

   console.log("Name: " + parts[0]);
   console.log("Message: " + parts[1]);
} 
```

打印出来

```
 Name:  UserName:s
  Message: UserName 
```

我会调试你`msg`和`parts`变量的值。[此外，请在http://regexpal.com/](http://regexpal.com/)之类的网站上检查您的正则表达式。看起来您的正则表达式可能匹配太多。你希望它以冒号结尾吗？如果是这样，请尝试更多类似的东西

```
\s+(\S+?)\: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T02:36:08.387

您要做的是拆分和修剪:)

就像是 ：

```
parts = msg.split(" ",1)[1].split(":",1);

alert("Name: " + parts[0]);
alert("Message: " + $trim(parts[1])); 
```

[trim](http://api.jquery.com/jQuery.trim/)是一个 jquery 函数，但你可以用 regex 来做 :)