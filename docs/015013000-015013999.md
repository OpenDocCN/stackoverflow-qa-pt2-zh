# StackOverflow 问答 15013000-15013999

# ruby-on-rails - 如何循环遍历rails模型参数

> ID：15013004
> 
> 赞同：1
> 
> 时间：2013-02-21T21:56:08.630
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试在 rails 中设置一个方法，以便如果有一个参数具有 nil 值，则返回参数的名称。

我有一个名为 Usages(gas,elec,biomass) 的模型

我知道如何在红宝石中做到这一点：

```
u = {elec: 100, gas: 200, biomass: nil}
t = %w(gas elec chp)
t.each do |t|
    s=t.to_sym
    if u[s] == nil
        puts "#{t}"
    end
end 
```

，返回“生物质”

假设我在 Rails 中有这个：

```
u = Usage.create(elec:100, gas:200) 
```

我将如何返回“生物质”？

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:13:11.733

ActiveRecord 模型上有一个`attributes`散列，它基于链接到该类的数据库表。空字段映射为 nil 值，因此您可以像这样查找它们：

```
u.attributes.select {|_,v| v.nil? }.keys 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T22:13:10.363

我想你只是想循环通过活动记录`attributes`？

```
u = Usage.create(elec:100, gas:200)
u.attributes.each do |x|
  if u.public_send(x).nil?
    puts "#{x} is nil"
  end
end 
```

# java - 在删除的行之后刷新 PrimaryID 从一个开始

> ID：15013010
> 
> 赞同：1
> 
> 时间：2013-02-21T21:56:24.727
> 
> 标签：java, sql

我用java编写程序，我在JTable中有一个数据库，就像下面的一样。我想知道删除一行时是否可以从GUI界面上的1刷新primaryID位置？例如下面的 LoactionID 被伦敦删除并再次添加 id 4。这可能吗？![在此处输入图像描述](../Images/af5398d2252b1724c7e77413afbf1619.png)

我在java中使用SQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:01:25.927

要回答你的问题，是的，这是可能的。

但是，您没有充分的理由这样做，我强烈建议您不要这样做。

这样做的唯一原因是为了装饰性的——数据库不关心记录是否是连续的，只关心它们是否一致地相互关联。没有必要为了数据库而“更正”这些值。

如果您将这些 ID 用于 UI 上的某种编号（出于美观原因）：

**不要为此使用您的身份**。将可视行号、顺序或其他任何内容与内部数据库键分开。

**如果你真的想这样做**，

谷歌为您的 sql 产品*“重新播种或重置自动增量主 ID” 。*

请注意某些解决方案，如果您将标识种子重置为低于表中当前具有的值，一旦值开始重叠，您将违反 indentity 列的唯一性约束

*感谢 Andriy 提到我盲目粘贴 mysql 解决方案 :)*

一些例子：

*   [`ALTER TABLE table_name ALTER COLUMN auto_increment_column_name RESTART WITH 8 Java DB`](http://db.apache.org/derby/docs/10.6/ref/rrefsqlj81859.html)

*   [`DBCC CHECKIDENT (mytable, RESEED, 0)`](https://stackoverflow.com/questions/510121/reset-autoincrement-in-sqlserver-after-delete)

*   [改变顺序](https://stackoverflow.com/questions/10159840/need-to-reset-the-value-of-sequence-in-oracle)

# javascript - 变量在 angular.forEach 中不可访问

> ID：15013016
> 
> 赞同：23
> 
> 时间：2013-02-21T21:57:18.910
> 
> 标签：javascript, foreach, angularjs

我有服务

```
app.service('myService', function() {
    this.list = [];
    this.execute = function() {
        //this.list is reachable here
        angular.forEach(AnArrayHere, function(val, key) {
           //this.list is not reachable here
        });
    }
} 
```

即使在控制器中也可以访问

```
function Ctrl($scope, myService) {
    $scope.list = myService.list;
} 
```

有人可以解释一下为什么在 angular.foreach 中无法访问“this.list”以及如何访问“this.list”吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-21T21:59:22.230

`angular.forEach`（参见[http://docs.angularjs.org/api/angular.forEach](http://docs.angularjs.org/api/angular.forEach)）函数中的最后一个参数是`this`. 所以你会想要这样的东西：

```
app.service('myService', function() {

    this.list = [];

    this.execute = function() {

        //this.list is reachable here

        angular.forEach(AnArrayHere, function(val, key) {
           //access this.list
        }, this);

    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T22:02:55.383

在 foreach 中无法访问的原因`this.list`是该函数调用的上下文已更改。它在方法内部工作，`execute`因为该方法是与列表相同的上下文的一部分。

由于所有的闭包，我会将`this`上下文分配给另一个变量，然后您可以稍后调用。像这样的东西：

```
app.service('myService', function() {

    var self = this;
    self.list = [];

    self.execute = function() {
        //this.list and self.list are reachable here
        angular.forEach(AnArrayHere, function(val, key) {
           //self.this == this.list
        });
    }
} 
```

这是一个比将上下文作为 foreach 方法调用的一部分传递的更通用的解决方案，并且可以在其他与闭包相关的情况下工作。

# git - 如何从尚未在 git 中推送到源的提交中删除文件更改？

> ID：15013017
> 
> 赞同：1
> 
> 时间：2013-02-21T21:57:22.880
> 
> 标签：git, commit, git-checkout

我有一个文件不小心添加到我最近的提交中。我想删除更改，但将文件保留在存储库中。那是因为它是一个生成的 sass 样式表，我总是遇到合并问题。由于服务器无论如何都会重新生成它，我真的很想避免提交它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:02:24.283

进行新的提交，将所有内容置于您希望它处于的状态，然后将其（通过`git rebase -i`）压缩到您最近的提交中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:02:16.390

[这个问题](https://stackoverflow.com/questions/927358/undo-last-git-commit)的答案可能包含您需要的内容以及撤消本地提交的更多内容。

# php - 如何在mysql中重用准备好的语句参数

> ID：15013022
> 
> 赞同：7
> 
> 时间：2013-02-21T21:57:44.707
> 
> 标签：php, mysql, mysqli

我有一个（半）简单的 MySQL 查询，我正在尝试使用（通过 php mysqli 扩展），但我不太清楚如何做到这一点。

我的查询看起来像

```
SELECT DISTINCT Col1 from `table1` where `col2`= ? and `col3`=? 
UNION SELECT DISTINCT Col1 from `table2` where `col2`=(?) and `col3`=(?) 
```

我有两个不想处理合并的表，我只想重用原来准备好的两个“？”。我知道在向表中插入值时我可以为此做一些事情，但迄今为止我在搜索文档方面的努力被证明是无用的。

我可以这样做吗，怎么做？

## 更新

这是我的代码

```
$query='SELECT DISTINCT enginesizecc FROM `table1`  where year=? and vehicle_make= ? as UNION SELECT DISTINCT enginesizecc from `table2` WHERE year=(?) AND vehicle_make =(?)';     
$stmt=$sql->prepare($query);
echo $sql->error; //I'm in debug mode
$blank='';
if(array_key_exists('year', $_POST)){
    if(array_key_exists('make', $_POST)){
        $stmt->bind_param('ss', $_POST['year'], $_POST['make']);
    }
    else $stmt->bind_param('ss', $_POST['year'], $blank);
}
elseif(array_key_exists('make', $_POST)){
    $stmt->bind_param('ss', $blank, $_POST['make']);
}
else{
    //if(array_key_exists('model', $_POST)) $stmt->bind_param('sss', $blank, $blank);
    $stmt->bind_param('ss', $blank, $blank);
}
$stmt->execute();
$modelItem='';
$stmt->bind_result($modelItem);
$models=array();
while($stmt->fetch()){      
    $models[]=$modelItem;
}
sort($models);
return $models; 
```

我知道我可以将相同的变量绑定两次，但这似乎效率很低。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T22:23:40.337

PDO 允许您专门命名参数，就像这样，但 MySQLi 不支持命名变量：

```
"SELECT x FROM y WHERE name = :name and key = :key" 
```

在 PDO 中，这将让您在指定它们的类型后`:name`重新使用。`:key`我不争论哪个更好，因为您可以在 MySQLi 中实现相同的目标。

问题是 MySQLi 很难坚持“不要重复自己 (DRY)”的方法。（如果您喜欢 DRY，请考虑自定义函数）。

这就是有些人更喜欢 PDO 而不是 MySQLi 的原因，但是有一些时髦的解决方法（例如`call_user_func_array`在自定义函数中等）。

至于您的“效率”评论，重复变量确实没有区别。它将在 MySQL API 调用中被参数化两次，但它几乎不会显着影响性能。PDO 在内部不使用 MySQL 进行参数化（除非您明确使其使用 MySQL），并且 MySQLi 为它进行 MySQL API 参数化。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-21T22:04:37.003

这是一个关于如何将参数绑定到查询的示例。

```
global  $dbconnection;

    $sql = "INSERT INTO Sales(order_id,client_id,sale_date,status) VALUES (?,?,?,?)";

    if ($stmt = $dbconnection->prepare($sql)) 
    {   
        /* Bind our params */ 
            $stmt->bind_param('iisi',$order_id,$client_id,$today,$status);  
        $stmt->execute();  
        $stmt->close();
    }
    else
    {
        print "ERROR";
    } 
```

# matlab - 如何将 Matlab 结构解压缩为函数参数？

> ID：15013026
> 
> 赞同：3
> 
> 时间：2013-02-21T21:57:56.687
> 
> 标签：matlab

结合使用[这个问题](https://stackoverflow.com/questions/6390766/matlab-accessing-an-element-of-a-multidimensional-array-with-a-list)和[这个 Mathworks 在逗号 sep 上的帮助。列表](http://www.mathworks.com/help/matlab/matlab_prog/comma-separated-lists.html?s_tid=doc_12b#br2js35-13)我想出了这种丑陋的方式来使我的格式化参数更漂亮一点：

```
formatting{1,1} = 'color';      formatting{2,1} = 'black';
formatting{1,2} = 'fontweight'; formatting{2,2} = 'bold';
formatting{1,3} = 'fontsize';   formatting{2,3} = 24;

xlabel('Distance', formatting{:}); 
```

但它仍然有点难看......有没有办法将一个结构解压缩成一堆参数，比如 Python 字典`**kwargs`？

例如，如果我有（恕我直言）更清洁的结构：

```
formatting = struct()
formatting.color = 'black';
formatting.fontweight = 'bold';
formatting.fontsize = 24; 
```

我可以以某种方式传递它吗？如果我直接尝试 ( `xlabel('blah', formatting)`, or `formatting{:}`，它会说“参数数量错误”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T22:17:46.460

You can convert your structure to cell array with this function:

```
function c = struct2opt(s)

fname = fieldnames(s);
fval = struct2cell(s);
c = [fname, fval]';
c = c(:); 
```

Then

```
formatting = struct2opt(formattingStructure);
xlabel('Distance', formatting{:}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T22:12:49.100

你很亲密。只需切换到一维单元阵列。

```
formatting = {'Color', 'Red', 'LineWidth', 10};
figure
plot(rand(1,10), formatting{:}) 
```

如果你真的想使用一个结构来格式化参数，你可以将它解压到一个单元数组中并像上面一样使用它。

```
formattingStruct = struct();
formattingStruct.color = 'black';
formattingStruct.fontweight = 'bold';
formattingStruct.fontsize = 24;

fn = fieldnames(formattingStruct);
formattingCell = {};
for i = 1:length(fn)
    formattingCell = {formattingCell{:}, fn{i}, formattingStruct.(fn{i})};
end

plot(rand(1,10), formatting{:}) 
```

将结构解压缩一个单独的小函数可能是一个好主意，这样您就可以轻松地重用它。

# ruby-on-rails - 条件匹配时跳出循环

> ID：15013031
> 
> 赞同：1
> 
> 时间：2013-02-21T21:58:22.277
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, loops, conditional-statements

这应该很简单。可能是问我自己很尴尬。:)
虽然我还是 ruby​​/rails 的新手。

如果满足条件，我想跳出循环。
当所有物品都已售出时，销售完成。我希望能够使用`sale.is_complete?`.

```
class Sale < ActiveRecord::Base
  has_many :items

  def is_complete?
    items.each do |item|
      # as soon as i encounter an unsold item, i want to return false to is_complete
      # item.is_sold? will return true or false
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T22:08:03.517

在这种情况下，循环不是最好的方法。

```
def is_complete?; items.all?(&:is_sold?) end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T22:03:14.097

也许没有那么尴尬：

```
 def is_complete?
    items.each do |item|
      if not item.is_sold? then return false
    end
    return true
  end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T22:09:08.890

我认为您不想像那样遍历每个项目。这将是非常低效的。更好的方法是检查未售出物品的数量。例如，假设`Items Table`有一个名为的列`sold`存储真或假值。然后我们可以这样做：

```
def is_complete?
  items.where(sold: false).present?
end 
```

# c# - 为什么 Lucene.Net 索引器抛出 System.IO.IOException 未处理？

> ID：15013032
> 
> 赞同：6
> 
> 时间：2013-02-21T21:58:24.203
> 
> 标签：c#, .net, visual-studio-2010, lucene, lucene.net

有时会抛出异常，说该文件`write.lock`不能被另一个进程使用，但是这是一个非常简单的 Lucene.Net 测试应用程序，并且没有其他进程在使用它，知道这可能是怎么回事

异常详情如下：

```
System.IO.IOException was unhandled
HResult=-2147024864
Message=The process cannot access the file 
     'c:\temp\luceneidx\write.lock' because it is being used by another process.

Source=mscorlib
StackTrace:
    at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
    at System.IO.File.InternalDelete(String path, Boolean checkHost)
    at System.IO.File.Delete(String path)
    at Lucene.Test.LuceneSearchInternal.get__directory() 
    in C:\Lucene.Test\LuceneSearchResumes.cs:line 35 
```

引发异常的相关代码是，

```
var lockFilePath = Path.Combine(_luceneDir, "write.lock");

if (File.Exists(lockFilePath))
    File.Delete(lockFilePath);   // THROWS exception sometimes 
```

代码大部分来自[这篇文章](http://www.codeproject.com/Articles/320219/Lucene-Net-ultra-fast-search-for-MVC-or-WebForms)。

索引正在使用后台线程构建`Task.Factory.StartNew()`，并且 WPF GUI 在构建索引时进行搜索。只有一个线程将文档写入索引。

**问题：**还有哪个进程在使用 Lucene.Net 索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:40:59.143

假设提供的代码与搜索过程（而不是索引过程）相关，您不应该在每次尝试访问索引时都尝试删除锁定文件。抛出异常是因为后台线程当前正在写入索引，并且当线程本身应该处理删除时，您正在任意尝试删除其锁定文件。

在您发布的文章中，此机制用于在写入索引时系统/应用程序崩溃后*恢复*Lucene 索引，使其处于*锁定状态*。然而，这几乎不是常见的情况。我相信在 CodeProject 文章中假设对索引进行单线程访问，因此它采用了这种方法。

在您的项目中，您需要能够检查锁定文件的存在是由于当前的写访问还是由于以前的应用程序/系统崩溃。您可以`lock`在代码中使用在发生崩溃时动态释放的对象来区分这两种情况。

# vim - 在vim中突出显示行时隐藏拼写错误

> ID：15013033
> 
> 赞同：7
> 
> 时间：2013-02-21T21:58:24.660
> 
> 标签：vim

当有拼写错误（带有`set spell`）时，它会以红色突出显示（好！），但是当该行突出显示为我当前的行时，红色会消失（不好）。删除`set cul`解决了问题，但是*如何在突出显示的同时保持标记为红色的单词*？我可能在一行上拼错了多个单词，并且在键入时拼写错误被隐藏，直到我转到下一个有点糟糕的单词。

vimrc：[https](https://gist.github.com/OscarGodson/d1b05d52df4ff160b891)
://gist.github.com/OscarGodson/d1b05d52df4ff160b891 颜色方案：[https ://github.com/tomasr/molokai](https://github.com/tomasr/molokai)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T07:08:21.197

1) 可以更改 vim 配色方案，或 SpellBad 高亮方案；第二种情况的一个例子是在 vimrc 中添加以下内容，

```
hi clear SpellBad
hi SpellBad cterm=bold 
```

2）（不是解决方案）有人可能会发现“写作时进行拼写检查”有点烦人/分散注意力，并且更喜欢在写完文章之前关闭拼写检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T08:13:36.487

问题是光标线突出显示优先于语法突出显示（拼写错误属于那个），并且无法更改。（您只能使用较新的`matchadd()`功能指定优先级。）

我曾经[提出过这个问题突出显示错误](http://groups.google.com/group/vim_dev/browse_thread/thread/46c70a229488de20)，但没有任何结果。（我仍然想为那一天实施一个补丁。）

问题仅在于背景突出显示的重叠；在 GVIM 中，大多数配色方案使用*undercurl*属性来避免该问题。在控制台中，您只能将突出显示更改为前景色、斜体或粗体属性来解决它。

### 解决方法

一种巧妙的解决方法是在添加属性时交换前景色和背景色`reverse`：转动

```
hi SpellBad cterm=NONE ctermbg=red ctermfg=white 
```

至

```
hi SpellBad cterm=reverse ctermbg=white ctermfg=red 
```

这两个更改通常会相互抵消，但在 CursorLine 上，前景色现在有助于着色，将难以阅读的白色光标变为红色光标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T18:03:43.853

奇怪的是，从其他海报的两个答案中跳出来，在我的 vimrc 中添加以下内容使我的红色背景意外持续，因为我的终端无法完成“斜体”开关，因为它不能混合这样的字体类型（我认为）。我把它放在我的 vimrc 中为 gvim 测试的部分，因为 gvim 强调我的拼写错误没有问题。试试看！

```
if has("gui_running")
    #all my gvim settings
else #we're in terminal
    hi clear SpellBad
    hi SpellBad cterm=bold,italic ctermfg=red
endif 
```

# ruby-on-rails - 如何用 nil 设置“If”语句？

> ID：15013035
> 
> 赞同：0
> 
> 时间：2013-02-21T21:58:35.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`country`属性的默认值为 nil。

在国家表中，一些记录有`image_url`，其余记录的`country`属性为零。

所以我在助手中编码了这个

```
def image(user)
    if user.country.image_url
        image_tag "flags/#{user.country.image_url}.png" 
    end
end 
```

但是，它在`image_url`为 nil时返回错误

```
Something went wrong 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:03:39.790

您需要*两个*条件：用户必须有一个国家，并且该国家必须有一个 image_url。只有这样，才会有一些东西可以展示。幸运的是，这是一个简单的调整：

```
def image(user)
    if(user.country && user.country.image_url)
        image_tag "flags/#{user.country.image_url}.png" 
    end
end 
```

如果你是偏执狂，你应该确保那`user`也不`nil`是。

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T22:19:59.277

虽然这样的方法链确实有效，但如果你实现了一些方法委托，你的代码会看起来更干净，耦合度也会降低。

在您的用户模型内部：

```
class User < ActiveRecord::Base

     belongs_to :country

     delegate :image_url, :to => :country, :prefix => true, :allow_nil => true       

end 
```

现在你的助手变得简单了：

```
def image(user)
    if user.country_image_url
        image_tag "flags/#{user.country_image_url}.png" 
    end
end 
```

[得墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)规定：

> 每个单元应该只对其他单元有有限的了解：只有与当前单元“密切”相关的单元。

另请查看[Demeter 的铁路最佳实践法](http://rails-bestpractices.com/posts/15-the-law-of-demeter)；如果没有别的，您将在 if 语句中为自己节省额外的子句，并且您的代码看起来很漂亮。

# android - 从资产加载图像

> ID：15013037
> 
> 赞同：1
> 
> 时间：2013-02-21T21:58:51.047
> 
> 标签：android, assets, baseadapter

我已经在墙纸应用程序上工作了一段时间，几乎完成了，但是应用程序的大小非常大，因为我使用 .png 扩展名，所以目前我正在尝试通过资源加载 jpg 而不是 res 中的 png

我试图 [在 GridView 中实现这个答案来自 Assets 文件夹的图像](https://stackoverflow.com/questions/2752924/android-images-from-assets-folder-in-a-gridview) 我在加载 imageadapter 时出错

*   02-21 23:13:05.883：E/AndroidRuntime（17634）：致命异常：主要
*   02-21 23:13:05.883: E/AndroidRuntime(17634): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example.imagieview05/com.example.imagieview05.MainActivity}: java.lang.NullPointerException

这是我的代码

```
public class MainActivity extends Activity {
private GridView mGridView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     mGridView = (GridView) findViewById(R.id.GridView1);

    Bitmap[] mBitArray  = new Bitmap[4];
    try {
    mBitArray[0] = getBitmapFromAssets("g1p2.jpg");
    mBitArray[1] = getBitmapFromAssets("g1p1.jpg");
    mBitArray[2] = getBitmapFromAssets("g1p3.jpg");
    mBitArray[3] = getBitmapFromAssets("g1p4.jpg");

    } catch (Exception e) {
         e.printStackTrace();
    }

  mGridView.setAdapter(new ImageAdapter(this ,mBitArray));

}
public Bitmap getBitmapFromAssets (String filename) throws IOException{
    AssetManager assetManager = getAssets();
    InputStream istr = assetManager.open(filename);
    Bitmap bitmap = BitmapFactory.decodeStream(istr);
    return bitmap;  
}

  public class ImageAdapter extends BaseAdapter{

private Context mContext;
private Bitmap[] mImageArray;

public GallaryAdapter(Context c, Bitmap[] mBitArray) {
    c = mContext;
    mBitArray = mImageArray;
}

public int getCount() {
    return mImageArray.length;
}
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return mImageArray[position];
}
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
     ImageView imgView = new ImageView(mContext);
     imgView.setImageBitmap(mImageArray[position]);
     //put black borders around the image
     imgView.setScaleType(ImageView.ScaleType.CENTER_CROP);
     imgView.setLayoutParams(new GridView.LayoutParams(120, 120));
     return imgView;

} 
```

这是没有资产参考的原始工作代码

```
 public class MainActivity extends Activity {

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    GridView gridView =  (GridView) findViewById(R.id.GridView1);
    gridView.setAdapter(new ImageAdapter(this));

public class ImageAdapter extends BaseAdapter {

 private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(150, 150));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.g1p1, R.drawable.g1p2,
            R.drawable.g1p3, R.drawable.g1p4,
            R.drawable.g1p5, R.drawable.g1p6,
            R.drawable.g1p22, R.drawable.g1p33,
            R.drawable.g1p44, R.drawable.g1p55,
            R.drawable.g1p5, R.drawable.g1p6,
            R.drawable.g1p22, R.drawable.g1p33,
            R.drawable.g1p44, R.drawable.g1p55

    };
}; 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:55:00.780

mBitArray = mImageArray; 它将 mBitArray 指向 mImageArray 女巫什么都不是，也许？

我认为无论如何使用jpeg或png内存并不重要，在程序中它无论如何都会完全解压缩jpeg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-24T11:15:18.970

[我按照示例代码](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)从 assets 文件夹中编写了代码加载器图像

```
private Bitmap decodeStreamFromAssets(String path, int reqWidth, int reqHeight) {

    InputStream ims = null;

    try {

        ims = getAssets().open(path);
        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(ims, null, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeStream(ims, null, options);
    }
    catch (IOException e) {

        e.printStackTrace();
    }
    finally {

        if (ims != null) {
            try {

                ims.close();
            }
            catch (IOException e) {

                e.printStackTrace();
            }
        }
    }

    return null;
}

private int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {

        final int halfHeight = height / 2;
        final int halfWidth = width / 2;

        // Calculate the largest inSampleSize value that is a power of 2 and keeps both
        // height and width larger than the requested height and width.
        while ((halfHeight / inSampleSize) > reqHeight
                && (halfWidth / inSampleSize) > reqWidth) {
            inSampleSize *= 2;
        }
    }

    return inSampleSize;
} 
```

加载 *.jpg 作品，但 *.png 不适用于 ex。

IMG // 工作

```
Bitmap bitmap = decodeStreamFromAssets("test.jpg", 64, 64);
    if(bitmap1 != null){

        imageViewTest.setImageBitmap(bitmap);
    }
    else {

        Log.e("ERROR", "error");
    } 
```

PNG // 不工作（是错误）

```
Bitmap bitmap = decodeStreamFromAssets("test.png", 64, 64);
    if(bitmap1 != null){

        imageViewTest.setImageBitmap(bitmap);
    }
    else {

        Log.e("ERROR", "error");
    } 
```

# ruby-on-rails - 简单覆盖路线未显示

> ID：15013040
> 
> 赞同：3
> 
> 时间：2013-02-21T21:59:02.247
> 
> 标签：ruby-on-rails

我有一个 Rails 应用程序，当我运行测试时，我在 /cov 文件夹中创建新文件

```
Finished in 20.6 seconds
19 examples, 0 failures
Coverage report generated for RSpec to /Users/nicholasshook/Sites/<<my project>>/coverage. 264 / 446 LOC (59.19%) covered. 
```

完毕。

但是，当我尝试访问 localhost/coverage/index.html 时出现此错误

```
No route matches [GET] "/coverage/index.html" 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T00:21:42.160

如果您使用 SimpleCov 或一些类似的 gem 来生成测试结果，那么这些是静态 HTML 文件，可以在您的机器上本地查看。IE 只需浏览到 /Users/nicholasshook/Sites/<>/coverage/index.html 并在浏览器中打开该文件。

出于安全和可管理性的原因，Rails 不会创建到 /coverage/index.html 的路由。您可以创建指向静态 html 页面的路由，但它们必须位于 /public 目录中。如果您需要在您的应用程序中访问您的覆盖结果，您有几个选择：

1.  将覆盖文件移动到 /public 目录，并使用像 High_Voltage [https://github.com/thoughtbot/high_voltage](https://github.com/thoughtbot/high_voltage)这样的 gem在那里创建一条路线
2.  您需要重新配置覆盖工具以将文件放在 /public 目录中，或者手动复制它们

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-03T13:29:07.867

我设法通过在我的 spec_helper.rb 文件中的 SimpleCov.start 'rails' 之后使用以下行来做到这一点。

```
SimpleCov.start 'rails'
SimpleCov.root('/my/app/root/directory/public') 
```

您还应该将 /public/coverage 添加到您的 .gitignore 文件中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-22T23:29:04.013

这打破了报道。最好是：

```
cd public && ln -s ../coverage coverage 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-03T06:28:16.590

将`public`文件夹添加为 root 将更改测试覆盖的文件范围。这对我有用

```
SimpleCov.start do
 SimpleCov.coverage_dir('public/coverage')
end 
```

# javascript - 在javascript中获取元素

> ID：15013042
> 
> 赞同：2
> 
> 时间：2013-02-21T21:59:09.980
> 
> 标签：javascript, asp.net, html, .net, repeater

我有一个`Repeater`我将一些数据绑定到它。现在我的问题是如何从`javascript`. 我的代码如下；

**代码隐藏**

```
protected void Page_Load(object sender, EventArgs e)
 {

 // bool boolfound = false;
 string connstring = String.Format("Server=localhost; Port=5432; User Id=postgres; Password=database; Database=valletta;");

 using (NpgsqlConnection conn = new NpgsqlConnection(connstring))
 {
  try
   {
    conn.Open();

    NpgsqlCommand cmd = new NpgsqlCommand("select get_points('temp_intersect', 'point','id',17339)", conn);
    NpgsqlDataReader dr = cmd.ExecuteReader();

    currentpoint.DataSource = dr;
    currentpoint.DataBind();

   }
   catch (Exception)
   {
    ClientScript.RegisterStartupScript(this.GetType(), "", "$(document).ready(function(){alert('problem with connection')});", true);
   }
 }

} 
```

**ASP**

```
<asp:Repeater ID="currentpoint" runat="server">
   <ItemTemplate>
     <div>
       <asp:Label ID="hiddenlabel" runat="server" Text='<%# Eval("get_points")%>' Visible="false">
       </asp:Label>
      </div>
    </ItemTemplate>
 </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:06:44.777

您可以将 ClientIDMode 更改为 Predictable 或 static，适用于 javascript。

阅读[这篇文章](http://www.west-wind.com/weblog/posts/2010/May/04/Whats-New-in-ASPNET-40-Part-Two-WebForms-and-Visual-Studio-Enhancements)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:54:59.790

试试这个：

```
document.getElementById('<%=currentpoint.FindControl("hiddenlabel").ClientID%>') 
```

# pdf - PDF 中的 UI 模型

> ID：15013046
> 
> 赞同：0
> 
> 时间：2013-02-21T21:59:32.257
> 
> 标签：pdf, user-interface, mockups

我想在 pdf 文件中做一个模型 GUI。基本上，它是一系列页面。比如在第一页点击按钮A，进入第三页，如果点击按钮B，进入第二页，等等。我想知道有没有教程，视频，什么软件我应该使用吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:06:12.860

如果您有 Acrobat（不是阅读器——标准版或专业版），在 PDF 中创建可点击链接就像单击并拖动一样简单。例如这里记录：

[http://www.webmasterworld.com/graphics_multimedia/3439118.htm](http://www.webmasterworld.com/graphics_multimedia/3439118.htm)

“您需要完整的标准版 Acrobat 或更高版本，请转到工具->高级编辑->链接工具。在要链接的文本周围画一个矩形，它将提示您提供链接选项（文档内、Web URL、链接颜色， ETC。）”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:07:24.920

pdf要求是一个奇怪的要求，这会使这变得困难。如果您只是在寻找样机 GUI，那么有更好的方法来做到这一点！这是一个免费的： [http ://www.10screens.com/](http://www.10screens.com/)

这是一个流行的： [http ://www.balsamiq.com/](http://www.balsamiq.com/)

这是您可能会发现有用的先前问题： [https ://stackoverflow.com/questions/156755/tools-for-creating-a-user-interface-prototype](https://stackoverflow.com/questions/156755/tools-for-creating-a-user-interface-prototype)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-02T07:17:18.143

[使用MockupUI](http://mockupui.com)创建您的 GUI 模型并将设计导出为 PDF 文档，每页一个屏幕。然后您可以在 Acrobat 中打开它并添加页面链接。

# c# - 自定义数组排序

> ID：15013050
> 
> 赞同：3
> 
> 时间：2013-02-21T21:59:47.907
> 
> 标签：c#, .net, arrays

我的数组中的每个项目/字符串都以两个字母开头，后跟两个或三个数字，有时后跟另一个字母。

例子，`RS01 RS10 RS32A RS102 RS80 RS05A RS105A RS105B`

我尝试使用默认的 Array.Sort 对其进行排序，但它返回了这个......

```
RS01
RS05A
RS10
RS102
RS105A
RS105B
RS32A
RS80 
```

但我需要这样的..

```
RS01
RS05A
RS10
RS32A
RS80
RS102
RS105A
RS105B 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T22:14:36.957

这是使用自定义比较委托和正则表达式进行排序：

```
string[] array = { "RS01", "RS10", "RS32A", "RS102", 
                   "RS80", "RS05A", "RS105A", "RS105B" };

Array.Sort(array, (s1, s2) =>
    {
        Regex regex = new Regex(@"([a-zA-Z]+)(\d+)([a-zA-Z]*)");
        var match1 = regex.Match(s1);                                        
        var match2 = regex.Match(s2);

        // prefix
        int result = match1.Groups[1].Value.CompareTo(match2.Groups[1].Value);
        if (result != 0)
            return result;

        // number 
        result = Int32.Parse(match1.Groups[2].Value)
                        .CompareTo(Int32.Parse(match2.Groups[2].Value));

        if (result != 0)
            return result;

        // suffix
        return match1.Groups[3].Value.CompareTo(match2.Groups[3].Value);
    }); 
```

* * *

更新（少量重构，并将所有内容移动到单独的比较器类）。用法：

```
Array.Sort(array, new RSComparer()); 
```

比较器本身：

```
public class RSComparer : IComparer<string>
{
    private Dictionary<string, RS> entries = new Dictionary<string, RS>();

    public int Compare(string x, string y)
    {
        if (!entries.ContainsKey(x))
            entries.Add(x, new RS(x));

        if (!entries.ContainsKey(y))
            entries.Add(y, new RS(y));

        return entries[x].CompareTo(entries[y]);
    }

    private class RS : IComparable
    {
        public RS(string value)
        {
            Regex regex = new Regex(@"([A-Z]+)(\d+)([A-Z]*)");
            var match = regex.Match(value);
            Prefix = match.Groups[1].Value;
            Number = Int32.Parse(match.Groups[2].Value);
            Suffix = match.Groups[3].Value;
        }

        public string Prefix { get; private set; }
        public int Number { get; private set; }
        public string Suffix { get; private set; }

        public int CompareTo(object obj)
        {
            RS rs = (RS)obj;
            int result = Prefix.CompareTo(rs.Prefix);
            if (result != 0)
                return result;

            result = Number.CompareTo(rs.Number);
            if (result != null)
                return result;

            return Suffix.CompareTo(rs.Suffix);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T22:22:07.710

您可以使用此 linq 查询：

```
var strings = new[] { 
    "RS01","RS05A","RS10","RS102","RS105A","RS105B","RS32A","RS80"
};
strings = strings.Select(str => new
{
    str,
    num = int.Parse(String.Concat(str.Skip(2).TakeWhile(Char.IsDigit))),
    version = String.Concat(str.Skip(2).SkipWhile(Char.IsDigit))
})
.OrderBy(x => x.num).ThenBy(x => x.version)
.Select(x => x.str)
.ToArray(); 
```

[**演示**](http://ideone.com/ldaMn6)

结果：

```
RS01
RS05A
RS10
RS32A
RS80
RS102
RS105A
RS105B 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:03:35.390

您需要编写一个自定义比较器类来实现`IComparer<string>`；将字符串分解为组件非常简单。当你调用时`Array.Sort`，给它一个你的比较器的实例，你会得到你想要的结果。

# python - 未定义全局名称“行”

> ID：15013051
> 
> 赞同：0
> 
> 时间：2013-02-21T22:00:00.297
> 
> 标签：python, crud

这是我的代码......我得到

```
 .format(table_name=self._table, condition=row['where']))
NameError: global name 'row' is not defined 
```

代码：

```
def retrieveSmCityCust(self, key):
    cursor = self._db.execute('SELECT CONTRACTS.CUSTOMER_NAME, CONTRACTS.CUSTOMER.CITY, CITIES.POPULATION FROM CONTRACTS JOIN CITIES ON CONTRACTS.CUSTOMER_CITY = CITIES.IDENT where {condition}'.format(table_name=self._table, condition=row['where']))
    return dict(cursor.fetchall())

db = database(filename = 'insurance.sqlite')

db.retrieveSmCityCust({'where': 'CITIES.POPULATION <=500000'})
    for row in db:
        print(row) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:02:47.353

您将函数参数命名为`key`，而不是`row`。改为使用`key['where']`，或将函数的参数重命名为`row`.

# android - C++ JNI 互操作性

> ID：15013060
> 
> 赞同：1
> 
> 时间：2013-02-21T22:00:31.470
> 
> 标签：android, c++, java-native-interface, shared-libraries, static-libraries

经过对这些论坛的彻底搜索，无法找到相关答案；我决定问你，StackOverflow 的好心人我的问题。

我目前有 3 个（C++）库：

*   StaticLib（包含纯虚拟接口和“C”风格原型）

*   DynamicLibLinux（包含上述原型的 Linux 实现）

*   DynamicLibAndroid（不知道在这里放什么）

问题是，我不想更改 StaticLib 的代码，即：

```
struct IObject {
 virtual ~IObject() {}
 virtual void foo() = 0;
};

extern "C" { 
 IObject* CreateObject();
} 
```

DynamicLibLinux 包含

```
#include <IObject.h>
class Object : public IObject {
public:
 virtual ~Object() {}
 virtual void foo() {
  //do something incredibly useful here...
 }
};

#ifdef __cplusplus
extern "C" {
#endif
IObject* CreateObject() {
 return new Object;
}
#ifdef __cplusplus
}
#endif 
```

之后，在我的 linux 独立版中，我可以调用 dlsym("libDynamicLibLinux.so") 函数来加载我的 CreateObject 函数。这一切都像一个魅力。现在，事情是这样的：我也想在 Android 应用程序中使用静态库。而且我不知道如何在 JNI 中实现这一点。到目前为止，我有这样的事情：

```
#include <IObject.h>
#include <jni.h>
class Object : public IObject {
... same as above
};

#ifdef ...
JNIEXPORT IObject* JNICALL CreateObject(JNIEnv*) {
 return new Object;
} 
```

显然，这将不起作用，因为实现与声明不匹配。所以我的问题归结为：

有什么办法可以将 C++ 静态库“按原样”与 JNI 一起使用？

亲切的问候，感谢您的耐心等待，

埃米尔

**编辑：** 与此同时，我发现了一些有希望的东西：javacpp。这里有人有使用这个库的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:53:18.610

我不确定我是否了解您的系统是如何工作的，但是像这个接口这样的东西应该可以与[JavaCPP](http://code.google.com/p/javacpp/)一起使用：

```
@Platform(include="IObject.h",link="DynamicLib")
public class DynamicLib {
    public static class IObject extends Pointer {
        public native void foo();
    }
    public static native IObject CreateObject();
} 
```

# string - AS3 - 如何剥离字符串的最后一部分？

> ID：15013062
> 
> 赞同：0
> 
> 时间：2013-02-21T22:00:33.193
> 
> 标签：string, actionscript-3, flash

```
A random string.
A random string 2.

<!-- Hosting24 Analytics Code -->    
<script type="text/javascript" src="http://stats.hosting24.com/count.php"></script>    
<!-- End Of Analytics Code --> 
```

我想做的事？

*   剥离hosting24分析代码
*   根据换行符将字符串分成不同的字符串，这样`A random string.`和`A random string 2.`就是两个不同的字符串。

如何在 ActionScript3 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:26:31.393

```
var lines:Array = str.split("\n"); 
```

您可以忽略多余的行，也可以切片：

```
var twoLines:Array = lines.slice(0,2); 
```

# computer-science - T(n-1) + 1/lg(n) 重复

> ID：15013067
> 
> 赞同：3
> 
> 时间：2013-02-21T22:00:37.903
> 
> 标签：computer-science, recurrence

我正在寻找一个上限和下限（或者只是一个 theta 界限，就此而言）。

```
T(n) = T(n-1) + 1/lg(n) 
```

我正在为考试而学习，这是我一直坚持的练习题之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T16:16:24.727

我想下面的扩展会给你适当的提示：

T(n) =

= 1/lg(n) + T(n-1)

= 1/lg(n) + 1/lg(n-1) + T(n-2)

= 1/lg(n) + 1/lg(n-1) + 1/lg(n-2) + T(n-3)

=···

= 1/lg(n) + ··· + 1/lg(n/2) + T(n/2)

= Theta(n/lg(n)) + T(n/2)

现在，在这个新的递归上使用 Master 定理。

# delphi - Indy 和 REST - 我可以防止异常吗？

> ID：15013068
> 
> 赞同：5
> 
> 时间：2013-02-21T22:00:38.777
> 
> 标签：delphi, rest, delphi-xe2, indy

有没有办法防止 Indy 在任何/所有 HTTP 状态上引发异常？

我对 IgnoreReplies 数组的理解是它会阻止这些状态再次出现，但这不是我想要的。我希望所有状态都回来，并且没有一个会引发异常。例如，有很多 REST 服务返回 404，这被认为是完全“有效”的响应。

我真的不希望异常处理程序中有 1/2 的代码，那么有没有办法让当前的 Indy 只返回所有内容？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T22:42:34.580

抱歉，但您必须使用`IgnoreReplies`参数来告诉`TIdHTTP`哪些特定的 HTTP 回复代码不会引发异常。目前没有办法告诉`TIdHTTP`一般情况下不对所有可能的回复提出例外。如果你想收到一个不成功的回复，比如 404，而不引发异常，那么你必须告诉`TIdHTTP`它，例如：

```
IdHTTP.Get('http://host/path', [404]); 
```

请注意，此语法仅适用于`GET`请求，而不适用于其他请求，例如`POST`（除非您`TIdHTTP.DoRequest()`直接调用受保护的方法）。

Indy 是专门围绕异常处理设计的。如果你想有效地使用 Indy，你必须接受异常，而不是避免它们。`TIdHTTP.Get()`包装或`TIdHTTP.Post()`小块有什么麻烦`try/except`？如果您不想处理所有可能的异常，那么您可以自己拥有`except`块句柄`EIdHTTPProtocolException`。

```
try
  IdHTTP.Get('http://host/path');
except
  on E: EIdHTTPProtocolException do
  begin
    if E.ErrorCode <> 404 then Raise;
  end;
end; 
```

**更新**：多考虑一下，可能值得为`TIdHTTP.HTTPOptions`属性添加一个新标志以禁用所有状态代码的异常。我正在考虑。

**更新**`hoNoProtocolErrorException`：现在已向该`TIdHTTP.HTTPOptions`属性添加了一个新标志：

```
IdHTTP.HTTPOptions := IdHTTP.HTTPOptions + [hoNoProtocolErrorException];
IdHTTP.Get('http://host/path');
// use IdHTTP.ResponseCode as needed... 
```

**更新**：此外，还有一个`hoWantProtocolErrorContent`标志。当`hoNoProtocolErrorException`启用并发生 HTTP 错误时，如果`hoWantProtocolErrorContent`启用则错误内容将返回给调用者（在`String`返回值或`AResponseContent`输出流中，取决于正在调用的`Get()`/的版本），否则内容将是`Post()`丢弃。

# c++ - Array[n] vs Array[10] - 使用变量初始化数组 vs 数值字面量

> ID：15013077
> 
> 赞同：108
> 
> 时间：2013-02-21T22:01:31.740
> 
> 标签：c++, arrays, initialization, size

我的代码有以下问题：

```
int n = 10;
double tenorData[n]   =   {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}; 
```

返回以下错误：

```
error: variable-sized object 'tenorData' may not be initialized 
```

而使用`double tenorData[10]`作品。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2013-02-21T22:16:46.237

In C++, variable length arrays are not legal. G++ allows this as an "extension" (because C allows it), so in G++ (without being `-pedantic` about following the C++ standard), you can do:

```
int n = 10;
double a[n]; // Legal in g++ (with extensions), illegal in proper C++ 
```

If you want a "variable length array" (better called a "dynamically sized array" in C++, since proper variable length arrays aren't allowed), you either have to dynamically allocate memory yourself:

```
int n = 10;
double* a = new double[n]; // Don't forget to delete [] a; when you're done! 
```

Or, better yet, use a standard container:

```
int n = 10;
std::vector<double> a(n); // Don't forget to #include <vector> 
```

If you still want a proper array, you can use a *constant*, not a *variable*, when creating it:

```
const int n = 10;
double a[n]; // now valid, since n isn't a variable (it's a compile time constant) 
```

Similarly, if you want to get the size from a function in C++11, you can use a `constexpr`:

```
constexpr int n()
{
    return 10;
}

double a[n()]; // n() is a compile time constant expression 
```

# bash - 如何在 bash 函数参数中保留尾随空格？

> ID：15013083
> 
> 赞同：6
> 
> 时间：2013-02-21T22:01:56.970
> 
> 标签：bash, function, whitespace

考虑以下 bash 脚本：

```
#!/bin/bash

function foo {
  echo -n $1
  echo $2
}

foo 'Testing... ' 'OK' # => Testing...OK
# Whitespace --^                      ^
# Missing whitespace -----------------^ 
```

第一个参数中的尾随空格发生了什么？怎么可能保存呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T22:03:59.087

1.  > 第一个参数中的尾随空格发生了什么？

    空格包含在`echo`命令行中，但被 shell 丢弃，就像您键入：

    ```
    echo -n Testing... 
                      ^
                      |----- there is a space here 
    ```

2.  > 怎么可能保存呢？

    引用你的变量：

    ```
    function foo {
      echo -n "$1"
      echo "$2"
    } 
    ```

# c# - 如何报告 WCF ServiceHost 关闭的原因？

> ID：15013084
> 
> 赞同：3
> 
> 时间：2013-02-21T22:02:05.540
> 
> 标签：c#, wcf, web-services

我有一个 WCF 服务，实际上它是由 IIS 托管的。我已经实现了一个自定义 ServiceHost（如此处所述[http://msdn.microsoft.com/en-us/library/aa702697.aspx](http://msdn.microsoft.com/en-us/library/aa702697.aspx)），并且`OnClosing()`为了将关闭事件记录到我们的应用程序日志中而被覆盖。

如果可能的话，我希望能够记录主机关闭的*原因。*我们可以在 ASP.NET 领域做到这一点（如此处所述[http://weblogs.asp.net/scottgu/archive/2005/12/14/433194.aspx](http://weblogs.asp.net/scottgu/archive/2005/12/14/433194.aspx)）。

对于 WCF 服务，这样的事情可能吗？

# html - 如果用户安装了字体，则字体呈现不同...我可以强制保持一致性吗？

> ID：15013088
> 
> 赞同：8
> 
> 时间：2013-02-21T22:02:34.893
> 
> 标签：html, css, fonts

我正在构建一个使用 Googles Webfont Oswald 的网站。我的一些同事遇到了不同的行高，这破坏了网站。经过研究，这是因为他们安装了字体，而大多数其他人没有。这种差异导致了问题。有什么方法可以强制浏览器使用 webfont，而不是使用本机字体呈现它？

更多信息。

我将行高、高度和字体大小指定为相同的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T05:16:11.667

为我解决了这个问题，从我的 css 文件中删除：

文本渲染：优化易读性；

# google-chrome - Chrome 开发工具跟踪更改（html、css、js）

> ID：15013093
> 
> 赞同：2
> 
> 时间：2013-02-21T22:02:52.747
> 
> 标签：google-chrome, developer-tools

我知道您可以从 chrome 中保存 js 和 css，并且 sass 是一个实验性功能。

我想要实现的是一种在我与图形设计师进行实时编辑时跟踪浏览器中所有更改的方法。似乎我无法保存 html 更改；特别是考虑到它的大部分是生成的。

是否有 chrome 扩展或未来计划跟踪更改/保存它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:46:00.640

您可以使用 DevTools Elements 面板中的“复制为 HTML”来保存已编辑的部分甚至整个文档的文本。正如您所说，大部分文档都是在运行时生成的，因此保存生成的文本本身没有多大意义。

# python - 通过 jenkins UI 编辑工作区文件

> ID：15013102
> 
> 赞同：5
> 
> 时间：2013-02-21T22:03:31.007
> 
> 标签：python, jenkins, jenkins-plugins

有没有一种简单的方法可以在 Jenkins 工作区 UI 中编辑我们的 python 文件？

如果我们也能获得代码高亮，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T07:55:58.740

有一个 jenkins 插件可以让你编辑文件：[Config File Provider](https://wiki.jenkins-ci.org/display/JENKINS/Config+File+Provider+Plugin) 它不能编辑随机文件，但你可以用它来实现你想要的。

![在此处输入图像描述](../Images/3be6ed6b309a4d9a2bfda204dc1d5a00.png)

插件的存储是在 jenkins 文件夹中的 xml 文件的形式。这意味着您可以创建脚本，通过解析这些 xml 文件在任何需要它们的地方重新创建这些文件（插件为工作区执行此操作，尽管它需要 build setp）。例如，我可以像这样添加新的自定义配置文件：

名称：script.sh 注释：/var/log 内容：....

这将在 xml 文件中可用，您可以在 cron 作业中解析该文件以在需要它们的位置创建实际文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:59:55.833

我能想到的最接近 Jenkins 提供的是文件上传。您可以上传带有本地更改的文件，然后触发构建。该文件将在已经指定的位置被替换。可以通过使您的构建参数化并添加`File Parameter`选项来使用此功能。下面是 Jenkins 对这个特性的描述。

> 接受来自浏览器的文件提交作为构建参数。上传的文件将放置在工作区中的指定位置，然后您的构建可以访问和使用该位置。这在许多情况下都很有用，例如：
> 
> 让人们对他们构建的工件进行测试。
> 
> 通过允许用户放置文件来自动化上传/发布/部署过程。通过上传数据集执行数据处理。可以不提交任何文件。如果是这种情况，并且如果工作空间中的指定位置上没有文件，则不会发生任何事情。如果工作空间中已经存在一个文件，则该文件将保持原样。

# android - 如何添加级别编号以打开图帖

> ID：15013106
> 
> 赞同：0
> 
> 时间：2013-02-21T22:03:47.880
> 
> 标签：android, facebook, facebook-opengraph

我正在尝试使用开放图发布类似的内容：

```
User completed level 10 in THE GAME. 
```

到目前为止，我已经创建了我的动作和动作所针对的对象。比如对象=级别动作=完成。

我已经通过打开的图形仪表板完成了这项工作。

目前我正在使用此代码发布到用户时间并且它有效：

```
 Bundle params = new Bundle();
params.putString("level", "http://samples.ogp.me/12344556");

Request request = new Request(
    Session.getActiveSession(),
    "me/game_name:completed",
    params,
    HttpMethod.POST
);
Response response = request.executeAndWait(); 
```

但问题是它显示

```
User completeded Sample Level on THE GAME. 
```

所以我想知道如何自定义“示例级别”部分来表示已完成的级别 1“等或用户所在的级别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:24:54.530

您需要创建一个 OG 对象类型“级别”。然后这个对象有一个属性 og:title 可以有你想要的任何标题。每个级别都应该有自己的 Open Graph HTML 页面，如下所示：

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# app_namespace: http://ogp.me/ns/fb/app_namespace#">
<meta property="fb:app_id" content="app_id" /> 
<meta property="og:type"   content="app_namespace:level" /> 
<meta property="og:url"    content="Put your own URL to the object here" /> 
<meta property="og:title"  content="Sample Level X" /> 
<meta property="og:image"  content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png" /> 
```

每个级别都应该有自己的文件，其中包含类似的代码。您将以类似的方式使用这些文件的 URL，例如[http://samples.ogp.me/12344556](http://samples.ogp.me/12344556) Facebook 将获取这些对象并在您的故事中使用它们。

您可以在此处找到更多信息：[Facebook Open Graph - 定义对象](http://developers.facebook.com/docs/technical-guides/opengraph/defining-an-object/)

# c - O_RDWR 权限被拒绝

> ID：15013107
> 
> 赞同：3
> 
> 时间：2013-02-21T22:03:48.377
> 
> 标签：c, unix, permissions

我创建了这个文件

```
char *output = "big";
creat(output, O_RDWR); 
```

当我试图读取文件时

```
 cat big 
```

我的权限被拒绝了。我的代码有什么问题？如何创建具有读写权限模式的文件？

用ls -l，大的权限是这样的

```
---------- 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:17:38.783

您误解了模式参数。从手册页：

```
 mode specifies the permissions to use in case a new file is cre‐
          ated.  This argument must be supplied when O_CREAT is  specified
          in  flags;  if  O_CREAT  is not specified, then mode is ignored.
          The effective permissions are modified by the process's umask in
          the   usual  way:  The  permissions  of  the  created  file  are
          (mode & ~umask).  Note that this mode  only  applies  to  future
          accesses of the newly created file; the open() call that creates
          a read-only file may well return a read/write file descriptor. 
```

并且

```
 creat()    is    equivalent    to    open()   with   flags   equal   to
   O_CREAT|O_WRONLY|O_TRUNC. 
```

因此，更合适的调用可能如下所示：

```
int fd = creat(output, 0644); /*-rw-r--r-- */ 
```

如果你想打开它`O_RDWR`，那么只需使用`open()`：

```
int fd = open(output, O_CREAT|O_RDWR|O_TRUNC, 0644); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:15:56.843

这显然是权限问题，开始尝试查看 creat 是否不返回 -1，如果是，则使用 perror("") 打印 errno 值，以便解决问题。

恕我直言，我宁愿使用 open() 来执行此操作，因为正如 creat 手册页中提到的，“请注意 open() 可以打开设备特殊文件，但 creat() 不能创建它们；..”和“creat () 等效于 open() ，其标志等于 O_CREAT | O_WRONLY | O_TRUNC"，这不涉及权限..

如果您这样做，结果将完全相同：

```
char*   output = "big";
int     fd;

fd = open(output, O_RDWR | O_CREAT | O_TRUNC, S_IRUSR | S_IWUSR);
// do whaterver you want to do in your file
close(fd); 
```

欲了解更多信息，“man 2 open”

# visual-studio-2010 - 属性不可见

> ID：15013108
> 
> 赞同：0
> 
> 时间：2013-02-21T22:03:54.633
> 
> 标签：visual-studio-2010, datagrid

我`datagrid`对一个简单的 Windows 窗体项目（框架 4.0，VS2010）有疑问。在后面的代码中是无法访问该`datagrid.Columns`属性的。我是否缺少程序集参考？

这些是我的参考：

```
Microsoft.CSharp,
System,
System.Core,
System.Data,
System.Data.DataSetExtensions,
System.Data.Entity,
System.Deployment,
System.Drawing,
System.Runtime.Serialization,
System.Security,
System.Windows.Forms,
System.Windows.Form.Ribbon35,
System.xml,
System.Xml.Linq,
WindowsBase,
WPFToolkit.Extended 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:31:38.953

也许我想通了。该属性似乎仅适用于 wpf 组件。实际上，对于 Windows 表单，datagrid 程序集是 System.Windows.Form 而对于 wpf 组件是 PrsentationFramework (System.Windows.Controls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:10:44.200

我不确定，但我没有看到 System.Windows.Controls，你需要它。

数据网格列的组装：system.windows.controls.datagrid.columns

当您缺少程序集时，我还想建议您[Resharper一个非常好的工具。](http://www.jetbrains.com/resharper/)

# php - 自动计算到期日php

> ID：15013112
> 
> 赞同：0
> 
> 时间：2013-02-21T22:04:05.327
> 
> 标签：php, date

在我正在创建的站点中，我想存储成员数据，并且在该数据中我有一个很容易获得的开始/加入日期，但我想自动计算我遇到问题的到期日期..

基本上所有新成员都将在每年二月的最后一天到期，所以如果我在 2013 年 2 月 1 日加入，我的到期日将在 28/02/2014，如果我在 2013 年 1 月 3 日或 2013 年 12 月加入我的到期日仍然是 28/02/2014。（（（我不太介意闰年出现的 1 天））

有谁知道我该如何解决这个问题-我知道这可能很明显，但我似乎无法理解！：/

（我将在 php 中执行此操作）

非常感谢，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:35:19.920

假设您有（或可以获得）他们的 Unix 时间戳格式的注册日期，您可以执行以下操作：

```
function calculateExpiry($reg_date)
{
    $next_year = strtotime('+1 year', $reg_date);
    $feb_days = ((($next_year % 4) == 0) && ((($next_year % 100) != 0) || (($next_year % 400) == 0))) ? 29 : 28;
    return strtotime($feb_days.' February '.$next_year);
} 
```

这将始终以 Unix 时间戳返回下一年二月的最后一天，因此您可以按照自己的喜好对其进行格式化。我觉得这个逻辑比较合适，看下面的用例：

*   注册：`01/01/2013`，返回：`28/02/2014`
*   注册：`09/10/2013`，返回：`28/02/2014`
*   注册：`31/12/2013`，返回：`28/02/2014`
*   注册：`01/01/2014`，返回：`28/02/2015`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T22:38:14.913

这也应该解决问题:)。

```
function calculate_expiry( $rawDate ) {

    // Convert data into usable timestamp
    $signupDate = strtotime( $signupDate );
    $cutoffYear = date('Y', $signupDate) + 1;

    // Set the expiry to be the last day of Feb (the first day of March -1)
    $expiryDate = new DateTime();
    $expiryDate->setTimestamp( mktime( 0, 0, 0, 3, 1, $cutoffYear ) );
    $expiryDate->sub( new DateInterval('P1D') );

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T22:09:52.413

好吧，我们将通过以下方式获得当前的注册日期...

```
$signup_date = date("m-d-Y"); // or time() 
```

然后再抵消一年

```
$expire_date = date("m-d-Y", strtotime("+1 year")) 
```

# r - rHipe mapreduce 获取正在处理的文件名

> ID：15013113
> 
> 赞同：0
> 
> 时间：2013-02-21T22:04:07.887
> 
> 标签：r, hadoop, mapreduce, filenames

我正在使用 RHipe 将目录发送到我的 mapreduce 作业中。有没有办法让 Mapper 中正在处理的当前文件？我想将其输出为我的密钥。谢谢！

```
map <- expression({
   fileName <- "testing123" // ?????
     .....
    rhcollect(fileName, value)
})

z <- rhmr(map=map,reduce=NULL, inout=c("text", "text")
      ,ifolder=directoryName
      ,ofolder=outDirectory) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:23:07.733

文件名 <- Sys.getenv("mapred.input.file")

是解决方案

# azure - Service Bus 1.0 无法创建队列或主题

> ID：15013118
> 
> 赞同：1
> 
> 时间：2013-02-21T22:04:21.147
> 
> 标签：azure, appfabric, servicebus, windows-server-2012, azureservicebus

我已经在 Server 2012 上安装了用于 Windows Server 的服务总线。我正在尝试使用“服务总线资源管理器”管理 GUI 来管理队列/主题。

我正在使用以下 PowerShell 命令生成的端点连接连接到我的服务命名空间：

```
Get-SBClientConfiguration -Namespaces 'MyNamespace' -Verbose; 
```

生成：

```
Endpoint=sb://MyMachine/MyNamespace;StsEndpoint=https://MyMachine:9355/MyNamespace;RuntimePort=9354;ManagementPort=9355 
```

而且我能够成功连接。

问题：

在 Service Bus Explorer GUI 中，当我尝试创建队列或主题时，日志输出中出现以下错误：

```
Exception: Object reference not set to an instance of an object. 
```

有什么我想念的吗？我已经浏览了所有我能找到的 Service Bus 1.0 安装指南，并且一切似乎都符合我的安装要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:18:09.367

我是该工具的作者。在 12 月，我遇到了类似的问题：

如果您 GAC 的是 Microsoft.ServiceBus.dll v.1.8 的 Windows Azure 服务总线版本：

*   Service Bus 1.0 for Windows Server 的 Service Bus Gateway 和 Service Bus Message Broker Windows 服务正常启动，但它们加载的是云 dll 而不是本地的。
*   在同一台机器上运行的任何客户端应用程序都会加载 dll 的云版本。
*   如果客户端应用程序连接到本地的本地 SB 命名空间，则 NamespaceManager 和 MessagingFactory 会正确创建。
    *   namespaceManager = NamespaceManager.CreateFromConnectionString(connectionString);
    *   MessagingFactory = MessagingFactory.CreateFromConnectionString(connectionString);
*   NamespaceManager 对象可用于创建和删除实体（例如队列）
*   相反，如果应用程序尝试使用从 MessagingFactory 创建的 MessageSender 或 MessageReceiver 对象向本地队列发送或接收消息，则操作将失败并且应用程序会捕获异常（错误号为 50002）。从 GAC 中删除 Windows Azure 服务总线 Microsoft.ServiceBus.dll v.1.8 并重新启动服务总线网关和服务总线消息代理 Windows 服务后，问题消失了。
*   客户端应用程序能够向/从链接云和本地 dll 的本地队列发送和接收消息。简而言之，如果您 GAC dll 的云版本、Service Bus Gateway 和 Service Bus Message Broker Windows 服务正确启动，您可以创建消息传递实体，但是当应用程序尝试发送/接收消息时会出错。

问题：

*   你 GACed 了 dll 的 Windows Azure 版本吗？
*   您使用的是哪个版本的服务总线资源管理器（请参阅关于表单）？

# linux - 使用 sqlplus 编写 bash 函数以删除用户

> ID：15013119
> 
> 赞同：0
> 
> 时间：2013-02-21T22:04:32.707
> 
> 标签：linux, bash, sqlplus

我编写了一个小的 bash 脚本来从表中删除一些行并使用 sqlplus 删除一些用户。当我将代码放入函数中时，它会给出“语法错误：文件意外结束”错误消息。下面是代码。请让我知道如何解决它。

```
function reset_db
{
sqlplus user1/password1@${input} << eof
set timing off
set serveroutput on size 10000
set feedback off
spool logfile_$input.out

delete from table1 where component = 'XYZ';
delete from table2 where component = 'XYZ';
commit;
exit
eof

sqlplus dba_usr/dba_password@${input} << eof
set timing off
set serveroutput on size 10000
set feedback off
spool logfile_$input.out

drop user ABC cascade;
drop user DEF cascade;
drop user HIG cascade;
commit;
exit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:07:36.513

您在第二个命令`eof`的末尾错过了。`sqlplus`改变这个：

```
exit;
} 
```

对此：

```
exit;
eof
} 
```

顺便说一句，您实际上不需要分别调用`sqlplus`两次；您可以使用它的`connect`命令断开一个连接并打开一个新连接：

```
function reset_db
{

sqlplus user1/password1@${input} << eof

set timing off
set serveroutput on size 10000
set feedback off
spool logfile_$input.out

delete from table1 where component = 'XYZ';
delete from table2 where component = 'XYZ';
commit;

connect dba_usr/dba_password@${input}

drop user ABC cascade;
drop user DEF cascade;
drop user HIG cascade;

eof

} 
```

# jquery - 有人可以帮我编辑我第一次尝试替换闪烁地址的代码吗？

> ID：15013122
> 
> 赞同：0
> 
> 时间：2013-02-21T22:04:47.380
> 
> 标签：jquery

所以，我对此完全陌生，并试图产生一种旧地址闪烁几次的效果，然后用一些新文本替换它。但是，在我使用 .replaceWith() 的那一刻，它会覆盖所有其他 .fade 和 .append 调用。

```
 <div id="footer-address">
<strong>Address</strong>&nbsp;&nbsp; Old Address</div>

    <script>
    $( document ).ready(function() {
      $( "#footer-address" ).fadeOut(400).fadeIn(400).fadeOut(400).fadeIn(400).fadeOut(400).fadeIn(400).fadeOut(400).fadeIn(400).fadeOut(400).fadeIn(400).fadeOut(400).fadeIn(400).fadeOut(400).replaceWith("We have moved! Our new address is").fadeOut(400).append("<strong>Address</strong>  New Address");
    });
    </script> 
```

我很感激你把我的脑袋撞到一边，并提供了正确的方法来做这样的事情。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:14:15.150

`replaceWith`与动画函数不同，动画函数是一个接一个地排队执行。

您可以使用[`queue`](http://api.jquery.com/queue/#queue2)将非动画函数添加到动画队列：

```
$( "#footer-address" )
    .fadeOut(400)
    .fadeIn(400)
    .fadeOut(400)
    .queue(function(){
         $( "#footer-address" ).empty().append("We have moved! Our new address is");
         $(this).dequeue();
     })
    .fadeOut(400)
    .queue(function(){
         $( "#footer-address" ).append("<strong>Address</strong>  New Address");
         $(this).dequeue();
     }) 
```

不要忘记[`dequeue`](http://api.jquery.com/dequeue/)指示“动画”已经完成并且应该开始下一个的调用。

* * *

原建议：

您可以使用回调函数在替换元素之前等待动画完成：

```
$( "#footer-address" ).fadeOut(400).fadeIn(400).fadeOut(400, function(){
    $( "#footer-address" ).replaceWith("We have moved! Our new address is").fadeOut(400,      function(){
        $( "#footer-address" ).append("<strong>Address</strong>  New Address");
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:13:33.603

您还可以使用 CSS3 动画（来自[此答案](https://stackoverflow.com/a/8623507/551093)）：

```
#footer-address.blink {
    animation:         blink 300ms linear infinite;
    -moz-animation:    blink 300ms linear infinite; 
    -webkit-animation: blink 300ms linear infinite; 
}

@keyframes         blink { 0% {opacity:0;} 50% {opacity:1;} 100% {opacity:0;} }
@-moz-keyframes    blink { 0% {opacity:0;} 50% {opacity:1;} 100% {opacity:0;} }
@-webkit-keyframes blink { 0% {opacity:0;} 50% {opacity:1;} 100% {opacity:0;} } 
```

确保`#footer-address`元素具有 .blink 类开始，然后在一定时间后，使用 js 将其删除。

```
setTimeout(function() {
    $('#footer-address').removeClass('blink').text('We have moved! Our new address is...');
}, 4000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:30:37.663

你实际上有几个问题。

1.  您的调用`replaceWith`是替换 div，而不是更改其中的 HTML，因此一旦触发，`#footer-address`就不再存在。
2.  如前所述，并非所有函数都以相同的方式排队。

一个应该工作的例子（调整数字以获得你喜欢的效果）：

```
$("#footer-address").fadeOut(400).fadeIn(400).fadeOut(400).fadeIn(400).fadeOut(400).fadeIn(400).fadeOut(400).fadeIn(400).fadeOut(400).fadeIn(400);

setTimeout(function() {
  $("#footer-address").html("We have moved! Our new address is").fadeOut(400);
}, 4400);

setTimeout(function() {
  $("#footer-address").html("<strong>Address</strong>  New Address").fadeIn(400);
}, 4800); 
```

演示在[http://jsbin.com/uguhug/1/edit](http://jsbin.com/uguhug/1/edit)

# mysql - 仅按月份和年份分组日期

> ID：15013123
> 
> 赞同：0
> 
> 时间：2013-02-21T22:04:53.817
> 
> 标签：mysql

假设我有一个如下表：

```
id | assignment | duedate
1  | Math       | 2012-01-01
2  | History    | 2012-02-02
3  | Science    | 2012-01-01
4  | Government | 2012-02-01
5  | Government | 2013-01-13
6  | History    | 2013-03-13 
```

是否可以进行一些 sql 查询，以便按月和年对所有日期进行分组？是否有可能我可以获得以下排序结果：

```
duedatemonth  | count 
January 2012  | 2
Feburary 2012 | 2
January 2013  | 1
March 2013    | 1 
```

我知道您可以按到期日期分组，但只能对具有相同月、日和年的那些分组，而不是仅对月和年分组。

那么是否有可能进一步对它进行分组，以便它考虑“分配”以获得结果表

```
id | duedatemonth  | count 
1  | January 2012  | 2
3  | January 2012  | 2
2  | Feburary 2012 | 2
4  | Feburary 2012 | 2
5  | January 2013  | 1
6  | March 2013    | 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:05:57.057

使用字符串函数`YEAR`和`MONTH`.

```
SELECT YEAR(duedate), MONTH(duedate), COUNT(*)
FROM sparkles
GROUP BY YEAR(duedate), MONTH(duedate) 
```

使用`MONTHNAME`或`DATE_FORMAT`获取月份的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:14:54.980

您可以使用此查询。

```
SELECT DATE_FORMAT(duedate, '%M %Y') duedatemonth, COUNT(1) `count`
FROM Tbl
GROUP BY DATE_FORMAT(duedate, '%M %Y') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:25:22.510

试试这个

```
 SELECT DATE_FORMAT(duedate,'%M %Y')  duedatemonth, COUNT(*) count
    FROM Table1
   GROUP BY year(duedate), MONTH(duedate) 
```

[**在这里演示**](http://sqlfiddle.com/#!2/c9df1/7)

将输出：

```
 DUEDATEMONTH     COUNT
   January 2012     2
  February 2012     2
   January 2013     1
     March 2013     1 
```

# wpf - 如何更改 WPF TextBox 中文本上下文的起始位置

> ID：15013125
> 
> 赞同：2
> 
> 时间：2013-02-21T22:04:59.367
> 
> 标签：wpf, xaml

如何将**默认**起始文本内容位置（如上部 TextBox）更改为下部 TextBox。

![在此处输入图像描述](../Images/affd7c92b8960aab28f48faa248e3c9b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:13:51.787

您应该能够将左侧填充设置为 0，并且 TextBox 将如下所述：

```
<TextBox Padding="0,5,5,5" ... /> 
```

我不确定，但默认填充可能是 3，所以：

```
<TextBox Padding="0,3,3,3" ... /> 
```

MSDN 有一篇关于[Alignment, Margins, and Padding Overview](http://msdn.microsoft.com/en-us/library/ms751709.aspx)的好文章。

# c++ - URLDownloadToFile 到同一目录

> ID：15013126
> 
> 赞同：1
> 
> 时间：2013-02-21T22:05:03.393
> 
> 标签：c++

我正在尝试将网络中的随机文件保存到 .exe 所在的同一目录中。问题是我只有在指定绝对目录时才能工作。

我尝试的最后一个代码是：

```
 string home;    
    home = system("echo %HOMEDRIVE%%HOMEPATH%/aaa.gif");

  HRESULT hr = URLDownloadToFile ( NULL, _T("http://stackoverflow.com/gif.gif"), (TCHAR*)home.c_str(), 0, NULL ); 
```

我也试过：

```
HRESULT hr = URLDownloadToFile ( NULL, _T("http://stackoverflow.com/gif.gif"), "/aaa.gif", 0, NULL ); 
```

但它也不起作用。

我该如何解决？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:50:50.137

尝试使用 _T(".\\aaa.gif") 作为文件名。这将使用当前目录作为文件存储位置。或者，您也可以使用 GetModuleFileName 获取 exe 的执行路径并计算出保存文件的路径名。

# icloud - 存储 iCloud 容器 URL

> ID：15013129
> 
> 赞同：1
> 
> 时间：2013-02-21T22:05:11.640
> 
> 标签：icloud, nsfilemanager

我可以存储从以下位置返回的 NSURL：

```
[[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil] 
```

在 NSUserDefaults（或 plist）中以在我的应用程序启动时更快地访问 iCloud 容器？

目前，上述代码可能需要几秒钟（有时超过 10 秒）才能返回容器路径。当我的应用程序等待返回时，这会导致从 iCloud 加载用户数据时出现明显且令人讨厌的延迟。

我假设每次启动应用程序时 NSURL 路径都完全相同，因此应该可以将其存储起来以便以后快速访问。

我已经在我自己的设备上尝试过它并且效果很好，我只是想知道在“野外”这样做是否有任何问题。

塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:44:25.570

那*可能会*奏效。但它不能解决问题，它只是移动它。该方法像它一样阻塞，因为它在内部为您的应用程序启动并运行 iCloud（这可能涉及网络调用）。这迟早会发生，因为它是您的应用程序的 iCloud 设置过程的一部分。你可能会避免那个电话，但你会在其他地方遇到延迟。

唯一的主要问题是用户可能会在您的应用程序未运行时退出 iCloud，或者更糟糕的是，退出 iCloud 并登录到不同的 iCloud 帐户。如果您保存此 URL，请确保您还保存了`ubiquityIdentityToken`它的值（您可以在不阻塞的情况下查找），并检查其值在应用启动时是否已更改。还要收听`NSUbiquityIdentityDidChangeNotification`，如果它曾经发布过，请再次查找 URL 并保存新值。

# java - 处理错误：格式错误的字符常量（期望引用，得到 h）

> ID：15013130
> 
> 赞同：2
> 
> 时间：2013-02-21T22:05:13.613
> 
> 标签：java, processing

我正在制作一个虚拟宠物游戏。在这个阶段我已经加载了一个保存文件，但是当我开始包含核心功能时程序没有运行。

我发现了这个：[格式错误的字符（期望引用，得到了我）〜处理](https://stackoverflow.com/questions/14446501/badly-formed-character-expecting-quote-got-i-processing) 这让我认为这是我的加载功能的问题，但我是处理的新手，不知道如何调试它。

```
Creature creature;
String data[];
boolean gameInfo[];
int tempData[];
boolean food;

void setup() {
  size(100,100);
  String data[] = loadStrings("save.txt");
  String[] tempData = split(data[0], ',');
  gameInfo = int(tempData);
  for (int i = 0; i < data.length; i++) { 
    creature = new Creature(gameInfo[0], gameInfo[1], gameInfo[2], gameInfo[3]);
  }
  food = false;
}

void draw() {
  creature.think(food);
}

//creature class

class Creature {
  boolean idle;
  int hungry;
  int age;
  int gender;
  int asleep;

  Creature(int gender, int age, int hungry, int asleep) {
    this.gender = gender;
    this.age = age;
    this.hungry = hungry;
    this.asleep = asleep;
    boolean idle = true;
  }
  void whatDo(boolean food) {
    println('whatdo');
    if (idle = true && hungry == true) {
      if (food == true) {
        creature.eat();
      }
      else 
        creature.ask();
    }
  }

  void ask() {
    if (hungry == true) {
      println("HUNGRY");
    }
  }
  void eat() {
    println("EAT");
    idle = false;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:15:43.757

好吧，正如您指出的链接所解释的那样，问题在于单引号用于字符分配，因此它应该是两个单引号之间的字符，例如`'c'`，并且 println() 期望在双引号之间定义一个字符串`"a string"`。只需`println('whatdo');`用（双引号）替换第 40 行`println("whatdo");`，您就可以摆脱这个错误。但是我在修复之后遇到了其他错误。

# xslt - XSLT 评论系统

> ID：15013132
> 
> 赞同：0
> 
> 时间：2013-02-21T22:05:16.800
> 
> 标签：xslt, xslt-1.0

我正在尝试使用 XSLT 构建一个评论系统。这是已提交评论的 XML 输入：

```
<in:inputs xmlns:in="http://www.composite.net/ns/transformation/input/1.0">
<!-- Input Parameter, XPath /in:inputs/in:param[@name='story_id'] -->
<in:param name="story_id">182485599</in:param>
<!-- Function Call Result (0 ms), XPath /in:inputs/in:result[@name='LoggedInWebUserID'] -->
<in:result name="LoggedInWebUserID">233459</in:result>
<!-- Function Call Result (9 ms), XPath /in:inputs/in:result[@name='XML_Comment']/root -->
<in:result name="XML_Comment">
    <root xmlns="">
        <Comments CommentID="1" ResponseCommentID="0" WebUserID="123456" FULL_NAME="Osikhuemhe Abulume" Comment="test comment!!!!" DateSubmitted="Feb 20 2013  1:34PM"/>
        <Comments CommentID="2" ResponseCommentID="0" WebUserID="261337" FULL_NAME="Phillip Lowe" Comment="test comment2!!!!" DateSubmitted="Feb 20 2013  5:14PM"/>
        <Comments CommentID="3" ResponseCommentID="1" WebUserID="000007" FULL_NAME="Norman Abbott" Comment="my response" DateSubmitted="Feb 20 2013  5:14PM"/>
        <Comments CommentID="4" ResponseCommentID="0" WebUserID="233459" FULL_NAME="Tamara Failor" Comment="Not impressed..." DateSubmitted="Feb 20 2013  4:10PM"/>
        <Comments CommentID="5" ResponseCommentID="0" WebUserID="233459" FULL_NAME="Tamara Failor" Comment="blah blah blah. " DateSubmitted="Feb 20 2013  4:11PM"/>
        <Comments CommentID="6" ResponseCommentID="0" WebUserID="233459" FULL_NAME="Tamara Failor" Comment="dfsfs" DateSubmitted="Feb 20 2013  4:14PM"/>
        <Comments CommentID="7" ResponseCommentID="5" WebUserID="233459" FULL_NAME="Tamara Failor" Comment="this is a response to blah blah blah." DateSubmitted="Feb 20 2013  4:52PM"/>
        <Comments CommentID="8" ResponseCommentID="3"  WebUserID="233459" FULL_NAME="Tamara Failor" Comment="I don't agree with Norman. Terrible response." DateSubmitted="Feb 20 2013  5:39PM"/>
        <Comments CommentID="9" ResponseCommentID="4"  WebUserID="233459" FULL_NAME="Tamara Failor" Comment="I'm impressed." DateSubmitted="Feb 20 2013  5:43PM"/>
        <Comments CommentID="10" ResponseCommentID="1" WebUserID="233459" FULL_NAME="Tamara Failor" Comment="I've got something to say!" DateSubmitted="Feb 20 2013  6:34PM"/>
    </root>
</in:result> 
```

这应该像任何其他新闻报道评论系统一样工作（参见：[http](http://www.npr.org/2013/02/20/172384724/when-a-bad-economy-means-working-forever) ://www.npr.org/2013/02/20/172384724/when-a-bad-economy-means-working-forever ）

也就是说 - 新评论 (ResponseCommentID = 0) 总是被推到左边。

对这些评论的回应将缩进下面。（我现在不关心缩进。我希望得到对评论的回复，以相互理解）

有两个部分我被卡住了。第一部分是如何调用每个帖子：

```
 <xsl:variable name="story_id" select="/in:inputs/in:param[@name='story_id']" />
    <xsl:variable name="root" select="/in:inputs/in:result[@name='XML_Comment']/root" />
    <xsl:for-each select="$root/Comments[@ResponseCommentID=0]">

    <!-- call the template to plot the first comment down -->
        <xsl:call-template name="thecomment">
            <xsl:with-param name="CommentID"><xsl:value-of select="@CommentID" /></xsl:with-param>
            <xsl:with-param name="ResponseCommentID"><xsl:value-of select="@ResponseCommentID" /></xsl:with-param>
        </xsl:call-template>

    <!-- if the comment has any responses, put those underneath the root -->
        <xsl:for-each select="$root/Comments[current()/@CommentID = $root/Comments/@ResponseCommentID]">
            <xsl:call-template name="thecomment">
                <xsl:with-param name="CommentID"><xsl:value-of select="@CommentID" /></xsl:with-param>
                <xsl:with-param name="ResponseCommentID"><xsl:value-of select="@ResponseCommentID" /></xsl:with-param>
            </xsl:call-template>
        </xsl:for-each> 
```

模板的（也是非常错误的）结束递归部分：

```
 <xsl:if test="@CommentID = $root/Comments/@ResponseCommentID">
       <xsl:call-template name="thecomment">
            <xsl:with-param name="CommentID"><xsl:attribute name="value"><xsl:value-of select="@CommentID[@CommentID = $root/Comments/@ResponseCommentID]" /></xsl:with-param>
            <xsl:with-param name="ResponseCommentID"><xsl:attribute name="value"><xsl:value-of select="@ResponseCommentID[@CommentID = $root/Comments/@ResponseCommentID]" /></xsl:with-param>
        </xsl:call-template>
    </xsl:if> 
```

如果有人能把我推向正确的方向，我将非常感激。如果需要更多信息，请告诉我。实际的模板“注释”只是简单地将注释传递给它并按照我想要的方式对其进行格式化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:20:07.233

**您可以考虑将两者组合成一个xsl:apply-templates**调用，而不是使用**xsl:for-each**然后调用命名模板。首先，您将选择 ResponseCommentID 属性为 0 的评论。

 **```
<xsl:apply-templates 
   select="in:inputs/in:result[@name='XML_Comment']/root/Comments[@ResponseCommentID='0']" /> 
```

然后，您将有一个模板来匹配**Comments**属性，您可以在其中输出评论详细信息。然后，您可以递归地获取响应评论，如下所示：

```
<xsl:apply-templates select="../Comments[@ResponseCommentID = current()/@CommentID]" /> 
```

这只会递归调用相同的**Comments**模板，直到没有更多的响应。

在这种情况下，这是完整的 XSLT（我将注释作为 HTML 中的列表项输出，仅作为示例）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:in="http://www.composite.net/ns/transformation/input/1.0" exclude-result-prefixes="in">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/">
      <ul>
      <xsl:apply-templates select="in:inputs/in:result[@name='XML_Comment']/root/Comments[@ResponseCommentID='0']" />
      </ul>
   </xsl:template>

      <xsl:template match="Comments">
      <li>
         <xsl:value-of select="@Comment" />
         <xsl:if test="../Comments[@ResponseCommentID = current()/@CommentID]">
            <ul>
               <xsl:apply-templates select="../Comments[@ResponseCommentID = current()/@CommentID]" />
            </ul>
         </xsl:if>
      </li>
   </xsl:template>
</xsl:stylesheet> 
```

这给出了以下输出

```
<ul>
   <li>test comment!!!!
      <ul>
         <li>my response
            <ul>
               <li>I don't agree with Norman. Terrible response.</li>
            </ul>
         </li>
         <li>I've got something to say!</li>
      </ul>
   </li>
   <li>test comment2!!!!</li>
   <li>Not impressed...
      <ul>
         <li>I'm impressed.</li>
      </ul>
   </li>
   <li>blah blah blah. 
      <ul>
         <li>this is a response to blah blah blah.</li>
      </ul>
   </li>
   <li>dfsfs</li>
</ul> 
```

**但是，在此处使用xsl:key**来查找对评论的响应会更有效：

```
<xsl:key name="Comments" match="Comments" use="@ResponseCommentID" /> 
```

然后要获得顶级评论，您可以这样做：

```
<xsl:apply-templates select="key('Comments', '0')" /> 
```

要在匹配的模板中获得对给定评论的响应，您可以这样做

```
<xsl:apply-templates select="key('Comments', @CommentID)" /> 
```

以下 XSLT 也给出了相同的结果

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:in="http://www.composite.net/ns/transformation/input/1.0" exclude-result-prefixes="in">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="Comments" match="Comments" use="@ResponseCommentID" />

   <xsl:template match="/">
      <ul>
      <xsl:apply-templates select="key('Comments', '0')" />
      </ul>
   </xsl:template>

      <xsl:template match="Comments">
      <li>
         <xsl:value-of select="@Comment" />
         <xsl:if test="key('Comments', @CommentID)">
            <ul>
               <xsl:apply-templates select="key('Comments', @CommentID)" />
            </ul>
         </xsl:if>
      </li>
   </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:08:40.733

我想我想通了。这是我的 XLST 现在的样子。它将通过所有评论，但前提是它是第一篇文章 (@ResponseCommentID = 0)。

```
<xsl:for-each select="$root/Comments">

<xsl:if test="@ResponseCommentID = 0 and @CommentID != $root/Comments/@ResponseCommentID">
    <!-- call the template to first plot the comment down -->
        <xsl:call-template name="thecomment">
            <xsl:with-param name="CommentID"><xsl:value-of select="@CommentID" /></xsl:with-param>
            <xsl:with-param name="ResponseCommentID"><xsl:value-of select="@ResponseCommentID" /></xsl:with-param>
        </xsl:call-template>
</xsl:if>
</xsl:for-each> 
```

这是最后的递归部分。它查看所有评论，并为每个等于当前@CommentID 的@ResponseCommentID 属性调用模板。

```
 <xsl:for-each select="$root/Comments[@ResponseCommentID = current()/@CommentID]">
       <xsl:call-template name="thecomment">
            <xsl:with-param name="CommentID"><xsl:value-of select="@CommentID" /></xsl:with-param>
            <xsl:with-param name="ResponseCommentID"><xsl:value-of select="@ResponseCommentID" /></xsl:with-param>
        </xsl:call-template>
    </xsl:for-each> 
```

仍然不完全理解它（我一直不得不在脑海中重播一系列事件），但我相信这是可行的。:)**

# vim - 如何在vim中使用单个键绑定切换自动格式化？

> ID：15013133
> 
> 赞同：2
> 
> 时间：2013-02-21T22:05:23.563
> 
> 标签：vim

我正在尝试使用单个键绑定来切换 vim 中的自动格式化（例如，`fo+=a`如果未启用，则启用，否则禁用），如下所示：`fo-=a`

```
nnoremap <leader>a "magic goes here" 
```

我考虑过使用一些存在条件检查，但我找不到。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:17:20.257

The magic is the '&' in the snippet below

:help expr-option

```
nnoremap <leader>a call ToggleFormat()

function! toggleFormat()
      if &formatoptions !~ 'a'
          set fo+=a
      else
          set fo-=a
      endif
  return 0 
endfunction 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T22:15:03.140

这就是我要做的：

```
function! ToggleAutoFormat()
    if -1==stdridx(&fo, 'a')
        set fo+=a
    else
        set fo-=a
    endif
endfunction

nnoremap <leader>a :call ToggleAutoFormat() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-16T02:00:47.527

Lighthart 答案的更新版本，包含一些调整：

```
function! ToggleFormat()
      if &formatoptions !~ 'a'
          set fo+=a
      else
          set fo-=a
      endif
      "" print the value of formatoptions once we're done
      set formatoptions
endfunction

"" End with <CR> to instantly run the function when triggered.
nnoremap <leader>a :call ToggleFormat()<CR> 
```

# key - Gnuplot，如何在关键标题中包含空格字符？

> ID：15013134
> 
> 赞同：3
> 
> 时间：2013-02-21T22:05:24.363
> 
> 标签：key, label, gnuplot, legend

从文件中读取数据时，我想在 gnuplot 4.4 图表中使用“Best F”“Worst F”等关键标题，但我不知道如何放置空间，例如：

```
Generation Best_F Worst_F Average_F
     5        4     9         5
     4        3     9         4 
```

我尝试在文件“Best F”、“Best%20F”、“Best\ F”中写入，但是当作为列标题读取时它们会被拆分，或者我会得到看起来很丑的“%20”。

```
plot for[col=2:4] data.dat using 1:col title columnheader(col) 
```

或者有没有办法进行字符替换，比如 "Best_F"%" "->"Best F"？替换（“_”，“\”，列头（col））？

我正在使用终端 wxt 和 pngcairo（无乳胶）。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T17:00:35.713

根据手册的[Datastrings](http://www.gnuplot.info/docs_4.2/gnuplot.html#x1-5000011)部分（这是一个旧版本，但不幸的是后来的那些还没有以 HTML 形式发布），数据文件中的字符串用双引号分隔。如果我将您的示例数据文件修改为这样，那么当我在 gnuplot 4.6 patchlevel 1（启用数据字符串）下运行它时，我会得到带有空格的标题。

```
Generation "Best F" "Worst F" "Average F"
     5        4     9         5
     4        3     9         4 
```

程序：

```
plot for[col=2:4] "data.txt" using 1:col title columnheader(col) 
```

输出摘录：

> ![在此处输入图像描述](../Images/e20c75a860c9eabe49f5a5450cdb506a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-19T09:00:57.217

使用[增强的 Postscript](http://gnuplot.sourceforge.net/docs_4.2/node411.html "增强后记")，您可以创建可变宽度的空间：

```
Generation Best&{x}F Worst&{x}F Average&{x}F
     5        4         9           5
     4        3         9           4 
```

您可以在其中将 x 替换为所需长度的字符串。然而，这需要一个终端允许

```
set termoption enhanced 
```

如果您想使用`awk`基于标题处理文件并根据列标题在 gnuplot 中自动标记它们，这将特别有用。

# java - 使用 RTC API 4 从 ProjectArea 获取流

> ID：15013137
> 
> 赞同：1
> 
> 时间：2013-02-21T22:05:42.180
> 
> 标签：java, rtc, jazz

您好，我一直在尝试使用 projectArea 获取流名称。我有以下参数： Repository IFileItem WorkItem and its ChangeSets

有没有可能得到它。

提前致谢。

请不要给我一个顾问示例的链接，因为我已经阅读了它，但我无法做到。

在这篇文章中，提到了以下内容： [https ://jazz.net/forum/questions/49910/how-to-get-an-iconfiguration-from-ichangeset](https://jazz.net/forum/questions/49910/how-to-get-an-iconfiguration-from-ichangeset)

> 有一个提示通常很有用（但不一定总是正确），隐藏在 ILink 中，它用作 IChangeSetHandle（源）和 IWorkItemHandle（目标）之间的绑定。源端的 IItemReference 有一个 String extraInfo 字段，可以通过 IItemReference#getExtraInfo() 检索该字段。此字符串的格式为 IWorkspace=，它指示原始工作空间。您可以使用 IWorkspace.ITEM_TYPE.createItemHandle(suppliedUUID, null) 创建 IWorkspace 的句柄。

```
public void testWorkspaceConnection(ITeamRepository repository, IWorkItem workItem) throws TeamRepositoryException, IOException{
       List<ILink> changeSetLinks = (List<ILink>)linkCollection.getLinksById("com.ibm.team.filesystem.workitems.change_set");
       List<IReference> changeSetReferences = new ArrayList<IReference>();

         for (ILink link : changeSetLinks) {
            changeSetReferences.add(link.getSourceRef());
         }

         List<IItemHandle> itemHandles = new ArrayList<IItemHandle>();

         for (IReference reference : changeSetReferences) {
             itemHandles.add((IItemHandle)reference.resolve());
         }

         if(itemHandles.isEmpty()){
             return;
         }

         IItemHandle itemHandle = itemHandles.get(itemHandles.size() - 1);
         IChangeSet changeSet = (IChangeSet)repository.itemManager().fetchCompleteItem(itemHandle, 0, monitor);
         List changes = changeSet.changes();         

         IFileItem fileItem = getLogidiagFile(changeSet, repository);
         // TILL HERE THAT WAS AN EXISTING CODE THAT WAS ALREADY THERE AND IT FETCHES THE REQUIRED FILE.
         //NEXT IS WHAT |'VE ADDED TO BE ABLE TO DETERMINE THE FULL PATH
         String uuid=changeSetReferences.get(changeSetReferences.size()-1).getExtraInfo(); //Here I need to get workspace uuid to be abble to create a connection over as the post said
         IWorkspaceHandle workspaceHandle = (IWorkspaceHandle)IWorkspace.ITEM_TYPE.createItemHandle(UUID.valueOf(uuid), null);

         IWorkspaceManager workspaceManager = SCMPlatform.getWorkspaceManager(repository);
         IWorkspaceConnection workspaceConnection = workspaceManager.getWorkspaceConnection(workspaceHandle,monitor); 
```

我得到的异常如下：

> 线程“主”java.lang.IllegalArgumentException 中的异常：com.ibm.team.repository.common.UUID.valueOf(UUID.java:76) 处的 UUID [Workspace=_iibA0GlNEeKd76sMjPDLRA] 无效

那么我是走在正确的路线上还是有更好的路线可以指导我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:18:47.273

```
 IWorkspaceManager workspaceManager = SCMPlatform.getWorkspaceManager(repository);

IWorkspaceSearchCriteria wsSearchCriteria = WorkspaceSearchCriteria.FACTORY.newInstance();

wsSearchCriteria.setKind(IWorkspaceSearchCriteria.STREAMS);

wsSearchCriteria.setPartialOwnerNameIgnoreCase(projectAreaName);

List <IWorkspaceHandle> workspaceHandles = workspaceManager.findWorkspaces(wsSearchCriteria, Integer.MAX_VALUE, Application.getMonitor());　

IWorkspaceConnection workspaceConnection = workspaceManager.getWorkspaceConnection(workspaceHandles.get(0),Application.getMonitor()); 
```

# json - 这是使用 AngularJS 访问 json 属性的安全有效的方法吗？

> ID：15013139
> 
> 赞同：0
> 
> 时间：2013-02-21T22:05:44.077
> 
> 标签：json, security, angularjs

我从 AngularJS 开始，我想展示这段访问路由参数属性的代码。这样做是否安全/最佳实践？

```
angular.module('messagecat', []).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/messages', {templateUrl: '/bundles/acmestore/js/partials/messages-list.html',   controller: MessagesListCtrl}).
      when('/messages/:messageId', {templateUrl: '/bundles/acmestore/js/partials/message-detail.html', controller: MessageDetailCtrl}).
      otherwise({redirectTo: '/messages'});
}]);

/*controller*/

function MessagesListCtrl($scope, $http) {
  $http.get('/messages').success(function(data) {
    $scope.messages = data;
  });
}

/* Does this following bit seem reasonable to you?*/
function MessageDetailCtrl($scope, $routeParams, $http) {
  $http.get('/messages').success(function(data) {
    $scope.messages = data[$routeParams.messageId];
    //console.log($scope.messages);
  });
}

the json model: 

[
    {
        "id": 1,
        "iam": 1,
        "youare": 2,
        "lat": 50.8275853,
        "lng": 4.3809764,
        "msgbody": "Lorem ipsum lorem ipsum lorem ipsum"
    }
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T07:25:03.237

你不能相信你交付给客户的任何东西，因为用户都可以访问它们，毕竟，他们只需按 f12 即可调出相同的开发工具。最后，您必须专注于发送数据的 Web API。它必须是安全的（用户必须为每个操作进行身份验证和授权）并彻底验证发送给它的所有内容……换句话说，对 Web API 进行编码，就好像它可以从任何地方调用一样！

# google-maps - 尝试从精灵中缩放标记图像

> ID：15013142
> 
> 赞同：1
> 
> 时间：2013-02-21T22:05:55.013
> 
> 标签：google-maps, sprite, freemarker

```
var marker = new google.maps.Marker({
        position: new google.maps.LatLng(9.967937,-84.15062),
        draggable: true,
        //icon: marker0000,
        icon: new google.maps.MarkerImage("/static/img/map/markers/1/sprite3.png",    
        new google.maps.Size(40*scaleFactor, 24*scaleFactor), // desired size
        new google.maps.Point(41, offset*scaleFactor), // offset within the scaled sprite
        new google.maps.Point(20*scaleFactor, 12*scaleFactor), // anchor point is half of the desired size
        new google.maps.Size(123*scaleFactor, 52*scaleFactor)), // scaled size of the entire sprite
        map: map
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:10:24.003

有一个关于精灵缩放的未[解决问题报告 (#4359) 。](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4359)在 2012 年 8 月 19 日的初始报告之后，任何人都没有任何活动。如果这是您遇到的问题，您可能会“加注”该问题。

# java - 你如何动态地将intent.category.LAUNCHER 更改为intent.category.DEFAULT？

> ID：15013150
> 
> 赞同：3
> 
> 时间：2013-02-21T22:06:25.070
> 
> 标签：java, android

我需要创建一个对用户隐藏的应用程序。但在它被隐藏之前，我需要在 GUI 上设置一些配置，然后我必须从应用程序列表中隐藏图标。如果我删除

```
<category android:name="android.intent.category.LAUNCHER" /> 
```

该应用程序未显示在应用程序列表中。但我的配置 GUI 也没有显示。我需要显示一个活动，并在我进行配置后隐藏应用程序。我在这里搜索过，但我一直找不到解决方案。我怎样才能动态改变

`<category android:name="android.intent.category.LAUNCHER" />`
到
`<category android:name="android.intent.category.DEFAULT" />`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:30:21.263

您可以尝试使用两种活动，一种使用 android.intent.category.DEFAULT，另一种使用 android.intent.category.LAUNCHER，然后使用 PackageManager 的 setComponentEnabledSetting() 方法禁用启动器活动。根据文档，“为包组件（活动、接收器、服务、提供者）设置启用设置。此设置将覆盖组件在其清单中设置的任何启用状态。”

# php - php渲染html表格

> ID：15013152
> 
> 赞同：0
> 
> 时间：2013-02-21T22:06:27.650
> 
> 标签：php, html, mysql

我是 Web 开发 (php/html/sql) 的新手，所以我试图通过示例来学习。我决定编写一个简单的 php 脚本来读取 mysql 表并将其呈现为 HTML。这个 HTML 被回显到一个 jquery 函数，该函数将把 html 显示到一个 div 中。

这一切工作正常，如预期的那样。

现在我要做的是创建一个最多包含 20 行的表，如果 sql 查询返回 60 行，那么我需要在我的网站上查看 1 个 20 行的表和一个索引（1,2,3 ...）在该表下方，通过单击这些数字，我会看到额外的结果。

知道如何实现这一目标吗？任何教程？主意？

我正在考虑的解决方案如下：

在我的 php 脚本中，我检查 mysql 查询返回的行数，然后创建多个“20 行表”（因此，如果 mysql 返回 60 行，那么我将呈现 3 x 20rows 表）。然后我把这些表放到一个数组中，然后我回应这个。现在 jquery 将接收这个数组并只呈现 div 中的第一个表。

但是我的问题是我怎样才能拥有其余的数据？这样当有人点击表格下方的“2”时，他可以看到其余的结果？

啊！我希望我很清楚。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:11:03.757

只需将 LIMIT 0,20 添加到查询末尾，即可将 SQL 查询限制为仅返回 20 行。

您可以通过 php 生成 0 和 20 来实现分页，例如

```
$max_per_page = 20;
$page = 1;
$limit_start = ($page*$max_per_page)-$max_per_page;

$sql = "..... LIMIT {$limit_start},{$max_per_page}"; 
```

# mysql - MySQL Workbench - 正向工程 - 错误 1005：无法创建表（错误号：150）

> ID：15013153
> 
> 赞同：2
> 
> 时间：2013-02-21T22:06:36.200
> 
> 标签：mysql, mysql-workbench, mysql-error-1005, forward-engineer

我在 MacOSX 上使用 MySQL Workbench 5.2.45 我已经使用 EER 图功能设计了一个数据库，然后尝试进行正向工程以生成我的数据库以放在我的本地服务器上。我收到错误代码：**错误 1005：无法创建表（错误号：150）**

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

CREATE SCHEMA IF NOT EXISTS `Finance` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `Finance` ;

-- -----------------------------------------------------
-- Table `Finance`.`DatabaseUser`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `Finance`.`DatabaseUser` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT ,
  `FirstName` VARCHAR(255) NOT NULL ,
  `LastName` VARCHAR(255) NOT NULL ,
  `Tel` VARCHAR(255) NULL ,
  `Email` VARCHAR(255) NOT NULL,
  `Password` VARCHAR(255) NOT NULL ,
  `Admin` CHAR(1) NOT NULL DEFAULT 'N' ,
  `Project1` CHAR(1) NOT NULL DEFAULT 'N' ,
  `Project2` CHAR(1) NOT NULL DEFAULT 'N' ,
  `Project3` CHAR(1) NOT NULL DEFAULT 'N' ,
  PRIMARY KEY (`ID`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `Finance`.`Entities`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `Finance`.`Entities` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT ,
  `CreatorID` INT(11) NOT NULL ,
  `FullName` VARCHAR(255) NOT NULL ,
  `ShortName` VARCHAR(255) NULL ,
  PRIMARY KEY (`ID`) ,
  INDEX `Creator_idx` (`CreatorID` ASC) ,
  CONSTRAINT `CreatorEntities`
    FOREIGN KEY (`CreatorID` )
    REFERENCES `Finance`.`DatabaseUser` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `Finance`.`Grant`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `Finance`.`Grant` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT ,
  `CreatorID` INT(11) NOT NULL ,
  `DonorID` INT(11) NOT NULL ,
  `RecipientID` INT(11) NOT NULL ,
  `Name` VARCHAR(255) NOT NULL ,
  `Year` YEAR NOT NULL ,
  PRIMARY KEY (`ID`) ,
  INDEX `Creator_idx` (`CreatorID` ASC) ,
  INDEX `index3` (`DonorID` ASC, `RecipientID` ASC) ,
  CONSTRAINT `CreatorGrant`
    FOREIGN KEY (`CreatorID` )
    REFERENCES `Finance`.`DatabaseUser` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `InstrumentGrant`
    FOREIGN KEY (`DonorID` , `RecipientID` )
    REFERENCES `Finance`.`Entities` (`ID` , `ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

USE `Finance` ;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

我一直在尝试帖子中建议的解决方案（[错误代码：1005。无法创建表'...'（errno：150）](https://stackoverflow.com/questions/9018584/error-code-1005-cant-create-table-errno-150)）但这似乎不是问题。1\. 数据类型相同 2\. 我引用主键 3\. 外键名称是唯一的 4\. 表都是 InnoDB 5\. 不涉及 SET NULL 等。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:23:59.950

更改 Grant 表中的外键约束。

参考[http://www.sqlfiddle.com/#!2/04945](http://www.sqlfiddle.com/#!2/04945)

```
 CONSTRAINT `InstrumentGrant`
    FOREIGN KEY (`RecipientID`)
    REFERENCES `Entities` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `InstrumentGrant_2`
    FOREIGN KEY (`DonorID`)
    REFERENCES `Entities` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION 
```

根据需要命名约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T06:03:19.000

解决：

在导出菜单中，选择“生成单独的 CREATE INDEX 语句”选项以避免此错误。

# android - 如何让我的微调器有一个没有弹出窗口的下拉菜单？

> ID：15013159
> 
> 赞同：1
> 
> 时间：2013-02-21T22:07:01.203
> 
> 标签：android, layout, spinner

我希望我的微调器看起来像这样：http: [//i.stack.imgur.com/FJtx1.png](http://i.stack.imgur.com/FJtx1.png)

但相反，我的微调器看起来像这样 [http://i.stack.imgur.com/RcGBa.png](http://i.stack.imgur.com/RcGBa.png)

如何让它看起来像第一个？

这是代码。

```
public void additemsonSpinner1()
{
    spinner1=(Spinner)findViewById(R.id.spinner1);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
            R.array.pusharr, android.R.layout.simple_spinner_item);
    // Specify the layout to use when the list of choices appears
    adapter.setDropDownViewResource(android.R.layout.simple_expandable_list_item_1 );
    // Apply the adapter to the spinner
    spinner1.setAdapter(adapter);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:15:21.697

> 那么在较旧的固件（API 9 级）上是不可能的吗？

欢迎您尝试[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)，或者看看是否有其他 Holo 风格的 backport `Spinner`。

但是，请记住， Android 2.x 设备的*用户*可能没有意识到 Holo 样式`Spinner`是什么，因为他们在其他应用程序中看不到它们。我建议尽可能使用用户会识别的小部件。

# android - 让自定义视图确定自己的可见性

> ID：15013162
> 
> 赞同：1
> 
> 时间：2013-02-21T22:07:20.200
> 
> 标签：android, android-custom-view

我想创建一个`View`具有显示逻辑的自定义来确定其自身的可见性。为了保持该逻辑包含并易于重用，我创建了一个`View`子类，覆盖`getVisibility()`并计划使`View`可能导致其可见性改变的事件发生时无效......只是发现 a`View`的可见性只能是通过调用`setVisibility()`而不是覆盖来更改`getVisibility()`。请参阅 Romain Guy[对此问题](https://stackoverflow.com/questions/6796299/view-getvisibility-isshown-return-incorrect-visibility)的回答。

是否有一个特定的方法作为正常`View`生命周期/渲染过程的一部分被调用，这将是理想的覆盖，我会在其中调用`setVisibilty()`？由于我已经调用`invalidate()`，覆盖它调用`setVisibility()`工作。但那是理想的地方吗？似乎设置 a`View`的属性`invalidate()`会违反最佳实践。

**澄清：** Andr 指出有很多事情可能会导致 custom`View`的可见性发生变化，并且这些场景非常具体地用于自定义视图的使用。这是非常真实的。但这个问题不是关于如何*触发*外观刷新 -`invalidate()`似乎是告诉 Android View 的外观发生变化的标准方式，不是吗？相反，这是一个关于自定义失效后在*哪里*调用的最佳实践问题。我不想在流程的错误部分进行更改，例如。如果有人有链接，我很想看看Android的UI渲染过程图。`setVisibility()``View``onMeasure()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:02:37.537

没有这样一个通用的方法，仅仅是因为没有一种方法`View`可以涵盖所有可能需要重新计算其可见性的情况（想想异步事件会改变你的可见性，例如网络操作状态的改变；甚至是一个简单的计时器将关闭）。

作为开发人员，您知道在哪些情况下应该使可见性无效，并且您应该在这些点上相应地修改可见性。当然，可以始终在每次布局和绘图之前设置可见性，但是：

*   我怀疑它不会涵盖所有情况。
*   一两个月后理解起来可能会很奇怪。
*   这是一种矫枉过正 - 它是您正在处理的移动设备，您应该牢记其局限性并以效率为目标。

话虽如此，我真的不明白`invalidate()`在设置可见性后调用的意义——它是由平台自动完成的。我会简单地建议：

```
private void invalidateVisibility() {
    // calculate visibility
    setVisibility(calculation_outcome);
    //invalidate();
} 
```

并将呼叫更改`invalidate()`为`invalidateVisibility()`。`invalidate()`如果您出于某种原因确实需要拨打电话- 只需取消注释通话即可。这可能是最有效的解决方案。

**编辑：**

我的回答的重点是提出一些与您所描述的逻辑在撰写本文时似乎（至少对我而言）一样普遍的东西。我假设您在该`invalidate()`方法中正在进行一些关键处理，因此您需要调用它。但是，您的问题困扰了我一段时间，在阅读了 4 或 5 次之后，我想我终于意识到您到底在问什么！:)

如果我对您的理解正确，那么每次您的可见性可能发生变化时，您就*已经在*打电话了。*因此，*为了简单起见，您希望将视图可见性的修改合并到失效过程中。`invalidate()``View`

 *如果是这种情况，那么您是对的 - 作为第一件事，这样做`invalidate()`是完全可以的。这就是为什么我将电话完全按照以下顺序排列`invalidateVisibility()`：

*   当 a`View`变得可见时，它的父级会收到有关需要重新绘制的通知，然后调用`invalidate()`应该简单地“与前一个组合”（这是因为所有待处理的绘制操作都在一批中处理）。
*   当 a`View`变得不可见时，它会自动向自己发出无效信号。另一个调用`invalidate()`将只是一个无操作。

然后是直觉——这个：

```
button.setVisible(false/true);
button.invalidate(); 
```

似乎不是可疑代码。实际上，这就是您的`invalidate()`意愿。但是，请验证可见性的计算是一个快速操作，因为`invalidate()`可能会被 Android 平台每秒调用多次*。*这主要是在 UI 动画时的情况 - 例如在捏合手势期间更新视图的边界。

希望以任何方式有所帮助:)*

# android - 使用布局文件调整文本视图之间的图像大小

> ID：15013169
> 
> 赞同：0
> 
> 时间：2013-02-21T22:07:47.213
> 
> 标签：android, android-layout

我想要一个这样的布局

```
 [text]
___________________
[                 ]
[     image       ]
[                 ]
[_________________]
      [text] 
```

图像对于某些屏幕尺寸来说太大了，所以我希望图像使用仍然适合的最大尺寸。基本上是这样的：

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="8dp"
        android:text="@string/titel" />

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/bigimage" />

    <TextView
        android:id="@+id/subtitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="8dp"
        android:text="@string/subtitle" />
</LinearLayout> 
```

但是图像总是将字幕文本推到屏幕之外。我还尝试了一个 RelativLayout，图像居中，文本带有 layout_above 和 layout_below，但这也不起作用。我在片段中使用此布局，但这无关紧要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:53:11.280

离开你展示的“布局”，这可以用 a 来完成`LinearLayout`，你只需要使用`layout_weight`.

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="8dp"
        android:text="@string/titel" />

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:scaleType="fitCenter"
        android:src="@drawable/bigimage" />

    <TextView
        android:id="@+id/subtitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="8dp"
        android:text="@string/subtitle" />
</LinearLayout> 
```

这也可以使用 a 来完成`RelativeLayout`，但`TextView`s 需要是锚点，而不是`ImageView`，这就是图像将您的文本推离屏幕底部的原因。

```
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:padding="8dp"
        android:text="@string/titel" />

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/subtitle"
        android:layout_below="@+id/title"
        android:adjustViewBounds="true"
        android:scaleType="fitCenter"
        android:src="@drawable/bigimage" />

    <TextView
        android:id="@+id/subtitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:padding="8dp"
        android:text="@string/subtitle" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:24:13.887

也许尝试同时设置`TextView`width `android:layout_width="fill_parent"`。

# javascript - 为 javascript 计算器创建清晰的按钮代码

> ID：15013170
> 
> 赞同：0
> 
> 时间：2013-02-21T22:07:49.643
> 
> 标签：javascript, html, calculator

我有一个任务，我必须使用 java 脚本和 HTML 创建一个计算器。我已经编写了足够多的代码，当我使用运算符时，它会进行数学运算，但数字不会显示在显示框中。我也不确定如何编写清除按钮和否定按钮。这是外部 javascript 文件。

```
 var mycalc = new calc(null,null,null);
    function calc(firstNum,secNum,operator)
    {
this.firstNum = firstNum;
this.secNum = secNum;
this.operator = operator;
}
function numberClick(ref)
{
//alert.ref.value
if(mycalc.firstNum == null)
    mycalc.firstNum = ref.value
else if (mycalc.secNum == null)
    mycalc.secNum = ref.value //ref.value is the value from the input
//alert("firstNum" + mycalc.operator.firstNum);
//alert("secNum") + mycalc.secNum);
}
function operatorClick(ref)
{
if (mycalc.operator == null)
    mycalc.operator = ref.value;
}
function calculateResultClick()
{
if (mycalc.operator == "+")
{
    var ans = parseInt(mycalc.firstNum) + parseInt(mycalc.secNum);
    alert(ans);
}   
if (mycalc.operator == "-")
{
    var ans2 = parseInt(mycalc.firstNum) - parseInt(mycalc.secNum);
    alert(ans2);
}   
if (mycalc.operator == "*")
{   
    var ans3 = parseInt(mycalc.firstNum) * parseInt(mycalc.secNum);
    alert(ans3)
}
if (mycalc.operator == "/")
{
    var ans4 = parseInt(mycalc.firstNum) / parseInt(mycalc.secNum);
    alert(ans4)
}
    }
     function Clear()
    {

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:17:03.707

Negate:

```
if(parseInt(mycalc.firstNum)>0){
    answer=(mycalc.firstNum-mycalc.firstNum*2)
}
if(parseInt(mycalc.firstNum)<0){
    answer=(mycalc.firstNum+mycalc.firstNum*2)
} 
```

Clear

```
mycalc.firstNum=0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T17:34:12.463

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script language="javascript" type="text/javascript">

        function Add() {
            var x, y, txtResult;
            x = document.getElementById('txtFirst').value;
            y = document.getElementById('txtSecond').value;
            if (x == " " || y == "") {
                alert("Please enter FirstValue and SecondValue");
            }
           else{
            var txtResult = +x + +y;
            document.getElementById('txtResult').innerHTML = "Result: " + txtResult;
            }
        }

        function Sub() {
            var x, y, txtResult;
            x = document.getElementById('txtFirst').value;
            y = document.getElementById('txtSecond').value;
            if (x == " " || y == "") {
                alert("Please enter FirstValue and SecondValue");
            } else {
                var txtResult = +x - +y;
                document.getElementById('txtResult').innerHTML = "Result: " + txtResult;
            }
        }
        function Mul() {
            var x, y, txtResult;
            x = document.getElementById('txtFirst').value;
            y = document.getElementById('txtSecond').value;
            if (x == " " || y == "") {
                alert("Please enter FirstValue and SecondValue");
            } else {
                var txtResult = +x * +y;
                document.getElementById('txtResult').innerHTML = "Result: " + txtResult;
            }
        }

        function Div() {
            var x, y, txtResult;
            x = document.getElementById('txtFirst').value;
            y = document.getElementById('txtSecond').value;
             if (x == " " || y == "") {
                alert("Please enter FirstValue and SecondValue");
                 } 
            else if (y != 0) {
                var txtResult = +x / +y;
                  } 
            else {
                alert("Second Number Should not be Zero");
                    }
            document.getElementById('txtResult').innerHTML = "Result: " + txtResult;
          }

        function Clear() {
            document.getElementById('txtFirst').value = "";
            document.getElementById('txtSecond').value = "";
            document.getElementById('txtResult').value = "";

        }

    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <label> FirstNumber :</label><br />
        <input id="txtFirst" type="text" /><br />
        <label> Second Number :</label><br />
        <input id="txtSecond" type="text" /><br />
        <label id="txtResult"></label><br />
        <input id="btnAdd" type="button" value="ADD" onclick="Add()"/>
        <input id="btnSub" type="button" value="SUB"  onclick="Sub()"/><br />
        <input id="btnMul" type="button" value="MUL" onclick="Mul()"/>
        <input id="btnDiv" type="button" value="DIV" onclick="Div()"/>
       <input id="btnClear" type="button" value="Clear" onclick="Clear()"/>

    </div>
    </form>
</body>
</html> 
```

![在此处输入图像描述](../Images/09a5873858b2763d41865ffb4cf81ce8.png)

# design-patterns - 跟踪用户代币/硬币的策略

> ID：15013173
> 
> 赞同：2
> 
> 时间：2013-02-21T22:08:05.807
> 
> 标签：design-patterns, database-design, subscription, subscriptions

我正在开发一个网络应用程序，用户每月购买代币/代币 - 这意味着代币在月底到期（例如，3 美元将在一个月内为您提供 5 个代币）。在存储和跟踪每个用户令牌时要采取什么策略，我有点困惑。

在一个两部分的问题中：

1) 由于用户通常可以在一个月的任何阶段购买代币，因此月份是否定义为“30”天，或者它们是否映射到日历月的天数？（例如：如果代币在 3 月购买，它们会持续 31 天，但如果在 5 月购买，它们会持续 30 天吗？）

2) 问题的第二部分是如何跟踪这些令牌？如果用户支付一年的订阅费用（每月 5 个代币，持续 12 个月），但也被允许在一年中购买更多代币（6 月用户想要 10 个代币），我如何才能真正跟踪有多少每个月都购买了代币？

我有一些实现想法，但没有一个看起来是“正确的”。希望有人可能已经解决了类似的问题，或者可以向我指出任何相关的文献。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:13:04.560

> 由于用户通常可以在一个月的任何阶段购买代币，因此月份是否定义为“30”天，或者它们是否映射到日历月的天数？（例如：如果代币在 3 月购买，它们会持续 31 天，但如果在 5 月购买，它们会持续 30 天吗？）

**总是 1 个完整月。**

为什么？因为你对你的用户很好；）

由于日期方法的简单性，我会选择整月。并且更容易跟踪成员。对于喜欢在 2 月底购买最多代币的人来说，31 天是一个更好的选择。例如，1 月 31 日的购买将在 3 月 3 日到期，而不是 2 月 28 日。

当然，您可以自己决定，但这是最合理的选择，也可以确保您减少与客户的麻烦。

> 问题的第二部分是如何跟踪这些令牌？如果用户支付一年的订阅费用（每月 5 个代币，持续 12 个月），但也被允许在一年中购买更多代币（6 月用户想要 10 个代币），我如何才能真正跟踪有多少每个月都购买了代币？

**为每个代币购买创建一个表格，其中包含购买时间和日期以及代币数量。**

```
TokenPurchaseNumber | UserId | TokenCount | PurchaseDateTime| ExpireDateTime
---------------------------------------------------------------------
10001               | 1      | 200        | Jan 20          | Feb 20
10002               | 1      | 100        | Jan 24          | Feb 24
10002               | 2      | 300        | Jan 24          | Feb 24
10003               | 1      | 20         | Jan 25          | Feb 25
10004               | 1      | 40         | Jan 29          | Feb 29 
```

这样，您就可以使用唯一的购买编号对所有购买进行良好存档，并且可以为用户生成购买历史记录。

您可以考虑不使用该`ExpireDateTime`列，因为您只需将购买代币的日期 + 31 天与今天进行比较。

**现在，如何计算用户拥有的代币总数似乎是下一个问题。**

两个选项，第一个将有更好的购买历史和存档。

**选项1：**

这相当容易，每次用户购买代币时，您都会在上表中创建一行，并将其加到他自己的用户表列中保存的总金额中`tokens`。

每次用户登录（或您想要的任何其他选择的时间）时，您都可以检查他们的总令牌，例如 165。

现在是 2 月 21 日，所以您可以查看他在 1 月 21 日之后购买的所有代币。我们把它们加起来，我们看到用户只能拥有 100+20+40=160 的可能数量的有效令牌。所以我们删除了他的 5 个代币并向他发送了一条消息，他在 1 月 20 日购买的 #10001 中的 5 个代币已过期。

**第二种选择：**

当用户使用它们时，只需从最旧的购买中删除代币。当到期日期到期时，删除整个购买行，有效地删除该购买的剩余令牌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T22:12:39.463

1）这取决于你。我认为持有代币持续 30 天或正好 1 个月之间没有太大区别，但在我看来，持续 30 天更好——我宁愿知道无论何时我购买的 5 美元都值得做他们。无论您做出什么决定，请确保清楚地向用户说明。

2) 由于每组令牌可以有不同的“到期”日期，因此您必须将它们分别存储在后端数据库中。当用户使用令牌时，减少剩余令牌的数量，直到它达到零。

```
TokenGroupId | UserId | TotalTokens | RemainingTokens | Active | Expires
------------------------------------------------------------------------
6789         | 1234   | 5           | 2               | Mar 1  | Mar 31
6790         | 1235   | 5           | 5               | Mar 13 | Apr 12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:20:08.377

我不得不实施一次这样的系统。我使用以下想法解决了。

您实际上不想在数据库中存储用户的代币总数，而是存储每个购买操作以及购买的代币数量。

数据库结构如下所示：

```
- purchase_id
- user_id
- dollar_amount
- purchase_date
- expiration_date
- purchased_tokens
- remaining_tokens 
```

这里重要的一点是您存储购买的令牌的到期日期，例如，如果某些令牌可能具有更重要的持续时间，例如促销操作。

还存储了已购买代币的总数以及剩余代币的数量。由于我们不存储用户拥有的令牌总数，因此我们需要跟踪实际花费了哪些令牌，因此我们可以通过将`remaining_tokens`未过期的令牌相加来计算总数。

要选择要花费的代币，这个想法基本上是始终花费购买的最旧的代币，并在获得 0 个剩余代币时从下一次购买中取出它们。

# scala - 序列化多部分表单请求以在 Play 2.1 上进行测试

> ID：15013177
> 
> 赞同：2
> 
> 时间：2013-02-21T22:08:27.993
> 
> 标签：scala, playframework-2.0, multipartform-data

我正在使用 play2.1 为使用路由功能的多部分表单的后控制器编写测试。

```
route(
  FakeRequest(POST,
    postControllerRoute().url,
    FakeHeaders(Seq(HeaderNames.CONTENT_TYPE -> Seq("multipart/form-data"))),
    body = body
  ).withAuthToken.withAdmin(adminId)) 
```

我发现要使这段代码正常工作，我需要定义这种类型的 Writeable [MultipartFormData[TemporaryFile]]，因为我的主体变量是 MultipartFormData[TemporaryFile] 类型。我不确定如何序列化多部分请求，或者这是否是正确的方法。有什么建议么？

*已编辑*

答：跳过路由器并直接使用控制器，如文档中所示：[http ://www.playframework.com/documentation/2.1.0/ScalaFunctionalTest](http://www.playframework.com/documentation/2.1.0/ScalaFunctionalTest)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:53:51.110

*   你有两个选择，序列化`MultiPartFormData`（据我所知）非常棘手。这篇文章可能会有所帮助：[https ://groups.google.com/forum/?fromgroups=#!topic/play-framework/MPtQlX-cWMQ](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/MPtQlX-cWMQ)
*   您可以跳过该`route`方法。如果你想`Action`在你的控制器中测试，你可以简单地绕过路由。请参阅文档中的[测试控制器](http://www.playframework.com/documentation/2.1.0/ScalaFunctionalTest)。如果您不通过路由器，则无需提供`Writable`. 很少需要通过路由器，它基本上让您首先将其写入字节（使用`Writer`），然后（使用正文解析器）将其转换回 Play 可以理解的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T02:50:32.463

如果不想跳过路由，则需要一个 Writeable[AnyContentAsMultipartFormData]，它将 MultipartFormData[TemporaryFile] 变成 Array[Byte]。

这里有一个 Writeable[AnyContentAsMultipartFormData]：http: [//tech.fongmun.com/post/125479939452/test-multipartformdata-in-play](http://tech.fongmun.com/post/125479939452/test-multipartformdata-in-play)

# java - JSP 模板的任何类型安全替代方案

> ID：15013180
> 
> 赞同：6
> 
> 时间：2013-02-21T22:08:40.780
> 
> 标签：java, jsp

有什么比 JSP 更安全的吗？我没有通过谷歌找到任何有意义的答案。我们目前使用 Spring MVC 框架和 JSP 来呈现 HTML。我开始讨厌 JSP 呈现的动态特性，因为您引用了类似的模型，`${model.someAttribute}`但无法判断该属性是否在给定模块中可用或指定模板期望的模型类型。重构模型的 getter 变得非常困难，因为 Eclipse 不知道哪些模板使用该模型，也无法将 getter 与模板中的属性访问器相关联。

是否有一种模板技术，它既比通过命令式代码吐出 HTML 代码更丑，又比 JSP 更安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:13:06.600

您可以使用类型提示，例如 jsp:useBean 和 JSP 标记文件的属性声明中的[type 属性](http://www.velocityreviews.com/forums/t134072-jsp-jsp-usebean-tag-difference-between-class-and-type.html)（可能在其他地方，如 JSTL 标记）。然后，IntelliJ 将为您完成所有基于静态类型的良好工作（准确的代码完成建议、重构、查找用法、显示快速 javadoc 等）。

[我最近刚刚在JSP 标记文件](http://odoepner.wordpress.com/2013/04/18/jsp-tag-files-for-simple-typesafe-markup-reuse/)的上下文中写过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:13:31.953

[Lift](http://liftweb.net/)（基于[Scala](http://www.scala-lang.org/)）提供了一个非常好的模型，将 HTML 布局与实际应用程序代码（称为片段）很好地分离。虽然进入壁垒一开始可能看起来很高，但从长远来看，收益确实很大。一大优点是它在 JVM 上运行，因此您可以重用大部分 Java 库和其他代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:26:31.507

我相信[JXT](http://code.google.com/p/owasp-jxt/wiki/JXTCheatSheet)的目标包括 XSS 安全和类型模型安全，并且它被设计为易于从 JSP 过渡到。

他们的[管道](http://code.google.com/p/owasp-jxt/wiki/JXTPipeline)描述解释说，他们的表达式更接近于 Java 表达式，因此如果您的表达式类型不匹配，您将获得 Java 式类型错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-18T06:12:40.247

我认为[Rocker](https://github.com/fizzed/rocker)正是您一直在寻找的。它是编译的、类型安全的和快速的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-20T16:33:50.487

免责声明：我是[Hepek](https://sake92.github.io/hepek/)的作者。目前，它仅支持 Play 框架。

Scalatags 通过构造为您提供安全的 HTML。最重要的是，Hepek 有非常好的 API 用于构建表单、网格、代码突出显示等。基本上，它只是 Scala，没有模板解析，不用担心变量是否存在.. :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-18T13:49:17.733

实际上并没有使用它，但 Twirl ( [https://www.playframework.com/documentation/2.5.x/JavaTemplates](https://www.playframework.com/documentation/2.5.x/JavaTemplates) ) 称自己为“基于 Scala 的类型安全模板引擎”（显然可以在 Play for Java 中使用） .

引用：

Twirl 是一个基于 Scala Play 的类型安全模板引擎，它是一个强大的基于 Scala 的模板引擎，其设计灵感来自 ASP.NET Razor。具体是：

紧凑、富有表现力和流畅：它最大限度地减少了文件中所需的字符和击键数量，并实现了快速、流畅的编码工作流程。与大多数模板语法不同，您无需中断编码即可在 HTML 中明确表示服务器块。解析器足够聪明，可以从您的代码中推断出这一点。这实现了一个非常紧凑和富有表现力的语法，它干净、快速且打字有趣。

易于学习：它可以让您以最少的概念快速提高工作效率。您使用简单的 Scala 结构和所有现有的 HTML 技能。

不是一种新语言：我们有意识地选择不创造一种新语言。相反，我们希望让 Scala 开发人员能够使用他们现有的 Scala 语言技能，并提供模板标记语法，以实现出色的 HTML 构建工作流程。

可在任何文本编辑器中编辑：它不需要特定的工具，使您能够在任何普通的旧文本编辑器中高效工作。

# ruby-on-rails - heroku生产中的bootstrap-sass边界半径错误

> ID：15013181
> 
> 赞同：-1
> 
> 时间：2013-02-21T22:08:41.453
> 
> 标签：ruby-on-rails, ruby, heroku, twitter-bootstrap, sass

将我的应用程序部署到 heroku 时，出现以下错误：

```
2013-02-21T21:57:52+00:00 app[web.1]: ActionView::Template::Error (Invalid CSS a
fter "          .border-radius": expected "{", was "();" 
```

[自从发现此错误](https://github.com/thomas-mcdonald/bootstrap-sass/pull/40)后，我更新了 bootstrap-sass ，但这并不能解决问题。我在用着：

```
gem 'rails', '3.2.11'
gem 'sass-rails'
gem 'bootstrap-sass', '~> 2.3.0.0'
gem 'bootstrap-colorpicker-rails' 
```

我在这里真的很茫然。

*似乎 bootstrap-colorpicker-rails 0.2 导致了这个，所以我恢复到 0.1 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:55:01.517

确保你的`.border-radius`班级周围有括号。不是括号（）。

```
.border-radius {
    Your CSS
} 
```

# ruby-on-rails - 在 rails/rspec 中没有控制器的路由出现“无路由匹配”错误

> ID：15013186
> 
> 赞同：1
> 
> 时间：2013-02-21T22:09:08.503
> 
> 标签：ruby-on-rails, rspec, rspec-rails

环境：Rails 3.2.12，rspec 2.12

我正在尝试使用非常简单的路由测试来引导应用程序。测试失败了，我看不出有什么问题。

这是失败的测试：

```
# spec/routing/meow_route_spec.rb
require 'spec_helper'
describe "meow routes" do
  it "routes post /meows to meows#create" do
    expect(:post => "/meows").to route_to(
      :controller => "meows",
      :action => "create",
    )
  end
end 
```

还有我的路线：

```
# config/routes.rb
Meowserver::Application.routes.draw do
  resources :meows
end 
```

`rake routes`告诉我：

```
polk:meowserver dpassage$ rake routes
    meows GET    /meows(.:format)          meows#index
          POST   /meows(.:format)          meows#create
 new_meow GET    /meows/new(.:format)      meows#new
edit_meow GET    /meows/:id/edit(.:format) meows#edit
     meow GET    /meows/:id(.:format)      meows#show
          PUT    /meows/:id(.:format)      meows#update
          DELETE /meows/:id(.:format)      meows#destroy 
```

但是当我运行 rspec 时，我得到了这个错误：

```
1) meow routes routes post /meows to meows#create
  Failure/Error: expect(:post => "/meows").to route_to(
    No route matches "/meows"
  # ./spec/routing/meow_route_spec.rb:4:in `block (2 levels) in <top (required)>' 
```

这到底是怎么回事？到目前为止，这些确实是我的应用程序中唯一重要的文件——甚至没有任何控制器或模型，只是试图从外向内构建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:18:19.907

Well, it turns out that adding in the controller resolves the issue. I added this:

```
# app/controllers/meows_controller.rb
class MeowsController < ApplicationController
end 
```

...and now the test passes. Very frustrating error message!

# r - 想知道在使用 qqnorm 时如何对异常值进行编号？

> ID：15013187
> 
> 赞同：4
> 
> 时间：2013-02-21T21:27:19.437
> 
> 标签：r

在 R 中，我想知道如何`qqnorm`对其异常值进行编号（我在下面用红色圈出了这些值）。

这是一个例子。我做一个线性回归：

```
lm1 <- lm (y ~ x) 
```

然后我绘制模型：

```
plot(lm1) 
```

这产生了一个非常漂亮的 QQ 图。你可以看到它对异常值进行了编号（我用红色圈出了它）。

![在此处输入图像描述](../Images/4f77a5e67a21a94dbf05f6f9771ff8db.png)

但是，如果我自己做qqnorm，异常值是没有编号的。我如何对这些异常值进行编号，就像在上图中一样？

```
qqnorm(y)
qqline(y) 
```

![在此处输入图像描述](../Images/733d7eaecf3ed508c990c7dd81f001b8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-04T18:22:07.820

另一种非常简单的方法如下：

```
QQ_y=qqnorm(y)
identify(QQ_y) 
```

代码将在这里暂停。将鼠标悬停在您的绘图上，单击假定的异常值或其他兴趣点，然后控制单击或退出以继续代码。

```
qqline(y) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T22:44:59.840

学习看代码：

```
 plot.lm
 # snipping the rather long output top and bottom and showing hte relevant section
 if (show[2L]) {
    ylim <- range(rs, na.rm = TRUE)
    ylim[2L] <- ylim[2L] + diff(ylim) * 0.075
    dev.hold()
    qq <- qqnorm(rs, main = main, ylab = ylab23, ylim = ylim, 
        ...)
    if (qqline) 
        qqline(rs, lty = 3, col = "gray50")
    if (one.fig) 
        title(sub = sub.caption, ...)
    mtext(getCaption(2), 3, 0.25, cex = cex.caption)
    if (id.n > 0) 
        text.id(qq$x[show.rs], qq$y[show.rs], show.rs)
    dev.flush() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T16:24:47.247

根据@DWin 的回答，如果我添加以下行：

```
text(qq$x[44]-0.2, qq$y[44], 44) 
```

然后它在图中添加了一个数字：

![在此处输入图像描述](../Images/6a07878af01dc42c31465ac1ec346bde.png)

要正确执行此操作，您必须编写代码：

*   将 qqnorm 返回的 x,y 值排序（确保将每对 x,y 值放在一起）。
*   用它们的索引号标记前三个和后三个。

由于我仅使用 QQ 图进行探索性数据分析，因此 Roman Luštrik 的以下回答要容易得多：

```
plot(lm1, which = 2) 
```

# java - 将字符串添加到另一个类中的数组列表

> ID：15013190
> 
> 赞同：0
> 
> 时间：2013-02-21T22:09:29.147
> 
> 标签：java, arrays, string, class, arraylist

我在将“行”类中的字符串添加到“表”类时遇到了一些麻烦。因此，每次我创建一个名为 row 的类时，它都会将提交的字符串添加到“Table”类的同一个实例中。这是我的行类：

```
public class Row extends ArrayList<Table>{
public ArrayList<String> applicant;
public String row;
/**
 * Constructor for objects of class Row
 */
public Row()
{
    applicant = new ArrayList<String>();
    convertToString();
    applicants(row) //<------ This is the arrayList in the Table class that i wish to           add the row to
}

private void convertToString()
{
    for(int i = 0; i<applicant.size(); i++)
        {
            row = applicant.toString();
        }
}
} 
```

这是我的“行”课：

```
public class Table {

    public ArrayList<String> applicants;

    public String appArray[];

    /**
     * Constructor for objects of class Table
     */
    public Table() {
        applicants = new ArrayList<String>();
    }

    public void addApplicant(String app) {
        applicants.add(app);
        toArray();
    }

    public void toArray() {
        int x = applicants.size();
        appArray = applicants.toArray(new String[x]);
    }

    public void list() // Lists the arrayList
    {
        for(int i = 0; i < applicants.size(); i++) {
            System.out.println(applicants.get(i));
        }
    }

    public void listArray() // Lists the Array[]
    {
        for(int i = 0; i < appArray.length; i++) {
            System.out.println(appArray[i]);
        }
    }
} 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:14:39.403

申请人（行）不是行/表类中的方法。

如果您希望将行添加到 Row 类中的 Arraylist，请使用 add 方法

申请人.add(row) 方法。

您还应该注意，Table 和 Row 关系不需要您创建扩展 Table 类的 Row 类。它应该是两个独立的类。因此 Table 和 Row 类将具有一对多的关系。因此修改 Table 类，使其能够添加 Row 类的多个实例。

我不知道您要做什么，但可以说您的 Row 类应该包含两件事，即 rowID 和申请人名称。还有一个表类，它有很多行代表每个申请人。

所以 Row 类看起来像这样：

```
public class Row extends ArrayList<Table>{
String applicantName;
int applicantID;

/**
 * Constructor for objects of class Row
 */
public Row(int appID, String appName)
{
applicantName = appName;
applicantID = appID;

}

public getApplicantName(){
return applicantName;
}

public getApplicantID(){
return applicantID; 
}

} 
```

表类将如下所示：

```
public class Table {

    public ArrayList<Row> applicants;

    public String appArray[];

    /**
     * Constructor for objects of class Table
     */
    public Table() {
    applicants = new ArrayList<String>();
    }

    public void addApplicant(Row app) {
    applicants.add(app);

    }

    public void list() // Lists the arrayList
    {
    for(int i = 0; i < applicants.size(); i++) {
        Row row = (Row) applicants.get(i);  
        System.out.println("Applicant ID: "+ row.getApplicantID() +
        "  Applicant Name: " + row.getApplicantName());
    }
    }

} 
```

所以以下列方式使用上述类：

```
Row r1 = new Row(1, "Tom");
Row r2 = new Row(2, "Hoggie");
Row r3 = new Row(3, "Julie"); 
```

表表 = 新表（）；

```
table.addApplicant(r1);
table.addApplicant(r2);
table.addApplicant(r3); 
```

//所以现在当你调用下面的方法列表时，它会打印所有的申请者//他们的ID

```
table.list(); 
```

# android - 两种语言的应用程序

> ID：15013193
> 
> 赞同：0
> 
> 时间：2013-02-21T22:09:58.220
> 
> 标签：android, localization, internationalization

我想用两种语言提出申请。当应用程序启动时，将有两个按钮：第一个按钮用于语言 X，第二个按钮用于英语。当我单击其中一个语言按钮时，应用程序应该以相应的语言启动。但我不知道该怎么做。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:41:39.777

更改应用程序的语言环境可以按如下方式完成：

```
private void setLocale(Locale locale) {
    Locale.setDefault(locale);
    Resources res = getContext().getResources();
    DisplayMetrics dm = res.getDisplayMetrics();
    android.content.res.Configuration conf = res.getConfiguration();
    conf.locale = locale;
    res.updateConfiguration(conf, dm);
} 
```

最重要的是，您当然需要`strings.xml`至少提供本地化。

但是，如果没有更多细节，我会质疑您为什么要这样做。用户应从 Android 的设置中选择语言，并且您的应用应遵循设备的语言。这会自动发生 - 系统将选择您提供的符合语言条件的资源。

我不会尝试在此处发布有关如何提供本地化资源的指南。有关详细信息，请参阅[Android 文档](http://developer.android.com/guide/topics/resources/localization.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:24:54.377

当您单击其中一个按钮时，您可以`new Locale('languageCode')`在该按钮的`setOnClickListener()`

然后重新初始化将在正确的语言环境中重新呈现的文本元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:45:01.127

如果您想使用不同的语言，您最好尝试为您想要的每种语言使用不同的字符串。例如：

```
values/strings.xml
values/strings-de.xml
values/strings-sk.xml
values/strings-pl.xml 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T22:28:25.003

这是我的方法，对我来说很容易做到。

使用语言作为限定符创建一组资源（可绘制对象、字符串、布局、菜单等）。

当您的主要活动以两个按钮开始时，在您的按钮的单击侦听器的回调方法中操作那里的语言环境时，我认为系统将根据您的语言限定符确定要使用的资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T22:32:57.890

本地化始终是可能的，但同样的概念适用于 Android/智能手机，就像它们在计算机上一样。如果电话本身设置为以某种语言显示，那么您的应用程序也应该以该语言显示。作为开发人员，您的工作是确保您的解决方案和编程符合 Unicode，并处理您可能期望的某些语言特有的适当字符。

# spring - Spring 控制器和实体管理器

> ID：15013196
> 
> 赞同：1
> 
> 时间：2013-02-21T22:10:15.847
> 
> 标签：spring, hibernate, spring-mvc, controllers, spring-data-jpa

我创建了一个带有许多控制器的 spring 模板项目。在我的控制器中，我将连接到我的 DAO 对象，并且我的 DAO 将从我的本地数据库中保存/更新/获取休眠对象。

做这个的最好方法是什么？它应该在同一个项目上实现，还是应该有一个项目供我的控制器和另一个代表我的数据库访问？

在此之后，我将开发一个安卓应用程序来调用我的控制器并对数据库进行操作。

你能帮我这个架构吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:31:20.820

人们当然可以争论任何一种选择（将它们放在同一个项目或不同的项目中）。在我的项目中，我倾向于采取务实的方法。如果您的项目足够小，则可能不值得将它们放入单独的项目模块中；在这种情况下，只需将它们在包级别分开就足够了。但是，随着项目规模的扩大，根据职责和依赖关系分离组件会很有用。

但是，我建议您避免直接在控制器中使用 DAO。这不一定是不好的做法，但您会发现您的控制器很快就会被业务逻辑（类型转换、数据操作等）淹没，而这些业务逻辑在其他地方处理得更好。这到底在哪里？好吧，您可以构建一个服务层来弥合您的 DAO 和您的控制器之间的差距。这样，您的服务层可以处理数据操作和其他业务逻辑，而您的控制器只需担心从服务层获取和提供数据。希望这可以帮助。

# c - 分散错误，派生数据类型的块

> ID：15013197
> 
> 赞同：1
> 
> 时间：2013-02-21T22:10:16.120
> 
> 标签：c, parallel-processing, mpi

我是并行编程的初学者，所以我需要一些帮助。我将 6*6 的 2D 矩阵相乘，处理器的数量为 4。我将它划分为 4 个 9 个元素的块，然后我使用派生数据类型并使用 MPI_TYPE_VECTOR 定义了一个新的数据类型。然后尝试将每个块分散到一个处理器。但它不起作用。我可以通过点对点发送和接收来做到这一点，但我想通过使用 MPI_SCATTER 来做到这一点。有人可以帮我吗。

这是我的代码的一部分：

```
q = (int) sqrt((double) p); // p is number of processors
MPI_Datatype my_block,tmpType;

MPI_Type_vector(n / q, n / q, n, MPI_DOUBLE, &my_block);// n is size of matrics
MPI_Type_commit(&my_block);
MPI_Type_create_resized( my_block, 0, ((n*n)/ p) * sizeof(double), &tmpType ); 
MPI_Type_commit(&tmpType);

MPI_Scatter( Matrix_B, 1, tmpType, &b ,1, tmpType,0, grid_comm );

for (int i=0; i< n*0.5 ;i++){
    for (int j=0; j< n*0.5;j++){
        printf("Processor %d :  %lf ,",my_grid_rank,*(b+(n/q )*i+j));
    }
    printf("\n");
} 
```

# rally - 集会 sdk2 纸板限制列显示

> ID：15013198
> 
> 赞同：1
> 
> 时间：2013-02-21T22:10:25.893
> 
> 标签：rally

我想限制一些用户在看板中看到的内容。所以开发人员接受了，BA 作为 ToDo 并发布。我试过这个

```
 Ext.define('CustomApp', {
            extend: 'Rally.app.App',

            launch: function() {
                var cardBoardConfig = {
                    xtype: 'KanbanCardBoard',
                    cardConfig: { xtype: 'KanBanCard'},
                    types: ['User Story', 'Defect'],
                    attribute: "KanbanState",
                    storeConfig:{
                        filters: [{
                            property: 'KanbanState',
                            operator: '<',
                            value: 'Released'
                        }],
                    },
                    listeners: {
                        columnsretrieved: this._columnsretrieved,
                    }
                };

                this.add(cardBoardConfig);
            },
            _columnsretrieved: function(firstObj, retrievedColumns) { retrievedColumns = retrievedColumns.slice(2,8);} //remove first 2 and last one
        }); 
```

然后这个

```
 Ext.define('Rally.ui.cardboard.KanbanCardBoard', {
            extend: 'Rally.ui.cardboard.CardBoard',
            alias: 'widget.KanbanCardBoard',
            _renderColumns: function() {
                    this.columnDefinitions.slice(2, 8); //remove first 2 and last one

                    if (this.columnDefinitions.length) {
                        this.add(this.columnDefinitions);
                        this.columnDefinitions[0].addCls("firstColumn");
                        this.columnDefinitions[this.columnDefinitions.length - 1].addCls("lastColumn");
                        this.showMask(this.maskMsg || 'Loading...');
                    }
            }
        }); 
```

但我不能限制正在显示的列。即使我将它们切掉，所有的列仍然显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:43:13.927

该板还采用[列配置](http://developer.help.rallydev.com/apps/2.0p5/doc/#!/api/Rally.ui.cardboard.CardBoard-cfg-columns)，允许您指定要显示的确切列。默认情况下，如果没有指定列，它将只为指定属性的每个值显示一列。

# php - php表单发布没有单选按钮的响应

> ID：15013201
> 
> 赞同：0
> 
> 时间：2013-02-21T22:10:33.857
> 
> 标签：php, mysql, forms

不知道为什么 book.php 中没有响应，使用 flight.php 中的 post 方法和表单： 这里是 flight.php：

```
<?php
$host="127.0.0.1"; 
$username="test"; 
$password="";  
$db_name="test_db"; 
$tbl_name="Customer_Login"; 
$con = mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
$time_now = time(); 
$date_now = date("y-m-d");
$exec1="select * from Flight where '".$date_now."' < Flight.Date OR '".$date_now."' = Flight.Date AND '".$time_now."' < Flight.Departure_Time;"; 
if($result1=mysql_query($exec1)) 
{  
    echo "<form action=\"book.php\" method=\"post\" name=\"bookflight\">";
    echo "<tr class=\"fdbg\"><td colspan=\"2\"><div align=\"right\" style = \"padding-right:220px\"><input type=\"submit\" name=\"Submit\" value=\"Book\"></div></td></tr>";
    echo "<table align = \"center\" border=\"1\" cellspacing=\"5\"><tr><td align=\"center\">Flight No.</td><td align=\"center\">Date</td><td align=\"center\">Depature Time</td>";
    echo "<td align=\"center\">Arrival Time</td><td align=\"center\">Depature City</td><td align=\"center\">Arrival City</td><td align=\"center\">Capacity</td><td align=\"center\">Price</td><td align=\"center\">Choose</td></tr>";
    while($row = mysql_fetch_array($result1))
    {
        echo "<tr>";
        echo "<td align=\"center\">";
        echo $row['Flight_No'];
        echo "</td>";
        echo "<td align=\"center\">";
        echo $row['Date'];
        echo "</td>";
        echo "<td align=\"center\">";
        echo $row['Departure_Time'];
        echo "</td>";
        echo "<td align=\"center\">";
        echo $row['Arrival_Time'];
        echo "</td>";
        echo "<td align=\"center\">";
        echo $row['Departure_City'];
        echo "</td>";
        echo "<td align=\"center\">";
        echo $row['Arrival_City'];
        echo "</td>";
        echo "<td align=\"center\">";
        echo $row['Capacity'];
        echo "</td>";
        echo "<td align=\"center\">";
        echo $row['Price'];
        echo "</td>";
        echo "<td align=\"center\"><input type=\"radio\" name=\"flight[]\" value=\"";
        echo $row['FID'];
        echo "\"/></td>";
        echo "</tr>";
    }
    echo "</table>";
    echo "<tr class=\"fdbg\"><td colspan=\"2\"><div align=\"right\" style = \"padding-right:220px\"><input type=\"submit\" name=\"Submit\" value=\"Book\"></div></td></tr>";
    echo "</form>";
} 
else 
{ 
    echo "<script>alert('Database Connection Error!');location.href='welcome.php';</script>"; 
} 
mysql_free_result($result1);
mysql_close($con);
?> 
```

还有book.php，点击flight.php中的按钮没有反应

```
<?php
session_start();
if(!isset( $_SESSION['username'])){
header("location:index.php");
}
$host="127.0.0.1";  
$username="test"; 
$password="";  
$db_name="test"; 

$con = mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$CID = $_SESSION['username'];
$FID = $_POST['flight[]'];
$time_now = date("y-m-d h:i:s");

echo "<script>alert('2');</script>";
echo "<script>alert('".$FID."');</script>";
echo "<script>alert('".$time_now."')</script>;";

$exec = "call BOOK_FLIGHT('".$CID."','".$FID."','".$time_now."');"; //call BOOK_FLIGHT('$CID','$FID','$time_now')
$result = mysql_query($exec);
print $result;
$result1 = mysql_query("call INSERT_RESULT('".$result."');");
echo "alert('".$result1."')";

mysql_close($con);
header("location:flight.php");
?> 
```

我使用mysql中的程序，在我直接测试后可以正常工作。我相信我的 php 代码有问题。任何人都可以为我指出吗？非常感谢您的帮助。

# javascript - Firefox 非常滞后，动画很简单

> ID：15013210
> 
> 赞同：1
> 
> 时间：2013-02-21T22:11:15.963
> 
> 标签：javascript, performance, firefox, animation, html

我正在制作一个非常简单的 UI 原型，用户可以在其中水平滚动无限的缩略图流。我很惊讶 16 个移动的 div 在 Firefox 中怎么会这么慢，但在 Chrome、IE 和 Opera 中却又那么流畅和快速？

这是使用 setInterval 每 8 毫秒运行一次的代码：

```
function update() {
    for (t in thumbs) {
        thumbs[t].element.style.left = Math.round((thumbs[t].offset * width * 1) + (width / 2) + (thumbs[t].x * thumbWidth * 1.6) - thumbWidth / 2) + 'px';
        thumbs[t].element.style.top = Math.round(height*0.48 + (thumbs[t].y * thumbHeight * 0.7) - thumbHeight / 2)+'px';
        thumbs[t].element.style.width = thumbWidth+'px';
        thumbs[t].element.style.height = thumbHeight+'px';
        thumbs[t].offset = thumbs[t].offset + (thumbs[t].targetOffset - thumbs[t].offset) / 30;
    }
} 
```

这是一个完整的演示：http: [//jsfiddle.net/VbErB/](http://jsfiddle.net/VbErB/)

我意识到它没有尽可能优化，但它也不是很重。Chrome 的更新速度约为每秒 120 帧。我不确定 Firefox，但它肯定少了**很多**，而且会出现令人不舒服的口吃。这一定是 Firefox 的一些众所周知的怪癖，我只是不知道。

# php - 如何使用php将数据数组插入mysql

> ID：15013211
> 
> 赞同：22
> 
> 时间：2013-02-21T22:11:17.500
> 
> 标签：php, mysql

目前，当通过 print_r() 输出时，我有一个如下所示的数组；

```
Array
(
    [0] => Array
        (
            [R_ID] => 32
            [email] => a@a.com
            [name] => Bob
        )

    [1] => Array
        (
            [R_ID] => 32
            [email] => b@b.com
            [name] => Dan
        )

    [2] => Array
        (
            [R_ID] => 32
            [email] => c@c.com
            [name] => Paul
        )

    [3] => Array
        (
            [R_ID] => 35
            [email] => d@d.com
            [name] => Mike
        )  
) 
```

我想将此数据插入到一个表中，每个元素值属于其各自的字段。

目前我的 php 代码如下所示

```
if(is_array($EMailArr)){
    foreach($EMailArr as $R_ID => $email => $name){

    $sql = "INSERT INTO email_list (R_ID, EMAIL, NAME) values ('$R_ID', '$email', '$name')";
    mysql_query($sql) or exit(mysql_error()); 
    }
} 
```

*注意：R_ID 不是此表中的主键。*

有人可以帮助我了解我应该如何处理这种情况吗？感谢您的阅读和您的帮助！

问候。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-21T22:21:34.983

我会避免对每个条目进行查询。

```
if(is_array($EMailArr)){

    $sql = "INSERT INTO email_list (R_ID, EMAIL, NAME) values ";

    $valuesArr = array();
    foreach($EMailArr as $row){

        $R_ID = (int) $row['R_ID'];
        $email = mysql_real_escape_string( $row['email'] );
        $name = mysql_real_escape_string( $row['name'] );

        $valuesArr[] = "('$R_ID', '$email', '$name')";
    }

    $sql .= implode(',', $valuesArr);

    mysql_query($sql) or exit(mysql_error()); 
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-21T22:20:15.340

首先你应该停止使用mysql_*。MySQL 支持多次插入

```
INSERT INTO example
VALUES
  (100, 'Name 1', 'Value 1', 'Other 1'),
  (101, 'Name 2', 'Value 2', 'Other 2'),
  (102, 'Name 3', 'Value 3', 'Other 3'),
  (103, 'Name 4', 'Value 4', 'Other 4'); 
```

你只需要在你的 foreach 循环中构建**一个字符串，看起来像这样**

```
$values = "(100, 'Name 1', 'Value 1', 'Other 1'), (100, 'Name 1', 'Value 1', 'Other 1'), (100, 'Name 1', 'Value 1', 'Other 1')"; 
```

然后在循环之后插入

```
$sql = "INSERT INTO email_list (R_ID, EMAIL, NAME) VALUES ".$values; 
```

另一种方法是[Prepared Statements](http://www.php.net/manual/en/pdo.prepared-statements.php)，它更适合您的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T22:14:51.323

```
if(is_array($EMailArr)){
    foreach($EMailArr as $key => $value){

    $R_ID = (int) $value['R_ID'];
    $email = mysql_real_escape_string( $value['email'] );
    $name = mysql_real_escape_string( $value['name'] );

    $sql = "INSERT INTO email_list (R_ID, EMAIL, NAME) values ('$R_ID', '$email', '$name')";
    mysql_query($sql) or exit(mysql_error()); 
    }
} 
```

使用 PDO 的更好示例解决方案：

```
 $q = $sql->prepare("INSERT INTO `email_list` 
                     SET `R_ID` = ?, `EMAIL` = ?, `NAME` = ?");

 foreach($EMailArr as $value){
   $q ->execute( array( $value['R_ID'], $value['email'], $value['name'] ));
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-05T11:00:29.773

我有一个 PHP 库，它有助于将数组插入 MySQL 数据库。通过使用它，您可以创建更新和删除。您的数组键值应与表列值相同。只需使用单行代码进行创建操作

```
DB::create($db, 'YOUR_TABLE_NAME', $dataArray); 
```

其中 $db 是您的数据库连接。

同样，您可以将其用于更新和删除。选择操作即将推出。Github 下载链接：[https ://github.com/pairavanvvl/crud](https://github.com/pairavanvvl/crud)

# ios - 在 Xcode 中调试未捕获的异常

> ID：15013212
> 
> 赞同：13
> 
> 时间：2013-02-21T22:11:18.580
> 
> 标签：ios, xcode

我正在尝试更好地使用 Xcode。我打开了 AllExceptions 断点。当我的应用程序崩溃时，我看到：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]'
*** First throw call stack:
(0xbb8052 0x209cd0a 0xba4db8 0x2255f2 0xc2439 0x12a5e0f 0x12a6589 0x146bfb1 0x147617c 0x12938e1 0x1290602 0x129b211 0x129b23f 0xc16a6 0x138a4c 0x138852 0x14d0e39 0x14d0143 0x14d13cf 0x14d3a31 0x14d398c 0x14cc3e7 0x1234812 0x1234ba2 0x121b384 0x120eaa9 0x28d3fa9 0xb8c1c5 0xaf1022 0xaef90a 0xaeedb4 0xaeeccb 0x28d2879 0x28d293e 0x120ca9b 0x265c 0x25c5)
terminate called throwing an exception(lldb) 
```

在 LHS 上，当我查看不同的线程时，我看不到任何真正有意义的东西。我看到了一些 CFRunLoop 的东西，但是我没有看到任何“正常”的方法名称，比如 UITableView 委托/数据源方法或我自己的方法。我想知道当我的应用程序崩溃时是否有更多信息可用的堆栈跟踪而不是十六进制的东西。我知道我可以在我访问数组的每个地方设置断点我认为我有问题，因为我基本上只是想用我们的特定数据源创建一个类似手风琴的 tableview，但我想知道是否有更快的通过查看 Xcode 中有用的东西。谢谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-21T22:19:29.207

在 Xcode 中，

1.  转到左侧窗格中的断点导航器。
2.  点击底部的“+”。
3.  选择“添加异常断点...”
4.  让默认选择在那里，然后单击“完成”。

重新运行应用程序并查看执行是否在导致此异常的行处停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-27T06:30:17.620

在开发期间处理 XCode 中的异常的最简单方法是添加异常断点。

您可以按以下方式执行此操作。

1.  从左侧菜单中选择例外导航器

[![在此处输入图像描述](../Images/52a5a0f81488f6bb73c1804268486f0f.png)](https://i.stack.imgur.com/nt55R.png)

2.  从左下角按钮添加异常断点。

[![在此处输入图像描述](../Images/0b6715e76716e756d9c702645961d5e9.png)](https://i.stack.imgur.com/TUzsY.png)

3.  为所有异常添加断点

[![在此处输入图像描述](../Images/8b86afb57be20a779e3a921dc2e2d880.png)](https://i.stack.imgur.com/EcDHo.png)

4.  运行应用程序。

在大多数情况下，XCode 将停止执行异常并指向导致异常的行。

# azure-mobile-services - Microsoft 帐户上的 Azure 移动服务单点登录

> ID：15013213
> 
> 赞同：0
> 
> 时间：2013-02-21T22:11:27.393
> 
> 标签：azure-mobile-services, azure-connect

我已经使用 WL api 实现了单点登录，但直到最近我才意识到我需要在此基础上调用 mobileService.login 才能使用 Azure 移动服务的良好身份验证功能。

我跟着这个教程

[http://www.windowsazure.com/en-us/develop/mobile/tutorials/single-sign-on-windows-8-js/#add-authentication](http://www.windowsazure.com/en-us/develop/mobile/tutorials/single-sign-on-windows-8-js/#add-authentication)

并添加了这段代码：

```
var login = function () {
    return new WinJS.Promise(function (complete) {
        WL.init();

        WL.login({ scope: ["wl.signin", "wl.basic", "wl.birthday", "wl.emails"] }).then(function (result) {
            session = result.session;

            WinJS.Promise.join([
                WL.api({ path: "me", method: "GET" }),
                mobileService.login("microsoftaccount", session.authentication_token)
            ]).done(function (results) {
                var profile = results[0];
                var mobileServicesUser = results[1];

                var title = "Welcome " + profile.first_name + "!";
                var message = "You are now logged in as: " + mobileServicesUser.userId;
                var dialog = new Windows.UI.Popups.MessageDialog(message, title);
                dialog.showAsync().done(complete);
            });
        }, function (error) {
            session = null;
            var dialog = new Windows.UI.Popups.MessageDialog("You must log in.", "Login Required");
            dialog.showAsync().done(complete);
        });
    });
} 
```

但是在这条线上

```
mobileService.login("microsoftaccount", session.authentication_token) 
```

我的 session.authentication_token 未定义。（我有一个 access_token）

如果我不通过令牌，每次启动应用程序时都会提示我登录，这违背了集成登录的目的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:03:20.067

要获取身份验证令牌，您需要将重定向 URI 传递给对的调用`WL.init`：

```
WL.init({
    redirect_uri: "<< INSERT REDIRECT DOMAIN HERE >>"
}); 
```

重定向域必须与 Live Connect 应用程序中的域相同。

# ip - 网站注册时可以保存计算机ID吗？

> ID：15013214
> 
> 赞同：-1
> 
> 时间：2013-02-21T22:11:41.077
> 
> 标签：ip

我正在寻找一种解决方案来阻止我即将推出的网站上的多次注册，但我正在寻找除了 IP 保存和跟踪之外的不同替代方案。所以我正在考虑将计算机ID保存在服务器上。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:17:02.530

No, that's not possible simply because this information is never sent on the network. The only information you could reliably get from a user visiting your website is his IP address in addition to the standard HTTP headers which might or not contain information about the UserAgent he is using, the language he configured in his browser, ...

# css - 如何减少 100% 宽度 div 内两个元素之间的间隙？

> ID：15013215
> 
> 赞同：0
> 
> 时间：2013-02-21T22:11:49.667
> 
> 标签：css, layout, width, html

我正在处理我的网站标题，该标题在左下角有一个徽标图像（100 像素 x 100 像素）和一个使用 css 表格属性垂直居中对齐的导航栏。徽标图像和导航栏 UL 元素都位于宽度为 100% 的 #header div 中。

在不破坏我的布局的情况下减少徽标和导航元素之间差距的最佳方法是什么？

![具有两个元素的网站 100% 宽度标题](../Images/2886e347faa7c1a29d1d1a155a605ded.png)

添加了边框，以便可以轻松区分元素。我也在使用 Twitter Bootstrap 框架。

我的页面的 HTML 可以在这里找到：http: [//pastebin.com/RpgcPDdh](http://pastebin.com/RpgcPDdh)

这是我的CSS：

```
#wrapper {
    background: none repeat scroll 0 0 #FFFFFF;
    border-bottom: medium none;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.25);
    margin: 0 auto;
    padding: 0 50px;
}

body {
    background: url("images/maze_bg.png") repeat scroll 0 0 #DDDDDD 
}

#header {
    display: table;
    padding: 20px 0;
    width: 100%;
}

#header ul{
    border: solid 1px red;
    display: table-cell;
    vertical-align: middle;
}

#header img{
    border: solid 1px blue;
} 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:20:27.737

扔一个

`margin-right: 20px;`

或上的东西`#header ul`。这会将它向左移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:29:01.480

padding-right 成功了！我想我应该坚持而不是在这里提出问题。

# printf - sprintf 工作正常，sprintf_s 给出访问冲突错误

> ID：15013219
> 
> 赞同：0
> 
> 时间：2013-02-21T22:12:02.000
> 
> 标签：printf

我一直在使用此页面中的 md5 实现：

[http://www.zedwood.com/article/121/cpp-md5-function](http://www.zedwood.com/article/121/cpp-md5-function)

因为它工作正常。但是有这个功能：

```
// return hex representation of digest as string
std::string MD5::hexdigest() const
{
  if (!finalized)
    return "";

  char buf[33];
  for (int i=0; i<16; i++)
    sprintf(buf+i*2, "%02x", digest[i]);
  buf[32]=0;

  return std::string(buf);
} 
```

如果我将 sprintf 更改为安全版本 (sprintf_s)，则会在运行时收到访问冲突错误。我唯一改变的是 sprintf 行，如下所示：

```
 sprintf_s(buf+i*2, 33, "%02x", digest[i]); 
```

它编译得很好，但后来我得到了错误。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:18:02.233

Since you pass an offset into your buffer, you also need to reduce the size you pass to `snprintf_s`. That is:

```
snprintf_s(buf+i*2, 33-2*i, "%02x", digest[i]); 
```

# internet-explorer - Adsense 广告未显示在 IE（Internet Explorer）中

> ID：15013221
> 
> 赞同：1
> 
> 时间：2013-02-21T22:12:05.537
> 
> 标签：internet-explorer, jquery-mobile, backbone.js, adsense

你们中的任何一位 Internet Explorer 专家都知道为什么我的 adsense 广告没有在 IE 中专门针对此域显示：[http](http://www.diablo3values.com/) ://www.diablo3values.com/ 如果 Chrome 和 Firefox 广告可以正常工作。我已经尝试了几种不同的方法，例如删除包装 div/元素以及简单地将广告放在 body 元素中，如果它没有被主干操纵，但仍然没有。然而奇怪的是，广告确实在同一网站的不同页面上工作（[http://www.diablo3values.com/attributes](http://www.diablo3values.com/attributes)）。我猜这是因为这个页面不使用主干。有任何想法吗？

我一直在 IE 9 中进行测试，并且正在使用backbone.js、jquery mobile 和google app engine。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:18:19.103

从 IE 控制台：“应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者域必须是子域该应用程序的域之一。”

# java - 为 RESTful 服务创建客户端

> ID：15013223
> 
> 赞同：2
> 
> 时间：2013-02-21T22:12:12.977
> 
> 标签：java, rest

在构建 RESTful 服务时，我总是遇到如何开发可以分发给系统用户的客户端库的问题。

举个简单的例子，假设有一个实体调用人员，并且您希望通过您的 RESTFul 服务支持基本的 CRUD 功能。

*   为了救人，客户端需要调用 POST 方法并传递适当的数据结构，比如 JSON。

*   要按生日查找人员，您的服务将回复包含人员对象列表的响应

*   要删除一个人，您的服务将响应成功或失败消息。

从上面的示例中，已经有两个对象可以与客户端共享：人员对象和响应对象。我尝试了几种方法来实现这一点：

1.  在客户端库中包含来自服务器调用的 Person 对象。这种方法的缺点是：

    *   客户端代码与您的服务器代码紧密耦合。服务器端的任何更改都需要客户端在同一版本中进行更新。

    *   Person 的对象可能包含用于持久化或序列化的依赖项或注释。客户不关心这个
        库，而是被迫包含它们。

2.  包括一个 Map 的子类，它不直接紧贴 Person 的对象，但包含一些帮助类来设置所需的字段。

    *   更松散的耦合，但当来自服务器的数据结构发生变化时可能会导致静默错误。
3.  使用[Apache Thrift](http://thrift.apache.org/)、[WADL](https://wikis.oracle.com/display/Jersey/WADL)或[Json Schema](http://code.google.com/p/jsonschema2pojo/)等描述性文件在编译期间生成客户端对象。这解决了对象依赖的问题，但仍然产生了硬依赖。这几乎就像为 SOAP 创建一个 WSDL。但是，这种方法并未广泛使用，有时很难找到示例。

为您的应用程序发布客户端 jar 的最佳方式是什么，以便

1.  它易于客户使用
2.  不会产生紧密耦合和对服务器端更改的一些容忍度

如果您的回答是更好的 API 文档，那么从 Java 注释和 POJO 生成这些文档的好工具是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:54:01.830

这是一个常见问题，与用于通信的协议无关。

在我们最近使用的一些 REST API（基于 JAX-RS）中，我们创建了 DTO 对象。这些只是愚蠢的 POJO（带有一些额外的注释让 JAXB 自动为我们做一些编组/解组）。我们将它们构建为子模块（在 maven 中）并将它们作为 JAR 提供，以便使用我们 API 的任何其他项目都可以根据需要使用 DTO。显然，如果你想提供自己的客户端库，它可以利用这些 DTO。将它们作为单独的 JAR（任何应用程序都可以依赖）提供意味着客户端不会引入他们不需要的疯狂依赖项（您的整个服务器端代码）。

这可以使事情很好地解耦。

另一方面，你真的不需要提供客户。毕竟是 REST。如果您的 REST API 结构良好并遵循[HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)原则，那么您的 API 应该易于抓取/浏览，即您不需要任何其他描述性方案。如果您需要 WADL 或其他类似结构，您的 API 可能不是很 RESTful。

# android - 为什么自定义面包圈样式显示为灰色而不是指定的颜色？

> ID：15013224
> 
> 赞同：5
> 
> 时间：2013-02-21T22:12:27.060
> 
> 标签：android, customization, crouton

我想为我的应用程序的面包块自定义样式。为尽可能多的样式设置 4 种颜色。这是我的自定义样式类

```
public class TapabookCroutonStyle {
public static final int DURATION_INFINITE = -1;
public static final Style ALERT;
public static final Style WARN;
public static final Style CONFIRM;
public static final Style INFO;

public static final int AlertRed = R.color.rojo_vivo;
public static final int WarnOrange= R.color.naranja_resplandeciente;
public static final int ConfirmGreen = R.color.verde_lima;
public static final int InfoYellow = R.color.amarillo_canario;

private static final int DURATION_SHORT  = 3000;
private static final int DURATION_MEDIUM = 5000;
private static final int DURATION_LONG   = 10000;

static {
    ALERT   = new Style.Builder()
                .setDuration(DURATION_LONG)
                .setBackgroundColorValue(AlertRed)
                .setHeight(LayoutParams.WRAP_CONTENT)
                .build();
    WARN    = new Style.Builder()
                .setDuration(DURATION_MEDIUM)
                .setBackgroundColorValue(ConfirmGreen)
                .setHeight(LayoutParams.WRAP_CONTENT)
                .build();
    CONFIRM = new Style.Builder()
                .setDuration(DURATION_MEDIUM)
                .setBackgroundColorValue(ConfirmGreen)
                .setHeight(LayoutParams.WRAP_CONTENT)
                .build();
    INFO    = new Style.Builder()
                .setDuration(DURATION_MEDIUM)
                .setBackgroundColorValue(InfoYellow)
                .setHeight(LayoutParams.WRAP_CONTENT)
                .build();
}
} 
```

颜色在 color.xml 文件中设置

```
<color name="verde_lima">#aaee22</color>
<color name="rojo_vivo">#E8110F</color>
<color name="naranja_resplandeciente">#FF6600</color>
<color name="amarillo_canario">#FFCC00</color> 
```

我使用包装器来调用面包块。

```
/**             Crouton Wrappers                 **/
public void croutonAlert(int stringId){
    Crouton.makeText(this, stringId, TapabookCroutonStyle.ALERT).show();
}
public void croutonAlert(String text){
    Crouton.makeText(this, text, TapabookCroutonStyle.ALERT).show();
}

public void croutonInfo(int stringId){
    Crouton.makeText(this, stringId, TapabookCroutonStyle.INFO).show();
}
public void croutonInfo(String text){
    Crouton.makeText(this, text, TapabookCroutonStyle.INFO).show();
}

public void croutonConfirm(int stringId){
    Crouton.makeText(this, stringId, TapabookCroutonStyle.CONFIRM).show();
}
public void croutonConfirm(String text){
    Crouton.makeText(this, text, TapabookCroutonStyle.CONFIRM).show();
}
public void croutonWarn(int stringId){
    Crouton.makeText(this, stringId, TapabookCroutonStyle.WARN).show();
}
public void croutonWarn(String text){
    Crouton.makeText(this, text, TapabookCroutonStyle.WARN).show();
} 
```

由于我使用的是 ActionBarSherlock，因此我的 appTheme 继承自它，而不是从 holo 继承。在另一个使用标准面包片的应用程序上，它没有任何问题。但是，此处不会显示自定义油炸面包丁。我在 2.2 自定义 ROM 和 4.2（谷歌版本）上对其进行了测试。

我发现关于这个主题的唯一问题是[pre Holo Devices 上的 Holo Colors？](https://stackoverflow.com/questions/12814294/holo-colors-on-pre-holo-devices)并且它不处理自定义样式（与我的情况不同，该问题不会在“全息设备”上重现）。

有谁知道为什么四种样式显示为灰色？

编辑：我刚刚测试过像 Style.ALERT 这样的常规（内置）样式确实显示了正确的颜色......另外，我将颜色引用从 R.color.mycolor 更改为它们在 R 中的值（例如：0x7f06000c），因为那是Crouton 库中的原始样式类是如何做到的，并且仍然是相同的半透明灰色...我还检查了原始的 holo_red_light 以检查 alfa 值并将它们添加到我的自定义颜色中

```
<color name="verde_lima">#FFaaee22</color>
<color name="rojo_vivo">#FFE8110F</color>
<color name="naranja_resplandeciente">#FFFF6600</color>
<color name="amarillo_canario">#FFFFCC00</color> 
```

但仍然没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:39:16.033

您正在使用`setBackgroundColorValue(...)`需要实际颜色值的方法。但是您正在为此方法提供资源 ID。

您可能想调用`setBackgroundColor(int resId)`which 在内部解析资源 ID。

# ios - UIControl 生命周期

> ID：15013228
> 
> 赞同：0
> 
> 时间：2013-02-21T22:12:42.670
> 
> 标签：ios, uicontrol

某处是否有记录在案的 UIControl 生命周期？

这就是我问的原因：

假设我有一个 UITextField。我可以很容易地连接一个按钮来改变边框颜色，如下所示：

```
myTextField.layer.borderColor = [[UIColor redColor] CGColor]; 
```

现在假设我有一个自定义控件，它是 UIControl 的子类。除非我也发出，否则相同的代码不会更改边框颜色`setNeedsLayout`，如下所示：

```
[myControl setNeedsLayout]; 
```

我需要在某处实现事件方法以使其在没有 的情况下工作`setNeedsLayout`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:48:55.527

对于后代，这就是我自己解决问题的方法。

在我的 .h 文件中：

```
@property (nonatomic, strong, setter = setBorderColor:) UIColor *borderColor; 
```

在我的 .m 文件中：

```
- (void)setBorderColor:(UIColor *)clr {
    borderColor = clr;
    myControl.layer.borderColor = borderColor.CGColor;
} 
```

奇迹般有效。

# ruby-on-rails-3 - 为什么我的索引页在列表末尾转储表数据？

> ID：15013237
> 
> 赞同：0
> 
> 时间：2013-02-21T22:13:24.307
> 
> 标签：ruby-on-rails-3

当我到达 /projects 时，我得到了这个输出，它应该只列出项目和关联的链接：

![项目索引](../Images/7a0ca29fa53b3c54aa7870046ae8d22b.png)

我无法弄清楚为什么项目表中的所有信息都在列表之后被转储。

控制器索引方法：

```
def index
  @projects = Project.all
end 
```

index.html.erb：

```
<%= @projects.each do |project| %>
  <li>
    <%= link_to project.title, projects_path(project) %>
    <%= link_to project.link, project.link %>
  </li>
<% end %> 
```

关于为什么会发生这种情况的任何想法？

谢谢阅读！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:44:29.323

`<%=`将循环更改为`<%`：

```
<% @projects.each do |project| %> 
```

它现在正在执行循环并打印所有`li`元素，然后还打印`@projects`（因为`<%=`）的内容。

# bash - 从 /proc/stat 计算 CPU 使用率

> ID：15013238
> 
> 赞同：4
> 
> 时间：2013-02-21T22:13:25.057
> 
> 标签：bash

阅读时`/proc/stat`，我得到这些返回值：

```
cpu  20582190 643 1606363 658948861 509691 24 112555 0 0 0                      
cpu0 3408982 106 264219 81480207 19354 0 35 0 0 0                               
cpu1 3395441 116 265930 81509149 11129 0 30 0 0 0                               
cpu2 3411003 197 214515 81133228 418090 0 1911 0 0 0                            
cpu3 3478358 168 257604 81417703 30421 0 29 0 0 0                               
cpu4 1840706 20 155376 83328751 1564 0 7 0 0 0                                  
cpu5 1416488 15 171101 83410586 1645 13 108729 0 0 0                            
cpu6 1773002 7 133686 83346305 25666 10 1803 0 0 0                              
cpu7 1858207 10 143928 83322929 1819 0 8 0 0 0 
```

一些消息来源声明只读取前四个值来计算 CPU 使用率，而一些消息来源说读取所有值。

我是否只读取前四个值来计算 CPU 利用率？值`user`, `nice`,`system`和`idle`? 还是我需要所有的价值观？或者不是全部，而是超过四个？我需要`iowait`,`irq`还是`softirq`?

```
cpu  20582190 643 1606363 
```

与整条线相比。

```
cpu  20582190 643 1606363 658948861 509691 24 112555 0 0 0 
```

**编辑：**一些消息来源还指出`iowait`已添加到`idle`.

在计算特定进程的 CPU 使用率时，方法是否不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:58:40.957

[手册页](http://manpages.ubuntu.com/manpages/precise/man5/proc.5.html)指出它因架构而异，并且还提供了几个示例来描述它们的不同之处：

> 在 Linux 2.6 中，这一行包括三个额外的列： ...
> 
> 从 Linux 2.6.11 开始，有第八列，...
> 
> 从 Linux 2.6.24 开始，有第九栏，...

当“有些人说只能使用......”时，他们可能没有考虑到这些。

关于计算是否因 CPU 不同：您将在 /proc/stat 中找到与“cpu”、“cpu0”、“cpu1”、...相关的行。“cpu”字段是各个 CPU 对应字段的所有聚合（不是平均值）。您可以使用简单的 awk one-liner 自行检查。

> 中央处理器 84282 747 20805 1615949 44349 0 308 0 0 0
> 
> cpu0 26754 343 9611 375347 27092 0 301 0 0 0
> 
> cpu1 12707 56 2581 422198 5036 0 1 0 0 0
> 
> cpu2 33356 173 6160 394561 7508 0 4 0 0 0
> 
> cpu3 11464 174 2452 423841 4712 0 1 0 0 0

# javascript - 在缩略图 div 中的鼠标悬停效果期间使用 javascript 控制背景图像的问题

> ID：15013239
> 
> 赞同：0
> 
> 时间：2013-02-21T22:13:27.923
> 
> 标签：javascript

如果这是一个相当普遍的问题，我很抱歉，但我向你保证，我在过去的两天里一直在阅读，看看我是否能自己解决这个问题，但唉，我在你的脚下希望得到一些一个建议。我仍处于学习 javascript 的初级阶段。

基本上，我有一个 div 类包含的一系列缩略图，该类具有重复的背景图像，赋予它微妙的纹理。我还有一些 java 脚本，当鼠标悬停在缩略图上时，它成功地将单个 div 容器突出显示为蓝色。我遇到的问题是纯蓝色效果与我为缩略图 div 选择的现有背景图像不太吻合。在发生蓝色悬停效果时，我一直在尝试打开/关闭背景图像，但我只能在单个鼠标悬停/悬停后永久关闭它。

这是javascript：

```
 // this controls the entire div tag and turns it blue
$('.pGrid div a').hover(
    function(){
        //this if-statement should toggle whether or not the striped background shows when the mouse is hovering
        if ($('.pGrid div a').hover !=0) {
        $('.pGrid div a').parent().css({ backgroundImage: "none" });
        }
        else {
         $('.pGrid div a').parent().style({ backgroundImage: "url('../images/background_stripes_white.gif')" });    
            }
        //mouse over turn div blue
        $(this).parent().stop().animate({ 
            backgroundColor: "#006699",
            color: "#ffffff"
            }, 350);    
            // this controls the word-highlight part
        $(this).stop().animate({ 
            backgroundColor: "#006699",
            color: "#ffffff"
            }, 350);
        },
        // mouse out
    function(){
        $(this).parent().stop().animate({ 
            backgroundColor: "#d0d0d0",
            color: "#000000"
            }, 350);
        $(this).stop().animate({ 
            backgroundColor: "#d0d0d0",
            color: "#006699"
            }, 350);
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:43:03.583

问题已解决。我不得不取消 if-else 语句，并在每个函数中放置一行代码，说明要么将背景设置为无，要么切换回原来的。此外，事实证明我引用的文件扩展名都错了，不得不删除“../”部分。感谢您的帮助@Diodeus 非常感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:33:55.770

无需更改背景图像，只需交换 CSS 类名即可。一张有图片，一张没有。

您还应该`display:block`在 A-tag 上使用并直接（通过 CSS 类）而不是父项应用背景。

# qt - 在 QT 5.0.1 中找不到 libgcc_s_dw2-1.dll

> ID：15013247
> 
> 赞同：0
> 
> 时间：2013-02-21T22:13:55.123
> 
> 标签：qt

我正在尝试在 Windows XP 32 位上运行我的“hello world”。我知道我必须用我的 exe 部署一些库，但在 QT 目录中找不到 libgcc_s_dw2-1.dll。我认为所有 mingw 库都附带 QT 安装程序。为什么它不见了？我必须下载mingw并复制它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:36:48.257

如果你使用 MinGWs 编译器来编译你的“hello world”，那么你的系统中已经有了所有需要的文件。`libgcc_s_dw2-1.dll`是 MinGWs 库，您可以在安装 MinGW 的路径中找到它`...\MinGW\bin\libgcc_s_dw2-1.dll`。

并尝试在您的所有系统上搜索该文件。

# javascript - 永远不会在服务器重新启动时启动

> ID：15013248
> 
> 赞同：1
> 
> 时间：2013-02-21T22:13:55.183
> 
> 标签：javascript, linux, node.js, reboot, forever

我已经向永远（`forever start script.js`）添加了一些进程，但是当服务器永远重启时列表是空的，当然它们都没有启动。任何解决这个问题的想法，因为我认为**永远**是永远运行的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:57:59.790

最简单的方法是永远从 /etc/rc.local 开始。有更完整的方法可以做到这一点，因此您可以启动/停止/等...或使用类似 monit 的东西（但这与永远一样）。

您还必须考虑使用非 root 用户永久运行。

start_forever.sh

```
cd /absolute/path/to/project
/absolute/path/to/forever -m 5 examples/error-on-timer.js& 
```

然后在 /etc/rc.local

```
sudo -u SOME_USER /absolute/path/to/start_forever.sh 
```

# gnu-make - makefiles 隐式和显式规则

> ID：15013249
> 
> 赞同：0
> 
> 时间：2013-02-21T22:13:56.067
> 
> 标签：gnu-make

我有规矩

```
*.o: *.c
    gcc <certain compiler switches> 
```

我想使用与标准规则不同的编译器开关构建一些 *.c 文件。

我相信我只是在第一条规则之前添加

```
foo.o : foo.c
foobar.o : foobar.c
    gcc <other compiler switches> 
```

foo 和 foobar 的显式规则是否覆盖 *.o : *.c 规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:20:47.460

你的makefile有很多问题。`*.o: *.c`使用 shell 通配符，几乎可以肯定不是你想要的。您可能希望使用 make 通配符编写模式规则—— `%.o: %.c`. 我不太喜欢这些（即模式规则）。我总是喜欢在我的 makefile 中非常明确。就像是：

```
SRCS := foo.c foobar.c
OBJS := ${SRCS:%.c=%.o}

${OBJS}: %.o: %.c
    gcc ${OPTS-${@D}} $< -o $@ 
```

现在你可以定义`OPTS-foo`和`OPTS-foobar`你认为合适的。

# tridion - Tridion 富文本字段 DWT 输出到“？”

> ID：15013252
> 
> 赞同：5
> 
> 时间：2013-02-21T22:14:03.987
> 
> 标签：tridion

富文本字段值 <div> </div>

输出 <div>?</div>

载重吨：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
@@Component.Fields.Text@@
</html> 
```

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:27:22.727

由于时间不够，我现在无法尝试，但我想到了一些事情：

*   您的发布目标上设置的编码是什么？
*   您在模板生成器和预览中得到相同的结果吗？
*   如果您使用 Notepad++ 之类的文本编辑器打开已发布的文件，它会显示什么？

**编辑**

在预览中我得到这个：

```
<div> </div> 
```

发布后我和你一样：

```
<div>?</div> 
```

所以我将发布目标更改为使用“Unicode (UTF-8)”而不是“系统默认值”，现在当我发布时，我得到了这个：

```
<div>Â </div> 
```

然后，我参考了 Elena[处理 encoding 的 7 条出色线索](http://elenaserghie.blogspot.nl/2012/01/7-clues-to-solve-character-encoding.html)，并发现我在 web.config 中遗漏了这一点：

```
<globalization fileEncoding="UTF-8" requestEncoding="UTF-8" responseEncoding="UTF-8"/> 
```

这仍然没有这样做，它仍然在标签之间加载这个奇怪的字符。最后一条线索是因为编码未应用于扩展名为“.html”的页面。将我的页面模板重命名为具有 .aspx 扩展名，发布，按 F5 和魔法，我的 div 现在显示：

```
<div> </div> 
```

**编辑 2**如果您想使用 .html 扩展名，只需将其添加到页面的 <head> 中：

```
<meta http-equiv="Content-type" content="text/html;charset=UTF-8"> 
```

# binding - 方案和浅绑定

> ID：15013254
> 
> 赞同：2
> 
> 时间：2013-02-21T22:14:17.180
> 
> 标签：binding, scheme

```
 (define make (lambda (x) (lambda (y) (cons x (list y)))))

 (let ((x 7)
       (p (make 4)))
   (cons x (p 0))) 
```

我是 Scheme 和函数式程序的新手，所以我在浏览程序时有点笨拙，但我知道如果我使用深度绑定，这个程序将返回 (7 4 0)。说得通。这个程序使用浅绑定会做什么？我知道这听起来可能很愚蠢，但是与 cons 一致的 p 是重新定义吗？所以在那种情况下，我们会返回 (7 0)？

基本上，我理解 deep v. shallow binding 的概念，但我觉得我在看 Scheme 时把它搞混了，因为我对它并不熟悉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T00:39:08.997

深层或浅层绑定是一种实现技术，无法从程序内部观察到。程序员的区别在于词法和动态范围规则之间，但两者都可以用这两种技术中的任何一种来实现（即一个概念与另一个无关）。

深或浅是指选择堆栈帧来保存给定的外部范围变量的绑定。在深度绑定中，需要访问一系列帧，直到输入正确的帧来保存变量的记录；在浅层绑定中，所有绑定都存在于一个浅层环境中。另请参阅“rerooting”（仅在词法范围的浅绑定实现的上下文中才有意义）。

对于您的具体问题，根据*词法*范围规则，您的代码将返回`(7 4 0)`并且在*动态*-下`(7 7 0)`，因为调用`((lambda(y) (list x y)) 0)`是在`x=7`绑定的动态范围内完成的（作为旁注，`(cons x (list y))`与 相同`(list x y)`）：

```
x = 7
p = (lambda (y) (list x y))      ; x=4 is unused, in p=(make 4)
(cons 7 (p 0)) == (list 7 7 0)   ; 'x' in this line and in lambda body for p
                                 ;   both refer to same binding that is
                                 ;   in effect, i.e. x=7 
```

* * *

NB 相同的术语（深/浅绑定）现在在其他语言中使用完全不同的含义（它们确实与那里的范围规则有关），我不想完全理解。这个答案是在 Scheme 的上下文中给出的。

参考：[LISP 1.5 中的浅绑定，](https://dspace.mit.edu/handle/1721.1/41975) Baker，Henry G. Jr.，1977 年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:41:34.903

请参阅此 wikipedia[文章](http://en.wikipedia.org/wiki/Scope_%28computer_science%29#Lexical_scoping_and_dynamic_scoping)以了解有关范围的讨论（它提到了词法/动态范围和深/浅绑定），记住 Scheme 是词法范围的。Will Ness 的回答提供了更多信息。现在，让我们一步一步地看看这段代码中发生了什么：

```
; a variable called x is defined and assigned the value 7
(let ((x 7)
; make is called and returns a procedure p, inside its x variable has value 4
      (p (make 4)))
; 7 is appended at the head of the result of calling p with y = 0
  (cons x (p 0)))

=> '(7 4 0) 
```

请注意，在第二行中，在 lambda 返回的 lambda 中创建了一个*闭包*`make`，其中的变量`x`将被赋值`4`。这`x`与外部无关`x`，因为 Scheme 是词法范围的。

最后一行不是重新定义，如上一段所述，`x`里面与表达式中定义的`make`不同。`x``let`

# c# - Windows CE 按钮可以显示图像吗？

> ID：15013255
> 
> 赞同：2
> 
> 时间：2013-02-21T22:14:18.157
> 
> 标签：c#, button, compact-framework, windows-ce

由于房地产/空间限制，我想在按钮上放置一个打印机图标而不是文本“打印”

但是我看不到明显的方法可以做到这一点（按钮上没有“图像”属性等）。

有可能吗（没有通过燃烧的箍侧向跳跃）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:58:10.793

标准按钮不支持图像，不。您必须创建一个自定义控件。这是一个非常普遍的要求，以至于[微软在 MSDN 上发布了一篇文章来说明如何做到这一点](http://msdn.microsoft.com/en-us/library/aa446518.aspx)。

我认为如果只在 Button 中创建支持，他们会得到更好的服务（毕竟，在那篇文章之后他们有几个版本），但他们没有问我。

# ember.js - Emberjs bindAttr 不适用于 ember 版本 1.0.0-rc.1

> ID：15013256
> 
> 赞同：1
> 
> 时间：2013-02-21T22:14:35.000
> 
> 标签：ember.js, handlebars.js

我正在使用这个[JSFiddle](http://jsfiddle.net/EsF4R/3/)中的代码来尝试做类似的事情（它使用 Ember 版本 0.9.3）。但是，当我将代码与较新版本的 Ember (1.0.0-rc.1) 一起使用时，第 11 行输入标记中的把手 bindAttr 似乎不起作用。

[这](http://jsfiddle.net/9HeQG/4/)是相同 JSFiddle 的一个版本，但使用的是新的 Ember 版本。您可以在输出中看到已经没有相同的功能。

新版 Ember 发生了哪些变化，我该如何补救？

这是两个 JSFiddles 中相同的 html：

```
<script type="text/x-handlebars">
{{view Em.RadioButton title="1" option="1" group="default" valueBinding="App.radio1"}}
{{view Em.RadioButton title="Ohai" option="Words" group="default" valueBinding="App.radio1"}}
{{view Em.RadioButton title="3" option="3" group="default" valueBinding="App.radio1"}}
{{view Em.RadioButton title="Dog" option="Dog" group="default" valueBinding="App.radio1"}}
{{view Ember.TextField valueBinding="App.radio1"}}
</script> 
```

这是两个JSFiddles中相同的JS：

```
(function(exports) {
var set = Ember.set, get = Ember.get;
Ember.RadioButton = Ember.View.extend({
title: null,
checked: false,
group: "radio_button",
disabled: false,

classNames: ['ember-radio-button'],

defaultTemplate: Ember.Handlebars.compile('<label><input type="radio" {{ bindAttr  disabled="disabled" name="group" value="option" checked="checked"}} />{{title}}</label>'),

change: function() {
Ember.run.once(this, this._updateElementValue);
},

_updateElementValue: function() {
var input = this.$('input:radio');
set(this, 'value', input.attr('value'));
}
});

})({});

App = Ember.Application.create({
radio1: ""
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:17:02.603

[JSFiddle 示例](http://jsfiddle.net/9HeQG/6/)

您需要像这样引用模板中的属性，使用`view.propertyName`：

```
defaultTemplate: Ember.Handlebars.compile('<label><input type="radio" {{ bindAttr disabled="view.disabled" name="view.group" value="view.option" checked="view.checked"}} />{{view.title}}</label>') 
```

# iphone - 当键盘覆盖单元格时关闭 UITableViewController 会导致崩溃

> ID：15013257
> 
> 赞同：0
> 
> 时间：2013-02-21T22:14:35.763
> 
> 标签：iphone, ios, ipad

我有一个 UITableViewController 带有用于静态和可编辑文本的自定义单元格。标准的东西，没什么花哨的。

存储单元格数据，以便在重复使用单元格时，将数据放回其中。

问题是这样的：当用户将光标放在 UITextField 单元格中并且键盘向上时，键盘覆盖了表格视图中的三行。视图控制器顶部有一个取消按钮，它应该关闭视图控制器。当我调用dismissModalViewController 时，键盘会隐藏，但UITableViewController 想要在视图消失时刷新键盘下的行。但是，视图已经处于垂死挣扎中，我遇到了崩溃，因为表视图试图调用 cellForRowAtIndexPath 来更新正在被删除的行。

我试着等待键盘隐藏。不好。

我尝试让第一响应者辞职，以便键盘消失并在关闭视图控制器之前先更新行，但我找不到任何东西可以告诉我数据已完成更新。

我需要一些事件来告诉我表格已完成更新，或者告诉表格视图不要向委托请求数据，或者告诉表格视图在键盘消失时不要更新。

或者我缺少一些简单的东西。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:26:15.083

如果您没有更多的单元格，我建议您为每个单元格制作一个不同的可重用标识符。这样可以更好地保存出队后的单元格状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:09:38.253

我解决了我自己的问题。在 cellForRowAtIndexPath 中，我在 UITextField 中为可能不再存在的指针设置文本。我为解决问题所做的仍然是创建单元格，但在设置其中的文本之前，我检查了是否按下了取消按钮，如果是，则返回空单元格。

我希望有更好的解决方案，例如等待单元完成更新，但这似乎没有发生。

# ruby - 在 Ruby 中输出 CURL

> ID：15013263
> 
> 赞同：1
> 
> 时间：2013-02-21T22:14:52.883
> 
> 标签：ruby, curl, httprequest

我想在运行我的程序时创建一个 CURL 调用。我目前有一个脚本，我想向控制台输出一个类似的 CURL 调用。这是我目前正在做的事情：

```
 puts "curl -v -H \" myToken: #{request["Token"]}\"" 
        callData['HEADER'].each do |hKey, hVal|
            request[hKey] = hVal
            puts "-H\"#{hKey} : #{hVal}\""
        end
        puts "\"#{callData['URL']}\"" 
```

这是我的输出：

```
curl -v -H " Authorization BEARER FB4GGY5CRhL1lc5a2QIZQw"
"http://mysite/folder/file?myId=abc123&date=2013-02-28&unique=1052946" 
```

问题是 URL 在新行上。我如何将所有内容放在一行上，以便可以复制并粘贴到终端中进行 CURL 调用，同时仍然能够考虑到我的调用中标题的动态数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:18:11.390

使用`print`而不是`puts`，然后`puts`在末尾不带任何参数执行 a 以确保行结束。

# javascript - 带有 CKEditor 的 jQuery 验证插件

> ID：15013268
> 
> 赞同：2
> 
> 时间：2013-02-21T22:15:15.493
> 
> 标签：javascript, jquery, html, forms, validation

我知道之前有人问过这个问题，并且我已经阅读了所有以前的问题，但我仍然无法让 jQuery 验证器正确验证 CKEditor 字段。

我的表格如下：

```
<form id="faq-form">
    <p>
        <label>Title:</label>
        <input type="text" id="faq-title" name="faq-title" class="faq-title" />
    </p>
    <p>
        <label for="question">Question:</label>
        <textarea name="question" id="question"></textarea>
    </p>
    <p>
        <label for="answer">Answer:</label>
        <textarea name="answer" id="answer"></textarea>
    </p>            
    <p>
        <input id="submit-faq" name="submit-faq" type="submit" value="Submit" />
    </p>
</form> 
```

两个文本区域都使用以下方法转换为 CKEditor 字段：

```
<script>
CKEDITOR.replace('question', { toolbar : 'forum' });
CKEDITOR.replace('answer', { toolbar : 'forum' });
</script> 
```

当我尝试验证时，只有标题字段得到验证。我不确定我做错了什么。这是我用于验证的 javascript 代码（以下位于 jQuery 文档就绪函数中）。

```
$('#faq-form').submit(function() {
    // Update textareas with ckeditor content
    for (var i in CKEDITOR.instances) {
        CKEDITOR.instances[i].updateElement();
        $.trim($('#' + i).val());
    }

    // Validate the form
    if ( ! $('#faq-form').validate({
        rules: {
            'faq-title': {
                required: true,
                minlength: 5
            },
            answer: {
                required: true,
                minlength: 20
            },
            question: {
                required: true,
                minlength: 20
            }
        }
    }).form()) {
        console.log('Form errors');
        return false;
    } 
```

验证完成后，我将使用 $.post 方法而不是普通的表单获取或发布，这样我就可以在不重新加载的情况下更新我的页面。$.post 出现在验证方法之后，但我认为没有必要显示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T23:19:13.033

我终于能够让它工作了。CKEditor 在运行时会隐藏文本区域，而 jQuery 验证器会忽略隐藏的元素。在 validate 函数中，这可以更改。所以我的新代码如下：

```
if ( ! $('#faq-form').validate({
    ignore: "input:hidden:not(input:hidden.required)",
    rules: {
        'faq-title': {
            required: true,
            minlength: 5
        },
        answer: {
            required: true,
            minlength: 20
        },
        question: {
            required: true,
            minlength: 20
        }
    },
    messages: {
        'faq-title': {
            required: "The title field is required"
        },
        answer: {
            required: "The answer field is required"
        },
        question: {
            required: "The question field is required."
        }
    },
    errorElement: "span",
    errorPlacement: function (error, element) {
        error.appendTo(element.prev());
    }
}).form()) {
    console.log('Form errors');
    return false;
} 
```

我还添加了消息并在显示错误时修改了错误的元素和位置。我认为这可能对其他偶然发现此问题的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T01:08:31.473

好吧，让我们把它剪下来，我花了几个小时在正确的位置获取 CKEditor 的错误消息，因为每次它出现在 CKEditor 的顶部或看起来不太好看的标签之后。

由于 CKEditor 隐藏了 textarea 并将其 span 标签放在 textarea 之后。请使用浏览器工具检查 dom 元素，然后您可以看到 textarea 被隐藏。

我刚刚调整了代码以获取 CKEditor 下的错误消息标签/跨度。

```
 $('#messageForm').validate(
          {
              ignore: 'input:hidden:not(input:hidden.required)',
              rules: {
                  msgTitle: {
                      minlength: 2,
                      required: true
                  },
                  msgText: {
                      minlength: 2,
                      required: true
                  }
              },
              errorElement: "span", // can be 'label'
              errorPlacement: function (error, element) {
                  if ($(element).attr('id') == 'msgText') {
                      $('#cke_msgText').after(error);
                  } else {
                      element.after(error);
                  }
              },
              highlight: function (element) {
                  $(element).closest('.form-group').removeClass('text-success').addClass('error');
              },
              success: function (element) {
                  element
                      .closest('.form-group').removeClass('error').addClass('text-success');
              }
          }); 
```

这里，'msgText'是被隐藏的textarea的id，cke_msgText是ckeditor的id，你可以通过查看dom元素找到id，也许ckeditor取了textarea的id属性，加上前缀'cke_'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:24:04.073

我的猜测是 CKEditor 不能很好地进行验证，至少在默认情况下是这样。您需要在验证之前删除编辑器（CKEditor 的工作原理是隐藏正在编辑的内容，然后插入 iframe 并将可编辑的内容粘贴在其中；当您删除编辑器时，它会关闭 iframe 并复制内容 - 在至少这是从记忆中）。我的猜测是，如果您检查 DOM，您会发现 textareas 的内容没有改变。

您可能会发现 NicEdit 在这种情况下更有用 - 请参阅此线程：

[https://stackoverflow.com/questions/3914510/wysiwyg-editor-without-iframe](https://stackoverflow.com/questions/3914510/wysiwyg-editor-without-iframe)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T00:36:42.783

你的代码：

```
$('#faq-form').submit(function() {

    // Update textareas with ckeditor content
    for (var i in CKEDITOR.instances) {
        CKEDITOR.instances[i].updateElement();
        $.trim($('#' + i).val());
    }

    if ( ! $('#faq-form').validate({
        rules: {
            'faq-title': {
                required: true,
                minlength: 5
            },
            answer: {
                required: true,
                minlength: 20
            },
            question: {
                required: true,
                minlength: 20
            }
        }
    }).form()) {
        console.log('Form errors');
        return false;
    }
    .... 
```

您不应该[`.validate()`](http://docs.jquery.com/Plugins/Validation/validate#options)在条件内使用。这就是该[`.valid()`方法](http://docs.jquery.com/Plugins/Validation/valid)的用途。 `.validate()`仅用于使用您的规则和选项在 DOM 上*初始化*插件*一次。*初始化后，`.valid()`可以在条件内部使用来触发测试并返回布尔值。

此外，你不应该有`.validate()`内部`submit`处理程序。该插件有它自己的`submitHandler`回调函数。

您的代码应更改为：

```
$(document).ready(function() {

    $('#faq-form').validate({ // initialize the plugin
        // rules & options,
        rules: {
            'faq-title': {
                required: true,
                minlength: 5
             },
             answer: {
                required: true,
                minlength: 20
             },
             question: {
                required: true,
                minlength: 20
             }
        },
        submitHandler: function (form) {
             // Update textareas with ckeditor content
             for (var i in CKEDITOR.instances) {
                 CKEDITOR.instances[i].updateElement();
                 $.trim($('#' + i).val());
             }
        }
    })

    if ( ! $('#faq-form').valid() ) { // test the form for validity
        console.log('Form errors');
        return false;
    }

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-02T12:12:56.753

迄今为止我发现的最佳解决方案，简单而优雅：

```
 $('#form1').validate({
        ignore: [],
        rules: {
            corpo : {
                required: function()
                {
                    CKEDITOR.instances.corpo.updateElement();
                }
            }
        }
    }) 
```

字体：[http ://devlog.waltercruz.com/usando-ckeditor-e-jquery-validate-juntos](http://devlog.waltercruz.com/usando-ckeditor-e-jquery-validate-juntos)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-02T07:22:40.100

```
 <form>
        <textarea class="ckeditor" id="noticeMessage" name="message"></textarea>
    </form>
    <script type="text/javascript" src="ckeditor/ckeditor.js"></script>

    <form>
        <textarea class="ckeditor" id="noticeMessage" name="message"></textarea>
    </form>
    <script type="text/javascript" src="ckeditor/ckeditor.js"></script>
    <script type="text/javascript">
        $("form").submit( function() {
            var messageLength = CKEDITOR.instances['noticeMessage'].getData().replace(/<[^>]*>/gi, '').length;
            if( !messageLength ) {
                alert( 'Please enter a message' );
            }
        }
    </script>

see for full reference
----------------------

http://christierney.com/2012/12/14/ckeditor-4-required-field-validation/ 
```

# twitter-oauth - webworks blackberry 10 window.open 推特 脸书

> ID：15013271
> 
> 赞同：1
> 
> 时间：2013-02-21T22:15:24.203
> 
> 标签：twitter-oauth, blackberry-webworks, facebook-oauth, blackberry-10

我只是想在我的 Webworks 应用程序中实现 facebook 和 twitter，但不能让它们一起工作。

我正在使用 FaceBook-OAuth-2 和 Twitter-OAuth-1 示例，我只是将这两个东西放在一起，我的问题是只有第一个 startOAuth() 在应用程序中打开一个窗口以登录第二个如果不是这样我第一次点击 facebook，当我尝试 twitter 之后它就可以工作了，没有任何反应。 [https://github.com/blackberry/BB10-WebWorks-Samples](https://github.com/blackberry/BB10-WebWorks-Samples) 谢谢

```
function setClickHandlers() {
console.log('set click handlers');
var fb = document.getElementById('facebookOn');
fb.addEventListener('click', function(e) {

    // if the childWindow is already open, don't allow user to click the button
    if(childWindow !== null) {
        return false;
    }

    e.preventDefault();
    toast('Contacting Facebook...');
    setTimeout(function() {
        startOAuth();
    }, 500);
});

console.log('set twitter click handlers');
var tw = document.getElementById('twitterOn');
tw.addEventListener('click', function(e) {

    // if the childWindow is already open, don't allow user to click the button
    if(childWindow !== null) {
        return false;
    }

    e.preventDefault();
    toast('Fetching access token...');
    setTimeout(function() {
        twittergetAccessToken();

    }, 500);
}); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:25:13.447

我将首先在您的单击处理程序中添加一些调试代码，以查看当您首先单击按钮时是否会调用它。

如果是，那么我建议您使用 Web Inspector（控制台）查看是否有任何错误。如果有，它们就会出现在那里。

Web Inspector 的良好参考 - [http://developer.blackberry.com/html5/documentation/web_inspector_overview_1553586_11.html](http://developer.blackberry.com/html5/documentation/web_inspector_overview_1553586_11.html)

如果未触发单击处理程序，则可能是您的元素 ID 错误，或者未执行 setClickHandlers 函数。

# javascript - 骨干返回长度为 0

> ID：15013272
> 
> 赞同：1
> 
> 时间：2013-02-21T22:15:25.467
> 
> 标签：javascript, backbone.js

我对骨干很陌生，我正在尝试构建一个简单的应用程序。这是我到目前为止所拥有的

```
var Election = Backbone.Model.extend();

var Elections = Backbone.Collection.extend({
   model: Election,
   url: '/assets/data.json',

   initialize: function() {
       console.log('init col');
       this.render();
       return this;
   },

   render: function() {
        console.log('rendering the collection');
        return this;
   },

// return this

});

  var router = Backbone.Router.extend({
   routes: {
       '': 'root'
   },

   root: function(){
       var collection = new Elections();
       collection.fetch();
       console.log(collection.length); //returns 0
   }
});
var r = new router();

Backbone.history.start(); 
```

日志是这个

```
> init col
> rendering the collection
> 0 
```

但是当我在控制台中手动创建一个新集合时，它会显示正确的长度和所有内容，我认为由于某种原因路由器调用发生得太早，但不确定。这是一个样本`data.json`

```
[
    {
        "year": 1868,
        ...
    },
    {
        "year": 1872,
        ...
    }, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:17:23.687

[`fetch`](http://backbonejs.org/#Collection-fetch)执行异步 HTTP (Ajax) 请求，因此您应该传递[`fetch`](http://backbonejs.org/#Collection-fetch)一个成功回调：

```
collection.fetch({
   success: function(){
       console.log(collection.length);
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:34:51.307

稍微扩展 CD 的答案，

更好的方法是调用`fetch`然后使用`listenTo`来调用`render`更改方法

在您的初始化方法中执行此操作

```
_.bindAll(this, 'render');
this.listenTo(this, 'change', this.render); 
```

如果你愿意，你可以在外面取货

集合.fetch()

它会自动更新更改

# matlab - 在matlab中交错数据

> ID：15013273
> 
> 赞同：-1
> 
> 时间：2013-02-21T22:15:26.107
> 
> 标签：matlab

我需要在matlab中交错两个数据流：

```
upper = rem(conv(data, [1 1 1 1]),2);
lower = rem(conv(data, [1 1 0 1]),2);
t = [upper; lower]; 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:49:46.630

说`a`和`b`是你想要交错成向量的向量`c`。你可以试试：

```
c=kron(a,[1 0])+kron(b,[0 1]); 
```

或者：

```
c(numel(a)+numel(b))=0;
c(1:2:end)=a; 
c(2:2:end)=b; 
```

为了公平起见，我将添加 OP 的原始建议

```
t=[a;b]
c=t(:)' 
```

# ruby-on-rails-3.2 - 使用 JRuby 的 RoR 引擎 - 初始迁移失败，错误

> ID：15013274
> 
> 赞同：0
> 
> 时间：2013-02-21T22:15:30.597
> 
> 标签：ruby-on-rails-3.2, jruby, rails-migrations, rails-engines

我第一次尝试在基于 JRuby 的项目中设置 Rails 可安装引擎（必要）。

引擎是空的，只有一个“hello world”测试控制器+视图，没有任何模型，没有使用 JSON。我尝试运行“捆绑安装”，它顺利通过，没有任何错误。

当我使用 'rake engine_name:install:migrations' 运行测试应用程序的初始数据库迁移时，它会引发错误：

```
rake aborted!
Could not find json-1.7.7 in any of the sources
/home/user/.rvm/gems/jruby-1.7.2@global/gems/bundler-1.2.3/lib/bundler/spec_set.rb:90:in `block in materialize'
/home/user/.rvm/gems/jruby-1.7.2@global/gems/bundler-1.2.3/lib/bundler/spec_set.rb:83:in `map!'
/home/user/.rvm/gems/jruby-1.7.2@global/gems/bundler-1.2.3/lib/bundler/spec_set.rb:83:in `materialize'
/home/user/.rvm/gems/jruby-1.7.2@global/gems/bundler-1.2.3/lib/bundler/definition.rb:113:in `specs'
/home/user/.rvm/gems/jruby-1.7.2@global/gems/bundler-1.2.3/lib/bundler/definition.rb:158:in `specs_for'
/home/user/.rvm/gems/jruby-1.7.2@global/gems/bundler-1.2.3/lib/bundler/definition.rb:147:in `requested_specs'
/home/user/.rvm/gems/jruby-1.7.2@global/gems/bundler-1.2.3/lib/bundler/environment.rb:23:in `requested_specs'
/home/user/.rvm/gems/jruby-1.7.2@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:11:in `setup'
/home/user/.rvm/gems/jruby-1.7.2@global/gems/bundler-1.2.3/lib/bundler.rb:116:in `setup' 
```

这是默认的 Gemfile.lock：

```
PATH
  remote: .
  specs:
    project_name (0.0.1)
      rails (~> 3.2.6)

GEM
  remote: http://rubygems.org/
  specs:
    actionmailer (3.2.12)
      actionpack (= 3.2.12)
      mail (~> 2.4.4)
    actionpack (3.2.12)
      activemodel (= 3.2.12)
      activesupport (= 3.2.12)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.5)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.2.1)
    activemodel (3.2.12)
      activesupport (= 3.2.12)
      builder (~> 3.0.0)
    activerecord (3.2.12)
      activemodel (= 3.2.12)
      activesupport (= 3.2.12)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activerecord-jdbc-adapter (1.2.7)
    activerecord-jdbcmysql-adapter (1.2.7)
      activerecord-jdbc-adapter (~> 1.2.7)
      jdbc-mysql (~> 5.1.0)
    activeresource (3.2.12)
      activemodel (= 3.2.12)
      activesupport (= 3.2.12)
    activesupport (3.2.12)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    builder (3.0.4)
    erubis (2.7.0)
    hike (1.2.1)
    i18n (0.6.1)
    jdbc-mysql (5.1.22.1)
    journey (1.0.4)
    jquery-rails (2.2.1)
      railties (>= 3.0, < 5.0)
      thor (>= 0.14, < 2.0)
    json (1.7.7)
    json (1.7.7-java)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.21)
    multi_json (1.6.1)
    polyglot (0.3.3)
    rack (1.4.5)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.3)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.12)
      actionmailer (= 3.2.12)
      actionpack (= 3.2.12)
      activerecord (= 3.2.12)
      activeresource (= 3.2.12)
      activesupport (= 3.2.12)
      bundler (~> 1.0)
      railties (= 3.2.12)
    railties (3.2.12)
      actionpack (= 3.2.12)
      activesupport (= 3.2.12)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (10.0.3)
    rdoc (3.12.1)
      json (~> 1.4)
    sprockets (2.2.2)
      hike (~> 1.2)
      multi_json (~> 1.0)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    thor (0.17.0)
    tilt (1.3.3)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.35)

PLATFORMS
  java
  ruby

DEPENDENCIES
  activerecord-jdbcmysql-adapter
  engine_name!
  jquery-rails

Here is default Gemfile:

source "http://rubygems.org"
gemspec
gem "jquery-rails" 
```

当我在 Ruby（而不是 JRuby）上进行相同的运行时，一切正常，没有任何问题。

你对这个主题没有任何想法或经验吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:51:58.600

`bundle update`可能会有所帮助.. 我看到一些情况`bundle install`不足以修复这种错误消息

# django - 使 Django 表单结果可编辑

> ID：15013275
> 
> 赞同：0
> 
> 时间：2013-02-21T22:15:34.107
> 
> 标签：django

我有一个用户填写的表格，所有结果都显示在另一个页面上作为表格。如何使结果在该页面（表格）中可编辑？如果您想编辑某行，您可以按下编辑按钮之类的东西，这将使该行的值从文本更改为表单中的相应小部件，因此您可以自己编辑它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:00:19.397

尝试使用[jEditable](http://www.appelsiini.net/projects/jeditable) jQuery 插件[的 django-jeditable 。](https://github.com/neskie/django-jeditable)

# php - Selecting rows from mysql table and adding onto another table with checkbox and text inputs?

> ID：15013278
> 
> 赞同：1
> 
> 时间：2013-02-21T22:15:42.547
> 
> 标签：php, mysql, arrays

I have a page that lists all the products bought in a particular consingment. The user can then choose which products to re-order (by clicking on a checkbox) and input a quantity (text input). These are then passed onto another page (listbyconsg.php) that will add the details into a new table, but I can't seem to get this working and would appreciate direction or help. Can anyone help? Thanks.

```
$con=$_REQUEST['consignment'];

$sql = "SELECT * FROM products,supplier
WHERE  products.consignment= $con  
AND products.supplier = supplier.supplierID
ORDER BY products.supplier";

$result = mysql_query($sql, $link);
?>
<form action='listbyconsg.php' method='post'>
<?
echo "<table  cellpadding='0' cellspacing='0' border='1'>";
echo "<tr> <th>Description</th> <th>Product Size</th> <th>Barcode</th> <th>Product Code</th> 
    <th>Image</th> <th> # </th> <th> Quantity </th></tr>";
while($row = mysql_fetch_array( $result )) {
echo "<tr><td>"; 
echo $row['description'];   
echo "</td><td>"; 

echo $row['productSize'];
echo "</td><td>"; 

echo $row['barcode'];
echo "</td><td>"; 

echo $row['productCode'];
echo "</td><td align='center'>"; 

echo '<img src="http://bargainsupplies4u.co.uk/productpics/' . $row['barcode'] . '.jpeg">';
echo "</td>";  ?>

<td><input name="checkbox[]" type="checkbox" id="checkbox[]"  value="<?= $row['id'] ?>" ></td>
 <td>Qty: <input name="quantity[]" type="text"  ></td></tr>
<?
} 
echo "</table>";
?>

<input type='submit' value='Submit' />
</form> 
```

Then on the other page (listbyconsg.php), I have the following so far....

```
$get_id=$_POST['checkbox']; 
$get_qty=$_POST['quantity']; 
```

I am unsure then as to how to loop through both these arrays and add information into another table with the something thing like this:

```
$sql1 = "INSERT INTO newOrder (id, orderQuantity)
VALUES ('$get_id', '$get_qty')" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:59:20.310

要遍历 PHP 中的数组，您可以执行以下操作：

```
$count = count($_POST['quantity']);
for($i=0; $i<$count; $i++){
    if(isset($_POST['checkbox'][$i])){
        $checkbox = $_POST['checkbox'][$i];
        $quantity = $_POST['quantity'][$i];
        mysql_query("INSERT INTO newOrder (id, orderQuantity)
            VALUES ($checkbox, $quantity)");
    }
} 
```

# tsql - Query with table, temp table, subquery join issues

> ID：15013286
> 
> 赞同：1
> 
> 时间：2013-02-21T22:16:13.127
> 
> 标签：tsql, sql-server-2005, subquery, inner-join, temp-tables

I have a query where I create 2 temp tables at the start, then I query an existing table in my DB and join this table to a subquery, and then lastly join to 1 of the temp tables. When i do this I get an error that the key I'm joining on from the existing table cannot be bound. What's weird is if I take out all references to the subquery and leave just the query with the existing table and the temp table it joins fine, and also if I joint the existing table to just the sub suery it works just fine.

But when I try to put all 3 together it gives the me the "the multi-part identified z.[currnecy key] cannot be bound", which seems an odd error since this key is in an existing table and joins just fine to a temp table or sub query alone, but not both together.

I know about issues with joining on sub queries, but in this situation it seems that the issue seems to be with joining to sub queries and temp tables in the same query, which I'm not sure how to work around.

Code is below.

```
declare @tmpFx table (currency_key int, effective_date_key int, expiration_date_key int, to_usd float, from_usd float ) --primary key (currency_key, date_key))
    insert into @tmpFx(currency_key, effective_date_key, expiration_date_key, to_usd, from_usd)
    select [currency key], cast(convert(char(8),[effective date],112) as int), cast(convert(char(8),[expiration date],112) as int), [to usd], [from usd]
    from v_fx --where [effective date] >= @beginDate

declare @fixedFx table (currency_key int, to_usd float, from_usd float primary key (currency_key))
    insert into @fixedFx(currency_key, to_usd, from_usd)
    select [currency key], [to usd], [from usd] 
    from v_fx where [effective date] = '2012-01-01'

select z.[currency key], --stat_fx.to_usd to_usd, stat_fx.from_usd from_usd, --q.*,-- 
stat_usd_amt2 = case when z.[currency key] = 100001 then q.orig_amt else 0 end --sum(q.orig_amt * stat_fx.to_usd)
from [dim country] z,
(select b.country_key, a.currency_key, a.data_type_key, sum(a.amount) orig_amt,
    sum(a.amount * stat_fx.to_usd) stat_usd_amt, 
    sum((a.amount * stat_fx.to_usd) * stat_fx.from_usd) home_curr_amt 
    from tbl_cohort a 
    inner join tbl_management_code b on a.management_code = b.management_code
    left outer join @tmpFx stat_fx on a.currency_key = stat_fx.currency_key
    where a.data_type_key = 1
    and a.date_key > 20111231
    group by b.country_key, a.currency_key, a.data_type_key) q
inner join @tmpFx stat_fx on z.[currency key] = stat_fx.currency_key
where q.[country_key]= z.[country key] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:52:23.907

我相信这是因为您在旧样式和新样式之间混合了连接格式（如 Nineside 建议的那样）。我能够用我自己的数据模拟一个类似的问题，并得到关于未绑定标识符的相同错误。请尝试以下方法。

```
declare @tmpFx table (currency_key int, effective_date_key int, expiration_date_key int, to_usd float, from_usd float)
    insert into @tmpFx(currency_key, effective_date_key, expiration_date_key, to_usd, from_usd)
    select [currency key], cast(convert(char(8),[effective date],112) as int), cast(convert(char(8),[expiration date],112) as int), [to usd], [from usd]
    from v_fx

declare @fixedFx table (currency_key int, to_usd float, from_usd float primary key (currency_key))
    insert into @fixedFx(currency_key, to_usd, from_usd)
    select [currency key], [to usd], [from usd] 
    from v_fx where [effective date] = '2012-01-01'

select z.[currency key], 
    case when z.[currency key] = 100001 then q.orig_amt else 0 end AS stat_usd_amt2
from [dim country] z
JOIN (
    select b.country_key, a.currency_key, a.data_type_key, sum(a.amount) AS orig_amt,
    sum(a.amount * stat_fx.to_usd) as stat_usd_amt, 
    sum((a.amount * stat_fx.to_usd) * stat_fx.from_usd) as home_curr_amt 
    from tbl_cohort a 
    join tbl_management_code b
        on a.management_code = b.management_code
    left join @tmpFx stat_fx
        on a.currency_key = stat_fx.currency_key
    where a.data_type_key = 1
      and a.date_key > 20111231
    group by b.country_key, a.currency_key, a.data_type_key
) q
    ON q.[country_key] = z.[country_key]
join @tmpFx stat_fx 
    on z.[currency key] = stat_fx.currency_key 
```

虽然我已留在您的第二个临时表 (@fixedFx) 中，但如果您根本没有使用其数据的计划，您可能希望将其删除。

# browser - How to export master secret from browser SSL/TLS session?

> ID：15013287
> 
> 赞同：4
> 
> 时间：2013-02-21T22:16:14.460
> 
> 标签：browser, ssl, encryption

I'd like to open a browser in Windows, go to an HTTPS site, and perform a sequence of actions while capturing packets with Wireshark. Then I want to use the encrypted packet capture to view the decrypted HTTP traffic. I know of many ways to do this (listed below) if you forego the browser, have access to the server, or add a MITM, but none of these work when you're restricted to the scenario above. Here are my typical approaches:

Server: For sites where I have the server private key, use Wireshark's built-in SSL decryption.

MITM: An SSL proxy (e.g., Burp suite) will allow viewing of decrypted traffic, but this requires using a different certificate and key pair than what is used by the server.

Browser: openssl's s_client can connect, make requests, and export the master secret, but this does not display the associated web pages or run javascript to compute subsequent request parameters.

Is there a way to export the master secret from a "normal" browser so that I can use it to later decrypt a packet capture of the browser session?

For example, is SSL/TLS state stored on disk when a browser is closed? If so, how would I access it? Is it accessible in memory while the browser is running (and if so how would I find it)?

Or, is all SSL state data stored by the OS (Windows) and not accessible directly?

Alternatively, is there a way to force a browser to use a particular master secret (and any other associated SSL state data like session ID, etc.) for a particular HTTPS connection? If so, I could set up the SSL session using s_client, and then transfer the key data to the browser and open a new connection in the same session. This would accomplish the same goal through different means.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T16:08:37.497

对于使用 NSS 库的浏览器（例如 Firefox），您可以设置`SSLKEYLOGFILE` [环境变量](https://developer.mozilla.org/en-US/docs/NSS_reference/NSS_environment_variables)，这将导致 NSS 保存必要的机密。然后，您可以直接将该文件与 Wireshark 一起使用。[在这里](https://developer.mozilla.org/en-US/docs/NSS_Key_Log_Format)可以找到更多信息。

# python - "Can't convert 'int' object to str implicitly" bug or what?

> ID：15013289
> 
> 赞同：0
> 
> 时间：2013-02-21T22:16:22.673
> 
> 标签：python, python-3.x

I've typed up this code but I can't see what's wrong with it.

```
if guess != number:
    number = str(number)
print('Nope. The number I was thinking of was ' + number) 
```

It keeps giving me "Can't convert 'int' object to str implicitly" even though I converted the integer into a string

Help out this noob please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:28:10.683

尝试这个：

```
>>> number='5'
>>> if raw_input('enter number:')!=number:
...    print('Nope. The number I was thinking of was {}'.format(number)) 
```

或者：

```
>>> number=5
>>> if int(raw_input('enter number:'))!=number:
...    print('Nope. The number I was thinking of was {}'.format(number)) 
```

使用[format 方法](http://docs.python.org/2/library/string.html#format-string-syntax)，您不需要进行显式类型转换来打印它，因为您没有连接两个字符串。不过，您需要确保在 if 语句中将字符串与字符串或 int 与 int 进行比较。

（如果您使用的是 Python 3，`raw_input`则[输入](http://docs.python.org/3.3/library/functions.html#input)相同的功能...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:56:15.583

你只需要把你的块`print`里面。`if`

```
if guess != number:
    number = str(number)
    print('Nope. The number I was thinking of was ' + number) 
```

在您的原始代码中，即使您猜对了，它也会打印出来，这意味着该`if`块没有执行，因此`number`仍然是一个整数。

您还可以使用字符串格式来避免转换`number`为字符串。

```
print('Nope. The number I was thinking of was %d' % number) 
```

[drawk](https://stackoverflow.com/a/15013455/1907098)提到了较新的字符串格式化方法。

# sql - Writing a SELECT statement to determine invalid values?

> ID：15013290
> 
> 赞同：1
> 
> 时间：2013-02-21T22:16:23.727
> 
> 标签：sql, sql-server-2008

I'm taking a Database Design course online this semester, and this is my first time using SQL. I graduated with a degree in communications, but I'm taking certain computer science classes to help myself. We're using Microsoft SQL Server 2008, and I'm stumped on the last problem of our exercises. First 6 were a breeze (basic select functions, ordering the results, using aliases to rename tables, etc), but the last one deals with null values.

It states:

> Write a SELECT statement that determines whether the PaymentDate column of the Invoices table has any invalid values. To be valid, PaymentDate must be a null value if there's a balance due and a non-null value if there's no balance due. Code a compound condition in the WHERE clause that tests for these conditions.

Don't even know where to begin. Ha ha. I typically learn better in a classroom setting, but my schedule would not allow it with this course, so any explanation would help as well! Any help is appreciated!

Dave D.

* * *

So which one is correct? It's difficult to break it down when there's two different answers :) On my day off I'm gonna head to the professor's office so she can explain it to me in person anywho lol

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:20:37.877

下面的代码将选择 PaymentDate 无效的记录

```
SELECT * FROM Invoices WHERE (PaymentDate is not null and BalanceDue is not null) or (PaymentDate is null and BalanceDue is null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T22:26:50.970

因为已经发布了一个不正确的答案，所以我将通过这个。

这是一个逻辑问题，即`PaymentDate`or之一`BalanceDue`为空。在 SQL 中，您使用表达式测试 NULL `IS NULL`。

所以，这个`where`子句看起来像：

```
where (PaymentDate is null and BalanceDue is not null) or -- this is the first clause
      (PaymentDate is not null and BalanceDue is null)    -- this is the second clause 
```

与 NULL 值（=、<>、<、<=、>、>= 或 in）的任何其他比较都返回 NULL 布尔值，这些值被解释为 FALSE。

祝你学习 SQL 好运。

# javascript - 如何在javascript中检查更大的价值？

> ID：15013291
> 
> 赞同：1
> 
> 时间：2013-02-21T22:16:34.383
> 
> 标签：javascript

有两个值'a'和'b'。我需要检查 a 是否大于 'b'

如果它是一个很大的值，它检查更大的值。但这里仅在点值上有所不同。它忽略点值

```
var a='20.796';
var b='20.190';
if (parseInt(a) > parseInt(b))
 {
alert("function can work");
return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:19:22.177

您将数字解析为[整数](http://en.wikipedia.org/wiki/Integer)。你想要有理数/实数。使用[`parseFloat`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)：

```
var a = '20.796';
var b = '20.190';
console.log(parseInt(a,10),parseInt(b,10));
console.log(parseFloat(a),parseFloat(b)); 
```

结果：

```
20 20
20.769 20.190

```

另外，`radix`如果您使用[`parseInt(string [, radix])`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt).

此外 - 如果`a`和`b`是数字，不要将它们的值保存在字符串中。相反，保存它们的值要容易得多：

```
var a = 20.796;
var b = 20.190; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:21:04.130

它忽略了点值，因为您在条件 if 语句中将它们解析为整数。你有几个选择。

1.  将变量定义为浮点数而不是字符串；删除 parseInt 函数调用。
2.  [将parseInt](http://www.w3schools.com/jsref/jsref_parseint.asp)交换为[parseFloat](http://www.w3schools.com/jsref/jsref_parsefloat.asp)调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:21:09.043

将您的数字定义为数字，并删除对 parseInt 的调用或使用 parseFloat。

```
var a=20.796;
var b=20.190;
if (a > b)
{
    alert("function can work");
    return false;
} 
```

或者

```
if (parseFloat(a) > parseFloat(b))
{
    alert("function can work");
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T22:23:24.970

在这里，您的解决方案是将字符串解析为浮点数而不是整数。例如：

```
var a = '20.796',
    b = '20.190';
if (parseFloat(a) > parseFloat(b)) {
    // TODO: .. code ..
} 
```

您的代码现在将字符串解析为整数。整数是整数值，不能包含十进制值，同时浮点数或浮点数可以包含十进制值。当您在浮点上调用 'parseInt()' 时，它会截断（或删除）十进制值并仅保留整个值。这显然不是你要找的。

PS：我猜你是 JavaScript 新手，所以我只想祝你学习好运。就个人而言，如果你学得好，我发现 JavaScript 是一门非常漂亮的语言。

# perl - How to run a background process with mod perl

> ID：15013293
> 
> 赞同：2
> 
> 时间：2013-02-21T22:16:42.477
> 
> 标签：perl, apache2, mod-perl

I am using perl to return data sets in XML. Now I have come across a situation where I need to run some clean up after sending a dataset to the client. But some where, in the chain of mod perl and Apache, the output gets held onto until my method returns.

I have attempted to clear the buffers with commands like.

```
$| =1;
STDOUT->flush(); # flush the buffer so the content is sent to the client and the finish hook can carry on, with out delaying the return.
if ($mod_perl_io){
    $mod_perl_io->rflush;
} 
```

Yet I still get no output until my method returns. I then found out that my browser my be waiting for the connection to close and found that setting the content type in the header should fix this.

```
rint $cgi->header(-type => "text/plain; charset=UTF-8", -cookie => $config->{'cookie'}); 
```

Still no luck, in fact I had always been sending the correct headers.

So I though the best option is to simply start a new thread and let my method return. But when I create a new thread.

```
use threads ('yield',
             'stack_size' => 64*4096,
             'exit' => 'threads_only',
             'stringify');
my $thr = threads->create('doRebuild', $dbconnect, $dbusername, $dbpassword,  $bindir);
sub doRebuild {
my ($dbconnect, $dbusername, $dbpassword,  $bindir ) = @_;
1;
} 
```

I get a segfault

> [Fri Feb 22 10:16:47 2013] [notice] child pid 26076 exit signal Segmentation fault (11)

From what I have read this is done by mod perl to ensure thread safe operation. Not sure if this is correct.

So I thought I'd try using {exe }

```
{exec   'perl', "$bindir/rebuild_needed_values.pl", qw('$dbconnect' '$dbusername' '$dbpassword');} 
```

From what I gather this is taking over the process from mod perl and not letting it return anything.

I know this isn't as specific as a question on stack overflow should be, but this sort of thing must be a common problem how have others solved it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:03:39.523

您可以使用 fork()，但是我喜欢推荐[http://gearman.org/](http://gearman.org/)进行后台处理。

像 Gearman 这样的解决方案要好得多，因为您的后台进程不在 Apache 的进程链中。

如果使用 gearman 实现，您的进程将在 Apache 重启后继续存在。它也更安全，因为 Gearman 环境可以在 chroot 监狱中运行。

使用 Gearman 的一个很好的副作用是您的后台进程可以从其他机器甚至其他语言调用。

Gearman 还可以在以后轻松地从您的流程中收集数据，并且您可以相当轻松地将进度信息反馈到您的 Web 应用程序。

# c# - Attempting to store a null list item into a dictionary

> ID：15013296
> 
> 赞同：-2
> 
> 时间：2013-02-21T22:16:55.200
> 
> 标签：c#, .net

If I take:

```
Dictionary<int,string> mydictionary = MyList.Where(x=> x.id == myid).ToDictionary(x => x.id, x=> x.string); 
```

and the list Where does not return any values (none found matching those parameters), what happens to my dictionary?

I ask because I can't check `if (mydictionary==null)` as `mydictionary` cannot be `null`.

I'm sure you're asking "Well why don't you test it yourself?", but I don't currently have access to my development environment.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:19:01.787

结果是一个`Dictionary<int, string>`带有 的实例`Count == 0`，即与

```
Dictionary<int, string> mydictionary = new Dictionary<int, string>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T22:18:37.210

你会得到空的（没有`KeyValuePair`）`Dictionary<int,string>`对象。 `ToDictionary`扩展方法创建新`Dictionary`对象并添加元素。

# zend-framework2 - zendframework 2 - load initial data and database schema

> ID：15013300
> 
> 赞同：0
> 
> 时间：2013-02-21T22:17:06.673
> 
> 标签：zend-framework2

I am looking for a way to initial our application quickly with current database schema which is defined and seed data to the database in zendframework 2\. This has been done quite well in the modern web framework like rails, play!, you name it but I don't know if it's existed in zf2\. I don't find any official documentation about this :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:27:08.633

使用 Phing 完成该任务。初始化（安装）您的应用程序不应由应用程序本身完成，而应由 Phing 等外部代理完成。

这是一个示例 phing 目标，说明如何安装数据库并使用初始数据填充它：

```
<target name="recreate-db">
    <echo message="[Data] Drop and recreate database..." />
    <pdosqlexec
            url="mysql:host=${db.project.host};dbname=${db.project.dbname}"
            userid="${db.project.username}"
            password="${db.project.password}"
            onerror="abort">
        DROP DATABASE IF EXISTS `${db.project.dbname}`;
        CREATE DATABASE `${db.project.dbname}`;
    </pdosqlexec>
    <echo message="[Data] Populate database with schema and start-data ..." />
    <pdosqlexec
            url="mysql:host=${db.project.host};dbname=${db.project.dbname}"
            userid="${db.project.username}"
            password="${db.project.password}"
            onerror="abort">
        <transaction src="${basePath}/db-versioning/schema.sql" />
        <transaction src="${basePath}/db-versioning/start-data.sql" />
    </pdosqlexec>
</target> 
```

# c# - No matter what I try: The I/O operation has been aborted because of either a thread exit or an application request

> ID：15013307
> 
> 赞同：1
> 
> 时间：2013-02-21T22:17:43.617
> 
> 标签：c#, wcf, exception, io

I try to build a simple async net tcp wcf tool which will open connection, send command, receive answer (a List with 0-10 string sentences), close connection.

The problem is, I get on (self-hosted) service side always - no matter what I try - **"The I/O operation has been aborted because of either a thread exit or an application request"**, on client side of course the corresponding errors like "Existing connection was closed by remote host" and timeouts and so on.

I tried alot for the past days but I can't get rid of it.

Client Side (running on .NET 4.0, called around once a sec):

```
void callservice(string mykey) {
ServiceReference1.Client c = new ServiceReference1.Client(); 
c.GetDataCompleted += c_GetDataCompleted;                             
            try {
            c.GetDataAsync(mykey);
            }
            catch (FaultException aa)
            {                    
                c.Abort();                   
            }         
       }

 private void c_GetDataCompleted(object sender, ServiceReference1.GetDataCompletedEventArgs e)
    {
        ServiceReference1.Client c = (ServiceReference1.Client)sender;
        c.GetDataCompleted -= c_GetDataCompleted;                       
        try
        {
            if (e.Result != null && e.Result.Length > 0)
            {
              ... }
            c.Close();
         }
         catch (Exception) {
           c.Abort();
         }
      } 
```

Server Side (running on .NET4.5):

```
 [ServiceBehavior(ConcurrencyMode=ConcurrencyMode.Multiple,
InstanceContextMode=InstanceContextMode.PerCall,IncludeExceptionDetailInFaults=true)]
   public class Service1 : IMyService
    {
 public async Task<List<string>> GetData(string whatkey)
        {    
          List<string> mydatalist = new List<string>(); 
          mydatalist= await Task.Run<List<string>>(() =>
        {       
        ...
        });
    return mydatalist;
  } 
```

What is going wrong there? Could it be that it is something not having to do with WCF at all? What could it be?

Server Side Exception:

> System.Net.Sockets.SocketException, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 The I/O operation has been aborted because of either a thread exit or an application request at System.ServiceModel.Channels.SocketConnection.HandleReceiveAsyncCompleted() at System.ServiceModel.Channels.SocketConnection.OnReceiveAsync(Object sender, SocketAsyncEventArgs eventArgs) at System.Net.Sockets.SocketAsyncEventArgs.FinishOperationAsyncFailure(SocketError socketError, Int32 bytesTransferred, SocketFlags flags) at System.Net.Sockets.SocketAsyncEventArgs.CompletionPortCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped) at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP) System.Net.Sockets.SocketException (0x80004005): The I/O operation has been aborted because of either a thread exit or an application request 3E3

One more interesting fact: SVCLogs show me that the I/O Exeption occurs after a timespan I can define in the

```
<connectionPoolSettings groupName="default" leaseTimeout="00:03:00" 
idleTimeout="00:02:39" maxOutboundConnectionsPerEndpoint="20" /> 
```

settings. In this example it will occur the first time after 00:02:39\. My interpretation: It closes open connections due to the settings there and that causes the Exception since the ReceiveAsync operation i.ex. was still open.

My question is so far why does client.close() not close it completely and why isn't it finished yet when it is calling the c_getdatacompleted-event? Why does the operation "hang out" for 02:39 minutes and does not come to an end?

(If I would not force the close down via the connectionpool settings I end up with hundreds of open operations if I use netstat i.ex. to display)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:38:01.473

异步 WCF 操作 ( `AsyncPattern=true`) 使用异步编程模型实现。也就是说，您使用两个异步操作（“BeginOperation”和“EndOeration”）实现一个操作（“Operation”）。`Task`客户端可以用一个（可能是`FromAsync`重载）包装这些操作

例如：

```
[ServiceContract]
public interface ISampleTaskAsync
{
    [OperationContract(AsyncPattern = true)]
    IAsyncResult BeginDoWork(int count, AsyncCallback callback, object state);

    int EndDoWork(IAsyncResult result);
} 
```

WCF 合同不返回`Task<T>`

然后，在客户端上，您可以执行以下操作：

```
var proxy = new Services.SampleTaskAsyncClient();
object state = "This can be whatever you want it to be";

var task = Task<int>.Factory.FromAsync(proxy.BeginDoWork, 
    proxy.EndDoWork, 10, state); 
```

有关更多信息，请参阅：

*   [http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontractattribute.asyncpattern.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontractattribute.asyncpattern.aspx)
*   [http://blogs.msdn.com/b/rjacobs/archive/2011/06/30/how-to-implement-a-wcf-asynchronous-service-operation-with-task-lt-t-gt.aspx](http://blogs.msdn.com/b/rjacobs/archive/2011/06/30/how-to-implement-a-wcf-asynchronous-service-operation-with-task-lt-t-gt.aspx)

如果你想用`Task<T>`，相信你不需要`AsyncPattern=true`。

# php - 协议主机显示在我们的错误日志/404 错误中

> ID：15013308
> 
> 赞同：2
> 
> 时间：2013-02-21T22:17:45.533
> 
> 标签：php, http-status-code-404, lamp, error-log

我的错误日志中一遍又一遍地出现错误。我在 cpanel 的错误日志以及 AW 统计报告中看到它。

错误如下所示：

```
/my_directory/'%20+%20protocol_host%20+%20'/images/greenthumb.png
/my_directory/'%20+%20protocol_host%20+%20'/images/imgsicon.png 
```

我每天都会看到数千次。

上例中的合法路径是这样的：

```
/my_directory/page.php?id=123454
(i.e www.my_site.com/my_directory/page.php?id=123454) 
```

这个protocol_host指的是什么以及为什么它会如此频繁地访问我的错误日志？

在发布此问题之前，我的研究使我找到了与 Windows 操作系统计算机上的搜索索引器相关的内容，但我看不到连接。

一如既往地提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:52:18.763

我和@Shal 在一起。尽管谷歌为您提供了一些“protocol_host”的结果，但我认为它们与您的问题无关。我猜这要么是生成链接的 PHP 代码中的错误，要么是错误的客户端（或黑客）正在访问您的站点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T12:20:25.593

查看错误 URL，似乎某些图像的路径是通过连接字符串动态生成的；但引号设置正确。

`/my_directory/'%20+%20protocol_host%20+%20'/images/greenthumb.png`
没有 URL 编码是
`/my_directory/' + protocol_host + '/images/greenthumb.png`

PHP 用于`.`连接字符串，但这里使用的`+`是 a。所以我猜想一些 JavaScript 代码会导致这个错误。

Check your JS resources!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T15:29:18.050

我猜想，您正在相对链接一些资源而没有前导斜杠。

例子：

```
<img src="images/foo.png" /> 
```

通常这会导致 url 像`http://example.com/images/foo.png`而不是`http://example.com/my_project/images/foo.png`但也可能有其他后果。

这只是一个猜测。

# api - Crunchbase 按国家/地区

> ID：15013312
> 
> 赞同：0
> 
> 时间：2013-02-21T22:18:06.957
> 
> 标签：api

我最初在 Crunchbase Google 组上发布了这个但没有得到回复，所以我在这里尝试。我知道通常在一堆不同的论坛上发布相同的内容是不行的，但老实说我确实尝试过。

现在谈谈我的问题。

我一直在为一个研究项目使用 Crunchbase API，并试图获得加拿大公司的完整公司列表（含详细信息）。以下是我尝试过的一些变体示例：

```
http://api.crunchbase.com/v/1/search.js?api_key=<key>&geo=canada&range=10000 
```

...返回 9 个结果。肯定不止这些。

```
http://api.crunchbase.com/v/1/search.js?api_key=<key>&geo=CAN&range=100000 
```

...返回 46 个结果，在匈牙利、罗马尼亚等地。

我也尝试了其他变体，但没有真正走得更远。

所以我确信有一种简单的方法可以吸引加拿大公司，但我显然没有得到它。

有人可以建议获得加拿大且只有加拿大的最佳参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:14:54.810

开发人员的答案（感谢 Vineet Thanedar）发布在此处：

```
https://groups.google.com/forum/?hl=en&fromgroups#!topic/crunchbase-api/OK8WjUcQltQ 
```

最后，因为我实际上需要非常彻底，我构建了一个 json 调用来检查所有 ~115K+ 的永久链接，寻找加拿大办事处并只返回符合该标准的公司的数据。这有点像霰弹枪的方法，我不会经常使用，但它确实有效。对于“按城市”的方法，我肯定会参考发布到 Google 小组的指南。

# sql - TIME datatype in SQL Server 2008 will not accept time from Access form

> ID：15013314
> 
> 赞同：1
> 
> 时间：2013-02-21T22:18:13.807
> 
> 标签：sql, sql-server-2008, ms-access, types, time

I am using an Access form on the front end, bound to a SQL Server 2008 table. I have an `Arrival Time` column of datatype `Time`.

But I get an ODBC error every time I try to save a record. Error states:

> *Invalid character value for cast specification.*

Time displays as `10:00:00 AM`. I have tried with and without a time format in the properties of the field, and with/without an input mask of various types. Does anyone know how to avoid this error?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:42:54.707

当我使用旧的“”ODBC 驱动程序将 SQL Server 2012 Express 中的“时间”字段链接到访问前端 (2010 accdb) 时`SQL Server`，它将其转换为文本字段，并且不允许更新。您可能会考虑使用`datetime`字段，或尝试更新的 ODBC 驱动程序。我相信“时间”字段是在 SQL 2008 中首次引入的，所以我猜旧的 ODBC 驱动程序不知道如何处理它。

# c++ - 什么是 在 C++ 预处理器输出中？

> ID：15013318
> 
> 赞同：12
> 
> 时间：2013-02-21T22:18:28.220
> 
> 标签：c++, c-preprocessor

**摘要**： C++ 预处理器输出包括一些行，上面写着`<built-in>`. 我很想知道这些是干什么用的。

**详情**：

`test.cpp`当我在名为with的文件中编译以下代码时`clang++ -E`（输出`g++`类似）：

```
#include <iostream>

int main()
{
  std::cout << "Hello World!" << std::endl;
  return 0;
} 
```

前几行输出如下：

> # 1 "test.cpp"
> # 1 "test.cpp" 1
> # 1 "<built-in>" 1
> # 1 "<built-in>" 3
> # 156 "<built-in>" 3
> # 1 "<command行>" 1
> # 1 "<内置>" 2
> # 1 "test.cpp" 2

我的问题是这些陈述是什么`<built-in>`意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:38:59.493

宏扩展为“1”，如果是内置的，则默认定义宏，例如，`__cplusplus`如果是命令行，则宏定义在命令行上，即`-DMACRO=1`。

您可以看到预定义宏的列表：

```
cpp -dM foo.h 
```

# assembly - Algorithm for assembly arithmetic

> ID：15013319
> 
> 赞同：0
> 
> 时间：2013-02-21T22:18:30.983
> 
> 标签：assembly, x86

Can someone check if my algorithm is correct

```
.data
    val1        BYTE        15h
    val2        WORD        8765h
    val3        DWORD   0FFFFh
    val4        WORD        7FFFh 
```

Implement the following expression in assembly language: `val3 = (-val4 + val3) – val2`

```
movzx eax, val4
neg eax
add val3, eax
movzx ebx, val2
sub val3 ebx 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:56:08.767

如果假设您的 16 位变量仅包含非负值，则代码看起来是正确的。

但是，最后一条指令中缺少逗号。

# c# - 仅使用实体框架和 MySQL 的服务器上的 NullReferenceException 错误

> ID：15013324
> 
> 赞同：1
> 
> 时间：2013-02-21T22:18:45.670
> 
> 标签：c#, entity-framework

使用 ASP.NET 和 JQuery 调用 Web 服务时，我收到 500 服务器错误。我查看回复：

部分回复：

```
{"Message":"Object reference not set to an instance of an object.","StackTrace":" 
```

抛出它的行是：

```
 db.SaveChanges(); 
```

在我的本地计算机上运行它工作的站点时，它只会在 AWS 上的 Windows Server 2012 上引发错误。另一件事是我无法远程调试它。

数据库已初始化，我添加到表中的数据也已初始化我已经仔细检查了正在输入到表中的数据，甚至手动输入数据以确保，但错误仍然存​​在。

**id**变量是从函数参数中检索的，如果未初始化，则代码不会运行。

代码：

```
 using (siteEntities db = new siteEntities()){
                         {
var c_weekly = (from weekly in db.counters_weekly
    where weekly.product_id == id
    select weekly).SingleOrDefault();

if (c_weekly == null) {
    counters_weekly cw = new counters_weekly();
    cw.count = 0;
    cw.product_id = id;
    cw.year = DateTime.UtcNow.Year;
    cw.week_number = GetIso8601WeekOfYear(DateTime.Now);

    db.counters_weekly.Add(cw);
     db.SaveChanges(); <== THROWS ERROR!!!!

    c_weekly = (from weekly in db.counters_weekly
    where weekly.product_id == id
    select weekly).SingleOrDefault();
}
long weekly_old_count = c_weekly.count;
c_weekly.count = weekly_old_count + Global.DataCounters[id];
db.SaveChanges();
} 
```

由实体 Framrwork 生成：

```
public partial class counters_weekly
{
    public decimal id { get; set; }
    public long product_id { get; set; }
    public int week_number { get; set; }
    public long count { get; set; }
    public int year { get; set; }
} 
```

任何解释。如果有一种简单的在线调试方法，我会做到的。在这方面真的需要你的帮助。谢谢。

数据库：MySQL

服务器：Windows Server 2012 EC2 AWS

使用：最新的 .NET 连接器

# c++ - 未能将指向 const 数据的指针作为函数模板参数传递

> ID：15013333
> 
> 赞同：3
> 
> 时间：2013-02-21T22:19:49.487
> 
> 标签：c++, templates

我有一个函数，它将函数指针作为参数，然后用它自己的参数调用该函数：

```
typedef int (*my_func_ptr)( int );

int foo( my_func_ptr f ) {
    static int i = 0;
    return i = f( i );
} 
```

有时，我需要将函数传递给`foo`不仅依赖于整数输入的函数来输出结果。

```
int add_strlen( int i, const char* s ) {
    return i + strlen( s );
} 
```

我可以重新编写上面的代码来使用`std::function`然后使用`std::bind`，但我最好在编译时创建这些函数，所以我使用模板。

```
template<const char* S>
int add_strlen( int i ) {
    return i + strlen( S );
}

/**
 * Usage:
 * char bar[] = "bar";
 * foo( add_strlen<bar> );
 */ 
```

使用指针作为模板参数时出现了我的问题。每当我使用指向任何类型的常量数据的指针作为模板参数时，它只有在传递的参数被声明为该类型的非常量数组时才能编译。

```
char char_array[]             = "works";
const char const_char_array[] = "error";
char *char_ptr                = "error";
const char *const_char_ptr    = "error"; 
```

Clang (ver. 3.0-6) 中的相关错误（`char_ptr`和的错误`const_char_ptr`是相同的）：

```
func_ptr.cpp:29:9: error: no matching function for call to 'foo'
        foo( add_strlen<const_char_array> );
        ^~~
func_ptr.cpp:6:5: note: candidate function not viable: no overload of 'add_strlen' matching 'my_func_ptr' (aka 'int (*)(int)') for 1st argument
int foo( my_func_ptr f ) 
```

谁能向我解释这是为什么？在我看来，模板参数`S`应该是 type `const char*`，这在任何其他情况下意味着我可以传入任何 const 或非 const 指针或类型的数组`char`并期望它工作。我希望能够将我的数组声明为`const`，因为我什至不想暗示它们应该在运行时进行修改。有没有办法让我的数组保持不变*并将*它们用作模板参数？

编辑：感谢一些帮助（以及更新版本的 Clang 错误更好），我能够确定提供具有内部链接的模板参数是问题的一部分。通过将上述变量声明为 extern，我可以毫无错误地使用`add_strlen<const_char_array>`。我还创建了一个简化的测试用例。它包括在下面：

* * *

```
#include <cstring>

typedef int (*my_func_ptr)( int );

int foo( my_func_ptr f ) {
    static int i = 0;
    return i = f( i );
}

template<const char* S>
int add_strlen( int i ) {
    return i + strlen( S );
}

extern char char_array[];
extern const char const_char_array[];
extern char *char_ptr;
extern const char *const_char_ptr;

char char_array[] = "foo";
const char const_char_array[] = "bar";
// assigning to string literal is deprecated
char *char_ptr = char_array;
const char *const_char_ptr = "baz";

int main(int argc, const char *argv[])
{
    foo( add_strlen<char_array> ); // works
    foo( add_strlen<const_char_array> ); // works
    //foo( add_strlen<char_ptr> ); // doesn't work
    //foo( add_strlen<const_char_ptr> ); // doesn't work
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:17:25.837

该错误似乎与您是什么以及不允许将其用作非类型模板参数有关，请参阅[IBM Linux Compilers 文档中的非类型模板参数](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fnon-type_template_parameters.htm)，他们有这样的说法：

> 非类型模板参数的语法与以下类型之一的声明相同：
> 
> *   积分或枚举
> *   指向对象的指针或指向函数的指针
> *   引用对象或引用函数
> *   指向成员的指针

`char_array[]`传入和工作的原因`const_char_array[]`是因为它们在编译时是恒定的，并且在程序运行时永远不会在程序下面改变。可以传入整型，但不能传入指向整型的指针。

模板期待`const char *`aka的类型`const char[x]`，但它也期待永远不会改变的东西，所以指针指向的位置可能永远不会改变。在编译器时传入时，您`const_char_array`将传递一个`char[6]`（“错误”）。位置永远不会改变，内容永远不会改变。但是，当传入`const_char_ptr`它时，它会得到一个`const char *`，虽然指针本身可能永远不会改变，但它指向的位置完全有可能会改变。它本身不是静态的。

```
char *_arr = new char[20];
const char* _ptr_arr = _arr; 
```

我们可以在这里同意 my`_ptr_arr`与 your 的类型完全相同`const_char_ptr`，但存储内容的位置可能会在运行时发生变化。在不允许的模板中，因为它可能需要模板的全新实例化，并且从创建模板时开始就不确定。A`char [6]`是静态的，不会改变。

```
foo( add_strlen<_ptr_arr> ); 
```

导致以下编译器错误：

```
test.cpp:36:5: error: no matching function for call to 'foo'
    foo( add_strlen<_ptr_arr>);
    ^~~
test.cpp:6:5: note: candidate function not viable: no overload of 'add_strlen' matching 'my_func_ptr' (aka 'int (*)(int)') for 1st argument
int foo( my_func_ptr f ) {
    ^ 
```

这不是很有帮助，我们想弄清楚为什么没有有效的重载，使用独立的函数编译代码而不作为函数指针传递，我们得到以下结果：

```
add_strlen<_ptr_arr>(0); 
```

将导致：

```
test.cpp:36:5: error: no matching function for call to 'add_strlen'
    add_strlen<_ptr_arr>(0);
    ^~~~~~~~~~~~~~~~~~~~
test.cpp:16:5: note: candidate template ignored: invalid explicitly-specified argument for template parameter 'S'
int add_strlen( int i ) {
    ^ 
```

所以显式指定的参数是无效的，具体来说，我们不能传入指向积分的指针。

# java - Java 泛型测试类

> ID：15013334
> 
> 赞同：0
> 
> 时间：2013-02-21T22:19:50.587
> 
> 标签：java, generics, binary-search-tree

我是泛型新手，我必须使用泛型实现二叉搜索树。我这样做了，但现在我想知道如何测试我编写的代码？我是否只是制作另一个课程并开始使用 bst 的方法？

任何帮助，将不胜感激。下面是我的代码，只是为了澄清。

```
public class BST<E extends Comparable<E>>
{
public Node<E> root;

public BST()
{
    root = null;
}
//insert delete find height
public void find(E s, Node<E> n)
{
    //empty tree, root is null
    if(n == null)
    {
        System.out.println("Item not present.");
    }
    //n is the node where s is, return n
    else if(n.getData().equals(s))
    {
        System.out.println("Item present");
    }
    //s is greater than n, look for s on the right subtree
    else if(s.compareTo(n.getData()) > 0)
    {
        find(s, n.getRight());
    }
    //s is less than n, look for s on the left subtree
    else
    {
        find(s, n.getLeft());
    }
}

public int height() 
{
    int count;
    return count = height(root); 
}

private int height(Node<E> n)
{
    int ct = 0;
    if(n == null)
    {

    }

    else
    {

        int left = height(n.getLeft());

        int right = height(n.getRight());

        ct = Math.max(left, right) + 1;
    }
    return ct;
} 

public void insert(E s) 
{
    root = insert(s, root);
} 

private Node<E> insert(E s, Node<E> T)
{
    //easiest case, empty tree, create new tree
    if(T == null)
    {
        T = new Node<E>(s,null,null);
    }
    //easiest case, found s
    else if(s.compareTo(T.getData()) == 0)
    {
        System.out.println("Item already present.");
    }
    //s is greater than T, insert on right subtree
    else if(s.compareTo(T.getData()) > 0)
    {
        T.setRight(insert(s, T.getRight()));
    }
    //s is less than T, insert on left subtree
    else
    {
        T.setLeft(insert(s,T.getLeft()));
    }
    return T;
}

public void delete(E d)
{
}

} 
```

和我的节点类

```
public class Node<E> 
{
   private E data;
private Node<E> left;
private Node<E> right;
private Node<E> parent;

   public  Node(E d, Node<E> r, Node<E> l) 
{
  data = d;

    left = l;
    right = r; 
   }
   public void setData(E d) 
{
  data = d;
   }
public E getData()
{
    return data;
}
   public Node<E> getRight() 
{
  return right;
   }
public void  setRight(Node<E> nd)
{
    right = nd;
}
   public Node<E> getLeft()
{
    return left;
}
public void  setLeft(Node<E> nd)
{
    left = nd;
}
public Node<E> getParent()
{
    return parent;
}
public void  setParent(Node<E> nd)
{
    parent = nd;
}
} 
```

我试着按照你说的做，这是我的测试类 public class BSTTest { public void testInsert() { int height; BST myTree = new BST(); myTree.insert(1); }

```
} 
```

但是当我编译时，我得到了意外类型的错误，它说如果找到一个 int 但需要在 BST myTree = new BST(); 行上引用 这意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:23:21.837

是的，创建一个名为 BSTTest 的类并创建方法来测试 BST 中的每个公共方法。

如果使用 JUnit，则可以使用注解和标准命名约定

```
public class BSTTest {
    @Test
    public void testInsert() {
        BST<String> bst = new BST<String>();
        String s = "hello";
        bst.insert(s);
        AssertTrue("I should get back what I put in!", bst.find(s));
    }

    @Test
    public void testDelete() {
        // etc...
    } 
```

}

然后，您可以在您的 java IDE（例如 IntelliJ IDEA）中运行此“单元测试”，或者，如果您设置了它，可以通过 maven: `mvn test`。

另外，我认为您的`find()`方法可以返回布尔值？

祝你好运！

# javascript - 将多个数组参数传递到 setTimeout 以进行幻灯片放映的问题

> ID：15013340
> 
> 赞同：1
> 
> 时间：2013-02-21T22:20:09.487
> 
> 标签：javascript, arrays, slideshow, settimeout, rotator

我正在尝试创建一个由 3 个旋转图像组成的简单幻灯片，这些图像将在最后一个显示后立即重新开始，时间间隔为 5000 毫秒。

```
<div id="slideshow">&nbsp;</div>

<script type="text/javascript">
var imageArray = ['Image1','Image2','Image3'];
var currentIndex = 0;

nextPic = function(currentIndex,slideshow) {

  var theHTML = '<img src="http://www.domain.com/Pics/Test-' + imageArray[currentIndex] + '.jpg">';
  document.getElementById("slideshow").innerHTML = theHTML;

  if (currentIndex < imageArray.length) {
      currentIndex = currentIndex + 1;
  }
    else {
      currentIndex = 0;
    }

  setTimeout("nextPic(" + currentIndex + ")", 5000);
}

nextPic(currentIndex, "slideshow");

</script> 
```

我发现的每个 Javascript 代码变体都产生了相同的结果：在最后一个图像 (Test-Image3.jpg) 之后，JS 尝试在重置回第一个图像之前显示未定义的图像 ("Test-undefined.jpg") . 除此之外，它工作得非常好，而且非常令人抓狂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T22:03:34.810

**使用 setInterval() 的更简洁的实现：**

```
var slide = function(){
   //check if we are at the end of the array, either stop or replay.                               
   if (currentIndex == imageArray.length){
        currentIndex = 0; //replay slideshow

   /*to stop slideshow add this:
   *     window.clearInterval(slideInt)     
   *     return false;
   */

   }
     var theHTML = '<img src="http://www.domain.com/Pics/Test-' +    
                    imageArray[currentIndex] + '.jpg">';
     document.getElementById("slideshow").innerHTML = theHTML;
     currentIndex +=1;
}

  var imageArray = ['Image1','Image2','Image3'];
  var currentIndex = 0;
  var speed = 5000;
  var slideInt = window.setInterval(slide,speed); //skip a photo every 5000 milis 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:21:58.247

您需要考虑在检查数组长度**后添加一个这一事实：**

```
if (currentIndex < imageArray.length - 1) {
  currentIndex = currentIndex + 1;
}
else {
  currentIndex = 0;
} 
```

或者

```
currentIndex += 1;
if (currentIndex >= imageArray.length)
  currentIndex = 0; 
```

但是，您实际上根本不需要传递参数，因为该函数可以只使用全局变量。（最好不要有，但既然你有，好吧，你不妨使用它。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:22:29.087

改成：

```
 if (currentIndex < imageArray.length - 1) {
      currentIndex = currentIndex + 1;
  } 
```

那是因为否则，它将尝试显示`imageArray[imageArray.length]`.

此外，而不是：

```
currentIndex = currentIndex + 1; 
```

你可以只使用：

```
currentIndex ++; 
```

# ios - 从 plist 刷新数据

> ID：15013341
> 
> 赞同：0
> 
> 时间：2013-02-21T22:20:10.533
> 
> 标签：ios, xcode, loops, plist, ibaction

我正在尝试根据数组中的项目数量从 plist 创建一个循环这是我的 plist 代码

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
<dict>
    <key>question</key>
    <string>2 + 2 = ?</string>
    <key>A</key>
    <string>2</string>
    <key>B</key>
    <string>4</string>
    <key>C</key>
    <string>3</string>
    <key>Ans</key>
    <string>B</string>
</dict>
<dict>
    <key>question</key>
    <string>2 + 4 = ?</string>
    <key>A</key>
    <string>3</string>
    <key>B</key>
    <string>6</string>
    <key>C</key>
    <string>9</string>
    <key>Ans</key>
    <string>B</string>
</dict>
</array>
</plist> 
```

所以我的数组中有两个项目。我希望屏幕加载第一个项目并显示它，然后使用界面中的按钮再次显示屏幕和第二个项目列表

```
- (void)viewDidLoad
{
[super viewDidLoad];
rootArray = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"question" ofType:@"plist"]];
currentQuestion = -1;
[self showNextQuestion];
}
-(void) showNextQuestion{
    currentQuestion++;
    int numItems = [rootArray count];
    NSMutableArray *question = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *A = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *B = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *C = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *CorrectAns = [NSMutableArray arrayWithCapacity:numItems];

for (NSDictionary *itemData in rootArray) {
    [question addObject:[itemData objectForKey:@"question"]];
    [A addObject:[itemData objectForKey:@"A"]];
    [B addObject:[itemData objectForKey:@"B"]];
    [C addObject:[itemData objectForKey:@"C"]];
    [CorrectAns addObject:[itemData objectForKey:@"Ans"]];
    self.questionasked.text =question[currentQuestion];
    self.answer1.text = A[currentQuestion];
    self.answer2.text = B[currentQuestion];
    self.answer3.text = C[currentQuestion];

    }
} 
```

我知道我必须创建某种循环并使用一个动作，但我不确定如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:28:31.000

您已经在 rootArray 中获得了所有内容，因此您不需要使用 NSMutableArrays 做所有这些事情。只是做类似的事情

```
NSDictionary *item = rootArray[currentQuestion];
self.questionasked.text = item[@"question"];
self.answer1.text = item[@"A"]; 
```

并设置一个调用 [self showNextQuestion] 的 UIButton；当你点击它时。

# php - MySQL 查询根据 3 个变量确定值

> ID：15013347
> 
> 赞同：-2
> 
> 时间：2013-02-21T22:21:04.387
> 
> 标签：php, mysql, sql, database

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:46:19.933

Sounds like these are in the same table? Is there any discriminator to tell you whether `name` holds an `accountnumber` or `accountname`?

In any even, with the following assumptions you could try an ugly self join:

1.  There are only two records with the record ID you want
2.  these are multiple columns in the same table holding different information in the ambiguous column names
3.  there is no better way to discriminate the record type

If so, something like this self-join should get you started:

```
SELECT t2.name as accountnumber from example_table as t1
INNER JOIN example_table as t2 on t1.recordID=t2.recordID
WHERE t1.name='$accountname' 
```

**EDIT** Note - if my assumptions are correct and if this is data you are inheriting, I feel for you and you should look to improve it's structure. If you are designing it like this, you may want to think about it some more first.

**EDIT 2**

You probably want to put an index on the `name` column (this is the discriminator I would used based on your example).

Your query can be something like this:

```
SELECT t1.value as accountnumber,t2.value as accountName from example_table as t1
INNER JOIN example_table as t2 on t1.record=t2.record
WHERE t1.name='accountNumber' and t2.name='accountName' 
```

See this SQL Fiddle: [http://www.sqlfiddle.com/#!2/97c2f/1](http://www.sqlfiddle.com/#!2/97c2f/1)

# regex - 正则表达式双方面组件

> ID：15013355
> 
> 赞同：4
> 
> 时间：2013-02-21T22:21:48.883
> 
> 标签：regex

抱歉标题混乱，我想不出正确的措辞。我试图了解正则表达式是否可以匹配不同的字符串，具体取决于是否捕获了先前的捕获组。

```
/th?u(e|r)sday/ 
```

这匹配`tuesday`，`thursday`但也`thuesday`和`tursday`。有没有办法在正则表达式中表明一个部分应该只匹配，如果前一个部分匹配......所以我想象一个潜在的语法，比如......捕获组中的数字`(?#:pattern)`在哪里`#`，如果捕获组捕获，则包含模式，否则跳过。`(!#:pattern)`如果`#`未捕获第 组，则类似的模式。这种发明的语法是为了展示我正在尝试做的事情。使用这种发明的语法，我可以像这样解决上面的问题......

```
/t(h)?u(!1:e)(?1:r)sday/ 
```

正则表达式中是否有任何这样的语法来实现这种类型的引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:32:56.280

此功能确实存在于某些正则表达式实现中，并且您示例中的正则表达式将这样编写：

```
/t(h)?u(?(1)r|e)sday/ 
```

显然这不是最好的例子，因为`/t(hur|ue)sday/`它是等价的而且更短，但在某些情况下它更有用。

查看[此高级正则表达式参考页面表格中的倒数第二个元素，](http://www.regular-expressions.info/refadv.html)[此处](http://www.regular-expressions.info/conditional.html)提供有关条件的更多信息。

*   句法：

    ```
    (?(1)then|else) 
    ```

*   描述：

    > 如果到目前为止第一个捕获组参与了匹配尝试，则“then”部分必须匹配整个正则表达式才能匹配。如果第一个捕获组没有参与匹配，则“else”部分必须匹配整个正则表达式才能匹配。

*   例子：

    `(a)?(?(1)b|c)`匹配`ab`，第一个`c`和第二个`c`在`babxcac`

根据同一页面，条件语句由[JGsoft 引擎](http://www.regular-expressions.info/jgsoft.html)、[Perl](http://www.regular-expressions.info/perl.html)、[PCRE](http://www.regular-expressions.info/pcre.html)和[.NET 框架](http://www.regular-expressions.info/dotnet.html)支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T22:25:49.940

为什么不直接使用更具体的析取呢？

```
/t(hur|ue)sday/ 
```

# safari - 剑道 UI 股票图表不显示在 Safari 上

> ID：15013357
> 
> 赞同：1
> 
> 时间：2013-02-21T22:21:52.940
> 
> 标签：safari, kendo-ui

我正在尝试使用 Kendo UI 创建股票图表。我创建了图表，它在每个浏览器（IE、FireFox、Chrome）上都能正常显示，除了 Safari，它只会显示默认占位符图表区域，但没有数据、数字、图表信息、范围滑块等。

这也是我在 jsbin 中的代码：http: [//jsbin.com/ucoliq/4/](http://jsbin.com/ucoliq/4/)

这仅在使用股票图表时发生，否则创建其他图表并使用 Safari 显示它没有问题。如果有人有任何可以帮助解决此问题的建议或想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:48:49.947

看起来 Safari 对日期格式嗤之以鼻。您可以通过执行以下命令来确认这一点：

```
new Date("2011-06");
> Invalid Date 
```

切换到更传统的格式（2011/06/01）似乎可以解决这个问题。

见[http://jsbin.com/ucoliq/6/edit](http://jsbin.com/ucoliq/6/edit)

# sql - 在 Web 服务中动态创建 SQL 更新命令

> ID：15013360
> 
> 赞同：0
> 
> 时间：2013-02-21T22:22:00.593
> 
> 标签：sql, web-services, sql-update

所以我不知道这是否可能，甚至是否可取，但我试图弄清楚如何在我的网络服务中创建一个可由用户动态构建的更新命令。基本上，目标是有一个包含 x 个列的表，并且用户应该能够更新任意数量的列，而不必为未更新的列传递 null 或现有值。例如，一个人可能想跑步

```
UPDATE calendar_table
SET title = 'Some new Title'
WHERE (id = 12344) 
```

而另一个用户可能想要执行此操作

```
UPDATE calendar_table
SET title = 'New Event', type = 'Meeting', note = 'Meet with new client'
WHERE (id = 12344) 
```

所以下面是我试图使用的，但我不断收到一个异常，指出“WHERE”附近有一个问题，这让我相信这与我试图处理更新字符串的方式有关

```
String MyConnStr = ConfigurationManager.ConnectionStrings["MainConnStr"].ConnectionString;
        SqlConnection connection = new SqlConnection(MyConnStr);
        SqlCommand Query = new SqlCommand("UPDATE dbo.calendar_table " +
            "SET @newText " +
            "WHERE (id = @appointmentID)", connection);
        Query.Parameters.Add("@newText", SqlDbType.VarChar).Value = note;
        Query.Parameters.Add("@appointmentID", SqlDbType.VarChar).Value = appointment;
        Query.CommandType = CommandType.Text;
        try
        {
            connection.Open();
            Query.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            Debug.WriteLine(ex);
        }
        finally
        {
            connection.Close();
            Query.Dispose();
        } 
```

任何帮助或想法将不胜感激，因为我能想到的唯一其他选择就是创建具有所有可能值的 Web 服务，然后将未更改的现有值与值一起传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:19:36.787

您的代码将假定知道将为给定更新设置哪些字段。因此，您可以将每个字段动态添加到`SET`子句和`Parameters`集合中。为每个字段使用参数还可以避免注释中提到的 SQL 注入问题。

根据您的示例代码的语法，我假设它是 C#。以下是您可以处理更新变量、用户定义的字段数的一种方法。

假设存在包含用户输入值的变量： `userInputTitle`、`userInputType`、`userInputNote`等。

该`id`字段包含在`SET`子句中以消除是否在`SET`子句中每个动态添加的字段之前添加逗号的问题。这样做的副作用是，即使用户没有定义任何字段，也可以运行更新。

顺便说一句，使用`using`而不是显式地尝试清理实现`IDisposable`接口的对象被认为是更好的做法，因此下面的示例被相应地重写。using 语句将关闭连接并处理连接和命令。此外， using`Parameters.AddWithValue()`避免了指定参数的数据类型的需要。

我没有测试过这段代码。

```
String MyConnStr =
        ConfigurationManager.ConnectionStrings["MainConnStr"].ConnectionString;
using (SqlConnection connection = new SqlConnection(MyConnStr))
{
    using (SqlCommand Query = new SqlCommand())
    {
        try
        {
            Query.Connection = connection;
            String sql = "UPDATE dbo.calendar_table SET id = @appointmentID";
            // The has-field-been-updated-by-user logic below assumes the
            // fields are strings.  Different logic might be necessary
            // for other data types.
            if (!String.IsNullOrWhitespace(userInputTitle))
            {
                sql += ", title = @title";
                Query.Parameters.AddWithValue("@title", userInputTitle);
            }
            if (!String.IsNullOrWhitespace(userInputType))
            {
                sql += ", type = @type";
                Query.Parameters.AddWithValue("@type", userInputType);
            }
            if (!String.IsNullOrWhitespace(userInputNote))
            {
                sql += ", note = @note";
                Query.Parameters.AddWithValue("@note", userInputNote);
            }
            // Additional fields...
            sql += " WHERE (id = @appointmentID)";
            Query.Parameters.AddWithValue("@appointmentID", appointmentID);
            Query.CommandText = sql;
            Query.CommandType = CommandType.Text;
            connection.Open();
            Query.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            Debug.WriteLine(ex);
        }
    }
} 
```

# c# - 动态 AND 可选方法参数

> ID：15013362
> 
> 赞同：2
> 
> 时间：2013-02-21T22:22:05.883
> 
> 标签：c#, dynamic, parameters, optional-parameters

所以C#支持可选参数：

```
void MethodName(string param = "optional!") { } 
```

和动态方法参数：

```
void MethodName(dynamic param) { } 
```

但不幸的是，您不能将它们一起使用（可选参数值必须是常量）：

```
void MethodName(dynamic param = new { p1 = "", p2 = 0M }) { } 
```

我过去曾使用过这样的东西：

```
void GenericAnonHandler<T>(IEnumerable<T> param)
{
    foreach(T item in param)
    {
        var typedItem = Cast(item, new { p1 = "", p2 = 0M });
        var p2 = typedItem.p2; // Hark, IntelliSense!
    }
}    
static T Cast<T>(object obj, T type)
{
    return (T)obj;
}
void CallingMethod()
{
    var list1 = new List<ThisType>() { ... };
    var list2 = new List<ThatType>() { ... };

    var anon1 = list1
        .Select(x => 
            new { p1 = x.sPropName, p2 = x.dPropName });

    var anon2 = list2
        .Select(x => 
            new { p1 = x.sPropName2, p2 = x.dPropName2 });

     var both = anon1.Concat(anon2);

     GenericAnonHandler(both);
} 
```

但这是很多额外的工作和特定于类型的编码，其中一个新类或仅使用动态会更容易，只要您知道动态类型应该是什么......但是动态不会提供 IntelliSense（并且合理所以）。

我更喜欢使用接口，但不能因为源类型（在此示例中：ThisType、ThatType）具有不同的属性名称，并且我无法控制它们（第 3 方程序集）。

但是，它们是部分类，因此我可以使用具有统一属性名称和不同属性名称的匿名类型的签名创建一个接口，在部分中实现该接口，为“其他”中的缺失值创建虚拟属性类型，然后根据类型从各个属性中提取值..

..但这也是太多的工作..特别是如果我正在努力创建3个新项目（界面，2个部分）。将匿名类型创建为真正的类并从之前的 2 种类型转换它会更简单。

所有这一切都是问是否有任何聪明的方法来完成我想要的；允许智能感知工作的可选动态参数？

我知道这是一个愚蠢的问题..基本上相当于：如何在不实际定义的情况下定义一个类..只是想知道除了 Cast(T,Type) 路线之外是否有任何巫师在袖手旁观:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:37:45.990

这里的答案是：**不要这样做。**

一个简短的定义就足够了：`struct StrDec { public string p1; public decimal p2; }`

随意使用许多这些小定义；最好使用实际记录它们所代表内容的名称。您将获得编译时检查、智能感知，并且您的代码将更具可读性，因为这是一种文档形式。您也可以改用 a `Tuple`，尽管我发现它们会使您的代码可读性降低，特别是如果它们需要进入高度嵌套的通用参数规范。尽管如此，元组仍然比动态+匿名类型破解要好。

一个好的起点将是...

*   从不使用`dynamic`：这是不得已而为之的功能。
*   永远不要使用可选参数：这也是不得已而为之的功能。

`dynamic`破坏了类型系统，本质上意味着你得到了静态类型语言的坏部分（冗长）而没有好的部分（快速、可靠、自我记录、智能感知）。这很少值得。

可选参数很糟糕，因为它们破坏了可封装性，这是自 1970 年代以来的结构化编程 101 - 包装可选参数意味着重复参数规范和重复默认值。此外，还有一个小的技术限制，即它们是由调用者解决的，而不是被调用者，除非你以一种相当不寻常的方式部署 dll，否则它不会咬你（这个限制对于 .NET 等大型库本身很重要）。相反，考虑（再次）小型的一次性`structs`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:04:47.857

我想我会放弃动态和可选部分，看起来你在这里并不需要它。创建一个新类型（类或结构，取决于您的需要）：

```
public class ThirdType
{
    public string P1 { get; set; }
    public decimal P2 { get; set ; }

    // you may want to add constructors
} 
```

然后创建一些映射器方法（扩展方法就可以了）

```
public static class MapperExtensions 
{
    public static ThirdType ToThirdType(this ThisType obj)
    {
        return new ThirdType() { P1 = obj.sPropName, P2 = obj.dPropName };
    }

    public static ThirdType ToThirdType(this ThatType obj)
    {
        return new ThirdType() { P1 = obj.sPropName2, P2 = obj.dPropName2 };
    }
} 
```

现在每当你调用你的方法时，

```
void MethodName(ThirdType param)
{
    // A.) do this...
    if (param == null)
        param = new ThirdType() { P1 = "", P2 = 0M };

}

// ... or B.) create an overload (preferable to me)
void MethodName()
{
   MethodName(new ThirdType() { P1 = "", P2 = 0M });
} 
```

只需使用扩展方法。我认为这样代码会变得更加清晰。

```
private void ExecuteForBoth(ThisType obj1, ThatType obj2) // dummy method, just for illustration
{
    MethodName(obj1.ToThirdType());
    MethodName(obj2.ToThirdType());
} 
```

我在没有智能的情况下写了这篇文章，抱歉有错别字。

# c++ - 使用 C++ TR1 从二项分布生成数字

> ID：15013365
> 
> 赞同：11
> 
> 时间：2013-02-21T22:22:14.610
> 
> 标签：c++, random, tr1

我正在尝试使用以下代码（取自互联网）从二项分布生成数字。它编译但一个执行它挂起。（我在 mac 上使用 g++。）

有人可以建议使用 C++ TR1 库功能从二项分布生成数字的工作代码吗？

```
#include <tr1/random>
#include <iostream>
#include <cstdlib>

using namespace std;
using namespace std::tr1;

int main()
{
  std::tr1::mt19937 eng; 
  eng.seed(time(NULL));
  std::tr1::binomial_distribution<int, double> roll(5, 1.0/6.0);
  std::cout << roll(eng) << std::endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:33:30.390

这是工作代码：

```
#include <iostream>
#include <random>

int main() {
  std::random_device rd;
  std::mt19937 gen(rd());
  std::binomial_distribution<> d(5, 1.0/6.0);
  std::cout << d(gen) << std::endl;
} 
```

你可以[在这里](http://liveworkspace.org/code/wukmW%240)查看它的结果，它适用于最新的 GCC 和 Clang 版本。请注意，通常最好使用 random_device 而不是 time 来获取种子。

用`--std=c++11`.

# c# - html中的C#脚本没有读取文件

> ID：15013376
> 
> 赞同：1
> 
> 时间：2013-02-21T22:22:47.230
> 
> 标签：c#, asp.net, html, visual-studio

我正在尝试获取一个文件，该文件具有要由 htmnl 读取的服务器名称（使用 ac# 脚本进行读取），但我无法让脚本将名称传递给 html，这是代码：

```
<%@ Page Language="C#" MasterPageFile="~/MasterPage3.master" Title="Services" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <center>
        <script runat="server">
            string[] server = new string[] { };
            void Button1_Click(Object sender, EventArgs e)
            {

                string[] server = System.IO.File.ReadAllLines(@"C:\server.txt");  //here i get the name of the server
         return server[1];
            }
        </script>
        <br />
        <table width="600px" style="border-color: Silver; border-style: solid; border: 1">
            <tr>
                <td style="background-color: LightBlue; text-align: center">
                    <a href="Default.aspx?SERVER=1">1</a>
                </td>
            </tr>
            <tr>
                <td style="background-color: LightBlue; text-align: center">
                    <a href="Default.aspx?SERVER=2">2</a>
                </td>
            </tr>
            <tr>
                <td style="background-color: LightBlue; text-align: center">
                    <a href='Default.aspx?SERVER=' <%#server[1]%>>JD5PKF1</a>
                </td>
                //but i cant get it to be read here
            </tr>
            <input type="button" value="All in one" onclick="location.href='Option2.aspx';">
        </table>
    </center>
</asp:Content> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:27:03.747

您的网站无权访问您的硬盘。如果要打开文件，必须将其放在可访问的目录中（例如将其放在与您的网站相同的目录下）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T22:32:50.640

您已经声明了服务器两次。

你没有使用的第一个。第二个你用文本填充，然后它就超出了范围。

很难说你的意图是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T22:38:08.777

除了其他人报告的错误之外，标签

```
<a href='Default.aspx?SERVER='<%#server[1]%>> 
```

格式错误，应为

```
<a href='<%# "Default.aspx?SERVER=" + server[1] %>'> 
```

并且它不检查 server[] 是否实际上在 index=1 处具有元素。

# php - preg_match_all 未正确匹配 href 部分

> ID：15013377
> 
> 赞同：0
> 
> 时间：2013-02-21T22:22:58.260
> 
> 标签：php, preg-match-all

我在使用 preg_match_all 匹配链接的 href 部分时遇到问题，目前它正在捕获 3 个部分（完整链接、仅 url、仅链接文本），这是完美的，但仅 url 部分正在捕获位于 href 之后的任何其他标签标签。

另外，如何使“href”文本不区分大小写？

**代码：**

```
$content = '<a href="http://www.google.com" target="_blank">Google</a> is a search engine. <a href="http://www.yahoo.com" title="yahoo" target="_blank">Yahoo</a> is a search engine.';

preg_match_all('/<a href="([^<]*)">([^<]*)<\/a>/', $content, $matches);

print_r($matches); 
```

**结果：**

```
Array
(
    [0] => Array
        (
            [0] => <a href="http://www.google.com" target="_blank">Google</a>
            [1] => <a href="http://www.yahoo.com" title="yahoo" target="_blank">Yahoo</a>
        )

    [1] => Array
        (
            [0] => http://www.google.com" target="_blank
            [1] => http://www.yahoo.com" title="yahoo" target="_blank
        )

    [2] => Array
        (
            [0] => Google
            [1] => Yahoo
        )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:37:10.657

您开始寻找 > 而没有考虑任何其他属性。尝试

```
/<a href="([^"]*)"[^>]+>([^<]*)<\/a>/ 
```

这现在将拉出 href，然后跳过其余属性，然后将 html 拉到下一个标签上

# java - 设置用于小程序启动的默认 JVM 参数

> ID：15013378
> 
> 赞同：3
> 
> 时间：2013-02-21T22:23:04.017
> 
> 标签：java, debugging, applet, remote-debugging, jnlp

我正在尝试远程调试 Java 小程序，但似乎无法使 -agentlib:jdwp JVM 参数正常工作。我已经尝试在 Java 控制面板中为使用的特定 JRE 指定它，并且我尝试通过用于启动小程序的 JNLP 文件来设置它。

为小程序启动设置 JVM 参数的正确方法是什么？特别是远程调试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:40:47.883

查看[类似的 SO question](https://stackoverflow.com/questions/868111/how-do-you-debug-java-applets)，我找到了以下答案...

有时要调试一些与安全相关的东西，浏览器插件环境与 appletviewer 太不同了。以下是在浏览器中有效调试小程序的方法：

**1) 获取二进制文件的调试信息**

从 JRE_HOME/lib 备份 .jar 文件

（下载并）安装与您的 JRE 相同版本的 JDK。

将 .jar 文件从 JDK_HOME/jre/lib 复制到 JRE_HOME/lib

JDK 中的文件编译时包含调试信息（源代码行号信息、变量名等），而 JRE 文件没有此信息。

如果没有这个，您将无法在调试器中有意义地进入核心类代码。

**2) 启用 Java 插件调试**

转到 Java 控制面板/Java/Java 运行时设置/查看/用户/运行时参数

并添加启用调试的选项。像这样的东西：

```
-Djava.compiler=NONE -Xnoagent -Xdebug -Xrunjdwp:transport=dt_socket,address=2502,server=y,suspend=n 
```

有趣的选项是端口（这里使用 2502，您几乎可以使用任何空闲端口，只需将其写下来以备后用）和挂起 - 如果您需要调试小程序启动、类加载等，请将其设置为“y” . 这样，当您访问小程序页面时，浏览器将显示为冻结，因为 JVM 立即挂起等待调试器连接。

**3) 使用您喜欢的 IDE 远程调试 Java 插件**

例如，在 Eclipse 中，选择 Run / Debug Configurations ... / Remote Java Application

单击“新建”按钮。

确保连接类型为“Socket Attach”，如果您的浏览器是本地的，则选择 localhost 作为主机，以及您之前选择的端口（示例中为 2502）。

您可能必须在源选项卡上的 JDK 中包含 src.zip 才能使 Java 核心类源可用。

保存配置，一旦您的浏览器正在运行插件（无论 JVM 是否暂停），运行远程调试器以连接到插件 JVM，并打开一个包含您的小程序源的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T16:05:43.710

此问题已针对 7_u40 进行了修复，可在 java.net 上进行早期访问。否则，Oracle 错误会说这是针对 Java 8 修复的！

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=8016005](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=8016005)

[http://jdk7.java.net/download.html](http://jdk7.java.net/download.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:26:56.507

您绝对需要在浏览器中运行小程序吗？因为调试小程序的常规方法是使用[appletviewer](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/appletviewer.html)。

* * *

根据 JPDA 文档（我假设您已经阅读过，基于您已经尝试过的内容），您应该能够在 Java 控制面板中指定代理。我从来没有尝试过这个，文档声称你不能以这种方式中断小程序启动（只需附加到正在运行的小程序），所以我所能做的就是祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T11:00:50.237

我有一个解决方法。好像是 JRE7_u21 没有打开端口，没有挂起，jconsole VM summary 没有显示在 Java 控制面板中配置的 VM 参数。

我降级到 JRE7_u17 并且一切正常。我在 Java 控制面板中的 VM 参数字符串是：

```
 -agentlib:jdwp=transport=dt_socket,address=8889,server=y,suspend=y,quiet=n,timeout=10000 
```

它似乎没有

```
 -Djava.compiler=NONE 
```

没有其他任何工作，甚至没有按照之前的建议替换 lib 文件夹。我什至尝试了一些注册表黑客（更改路径）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-24T10:43:51.953

您可以使用[JAVA_TOOL_OPTIONS](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/envvars.html#gbmsy)环境变量来传递默认的 JVM 参数。它会将参数传递给在浏览器中运行的小程序（而不仅仅是小程序）。这种方法甚至适用于 java 7u21 及更高版本。

# python - 书的 CSV 解析

> ID：15013380
> 
> 赞同：0
> 
> 时间：2013-02-21T22:23:06.317
> 
> 标签：python, django, algorithm, csv

我在解析一个 csv 文件的项目时遇到问题，该文件将包含教科书的部分和小节，看起来像这样：

```
Chapter, Section, Lesson  #this line shows how the book will be organized
Ch1Name, Secion1Name, Lesson1Name
Ch1Name, Secion2Name, Lesson1Name
Ch1Name, Secion2Name, Lesson2Name 
```

我正在为每个部分创建 Django 模型对象，并且每个部分都有一个 parent 属性，它是它所在的父部分。我无法想出一种方法来遍历 csv 文件，这样父作业是正确的。任何关于如何开始的想法都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:28:46.313

首先，希望您已经在使用该`csv`模块，而不是尝试手动解析它。

其次，从您的问题中并不完全清楚，但听起来您正在尝试在读取数据时从数据中构建一个简单的树结构。

那么，像这样的事情？

```
with open('book.csv') as book:
    chapters = collections.defaultdict(collections.defaultdict(list))
    book.readline() # to skip the headers
    for chapter_name, section_name, lesson_name in csv.reader(book):
        chapters[chapter_name][section_name].append(lesson_name) 
```

当然，这是假设你想要一个“关联树”——a `dict`of `dict`s。更普通的线性树，如 a `list`of `list`s，或“父指针”形式的隐式树，甚至更简单。

例如，假设您有这样定义的类：

```
class Chapter(object):
    def __init__(self, name):
        self.name = name

class Section(object):
    def __init__(self, chapter, name):
        self.chapter = chapter
        self.name = name

class Lesson(object):
    def __init__(self, section, name):
        self.section = section
        self.name = name 
```

您需要一个`dict`for each，将名称映射到对象。所以：

```
with open('book.csv') as book:
    chapters, sections, lessons = {}, {}, {}
    book.readline() # to skip the headers
    for chapter_name, section_name, lesson_name in csv.reader(book):
        chapter = chapters.setdefault(chapter_name, Chapter(chapter_name))
        section = sections.setdefault(section_name, Section(chapter, section_name))
        lesson = lessons.setdefault(lesson_name, Lesson(section, lesson_name)) 
```

现在，您可以选择一个随机课程，并打印其章节：

```
lesson = random.choice(lessons.values())
print('Chapter {}, Section {}: Lesson {}'.format(lesson.section.chapter.name,
                                                 lesson.section.name, lesson.name)) 
```

* * *

要记住的最后一件事：在此示例中，父引用不会导致任何循环引用，因为父引用没有对其子的引用。但如果你需要它怎么办？

```
class Chapter(object):
    def __init__(self, name):
        self.name = name
        self.sections = {}

class Section(object):
    def __init__(self, chapter, name):
        self.chapter = chapter
        self.name = name
        self.lessons = {}

# ...

chapter = chapters.setdefault(chapter_name, Chapter(chapter_name))
section = sections.setdefault(section_name, Section(chapter, section_name))
chapters[section_name] = section 
```

到目前为止，一切都很好……但是当你完成所有这些对象时会发生什么？它们具有循环引用，这可能会导致垃圾收集问题。不是无法克服的问题，但这确实意味着在大多数实现中对象不会被尽快收集。例如，在 CPython 中，通常会在最后一个引用超出范围时立即收集内容——但如果您有循环引用，则永远不会发生这种情况，因此在循环检测器的下一次通过之前不会收集任何内容。解决方案是使用 a[`weakref`](http://docs.python.org/2/library/weakref.html)作为父指针（或 s 的集合指向子指针`weakref`）。

# vb.net - 在 where 子句中使用日期条件查询不返回任何行，但在 SQL Developer 中有效

> ID：15013384
> 
> 赞同：1
> 
> 时间：2013-02-21T22:23:28.847
> 
> 标签：vb.net, oracle

如果有人可以提供帮助，请提前感谢...这让我发疯了！

我有一个像这样的查询

```
select * from tranHistory where itemid = 10 and created_dttm >= '21-Feb-2012'; 
```

很简单，对吧？从 vb.net 运行它不返回任何行。从 SQL Developer 运行它返回 99 行。我最初认为这是一个参数问题，因为查询过去看起来像

```
select * from tranHistory where itemid = 10 and created_dttm >= :tranHistoryDate; 
```

在原始查询中还有另外两个参数，我验证它们的顺序正确。我将其简化为这种形式，以消除尽可能多的变量。我们使用 Oracle 11g、Visual Studio 2010 和 Oracle ODP.Net 作为数据提供者。

我一生都无法弄清楚为什么会失败！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:57:28.030

为了消除连接问题，如果您从子句中删除对日期的限制`WHERE`，它是否会返回 vb.net 中的任何数据？

如果是这样，很可能是日期字符串解析问题。检查服务器上的 NLS 设置，或尝试使用与语言无关的日期格式，如下所示：

```
and created_dttm >= TO_DATE('20120221', 'YYYYMMDD'); 
```

如果删除日期导致没有数据返回，那几乎可以肯定不是您的查询有问题，而是与数据库的连接有问题。它是否连接到与 SQL Developer 相同的架构？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T22:57:19.513

`>= date'2013-02-21'` 在 SQL DEV 和您的代码中使用作品？如果是这样，你有隐式字符到日期转换的问题——这取决于你的会话设置......

# php - 为 csv 文件的每条记录构建 SQL 查询

> ID：15013391
> 
> 赞同：0
> 
> 时间：2013-02-21T22:23:55.287
> 
> 标签：php, sql, parsing, csv

今天是个好日子，

老实说，我被困住了...我想寻求您的帮助。我面临的挑战是这样的： 1\. 将 CSV 文件上传到服务器。2\. 打开 CSV 文件。3\. 解析它，显示数据并为 csv 文件的每条记录构建一个 sql 查询。

现在，我的问题是第 3 步。我已经在表格中解析和显示数据，但构建查询失败。任何帮助在这里表示赞赏！

这是我用来解析 csv 文件并显示数据的代码。我想寻求您的帮助，我应该如何更改代码以为文件的每条记录创建和执行 sql 查询。

```
if ( $file = fopen( "upload/" . $storagename , r ) ) {

            echo "File opened.<br />";

            $firstline = fgets ($file, 4096 );
            //Gets the number of fields, in CSV-files the names of the fields are mostly given in the first line
            $num = strlen($firstline) - strlen(str_replace(";", "", $firstline));

            //save the different fields of the firstline in an array called fields
            $fields = array();
            $fields = explode( ";", $firstline, ($num+1) );

            $line = array();
            $i = 0;

            //CSV: one line is one record and the cells/fields are seperated by ";"
            //so $dsatz is an two dimensional array saving the records like this: $dsatz[number of record][number of cell]
            while ( $line[$i] = fgets ($file, 4096) ) {

                $dsatz[$i] = array();
                $dsatz[$i] = explode( ";", $line[$i], ($num+1) );

                $i++;
            }

            echo "<table>";
            echo "<tr>";
            for ( $k = 0; $k != ($num+1); $k++ ) {
                echo "<td>" . $fields[$k] . "</td>";
            }
            echo "</tr>";

            foreach ($dsatz as $key => $number) {
                //new table row for every record
                echo "Record <tr>";
                foreach ($number as $k => $content) {
                    //new table cell for every field of the record
                    echo "<td>" . $content . " </td>";
                }
            }

            echo "</table>";
        } 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:31:55.323

尝试这个：

```
 foreach ($dsatz as $key => $number) {

    // New code here -lighthart
            echo "insert into table ("
                 .implode(",", $fields)
                 .") values ("
                 .implode(",",$number).");"

            //new table row for every record
            foreach ($number as $k => $content) {
                //new table cell for every field of the record
                echo "<td>" . $content . " </td>";
            }
        } 
```

# java - 使用 Guava 仅获取集合视图的元素，当有多个元素时无例外

> ID：15013396
> 
> 赞同：3
> 
> 时间：2013-02-21T22:24:03.767
> 
> 标签：java, guava

我想要两个功能。第一个将给定一个集合，返回满足谓词的元素。谓词可能非常昂贵，并且结果不会被完全消耗，所以我认为最好的做法是返回一个视图。因此，一旦实现，我的方法就是封装了 Guava 的 Collections2.filter 的东西：

```
Collection<MyElement> getInterestingElements(Collection<MyElement> allElements) {
    return Collections2.filter(allElements, new Predicate<MyElement>() {
        @Override
        public boolean apply(MyElement element) {
            return element.isInteresting();  // call expensive function
        }
    });
} 
```

（班级名称已更改以保护无辜者）

我的第二个函数将调用第一个函数并返回：

*   如果集合包含零个或多个元素，则为 null。
*   如果集合仅包含一个元素，则为集合的唯一元素。

也就是说，当且仅当此集合是单例时，此函数才会返回集合的内容。

一个天真的实现是：

```
MyElement getElementIfOnlyInterestingOne(Collection<MyElement> allElements) {
    Collection<MyElement> interestingElements = getInterestingElements(allElements);

    if (interestingElements.size() != 1){
        return null;
    }

    return Iterables.first(interestingElements, null);
} 
```

但是调用`size()`will （我认为）评估基础集合的所有元素的谓词，当我只对第一个元素感兴趣时，这是不可接受的。

我可以使用 Iterables.getOnlyElement() ，但是如果集合不是单例，这会抛出异常，这应该经常发生，我认为依靠异常来做到这一点是一种不好的做法。

所以我必须手动迭代，将第一个元素存储在一个变量中，如果有第二个元素，则返回 null。

我的问题是：这很好，但我不是在重新发明轮子吗？番石榴有太多的魔力，这个问题必须由某个`isSingleton`或`getSingleElementOrNull`某个地方来解决:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T11:26:43.507

“番石榴方式”是使用[`FluentIterable`](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/FluentIterable.html)'[`firstMatch`](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/FluentIterable.html#firstMatch-com.google.common.base.Predicate-)方法，它返回[`Optional`](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/base/Optional.html)实例。在你的情况下：

```
MyElement interestingOrNull = FluentIterable.from(allElements)
    .firstMatch(new Predicate<MyElement>() {
      @Override
      public boolean apply(MyElement element) {
        return element.isInteresting();
      }
    })
    .orNull(); 
```

*`null`（甚至更多的“番石榴方式”毕竟不会使用......）*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T23:01:25.727

如果必须按照描述实现该方法，其中必须返回除一个元素之外的任何过滤集合`null`，那么我能想到的最好的方法就是您已经建议的解决方案。

```
Collection<MyElement> interestingElements = getInterestingElements(allElements);
Iterator<MyElement> iterator = interestingElements.iterator();
if (!iterator.hasNext()) {
    return null;
}
MyElement first = iterator.next();
if (iterator.hasNext()) { // More than one element
    return null;
} else {
    return first;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T00:50:19.923

当然，上面的 FluentIterable 建议没有处理问题的 size>2 => null 部分。就个人而言，我会使用 Iterables.getOnlyValue 方法。有点乱，但是大大简化了代码，意图也很明确。

# python - 如何使用'def'获取输入值

> ID：15013400
> 
> 赞同：0
> 
> 时间：2013-02-21T22:24:14.603
> 
> 标签：python, global-variables, local, function

如果我使用全局变量。我可以这样写。

```
while True:
    name_str = input('Please give me the file name:')
    if name_str == 'table.csv':
        break
    else:
        print('Bad file name, please try again.') 
```

如何定义一个函数并从此函数获取输入？在开始函数中获取用户输入，调用main函数获取用户输入。

```
def get_name(n):
    x = input('Please give me the file name:')
    ...
    ...

def main():
    ...
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:31:49.990

你想把它放在一个文件（test.py）中：

```
def get_input():
    return raw_input('get file: ')

if __name__ == '__main__':
    print get_input() 
```

然后调用它：

$蟒蛇测试.py

注意两点：

1.  input() vs raw_input() -- input()[不安全](http://docs.python.org/2/library/functions.html#input)
2.  [在脚本环境](http://docs.python.org/2/library/__main__.html)中使用成语“if **name** ...”而不是具有 main() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:29:23.647

有点取决于您要完成的工作。

如果你的方法是从用户那里*收集*信息，你可以这样写：

```
def get_name():
    return input('Please give me the file name. ') 
```

如果您的方法正在*解析*来自用户的信息，它将*接受*文件名作为参数并编写如下内容：

```
def check_file_name(fname):
    if fname == 'table.csv':
        return True
    return False 
```

# iphone - 每次迭代后显示 UIImage

> ID：15013403
> 
> 赞同：0
> 
> 时间：2013-02-21T22:24:32.440
> 
> 标签：iphone, animation, uiimageview, uiimage, jquery-animate

我有一个功能可以更改需要很长时间才能完成的图像（大约 10 秒）。这个图像每次迭代都会改变，我想每次都显示它。

我想

```
self.imageView.image = [ /* function that changes image */ ]; 
```

但我接受为什么那行不通。

我还尝试了以下方法：

```
 self.imageView.animationImages = [NSArray arrayWithObjects:[self.brain newImage],
                                                            [self.brain newImage],
                                                             nil]; 
```

但是动画开始需要很长时间。

如何制作每次调用函数时更新的动画？

注意：`[self.brain newImage]`是返回 UIImage 的有效函数，并且每次都会更改。我没有包含实际代码，因为它很复杂而不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:24:13.273

您可以尝试使用此代码在图像数组上设置动画

```
if(imageArray.count>0)
{
    self.imageView.animationImages= imageArray;
    self.imageView.animationDuration = 1/20;
    self.imageView.animationRepeatCount =1;
    [self.imageView startAnimating];
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.0];
    [UIView commitAnimations];
} 
```

我已根据 FPS 将动画时间设置为 1/20，您可以将其设置为动画时间，并将动画重复计数设置为 0 以永久重复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:58:38.867

考虑在您的`-newImage`方法中添加一个块参数：

```
- (void)newImageWithSuccessBlock:(void (^)(UIImage *newImage))successBlock
{
    // generate the image on a background thread
    UIImage *brainImage = ...

    // if successful and the completion block isn't nil, run it
    if (successBlock) {
        // NB: if you do use a background queue,
        // remember to dispatch the completion block to the main queue (not shown)
        successBlock(brainImage)  
    }

} 
```

然后，在从视图控制器生成新图像时，您可以更新图像视图：

```
[self.brain newImageWithSuccessBlock:^(UIImage *newImage) {

    NSMutableArray *mutableImageArray;
    if (self.imageView.animationImages) {
        mutableImageArray = [self.imageView.animationImages mutableCopy];
    } else {
        mutableImageArray = [NSMutableArray array];
    }

    [mutableImageArray addObject:newImage];

    self.imageView.animationImages = [NSArray arrayWithArray:mutableImageArray];

}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:39:33.520

如果该`animationImages`方法适合您，您可以通过提前创建图像来使其启动更快：

```
//-- preload images (e.g., while the app is loading)
NSArray* images = [NSArray arrayWithObjects:[self.brain newImage],
                                                        [self.brain newImage],
                                                         nil];
//-- display animation
self.imageView.animationImages = images; 
```

请记住，该`animationImages`方法有局限性，主要是您需要提前创建所有图像 - 这可能会占用大量内存。

一种替代方法是使用 a`CALayer`和 a `NSTimer`：每次触发时间时，您将其设置`layer.contents`为下一个图像。有关此方法的更多信息，请参阅[此](http://mysterycoconut.com/blog/2011/01/cag1/)。

对于更高级的方法，您可以求助于 cocos2d 或 openGL，但这可能是矫枉过正。

# node.js - 如何使用 node-neo4j 从节点获取/删除所有关系？

> ID：15013406
> 
> 赞同：0
> 
> 时间：2013-02-21T22:24:47.840
> 
> 标签：node.js, neo4j, node-neo4j

我需要从neo4j db中删除一个节点，但是根据文档，必须首先删除所有节点的关系，所以我想我需要获取这些关系的列表，然后一个一个地删除它们。node.getRelationships(type) 返回特定类型的关系——但不是所有类型的所有关系。为类型传递 '*' 不起作用。

有没有更简单的方法来删除节点或获取关系列表？

直接在 cypher 中执行此操作看起来相当容易，所以我总是可以依靠它，但如果可能的话，我想使用 node-neo4j 库。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:50:58.073

你能通过`node.delete(force=true)`节点吗？否则，您可以调用该`node.all()`函数来获取所有关系。

对不起，如果语法看起来不对，JS/CS 不是我的母语。

# java - OOP：简单游戏设计中的对象继承和组合关系

> ID：15013410
> 
> 赞同：0
> 
> 时间：2013-02-21T22:24:58.010
> 
> 标签：java, oop, inheritance, composition

我目前正在学习 Java 有几个原因，但其中一个主要原因是它是一种非常面向 OOP 的语言，而用 Java 编写代码确实有助于我理解 OOP 编程背后的核心概念。

但是，我很难定义我的类之间的关系。我理解继承和组合之间的区别，但是我很难看到整个画面，以及我的所有类应该如何作为一个整体一起工作。

我如何使用 OOP 编写简单的井字游戏的示例；

1.  创建一个`Game`类 - 创建一个类的实例`gameBoard`，决定谁先开始，跟踪比赛的输赢，开始和结束比赛。

2.  创建一个`gameBoard`类 - 更新井字棋盘，确定下一个玩家的回合，如果移动是合法的，并确定何时有赢家

3.  创建一个抽象`Player`类 - 保存玩家的棋子（X 或 O），并包含一个将`gameBoard`实例作为参数并将玩家所做的移动传递给实例引用的方法

4.  创建一个`Human`扩展类的`Player`类。包含处理来自键盘的玩家输入的方法

5.  创建一个`Computer`扩展类的`Player`类。有一个方法，该方法将`gameBoard`实例作为参数并分析游戏板的获胜动作、阻挡动作或任何其他动作，然后进行动作

这是我会采取的方法。但是，我在将所有课程联系在一起时遇到了一些麻烦。在某些情况下，关于某些方法和字段应该属于哪里的界限似乎有点模糊。

**编辑：**修改后的问题：

在为我的类确定清晰、已定义的角色时，什么是一种好的方法，而不是太忙于定义和封装我的程序的各个方面？我的很多对象可以从其他类调用来执行每个类具有的特定功能，即`Player`更新`gameBoard`、`gameBoard`更新`Game`，但我不知道这是否是一种好的做法，或者会通过传递来使代码变得僵硬且难以维护对象引用过多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:46:10.777

Martyn，尝试将问题中的每一个关系归类为“is-a”或“has-a”。这将更容易解决类关系。

例如，

```
Game has-a Gameboard
Human is-a Player
Computer is-a Player 
```

接着

```
Game has-a Player1
Game has-a Player2 
```

等等

看看你是怎么做的，你会回答很多你自己的问题。祝你好运！

编辑：你写的：`Player`更新`gameBoard`，`gameBoard`更新`Game`

你能不能这样做，让“游戏”在游戏控制中更加重要？

```
Game asks player to select next move from GameBoard
Player looks on Gameboard to see possible legal moves
Player selects a legal move and returns it to Game
Game plays the move on the GameBoard
Game checks the Gameboard to see if any player has won
if not, Game ends the turn and goes to the next player
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T22:47:25.510

一个游戏有两个玩家和一个棋盘。在棋盘说游戏结束之前，它应该轮流询问每个玩家以发现他们想要的动作是什么。然后它应该将该动作传递给董事会。如果董事会接受它，因为它是有效的，那么它就是下一个玩家轮到的。如果棋盘因为无效而拒绝该棋步，则它会要求同一玩家再次走棋。

记住这一点，一些伪代码可能采用以下形式；

```
class Game {
    Player p1, p2, current;
    Board board;

    public Game() {
        Board = new TicTacToeBoard();
        p1 = new Human('X');
        p2 = new Compooterwooter('O');

        current = p1;
    }
}

abstract class Player {
   char label;
   Move getMove(Board);
}

abstract class Board {
   boolean makeMove(Move);
   Position getPosition();
   boolean gameIsUp(); /* has the game finished? */
}

class Move {
   int x, y;
}

class Position {
    boolean isVacant(int x, int y);
    char whoHasPlayed(int x, int y);
}

class Human extends Player {
    Move getMove(Board b) { /* ask user for move */ }
}

class Compooterwooter extends Player {
    Move getMove(Board b) { /* compute move */
}

class TicTacToeBoard extends Board {
   boolean makeMove(int x, int y) { /* check valid move */
} 
```

这不是最有用的答案，但我只是在推测，这似乎至少是一个有点推测的问题。希望它会帮助你的思想朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T22:57:45.363

从下面的代码开始。

然后让它工作，这样你就可以从命令行手动播放双方。

然后将您的代码重构为一些播放器类以及需要的任何其他内容。

```
enum State {
    x('x'),o('o'),vacant(' ');
    State(char c) {
        this.c=c;
    }
    char c;
}
class Game {
    Game() {
        for(int i=0;i<3;i++)
            for(int j=0;j<3;j++)
                board[i][j]=State.vacant;
    }
    void makeMove(int i,int j,State state) {
        if(board[i][j]!=State.vacant)
            throw new RuntimeException("bad move!");
        board[i][j]=state;
    }
    boolean isGameOver() {
        // ...
        return false;
    }
    public String toString() {
        String s="";
        for(int i=0;i<3;i++) {
            s+='|';
            for(int j=0;j<3;j++)
                s+=""+board[i][j].c+'|';
            s+='\n';
        }
        return s;
    }
    final State[][] board=new State[3][3];
}
public class So15013410 {
    public static void main(String[] args) {
        Game game=new Game();
        System.out.println(game);
        game.makeMove(0,0,State.x);
        System.out.println(game);
        game.makeMove(0,1,State.o);
        System.out.println(game);
    }
} 
```

# android - android openGL if 语句 nd onTouch 事件出现问题

> ID：15013414
> 
> 赞同：0
> 
> 时间：2013-02-21T22:25:18.150
> 
> 标签：android, opengl-es, if-statement, floating-point

我在 Android openGL 中创建了一个 3D 立方体，我可以使用 onTouch 事件打开 X 轴，但我想将它用作 UI，例如我试图获取它，以便当一张脸面向相机时如果您点击它作为 onClick 侦听器的表面，但我在使用 if 语句来检查面向相机的面时遇到问题，我的整个课程如下：

```
public class GLCubeEx extends Activity {

GLSurfaceView ourSurface;
GLCubeEx This = this;

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    ourSurface = new GLSurfaceView(this);
    ourSurface.setRenderer(new GLCubeRenderer());
    setContentView(ourSurface);

}
public boolean onTouchEvent(MotionEvent event) {

     float touchedX = 0;
     float touchedY = 0;

     Button btn = new Button(this);

        LinearLayout.LayoutParams paramsd = new LinearLayout.LayoutParams
        (LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        paramsd.height = 60;
        paramsd.width = 120;

        btn.setLayoutParams(paramsd);
        addContentView(btn, paramsd);

    if (event.getAction() == MotionEvent.ACTION_DOWN){
         GLCubeRenderer.xAngle = (touchedX - event.getX())/2f;
           GLCubeRenderer.yAngle = (touchedY - event.getY())/2f;

       } else if (event.getAction() == MotionEvent.ACTION_MOVE){
           GLCubeRenderer.xAngle = (touchedX - event.getX())/2f;
           GLCubeRenderer.yAngle = (touchedY - event.getY())/2f;

           touchedX = event.getX();
           touchedY = event.getY();

}

 **EDIT here, thaks to Laurence pointing out** 
    if(GLCubeRenderer.xAngle > -118f && GLCubeRenderer.xAngle < -65f){

        btn.setText("working");

    }

    String s = Float.toString(GLCubeRenderer.xAngle);
    btn.setText(s);

    return true;

}

public void onPause() {
    super.onPause();
    ourSurface.onPause();
}

public void onResume() {
    super.onResume();
    ourSurface.onResume();
} 
```

}

我遇到的问题是我的运动事件中的 if 语句检查变量 xAngle （这是在滑动屏幕时创建并用于旋转立方体时创建的浮点数）是否在两个值之间没有被触发，btn 是应用程序中显示 xAngle 值的按钮，我不明白为什么它没有被触发任何我没见过的想法或明显的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:36:08.360

每个触摸周期都会将按钮的文本设置为角度，您如何检查您的 if 语句是否正在执行，因为在您将文本设置为工作后，它的 gona 立即将其设置为角度，我不确定，只是一些在这里输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:51:55.620

这是不可能的：

```
GLCubeRenderer.xAngle < -118f && GLCubeRenderer.xAngle > -65f 
```

你可能的意思是：

```
GLCubeRenderer.xAngle > -118f && GLCubeRenderer.xAngle < -65f 
```

# javascript - javascript 仅在代码中的某一行以下停止工作

> ID：15013416
> 
> 赞同：0
> 
> 时间：2013-02-21T22:25:23.960
> 
> 标签：javascript, href, getelementbyid

奇怪的是代码可以工作，并且在某一行以下没有任何工作，甚至没有警报，并且变量失去了价值！

代码很简单：

```
// retrieving scroll position from a hidden text input<br>
var scrollPos = document.getElementById("scrollPosition").value;

// at this point scrollPos value is a certain number :)

// so i'm successfully able to change the HREF accordingly! :)<br>
document.getElementById("page1").href = "page1.php?pos="+scrollPos;<br>
document.getElementById("page2").href = "page2.php?pos="+scrollPos;<br>
document.getElementById("page3").href = "page3.php?pos="+scrollPos; // same value to all!

document.getElementById("page4").href = "page4.php?pos="+scrollPos;<br>
// at some weird point scrollPos loses its value! :( 
```

实际上，故障点之后没有任何效果，甚至没有警报（“测试”）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:28:02.123

如果您调用`document.getElementById("something")`，并且页面上没有带有 id 的元素`"something"`，则 Javascript 将返回`null`。如果您随后尝试访问 的`href`属性`null`，Javascript 将引发异常并停止所有处理。

您可以在浏览器中打开 Javascript 控制台以查看错误消息，例如`TypeError: Cannot set property 'href' of null`.

您可以做这样的事情来避免这个错误和必须硬编码一般的页数：

```
var page, elem;
for (page = 1; elem = document.getElement("page"+page); ++page) {
  elem.href = "page" + page + ".php?pos=" + scrollPos;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T22:31:24.767

你可以试试这个：

```
var p4 = document.getElementById("page4");
if (p4) p4.href = "page4.php?pos="+scrollPos; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T21:57:40.097

我仍在为此苦苦挣扎，我认为 Mark Reed 和 Maël Nison 解决了这个问题，但我仍然无法弄清楚为什么会这样。

基本上我在网站上有 2 个按钮，其中包括带有下拉面板的子菜单链接（我使用“anylinkmenu”作为下拉菜单），我必须在 anylinkmenu.js 中添加一些代码来添加“id”每个“a href”元素，没什么大不了的。

只有第一个下拉列表的“id”可以被我的“js”代码识别，第二个下拉列表不适用于甜甜圈！

再次感谢你的帮助！！

# javascript - Highcharts 蜘蛛网图表在调用 series.setData 后调整轴的大小

> ID：15013417
> 
> 赞同：1
> 
> 时间：2013-02-21T22:25:24.757
> 
> 标签：javascript, highcharts

我有一个 Highcharts 蜘蛛网图表，其中包含我每 X 分钟通过 ajax 更新的系列数据。当我最初加载页面时，它看起来像这样：

![初始加载时的蜘蛛网图表](../Images/6ef8bd0e4b02e36f4413d77e13049a13.png)

但是，在对系列数据进行第一次和后续更新后，图表如下所示：

![使用相同数据首次和后续更新后的蜘蛛网图表](../Images/dad33f5c5ae17457d7869fa9e0f6c539.png)

请注意，在示例中，用于更新图表的系列数据与用于初始化图表的原始数据完全相同。

这是一个[重现行为的 jsFilddle](http://jsfiddle.net/fC2GR/1/)。这是更新系列数据的行：

```
chart.series[0].setData([14, 10, 1, 7, 7]); 
```

重现步骤：

1.  加载页面
2.  点击“设置新数据按钮”

更新图表时我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:49:14.753

由于某些意想不到的原因，您必须逐步创建新的 Highchart 以及更新图表。

查看我的演示[http://jsfiddle.net/pm7Cn/1/](http://jsfiddle.net/pm7Cn/1/)

看看我如何在函数之外声明我的变量，以便能够在整个脚本中访问它们。

```
var chart;
var flagIn = 1;
var options, series2, title2; 
```

另外，请记住我初始化了我的“选项”变量，然后我创建了 Highcharts 对象

```
options = {....}
chart = new Highcharts.Chart(options); 
```

为了创建新图表，我在 series2 和 Title 2 中推送我的新数据，然后我尝试更新我的图表对象。

```
options.series = series2;
options.title = title2;
chart = new Highcharts.Chart(options);
console.log("update"); 
```

**更新了** [http://jsfiddle.net/pm7Cn/2/](http://jsfiddle.net/pm7Cn/2/) 在上面的小提琴中，您可以看到如何一遍又一遍地加载相同的数据多边形

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:13:03.987

您是否尝试将 min/max 值或 tickInterval 设置为 5 ？

[http://api.highcharts.com/highcharts#yAxis.tickInterval](http://api.highcharts.com/highcharts#yAxis.tickInterval)

# javascript - 在 javascript 中启用 OOP 的简单方法是什么？

> ID：15013418
> 
> 赞同：0
> 
> 时间：2013-02-21T22:25:28.170
> 
> 标签：javascript, performance, oop

**更新**

自从我提出这个问题以来，河里已经流了很多水，我已经切换到使用模块模式和 CommonJS 文件格式 + [Browserify](https://github.com/substack/browserify-handbook#node-packaged-modules)并停止尝试使 Javascript 更像是一种 OOP 语言。我已经接受了 Javascript Prototypal Inheritance，`Object.create`而且我的生活现在比以往任何时候都好！是的，几乎感觉就像我加入了一个`new Religion`，对不起，`religion`......在 JS 中对我来说不再是“新的”。

剩下的问题只是历史......

* * *

我在javascript中玩了一段时间的OOP。

老实说，我的感觉是大多数时候不需要真正的 OOP。我以前用其他语言用 OOP 做的事情，大多数时候可以用 javascript 中的函数和闭包来完成。

此外，为了模仿 OOP 方法，有很多方法可以手动制作或使用那里找到的小型库。

我想尝试一下 OOP，但我发现的所有解决方案在我看来并不那么简单，有些人要求我添加一个 init 方法，或者在初始化期间他们正在对函数进行特殊检查以了解它们是否需要覆盖。虽然这很聪明，但从一个类中简单地创建一个对象似乎有点过分。

所以我提出了这个解决方案：

**更新：这是一个实验，不打算替换任何出色的现有库或用于生产**

```
var Nexus = function() {}; // helper function to avoid create an instance of the child class
Object._extend = function(child, parent) {

  var base = Nexus.prototype = parent.prototype;
  child.prototype = new Nexus();

  var cp = child.prototype;
  cp.constructor = child;
  child._parent = base;
};

/* THIS THEN IS USED LIKE THIS */

var Person = function (name) {
  this.name = name;
  console.log('Person constructor');
};

$.extend(Person.prototype, {
  walk : function () {
    console.log(this.name + ' is Walking!!');
  }

});

var Student = function () {
  // call the base class constructor
  Student._parent.constructor.apply(this, arguments);
  console.log('Student Constructor');
}

Object._extend(Student, Person);

$.extend(Student.prototype, {
  walk : function () {
    console.log(this.name + ' walks like Student');
    //calling a parent method
    Student._parent.walk.apply(this, arguments);
  }
});

var p = new Person('Jon Doe');
p.walk();
console.log(p instanceof Person) // true

var s = new Student('Joan Doe');
s.walk();
console.log(s instanceof Person) // true
console.log(s instanceof Student) // true 
```

如您所见，这种方法满足**了 OOP 的要求。**

1.  Child obj 也是父类的实例以及子类的实例
2.  Child obj 可以调用父类的方法来访问覆盖的方法。（与 CurrentClass._parent 和 BaseClass.prototype 的唯一区别是，第二个要求类的使用者实际知道父类的名称，我想避免这种情况）。

3.  创建构造函数必须很简单，在这种情况下......函数本身就是构造函数。不需要简单的初始化方法......在实例化期间自动调用。

**我遵循的方法的缺点：**

1.  我需要一个虚拟类 Nexus（我真的不喜欢实例化基类的对象只是为了让继承链正常工作...... Nexus 做到了）
2.  我没有提供对正确设置上下文的覆盖方法的访问。由消费者使用调用或应用来更改上下文。

**拥有额外的 Nexus 虚拟函数来创建正确的原型链是内存管理的问题吗？**

我没有时间进行适当的测试，而且我的继承链不超过 3 级。所以那里的影响似乎很小。

我本来可以为此使用一个库，但是直接制作它似乎非常简单，并且仍然将一些代码放在构造函数中，我看不到使用额外的 init 类进行初始化的好处。

您认为添加虚拟 Nexus 功能会产生什么明显影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:39:45.860

> 拥有额外的 Nexus 虚拟函数来创建正确的原型链是内存管理的问题吗？

不。您刚刚在内存中浮动了一个（一个！）附加对象。将它移动到`Object._extend`函数中，它甚至会自动进行垃圾收集。

但是，`Nexus`您应该只使用[`Object.create`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create). 另请参阅[了解 Crockford 的 Object.create shim](https://stackoverflow.com/q/10141086/1048572)。

# c++ - 具有显式模板参数的 C++ 函数对象

> ID：15013419
> 
> 赞同：5
> 
> 时间：2013-02-21T22:25:30.943
> 
> 标签：c++, boost, c++11

我有一个带有显式（即非推导）模板参数的函数对象，定义如下：

```
struct foo
{
    template<class T>
    T operator()() const
    {
        return 5;
    }
};

foo bar = {}; 
```

当我尝试这样称呼它时：

```
int main()
{
    int i = bar<int>();
    return 0;
} 
```

我得到一个编译错误。有没有办法像普通函数一样用模板参数调用函数对象？我真的需要把它作为一个函数对象。制作免费功能对我来说并不是一个真正的选择（或者至少，这是一个非常混乱的选择）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T22:27:06.987

不幸的是，你不能这样称呼它。您需要使用以下`operator()`语法：

```
int i = bar.operator()<int>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T22:30:11.003

您可以像这样使用转换运算符的技巧：

```
struct foo
{
  struct inner {
    template <typename T> operator T() const { return 5; }
  };
  inner operator()() const { return inner(); }
};

foo bar = {};
int main()
{
  int i = bar(); // implicit
  auto x = static_cast<int>(bar()); // "explicit" template parameter
} 
```

我认为完全一样的语法`bar<int>()`是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:59:47.013

也许您可以像这样简化您的解决方案：

```
template<class T>
struct foo
{
        T operator()() const
        {
            return 5;
        }
};

foo<int> bar = {};

int main()
{
    int i = bar();
    return 0;
} 
```

# java - org.apache.http 库缺少包

> ID：15013423
> 
> 赞同：4
> 
> 时间：2013-02-21T22:25:50.653
> 
> 标签：java, apache, grails, dependencies, apache-httpclient-4.x

我正在为使用 apache 的 httpclient (v4.2.3) 访问另一家公司的 Web 服务器的应用程序编写单元测试。我想模拟 Web 服务器的功能以获得可靠的单元测试结果，并找到了一些作为有效 Web 服务器模拟工具的[参考资料](https://thecarlhall.wordpress.com/2010/03/25/unit-testing-with-httpclients-localtestserver/)，`org.apache.http.localserver.LocalTestServer`这很方便，因为它位于我已经依赖的库中。

不幸的是，grails 无法解析对 LocalTestServer 的引用，尽管它可以很好地引用 HttpClient，而且它们似乎在同一个库中。进一步的研究表明，[有些](http://hc.apache.org/httpcomponents-client-ga/httpclient/xref-test/index.html)javadocs 包含 localserver 包，[有些](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/index.html?org/apache/http/client/package-summary.html)则不包含。我需要做什么来引用和使用这个包？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T23:21:39.527

**在您链接的博客参考中，如果您在Basic Setup**中查看 Maven 依赖项片段，请注意`<classifier>tests</classifier>`. 分类器用于区分从同一个 POM 构建的不同 jar。不幸的是，基于我发现的[这个 JIRA](http://jira.grails.org/browse/GRAILS-6147)，直到 Grails 2.3 才支持分类器。

如果你自己下载[httpclient-4.2.3-tests.jar](http://repo1.maven.org/maven2/org/apache/httpcomponents/httpclient/4.2.3/httpclient-4.2.3-tests.jar)到`/lib`你应该很好去。

# android - AChartEngine 在轴上方显示 x 轴标签

> ID：15013424
> 
> 赞同：2
> 
> 时间：2013-02-21T22:25:54.273
> 
> 标签：android, graph, achartengine

我知道如何通过使用来设置 AChartEngine Y 轴标签位置`mRenderer.setYLabelsAlign(Align.LEFT);`。但我找不到 X 轴的类似设置。为了在轴上方显示 x 轴标签，我需要做些什么特别的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:56:14.907

做这样的事情：

```
renderer.setXLabelsPadding(-30); 
```

# c++ - 许多线程的相同 lambda

> ID：15013425
> 
> 赞同：0
> 
> 时间：2013-02-21T22:26:02.557
> 
> 标签：c++, multithreading, c++11, lambda

我有一个遵循以下结构的代码：

```
//some const variables here

std::function<void(int threadID, NumericMatrix * mat)> threadT = [const1,const2](int threadID, NumericMatrix * mat) {
//a lot of variables defined inside lamdas

}

NumericMatrix * mat1 = new NumericMatrix(N, nEstimators);
std::thread t1( threadT, 1, mat1 );
NumericMatrix * mat2 = new NumericMatrix(N, nEstimators);
std::thread t2( threadT, 2, mat2 );
t1.join();
t2.join();

return; 
```

当我尝试运行它时，我会收到很多分段错误错误，但是当我尝试只运行一个线程时没有问题。我不认为有互斥锁的问题，两个线程都只访问定义的变量

所以我想知道：是不是因为我为每个线程重用了相同的 lambda？如果是这样，我该如何解决这个问题？通过制作 threadT 的副本（如何）？

Obs.：我找不到用 gdb 调试它的方法，因为它是在 R 中编译的。

# log4j - WebLogic 12C 集中式 Log4J 或 Logback 配置

> ID：15013427
> 
> 赞同：3
> 
> 时间：2013-02-21T22:26:11.077
> 
> 标签：log4j, weblogic, slf4j, logback, syslog

我想配置一个集中式登录到 WebLogic 12C。根据业务需求，我必须在生产环境中使用 Syslog，我必须在开发人员和测试环境中提供自定义（例如文件、控制台日志）。而且我只想为域中的每个应用程序处理 1 个集中式日志配置。应用程序使用 SLF4J API。在 Glassfish 3.1 和 WebLogic 10.3.5 中，当我将 Logback 或 Log4J 桥及其实现放入域库并配置它们时，它们运行良好。但是在 WebLogic 12C 中我遇到了很多问题。主要问题是 WL 已经包含模块之间的 SLF4J 绑定（我不想修改 WL，或者我应该修改吗？）。因此，当我进行第二次绑定时，SLF4J 无法初始化它/它们并使用默认的 JUL 记录器。一世' 我还尝试通过 WL 管理控制台配置 Log4J 记录器，但只有服务器消息进入 Log4J 记录器，应用程序的消息仍然进入 JUL。([http://docs.oracle.com/cd/E24329_01/web.1211/e24428/config_logs.htm#i1011558](http://docs.oracle.com/cd/E24329_01/web.1211/e24428/config_logs.htm#i1011558) , [https://forums.oracle.com/forums/thread.jspa?threadID=1037672](https://forums.oracle.com/forums/thread.jspa?threadID=1037672) )

那么如何在 WebLogic12C 域中只维护 1 个 Log4J 或 Logback（或任何其他满足上述要求的解决方案）配置？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T06:59:32.377

如果你想使用 SLF4J 和 Logback，这里有一些说明：

您必须捆绑您希望与您的应用程序一起使用的 SLF4J 和 Logback 工件（这是我发现的唯一可行的解​​决方案！我知道通常不会捆绑 SLF4J 绑定！）。还要在 WAR 项目中捆绑 weblogic.xml（WebLogic 特定的 web.xml）和 EAR 项目中的 weblogic-application.xml（WebLogic 特定的 application.xml）（如果两者都使用，否则选择匹配的一个） . 同样，EAR 和 WAR 都必须提供以下工件：

*   slf4j-api
*   logback 核心
*   logback-经典

这些 xml 文件的内容：

**weblogic.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-web-app
    xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-web-app"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd
    http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web-app.xsd">

    <!-- GERMAN: http://www.torsten-horn.de/techdocs/jee-oracleweblogic.htm -->
    <wls:container-descriptor>
        <wls:prefer-web-inf-classes>true</wls:prefer-web-inf-classes>
    </wls:container-descriptor>
</wls:weblogic-web-app> 
```

**weblogic-application.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-application xmlns="http://www.bea.com/ns/weblogic/90">

    <!-- GERMAN: http://www.torsten-horn.de/techdocs/jee-oracleweblogic.htm -->
    <prefer-application-packages>
        <package-name>org.slf4j.*</package-name>
        <package-name>org.apache.commons.logging.*</package-name>
    </prefer-application-packages>

    <prefer-application-resources>
        <resource-name>org/slf4j/impl/StaticLoggerBinder.class</resource-name>
    </prefer-application-resources>

</weblogic-application> 
```

通过这些 xml 文件，您可以告诉 WebLogic 更喜欢捆绑版本而不是 WebLogic 附带的版本 (WAR)。对于 EAR，这可以在每个包/资源的基础上完成。更精确地，类加载器的顺序会针对指定的包进行更改。

虽然仅将 SLF4J 和 Logback jar 与 EAR 或 WAR 捆绑会导致错误或根本没有日志记录，但在将工件捆绑在两者中时也会收到警告。如果有人有改进的想法，请随时发表评论！

**据我了解，EAR 和 WAR 文件在 WebLogic 中有不同的类加载器，即使 WAR 与 EAR 捆绑在一起。这就是为什么你不能在他们之间共享这个库，对吗？**

配置 Logback：为了能够在运行时更改 logback 配置，您必须在 WebLogic 类路径中的某个位置放置 logback.xml。找了很多网站，告诉我WebLogic从域目录加载资源文件，但在我的情况下它不在类路径中，所以我不得不通过服务器启动脚本将它添加到全局类路径中（这会影响每个域的 logback 设置！）。**同样，欢迎任何改进！**

# api - Shopify 管理面板通过 API？

> ID：15013434
> 
> 赞同：1
> 
> 时间：2013-02-21T22:26:22.587
> 
> 标签：api, shopify

我可以在shopify管理面板中添加东西（链接）（脚本）等吗，我可以为前端商店做到这一点，我希望能够在管理页面上为管理员提供功能，是否可以shopify API？通过编辑主题？他们是否允许编辑显示 admin 的主题？

非常新的shopify 在此先感谢。

投标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:12:17.177

您只能在 Shopify 后台的特定位置添加链接。您可以在 Shopify 合作伙伴仪表板中配置这些链接。在合作伙伴仪表板中导航到您的应用程序，单击“编辑 spp 设置”，您将在那里找到“商店管理员链接”部分。

要添加链接，您还必须指定链接在 Shopify 后台中的显示位置。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-21T22:39:54.130

当然。启动您的合作伙伴帐户，创建一个应用程序，并在可用的关键端点将尽可能多的链接注入商店。有很多机会可以做到这一点。

# actionscript-3 - Flash Wierdness - #2032 错误但 Apache 返回 200

> ID：15013436
> 
> 赞同：0
> 
> 时间：2013-02-21T22:26:31.853
> 
> 标签：actionscript-3

我有一个小型 Flash 应用程序，可以加载一个小型（10 行）xml 文件。大多数时候一切都很好。但是，有时我会看到 flash 应用程序无法加载 xml 文件并引发 #2032 错误。

当应用程序无法加载 xml 文件时，它会每 15 秒重新请求一次。这些重新请求都因抛出 2032 错误而失败，但是跟踪 Apache 日志显示每个请求的 http 状态为 200。

Flash ULRLoader 收到 http 状态事件 200，然后立即显示 #2032 错误。关于这里可能发生的事情有什么想法吗？

谢谢！

代码：

```
 public class XMLLoader 
{
    private var xml:XML;
    private var loader:URLLoader = new URLLoader();
    private var callback:Function;

    function XMLLoader(c:Function = null)
    {
        callback = c;
    }

    public function loadData(url:String = null):void
    {
        loader.addEventListener(Event.COMPLETE, onLoaded);
        loader.addEventListener(IOErrorEvent.IO_ERROR, onIOError);

        loader.addEventListener(Event.OPEN, onOpen);
        loader.addEventListener(ProgressEvent.PROGRESS, onProgress);
        loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, onSecurityError);
        loader.addEventListener(HTTPStatusEvent.HTTP_STATUS, onHttpStatus);

        loader.load(new URLRequest(url + "?now=" + timeNow()));
    }

    private function timeNow()
    {
        var timeNow:Date = new Date();
        return timeNow.valueOf();
    }

    private function onOpen(event:Event):void
    {
        callback("Open: " +  String(event));
    }

    private function onProgress(event:ProgressEvent):void
    {
        callback("Progress: loaded:" + event.bytesLoaded + " total: "  + event.bytesTotal);
    }

    private function onSecurityError(event:SecurityErrorEvent):void
    {
        callback("Security Error: " + event);
    }

    private function onHttpStatus(event:HTTPStatusEvent):void
    {
        callback("Http Status: " +  event);
    }

    private function onLoaded(event:Event):void
    {
        xml = new XML(event.target.data);
        callback("ISLD: " +  event);

        callback("Success", xml);
    }

    private function onIOError(event:IOErrorEvent):void
    {
        callback("IOError" + event);
    } 
```

# python - mongoengine - 查询如何按 ListField 大小进行过滤

> ID：15013438
> 
> 赞同：10
> 
> 时间：2013-02-21T22:26:44.900
> 
> 标签：python, mongodb, mongoengine, mongodb-query

我有以下模型：

```
class Like(EmbeddedDocument):
    user = ReferenceField(User,dbref=False)
    date = DateTimeField(default=datetime.utcnow,required=True)
    meta = {'allow_inheritance': False}

class Post(Document):
   name = StringField(max_length=120, required=True)
   likes = ListField(EmbeddedDocumentField(Like)) 
```

我想只过滤超过 20 个赞的帖子（ListField 大小大于 20）。我尝试使用以下方式查询：

```
posts = Post.objects.filter(likes__size_gte=20)
posts = Post.objects.filter(likes_gte=20)
posts = Post.objects.filter(likes__gte=20)
posts = Post.objects.filter(likes__size_gte=20) 
```

它们都不起作用。

但是，如果我使用完全匹配（ListField 大小正好 20 个喜欢）它可以工作：

```
posts = Post.objects.filter(likes__size=20) 
```

注释？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-12T11:02:35.380

远非完美的解决方案，但您可以使用原始 mongo 查询和[$where](http://docs.mongodb.org/manual/reference/operator/query/where/#op._S_where)运算符，例如：

```
posts = Post.objects.filter(__raw__={'$where': 'this.likes.length > 20'}) 
```

另一种选择，应该更快，但在我看来不太清楚，是检查第 21 个元素是否存在：

```
posts = Post.objects.filter(likes__21__exists=True) 
```

仅当您使用 MongoDB 2.2+ 时，第二个选项才有效

来源：取自这些[答案](https://stackoverflow.com/questions/7811163/in-mongo-db-how-do-i-find-documents-where-array-size-is-greater-than-1)并应用于 MongoEngine。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T03:38:48.050

您不能将 $size 用于一系列值。

从 mongo 的网站：

> $size 不接受值范围。要根据具有不同数量元素的字段选择文档，请创建一个计数器字段，当您将元素添加到字段时会增加该字段。

这是导致答案的相关问题的链接：[在 mongoDB 中删除数组字段大小小于 3 的文档](https://stackoverflow.com/questions/10439860/remove-documents-with-array-fields-size-less-than-3-in-mongodb?rq=1)

这是上一个链接链接到的 mongo 页面，该页面在上面的块中提供了文档：http: [//docs.mongodb.org/manual/reference/operator/size/#_S_size](http://docs.mongodb.org/manual/reference/operator/size/#_S_size)

尝试按照文本块中的建议添加计数器字段。

# android - android view viewgroup 使ondraw和draw无效

> ID：15013445
> 
> 赞同：3
> 
> 时间：2013-02-21T22:27:12.690
> 
> 标签：android, view, ondraw

我们正在尝试编写自己的 MapView，我正在尝试弄清楚向 mapview 添加叠加层如何导致它们在其他映射 API 中被绘制

我有一个扩展 ViewGroup 的 MapView。我想我已经发现调用 MapView.invalidate() 会导致调用 mapview 的 dispatchDraw 方法。这听起来正确吗？

如果是真的，mapview 的 onDraw 和 draw 方法是什么时候调用的？

更重要的是，所有这些观点以及在任何地方都记录良好的情况下调用了哪些方法？

谢谢！

**编辑** [这篇 SO 帖子](https://stackoverflow.com/questions/13056331/android-custom-layout-ondraw-never-gets-called)解释说，对于扩展 ViewGroup 的类，不会自动调用 onDraw 方法。如果你需要它，你必须强迫它。但是正如ebarrenchea指出的那样，如果调用了所有方法，则顺序是draw，onDraw，dispatchDraw

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:43:57.650

调用`invalidate`您的视图组将强制运行，然后`draw`依次调用。您应该查看此处的视图文档[和](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.0_r1/android/view/View.java#View)[此处](http://developer.android.com/reference/android/view/View.html) 的查看源代码以获取更多信息。`onDraw``dispatchDraw`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T12:31:16.457

`invalidate()`必须从 UI 线程调用才能导致`onDraw()`. 尝试使用`postInvalidate()`应该具有与 相同的效果`invalidate()`，但适用于非 UI 线程。

# c++ - OpenCV - C++ - 二进制对象的轴对齐边界框

> ID：15013452
> 
> 赞同：1
> 
> 时间：2013-02-21T22:27:39.843
> 
> 标签：c++, object, ubuntu, opencv, detection

所以我有这张带有橙色交通锥的图像

![原始图像](../Images/e9768a3aa967330f99839b3ee2c0f0b9.png)

我已经过滤掉了所有我不想要的颜色

![过滤后的图像](../Images/a3ea84fc89058239674bcabf672a56d0.png)

现在我想做的是在圆锥周围画一个盒子。我想通过确定圆锥的最大上下限以及圆锥的最大左右边界来做到这一点。基本上，最高白色像素、最低白色像素、最左边白色像素和最右边白色像素的位置。

我知道如何画线，但我不知道如何找到圆锥的边界。

这个想法是在圆锥周围找到一个盒子，这样我就可以确定圆锥的质心。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:51:56.710

假设图像加载到数组中......您可以使用以下算法。

```
long top, bottom, right, left;
bottom = right = -1;
top = maxrows;
left = maxcolumns;

for(long row = 0; row < maxrows; row++)
{
    for(long column = 0; column < maxcolumns; column++)
    {
        if(true == IsPixelWhite(image[row][column])
        {
        if(row > bottom)  bottom = row;
        if(column > right) right = column;
        if(row < top)  top = row;
        if(column < left) left = column;
        }
    }
} 
```

# clojure - 嵌套地图的 Clojure 拉链压制 TRIE

> ID：15013458
> 
> 赞同：9
> 
> 时间：2013-02-21T22:28:41.660
> 
> 标签：clojure, trie, zipper

如何为 TRIE 创建一个 Clojure 拉链，由嵌套映射表示，键是字母。？

像这样的东西：

```
{\b {\a {\n {\a {\n {\a {'$ '$}}}}}} \a {\n {\a {'$ '$}}}} 
```

用 2 个单词 'banana' 和 'ana' 表示一个 trie。（如有必要，可以在地图中进行一些更改..）

我尝试将`map? vals assoc`3 个功能分别传递给拉链。但它似乎不起作用..

我应该使用哪三个功能？

以及基于 zipper 的 insert-into-trie 会是什么样子？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-22T09:21:07.150

`map?` `vals` `#(zipmap (keys %1) %2)`可以，但不支持插入/删除子项（因为子项只是值，您不知道要删除/添加哪个键）。

下面`map-zipper`确实支持插入/删除，因为节点是 [kv] 对（除了作为映射的根）。

```
(defn map-zipper [m]
  (z/zipper 
    (fn [x] (or (map? x) (map? (nth x 1))))
    (fn [x] (seq (if (map? x) x (nth x 1))))
    (fn [x children] 
      (if (map? x) 
        (into {} children) 
        (assoc x 1 (into {} children))))
    m)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-03T20:09:37.000

[@cgrant 提出](https://stackoverflow.com/a/15020649/133106)的解决方案很棒，但隐含地描述了一个树，其中所有分支和叶节点都有一个关联的值（字典中的键），除了根节点，它只是一个没有值的分支。所以，这棵树`{"/" nil}`，不是一棵只有一个叶子节点的树，而是一棵有匿名根分支和一个有值的叶子节点的树`/`。在实践中，这意味着树的每次遍历都必须首先执行 a`(zip/down t)`才能下降根节点。

另一种解决方案是显式地对地图内的根进行建模，也就是说，仅从根处具有单个键的地图创建拉链。例如：`{"/" {"etc/" {"hosts" nil}}}`

然后可以通过以下方式实现拉链：

```
(defn map-zipper [map-or-pair]
  "Define a zipper data-structure to navigate trees represented as nested dictionaries."
  (if (or (and (map? map-or-pair) (= 1 (count map-or-pair))) (and (= 2 (count map-or-pair))))
    (let [pair (if (map? map-or-pair) (first (seq map-or-pair)) map-or-pair)]
      (zip/zipper
        (fn [x] (map? (nth x 1)))
        (fn [x] (seq (nth x 1)))
        (fn [x children] (assoc x 1 (into {} children)))
        pair))
    (throw (Exception. "Input must be a map with a single root node or a pair.")))) 
```

# java - 对象实例化另一个对象？

> ID：15013463
> 
> 赞同：0
> 
> 时间：2013-02-21T22:29:20.557
> 
> 标签：java, object, instantiation, uml

[是否可以从另一个对象实例化对象在 UML 序列图中](https://stackoverflow.com/questions/15012587/constructor-in-uml-sequence-diagram)查看此 构造函数

这种情况在Java等编程语言中是否可能发生？

这种情况在 UML 等建模语言中是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:22:07.390

是的，面向对象编程的整个概念依赖于能够创建其他对象的对象。

在 Java 中，我们通过调用构造函数来创建实例，例如为`new ClassB()`我们实例化一个新的 ClassB 对象。如果我们想让 ClassA 实例化 ClassB，我们只需要让 ClassA 调用 ClassB 的构造函数。下面是我们在 Java 中的做法

```
public class ClassA{
    public ClassA(){
        ClassB instance1 = new ClassB();
    }
} 
```

在这里，我已经做到了，以便在实例化**ClassA**时（调用它的构造函数）它会创建一个名为*instance1的***ClassB**新实例。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:36:50.663

如果我明白你在问什么，是的，你可以通过继承或组合来做到这一点。

遗产：

```
ClassB extends ClassA {
    public ClassB() {
        super();    // calls ClassA constructor
        // do more stuff
    }
} 
```

作品：

```
ClassX {
    private ClassY y;
    public ClassX() {
        y = new ClassY();    // calls ClassY constructor
        // do more stuff
    }
} 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:42:50.450

是的，这是 Java 的重要组成部分，也是任何面向对象的语言。

如果你有两个对象，A 和 B，并且 B 是 A 的子类，你可以使用 B 实例化 A：

```
A baseObject = new B(); 
```

这里的关系表示'B' IS A 'A'：意味着任何有 A 的地方，你都可以在它的位置实例化一个 B，因为 B 是 A 的正确子类型。请注意，如果你仍然只能使用 A 的接口像这样使用它。

使用列表时可以看到 Java 中的一个真实示例。Java 中的 List 类是从 Collection 派生的抽象容器类型。在本例中，List 是我们的“A”类型。有许多不同种类的列表，例如 LinkedList 和 ArrayList。LinkedList 和 ArrayList 是 List 的正确子类型，在此示例中为“B”类型。因此，您可以将 List 初始化为其任何子类型：

```
List<String> stringList = new ArrayList<String>(); 
```

或者

```
List<String> stringList = new LinkedList<String>(); 
```

希望这会有所帮助。*

# java - 在初始化时检查 null

> ID：15013466
> 
> 赞同：1
> 
> 时间：2013-02-21T22:29:25.457
> 
> 标签：java, variables, null, initialization

我使用可以返回任何字符串或`null`.

我希望字符串`""`在`null`. 所以我使用：

```
String mString = getMyString();
mString = mString==null ? "" : mString; 
```

或者（效率较低，但在一行中）：

```
String mString = getMyString() == null ? "" : getMyString(); 
```

任何更清洁的方法来做到这一点？

编辑：我考虑过使用 if 语句：

```
String mString = getMyString();
if (mString == null); mString = ""; 
```

哪一个（第一个或第三个）执行得更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:34:25.730

许多错误导致`null`s 传播。如果您的意思是空字符串，最好使用空字符串。收藏也一样。因此，尽早抛出 NPE。Java SE 7 引入了（一种冗长的、大写错误的、位置不佳的）方法来执行此操作。

```
String mString = java.util.Objects.requireNonNull(getMyString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T22:32:12.207

不，不是真的:)

或者您可以创建另一种方法`getMyNonNullString`来为您执行此操作 - 祝您好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T22:32:35.697

就像布赖恩·罗奇评论的那样：

如果您可以控制`getMyString()`以返回空字符串而不是`null`. 否则我也使用你的第一种方法（尝试优化它以进行分支预测）：

```
String mString = getMyString();
// if I know getMyString() might return null and I can't change it:
mString = mString != null ?  mString : ""; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T23:09:03.210

我建议使用 Apache Common 的：

`StringUtil.isBlank(strVariable);`

这是标准化项目的好方法，尤其是大型项目。否则你必须到处重复你家常便饭的逻辑。

以下是供您参考的链接： http: [//commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T23:28:35.983

第二个绝对不是要走的路，因为它不一样。

但是不要做任何这些。编写一次如下所示的便捷函数并静态导入它，以便明确意图。

```
public static @Nonnull String nullToEmptyString(@Nullable String s) {
  return s != null ? s : "";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T23:20:09.557

我会做第三种形式。性能方面不应该有任何明显的差异。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-22T01:30:02.430

我可以建议一种不同的方法。由于 MACOSX 的限制，我还没有 JAVA 7，所以如果有语法错误，请指导我。欢迎评论

这是基于我在 Stacoverflow 错误上提出的问题：[为什么 switch 语句比 Java 7 中的 String 的 if else 更快？](https://stackoverflow.com/questions/10836055/switch-statement-in-java-7)

```
 The Java compiler generates generally more efficient bytecode from switch statements that   
 use "String objects" than from chained if-then-else statements. 
```

所以，--> Switch 语句会比 if-else 块更有效。try-catch 的表现值得商榷

```
 String str = getMyString(); // only one call

   try {
    switch (str) {
      default:   break;
    }

    } catch(NullpointerException e){

      str="";//Null means Str is null
    } 
```

# javascript - 无法理解带有 VB.NET 的 JavaScript API 示例

> ID：15013470
> 
> 赞同：0
> 
> 时间：2013-02-21T22:29:31.417
> 
> 标签：javascript, vb.net, json, asp.net-ajax, jsonp

我是一个新的 vb.net 开发人员，我正在尝试与 API 服务集成，该服务允许我存储信用卡数据而不符合 PCI。我遇到的问题是该示例仅适用于 JavaScript，我无法弄清楚如何在 vb.NET 中创建相同的简单过程。我希望有人可以帮助我处理这个样本。

这个想法是将这些数据从我的表单引导到 API，然后处理成功或失败的响应数据。

```
 //<![CDATA[
        $(document).ready(function() {
            $('input:button').click(function() {
                $.ajax({
                    type: 'post',
                    url: 'https://certify.i4go.com/index.cfm',
                    dataType: 'jsonp',
                    data: {
                        fuseaction: 'account.jsonpPostCardEntry',
                        i4Go_AccountID: '123123',
                        i4Go_SiteID: '456456',
                        i4Go_CardNumber: $('#i4Go_CardNumber').val(),
                        i4Go_ExpirationMonth: $('#i4Go_ExpirationMonth').val(),
                        i4Go_ExpirationYear: $('#i4Go_ExpirationYear').val()
                    },
                    cache: false
                });
            });                 
        });
        function parseResponse(data) {
            if (data.i4go_responsecode != null) {
                if (data.i4go_responsecode == 1) {
                    $('#response').html('i4Go_UniqueId: ' + data.i4go_uniqueid);
                } else {
                    $('#response').html('i4Go_ResponseCode: ' + data.i4go_responsecode);
                }
            } else {
                $('#response').html('i4Go_ResponseCode is null');
            }
        }
        //]]>
    </script>
</head>
<body>
    <table cellpadding="0" cellspacing="0">
        <tbody><tr>
            <td>Card number:</td><td><input type="text" id="i4Go_CardNumber" value="4111111111111111"></td>
        </tr>
        <tr>
            <td>Exp month:</td><td><input type="text" id="i4Go_ExpirationMonth" value="12"></td>
        </tr>
        <tr>
            <td>Exp year:</td><td><input type="text" id="i4Go_ExpirationYear" value="2020"></td>
        </tr>
        <tr>
            <td><input type="button" value="Get Token"></td>
        </tr>
    </tbody></table>
    <div id="response"></div> 
```

我感谢任何和所有的帮助。

干杯，

阿杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:38:26.317

如果您使用的是 .NET 4.5，请查看新的 WebAPI 调用，这很容易。一旦你创建了一个代表数据的类，序列化就为你完成了，你的代码看起来像这样：

```
Dim jsonObject As ' TODO: Create a class that represents the data, and instantiate the object with the data
Dim client As New HttpClient()
client.BaseAddress = new Uri("https://certify.i4go.com/")
Dim result As HttpResponseMessage = client.PostAsJsonAsync("index.cfm", jsonObject).Result 
```

分析返回的对象以获取它们传递给您的任何内容，并决定如何从那里继续。

有很多重载可供选择，它们的作用基本相同。

**编辑**：对于 .NET 4.0，您可以使用`WebClient`而不是`HttpClient`- 它需要更多的工作，但仍然不算太糟糕 - 您只需要手动处理序列化。可能还有很多方法可以做到这一点，但这里有一个：

```
Dim message As String
Dim s As New SomeData() ' SomeData still represents the data you're passing
message = New JavaScriptSerializer().Serialize(s)
Dim webClient As New WebClient()
Dim response() As Byte = webClient.UploadData(url, Encoding.UTF8.GetBytes(message))
Dim responseString as String = Encoding.UTF8.GetString(response) 
```

现在您将响应作为字符串，您可以弄清楚如何处理它 - 它可能是 JSON 对象或类似的东西，您需要读取或反序列化它。

# jsf - JSF SelectOneMenu 浏览器后退按钮

> ID：15013472
> 
> 赞同：0
> 
> 时间：2013-02-21T22:29:48.513
> 
> 标签：jsf, browser-cache, back-button, selectonemenu

我在使用 SelectOneMenu 进行导航时遇到问题：

```
<p:selectOneMenu value="#{navigator.outcome}">
    <f:selectItem itemLabel="Select item.." />
    <f:selectItems value="#{navigator.menuItems}" />
    <p:ajax event="change" listener="#{navigator.navigate}" />
</p:selectOneMenu> 
```

这工作正常，除非我向后导航时它不显示“选择项目..”

navigator bean 是请求范围的（我也尝试过视图范围）。我已经使用 WebFilter 禁用了缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:14:20.400

您需要在表单级别关闭自动完成功能。使用 JSF 2.1，您无法做到这一点。

要么等到 JSF 2.2，要么使用omnifaces：

请参阅链接： [如何在 JSF 中的表单级别执行 autocomplete="off"](https://stackoverflow.com/questions/3211442/how-to-do-autocomplete-off-at-form-level-in-jsf)

# sql - 带有复合键的 SQL where 子句

> ID：15013474
> 
> 赞同：1
> 
> 时间：2013-02-21T22:29:56.923
> 
> 标签：sql, oracle, foreign-keys, where, composite-key

我正在编写自定义 Oracle 查询以从子表中删除数据，以避免将外键约束作为清理测试数据的实用程序的一部分。

假设我有两个表 - 表 1 (PK - (id1,id2)) 和表 2 (FK -(id3,id4))，其中 id1,id2,id3,id4 都是数字类型。表 2 对表 1 的主键有一个复合外键约束。这是我现在所拥有的（现在只是选择，稍后将更改为删除）：

```
select (cast(t2.id3 as varchar2(30)) || ',' || cast(t2.id4 as varchar2(10)))  
as new_search from Table2 t2 where new_search in 
(select (cast(t1.id1 as varchar2(30)) || ',' || cast(t1.id2 as varchar2(10))) 
as new_search from Table1 t1 where t1.someColumn=someValue); 
```

但是，执行此操作会给我 ORA-00904 NEW_SEARCH:invalid_identifier。所以，我的问题是：

（1）我在这里做错了什么？(2) 有没有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:36:14.040

1）您不能在 where 子句中使用列别名
2）试试这个：

```
select t2.id3, t2.id4 
from Table2 t2 
where (t2.id3, t2.id4) in 
  (select t1.id1, t1.id2 
   from Table1 t1 
   where t1.someColumn=someValue
  ); 
```

# c# - 将消息写入应用程序事件日志

> ID：15013475
> 
> 赞同：1
> 
> 时间：2013-02-21T22:30:03.613
> 
> 标签：c#, event-viewer

我在将事件写入 Windows 事件日志时遇到问题。我浏览了这些帖子，我认为我做得对，但我仍然在事件查看器中收到以下错误：

**消息资源存在，但在字符串/消息表中找不到消息**

有人对我所缺少的有任何想法吗？

我在 WIX 安装程序中创建了事件源：

```
<Fragment>
    <PropertyRef Id="NETFRAMEWORK35"/>
    <PropertyRef Id="NETFRAMEWORK20"/>
    <PropertyRef Id="NETFRAMEWORK20INSTALLROOTDIR"/>
    <PropertyRef Id="NETFRAMEWORK20INSTALLROOTDIR64" />

    <Component Id='EventSource'
               Directory='INSTALLDIR'
               Guid='F382AAC5-F7C5-46A4-95CF-EA7724DXXXXX' >
        <Condition>ALLUSERS</Condition>
        <?if $(var.Platform) = x64 ?>
            <util:EventSource Log='Application'
                    Name='MySource'
                    EventMessageFile='[NETFRAMEWORK20INSTALLROOTDIR64]EventLogMessages.dll'
                    KeyPath='yes' />
        <?else ?>
            <util:EventSource Log='Application'
                    Name='MySource'
                    EventMessageFile='[NETFRAMEWORK20INSTALLROOTDIR]EventLogMessages.dll'
                    KeyPath='yes' />
        <?endif ?>
    </Component>
</Fragment> 
```

这是我写入事件日志的 C# 代码：

```
public class Log
{
    private const string EventSource = "MySource";
    private const string EventLog = "Application";
    private static EventLog _logger = null;

    private static void InitLogger()
    {
        if (!System.Diagnostics.EventLog.SourceExists(EventSource))
        {
            System.Diagnostics.EventLog.CreateEventSource(EventSource, EventLog);
        }
        _logger = new EventLog() { Source = EventSource, Log = EventLog };
    }

    public static void Write(EventLogEntryType entryType, string format, params object[] args)
    {
        string entry = _Format(format, args);

        try
        {
            if (_logger == null)
                InitLogger();
            _logger.WriteEntry(entry, entryType, 1);
        }
        catch (Exception ex)
        {
            Tracer.Misc.Error("Could not write to event log: {0}", entry);
        }

    }

    private static string _Format(string format, object[] args)
    {
        if ((args == null) || (args.Length == 0))
            return format;

        try
        {
            return String.Format(format, args);
        }
        catch (Exception e)
        {
            return format + " [Format Exception:" + e.Message + "]";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T14:48:40.817

我想出了我的问题。我的代码很好。问题在于我使用的 EventSource 的名称。事件源包含空格和破折号。当我删除它们时，它起作用了。

IE 从“我的事件源”到“我的事件源”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T11:13:12.750

此外，如果您正在登录“应用程序”，事件源也不能是“应用程序”（仅供参考，供人们弄清楚事件日志记录，正如我现在尝试的那样。不是答案）。它将提供如下的日志记录详细信息 -

> 找不到来自源应用程序的事件 ID 101 的描述。引发此事件的组件未安装在本地计算机上，或者安装已损坏。您可以在本地计算机上安装或修复组件。
> 
> 如果事件起源于另一台计算机，则显示信息必须与事件一起保存。
> 
> 活动中包含以下信息：
> 
> 日志消息示例
> 
> 消息资源存在，但在字符串/消息表中找不到消息

# python - Google 群组：通过 Python API 禁用群组

> ID：15013478
> 
> 赞同：1
> 
> 时间：2013-02-21T22:30:11.740
> 
> 标签：python, google-provisioning-api

我正在使用 Python Gdata API 为我的组织管理 Google 群组，并且有兴趣使用“新”Google 群组中现在提供的“禁用群组”功能。API 是否支持此功能？

我正在使用此页面上列出的方法：http: [//gdata-python-client.googlecode.com/svn/trunk/pydocs/gdata.apps.groups.service.html](http://gdata-python-client.googlecode.com/svn/trunk/pydocs/gdata.apps.groups.service.html)

我感谢提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:44:14.370

Edited:

I don't think it is possible via Group Setting API.

The description for disabling a group is below:

"Once disabled all new posts to the group will be rejected. Old messages will be browseable and searchable online by anyone that has permission to view the group's content. If this setting is reverted, 'Who can post messages' will automatically be set to 'Managers only' in the 'Basic permissions' section."

I try to use the group setting API and change the setting from all in domain can post to just all manager can post to limit the posting of the group.

"whoCanPostMessage": "ALL_IN_DOMAIN_CAN_POST" -> ALL_MANAGERS_CAN_POST

Note if you take a look at the basic permission for a disabled group, it unchecked all the users who are allowed to post. However, the group setting APi only limit to you change to ALL manager can post.

So it didn't really disable a group...

# c - Gtk 中的基本聊天

> ID：15013480
> 
> 赞同：0
> 
> 时间：2013-02-21T22:30:19.677
> 
> 标签：c, gtk

所以，我有三个标签和一个输入框。我的目标是让您每次在输入框中输入内容并按回车键，文本都会出现在第三个标签中。如果您再次执行此操作，文本将出现在第三个标签中，而旧文本将移至第二个标签中，依此类推（因此标签显示您键入的最后三条消息。）

```
Here is the ChatInfo Struct:

typedef struct chat_info ChatInfo;
struct chat_info {
GtkWidget *text_line1;
GtkWidget *text_line2;
GtkWidget *text_line3;
GtkWidget *entry;

}; 
```

这是初始化聊天框的函数：

```
static void get_chatbox(GtkWidget ** vbox, gpointer data) {

GuiInfo *g = (GuiInfo *) data;

ChatInfo *c;
c = (ChatInfo *) malloc(sizeof(ChatInfo));

g->chat = c;

GtkWidget *text_line1;
GtkWidget *text_line2;
GtkWidget *text_line3;

GtkWidget *entry;
GtkEntryBuffer *buffer;

text_line1 = gtk_label_new("");
text_line2 = gtk_label_new("");
text_line3 = gtk_label_new("");

buffer = gtk_entry_buffer_new(NULL, -1);
entry = gtk_entry_new_with_buffer(buffer);

gtk_entry_set_activates_default(GTK_ENTRY(entry), TRUE);

gtk_box_pack_end(GTK_BOX(*vbox), entry, FALSE, FALSE, 1);
gtk_box_pack_end(GTK_BOX(*vbox), text_line3, FALSE, FALSE, 1);
gtk_box_pack_end(GTK_BOX(*vbox), text_line2, FALSE, FALSE, 1);
gtk_box_pack_end(GTK_BOX(*vbox), text_line1, FALSE, FALSE, 1);

gtk_misc_set_alignment((GtkMisc *) text_line1, .01, .5);
gtk_misc_set_alignment((GtkMisc *) text_line2, .01, .5);
gtk_misc_set_alignment((GtkMisc *) text_line3, .01, .5);
gtk_misc_set_alignment((GtkMisc *) entry, .01, .5);

g_signal_connect(G_OBJECT(entry), "activate", G_CALLBACK(send_message), g);
} 
```

这是回调：

```
static void send_message(GtkWidget *window, gpointer data){
GuiInfo *g = (GuiInfo *) data;

ChatInfo *c = g->chat;

const gchar *message = gtk_entry_get_text(GTK_ENTRY(c->entry));

const gchar *oldtext3 = gtk_label_get_text(c->text_line3);
const gchar *oldtext2 = gtk_label_get_text(c->text_line2);

gtk_label_set_text(c->text_line3, message);
gtk_label_set_text(c->text_line2, oldtext3);
gtk_label_set_text(c->text_line1, oldtext2);

} 
```

我在这条线上遇到了段错误，不知道为什么：

常量 gchar *message = gtk_entry_get_text(GTK_ENTRY(c->entry));

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:04:14.513

您 malloc c 和您`gtk_label_new`的 text_line1 等...但您从不这样做

```
c->text_line1 = text_line1; 
```

in`get_chatbox()` 并且我认为 entry 是一样的 :)

所以当你使用 c->entry 时你使用一个未初始化的值

所以结果是

```
static void get_chatbox(GtkWidget ** vbox, gpointer data)
{
     GuiInfo*        g = (GuiInfo*)data;
     ChatInfo*       c;
     GtkWidget*      text_line1;
     GtkWidget*      text_line2;
     GtkWidget*      text_line3;
     GtkWidget*      entry;
     GtkEntryBuffer* buffer;

     c = malloc(sizeof(*ChatInfo));
     g->chat = c;
     text_line1 = gtk_label_new("");
     text_line2 = gtk_label_new("");
     text_line3 = gtk_label_new("");
     buffer = gtk_entry_buffer_new(NULL, -1);
     entry = gtk_entry_new_with_buffer(buffer);
     gtk_entry_set_activates_default(GTK_ENTRY(entry), TRUE);
     //------MY ADD-------
     c->text_line1 = text_line1;
     c->text_line2 = text_line2;
     c->text_line3 = text_line3;
     c->entry = entry;
     //-------------------

     gtk_box_pack_end(GTK_BOX(*vbox), entry, FALSE, FALSE, 1);
     gtk_box_pack_end(GTK_BOX(*vbox), text_line3, FALSE, FALSE, 1);
     gtk_box_pack_end(GTK_BOX(*vbox), text_line2, FALSE, FALSE, 1);
     gtk_box_pack_end(GTK_BOX(*vbox), text_line1, FALSE, FALSE, 1);

     gtk_misc_set_alignment((GtkMisc *) text_line1, .01, .5);
     gtk_misc_set_alignment((GtkMisc *) text_line2, .01, .5);
     gtk_misc_set_alignment((GtkMisc *) text_line3, .01, .5);
     gtk_misc_set_alignment((GtkMisc *) entry, .01, .5);
     g_signal_connect(G_OBJECT(entry), "activate", G_CALLBACK(send_message), g);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:12:55.340

在 get_chatbox 你本地声明：

```
GtkWidget *text_line1;
GtkWidget *text_line2;
GtkWidget *text_line3;

GtkWidget *entry; 
```

我认为您的意思是引用 c 的成员，因此您不需要声明这些局部变量，而是使用：

```
c->text_line1 = gtk_label_new("");
c->text_line2 = gtk_label_new("");
c->text_line3 = gtk_label_new("");

c->entry = gtk_entry_new_with_buffer(buffer); 
```

# linux - 在bash中，如何将返回值存储在变量中？

> ID：15013481
> 
> 赞同：50
> 
> 时间：2013-02-21T22:30:21.790
> 
> 标签：linux, bash

我知道 Linux 中的一些非常基本的命令，并且正在尝试编写一些脚本。我编写了一个函数，用于计算 5 位数字中最后 2 位数字的总和。该函数应该在最后 2 位数字之间连接这个结果总和并返回它。我想返回这个值的原因是因为我将在另一个函数中使用这个值。

例如：如果我有 12345，那么我的函数将计算 4+5 并返回 495。

```
#!/bin/bash

set -x
echo "enter: "
        read input

function password_formula
{
        length=${#input}
        last_two=${input:length-2:length}
        first=`echo $last_two| sed -e 's/\(.\)/\1 /g'|awk '{print $2}'`
        second=`echo $last_two| sed -e 's/\(.\)/\1 /g'|awk '{print $1}'`
        let sum=$first+$second
        sum_len=${#sum}
        echo $second
        echo $sum

        if [ $sum -gt 9 ]
        then
               sum=${sum:1}
        fi

        value=$second$sum$first
        return $value
}
result=$(password_formula)
echo $result 
```

我正在尝试回显并查看结果，但我得到的输出如下所示。

```
-bash-3.2$ ./file2.sh 
+++ password_formula
+++ echo 'enter: '
+++ read input
12385
+++ length=8
+++ last_two=85
++++ echo 85
++++ sed -e 's/\(.\)/\1 /g'
++++ awk '{print $2}'
+++ first=5
++++ echo 85
++++ sed -e 's/\(.\)/\1 /g'
++++ awk '{print $1}'
+++ second=8
+++ let sum=5+8
+++ sum_len=2
+++ echo 5
+++ echo 8
+++ echo 13
+++ '[' 13 -gt 9 ']'
+++ sum=3
+++ value=835
+++ return 835
++ result='enter: 
5
8
13'
++ echo enter: 5 8 13
enter: 5 8 13 
```

我还尝试将结果打印为：

```
password_formula
RESULT=$?
echo $RESULT 
```

但这给出了一些未知的价值：

```
++ RESULT=67
++ echo 67
67 
```

如何正确存储正确的值并在屏幕上打印（仔细检查）？

提前致谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2016-02-05T11:57:37.007

最简单的答案：

函数的返回码只能是 0 到 255 范围内的值。要将此值存储在变量中，您必须像此示例中那样执行：

```
#!/bin/bash

function returnfunction {
    # example value between 0-255 to be returned 
    return 23
}

# note that the value has to be stored immediately after the function call :
returnfunction
myreturnvalue=$?

echo "myreturnvalue is "$myreturnvalue 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-21T22:37:51.853

返回值（也称为退出代码）是 0 到 255（含）范围内的值。它用于指示成功或失败，而不是返回信息。超出此范围的任何值都将被包装。

要返回信息（例如您的号码），请使用

```
echo "$value" 
```

要打印您不想捕获的其他信息，请使用

```
echo "my irrelevant info" >&2 
```

最后，要捕获它，请使用您所做的：

```
 result=$(password_formula) 
```

换句话说：

```
echo "enter: "
        read input

password_formula()
{
        length=${#input}
        last_two=${input:length-2:length}
        first=`echo $last_two| sed -e 's/\(.\)/\1 /g'|awk '{print $2}'`
        second=`echo $last_two| sed -e 's/\(.\)/\1 /g'|awk '{print $1}'`
        let sum=$first+$second
        sum_len=${#sum}
        echo $second >&2
        echo $sum >&2

        if [ $sum -gt 9 ]
        then
               sum=${sum:1}
        fi

        value=$second$sum$first
        echo $value
}
result=$(password_formula)
echo "The value is $result" 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-01-05T07:16:03.930

您很容易需要回显您需要返回的值，然后像下面这样捕获它

```
demofunc(){
    local variable="hellow"
    echo $variable    
}

val=$(demofunc)
echo $val 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-04-03T06:41:03.017

使用特殊的 bash 变量“$?” 像这样：

```
function_output=$(my_function)
function_return_value=$? 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-08-06T16:42:03.017

上面的答案建议将函数更改为回显数据而不是返回它以便可以捕获它。

对于无法修改返回值需要保存到变量的位置的函数或程序（例如`test`/ `[`，它返回 0/1 成功值），`$?`请在命令替换中回显：

```
# Test if we're remote.
isRemote="$(test -z "$REMOTE_ADDR"; echo $?)"
# Or:
isRemote="$([ -z "$REMOTE_ADDR" ]; echo $?)"

# Additionally you may want to reverse the 0 (success) / 1 (error) values
# for your own sanity, using arithmetic expansion:
remoteAddrIsEmpty="$([ -z "$REMOTE_ADDR" ]; echo $((1-$?)))" 
```

例如

```
$ echo $REMOTE_ADDR

$ test -z "$REMOTE_ADDR"; echo $?
0
$ REMOTE_ADDR=127.0.0.1
$ test -z "$REMOTE_ADDR"; echo $?
1
$ retval="$(test -z "$REMOTE_ADDR"; echo $?)"; echo $retval
1
$ unset REMOTE_ADDR
$ retval="$(test -z "$REMOTE_ADDR"; echo $?)"; echo $retval
0 
```

对于打印数据但也有要保存的返回值的程序，返回值将与输出分开捕获：

```
# Two different files, 1 and 2.
$ cat 1
1
$ cat 2
2
$ diffs="$(cmp 1 2)"
$ haveDiffs=$?
$ echo "Have differences? [$haveDiffs] Diffs: [$diffs]"
Have differences? [1] Diffs: [1 2 differ: char 1, line 1]
$ diffs="$(cmp 1 1)"
$ haveDiffs=$?
$ echo "Have differences? [$haveDiffs] Diffs: [$diffs]"
Have differences? [0] Diffs: []

# Or again, if you just want a success variable, reverse with arithmetic expansion:
$ cmp -s 1 2; filesAreIdentical=$((1-$?))
$ echo $filesAreIdentical
0 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-21T22:43:01.713

这是由于`echo`声明。您可以将回声切换为打印并使用`echo`. 下面的作品

```
#!/bin/bash

set -x
echo "enter: "
read input

function password_formula
{
        length=${#input}
        last_two=${input:length-2:length}
        first=`echo $last_two| sed -e 's/\(.\)/\1 /g'|awk '{print $2}'`
        second=`echo $last_two| sed -e 's/\(.\)/\1 /g'|awk '{print $1}'`
        let sum=$first+$second
        sum_len=${#sum}
        print $second
        print $sum

        if [ $sum -gt 9 ]
        then
           sum=${sum:1}
        fi

        value=$second$sum$first
        echo $value
}
result=$(password_formula)
echo $result 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-05T11:55:47.193

可以使用这样的东西，并且仍然保持`return`（*返回控制信号*）和`echo`（*返回信息*）和日志语句（*打印调试/信息消息*）的含义。

```
v_verbose=1
v_verbose_f=""         # verbose file name
FLAG_BGPID=""

e_verbose() {
        if [[ $v_verbose -ge 0 ]]; then
                v_verbose_f=$(tempfile)
                tail -f $v_verbose_f &
                FLAG_BGPID="$!"
        fi
}

d_verbose() {
        if [[ x"$FLAG_BGPID" != "x" ]]; then
                kill $FLAG_BGPID > /dev/null
                FLAG_BGPID=""
                rm -f $v_verbose_f > /dev/null
        fi
}

init() {
        e_verbose

        trap cleanup SIGINT SIGQUIT SIGKILL SIGSTOP SIGTERM SIGHUP SIGTSTP
}

cleanup() {
        d_verbose
}

init

fun1() {
    echo "got $1" >> $v_verbose_f
    echo "got $2" >> $v_verbose_f
    echo "$(( $1 + $2 ))"
    return 0
}

a=$(fun1 10 20)
if [[ $? -eq 0 ]]; then
    echo ">>sum: $a"
else
    echo "error: $?"
fi
cleanup 
```

在这里，我将调试消息重定向到单独的文件，由尾部监视，如果有任何更改，则打印更改，`trap`用于确保后台进程始终结束。

这种行为也可以使用重定向来实现`/dev/stderr`，但是在将一个命令的输出管道传输到另一个命令的输入时可以看到差异。

# r - R 中的 as.numeric 有什么问题？

> ID：15013482
> 
> 赞同：12
> 
> 时间：2013-02-21T22:30:26.170
> 
> 标签：r

```
> X864291X8X74
[1] 8.0000000000  9.0000000000  10.0000000000 6.0000000000  8.0000000000 
10 Levels: 0.0000000000 10.0000000000 12.0000000000 3.0000000000 4.0000000000 6.0000000000 ... NULL

> as.numeric(X864291X8X74)

[1] 8 9 2 6 8 
```

我误解了什么？不应该是 as.numeric 8 9 10 6 8 的结果吗？

我怎样才能得到正确的结果？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-21T22:32:40.647

你的向量是一个`factor`。这个问题已经被问过很多次了，例如：[**这里**](https://stackoverflow.com/questions/7611810/converting-a-factor-to-numeric-without-losing-information-r-as-numeric-doesn)、[**这里**](https://stackoverflow.com/questions/4798343/convert-factor-to-integer)、[**这里**](https://stackoverflow.com/questions/3418128/how-to-convert-a-factor-to-an-integer-numeric-without-a-loss-of-information)。为了将因子转换为数字，您必须先转换为`character`。尝试：

```
as.numeric(as.character(my_vec)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T22:56:15.670

文件在`?factor`状态：

> 建议将因子转换`f`为近似其原始数值， `as.numeric(levels(f))[f]`并且比`as.numeric(as.character(f)).`

所以下面的工作也是如此：

```
as.numeric(levels(my_vec))[my_vec] 
```

# firefox-addon - 如何在 Firefox Mobile 扩展中播放声音？

> ID：15013483
> 
> 赞同：0
> 
> 时间：2013-02-21T22:30:28.600
> 
> 标签：firefox-addon, fennec

我正在为 Firefox Mobile (Fennec) 编写一个扩展，它应该会播放声音。使用nsISound，即

```
var sound = ios.newURI(pathToSoundFile, null, null);
var player = Components.classes["@mozilla.org/sound;1"].createInstance(Components.interfaces.nsISound);
player.play(sound); 
```

在桌面版 Firefox 上运行良好，但在 FF Mobile 上不会产生任何声音。我还尝试在网站上附加一个音频元素，

```
var audioElement = win.content.document.createElement('audio');
audioElement.setAttribute('id','audio_test');
audioElement.setAttribute('src',pathToSoundFile);
win.content.document.body.appendChild(audioElement);
win.content.document.getElementById('audio_test').play(); 
```

这可行，但前提是该网站本地存储在我的计算机上（我假设是由于安全限制）。

我在装有 Android 4.2 的华硕 Transformer 平板电脑上对此进行了测试。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:18:13.057

nsISound 未在 Fennec 上实现。

HTML5 音频应该与数据 URIs 一起使用。读取您的音频文件，对其进行 base64 编码并将其作为 src 传递，例如`"data:audio/ogg;base64," + base64encodeddata`

# c# - 使用 sqlite-net 删除行的 SQLite 异常

> ID：15013487
> 
> 赞同：2
> 
> 时间：2013-02-21T22:30:37.387
> 
> 标签：c#, sqlite, windows-8, windows-store-apps, windows-store

我厌倦了搜索，所以这是我的第一个 SO 问题，希望有人遇到同样的问题并且可以帮助我

# 目标

我正在尝试使用 SQLite 数据库存储我的应用程序数据

# 应用说明

Windows 8 应用 C# XAML 与本地 SQLite 数据库使用**SQLite for Windows 运行时扩展**和**[sqlite-net](http://www.nuget.org/packages/sqlite-net)库**

# 表定义

```
public class Product {
    private int _id;

    [SQLite.PrimaryKey, SQLite.AutoIncrement]
    public int ID
    {
        get { return _id; }
        set { _id = value; }
    }

    private string _date;
    public string DATE
    {
        get { return _date; }
        set { _date = value; }
    }

    private string _desc;
    public string DESC
    {
        get { return _desc; }
        set { _desc = value; }
    }
} 
```

# 问题1

`public int Insert (object obj)`描述如下：

> 插入给定对象并检索其自动递增的主键（如果有）。

但是，每次我插入一行时，它都会返回**1**。我可以使用自动增量 ID 成功插入，但不知何故它没有返回我的 ID。为什么？

# 问题 2

**我可以插入新行但不能删除它们**

解决问题 1 以获取最后一行生成的 ID，我尝试删除行但没有成功。

**请参阅始终失败的示例测试：**

```
using (var db = new SQLiteConnection(Path.Combine(_path, _dbname)))
{
    var p1 = new Product() { DESC = "insert1", DATE = DateTime.Now.ToString() };
    db.Insert(p1);
    p1.ID = 1;
    var p2 = new Product() { DESC = "insert2", DATE = DateTime.Now.ToString() };
    // I am sure that this row is getting ID 2, so it will not have a wrong ID
    p2.ID = 2;
    db.Insert(p2);
    var p3 = new Product() { DESC = "insert3", DATE = DateTime.Now.ToString() };
    db.Insert(p3);
    p3.ID = 3;
    db.Delete<Product>(p2);
} 
```

如您所见，我尝试插入 3 行并删除第二行。行已插入，但我得到以下**SQLite.SQLiteException**异常：

**由于未完成的语句或未完成的备份而无法关闭**

为什么？在那之前和之后我不打开其他连接。

提前致谢

# 解决了

## 问题 1

+1 并感谢@Bridgey 指出该功能与其描述不匹配并进行相关搜索

该函数不会像它所说的那样返回 ID，但它定义了对象 ID。因此，当我插入一个新**Product**时，**Product.ID**将具有最后插入的 ID。

## 问题 2

我改成现在它可以工作了`db.Delete<Product>(p2);`。`db.Delete(p2);`SQLite-net 正确地将行标识为**Product**。我仍然不知道为什么**由于未完成的语句或未完成的备份**异常而无法关闭。如果有人知道为什么请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T23:14:41.530

我认为对于问题 2，问题在于您将 Product 对象作为 Delete 方法的参数传递。文档说：删除具有指定主键的对象。我认为以下应该有效：

```
db.Delete<Product>(p1.ID); 
```

关于问题1，sqlite-net包的Insert方法代码结束：

```
var count = insertCmd.ExecuteNonQuery (vals);

if (map.HasAutoIncPK) {
  var id = SQLite3.LastInsertRowid (Handle);
  map.SetAutoIncPK (obj, id);
}

return count; 
```

如您所见，`count`即使`id`已设置，也会返回。

**编辑：**实际上，根据作者的说法，这是故意的。“插入返回修改的行数。自动递增的列存储在对象中。请参阅文档注释。” [https://github.com/praeclarum/sqlite-net/issues/37](https://github.com/praeclarum/sqlite-net/issues/37)

# python - 忽略 Rsync 中的文件时遇到问题？

> ID：15013489
> 
> 赞同：0
> 
> 时间：2013-02-21T22:30:59.680
> 
> 标签：python, rsync

好的，我有两个文件夹需要同步，但在第一次上传之前需要忽略某些文件。

为了理解我的意思，比如说我有一个名为 src 的文件夹和另一个名为 dest 的文件夹。

src 包含 settings.properties、一些 python 代码和一个模板属性文件。

dest 包含相同的 settings.properties，相同的 python 代码，但模板属性文件在同步过程中填充（由包装协议的脚本完成）

现在，如果我决定修改 dest 中的 python 代码，则应该在 src 文件夹中更新 python 代码，但应该忽略填充的新 template.properties。

我尝试使用排除和包含，但我读到您不能同时使用两者，因为“包含优先”

使用 Windows，我目前正在使用将路径格式化为默认“/cygdrive/C/”的 python 脚本，然后填充属性文件，然后运行 ​​rsync

# jquery - 单击按钮时滑动html内容

> ID：15013495
> 
> 赞同：0
> 
> 时间：2013-02-21T22:31:51.400
> 
> 标签：jquery, html, slide

我想知道是否有人可以帮助我使用 jquery 循环或脚本。当一个按钮被点击时，我想让一个 div 动画在屏幕上滑动，当再次点击另一个 div 时，另一个 div 会向下滑动。当再次单击按钮时，另一个 div 依此类推。

这是到目前为止我完成的 html 标记

```
 <section id="1-text" class="horizontal-gallery-text">
        <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis massa est, accumsan sed eleifend et, pulvinar sed lacus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Etiam placerat enim et metus porta eu elementum augue ultricies. Fusce bibendum augue interdum neque fringilla at v</p>
    </section>

    <section id="2-text" class="vertical-gallery-text init-hidden">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis massa est, accumsan sed eleifend et, pulvinar sed lacus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Etiam placerat enim et metus porta eu elementum augue ultricies. Fusce bibendum augue interdum neque fringilla at v</p>
    </section>

    <section id="3-text" class="horizontal-gallery-text init-hidden">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis massa est, accumsan sed eleifend et, pulvinar sed lacus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Etiam placerat enim et metus porta eu elementum augue ultricies. Fusce bibendum augue interdum neque fringilla at v</p> 
    </section> 
```

和 javascript：

```
var totalslides = '3';
        var slidenum = 0;
        var slidenext = 0;
        var slideType = '';
        $(function(){
            $('#gallery-next').data('counter',1);
            $('#gallery-next').click(function() {
               slidenum = parseInt($('#gallery-next').data('counter'));
               slidenext = slidenum+1
               slideType = $('#'+slidenum+'-slide').attr('class')
               slideType = slideType.split('-')[0]
               if (slideType=='horizontal') slideType='up';
               else slideType = 'right';
                //alert('Next slideType is: ' + slideType)
                //hide(slide) is a jQueryUI function, so ensure you include that lib
               $('#'+slidenext+'-slide').delay(500).delay(500).show('slide',{direction:slideType}, 1000);
               $('#'+slidenum+'-slide').delay(100).fadeOut(100);
               slidenum = slidenum % totalslides + 1;
               $('#gallery-next').data('counter',slidenum);
            });
        }); 
```

到目前为止，它滑动了一些幻灯片，但是卡在了一些幻灯片上。想知道是否有人可以看到问题或想到更好的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:38:23.177

我不知道问题是什么，但我有不同的方法来做到这一点。

我假设您希望 div 1 向右滑动，然后 div 2 向下滑动，然后 div 3 向右滑动。

我对这种事情使用 css3 转换，而不是 jquery（我不喜欢 jquery）。您应该有以下 html 代码：

```
<!DOCTYPE html>
<html>
<head>
    <style>
        section{
            position:relative;
            transition: all 0.1s;
        }
    </style>
    <script type="text/javascript">
        var slidenum=0;
        window.onload=function(){
            var button=document.getElementById('gallery-next');
            button.onclick=function(){
                var curslide=document.getElementById(slidenum+'-slide');
                switch(slidenum++){
                    //replace the 700px with the value you want
                    case 1:curslide.style.top='700px';break;
                    case 2:
                    case 0:curslide.style.left='700px';break;
                }
                if(slidenum===3) button.addEventListener('click',function(){alert('we\'re already done')},false);
            }
        }
    </script>
</head>
<body>
    <!--<sections> here-->
</body>
</html> 
```

这未经测试

# python - 在不知道数据布局的情况下访问 json 类型数据？

> ID：15013497
> 
> 赞同：0
> 
> 时间：2013-02-21T22:32:05.243
> 
> 标签：python, json, list, dictionary

我有一个包含 JSON 数据的文件，我正在使用 json.load 加载。假设我想在 json 数据中放入一个变量，该变量引用另一个数据字段。如何在 python 中处理这个引用？

```
例如：

{
  “字典”：{
    “list_1”：[
      “项目_1”
    ],

    “list_2”：[
      “$dictionary.list_1”
    ]
  }
}

```

当我遇到 $ 时，我希望 list_2 从以下位置获取数据：dictionary.list_1 并扩展 list_2，就好像我在我的 python 代码中编写的一样：

```
jsonData["dictionary"]["list_2"].extend(jsonData["dictionary"]["list_1"])

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:05:10.333

据我所知，JSON 标准中没有任何内容可供参考。我的第一个建议是使用[YAML](http://www.yaml.org/)，它确实以[Node Anchors](http://www.yaml.org/spec/1.2/spec.html#id2785586)的形式引用。Python 有一个很好的 YAML 实现，它支持这些。

话虽如此，如果您打算使用 JSON，则必须推出自己的实现。

一个可能的例子（虽然这并没有通过引用数组扩展当前数组，因为在 dicts 的情况下这是不明确的，它用它引用的值替换引用）如下。请注意，它不处理格式错误的引用，您必须自己添加错误检查或保证没有格式错误的引用。如果您想将其更改为扩展而不是替换，您可以，但您比我更了解您的用例，因此您可以通过这种方式指定它。这是为了给你一个起点。

```
def resolve_references(structure, sub_structure=None):
    if sub_structure is None:
        return resolve_references(structure, structure)
    if isinstance(sub_structure, list):
        tmp = []
        for item in sub_structure:
            tmp.append(resolve_references(structure, item))
        return tmp

    if isinstance(sub_structure, dict):
        tmp = {}
        for key,value in sub_structure.items():
            tmp[key] = resolve_references(structure, value)
        return tmp

    if isinstance(sub_structure, str) or isinstance(sub_structure, unicode):
        if sub_structure[0] != "$":
            return sub_structure

        keys = sub_structure[1:].split(".")
        def get_value(obj, key):
            if isinstance(obj, dict):
                return obj[key]
            if isinstance(obj, list):
                return obj[int(key)]
            return value

        value = get_value(structure, keys[0])
        for key in keys[1:]:
            value = get_value(value, key)
        return value
    return sub_structure 
```

示例用法：

```
>>> import json
>>> json_str = """
... {
...   "dictionary" : {
...     "list_1" : [
...       "item_1"
...     ],
... 
...     "list_2" : "$dictionary.list_1"
...   }
... }
... """
>>> obj = json.loads(json_str)
>>> resolve_references(obj)
{u'dictionary': {u'list_2': [u'item_1'], u'list_1': [u'item_1']}} 
```

# docx - 如何用子块显示这个嵌套数组？

> ID：15013499
> 
> 赞同：0
> 
> 时间：2013-02-21T22:32:19.597
> 
> 标签：docx, tinybutstrong

数组的单项：

```
array(3) {
  'name' =>
  string(19) "trigger_assignments"
  'description' =>
  string(67) "Maps trigger to hook and operation assignments from trigger.module."
  'fields' =>
  array(3) {
    [0] =>
    array(3) {
      'name' =>
      string(4) "hook"
      'description' =>
      string(76) "Primary Key: The name of the internal Drupal hook; for example, node_insert."
      'type' =>
      string(7) "varchar"
    }
    [1] =>
    array(3) {
      'name' =>
      string(3) "aid"
      'description' =>
      string(36) "Primary Key: Action's {actions}.aid."
      'type' =>
      string(7) "varchar"
    }
    [2] =>
    array(3) {
      'name' =>
      string(6) "weight"
      'description' =>
      string(67) "The weight of the trigger assignment in relation to other triggers."
      'type' =>
      string(3) "int"
    }
  }
} 
```

我无法显示“字段”数组。它应该显示在表格中，我的代码：

```
[c;block=begin; sub1=(fields)]
Nazwa tabeli: [c.name;]
[c.description;]
Lista pól tabeli:

Nazwa   Typ Opis
[c_sub1.name;block=tr]  [c_sub1.type;]  [c_sub1.description;]

[c;block=end] 
```

样本结果为：

```
Nazwa tabeli: aggregator_category
Stores categories for aggregator feeds and feed items.
Lista pól tabeli:

Nazwa   Typ Opis
[c_sub1.name;block=tr]  [c_sub1.type;]  [c_sub1.description;] 
```

所以没有显示带有字段的表格。

有人可以给我任何建议吗？

代码：

```
$TBS->MergeBlock('c', $table); 
```

`$table`里面有上面的物品。

XML:

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<w:document xmlns:wpc="http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp14="http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml" xmlns:wpg="http://schemas.microsoft.com/office/word/2010/wordprocessingGroup" xmlns:wpi="http://schemas.microsoft.com/office/word/2010/wordprocessingInk" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml" xmlns:wps="http://schemas.microsoft.com/office/word/2010/wordprocessingShape" mc:Ignorable="w14 wp14" xml:space="preserve">
 <w:body>
  <w:p w:rsidRDefault="00905443" w:rsidP="00273597">
   <w:r>
    <w:t>
    </w:t>
   </w:r>
  </w:p>
  <w:p w:rsidRDefault="00595A19" w:rsidP="00273597">
   <w:r>
    <w:t>
     Nazwa tabeli: aggregator_category
    </w:t>
   </w:r>
  </w:p>
  <w:p w:rsidRDefault="008248E2" w:rsidP="00273597">
   <w:r>
    <w:t>
     Stores categories for aggregator feeds and feed items.
    </w:t>
   </w:r>
  </w:p>
  <w:p w:rsidRDefault="00462CAC" w:rsidP="00273597">
   <w:r>
    <w:t>
     Lista pól tabeli:
    </w:t>
   </w:r>
  </w:p>
  <w:p w:rsidRDefault="00F53554" w:rsidP="00F53554">
   <w:pPr>
    <w:spacing w:after="0" w:line="240" w:lineRule="auto"/>
    <w:rPr>
     <w:rFonts w:ascii="Times New Roman" w:eastAsia="Times New Roman" w:hAnsi="Times New Roman"/>
     <w:sz w:val="24"/>
     <w:szCs w:val="24"/>
    </w:rPr>
   </w:pPr>
  </w:p>
  <w:tbl>
   <w:tblPr>
    <w:tblpPr w:leftFromText="141" w:rightFromText="141" w:vertAnchor="text" w:horzAnchor="margin" w:tblpXSpec="center" w:tblpY="425"/>
    <w:tblW w:w="9606" w:type="dxa"/>
    <w:tblBorders>
     <w:top w:val="single" w:sz="4" w:space="0" w:color="auto"/>
     <w:left w:val="single" w:sz="4" w:space="0" w:color="auto"/>
     <w:bottom w:val="single" w:sz="4" w:space="0" w:color="auto"/>
     <w:right w:val="single" w:sz="4" w:space="0" w:color="auto"/>
     <w:insideH w:val="single" w:sz="4" w:space="0" w:color="auto"/>
     <w:insideV w:val="single" w:sz="4" w:space="0" w:color="auto"/>
    </w:tblBorders>
    <w:tblLook w:val="01E0" w:firstRow="1" w:lastRow="1" w:firstColumn="1" w:lastColumn="1" w:noHBand="0" w:noVBand="0"/>
   </w:tblPr>
   <w:tblGrid>
    <w:gridCol w:w="2440"/>
    <w:gridCol w:w="1567"/>
    <w:gridCol w:w="5599"/>
   </w:tblGrid>
   <w:tr w:rsidTr="005C7EBF">
    <w:trPr>
     <w:trHeight w:hRule="exact" w:val="340"/>
     <w:tblHeader/>
    </w:trPr>
    <w:tc>
     <w:tcPr>
      <w:tcW w:w="2440" w:type="dxa"/>
      <w:shd w:val="clear" w:color="auto" w:fill="C0C0C0"/>
      <w:vAlign w:val="center"/>
     </w:tcPr>
     <w:p w:rsidRDefault="00CE4402" w:rsidP="005E0ABE">
      <w:pPr>
       <w:spacing w:line="240" w:lineRule="auto"/>
       <w:jc w:val="center"/>
       <w:rPr>
        <w:b/>
       </w:rPr>
      </w:pPr>
      <w:r>
       <w:rPr>
        <w:b/>
       </w:rPr>
       <w:t>
        Nazwa
       </w:t>
      </w:r>
     </w:p>
    </w:tc>
    <w:tc>
     <w:tcPr>
      <w:tcW w:w="1567" w:type="dxa"/>
      <w:shd w:val="clear" w:color="auto" w:fill="C0C0C0"/>
     </w:tcPr>
     <w:p w:rsidRDefault="00CE4402" w:rsidP="005E0ABE">
      <w:pPr>
       <w:spacing w:line="240" w:lineRule="auto"/>
       <w:jc w:val="center"/>
       <w:rPr>
        <w:b/>
       </w:rPr>
      </w:pPr>
      <w:r>
       <w:rPr>
        <w:b/>
       </w:rPr>
       <w:t>
        Typ
       </w:t>
      </w:r>
     </w:p>
    </w:tc>
    <w:tc>
     <w:tcPr>
      <w:tcW w:w="5599" w:type="dxa"/>
      <w:shd w:val="clear" w:color="auto" w:fill="C0C0C0"/>
      <w:vAlign w:val="center"/>
     </w:tcPr>
     <w:p w:rsidRDefault="00CE4402" w:rsidP="005E0ABE">
      <w:pPr>
       <w:spacing w:line="240" w:lineRule="auto"/>
       <w:jc w:val="center"/>
       <w:rPr>
        <w:b/>
       </w:rPr>
      </w:pPr>
      <w:r>
       <w:rPr>
        <w:b/>
       </w:rPr>
       <w:t>
        Opis
       </w:t>
      </w:r>
     </w:p>
    </w:tc>
   </w:tr>
   <w:tr w:rsidTr="005C7EBF">
    <w:trPr>
     <w:trHeight w:hRule="exact" w:val="521"/>
    </w:trPr>
    <w:tc>
     <w:tcPr>
      <w:tcW w:w="2440" w:type="dxa"/>
     </w:tcPr>
     <w:p w:rsidRDefault="005C7EBF" w:rsidP="005C7EBF">
      <w:pPr>
       <w:spacing w:line="240" w:lineRule="auto"/>
      </w:pPr>
      <w:r>
       <w:rPr>
        <w:rFonts w:ascii="Verdana" w:eastAsia="Times New Roman" w:hAnsi="Verdana"/>
        <w:color w:val="000000"/>
        <w:sz w:val="18"/>
        <w:szCs w:val="18"/>
       </w:rPr>
       <w:t>
        [c_sub1.name;block=tr]
       </w:t>
      </w:r>
     </w:p>
    </w:tc>
    <w:tc>
     <w:tcPr>
      <w:tcW w:w="1567" w:type="dxa"/>
     </w:tcPr>
     <w:p w:rsidRDefault="005C7EBF" w:rsidP="005C7EBF">
      <w:pPr>
       <w:spacing w:after="0" w:line="240" w:lineRule="auto"/>
      </w:pPr>
      <w:r>
       <w:rPr>
        <w:rFonts w:ascii="Verdana" w:eastAsia="Times New Roman" w:hAnsi="Verdana"/>
        <w:color w:val="000000"/>
        <w:sz w:val="18"/>
        <w:szCs w:val="18"/>
       </w:rPr>
       <w:t>
        [c_sub1.type;]
       </w:t>
      </w:r>
     </w:p>
    </w:tc>
    <w:tc>
     <w:tcPr>
      <w:tcW w:w="5599" w:type="dxa"/>
     </w:tcPr>
     <w:p w:rsidRDefault="005C7EBF" w:rsidP="005C7EBF">
      <w:pPr>
       <w:spacing w:after="0" w:line="240" w:lineRule="auto"/>
      </w:pPr>
      <w:r>
       <w:rPr>
        <w:rFonts w:ascii="Verdana" w:eastAsia="Times New Roman" w:hAnsi="Verdana"/>
        <w:color w:val="000000"/>
        <w:sz w:val="18"/>
        <w:szCs w:val="18"/>
       </w:rPr>
       <w:t>
        [c_sub1.description;]
       </w:t>
      </w:r>
     </w:p>
    </w:tc>
   </w:tr>
  </w:tbl>
  <w:p w:rsidRDefault="00A927EE" w:rsidP="00273597">
   <w:pPr>
    <w:rPr>
     <w:rStyle w:val="Strong"/>
     <w:rFonts w:ascii="Verdana" w:hAnsi="Verdana"/>
     <w:color w:val="006600"/>
     <w:sz w:val="18"/>
     <w:szCs w:val="18"/>
     <w:shd w:val="clear" w:color="auto" w:fill="FFFFFF"/>
    </w:rPr>
   </w:pPr>
  </w:p>
  <w:p w:rsidRDefault="00905443" w:rsidP="00273597">
   <w:r>
    <w:rPr>
     <w:rFonts w:ascii="Verdana" w:hAnsi="Verdana"/>
     <w:color w:val="000000"/>
     <w:sz w:val="18"/>
     <w:szCs w:val="18"/>
     <w:shd w:val="clear" w:color="auto" w:fill="FFFFFF"/>
    </w:rPr>
    <w:t>
    </w:t>
   </w:r>
  </w:p>
  <w:sectPr>
   <w:pgSz w:w="11906" w:h="16838"/>
   <w:pgMar w:top="1417" w:right="1417" w:bottom="1417" w:left="1417" w:header="708" w:footer="708" w:gutter="0"/>
   <w:cols w:space="708"/>
   <w:docGrid w:linePitch="360"/>
  </w:sectPr>
 </w:body>
</w:document> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:42:35.657

我无法用您提供的信息复制您的结果。使用这两个测试文件，您的数据打印如下：

```
<div>
Name: trigger_assignments<Br>
Maps trigger to hook and operation assignments from trigger.module.
<Br >List:
<table>
    <tr>
        <td>Nazwa</td>
        <td>Typ</td>
        <td>Opis</td>
    </tr>
    <tr>
        <td>hook</td>
        <td>varchar</td>
        <td>Primary Key: The name of the internal Drupal hook; for example, node_insert.</td>
    </tr><tr>
        <td>aid</td>
        <td>varchar</td>
        <td>Primary Key: Action's {actions}.aid.</td>
    </tr><tr>
        <td>weight</td>
        <td>int</td>
        <td>The weight of the trigger assignment in relation to other triggers.</td>
    </tr>
</table>
<br /><br />
</div> 
```

测试.php：

```
$test = array(
    array ('name' => "trigger_assignments", 
        'description' => "Maps trigger to hook and operation assignments from trigger.module.",
        'fields' => array(
             array('name' => "hook",
                 'description' => "Primary Key: The name of the internal Drupal hook; for example, node_insert.",
                 'type' =>  "varchar"),
              array('name' => "aid",
                  'description' => "Primary Key: Action's {actions}.aid.",
                  'type' =>  "varchar"),
              array('name' => "weight",
                  'description' => "The weight of the trigger assignment in relation to other triggers.",
                  'type' =>  "int")
        )
    )
);
include_once('includes/tbs_class.php');
$TBS = new clsTinyButStrong;

$TBS->LoadTemplate('test.html');
$TBS->MergeBlock('test', $test);

$TBS->Show(); 
```

和test.html：

```
<div>
[test;block=begin; sub1=(fields)]
Name: [test.name;]<Br>
[test.description;]
<Br >List:
<table>
    <tr>
        <td>Nazwa</td>
        <td>Typ</td>
        <td>Opis</td>
    </tr>
    <tr>
        <td>[test_sub1.name;block=tr]</td>
        <td>[test_sub1.type;]</td>
        <td>[test_sub1.description;]</td>
    </tr>
</table>
<br /><br />
[test;block=end]
</div> 
```

不知道这是否有帮助。也许您可以提供有关变量“c”和 $TBS->mergeBlock() 命令的更多信息？

# perl - apache错误拒绝访问方法

> ID：15013501
> 
> 赞同：1
> 
> 时间：2013-02-21T22:32:25.767
> 
> 标签：perl, apache, mod-perl

我完全被卡住了，不知道为什么会这样——请帮忙！！:)

我有一个试图调用用 Perl 编码的方法的 javascript。

javascript函数：

```
function getSOAP() {
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.open('POST', 'http://localhost/ispy/cwebs/hi/', true);

  // build SOAP request
  var sr =
    '<?xml version="1.0" encoding="UTF-8"?>' +
    '<Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">' +
      '<Body>' +
        '<hi>' +
          '<who>markh</who>' +
        '</hi>' +
      '</Body>' +
    '</Envelope>';

  xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4) {
        if (xmlhttp.status == 200) { alert('done use firebug to see responce'); }
    }
  }
  // Send the POST request
  xmlhttp.setRequestHeader('Content-Type', 'text/xml; charset=utf-8');
  xmlhttp.setRequestHeader("SOAPAction", '"urn:iSPYcwebs#hi"');
  xmlhttp.setRequestHeader("Accept", '"application/soap"');
  xmlhttp.send(sr);
} 
```

====== 在 apache httd.conf 中：

```
# BEGIN MOD_PERL CONFIG
ScriptAlias /perl-bin/ "C:/work/dev/indigoampp/apache-2.2.11/perl-bin/"

<Location /ispy/cwebs/hi>
  SetHandler perl-script
  PerlSendHeader On
  PerlResponseHandler Apache::SOAP
  PerlSetVar dispatch_to "C:/work/dev/indigoampp/perl-5.10.0/site, iSPYcwebs::hi"
  PerlSetVar options "compress_threshold => 1000"
</Location>

<Directory "C:/work/dev/indigoampp/apache-2.2.11/htdocs">
  <IfModule mod_perl.c>
    # Files directive is only valid in Directory section
    <Files ~ "\.(pl|pm|cgi)$">
      SetHandler perl-script
      PerlHandler ModPerl::Registry
      Options ExecCGI
      Allow from all
      PerlSendHeader On
    </Files>
  </IfModule>
</Directory>

# END MOD_PERL CONFIG 
```

======

我试图调用的 Perl 代码：

```
#!C:/work/dev/indigoampp/perl-5.10.0/bin/perl.exe -w

package iSPYcwebs;

use strict;

use SOAP::Lite +trace => 'debug';

use vars qw(@ISA);
@ISA = qw(&hi SOAP::Server::Parameters );

sub hi {
  my $self = shift;

  my $envelope = pop;
  my $who = $envelope->dataof("//hi/who")->value;
  return SOAP::Data->name('hello' => 'iSPY says hello to '.$who);
}

1; 
```

======

这是错误字符串：

拒绝访问 C:\work\dev\indigoampp\perl-5.10.0\site\lib/SOAP/Lite.pm 第 2806 行的类 (main) 中的方法 (hi)。

======

我敢肯定我不能成为这个星球上第一个尝试这个的人，但我似乎无法在任何地方找到答案。Stackoverflow - 你是我最后的希望！！

# java - 表中的 Java JComboBox 在单击单元格之前未显示

> ID：15013504
> 
> 赞同：0
> 
> 时间：2013-02-21T22:32:38.580
> 
> 标签：java, swing, jtable, jcombobox

好的，所以我有一个表格设置，其中我已将 JComboBox 添加到特定单元格，就像他们在[此处](https://stackoverflow.com/questions/3426175/how-to-add-jcombobox-to-a-specific-cell-in-the-jtable)的示例中所做的那样，但由于某种原因，组合框在选择该单元格之前不会显示。如果我选择该单元格，组合框会打开它的列表供我选择。无论我是否更改选择，如果我单击表格中的另一个单元格，它就会显示从组合框中选择的项目的文本，就好像它是根据需要显示在表格中的简单字符串一样。

我的问题是：如何让它在 JComboBox 中显示选定的值而不必先选择单元格？

编辑：我忘记提及的一件事是；而不是`DefaultTableModel data`像他们那样事先声明，而是稍后使用将项目添加到 DTM`model.addRow();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:36:10.263

这是正常行为。表使用渲染器和编辑器。单元格的默认渲染器只是一个 JLabel，因此您看到的只是文本。当您单击单元格时，将调用编辑器，因此您会看到组合框。

如果您希望单元格看起来像一个组合框，即使它没有被编辑，那么您需要为该列创建一个组合框渲染器。

阅读 Swing 教程中有关[使用自定义渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)的部分以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T09:54:27.100

您可以尝试创建自己的渲染器，如[本](https://stackoverflow.com/a/16738785/3351662 "这")例所示。

```
public void example(){  

    TableColumn tmpColum =table.getColumnModel().getColumn(1);
    String[] DATA = { "Data 1", "Data 2", "Data 3", "Data 4" };
    JComboBox comboBox = new JComboBox(DATA);

    DefaultCellEditor defaultCellEditor=new DefaultCellEditor(comboBox);
    tmpColum.setCellEditor(defaultCellEditor);
    tmpColum.setCellRenderer(new CheckBoxCellRenderer(comboBox));
    table.repaint();
}

/**
   Custom class for adding elements in the JComboBox.
*/
class CheckBoxCellRenderer implements TableCellRenderer {
    JComboBox combo;
    public CheckBoxCellRenderer(JComboBox comboBox) {
    this.combo = new JComboBox();
    for (int i=0; i<comboBox.getItemCount(); i++){
        combo.addItem(comboBox.getItemAt(i));
    }
    }
    public Component getTableCellRendererComponent(JTable jtable, 
                           Object value, 
                           boolean isSelected, 
                           boolean hasFocus, 
                           int row, int column) {
    combo.setSelectedItem(value);
    return combo;
    }
} 
```

[或者您可以像本](https://stackoverflow.com/a/17348287 "这")示例中那样自定义默认渲染器。

```
final JComboBox combo = new JComboBox(items);
TableColumn col = table.getColumnModel().getColumn(ITEM_COL);
col.setCellRenderer(new DefaultTableCellRenderer(){
    @Override
    public Component getTableCellRendererComponent(JTable table, Object value,
                               boolean isSelected, boolean hasFocus, int row, int column) {
        JLabel label = (JLabel) super.getTableCellRendererComponent(table,
                                    value, isSelected, hasFocus, row, column);
        label.setIcon(UIManager.getIcon("Table.descendingSortIcon"));
        return label;
    }
    }); 
```

第一个示例使单元格在单击后看起来像 JComboBox。第二个示例向 JComboCox 添加了一个箭头图标，显示 JComboBox 是可单击的。我用了第二个例子，结果可以在[这里](http://oi58.tinypic.com/ohjspw.jpg "这里")看到。

# c# - 从列表中删除一个项目c#

> ID：15013512
> 
> 赞同：0
> 
> 时间：2013-02-21T22:33:05.390
> 
> 标签：c#, list

我在从 C# 的列表中删除项目时遇到问题。我当前的代码如下：

```
for (int i = current.Count - 1; i >= 0; i--)
    {
        foreach (ListItem li in sp_list.Items)
        {
            if (li.Text == current[i].uname)
            {
                current.RemoveAt(i);
            }
        }
    } 
```

代码的目的是将列表框中的现有项目与新添加的项目进行比较，以便我知道刚刚添加了哪些项目。所以目前我正在从数据库中获取当前的列表框项目（它们存储在这里，它是一个数据绑定列表框），将它们输入到一个列表中，对于每个列表项，将它们与列表框中的项目进行比较，然后如果它们匹配，则从列表中删除该项目。

因此，最后，如果我添加两个新条目，列表应该只存储两个新添加的值。

该代码无法正常工作，因为第一项被删除得很好，但是 i 的值大于 current.count - 因此我得到一个超出范围的异常！

有人可以帮我解决这个问题吗？抱歉这个令人困惑的问题，很难解释！谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T22:37:35.867

你可以用 Linq 做到这一点。不确定是否需要转换为 ListItem（您可以将其删除）

```
current.RemoveAll(x => sp_list.Items.Cast<ListItem>()
                              .Any(li => li.Text == x.uname)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T22:40:17.520

找到匹配值并将其从列表中删除后，您希望跳出内部循环以检查下一项。

```
 if (li.Text == current[i].uname)
        {
            current.RemoveAt(i);
            break;
        } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T22:40:49.343

这个怎么样：

```
foreach (ListItem li in sp_list.Items) {
    if (current.Contains(li.Text)) {
        current.Remove(li.Text);
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T22:41:55.767

你的嵌套是错误的，我想你想要的，

```
foreach (ListItem li in sp_list.Items)
{
    for (int i = current.Count - 1; i >= 0; i--)
    {
        if (li.Text == current[i].uname)
        {
            current.RemoveAt(i);
        }
    }
} 
```

或者，使用 linq，

```
// For lookup performance.
var items = new HashSet(sp_list.Items.Select(i => i.text));

current = current.Where(c => !items.Contains(c.uname)).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T22:44:05.773

您可以以相反的顺序遍历列表并使用 RemoveAt(i) 删除项目。同样出于效率目的，您可能希望将 ListItem 文本放在 Set 中，这样您就不必为每个当前项目循环遍历 sp_list.Items。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T22:41:02.570

在之后放置一个`break`声明，`RemoveAt`这样您就不会再次删除该项目。

# perl - Perl 中的多语言文本排序，在 Windows 上，使用区域设置

> ID：15013515
> 
> 赞同：4
> 
> 时间：2013-02-21T22:33:23.453
> 
> 标签：perl, unicode, locale, multilingual, collation

我正在构建一个用于对不同语言的书籍索引进行排序的软件。它使用 Perl，并脱离语言环境。我正在 Unix 上开发它，但它需要可移植到 Windows。这应该在原则上起作用，还是依靠语言环境，我是不是找错了树？最重要的是，Windows 确实是我需要它工作的地方，但我更喜欢在我的 UNIX 环境中进行开发。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T03:09:12.103

假设您的起点是 Unicode，因为您一直非常小心地解码所有传入的数据，无论其本机编码可能是什么，那么以`Unicode::Collate`模块为起点很容易使用。

如果您想要区域设置定制，那么您可能想要开始`Unicode::Collate::Locale`。

## 解码成 Unicode

如果你在全 UTF8 环境中运行，这很容易，但如果你受制于随机所谓的“语言环境”（或者更糟糕的是，微软称之为“代码页”的丑陋事物）的变迁，那么你可能想要获取 CPAN`Encode::Locale`模块来帮助您。例如：

```
 use Encode;
 use Encode::Locale;

 # use "locale" as an arg to encode/decode
 @ARGV = map { decode(locale =>  $_) } @ARGV;

 # or as a stream for binmode or open
 binmode $some_fh, ":encoding(locale)";

 binmode STDIN,  ":encoding(console_in)"  if -t STDIN;
 binmode STDOUT, ":encoding(console_out)"  if -t STDOUT;
 binmode STDERR, ":encoding(console_out)"  if -t STDERR; 
```

（如果是我，我只会`":utf8"`用于输出。）

* * *

## 标准整理，加上语言环境和剪裁

关键是，一旦你把所有东西都解码成内部 Perl 格式，你就可以使用`Unicode::Collate`它`Unicode::Collate::Locale`了。这些真的很容易：

```
 use v5.14;
   use utf8;
   use Unicode::Collate;
   my @exes = qw( x⁷ x⁰ x⁸ x³ x⁶ x⁵ x⁴ x² x⁹ x¹ );
   @exes = Unicode::Collate->new->sort(@exes);
   say "@exes";

   # prints: x⁰ x¹ x² x³ x⁴ x⁵ x⁶ x⁷ x⁸ x⁹ 
```

或者他们可以很花哨。这是一个尝试处理书名的方法：它去除了主要文章和零填充数字。

```
my $collator = Unicode::Collate->new(
    --upper_before_lower => 1,
    --preprocess => {
        local $_ = shift;
        s/^ (?: The | An? ) \h+ //x;  # strip articles
        s/ ( \d+ ) / sprintf "%020d", $1 /xeg;
        return $_;
    };
); 
```

现在只需使用该对象的`sort`方法进行排序。

有时你需要把排序翻过来。例如：

```
 my $collator = Unicode::Collate->new();
 for my $rec (@recs) {
     $rec->{NAME_key} = 
        $collator->getSortKey( $rec->{NAME} );
 }
 @srecs = sort {
     $b->{AGE}       <=>  $a->{AGE}
                     ||
     $a->{NAME_key}  cmp  $b->{NAME_key}
 } @recs; 
```

您必须这样做的原因是因为您正在对具有各种字段的记录进行排序。二进制排序键允许您对`cmp`通过您选择的/自定义整理器对象的数据使用运算符。

collat​​or 对象的完整构造函数具有正式语法的所有这些：

```
 $Collator = Unicode::Collate->new(
         UCA_Version => $UCA_Version,
         alternate => $alternate, # alias for 'variable'
         backwards => $levelNumber, # or \@levelNumbers
         entry => $element,
         hangul_terminator => $term_primary_weight,
         highestFFFF => $bool,
         identical => $bool,
         ignoreName => qr/$ignoreName/,
         ignoreChar => qr/$ignoreChar/,
         ignore_level2 => $bool,
         katakana_before_hiragana => $bool,
         level => $collationLevel,
         minimalFFFE => $bool,
         normalization  => $normalization_form,
         overrideCJK => \&overrideCJK,
         overrideHangul => \&overrideHangul,
         preprocess => \&preprocess,
         rearrange => \@charList,
         rewrite => \&rewrite,
         suppress => \@charList,
         table => $filename,
         undefName => qr/$undefName/,
         undefChar => qr/$undefChar/,
         upper_before_lower => $bool,
         variable => $variable,
      ); 
```

但是您通常不必担心几乎所有这些。事实上，如果您想使用 CLDR 数据来定制特定国家/地区的语言环境，您应该只使用`Unicode::Collate::Locale`，它正好为构造函数添加了一个参数：`locale => $country_code`.

```
 use Unicode::Collate::Locale;
 $coll = Unicode::Collate::Locale->
           new(locale => "fr");
 @french_text = $coll->sort(@french_text); 
```

看看这有多容易？

但你也可以做其他很酷的事情。

```
 use Unicode::Collate::Locale;
 my $Collator = new Unicode::Collate::Locale::
                 locale => "de__phonebook",
                 level  => 1,
                 normalization => undef,
                ;

 my $full = "Ich müß Perl studieren.";
 my $sub = "MUESS";
 if (my ($pos,$len) = $Collator->index($full, $sub)) {
     my $match = substr($full, $pos, $len);
     say "Found match of literal ‹$sub› in ‹$full› as ‹$match›";

 } 
```

运行时，它说：

```
 Found match of literal ‹MUESS› in ‹Ich müß Perl studieren.› as ‹müß› 
```

以下是模块 v0.96 中可用的语言环境`Unicode::Collate::Locale`，取自其手册页：

```
 locale name       description
--------------------------------------------------------------
 af                Afrikaans
 ar                Arabic
 as                Assamese
 az                Azerbaijani (Azeri)
 be                Belarusian
 bg                Bulgarian
 bn                Bengali
 bs                Bosnian
 bs_Cyrl           Bosnian in Cyrillic (tailored as Serbian)
 ca                Catalan
 cs                Czech
 cy                Welsh
 da                Danish
 de__phonebook     German (umlaut as 'ae', 'oe', 'ue')
 ee                Ewe
 eo                Esperanto
 es                Spanish
 es__traditional   Spanish ('ch' and 'll' as a grapheme)
 et                Estonian
 fa                Persian
 fi                Finnish (v and w are primary equal)
 fi__phonebook     Finnish (v and w as separate characters)
 fil               Filipino
 fo                Faroese
 fr                French
 gu                Gujarati
 ha                Hausa
 haw               Hawaiian
 hi                Hindi
 hr                Croatian
 hu                Hungarian
 hy                Armenian
 ig                Igbo
 is                Icelandic
 ja                Japanese [1]
 kk                Kazakh
 kl                Kalaallisut
 kn                Kannada
 ko                Korean [2]
 kok               Konkani
 ln                Lingala
 lt                Lithuanian
 lv                Latvian
 mk                Macedonian
 ml                Malayalam
 mr                Marathi
 mt                Maltese
 nb                Norwegian Bokmal
 nn                Norwegian Nynorsk
 nso               Northern Sotho
 om                Oromo
 or                Oriya
 pa                Punjabi
 pl                Polish
 ro                Romanian
 ru                Russian
 sa                Sanskrit
 se                Northern Sami
 si                Sinhala
 si__dictionary    Sinhala (U+0DA5 = U+0DA2,0DCA,0DA4)
 sk                Slovak
 sl                Slovenian
 sq                Albanian
 sr                Serbian
 sr_Latn           Serbian in Latin (tailored as Croatian)
 sv                Swedish (v and w are primary equal)
 sv__reformed      Swedish (v and w as separate characters)
 ta                Tamil
 te                Telugu
 th                Thai
 tn                Tswana
 to                Tonga
 tr                Turkish
 uk                Ukrainian
 ur                Urdu
 vi                Vietnamese
 wae               Walser
 wo                Wolof
 yo                Yoruba
 zh                Chinese
 zh__big5han       Chinese (ideographs: big5 order)
 zh__gb2312han     Chinese (ideographs: GB-2312 order)
 zh__pinyin        Chinese (ideographs: pinyin order) [3]
 zh__stroke        Chinese (ideographs: stroke order) [3]
 zh__zhuyin        Chinese (ideographs: zhuyin order) [3]

   Locales according to the default UCA rules include chr (Cherokee), de (German), en (English), ga (Irish), id (Indonesian),
   it (Italian), ka (Georgian), ms (Malay), nl (Dutch), pt (Portuguese), st (Southern Sotho), sw (Swahili), xh (Xhosa), zu
   (Zulu).

   Note

   [1] ja: Ideographs are sorted in JIS X 0208 order.  Fullwidth and halfwidth forms are identical to their regular form.  The
   difference between hiragana and katakana is at the 4th level, the comparison also requires "(variable => 'Non-ignorable')",
   and then "katakana_before_hiragana" has no effect.

   [2] ko: Plenty of ideographs are sorted by their reading. Such an ideograph is primary (level 1) equal to, and secondary
   (level 2) greater than, the corresponding hangul syllable.

   [3] zh__pinyin, zh__stroke and zh__zhuyin: implemented alt='short', where a smaller number of ideographs are tailored.

   Note: 'pinyin' is in latin, 'zhuyin' is in bopomofo. 
```

所以总而言之，主要技巧是将您的本地数据解码为统一的 Unicode 表示，然后使用确定性排序，可能是定制的，不依赖于用户控制台窗口的随机设置来获得正确的行为。

* * *

[注意：所有这些例子，除了手册页的引用，都是从第 4版^(Programming) *Perl*中摘取的，得到了​​作者的许可。:)]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:13:02.147

[Win32::OLE::NLS](http://perldoc.perl.org/perldoc?Win32%3a%3aOLE%3a%3aNLS)使您可以访问系统的该部分。它为您`CompareString`和必要的工具提供了获取必要的语言环境 ID。

如果您想要/需要查找系统文档，则底层系统调用名为`CompareStringEx`.

# google-app-engine - 是否可以将数据流式传输到 Google App Engine？

> ID：15013516
> 
> 赞同：1
> 
> 时间：2013-02-21T22:33:23.843
> 
> 标签：google-app-engine, streaming

是否可以将数据（尤其是视频）流式传输到 Google App Engine？

我查看了频道，但这似乎是在我的 GAE 应用程序和 Google 服务器之间，而不是在客户端和我的 GAE 应用程序之间。

我看过[这个问题](https://stackoverflow.com/questions/6670512/google-app-engine-receiving-audio-binary-stream)，但虽然它说它正在接收流，但看起来它正在使用一个帖子。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:44:57.120

您只能使用 HTTP POST 将数据上传到 GAE。

您可以将文件作为一个长的 HTTP POST 流式传输，也可以将其分解，作为多个 POST 请求发送，然后在服务器端重建它。

您可能想做后者，以防万一断开连接，您不必再次重新发送所有数据。

# r - 比较 R 中的两个线性模型

> ID：15013517
> 
> 赞同：3
> 
> 时间：2013-02-21T22:33:29.227
> 
> 标签：r, statistics, linear-regression

假设我在 R 中有两个线性模型，这样：

**lm1 = (x ~ a + b)**

**lm2 = (x ~ a + b + c)**

我想确定**c 对 x**的影响

1) 效果的显着性 2) 效果的估计 3) c 对 x 整体变化的贡献（例如 c 的 R 平方值的分量）

**anova(lm1, lm2)**为我提供了一个重要数字，但没有提供我需要的其他数字，尤其是上面的 3。

我该如何计算这些数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T00:20:25.280

通常的方法是查看`anova(lm1, lm2)`和`summary(lm2)`，尽管有一个`effects`-package 可以提供额外的容量。我不明白你确实需要那些还不够。平方和的差值和自由度（如果它是伴随“c”相加的因子变量）由 的输出提供`anova`。“'c' 对 x 的贡献”有点模糊，但可能意味着系数（标记为 x 提供的 x 的“估计” `summary(lm2)`）。您可能会被要求写类似“当在回归分析中控制“a”和“b”时，“c”对“x”变化的贡献是......”

如果您想在单个模型中分解平方和，只需查看：

```
anova(lm2)
######
Analysis of Variance Table

Response: Y
          Df Sum Sq Mean Sq F value  Pr(>F)  
X1         1 2.2167 2.21672  4.9554 0.03982 *
X2         1 1.2316 1.23156  2.7531 0.11540  
Residuals 17 7.6047 0.44733   
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
```

很容易计算出 X1 平方和中总平方和的百分比。首先查看`anova(lm2)`带有的对象`str()`。这是一个列表：

```
 100*anova(lm2)[['Sum Sq']][1]/sum(anova(lm2)[['Sum Sq']])
 #[1] 20.05545 
```

“X1 控制 X2 的部分 R^2”（R^2_Y.X1|X2）是：

```
anova(lm2)[['Sum Sq']]["X1"]/anova(lm2)[['Sum Sq']][""Residuals"] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T22:36:41.887

尝试比较`summary(lm1)`和`summary(lm2)`。R平方信息应该在底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-08T14:13:28.717

您可以使用库中`compare_performance`的函数`performance`：

```
library(performance)
compare_performance(lm1, lm2, rank = TRUE) 
```

# jsf-2 - 停止在恢复视图中再次添加人脸消息

> ID：15013519
> 
> 赞同：0
> 
> 时间：2013-02-21T22:33:33.913
> 
> 标签：jsf-2, postconstruct

我在 post 构造中添加了一些面孔消息。但是当从当前页面导航时，在恢复视图阶段再次调用 postconstruct 并再次添加 faces 消息。

有没有办法防止在恢复阶段添加面孔消息？

我可以检查阶段 ID 而不是添加消息。

但这是正确的方法吗？还有其他方法吗？

# jsonp - 如何在 Eventbrite API 中获取签到用户？

> ID：15013521
> 
> 赞同：1
> 
> 时间：2013-02-21T22:33:44.093
> 
> 标签：jsonp, eventbrite

我正在为 Eventbrite 开发自定义控制面板

我需要获取通过他们的“门口”应用程序签入的所有用户的列表，以获取事件中仅包含人员的列表，以过滤已注册但未提供帮助的人员。

我试过`event_list_attendees`了，但我没有看到说明用户状态的参数，并且该`get_event`方法没有说明任何关于参加的内容。

我已经尝试过搜索，但我一无所获，所以我觉得这有点奇怪，所以如果这是一个已知问题涵盖了其他人，是不可能的或我错过了什么......请指出我正确的方向

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:41:07.010

目前，没有通过 Eventbrite API 获得“At The Door”信息。

也无法使用 API 获取通过 Eventbrite “Entry Manager”应用程序签到的与会者列表，但您可以通过 Eventbrite UI 获取此信息。就是这样：

1.  登录到您的帐户
2.  点击页面顶部的“我的活动”
3.  点击“完成”标签
4.  点击活动名称右侧的“管理”
5.  找到左侧标题为“分析”的框，然后单击“事件报告”链接
6.  将报告类型下拉菜单更改为“活动出席与未出席”
7.  使用“入住状态”下拉菜单选择“已入住”或“未入住”
8.  现在您有了已登记或未参加的人员名单。您可以通过单击绿色文件类型按钮将此列表导出到 Excel

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T08:49:11.467

您可以通过验证签入状态`event_list_attendees`，您只需要在`only_display=barcodes`您的请求参数中包含等...，您可以`/attendees/attendee/barcodes/barcode/status`在响应中找到带有值`used`或`unused`含义的状态@，如果它具有已使用的票证已签入的状态，并且很快...

# raytracing - 如何在包围体层次结构中进行排序和比较

> ID：15013523
> 
> 赞同：3
> 
> 时间：2013-02-21T22:34:04.023
> 
> 标签：raytracing, bounding-box, aabb, bounding-volume, pbrt

我目前正在为 3D-Triangles 实施边界体积层次结构。可悲的是，所有对 BVH 的解释都未能体现在您对对象进行分类以进行拆分的部分。对于初学者，我想以平衡树为目标并使用中位数切割。这将要求我在当前节点的拆分轴上的空间标准之后对三角形或其边界框（AABB）进行排序。我真的不确定BB或三角形的最大或最小延伸是否足以进行适当的分离，因为某些三角形可能更大。我也不确定比较边界框还是三角形更好。

问题的第二部分是对每一步进行排序似乎很昂贵。计算机图形学中的其他算法使用预先排序的列表，然后根据拆分标准拆分这些列表。我看不出如何有效地比较三角形并确保它们属于一个列表。这是否意味着我必须每一步都对列表进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:19:20.337

SAH（表面区域启发式）是评估在用于光线追踪的 BVH 中分割一组三角形的最常用方法。[您可以在 PBRT 书 ( http://www.pbrt.org](http://www.pbrt.org) )的第 4 章找到很好的解释。它可以在这里免费获得：http: [//pbrt.org/pbrt-2ed-chap4.pdf](http://pbrt.org/pbrt-2ed-chap4.pdf)

如果你甚至对光线追踪有一种模糊的兴趣，我建议你购买完整的书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:18:58.343

正如您所发现的，您有多种选择。最容易想到的是使用边界框的质心。您还可以按最小坐标和最大坐标分别排序。

您可以按每个轴排序作为预处理。然后每次迭代都是一个分区，涉及选择要在哪个轴上拆分以及在哪里拆分，并将起点/终点存储在该轴的排序列表中。

参见 Ingo Wald 的论文：[http ://www.sci.utah.edu/~wald/Publications/2007/FastBuild/download/fastbuild.pdf](http://www.sci.utah.edu/~wald/Publications/2007/FastBuild/download/fastbuild.pdf)

更快、质量更低的方法是线性化 BVH - 将每个质心映射到空间填充曲线上的坐标，例如 Morton 代码，然后按 Morton 代码对所有三角形进行排序，然后将跨度拆分为框。

# node.js - 启动 node.js 服务

> ID：15013524
> 
> 赞同：3
> 
> 时间：2013-02-21T22:34:17.980
> 
> 标签：node.js, blueimp

我正在尝试按照此处找到的 node.js 服务 blueimp-file-upload 的设置说明进行操作：

[https://github.com/blueimp/jQuery-File-Upload/wiki/Setup](https://github.com/blueimp/jQuery-File-Upload/wiki/Setup)

具体来说，我正在**使用 Node.js 使用 jQuery File Upload (UI version)**下的这些步骤：

> 您可以通过 npm 在您的服务器上安装示例 Node.js 上传服务：
> 
> > npm install blueimp-file-upload-node
> 
> 您可以通过运行以下命令来启动服务：
> 
> > ./node_modules/blueimp-file-upload-node/server.js

我已经完成了第一步（安装npm），但是我不明白运行“./node_modules/...”命令是什么意思。它在 Windows 的命令提示符和特定于 Node.js 的命令提示符中不被视为有效语法，即使以 npm 为前缀也是如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:38:04.053

您必须在 Node.JS 中运行它。在命令行中，键入：

```
node node_modules/blueimp-file-upload-node/server.js 
```

# flash - 如何在 node.js 中使用 net 模块向所有客户端广播

> ID：15013526
> 
> 赞同：1
> 
> 时间：2013-02-21T22:34:26.697
> 
> 标签：flash, node.js, sockets

我不知道如何做相当于 socket.broadcast.emit 但使用 node.js 的 net 模块而不是 socket.io。我正在尝试使用内置套接字库和 node.js 的 Flash 连接 Flash 前端。我发现很难找到一个好的例子。

我设法使用 net 模块进行连接，但我不确定如何发送给所有连接的客户端。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:27:17.717

Net 没有任何自动支持这样的功能，因此您需要保留所有当前连接的客户端的列表。您可以在连接时将人员添加到阵列中，并在断开连接时将其删除。最后，您需要添加自己的方法来向每个客户端发送数据，遍历当前连接的客户端列表并调用`write`.

您需要自己解决的一个难题是如何分隔每条消息。客户端如何知道一条消息在哪里结束，而下一条消息在哪里开始？您将需要某种方式来构建您的消息，以便客户端可以将它们拆分。SocketIO 的 WebSocket 实现自动提供消息框架，因此用户不必担心。

# html - 将背景颜色添加到标记“html”会破坏 z-index？

> ID：15013531
> 
> 赞同：0
> 
> 时间：2013-02-21T22:34:48.540
> 
> 标签：html, css, z-index, less

我在 Less 中定义了以下样式：

```
html {
  background-color: @playGreen;
}

body {  
  background-color: @background;
  background: url(../images/pattern/cream_dust.png) repeat 0 0;
}

.backStripe {
  background-color: @playGreen;
  position: absolute;
  top: 0;
  width: 100%;
  height: 125px;
  z-index: -9;
} 
```

在我的 Html 代码中，我有（删除了不相关的元素）：

```
<html>
  <head>[...]</head>
  <body>
    <div class="backStripe">&nbsp;</div>
    [... other code ...]
  </body>
</html> 
```

给定 css 的想法是使用 div`position: absolute`和 low将固定大小的彩色条纹设置为背景`z-index`。

如果我不向`html`（标签本身）添加任何样式，它会按预期工作。但是，如果我添加一个`background-color`to `html`（以避免在短页底部出现空白），那么`backStripe`div 将不再显示，它会完全隐藏。

知道为什么吗？我怎样才能让 div 沿着`background-color`for工作`html`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:49:10.027

你给出`.backstripe`了一个*负*的z-index。这将它**放在**html 元素下。如果 html 元素不透明，它将隐藏该`.backstripe`元素。

坚持正 z 索引。

# java - 如何基于默认的android PageView制作可滚动的片段

> ID：15013535
> 
> 赞同：6
> 
> 时间：2013-02-21T22:35:00.663
> 
> 标签：java, android

我正在使用 Android 中 PageView 设置中的默认设置。我想保持非常简单。默认设置提供了一个 TextView 来放入文本，而我的文本会离开屏幕。是否可以垂直滚动？

```
// edited to make the code appear in the code block
public class DayFragment extends Fragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public DayFragment() {

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Create a new TextView and set its text to the fragment's section
        // number argument value.
        TextView tView = new TextView(getActivity());
        if(getArguments().getInt(ARG_SECTION_NUMBER) > 1){
            tView.setText(getAllMeals(getArguments().getInt(
                    ARG_SECTION_NUMBER)-1));}
        else {
            getMeal();
            tView.setText(message);
        }
        return tView;
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-21T22:40:00.343

是的，这很简单，在您的 xml 布局文件中，只需将父`ScrollView`级设为您想要可滚动的任何内容。

`ScrollView`参考文档：http: [//developer.android.com/reference/android/widget/ScrollView.html](http://developer.android.com/reference/android/widget/ScrollView.html)

编辑示例：这是您的 XML 示例。

```
...rest of xml
<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <TextView
        android:id="@+id/textview"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"/>
 </ScrollView> ...rest of xml 
```

然后在你的 Activity 中获取 TextView

```
TextView tView = (TextView)findViewById(R.id.textview); 
```

第二次编辑：为常规滚动视图编辑了上面的示例。另外要添加滑动功能，您需要使用一个 ViewPager（[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)）和一个 FragmentPagerAdapter（[http://developer.android .com/reference/android/support/v4/app/FragmentPagerAdapter.html](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)）。官方开发者文档的 2 个链接包含非常棒的示例！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-03T15:13:38.090

也可以将整个布局包装`fragment.xml`在 a 中`ScrollView`，请参阅[如何在 Fragment 中添加滚动](https://stackoverflow.com/questions/40562344/how-to-add-scroll-in-fragment/43188084#43188084)。这也是基于 XML 的...

# c - 获取错误的输出值 - 基本 C 循环分配

> ID：15013536
> 
> 赞同：-3
> 
> 时间：2013-02-21T22:35:03.073
> 
> 标签：c, loops

作业3：Acme Travel Agency

问题陈述

在为 Acme Cryptography Division 成功解决了世界上所有最棘手的密码学问题之后，您已经决定要看看这个世界。这就是您申请调动到 Acme Travel Agency 工作的原因。

Acme Travel Agency 专门从事航空旅行，由于您的质量保证经验，您被分配分析不同航班计划的质量。一个飞行计划由 N 个转机航班组成。除最后一班外，每一班航班结束后，都有一个中途停留期，乘客必须在此期间等待下一班航班。您的任务是计算目的地时间（不考虑时区变化）以及飞行计划的质量。

如果乘客飞行的总时间至少是中途停留时间的两倍，则认为飞行计划是有效的。否则，飞行计划被认为是低效的。

要计算目的地时间，请将总行程时间（所有航班和中途停留时间的总和）添加到出发时间，并以 24 小时时钟格式计算相应时间。请注意，飞行计划可能会持续一夜，也可能持续一天以上。例如，如果一个飞行计划在 09:30 起飞并持续了 2000 分钟（这是一个漫长的飞行计划！），那么目的地时间将是第二天的 18:50。因此，您将报告 18:50 作为目标时间。

输入规范

输入将以单行整数 N (1

输出规格

您的程序应该输出到达时间和航班质量。这应该按以下方式格式化：

此飞行计划为 S，并将在 HH:MM 结束。

其中 S 是一个字符串：“高效”或“低效”取决于问题陈述中定义的飞行质量。HH:MM 是问题陈述中定义的目的地的 24 小时制时间。

示例 I/O

输入：

1 7 45 75

输出：

本次飞行计划高效，将于09:00结束。

输入：

2 13 30 75 180 85

输出：

此飞行计划效率低下，将于 19:10 结束。

输入：

3 12 27 500 300 600 400 300

输出：

本次飞行计划高效，将于23:27结束。

可交付成果

对于您的提交，请向 webcourses2 提交一个包含您的源代码的文件。有关评分指南，请参阅标有“评分标准”的部分。

该作业应于 2013 年 2 月 21 日晚上 11:59 在 webcourses2 上完成。

作为提示，最容易处理时间的方法是跟踪一天中的分钟，以 1440 为模（一天中的分钟数）。然后，打印时间时，小时是一天中的分钟除以 60，分钟是一天中的分钟以 60 为模。

评分标准

该计划满分 20 分。

编码风格 (9) 点 (1) 程序包含完整的标题注释（名称、日期、简要摘要） (1) 程序包含有意义的内部注释 (1) 程序保持对空格的合理使用 (1) 程序使用清晰的描述性变量名称 (1) 程序以整数形式读取所有值 (1) 程序包含 N 的循环（或 N 的某个函数） (1) 程序不提示用户输入 (1) 程序包含用于比较航班的 if 语句时间和转机时间。(1)程序正确使用printf百分码打印时间(%02d)

输出的正确性 (11) 点（部分得分是可能的） (10) 五个测试用例，(2) 每个案例点 (1) 程序打印正确的效率等级（高效，低效） (1) 程序打印正确的目的地时间，无论格式如何 (1) 文本完全符合指定格式。

我的代码：

```
// Included libraries
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main() {

// Integer declaration
int N, hours, mins, i, flight, layover, finflight, flighttot=0, layovertot=0;

// N, hours, mins input scan
scanf("%d", &N);
scanf("%d %d", &hours, &mins);

// N loop, flight and layover input
for(i=0; i<N-1; i++) {
scanf("%d %d", &flight, &layover);
flighttot += flight;
layovertot += layover;
}

// Final flight input scan
scanf("%d", &finflight);
flighttot += finflight;

// Equations
mins += (hours*60)+flighttot+layovertot;
hours == mins/60;
hours %= 24;
mins %= 60;

// Output
if(flighttot >= 2*layovertot)
printf("The flight plan is efficient, and will conclude at %d:%d",&hours, &mins);

else
printf("The flight plan is inefficient, and will conclude at %d:%d",&hours, &mins);

return 0;
} 
```

任何帮助修复我的程序将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:38:32.103

```
hours == mins/60; 
```

这是错误的（在您的程序中）。

`==`是相等运算符，但您正在寻找赋值运算符`=`：

```
hours = mins/60; 
```

然后：

```
printf("The flight plan is efficient, and will conclude at %d:%d",&hours, &mins) 
```

这是错误的。在这里使用运算符没有意义`&`，您想要的是：

```
printf("The flight plan is efficient, and will conclude at %d:%d",hours, mins) 
```

（与您的其他`printf`电话相同）。

请在编译器中启用警告并修复所有警告。

# python - Python 参数混淆

> ID：15013537
> 
> 赞同：1
> 
> 时间：2013-02-21T22:35:03.937
> 
> 标签：python, parameters

我是一个初学者，正在编写 Python Blackjack 脚本，并且对函数 (dealPlayer) 是否需要参数感到困惑。不管有没有参数，它都可以工作。我不确定我是不是脑子里放了个屁，或者我在这个过程中没有学到任何东西。这是代码：

```
import random

dealer = []
player = []
c = ""
deck = [2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,
            9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,11]

def dealPlayer(deck):
    cardOne = random.choice(deck)
    cardTwo = random.choice(deck)
    player.append(cardOne)
    player.append(cardTwo)
    deck.remove(cardOne)
    deck.remove(cardTwo) 
```

问题是，我需要 (deck) 作为函数中的参数吗？它可以使用或不使用 (deck) 作为参数。我已经回顾了不同的教程和其他代码，但我仍然感到困惑。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:40:37.543

您的代码使用或不`deck`使用参数的原因是因为有一个名为 的全局变量`deck`，因此当您`deck`在函数内部引用时，该函数将首先查找局部变量（参数），然后如果没有找到它，它将寻找全局变量。

最好将代码重构为根本不使用全局变量——`deck`最初在函数内部定义，然后根据需要将其作为结果或参数传递给其他函数。如果您不想这样做，那么至少要确保您的参数不会影响全局变量（与全局变量具有相同的名称），以避免进一步混淆。或者完全删除参数并仅使用全局变量，如果这适合您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T22:41:13.753

如果您的功能是：我说对了吗？

```
def dealPlayer(): 
```

代码仍然有效吗？这应该会引发未定义的甲板错误。编辑：这当然是错误的，它是全球性的。没有它就可以工作。但这是一个不好的做法。

```
def dealPlayer():
    deck = [] 
```

这应该引发索引错误。

```
cardOne = random.choice() 
```

这会引发 TypeError。

# c# - 在 C# 中使用带有类实例的指针

> ID：15013540
> 
> 赞同：2
> 
> 时间：2013-02-21T22:35:16.363
> 
> 标签：c#

我最近从 C++ 切换到 C#，我想知道如何在 c# 中做同样的事情。在 C++ 中，我可以这样做：

```
Enemy *enemy; 

enemy = new Enemy("Goblin", 20, 20); 
```

在 c# 中，我尝试了指针方法并使用委托，但都失败了。问题是我的文本 RPG 中有多个敌人，我需要为我的敌人指针类分配一个特定的敌人，这样我就可以执行战斗过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:37:49.067

C# 具有引用而不是 C++ 样式指针。因此，对于您的示例，您只需执行以下操作：

```
Enemy enemy; //enemy is a reference to an Enemy
enemy = new Enemy("Goblin", 20, 20); //the reference points to a Enemy instance in the heap 
```

另一个有趣的区别是**几乎所有东西都是引用**，除了一些可以存储在堆栈上的原始值类型（、、、、、、、结构、`int`枚举`float`）。`double``decimal``bool`

# ios - 让iOS不要等到整个方法完成才开始动画

> ID：15013542
> 
> 赞同：0
> 
> 时间：2013-02-21T22:35:19.867
> 
> 标签：ios, delay, mbprogresshud, background-thread

我有一个方法`refreshDataAction`：

```
- (void)refreshDataAction
{
    MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    hud.labelText = @"Loading Data.Please Wait";
    [self deletePreviousValues];
    dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
        NSLog(@"Getting customer values");
        [self getAllCustomerValues];
        NSLog(@"Got customer values");

        NSError *nwerror = nil;
        if (![self.secondMOC save:&nwerror])
        {
            NSLog(@"209 Failed to save second MOC");
        }
        else
        {
            //NSLog(@"saved success");
        }
        dispatch_async(dispatch_get_main_queue(), ^{
            [MBProgressHUD hideHUDForView:self.view animated:YES];
        });
        NSLog(@"Saved");
    });

    NSLog(@"Dispatched");   
} 
```

所以一旦`refreshDataAction`开始我应该看到HUD。但它不像在显示 HUD 之前等待 13 秒。我不知道为什么会这样。我尝试了不同的方法，如 ActivityIndi​​cator，但无济于事。为什么我的应用程序要等待 13 秒才能启动 hud。在模拟器上它的瞬间。我点击按钮，我看到了HUD。但在设备上延迟 13 秒。在后台线程做一些工作时立即启动 hud。请帮忙。花了整整 5 个小时想办法完成这项任务。

这里有我的问题：[UIAlertview hang while the thread in background is loading data](https://stackoverflow.com/questions/15010458/uialertview-hanging-while-the-thread-in-background-is-loading-data/15011051)

我把它改成了`MBProgressHUD`. 可能一些与之合作过的开发人员`MBProgressHUD`可能会看到这个问题。

我的主 UI 线程是否处于某种睡眠模式 13 秒？我现在真的不知道。仅供参考，它在 iOS 6.0 中。这是一个内部 iPad 应用程序。如果您需要更多信息，请询问。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:42:18.890

我会将以下内容添加到您的 viewDidLoad 中。

```
HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
[self.navigationController.view addSubview:HUD];
HUD.delegate = self;
HUD.labelText = @"";
HUD.mode = MBProgressHUDModeIndeterminate; 
```

然后，您可以简单地调用以下方法而无需 dispatch_get_main_queue()。

```
[HUD show:YES]; 
```

和...

```
[HUD hide:YES]; 
```

# c++ - 如何检查数组的输入是否失败？

> ID：15013546
> 
> 赞同：1
> 
> 时间：2013-02-21T22:35:47.323
> 
> 标签：c++, arrays, input

我正在做一个家庭作业，我需要编写的一个函数是一个简单的函数，它允许用户输入一个将进入数组的 int。但条件之一是检查输入是否失败，如果失败，则使用“die”函数结束程序。如何检查输入是否未放入数组？我应该只检查输入是否为 int 吗？谢谢您的帮助。

```
void input( unsigned a[], unsigned elements ){

    for (unsigned i = 0; i < elements; i++) {
        cout << "Enter a number for index #" << i <<" in the array:" << endl;
        cin >> a[i];
    }

    // Add die function if this function fails...

}

bool die(const string &msg) {
    cerr <<endl << "fatal error: " <<msg <<endl;
    exit( EXIT_FAILURE );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:41:43.333

像这样：

```
if (!(cin >> a[i])) { die("boo"); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T16:32:48.543

无效输入（无符号a []，无符号​​元素）{

```
for (unsigned i = 0; i < elements; i++) {
    cout << "Enter a number for index #" << i <<" in the array:" << endl;
    cin >> a[i] || die("Error");
} 
```

# javascript - 删除购买的 WordPress 主题中内置的不需要的 Addthis 插件？

> ID：15013555
> 
> 赞同：0
> 
> 时间：2013-02-21T22:36:46.103
> 
> 标签：javascript, php, wordpress, wordpress-theming

我正在为客户定制网站主题。当我去运行速度测试时，我注意到这段代码

```
<script type='text/javascript' src='http://s7.addthis.com/js/250/addthis_widget.js?domready=1&#038;ver=1'></script> 
```

正在创建几十个重定向到垃圾邮件区域。它只存在于主页上，而不存在于任何其他页面上。Addthis 插件似乎内置在主题中，我找不到删除它的位置。我不想为不需要的插件牺牲速度。

我检查了footer.php 文件，然后是functions.php，然后是主题中可以调用这个东西的每个文件。我使用 Dreamweaver 在主题的整个文件夹中搜索包含该代码的任何文档，但 Dreamweaver 什么也没找到。如果我激活不同的主题，代码就会消失，所以我知道是主题在做这件事。我就是想不通怎么办！

有谁知道我应该在哪里/寻找什么？我一直在到处寻找答案，但一直找不到。这可能是由javascript文件引起的吗？还是加密的PHP？

希望有用的信息：

主题是 Mercor，它是 WooCommerce 就绪的主题。这是演示页面： http: [//mercor.premiumcoding.com/](http://mercor.premiumcoding.com/)。您可以在第 1369 行附近看到有问题的代码段所在的位置。

functions.php 中的页脚：

```
 function footer(){
function pmc_recent_footer_excerpt_length( $length ) {
    return 40;
}

function pmc_recent_footer_title($title) { return  substr($title, 0, 40). '';}

add_filter( 'excerpt_length', 'pmc_recent_footer_excerpt_length', 999 );
add_filter('the_title', 'pmc_recent_footer_title') ;
    } 
```

如果我删除整个片段，那么有问题的代码和整个页脚就会消失。我尝试删除括号内的所有内容，如下所示：

```
function footer(){ 
} 
```

但有问题的代码仍然出现。

同样在functions.php中-但删除没有帮助

```
 function socialLinkCat($link,$title,$email) {
$social = '';
$social .='<div class="addthis_toolbox"><div class="custom_images">';
global $data; 
if($data['facebook_show'] == 1)
$social .= '<a class="addthis_button_facebook" addthis:url="'.$link.'" addthis:title="'.$title.'"  title="'.$data['translation_facebook'].'"><img src="'. get_template_directory_uri() .'/images/facebookIcon.png" width="64" height="64" border="0" alt="'.$data['translation_facebook'].'" /></a>';            
if($data['twitter_show'] == 1)
$social .= '<a class="addthis_button_twitter" addthis:url="'.$link.'" addthis:title="A'.$title.'"  title="'.$data['translation_twitter'].'"><img src="'. get_template_directory_uri() .'/images/twitterIcon.png" width="64" height="64" border="0" alt="'.$data['translation_twitter'].'" /></a>';  
if($data['digg_show'] == 1) 
$social .= '<a class="addthis_button_digg" addthis:url="'.$link.'" addthis:title="'.$title.'" title="'.$data['translation_digg'].'"><img src="'. get_template_directory_uri() .'/images/diggIcon.png" width="64" height="64" border="0" alt="'.$data['translation_digg'].'" /></a>';  
if($data['stumble_show'] == 1)
$social .= '<a class="addthis_button_stumble" addthis:url="'.$link.'" addthis:title="'.$title.'" title="'.$data['translation_stumble'].'"><img src="'. get_template_directory_uri() .'/images/stumbleUponIcon.png" width="64" height="64" border="0" alt="Share to Stumble Upon" /></a>';  

$social .='<a class="addthis_button" addthis:url="'.$link.'" addthis:title="'.$title.'" ><img src="'. get_template_directory_uri() .'/images/socialIconShareMore.png" width="64" height="64" border="0" alt="More..." /></a></div><script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=xa-4f3049381724ac5b"></script>'; 
if($data['email_show'] == 1 && $email) 
$social .= '<a class="emaillink" href="mailto:'.$data['email'].'" title="'.$data['translation_email'].'"></a></div>'; 
$social .= '</div>'; 
echo $social;
    }

    function socialLinkProduct() {
$social = '';
$social ='<div class="addthis_toolbox"><div class="custom_images">';
global $data; 
if($data['facebook_show'] == 1)
$social .= '<a class="addthis_button_facebook" title="'.$data['translation_facebook'].'"><img src="'. get_template_directory_uri() .'/images/icon-facebook-product-single.png" width="16" height="16" border="0" alt="'.$data['translation_facebook'].'" /></a>';            
if($data['twitter_show'] == 1)
$social .= '<a class="addthis_button_twitter" title="'.$data['translation_twitter'].'"><img src="'. get_template_directory_uri() .'/images/icon-twitter-product-single.png" width="16" height="16" border="0" alt="'.$data['translation_twitter'].'" /></a>';  
//if($data['digg_show'] == 1) 
//$social .= '<a class="addthis_button_digg" title="'.$data['translation_digg'].'"><img src="'. get_template_directory_uri() .'/images/diggIcon.png" width="64" height="64" border="0" alt="'.$data['translation_digg'].'" /></a>';  
//if($data['youtube_show'] == 1)
//$social .= '<div><a class="addthis_button_youtube"><img src="'. get_template_directory_uri() .'/images/diggIcon.png" width="64" height="64" border="0" alt="Share to Twitter" /></div></a></div>';  
$social .='<a class="addthis_button_more"><img src="'. get_template_directory_uri() .'/images/icon-more-product-single.png" width="16" height="16" border="0" alt="More..." /></a></div><script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=xa-4f3049381724ac5b"></script>';   
if($data['email_show'] == 1) 
$social .= '<a class="emaillink" href="mailto:'.$data['email'].'" title="'.$data['translation_email'].'"></a></div>'; 
echo $social;
    }

    function socialLinkSingle() {
$social = '';
$social ='<div class="addthis_toolbox"><div class="custom_images">';
global $data; 
if($data['facebook_show'] == 1)
$social .= '<a class="addthis_button_facebook" title="'.$data['translation_facebook'].'"><img src="'. get_template_directory_uri() .'/images/facebookIcon.png" width="64" height="64" border="0" alt="'.$data['translation_facebook'].'" /></a>';            
if($data['twitter_show'] == 1)
$social .= '<a class="addthis_button_twitter" title="'.$data['translation_twitter'].'"><img src="'. get_template_directory_uri() .'/images/twitterIcon.png" width="64" height="64" border="0" alt="'.$data['translation_twitter'].'" /></a>';  
//if($data['digg_show'] == 1) 
//$social .= '<a class="addthis_button_digg" title="'.$data['translation_digg'].'"><img src="'. get_template_directory_uri() .'/images/diggIcon.png" width="64" height="64" border="0" alt="'.$data['translation_digg'].'" /></a>';  
//if($data['youtube_show'] == 1)
//$social .= '<div><a class="addthis_button_youtube"><img src="'. get_template_directory_uri() .'/images/diggIcon.png" width="64" height="64" border="0" alt="Share to Twitter" /></div></a></div>';  
$social .='<a class="addthis_button_more"><img src="'. get_template_directory_uri() .'/images/socialIconShareMore.png" width="64" height="64" border="0" alt="More..." /></a></div><script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=xa-4f3049381724ac5b"></script>';    
if($data['email_show'] == 1) 
$social .= '<a class="emaillink" href="mailto:'.$data['email'].'" title="'.$data['translation_email'].'"></a></div>'; 
echo $social;
    } 
```

页脚.php 文件

```
 <!-- footerwhat -->
    <?php wp_footer();  ?>
    <!-- footerwhat --> 
```

主页上生成的额外代码行（“...”指的是 wp_footer() 添加的预期代码）

```
 </footer>
    <!-- footer what?! END -->
    ...
    <script type='text/javascript' src='http://s7.addthis.com/js/250/addthis_widget.js?domready=1&#038;ver=1'></script>
    ...
    <!-- footer what?! END --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:08:49.690

Answered by OP in comments:

Fixed by changing

`<?php wp_footer() ?>`

to

```
<?php

 if (is_home() || is_front_page() ) { 
     remove_action('wp_footer', 'output_inline_js'); 
     wp_admin_bar_render(); 
     echo "<script type='text/javascript' src='http://yoursite.com/wp-content/themes/mercor/js/gistfile_pmc.js?ver=3.5.1'>‌​&lt;/script> 
     <script type='text/javascript' src='http://yoursite.com/wp-content/plugins/woocommerce/assets/js/jquery-plugins‌​.min.js?ver=1.6.6'></script>
     <script type='text/javascript' src='http://yoursite.com/wp-content/plugins/woocommerce/assets/js/frontend/wooco‌​mmerce.min.js?ver=1.6.6'></script>";
 } 
 else { 
    wp_footer();
}

?> 
```

– mulysasasylum

# javascript - 带有过滤器的 HTML 选择字段

> ID：15013559
> 
> 赞同：6
> 
> 时间：2013-02-21T22:37:01.270
> 
> 标签：javascript, jquery, html

我有一个选择字段，其中大量已发布的名称可能达到数百个。

我需要的是过滤字段，我的意思是：

如果选择并搜索了一个，则显示为表单的示例文本，并且可以编写新的搜索删除之前搜索的示例文本。

在框中键入文本时，该栅栏将显示已过滤的文本选项列表。

一个例子是：如果我在文本框中输入 D 或 d，它会显示 Daniel Diego 的选项列表，所以对于所有的，如果您使用 Diego 进行搜索，那么在加载搜索文本框后会显示为示例 Diego。

```
<select id="id_name" name="name">
    <option value="3">Diego </option>
    <option value="4">Daniel  </option>
    <option value="5">Fernando  </option>
    <option value="6">Luz </option>
    <option value="7">Catherine  </option>
    <option value="8">Samuel  </option>
    <option value="10">Eduardo  </option>
</select> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T22:51:57.017

尝试这个。

Chosen 是一个用于`<select>`html 标签的 jQuery 插件。

它不仅使您的选择框看起来更漂亮，而且在选择框的顶部添加了一个非常好的搜索功能。

源代码/演示可以在这里找到：http: [//harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-07-04T10:50:26.117

**我想这正是你要找的**

```
/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

function filterFunction() {
  var input, filter, ul, li, a, i;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  div = document.getElementById("myDropdown");
  a = div.getElementsByTagName("a");
  for (i = 0; i < a.length; i++) {
    txtValue = a[i].textContent || a[i].innerText;
    if (txtValue.toUpperCase().indexOf(filter) > -1) {
      a[i].style.display = "";
    } else {
      a[i].style.display = "none";
    }
  }
}
```

```
/* Dropdown Button */
.dropbtn {
  background-color: #04AA6D;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
  cursor: pointer;
}

/* Dropdown button on hover & focus */
.dropbtn:hover, .dropbtn:focus {
  background-color: #3e8e41;
}

/* The search field */
#myInput {
  box-sizing: border-box;
  background-image: url('searchicon.png');
  background-position: 14px 12px;
  background-repeat: no-repeat;
  font-size: 16px;
  padding: 14px 20px 12px 45px;
  border: none;
  border-bottom: 1px solid #ddd;
}

/* The search field when it gets focus/clicked on */
#myInput:focus {outline: 3px solid #ddd;}

/* The container <div> - needed to position the dropdown content */
.dropdown {
  position: relative;
  display: inline-block;
}

/* Dropdown Content (Hidden by Default) */
.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f6f6f6;
  min-width: 230px;
  border: 1px solid #ddd;
  z-index: 1;
}

/* Links inside the dropdown */
.dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

/* Change color of dropdown links on hover */
.dropdown-content a:hover {background-color: #f1f1f1}

/* Show the dropdown menu (use JS to add this class to the .dropdown-content container when the user clicks on the dropdown button) */
.show {display:block;}
```

```
<div class="dropdown">
  <button onclick="myFunction()" class="dropbtn">Dropdown</button>
  <div id="myDropdown" class="dropdown-content">
    <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
    <a href="#about">About</a>
    <a href="#base">Base</a>
    <a href="#blog">Blog</a>
    <a href="#contact">Contact</a>
    <a href="#custom">Custom</a>
    <a href="#support">Support</a>
    <a href="#tools">Tools</a>
  </div>
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-08T15:41:19.847

如果你想使用 jQuery，那么这些是很好的 UI 选项可用：

[https://select2.org/dropdown](https://select2.org/dropdown)

[https://jqueryui.com/selectmenu/](https://jqueryui.com/selectmenu/)

[https://harvesthq.github.io/chosen/](https://harvesthq.github.io/chosen/)

* * *

如果你想使用 Vanilla JavaScript（没有 jQuery）。这是最好的选择。

您可以根据自己的选择自定义颜色和按钮布局。

[更多信息](https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_dropdown_filter)

```
function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

function filterFunction() {
  var input, filter, ul, li, a, i;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  div = document.getElementById("myDropdown");
  a = div.getElementsByTagName("a");
  for (i = 0; i < a.length; i++) {
    txtValue = a[i].textContent || a[i].innerText;
    if (txtValue.toUpperCase().indexOf(filter) > -1) {
      a[i].style.display = "";
    } else {
      a[i].style.display = "none";
    }
  }
}
```

```
.dropbtn {
  background-color: #4CAF50;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
  cursor: pointer;
}

.dropbtn:hover, .dropbtn:focus {
  background-color: #3e8e41;
}

#myInput {
  box-sizing: border-box;
  background-image: url('searchicon.png');
  background-position: 14px 12px;
  background-repeat: no-repeat;
  font-size: 16px;
  padding: 14px 20px 12px 45px;
  border: none;
  border-bottom: 1px solid #ddd;
}

#myInput:focus {outline: 3px solid #ddd;}

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f6f6f6;
  min-width: 230px;
  overflow: auto;
  border: 1px solid #ddd;
  z-index: 1;
}

.dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

.dropdown a:hover {background-color: #ddd;}

.show {display: block;}
```

```
<!DOCTYPE html>
<h2>Basic Select Search/Filter Dropdown</h2>
<p>
Click to open the dropdown menu, and use the input field to search for a specific dropdown link.
</p>

<div class="dropdown">
  <button onclick="myFunction()" class="dropbtn">Select Here</button>
  <div id="myDropdown" class="dropdown-content">
    <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
    <a href="#about">About</a>
    <a href="#base">Base</a>
    <a href="#blog">Blog</a>
    <a href="#contact">Contact</a>
    <a href="#custom">Custom</a>
    <a href="#support">Support</a>
    <a href="#tools">Tools</a>
  </div>
</div>
```

# ruby-on-rails-3.1 - 如何在 Rails 3.2 中动态编译样式表？

> ID：15013560
> 
> 赞同：1
> 
> 时间：2013-02-21T22:37:04.480
> 
> 标签：ruby-on-rails-3.1, ruby-on-rails-3.2, asset-pipeline

我有一个应用程序，每个客户都有一个子域。他们可以改变外观和感觉，这一切都基于 Twitter Bootstrap。当他们保存设置时，应用程序会`.less`为他们创建一个样式表，其中已根据他们的喜好设置了适当的 Twitter Bootstrap 变量。

我根据访问的子域在我的`application.html.erb`文件中使用适当的样式表。我知道这在生产中不起作用。

我想调用一些东西来编译它，因为它被保存了。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:23:56.283

听起来您需要能够在运行时按需触发这些文件的 Sprocket 编译。我没有这方面的经验，但这个人有： [http ://www.krautcomputing.com/blog/2012/03/27/how-to-compile-custom-sass-stylesheets-dynamically-during-runtime/](http://www.krautcomputing.com/blog/2012/03/27/how-to-compile-custom-sass-stylesheets-dynamically-during-runtime/)

# format - 将文件读入fortran

> ID：15013561
> 
> 赞同：1
> 
> 时间：2013-02-21T22:37:04.627
> 
> 标签：format, fortran

所以我在 Fortran 中编写了一些代码，它自己乘以一个方阵。但是我必须乘以的矩阵在一个文件中，我在将它读入程序时遇到了一些问题。我认为是因为样本数据采用以下格式：

3

101

010

101

第一行是矩阵的维度，每一行都是矩阵中的一个现在，但条目之间没有空格。所以我想我的问题是当我将这些行读入二维数组时如何拆分它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:29:41.237

读入第一个数字 as`N`并使用它来分配一个维度为 N 乘 N 的数组。然后每次读取该数组的一行：`array (i, 1:N))`对于 i=1 到 N。请参阅[Fortran：将一行数字读入数组](https://stackoverflow.com/questions/14989125/fortran-reading-a-row-of-numbers-into-an-array)中要使用的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:39:06.700

使用格式阅读

```
read (1,*) n
allocate(A(n,n))
do i=1,n
  read (1,'(1000i1)'),A(i,:)
enddo 
```

你是否声明了比实际需要的额外的“i1”并不重要

# javascript - 用 JavaScript 计算 FPS 小于 1 毫秒

> ID：15013562
> 
> 赞同：6
> 
> 时间：2013-02-21T22:37:10.070
> 
> 标签：javascript

是否可以测量所有浏览器都支持的小于 1 毫秒的时间间隔，我只知道 Chrome 中的一种方法。

镀铬方法：`window.performance.now()`

目前我在毫秒时间空间内进行 FPS 测量，但如果通过的时间少于 1 毫秒，我会得到无穷大，因为这两个数字四舍五入到最接近的毫秒，所以它们是相同的值。

有谁知道跨浏览器函数在 javascript 中计算小于 1 毫秒的时间间隔？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T02:45:48.193

这是您在没有准确计时器的情况下如何获得准确测量的方法，只要您的计时经常发生，我希望他们在您的情况下这样做。

平均/汇总事件持续时间的不精确测量。我的一个项目中的一个片段：

```
 var start = Date.now();
        ... (stuff to be timed)
        var now = Date.now();

        if (DEBUG.enabled) {
            var profile_this_iter = now - start;
            profile += (profile_this_iter - profile) * 0.02;
        } 
```

每个新的值测量值都会使您的读数更接近 0.02 倍。显然你会想要稍微调整一下。如果您读取一半时间 1 毫秒和一半时间 0 毫秒的持续时间（使用 1 毫秒分辨率计时器），这将允许您读取徘徊在 0.5 毫秒左右的平均值。

**这显然不能替代适当的更高分辨率计时器。**但是我使用这个简单的算法来给我的 javascript 项目一个非蹩脚的 FPS 读数。你会得到一个阻尼因子，你可以根据你是想要更准确还是更直接地响应变化来调整它。考虑到这一点的简单性，您将很难找到一种更优雅的算法来为您提供良好的表示，而无需任何改进的输入数据。增强它的方法之一是根据采样本身的频率（如果发生变化）调整接近因子（即 0.02 常数），这样可以使较慢的测量速率比固定值更快地收敛.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T03:15:40.170

实际上还有另一种计算fps的方法，这*可能*是解决这个问题的一种方法。就是**统计一秒的实际帧数**，我觉得*应该*挺准确的。

```
var fpsStart = new Date().getTime();
var fpsCounting = 0;
var fps = 0;
start_the_first_frame();

// Loop
function update(){
    do_time_consuming_stuff();
    fpsCounting++;
    var thisFrame = new Date().getTime();
    if(thisFrame - fpsStart >= 1000){
        fpsStart += 1000;
        fps = fpsCounting;
        fpsCounting = 0;
    }
    request_next_animation_frame();
} 
```

PS 刚刚在此处输入，未经测试，可能需要稍作更改。

我记得在lwjgl教程中看到过这样的方法......

也正如@StevenLu 所指出的，您可以修改它以计算 0.5 秒内的帧数并将“fps”乘以 2，甚至更短的时间（例如 0.25 秒），以便更频繁地更新 fps 值.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:50:01.077

[Chrome 20 中提供了高分辨率时间](http://gent.ilcore.com/2012/06/better-timer-for-javascript.html)，但您应该知道，[JS 中的时间分辨率取决于浏览器、设备和环境](http://ejohn.org/blog/accuracy-of-javascript-time/)。它可能在 4ms 和 1000+ms 之间变化

# android - 在控制台中应用 Logcat 过滤器 ^(?!.*(nativeGetEnabledTags)).*$

> ID：15013565
> 
> 赞同：1
> 
> 时间：2013-02-21T22:37:27.403
> 
> 标签：android, eclipse, bash, filter, logcat

我正在使用 Logcat 和 Jeff Sharkey 提供的漂亮的全彩调试脚本。但不幸的是，它被最新sdk工具的已知错误搞砸了：
nativeGetEnabledTags
的意外值：0过滤器^（？！。*（nativeGetEnabledTags））。*$ 在 Eclipse 中工作，但我不知道如何在 bash 中使用它。
干杯马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:43:44.277

只需通过管道输出脚本的输出并 grep 出有问题的日志语句。我不知道您所说的脚本，但这是我从命令行执行的操作。

```
adb logcat | grep -v nativeGetEnabledTags 
```

看来这不适用于 JS 的脚本，因为它使用标准输出来确定终端宽度。如果 stdout 是 grep，那么这将不起作用。你可以通过注释掉第 28,29 和 135 行来解决这个问题，但是你失去了漂亮的换行。

# java - 将字符串转换为整数 - 如果字符串无效，我应该返回什么

> ID：15013568
> 
> 赞同：0
> 
> 时间：2013-02-21T22:37:36.683
> 
> 标签：java, string, coding-style

如果我想编写一个接受字符串并将其转换为整数的函数，并且我根本不信任我的输入，如果字符串无效，我应该返回什么。我想返回 0 但这会令人困惑，因为这个数字实际上可能是 0？假设这是一个面试问题，您需要检查所有边缘情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:39:20.683

在 Java 中，通常会抛出异常。这是做什么`Integer.parseInt()`的，这是该功能的官方 Java 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:51:46.273

如果字符串不能转换为整数，一种可能的选择是返回默认值。例如：

```
public int convert(String input, int defaultValue) {
    try {
        return Integer.parseInt(input);    
    } catch (Exception e) {
        return defaultValue;            
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:39:18.220

> 如果字符串无效，我应该返回什么

`Throw a RunTimeException`. **API**已经为您做到了。如果您尝试使用它解析无效字符串，则会在运行时`Integer.parseInt(str)`抛出。`NumberFormatException`

# powershell - Powershell - 在管道命令中将 DistinguishedName 转换为名称

> ID：15013574
> 
> 赞同：0
> 
> 时间：2013-02-21T22:38:01.217
> 
> 标签：powershell, active-directory

我在另一个问题中使用了这个命令。我正在搜索如何将经理字段从 DistinguishedName 转换为 Name (First name, last name)

```
Search-ADAccount -UsersOnly  -AccountDisabled:$false | Get-ADUser -Properties Name, manager| select Name, manager 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T07:49:31.983

这会做到的。我基本上是从“=”的第一个实例到“，”的第一个实例中提取经理 DN 中的文本

```
Search-ADAccount -UsersOnly  -AccountDisabled:$false | Get-ADUser -Properties Name, manager| select Name, @{N='Manager';E={$_.Manager.Substring($_.Manager.IndexOf("=") + 1, $_.Manager.IndexOf(",") - $_.Manager.IndexOf("=") - 1)}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-18T00:45:23.260

上一个答案的更简洁的版本。

搜索-ADAccount -UsersOnly -AccountDisabled:$false | Get-ADUser -Properties Name, manager| 选择名称，@{N='Manager';Expression={(Get-ADUser $_.Manager).name}}

# javascript - Javascript 替换字符。和 ，

> ID：15013575
> 
> 赞同：0
> 
> 时间：2013-02-21T22:38:02.107
> 
> 标签：javascript

我正在尝试以 javascript 形式进行简单的替换。

该表格正在向外部支付网关提交发票编号和金额。问题是支付网关不接受，（逗号）作为整数和小数部分（即美元，美分）之间的分隔符，而只接受（美元.美分）。

我想确保它接受两个字符。(dot) AND , (comma) 所以客户可以同时使用，表格只会发送。到外部服务器。

更新：

这是当前的 javascript 代码：

`

```
 function startPayment() {
        var objForm = document.getElementById("ePay");

        if (objForm.merchantnumber.value.length < 7) {
            alert("Please enter your merchant!");
            return false;
        }

        paymentwindow = new PaymentWindow({

            'windowstate': 1,

            'paymentcollection': 1,

            'language': 1,

            'merchantnumber': objForm.merchantnumber.value,

            'amount': objForm.amount.value * "100",

            'currency': "208",

            'orderid': objForm.orderid.value,

        });

        paymentwindow.open();
    }

    function init() {
        var sURL = String(window.location);
        var arrURL = sURL.split("/");
        var sAcceptURL = "";
        var objForm = document.getElementById("ePay");
        var n;

        for (n = 0; n < arrURL.length - 1; n++)
            sAcceptURL += arrURL[n] + "/";

        objForm.cancelurl.value = sURL;
        objForm.accepturl.value = sAcceptURL + "accept.html";
    }

</script>` 
```

这是 HTML 代码：

```
<tr>
<td>Amount:</td>
<td>
<input type="text" name="amount" value="" style="width: 200px;" />
</td>
<td>
Amount to pay
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:48:36.210

对此的解决方案是将“，”替换为“。” 如果这就是您要执行的操作：

`amount.replace(/,/g, '.');`

此行将使用 RegExp 查找出现的 ',' 并将其替换为 '.'。但是，由于您正在为后端创建一个安全表单，因此一些推荐的做法是先在后端对其进行解析，并确认没有 SQL 注入之类的痕迹，并确保所有输入都是有效的。例如，如果您只想接受数字和“.” 在您的输入中，我会使用：

```
var rxCheck = /[0-9\.]*/g;
if (!rxCheck.test(amount)) {
    // TODO: .. code if the input is invalid ..
} 
```

祝您搜索顺利！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:44:12.423

你可以试试这个：

```
objForm.amount.value.split(",").join("."); 
```

或这个：

```
objForm.amount.value.replace( /,/g, "." ) 
```

**当心：**如果您的代码要在更多文化中运行，您应该以另一种方式处理。

# objective-c - UINavigationController FUNKY

> ID：15013577
> 
> 赞同：0
> 
> 时间：2013-02-21T22:38:06.520
> 
> 标签：objective-c, uiviewcontroller, uinavigationcontroller

我目前正在使用本指南，以便可以用另一个视图控制器替换根控制器。 [http://starterstep.wordpress.com/2009/03/05/changeing-a-uinavigationcontroller%E2%80%99s-root-view-controller/](http://starterstep.wordpress.com/2009/03/05/changing-a-uinavigationcontroller%E2%80%99s-root-view-controller/)

目前，我已经在我的应用程序中得到了它。

考虑以下场景，View A (root) -> View B

在视图 B 上，有一个名为 firstLine 的布尔值（在 viewDidLoad 中设置为 YES），用于解析算法。当我们第一次进入视图时，该算法完美运行。（视图 A -> 视图 B）

然而，这个新场景破坏了我的解析算法，

视图 A -> 视图 B（按回）-> 视图 A -> 视图 B（中断）

这就是布尔值（firstLine）在我们第一次进入视图时被设置为 YES 时奇怪地交替的地方。我开始相信第一个视图 B 仍在后台运行；因此，我尝试了 popViewController 但这并没有真正起作用。它给了我一个黑屏，这显然是我不想要的。

有任何想法吗？

**编辑：已解决**

Turns out I was using an NSTimer and that kept on going off on its own. Therefore, I had to invalidate it when I left the view.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:45:15.167

```
[self.navigationController setViewControllers:myPreparedNewVCsStack 
animated:YES]; 
```

您可以过滤、移动和替换任何视图控制器：

```
NSMutableArray *tempStack = [NSMutableArray arrayWithArray:self.navigationController.viewControllers];

[tempStack filterUsingPredicate:[NSPredicate predicateWithFormat:@"class != %@", [AViewController class]]]; // the predicate can be even @"firstEnter == YES" 
```

您在新堆栈中的最后一个视图控制器将是顶部的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:08:29.877

查看此问题的答案[了解 iOS UIViewController 生命周期](https://stackoverflow.com/questions/5562938/looking-to-understand-the-ios-uiviewcontroller-lifecycle) 这将帮助您确定何时在视图中设置标志以及从一个 UIView 到另一个 UIView 会发生什么。

# iphone - 块是否在新线程或原始线程上运行？

> ID：15013581
> 
> 赞同：1
> 
> 时间：2013-02-21T22:38:16.213
> 
> 标签：iphone, objective-c, cocoa-touch, objective-c-blocks

如果我有下面定义的方法，传递给该方法的块（“处理程序”）是否会在由创建的新线程上调用`NSOperationQueue`？或者它是否在传递给它时所在的线程上被调用`methodWithCompletionHandler:`？

```
-(void)methodWithCompletionHandler:(void (^)(NSString *message))handler
{
   // Note: We are currently on thread #1\. Calling handler(@"my message") here
   //       will run on thread #1.

    NSBlockOperation* someOp = [NSBlockOperation blockOperationWithBlock: ^{

   // do some stuff
   }];

   [someOp setCompletionBlock:^{
      // Note: Now someOp is completing, but it's in thread #2\. Does calling the handler
      //       as below also run in thread #2 or thread #1?
      handler(@"Some message.");
   }];

   NSOperationQueue *queue = [NSOperationQueue new];
   [queue addOperation:someOp];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T22:41:53.870

从文档中：

> 无法保证完成块的确切执行上下文，但通常是辅助线程。

[http://developer.apple.com/library/ios/documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004591-RH2-SW36](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004591-RH2-SW36)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T22:41:10.333

在您发布的示例中， someOp 中的块将在不同的线程上执行。

通常，块的行为就像一个常规函数。它们在调用它们的线程上运行（除非块本身做了一些事情来调用另一个线程等......）

# c# - 发送多媒体指令

> ID：15013582
> 
> 赞同：5
> 
> 时间：2013-02-21T22:38:28.263
> 
> 标签：c#

有什么方法可以向操作系统发送多媒体控制命令，例如下一首歌曲、暂停、播放、音量提高等？`Fn`按下+ some mapped时发送的命令`..key`。我正在为 PC 制作遥控器，发送这些命令是必不可少的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-08T16:18:34.830

您可以使用 keybd_event 模拟按键，您必须模拟按键然后按键才能正确识别

```
 [DllImport("user32.dll", SetLastError = true)]
    public static extern void keybd_event(byte virtualKey, byte scanCode, uint flags, IntPtr extraInfo);
    public const int VK_MEDIA_NEXT_TRACK = 0xB0;
    public const int VK_MEDIA_PLAY_PAUSE = 0xB3;
    public const int VK_MEDIA_PREV_TRACK = 0xB1;
    public const int KEYEVENTF_EXTENDEDKEY = 0x0001; //Key down flag
    public const int KEYEVENTF_KEYUP = 0x0002; //Key up flag

    private void ButtonClick(object sender, EventArgs e)
        keybd_event(VK_MEDIA_PREV_TRACK, 0, KEYEVENTF_EXTENDEDKEY, IntPtr.Zero);
        keybd_event(VK_MEDIA_PREV_TRACK, 0, KEYEVENTF_KEYUP, IntPtr.Zero);
    }` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-22T19:51:49.237

[实际上，答案`dxramax`给了我不稳定的行为。我发布了这个答案，它给了我一致的行为，并且还有一些更多的细节。]

要发送多媒体键，包括**Play/Pause**、**NextTrack**、**PrevTrack**等，您可以使用`keybd_event`：

```
public class Program
{
    public const int KEYEVENTF_EXTENTEDKEY = 1;
    public const int KEYEVENTF_KEYUP = 0;
    public const int VK_MEDIA_NEXT_TRACK = 0xB0;
    public const int VK_MEDIA_PLAY_PAUSE = 0xB3;
    public const int VK_MEDIA_PREV_TRACK = 0xB1;

    [DllImport("user32.dll")]
    public static extern void keybd_event(byte virtualKey, byte scanCode, uint flags, IntPtr extraInfo);

    public static void Main(string[] args)
    {
        keybd_event(VK_MEDIA_PLAY_PAUSE, 0, KEYEVENTF_EXTENTEDKEY, IntPtr.Zero);    // Play/Pause

        //keybd_event(VK_MEDIA_PREV_TRACK, 0, KEYEVENTF_EXTENTEDKEY, IntPtr.Zero);  // PrevTrack
        //keybd_event(VK_MEDIA_NEXT_TRACK, 0, KEYEVENTF_EXTENTEDKEY, IntPtr.Zero);  // NextTrack
    } 
```

这是此 windows api 可以处理的受支持键代码的列表：
[https ://docs.microsoft.com/en-us/windows/win32/inputdev/virtual-key-codes](https://docs.microsoft.com/en-us/windows/win32/inputdev/virtual-key-codes)

`SendKeys`课程很好，但也很有限。上述方法将按键命令直接发送到 Windows 操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T00:52:30.660

不幸的是，在大多数情况下，`Fn`无法使用 Windows API 发送密钥，因此使用 .NET 类。这取决于制造商如何完成此功能。可能它由额外的驱动程序支持，甚至是操作系统。

`Fn`您可以通过尝试使用[Windows API 代码](http://www.codeproject.com/Articles/14485/Low-level-Windows-API-hooks-from-C-to-stop-unwante)或[AutoHotKey](http://www.autohotkey.com/)之类的应用程序挂钩来检查是否可以从代码中发送命令。例如，在我的笔记本电脑上，我无法挂接多媒体命令。

否则，如果幸运的话，请使用评论中提到的[SendKeys 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)

# c++ - c++ stl向量迭代器插入分段错误

> ID：15013584
> 
> 赞同：0
> 
> 时间：2013-02-21T22:38:36.950
> 
> 标签：c++, vector, iterator

```
 std::vector<struct::event>::iterator it;
          std::vector<struct::event>::iterator last=myvector.end();

          for (it=myvector.begin(); it<=last; it++){

            if(mysignal.declination<(*last).declination){

              if (mysignal.declination>=(*it).declination && mysignal.declination<(*(it+1)).declination){
                myvector.insert(it+1, mysignal);
                break;
              }
            }
            if (mysignal.declination>=(*last).declination){
              myvector.push_back(mysignal);
              break;
            }

            } 
```

我有一个名为 myvector 的向量，其中包含按偏角排序的事件。现在我想在正确的位置将 mysignal 添加到此向量。但我总是在发生一些事件后出现段错误，这些事件指的是：if(mysignal.declination<(*last).declination)。我只是看不出有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:59:16.733

您的循环是错误[的，请阅读文档](http://en.cppreference.com/w/cpp/container/vector/end)：

> 返回指向容器最后一个元素之后的元素的迭代器。该元素充当占位符；尝试访问它会导致未定义的行为。

你不能取消引用`end()`，它提供了一种知道你已经溢出容器的方法，所以你的循环条件应该是`it != myvector.end()`，并且`last`也是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:17:38.303

正如其他人所说，C++ 迭代器定义了一个半开区间 ( `'[begin()...end())'`)，这也是您在大多数其他情况下可能也应该使用的。尽管它适用于来自向量的迭代器，但一般来说，迭代器不支持 `<=`(nor `<`); 循环的标准习语是：

```
for ( auto current = container.begin();
        current != container.end();
        ++ current ) ... 
```

（在最有可能你不能指望 C++11 的情况下，你必须写出完整的迭代器类型，而不是使用 `auto`. 虽然`auto`这是 C++11 中似乎与 VC 一起工作的少数东西之一++11*和*最新版本的 g++，所以如果这些是您关心的唯一目标，并且您可以确定始终拥有最新版本，则可以使用它。）

此外，如果要访问循环中向量的最后一个元素，`myvector.back()`将返回对它的引用。（`myvector.back()`如果向量为空，则为未定义行为，但如果向量为空，则不会进入循环。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:45:55.760

end() 不引用容器中的最后一个元素，您需要按如下方式更改条件。

```
for (it=myvector.begin(); it != last; it++){ 
```

您还有其他损坏的逻辑，即最后需要修复的取消引用。

# sql - 提交和回滚在存储过程中不起作用

> ID：15013596
> 
> 赞同：0
> 
> 时间：2013-02-21T22:39:24.097
> 
> 标签：sql, stored-procedures, sql-server-2008-r2

我从我发布的问题中得到了我的一个问题的答案[点击这里](https://stackoverflow.com/questions/15012886/how-to-rollback-or-commit-a-transaction-in-sql-server)

我得到了这个解决方案

```
BEGIN TRY
BEGIN TRANSACTION 
    exec( @sqlHeader)
    exec(@sqlTotals)
    exec(@sqlLine)
COMMIT
 END TRY
 BEGIN CATCH

IF @@TRANCOUNT > 1
    ROLLBACK
 END CATCH 
```

得到解决方案后，我面临一个新问题，即第一次执行存储过程时它工作正常，之后出现以下错误

> *EXECUTE 之后的事务计数表明 BEGIN 和 COMMIT 语句的数量不匹配。先前计数 = 1，当前计数 = 0。*

我需要你的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:59:14.710

发生错误并且没有发生回滚，因为代码中存在错误。回滚和检查应该是：

```
IF @@TRANCOUNT > 0
    ROLLBACK
 END CATCH 
```

提交后，@@TRANCOUNT 将为零。如果发生错误，@@TRANCOUNT 将为 1。在原始代码中，这并没有触发回滚，但它应该有。

# python - 在python中使用mysql连接器插入数据

> ID：15013597
> 
> 赞同：9
> 
> 时间：2013-02-21T22:39:27.547
> 
> 标签：python, mysql, insert, mysql-connector

我遇到了一个有线问题，即当我即将将数据插入我的数据库时，它没有插入也没有失败（抛出异常）！,，当数据重复或错误的表提供它抛出异常！

这是我的代码！

```
from mysql import connector
con = connector.Connect(user='root',password='root',database='test',host='localhost')
cur=con.cursor()
cur.execute("""insert into user values ('userName', 'passWord')""") 
```

该数据库`test`仅包含一个表，`users`并且包含 3 个字段，即`id`and`username`和`password`，用户名是唯一的，id 是 A_I

**注意** 我也用过这个查询！：

> """插入用户 ( `username`, `password`) 值 ('userName', 'passWord');"""

并尝试了很多方法，但什么也没发生（没有插入也没有抛出异常！）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T22:54:56.587

```
from mysql import connector
con = connector.Connect(user='root',password='root',database='test',host='localhost')
cur=con.cursor()
cur.execute("""insert into user values ('userName', 'passWord')""")
**con.commit()**
con.close() 
```

您可能忘记使用 con.commit 将更改提交到数据库。

*不要将 con.commit() 用于每个 INSERT/UPDATE 操作，将其用于按 SQL 规则进行逻辑组合的操作组*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T22:42:07.317

看起来您可能忘记提交更改。

# boost - 使用 Boost 和 ArchLinux 构建项目

> ID：15013600
> 
> 赞同：1
> 
> 时间：2013-02-21T22:39:34.553
> 
> 标签：boost, linker, autotools, archlinux

我已经安装

```
extra/boost 1.52.0-1
extra/boost-libs 1.52.0-1 
```

在 ArchLinux 下使用 pacman。我正在尝试构建利用部分 Boost 库的 autotools C++ 项目。它们已在 Ubuntu 12.04 下成功测试和构建。带有已安装的`libboost-all-dev`软件包。ArchLinux`./configure`运行良好，编译过程 ( `make`) 似乎也可以工作。然而，链接似乎存在问题：

```
 libtool: link: g++ -g -O2 -Wall -Wextra -o ssbmc smtparser.o ... 
 ../contrib/cudd 2.4.2/obj/.libs/libobj.a ... 
 -lboost_program_options-mt -lboost_iostreams-mt -lgmp -lgmpxx -lm -lz
 /usr/bin/ld: cannot find -lboost_program_options-mt
 /usr/bin/ld: cannot find -lboost_iostreams-mt 
```

任何想法为什么它会失败？头文件似乎在那里，因为源代码使用了 Boost 库函数并且编译文件不会失败。

图书馆在那里：

```
$ ls /usr/lib/ | grep program
libboost_program_options.a
libboost_program_options.so
libboost_program_options.so.1.52.0
$ ls /usr/lib/ | grep iostreams
libboost_iostreams.a
libboost_iostreams.so
libboost_iostreams.so.1.52.0 
```

他们必须重命名吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:53:13.907

这似乎可以解决问题：

```
$sudo ln -s libboost_program_options.so libboost_program_options-mt.so
$sudo ln -s libboost_iostreams.so libboost_iostreams-mt.so 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:46:35.943

过去调用 Boost 库时足以显示它们所构建的体系结构。例如，-mt 表示“多线程”或“以线程感知模式构建”。据我所知，现在 Linux 上不遵循此约定，并且库默认情况下没有该后缀（尽管它们仍以线程感知模式构建）。您的 ./configure 脚本会生成旧格式的链接器指令。如果可以，请尝试使用 bjam。如果你说

```
bjam --layout=tagged 
```

你甚至可以拿回你的足够的东西......从技术上讲，你的解决方案也是完全有效的:)

# asp.net - iPad 上的 ASP.NET iTextSharp PDF - 错误

> ID：15013602
> 
> 赞同：1
> 
> 时间：2013-02-21T22:39:42.880
> 
> 标签：asp.net, ipad, pdf, itextsharp

我正在开发一个 ASP.NET 应用程序，它通过 ASP.NET Web API 向客户端返回 iTextSharp (v4.1.6) PDF。这适用于我尝试过的所有桌面 PC 浏览器，例如 IE9、Firefox、Opera 和 Safari。下面的代码演示了发回 PDF 的响应。

该应用程序还可以在运行 IOS 6.1 的 Ipad 2 上作为 Web 应用程序运行。当我在 iPad 上返回 PDF 时，我收到以下错误。

**此页面包含以下错误：第 1 行第 1 列的错误：文档为空 第 1 行第 1 列的错误：编码错误**

这发生在 iPad 上的以下任何一种情况下：Web App 模式、Safari 或 Google Chrome。当我将 PDF 从我的台式电脑通过电子邮件发送到我的 iPad 时，PDF 本身确实可以打开并查看良好，因此它不认为 PDF 本身存在问题，而是我将其提供给客户的方式存在问题。

任何帮助将不胜感激 - 我已经坚持了很长一段时间！

生成 PDF 的 API 代码：

```
[HttpPost]
public string GetReport(JObject jObject)
{
    var context = HttpContext.Current;

    using (var ms = new MemoryStream())
    {
        MyPDF.Generate(ms); // Fills the Memory Stream with the iTextSharp PDF

        var data = ms.ToArray();
        var response = context.Response;
        response.Cache.SetCacheability(HttpCacheability.NoCache);
        response.ContentType = "application/octlet-stream";
        response.AddHeader("content-length", data.Length.ToString(CultureInfo.InvariantCulture));
        response.AddHeader("content-disposition", "attachment; filename=" + fileName.Replace(" ", string.Empty) + ".pdf");
        response.BinaryWrite(data);
        context.ApplicationInstance.CompleteRequest();
    }

    return string.Empty;
} 
```

# c# - 接收端的 NetworkStream 文件名

> ID：15013607
> 
> 赞同：0
> 
> 时间：2013-02-21T22:40:00.400
> 
> 标签：c#, sockets, file-transfer, lan

我已经为此工作了两天，但我无法弄清楚。我想通过 TCP 传输文件（服务器发送，客户端接收）。

我面临的问题是我想实现一种方法让接收方知道它正在获取的文件的文件名是什么。到目前为止我的工作代码

```
 public void SendFile(string path, string IP)
    {
        TcpClient client = new TcpClient();
        client.Connect(IP, 1095);

        using (NetworkStream networkStream = client.GetStream())
        using (FileStream fileStream = File.OpenRead(path))
        {
            ASCIIEncoding asci = new ASCIIEncoding();
            byte[] b = asci.GetBytes(path);
            networkStream.Write(b, 0, b.Length);
            networkStream.Flush();
            fileStream.CopyTo(networkStream);
        }
        client.Close();
    }

    private void ListenForFile()
    {
        TcpListener listener = new TcpListener(IPAddress.Any, 1095);
        listener.Start();
        using (TcpClient incoming = listener.AcceptTcpClient())
        using (NetworkStream networkStream = incoming.GetStream())
        using (FileStream fileStream = File.OpenWrite(@pathName + @"\something.extension"))
        {
            networkStream.CopyTo(fileStream);
        }
        listener.Stop();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:42:32.833

`NetworkStream`没有文件的概念，它只是一个流字节缓冲区的类。您需要做的是想出某种形式的协议来将文件名发送给客户端。

您可以通过首先传输文件名和文件名的长度，然后是文件大小，然后传输实际文件内容来做到这一点。

客户端可以读入文件名长度，读入文件名，读入文件大小，然后读入文件数据。

# c# - TFS 构建代理和 Office PIA

> ID：15013608
> 
> 赞同：2
> 
> 时间：2013-02-21T22:40:14.087
> 
> 标签：c#, tfs, interop, ms-office, office-2007

我目前正在调查 TFS 2012 自动构建/构建代理

我的情况是我有：

*   构建 Office 2007 插件的旧版解决方案
*   测试构建控制器
*   两个测试构建代理，一个在 Windows 7 和 Windows Server 2012
*   构建代理上没有安装视觉工作室或办公室。

为了让构建代理编译项目，我需要安装安装在构建代理上的 Office 2007 PIA 库。我已经设法在 Windows 7 机器上做到这一点，因为它上面有办公室，作为标准图像的一部分。

但是 Server 2012 机器没有，因为它是 Windows 服务器。

当我尝试安装 Office 2007 PIA 可再发行库时，它阻止了我，因为未安装 Office。我的第一个想法是我应该不愿意安装办公室，因为：

*   这是办公室，我不应该在服务器上安装办公室
*   我必须调查许可

有没有办法在没有办公室的情况下在 Windows 服务器上安装 Office 2007 PIA？

如果需要，我可以手动安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:57:57.833

可以在此处找到独立的可再发行组件，除非他们更改了需求办公室，否则不需要安装。 [http://www.microsoft.com/en-us/download/details.aspx?id=3508](http://www.microsoft.com/en-us/download/details.aspx?id=3508)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:21:58.433

只需安装office即可满足pia库的预安装要求

# spring - Spring Security Remember-Me REST web service - 如何使用持久令牌方法在 200 响应中返回令牌

> ID：15013609
> 
> 赞同：0
> 
> 时间：2013-02-21T22:40:15.220
> 
> 标签：spring, curl, spring-security, restful-authentication, remember-me

我使用 Spring Security 保护了我的其余 Web 服务。我正在通过各种处理程序返回适当的响应（401 表示失败，200 表示成功等）。客户端不想将凭据存储在设备上，因此我无法通过在每个请求的标头中传递凭据来进行真正的 restful per-request 身份验证。因此，我正在尝试使用 Remember-me 设置持久令牌方法。

我已经设置好 db 表并且能够登录。登录在我的数据库的 persistent_logins 表中创建一行，其中包含系列和令牌值。

我的问题是双重的：

1.  我需要在我的 successHandler 类中添加什么来向用户返回 200 响应以返回令牌（我是否也需要系列值？）？
2.  通过 curl 进行测试时，如何在标头中设置此标记？

这是我的 successHandler 类：

```
public class RestAuthenticationSuccessHandler extends SimpleUrlAuthenticationSuccessHandler{

@Override
public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,
                                    Authentication authentication) throws ServletException, IOException {
    response.setStatus(HttpServletResponse.SC_OK);
    clearAuthenticationAttributes(request);
}
} 
```

提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:08:48.407

将`PersistentTokenBasedRememberMeServices`确保在`SPRING_SECURITY_REMEMBER_ME_COOKIE`包含编码的系列和令牌值的响应（默认情况下）上设置一个 cookie，因此您不需要身份验证成功处理程序中的任何额外代码。使用 curl 进行测试时，只需将这个 cookie 发回即可。

如果在响应中没有看到这个cookie，请检查登录请求中是否包含`_spring_security_remember_me=true`表示客户端实际请求remember-me功能的参数，或者默认配置which的`alwaysRemember`属性`PersistentTokenBasedRememberMeServices`为false。

# c# - 将 RowSplitter 与 UniformGrid 或其他东西一起使用以获得所需的结果

> ID：15013615
> 
> 赞同：2
> 
> 时间：2013-02-21T22:40:31.430
> 
> 标签：c#, .net, wpf, xaml

我对 wpf 还很陌生，所以请多多包涵。

我的问题是，我有 4 个图形控件放置在另一个上方，显示在弹出窗口中。最初默认显示所有 4 个，但在显示窗口后，用户可以选择取消选中功能区控件中的复选框以关闭一个或多个图形。我使用 UniformGrid 是因为剩余的图形会自动调整大小以占用剩余空间。

我现在需要添加一个 RowSplitter，以便用户可以控制每个可见图形的高度。顶部图形的顶部应锚定到窗口的顶部，底部图形的底部应锚定到窗口的底部。当用户在 2 个图形之间滑动 RowSplitter 时，它应该会影响它们的高度。

我做了一个简单的测试项目来尝试和工作。

```
<Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Background="LightGray"  Grid.Row="0" Orientation="Horizontal">
            <CheckBox Content="Graph 1" Name="Graph1Vis" IsChecked="True" HorizontalAlignment="Left"/>
            <CheckBox Content="Graph 2" Name="Graph2Vis" IsChecked="True" HorizontalAlignment="Left"/>
            <CheckBox Content="Graph 3" Name="Graph3Vis" IsChecked="True" HorizontalAlignment="Left"/>
            <CheckBox Content="Graph 4" Name="Graph4Vis" IsChecked="True" HorizontalAlignment="Left"/>
        </StackPanel>
        <UniformGrid Grid.Row="1" Height="Auto"  Columns="1">
            <Label Content="Graph 1" Background="Azure" Grid.Row="0" 
                   Visibility="{Binding IsChecked, ElementName=Graph1Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <GridSplitter Grid.Row="1" Width="Auto" Height="8" Background="DarkSlateBlue"
                        HorizontalAlignment="Stretch" VerticalAlignment="Bottom"/>
        <Label Content="Graph 2" Background="Lavender" Grid.Row="2" 
               Visibility="{Binding IsChecked, ElementName=Graph2Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <GridSplitter Grid.Row="3" Width="Auto" Height="8" Background="DarkSlateBlue"
                        HorizontalAlignment="Stretch" VerticalAlignment="Top"/>
        <Label Content="Graph 3" Background="Moccasin" Grid.Row="4"
               Visibility="{Binding IsChecked, ElementName=Graph3Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <GridSplitter Grid.Row="5" Width="Auto" Height="8" Background="DarkSlateBlue"
                        HorizontalAlignment="Stretch" VerticalAlignment="Top"/>
        <Label Content="Graph 4" Background="Beige" Grid.Row="6"
               Visibility="{Binding IsChecked, ElementName=Graph4Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
    </UniformGrid>
    </Grid> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:47:53.677

我的想法是实际添加/删除网格中的行。这需要对其他元素进行一些调整，但我认为可以按照您的目标使用网格/网格分割器。该解决方案可以保持非常通用。一个好处是行高被记住了，所以如果你再次显示一个图表，它会显示在它之前的高度。此外，当删除一行时，其他图表将按比例占用释放的空间，这似乎是正确的行为。

我没有使用每个 gridsplitter 的一行，我只是在每行的底部放置一个（最后一行除外）。xaml 部分：

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel x:Name="panelVisibilities" Background="LightGray"  Grid.Row="0" Orientation="Horizontal">
            <CheckBox Content="Graph 1" x:Name="Graph1Vis" IsChecked="True" HorizontalAlignment="Left" Click="GraphVis_Click"/>
            <CheckBox Content="Graph 2" x:Name="Graph2Vis" IsChecked="True" HorizontalAlignment="Left" Click="GraphVis_Click"/>
            <CheckBox Content="Graph 3" x:Name="Graph3Vis" IsChecked="True" HorizontalAlignment="Left" Click="GraphVis_Click"/>
            <CheckBox Content="Graph 4" x:Name="Graph4Vis" IsChecked="True" HorizontalAlignment="Left" Click="GraphVis_Click"/>
        </StackPanel>
        <Grid Grid.Row="1" VerticalAlignment="Stretch" x:Name="graphGrid" >
            <Grid.RowDefinitions>
                <RowDefinition Height="*" MinHeight="20"/>
                <RowDefinition Height="*" MinHeight="20"/>
                <RowDefinition Height="*" MinHeight="20"/>
                <RowDefinition Height="*" MinHeight="20"/>
            </Grid.RowDefinitions> 
            <Label Grid.Row="0" Content="Graph 1" Background="Azure"  Visibility="{Binding IsChecked, ElementName=Graph1Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <GridSplitter Grid.Row="0" ResizeBehavior="CurrentAndNext" VerticalAlignment="Bottom" Height="2" Background="DarkSlateBlue" HorizontalAlignment="Stretch"  Visibility="{Binding IsChecked, ElementName=Graph1Vis, Converter={StaticResource BooleanToVisibilityConverter}}" />
            <Label Grid.Row="1" Content="Graph 2" Background="Lavender"  Visibility="{Binding IsChecked, ElementName=Graph2Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <GridSplitter Grid.Row="1" ResizeBehavior="CurrentAndNext" VerticalAlignment="Bottom" Height="2" Background="DarkSlateBlue" HorizontalAlignment="Stretch"  Visibility="{Binding IsChecked, ElementName=Graph2Vis, Converter={StaticResource BooleanToVisibilityConverter}}" />
            <Label Grid.Row="2" Content="Graph 3" Background="Moccasin" Visibility="{Binding IsChecked, ElementName=Graph3Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <GridSplitter Grid.Row="2" ResizeBehavior="CurrentAndNext" VerticalAlignment="Bottom" Height="2" Background="DarkSlateBlue" HorizontalAlignment="Stretch" Visibility="{Binding IsChecked, ElementName=Graph3Vis, Converter={StaticResource BooleanToVisibilityConverter}}" />
            <Label Grid.Row="3" Content="Graph 4" Background="Beige" Visibility="{Binding IsChecked, ElementName=Graph4Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
        </Grid>
    </Grid>
</UserControl> 
```

后面的代码：

```
public partial class UserControl1 : UserControl
{
    private List<RowDefinition> _rows; // rows in graphGrid
    private List<CheckBox> _visibilityCheckboxes; // checkboxes that determine graph visibilities
    private Dictionary<int, List<UIElement>> _elementsByRow = new Dictionary<int, List<UIElement>>(); // map of elements per row

    public UserControl1()
    {
        InitializeComponent();

        _visibilityCheckboxes = this.panelVisibilities.Children.OfType<CheckBox>().ToList();
        _rows = this.graphGrid.RowDefinitions.ToList();

        // create map of elements per row
        var elements = this.graphGrid.Children.Cast<UIElement>();
        for (int i = 0; i < _rows.Count; i++)
        {
            _elementsByRow.Add(i, elements.Where(e => Grid.GetRow(e) == i).ToList());
        }

        // check counts (optional)
        if (_rows.Count != _visibilityCheckboxes.Count)
            System.Diagnostics.Debug.WriteLine("Graph count does not match checkbox count.");

    }

    /// <summary>
    /// Handles the visibility checkboxes click.
    /// Adds/removes rows from the graphGrid, and adjusts the other elements accordingly.
    /// </summary>
    private void GraphVis_Click(object sender, RoutedEventArgs e)
    {
        CheckBox chbx = sender as CheckBox;

        if (chbx != null && _visibilityCheckboxes.Contains(chbx))
        {
            int actualIndex = GetActualIndex(chbx); // row index at which the change occurs
            int originalIndex = _visibilityCheckboxes.IndexOf(chbx); // original index of the inserted row
            bool isChecked = (bool)chbx.IsChecked;

            RepositionControls(actualIndex, isChecked); 

            if (isChecked)
            {
                this.graphGrid.RowDefinitions.Insert(actualIndex, _rows[originalIndex]); // add row
                foreach (var element in _elementsByRow[originalIndex])
                    Grid.SetRow(element, actualIndex); // set element's grid.row to inserted row number
            }
            else
                this.graphGrid.RowDefinitions.RemoveAt(actualIndex); // remove row
        }

    }

    /// <summary>
    /// Determines at which row number the change needs to occur.
    /// E.g. when checking chbx3, but only chbx1 is already checked (chbx2 is not), 
    /// the index of change (zero based) is 1 and not 2.
    /// </summary>
    /// <param name="chbx">Checkbox that was just changed</param>
    private int GetActualIndex(CheckBox chbx)
    {
        int i = 0;
        foreach (var c in _visibilityCheckboxes)
        {
            if (c == chbx) break;
            if ((bool)c.IsChecked) i++;
        }
        return i;
    }

    /// <summary>
    /// Moves elements to the appropriate grid row
    /// </summary>
    /// <param name="startIndex">Row number, at which the change occurs</param>
    /// <param name="isChecked">True if adding row, false when removing row</param>
    private void RepositionControls(int startIndex, bool isChecked)
    {
        if (!isChecked) startIndex++; // e.g. remove at row1 --> elements in row2, row3.. need to be adjusted

        // get all elements that need row adjustment (IsMeasureValid is false for non-displayed elements - is there a better property to use?)
        var elementsToMove = this.graphGrid.Children.Cast<UIElement>().Where(e => Grid.GetRow(e) >= startIndex && e.IsMeasureValid);

        foreach (var element in elementsToMove)
        {
            // increase or decrease grid.row property
            Grid.SetRow(element, Grid.GetRow(element) + (isChecked ? 1 : -1)); 
        }
    }
} 
```

一个可能的改进是总是从最底部的图表中删除网格分割器，我猜这不会太难弄清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:18:59.210

想法是这样的：构建一个有 4 行的网格，每行有 1 个图表。将 3 个矩形作为拆分器按钮添加到网格中，并将它们的 Grid.RowSpan 设置为 4。

MainWindow.xaml：

```
<Window x:Class="testwpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        MouseMove="Window_MouseMove_1" MouseUp="Window_MouseUp_1">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Name="row1" Height="40"/>
            <RowDefinition Name="row2" Height="40"/>
            <RowDefinition Name="row3" Height="40"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Rectangle Grid.Row="0" Fill="Green"/>
        <Rectangle Grid.Row="1" Fill="Blue"/>
        <Rectangle Grid.Row="2" Fill="Red"/>
        <Rectangle Grid.Row="3" Fill="Yellow"/>
        <Rectangle Fill="#5000" VerticalAlignment="Top" Height="10" Name="splitter1" MouseDown="splitter_MouseDown_1" Grid.RowSpan="4" Margin="0,40,0,0"/>
        <Rectangle Fill="#5000" VerticalAlignment="Top" Height="10" Name="splitter2" MouseDown="splitter_MouseDown_1" Grid.RowSpan="4" Margin="0,80,0,0"/>
        <Rectangle Fill="#5000" VerticalAlignment="Top" Height="10" Name="splitter3" MouseDown="splitter_MouseDown_1" Grid.RowSpan="4" Margin="0,120,0,0"/>
    </Grid>
</Window> 
```

MainWindow.xaml.cs：

```
 FrameworkElement dragginSplitter = null;
    private void splitter_MouseDown_1(object sender, MouseButtonEventArgs e)
    {
        dragginSplitter = sender as FrameworkElement;
    }
    private void Window_MouseMove_1(object sender, MouseEventArgs e)
    {
        if (dragginSplitter != null)
            dragginSplitter.Margin = new Thickness(0, e.GetPosition(this).Y, 0, 0);
        if (splitter2.Margin.Top < splitter1.Margin.Top + 10) splitter2.Margin = new Thickness(0, splitter1.Margin.Top + 10, 0, 0);
        if (splitter3.Margin.Top < splitter2.Margin.Top + 10) splitter3.Margin = new Thickness(0, splitter2.Margin.Top + 10, 0, 0);
        row1.Height = new GridLength(splitter1.Margin.Top);
        row2.Height = new GridLength(splitter2.Margin.Top - splitter1.Margin.Top);
        row3.Height = new GridLength(splitter3.Margin.Top - splitter2.Margin.Top);
    }
    private void Window_MouseUp_1(object sender, MouseButtonEventArgs e)
    {
        dragginSplitter = null;
    } 
```

Window_MouseMove_1 的重要说明：

1.  每当拖动拆分器时，draggingSplitter 的上边距等于鼠标的 Y 位置。
2.  拆分器不应相互通过，因此每当拖动拆分器时，我们都会检查它们的上边距。
3.  每当拖动拆分器时，根据拆分器的上边距计算网格行的高度（不是网格的内容）。

* * *

## 编辑：

* * *

我修改了代码并添加了各种条件以满足隐藏/显示的需要。

```
<Window x:Class="testwpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        MouseMove="Window_MouseMove_1" MouseUp="Window_MouseUp_1">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Name="row1" Height="40"/>
            <RowDefinition Name="row2" Height="40"/>
            <RowDefinition Name="row3" Height="40"/>
            <RowDefinition Name="row4" Height="*"/>
        </Grid.RowDefinitions>
        <Rectangle Grid.Row="0" Fill="Green"/>
        <Rectangle Grid.Row="1" Fill="Blue"/>
        <Rectangle Grid.Row="2" Fill="Red"/>
        <Rectangle Grid.Row="3" Fill="Yellow"/>
        <Rectangle Fill="#5000" VerticalAlignment="Top" Height="10" Name="splitter1" MouseDown="splitter_MouseDown_1" Grid.RowSpan="4" Margin="0,40,0,0"/>
        <Rectangle Fill="#5000" VerticalAlignment="Top" Height="10" Name="splitter2" MouseDown="splitter_MouseDown_1" Grid.RowSpan="4" Margin="0,80,0,0"/>
        <Rectangle Fill="#5000" VerticalAlignment="Top" Height="10" Name="splitter3" MouseDown="splitter_MouseDown_1" Grid.RowSpan="4" Margin="0,120,0,0"/>
        <WrapPanel Grid.RowSpan="4">
            <CheckBox Name="check1" Content="graph1" IsChecked="True" Checked="CheckBox_Checked_1" Unchecked="CheckBox_Checked_1"/>
            <CheckBox Name="check2" Content="graph2" IsChecked="True" Checked="CheckBox_Checked_1" Unchecked="CheckBox_Checked_1"/>
            <CheckBox Name="check3" Content="graph3" IsChecked="True" Checked="CheckBox_Checked_1" Unchecked="CheckBox_Checked_1"/>
            <CheckBox Name="check4" Content="graph4" IsChecked="True" Checked="CheckBox_Checked_1" Unchecked="CheckBox_Checked_1"/>
        </WrapPanel>
    </Grid>
</Window> 
```

xaml 更改：添加了 4 个复选框并命名了第 4 行。

```
FrameworkElement dragginSplitter = null;
private void splitter_MouseDown_1(object sender, MouseButtonEventArgs e)
{
    dragginSplitter = sender as FrameworkElement;
}

private void Window_MouseMove_1(object sender, MouseEventArgs e)
{
    if (dragginSplitter != null)
    {
        dragginSplitter.Margin = new Thickness(0, e.GetPosition(this).Y, 0, 0);
        updateSplitters();
    }
}

private void updateSplitters()
{
    if (splitter2.Margin.Top < splitter1.Margin.Top + 10) splitter2.Margin = new Thickness(0, splitter1.Margin.Top + 10, 0, 0);
    if (splitter3.Margin.Top < splitter2.Margin.Top + 10) splitter3.Margin = new Thickness(0, splitter2.Margin.Top + 10, 0, 0);

    if (check1.IsChecked.Value)
    {
        if (!check2.IsChecked.Value && !check3.IsChecked.Value && !check4.IsChecked.Value)
            row1.Height = new GridLength(1, GridUnitType.Star);
        else 
            row1.Height = new GridLength(splitter1.Margin.Top);
    }
    else
        row1.Height = new GridLength(0);

    if (check2.IsChecked.Value)
    {
        if (!check3.IsChecked.Value && !check4.IsChecked.Value)
            row2.Height = new GridLength(1, GridUnitType.Star);
        else if(check1.IsChecked.Value)
            row2.Height = new GridLength(splitter2.Margin.Top - splitter1.Margin.Top);
        else
            row2.Height = new GridLength(splitter2.Margin.Top);
    }
    else
        row2.Height = new GridLength(0);

    if (check3.IsChecked.Value)
    {
        if (!check4.IsChecked.Value)
            row3.Height = new GridLength(1, GridUnitType.Star);
        else if (check2.IsChecked.Value)
            row3.Height = new GridLength(splitter3.Margin.Top - splitter2.Margin.Top);
        else if (check1.IsChecked.Value)
            row3.Height = new GridLength(splitter3.Margin.Top - splitter1.Margin.Top);
        else
            row3.Height = new GridLength(splitter3.Margin.Top);
    }
    else
        row3.Height = new GridLength(0);

    row4.Height = check4.IsChecked.Value ? new GridLength(1, GridUnitType.Star) : new GridLength(0);
}

private void Window_MouseUp_1(object sender, MouseButtonEventArgs e)
{
    dragginSplitter = null;
}

private void CheckBox_Checked_1(object sender, RoutedEventArgs e)
{
    if (check4 == null) return;//for when not yet completely loaded

    if (!check1.IsChecked.Value)
        splitter1.Visibility = System.Windows.Visibility.Collapsed;
    if (!check2.IsChecked.Value)
        splitter2.Visibility = System.Windows.Visibility.Collapsed;
    if (!check3.IsChecked.Value)
        splitter3.Visibility = System.Windows.Visibility.Collapsed;
    if (!check4.IsChecked.Value)
    {
        splitter3.Visibility = System.Windows.Visibility.Collapsed;
        if (!check3.IsChecked.Value)
            splitter2.Visibility = System.Windows.Visibility.Collapsed;
        if (!check2.IsChecked.Value)
            splitter1.Visibility = System.Windows.Visibility.Collapsed;
    }

    if (check1.IsChecked.Value && (check2.IsChecked.Value || check3.IsChecked.Value || check4.IsChecked.Value))
        splitter1.Visibility = System.Windows.Visibility.Visible;
    if (check2.IsChecked.Value && (check3.IsChecked.Value || check4.IsChecked.Value))
        splitter2.Visibility = System.Windows.Visibility.Visible;
    if (check3.IsChecked.Value && check4.IsChecked.Value)
        splitter3.Visibility = System.Windows.Visibility.Visible;

    updateSplitters();
} 
```

cs的变化：

1.  updateSplitters 函数被替换为之前用于更新拆分器边距的逻辑。
2.  检查或未选中任何复选框时，调用分离器更改和更新更新的可见性。
3.  updateSplitters 完成所有其余的工作。没什么好说的，除了最后一个可见行总是有 Star 的 GridUnitType 来填充网格的剩余空间。

我发现的唯一问题是，当窗口调整大小或将上面的行之一调整为较大的高度值时，网格的下部内容可能会从屏幕上掉下来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:06:59.143

以下是我所做的更改...

***MainWindow.xaml：***

在本节中，请确保添加以下内容：

![在此处输入图像描述](../Images/5d7814080226eddebba83b19a4a975da.png)

```
<Window.Resources>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
</Window.Resources>

<Grid>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <StackPanel Background="LightGray" Grid.Row="0" Orientation="Horizontal">
            <CheckBox Content="Graph 1" x:Name="Graph1Vis" IsChecked="True" HorizontalAlignment="Left"/>
            <CheckBox Content="Graph 2" x:Name="Graph2Vis" IsChecked="True" HorizontalAlignment="Left"/>
            <CheckBox Content="Graph 3" x:Name="Graph3Vis" IsChecked="True" HorizontalAlignment="Left"/>
            <CheckBox Content="Graph 4" x:Name="Graph4Vis" IsChecked="True" HorizontalAlignment="Left"/>
        </StackPanel>

        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="{Binding Mode=TwoWay, Path=IsChecked, ElementName=Graph1Vis, Converter={local:CheckedToLengthConverter}}"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="{Binding Mode=TwoWay, Path=IsChecked, ElementName=Graph2Vis, Converter={local:CheckedToLengthConverter}}"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="{Binding Mode=TwoWay, Path=IsChecked, ElementName=Graph3Vis, Converter={local:CheckedToLengthConverter}}"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="{Binding Mode=TwoWay, Path=IsChecked, ElementName=Graph4Vis, Converter={local:CheckedToLengthConverter}}"></RowDefinition>
            </Grid.RowDefinitions>

            <Label Content="Graph 1" Background="Azure" Grid.Row="0" Visibility="{Binding IsChecked, ElementName=Graph1Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <GridSplitter Grid.Row="1" Width="Auto" Height="8" Background="DarkSlateBlue" HorizontalAlignment="Stretch" VerticalAlignment="Center" Visibility="{Binding IsChecked, ElementName=Graph1Vis, Converter={StaticResource BooleanToVisibilityConverter}}" />
            <Label Content="Graph 2" Background="Lavender" Grid.Row="2" Visibility="{Binding IsChecked, ElementName=Graph2Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <GridSplitter Grid.Row="3" Height="8" Background="DarkSlateBlue" HorizontalAlignment="Stretch" VerticalAlignment="Center" Visibility="{Binding IsChecked, ElementName=Graph2Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <Label Content="Graph 3" Background="Moccasin" Grid.Row="4" Visibility="{Binding IsChecked, ElementName=Graph3Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <GridSplitter Grid.Row="5" Width="Auto" Height="8" Background="DarkSlateBlue" HorizontalAlignment="Stretch" VerticalAlignment="Center" Visibility="{Binding IsChecked, ElementName=Graph4Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <Label Content="Graph 4" Background="Beige" Grid.Row="6" Visibility="{Binding IsChecked, ElementName=Graph4Vis, Converter={StaticResource BooleanToVisibilityConverter}}"/>
        </Grid>
    </Grid>
</Grid> 
```

***主窗口.xaml.cs***

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    {
public class CheckedToLengthConverter : System.Windows.Markup.MarkupExtension, IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return System.Convert.ToBoolean(value) ? new GridLength(1, GridUnitType.Star) : new GridLength(0, GridUnitType.Pixel);
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return Binding.DoNothing;
        }

        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            return this;
        }
    }
public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
//etc... 
```

我希望这是您正在寻找的，如果您有任何问题/疑虑，请告诉我！

此外，由于您刚刚开始，我将为您提供一些有用的建议。

## 姓名

使用 WPF 时，某些元素没有属性`Name`，这就是为什么我建议`x:Name`在命名元素时使用。

* * *

## 网格分割器

每当使用`GridSplitter`时，请确保提供以下内容：

*   垂直对齐
*   水平对齐
*   宽度和/或高度

这将确保`GridSplitter`遗嘱有效。

在您的示例中，每个`GridSplitter`都有不同的`VerticalAlignment`值，这将导致结果不一致。我建议使用`VerticalAlignment="Center"`.

* * *

## 网格/统一网格

我建议使用`Grid`over `UniformGrid`。可以说是最强大的布局容器，并且比（很少使用）`Grid`提供更多的自由。`UniformGrid`

# c++ - 为什么我不应该使用 std::string.c_str() 作为缓冲区？

> ID：15013621
> 
> 赞同：0
> 
> 时间：2013-02-21T22:40:58.433
> 
> 标签：c++, stdstring

虽然这很可能是一个愚蠢的问题，但我看到了一些关于你不应该这样做的事情，尽管它在 C++ 11 中是允许的，但我不太明白为什么。谁能解释这是为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T22:45:13.567

**这不被允许！**

> ## 21.4.7 basic_string 字符串操作[string.ops]
> 
> ### 21.4.7.1 basic_string 访问器[string.accessors]
> 
> ```
> const charT* c_str() const noexcept;
> const charT* data() const noexcept; 
> ```
> 
> 1.  返回： 一个指针 p，使得 p + i == &operator 对于 [0,size()] 中的每个 i。
> 2.  复杂性：恒定时间。
> 3.  要求：程序不得更改存储在字符数组中的任何值。

除此之外，您正在通过 a 修改数据引用`const char *`，这通常表示 a `const_cast<char*>`。这不仅会导致未定义的行为，而且根据 Herb Sutter 的说法，`const`现在应该被理解为线程安全的（[参见他关于`const`and`mutable`](http://channel9.msdn.com/posts/C-and-Beyond-2012-Herb-Sutter-You-dont-know-blank-and-blank)的讨论）。

但是，如前所述，如果足够大，则使用`std::string str; &str[0]`是安全的。`str`只是不要使用`.c_str()`or `.data()`。

# activiti - 错误 - 尝试使用 executionListener-Activiti 时无法解析标识符

> ID：15013639
> 
> 赞同：1
> 
> 时间：2013-02-21T22:42:00.403
> 
> 标签：activiti

我正在尝试从 activiti 序列流中调用一个方法，但出现以下错误，有人可以帮我解决这个问题吗？

```
<sequenceFlow id="finalTask" name="finalTask" sourceRef="chargeAccount" targetRef="theEnd">
            <extensionElements>
                <activiti:executionListener
                    expression="${EscalationListener.escalate(execution, 'kermit')}"
                    event="end" />
            </extensionElements>
        </sequenceFlow> 
```

**错误：**

原因：org.activiti.engine.impl.javax.el.PropertyNotFoundException：无法在 org.activiti.engine.impl.juel.AstIdentifier.eval 解析标识符“EscalationListener”（AstIdentifier.java:8

**Java代码：**

```
import org.activiti.engine.HistoryService;
import org.activiti.engine.delegate.DelegateExecution;

public class EscalationListener {
    HistoryService historyService;

    public void escalate(DelegateExecution execution, String otherTaskId)
            throws Exception {

        historyService.createHistoricTaskInstanceQuery().taskOwner(otherTaskId)
                .finished();
        //System.out.println("called history service" + otherTaskId);

        // do some stuff with the task
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:40:30.343

您需要添加`EscalationListener`为流程变量：

```
runtimeService.setVariable(yourExecutionId, "escalationListener" , new EscalationListener()); 
```

您还可以在开始流程之前添加流程变量：

```
runtimeService.startProcessInstanceByKey("someKey", processVariables); 
```

processVariables 是`Map<String, Object>`您放置`EscalationListener`对象的位置

或将其声明为 Spring bean 以在流程定义中访问它：

```
<bean id="EscalationListener" class="com.test.activiti.listener.EscalationListener" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:07:36.693

```
<activiti:executionListener
                expression="${EscalationListener.escalate(execution, 'kermit')}"
                event="end" /> 
```

尝试在`EscalationListener`这里更改`escalationListener`。我有时因此而遇到问题。

可悲的是`PropertyNotFoundException: Cannot resolve identifier`，当您遇到错误时，这种情况经常发生。至少对我来说，这对你没有帮助......

# mysql - MySql UPDATE 与 SUM 在同一张表中

> ID：15013642
> 
> 赞同：6
> 
> 时间：2013-02-21T22:42:08.437
> 
> 标签：mysql, sql, sum

我正在使用具有以下结构的表（结果）（不要问，我没有构建它）

```
id | record_type | user_id | answer_id | choice | score | total |    email
-------------------------------------------------------------------------------
1    email         xxxxxxx                                  0     userX@site.com
2    answer        xxxxxxx    aaaaaa       A       0
3    answer        xxxxxxx    bbbbbb       A       0
4    answer        xxxxxxx    cccccc       B       10
5    email         yyyyyyy                                  0     userY@site.com
6    answer        yyyyyyy    aaaaaa       A       0
7    answer        yyyyyyy    bbbbbb       A       0
8    answer        yyyyyyy    cccccc       A       0
9    email         zzzzzzz                                  0     userZ@site.com
10   answer        zzzzzzz    aaaaaa       A       0
11   answer        zzzzzzz    bbbbbb       A       0
12   answer        zzzzzzz    cccccc       B       10 
```

这是一项调查，提交调查后正确答案的得分值会发生变化。我已经运行更新以将“正确”答案的得分值设置为 10，现在我需要使用 record_type: email 更新行的总数，以便我们可以联系获胜者。

目标是将第 1,5 和 9 行的总列设置为 10,0 和 10

我在想这样的事情

```
UPDATE results SET total = SUM(score) 
FROM results GROUP BY user_id WHERE user_id = user_id 
```

但这看起来不对，我担心我可能会走错路。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T23:23:54.520

```
UPDATE 
        results AS r 
    JOIN
        ( SELECT   user_id, 
                   SUM(score) AS sum_score
          FROM     results 
          WHERE    record_type = 'answer'
          GROUP BY user_id
        ) AS grp
       ON  
           grp.user_id = r.user_id 
SET 
       r.total = grp.sum_score
WHERE 
       r.record_type = 'email'; 
```

关于效率，索引`(record_type, user_id, score)`将有助于有效地计算派生表和自连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T22:46:22.453

你快到了。

```
UPDATE results r SET total = 
    (select SUM(score) FROM results r2 
     WHERE r2.user_id = r.user_id 
     and r2.record_type = 'answer')
where r.record_type = 'email'; 
```

这应该工作

# matlab - 满足特定标准的像素位置

> ID：15013644
> 
> 赞同：-1
> 
> 时间：2013-02-21T22:42:12.793
> 
> 标签：matlab, location, pixel

在`matlab`以下方式`return me the values of x for which y=1`

```
c = x(y == 1) 
```

但是，我怎样才能返回`location`那些像素。

我试过：

```
 [i,j] = x(y == 1) 
```

但是，得到以下错误：

```
??? Indexing cannot yield multiple results. 
```

我该如何解决这个错误？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:57:48.590

只需使用`find`

```
ind=find(y==val) 
```

例如：

```
y=[1 0 2 0 3];
find(y==3)

ans =
     5 
```

或者对于矩阵：

```
 y=[1 2 3 ; 4 5 6 ; 7 8 9];
 [row col] = find(y==5)

row =
     2
col =
     2 
```

# android - OpenYouTubePlayerActivity.class 错误不显示视频

> ID：15013645
> 
> 赞同：0
> 
> 时间：2013-02-21T22:42:13.993
> 
> 标签：android, video, youtube

嗨，我正在尝试使用我从其他应用程序中使用的代码，也许它不起作用，因为它适用于 ICS。

我使用 OpenYouTubePlayerActivity-1.2 lib 在我自己的应用程序上显示视频，而不是打开 Youtube 应用程序。为此，我只使用这个：

```
 String url = "http://www.youtube.com/watch?v=xb1BL_HNvZY";
Uri uri = Uri.parse(url);
String videoId = uri.getQueryParameter("v");

Intent videoIntent = new Intent(null, Uri.parse("ytv://" + videoId),getActivity(),OpenYouTubePlayerActivity.class); 
```

我尝试使用“ytv:nasdasd”的示例而不使用 // 但不要修复它。

错误得到：

```
02-21 23:08:39.293: E/AndroidRuntime(13304): FATAL EXCEPTION: main
02-21 23:08:39.293: E/AndroidRuntime(13304): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
02-21 23:08:39.293: E/AndroidRuntime(13304):    at android.app.LoadedApk.makeApplication(LoadedApk.java:504)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4364)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at android.app.ActivityThread.access$1300(ActivityThread.java:141)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1294)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at android.os.Looper.loop(Looper.java:137)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at java.lang.reflect.Method.invokeNative(Native Method)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at java.lang.reflect.Method.invoke(Method.java:511)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at dalvik.system.NativeStart.main(Native Method)
02-21 23:08:39.293: E/AndroidRuntime(13304): Caused by: java.lang.NullPointerException
02-21 23:08:39.293: E/AndroidRuntime(13304):    at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:379)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at android.app.LoadedApk.getClassLoader(LoadedApk.java:322)
02-21 23:08:39.293: E/AndroidRuntime(13304):    at android.app.LoadedApk.makeApplication(LoadedApk.java:496)
02-21 23:08:39.293: E/AndroidRuntime(13304):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:48:43.547

最后我使用了新的 Youtube api

# objective-c - UITapGestureRecognizer 没有触发

> ID：15013647
> 
> 赞同：0
> 
> 时间：2013-02-21T22:42:17.980
> 
> 标签：objective-c, cocoa-touch, uigesturerecognizer

为什么`swipeRightL`触发事件而`tapR`不是？

```
UISwipeGestureRecognizer *swipeRightL=[[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipeLeft)];
swipeRightL.numberOfTouchesRequired=1;
swipeRightL.direction=UISwipeGestureRecognizerDirectionLeft;
[self.view addGestureRecognizer:swipeRightR];
[self.view addGestureRecognizer:swipeRightL];
UITapGestureRecognizer *tapR=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(onTap)];
tapR.numberOfTapsRequired=1;
tapR.numberOfTouchesRequired=1;
[self.view addGestureRecognizer:tapR]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:36:49.450

您的手势可能相互冲突。如果您删除滑动手势，它会起作用吗？

您可能想查看此委托回调并返回 YES：

```
– gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:15:14.870

“简单手势识别器”的 Apple 示例代码提供了点击、滑动和旋转手势识别器的示例，所有三种类型的手势识别器都在一个视图中工作。看看这个。示例代码使用故事板来完全配置视图及其控制器，因此代码有点稀疏。但是您应该能够将您的编码配置与 Xcode 的“属性检查器”和“连接检查器”进行比较，以确定您的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T23:36:18.193

删除设置，如：

tapR.numberOfTaps/Touches 默认已经是 1。

尝试实现委托方法并检查它们是否被解雇？

```
tapR.delegate = self; 
```

`- (BOOL)gestureRecognizerShouldBegin:sender { return YES; }`

您还可以提供有关视图结构的一些详细信息吗？例如，其他一些手势（在滚动视图或其他东西中）可能是您滑动不触发的原因。

# maven - 使用带有参数的 Maven 'exec:exec'

> ID：15013651
> 
> 赞同：23
> 
> 时间：2013-02-21T22:42:21.467
> 
> 标签：maven, exec-maven-plugin

我有一个项目配置为使用 Maven 构建和运行。该项目依赖于平台特定的本机库，我正在使用[此处](http://www.buildanddeploy.com/node/17)找到的策略来管理这些依赖项。

本质上，特定平台的`.dll`or文件被打包到一个 jar 中，并通过识别目标平台的分类器推送到 Maven 服务器。`.so`然后 maven-dependency-plugin 解包平台特定的 jar，并将本机库复制到目标文件夹。

通常我会`mvn exec:java`用来运行 Java 程序，但`exec:java`在与 Maven 相同的 JVM 中运行应用程序，这会阻止我修改类路径。由于必须将本机依赖项添加到类路径中，因此我被迫`mvn exec:exec`改用。这是 pom 的相关片段：

```
...
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.2.1</version>
    <configuration>
        <executable>java</executable>
        <arguments>
            <argument>-Djava.library.path=target/lib</argument>
            <argument>-classpath</argument>
            <classpath />
            <argument>com.example.app.MainClass</argument>
        </arguments>
    </configuration>
</plugin>
... 
```

这适用于应用程序的默认配置，但我希望能够在命令行中指定一些可选参数。理想情况下，我想做这样的事情：

```
mvn exec:exec -Dexec.args="-a <an argument> -b <another argument>" 
```

不幸的是，指定`exec.args`变量会覆盖我在 pom 中的参数（设置类路径和运行应用程序所需的参数）。有没有解决的办法？在命令行指定一些可选参数而不覆盖我在 pom 中的内容的最佳方法是什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-04T18:40:32.107

我设法使用 Maven 环境变量为我的问题找到了一个相当优雅的解决方案。

默认值在 pom 中定义为属性，并作为参数添加到 exec 插件中：

```
...
<properties>
    <argumentA>defaultA</argumentA>
    <argumentB>defaultB</argumentB>
</properties>
...
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.2.1</version>
    <configuration>
        <executable>java</executable>
        <arguments>
            <argument>-Djava.library.path=${project.build.directory}/lib</argument>
            <argument>-classpath</argument>
            <classpath />
            <argument>com.example.app.MainClass</argument>
            <argument>-a</argument>
            <argument>${argumentA}</argument>
            <argument>-b</argument>
            <argument>${argumentB}</argument>
        </arguments>
    </configuration>
</plugin>
... 
```

现在我可以像以前一样使用默认参数运行：

```
mvn exec:exec 
```

我可以使用以下命令轻松覆盖命令行中每个参数的默认值：

```
mvn exec:exec -DargumentA=alternateA -DargumentB=alternateB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-24T08:44:26.517

我花了一些时间理解标签“<classpath />”的含义。分享细节以造福社区。它将 pom.xml 中定义的依赖库添加到 JVM。有关更多详细信息，请查看[https://www.mojohaus.org/exec-maven-plugin/examples/example-exec-for-java-programs.html](https://www.mojohaus.org/exec-maven-plugin/examples/example-exec-for-java-programs.html)

.... 如果指定为 exec.args 参数的一部分，特殊字符串 %classpath 将被 Maven 计算的项目类路径替换。%modulepath 的计数相同

# c# - 无法使用多个泛型类型获取接口/类的类型？

> ID：15013652
> 
> 赞同：7
> 
> 时间：2013-02-21T22:42:24.930
> 
> 标签：c#, generics, compiler-errors, typeof

给出下面的示例代码，任何人都可以解释为什么第一次`typeof()`调用成功但第二次失败？不管它们是类还是接口，它都会失败。

```
interface ITestOne<T1>
{
   T1 MyMethod();
}

interface ITestMany<T1, T2>
{
   T1 MyMethod(T2 myParameter);
}

void Main()
{
    var typeOne = typeof(ITestOne<>); //This line works
    var typeTwo = typeof(ITestMany<>); //Compile error
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T22:43:45.037

您需要让编译器知道您正在寻找具有两个泛型参数的泛型类型。在尖括号之间添加逗号：

```
var typeTwo = typeof(ITestMany<,>); 
```

# symfony - 学说删除具有关联的实体

> ID：15013653
> 
> 赞同：0
> 
> 时间：2013-02-21T22:42:26.827
> 
> 标签：symfony, doctrine

您好，我正在使用 Symfony2 和 Doctrine，但我无法做出任何事情。

我有一个产品实体和另一个实体提供者：

```
Product * ----------- 1 provider 
```

如果我删除一个供应商并且可以将所有骨骼产品供应商保留为空外键。

```
result 
products provider:
    product1 (id,name,desc,id_provider=null)
    product2 (id,name,desc,id_provider=null)
    product3 (id,name,desc,id_provider=null) 
```

我看过级联删除，但它的作用是删除产品，而不是我想要的。

问候和感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:17:45.617

您应该`onDelete: SET NULL`在 JoinColumn 中使用而不是`onDelete: CASCADE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:10:38.850

在控制器中的删除操作中，为提供者获取所有加入的产品并将它们的键设置为 null。

# c++ - 嵌套循环中迭代器的行为与 C++ 中的随机访问

> ID：15013654
> 
> 赞同：0
> 
> 时间：2013-02-21T22:42:29.900
> 
> 标签：c++, stl, iterator

为什么以下代码片段会给出不同的输出？（见下面的输出）

片段1：

```
vector<int> v;
v.push_back(1);
v.push_back(2);
vector<int>::const_iterator iterv1=v.begin();
vector<int>::const_iterator iterv2=v.begin();
for(;iterv1!=v.end();++iterv1){
    for(;iterv2!=v.end();++iterv2){
        cout << "*iterv1 = " << *iterv1 << " *iterv2 = " << *iterv2 << endl;
    }
} 
```

输出：

```
*iterv1 = 1 *iterv2 = 1
*iterv1 = 1 *iterv2 = 2 
```

代码片段2：

```
vector<int> v;
v.push_back(1);
v.push_back(2);
for(int i=0;i<2;++i){
    for(int j=0;j<2;++j){
        cout << "v[i] = " << v[i] << " v[j] = " << v[j] << endl;
    }
} 
```

输出：

```
v[i] = 1 v[j] = 1
v[i] = 1 v[j] = 2
v[i] = 2 v[j] = 1
v[i] = 2 v[j] = 2 
```

我本来期望相同的（数字输出。显然，我对迭代器有些不了解。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:45:47.193

好吧，您不会`iterv2`在内部循环中重置到开头。您应该将初始化代码放在它所属的位置：在 for-initialization 中。

要么只是在初始化中移动赋值：

```
vector<int>::const_iterator iterv1;
vector<int>::const_iterator iterv2;
for(iterv1=v.begin();iterv1!=v.end();++iterv1){
    for(iterv2=v.begin();iterv2!=v.end();++iterv2){
        cout << "*iterv1 = " << *iterv1 << " *iterv2 = " << *iterv2 << endl;
    }
} 
```

或者如果之后不需要它们，甚至将变量放入循环中：

```
for(vector<int>::const_iterator iterv1=v.begin();iterv1!=v.end();++iterv1){
    for(vector<int>::const_iterator iterv2=v.begin();iterv2!=v.end();++iterv2){
        cout << "*iterv1 = " << *iterv1 << " *iterv2 = " << *iterv2 << endl;
    }
} 
```

顺便说一句，如果你使用 C++11，你可以利用以下两个新的语言特性：`auto`关键字可以用来省略类型规范（不要与动态类型混淆，因为这仍然是静态的键入，这意味着编译器会计算出类型并以与显式编写类型相同的方式编译它）：

```
for(auto iterv1=v.begin();iterv1!=v.end();++iterv1){
    for(auto iterv2=v.begin();iterv2!=v.end();++iterv2){
        cout << "*iterv1 = " << *iterv1 << " *iterv2 = " << *iterv2 << endl;
    }
} 
```

基于范围的 for 循环（类似于 Java）的新语法将使其更容易编写和（更重要的是）阅读：

```
for(auto iterv1 : v){
    for(auto iterv2 : v){
        cout << "*iterv1 = " << *iterv1 << " *iterv2 = " << *iterv2 << endl;
    }
} 
```

PS 如果您将初始化移动到基于索引的版本中的循环之外，也会发生相同的错误：

```
// WRONG - SAME ERROR
int i = 0;
int j = 0;
for(;i<2;++i){
    for(;j<2;++j){
        cout << "v[i] = " << v[i] << " v[j] = " << v[j] << endl;
    }
} 
```

PP.S. 在运算符周围添加空格以使您的代码更具可读性。大多数代码风格指南都要求这样做。

# windows - Windows Batch - 输出命令输出的小片段

> ID：15013664
> 
> 赞同：0
> 
> 时间：2013-02-21T22:43:46.930
> 
> 标签：windows, batch-file

我正在尝试编写一个批处理文件以使 net user /domain 的输出更有用，因为需要在我工作的地方使用它的人不熟悉 CLI 界面。

目前它相当基本：

```
@echo off 

set /p id="Enter the ID of user: " %=%

net user %id% /domain

pause 
```

我想知道是否有办法只显示输出的特定部分？

我只希望它输出帐户活动，过期和密码最后设置，过期。

我没有花太多时间编写脚本，所以我的知识很少，仅限于 python，但有人告诉我，为了工作，我不能安装 python 来创建脚本，所以试图习惯寡妇批处理。

任何帮助都会很好，或者如果有人知道关于 Windows 批处理主题的良好知识库，因为我发现的大多数网站只是手册页的摘录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:23:18.150

一种选择是将结果转储到临时文件中，然后使用`find`命令来回显您想要的内容：

```
@echo off 

set /p id="Enter the ID of user: " %=%

net user %id% /domain > usertmp.txt
type usertmp.txt | find "Account active"
type usertmp.txt | find "Account expires"
type usertmp.txt | find "Password last set"
type usertmp.txt | find "Password expires"

del usertmp.txt

pause 
```

# rebol - 为什么 ALSO 的使用会导致 R2 和 R3 的结果不同？

> ID：15013669
> 
> 赞同：6
> 
> 时间：2013-02-21T22:44:09.130
> 
> 标签：rebol

此代码`-1`为 R3 和`+1`R2 返回。我想知道我做错了什么。

```
 f: func [] [
     also  return  1
           return -1
 ]
 f 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:54:31.517

这已经被列为 R3 中的一个错误。纠正正在进行中，AFAIK。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T22:55:01.267

你没有做错任何事；不幸的是，您被[R3 中的一个已知错误](http://issue.cc/r3/1509)绊倒了。基本上，`also`错误地“吃掉”了`return`. 幸运的是，我们已经解决了这个问题。（如果您想帮助测试，请查看我的[fix-unwind-passing](https://github.com/earl/r3/tree/fix-unwind-passing)分支。）我希望我们能尽快完成此修复并集成。

# android - 如何在不使用应用内登录按钮的情况下通过 facebook android sdk 分享照片

> ID：15013670
> 
> 赞同：3
> 
> 时间：2013-02-21T22:44:09.413
> 
> 标签：android, facebook, facebook-android-sdk

如何使用 android sdk 将照片分享到 facebook，而不在我的应用程序中放置 facebook 登录按钮。（我希望他们去 facebook 应用程序进行授权并在他们点击分享按钮时回来，而不是先登录然后分两步点击分享）。具体来说，我会在 /me/photos 上发布一个 facebook 开放图表帖子，以便将其上传到我的默认应用相册。但是，即使用户单击 facebook 身份验证提示，我也会收到未登录的会话错误。

```
final Session session = Session.getActiveSession();

Session.openActiveSession(this, true, new Session.StatusCallback() {

    @Override
    public void call(final Session session, final SessionState state,
            final Exception exception) {
        Request request = Request.newUploadPhotoRequest(session, image, new Request.Callback() {
            @Override
            public void onCompleted(Response response) {
                  Toast.makeText(getApplicationContext(), "Fact shared", Toast.LENGTH_SHORT).show();
              }
        });
        request.executeAsync();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:03:22.593

您的代码有几个问题：

1.  为了发布照片，您需要发布权限，这需要`requestNewPublishPermissions`在您首次打开会话后再次调用。

2.  您在`call()`方法中立即发出请求，而不检查 if `session.isOpened()`。这是有问题的，因为：

    一个。会话经过多种状态（包括OPENING、OPENED等），都会导致`call()`被调用，只有在OPENED或OPENED_TOKEN_UPDATED状态时才能发出请求；

    湾。在会话打开期间可能会出现异常（例如用户取消），这可能导致会话关闭。您需要通过 `session.isOpened()`支票来保护您的请求。

# c - 使用带有 README.md 的自动工具

> ID：15013672
> 
> 赞同：27
> 
> 时间：2013-02-21T22:44:20.947
> 
> 标签：c, github, autotools

我正在将自动工具用于托管在 GitHub 上的库。`README`我不想使用普通的文本文件，而是使用`README.md`.

运行时`automake`，我收到以下错误

```
Makefile.am: required file `./README' not found 
```

是否可以告诉 autotools 不要检查`README`？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-21T23:23:30.820

只需将`foreign`选项传递给 automake。这告诉它您的软件不符合典型的 gnu 标准，因此省略 README 不是错误。通常，这是在`configure.ac`：

```
AM_INIT_AUTOMAKE([foreign]) 
```

但也可以通过`AUTOMAKE_OPTIONS`在 Makefile.am 中分配来完成：

```
AUTOMAKE_OPTIONS = foreign 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-22T18:47:26.840

我们正在使用

```
README: README.md
        fgrep -v "[Build Status]" $< \
                | markdown \
                | html2text -style pretty -nobs \
                | sed -e 's:&gt;:>:g' \
                > $@.tmp 
```

从 markdown README.md 生成文本 README

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-01T08:59:24.720

简单的解决方案，基于 pn [fceller](https://stackoverflow.com/users/2098565/fceller)的回答：唯一需要的是`README`in的构建规则`makefile.am`。此规则甚至可以为空。所以只需将以下行添加到您的`makefile.am`：

```
README: README.md 
```

就是这样，现在 automake 不再抱怨了，你不需要将你的项目声明为`foreign`.

这不是必需的，但我更喜欢更完整的规则，我添加到`makefile.am`：

```
README: README.md
    pandoc -f markdown -t plain --wrap=none $< -o $@

CLEANFILES = README 
```

但即使有这条规则，`README`除非你明确调用`make README`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-21T23:02:44.427

当你已经有一个 README 文件时，为什么要让它不要寻找你的 README 文件？它恰好是降价格式并保存为 README.md。如果您希望您的 README 文件与您的 README.md 文件相同，为什么不链接到它呢？

从命令行：

```
ln -s README.md README 
```

这样，您就可以保留 README.md 文件，并且您使用的任何工具仍然可以使用标准命名约定。顺便说一句，autotools 很可能允许您为自述文件指定自定义路径。

# javascript - JavaScript 或 jQuery - 根据 div 高度/宽度调整表格大小

> ID：15013677
> 
> 赞同：0
> 
> 时间：2013-02-21T22:44:29.807
> 
> 标签：javascript, jquery, html-table

我有一个用作日历的 HTML 表格。通常，此日历以 690 像素宽查看，这使得每列 98 像素宽 (690 / 7 = 98)。我希望每个日期都是方形的，所以它们的高度也是 98 像素。

我有一个用于所有日期的 CSS 类。这将高度属性设置为 98 像素。我在底部还有一个按钮，可以让用户全屏查看日历。这意味着表格宽度将设置为 100%（因为所有不同的屏幕分辨率）。但是，再一次，我需要所有的日期都是正方形的。所以我需要一些 JavaScript 或（最好是）jQuery 来计算 14% 的屏幕分辨率是多少（因为有 7 天并且它跨越了 100% 的屏幕。所以现在每列将是 14%）。

我认为 jQuery 会更好，因为将 CSS 高度属性更改为计算值，但 JavaScript 也可以。

我对 jQuery 一无所知，也不知道如何用 JavaScript 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:53:59.380

您可能需要 window.innerWidth 和 $(window).on('resize', fn) 事件来检查窗口大小何时发生变化。

但更好的方法是添加将宽度设置为容器 14% 的类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:52:20.127

使用 jQuery 非常简单。如果你想知道你可以使用的窗口

```
var screenWidth = jQuery(window).width() 
```

结束，因为您的所有日期都有一个特定的类（例如 .dateElement），您可以使用 jQuery 来调整所有日期的大小

```
jQuery('.dateElement').width(screenWidth * 14 / 100).height(screenWidth * 14 / 100); 
```

当函数 resize 并且 jQuery 有一个非常好的事件时，您必须调用此代码：

```
jQuery(window).resize(function(){// Your code }); 
```

希望这有助于法比奥

# php - 根据数组中特定键的值对多维数组进行排序

> ID：15013678
> 
> 赞同：0
> 
> 时间：2013-02-21T22:44:29.913
> 
> 标签：php

我有一个类似这样的数组：

```
 $array[] = array(
        "name" => "sample",
        "image" => "sample.jpg",
        "header" => "sampleDelights",
        "intro_copy" => ""
    );
    $array[] = array(
        "name" => "lwmag",
        "image" => "lwmag.jpg",
        "header" => "LW Mag",
        "intro_copy" => ""
    ); 
```

我想使用 PHP 根据键“标题”的字母顺序对这个数组进行排序。我尝试了 usort 并搜索了内置函数，但找不到一个（或看过去）。这可能与单个 php 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:55:41.450

看看“ksort”

它对于按其键排列数组非常有用。

```
<?php
$sample = array("d" => "maximum", "a" => "minimum", "c" => "mid")
ksort($sample);
foreach ($sample as $key => $val) {
echo "$key = $val \n";
}
?> 
```

那会显示

```
a = minimum
c = mid
d = maximum 
```

希望这就是你所追求的。

来源：[PHP 手册](http://php.net/manual/en/function.ksort.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:58:23.800

[从php.net](http://www.php.net/manual/de/function.sort.php#99419)看这个函数

```
function array_sort($array, $on, $order=SORT_ASC)
{
    $new_array = array();
    $sortable_array = array();

    if (count($array) > 0) {
        foreach ($array as $k => $v) {
            if (is_array($v)) {
                foreach ($v as $k2 => $v2) {
                    if ($k2 == $on) {
                        $sortable_array[$k] = $v2;
                    }
                }
            } else {
                $sortable_array[$k] = $v;
            }
        }

        switch ($order) {
            case SORT_ASC:
                asort($sortable_array);
            break;
            case SORT_DESC:
                arsort($sortable_array);
            break;
        }

        foreach ($sortable_array as $k => $v) {
            $new_array[$k] = $array[$k];
        }
    }

    return $new_array;
} 
```

# php - 使用 PHP 将带有换行符的字符串拆分为 HTML 段落

> ID：15013680
> 
> 赞同：6
> 
> 时间：2013-02-21T22:44:56.167
> 
> 标签：php, html, string, line-breaks

我从我的 MySQL 数据库中获取文本，这些文本被分成几行（段落）。它存储在变量中`$post_data['content']`。如何使用换行符打印出来？

我目前正在使用的代码：

```
$post_data['content'] = explode("\n", $post_data['content']);
$post = "<p>" . implode("</p><p>", array_values($post_data['content'])) . "</p>"; 
```

这在我想要的程度上不起作用。

如果我在数据库中有这样的文本：

```
line 1 paragraph 1,
line 2 paragraph 1.

line 3 paragraph 2,
line 4 paragraph 2,
line 5 paragraph 2. 
```

代码会像这样显示（我**不**想要）：

```
<p>line 1 paragraph 1,</p>

<p>line 2 paragraph 1.</p>

<p>line 3 paragraph 2,</p>

<p>line 4 paragraph 2,</p>

<p>line 5 paragraph 2.</p> 
```

如果行之间没有空格（只有一个换行符），我希望它将段落组合在一起。也许爆炸后与阵列有关？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-21T23:06:07.200

首先，将换行符替换为`<br />`：

```
$post = nl2br($post_data['content']); 
```

然后用结束和开始段落标记替换 double `<br />`（原来的换行符由 维护`nl2br`，所以我使用了一个正则表达式，它匹配所有样式的换行符）：

```
$post = '<p>' . preg_replace('#(<br />[\r\n]+){2}#', '</p><p>', $post) . '</p>'; 
```

请注意，这是 XHTML 语法，如果您想要 HTML，请更改代码如下：

```
$post = nl2br($post_data['content'], false);
$post = '<p>' . preg_replace('#(<br>[\r\n]+){2}#', '</p><p>', $post) . '</p>'; 
```

**测试：**

```
$post_data['content'] = <<<TXT
line 1 paragraph 1,
line 2 paragraph 1.

line 3 paragraph 2,
line 4 paragraph 2,
line 5 paragraph 2.
TXT;

$post = nl2br($post_data['content'], false);
$post = '<p>' . preg_replace('#(<br>[\r\n]+){2}#', "</p>\n\n<p>", $post) . '</p>';

echo $post; 
```

**测试输出：**

```
<p>line 1 paragraph 1,<br>
line 2 paragraph 1.</p>

<p>line 3 paragraph 2,<br>
line 4 paragraph 2,<br>
line 5 paragraph 2.</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:49:31.097

在不爆炸字符串的情况下。

```
$post = "<p>" . nl2br($post_data['content']) . "</p>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:55:05.973

你可以试试

```
$string = 'line 1 paragraph 1,
line 2 paragraph 1.

line 3 paragraph 2,
line 4 paragraph 2,
line 5 paragraph 2.';

echo implode("\n",array_map(function ($v) {
    return sprintf("<p>%s</p>", $v);
}, array_filter(explode("\n", $string)))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T22:56:50.480

另一种选择，使用段落和换行符：

```
$post = '';
$paragraphs = explode("\n\n", $post_data['content']);
foreach ($paragraphs as $paragraph) {
    $post .= '<p>' . nl2br($paragraph) . '</p>';
} 
```

这应该产生：

第 1
段 第 1 段 第 1 段 第 2 行

第 2 段第 1 行

# java - 在 Java 中编写大型对象的 if-else 语句的最佳方法是什么？

> ID：15013683
> 
> 赞同：0
> 
> 时间：2013-02-21T22:45:10.760
> 
> 标签：java, swing, if-statement, hashmap

我正在使用 Swing 并在我的 GUI 中有一个 JTree。在执行期间，我解析树的节点以确定要执行的操作。这是一个片段：

```
// action to modify node
public void modifyMenuItem(DefaultMutableTreeNode node)
{
// if node is node 1 in the tree
if(node.equals(treeNodes.node1))
    {
        // perform action 1 
}

 // if node is node 2 in the tree
    else if(node.equals(treeNodes.node2))
    {
        // perform action 2
    }

 // if node is node 3 in the tree
    else if(node.equals(treeNodes.node3))
    {
        // perform action 3
    }
    etc.
} 
```

问题是，我的树中有近 50 个节点，我担心这种类型的实现真的会损害性能。我的代码中有类似的 if 语句。处理此类对象的大型 if 语句的首选方法是什么？显然我不能使用 switch 语句，因为这些不是整数值，所以我应该创建一个 Hashmap 然后使用基于 Hash 键的开关吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T22:50:19.560

我会使用多态性：

```
public void modifyMenuItem(DefaultMutableTreeNode node) {
    ((MyUserObject) node.getUserObject()).doAction();
} 
```

为此，节点的所有用户对象都必须是同一`MyUserObject`接口的实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T22:51:30.023

不知道更多你想要做什么，我建议你使用多态性。您创建的子类`DefaultMutableTreeNode`也实现了您的接口，让我们`ActionPerfomer`用方法来调用它`performAction()`。您将这些类的实例用作树中的节点，然后可以简单地编写：

```
// I suppose you can't change the signature?
public void modifyMenuItem(DefaultMutableTreeNode node) {
    if (node instanceof ActionPerfomer) {
        ActionPerfomer ap = (ActionPerfomer) node;
        ap.performAction();
    } else {
        logger.log("How did that get here?");
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T22:51:51.650

您可以使用包含 50 个项目的映射，以不同的树节点（或树节点名称）为键，并返回可以在节点上执行的“操作”吗？

```
Map<String, Action> map = new HashMap<String, Action>();
// populate the map with items and Actions

Action action = map.get(node.getName());
action.perform(node); 
```

树节点需要正确实现equals和hashcode......或者您可以只使用节点名称（假设它是唯一的）。

祝你好运！

# c - 链接器错误内联函数

> ID：15013687
> 
> 赞同：8
> 
> 时间：2013-02-21T22:45:17.770
> 
> 标签：c, gcc, linker, inline

我遇到了一些编译器/链接器错误，我不知道正确的方法是什么。我处于这种情况：

*   ah: 在这个文件中定义了一个声明为“inline”的函数，例如：inline void foo1();
*   bh：在这个文件中定义了一个声明为“内联”的函数，它调用 foo1(): inline void foo2();
*   main.c: foo1 和 foo2() 都有一些函数调用。

现在，如果我将 ah 和 bh 中的 foo1 和 foo2 声明为 extern inline void，我会收到以下错误：

> prj/src/bo: 在函数`foo1': (.text+0x0): multiple definition of`foo1' prj/src/main.o:(.text+0x0): 首先在这里定义 make: *** [kernel] Error 1

在我描述的情况下，允许编译和链接而没有错误/警告的方式是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-21T23:11:51.613

来自[http://gcc.gnu.org/onlinedocs/gcc/Inline.html](http://gcc.gnu.org/onlinedocs/gcc/Inline.html)：

> 当内联函数不是静态的时，编译器必须假设可能有来自其他源文件的调用；由于一个全局符号在任何程序中只能定义一次，因此不能在其他源文件中定义该函数，因此不能集成其中的调用。因此，非静态内联函数总是以通常的方式自行编译。

换句话说，如果没有`static`，它会为您的内联函数发出一个符号。如果您碰巧在头文件中*定义*了该函数并将其包含在多个编译单元中，那么您最终会得到多个（重新定义的）符号。如果要在标题中包含定义，则应将其设为`static`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:54:15.890

将`inline`定义放在您的`.h`文件中，并在`.c`文件中强制执行外部定义。

例如：

```
// File: a.h
inline void foo1(void) { /*...*/ }

// File main.c
#include "a.h"

extern inline void foo1(void);

int main(void)
{
    /*...*/   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:56:58.187

我试过了，没有收到任何错误

啊

```
extern inline void foo1()
{
    return;
} 
```

bh

```
extern inline void foo2()
{
    foo1();
    return;
} 
```

主文件

```
#include "a.h"
#include "b.h"

int main() {
    foo1();
    foo2();
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-06T04:19:51.090

您可以考虑使用标头保护来防止重新定义。文件的实现如下。我尝试使用 CMake 编译以下文件，它没有任何问题。

`a.h`

```
#ifndef A_H
#define A_H

inline
void foo1()
{
    return;
}

#endif 
```

`b.h`

```
#ifndef B_H
#define B_H

#include "a.h"

inline
void foo2()
{
    foo1();
    return;
}

#endif 
```

`main.cpp`

```
#include "a.h"
#include "b.h"

int main() {
    foo1();
    foo2();
    return 0;
} 
```

# facebook - 尽管我没有问，但需要电子邮件许可和提示用户登录吗？

> ID：15013692
> 
> 赞同：0
> 
> 时间：2013-02-21T22:45:44.773
> 
> 标签：facebook, facebook-javascript-sdk, facebook-c#-sdk

我正在使用 js sdk 并获取名称、位置、id 等基本信息。太好了，但我只需要一件事，那就是电子邮件。所以我[在这里](http://developers.facebook.com/docs/reference/login/email-permissions/)读到电子邮件需要扩展权限。我还在[这里](http://developers.facebook.com/docs/reference/javascript/FB.login/)使用 fb.login 阅读了如何请求扩展权限。

在本教程的代码中，[我](http://csharpsdk.org/docs/web/getting-started.html)没有调用 fb.login ，但访问者会被提示登录并授予应用程序权限（如果不是）。这是怎么做的？注册按钮（根据教程稍作修改）是一个带有样式的类的 div。

```
<div class="fb-login-button" data-show-faces="false" data-width="400" data-max-rows="1">Register</div> 
```

好吧，我检查了“注册”按钮，发现它呈现出相当大的变化，但我从未发现 onclick 或关于如何处理用户单击按钮事件的一些线索。我的**猜测**是来自样式的 iframe 有一个 src 并且事件必须在 fb 端。

所以回到我的脚本，我想也许 fb.login 和 fb.init 在一起，我可以在那里添加我的 perm 请求，但是没有 fb.login？我想也许可以把它放在下面的 else 分支中，但现在什么都没有，它可以工作......减去电子邮件的扩展权限？

```
window.fbAsyncInit = function ()
            {
                FB.init({...removed for concise....});

                //If user authorizes using fb account info:
                FB.Event.subscribe('auth.authResponseChange', function (response)
                {
                    if (response.status === 'connected') 
                    {
                        ...removed for concise code...
                    } 
                    else if (response.status === 'not_authorized') 
                    {
                        // the user is logged in to Facebook, 
                        // but has not authenticated your app
                    } 
                    else 
                    {
                        // the user isn't logged in to Facebook.
                        //**HERE IS WHERE I WOULD HAVE THOUGHT TO PUT FB.Login**
                    }
                });

            }; 
```

所以让我困惑的是这些碎片如何在拼图中组合在一起。我知道我需要请求扩展权限才能让 json 包含电子邮件，但不确定在哪里进行烫发。请求在？？？

这里的代码是页面中的实际代码，因此您可以看到我的整个 sdk 实现。

```
<div id="fb-root"></div>
        <script>
            window.fbAsyncInit = function ()
            {
                FB.init({
                    appId: 12324, // App ID
                    status: true, // check login status
                    cookie: true, // enable cookies
                    xfbml: true  // parse XFBML
                });

                //If user authorizes using fb account info:
                FB.Event.subscribe('auth.authResponseChange', function (response)
                {
                    if (response.status === 'connected') {
                        // the user is logged in and has authenticated your
                        // app, and response.authResponse supplies
                        // the user's ID, a valid access token, a signed
                        // request, and the time the access token 
                        // and signed request each expire
                        var uid = response.authResponse.userID;
                        var accessToken = response.authResponse.accessToken;

                        // send access token to server so we can fill in fields
                        var form = document.createElement("form");
                        form.setAttribute("method", 'post');
                        form.setAttribute("action", '/mypage');

                        var field = document.createElement("input");
                        field.setAttribute("type", "hidden");
                        field.setAttribute("name", 'accessToken');
                        field.setAttribute("value", accessToken);
                        form.appendChild(field);

                        document.body.appendChild(form);
                        form.submit();

                    } else if (response.status === 'not_authorized') {
                        // the user is logged in to Facebook, 
                        // but has not authenticated your app
                    } else {
                        // the user isn't logged in to Facebook.
                    }
                });

            };

            // Load the SDK Asynchronously
            (function (d) {
                var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
                if (d.getElementById(id)) { return; }
                js = d.createElement('script'); js.id = id; js.async = true;
                js.src = "//connect.facebook.net/en_US/all.js";
                ref.parentNode.insertBefore(js, ref);
            }(document));
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:19:26.297

由于您不是使用 SDK 本身登录，而是使用登录按钮，因此您必须通过`scope`参数请求权限，设置为`data-scope="…"`按钮本身，请参阅[https://developers.facebook.com/docs/reference/plugins/登录/](https://developers.facebook.com/docs/reference/plugins/login/)

另一种选择是删除按钮，并`FB.login`在您自己制作的按钮/链接上调用 onclick。

# ruby-on-rails - 我应该在我的 Nginx 配置中包含这些指令吗？

> ID：15013702
> 
> 赞同：0
> 
> 时间：2013-02-21T22:46:35.057
> 
> 标签：ruby-on-rails, nginx

我直接使用 Rails 和 Nginx（没有 apache），想知道我的虚拟主机中是否需要以下内容：

```
 # serve static content directly
        location ~* \.(ico|jpg|gif|png|css|js|swf|html)$ {
          if (-f $request_filename) {
            expires max;
            break;
          }
        } 
```

如果我不使用 Apache，它是否相关？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:22:23.647

由于您使用的是 Rails，因此您需要的唯一配置可能只是：

```
server {
    listen 80;
    server_name example.com;

    location / {
        root path/to/static/files;
        try_files $uri @rails;
        expires max;
    }

    location @rails {
        # proxy_pass to gunicorn or whatever...
    }
} 
```

但最好将所有媒体文件保存在单独的目录中：

```
server {
    listen 80;
    server_name example.org;

    location / {
        # proxy_pass to gunicorn or whatever...
    }

    location /media/ {
        root path/to/static/files;
        try_files $uri @rails;
        expires max;
    }
} 
```

留下丑陋而复杂的规则，例如：

```
location ~* \.(ico|jpg|gif|png|css|js|swf|html)$` 
```

给 PHP 人。他们的项目中通常有一堆乱七八糟的代码和媒体，喜欢在 Web 服务器配置中编程，而不是在应用程序中执行所有应用程序逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:04:33.657

该指令告诉*nginx*将`expires`标头设置为最大可能值，并在请求的文件以这些扩展名之一结尾并且存在时停止处理进一步的指令。这些文件将由 nginx 提供。无论您是否使用 apache，这都是有效的指令。您不必**使用**它，但最好这样做，因为 nginx 非常擅长提供静态文件。

### 更新

正如其他人指出的那样，您应该避免使用`if`. 您可以通过以下方式做到这一点：

```
location ~* \.(ico|jpg|gif|png|css|js|swf|html)$ {
    try_files $uri =404;
    expires max;
} 
```

如果要进行特殊处理，请使用*命名位置*：

```
location ~* \.(ico|jpg|gif|png|css|js|swf|html)$ {
    try_files $uri @process_404;
    expires max;
}

location @process_404{
    # do your stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:31:28.357

这`if`是没有意义的，只是浪费你的cpu。

从文档：

> 如果响应代码等于 200、201、204、206、301、302、303、304 或 307，则启用或禁用添加或修改“Expires”和“Cache-Control”响应标头字段。

@http [://nginx.org/r/expires](http://nginx.org/r/expires)

你在这里看到 404 吗？我不。

> 停止处理当前的 ngx_http_rewrite_module 指令集。

@http [://nginx.org/r/break](http://nginx.org/r/break)

而且我在您的位置没有看到其他重写指令。

# c# - SetWindowPos 外屏

> ID：15013703
> 
> 赞同：0
> 
> 时间：2013-02-21T22:46:37.930
> 
> 标签：c#

我对 c# 只知道一点点，而且我的大部分代码都来自谷歌。我正在尝试移动一个窗口，我通过使用`SetWindowPos`. 但是，我希望窗口部分位于屏幕之外，但 Microsoft Windows 不允许。下面的代码是我到目前为止得到的。当然我在谷歌上搜索了答案，找到了答案，我唯一不知道的是如何将它放入我的程序中。

有人可以解释一下我将如何将其放入我的应用程序中吗？

谷歌回答：[将窗口部分移出屏幕顶部](https://stackoverflow.com/questions/6645085/move-a-window-partially-off-the-top-of-the-screen)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Data;
using System.Runtime.InteropServices;
using System.Diagnostics;

namespace WindowMover
{

    static class Logic
    {

        [DllImport("user32.dll", EntryPoint = "SetWindowPos")]
        public static extern IntPtr SetWindowPos(IntPtr hWnd, int hWndInsertAfter, int x, int Y, int cx, int cy, int wFlags);

        public static void Main()
        {
            const short SWP_NOSIZE = 1;
            const short SWP_NOZORDER = 0X4;
            const int SWP_NOACTIVATE = 0x0010;

            Process[] processes = Process.GetProcesses("DeviceEmulator");
            foreach (var process in processes)
            {
                if (process.ProcessName == "DeviceEmulator")
                {
                    var handle = process.MainWindowHandle;
                    SetWindowPos(handle, 0, 0, 0, -100, -100, SWP_NOZORDER | SWP_NOSIZE | SWP_NOACTIVATE);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:18:46.063

1.  将常量移动到类范围并`public`为它们添加修饰符。

2.  `Main()`从`Logic`班级中删除

3.  将其保存在`.cs`文件中

4.  将文件添加到您的项目中。

5.  假设您的主要表单类是`Form1.cs`，在顶部添加一行

    `using WindowMover;`

6.  `Form1`在表单设计器中双击，它会`Load`为您添加一个事件处理程序并进入代码编辑模式

7.  `SetWindowPos`用调用`this.Handle`，后面的参数取决于你的要求

# c# - SharePoint Web 服务的占位符 URL

> ID：15013704
> 
> 赞同：0
> 
> 时间：2013-02-21T22:46:47.443
> 
> 标签：c#, web-services, sharepoint-2010, class-library

# tl;博士

下面是我的类库中的 app.config，它简化了 SharePoint 中的文件操作。这些`endpoint`地址指向任意站点，但在使用库时会动态设置为正确的站点。

~~如果任意地址更改/停止存在，DLL 是否仍然有效？~~

我可以**打包我的类库以将`endpoint`'s 和`binding`'s**动态添加到引用该库的项目中（基于他们与之交互的站点）吗？

* * *

## 细节

我在 C# 中创建了一个类库，以简化通过 Copy and Lists Web 服务访问 SharePoint 网站的过程。通过传入站点 URL 和其他数据，最终用户可以轻松地在 SharePoint 中上传、下载和操作文件。当他们传递站点 URL 时，我动态设置 Copy 或 Lists 引用以使用该 URL。虽然这很好，但我有两个问题：

1.  我必须在 app.config/web.config 中包含对一台 SharePoint 服务器的引用，以便在开发时获取 Web 服务详细信息。如果该 URL 更改或不再存在，那么我的库会失败吗？

2.  即使引用时包含 DLL，但不包含包含`basicHttpBinding`和`endpoint`地址的 app.config。有没有办法在使用类库的项目的 web.config/app.config 中添加该数据？

* * *

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
  </appSettings>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="CopySoap" maxReceivedMessageSize="419430400">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Ntlm" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="ListsSoap">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Ntlm" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://www.example.com/subsite/_vti_bin/copy.asmx"
          binding="basicHttpBinding" bindingConfiguration="CopySoap"
          contract="CopyService.CopySoap" name="CopySoap" />
      <endpoint address="http://www.example.com/subsite/_vti_bin/Lists.asmx"
          binding="basicHttpBinding" bindingConfiguration="ListsSoap"
          contract="ListsService.ListsSoap" name="ListsSoap" />
    </client>
  </system.serviceModel>
</configuration> 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:06:43.600

我的答案

1.  如果您在 App.Config 中编写它，则无法对其进行硬编码。这是一个配置文件。您可以随时更改它，而无需重新构建项目。我希望您在继续使用功能之前检查站点/服务器是否存在。如果服务器/站点不存在 - 优雅地处理它并显示适当的消息，以便用户可以去更改配置文件以将其指向正确的服务器

2.  您可以在“参考项目”的 web 或 app.config 中简单地添加您的服务所需的配置。由于您的 DLL 在引用项目的上下文中运行，因此它会从其 app/web.config 中提取必要的值

# ruby-on-rails-3 - 开发模式下的rails webmock会破坏应用程序

> ID：15013708
> 
> 赞同：1
> 
> 时间：2013-02-21T22:47:00.923
> 
> 标签：ruby-on-rails-3, api, webmock

我尝试模拟 twitter api，因此我以以下方式使用 webmock。在初始化程序中，我确实使用 page = 'curl - is twitterurl with json dataresponse' 保存了一个 http 响应，然后我执行 stub_request(:get, %r|friends/list|).to_return(page)

不幸的是，它实际上正在工作，我在其中进行 api 调用的控制器卡住了，而我的服务器（瘦）也卡住了。感谢您的帮助，菲尔

# database-design - 类似于 Facebook 的通知系统的数据库架构

> ID：15013713
> 
> 赞同：39
> 
> 时间：2013-02-21T22:47:33.877
> 
> 标签：database-design, notifications

我正在尝试设计一个类似于 facebook 的通知系统，但我已经达到了一点砖墙。我的要求是能够支持无限数量的通知类型，这些通知类型可能需要呈现不同类型的元数据。

我在想我将按如下方式设计架构：

```
**Notification**
Id (int)
TypeId (int)
RecipientId (int)
SenderId (int)
SendDateTime (DateTime)
Read (bool)
MessageData (...Blob?)
Deleted (bool)

**NotificationType**
Id
Name
Description 
```

我真的想尽量避免在我的数据库中存储 HTML 字符串，但是，我也不是特别喜欢存储 blob。

有可能我可以查看 NotificationType 表并引用另一个存储特定于该类型的数据的表，但是，这意味着每次我创建一个新的通知类型时，我都需要创建一个新表。我相信我也会让自己进入一个不得不编写动态 SQL 来获取数据的世界。

有人对我有什么建议吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-02T01:01:35.110

这是我最终解决这个问题的方法。

![通知架构](../Images/5568b7a4a5f7878738731fee7319934b.png)

我决定使用字典来存储每种通知类型独有的数据。然后，我将该字典对象序列化为二进制字符串，并将其与每个通知一起存储在数据库中。我有一个模板分配给每个包含占位符的通知类型，即。'{song-title}' 我可以用我的字典对象中的值快速替换。

# visual-studio-2010 - IIS 试图访问错误的 web.config

> ID：15013715
> 
> 赞同：11
> 
> 时间：2013-02-21T22:47:43.830
> 
> 标签：visual-studio-2010, iis

首先介绍一下背景知识：我将我的 SVN 存储库重新检出到一个新位置，并尝试从那里运行该应用程序。现在 Visual Studio 在使用本地 IIS Web 服务器启动我的 MVC 应用程序时遇到问题。我目前收到此错误：

> 无法访问请求的页面，因为该页面的相关配置数据无效。
> 
> 详细错误信息：模块 IIS Web 核心通知未知处理程序尚未确定错误代码 0x80070003 配置错误无法读取配置文件配置文件 \?\C:\RND\app\web.config 请求的 URL https://localhost:44304/app 物理路径
> 登录方法 尚未确定 登录用户 尚未确定 请求跟踪目录

问题是配置文件不存在于 c:\RND\app\web.config 它现在位于 c:\RND\appTest\web.config。

有没有办法可以在 Visual Studio 中更新它？

就好像它已将旧路径保存在某处而不是自动更新它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-07-12T11:23:39.260

您可以通过简单地删除项目中的 .vs 文件并重新构建项目来纠正此行为。Visual Studio 将重新生成另一个 .vs 文件，并纠正了 web.config 的路径。其中存储了有关 web.config 文件路径的设置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-27T12:11:36.077

移动我的项目文件夹后我遇到了同样的问题。我通过编辑 IISExpress applicationhost.config 文件并更正其中发现的错误路径来修复它。

在我的机器上，applicationhost.config 文件位于 C:\Users\\Documents\IISExpress\config

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-05T11:11:33.023

我通过删除存储在 .sln 文件同一级别的 .vs 文件夹中的名为“applicationhost.config”的文件来修复它。此文件包含有关解决方案的所有信息，通过删除它，Visual Studio 需要使用默认值重新创建它。

# c++ - 如何在 main 之前预加载数据

> ID：15013718
> 
> 赞同：0
> 
> 时间：2013-02-21T22:47:58.160
> 
> 标签：c++, multithreading, synchronization

我的目标是快速处理各种竞争条件，如果在大约同一时间在 2 个单独的线程中调用给定函数时可能会导致问题。我的快速修复是通过在 main() 之前调用它们来保证函数已经被初始化。这是我想出的解决方案，但我觉得我可能会重新发明轮子。MSVC2010 STL 中是否有可用的选项？（还没有提升）或者是否有更好的方法来快速处理这些问题，而不必在这种情况下为每个函数添加重要的线程安全代码？

```
template <typename T, T func>
struct PreLoaderHelper
{
    PreLoaderHelper()
    {
        wcout << L"Preload helper constructor" << endl;
        func();
    }
};

template <typename T, T func>
struct PreLoader
{
    static PreLoaderHelper<T, func> _helper;
};

template <typename T, T func>
PreLoaderHelper<T, func> PreLoader<T, func>::_helper;

#define PRELOAD(fn) template struct PreLoader<decltype(&fn), fn>; 

void foo() { wcout << L"inside foo" << endl; }
void bar() { wcout << L"inside bar" << endl; }
vector<wstring> & foobar() 
{ 
    static vector<wstring> sPresidents;
    if(sPresidents.size() == 0)
    {
        sPresidents.push_back(L"George Washington");
        sPresidents.push_back(L"John Addams");
        sPresidents.push_back(L"Thomas Jefferson");
    }
    return sPresidents;
}
wstring foofoo(const wstring &) { wcout << L"inside foofoo" << endl; return L"foofoo";}

PRELOAD(foo);
PRELOAD(bar);
PRELOAD(foobar);
PRELOAD(foo);

int main()
{
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:59:31.307

你可以这样做：

```
int dummy = (foo(), (void)0, bar(), 0);

int main() 
{
    // foo() and bar() have already been called
} 
```

此外，C++11 保证以下变体仅导致一次调用，无竞争：

```
void call_foo()
{
    static int dummy = (call_foo(), 0);
}

void some_thread_function() { call_foo(); } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T22:59:36.427

第一个问题：你真的必须在进入 main 之前调用它们吗？为什么不在启动任何线程之前将它们称为 main 中的第一件事呢？

否则：经典习惯用法是在静态变量的初始化程序中使用它们。通常的方法是从构造函数中调用它们；如果您有必须初始化的附加数据，这无疑是最好的方法。如果没有，那么简单的事情就是：

```
static bool initialized = (function(), true); 
```

会成功的。

形式上，这仅保证它们将在使用同一翻译单元中的任何其他内容之前被初始化，但实际上，这将保证函数在 main 之前调用，或者在加载 DLL 期间（如果它在 DLL 中）除了主要的那个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T01:11:55.090

如果您使用的是 C++11，请记住：

1.  静态函数变量初始化是线程安全的。
2.  您可以使用列表初始化语义。

尝试：

```
std::vector<std::wstring>& plop1()
{
    // Thread safe
    // Guaranteed to be done once
    // No setup required
    // No cost if not used.
    static std::vector<std::wstring> sPresidents =
    {   
        L"George Washington",
        L"John Addams",
        L"Thomas Jefferson"
    };  
    return sPresidents;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T22:59:34.030

我强烈建议根据您的情况使用关键部分进行适当的同步。进入和退出临界区不会添加很多代码，并且可以优雅地处理这种情况。

如果您不想继续在 main() 之前初始化函数的原始方法，您可以使用全局变量初始化，因为它发生在 main 函数调用之前。有一篇关于这种方法的好文章

[http://blog.fishingcactus.com/index.php/2009/01/28/fixing-c-static-and-global-variable-initialization/#sthash.pmBtrYD8.dpbs](http://blog.fishingcactus.com/index.php/2009/01/28/fixing-c-static-and-global-variable-initialization/#sthash.pmBtrYD8.dpbs)

# c# - XNA 游戏中的内存泄漏

> ID：15013719
> 
> 赞同：0
> 
> 时间：2013-02-21T22:48:03.050
> 
> 标签：c#, windows-phone-7, memory-leaks, xna

我有一个游戏的一小部分，它基本上显示了一本书的一页。Update 方法不做任何事情，Draw 方法如下：

```
public override void Draw(GameTime gameTime)
{
    SpriteBatch spriteBatch = ScreenManager.SpriteBatch;

    spriteBatch.Begin();
    spriteBatch.Draw(background.Image, background.Bounds, Color.White);
    spriteBatch.DrawString(font, name, new Vector2(ScreenManager.GraphicsDevice.Viewport.Width / 2 - font.MeasureString(name).X / 2, 100), Color.Black);
    spriteBatch.DrawString(font, currentPage.PageText, new Vector2(currentPage.TextArea.X, currentPage.TextArea.Y), Color.Black);
    if (currentPageNumber != 1)
    {
        spriteBatch.Draw(next.Image, previous.Bounds, null, Color.White, 0.0F, Vector2.Zero, SpriteEffects.FlipHorizontally, 0.0F);
    }
    if (currentPageNumber != noOfPages)
    {
        spriteBatch.Draw(next.Image, next.Bounds, Color.White);
    }
    DrawEmptyRectangle(spriteBatch, 3F, Color.Black, new Rectangle(back.Bounds.X - 1, back.Bounds.Y - 1, back.Bounds.Width + 1, back.Bounds.Height + 1));
    DrawEmptyRectangle(spriteBatch, 3F, Color.Black, new Rectangle(play.Bounds.X - 1, play.Bounds.Y - 1, play.Bounds.Width + 1, play.Bounds.Height + 1));
    DrawCenteredText(spriteBatch, font, BACK_TEXT, back.Bounds, Color.Black);
    DrawCenteredText(spriteBatch, font, PLAY_TEXT, play.Bounds, Color.Black);
    spriteBatch.End();
}

public void DrawCenteredText(SpriteBatch spriteBatch, SpriteFont font, string text, Rectangle toCenterIn, Color textColor)
{
    spriteBatch.DrawString(font, text, new Vector2(toCenterIn.X + toCenterIn.Width / 2 - font.MeasureString(text).X / 2, toCenterIn.Y + toCenterIn.Height / 2 - font.MeasureString(text).Y / 2), textColor);
}

public void DrawEmptyRectangle(SpriteBatch spriteBatch, float width, Color color, Rectangle rectangle)
{
    Vector2 topLeft = new Vector2(rectangle.Left, rectangle.Top);
    Vector2 bottomLeft = new Vector2(rectangle.Left, rectangle.Bottom);
    Vector2 topRight = new Vector2(rectangle.Right, rectangle.Top);
    Vector2 bottomRight = new Vector2(rectangle.Right, rectangle.Bottom);

    _2DLine.Draw(ScreenManager.GraphicsDevice, spriteBatch, width, color, topLeft, topRight);
    _2DLine.Draw(ScreenManager.GraphicsDevice, spriteBatch, width, color, bottomLeft, bottomRight);
    _2DLine.Draw(ScreenManager.GraphicsDevice, spriteBatch, width, color, topLeft, new Vector2(bottomLeft.X, bottomLeft.Y + width));
    _2DLine.Draw(ScreenManager.GraphicsDevice, spriteBatch, width, color, topRight, bottomRight);
} 
```

这是 _2DLine.Draw 方法：

```
public static void Draw(GraphicsDevice GraphicsDevice, SpriteBatch batch, float width, Color color, Vector2 point1, Vector2 point2)
{
    Texture2D blank = new Texture2D(GraphicsDevice, 1, 1, false, SurfaceFormat.Color);
    blank.SetData(new[] { Color.White });

    float angle = (float)Math.Atan2(point2.Y - point1.Y, point2.X - point1.X);
    float length = Vector2.Distance(point1, point2);

    batch.Draw(blank, point1, null, color, angle, Vector2.Zero, new Vector2(length, width), SpriteEffects.None, 0);
    } 
```

问题是我让程序运行的时间越长，它分配的内存就越多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T22:51:37.420

您的泄漏在这里：

```
Texture2D blank = new Texture2D(GraphicsDevice, 1, 1, false, SurfaceFormat.Color); 
```

你不应该像这样在每一帧都分配纹理。创建一个并重新使用它。完成后，调用它的 Dispose() 方法，以便它可以释放其底层 Direct3D 资源。

# javascript - Javascript对象的属性已定义，但当我尝试使用它时返回未定义

> ID：15013720
> 
> 赞同：2
> 
> 时间：2013-02-21T22:48:06.523
> 
> 标签：javascript, jquery, javascript-objects

我对此完全感到困惑。我有一个通过 jquery ajax 调用返回的对象。我可以查看对象本身，其属性已明确定义。当我尝试实际访问这些属性时，它返回未定义。例如：

```
console.log("data: " + data + ", data['ID']: " + data['ID']); 
```

在控制台中打印：

```
data: {"ID":"2"}, data['ID']: undefined 
```

到底是什么原因造成的？

编辑：

只是因为很多人问，它对 data.ID 做同样的事情。所以这：

```
console.log("data: " + data + ", data.ID: " + data.ID); 
```

正在打印这个：

```
data: {"ID":"2"}, data.ID: undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:55:14.133

如果 data 本来是一个对象，而不是您看到的 [object Object] 但您确实看到了一个字符串，那么您的响应只是一个纯文本，因此您需要先将其解析为 javascript 对象。

使用 jQuery，您可以这样做：

```
var dataAsObj = $.parseJSON(data) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T22:56:26.103

我认为您的数据是一个字符串，这就是发生这种情况的原因。

尝试这个： `JSON.parse(data);`

# ios - FBRequestConnection 是非常有问题的 400 错误

> ID：15013721
> 
> 赞同：1
> 
> 时间：2013-02-21T22:48:35.770
> 
> 标签：ios, objective-c, facebook, facebook-graph-api, facebook-ios-sdk

我得到一个`Error: HTTP status code: 400`

```
- (void)openSession
{
    [FBSession openActiveSessionWithReadPermissions:nil
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {
         [self sessionStateChanged:session state:state error:error];
     }];    

    [FBRequestConnection startWithGraphPath:@"me" parameters:nil HTTPMethod:@"GET" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        NSLog(@"result %@",result);
    }];
} 
```

这有时有效，有时我得到这个状态码。是否有更安全/更少故障的方法来获取用户的 Facebook Graph 数据（用户名、姓名、fb_id）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:19:39.390

错误是 - 它在`openSession`方法的末尾。应该已经放在下面的方法和案例中了

```
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen: {
             //My code should have been placed here
    }
} 
```

我假设在`openSession`方法结束时会话将打开（**常识，嗯！**）但我错了。`openSession`刚刚调用*FB 对话框 - 你想授权这个应用程序吗*？

 *我真正想要的是**sessionStateChanged 方法 - case (FBSessionStateOpen)** -*只有在您单击请求授权的 FB 对话框的 OK 按钮后才会调用它*。

我希望这可以澄清任何其他有此问题的人的情况。*

# php - 如何将棘手的 ereg_replace 转换为 preg_replace？

> ID：15013725
> 
> 赞同：-1
> 
> 时间：2013-02-21T22:48:50.533
> 
> 标签：php, posix-ere

我知道对此有很多问题，但我没有发现任何与我的问题相符的内容。我想将此表达式转换为 preg_replace：

```
$a = ereg_replace('[-a-z0-9!#$%&\'*+/=?^_`{|}~]+@([.]?[a-zA-Z0-9_/-])*','', $a); 
```

到目前为止尝试了这些但没有奏效：

```
$a = ereg_replace('/[-a-z0-9!#$%&\'*+/=?^_`{|}~]+@([.]?[a-zA-Z0-9_/-])*/','', $a);
$a = ereg_replace('|[-a-z0-9!#$%&\'*+/=?^_`{|}~]+@([.]?[a-zA-Z0-9_/-])*|','', $a); 
```

这是第二行的错误消息：

```
Warning: preg_replace(): Unknown modifier '}' in 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:51:56.893

对于分隔匹配字符串的字符，使用不在匹配字符串中的内容，或者转义字符串中分隔符的使用，例如

```
$a = ereg_replace('/[-a-z0-9!#$%&\'*+\/=?^_`{|}~]+@([.]?[a-zA-Z0-9_\/-])*/','', $a); 
```

这个特定的例子有点难以阅读。我会找到一个根本不使用的字符。

# c# - WPF TabControl删除标题填充？

> ID：15013728
> 
> 赞同：0
> 
> 时间：2013-02-21T22:49:07.583
> 
> 标签：c#, wpf, xaml, .net-4.0, tabcontrol

我试图做到这一点，以便当用户单击我的 TabControl 中的 TabItem 标题时我可以执行命令。

这是我的代码：

```
 <TabControl TabStripPlacement="Left" BorderThickness="1,0,0,0">
        <TabItem Selector.IsSelected="{Binding IsGeneric, Mode=OneWay}">
            <TabItem.Header>
                <Button Content="Generic" Margin="0" Command="{Binding GenericSelected}"></Button>
            </TabItem.Header>
            <V:WasteEstimationGenericView DataContext="{Binding}"></V:WasteEstimationGenericView>
        </TabItem>
        <TabItem Selector.IsSelected="{Binding IsSTP, Mode=OneWay}">
            <TabItem.Header>
                <Button Content="STP" Margin="0" Command="{Binding STPSelected}"></Button>
            </TabItem.Header>
            <V:WasteEstimationSTPView DataContext="{Binding STPViewModel}"></V:WasteEstimationSTPView>
        </TabItem>
    </TabControl> 
```

但是我最终得到了这样的东西： ![TabControl 标头](../Images/440d78e2bf53ad9c8e1165eae54b0cf6.png)

有人可以告诉我如何让我的 TabControl 标头消耗 TabItem 标头中的所有可用空间吗？我最初想使用标签来执行此操作，但它有一个问题，如果用户单击标题的边缘它不会执行命令，我仍然更喜欢使用按钮，但是按钮允许用户定位到哪里他们点击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:19:14.810

您将需要修改[`TabItem`ControlTemplate](http://msdn.microsoft.com/en-us/library/ms754137.aspx)，更具体地说`ContentPresenter`，将`VerticalAlignment`和`HorizontalAlignment`设置为 Stretch 并将 设置`Margin`为您想要的，默认为 12、2、12、2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:59:23.650

尝试这个：

```
<TabControl TabStripPlacement="Left" BorderThickness="1,0,0,0" HorizontalContentAlignment="Stretch"> 
```

# android - 当活动在后台时防止计时器暂停

> ID：15013732
> 
> 赞同：1
> 
> 时间：2013-02-21T22:49:33.850
> 
> 标签：android, timer, android-activity

与大多数人想要的相反，我想防止我的计时器在活动处于后台时暂停。如果这是不可能的，有没有办法可以做到这一点？

编辑：基本上，我正在做的是每秒增加一个数据库中的计数器。在用户自己停止进程之前，它不会跳过增量，这一点很关键。

# jquery - jquery.fileDownload：通知用户进度

> ID：15013733
> 
> 赞同：0
> 
> 时间：2013-02-21T22:49:38.823
> 
> 标签：jquery, jquery-ui, http, jquery-plugins

我正在使用 John Culviner 的（很棒的）jquery.fileDownload 插件。它有下载完成时的回调，但我的文件需要大约 30 秒才能生成（大量后端处理）。

我想通知用户当前的进度。

作为原型，我正在尝试这个：

1) (在文件下载开始之前) - 每秒重复轮询一个 url ($.get(...))。它返回完成百分比并更新页面上的 div（此时为 0%）。

2) 启动 fileDownload 脚本（此时，1）正在检查的服务器端变量开始更新，例如 2% 完成.... 10% 完成....等等

3) 理想情况下，在构建文件时，我在 1) 中的 ajax 调用仍在同时轮询（并更新 div），以便用户开始看到一些进展。

4) 下载完成。此时我可以隐藏“进度 div”，因为它将显示 100%。

注意，当然，进度 div 最终将被进度条取代。

问题是，一旦 fileDownload 开始，1) 中的 ajax 调用就开始排队，直到 4) 之后才真正执行！

我认为 fileDownload 插件使用了一个 iframe，我认为它会阻止我主页中的 ajax 调用，但它似乎是这样。

希望这是有道理的。感谢您提供有关如何处理此问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T09:27:42.697

我在使用 ASP.NET MVC Web 应用程序时遇到了同样的问题。就我而言，问题与服务器有关，因为使用同一会话的两个请求不能同时运行。会话在 ASP.NET 中不是线程安全的。

`[SessionState(SessionStateBehavior.ReadOnly)]`MVC 项目的解决方案是用属性来装饰控制器。要在两个操作之间共享变量，请使用线程安全`Cache`而不是会话。

# python - 如何正确拆分以下字符串？- Python

> ID：15013734
> 
> 赞同：1
> 
> 时间：2013-02-21T22:49:41.610
> 
> 标签：python, parsing

我有以下文件要解析：

```
Total Virtual Clients       :             10      (1 Machines)
Current Connections         :             10
Total Elapsed Time          :             50 Secs (0 Hrs,0 Mins,50 Secs)

Total Requests              :         337827      (    6687/Sec)
Total Responses             :         337830      (    6687/Sec)
Total Bytes                 :      990388848      (   20571 KB/Sec)
Total Success Connections   :           3346      (      66/Sec)
Total Connect Errors        :              0      (       0/Sec)
Total Socket Errors         :              0      (       0/Sec)
Total I/O Errors            :              0      (       0/Sec)
Total 200 OK                :          33864      (     718/Sec)
Total 30X Redirect          :              0      (       0/Sec)
Total 304 Not Modified      :              0      (       0/Sec)
Total 404 Not Found         :         303966      (    5969/Sec)
Total 500 Server Error      :              0      (       0/Sec)
Total Bad Status            :         303966      (    5969/Sec) 
```

所以我有解析算法来搜索这些值的文件，但是，当我这样做时：

```
for data in temp:
     line = data.strip().split()
     print line 
```

我的临时缓冲区在哪里`temp`，其中包含这些值，我得到：

```
['Total', 'I/O', 'Errors', ':', '0', '(', '0/Sec)']
['Total', '200', 'OK', ':', '69807', '(', '864/Sec)']
['Total', '30X', 'Redirect', ':', '0', '(', '0/Sec)']
['Total', '304', 'Not', 'Modified', ':', '0', '(', '0/Sec)']
['Total', '404', 'Not', 'Found', ':', '420953', '(', '5289/Sec)']
['Total', '500', 'Server', 'Error', ':', '0', '(', '0/Sec)'] 
```

我想要：

```
['Total I/O Errors', '0', '0']
['Total 200 OK', '69807', '864']
['Total 30X Redirect', '0', '0'] 
```

等等。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:58:09.683

您可以使用[正则表达式](http://docs.python.org/2/library/re.html)，如下所示：

```
import re
rex = re.compile('([^:]+\S)\s*:\s*(\d+)\s*\(\s*(\d+)/Sec\)')
for line in temp:
    match = rex.match(line)
    if match:
        print match.groups() 
```

这会给你：

```
['Total Requests', '337827', '6687']
['Total Responses', '337830', '6687']
['Total Success Connections', '3346', '66']
['Total Connect Errors', '0', '0']
['Total Socket Errors', '0', '0']
['Total I/O Errors', '0', '0']
['Total 200 OK', '33864', '718']
['Total 30X Redirect', '0', '0']
['Total 304 Not Modified', '0', '0']
['Total 404 Not Found', '303966', '5969']
['Total 500 Server Error', '0', '0']
['Total Bad Status', '303966', '5969'] 
```

请注意，这只会匹配对应于“TITLE:NUMBER(NUMBER/Sec)”的行。您也可以调整表达式以匹配其他行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:09:46.763

正则表达式对于解析数据来说太过分了，但它是表达固定长度字段的便捷方式。例如

```
for data in temp:
    first, second, third = re.match("(.{28}):(.{21})(.*)", data).groups()
    ... 
```

这意味着第一个字段是 28 个字符。跳过':'，接下来的 21 个字符是第二个字段，其余的是第三个字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T23:01:01.820

您需要根据格式中的其他分隔符进行拆分，而不是在空格上拆分，它可能看起来像这样：

```
for data in temp:
     first, rest = data.split(':')
     second, rest = rest.split('(')
     third, rest = rest.split(')')
     print [x.strip() for x in (first, second, third)] 
```

# javascript - 使用javascript将重叠的svg路径焊接成一个路径

> ID：15013737
> 
> 赞同：0
> 
> 时间：2013-02-21T22:49:48.593
> 
> 标签：javascript, svg, jquery-svg, librsvg, svg-animate

有没有办法使用javascript将2个重叠的svg路径焊接成一个统一的单一路径？

# asp.net-mvc - Autofac - 注入特定的接口实例

> ID：15013738
> 
> 赞同：0
> 
> 时间：2013-02-21T22:49:53.900
> 
> 标签：asp.net-mvc, autofac

我有一个 ASP.NET MVC 项目，其中包含 2 个数据库存储库接口 ( `IDBSessionFactory`) 实例：一个用于数据数据库，一个用于配置数据库。在我的引导程序中，这就是我连接 DI 的方式：

```
// using ...

builder.Register(c => new DbSessionFactory("dataDB", Assembly.GetExecutingAssembly()))
    .Named<IDbSessionFactory>("datadb")
    .InstancePerHttpRequest()
    .InstancePerApiRequest();

builder.Register(c => new DbSessionFactory("configDB", Assembly.GetExecutingAssembly()))
    .Named<IDbSessionFactory>("configdb")
    .InstancePerHttpRequest()
    .InstancePerApiRequest();

builder.RegisterControllers(Assembly.GetExecutingAssembly()); 
```

我有一些控制器类需要`"configDB"`实例`IDBSessionFactory`作为输入参数。我该如何实现呢？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:12:10.467

我想到了。注册控制器时必须使用**命名参数。**我的策略是针对 datadb 参数注册所有控制器，然后针对 configdb 参数注册特定控制器。唯一需要注意的是在所有控制器类中保持**参数名称一致。**

```
builder.RegisterControllers(Assembly.GetExecutingAssembly()).WithParameters(new[] { 
                        new ResolvedParameter((p, c) => p.Name == "dbSessionFactory", (p, c) => c.ResolveNamed<IDbSessionFactory>("datadb")) 
                    });

// Register controllers which need a specific named type            
builder.RegisterType<Web.Controllers.AdminController>().WithParameters(new[] { new ResolvedParameter((p, c) => p.Name == "sessionFactory", (p, c) => c.ResolveNamed<IDbSessionFactory>("configdb")) });
// Wire up the account controller with the config database instance, since all the user tables are there
builder.RegisterType<Web.Controllers.AccountController>().WithParameters(new[] { 
                        new ResolvedParameter((p, c) => p.Name == "dbSessionFactory", (p, c) => c.ResolveNamed<IDbSessionFactory>("configdb")) 
                        , new ResolvedParameter((p,c) => p.Name == "logger",(p,c) => c.Resolve<ILogger>())
                        , new ResolvedParameter((p,c) => p.Name == "formsAuth",(p,c) => c.Resolve<IFormsAuthentication>())
                    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:55:35.630

在 Autofac 中，注册是最后的胜利。这意味着，在你调用之后`RegisterControllers`，你可以简单地对你想要覆盖的控制器进行一次性注册，它们就会生效。

**例子：**

```
builder.RegisterControllers(Assembly.GetExecutingAssembly());

builder.Register(c =>
    new FooController(c.ResolveNamed<IDbSessionFactory>("configDB")));

// ...

container.Resolve<FooController>()  // Resolves FooController with configDB 
```

# r - 如何在 R 中使用对数 x 和 y 轴创建直方图？

> ID：15013739
> 
> 赞同：0
> 
> 时间：2013-02-21T22:49:59.623
> 
> 标签：r, histogram, lattice

所以我有一个整数向量 ，`quotes`我希望通过绘制数据点的频率并使 x 和 y 轴均为对数来查看它是否遵守幂律分布。但是，我不太确定如何在 R 中完成此操作。我目前可以使用创建直方图

```
hist(quotes, breaks = max(quotes)) 
```

但是轴都是线性的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:58:52.927

可能有更好的方法来做到这一点，但这（基本上）有效：

```
data = rnorm(1000,0,1)
r <- hist(log(data))
plot(r$breaks[-1],log(r$counts)) 
```

编辑：更好的解决方案：

```
r <- hist(data)
plot(r$breaks[-1], r$counts, log='xy', type='h')
# or alternatively:
barplot(r$counts, log="y", col="white", names.arg=r$breaks[-1]) 
```

条形图版本没有转换后的 x 轴，原因会在您尝试使用转换后的 x 轴时变得清楚。

# eclipse - 日食单线颜色

> ID：15013745
> 
> 赞同：1
> 
> 时间：2013-02-21T22:50:40.360
> 
> 标签：eclipse

如何更改 Eclipse 中单行的颜色以便在滚动时快速找到它？很多人建议下载 Eclipse 主题，但我有兴趣更改单行的颜色以便能够更快地重新找到它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:57:47.953

您可以在该行留下这个小评论：

```
// TODO 
```

滚动条旁边将显示一个蓝色的小矩形（与您的错误和警告相同），您可以通过单击它来立即找到该行。

# groovy - GPars: Waiting for actors to finish

> ID：15013751
> 
> 赞同：2
> 
> 时间：2013-02-21T22:51:11.443
> 
> 标签：groovy, gpars

I think I got this wrong from the docs.

I have two actors, XMLActor and HttpActor. XMLActor reads xmlFiles and then sends a message to HTTPActor to process. XMLActor will finish way sooner than HttpActor.

My main class calls join on both actors. I was expecting that the main thread would only terminate after both actors were done. But, what is actually happening is that as soon as all messages are processed by XMLActor, the system terminates and a lot of messages are not processed by HttpActor.

I could use some latch or even an AtomicInteger to wait for all messages to be consumed, but I was wondering if there's a more elegant way for it.

```
final HttpActor httpActor = new HttpActor().start()
final XMLActor xmlActor = new XMLActor(httpActor:httpActor).start()
Actors.actor {
        file.eachLine { line ->
            def chunks = line.split(",")
            def id = chunks[0].replaceAll("\\\"","").trim()
            def name = chunks[1].replaceAll("\\\"","").trim()
            xmlActor << new FileToRead(basePath:args[1],id:id,name:name, fileCounter:counter)
        }
    }
[httpActor, xmlActor]*.join()

//inside xmlActor
countries.each {  country ->
            httpActor << new AlbumPriceMessage(id:message.id, country:country)
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:55:42.817

The join() method will certainly wait for both actors to finish. I don't see how you stop the two actors, so can't really comment on that. Do you send so sort of poison message? Or call stop() on actors?

For example, the following simulation of your case stops correctly:

```
import groovyx.gpars.actor.*;

def httpActor = Actors.staticMessageHandler {
    println "Http actor processing " + it
}

def xmlActor = Actors.staticMessageHandler {
    println "XML Actor processing " + it
    httpActor << it
}

xmlActor.metaClass.afterStop = {
    httpActor.stop()
}

100.times {
    xmlActor << "File$it"
}
xmlActor.stop()

[xmlActor, httpActor]*.join()
println "done" 
```

# javascript - JQuery：在窗口调整大小时更改正文 css 属性

> ID：15013758
> 
> 赞同：0
> 
> 时间：2013-02-21T22:51:46.990
> 
> 标签：javascript, jquery, html, css

当窗口大小改变时，我试图让我的网站缩放它的宽度。

查询：

```
$(window).resize(function() {
    var w = $("body").width();
    if(w-810 < 0) {
        $("body").css("Left","0px");
    }
    else {
        var width = w.toString() + "px";
        $("body").css("Left",width); 
    }
}); 
```

CSS：

```
body {
background-color: #eeeeee;
position: relative;
left: 20%;
} 
```

HTML：

```
<script src="scripts\jquery.min.js" type="text/javascript"></script>
<script src="scripts\myJavascript.js" type="text/javascript"></script>
....
<body class="body"> 
```

我注意到的一件事是，如果我按类选择正文（在 jquery 中更改为“#body”），它的宽度始终默认为 0px。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:53:05.347

如果你想通过一个类来获取body元素，你必须使用`'.body'`选择器。如果要获取带有 id 的元素，请使用`'#body'`

尝试将 CSS 小写，最好将对象作为参数传递。此外，还尝试“缓存” body 元素，以防止对 DOM 树进行多次不必要的查询：

```
var body = $('.body');

$(window).resize(function() {
    var w = body.width();

    if (w-810 < 0) {
        w = "0";
    }

    body.css({ "left" : w + "px" });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:54:18.193

身体类是`'.body'`,不是`'#body'`

# javascript - 如何将参数传递给 ember.js 中的路由器操作

> ID：15013764
> 
> 赞同：0
> 
> 时间：2013-02-21T22:52:02.230
> 
> 标签：javascript, ember.js

在我的模板中：

```
<a {{action doSomething someParam}}>my cool link</a> 
```

在路由器中

```
doSomething: function(jqEvent){

} 
```

但是，jqEvent 始终是 App.Router 的一个实例。我希望传入我的参数。我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:12:32.597

使用[最新版本](https://raw.github.com/emberjs/ember.js/release-builds/ember-1.0.0-rc.1.js)的 Ember 可以正常工作，所以我怀疑您使用的是旧版本的 Ember。

jsFiddle：http: [//jsfiddle.net/G4esk/](http://jsfiddle.net/G4esk/)

```
App.ApplicationRoute = Ember.Route.extend({
    events: {
        example: function(object) {
            console.log(object.get('name'));            
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:12:52.220

您传递给的参数`{{action}}`不被视为文字；它们被视为当前上下文中对象的键。

请参阅[https://github.com/emberjs/ember.js/issues/1759](https://github.com/emberjs/ember.js/issues/1759)和[https://github.com/emberjs/ember.js/issues/1796](https://github.com/emberjs/ember.js/issues/1796)。

因此，

```
{{action doSomething someProperty}} 
```

`someProperty`将尝试在当前控制器上查找属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:58:33.223

它是旧版本的 Ember。没办法，我目前正在等待我们的 Ember 升级合并。但这不是原因，尽管路由器会改变。

其实是两部分

1.  当动作冒泡到路由器时，动作被传递两个参数，路由器和jqEvent，参数附加在jqEvent.context。
2.  当我在 chrome 控制台中检查参数时，我没有看到它，因为 Chrome 有一个优化（至少在控制台中）可以去除未使用的参数。这确实不是 Ember 的错，但它肯定掩盖了正在发生的事情。

    {{action doSomething someProperty}}

    doSomething：函数（路由器，jqEvent）{ var someProperty = jqEvent.context; }

# javascript - Backbone - TypeError：搜索未定义

> ID：15013767
> 
> 赞同：1
> 
> 时间：2013-02-21T22:52:10.673
> 
> 标签：javascript, backbone.js, requirejs

我一直在研究 Backbone.js 问题。完全免责声明 - 我对 javascript 和 Backbone 都很陌生，所以请原谅我糟糕的术语。我的文件`city_search.js`是模式的主干视图。最近，我在加载它的主页上添加了一些更改，`city_search.js`并且在页面加载时不断收到以下错误。

`TypeError: search is undefined`指着线`return search.extend`。

为什么搜索未定义？它不引用我的`common/views/search`文件吗？

```
define([
    "jquery",
    "require",
    "common/views/search",
    "common/views/view"], function ($, require, search, view) {
    return search.extend({
        placeHolder: "Find city",
        render: function () {
            search.prototype.render.call(this);
            this.$el.find("input").attr('name', 'city');
        },
        selectItem: function (item) {
            this.$el.find("input").val(item.get("name"));
            $("input[name='city_id']").val(item.get("id"));
            this.closeList();
        }
    });
}); 
```

`search.js`

```
/**
 * Definition of a search module
 **/
define([
    "jquery",
    "underscore",
    "common/views/view",
    "text!common/views/search.jst",
    "text!common/views/search_list.jst",
    "haway/views/add_place",
    "haway/views/window_matcher", //this was recently added
], function($, _, view, template, listTemplate, add, win) {
    return view.extend({

      //A lot of irrelevant code removed

      /**
      * Selects add new place
      **/

      addNewPlace: function(e) {
        console.log("addNewPlace triggered");
        this.closeList();
        this.win = new win();
        this.win.render();
      }
    });
}); 
```

# c# - 访问异步返回的 WinRT 组件时 WinJS 中的内存泄漏

> ID：15013772
> 
> 赞同：2
> 
> 时间：2013-02-21T22:52:41.013
> 
> 标签：c#, javascript, windows-runtime, winjs

我一直在阅读文档和各种示例，我的所有代码似乎都应该是这样。

但是，我遇到了似乎无法解决的内存泄漏问题。这是我所知道的：

*   它发生在调用 IAsyncOperation 方法*并*实际将`.done`or附加`.then`到 WinJS.Promise 时。
*   泄漏的对象似乎包括 a `Windows.Foundation.IAsyncOperation<T>`, an `AsyncOpPromise`（在第一次调用异步方法时动态创建的？），*最重要*的是，操作的结果 (T) 可能是一个非常大的对象。
*   我可以在 JavaScript 内存分析器中看到明显的泄漏，无论结果是数字、字符串还是任何其他对象类型。

例如：

```
//This one leaks
document.getImageSourceAsync().done(function(source) {
    //The intention is to do something with the image, but it doesn't really matter what does or does not happen here.
});

//This one doesn't leak
document.getImageSourceAsync(); 
```

我在这里创建了一个示例项目：http: [//sdrv.ms/12TvPOa](http://sdrv.ms/12TvPOa)

* * *

预先感谢您的任何帮助。亚当

# jquery - 使用 jquery 构建新元素，缺少关闭“/”

> ID：15013773
> 
> 赞同：0
> 
> 时间：2013-02-21T22:52:43.727
> 
> 标签：jquery, syntax

我想为我的输入值设置一个倒置三角形。但是我们像这样构建我的输入元素，它只是打印出值而不是有一个倒三角形。

在浏览器中生成的代码是：

```
<input class="someclass" type="button" value="&#9662;"> 
```

从此代码：

```
 var arrow_input = jq('<input/>',{ 
                      class:"someclass", 
                      type :"button", 
                      value:"&#9662;"   
                    }); 
```

我注意到它缺少结束的“/”但是如果我使用 jquery 来构造这个元素，如何添加缺少的结束 /”？谢谢！

# c# - 为什么 Visual Studio 将 pdb 文件下载到我的源位置？

> ID：15013778
> 
> 赞同：3
> 
> 时间：2013-02-21T22:53:24.790
> 
> 标签：c#, windows, visual-studio, visual-studio-2012, pdb

当我在 Visual Studio 2012 更新 1 中打开 C# 项目时，Visual Studio 立即用 pdb 目录填充我的源目录。我认为这些与下载框架的符号有关，这是我一直启用的功能，但直到最近才将源代码放入我的解决方案目录中。如何将它们放回默认位置？（我在下面附上了截图）

![在此处输入图像描述](../Images/422e5cdb97a3149239d28a7ab939a514.png)

# sql-server - 仅 Sql Server 脚本数据：CyclicalForeignKeyException 的解决方法？

> ID：15013779
> 
> 赞同：0
> 
> 时间：2013-02-21T22:53:27.910
> 
> 标签：sql-server

我有一个 SQL Server DB，我想为单个表中的数据编写脚本。当我尝试这个时，我得到了 CyclicalForeignKeyException- 大概是因为某处有一个 FK 循环，这很好。这似乎是 SQL Server 的一个恼人的限制，就我而言，我使用的是 SQL Server 2008 R2。

我为此阅读的 3 条建议是：

1.  摆脱循环。（不是一个选项，因为我不想修改这个数据库。）
2.  暂时移除密钥并在之后重置它们。（出于同样的原因，这不是一个选项。）
3.  编写数据库中所有对象的脚本。（这是可能的，但这个数据库很大，所以这不是一个理想的解决方案。）

我读到的另一个类似建议是备份数据库并恢复临时副本，删除 FK，然后获取数据。但同样由于数据库很大，这也不理想。

有人有另一种想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:12:09.613

哇-我不敢相信这有效...

我有一个类似版本的数据库，我试图在另一台机器上获取数据。这一次，当我运行该工具时，它起作用了。（我的意思是工具：任务->生成脚本...选择 1 个表，在高级中，将“脚本的数据类型”更改为“仅数据”。）

起初我认为这个其他版本的数据库一定没有循环键，但后来我意识到我使用的是 SQL Server Management Studio 2012 Express。然后我关闭了 SSMS，对域用户执行了 runas /netonly 并打开了 SSMS 2012 并连接到 SQL Server 2008 R2 DB。我尝试生成脚本并且它有效！

显然 SSMS 2012 修复了这个“问题”，您甚至可以将它用于其他数据库版本！

# c# - 如何根据加利福尼亚的当前时间将 UTC 转换为 PST 或 PDT？

> ID：15013780
> 
> 赞同：10
> 
> 时间：2013-02-21T22:53:31.060
> 
> 标签：c#, .net, timezone

我无法使用`DateTime.Now`，因为服务器不一定位于加利福尼亚州

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-21T22:55:07.000

两种选择：

1）使用`TimeZoneInfo`和`DateTime`：

```
using System;

class Test
{
    static void Main()
    {
        // Don't be fooled - this really is the Pacific time zone,
        // not just standard time...
        var zone = TimeZoneInfo.FindSystemTimeZoneById("Pacific Standard Time");
        var utcNow = DateTime.UtcNow;
        var pacificNow = TimeZoneInfo.ConvertTimeFromUtc(utcNow, zone);

        Console.WriteLine(pacificNow);
    }
} 
```

2) 使用我的[Noda Time](http://noda-time.googlecode.com)项目 :)

```
using System;
using NodaTime;

class Test
{
    static void Main()
    {
        // TZDB ID for Pacific time
        DateTimeZone zone = DateTimeZoneProviders.Tzdb["America/Los_Angeles"];
        // SystemClock implements IClock; you'd normally inject it
        // for testability
        Instant now = SystemClock.Instance.Now;

        ZonedDateTime pacificNow = now.InZone(zone);        
        Console.WriteLine(pacificNow);
    }
} 
```

显然我有偏见，但我更喜欢使用 Noda Time，*主要*有以下三个原因：

*   您可以使用 TZDB 时区信息，该信息在 Windows 之外更具可移植性。（您也可以使用基于 BCL 的区域。）
*   各种不同的信息有不同的类型，避免了`DateTime`试图表示三种不同的值的奇怪，没有只表示“日期”或“一天中的时间”的概念
*   它的设计考虑到了可测试性

# java - R 在完成运行 JAR 后挂起

> ID：15013782
> 
> 赞同：0
> 
> 时间：2013-02-21T22:53:41.403
> 
> 标签：java, r

我有一个像这样调用 jar 的 r 脚本：

```
system("java -cp myJar.jar com.myMainClass arg1 arg2", intern=TRUE) 
```

我可以“看到”正在执行的 java 代码（cpu 跳转和磁盘写入），它会输出一个包含计算结果的文本文件。r 的下一行读取结果：

```
scores <- read.csv(results.csv, header=TRUE) 
```

但是，在 java 代码写出文件和 r 读取文件并继续之间存在很大的差距，10-30 秒。结果文件很小，读取速度快如闪电。

我的问题有两个：可能是什么原因造成的，我可以做些什么来加快速度？在加快速度方面，我很好奇将数据传递给 java 程序并读回数据的其他方法，而不是将 java 耦合到 R。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:55:13.400

检查您的 java 程序是否正确关闭文件，并关闭所有正在运行的线程。

# javascript - 从 JavaScript 确认框调用函数

> ID：15013784
> 
> 赞同：0
> 
> 时间：2013-02-21T22:53:44.027
> 
> 标签：javascript, code-behind

我有一个确认框。如果用户单击框上的确定，我想调用一个函数。代码如下。

```
Dim message As String = " An Assessment for this date already exists. To create another one for this date click OK OR else click CANCEL to go back to Assessment History. "
Dim sb As New System.Text.StringBuilder()
sb.Append("<script type = 'text/javascript'>")
sb.Append("window.onload=function(){")
sb.Append("if (confirm('")
sb.Append(message)

sb.Append("')){ ") 

sb.Append("}")
sb.Append("else{")
sb.Append("window.location = 'SA.aspx?PID=" & Request("PID") & "';")
sb.Append("}};</script>")
ClientScript.RegisterClientScriptBlock(Me.GetType(), "confirm", sb.ToString()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:00:54.853

```
...
sb.Append("')){ ") 
sb.Append("yourFunction();") 
... 
```

（当然，前提是您谈论的是 JavaScript 函数。）

# mediaelement.js - 添加正在播放的文件名？

> ID：15013790
> 
> 赞同：0
> 
> 时间：2013-02-21T22:54:03.120
> 
> 标签：mediaelement.js

我想知道是否可以添加插件正在播放的文件的名称？

我在这里添加了一个 mp3 到我的页面，只是为了测试插件。[http://pdfelectronics.com/about/](http://pdfelectronics.com/about/)

谢谢！克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:56:07.043

动态定义您的 mediaelement 对象（请参阅此处：[Mediaelements.js: override features attributes](https://stackoverflow.com/questions/14939414/mediaelements-js-override-features-attributes)）并将其添加到其成功回调中：

```
$('.mejs-mediaelement').css('color', '#FFFF00').html('NAME of your audio'); 
```

# c# - 如何获取传递给属性构造函数的参数？

> ID：15013794
> 
> 赞同：3
> 
> 时间：2013-02-21T22:54:16.493
> 
> 标签：c#, reflection, pdb-files

我正在开发一个文档生成器。MSDN 文档显示了在应用时传递给 Attributes 的参数。比如`[ComVisibleAttribute(true)]`。我将如何通过反射、pdb 文件或其他方式获取这些参数值和/或在我的 c# 代码中调用的构造函数？

澄清>如果有人记录了一个具有如下属性的方法：

```
/// <summary> foo does bar </summary>
[SomeCustomAttribute("a supplied value")]
void Foo() {
  DoBar();
} 
```

我希望能够在我的文档中显示该方法的签名，如下所示：

```
Signature:

[SomeCustomAttribute("a supplied value")]
void Foo(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T23:14:45.767

如果您有想要获取自定义属性和构造函数参数的成员，可以使用以下反射代码：

```
MemberInfo member;      // <-- Get a member

var customAttributes = member.GetCustomAttributesData();
foreach (var data in customAttributes)
{
    // The type of the attribute,
    // e.g. "SomeCustomAttribute"
    Console.WriteLine(data.AttributeType);

    foreach (var arg in data.ConstructorArguments)
    {
        // The type and value of the constructor arguments,
        // e.g. "System.String a supplied value"
        Console.WriteLine(arg.ArgumentType + " " + arg.Value);
    }
} 
```

要获取成员，请从获取类型开始。有两种获取类型的方法。

1.  如果您有实例`obj`，请调用`Type type = obj.GetType();`.
2.  如果您有类型名称`MyType`，请执行`Type type = typeof(MyType);`。

然后你可以找到，例如，一个特定的方法。查看[反射文档](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)以获取更多信息。

```
MemberInfo member = typeof(MyType).GetMethod("Foo"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T23:03:12.830

对于`ComVisibileAttribute`，传递给构造函数的参数成为[`Value`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute.value.aspx)属性。

```
[ComVisibleAttribute(true)]
public class MyClass { ... }

...

Type classType = typeof(MyClass);
object[] attrs = classType.GetCustomAttributes(true);
foreach (object attr in attrs)
{
    ComVisibleAttribute comVisible = attr as ComVisibleAttribute;
    if (comVisible != null)
    {
        return comVisible.Value // returns true
    }
} 
```

其他属性将遵循类似的设计模式。

* * *

**编辑**

我发现[这篇](http://www.codeproject.com/Articles/17690/Mono-Cecil-The-Most-Powerful-Tool-You-ve-Ever-Hear)关于[Mono.Cecil](http://www.mono-project.com/Cecil)的文章描述了如何做一些非常相似的事情。这看起来它应该做你需要的。

```
foreach (CustomAttribute eca in classType.CustomAttributes)
{
    Console.WriteLine("[{0}({1})]", eca, eca.ConstructorParameters.Join(", "));
} 
```

# delphi - Delphi IDE 向导自动从菜单项生成操作？

> ID：15013796
> 
> 赞同：-1
> 
> 时间：2013-02-21T22:54:26.050
> 
> 标签：delphi, ide, action, delphi-xe2, menuitem

在 IDE 内部的设计时，是否有一个快速“n”简单的技巧来自动从多个菜单项生成操作，然后将这些操作应用回菜单项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:25:02.193

对象检查器中的操作下拉菜单允许您创建一个将自动连接的新操作，但您必须手动设置操作属性并单独实现事件句柄。

# ajax - 如何覆盖 Dojo 的 xhrGet 和 xhrPost？

> ID：15013797
> 
> 赞同：1
> 
> 时间：2013-02-21T22:54:26.830
> 
> 标签：ajax, dojo

我们在我们的应用程序中广泛使用`Dojo'`s`xhrGet`和`xhrPost`。这已在多个`JavaScript`文件中使用。现在我们需要一种统一的方式来处理在 AJAX 调用的情况下从服务器返回的异常。我们不想在所有使用`Dojo'`s`xhrGet`或`xhrPost`. 是否可以在不干扰任何现有代码的情况下做到这一点？例如，当一些异常作为 ajax 响应的一部分从服务器发送时，我需要在整个应用程序中以一致的方式显示一些消息。

你能建议我解决这个问题吗？如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:48:40.553

使用我[在 Dojo 中的通用加载图标中](https://stackoverflow.com/questions/10885230/generic-loading-icon-in-dojo/10895198#10895198)描述的[IO 管道主题](http://livedocs.dojotoolkit.org/dojo/ioPipelineTopics)，您根本不必更改代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:54:53.217

你看的是 dojo/aspect 还是 dojo/on ？您可以定义在使用方面调用函数之后（或之前）执行的函数。

看看那个：

[http://dojotoolkit.org/reference-guide/1.8/dojo/aspect.html#dojo-aspect-after](http://dojotoolkit.org/reference-guide/1.8/dojo/aspect.html#dojo-aspect-after)

为什么不使用 dojo/declare 创建一个自定义 xhrArgs 类，该类对他的所有孩子都具有相同的错误功能？

[http://dojotoolkit.org/reference-guide/1.8/dojo/_base/declare.html#dojo-base-declare](http://dojotoolkit.org/reference-guide/1.8/dojo/_base/declare.html#dojo-base-declare)

卢西安

# algorithm - 找到范围的最大相交子集

> ID：15013800
> 
> 赞同：6
> 
> 时间：2013-02-21T22:54:41.203
> 
> 标签：algorithm, language-agnostic, graph-algorithm, set, range

如果您有一组范围，例如以下简单示例...

```
[
    [12, 25], #1
    [14, 27], #2
    [15, 22], #3
    [17, 21], #4
    [20, 65], #5
    [62, 70], #6
    [64, 80]  #7
] 
```

...您如何计算*最大相交子集*（不确定如何表达它，但我的意思是“相交并具有最高基数的范围的子集”）并确定相交的程度（该子集中范围的基数)?

从逻辑上讲，我可以解决它，并且可能能够将其转换为一个幼稚的算法。从列表往下看，我们看到 1-5 相交，5-7 相交，并且 #5 与这两个集合相交。

我想要的结果只是子集，因为这给了我有关基数的信息，只要它们都相交，我就可以轻松计算集合的交集。在上面的示例中，它将是`[[14, 27],[15, 22],[12, 25],[17, 21],[20, 65]]`.

在我的脑海中，我可能会尝试将每个范围转换为一个图节点，连接相交的节点，并找到最大的全连接图。

我也在反复思考从一开始就开始，继续建立一个相交范围的列表，每个范围都有一个运行的交点来检查——直到你碰到一个不相交的元素，然后开始一个新的列表。继续根据现有交叉点检查每个项目。但是我不确定这是否完整。

我可以尝试实现一些东西（lang 是 ruby​​ FWIW），但我很想听听其他人如何解决这个问题，以及最有效和最优雅的方法可能是什么。

**更新：**

我相信这是最大集团问题的一个具体案例，它是 NP 难的，因此实际上很困难。对于近似值/实际使用的建议将不胜感激！

另请参阅：[http](http://en.wikipedia.org/wiki/Maximum_clique) ://en.wikipedia.org/wiki/Maximum_clique /[在图中查找所有完整的子图](https://stackoverflow.com/questions/2801138/find-all-complete-sub-graphs-within-a-graph)

**更新 2**

~~在这里找到了这个问题的 NP-hardness 和 NP-completeness 的一个很好的证明：[http ://www.cs.bris.ac.uk/~popa/ipl.pdf](http://www.cs.bris.ac.uk/~popa/ipl.pdf)~~

~~看起来这是该行的结尾。对不起各位！我将使用足够好的贪婪近似值。谢谢。~~

正如答案中所说，我认为该论文没有描述这个问题......我们可能会根据范围在此处获得更多信息。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T02:32:12.950

如果我正确理解了这个问题，那么它不是您链接到的论文中描述的 NP 问题的一个实例。这是我对问题的理解，以及多项式时间解决方案。

1.  我们有一组有限的实数范围，比如*n*：[A [1] , B [1] ], [A [2] , B [2] ], ..., [A [n] , B [n] ]，其中 A [i] ≤ B [i]。

2.  创建起点和终点的排序列表，按数字排序，指示该点是起点还是终点。

在您的示例中，这将是：12+、14+、15+、17+、20+、21-、22-、25-、27-、62+、64+、65-、70-、80-

3.  初始化`curOverlap`和`maxOverlap`归零。

4.  遍历列表，`curOverlap`每个 + 递增，每个 - 递减。`maxOverlap = max(curOverlap, maxOverlap)`在每个增量上设置。

继续您的示例：
val, cur, max
12, 1, 1
14, 2, 2
15, 3, 3
17, 4, 4
20, 5, 5
21, 4, 5
22, 3, 5
25, 2, 5
27, 1, 5
62, 2, 5
64, 3, 5
65, 2, 5
70, 1, 5
80, 0, 5

最大重叠为 5。如果您想知道最大重叠发生的位置，还可以存储与最大值关联的 val。在这个例子中，这会给你 20。然后通过最初的一组范围并找到包括 20 个的 5 个范围是微不足道的。

-edit- 如果您有重复的值，请在每个值的减号之前计算加号，以便您包含在单个点重叠的范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-15T12:50:56.527

这是 Dave 提出的解决方案的 Java 实现：

```
public static List<Range> getMaxIntersectingSubset(List<Range> ranges) {
    // First, we collect "a sorted list of the starting and ending points".
    // We're sorting such that all lower bounds come first
    List<Bound> intersections = Arrays.stream(ranges)
        .flatMap(arr -> Stream.of(Bound.ofLowerBound(arr[0]), Bound.ofUpperBound(arr[1])))
        .sorted(Comparator
            .comparing(Bound::value)
            .thenComparing((a, b) -> Boolean.compare(!a.isLowerBound(), b.isLowerBound())))
        )
        .collect(Collectors.toList());

    long curOverlap = 0;
    long maxOverlap = 0;
    List<Integer> indexes = new ArrayList<>();

    // Then we iterate the list, searching for the highest overlap
    for (int i = 0; i < intersections.size(); i++) {
        Bound intersection = intersections.get(i);
        curOverlap += (intersection.isLowerBound() ? 1 : -1);
        if (curOverlap > maxOverlap) {
            maxOverlap = curOverlap;
            indexes.clear();
            indexes.add(i);
        }
        else if (curOverlap == maxOverlap) {
            indexes.add(i);
        }
    }

    return indexes.stream()
        .map(index -> Range.of(intersections.get(index).value(), intersections.get(index + 1).value()))
        .collect(Collectors.toList());
} 
```

```
public class Bound {

    private final int value;
    private final boolean lower;

    private Bound(int value, boolean lowerbound) {
        this.value = value;
        this.lower = lowerbound;
    }

    public static Bound ofLowerBound(int value) {
        return new Bound(value, true);
    }

    public static Bound ofUpperBound(int value) {
        return new Bound(value, false);
    }

    public int value() {
        return this.value;
    }

    public boolean isLowerBound() {
        return this.lower;
    }
} 
```

```
public class Range {

    private final int start;
    private final int end;

    private Range(int start, int end) {
        if (start > end) {
            throw new IllegalArgumentException("start > end");
        }
        this.start = start;
        this.end = end;
    }

    public static Range of(int start, int end) {
        return new Range(start, end);
    }

    public int start() {
        return this.start;
    }

    public int end() {
        return this.end;
    }
} 
```

这些是一些测试集：

1.  从[这个 Stackoverflow 问题](https://stackoverflow.com/questions/62289068/finding-overlapping-range-from-range-list)

    ```
    int[][] ints = {
        { 1, 100 },
        { 30, 95 },
        { 10, 60 },
        { 15, 25 },
        { 33, 66 },
        { 20, 50 },
        { 51, 100 },
        { 25, 70 }
    }; 
    ```

    根据上述问题的OP，结果应该是`[ 30, 55 ]`。提供的代码输出此结果。然而，还有另一个重叠，虽然不那么广泛。请参阅下面的图片。

    [![测试用例 #1a](../Images/676551333be6e48f844eb6b312ae51ae.png)](https://i.stack.imgur.com/KQFFG.png)

    [![测试用例 #1b](../Images/0241852b0c203efbe69125344b007433.png)](https://i.stack.imgur.com/kfib1.png)

2.  这个问题的 OP 提到了这个列表：

    ```
    int[][] ints = {
        { 12, 25 },
        { 14, 27 },
        { 15, 22 },
        { 17, 21 },
        { 20, 65 },
        { 62, 70 },
        { 64, 80 }
    }; 
    ```

    在这里，输出是`[ 20, 21 ]`。这与下图相符：

    [![测试用例#2示意图](../Images/ceca15d13f704c9f721a8359bf2967e7.png)](https://i.stack.imgur.com/4tEJP.png)

# primes - 需要帮助实施 Lucas Pseudoprimality 测试

> ID：15013813
> 
> 赞同：1
> 
> 时间：2013-02-21T22:55:53.747
> 
> 标签：primes

我正在尝试编写一个函数，该函数使用卢卡斯伪素数测试确定数字*n是素数还是复合数；*目前，我正在使用标准测试，但是一旦我开始工作，我就会编写强测试。我正在阅读 Baillie 和 Wagstaff 的[论文](http://mpqs.free.fr/LucasPseudoprimes.pdf)，并遵循Thomas Nicely 在[trn.c](http://www.trnicely.net/misc/trn.zip)文件中的[实现。](http://www.trnicely.net/misc/bpsw.html)

我知道完整的测试涉及几个步骤：用小素数进行除法，检查*n*是否不是正方形，对基数 2 执行强伪素数测试，最后是卢卡斯伪素数测试。我可以处理所有其他部分，但卢卡斯伪素测试遇到了麻烦。这是我在 Python 中的实现：

```
def gcd(a, b):
    while b != 0:
        a, b = b, a % b
    return a

def jacobi(a, m):
    a = a % m; t = 1
    while a != 0:
        while a % 2 == 0:
            a = a / 2
            if m % 8 == 3 or m % 8 == 5:
                t = -1 * t
        a, m = m, a # swap a and m
        if a % 4 == 3 and m % 4 == 3:
            t = -1 * t
        a = a % m
    if m == 1:
        return t
    return 0

def isLucasPrime(n):
    dAbs, sign, d = 5, 1, 5
    while 1:
        if 1 < gcd(d, n) > n:
            return False
        if jacobi(d, n) == -1:
            break
        dAbs, sign = dAbs + 2, sign * -1
        d = dAbs * sign
    p, q = 1, (1 - d) / 4
    print "p, q, d =", p, q, d
    u, v, u2, v2, q, q2 = 0, 2, 1, p, q, 2 * q
    bits = []
    t = (n + 1) / 2
    while t > 0:
        bits.append(t % 2)
        t = t // 2
    h = -1
    while -1 * len(bits) <= h:
        print "u, u2, v, v2, q, q2, bits, bits[h] = ",\
               u, u2, v, v2, q, q2, bits, bits[h]
        u2 = (u2 * v2) % n
        v2 = (v2 * v2 - q2) % n
        if bits[h] == 1:
            u = u2 * v + u * v2
            u = u if u % 2 == 0 else u + n
            u = (u / 2) % n
            v = (v2 * v) + (u2 * u * d)
            v = v if v % 2 == 0 else v + n
            v = (v / 2) % n
        if -1 * len(bits) < h:
            q = (q * q) % n
            q2 = q + q
        h = h - 1
    return u == 0 
```

当我运行它时，`isLucasPrime`返回`False`83 和 89 等素数，这是不正确的。它还返回`False`复合 111，这是正确的。它返回`False`复合 323，我知道它是一个`isLucasPrime`应该返回的 Lucas 伪素数`True`。事实上，我测试过的每个*n*`isLucasPseudoprime`都会返回。`False`

 *我有几个问题：

1）我不是 C/GMP 方面的专家，但在我看来，Nicely 似乎`(n+1)/2`从右到左（从最不重要到最重要）的位运行，而其他作者从左到右运行位。上面显示的代码从左到右运行位，但我也尝试从右到左运行位，结果相同。哪个顺序是正确的？

2) 我觉得 Nicely 只更新1 位的*u*和*v变量看起来很奇怪。*它是否正确？我希望每次通过循环更新所有四个卢卡斯链变量，因为链的索引在每一步都会增加。

3）我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:08:00.690

> 1）我不是 C/GMP 方面的专家，但在我看来，Nicely 似乎`(n+1)/2`从右到左（从最不重要到最重要）的位运行，而其他作者从左到右运行位。上面显示的代码从左到右运行位，但我也尝试从右到左运行位，结果相同。哪个顺序是正确的？

事实上，Nicely 从最低有效位到最高有效位。他在and变量中计算`U(2^k)`and `V(2^k)`（和`Q^(2^k)`；当然都是模数`N`），并将resp存储在and中。当遇到 1 位时，余数会发生变化，并相应地更新 和。`mpzU2m``mpzV2m``U((N+1) % 2^k)``V((N+1) % 2^k)``mpzU``mpzV``(N+1) % 2^k``mpzU``mpzV`

另一种方法是计算`U(p)`, `U(p+1)`,`V(p)`和 ( 可选地)的`V(p+1)`前缀并将它们组合起来计算and或[ditto for ] 取决于前缀后面的下一位是 0 还是 1。`p``N+1``U(2*p+1)``U(2*p)``U(2*p+2)``V``p`

这两种方法都是正确的，就像您可以计算`x^N`从左到右，具有`x^p`和`x^(p+1)`作为状态的功率，或者从右到左具有`x^(2^k)`和`x^(N % 2^k)`作为状态的功率[并且，计算`U(n)`和`U(n+1)`基本上是计算`ζ^n`位置`ζ = (1 + sqrt(D))/2`]。

我——显然还有其他人——发现从左到右的顺序更简单。我没有完成或阅读分析，可能是从右到左的平均计算成本较低，因此很好地选择了从右到左。

> 2) 我觉得很奇怪，Nicely 只更新1 位的`u`和变量。`v`它是否正确？我希望每次通过循环更新所有四个卢卡斯链变量，因为链的索引在每一步都会增加。

是的，这是正确的，因为`(N+1) % 2^k == (N+1) % 2^(k-1)`如果该`2^k`位为 0，则余数。

> 3）我做错了什么？

首先是一个小错字：

```
if 1 < gcd(d, n) > n: 
```

应该

```
if 1 < gcd(d, n) < n: 
```

当然。

更重要的是，您将更新用于 Nicely 的遍历顺序（从右到左），但沿另一个方向遍历。这当然会产生错误的结果。

此外，更新时`v`

```
 if bits[h] == 1:
        u = u2 * v + u * v2
        u = u if u % 2 == 0 else u + n
        u = (u / 2) % n
        v = (v2 * v) + (u2 * u * d)
        v = v if v % 2 == 0 else v + n
        v = (v / 2) % n 
```

你使用 的新值`u`，但你应该使用旧值。

```
def isLucasPrime(n):
    dAbs, sign, d = 5, 1, 5
    while 1:
        if 1 < gcd(d, n) < n:
            return False
        if jacobi(d, n) == -1:
            break
        dAbs, sign = dAbs + 2, sign * -1
        d = dAbs * sign
    p, q = 1, (1 - d) // 4
    u, v, u2, v2, q, q2 = 0, 2, 1, p, q, 2 * q
    bits = []
    t = (n + 1) // 2
    while t > 0:
        bits.append(t % 2)
        t = t // 2
    h = 0
    while h < len(bits):
        u2 = (u2 * v2) % n
        v2 = (v2 * v2 - q2) % n
        if bits[h] == 1:
            uold = u
            u = u2 * v + u * v2
            u = u if u % 2 == 0 else u + n
            u = (u // 2) % n
            v = (v2 * v) + (u2 * uold * d)
            v = v if v % 2 == 0 else v + n
            v = (v // 2) % n
        if h < len(bits) - 1:
            q = (q * q) % n
            q2 = q + q
        h = h + 1
    return u == 0 
```

有效（不能保证，但我认为它是正确的，并且已经做了一些测试，所有这些都通过了）。*

# scala - 带有招摇支持的 scalatra 应用程序的 spec2 测试失败

> ID：15013821
> 
> 赞同：3
> 
> 时间：2013-02-21T22:56:34.803
> 
> 标签：scala, specs2, scalatra, swagger

在具有 swagger 支持的 scalatra 应用程序上调用原型 spec3 测试用例时，测试失败。

这是测试/规范代码：ServletSpec.scala

```
class ServletSpec extends ScalatraSpec { def is =
  "Calling the generated swagger client"        ^
    "should return success"                     ! swaggerClient^
                                                end

  addServlet(classOf[TestController], "/api/*")

  def swaggerClient = get("/api/account") {
    status must_== 200
    response.body must_== 
      """my json response"""
  }  
} 
```

TestController 看起来像：package com.newco

```
import org.scalatra._
import org.scalatra.swagger._

//sample - see http://www.scalatra.org/guides/swagger.html

// JSON-related libraries
import org.json4s.{DefaultFormats, Formats}

// JSON handling support from Scalatra
import org.scalatra.json._

class TestController(implicit val swagger: Swagger) extends ScalatraServlet 
    with JacksonJsonSupport  with JValueResult {

  protected val applicationName = Some("AppName")
  protected val applicationDescription = "description."

   // Sets up automatic case class to JSON output serialization
  protected implicit val jsonFormats: Formats = DefaultFormats

  // Before every action runs, set the content type to be in JSON format.
  before() {
    contentType = formats("json")
  }

  val getAccount = 
    (apiOperation[GetAccountResponse]("getAccount")
      summary "Get users account information"
      notes "Returns the users profile"
      parameter queryParam[AccessToken]("accessToken").description("Access token returned from authentication service")
      )

  get("/account", operation(getAccount)){
      SampleData.getAccountResponse
  }
} 
```

sbt 测试失败并出现以下错误（没有可用的详细跟踪）：[error] x 应该返回成功 [error] ' [error] [error] [error] Error 500 com.acme.TestController [error] [error] [error]

## HTTP 错误：500

[错误]

访问 /api/account 时出现问题。原因：[错误]

```
    com.acme.TestController
```

[错误]

* * *

*Powered by Jetty://* [error]
[error] [error] [error] ' [error] 不等于...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T23:05:05.307

解决方案是将 spec2 行从：

```
addServlet(classOf[TestController], "api/*") 
```

到：

```
implicit val swagger = new GPNSwagger 
addServlet(new TestController, "/api/*") 
```

Swagger 注解导致控制器类是抽象的，不能实例化为声明的类型。这种映射 servlet 的替代方法有效

# java - 从 Frege 调用本机 Java 构造函数

> ID：15013824
> 
> 赞同：2
> 
> 时间：2013-02-21T22:56:51.490
> 
> 标签：java, jvm, native, frege

你知道我在哪里可以找到有关 Frege 的 Java 绑定的文档吗？来自 Haskell，我发现 Frege 最有趣的方面。不幸的是，我发现的[文档](http://code.google.com/p/frege/downloads/detail?name=Language-609.pdf&can=2&q=)并没有详细说明。

这是我的测试示例。基本上，我想翻译以下 Java 代码：

```
BigDecimal x = BigDecimal.valueOf(7);
BogDecimal y = new BigDecimal("5.13");
System.out.println(x.add(y)); 
```

这是我当前的弗雷格代码：

```
module Main where

data JBigDecimal s = pure native java.math.BigDecimal
  where
  pure native jAdd add :: JBigDecimal RealWorld -> JBigDecimal RealWorld -> JBigDecimal RealWorld
  pure native jShow toString :: JBigDecimal RealWorld -> String

pure native jBigDecimalI java.math.BigDecimal.valueOf :: Int -> JBigDecimal RealWorld

-- ERROR: Here, I don't know what I should write.
-- I want to bind to the BigDecimal(String) constructor.
-- I tried several versions but none of them was successful, e.g.:
pure native jBigDecimalS java.math.BigDecimal.BigDecimal :: String -> JBigDecimal RealWorld

main :: [String] -> IO ()
main args = let x = jBigDecimalI 7
                y = jBigDecimalS "5.13"
                z = JBigDecimal.jAdd x y
            in printStrLn $ (JBigDecimal.jShow z)
-- (BTW, why `printStrLn` and not `putStrLn` as it is called in Haskell?) 
```

为了完整起见，错误消息是：

```
calling: javac -cp fregec-3.21.jar:. -d . -encoding UTF-8 ./Main.java 
./Main.java:258: error: cannot find symbol
        return java.math.BigDecimal.BigDecimal(
                               ^
  symbol:   method BigDecimal(String)
  location: class BigDecimal
1 error
E frege-repl/example.fr:15: java compiler errors are most likely caused by
    erronous native definitions 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:06:17.433

我找到了。构造函数称为 new：

```
pure native jBigDecimalS new :: String -> JBigDecimal RealWorld 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:33:40.127

顺便说一句，你不需要`RealWorld`无处不在。你有一个纯原生数据类型，你只应用纯原生函数。

此外，事实证明，当我们有时支持 Java 泛型时，您在此处使用的幻像类型约定不会很好地发挥作用。然后我们会有类似的东西

```
data List a = native java.util.LinkedList 
```

我们希望将`a`with kind`*`映射到泛型类型参数。但是，这不会与指示幻像类型的状态线程很好地混合。

因此（即将推出！）我们将有一个类型来标记可变值，就像

```
abstract data Mutable s a = Mutable a 
```

所以一个人永远不能真正构造/解构一个 Mutable。这应该起作用，以便只有本机函数可以创建类型值`Mutable s a`（在 IO 或 ST monad 中），然后可以制作一个安全副本，`freeze`其中一个人得到一个所谓的不可变的`a`返回。但是这个不能被传递给需要 a 的不纯函数`Mutable s a`。

但同样，当您使用不可变数据时，就`BigDecimal`足够了（这不会改变）。

# c# - 从 SerialDataReceivedEventHandler 写入文本框控件

> ID：15013836
> 
> 赞同：1
> 
> 时间：2013-02-21T22:57:28.923
> 
> 标签：c#, winforms, static, controller

我很确定只有我做错了。

我`Form1`有一个按钮，onclick 调用我的 serialConn.cs 中的一个方法，称为`connect()`.

```
public static bool connect(string comPort) {
        BTserial = new SerialPort(comPort, 9600, Parity.None, 8, StopBits.One);
        BTserial.Open();
        if (BTserial.IsOpen) {
            BTserial.DataReceived += new SerialDataReceivedEventHandler(DataReceivedEvent);
            return true;
        } else {
            return false;
        }
    }

private static void DataReceivedEvent(object sender, SerialDataReceivedEventArgs e) {
        Debug.WriteLine("Data Incomming!");
        // Check if Chars are received
        if (e.EventType == SerialData.Chars) {
            Debug.WriteLine("Chars!");
            // Create new buffer
            byte[] ReadBuffer = new byte[BTserial.BytesToRead];

            // Read bytes from buffer
            BTserial.Read(ReadBuffer, 0, ReadBuffer.Length);
            BTserial.DiscardInBuffer();

            // Encode to string
            string data = bytesToString(ReadBuffer);

            ReadBuffer = null;
            data = null;
        }
    } 
```

这一切都很好，但是当收到数据时，我希望它打印在`TextBox`我的控制器中`Form1`。但由于我`DataReceivedEvent()`是一个`static`（我想我必须是？），我无法访问任何东西？那么解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:31:14.563

您需要将 Form 实例传递给此连接方法（来自按钮的事件处理程序）：

```
public class Form1 : Form {

  public void Button1_Click(object sender, EventArgs e) {
    serialConn.connect("the com port here", this);
  }

  // ... etc ...

} 
```

在 serialConn 中：

```
public static bool connect(string comPort, Form1 whichForm) { 
```

然后您可以使用 lambda 函数并关闭其中的“whichForm”引用，如下所示：

但此外，您应该确保您实际上没有从除主线程之外的另一个线程修改 GUI——由于 SerialPort 类的性质很可能从另一个后台线程引发事件，这很有可能——因此 this.Invoke( some other lambda ) 编组该特定操作，该操作又在主线程上执行。

MSDN 明确指出：http: [//msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)

从 SerialPort 对象接收数据时，在辅助线程上引发 DataReceived 事件。由于此事件是在辅助线程而不是主线程上引发的，因此尝试修改主线程中的某些元素（例如 UI 元素）可能会引发线程异常。如果需要修改主窗体或控件中的元素，请使用 Invoke 将更改请求发回，这将在适当的线程上完成工作。

```
public static bool connect(string comPort, Form1 whichForm) {
    BTserial = new SerialPort(comPort, 9600, Parity.None, 8, StopBits.One);
    BTserial.Open();
    if (BTserial.IsOpen) {
        BTserial.DataReceived += (sender, e) => {
          Debug.WriteLine("Data Incomming!");
          // Check if Chars are received
          if (e.EventType == SerialData.Chars) {
              Debug.WriteLine("Chars!");
              // Create new buffer
              byte[] ReadBuffer = new byte[BTserial.BytesToRead];

              // Read bytes from buffer
              BTserial.Read(ReadBuffer, 0, ReadBuffer.Length);
              BTserial.DiscardInBuffer();

              // Encode to string
              string data = bytesToString(ReadBuffer);

              Action toBeRunOnGuiThread = () => whichForm.theTextBox.Text = data;

              // to guard yourself from all evil
              // you could check to see if it is needed to
              if (whichForm.InvokeRequired) 
                // marshal the call to the action all the way to the GUI thread
                whichForm.Invoke(toBeRunOnGuiThread);
              else
                // or, if we ARE on the GUI thread already, just call it from this thread
                toBeRunOnGuiThread();

              ReadBuffer = null;
              data = null;
          }
    };
        return true;
    } else {
        return false;
    }
} 
```

# java - 用于处理 docx 文档的 Apache POI 或 docx4j

> ID：15013837
> 
> 赞同：22
> 
> 时间：2013-02-21T22:57:28.840
> 
> 标签：java, apache-poi, docx, docx4j

您认为哪个更好地用于将 docx 文档作为 java 对象读取，为什么？

换句话说。哪个库支持大多数单词标签？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-24T07:12:19.127

**披露：我领导 docx4j 项目**

虽然 docx4j 也可以处理 pptx 和 xlsx，但它主要用于 docx 操作。举例说明，截至撰写本文时，[docx4j 论坛](http://www.docx4java.org/forums/docx-java-f6/)中有近 1000 个主题。pptx论坛只有10%的量。

无论您想对 docx 文档做什么，docx4j 都应该能够为您提供帮助。有一个通用工作流程的[单页概述](https://docx4java.org/docx4j/plutext-docx4j_on_a_page-v800.pdf)。

对于许多常见的需求，docx4j 提供了更高级别的 API。这些包括：

*   创建/打开/保存 docx（当然）

*   使用多种方法生成报告/文档：(i) 变量替换，(ii) XML 数据绑定（特别强大），以及 (iii) 邮件合并

*   导出为 HTML、XHTML

*   导出为 PDF（支持字体）

对于其他任何事情，您都可以将 docx 的 JAXB 表示操作到您心中的内容。JAXB 是 Java 社区标准，包含在 Java 6 中，并且在 EclipseLink 的 MOXy 中具有强大的替代实现。（POI 使用 XML Beans 而不是 JAXB）

有一个[Web 应用程序](http://www.docx4java.org/blog/2013/05/docx4jpptxxlsx-online-code-generation/)可帮助您探索 docx，并生成 Java 代码以创建相应的 Java 对象。

当然，如果您有一些特定的任务，可能是 docx4j 或 POI 在这方面具有特殊的优势。

docx4j 和 POI 都获得了 ASL v2 许可。

docx4j 得到积极维护；它的源代码[在 GitHub 上](https://github.com/plutext/docx4j/)。

此外，如果您需要，可以为 docx4j 提供商业支持，还有几个商业扩展，例如[MergeDocx](http://www.plutext.com/m/index.php/products)。

docx4j 确实依赖 POI 作为库来[实现](http://poi.apache.org/poifs/index.html)OLE 2 复合文档格式，我们对此表示感谢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T23:58:02.930

我认为 Apache POI 的主要重点是处理电子表格，尽管我具有读取 word 文档的功能并且它使用 xml beans 来做到这一点。Docx4j 主要使用 jaxb 处理 docx 文档。通常 jaxb 允许将 xml 转换为 java 对象，因此我认为 docx4j 更适合您的情况。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-04T12:22:57.817

如果你在处理 docx 文档，docx4j 比 Apache POI 更方便。您可以使用以下链接来学习 docx4j 的基础知识。此外，还有一个不错的 docx4j 论坛。

1\. [http://blog.iprofs.nl/2012/09/06/creating-word-documents-with-docx4j/](http://blog.iprofs.nl/2012/09/06/creating-word-documents-with-docx4j/) 2\. [http://www.smartjava.org/content/create-complex-word-docx-文档-程序化-docx4j](http://www.smartjava.org/content/create-complex-word-docx-documents-programatically-docx4j) ?

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-15T08:54:12.917

我尝试了 Apache POI，但问题是从 docx 文件中打印任何内容时（例如：要从 docx 打印所有“Heading1”元素），它会打印出很多错误数据和空格。Docx4j 会避免这个坏数据，我试过了。

# java - 递归查找arraylist中的字谜

> ID：15013843
> 
> 赞同：-4
> 
> 时间：2013-02-21T22:57:55.627
> 
> 标签：java, recursion

我有一个带有 Lex.isWord(String word) 和 Lex.isPrefix(String prefix) 方法的 Lexicon 帮助器类，但我似乎无法弄清楚如何完成这个方法来查找输入单词的字谜。

```
public static ArrayList<String> findAgrams(String sentence) { 
```

有任何想法吗？我想我需要一个辅助方法，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:01:48.113

[您可以在Learn Java-Recursion](https://sites.google.com/site/learnjav/java/recursion)中找到解决方案。

# jquery - Jquery获取上一个输入文本字段的值

> ID：15013848
> 
> 赞同：1
> 
> 时间：2013-02-21T22:58:18.937
> 
> 标签：jquery

我正在尝试提醒以前的文本字段的值。这是我到目前为止尝试过的，但没有骰子：

```
<div>
    <input type="text" value="foo">
</div>
<div>
    <select onchange="alert($(this).prev('input').val())">
        <option value="bar1">bar1</option>
        <option value="bar2">bar2</option>
    </select>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T23:00:16.223

试试这个：

```
<div>
    <input type="text" value="foo">
</div>
<div>
    <select onchange="alert($(this).parent().prev().find('input').val())">
        <option value="bar1">bar1</option>
        <option value="bar2">bar2</option>
    </select>
</div> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/7tnaL/)**

您试图获取不存在的 select 元素的前一个元素。您需要上到父 div，然后转到上一个 div，然后返回到输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:03:51.127

它不起作用的原因是它试图检索包含选择器的 DIV 元素的值。.prev() 在 DOM 中搜索您正在调用的元素之前的元素

```
<div>
    <input type="text" value="foo">
    <select onchange="alert($(this).prev().val())">
        <option value="bar1">bar1</option>
        <option value="bar2">bar2</option>
    </select>
</div> 
```

看看这个 jsfiddle 的例子[http://jsfiddle.net/2A9jJ/2/](http://jsfiddle.net/2A9jJ/2/)

# perl - 将序列导出为 fasta 宽格式

> ID：15013849
> 
> 赞同：1
> 
> 时间：2013-02-21T22:58:19.640
> 
> 标签：perl, bioinformatics, bioperl

我正在尝试使用`Bio::SeqIO`. 结果是序列每 60 列被一个新行打破。我该如何避免呢？
我希望以“宽”格式导出序列，即序列中没有换行符。

我的代码大致是：

```
use Bio::SeqIO;
my $seqin = Bio::SeqIO->new(-file => "<$fastaFile", '-format' => 'Fasta');
my $outname = fileparse($fastaFile, qr/\.[^\.]*$/) . "_sub.fasta";
my $seqout = Bio::SeqIO->new(-file => ">$outname", '-format' => 'Fasta');

while(my $seq = $seqin->next_seq){
      # do something with $seq
      $seqout->write_seq($seq);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:55:28.653

Bio::SeqIO::fasta 提供了一种[`width`方法](http://search.cpan.org/~cjfields/BioPerl-1.6.901/Bio/SeqIO/fasta.pm#width)来指定应如何格式化书面 FASTA 记录：

```
while (my $seq = $seqin->next_seq) {
    $seqout->width($seq->length);
    $seqout->write_seq($seq);
} 
```

或者当然，如果你的序列有一些最大尺寸，你可以只放一个

```
$seqout->width(5000); 
```

左右在循环之前。

# java - 在 MVC 之后关闭 JFrame

> ID：15013853
> 
> 赞同：-1
> 
> 时间：2013-02-21T22:58:38.313
> 
> 标签：java, swing, jframe

我正在尝试在动作侦听器中使用 dispose() 方法关闭框架，但是它不起作用。

```
public class LoginController implements ActionListener, Observer {

    private JTextField name;
    private JTextField password;
    private LoginPage login;

/// // LoginFrame f1 = new LoginFrame();
    public LoginController(JTextField name, JTextField Password, LoginPage login) {
        this.name = name;
        this.password = Password;
        this.login = login;

    }

    public void actionPerformed(ActionEvent e) {
        login.LoginPage();
        login.checkLogin(name.getText(), password.getText());
        //  dipose();
    }
} 
```

我试过创建框架，但这会进入循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:16:09.517

`dispose`显然不是您的控制器的方法。它也不是您的控制器可以直接访问的任何组件的方法。

您需要问自己的问题是，您的控制器关闭任何东西是否合适。

您无法保证它`LoginPane`确实存在于您可以或应该处理的上下文中。如果`LoginPane`它实际上是 a 的一部分`CardLayout`，如果你任意处置 的`LoginPane`父窗口，你只是不恰当地杀死了应用程序。

以这种方式假设应用程序的其他部分是危险和糟糕的设计/

更好的方法是`LoginPane`在成功登录时允许触发事件或让控制器触发事件​​，并允许其他控制器选择它应该如何响应它。

如果你对这种做法非常执着，你可以使用`SwingUtilities.getWindowAncestor(Component)`. `Window`这将传回`Component`驻留的。

```
SwingUtilities.getWindowAncestor(login).dispose(); 
```

我个人也会检查一个`null` `Window`

# ios - 有什么方法可以测试 UIAutomation 测试的代码覆盖率吗？

> ID：15013854
> 
> 赞同：1
> 
> 时间：2013-02-21T22:58:45.957
> 
> 标签：ios, code-coverage, ios-ui-automation

我正在使用 UIAutomation 来测试一个应用程序，我想知道我的代码覆盖率。但是由于 javascript 没有预处理器，这意味着 gcov 和类似的不是一个选项。有没有人为此提出解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-09T12:55:45.030

对于 Xcode 4.5 及更新版本：

1.  将“生成测试覆盖文件”构建设置设置为是。
2.  将“仪器程序流程”构建设置设置为是。

这将在您每次在模拟器中运行应用程序并退出应用程序时生成代码覆盖率文件。这两个步骤的详细说明可以在[http://qualitycoding.org/xcode-code-coverage/](http://qualitycoding.org/xcode-code-coverage/)的开头找到。

对于任何单元测试，每次您点击测试按钮并完成测试时，都会生成代码覆盖率文件。对于 UIAutomation，它有点棘手。您必须确保应用程序在测试结束时退出。我发现最简单的方法是关闭多任务处理。在您的 MyAppName-Info.plist 文件中添加 UIApplicationExitsOnSuspend 并将此选项设置为“是”。运行您的 UI 自动化测试，最后您可以通过手动按下模拟器中的主页按钮或使用 UIATarget.localTarget().deactivateAppForDuration() 方法退出应用程序。

注意：如果您的应用有任何依赖于 deactivateAppForDuration() 方法的 UI 自动化测试，则测试将在运行该命令时终止。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-22T07:46:42.440

代码覆盖率仅用于单元测试，没有用于 UIAutomation 的代码覆盖率，因为无法判断 UIAutoamtion “触摸”了屏幕上的多少元素

# sql-server-2008-r2 - 使用存储过程“以用户身份执行”并应用于调用上下文（会话）

> ID：15013855
> 
> 赞同：2
> 
> 时间：2013-02-21T22:58:46.817
> 
> 标签：sql-server-2008-r2, impersonation

我在 Windows 7 机器上使用 SQL Server 2008 R2。我创建了一个存储过程来运行 SQL 命令`EXECUTE AS USER`：

```
CREATE PROCEDURE dbo.ImpersonateUser
AS
BEGIN
EXECUTE AS USER = 'UserName';
END 
```

然后，我试图看看我是否在冒充用户......

```
PRINT CURRENT_USER;

EXEC ImpersonateUser;

PRINT CURRENT_USER 
```

......结果是......

```
dbo
dbo 
```

...当我想要它时...

```
dbo
UserName 
```

当然，这不起作用，因为该`EXECUTE AS USER`语句仅在存储过程中有效`ImpersonateUser`。 **我的问题是：**存储过程是否可能`ImpersonateUser`影响调用上下文（会话）？我想在存储过程中封装（并隐藏）其他逻辑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T00:11:37.867

这不可能。任何 EXECUTE AS 更改都会在过程结束时自动恢复。

其他不超出该过程范围的事情是使用 SET 命令和#TempObjects 进行的更改。

但是，您可以做的是将需要在不同安全上下文下执行的逻辑封装在一个过程中，然后从更改上下文的过程中调用它。就像是：

```
CREATE PROCEDURE dbo.CallWithImpersonateUser
   @ProcedureName
AS
BEGIN
  EXECUTE AS USER = 'UserName';
  EXEC @ProcedureName;
END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-22T10:45:29.683

塞巴斯蒂安的回答是正确的，但您仍然必须授予模拟呼叫用户。 [语法可以在这里找到](http://technet.microsoft.com/en-us/library/ms178640%28v=sql.105%29.aspx)

```
GRANT IMPERSONATE ON LOGIN::[login_to_be_impersonated] to [login1];
GO 
```

# java - Java 中的 BlockingQueue 线程同步

> ID：15013856
> 
> 赞同：0
> 
> 时间：2013-02-21T22:58:48.940
> 
> 标签：java, producer-consumer, blockingqueue

我对 BlockingQueue 的概念不熟悉，并认为它不需要 wait() 和 notify()。我编写了以下代码作为线程同步的初步测试（为清楚起见省略了一些代码）：

```
q = new LinkedBlockingQueue<flight>();

generator = new EventGenerator(q,flight);
southwest = new Airline(q);

new Thread(generator).start();
new Thread(southwest).start(); 
```

使用生产者类 EventGenerator。EventGenerator 从它的初始状态 (SC) 飞过所有状态，直到它到达门 AG：

```
import java.util.concurrent.BlockingQueue;

public class EventGenerator implements Runnable
{
private final BlockingQueue<flight> bqueue;
private final flight f;

EventGenerator(BlockingQueue<flight> q, flight f1)
{
    bqueue = q;
    f = f1;
}

public void run()
{
    try
    {
        while (f.state != "AG") { bqueue.put(produce()); }
    }
    catch (InterruptedException ex)
    {
        System.out.println(ex);
        System.exit(0);
    }
}

flight produce()
{
    if (f.state.equals("SC")){ f.state = "BD"; }
    else if (f.state.equals("BD")) { f.state = "LG"; }
    else if (f.state.equals("LG")) { f.state = "TO"; }
    else if (f.state.equals("TO")) { f.state = "LD"; }
    else if (f.state.equals("LD")) { f.state = "AG"; }

    return f;
} 
```

消费类 Airline 将接收航班状态的每一次变化，并打印出来：

```
import java.util.concurrent.BlockingQueue;

public class Airline implements Runnable
{
    private final BlockingQueue<flight> bqueue;

    Airline(BlockingQueue<flight> q)
    {
        bqueue = q;
    }

public void run()
{
    try
    {
        while (!bqueue.isEmpty()) { consume(bqueue.take());} 
    }
    catch (InterruptedException ex)
    {
        System.out.println(ex);
        System.exit(0);
    }
}

void consume(flight f)
{
    System.out.println("Flight no. " + f.flightno + " is now in state " + f.state);
}
} 
```

该项目编译并运行没有错误。但是，我期望（并希望）结果符合以下要求：

```
Flight no. 1 is now in state SC
Flight no. 1 is now in state BD
Flight no. 1 is now in state LG
Flight no. 1 is now in state TO
Flight no. 1 is now in state LD
Flight no. 1 is now in state AG 
```

但相反，我几乎总是得到：

```
Flight no. 1 is now in state AG
Flight no. 1 is now in state AG
Flight no. 1 is now in state AG
Flight no. 1 is now in state AG
Flight no. 1 is now in state AG 
```

我是否错误地实现了 BlockingQueue？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:09:14.027

```
while (f.state != "AG") { bqueue.put(produce()); }

while (!bqueue.isEmpty()) { consume(bqueue.take());} 
```

我怀疑你的两个`while`条件都不是你想要的：第一个应该`.equals()`用于字符串比较。第二个*假设*消费者将在生产者之后执行（并且消费者比生产者*慢*）；否则消费者会发现队列为空并跳过整个循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T23:12:04.530

您目前遇到的问题实际上与`produce`方法有关。您正在更改同一对象的状态并将其多次放入队列中。您要做的实际上是将修改后的副本放入队列中。如果你的`Flight`对象是不可变的，那么你就不会遇到这个问题。

除了上述之外，[这个答案](https://stackoverflow.com/a/15013991/122207)对于您的 while 循环中的条件问题也是正确的。

# javascript - QUnit 不打印任何结果

> ID：15013869
> 
> 赞同：4
> 
> 时间：2013-02-21T22:59:28.793
> 
> 标签：javascript, unit-testing, qunit

我将 QUnit 页面上显示的测试运行器页面的最基本示例插入到 MVC 项目中。

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>QUnit basic example</title>
  <link rel="stylesheet" href="../Content/qunit-1.11.0.css">
</head>
<body>
  <div id="Div1"></div>
  <div id="Div2"></div>
  <script src="../Scripts/qunit-1.11.0.js"></script>
  <script>
      test("a basic test example", function () {
          var value = "hello";
          equal(value, "hello", "We expect value to be hello");
      });
  </script>
</body>
</html> 
```

当我运行它时，我只看到一个空白页。测试在断点处停止时执行。.css 和 .js 的链接正确且有效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T03:52:48.573

我对 MVC 有同样的问题，并通过从 qunit 网站获取源文件而不是依赖 nuget 来修复它。在我这样做之后，一切都很完美。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T23:57:55.237

这两个 div 必须具有以下 id，因为 QUnit 正在寻找这些来显示任何内容。

```
 <div id="qunit"></div>
 <div id="qunit-fixture"></div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-17T19:54:52.770

**QUnit for ASP.Net MVC**需要一些不同的东西。代替普通的 qunit 和 qunit-fixture div，使用如下内容：

```
<div>
    <h1 id="qunit-header">QUnit Test Results</h1>
    <ol id="qunit-tests"></ol>
</div> 
```

有关完整示例，请参阅[使用 QUnit 逐步在 ASP.Net MVC 项目中对 JavaScript/JQuery 进行单元测试](http://blogs.msdn.com/b/pranab/archive/2013/06/20/unit-testing-javascript-jquery-in-asp-net-mvc-project-using-qunit.aspx)

# ruby - Ruby/Rails 方法在 x 个字符或单词之后在字符串中插入内容

> ID：15013870
> 
> 赞同：9
> 
> 时间：2013-02-21T22:59:30.897
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

哪种方法具有在 x 字符后插入内容的功能。

例如，我有这个字符串：

```
@test = "Something, is wrong" 
```

然后可以执行以下操作：

```
@test.insert(x words or x characters , '<br />') 
```

`<br />`我需要这个，因为我需要在需要拆分的长字符串中插入换行符 。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-21T23:06:17.677

您应该首先查看 Ruby 文档中的 String 类。[http://www.ruby-doc.org/core-1.9.3/String.html](http://www.ruby-doc.org/core-1.9.3/String.html)

试一试你认为你正在寻找的方法可能被称为......在你的情况下插入并看看它说什么......

```
"abcd".insert(3, 'X')    #=> "abcXd" 
```

# c# - 将 lambda 传递给方法以比较两个列表的成员

> ID：15013875
> 
> 赞同：0
> 
> 时间：2013-02-21T22:59:43.943
> 
> 标签：c#, .net, lambda

在将数据从 db1 复制到 db2 后，我正在对数据完整性进行大量测试。

我一直在写几乎相同的测试，这是伪代码

```
Get db1List
Get db2list

for each db2poco in db2list
 linq to get list of db1pocos.membervaribale1 matches db2poco.membervaribale1
  if db1pocos.membervaribale2 == db2poco.membervaribale2
     return false

return true 
```

我想将它转换为一个通用方法，该方法采用泛型和 lambdas 进行比较......有点像这样，除了它不编译......

```
private bool GenericCompareLists<T1, T2>(List<T1> cdssList, List<T2> spamisList, object sender, Func<bool, T1, T2> filterLambda ,  Func<bool, T1, T2> compareLambda )
{
    bool passed = true;
    foreach ( T2 spamisCv in spamisList )
    {
        List<T1> cdssSubList = ( from l in cdssList where filterLambda( l, spamisCv ) select l ).ToList();// should alwasy be one, 
        if ( cdssSubList.Count != 1 )
        {
            log.Error( "..." );
            passed = false;
        }
        else
        {
            T1 cdssCv = cdssSubList.First();

            if ( compareLambda( cdssCv, spamisCv) )// comparing the sum of all check_amt for this type, cdss vs spamis - EWB
            {
                log.Error( "Failed in comparison f" + sender.ToString()  );
                passed = false;
            }
        }
    }
    return passed;
} 
```

但我无法弄清楚如何让它真正工作/调用它。

有人可以帮帮我吗？或指出我的 lambda fu 的好参考...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T23:10:36.250

最肯定

```
Func<bool, T1, T2> 
```

应该

```
Func<T1, T2, bool> 
```

那是因为 Func 的定义是：

```
public delegate TResult Func<in T1, in T2, out TResult>(T1 arg1, T2 arg2); 
```

请注意，第三个通用参数是定义方法原型/委托的返回值的参数。

试试看，看看效果如何。我不确定这是唯一的（在周围的类中记录一个正确定义的字段吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:11:54.670

Func 委托返回值是最后一个通用参数，而不是第一个。（您可以通过输入/输出差异标记来判断）。因此，如果您将 bool 移动到最后一个泛型参数，它应该可以编译。

即将签名更改为（注意函数类型中类型参数的位置）：

```
 private bool GenericCompareLists<T1, T2>(List<T1> cdssList, List<T2> spamisList, object sender, Func<T1, T2, bool> filterLambda, Func<T1, T2, bool> compareLambda) 
```

这使它为我编译。折扣缺少的“日志”变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T23:13:07.013

您的`Func`参数顺序错误，使用自己的过滤器函数时不能使用查询语法。看起来你想要：

```
private bool GenericCompareLists<T1, T2>(List<T1> cdssList, List<T2> spamisList, object sender, Func<T1, T2, bool> filterLambda ,  Func<T1, T2, bool> compareLambda )
{
    bool passed = true;
    foreach ( T2 spamisCv in spamisList )
    {
        List<T1> cdssSubList = cdssList.Where(l => filterLambda(l, spamisCv)).ToList();
        if ( cdssSubList.Count != 1 )
        {
            log.Error( "..." );
            passed = false;
        }
        else
        {
            T1 cdssCv = cdssSubList.First();

            if ( compareLambda( cdssCv, spamisCv) )// comparing the sum of all check_amt for this type, cdss vs spamis - EWB
            {
                log.Error( "Failed in comparison f" + sender.ToString()  );
                passed = false;
            }
        }
    }
    return passed;
} 
```

# powershell - 在多个字段中用字符串替换空值

> ID：15013876
> 
> 赞同：0
> 
> 时间：2013-02-21T22:59:44.453
> 
> 标签：powershell, active-directory

如何`Lastlogon`用字符串“从不记录”替换字段中的 $null 值，并将该值放在“上次登录天数”列中

```
Search-ADAccount -UsersOnly  -AccountDisabled:$false | Get-ADUser -Properties Name, LastLogon | select Name, @{N='LastLogon'; E={[DateTime]::FromFileTime($_.LastLogon)}}, @{N='Last Logon Days'; E={$($(Get-Date) - $([DateTime]::FromFileTime($_.LastLogon))).Days}} 
```

我有从未登录过网络的帐户，他们返回的最后登录日期是 12/31/1600 7:00:00 PM，这有点远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:07:14.460

试试这个作为你的选择语句：

```
select Name, @{N='LastLogon'; E={`
    if ( [DateTime]::FromFileTime($_.LastLogon) -eq $null ) {
        return "Never log" }
    else { return [DateTime]::FromFileTime($_.LastLogon) }}},`
    @{N='Last Logon Days'; E={`
    if ( [DateTime]::FromFileTime($_.LastLogon) -eq $null ) {
        return "Never log" }
    else {  return $($(Get-Date) - $([DateTime]::FromFileTime($_.LastLogon))).Days}}} 
```

我现在无法对此进行测试，但我过去曾成功地做过类似的事情。

# java - 获取 ArrayList 元素平均值的最短形式

> ID：15013878
> 
> 赞同：1
> 
> 时间：2013-02-21T22:59:45.670
> 
> 标签：java, arrays, arraylist, average

最短的形式是指最少的java代码行数。我想获得整数值的 ArrayList 项目的平均值。例如对于 ArrayList **ar**：

```
ArrayList<Integer> ar = new ArrayList<Integer>(Arrays.asList(1,2,3,5,8,13,21)); 
```

我正在寻找类似的东西

```
ar.Average() 
```

或者

```
ar.Sum() 
```

或者

```
Arrays.Average(ar) 
```

PS。我知道我们可以循环执行。只是寻找更短的替代方案；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:14:09.893

代码行数总是一个毫无意义的衡量标准，但如果这是你关心的：

```
int sum=0;for(Integer i:ar)sum += i;System.out.println(sum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:06:33.643

您可以使用数学库，例如 Apache Commons Math。

[http://commons.apache.org/math/apidocs/index.html](http://commons.apache.org/math/apidocs/index.html)

特别是一个 SummaryStaticics 对象（[http://commons.apache.org/math/apidocs/src-html/org/apache/commons/math3/stat/descriptive/SummaryStatistics.html#line.123](http://commons.apache.org/math/apidocs/src-html/org/apache/commons/math3/stat/descriptive/SummaryStatistics.html#line.123)）。虽然对于一般的东西，它可能不值得导入一个库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T23:09:11.230

[公共数学库](http://commons.apache.org/math/)包含平均值[以及](http://commons.apache.org/math/api-2.1/org/apache/commons/math/stat/descriptive/moment/Mean.html)您可能想要的简单统计信息。也许正是你在寻找什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T23:11:46.013

如果您已经在使用 Java 8：

```
double average = Arrays.asList(1, 2, 3, 4)
                       .stream()
                       .map(Integer::intValue)
                       .average()
                       .getAsDouble(); 
```

# nlp - 使用 WordNet 进行单词预测

> ID：15013879
> 
> 赞同：-1
> 
> 时间：2013-02-21T22:59:50.243
> 
> 标签：nlp, wordnet

假设我有一个英文文本，其中某处缺少一个单词。我有一个字典中的候选词列表，没有其他信息。这些候选词是由其他一些相当不准确的算法选择的。我想使用 WordNet 和缺失词周围的上下文来为候选词分配概率。

关于如何解决这个问题，我想到了一种明显的临时方法。一种方法是提取缺失词周围的“有趣”词，根据某些度量计算与每个候选词的语义相似度，并根据平均分数为候选词分配概率。

但是我找不到任何关于这个问题的有用的研究论文。

所以，我要问的是，如果你知道关于这个问题的任何研究（论文），你如何找到我的建议，你有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:09:36.693

您可以从[实验开始：丰富间接答案](http://compprag.christopherpotts.net/iqap-experiments.html)。一篇好文章是[Semantic web access prediction using WordNed](http://ceur-ws.org/Vol-484/paper13.pdf)。

# asp.net-mvc - MVC Delete Get v POST 模糊方法签名

> ID：15013880
> 
> 赞同：3
> 
> 时间：2013-02-21T22:59:52.383
> 
> 标签：asp.net-mvc, software-design

我的控制器有一个 Delete 方法，实际上它有两个，GET 和 POST。

这两个都只需要一个 id 就可以工作，所以我最终得到了一个模棱两可的方法，即

```
[HttpGet]
public ActionResult Delete(string id) { ... }

[HttpPost]
public ActionResult Delete(string id) { ... } 
```

是否有处理此问题的*最佳实践？*

如果有任何疑问，该`[HttpGet]`方法会返回要删除的对象，以便用户确认，`[HttpPost]`执行删除并重定向到`Index`操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:18:45.573

您可以使用 ActionName 属性来指定与控制器方法名称不同的操作名称：

```
[HttpGet]
public ActionResult Delete(string id) { ... }

[HttpPost, ActionName("Delete")]
public ActionResult DeleteConfirmed(string id) { ... } 
```

# jquery - MVC 3 中的 jquery 按钮事件是否具有防止 ajax 调用并行运行的内置机制？

> ID：15013886
> 
> 赞同：0
> 
> 时间：2013-02-21T23:00:31.660
> 
> 标签：jquery, ajax, asp.net-mvc-3, asynchronous, parallel-processing

我有 2 个 jquery 按钮事件使他们自己的 ajax 调用回服务器。但是，当我单击第一个按钮，然后在第一个按钮在其自己的 ajax 调用中返回“成功”之前单击第二个按钮时，第二个 ajax 调用（通过第二个按钮）无法连接到服务器并在其自己的 ajax 调用中调用“错误”处理。这是预期的行为吗？是否有用于强制 ajax 调用连续发生的按钮单击事件的内置机制？我会很感激帮助！注意：我正在使用 MVC 3，顺便说一句。

```
 $.ajax({
       type: "POST",
       url: '@Url.Action("getExecAvgDaysToClose")',
       error: function (xhr, status, err) {
           alert("An error occurred between server and browser: " + err);
       },
       success: function (response) {
          var data = new google.visualization.DataTable(response);
          var options = {
              width: gaugeWidth, height: gaugeHeight,
              redFrom: @Model.ChartConfig.ExecStatusRedFrom, redTo: @Model.ChartConfig.ExecStatusRedTo,
              yellowFrom: @Model.ChartConfig.ExecStatusYellowFrom, yellowTo: @Model.ChartConfig.ExecStatusYellowTo,
              greenFrom:@Model.ChartConfig.ExecStatusGreenFrom, greenTo: @Model.ChartConfig.ExecStatusGreenTo,
              greenColor: defaultGreenColor,
              yellowColor: defaultYellowColor,
              redColor: defaultRedColor,
              max: @Model.ChartConfig.ExecStatusMax,
              minorTicks: 3
          };
         var chart = new google.visualization.Gauge(document.getElementById('eAveDaysClose'));

    doDrawChart(chart, data, options);

   } 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:33:44.710

问题可能是由于`ASP.NET Session State`. 我相信从*同一个会话*发出的所有请求都被序列化并默认并发运行，而不是并行运行。这包括 ajax 请求。否则，如果一个控制器尝试写入 Session 而另一个控制器正在访问它，则 Session 可能会损坏。

在 MVC 3 中，您可以通过添加`[SessionState(SessionStateBehavior.Disabled)]`到控制器来解决此问题。[以下是关于无会话控制器](http://blogs.msdn.com/b/rickandy/archive/2009/12/17/session-less-mvc-controller.aspx?Redirected=true)的一些信息异步控制器可能是另一种解决方法。

# java - 条件类导入

> ID：15013889
> 
> 赞同：0
> 
> 时间：2013-02-21T23:00:53.430
> 
> 标签：java, android, import

我正在尝试构建一个具有向后兼容性的应用程序，但我仍在使用一些仅在较新的 SDK 版本中可用的类，方法是检查`android.os.Build.VERSION.SDK_INT`.

但是，我仍然需要将这些类导入到我的项目中，这在旧设备上运行时会给我一个错误。我可以有条件地在android中导入类吗？我曾尝试在 Google 上查找某些内容，但我可能不知道要搜索什么才能返回有效结果。

tl;dr - 我想在较旧的设备上使用在较新的 API/SDK 版本中添加的类，但这`import newer.api.level.class`会阻止我的应用程序工作。我该怎么办？

编辑：特别是对我来说，我正在我的一项活动中实现 PopupMenu.OnMenuItemClickListener 协议，这就是应用程序所抱怨的。

错误是`Failed resolving Lcom/example/myApp; interface 575 'Landroid/widget/PopupMenu$OnMenuItemClickListener;'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:39:26.567

这里的问题不是`import`（应该在编译时处理），而是 Activity （在每个平台上都使用）实现了`PopupMenu.OnMenuItemClickListener`，这导致运行旧平台的设备出现问题。

使用新的 API 功能时，请始终确保**所有**新类/方法的使用**仅**在具有合适 API 级别的设备上通过[Conditional Execution 执行](http://codeisland.org/2012/android-targeting-system/#conditional-execution)。

这里正确的做法是不让Activity实现监听器，而是让监听器成为条件执行块中的匿名类，类似于[这里](https://github.com/LukasKnuth/bike-track/blob/3b60c31d85c2f9f45dbd70be30ada944a85dc5a8/src/org/knuth/biketrack/Main.java#L138)的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:12:44.330

在不了解细节的情况下，您可能希望查看以下关注向后兼容性的内容；

[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

# asp.net - 单元测试 MVC4 应用程序服务层

> ID：15013891
> 
> 赞同：3
> 
> 时间：2013-02-21T23:00:59.507
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

在过去的两天里，我一直在开始和重新开始这个学习过程，因为我真的不知道如何开始。

我有一个包含三层的 MVC4 应用程序：Web、服务和核心。控制器向服务层发送请求，服务层提供控制器用来为视图水合视图模型的信息。

我的服务层中有以下方法：

```
public interface ISetServices
{
    List<Set> GetBreadcrumbs(int? parentSetId);
    Set GetSet(int? setId);
    Set CreateSet(string name, string details, int? parentSetId);
    void DeleteSet(int? setId);

    Card GetCard(int? cardId);
    Card CreateCard(List<string> sides, string details, int? parentSetId);
    void DeleteCard(int? cardId);

    Side GetSide(int? sideId);
    List<String> GetSides(Card card);
    Side CreateSide(Card card, string content);
    void DeleteSide (int? sideId);

} 
```

我试图弄清楚如何创建一个单元测试类库来测试这些功能。

运行测试时，我希望删除（如果存在）并重新创建一个 TestDatabase，并用数据播种。我的核心项目中有一个“受保护的”种子方法以及 - 我可以使用它吗？如果是这样，怎么做？

我读到的每一个地方都说永远不要在你的测试中使用数据库，但我不能完全弄清楚测试的重点是什么。这些服务用于访问和更新数据库……我不需要数据库来测试吗？

我创建了一个 Project.Services.Tests 单元测试项目，但不知道如何连接所有内容。如果可能的话，我想用代码而不是配置文件来做......任何例子或指针都会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:54:46.920

这个问题有很多方面，让我尝试处理一些：

*   **单元测试**是关于测试一个代码单元，最小的可测试代码，但是测试代码单元与它与数据库的交互是一个**集成测试**问题
*   使用**存储库模式**解决此问题的一种方法- 它是数据访问层上的抽象层。您的服务接口看起来更像是一个存储库模式实现，更多关于它的谷歌。
*   有些人不测试存储库模式的内部结构，他们只是断言针对它的接口的调用。数据库测试被认为是一个集成测试问题。
*   有些人通过在他们的单元测试中编写 SetUp 和 TearDown 步骤来直接访问他们的数据库，通常您会在 SetUp 中插入适当的数据，而 TearDown 会将其全部清理到以前的状态，但请注意 - 它们可能会变得非常慢并且使你的单元测试很痛苦。
*   其他方法是配置您的测试以使用不同的数据库 - 例如 SQLCE。对于某些 ORM，数据库交换可能非常容易。这比点击“完整”数据库要快，而且看起来更干净，但是数据库实现存在差异，迟早会浮出水面，让您的单元测试变得痛苦......
*   目前随着 NoSQL 解决方案的兴起，直接访问数据库变得非常容易，因为它们通常有对应的内存（如 RavenDB）

我意识到一开始可能有点不知所措，但同样，这个问题有很多方面。您将源代码发布到 github 并在这里分享如何？

# iphone - 无法从我的 JSON 中获取所有数据

> ID：15013893
> 
> 赞同：0
> 
> 时间：2013-02-21T23:01:06.037
> 
> 标签：iphone, json, tableview, master-detail

我正在将 JSON 解析到我的 MASTER-DETAIL 应用程序，并且在“深入挖掘”JSON 时遇到问题。我无法在我的`detailTableView`. 在我的`detailTableView`中，我想拥有酒店/旅馆的名称，在这种情况下。

查看我的 JSON 和 detailTableView.m：

```
[

    {
      "title": "Where to stay",
      "pousadas": 
     [
        {
            "beach": "Arrastão",
            "name": "Hotel Arrastão",
            "address": "Avenida Dr. Manoel Hipólito Rego 2097",
            "phone": "+55(12)3862-0099",
            "Email": "hotelarrastao_reserva@hotmail.com",
            "image": "test.jpg",
            "latitude": "-23.753355",
            "longitude": "-45.401946"
       }
    ]
  }

] 
```

以及detailTableView.m中的tableView：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return self.stayGuide.count;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"detailCellStay"]; 
```

以下是我的试训：

```
 NSString *pous = [self.stayGuide valueForKey:@"name"];

    NSLog([self.stayGuide valueForKey:@"name"]);

    cell.textLabel.text = pous;

    return cell;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:16:02.207

您正在错误地阅读 JSON！让我们看一下您的数据：

```
[ <---- array
    { <---- dictionary
        "title": "Where to stay",
        "pousadas": [ <---- array
            { <---- dictionary
                "beach": "Arrastão",
                "name": "Hotel Arrastão",
                "address": "Avenida Dr. Manoel Hipólito Rego 2097",
                "phone": "+55(12)3862-0099",
                "Email": "hotelarrastao_reserva@hotmail.com",
                "image": "test.jpg",
                "latitude": "-23.753355",
                "longitude": "-45.401946"
            }
        ]
    }
] 
```

假设您将数据存储在“stayGuide”属性（应该是 NSArray 类型）中，您可以像这样访问初始字典：

```
NSDictionary *initialDictionary = [self stayGuide][0]; // access using new Objective-C literals 
```

现在，您可以在此处访问各种值，例如“pousadas”数组。

```
NSArray *pousadas = initialDictionary[@"pousadas"]; 
```

现在，就像我们对初始字典所做的那样，我们可以访问 pousadas 数组中的第一个对象。

```
NSDictionary *dictionary = pousadas[0]; 
```

最后，我们可以在第一个 pousadas 字典中访问其中一些键。

```
NSString *beach = dictionary[@"beach"];
NSString *name = dictionary[@"name"];
NSString *address = dictionary[@"address"];

NSLog(@"Beach: %@, Name: %@, Address: %@"beach,name,address); 
```

不过，将来您可能希望 stayGuide 属性等于 pousadas 数组。您可以这样设置（其中 initialJSONArray 是您的起始 JSON 数据）：

```
[self setStayGuide:initialJSONArray[0][@"pousadas"]]; 
```

# java - 完成后刷新文本EditText（）

> ID：15013898
> 
> 赞同：0
> 
> 时间：2013-02-21T23:01:46.213
> 
> 标签：java, android, android-activity

我使用创建了一个“新文件”活动

```
startActivityForResult(new Intent(MainActivity.this, NewFile.class),1); 
```

NewFile 活动允许用户为其文本文件设置某些选项，然后在单击按钮后将字符串保存到我的 StringBuilder 类中的静态变量并完成（）；叫做。如何将这个新字符串加载到 MainActivity 的 EditText 中？onCreate() 仅在首次创建活动时才调用，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:18:13.347

在 onResume 或 onActivityResult 上执行此操作。虽然 onActivityResult 是理想的，因为您已经使用了 startActivityForResult，在完成其他活动之前，如果您打算发回或者没有 setResult(int resultCode)，则设置 setResult(int resultCode, Intent data)。我认为最好将用于更新 EditText 的字符串作为额外的意图放在意图中，然后在 onActivityResult 方法中使用该字符串设置文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:12:24.657

在你的课上`NewFile.java`：

```
String strName = "toto";
Intent intent = new Intent();
intent.putExtra("name", "toto");
setResult(1, intent);
finish(); 
```

在你的`MainActivity.java`：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == 1) {
      if (resultCode == RESULT_OK) {
          // Handle successful result
          String name  = intent.getStringExtra("name");
          editText.setText(name);
      }
    }
} 
```

有关更多说明，请参阅本[教程](http://www.mybringback.com/tutorial-series/12204/onactivityresult-android-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T23:11:58.720

```
@Override
    protected void onResume() {
        super.onResume();
        et.setText(DocumentBuilder.docText);
    } 
```

# c++ - 使用两组 3d 线段估计系统误差

> ID：15013901
> 
> 赞同：-1
> 
> 时间：2013-02-21T23:01:55.480
> 
> 标签：c++, math, statistics, geometry, computational-geometry

> 我有一组来自两种不同方法的 3D 线段。这些线段代表几个 3d 立方体和多边形的边缘。
> 
> (1) 第一组线段是通过现场测量得出的。(2) 第二组线段是使用两张重叠的照片并构建 3d 线得出的。
> 
> 众所周知，我的第二个线段相对于第一组的线段有轻微的变化。（我假设我的第一组作为参考。）我想估计每个 3d 线段的误差，以便估计我的摄影方法中的任何系统模式。我想不出最好的方法来估计我的 3d 线构造的错误。例如，我正在考虑测量相应的 3dline 线段之间的角度差，以及它们之间的中点距离（彼此之间）可以计算出来。

**这些类型的东西可以被视为统计措施吗？但是，我认为这还不够或不能说任何模式或系统错误..（对不起我的统计知识很差）**

任何关于好的措施和方法的建议都值得期待。谢谢。

注意：（当我从图像数据中提取线时，3D 线段的长度不等于通过现场观察测量的线段。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T07:18:42.367

在您的情况下，我将只使用段的末端（因为段完全由这些末端定义）进行一些测试。

您可以做的第一件事是收集测量的四肢和重建的四肢（作为向量）之间的差异，并绘制它们以查看是否可以发现趋势。

更准确地说，如果您的测量段是 [A_i,B_i] 并且您的重构段是 [P_i,Q_i]，那么您将收集差异 A_i-P_i 和 B_i-Q_i（这些是向量）。现在，只需将所有这些差异绘制在一个图上即可。假设你在 2D 中，如果你没有系统误差，你看到的点云应该看起来像一个以 0 为中心的圆盘。如果圆盘不是以 0 为中心，那么你所有的测量都有一个共同的偏差给定的方向。如果点云看起来像一个椭球体，这意味着你在一个方向上有一个更大的误差。你可以在 3D 中做同样的事情，你应该得到一个球体（或者可以投影到 xy、xz 和 yz 计划并检查磁盘）。

进一步的测试可以包括构建 6D 向量，其前 3 个分量是 A_i-P_i，最后一个分量是 B_i-Q_i。用这个新的点云重做同样的事情（现在你必须将它投影到 3D 或 2D 才能看到结果）。第二个测试可以帮助您跟踪四肢之间误差的相关性。我会特别看一下 x_1-x_4、x_2-x_5 和 x_3-x_6 上的预测，看看我是否获得了磁盘。

最后，如果你真的想进行统计测试，你可以采取上面提到的两点云：

*   使用[t 检验检查均值是否与 0 没有显着差异](http://en.wikipedia.org/wiki/Student%27s_t-test)
*   [使用线性回归和ANOVA 分析](http://en.wikipedia.org/wiki/Analysis_of_variance)检查是否存在主要趋势

希望能帮助到你！

编辑：由于您提到了 C++，因此对于可视化，您可以将结果导出到文本文件（或 CSV）并使用例如 octave 读取它。

# c# - MiniProfiler“共享”链接不显示任何内容

> ID：15013903
> 
> 赞同：1
> 
> 时间：2013-02-21T23:02:01.050
> 
> 标签：c#, mvc-mini-profiler

当我单击“共享”时，它加载的屏幕没有内容。即使我查看源代码也没有任何东西。

我已经`MiniProfiler.Settings.Results_Authorize = r => true;`在 global.asax BeginRequest中设置了

当我将 auth 设置为 false 时，它​​显示“隐藏”，因此我知道请求正在路由到 MiniProfiler 处理程序。

有任何想法吗？

![分享链接](../Images/ef4fa4baffc6ed3ff34a743af3bfc784.png)

![无内容](../Images/c455b6c5b66bb143c123151a83afba6d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:49:36.800

好吧，我把它修好了……ish。或者更确切地说，他们修复了它。

显然这是 NuGet dll 中的一个错误。

当我从 miniprofiler.com 下载源代码时，构建它，然后单击“共享”，一切都很好。

![源代码](../Images/932aff1875afbce245457dd62f55b9e8.png)

# c++ - 链接库 C++ 的问题

> ID：15013907
> 
> 赞同：0
> 
> 时间：2013-02-21T23:02:11.913
> 
> 标签：c++, c, netbeans

我的问题是我无法将库包含到我当前的项目中。[将netbeans中的库包含到项目中的方法是通过链接器将其链接到项目]。但是，在我当前的项目（由离开组织的另一位程序员编写）中，没有出现链接器选项。我附上了截图。我面临的问题是通过链接器将库链接到我当前项目的选项未出现在 IDE 中。有人可以请帮助我。我也会非常感谢你。

请指导我如何将库链接到我的项目。我真的花了很多天来做这件事，但我没有成功。![截屏](../Images/1be0d013deff9aa878d792a204860b38.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:29:30.490

假设您只对 libspatialindex 感兴趣：

1.  确保您安装了适当的文件：尝试 a`locate libspatialindex`并查看它的安装位置。您可以有 *.a、*.so 或类似的扩展名。注意路径。
2.  进入你的项目根目录，即：/home/keira/netbeans/projects/myproject
3.  尝试：`gcc -i main.cpp -L/usr/lib/ -lspatialindex -o myfile`

将 -L/usr/lib 替换为您知道库所在的实际位置。

cxx 链接标志通常是带有 -l 前缀的库的名称。例如，如果在系统中找到的名称是`libspatialindex.so`一个不错的选择`-lspatialindex`。

有一种方法可以在 Debian 和 Ubuntu 系统上找到实际标志，但我不记得了。或者，您可以随时查看 google 或阅读库文档。

当您通常看到带有未定义函数等的链接器错误时，这意味着您没有进行链接，前提是您已经包含了标头并找到了它们。

现在对于 Netbeans，我假设可以选择将额外的参数传递给编译器。在这种情况下，您只需要`-lspatialindex`标志，前提是 Netbeans 知道在哪里可以找到库和标头。这就是它在 KDevelop 和我使用过的其他 IDE 中的工作方式。

或者，如果您想要更多控制和更多自动化，您可能需要使用像 cmake 这样的工具。

# excel - 在 Excel 中创建忽略 #N/A 或空白单元格的图表

> ID：15013911
> 
> 赞同：48
> 
> 时间：2013-02-21T23:02:40.677
> 
> 标签：excel

我正在尝试使用动态数据系列创建图表。图表中的每个系列都来自一个绝对范围，但该范围中可能只有一定数量的数据，其余的将是`#N/A`.

问题是图表将所有`#N/A`单元格作为值而不是忽略它们。我已经通过使用命名动态范围（即插入>名称>定义）来解决它，但这是非常低效的，因为每个图表都有4个动态系列，我必须制作25个这样的图表。

**是否有任何其他解决方案允许我像​​往常一样为数据系列指定范围，但告诉图表忽略所有“#N/A”或空白单元格？**

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-05-16T21:37:08.080

通过使用 IF 语句将不需要的值返回给“”，我遇到了同样的问题，并且图表会按照您的描述进行。

但是，当我使用`#N/A`而不是`""`（重要，请注意它没有引号，如 in`#N/A`和 not `"#N/A"`）时，图表忽略了无效数据。我什至尝试输入一个无效的`FALSE`语句，它的工作原理相同，唯一的区别是`#NAME?`作为单元格中的错误而不是`#N/A`. 我将使用一个虚构的 IF 语句来向您展示我的意思：

```
=IF(A1>A2,A3,"")  
---> Returned "" into cell when statement is FALSE and plotted on chart 
     (this is unwanted as you described)

=IF(A1>A2,A3,"#N/A")  
---> Returned #N/A as text when statement is FALSE and plotted on chart 
     (this is also unwanted as you described)

=IF(A1>A2,A3,#N/A)  
---> Returned #N/A as Error when statement is FALSE and does not plot on chart (Ideal)

=IF(A1>A2,A3,a)  
---> Returned #NAME? as Error when statement is FALSE and does not plot on chart 
    (Ideal, and this is because any letter without quotations is not a valid statement) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-22T01:15:35.443

当您将图表引用到定义的范围时，它会绘制该范围内的所有点，将（为了绘图）错误和空白解释为空值。

![#N/A 值为 null 的图表](../Images/a819677f3f9726c9080468c8866a2370.png)

您可以选择将其保留为空（间隙）或将其强制为零值。但是这些都没有调整图表系列数据指向的范围。据我所知，这些都不合适。

![图表隐藏/空单元格选项](../Images/154dc36f437f574fb0c475ea39d261cf.png)

如果您隐藏存在 #N/A 数据**的整个行/列，图表应完全忽略这些。**您可以通过右键单击 | 手动执行此操作。隐藏行，或使用表自动筛选。我认为这是你想要完成的。

![具有隐藏源数据行的图表会忽略隐藏数据](../Images/8a2c22cf6934da0d253bc256fec85d20.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-07-26T18:56:27.417

请注意，在绘制折线图时，使用 =NA()（输出 #N/A）来避免绘制不存在的值仅适用于每个系列的结尾、第一个值和最后一个值。其他两个值之间的任何 #N/A 都将被忽略和桥接。

![示例图在这里](../Images/d6ecd9a7e34597856684ffbb9d75d786.png)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-01-23T16:12:33.430

您是正确的，空格“”或字符串“#N/A”确实被解释为在 excel 中具有值。您需要使用函数 NA()。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-05-02T15:33:36.370

如果您有要散点图的`x`and列，但并非其中一列中的所有单元格都填充了有意义的值（即其中一些具有），则在有问题的列旁边插入一个新列并键入，其中**A2**是违规列中的值。`y``#DIV/0!``=IFERROR(A2, #N/A)`

 **`#N/A`如果有 a ，这将返回`#DIV/0!`，否则将返回良好的值。现在用你的新列绘制你的图，Excel 会忽略`#N/A`值并且不会将它们绘制为零。

**重要提示**：不要`"#N/A"`在公式中输出，只需输出`#N/A`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-22T16:47:55.733

您可以使用函数“=IF(ISERROR(A1);0;A1)”，如果单元格 A1 包含错误，则该函数将显示为零，否则将显示实际值。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-12-21T06:12:37.880

我遇到了同样的问题。

`Bar chart`a和 a是有区别的`Stacked Bar chart`

`Line chart`因为 a和 a之间有区别`Stacked Line chart`。

堆叠的，不会忽略 0 或空白值，而是会根据其他图例显示一个累积值。

只需右键单击图表，单击`Change Chart Type`并选择一个非堆叠图表。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-27T18:40:25.827

只是想把我的2cents放在这个问题上......

我有类似的需求，我通过 INDEX/MATCH 从另一个表中提取数据，并且由于不匹配而很难区分真正的 0 值和 0 值（例如，对于显示进度的柱形图） 12 个月的值，我们仅在 2 月，但其余月份的数据尚不可用，柱形图仍显示 0 到 3 月至 12 月的所有地方）

我最终做的是创建一个**新**系列并将这个新系列绘制在图表上作为**折线图**然后我通过选择不在选项中显示线来隐藏折线图并将数据标签放在顶部，公式这个新系列的值类似于：

=IF(LEN([@[column1]])=0, **NA()** ,[@[column1]])

我使用 LEN 作为验证，因为 ISEMPTY/ISBLANK 不起作用，因为 INDEX/MATCH 的结果总是返回除空白以外的其他内容，即使我在 IFERROR 之后放了一个“”...

在折线图上，错误值 NA() 使得该值不显示......所以这对我来说很有效......

我想在没有图片的情况下遵循此过程有点困难，但我希望它描绘出某种图片，以便您在遇到类似我的情况时使用解决方法

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-06T23:17:25.800

还有另一种鲜为人知的解决方案在某些地方有优点。使用#NULL！不绘图且不为绘图创建零点的错误。

因此，您的绘图列充满了以下构造。假设 A 列中的真实数据和绘图版本在 C 列中。

=If(Isnumber(A2),A2,A2 A3)

该空间是一个鲜为人知的运算符，用于产生两个单元格地址或范围的交集。如果没有交集，则生成消息#NULL！

包含#NULL 的单元格！出于绘图目的而被跳过。

除了（对于微软）只需要让数学方程以某种方式忽略这些单元格？

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-28T08:33:30.163

一种解决方案是**图表/图形不显示隐藏行**。

您可以测试此功能：1）右键单击行号 2）单击隐藏。

为了自动完成，这是简单的代码：

```
For Each r In worksheet.Range("A1:A200")
   If r.Value = "" Then 
      r.EntireRow.Hidden = True 
   Else: 
      r.EntireRow.Hidden = False
Next 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-03-28T16:04:54.373

这是我发现的，因为我只绘制了每 4 列集中在一起的 3 个单元格。我的图表有一个合并的单元格，日期是我的 x 轴。问题：BC26-BE27 在我的图表上绘制为零。[在此处输入图像描述](https://i.stack.imgur.com/LuftH.png)

我单击图表侧面的过滤器，发现它显示了所有列的数据点图表。我取消选中没有值的框。 [在此处输入图像描述](https://i.stack.imgur.com/VzDfI.png)

它对我有用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-10-25T05:26:31.903

我在使用 X/Y 图表时遇到了类似的问题，但随后还需要计算两组数据的相关函数。

`=IF(A1>A2,A3,#N/A)`允许绘制图表，但`X`&的相关性`Y`失败。

我解决了这个问题 `=IF(A1>A2,A3,FALSE)`

FALSE 然后可以`removed`使用条件格式或其他技巧

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-10-28T03:10:25.227

我找到了一种方法。

你可以做一个 x,y 散点图。它将忽略空记录（即行）

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-01-02T14:43:27.713

如果您使用 PowerPivot 和 PivotChart，您将排除不存在的行。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-10-28T04:54:09.333

如果您使图表上的垂直刻度（使用格式轴）从 0.0001（例如）开始，则不会绘制 Excel 认为为零的值。图表中的轴看起来仍然像从零向上运行。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-03-28T23:04:52.390

虽然这是一篇旧帖子，但我最近在寻找相同问题的解决方案时遇到了它。虽然上述解决方案确实阻止了图表绘制数据（当源单元格为 #N/A 或看起来空白时），但它并不能解决图表数据标签本身仍显示零标签的问题。

当我遇到在线发布的解决方案@ [https://www.extendoffice.com/documents/excel/2031-excel-hide-zero-data-labels.html时，我已经搜索和搜索并且几乎放弃了](https://www.extendoffice.com/documents/excel/2031-excel-hide-zero-data-labels.html)

它的工作就像一个魅力。附件是一个图像，显示了数据（标签）如何显示之前的示例，图表#1，以及它如何使用此提示图表#2 显示。

[在此处输入图像描述](https://i.stack.imgur.com/n4lpr.jpg)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-02-14T15:42:18.580

选择栏上方的标签。格式化数据标签。而不是选择“VALUE”（取消单击）。从单元格中选择值。选择值。使用以下语句： if(cellvalue="","",cellvalue) 其中 cellvalue 是单元格中的计算内容。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-09-15T12:58:42.363

我遇到了同样的问题，出现了整行。

我的数据末尾只有#N/A。

当我将图表类型从**堆积线**更改为**线**时，线的末端从图表中删除。

如果 #N/A 位于数据中间，则此方法不起作用，仅当它位于尾随数据中时。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-07-27T09:38:19.743

我找到了以下解决方案：

如果不应包含在轴时间范围内的所有日期系列单元格包含 ，则 Excel 图表会自动调整到正确的轴结束`""`。因此，您可以创建一个辅助列并将类似这样的内容写入日期系列辅助列单元格：

```
Helper Column Datecell = If( iserror (ValueCell);""; Datecell) 
```

另一方面，如果您想将图表调整为给定的时间范围，您可以在辅助列日期系列单元格中写入类似的内容：

```
Helper Column Datecell = IF(  OR(ISERROR(ValueCell); DateCell>DateInput)   ;"";DateCell) 
```

DateInput 是一个单元格，您可以在其中输入日期以调整图表大小。

* * *

这里还有一个话题：

关于这一点，如果您为值系列单元格创建一个帮助列，`NA() Error`则值系列也会根据您的系列进行调整：您甚至可以使您的值系列单元格依赖于给定的输入单元格。我认为这也是需要的。

```
Helper Column Value Cell: if( condition that date cell is too big or bigger than a given input cell; NA(); ValueCell) 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2016-12-16T19:35:20.593

最好的方法是使用**Empty**

```
Dim i as Integer
For i = 1 to 1000
    If CPT_DB.Cells(i, 1) > 100 Then
       CPT_DB.Cells(i, 2) = CPT_DB.Cells(i, 1)
    Else
       CPT_DB.Cells(i, 2) = Empty //**********************
    End If
Next i 
```**

# javafx-2 - 使用 JavaFX 检查形状的碰撞

> ID：15013913
> 
> 赞同：21
> 
> 时间：2013-02-21T23:02:46.243
> 
> 标签：javafx-2, javafx, collision-detection

我正在尝试进行一些碰撞检测。对于这个测试，我使用简单的 rectangle `Shape`，并检查它们的`Bound`, 以确定它们是否发生碰撞。虽然检测没有按预期工作。我尝试使用不同的方法来移动对象（重新定位、setLayoutX、Y）以及不同的边界检查（boundsInLocal、boundsInParrent 等），但我仍然无法让它工作。如您所见，检测仅适用于一个对象，即使您有三个对象也只有一个检测到碰撞。这是一些演示问题的工作代码：

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Cursor;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.input.MouseEvent;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;

import java.util.ArrayList;

public class CollisionTester extends Application {

    private ArrayList<Rectangle> rectangleArrayList;

    public static void main(String[] args) {
        launch(args);
    }

    public void start(Stage primaryStage) {
        primaryStage.setTitle("The test");
        Group root = new Group();
        Scene scene = new Scene(root, 400, 400);

        rectangleArrayList = new ArrayList<Rectangle>();
        rectangleArrayList.add(new Rectangle(30.0, 30.0, Color.GREEN));
        rectangleArrayList.add(new Rectangle(30.0, 30.0, Color.RED));
        rectangleArrayList.add(new Rectangle(30.0, 30.0, Color.CYAN));
        for(Rectangle block : rectangleArrayList){
            setDragListeners(block);
        }
        root.getChildren().addAll(rectangleArrayList);
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public void setDragListeners(final Rectangle block) {
        final Delta dragDelta = new Delta();

        block.setOnMousePressed(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent mouseEvent) {
                // record a delta distance for the drag and drop operation.
                dragDelta.x = block.getTranslateX() - mouseEvent.getSceneX();
                dragDelta.y = block.getTranslateY() - mouseEvent.getSceneY();
                block.setCursor(Cursor.NONE);
            }
        });
        block.setOnMouseReleased(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent mouseEvent) {
                block.setCursor(Cursor.HAND);
            }
        });
        block.setOnMouseDragged(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent mouseEvent) {

                block.setTranslateX(mouseEvent.getSceneX() + dragDelta.x);
                block.setTranslateY(mouseEvent.getSceneY() + dragDelta.y);
                checkBounds(block);

            }
        });
    }

    private void checkBounds(Rectangle block) {
        for (Rectangle static_bloc : rectangleArrayList)
            if (static_bloc != block) {
                if (block.getBoundsInParent().intersects(static_bloc.getBoundsInParent())) {
                    block.setFill(Color.BLUE);        //collision
                } else {
                    block.setFill(Color.GREEN);    //no collision
                }
            } else {
                block.setFill(Color.GREEN);    //no collision -same block
            }
    }

    class Delta {
        double x, y;
    }
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-22T00:15:14.720

看起来您的 checkBounds 例程中有一个轻微的逻辑错误 - 您正确地检测到碰撞（基于边界），但是当您在同一例程中执行后续碰撞检查时覆盖了块的填充。

尝试这样的事情 - 它添加一个标志，以便例程不会“忘记”检测到碰撞：

```
private void checkBounds(Shape block) {
  boolean collisionDetected = false;
  for (Shape static_bloc : nodes) {
    if (static_bloc != block) {
      static_bloc.setFill(Color.GREEN);

      if (block.getBoundsInParent().intersects(static_bloc.getBoundsInParent())) {
        collisionDetected = true;
      }
    }
  }

  if (collisionDetected) {
    block.setFill(Color.BLUE);
  } else {
    block.setFill(Color.GREEN);
  }
} 
```

请注意，您正在执行的检查（基于父项中的边界）将报告包含同一父组中节点可见边界的矩形的交叉点。

*替代实施*

如果您需要它，我更新了您的原始示例，以便它能够根据节点的视觉形状而不是视觉形状的边界框进行检查。这使您可以准确检测非矩形形状（例如圆形）的碰撞。关键是[Shape.intersects(shape1, shape2)](http://docs.oracle.com/javafx/2/api/javafx/scene/shape/Shape.html#intersect%28javafx.scene.shape.Shape,%20javafx.scene.shape.Shape%29)方法。

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.*;
import javafx.scene.input.MouseEvent;
import javafx.scene.paint.Color;
import javafx.stage.Stage;

import java.util.ArrayList;
import javafx.scene.shape.*;

public class CircleCollisionTester extends Application {

  private ArrayList<Shape> nodes;

  public static void main(String[] args) { launch(args); }

  @Override public void start(Stage primaryStage) {
    primaryStage.setTitle("Drag circles around to see collisions");
    Group root = new Group();
    Scene scene = new Scene(root, 400, 400);

    nodes = new ArrayList<>();
    nodes.add(new Circle(15, 15, 30));
    nodes.add(new Circle(90, 60, 30));
    nodes.add(new Circle(40, 200, 30));
    for (Shape block : nodes) {
      setDragListeners(block);
    }
    root.getChildren().addAll(nodes);
    checkShapeIntersection(nodes.get(nodes.size() - 1));

    primaryStage.setScene(scene);
    primaryStage.show();
  }

  public void setDragListeners(final Shape block) {
    final Delta dragDelta = new Delta();

    block.setOnMousePressed(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent mouseEvent) {
        // record a delta distance for the drag and drop operation.
        dragDelta.x = block.getLayoutX() - mouseEvent.getSceneX();
        dragDelta.y = block.getLayoutY() - mouseEvent.getSceneY();
        block.setCursor(Cursor.NONE);
      }
    });
    block.setOnMouseReleased(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent mouseEvent) {
        block.setCursor(Cursor.HAND);
      }
    });
    block.setOnMouseDragged(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent mouseEvent) {
        block.setLayoutX(mouseEvent.getSceneX() + dragDelta.x);
        block.setLayoutY(mouseEvent.getSceneY() + dragDelta.y);
        checkShapeIntersection(block);
      }
    });
  }

  private void checkShapeIntersection(Shape block) {
    boolean collisionDetected = false;
    for (Shape static_bloc : nodes) {
      if (static_bloc != block) {
        static_bloc.setFill(Color.GREEN);

        Shape intersect = Shape.intersect(block, static_bloc);
        if (intersect.getBoundsInLocal().getWidth() != -1) {
          collisionDetected = true;
        }
      }
    }

    if (collisionDetected) {
      block.setFill(Color.BLUE);
    } else {
      block.setFill(Color.GREEN);
    }
  }

  class Delta { double x, y; }
} 
```

示例程序输出。在示例中，圆圈已被拖动，用户当前正在拖动一个圆圈，该圆圈已标记为与另一个圆圈碰撞（通过将其涂成蓝色） - 出于演示目的，只有当前被拖动的圆圈标记了它的碰撞颜色。

![碰撞](../Images/f33dfbafeed34cbdde655e77dc83ac72.png)

*基于其他问题的评论*

我在之前的评论中发布到[交叉点演示应用程序](https://gist.github.com/jewelsea/1441960)的链接是为了说明各种边界类型的使用，而不是作为特定类型的碰撞检测示例。对于您的用例，您不需要更改侦听器的额外复杂性并检查各种不同类型的边界类型 - 只需选择一种类型就足够了。大多数碰撞检测只对视觉边界的交集感兴趣，而不是其他 JavaFX 边界类型，例如布局边界或节点的局部边界。所以你可以：

1.  检查交叉点`getBoundsInParent`（就像您在原始问题中所做的那样），它适用于将包含节点的视觉末端的最小矩形框或
2.  `Shape.intersect(shape1, shape2)`如果您需要根据节点的视觉形状而不是视觉形状的边界框进行检查，请使用该例程。

> 我应该对矩形使用 setLayoutX 还是 translateX

layoutX和[layoutY](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#layoutXProperty%28%29)属性用于定位或布局节点。[translateX](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#translateXProperty%28%29)和 translateY 属性用于临时更改节点的视觉位置（例如，当节点正在进行动画时）。对于您的示例，尽管任一属性都可以使用，但使用布局属性可能比使用翻译属性更好，这样如果您确实想在节点上运行类似[TranslateTransition](http://docs.oracle.com/javafx/2/api/javafx/animation/TranslateTransition.html)的东西，那么开始和end translate 值应该是因为这些值将相对于节点的当前布局位置而不是父组中的位置。

您可以在示例中使用这些布局并同时转换坐标的另一种方法是，如果您在拖动操作过程中有类似 ESC 的东西要取消。您可以将 layoutX,Y 设置为节点的初始位置，启动设置 translateX,Y 值的拖动操作，如果用户按下 ESC，则将 translateX,Y 设置回 0 以取消拖动操作或用户释放鼠标将 layoutX,Y 设置为 layoutX,Y+translateX,Y 并将 translateX,Y 设置回 0。其想法是，平移值用于临时修改节点从其原始布局位置的视觉坐标。

> 即使圆圈是动画的，相交会起作用吗？我的意思是不用鼠标拖动圆圈，如果我让它们随机移动会发生什么。在这种情况下颜色也会改变吗？

为此，只需更改调用碰撞检测函数和调用碰撞处理程序的位置。不是基于鼠标拖动事件检查交叉点（如上面的示例），而是检查每个节点上的更改侦听器内的冲突[`boundsInParentProperty()`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#boundsInParentProperty--)。

```
block.boundsInParentProperty().addListener((observable, oldValue, newValue) -> 
        checkShapeIntersection(block)
); 
```

注意：如果你有很多动画形状，那么在[游戏循环](https://carlfx.wordpress.com/2012/04/09/javafx-2-gametutorial-part-2)中每帧检查一次碰撞将比在任何节点移动时运行碰撞检查更有效（如上面的 boundsInParentProperty 更改侦听器中所做的那样）。

**用于处理非矩形形状输入的附加信息**

对于输入检测而不是碰撞检测，因此与您的问题没有直接关系，[`node.pickOnBounds`](https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/Node.html#pickOnBoundsProperty)如果您需要与非矩形节点进行鼠标或触摸交互，请查看设置。

# python - Elif 无效？

> ID：15013916
> 
> 赞同：-5
> 
> 时间：2013-02-21T23:03:11.513
> 
> 标签：python, sqlite

这段代码：

```
def viewdetails():
    os.system('cls')
    print "|__________________________________________|"
    print "|----------------View Details--------------|"
    print "|------------------------------------------|"
    print "|1 - Search with Customer ID               |"
    print "|2 - Search with Telephone number          |"
    print "|------------------------------------------|"
    choice = raw_input("|Choice: ")
    if choice == "1":
        while True:
            IDSearch = raw_input("|What is their ID? : ")
            conn = sqlite3.connect('SADS.db')
            cur = conn.cursor()
            cur.execute("SELECT * FROM customers WHERE CustID = (?)",(IDSearch,))
            row = cur.fetchone()
            if row[0] != IDSearch:
                print "|------------------------------------------|"
                print "|          Invalid ID, Try again!          |"
                print "|------------------------------------------|"
            else:
                break
        CustID = row[0]
        print "|------------------------------------------|"
        print "|Customer ID : " , row[0]
        print "|Forename : " , row[1]
        print "|Surname : " , row[2]
        print "|Address Line 1 : " , row[3]
        print "|Address Line 2 : " , row[4]
        print "|City : " , row[5]
        print "|Postcode : " , row[6]
        print "|Telephone number : " , row[7]
        print "|E-Mail : " , row[8]
        while True:
            print '|Do you want to see what seats', row[1], 'has booked?|'
            choice = raw_input("|Y/N: ")
            if choice == 'Y':
                cur.execute("SELECT * FROM seats WHERE CustID = (?)", (CustID,))
                rowseat = cur.fetchone()
                if rowseat:
                    print "|Seats booked:" , rowseat[0]
                    print "|------------------------------------------|"
                    break
                else:
                    print "|" , row[1] , "Hasnt booked any seats."
                    break
    print(" ")
    print "|------------------------------------------|"
    print("|Please select an option:                  |")
    print("|1 - Return to menu                        |")
    print("|2 - Book seats                            |")
    print("|3 - Edit details                          |")
    choice = raw_input("|Please put choice here : ")
    print "|------------------------------------------|"
    elif choice == "2":
        while True:
            IDSearch = raw_input("|What is their ID? : ")
            conn = sqlite3.connect('SADS.db')
            cur = conn.cursor()
            cur.execute("SELECT * FROM customers WHERE CustID = (?)",(IDSearch,))
            row = cur.fetchone()
            if row[0] != IDSearch:
                print "|------------------------------------------|"
                print "|          Invalid ID, Try again!          |"
                print "|------------------------------------------|"
            else:
                break
        CustID = row[0]
        print "|------------------------------------------|"
        print "|Customer ID : " , row[0]
        print "|Forename : " , row[1]
        print "|Surname : " , row[2]
        print "|Address Line 1 : " , row[3]
        print "|Address Line 2 : " , row[4]
        print "|City : " , row[5]
        print "|Postcode : " , row[6]
        print "|Telephone number : " , row[7]
        print "|E-Mail : " , row[8]
        while True:
            print '|Do you want to see what seats', row[1], 'has booked?|'
            choice = raw_input("|Y/N: ")
            if choice == 'Y':
                cur.execute("SELECT * FROM seats WHERE CustID = (?)", (CustID,))
                rowseat = cur.fetchone()
                if rowseat:
                    print "|Seats booked:" , rowseat[0]
                    print "|------------------------------------------|"
                    break
                else:
                    print "|" , row[1] , "Hasnt booked any seats."
                    break
    print(" ")
    print "|------------------------------------------|"
    print("|Please select an option:                  |")
    print("|1 - Return to menu                        |")
    print("|2 - Book seats                            |")
    print("|3 - Edit details                          |")
    choice = raw_input("|Please put choice here : ")
    print "|------------------------------------------|"
    print(" ")
    print "|------------------------------------------|"
    print("|Please select an option:                  |")
    print("|1 - Return to menu                        |")
    print("|2 - Book seats                            |")
    print("|3 - Edit details                          |")
    choice = raw_input("|Please put choice here : ")
    print "|------------------------------------------|"
    if choice == "1":
        mainprogram()
    elif choice == "2":
        availablity()
    elif choice == "3":
        editdetails()
    os.system('cls')

viewdetails() 
```

( [http://pastebin.com/X62jRLiL](http://pastebin.com/X62jRLiL) )

获取 elif 语句`elif choice == "2":`显然是一种无效的语法，但`elif choice == "1":`作品和下面的代码是彼此的精确复制品吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:04:47.240

Python 代码需要正确缩进。

否则无效。

这可能是您了解 Python 的第一件事（所以请拿起一本书，例如“Thinking in Python”）；同时，最受批评的事情（至少是非用户）。

有效代码示例：

```
if a == "1":
    echo "Apples"
elif b == "2":
    echo "Bananas" 
```

由于**缩进错误**导致的无效代码：

```
if a == "1":
echo "Apples"
elif b == "2":
    echo "Bananas" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:09:16.163

您正在混合制表符和空格，不要那样做。使用以下方式运行脚本：

```
python -tt yourscript.py 
```

去哪里找。将所有制表符替换为空格，将编辑器配置为仅使用空格进行缩进。

# css - 子导航与最长的子项一样长

> ID：15013921
> 
> 赞同：0
> 
> 时间：2013-02-21T23:03:47.180
> 
> 标签：css

我的导航菜单有问题。这是我的CSS：

```
ul.main {
        background-color: #CCC;
        display: inline-block;
}

ul.main > li {
        list-style-type: none;
        display: inline-block;
        position: relative;

}

ul.subNav {
        background-color: #333;
        color: #FFF;
        padding: 0;
        margin: 0;
        position: absolute;
}

ul.subNav li {
        list-style-type: none;
        padding: 0;
        margin: 0;
} 
```

我要做的是使我的子导航与菜单中最长的子项一样宽，因此与最长的子项`ul.subNav`一样宽`li`。我似乎无法做到这一点。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:09:33.627

如果我理解正确，您将需要`white-space: nowrap`subNav`li`元素：

```
ul.subNav li {
        list-style-type: none;
        padding: 0;
        margin: 0;
        white-space: nowrap;
} 
```

这是一个[工作演示](http://jsfiddle.net/jWsHg/)。如果您想了解更多，这里有一些关于该物业的链接：

*   [W3 Wiki 页面上的空白](http://www.w3.org/wiki/CSS/Properties/white-space)
*   [空白页面上的 MDN 页面](https://developer.mozilla.org/en-US/docs/CSS/white-space)（轻量级页面）
*   [关于空白的 W3 规范](http://www.w3.org/TR/CSS21/text.html#white-space-prop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:19:46.650

Jeroen 是对的，他打败了我。`white-space: nowrap;`会成功的。这是我制作的 2 个工作演示：

[不带包装](http://jsfiddle.net/mk3Q9/)

[没有 nowrap](http://jsfiddle.net/3SMwE/)

# php - 分页php多个查询同时

> ID：15013924
> 
> 赞同：0
> 
> 时间：2013-02-21T23:03:53.250
> 
> 标签：php, sql

您好我的问题如下：我已经根据结果页面进行了划分..问题是afiserea结果我有以下代码：

```
<?php
  include('ttt_files/paginare.php');  
  $rezultate_pe_pagina = '2';
  $statement = "`anunt_standard` where `activat` = 0  AND prs_prv='$filtru_p' ";
  /* Inceputul stabiliri functiei numaratorelor */
  $page = (int) (!isset($_GET["page"]) ? 1 : $_GET["page"]);
  $limit = $rezultate_pe_pagina;
  $startpoint = ($page * $limit) - $limit;
  //Query pentru afisere si paginare
  /* Sfarsitul stabiliri functiei numaratorelor */
  $url = "{$server_url}anunturi/f/{$_GET['f']}/page/";
  echo "<div id='asezare_butoane'>".pagination($statement,$limit,$page,$url)."</div>";

  //afiseaza inregistrarile platite
  $query_pay = mysql_query("
                 SELECT * FROM {$statement} AND activat_plata = '1' 
                 AND sters = '0' ORDER BY data_adaugare DESC  LIMIT {$startpoint} ,
                 {$limit}");

  echo "
  <table border='0' width='950px' 
    style='border-collapse:separate; border-spacing:0px  5px;'>";         
  $i = 0;     
  while ($row = mysql_fetch_assoc($query_pay)) {
        include('continut_platit.php');              
  }             
  echo "</table>";
  //afiseaza inregistrarile normale
  $query = mysql_query("
                 SELECT * FROM {$statement} AND sters = '0' 
                 AND activat_plata = '0' 
                 ORDER BY data_adaugare DESC 
                 LIMIT {$startpoint} , {$limit}");

   echo "
       <table border='0' width='950px' 
          style='border-collapse:separate; border-spacing:0px 5px;'>";   
                 $i = 0;
      while ($row = mysql_fetch_assoc($query)) {
            include('continut.php');

       }

       echo "</table>";

       //afiseaza inregistrarile sterse
       $query_del = mysql_query("
              SELECT * FROM {$statement} 
              AND sters = '1' 
              ORDER BY data_adaugare DESC 
              LIMIT {$startpoint} , {$limit}");

       echo "<table border='0' width='950px' style='border-collapse:separate; border-spacing:0px 5px;'>";

                 $i = 0;

                   while ($row = mysql_fetch_assoc($query_del)) {
                        include('continut_sters.php');

                        }

                 echo "</table>";
?> 
```

问题是它不显示每页 2 个结果，因为它现在设置显示每个查询的结果 2 即粘贴总共 6 个结果： 2 - $ query_pay 2 - $ query 2 - $ query_del 但是请弄清楚如何制作它仅显示 2 例如如果添加 2 条记录“支付”以仅在这 2 条上显示，则为第一页。或者如果您只有 2 条记录，则查询仅显示那 2 条：（分页功能

```
 <?php
   function pagination($query, $per_page = 10,$page = 1, $url = '?'){  
           $query = "SELECT COUNT(*) as `num` FROM {$query}";
           $row = mysql_fetch_array(mysql_query($query));
           $total = $row['num'];
                $adjacents = "2";
           $page = ($page == 0 ? 1 : $page);
           $start = ($page - 1) * $per_page;                                       

           $prev = $page - 1;                                   
           $next = $page + 1;
                $lastpage = ceil($total/$per_page);
           $lpm1 = $lastpage - 1;

           $pagination = "";
           if($lastpage > 1)
           {  
                  $pagination .= "<ul class='pagination'>";
                                        //$pagination .= "<li class='details'>Pagina $page din $lastpage</li>";
                  if ($lastpage < 7 + ($adjacents * 2))
                  {  
                         for ($counter = 1; $counter <= $lastpage; $counter++)
                         {
                                if ($counter == $page)
                                   $pagination.= "<li><a class='current'>$counter</a></li>";
                                else
                                   $pagination.= "<li><a href='{$url}$counter/'>$counter</a></li>";                       
                         }
                  }
                  elseif($lastpage > 5 + ($adjacents * 2))
                  {
                         if($page < 1 + ($adjacents * 2))        
                         {
                                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                                {
                                   if ($counter == $page)
                                          $pagination.= "<li><a class='current'>$counter</a></li>";
                                   else
                                          $pagination.= "<li><a href='{$url}$counter/'>$counter</a></li>";                        
                                }
                                $pagination.= "<li class='dot'>...</li>";
                                $pagination.= "<li><a href='{$url}$lpm1/'>$lpm1</a></li>";
                                $pagination.= "<li><a href='{$url}$lastpage/'>$lastpage</a></li>";       
                         }
                         elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
                         {
                                $pagination.= "<li><a href='{$url}1/'>1</a></li>";
                                $pagination.= "<li><a href='{$url}2/'>2</a></li>";
                                $pagination.= "<li class='dot'>...</li>";
                                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                                {
                                   if ($counter == $page)
                                          $pagination.= "<li><a class='current'>$counter</a></li>";
                                   else
                                          $pagination.= "<li><a href='{$url}$counter/'>$counter</a></li>";                        
                                }
                                $pagination.= "<li class='dot'>..</li>";
                                $pagination.= "<li><a href='{$url}$lpm1/'>$lpm1</a></li>";
                                $pagination.= "<li><a href='{$url}$lastpage/'>$lastpage</a></li>";       
                         }
                         else
                         {
                                $pagination.= "<li><a href='{$url}1/'>1</a></li>";
                                $pagination.= "<li><a href='{$url}2/'>2</a></li>";
                                $pagination.= "<li class='dot'>..</li>";
                                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                                {
                                   if ($counter == $page)
                                          $pagination.= "<li><a class='current'>$counter</a></li>";
                                   else
                                          $pagination.= "<li><a href='{$url}$counter/'>$counter</a></li>";                        
                                }
                         }
                  }

                  if ($page < $counter - 1){

                 $pagination.= "<li><a href='{$url}$next/'>Urmatoarea</a></li>";
                                //$pagination.= "<li><a href='{$url}page=$lastpage'>Ultima</a></li>";
                  }else{
                         $pagination.= "<li><a class='current'>Urmatoarea</a></li>";
                                //$pagination.= "<li><a class='current'>Ultima</a></li>";
                        }
                  $pagination.= "</ul>\n";       
           }

                return $pagination;
        }
?> 
```

I thought to count total results above and to create a condition that is nustiu posters but how to put condition. Or to put the 3 above the query results and number then I gather and share their work at 3:01 so? But go to a function and not know how to think

* * *

```
mysql_query("SELECT u.* FROM (
                                (SELECT * FROM anunt_standard WHERE `activat_plata`='1' AND `sters`='0' AND `activat`='0' ORDER BY data_adaugare DESC)
                                UNION
                                (SELECT * FROM anunt_standard WHERE `activat_plata`='0' AND `sters`='0' AND `activat`='0' ORDER BY data_adaugare DESC)
                                UNION
                                (SELECT * FROM anunt_standard WHERE `sters`='1' AND `activat`='0' ORDER BY data_adaugare DESC)
                                ) As u  LIMIT {$startpoint} , {$limit}")or die(mysql_error()); 
```

Thanks for the idea but the problem is that they fail to display in the order you want ... I mean nothing I write:

```
ORDER BY data_adaugare DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:17:00.710

如果您熟悉 SQL 中的 UNION，您可能想尝试创建一个以 LIMIT x,y 结尾的单个查询。如果您以前没有使用过 UNION，请查看[http://www.w3schools.com/sql/sql_union.asp 。](http://www.w3schools.com/sql/sql_union.asp)

你会想要这样的东西：

```
SELECT u.* FROM (
    (SELECT... 1st query)
    UNION 
    (SELECT... 2nd query)
    UNION
    (SELECT... 3rd query)
) AS u LIMIT {$startpoint} , {$limit} 
```

作为对您的第二篇文章的回应，UNION 对一组行进行操作，这可能会产生不可预测的排序。您需要在 UNION 末尾加上“ORDER BY”。

另一种选择是将每个选择包含在另一个选择中，这看起来很愚蠢，但它使排序工作。请注意，UNION ALL 允许重复结果，因此如果任何联合查询返回同一行，它将被重复。

```
SELECT u.* FROM (
    SELECT * FROM (SELECT * FROM anunt_standard
                   WHERE `activat_plata`='1' AND `sters`='0' AND `activat`='0'
                   ORDER BY data_adaugare DESC) A
    UNION ALL
    SELECT * FROM (SELECT * FROM anunt_standard
                   WHERE `activat_plata`='0' AND `sters`='0' AND `activat`='0'
                   ORDER BY data_adaugare DESC) B
    UNION ALL
    SELECT * FROM (SELECT * FROM anunt_standard
                   WHERE `sters`='1' AND `activat`='0'
                   ORDER BY data_adaugare DESC) C
) As u LIMIT {$startpoint} , {$limit} 
```

# sql - SQL查找只有2列值的整行

> ID：15013928
> 
> 赞同：3
> 
> 时间：2013-02-21T23:04:12.673
> 
> 标签：sql, oracle, filter, group-by

我正在尝试

```
select columns Age, Height, House_number, Street
from my_table
where count(combination of House_number, Street)
occurs more than once. 
```

我的桌子看起来像这样

```
Age, Height, House_number, Street
15   178     6             Mc Gill Crst 
85   166     6             Mc Gill Crst
85   166     195           Mc Gill Crst
18   151     99            Moon Street 
52   189     14a           Grimm Lane 
```

我想要的结果看起来像这样

```
Age, Height, House_number, Street
15   178     6             Mc Gill Crst 
85   166     6             Mc Gill Crst 
```

卡住！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T23:06:55.723

最好的方法是使用窗口函数，假设您的数据库支持它们：

```
select columns Age, Height, House_number, Street
from (select t.*, count(*) over (partition by house_number, street) as cnt
      from my_table t
     ) t
where cnt > 1 
```

这是在 Oracle 中使用 Windows 函数（也称为分析函数）。该表达式`count(*) over (partition by house_number, street)`正在计算每个 house_number 和街道组合的行数。这有点像做 a `group by`，但它将计数添加到每一行，而不是将多行合并为一个。

一旦你有了它，就很容易选择值大于 1 的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T23:06:41.453

由于您没有提到您正在使用的 RDBMS，因此下面的查询几乎适用于大多数 RDBMS。

```
SELECT  *
FROM    tableName
WHERE   (House_number, Street) IN
(
    SELECT House_number, STREET
    FROM tableName
    GROUP BY House_number, STREET
    HAVING COUNT(*) >= 2
) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/2e6d4/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T23:15:17.817

听起来你需要一个 NOT DISTINCT。以下内容可能会满足您的需要：[多个 NOT distinct](https://stackoverflow.com/questions/269605/multiple-not-distinct)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T23:16:19.060

如果您没有窗口功能，那么您可以使用带有`JOIN`. 子查询获取计数大于 1的`house_number`和的列表，然后使用此结果连接回您的表：`street`

```
select t1.age,
  t1.height,
  t1.house_number,
  t1.street
from my_table t1
inner join
(
  select house_number, street
  from my_table 
  group by house_number, street
  having count(*) > 1
) t2
  on t1.house_number = t2.house_number
  and t1.street = t2.street 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/905ed/14)

# c++ - 可以提高公历日期和提高posix时间正确计算unixtime吗？

> ID：15013932
> 
> 赞同：6
> 
> 时间：2013-02-21T23:04:31.347
> 
> 标签：c++, date, boost, timestamp, unix-timestamp

我正在尝试编写一个简单的时间戳系统，它提供从当前时间开始的纪元秒和小数秒。我正在使用 boost 库并且有这样的东西：

```
const boost::posix_time::ptime epoch(boost::gregorian::date(1970, 1, 1));
boost::posix_time::ptime time() {
    boost::posix_time::ptime now = boost::posix_time::microsec_clock::universal_time();
    return now;
}
boost::posix_time::time_duration dur = (time() - epoch); 
```

然后使用以下元素提取纪元值：

```
dur.total_seconds();
dur.fractional_seconds(); 
```

具体来说，这会返回正确的 unix 时间吗？如果没有，关于如何纠正它的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T03:23:16.740

是的，这应该可行，但是，可以肯定的是，总是有实验证据：

```
#include <iostream>
#include <time.h>
#include <boost/date_time.hpp>
namespace bpt = boost::posix_time;
namespace bg = boost::gregorian;
int main()
{
    bpt::time_duration dur = bpt::microsec_clock::universal_time()
                           - bpt::ptime(bg::date(1970, 1, 1));
    timespec ts;
    clock_gettime(CLOCK_REALTIME, &ts);
    std::cout << std::setfill('0')
              << " boost: " << dur.total_seconds() << '.' << std::setw(6)
                            << dur.fractional_seconds() << '\n'
              << " ctime: " << time(NULL) << '\n'
              << " posix: " << ts.tv_sec << '.' << std::setw(9)
                            << ts.tv_nsec << '\n';
} 
```

我明白了

Linux/gcc

```
 boost: 1361502964.664746
 ctime: 1361502964
 posix: 1361502964.664818326 
```

太阳/太阳工作室

```
 boost: 1361503762.775609
 ctime: 1361503762
 posix: 1361503762.775661600 
```

AIX/XLC

```
 boost: 1361503891.342930
 ctime: 1361503891
 posix: 1361503891.342946000 
```

甚至是 Windows/Visual Studio

```
 boost: 1361504377.084231
 ctime: 1361504377 
```

看起来他们都同意从那以后经过了多少秒`date(1970,1,1)`

# abap - 如何手动实例化 BSP 控制器

> ID：15013933
> 
> 赞同：1
> 
> 时间：2013-02-21T23:04:35.993
> 
> 标签：abap, sap-bsp

我最初尝试过

```
DATA: cl_rest_bo_list TYPE REF TO zcl_rm_rest_bulk_orders.
CREATE OBJECT cl_rest_bo_list.
cl_rest_bo_list->request->if_http_request~set_method( 'GET' ).
cl_rest_bo_list->do_request( ). 
```

这导致异常结束，访问`request`未初始化。

然后我尝试实例化请求和响应

```
DATA: cl_rest_bo_list TYPE REF TO zcl_rm_rest_bulk_orders.
DATA: cl_request  TYPE REF TO cl_http_request.
DATA: cl_response TYPE REF TO cl_http_response.
CREATE OBJECT cl_rest_bo_list.
CREATE OBJECT cl_request.
CREATE OBJECT cl_response.
request->if_http_request~set_method( 'GET' ).
cl_rest_bo_list->request = cl_request.
cl_rest_bo_list->response = cl_response.    
cl_rest_bo_list->do_request( ). 
```

这至少不会异常结束，但是 set_method 在这里返回错误代码并且实际上并没有设置方法。

```
 system-call ict
    did
      ihttp_scid_set_request_method
    parameters
      m_c_msg                            " > c handle
      method                             " > method
      m_last_error.                      " < return code 
```

由于谷歌不知道 ihttp_scid_set_request_method，我很确定我做错了。也许没有实例化 BSP 控制器的规定，尽管我不确定这对 ABAP 单元测试 BSP 控制器意味着什么。

作为目前的解决方案，我已将所有业务逻辑提升到一个单独的方法中，该方法可以毫无问题地调用/测试。不过，如果有人知道如何实例化 CL_BSP_CONTROLLER2 类，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T07:34:37.203

据我所知，BSP 控制器只能从 ICF 处理中实例化，因为它从内核检索有关调用的信息。我不确定你为什么要首先为 UI 安装单元测试，除非你没有像你关于“提升”的评论那样将 UI 和业务逻辑分开......

# python - Python过滤：只保留最近的python MacPort

> ID：15013935
> 
> 赞同：0
> 
> 时间：2013-02-21T23:04:42.090
> 
> 标签：python, vim

我在 Vim 中打开了一个文件：

```
py24-sqlalchemy
py25-beautifulsoup
py25-beautifulsoup4
py25-bpython
py25-epydoc
py25-icalendar
py25-ipython
py25-libgmail
py25-mechanize
py25-numpy
py25-pil
py25-simplejson
py25-sphinx
py25-sqlalchemy
py25-sqlite
py25-tkinter
py25-vobject
py26-appscript
py26-beautifulsoup
py26-bpython
py26-epydoc
py26-game
py26-icalendar
py26-ipython
py26-mechanize
py26-numpy
py26-pdfminer
py26-simplejson
py26-sphinx
py26-sqlalchemy
py26-sqlite
py26-tkinter
py26-vobject
py27-appscript
py27-asciitable
py27-asciitable
py27-beautifulsoup
py27-beautifulsoup4
py27-blist
py27-bpython
py27-chm
py27-configobj
py27-dateutil
py27-epydoc
py27-game
py27-gdal
py27-gtk
py27-ipython
py27-lxml
py27-matplotlib
py27-mechanize
py27-mysql
py27-numpy
py27-pdfminer
py27-pil
py27-prettytable
py27-progressbar
py27-psutil
py27-py2app
py27-pylint
py27-pyobjc
py27-pyobjc-cocoa
py27-pypdf
py27-pyqt4
py27-simplejson
py27-sphinx
py27-sqlalchemy
py27-sqlite
py27-termcolor
py27-tkinter
py27-tz
py27-wxpython
py31-appscript
py31-asciitable
py31-beautifulsoup4
py31-blist
py31-bpython
py31-game
py31-lxml
py31-psutil
py32-asciitable
py32-beautifulsoup4
py32-blist
py32-bpython
py32-game
py32-ipython
py32-lxml
py32-psutil
# ... etc ... (many lines) 
```

我想过滤行，以便对于 2.x 范围内的 Python 版本，我只保留最新的包。

示例：如果文件同时包含 py25-ipython 和 py26-ipython，我希望 py25-ipython 消失而 py26-ipython 保留。始终只保留最新版本，并且每个包始终只保留一个版本。

这是我想出的，但它的编码很糟糕。在我看来，几乎是 C64-BASIC 代码。

```
#!/usr/bin/env python2.7
import sys
import re

PATTERN_PYTHON_MACPORT = '^py(2[4567])-(\w[-\w]*)$'
REGEX_PYTHON_MACPORT = re.compile(PATTERN_PYTHON_MACPORT)

def main():
  packages = {}
  filtered_lines = []
  for line in sys.stdin:
    match = REGEX_PYTHON_MACPORT.match(line)
    if match:
      python_version = int(match.group(1))
      package_name = match.group(2)
      if package_name in packages:
        packages[package_name].append(python_version)
      else:
        packages[package_name] = [python_version]
    else:
      filtered_lines.append(line)
  for package_name in packages:
    versions = packages[package_name]
    if len(versions) == 1:
      version_to_keep = versions[0]
    else:
      version_to_keep = sorted(versions, reverse=True)[0]
      filtered_lines.append('py{}-{}\n'.format(version_to_keep,
                                               package_name))
  for line in sorted(filtered_lines):
    sys.stdout.write(line)
if __name__ == '__main__':
  main() 
```

我怎样才能使它更 Pythonic？这在 Vimscript 中会更容易吗？我可能更喜欢 Vimscript 中的解决方案..

顺便说一句，我是 Python 和 Vimscript 的初学者。来这里学习。代码示例会很棒。

PS我从Vim内部运行过滤器`:'<,'>! /Users/tinosino/Desktop/pyfilter.py`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:12:06.010

这将做同样的事情（假设您的输入列表已经排序）。否则，使用`sorted(sys.stdin)`. 如果您不想保留 Python 3.x 模块，请删除“else”子句。

```
import re
rex = re.compile('py2\d+-(\S+)')
modules = {}
for line in sys.stdin:
    match = rex.match(line)
    if match:
        modules[match.group(1)] = match.group(0)
    else:
        modules[line] = line
print '\n'.join(sorted(modules.values())) 
```

输出：

```
py25-libgmail
py26-icalendar
py26-vobject
py27-appscript
py27-asciitable
py27-beautifulsoup
py27-beautifulsoup4
py27-blist
py27-bpython
py27-chm
py27-configobj
py27-dateutil
py27-epydoc
py27-game
py27-gdal
py27-gtk
py27-ipython
py27-lxml
py27-matplotlib
py27-mechanize
py27-mysql
py27-numpy
py27-pdfminer
py27-pil
py27-prettytable
py27-progressbar
py27-psutil
py27-py2app
py27-pylint
py27-pyobjc
py27-pyobjc-cocoa
py27-pypdf
py27-pyqt4
py27-simplejson
py27-sphinx
py27-sqlalchemy
py27-sqlite
py27-termcolor
py27-tkinter
py27-tz
py27-wxpython
py31-appscript
py31-asciitable
py31-beautifulsoup4
py31-blist
py31-bpython
py31-game
py31-lxml
py31-psutil
py32-asciitable
py32-beautifulsoup4
py32-blist
py32-bpython
py32-game
py32-ipython
py32-lxml
py32-psutil 
```

# php - 如何将 k2 项目拉入我的自定义组件视图？

> ID：15013942
> 
> 赞同：2
> 
> 时间：2013-02-21T23:05:19.443
> 
> 标签：php, oop, joomla, joomla2.5, joomla-k2

我正在开发一个自定义 joomla 组件，并有一个单一的视图设置。我试图弄清楚如何根据一些自定义过滤器将 k2 项目列表拉到视图中......

在*奇怪*的英语中，它会是这样的：

将所有 k2 项 that_match_some_requirements 放入我的自定义组件视图中，其中 user_id = 此用户

能够像这样正常引用项目数据会很好：

```
$this->item->info 
```

我真的只是想了解/找出将 k2 项目及其对象导入我的组件视图的最佳方法。如果这有意义吗？

也许与此有关？虽然我觉得这个名字另有说明：-/

```
JModelLegacy::addIncludePath(JPATH_SITE . '/components/com_component/models'); 
$whateverModel = JModelLegacy::getInstance('something', 'something'); //? not sure 
```

或者也许来自这个模块代码？

```
require_once (JPATH_SITE.DS.'components'.DS.'com_k2'.DS.'helpers'.DS.'route.php');
require_once (JPATH_SITE.DS.'components'.DS.'com_k2'.DS.'helpers'.DS.'utilities.php');

class modK2ContentHelper
{

public static function getItems(&$params, $format = 'html')
{

    jimport('joomla.filesystem.file');
    $mainframe = JFactory::getApplication();
    $limit = $params->get('itemCount', 5);
    $cid = $params->get('category_id', NULL);
    $ordering = $params->get('itemsOrdering', '');
    $componentParams = JComponentHelper::getParams('com_k2');
    $limitstart = JRequest::getInt('limitstart'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:48:57.183

我认为你的第二个选择更容易。实际上`helper.php`文件中指定了获取具有特定条件的K2项目的整个过程。

在第 261 行：

```
 $items = $db->loadObjectList(); 
```

在创建查询后加载对象（代码太长，无法在此处粘贴）。

在接下来的几行中，您可以看到如何创建、修改或生成大量项目属性（300 行代码）。

最后你会得到一个项目数组（php对象）：

```
 ...
               $rows[] = $item;
        }

        return $rows;
        ... 
```

您可以只获取此文件并重用代码，甚至可以从组件中调用它，假设始终安装该模块。

# google-chrome - 自定义 Chrome Inspector 的边距和填充颜色

> ID：15013943
> 
> 赞同：1
> 
> 时间：2013-02-21T23:05:23.903
> 
> 标签：google-chrome, google-chrome-devtools

我想将浏览器从 firefox 更改为 chrome，但最大的问题是当我悬停要检查的元素时填充和边距的颜色。颜色之间没有像 Firefox 中那样的区别。（边距：黄色，填充：紫色，元素本身：蓝色）。我想自定义 Chrome 的开发工具。我自定义了 Custom.css 文件夹中的几乎所有内容，但我不知道为这些颜色设置什么元素。我读到某处有 devTools.css 文件，在其中我可以找到样式并更改它，但我找不到该文件，而且我想我也找不到该元素。我正在使用 Windows XP。

所以请如果有人知道，请告诉我该怎么做......我怎样才能改变颜色？

编辑：

我已经阅读了一些文章，我终于找到了这个。

[https://bugs.webkit.org/show_bug.cgi?id=37768](https://bugs.webkit.org/show_bug.cgi?id=37768)

如果我没有错，那与我的问题有关。我看到人们在谈论那个那个，并且有一个“补丁”

```
Created an attachment (id=104186) [details]
[PATCH] Altered hover backgrounds for the Metrics pane sections to follow the new highlight
created. 
```

但我不知道我是否可以用这个补丁改变我的颜色。实际上我不知道我能不能以某种方式运行这个补丁，然后用它来改变我的颜色。

如果有人知道这是什么，我可以用它来解决我的问题，请分享你的意见:)

# c++ - 如何使用 SWIG 为 C++ 类提供 Python __repr__()

> ID：15013945
> 
> 赞同：8
> 
> 时间：2013-02-21T23:05:24.760
> 
> 标签：c++, python, swig, repr

我观察到，当一种类型

```
help 
```

在 Python repl 中，一个得到

```
Type help() for interactive help, ... 
```

当一种类型

```
help() 
```

一个被踢到*帮助*模式。我很确定这是因为**site._Helper**定义了`__repr__()`（对于第一个示例）和`__call__()` （对于第二个示例）。

我喜欢这种行为（仅提示对象和可调用语法），并且我想对通过 SWIG 导出到 Python 的 C++ 类做同样的事情。这是我尝试做的一个简单示例

```
helpMimic.h
-----------
class HelpMimic
{
public:
    HelpMimic() {};
    ~HelpMimic() {};

    char *__repr__();
    void operator()(const char *func=NULL);
};

helpMimic.cxx
-------------
char *HelpMimic::__repr__()
{
    return "Online help facilities are not yet implemented.";
}

void HelpMimic::operator()(const char *func)
{
    log4cxx::LoggerPtr transcriptPtr = oap::getTranscript();
    std::string commentMsg("# Online help facilities are not yet implemented. Cannot look up ");
    if (func) {
        commentMsg += func;
    }
    else {
        commentMsg += "anything.";
    }

    LOG4CXX_INFO(transcriptPtr, commentMsg);
}

helpMimic.i
-----------
%module sample
 %{
#include <helpMimic.h>
 %}
class HelpMimic
{
public:
    HelpMimic() {};
    ~HelpMimic() {};

    char *__repr__();
    void operator()(const char *func=NULL);
}; 
```

当我尝试在我的应用程序中使用这个类时，我似乎无法在*帮助下*获得我看到的行为（下面的输出来自嵌入了 Python 的 C++ 应用程序，其中每个输入行都是通过发送的`PyEval_String()`）：

```
 tam = sample.HelpMimic()
 tam   # echoes 'tam', nothing else
 print tam
 # _5010b70200000000_p_HelpMimic
 print repr(tam)
 # <Swig Object of type 'HelpMimic *' at 0x28230a0>
 print tam.__repr__()
 # Online help facilities are not yet implemented. 
```

最后的*打印*显示该方法`__repr__()`存在，但我无法使用更简单的对象引用或使用`repr(tam)`. 我还尝试定义`__str()__`希望我误解了哪个会被调用，但仍然没有运气。

我尝试使用`%extend`接口文件中的指令将一个`__str__()`或一个`__repr__()`定义插入到 SWIG 接口定义文件中，而不是直接在 C++ 中定义它们，但无济于事。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-02T19:45:54.733

正如@flexo 在评论中所建议的那样，如果您使用SWIG 代码生成器的[`-builtin`标志](http://www.swig.org/Doc3.0/SWIGDocumentation.html#Python_builtin_types)`repr()`，则不会调用您的`__repr__`方法。相反，您需要定义一个适合 repr 槽的函数。

```
%feature("python:slot", "tp_repr", functype="reprfunc") HelpMimic::printRepr; 
```

根据 HelpMimic::printRepr 必须具有与预期签名匹配的签名（[Python 文档中的 tp_repr](https://docs.python.org/2/c-api/typeobj.html#c.PyTypeObject.tp_repr)） - 它必须返回字符串或 unicode 对象。另一个警告 - 您不能将相同的功能放在多个插槽中，所以不要尝试将其用于 tp_str！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-11T11:06:49.083

我通常使用 %extend 功能来避免为特定目标语言定制 C/C++。例如

```
%extend MyClass {
  %pythoncode %{
    def __repr__(self):
      # How you want your object to be shown
    __swig_getmethods__["someMember"] = SomeMemberGet
    __swig_setmethods__["someMember"] = SomeMemberSet
    if _newclass:
      someMember = property(SomeMemberGet,SomeMemberSet)
    def show(self):
      # You could possibly visualize your object using matplotlib
  %}
}; 
```

您在**repr**函数中的位置基本上可以调用任何函数并格式化输出以满足您的需要。此外，您可以添加属性并定义它们如何映射到 setter 和 getter。

# javascript - prettyphoto - jquery 画廊插件 - 图片无法加载

> ID：15013953
> 
> 赞同：0
> 
> 时间：2013-02-21T23:06:18.293
> 
> 标签：javascript, jquery, prettyphoto

我在我的网站上有非常奇怪的行为

[www.zrubex.eu](http://www.zrubex.eu)

我已经实现了 PrettyPhoto 库，并且在本地服务器（wamp）上一切正常，但是当我将它上传到 Web 服务器时，在单击缩略图后，42 张图像中只有两张以全尺寸显示。这是第5和第8。

我用萤火虫研究了它，它试图在点击一张图片后获得三张图片——点击的一张、上一张和下一张。但问题是，它找不到图像并显示未找到路径的警告。我不知道为什么这两张图片有效而其他图片无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:52:48.223

扩展名大写，因此无法找到图像。

我在看你的请求，它试图请求`http://www.zrubex.eu/images/DSC00895.JPG`……这当然不存在。

但`http://www.zrubex.eu/images/DSC00895.jpg`确实存在。

你有：

```
<a href="images/DSC00895.JPG" rel="prettyPhoto[gallery2]" title=""><img src="images/DSC00895t.jpg" width="96" height="96" alt=""></a> 
```

修复较大图像的扩展名，它将起作用。

```
<a href="images/DSC00895.jpg" rel="prettyPhoto[gallery2]" title=""><img src="images/DSC00895t.jpg" width="96" height="96" alt=""></a> 
```

# sql - 使用 T_SQL 将行注入查询结果

> ID：15013954
> 
> 赞同：2
> 
> 时间：2013-02-21T23:06:18.543
> 
> 标签：sql, sql-server, tsql, variables, stored-procedures

我目前有一个问题，我需要在数据库中报告几个销售领域的价值。第二个 `SELECT 给了我我想知道的东西，第一部分也给了我我想知道的东西。但是我很好奇是否有可能使第一个查询的结果在第二个查询中显示为一行...

如果我只是添加`@something`到第二个，`SELECT`那么它会显示为一列并给出如下结果：

```
TOTAL     | CATEGORY    | (NO COLUMN NAME)
-------------------------------------------
70000.11  | CATEGORY 1  | 118500
31200.11  | CATEGORY 2  | 118500
51114.11  | CATEGORY 3  | 118500
2215.11   | CATEGORY 4  | 118500
54321.11  | CATEGORY 5  | 118500 
```

但是，基本上我想弄清楚是否可以将其注入结果中，所以它看起来像：

```
TOTAL     | CATEGORY  
----------------------
70000.11  | CATEGORY 1
31200.11  | CATEGORY 2
51114.11  | CATEGORY 3
2215.11   | CATEGORY 4
54321.11  | CATEGORY 5
118500.00 | SOMETHING 
```

我修改了列名等，所以我希望它不会造成混淆。我想过尝试生成一个临时表，将值拉入其中，然后在其上执行 INSERT INTO @myTable？我对此有点熟悉，但不确定它是否是最有效的方法。

最终，这将进入存储过程。

```
USE Database1
GO
DECLARE @something NUMERIC
SET @something = (SELECT 
        ABS(SUM(ENTRY_AMT)) AS 'Total'

    FROM 
        Invoices AS gl

        LEFT JOIN Orders AS iod ON gl.ORDER_NO = iod.ORDER_NO AND gl.LINE_NO = iod.LINE_NO AND gl.APPEND = iod.APPEND

    WHERE 
        gl.YR = 13 
        AND gl.PERIOD = 1 
        AND ENTRY_SRC = 'revenue' 
        AND iod.CATEGORY_DESC IN ('GENERAL', 'OTHER', 'RANDOM') 

        AND (gl.GL_ACCOUNT_NO BETWEEN 7100000000 AND 7100999999)
        AND gl.ITEM_NO NOT LIKE '%RS'
        AND gl.ITEM_NO NOT LIKE '%RA'
)

(SELECT 
    ABS(SUM(ENTRY_AMT)) AS 'Total', 
    CATEGORY_DESC AS 'Category'

FROM 
    Invoices AS gl

    LEFT JOIN Orders AS iod ON gl.ORDER_NO = iod.ORDER_NO AND gl.LINE_NO = iod.LINE_NO AND gl.APPEND = iod.APPEND

WHERE 
        gl.YR = 13 
    AND gl.PERIOD = 1 
    AND ENTRY_SRC = 'revenue' 
    AND iod.CATEGORY_DESC NOT IN ('GENERAL', 'OTHER', 'RANDOM') 

    AND (gl.GL_ACCOUNT_NO BETWEEN 7100000000 AND 7100999999)
    AND gl.ITEM_NO NOT LIKE '%RS'
    AND gl.ITEM_NO NOT LIKE '%RA'

GROUP BY CATEGORY_DESC
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:20:57.277

假设 @something 不是其余部分的总和或类似的东西，在这种情况下，您想研究像 @xQbert 建议的分组集和多维数据集。如果不是，那么试试这个。

```
<-- Your Query Here -->
UNION ALL -- Make sure it's a UNION ALL not a UNION or you will lose duplicate rows.
SELECT @Something AS Total, 'Something' AS Category 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:21:11.057

```
 USE Database1
    GO
(SELECT 
                ABS(SUM(ENTRY_AMT)) AS 'Total',
'All' as Category

        FROM 
            Invoices AS gl

            LEFT JOIN Orders AS iod ON gl.ORDER_NO = iod.ORDER_NO AND gl.LINE_NO = iod.LINE_NO AND gl.APPEND = iod.APPEND

        WHERE 
            gl.YR = 13 
            AND gl.PERIOD = 1 
            AND ENTRY_SRC = 'revenue' 
            AND iod.CATEGORY_DESC IN ('GENERAL', 'OTHER', 'RANDOM') 

            AND (gl.GL_ACCOUNT_NO BETWEEN 7100000000 AND 7100999999)
            AND gl.ITEM_NO NOT LIKE '%RS'
            AND gl.ITEM_NO NOT LIKE '%RA'
    )
    UNION

    (SELECT 
        ABS(SUM(ENTRY_AMT)) AS 'Total', 
        CATEGORY_DESC AS 'Category'

    FROM 
        Invoices AS gl

        LEFT JOIN Orders AS iod ON gl.ORDER_NO = iod.ORDER_NO AND gl.LINE_NO = iod.LINE_NO AND gl.APPEND = iod.APPEND

    WHERE 
            gl.YR = 13 
        AND gl.PERIOD = 1 
        AND ENTRY_SRC = 'revenue' 
        AND iod.CATEGORY_DESC NOT IN ('GENERAL', 'OTHER', 'RANDOM') 

        AND (gl.GL_ACCOUNT_NO BETWEEN 7100000000 AND 7100999999)
        AND gl.ITEM_NO NOT LIKE '%RS'
        AND gl.ITEM_NO NOT LIKE '%RA'

    GROUP BY CATEGORY_DESC 
```

## )

或者，我认为这更容易......

```
 (SELECT 
        ABS(SUM(ENTRY_AMT)) AS 'Total', 
        CATEGORY_DESC AS 'Category'

    FROM 
        Invoices AS gl

        LEFT JOIN Orders AS iod ON gl.ORDER_NO = iod.ORDER_NO AND gl.LINE_NO = iod.LINE_NO AND gl.APPEND = iod.APPEND

    WHERE 
            gl.YR = 13 
        AND gl.PERIOD = 1 
        AND ENTRY_SRC = 'revenue' 
        AND iod.CATEGORY_DESC NOT IN ('GENERAL', 'OTHER', 'RANDOM') 

        AND (gl.GL_ACCOUNT_NO BETWEEN 7100000000 AND 7100999999)
        AND gl.ITEM_NO NOT LIKE '%RS'
        AND gl.ITEM_NO NOT LIKE '%RA'

    GROUP BY Grouping sets ((CATEGORY_DESC),())
    ) 
```

# .net - ODP.NET 不工作

> ID：15013955
> 
> 赞同：0
> 
> 时间：2013-02-21T23:06:21.170
> 
> 标签：.net, oracle, odp.net

所以我在我的 PC 上安装了 Oracle 11 32 位。如果我创建一个 C# 项目并包含 Oracle.DataAccess.dll，我可以很好地连接。如果其他人创建了一个 C# 项目并且我打开它，它会在 Open 方法上失败，说明“TNS：无法解析指定的连接标识符。如果我从其他人的项目中删除引用并从我的 PC 中再次添加它，我会得到同样的错误。

我们在这里使用 LDAP。TNSPing 在我的电脑上运行良好。

任何想法为什么我可以制作一个程序并引用 oracle dll 并且它可以工作，但从其他人的程序中却不能？有什么方法可以跟踪这个应用程序外部发生的事情到 oracle 驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T02:09:04.387

这只是一种预感，但是当您从其他人那里获得项目时，Oracle dll 的“复制本地”属性是否设置为 true？如果它是假的，那么可能是其他人从他的 GAC 中设置了 Oracle dll，因此项目在他的机器上找到了 oracle dll。但是，当项目进入您的计算机时，参考文件具有 Oracle dll 的条目，但无法在您的 GAC 或输出路径中找到“正确版本”。

# c# - 迭代二叉搜索树的高度

> ID：15013956
> 
> 赞同：2
> 
> 时间：2013-02-21T23:06:23.970
> 
> 标签：c#, algorithm, binary-tree, binary-search-tree, breadth-first-search

我正在尝试一种迭代方法来查找二叉搜索树的高度/深度。基本上，我尝试使用广度优先搜索来计算深度，方法是使用队列存储树节点并仅使用整数来保存树的当前深度。树中的每个节点都排队，并检查子节点。如果存在子节点，则增加深度变量。这是代码：

```
public void calcDepthIterative() {
    Queue<TreeNode> nodeQ = new LinkedList<TreeNode>();
    TreeNode node = root;
    int level = 0;
    boolean flag = false;

    nodeQ.add(node);
    while(!nodeQ.isEmpty()) {
        node = nodeQ.remove();
        flag = false;
        if(node.leftChild != null) {
            nodeQ.add(node.leftChild);
            flag = true;
        }

        if(node.rightChild != null) {
            nodeQ.add(node.rightChild);
            flag = true;
        }
        if(flag) level++;
    }
    System.out.println(level);

} 
```

但是，该代码不适用于所有情况。例如，对于以下树：

```
 10
   /    \
  4      18
   \    /  \
    5  17   19 
```

[它将深度显示为 3，而不是 2。我使用此页面](https://stackoverflow.com/questions/8389232/how-to-find-height-of-bst-iteratively?answertab=votes#tab-top)中的想法使用附加队列存储当前深度做了一个替代版本。我想避免使用额外的队列，所以我尝试优化它。这是有效的代码，尽管使用了额外的队列。

```
public void calcDepthIterativeQueue() {
    Queue<TreeNode> nodeQ = new LinkedList<TreeNode>();
    Queue<Integer> lenQ = new LinkedList<Integer>();

    TreeNode node = root;
    nodeQ.add(node);
    lenQ.add(0);
    int maxLen = 0;
    while(!nodeQ.isEmpty()) {
        TreeNode curr = nodeQ.remove();
        int currLen = lenQ.remove();
        if(curr.leftChild != null) {
            nodeQ.add(curr.leftChild);
            lenQ.add(currLen + 1);
        }

        if(curr.rightChild != null) {
            nodeQ.add(curr.rightChild);
            lenQ.add(currLen + 1);
        }
        maxLen = currLen > maxLen ? currLen : maxLen;
    }
    System.out.println(maxLen);

} 
```

**问题：**

有没有办法修复第一种方法以使其返回正确的深度？

**编辑请** **参阅下面的接受答案**

**rici 答案的 Java 代码：**

```
public void calcDepthIterative() {
    Queue<TreeNode> nodeQ = new LinkedList<TreeNode>();
    int depth = 0;
    nodeQ.add(root);
    while(!nodeQ.isEmpty()) {
        int nodeCount = nodeQ.size();
        if(nodeCount == 0)
            break;
        depth++;
        while(nodeCount > 0) {
            TreeNode topNode = nodeQ.remove();
            if(topNode.leftChild != null)
                nodeQ.add(topNode.leftChild);
            if(topNode.rightChild != null)
                nodeQ.add(topNode.rightChild);
            nodeCount--;
        }
    }
    System.out.println(depth);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T02:13:16.493

这是一种方法：

```
Create a Queue, and push the root onto it.
Let Depth = 0
Loop:
    Let NodeCount = size(Queue)
    If NodeCount is 0:
        return Depth.
    Increment Depth.
    While NodeCount > 0:
        Remove the node at the front of the queue.
        Push its children, if any, on the back of the queue
        Decrement NodeCount. 
```

## 这个怎么运作

每次`NodeCount`设置，扫描即将开始新的一行。NodeCount 设置为该行中的节点数。当所有这些节点都已被删除（即 NodeCount 减为零）时，该行已完成并且该行上的所有节点的子节点都已添加到队列中，因此队列再次具有完整的行，并且 NodeCount 再次设置为该行中的节点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T09:02:36.947

```
public int height(Node root){
  int ht =0;
  if(root==null) return ht;
  Queue<Node> q = new ArrayDeque<Node>();
  q.addLast(root);
  while(true){
      int nodeCount = q.size();
      if(nodeCount==0) return ht;
      ht++;
      while(nodeCount>0){
       Node node = q.pop();
       if(node.left!=null) q.addLast(node.left);
       if(node.right!=null) q.addLast(node.right);
       nodeCount--;
      }
 } 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-22T05:29:37.973

递归如何，

```
int Depth(Node node)
{
    int depthR=0,depthL=0;
    if(Right!=null)depthR=Depth(Right);
    if(Left!=null)depthL=Depth(Left);
    return Max(depthR,depthL)+1;
} 
```

如果你想要一个基于零的深度，只需将结果深度减去 1。

# asp.net - 如何在回发中跟踪 http 引荐来源网址？

> ID：15013958
> 
> 赞同：1
> 
> 时间：2013-02-21T23:06:34.790
> 
> 标签：asp.net

我的网站上有一个页面，可以从其他几个页面访问。在此页面上，我有一个取消按钮，当人们单击该按钮时，我想在服务器上执行一些代码，然后重定向回他们来自的页面。

我试图通过引用 Request.UrlReferrer 来做到这一点，但是一旦发生回发，就会将其设置为当前页面。

我想出了一个使用会话状态的解决方法：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
          Session["referrer"] = Request.UrlReferrer.AbsoluteUri;
    }
}

btn_Cancel_click(object sender, EventArgs e)
{
    //Some other code and then the line below:
    Response.Redirect(Session["referrer"]);
} 
```

但是我很好奇是否有一种更优雅的方法可以在不使用会话状态的情况下做到这一点。谁能为此提出更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:13:45.717

使用`UrlReferrer`取消返回是不安全的，因为许多用户可以选择阻止它（并且不提供他们来自哪里的信息），而且我有时看到恶意程序在那里放置垃圾邮件站点。

正确的方法是在 url 上使用一个参数，告诉您的页面在取消时返回到哪里 - 例如：

```
http://www.yoursite.com/callpage.aspx?ref=/signin/ 
```

# javascript - Modernizr 基础知识

> ID：15013962
> 
> 赞同：1
> 
> 时间：2013-02-21T23:06:45.937
> 
> 标签：javascript, modernizr

我在我的页面中包含了modernizr，但是如果我无法访问这些浏览器，我将如何测试它在 IE 6-7 中的工作？做类似的事情：http: [//designshack.net/articles/css/build-a-freaking-awesome-pure-css-accordion/](http://designshack.net/articles/css/build-a-freaking-awesome-pure-css-accordion/)

基本的 CSS：

```
 .accslide {
     height: 0px;
     width: 0px;
     overflow: hidden;
    }
    input[type="radio"]:checked+label ~ .accslide {
     width: 100%;
     height:auto;
    } 
```

如果第二个选择器没有触发，则内容将不可见。

如果不支持 CSS3，是否有一种方法仅加载 Modernizr？如何测试 Modernizr 是否在我的 CSS 选择器上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:24:11.070

Modernizr 不会向浏览器添加任何功能，只是检查现有功能。如果你想测试选择器支持，你需要添加它。[这是一个要点](https://gist.github.com/paulirish/441842)

但是，即使这样也不会让您完成您想要完成的工作，我想，`accslide`当您检查单选按钮时，它会显示元素。如果您希望支持 IE6 和 7，您很可能需要使用 javascript —— IE6 甚至不支持`[type="radio"]`选择器，因此您也不能使用它。

您需要向单选按钮添加一个单击/更改处理程序，并使用一个类更新它的容器以正确获得您想要的功能，尤其是支持 IE6。

这是您的 CSS 外观的示例：

```
#radioContainer .accslide {
 height: 0px;
 width: 0px;
 overflow: hidden;
}
#radioContainer.on .accslide {
 width: 100%;
 height:auto;
} 
```

现在，在 javascript 中，当有人单击/更改单选按钮时，只需向元素添加/删除一个`on`类。*注意：我给 #radioContainer 一个 ID b/c IE6 不会为两个 css 类名称中的元素设置样式（最终，您将不支持 IE6 并且可以简单地提供**，这不适用于 IE6）*`#radioContainer`*`.radio-container.on`*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:12:07.670

如果给定的浏览器不支持，Modernizr 将不会启用 CSS 功能（如较新的选择器）。它主要是一个**特征检测**库。

# azure - 升级 Azure，现在无法部署

> ID：15013970
> 
> 赞同：0
> 
> 时间：2013-02-21T23:07:23.263
> 
> 标签：azure

我将 Azure 升级为付费帐户（即用即付）。现在突然间我无法部署。当我尝试部署时，它在 Visual Studio 中显示：

> 警告：在[https://management.core.windows.net/4b7ac332-17a9-4235-96ef-a47c56860bae/services/hostedservices/reckon/certificates](https://management.core.windows.net/4b7ac332-17a9-4235-96ef-a47c56860bae/services/hostedservices/reckon/certificates)上没有可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

我没有使用代理，也没有使用 Team Foundation 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:14:07.967

用于 azure 管理的 uri 使用订阅 ID - 如果您的订阅 ID 在升级期间发生更改，您需要通过 Visual Studio 下载新​​的 publishsettings 文件

# jira - 如何在 Velocity 模板中打印对象列表？

> ID：15013971
> 
> 赞同：1
> 
> 时间：2013-02-21T23:07:29.470
> 
> 标签：jira, velocity

这是一个非常基本的问题，我很确定我做错了什么或做出了一些假设。开始。

我正在编写一个使用 Velocity 模板系统的 Jira 插件。我有一个 ResultRow 对象列表，其中 ResultRow 是一个具有单个成员变量的类：字符串键：

```
public class ResultRow {
  public String key;
} 
```

我有这些 ResultRows 的列表：

```
List<ResultRow> rows = new ArrayList<ResultRow>();

ResultRow row = new ResultRow();
row.key = "foo";

rows.add(foo);

Map<String, Object> velocityParams = new HashMap<String, Object>();
velocityParams.put("rows", rows);

return descriptor.getHtml("view", velocityParams); 
```

我正在尝试使用以下内容在模板中列出这些行：

```
#foreach ($row in $rows)
  <tr><td>$row.key</td></tr>
#end 
```

我希望输出为： foo. 令人发指的是，模板系统只是打印文字字符串“$row.key”而不是 key 的内容。为了验证“$row”确实是一个对象，我使用了模板：

```
#foreach ($row in $rows)
  <tr><td>$row</td></tr>
#end 
```

结果如预期：com.domain.jira.ResultRow@7933f2c6。

我想也许我错过了课程的一些要求。是否需要以某种特殊方式定义以向 Velocity 建议某些成员可在模板中使用？Jira 是否使用了一些仅适用于某些对象的特殊版本的 Velocity？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:00:43.553

我想答案是你不能做我想做的事。您*可以*调用成员方法，但不能访问成员变量，这意味着您需要将 getter 添加到您的类中。（我可以发誓我试过了。嗯。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:50:56.800

Velocity 不公开字段，只公开方法。有一些方法可以改变它：

*   您可以创建自己的 Uberspect 类，该类允许访问公共字段。

*   您可以使用 Velocity 的 FieldMethodizer 的修改版本来包装实例，该版本可以访问非静态字段。

*   您可以在上下文中添加和使用“工具”类的实例，例如 VelocityTool 的 ClassTool 的子类。

# python - Python/Tkinter - 在条目验证期间奇怪的插入而不是替换

> ID：15013972
> 
> 赞同：0
> 
> 时间：2013-02-21T23:07:30.467
> 
> 标签：python, validation, tkinter

这是带有单个条目小部件的简单 Python/Tkinter 程序，我想自动检查是否输入了数字。

```
from Tkinter import *

class MyClass:
    def __init__(self, parent):
        self.myParent = parent
        self.portVar = IntVar()
        self.portVar.set(111)

        port_validator = self.myParent.register(self._validate)

        self.myEntry = Entry(self.myParent, width=9, textvariable=self.portVar,
            validate='all', validatecommand=(port_validator,'%d', '%i', '%P', '%s', '%S', '%v', '%V', '%W'))

        self.myEntry.pack(side=TOP)

    def _validate(self, d, i, P, s, S, v, V, W):
        print "OnValidate: d='%s' i='%s' P='%s' s='%s' S='%s' v='%s' V='%s' W='%s'" % (d, i, P, s, S, v, V, W)
        return P.isdigit()

root = Tk()
myclass = MyClass(root)
root.mainloop() 
```

_validate() 函数中的打印语句仅用于调试。问题是在这种情况下，条目的可视化编辑不正确。例如我做这些步骤：

1.  启动程序。
2.  请参阅条目中的“111”值
3.  鼠标左键选择“111”
4.  按键盘上的“9”
5.  而不是完全替换'111'到'9'插入发生，我看到'9111'！

调试日志（为方便起见，我列举了步骤）：

1.  OnValidate: d='-1' i='-1' P='111' s='' S='' v='all' V='forced' W='.37125736'
2.  OnValidate: d='-1' i='-1' P='111' s='111' S='' v='all' V='focusin' W='.37125736'
3.  OnValidate: d='0' i='0' P='' s='111' S='111' v='all' V='key' W='.37125736'
4.  OnValidate: d='1' i='0' **P='9111'** s='111' S='9' v='all' V='key' W='.37125736'
5.  OnValidate: d='0' i='1' P='9' s='9111' S='111' v='all' V='key' W='.37125736'
6.  OnValidate: d='1' i='1' P='99' s='9' S='9' v='all' V='key' W='.37125736'
7.  OnValidate: d='1' i='2' P='999' s='99' S='9' v='all' V='key' W='.37125736'

注意第 4 步。带有不需要的条目文本状态（'9111'）的附加步骤很奇怪

但如果我改变

```
return P.isdigit() 
```

到

```
return True 
```

一切都会好起来的！条目的工作方式与其他程序中的任何条目一样。

```
1\. OnValidate: d='-1' i='-1' P='111' s='' S='' v='all' V='forced' W='.37650024'
2\. OnValidate: d='-1' i='-1' P='111' s='111' S='' v='all' V='focusin' W='.37650024'
3\. OnValidate: d='0' i='0' P='' s='111' S='111' v='all' V='key' W='.37650024'
4\. OnValidate: d='1' i='0' P='9' s='' S='9' v='all' V='key' W='.37650024'
5\. OnValidate: d='1' i='1' P='99' s='9' S='9' v='all' V='key' W='.37650024'
6\. OnValidate: d='1' i='2' P='999' s='99' S='9' v='all' V='key' W='.37650024' 
```

为什么，伙计们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T15:14:43.913

那是因为`P.isdigit()`您将内容限制为数字。将111替换为9时，有一个步骤，条目的内容为空字符串。由于`''.isdigit()`为假，小部件始终保留一个数字作为其内容。删除此约束您允许任何字符串，然后您可以完全替换该值。

# asp.net-mvc - 剑道网格内分割器下一页

> ID：15013980
> 
> 赞同：0
> 
> 时间：2013-02-21T23:08:28.027
> 
> 标签：asp.net-mvc, grid, kendo-ui, splitter

这是我的布局。我正在使用剑道分离器控件。左侧窗格包含一个菜单，右侧是主要内容。一些内容页面包含可以包含多页数据的剑道网格。我的问题是，当用户单击网格的下一页时，它会执行回发，并且整个页面都会刷新，从而将用户带回主页。左侧菜单使用 javascript 加载右侧面板。有谁知道如何解决这个问题？

换句话说，我需要网格来加载下一页并定位到拆分器控件的右侧。如何“Ajaxify”网格控件的下一页？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T06:18:44.887

听起来您的 Grid 已配置为[服务器绑定](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/server-binding)- 如果是这样，您需要将其更改为[Ajax 绑定](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/ajax-binding)，并且没有其他方法可以将其放入使用 Ajax 加载内容的拆分器中。

# python - 比 locals() 或 dict(foo=foo) 更好的将上下文导出到模板引擎

> ID：15013982
> 
> 赞同：2
> 
> 时间：2013-02-21T23:08:35.380
> 
> 标签：python, django, jinja2

因此，在对#python 进行了关于[为什么不使用 locals](https://stackoverflow.com/a/1551187/490829)的简短讨论之后，我正在思考什么是没有重复性（即不是 DRY）`dict(foo=foo,bar=bar)`（或使用文字语法（`{}`）相同）的更好方法。

理想情况下，可以提交（或已经存在）反映[此 ecmascript 和谐提案](http://wiki.ecmascript.org/doku.php?id=harmony:object_initialiser_shorthand)的 PEP 。（我想强调它所传达的 DRY 方面）。

那么，你有什么解决办法吗？我应该提交 PEP 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:58:03.610

以及元类/属性解决方案的变体：

```
def make_dict(name, bases, attrs):
    attrs.pop('__module__')
    attrs.pop('__metaclass__', None)  # not needed in python3
    return attrs 
```

蟒蛇2：

```
class Context:
    __metaclass__ = make_dict 
```

蟒蛇 3：

```
class Context(metaclass=make_dict):
    a = 1
    b = 2 
```

真的，这个问题刚刚变成了我玩元类的沙盒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:17:04.460

我目前提出的解决方案是以下模式。请告诉我这是否与使用`locals()`.

```
class _Context:
    foo = 'bar'
render(request, 'example.html', vars(_Context)) 
```

需要注意的是，这对于 python3 可能有点不确定，因为它将使用带有 immutable 的新型类`dictproxy`，我需要看看它如何与给定的模板库交互。与简单的`'{foo}'.format(**_Context.__dict__)`.

这*是*对 的明确改进`locals()`，因为它相当明确，并且不会泄漏本地范围的其他部分。但是，它确实会泄漏，并且会泄漏`'__module__'`旧`'__doc__'`样式类以及许多其他带有新样式类的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:53:34.573

这是我的解决方案。可能有更好的方法来构建它，但它确实有效！

设置（Python 2 和 3）：

```
class ContextDictBase(type):
    @staticmethod
    def __newnew(cls, name, bases, attrs):
        attrs.pop('__module__', None)
        return attrs
    def __new__(cls, name, bases, attrs):
        ContextDictBase.__new__ = staticmethod(ContextDictBase.__newnew)
        return super(ContextDictBase, cls).__new__(cls, name, bases, attrs) 
```

蟒蛇2：

```
class ContextDict(object):
    __metaclass__ = ContextDictBase 
```

蟒蛇 3：

```
class ContextDict(object, metaclass=ContextDictBase):
    pass 
```

然后使用它：

```
class context(ContextDict):
    a = 1
    b = 2

>>> context
{'a': 1, 'b': 2} 
```

# google-app-engine - 周期性 CNAME 重定向问题是否正常

> ID：15013985
> 
> 赞同：1
> 
> 时间：2013-02-21T23:08:41.437
> 
> 标签：google-app-engine, redirect, cname

我有一个谷歌应用程序引擎应用程序被转发（通过 CNAME）到 www。我的自定义域名的子域。( [http://diablo3values.com](http://diablo3values.com) ) 我昨晚设置了所有这些。当我今天早上醒来时，它似乎正在按预期处理所有转发，但是在几分钟前，转发停止工作，现在它正在将我送回我的旧主机。这是正常的吗？由于传播或类似的原因，CNAME 重定向是否会定期不起作用？

编辑：所以，不久前它再次正确转发，然后我尝试验证我的 facebook like 按钮是否正常工作。所以我喜欢这个网站，然后去我的 facebook 并从我的个人资料中单击指向我网站的链接，它停止工作。即使我清除了缓存并尝试了不同的浏览器，它也不再正确转发。对我来说似乎很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:30:05.140

听起来像 DNS 缓存。请耐心等待，它应该在创建前锋后 24 小时消失。

# django - 为什么我得到一个带有美味 POST 请求的 NoneType HttpRequest

> ID：15013990
> 
> 赞同：2
> 
> 时间：2013-02-21T23:09:12.123
> 
> 标签：django, tastypie

它在开发过程中在我的本地主机上运行良好，但是当我将它部署在服务器上时，我收到一个空请求。

```
class MyPinResource(Resource):
    pin = fields.CharField(attribute='pin', null=True)

    class Meta:
        resource_name = 'my-pin'
        authentication = ApiKeyAuthentication()
        authorization = DjangoAuthorization()
        always_return_data = True
        include_resource_uri = False
        object_class = ApiObject
        allowed_methods = ['post']

    def detail_uri_kwargs(self, bundle_or_obj):
        if isinstance(bundle_or_obj, Bundle):
            return { 'domain': bundle_or_obj.obj }
        else:
            return { 'domain': bundle_or_obj }

    def obj_create(self, bundle, request=None, **kwargs):
        site_id = None
        if 'site_id' in request.GET and request.GET['site_id']:
            site_id = request.GET['site_id']
        else:
            LOG.error('site_id is required!')
            raise Exception 
```

"error_message": "'NoneType' 对象没有属性 'GET'"

AttributeError：“NoneType”对象没有属性“GET”

当调用 request.GET 时，此错误在 obj_create 内部

有什么问题？是否可以有一个空请求？帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:59:30.977

正如我在评论中所写，问题可能出在版本上，请查看此 github[问题](http://github.com/toastdriven/django-tastypie/issues/800)。如果您使用的是 0.9.12，则可以访问`request`中的。`bundle`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:32:42.430

当前从 pip 安装的 sweetpie 版本是 0.9.12。在这个版本中 obj_create 得到 2 个参数：

```
def obj_create(self, bundle, **kwargs): 
```

代替：

```
def obj_create(self, bundle, request=None, **kwargs): 
```

在早期版本中。

现在您可以使用 bundle.request 从 bundle 中获取请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T23:26:01.247

您可以通过 bundle.request 访问请求对象，如此处文档中[所述](http://django-tastypie.readthedocs.org/en/latest/resources.html#accessing-the-current-request)

# python - 在使用子进程的脚本上使用 Py2App 后收到启动错误

> ID：15013994
> 
> 赞同：1
> 
> 时间：2013-02-21T23:09:35.063
> 
> 标签：python, macos, py2app

我是 OSX 操作系统的新手，我只是想从 Python 启动一段 java 代码。

我正在使用以下代码：

```
import os 
import subprocess

subprocess.call([os.getcwd() + '/contents/home/bin/java', 
                '-jar', 
                os.getcwd() + '/Whoo.jar']) 
```

当作为脚本运行时，它完全按照预期工作。但是，当我使用 Py2App 打包所有内容时，尝试运行该应用程序时突然出错。

### 应用程序的构建过程：

```
py2applet --make-setup test.py 
```

接着，

```
python setup.py py2app -A 
```

注意：在构建过程中，终端中不会出现任何错误。

启动应用程序后，我得到以下信息：

![在此处输入图像描述](../Images/25a7273cbd0951e9852300a52e376fa0.png)

### 控制台输出：

```
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]    argvemulator warning: fetching events failed
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]    Traceback (most recent call last):
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]      File "/Volumes/FLASH_DRIVE/App/start.app/Contents/Resources/__boot__.py", line 342, in <module>
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]        _run()
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]      File "/Volumes/FLASH_DRIVE/App/start.app/Contents/Resources/__boot__.py", line 335, in _run
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]        exec(compile(source, script, 'exec'), globals(), globals())
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]      File "/Volumes/FLASH_DRIVE/App/start.py", line 7, in <module>
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]        os.getcwd() + '/Whoo.jar'])
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 493, in call
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]        return Popen(*popenargs, **kwargs).wait()
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 679, in __init__
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]        errread, errwrite)
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 1249, in _execute_child
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]        raise child_exception
2/21/13 6:08:06 PM  [0x0-0x32c32c].org.pythonmac.unspecified.start[5230]    OSError: [Errno 2] No such file or directory
2/21/13 6:08:06 PM  start[5230] start Error
2/21/13 6:08:10 PM  com.apple.launchd.peruser.501[94]   ([0x0-0x32c32c].org.pythonmac.unspecified.start[5230]) Exited with exit code: 255 
```

有谁知道这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:15:50.693

我猜想py2app转换后的应用程序下的当前工作目录与直接调用它时不同。

尝试记录 的值`os.getcwd()`以查看它从哪里开始

工作目录很可能位于`<application>.App/Contents`文件夹内的某个位置，因此如果您不将资源复制到 .App 捆绑包中，则可能需要上两三个目录才能找到资源（最佳做法是将所有资源都放在应用程序包）。

# android - startActivityForResult 异常行为

> ID：15013997
> 
> 赞同：0
> 
> 时间：2013-02-21T23:09:39.053
> 
> 标签：android

我看不出我的代码有什么问题：

我有一个活动（让我们称之为；A）以这种方式开始另一个活动（B）：

在一个：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
        ...
    gridOpciones.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int pos, long 
            intent = new Intent(ReproductorActivity.this, B.class);
            startActivityForResult(intent, B.RESULT_PATH);
    }
} 
```

我有一个 OnLongItemClickListener 用这个 onItemLongClick 分配给 B' listview

```
@Override
public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
    ctx.onLongClick(arg2);
    return false;
} 
```

ctx 是 B 类中 OnLongItemClickListener 和 onLongClick 的 B 对象所有者：

```
public void onLongClick(int arg2) {
    Intent returnIntent = new Intent();
    returnIntent.putExtra("PATH", getItem(arg2));
    setResult(Activity.RESULT_OK, returnIntent);
    finish();
} 
```

而且我在 A 中也有一个回调函数，如下所示：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, final Intent data){               
    if (requestCode == B.RESULT_PATH) {
        if (resultCode == RESULT_OK) {
        ... get data, do stuff....                   
        }
    }
} 
```

所以，我的问题是它没有用。它显示 B 但回来时什么也不做......

我已经对其进行了调试，当我单击 A 类中的网格元素时，它的 OnItemClickListener`onItemClick`被调用，但是在此之后，A`onActivityResult`被调用，然后出现 B 活动。我长按 B 的一个项目，它执行`onLongClick(int)`但没有回调`A.onActivityResult`...

我不知道会发生什么，有什么想法吗？任何线索？

谢谢。

编辑：调用 OnActivityResult 时，requestCode == B.RESULT_PATH

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:18:32.320

在 onActivityResult 中，第一个 if 语句中应该有 requestCode 而不是 resultCode：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, final Intent data){               
    if (requestCode == FileSelector.RESULT_PATH) {
        if (resultCode == RESULT_OK) {
        ... get data, do stuff....                   
        }
    }
} 
```

# haskell - 有没有一种优雅的方式让函数返回相同类型的函数（在元组中）

> ID：15013998
> 
> 赞同：7
> 
> 时间：2013-02-21T23:09:41.923
> 
> 标签：haskell, recursive-datastructures

我正在使用haskell 来实现一种模式，该模式涉及返回值的函数以及它们本身（或相同类型的函数）。现在我已经这样实现了：

```
newtype R a = R (a , a -> R a)

-- some toy functions to demonstrate    
alpha :: String -> R String
alpha str
    | str == reverse str = R (str , omega)
    | otherwise          = R (reverse str , alpha)

omega :: String -> R String
omega (s:t:r)
    | s == t    = R (s:t:r , alpha)
    | otherwise = R (s:s:t:r , omega) 
```

这些类型函数的驱动力是一个称为级联的函数：

```
cascade :: (a -> R a) -> [a] -> [a]
cascade _ [] = []
cascade f (l:ls) = el : cascade g ls where
    R (el , g) = f l 
```

它接受一个种子函数和一个列表，并返回一个列表，该列表通过将种子函数应用于列表的第一个元素，将其返回的函数应用于列表的第二个元素，依此类推。

这行得通——然而，在将它用于稍微有用的东西的过程中，我注意到很多时候我的基本单元是函数，它们很少返回除自身之外的函数；并且显式声明一个函数返回自身变得有些乏味。我宁愿能够使用像 Monad 的`return`函数这样的东西，但是，我不知道`bind`这些类型的函数会做什么，特别是因为我从未打算将这些与它们首先返回的函数之外的任何东西联系起来.

试图把它硬塞进一个 Monad 开始让我担心我所做的是否有用，所以，简而言之，我想知道的是：

*   我在做坏事吗？如果不，
*   我之前做过的事情/我在这里重新发明轮子吗？如果不，
*   有没有一种优雅的方式来做到这一点，或者我已经达到了这一点并且因为想要某种`return`类似物而变得贪婪？

（顺便说一句，除此之外，“返回自身的函数”或“递归数据结构（函数）”，我不太确定这种模式叫什么，并且很难对其进行有效的研究——如果任何人都可以给我这个模式的名称（如果它确实有一个），仅此一项就非常有帮助）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T01:22:57.737

作为一个高级考虑，我会说你的类型代表一个有状态的流转换器。这里有点令人困惑的是您的类型定义为

```
newtype R a = R (a , a -> R a) 
```

代替

```
newtype R a = R (a -> (R a, a)) 
```

这在流媒体环境中会更自然一些，因为如果你还没有收到任何东西，你通常不会“生产”一些东西。然后，您的函数也将具有更简单的类型：

```
alpha, omage :: R String
cascade :: R a -> [a] -> [a] 
```

如果我们尝试推广流转换器的这个想法，我们很快就会意识到我们将 s 列表转换为`a`s 列表的`a`情况只是一种特殊情况。有了适当的基础设施，我们也可以生成一个`b`s 列表。所以我们尝试泛化类型`R`：

```
newtype R a b = R (a -> (R a b, b)) 
```

我见过这种结构被称为 a [`Circuit`](http://en.wikibooks.org/wiki/Haskell/StephensArrowTutorial#Type_definition_for_.27Circuit.27)，它恰好是一个成熟的[箭头](http://www.haskell.org/haskellwiki/Arrow)。箭头是函数概念的概括，是比单子更强大的构造。我不能假装理解范畴理论的背景，但和他们一起玩肯定很有趣。例如，简单的转换就是`Cat.id`：

```
import Control.Category
import Control.Arrow
import Prelude hiding ((.), id)
import qualified Data.List as L

-- ... Definition of Circuit and instances

cascade :: Circuit a b -> [a] -> [b]
cascade cir = snd . L.mapAccumL unCircuit cir

--
ghci> cascade (Cat.id) [1,2,3,4] 
[1,2,3,4] 
```

我们还可以通过参数化我们作为延续返回的电路来模拟状态：

```
countingCircuit :: (a -> b) -> Circuit a (Int, b)
countingCircuit f = cir 0
    where cir i = Circuit $ \x -> (cir (i+1), (i, f x))

--
ghci> cascade (countingCircuit (+5)) [10,3,2,11]
[(0,15),(1,8),(2,7),(3,16)] 
```

我们的电路类型是一个类别这一事实为我们提供了一种组合电路的好方法：

```
ghci> cascade (countingCircuit (+5) . arr (*2)) [10,3,2,11]
[(0,25),(1,11),(2,9),(3,27)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:14:15.703

看起来您拥有的是流的简化版本。也就是说，一个无限的值流的表示。我认为您不能轻易将其定义为 monad，因为您对种子使用与元素相同的类型，这使得定义`fmap`变得困难（似乎您需要反转提供的函数`fmap`以便能够恢复种子）。您可以通过使种子类型独立于元素类型来使其成为 monad，如下所示

```
{-# LANGUAGE ExistentialQuantification #-}
data Stream a = forall s. Stream a s (s -> Stream a) 
```

这将允许您定义 a`Functor`和`Monad`实例，如下所示

```
unfold :: (b -> (a, b)) -> b -> Stream a
unfold f b = Stream a b' (unfold f)
    where (a, b') = f b

shead :: Stream a -> a
shead (Stream a _ _) = a

stail :: Stream a -> Stream a
stail (Stream _ b f) = f b

diag :: Stream (Stream a) -> Stream a
diag = unfold f
    where f str = (shead $ shead str, stail $ fmap stail str)

sjoin :: Stream (Stream a) -> Stream a
sjoin = diag

instance Functor Stream where
    fmap f (Stream a b g) = Stream (f a) b (fmap f . g)

instance Monad Stream where
    return   = unfold (\x -> (x, x))
    xs >>= f = diag $ fmap f xs 
```

请注意，这仅在将其视为集合时才遵守 Monad 定律，因为它不保留元素顺序。

[这种](http://patternsinfp.wordpress.com/2010/12/31/stream-monad/)对流 monad 的解释使用了无限列表，这在 Haskell 中同样有效，因为它们可以以惰性方式生成。如果您查看库中[Stream](http://hackage.haskell.org/packages/archive/vector/0.10.0.1/doc/html/src/Data-Vector-Fusion-Stream-Monadic.html#Stream)类型的文档`vector`，您会发现一个更复杂的版本，以便可以将其用于高效的流融合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T23:55:28.573

我没有太多要补充的，只是要注意你的`cascade`函数可以写成左折叠（因此也可以写成右折叠，尽管我没有进行转换。）

```
cascade f = reverse . fst . foldl func ([], f)
  where
    func (rs,g) s = let R (r,h) = g s in (r:rs,h) 
```