# StackOverflow 问答 12508000-12508999

# java - 使用 JRadioButton 进行制表符排序

> ID：12508007
> 
> 赞同：1
> 
> 时间：2012-09-20T07:37:30.417
> 
> 标签：java, spring, swing, jradiobutton

我正在使用 Swing 在应用程序（基于 Spring 框架）中开发 GUI。在其中一个屏幕中，我们在一个面板中有几个 JButton、JLabels、JFormattedtextField 和 JRadioButton。问题是：

1）。当我从键盘按下选项卡按钮时，控件不会转到 JRadioButton 字段（尽管它会转到它之前和之后的其他组件）。它不会出现在这些单选按钮上（应用程序的一个严重问题）。如何解决这个问题。

2).还要为每个单选按钮设置文本（标签），我必须在单独的标签中进行：

```
<label text="Raiding" constraints="21,1" font="Arial-PLAIN-12" />
    <buttongroup>
    <radiobutton id="raidingYesID"  font="Arial-PLAIN-12"
                    opaque="false" constraints="22,1" label="Yes"/>
    <label text="Yes" constraints="23,1" font="Arial-PLAIN-12" />                   
    <radiobutton id="raidingNOID" font="Arial-PLAIN-12"
                   selected="true" opaque="true" constraints="24,1"/>            
    <label text="No" constraints="25,1" font="Arial-PLAIN-12" />   
    </buttongroup> 
```

我试图在java中做到这一点，但标签没有出现：

```
raidingYesID.setLabel("Yes");
raidingYesID.setName("Yes");
raidingNOID.setText("No"); 
```

他们都没有任何区别，但我可以通过使用以下方法在控制台上获得标签：

```
System.out.println(raidingYesID.getLabel()); 
```

建议任何解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:51:49.520

For your second question: use `setText()` to set the `JRadioButton` text and use `getText()` to get it back. The button text can also be set in the constructor.

# javascript - 使用空图像而不是 ajax 进行 post 有什么缺点？

> ID：12508012
> 
> 赞同：3
> 
> 时间：2012-09-20T07:37:43.763
> 
> 标签：javascript, jquery

有时当我只需要发送数据并且我不关心通过 GET 发送它时，我只使用这个：

```
var t = new Image();
t.src = 'get.php?arg1='+arg1+'&arg2='+arg2....; 
```

我想知道使用这种方法有什么缺点？或者使用这种方法通过 GET 方法发布数据并模拟 AJAX 是否完全可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T07:41:29.270

我宁愿使用 AJAX 来发送 AJAX 请求。浏览器不断发展，XHR 对象也在发展，因此如果您使用图像，可能会有一些您无法从中受益的优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:43:16.497

实际的缺点可能是缺少错误处理程序，但如果您不关心您的请求是否真正成功，应该很好。

注意：浏览器也针对请求图像进行了优化... :)

# orientation - iOS 6 设备方向问题

> ID：12508014
> 
> 赞同：7
> 
> 时间：2012-09-20T07:37:57.157
> 
> 标签：orientation, ios6, iphone-5

我有 2 个视图控制器。我希望第一个视图控制器仅是纵向模式，而第二个视图控制器应该支持所有方向。请帮我。

在 AppDelegate 类中，我的代码是：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    UINavigationController * navController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    self.window.rootViewController = self.viewController;
  //  [self.window addSubview:navController.view];
    [self.window makeKeyAndVisible];   
    return YES;
}
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
    NSLog(@"supportedInterfaceOrientationsForWindow");
    return  UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

第一个 ViewController 代码是：

```
-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}
// Tell the system which initial orientation we want to have
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationMaskPortrait;
} 
```

第二个 ViewController 代码是：

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
}

-(BOOL)shouldAutorotate
{
    return YES;
}

// Tell the system which initial orientation we want to have
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

我检查的是第一个和第二个 ViewController 没有调用“shouldAutorotate”方法。

您的快速帮助将非常可观。谢谢。卡希夫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T07:48:49.213

尝试为第二个 UIViewController 设置supportedInterfaceOrientations，如下所示：

```
- (BOOL) shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeRight; // add any other you want
} 
```

此外，在第一个 UIViewController 中以相同的方法仅启用肖像。

也许您还需要在第二个 UIViewController 需要支持的项目设置中启用这些方向。

* * *

**[编辑#1：添加示例应用程序]**

在这里，您可以使用示例应用程序来解决您的问题，希望如此。

**AppDelegate.h**

```
#import <UIKit/UIKit.h>

@class FirstViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) FirstViewController *viewController;

@end 
```

**AppDelegate.m**

```
#import "AppDelegate.h"

#import "FirstViewController.h"

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end 
```

**第一视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController

- (IBAction)goToSecondViewController:(id)sender;

@end 
```

**第一视图控制器.m**

```
#import "FirstViewController.h"
#import "SecondViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self)
    {
        // Custom initialization
    }

    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskPortrait;
}

- (IBAction)goToSecondViewController:(id)sender
{
    SecondViewController *svc = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    [self presentViewController:svc animated:NO completion:nil];
}

@end 
```

**SecondViewController.h**

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController

- (IBAction)goToFirstViewController:(id)sender;

@end 
```

**第二视图控制器.m**

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self)
    {
        // Custom initialization
    }

    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

-(BOOL)shouldAutorotate
{
    return YES;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeLeft;
}

- (IBAction)goToFirstViewController:(id)sender
{
    [self dismissViewControllerAnimated:NO completion:nil];
}

@end 
```

**FirstViewController.xib**

![FirstViewController.xib](../Images/b57e508a45c8aabe9f7cda2c2eb002c5.png)

**SecondViewController.xib**

![SecondViewController.xib](../Images/8e4431b8574663999be5df8688b62c75.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T06:36:25.670

根据您的描述，第一个视图控制器被推入导航控制器。`shouldAutorotate`您对and的方法定义`supportedInterfaceOrientations`是绝对正确的。在方向更改期间，您的导航控制器的 shouldRotate 只会触发并且不会触发您的第一个视图控制器（导航控制器的子级） shouldAutorotate。所以你必须`category`在你的视图控制器或单独的文件中导航控制器并在需要的地方导入它。UINavigation Controller 类别的代码如下。

.h 文件有这个代码

```
 @interface UINavigationController (autoRotate)

-(BOOL)shouldAutorotate;
- (NSUInteger)supportedInterfaceOrientations;

@end 
```

.m 文件有这个代码

```
 #import "UINavigationController+autoRotate.h"

@implementation UINavigationController (autoRotate)

-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
} 
```

如果您在单独的文件中编写类别，则必须在您的第一个和第二个视图控制器中导入 .h 文件作为`#import "UINavigationController+autoRotate"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:56:13.590

一个简单的解决方案：

实施 ：`- (NSUInteger)supportedInterfaceOrientations`

当从 AppDelegate.m 询问时

`- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window`

有关更多详细信息，请参见此处： [iOS 6 横向和纵​​向](https://stackoverflow.com/questions/12565188/ios-6-landscape-and-portrait-orientation/14704401#14704401)

# macos - 什么可能会阻止自定义 url 方案在启动服务数据库中注册

> ID：12508018
> 
> 赞同：0
> 
> 时间：2012-09-20T07:38:15.253
> 
> 标签：macos, url-scheme

我开发了一个从自定义 url 方案（类似于“myapp://123”）启动的软件。它适用于我的两台测试 Mac 机器（分别运行 10.7.3 和 10.8），但不知何故它不适用于另一台运行 10.7.3 的机器

是否有任何系统或安全设置禁用自定义 url 方案，或者无论如何我可以解决这个问题？这似乎不仅仅是一个错误的启动服务数据库设置，因为客户端的三台 Mac 无法注册自定义 url 方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:46:48.413

事实证明，客户的计算机运行的 Mac OS 版本对于开发的应用程序来说太低了。我想第一步是解决这个问题是为了确保应用程序可以首先运行！

# c# - 列表视图中显示的模糊图像

> ID：12508019
> 
> 赞同：1
> 
> 时间：2012-09-20T07:38:17.380
> 
> 标签：c#, winforms, listview

在我的 winform 应用程序中，我使用 ImageList 将图像添加到列表视图。但是当我增加图像大小（即高度和宽度）时，小图像（例如 bmp 图像）变得模糊。

有什么办法可以防止imgs模糊？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:39:54.190

不，没有。如果您制作的图像大于原始尺寸，它们总是会丢失质量。首先尝试使用更大的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:41:51.670

如果这些是小图像，那么显然它会变得模糊。如果您想要更大的图像并且在 Internet 上找不到它们，请尝试通过在 Photoshop 或[gimp](http://www.gimp.org/downloads/)（免费产品）中勾勒小图像来创建自己的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:10:26.383

在 .NET ListView 中，您可能必须将图像包装在标准大小的位图中，然后将整个位图放入项目中：

```
Bitmap bmp = new Bitmap(64, 64);
Graphics grfx = Graphics.FromImage(bmp);

grfx.DrawImage(
    myImage,
    (bmp.Width - myImage.Width) / 2,
    (bmp.Height - myImage.Height) / 2);

listView.Items[0].Image = bmp; 
```

您可以尝试[Better ListView Express](http://www.componentowl.com/better-listview-express)或[Better ListView](http://www.componentowl.com/better-listview)。它支持开箱即用的任意大小的图像。当图像很小时，它将其放在中心而不调整大小并防止模糊：

![在此处输入图像描述](../Images/5d8b5ba789b21dbd08db630bddde1ae3.png)

[在此处输入链接描述](http://www.componentowl.com/better-listview)

# php - prestashop 1.5 核心文件覆盖

> ID：12508022
> 
> 赞同：3
> 
> 时间：2012-09-20T07:38:34.380
> 
> 标签：php, prestashop

我想覆盖 prestashop 1.5 核心文件`FrontController.php`以从`override\classes\controller`文件夹覆盖，但它没有加载我的覆盖文件夹文件。

```
<?php

    class FrontController extends FrontControllerCore
    {

    /* Display a specific page if the user country is not allowed */
        protected function displayRestrictedCountryPage() {

        }
    } 
```

任何人都知道如何在 1.5 中重写核心 prestashop 文件

我也关注这个[文档](http://doc.prestashop.com/display/PS15/Overriding+default+behaviors)，但没有办法解决。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T11:18:25.137

Prestashop 1.5.x 自动合并默认覆盖文件和您自定义文件的`module::install()`功能。您只需要在您的模块文件夹中创建一个正确的层次结构：`modules/your_package/override/classes/controller/FrontController.php`使用您的自定义功能。如果您没有扩展名并想手动添加覆盖 - 您需要更改文件`override/classes/controller/FrontController.php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-10T12:36:48.993

只需删除*/cache*文件夹下的**class_index.php 。**

 *它带有 Presta 的 Class & Controller 文件详细信息。删除并重新加载页面后，prestashop 将自动生成具有最新更改的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-25T11:19:04.753

问题可能是，您的其中一个函数包含`parent::nameOfFunction`，您应该通过要覆盖的父函数的继承来替换函数中的父函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-25T12:45:07.263

您尝试覆盖的函数在核心函数 init() 中调用。您应该做的是同时覆盖 init() 和 displayRestrictedCountryPage()。然后在 init 函数中使用 Controller::init() 而不是 parent::init()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-10T14:21:38.853

在覆盖您想要的任何内容后，不要忘记删除缓存文件夹内容并重新创建它们，因为这会浪费我一段时间，直到在[这里找到解决方案](http://www.prestashop.com/forums/topic/238197-solved-overrides-not-working-anymore-in-154/)*

# api - 如何通过 SOAP API 禁用/停用 SalesForce 用户？

> ID：12508026
> 
> 赞同：3
> 
> 时间：2012-09-20T07:39:02.740
> 
> 标签：api, soap, salesforce

我想通过使用 SOAP API 以编程方式禁用用户。我怎样才能做到这一点？我正在使用合作伙伴 API，并且我有开发人员版。我已经设置了管理用户权限。我已经通过[这个](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_user.htm)链接。我正在寻找可以帮助我禁用/停用用户的代码。

这是我的代码：

```
import com.sforce.soap.partner.Connector;
import com.sforce.soap.partner.PartnerConnection;
import com.sforce.soap.partner.QueryResult;
import com.sforce.soap.partner.sobject.SObject;
import com.sforce.ws.ConnectionException;
import com.sforce.ws.ConnectorConfig;

public class DeactivateUser {
    public static void main(String[] args) {
        ConnectorConfig config = new ConnectorConfig();

        config.setUsername("waprau@waprau.com");
        config.setPassword("sjjhggrhgfhgffjdgj");

        PartnerConnection connection = null;

        try {
            connection = Connector.newConnection(config);
            QueryResult queryResults = connection.query("SELECT Username, IsActive from User");

        if (queryResults.getSize() > 0) {
            for (SObject s : queryResults.getRecords()) {
                if(s.getField("Username").equals("abcd@pqrs.com")){
                    System.out.println("Username: " + s.getField("Username"));
                    s.setField("IsActive", false);
                }
                System.out.println("Username: " + s.getField("Username") + " IsActive: " + s.getField("IsActive"));
            }
        }
        } catch (ConnectionException ce) {
            ce.printStackTrace();
        }
    }
} 
```

这是输出：

```
Username: waprau@waprau.com IsActive: true
Username: jsmith@ymail.net IsActive: false
Username: abcd@pqrs.com
Username: abcd@pqrs.com IsActive: false 
```

但是，在 UI 中，当我转到“我的姓名”>“设置”>“管理用户”>“用户”时，它始终显示用户 abcd@pqrs.com 的“活动”复选框已选中:-(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T13:13:53.127

看起来您实际上并未将更新发送回 Salesforce - 您只是`IsActive`在本地设置为 false。您需要使用调用来`PartnerConnection.update(SObject[] sObjects)`让 Salesforce 反映您的更改，如下所示：

```
try {
    connection = Connector.newConnection(config);
    QueryResult queryResults = connection.query("SELECT Id, Username, IsActive from User");

    if ( queryResults.getSize() > 0 ) {
        // keep track of which records you want to update with an ArrayList
        ArrayList<SObject> updateObjects = new ArrayList<SObject>();
        for (SObject s : queryResults.getRecords()) {
            if ( s.getField("Username").equals("abcd@pqrs.com") ){
                System.out.println("Username: " + s.getField("Username"));
                s.setField("Id", null);
                s.setField("IsActive", false);
            }
            updateObjects.add(s);    // if you want to update all records...if not, put this in a conditional statement
            System.out.println("Username: " + s.getField("Username") + " IsActive: " + s.getField("IsActive"));
        }
        // make the update call to Salesforce and then process the SaveResults returned
        SaveResult[] saveResults = connection.update(updateObjects.toArray(new SObject[updateObjects.size()]));
        for ( int i = 0; i < saveResults.length; i++ ) {
            if ( saveResults[i].isSuccess() )
                System.out.println("record " + saveResults[i].getId() + " was updated successfully");
            else {                        
                // There were errors during the update call, so loop through and print them out
                System.out.println("record " + saveResults[i].getId() + " failed to save");
                for ( int j = 0; j < saveResults[i].getErrors().length; j++ ) {
                    Error err = saveResults[i].getErrors()[j];
                    System.out.println("error code: " + err.getStatusCode().toString());
                    System.out.println("error message: " + err.getMessage());
                }
            }
        }
    }
} catch (ConnectionException ce) {
        ce.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T19:26:04.463

如果您已经知道 Id，则可以直接使用用户记录而无需 SOQL 查询。

```
SalesforceSession session = ...;

sObject userSObject = new sObject();
userSObject.Id = "00570000001V9NA";
userSObject.type = "User";
userSObject.Any = new System.Xml.XmlElement[1];

XmlDocument xmlDocument = new XmlDocument();
XmlElement fieldXmlElement =  xmlDocument.CreateElement("IsActive");
fieldXmlElement.InnerText = bool.FalseString;
userSObject.Any[0] = fieldXmlElement;

SaveResult[] result = session.Binding.update(new sObject[] { userSObject });
foreach(SaveResult sr in result)
{
    System.Diagnostics.Debug.WriteLine(sr.success + " " + sr.id);
    if(!sr.success)
    {
        foreach(Error error in sr.errors)
        {
            System.Diagnostics.Debug.WriteLine(error.statusCode + " " + error.message);
        }
    }
} 
```

# jquery - 无法在 jquery 自动完成中解析来自 DJango 视图的 json 输出

> ID：12508027
> 
> 赞同：1
> 
> 时间：2012-09-20T07:39:04.527
> 
> 标签：jquery, django, json, autocomplete, tastypie

我开发了一个基于美味的 REST api，它返回正确的 JSON

如果我开始在自动完成的城市文本框中输入 mou，以下是返回的 JSON (JQuery AutoComplete)

```
{"meta":    {"limit": 10, "next": null, 
             "offset": 0, "previous": null, "total_count": 1}, 
 "objects": [{"id": "1", "name": "Mountin View", 
              "resource_uri": "/api/meta/city/1/"}]
} 
```

如何在城市文本框中显示结果并允许用户选择（如果返回的对象超过 1 个）。

这是我的 JQuery 代码，但我观察到只有 showResult 被调用（我在每个函数中都有警报）我错过了什么吗？

```
$("#city").autocomplete('/api/meta/city/', {
    dataType: "json",
    selectFirst: true,
    formatItem:function(item, index, total, query)
               { 
                   alert("formatItem");return item.name; 
               },
    formatMatch:function(item)
                { 
                    alert("formatMatch");return item.name;
                },
    formatResult:function(item)
                 { 
                     alert("formatResult");return item.name;
                 },
    parseJSON:function(data) 
              { 
                 alert("parseJSON");
                 return $.map(data, function(item) 
                                    { 
                                        return { data: item,
                                                 value: item.name,
                                                 result: item.name
                                                }
                                    });
              },
    showResult: function(value, data)
                {
                    alert("ShowResult");
                    json_data = jQuery.parseJSON( value );
                    for(i=0;i< json_data.objects.length;i++)
                    {
                        alert(json_data.objects[i]);
                    }
                    return value;
                }
}); 
```

# c# - 卸载后 AppDomain 和使用的 DLL 的问题

> ID：12508029
> 
> 赞同：0
> 
> 时间：2012-09-20T07:39:11.210
> 
> 标签：c#, plugins, service, appdomain, appdomainsetup

我有一个问题，加载到我的新 Appdomain 的 DLL 也加载到了主 appdomain！

我有一个继承自 MarshalByRefObject 的类“Servicebase”。

现在我有不同的子类继承自这个基类。

这些子类应该在它们自己的应用程序域中实例化。

我用这段代码做的：

```
 AppDomainSetup setup = new AppDomainSetup();
        setup.ApplicationBase = Path.GetDirectoryName(dllFile);
        setup.ApplicationName = Path.GetFileNameWithoutExtension(dllFile);
        setup.LoaderOptimization = LoaderOptimization.MultiDomainHost;
        setup.ShadowCopyFiles = "true";
        setup.ConfigurationFile = AppDomain.CurrentDomain.SetupInformation.ConfigurationFile;

        hostAppDomain = AppDomain.CreateDomain(setup.ApplicationName, AppDomain.CurrentDomain.Evidence, setup); 
```

这行得通...

现在我用这段代码创建我的实例：

```
 host = hostAppDomain.CreateInstanceFrom(dllFile, className.Split(',')[0]); 
```

当我现在检查“AppDomain.CurrentDomain.GetAssemblies()”时，我的实例程序集没有加载到我的主程序集中。

但执行此操作后：

```
 var inst = (ServiceBase)host.Unwrap(); 
```

我当前的程序集也加载了 dll。

谁能告诉我为什么？我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:53:00.637

ServiceBase 是否与派生类在同一个程序集中？

如果是，那么您应该将它们拆分为两个不同的程序集。一个带有契约（基类），另一个带有派生类。然后，您将不会从您的主项目中引用派生类程序集。只有契约程序集应该被主项目引用，并且只有它才会被加载到主 AppDomain 中。

# entity-framework - Entity Framework 5 模型优先 - IDisposable 去哪儿了？

> ID：12508031
> 
> 赞同：13
> 
> 时间：2012-09-20T07:39:14.753
> 
> 标签：entity-framework, entity-framework-5, ef-model-first

首先在 Entity Framework 5 模型中，由于类文件的生成方式，似乎存在一些重大变化（不再生成代码，而是 T4 模板）

2个例子：

*   生成的上下文文件不再实现 IDisposable
*   不再有一个构造函数需要一个连接字符串

是否有更多重大变化？他们的解决方案是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-24T16:09:35.403

从 Entity Framework 5 中的模型生成的默认代码现在继承 DbContext 而不是 ObjectContext。

这仍然实现了 IDisposable，但是如果您从类似于此的代码行中收到错误：

```
using (var mymodel = new MyModelContext()) { ... } 
```

...抱怨没有实现 IDisposable，那么您的问题很可能是您的模型是在引用 EF5 的单独程序集中定义的，并且您没有向项目添加 EF5 引用。

正如 Ladislav Mrnka 在他的回答中已经提到的那样，如果要将连接字符串传递给构造函数，则必须手动创建自己的构造函数来执行此操作。

如果您想将 Entity Framework 切换回生成代码的旧样式，这将自动生成您正在寻找的构造函数，请按照以下步骤操作：

1.  单击 EDMX 文件的设计器表面，然后查看属性窗口。找到一个名为“代码生成策略”的属性并将其设置为“默认”而不是“无”。这将告诉 Visual Studio 开始在一个大文件中为 MyModel.Designer.cs 中的对象模型创建代码，这次使用 ObjectContext 而不是 DbContext。
2.  从您的 EDMX 文件下方删除以下子文件：MyModel.Context.tt、MyModel.tt。这些是您不再需要的自动生成的文件。如果您不删除它们，您将遇到类命名冲突，因为您的对象将被创建两次。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T08:02:17.513

> 生成的上下文文件不再实现 IDisposable

`IDisposable`仍然由父上下文类型实现。生成的类型仍然是一次性的。

> 不再有一个构造函数需要一个连接字符串

它现在使用约定来获取连接字符串，但您可以将自己的构造函数添加到模板或上下文的部分类部分。

> 是否有更多重大变化？他们的解决方案是什么？

这是一个彻底的改变，因为它使用不同的 API - DbContext API 而不是 ObjectContext API，这意味着不同的类型、不同的方法、POCO 实体等。如果你想恢复原始代码生成，你必须删除那些 T4 模板并启用代码生成如 .Designer.cs 文件中所述，但当前推荐的方法是使用 POCO 和 DbContext API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-07T01:19:27.333

我在 using 语句需要扩展 IDisposable 的类型时遇到了同样的问题...原来我忘记在我的项目中引用 System.Data.Entity ...添加了引用并解决了问题。

# c# - C# - 使用 Tectia 将文件从 Windows 传输到 unix 时如何删除 ctrl M 字符？

> ID：12508032
> 
> 赞同：13
> 
> 时间：2012-09-20T07:39:18.000
> 
> 标签：c#, windows, unix, newline

在 C# 模块中，我想使用 Tectia 将文件从 Windows 传输到 Unix。但问题是当这些文件被传输（Ascii 或二进制模式）并使用 VI 编辑器打开时，我们会得到 ^M 字符。我对此进行了搜索，但解决方案是在使用实用程序传输文件后删除这些 ^M 字符。有什么方法可以使这些 ^M 字符不首先出现。在发送这些文件之前，是否有任何选项可以在代码中使用解决方法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-03-24T22:13:28.577

我如何能够在 vi 编辑器中删除它：

*   然后`:%s/`按 `ctrl`+`V`然后`ctrl`+ 。`M`这会给你`^M`
*   然后`//g` （看起来像：）`:%s/^M`按`Enter`应该全部删除。

祝你好运！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-20T07:45:51.687

您可以安装和使用[dos2unix](https://linux.die.net/man/1/dos2unix)。安装后只需运行：

```
>dos2unix yourfile.txt 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-08-19T15:34:17.037

如果您只需要删除`^M`字符（而不是用 替换它们`\n`）：

```
sed -i -e 's/\r//g' yourfile.txt 
```

如果您想将它们替换为`\n`：

```
sed -i -e 's/\r/\n/g' yourfile.txt 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-10T09:31:08.857

在 vi 编辑器中删除`Ctrl`+的另一个技巧：`M`

```
:%s/^V^M//g 
```

有关[删除`Ctrl`+`M`字符的更多技巧](http://spytm.com/find-remove-controlm-characters-unix/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-20T10:29:04.007

尝试在终端中执行以下命令（可能需要先安装）：

```
fromdos <your-file> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-28T06:23:30.883

谢谢各位的帮助。我使用解决方法解决了这个问题。Windows 使用 CR+LF (\r\n) 作为行尾，Unix 使用 LF (\n) 作为行尾。我拿了 Windows 文件并替换了 CR+LF(\r\n ) 在代码本身中使用 LF(\n) 没有任何实用程序。这使文件与 Unix 系统兼容，然后我使用 SFTP 传输文件，它在没有 ^M 字符的情况下在 Unix 上工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-26T10:30:56.510

```
:%s/^V^M// 
```

1.  `g`根本不需要。

2.  `%s`- 查找并替换您想要替换的文本

3.  `^V^M`替换为“应该在双斜杠之后”如果您想替换为空，请将其保留为空

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-30T08:56:31.263

尝试

```
tr -d '\015' <INPUT_FILE > OUTPUT_FILE 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-21T16:07:01.410

`tr '\015' '\n' < /tmp/file-with-ctrlm.txt > /tmp/no-ctrlm.txt`

*   此命令使用 CtrlM 的 ASCII 代码，并将所有 CtrlM 替换为换行符。
*   它避免了 Ctrl-V、Ctrl-M，并且也适用于 Mac。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-30T17:55:39.883

对我来说，这是唯一可行的..不是unix2dos或任何东西......

sed -e 's/\x0D//g'

参考：

十六进制的 0a 是与打印字符相对的控制字符，称为换行符。

十六进制的 0d 称为回车。

# javascript - 加载 Google 广告时是否触发了任何事件

> ID：12508035
> 
> 赞同：1
> 
> 时间：2012-09-20T07:39:33.713
> 
> 标签：javascript, adsense

在页面上加载谷歌广告后，我正在尝试做很多事情。我可以通过检查 div ID 和其他可用方法来做到这一点，但是，我想知道 Google 是否为开发人员提供了另一种方法。

我确信触发了 javascript 事件，只是想知道开发人员是否可以利用这些事件并在他们的应用程序中使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:39:33.713

`AdsLoadedEvent.ADS_LOADED`我找到了您可以订阅的事件回调。[http://support.google.com/adsense/bin/answer.py?hl=en&answer=1705827](http://support.google.com/adsense/bin/answer.py?hl=en&answer=1705827)提供了很好的文档。

您可以通过订阅事件来判断广告何时成功返回`AdsLoadedEvent.ADS_LOADED`

```
adsLoader.addEventListener(AdsLoadedEvent.ADS_LOADED, onAdsLoaded); 
```

# c - 为 c 生成函数调用

> ID：12508043
> 
> 赞同：0
> 
> 时间：2012-09-20T07:40:09.080
> 
> 标签：c, gcc, dot

![](../Images/bc7566267353ce8b59824859e694605c.png)

我使用`-finstrument-functions`生成每个函数调用的进入和退出信息，并使用点来绘制它，就像上面一样。但是，我发现了一个问题，在我的`main`函数中，我创建了两个线程，一个叫 driver_TASL，另一个叫 keyBoard_TASK。但在我生成的图片中，似乎我的`keyBoard_TASK`被调用了`driver_TASK`。应该像这两个 TASK 所调用的`main`

**备注：我不能上传图片，所以我在下面描述它：**

在我生成函数调用后，它应该是这样的：

*   `main`称呼`driver_TASK`
*   `main`称呼`keyBoard_TASK`

然而，它变成

*   `main`称呼`driver_TASK`
*   `driver_TASK`称呼`keyboard_TASK`

**为什么`keyBoard_TASK`被调用`driver_TASK`？`main`我认为它应该被称为**

在我的源代码中，我把它们写成这样（我在代码中删除了一些打印函数）：

```
int main(/*@ unused @*/int argc, /*@ unused @*/char *argv[]) //comment for lint
{
    int         res;
    pthread_t   driver_thread, keyBoard_thread;
    void        *thread_result;

    res = pthread_create(&driver_thread, NULL, driver_TASK, (void *)&_gDriverStatus);
    if(res != 0)
    {
        perror("Thread Creation Failed");
        exit(EXIT_FAILURE);
    }

    sleep(1);

    res = pthread_create(&keyBoard_thread, NULL, keyBoard_TASK, (void *)&_gKeyStatus);
    if(res != 0)
    {
        perror("Thread Creation Failed");
        exit(EXIT_FAILURE);
    }

    res = pthread_join(driver_thread, &thread_result);
    if(res != 0)
    {
        perror("Thread Join Failed");
        exit(EXIT_FAILURE);
    }

    res = pthread_join(keyBoard_thread, &thread_result);
    if(res != 0)
    {
        perror("Thread Join Failed");
        exit(EXIT_FAILURE);
    }

    exit(EXIT_SUCCESS);
} 
```

我还附上了我的**自动**点文件，函数调用流程图是pvtace自动生成的

```
digraph DEMO {

  main [shape=rectangle]
  driver_TASK [shape=rectangle]
  DDI_DRIVER_Probe [shape=rectangle]
  _Driver_Clear [shape=ellipse]
  _Driver [shape=ellipse]
  DRIVER_Probe_Demo [shape=ellipse]
  DDI_DRIVER_Init [shape=rectangle]
  DRIVER_Init_Demo [shape=rectangle]
  _DRIVER_Init_Demo [shape=ellipse]
  DDI_DRIVER_Running [shape=rectangle]
  DRIVER_Running_Demo [shape=rectangle]
  _DRIVER_Running_Demo [shape=ellipse]
  keyBoard_TASK [shape=rectangle]
  main -> DBG_PrintColor [label="2 calls" fontsize="10"]
  main -> driver_TASK [label="1 calls" fontsize="10"] //this is correct
  driver_TASK -> DBG_PrintColor [label="6 calls" fontsize="10"]
  driver_TASK -> DDI_DRIVER_Probe [label="1 calls" fontsize="10"]
  driver_TASK -> DDI_DRIVER_Init [label="1 calls" fontsize="10"]
  driver_TASK -> DDI_DRIVER_Running [label="1 calls" fontsize="10"]
  driver_TASK -> keyBoard_TASK [label="1 calls" fontsize="10"] //this is not correct
  DDI_DRIVER_Probe -> _Driver_Clear [label="1 calls" fontsize="10"]
  DDI_DRIVER_Probe -> _Driver [label="1 calls" fontsize="10"]
  DDI_DRIVER_Probe -> DRIVER_Probe_Demo [label="1 calls" fontsize="10"]
  DDI_DRIVER_Init -> _Driver [label="1 calls" fontsize="10"]
  DDI_DRIVER_Init -> DRIVER_Init_Demo [label="1 calls" fontsize="10"]
  DRIVER_Init_Demo -> _DRIVER_Init_Demo [label="1 calls" fontsize="10"]
  DDI_DRIVER_Running -> _Driver [label="1 calls" fontsize="10"]
  DDI_DRIVER_Running -> DRIVER_Running_Demo [label="1 calls" fontsize="10"]
  DRIVER_Running_Demo -> _DRIVER_Running_Demo [label="1 calls" fontsize="10"]
  keyBoard_TASK -> DBG_PrintColor [label="6 calls" fontsize="10"]

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:20:54.583

我假设您正在使用[“工具”库](http://www.suse.de/~krahmer/instrumental/instrumental.pdf)`__cyg_profile_func_enter()`来收集调用图信息（如果没有，您应该指出您正在使用什么和/或您在and`__cyg_profile_func_exit()`例程中做了什么）。

查看实现（可在[http://www.suse.de/~krahmer/instrumental/](http://www.suse.de/~krahmer/instrumental/)获得），很明显调用图信息不是以线程安全的方式收集的。每个被调用的函数在被调用时都简单地记录在日志文件中，调用图的深度保存在一个全局变量（实际上是一个静态变量）中。有关调用链的信息也保存在一个全局数组中。

所以发生的事情是发生了以下事件：

```
__cyg_profile_func_enter()  - for main() on main thread
__cyg_profile_func_enter()  - for driver_TASK() on driver_thread
__cyg_profile_func_enter()  - for keyBoard_TASK() on keyboard_thread

... 
```

事实上，这些事件恰好按此顺序发生，而没有干预`__cyg_profile_func_exit()`事件，这意味着器乐库记录的事情就像：

```
main()
|
+--- driver_TASK()
     |
     +--- keyBoard_TASK() 
```

当每个线程真的应该有单独的调用图时（这将需要检测中的线程意识）。要解决此问题，您需要执行以下操作之一：

*   找到一个线程感知的仪器库
*   为您现在使用的线程添加线程感知
*   手动修复生成的日志（如果线程功能相对简单，这可能很简单，但结果可能是一项大型/复杂的任务）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:00:24.643

问题必须在于您如何检测功能。严格来说，`main`不是调用这些函数中的任何一个；启动线程不等同于函数调用。您的两个函数都应该只显示一些系统函数作为它们的调用者。`main`不在他们的调用堆栈上。

现在`main`你的两个函数之间的关系是一个特殊的依赖关系，你应该以不同的方式跟踪它。

# python - python distutils：访问已编译扩展的名称

> ID：12508047
> 
> 赞同：1
> 
> 时间：2012-09-20T07:40:26.970
> 
> 标签：python, distutils

我使用 distutils 来编译一个基于 swig 的扩展模块：

`python setup.py build_ext`产生文件`_my_module_ext.cpython-32m.so`（从一个`.c`和一个`.i`文件）。这个名称似乎取决于使用的 python 版本（在我的例子中，它是 python 3.2）。

如何`setup.py`从已安装包中的模块内部或什至从模块内部访问此共享对象的名称？

我需要这个的原因是，我有一个单独的、基于 ctypes 的 python 文件，它想要使用`numpy.ctypeslib.load_library`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:04:42.307

后缀可通过`sysconfig.get_config_var('SO')`. [在PEP 3149](http://www.python.org/dev/peps/pep-3149/)上阅读有关 ABI 标记的共享库的更多信息。

# c++ - OpenCV获取连接的边缘

> ID：12508049
> 
> 赞同：2
> 
> 时间：2012-09-20T07:40:31.827
> 
> 标签：c++, image-processing, opencv, contour, centroid

我想使用它的边缘形成手的不规则形状，以便我可以使用[http://opencv.itseez.com/doc/tutorials/imgproc/shapeescriptors/moments/moments.html?highlight=找到这只手的质心时刻#代码](http://opencv.itseez.com/doc/tutorials/imgproc/shapedescriptors/moments/moments.html?highlight=moment#code)。精明的功能切割边缘，所以我无法从中获得良好的轮廓。[这是输出http://imageshack.us/photo/my-images/208/cannywithblur.png/](http://imageshack.us/photo/my-images/208/cannywithblur.png/) 和代码的示例。

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

#include <iostream>
#include <stdio.h>
#include <stdlib.h>
using namespace cv;
using namespace std;

int main(){

    cv::Mat image= cv::imread("open_1a.jpg");
    cv::Mat contours_mat;
    cv::Mat gray_image;

    blur( image, image, Size(3,3) );

    cv::Canny(image,
        contours_mat,
        40,
        120);
    cv::namedWindow("Image");
    cv::imshow("Image",image);
    cv::namedWindow("Canny");
    cv::imshow("Canny",contours_mat);
    cv::waitKey(0);
} 
```

我想得到一个封闭的轮廓，只有一个轮廓。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:45:36.610

您可以尝试应用二进制图像的形态闭合，它应该连接具有小于结构元素大小的间隙的边缘。

[文档中的对应函数](http://opencv.itseez.com/modules/imgproc/doc/filtering.html?highlight=morphologyex#morphologyex)

[形态学操作教程](http://docs.opencv.org/doc/tutorials/imgproc/opening_closing_hats/opening_closing_hats.html#morphology-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T02:16:02.133

您可以尝试均值移位聚类，它可以为手部生成一个很好的、大的连接区域。尝试仅根据边缘识别形状可能会很棘手，尤其是在形状不是简单多边形的情况下。

[http://my.safaribooksonline.com/book/programming/opencv/9780596516130/tracking-and-motion/mean-shift_and_camshift_tracking](http://my.safaribooksonline.com/book/programming/opencv/9780596516130/tracking-and-motion/mean-shift_and_camshift_tracking)

如果均值偏移（或类似算法）可以在手和其他物体之间产生很好的分割，那么找到几何中心或质心就很简单了。

你能改变你的灯光吗？这可能会有所帮助。手指末端和中指上的指甲呈现出一个问题，因为对比度低：背景颜色和中指指甲颜色几乎没有差别。

来自正面的准直照明将消除阴影。另一种选择是使用背光。

如果由于某种原因您必须使用边缘，那么连接断边的最有前途的技术之一（“形状补全”）依赖于“自然”或“美学”曲线，例如欧拉螺旋。给定两个端点和这些端点的切线，可以找到一条自然的连接曲线。

[http://www.lems.brown.edu/vision/researchAreas/EulerSpiral/index.html](http://www.lems.brown.edu/vision/researchAreas/EulerSpiral/index.html)

# validation - 可以在我的网站可用时访问它（在 http://validator.w3.org 上）

> ID：12508050
> 
> 赞同：0
> 
> 时间：2012-09-20T07:40:32.280
> 
> 标签：validation, web

我想检查 HTML validate (validator.w3.org) 并从 xml-sitemaps.com 创建站点地图

我的网站：game.tocdo.vn

我在 validator.w3.org 上收到错误：

> *   尝试检索[http://game.tocdo.vn/](http://game.tocdo.vn/)时收到以下意外响应：
>     
>     
>     
>     500 无法连接到 game.tocdo.vn:80（连接：连接超时）

我在 xml-sitemaps.com 上收到错误：

> 访问指定的 URL 时出错：http: [//game.tocdo.vn/](http://game.tocdo.vn/) 请确保指定正确的网站 URL 并重新提交您的请求。

在这段时间内，我的网站仍然可以正常访问。我的网站会怎样？

请帮帮我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:44:24.283

你确定它有效吗？您是否尝试过从当前网络上的设备以外的设备访问它？

您可能有内部 DNS 规则，这使得该站点看起来可以从您的网络中访问，但它没有配置为在它之外工作。

您始终可以将页面的 html 源代码复制并粘贴到验证器中，这将提供所需的结果。

# validation - 自定义 Symfony 2 类约束验证器 NotEqualTo

> ID：12508054
> 
> 赞同：1
> 
> 时间：2012-09-20T07:40:39.233
> 
> 标签：validation, symfony, symfony-forms

我需要创建一个[Symfony 2 自定义类约束验证器](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html#class-constraint-validator)，以验证一个属性不等于另一个（即密码不能匹配用户名）。

我的**第一个问题**是：我需要实现方法[`getDefaultOption()`](http://api.symfony.com/2.0/Symfony/Component/Validator/Constraint.html#method_getDefaultOption)和用途吗？

```
/**
 * @Annotation
 */
class NotEqualTo extends Constraint
{
    /**
     * @var string
     */
    public $message = "{{ property1 }} should not be equal to {{ property2 }}.";

    /**
     * @var string
     */
    public $property1;

    /**
     * @var string
     */
    public $property2;

    /**
     * {@inheritDoc}
     */
    public function getRequiredOptions() { return ['property1', 'property2']; }

    /**
     * {@inheritDoc}
     */
    public function getTargets() { return self::CLASS_CONSTRAINT; }
} 
```

**第二个问题**是，如何在我的`validate()`方法中获取实际对象（检查“property1”和“property2”）？

```
public function validate($value, Constraint $constraint)
{
    if(null === $value || '' === $value) {
        return;
    }

    if (!is_string($constraint->property1)) {
        throw new UnexpectedTypeException($constraint->property1, 'string');
    }

    if (!is_string($constraint->property2)) {
        throw new UnexpectedTypeException($constraint->property2, 'string');
    }

    // Get the actual value of property1 and property2 in the object

    // Check for equality
    if($object->property1 === $object->property2) {
        $this->context->addViolation($constraint->message, [
            '{{ property1 }}' => $constraint->property1,
            '{{ property2 }}' => $constraint->property2,
        ]);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:37:17.610

> 我是否需要实现方法 getDefaultOption() 以及它的用途是什么？

您不必这样做，但是如果您的注释具有单个“前导”属性，强烈建议您这样做。Annotation 的属性被定义为键值对的列表，例如：

```
@MyAnnotation(paramA = "valA", paramB = "valB", paramC = 123)
@MaxValue(value = 199.99) 
```

使用`getDefaultOption()`您可以告诉注释处理器哪个选项是默认选项。如果您将其定义`paramA`为的默认选项`@MyAnnotation`并且`value`作为您的默认选项，`@MaxValue`您将能够编写：

```
@MyAnnotation("valA", paramB = "valB", paramC = 123)
@MaxValue(199.99)
@MaxValue(199.99, message = "The value has to be lower than 199.99") 
```

> 如何在我的 validate() 方法中获取实际对象（检查“property1”和“property2”）？

您必须创建一个**类级别的**约束注释。那么`$value`你的`validate()`方法中的参数将是一个完整的对象，而不是一个单一的属性。

# php - json_decode($string, true) 返回一个字符串 'Array' 而不是 Array 本身

> ID：12508057
> 
> 赞同：1
> 
> 时间：2012-09-20T07:40:43.000
> 
> 标签：php, json, base64, mcrypt

我相信问题在于我是`base64_encoding`json 字符串，当我`base64_decode`字符串并`json_decode($string, true)`出于某种原因运行时，它只返回“数组”字符串。

这是我传递要编码的json的地方：

```
$data = '[{"id":"1","name":"Dave","email":"dave@test.com","password":"1610838743cc90e3e4fdda748282d9b8","isAdmin":"true","timeStamp":"2012-09-18 20:37:38"}]';

Session::set('user', $data, true); 
```

这是我的 base64 编码/解码代码：

```
public static function set($key, $value, $encrypt = false) {
    if ($encrypt == false) {
        $_SESSION[$key] = $value;
    } else {
        $_SESSION[$key] = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5(SALT1), $value, MCRYPT_MODE_CBC, md5(md5(SALT2))));
    }
}

public static function get($key, $decrypt = false) {
    if (isset($_SESSION[$key])) {
        if ($decrypt == false) {
            return $_SESSION[$key];
        } else {
            return rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, md5(SALT1), base64_decode($_SESSION[$key]), MCRYPT_MODE_CBC, md5(md5(SALT2))), "\0");
        }
    }
} 
```

然后在这里我调用解码值：

```
$user = Session::get('user', true);

echo json_decode($user, true); 
```

我的结果是：

```
Array 
```

我研究了不同的 mcrypt 模式，但未能找到解决方案。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:50:16.683

`echo`只是输出一个字符串。您将不得不使用`print_r()`或`var_dump()`查看阵列。

```
print_r(json_decode($user, true)); 
```

或使用

```
var_dump(json_decode($user, true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:37:23.177

用这个 ：

print_r(json_decode($user, true));

# bash - 将数字添加到变量

> ID：12508059
> 
> 赞同：1
> 
> 时间：2012-09-20T07:41:04.383
> 
> 标签：bash, variables, cat

我正在尝试获取 txt 文件“usernum.txt”的内容，获取内容，在该数字上加一，然后用新数字替换当前数字。这是我到目前为止所拥有的

```
#!/bin/sh
ID=0
cat ''$pwd'usernum.txt' >> $ID
count1=1
IDB=$(($ID+$count1))
rm "usernum.txt"
touch "usernum.txt"
echo $IDB >> usernum.txt 
```

它运行，但是当我打开文件时，它保持不变。有任何想法吗？谢谢，迈克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:53:19.427

您应该将输出存储为`cat`into`ID`而不是使用`>>`. 你这样做的方式总是添加到一个名为“0”的文件中。要存储 cat 的输出，请使用：

```
ID=$( cat 'usernum.txt' ) 
```

我还删除了“pwd”，因为您不需要它，而且它也被单引号转义。

编辑：这是一个完整的工作示例。请注意，如果没有 usernum.txt 文件，这将打印一些错误（cat 和 rm 失败）但仍然有效（即在文件中打印 1）。您应该检查文件是否存在以避免这些错误：

```
ID=$( cat 'usernum.txt' )
count1=1
IDB=$(($ID+$count1))
rm "usernum.txt"
touch "usernum.txt"
echo $IDB >> usernum.txt 
```

# c# - 通过代码创建的 Excel 电子表格在打开 excel 时打开

> ID：12508060
> 
> 赞同：2
> 
> 时间：2012-09-20T07:41:08.070
> 
> 标签：c#, excel-2007

我最近想看看是否可以使用 c# 创建一个 Excel 电子表格来完成我的工作任务。我编写了一个快速程序（参见下面的代码）来学习基础知识，现在每次打开 Excel 都会显示由我的代码生成的电子表格。我该如何阻止这种情况发生？

```
namespace ExcelAddIn1
{
    public partial class ThisAddIn
    {
        private void ThisAddIn_Startup(object sender, System.EventArgs e)
        {
            var bankAccounts = new List<Account>
            {
             new Account
             {
                ID = 1, 
                Balance = 50.00, 
                Payee = "Debit", 
                PayDate = DateTime.Today
             }
            };

            DisplayInExcel(bankAccounts, (account, cell) =>
                //This multiline lamda expression sets 
                //custom processing rules for bankAccounts.
                {
                    cell.Value = account.ID;
                    cell.Offset[0, 1].Value = account.Balance;
                    cell.Offset[0, 2].Value = account.Payee;
                    cell.Offset[0, 3].Value = account.PayDate;
                    if (account.Balance < 0)
                    {
                        cell.Interior.Color = 255;
                        cell.Offset[0, 1].Interior.Color = 255;
                    }
                });
        }

        private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
        {
        }

        void DisplayInExcel(
            IEnumerable<Account> accounts, 
            Action<Account, 
            Excel.Range> DisplayFunc)
        {
            var excelApp = this.Application;
            // Add a new Excel workbook.
            excelApp.Visible = true;
            excelApp.Workbooks.Add();

            #region cellValues
            excelApp.Range["A1"].Value = "ID";
            excelApp.Range["B1"].Value = "Balance";
            excelApp.Range["C1"].Value = "Payee";
            excelApp.Range["D1"].Value = "Date";
            excelApp.Range["A2"].Select();

            foreach (var ac in accounts)
            {
                DisplayFunc(ac, excelApp.ActiveCell);
                excelApp.ActiveCell.Offset[1, 0].Select();

            }
            #endregion

            // Copy the results to Clipboard.
            excelApp.Range["A1:D2"].Copy();

            excelApp.Columns[1].AutoFit();
            excelApp.Columns[2].AutoFit();
            excelApp.Columns[3].AutoFit();
            excelApp.Columns[4].AutoFit();
        }

        #region VSTO generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InternalStartup()
        {
            this.Startup += new System.EventHandler(ThisAddIn_Startup);
            this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:14:24.830

由于您使用的是启动事件，因此每次启动 Excel 时都会启动此代码。在 Excel 本身中禁用加载项将解决您的问题。

# jquery - 带有 jcrop 的 jQuery 旋转函数

> ID：12508062
> 
> 赞同：2
> 
> 时间：2012-09-20T07:41:16.287
> 
> 标签：jquery, jcrop

我正在将 jcrop 与 jquery 一起使用，但也想使用 jQueryRotate(2.2)。裁剪工作正常但旋转不起作用。我有两个按钮 1) 裁剪和另一个用于旋转。旋转将顺时针和逆时针旋转图像

```
<form>
<input type="hidden" size="4" id="x1" name="x" />
<input type="hidden" size="4" id="y1" name="y" />
<input type="hidden" size="4" id="x2" name="x2" />
<input type="hidden" size="4" id="y2" name="y2" />
<input  type="hidden" size="4" id="w" name="w" />
<input type="hidden" size="4" id="h" name="h" />
<img src="test.jpg" id="photo"  >
 <input type="submit" name="sub12" value="Save Cropped Image" class="save" />
<input type="button" name="rotate1" value="Rotata" onclick="javascript:rot1()"   />
</form>

jQuery(function($){
$('#photo').Jcrop()

});

function rot1()
{
   $("#photo").rotate(45);
} 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:51:11.667

您可以尝试像这样使用：

```
jQuery(function(){

  $('#photo').Jcrop();

  $("input[name='rotate1']").click(function() {
     $("#photo").rotate(45);
     return false;
  });
}); 
```

# java - 字符串到整数数组的转换

> ID：12508063
> 
> 赞同：1
> 
> 时间：2012-09-20T07:41:17.973
> 
> 标签：java

我需要将值添加到 int 数组中。

```
 int[] placeHolders[]; 
```

现在我不知道要添加到这个数组中的元素的大小。我在输入时添加它。我想知道如何将我的字符串输出值反复转换为 int 数组。

输入：23.45.1.34

我正在使用字符串标记化。获得代币

```
Value = Integer.parseInt(strtokObject.nextElement().toString()); 
```

我正在使用上面的行将 int 添加到单个 int 值，但是如果我需要将 int 元素添加到数组中，就像推入向量（C++ STL）一样，我无法做到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T07:44:28.573

```
String str = "23.45.1.34";
String sarr = str.split("\\.");
int[] result = new int[sarr.length];
for (int i = 0;  i < sarr.length;  i++) {
    result[i] = Integer.parseInt(s);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:45:25.567

当您不知道要存储在数组中的数据集的大小时，您应该使用`java.util.List<E>`诸如`ArrayList`.

```
ArrayList<Integer> placeHolderList = new ArrayList<Integer>();
int value = Integer.parseInt(strtokObject.nextElement().toString());
placeHolderList.add(value); // adds the int to the underlying array 
```

然后，如有必要，您可以使用 List#toArray 将列表转换为数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T07:45:27.110

我会使用`myString.split("\\.")`返回 a `String[]`，创建一个相等的 size `int[]`，然后将每个 String 解析为一个 int 而不是使用分词器。您还可以`placeHolders`通过计算字符串中的 '.'（例如，`myString.replaceAll("[^\\.]", "").length()`）来知道 的大小（显然在该数字上加一）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T07:46:47.433

我假设您的输入字符串是`input`.

所以你可以做这样的事情：

```
String[] inputStrs = input.split("\\."); 
```

和

```
//Do a while loop
placeholder[i] = Integer.ParseIne(inputStrs[i]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T07:47:41.737

您可以使用`ArrayList<Integer>`类似于 C++ 中的向量的。添加到它使用`aList.add(num);`

如果你想要一个数组，你可以在最后使用该`toArray`方法。

```
Integer[] arr = aList.toArray(new Integer[0]); 
```

# iphone - 用于对象运动的简单 UIViewAnimation

> ID：12508065
> 
> 赞同：0
> 
> 时间：2012-09-20T07:41:26.853
> 
> 标签：iphone, objective-c, ios, game-physics, uiviewanimation

我想开发一个简单的示例项目，其中我有一个播放器图像，我有一个通过简单 UIViewAnimation 跳跃这个播放器的逻辑现在我想让这个**播放器对象运行或行走**我如何**通过普通 UIViewAnimation**类型实现这一点不使用 cocos2D 或 OpenGL 的东西。提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:16:49.443

在 2d 游戏中执行此操作的经典方法是为玩家角色制作带有奔跑动画帧的 spritesheet。spritesheet 是由子图像网格组成的位图图像。每个子图像都包含一帧跑步动画。要向前播放跑步动画，您需要创建一个子图像列表以显示每个帧号。跑步动画将从第 0 帧开始并以给定的帧速率播放。您可以创建一个在每帧结束时定期触发的计时器。当计时器触发时，增加帧号。接下来使用帧号索引到子图像列表中，以选择正确的子图像以显示当前动画帧。使包含播放器图像的视图无效，并且当系统要求重绘播放器视图时，为当前动画帧绘制子图像。只要玩家在运行，运行动画就会循环重复。要循环播放动画，您必须在计时器触发时检查帧计数器的值。如果帧计数器值等于运行动画的动画帧数，则将帧计数器重置为零。然后使用帧计数器在动画的有序子图像列表中建立索引。播放器视图也必须在每次动画计时器触发时向播放器运行的方向移动。您可以通过将动画帧之间的时间乘以播放器速度来计算移动播放器视图的距离。如果帧计数器值等于运行动画的动画帧数，则将帧计数器重置为零。然后使用帧计数器在动画的有序子图像列表中建立索引。播放器视图也必须在每次动画计时器触发时向播放器运行的方向移动。您可以通过将动画帧之间的时间乘以播放器速度来计算移动播放器视图的距离。如果帧计数器值等于运行动画的动画帧数，则将帧计数器重置为零。然后使用帧计数器在动画的有序子图像列表中建立索引。播放器视图也必须在每次动画计时器触发时向播放器运行的方向移动。您可以通过将动画帧之间的时间乘以播放器速度来计算移动播放器视图的距离。

为了有效地绘制当前动画帧，将子图像存储为 NSValue 对象，其中包含 NSArray 中的 CGRect。每个 CGRect 都是在 spritesheet 中包含动画帧的子矩形。子矩形可用于从 spritesheet 中剪切动画帧，以便在将 spritesheet 绘制到播放器视图中时仅绘制一个动画帧。spritesheet 的绘制必须偏移子矩形的原点，以便动画帧的左上角与播放器视图的左上角重合。帧计数器用作从数组中查找当前动画帧的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:49:10.307

如果你想这样做，`UIViewAnimation`那么你必须创建一些图像，称为**imageview 动画**，你必须在其中显示每个运行图像或行走图像。这会给人一种图像正在行走或奔跑的印象。那么你就不需要 openGL 或 cocos2d。

顺便说一句，你想达到什么目标？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T08:23:10.027

嗨，这也是一个示例项目，我希望这可以帮助您理解....

示例代码[在这里](https://www.dropbox.com/sh/5mat829nhfvd4j1/TiWLpW2YQi)

# perl - 按修改日期对任意随机文件列表进行排序

> ID：12508076
> 
> 赞同：3
> 
> 时间：2012-09-20T07:41:58.863
> 
> 标签：perl, bash

寻找通用方法如何按修改时间对随机文件列表进行排序，例如：

```
./make_list_of_files | some_sorter_by_mtime 
```

我当前的解决方案是（这里`make_list_of_files`是`find`命令）：

```
find / -type f -print |\
  perl -nle 'push @in,$_;END {@out = sort{ (stat($a))[9] <=> (stat($b))[9] } @in; $,="\n";print @out}' 
```

是否存在一些更简单的解决方案（例如，没有 perl）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T08:15:58.180

你`some_sorter_by_mtime`应该是例如：

```
xargs stat -f "%m %N" | sort -n | cut -f2- 
```

背后的想法是：

*   打印文件修改时间和文件名
*   以数字方式对输出进行排序（因此按修改时间）
*   剪掉时间场

所以，

```
find / -type f -print | xargs stat -f "%m %N" | sort -n | cut -f2- 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T08:48:49.483

像这样？

```
find / -type f -print | xargs ls -l --time-style=full-iso | sort -k6 -k7 | sed 's/^.* \//\//' 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-20T07:50:47.047

是的，没有 perl：

```
find / -type f -exec ls -lrt '{}' \+ 
```

大师。

# .net - 使用 maven-dotnet-plugin 的卷标语法不正确

> ID：12508077
> 
> 赞同：0
> 
> 时间：2012-09-20T07:42:03.933
> 
> 标签：.net, maven, jenkins, hudson, maven-3

使用 maven-dotnet-plugin 我得到了这篇文章末尾显示的错误。

Jenkins 工作区设置在 C:\Jenkins

有谁知道在哪里或如何更改路径名的格式以用于 dotnet 插件，或其他方式来使其工作？

我得到的错误在下面详细显示。

```
Parsing POMs
ERROR: Failed to parse POMs
java.io.FileNotFoundException: C:\Jenkins\ExternalFrame\au.com.bushlife.dotnet.revit:builder\builds\2012-09-20_17-10-03\log (The filename, directory name, or volume label syntax is incorrect)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(Unknown Source)
    at java.io.FileOutputStream.<init>(Unknown Source)
    at hudson.maven.MavenBuild$ProxyImpl2.<init>(MavenBuild.java:472)
    at hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.doRun(MavenModuleSetBuild.java:682)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:499)
    at hudson.model.Run.execute(Run.java:1502)
    at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:477)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
FATAL: Failed to create a temporary file in C:\Jenkins\ExternalFrame\au.com.bushlife.dotnet.revit:builder\builds\2012-09-20_17-10-03
hudson.util.IOException2: Failed to create a temporary file in C:\Jenkins\ExternalFrame\au.com.bushlife.dotnet.revit:builder\builds\2012-09-20_17-10-03
    at hudson.util.AtomicFileWriter.<init>(AtomicFileWriter.java:67)
    at hudson.util.AtomicFileWriter.<init>(AtomicFileWriter.java:54)
    at hudson.XmlFile.write(XmlFile.java:174)
    at hudson.model.Run.save(Run.java:1638)
    at hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.post2(MavenModuleSetBuild.java:991)
    at hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:639)
    at hudson.model.Run.execute(Run.java:1527)
    at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:477)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
Caused by: java.io.IOException: The filename, directory name, or volume label syntax is incorrect
    at java.io.WinNTFileSystem.createFileExclusively(Native Method)
    at java.io.File.checkAndCreate(Unknown Source)
    at java.io.File.createTempFile(Unknown Source)
    at hudson.util.AtomicFileWriter.<init>(AtomicFileWriter.java:65)
    ... 9 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:09:38.087

由于冒号放置在路径字符串中，正在构造的路径是无效路径。这是一个插件错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:34:04.483

这可能是您的文件系统的权限问题。看看这个[https://groups.google.com/forum/?fromgroups=#!topic/jenkinsci-users/9nux4H8YWe8](https://groups.google.com/forum/?fromgroups=#!topic/jenkinsci-users/9nux4H8YWe8)

# ios - Xcode 4.5：“无法访问 iOS 5.1 模拟器”

> ID：12508080
> 
> 赞同：3
> 
> 时间：2012-09-20T07:42:26.630
> 
> 标签：ios, xcode, simulator

我将 Xcode 从 4.4.1 升级到 4.5，但是当我安装 iOS 5.1 模拟器时，出现错误：“无法访问 iOS 5.1 模拟器”。[这里](https://stackoverflow.com/questions/12503973/i-just-upgraded-to-xcode-to-4-5-and-now-cant-install-ios5-1)有一个解决方案 但是，我不知道如何接受新的开发者协议？有人可以帮我吗？谢谢。

顺便说一句，我有一个免费的苹果 ID，我不想支付 99 美元/年。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T10:11:39.553

确保您登录 Apple 开发者门户并接受许可审查。我遇到了同样的问题，但在查看并接受许可证后，我能够下载并安装所有内容。

为了接受新许可证，登录后，您会在页面顶部找到一个黄色框，其中包含一个警告您需要查看更新版本的许可证的句子。在这句话的末尾有一个链接（它是蓝色的）。单击该链接，将打开一个页面。阅读许可证，选中许可证内容末尾的框并发出“接受”。

这就是所有人:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:11:20.357

一分耕耘一分收获。如果您已经为 iDP 支付了 99 美元，您应该在 Xcode 4.5 中安装 iOS 5.1 模拟器之前去会员中心签署新的许可证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:06:49.397

Xcode 4.5 似乎预装了 IOS6 Simulator。

# javascript - javascript正则表达式，一次拆分和匹配？

> ID：12508082
> 
> 赞同：0
> 
> 时间：2012-09-20T07:42:44.563
> 
> 标签：javascript, regex, split

我的输入字符串看起来像这样

```
inspect [foo - bar] with [errors - 15] 
create [doodle]
force delete [quux] 
```

也就是说，在方括号内包含信息的行。

我想要的是一次取其中一条线并得到一个像

```
["inspect", "[foo - bar], "with", "[errors - 15]"] 
```

使用正则表达式很容易分别收集括号表达式和括号表达式之间的部分：

```
var src = "inspect [foo - bar] with [errors - 15]"
var regexBracketed = /\[[a-zA-Z0-9_\- ]+\]/g;

// this returns an array of the bracketed expressions
console.log(src.match(regexBracketed));

// and this returns an array of the parts between the expressions
console.log(src.split(regexBracketed)); 
```

有没有一种简单的方法可以将所有内容都放在一个数组中？也许我以完全错误的方式攻击这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:53:00.293

您是指组（捕获括号）吗？`/(.*)/`?

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Using_Parenthesized_Substring_Matches](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Using_Parenthesized_Substring_Matches)

例如，如果你想捕获括号中的字符串，那么你可以使用这个：

```
var r=/^\s*[^\[\]]*\[([^\[\]]+)\](?:[^\[\]]*\[([^\[\]]*)\])?\s*$/;
var m = "inspect [foo - bar] with [errors - 15] ".match(r);
console.log(m[1], m[2]); 
```

您也可以添加`\s*`到表达式中以修剪空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:54:58.200

这是我做的方式，加上[一个 jsFiddle](http://jsfiddle.net/acheong87/uAtr8/)。

```
var src = "inspect [foo - bar] with [errors - 15] " +
          "create [doodle] " +
          "force delete [quux]";

var regex = /[^\[]+|[^\]]+\]/g;

document.write(src.match(regex));​ 
```

输出：

```
inspect ,[foo - bar], with ,[errors - 15], create ,[doodle], force delete ,[quux] 
```

而且我相信您知道如何随心所欲地修剪空白：)

为了解释这个看起来有点神秘的正则表达式，它只是说，“让我把所有字符都弄到 a `[`，或者，如果你已经在 a `[`，那么让我把所有字符都弄到`]`，再加上`]`拜托！。 "

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T08:04:17.283

@akonsu 是对的，只需添加括号即可，如下所示：

```
var src = "inspect [foo - bar] with [errors - 15]";
var regexCapturing = /(\[[a-zA-Z0-9_\- ]+\])/;
console.log(src.split(regexCapturing)); 
```

它输出

```
 ["inspect ", "[foo - bar]", " with ", "[errors - 15]", ""] 
```

一些空格修剪并跳过最后一个空字符串，我已经准备好了。谢谢。

（我只是写这个作为答案，因为我不能在评论中使用代码格式。）

# php - 如何在更改事件上交换单选按钮的值？

> ID：12508087
> 
> 赞同：0
> 
> 时间：2012-09-20T07:42:57.660
> 
> 标签：php, javascript, radio-button

我正在使用循环在运行时创建单选按钮，它将根据循环按升序选择单选按钮的一个值，例如：

![单选按钮示例图片](../Images/054d5076506f4bf3ff6b5087ca0046d6.png)

香蕉在第一个，它的选择值为“1”
苹果在第二个，它的选择值为“2”
，橙色在第三个，它的选择值为“3”
，柠檬在第四个，它的选择值为“4”

这是从外部循环创建单选按钮`count=4`和变量`$var`获取值的代码，该循环第二次运行，`$var`值将是 2，依此类推，以便在上图中的模式显示中选择单选选项

```
for($i=1;$i<=$count;$i++)
{
$secname=str_replace(" ",'',$data[0]);
if($i==$var)
{
echo("<input type='radio' name='$secname' value='$i' checked='checked'>$i");
}
else
{
echo("<input type='radio' name='$secname' value='$i'>$i");
}
//  echo("<input type='hidden' name='rad[]' value='$i'/>");
} 
```

如何在更改时交换单选按钮值，以便当我选择苹果单选值“1”时，它会将 bana 值更改为“2”交换其值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:49:54.373

假设 'apple' 和 'bana' 代表单选按钮的名称属性，您可以使用 jQuery 完成您想要的：

```
$(document).ready(function(){
   $('input[name="apple"]').change(function(){
      $('input[name="bana"]').each( function(){
         $(this).val( $(this).val() == 1?2:1); // if value is 1, change it to 2, otherwise to 1.
      });
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:09:28.590

```
(function () {
    var previous;

    $('input[name="'+ inputGroupName +'"]').focus(function () {
        // Store the current value on focus, before it changes
        previous = this.value;
    }).change(function() {
       // Do something with the previous value after the change
       var currentInput = this;
       var newVal = $(this).value();
       $('input').each(function(i, input) {
          if (input.value === newVal && input !== currentInput) {
            input.value = previous;
          }
    });
}()); 
```

类似的东西。

# silverlight-4.0 - 在 SvZlib 中禁用标头检查以进行膨胀

> ID：12508088
> 
> 赞同：0
> 
> 时间：2012-09-20T07:43:04.567
> 
> 标签：silverlight-4.0, zlib, inflate-exception

我正在为 Silverlight 4 使用 SvZlib，并尝试使用以下方法来膨胀字节数组：

```
Cellbi.SvZLib.Utils.Decompress(bytesArray); 
```

但我收到错误“不正确的标题检查”。我正在寻找禁用标头检查，但没有结果。

知道如何禁用标头检查以进行解压缩（输入数组不包含任何标头）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:08:46.633

是什么让您认为禁用标头检查会有所帮助？你所能做的就是告诉 zlib 它是没有标题的原始 deflate 数据。如果不是这种情况，那么只会导致不同的错误。

数据的前几个字节是什么？您可能正在尝试使用 zlib 解码器解码 gzip 数据，或使用 gzip 解码器解码 zlib 数据。

# java - 如何根据 xml 解析的值在 listview 中动态更改颜色？

> ID：12508092
> 
> 赞同：2
> 
> 时间：2012-09-20T07:43:13.527
> 
> 标签：java, android

这是我要编码的。

支付女孩 = 100 100 的值（100 是浏览器中 XML 文件的值）= 是红色

支付女孩 = 200 200 的值（200 是浏览器中 XML 文件中的值）= 是绿色

支付男孩 = 100 100 的值（100 是浏览器中 XML 文件中的值）= 是红色

支付男孩 = 200 200 的值（200 是浏览器中 XML 文件的值）= 是绿色

如果浏览器中 XML 文件的较高值（如 200），则列表视图中 200 的颜色为绿色，而浏览器中 XML 文件的较低值（如 100）则列表视图中 100 的颜色为红色。其值的变化取决于浏览器中的 XML 文件。我正在使用 DOM 解析器来获取支付男孩和支付女孩的价值，并且我还使用 Timer 在几秒钟内自动刷新它。如何将我询问更改颜色的代码放入我的代码 XML 解析中并使用计时器？我在这方面做了一些事情，但我失败了。

这是代码

```
@Override
         public void onResume() {
          super.onResume();
          Timer autoUpdate = new Timer();
          autoUpdate.schedule(new TimerTask() {
           @Override
           public void run() {
            runOnUiThread(new Runnable() {
             public void run() {
                 ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

                 quotesXMLParsing parser = new quotesXMLParsing();
                String xml = parser.getXmlFromUrl(URL); // getting XML
                Document doc = parser.getDomElement(xml); // getting DOM element

                NodeList nl = doc.getElementsByTagName(KEY_item);
                // looping through all item nodes <item>
                for (int i = 0; i < nl.getLength(); i++) {
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();
                    Element e = (Element) nl.item(i);
                    // adding each child node to HashMap key => value
                    map.put(KEY_price, parser.getValue(e, KEY_price));
                    map.put(KEY_pay of the girl, parser.getValue(e, KEY_pay of the girl));
                    map.put(KEY_pay of the boy,  parser.getValue(e, KEY_pay of the boy));

                    // adding HashList to ArrayList
                    menuItems.add(map);
                }

                // Adding menuItems to ListView
                ListAdapter adapter = new SimpleAdapter(Activity.this, menuItems,
                        R.layout.showquotes,
                        new String[] { KEY_price, KEY_pay of the girl, KEY_pay ogf the boy }, new int[] {
                                R.id.price, R.id.pay of the girl, R.id.pay of the boy });

                setListAdapter(adapter);
             }
            });
           }
          }, 0, 5000); 
         }
} 
```

这是 XML 文件

```
<items>
<item>
<price>100</price>
<pay of the girl>100</pay of the girl>
<pay of the boy>200</pay of the boy>
</item> 
```

像 100 和 200 这样的值每 5 秒改变一次

这是我尝试了代码，但失败了。

```
ListAdapter adapter = new SimpleAdapter(Activity.this, menuItems,
                        R.layout.showquotes,
                        new String[] { KEY_price, KEY_pay of the girl, KEY_pay ogf the boy }, new int[] {
                                R.id.price, R.id.pay of the girl, R.id.pay of the boy });               

            ListAdapter.setViewBinder(new MyViewBinder1());           
            itemlist.setAdapter(ListAdapter);

 class MyViewBinder1 implements ViewBinder 
 {      @Override
            public boolean setViewValue(View view, Object Status,String textRepresentation)
            {       
                  String complet="Pay of the girl:+higher ";
                  String complet1="Pay of the boy:+higher";
          String notcomplet="Pay of the girl:-lower";
                  String notcomlet="Pay of the boy:-lower";

                  String getdata= textRepresentation;

                    if((view instanceof TextView) & (Status instanceof String) )
                    { 
                            TextView iv= (TextView) view;     
                            if(complet.equals(Status))
                                {
                                r1=true;
                                r2=false;
                            iv.setText(textRepresentation);       
                            iv.setTextColor(Color.parseColor("#008000"));                
                            return true;
                           }   
                            else if(notcomlet.equals(Status))
                            {
                                r2=true;
                                r1=false;
                                iv.setText(textRepresentation);       
                                iv.setTextColor(Color.RED); 
                                return true;
                            }

                            if(r1 && (getdata.startsWith("Pay of the girl:   ")))
                           {                            

                            iv.setText(textRepresentation);      

                            iv.setTextColor(Color.parseColor("#008000"));                           
                            return true;
                           }
                if(r1 && (getdata.startsWith("Pay of the boy:   ")))
                           {                            

                            iv.setText(textRepresentation);      

                            iv.setTextColor(Color.parseColor("#008000"));                           
                            return true;
            {
                        else if (r2 && (getdata.startsWith("Pay of the girl:   ")))
                        {
                            //TextView iv= (TextView) view;
                            iv.setText(textRepresentation);       
                            iv.setTextColor(Color.RED);                              
                            return true;
                        }
            else if (r2 && (getdata.startsWith("Pay of the boy:   ")))
                        {
                            //TextView iv= (TextView) view;
                            iv.setText(textRepresentation);       
                            iv.setTextColor(Color.RED);                              
                            return true;                           
                    }        
                  return false;
            }           
} 
```

在这里我想问一下怎么做？此图像。作为参考

![在此处输入图像描述](../Images/3734571613cb7493a97a82643d860763.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:49:48.963

如果我了解您的要求，我可以建议您为您的列表视图使用自定义 ListAdapter，其中一个属性元素是背景。然后，当您填充 listView 时，您应该为每个元素设置背景（红色或绿色）。

如果您想了解自定义 ListAdapters，这里是链接[http://jnastase.alner.net/archive/2010/12/19/custom-android-listadapter.aspx](http://jnastase.alner.net/archive/2010/12/19/custom-android-listadapter.aspx)

请记住，自定义 ListAdapter 扩展了 BaseAdapter。

如果您需要更多帮助，请随时问我。

# java - 文件输入流的文件位置

> ID：12508096
> 
> 赞同：1
> 
> 时间：2012-09-20T07:43:25.423
> 
> 标签：java, fileinputstream

我正在做一个 Android 项目，我有一个 .bin 格式的文件，我把它放在我的 Java 项目的根目录（不在任何文件夹中）。我尝试使用 FileInputStream 检索它，如下所示：

```
InputStream file = new FileInputStream("filename.bin"); 
```

但它无法读取文件。

我应该把我的 bin 文件放在哪里？或者还有什么我需要注意的吗？

[编辑]错误：

```
Error occurred during initialization of VM
java/lang/NoClassDefFoundError: java/lang/ref/FinalReference 
```

[编辑] 解决方案：从这里找到解决方案 >> [Eclipse 错误： NoClassDefFoundError: java/lang/ref/FinalReference](https://stackoverflow.com/questions/9455236/eclipse-error-noclassdeffounderror-java-lang-ref-finalreference)。

```
1\. Find Running configurations -> java application
2\. In the new configuration's Classpath tab, find "Android Library" under Bootstrap Entries and remove it.
3\. Still in the Classpath tab, select Bootstrap Entries and click the Advanced button.
4\. Choose Add Library and click OK.
5\. Select JRE System Library and click Next.
6\. Select Workspace Default JRE and click Finish. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:00:27.550

FileInputStream 还将文件放入其构造函数之一。

你可以做

```
File f = new File("filename.bin")
if (f.isFile()) {
    InputStream is = new FileInputStream(f);
} 
else {
    //cope with missing file
} 
```

这样，如果文件消失或不在您认为的位置，您将不会收到 FileNotFoundException

@Srigan 提出了一个很好的观点，尽管尝试 / infront

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:00:04.197

获取当前工作目录：`System.getProperty("user.dir"));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:51:43.740

上面的语法表示该文件`filename.bin`与您的代码位于同一文件夹中。尝试提供文件的绝对路径或将文件放在文件`src`夹中并使用

```
InputStream file = new FileInputStream("/filename.bin"); 
```

# java - XML 到 Java 对象

> ID：12508098
> 
> 赞同：2
> 
> 时间：2012-09-20T07:43:45.800
> 
> 标签：java, xml, jaxb

我已经搜索了与该主题相关的所有问题，但我没有找到答案。我正在尝试将 xml 文档转换为 java 对象。在搜索了执行相同操作的选项后，我发现 jaxb 是执行相同操作的最佳选择。我参考了许多文章并提出了这个不起作用的解决方案。有人可以帮助我吗？

XML 国防部：

```
<Vectors>
    <Vector>
        <Id>1</Id>
        <Name>abc</Name>
         <Desc>abcdefg</Desc>
         <Type>body</Type>
         <Snippet>
            <![CDATA[<total>1234</total>]]>
         </Snippet>
    </Vector>
    <Vector>
         <Id>2</Id>
         <Name>def</Name>
         <Desc>abcdefghigj</Desc>
         <Type>body</Type>
         <Snippet>
            <![CDATA[<total>12345</total>]]>
         </Snippet>
     </Vector>
</Vectors> 
```

我想创建 2 个类 Vector 的 java 对象。类向量如下所示

```
 package com.abc.TryXmltoJava;

    import java.util.List;
    import javax.xml.bind.annotation.*;

    public class Vector {
        int Id,
        String Name;
        String Desc;
        String Type;

        @XmlElement
        public String getName() {
             return Name;
        }
        public void setName(String name) {
             this.Name = name;
        }

        @XmlElement
        public String getDesc() {
            return Desc;
        }
        public void setDesc(String desc) {
            this.Desc = desc;
        }

        @XmlElement
        public String getType() {
            return Type;
        }
        public void setType(String type) {
            this.Type = type;
        }
} 
```

现在我创建了 Vectors 类，它跟踪两个对象并使用列表实用程序创建一个 Vector 对象列表。

```
 package com.abc.TryXMLtoObject;

 import javax.xml.bind.annotation.*;

 @XmlRootElement(name="Vectors")
 public class Vectors {

 @XmlElement(name="Vector")
     Vector vector;

     public Vector getVector() {
        return vector;
     }

     public void setVector(Vector vector1) {
        this.vector = vector1;
     }
} 
```

我将尝试使用这两个创建 java 对象列表的类来解组 xml 对象。解组类如下所示..

```
 package com.abc.TryXMLtoObject;

  import java.io.File;
  import javax.xml.bind.JAXBContext;
  import javax.xml.bind.JAXBException;
  import javax.xml.bind.Unmarshaller;

  public class JAXBExampleUnmarshal {

       public static void main(String[] args) {

         try {

          File file = new File("C:\\file.xml");
          JAXBContext jaxbContext = JAXBContext.newInstance(Vectors.class);

          Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
          Vectors vectors = (Vectors) jaxbUnmarshaller.unmarshal(file);
          System.out.println(vectors);

         } catch (JAXBException e) {
          e.printStackTrace();
         }

   }
 } 
```

运行此代码后..我收到以下错误：

```
javax.xml.bind.UnmarshalException: unexpected element (uri:"", local:"Vectors"). Expected elements are (none)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.startElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(Unknown Source)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(Unknown Source)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(Unknown Source)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(Unknown Source)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(Unknown Source)
    at com.abc.TryXMLtoObject.JAXBExampleUnmarshal.main(JAXBExampleUnmarshal.java:17) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:51:22.193

一开始，you in `Vectors`you must have `List<Vector> vectorList`，不是单数`Vector`。
此外，stacktrace 中的文本`unexpected element (uri:"", local:"Vkectors")`告诉我，在 xml 中的某个地方你有`Vkectors`元素，那是错误的。
最后，我强烈建议您将所有注释放在 get-methods 中，而不是变量，原因有两个：如果我没记错的话，有一些名称冲突，其次，如果您有来自 Hibernate 的代理或类似的东西，字段的注释将消失，但 get 方法的注释将保留。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:52:51.990

您的示例的以下版本对我有用：

**矢量图**

正如[popfalushi 所指出的](https://stackoverflow.com/a/12508211/383861)，`Vectors`应该有一个`List`属性可以保存`Vector`.

```
package com.abc.TryXmltoJava;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="Vectors")
@XmlAccessorType(XmlAccessType.FIELD)
public class Vectors {

    @XmlElement(name="Vector")
    List<Vector> vector;

} 
```

**向量**

如果您希望在字段上指定 JAXB 注释，则应`@XmlAccessorType(XmlAccessType.FIELD)`在类型级别指定（请参阅： [http](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html) ://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html ）。此外，默认映射是`@XmlElement`您不需要明确添加该注释（请参阅： [http](http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html) ://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html ）。

```
package com.abc.TryXmltoJava;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Vector {
    int Id;
    String Name;
    String Desc;
    String Type;
} 
```

**JAXBExampleUnmarshal**

我更新了您的演示代码以将对象写回 XML，以证明在解组操作期间对象已完全填充。

```
package com.abc.TryXmltoJava;

import java.io.File;
import javax.xml.bind.*;

public class JAXBExampleUnmarshal {

    public static void main(String[] args) {

        try {
            File file = new File("C:\\file.xml");
            JAXBContext jaxbContext = JAXBContext.newInstance(Vectors.class);

            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
            Vectors vectors = (Vectors) jaxbUnmarshaller.unmarshal(file);
            System.out.println(vectors);

            Marshaller marshaller = jaxbContext.createMarshaller();
            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
            marshaller.marshal(vectors, System.out);

        } catch (JAXBException e) {
            e.printStackTrace();
        }
    }

} 
```

**文件.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<Vectors>
    <Vector>
        <Id>1</Id>
        <Name>abc</Name>
         <Desc>abcdefg</Desc>
         <Type>body</Type>
         <Snippet>
            <![CDATA[<total>1234</total>]]>
         </Snippet>
    </Vector>
    <Vector>
         <Id>2</Id>
         <Name>def</Name>
         <Desc>abcdefghigj</Desc>
         <Type>body</Type>
         <Snippet>
            <![CDATA[<total>12345</total>]]>
         </Snippet>
     </Vector>
</Vectors> 
```

**输出**

下面是运行演示代码的输出：

```
com.abc.TryXmltoJava.Vectors@44fe9319
<?xml version="1.0" encoding="UTF-8"?>
<Vectors>
   <Vector>
      <Id>1</Id>
      <Name>abc</Name>
      <Desc>abcdefg</Desc>
      <Type>body</Type>
   </Vector>
   <Vector>
      <Id>2</Id>
      <Name>def</Name>
      <Desc>abcdefghigj</Desc>
      <Type>body</Type>
   </Vector>
</Vectors> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:58:01.587

您可能希望查看讨论 hos[从 xsd 生成类的](https://stackoverflow.com/questions/4995466/how-to-generate-jaxb-classes-from-just-xml)答案。它还提供了一个资源链接以从原始 xml 生成 xsd。

您的堆栈跟踪还提到了“Vkectors”——它们是源文件中的错字吗？

最后，您可能希望从[jaxb 教程](http://docs.oracle.com/javase/tutorial/jaxb/index.html)开始，然后从那里开始学习。

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T07:53:15.433

您是否可以先用 Java 创建对象并使用 JAXB 持久化，而不是尝试恢复对象？然后您将看到您的 XML 文件与 JAXB 生成的文件之间的区别。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T07:56:03.397

首先，您的堆栈跟踪名称`Vekctors`（注意 k），所以它可能是一个错字。但随后它说“预期的元素是（无）”。在您的`Vectors`类中，您只声明了一个`Vector`元素，因此您不能在元素内放置两个元素`Vectors`。

# c - SHELLEXECUTEINFO UNICODE 支持？

> ID：12508100
> 
> 赞同：-1
> 
> 时间：2012-09-20T07:43:52.070
> 
> 标签：c, windows, winapi, unicode

我曾经`ShellExecuteEx()`调用一个可执行文件。以下是我为`SHELLEXECUTEINFO`结构设置的参数。

```
SHELLEXECUTEINFO ShExecInfo = {0};
ShExecInfo.cbSize = sizeof(SHELLEXECUTEINFO);
ShExecInfo.fMask = SEE_MASK_NOCLOSEPROCESS|SEE_MASK_UNICODE;// Set Unicode Flag
ShExecInfo.hwnd = NULL;
ShExecInfo.lpVerb = NULL;
ShExecInfo.lpParameters = TEXT ("/s");
ShExecInfo.lpDirectory = NULL;
ShExecInfo.nShow = SW_SHOWNORMAL;
ShExecInfo.hInstApp = NULL;
ShExecInfo.lpFile = TEXT ( ".\\bin\\x86\\installerx86.exe" ); 
```

`ShExecInfo.fMask`是为 Unicode 设置的，但没有`ShExecInfo.lpFile`以`"\\?\"`. 在这种情况下，我的代码是否与 Unicode 兼容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T10:29:03.190

你在混淆概念。到内核​​代码使用这些字符串时，所有路径字符串都是 Unicode。非 Unicode 版本的 ShellExecuteEx（名为 ShellExecuteExA）只是简单地翻译所有字符串并将 SHELLEXECUTEINFOA 结构转换为 SHELLEXECUTEINFOW 结构，然后调用**真正的**api 函数 ShellExecuteW()。由于宏在它们之间进行选择，因此您不会在代码中看到这些真正的标识符名称，但您当然可以在 ShellAPI.h SDK #include 文件中看到它们。

这`SEE_MASK_UNICODE`是一个相当神秘的选项，很难正确设置。我觉得`CREATE_UNICODE_ENVIRONMENT`和CreateProcess的选项有关，说明新进程的环境可能包含Unicode字符。

路径字符串上的`\\?\`前缀在 Win32 路径名和本机 Windows 内核路径名之间进行选择。Win32 是原生操作系统之上的 API 层。曾经有多个 api 层，OS/2 和 Posix 曾经支持但不再使用。本机操作系统与 Win32 非常不同，它类似于 VMS 操作系统，这是 David Cutler 在被微软聘用设计 NT 之前所做的工作。没有 C: drive there 这样的东西，它只知道，比如说，`\Device\Harddisk0\Partition0`。

API 层在这两个世界之间进行转换。通过在路径字符串前加上前缀，`\\?\`您可以告诉 Win32 按原样使用路径字符串。然后使其获得本机路径字符串的功能，支持长达 32726 个字符的路径并绕过臭名昭著的 Win32 MAX_PATH 限制。这些字符串是 Unicode 是隐含的，这就是内核可以处理的所有内容。ShellExecuteA 否则会很高兴地为您转换包含此前缀的 8 位编码字符串。

长话短说：它不是自动的。您必须通过自己编程前缀来明确地做到这一点。

# workflow - 如何重新启动终止的工作流程？

> ID：12508101
> 
> 赞同：3
> 
> 时间：2012-09-20T07:43:52.060
> 
> 标签：workflow, openerp

在具有工作流的模型中，当您创建新记录时，它会启动一个新的`workflow instance`. 然后它将在“活动”之间转换，直到达到 a `flow stop`，通常是 a`cancel`或`done`状态。

我在 OpenERP 6.1 中遇到的是，一旦 a`workflow instance`到达`flow stop`，它就死了，你不能在它上面执行更多的转换。

但我想`Reset to draft`在表单上有一个按钮，允许重新启动终止的工作流。有没有办法通过 Python 调用 Openerp 工作流服务的方法来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T10:45:53.707

您可以在帐户支付模块中找到示例。

```
def set_to_draft(self, cr, uid, ids, *args):
    self.write(cr, uid, ids, {'state': 'draft'})
    wf_service = netsvc.LocalService("workflow")
    for id in ids:
        wf_service.trg_create(uid, 'your.model.name', id, cr)
    return True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:10:52.710

您需要删除工作流实例并重新创建它。检查模型`action_cancel_draft`中的方法`purchase.order`；它完全符合您的要求。

# heroku - 将 jekyll 博客添加到 myapp.com/blog 到 heroku

> ID：12508102
> 
> 赞同：1
> 
> 时间：2012-09-20T07:43:56.240
> 
> 标签：heroku, blogs, jekyll

引擎场有什么像博客宝石这样的东西吗？

“让我们从一个简单的概念开始。出于 SEO 的目的，如果您的博客在[http://mydomain.com/blog](http://mydomain.com/blog)而不是[http://blog.mydomain.com](http://blog.mydomain.com)上运行会更好。我们稍后会在这里详细介绍，但这确实是对于一个完全不同的帖子。同样有很多方法可以完成这项任务，但我想谈谈用 Jekyll 来做这件事。

[http://www.engineyard.com/blog/2012/introducing-bloggy-a-simple-way-to-add-a-jekyll-blog-to-any-rails-application/](http://www.engineyard.com/blog/2012/introducing-bloggy-a-simple-way-to-add-a-jekyll-blog-to-any-rails-application/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:31:51.997

你是在问你是否也可以使用博客？如果是这样，那么答案是肯定的，我是 bloggy gem（以及那篇博客文章）的作者，您只需将 gem 'bloggy' 添加到 gemfile 即可使用 bloggy gem

-最佳扎克

# ruby-on-rails - 如何将自定义文本添加到 rails 表单中的提交标签？

> ID：12508114
> 
> 赞同：1
> 
> 时间：2012-09-20T07:44:31.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我想自定义`<%= f.submit %>`我的 rails 表单中的文本。

如果你这样做，`<%= f.submit "New object" %>`那么它会为新操作和编辑操作显示新对象。我怎样才能使新操作和编辑操作有两种不同的自定义消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:47:08.900

就像假设你有`post`模型然后`@post.new_record?`或者`f.object.new_record?`根据这个有条件地你可以更新文本

# html - 未设置溢出时，Div 高度不正确

> ID：12508116
> 
> 赞同：0
> 
> 时间：2012-09-20T07:44:46.770
> 
> 标签：html, css

我有 HTML，如 [http://jsfiddle.net/Lijo/SCYVN/4/](http://jsfiddle.net/Lijo/SCYVN/4/)所示。

有蓝色边框的“optionLine”类。但是当没有设置溢出时，边框没有按预期工作。设置溢出时它工作正常。

1.  为什么在这种情况下必须溢出？

2.  有什么方法可以让它工作而不会溢出？

代码

```
.optionLine
{
display:block;
border: 1px solid blue;
/*overflow:auto;*/
} 
```

参考：

1.  [动态添加div时父div不调整高度](https://stackoverflow.com/questions/12457547/parent-div-does-not-adjust-height-when-adding-div-dynamically)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T07:46:51.323

边框无法正常工作，因为带有边框的元素的子元素是浮动的。

需要清除浮动元素以使其容器具有正确的预期尺寸。

有关clearfix 信息，请参见[此处](http://www.webtoolkit.info/css-clearfix.html)

这个[SO question](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)对于不同的情况也有一些非常详细的解释和解决方案。最近`display:table`经常用这个方法...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:54:37.147

试试这个[http://jsfiddle.net/SCYVN/6/](http://jsfiddle.net/SCYVN/6/)

```
.optionLine
{
    display: table;
    border: 1px solid blue;
    /*overflow:auto;*/
    width:100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:51:04.437

放下它`float:left;`，`.optionItem`它将被修复。如果您不想这样做，则必须在（对于每一行浮动项目）和浮动项目之后添加一个包装器`clear: both;`...

但添加`overflow: auto;`始终是最好的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T07:47:06.470

因为您的物品（在容器内）是浮动的。浮动项目超出了文档的正常流程；您需要清除它们的浮动（通过在容器上使用 overflow: auto 或添加另一个具有 clear: left 或 clear: 都指定的元素）以捕捉文档的流回。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-20T08:00:19.713

您需要为大纲 div 设置宽度和高度

前任：

```
border: blue 1px solid;
width:500px;
height:50px; 
```

# c# - 网络驱动程序中的 IFrame。输入 RTE

> ID：12508125
> 
> 赞同：1
> 
> 时间：2012-09-20T07:45:20.050
> 
> 标签：c#, iframe, selenium, webdriver, rich-text-editor

我的页面上有一个富文本编辑器，需要在其中输入一些文本。我写了一个解决方案，但它似乎只能间歇性地工作。这是我已经尝试过的：

```
 var iframe = _driver.SwitchTo().Frame(Driver.FindElement(By.XPath(xpath)));
        var editor = iframe.FindElement(By.XPath("//*"));
        for (var i = 1; _driver.FindElement(By.XPath("//*")).Text == String.Empty; i++)
        {
            switch (i)
            {
                case 1:
                    editor.SendKeys(text);
                    break;
                case 2:
                    editor.SendKeys(Keys.Control + "a");
                    editor.SendKeys(Keys.Delete);
                    editor.SendKeys(text);
                    break;
                case 3:
                    editor.Click();
                    editor.SendKeys(text);
                    break;
                case 4:
                    throw new Exception("Rich Text Editor can't be reached");
            }
            editor.SendKeys(text); 
```

在循环中，我检查是否输入了文本。如果不是，我尝试不同的情况。此外，如果我尝试执行**editor.Clear();** 我永久收到错误“元素必须是用户可编辑的才能清除它。” 我可以（不时）输入，但不能（永久）清除。那么，问题是如何稳定这段代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:51:44.110

好的，我找到了解决方案。它通过 DOM 工作。currentInstance 获得焦点文本区域，这就是为什么我首先使用 click 方法。

```
editor.Click();
IJavaScriptExecutor js = (IJavaScriptExecutor) _driver;
js.ExecuteScript("CKEDITOR.currentInstance.insertText('text')") 
```

# listview - Windows 8 Metro App 中的高分辨率和 ListView

> ID：12508131
> 
> 赞同：1
> 
> 时间：2012-09-20T07:45:45.310
> 
> 标签：listview, windows-8, microsoft-metro, windows-runtime, winjs

我正在使用 HTML 和 JavaScript 开发 Windows 8 Metro 应用程序，但我遇到了屏幕缩放问题。

目前我正在为 1366x768 设计应用程序。通常页面上有一个ListView，你可以看到这个分辨率的简单草图。 ![1366x768](../Images/53b6f51499f74fa6973c0de351a2e750.png)

但是当分辨率增加时，例如 2560x1440 分辨率的 ListView 看起来像下图。 ![2560x1440](../Images/b763511861179e4b51a0d8cc5b501591.png)

如您所见，这看起来很丑陋。实际上我不确定我应该为高分辨率做些什么。

我想的第一件事是在屏幕中间以 1366x768 分辨率保留相同的 ListView。但我找不到办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:48:45.073

您可以做一些事情来管理布局。第一个是设置`ListView`将在其网格布局中显示的最大行数，如下所示：

```
list.winControl.layout.maxRows = 2; 
```

如果您有足够的项目，那么这将具有创建宽而浅的布局的效果。

您在问题中提到的另一种选择是将 ListView 居中并固定其大小。我发现最简单的方法是使用 CSS flex box 布局。这是一个独立的小示例，它向您展示了`maxRows`设置和 CSS，它应用于包含`ListView`（而不是 ListView 本身）的元素。创建一个新的VS项目，将标记复制到`default.html`文件中并启动应用程序，您将能够看到效果：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>
    <style type="text/css">
        #container {
            display: -ms-flexbox;
            -ms-flex-align: center;
            -ms-flex-pack: center;
            height: 100%;
        }
        #list {
            width: 1366px; height: 768px;
        }
        .templateItem {
            width: 200px; height: 200px; font-size: 30pt;
            margin: 10px; border: thick solid white; background-color: gray;
        }
    </style>
    <script>
        WinJS.Application.onactivated = function (args) {
            data = new WinJS.Binding.List();
            WinJS.UI.processAll().then(function () {
                for (var i = 0; i < 8; i++) {
                    data.push({ value: i });
                }
                list.winControl.layout.maxRows = 2;
            });
        }
        WinJS.Application.start();
    </script>
</head>
<body>
    <div id="template" data-win-control="WinJS.Binding.Template">
        <div class="templateItem" data-win-bind="innerText: value"></div>
    </div>
    <div id="container">
        <div id="list" data-win-control="WinJS.UI.ListView" data-win-options="{
            itemDataSource: data.dataSource,
            itemTemplate:template}">
        </div>
    </div>
</body>
</html> 
```

从你的问题很难看出，但你也可以考虑放弃`ListView`并使用其他东西。如果要显示的项目数量固定，您可能希望使用标准 HTML 元素并使用 CSS（可能使用新的网格布局）来更好地控制它们的显示方式。

# javascript - 将 jQueries 插件数据保存到字符串不起作用

> ID：12508135
> 
> 赞同：0
> 
> 时间：2012-09-20T07:46:17.753
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试开发我的第一个 jQuery 插件，但我遇到了很多陷阱。插件本身是某种范围滑块，可在具有不同设置的一个页面上处理多个实例。

无论如何，我遇到了很多问题，首先，启动后我无法检索和更改我的插件设置。到目前为止，我已经使用了 google 和 SO，现在我遇到了另一个问题。每个教程，解决方案都`var $this = $(this), data = $this.data('name');`用于轻松访问插件选项/设置。我也使用它，但不知何故我无法检索保存的数据。这是我的代码：

```
;(function ($) {
    var settings = {
        min: 20,
        max: 100,
        step: .1,
        vertical: false,
        defaultValue: 20,
        onMouseUpFn: function() {},
        onSlideChange: function() {}
    };

    var methods = {
        init: function (options) {
            return this.each(function() {
                var $this = $(this),
                    data = $this.data('slider');/*,
                    // won't work. why?
                    settings = {
                        min: 20,
                        max: 100,
                        step: .1,
                        defaultValue: 20,
                        vertical: false,
                        onMouseUpArea: false,
                        onMouseUpFn: function () {},
                        onSliderChange: function() {}
                    };*/

                if(options) {$.extend(settings, options); }

                if(!data) {
                    var defaultData = {
                        target:$this,
                        settings:settings,
                        slider:$this.find('.sliderrr'),
                        sliderWidth:$this.find('.sliderrr').width(),
                        valueText:$this.find('.sliderrr span')
                    };

                    data = $this.data('slider', defaultData);
                }

                console.log([
                    data.data('slider'),
                    $().jquery // "1.7.2"
                ]);
                /*[
                Object
                    settings: Object
                        defaultValue: "56.3"
                        max: "56.3"
                        min: 20
                        onMouseUpFn: function () {}
                        onSlideChange: function () {}
                        step: 0.1
                        vertical: false
                        __proto__: Object
                    slider: e.fn.e.init[1]
                    sliderWidth: 10
                    target: e.fn.e.init[1]
                    valueText: e.fn.e.init[1]
                    __proto__: Object
                ]*/

                if(data.settings.vertical) { // Uncaught TypeError: Cannot read property 'vertical' of undefined
                    data = $.extend(data, {
                        barOffset: $this.find('.barrr').offset().top,
                        barLength: $this.find('.barrr').height() - data.sliderWidth
                    });
                } else {
                    data = $.extend(data, {
                        barOffset: $this.find('.barrr').offset().left,
                        barLength: $this.find('.barrr').width() - data.sliderWidth
                    });
                }

                data.slider.mousedown(function(e) {
                    // slider's logic
                });

                $this.data('slider', data);
            });
        },
        setOptions: function(options) {
            return this.each(function() {
                var data = $(this).data('slider');
                var settings = data.settings; // Uncaught TypeError: Cannot read property 'settings' of undefined

                if(options) {
                    settings = $.extend(settings, options);
                    data = $.extend(data, settings);

                    $(this).data('slider', data);
                }
            });
        }
    };

    $.fn.sliderrr = function (method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            return $.error('Method ' + method + ' does not exist in slider');
        }
    }
})(jQuery); 
```

我添加了作为对象的注释和控制台日志得到的错误。这是 jsFiddle 版本：http: [//jsfiddle.net/RJkA2/](http://jsfiddle.net/RJkA2/)

我已经搞砸了将近 2 天了，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:01:33.600

我改变了你的初始化函数：

```
if(!data) {
    var defaultData = {
        target:$this,
        settings:settings,
        slider:$this.find('.sliderrr'),
        sliderWidth:$this.find('.sliderrr').width(),
        valueText:$this.find('.sliderrr span')
    };
    $this.data('slider', defaultData); //setting data doesn't return the data!
    data=$this.data('slider');
}
console.log([$this.data('slider'), $().jquery]); //"data.data" was written here by mistake 
```

这是jsfiddle：http: [//jsfiddle.net/RJkA2/1/](http://jsfiddle.net/RJkA2/1/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:20:40.023

我还从您的代码中删除了错误，现在它可以工作了，演示：[jsfiddle.net/RJkA2/2/](http://jsfiddle.net/RJkA2/2/)

# c# - 使用 COM 从注册表加载类适用于 ToolsVersion="2.0" 但因 ToolsVersion="4.0" 失败

> ID：12508136
> 
> 赞同：11
> 
> 时间：2012-09-20T07:46:21.770
> 
> 标签：c#, visual-studio-2010, com, vb6, merge-module

我有一个使用内部 vb 项目作为 COM 的 ac# 项目。

当我将项目转换为 VS 2010 时，以下行向我抛出异常：

```
Set RTCClient_ = New RTCCORELib.RTCClient 
```

这`RTCCore.RTCClient`是用于 RTC 的 Microsoft 合并模块（RTC 客户端 API 1.2）的一部分，您可以将其嵌入到您的安装包中（在我的情况下包括 EXE）。

这`RTCCore.RTCClient`是正在注册到注​​册表的类`HKEY_CLASSES_ROOT\RTCCore.RTCClient`

我得到的错误是：

> 错误：自动化错误
> 找不到指定的模块。(-2147024770)

但是，如果我正在更改我的 csproj 并使用`ToolsVersion="2.0"`上面的行，我可以获得 RTCClient 对象。

似乎是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:13:32.273

尝试`false`在项目中对 COM 库的引用的属性中将 Embed Interop Types 设置为。我的是 C#，但你的 VB.Net 也可能有它。

![属性窗口](../Images/a091f326f79d9f3925aabff33863f0cd.png)

# php - Codeigniter 在 My_Controller 的 __remap 方法中重定向

> ID：12508138
> 
> 赞同：0
> 
> 时间：2012-09-20T07:46:32.383
> 
> 标签：php, codeigniter, redirect

我在 My_Controller 中使用这个 remap 方法和 philsturgeon 的库

```
<?php
class MY_Controller extends MX_Controller 
{
    protected $data;
    protected $view;

    function __construct()
    {
        parent::__construct();
    }

    public function _remap($method, $parameters)
    {
        if($this->view === TRUE OR $this->view === '')
        {
            $this->template->build('default');
        }else if(strlen($this->view) > 0){
            $this->template->build($this->view);
        }else{
            $checkpoint =   $this->session->flashdata('exit');
            if($checkpoint){
                exit();
            }else{
                $this->session->set_flashdata('exit',TRUE);
            }
            $this->redirect = base_url()  . $this->redirect;
            redirect($this->redirect);
        }   

    }
} 
```

在这里，我想在子控制器中知道如何处理这种情况

```
<?php
class Home extends My_Controller {

    public  $redirect = '/admin/dashboard';
    public  $view   =   FALSE;

    function __construct()
    {
        parent::__construct();
    }

    function dashboard($days = '')
    {
        if (!$this->session->userdata('session_admin'))
        {
            $this->redirect =   '/admin/login';
        }else{
            //display dashboard 
        }
    }

    function login()
    {   
        if ($this->session->userdata('session_user')){
            $this->redirect;
        }else{
            $this->view =   'login';    //Load login view through remap method with template library
        }
    }
} 
```

如您所见，它进入一个循环并在 My_Controller 中以我的条件退出。虽然我已经创建了这个，但我想知道如何在这里处理重定向。什么应该是优化的解决方案。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:20:28.833

我已经使用闪存数据解决了这个问题，我正在设置闪存数据。当它进入循环时，它会检查是否存在闪存消息，如果存在则使用退出，否则设置闪存数据。

# version-control - 管理二进制版本

> ID：12508150
> 
> 赞同：4
> 
> 时间：2012-09-20T07:47:50.567
> 
> 标签：version-control, binaries

我正在寻找有关如何管理共同构成发布版本的二进制工件的工具和建议。

该项目如下所示：

```
+ Package-Version
|__ Component A-Version
|__ Component B-Version
|__ Component C-Version 
```

可能存在更多级别，因此组件本身是由具有自己版本的子组件构建的。

目前，我们使用带有二进制文件链接的 Excel。我希望通过引入一些可以更好地管理它的简单工具来改进这一点。它应该包括一些基础知识，例如：搜索版本/子版本并定位它们在树中的位置，WEB 访问使其易于访问，并具有一些界面，以便可以使用脚本加载新的二进制文件。此外，每个项目都需要有一些与之相关的信息，主要是发行说明。

请注意，如果重要的话，这是一个嵌入式 C/C++ 项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:16:27.093

推荐用于二进制文件（与特定版本的代码相关的管理）的常用工件存储库是[**Nexus**](http://www.sonatype.org/nexus/)。
对于 c++，您还可以考虑[**使用 Nuget**](http://nuget.codeplex.com/)来管理这些相同的依赖项。

在这两种情况下，我们的想法是在源代码控制工具中存储一个文件（例如 Nexus 的 pom.xml），该文件将指定您需要的二进制文件的确切版本（或者您构建并发布到该工件存储库）

通过将二进制文件保存*在*VCS（版本控制系统）之外，您可以确保 VCS 不会变得太大（在磁盘空间中），并且您允许 IT 生产团队（负责发布管理）访问与IT 开发团队（两个空间完全分离）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T02:32:28.417

您可以考虑并尝试使用带有[Largefiles 扩展名](http://mercurial.selenic.com/wiki/LargefilesExtension)的 Mercurial （预防措施“......被认为是最后手段”）

一些大文件中包含的不太明显的细节

*   [如何使用 Mercurial 的 LargeFiles 扩展？](https://stackoverflow.com/questions/8197880/how-to-use-mercurials-largefiles-extension)
*   [Largefiles 扩展：有效处理大型二进制文件](http://aragost.com/mercurial/largefiles/)

# vb.net - Application.Idle 行为不同

> ID：12508151
> 
> 赞同：1
> 
> 时间：2012-09-20T07:47:51.427
> 
> 标签：vb.net, events, timer, idle-timer, my.settings

我目前正在研究一个将在一定数量的非活动时间内注销用户的方法。我宣布 Application.Idle

```
Private Sub Application_Idle(sender As Object, e As EventArgs)
    Timer.Interval = My.Settings.LockOutTime
    Timer.Start()
End Sub 
```

然后，在表单加载事件中调用它

```
Private Sub ctlManagePw_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    AddHandler System.Windows.Forms.Application.Idle, AddressOf Application_Idle
End Sub 
```

在计时器上

```
Private Sub Timer_Tick(sender As Object, e As EventArgs) Handles Timer.Tick
    Try
        If My.Settings.TrayIcon = 1 Then
            Me.ParentForm.Controls.Remove(Me)
            control_acPasswords()
            _Main.NotifyIcon.Visible = True
            _Main.NotifyIcon.ShowBalloonTip(1, "WinVault", "You've been locked out due to innactivity", ToolTipIcon.Info)
        End If
        'Stop
        Timer.Stop()
        Timer.Enabled = False
        'Flush memory
        FlushMemory()
    Catch ex As Exception
        'Error is trapped. LOL
        Dim err = ex.Message
    End Try
End Sub 
```

这样做的问题是，每当空闲事件结束时，我仍然会收到通知说我再次被锁定和/或应用程序已进入空闲事件。

`control_acPasswords()`是注销用户控件

这是我释放内存的地方

```
Declare Function SetProcessWorkingSetSize Lib "kernel32.dll" (ByVal process As IntPtr, ByVal minimumWorkingSetSize As Integer, ByVal maximumWorkingSetSize As Integer) As Integer
Public Sub FlushMemory()
    Try
        GC.Collect()
        GC.WaitForPendingFinalizers()
        If (Environment.OSVersion.Platform = PlatformID.Win32NT) Then
            SetProcessWorkingSetSize(Process.GetCurrentProcess().Handle, -1, -1)
            Dim myProcesses As Process() = Process.GetProcessesByName(Application.ProductName)
            Dim myProcess As Process
            For Each myProcess In myProcesses
                SetProcessWorkingSetSize(myProcess.Handle, -1, -1)
            Next myProcess
        End If
    Catch ex As Exception
        Dim err = ex.Message
    End Try
End Sub 
```

如果我放置一个`MsgBox(ex.Message)`Timer_Tick 事件异常，我会不断收到

`Object reference not set to an instance of an object`

我的预期结果是，每当表单进入 Idle 事件时，它将获取间隔或时间，`My.Settings.LockOutTime`其中是分钟值并存储为`60000`for `1 minute`or`60 seconds`并启动计时器。现在在 Timer_Tick 上`logout`，如果间隔结束，则用户。

我处理事件的方式有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:50:49.047

Application.Idle 事件触发多次。每次 Winforms 从消息队列中检索所有消息并将其清空。问题是，它触发的第二次和后续时间，您正在启动一个已经启动的计时器。这没有任何效果，您必须将其重置，以便在编程的时间间隔内再次开始滴答作响。容易做到：

```
Private Sub Application_Idle(sender As Object, e As EventArgs)
    Timer.Interval = My.Settings.LockOutTime
    Timer.Stop()
    Timer.Start()
End Sub 
```

下一个问题（可能是异常的原因）是您必须在表单关闭时明确取消订阅该事件。它不是自动的，Application.Idle 是一个静态事件。使用 FormClosed 事件：

```
Protected Overrides Sub OnFormClosed(ByVal e As System.Windows.Forms.FormClosedEventArgs)
    Timer.Stop()
    RemoveHandler Application.Idle, AddressOf Application_Idle
    MyBase.OnFormClosed(e)
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:55:46.113

除了汉斯的回答：当用户不再空闲时，您似乎没有停止计时器的运行。也就是说，定时器在我空闲时启动，但如果我回来，当定时器滴答作响时，我仍然会被锁定。

您需要确保在用户再次激活时停止计时器。

# windows-8 - 以编程方式在 Windows8 Metro 应用程序的 SettingsPane 中打开 MenuCommand

> ID：12508153
> 
> 赞同：1
> 
> 时间：2012-09-20T07:48:09.667
> 
> 标签：windows-8, appsettings

我有一个案例，我希望在应用程序中的按钮单击上以编程方式打开与设置窗格中的菜单命令关联的弹出窗口。我不想创建一个新的设置命令，而是让一个菜单已经存在于设置窗格中。任何帮助将不胜感激......对不起，如果我不太清楚......

谢谢和问候，格雷厄姆

# html - 如何在phonegap中使用css添加背景图片

> ID：12508154
> 
> 赞同：5
> 
> 时间：2012-09-20T07:48:12.057
> 
> 标签：html, css, cordova

我正在 phonegap 中为移动设备制作一个标签。我想添加图像作为标签的背景。问题是它没有添加任何背景图像。这是我的目录结构

图像在此文件夹中

```
www/img/tabs.png 
```

在下面的 css 中，我使用像这样的图像路径 url(./img/tabs.png) top left no-repeat; 这是行不通的。这是我的css文件

```
www/stylesheet/css/frames/footer.css 
```

这是我所有的页面

```
www/pages/home.html 
```

这是我的CSS

```
footer {
    position: absolute;
    z-index: 2;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 48px;
    padding: 0;
    background: #535353; 
}

footer ul {
    margin: 0;
    padding: 0;
    list-style-type: none; 
}

footer ul li {
    float: left;
    padding: 5% 10.9%;
    background: url(./img/tabs.png) top left no-repeat; 
}

footer ul li a {
    width: 100%;
    height: 100%;
    color: #fff;
    text-decoration: none; 
}

footer ul li a .current {
    background: url(./img/tabs.png) bottom left no-repeat; 
} 
```

这是我的html

```
<header>
    Header
</header>
<section id="wrapper">
    <div id="scroll-content">

    </div>
</section>
<footer>
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Profile</a></li>
        <li><a href="#">Photo</a></li>
    </ul>
</footer> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T07:53:54.747

你的形象`url`不行。

其实`url`你提供给你的图片的路径应该和你的CSS文件的位置有关。

所以，你需要使用：

> `url(../../../img/tabs.png)`

代替：

> `url(./img/tabs.png)`

试一试，让我知道这是否有效

# ruby-on-rails - 渲染文件时如何设置正确的路径？

> ID：12508155
> 
> 赞同：0
> 
> 时间：2012-09-20T07:48:13.430
> 
> 标签：ruby-on-rails, windows, rendering

我有这样的问题：我想渲染 html 文件，但我没有设置我的文件的路径。

我需要说，我在 Windows 上运行 Rails。

在我看来，我有代码：

```
<%= render :file => '1509/1509/app/views/static_pages/index.html', :layout => false %> 
```

但这给了我错误：

```
undefined method `virtual_path' for false:FalseClass 
```

我的文件在这里：

```
 C:\1509\1509\app\views\static_pages 
```

也试过：

```
 <%= render :file => '/views/static_pages/index.html', :layout => false %> 
```

但这给了我：

```
 Missing template /views/static_pages/index with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
  * "c:/1509/1509/app/views"
  * "C:/Ruby192/lib/ruby/gems/1.9.1/gems/devise-2.1.0/app/views"
  * "c:/1509/1509"
  * "c:/" 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:25:37.780

绝对路径是：

```
<%= render :file => 'c:/1509/1509/app/views/static_pages/index.html' %> 
```

相对路径：

```
<%= render :file => 'static_pages/index.html' %> 
```

# c# - 返回 IEnumerable 或转换为列表 立即地？

> ID：12508159
> 
> 赞同：3
> 
> 时间：2012-09-20T07:48:24.967
> 
> 标签：c#, ienumerable

我正在设计一个具有多个返回对象列表的函数的类。我注意到，当 my`IEnumerable<T>`转换为 a时，调试变得更容易，`List<T>`因为可以在 Watch 窗口中查看对象。但是，我不确定这是否是`IEnumerable`.

**问：哪个更好？**

```
public IEnumerable<MyData> GetData()
{
    return Foo();
}

public IEnumerable<MyData> GetData()
{
    return Foo().ToList();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T07:52:07.047

良好做法 - 除非有充分的理由/要求，否则不要工作。因此，除非您有特殊原因 - 只需返回`IEnumerable<MyData>`而不调用 ToList()/ToArray() 即可。

潜在原因：

*   函数承诺完成对潜在延迟枚举的评估
*   您希望结果被枚举多次

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:49:51.663

更好地返回`IEnumerable<..>`为更通用的类型。*调用者*可以决定如何处理它。在*您的*情况下，您在两种情况下都返回`IEnumerable<..>`，因此*没有任何理由*run `ToLIst()`，只需返回`IEnumerable`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T07:58:24.093

`IEnumerable<T>`正在为调用者提供一个 T 集合的合同。但是，当您使用`IList<T>`or时`List<T>`，您是在建议他们可以直接添加或删除元素（无需通过您在类实现中可能拥有的任何方法，例如 Add 或 Register）。如果您的意图只是让调用者看到“项目”，则 IEnumerable 是更好的合同。

虽然不是 100%，但我将 IEnumerable 返回值视为只读集合。

易于调试应该是良好设计的次要因素。我建议您简单地对您的类进行单元测试，而不是依赖于能够在运行时窥视内部。但是，在大多数情况下，调试器会将“基”类显示为第一项。所以 IEnumerable 的第一项是您在内部实际使用的列表。只需要再“展开”一次，就能看到成员！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T07:51:07.867

这真的取决于你的要求。方法签名的返回类型也是该方法契约的一部分。返回 IEnumerable 的方法表示值流，而返回 List（或更抽象的 Collection）的方法返回值的可变集合。

我通常会尝试跟上以下做法。

*   当没有关于值的数量的固定知识或加载所有值需要大量时间/资源（例如查询结果）时，尝试使用 IEnumerable 或 IObservable 流式传输数据。
*   对预先知道的不可变的固定集合使用数组。
*   将 ICollection 用于预先知道的可以变异的固定集合。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T07:51:52.330

如果您正在使用将要处理的工作单元，我最好使用元素列表，因为一旦处理完毕，您将无法获得您的元素。

在所有其他情况下，可以返回通用**IEnumerable**，因为它提供了更好的灵活性。

最后，这一切都取决于您的要求，请注意 IEnumnerable 不会在分配给变量的确切时刻检索元素，而是在枚举时检索元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T07:52:18.887

返回 IEnumerable 让调用者决定如何处理结果 - 要么枚举它，要么将它传递给其他东西而不在当前时刻枚举它。ToList() 强制此时将数据枚举到一个列表中，然后将其传递给调用者。

因此 - IEnumerable 很可能是两者中更好的 - 但是在调试时使用 ToList 会更容易。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T13:26:31.630

有一个简单的规则：返回更具体，接受更通用。

如果您的返回值确实是`IEnumerable<>`，则按原样返回。但永远不要这样做：

```
public IEnumerable<MyData> GetData()
{
    return this.list; // list = new List<MyData>();
} 
```

上面的代码在没有任何需要的情况下限制了调用者。例如，它将是一个列表，调用者无论如何都可以将其转换为列表并清除它。

# ruby-on-rails - 启动瘦服务器时加载 bootstrap-sass 时出现问题，rails

> ID：12508164
> 
> 赞同：4
> 
> 时间：2012-09-20T07:48:40.667
> 
> 标签：ruby-on-rails, twitter-bootstrap, gem, thin

我正在尝试启动我的瘦服务器。这不起作用，失败并出现以下错误：

```
myApp/gems/bootstrap-sass-2.1.0.0/lib/bootstrap-sass.rb:18:in `load!': 
bootstrap-sass requires either Rails > 3.1 or Compass, neither of which 
are loaded (Bootstrap::FrameworkNotFound)
from /Users/MyName/.rvm/gems/ruby-1.9.3-p194@myApp/gems/bootstrap-sass-2.1.0.0/lib/bootstrap-sass.rb:43:in `<top (required)>'
*a bounch of more lines indicating code lines* 
```

我尝试使用 gem 'compass' 而不是 'compass-rails'。那没有结果。我试图将它放在我的 :assets 组之外，但没有运气。这是怎么回事？

我无法找到有关此的任何信息。我的 gemfile 看起来像这样：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'pg', '0.12.2'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'compass-rails'
  gem "bootstrap-sass", ">= 2.1.0.0"
  gem 'uglifier', '>= 1.0.3'
end

group :test do
  gem 'shoulda'
  gem 'mocha'
end

gem 'jquery-rails'
gem "thin", ">= 1.4.1"
gem "rspec-rails", ">= 2.11.0", :group => [:development, :test]
gem "capybara", ">= 1.1.2", :group => :test
gem "email_spec", ">= 1.2.1", :group => :test
gem "cucumber-rails", ">= 1.3.0", :group => :test, :require => false
gem "database_cleaner", ">= 0.8.0", :group => :test
gem "launchy", ">= 2.1.2", :group => :test
gem "factory_girl_rails", ">= 4.0.0", :group => [:development, :test]

gem "devise", ">= 2.1.2"
gem "cancan", ">= 1.6.8"
gem "rolify", ">= 3.2.0"
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'paperclip', '~> 3.0'
gem 'ayah_integration'
gem 'rails_autolink' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T11:58:45.717

所以，我发现了问题所在。这很愚蠢..所以：

在我的 config.ru 文件中，我有以下内容：

```
...
require 'bootstrap-sass'
require ::File.expand_path('../config/environment',  __FILE__)
... 
```

它应该是相反的：

```
...
require ::File.expand_path('../config/environment',  __FILE__)
require 'bootstrap-sass'
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T07:27:02.743

就我而言，问题出在`Gemfile`，我有：

```
gem 'bootstrap-sass', '~> 2.3.1.0'  
gem 'sass-rails',   '~> 3.2.0' 
```

它应该是：

```
gem 'sass-rails',   '~> 3.2.0'
gem 'bootstrap-sass', '~> 2.3.1.0' 
```

如果您不使用 Compass ，则无需`require 'bootstrap-sass'`in`config.ru`

[edit] Is there a *really* good reason why order in Gemfile breaks app? I find this an architecture flaw

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T07:53:45.423

我现在正在使用这个组合`Gemfile`，它似乎工作正常。

```
group :assets do
  gem 'bootstrap-sass', '~> 2.0.4.0'
  gem 'compass'
end 
```

# javascript - 使用 javascript 创建的链接在 IE 中不起作用

> ID：12508165
> 
> 赞同：1
> 
> 时间：2012-09-20T07:48:46.893
> 
> 标签：javascript

我使用 JavaScript 创建了更多链接。它在 Firefox 和 crom 中运行良好。但同样不适用于 IE。

下面是我为此编写的代码。

```
var underLine = document.createElement('u');
underLine.innerHTML = 'more';
var newlink = document.createElement('a');
newlink.setAttribute('class', 'a');
newlink.setAttribute('id', 'morelink'+count);
newlink.setAttribute('onmouseover', 'somejavascript');
newlink.appendChild(underLine);
someDiv.appendChild(newlink); 
```

任何人都可以帮我解决如何为 IE 解决这个问题吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:57:47.200

您没有为`<a>`元素设置任何内容，请这样做：

```
newlink.innerHTML = 'click me'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:46:51.267

好吧，这似乎是一个简单（丑陋）的解决方法：

代替：

```
underLine.innerHTML = 'more'; 
```

和：

```
if(document.all)
    underLine.innerText = 'more';
else
    underLine.textContent = 'more'; 
```

或者：

```
if(underLine.innerText)
    underLine.innerText = 'more';
else
    underLine.textContent = 'more'; 
```

# iphone - 要更新 UItableview 中特定行的特定标签：

> ID：12508166
> 
> 赞同：1
> 
> 时间：2012-09-20T07:48:47.850
> 
> 标签：iphone, objective-c, ipad

[在此处输入链接描述](https://i.stack.imgur.com/nRzXh.png)在给定的屏幕截图中，我正在从 web 服务获取此数据 whish 给我 2 个 ID 即 & 我已分配为跟随按钮的标签和作为类似按钮的标签 & claimID + 1 作为类似标签显示的标签喜欢的数量，但是当我想更新喜欢按钮点击标签中的喜欢数量时会出现问题，因为我已经分配了 +1 的 claimID 它会在该 ID 确实是某人 claimID 时产生问题，例如 111 是 claimID 并且当 112（claimID + 1）并为 UIlabel 分配标签而不是应用程序崩溃，因为 112 是下一个 claimID ......请帮助我![在此处输入图像描述](../Images/50ec4904e9eb9c88c797b6a070388d30.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:06:34.770

而不是 +1 作为标签，为什么不以 10 或 100 的倍数分配标签。例如 claimId = 111 然后将您的按钮标签设置为 claimId * 10 即 111 * 10 = 1110 ，依此类推。这样您就可以摆脱标签问题。进一步检索索赔 ID 很容易..[button.tag/10] 将给您您的索赔 ID

# hadoop - 更改 Hadoop 中数据节点的数量

> ID：12508169
> 
> 赞同：2
> 
> 时间：2012-09-20T07:48:54.163
> 
> 标签：hadoop, mapreduce

如何更改数据节点的数量，即禁用和启用某些数据节点以测试可扩展性？更清楚一点，我有 4 个数据节点，我想用 1、2、3 和 4 个数据节点来一一试验性能。是否可以只更新namenode中的从属文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:55:09.083

临时停用节点的正确方法：

1.  创建一个“排除文件”。这会列出您希望删除的主机，每行一个。
2.  设置`dfs.hosts.exclude`和`mapred.hosts.exclude`到这个文件的位置。
3.  `hadoop dfsadmin -refreshNodes`通过执行和更新namenode和jobtracker`hadoop mradmin -refreshNodes`
4.  这将开始退役过程。过去在这些节点上复制的所有数据都将从这些节点上复制到其他节点上。您可以通过 Web UI 检查进度。

请注意，这些节点不会像您一样立即用于 MR 作业，`hadoop mradmin -refreshNodes`但它们仍会保存数据，因此您可能会吃掉一些网络延迟，否则如果您在退役完成之前运行某些东西就不会这样做。所以对于一个完全真实的测试，你应该等到它完成。

要重新添加节点，只需从排除文件中删除它们并再次执行 -refreshNodes 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:32:13.657

从属文件仅用于 start-dfs 之类的脚本，如果您不使用这些脚本，可以将其忽略。因此，您可以将其留空并通过打开/关闭将数据节点添加/删除到集群。

# android - 按下主页按钮退出应用程序

> ID：12508170
> 
> 赞同：0
> 
> 时间：2012-09-20T07:48:59.763
> 
> 标签：android, dialog, key-events

我有一个实现 facebook 的 android 应用程序。当单击活动中的按钮时，它会显示 facebook 登录对话框（扩展对话框）。

如果我们在加载 facebook 对话框后按下主页按钮，应用程序将退出。但如果我们重新启动应用程序，它会显示对话框而不是活动。我在我的 Dialog 类中使用它

```
public boolean onKeyUp(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK){
            mSpinner.dismiss();
            mListener.onCancel();
            FbDialog.this.dismiss();
        }

        return super.onKeyUp(keyCode, event);
    } 
```

从我的谷歌搜索中，我可以发现我们无法获得主页按钮点击。

那么如何通过单击主页按钮退出并完成所有活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:11:58.020

我会为此建议一些解决方法。由于我不知道您的确切要求，因此我无法具体说明。1.创建一个活动并在 onCreate 方法中完成它。2.当单击主页按钮时，使用意图调用该活动（将意图属性设置为 FLAG_ACTIVITY_CLEAR_TOP）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:52:25.457

您可以使用：

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

在你的 onKeyUp 方法中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:52:36.950

主页按钮单击不会退出应用程序，它只会将其发送到后台..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T07:52:54.783

单击主页按钮并退出是不好的，但我不知道您的真正要求是什么。您可以检测到 onkey() 按下的主页按钮。实现 onkey() 并检查按下的键是否为主页键。如果它是 home 键，则调用 finish() 其他什么都不做。

主页按钮实际上用于暂停您当前的活动并转到主页按钮。对于退出当前活动，我们使用后退按钮。

# ios - 跟踪 UIScrollview contentoffset - iOS

> ID：12508173
> 
> 赞同：0
> 
> 时间：2012-09-20T07:49:13.473
> 
> 标签：ios, xcode, uiscrollview, contentoffset

我有一个框架小于内容大小的滚动视图。滚动视图已启用分页。这类似于 iOS Safari 应用程序中的 safari 新标签页。我的问题是“我有 4 个图像 A、B、C 和 D。如果 B 在框架内，我是否可以知道哪些对象不在框架内？” 这是实现的 UIScrollview的[屏幕截图。](http://i.imgur.com/YsDdz.png)具有低 alpha 分量的黑框将被其他页面上的模糊效果替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:12:04.693

您是否尝试过实现委托方法？scrollviewdidscroll 或 scrollviewdidend 减速？在这里您可以简单地获取scrollview.contentoffset。

# ant - 使用 Ant 1.8.4、JDK 1.6.0_33、Junit 4.8.1 和 Eclipse Helios 3.2.3 进行 Junit 报告

> ID：12508175
> 
> 赞同：0
> 
> 时间：2012-09-20T07:49:20.370
> 
> 标签：ant, junit

使用 ANT 的 Junit 报告。我浏览了各种论坛，包括：[https](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384757) ://bugs.eclipse.org/bugs/show_bug.cgi?id=384757 。终于来到这里寻求帮助。

基本上我有一个包含大量测试的 junit 项目，我试图使用 ANT build.xml 运行它并获得一个 html 报告。使用 ANT 1.8.4 和 JDK 1.7 时构建成功运行，但不会生成相同的 html 报告。从 JDK 1.6 可能有帮助的帖子中发现，安装了 JDK 1.6 并尝试从 Eclipse 运行构建。以下是错误：未找到指定的 VM 安装：键入标准 VM，名称为 jdk1.7.0_04。但是相同的构建从 ant 命令行运行。但不会生成任何 html 报告。

请让我知道应该使用 JUint、ANT、JDK 和 Eclipse 的哪个组合才能使其正常工作。即，我应该能够从 ANT 运行我的 junit 测试并查看 html 报告。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:09:29.993

这是一个示例：请注意，它具有**depends="test"**属性，以便在您的测试之后调用它并具有不同的输出目录...

```
 <target name="report" depends="test">
    <!--nicely format the junit reports from xml junit output-->
    <junitreport todir="${test.reports.out}">
        <fileset dir="${test.reports.tmp}">
            <include name="**/*.xml" />
        </fileset>
        <report todir="${test.reports.html}" />
    </junitreport>
    </target> 
```

# c# - 异步检索 RSS 提要时出现 System.Runtime.InteropServices.COMException

> ID：12508178
> 
> 赞同：0
> 
> 时间：2012-09-20T07:49:33.640
> 
> 标签：c#, exception, asynchronous, windows-8, microsoft-metro

我正在尝试构建一个 Windows 8 Metro 应用程序。检索提要的小型 RSS 阅读器。

因此，我尝试获取异步提要。

```
Windows.Web.AtomPub.AtomPubClient client = new Windows.Web.AtomPub.AtomPubClient();
client.RetrieveFeedAsync(new Uri("http://MyURI/index.rss")).Completed += completed; 
```

这是回调函数：

```
private void completed(IAsyncOperationWithProgress<Windows.Web.Syndication.SyndicationFeed, Windows.Web.Syndication.RetrievalProgress> asyncInfo, AsyncStatus asyncStatus); 
```

好的。现在我的问题。

只要我尝试在回调函数中访问对象，一切正常。但是，如果我尝试访问我的类的对象（回调函数所在的对象），我得到了 COMException。我尝试这样的事情：this.MyCollection.Add(...)。我正在构建一个 feedItem，我将它添加到我的班级中的一个集合中。

```
An exception of type 'System.Runtime.InteropServices.COMException' occurred in mscorlib.dll but was not handled in user code

Additional information: Eine Schnittstelle, die für einen anderen Thread marshalled war, wurde von der Anwendung aufgerufen. (Ausnahme von HRESULT: 0x8001010E (RPC_E_WRONG_THREAD))

If there is a handler for this exception, the program may be safely continued. 
```

奇怪的是，这种访问在我的应用程序的每秒钟运行一次。

我不明白这里出了什么问题。

请问有人给我提示吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:33:52.830

好的。解决方案是 BlockingCollection。它是线程安全的。

# codeigniter - codeigniter：在模型中使用 uri 段

> ID：12508179
> 
> 赞同：0
> 
> 时间：2012-09-20T07:49:40.680
> 
> 标签：codeigniter, uri, segment

我正在使用 uri 段删除数据库中的信息：

```
anchor('site/delete_note/'.$row->id, 'Delete') 
```

模型：

```
function delete_note()
{
    $this->db->where('id', $this->uri->segment(3));
    $this->db->delete('note');
} 
```

它工作正常，但我想更新我的信息并且无法让它工作所以这是视图中的链接：

```
anchor('site/edit_note/'.$row->id, 'Edit') 
```

我的控制器：

```
function edit_note()
{
    $note_id = $this->uri->segment(3);
    $data['main_content'] = 'edit_note';
    $this->load->view('includes/template', $data);

    $this->load->library('form_validation');

    $this->form_validation->set_rules('content', 'Message', 'trim|required');

    if($this->form_validation->run() == TRUE)
    {
        $this->load->model('Note_model');
        $this->Note_model->edit_note($note_id);
        redirect('site/members_area'); 

    }

} 
```

我的模型：

```
function edit_note($note_id)
{
    $content = $this->input->post('content');
    $data = array('content' => $content);
    $this->db->where('id', $note_id);
    $this->db->update('note', $data);
} 
```

我对edit_note的看法：

```
<?php

    echo form_open('site/edit_note');
    echo form_textarea('content', set_value('content', 'Your message'));

    echo form_submit('submit', 'Change');
    echo anchor('site/members_area', 'Cancel');

    echo validation_errors('<p class="error">');        ?> 
```

当我试图在编辑模型中直接获取段时，编辑不能作为删除工作，就像我在删除模型中使用的那样。

如果我在控制器中将 $note_id 设置为一个数字，而不是这个 '$this->uri->segment(3)'，它会更新我的数据库。但是，如果我使用获取细分它不起作用。我认为 uri 段在控制器中与模型中一样可用，但有一些我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:19:46.297

更好的是，您可以将函数更改为：而不是通过段手动读取 ID：

`function delete_note($note_id)`

和

`function edit_note($note_id)`

并删除`$note_id = $this->uri->segment(3);`线条。

尽管听起来很傻，但生成的 URL 绝对是正确的，对吧？

最后一个问题，你对路线做过什么吗？

**编辑**

我还注意到在编辑中，您在表单中使用它：

`echo form_open('site/edit_note');`

所以当表单提交时，它提交的 URL 是`site/edit_note`而不是`site/edit_note/{SOME_ID}`. 因此，一旦您进行了更改并提交了表单，就不会有第三个 URL 段！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:01:15.537

在我看来，在模型中使用 uri 段是一种“不好”的方法......你应该从你的控制器函数中传递一个 id 作为参数......

```
function delete_note()
{
    $this->db->where('id', $this->uri->segment(3));
    $this->db->delete('note');
} 
```

如果你想重复使用这个删除方法怎么办？例如，通过 cron 作业等从管理面板中删除笔记，然后以上依赖于 uri 段，您将需要创建额外的删除方法来完成这项工作。另外，如果您要继续使用相同的方法，那么您甚至不需要模型，那么..如果您知道我的意思，只需在控制器中调用这些行...

```
$this->db->where('id', $this->uri->segment(3));
$this->db->delete('note'); 
```

所以最好将其更改为类似于您的`edit_note`() 模型函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:03:10.537

好吧，您的代码中有一些逻辑错误。

```
function edit_note()
{
    $note_id = $this->uri->segment(3);
    $data['main_content'] = 'edit_note';
    $this->load->view('includes/template', $data);
//// What is the use of loadig a view when you are editing

    $this->load->library('form_validation');

    $this->form_validation->set_rules('content', 'Message', 'trim|required');

    if($this->form_validation->run() == TRUE)
    {
        $this->load->model('Note_model');
        $this->Note_model->edit_note($note_id);
        redirect('site/members_area'); 

    }

} 
```

而是这样做

```
function edit_note()
{
    if($this->input->post()){

        $this->load->library('form_validation');

        $this->form_validation->set_rules('content', 'Message', 'trim|required');

        if($this->form_validation->run() == TRUE)
        {
            $this->load->model('Note_model');
            $this->Note_model->edit_note($note_id);
            redirect('site/members_area'); 
        }
    }else{
        $note_id = $this->uri->segment(3);
        $data['main_content'] = 'edit_note';
        $this->load->view('includes/template', $data);
    }
} 
```

最重要
的另一件事是，您应该注意的是，您正在使用锚点来访问编辑注释，但实际上并未提交表单，因此它不会获取任何要更新的发布数据。

# java - 你如何使用 Intellij “Mavenize”一个项目？

> ID：12508180
> 
> 赞同：60
> 
> 时间：2012-09-20T07:49:40.493
> 
> 标签：java, maven, intellij-idea

我看过很多关于使用 eclipse 来 Mavenize 项目的帖子。在 IntelliJ 中有没有简单的方法来做到这一点？根据我对“Mavenize”的了解，它只是在 pom.xml 中添加一些 xml，目录结构在 src/main/java, src/main/test ....

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2017-03-20T21:12:10.307

对于那些从视觉中受益的人，就像我一样：

[![在此处输入图像描述](../Images/5ed9ba98473f21748a2b8cb1bf0ab2d8.png)](https://i.stack.imgur.com/xXkRW.png)

本质上，只需右键单击该文件夹。在此示例中，它被调用`StackOverFlow`并选择`Add Framework Support`然后选中该`Maven`框。请注意，此选项仅在您在`src`文件夹中创建类时存在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-21T02:53:47.027

右击模块，选择“添加框架支持...”，勾选“Maven”技术。（这也会创建一个 pom.xml 供您修改。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-09T23:40:14.560

转到 .iml 并在组件中将标签更改为以下内容

```
<module org.jetbrains.idea.maven.project.MavenProjectsManager.isMavenModule="true" type="JAVA_MODULE" version="4"> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-25T06:08:46.330

这适用于 2016.3.1 版本：右键单击项目 -> 转到 Maven 菜单 -> 显示有效的 POM

# c++ - 获取高斯模型权重

> ID：12508182
> 
> 赞同：1
> 
> 时间：2012-09-20T07:49:43.643
> 
> 标签：c++, opencv, model, gaussian

我想知道如何从 OpenCV 中的几个高斯混合模型中获得单个模型的权重。例如，如果 GMM 的模型数量为五个，我想获得第二个或第三个模型的权重。

有人可以帮我吗？另一种说法，我想知道这五款中用得最多的是哪一款？

# oracle - 具有很少外键约束的 Oracle 数据库

> ID：12508191
> 
> 赞同：0
> 
> 时间：2012-09-20T07:50:16.483
> 
> 标签：oracle, foreign-key-relationship

我刚刚开始了一个新项目，我遇到了一个只有 3 个外键约束的生产应用程序 Oracle 10g 数据库。我不习惯看到没有外键约束的数据库。我猜测不使用 FK 可能有一些性能/并发性考虑。原因是架构师在逻辑数据库模式中指定了所有关系，但这些关系并未在数据库中作为外键约束来实现。

问题：我读到我可以使用 RELY NOVALIDATE 定义一个不会影响性能的外键约束。是否值得在此数据库上定义 RELY FK 约束，以便可以轻松查看关系？这个应用程序不是使用 ORM 构建的，没有外键真的值得吗？

该数据库通过以下示例进行了非规范化

表 1 : FINProduct(ID (number), Description(varchar(5)), FINproductCode(varchar(10))...)

表 2: FINProductCode(ID (number, FINproductCode(varchar(10)) , LastUpdated(datetime)...)

因此，在表 1 和表 2 之间没有关系，FINproductCode 列只是在表 1 中复制。

现在喝太早了，但我想我需要一个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:02:33.563

我会非常谨慎地假设没有外键约束是对性能问题的合理回应。强制执行外键约束会产生开销（特别是在缺少适当索引的情况下），但您的应用程序不太可能比 Oracle 更有效地验证约束。所以问题实际上是您是否想要外键约束的小开销，或者几乎可以肯定您会将无效数据插入数据库。这不太可能是您想要做出的权衡 - 我还没有遇到一个愿意捕获不正确和难以理解的数据的业务用户，即使这样做比捕获正确数据要快一点.

除非有更多的背景，否则我倾向于创建所有缺少的外键约束。创建`RELY NOVALIDATE`约束是可能的，但它破坏了外键约束的主要好处——首先防止无效数据进入数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:14:19.823

这取决于您是否要仅出于文档目的添加 FK，还是要防止将来使用无效的 FK 值进行 INSERT/UPDATE。

如果您只想将它​​用于文档目的，我将使用 RELY NOVALIDATE 创建 FK 约束并在之后禁用它 - 否则，Oracle 将检查它是否有未来的 INSERTs / UPDATEs。

但是：**除非您绝对需要，否则不要这样做！**

我同意 Justin Cave：在大多数情况下，您应该只添加“普通”FK 约束——这样，您可以确保现有数据是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:14:33.283

我会尝试创建约束并将违规报告到异常表中。修复数据并启用约束。

创建一些测试数据

```
create table parent (pk integer
                    ,data varchar2(1)
                    ,CONSTRAINT PARENT_PK PRIMARY KEY (PK)  ENABLE );

create table child (pk integer
                    ,pk_parent integer
                    ,data varchar2(1)
                    ,CONSTRAINT CHILD_PK PRIMARY KEY (PK)  ENABLE );

insert into parent values (1,'a');
insert into parent values (2,'b');

insert into child values (1,1,'a');
insert into child values (2,2,'b');
insert into child values (3,3,'c'); 
```

创建外键约束：

```
alter table child add constraint fk_parent foreign key(pk_parent) references parent(pk);

SQL Error: ORA-02298: Kan (ROB.FK_PARENT) niet valideren - bovenliggende sleutels zijn niet gevonden.
02298\. 00000 - "cannot validate (%s.%s) - parent keys not found"
*Cause:    an alter table validating constraint failed because the table has
           child records.
*Action:   Obvious 
```

使用“启用 novalidate”选项创建外键

```
alter table child add constraint fk_parent foreign key(pk_parent) references parent(pk) enable novalidate;
table CHILD altered.

insert into child values (4,4,'c');

SQL Error: ORA-02291: Integriteitsbeperking (ROB.FK_PARENT) is geschonden - bovenliggende sleutel is niet gevonden.
02291\. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key. 
```

不能插入违反 FK 的新数据。

现在让我们修复表中已经存在的违反 FK 约束的数据

创建一个异常表并尝试启用约束：

```
create table exceptions(row_id rowid,
                        owner varchar2(30),
                        table_name varchar2(30),
                        constraint varchar2(30));

ALTER TABLE child ENABLE constraint fk_parent  EXCEPTIONS INTO EXCEPTIONS; 

Error report:
SQL Error: ORA-02298: Kan (ROB.FK_PARENT) niet valideren - bovenliggende sleutels zijn niet gevonden.
02298\. 00000 - "cannot validate (%s.%s) - parent keys not found"
*Cause:    an alter table validating constraint failed because the table has
           child records.
*Action:   Obvious 
```

检查异常表是否有问题：

```
select * from exceptions;

ROW_ID OWNER                          TABLE_NAME                     CONSTRAINT                   
------ ------------------------------ ------------------------------ ------------------------------
AABA78 ROB                            CHILD                          FK_PARENT                      
AAFAAA                                                                                              
Ow9AAC 

select  * from child where rowid = 'AABA78AAFAAAOw9AAC'; 
```

解决问题

```
delete from child where pk = 3;

1 rows deleted.

ALTER TABLE child ENABLE constraint fk_parent  EXCEPTIONS INTO EXCEPTIONS;

table CHILD altered. 
```

启用约束且数据正确

# php - php会话无缘无故“停止”

> ID：12508194
> 
> 赞同：0
> 
> 时间：2012-09-20T07:50:30.487
> 
> 标签：php, session, vbulletin

我有一个 vbulletin 论坛。它位于`www.myDomain.com/Forum` 我有另一个在`www.myDomain.com/OtherSite/app` 我希望我的论坛登录用户被识别到另一个站点。论坛的 cookie 会话路径位于主域路径`/var/www/myDomain` 上 在我的网站上我使用

```
chdir(FORUM_DIR);
include './global.php';
$arr = $vbulletin->userinfo; 
```

获取会话。 **事情是这样的——它有效**。我得到了用户数据等......然后，在加载了几个页面后，它无缘无故地**停止工作。**

在我看来，一个可能的原因是我在页面加载中使用了代码（上面列出的）两次......可能是这样吗？

***编辑：*** 更多代码，直到会话包括，根据要求。

***编辑2 ：*** 感谢@VladTeodorescu我已将所有包含更改为include_once，但仍然存在相同的症状，显示用户数据，然后在使用15分钟后，会话“消失”..（我检查了论坛站点，用户仍然在那里登录）

```
ini_set('display_errors',1); 
error_reporting(E_ALL);
// CONSTS 
//PATHS
define('MAIN_DIR', dirname(dirname(dirname(__DIR__))));
define('APP_NAME', 'GoldSig');
define('CLASS_DIR', MAIN_DIR .'/class');
define('APP_DIR', MAIN_DIR.'/'.APP_NAME.'/app');
define('FORUM_DIR', MAIN_DIR.'/Forum');
define('CHAT_DIR', APP_DIR.'/chat');
//commands and trades tables names
define('T_COMMAND', 'commands');
include_once CLASS_DIR . '/Services/Helper/Files.php';
include_once CLASS_DIR . '/Services/Login/Authorize.php';
if (!Authorize::IsLocalhost()){
    chdir(FORUM_DIR);
    include_once './global.php';
    $arr = $vbulletin->userinfo;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:05:37.573

我试图从中访问我的域，`myDomain.com/GoldSig/app` 并且会话的数据存储在`www.myDomain.com/GoldSig/app`

不过，我会自动重定向到`myDomain.com/GoldSig/app`FF 中。

困难的部分结束了..

# kendo-ui - 将工具提示动态添加到列的剑道网格行

> ID：12508200
> 
> 赞同：5
> 
> 时间：2012-09-20T07:50:57.220
> 
> 标签：kendo-ui, kendo-grid, kendo-tooltip

我有一列显示在行中的一些注释。由于注释很大，我已经缩短了控制器本身的注释并将其发送到我的 aspx 页面。我想要实现的是，我想在鼠标悬停在网格行上（或者如果可能的话正好在单元格上）以工具提示的形式显示完整的注释。有什么办法可以做到这一点？任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T07:04:44.670

发布答案，因为它可能对任何人都有帮助。

这样做后我得到了那个工作......

```
columns.Bound(p => p.partialNotes).Title("Description").HeaderHtmlAttributes(new { style = "text-align:center" }).HtmlAttributes(new { style = "text-align:left" }).Width("8%").HtmlAttributes(new { title =  "#= completeNotes #" }); 
```

我刚刚添加了 *HtmlAttributes(new { title = "#= completeNotes #" })*

所以现在当我将鼠标放在 Description 列 data 上时，我会得到完整的 Notes 作为工具提示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T03:27:59.680

使用 3rd 方小部件也是可能的。我已经在这样的列标题中添加了[qtip](http://craigsworks.com/projects/qtip/)提示![在此处输入图像描述](../Images/eb1df57bb381617b30749bdf024bfd95.png)

KendoUI 网格列数组项

```
{
    field:"property",
    headerTemplate:kendo.template($("#h_Entity_property").html())
}, 
```

标题模板

```
<link rel="stylesheet" type="text/css" href="lib/Craga89-qTip2-bfcc9ef/dist/jquery.qtip.min.css"/>
<link rel="stylesheet" type="text/css" href="lib/Craga89-qTip2-bfcc9ef/util/qtip.util.css"/>
<script type="text/javascript" src="lib/Craga89-qTip2-bfcc9ef/dist/jquery.qtip.min.js"></script>
<script type="text/javascript" src="lib/Craga89-qTip2-bfcc9ef/util/Dialogues.js"></script>
<script type="text/javascript" src="lib/Craga89-qTip2-bfcc9ef/util/Qtip2Util.js"></script>

<script type="text/x-kendo-template" id="h_Entity_property">
    Property
    <img onclick="Qtip.local(this, 'i_Entity_property')" src="img/info.gif"/>
    <div id="i_Entity_property" style="display:none;">
        Elaborate a bit...
    </div>
</script> 
```

工具提示生成器

```
var Qtip = {
    local:function (element, contentId) {
        $(element).qtip($.extend({}, qTipSharedOptions, {
                content:{
                    text:$('#' + contentId).html(),
                    title:{
                        text:' ',
                        button:true
                    }
                }
            }
        ));
    },
    ...
};

var qTipSharedOptions = {
    position:{
        at:'top right', // Position the tooltip above the link
        my:'bottom left',
        viewport:$(window), // Keep the tooltip on-screen at all times
        effect:false // Disable positioning animation
    },
    style:{
        classes:'ui-tooltip-tipsy ui-tooltip-shadow'
    },
    show:{
        ready:true,
        event:false,
        solo:true // Only show one tooltip at a time
    },
    hide:false
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-19T12:20:42.773

你可以这样做：

```
$("#Kendo-grid-div-id").kendoTooltip({
    filter: "td:nth-child(2),td:nth-child(3)", //comma separated multiple columns
    position: "bottom",     //possible values: bottom,top,left,right,center
    content: function(e){
      var content = e.target.html();
      return content;
    }
  }).data("kendoTooltip"); 
```

# bash - 在 bash 脚本中将密码传递给 sftp

> ID：12508206
> 
> 赞同：1
> 
> 时间：2012-09-20T07:51:09.070
> 
> 标签：bash, passwords, sftp

我想自动化一个 bash 脚本，它使用 sftp 连接到服务器并进行文件传输。我有这个密码，最初我尝试过这个

```
sftp $acc@$host << EOF
<passwd_here>
cd $dir
get $file
quit
EOF 
```

但它仍然提示输入密码，我不得不在提示符下手动输入。

搜索 SO 后，我发现[这篇文章](https://stackoverflow.com/questions/5386482/how-to-run-the-sftp-command-with-a-password-from-bash-script)有一个解决方案`expect`，我尝试过，但出现以下错误：

脚本：

```
sftp -b cmdfile.txt $acc@$host
expect "Password:"
send "<passwd>\n";
interact 
```

错误：

```
Permission denied (publickey,keyboard-interactive). 
```

`cmdfile.txt`

```
cd $dir
get $file
quit 
```

请告诉我，如何在 bash 脚本中使用密码进行连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-25T08:34:05.827

请尝试以下步骤

```
lftp -u $user,$pass sftp://$host << --EOF--
cd $directory
put $srcfile
quit
--EOF-- 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-20T07:55:59.850

使用 scp/sftp 您应该使用基于密钥的身份验证。来自您要验证的用户的公钥复制到服务器上的 ~/.ssh/authorized_keys 文件中，复制到您要登录的用户的主目录中。在客户端以明文形式存储密码不是一个好习惯，您知道 :) 这样您也可以“解决”从提示符读取密码的问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-20T08:01:38.650

是的，基于密钥的身份验证是要走的路。[在这里](http://technonstop.com/automatic-login-ssh-sftp-ubuntu)查看一些方向。

# google-apps-script - ScriptDb 和 Google 可视化 API

> ID：12508207
> 
> 赞同：0
> 
> 时间：2012-09-20T07:51:10.357
> 
> 标签：google-apps-script

我有一个网络应用程序，数据是从嵌入在 Google 站点中的 Ui 提交并保存在电子表格中的。我正在考虑改用 scriptDB，但我不确定动态查询和显示数据。上次我检查无法从脚本中刷新站点页面，因此作为一种解决方法，我使用 javascript 编写了一个 .html 页面，该页面通过密钥访问电子表格并使用 Visualization DataTables 快速生成格式化查询。如果可能的话，我想保留这个功能。有人可以提出一些可能的建议吗？

问候，

肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:55:39.880

今天可以通过 UiApp 实现这一点（请参阅[Charts](https://developers.google.com/apps-script/service_charts) api，并注意您可以将图表添加到 UiApp）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T01:24:55.570

自动刷新：您可以使用 CheckBox.setValue(value, fireEvents) - 但您可能会遇到配额问题（附近有一个示例）。如果您遇到配额问题，那么我怀疑 HTML 服务是您的最佳选择。它还可以为您提供更好的控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T09:54:35.847

[这](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2241)是一个请求扩展图表服务与 Gviz 集成的开放项目。

虽然目前集成有限，但需要将其扩展为对表中的变量进行分组，以方便基本的计数和求和操作。

我建议您为该问题“加注星标”以投票支持它并获得新进展的通知。

# java - 菜单链接如何在 joomla 中工作以及它是如何构建在页面上的？

> ID：12508212
> 
> 赞同：1
> 
> 时间：2012-09-20T07:51:31.693
> 
> 标签：java, hibernate, jpa, joomla, menu

我正在寻找一种在 JPA 2/hibernate 实现解决方案中处理菜单树的方法，偶然发现了这个[链接](http://docs.joomla.org/Tables/menu)，它清楚地概述了 joomla 菜单的后端结构，我想以此为基础。只是有些部分我不太了解。桌子上有`level`和`ordering`，我想知道它们之间的区别。

想到的是，这`level`听起来像菜单的层次结构，`root menus for level 1`例如，`submenu for level 2`和`sub-submemu for level 3`和排序显示相同级别菜单的顺序。

我也想知道`lft`and`rgt`是如何在理想情况下使用的，不是概念性的解释，而是一种实际的解释（如果可能的话）。

最后，如果我在哪里使用 JPA 来适应这个表结构，那么常见的陷阱和最佳实践是什么。据了解，在发现`joomla`架构之前，我对此[链接](http://www.tikalk.com/java/load-a-tree-with-jpa-and-hibernate)中显示的示例感兴趣。

感谢您阅读本文。

# spring - 具有多个数据源的多个 servlet 上下文中的事务传播

> ID：12508220
> 
> 赞同：1
> 
> 时间：2012-09-20T07:51:54.283
> 
> 标签：spring, transactions, rmi, propagation

我们已经在集群架构中模块化了我们的应用程序，例如使用休眠和打包在多个战争文件中的具有不同数据源的多个 servlet 上下文。例如：moldule1->hibernate sessionfactory ->datasource 1(module1.war)，moldule2->hibernate sessionfactory ->datasource 2(module2.war)....

Spring RMI 用于集成 module1 和 module2 服务。

这里我的问题是，如何在这些模块之间传播事务，以便当模块 2 插入失败时，模块 1 应该回滚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T22:01:11.887

[根据Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/remoting.html)，您不能不使用 EJB ：

> Spring 对 RMI 的支持，您可以通过 RMI 基础架构透明地公开您的服务。完成此设置后，您基本上拥有类似于远程 EJB 的配置，除了**没有对安全上下文传播或远程事务传播的标准支持**这一事实。

...和：

> 最后但同样重要的是，**EJB 优于 RMI，因为它支持标准的基于角色的身份验证和授权以及远程事务传播**。

# php - 从 db 输出内容生成双换行符

> ID：12508221
> 
> 赞同：0
> 
> 时间：2012-09-20T07:51:56.300
> 
> 标签：php, mysql

我有一个排序为 latin1_swedish_ci 的 MySQL 数据库。

该字段在 DB 中如下所示：

![在此处输入图像描述](../Images/053fbc6a350e80a2583a1432552007a4.png)

输出时我这样做：

```
echo str_replace("<br />", "\n", trim($post->getContent())); 
```

$post->getContent() 只是从数据库中获取字段，而不是从数据库中手动进行回显。

问题是当我更新字段时，我得到双换行符（只是更新而不添加换行符）。

我怎么会得到这个，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T07:53:13.250

完全删除`<br />`，您已经有一个`\n`数据库，当您替换为 2 新`<br />`行时`\n`：

```
echo str_replace("<br />", "", trim($post->getContent())); 
```

# javascript - 我们如何在不重新加载页面的情况下使用 javascript/jQuery 更新 URL 或查询字符串？

> ID：12508225
> 
> 赞同：77
> 
> 时间：2012-09-20T07:52:21.743
> 
> 标签：javascript, jquery

有没有办法在不重新加载页面的情况下以编程方式更新 URL？

编辑：我在帖子的标题中添加了一些内容。我只是想明确表示我不想重新加载页面

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-10-09T17:56:18.673

是和不是。所有常见的网络浏览器都有防止这种情况的安全措施。目标是防止人们创建网站副本，更改 URL 以使其看起来正确，然后能够欺骗人们并获取他们的信息。

然而，一些 HTML5 兼容的网络浏览器已经实现了一个历史 API，可以用于类似你想要的东西：

```
if (history.pushState) {
    var newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?myNewUrlQuery=1';
    window.history.pushState({path:newurl},'',newurl);
} 
```

我测试了，效果很好。它不会重新加载页面，但它只允许您更改 URL 查询。您将无法更改协议或主机值。

了解更多信息：

[http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

[https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-09-20T07:53:31.923

是的 -`document.location = "http://my.new.url.com"`

您也可以以相同的方式检索它，例如。

```
var myURL = document.location;
document.location = myURL + "?a=parameter"; 
```

位置对象也有许多有用的属性：

```
hash            Returns the anchor portion of a URL
host            Returns the hostname and port of a URL
hostname        Returns the hostname of a URL
href            Returns the entire URL
pathname        Returns the path name of a URL
port            Returns the port number the server uses for a URL
protocol        Returns the protocol of a URL
search          Returns the query portion of a URL 
```

**编辑：** 设置 document.location 的哈希值不应重新加载页面，只需更改页面上焦点所在的位置。所以更新到`#myId`将滚动到带有`id="myId"`. 如果`id`不存在，我相信什么都不会发生？（需要在各种浏览器上确认）

**EDIT2：**为了清楚起见，不仅仅是在评论中：您不能在不更改页面的情况下使用 javascript 更新整个 URL，这是一个安全限制。否则，您可以单击指向随机页面的链接，该页面看起来像 gmail，然后立即将 URL 更改为 www.gmail.com 并窃取人们的登录详细信息。
您可以在某些浏览器上更改域之后的部分以应对 AJAX 样式的事情，但这已经被 Osiris 链接到。更重要的是，即使可以，您也可能不应该这样做。URL 告诉用户他/她在您的网站上的位置。如果您在不更改页面内容的情况下更改它，它会变得有点混乱。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-26T19:17:13.447

您可以使用 ：

```
window.history.pushState('obj', 'newtitle', newUrlWithQueryString) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-26T13:48:53.860

利用

> window.history.replaceState({}, document.title, updatedUri);

**在不重新加载**页面的情况下更新 URL

```
 var url = window.location.href;
 var urlParts = url.split('?');
 if (urlParts.length > 0) {
     var baseUrl = urlParts[0];
     var queryString = urlParts[1];

     //update queryString in here...I have added a new string at the end in this example
     var updatedQueryString = queryString + 'this_is_the_new_url' 

     var updatedUri = baseUrl + '?' + updatedQueryString;
     window.history.replaceState({}, document.title, updatedUri);
 } 
```

删除查询字符串**而不重新加载**页面

```
var url = window.location.href;
if (url.indexOf("?") > 0) {
     var updatedUri = url.substring(0, url.indexOf("?"));
     window.history.replaceState({}, document.title, updatedUri);
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-04T00:22:31.543

定义一个新的 URL 对象，为其分配当前 url，将参数附加到该 URL 对象，最后将其推送到浏览器状态。

```
var url = new URL(window.location.href);
//var url = new URL(window.location.origin + window.location.pathname) <- flush existing parameters
url.searchParams.append("order", orderId);
window.history.pushState(null, null, url); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-20T07:58:17.153

是的

document.location 是正常的方式。

然而 document.location 实际上与 window.location 相同，除了 window.location 在较旧的浏览器中得到更多支持，因此可能是更受欢迎的选择。

在 SO 上查看此线程以获取更多信息：

[JavaScript 中的 window.location 和 document.location 有什么区别？](https://stackoverflow.com/questions/2430936/whats-the-difference-between-window-location-and-document-location-in-javascrip)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-27T16:41:19.610

使用主题标签为 URL 更改添加前缀以避免重定向。

这重定向

```
location.href += '&test='true'; 
```

这不会重定向

```
location.href += '#&test='true'; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-20T07:59:04.167

你需要更具体。“更新网址”是什么意思？这可能意味着自动导航到不同的页面，这当然是可能的。

如果您只想更新地址栏的内容而不重新加载页面，请参阅[修改 URL 而不重新加载页面](https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-20T07:56:35.983

纯 javascript: document.location = 'http://www.google.com';

不过，这将导致浏览器刷新 - 如果您需要更新 URL 以实现某种浏览历史记录而不重新加载页面，请考虑使用哈希。如果是这种情况，您可能需要查看 jQuery.hashchange。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-09-20T07:55:00.610

是 -`document.location.hash`用于查询

# python - Python 错误 _posixsubprocess 模块没有被使用

> ID：12508243
> 
> 赞同：7
> 
> 时间：2012-09-20T07:53:38.553
> 
> 标签：python, multithreading

嗨，我通过 python 包装器运行带有线程的子进程，当我使用子进程模块时，我收到以下警告。

“_posixsubprocess 模块没有被使用，如果你的程序使用线程，子进程的可靠性可能会受到影响。”

这意味着什么？我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:56:24.860

检查您是否可以`import _posixsubprocess`手动，子进程尝试在其代码中导入它，如果它产生异常，则会产生此警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-17T20:23:21.387

取消设置 PYTHONHOME 已经为我解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-06T10:31:17.370

我在使用 conda 安装的工具时遇到了同样的问题。原来有一种来自 pip 的 subprocess32 的冲突版本。运行这个就可以了：

```
pip uninstall subprocess32
conda install -c conda-forge subprocess32 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-16T19:24:41.580

我的解决方案是执行以下操作：

```
pip uninstall subprocess32
pip install -U subprocess32 
```

最初，当我尝试导入时收到警告`matplotlib`：

```
Python 2.7.13 (default, May 16 2017, 12:02:12) 
[GCC 6.2.0 20160901] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import matplotlib
/home/methuselah/.local/lib/python2.7/site-packages/subprocess32.py:472: RuntimeWarning: The _posixsubprocess module is not being used. Child process reliability may suffer if your program uses threads.
  "program uses threads.", RuntimeWarning)
>>> 
```

重新安装后`subprocess32`，警告消失：

```
Python 2.7.13 (default, May 16 2017, 12:02:12) 
[GCC 6.2.0 20160901] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import matplotlib
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-03T05:33:36.860

如果您使用的 Python 版本不止一个，则可能是这样。您需要为每个程序指定正确的 python 版本。例如，我需要用于 miniconda 的 python 3.7，但 mendeleydesktop 声称此版本存在问题：

_posixsubproces 及其位置也有问题

所以我没有只在 phyton 环境中运行程序，而是使用 python2.7，它解决了这个问题。希望能帮助到你。干杯，弗洛尔

# c# - 比较输入值的 ASCII 以检查它是字符还是数字

> ID：12508245
> 
> 赞同：0
> 
> 时间：2012-09-20T07:53:46.563
> 
> 标签：c#, winforms, keypress, datagridviewtextboxcell

我需要检查用户是否在**DataGridViewTextBoxCell中****输入了字符或数字**。如何根据**DataGridView 的 KeyPress 事件中**输入键**的 ASCII 值进行比较**。有什么建议吗？

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:57:16.923

类型中有静态函数`char`：

```
var isAlpha = char.IsLetter('a');

var isDigit = char.IsNumber('1'); 
```

实际的字符按下在[KeyPressEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.forms.keypresseventargs.keychar.aspx)`KeyChar`的属性中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:01:25.093

看看 char 结构中可用的方法[http://msdn.microsoft.com/en-us/library/system.char.aspx](http://msdn.microsoft.com/en-us/library/system.char.aspx)

如果您需要在多个地方执行此操作，另一种选择是构建一个从 DataGridViewTextBoxCell 继承的自定义控件。******

# c# - 使用 C# 在实体模型中使用 LINQ 将表的列名保存在数组中

> ID：12508250
> 
> 赞同：0
> 
> 时间：2012-09-20T07:53:54.157
> 
> 标签：c#, linq, entity-framework

我是一周前刚开始接触 C# 的新手......现在搜索了 2 天，但没有找到任何有用的帮助。我制作了一个包含 3 个表的数据模型。我正在尝试获取数组中特定表中列的名称。

我更喜欢这样的东西：

```
MISSEntities ms= New MISSEntities();

var List= from m in ms.TableName
          select m.Column names; 
```

我想要像列表这样的结果有列的名称，例如。姓名、地址、电话号码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:44:38.653

您可以检查通过 EF 创建的模型类中的字段以表示数据库表。

```
var fieldNameList = typeof(YourTableName).GetFields().Select(f=> f.Name); 
```

映射到数据库表的类中的字段应该与数据库表中的列相同。创建的类应与数据库表名同名。

# javascript - jQuery - 提交事件是否保存提交表单的查询字符串或数据？

> ID：12508254
> 
> 赞同：1
> 
> 时间：2012-09-20T07:54:13.880
> 
> 标签：javascript, jquery

我有这个代码

```
$("#dummy_div").on('submit', "form", function(event){
    console.log(event);
    event.preventDefault();
}); 
```

事件对象是否包含保存提交表单的查询字符串或数据？如果没有，有没有办法让他们不用遍历表单字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:58:05.273

不，事件不存储查询字符串，但您可以通过`serialize()`应用于表单的 jQuery 方法获取所有字段值，以获得类似查询字符串的值

请参阅[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)以获取更多参考

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:58:10.633

获取表单的查询字符串非常简单，只需使用[.serialize()](http://api.jquery.com/serialize/)。[.serializeArray()](http://api.jquery.com/serializeArray/)也可能有帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T08:08:19.837

您可以使用[序列化](http://api.jquery.com/serialize/)

```
$("#dummy_div").on('submit', "form", function(event){
    event.preventDefault();
    var form = $(this);

    $.ajax({
       url: form.attr('action'),
       type: form.attr('method'),
       data: form.serialize(),
       success: function(r) { }
    });
}); 
```

# java - 如何在我的 Windows 中加载 eclipse sdk

> ID：12508255
> 
> 赞同：0
> 
> 时间：2012-09-20T07:54:26.063
> 
> 标签：java, eclipse

我在我的 Windows PC 中加载 eclipse sdk 时遇到问题。当我运行 eclipse.exe 时，屏幕上出现一条消息：发生错误。查看日志文件\Eclipse-SDK-4.2-win32\eclipse\configuratio\1348127323251.log

我的操作系统 - 32 位、Windows 7、Java 7、Eclipse SDK 4.2-win32 (Juno) 也是 32 位的。

所以请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:01:47.457

右键单击 Eclipse 快捷方式并转到属性，在快捷方式选项卡中，您可以更改目标：框中的内容以指定 jdk 路径

```
"C:\Program Files\eclipse-jee-galileo-sr1 (3.5.1)\eclipse.exe" -vm "C:\Program Files\Java\jdk1.6.0_16\bin\javaw.exe" 
```

![在此处输入图像描述](../Images/0201d4f5a2d7854e5c260614b8ce17c7.png)

参考

[http://www.matsim.org/node/372](http://www.matsim.org/node/372)

# javascript - Go 不能处理基准测试（当 Python 和 Node.js 可以）？

> ID：12508256
> 
> 赞同：0
> 
> 时间：2012-09-20T02:00:58.787
> 
> 标签：javascript, webserver, python

我正在尝试对 Go、Node.js 和 Python-Flask（使用 Tornado）进行基准测试。

我一直在为每台服务器运行以下内容（每台服务器多次）：

```
ab -c 500 -n 100000 http://127.0.0.1:5000 
```

Node 和 Python 处理负载很好，但 Go 抱怨：

```
apr_socket_recv: Connection reset by peer (104) 
```

这是我的 Node.js 代码：

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(5000, '127.0.0.1');
console.log('Server running at http://127.0.0.1:5000/'); 
```

这是我的 Python 代码：

```
import flask
from tornado.wsgi import WSGIContainer
from tornado.httpserver import HTTPServer
from tornado.ioloop import IOLoop

app = flask.Flask(__name__)

@app.route("/")
def index():
    return "Hello, world."

http_server = HTTPServer(WSGIContainer(app))
http_server.listen(5000)
IOLoop.instance().start() 
```

这是我的 Go 服务器：

```
package main

import (
   "fmt"
   "net/http"
)

func serve(w http.ResponseWriter, r *http.Request) {
   fmt.Fprintln(w, "Hello, world.")
}

func main() {
   http.HandleFunc("/", serve)
   http.ListenAndServe(":5000", nil) 
} 
```

**我的 Go 源代码是否正确/最优？**我想给 Go 一个比“DNF”更好的分数……Go 在压力下怎么比 Python 更不可靠？在服务器关闭之前，我只能完成 77% 的请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:23:39.257

您应该使用 r.Body.Close() 关闭请求正文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T03:03:48.763

代码可能会用完文件描述符，要么是因为它们在 Go 的 gc 获取打开的文件之前已经用尽，要么是因为它们在默认情况下保持打开状态。

将 /etc/security/limits.conf 中的 fd 计数提高到 1024 或操作系统上的任何默认值。或者，如果这不是一个选项，则修改 Go http 服务器代码，以便在处理请求后关闭每个 Web 连接。

# android - 如何为 AttributeSet 正确编写 XML？

> ID：12508260
> 
> 赞同：2
> 
> 时间：2012-09-20T07:54:37.210
> 
> 标签：android, xmlpullparser

我想在运行时[为 Android 平台的 Misc 小部件创建一个面板。](http://code.google.com/p/android-misc-widgets/)

```
 XmlPullParser parser = getResources().getXml(R.xml.panel_attribute);
 AttributeSet attributes = Xml.asAttributeSet(parser);
 Panel panel = (Panel) new Panel(getActivity(),attributes); 
```

panel_attribute.xml 应该是什么？

面板应如下所示

```
<org.miscwidgets.widget.Panel
    xmlns:panel="http://schemas.android.com/apk/res/org.miscwidgets"
    android:id="@+id/topPanel"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="4dip"
    panel:animationDuration="1000"
    panel:closedHandle="@drawable/sliding_drawer_handle_minimized"
    panel:content="@+id/searchparams_layout"
    panel:handle="@+id/handle"
    panel:linearFlying="true"
    panel:openedHandle="@drawable/sliding_drawer_handle_minimized"
    panel:position="top" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:54:28.670

首先，您必须在 xml 文件夹（资源文件夹的子文件夹）内的单个文件 .xml 中定义 xml 属性，就像在布局文件中一样。

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:contentDescription="@string/no_descr"
    android:src="@drawable/dummy"/> 
```

其次检索属性集并不像两行代码那么简单。您需要以下用 Scala 编写的函数。对不起，我是一个 Scala 人，但如果你被 java 困住了，那么你可以轻松地转换它！

```
def getAttributeSetFromXml(xmlId: Int, tagName: String, resources: Resources): AttributeSet = {
/**
 * The good thing for being an internal function is that we don't need to pass tagName as a ref
 */
def getAttributeSet(xmlPullParser: XmlPullParser /*, tagName: String*/): AttributeSet = {
  val state = xmlPullParser.next();
  if (state == XmlPullParser.START_TAG &&
    (xmlPullParser.getName contains tagName)) {
    Xml.asAttributeSet(xmlPullParser);
  }
  else {
    if (state == XmlPullParser.END_DOCUMENT) null;
    else getAttributeSet(xmlPullParser /*, tagName*/);
  }
}

getAttributeSet(resources.getXml(xmlId) /*, tagName*/);
} 
```

# c# - 从 XML 标签获取内文？

> ID：12508262
> 
> 赞同：1
> 
> 时间：2012-09-20T07:54:43.077
> 
> 标签：c#, xml

我正在尝试使用 XML 标记的内部文本或值填充数组。我可以遍历标签的节点，我只是在提取存储值时遇到问题。

我正在循环问题底部的属性标记的子节点 XML。

```
 XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load("C://Users//Shaun//Documents//Visual Studio 2010//Projects//LightStoneTestService//LightStoneTestService//FileTest//Testdo.xml");

//XmlNodeList dataNodes = xmlDoc.SelectNodes("//Properties");
XmlNodeList oXMlNodeList = xmlDoc.GetElementsByTagName("Properties");

for (int Count = 0; Count < 27; Count++)
{
    foreach (XmlNode node in oXMlNodeList)
    {                    
        int Max = node.ChildNodes.Count;                   
        foreach (XmlNode childNode in node.ChildNodes) //For each child node in FieldData
        {                          
              if (ArrayProperties[Count].LightStoneTag == childNode.Name)
            {
              ArrayProperties[Count].Value = node.SelectSingleNode(ArrayProperties[Count].LightStoneTag).InnerText;    
            }                                                     
        }
    }
} 
```

****** *** ****我的 Xml 文件如下所示：**

 **```
<NewDataSet>
  <RequestData xmlns="RequestData">
    <Req_ID>3204eba5-07f4-4e83-8b46-d89fa1d70bf6</Req_ID>
  </RequestData>
  <Properties xmlns="Properties">
    <sr_id>19374324</sr_id>
    <prop_id>9841107</prop_id>
    <DEED_ID>21</DEED_ID>
    <PROPTYPE_ID>2</PROPTYPE_ID>
    <SS_ID>2315</SS_ID>
    <NAD_ID>3048001</NAD_ID>
    <property_type>SS</property_type>
    <PROVINCE>GA</PROVINCE>
    <MUNICNAME>CITY OF JOHANNESBURG</MUNICNAME>
    <DEEDTOWN>ALLENS NEK</DEEDTOWN>
    <SECTIONAL_TITLE>SS GREENHILLS</SECTIONAL_TITLE>
    <UNIT>15</UNIT>
    <TownShip>ALLENS NEK</TownShip>
    <Purchase_Price>236500</Purchase_Price>
    <Purchase_Date>20031020</Purchase_Date>
    <Bond_Number>SB37369/2006</Bond_Number>
    <Township_alt>ALLEN'S NEK EXT 32</Township_alt>
    <RE>false</RE>
  </Properties>
</NewDataSet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:17:33.383

这是命名空间问题。`for`在循环之前添加这部分代码：

```
 NameTable nt = new NameTable();
        nt.Add("Properties");
        XmlNamespaceManager nsmgr = new XmlNamespaceManager(nt);
        nsmgr.AddNamespace("ns1", "Properties"); 
```

将检索到的行更改`InnerText`为：

```
 ArrayProperties[Count].Value = node
            .SelectSingleNode(
                String.Concat("//ns1:", ArrayProperties[Count].LightStoneTag), 
                nsmgr)
            .InnerText; 
```**

# java - 关于 NullPointer 访问的 Eclipse 警告 - Android

> ID：12508265
> 
> 赞同：0
> 
> 时间：2012-09-20T07:54:52.497
> 
> 标签：java, android, nullpointerexception

我正在尝试检索 Mifare Classic 1k 卡的 UID，为此我使用以下代码：

```
 private String getUID(){
    MifareClassic mfc = MifareClassic.get((Tag) intent.getParcelableExtra(NfcAdapter.EXTRA_TAG));
    byte[] data;
    byte[] sevenDigits = null;
    String uid;

    try{
        mfc.connect();
        boolean auth = false;
        auth = mfc.authenticateSectorWithKeyA(0, MifareClassic.KEY_DEFAULT);

        if(auth){
            data = mfc.readBlock(mfc.sectorToBlock(0));

            for (int i =0; i < 8; i++){
                sevenDigits[i] = data[i];
            }

            return getHexString(sevenDigits);
        } else {
            return "Authenticatie mislukt";
        }

    } catch (IOException e) {
        return null;
    }
} 
```

Eclipse 不断给我关于这条线的警告

```
 for (int i = 0; i < 8; i++) {
    sevenDigits[i] = data[i];
 } 
```

，说那时它只能为空......我的问题是：我如何重写这段代码以使这个警告消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:56:38.737

```
sevenDigits 
```

被定义为空且未修改。你可能需要打电话

```
sevenDigits = new byte[data.length]; 
```

循环之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:57:14.767

您将 SevenDigits[] 声明为 null 您必须在使用它之前按其大小对其进行初始化

```
sevenDigits[] = new byte[size]; 
```

不要在迭代器中使用静态值作为长度使用要在该 for 循环中使用的数组长度

```
data = mfc.readBlock(mfc.sectorToBlock(0));

sevenDigits[] = new byte[data.length];

        for (int i =0; i < data.length; i++){
            sevenDigits[i] = data[i];
        } 
```

# testing - 将 2 个数据集与 dbunit 进行比较？

> ID：12508270
> 
> 赞同：1
> 
> 时间：2012-09-20T07:55:02.797
> 
> 标签：testing, junit, dataset, compare, dbunit

目前我需要为我的应用程序创建测试。我使用“dbunit”来实现这一点，现在需要比较 2 个数据集：

1）我使用 QueryDataSet 获得的数据库中的记录
2）预期的结果写在一个文件中的适当 FlatXML 中，我也将其作为数据集读入

基本上可以通过这种方式比较 2 个数据集。

现在问题是带有时间戳的列。它们永远不会与预期的数据集结合在一起。在比较它们时，我真的很想忽略它们，但它并没有按照我想要的方式工作。

当我通过添加列过滤器和 ignoreColumns 比较每个表时，它确实有效。但是，这种方法非常繁琐，因为在比较中使用了很多表，并且迫使一个人添加了很多代码，最终变得臃肿。这同样适用于具有空值的字段

一个可能的解决方案也是，如果我有机会只比较所有表的第一列 - 而不是用它的列名来命名它，而只是用它的列索引来命名。但是我什么也找不到。

也许我遗漏了一些东西，或者除了比较每个表本身之外，它没有任何其他作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:57:42.267

为了完成，必须发布一些附加信息。实际上，我之前发布的解决方案根本不起作用，因为从数据库读取数据的过程让我陷入了困境。

使用“QueryDataset”的过程确实从数据库中读取了数据并将其保存为数据集，但是无法再从该数据集中访问数据（尽管我可以在调试模式下看到数据）！相反，整个操作**在 org.dbunit.database.ForwardOnlyResultSetTable.getRowCount(ForwardOnlyResultSetTable.java:73) 处以 UnsupportedOperationException失败**

产生失败的示例代码：

```
QueryDataSet qds = new QueryDataSet(connection);
qds.addTable(“specificTable”);
qds.getTable(„specificTable“).getRowCount(); 
```

即使您以这种方式尝试它也会失败：

```
IDataSet tmpDataset = connection.createDataSet(tablenames);
tmpDataset.getTable("specificTable").getRowCount(); 
```

为了使提取工作，您需要添加这一行（第二行）：
**IDataSet tmpDataset = connection.createDataSet(tablenames);
IDataSet actualDataset = new CachedDataSet(tmpDataset);**

太好了，这在任何地方都没有记录...

但这还不是全部：现在您肯定会认为在执行“QueryDataSet”之后也可以添加这一行......但不是！这还是不行！它仍然会抛出相同的异常！这对我来说没有任何意义，我浪费了很多时间......

应该注意的是，从从 xml 文件中读取的数据集中提取数据确实没有任何问题。这种烦恼只是在尝试直接从数据库中获取数据集时发生。

如果您已完成上述操作，则可以继续如下操作，仅比较您在预期 xml 文件中获得的列：

```
 // put in here some code to read in the dataset from the xml file...
    // and name it "expectedDataset"
    // then get the tablenames from it...
    String[] tablenames = expectedDataset.getTableNames();

    // read dataset from database table using the same tables as from the xml
    IDataSet tmpDataset = connection.createDataSet(tablenames);
    IDataSet actualDataset = new CachedDataSet(tmpDataset);

    for(int i=0;i<tablenames.length;i++)
    {
        ITable expectedTable = expectedDataset.getTable(tablenames[i]);
        ITable actualTable = actualDataset.getTable(tablenames[i]);         
        ITable filteredActualTable = DefaultColumnFilter.includedColumnsTable(actualTable, expectedTable.getTableMetaData().getColumns());
        Assertion.assertEquals(expectedTable,filteredActualTable);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T13:15:31.617

您也可以使用这种格式：

```
// Assert actual database table match expected table
String[] columnsToIgnore = {"CONTACT_TITLE","POSTAL_CODE"}; 
Assertion.assertEqualsIgnoreCols(expectedTable, actualTable, columnsToIgnore); 
```

# jquery - 超出本地存储限制时，amplify.store 是否返回错误或捕获异常？

> ID：12508274
> 
> 赞同：5
> 
> 时间：2012-09-20T07:55:24.637
> 
> 标签：jquery, amplifyjs

有没有办法在这样的调用后检查本地存储限制是否超出：

```
amplify.store("key", object); 
```

如果我尝试存储大于本地存储限制的内容会怎样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T10:47:52.613

是的，它会抛出“amplify.store quota exceeded”，如您在此处看到的

```
store.error = function() {
    return "amplify.store quota exceeded"; 
}; 
```

...

```
try {
                    storage.setItem( key, parsed );
                // quota exceeded
                } catch( error ) {
                    // expire old data and try again
                    store[ storageType ]();
                    try {
                        storage.setItem( key, parsed );
                    } catch( error ) {
                        throw store.error();
                    }
                } 
```

# meteor - Meteor.http.call 给出的 Access-Control-Allow-Origin 不允许

> ID：12508275
> 
> 赞同：9
> 
> 时间：2012-09-20T07:55:28.230
> 
> 标签：meteor

当我尝试使用该方法在 Meteor 中为 JSON 查询调用外部服务器时，`Meteor.http.call("GET")`我收到错误消息“Access-Control-Allow-Origin 不允许”。

如何允许我的流星应用程序对其他服务器进行 HTTP 调用？现在我在本地主机上运行它。

我运行的代码是这样的：

```
Meteor.http.call("GET", 
                 "http://api.vasttrafik.se/bin/rest.exe/v1/location.name?authKey=XXXX&format=json&jsonpCallback=processJSON&input=kungsportsplatsen", 
                  function(error, result) {
                          console.log("test");    
                      }
                 ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:40:29.670

StackOverflow 上还有其他类似的问题。

当您从客户端 (AJAX) 执行此操作时，您会受到您尝试连接的服务器的限制。

解决此问题的一种方法是，如果您有权访问外部服务器，则可以通过以下方式修改头文件以允许部分或全部来源：

```
Access-Control-Allow-Origin: * 
```

但是，如果将调用放在服务器端并且不提供回调函数，则调用将同步进行，因此不会使用 AJAX，它应该会成功。

这里是

```
Meteor.methods({checkTwitter: function (userId) {
   this.unblock();
   var result = Meteor.http.call("GET", "http://api.twitter.com/xyz", {params: {user: userId}});
   if (result.statusCode === 200) return true
   return false;
}}); 
```

# android - android中actionbarsherlock中自定义标题栏的问题

> ID：12508277
> 
> 赞同：0
> 
> 时间：2012-09-20T07:55:38.477
> 
> 标签：android, android-actionbar, actionbarsherlock

我已使用 actionbarsherlock 在我的应用程序中创建拆分操作栏。当我想将标题栏更改为我的自定义标题栏时，我收到以下异常

```
 09-20 17:29:14.893: E/AndroidRuntime(332): FATAL EXCEPTION: main
09-20 17:29:14.893: E/AndroidRuntime(332): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.androidhive.xmlparsing/com.androidhive.xmlparsing.Listofcategories}: android.util.AndroidRuntimeException: You cannot combine custom titles with other title features
09-20 17:29:14.893: E/AndroidRuntime(332):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
09-20 17:29:14.893: E/AndroidRuntime(332):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-20 17:29:14.893: E/AndroidRuntime(332):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-20 17:29:14.893: E/AndroidRuntime(332):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-20 17:29:14.893: E/AndroidRuntime(332):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-20 17:29:14.893: E/AndroidRuntime(332):  at android.os.Looper.loop(Looper.java:123)
09-20 17:29:14.893: E/AndroidRuntime(332):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-20 17:29:14.893: E/AndroidRuntime(332):  at java.lang.reflect.Method.invokeNative(Native Method)
09-20 17:29:14.893: E/AndroidRuntime(332):  at java.lang.reflect.Method.invoke(Method.java:507)
09-20 17:29:14.893: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-20 17:29:14.893: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-20 17:29:14.893: E/AndroidRuntime(332):  at dalvik.system.NativeStart.main(Native Method)
09-20 17:29:14.893: E/AndroidRuntime(332): Caused by: android.util.AndroidRuntimeException: You cannot combine custom titles with other title features
09-20 17:29:14.893: E/AndroidRuntime(332):  at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:192)
09-20 17:29:14.893: E/AndroidRuntime(332):  at com.android.internal.policy.impl.PhoneWindow.generateLayout(PhoneWindow.java:2110)
09-20 17:29:14.893: E/AndroidRuntime(332):  at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:2261)
09-20 17:29:14.893: E/AndroidRuntime(332):  at com.android.internal.policy.impl.PhoneWindow.getDecorView(PhoneWindow.java:1427)
09-20 17:29:14.893: E/AndroidRuntime(332):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(ActionBarSherlockCompat.java:902)
09-20 17:29:14.893: E/AndroidRuntime(332):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
09-20 17:29:14.893: E/AndroidRuntime(332):  at com.actionbarsherlock.app.SherlockActivity.setContentView(SherlockActivity.java:218)
09-20 17:29:14.893: E/AndroidRuntime(332):  at com.androidhive.xmlparsing.Listofcategories.onCreate(Listofcategories.java:106)
09-20 17:29:14.893: E/AndroidRuntime(332):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-20 17:29:14.893: E/AndroidRuntime(332):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
09-20 17:29:14.893: E/AndroidRuntime(332):  ... 11 more 
```

我的代码片段是

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.maincategories);
    actionbar=getSupportActionBar();
     getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:04:34.453

要使用 actionbar sherlock 放置自定义标题栏，您需要执行以下操作：

```
View actionbar = LayoutInflater.from(this).inflate(R.layout.actionbar, null);
getSupportActionBar().setCustomView(actionbar);
getSupportActionBar().setDisplayShowCustomEnabled(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:05:11.317

`Theme.Sherlock`继承自`Sherlock.__Theme`，而后者又继承自`android:Theme.NoTitleBar`。

```
 <style name="Theme.NoTitleBar">
     <item name="android:windowNoTitle">true</item>
 </style> 
```

这与`requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);`

# jquery - 如何使用 j 查询查找 tr 中的所有控件（对于特定的 css 类）

> ID：12508292
> 
> 赞同：0
> 
> 时间：2012-09-20T07:56:40.420
> 
> 标签：jquery, asp.net

我有多个具有相同类名的标签。然后我有一个函数，它遍历具有此类名称的所有标签并隐藏/显示这些。

问题：我在这个标签中有多个控件，如果它被隐藏，我想重置所有这些控件。但我可以在 this 中找到所有控件的集合。

帮助...！！！！

示例代码：

```
function toggleRows(rowClass, value, max) { 
        $("." + rowClass).each( 
        // For each element which a class of rowClass, run this code. 
        function () { 
            var rowNumber = parseInt($(this).attr("rowNumber")); 

            //If the specified value is >= the row number, then show the row, else hide it. 
            if (value >= rowNumber) { 
                $(this).show(); 
            } 
            else { 
                $(this).hide(); 
                var frm = $(this).children(); 
                for (i = 0; i < frm.elements.length; i++) {   
                 if (frm.elements[i].type == "checkbox") { 
                        frm.elements[i].checked = false; 
                    } 
                    if (frm.elements[i].type == "radio") { 
                        frm.elements[i].checked = false; 
                    } 
                    if (frm.elements[i].type == "text") { 
                        frm.elements[i].value = ""; 
                    } 
                    if (frm.elements[i].type == "select") { 
                        frm.elements[i].value = 0; 
                    } 
                } 
            } 
        }); 

    <tr id="id1" runat="server" class="rowClass"  rownumber="1"> 
 <td> 
    <table width="100%"> 
       <tr> 
           <td runat="server" enableviewstate="False" id="td1" class="numberColumn"> 
                &nbsp; 
            </td> 

           <td class="numberColumnNoBold"> 
                &nbsp; 
             </td> 
          <td> 
              test1 
          </td> 
          <td align="right"> 
             $ 
          <asp:TextBox ID="textbox1" runat="server" CssClass="textthinnumeric" /> 

              </td> 
                     </tr> 
           <tr> 
       <td runat="server" enableviewstate="False" id="tdS1" class="numberColumn"> 
                &nbsp; 
          </td> 
       <td class="numberColumnNoBold"> 
               &nbsp; 
       </td> 
       <td> 
             test2 
       </td> 
      <td align="right"> 
               <asp:RadioButtonList ID="rbl1" runat="server" RepeatDirection="Horizontal"> 
                <asp:ListItem Value="Yes" Text="Yes" /> 
                <asp:ListItem Value="No" Text="No" />    </asp:RadioButtonList>                                                                                           </td> 
      </tr> 
       <tr> 
           <td runat="server" enableviewstate="False" id="tdS21" class="numberColumn"> 
                 &nbsp; 
            </td> 
           <td class="numberColumnNoBold"> 
                   &nbsp; 
            </td> 
            <td colspan="2"> 
                test3:<br /> 
             <asp:TextBox ID="textboxSt1" runat="server" TextMode="MultiLine" Rows="3" Columns="100" /></td> 
           </tr> 
      </table> 
   </td> 
 </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:26:22.323

您应该包含您的 html，因此我们可以 100% 确定您得到了所需的答案。但是，仅您的 JS 本身就有几点可以让您更多地使用 jQuery：

```
function toggleRows(rowClass, value, max) { 
    $("." + rowClass).each(function () { 
        var row = $(this),
            rowNumber = row.index(); 

        row.toggle(value >= rowNumber);

        if (!row.is(':visible')) {
            row.find('input[type="checkbox"]').prop('checked', false);
            row.find('input[type="radio"]').prop('checked', false);
            row.find('input[type="text"]').val('');
            row.find('select').val('0');
        } 
    }); 
```

编辑：为 ddl 使用了错误的选择器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:34:10.773

To find all the controls in a tr (for a specific css class) using jquery , simply use :

```
$('tr .YourClassName'); 
```

# vba - 命令按钮是否可以在 Access 中显示另一个命令按钮？

> ID：12508298
> 
> 赞同：0
> 
> 时间：2012-09-20T07:57:18.557
> 
> 标签：vba, button, ms-access-2007

访问新手这里。我已经使用它大约一个星期了，并且可以通过足够的谷歌搜索和反复试验来完成大多数事情。不过有一个问题，我有一个表格，我用它来将参与者添加到数据库中。目前，我有 2 个按钮，一个打开男性添加用户表单，另一个按钮打开女性添加用户表单。

我想知道的是，是否可以创建一个主按钮（例如，称为“添加用户”），当按下该按钮时，会显示另外两个男性和女性按钮供用户选择？

对不起，如果这没有意义。基本上，我可以制作一个按钮，当按下时，可以看到另外两个按钮？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:15:42.787

是的，有办法做到这一点：

您可以创建这些 m/f 按钮并创建一个功能，在执行 addUser 按钮时切换按钮的可见性。

您可以制作一个额外的对话框，由 addUser-button 调用

但我的建议是 - 使用男性/女性的单选按钮及其设置来正确执行 addUser ;) 主要是因为我发现这更直观和有效。

![在此处输入图像描述](../Images/f67282dfe5a16224daf76253d5695ef1.png)

像这样，现在您可以访问那些以知道选择了哪个，或者您可以使用全局变量或属性由这些单选按钮设置，然后由其他对象访问，例如 addUser-Button。

希望这已经足够清楚了 - 只需尝试查看这些建议以找到您的方式；）

# javascript - 如何在图像上单击时将 vimeo 播放器添加到弹出窗口中..???

> ID：12508300
> 
> 赞同：0
> 
> 时间：2012-09-20T07:57:32.843
> 
> 标签：javascript, html, css

我想将视频添加到我的网站中。但是当用户单击图像时，我想在弹出窗口中播放该视频。我怎样才能做到这一点。？？

我想创建一个看起来像这个网站的网站。 [https://www.shoplocket.com/](https://www.shoplocket.com/)

谢谢 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:11:25.537

你可以使用彩盒

[例如](http://www.jacklmoore.com/colorbox/example1/)见这里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:01:52.743

那么首先你应该知道你想要什么样的弹出窗口。就像您提供的网站一样，只是一个新屏幕或一个不错的效果。

在最后一种情况下，您可以查看一些流行的弹出窗口可能性，例如[lightbox](http://lokeshdhakar.com/projects/lightbox2/)、[fancybox](http://fancybox.net/) ......根据您选择的插件，您必须检查他们的文档以嵌入视频。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:09:58.003

使用[漂亮照片](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)。

查看其中的 Vimeo 内容。

> 简单地用它打开 Vimeo 内容：
> 
> 1.  创建一个链接 (<a href="#"></a>)。
> 2.  将 rel 属性“prettyPhoto”添加到它（rel=”prettyPhoto”）。
> 3.  更改链接的 href，使其指向 Vimeo 视频页面，即与朋友分享的相同链接。

代码：

```
<a href="http://www.youtube.com/watch?v=qqXi8WmQ_WM" rel="prettyPhoto" title=""><img src="images/thumbnails/flash-logo.jpg" alt="YouTube" width="60" /></a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-08T01:08:48.197

要播放视频，请将其作为弹出窗口的内容

```
<video id="videoPop" class="video" controls >
    <source src="adress">
</video> 
```

这是弹出窗口本身：
HTML：

```
<div class="popup" onclick="myFunction()">Click me!
  <span class="popuptext" id="myPopup">Popup text...</span>
</div> 
```

JS：

```
<script>
// When the user clicks on <div>, open the popup
  function myFunction() {
   var popup = document.getElementById('myPopup');
   popup.classList.toggle('show');
  }
</script> 
```

当我写这篇文章时，你提到的网站不起作用，所以我为你生活 CSS。

不，您需要 HTML 触发器：

```
<div class="popup" onclick="myFunction()">Click me to toggle the popup!
  <span class="popuptext" id="myPopup">A Simple Popup!</span>
</div> 
```

# youtube-api - 初始化没有视频 ID 的 YouTube iframe 播放器

> ID：12508301
> 
> 赞同：4
> 
> 时间：2012-09-20T07:57:39.877
> 
> 标签：youtube-api

有没有办法在不实际加载视频本身的情况下启动 YouTube iframe 播放器？如果不提供*videoId*，则视频未加载（未显示错误）并且播放器实例保持“就绪”状态。

```
ytPlayer = new YT.Player('video-player', {
        height:   '100%',
        width:    '100%',
        videoId:  'video-id-goes-here',
        playerVars: {
                    .....
                    ..... 
```

感谢您的回答！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T13:57:19.270

当然，如果您愿意，以下代码确实有效：

```
<script>
  function onYouTubePlayerAPIReady() {
    var player = new YT.Player('player', { 
      events: {
        onReady: function() {
          player.loadVideoById('sOEAD-gfJ_M');
        }
      }
    });
  }
</script>
<script src="//www.youtube.com/player_api" type="text/javascript"></script> 
```

或者，如果您知道要加载播放列表，则可以省略`videoId`并输入

```
playerVars: {
  list: 'PLAYLIST_ID'
} 
```

但是，虽然这两种方法都有效，但您想要完成什么？可能有比初始化没有 . 的 YT.Player 更好的方法`videoId`。

# c# - 复杂数据模板

> ID：12508303
> 
> 赞同：1
> 
> 时间：2012-09-20T07:57:47.050
> 
> 标签：c#, windows-phone-7, xaml, datatemplateselector

我在这里实现了*CustomDataTemplateSelector*：[实现 Windows Phone 7 DataTemplateSelector 和 CustomDataTemplateSelector](http://windowsphonegeek.com/articles/Implementing-Windows-Phone-7-DataTemplateSelector-and-CustomDataTemplateSelector)。但在我的解决方案中，只有一个部分在所有 DataTemplates 中发生变化，DataTemplates 的其他部分很常见：

```
<local:MyTemplateSelector Content="{Binding}">
    <local:MyTemplateSelector.OneTemplate>
        <DataTemplate>
            <Grid Orientation="Horizontal" >
                <Grid x:Name="Grid1">
                    <Image Height="60" Width="60" Source="{Binding Photo}"/>
                </Grid>
                <Grid>
                    <TextBlock Text="{Binding TextValue1}">
                    <TextBlock Text="{Binding TextValue2}">
                </Grid>
            </Grid>
        </DataTemplate>
    </local:MyTemplateSelector.OneTemplate>
    <local:MyTemplateSelector.AnotherTemplate>
        <DataTemplate>
            <Grid Orientation="Horizontal" >
                <Grid x:Name="Grid2">
                    <Image Height="30" Width="60" Source="{Binding Photos[0]}"/>
                    <Image Height="30" Width="60" Source="{Binding Photos[1]}"/>
                </Grid>
                <Grid>
                    <TextBlock Text="{Binding TextValue1}">
                    <TextBlock Text="{Binding TextValue2}">
                </Grid>
            </Grid>
        </DataTemplate>
    </local:MyTemplateSelector.AnotherTemplate>
</local:MyTemplateSelector> 
```

这里*Grid1*和*Grid2*是不同的部分。是否可以“拆分”这些数据模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:20:35.677

尝试将您的公共部分声明为 Resource 并将其绑定到 ContentPresenter：

```
<DataTemplate x:Key="CommonPart">
   <Grid >
      <TextBlock Text="{Binding TextValue1}">
      <TextBlock Text="{Binding TextValue2}">
   </Grid>
</DataTemplate>

<local:MyTemplateSelector Content="{Binding}">
<local:MyTemplateSelector.OneTemplate>
<DataTemplate>
   <Grid Orientation="Horizontal" >
      <Grid x:Name="Grid1">
         <Image Height="60" Width="60" Source="{Binding Photo}"/>
      </Grid>
      <ContentPresenter ContentTemplate="{StaticResource CommonPart}" />                
   </Grid>
</DataTemplate>
</local:MyTemplateSelector.OneTemplate>
<local:MyTemplateSelector.AnotherTemplate>
<DataTemplate>
   <Grid Orientation="Horizontal" >
      <Grid x:Name="Grid2">
         <Image Height="30" Width="60" Source="{Binding Photos[0]}"/>
         <Image Height="30" Width="60" Source="{Binding Photos[1]}"/>
      </Grid>
      <ContentPresenter ContentTemplate="{StaticResource CommonPart}" /> 
   </Grid>
</DataTemplate>
</local:MyTemplateSelector.AnotherTemplate>
</local:MyTemplateSelector> 
```

# iphone - iOS 6.0 Facebook 连接

> ID：12508312
> 
> 赞同：2
> 
> 时间：2012-09-20T07:58:14.110
> 
> 标签：iphone

我必须在 iOS 6.0 中单击按钮连接到 Facebook。我已将框架社交和帐户添加到我的项目中。我可以签到某个地方，但无法为我在 Facebook 上发布的内容标记朋友。如何获取facebook好友列表？

我使用的代码如下所示：

```
- (IBAction)connectToFacebook:(id)sender
{
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

NSDictionary *options = @{
@"ACFacebookAppIDKey": @"412590558803147",
@"ACFacebookAppVersionKey": @"1.0",
@"ACFacebookPermissionsKey": @"publish_stream",
@"ACFacebookPermissionGroupKey": @"write"
};

NSLog(@"options is %@",options);

[accountStore requestAccessToAccountsWithType:accountType options:options
                                        completion:^(BOOL granted, NSError *error) {
                                            if (granted)
                                            {
                                                NSArray *accounts = [accountStore
                                                                     accountsWithAccountType:accountType];
                                            NSString *facebookAccount = [accounts lastObject];

                                                NSLog(@"facebook account %@", facebookAccount);
                                            } else {
                                                NSLog(@"%@",error);
                                                // Fail gracefully...
                                            }
                                        }];

if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

    SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
        if (result == SLComposeViewControllerResultCancelled) {

            NSLog(@"Cancelled");

        } else

        {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Posted!!!" message:@"your status is posted to facebook successfully" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

            [alert show];
        }

        [controller dismissViewControllerAnimated:YES completion:Nil];
    };
    controller.completionHandler =myBlock;

    [controller setInitialText:@"This is a ios 6.0 facebook intergration application"];
    [controller addImage:[UIImage imageNamed:@"spalshimage.jpeg"]];

    [self presentViewController:controller animated:YES completion:Nil];

}
else{
    NSLog(@"UnAvailable");
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:30:35.120

**集成 Facebook 的最佳方式是使用新的 iOS 6 Facebook SDK：**

[https://developer.apple.com/technologies/ios6/](https://developer.apple.com/technologies/ios6/)

**试试这个链接的朋友列表：**

[https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/show-friends/](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/show-friends/)

# javascript - 为什么在方法不返回值时使用 -1？

> ID：12508317
> 
> 赞同：-7
> 
> 时间：2012-09-20T07:58:19.730
> 
> 标签：javascript

该语句仅检查文本框中的“@”符号。

```
if (string1.indexOf("@")==-1){
 alert("Please input a valid email address!")
 document.example.email.focus() 
```

这。`if (string1.indexOf("@")==-1){`为什么我们使用 -1 而不是 0。

这让我感到困惑，因为 0 几乎在任何地方都被用作“空”或“空”值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T07:59:14.440

因为如果`@`在 的开头找到 ，`string1`即使找到它，它的索引也将为 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T07:59:54.370

在*大多数*编程语言中，索引是从零开始的，这意味着索引中的第一个位置（同样在*大多数*编程语言中，字符串是字符的索引）将是 0 - 因此 0 不能用于表示没有找到任何内容任何地方。

* * *

为了帮助澄清：

A`string`是`chars`（字符或单符号类型）的索引。所以，`"hi@ho.com"`是一个包含 9 个位置的索引：

```
[0] = 'h'
[1] = 'i'
[2] = '@'
[3] = 'h'
[4] = 'o'
[5] = '.'
[6] = 'c'
[7] = 'o'
[8] = 'm' 
```

因为 JavaScript 中的索引是*从零开始的，*所以它们的第一个位置总是从 0 开始。`indexOf`使用 -1 来告诉你它找不到`@`任何地方，因为它不能使用 0，因为 0 实际上是索引的第一个位置。

即使`strings`不是索引，由于传统和事实标准的原因，*大多数*语言仍会使用 -1 表示找不到字符，使用 0 表示第一个位置。

在上面的示例中，`indexOf("@")`将返回 2，而不是 3。同样，因为索引是从零开始的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T08:02:25.220

`indexOf`返回传递的字符串的第一个**从零开始的索引位置**。

*   如果`string1`以`@`then 开头，它将返回`0`。
*   如果`string1`的第二个字符是`@`它将返回`1`
*   第三个字符将返回`2`
*   第四个字符将返回`3`
*   等等等等……

`-1`如果没有匹配，则返回，因为它不可能有`-1`从零开始的索引位置。

`0`不能使用，因为如果字符串以`@`

* * *

更多信息`indexOf`可以在这里找到：

[http://www.tizag.com/javascriptT/javascript-string-indexOf.php](http://www.tizag.com/javascriptT/javascript-string-indexOf.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T08:00:18.767

这是因为字符串中的字符是从左到右索引的，0 是第一个字符。

因此，如果您找到一个字符/字符串，您会期望从 0 到字符串长度的结果范围 - 1，并且保持返回类型相同似乎是合乎逻辑的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T08:02:00.493

它是-1，因为这意味着它无法找到您正在寻找的字符串或字符集。由于字符串就像一个字符数组，就像在任何其他数组中一样，索引总是从 0 开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T08:16:09.493

这是一个示例，可以帮助您更好地理解：

```
var email = 'mymail@server.com';
//  indexes  0123456789... 
```

如您所见， 的索引`m`为零，因为它位于字符串的开头，因此在此示例`indexOf('@')`中将返回`6`，因为位于字符串中`@`的第 6^位。

那么，如果`@`没有找到，我们会返回什么？返回零表示找到了一些东西*，*所以我们要返回一个非零值，根据`indexOf`是`-1`

```
var invalidEmail = 'myEmail';
// indexes      -1 |0123456 
```

# java - 将 XMLGregorianCalendar 转换为 java.sql.Timestamp

> ID：12508319
> 
> 赞同：15
> 
> 时间：2012-09-20T07:58:23.340
> 
> 标签：java, date, timestamp, gregorian-calendar

我正在尝试将 XMLGregorianCalendar 日期分配给 java.sql.Timestamp var，就像这样......

```
var1.setTimeStamp(Timestamp.valueOf(var2.getXMLGregorianCalendar().toString())) 
```

但显然，这不起作用，并引发异常......

> java.lang.IllegalArgumentException：时间戳格式必须是 yyyy-mm-dd hh:mm:ss[.fffffffff]

我也试过这个：

```
var1.setTimeStamp((Timestamp) var2.getXMLGregorianCalendar().getTime()) 
```

但...

> java.lang.ClassCastException：java.util.Date 不能转换为 java.sql.Timestamp

有任何想法吗..？谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-20T08:40:15.533

我找到了答案：

```
 Timestamp timestamp = new Timestamp(var2.getXMLGregorianCalendar().toGregorianCalendar().getTimeInMillis());
    var1.setTimeStamp(timestamp); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-07T22:47:26.407

# c# - 最大上传长度

> ID：12508323
> 
> 赞同：10
> 
> 时间：2012-09-20T07:58:49.280
> 
> 标签：c#, asp.net-mvc, file-upload, iis-7, maxrequestlength

关于 MVC 中的上传大小限制我已经知道的事情：

1.  对于 IIS7，您必须同时设置`maxAllowedContentLength`和设置`maxRequestLength`最大上传大小
2.  我知道 1 个属性以字节为单位，另一个以千字节为单位
3.  您可以使用 location 属性来指定固定位置

我有一个上传组件，它应该能够处理多达 200MB 的文件。我不认为将`maxlimit`每个页面的大小设置为 200MB 是正确的，所以我想使用动态请求 URL 作为位置。

上传 URL 的路由模式如下所示：`{dynamicvalue}/ConvertModule/Upload`

（“ConvertModule”是控制器，“Upload”是动作。）困难的部分是`{dynamicvalue}`，因此我无法在`web.config`.

由于会话劫持，我不想使用 Flash 上传或类似的东西作为解决方案。

*   **问题 1**（对我来说最重要）：有没有办法只为给定路由模式设置上传限制？
*   **问题 2**：是否可以在超过上传大小时显示自定义警告？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T08:53:38.823

> **问题1**：有没有办法只为给定路由模式设置上传限制？

我不知道，因为该`<location>`节点不支持动态 url。但是你可以通过使用[url rewrite 模块](http://www.iis.net/downloads/microsoft/url-rewrite)来欺骗它。

所以让我们假设你有一个控制器处理文件上传：

```
public class PicturesController
{
    [HttpPost]
    public ActionResult Upload(HttpPostedFileBase file, int dynamicValue)
    {
        ...
    }
} 
```

并且您配置了一些路由以匹配此控制器：

```
routes.MapRoute(
    "Upload",
    "{dynamicvalue}/ConvertModule/Upload",
    new { controller = "Pictures", action = "Upload" },
    new { dynamicvalue = @"^[0-9]+$" }
); 
```

好的，现在让我们在 web.config 中设置以下重写规则：

```
<system.webServer>
    <rewrite>
      <rules>
        <clear />
        <rule name="rewrite the file upload path" enabled="true">
          <match url="^([0-9]+)/ConvertModule/Upload$" />
          <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
          <action type="Rewrite" url="pictures/upload?dynamicvalue={R:1}" />
        </rule>
      </rules>
    </rewrite>
</system.webServer> 
```

到目前为止一切顺利，现在您可以设置`<location>`为`pictures/upload`：

```
<location path="pictures/upload">
    <system.web>
        <!-- Limit to 200MB -->
        <httpRuntime maxRequestLength="204800" />
    </system.web>
    <system.webServer>
        <security>
            <requestFiltering>
                <!-- Limit to 200MB -->
                <requestLimits maxAllowedContentLength="209715200" />
            </requestFiltering>
        </security>
    </system.webServer>
</location> 
```

现在您可以上传到以下模式`{dynamicvalue}/ConvertModule/Upload`的 url：并且 url rewrite 模块会将其重写，`pictures/upload?dynamicvalue={dynamicvalue}`但`<location>`标签将匹配`pictures/upload`并成功应用限制：

```
<form action="/123/ConvertModule/Upload" method="post" enctype="multipart/form-data">
    <input type="file" name="file" />
    <button type="submit">OK</button>
</form> 
```

> **问题2：**是否可以在超过上传大小时显示自定义警告？

不，您必须将限制设置为更大的值，并在上传处理程序中检查文件大小。如果您可以在客户端（HTML5、Flash、Silverlight 等）上检查文件大小，那么就这样做以避免浪费带宽。

# ios - UITableView 委托和数据源方法未在自定义视图中调用

> ID：12508324
> 
> 赞同：0
> 
> 时间：2012-09-20T07:58:49.313
> 
> 标签：ios

我创建了一个 UIView 子类，它有一个 tableView 作为属性。我在视图的 initWithFrame 中创建了 tableView 对象，并将其委托和数据源设置为自定义视图。

我还将scrollEnabled设置为NO。

然后将其添加为子视图。

**结果**： tableView 出现，它没有按预期滚动。但是数据源方法根本没有被调用。tableView 什么也不显示。

我在 cellForRowAtIndexPath 中添加了一个断点，但控件从未到达那里。我已经在自定义视图的界面中声明了 UITableViewDataSource 和 UITableViewDelegate 协议。

这是 initWithFrame 中的代码：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Custom initialization
        self.frame = frame;
        self.indexListView =  [[UITableView alloc] initWithFrame:self.bounds];
        self.indexListView.delegate = self;
        self.indexListView.dataSource = self;
        self.indexListView.scrollEnabled = NO;

        [self addSubview:self.indexListView];
        [self.indexListView reloadData];
        if([self respondsToSelector:@selector(tableView:cellForRowAtIndexPath:)])
            NSLog(@"YES.. selector is there");
    }
    return self;
} 
```

可能是什么问题呢 ？

# solr - solr 上的多线程索引

> ID：12508326
> 
> 赞同：3
> 
> 时间：2012-09-20T07:58:52.840
> 
> 标签：solr

我将 Solr 的一个实例部署到带有 tomcat 的 ubuntu 机器上。然后我有一个单线程客户端程序来读取数据并将其注入 Solr。我正在观察内存和 cpu 的使用情况，并意识到我仍然有很多资源（在内存和 CPU 方面）可以使用。我想知道是否应该将索引代码更改为多线程以注入 Solr？用目前的单线程程序索引2000万条数据，大约需要14个小时。这就是为什么我想知道我是否应该改为使用多线程。提前感谢您的建议和帮助！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T11:31:43.210

Solr 中的多线程索引被广泛使用。如果您还可以从源代码中进行多线程读取，那么您所说的并不是很清楚，但我认为这是要走的路。我建议您尝试一下，但首先尝试分析您的代码并查看代码的哪一部分最慢并将其包含在多线程中。

还要留意你的提交策略。

来自 Solr 文档：（[http://wiki.apache.org/solr/SolrPerformanceFactors](http://wiki.apache.org/solr/SolrPerformanceFactors)）“一般来说，每个更新请求添加多个文档比每个更新请求一个要快。......减少自动提交的频率或禁用它们“

# java - 如何在不更改等号和哈希码的情况下插入集合

> ID：12508332
> 
> 赞同：2
> 
> 时间：2012-09-20T07:59:26.543
> 
> 标签：java, groovy, set, guava, hashset

我正在寻找建议。我有一个`Person`带有 String firstName 和 String lastName 的类当我要插入具有相同字符串的列表值时，例如：

```
set.add(new Person("firstName","lastName"))

set.add(new Person("firstName","lastName")) 
```

集合不过滤对象，它们仍然进入集合。有什么建议可以在不覆盖 equales 和 hashcode 函数的情况下创建集合列表？也许有番石榴或一些时髦的清单？谢谢，或者。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T08:46:17.790

在 Guava 中，有一个为此类事情设计的[Equivalence类。](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Equivalence.html)像这样创建自己的`Equivalence`类：

```
import com.google.common.base.Equivalence;
import com.google.common.base.Objects;

public class PersonEquivalence extends Equivalence<Person> {

  @Override
  protected boolean doEquivalent(Person p1, Person p2) {
    return Objects.equal(p1.getFistName(), p2.getFistName())
        && Objects.equal(p1.getLastName(), p2.getLastName());
  }

  @Override
  protected int doHash(Person person) {
    return Objects.hashCode(person.getFistName(), person.getLastName());
  }

} 
```

然后这段代码

```
Set<Equivalence.Wrapper<Person>> set = Sets.newHashSet();
PersonEquivalence personEquivalence = new PersonEquivalence();
set.add(personEquivalence.wrap(new Person("Joe", "Doe")));
set.add(personEquivalence.wrap(new Person("Joe", "Doe")));
set.add(personEquivalence.wrap(new Person("Jane", "Doe")));
System.out.println(set); 
```

印刷

```
[PersonEquivalence@8813f2.wrap(Person{firstName=Jane, lastName=Doe}),
 PersonEquivalence@8813f2.wrap(Person{firstName=Joe, lastName=Doe})] 
```

当然它有点冗长，但是你可以创建[ForwardingSet](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ForwardingSet.html)来自动为你进行 wrap 和 unwrap `Person`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T08:20:16.767

您可以使用自己的比较器创建[TreeSet 。](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#TreeSet%28java.util.Comparator%29)

```
Set<Person> set = new TreeSet<Person>(new Comparator<Person>() {
    @Override
    public int compare(Person p1, Person p2) {
        // Your own compare logic
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T08:22:06.893

在不违反合同的情况下，你不能`Set`。要么不使用 a `Set`，要么将 a 包装`Person`在另一个实现`equals`并`hashcode`基于内部的类中`Person`（有关在 Guava 中执行此操作的方法，请参阅其他答案）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T08:57:36.277

这是我的地图建议的粗略尝试。

```
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;

public class PeopleCarrier implements Iterable<Person>{

    private Map<PersonKey, Person> storage = new HashMap<PersonKey, Person>();

    public void add(Person p) {
        PersonKey pk = new PersonKey(p);
        storage.put(pk, p);     
    }

    public boolean contains(Person p) {
        return storage.containsKey(new PersonKey(p));
    }

    @Override
    public Iterator<Person> iterator() {
        return new Iterator<Person>() {

            private Iterator<PersonKey> i = storage.keySet().iterator();

            @Override
            public void remove() {
                throw new UnsupportedOperationException();
            }

            @Override
            public Person next() {
                return storage.get(i.next());               
            }

            @Override
            public boolean hasNext() {
                return i.hasNext();
            }
        };
    }

    private class PersonKey {
        private String firstname;
        private String lastname;
        public PersonKey(Person p) {
            this.firstname = p.getFirstname();
            this.lastname = p.getLastname();
        }
        /* (non-Javadoc)
         * @see java.lang.Object#hashCode()
         */
        @Override
        public int hashCode() {
            final int prime = 31;
            int result = 1;
            result = prime * result + getOuterType().hashCode();
            result = prime * result
                    + ((firstname == null) ? 0 : firstname.hashCode());
            result = prime * result
                    + ((lastname == null) ? 0 : lastname.hashCode());
            return result;
        }
        /* (non-Javadoc)
         * @see java.lang.Object#equals(java.lang.Object)
         */
        @Override
        public boolean equals(Object obj) {
            if (this == obj)
                return true;
            if (obj == null)
                return false;
            if (!(obj instanceof PersonKey))
                return false;
            PersonKey other = (PersonKey) obj;
            if (!getOuterType().equals(other.getOuterType()))
                return false;
            if (firstname == null) {
                if (other.firstname != null)
                    return false;
            } else if (!firstname.equals(other.firstname))
                return false;
            if (lastname == null) {
                if (other.lastname != null)
                    return false;
            } else if (!lastname.equals(other.lastname))
                return false;
            return true;
        }
        private PeopleCarrier getOuterType() {
            return PeopleCarrier.this;
        }   

    }
} 
```

# php - PHP 和 HTML 反馈表

> ID：12508333
> 
> 赞同：0
> 
> 时间：2012-09-20T07:59:31.177
> 
> 标签：php, html, forms, feedback

我正在尝试制作一个 html 和 php 反馈表，我收到一封如下所示的电子邮件：

```
New contact form submission 
From:,, 
Email:,@email, 
,, 
```

我的html是：

```
<form method="POST" action="contactform.php">
    Name:<br/>
        <input type="text" name="name" />
        <br/><br/>
    EMail:<br/>
        <input type="text" name="email" />
        <br/><br/>
    Message: <br/>
        <textarea name"message" rows="10" cols="50" />
        </textarea><br/>
    <input type="submit" value="submit" />
</form> 
```

我的PHP是：

```
<?php
//converting veriables
$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];
$recipient = 'nicholasparry@me.com'; 
$subject="Contact Form"; 
//creating message
$content = "New contact form submission \n From:,$name, \n Email:,@email, \n ,$message,"; 
//sending message
mail($recipient, $message, $content);
?> 
```

谁能帮我解决问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:02:18.807

它的：

```
$content = "New contact form submission \n From: ".$name.",\n Email: ".$email.", \n Message: ".$message; 
```

和

```
<textarea name="message" rows="10" cols="50"></textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:08:25.983

开始使用[Swiftmailer](http://swiftmailer.org/)或[PhpMailer](http://phpmailer.worxware.com/)，你的生活会更轻松...

Swiftmailer 示例：

```
require_once 'lib/swift_required.php';
$transport = Swift_MailTransport::newInstance();
$mailer = Swift_Mailer::newInstance($transport);
$message = Swift_Message::newInstance('Wonderful Subject')
    ->setFrom(array('john@doe.com' => 'John Doe'))
    ->setTo(array('receiver@domain.org', 'other@domain.org' => 'A name'))
    ->setBody('Here is the message itself');
$mailer->send($message); 
```

PhpMailer 示例：

```
$mail             = new PHPMailer(); // defaults to using php "mail()"
$mail->SetFrom('name@yourdomain.com', 'First Last');
$mail->AddReplyTo("name@yourdomain.com","First Last");
$mail->AddAddress("whoto@otherdomain.com", "John Doe");
$mail->Subject    = "PHPMailer Test Subject via mail(), basic";
$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
$mail->MsgHTML($body);
$mail->AddAttachment("images/phpmailer.gif");      // attachment
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment
if(!$mail->Send()) {
    echo "Mailer Error: " . $mail->ErrorInfo;
} else {
    echo "Message sent!";
} 
```

我更喜欢 Swiftmailer，但你选择你最好的选择 ;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:21:51.433

将变量名用大括号括起来。例如“发件人：，{$name}”，

# php - 在 Symfony 中使用 PHP Simple HTML DOM Parser 时出错

> ID：12508343
> 
> 赞同：2
> 
> 时间：2012-09-20T07:59:54.000
> 
> 标签：php, symfony1, symfony-1.4

这是 simple_html_dom 如何在独立 php 文件中工作的基本示例。

测试.php：

```
include ('simple_html_dom.php');

$url = "http://www.google.com";
$html = new simple_html_dom();
$html->load_file($url);

print $html; 
```

如果我使用以下命令执行它：`php test.php`

它正确转储网站的 html（在本例中为 google.com）

现在让我们看一个使用 Symfony 任务的基本代码示例：

```
class parserBasic extends sfBaseTask {
  public function configure()
  {
    $this->namespace = 'parser';
    $this->name      = 'basic';
  }

  public function execute($arguments = array(), $options = array())
  {
    $url = "http://www.google.com";
    $html = new simple_html_dom();
    $html->load_file($url);
    print $html;
  }
} 
```

该文件位于：`<appname>/lib/task`

我不需要在文件中包含库，因为在`lib/task`文件夹下，它会自动加载。

我使用以下命令执行任务：`php symfony parser:basic`

我收到以下错误消息：

```
PHP Fatal error:  
Call to a member function innertext() on a non-object in
/home/<username>/<appname>/lib/task/simple_html_dom.php on line 1688 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:39:55.477

问题来自 Symfony。

事实上，如果在加载文件时出现错误`simple_html_dom`，它只会返回 false。

例如，如果您在任务中执行此操作：

```
$url = "http://www.google.com";
$html = new simple_html_dom();
$res = $html->load_file($url);
if (false === $res)
{
    throw new Exception("load_file failed.");
}
print $html; 
```

你会得到一个例外。如果您`simple_html_dom`在加载文件时调整以显示错误，大约在第 1085 行：

```
// load html from file
function load_file()
{
    $args = func_get_args();
    $this->load(call_user_func_array('file_get_contents', $args), true);
    // Throw an error if we can't properly load the dom.

    if (($error=error_get_last())!==null) {
        // I added this line to see any errors
        var_dump($error);

        $this->clear();
        return false;
    }
} 
```

你会看见：

```
array(4) {
  ["type"]=>
  int(8)
  ["message"]=>
  string(79) "ob_end_flush(): failed to delete and flush buffer. No buffer to delete or flush"
  ["file"]=>
  string(62) "/home/.../symfony.1.4/lib/command/sfCommandApplication.class.php"
  ["line"]=>
  int(541)
} 
```

我通常在使用任务时遇到这个错误（实际上是一个通知）。问题就在这里，在`sfCommandApplication`中`ob_end_flush`：

```
/**
 * Fixes php behavior if using cgi php.
 *
 * @see http://www.sitepoint.com/article/php-command-line-1/3
 */
protected function fixCgi()
{
  // handle output buffering
  @ob_end_flush();
  ob_implicit_flush(true); 
```

为了解决这个问题，我用`@ob_end_flush();`. 一切都很顺利。我知道，这是一个丑陋的修复，但它的工作原理。解决此问题的另一种方法是禁用来自 PHP (in `php.ini`) 的通知，例如：

```
// Report all errors except E_NOTICE
error_reporting = E_ALL ^ E_NOTICE 
```

# wamp - WAMP 错误：禁止，您无权访问此服务器上的 /url/

> ID：12508349
> 
> 赞同：0
> 
> 时间：2012-09-20T08:00:08.077
> 
> 标签：wamp, wampserver

> 您无权访问 /DiveBay/'。[http://localhost/DiveBay/placefeedback2.php](http://localhost/DiveBay/placefeedback2.php)。在这台服务器上。

我的 wampserver 项目刚刚抛出了这个错误。我已经为它制作了大约 20 多个 php 脚本/页面，而且以前从未见过。我正在尝试通过另一个页面上的表单操作来访问该页面。

为什么会出现这种情况？有人可以告诉我该怎么做吗？唯一对我来说似乎很明显的是 URL 可能是错误的，应该只是 dipbay/placefeedback2.php。

我没有更改文件的权限或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:11:01.673

不确定这是否是您的问题，但它可能总是有帮助：

[http://aboukone.com/2011/04/25/wamp-apache-error-you-dont-have-permission-to-access-on-this-server/](http://aboukone.com/2011/04/25/wamp-apache-error-you-dont-have-permission-to-access-on-this-server/)

祝你好运:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-31T10:42:53.083

转到C：\，右键单击“wamp”文件夹，单击“安全”选项卡，单击“编辑”。在“组或用户名”文本框/部分中，选择“您的登录名”并选中“完全控制” “。当你通过时点击确定。转到C：\ wamp，右键单击“www”并执行与上述相同的操作。

或者

在浏览器中输入不带引号的“127.0.0.1”

如果这能解决您的问题，请记住“标记/打勾”。

# ios - 在 Snow Leopard 上将 iOS 6 SDK 导入 Xcode 4.2

> ID：12508357
> 
> 赞同：14
> 
> 时间：2012-09-20T08:00:31.747
> 
> 标签：ios, xcode, osx-snow-leopard, ios6

我在 Snow Leopard 上安装了 Xcode 4.2，当 iOS SDK 发布时，我按照这个主题导入了 iOS 5.1 SDK[是否有可能在 Snow Leopard 上获得适用于 Xcode 4.2 的 iOS 5.1 SDK？](https://stackoverflow.com/questions/9613565/is-is-possible-to-get-the-ios-5-1-sdk-for-use-with-xcode-4-2-on-snow-leopard)

现在我需要导入 iOS 6 SDK，我会知道本教程是否仍然适用于 iOS 6 SDK。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T21:25:51.037

这对我有用（在“su -”之后，所以我以 root 身份运行），并将 Xcode 4.5 .dmg 文件安装为磁盘驱动器。

```
 echo copying iPhoneOS6.0.sdk
cp -R /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk               /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/

echo copying iphonesim6.0.sdk
cp -R /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/

echo copying devicesupport for 6.0
cp -R /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/6.0\ \(10A403\)                 /Developer/Platforms/iPhoneOS.platform/DeviceSupport/

#remove old -latest- link
rm -f /Developer/Platforms/iPhoneOS.platform/DeviceSupport/Latest

echo setting up Latest link
cd /Developer/Platforms/iPhoneOS.platform/DeviceSupport/
ln -s ./6.0\ \(10A403\) ./Latest 
```

注意：Xcode dmg 文件可从[https://developer.apple.com/downloads/index.action?name=Xcode](https://developer.apple.com/downloads/index.action?name=Xcode) (1.56 GB)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-20T13:21:14.370

我尝试按照您链接的教程进行操作。它非常适合我。只需复制“6.0”而不是“5.1”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T17:14:45.750

使用运行 Snow Leopard 的 Intel Core Duo（32 位），iOS 6 模拟器不起作用（因为某些库缺少 32 位变体）。

似乎还可以通过复制 iPhoneOS.platform 文件在升级到 iOS6 的 iPhone 4 设备上进行测试，但似乎无法对 iPhone 5 进行相同的测试。我认为这是由于新的设备上的 armv7s 格式。

所以你能做什么取决于你的 Mac 和你的 iOS 设备。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T21:44:09.320

对于 Cordova 项目的构建，相同的过程可以工作，但是您可能会收到此错误：

> dyld：库未加载：/usr/lib/system/libdispatch.dylib
> 引用自：/Developer42/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/lib/libSystem.dylib 原因：没有合适的图像成立。确实发现：/Developer42/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/lib/system/libdispatch.dylib：未知所需的加载命令0x80000023 命令/Developer42/usr/bin/ibtool 失败，退出代码255

发生此构建失败是因为`/Classes/MainViewController.xib`它与 iOS 6 不兼容....*我认为 ;)*

解决方法：

选择您的项目目标并展开 Supporting Files 文件夹。在此文件夹中，单击**OTHER THAN 以外** `MainViewController.xib`的任何文件。您需要公开文件检查器。公开文件检查器后，选择文件`MainViewController.xib`. 此时 xcode 将尝试崩溃，不要让它崩溃！...只需在崩溃提示中按住*Continue*直到 File Inspectors 设置更改以反映 .xib 文件。您应该一直按*继续*，直到您通过崩溃提示，以便您可以对文件检查器进行编辑。在 File Inpsector 中，在**Target Membership**下取消选择目标。

![在此处输入图像描述](../Images/ee91c366d0906ceb35c96ce14724fcb7.png)

关闭 xcode，重新打开，一切都应该是金色的！

避免`MainViewController.xib`在将来选择，因为它会使您的会话崩溃。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T05:50:47.200

我刚刚尝试将 iOS 6 SDK 导入 Xcode 4.2 for Snow Leopard，但是当我尝试构建我的一个旧项目时，我遇到了 iOSGuru 提到的相同错误。麻烦制造者似乎是 iOS 6 模拟器。删除 iOS 6 模拟器后，我的旧项目使用“最新 iOS（iOS 6.0）”作为基础 SDK 正常构建。这意味着我无法在 iOS 6 模拟器上进行测试，但我正在运行 iOS 6 的真实设备上进行测试，所以我认为这没什么大不了的。

我还没有尝试使用 iOS 6 功能构建任何东西，因此仍有可能出现问题，但省略 iOS 6 模拟器似乎让我可以使用 iOS 6 SDK 构建。

# javascript - 为什么立即调用函数表达式 (IIFE) 与自执行匿名函数不同？

> ID：12508359
> 
> 赞同：3
> 
> 时间：2012-09-20T08:00:33.643
> 
> 标签：javascript, iife

很明显，在 EcmaScript 中，函数在被调用时会创建一个新的执行上下文。函数内定义的所有变量和函数只能在该函数范围内访问。但是当我们使用闭包时，变量和函数可能会在该上下文之外被访问。IIFE 是一个立即调用的函数表达式。很简单。

但是为什么 IIFE 与自执行匿名函数不同，我并不完全清楚！？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T08:02:34.383

它们是相同的，之所以重命名为，是`IIFE`因为 an`IIFE`不一定是匿名的，并且它们不会执行自己。

考虑以下：

```
(function bleh() {
    alert('I am not anonymous, i have a name!');
})(); //<-- invoked like any other function 
```

# objective-c - 这种物体排列会泄漏吗？

> ID：12508364
> 
> 赞同：0
> 
> 时间：2012-09-20T08:01:06.780
> 
> 标签：objective-c, memory-management, weak-references

我有两个类 A 和 B。在 A 中，我正在创建 B 的对象，在 BI 中访问 A 类的后退 Button 属性。在 B 中，我已将 A 声明为弱引用变量。代码运行良好，没有任何崩溃。但是我不确定我的实现中是否发生内存泄漏。另外，我是否必须在 A 中将 backButton 声明为弱引用？

```
@interface A : UIViewController
{

    IBOutlet UIButton *backButton;
    B * cntrl;

}

@property (nonatomic, strong) UIButton *backButton;

// Here is the implementation of A
@implementation A
@synthesize backButton;

// pushing to B
cntrl = [[B alloc]initWithNib:nil bundle:nil];
cntrl.parent = self;
[self.navigationController pushViewController:cntrl animated:YES];

@interface B:UIViewController
{
    A __weak *parent;
}

@implementation

-(void)method
{

parent.backButton.enable = NO;
[self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:06:52.627

不，你的代码很好。如果您有任何疑问，可以使用仪器测试您的应用程序。

# jquery - jquery selectable - 禁用相应的值

> ID：12508365
> 
> 赞同：2
> 
> 时间：2012-09-20T08:01:13.113
> 
> 标签：jquery, selectable, jquery-ui-selectable

我一直在寻找类似于我正在尝试实现的东西，但没有在堆栈或网络上找到它。使用 Jquery Selectable，但有一组以上的 ul：

```
<div>
    <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
    </ul>
    <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
    </ul>
    <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
    </ul>
</div> 
```

我想要做的是，如果我从任何选项中选择“1”，则所有其他“1”都被禁用。所有其他选择选项也是如此，因此基本上您一次只能选择一个相同的选项。我可以使用单选按钮，使用名称和值标签来做到这一点，但不确定如何在可选界面中实现它？提前感谢您的帮助，或者如果有人可以将我指向类似的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:39:06.147

您只能使用该`filter`选项使某些项目可选。进行更改后，您需要遍历所有元素并根据需要更新过滤器。

示例实现可能如下所示（请参阅[此处](http://jsfiddle.net/RkTrA/1/)的现场演示）：

```
$(document).ready(function() {

    function enableAll() {
        $('li').addClass('enabled');
    }

    function disableSelected(selected) {

        // iterate thru all list items
        $.each($('li'), function(i, item) {

            // if the text is selected somewhere..
            if ($.inArray($(this).text().toLowerCase(), selected) >= 0) {

                // ..and it's not here
                if (!$(this).hasClass('ui-selected')) {

                    // remove
                    $(this).removeClass('enabled');
                }
            }
        });
    }

    $('ul').selectable({

        // only matching items will be selectable
        filter: '.enabled',

        // change handler
        stop: function(event, ui) {

            // we will collect selected texts in this variable
            var selectedTexts = new Array();

            // go thru all selected items (not only in current list)
            $('.ui-selected').each(function() {

                // extract selected text
                var text = $(this).text().toLowerCase();

                // add to array if not already there
                if ($.inArray(text, selectedTexts) < 0) {
                    selectedTexts.push(text);
                }
            });

            // enable all list items for selectable
            enableAll();

            // disable list items with text that is already selected
            disableSelected(selectedTexts);
        }
    });

    // initialization
    enableAll();

});​ 
```

# jquery - 在 tabcontainer 中使用 div、image 和 jquery 问题

> ID：12508367
> 
> 赞同：2
> 
> 时间：2012-09-20T08:01:17.043
> 
> 标签：jquery, asp.net, css, html

问题在于以下代码，我无法弄清楚为什么？代码是这样的

**.ASPX**

```
 <cc1:TabPanel runat="server" HeaderText="Floor Plan" ID="TabPanelFloorPlan">
        <ContentTemplate>
                        <div id="floorplanContainer">
                        <img id='fplan' src="~/_layouts/card.jpg" usemap="#MyImageMap" />
                        </div>
                        <map id="MyImageMap" name="MyImageMap">
                            <area id='roomArea' shape="poly" coords="0,0,0,0" alt="Meeting Room" />
                        </map>
                        <input id="Submit" type="button" value="Draw" />
                        <input id="clear" type="button" value="Clear" />
        </ContentTemplate>
    </cc1:TabPanel> 
```

**jQuery**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>

<script src="../../Style Library/Styles/jquery.maphilight.js" type="text/javascript"></script>
    <script>
        jQuery(document).ready(function () {
            var points = "";

            $("#floorplanContainer").click(function (e) {
                var x = e.pageX - this.offsetLeft;
                var y = e.pageY - this.offsetTop;

                var pwidth = 2;
                var pheight = 2;

                $("#floorplanContainer").append("<div class='point' style='font-size:0;position:absolute; display:inline; border: 1px solid black; top:" + (y - (pheight / 2)) + "px; left:" + (x - (pwidth / 2)) + "px; width: " + pwidth + "px; height: " + pheight + "px; z-index:100; '> </div>");
                if (points != "") points += ',';
                points += x + "," + y
            });

            $("#clear").click(function () {

                $('.point').remove();
                points = "";
                $('#roomArea').attr('coords', '0,0,0,0');
                $('#fplan').maphilight({ alwaysOn: false });

            });

            $("#Submit").click(function () {

                $('#roomArea').attr('coords', points);
                $('#fplan').maphilight({ alwaysOn: true });

            });
        })
</script> 
```

问题如图所示：点击时在其他位置绘制的点似乎是相对于其他容器的绘制，而不是区域在底部移动。看一看。

![在此处输入图像描述](../Images/532c16829246e07794120524ec36a3e1.png)

我无法弄清楚为什么会发生这种情况，有人可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:21:14.217

我认为通过使用鼠标事件对象的 jquery clientX 和 clientY 属性，您应该从视口中获取坐标。将图像映射放在容器元素中可能会很有用。

另外两个属性可能会派上用场：鼠标事件对象的 parentX 和 parentY。它们返回从屏幕左上角测量的坐标。

编辑：clientX 和 clientY 可能不是正确的解决方案。但是这个答案似乎有一个解决方案：[jQuery get mouse position within an element](https://stackoverflow.com/questions/4249648/jquery-get-mouse-position-within-an-element)

# cakephp - 增加最后插入的值 CakePHP

> ID：12508368
> 
> 赞同：1
> 
> 时间：2012-09-20T08:01:20.260
> 
> 标签：cakephp

我需要为列生成唯一值。我想增加表中最后插入的值。

我试过这个，但无济于事

```
if($this->request->is('post')){
    $code = $this->Department->find('first', array(
        'fields' => 'Department.code',
        'order'  => 'Department.code DESC'
    ));
    $code += 1;
    $this->data['Department']['code'] = $code;
    if($this->Department->save($this->request->data)){
        $this->Session->setFlash('New department added.');
        $this->redirect(array('action' => 'add'));
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:36:44.720

You are saving **$this->request->data** but you put your data in **$this->data**.

Try with this:

```
if($this->request->is('post')){
    $code = $this->Department->find('first', array('fields' => 'Department.code','order' => 'Department.code DESC'));
    $code += 1;
    $this->request->data['Department']['code'] = $code;
    if($this->Department->save($this->request->data)){
        $this->Session->setFlash('New department added.');
        $this->redirect(array('action' => 'add'));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:22:16.680

$id = $this->User->getLastInsertId ();

通过这个函数，您将获得最后插入的 id，现在增加它的值并在您想要使用的地方使用它或增加这个 id 并将其保存在您的数据库中

# javascript - IE上的RequireJS错误：依赖文件名是ID而不是文件名

> ID：12508373
> 
> 赞同：0
> 
> 时间：2012-09-20T08:01:37.747
> 
> 标签：javascript, jqgrid, requirejs

我在 IE 上遇到了 RequireJS 的奇怪行为。有时（这完全是随机的）生成的 js 文件引用出现在 ID 上，而不是文件名。

我解释，

在我拥有的路径上：

```
jqGridz: "jquery.jqGrid/js/jquery.jqGrid.min" 
```

在我的垫片上：

```
"jqGridz": ["jqueryUi", "jqGrid_i18n_en"] 
```

有时最终结果被正确解析为：

```
/public/javascripts/jquery.jqGrid/js/jquery.jqGrid.min.js 
```

但其他时候（很多时候）它被渲染为：

```
/public/javascripts/jqGridz.js 
```

因此，我得到的是路径的 ID，而不是 jqGrid 的路径。

这只发生在 IE 上，我不知道为什么。

我正在使用 RequireJS v2.0.6

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:04:27.147

想通了...我选择了这个项目，RequireJS 已经实现，但它一团糟。

所以发生的事情是，每当 RequireJS 无法加载资源（对我来说是 404）时，它都会放置键名而不是文件路径。

所以基本上如果你有这个问题，请查看 Firebug 或 Fiddler 中的资源加载列表并搜索错误:)

干杯!

# android - 创建 textView 从右到左布局

> ID：12508375
> 
> 赞同：1
> 
> 时间：2012-09-20T08:01:42.910
> 
> 标签：android, android-layout, textview, right-to-left

我想从右到左设置 TextView 方向。
我希望从右到左显示 unicode 字符并右对齐。我将我的文本视图 layout_gravity 和重力设置正确但不起作用

```
<RelativeLayout
    android:layout_width="80dp"
    android:layout_height="wrap_content"
    android:layout_marginTop="-80dp"
    android:layout_marginRight="75dp"  
    android:layout_gravity="right" 
         >
      <Button 
         android:id="@+id/nxtMonth"
         android:layout_width="wrap_content" 
         android:layout_height="wrap_content"
         android:background="@drawable/arrow_top"
         android:layout_marginLeft="22dp"
         />
     <ImageView 
         android:layout_width="wrap_content" 
         android:layout_height="wrap_content"
         android:src="@drawable/splite_time_new"
         android:layout_marginTop="24dp"
         android:layout_marginLeft="8dp"
         />
     <LinearLayout 
         android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right" 
        android:gravity="right"
        android:layout_marginRight="12dp"
        android:layout_marginTop="19dp"
     >
     <TextView 
        android:id="@+id/txtMonth"
        android:text="Farvardin"
        android:padding="0dip"
        android:gravity="left"

        android:textStyle="bold"
        android:textColor="#FFFFFF"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        />
     </LinearLayout>
     <ImageView 
         android:layout_width="wrap_content" 
         android:layout_height="wrap_content"
         android:src="@drawable/splite_time_new"
         android:layout_marginTop="50dp"
         android:layout_marginLeft="8dp"
         />
     <Button 
         android:id="@+id/prvMonth"
         android:layout_width="wrap_content" 
         android:layout_height="wrap_content"
         android:background="@drawable/arrow_down"
         android:layout_marginTop="60dp"
         android:layout_marginLeft="22dp"
         />
 </RelativeLayout> 
```

来自任何帮助我的人的thanx 我真的需要这个，但我无法设置

编辑：最后我使用这个代码和这个工作

```
 <RelativeLayout
        android:layout_width="70dp"
        android:layout_height="100dp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" >

        <Button
            android:id="@+id/nxtMonth"
            android:layout_width="25dp"
            android:layout_height="20dp"
            android:layout_centerHorizontal="true"
            android:background="@drawable/arrow_top" />

        <View
            android:layout_width="60dp"
            android:layout_height="1dip"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="30dp"
            android:background="@drawable/divider_gradient" />

        <View
            android:layout_width="60dp"
            android:layout_height="1dip"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="70dp"
            android:background="@drawable/divider_gradient" />

        <TextView
            android:id="@+id/txtMonth"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:gravity="right"
            android:text="Mehr"
            android:textColor="#FFFFFF" />

        <Button
            android:id="@+id/prvMonth"
            android:layout_width="25dp"
            android:layout_height="20dp"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:background="@drawable/arrow_down" />
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:37:42.237

请参阅以下链接，他们正在讨论“希伯来语”文本。但我希望它会帮助你，[从右到左](https://stackoverflow.com/questions/6302221/android-setting-problem-with-textview-for-hebrew-text)

# facebook - 自定义 FB like 按钮

> ID：12508378
> 
> 赞同：1
> 
> 时间：2012-09-18T06:18:32.130
> 
> 标签：facebook

我正在尝试配置一个类似于 facebook 页面的新转换按钮。我找到了一些执行此操作的代码，但我无法弄清楚最后一步。这是代码：

```
<style type="text/css">
#facebook_like_button_holder {
position:relative;
width:291px;
height: 74px;
color:#fff;
background: url('http://slingshotyou.com/wp-content/uploads/2012/09/cro.png');  
}

#facebook_like_button_holder iframe {
position:absolute;
top: 0px;
width: 291px !important;
}

#fake_facebook_button {
pointer-events: none;
display: none;
position:absolute;
width:291px;
height: 74px;
left:0;
top:0;
background: url('http://slingshotyou.com/wp-content/uploads/2012/09/cro.png');  
}

</style>

<div id="facebook_like_button_holder">
<fb:like href="http://www.slingshotyou.com/" layout="button_count" show_faces="false"  width="450" action="recommend"></fb:like>

<div id="fake_facebook_button"></div>
</div>

<script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>

<script type="text/javascript">
FB.Event.subscribe('edge.create', function(response) {
window.location = "http://www.google.com/";
});

</script> 
```

基本上，我想要的只是让“100 次免费转换”按钮起到点赞按钮的作用，并且我希望点赞按钮不可见。

有什么帮助吗？这是我正在测试它的页面的链接[http://slingshotyou.com/bryants-experiment](http://slingshotyou.com/bryants-experiment)

# jquery - getJSON Google 距离矩阵 API - 语法错误

> ID：12508380
> 
> 赞同：6
> 
> 时间：2012-09-20T08:01:48.043
> 
> 标签：jquery, google-maps-api-3, coffeescript, getjson

我正在使用 CoffeeScript 执行`getJSON`请求：

```
$.getJSON(
    "http://maps.googleapis.com/maps/api/distancematrix/json?callback=?"
    origins: origin
    destinations: destinations
    sensor: false
    success: (data) -> 
        console.log data
   error: (data) ->
        console.log data
  'json'
) 
```

网址是：

```
http://maps.googleapis.com/maps/api/distancematrix/json?callback=?&origins=-25.8350643,28.1636066&destinations=-25.551836,%2028.423075|-25.218503,%2027.923075|&sensor=false 
```

如果你把它放在你的浏览器中，它会返回 JSON，但是 ajax 请求只是告诉我：

```
Uncaught SyntaxError: Unexpected token: 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-25T23:38:06.843

该端点不支持 (JSONP) 回调。
你应该按照谷歌的方式去做：

```
 var distanceService = new google.maps.DistanceMatrixService();
    distanceService.getDistanceMatrix({
        origins: ['Istanbul, Turkey'],
        destinations: ['Ankara, Turkey'],
        travelMode: google.maps.TravelMode.DRIVING,
        unitSystem: google.maps.UnitSystem.METRIC,
        durationInTraffic: true,
        avoidHighways: false,
        avoidTolls: false
    },
    function (response, status) {
        if (status !== google.maps.DistanceMatrixStatus.OK) {
            console.log('Error:', status);
        } else {
            console.log(response);
        }
    }); 
```

请参阅[此处的文档](https://developers.google.com/maps/documentation/javascript/distancematrix)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T11:51:13.267

切勿直接从客户端代码调用 Google 地图网络服务*。不支持简单的 JSONP（即带有“回调”的 json）。

您需要使用距离矩阵服务作为 Google Maps Javascript API [https://developers.google.com/maps/documentation/javascript/services#distance_matrix的一部分](https://developers.google.com/maps/documentation/javascript/services#distance_matrix)

*   Web 服务用于访问 Javascript API 无法运行的 API - 即在服务器中。

# android - 与另一个应用程序集成

> ID：12508385
> 
> 赞同：1
> 
> 时间：2012-09-20T08:02:17.813
> 
> 标签：android

我想将一个应用程序（让我们称之为 app1）集成到另一个应用程序（app2）中，该应用程序将通过单击按钮调用 app1。在不将 app1 的源代码暴露给 app2 的情况下，有哪些可能的方法来实现这一点。app1 不应该作为单独的应用程序安装，它应该是 app1 的一部分。

我正在考虑以某种方式将 app1 转换为 jar 文件并将其集成到 app2 中，这可能吗？或者建议我一些方法来实现上述要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:12:48.037

如果应用程序 1 具有 android 资源文件（布局、xml 可绘制对象等）和 jar 依赖项，则无法避免暴露它们。

如果您愿意公开您的资源和外部 jar，您可以：

1.  将 app1 更改为 android 库。
2.  使用与 app1 相同的资源和 jars（不包括源代码）创建另一个库项目。
3.  将生成的jar文件从app1库项目bin文件夹复制到秒库项目libs文件夹中。

最终结果是一个没有 java 源文件但有资源的库项目，这个库项目可以在应用程序 B 中使用，而不会暴露你的 java 文件。

请注意，可能需要对 app1 进行一些重构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T21:42:48.737

据我了解，您的问题 app1 不是您的问题，但您想在您的应用程序 (app2) 中使用它的功能。如果是这种情况，那么您必须遵循 Android 的应用程序间通信规则，即 Intent。如果 app1 是一个通用实用程序应用程序（如条形码阅读器或图片编辑器等），那么您（作为开发人员）将熟知它们所需的意图，并且您可以毫无问题地使用它们。

现在，如果用户设备中没有安装 app1，您可以随时检查并提示用户安装它。此外，如果 app1 的许可政策没有问题，您可以将其 apk 与您的应用程序一起分发，并将其安装在用户的设备上。

这是一个检查应用程序是否已安装的代码示例（实际上它检查它是否可以启动，因此已安装）：

```
public static boolean isAppInstalled(Context cx, String packagename) {
    PackageManager pm = cx.getPackageManager();
    Intent i = pm.getLaunchIntentForPackage(packagename);
    return (i != null);
} 
```

至于提示用户下载安装可以从[这里开始](http://developer.android.com/distribute/googleplay/promote/linking.html#OpeningDetails)

如果您从应用程序中分发 apk，您可以在[此处](https://stackoverflow.com/questions/4967669/android-install-apk-programmatically)查看如何启动它。

最后，关于将 apk 转换为 jar，我不知道这是否可行，但如果可行，那将是某种 hack，这不是创建应用程序的最佳实践。另一方面，有许多免费的 android 库（jar 文件），它们涵盖了非常广泛的功能领域，您可以很容易地将它们集成到您的应用程序中。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:03:13.723

在我看来，意图系统正是您正在寻找的 - android 意图是为应用程序间通信而设计的 - 这是在其他已安装的应用程序中访问各种功能的标准方法（例如，它是您发送图像作为电子邮件或分享到面子书或在安装的图库软件中显示）。

意图系统允许两种方式的数据传递并且是安静的字符串。根据您选择发布此界面的交互的确切性质，以便其他应用程序可以以相同的方式与您交互。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T23:19:24.857

我认为图书馆项目是您寻求的答案。

您应该将 App1 项目设置为库项目：右键单击 Eclipse 中的项目 -> 属性 -> Android -> 检查 isLibrary。

在您的 APp2 项目中执行以下操作：右键单击 Eclipse 中的项目 -> 属性 -> Android -> 添加 -> 选择 App1。

现在您可以使用 App2 项目中 App1 中定义的任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T03:37:57.890

在阅读了您的原始问题和您提供的答复后，为了进一步了解您的要求，不可能完成您想要的。事实上，这是设计使然。

正如其他人所提到的，Android 提供了一种通过意图进行应用程序间通信的特定方法，这显然不适合您。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T03:58:28.630

我认为它类似于插件。可以为您的应用程序提供插件架构。这些链接应该可以帮助您：

*   [http://mylifewithandroid.blogspot.com/2010/06/plugins.html](http://mylifewithandroid.blogspot.com/2010/06/plugins.html)
*   [http://mylifewithandroid.blogspot.com/2011/01/plugins-with-user-interface.html](http://mylifewithandroid.blogspot.com/2011/01/plugins-with-user-interface.html)

# php - mysqli准备好的语句，如何循环结果集

> ID：12508389
> 
> 赞同：8
> 
> 时间：2012-09-20T08:02:31.650
> 
> 标签：php, mysql, prepared-statement, sql-injection

我正在研究 mysqli 准备好的语句，我有 2 个问题。

当我阅读时，我发现准备好的语句的执行顺序如下所示：

```
$sql = 'SELECT image_id, filename, caption FROM images WHERE image_id = ?';

// connect to the database
$conn = ....

$stmt = $conn->stmt_init();

$stmt->prepare($sql);

$stmt->bind_param('i', $id);

$stmt->execute();

$stmt->bind_result($image_id, $filename, $caption);

// optional: get total of records in the result set
$stmt->store_result();
$numRows = $stmt->num_rows;

// loop through the result set
while ($stmt->fetch()) {
    // code goes here...
}

or 

// fetch the result for one record
$stmt->fetch()

// free & close
$stmt->free_result();
$stmt->close;

$conn->close(); 
```

这是我的第一个问题：

在我阅读时，它还提到了以下内容：

如果您不将结果绑定到变量，请使用 $row = $stmt->fetch()，并将每个变量作为 $row['column_name'] 访问。所以，

使用这两种方法中的任何一种来循环结果集是否有任何优点/缺点？如果没有区别，那么为什么要首先使用 $stmt->bind_result 绑定结果呢？如果我可以改用 $row = $stmt->fetch() 有什么意义？

这是我的另一个问题：

*   $stmt->free_result(); 究竟释放了什么？prepare() 或 store_result() 还是？
*   $stmt->关闭；我到底在关闭什么？stmt_init() 或 prepare() 还是其他？

希望你的回答能让我更好地理解准备好的陈述，这样我就可以建立一些安全的东西......

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T08:15:22.583

*   $stmt->free_result() 就像名字所说的那样：它释放与结果相关的内存。

*   $stmt->close 关闭语句句柄（实际上是光标），使其无法（再次）循环遍历结果集。

尽管[手册](http://php.net/manual/en/mysqli-result.free.php)声明：“当不再需要结果对象时，您应该始终使用 mysqli_free_result() 释放结果”，但通常的做法是不要使用 free_result 并关闭语句。关闭后，您不能再使用结果集，也不能重用它，当 php 死机时，无论如何都会释放内存。

# php - PHP 从窗帘后面打印 /f

> ID：12508396
> 
> 赞同：1
> 
> 时间：2012-09-20T08:03:01.043
> 
> 标签：php, zend-framework, zend-mail, pchart

我有一个旧网站，它生成 PDF 报告并通过电子邮件发送。它使用 Zend_Mail、pChart 和 Zend_Pdf。我已经注意到 PHP 会在其中某处打印出 /f ，但它几乎不可见，因为新的浏览器选项卡只会显示 PDF 报告在途中某处失败的情况。然后我会坐在只有 /f 作为输出。这让人以为它只在出现错误时出现。

当我使用 CLI 运行整个生成邮件过程时，这成为一个“问题”。当我这样做时会发生这种情况：

```
$instance = new $aClassName(); 
```

它也只在我第一次这样做时发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:56:31.757

我终于发现如何在文件开头搜索 /f 并在多个文件中找到它。所以肯定有一些你可能不小心按下的 vim 命令，它插入 /f。

虽然不是我写的，但我知道那个人用 vim 作为编辑器。

# ios - 部署目标与带有 TWTweetComposeViewController 的基础 SDK

> ID：12508401
> 
> 赞同：3
> 
> 时间：2012-09-20T08:03:32.620
> 
> 标签：ios, xcode, ios6

我已将我的基础 SDK 设置为 6.0，并将我的部署目标设置为 6.0。

构建时，出现以下错误。'TWTweetComposeViewController' 已弃用：首先在 iOS 6.0 中弃用

如果我将部署目标降到 5.1，它会毫无错误地编译。由于 TWTweetComposeViewController 是“在 iOS 5.0 及更高版本中可用。”，这似乎与我的预期相反。

我就这样离开它，但我也在使用 Social/Social.h，它仅在 6.0 及更高版本中可用，并且对于 5.1 用户来说容易出错。

这是有问题的代码行：

```
if ([TWTweetComposeViewController canSendTweet]){ 
```

在这件事上绞尽脑汁。我希望这只是我错过的一些晦涩的设置。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T08:19:51.660

TWTweetComposeViewController 已被弃用，因为对于 iOS 6.0，有一个新的框架来处理所有社交交互，称为 Social.framework。在那里，您可以找到通过[SLComposeViewController](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40012205)发布推​​文的类似功能。

要解决 iOS6 的问题，您必须根据您支持的内容进行选择：

*   支持iOS6及以上：使用SLComposeViewController即可。链接框架 Social.framework 并完成它。

*   支持 iOS 5.x 及更高版本：需要更多工作。首先需要检查 SLComposeViewController 是否存在（所以你在 iOS 6.0 中），然后使用它并呈现它，否则对于旧 iOS 使用 TWTweetComposeViewController。您还需要将框架 Social.framework 作为可选链接。

附带说明，如果您仅支持 iOS 6，则可以使用相同的控制器免费发布到 facebook，因此也可以考虑使用 facebook 集成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T05:05:50.990

使用社交框架中包含的 SLComposeViewController 代替 TWTweetComposeViewController

```
- (IBAction)SendTweet:(id)sender {
   if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
 {
    mySLComposerSheet = [SLComposeViewController         composeViewControllerForServiceType:SLServiceTypeTwitter];
    [mySLComposerSheet setInitialText:[NSString stringWithFormat:@" THIS IS AN EXAMPLE",mySLComposerSheet.serviceType]];
    [mySLComposerSheet addImage:[UIImage imageNamed:@"image.png"]];
    [mySLComposerSheet addURL:[NSURL URLWithString:@"http://www.StackOverflow.com/"]];
    [self presentViewController:mySLComposerSheet animated:YES completion:nil];
  }
   [mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
    NSLog(@"dfsdf");
    NSString *output;
    switch (result) {
        case SLComposeViewControllerResultCancelled:
            output = @"ACtionCancelled";
            break;
        case SLComposeViewControllerResultDone:
            output = @"Post Successfull";
            [self dismissViewControllerAnimated:YES completion:nil];
            break;
        default:
            break;
    }
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Twitter Message" message:output delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
}];
} 
```

# javascript - jQuery，如何为覆盖不透明度设置动画，背景中有图像

> ID：12508402
> 
> 赞同：0
> 
> 时间：2012-09-20T08:03:35.340
> 
> 标签：javascript, jquery, html

当您悬停元素时，我正在尝试使用不透明度为叠加层设置动画，但是它不起作用。没有动画我可以很容易地做到这一点，但我想得到一个淡入淡出的效果。我正在尝试使用 jQuery 来实现这一点。

当图像悬停时，我希望叠加层不可见。

看看下面的jsfiddle-example：

[http://jsfiddle.net/jem2M/1/](http://jsfiddle.net/jem2M/1/)

我一直在寻找示例，但其中大多数使用淡入淡出和淡入淡出，我不能使用它，因为元素应该始终可见，只有不透明度应该在悬停时改变。

**已解决：** 忘记附上选择器。工作示例：http: [//jsfiddle.net/jem2M/4/](http://jsfiddle.net/jem2M/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:06:34.473

`$('.bghover #background img')`- 您忘记（两次）将您的选择器括在引号中。

小提琴示例：http: [//jsfiddle.net/jem2M/4/](http://jsfiddle.net/jem2M/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:48:58.900

我刚刚打开[http://jsfiddle.net/jem2M/4/](http://jsfiddle.net/jem2M/4/)（使用我的 chrome 21），它工作正常。当您将鼠标悬停在图像上时，它会将不透明度设置为 1 ，当鼠标移出时，不透明度将修改为 0.75

# python - 调用没有事件的函数

> ID：12508403
> 
> 赞同：-3
> 
> 时间：2012-09-20T08:03:36.733
> 
> 标签：python

我是 wxpython 的新手，我希望有一个简单的单行方法来解决这个问题：我已经定义了一些函数：

```
def function1:
    do something
    execute function2

def function2:
    do something else 
```

我想知道如何在不等待事件的情况下调用函数 2（“执行函数 2”）。只需在 function1 的末尾调用 function2。

编辑：最后这有效：

```
def function1():
    #do something
    self.function2()

def function2(self):
    #do something else 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:06:28.340

你只需要在最后调用它：

```
def function1():
    # do something
    function2()

def function2():
    # do something else 
```

此外，您可能已经注意到，您的函数定义不正确 - 您应该在函数名称的末尾放置括号（定义时），即使它不接受任何参数。

# knockout.js - 使用包含前缀的 knockoutjs 设置 id 属性

> ID：12508404
> 
> 赞同：79
> 
> 时间：2012-09-20T08:03:37.540
> 
> 标签：knockout.js, knockout-2.0

我正在使用 KnockoutJS 迭代一个对象，如下所示：

现在这一切都有效。但我遇到的问题是它设置的`id`只是`button`一个数字。所以它看起来像这样：

```
<button id="1">Button 1</button>
<button id="3">Button 2</button>
<button id="8">Button 3</button> 
```

所以我试图在“Id”属性前面加上一个前缀，如下所示：

```
<div data-bind="foreach:Items">
    <button data-bind="text: Name, attr: {'id': 'myprefix_' + Id}"></button>
</div> 
```

但这似乎不起作用。当我这样做时，我`id`会充满一些 Knockout 可观察的功能......

`id`所以我的问题是，当我指定字段的属性时如何添加前缀？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-12-19T01:13:52.703

今天实际上使用了这个 - 解开我必须做的观察者：

```
<button data-bind="attr: { id: 'prefix_' + $index() }"> Send </button> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-09-20T08:23:38.157

如果`Id`是可观察的，则必须“解包”它：`'myprefix_' + Id()`.

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-11-14T19:32:17.137

我认为最好使用 $index 例如

```
<div data-bind="foreach:Items">
    <button data-bind="text: Name, attr: {id: 'myprefix_' + $index() }"></button>
</div> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-19T09:23:38.677

```
 <img data-bind="event: {click: $root.afficherDetailmembreFamille}" src="ucc/gestion_Famille/images/arbre-fleche-off.png" />

          <label data-bind=" text: nom"></label>
          <label data-bind=" text: prenom, click: $root.afficherDetailmembreFamille"></label>
  <br>

   <div data-bind="attr: {'id': 'DivMembreFamille'+id}" style="margin-left: 40px; display: none;"> 
```

# wpf - 控制 ScrollViewer 的垂直滚动条高度

> ID：12508405
> 
> 赞同：0
> 
> 时间：2012-09-20T08:03:38.220
> 
> 标签：wpf, size, scrollviewer, vertical-scrolling

我需要使垂直滚动条稍微低一点（更短），因为我需要一个小按钮的空间。该按钮将悬停在右上角的 ScrollViewer 上。我想避免将滚动条从 ScrollViewer 中分离出来，只是为了在那里添加我的按钮。

这是一个标准的 WPF ScrollViewer

```
 <ScrollViewer Name="Scroller" CanContentScroll="True" VerticalScrollBarVisibility="Auto"  Height="{Binding ElementName=OuterContainer, Path=ActualHeight}" Width="{Binding ElementName=OuterContainer, Path=ActualWidth}">
            <Grid Name="Container" Margin="5,5,5,5"> 
            </Grid>
</ScrollViewer> 
```

有什么方法可以设置样式（或 C# 代码）一些 hack 来释放垂直滚动条上方的一些空间（我猜应该是上边距）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:45:13.420

我会更改 ScrollViewers 样式。根据 MSDN 库[http://msdn.microsoft.com/en-us/library/aa970847.aspx](http://msdn.microsoft.com/en-us/library/aa970847.aspx)默认样式是

```
<Style x:Key="LeftScrollViewer"
   TargetType="{x:Type ScrollViewer}">
  <Setter Property="OverridesDefaultStyle"
      Value="True" />
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type ScrollViewer}">
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition />
          </Grid.ColumnDefinitions>
          <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="Auto" />
          </Grid.RowDefinitions>
          <Border Grid.Column="1"
                BorderThickness="0,1,1,1">
            <Border.BorderBrush>
              <SolidColorBrush Color="{DynamicResource BorderMediumColor}" />
            </Border.BorderBrush>
            <ScrollContentPresenter />
          </Border>
          <ScrollBar x:Name="PART_VerticalScrollBar"
                   Value="{TemplateBinding VerticalOffset}"
                   Maximum="{TemplateBinding ScrollableHeight}"
                   ViewportSize="{TemplateBinding ViewportHeight}"
                   Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>
          <ScrollBar x:Name="PART_HorizontalScrollBar"
                   Orientation="Horizontal"
                   Grid.Row="1"
                   Grid.Column="1"
                   Value="{TemplateBinding HorizontalOffset}"
                   Maximum="{TemplateBinding ScrollableWidth}"
                   ViewportSize="{TemplateBinding ViewportWidth}"
                   Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
        </Grid>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

所以你可以将垂直滚动条替换为

```
<ScrollBar x:Name="PART_VerticalScrollBar"
                   Value="{TemplateBinding VerticalOffset}"
                   Maximum="{TemplateBinding ScrollableHeight}"
                   ViewportSize="{TemplateBinding ViewportHeight}"
                   Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                     **Margin="0,12,0,0"**/> 
```

# javascript - 创建具有动态宽度的不均匀列

> ID：12508408
> 
> 赞同：-1
> 
> 时间：2012-09-20T08:03:47.690
> 
> 标签：javascript, css, html

我正在尝试创建 3 个作为列执行的 div。

左边应该粘在左边并且是 175px。右边应该坚持右边并且是 175px。中间应该是剩余宽度的 100%。(100%-(175px-175px))

这段代码不起作用，我不知道为什么。我觉得这一切都是正确的，但我无法弄清楚。

我试过javascript调整大小，你怎么看？

```
 <script type="text/javascript">
$(function() {
   var newwidth = $(window).width() - 350;
   $("main_middle").css({width: newwidth+'px'});
});

$(window).resize(function() {
   var newwidth = $(window).width() - 350;
   $("main_middle").css({width: newwidth+'px'});
});
</script>

<div style="width:100%;height:100%;position:relative;margin:auto;">

<div style="position:fixed;width:175px;height:100%;margin-left:0;background-color:#222;">
</div>

<div id="main_middle" name="main_middle" style="float:left;position:absolute;height:100%;margin-left:175px;margin-top:38px;background-color:white;border-left:1px solid #A9A9A9;top:0px;left:0px;margin-right:200px;">
</div>

<div style="float:right;right:0px;position:relative;border-left:1px solid #A9A9A9;height:100%;background-color:white;margin-top:38px;width:200px;">
</div>

</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:06:31.737

我不知道它是否是错字，但您在 JQuery 调用中缺少 #

```
$("main_middle") 
```

应该

```
$("#main_middle") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:09:00.347

检查此代码并将其与您所拥有的进行比较

```
<body>
<div id="header">
    <h1>Header</h1>
</div>
<div id="left">
    Port side text...
</div>
<div id="right">
    Starboard side text...
</div>
<div id="middle">
    Middle column text...
</div>
<div id="footer">
    Footer text...
</div>
</body> 
```

这是CSS代码：

```
body {
    margin: 0px;
    padding: 0px;
}
div#header {
    clear: both;
    height: 50px;
    background-color: aqua;
    padding: 1px;
}
div#left {
    float: left;
    width: 150px;
    background-color: red;
}
div#right {
    float: right;
    width: 150px;
    background-color: green;
}
div#middle {
    padding: 0px 160px 5px 160px;
    margin: 0px;
    background-color: silver;
}
div#footer {
    clear: both;
    background-color: yellow;
} 
```

我认为您不需要为此使用javascript。

# ruby-on-rails - 关于策略模式和 Rails

> ID：12508414
> 
> 赞同：2
> 
> 时间：2012-09-20T08:04:15.177
> 
> 标签：ruby-on-rails, ruby, strategy-pattern

我想在我的应用程序中加入**策略模式**。

我在**lib**下存储了以下类。

```
class Network
  def search
    raise "NO"
  end

  def w_read
    raise "NO"
  end
  #...
end 
```

和

```
class FacebookClass < Network
  def search
    # FacebookClass specific...
  end

  def w_read
    raise OneError.new("...")
  end
end 
```

和

```
class TwitterClass < Network
  def search
    # TwitterClass specific...
  end

  def w_read
    # TwitterClass specific...
  end

  def write
    # TwitterClass specific...
  end
end 
```

现在我想从**app/model/network_searcher.rb调用****TwitterClass**的方法**search**。我怎样才能做到这一点？我在这里成功实施了**策略模式吗？**

 ******* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T11:26:12.910

[按照维基百科](http://en.wikipedia.org/wiki/Strategy_pattern#Example)中的例子，我认为你`app/model/network_searcher`应该是这样的

```
class NetworkSearcher
  def initialize(search_class)
    @search_class = search_class
  end

  def search_social
    @search_class.search
  end

  def w_read_social
    @search_class.w_read
  end

  def write_social
    @search_class.write
  end
end 
```

然后在控制器或你想调用它的地方，你可以这样调用：

```
search_class = TwitterClass.new # or FacebookClass.new
network_searcher = NetworkSearch.new(search_class)
network_searcher.search_social # or network_searcher.w_read_social or network_searcher.write_social 
```

此外，如果您将这些类保存在 lib 中，对于 Rails 3，为了自动加载这些类，您需要将此行添加到`config/application.rb`

```
config.autoload_paths += %W(#{config.root}/lib) 
```

并遵循 Rails 中文件名的命名约定（例如`TwitterClass`应该命名`twitter_class.rb`）。否则，无论您在何处使用这些类，都必须要求这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:35:34.520

[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)用于允许在运行时选择要使用的算法。如果没有更多细节，很难说这是否适合您的问题。假设您需要的是一种在模型上设置搜索的方法，然后您可以在模型的其他地方使用选定的算法。例如

```
class TheInformation
  attr_writer :searcher

  def other_method
    ..
    # can use the selected searcher here
    @searcher.search
    ..
  end
end 
```

这有帮助吗？******

# r - is.logical 和 is.factor 在应用中的意外行为

> ID：12508416
> 
> 赞同：4
> 
> 时间：2012-09-20T08:04:16.993
> 
> 标签：r, apply, type-conversion

最近，我对以下事实感到惊讶，`is.logical`并且`is.factor`无法开箱即用`apply`——至少他们没有提供正确的结果。

这是我的小可复制示例：

```
# generate a dataset that contains a couple of modes
someDf <- data.frame(fac1=gl(2,3,12),
                 int=1:12,
                 char=letters[1:12],
                 logi=rep(c(T,F),6),
                 fac2=gl(3,2,12))

# hooray, this did work, got factors, int,
# characters and logical
str(someDf)

# I expected this to work, but it didn't
# everything is just FALSE
apply(someDf,2,is.logical) 
```

我没有放弃，并找到了一个偷偷摸摸的方法。

```
unlist(lapply(names(someDf),function(x) is.logical(someDf[,x]))) 
```

虽然这提供了正确的结果，但我想知道为什么它必须如此复杂，以及是否有更简单的解决方案。有任何想法吗？

提示：我已经看到了

```
apply(someDf,2,class) 
```

提供所有`characters`。这也是意料之外的。也许有些东西`eval`可以解决我找不到的窍门。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T08:15:36.717

由于 data.frame 是 a `list`，您应该使用`lapply`or `sapply`：

```
sapply(someDf, is.logical)
 fac1   int  char  logi  fac2 
FALSE FALSE FALSE  TRUE FALSE 
```

您的代码不起作用的原因是因为`apply`需要一个矩阵作为其参数，并且如果您提供一个数据框，则强制转换为一个矩阵。由于矩阵只能包含单个类的元素，因此您的值将转换为`character`. 试试看：

```
as.matrix(someDf)
      fac1 int  char logi    fac2
 [1,] "1"  " 1" "a"  " TRUE" "1" 
 [2,] "1"  " 2" "b"  "FALSE" "1" 
 [3,] "1"  " 3" "c"  " TRUE" "2" 
 [4,] "2"  " 4" "d"  "FALSE" "2" 
 [5,] "2"  " 5" "e"  " TRUE" "3" 
 [6,] "2"  " 6" "f"  "FALSE" "3" 
 [7,] "1"  " 7" "g"  " TRUE" "1" 
 [8,] "1"  " 8" "h"  "FALSE" "1" 
 [9,] "1"  " 9" "i"  " TRUE" "2" 
[10,] "2"  "10" "j"  "FALSE" "2" 
[11,] "2"  "11" "k"  " TRUE" "3" 
[12,] "2"  "12" "l"  "FALSE" "3" 
```

# xml - HTML 开始时查询意外结束？

> ID：12508418
> 
> 赞同：2
> 
> 时间：2012-09-20T08:04:33.813
> 
> 标签：xml, xml-parsing, syntax-error, xquery

我正在执行一个没有 HTML 的查询，但是当我添加 HTML 时，可以更好地组织结果。当我添加`<div>`和`</div>`标签时，我得到一个错误（见下文）。这是查询：

```
let $doc := doc('test')  
for $v in $doc//item 
where $v/product_info/unit[.='9291']
return 
  <div>{ $v/seller_info/seller_company_id[position() lt 2]/text() } 
  </div> 
  <div>{ $v/seller_info/seller_rating[position() lt 3]/text() 
  </div> 
```

在这份文件上：

```
<item>
<item_number>1171270</item_number>
<seller_info>
<seller_company_id>6356</seller_company_id>
<seller_rating>C31</seller_rating>
<seller_rating>T150 hr.</seller_rating>
</seller_info>
<product_info>
<unit>2022</unit>
<sinfo>55 cases</sinfo>
<sinfo>Yu-gi-oh trading card pack</sinfo>
<sinfo>.45kg per unit</sinfo>
<sinfo>24.7500kg shipment</sinfo>
</product_info>
<product_info>
<unit>9291</unit>
<sinfo>7 units</sinfo>
<sinfo>Naruto, Classic, action figure</sinfo>
<sinfo>1.8kg per unit</sinfo>
<sinfo>12.6kg shipment</sinfo>
</product_info>
</item> 
```

我得到的错误是：

> 停在第 4 行第 85 列：[XPST0003] 查询意外结束：'>{ $v/seller_in...'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:16:17.413

当您想要返回多个元素时，您必须将它们包装在一个序列中。此外，您忘记了`}`第二个的结束`<div/>`。

```
let $doc := doc('test')  
for $v in $doc//item 
where $v/product_info/unit[.='9291']
return 
(
  <div>{ $v/seller_info/seller_company_id[position() lt 2]/text() } 
  </div>,
  <div>{ $v/seller_info/seller_rating[position() lt 3]/text() }
  </div>
) 
```

# asp.net - 未找到类型或命名空间 部署网站时出错

> ID：12508422
> 
> 赞同：0
> 
> 时间：2012-09-20T08:05:03.503
> 
> 标签：asp.net, sisodb

该网站在本地系统上运行良好，但是当我部署它时，抛出异常：

```
CS0234: The type or namespace name 'ISisoDatabase' does not exist in the namespace 'SisoDb' (are you missing an assembly reference?) ? 
```

顺便说一句，它是一个共享主机。

知道为什么会这样吗？

**编辑**：我使用了 Web Project 而不是 WebSite，这个错误消失了，但是又抛出了另一个异常：

```
Could not load file or assembly 'SisoDb, Version=15.1.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The module was expected to contain an assembly manifest. 
```

**已解决：**问题是我用来上传dll的**ftp客户端。**听起来ftp损坏了dll。当我使用文件管理器添加程序集时，问题就解决了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:32:53.863

问题有时是用于部署文件的**ftp 客户端。它们在上传文件时会损坏文件。**尝试使用文件管理器上传文件。

# sql - Rails SQL 查询优化

> ID：12508424
> 
> 赞同：1
> 
> 时间：2012-09-20T08:05:08.217
> 
> 标签：sql, ruby-on-rails, optimization, join

我的网站上有一个特色部分，其中包含三种类型的特色帖子：普通、大和小。目前我正在三个单独的查询中获取这三种类型，如下所示：

```
@featured_big_first = Post.visible.where(pinged: 1).where('overlay_type =?', :big).limit(1)
@featured_big_first = Post.visible.where(pinged: 1).where('overlay_type =?', :small).limit(1)
@featured_big_first = Post.visible.where(pinged: 1).where('overlay_type =?', :normal).limit(5) 
```

基本上，我正在寻找一个将这三者合二为一并获取 1 个大、1 个小、5 个普通帖子的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:17:03.147

如果您不想要订单，我会感到惊讶。正如你所拥有的，它应该找到一个随机小、随机大和 5 个随机正态。

是的，您可以使用 UNION。但是，您必须执行 SQL。查看三个查询中每一个的 SQL 日志，并执行一个字符串的执行 SQL，该字符串是三个查询中的每一个，中间有 UNION。它可能有效，或者限制可能有问题。

在 SQL 中可以通过将表连接到自身，对表的一个别名进行分组，当另一个别名表 <= 按表分组时，添加一个有子句 where count of the < = 表低于限制。

因此，如果您对 posts 表有一个简单的查询（没有可见和 ping 条件）并且想要最新 created_at 日期的记录，那么正常查询将是：

```
SELECT posts1.*
FROM posts posts1, posts posts2
WHERE posts2.created_at >= posts1.create_at
  AND posts1.overlay_type = 'normal'
  AND posts2.overlay_type = 'normal'
GROUP BY posts1.id
HAVING count(posts2.id) <= 5 
```

使用这条 SQL，并为可见和 pinged 添加条件，记住对帖子 1 和帖子 2 都使用条件。

然后把大版本和小版本写在一起，UNION一下。

我会坚持使用三个数据库调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:40:03.773

我认为这是不可能的，但您可以使用[`scope`](http://ablogaboutcode.com/2011/02/19/scopes-in-rails-3/)哪种更方便的方式来编写代码

此外，它可能只是拼写错误，但您正在重新分配，`@featured_big_first`因此它将仅包含最后一个查询的数据

在 post.rb 中

```
 scope :overlay_type_record lamda{|type| joins(:visible).where(["visible.pinged=1 AND visible.overlay_type =", type])} 
```

并在控制器中

```
@featured_big_first = Post.overlay_type_record(:big).limit(1)
@featured_small_first = Post.overlay_type_record(:small).limit(1)
@featured_normal_first = Post.overlay_type_record(:normal).limit(5) 
```

# javascript - 我的 ajax 调用不会导致我的 .ajaxStop 函数被调用

> ID：12508431
> 
> 赞同：1
> 
> 时间：2012-09-20T08:05:39.293
> 
> 标签：javascript, jquery, ajax

我有以下代码

```
$(document).ready(function () {
    $("html")
        .ajaxStart(function () { 
            $(this).addClass("wait"); 
            })
        .ajaxStop(function () {
            $(this).removeClass("wait"); 
        }); 
});

$.ajax({
    url: url
    })
    .done(onDone)
    .fail(onFail); 
```

执行 ajax 时，它会转到 ajaxStart 并添加类等待。

当 ajax 完成后，它会转到 onDone 函数，但永远不会转到 ajaxStop anonymouns 函数。

有人可以给我一些建议吗？

# android - Android JSON 离线验证

> ID：12508432
> 
> 赞同：0
> 
> 时间：2012-09-20T08:05:52.017
> 
> 标签：android, json, exception, validation

我想验证从服务器获取的一个字符串作为响应。响应必须是有效的 JSON 字符串。有时，当用户通过需要身份验证的网络或发生 PHP 错误时，响应不是有效的 JSON。

Android 解析器 JSONTokener 在解析字符串之前不会验证字符串，因此在这种情况下，应用程序会抛出 JSONException 并强制关闭。

我发现了异常，但应用程序仍在关闭。

我的问题是：是否有任何用于对象和字符串的 JSON 验证器来首先验证它们并避免在格式无效时对其进行解析？

另一个解决方案是检查 string[0] 是否有 "{" 或 "[" 但这个解决方案并不优雅并且会遗漏很多错误。所以我想使用一个完整的 JSON 验证器。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:13:35.937

你在用 GSON 吗？

如果是这样，则库在解析格式错误的 JSON 字符串时引发 JsonSyntaxException

如果您使用的是 android.util.JsonReader，JsonReader 会抛出 MalformedJsonException

# mysql - MySQL 在与自身连接表时获取 DISTINCT ID

> ID：12508435
> 
> 赞同：0
> 
> 时间：2012-09-20T08:06:07.547
> 
> 标签：mysql

我试图自学一些新的东西，并看看 WordPress 构建它的表格以进行修订的方式。

结构（排序）如下：

```
+----+------------+---------------------+------------+-----------------+-------------+
| ID | post_title |      post_date      | post_name  |   post_content  | post_parent |
+----+------------+---------------------+------------+-----------------+-------------+
|  1 | Foo        | 2012-09-20 10:00:00 | Foo        | Bar             |           0 |
|  2 | Arrrrr     | 2012-09-20 10:05:00 | Arrrr      | Pirates!        |           0 |
|  3 | Arrrrrr    | 2012-09-20 10:06:00 | revision-1 | Argh pirates    |           2 |
|  4 | Arrrrrr    | 2012-09-20 10:06:00 | revision-2 | Argh piratessss |           2 |
+----+------------+---------------------+------------+-----------------+-------------+ 
```

现在，我想做一个查询，它只给我父行（Foo 和 Arrrr）及其 ID，但带有修改后的内容。

我想出了以下查询：

```
SELECT original.ID, revision.post_title, revision.post_content, revision.post_name FROM wp_posts AS original
INNER JOIN wp_posts AS revision ON original.ID = revision.post_parent
WHERE original.post_status = 'publish'
AND original.post_parent = 0
ORDER BY original.ID, revision.ID DESC 
```

这给了我以下结果：

```
+----+------------+---------------------+------------+-----------------+-------------+
| ID | post_title |      post_date      | post_name  |   post_content  | post_parent |
+----+------------+---------------------+------------+-----------------+-------------+
|  1 | Foo        | 2012-09-20 10:00:00 | Foo        | Bar             |           0 |
|  2 | Arrrrrr    | 2012-09-20 10:06:00 | revision-2 | Argh piratessss |           2 |
|  2 | Arrrrrr    | 2012-09-20 10:06:00 | revision-1 | Argh pirates    |           2 |
|  2 | Arrrrr     | 2012-09-20 10:05:00 | Arrrr      | Pirates!        |           0 |
+----+------------+---------------------+------------+-----------------+-------------+ 
```

但我想进一步减少到：

```
+----+------------+---------------------+------------+-----------------+-------------+
| ID | post_title |      post_date      | post_name  |   post_content  | post_parent |
+----+------------+---------------------+------------+-----------------+-------------+
|  1 | Foo        | 2012-09-20 10:00:00 | Foo        | Bar             |           0 |
|  2 | Arrrrrr    | 2012-09-20 10:06:00 | revision-2 | Argh piratessss |           2 |
+----+------------+---------------------+------------+-----------------+-------------+ 
```

我尝试添加`DISTINCT`到`SELECT`, 并添加，`GROUP BY original.ID`但两者都没有给我想要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:45:19.673

虽然您无法区分一个主题的不同版本，但日期除外，您可以执行以下操作：

```
select * from wp_posts p join
                (
                    select max(post_date) as max_dtm, id
                    from wp_posts
                    group by if(post_parent = 0, id, post_parent)
                ) v on p.id = v.id and p.post_date = v.max_dtm; 
```

# objective-c - 如何使用 Theos / Logos 中的 %group 功能？

> ID：12508442
> 
> 赞同：2
> 
> 时间：2012-09-20T08:06:35.573
> 
> 标签：objective-c, ios, xcode, sdk, cydia

听说theos中有%group功能。根据我对此的理解，我猜它是为了在条件设置为真或者当您想要轻松启用或禁用它而不是使用 if() 时应用大量钩子。我说的是真的吗？如果满足条件，我该如何使用此功能？请帮助我，因为我真的需要这个功能，因为我的代码中有很多 if 和 else，使用 %group 而不是所有这些会容易得多！任何意见是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T12:46:36.733

我找到了答案；

1.  你可以`%group thegroupname`在 a 之前使用，`%hook`但记得在`%end`之后放两个。
2.  在你需要的时候`%ctor`可以打电话`%init(thegroupname);`。

希望这对某人有帮助！顺便说一句，该`%init()`功能可以在任何地方使用，甚至在`%hook`.

```
%group MessagesApp

%hook CLASS_TO_HOOK

- (id)FUNC_TO_HOOK {
    return %orig;
}

%end

%end //Don't forget your second end.

%ctor {
    if (TRUE) {
        %init(MessagesApp);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T14:58:19.767

添加答案以进一步澄清，使用如下：

```
%group iOS8
   %hook IOS8_SPECIFIC_CLASS
          // your code here
   %end // end hook
%end // end group ios8

%group iOS9
   %hook IOS9_SPECIFIC_CLASS
          // your code here
   %end // end hook
%end // end group ios9

%ctor {
    if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 9.0) {
        %init(iOS9);
    } else {
        %init(iOS8);
    }
} 
```

# android - android jpeg 压缩已更改（通过提供程序或 cdn）

> ID：12508443
> 
> 赞同：1
> 
> 时间：2012-09-20T08:06:40.153
> 
> 标签：android, download, jpeg, provider, akamai

这很可能与 android 无关，但在我的游戏中，用户可以通过 akamai cdn 下载内容。这很好用，但 jpeg 文件对某些用户来说是用不同的压缩方式交付的。这在某种程度上取决于设备/android 构建版本/提供者/位置（因此是实际的 akamai 节点）。

因为我在下载后进行哈希检查以检查文件是否正确传递，所以我得到了一个被操纵的 jpeg 文件的不同哈希并检测到错误。

我已经更改了下载过程，以便命名所有文件

```
filename_ext.bin 
```

这样 mime 类型将是 application/octet-stream 而不是 mage/jpeg，但它仍然会在中间的某个节点（可能是代理？）检查文件内容并重新压缩 jpeg（以节省 10-20% jpeg 大小的；毕竟，cpu 功率便宜，带宽昂贵）。

有没有人有这种问题的经验？

也许一个解决方案是压缩每个文件并在设备上解压缩（希望改变文件的任何内容都不会再次解压缩/更改 jpeg/zip）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:51:37.163

好的，刚得到 akamai 支持的回答：

“一些提供商安装了​​透明代理，可以动态重新压缩图像图形（jpg 和 gif）——它们还修改 HTML 页面。图像是根据文件签名而不是文件扩展名来识别的。”

所以我实际上必须加密/压缩文件来规避......

还有：http头

```
Cache-Control no-transform 
```

也成功了。

# json - Datasnap RESTful JSON 结果 关于？

> ID：12508446
> 
> 赞同：1
> 
> 时间：2012-09-20T08:06:50.183
> 
> 标签：json, rest, datasnap

我有一个 TDataset JSON 辅助函数。

**我想结果返回以下内容：**

```
{"result":[{"rid":"2","firstname":"veli","lastname":"deli"},{"rid":"1","firstname":"ismail","lastname":"kocacan"}]} 
```

但是。不起作用。返回以下内容：

```
{"result":[[{"rid":"2","firstname":"veli","lastname":"deli"},{"rid":"1","firstname":"ismail","lastname":"kocacan"}]]} 
```

我想删除多余的 [ 字符...

如何提取这些数据并返回？

```
{"rid":"2","firstname":"veli","lastname":"deli"},{"rid":"1","firstname":"ismail","lastname":"kocacan"} 
```

我的 TDataset JSON 助手函数：

```
 TDatasetJSONHelper = class helper for TDataset
  public
    function ToJSONData: TJSONArray;
    function ToJSONDataWrapper: TJSONValue;
  end;

function TDatasetJSONHelper.ToJSONData: TJSONArray;
var
  jso: TJSONObject;
  jsa: TJSONArray;
  jsp: TJsonPair;
  J: Integer;
  avalue: TJSONValue;
begin
  Self.Close;
  Self.Open;
  jsa := TJSONArray.Create();
  while not Self.Eof do
  begin
    jso := TJSONObject.Create();
    for J := 0 to FieldCount - 1 do
      jso.AddPair(TJsonPair.Create(Fields[J].DisplayName, Fields[J].Value));
    jsa.AddElement(jso);
    Self.Next;
  end;
  Self.Close;
  Result := jsa;
end;

function TDatasetJSONHelper.ToJSONDataWrapper: TJSONValue;
var
  aJSON: TJSONObject;
  apair: TJsonPair;
  avalue: TJSONValue;
begin
  aJSON := TJSONObject.ParseJSONValue
    (TEncoding.ASCII.GetBytes
    ('{"result":[[{"rid":"2","firstname":"veli","lastname":"deli"},{"rid":"1","firstname":"ismail","lastname":"kocacan"}]]}'),
    0) as TJSONObject;

  apair := aJSON.Get(0);
  avalue := apair.JsonValue;

  // ??? avalue := '{"rid":"2","firstname":"veli","lastname":"deli"},{"rid":"1","firstname":"ismail","lastname":"kocacan"}';
  Result := avalue;
end;

function TServerMethods1.GetPersonList: TJSONArray;
begin
  Result := dm.AdoQuery1.ToJSONData;
end;

function TServerMethods1.GetPersonList2: TJSONValue;
begin
  Result := dm.AdoQuery1.ToJSONDataWrapper;
end; 
```

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-05T11:26:47.423

GetInvocationMetadata().ResponseCode := 200;

GetInvocationMetadata().ResponseContent := '{"rid":"2","firstname":"veli","lastname":"deli"},{"rid":"1","firstname":"ismail" ,"姓氏":"kocacan"}';

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-18T10:52:23.767

仅供参考，我们在我们的开源存储库中添加了更完整和更快的功能。

它是我们的*mORMot*框架的一部分，但可以用作独立单元，不与其他功能绑定。

参见[SynVirtualDataSet.pas](http://synopse.info/fossil/finfo?name=SynVirtualDataset.pas)：

```
function DataSetToJSON(Data: TDataSet): RawUTF8 
```

请参阅[此提交](http://synopse.info/fossil/info/3c2a6e082a)和[相关的论坛主题](http://synopse.info/forum/viewtopic.php?pid=10041#p10041)。

# c++ - 如何在 Ubuntu 中使用 Eclipse CDT 调试 C++ 静态库？

> ID：12508448
> 
> 赞同：0
> 
> 时间：2012-09-20T08:06:52.717
> 
> 标签：c++, eclipse, debugging, static-libraries

我正在使用 Eclicpse 开发一个由我经常使用的函数组成的静态库。我已经在我的工作区中创建了一个“C++ -> 静态库”项目。

在同一个工作区中，我创建了另一个项目“Test”，用于测试我的功能是否按预期工作。我已将这些库链接到该项目，并且可以在我的代码中使用该库。

我的一个功能有一些问题，我想调试它。如果我在 Eclipse 中对我的测试项目运行“调试”，则我不能“介入”导致问题的函数。

我怎样才能做到这一点？或者，哪种方法可以让我在 Eclipse 中测试和调试我的静态库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:39:02.330

您需要使用调试信息编译静态库。

转到 [Properties] -> [C/C++ Build] -> [Settings] -> [GCC C++ Application] -> [Debugging] 并打开调试并确保构建设置为调试配置。

# java - 在 Java 中刷新 StringWriter 有什么意义？

> ID：12508450
> 
> 赞同：15
> 
> 时间：2012-09-20T08:06:54.320
> 
> 标签：java

StringWriter 有一个[刷新](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/StringWriter.html#flush%28%29)功能。刷新字符串缓冲区是什么意思？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T08:10:33.403

它必须有一个实现，`flush()`因为在它的超类`Writer`中这是一个抽象方法，而`StringWriter`不是一个抽象类。但是，如果您查看JDK 安装目录`StringWriter.flush()`中的文件中的源代码，您会看到：`src.zip`

```
/**
 * Flush the stream.
 */
public void flush() {
} 
```

换句话说，它什么都不做。（当然还有其他子类`Writer`where`flush()`确实有用）。

实现此方法的人可能已经证明它没有做任何事情，但他们没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T08:09:50.197

通常，刷新会强制缓冲区将其内容写入目标，例如将字节写入硬盘上的文件。

# caching - Plone 4.2 如何让PAS缓存外部用户数据

> ID：12508456
> 
> 赞同：1
> 
> 时间：2012-09-20T08:07:11.273
> 
> 标签：caching, persistence, plone

我正在实现一个处理针对邮件服务器的身份验证的 PAS 插件。实际上只实现了 DBMail。

我意识到，`enumerateUsers`每个请求都会多次调用 PAS 插件中的函数，并且需要我的插件为每个（后续）请求打开/关闭 SQL 连接。当然，这是非常昂贵的。

连接本身在一个 plone 工具中处理，该工具能够处理多个不同的邮件服务器并将`enumerateUsers`调用委托给代表已注册服务器的包装器对象。

我现在的问题是，我应该使用哪种缓存（OOBTree、Session？）来为重复枚举提供临时本地存储并避免后续的 SQL 连接？

另一个想法是，挂钩到第一次登录时发生的用户创建过程，外部用户发出问题并完全“本地化”用户。

第三个想法是，如果可能的话，将所需的数据存储在特定的成员中。

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T09:06:08.247

确实，我会缓存查询结果。您需要决定将结果缓存*多长时间*，如果长期存储，如何使缓存无效或检查更改。

这些决策没有*最佳实践*，因为它们完全取决于存储的数据类型和后端的 API。例如，如果它们支持某种新鲜度查询，那么您将永远存储所有内容并轮询后端以查看缓存是否需要更新。

你可以从一个简单的请求缓存开始；每个请求查询一次，将其存储*在*请求对象上。随着请求对象被清理，您的缓存将在请求结束时自动失效，下一个请求将是一个干净的状态。

如果您的后端用户很少更改，您可以在本地缓存中缓存更长时间的信息。我会在插件上使用 volatile 属性。任何以 开头的属性`_v_`都会被持久性机制忽略。因此，存储在`_v_`volatile 属性中的任何内容都是线程本地的，并且仅在进程的生命周期内存在，重新启动服务器会自动清除这些。

至少您应该使用`_v_`volatile 属性来存储您的后端 SQL 连接。这样它们就可以在请求之间保持打开状态，并且可以重复使用。类似以下方法的方法会很好：

```
def _connection(self):
    # Return a backend connection
    if getattr(self, '_v_connection', None) is None:
        # Create connection here
        self._v_connection = yourdatabaseconnection
    return self._v_connection 
```

您还可以在插件上使用持久属性来存储缓存。此缓存将提交给 ZODB 并在重新启动后持续存在。然后，您确实需要弄清楚如何使内容无效；存储时间戳并在旧时驱逐数据等。

您的缓存数据结构完全取决于您的应用程序需求。如果您不保留信息，那么字典（用户名-> 信息）可能就足够了。持久化缓存可以从使用 a`OOBTree`而不是字典中受益，因为它们减少了不同线程之间发生冲突的机会，并且在处理大量数据时效率更高。

无论您做什么，*都不*需要使用 Session。会话容易发生冲突，不能很好地扩展，并且无论如何都不是存储这种缓存的地方。

# apache - DNS 和 apache 重定向

> ID：12508460
> 
> 赞同：1
> 
> 时间：2012-09-20T08:07:26.187
> 
> 标签：apache, dns

我无法清楚地管理我的网站重定向。假设我想创建一个从 www.siteA.com 到 www.siteB.com/content 的不可见重定向。这里有我想要的：

> www.siteA.com --DNS--> www.siteB.com --siteB 上的 Apache --> /wwww/content/siteA/

对于第一部分，我可以在 DNS 级别使用“CNAME”配置来完成。

但是，我想在“www.siteB.com”机器上设置一种 Apache 重写规则，以便**仅当**我们来自 www.siteA.com DNS 请求时才重定向到“/wwww/content/siteA/”。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:14:30.307

你看过 apache 虚拟主机[http://httpd.apache.org/docs/2.2/vhosts/](http://httpd.apache.org/docs/2.2/vhosts/)吗？正如我所理解的那样，它完全符合您的要求 - 至少是第二部分。

# java - XML 中的文件查看代码 (Samsung Galaxy Y)

> ID：12508466
> 
> 赞同：1
> 
> 时间：2012-09-20T08:07:44.783
> 
> 标签：java, android, xml

我正在开发一个 android 应用程序来通过局域网将文件传输到计算机。我已经完成了 XML 布局，但我的选择之一是在手机中打开文件。

有谁知道在我的手机中查看文件的代码？还是有其他方法可以解决它，例如使用手机上已安装的默认文件应用程序？

我基本上需要能够查看文件，以便用户可以选择需要发送哪些文件。

有谁知道这个问题的解决方案？

非常感谢。

# java - Java Swing 默认焦点在框架上

> ID：12508469
> 
> 赞同：4
> 
> 时间：2012-09-20T08:08:04.600
> 
> 标签：java, swing, focus

我现在正在学习 java 和 Swing，并尝试为教育目的开发简单的程序。

所以这就是问题所在。

我的框架上有网格布局和字段，默认文本

```
 accNumberField = new JTextField("0", 10);
    accNumberField.addFocusListener(new FocusListener() {
        int focusCounter = 0;
        @Override
        public void focusGained(FocusEvent arg0) {
            // TODO Auto-generated method stub
            if (focusCounter > 0)
            accNumberField.setText("");
            focusCounter++;
        } 
```

我想要的是，当用户第一次单击字段时，默认文本会消失。所以我添加了焦点监听器并使用了 accNumberField.setText(""); 在 focusGained 方法中。

但问题是，对于我框架中的默认第一个字段，在创建框架时获得焦点。默认文本从一开始就消失了。如您所见，我使用了计数器。但这不是我想要的。

我希望在创建时没有字段会获得焦点，并且每个字段都能够从用户单击其中一个时获得焦点。

对不起，如果我拼写错误。英语不是我的母语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:31:26.100

你有什么理由使用focusListener()吗？为什么不使用 mouseListener() 如下？

```
 accNumberField.addMouseListener(new MouseAdapter()
    {
        @Override
        public void mouseReleased(MouseEvent e)
        {
            accNumberField.setText("");
        }
    }); 
```

如果你想清除第一次点击的文本，你可以简单地使用一个布尔值：

```
 //outside constructor
    private boolean isTextCleared = false;

    //in constructor
    accNumberField.addMouseListener(new MouseAdapter()
    {
        @Override
        public void mouseReleased(MouseEvent e)
        {
            if (!isTextCleared)
            {
                accNumberField.setText("");
                isTextCleared = true;
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T08:38:35.717

找到一个线程，其中包含所需功能的代码示例，[Java JTextField with input hint](https://stackoverflow.com/questions/1738966/java-jtextfield-with-input-hint)。准确地说，您需要提供自己的实现，`JTextField`该实现将在字段中保存“默认文本”，专门为此创建。

对于第二个问题，您可以将焦点设置为 some`button`或`frame`它本身。

# iphone - 首先应该验证什么 - hostReachability 或 netReachability？

> ID：12508472
> 
> 赞同：0
> 
> 时间：2012-09-20T08:08:19.590
> 
> 标签：iphone, ios, host, reachability

在这里，我有一个非常有趣的话题可供讨论，或者您可以说我需要一个更好的方法的建议。

这是我的代码

```
+ (BOOL) isConnected
{
     BOOL flag = TRUE;
     if (![self isHostReachable])
     {
           flag = FALSE;
           NSString* alertTitle= @"";
           NSString* alertMessage= @"";

           if (![self isInternetReachable])
           {
                 alertTitle = @"Network unavailable";
                 alertMessage = @"We can't connect to the Internet. Check your            settings/connection.";
           }
           else
           {
                 alertTitle = @"Server not responding";
                 alertMessage = @"Server not responding at the moment. Please try again later. Sorry for inconvenience";
           }
           UIAlertView *alert=[[UIAlertView alloc] initWithTitle:alertTitle
                                                  message:alertMessage
                                                 delegate:self
                                        cancelButtonTitle:@"Close"
                                        otherButtonTitles:nil];

           [alert show];
     }
     return flag;
}

+ (BOOL) isInternetReachable
{
     Reachability *netReachability = [Reachability reachabilityForInternetConnection];
     NetworkStatus netSat = [netReachability currentReachabilityStatus];
     return (!(netSat == NotReachable));
}

+ (BOOL) isHostReachable
{
     Reachability *hostReachability = [Reachability reachabilityWithHostname:   [Connection returnHostName]];
     NetworkStatus netSat = [hostReachability currentReachabilityStatus];
     return (!(netSat == NotReachable));
} 
```

在我的代码中，我曾经调用“isConnected”方法来检查连接状态，然后再向我的服务器询问数据。

在方法中，我首先检查了hostReachability。我这样做的想法是节省计算时间。

*   如果 hostReachability 返回 true，则表示 netConnectivity 也存在（无需验证）。所以在这里我们只完成了一次计算。
*   如果 hostReachability 返回 false，那么我正在检查它是负责它的网络连接。因此进行了两次计算。

但是通常看到代码先验证netConnectivity，如果没问题，再验证hostReachability。

所以大多数时候两次计算，这与我完成工作的方式形成鲜明对比。

请建议您认为哪种方法更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:40:29.123

好吧，netConnectivity 将验证网络是否就位并且没有由于 100 个原因中的任何一个而关闭，然后验证主机是可访问的，因为服务器可能由于某些问题而关闭。

如果网络被验证为连接失败，它将首先排除验证主机。反之亦然不是真的。我希望这对你有用。干杯！！

# c# - IBM MQ XMS 订阅未关闭

> ID：12508473
> 
> 赞同：2
> 
> 时间：2012-09-20T08:08:23.643
> 
> 标签：c#, ibm-mq

我有一个应用程序，它使用 WebSphere MQ 通过 WebSphere 将数据发送到云中的数据中心。部分功能是，如果服务器端订阅者检测到 30 分钟未收到消息，则线程暂停 5 分钟，并移除连接。当它重新启动时，它会重新连接。

在实践中，我发现断开连接并没有删除订阅。尝试重新连接时，我看到此错误：

“创建订阅时可能会出现问题，因为它被另一个消息使用者使用。请确保使用此订阅的所有消息使用者都已关闭，然后再尝试以相同名称创建新订阅。有关更多信息，请参阅链接的异常。”

这表明消息处理程序仍处于连接状态，这意味着断开连接失败。XmsClient 对象（库的一部分，尽管我的一位同事可能已更改它）的断开代码是：

```
public override void Disconnect()
        {
            _producer.Close();
            _producer.Dispose();
            _producer = null;
            _consumer.MessageListener = null;
            _consumer.Close();
            _consumer.Dispose();
            _consumer = null;
            _sessionRead.Close();
            _sessionRead.Dispose();
            _sessionRead = null;
            _sessionWrite.Close();
            _sessionWrite.Dispose();
            _sessionWrite = null;
            _connection.Stop();
            _connection.Close();
            _connection.Dispose();
            _connection = null;

            //GC.Collect();

            IsConnected = false;
        } 
```

有人对为什么连接仍然存在有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:48:05.747

从错误描述看来，服务器订阅者正在创建持久订阅。即使订阅应用程序未运行，持久订阅也会继续接收消息。要删除持久订阅，您必须调用 Session.Unsubscribe()。简单地关闭消费者并不会删除订阅。

如果您的意图是在不删除订阅的情况下关闭订阅者，则首先发出 Connection.Stop() ，然后取消注册消息侦听器，然后关闭使用者。调用 connection.Stop 方法停止消息传递。

# javascript - 使用 node.js 调试 TLS 客户端连接

> ID：12508477
> 
> 赞同：7
> 
> 时间：2012-09-20T08:08:50.367
> 
> 标签：javascript, node.js, ssl

我正在尝试使用 node.js 和 TLS 建立与服务器的客户端连接，但它失败了。

我的问题是如何获取有关连接失败原因的更多信息。理想情况下，类似于使用 openssl（连接良好）时的情况，显示握手和证书交换。

目前我得到的只是{ [错误：套接字挂断]代码：'ECONNRESET'}。

我正在使用类似于下面基于互联网博客的代码。

```
var tls = require('tls'),
 fs = require('fs');

// callback for when secure connection established
function connected(stream) {
    if (stream) {
      stream.write('Hello');
    } else {
      console.log("Connection failed");
    }
}

// needed to keep socket variable in scope
var dummy = this;

// try to connect to the server
dummy.socket = tls.connect(
{
    port: 8000,
    host: 'dest.server.com',
    ca: [
            fs.readFileSync('C:\\Tools\\Certificates\\TestRoot.pem', 'utf8')
        ],
    cert: fs.readFileSync('C:\\Tools\\Certificates\\source.server.com.cert.pem', 'utf8'),
    key:  fs.readFileSync('C:\\Tools\\Certificates\\source.server.com.key.pem', 'utf8'),
    passphrase: 'password',
}
, function() {
   // callback called only after successful socket connection
   dummy.connected = true;
   if (dummy.socket.authorized) {
      // authorization successful
      console.log('auth ok');
      dummy.socket.setEncoding('utf-8');
      connected(dummy.socket);
   } else {
      // authorization failed
      console.log('auth fail');
     console.log(dummy.socket.authorizationError);
     connected(null);
   }
});

dummy.socket.addListener('data', function(data) {
   // received data
   console.log(data);
});

dummy.socket.addListener('error', function(error) {
   if (!dummy.connected) {
     // socket was not connected, notify callback
     connected(null);
   }
   console.log("FAIL");
   console.log(error);
});

dummy.socket.addListener('close', function() {
 // do something
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T19:07:05.503

好的，在深入研究源代码之后，您似乎可以通过将 NODE_DEBUG 环境变量设置为包含“tls”来获得一些额外的信息。在我的情况下它没有多大帮助，但它可能对其他人有帮助。

# sharepoint - 如何防止 Office 应用程序更新 SPListItem 字段？

> ID：12508484
> 
> 赞同：0
> 
> 时间：2012-09-20T08:09:08.957
> 
> 标签：sharepoint, sharepoint-2010, ms-word, ms-office, event-receiver

我在 SharePoint 中有一个带有自定义内容类型的文档库。每次上传新文档时，添加项目的事件接收器都会设置一个自定义字段。

当有人使用 Word 打开文档并使用 Word 菜单中的“另存为”选项保存新文档时，就会出现我的问题。我的事件接收器为我的字段设置了正确的值，然后 Word 再次将该字段设置回旧值。

如何防止 Word 更改我的字段？该字段是隐藏的、只读的和密封的。

我想我可以捕捉到 Word 触发的项目更新事件。如果有办法知道是 Word 试图更改我的项目，我可以取消该事件。有办法吗？

# winapi - WIN API 检查窗口响应性

> ID：12508485
> 
> 赞同：3
> 
> 时间：2012-09-20T08:09:09.903
> 
> 标签：winapi

是否有 WINAPI 来检查某个窗口是否“无响应”？或获得其响应水平？

# php - Doctrine 1.1 中大写列名的奇怪行为导致异常

> ID：12508487
> 
> 赞同：2
> 
> 时间：2012-09-20T08:09:18.793
> 
> 标签：php, mysql, doctrine, case-sensitive

我对 Doctrine 版本 1.1.0 中的列名的情况有疑问。

我有一个具有此定义的记录（实体）：

```
abstract class BaseProductsXsell extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this->setTableName('products_xsell');
        $this->hasColumn('ID', 'integer', 4, array('type' => 'integer', 'length' => 4, 'primary' => true, 'autoincrement' => true));
        $this->hasColumn('products_id', 'integer', 4, array('type' => 'integer', 'length' => 4, 'unsigned' => 1, 'default' => '1', 'notnull' => true));
        // and so on...
    }
} 
```

在 MySQL 数据库表中，“ID”的列名也是大写的。但是当我尝试在查询后获取列名时：

```
$query = Doctrine_Query::create()->select('m.*')->from("ProductsXsell m");
$collection = $query->execute();
$columns = $collection->getTable()->getColumnNames();
print_r($columns); 
```

输出如下所示：

```
Array
(
    [0] => id
    [1] => products_id
    ...
) 
```

我没有在任何地方设置学说连接的 case 属性，所以它应该是默认值（Doctrine::CASE_NATURAL）。

这会导致以下错误：

```
Fatal error: Uncaught exception 'Doctrine_Record_UnknownPropertyException' with message 'Unknown record property / related component "id" on "ProductsXsell"' in /opt/hocatec/bin/libs/Doctrine/Doctrine/Record/Filter/Standard.php:55
Stack trace:
#0 /opt/hocatec/bin/libs/Doctrine/Doctrine/Record.php(1282): Doctrine_Record_Filter_Standard->filterGet(Object(ProductsXsell), 'id')
#1 /opt/hocatec/bin/libs/Doctrine/Doctrine/Record.php(1240): Doctrine_Record->_get('id', true)
#2 /opt/hocatec/bin/libs/Doctrine/Doctrine/Access.php(117): Doctrine_Record->get('id')
#3 /opt/hocatec/bin/models/HocaSync.php(368): Doctrine_Access->offsetGet('id') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:44:26.360

您要从数据库中选择的字段名称必须与您在模型中定义的名称相同。区分大小写。

[您可以在此处](https://doctrine.readthedocs.org/en/latest/en/manual/defining-models.html)阅读有关此内容的更多信息。第一部分谈论“列”并解释。

> 数据库兼容性的一个问题是，许多数据库在返回查询结果集的行为上有所不同。MySQL 保持字段名称不变，这意味着如果您发出“SELECT myField FROM ...”形式的查询，则结果集将包含字段 myField。
> 
> 不幸的是，这正是 MySQL 和其他一些数据库的做法。例如，Postgres 以小写形式返回所有字段名称，而 Oracle 以大写形式返回所有字段名称。“所以呢？这对我使用 Doctrine 有什么影响？”，你可能会问。幸运的是，您根本不必担心这个问题。
> 
> Doctrine 透明地处理了这个问题。这意味着如果您定义派生 Record 类并定义一个名为 myField 的字段，无论您使用 MySQL 还是 Postgres，您都将始终通过 $record->myField（或 $record['myField']，无论您喜欢什么）访问它或甲骨文等。
> 
> **简而言之**：您可以使用 under_scores、camelCase 或任何您喜欢的名称来命名您的字段。
> 
> **注意：**在 Doctrine 中，列和列别名区分大小写。因此，当您在 DQL 查询中使用列时，列/字段名称必须与模型定义中的大小写匹配。

# c++ - STL 中的比较器

> ID：12508496
> 
> 赞同：6
> 
> 时间：2012-09-20T08:10:05.547
> 
> 标签：c++, stl, comparator

我正在使用 struct minHeap 使用 priority_queue 生成最小堆。函数 comp 使用 STL 中给出的排序函数以相反的顺序打印数字。现在我的疑问是我不能在函数排序中使用 struct minHeap 并且不能在 priorityQueue 中使用函数 comp。

我觉得 struct minHeap 和 comp 的功能是相似的。请解释一下何时将结构用于比较器以及何时使用普通函数在 STL 中充当比较器？

```
#include<iostream>
#include <queue>
#include <stdio.h>
#include<algorithm>
using namespace std;

struct minHeap
{
    bool operator()(const int a , const int b )
    {
        return a>b;
    }
};
bool comp(int a , int b)
{
    return a>b;
}

int main()
{
    priority_queue<int , vector<int> , minHeap > b;

    b.push(4);
    b.push(23);
    b.push(12);
    while(b.size()!=0)
    {
        cout << b.top() << " " ;
        b.pop();
    }
    cout<<"\n" ;
    int arr[] = {12,34, 112,12};
    sort(arr , arr+4  ,comp);

    for(int x= 0 ; x < 4 ; x++)
    {
        cout << arr[x] << " " ;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T08:16:16.190

通常，您要寻找的是何时使用函数或何时使用[仿函数](https://stackoverflow.com/questions/356950/c-functors-and-thir-uses)。

简短的回答是：当且仅当您需要在对运算符的多次调用中保留状态时才使用仿函数。对于比较函数，通常情况并非如此，但还有其他使用实例，例如累加器、平均器、最小值/最大值计算器等。

另一个问题似乎涵盖了类似的领域，可能会帮助您了解更多细节和对外部材料的一些重要参考：[Comparison Functor Types vs operator<](https://stackoverflow.com/questions/183606/comparison-functor-types-vs-operator)

至于将实际函数传递给priority_queue - 这不是那么明显，但它是可能的：

```
typedef bool(*CompareFunc)(float, float); // You need to have your function pointer 
                                          // type available
bool Compare(float i_lhs, float i_rhs)    // The actual compare function matching the 
  {                                       // CompareFunc type
  // Do your compare stuff here.
  }

...
std::priority_queue<float, std::vector<float>, CompareFunc> p(Compare);
// Tell priorityqueue you're passing a compare *function*, and pass the actual function
// as a parameter. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T08:47:35.500

您可以在 中使用仿函数`sort()`，完全没有问题：

```
sort(arr , arr+4  ,minHeap()); 
```

也许您的问题是您只是使用类名 ( `minHeap`) 而不是仿函数的实例。`minHeap()`是对构造函数的调用，而不是对`operator()`.

至于`priority_queue`，具体如下：

```
template < class T, class Container = vector<T>,
           class Compare = less<typename Container::value_type> > class priority_queue; 
```

因此，您需要第三个模板参数的类名（而不是实例）。如果要使用函数，则必须使用指向函数类型的指针作为第三个模板参数，然后在构造函数中传递函数指针：

```
priority_queue<int , vector<int> , bool (*)(int a, int b) > b(&comp); 
```

# ruby - 红宝石中的错误解密错误

> ID：12508502
> 
> 赞同：9
> 
> 时间：2012-09-20T08:10:40.790
> 
> 标签：ruby, openssl, encryption

在执行时`cipher.final`，它说`bad decrypt`错误。我试图找出问题。但是，我找不到。你能告诉我的代码有什么问题吗？

这是我的代码：

```
require 'openssl'
require 'base64'
require 'hex_string'

 result_h ="4fcd6b1ac843a2f8bf13f2e53dd5c1544fcd6b1ac843a2f8"
 key = result_h.to_byte_string

encrypt_str="79994A6EF73DA76C";
cipher = OpenSSL::Cipher.new("DES-EDE3-CBC")
cipher.decrypt
cipher.key = key
data = encrypt_str.to_byte_string
res = cipher.update( data )
res << cipher.final
result_h= res.unpack("H*")[0]
puts result_h.inspect; 
```

错误是：

```
in `final': bad decrypt (OpenSSL::Cipher::CipherError) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-20T13:39:48.443

我有一个类似的问题。在具体例子中：

```
require 'openssl'
require 'base64'
require 'hex_string'

 result_h ="4fcd6b1ac843a2f8bf13f2e53dd5c1544fcd6b1ac843a2f8"
 key = result_h.to_byte_string

encrypt_str="79994A6EF73DA76C";
cipher = OpenSSL::Cipher.new("DES-EDE3-CBC")
cipher.decrypt
cipher.padding = 0
cipher.key = key
data = encrypt_str.to_byte_string
res = cipher.update( data )
res << cipher.final
result_h= res.unpack("H*")[0]
puts result_h.inspect;

=> "0befe932733d76e6" 
```

如果你添加 cipher.padding = 0 它会给你一个结果。

# java - 从 Web 应用程序的根目录读取属性文件

> ID：12508505
> 
> 赞同：2
> 
> 时间：2012-09-20T08:10:56.563
> 
> 标签：java, properties

鉴于我要部署的“war”文件的以下目录结构，我必须从“ReadProp.java”类中读取属性文件“MyProperty.properties”。

```
MyApp.war
|
----MyProps
|       |--MyProperty.properties
|---WEB-INF
|        |--classes
|             |---ReadProp.java 
```

我将在“Sun 门户服务器”中部署这个“战争”文件。但是由于需求规范，我不应该更改任何此目录结构。

从“ReadProp.java”类中读取属性文件“MyProperty.properties”的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:00:23.540

得到答案

```
 String path = servletContext.getRealPath("/MyProps/MyProperty.properties");
        System.out.println("path: " + path);

        Properties prop = new Properties();
        try {
            prop.load(new FileInputStream(path));
        } catch (Exception e) {
                        e.printStackTrace();
        }
        String name= prop.getProperty("name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:16:35.190

一种方法来做到这一点

```
ReadProp.class.getResourceAsStream("MyProps/MyProperty.properties"); 
```

Myprops 应该在服务器类路径中。

做这件事的理想方法是将其保存`Myprops` 在 WEB-INF/classes 目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:17:05.203

最好的选择是将文件放在`src/resources/MyProperty.properties`. 它最终会`classes`在你的`.war`. 最好使用`/src/main`and `/src/test`，然后如果 需要资源（例如`.properties`文件）`main`，请将其保留在`src/main/resources/MyProperty.properties`.

# asp.net - 如何在两个跨域网站中进行身份验证

> ID：12508507
> 
> 赞同：0
> 
> 时间：2012-09-20T08:10:58.630
> 
> 标签：asp.net, html, asp.net-mvc, authentication

我有 2 个网站。其中之一是“主网站”。我有“用户偏好”的网站。如何实现当我们已经登录“主网站”时，当我们点击“用户偏好”网站的链接时，我们也会在这个网站上进行身份验证。

什么是最好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:38:10.787

这可能对您有用：

*   用户访问站点 A
*   用户登录站点 A
*   站点 A 在数据库中为用户创建一个令牌
*   站点 A 使用 AES 之类的东西加密令牌
*   站点 A 使用 URL 中的加密令牌将用户重定向到站点 B（或创建 iframe）

例如

```
www.site-b.com/remote/login?token=DSJABDUISA65ASA65ASD$#A&DE7t8%SARD$A%AS*%^DR76daBDD$#A&DE7t8%SARD$A%ASA65ASD$#A&DE7t8%SARD$A%AS*%^DR76daBD*%^DR76daBDsFA%vd%Bd 
```

*   站点 B 解密、验证和删除令牌
*   站点 B 自动登录用户
*   站点 B 将用户重定向回站点 A（或终止 iframe）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:37:57.080

> 要跨应用程序配置表单身份验证，请将 Web.config 文件的表单和 machineKey 部分的属性设置为参与共享表单身份验证的所有应用程序的相同值。
> 
> 以下示例显示了 Web.config 文件的身份验证部分。除非另有说明，否则**名称**、**保护**、**路径**、 **验证**密钥、**验证**、**解密密钥**和**解密**所有应用程序的属性必须相同。同样，用于身份验证票（cookie 数据）的加密和验证密钥值以及加密方案和验证方案必须相同。如果设置不匹配，则无法共享身份验证票。有关如何为validationKey 和decryptionKey 属性生成值的信息，请参阅如何：在ASP.NET 2.0 中配置MachineKey。（本主题适用于 ASP.NET 2.0 版和更高版本。）

更多阅读[跨应用程序的表单身份验证](http://msdn.microsoft.com/en-us/library/eb0zx8fc%28v=vs.100%29.aspx)

# c# - 逐行读取 .txt 文件，识别特定字符

> ID：12508508
> 
> 赞同：2
> 
> 时间：2012-09-20T08:10:59.737
> 
> 标签：c#, arrays, coordinates, readfile

基本上我想逐行读取 .txt 文件。当我阅读每一行时，我希望识别双打之间的任何空格字符，例如“12.1 34.478 67.9”，就像 XYZ 坐标一样。一旦识别出空格，我就可以独立处理每个双精度值，并且可以对每个值进行特定的计算。

目前我正在使用它来读取行

```
string line = reader.ReadLine();
MessageBox.Show("Line Read: " + line + ""); 
```

我尝试了一种基于数组的方法，如下所示，但输出从未成功。

```
char[] block = new char[3];
reader.ReadBlock(block, 0, 3);
Console.WriteLine(block);

MessageBox.Show("" + block + ""); 
```

* * *

由于#Bartosz，基本完成的工作代码看起来像

```
string line = reader.ReadLine();
var split = line.Split(' ');
var x = double.Parse(split[0]);
var y = double.Parse(split[1]);
var z = double.Parse(split[2]);

MessageBox.Show("X:" + x + "  Y:" + y + "  Z:" + z + ""); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:13:35.727

当您获得线路时，您可以：

```
var split = line.Split(' '); 
```

然后你可以获得每个双精度：

```
var x = double.Parse(split[0]);
var y = double.Parse(split[0]);
var z = double.Parse(split[0]); 
```

（或者`TryParse`根据您的错误处理需要，您还应该检查您的拆分是否确实长度为 3）。

注意：注意您操作系统上的区域设置，如果您的文件`.`用作浮点分隔符，它可能会在`,`设置的机器上失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T08:23:10.603

这样的事情呢？

```
var filename = "c:\\test.txt";
var allLines = File.ReadAllLines(filename);
var myList = new List<IEnumerable<double>>();
foreach (var line in allLines)
{
    var currentLine = line.Split(' ').Select(i => double.Parse(i));
    myList.Add(currentLine);
} 
```

稍微重构一下：

```
var myList = File.ReadAllLines("c:\\test.txt")
                    .Select(line => line.Split(' ')
                        .Select(double.Parse))
                        .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:13:05.923

[http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx)

```
using System;
using System.IO;

class Test
{
    public static void Main()
    {
        try
        {
            using (StreamReader sr = new StreamReader("TestFile.txt"))
            {
                String line = sr.ReadToEnd();
                Console.WriteLine(line);
            }
        }
        catch (Exception e)
        {
            Console.WriteLine("The file could not be read:");
            Console.WriteLine(e.Message);
        }
    }
} 
```

然后使用拆分`var stringlist = string.Split('')`

和`double.Parse`每一个字符串`stringlist`

# web-services - 为推送通知验证 Web 服务

> ID：12508513
> 
> 赞同：0
> 
> 时间：2012-09-20T08:11:13.043
> 
> 标签：web-services, windows-phone-7, ssl, push-notification, mpns

我正在开发需要推送通知的 WP7 应用程序。根据 Microsoft 的要求，Web 服务应通过 TLS 进行身份验证。如何在我的共享主机上设置证书，以便我的 web 服务将通过推送服务的身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:20:00.203

本文档可能会对您有所帮助[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941099%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941099%28v=vs.92%29.aspx)。另外，我想澄清一下，正如您上面建议的那样，这不是强制性的。释义：Microsoft**建议**应该通过 HTTPS 而不是 HTTP 发送通知。此外，如果该服务每天每个订阅可以处理 500 个推送通知，这将是可以的。参考：

> 我们建议设置经过身份验证的 Web 服务以将您的通知发送到 Microsoft 推送通知服务，因为通过 HTTPS 接口进行通信以提高安全性。经过身份验证的 Web 服务对它们可以发送的推送通知的数量没有每日限制。另一方面，未经身份验证的 Web 服务以每天每个订阅 500 条推送通知的速度受到限制。

希望这可以帮助你。

# android - 调用处理程序时动画不会停止

> ID：12508514
> 
> 赞同：0
> 
> 时间：2012-09-20T08:11:27.903
> 
> 标签：android

我有一个这样工作的系统： - 当网络请求被触发时，我会在我的视图中启动一个微调器动画。- 当请求完成时（在 AsyncTask 内），动画停止。

这工作正常，除非由于缺乏用户操作而关闭显示器。此代码在这种情况下不起作用：

```
imgVwSpinner.post(new Runnable() {
    @Override
    public void run() {
        imgVwSpinner.clearAnimation();
        imgVwSpinner.setImageResource(R.drawable.refresh);
    }
}); 
```

是否有解决方法来确保清除动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:32:01.300

您可以在处理程序中标记状态，然后重新检查该状态`onResume`

# ios - ASIHTTPRequest 下载：我应该请求一个大文件还是许多小文件？

> ID：12508519
> 
> 赞同：4
> 
> 时间：2012-09-20T08:11:45.003
> 
> 标签：ios, http, asihttprequest

我正在为我的 iOS 项目使用 ASIHTTPRequest 库。我的应用程序是关于下载电子书（包含 150 多个 jpg 文件）。我有两个选择：

1.  压缩所有图像，只需请求一个压缩文件（大约 200MB）。
2.  逐个请求图像（它将成为 150 多个请求）。

如果我每天有超过 1000 个用户同时请求电子书，那么哪个选项最好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:04:47.477

这并不是您问题的 100% 答案，但从经验来看，我相信您会发现它很有帮助。

我曾经做过一个有点类似的应用程序，我应该更新（重新下载）大量的 xml 文件（最多几千个）。

一个接一个的方法相当慢，但是通过良好的`NSOperation`管理`NSQueue`，它运行良好，在第一台 iPad 上没有 UI 冻结或崩溃。我相信我最多需要 15-20 分钟的最大文件数（超过 5000 个操作，每个操作有 5 个并发下载），在 wifi 连接上。

当我尝试 zip 方法时，看看它是否会更快/更好，由于内存使用率高，它导致 iPad 1 崩溃。如果我没记错的话，拉链的大小大约是 100 兆

我建议你选择第一个选项。每天 1000 个请求并不是一个很高的数字，这样用户就不必等待整个档案下载完成，而可以毫不拖延地阅读已经下载的页面。

# merge - openjpa：与分离对象关联的新实体

> ID：12508523
> 
> 赞同：1
> 
> 时间：2012-09-20T08:12:03.303
> 
> 标签：merge, associations, openjpa, persist

我有两个对象。安排和参与方。Arrangement 和 InvolvedParty 之间存在关联。

当我创建我的第一个安排并将 InvolvedParty 附加到它时，在坚持期间没有问题。当我创建第二个 Arrangement 并从数据库中获取先前存储的 InvolvedParty 以将其附加到第二个 Arrangement 时，persist 将不起作用。

这是错误：[20/09/12 9:53:40:998 CEST] 00000020 RegisteredSyn E WTRN0074E：从 before_completion 同步操作中捕获的异常：org.apache.openjpa.persistence.EntityExistsException：尝试保持分离的对象“com. xxx.crs.model.involvedparty.InvolvedParty-com.xxx.crs.model.involvedparty.InvolvedParty-101”。如果这是一个新实例，请确保任何 versino 和/或自动生成的主键字段在持久化时为空/默认值。失败对象：com.xxx.crs.model.involvedparty.InvolvedParty-com.xxx.crs.model.involvedparty.InvolvedParty-101

现在我该怎么办？安排是一个新对象，所以考虑到我应该坚持它。但是安排的一项是InvolvedParty，它是一个分离的对象，所以我应该合并吗？虽然感觉很矛盾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T05:46:52.293

确保在用于持久化 Arrangement 的同一事务中从数据库中获取现有的 InvolvedParty。如果您在两个单独的操作中执行这些操作，则持久性上下文会在第一个事务完成时结束，并且 OpenJPA 会将 InvolvedParty 视为一个分离的对象。

有关更多信息，请参阅OpenJPA 手册中的[持久性上下文](http://openjpa.apache.org/builds/1.1.0/docs/jpa_overview_emfactory_perscontext.html)。

# ios - 替换 .xib 文件中的视图控制器

> ID：12508527
> 
> 赞同：0
> 
> 时间：2012-09-20T08:12:22.617
> 
> 标签：ios

我有一个包含 App Delegate、Window 和 View Controller ABC 对象的主 .xib 文件。当我单击对象“View Controller ABC”时，它显示它是在 .h 类文件中定义的出口。

现在我希望主 .xib 在第一次初始化时显示不同的视图控制器 XYZ。如何替换视图控制器？我尝试拖动一个新的 View Controller 对象，但我不知道它是如何引用 XYZ 类的。

应用委托 .h

```
@interface JabberClientAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    ViewControllerXYZ *viewController;

}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet ViewControllerXYZ *viewController; 
```

应用委托.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    [DDLog addLogger:[DDTTYLogger sharedInstance]];

    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

我试图用新的 XYZ 类替换 View Controller 属性。但是 .xib 没有得到更新。

关于如何更新 .xib 的任何建议？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:22:56.067

我想您需要`UIViewController`在 XIB 上更改您的课程类型，以便您可以访问`IBOutlets`您的 XYZ `UIViewController`。像这样：

![在此处输入图像描述](../Images/636c6f161cb90d78bd02bb45715a8f26.png)

# mongodb-java - Mongodb java - 如何删除特定文档

> ID：12508529
> 
> 赞同：0
> 
> 时间：2012-09-20T08:12:27.250
> 
> 标签：mongodb-java

```
 {
CONTENT1:{
YDXM:[{
"name":"1",
"MBNH":"1"}
{"name":"2",
"MBNH":"2"}]
} 
```

我想删除`{"name":"1","MBNH":"1"}`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:19:46.120

假设以下是您的文档并且您要删除**整个**文档：

```
{
    "CONTENT1": {
        "YDXM": [
            {
                "name": "1",
                "MBNH": "1"
            },
            {
                "name": "2",
                "MBNH": "2"
            }
        ]
    }
} 
```

你可以使用这个：

```
db.test.remove({"CONTENT1.YDXM.name" : "1", "CONTENT1.YDXM.MBNH" : "1"}) 
```

现在，如果你想`{"name" : "1", "MBNH" : "1"}`从**CONTENT1.YDXM**数组中提取文档，你应该使用 $pull 操作符：

```
db.test.update({"CONTENT1.YDXM.name" : "1", "CONTENT1.YDXM.MBNH" : "1"}, { $pull :  { "CONTENT1.YDXM" : {"name" : "1", "MBNH" : "1"}  } }, false, true) 
```

这将在与第一个参数匹配的*所有*文档中执行更新。第二个参数，带有 $pull 运算符，意味着 mongodb`{"name" : "1", "MBNH" : "1"}`将从 CONTENT1.YDXM 数组中删除值。

您可以在此链接中阅读有关 $pull 运算符和更新命令的更多信息：http: [//docs.mongodb.org/manual/reference/operator/pull/](http://docs.mongodb.org/manual/reference/operator/pull/) http://docs.mongodb.org/manual/applications/update/

# android - 如何使用 robolectric 用额外的数据测试开始的意图

> ID：12508531
> 
> 赞同：21
> 
> 时间：2012-09-20T08:12:35.330
> 
> 标签：android, testing, android-intent, robolectric

在一个活动中，我用一些随机的额外数据开始了一个新的 Intent：

```
Intent newIntent = new Intent(this, UserActivity.class);
newIntent.putExtra("key", generateRandomKey());
startActivity(newIntent); 
```

我是这样测试的：

```
Intent intent = new Intent(myactivity, UserActivity.class);
Assert.assertThat(activity, new StartedMatcher(intent)); 
```

它失败了，因为`intent`我的测试代码中没有额外的数据`key`。

由于`key`是随机的，因此很难提供相同的密钥。所以我只是想测试一下意图的目标类是否是`UserActivity`，但没有办法做到这一点。

有解决办法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-26T15:56:25.393

如果您将 generateRandomKey() 方法提取到一个单独的类中，则您可以（手动或使用类似 RoboGuice 之类的东西）将该类的受控版本注入到您的测试中，以便在 Robolectric 运行时生成的“随机”键实际上是一个已知值. 但在生产代码中仍然是随机的。

然后，您可以捕获您的活动创建的意图并测试“键”是否包含预期的测试值。

* * *

但是，要直接回答您的问题...

当我测试是否生成了意图（在本例中是通过单击按钮）并指向我使用的正确目标时

```
public static void assertButtonClickLaunchesActivity(Activity activity, Button btn, String targetActivityName) {
    btn.performClick();
    ShadowActivity shadowActivity = shadowOf(activity);
    Intent startedIntent = shadowActivity.getNextStartedActivity();
    ShadowIntent shadowIntent = shadowOf(startedIntent);
    assertThat(shadowIntent.getComponent().getClassName(), equalTo(targetActivityName));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:10:18.507

像这样的东西？

```
Assert.assertTrue(UserActivity.class.equals(intent.getComponent().getClassName())); 
```

或assertEquals？

# erlang - Erlang：远程调用与发送消息

> ID：12508539
> 
> 赞同：6
> 
> 时间：2012-09-20T08:13:21.133
> 
> 标签：erlang, message, rpc

我想在远程节点上执行一些程序。而且我不确定哪种方法是最好的方法。我可以写一个`rpc:call`来做到这一点。或者通过向节点发送消息`Remote ! {call, some_procedure}`来启动程序并使用`receive`等待响应。那么在erlang中哪种方式更好？或者它们实际上是为了不同的用途？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T08:26:24.637

最好使用 module `rpc`，因为如果你不这样做：*你必须管理远程节点的监控，必须提供调用的唯一 id，处理超时，你还必须提供包装器来发送回响应函数的结果。*

但是**所有这些操作都是通用的**，并且在`rpc`模块中实现。

顺便说一句，远程调用有不同的变体，实现方式有`rpc`：**同步**和**异步调用**、**强制转换**（发送不需要响应的消息），甚至并行映射函数（**pmap**）。

**附言**

比较 - 简单地使用[rpc:call](http://www.erlang.org/doc/man/rpc.html#call-4)与从头开始实现（同样，这是简单的实现，它不处理一些重要的情况）：

```
-module(myrpc).
-compile(export_all).

server() ->
        receive
                {{CallerPid, Ref}, {Module, Func, Args}} ->
                        Result = apply(Module, Func, Args),
                        CallerPid ! {Ref, Result}
        end.

call(Node, Module, Func, Args) ->
        monitor_node(Node, true),
        RemotePid = spawn(Node, ?MODULE, server, []),
        Ref = make_ref(),
        RemotePid ! {{self(), Ref}, {Module, Func, Args}},
        receive
                {Ref, Result} ->
                        monitor_node(Node, false),
                        Result;
                {nodedown, Node} ->
                        error
        end. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T20:25:24.203

rpc 似乎是一个综合解决方案，但它在规模方面存在一些缺点。rpc 使用单个“rex”服务器跨节点通信，可能会不堪重负。如果你使用 rpc，你应该监控这个过程。

如果通信是主要功能并且它是 io/cpu/memory 消费者的顶部，我会考虑自己编写它。另一方面，我们可以期待 OTP 团队的改进（过早的优化是万恶之源！！！）。

# python - 附加现有进程以获取成功或失败命令？

> ID：12508540
> 
> 赞同：0
> 
> 时间：2012-09-20T08:13:30.297
> 
> 标签：python, linux, bash, shell, process

在 Bash 中，我们可以运行这样的程序

`./mybin && echo "OK"`

和这个

`./mybin || echo "fail"`

但是我们如何将成功或失败命令附加到现有进程？

**编辑解释**：

现在我们正在运行`./mybin`。

当`mybin`有或没有错误退出时，它什么都不做，但是在`mybin`运行期间，我怎样才能达到与启动过程一样的效果`./mybin && echo ok || echo fail`？

在 shell 脚本和 python 编程方式中都很棒，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:20:11.733

> *但是我们如何将成功或失败命令附加到现有的已经运行的进程上呢？*

假设您指的是在后台运行的命令，您可以使用`wait`等待该命令完成并检索其返回状态。例如：

```
./command &  # run in background
wait $! && echo "completed successfully" 
```

这里我使用`$!`的是获取后台进程的PID，但它可以是shell的任何子进程的PID。

# c# - 将 XSLT 转换转换为 C#

> ID：12508548
> 
> 赞同：1
> 
> 时间：2012-09-20T08:14:12.887
> 
> 标签：c#, xslt, xml-serialization

我正在努力理解 XSLT 转换。目前我收到一个 XML 格式的序列化对象，然后应用 XSLT 并将新的 XML 发送回程序。但现在我需要消除 XSLT 步骤并在程序内部进行转换。问题是我第二次看到 XSLT 表。转换表看起来很简单，但我仍然无法理解那里发生了什么。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:t="http://tempuri.org/">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>
  <xsl:template name="CopyEverything" match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="/t:Data/Flagged">
    <xsl:element name="Flagged">
      <xsl:apply-templates select="/t:Data/Covers/node()|@*"/>
    </xsl:element>
  </xsl:template>
  <xsl:template match="/t:Data/FlaggedDetails">
    <xsl:element name="FlaggedDetails">
      <xsl:apply-templates select="/t:Data/TotalFlaggedDetails/node()|@*"/>
    </xsl:element>
  </xsl:template>
  <xsl:template match="/t:Data/System/RArray">
    <xsl:element name="{local-name()}">
      <xsl:for-each select="/t:Data/System/RArray/Elem">
        <xsl:call-template name="CopyEverything"/>
      </xsl:for-each>
      <xsl:for-each select="/t:Data/Elem/Elem">
        <xsl:variable name="currentCode" select="Code" />
        <xsl:variable name="showAlways" select="ShowAlways" />
        <xsl:if test="count(/t:Data/System/RArray/Elem[Code=$currentCode])=0">
          <xsl:call-template name="CopyEverything"/>
        </xsl:if>
      </xsl:for-each>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

据我了解，从 Data/Flagged 和 Data/FlaggedDetails 复制到 Data/System/RArray，我无法将此逻辑转换为 C#。我必须消除序列化词干，所以我在没有 XSLT 的情况下在集合之间移动对象（如果这是正在发生的事情）。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:32:14.330

**I wouldn't advise "translating" an XSLT transformation into C# due to many reasons**:

This isn't always easy due to the incompatibilities between the two languages:

1.  Think how to simulate templates and match patterns in C# ?

2.  How to simulate the XSLT processing model?

3.  How to simulate importing stylesheet modules and determining which are the objects with highest import precedence?

4.  How to simulate keys?

5.  You will have to implement in C# a number of useful XPath (and XSLT) standard functions -- all the string functions, such as `translate()`, `normalize-space()`, `substring-before()`, `substring-after()`, ..., etc.

6.  Instructions such as `<xsl:number>` and functions such as `format-number()`.

So, if you have the time needed to invest in all this and the result is successful (which is not too-likely), the translation would be several times longer than the original and in most cases -- completely not-understandable, not extensible, not maintainable.

I also doubt that a translation would run significantly faster than the original -- it can run slower in some cases (for example, not implementing keys efficiently).

**Conclusion**: I strongly advise against engaging in such destructive activity.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:52:06.903

您可以使用该类在您的 C# 程序中进行 XSTL 转换`XslCompiledTransform`（参考：http: [//msdn.microsoft.com/en-us/library/system.xml.xsl.xslcompiledtransform.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xsl.xslcompiledtransform.aspx)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:11:16.070

尝试使用**[Xsl To .NET 代码生成器](http://codegenerator.codeplex.com/)**；*它是Microsoft Visual Studio 2010*的插件，可帮助您`C#`从`XSL`模板生成代码。

# android - Android BaseExpandableListAdapter多次触发GetChildView方法

> ID：12508549
> 
> 赞同：0
> 
> 时间：2012-09-20T08:14:14.497
> 
> 标签：android, expandablelistview, expandablelistadapter

我需要为每个组使用带有自定义布局的 Android ExpandableListView（组有一个孩子）。为此，我创建了一个扩展 BaseExpandableListAdapter 的类。在 getChildView 方法中，我创建了每个孩子的视图。有用。当我单击一个组时，它的子项带有真正的布局。但是，在调试过程中，我看到它多次触发getchildview方法，所以显示child太慢了。因为每个孩子都有很多操作（数据库操作，动态子布局......）。

有一个小项目，和我的项目类似（逻辑和代码结构相同，只是布局代码和创建每个子视图的代码不同）。

```
public class MainActivity extends Activity {

private ArrayList<String> groups;
private ArrayList<ArrayList<ArrayList<String>>> childs;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    ExpandableListView l = (ExpandableListView)findViewById(R.id.expandableListView1);

    loadData();

    final myExpandableAdapter adapter = new myExpandableAdapter(this, groups, childs);
    l.setAdapter(adapter);

}

public class myExpandableAdapter extends BaseExpandableListAdapter {

    private ArrayList<String> groups;

    private ArrayList<ArrayList<ArrayList<String>>> children;

    private Context context;

    public myExpandableAdapter(Context context, ArrayList<String> groups, ArrayList<ArrayList<ArrayList<String>>> children) {
        this.context = context;
        this.groups = groups;
        this.children = childs;
    }

    @Override
    public boolean areAllItemsEnabled()
    {
        return true;
    }

    public ArrayList<String> getChild(int groupPosition, int childPosition) {
        return children.get(groupPosition).get(childPosition);
    }

    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    public View getChildView(int groupPosition, int childPosition, boolean isLastChild,View convertView, ViewGroup parent) {

        String child=(String)getChild(groupPosition, childPosition).get(0);
         switch (groupPosition){

        case 0:
            LayoutInflater inflater =  (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.child_row, null);
            TextView tvPlayerName = (TextView) convertView.findViewById(R.id.tvPlayerName);
            tvPlayerName.setText(child);

            break;

        case 1:
            LayoutInflater inflater1 =  (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater1.inflate(R.layout.child_row1, null);
            TextView tvPlayerName1 = (TextView) convertView.findViewById(R.id.tvPlayerName);
            tvPlayerName1.setText(child);
            Button btn=(Button)convertView.findViewById(R.id.button1);
            btn.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    TextView tv=(TextView)findViewById(R.id.tv);
                    tv.setText("Clicked");
                }
            });

            break; 
        case 2:
            LayoutInflater inflater2 =  (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater2.inflate(R.layout.child_row1, null);
            TextView tvPlayerName12 = (TextView) convertView.findViewById(R.id.tvPlayerName);
            tvPlayerName12.setText(child);
            Button btn2=(Button)convertView.findViewById(R.id.button1);
            btn2.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    TextView tv=(TextView)findViewById(R.id.tv);
                    tv.setText("Clicked");
                }
            });

            break; 
     }
        return convertView;

    }

    public int getChildrenCount(int groupPosition) {
        return children.get(groupPosition).size();
    }

    public String getGroup(int groupPosition) {
        return groups.get(groupPosition);
    }

    public int getGroupCount() {
        return groups.size();
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {

        String group = (String) getGroup(groupPosition);

        if (convertView == null) {
            LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = infalInflater.inflate(R.layout.expandablelistview_group, null);
        }

        TextView grouptxt = (TextView) convertView.findViewById(R.id.TextViewGroup);

        grouptxt.setText(group);

        return convertView;
    }

    public boolean hasStableIds() {
        return true;
    }

    public boolean isChildSelectable(int arg0, int arg1) {
        return true;
    }

}

private void loadData(){
    groups= new ArrayList<String>();
    childs= new ArrayList<ArrayList<ArrayList<String>>>();

    groups.add("Group 1");
    groups.add("Group 2");
    groups.add("Group 3");

    childs.add(new ArrayList<ArrayList<String>>());
    childs.get(0).add(new ArrayList<String>());
    childs.get(0).get(0).add("Child 1 group 1");

    childs.add(new ArrayList<ArrayList<String>>());
    childs.get(1).add(new ArrayList<String>());
    childs.get(1).get(0).add("Child 1 group 2");

    childs.add(new ArrayList<ArrayList<String>>());
    childs.get(2).add(new ArrayList<String>());
    childs.get(2).get(0).add("Child 1 group 3");

}} 
```

在调试过程中，如果我单击任何组，它就会出现`String child=(String)getChild(groupPosition, childPosition).get(0);`。之后`break; }return convertView;`，它一次又一次地来到那里，然后显示布局。

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ExpandableListView
    android:id="@+id/expandableListView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:layout_marginLeft="34dp" >
</ExpandableListView> 
```

expandablelistview_group.xml

```
<?xml version="1.0" encoding="utf-8"?><LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"> 
<TextView
    android:id="@+id/TextViewGroup" 
    android:layout_width="wrap_content"
    android:layout_height="50px"
    android:layout_marginLeft="50px"
    android:gravity="center_vertical"
>
</TextView> 
```

child_row.xml

```
<?xml version="1.0" encoding="utf-8"?><LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/tvPlayerName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" /> 
```

childrow1.xml

```
<?xml version="1.0" encoding="utf-8"?><LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

    <TextView
    android:id="@+id/tv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Row1" />

<TextView
    android:id="@+id/tvPlayerName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" /> 
```

有什么建议可以解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:30:02.097

而不是从`getChildView`使用 Holder 中夸大视图，[请阅读此处](https://developer.android.com/training/improving-layouts/smooth-scrolling.html#ViewHolder)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:51:03.283

尝试更改您的 ExpandableListView xml，而不是 android:layout_height=" **wrap_content** "，将 android:layout_height=" **fill_parent** "

# c# - 如何将文本写入文件

> ID：12508550
> 
> 赞同：0
> 
> 时间：2012-09-20T08:14:15.307
> 
> 标签：c#, streamwriter

我是 C# 新手。如何将数据写入一个文件？到目前为止，这是我的代码：

```
public void convertHTML(string strData, string strTitle)
    {
        int position = strTitle.LastIndexOf('.');   
        strTitle = strTitle.Remove(position);
        strTitle= strTitle + ".html";
        StreamWriter sw = new StreamWriter(strTitle);   //strTitle is FilePath
        sw.WriteLine("<html>");
        sw.WriteLine("<head><title>{0}</title></head>",strTitle);
       //MessageBox.Show("this editor");
        sw.WriteLine("<body>");
        sw.WriteLine(strData);   //strData is having set of lines
        sw.WriteLine("</body>");
        sw.WriteLine("</html>");//*/
        lstHtmlFile.Items.Add(strTitle);
    } 
```

它只会创建一个没有任何数据的空白 html 文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:16:46.870

您需要冲洗并关闭`StreamWriter`：

```
using (StreamWriter sw = new StreamWriter(strTitle))
{

    sw.WriteLine("<html>");
    sw.WriteLine("<head><title>{0}</title></head>",strTitle);
    sw.WriteLine("<body>");
    sw.WriteLine(strData);
    sw.WriteLine("</body>");
    sw.WriteLine("</html>");
} 
```

使用`using`就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:38:51.213

您可以添加块使用以清洁您的`non managed object`

```
using (var streamWriter = new StreamWriter(strTitle))
{

 ....
} 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/yh598w02.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/yh598w02.aspx)

# wpf - dbContext 会影响 WPF 应用程序的性能吗？

> ID：12508552
> 
> 赞同：-3
> 
> 时间：2012-09-20T08:14:19.893
> 
> 标签：wpf, entity-framework

```
 public DEV_MasterPOSEntities Context = new DEV_MasterPOSEntities(); 
```

我正在使用 WPF 和 MVVM，但系统性能非常慢。是因为上下文吗？那么我可以做些什么来提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:46:22.353

您没有提供足够的信息让我们真正能够查明您的问题，但如果实体框架导致您的性能问题，我建议您查看我的[备忘单](http://blog.staticvoid.co.nz/2012/08/entity-framework-performance-cheat-sheet.html)，以尽可能快地制作 EF 应用程序。

我还有一些关于跟踪太多实体的性能问题的其他文章：

*   [自动检测更改](http://blog.staticvoid.co.nz/2012/05/entityframework-performance-and.html)
*   [AsNoTracking](http://blog.staticvoid.co.nz/2012/04/entity-framework-and-asnotracking.html)

# rabbitmq - RPC 模型中的correlationId 和临时队列 - AMQP

> ID：12508553
> 
> 赞同：4
> 
> 时间：2012-09-20T08:14:24.657
> 
> 标签：rabbitmq, rpc, amqp

我正在使用 RabbitMQ 阅读AMQP 中的[RPC-Model](http://www.rabbitmq.com/tutorials/tutorial-six-java.html)。本教程创建一个临时队列，并且`correlationId`. 临时队列是唯一的，那我们为什么需要correlationId呢？我是 JMS 人，在 JMS 中，我们以两种方式请求/响应：

1.  为每个请求/响应创建临时队列

2.  创建一个响应队列并使用`correlationId`和消息选择器。

有人可以解释为什么我们需要临时队列和`correlationId`AMQP RPC 模型吗？似乎 AMQP 没有消息选择器之类的东西。我对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T09:26:29.337

正确的临时队列对于发出 RPC 请求的客户端是唯一的。[我们可以创建 RPC 客户端，为它发出的每个唯一请求创建一个唯一队列，但这会效率低下 - 请参见 CorrelationId的](http://www.rabbitmq.com/tutorials/tutorial-six-python.html)第一段：

> 在上面介绍的方法中，我们建议为每个 RPC 请求创建一个回调队列。这是非常低效的，但幸运的是有一个更好的方法——让我们为每个客户端创建一个回调队列。

因此，一种更好的方法是拥有一个 RPC 客户端获取响应的队列，并使用correlationId 将 RPC 客户端发出的请求与 RPC 服务器发回的结果相匹配。

> ...在该队列中收到响应后，尚不清楚该响应属于哪个请求。这就是使用correlation_id 属性的时候。我们将为每个请求将其设置为唯一值。稍后，当我们在回调队列中收到一条消息时，我们将查看此属性，并基于此将响应与请求进行匹配。如果我们看到一个未知的correlation_id 值，我们可以安全地丢弃该消息——它不属于我们的请求。

[所以参考RPC 教程](http://www.rabbitmq.com/tutorials/tutorial-six-python.html)的总结部分：

*   当客户端启动时，它会创建一个独占且唯一的队列
*   当它发送一个 RPC 请求时，它会设置队列名称的 reply_to（这样服务器就知道要向哪个队列发送响应）并且还设置一个correlationId，它是每个 RPC 请求的唯一值
*   请求被发送到 RPC 队列
*   RPC 工作者（或服务器）接收到请求并处理它，然后使用 reply_to 值将响应发送回客户端，它还设置了 correlationId
*   RPC 客户端等待响应，当它收到一个响应时，使用correlationId将响应与请求**匹配**

# android - 带有自定义进度对话框的应用程序崩溃

> ID：12508555
> 
> 赞同：1
> 
> 时间：2012-09-20T08:14:25.850
> 
> 标签：android, progressdialog

显示自定义进度对话框时遇到错误。我创建了包含 40 个不同图像的进度对话框。它炒得很好。但是如果我尝试显示对话框超过 8-10 次应用程序崩溃。

错误日志

```
09-20 13:11:12.620: E/AndroidRuntime(9156): FATAL EXCEPTION: main
09-20 13:11:12.620: E/AndroidRuntime(9156): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.spec.vespa/com.spec.vespa.view.SettingsActivity}: android.view.InflateException: Binary XML file line #13: Error inflating class <unknown>
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.app.ActivityThread.access$1500(ActivityThread.java:121)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.os.Looper.loop(Looper.java:138)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.app.ActivityThread.main(ActivityThread.java:3701)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at java.lang.reflect.Method.invokeNative(Native Method)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at java.lang.reflect.Method.invoke(Method.java:507)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at dalvik.system.NativeStart.main(Native Method)
09-20 13:11:12.620: E/AndroidRuntime(9156): Caused by: android.view.InflateException: Binary XML file line #13: Error inflating class <unknown>
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.app.Dialog.setContentView(Dialog.java:421)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at com.spec.vespa.view.SettingsActivity.onCreate(SettingsActivity.java:124)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
09-20 13:11:12.620: E/AndroidRuntime(9156):     ... 11 more
09-20 13:11:12.620: E/AndroidRuntime(9156): Caused by: java.lang.reflect.InvocationTargetException
09-20 13:11:12.620: E/AndroidRuntime(9156):     at java.lang.reflect.Constructor.constructNative(Native Method)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
09-20 13:11:12.620: E/AndroidRuntime(9156):     ... 23 more
09-20 13:11:12.620: E/AndroidRuntime(9156): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.graphics.Bitmap.nativeCreate(Native Method)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:521)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:496)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:359)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:715)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.content.res.Resources.loadDrawable(Resources.java:1721)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.content.res.Resources.getDrawable(Resources.java:585)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.graphics.drawable.AnimationDrawable.inflate(AnimationDrawable.java:267)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:805)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:746)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.content.res.Resources.loadDrawable(Resources.java:1706)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.widget.ProgressBar.<init>(ProgressBar.java:215)
09-20 13:11:12.620: E/AndroidRuntime(9156):     at android.widget.ProgressBar.<init>(ProgressBar.java:170)
09-20 13:11:12.620: E/AndroidRuntime(9156):     ... 26 more 
```

我还做了一些内存管理，如下所述：

```
public void unbindDrawables(View view) {
        if (view.getBackground() != null) {
            view.getBackground().setCallback(null);
        }
        if (view instanceof ViewGroup) {
            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
                unbindDrawables(((ViewGroup) view).getChildAt(i));
            }
            try{
                ((ViewGroup) view).removeAllViews();
            }catch (UnsupportedOperationException e) {}
        }
    } 
```

我错过了什么？

进度条xml：

```
<RelativeLayout android:layout_width="fill_parent"
android:layout_marginLeft="40dp"
android:layout_height="wrap_content"
android:layout_centerInParent="true"
android:background="@drawable/progress_context">
<ProgressBar android:layout_height="100dp"
           android:layout_width="100dp"
           android:id="@+id/prg"
           android:layout_centerHorizontal="true"
           android:layout_marginTop="10dp"
           android:drawingCacheQuality="low"
           style="@android:style/Widget.ProgressBar.Large.Inverse"
           android:indeterminateDrawable="@drawable/custom_progress_drawable"/>

<TextView android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/prg"
    android:layout_marginTop="15dp"
    android:textSize="20sp"
    android:textColor="#ffffff"
    android:text="@string/loading"
    android:paddingBottom="10dp"
    android:id="@+id/txtProgressMessage"
    android:layout_centerHorizontal="true"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:11:51.780

我知道了..

我的代码：

```
public class CustomProgressDialog extends ProgressDialog{
    private ImageView imageView;
    public CustomProgressDialog(Context context) {      
        super(context);
    }

 @Override
    public void onWindowFocusChanged(boolean hasFocus){
        imageView = (ImageView) findViewById(R.id.loadingImageView);
        AnimationDrawable myAnimation = (AnimationDrawable) imageView.getBackground();
        myAnimation.start();
    }

    public static CustomProgressDialog createDialog(Context context,String title,String message){
        CustomProgressDialog dialog=null;
        if(title.length()==0||title==null)
            dialog=new CustomProgressDialog(context);
        else{
            dialog=new CustomProgressDialog(context);
            dialog.setTitle(title);
        }
        dialog.getWindow().getAttributes().gravity=Gravity.CENTER;
        return dialog;
    }

 public void setImageCallBack(){
     if(imageView != null)
         imageView.getBackground().setCallback(null);
 } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:27:18.210

您的应用程序崩溃，因为您的 JVM 内存不足并且无法创建/加载另一个位图。可能的解决方案是：

1.  使用已创建且未使用的位图对象，例如使用“recycle()”方法，关于在 Android 中使用位图请阅读：http: [//developer.android.com/reference/android/graphics/Bitmap.html](http://developer.android.com/reference/android/graphics/Bitmap.html)

2.  压缩位图，不要创建大量位图并重用已创建的位图而不是创建新的位图。

PS如果您提供更多代码，您可以获得解决您问题的代码。

# android - 如何取消异步任务

> ID：12508557
> 
> 赞同：0
> 
> 时间：2012-09-20T08:14:36.027
> 
> 标签：android, android-asynctask, progressdialog

我正在创建一个使用 api 发送短信的 android 应用程序。当我尝试取消异步任务并开始另一个任务时，我面临强制关闭问题。我想要做的是，如果消息没有在 5 秒内发送，进度对话框应该消失，异步任务应该被取消，新任务应该开始。我为此编写了一个代码。请帮我解决错误。

```
09-18 10:55:40.456: E/AndroidRuntime(3273): FATAL EXCEPTION: AsyncTask #1
09-18 10:55:40.456: E/AndroidRuntime(3273): java.lang.RuntimeException: An error   
occured while executing doInBackground()
09-18 10:55:40.456: E/AndroidRuntime(3273):     at   
android.os.AsyncTask$3.done(AsyncTask.java:200)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at 
java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at  
java.util.concurrent.FutureTask.setException(FutureTask.java:125)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at 
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at  
java.util.concurrent.FutureTask.run(FutureTask.java:138)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at 
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at 
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at java.lang.Thread.run(Thread.java:1019)
09-18 10:55:40.456: E/AndroidRuntime(3273): Caused by: java.lang.RuntimeException: Can't create 
handler inside thread that has not called Looper.prepare()
09-18 10:55:40.456: E/AndroidRuntime(3273):     at android.os.Handler.<init>(Handler.java:121)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at android.widget.Toast.<init>(Toast.java:68)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at android.widget.Toast.makeText(Toast.java:231)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at 
com.widgets.application.MainActivity$sendMessageAsync.doInBackground(MainActivity.java:260)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at 
com.widgets.application.MainActivity$sendMessageAsync.doInBackground(MainActivity.java:1)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at 
android.os.AsyncTask$2.call(AsyncTask.java:185)
09-18 10:55:40.456: E/AndroidRuntime(3273):     at 
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
09-18 10:55:40.456: E/AndroidRuntime(3273):     ... 4 more
09-18 10:55:43.432: E/WindowManager(3273): Activity com.widgets.application.MainActivity has leaked 
window com.android.internal.policy.impl.PhoneWindow$DecorView@40594188 that was originally added here
09-18 10:55:43.432: E/WindowManager(3273): android.view.WindowLeaked: Activity  
com.widgets.application.MainActivity has leaked window 
com.android.internal.policy.impl.PhoneWindow$DecorView@40594188 that was originally added here
09-18 10:55:43.432: E/WindowManager(3273):  at android.view.ViewRoot.<init>(ViewRoot.java:258)
09-18 10:55:43.432: E/WindowManager(3273):  at  
android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
09-18 10:55:43.432: E/WindowManager(3273):  at 
android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
09-18 10:55:43.432: E/WindowManager(3273):  at 
android.view.Window$LocalWindowManager.addView(Window.java:424)
09-18 10:55:43.432: E/WindowManager(3273):  at android.app.Dialog.show(Dialog.java:241)
09-18 10:55:43.432: E/WindowManager(3273):  at   
android.app.ProgressDialog.show(ProgressDialog.java:107)
09-18 10:55:43.432: E/WindowManager(3273):  at 
android.app.ProgressDialog.show(ProgressDialog.java:90)
09-18 10:55:43.432: E/WindowManager(3273):  at  
com.widgets.application.MainActivity.onClick(MainActivity.java:331)
09-18 10:55:43.432: E/WindowManager(3273):  at android.view.View.performClick(View.java:2485)
09-18 10:55:43.432: E/WindowManager(3273):  at android.view.View$PerformClick.run(View.java:9080)
09-18 10:55:43.432: E/WindowManager(3273):  at android.os.Handler.handleCallback(Handler.java:587)
09-18 10:55:43.432: E/WindowManager(3273):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-18 10:55:43.432: E/WindowManager(3273):  at android.os.Looper.loop(Looper.java:123)
09-18 10:55:43.432: E/WindowManager(3273):  at  
android.app.ActivityThread.main(ActivityThread.java:3683)
09-18 10:55:43.432: E/WindowManager(3273):  at java.lang.reflect.Method.invokeNative(Native Method)
09-18 10:55:43.432: E/WindowManager(3273):  at java.lang.reflect.Method.invoke(Method.java:507)
09-18 10:55:43.432: E/WindowManager(3273):  at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-18 10:55:43.432: E/WindowManager(3273):  at  
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-18 10:55:43.432: E/WindowManager(3273):  at dalvik.system.NativeStart.main(Native   Method) 
```

代码

```
public class MainActivity extends Activity implements OnPanelListener, OnClickListener, OnItemClickListener {

final static int RQS_PICK_CONTACT = 1;
public static String sendSmsToNumber = "";

private EditText editText, editUserName, editPassword;
private ArrayList<Map<String, String>> mPeopleList;
private SimpleAdapter mAdapter;
private AutoCompleteTextView mTxtPhoneNo;
private Panel bottomPanel;
private Panel topPanel;
private Button btnsend;
private ProgressDialog pd;
//private String gateway_name;
private Spinner spinner1;
Context context;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    editUserName = (EditText) findViewById(R.id.editTextUserName);
    editPassword = (EditText) findViewById(R.id.editTextPassword);
    mTxtPhoneNo = (AutoCompleteTextView) findViewById(R.id.mmWhoNo);
    mTxtPhoneNo.setTextColor(Color.BLACK);
    editText = (EditText) findViewById(R.id.editTextMessage);
    spinner1 = (Spinner) findViewById(R.id.spinnerGateway);
    btnsend = (Button) findViewById(R.id.btnSend);
    btnsend.setOnClickListener(this);
    mPeopleList = new ArrayList<Map<String, String>>();
    PopulatePeopleList();
    mAdapter = new SimpleAdapter(this, mPeopleList, R.layout.custcontview,
            new String[] { "Name", "Phone", "Type" }, new int[] {
                    R.id.ccontName, R.id.ccontNo, R.id.ccontType });
    mTxtPhoneNo.setAdapter(mAdapter);
    mTxtPhoneNo.setOnItemClickListener(this);
    Button buttonPickContact = (Button) findViewById(R.id.btnContact);
    buttonPickContact.setOnClickListener(new Button.OnClickListener() {
        public void onClick(View arg0) {
            Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
            intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
            startActivityForResult(intent, RQS_PICK_CONTACT);
        }
    });     
    init();
    Panel panel;
    topPanel = panel = (Panel) findViewById(R.id.mytopPanel);
    panel.setOnPanelListener(this);
    panel.setInterpolator(new BounceInterpolator(Type.OUT));

}

@Override
 protected void onActivityResult(int requestCode, int resultCode, Intent data){
     super.onActivityResult(requestCode, resultCode, data);        
      if(requestCode == RQS_PICK_CONTACT){
          if(resultCode == RESULT_OK){
              Uri contactData = data.getData();
                Cursor cursor =  managedQuery(contactData, null, null, null, null);
                cursor.moveToFirst();
                String name = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                String number = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                sendSmsToNumber = number;
                trimContactNumber();
                mTxtPhoneNo.setText(name + " <" + number + ">");
          }
      }
 }

public void trimContactNumber() {
    sendSmsToNumber = sendSmsToNumber.replace("-", "");
    sendSmsToNumber = sendSmsToNumber.replace("+91", "");
    if(sendSmsToNumber.length() > 10){
        sendSmsToNumber = sendSmsToNumber.substring(1, sendSmsToNumber.length());
    }
}

public void PopulatePeopleList() {
    mPeopleList.clear();
    Cursor people = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    while (people.moveToNext()) {
        String contactName = people.getString(people.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        String contactId = people.getString(people.getColumnIndex(ContactsContract.Contacts._ID));
        String hasPhone = people.getString(people.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));

        if ((Integer.parseInt(hasPhone) > 0)) {
            Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                    null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = " + contactId, null, null);
            while (phones.moveToNext()) {
                String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                String numberType = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));
                Map<String, String> NamePhoneType = new HashMap<String, String>();
                NamePhoneType.put("Name", contactName);
                NamePhoneType.put("Phone", phoneNumber);
                if (numberType.equals("0"))
                    NamePhoneType.put("Type", "Work");
                else if (numberType.equals("1"))
                    NamePhoneType.put("Type", "Home");
                else if (numberType.equals("2"))
                    NamePhoneType.put("Type", "Mobile");
                else
                    NamePhoneType.put("Type", "Other");
                mPeopleList.add(NamePhoneType);
            }
            phones.close();
        }
    }
    people.close();
    startManagingCursor(people);
}

public void onItemClick(AdapterView<?> av, View arg1, int index, long arg3) {
    @SuppressWarnings("unchecked")
    Map<String, String> map = (Map<String, String>) av.getItemAtPosition(index);
    String name = map.get("Name");
    String number = map.get("Phone");
    mTxtPhoneNo.setText(name + " <" + number + ">");
    sendSmsToNumber = number;
    trimContactNumber();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private void init() {
    editUserName = (EditText) findViewById(R.id.editTextUserName);
    editPassword = (EditText) findViewById(R.id.editTextPassword);
    readPerson();
}

public void reset(View view) {
    PreferenceConnector.getEditor(this).remove(PreferenceConnector.NAME).commit();
    PreferenceConnector.getEditor(this).remove(PreferenceConnector.SURNAME).commit();
    PreferenceConnector.getEditor(this).remove(PreferenceConnector.AGE).commit();
    readPerson();
}

private void readPerson() {
    editUserName.setText(PreferenceConnector.readString(this,
            PreferenceConnector.NAME, null));
    editPassword.setText(PreferenceConnector.readString(this,
            PreferenceConnector.SURNAME, null));
}

public void save(View view) {
    String userNameTxt = editUserName.getText().toString();
    String PasswdTxt = editPassword.getText().toString();

    if (userNameTxt != null)
        PreferenceConnector.writeString(this, PreferenceConnector.NAME,userNameTxt);
    if (PasswdTxt != null)
        PreferenceConnector.writeString(this, PreferenceConnector.SURNAME,PasswdTxt);

}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_T) {
        topPanel.setOpen(!topPanel.isOpen(), false);
        return false;
    }
    if (keyCode == KeyEvent.KEYCODE_B) {
        bottomPanel.setOpen(!bottomPanel.isOpen(), true);
        return false;
    }
    return super.onKeyDown(keyCode, event);
}

public void onPanelClosed(Panel panel) {
    String panelName = getResources().getResourceEntryName(panel.getId());
    Log.d("TestPanels", "Panel [" + panelName + "] closed");
}

public void onPanelOpened(Panel panel) {
    String panelName = getResources().getResourceEntryName(panel.getId());
    Log.d("TestPanels", "Panel [" + panelName + "] opened");
}

public boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
}

public boolean isValid() {
    if (editUserName.getText().length() == 10 && editPassword.getText().length() != 0 && sendSmsToNumber.length() >= 10 && editText.getText().length() != 0) {
        return true;
    }
    return false;
}

private class sendMessageAsync extends AsyncTask<Void, Void, String>{
    String resultSet;

    @Override
    protected void onPreExecute(){
    }

    @Override
    protected String doInBackground(Void... arg0) {
        String usrname = editUserName.getText().toString();
        String usrPassword = editPassword.getText().toString();
        String number = sendSmsToNumber;
        String message = editText.getText().toString();
        String gateway_name = String.valueOf(spinner1.getSelectedItem());
        String gatewayToUse = gateway_name; 
        Log.i("Gateway", String.valueOf(spinner1.getSelectedItem()));
        String msgreciever = number;
        String testMessage = message;
        try{
            SmsSender.sendMessage(msgreciever, testMessage, usrname,usrPassword, gatewayToUse);
            resultSet = SmsSender.toastText;
            timerDelayRemoveDialog(5000, pd);               

        } catch(Exception ex){
            Toast.makeText(MainActivity.this,"Error",Toast.LENGTH_SHORT).show();
        }
        return resultSet;
    }

    @Override
    protected void onPostExecute(String result){
        //super.onPostExecute(result);
        pd.dismiss();
        Toast.makeText(MainActivity.this,resultSet,Toast.LENGTH_SHORT).show();
    }

}

public void timerDelayRemoveDialog(long time, final Dialog d){
    new Handler().postDelayed(new Runnable() {
        public void run() {
            sendMessageAsync sma = new sendMessageAsync();
            sma.cancel(true);
            d.dismiss();
            Toast.makeText(MainActivity.this,"Sending Failed. Using Backup Server. Please Wait..",Toast.LENGTH_SHORT).show();
            sendBackupMessageAsync sbma = new sendBackupMessageAsync();
            sbma.execute();
        }
    }, time); 
}

private class sendBackupMessageAsync extends AsyncTask<Void, Void, String>{
    String resultSet;

    @Override
    protected void onPreExecute(){
    }

    @Override
    protected String doInBackground(Void... arg0) {         
        String usrname = editUserName.getText().toString();
        String usrPassword = editPassword.getText().toString();
        String number = sendSmsToNumber;
        String message = editText.getText().toString();
        String gateway_name = String.valueOf(spinner1.getSelectedItem());
        String gatewayToUse = gateway_name; 
        Log.i("Gateway", String.valueOf(spinner1.getSelectedItem()));
        String msgreciever = number;
        String testMessage = message;
        try{
            BackupSender.sendMessage(msgreciever, testMessage, usrname,usrPassword, gatewayToUse);
            resultSet = BackupSender.toastText;
        } catch(Exception ex){
            Toast.makeText(MainActivity.this,"Error",Toast.LENGTH_SHORT).show();
        }
        return resultSet;
    }

    @Override
    protected void onPostExecute(String result){
        //super.onPostExecute(result);
        pd.dismiss();
        Toast.makeText(MainActivity.this,resultSet,Toast.LENGTH_SHORT).show();
    }

}

public void onClick(View v) {
    if (v == btnsend){
        if (!isOnline()){
            Toast.makeText(MainActivity.this,"No Internet Access..Cannot Send SMS",Toast.LENGTH_SHORT).show();
        } else if (!isValid()){
            Toast.makeText(MainActivity.this,"All fields are required. Try Again.",Toast.LENGTH_SHORT).show();
        } else {
            save(v);
            pd.setCancelable(true);
            pd = ProgressDialog.show(MainActivity.this, "Free Sms","Sending SMS. Please Wait", true); 
            sendMessageAsync sma = new sendMessageAsync();
            sma.execute();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:34:41.897

You have to implement a `onPostExcute` method in you asyncTask. This method should take care of the UI updates. For instance:

```
protected void onPostExecute(Object result) {
        if (pd != null)
            pd.cancel();

        if (result.equals("1")) {

            Toast.makeText(getApplicationContext(),
                    "The log file has been sent", Toast.LENGTH_LONG).show();

            Intent j = new Intent(SendLogDialog.this, MyClass.class);
            startActivity(j);
        }

        else if (result.equals("2")) {

            new ErrorDialog(getApplicationContext(), "File doesn't exist",
                    "The log file doesn't exist, can't send mail",
                    "Show Settings", 1);
        }

        else if (result.equals("3")) {
            new ErrorDialog(getApplicationContext(),
                    "Error sending log file",
                    "The log file could not be sent, please try again",
                    "Ok", 5);
        }

    } 
```

This is an example on how I show the user if something went wrong in processing of date in the `doInBackground` method. Notice that the `ErrorDialog` is a class that I created. If you want to start a new `Activity` from the `asyncTask` simply make a new `Intent` and start the Activity from the `onPostExecute`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T06:21:09.003

需要重构代码以实现取消操作。当你想取消有中断的异步任务时，你可以调用：

```
yourtask.cancel(true); 
```

**在您的 doInBackground 方法中，您需要通过调用isCancelled** ()来检查它是否被取消，以便尽快停止。取消操作后，它不会在您的异步任务中调用**onPostExecute方法。**

如果要指定超时，则不应将其放在**doInBackground**方法中。您想调用异步方法，然后调用第二个超时方法来取消之前的调用。

```
final MessageAsyncTask yourtask = new MessageAsyncTask();
yourtask.execute();
yourTimerDelayActiontoExecuteLater(5000, yourtask, d); // this will send cancel if finished flag is not set from async task 
```

您可以在异步任务中添加一个简单的构造函数，以不为不同的服务器名称创建另一个任务类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:20:39.600

> 引起：java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序 09-18 10:55:40.456: E/AndroidRuntime(3273): at android.os.Handler.(Handler .java:121) 09-18 10:55:40.456: E/AndroidRuntime(3273): 在 **android.widget.Toast** .(Toast.java:68) 09-18 10:55:40.456: E/AndroidRuntime(3273) : 在 android.widget。**Toast.makeText** (Toast.java:231) 09-18 10:55:40.456: E/AndroidRuntime(3273): 在 com.widgets.application.MainActivity$sendMessageAsync。**doInBackground** (MainActivity.java:260)

您在. **_** `doInBackground()`doInBackground() 在**非 UI 线程**上运行，您不能在其中执行 UI 功能。

因此，与其在 doInBackGround() 中烘烤任何东西，不如在其中设置一个标志，当您来到 onPostExecute() 时，检查该标志的值并在必要时制作 Toast。

# google-drive-api - 文件插入“application/vnd.google-apps.form” - 缺少什么？

> ID：12508558
> 
> 赞同：0
> 
> 时间：2012-09-20T08:14:38.170
> 
> 标签：google-drive-api

我正在 Google Drive 中创建一个“表单”。

```
File newFile = new File();
        newFile.setDescription(fileItemName);
        newFile.setTitle(fileItemName);
        newFile.setMimeType("application/vnd.google-apps.form");
insert = driveService.files().insert(newFile); 
```

文件夹、文档、电子表格、Pesentation ... 有效。但是创建一个表单会创建一个带有图标“表单”的条目和一个显示的链接：

“很抱歉。无法找到此 URL 中的电子表格。请确保您拥有正确的 URL 并且电子表格的所有者没有将其删除。

在 Google 文档帮助中心了解更多信息。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:55:00.653

API 不支持以编程方式创建表单，这就是文档无法正常工作的原因，但是，API 在创建过程中会返回正确的错误消息，而不是成功。我将跟进工程师并确保解决此问题。

# asp.net-mvc-3 - MVC3 RadioButtonFor 值未绑定到模型

> ID：12508559
> 
> 赞同：1
> 
> 时间：2012-09-20T08:14:39.157
> 
> 标签：asp.net-mvc-3, binding, model, radiobuttonfor

我有一个 MVC3 Razor 表单。它有一个单选按钮列表和一些其他文本字段。当我按下提交控制器发布操作时，获取视图模型，它的所有字段都设置正确，除了 RegionID。

**模型：**

```
 namespace SSHS.Models.RecorderModels
    {
        public class CreateViewModel
        {
             ...
             public int RegionID { get; set; }
             ...
        }
    } 
```

**控制器：**

```
 namespace SSHS.Controllers
    {
        public class RecorderController : Controller
        {
            ...
            public ActionResult Create()
            {
                EntrantDBEntities db = new EntrantDBEntities();

                List Regions = new List(db.Region); 
                List Schools = new List(db.School);
                List Settlements = new List(db.settlement);

                CreateViewModel newEntr = new CreateViewModel();

                ViewBag.Regions = Regions;
                ViewBag.Schools = Schools;
                ViewBag.Settlements = Settlements;

                return View(newEntr);
            }

            [HttpPost]
            public ActionResult Create(CreateViewModel m)
            {
                EntrantDBEntities db = new EntrantDBEntities();

                Entrant e = new Entrant()
                {
                    FatherName = m.FatherName,
                    Lastname = m.LastName,
                    LocalAddress = m.LocalAddress,
                    Name = m.Name,
                    RegionID = m.RegionID,
                    PassportID = m.PassportID,
                    SchoolID = m.SchoolID,
                    SettlementID = m.SattlementID,
                    TaxID = m.TaxID,
                };

                db.Entrant.AddObject(e);
                db.SaveChanges();

                return RedirectToAction("Index");
            }
    } 
```

**看法：**

```
 @model SSHS.Models.RecorderModels.CreateViewModel
    @using SSHS.Models 

    @using (Html.BeginForm("Create", "Recorder", FormMethod.Post))
    {       

        @foreach (Region item in ViewBag.Regions)
        {

           @Html.RadioButtonFor(m => m.RegionID, item.RegionID)
           @Html.Label(item.RegionName) - @item.RegionID

        }

          ...
          ...    

    }
```

Create(CreateViewModel m) 方法通常从所有文本框中获取数据，但 RegionID 始终为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:56:25.763

你打算如何填充单选按钮`int`？它有两种状态：选中和未选中。你能告诉我们，你想做什么？做广播群？用于. `bool`_`RadioButtonFor`

**添加：**

您需要编写如下内容：[MVC3.0 中的 CheckboxList](https://stackoverflow.com/questions/4872192/checkboxlist-in-mvc3-0)（在您的示例中，您将有单选按钮）

# android - 使视图无效的问题

> ID：12508561
> 
> 赞同：0
> 
> 时间：2012-09-20T08:14:50.233
> 
> 标签：android, layout, view, imageview, invalidation

我有一个应用程序，其布局可以加载一些远程图像。加载远程图像时，将显示一个强制高度为 100 的时钟（我从 imageview 覆盖了 onDraw），当远程图像下载并准备好显示时，时钟消失，然后图像出现。

它可以工作，但是当图像出现时没有收到正确的高度，它仍然具有时钟的高度（100）。

我不知道为什么，因为当显示图像时，它会调用一个处理程序来刷新图像的视图和具有新高度（365）的图像的容器布局，但它不能正常工作。

这是处理程序：

```
 Handler handler = new Handler(){
        @Override
        public void handleMessage(Message msg) {                
            super.handleMessage(msg);   
            if( ((ImageView)view) != null && resource != null && resource.image != null ){
                ((ImageView)view).setImageBitmap( resource.image );                                 
                view.getLayoutParams().height=height;
                ((ViewGroup)view.getParent()).getLayoutParams().height=height;
                ((ImageView)view).invalidate(); 
                ((ViewGroup)view.getParent()).invalidate();
                ((ViewGroup)view.getParent()).refreshDrawableState();
                view.invalidate();                      
            }
        }           
    }; 
```

正在调用处理程序，正在显示图像，处理程序上的高度值是正确的（365），但图像仍以时钟的高度显示（100）。

**另外我必须说，如果我挡住屏幕并取消挡住屏幕，图像将以正确的高度出现**（365）。invalidate() 似乎有问题。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:10:37.827

解决了

每次加载图像元素时，我都必须重新实例化视图：

视图 = 新的 FocusableImageView（活动）；

# javascript - Javascript增量变量以更新表格单元格onclick

> ID：12508563
> 
> 赞同：1
> 
> 时间：2012-09-20T08:14:55.180
> 
> 标签：javascript, html, html-table, onclick

我有一个页面，用户在其中输入颜色，然后调用 onClick 方法来更改表格中各个单元格的颜色。但是，当我单击任何单元格时，只有最后一个单元格（在本例中为 cell3）会改变颜色。我究竟做错了什么？

我得到错误：

> 消息：'document.getElementById(...)' 为空或不是对象
> 行：24
> 字符：4
> 代码：0

我的代码是：

```
 <html>

    <body>
    <input type='text' id='userInput' value='yellow' />

    <table border="1"> 
        <tr>
            <td id="1">cell1
            </td>
        </tr>
        <tr>
            <td id="2">cell2
            </td>
        </tr>
        <tr>
            <td id="3">cell3
            </td>
        </tr>

    </table>

    <script type="text/javascript">
    for(var i = 1; i <= 3; i++){
        document.getElementById(i).onclick = function(){
        var newColor = document.getElementById('userInput').value;
            document.getElementById(i).style.backgroundColor = newColor;
        }
    }
    </script> 
    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:26:11.593

将您的 HTML 更改为：ID 必须以字母字符开头。以数字开头是无效的。

```
<table border="1"> 
    <tr>
        <td id="td1">cell1
        </td>
    </tr>
    <tr>
        <td id="td2">cell2
        </td>
    </tr>
    <tr>
        <td id="td3">cell3
        </td>
    </tr>

</table> 
```

这是一个非常常见的 Javascript 问题：所有代码共享循环结束时的`i`值。`3`您可以通过使用另一个辅助函数来解决它，如下所示：

```
function changeIt(i) {
  // This inner function now has its own private copy of 'i'
  return function() {
    var newColor = document.getElementById('userInput').value;
      document.getElementById("td" + i).style.backgroundColor = newColor;
  }
}

for(var i = 1; i <= 3; i++){
    document.getElementById(i).onclick = changeIt(i);
} 
```

它也可以使用匿名函数编写，但这些更难阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:17:22.177

首先，你的 for 循环是错误的。尝试：

```
for(var i = 1; i <= 3; i++) {
   //code
} 
```

其次，不是每次在循环中检索元素，您可以使用`this`：

```
this.style.backgroundColor = document.getElementById('userInput').value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T08:44:08.350

Jeremy 的回答很接近，但在单击元素之前不会调用 changeIt 的问题，此时 i 的值仍为 3。使用 Jeremy 对 HTML 的更新，正确的脚本可以写成...

```
function createChangeColorHandler(n) {
  return function() {
    var newColor = document.getElementById('userInput').value;
    document.getElementById("td" + n).style.backgroundColor = newColor;
  }
}

for(var i = 1; i <= 3; i++) {
  // We pass i to the function createChangeColorHandler by value
  // at the time of this pass of the loop rather than referencing 
  // the variable directly after the loop has finished
  document.getElementById(i).onclick = createChangeColorHandler(i);
} 
```

作为一个匿名函数...

```
for(var i = 1; i <= 3; i++) {
  // We pass i to the function createChangeColorHandler by value
  // at the time of this pass of the loop rather than referencing 
  // the variable directly after the loop has finished
  document.getElementById(i).onclick = (function(n) {
    return function() {
      var newColor = document.getElementById('userInput').value;
      document.getElementById("td" + n).style.backgroundColor = newColor;
    }
  })(i);
} 
```

**编辑**杰里米的答案现在是正确的

# ruby-on-rails - 回形针的后处理在虚拟属性获取值之前开始？

> ID：12508564
> 
> 赞同：1
> 
> 时间：2012-09-20T08:15:00.080
> 
> 标签：ruby-on-rails, paperclip, before-filter

我在我的新项目中使用 Paperclip gem 来存储图像。我还编写了一个简单的自定义回形针处理器，用于根据裁剪参数裁剪图像，存储在模型的虚拟属性中。

因此，客户端使用模型的实际数据库字段和crop_x、crop_y、crop_w、crop_h 属性传输表单，控制器基于“params”创建新实例——进展顺利——我检查了它，但随后发生了一些奇怪的事情。

这是我的模型：

```
class Jewel < ActiveRecord::Base
has_many :line_items
belongs_to :material

******* some code *********

before_save :debugmeBS

validates :category_id, :presence => true

attr_accessor   :crop_x, :crop_y, :crop_w, :crop_h
attr_accessible :name, :category_id, :price, :crop_x, :crop_y, 
:crop_w, :crop_h, :image

after_update :reprocess_image, :if => :need_to_crop?

has_attached_file :image, :styles => { :full => "900x", :smallthumb => "80x80>" }, 
:processors => [:cropper, :thumbnail]

before_post_process :debugmePP

def need_to_crop?
    # debugger
    !crop_x.blank? && !crop_y.blank? &&!crop_w.blank? &&!crop_h.blank?
end

private 
    def debugmeBS
        debugger
        x=2

    end

    def debugmePP
        debugger
        x=3

    end
 end 
```

放置在我的自定义处理器中的调试器显示crop_x、crop_y 和其他虚拟属性为空白（通过调用“need_to_crop？”方法），同时其他非虚拟属性设置正确。为了追踪错误，我放置了两个“before_”事件：before_save 和 Paperclip 的 before_post_process。结果是 before_post_process 在 before_save 之前被调用，并且在我所有的“crop_”属性都是 nil 的那一刻，但是在 before_save 触发的那一刻，这些都被正确设置了。
所以问题是为什么？以及如何设置我的虚拟属性以供回形针处理器访问？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-13T23:53:05.960

我也碰到了同样的事情。查看 Paperclip 的代码（参见 lib/paperclip/ 下的 callbacks.rb、attachment.rb 和 paperclip.rb），似乎在将文件分配给属性时调用了 before_post_process 和 before__post_process 回调。我的猜测是，这是在设置模型上的其他属性之前发生的。

更新：我在 GitHub 问题上询问了 Paperclip 项目，我上面写的内容得到了证实。处理的时间取决于属性的分配时间。由于属性是按字母顺序分配的，根据 的名称，它可以在任何其他属性之前分配。

对于解决方法，您可以执行以下操作：

```
def create
  avatar = params[:resource].delete(:avatar)
  resource = Resource.new(params[:resource]
  resource.avatar = avatar
  resource save
end 
```

来源：[https ://github.com/thoughtbot/paperclip/issues/1279](https://github.com/thoughtbot/paperclip/issues/1279)

# xslt - 测试开始时的 XSL

> ID：12508566
> 
> 赞同：12
> 
> 时间：2012-09-20T08:15:13.620
> 
> 标签：xslt, xpath, xpath-2.0

鉴于这段 XML

```
<dc:date>info:eu-repo/date/embargoEnd/2013-06-12</dc:date>
<dc:date>2012-07-04</dc:date> 
```

我应该需要使用 XSL 仅输出**不以 . 开头** `info:eu-repo`的字符串的年份。我正在尝试这种方式，但它不起作用。我错了`for-each`？

```
<xsl:if test="not(starts-with('dc:date', 'info:eu-repo'))">
                <xsl:for-each select="dc:date">
                    <publicationYear>
                        <xsl:variable name="date" select="."/>
                        <xsl:value-of select="substring($date, 0, 5)"/>
                    </publicationYear>
                </xsl:for-each>
</xsl:if> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-20T08:18:52.990

`'`我猜您的查询中不需要`start-with`，并且您可能希望以稍微不同的方式迭代日期：

```
 <xsl:for-each select="dc:date">
         <xsl:variable name="date" select="."/>
         <xsl:if test="not(starts-with($date, 'info:eu-repo'))">
                <publicationYear>
                    <xsl:value-of select="substring($date, 0, 5)"/>
                </publicationYear>
        </xsl:if>
    </xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T11:14:26.430

你也可以使用 a`template-match`来得到你想要的，例如：

```
<xsl:template match="date[not(starts-with(.,'info:eu-repo'))]">
    <xsl:value-of select="."/>
</xsl:template> 
```

我有这个输入 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<list>
<date>info:eu-repo/date/embargoEnd/2013-06-12</date>
<date>2012-07-04</date>
</list> 
```

并将这个 XSLT 应用到它：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
<xsl:template match="text() | @*"/>

<xsl:template match="/">
    <xsl:apply-templates />
</xsl:template> 

<xsl:template match="date[not(starts-with(.,'info:eu-repo'))]">
    <xsl:value-of select="."/>
</xsl:template>

</xsl:stylesheet> 
```

我得到这个输出：

```
<?xml version="1.0" encoding="UTF-8"?>2012-07-04 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T11:30:00.023

**使用**（假设提供的 XML 片段是当前节点的子元素，并且只有一个元素具有所需的属性）：

```
substring-before(*[not(starts-with(., 'info:eu-repo'))], '-') 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <xsl:copy-of select=
     "substring-before(*[not(starts-with(., 'info:eu-repo'))], '-') "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（提供的片段包装在单个顶部元素中并声明了命名空间）：

```
<t xmlns:dc="some:dc">
    <dc:date>info:eu-repo/date/embargoEnd/2013-06-12</dc:date>
    <dc:date>2012-07-04</dc:date>
</t> 
```

**XPath 表达式从顶部元素进行评估，并将此评估的结果复制到输出**：

```
2012 
```

* * *

**二、具有所需属性的多个元素**：

在这种情况下，不可能使用单个 XPath 1.0 表达式生成所需的数据。

这个 XSLT 转换：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="*[not(starts-with(., 'info:eu-repo'))]/text()">
     <xsl:copy-of select="substring-before(., '-') "/>
==============  
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**：

```
<t xmlns:dc="some:dc">
    <dc:date>info:eu-repo/date/embargoEnd/2013-06-12</dc:date>
    <dc:date>2012-07-04</dc:date>
    <dc:date>info:eu-repo/date/embargoEnd/2013-06-12</dc:date>
    <dc:date>2011-07-05</dc:date>
</t> 
```

**产生想要的正确结果：**

```
2012
==============  
 2011
============== 
```

* * *

**三、XPath 2.0 单行**

```
*[not(starts-with(., 'info:eu-repo'))]/substring-before(., '-') 
```

**当这个 XPath 2.0 表达式从最后一个 XML 文档的顶部元素（上面最近的）进行评估时，就会产生所需的年份**：

```
2012 2011 
```

**基于 XSLT 2.0 的验证**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <xsl:sequence select=
   "*[not(starts-with(., 'info:eu-repo'))]/substring-before(., '-')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于最后一个 XML 文档时，将评估 XPath 表达式并将此评估的结果复制到输出**：

```
2012 2011 
```

* * *

**四。最普遍和最困难的情况**：

现在，让我们拥有这个 XML 文档：

```
<t xmlns:dc="some:dc">
    <dc:date>info:eu-repo/date/embargoEnd/2013-06-12</dc:date>
    <dc:date>2012-07-04</dc:date>
    <dc:date>info:eu-repo/date/embargoEnd/2013-06-12</dc:date>
    <dc:date>2011-07-05</dc:date>
    <dc:date>*/date/embargoEnd/2014-06-12</dc:date>
</t> 
```

我们仍然希望获取`dc:date`字符串值不以“info:eu-repo”开头的所有元素的年份部分。但是，以前的解决方案都不能与`dc:date`上面的最后一个元素一起正常工作。

**值得注意的是，所需的数据仍然可以由单个 XPAth 2.0 表达式生成**：

```
for $s in
      *[not(starts-with(., 'info:eu-repo'))]/tokenize(.,'/')[last()]
     return
       substring-before($s, '-') 
```

**当从上述 XML 文档的顶部元素评估此表达式时，会产生所需的正确结果**：

```
2012 2011 2014 
```

**这是基于 XSLT 2.0 的验证**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <xsl:sequence select=
   "for $s in
      *[not(starts-with(., 'info:eu-repo'))]/tokenize(.,'/')[last()]
     return
       substring-before($s, '-')
   "/>
 </xsl:template>
</xsl:stylesheet> 
```

# java - 如何在 App Engine 文件 API 中找到未定稿的文件？

> ID：12508567
> 
> 赞同：0
> 
> 时间：2012-09-20T08:15:13.133
> 
> 标签：java, google-app-engine

App Engine 文件 API 允许在 blobstore 或云存储中创建文件。一个文件基本上有两种状态：一个未完成的状态，您仍然可以附加到文件中；一个完成的状态，文件不能被附加，但您可以从文件中读取或通过 blobstore 或云存储提供它。

对于我的应用程序，在最终确定之前，我需要有一段时间处于未完成状态的文件。文档表明这很好。我正在使用 Java SDK。

我的问题是如何找到尚未最终确定的（孤立的）文件？在 blobstore 中，我认为它还没有密钥，所以我找不到它。我不确定它如何与云存储一起使用。孤立文件最终会被垃圾收集吗？如果是，在什么时间之后？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:38:51.667

我想你可以。files API 没有很好的文档记录，但是您可以查看 file.py 的代码。在那里你可以找到一个统计功能。 [http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/files/file.py](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/files/file.py) 在我给出答案后，我保存您的问题是关于 Java 的。

# c# - Json.Net 序列化（JsonConverter.WriteJson）

> ID：12508569
> 
> 赞同：4
> 
> 时间：2012-09-20T08:15:23.413
> 
> 标签：c#, json, serialization, json.net

我正在使用出色的 Newtonsoft json.Net（版本 4.5.7.15008）库进行序列化和反序列化。

我想：

1.  序列化时忽略`.Databag`属性。
2.  自定义编写的 JSON。首先获取默认的 JSON，更改它并将更改后的 JSON 写入结果。

这些是我的课：

```
public interface ISimpleDatabag
{
    string Databag { get; set; }
}

[JsonConverter(typeof(JsonDataBagCreationConverter<Department>))]
public class Department : ISimpleDatabag
{
    [JsonIgnoreAttribute]
    public string Databag { get; set; }

    public string Name { get; set; }
    public Telephone[] Phones { get; set; }
}

[JsonConverter(typeof(JsonDataBagCreationConverter<Telephone>))]
public class Telephone : ISimpleDatabag
{
    [JsonIgnoreAttribute]
    public string Databag { get; set; }

    public string Name { get; set; }
    public string AreaCode { get; set; }
    public string Number { get; set; }
}

public class JsonDataBagCreationConverter<T> : JsonConverter where T : ISimpleDatabag, new()
{
    // Json.Net version 4.5.7.15008
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        // problem 1
        string jsonAsDefault = ""; // The json that would have been written have I not overridden WriteJson. How?
        // problem 1.a: Ignore the Databag property when writing the json.
        string myChangedJson = jsonAsDefault + "WhatEverIWant";
        // problem 2
        // Write myChangedJson to the resulting json string instead of jsonAsDefault

        // try
        //serializer.ReferenceLoopHandling = ReferenceLoopHandling.Serialize; // Otherwise self referencing loop detected, but then...
        // JObject jobj = JObject.FromObject(value, serializer); //... Stack overflow
        // jobj.WriteTo(writer);

        // try
        // writer.WriteValue(value); // "Unsupported type: Department

        // try
        //serializer.ReferenceLoopHandling = ReferenceLoopHandling.Serialize; // Otherwise self referencing loop detected, but then...
        // serializer.Serialize(writer, value); // ...Stack overflow

        // try
        // base.WriteJson(writer, value, serializer); base class is abstract
    }

    protected T Create(Type objectType, JObject jsonObject)
    {
        return new T();
    }

    public override bool CanConvert(Type objectType)
    {
        return typeof(T).IsAssignableFrom(objectType);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var jsonObject = JObject.Load(reader);
        var target = Create(objectType, jsonObject);
        serializer.Populate(jsonObject.CreateReader(), target); // Will call this function recursively for any objects that have JsonDataBagCreationConverter as attribute
        ((ISimpleDatabag)target).Databag = jsonObject.ToString(); // This is where custom data is stored in databag
        return target;
    }
}

public class IgnoreDataBagContractResolver : DefaultContractResolver
{
    protected override JsonProperty CreateProperty(MemberInfo member, MemberSerialization memberSerialization)
    {
        JsonProperty property = base.CreateProperty(member, memberSerialization);
        if (property.PropertyName.ToLower() == "databag")
        {
            property.Ignored = true;
            return property;
        }
        return property;
    }
} 
```

和调用：

```
public Form1()
    {
        InitializeComponent();

        string jsonInput = "{\"Name\": \"Seek4\" , \"CustomDepartmentData\": \"This is custom department data\", \"Phones\":[ {\"Name\": \"A\", \"AreaCode\":444, \"Number\":11111111} ,{\"Name\": \"B\", \"AreaCode\":555, \"Number\":987987987}, {\"Name\": \"C\", \"AreaCode\":222, \"Number\":123123123, \"CustomPhoneData\": \"This is custom phone data\"} ] }";
        Department objDepartment = JsonConvert.DeserializeObject<Department>(jsonInput); // Yes, it works well
        objDepartment.Name = "Seek4Cars";
        string json = ToSeek4Json(objDepartment); // This is my problem: Ignore Databag property and control the output json for each property
    }

    public static string ToSeek4Json(object objectToConvertToJson)
    {
        JsonSerializerSettings serializerSettings = new JsonSerializerSettings();
        IgnoreDataBagContractResolver contractResolver = new IgnoreDataBagContractResolver();
        serializerSettings.ContractResolver = contractResolver;
        return JsonConvert.SerializeObject(objectToConvertToJson, Formatting.None, serializerSettings);
    } 
```

# iphone - cocos2d 和 XCode 4.5：应用程序突然纵向

> ID：12508570
> 
> 赞同：2
> 
> 时间：2012-09-20T08:15:26.327
> 
> 标签：iphone, ipad, cocos2d-iphone, orientation, xcode4.5

如果我在 iPad 上构建我的应用程序，它似乎处于纵向模式，并且设备方向更改不会影响它。我知道现在很早，但这非常重要，因为我必须尽快完成应用程序。有人知道解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:24:23.047

[好的，我在cocos2d 论坛](http://www.cocos2d-iphone.org/forum/topic/33326)中遇到了一个修复程序

只需进入您的应用程序委托并更改这行代码：

```
// set the Navigation Controller as the root view controller
[window addSubview:viewController.view]; 
```

对此：

```
// set the Navigation Controller as the root view controller
[window setRootViewController: viewController]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:14:46.577

我认为您使用的是 cocos2d-v-1.0 版本。尝试新的 cocos2d 版本（cocos2d-v2.0），它会正常工作。

在 appdelegate.m

```
navController_ = [[UINavigationController alloc] initWithRootViewController:director_];
    navController_.navigationBarHidden = YES;
[window_ setRootViewController:navController_];

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

就我而言，它工作正常，一旦检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T05:31:23.087

plist 不是由摘要设置的。通常您可以在摘要中设置设置。

这应该允许您在两个设备的目标摘要中设置方向：

1.  点击蓝色图标

2.  单击双铅笔和尺子图标

3.  点击摘要

4.  单击适用的支持的接口方向

但是这个界面有问题。设置未从此屏幕正确更改。

您必须手动设置 plist。

1.  在项目导航器的 Supporting Files 中找到 NAME-Info.plist

2.  初始界面方向

3.  设置支持的界面方向 (iPad)

4.  设置支持的界面方向 (iPhone)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T20:28:49.273

我尝试了@user1066899 方法，但没有成功。但是，我确实通过完全删除“shouldAutorotateToInterfaceOrientation”委托方法并在“摘要”下的构建设置中设置支持的横向方向来解决此问题。

# php - 在应用程序中实现 w3schools ajax 示例

> ID：12508577
> 
> 赞同：0
> 
> 时间：2012-09-20T08:15:47.903
> 
> 标签：php, jquery, sql, database, forms

我在实现 W3C 网站上的 ajax 示例时遇到了困难。该示例从数据库中提取结果并根据从下拉菜单中选择的选项将它们显示在表中。

[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

我已尝试配置此示例以满足我的要求。这是根据选择的选项更新数据库中的字段。我想我很接近我只是想确保我在正确的轨道上。选择选项时，将进行AJAX调用，从而触发我的PHP脚本以进行更改。它看起来像这样：

```
<?php
$q = mysql_real_escape_string($_POST['q']);
print_r($_GET["q"]);

$con = mysql_connect('localhost', '', '');
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("Orders", $con);

$sql= "UPDATE Orders SET status='.$_POST[q]['.$i.'].' WHERE   ID='.$_POST[order_no]    ['.$i.'].'"; 
```

但是，此数据并未输入数据库。我可以检索 $q 的值，它是“已批准”、“待定”或“未批准”，但不能检索特定订单号来更新该单独的行。我的选择框如下所示：

```
echo '<select name="order_status[]" id="id" onchange="showUser(this.value)">';
    echo '<option value = "Pending"  name="order_status['.$i.']" class =       "pending"' . ($row['status'] == 'Pending' ? ' selected=selected' : '') . '>Pending</option>';
    echo '<option value = "Approved" name="order_status['.$i.']" class = "approved"' . ($row['status'] == 'Approved' ? ' selected=selected' : '') . '>Approved</option>';
    echo '<option value = "Disapproved" name="order_status['.$i.']" class ="disapproved"' . ($row['status'] == 'Disapproved' ? ' selected=selected' : '') . '>Disapproved</option>'; 
```

这包含在表单中，该表单还根据选中的复选框发送电子邮件。此功能有效，我可以向单个行发送电子邮件：

```
 <form method ="post" action="sendemail.php">
    echo '<td><input type="checkbox" name="order_selected['.$i.']"/></td>';

//in send mail.php:
    if(isset($_POST['order_selected']))
    {
    $keys = array_keys($_POST['order_selected']);

    foreach($keys as $key)
//send email 
```

我需要在同一个 php 脚本中实现更新代码吗？或使用相同的方法循环遍历数组？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:51:01.293

根据您的描述，我不确定您的问题是什么，但是通过查看您的代码，您的 SQL 语句中有一些语法错误。

```
$sql= "UPDATE Orders SET status='.$_POST[q]['.$i.'].' WHERE   ID='.$_POST[order_no]    ['.$i.'].'"; 
```

应该

```
 $sql= 'UPDATE Orders SET status="' . $_POST['q'][$i] . '" WHERE   ID="' . $_POST['order_no'][$i] . '"'; 
```

从您的代码中也不清楚您的 $i 变量来自哪里，并且在 SQL 语句中使用它之前您也没有对 $_POST['order_no'] 进行任何验证，这将使您容易受到 SQL 注入的攻击。

此外，这个 ajax 示例也是一种非常古老的做事方式。我总是会包含 jQuery 库并在那里使用 jQuery.ajax() 函数[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)它为您完成所有跨浏览器的工作。它还使得从 DOM 元素中选择数据并将它们解析为 $_POST 或 $_GET 变得非常容易。然后通过使用回调函数，您可以继续处理 php 脚本的结果。

```
$('select.foo').change(function() {
     var post = {
         status: $('select.foo option:selected').val();    // get the value from a dropdown 
     }

    $.ajax({
       type: "POST",
       url: "some.php",
       data: post,
       success: function(returnData){
           if(returnData == 1){
               alert('updated');
           }
      }
    });
}); 
```

# c# - 将 Between 和其他函数实现为 LINQ 的表达式

> ID：12508578
> 
> 赞同：2
> 
> 时间：2012-09-20T08:15:52.193
> 
> 标签：c#, linq, linq-to-sql, linq-to-objects

我有这样的事情：

```
public class HomeWork
{
    public DateTime Starts {get;set;}
    public DateTime Ends {get;set;}
} 
```

我想做一个这样的 LINQ 查询：

```
var xxx = from hwrk in HomeWorks
    where hwrk.Starts.Between(date1, date2) || hwrk.Ends.Between(date1, date2) || 
        date1.Beetween(hwrk.Starts, hwrk.Ends) || date2.Between(hwrk.Starts, hwrk.Ends)
    select hwrk; 
```

我可以制作一个适用于 DateTime 的扩展，但我需要该扩展也适用于 LINQ to SQL。

我发现了一些在内部使用 Where 方法的示例，但它适用于 IQueryable 接口。但我需要它适用于单个属性。在某些示例中，他们使用表达式，但我找不到执行此类操作的示例。

您能否举一个适用于属性和常规变量并且也适用于 LINQ to SQL 的扩展示例？或者只是这是我不能做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:14:54.287

您可以实现一个返回“介于”表达式的函数，然后使用[LinqKit 的 AsExpandable](http://www.albahari.com/nutshell/linqkit.aspx)，它允许您将可重用的表达式插入到您的 lambda 表达式中。

不过这会很复杂，我不建议在这种特殊情况下这样做。我认为手动执行会更简单，会重复，但会更简单，更容易维护。

话虽如此，我已经在下面使用表达式实现了它，因此您可以看到该方法。

第一步是创建一个返回“介于”表达式的方法。我已经使用`IComparable`接口实现了这一点，因此您可以将其用于任何可比较的类型。

```
public static Expression<Func<TComparable, TComparable, TComparable, bool>> Between<TComparable>(this TComparable thisComparable) where TComparable : IComparable
{
    return (value, lower, upper) => lower.CompareTo(value) <= 0 && value.CompareTo(upper) <= 0;
} 
```

然后你可以像这样使用它：

```
var between = Extensions.Between<DateTime>(); 
```

`AsExpandable`可以使用 LinqKit 的和`Invoke`方法将该表达式插入到您的查询中：

```
var query = from m in context.Members.AsExpandable()
            where between.Invoke(m.CreatedDate, startDate, endDate)
            select m; 
```

这在使用 Linq to SQL 时会产生以下 SQL：

```
-- Region Parameters
DECLARE @p0 DateTime = '2012-09-13 11:01:10.103'
DECLARE @p1 DateTime = '2012-09-20 11:01:10.103'
-- EndRegion
SELECT [t0].[MemberID], [t0].[Firstname], [t0].[Surname], [t0].[Email], [t0].[CreatedDate]
FROM [Member] AS [t0]
WHERE (@p0 <= [t0].[CreatedDate]) AND ([t0].[CreatedDate] <= @p1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:14:41.543

你发现使用`IQueryable`接口是要走的路，你不能那样做你想做的事，你必须接受你的表达并对待它，以便 Linq to SQL 提供程序可以理解它，我知道的唯一方法是：

*   将您的方法的“虚拟”实现编写`Between`为的扩展方法`DateTime`
*   编写一个您将调用的`IQueryable<T>`扩展方法（例如），而不是，将相同的谓词传递给它`Expand``Where`
*   在里面`Expand`你必须分析你收到的表达式树并生成一个新的，你的`Between`调用被翻译成`and`表达式`<=`和`=>`检查，Linq to SQL 会理解

如果您的问题只是这种特定情况，我会按照 Jon48 所说的做 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:57:49.870

我可能不会直接回答您关于扩展 Linq2SQL 的一般性问题，但从您的示例中，您正在寻找在某个时间段内开始或结束的作业。在逻辑方面，鉴于`start < end`，您可以简化这样做：

```
where hwrk.Starts <= date2 && hwrk.Ends >= date1 
```

# java - 如何捕获 Hibernate DB 连接错误异常？

> ID：12508580
> 
> 赞同：2
> 
> 时间：2012-09-20T08:15:58.670
> 
> 标签：java, hibernate, exception

我在我的开发和 WAS Liberty Profile 中使用 Hibernate 3 作为我的本地开发服务器。我正在尝试在数据库服务器关闭时创建异常处理。为此，我正在尝试通过连接`hibernate.cfg.xml`到此测试的假 IP 地址来模拟环境。

我有以下 JAVA 代码，但是当数据库连接未准备好时，异常代码中没有捕获异常。控制台输出显示无法获取连接作为警告。我可以知道如何在异常代码中捕获我的场景而不是将其显示为警告吗？

**JAVA代码**

```
 public class HibernateUtil { 
     static {
       try {
         log.info("HibernateUtil.static - Begin");

         if (cacheFactory.get("Factory") == null) {
           sessionFactory = new Configuration().configure().buildSessionFactory();
           cacheFactory.put("Factory", sessionFactory);
         } else {
           sessionFactory = (SessionFactory) cacheFactory.get("Factory");
         }

         log.info("HibernateUtil.static - end");

       } catch (HibernateException ex) {
         throw new RuntimeException("[Exception] : " + ex.getMessage(), ex);
       }
     }

     ...
     ...
   } 
```

**控制台输出**

```
INFO  2012-09-20 15:24:16,314 [HibernateUtil.java:37] - HibernateUtil.static - Begin

[WARNING ] recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
[WARNING ] Property [hibernate.cglib.use_reflection_optimizer] has been renamed to [hibernate.bytecode.use_reflection_optimizer]; update your properties appropriately
[WARNING ] recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
[WARNING ] Property [hibernate.cglib.use_reflection_optimizer] has been renamed to [hibernate.bytecode.use_reflection_optimizer]; update your properties appropriately
[WARNING ] Could not obtain connection to query metadata

INFO  2012-09-20 15:24:24,001 [HibernateUtil.java:46] - HibernateUtil.static - end 
```

**休眠配置**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.connection.url">jdbc:db2://192.168.1.6:51201/MYDB</property>
    <property name="hibernate.connection.username">myuser</property>
    <property name="hibernate.connection.password">MyPassword</property>

    <property name="hibernate.connection.driver_class">com.ibm.db2.jcc.DB2Driver</property>
    <property name="hibernate.dialect">org.hibernate.dialect.DB2Dialect</property>
    <property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</property>
    <property name="hibernate.jdbc.batch_size">100</property>
    <property name="hibernate.show_sql">false</property>

    <property name="hibernate.connection.release_mode">auto</property>
    <property name="current_session_context_class">thread</property>
    <property name="hibernate.connection.autocommit">true</property>
    <property name="hibernate.transaction.flush_before_completion">true</property>
    <property name="hibernate.transaction.auto_close_session">false</property>
    <property name="hibernate.cglib.use_reflection_optimizer">true</property>

    ...

    </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:41:50.833

我想你需要的是`test-on-connection-acquire`

似乎您正在使用默认的 Hibernate 连接池。不幸的是，hibernate 连接池不支持他的属性，他们推荐第三方连接池库，如 C3P0。

Hibernate的[官方文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-hibernatejdbc)不鼓励使用它们的默认连接。

> 然而，Hibernate 自己的连接池算法非常初级。它旨在帮助您入门，而不是用于生产系统，甚至不用于性能测试。您应该使用第三方池以获得最佳性能和稳定性。

[这是](http://www.mkyong.com/hibernate/how-to-configure-the-c3p0-connection-pool-in-hibernate/) 使用休眠配置 C3P0 的方法。[以下是](http://www.mchange.com/projects/c3p0/index.html#configuring_connection_testing)用于测试连接的 C3P0 的相关属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:27:08.510

什么类产生警告？我的猜测是您没有捕获异常，因为它没有被抛出。如果是这种情况，也许您可​​以测试是否在您的代码中建立了连接并自己抛出异常。

# iphone - iPhone 应用程序 - 带有预填充文本的 Google plus 共享

> ID：12508587
> 
> 赞同：5
> 
> 时间：2012-09-20T08:16:14.963
> 
> 标签：iphone, ios

我听说我们可以使用此链接在 Google+ 上分享 [https://plus.google.com/share?url=YOUR_URL_HERE](https://plus.google.com/share?url=YOUR_URL_HERE)

我们如何在“分享/帖子”中添加文本？（就像在 Twitter 中，我可以设置“预填充文本”参数）它的 URL 参数是什么？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T13:27:14.150

如果您想将您的应用与 Google+ 紧密集成，我建议您使用此处列出的 SDK：[https ://developers.google.com/+/mobile/ios/](https://developers.google.com/+/mobile/ios/)

分享一点：[https ://developers.google.com/+/mobile/ios/#share_on_google](https://developers.google.com/+/mobile/ios/#share_on_google)

创建您的共享对象：

```
GooglePlusShare *share =
    [[[GooglePlusShare alloc] initWithClientID:clientID] autorelease];
share.delegate = self; // optional
appDelegate.share = share; //optional 
```

在按钮的 IBAction 中：

```
- (IBAction) didTapShare: (id)sender {
  // Add code here to retrieve the value of "share"
  // This could be self.share if this is a property of your ViewController
  // or ((MyAppDelegate *)[[UIApplication sharedApplication] delegate]).share

  [[[[share shareDialog]
      setURLToShare:[NSURL URLWithString:@"URL_TO_SHARE"]]
          setPrefillText:@"YOUR TEXT HERE"] open];

  // Or, without a URL or prefill text:
  [[share shareDialog] open];
} 
```

Google+ 网址处理程序：

```
- (BOOL)application: (UIApplication *)application
              openURL: (NSURL *)url
    sourceApplication: (NSString *)sourceApplication
           annotation: (id)annotation {
  // ...

  if ([self.share handleURL:url
          sourceApplication:sourceApplication
                 annotation:annotation]) {
    return YES;
  }

  // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:40:50.320

我做了一些研究并想出了这个：

*   Google+ 与[Twitter](https://dev.twitter.com/docs/tweet-button)等相反，除了 URL 的“url”和语言代码的“hl”之外，不允许任何查询参数。[（来源：developers.google.com 上的文档）](https://developers.google.com/+/plugins/share/#sharelink-endpoint)
*   [Google+ 使用通过schema.org 微数据格式](http://www.schema.org/docs/gs.html)提供的元信息来决定使用哪一部分内容。[（来源：这篇关于同一主题的德国博客文章）](http://www.video-flash.de/index/google-plus-button-share-bild-text-festlegen/)

**也就是说，如果您控制共享页面**，您应该能够影响 +1-share-thingy 的内容。如果没有，似乎仍然没有办法做到这一点。

另外：这个问题似乎与[Vitali Ponomar 2012-02-26 提出的这个问题几乎完全相同](https://stackoverflow.com/questions/9456592/google-share-url-what-parameters-does-it-use)

# amazon-dynamodb - 如何创建警报以检测 DynamoDb 限制已达到一定百分比然后增加它

> ID：12508594
> 
> 赞同：5
> 
> 时间：2012-09-20T08:16:27.967
> 
> 标签：amazon-dynamodb, amazon-sns, amazon-cloudwatch

我正在编写一个 Web 应用程序，该应用程序每天的流量都在稳步增加。我想创建一个警报，可以检测我的读/写限制是否达到一定百分比（如 80%），然后增加该限制。然后我会在午夜再次减少它。

我试过创建一个警报 - “平均”似乎有点没用，而且总是 1.0。“总和”更有用，所以我认为我应该使用它。我还假设我应该在指标名称中使用 Consumed Write/Read Capacity。

问题：

*   Sum 似乎使用“Count”的绝对值作为其限制。如果我的 DynamoDB 设置为 100 写入，并且我设置了 80% 的警报，它会检查我的写入是否超过 0.8，而不是 80。

*   我已经设置了一个电子邮件主题，但这不正确 - 我假设我需要创建一个主题可以调用的函数/控制器。我将如何设置它，如果您有 2 个 Amazon VM，会被调用还是只有一个？或者这是错误的路线，并且可以对事件采取标准操作来增加 DynamoDB 限制，而无需编写任何代码。（我缺乏 SNS 知识可能在这里显示）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T12:42:46.353

**在运行 Amazon 的向导创建表时，它建议在80% 阈值**处创建警报并将其链接到**SNS 主题**。

在引擎盖下，对于 1 的 R/W 容量，这会在

*   ConsumedReadCapacityUnits >= 240 60 分钟
*   ConsumedWriteCapacityUnits >= 240 持续 60 分钟

`240 = 0.8*1*60*5`也就是说，`capacity(1) * seconds_in_5_minutes(300) * threshold(0.8)`. 60 分钟是警报时间。您可以缩短到 5 分钟，但这可能会增加误报的数量。

换言之，每次 5 分钟范围内消耗的容量单位的总和超过 24 阈值至少 1 小时时，都会触发警报。

注：5 分钟对应于采样周期。

在**SNS** [控制台](https://console.aws.amazon.com/sns/home?#s=TopicDetails)中，您可以将“**订阅者**”添加到主题。它们可以是电子邮件、HTTP(S) 回调……这允许您联系多个人/机器。

每次触发扩展逻辑时，您都需要使用 API 使用此公式自动更新警报。

# git - 忽略 zsh git 自动完成中的 ORIG_HEAD

> ID：12508595
> 
> 赞同：15
> 
> 时间：2012-09-20T08:16:31.040
> 
> 标签：git, zsh, zsh-completion

我使用 oh-my-zsh 和 git 自动补全。

如果我键入`git checkout org`并点击 TAB，我会得到以下结果：

> ```
> ORIG_HEAD
> origin/HEAD
> origin/mybranch 
> ```

如何使自动完成忽略`ORIG_HEAD`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-14T19:52:12.423

将此添加到您的`.zshrc`：

```
zstyle ':completion:*:*' ignored-patterns '*ORIG_HEAD' 
```

`ORIG_HEAD`当存在多个文件时，这将忽略所有以结尾的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T09:41:28.493

1.  您可以编辑 /usr/share/zsh/functions/Completion/Unix/_git 并在以下行中删除 ORIG_HEAD （我的第 5091 行）：

    `for f in HEAD FETCH_HEAD ORIG_HEAD MERGE_HEAD; do`

2.  你可以删除`.git/ORIG_HEAD`:)

# jquery - 获取包含文本上特定单词的选定元素 - jquery

> ID：12508598
> 
> 赞同：1
> 
> 时间：2012-09-20T08:16:34.970
> 
> 标签：jquery

我想检查所选项目是否包含特定单词。前任：

```
 <select name='project_type' id='type'>
  <option value='1'>Interpretation - S</option>
  <option value='2'>Interpretation - K</option>
  <option value='5'>Editing</option>
  <option value='7'>Translation</option>
  </select> 
```

查询：

```
<script type="text/javascript">
$(document).ready(function(){

        //Hide div w/id extra
       $("#work1").show();
       $("#work2").hide();
        // Add onclick handler to checkbox w/id selected
       $("#type").live('click', function(){

        // If checked
        if (!$("#type:selected").text(contains('interpretation')))
        {
            //show the hidden div
            $("#work1").show();
                    $("#work2").hide();
        }
        else    if ($("#type:selected").text(contains('interpretation')))
        {
            //otherwise, hide it
            $("#work2").show();
                    $("#work1").hide();
        }
      });

    });
</script> 
```

我需要获取包含文本“解释”的选定元素（我想要包含该单词的所有元素）。我做了这个：`$("#type:selected").text(contains('interpretation'))`但不起作用。请问，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:21:41.603

```
$('#type').change(function() {
    if ($(this).find(':selected').text().indexOf('Interpretation') > -1) {
        alert('selected value contains interpretation');    
    }
});​ 
```

[http://jsfiddle.net/HyG6D/](http://jsfiddle.net/HyG6D/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T08:22:03.220

尝试：

```
index = $("#type:selected").text().indexOf('interpreatation');
if(index == -1)
    //Show
else
    //Hide 
```

JavaScript 没有调用任何函数`contains`，已知的解决方法是检查特定短语或单词的索引。如果它不存在，则返回-1。

编辑：从问题的代码中更改了隐藏/显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:23:01.120

因为 'type' 是你的*select*标签的 id，所以你的选择器将不起作用。`:selected`伪选择器需要在*option*标签上，而不是在 select 标签上。在id='type' 的选择标签*内*找到选定的选项标签，如下所示：

```
!$("#type option:selected").text(contains('interpretation')){ ... 
```

见： [http ://api.jquery.com/selected-selector/](http://api.jquery.com/selected-selector/)

“ :selected 选择器适用于`<option>`元素......”

**更新**：我没有注意到你的配方没有`.contains` 正确使用。
.contains() 测试一个 DOM 元素是否包含另一个。因此，将我上面关于选择器的建议与 Zerkim 的解决方案结合起来，得出：

```
!$("#type option:selected").text().indexOf('Interpretation') > -1) 
```

...根据您的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T08:23:53.070

这有帮助吗？

```
$("#type option").each(function(k,v){

    if($(v).text().indexOf('interpreatation') != -1){

       //do something or add element to an array

    }

}); 
```

# javascript - 结合jquery代码块

> ID：12508604
> 
> 赞同：3
> 
> 时间：2012-09-20T08:16:53.907
> 
> 标签：javascript, jquery

我的 asp.net 页面中有这个脚本：

```
<script type="text/javascript">
  var mouseover_tid = [];
  var mouseout_tid = [];

  jQuery(document).ready(function () {
      jQuery('.menus > li').each(function (index) {
          jQuery(this).hover(

                function () {
                    var _self = this;
                    clearTimeout(mouseout_tid[index]);
                    mouseover_tid[index] = setTimeout(function () {
                        jQuery(_self).find('ul:eq(0)').fadeIn(200);
                    }, 400);
                },

                function () {
                    var _self = this;
                    clearTimeout(mouseover_tid[index]);
                    mouseout_tid[index] = setTimeout(function () {
                        jQuery(_self).find('ul:eq(0)').fadeOut(200);
                    }, 400);
                }

            );
      });

      jQuery('.menus > li > .children > li').each(function (index) {
          jQuery(this).hover(

                function () {
                    var _self = this;
                    clearTimeout(mouseout_tid[index]);
                    mouseover_tid[index] = setTimeout(function () {
                        jQuery(_self).find('ul:eq(0)').fadeIn(200);
                    }, 400);
                },

                function () {
                    var _self = this;
                    clearTimeout(mouseover_tid[index]);
                    mouseout_tid[index] = setTimeout(function () {
                        jQuery(_self).find('ul:eq(0)').fadeOut(200);
                    }, 400);
                }

            );
      });
  });   
</script> 
```

两个脚本块都相同，除了

```
jQuery('.menus > li >) 
```

和

```
jQuery('.menus > li > .children > li') 
```

我怎样才能结合这两个代码块。请建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:19:37.970

选择器的工作方式与 CSS 中的相同，因此您只需用逗号将它们分开即可：

```
jQuery('.menus > li, .menus > li > .children > li') 
```

# c# - System.ValueType 的实例是在堆上还是栈上？

> ID：12508612
> 
> 赞同：2
> 
> 时间：2012-09-20T08:17:22.067
> 
> 标签：c#, oop, class, memory-management

System.ValueType 是一个[类](http://msdn.microsoft.com/en-us/library/system.valuetype.aspx)，
但所有值类型都是结构。

如果我像这样创建 ValueType 的实例：

```
System.ValueType foo = 5; 
```

...它是保存在堆上还是堆栈上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:28:16.607

`System.ValueType` *不是值类型*。值类型是从 继承的东西，*但*`ValueType`不是`ValueType`它自己。所以：

```
System.ValueType foo = 5; 
```

在这里，`5`被加载到堆栈上。然后将其*装箱*（使用类型为 的盒子`int`）到堆上。然后将对象引用分配给引用`foo`。我们可以通过查看 IL 来看到这一点：

```
ldc.i4.5 // push int32 value 5 onto the stack
box int32 // box the value at the top of the stack, type int32
stloc.0 // assign to "foo" 
```

但是，通常：结构可以在堆上**或堆栈上****，**具体取决于上下文。坦率地说，哪个都没有关系——因为两者都是实现细节。重要的是*行为*......并且（至少在它们的未装箱形式中），关于结构的关键点是它们的分配时复制语义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T08:20:08.140

我会说，如果您查看 MSDN 页面，`System.Valuetype`您会找到答案：

> 值类型**要么是**堆栈分配的，要么是在结构中内联分配的。**引用类型是堆分配的。**引用类型和值类型都派生自最终的基类 Object。如果值类型必须表现得像对象，则在堆上分配一个使值类型看起来像引用对象的包装器，并将值类型的值复制到其中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T08:20:01.717

> 数据类型分为值类型和引用类型。值类型要么是堆栈分配的，要么是在结构中内联分配的。引用类型是堆分配的。

来源：http: [//msdn.microsoft.com/en-us/library/system.valuetype.aspx](http://msdn.microsoft.com/en-us/library/system.valuetype.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T08:20:28.317

所有值类型都可以存储在堆栈上（是的，我想说）但并非总是如此，无论如何，即使值类型从对象继承的这部分只是一个例外，因为.NET框架是如何构建的，这也允许保存完美的树状结构。

有关更高级的说明，您可以查看 Eric Lippert 的博客。

[http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx](http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx)

作为 Eric Lippert 博客的解释：

> 1.  它通常表述不正确：表述应该是“值类型可以存储在堆栈上”，而不是更常见的“值类型总是存储在堆栈上”。
>     
>     
> 2.  它几乎总是无关紧要的。我们一直在努力打造一个托管环境，其中不同类型的存储之间的区别对用户来说是隐藏的。与某些语言不同，在某些语言中，出于正确性原因，您必须知道特定存储是在堆栈上还是在堆上。
>     
>     
> 3.  它是不完整的。参考文献呢？引用既不是值类型也不是引用类型的实例，但它们是值。它们必须存放在某个地方。它们是在堆栈上还是在堆上？为什么从来没有人谈论它们？没有理由仅仅因为它们在 C# 类型系统中没有类型而忽略它们。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-20T08:22:06.127

# java - 批量正则表达式模式匹配

> ID：12508613
> 
> 赞同：0
> 
> 时间：2012-09-20T08:17:26.023
> 
> 标签：java, regex

我的数据库中有大量的正则表达式模式。每个正则表达式模式都有自己的 id。

```
    例如：
    身份证图案
    123 ^((?=.*\bjava\b)(?=.*\bpostgres\b).*)$
    第456章

```

我有一个包含不同类型技能信息的内容。
我想将所有这些正则表达式模式与上述内容相匹配。
是否可以一次性匹配所有正则表达式并检索 ID 字段本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:30:21.723

不，这行不通。正则表达式可以用于内容，但只为您提供有关匹配位置的信息。您的 ID 与表达式本身没有任何关系，因此我看不到将 ID 与表达式相关联的方法，然后遍历所有表达式并检查哪个表达式在内容中找到正匹配然后返回表达式的 ID。

# c++ - VCL表格申请

> ID：12508617
> 
> 赞同：-2
> 
> 时间：2012-09-20T08:17:44.910
> 
> 标签：c++, class, vcl

我正在使用 C++ 生成器。我在控制台应用程序中编写了两个类，我想在 VCL 表单应用程序中使用这些类。

我该怎么做呢？我是否必须将它们拆分为 .cpp 和 .h 文件，然后包含它们？还是有其他方法？

**更新**

这是我的代码：

```
class appointment
{
public:
    appointment();
    appointment(string aName, TDateTime aDate, TDateTime aReminderDateTime, string aType,
    string aLocation, string aComments, bool aIsImportant)
    {
        appName = aName;
        appDateTime = aDate;
        appReminderDateTime = aReminderDateTime;
        appType = aType;
        appLocation = aLocation;
        appComments = aComments;
        appIsImportant = aIsImportant;
    }
    void setAppName(string aName)
    {
        appName = aName;
    }
    void setAppDateTime(TDateTime aDateTime)
    {
        appDateTime = aDateTime;
    }
    void setappReminderDateTime(TDateTime aReminderDateTime)
    {
        appReminderDateTime = aReminderDateTime;
    }
    void printAppointmentDetails()
    {
        cout << "Appintment Date: " << appDateTime << endl;
        cout << "Appintment Reminder Date: " << appReminderDateTime << endl;
        cout << "Appintment Type: " << appType << endl;
        cout << "Appintment Location: " << appLocation << endl;
        cout << "Appintment Comments: " << appComments << endl;
        if (appIsImportant)
        {
            cout << "Appintment IsImportant: " << "Yes" << endl;
        } else {
            cout << "Appintment IsImportant: " << "No" << endl;
        }
    }
    void setAppType(string aType)
    {
        appType = aType;
    }
    void setAppLocation(string aLocation)
    {
        appLocation = aLocation;
    }
    void setAppComments(string aComments)
    {
        appComments = aComments;
    }
    void setAppIsImportant(bool aIsImportant)
    {
        appIsImportant = aIsImportant;
    }
    string getAppName()
    {
        return appName;
    }
    TDateTime getAppDateTime()
    {
        return appDateTime;
    }
    TDateTime getAppReminderDateTime()
    {
        return appReminderDateTime;
    }
    string getAppType()
    {
        return appType;
    }
    string getAppLocation()
    {
        return appLocation;
    }
    string getAppComments()
    {
        return appComments;
    }
    bool getAppIsImportant()
    {
        return appIsImportant;
    }
private:
    //appointment();
    string appName;
    TDateTime appDateTime;
    TDateTime appReminderDateTime;
    string appType;
    string appLocation;
    string appComments;
    bool appIsImportant;
    //person owner;
}; 
```

我知道对于字符串，在 .cpp 文件中使用以下内容：

```
const std::string& exampleString 
```

谈论 TDateTime 数据类型时是否使用相同的上下文？如果是这样，你能给我一个如何使用它们的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:24:11.170

很难说不看它们是如何集成到您的代码中的，但是为每个类创建单独的源文件和头文件并将它们包含在新项目中肯定没有什么坏处。然后，您也可以使用现有控制台应用程序中包含的相同文件。这样做当然不是一个坏习惯。

# php - PHP 用我的案例显示数据

> ID：12508619
> 
> 赞同：0
> 
> 时间：2012-09-20T08:17:47.357
> 
> 标签：php, mysql

我想要做的是，显示我自己的帖子并显示朋友的帖子（如果 status_friend value=1）。

这个脚本对朋友的帖子很有效，但我不能显示我自己的帖子。它喜欢 facebook/twitter，如果我添加某人成为朋友，那么朋友帖子将显示在我的新闻提要中。但现在我不能显示我的自我帖子。

任何想法 ？

```
SELECT
messages.msg_id, 
messages.message, 
messages.date_post, 
messages.url, 
messages.username, 
user.username, 
user.full_name, 
user.status_friend

FROM 

messages, 
user 

WHERE 
message.username = user.username AND user.status_friend = '1'
order by msg_id desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:25:50.790

也许，这就是你需要的。

```
SELECT
messages.msg_id, 
messages.message, 
messages.date_post, 
messages.url, 
messages.username, 
user.username, 
user.full_name, 
user.status_friend

FROM 

messages, 
user 
WHERE 
message.username = user.username AND
(user.status_friend = '1' OR user.username = 'myusername')

order by msg_id desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:26:40.523

如果你想在结果中看到你自己的帖子和你朋友的帖子，你需要这样的查询：

```
SELECT 
    messages.msg_id,
    messages.message,
    messages.date_post,
    messages.url,
    messages.username,
    user.username,
    user.full_name,
    user.status_friend
FROM
    users
    JOIN
    messages
    ON
        messages.username = users.username
WHERE
    users.username = 'your_user_name'
    OR users.status_friend = '1'
ORDER BY
    msg_id DESC 
```

我不确定我是否完全理解您的交友模式，如果不能回答您的问题，请发布一些详细信息。

# python - Python：实用内省

> ID：12508621
> 
> 赞同：5
> 
> 时间：2012-09-20T08:18:00.527
> 
> 标签：python, introspection

我经常发现自己使用缺乏足够文档的第三方库——包和模块。因此，研究源代码变得必不可少，但也可能是一项有些乏味的任务。我（我猜每个人）都使用`dir()`和`help()`函数开始使用，最近我开始使用该`inspect`模块。我想知道您用来深入研究记录不良的代码的“方法”是什么，以及如何提高这样做的效率。非常感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T09:15:02.103

我发现[IPython](http://ipython.org/)对于这类任务是必不可少的。( `?`show docstring) 和`??`(show source) 魔术命令，再加上 IPython 出色的完成系统和实时对象自省，对我来说真的很重要。

一个示例会话：

```
In [1]: import sphinx.writers <TAB>
# see available modules and packages - narrow down

In [1]: import shpinx.writers.manpage as manpage
In [2]: manpage.<TAB>
# list and complete on the module's contents 

In [3]: manpage.Writer?
# nicely formatted docstring follows

In [4]: manpage.Writer??
# nicely formatted source code follows

In [5]: %edit manpage
# open module in editor
# it really helps if you use something like ctags at this point

In [6]: %edit manpage.Writer
# open module in editor - jump to class Writer 
```

不幸的是，并非所有代码都可以通过这种方式进行检查。想想在模块中*做事*而不将它们包装在一个`if __name__ == '__main__'`或严重依赖魔法的项目中的项目（我想到了[sh](http://amoffat.github.com/sh/)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:44:40.177

我想用[http://pycallgraph.slowchop.com/](http://pycallgraph.slowchop.com/)或 doxygen 构建调用图。

事实上，`AST`模块和其他一些允许相对轻松的静态分析。我更想以某种方式执行动态分析（因为所谓的“func1”的值可能会改变，调用可能会变得完全不同）。

# model-view-controller - 将 JQuery UI 选项添加到 Ember 视图

> ID：12508628
> 
> 赞同：1
> 
> 时间：2012-09-20T08:18:35.350
> 
> 标签：model-view-controller, ember.js, sproutcore-2

假设我想将 Ember.js 示例[`todo app`](http://github.com/emberjs/todos)中的视图修改为可调整大小。

执行此操作的 JQuery 代码是：

```
$("#container").resizable() 
```

其中#container 代表一个div。我不确定这个片段应该属于应用程序结构中的哪个位置。它会进入 app.js 内部吗？下面列出了内容，我不确定哪种方法最适合放入上述代码段。

```
Todos = Ember.Application.create();

Todos.Todo = Ember.Object.extend({
  title: null,
  isDone: false
});

Todos.todosController = Ember.ArrayController.create({
  content: [],

  createTodo: function(title) {
    var todo = Todos.Todo.create({ title: title });
    this.pushObject(todo);
  },

  clearCompletedTodos: function() {
    this.filterProperty('isDone', true).forEach(this.removeObject, this);
  },

  remaining: function() {
    return this.filterProperty('isDone', false).get('length');
  }.property('@each.isDone'),

  isEmpty: function() {
    return this.get('length') === 0;
  }.property('length'),

  allAreDone: function(key, value) {
    if (arguments.length === 2) {
      this.setEach('isDone', value);

      return value;
    } else {
      return !this.get('isEmpty') && this.everyProperty('isDone', true);
    }
  }.property('@each.isDone')
});

Todos.CreateTodoView = Ember.TextField.extend({
  insertNewline: function() {
    var value = this.get('value');

    if (value) {
      Todos.todosController.createTodo(value);
      this.set('value', '');
    }
  }
});

Todos.MainView = Ember.View.extend({
  templateName: 'main_view'
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:41:42.610

通常当你在处理这样的 DOM 操作插件时，我喜欢将它添加到视图的`didInsertElement`方法中，其中`this.$()`是代表视图元素的 jQuery 对象。

```
Todos.MainView = Ember.View.extend({
  templateName: 'main_view',
  didInsertElement: function(){
    this._super();
    this.$().resizable();
  }
}); 
```

顺便说一句，该 todos 示例已被[https://github.com/emberjs/examples/tree/master/todos](https://github.com/emberjs/examples/tree/master/todos)取代，即使这样也已经过时了。

# java - 如何在我的登录应用程序中调用 SOAP 服务？安卓

> ID：12508629
> 
> 赞同：2
> 
> 时间：2012-09-20T08:18:36.053
> 
> 标签：java, android

请帮我解决我的问题

如何在我的应用程序中调用 SOAP 服务。

登录 - 进入应用程序

其中用户名和密码，然后单击按钮，然后检查密码是否正确。

感谢您分享给我的一些信息和示例。

我想在我的应用程序中使用这些图像

![在此处输入图像描述](../Images/ce6f5cc0170c7961f82ad6f6da8edc20.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:21:55.780

不幸的是，Android 没有它自己的 SOAP 库，您应该使用 3rd 方库。这应该会有所帮助：[Android WSDL/SOAP 服务客户端](https://stackoverflow.com/questions/1484122/android-wsdl-soap-service-client)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:23:21.560

您必须为名为 ksoap2 的 SOAP Web 服务使用第三方库。

ksoap2-android 为Android 平台提供了一个轻量级、高效的SOAP 库。

这是 android 中 SOAP Webservice 的一个很好的例子。

[肥皂安卓教程。](http://p-xr.com/android-development-tutorial-reading-soap-services/)

# sass - 如何让 SASS 将相对路径放在其输出中

> ID：12508630
> 
> 赞同：2
> 
> 时间：2012-09-20T08:18:39.747
> 
> 标签：sass

SASS 产生以下代码：

```
/* line 22, B:/home/game/www/sass/field/src/globals.sass */
.small-reports .wrap {
  padding: 2px 0 0;
} 
```

它是否具有保留调试信息的设置，但使其看起来像这样？：

```
/* line 22, /sass/field/src/globals.sass */
.small-reports .wrap {
  padding: 2px 0 0;
} 
```

不同的开发人员在他们的环境中有不同的路径，而在 Git 中保存结果文件很方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T20:21:35.300

如果除了 SASS 之外还使用 Compass，您可以使用`relative_assets`接受布尔值的属性来配置路径是相对的还是绝对的。

请参阅：[http ://compass-style.org/help/documentation/configuration-reference/](http://compass-style.org/help/documentation/configuration-reference/)

# paypal - 为什么我的运费已添加但未显示在 Paypal 嵌入式窗口的交易详情中

> ID：12508631
> 
> 赞同：1
> 
> 时间：2012-09-20T08:18:41.843
> 
> 标签：paypal, shipping, paypal-adaptive-payments

我正在尝试使用 Paypal Adaptive Payment 并让用户在嵌入式窗口中购买产品。问题是当我进入交易详细信息步骤（在贝宝嵌入式窗口中）时，我看到如下两行：

产品名称 $x.xx

（此处为空） $1.00

“这里的空”应该是“运费”之类的。我该如何设置？价格是正确的，但我的客户不会将其理解为运费？

这就是我构建 setPaymentOptions 的方式：

```
 $optStr = "requestEnvelope.errorLanguage=en_US";
            $optStr .= "&receiverOptions[0].receiver.email=$receiverEmail";
            $optStr .= "&receiverOptions[0].invoiceData.item[0].name={$data['item_name']}";
            $optStr .= "&receiverOptions[0].invoiceData.item[0].price=$itemPrice";
            $optStr .= "&receiverOptions[0].invoiceData.item[0].itemCount=1";
            $optStr .= "&receiverOptions[0].invoiceData.item[0].itemPrice=$itemPrice";
            $optStr .= "&receiverOptions[0].invoiceData.totalShipping={$data['item_shipping_fee']}";
            $optStr .= "&senderOptions.requireShippingAddressSelection=true";
            $optStr .= "&payKey={$data['paykey']}"; 
```

和动作类型：

```
$payStr = "actionType=CREATE&cancelUrl=$cancelUrl&currencyCode=USD&returnUrl=$returnUrl&requestEnvelope.errorLanguage=en_US&receiverList.receiver(0).amount=$receiverAmount&receiverList.receiver(0).email=$receiverEmail"; 
```

任何想法？谢谢！

# java - 如何在 WebView 中保存和加载 HTML 图像？

> ID：12508634
> 
> 赞同：2
> 
> 时间：2012-09-20T08:18:54.703
> 
> 标签：java, android, image, webview

我做一个电子邮件申请。当用户查看 html 时，它会首先加载 HTML 图像，当用户下次查看时，它会再次从 Internet 加载 HTML 图像。它不能节省带宽。我可以保存图像吗？如果可能的话，我可以在 WebView 中加载它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:21:24.263

我将覆盖 onLoadResource（注意不仅是图像，还有各种资源，如 CSS）手动下载图像并将其存储在本地。

* * *

*   另一种解决方案
    1.  下载所有 HTML 内容
    2.  解析内容以获取图像 URL
    3.  下载图像并将其存储在本地
    4.  将 URL 替换为您的本地路径：`src="file:///android_asset/html/image2.jpg"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:53:28.423

你可以使用加载它

web.loadDataWithBaseURL(null, getHtmlData(this,"IMAGEPATH");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:27:28.897

您应该解析您的 HTML 内容以下载图像并将其放在设备 sdcard 上。然后，您可以将 HTML 中的所有图像 src 替换为磁盘上的文件绝对路径。

```
String htmlToParse = item.getContent();

                Elements tags = Jsoup.parse(htmlToParse).select("img");
                if (!tags.isEmpty()) {
                    for (Element tag : tags) {
                        String url = tag.attr("src");
                        File f = downloadImage(url);
                        htmlToParse.replace(url, f.getAbsolutePath());
                    }
                } 
```

# c# - 后台工作人员类中的代表和事件

> ID：12508635
> 
> 赞同：0
> 
> 时间：2012-09-20T08:18:58.150
> 
> 标签：c#, .net, visual-studio-2010

```
Thread1.WorkerReportsProgress = true;  
Thread1.ProgressChanged += new ProgressChangedEventHandler(Function2HandleWhenProgressChanges); //When progress changes, define a function to handle  it.
Thread1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(Function2HandleWhenThreadIsFinished); //The function to run when the thread is finished
Thread1.DoWork += new DoWorkEventHandler(Thread1_DoWorkDo); //The function defining what the thread must do. 
```

现在，我知道 ProgressChangedEventHandler 是一个委托。一个代表，反过来，原来是一个类。

**1.“ProgressChangedEventHandler”属于哪个类？我没有在我的代码中定义任何内容。**

**2\. “ProgressChanged”是一个事件吗？如果是这样，它属于哪个类？**

**3\. 如果我没有指定“new ProgressChangedEventHandler”，代码仍然可以编译？像下面的东西。**

```
 Thread1.WorkerReportsProgress = true;  
 Thread1.ProgressChanged += Function2HandleWhenProgressChanges; //When progress changes,  define a function to handle  it.
 Thread1.RunWorkerCompleted += Function2HandleWhenThreadIsFinished; //The function to run when the thread is finished
 Thread1.DoWork += Thread1_DoWorkDo; //The function defining what the thread must do. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:24:14.833

1）它不属于任何人。它是 .NET 框架中单独定义的类型

2) 是的。它是在`BackgroundWorker`类上定义的（可以通过按 F1 在 MSDN 中查找它或通过在`BackgroundWorker`类的实例上调用它来见证）

3）它是语法糖。编译器可帮助您减少打字。

谷歌搜索“events and delegates .net”会显示很多很好的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:31:19.860

对您的问题的简短回答是：

1.  事件处理程序对象不一定属于任何类。就像任何其他对象一样，它们在框架内被定义为适当的命名空间。您可以在可以定义类的任何地方定义委托，因此您可以将其放置在命名空间中或嵌套在另一个类中。位置只取决于什么是有意义的。在您的特定示例中，[`ProgressChangedEventHandler`](http://msdn.microsoft.com/en-us/library/system.componentmodel.progresschangedeventhandler.aspx)属于`System.ComponentModel`命名空间并且不嵌套在另一个类中。

2.  是的，[`ProgressChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)在一个事件中，这也是`System.ComponentModel`命名空间的一部分。

3.  是的，这个速记有效。您正在比较的 2 种格式通常被认为是相同的符号并编译为相同的 IL，因此如果您愿意，请随意使用。实际上有一个很好的[SO question](https://stackoverflow.com/questions/2749868/new-eventhandlermethod-vs-method)讨论了这个符号，因为我大约一周前有同样的确切问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:04:28.037

> 一个代表，反过来，原来是一个类。

它不是一个类，它是一个**类型**。这就解释了你为什么问这些其他问题。将其视为方法的类型描述，返回类型和参数很重要。委托类型可帮助编译器确保您分配正确类型的事件处理程序方法。该方法必须具有与委托类型完全相同的返回类型和参数。如果不是这种情况，编译器会抱怨。这种类型安全在 .NET 中非常重要。

> “ProgressChangedEventHandler”属于哪个类？

它是委托类型，而不是类。它是在 .NET 框架中声明的。添加对 System.dll 的引用并将其放在`using System.ComponentModel`程序的顶部允许您在不拼写完整类型名称的情况下使用它。

> “ProgressChanged”是一个事件吗？

是的，它是 BackgroundWorker 类的事件。除了 DoWork 和 RunWorkerCompleted，您几乎总是订阅另外两个事件。

> 如果我没有指定“new ProgressChangedEventHandler”，代码仍然可以编译吗？

这就是所谓的“语法糖”。C#编译器可以从事件类型中分辨出需要什么样的委托类型，并会根据需要自动生成语句的“new ProgressChangedEventHandler”部分。很方便。然而，IntelliSense 将始终生成它。即使完整的语句是语法糖，您也永远不会显式分配 Delegate.Target 属性。它由编译器推断为 null 或*this*，具体取决于目标方法是否为静态。

# php - PHP 切换案例网址

> ID：12508636
> 
> 赞同：0
> 
> 时间：2012-09-20T08:19:03.540
> 
> 标签：php

我想让我的链接前：

*   www.bestproducts.com/products.php 到
*   www.bestproducts.com/?products 或
*   www.bestproducts.com/?page=products。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:43:47.227

我可以给你一个底部的例子。我也为我的页面做了这件事，但是，在我的例子中，我只是给你一个单一的值，而不是 page=products：p

然后链接是 index.php?p=members

基本上这里发生了什么，我的脚本会检查我给值 p 的值。让我用代码告诉你

html:

```
 <a href="index.php?p=members" title="Members">Members</a> 
```

我请求链接 p=members 在我的超链接中动态加载。在我的内容区域中运行的是一个寻找它的脚本。

```
<?php
     if (!empty($_GET['p'])){
        $pages_dir = 'inc/content';
        $pages = scandir($pages_dir, 0);
        unset($pages[0], $pages[1]);

        $p = $_GET['p'];

        if(in_array($p.'.inc.php', $pages)){
            include($pages_dir.'/'.$p.'.inc.php');  
            }
                else
            {
                echo 'Sorry, page not found';
            }
        }
    else
        {
             include($pages_dir.'/home.inc.php');
        }
?> 
```

为了将其溢出，if 语句检查请求超链接中的 p 值（还记得我在 html p=members 中说过吗？）我创建了一个变量来检查包含我的内容页面的文件夹 inc/content。该变量包含一个带有页面名称的数组（未设置的部分是它删除了文件夹中的 . 和 .. ）它创建了一个数组。然后我让它运行另一个 if else 语句。这告诉查找带有 taggs inc.php 的文件名（成员）（不需要 inc 部分，但我这样做了，所以很明显文件是一个包含）。如果它在数组中，包括它，如果不是，它告诉我找不到页面。如果 p 中没有值（关闭它），它基本上会打开我的索引页面。

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:23:15.957

我认为你想要漂亮的网址。然后你可以使用`htaccess`. [有关漂亮网址的更多信息](http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/)。`htaccess`（您必须在页面参数中创建额外的 url ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:24:55.203

如何完成任务：

```
$url = 'www.bestproducts.com/products.php';

$url_array = explode('/', $url);

$result_url1 = implode('/?', $url_array);

$result_url2 = implode('/?page=', $url_array); 
```

# python - python api-shopify.Asset 404错误

> ID：12508639
> 
> 赞同：2
> 
> 时间：2012-09-20T08:19:12.150
> 
> 标签：python, shopify

我正在尝试使用 shopify python 库创建资产，但出现 ResourceNotFound 异常。以下是我的代码片段。

```
asset = shopify.Asset(dict(key=self.key, theme_id=theme_id))
asset.attach(image.read())
asset.save() 
```

这是异常的堆栈跟踪

```
Traceback:
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/core/handlers/base.py" in get_response
  105\.                         response = middleware_method(request, callback, callback_args, callback_kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/mezzanine/pages/middleware.py" in process_view
  45\.             return view_func(request, *view_args, **view_kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/views/generic/base.py" in view
  48\.             return self.dispatch(request, *args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/utils/decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/contrib/auth/decorators.py" in _wrapped_view
  20\.                 return view_func(request, *args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/utils/decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/utils/decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs)
File "/home/rodxavierbondoc/workspace/sg/djangoproject/shopify_app/decorators.py" in wrapper
  10\.         return func(request, *args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/utils/decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2)
File "/home/rodxavierbondoc/workspace/sg/djangoproject/shopify_galleries/views.py" in dispatch
  81\.         return super(UploadImageView, self).dispatch(request, *args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/views/generic/base.py" in dispatch
  69\.         return handler(request, *args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/views/generic/edit.py" in post
  138\.             return self.form_valid(form)
File "/home/rodxavierbondoc/workspace/sg/djangoproject/shopify_galleries/views.py" in form_valid
  96\.             image.store_image(image_field)
File "/home/rodxavierbondoc/workspace/sg/djangoproject/shopify_galleries/models.py" in store_image
  62\.             asset.save()
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/shopify/base.py" in save
  151\.         return super(ShopifyResource, self).save()
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/pyactiveresource/activeresource.py" in save
  775\.                         data=self.to_xml())
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/pyactiveresource/connection.py" in put
  351\.         return self._open('PUT', path, headers=headers, data=data)
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/shopify/base.py" in _open
  18\.             self.response = super(ShopifyConnection, self)._open(*args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/pyactiveresource/connection.py" in _open
  287\.                 http_response = self._handle_error(err)
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/pyactiveresource/connection.py" in _handle_error
  407\.             raise ResourceNotFound(err)

Exception Type: ResourceNotFound at /galleries/upload/
Exception Value: Not Found: https://sawayn-and-sons9677.myshopify.com/admin/themes/3422503/assets.xml 
```

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:14:13.697

我在我们的日志中找到了您的请求，并注意到您使用的密钥是“14e2ccbe-601e-4bd8-bb61-726c221b53cf-6..png”。

资产需要位于合适的目录中。

*   液体模板=>“模板/”
*   液体布局=>“布局/”
*   液体片段=>“片段/”
*   主题设置 => "config/"
*   一般资产=>“资产/”
*   ETC

在您的情况下，您可能想要`key = "assets/14e2ccbe-601e-4bd8-bb61-726c221b53cf-6.png"`

对错误消息的无益感到抱歉。404 指的是找不到密钥的目录。

# xml - 使用不同的 XML 序列化器读写对象：Asp.net web-api

> ID：12508640
> 
> 赞同：1
> 
> 时间：2012-09-20T08:19:13.567
> 
> 标签：xml, xml-serialization, asp.net-mvc-4, asp.net-web-api

我想用来`DataContractSerializer`序列化响应和`XmlSerializer`反序列化传入请求中的 xml。可能吗？我知道我可以为不同的类型使用不同的序列化程序，但我想要不同的序列化程序进行读写。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:33:20.700

这似乎是一个非常奇怪的要求，但是是的，这是可能的。您可以像这样创建自定义 MediaType 格式化程序：

```
public class DcsXsFormatter : MediaTypeFormatter
{
    public DataContractXmlFormatter()
    {
        SupportedMediaTypes.Add(new System.Net.Http.Headers.MediaTypeHeaderValue("application/xml"));
        SupportedMediaTypes.Add(new System.Net.Http.Headers.MediaTypeHeaderValue("text/xml"));
    }

    public override bool CanWriteType(Type type)
    {
        return true;
    }

    public override bool CanReadType(Type type)
    {
        return true;
    }

    public override Task<object> ReadFromStreamAsync(Type type, Stream readStream, 
                                                     HttpContent content, 
                                                     IFormatterLogger formatterLogger)
    {
        var task = Task<object>.Factory.StartNew(() =>
            {
                var ser = new XmlSerializer(type);
                return ser.Deserialize(readStream);
            });

        return task;
    }

    public override Task WriteToStreamAsync(Type type, object value, 
                                    Stream writeStream, 
                                    HttpContent content, 
                                    TransportContext transportContext)
    {            
        var task = Task.Factory.StartNew( () =>
            {                    
                var ser = new DataContractSerializer(type);
                ser.WriteObject(writeStream,value);                    
                writeStream.Flush();
            });

        return task;
    }
} 
```

在 global.asax 中连接它：

// 移除现有的 XmlFormatter config.Formatters.Remove(config.Formatters.XmlFormatter);

```
// Hook in your custom XmlFormatter
config.Formatters.Insert(0, new  DcsXsFormatter()); 
```

但是你为什么要这样做呢？

# c# - 如何在 C# 中激活任务？

> ID：12508643
> 
> 赞同：0
> 
> 时间：2012-09-20T08:19:15.093
> 
> 标签：c#, asynchronous, task, task-parallel-library

我正在尝试在 Windows 8 中使用 wcf：我的代码使用 WCF 服务生成的方法：

```
public System.Threading.Tasks.Task<Maquette_MyAirport_Win8.FlightService.CitiesResponse> 
    GetAllCitiesAsync(Maquette_MyAirport_Win8.FlightService.BaseRequest request)
{
    return base.Channel.GetAllCitiesAsync(request);
} 
```

是

```
public testproxy()
{
    _client = new FlightInfoServiceClient(Maquette_MyAirport_Win8.FlightService.FlightInfoServiceClient.EndpointConfiguration.wsHttpBindingConfiguration);
    BaseRequest req = new BaseRequest();
    System.Threading.Tasks.Task<Maquette_MyAirport_Win8.FlightService.CitiesResponse> CitiesResponse = _client.GetAllCitiesAsync( new BaseRequest());
    CitiesResponse.ContinueWith(task => citiesL = task.Result.Cities.FirstOrDefault(););

} 
```

任务 cityResponse 的状态是“WaitingForACtivation”和 Result="Not yet Computed"

如何激活任务以及如何获得结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:27:12.020

您不必添加 async 和 await 来获取结果类型而不是 Task 类型吗？

它应该是这样的：

```
var result = await _client.GetAllCitiesAsync( new BaseRequest()); 
```

在方法中你应该添加 async

# c++ - std::async 有什么问题？

> ID：12508653
> 
> 赞同：18
> 
> 时间：2012-09-20T08:19:48.417
> 
> 标签：c++, multithreading, c++11, stdasync

[在 C++ And Beyond 的这段剪辑](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Scott-Andrei-and-Herb-Ask-Us-Anything)的开头附近，我听到了一些关于`std::async`. 我有两个问题：

1.  对于初级开发人员，是否有一套规则来说明在使用时应该做什么以及应该避免什么`std::async`？

2.  这段视频中存在哪些问题？它们与[本文](http://bartoszmilewski.com/2012/05/11/the-future-of-c-concurrency-and-parallelism/)有关吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-20T10:27:45.880

有几个问题：

1.  `std::async`如果没有启动策略，则运行时库可以选择是启动新线程还是在调用的线程中`get()`或`wait()`将来运行任务。正如 Herb 所说，这是您最可能想要使用的情况。问题在于，这让运行时库的 QoI 开放以获得正确的线程数量，并且您不知道任务是否会拥有自己的线程，因此使用线程局部变量可能会出现问题。据我了解，这就是斯科特所关心的。

2.  在您显式调用or之前，使用 的策略`std::launch::deferred`实际上不会运行任务。这几乎不是你想要的，所以不要那样做。`get()``wait()`

3.  使用策略`std::launch::async`启动一个新线程。如果您不跟踪您拥有多少线程，这可能会导致运行的线程过多。

4.  Herb 担心`std::future`析构函数的行为，它应该等待任务完成，尽管 MSVC2012 有一个错误在于它不等待。

对于初级开发人员，我建议：

*   `std::async`与默认启动策略一起使用。
*   确保你明确地等待你所有的未来。
*   不要在异步任务中使用线程本地存储。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-13T18:38:56.037

对于使用默认策略的建议，我完全不同意。

如果您经历了设计独立计算单元的痛苦，您可能不会期望它们在六个 CPU 旋转它们的拇指时按顺序运行，这可能“合法地”发生*，具体取决于您选择的编译器*。

默认行为的隐含假设是一些复杂的线程池机制将优化任务放置（可能让一些在调用者的 CPU 上按顺序运行），但这纯粹是幻想，因为没有指定 C++ 运行时必须做什么（这会走无论如何都超出了编译器运行时的范围）。

在我看来，这更像是设计上未定义的行为。

一个名为“async”的类应该启动异步执行单元，除非某些明确和确定的行为参数另有说明。

坦率地说，除了调试目的，我看不到 for 的用途`launch::deferred`，除非您打算编写自己的伪调度程序，在这种情况下，您最好使用纯线程。

所以我的建议是指定`launch::async`何时使用`async`, （告诉编译器类似“嘿，我想要一些异步任务，但*真的是*`async`异步的，好吗？”）如果您只想按顺序执行任务，则根本不要使用。

如果您的异步任务遇到问题，可以方便地恢复到`deferred`策略以更轻松地调试它们，但仅此而已。

# php - Onclick 重新加载页面

> ID：12508656
> 
> 赞同：0
> 
> 时间：2012-09-20T08:19:53.863
> 
> 标签：php

嗨，目前我的 Onclick 有问题，因为它不会在我的页面上重新加载这是我所拥有的。

```
 <div id="vpanel">
        <div>
        <form method="post" action="enrollalpha.php">
        <label>View Panel</label>
        <select name="Vpanel" onclick="return.this.form">
                              <option value="VS">Students</option>
                              <option value="VSc">Section</option>
                              <option value="VA">Adviser</option></select>
        </form>
        </div>
        </div> 
```

并且将在同一页面上使用此代码。

```
 <form method="post" action="">

        <div id="tbody"  class="scrollbar">
    <?php
         if(!empty($_POST['Vpanel'])){
         $vview = $_POST['Vpanel'];
         }else{
           $vview = 'VS';
        }
        if($vview == 'VS'){
            require_once 'vpanel_student.php';
        }else if($vview == 'VSc'){
            require_once 'vpanel_section.php';
        }else if($vview == 'VA'){
            require_once 'vpanel_adviser.php';
        }else{
            require_once 'vpanel_student.php';
        }
    ?>

        </div> 
```

希望对我做错的事情有任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:23:59.810

使用`this.form.submit()`和`onchange()`：

```
<select name="Vpanel" onchange="this.form.submit();">
    <option value="VS">Students</option>
    <option value="VSc">Section</option>
    <option value="VA">Adviser</option>
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T08:25:34.023

用下面的行替换你的代码

```
<select name="Vpanel" onchange="this.form.submit();"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:47:40.757

将 onclick 替换为 onchange，因为您想在您的选项选择更改时提交表单，而不是在您单击选择并使用 this.form.submit();

或者使用这个 html ：

```
<form id="form-vpanel" method="post" action="enrollalpha.php">
    <label>View Panel</label>
    <select id="vpanel" name="Vpanel">
        <option value="VS">Students</option>
        <option value="VSc">Section</option>
        <option value="VA">Adviser</option>
    </select>
</form> 
```

有了这个 JQuery ：

```
$('#vpanel').change(function() {
    $('#form-vpanel').submit();
}); 
```

# unit-testing - Reactive Extensions v2 中的 TestScheduler 是如何工作的

> ID：12508657
> 
> 赞同：2
> 
> 时间：2012-09-20T08:19:59.017
> 
> 标签：unit-testing, system.reactive

我一直在阅读：[Testing Rx Queries using Virtual Time Scheduling](http://blogs.msdn.com/b/rxteam/archive/2012/06/14/testing-rx-queries-using-virtual-time-scheduling.aspx)

我到了“使用单元测试项目”部分（大约在页面的中间）并自己尝试了（使用 VS2012 和 MSTest），但我的结果与文档中的不同。具体来说，我的断言失败了。

这是我的测试代码：

```
[TestMethod]
public void TestMethod1()
{
    var scheduler = new TestScheduler();

    var xs = scheduler.CreateColdObservable(
        OnNext(10, 42),
        OnCompleted<int>(20));

    var observer1 = scheduler.CreateObserver<int>();
    scheduler.Schedule(TimeSpan.FromTicks(190), 
                       (s, t) => xs.Subscribe(observer1));

    var observer2 = scheduler.CreateObserver<int>();
    scheduler.Schedule(TimeSpan.FromTicks(220), 
                       (s, t) => xs.Subscribe(observer2));

    scheduler.Start();

    observer1.Messages.AssertEqual(
        OnNext(200, 42),
        OnCompleted<int>(210));

    observer2.Messages.AssertEqual(
        OnNext(230, 42),
        OnCompleted<int>(240));
} 
```

我必须做出的一项改变是：

```
scheduler.Schedule(TimeSpan.FromTicks(190),
                   () => xs.Subscribe(observer1)); 
```

变成：

```
scheduler.Schedule(TimeSpan.FromTicks(190), 
                   (s, t) => xs.Subscribe(observer1)); 
```

老实说，我没有掌握这种变化的影响（我没有用 C# 编码那么久！）。

结果如下：

```
Assert.Fail failed. 
Expected: [OnNext(42)@200, OnCompleted()@210]
Actual..: [OnNext(42)@11, OnCompleted()@21] 
```

我理解它的方式是我正在创建一个冷可观察对象，它将在第 10 个刻度返回值 42，并且序列在第 20 个刻度完成。然后，我创建和观察者订阅了这个 observable，表明我希望计划从滴答 190 开始。因此，在滴答 200 (190 + 10) 测试值 42，完成时间在滴答 210。然而，我得到滴答 11 和分别为 21 个。

该文档基于 V2 的 pre-RTM，所以我不确定 TestScheduler 的行为是否在 RTM 中发生了变化，或者我是否在某个地方犯了错误。如果有人能解释发生了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T10:10:34.070

您似乎忘记了导入 System.Reactive.Concurrency 命名空间，其中定义了您要使用的 Schedule 重载。这解释了为什么您必须更改代码 - 便利扩展方法可能没有出现：

```
using System.Reactive.Concurrency; 
```

您正在使用的 Schedule 的重载是用于立即调度的，将 TimeSpan 值作为 TState 参数传递：

```
public IDisposable Schedule<TState>(TState state, Func<IScheduler, TState, IDisposable> action) 
```

因此，当调度程序在时间 0 开始时，对 xs 的订阅将立即执行。每个工作项都会增加时钟（在模拟单个执行线程的测试调度程序上不能同时发生任何事件），因此您会看到在时间 1 一个序列订阅，在时间 2 另一个序列订阅。

一种可能的解决方法是使用以下方法：

```
var observer1 = scheduler.CreateObserver<int>();
scheduler.ScheduleAbsolute(190, () => xs.Subscribe(observer1));

var observer2 = scheduler.CreateObserver<int>();
scheduler.ScheduleAbsolute(220, () => xs.Subscribe(observer2)); 
```

确保导入 System.Reactive.Concurrency 命名空间以查找这些重载。您也可以在这里使用 ScheduleRelative，因为调度程序尚未启动，到期时间将是当前调度程序的时钟值 (= 0) 加上指定的相对持续时间。

或者，您也可以使用 DateTimeOffset 或 TimeSpan 重载通过 IScheduler API 表面。请小心选择正确的重载（使用 F12 - 转到定义 - 查看您选择的重载）。

```
var observer1 = scheduler.CreateObserver<int>();
scheduler.Schedule(TimeSpan.FromTicks(190), () => xs.Subscribe(observer1));

var observer2 = scheduler.CreateObserver<int>();
scheduler.Schedule(TimeSpan.FromTicks(220), () => xs.Subscribe(observer2)); 
```

同样，确保使用 using 指令导入 System.Reactive.Concurrency 命名空间，以便查看此重载:-)。

# jquery - 使用 JQuery 访问下拉框的数组值

> ID：12508659
> 
> 赞同：0
> 
> 时间：2012-09-20T08:20:04.443
> 
> 标签：jquery, html

```
<select size="6" name="operator[]" id="operator[]" size="5" multiple="">
    <option value="1" >One</option>
    <option value="2" >Two</option>
    ....
    ....
    <option value="10" >Ten</option>
</select> 
```

我现在的问题是如何使用 jquery 访问下拉框的数组值？

```
$("#operator").val(); // Not working
$("#operator[]").val(); // Not working as well 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:30:17.807

这是无效`id`的`name`属性，请使用以下代码：

```
$("#operator").find('option:selected').each(function(){
    alert(this.value);
}); 
```

演示：[jsfiddle.net/VYjEM/](http://jsfiddle.net/VYjEM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:30:51.333

```
$("select[name='operator[]']").val(); 
```

示例：http: [//jsbin.com/eqoyes/1/edit](http://jsbin.com/eqoyes/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:29:53.127

第一件事。我认为不允许对元素 id 使用数组。话虽如此，请将元素 id 设置为“operator”而不是“operator[]”。

完成后，您可以通过多种方式获得选项：

1.  使用元素 dom id：

    ```
    $('#operator option'); 
    ```

2.  使用元素 dom 类型：

    ```
    $('select option'); 
    ```

3.  两者都使用（推荐）：

    ```
    $('select#operator option'); 
    ```

更多关于 jQuery 支持的选择器的信息可以在[官方网站上](http://api.jquery.com/category/selectors/ "官方网站")找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T08:28:20.593

语法`$("select").val()`将为您提供所选*选项*的*值。*如果您想掌握*所有*选项，请使用.**`$("select > option")`**

 **`[]`另外：在 id 属性中使用字符在[HTML 4 中是非法的](http://www.w3.org/TR/html401/types.html#type-name)，它不会给你带来任何特别的东西；你可能应该解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T08:28:54.093

你将不得不逃避`[`和`]`使用`\\`

```
$("#operator\\[\\]").val(); 
```

或者你可以使用`$("select[id='operator[]']").val()`

[演示](http://jsfiddle.net/fqRcm/)**

# android - 如何发送请求并从网站（http）获取响应

> ID：12508660
> 
> 赞同：0
> 
> 时间：2012-09-20T08:20:06.333
> 
> 标签：android

我是 Android 应用程序的新手，正在尝试开发一个应该显示来自网站的数据的**搜索应用程序。**在应用程序中，它有一个**EditText**字段、一个**ExpandableList**和一个 Search **Button**。

我需要一个代码来根据EditText中的*Data*和从 ExpandableList 中选择的*Item将我的应用程序连接到**WEBSITE并从**WEBSITE*获取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:30:23.910

按照以下链接获取服务的请求和响应：

[http://www.codeproject.com/Articles/112381/Step-by-Step-Method-to-Access-Webservice-from-Andr](http://www.codeproject.com/Articles/112381/Step-by-Step-Method-to-Access-Webservice-from-Andr)

[http://mobileorchard.com/android-app-development-calling-web-services/](http://mobileorchard.com/android-app-development-calling-web-services/)

# javascript - 标签来描述 html、css、javascript、jquery...？

> ID：12508662
> 
> 赞同：0
> 
> 时间：2012-09-20T08:20:08.983
> 
> 标签：javascript, css, html

我正在创建一个投资组合，它将显示项目的简短摘要。其中一个标题将是使用的技术。所以我产生了这个疑问...

您可以将 html、css、javascript、jquery、php... 称为软件吗？我知道 photoshop、flash 等是软件，但我不确定 html、css ......那么，你会用什么样的标签来用一个词来描述它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:22:54.413

从技术上讲，它们是语言，而不是软件。这就是我将它们列出的内容，尽管我不确定这将如何适合您已经拥有的任何设计/布局......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:26:57.733

您刚才提到的名称是脚本语言（与编程语言相对）。
前端/客户端：html、css javascript & jquery
后端/服务器端：php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:23:03.260

不，这些不是软件类型。软件就是你用来编码这些的东西。

我将它们描述为**[客户端脚本](http://en.wikipedia.org/wiki/Client-side_scripting)和[服务器端脚本语言](http://en.wikipedia.org/wiki/Server-side_scripting)**

# ajax - 使用 dojo 从响应或 json firebug 选项卡获取数据

> ID：12508665
> 
> 赞同：2
> 
> 时间：2012-09-20T08:20:16.933
> 
> 标签：ajax, rest, dojo, jsonp

我不能以新用户的身份发布图片，所以我添加了图片链接。

在修改我的后端大约 3 天后，与浏览器兼容性作斗争并实际让我的代码正常工作后，我设法调用了 dojo 中的 java rest 服务并设法获得“200 Ok”状态，但我无法即使尝试深入挖掘我的“响应”对象，也可以获得 Json 响应对象。

**调用服务的代码**

```
script.get("http://192.xxx.xx.xx:8080/com.thinkingpa.web/SecurityResourceService/loginUser", {
                    jsonp: "callback",
                    query: {
                        emailAddress:"email@email.com",
                        password:"password"
                    }
                }).then(function(response){

                    //Help me out here everything I've tried has failed me!

                });
}); 
```

**我在函数中的响应对象**

```
function(response) 
```

正如您在下面附加的屏幕截图中看到的那样，当我在 firebug 中进行调试时，我确实设法在相关的“响应”和 json 选项卡中获取了 json。

**Firebug 响应选项卡**

[Firebug 中的响应选项卡](https://twitter.com/MaziMuhlari/status/248697228263313408)

**Firebug JSON 选项卡**

[Firebug 中的 JSON 选项卡](https://twitter.com/MaziMuhlari/status/248697291203047424)

如何将 Json 或响应选项卡中的数据显示/获取到警报框（消息窗口）

# delphi - 如何知道哪个是默认邮件客户端？

> ID：12508674
> 
> 赞同：4
> 
> 时间：2012-09-20T08:20:46.683
> 
> 标签：delphi, outlook, delphi-xe2

当我的应用程序启动时，我想知道 Outlook 是否已安装以及它是否是默认邮件客户端。

对于安装，我只检查一个注册表项，但如何知道它是否是默认邮件客户端？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T10:55:54.513

根据此[MSDN 链接](http://msdn.microsoft.com/en-us/library/dd203067%28VS.85%29.aspx)“HKEY_LOCAL_MACHINE\SOFTWARE\Clients\Mail 可以包含零个或多个子项，每个注册的电子邮件应用程序一个”。

关于哪个注册的电子邮件应用程序是默认应用程序，相同的链接说：

```
HKEY_CURRENT_USER\SOFTWARE\Clients\Mail\(default) 
```

将为您提供当前用户的默认邮件应用程序（如果已设置），而

```
HKEY_LOCAL_SOFTWARE\SOFTWARE\Clients\Mail\(default) 
```

为您提供系统范围的。

该链接还指出，将邮件客户端注册为开始菜单邮件应用程序与系统默认电子邮件客户端或注册的*mailto*处理程序（这似乎有点奇怪恕我直言）是不同的。

该链接中的信息适用于 XP、Vista 和 Win 7。

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T08:30:29.537

已安装的电子邮件客户端列在下面

```
HKEY_LOCAL_MACHINE\SOFTWARE\Clients\Mail 
```

此键的默认字符串值保存当前选择的默认邮件客户端，在我们的例子中`Microsoft Outlook`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:43:33.390

HKEY_CLASSES_ROOT\mailto\shell\open

# push-notification - Monodroid 和 pushsharp

> ID：12508675
> 
> 赞同：2
> 
> 时间：2012-09-20T08:20:49.323
> 
> 标签：push-notification, xamarin.android

[有没有人使用 Push Sharp ( https://github.com/Redth/PushSharp](https://github.com/Redth/PushSharp) )在他们的 monodroid 应用程序中实现推送通知？

我想使用这个解决方案，但我还不能运行测试。

任何人都可以提供有关如何执行此操作的教程吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T13:19:33.077

我是 PushSharp 的作者。

GCM 运行良好，并且很容易启动和运行！

要设置您的 Google API 项目，您可以按照以下指南操作： [https ://github.com/Redth/PushSharp/wiki/How-to-Configure-&-Send-GCM-Google-Cloud-Messaging-Push-Notifications-using -PushSharp](https://github.com/Redth/PushSharp/wiki/How-to-Configure-&-Send-GCM-Google-Cloud-Messaging-Push-Notifications-using-PushSharp)

正如@SpiritMachine 提到的，您可以将客户端示例用于您的 Mono For Android 应用程序。简单地接受项目并根据自己的喜好对其进行调整可能是最简单的（如前所述）。 [https://github.com/Redth/PushSharp/tree/master/Client.Samples/PushSharp.ClientSample.MonoForAndroid/PushSharp.ClientSample.MonoForAndroid.Gcm](https://github.com/Redth/PushSharp/tree/master/Client.Samples/PushSharp.ClientSample.MonoForAndroid/PushSharp.ClientSample.MonoForAndroid.Gcm)

最后，使用 PushSharp 从您的服务器发送 GCM 通知非常简单：

```
//Create a new instance of PushService
PushService push = new PushService();

//Configure and start Android GCM
//IMPORTANT: The SENDER_ID is your Google API Console App Project ID.
//  Be sure to get the right Project ID from your Google APIs Console.  
//  It's not the named project ID that appears in the Overview,
//  but instead the numeric project id in the url: 
//    eg: https://code.google.com/apis/console/?pli=1#project:785671162406:overview
//  where 785671162406 is the project id, which is the SENDER_ID to use!
push.StartGoogleCloudMessagingPushService(
  new GcmPushChannelSettings("785671162406", "AIzaSyC2PZNXQDVaUpZGmtsF_Vp8tHtIABVjazI", "com.pushsharp.test"));

//Fluent construction of an Android GCM Notification
//IMPORTANT: For Android you MUST use your own RegistrationId here 
//  that gets generated within your Android app itself!
push.QueueNotification(NotificationFactory.AndroidGcm()
    .ForDeviceRegistrationId("<YOUR_REGISTRATION_ID_HERE>")
    .WithCollapseKey("NONE")
    .WithJson("{\"alert\":\"Alert Text!\",\"badge\":\"7\"}"));

//Stop the server if you have nothing else to send for a long time
// and tell it to process the remaining queue before exiting!
push.StopAllServices(true); 
```

当然，NuGet 上也可以使用 PushSharp。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:50:16.137

GCM 绝对适用于 Android。

PushSharp 服务器应用程序看起来提供了一些非常好的功能和跨多个移动操作系统实现的管理。

但是，如果您真的只是想以更简单的功能访问 GCM API，您可以快速启动并运行。

[我使用这个 gem](https://github.com/spacialdb/gcm)在 Ruby 中编写了自己的基本服务器。这是一个 Sinatra 应用程序，只允许设备注册/取消注册，并提供 HTTP URL 来发布消息。我在大约 30 LOC 内完成了它。可不是闹着玩的。它在 Heroku 上运行。

然后，我从 PushSharp 存储库中获取了 MonoDroid 客户端示例，对其进行了自定义，以使用我的 API 注册/取消注册，并对其进行调整以满足我的需求。

首先，您需要使用 Google API 创建一个项目并为其打开 GCM。你可以从[这里](http://developer.android.com/guide/google/gcm/index.html)开始。

# windows-8 - 如何创建像 CameraCaptureUI.CaptureFileAsync 这样的对话框？

> ID：12508678
> 
> 赞同：0
> 
> 时间：2012-09-20T08:20:54.150
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我想创建一个行为类似于[CaptureFileAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.capture.cameracaptureui.capturefileasync.aspx)方法的库，即在方法调用上它会打开一个带有标准后退导航的全屏页面并将结果返回给调用者。

我希望能够像调用 CaptureFileAsync 一样调用它：

```
var dialog = new Library.Dialog();
var result = await dialog.Show(); 
```

在`Show`我目前正在导航到我自己的页面并返回`Task`调用者可以等待的方法中：

```
public Task<string> Show()
{
    var task = new Task<string>(() => result);

    var frame = ((Window.Current.Content) as Frame);
    frame.Navigate(typeof(DialogPage));

    return task;
} 
```

我`task.Start()`在关闭对话框时调用（通过向后导航取消或通过按下按钮确认）导致结果返回给等待的调用者。

问题是，当`Frame.GoBack()`被调用时，会创建上一页的新实例，并将结果返回给不再显示的旧实例。这不是`CaptureFileAsync`工作方式：在这种情况下，调用页面的相同实例被保留。

我的问题是：如何在不影响框架导航和无意中创建调用页面的新实例的情况下显示我的库中的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:17:27.270

看看[PopupHelper](http://socialeboladev.wordpress.com/2012/10/14/turn-any-usercontrol-into-a-pleasing-dialogflyout-in-windows-8/)。

它抽象了使用 Popups 的所有 ickines 并处理动画、禁用对控件的访问等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:31:07.683

您可以将所有 UI 放在弹出窗口上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-12T21:31:15.623

我有同样的问题，这就是我想出的：

**XAML**

```
<Grid x:Name="MainGrid" 
      Background="#7F000000">
    <Grid Width="480" Height="180" HorizontalAlignment="Center" VerticalAlignment="Center" Background="Black">
        <StackPanel>
            <TextBlock Text="Custom Capture!" Style="{StaticResource HeaderTextBlockStyle}" Margin="20"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button x:Name="SaveButton" Content="Save" HorizontalAlignment="Center" Click="CloseButton_Click"/>
                <Button x:Name="CloseButton" Content="Close" HorizontalAlignment="Center" Click="CloseButton_Click"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</Grid> 
```

**控制**

```
public sealed partial class CustomCaptureControl : UserControl
{
    private StorageFile file;
    private ManualResetEvent reset;
    private Popup _mainPopup;

    /// <summary>
    /// 
    /// </summary>
    public CustomCaptureControl()
    {
        this.InitializeComponent();

        Rect windowBounds = CoreWindow.GetForCurrentThread().Bounds;
        this.MainGrid.Width = windowBounds.Width;
        this.MainGrid.Height = windowBounds.Height;
    }

    /// <summary>
    /// 
    /// </summary>
    /// <returns></returns>
    public async Task<StorageFile> ShowAsync()
    {
        StorageFile file = await Task.Run(() => this.GetFile());
        return file;
    }

    /// <summary>
    /// 
    /// </summary>
    /// <returns></returns>
    private async Task<StorageFile> GetFile()
    {
        //Launch Popup in UI thread
        await CoreApplication.MainView.CoreWindow.Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => 
        {
            this._mainPopup = new Popup();
            this._mainPopup.Child = this;
            this._mainPopup.IsOpen = true;
        });

        //Await user input
        await Task.Run(() => this.AwaitUserInput());

        return this.file;
    }

    /// <summary>
    /// 
    /// </summary>
    /// <returns></returns>
    private Task AwaitUserInput()
    {
        return Task.Run(() =>
        {
            this.reset = new ManualResetEvent(false);
            WaitHandle.WaitAll(new WaitHandle[] { this.reset });
        });
    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private async void CloseButton_Click(object sender, RoutedEventArgs e)
    {
        Uri fileURI = new Uri("ms-appx:///Assets/SomeFile.pdf");
        this.file = await StorageFile.GetFileFromApplicationUriAsync(fileURI);

        this.reset.Set();

        this._mainPopup.IsOpen = false;
        this._mainPopup = null;
    }
} 
```

**用法**

```
CustomCaptureControl capture = new CustomCaptureControl();
StorageFile file = await capture.ShowAsync(); 
```

# jakarta-ee - 拦截器未在 weblogic 上调用

> ID：12508679
> 
> 赞同：0
> 
> 时间：2012-09-20T08:20:58.090
> 
> 标签：jakarta-ee, weblogic, cdi

目前我正在评估 Weblogic 12c，但 weblogic 不调用拦截器。该代码被放入一个耳朵的lib文件夹中的一个库中。拦截器通过@Extern 绑定到ejb 模块中的EJB。我在 beans.xml 中启用了它。该代码使用 Glassfish 3.1.2 和 Jboss 7.1.1 运行。我试图找到 weblogic 的错误报告，但我没有找到任何正确描述问题的东西。我想知道为什么这没有导致错误报告，所以我只是想知道是否有故障，因为我无法想象这样的事情是一个未知的错误......

```
@Interceptor
@BindOuterScope
public class OuterScopeInterceptor
{

    @Inherited
    @InterceptorBinding
    @Target({TYPE})
    @Retention(RetentionPolicy.RUNTIME)
    public @interface BindOuterScope
    {

    }

    @AroundInvoke
    public Object invoker(InvocationContext ctx) throws Exception
    {

    }
}

@Inherited
@InterceptorBinding
@Target({TYPE})
@Retention(RetentionPolicy.RUNTIME)
@BindOuterScope
public @interface Extern
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:56:39.650

早期的 Glassfish 有一个问题是拦截器并不总是启用。可能是类似的东西。尝试重新部署几次，看看是否可行。我知道这听起来很糟糕，但没有比这更好的说法了:(

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-16T14:51:57.067

如果您使用 Eclipse WebLogic 插件，您可以通过将发布模式更改为“exploded archive”来使其工作。

> *   右键单击服务器 > 属性 > WebLogic > 发布
> *   选中“发布为展开的存档”> 确定
> *   重新发布您的应用程序

# facebook - Facebook Graph API 对 limit 参数的不同值给出不同的结果

> ID：12508683
> 
> 赞同：4
> 
> 时间：2012-09-20T08:21:24.763
> 
> 标签：facebook, facebook-graph-api

我正在开发一个获取帖子、评论和喜欢的应用程序。所有使用非阻塞应用程序并使用良好的 access_tokens 和所有。但是，似乎 Facebook API 在使用不同的限制值时会给出不同的结果，但这没有任何意义。

在我的测试中，我使用了一位总统候选人的帖子，当我在 Facebook 上查看时，该帖子有超过 20,000 条评论。

当我这样做时：/POSTID/comments？**limit=500** 并遵循 API 返回的所有分页查询，它返回大约**14,000 条评论**。

当我这样做时：/POSTID/comments？**limit=400** 并遵循 API 返回的所有分页查询，它返回大约**11,000 条评论**。

当我这样做时： /POSTID/comments?limit= **20000** 并遵循 API 返回的所有分页查询，它返回大约**9,000 条评论**。

此外，看起来当我使用 offset 参数时，我得到的总评论数比使用 since 参数（使用最后检索到的评论的时间戳）时少。

我知道由于隐私问题，某些评论可能不可用，但我的愿望很简单：我想要所有公开评论......如果即使限制参数给了我不同的结果，我如何确保我得到它们？

# mysql - 从mysql中的函数获取结果

> ID：12508690
> 
> 赞同：1
> 
> 时间：2012-09-20T08:21:49.827
> 
> 标签：mysql

我正在构建以下存储过程：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS update_alert_system$$
CREATE PROCEDURE update_alert_system()
BEGIN

DECLARE done INT;
DECLARE link_id_var INT;
DECLARE curl CURSOR FOR  SELECT link_id FROM alert_system;

DECLARE CONTINUE HANDLER FOR NOT FOUND SET done=1;

OPEN curl;
my_loop:LOOP 
FETCH curl INTO link_id_var;

call ignore_check(link_id_var);
call snooze_check(link_id_var);

IF done=1 THEN
LEAVE my_loop;
END IF;

END LOOP my_loop

END$$
DELIMITER ; 
```

问题在于我获取数据并将 put 作为两个函数的参数的方式：

```
 call ignore_check(link_id_var);
call snooze_check(link_id_var); 
```

这两个函数都应该返回一个数字。此类功能的示例。

```
DELIMITER $$
DROP FUNCTION IF EXISTS snooze_check $$
CREATE FUNCTION snooze_check(link_id_in INT)
RETURNS INT READS SQL DATA
RETURN (SELECT count(*) as SUCCESSES FROM link_results WHERE link_id=link_id_in AND 

Length(anchor_match)>1);
DELIMITER ; 
```

问题是如何从贪睡检查函数返回值并将其设置为存储过程中的变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:35:48.977

```
DECLARE Result_ignore_check INT;
SET Result_ignore_check=ignore_check(link_id_var); 
```

# windows-xp - VS2012 ClickOnce 应用程序无法在 Windows XP 上运行

> ID：12508697
> 
> 赞同：7
> 
> 时间：2012-09-20T08:22:04.533
> 
> 标签：windows-xp, clickonce, visual-studio-2012

在 WinXP 上安装时，出现以下错误 ![错误信息](../Images/f06bbf1eea2a1e0861a540fb6157c559.png)

在 Win7 应用程序上安装没有问题。Windows 窗体应用程序和 WPF 应用程序都有相同的问题，并且它们在 VS 2010 之前都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:38:59.087

The problem was solved.Please see: [Setup.exe is not a valid Win32 application](http://blogs.msdn.com/b/smondal/archive/2012/10/15/setup-exe-is-not-a-valid-win32-application.aspx). And also: [Visual Studio Update 1](http://blogs.msdn.com/b/vcblog/archive/2012/11/26/visual-studio-2012-update-1-now-available.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T18:27:18.057

似乎唯一的方法是从 VS 2010 SP1 发布它。两个工作室的项目都兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:45:45.503

我们遇到了同样的问题，但找到了一个简单的解决方法：在相同位置运行“xxxxxx.application”（清单）文件，而不是运行 setup.exe。这将以完全相同的方式执行和安装，并且不会抱怨不是 32 位应用程序。

# jquery - 将 IMG 从 TD 复制到 DIV 显示 [object Object]

> ID：12508698
> 
> 赞同：0
> 
> 时间：2012-09-20T08:22:04.273
> 
> 标签：jquery, image, object, html-table

我试图遍历表中的每个 TR 并选择第一个 TD 并获取其中的图像，从那里我试图制作它的副本并将其放置在 DIV 中。

可能有数百个 TR，所以我决定反对克隆路线，而是尝试构建一个字符串，然后在末尾附加该字符串。

当我在图像 DIV 中得到 [object Object] 时，它有点不对劲。

这是一个小提琴，显示我走了多远，任何帮助表示赞赏。 [http://jsfiddle.net/sygad/V8QYN/](http://jsfiddle.net/sygad/V8QYN/)

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:32:36.957

这是你要找的[**东西吗？**](http://jsfiddle.net/V8QYN/2/)

```
var flags = [];
$("img", "table tr").each(function() {
    flags.push($(this).clone());
});

$.each(flags, function(i, val) {
   $('#spriteBlock').append(val);
}); 
```

它创建在表行中找到的所有图像（标志）的克隆，并将它们附加到`#spriteBlock`.

至于您的问题，`[object Object]`由于您尝试将 jQuery 对象添加到`#spriteBlock`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:31:41.310

在 jsfiddle Javascript 代码中，更改`flagString += flag`为`flagString += $(flag).attr('src');`获取 src 属性的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:58:20.143

如果您想在一个附加中执行此操作，您可以这样做：

```
$(document).ready(function() {

    var markup = '';

    $('table tr td:first-child').each(function () {
        var image = $(this).html();
        markup += image;            
    });

    $('#flag-clones').append(markup);

}); 
```

[JS小提琴](http://jsfiddle.net/WFkjJ/)`

# javascript - 使用 jQuery/JavaScript 删除转义字符串

> ID：12508706
> 
> 赞同：3
> 
> 时间：2012-09-20T08:22:41.893
> 
> 标签：javascript, jquery

我想使用 jquery 从字符串中删除转义字符。

我知道 jquery 中的“escape()”，但问题是

例如，如果我们想从字符串“http://www.abc.com”中删除转义字符

使用 escape() 我们得到这样的结果 'http%3A//www.abc.com' 但我想要这样的结果

'http//www.abc.com'。怎么可能使用jquery？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T08:29:42.457

jQuery 中没有关于取消转义的内容。

核心 javascript 具有[escape()](https://developer.mozilla.org/en-US/docs/DOM/window.escape)和[unescape()](https://developer.mozilla.org/en-US/docs/DOM/window.unescape)函数。

```
var url = 'http://www.abc.com';

var escaped_url = escape(url);

console.log(escaped_url); // logs 'http%3A//www.abc.com'

console.log(unescape(escpaed_url)) // logs 'http://www.abc.com' 
```

IE

`unescape(escape('http://www.abc.com')) === 'http://www.abc.com'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T08:26:57.497

使用正则表达式？`replace(/[^a-z0-9\s]/gi, '')`功能？修改你想保留的字符

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-20T08:48:24.790

`escape()`编码特殊字符！要删除字符，例如使用`replaceAll(String regex, String replacement)`.

在`regex`-part 中，您可以插入所有要删除的特殊字符。

# python - 使用 lxml etree 冲突命名空间

> ID：12508708
> 
> 赞同：1
> 
> 时间：2012-09-20T08:22:50.653
> 
> 标签：python, xml, lxml, xml-namespaces, elementtree

我在 lxml 2.3 和 etree 中的命名空间有问题。

例如，我有两个具有不同命名空间的节点：

```
parent = etree.Element('{parent-space}parent')
child = etree.Element('{child-space}child') 
```

之后，`child`节点被附加到`parent`节点：

```
parent.append(child) 
```

然后，如果我使用`tostring`etree 的方法，我会得到以下输出：

```
<ns0:parent xmlns:ns0="parent-space">
    <ns0:child xmlns:ns0="child-space"/>
</ns0:parent> 
```

两个命名空间都在此处获取标签`ns0`，因此它们发生冲突。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:47:07.020

没有冲突。`ns0`前缀只是为 的后代覆盖`<child>`。

此 XML 文档

```
<ns0:parent xmlns:ns0="parent-space">
    <ns0:child xmlns:ns0="child-space"/>
</ns0:parent> 
```

相当于

```
<ns0:parent xmlns:ns0="parent-space">
    <ns1:child xmlns:ns1="child-space"/>
</ns0:parent> 
```

和

```
<parent xmlns="parent-space">
    <child xmlns="child-space"/>
</parent> 
```

就`parent`and `child`go 的有效命名空间而言。

您可以使用 nsmap 来声明前缀。有效的结果是一样的，但是序列化的时候看起来不那么混乱了。

```
from lxml import etree

NS_MAP = {
    "p" : "http://parent-space.com/",
    "c" : "http://child-space.com/"
}
NS_PARENT = "{%s}" % NS_MAP["parent"]
NS_CHILD = "{%s}" % NS_MAP["child"]

parent = etree.Element(NS_PARENT + "parent", nsmap=NS_MAP)
child  = etree.SubElement(parent, NS_CHILD + "child")
child.text = "Some Text"

print etree.tostring(parent, pretty_print=True) 
```

这打印

```
<p:parent xmlns:p="http://parent-space.com/" xmlns:c="http://child-space.com/">
  <c:child>Some Text</c:child>
</p:parent> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:45:26.637

看起来像这篇文章[How to tell lxml.etree.tostring(element) not to write namespaces in python?](https://stackoverflow.com/questions/7004215/how-to-tell-lxml-etree-tostringelement-not-to-write-namespaces-in-python) 建议使用的地方`cleanup_namespaces`

希望这会有所帮助

# javascript - 使用 navigator.geolocation 获取地理位置

> ID：12508720
> 
> 赞同：0
> 
> 时间：2012-09-20T08:23:23.050
> 
> 标签：javascript, geolocation

我编写了一个 JavaScript 来获取用户地理位置。它给了我纬度和经度，据此我在地图中绘制了用户位置，但是当我在谷歌地图中检查该位置的纬度和经度时，它是不同的，因此它绘制了错误的位置。

```
function map()
{
    if (navigator.geolocation) {
        browserSupportFlag = true;
        navigator.geolocation.getCurrentPosition(function (position) {
            initialize(position.coords.latitude,position.coords.longitude);
        }, function () {
            handleNoGeolocation(browserSupportFlag);
        });
    } else {
        browserSupportFlag = false;
        handleNoGeolocation(browserSupportFlag);
} 
```

请让我知道如何使用`navigator.geolocation`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:52:23.173

地理位置功能通过使用可通过各种来源获得的地理位置信息来工作，具体取决于设备。这包括卫星数据、无线电跟踪设备、互联网硬件以及无线通信设备。更准确地说，该系统利用 GPS、RFID、IP 地址、Wi-Fi 和蓝牙 Mac ID 或移动电话塔和手机 ID。因此，如果您正在尝试浏览器，那么这将取决于浏览器及其设置。它可能使用 GPS、基于 WLAN AP 的定位、IP 定位或任何其他可想象的定位自身的方法。

浏览器在您的本地计算机上运行，​​因此即使您使用代理，它也应该能够找到您的实际 IP 地址（除非安全功能阻止将其发送到地理定位服务器进行查找）。否则，如果您在打开 gps 的移动设备上尝试，那么根据我过去使用地理定位 api 的经验，它应该提供具有良好准确性的结果

# django - Django：在reportlab中增加拉绳的值

> ID：12508721
> 
> 赞同：0
> 
> 时间：2012-09-20T08:23:23.717
> 
> 标签：django, django-views, reportlab

我正在使用reportlab 生成pdf。在这里，我从数据库中检索配置文件。打印到数据库时，每个配置文件都应显示在下一页中。为此，我无法在增加页面坐标的同时打印该值。

```
def reportlab(request):

    response = HttpResponse(mimetype='application/pdf')
    response['Content-Disposition'] = 'attachment; filename=somefilename.pdf'
    buffer = BytesIO()

    # Draw things on the PDF. Here's where the PDF generation happens.
    # See the ReportLab documentation for the full list of functionality.
    child = Child_detail.objects.all()
    for child1 in child:
        name = child1.name
        p = canvas.Canvas(buffer)
        p.drawString(500, 400, name)
        p.showPage()
        p.save()
    pdf = buffer.getvalue()
    buffer.close()
    response.write(pdf)
    return response 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:37:04.467

您可能希望将画布的设置和保存移出循环，因此您最终使用了 Canvas 的单个实例

```
p = canvas.Canvas(buffer)
child = Child_detail.objects.all()
for child1 in child:
    name = child1.name
    p.drawString(500, 400, name)
    p.showPage()
p.save() 
```

# c# - 触发 ASPxGridView RowClick 事件并在服务器上处理它

> ID：12508724
> 
> 赞同：0
> 
> 时间：2012-09-20T08:23:32.027
> 
> 标签：c#, asp.net, devexpress

我有一个填充一些事务的 ASPxGridView。

```
<dx:ASPxGridView ID="grdCapTrans" runat="server" ClientIDMode="AutoID" Width="100%"   EnableRowsCache="false">
</dx:ASPxGridView> 
```

当它填充时，我想让用户自由选择一行并查看单击行的详细信息。详细信息应显示在文本框中的网格视图下方。

如何在服务器上触发和处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:42:32.787

您可以使用`RowCommand event`

链接：http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_RowCommandtopic

```
<dx:ASPxGridView ID="grid" 
runat="server" 
ClientInstanceName="grid" 
AutoGenerateColumns="false" 
onrowcommand="grid_RowCommand" >
   <Columns>
     <dx:GridViewCommandColumn ShowSelectCheckbox="true" VisibleIndex="0" ButtonType="Button" />
   </Columns>
 </dx:ASPxGridView> 
```

代码背后：

```
 protected void grid_RowCommand(object sender, ASPxGridViewRowCommandEventArgs e)
 {
    ..... 
 } 
```

绑定您的数据

```
grid.DataSource = ...;
grid.DataBind(); 
```

链接：[http ://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_RowDeletingtopic](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_RowDeletingtopic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:26:57.117

```
<asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional" >
     <Triggers>
     <asp:AsyncPostBackTrigger ControlID="cboTransType"   EventName="SelectedIndexChanged" />
     </Triggers>
        <ContentTemplate>
        <dx:ASPxGridView ID="grdCapTrans" runat="server" ClientIDMode="AutoID" Width="100%" EnableRowsCache="false" ClientInstanceName="grdCapTrans" onselectionchanged="grdCapTrans_SelectionChanged" 
        EnableCallBacks="false" KeyFieldName="ID" AutoGenerateColumns="false"> 
        <Columns>
        <dx:GridViewCommandColumn ShowInCustomizationForm="True" VisibleIndex="0" ButtonType="Button" ShowSelectCheckbox="true"> </dx:GridViewCommandColumn>
        <dx:GridViewDataTextColumn FieldName="ID" Name="ID" ShowInCustomizationForm="True" VisibleIndex="1"></dx:GridViewDataTextColumn>
        <dx:GridViewDataTextColumn FieldName="Description" Name="Description" ShowInCustomizationForm="True" VisibleIndex="2"></dx:GridViewDataTextColumn>
        <dx:GridViewDataTextColumn FieldName="Amount" Name="Amount" ShowInCustomizationForm="True" VisibleIndex="5"></dx:GridViewDataTextColumn> 
        <dx:GridViewDataTextColumn FieldName="Date" Name="Date" ShowInCustomizationForm="True" VisibleIndex="4"></dx:GridViewDataTextColumn>   
        <dx:GridViewDataTextColumn FieldName="Capturer" Name="Capturer" ShowInCustomizationForm="True" VisibleIndex="3"></dx:GridViewDataTextColumn>                                                                                    
        <dx:GridViewDataTextColumn FieldName="Status" Name="Status" ShowInCustomizationForm="True" VisibleIndex="6"></dx:GridViewDataTextColumn>                                                                                                                                                               

        </Columns>
        <SettingsBehavior ProcessSelectionChangedOnServer="true"  AllowFocusedRow="true" AllowSelectByRowClick="true" EnableRowHotTrack="true"    />

        </dx:ASPxGridView>
        <p>
        </p>
    </ContentTemplate>
    </asp:UpdatePanel> 
```

代码背后

```
protected void grdCapTrans_SelectionChanged(object sender, EventArgs e)

{ 

    UpdatePanel1.Update();
    txtFullName.Text = grdCapTrans.GetSelectedFieldValues("Description")[1].ToString();

    message.InnerHtml = "Happy";

} 
```

消息元素是一个 div，可在 updatepanel1 中找到。如果 selectionChanged 事件触发，我希望显示消息“Happy”。令我惊讶的是，它没有。

出了什么问题，如何纠正。

# haskell - 如何将值分配给haskell中的列表

> ID：12508727
> 
> 赞同：0
> 
> 时间：2012-09-20T08:23:41.507
> 
> 标签：haskell

我有一个数据类型：

```
data Numbers = Numbers {a::Int, b::Int} 
```

我如何构造`[Numbers]`才能获得与

```
[[a,b] | a <- [1,2], b <- (filter (/=a) [1,2])] 
```

所以结果将类似于`[[1,2],[2,1]]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:35:44.797

你必须使用`Numbers`as 构造函数（注意：`[]`也是构造函数，只是带有特定的语法糖，所以没有本质区别）。

```
data Numbers = Numbers {a::Int, b::Int}
               deriving Show

main = print [ Numbers a b | a <- [1, 2], b <- filter (/=a) [1, 2] ]

> main
[Numbers {a = 1, b = 2},Numbers {a = 2, b = 1}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:59:15.540

这似乎只是一个带有移除的选择。您可以在[较早的问题](https://stackoverflow.com/questions/11766449/list-all-possible-4-chooses-from-9-in-haskell)中找到有效的代码来执行此操作。

如果它肯定是关于两个元素，那么这个实现将是有效的：

```
do x:ys <- tails [1..3]
   y <- ys
   [(x, y), (y, x)] 
```

# android - 使用返回按钮关闭leadbolt 应用程序墙

> ID：12508732
> 
> 赞同：3
> 
> 时间：2012-09-20T08:23:53.303
> 
> 标签：android, leadbolt

我在我的主要 Android 活动中显示了一个leadbolt 应用程序墙（优惠墙）：

```
setContentView(R.layout.main);
mAdAppWall = new AdController(this, getString(R.string.adsAppWall));
mAdAppWall.loadAd(); 
```

这显示正常，但是如果我按下设备的后退按钮，我的活动将关闭。我不想关闭活动，我只想关闭应用程序墙，就像点击它的“x”一样。

Leadbolt 文档向我展示了如何解决横幅广告的此问题，我尝试将其扩展到优惠墙广告，如下所示：

```
@Override
public boolean onKeyDown(final int keyCode, final KeyEvent event)
{
    if (keyCode == KeyEvent.KEYCODE_BACK)
    {
        if(mAdController.onBackPressed() || mAdAppWall.onBackPressed())
        {
            if (mAdAppWall.onBackPressed()) {
                mAdAppWall.destroyAd();
            }

            return true;
        }
        else
        {
            mAdController.destroyAd();
            mAdAppWall.destroyAd();
        }
    }
    return super.onKeyDown(keyCode, event);
} 
```

但是，这会关闭广告，然后在按下后退按钮时立即将其重新打开。

如何使按设备上的后退按钮关闭全屏优惠墙？

# php - 使用 Netbeans 使用 xdebug 调试 php 代码

> ID：12508735
> 
> 赞同：0
> 
> 时间：2012-09-20T08:23:59.590
> 
> 标签：php, xdebug, netbeans-7

我对 php 很陌生，正在尝试为 php 构建一个完整的调试环境。我已经下载了 Netbeans 并且已经安装了**wamp**。

我在网上发现**xdebug**是一个很好的调试工具。我已经下载了。配置文件中需要进行哪些确切更改。

我正在使用**Windows 7**。还想问“ **Zend框架**需要下载吗？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:29:35.063

您需要的所有信息都在这里：[http ://wiki.netbeans.org/HowToConfigureXDebug](http://wiki.netbeans.org/HowToConfigureXDebug)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:29:43.963

以下[向导](http://xdebug.org/wizard.php)是 xdebug 的分步安装说明，它基本上会告诉您三件事：

1.  php_xdebug-2.2.1-5.3-vc9.dll 的下载链接
2.  复制到哪里（哪个文件夹）：php_xdebug-2.2.1-5.3-vc9.dll（可能是：）
    `C:\Program Files (x86)\PHP\ext`。
3.  如何编辑 php.ini - 添加/注释的行/s（对我来说是添加：
    `zend_extension = "C:\Program Files (x86)\PHP\ext\php_xdebug-2.2.1-5.3-vc9.dll"`并删除所有其他`zend`行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:34:40.133

我还推荐 Netbeans wiki。或者试试这个简单的教程[http://martinsikora.com/debugging-php-in-netbeans-using-xdebug](http://martinsikora.com/debugging-php-in-netbeans-using-xdebug)

如果您已经尝试过，请尝试更具体地说明什么不适合您（包括错误消息等）

Zend 框架不是必需的。

# azure-diagnostics - Azure OnDemand 传输不传输本地存储目录？

> ID：12508738
> 
> 赞同：0
> 
> 时间：2012-09-20T08:24:06.823
> 
> 标签：azure-diagnostics

我已将 Azure 诊断配置为传输本地存储（10MB，我的自定义日志和转储数据文件）。我定期传输目录-> blob 工作得很好。这是按需的，似乎不起作用。我手动创建了 blob 和队列，但仍然不行！进行按需传输的代码是

***诊断助手.cs***

```
public void StartOnDemandTransfer()
{
    OnDemandTransferOptions odtOptions = new OnDemandTransferOptions();
    odtOptions.From = DateTime.UtcNow.AddMinutes(-10.0);
    odtOptions.To = DateTime.UtcNow;
    //odtOptions.LogLevelFilter = LogLevel.Verbose;
    odtOptions.NotificationQueueName = "wad-on-demand-transfer";

    RoleInstanceDiagnosticManager ridm = getRoleInstanceDiagnosticManager();
    Guid odtTransferId = ridm.BeginOnDemandTransfer(DataBufferName.Directories, odtOptions);
}

public void EndTransfers()
{
    RoleInstanceDiagnosticManager ridm = getRoleInstanceDiagnosticManager();

    IDictionary<DataBufferName, OnDemandTransferInfo> activeTransfers = ridm.GetActiveTransfers();

    foreach (KeyValuePair<DataBufferName, OnDemandTransferInfo> activeTransfer in activeTransfers)
    {
        OnDemandTransferInfo odtInfo = activeTransfer.Value;
        Guid requestId = odtInfo.RequestId;
        ridm.EndOnDemandTransfer(requestId);
    }
}

public RoleInstanceDiagnosticManager getRoleInstanceDiagnosticManager()
{
    if (roleInstanceDiagnosticManager == null)
    {
        CloudStorageAccount cloudStorageAccount = CloudStorageAccount.Parse(
               RoleEnvironment.GetConfigurationSettingValue(wadConnectionString));
        roleInstanceDiagnosticManager = 
               cloudStorageAccount.CreateRoleInstanceDiagnosticManager(
                    RoleEnvironment.DeploymentId,
                    RoleEnvironment.CurrentRoleInstance.Role.Name,
                    RoleEnvironment.CurrentRoleInstance.Id);
    }
    return roleInstanceDiagnosticManager;
} 
```

使用来自 admin/flushlogs.aspx.cs 的实际刷新/按需传输

```
protected void Button1_Click(object sender, EventArgs e)
{
    api.Diag.DiagHelper diag = new api.Diag.DiagHelper();
    diag.StartOnDemandTransfer();
    diag.EndTransfers();
} 
```

***问题：***

有谁知道为什么 Windows Azure 诊断不传输我指定的本地存储？

* * *

*额外细节：*

我认为我已正确初始化 Azure 诊断，因为定期传输工作正常（必须手动创建 blob）但这里是初始化代码

```
// ... Other init stuff ...

// Custom logs
LocalResource localResource = RoleEnvironment.GetLocalResource("ApiLogFolder");
DirectoryConfiguration dirConfig = new DirectoryConfiguration();
dirConfig.Container = "apilog-blob";
dirConfig.DirectoryQuotaInMB = localResource.MaximumSizeInMegabytes;
dirConfig.Path = localResource.RootPath;
config.Directories.DataSources.Add(dirConfig);
config.Directories.ScheduledTransferPeriod = TimeSpan.FromMinutes(10.0);

roleInstanceDiagnosticManager.SetCurrentConfiguration(config); 
```

我在 ServiceDefinition.csdef 中定义了本地存储，如下所示

```
<LocalResources>
  <LocalStorage name="Microsoft.WindowsAzure.Plugins.Caching.FileStore" sizeInMB="1000" cleanOnRoleRecycle="false" />
  <LocalStorage name="ApiLogFolder" cleanOnRoleRecycle="false" sizeInMB="10" />
</LocalResources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:05:31.917

这可能是因为您在调用 BeginOnDemandTransfer 之后立即调用 EndOnDemandTransfer。基于这些方法的命名，很容易理解为什么您会认为 EndOnDemandTransfer 会阻塞直到传输完成，或者类似的事情。但根据 MSDN（[http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.diagnostics.management.roleinstancediagnosticmanager.endondemandtransfer.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.diagnostics.management.roleinstancediagnosticmanager.endondemandtransfer.aspx)）：

> EndOnDemandTransfer 方法停止正在进行的诊断数据传输。

# java - JAXB 生成 JAXBElement 而不是字符串

> ID：12508741
> 
> 赞同：36
> 
> 时间：2012-09-20T08:24:11.170
> 
> 标签：java, maven, jaxb, cxf, wsdl2java

我正在使用`Apache CXF` `cxf-codegen-plugin` `Maven`插件从`WSDL`文件生成源。问题是我`JAXBElement<String>`生成而不是`String`. 我添加了`jaxb-bindings.xml`如下所示的文件：

```
<jaxb:bindings version="2.1"
               xmlns:jaxb="http://java.sun.com/xml/ns/jaxb">
    <jaxb:globalBindings generateElementProperty="false"/>
</jaxb:bindings> 
```

这应该防止`JAXB`生成`JAXBElement<String>`. 但它不起作用我仍然`JAXBElement<String>`生成而不是`String`.

我的`Maven`插件看起来像这样：

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>${cxf.runtime.version}</version>
    <dependencies>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-bindings-soap</artifactId>
            <version>${cxf.runtime.version}</version>
        </dependency>
    </dependencies>
    <executions>
        <execution>
            <id>generate-jaxb</id>
            <phase>generate-sources</phase>
            <configuration>
                <additionalJvmArgs>-Dfile.encoding=UTF8</additionalJvmArgs>
                <wsdlOptions>
                    <wsdlOption>
                        <wsdl>src/main/resources/wsdl/Cubiks.wsdl</wsdl>
                        <extraargs>
                            <extraarg>-b</extraarg>
                            <extraarg>${basedir}/jaxb-bindings.xml</extraarg>
                            <extraarg>-b</extraarg>
                            <extraarg>${basedir}/jaxws-bindings.xml</extraarg>
                            <extraarg>-exsh</extraarg>
                            <extraarg>true</extraarg>
                            <extraarg>-wsdlLocation</extraarg>
                            <extraarg></extraarg>
                        </extraargs>
                    </wsdlOption>
                    <wsdlOption>
                        <wsdl>src/main/resources/wsdl/CubiksCallBackService.wsdl</wsdl>
                        <extraargs>
                            <extraarg>-b</extraarg>
                            <extraarg>${basedir}/jaxws-bindings.xml</extraarg>
                            <extraarg>-b</extraarg>
                            <extraarg>${basedir}/jaxb-bindings.xml</extraarg>
                            <extraarg>-exsh</extraarg>
                            <extraarg>true</extraarg>
                            <extraarg>-p</extraarg>
                            <extraarg>com.cubiks.ws.callback</extraarg>
                            <extraarg>-wsdlLocation</extraarg>
                            <extraarg></extraarg>
                        </extraargs>
                    </wsdlOption>
                </wsdlOptions>
            </configuration>
            <goals>
                <goal>wsdl2java</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

`CXF`版本是`2.6.0`. 有人知道问题出在哪里吗？

**编辑**

XSD 非常庞大。这是生成的元素`JAXBElement<String>`

```
 <xs:complexType name="ServiceResponse">
    <xs:sequence>
      <xs:element minOccurs="0" name="RequestStatus" type="tns:RequestStatus"/>
      <xs:element minOccurs="0" name="RequestStatusDescription" nillable="true" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="ServiceResponse" nillable="true" type="tns:ServiceResponse"/> 
```

生成的源是：

```
@XmlElementRef(name = "RequestStatusDescription", namespace = "http://www.cubiksonline.com/2009/08/AssessmentProvider", type = JAXBElement.class)
protected JAXBElement<String> requestStatusDescription; 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-20T09:43:34.530

我所要做的就是`jaxb:globalBindings`用另一个`jaxb:bindings`.

```
<jaxb:bindings version="2.0"
               xmlns:jaxb="http://java.sun.com/xml/ns/jaxb">
    <jaxb:bindings>
        <jaxb:globalBindings generateElementProperty="false"/>
    </jaxb:bindings>
</jaxb:bindings> 
```

现在一切正常，不再`JAXBElement<String>`生成。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-20T09:00:31.423

你不能同时拥有 nillable 和 minoccurs 。删除小事件，因为无论如何它对字符串没有意义。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-20T08:31:21.263

我想你想在你的 jaxb-binding.xml 中添加：

```
<jaxb:bindings ... xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc">
    <jaxb:globalBindings generateElementProperty="false">
        <xjc:simple />
        <!-- ... -->
    </jaxb:globalBindings>
</jaxb:bindings> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T13:36:27.323

当我们同时拥有`minouucrs=0`和`nillable=true`在 XSD 中时，它将生成 JAXBElement。为避免这种情况，我们需要删除其中任何一个。

如果您`generateElementProperty="false"`在从 XSD 方案生成 POJO 对象时使用属性，那么它将像魅力一样工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-31T11:18:50.253

我的 wsdl 架构中有重复的元素，这就是 CXF 生成 JAXBElement 而不是字符串的原因。当心。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-10T08:16:05.537

我在我的资源文件夹中创建了一个名为`bindings.xml`的文件，并添加了以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" elementFormDefault="qualified" attributeFormDefault="unqualified" jaxb:extensionBindingPrefixes="xjc" jaxb:version="2.1">
    <xs:annotation>
        <xs:appinfo>
            <jaxb:globalBindings>
                <xjc:simple /><!-- it did only work after adding this -->
            </jaxb:globalBindings>
        </xs:appinfo>
    </xs:annotation>
</xs:schema> 
```

然后我在 pom.xml 中的 cxf 插件定义中提到了这个文件，如下所示：

在`<wsdlOptions>`tag ，在`<wsdlOption>`它有 wsdl 文件的路径的地方，我添加了一个标签，它有：

```
<bindingFiles> 
 <bindingFile> ${basedir}/src/min/resources/bindings.xml </bindingFile>  
</bindingFiles> 
```

我的存根用实际类型生成得非常漂亮。

# web-services - 使用soapUI断言的Web服务测试

> ID：12508744
> 
> 赞同：1
> 
> 时间：2012-09-20T08:24:27.077
> 
> 标签：web-services, soapui

我想用soapUI断言测试一些webservice的响应。对于以下 json 响应：

```
 "car":    {
      "id": 42,
      "carColor": "red"
      "carType": "BMW"
} 
```

，我该如何测试，那个..

1.  汽车`ids`总是有这种类型`integer`并且总是`carColor`有`carType`这种类型`string`
2.  数据`id, carColor`并且`carType`始终存在于所有汽车

使用soapUI 断言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T11:23:23.693

您还可以查看这篇文章： [http](http://www.robert-nemet.com/2012/08/json-asserting-in-soapui.html) : //www.robert-nemet.com/2012/08/json-asserting-in-soapui.html 解释 SoapUI 中 JSON 断言的可能方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:22:33.703

根据我的经验，SoapUI 在这方面并不是很擅长。如果您习惯使用 groovy 脚本，那么我建议您将 JSONPath jar 添加到您的 bin\ext 目录并在 groovy 脚本中使用它。

[JSON 路径](http://goessner.net/articles/JsonPath/)。

JSONPath 很像 XPath。

如果您已经熟悉 XPath，则可以[将 JSON 转换为 XML](https://discursive.atlassian.net/wiki/display/CJCOOK/Converting+JSON+to+XML)，然后使用 Xpath。

如果你不想使用 groovy 脚本，恐怕我没有任何想法......

# iphone - iphone dev使用核心图在每个图表栏的顶部添加标题

> ID：12508745
> 
> 赞同：2
> 
> 时间：2012-09-20T08:24:41.180
> 
> 标签：iphone, objective-c, core-plot

我已经使用本教程 [http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2实现了图表](http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2)

现在我想添加一个标题，它将是每个图表栏顶部每个图表栏的计算百分比，我正在尝试这样

```
int i =0;
    for (CPTBarPlot *plot in plots) {
        plot.dataSource = self;
        plot.delegate = self;
        plot.barWidth = CPTDecimalFromDouble(CPDBarWidth * 2);
        plot.barOffset = CPTDecimalFromDouble(barX);
        plot.lineStyle = barLineStyle;
        NSString *plotname = [plottiltes objectAtIndex:i];
        plot.title = plotname;
        NSLog(@"%@",plotname);
        i++;
        [graph addPlot:plot toPlotSpace:graph.defaultPlotSpace];
        barX += CPDBarWidth * 4;
    } 
```

但直到现在还没有成功，请。引导我。问候萨德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T00:34:09.580

该`title`属性是图例中显示的图的描述。使用数据标签来标记条形。如果您显示的值不是绘制的值，则需要使用自定义数据标签。实现以下数据源方法并制作自定义标签。如果您需要花哨，可以使用 a`CPTTextLayer`来显示文本字符串或任何其他字符串。`CPTLayer`

```
-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index; 
```

# android - 在 onCreate() 中带有自定义视图的 AlertDialog

> ID：12508747
> 
> 赞同：0
> 
> 时间：2012-09-20T08:25:03.813
> 
> 标签：android, android-alertdialog, illegalstateexception

这是我的代码：

```
 public class MainActivity extends Activity {

    private static final int CONFIRMATION_DIALOG = 0;
    private View mLoginConfirmView;
    private TextView mTextViewLoginConfirm;
    private CheckBox mCheckBoxLoginConfirm;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mLoginConfirmView = View.inflate(this, R.layout.dialog_login_confirmation, null);
        mTextViewLoginConfirm = (TextView) mLoginConfirmView.findViewById(R.id.textView_DialogTranspConfirm);
        mCheckBoxLoginConfirm = (CheckBox) mLoginConfirmView.findViewById(R.id.checkBox_DialogTranspConfirm);

        showDialog(CONFIRMATION_DIALOG);
    }

    @Override
    @Deprecated
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case CONFIRMATION_DIALOG: {

            return new AlertDialog.Builder(this)
            .setIcon(android.R.drawable.stat_sys_warning)
            .setTitle(R.string.app_name)
            .setView(mLoginConfirmView)
            .setPositiveButton(R.string.change, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                    dialog.dismiss();

                    showDialog(EXIT_PROGRESS_DIALOG);
                }
            })
            .setNegativeButton(R.string.go_ahead, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                    dialog.dismiss();

                    if (mCheckBoxLoginConfirm.isChecked())
                        setConfirmationDialogHidden();
                }
            })
            .create();
        }
            break;

        default:
            break;
        }
        return super.onCreateDialog(id);
    }

    @Override
    @Deprecated
    protected void onPrepareDialog(int id, Dialog dialog) {
        switch (id) {
        case CONFIRMATION_DIALOG: 

            CheckBox checkBox = (CheckBox)dialog.findViewById(R.id.checkBox_DialogTranspConfirm);
            checkBox.setChecked(false);
            TextView textView = (TextView)dialog.findViewById(R.id.textView_DialogTranspConfirm);
            textView.setText(getString(R.string.you_use_service_for, Utils.getNumber()));

            break;

        default:
            break;
        }
        super.onPrepareDialog(id, dialog);
    }
} 
```

它仅在 HTC One S 上崩溃，当我的应用程序从后台返回时，我设置了自定义视图：

.setView(mLoginConfirmView)

抛出：java.lang.IllegalStateException：指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。我决定添加以下检查：如果视图有父视图，我什么也不做：

```
@Override
    @Deprecated
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case CONFIRMATION_DIALOG: {

        ViewGroup parent = (ViewGroup) mLoginConfirmView.getParent();
            if (parent!=null)
                return super.onCreateDialog(id);

            return new AlertDialog.Builder(this)
            .setIcon(android.R.drawable.stat_sys_warning)
            .setTitle(R.string.app_name)
            .setView(mLoginConfirmView)
            .setPositiveButton(R.string.change, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                    dialog.dismiss();

                    showDialog(EXIT_PROGRESS_DIALOG);
                }
            })
            .setNegativeButton(R.string.go_ahead, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                    dialog.dismiss();

                    if (mCheckBoxLoginConfirm.isChecked())
                        setConfirmationDialogHidden();
                }
            })
            .create();
        }
            break;

        default:
            break;
        }
        return super.onCreateDialog(id);
    } 
```

是正确的方式吗？我可以显示来自 onCreate() 的对话框吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:50:12.347

它将崩溃，因为活动的 UI 尚未准备好，活动尚未向用户显示，android 在其 onResume() 执行完成后显示屏幕，尝试显示来自 onResume() 的对话框

# python - 记录 python 子进程的语法错误和未捕获的异常并将它们打印到终端

> ID：12508752
> 
> 赞同：4
> 
> 时间：2012-09-20T08:25:26.547
> 
> 标签：python, subprocess, stderr

## 问题

我一直在尝试编写一个程序来记录子进程的未捕获异常和语法错误。容易，对吧？只需管道`stderr`到正确的位置。

*但是*，子进程是另一个 python 程序——我会称之为它`test.py`——它需要运行，就好像它的输出/错误没有被捕获一样。也就是说，运行记录器程序需要看起来像用户刚刚`python test.py`正常运行。

使问题进一步复杂化的是如果不使用实际发送到[的问题。](http://bugs.python.org/issue1927)不幸的是，我不能，因为我无法控制正在使用我的错误记录器运行的文件。`raw_input``stderr``readline``import readline`

**笔记：**

*   我在运行此代码的机器上受到相当的限制。我无法安装`pexpect`或编辑`*customize.py`文件（因为该程序将由许多不同的用户运行）。我真的觉得无论如何应该有一个stdlib解决方案......
*   这只适用于mac。
*   这样做的动机是，我是一个研究新程序员遇到的错误的团队的一员。

## 我试过的

我尝试了以下方法，但没有成功：

*   只是`tee`在问题中使用[如何在使用带有管道的“tee”时将 stderr 写入文件？](https://stackoverflow.com/questions/692000/how-do-i-write-stderr-to-a-file-while-using-tee-with-a-pipe)（未能产生`raw_input`提示）；`tee`我在几个 SO 问题中发现的python 实现有类似的问题
*   覆盖`sys.excepthook`（未能使其适用于子进程）
*   [这个问题的](https://stackoverflow.com/questions/4984428/python-subprocess-get-childrens-output-to-file-and-terminal)最佳答案似乎很有希望，但未能`raw_input`正确显示提示。
*   [日志模块](http://docs.python.org/library/logging.html)似乎对实际写入日志文件很有用，但似乎并没有解决问题的症结所在
*   自定义标准错误阅读器
*   无休止的谷歌搜索

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:48:03.780

[您链接的基于 tee 的答案](https://stackoverflow.com/questions/4984428/python-subprocess-get-childrens-output-to-file-and-terminal)不太适合您的任务。虽然您可以通过使用禁用缓冲的选项来修复“`raw_input()`提示”问题：`-u`

```
errf = open('err.txt', 'wb') # any object with .write() method
rc = call([sys.executable, '-u', 'test.py'], stderr=errf, 
          bufsize=0, close_fds=True)
errf.close() 
```

更合适的解决方案可能基于[`pexpect`](http://www.noah.org/wiki/Pexpect#Pexpect_version_2.3)或[示例](https://stackoverflow.com/a/12471855/4279)。`pty`

> 运行记录器程序需要看起来像用户刚刚正常运行 python test.py。

```
#!/usr/bin/env python
import sys
import pexpect

with open('log', 'ab') as fout:
    p = pexpect.spawn("python test.py")
    p.logfile = fout
    p.interact() 
```

你不需要安装`pexpect`它是纯 Python，你可以把它放在你的代码旁边。

这是一个基于 tee 的模拟（`test.py`以非交互方式运行）：

```
#!/usr/bin/env python
import sys
from subprocess import Popen, PIPE, STDOUT
from threading  import Thread

def tee(infile, *files):
    """Print `infile` to `files` in a separate thread."""
    def fanout(infile, *files):
        flushable = [f for f in files if hasattr(f, 'flush')]
        for c in iter(lambda: infile.read(1), ''):
            for f in files:
                f.write(c)
            for f in flushable:
                f.flush()
        infile.close()
    t = Thread(target=fanout, args=(infile,)+files)
    t.daemon = True
    t.start()
    return t

def call(cmd_args, **kwargs):
    stdout, stderr = [kwargs.pop(s, None) for s in 'stdout', 'stderr']
    p = Popen(cmd_args,
              stdout=None if stdout is None else PIPE,
              stderr=None if stderr is None else (
                   STDOUT if stderr is STDOUT else PIPE),
              **kwargs)
    threads = []
    if stdout is not None: 
        threads.append(tee(p.stdout, stdout, sys.stdout))
    if stderr is not None and stderr is not STDOUT: 
        threads.append(tee(p.stderr, stderr, sys.stderr))
    for t in threads: t.join() # wait for IO completion
    return p.wait()

with open('log','ab') as file:
    rc = call([sys.executable, '-u', 'test.py'], stdout=file, stderr=STDOUT,
              bufsize=0, close_fds=True) 
```

由于不清楚在哪里可能会打印它们的提示`raw_input()`，因此有必要合并 stdout/stderr。`getpass.getpass()`

在这种情况下，线程也不是必需的：

```
#!/usr/bin/env python
import sys
from subprocess import Popen, PIPE, STDOUT

with open('log','ab') as file:
    p = Popen([sys.executable, '-u', 'test.py'],
              stdout=PIPE, stderr=STDOUT,
              close_fds=True,
              bufsize=0)
    for c in iter(lambda: p.stdout.read(1), ''):
        for f in [sys.stdout, file]:
            f.write(c)
            f.flush()
    p.stdout.close()
    rc = p.wait() 
```

注意：最后一个示例和基于 tee 的解决方案不会捕获`getpass.getpass()`提示，但基于`pexpect`和-`pty`的解决方案会：

```
#!/usr/bin/env python
import os
import pty
import sys

with open('log', 'ab') as file:
    def read(fd):
        data = os.read(fd, 1024)
        file.write(data)
        file.flush()
        return data

    pty.spawn([sys.executable, "test.py"], read) 
```

我不知道是否`pty.spawn()`适用于mac。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T07:33:44.563

根据@nneonneo 在问题评论中的建议，我制作了这个似乎可以完成工作的程序。（请注意，当前，记录器文件的名称必须使用“pylog”才能将错误正确打印给最终用户。）

```
#!/usr/bin/python

'''
This module logs python errors.
'''

import socket, os, sys, traceback

def sendError(err):
    # log the error (in my actual implementation, this sends the error to a database)
    with open('log','w') as f:
        f.write(err)

def exceptHandler(etype, value, tb):
    """An additional wrapper around our custom exception handler, to prevent errors in
       this program from being seen by end users."""
    try:
        subProgExceptHandler(etype, value, tb)
    except:
        sys.stderr.write('Sorry, but there seems to have been an error in pylog itself. Please run your program using regular python.\n')

def subProgExceptHandler(etype, value, tb):
    """A custom exception handler that both prints error and traceback information in the standard
       Python format, as well as logs it."""
    import linecache

    errorVerbatim = ''

    # The following code mimics a traceback.print_exception(etype, value, tb) call.
    if tb:
        msg = "Traceback (most recent call last):\n"
        sys.stderr.write(msg)
        errorVerbatim += msg

        # The following code is a modified version of the trackeback.print_tb implementation from
        # cypthon 2.7.3
        while tb is not None:
            f = tb.tb_frame                                                      
            lineno = tb.tb_lineno                                                  
            co = f.f_code                                                        
            filename = co.co_filename                                              
            name = co.co_name
            # Filter out exceptions from pylog itself (eg. execfile).
            if not "pylog" in filename:
                msg = '  File "%s", line %d, in %s\n' % (filename, lineno, name)
                sys.stderr.write(msg)       
                errorVerbatim += msg
                linecache.checkcache(filename)                                         
                line = linecache.getline(filename, lineno, f.f_globals)                
                if line: 
                    msg = '    ' + line.strip() + '\n'
                    sys.stderr.write(msg)
                    errorVerbatim += msg
            tb = tb.tb_next                                           

    lines = traceback.format_exception_only(etype, value)
    for line in lines:
        sys.stderr.write(line)
        errorVerbatim += line

    # Send the error data to our database handler via sendError.
    sendError(errorVerbatim)

def main():
    """Executes the program specified by the user in its own sandbox, then sends
       the error to our database for logging and analysis."""
    # Get the user's (sub)program to run.
    try:
        subProgName = sys.argv[1]
        subProgArgs = sys.argv[3:]
    except:
        print 'USAGE: ./pylog FILENAME.py *ARGS'
        sys.exit()

    # Catch exceptions by overriding the system excepthook.
    sys.excepthook = exceptHandler
    # Sandbox user code exeuction to its own global namespace to prevent malicious code injection.
    execfile(subProgName, {'__builtins__': __builtins__, '__name__': '__main__', '__file__': subProgName, '__doc__': None, '__package__': None})

if __name__ == '__main__':
    main() 
```

# asp.net - 在多个模块上保持（http）上下文

> ID：12508754
> 
> 赞同：0
> 
> 时间：2012-09-20T08:25:32.660
> 
> 标签：asp.net, httpcontext, null-coalescing-operator

我有一个带有静态函数的类，需要使用当前的`HttpContext`. 我没有在每次使用这些函数时都发送对象，而是尝试了一种不同的方法。我建立了这样一个属性：

```
private static HttpContext _http;
private static HttpContext http
{
    get
    {
        if (_http == null)
           _http = HttpContext.Current;
        return _http;
    }
    set { _http = value; }
} 
```

在我`http`用作我的`HttpContext`.

它似乎不稳定的东西。这有什么问题吗？

**更新：** 我发现这很好用

```
 get
    {
        return _http ?? HttpContext.Current;
    } 
```

请解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T13:13:42.950

到底是什么让你创造了一个二传手和一个支持场？只使用返回当前 http 上下文的 getter 不是更容易吗？

```
protected static HttpContext Http
{
    get
    {
        return HttpContext.Current;
    }
} 
```

顺便一提：

我确实喜欢很多私有属性，您可以`protected`为祖先制作它或使其成为一种方法：

```
private static HttpContext GetCurrentContext() 
{
    return HttpContext.Current;
} 
```

# php - doc/docx 到 PDF 转换器

> ID：12508763
> 
> 赞同：0
> 
> 时间：2012-09-20T08:26:22.053
> 
> 标签：php, linux, pdf

我在我的专用服务器上运行 Centos Linux。我想将所有 .doc 和 .docx 文件转换为 PDF。我已经尝试过 PHPLIVEDOCX 的 API，但现在我想在我自己的专用服务器上安装应用程序来转换它们。

有什么方法可以使用 PHP 或 Linux 中可用的任何其他工具来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:51:59.270

您可以使用 openoffice 中的脚本/宏功能来完成此操作。看看他们的论坛（使用聪明的谷歌搜索）

或者也许这值得一试？[http://sourceforge.net/projects/ooconvert/](http://sourceforge.net/projects/ooconvert/)

然后只需使用 shell_exec 调用或类似方法运行 CLI 命令。

# android - Android 上的 Libgdx app.exit() 未关闭应用程序

> ID：12508769
> 
> 赞同：18
> 
> 时间：2012-09-20T08:26:35.547
> 
> 标签：android, libgdx, exit

在我使用 libGDX 开发的 Android 应用程序中，我`Gdx.app.exit()`在用户尝试退出游戏时使用。这会关闭游戏，但是当用户重新启动应用程序时，所有内容都会`Textures`被打乱（超出使用应用程序的点）。我注意到，如果我从任务管理器强制关闭应用程序，那么它将正确重启。

为什么会这样？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T15:50:26.333

您重新发现了 Java 对象的生命周期（与应用程序进程的生命周期相关联）与纹理对象的生命周期（与 OpenGL 上下文的生命周期相关联，而 OpenGL 上下文的生命周期与 Activity 的可见性相关联）之间的不匹配。

在应用程序“退出”时，只有 Activity 退出，Android 正在后台缓存进程。当您“重新启动”应用程序时，Android 只会在同一进程中启动一个新的 Activity。在这种情况下，Activity 正在寻找一个有效的 Java Texture 对象，但它在 OpenGL 上下文中“指向”的底层字节已经消失（因为当 Activity 不再可见时，OpenGL 上下文无效）。

修复是在活动创建时重新加载纹理。您必须确保所有包含纹理的对象（以及包含包含纹理的对象等）都与 Activity 生命周期相关联。通常，这意味着避免使用静态变量（这是应用程序生命周期的一部分），但如果需要，您可以跳过循环来使全局变量无效并重新初始化。

# c++ - 声明另一个成员时可以使用一个成员的大小吗？

> ID：12508771
> 
> 赞同：17
> 
> 时间：2012-09-20T08:26:44.963
> 
> 标签：c++

这是合法的 C++ 吗？

```
struct foo
{
  int a[100];
  int b[sizeof(a) / sizeof(a[0])];
}; 
```

GCC 4.6 接受它，但 MSVC 2012 不接受。对我来说似乎应该没问题，但是一点谷歌搜索没有帮助，我不知道在哪里查看标准。

MSVC 2012 提供以下输出：

```
error C2327: 'foo::a' : is not a type name, static, or enumerator
error C2065: 'a' : undeclared identifier
error C2070: ''unknown-type'': illegal sizeof operand
warning C4200: nonstandard extension used : zero-sized array in struct/union 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T08:30:44.743

这在 C++03 中是非法的，因为这些成员是非静态数据成员。

从 C++11 开始，这是合法的，因为在未计算的操作数中，您可以使用非静态数据成员而无需相应的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:40:38.343

试试这个：这是 MSVC 2010 和 MSVC 2012 的解决方法

```
struct Aoo
{
    typedef int ArrayType;
    ArrayType a[100];
};

struct foo : public Aoo
{   
    enum {bSize = sizeof(Aoo) / sizeof(Aoo::ArrayType)};
    int b[bSize];
}; 
```

# ios - PhoneGap 和 iPhone 5：去除顶部和底部的黑色条纹

> ID：12508775
> 
> 赞同：15
> 
> 时间：2012-09-20T08:26:59.230
> 
> 标签：ios, cordova, mobile

我正在使用 PhoneGap 为 iOS 构建一个移动应用程序。最近我下载了新的 Xcode 并在 iPhone5 模拟器上运行了该应用程序。该应用程序运行良好，但应用程序的底部和顶部有两条黑色条纹。我知道这是 Apple 向后兼容旧应用程序的方式，这些旧应用程序不是为 iPhone 5 的 4 英寸屏幕设计的。

是否可以让PhoneGap 应用充分利用新的4 英寸屏幕iPhone 5？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-20T08:30:45.063

所有不包含该`Default-568h@2x.png`文件的应用程序都显示在一个信框中。包括`Default-568h@2x.png`将使您的应用程序填满 4 英寸视网膜设备的屏幕。

PhoneGrap 的 Web 浏览器视图应填满屏幕。

# encryption - 如何在 Pentaho 水壶转换中使用加密密码？

> ID：12508776
> 
> 赞同：2
> 
> 时间：2012-09-20T08:26:58.263
> 
> 标签：encryption, etl, pentaho, kettle

关于我们如何在水壶转换中使用加密密码的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-19T10:29:43.910

如果我正确理解您的问题，您可以使用**对称加密**步骤来加密和解密数据。这一切都取决于你愿意实现什么。但基本上，如果您知道所需的加密/解密类型，那么最简单的**用户定义的 Java 类**就可以满足要求。

# c# - 使用后台工作程序时 C# Winform 冻结

> ID：12508777
> 
> 赞同：0
> 
> 时间：2012-09-20T08:27:03.450
> 
> 标签：c#

下面是我的编码：

```
Form2 msgForm;
private void button3_Click_1(object sender, EventArgs e)
{

    bw.WorkerReportsProgress = true;
    bw.WorkerSupportsCancellation = true;
    bw.DoWork += new DoWorkEventHandler(bw_DoWork);
    //bw.ProgressChanged += new ProgressChangedEventHandler(bw_ProgressChanged);
    bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);

    msgForm = new Form2();

    try
    {
        bw.RunWorkerAsync(comboBox15.Text);

        msgForm.ShowDialog();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
}

void bw_DoWork(object sender, DoWorkEventArgs e)
{
    string PrtAdd = e.Argument.ToString();

    uploadlogo(PrtAdd);
   // uploadlogo(PrtAdd) is the coding that transmit serial protocol and will last around 2 minutes to finish.        
}

void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    msgForm.Close();
} 
```

我的编码是为了在单击按钮时运行后台工作程序，因为单击按钮将传输协议，大约需要 2 分钟。

在这 2 分钟内，它会在 form2 中显示“请稍候”。

问题是当我运行此编码并单击按钮运行后台工作程序时，我的 winform UI 冻结。有没有办法不冻结用户界面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:32:35.797

它是否因为您显示一个对话框（`msgForm.ShowDialog`）而冻结？

我确实这么认为 - 只尝试`Show`

# javascript - 在 jQuery 中使用 .click(...) 时遇到问题

> ID：12508778
> 
> 赞同：0
> 
> 时间：2012-09-20T08:27:06.743
> 
> 标签：javascript, jquery, html

所以我大约一个小时前才开始尝试学习 jQuery，我已经得到了[这段代码](http://pastebin.com/qaN0dbxB)

只是想弄清楚为什么这`$(".actions .readbody").click(...)`条线似乎不起作用。

我最初有这个工作，所有按钮都在 a`< ul >`而不是 a `< div >`（每个按钮都有自己的`< li >`）。该类`readbody`被添加到读取正文按钮`< li >`而不是直接添加到按钮。有问题的行更像`$(".actions li.readbody button").click(...)`.

完整代码发布在 jsfiddle 上：http: [//jsfiddle.net/J6u5X/](http://jsfiddle.net/J6u5X/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:40:06.837

我 jsFiddled 你的例子 - 它更容易......以这种方式摆弄代码。见[http://jsfiddle.net/v7ayc/](http://jsfiddle.net/v7ayc/)

我注意到的第一件事是你的点击处理程序循环中的`=`运算符`while`，我猜你的意思是`==`.

无论如何，用以下代码替换函数的主体会切换内容：

`$(this).parent('.actions').siblings('.body').toggle();`

一般来说，jQuery 提供了更简单易读的遍历 DOM 的方式。随意使用它来代替标准的 DOM 接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:32:41.940

从链接.actions 没有子类.readbody？使用`$('.actions button').click..`或给你的按钮一个类名，然后在 click 方法中引用它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:34:43.890

请参阅此链接[Jquery](http://www.w3schools.com/jquery/event_click.asp)

```
 $(".test").val()
  $("#test").val()

 .test is class name of the HTML tag
 #test is id name of the HTML tag 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T08:36:15.633

问题是您在单击处理程序中尝试执行的操作不起作用。您通过两个 parentNode 调用在链上走得太远了

```
var mybody = this.parentNode.parentNode 
```

这需要

```
var mybody = this.parentNode 
```

您只需要一个即可访问文章正文。

看到一个更新的小提琴，它按照你的期望工作[http://jsfiddle.net/8zsr5/2/](http://jsfiddle.net/8zsr5/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T08:43:16.040

我认为问题在于 JavaScript 根本找不到您需要的元素。

我已经修改了你的代码来切换 while 循环，我已经让它工作了。这是一个[小提琴](http://jsfiddle.net/6CWWf/)。

# eclipse - 防止 Zest 2.0 GraphViewer 通过刷新执行布局算法

> ID：12508783
> 
> 赞同：1
> 
> 时间：2012-09-20T08:27:25.507
> 
> 标签：eclipse, layout, zest

自从将 Zest 从 1.4 更新到 2.0 后，布局算法出现了问题。

在 1.4 中，布局算法仅通过调用 applyLayout 来执行。可以设置布局，执行它，然后更改 Graph 并刷新 GraphViewer，而无需再次执行它。

在 2.0 中，每次刷新（在 Graph 更改后更新查看器所必需的）都会导致执行布局算法。因此，添加新节点会导致更改 GraphViewer 中每个节点的每个位置。

这对我的用例来说是不可接受的。是否有可能阻止 GraphViewer 通过刷新执行 LayoutAlgorithm？

我需要的是仅在单击“布局”按钮时在查看器中布局图表。不应该有任何自动布局。

我想在调用后取消设置 LayoutAlgorithm，这样以后刷新时就没有算法了，但这似乎也不可能。在 GraphViewer 上以 null 作为参数调用 setLayoutAlgorithm 会导致 NullPointerException。

是否有可能使用 2.0 获得 Zest GraphViewers 的“旧行为”？

谢谢！

克里斯蒂娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:46:00.110

Graph 小部件有一个 `public void setDynamicLayout(boolean enabled)`方法，根据 Javadoc 可能只是做你需要的技巧。

要从 GraphViewer 获取小部件，请使用 GraphViewer#getGraphControl 方法。

# sharepoint - 使用 SPMetal 为 Sharepoint 中的网站集生成 LINQ 类

> ID：12508784
> 
> 赞同：0
> 
> 时间：2012-09-20T08:27:27.590
> 
> 标签：sharepoint, sharepoint-2010, linq-to-sharepoint

我尝试使用以下命令在 Sharepoint 中为我的站点集合根目录生成 LINQ 类（全部在一行中）：

```
SPMetal.exe
/web:http://myserver 
/namespace:mynamespace 
/code:myfile.cs 
/parameters:mysettings.xml 
```

mysettings.xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Web AccessModifier="Internal"
 xmlns="http://schemas.microsoft.com/SharePoint/2009/spmetal">
    <List Name="List1"/>
    <List Name="List2"/>
    <ExcludeOtherLists/>
</Web> 
```

但它不起作用，产生的错误是（大致翻译自德语）：

> 无法使用指定的文件名。可能已经存在同名的文件或目录，或者权限不足以访问该文件。

我认为这不可能是文件问题，因为：

1.  如果我将 Web URL 更改为`http://myserver/subsite`它工作得很好，文件就会生成
2.  我可以看到使用 0kb 创建的文件，1-2 秒后文件被删除并显示错误消息
3.  我有足够的空间，权限也可以（见 1.）

那么我错过了什么？或者我不能为根网站集创建 LINQ 类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:49:14.733

如果您使用的是 Visual Studio 2010，请尝试[LINQ to SharePoint 扩展](http://visualstudiogallery.msdn.microsoft.com/993df7ed-2dd2-44e4-98f2-e6233812692b?SRC=VSIDE)。它允许使用漂亮的 UI 向导来生成模型类。

# magento - Magento URL 重写索引器错误 500

> ID：12508790
> 
> 赞同：1
> 
> 时间：2012-09-20T08:27:53.777
> 
> 标签：magento

运行 url 重写目录的索引时，我收到错误 500 内部服务器错误，但我无法让它生成任何错误到 exceptions.log .. 我试图清空 core_url_rewrites 但没有运气，仍然收到错误 500 并且没有日志文件。这是 Magento 1.6.2

500屏幕出现时产生的错误：www.domain.com/index.php/admin/process/reindexProcess/process/3/key/caac7ef08590009411a43aa71a990192/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:30:29.117

我认为您的内存不足，请在 .htaccess 文件中分配更多内存：

```
php_value memory_limit 512M 
```

512M 应该这样做，如果不尝试进一步增加这个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:04:35.067

超时怎么办？它们也可能导致 500 个错误。

尝试在 .htaccess 或 php.ini 中放入类似的内容：

```
php_value session.cookie_lifetime 86400
php_value session.gc_maxlifetime 86400 
```

# glassfish-3 - Netbeans 没有运行项目。显示错误无法连接到 Glass Fish Server 3.1.2 的管理员侦听器

> ID：12508791
> 
> 赞同：0
> 
> 时间：2012-09-20T08:27:55.763
> 
> 标签：glassfish-3, netbeans-7

我刚刚安装了 netbeans 7.2 并在其中创建了一个项目。但是当我尝试运行该项目时。我收到以下错误

![在此处输入图像描述](../Images/17c76580fc5e036f5182ab83ff88eaf0.png)

错误是

```
Could not connect to admin Listener for Glass Fish server 3.1.2
Verify that Netbeans can make outbound connections to localhost:4848 
```

我还`Use IDEs Proxy Settings`通过转到玻璃鱼的属性来取消选中，但它仍然无法正常工作。知道为什么我会得到这个吗？

在线发生的错误

```
<target if="netbeans.home" name="-run-deploy-nb">
    <nbdeploy clientUrlPart="${client.urlPart}" debugmode="false" forceRedeploy="${forceRedeploy}"/>
</target> 
```

谢谢你。

**-------------------------------------------------- - - - - - - - - - - - - 编辑**

您提到的目录中有文件 server.txt 。这是文件包含的内容。

```
Sep 24, 2012 1:18:39 PM com.sun.enterprise.admin.launcher.GFLauncherLogger info
INFO: JVM invocation command line:
-XX:+UnlockDiagnosticVMOptions
-XX:PermSize=64m
-XX:MaxPermSize=192m
-XX:NewRatio=2
-Xmx512m
-client
-javaagent:C:/Program Files/glassfish-3.1.2.2/glassfish/lib/monitor/flashlight-agent.jar
-Dosgi.shell.telnet.maxconn=1
-Dfelix.fileinstall.disableConfigSave=false
-Djdbc.drivers=org.apache.derby.jdbc.ClientDriver
-Dfelix.fileinstall.dir=C:\Program Files\glassfish-3.1.2.2\glassfish/modules/autostart/
-Djavax.net.ssl.keyStore=C:\Program Files\glassfish-3.1.2.2\glassfish\domains\domain1/config/keystore.jks
-Dosgi.shell.telnet.port=6666
-Djava.security.policy=C:\Program Files\glassfish-3.1.2.2\glassfish\domains\domain1/config/server.policy
-Djava.awt.headless=true
-Dfelix.fileinstall.log.level=2
-Dfelix.fileinstall.poll=5000
-Dcom.sun.aas.instanceRoot=C:\Program Files\glassfish-3.1.2.2\glassfish\domains\domain1
-Dosgi.shell.telnet.ip=127.0.0.1
       -Dcom.sun.enterprise.config.config_environment_factory_class=com.sun.enterprise.config.serverbeans.AppserverConfigEnvironmentFactory
-Djava.endorsed.dirs=C:\Program Files\glassfish-3.1.2.2\glassfish/modules/endorsed;C:\Program Files\glassfish-3.1.2.2\glassfish/lib/endorsed
-Dcom.sun.aas.installRoot=C:\Program Files\glassfish-3.1.2.2\glassfish
-Dfelix.fileinstall.bundles.startTransient=true
-Djava.ext.dirs=C:\Program Files\Java\jdk1.6.0_06/lib/ext;C:\Program Files\Java\jdk1.6.0_06/jre/lib/ext;C:\Program Files\glassfish-3.1.2.2\glassfish\domains\domain1/lib/ext
-Dfelix.fileinstall.bundles.new.start=true
-Djavax.net.ssl.trustStore=C:\Program Files\glassfish-3.1.2.2\glassfish\domains\domain1/config/cacerts.jks
-Dcom.sun.enterprise.security.httpsOutboundKeyAlias=s1as
-Djava.security.auth.login.config=C:\Program Files\glassfish-3.1.2.2\glassfish\domains\domain1/config/login.conf
-DANTLR_USE_DIRECT_CLASS_LOADING=true
-Dgosh.args=--nointeractive
Sep 24, 2012 1:18:39 PM com.sun.enterprise.admin.launcher.GFLauncherLogger info
INFO: Successfully launched in 0 msec. 
```

# python - 使用 Python 中的日志库访问所有已定义的记录器

> ID：12508796
> 
> 赞同：3
> 
> 时间：2012-09-20T08:28:16.083
> 
> 标签：python, logging

我有几个使用日志库的库。我想访问这些库中定义的所有记录器并设置我想要的日志记录级别，而无需触及这些库的代码。我需要动态地这样做，因为我事先不知道这些库将定义的记录器

你会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T08:39:11.743

定义的记录器类存储在`logging.Logger.manager.loggerDict`.

# bigtable - 超表核心数据结构

> ID：12508799
> 
> 赞同：0
> 
> 时间：2012-09-20T08:28:22.160
> 
> 标签：bigtable, hypertable

我正在寻找多维映射（或 LSM 树）的实现，但我无法找出哪个类对应于它的实现，有人知道吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:28:59.093

如果你解压源代码，那么你会在 src/cc/Hypertable/RangeServer 中找到所有文件：

CellCache.h/CellCache.cc：内存存储（带有自定义内存分配器的 std::map）

CellStoreV6.h/CellStoreV6.cc：磁盘存储

# ruby-on-rails - Rails3.1 引擎：无法让 SLIM 或 HAML 在测试/虚拟应用程序中工作

> ID：12508805
> 
> 赞同：2
> 
> 时间：2012-09-20T08:28:41.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, haml, rails-engines, slim-lang

我正在开发一个 Rails 3.1 引擎，为了对其进行集成测试，我想使用 SLIM 而不是普通的 ERB。所以我试图简单地添加`s.add_development_dependency "slim"`到我的`.gemspec`文件中，但是当我将`index.html.erb`文件重命名为 时`index.html.slim`，Rails 抱怨：

> 缺少模板 dummy/index、application/index with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}。在以下位置搜索：*“/Users/josh/Documents/Work/Sientia/iq_menu/full/spec/dummy/app/views”*“/Users/josh/Documents/Work/Sientia/iq_menu/full/app/views”

我也用`slim-rails`gem 和 gem尝试过`haml-rails`，但是重命名文件`index.html.haml`导致同样的错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-05T21:51:08.960

显然，这是一个老问题，但我今天遇到了同样的事情（这次是在 Rails 4 上），我想我可以在这里澄清这个问题。

Bundler 有两个角色——一个是获取 gem 并使其代码可用，另一个是实际“要求”该代码到您的项目中。

当您将依赖项添加到 gemspec 中时，它会执行第一个功能，但不会执行第二个功能。

在应用程序的生产使用中，gemspec 标识的依赖项被有效地添加到应用程序的包中，因此应用程序的捆绑器将获取和需要您的 gem。

如果您只有 gemspec 中的引用，而不是 Gemfile 中的引用，那么实际上没有任何需要执行，因此 gem 不会被初始化并且模板引擎对您的应用程序不可用。将其添加到 Gemfile 使其被初始化和注册。

我认为你需要两者，比如slim/haml。仅拥有 Gemfile 引用意味着应用程序不会知道依赖关系，而仅拥有 gemspec 引用意味着引擎不会在您的虚拟应用程序中初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-25T14:49:38.180

您可以使用标准`haml`gem，但`engine.rb`您需要：

`require 'haml'`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T08:50:13.363

对于 Haml，你必须把

```
gem 'haml-rails' 
```

进入你的 Gemfile

# javascript - Modernizr 与 cssSandpaper？

> ID：12508811
> 
> 赞同：13
> 
> 时间：2012-09-20T08:29:27.543
> 
> 标签：javascript, modernizr, css-transforms, polyfills

我一直在努力尝试在 IE 8、7 和 6 上使用 rotate(xdeg) 功能，为此我谷歌了一段时间并找到了[cssSandpaper](http://www.useragentman.com/blog/2010/03/09/cross-browser-css-transforms-even-in-ie/)但由于我必须加载 4 个不同的脚本我只想这样做如果它需要这个我使用[modernizr](http://modernizr.com/)我尝试这样的事情：

```
<head>

        <link rel="stylesheet" href="stilos/estilo.css" />
        <script src="scripts/modernizr.custom.19387.js"></script>
        <script src="scripts/jquery-1.8.1.js"></script>
        <script src="scripts/misfallbacks.js"></script>
</head>

<body>
    <div id="acerca"><a href="#">Acerca de mi</a></div>
</body> 
```

我的 css 文件（estilo.css）：

```
#acerca{
    -webkit-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform:rotate(90deg);
    -sand-transform:rotate(90deg);
    position: relative;
    top: -233px;
    left: 462px;
    width: 123px;
    height: 23px;
    z-index:100;
} 
```

我的 js 文件（misfallbacks.js）

```
Modernizr.load({
        test:Modernizr.csstransforms,
        nope:['transformie/EventHelpers.js/','transformie/cssQuery-p.js','transformie/sylvester.js','transformie/cssSandpaper.js']

    );//Fin de monernizr on load 
```

它在 safari、chrome、opera、Firefox 和 IE9 上运行良好，但是当我在 IE8 或 IE7 上尝试时，我在控制台上收到以下错误，
`SCRIPT5007: Unable to get value of the property 'addEventListener': object is null or undefined EventHelpers.js, line 49 character 9`
我添加了一个 console.log 来尝试找出发生了什么并转到该行这里它是（EvenHelpers.js）：

```
me.addEvent = function(obj, evType, fn){
       console.log(obj);//I've added this to try to figure out what is going on
        if (obj.addEventListener) {........//here is the error 
```

在下一次运行中，我再次检查了控制台，看到了这个`LOG: null`，我不是 javascript 专家，所以我不确定发生了什么，但我尝试了一些不同的东西，并使用这样的脚本标签添加了 cssSandPaper：

```
<head>

    <link rel="stylesheet" href="stilos/estilo.css" />

    <script src="scripts/modernizr.custom.19387.js"></script>
    <script src="scripts/jquery-1.8.1.js"></script>
    <!--<script src="scripts/misfallbacks.js"></script>-->  
    <script src="transformie/EventHelpers.js"></script>
    <script src="transformie/cssQuery-p.js"></script>
    <script src="transformie/sylvester.js"></script>
    <script src="transformie/cssSandpaper.js"></script>
 </head> 
```

令我惊讶的是，它就像一个魅力，就像这样，即使在 IE7 和 IE8 中我也有旋转功能，控制台现在说这个**LOG: [object HTMLScriptElement]**但我知道使用这种方式我将始终加载这 4 个脚本，即使它们不是必需的，这不是我的目标，但由于我从modernizr 和javacript 开始，我不知道发生了什么D：以及为什么当我使用来自modernizr 的nope:[''] 加载脚本时不起作用. 有谁知道解决这个问题的方法？...对不起我的英语不是我的第一语言

编辑：我对这个对象 HTMLScriptElement 做了一些研究，它假设引用了一个脚本标签...但我仍然遇到同样的问题...我该如何解决这个问题？：/

[jsFiddle 测试 Modernizr](http://jsfiddle.net/ttWaf/3/)

[没有 Modernizr 的 jsFiddle 测试](http://jsfiddle.net/gQL7j/2/)

答：我最终使用**if lt IE 9**加载完成工作的砂纸脚本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T06:10:11.840

我试图用不同的更简单的方法来解决这个问题。它对我有用，我希望它也对你有用。

我包括了 IE9.JS（使 IE <9 浏览器表现得像 IE9 + 标准兼容的 js）。您可以访问此链接以了解如何操作。 [http://code.google.com/p/ie7-js/](http://code.google.com/p/ie7-js/)

然后我稍微修改了你的CSS`estilo.css`如下。我将以下样式添加到您的#acerca 样式定义中。

```
filter:'progid:DXImageTransform.Microsoft.BasicImage(rotation=1)'; 
```

有效。唯一的问题是这种转换不像 -ms-transform 或任何其他标准 Web 转换那样可读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:36:21.000

似乎一个脚本需要在另一个之后加载。

试试这个脚本：

```
if (!Modernizr.csstransforms){
    Modernizr.load({
        load: 'transformie/EventHelpers.js',
        complete: function () {
            console.log("loaded EventHelpers");

            Modernizr.load({
                load: 'transformie/cssQuery-p.js',
                complete: function () {
                    console.log("loaded cssQuery");
                    Modernizr.load({
                        load: 'transformie/sylvester.js',
                        complete: function () {
                            console.log("loaded sylvester");

                            Modernizr.load({
                                load: 'transformie/cssSandpaper.js',
                                complete: function () {
                                    console.log("loaded cssSandpaper");
                                }
                            });

                        }
                    });
                }
            });

        }
    });

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:57:52.217

好吧，你给我买了半个小时，我在这个网站上坐了半个小时。`init`函数行 445 中的 EventHelpers.js 中有一个错误，它有一个 cc_on 语句，所以只有 ie 会阅读它。

现在它在运行时创建一个脚本标签，该标签没有创建，所以它等于空。并且代码中断了！

我修改了 EventHelpers.js 并修复了问题。原始代码编写脚本标签，`document.write` 我将其更改为`document.createElement`，它似乎在控制台上没有错误

jsfiddle：http: [//jsfiddle.net/5xdDG/3/](http://jsfiddle.net/5xdDG/3/)

现在它真的应该在 ie7 或 6 中旋转 div，因为在 jsfiddle 中我没有看到它旋转？

我很抱歉，英语不是我的第一语言；）

# php - 仅在某些条件下打开和清空文件

> ID：12508814
> 
> 赞同：1
> 
> 时间：2012-09-20T08:29:40.070
> 
> 标签：php

大家，早安。
我有点卡住了。有没有办法只在特定条件下打开文件并清空它？

我想要的是：
1\. fopen( file ) -->flock --> 读取文件内容
2\. 如果满足某些条件，替换文件内容
3\. unlock 和 fclose
问题是：
`fopen (file, w+)`事先清空文件，所以我无法读取内容
`fopen (file, r+)`如果我想写入它不会清空文件

我已经尝试`ftruncate($fn,0)`与 结合使用`r+`，但是将“null”写入文件
一种解决方法是首先读取文件内容然后打开它。但我试图从阅读的那一刻起一直锁定文件，直到我完成。
有人有什么想法吗？

编辑：
问题似乎是`fwrite`. `ftruncate`清除文件，但`fwrite`添加一个“nul”。100 次通过后，数据前面有一百个 'nul'

```
$pt = "../path/file";  
$fn = lock_file($pt);  
$i = fread($fn,100);  
ftruncate($fn,0);  
fwrite($fn,"data");  
fflush($fn);  
flock($fn, LOCK_UN);  
fclose($fn);        

function lock_file($file){
$fn = fopen($file, "c+");  
$try=0;  
do{  
if($try>0){usleep(rand(1,10000));}
$try ++;
}
while(!flock($fn, LOCK_EX | LOCK_NB) and $try <= 300);
if($try>=300){return FALSE;}
return $fn;
} 
```

`fseek($fn, 0);` 感谢解决！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:34:07.800

Have you considered 'c' or 'c+' modes instead of 'w'?

As [PHP manual says](http://ua2.php.net/manual/en/function.fopen.php):

> 'c' This may be useful if it's desired to get an advisory lock (see flock()) before attempting to modify the file, as using 'w' could truncate the file before the lock was obtained (if truncation is desired, ftruncate() can be used after the lock is requested).

*UPD:* As for the code posted above:

I have tried your code and saw nulls in beginning of the file. However, when I added

```
 fseek($fn, 0); 
```

before

```
 ftruncate($fn, 0); 
```

everything went fine (without fseek, 0's are being appended)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:33:02.333

```
fopen($fn, "a+");//opens file for appending, does not erase contents
fseek($fn, 0);//moves pointer to first position in file 
```

之后，如有必要，您可以调用**ftruncate 。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:34:38.570

```
fopen($fn, 'c+'); // open the files in read / write, doesn't truncate on opening
fread($fn);
ftruncate($fn, 0); 
```

# backbone.js - Yeoman 工作流程和与后端脚本的集成

> ID：12508818
> 
> 赞同：32
> 
> 时间：2012-09-20T08:29:48.927
> 
> 标签：backbone.js, yeoman

所以，我一直在期待[Yeoman](http://yeoman.io)，现在它已经发布了一周左右。但是在成功安装它之后，我对工作流程和后端脚本（API）的实现感到困惑。

**方案 1**

因此，假设我不需要所有那些闪亮的 BBB/Ember/Angular 的东西，而仅将 Yeoman 用于由 Codeigniter 或 Sinatra/Rails 支持的 jQuery/H5BP/Modernizr。由于`yeoman server`本身不支持 PHP（我没有尝试过 Sinatra/Rails），我认为工作流程是：

*   使用 Yeoman 进行前端开发
*   完成后，做`yeoman build`然后使用构建的`dist`文件夹作为基础来开发后端（并且可能将`dist`文件夹复制到另一个文件夹以进行后端实现（比如说`public`文件夹）
*   如果我应该更改 CSS/JS，请再次使用 yeoman，再次构建并复制该`dist`文件夹`public`。以此类推……

但是使用该工作流程，这意味着目录结构将类似于

```
cool-app/
--app/
  --yeoman development stuff
--test/
  --yeoman development stuff
--dist/
  --yeoman built stuff
.dotfiles
package.json
Gruntfile.js 
```

这很好，但与 CodeIgniter / Rails 目录结构有很大不同。更不用说名称差异（**这在 Yeoman 中是否可配置？**），所以很难想象一个好的工作流程一次性开发前端和后端，除了使用构建的结果作为后端的基础。

**方案 2**

BBB/Ember/Angular。坦率地说，我只是在测试这些东西，所以欢迎任何使用后端代码实现的技巧！虽然据我所知，yeoman 可以在 app 文件夹中为那些框架生成必要的文件，所以我认为，第一个方案的解决方案将解决方案 2 的问题

非常感谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-25T13:12:29.210

我喜欢使用这种结构：

```
rails-app/
--app/
  --views/
    --js/
      --app/
      --test/
      --Gruntfile.js
--public 
```

这是我的设置方式：

*   rails new rails-app
*   cd rails-app/app/views
*   mkdir js
*   光盘
*   约曼初始化余烬

然后编辑 Gruntfile.js 将“输出：'dist'”更改为“输出：'../../../public'”

之后，“yeoman build”或“yeoman build:dist”将输出到 Rails /public 文件夹。

在开发期间，您仍然可以使用“yeoman 服务器”在开发模式下运行 yeoman，因此您所做的任何更改都将自动在浏览器中可见。

叶曼好样的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T09:02:27.457

当然，桑福德的回答也适用于 Sinatra，但是可以使用稍微不同的解决方案，这样您就不必发出“yeoman build”来在开发模式下运行。

在 Sinatra 中，公用文件夹是可配置的，因此您可以有一个如下所示的配置块：

```
configure do
    set :public_folder, ENV['RACK_ENV'] == 'production' ? 'dist' : 'app'  
end 
```

然后像这样使用你的路线：

```
get '/' do    
    send_file File.join(settings.public_folder, 'index.html')  
end 
```

这是假设“yeoman init”在 Sinatra 应用程序的根文件夹中运行。

然后，您要做的就是确保在部署到生产环境之前已运行“yeoman build”，并且将使用 yeoman 优化的内容。

# java - 如何在android / java中的json对象中获取json数组的所有标签名称列表

> ID：12508823
> 
> 赞同：1
> 
> 时间：2012-09-20T08:30:14.900
> 
> 标签：java, android, json, parsing

我在解析 json 响应时遇到了一个小问题，因为每当我发送请求时它都会不断更新。我看到的所有示例都让我们提供了标签名称。我的问题是我正在尝试从通过 API 发送的请求中解析数据，并且我想在开始解析之前列出 JSON 对象中存在的所有 JSON 数组的所有标签。在android中可以吗？[http://api.yamgo.tv/channel?apiKey=187abeefc53f900600dc0fc5b8f913a0&token=892e069fa48eead5e7f84cddafe7f0ba](http://api.yamgo.tv/channel?apiKey=187abeefc53f900600dc0fc5b8f913a0&token=892e069fa48eead5e7f84cddafe7f0ba) 这是我发送的请求，它给了我一个 json 响应。它具有作为 json 对象的通道，其中包含许多带有诸如宝莱坞、娱乐、音乐等标签的 json 数组。使用在线解析器来检查响应。我想要这个数组名称列表。我该怎么做。谁能帮忙。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T10:02:18.070

实际上，我是在一位朋友的帮助下才弄明白的。需要使用 Iterator 对象。这是代码片段

```
JSONObject channels = jobj.getJSONObject(TAG_CHANNELS);
    Iterator<?> keys=channels.keys();
    while( keys.hasNext() )
    {
        String key = (String)keys.next();
        Log.e("Key", key);
        if( channels.get(key) instanceof JSONArray ){
            jsontags.add(key);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:54:36.333

其中 jsonObj 是包含一些数据的 JSONObject，通过以下代码，您只能获取字段名称，如果您想要列值，那么您可以进一步添加键值。

```
List<String> listArray = new ArrayList<String>();
    Iterator iter = jsonObj.keys();
    int count=0;
    while(iter.hasNext()){
        listArray.add((String)iter.next());
        count +=1;
    }
    System.out.println(listArray);

output: [projector, video_conference, polycom, lcd, digital_phone, speaker_phone] 
```

# mono - iOS 6 Mono 和向后兼容性

> ID：12508826
> 
> 赞同：4
> 
> 时间：2012-09-20T08:30:22.317
> 
> 标签：mono, xamarin.ios, monodevelop, ios6, armv7

我正在将我的应用程序更新到 ios6 并且遇到以下问题

1.  无法通过支持 ARMv6 + ARM v7 的架构构建应用程序，而只能通过 ARM v7 构建应用程序（错误是 iOS6 与 ARM v6 不兼容）。这意味着我的应用程序不能在所有设备上运行？

2.  使用 ARMv7 构建应用程序无法使用标志 LLVM ...（错误 MT3001）

3.  使用 SD 6 构建应用程序还将向后兼容其他 iOS 更低版本和所有其他设备（请参阅问题/错误 1）。

我的系统配置是

*   MonoDevelop 3.0.4.7
*   单触 6.0.0.0
*   单声道 2.10.9

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T09:59:25.393

Xamarin.iOS 7.0 支持的设备架构取决于您安装的 Xcode 版本：

*   Xcode 4.5（或更高版本）：ARMv7 和 ARMv7s。
*   Xcode 4.4（或更早版本）：ARMv6 和 ARMv7。

这是每个 Xcode 版本的限制，而不是 Xamarin.iOS 本身。请注意，如果您想专门使用任何 iOS6 功能，则需要 Xcode 4.5。

如果您只为 ARMv7 构建，您将失去对最初的 iPhone、iPhone 3G（但不是 3GS）以及第一代和第二代 iPod 的支持。以下是完整列表：

**ARMv6**（Xamarin.iOS 停止支持带有 v8.10 的 ARMv6）

*   iPhone（原装）、3G
*   第 1、第 2 代 iPod

**ARMv7**

*   iPhone 3GS、4、4S
*   iPad 1、2、3、迷你
*   iPod 3、4、5 代

**ARMv7s**

*   iphone 5
*   iPhone 5C
*   平板电脑 4

**ARM64**（Xamarin.iOS 在 v8.6 中开始支持 ARM64）

*   iPhone 5S
*   iPhone 6、6+
*   iPad 空气
*   iPad 迷你 2、3

这意味着如果你想仍然兼容旧设备，你需要使用 Xcode 4.4（并放弃任何 iOS6 功能）。

# c# - 带有 JQuery 的图像滑块不起作用

> ID：12508828
> 
> 赞同：0
> 
> 时间：2012-09-20T08:30:27.117
> 
> 标签：c#, jquery, slider, image-gallery

我正在尝试使用 JQuery 实现一个简单的图像滑块。这是我的代码：

```
<p id="Photos">
        <img alt="Image-1" src="../../Images/Image1.png" />
        <img alt="Image-2" src="../../Images/Image-2.png" />
        <img alt="Image-3" src="../../Images/Image-3.png" />
    </p>

<script type="text/javascript">
    $(document).ready(function () {
        SlideImage(1);
    });

    function SlideImage(currentPhoto) {
        var NumberOfPhotos = $('Photos img').length;
        currentPhoto = currentPhoto % NumberOfPhotos;

        $('Photos img').eq(currentPhoto).fadeOut(function () {
            $('Photos img').each(function (i) {
                $(this).css('zIndex', ((NumberOfPhotos - i) + currentPhoto) % NumberOfPhotos
            );
            });

            $(this).show();

            setTimeout(function () { SlideImage(++currentPhoto); }, 3000);
        });
    }
    </script> 
```

首先，滑块不起作用，不断显示单个图像。任何解决此问题的建议都将受到高度赞赏，但更重要的是我需要了解代码中使用的变量“i”的含义，我从哪里获得它的价值以及它的目标是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:19:24.103

i 是您在调用“每个”的对象集合中的当前位置的索引。[jQuery API](http://api.jquery.com/each/)很好地解释了这些细节。

在这种情况下，我认为集合本身将为空，因为不是调用

```
$('Photos img').eq(currentPhoto).fadeOut(function () { 
```

我相信你想用

```
$('#Photos img').eq(currentPhoto).fadeOut(function () { 
```

因为您试图通过其 ID 值来处理该项目

# javascript - javascript parseInt - 不同基数的计算差异

> ID：12508845
> 
> 赞同：0
> 
> 时间：2012-09-20T08:31:46.757
> 
> 标签：javascript

对于base19 和base24，我知道a 的值为10，b 的值为11。

但是 `parseInt("ab", 19) returns 201`和`parseInt("ab", 24) returns 251`。

我想知道在每种情况下如何进行计算。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:36:05.150

这简单

```
10(a)*19 = 190 + 11(b) = 201

10(a)*24 = 240 + 11(b) = 251 
```

[这](http://en.wikipedia.org/wiki/Positional_notation)是关于如何使用位置符号的维基百科文章，[这里](http://www.mathsisfun.com/base-conversion-method.html)是关于基本转换的简单教程。

# video - 擦洗后不能再改变速率

> ID：12508847
> 
> 赞同：1
> 
> 时间：2012-09-20T08:31:56.850
> 
> 标签：video, ms-media-foundation

简单场景：我想在视频中寻找到某个位置，然后播放它。

问题是当我第一次使用[`SetRate()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms696979%28v=vs.85%29.aspx)将[速率设置为 0 以启用擦洗](http://msdn.microsoft.com/en-us/library/windows/desktop/ee892370%28v=vs.85%29.aspx)时，之后我无法再运行视频。似乎我无法将费率从 0 更改为其他任何值。我只能通过调用来进行帧步进[`Start()`](http://msdn.microsoft.com/en-us/library/ms694908%28v=vs.85%29.aspx)。

当简单地运行视频时（不将速率设置为 0），随后的速率更改确实有效。我还注意到，如果我将速率设置为 0 并再次设置为正速率，而在 ( `Start()`) 之间没有实际擦洗，速率变化确实发生了！

为了退出“擦洗模式”，我需要做任何额外的工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-16T20:26:45.840

当会话正在播放时，您不能在 Forward/Zero 之间更改速率。擦洗将会话置于播放状态（因为您调用了`Start()`），因此在擦洗之后您需要调用`Pause()`或`Stop()`在您可以将速率设置回正常之前。

参考： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms696979 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms696979(v=vs.85).aspx)

# .net - 使用 .NET 创建 SSB（站点特定浏览器）

> ID：12508851
> 
> 赞同：2
> 
> 时间：2012-09-20T08:32:04.077
> 
> 标签：.net, browser

我正在尝试使用 .NET 创建一个特定于站点的浏览器。我在谷歌上搜索了很多关于这个的东西，只遇到了 Prism，Mozilla 的 SSB 实现。我真的很希望有一篇 codeproject 文章，但到目前为止，还没有运气。

因此，我想获得有关以 .NET 作为开发平台创建新 SSB 的任何类型的指针、教程或任何信息。还有哪些浏览器引擎支持创建 SSB？

# php - 消息仅与第一个单词一起发送

> ID：12508853
> 
> 赞同：0
> 
> 时间：2012-09-20T08:32:16.227
> 
> 标签：php

我正在尝试使用 PHP 文件发送短信。所有电子邮件属性都包含在 URL 中。这里的问题是，只发送消息上的第一个单词！

我不知道为什么！

```
<?php
$url = "http://sms-gates.com/smspro/sendsms.php?user=myuser&password=mypass&numbers=".$_GET['mobile']."&sender=JobSeeker&message=".$_GET['msg']."&lang=en";

$link = fopen($url,"r");

while($res = fread($link,1024))
{

    echo $res;
}

fclose($link);
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T08:33:15.547

您需要对参数进行 urlencode 以将空格替换为 %20 等。

```
$url = "http://sms-gates.com/smspro/sendsms.php?user=myuser&password=mypass&numbers=".urlencode($_GET['mobile'])."&sender=JobSeeker&message=".urlencode($_GET['msg'])."&lang=en"; 
```

# android - GPS 和 NETWORK_PROVIDER 无法在真实设备上运行

> ID：12508855
> 
> 赞同：3
> 
> 时间：2012-09-20T08:32:18.430
> 
> 标签：android, location

我尝试使用 NETWORK_PROVIDER 获取当前位置并注册

```
LocationListener:
locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000, 0, locListener); 
```

我在 AndroidManifest.xml 中添加了以下权限：

```
android.permission.ACCESS_LOCATION
android.permission.ACCESS_FINE_LOCATION
android.permission.ACCESS_COARSE_LOCATION
android.permission.INTERNET 
```

但`onLocationChanged(Location location)`从来没有打电话。

如果我试图通过以下方式获取位置：

```
locManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
```

那么它总是返回空位置。

我不知道我错在哪里。任何帮助都应该感谢我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:37:23.890

您是否`requestLocationUpdates`在 LocationManager 实例上执行了方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:38:48.693

两个可能的原因：1) 设备上未启用 GPS 2) 您没有给它足够的时间来定位（我的设备最多可能需要 30 秒才能得到定位）。在得到修复之前，位置管理器将返回 null。同样，直到它得到修复，然后设备移动并且设备得到第二个修复，它不会触发“onLocationChanged”事件

# vbscript - QTP 在运行时不调用特定函数

> ID：12508857
> 
> 赞同：0
> 
> 时间：2012-09-20T08:32:24.127
> 
> 标签：vbscript, automation, qtp

对于使用 QTP（快速测试专业版）的人来说，我有一个问题，在运行时 QTP 不会调用特定函数并完全忽略它。并且既不报告运行时错误，也不报告语法错误。

你们中有人遇到过这个问题吗？或者你们中的任何人都可以帮助我解决这个问题吗？

非常感谢您的帮助。

谢谢马奈萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:41:34.243

QTP/脚本设置：

*   您是否在**所有**库`Option Explicit`的顶部运行
***   你跑吗`On Error Goto 0`*   您是否将运行测试设置（文件>设置>运行）设置`Pop up message box`为“运行会话期间发生错误时：”字段*   函数库是作为资源添加到 Action 的吗**

 **代码：

*   函数名称是什么？也许您选择了一个已经存在的关键字
*   如果将函数名称更改为绝对唯一的名称会发生​​什么
*   您确定该函数不存在于另一个库中，因此它不会被覆盖
*   函数名称是否与脚本中的变量（或数组）不同
*   您是否将功能设置为公开？

调试：

*   如果您直接从主操作调用该函数会发生什么
*   如果您将函数复制到新操作中并从该操作中调用它会发生什么**

# iphone - 无法在 iPhone 6.0 模拟器 Retina 4 英寸上全屏启动我的应用程序

> ID：12508861
> 
> 赞同：16
> 
> 时间：2012-09-20T08:32:36.617
> 
> 标签：iphone, ios, ios-simulator, ios6

我已将**Default-568h@2x.png**添加到我的项目并在项目设置中进行设置，我还为我的视图和该视图上的元素设置**了自动调整大小选项**，该视图最初加载到我的应用程序中，它是横向的，但在运行之后我在 iOS 6.0 Simulator Retina 4 英寸中的应用程序 我看到我的应用程序一直向左移动，在右侧留下黑色像素区域。

知道除了这些事情之外我应该做什么才能看到我的应用程序在 iOS 6.0 Simulator Retina 4 英寸上以“全屏”运行？

* * *

**[编辑#1：AppDelegate]**

我还像这样编辑了我的 AppDelegate.m：

```
viewControllerMain = [[ViewControllerMain alloc] init];
//[window addSubview:viewControllerMain.view];
window.rootViewController = viewControllerMain; 
```

* * *

**[编辑#2：编辑框架]**

我设法实现了全屏模式，但它不能正常工作。在我看来，我这样做：

```
CGRect frame = CGRectMake([UIScreen mainScreen].bounds.origin.x, [UIScreen mainScreen].bounds.origin.y, [UIScreen mainScreen].bounds.size.height, [UIScreen mainScreen].bounds.size.width);
self.frame = frame; 
```

这只会让我的视图全屏显示，但我在开头提到的右侧黑色区域**已死**，并且该区域**无法**进行用户交互（我在那里有 UIButton，它不会对触摸做出反应）。所以基本上，我所做的只是让我的视图以全分辨率显示，但视图元素的功能仅限于我的应用程序最初在 Retina 4 英寸模拟器上启动它时显示的区域。

* * *

**[编辑#3：在 XIB 文件中更改 UIView 的大小]**

我什至尝试在我的 XIB 文件中更改 UIView 的实际大小，将它们全部调整为 Regina 4 Full Screen，但仍然 - 同样的事情。

* * *

**[编辑#4：改变窗口对象的大小]**

我试图在 AppDelegate.m 中更改窗口对象的大小，但还是没有运气。这是 AppDelegate.m 的样子。

```
application.statusBarOrientation = UIInterfaceOrientationLandscapeRight;

mainViewController = [[MainViewController alloc] init];
window.rootViewController = mainViewController;

// Override point for customization after application launch
[window setFrame:[UIScreen mainScreen].bounds];
[window makeKeyAndVisible]; 
```

* * *

**[编辑#5：“解决方案”]**

到目前为止，我做了以下工作：在 IB 中，我制作了具有 iPhone 5 分辨率大小的新 UIView，分配了相同的所有者类，这些所有者类正在处理为 iPhone 5 之前的分辨率制作的等效 UIView，并且在代码中我需要在哪里加载我检查的其中一些 UIView [ UIScreen mainScreen].borders 来确定当前运行我的应用程序的设备。通过这种方式，我设法让事情顺利进行。

但是，主要问题仍然存在 - 为什么在我完成我提到的所有这些事情之后，我的所有 UIView 都没有自动拉伸到新的分辨率？

无论如何，赏金活动会持续 5 或 6 天。如果有人设法解决这个问题，我将不胜感激。如果没有，我将赏金**@onegray**，因为那是我一开始没有处理的事情，而在我目前的实现中，它真的很重要。

最好的祝福。

* * *

**[编辑#6：MainWindow.xib 全屏在启动选项]**

正如@ **user1702985**建议的那样，我在取消选择时**打开**了这个选项。但**没有运气**。

当我启动我的应用程序时，我会在 2 秒内显示一个 View 和一个 UIImageView。如果我正确设置 Autosize 属性，则此 UIView 将在 iPhone 5 模拟器上全屏显示。但。之后，我有了第二个 UIView，其中包含垂直 UIScrollView、作为页眉和页脚的 UIViews 和一个 UIButton，我还为这些元素设置了所有自动调整大小选项，但这个 UIView 以 iPhone 4 的分辨率显示。它真的很奇怪，我仍然不知道它是什么。

* * *

**[编辑#7：设置的自动调整大小选项]**

这个自动调整大小选项是为我所有的 UIViews 和它的元素设置的。

![在此处输入图像描述](../Images/4cd2037f2e7ae8282ee38280882b606d.png)

* * *

**[编辑#8：启动时全屏选项的解释]**

MainWindow.xib 属性。

![在此处输入图像描述](../Images/47ce8ae777b5206368860783a278e4f8.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-29T13:09:10.303

我希望这会对您有所帮助，**但不确定您是否会在全屏下获得触摸效果**，因此您必须检查您的应用程序的全触摸。

第 1 步：单击图像中显示的导航中的项目，然后单击丢失的文件

第 2 步：在第二张图片中单击添加

现在运行项目，您的项目将在 iPhone 5 全屏或模拟器中运行。！

![在此处输入图像描述](../Images/41e5d9ee7f925427491f6842ebed161c.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-24T08:12:38.287

确保键窗口大小合适。解决方法是设置适当的框架：`[window setFrame:[[UIScreen mainScreen] bounds]]`.

更新：
没有源代码很难猜出问题出在哪里。我创建了[简单的应用程序存根来测试 iPhone4/iPhone5 的界面方向](https://github.com/onegray/LandscapeTest)。我刚刚创建了新的“单视图应用程序”，在根视图中添加了一些子视图，并添加了“默认”图像。我是在 Xcode 4.3.2 中完成的，没有`Xcode 4.5.`And app 的任何额外功能会自动将其屏幕拉伸到适当的大小（对于两个`portrait/landscape`方向）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-27T10:28:24.653

我遇到了同样的问题，即部分屏幕没有响应用户交互。选择 MainWindow.xib 上的“启动时全屏”选项为我修复了它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-26T03:32:27.683

无论我做什么，我都无法让我的应用全屏显示。

但是在我将文件“Default-568@2x.png”添加到我的应用程序之后。现在所有 xib 的运行全屏。您可以通过在 XCode 中创建一个新应用程序并复制创建的黑色 png 来快速测试这一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-05T21:13:16.593

如果您使用 XCode 6.1 试试这个解决方案（对于没有完整图像集的项目）：

1.  项目 -> 目标 -> 常规 -> 应用程序图标和启动图像 -> 启动屏幕文件
2.  为第一个屏幕选择 xib。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-18T18:11:05.263

你试过这个吗？

iOS 模拟器 > 硬件 > 设备 > iPhone(Retina 4-inch)

我只是遇到了同样的问题，这就是我解决的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T08:44:02.530

您如何将主视图控制器添加到窗口？iOS6 不再支持仅将视图添加为子视图。

这是我博客上关于使应用程序在 iPhone 5 屏幕尺寸上运行的文章中的一个例外。

**使用 window.rootViewController 添加您的初始视图**

首先，如果您在代码中构建初始视图，请确保使用 window.rootViewController 将初始视图添加到窗口，而不是简单地将视图添加为子视图的旧方法。如果你不这样做，在 iOS 6 下你的应用程序将根本无法自动旋转。

这是一个例子：

```
navigationController = [[UINavigationController alloc] initWithRootViewController: myRootVC];
//[window addSubview:[navigationController view]]; Don't do this!
window.rootViewController = navigationController; // Do this instead! 
```

更多信息请访问[http://pervasivecode.blogspot.co.uk/2012/09/making-apps-work-on-iphone-5-screen-size.html](http://pervasivecode.blogspot.co.uk/2012/09/making-apps-work-on-iphone-5-screen-size.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-28T02:43:37.363

通过长按删除模拟器上的应用程序并重新运行。

这对我有用，经过 4 英寸的视网膜调整。一切都按照我在 IB 中缝合的方式自动调整大小。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-18T05:31:03.497

请为应用程序添加启动屏幕。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-09T17:11:22.580

在 iOS 8 上测试时，我们在 iOS 6 天创建的应用程序上遇到了类似的问题。

我们的解决方法是在 MainWindow.xib 上设置“隐藏”标志。

这就是我们在[这里](https://stackoverflow.com/a/27294150/411401n)找到修复的方式。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-11T13:37:29.060

同样的事情也发生在我身上。我试图制作一个视频闪屏，由于我无法控制显示闪屏的时间，因此无法显示完整的视频，我不得不制作一个假的闪屏，这只是一个控制器先显示后删除。无论我尝试什么，该控制器的视图都没有显示为全屏。最后，我发现它正在发生，因为我没有启动图像。

**解决方案：**将启动画面添加到您的项目中（即使它们只是黑色图像），并且应该修复全屏问题。

# objective-c - Objective-C ARC 和 GCC ({}) 扩展兼容性？

> ID：12508863
> 
> 赞同：1
> 
> 时间：2012-09-20T08:32:48.380
> 
> 标签：objective-c, gcc, macros, c-preprocessor, automatic-ref-counting

我正在将一些 Objective-C 代码转换为 ARC，它大量使用了 GCC ["Statements and Declarations in Expressions" 扩展](http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html#Statement-Exprs) `({})`。

GCC 扩展在预处理器宏中用于创建 Objective-C 对象。实际的宏相当复杂，所以这里是一个人为的例子来简化事情。就我的示例而言，假设`_x`参数始终为`NSString *`：

```
#define f(_x) ({ NSString *x = (_x); [NSString stringWithString: x]; }) 
```

这个宏当然会像这样调用：

```
void foo() { NSString *s = f(@"foo"); } 
```

在 ARC 之前的环境中，这工作得很好。调用创建的对象`stringWithString:`是一个自动释放的对象，GCC 扩展将它分配给`s`.

`NSLog()`在转换为 ARC（Xcode 4.4.1）之后，当语句块退出时，对象会立即释放（我通过实例化一个s it's的对象来确认这一点`dealloc`）。

我尝试使用以下类型转换修改宏：

```
#define f(_x) ({ NSString *x = (_x); (__autoreleasing id) [NSString stringWithString: x]; }) 
```

和

```
#define f(_x) ({ NSString *x = (_x); (NSString __autoreleasing *) [NSString stringWithString: x]; }) 
```

但两种形式都会导致编译错误：

*`Explicit ownership qualifier on cast has no effect`*

看来 ARC 和这个 GCC 扩展是不兼容的。

是这样还是我错过了一些简单的告诉ARC不要立即释放对象的东西？

我确实有一些选择，目前最有吸引力的似乎是将所有这些宏转换为`__inline__`函数，但我有相当多的代码要处理。我真的希望能快速修复，所以任何想法都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:29:40.923

有趣的观察，可能值得一个编译器错误报告，因为结果显然与定义的语义相反。

您可以将分配移动到您的宏中：

```
#define f(lhs, _x) ({ NSString *x = (_x); lhs = [NSString stringWithString: x]; }) 
```

这应该解决发布问题。但是切换到内联函数可能更好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:01:26.677

我已经调试了几个小时并找到了解决方案，所以我会回答我自己的问题。FWIW 我同意 CRD 并认为这是一个错误——我将向 Apple 提交报告。

碰巧我为我的问题弥补的“人为的例子”实际上有效（doh）。正如我最初提到的那样，我正在使用的宏要复杂得多，但事实并非如此。我发现如果我通过临时返回创建的对象作为语句块中的最后一条语句，它们*会。*当这样写时，ARC不会释放对象。我假设 clang 中有一些非常窄的 RVO 类型代码，它与 ARC 解析器发生冲突。

无论如何，解决方法如下（滚动到行尾）：

```
#define f(_x) ({ NSString *x = (_x); NSString *y = [NSString stringWithString: x]; y; }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:40:30.293

问题是 {} 内的 NSString *x 未在 {} 外定义。所以以后不能引用它，ARC释放它是正确的。您的宏不应该首先工作，因为 { } 块的返回值在我看来是未定义的。

这应该可以解决问题

```
#define f(_x) (NSString *x = (_x); [NSString stringWithString: x] 
```

但由于命名和是多个语句，可能会产生副作用。

使用内联函数是一种更合乎逻辑的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T08:48:01.597

PS：如果 ({}) 是我不完全了解的 GCC 特定宏扩展，那么请注意 Apple 现在默认使用 clang，而不是 GCC。

# hibernate - 通过单个 struts 连接到多个数据库 - hibernate 应用程序

> ID：12508864
> 
> 赞同：2
> 
> 时间：2012-09-20T08:32:48.160
> 
> 标签：hibernate, struts, multiple-databases, single-instance

我们有一个在 tomcat 上运行的 struts-hibernate-mysql 应用程序。我们希望应用程序具有相同的代码库，但希望应用程序根据登录系统的用户动态连接到不同的数据库。

基本上，我们希望每个不同的学校都有不同的数据库。每所学校的数据库都会很大，因此我们决定为每所学校单独设置数据库，但 Java 代码库要相同。因此，我们不希望在 tomcat 上部署 Web 应用程序的多个实例，但单个应用程序应该能够根据登录的人连接到各种数据库。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:50:43.987

设计更好的领域模型将是最好的方法。

否则，我将创建多个数据源（当然使用池）并拥有多个休眠会话工厂（或实体管理器，具体取决于您的休眠版本）。

您可以保留一个地图，该地图将学校的密钥映射到其会话工厂。当您执行代码时，请为学校获取正确的工厂。

# java - 我使用 java 代码连接到 LDAP，我想将其提取到属性文件或 xml 文件中以解决运输问题

> ID：12508867
> 
> 赞同：0
> 
> 时间：2012-09-20T08:33:07.553
> 
> 标签：java, xml, properties, ldap

好吧，这是我的 java 代码，它允许我连接到 ldap 服务器。

```
 public static Hashtable getConnexion()
           {

       env.put(Context.INITIAL_CONTEXT_FACTORY,
            "com.sun.jndi.ldap.LdapCtxFactory");
       env.put(Context.PROVIDER_URL, "ldap://localhost:10389");
       env.put(Context.SECURITY_AUTHENTICATION, "simple");
       env.put(Context.SECURITY_PRINCIPAL, "uid=admin,ou=system"); 
       env.put(Context.SECURITY_CREDENTIALS, "secret");
       return env;

       } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:01:42.070

另一种选择。您可以将上述属性作为 JVM 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:47:28.323

如果 LDAP 客户端是独立的，则可以通过多种方式对其进行配置：

使用[UnboundID LDAP SDK](https://www.unboundid.com/products/ldapsdk/) `LDAPCommandLineTool`类并为程序指定参数。例如，如果包含该`main`方法的类的名称是`samplecode.MyLdapConnectionClass`：

```
java -cp my-classpath samplecode.MyLdapConnectionClass --hostname localhost \
       --port 10389 \
       --bindDN "uid=admin,ou=system" \
       --bindPassword "secret" 
```

UnboundID LDAP SDK`LDAPCommandLineTool`类自动处理所有这些类型的命令行参数，例如：

*   `--hostname`（或`-h`）用于主机名
*   `--port`（或`-p`）用于端口
*   所有 SASL 和简单 BIND 参数
*   所有安全连接参数，例如 (`--useSSL`或`--useStartTLS`)

该类`LDAPCommandLineTool`继承了一个方法，该方法`getConnection()`与这些命令行参数指定的服务器建立连接。

或者指定属性文件的名称，并使用 Apache Commons Configuration或`load()`.`java.util.properties`

无论哪种方式，JNDI 都不应该用于新代码。请改用 UnboundID LDAP SDK。

### 也可以看看

*   [LDAP：示例代码](https://code.google.com/p/ldap-sample-code)
*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)

# wpf - 确定 DataGrid 标题列偏移量

> ID：12508868
> 
> 赞同：2
> 
> 时间：2012-09-20T08:33:13.543
> 
> 标签：wpf, wpfdatagrid, datagridcolumnheader

我有一个以编程方式创建的动态 DataGrid（.NET 4，WPF）。它的标题栏是可调整大小和可移动的。此外，我有一种标尺控件，它有一些标记，当列移动时，这些标记必须移动（并准确指向列中间）。

我正在观察 DataGrid 的 ColumnReordering 和 SizeChanged 事件，并希望提供有关每列尺寸和相对于 datagrid 控件左边缘的起始位置的确切信息。有没有办法在控件中获取特定列的偏移量？

仅将所有先前列的宽度相加是不够的 - 列宽的总和小于总控件宽度（目前为 1px * 列数）。可能由于列之间的一些分隔线等而出现，如果设计师以后改变样式，这可能会改变。我可能会从这个差异中找出分隔符的宽度，并在位置计算公式中使用这个值，但是如果有一个现成的、提供控制的方法，我当然更愿意使用它。

# windows-7 - 更改 MASM 控制台窗口大小

> ID：12508872
> 
> 赞同：0
> 
> 时间：2012-09-20T08:33:29.057
> 
> 标签：windows-7, console, masm, masm32

我正在制作一个程序，该程序至少需要一个控制台窗口大小`80 X 80`来打印一个大小为正方形的矩阵`21 x 18`。这些正方形需要它们之间的空间才能区分，特别是一个`43 x 37`窗口。目前我使用`80 x 25`窗口设置，这还不够。

我使用下面的代码来更改屏幕大小：

```
MOV AH, 0
MOV AL, 3 ; use 80 x 25 screen
INT 10H 
```

根据这个[网站](http://assemblytutorial.blogspot.com/2010/09/interrupt-10h-service-0-set-screen-mode.html)。我尝试`MOV AL`使用其他选项更改 , n ，但是每当我使用大于 3 的大小时，控制台都会暂停并显示一个包含以下消息的对话框：

```
16 bit MS-DOS Subsystem

Command Propmt - sample.asm
This system does not support fullscreen mode... 
```

我正在使用 Win 7 Ultimate 32 位和`masm32`.

**有什么方法可以将我的控制台窗口大小更改为大于`80 x 25`MASM 中的大小而不会出现错误？**

# c# - 连接未打开

> ID：12508873
> 
> 赞同：1
> 
> 时间：2012-09-20T08:33:33.650
> 
> 标签：c#, sql, database-connection

我有个问题。我写了这个方法来打开sql连接。但它没有用。为什么这不起作用。

```
public SqlConnection connection( ) 
{
    string DBName = ConfigurationManager.AppSettings["DBName"].ToString();
    string ServerName = ConfigurationManager.AppSettings["ServerName"].ToString();
    string UserId = ConfigurationManager.AppSettings["UserId"].ToString();
    string DBPassword = ConfigurationManager.AppSettings["DBPassword"].ToString();

    EMVTool.OSSPwdProcessor PwdPass = new EMVTool.OSSPwdProcessor();

    String sClearPwd = "";

    if (DBPassword.Length > 40)
        sClearPwd = PwdPass.DecryptPwd(DBPassword);
    else
        sClearPwd = DBPassword;

    string ConnectionString = "Server=" + ServerName + ";Database =" + DBName + ";UID =" + UserId + ";PWD =" + sClearPwd + ";MultipleActiveResultSets=True;";

    SqlConnection connect = new SqlConnection(ConnectionString);

    return connect;
} 
```

我正在调用类似打开sql连接的方法。

```
connection().Open(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:37:34.430

它不起作用，因为您打开了某些东西，但之后又使用了不同的实例。

要使其工作，请将函数返回值分配给局部变量：

```
using (SqlConnection  conn = connection())
{
    conn.Open();
    //rest of code...
} 
```

# ruby-on-rails - 尝试设置本地环境以运行从 Heroku 克隆的应用程序

> ID：12508874
> 
> 赞同：1
> 
> 时间：2012-09-20T08:33:34.620
> 
> 标签：ruby-on-rails, ruby, git, heroku

我已经尝试了几个小时来正确设置我的本地环境，这样我就可以在本地运行一个应用程序并在它上面工作，但它只是不工作......我已经安装了所有似乎需要的东西，但是为了我的生活我只是无法启动 Rails 服务器。

这是我尝试启动 rails 服务器时返回的代码。有任何想法吗？

```
localhost:badger user$ rails s

/Users/user/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/pg-0.11.0/lib/pg.rb:4:in `require': cannot load such file -- pg_ext (LoadError)
from /Users/user/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/pg-0.11.0/lib/pg.rb:4:in `<top (required)>'
from /Users/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler 1.1.3/lib/bundler/runtime.rb:68:in `require'
from /Users/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /Users/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each'
from /Users/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `block in require'
from /Users/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
from /Users/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
from /Users/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
from /Users/user/badger/config/application.rb:7:in `<top (required)>'
from /Users/user/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.0.7/lib/rails/commands.rb:28:in `require'
from /Users/user/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.0.7/lib/rails/commands.rb:28:in `block in <top (required)>'
from /Users/user/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.0.7/lib/rails/commands.rb:27:in `tap'
from /Users/user/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.0.7/lib/rails/commands.rb:27:in `<top (required)>'
from script/rails:6:in `require' 
from script/rails:6:in `main' 
```

* * *

* * *

现在我要收回这个...

```
localhost:badger user$ rails s
=> Booting WEBrick
=> Rails 3.0.7 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/postgresql_adapter.rb:929:in `initialize': FATAL:  password authentication failed for user "edwin" (PGError)

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/postgresql_adapter.rb:929:in `new'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/postgresql_adapter.rb:929:in `connect'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/postgresql_adapter.rb:228:in `initialize'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/postgresql_adapter.rb:25:in `new'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/postgresql_adapter.rb:25:in `postgresql_connection'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `new_connection'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:237:in `checkout_new_connection'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:191:in `block (2 levels) in checkout'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:187:in `loop'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:187:in `block in checkout'

from /Users/user/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:186:in `checkout'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:94:in `connection'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:317:in `retrieve_connection'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_specification.rb:97:in `retrieve_connection'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_specification.rb:89:in `connection'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/associations.rb:1806:in `create_has_and_belongs_to_many_reflection'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/associations.rb:1411:in `has_and_belongs_to_many'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.7/lib/active_record/autosave_association.rb:137:in `has_and_belongs_to_many'

from /Users/user/badger/app/models/user.rb:7:in `<class:User>'

from /Users/user/badger/app/models/user.rb:1:in `<top (required)>'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:454:in `load'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:454:in `block in load_file'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:596:in `new_constants_in'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:453:in `load_file'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:340:in `require_or_load'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:491:in `load_missing_constant'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:183:in `block in const_missing'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:181:in `each'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:181:in `const_missing'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/inflector/methods.rb:124:in `block in constantize'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/inflector/methods.rb:123:in `each'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/inflector/methods.rb:123:in `constantize'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:528:in `block in <class:Reference>'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:538:in `yield'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:538:in `default'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:538:in `get'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/devise-1.4.2/lib/devise/mapping.rb:84:in `to'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/devise-1.4.2/lib/devise/rails/routes.rb:180:in `block in devise_for'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/devise-1.4.2/lib/devise/rails/routes.rb:176:in `each'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/devise-1.4.2/lib/devise/rails/routes.rb:176:in `devise_for'

from /Users/user/badger/config/routes.rb:2:in `block in <top (required)>'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.0.7/lib/action_dispatch/routing/route_set.rb:233:in `instance_exec'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.0.7/lib/action_dispatch/routing/route_set.rb:233:in `draw'

from /Users/user/badger/config/routes.rb:1:in `<top (required)>'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:235:in `load'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:235:in `block in load'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in `block in load_dependency'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:596:in `new_constants_in'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in `load_dependency'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:235:in `load'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/application.rb:127:in `block in reload_routes!'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/application.rb:127:in `each'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/application.rb:127:in `reload_routes!'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/application.rb:120:in `block in routes_reloader'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/file_update_checker.rb:32:in `call'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/file_update_checker.rb:32:in `execute_if_updated'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/application/finisher.rb:51:in `block (2 levels) in <module:Finisher>'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/application/finisher.rb:52:in `call'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/application/finisher.rb:52:in `block in <module:Finisher>'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/initializable.rb:25:in `instance_exec'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/initializable.rb:25:in `run'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/initializable.rb:50:in `block in run_initializers'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/initializable.rb:49:in `each'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/initializable.rb:49:in `run_initializers'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/application.rb:134:in `initialize!'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/application.rb:77:in `method_missing'

from /Users/user/badger/config/environment.rb:5:in `<top (required)>'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `require'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `block in require'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in `block in load_dependency'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:596:in `new_constants_in'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in `load_dependency'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `require'

from /Users/user/badger/config.ru:3:in `block in <main>'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/builder.rb:46:in `instance_eval'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/builder.rb:46:in `initialize'

from /Users/user/badger/config.ru:1:in `new'

from /Users/user/badger/config.ru:1:in `<main>'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/builder.rb:35:in `eval'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/builder.rb:35:in `parse_file'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/server.rb:162:in `app'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/server.rb:253:in `wrapped_app'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/server.rb:204:in `start'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/commands/server.rb:65:in `start'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/commands.rb:30:in `block in <top (required)>'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/commands.rb:27:in `tap'

from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.7/lib/rails/commands.rb:27:in `<top (required)>'

from script/rails:6:in `require'

from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:01:35.673

打开`config/database.yml`并记下开发数据库连接的用户名。

在您的终端类型`createuser #<the username>`上，对超级用户说不，对创建数据库说是，对创建角色说不。（不，是，不）。

然后`rake db:create`和`rake db:migrate`。

现在`rails s`。

你应该启动并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:47:22.140

您是否使用 安装了 Gemfile 中列出的所有 gem `bundle`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:34:57.043

简单的解决方案

`sqlite3`在开发和`pg`生产中使用。

```
#Gemfile
gem 'sqlite3'

group :production do
  gem 'pg'
end 
```

# php - how to create a progress bar using php output buffering and jquery?

> ID：12508878
> 
> 赞同：0
> 
> 时间：2012-09-20T08:33:50.163
> 
> 标签：php, jquery, mysql, progress, ob-start

how to create a progress bar using php output buffering and jquery?

i been searching this for weeks,

i am desperate to learn this, this is a very big help for me, is someone the here share some codes?

i know the this will need to script. i have tried sereval code for my client side script:

```
var request = new XMLHttpRequest();
request.addEventListener("progress", updateProgress, false);

function updateProgress(e) {
var percent = (e.loaded / e.total) * 100;
 /** update the with of the progress bar **/
} 
```

and to my server side, i dont know how. but actually i want to use this for a mysql query so that i can see the progress of my query and another thing is i dont know how to use output buffering.

somebody help me on this please.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:44:51.890

有一些方法可以实现这一点

1) 使用 PHP APC,iframe,Jquery

2) 闪存文件

3) CGI 脚本

您可以尝试前两种，这里是第二种方法的文章，可以让您更清楚

[http://pixeline.be/experiments/jqUploader/test.php](http://pixeline.be/experiments/jqUploader/test.php)

下面是第一种方法的文章，但是第一种方法你需要在你的服务器上配置 PHP APC 它就像输出缓冲

[http://www.johnboy.com/php-upload-progress-bar/](http://www.johnboy.com/php-upload-progress-bar/)

# javascript - How to let an User draw and save polygons on an HTML Site?

> ID：12508888
> 
> 赞同：3
> 
> 时间：2012-09-20T08:34:17.980
> 
> 标签：javascript, html, canvas, svg, polygon

I want to let an User draw Polygons on an HTML Site. I also want to enable the user to save and load his drawn polygons in an human-readable file like svg or xml.

It is important that i can read out some properties of the polygons, like its position on the page. I don't want to have an online drawing program like jquery-svg.

I have looked at [http://jsdraw2d.jsfiction.com/demo/linepolygon.htm](http://jsdraw2d.jsfiction.com/demo/linepolygon.htm) , but this tool is not ver sophisticated yet...

Do you have any ideas / tools that could help me ?

Best,

Hans

# windows-services - 如何在同一域中的不同服务器上设置 Windows 服务之间的依赖关系

> ID：12508892
> 
> 赞同：2
> 
> 时间：2012-09-20T08:34:39.127
> 
> 标签：windows-services, dependencies

我有一种情况，在另一台服务器上的 Windows 服务启动之前，不应启动一台服务器上的 Windows 服务。我想做的是设置服务依赖项，但标准`"sc <service1> depend= service2"`似乎不适合这一点。

我可以将服务代码包装在 TryUntilSuccesful() 类型的调用中，但我想知道是否有推荐的方法来为同一域中的服务器之间的 Windows 服务设置依赖关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:05:43.593

同一台机器上的 Windows 服务之间的依赖关系由服务控制管理器 (SCM) 管理。如果您的服务依赖于不同机器上的服务，则 SCM 不能/不会帮助您。

因此，您必须运行自己的一些代码，以便以某种方式监视远程服务是否正在运行，并且要运行该代码，您必须允许您的服务在有或没有依赖关系的情况下启动。

在不知道服务目的的情况下很难制定详细的解决方案，但原则上您可能需要您的服务具有两种操作模式：一种除了以某种方式监视它所依赖的远程服务是否正在运行之外什么都不做; 另一个是它执行其全部功能**并继续监视依赖关系的**地方。

最后一点是至关重要的——在任何情况下，您都必须持续监控依赖关系，而不仅仅是在您的服务启动时，因为与单机情况不同，远程计算机上的 SCM 不会阻止远程服务被停止，因为它对您对它的依赖一无所知。

# vim - 如何表示换行？

> ID：12508897
> 
> 赞同：4
> 
> 时间：2012-09-20T08:34:51.310
> 
> 标签：vim

在**vim**中，我现在使用**wrap on**。我需要通过前置字符来表示换行。我知道这是可能的——我几年前就在使用它，但是我的旧 .vimrc 丢失了。或者任何其他有用的换行指示都会有所帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T08:40:55.167

查看[`:h showbreak`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27showbreak%27)

> 'showbreak' 'sbr' 字符串 (默认 "")
> 
> 放在已换行的行开头的字符串。有用的值是 "> " 或 "+++ ":
> :set showbreak=>\

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T08:40:46.150

有趣:) 你为什么不只使用左边的行号？您会看到新行开始的时间，因为新数字只出现在新行上，而不会出现在屏幕上的断行上，无论它有多长。

```
:set nu 
```

# javascript - Small change required to Form Slider

> ID：12508902
> 
> 赞同：1
> 
> 时间：2012-09-20T08:35:10.537
> 
> 标签：javascript, slider

I'm using a slider code I found on a site. It works well except I want to make a small change to the code. I'm still learning Javascript so I'm not quite sure how to get this done.

Here is the code, I'm using.

```
<div class="demo">

<div class="SliderControl">
    <label for="s1">Slider 1:</label>
    <input type="text" class="SliderText" readonly="readonly" id="s1" name="s1"/>
    <div class="RatingSlider" id="s1Slider"></div> 
</div>

<div class="SliderControl">
    <label for="s2">Slider 2:</label>
    <input type="text" class="SliderText" readonly="readonly" id="s2" name="s2"/>
    <div class="RatingSlider" id="s2Slider"></div> 
</div>
<div class="SliderControl">
    <label for="s3">Slider 3:</label>
    <input type="text" class="SliderText" readonly="readonly" id="s3" name="s3"/>
    <div class="RatingSlider" id="s3Slider"></div> 
</div>
</div>

<script type="text/javascript">
    $('.RatingSlider').each(function(idx, elm) {
            var name = elm.id.replace('Slider', '');
        $('#' + elm.id).slider({
                value: 3,
                min: 0,
                max: 5,
                step: .5,
                slide: function(event, ui) {
                    $('#' + name).val(ui.value);
                }
            });
    });
</script> 
```

Right now the input form displays the current value of the slider. Instead I want it to display Poor, Fair, Average etc. eg: if the value of the slider is 3, I want the text in the input box to be Fair. I think I have to use an array and then pass on the value but I'm not sure how to get it done. I'd appreciate if someone could point me in the right direction. Thanks

# javascript - 服务器端验证后如何将焦点设置在元素上 - MVC 3

> ID：12508903
> 
> 赞同：3
> 
> 时间：2012-09-20T08:35:19.663
> 
> 标签：javascript, jquery, asp.net-mvc-3, validation

大家早上好。

出于某种原因，我在模型的下拉列表中有一层服务器端验证：

```
 public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (SomethingVisible && DropDownListSelection == 0)
        {
            yield return new ValidationResult("Please make a selection", new[] { "DropDownListSelectionId"});
        }
    }

<div class="editor-field">
                            @Html.DropDownListFor(x => x.DropDownListSelectionId, new SelectList(Model.DropDownListSelection, "DropDownListSelectionId", "DropDownListSelectionName"))
                            <br />
                            @Html.ValidationMessageFor(model => model.DropDownListSelectionId)
                        </div> 
```

这工作得很好，而且在 !Model.IsValid 时会显示适当的验证错误。迷人的。

然而，由于一些这样的表单可能非常高（我知道，我知道，讨厌），并且此验证可能会丢失，即您必须向下滚动才能看到验证错误，有些人不喜欢滚动。

因此，我想做的是使用 jquery/javascript 将焦点设置在已验证的元素上，我将如何去做呢？

为厚厚的问题道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:03:57.957

```
$(function(){
    $('input, select, textarea').each(function(){
         if($(this).hasClass('input-validation-error'))
              $(this).focus();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:43:26.343

我通常在每次表单加载开始时做的事情是检查是否有任何带有“验证”类的元素，并将我的注意力集中在该类的第一次出现上。在大多数浏览器中，它应该自动滚动到焦点元素。

# php - Only showing Div if sub categories are greater than 1

> ID：12508905
> 
> 赞同：0
> 
> 时间：2012-09-20T08:35:22.690
> 
> 标签：php, magento

I have a section of code which finds if there are subcategories of a category and if there is then it displays the subcategories in a list view.

I am trying to add in a function that says if the subcategories are over 1 then show a DIV and if not then do not show the DIV as it wont be showing any subcategories.

This is what I have so far but it doesn't seem to be working.

```
<?php 
/* Load category by id */
$cat = Mage::registry('current_category');

/*Returns comma separated ids*/
$subcats = $cat->getChildren();

if (count($subcats) > 0): ?>

<div style="width:100%; height:auto; text-align:center; font-size:16px; color:#373737; padding:2px 0; margin-top:-5px; margin-bottom:3px; background:#f1f1f1;">Choose Your Category</div>

<?php endif;

foreach(explode(',',$subcats) as $subCatid)
{
$_category = Mage::getModel('catalog/category')->load($subCatid);
if($_category->getIsActive()) {
  echo '<li><a href="'.$_category->getURL().'" title="View the products for the "'.$_category->getName().'" category">'.$_category->getName().'</a></li>';

/* Load category by id */
$sub_cat = Mage::getModel('catalog/category')->load($_category->getId());

}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:40:28.517

```
if (count($subcats) > 0) 
```

我相信你的 $subcats 不是数组它的字符串，所以你应该使用 strlen 函数

```
if(strlen(trim($subcats)) > 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:01:51.103

也许你应该这样做：

```
$subcats = explode(',', $cat->getChildren()); 
```

前 ：

```
if (count($subcats) > 0) 
```

因为你的 $subcats 似乎是一个 csv 字符串，然后替换你的：

```
foreach(explode(',',$subcats) as $subCatid) 
```

经过 ：

```
foreach ($subcats as $subCatid) 
```

# validation - Javascript Validation in Joomla Component

> ID：12508907
> 
> 赞同：0
> 
> 时间：2012-09-20T08:35:43.470
> 
> 标签：validation, joomla2.5

```
 <script language="javascript">

function myValidate(f) {
        if (document.formvalidator.isValid(f)) {
            f.task.value='save';
            f.submit(); 
        }
        else {
                alert('Error!');
                return false;
        }
        return false;
}
</script> 
```

Putting form action as : : below

`<form action="index.php" onsubmit="return myValidate(this);" class="form-validate" method="post" name="adminForm" id="adminForm">`

Its working on this comment submit button very fine, not on save & Close in joomla

```
<!--<input type="submit" name="submit" id="submit" value="submit" />
-->
<input type="hidden" name="option" value="com_result" />
<input type="hidden" name="id" value="<?php echo $this->result->id; ?>" />
<input type="hidden" name="task" value="" />
<input type="hidden" name="controller" value="result10" /> 
```

Not working in Joomla Component.Saving the form On Ok Button of Error Alert. any suggestion ?

# sql - 建模音乐艺术家/团体

> ID：12508912
> 
> 赞同：2
> 
> 时间：2012-09-20T08:36:06.200
> 
> 标签：sql, database-design

我正在构建一个 Web 应用程序，显示 50 年代和 60 年代的图表记录/专辑。

目前我有这样的东西（删除了很​​多不相关的东西）：

![group_performance_role](../Images/f8af86df118a157d6db20d13b2e350cc.png)

名为“group”的表曾被建模为“person”表、“person_group”连接表和“group”表。问题是我不能让外键“group_performance_role.group_id”同时引用“person”和“group”表。

我决定保留这种结构，但要求每个“人”自动成为 1 的“组”；但是，这会造成命名上的歧义，并且意味着该表包含多个东西 - 有时是单个艺术家（“John Lennon”），有时是一个组（“The Beatles”）。

我需要找到一种方法将艺术家（可能是一个人或一群人）与表演联系起来，同时避免不良做法，比如一张桌子可以容纳多个“类型”的东西。

我*在*网上搜索过，但几乎没有找到相关答案。非常感谢任何帮助/建议/建议！

**编辑：** “角色”表是人员/团体可以在表演中执行的角色的查找表。示例：“艺术家”、“作曲家”、“管弦乐队指挥”等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:09:10.053

考虑使用[继承](https://stackoverflow.com/a/12037398/533120)来建模各种类型或艺术家：

*（顺便说一句，你的`Group_Member`桌子允许分组。我猜这不是你想要的。）*

![在此处输入图像描述](../Images/3839a9988e6ed184b4c9c4fec51a6417.png)

但是，这忽略了角色可能因艺术家类型而产生的任何差异。例如，让整个团队成为“指挥者”是没有意义的。如果强制执行这些类型的约束很重要，您可以采用“蛮力”方法并将特定于个人的角色与特定于组的角色分开：

![在此处输入图像描述](../Images/df938c086f34501aaa4c82a081c277a7.png)

*（顺便说一句，如果您想防止特定于组的角色名称和特定于个人的角色名称重叠，则必须将两个角色表放在继承层次结构中。此处未显示。）*

当然，这仍然不尊重某些角色的基数。例如，只有一个人（每场演出）可以成为“指挥”。为了解决这个问题，您必须进一步扩展模型：

![在此处输入图像描述](../Images/575a37b5f53b06babfbce66e5c6bb054.png)

并且可能必须为这些团体做类似的事情。

`27`要通过这三种角色中的任何一种让所有参与给定表演的人（比如），您需要一个类似于以下的查询：

```
SELECT *
FROM Person
WHERE person_id IN (

    SELECT person_id
    FROM Group_Person JOIN Group_Performance_Role
        ON Group_Person.group_id = Group_Performance_Role.group_id
    WHERE performance_id = 27

    UNION

    SELECT person_id
    FROM Person_Performance_MultiRole
    WHERE performance_id = 27

    UNION

    SELECT person_id
    FROM Person_Performance_SingleRole
    WHERE performance_id = 27

) 
```

请注意，这最多只列出一次人员，即使他们参与了多个角色的表演（例如，同一个人可以是“指挥”，并且是在同一表演中扮演角色的组的成员）。

要获取他们的角色名称，您可以*：*

```
SELECT Person.*, group_role_name
FROM Person
    JOIN Group_Person
        ON Person.person_id = Group_Person.person_id
    JOIN Group_Performance_Role
        ON Group_Person.group_id = Group_Performance_Role.group_id
WHERE performance_id = 27

UNION ALL

SELECT Person.*, person_multirole_name
FROM Person
    JOIN Person_Performance_MultiRole
        ON Person.person_id = Person_Performance_MultiRole.person_id
WHERE performance_id = 27

UNION ALL

SELECT Person.*, person_singlerole_name
FROM Person
    JOIN Person_Performance_SingleRole
        ON Person.person_id = Person_Performance_SingleRole.person_id
WHERE performance_id = 27 
```

* * *

如您所见，我们不断使模型越来越精确，但也越来越复杂。而且我们甚至还没有进入歌曲和专辑，以及不断发展的团体成员（等等......）。我想你有责任决定“精确”和简单之间的正确平衡在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:15:53.460

您的最终目标是存储表演数据库，对吗？

因此，一场表演是由某类表演者进行的，由某类作曲家安排，由某类制作人制作等。我认为你需要一个抽象的实体来代表所有这些可能性。我现在能召唤的最好的名词是**Credit**，因为你会“为你的名字扩展学分”。（[莫里塞特 1995 年](http://en.wikipedia.org/wiki/Jagged_Little_Pill)）

所以，按照我的想象，你会有几个类别**Credit**，在第一层我想象这些是**Person**，**Group**是一组**Person**和**Organization**，类似于“Parlephone”或“Island Records”等.

这些**信用**类别可能有子类别，具体取决于您希望存储的属性。但是，我想每个**Performance**都会有许多**PerformanceCredit**关系，并且每个**PerformanceCredit关系都有一个****PerformanceCreditType**的外键。

* * *

**所有这一切都忽略了与Song**的任何关系，我认为这在逻辑上与**Performance**是分开的，**Song**会有自己的**SongCredit**关系，**SongCreditType** “Writer”是显而易见的关系。每**首乐曲**都与许多**Performance**相关

这一切都很好地扩展到了**Recording**（DVD、78、LP、MP3 等），这将是**Performance**的集合，但可以并且确实拥有自己的独立**Credit**。

* * *

我认为这是有道理的，因为我假设您将从学分中获得这些信息。

我认为您需要这种级别的灵活性。考虑一下，如果我想报道与[“保罗·麦卡特尼”](http://en.wikipedia.org/wiki/Paul_McCartney)有关的所有事情，他作为作家、作曲家、音乐家和制作人的直接作品，无论是独奏还是团体，都是巨大的。然后考虑他写的其他音乐家等创作的歌曲的表演。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T08:45:34.283

我认为你拥有它的方式可能是有道理的。我假设您要分别对组和组成员/人员进行建模，因为您要对组和组成员执行不同的操作/操作（如果不是，为什么要为组成员建模）。

如果是这种情况，那么我假设在 John Lennon 的情况下，您希望能够对他执行 Person 操作*和*Group 操作，因此让他作为 Group 和 Group Member 在数据库中出现两次是有道理的，因为这两个实体代表约翰列侬在您的领域中扮演的不同角色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T09:14:40.637

*   一张唱片有很多歌曲。
*   每首歌曲都有一个艺术家 - 有一个名字。
*   艺术家有一个或多个版本
*   一个 ArtistVersion 有一个或多个成员是表演者

例如

```
Records : 
   1 Give Peace a Chance
   2 Penny Lane

Artists
   3 The Beatles
   4 Plastic Ono Band

Songs 
   5 4 Give Peace a Chance
   6 3 Penny Lane
   7 3 Strawberry Fields Forever

RecordSongs
   1 - 5
   2 - 6
   2 - 7

ArtistVersions
   8 - The Beatles v1 
   9 - Plastic Ono Band v1

Performers
   10 - Ringo Starr
   11 - John Lennon
   12 - Yoko Ono

ArtistVersionMembers
   8 - 10 
   8 - 11
   9 - 11
   9 - 12 
```

# php - Compare value from $_GET[] and select an option

> ID：12508916
> 
> 赞同：-2
> 
> 时间：2012-09-20T08:36:20.347
> 
> 标签：php, select, conditional-statements, option

I need the solution on making an option "selected" on some conditions given by $_GET[]. The idea is.

```
<?
$sql_id="select * from stock order by id asc";
$result_id=mysql_db_query($dbname,$sql_id);
while($rec_id=mysql_fetch-array($result_id)){
  $_id=$rec_id['id'];
  $_title=$rec_id['title'];
if($_GET['id']==$_id){
  echo "<option value=\"$_id\" selected>$_title</option>";
}else{//I need this option selected where id='2'
  echo "<option value=\"$_id\">$_title</option>";
}
?> 
```

The question is : I also need the empty($_GET['id'])=2 as well. Then the conditions would be

1.  Select an option when $_GET['id']==$_id
2.  Select an option from mysql (where stock.id='2') when $_GET['id']==""

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:56:20.460

我现在知道...

```
<?
//let's test the $_GET['id'] value first
if(!$_GET['id']){
    $_id="2";//if no $_GET['id'] then $_id==2
}elseif(isset($_GET['id'])){
    $_id=$_GET['id'];
}

$sql_id="select * from stock order by id asc";
$result_id=mysql_db_query($dbname,$sql_id);
while($rec_id=mysql_fetch-array($result_id)){
  $_id=$rec_id['id'];
  $_title=$rec_id['title'];
if($_GET['id']==$_id){
  echo "<option value=\"$_id\" selected>$_title</option>";
}else{//I need this option selected where id='2'
  echo "<option value=\"$_id\">$_title</option>";
}
?> 
```

问题解决了！非常感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:43:06.563

不知道我是否理解正确，但你为什么不试试这样的：

```
if($_GET['id']==$_id){
  echo "<option value=\"$_id\" selected>$_title</option>";
}
else if (($_GET['id']=="") && ($_id==2)){//I need this option selected where id='2'
  echo "<option value=\"$_id\">$_title</option>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:47:54.303

```
<?php
    $query = "SELECT * from `".$dbname."`.`stock` ORDER BY `id` ASC";
    $result_id = mysql_query($query);
    $id = isset($_GET['id']) ? (int)$_GET['id'] : 0;
    while($rec_id = mysql_fetch_array($result_id)){
        $sel = '';
        if($rec_id['id'] == $id){
            $sel = " selected='selected'";
        }
        if(!$id && $rec_id['id'] == 2){
            $sel = " selected='selected'";
        }
        echo "<option value='".$rec_id['id']."'".$sel.">".$rec_id['title']."</option>";
    }
?> 
```

# objective-c - which objc library support redis 2.6, eval and script?

> ID：12508917
> 
> 赞同：1
> 
> 时间：2012-09-20T08:36:21.440
> 
> 标签：objective-c, redis, eval

which objc library can support redis 2.6's command,eval script?
the ObjCHiredis can't do these.

--------

COMPLETE
commandArgv method can solve this question.
for example:
commandArgv:[NSArray arrayWithObjects:@"eval","YOURSCRIPT",nil]
commandArgv:[NSArray arrayWithObjects:@"script",@"load", @"YOURSCRIPT",nil]

# java - Tomcat crashed with hs_error_pid*.log

> ID：12508919
> 
> 赞同：1
> 
> 时间：2012-09-20T08:36:39.890
> 
> 标签：java, tomcat6, jvm-crash

Our Tomcat 6.0.29 crashed this morning with the following error log. This is the first time that I've seen such a log since the start of the server last year.

Can somebody tell me the reason for that?

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000006da3f79e, pid=3140, tid=484
#
# JRE version: 6.0_23-b05
# Java VM: Java HotSpot(TM) 64-Bit Server VM (19.0-b09 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# V  [jvm.dll+0x24f79e]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x00000000046e2800):  JavaThread "http-443-Acceptor-0" daemon [_thread_in_vm, id=484, stack(0x000000000c5e0000,0x000000000c620000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x0000000000000000

Registers:
RAX=0x0000000000000000, RBX=0x00000000046e2800, RCX=0x0000000000000280, RDX=0x0000000000000000
RSP=0x000000000c61f790, RBP=0x000000000a0f05cd, RSI=0x0000000000000000, RDI=0x0000000000000000
R8=0x0000000000000032, R9=0x000000000a0f05cd, R10=0x0000000000000000, R11=0x00000000046e2800
R12=0x0000000000000032, R13=0x00000000bb8f2898, R14=0x000000000c61f930, R15=0x00000000046e2800
RIP=0x000000006da3f79e, EFLAGS=0x0000000000010202

Register to memory mapping:

RAX=0x0000000000000000
0x0000000000000000 is pointing to unknown location

RBX=0x00000000046e2800
"http-443-Acceptor-0" daemon prio=6 tid=0x00000000046e2800 nid=0x1e4 runnable [0x000000000c61f000]
   java.lang.Thread.State: RUNNABLE

RCX=0x0000000000000280
0x0000000000000280 is pointing to unknown location

RDX=0x0000000000000000
0x0000000000000000 is pointing to unknown location

RSP=0x000000000c61f790
0x000000000c61f790 is pointing into the stack for thread: 0x00000000046e2800
"http-443-Acceptor-0" daemon prio=6 tid=0x00000000046e2800 nid=0x1e4 runnable [0x000000000c61f000]
   java.lang.Thread.State: RUNNABLE

RBP=0x000000000a0f05cd
0x000000000a0f05cd is pointing to unknown location

RSI=0x0000000000000000
0x0000000000000000 is pointing to unknown location

RDI=0x0000000000000000
0x0000000000000000 is pointing to unknown location

R8 =0x0000000000000032
0x0000000000000032 is pointing to unknown location

R9 =0x000000000a0f05cd
0x000000000a0f05cd is pointing to unknown location

R10=0x0000000000000000
0x0000000000000000 is pointing to unknown location

R11=0x00000000046e2800
"http-443-Acceptor-0" daemon prio=6 tid=0x00000000046e2800 nid=0x1e4 runnable [0x000000000c61f000]
   java.lang.Thread.State: RUNNABLE

R12=0x0000000000000032
0x0000000000000032 is pointing to unknown location

R13=0x00000000bb8f2898
{constMethod} 
 - klass: {other class}
 - method:       0x00000000bb8f28e0 {method} 'initIDs' '()V' in 'sun/nio/ch/ServerSocketChannelImpl'
 - exceptions:   0x00000000bae01ef8

R14=0x000000000c61f930
0x000000000c61f930 is pointing into the stack for thread: 0x00000000046e2800
"http-443-Acceptor-0" daemon prio=6 tid=0x00000000046e2800 nid=0x1e4 runnable [0x000000000c61f000]
   java.lang.Thread.State: RUNNABLE

R15=0x00000000046e2800
"http-443-Acceptor-0" daemon prio=6 tid=0x00000000046e2800 nid=0x1e4 runnable [0x000000000c61f000]
   java.lang.Thread.State: RUNNABLE

Top of Stack: (sp=0x000000000c61f790)
0x000000000c61f790:   00000000046e2800 0000000000000fc4
0x000000000c61f7a0:   00000000046e2800 000000000c61f920
0x000000000c61f7b0:   000000000c61f838 000000000c61f8b0
0x000000000c61f7c0:   0000000000000000 000000000c61f920
0x000000000c61f7d0:   00000000046e29c8 000000000c61f830
0x000000000c61f7e0:   0000000000000000 000000006d623215
0x000000000c61f7f0:   000000006de46520 000000000c61f918
0x000000000c61f800:   00000000046e29c8 0000000000000000
0x000000000c61f810:   00000000bb7569c0 00000000bd68b5c8
0x000000000c61f820:   0000000000000010 cd050f0af2f10002
0x000000000c61f830:   0000000000000000 00003cd1f5cd56fb
0x000000000c61f840:   0000000001c45440 00000000eb7d78a0
0x000000000c61f850:   00000000c09bab80 000000000c61f8f8
0x000000000c61f860:   00000000bb8f28a0 00000000011d12a0
0x000000000c61f870:   00000000c09bab40 00000000bcb0d840
0x000000000c61f880:   0000000000000001 00000000011c5b22 

Instructions: (pc=0x000000006da3f79e)
0x000000006da3f78e:   83 38 02 00 00 06 00 00 00 80 3d 2a ca 41 00 00
0x000000006da3f79e:   48 8b 16 74 17 44 8b 4a 08 0f b6 0d 0a b0 40 00 

Stack: [0x000000000c5e0000,0x000000000c620000],  sp=0x000000000c61f790,  free space=253k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [jvm.dll+0x24f79e]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  sun.nio.ch.ServerSocketChannelImpl.accept0(Ljava/io/FileDescriptor;Ljava/io/FileDescriptor;[Ljava/net/InetSocketAddress;)I+0
J  org.apache.tomcat.util.net.NioEndpoint$Acceptor.run()V
j  java.lang.Thread.run()V+11
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x0000000005528000 JavaThread "http-443-exec-65" daemon [_thread_blocked, id=3168, stack(0x000000000c830000,0x000000000c870000)]
  0x0000000005529800 JavaThread "http-443-exec-64" daemon [_thread_blocked, id=3192, stack(0x000000000c770000,0x000000000c7b0000)]
  0x000000000552b000 JavaThread "http-443-exec-59" daemon [_thread_blocked, id=3592, stack(0x000000000d000000,0x000000000d040000)]
  0x0000000007f12800 JavaThread "http-80-9" daemon [_thread_blocked, id=3952, stack(0x000000000cd80000,0x000000000cdc0000)]
  0x000000000a28b000 JavaThread "http-443-exec-41" daemon [_thread_blocked, id=3844, stack(0x000000000c7f0000,0x000000000c830000)]
  0x0000000007f1b000 JavaThread "http-443-exec-40" daemon [_thread_blocked, id=3452, stack(0x000000000c7b0000,0x000000000c7f0000)]
  0x000000000a287000 JavaThread "http-80-8" daemon [_thread_blocked, id=3536, stack(0x000000000d500000,0x000000000d540000)]
  0x000000000a286800 JavaThread "http-80-7" daemon [_thread_blocked, id=4064, stack(0x000000000d4c0000,0x000000000d500000)]
  0x000000000a285800 JavaThread "http-80-6" daemon [_thread_blocked, id=3884, stack(0x000000000d480000,0x000000000d4c0000)]
  0x000000000a285000 JavaThread "http-80-5" daemon [_thread_blocked, id=2008, stack(0x000000000d440000,0x000000000d480000)]
  0x000000000a284800 JavaThread "http-80-4" daemon [_thread_blocked, id=3576, stack(0x000000000d400000,0x000000000d440000)]
  0x0000000007f14800 JavaThread "http-80-3" daemon [_thread_blocked, id=1472, stack(0x000000000d3c0000,0x000000000d400000)]
  0x0000000007f14000 JavaThread "http-80-2" daemon [_thread_blocked, id=2784, stack(0x000000000d380000,0x000000000d3c0000)]
  0x0000000007f19800 JavaThread "http-80-1" daemon [_thread_blocked, id=3472, stack(0x000000000d340000,0x000000000d380000)]
  0x00000000046e6000 JavaThread "TP-Monitor" daemon [_thread_blocked, id=2396, stack(0x000000000c720000,0x000000000c760000)]
  0x00000000046e5000 JavaThread "TP-Processor4" daemon [_thread_in_native, id=3620, stack(0x000000000c6e0000,0x000000000c720000)]
  0x00000000046e4800 JavaThread "TP-Processor3" daemon [_thread_blocked, id=3828, stack(0x000000000c6a0000,0x000000000c6e0000)]
  0x00000000046e4000 JavaThread "TP-Processor2" daemon [_thread_blocked, id=2300, stack(0x000000000c660000,0x000000000c6a0000)]
  0x00000000046e3000 JavaThread "TP-Processor1" daemon [_thread_blocked, id=2720, stack(0x000000000c620000,0x000000000c660000)]
=>0x00000000046e2800 JavaThread "http-443-Acceptor-0" daemon [_thread_in_vm, id=484, stack(0x000000000c5e0000,0x000000000c620000)]
  0x00000000046e1800 JavaThread "http-443-ClientPoller-1" daemon [_thread_blocked, id=2452, stack(0x000000000c5a0000,0x000000000c5e0000)]
  0x00000000046e1000 JavaThread "http-443-ClientPoller-0" daemon [_thread_blocked, id=3096, stack(0x000000000c560000,0x000000000c5a0000)]
  0x00000000046e0000 JavaThread "http-80-Acceptor-0" daemon [_thread_in_native, id=3720, stack(0x000000000c520000,0x000000000c560000)]
  0x0000000007f2c800 JavaThread "ContainerBackgroundProcessor[StandardEngine[Catalina]]" daemon [_thread_blocked, id=1624, stack(0x000000000c4e0000,0x000000000c520000)]
  0x0000000007f2a800 JavaThread "scheduler_QuartzSchedulerThread" [_thread_blocked, id=3084, stack(0x000000000cc80000,0x000000000ccc0000)]
  0x0000000007f29800 JavaThread "scheduler_Worker-10" [_thread_blocked, id=2080, stack(0x000000000cc40000,0x000000000cc80000)]
  0x0000000007f29000 JavaThread "scheduler_Worker-9" [_thread_blocked, id=2240, stack(0x000000000cc00000,0x000000000cc40000)]
  0x0000000007f28000 JavaThread "scheduler_Worker-8" [_thread_blocked, id=1376, stack(0x000000000cbc0000,0x000000000cc00000)]
  0x0000000007f27800 JavaThread "scheduler_Worker-7" [_thread_blocked, id=3436, stack(0x000000000cb80000,0x000000000cbc0000)]
  0x0000000007f26800 JavaThread "scheduler_Worker-6" [_thread_blocked, id=3804, stack(0x000000000cb40000,0x000000000cb80000)]
  0x0000000007f26000 JavaThread "scheduler_Worker-5" [_thread_blocked, id=3324, stack(0x000000000cb00000,0x000000000cb40000)]
  0x0000000007f25800 JavaThread "scheduler_Worker-4" [_thread_blocked, id=3664, stack(0x000000000cac0000,0x000000000cb00000)]
  0x0000000005311800 JavaThread "scheduler_Worker-3" [_thread_blocked, id=2096, stack(0x000000000ca80000,0x000000000cac0000)]
  0x000000000615a800 JavaThread "scheduler_Worker-2" [_thread_blocked, id=3808, stack(0x000000000ca40000,0x000000000ca80000)]
  0x0000000008568800 JavaThread "scheduler_Worker-1" [_thread_blocked, id=2724, stack(0x000000000ca00000,0x000000000ca40000)]
  0x000000000499a800 JavaThread "NioBlockingSelector.BlockPoller-1" daemon [_thread_blocked, id=3852, stack(0x00000000064a0000,0x00000000064e0000)]
  0x0000000004912800 JavaThread "GC Daemon" daemon [_thread_blocked, id=856, stack(0x0000000006460000,0x00000000064a0000)]
  0x0000000004605800 JavaThread "Thread-2" [_thread_in_native, id=3872, stack(0x0000000004c00000,0x0000000004c40000)]
  0x0000000004658800 JavaThread "RMI TCP Accept-0" daemon [_thread_in_native, id=2212, stack(0x0000000004b80000,0x0000000004bc0000)]
  0x0000000000f27800 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=2964, stack(0x00000000045a0000,0x00000000045e0000)]
  0x0000000000f23800 JavaThread "CompilerThread1" daemon [_thread_blocked, id=1928, stack(0x0000000004560000,0x00000000045a0000)]
  0x0000000000f1b000 JavaThread "CompilerThread0" daemon [_thread_blocked, id=2120, stack(0x0000000004520000,0x0000000004560000)]
  0x0000000000f19800 JavaThread "Attach Listener" daemon [_thread_blocked, id=4056, stack(0x00000000044e0000,0x0000000004520000)]
  0x0000000000f19000 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=1464, stack(0x00000000044a0000,0x00000000044e0000)]
  0x0000000000eb2000 JavaThread "Finalizer" daemon [_thread_blocked, id=4076, stack(0x0000000004460000,0x00000000044a0000)]
  0x0000000000eb1800 JavaThread "Reference Handler" daemon [_thread_blocked, id=3132, stack(0x0000000004420000,0x0000000004460000)]
  0x00000000006d2800 JavaThread "main" [_thread_in_native, id=2944, stack(0x00000000007d0000,0x0000000000810000)]

Other Threads:
  0x0000000000eaf000 VMThread [stack: 0x00000000043e0000,0x0000000004420000] [id=392]
  0x0000000000f72800 WatcherThread [stack: 0x0000000004bc0000,0x0000000004c00000] [id=2872]

VM state:synchronizing (normal execution)

VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])
[0x00000000006d14c0] Threads_lock - owner thread: 0x0000000000eaf000
[0x00000000006d19c0] Heap_lock - owner thread: 0x0000000007f2c800

Heap
 PSYoungGen      total 138496K, used 23348K [0x00000000eaab0000, 0x00000000fa570000, 0x0000000100000000)
  eden space 22016K, 100% used [0x00000000eaab0000,0x00000000ec030000,0x00000000ec030000)
  from space 116480K, 1% used [0x00000000ec030000,0x00000000ec17d300,0x00000000f31f0000)
  to   space 116480K, 0% used [0x00000000f33b0000,0x00000000f33b0000,0x00000000fa570000)
 PSOldGen        total 699072K, used 699071K [0x00000000c0000000, 0x00000000eaab0000, 0x00000000eaab0000)
  object space 699072K, 99% used [0x00000000c0000000,0x00000000eaaaffe8,0x00000000eaab0000)
 PSPermGen       total 69952K, used 69633K [0x00000000bae00000, 0x00000000bf250000, 0x00000000c0000000)
  object space 69952K, 99% used [0x00000000bae00000,0x00000000bf200608,0x00000000bf250000)

Dynamic libraries:
0x0000000000400000 - 0x0000000000416000     C:\Program Files\Tomcat 6.0\bin\tomcat6.exe
0x0000000077ec0000 - 0x0000000077ffc000     C:\WINDOWS\system32\ntdll.dll
0x0000000077d40000 - 0x0000000077eb3000     C:\WINDOWS\system32\kernel32.dll
0x0000000077c20000 - 0x0000000077d2c000     C:\WINDOWS\system32\USER32.dll
0x000007ff7fc90000 - 0x000007ff7fd2c000     C:\WINDOWS\system32\GDI32.dll
0x000007ff7fee0000 - 0x000007ff7ffe6000     C:\WINDOWS\system32\ADVAPI32.dll
0x000007ff7fd30000 - 0x000007ff7fed0000     C:\WINDOWS\system32\RPCRT4.dll
0x000007ff7e9c0000 - 0x000007ff7e9e2000     C:\WINDOWS\system32\Secur32.dll
0x000007ff7fc00000 - 0x000007ff7fc86000     C:\WINDOWS\system32\msvcrt.dll
0x000007ff7f190000 - 0x000007ff7fb9c000     C:\WINDOWS\system32\SHELL32.dll
0x000007ff7ef60000 - 0x000007ff7effb000     C:\WINDOWS\system32\SHLWAPI.dll
0x000007ff7d500000 - 0x000007ff7d539000     C:\WINDOWS\system32\IMM32.DLL
0x000007ff7f000000 - 0x000007ff7f187000     C:\WINDOWS\WinSxS\amd64_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.3790.4770_x-ww_3807D667\comctl32.dll
0x000000006d7f0000 - 0x000000006dee0000     C:\Program Files\Java\jre6\bin\server\jvm.dll
0x000007ff7e240000 - 0x000007ff7e290000     C:\WINDOWS\system32\WINMM.dll
0x000007ff77100000 - 0x000007ff7710b000     C:\WINDOWS\system32\rdpsnd.dll
0x000007ff7d4d0000 - 0x000007ff7d4ea000     C:\WINDOWS\system32\WINSTA.dll
0x000007ff77370000 - 0x000007ff77409000     C:\WINDOWS\system32\NETAPI32.dll
0x000007ff7e380000 - 0x000007ff7e390000     C:\WINDOWS\system32\PSAPI.DLL
0x000000006d760000 - 0x000000006d76e000     C:\Program Files\Java\jre6\bin\verify.dll
0x000000006d3b0000 - 0x000000006d3d7000     C:\Program Files\Java\jre6\bin\java.dll
0x000000006d310000 - 0x000000006d31a000     C:\Program Files\Java\jre6\bin\hpi.dll
0x000000006d7b0000 - 0x000000006d7c2000     C:\Program Files\Java\jre6\bin\zip.dll
0x000000006d600000 - 0x000000006d617000     C:\Program Files\Java\jre6\bin\net.dll
0x000007ff77310000 - 0x000007ff77340000     C:\WINDOWS\system32\WS2_32.dll
0x000007ff77140000 - 0x000007ff7714c000     C:\WINDOWS\system32\WS2HELP.dll
0x000007ff771b0000 - 0x000007ff7722d000     C:\WINDOWS\System32\mswsock.dll
0x000007ff7e8f0000 - 0x000007ff7e93f000     C:\WINDOWS\system32\DNSAPI.dll
0x000007ff7e9f0000 - 0x000007ff7e9fb000     C:\WINDOWS\System32\winrnr.dll
0x000007ff7e950000 - 0x000007ff7e9b6000     C:\WINDOWS\system32\WLDAP32.dll
0x000007ff7ea00000 - 0x000007ff7ea07000     C:\WINDOWS\system32\rasadhlp.dll
0x000000006d540000 - 0x000000006d54a000     C:\Program Files\Java\jre6\bin\management.dll
0x0000000068000000 - 0x000000006804c000     C:\WINDOWS\system32\rsaenh.dll
0x000007ff6d200000 - 0x000007ff6d293000     C:\WINDOWS\system32\hnetcfg.dll
0x000007ff77170000 - 0x000007ff7717b000     C:\WINDOWS\System32\wshtcpip.dll
0x000000006d620000 - 0x000000006d62b000     C:\Program Files\Java\jre6\bin\nio.dll

VM Arguments:
jvm_args: -Dcatalina.home=C:\Program Files\Tomcat 6.0 -Dcatalina.base=C:\Program Files\Tomcat 6.0 -Djava.endorsed.dirs=C:\Program Files\Tomcat 6.0\endorsed -Djava.io.tmpdir=C:\Program Files\Tomcat 6.0\temp -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=C:\Program Files\Tomcat 6.0\conf\logging.properties -Dcom.sun.management.jmxremote -Duser.language=en -Duser.country=US vfprintf -Xms128m -Xmx1024m 
java_command: <unknown>
Launcher Type: generic

Environment Variables:
JAVA_HOME=C:\Program Files\Java\jdk1.6.0_23
PATH=C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\system32\WindowsPowerShell\v1.0;C:\Program Files (x86)\The Open Group\WMI Mapper\bin;C:\Program Files\Java\jdk1.6.0_23\bin
OS=Windows_NT
PROCESSOR_IDENTIFIER=AMD64 Family 16 Model 8 Stepping 0, AuthenticAMD

---------------  S Y S T E M  ---------------

OS: Windows Server 2003 family Build 3790 Service Pack 2

CPU:total 2 (1 cores per cpu, 1 threads per core) family 16 model 8 stepping 0, cmov, cx8, fxsr, mmx, sse, sse2, sse3, popcnt, mmxext, 3dnow, 3dnowext, lzcnt, sse4a

Memory: 4k page, physical 2096476k(60588k free), swap 3537116k(1516660k free)

vm_info: Java HotSpot(TM) 64-Bit Server VM (19.0-b09) for windows-amd64 JRE (1.6.0_23-b05), built on Nov 13 2010 02:43:42 by "java_re" with MS VC++ 8.0 (VS2005)

time: Thu Sep 20 07:17:51 2012
elapsed time: 137846 seconds 
```

# c# - How to know you got no result from the database

> ID：12508920
> 
> 赞同：0
> 
> 时间：2012-09-20T08:36:39.260
> 
> 标签：c#, mysql

> **Possible Duplicate:**
> [How to test if a DataSet is empty?](https://stackoverflow.com/questions/2976473/how-to-test-if-a-dataset-is-empty)

I'm executing these lines

```
string commToExc = @"SELECT * FROM Test WHERE id = 500;";
MySqlCommand cmdSQL = new MySqlCommand(commToExc, conMYSQL);
MySqlDataAdapter zipcode = new MySqlDataAdapter(cmdSQL);
DataSet setTest = new DataSet("Test"); 
```

I'm taking data by their rows id. everthing works fine, i get the results i want but i have question. For example in db `id` = [1-500]. But i request row with id = 501 and i get 0 results back. Whats is the way to know when I got 0 results? Thnx

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T08:38:49.903

```
if (setTest.Tables[0].Rows.Count == 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:41:10.387

我想在某些时候你会填写 DS 如下所示：

```
zipcode.Fill(setTest ); 
```

然后，您可以使用DT 上`Count`的集合属性简单地检查如何返回行`Rows`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:47:48.837

必须填写 DataSet，否则 DataSet 为空

# vba - How do i query an inline excel table with vba?

> ID：12508922
> 
> 赞同：1
> 
> 时间：2012-09-20T08:36:47.283
> 
> 标签：vba, excel, excel-2010

I'm clearly lacking some knowledge on excel queries.. I need to print out some custom labels with the ordered articles of each worker.

In my example, i have 2 tables:

```
 [tabWorkers]
      ID        Name
      1         John
      2         Patrick

      [tabOrders]
      ID        Article   Amount
      1         Shoe      2
      1         T-Shirt   5
      2         T-Shirt   3 
```

I'm looping through tabWorker and for each working i would like to query my tabOrders table: SELECT * FROM tabOrders WHERE ID=1

Syntax example of what i want:

```
 Dim row As Range 
    For Each row In [tabWorkers].Rows 
      myID = row.Columns(row.ListObject.ListColumns("ID").Index).Value

      Write( row.Columns(row.ListObject.ListColumns("Name").Index).Value & " has ordered...<p>" )

      For Each (Article, Amount) In "SELECT * FROM tabOrders WHERE ID ='" & myID & "'")
        Write( Amount & " x " & Article & "<br>" )
      Next

    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:07:47.173

我之前在大型数据集上使用过[这个](http://chandoo.org/wp/2012/04/02/using-excel-as-your-database/)解决方案，只要选项卡上的数据定义明确，它就可以很好地工作

基本上设置对 ADO 的引用，然后定义到工作表的连接，记住每个工作表名称末尾的 $ :)

```
Dim cn as ADODB.Connection
Dim rs as ADODB.Recordset
Dim strSQL as String

Set cn = New ADODB.Connection
cn.ConnectionString = "Driver={Microsoft Excel Driver (*.xls, *.xlsx, *.xlsm, *.xlsb)};DBQ=" & ActiveWorkbook.Path & Application.PathSeparator & ActiveWorkbook.Name

cn.Open

strSQL = "Select Distinct [Name] From [tabWorkers$] Order by [Name]"

Set rs = New ADODB.Recordset
rs.Open cn, strSQL, adOpenStatic, adLockReadOnly

'// then use the recordset
for each .......

rs.Close 
```

# bash - Find and remove DOS line endings on Ubuntu

> ID：12508923
> 
> 赞同：11
> 
> 时间：2012-09-20T08:36:55.660
> 
> 标签：bash, unix, sed, awk, grep

I have found that many of my files have DOS line endings. In VI they look like this: "^M". I don't want to modify files that don't have these DOS line endings. How do I do this using a bash script? Thanks!

EV

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-20T21:40:58.353

```
grep -URl ^M . | xargs fromdos 
```

grep 为您获取当前目录下具有 DOS 行结尾的所有文件的列表。

`-U`让 grep 考虑行尾而不是默认剥离它们

`-R`使其递归

`-l`使它只列出文件名而不是匹配的行

然后你将该列表传递到转换器命令（它`fromdos`在 ubuntu 上，`dos2unix`我来自哪里）。

**注意：**实际上不要输入`^M`. 相反，您需要按`<Ctrl-V>`then`<Ctrl-M>`插入`^M`字符并让 grep 了解您要执行的操作。或者，您可以输入`$'\r'`代替`^M`（但我认为这可能仅适用于 bash ...）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T01:34:25.543

一种使用方式`GNU coreutils`：

```
< file.txt tr -d '\r' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T09:43:58.593

在 ubuntu 上，您使用该`fromdos`实用程序

```
fromdos test.txt 
```

> 上面的示例将采用 MS-DOS 或 Microsoft Windows 文件或具有不同行分隔符的其他文件，并使用新的行分隔符格式化文件以在 Linux 和 Unix 中读取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T08:43:07.193

有很多选择..您可以尝试其中任何一个.. [http://www.theunixschool.com/2011/03/different-ways-to-delete-m-character-in.html](http://www.theunixschool.com/2011/03/different-ways-to-delete-m-character-in.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-15T23:46:19.973

```
cat origin_file.txt | sed "s/^M//" > dest_file.txt 
```

你必须做上面提到的同样的事情，ctl-V 然后 ctl-M 来得到那个字符。这对我来说更可取，因为它可以跨许多平台移植，并且在 bash 中保持简单。

在 ubuntu 上，我也发现这很有效：

猫 origin_file.txt | sed "s/\r//" > dest_file.txt

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T09:04:24.947

请注意，如果您要转换多字节文件，则需要格外小心，并且可能应该尝试使用正确的 iconv 或重新编码 from-encoding 规范。

如果它是纯 ASCII 文件，则以下两种方法都可以。

该`flip`程序（在 Debian 中也称为包）`flip`可以处理行尾。从手册：

```
When asked to convert a file to the same format that  it already 
has, flip  causes  no change to the file. Thus to convert all
files to **IX format you can type

flip -u *

and all files will end up right, regardless of whether they were 
in MS-DOS or in **IX format to begin with. This also works in the
opposite direction. 
```

或者您可以使用 GNU 重新编码：

```
< /etc/passwd recode ..pc | tee a b > /dev/null
file a b 
```

输出：

```
a: ASCII text, with CRLF line terminators
b: ASCII text, with CRLF line terminators 
```

转换为 unix 行尾：

```
recode pc.. a b
file a b 
```

输出：

```
a: ASCII text
b: ASCII text 
```

recode 将dos line-endings 缩写为`pc`，所以逻辑`pc..`是：从pc 格式转换为默认的，即latin1 with unix line-endings。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T08:39:45.843

您可以使用以下命令：

```
 dos2ux file.in>file.out or: 
```

在 perl 中：

```
perl -pi -e 's/\r//g' your_file 
```

或者你可以这样做：

*   在 vi 中打开
*   进入命令模式
*   类型`:%s/[ctrl-V][CTRL-M]//g`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-05T17:28:54.413

如果您需要按文件结尾过滤，则修改获胜答案

```
grep -URl ^M . | grep .php | xargs dos2unix 
```

我用的是dos2unix而不是fromdos，但效果应该是一样的。

# java - 为什么我的邮件没有发送？

> ID：12508925
> 
> 赞同：0
> 
> 时间：2012-09-20T08:37:02.130
> 
> 标签：java, jakarta-mail

我正在用java构建一个电子邮件应用程序，到目前为止我尝试使用它，我在运行此代码时没有收到任何错误，但是我编译并运行代码后的问题是net beans IDE只是向我显示，程序正在运行，但是当我检查邮箱时，没有收到这样的邮件。谁能解释我为什么会这样？

我还在最后打印了一条“成功发送”消息，但不知何故该消息没有被打印，我无法弄清楚错误是什么，任何帮助将不胜感激，谢谢。

```
 public class Email 
    public static void main(String[] args) {
    // TODO code application logic here

    String[] to = {"pqr@gmail.com"};
    String from = "abc@gmail.com";
    String host = "smtp.gmail.com";
            String user_name = "abc@gmail.com";
            String password = "xyz";

    try{
    Properties properties = System.getProperties();
    properties.setProperty("smtp.gmail.com", "imaps");
            properties.put("smtp.starttls.enable", "true");
            properties.put("mail.smtp.host",host);
            properties.put("mail.smtp.user",user_name);
            properties.put("mail.smtp.password", password);
            properties.put("mail.smtp.port", "465");
            properties.put("mail.smtp.auth", "true");

            //properties.put
    Session session = Session.getDefaultInstance(properties,null);
            //Store store = session.getStore("imaps");

        MimeMessage message = new MimeMessage(session);
        // basically stores one or more addresses , whom the mail has to be       sent
        //InternetAddress[] send_to = { new InternetAddress(to) };
        //InternetAddress[] send_from = { new InternetAddress(from) };
                    InternetAddress[] toAddress = new InternetAddress[to.length];

                    for(int i = 0; i < to.length ;i++)
                    {
                        toAddress[i] = new InternetAddress(to[i]);
                    }

                    for(int i = 0 ; i < toAddress.length ; i++){
        message.addRecipient(Message.RecipientType.TO, toAddress[i]);
                    }

        message.setFrom(new InternetAddress(from));
        message.setSubject("Testing email");
        message.setText("this is a test");
                    Transport transport = session.getTransport("smtp");
                    transport.connect(host, user_name, password);
        transport.send(message);
                    transport.close();

                    System.out.println("Message successfully sent");

    }catch(Exception e){
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:44:12.223

试试这个代码

```
public class SendMail {

    String host, port, emailid,username, password;
    Properties props = System.getProperties();
    Session l_session = null;

    public SendMail() {
        host = "smtp.mail.yahoo.com";
        port = "587";
        emailid = "a@yahoo.com";
        username = "a";
        password = "pwd";

        emailSettings();
        createSession();
        sendMessage("a@yahoo.com", "rahul@gmail.com","Test","test Mail");
    }

    public void emailSettings() {
        props.put("mail.smtp.host", host);
        props.put("mail.smtp.auth", "true");
        props.put("mail.debug", "false");
        props.put("mail.smtp.port", port);
//        props.put("mail.smtp.socketFactory.port", port);
//        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
//        props.put("mail.smtp.socketFactory.fallback", "false");

    }

    public void createSession() {

        l_session = Session.getInstance(props,
                new javax.mail.Authenticator() {
                    protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication(username, password);
                    }
                });

        l_session.setDebug(true); // Enable the debug mode

    }

    public boolean sendMessage(String emailFromUser, String toEmail, String subject, String msg) {
        //System.out.println("Inside sendMessage 2 :: >> ");
        try {
            //System.out.println("Sending Message *********************************** ");
            MimeMessage message = new MimeMessage(l_session);
            emailid = emailFromUser;
            //System.out.println("mail id in property ============= >>>>>>>>>>>>>> " + emailid);
            //message.setFrom(new InternetAddress(emailid));
            message.setFrom(new InternetAddress(this.emailid));

            message.addRecipient(Message.RecipientType.TO, new InternetAddress(toEmail));
            message.addRecipient(Message.RecipientType.BCC, new InternetAddress(AppConstants.fromEmail));
            message.setSubject(subject);
            message.setContent(msg, "text/html");

            //message.setText(msg);
            Transport.send(message);
            System.out.println("Message Sent");
        } catch (MessagingException mex) {
            mex.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }//end catch block
        return true;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:51:30.913

如果您在代理/防火墙后面运行您可能必须设置代理

```
System.setProperty("http.proxyHost", "myProxyServer.com");
System.setProperty("http.proxyPort", "80"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:11:59.533

谢谢大家，看来我错过了

props.put("mail.smtp.socketFactory.port", "587");

部分，添加了这个并且它工作正常。

# php - 如何在 PHP 中获取数组元素（成员）的确切数量？

> ID：12508932
> 
> 赞同：1
> 
> 时间：2012-09-20T08:37:25.190
> 
> 标签：php, arrays

假设我有一个这样的数组：

```
array('a string', 23, array(array('key'=>'value'), 67, 'another string'), 'something else') 
```

我想知道我的数组有**多少个值，****不包括**作为主数组成员的数组。如何？（预期结果为**6**）

Foreach 循环不适合，因为问题本身 -**数组的未知深度**。

有谁知道如何实现这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T08:40:29.757

您可以使用[array_walk_recursive](http://www.php.net/manual/en/function.array-walk-recursive.php)。

```
$count = 0; 
array_walk_recursive($arr, function($var) use (&$count) { 
  $count++; 
}); 
echo $count; 
```

***[工作演示。](http://codepad.viper-7.com/rTAyvm)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:48:05.077

以下函数返回给定数组中所有**非数组**值的数量——不管它是否是多维的。

```
function countNonArrayValues(array $array)
{
    $count = 0;
    foreach ($array as $element) {
        $count += is_array($element) ? countNonArrayValues($element) : 1;
    }
    return $count;
} 
```

# python - 将 knnMatch 与 OpenCV+Python 一起使用时出错

> ID：12508934
> 
> 赞同：10
> 
> 时间：2012-09-20T08:37:31.830
> 
> 标签：python, opencv, runtime-error

我想用 Python+OpenCV 匹配两张图片。我已经使用 SURF 从它们中提取关键点和描述符。现在，我需要匹配这些描述符，因此我决定使用 Flann Matcher。

```
flann_params = dict(algorithm = FLANN_INDEX_KDTREE,trees = 4)    
matcher = cv2.FlannBasedMatcher(flann_params, {}) 
```

但是当我尝试将 knnMatch 与描述符（desc1，desc2）一起使用时，openCV 会引发异常。

```
raw_matches=matcher.knnMatch(np.asarray(desc1),np.asarray(desc2), 2) 
```

例外情况如下：

```
raw_matches=matcher.knnMatch(np.asarray(desc1),np.asarray(desc2), 2) #2
cv2.error: /opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_graphics_opencv/opencv/work/OpenCV-2.4.2/modules/flann/src/miniflann.cpp:299: error: (-210) type=6
 in function buildIndex_ 
```

如何正确使用 knnMatch？它是一个错误吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-23T16:54:29.553

我使用正确的数据类型和函数 np.asarray() 解决了这个问题

```
raw_matches=matcher.knnMatch(np.asarray(desc1,np.float32),np.asarray(desc2,np.float32), 2) #2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:45:37.150

[请参阅此问题](https://stackoverflow.com/questions/8301962/opencv-pythons-api-flannbasedmatcher)的答案。

这是来自[Esteban Angee](https://stackoverflow.com/users/1053925/esteban-angee)的回答的相关代码：

```
r_threshold = 0.6
FLANN_INDEX_KDTREE = 1  # bug: flann enums are missing 
```

构建你的参数字典：

```
flann_params = dict(algorithm = FLANN_INDEX_KDTREE, trees = 4)
flann = cv2.flann_Index(desc2, flann_params) 
```

执行最近邻搜索：

```
idx2, dist = flann.knnSearch(desc1, 2, params = {}) # bug: need to provide empty dict
mask = dist[:,0] / dist[:,1] < r_threshold
idx1 = np.arange(len(desc1))
pairs = np.int32( zip(idx1, idx2[:,0]) ) 
```

返回匹配的描述符：

```
return pairs[mask] 
```

我现在不在我的工作站，所以我担心我看不到你的代码有什么问题，但是当我遇到同样的问题时，上面的问题解决了我所有的麻烦。您不必使用`FlannBasedMatcher`，我记得我也遇到过问题。

如果它没有帮助，我会看看我明天左右是否能找到我的解决方案。

# javascript - 匹配单词中的字符序列

> ID：12508936
> 
> 赞同：0
> 
> 时间：2012-09-20T08:37:37.813
> 
> 标签：javascript, regex

我试图创建一个通用模型来查找单词中特定字符序列的出现，我能够找到特定输入的出现..但我想概括这个表达式..这里只计算“在”里面的话..我想概括正则表达式，以便它可以比较我提供的任何输入的出现，这可以在javascript中使用正则表达式来完成吗？

我将添加一个示例小提琴[http://jsfiddle.net/2BAFG/](http://jsfiddle.net/2BAFG/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:39:35.543

您可以从字符串创建正则表达式：

```
var regex = new RegExp( $('#yourinput').val(), "i"); 
```

[演示](http://jsfiddle.net/2BAFG/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:43:14.770

尝试这个

```
var matches = function(m) {
    var re = new RegExp(m, "i");
    return data.filter(function(item) { return re.test(item) });
};

document.write(matches('in')); 
```

小提琴示例：http: [//jsfiddle.net/2BAFG/8/](http://jsfiddle.net/2BAFG/8/)

现在要查找的子字符串作为函数的参数传递

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:43:58.310

`new RegExp()`当然，您可以使用并使用它从任意字符串构造正则表达式。

所以而不是：

```
var matches = data.filter(function(item) { return /in/i.test(item) }); 
```

您可以使用：

```
var re = new RegExp("in", "i");
var matches = data.filter(function(item) { return re.test(item) }); 
```

哪里`"in"`可以是您喜欢的任何正则表达式字符串，包括动态生成的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T08:45:00.143

我相信是的，是的。

在你的小提琴中，你有

```
var matches = data.filter(function(item) { return /in/i.test(item) }); 
```

尝试将其更改为

```
var inputToMatch = "in";
var patt=new RegExp(inputToMatch,"i");
var matches = data.filter(function(item) { return patt.test(item) }); 
```

# excel - 从所有书籍中获取数据到某个表

> ID：12508939
> 
> 赞同：0
> 
> 时间：2012-09-20T08:37:50.423
> 
> 标签：excel, excel-2003, vba

我是 EXCEL 的新手（尤其是 VBA）。我尝试编写以下逻辑：

转到所有打开的书籍，如果某本书有名为“Test”的工作表，它应该从命名范围“Table”中获取数据，然后将其附加到书籍 ALLDATABOOK 中工作表 ALLDATA 中的 Table1。我试着写这个，有人可以帮助我吗？

这是我的代码：

```
Private Sub CommandButton1_Click()
   Dim book As Object
    Dim lst As ListObject
   Dim iList As Worksheet
   For Each book In Workbooks

   For Each iList In book.Sheets
        If iList.Name = "Test" Then

        book.Sheets(iList.Name).Activate
Range("Table").Select

        End If
    Next

   Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:59:27.607

试试这个（为 Excel 2007+ 编写，可能不适用于早期版本）

```
Private Sub CommandButton1_Click()
    Dim book As Workbook
    Dim lst As ListObject
    Dim iList As Worksheet
    Dim Rng As Range

    Dim wbAllDataBook As Workbook
    Dim shAllData As Worksheet

    ' Get reference to ALLDATA table
    Set wbAllDataBook = Workbooks("ALLDATABOOK.xlsm")  '<-- change to suit your file extension
    Set shAllData = wbAllDataBook.Worksheets("ALLDATA")
    Set lst = shAllData.ListObjects("Table1")

    For Each book In Workbooks
        ' Use error handler to avoid looping through all worksheets
        On Error Resume Next
        Set iList = book.Worksheets("Test")
        If Err.Number <> 0 Then
            ' sheet not present in book
            Err.Clear
            On Error GoTo 0
        Else
            ' If no error, iList references sheet "Test"
            On Error GoTo 0
            ' Get Reference to named range
            Set Rng = iList.[Table]
            ' Add data to row below existing data in table.  Table will auto extend
            If lst.DataBodyRange Is Nothing Then
                ' Table is empty
                lst.InsertRowRange.Resize(Rng.Rows.Count).Value = Rng.Value
            Else
                With lst.DataBodyRange
                    .Rows(.Rows.Count).Offset(1, 0).Resize(Rng.Rows.Count).Value = Rng.Value
                End With
            End If
        End If
    Next
End Sub 
```

* * *

**更新：**

要与 Excel 2003 一起使用，请替换

```
If lst.DataBodyRange Is Nothing Then 
```

和

```
If Not lst.InsertRowRange Is Nothing Then 
```

# c# - Ajax jQuery 出现错误：[对象错误]

> ID：12508946
> 
> 赞同：0
> 
> 时间：2012-09-20T08:38:21.970
> 
> 标签：c#, javascript, jquery, ajax

嗨，我尝试向我的 Web 服务发送参数以获取数据。但我总是得到一个错误：[对象错误]

[错误快照](http://i47.tinypic.com/2z55fte.png)

那个错误是什么意思？

到目前为止，Web 服务正在运行。如果我在浏览器中调用 Web 方法，我会得到所有数据。

我做错了什么。我尝试了很多东西，但没有任何帮助..希望你能帮助我

我的查询：

```
 function loadDate() {

        jQuery.support.cors = true;
        PanelID = document.getElementById('PanelID').value;
        alert(PanelID);

        jQuery.ajax({
            type: "POST",
            url: "http://nexxt-entwicklung.de/Web/Service1.asmx/getDatetime",
            data: "{ 'PanelID': '" + PanelID + "' }",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(msg) {
                alert("Success: " + msg.d);

            },
            error: function(msg) {
                alert("Failed: " + msg.status + ": " + msg.statusText);

            }
        });   
    } 
```

我的网络服务：

```
 [ScriptService]
public class Helper
{
    public class VERANSTALTUNGEN
    {
    public string Von { get; set; }
    public string Bis { get; set; }
    public string Thema { get; set; }
    public string PanelIDs { get; set; }
    }

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public static List<VERANSTALTUNGEN> getDatetime(string PanelID)
        {

            List<VERANSTALTUNGEN> Besprechungen = new List<VERANSTALTUNGEN>();

            StringBuilder query = new StringBuilder("SELECT DISTINCT r.PanelID AS PANEL_ID, rr.Von AS DATEVON, rr.Bis AS DATEBIS, b.THEMA AS BESPRECHUNGSTHEMA FROM RAUM r right join RESERVIERUNGRAUM rr ON r.ID = rr.Raum_ID right join BUCHUNG b ON rr.BUCHUNG_ID = b.ID where r.PANELID = @ID ORDER BY rr.VON");

            using (SqlConnection con = new SqlConnection(@"Data Source=Localhost\SQLEXPRESS;Initial Catalog=BOOK-IT_LH;Integrated Security=true;"))
            using (SqlCommand cmd = new SqlCommand(query.ToString(), con))
            {
                cmd.Parameters.Add("@ID", System.Data.SqlDbType.Char);
                cmd.Parameters["@ID"].Value = PanelID;
                con.Open();

                using (SqlDataReader rdr = cmd.ExecuteReader())
                {
                    while (rdr.Read())
                    {
                        if (rdr["DATEVON"] != DBNull.Value && rdr["DATEBIS"] != DBNull.Value)
                        {
                            Besprechungen.Add(new VERANSTALTUNGEN()
                            {
                                Von = rdr["DATEVON"].ToString(),
                                Bis = rdr["DATEBIS"].ToString(),
                                Thema = rdr["BESPRECHUNGSTHEMA"].ToString(),
                                PanelIDs = rdr["PANEL_ID"].ToString()
                            });
                        }
                    }
                }
            }
            return Besprechungen;
     }
} 
```

网络服务方法

```
[System.Web.Script.Services.ScriptService]
    public class Service1 : System.Web.Services.WebService
    {
        [WebMethod]
        public List<Helper.VERANSTALTUNGEN> getDatetime(string PanelID)
        {
            return Helper.getDatetime(PanelID);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:43:46.590

这意味着这`msg.statusText`是一个对象，它是 的一个实例`Error`。

使用`console.log`而不是`alert`在 Chrome/Firebug 的控制台中查看对象包含的内容，或循环访问对象并提醒每个键/值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:46:16.543

当谈到问题本身时，在使用dataType json时：

你不应该这样做：

```
data: "{ 'PanelID': '" + PanelID + "' }", 
```

而是类似的东西

```
data: { 'PanelID': PanelID }, 
```

否则，您将发送字符串而不是发布某些对象

请务必确保您阅读了规范：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - java虚拟机在执行多个java应用程序时会做什么

> ID：12508951
> 
> 赞同：8
> 
> 时间：2012-09-20T08:38:35.053
> 
> 标签：java, jvm

通过阅读[本文](http://www.artima.com/insidejvm/ed2/jvm.html)，我知道每个 Java 应用程序都将运行在特定的 Java 虚拟机实例中。所以如果我执行以下命令("Java -jar test1.jar","Java -jar test2.jar"，我会得到系统中的两个进程。并且如果每个命令都使用默认的堆大小，例如256M。总的内存开销是512M，对吗？还有其他问题：

*   Java虚拟机是守护进程，随系统一起启动吗？
*   当我执行“java -jar test1.jar”时，它会创建一个Java虚拟机实例，然后执行main函数。这是否意味着每个正在运行的 Java 应用程序都是 Java 虚拟机的子线程或进程？
*   是否每个正在运行的 java 应用程序都是独立的，其他应用程序无法从这个正在运行的 java 应用程序中获取变量、方法、常量等？
*   如果一个正在运行的 java 应用程序崩溃，是否会影响其他正在运行的 java 应用程序？

PS：我google了一下，得到了很多不同的答案，我完全糊涂了。任何可以帮助我解决此类问题甚至更深入的Java虚拟机的人。例如，它是如何工作的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T08:45:47.893

JVM 是一个标准进程，就像任何其他进程一样。因此，两者之间没有隐含的通信或状态共享。每个都有自己的堆、线程等。如果你杀死一个，它不会影响另一个。

*将*共享的是JVM 本身的代码页。内核足够智能，可以识别运行两次的相同二进制文件（*任何*二进制文件，而不仅仅是 JVM）并重用映像。这仅适用于实际的二进制代码 - 而不是它的状态。请参阅[此处](https://stackoverflow.com/questions/10098489/sharing-executable-memory-pages-in-linux)了解更多信息。Linux。

JVM 不是守护进程，但可以在系统启动时作为 Windows 服务或 Unix/Linux 进程（通过`/etc/init.d`脚本）启动。这就是您（比如说）在机器启动时运行用 Java 编写的 Web 服务的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T08:40:40.143

1) 不，但是有一种方法可以将 java 应用程序作为带有包装器的服务启动（谷歌表示“Java 服务”）。

2) 是的。

3）您可以使用进程之间的通信（vg HTTP）。但是由于所有进程都在 JVM 中运行，因此没有捷径可走。

4) 没有

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:18:34.517

`For the OS, JVM like an user application. Each JVM Instance is individual.`

1.  不。JVM和其他进程一样是正常进程。但是你可以将它作为守护进程运行。
2.  是的。Java 应用程序在 JVM 上运行，就像您在操作系统上的应用程序一样。
3.  是的。每个 JVM 线程都是独立的，但它们可以通过网络与其他 JVM 通信，RMI ...
4.  这取决于。通常它们是单独的，但如果 JVM 崩溃`cause the OS crash`，其他 JVM 将受到影响。

# jquery - 通过 url 检索元内容

> ID：12508953
> 
> 赞同：0
> 
> 时间：2012-09-20T08:38:38.890
> 
> 标签：jquery, ajax, web-scraping

我有一个脚本，它允许检索给定 url 的各种信息：[JsFiddle](http://jsfiddle.net/m4QCt/141/)

如您所见，元内容源自“baseUrl”（在脚本的开头）。该页面 (baseUrl) 上的所有 a href 也有一个 div (#links)。我的问题：如何获取链接的元内容而不是 baseUrl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:42:37.223

您的脚本正在做的是加载主页并解析数据。为了获得链接网址上的元标记，您基本上需要使用链接网址再次运行脚本，而不仅仅是您的`baseUrl`. 如果你无限期地循环这个，你基本上已经构建了一个网络爬虫。

# ruby-on-rails - update_attributes 在本地工作，但在部署到 Heroku 时不会影响更改

> ID：12508959
> 
> 赞同：1
> 
> 时间：2012-09-20T08:39:01.687
> 
> 标签：ruby-on-rails, ruby, heroku

我有一个简单的 Rails Web 服务，它公开了一个允许客户端发布新记录的 JSON API。POST 处理时，首先会创建引用的记录，同时也会更新一些相关的记录。

```
@foo = Foo.new(foo_params)
if @foo.save
    related_list = Foo.where(:some_id => foo_params[:list])
    related_list.each do |related|
        # <figure out some stuff here>
        related.update_attributes(stuff)
    end

    # debug spew
    @test = Foo.find(a_related_record_id)
    puts @test.as_json

    format.json { render json: @foo.as_json }
end 
```

我认识到这是一个糟糕的两阶段提交模式，它滥用了典型的 REST 模型，但我继承了这段代码。我最终会修复它；这都是分阶段“修复”计划的一部分。

此代码在本地测试盒上完美运行。当部署到 Heroku 时，我进行了调试，显示模型在调用 update_attributes 后显然正在更新。但是，不知何故，模型实际上并没有更新。当我之后使用网页检查“相关”记录时，它们都没有通过“东西”更改进行更新。我对此感到非常困惑，因为调试喷出似乎显示正在更新的记录。有什么见解吗？

**更新**

当我回顾调试时，我刚刚注意到的一件事是 updated_at 日期时间永远不会改变，即使记录中的字段似乎有。您可以从下面的行中看到，该呼叫是在 UTC 时间 8:04:15 左右进行的。此外，我验证了 update_attributes 返回 true，所以据我所知没有错误。

在调用 update_attributes 之前：

> ←[36m2012-09-20T08:04:15+00:00 app[web.1]:←[0m { "created_at"=>Thu, 20 Sep 2012 00:43:45 UTC +00:00, **"somefield" =>""** , "id"=>2, **"updated_at"=>2012 年 9 月 20 日星期四 06:22:07 UTC +00:00** }

调用 update_attributes 后：

> ←[36m2012-09-20T08:04:15+00:00 app[web.1]:←[0m { "created_at"=>Thu, 20 Sep 2012 00:43:45 UTC +00:00, **"somefield" =>"10000848364"** , "id"=>2, **"updated_at"=>2012 年 9 月 20 日星期四 06:22:07 UTC +00:00** }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:47:41.553

经过大量艰苦的研究，我设法找出了问题的根源和修复方法，但我不清楚*为什么*会这样。不过，它现在正在解除对我的阻止，这就足够了。

在上面的代码中，在

```
# <figure out some stuff here> 
```

堵塞。我在原始问题中抽象出了一些代码，因为我认为它不相关。原来是这样。具体来说，有一行我在进行字符串连接：

```
some_string << @foo.somestringfield 
```

这一行，由于某种原因，导致

```
related.update_attributes(stuff) 
```

不保存到数据库。这是 100% 可重现的（相信我，我测试了大约 10 次以确定）。修复很简单：

```
some_string = some_string + @foo.somestringfield 
```

说真的，这解决了问题。我没有深入调试 ruby​​ 中的就地串联以确定根本原因，但如果其他人遇到这个问题，那么，现在你知道了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T15:40:12.710

看起来一般这种行为（`update_attributes`保存在本地但不在 Heroku 上）可以通过确保您没有在调用`update_attributes`.

对我来说，呼叫`update_attributes(:heartbeat => Time.now)`在本地工作，但未能在 Heroku 上保存。使用上面的答案，我猜测并通过`Time.now`在调用 update_attributes 之前保存到变量来解决问题：

```
heartbeat = Time.now
thing.update_attributes(:heartbeat => heartbeat) 
```

此代码正确保存在 Heroku 上。这应该是评论，但由于声誉规则，我正在“回答”。

# jquery - 清除响应式 jQuery 循环

> ID：12508960
> 
> 赞同：8
> 
> 时间：2012-09-20T08:39:02.017
> 
> 标签：jquery, css, jquery-plugins, jquery-cycle

我使用[jQuery cycle](http://jquery.malsup.com/cycle/)创建了一个响应式图像滑块。

我使用的以下设置工作正常，除了包含的`.cycle`div 没有正确清除，在它下面放置任何内容。

*这是因为 div 是相对的，它的子元素是绝对的。*

```
 $('.cycle').cycle({
        slideResize: true,
        containerResize: false,
        fit: 1,
        width: "fit"
     }); 
```

我的问题是，如何在`.cycle`没有固定高度或使用某些事件繁重的 JavaScript 的情况下清除响应式 div？

这是我在 jsfiddle 上的代码：http: [//jsfiddle.net/blowsie/HuNfz/19/](http://jsfiddle.net/blowsie/HuNfz/19/)

* * *

**更新：**

我写了一些代码来修复循环的高度，它可以按预期工作（虽然它有时会出错），但它的事件很重而且不是很流畅。

**我很乐意看到可以用纯 CSS 或更改循环设置来完成。**

[http://jsfiddle.net/blowsie/HuNfz/22/](http://jsfiddle.net/blowsie/HuNfz/22/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T13:59:42.727

Cycle 的响应不是很友好。但 Cycle2 绝对是。在这里查看：http: [//jquery.malsup.com/cycle2/](http://jquery.malsup.com/cycle2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T11:31:29.673

老帖子，我知道。

**我们让它在生产中使用 cycle**。Cycle2 不是，现在也不是我们的选择。不幸的是，它涉及修改循环的内部数据。幸运的是，修复很简单。

当循环插件初始化时，它会为每个幻灯片的 DOM 对象添加两个**属性 cycleW**和**cycleH**，分别是每张幻灯片的初始宽度和高度。Cycle 使用这些属性为每张幻灯片设置动画，而不管窗口的尺寸如何。

**调整窗口大小时，您需要手动清除 cycleW 和 cycleH 或将它们设置为预先确定的值**。

示例（假设您的幻灯片容器是 .slideshow）：

```
$(".slideshow").children("div").each(function(){
    this.cycleW = $(this).width();
    this.cycleH = $(this).height();
}); 
```

我们让它在生产中运行良好。

html 看起来像这样：

```
<div class="slideshow">
    <div class="slide"><img src=".." width="100%" height="auto"/></div>
    <div class="slide"><p>Copy copy copy no photo on slide </p></div>
    <div class="slide"><img src=".." width="100%" height="auto"/></div>
    <div class="slide"><p>Copy copy copy no photo on slide </p></div>
    ...
</div> 
```

现在窗口调整大小功能。这是我们的版本。您可能需要对其进行自定义以满足您的需求。基本上，我们在幻灯片中存储固定图像的情况下的初始比率。有时我们有可变高度的幻灯片。此代码解决了这两种情况。然后，它重置每个幻灯片 DOM 元素的内部 cycleW 和 cycleH 值以适应它们的父容器

```
$(window).resize(function(){
    // first time around, save original width & height for ratios and complicated preloading
    $(".slideshow").each(function(i,elt){
        var originalWidth = $(elt).data("originalWidth"); // check existence of our ratio cache
        if (typeof originalWidth == "undefined") {
            var containerWidth = $(elt).parent().first().width(); // auto scale to container width.
            var containerHeight = $(elt).parent().first().height();
            $(elt).data("originalWidth",containerWidth);
            $(elt).data("originalHeight",containerHeight);
        }
    });

    // fix slideshows to their container width
    $(".slideshow").each(function(i,elt){
        var containerWidth = $(elt).parent().first().width();
        var originalWidth = $(elt).data("originalWidth")*1;
        var originalHeight = $(elt).data("originalHeight")*1;
        var height = Math.floor(originalHeight*containerWidth/originalWidth);   // maintain original ratio
        $(elt).css("width", containerWidth+"px").css("height",height+"px"); // container actual dimensions. height might get reset again below
        $(elt).children("div").css("width", containerWidth+"px"); // reset each slide width 
                                                                 // (fails once slide moves out, because the cycle plugin will use a cached value)
        $(elt).children("div").children().css("width", containerWidth+"px"); // fix direct children (images or divs - images should have height auto).

        // recompute max height based on inside slide, not just photos.
        // some slideshows have variable height slides.
        var maxHeight = 0;
        var panelArray = $(elt).children("div");
        for (var i = 0; i < panelArray.length; i++) {
            var height = $(panelArray[i]).height();
            if (height > maxHeight) maxHeight = height;
        }
        if (maxHeight > 0) {
            $(elt).height(maxHeight);
        }

        // fix internal cycle dimension cache (cycleW and cycleH on each slide)
        $(elt).children("div").each(function(){
            this.cycleW = containerWidth;
            this.cycleH = maxHeight;
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:41:45.147

可能添加一个调整大小的窗口：

```
$(window).resize(function () {
    $('.cycle').height($('img:visible').height());
});
setTimeout(300, $(window).resize()); 
```

[http://jsfiddle.net/HuNfz/60/](http://jsfiddle.net/HuNfz/60/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T11:12:05.093

默认情况下，插件将 position:relative 分配给 your 和 s ，它分配 position: absolute 和 z-index 值。这使得幻灯片成为一个浮动/不卡在堆栈中。我找到了2个解决方案：

1.  将 clearfix 类添加到您的样式表中，并将 clearfix 的 css 样式添加到您的样式表中。

    .clearfix:after { 内容：“。”；显示：块；明确：两者；可见性：隐藏；行高：0；高度：0；}

    .clearfix { 显示：内联块；}

    html[xmlns] .clearfix { 显示：块；}

    *   html .clearfix { 高度：1%; }
2.  （不是很优雅）为你的循环课添加边框

    .cycle { 边框：1px 实心 #f00; }

希望其中之一有所帮助。

# apache-flex - 找不到 ExtensionContext

> ID：12508962
> 
> 赞同：3
> 
> 时间：2012-09-20T08:39:09.633
> 
> 标签：apache-flex, air

我在 WinXP 中使用 Flex Builder 4.6，但是行

导入 flash.external.ExtensionContext；

将收到一条错误消息。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:52:43.507

> Adobe AIR 的本机扩展是包含使用 ActionScript API 包装的本机代码的代码库。您可以在 AIR 应用程序中使用本机扩展来访问 AIR 不支持的平台功能，从关键算法的本机代码级性能中受益，并重用现有的本机代码库。

[开发原生扩展](http://help.adobe.com/en_US/air/extensions/index.html)

您只能为 Adob​​e AIR 编写本机扩展

# icons - 为什么图标不显示在 SmartGWT TreeGrid 中？

> ID：12508965
> 
> 赞同：0
> 
> 时间：2012-09-20T08:39:20.693
> 
> 标签：icons, smartgwt, treegrid

全部

我已经建立了一个 TreeGrid，我为它建立了一个远程数据源。

在回调函数中，我对 TreeGrid 实例使用 setData（包括图标信息），因此 TreeGrid 实例中有图标值。

但显示默认图标。有什么问题？！

PS: 1 已设置 setCustomIconProperty("icon"); 对于树网格；2 TreeGrid.redraw() 不工作。

谢谢七月

# angularjs - 检查树 - 传递参数以不检查子项

> ID：12508967
> 
> 赞同：0
> 
> 时间：2012-09-20T08:39:24.937
> 
> 标签：angularjs

我有这个代码[http://plnkr.co/edit/kiH0Ge?p=preview](http://plnkr.co/edit/kiH0Ge?p=preview)

```
<!doctype html>
<html ng-app="plunker" >
<head>
  <meta charset="utf-8">
  <title>AngularJS Plunker</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.js"></script>
  <script src="app.js"></script>
</head>
<body ng-controller="MainCtrl">
  <choice-tree ng-model="myTree" children="true"></choice-tree>
  <hr />
  $scope.myTree = {{myTree | json}}
</body>
</html> 
```

我添加了参数 checkChildren

```
<choice-tree ng-model="myTree" checkChildren="true"></choice-tree> 
```

然后在检查指令中我想有条件地运行函数

```
if(scope.checkChildren === 'true') 
   checkChildren(choice); 
```

但它不起作用。

我知道有孤立的范围，但是如何构建树。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:02:17.960

如果我的理解是正确的，我认为这是一个简单的错字。稍作修改，它似乎正在工作： http: [//plnkr.co/edit/BJqsl3](http://plnkr.co/edit/BJqsl3)

你想检查布尔值，例如`scope.checkChildren === true` 不反对`'true'`

## [编辑] 看来我没有正确理解规范

如果我删除`if`上面指出的语句并调用 `checkChildren()`，它会起作用。这是你的意图吗？Plunk 会相应更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:57:13.917

现在一切正常[http://plnkr.co/edit/5lLGIQ?p=preview](http://plnkr.co/edit/5lLGIQ?p=preview)

我刚把孩子改成带孩子的，这（关键）

```
$compile('<choice-tree ng-model="choice.children" children="{{children}}"></choice-tree>')(scope); 
```

至

```
$compile('<choice-tree ng-model="choice.children" withchildren="'+scope.withchildren+'"></choice-tree>')(scope); 
```

[http://plnkr.co/edit/5lLGIQ?p=preview](http://plnkr.co/edit/5lLGIQ?p=preview)

# sql - 在 FROM 语句中使用变量

> ID：12508973
> 
> 赞同：2
> 
> 时间：2012-09-20T08:39:48.713
> 
> 标签：sql, sql-server, sql-server-2008, tsql, dynamic-sql

我正在尝试创建一个查询，该查询将为`sys.server`.

对于每个`server.database.dbo.table`我想知道的内容。

所以我需要的是：

```
declare @numrows int = (select count(*) from sys.servers)
declare @i int = 1

while @i <= @numrows
BEGIN
declare @servername varchar(max) = (select servernaam from #servers where rij = @i)

select * from @servername.DATABASE.DBO.TABLE

set @i = @i+1

END 
```

但是，`@servername`in`@servername.DATABASE.DBO.TABLE`似乎不起作用。

建议？谢谢你和我一起思考。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T08:42:27.900

您必须使用动态 sql：

```
declare @numrows int = (select count(*) from sys.servers)
declare @i int = 1
declare @Sql(1000)
declare @servername varchar(max)

while @i <= @numrows
BEGIN
select @servername = servernaam 
from #servers where rij = @i

set @Sql = 'select * from '+@servername+'.DATABASE.DBO.TABLE'
exec(@Sql)

set @i = @i+1

END 
```

[这](http://msdn.microsoft.com/pl-pl/library/ms188332%28v=sql.105%29.aspx)是有关 exec 的更多信息。

# json - R列表（结构（列表（）））到数据框

> ID：12508986
> 
> 赞同：9
> 
> 时间：2012-09-20T08:40:30.893
> 
> 标签：json, r, dataframe, type-conversion

我有一个提供哈希列表的 JSON 数据源：

```
[
  { "a": "foo",
    "b": "sdfshk"
  },
  { "a": "foo",
    "b": "ihlkyhul"
  }
] 
```

我`fromJSON()`在[`rjson`](http://cran.r-project.org/web/packages/rjson/)包中使用将其转换为 R 数据结构。它返回：

```
list(
  structure(list(a = "foo", b = "sdfshk"), .Names = c("a", "b")),
  structure(list(a = "foo", b = "ihlkyhul"), .Names = c("a", "b"))
) 
```

我需要将其转换为**R**数据帧，但`data.frame()`将其转换为具有四列的单行数据帧，而不是预期的 2x2 数据帧。我缺乏从一个到另一个的转换的 R-fu，尽管它看起来应该很简单。

奖励积分：

实际问题要复杂一些，因为 JSON 数据源不像我上面显示的那样有规律。它返回的对象类型不同。也就是说，每个中设置的字段可以是几种不同类型之一：

```
[
  { "a": "foo",
    "b": "asdfhalsdhfla"
  },
  { "a": "bar",
    "c": "akjdhflakjhsdlfkah",
    "d": "jfhglskhfglskd",
  },
  { "a": "foo",
    "b": "dfhlkhldsfg"
  }
] 
```

如您所见，每个对象中的“a”字段是一个类型标记，指示该对象将具有哪些其他字段。

我不太特别注意解决方案如何处理这个问题。

如果这两种对象类型只是组合在一起，那就不会太可怕了，所以你会得到 a、b、c 和 d 列，并且这些行只是具有`N/A`或`NULL`JSON 源对象没有给定值的值场地。我相信我可以用`subset(df, a == "foo")`. 这样我会得到一些空列，但这对我的程序无关紧要。

如果该解决方案提供一种方法来选择哪些 JSON 源行进入数据框以及哪些被拒绝，那就更好了，这样结果就只有实际需要的列和行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T08:47:36.980

如果您有一个想要转换为 data.frame 的锯齿状列表，您可以使用 Hadley 的 plyr's `rbind.fill`。有几次救了我的脖子。让我知道这是否是您正在寻找的。请注意，我修改了您的第一个示例，使其在第三个元素中仅包含“b”以使其呈锯齿状。

```
> x <- list(
+         structure(list(a = "foo", b = "sdfshk"), .Names = c("a", "b")),
+         structure(list(a = "foo", b = "ihlkyhul"), .Names = c("a", "b")),
+         structure(list(b = "asdf"), .Names = "b")
+ )
> 
> library(plyr)
> do.call("rbind.fill", lapply(x, as.data.frame))
     a        b
1  foo   sdfshk
2  foo ihlkyhul
3 <NA>     asdf 
```

# jquery - jQuery File Upload - 同一页面上的多个文件上传小部件

> ID：12508989
> 
> 赞同：2
> 
> 时间：2012-09-20T08:40:43.693
> 
> 标签：jquery, upload

我有同样的问题......一切正常，但在上传期间，但图像预览不显示。

我查看了 wiki 页面，发现了问题的一部分。 [https://github.com/blueimp/jQuery-File-Upload/wiki/Multiple-File-Upload-Widgets-on-the-same-page](https://github.com/blueimp/jQuery-File-Upload/wiki/Multiple-File-Upload-Widgets-on-the-same-page)

当页面加载时，当我更改类的 id 表单 (id="fileupload") 时，第一个请求 (http://localhost/uploads_icon/server/php/) 未实现，如 wiki 中所示。

```
$(document).ready(function () {
$('.fileupload').each(function () {
    $('#fileupload').fileupload({
        uploadTemplateId:'template-upload-1',
        downloadTemplateId:'template-download-1'
    });
    $('#fileupload2').fileupload({
        uploadTemplateId:'template-upload-2',
        downloadTemplateId:'template-download-2'
    }); 
}); 
```

});

当我输入 id="fileupload" 时，会执行获取请求，但我不能有两个具有相同 id 的表单，并且只有 id="fileupload" 允许显示图像预览。

任何人都可以有一个技巧？

谢谢

# java - 多个 a4j:outputpanel 未在 IE 的 Ajax 请求中呈现

> ID：12508994
> 
> 赞同：0
> 
> 时间：2012-09-20T08:41:09.103
> 
> 标签：java, internet-explorer, jsf-2, ajax4jsf

我`drop down list`从下拉列表中选择了一个值，并且呈现了多个其他元素。这些元素是分开的`a4j:outputpanel`。当我在 Ajax 请求中呈现这些元素时，它们会在 Chrome 和 Mozilla 中完美呈现，但不会在 IE 中呈现。

`IE render only one element and not multiple elements`.

如何在 IE 中呈现这些元素？

我正在使用 a4j:jsfunction 进行 ajax 调用

`<a4j:jsFunction name="mya4jfunction" action="#{mybean.myfunction()}" render="mymage mytextfiled"> </a4j:jsFunction>`

* * *

`<a4j:outputPanel id="mymage"> <img src="assets/flags/#{myBean.myimage}"> </a4j:outputPanel>`

* * *

`<a4j:outputPanel id="mytextfiled"> <input id="mytf" name="tf" type="text" value="mybean.mytf" /> </a4j:outputPanel>`

# actionscript-3 - 如何跟踪其变量的名称

> ID：12508998
> 
> 赞同：1
> 
> 时间：2012-09-20T08:41:13.850
> 
> 标签：actionscript-3, variables, trace

```
var abc:int=123
trace(abc) 
```

//实际输出：
123
//我的预期输出：
abc:123

虽然我可以`trace("abc:"+abc)`用手打字，但我仍然想要一种更简单的追踪方式
我尝试过类似的东西

```
function tracee(word){  
trace("word:"+word)  
}
function traceee(word){
var wordd:Srting=word
trace(wordd+word)

} 
```

但这些功能不起作用。是否有可能获得预期的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:43:58.470

```
import flash.utils.describeType;

var num:Number = 47;
function customTrace(word:*){
    trace(describeType(this).variable.@name + " : "+word)
}
customTrace(num); 
```

[来源](http://www.developria.com/2009/09/as3-reflection-using-describet.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:49:23.190

不，变量通过链接（内存偏移）或值传递给函数，因此您没有任何有关名称的数据。

我可以建议的一件事是在 IDE 中使用自动代码生成。例如，在 IntelliJ Idea 中，它位于 Settings -> Live Templates 中，您可以在编辑器中通过 ctrl+J 使用它。