# StackOverflow 问答 14227000-14227999

# twitter-bootstrap - 切换到 twitter bootstrap 的利弊

> ID：14227000
> 
> 赞同：22
> 
> 时间：2013-01-09T01:34:48.110
> 
> 标签：twitter-bootstrap

我在一家企业级 SaaS 公司工作。该产品已上线，开发时间约为 6 个月。显然，作为一家公司和产品，我们仍处于起步阶段。

我们的一个项目人员购买了他在网上找到的主题。它有一些很好的图像，但除此之外它大多是垃圾。用于 ui 的唯一其他附加组件是 jquery ui。我想提及我们使用 Microsoft 堆栈（C#、MVC3、Visual Studio）会有所帮助。我们还涉足 Html5 和 Css3。

最近我从我的开发者朋友那里听说 bootstrap 有多棒，而如何不使用它是愚蠢的顶峰。我想把使用 bootstrap 的想法带给公司的其他人，但我想先从 SO 社区获得反馈。

切换的优点/缺点是什么？你会推荐它吗？如果是的话，你会多努力推动开关？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-09T02:11:35.987

这是一个有点主观的问题，但我想知道自己，所以我会尝试回答。

假设您可以将它集成到您​​的产品中（单独讨论），Bootstrap 将让您*快速*找到一个不错的地方。我说“体面”，因为我不认为这是最终的结果。

## 优点

*   适用于所有现代浏览器
*   [版本 3](http://getbootstrap.com/css/)中的“移动优先”方法
*   规范了许多小的 CSS 烦恼
*   轻的
*   可定制
*   鼓励使用 LESS CSS ( [http://lesscss.org](http://lesscss.org) )
*   给出一致性
*   帮助有审美挑战的开发人员（尽管我相信每个开发人员都应该具备 UX 的工作知识）
*   许多漂亮的入门模板可用（[https://wrapbootstrap.com/](https://wrapbootstrap.com/)，[http://bootswatch.com/](http://bootswatch.com/)等）
*   与 jQuery 集成（有些人可能认为这是负面的）
*   附带一些 jQuery 插件
*   一些 jQuery 插件现在提供 Bootstrap 主题

## 缺点

*   在复杂的数据输入屏幕方面表现不佳。当然，屏幕应该对用户来说很简单，但这并不意味着表单在技术上可能不复杂。有时，用户训练有素，*需要*复杂的表单，以便他们可以快速完成工作。

*   jQuery 插件是有限的。当然，您可以集成自己的，找到其他 3rd 方控件等。但开箱即用，您缺少重击，如网格、树视图、拖放等。

*   命名约定和语义是平庸的。示例：使用`<i>`标签作为图标。类名，如“pull-right”。

*   它非常可定制，但不可避免地有许多网站开始看起来很相似（就像 Wordpress 一样——考虑有多少博客网站看起来相同）。

最后，伟大的**利弊**：**这是别人的代码**。不是你写的；如果您希望它以不同的方式工作，您必须发现如何做到这一点，以及如何偏离既定的代码流。

# 实例探究

以下是我在最近的几个项目中处理它的方式。所有这些都是使用 c#、ASP.Net MVC、HTML5、CSS 2/3 和 jQuery 编写的（类似于问题中的开发堆栈）。

作为参考，我在 JavaScript 和 CSS 方面相当扎实。如果您的开发团队中没有人精通 CSS 或 JavaScript，那么从头开始将是一项艰巨的任务（并且可能是浪费时间）。

## 安全/合规产品

该产品具有复杂的安全模型，并且对数据输入/工作流程很重。应用程序管理的业务流程很复杂，因此 UI 的主要目标是简单。我从 Bootstrap 开始，但在一天之内就把它删掉了，因为我知道我想要完全控制，而且我已经有了基本的 CSS 模式和一些我自己的 JavaScript 组件可以构建。

但是，我保留了 LESS CSS。我也喜欢颜色编码的按钮。偶尔（现在仍然如此），我使用 Bootstrap 作为参考来了解广泛使用的框架如何应对特定挑战。

我知道我有幸能够在这个产品上投入大量时间，并且我做出了时间承诺来改进我自己的框架和我自己的文档。我对产品的了解越深，实现我想要的 UI 所需的自由/可扩展性就越大。

该产品已进行商业演示和销售，用户界面非常受欢迎。我花时间在自己的代码上做出了正确的选择。

## 在线向导

这是一个简单的、面向公众的网站，用于收集用户信息。我设计了大部分解决方案，但我没有全职工作。

最初，使用 Bootstrap 非常顺利。事实上，这个答案在项目完成之前吹捧 Bootstrap 是成功的。

团队喜欢 Bootstrap 并熟悉它。他们使用定制的 Bootstrap 模板快速构建了一些模型。由此产生的用户体验远高于平均水平，并且 Bootstrap 节省了时间。团队在需要时可以轻松找到文档。

事实证明，在 Bootstrap 模板中挖掘“别人的代码”对团队来说是一项挑战，但他们设法去掉了不需要的东西，让它看起来可以接受。

Bootstrap 使项目通过了原型阶段。一旦我们开始微调，它就变得不那么有用了。我们从未做出“停止使用 Bootstrap”的决定，但当项目上线时，我们已经找到了优秀的 JavaScript 组件，并定制了无法识别的 CSS。

## 简单的公共网站

这个网站纯粹是为了营销，需要快速建立。我的客户购买了他们喜欢的模板，我们在几个小时内对其进行了定制。

模板的代码相当容易浏览。唯一的困难是它是为先前版本的 Bootstrap 编写的。

完美吗？没有。但它很快就完成了工作，并且在大多数设备上运行良好，而我几乎不需要付出任何努力。

## 文档网站

我使用了 Bootstrap（100% 未定制）来减少为在线系统构建具有专业外观的文档（例如 API 文档）所花费的时间。为此，我喜欢它。它使我能够提供具有专业外观的内容，并且在风格上浪费零精力。

## 结论

如果您的时间和/或经验不足，请考虑使用 Bootstrap。如果您正在计划一个主要产品，请做好准备，您可能需要“深入挖掘”代码。

**当然可以使用 Bootstrap 来构建一个漂亮的网站。没有也同样可以这样做。**为工作使用正确的工具。至少将 Bootstrap 作为候选工具进行一次调查可能是值得的。即使您有经验，您也可以掌握一些技巧。

> 最近我从我的开发者朋友那里听说 bootstrap 有多棒，而如何不使用它是愚蠢的顶峰。

很少有技术性的东西（或遗漏）是“愚蠢的顶峰”。花一个周末，尝试集成到您产品的一部分中。您将很快看到它的优势/劣势并开始确定它的价值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T06:20:07.173

不要将 Bootstrap 视为一种选择。蒂姆·梅多拉（Tim Medora）提出了很多好的观点。但我会注意到，通过深入研究代码或使用[主页的自定义页面](http://twitter.github.com/bootstrap/customize.html)，始终可以提取 Bootstrap 的各个部分并自定义它的各个方面以获得看起来新鲜的东西。当然，如果你保留基本的导航栏和菜单，你会得到一些感觉非常传统的东西，这可能是个问题。但是很多人使用 Bootstrap 来制作[独特的外观](http://builtwithbootstrap.com/)。

使用网格系统但设计自己的组件是完全可以接受的。或者放弃网格并使用它们的组件。这不是一个非此即彼的命题。唯一真正变得棘手的时候是当你决定你真的想要改变一些东西时，比如菜单的外观和感觉。做到这一点的“正确方法”并不总是显而易见的。您可能必须深入研究代码，并且很难确保您所做的更改不会破坏其他内容。但这仍然比根本没有示例要好。

我认为你唯一能犯的错误就是没有彻底了解 Bootstrap 可以为你提供什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T07:27:34.213

Bootstrap 为您提供了一些网格系统、样式和 CSS 技巧以及 JS 组件的解决方案。其中一些不适合您，但这不是全有或全无的选择。把它作为一个很好的默认开始，这在美学上是正确的;) 和便携。如果您将保留此默认设置而不进行自定义，那么您的站点将与所有其他保留相同默认设置的产品相似，但这是一个很好的起点。BS 中的按钮样式和导航栏在大多数 BS 产品中是相同的，但在大多数不使用 BS 的产品中按钮样式也是相同的；）

# c++ - 如何检测 TCP 连接中的网线是否已拔出？

> ID：14227007
> 
> 赞同：2
> 
> 时间：2013-01-09T01:35:28.620
> 
> 标签：c++, sockets, tcp, network-programming

我有一个 C++ 网络应用程序，它接受来自客户端的 TCP 连接，然后在套接字上等待，直到客户端决定发送数据（有时他们不会在很长一段时间内发送任何东西，这没关系）。

它主要在客户端崩溃或机器关闭时检测错误情况，但是当连接到客户端的网络电缆被拔下时，它需要很长时间才能注意到，我希望它尽快注意到这种情况。

我无法控制客户，也不能让他们发送类似“ping”的东西。我的服务器确实向客户端发送了一个“ping”数据包（但它们不会发送响应），但即使拔下电缆，write() 也会返回正确的字节数（我看到 TCP 堆栈发送重试Wireshark 中的数据包）。

发现连接丢失的最佳方法是什么？如果我可以在 write() 调用中检测到它，那将是最方便的。

我需要它才能在 Windows 和 Linux 上工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:45:05.827

抱歉，如果没有 ping/keepalives，就无法及时检测到异常断开连接。甚至操作系统也不总是知道电缆已被拉动。这就是为什么`write()`仍然有效 - 套接字很高兴地在其输出缓冲区中缓冲数据，等待稍后发送它，因为套接字状态尚未被操作系统无效。最终，socket会在内部超时，此时OS终于可以使连接失效，让socket在后续操作中报错。但这可能需要很长时间，正如您所注意到的。

由于您无法发送应用层 ping，请至少尝试启用套接字层 keep-alives。这可能会有所帮助。仅在 Windows 2000+ 上，您可以使用`SIO_KEEPALIVE_VALS`socket 选项 via `WSAIoctl()`，它可以让您设置 keep-alives 的实际计时器值。在所有平台上，您都可以使用`SO_KEEPALIVE`选项 via `setsockopt()`，但这不允许您配置计时器值，因此使用默认值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T02:16:36.660

不幸的是，没有办法区分在另一端被拉出的电缆与任何其他丢包原因。话虽如此，您可以将另一端的连接丢失近似为在足够长的时间段（例如 T）内发生的“无限丢包”。TCP 跟踪数据包丢失，因此执行此操作的一般方法是：

*   获取连接中未确认的字节数（假设为 B）
*   发送数据，大小 = N
*   设置 timeout = T，当它触发时，再次检查未确认的字节数。如果是B+N，则假设对方已经失去连接。此时，您可以尝试 ICMP echo 来验证您的假设。

获取连接的 TCP 特定信息不是 UNIX 上的标准接口，也绝对不能移植到 Windows。在 Linux 上，有一个名为 TCP_INFO 的套接字选项，您可以通过 getsockopt() 调用它。谷歌应该给你一些例子。我不知道 Windows 上是否有等效选项。

另一种方法（即近似跟踪连接丢失）是通过 RAW 套接字。打开一个 RAW 套接字并对其进行过滤以仅接收用于您的连接的 TCP 流量。然后，与其从 TCP 获取信息以确定您是否从另一端获得任何信息，不如等待从另一端接收*任何*数据包。如果在规定的时间内得到了东西，那么就说明对端还在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T01:48:04.760

你的问题很复杂。您和您的客户之间有很多事情可能会出错。不仅仅是“拔出”的电缆。

如果您只是想知道您的用户是否仍然在线，您可以建立一个新的 TCP 连接。因为您需要完成 3 次握手才能成功建立 TCP 连接，所以您知道连接成功初始化时客户端在线。这样做的问题是，如果您想保持当前连接处于活动状态，则需要另一个端口。不知道这是否是您的问题。

但是从它的声音来看，您并没有真正从您的客户端发送和接收数据（除了一些 ping 数据）。因此，您可以简单地将您的应用程序设置在一个循环中以每隔 X 秒设置一个 TCP 连接（前两个步骤 - 因此接收 ACK - 应该足以确定您的客户端是否仍在处理网络数据）。如果您在 X 毫秒内没有得到响应，您可以非常可靠地说您的客户端或介于两者之间的东西停止了“工作”。

希望这可以帮助。如果没有，请提供有关您的工具在做什么的更多信息。

# html - 获取页脚留在页面底部

> ID：14227013
> 
> 赞同：-1
> 
> 时间：2013-01-09T01:36:09.543
> 
> 标签：html, css, footer

> **可能重复：**
> [CSS 使 HTML 页面页脚以最小高度保持在页面底部](https://stackoverflow.com/questions/643879/css-to-make-html-page-footer-stay-at-bottom-of-the-page-with-a-minimum-height)

（网站链接：[http](http://www.eastsidespeedway.weebly.com/) ://www.eastsidespeedway.weebly.com/ ）

请使用上面的链接和您的浏览器开发工具来查看 html/css。

我试图让页面的页脚保持在页面底部。它现在看起来好像已经关闭了，但这只是因为它适合页面。例如，如果您转到 /404.html，您会看到它是一个无页眉页面，并且页脚几乎位于页面的一半！我使用 Weebly 添加内容等，但我使用 Dreamweaver 构建站点。我在网上尝试了多种方法，但它们似乎使页脚超出实际内容的位置，您看不到它。我需要它低于内容。

网站布局是这样的（示例）：

```
<div id="container>
  <div id="navigation"></div>
  <div id="content"></div>
</div>

<div id="footer-container>
  <div id="footer"></div>
</div> 
```

您可以看到页脚位于单独的容器中。这是因为有一个背景图片需要显示 100% 的页面宽度，而容器是 960px 宽。

如果您不太了解，我对 html/css 有点陌生，很抱歉。

同样，如果您需要任何帮助，请使用浏览器中的开发人员工具。:P

任何意见，建议，答案表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:41:46.023

**已编辑**

```
<div id="wrapper">
  <header></header>
  <div id="main"></div>
  <footer></footer>
</div>

body, html, #wrapper { height: 100%;  } /* Create space for elements to be 100% */
#wrapper { display: table; } /* Create a table-structure */
#wrapper > * { display: table-row; } /* All direct children behave as rows */
#wrapper > header, 
#wrapper > footer { min-height: 100px; } /* These must be at least 100px */
#main { height: 100%; } /* Let the mid section fill up the remaining space */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T01:43:14.000

只需添加到`#footer-container`

```
position:absolute;
bottom:0px; 
```

将 放在`footer`页面底部。

# groovy - Groovy整数过滤？

> ID：14227016
> 
> 赞同：0
> 
> 时间：2013-01-09T01:36:32.937
> 
> 标签：groovy

所以在 Groovy 中，我试图想办法过滤掉任何奇数和混合数。当“a”是偶数时，我还想让它说“偶数”。“n”和“m”中的值是可替换的。“？”在哪里？是，是我需要帮助的地方。这是现在的代码：

```
n = ( 100 / 4 )

m = ( 6 * 6 )

a = (n + m)

println ( n + m )

println ( a / 2 )

if a = ?

{

        println "Even"

} 
```

我试图用“a”来过滤混合数字和赔率，比如答案 30.5。我已经看过，我找不到任何人可以做到这一点。

当你运行它时，它会这样说：

```
groovy> n = ( 100 / 4 ) 

groovy> m = ( 6 * 6 ) 

groovy> a = (n + m) 

groovy> println ( n + m ) 

groovy> println ( a / 2 ) 

groovy> if a = ?

groovy> { 

groovy>     println "Even" 

groovy> } 

1 compilation error:

expecting '(', found 'a' at line: 6, column: 4 
```

任何答案将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:47:31.723

这可能会有所帮助：

```
boolean isEvenInteger(Number value) {
  return new BigDecimal("$value").remainder(2) == 0
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:35:07.330

另一条路线是：

```
if( a.toBigInteger().mod( 2 ) == 0 ) {
  println 'Even'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-08T19:14:22.697

我很快把它放在一起，在测试用例中做类似的事情，同时让代码更加有文化……在某个地方定义通用类（不幸的名字，但这是为了快速测试代码）：

```
@TupleConstructor
class NumClass {
    Closure<Boolean> test
    boolean isCase(Object o) { test(o) }
} 
```

然后是一些要测试的实例：

```
static final NumClass EVEN = new NumClass({!(it % 2)})
static final NumClass ODD = new NumClass({it % 2}) 
```

然后可以针对使用`switch`或`in`

```
(1..20).findAll{it in ODD}

(1..20).each{
  switch(it) {
    case EVEN:
      println "${it} is even"
      break
    case ODD:
      println "${it} is odd"
      break
    default:
      println "${it} is a mystery to me"
  }
} 
```

# java - 在 Java 中模拟结构是不是一个好方法？

> ID：14227019
> 
> 赞同：0
> 
> 时间：2013-01-09T01:37:25.780
> 
> 标签：java

有一次我在一家大型科技公司工作。我们用 Java 编程。那里的人非常聪明，他们喜欢用 Java 中的 C/C++ 模拟结构。为了清楚起见，他们提倡创建充当“数据持有者”的类：

```
public class BookInformation {
    public final List<String> authors;
    public final String bookTitle;
    public BookInformation(List<String> authors, String bookTitle) {
        this.authors = authors;
        this.bookTitle = bookTitle;
    }
    @Override
    public String toString() { ... }

    @Override
    public int hashCode() { ... }

    @Override
    public boolean equals(Object obj) { ... }
} 
```

正如我们所见，这个类的目的只是保存数据。尽管我们违反了许多企业编程规则，例如不直接暴露类字段和防御性复制，但这种类确实获得了简洁编码等好处。我们可以直接调用字段名称，而不是调用 getter 和 setter。

让我烦恼的是这种类很难维护和扩展。很难维护，因为无法确保对象的状态是合法的。业务逻辑可能会说，一本书必须有一个标题和至少一个作者。但在现实世界中，对象可以有空标题、空标题、空作者列表或空作者列表，我们根本无法控制它。很难扩展。例如，如果将数据源更改为为作者姓名分别提供名字、姓氏怎么办？我必须使用两个字符串列表而不是一个。更糟糕的是，数据结构的变化会影响和接口。由于我没有 getAuthorNames() 接口，我可能不得不在很多地方更改代码。

我不得不承认，上述情况并没有发生。我不得不承认，使用该类的所有代码都在团队的控制之下，因此界面更改听起来不像为其他团队/公司编写使用那样糟糕。那么即使我们使用Java这种纯OO语言进行企业级编码也可以有这样的编码标准吗？

我知道可能没有“正确”的答案。我想听听个人意见。代表自己大声说话！

编辑：

好的。我应该重新表述我的问题的核心：牺牲一些教科书的编码规则来获得简单性是否明智？当代码库增长和团队增长时，牺牲会咬你吗？个人意见很重要，尤其是来自智者，在很多情况下，没有对错之分，我们都只是遵循令人信服的意见。很抱歉，Stackoverflow 仅针对正确和错误的问题而设计。在那种情况下，这个问题应该被关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:42:06.077

我认为有一个正确的答案：如果它适合你，那就去吧。没有时尚警察等着逮捕你。

了解规则及其背后的原因。当你打破它们时，了解后果。为你所做的事有充分的理由。忍受发生的事情。

例如，我认为从不公开数据的规则不需要是绝对的——只要你做得正确。

你需要意识到你做错了。

您将 List 引用设为 final 的事实只是意味着无法更改引用。引用所指的 List 可以添加和删除元素。你必须让它不可变才能实现你想要的。

如果您不使其不可变，则您对传递给构造函数的引用所做的更改将反映在您的对象中。即使您将该引用设为私有，这也是正确的。您必须复制您传入的 List 以使您的对象的状态真正独立。与其他对可变类型的引用相同，例如 Date。

它适用于字符串，因为它是不可变的。

还有一件事：应该是`equals()`，不是`Equals()`。Java 中的大小写很重要。

```
public final class BookInformation {
    public final List<String> authors;
    public final String bookTitle;
    public final Date publicationDate;

    public BookInformation(List<String> authors, String bookTitle, Date publicationDate) {
        this.authors = Collections.unmodifiableList((authors == null) ? new ArrayList<String>() : authors);
        this.bookTitle = (StringUtils.isBlank(bookTitle) ? "" : bookTitle);
        this.publicationDate = ((publicationDate == null) ? new Date() : new Date(publicationDate.getTime()));
    }
    @Override
    public String toString() { ... }

    @Override
    public int hashCode() { ... }

    @Override

   public boolean equals(Object obj) { ... }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:02:00.793

我发现标准的 getter/setter 有时是不必要的冗长，但有一些方法可以解决这个问题。

例如，您可以使用与字段同名的 getter 或 setter，并且可以创建比直接访问字段更简洁的操作方法。

例如

```
public class BookInformation {
    private final Set<String> authors = new LinkedHashSet<>();
    private final String bookTitle;

    public BookInformation(List<String> authors, String bookTitle) {
        assert authors != null;
        assert bookTitle != null;

        for(String author: authors) addAuthor(author);
        this.bookTitle = bookTitle;
    }

    public String bookTitle() { return bookTitle; }

    // get all the authors without needing a defensive copy.
    // for(int i = 0, len = bookInfo.authorCount(); i < len; i++) {
    //     String name = bookInfo.author(i);

    public int authorCount() { return authors.size(); }
    public String author(int n) { return authors.get(n); }

    public void addAuthor(String name) {
        assert name != null
        authors.add(name);
    } 
```

* * *

```
class AuthorCounter {
    private final ConcurrentMap<String, AtomicInteger> authorCountMap =
                  new ConcurrentHashMap<>();

    public void addAuthor(String name) {
        authorCountMap.putIfAbsent(name, new AtomicInteger());
    }

    public void incrCountFor(String name) {
        authorCountMap.get(name).incrementAndGet();
    }

    public int countForAuthor(String name) {
        AtomicInteger ai = authorCountMap.get(name);
        return ai == null ? 0 : ai.get();
    }
} 
```

# android - 每次我们想在应用程序中更改字体时，我们是否必须复制字体 TTF

> ID：14227023
> 
> 赞同：4
> 
> 时间：2013-01-09T01:38:01.097
> 
> 标签：android

以前，为了使我的应用程序在 Gingerbread 设备及以上设备中可用，我必须将 Robotto 字体资源复制到资产文件夹中。这是因为 Gingerbread 本身并不附带 Robotto 字体。

![在此处输入图像描述](../Images/183110c0eefaa5b3782b7c2fb7dafdc6.png)

但是，假设我决定仅将我的应用程序部署到 Jelly Bean 设备。

1.  我还需要手动将字体资源复制到我的资产文件夹中吗？我可以使用系统本身的字体资源吗？是可以鼓励的吗？我在想，不提供我自己的字体文件，我可以让我的应用程序更小。
2.  `TypeFace`这是从资产文件夹获取的代码。

    `Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/Roboto-Regular.ttf");`

    如果我想`TypeFace`直接从系统本身获取，如何？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T02:54:04.867

好消息是，如果您支持 4.1，那就太简单了。查看[此链接](http://developer.android.com/about/versions/android-4.1.html#UI)并向下滚动到字体以获取完整详细信息，但基本上，您将有三种字体系列（Roboto、Roboto Light、RobotoCondensed）可供选择，每种字体有四种样式（普通、粗体、斜体、粗斜体） ）。

在 XML 中，您可以只使用标准文本属性：

```
android:fontFamily="sans-serif"
android:fontFamily="sans-serif-light"
android:fontFamily="sans-serif-condensed"

android:textStyle="bold"
android:textStyle="italic"
android:textStyle="bold|italic" 
```

或者以编程方式，您可以像这样获取它们：

```
Typeface robotoLightItalic = Typeface.create("sans-serif-light", Typeface.ITALIC); 
```

# javascript - Coffeescript html5画布库

> ID：14227024
> 
> 赞同：1
> 
> 时间：2013-01-09T01:38:05.247
> 
> 标签：javascript, html, canvas, frameworks, coffeescript

最好的 CoffeeScript 画布库是什么？我找到[了一个描述 Javascript 库](https://stackoverflow.com/questions/3474608/what-is-the-current-state-of-the-art-in-html-canvas-javascript-libraries-and-fra)（如 paper.js、fabric.js 或 kinetic.js）的主题，但它们都是用 JavaScript 编写的，理论上可以与 CoffeeScript 一起使用，但实际上可能很难。

那么是否有任何用“纯”CoffeeScript 编写的高级画布库，或者它是否适合且易于使用其中一种可用于 JavaScript 的库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:49:46.857

实际上，将coffeescript 与javascript 库一起使用并不难。最好的库总是在 javascript 中，因为这是最兼容的格式。

就我个人而言，我用coffeescript 编写，然后正常包含javascript 库。当我有 javascript 中的示例或代码片段时，我会在[http://js2coffee.org](http://js2coffee.org)进行转换。从理论上讲，您可以转换库，但没有必要这样做。

我将咖啡脚本保存在一个单独的文件夹中，然后使用脚本轻松编译它们以进行测试 - 在 OSX 上，脚本看起来像：

```
#!/bin/sh
export PATH=/usr/local/bin
export NODE_PATH=usr/local/lib/node_modules
/usr/local/bin/coffee --compile --output ../media/js/ ../coffee/*.coffee 
```

# push - NetBeans 非快进更新

> ID：14227026
> 
> 赞同：2
> 
> 时间：2013-01-09T01:38:18.133
> 
> 标签：push, netbeans-7, pull

我正在使用 NetBeans 7.2.1，并且在提交文件后无法推送文件。

该文件名为“test.php”，是一个尚未推送到服务器的新文件。该文件没有 PHP 错误，并且提交成功。

但是，当我尝试“推送”文件时，会弹出以下错误消息：

推送将导致非快进更新。

如果我执行“拉”，则拉成功完成。如果在成功拉取之后，我尝试执行“推送”，则会弹出相同的“非快进更新”错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-25T15:50:56.677

我面临同样的问题。请尝试拉取然后合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T13:51:39.830

做一个拉然后合并分支，以便它可以跟踪更新。在 7.4 上遇到了同样的问题，这解决了它。

# unit-testing - 可以与 Google Maps API 交互的 Android 单元测试框架。一个存在吗？

> ID：14227027
> 
> 赞同：2
> 
> 时间：2013-01-09T01:38:26.183
> 
> 标签：unit-testing, google-maps, robotium, android-4.0-ice-cream-sandwich, junit3

我正在使用 Android 4.0 上的 Google 地图，我想知道：

是否有可以与 Google Maps API 交互的测试框架（或任何东西..）？在 Android 上与 Google 地图进行交互/测试时有哪些可能性？是否无法在地图上找到所有图钉并单击它们或确定缩放级别？

这个网站上似乎有几个问题处理类似的问题/没有答案的问题。

我意识到“互动”是一个广义的术语。我真的在寻找任何帮助，无论是建议还是只是告诉我一些不可能的事情。

我一直在使用 JUnit，但它本身似乎受到限制。就在今天，我开始研究 Robotium，因为我需要做的大部分测试都是基于 UI 的。我是Robotium的新手，所以也许有可能，但我还没有发现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-20T20:21:14.203

当我们的团队创建一个使用 Google 地图的 Android 应用程序时，我能够使用地图片段的 R.id 创建测试。重要的是要注意我可以访问应用程序的代码，所以我知道要查找哪些变量。

在创建这个测试之前，我想确保我的目标是正确的 R.id，所以我进入了 R 文件，复制了值并将其放入

`assertEquals(id.satellite,copiedRValue);`

返回true，然后围绕可变变量构建测试

```
 initialID = solo.waitForFragmentById(id.satellite); //where id.satellite is defined in the R file, eventually would time out and throw error if fragment was not present
    //save the map type, leave
    //and do other awsome stuff
    //before coming back to the map
  finalID = solo.waitForFragmentById(id.satellite);//capture the map fragment that is now displayed, again would time out if this specific fragment was not visible

    //assert that the fragments are equal
     assertTrue(initialID.equals(finalID); 
```

我在这个测试和其他 Robotium 测试中遇到的最大问题是我发生了单击事件以引入菜单，有时 Robotium 不会执行单击，并且单击时测试会失败。

这是我第一次使用 Robotium 进行测试，因此可能有其他方法可以操纵 R.id 值以创建更严格的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T02:37:41.290

万一有人想知道经过大量搜索，我终于找到了可以测试谷歌地图的东西。诸如缩放级别之类的东西，我相信 Tap pin（方法称为 tapMapMarkerItem()）是受支持的。我还没有测试过pin tap。显然，很棒的 Robotium 本身并不支持地图测试。Nicholas Albion 很好地创建了一个扩展来为 Android 上的地图提供测试支持。非常感谢尼古拉斯！

* * *

所以这里是：
1\. 从 robotium.org 下载 Robotium jars（我发现这很有帮助 [http://www.vogella.com/articles/AndroidTesting/article.html](http://www.vogella.com/articles/AndroidTesting/article.html) - 由 Lars Vogel 提供） 2\. 从[https](https://github.com/nalbion/robotium-maps)
下载扩展： [//github.com/nalbion/robotium-maps](https://github.com/nalbion/robotium-maps)

# c++ - 是否有一个 printf 说明符需要浮点数而不是双精度数？

> ID：14227028
> 
> 赞同：7
> 
> 时间：2013-01-09T01:38:34.310
> 
> 标签：c++, c, format-specifiers, promotions, misra

当我将 "%f" 说明符用于`snprintf`type 的参数时，我收到 MISRA 类型错误`float`。

根据我的研究，MISRA 是正确的，因为 "%f" 需要一种`double`.

**`float`是否存在将使用类型参数而不是 的浮点说明符或修饰符`double`？**

我正在开发嵌入式系统，不想`double`为了取悦`snprintf`功能而从 32 位浮点转换为 64 位。代码打印到调试/控制台端口，这是唯一发生转换的地方。

对于那些需要代码示例的人：

```
// This section is for those C++ purists and it fulfills the C++ tag.
#if __cplusplus
#include <cstdio>
#else
#include <stdio.h>
#endif

#define BUFFER_SIZE (128U)

int main(void)
{
    char buffer[BUFFER_SIZE];
    float my_float = 1.234F;

    // The compiler will promote the single precision "my_float"
    //   to double precision before passing to snprintf.
    (void)snprintf(buffer, BUFFER_SIZE, "%10.4f", my_float);
    puts(buffer);
    return 0;
} 
```

我对 SO 和 Web 的所有研究都是关于打印一个浮点值，而不是关于哪些说明符需要一个`float`参数以便不会`double`发生任何提升。

我正在为 ARM7TDMI 处理器使用 IAR Embedded Workbench 编译器。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-09T01:40:04.140

不，因为`printf`和它的朋友都是可变参数函数，所以`float`参数会自动转换`double`为*默认参数提升*的一部分（参见 C99 标准的第 6.5.2.2 节）。

我不确定为什么这会触发 MISRA 警告，但我想不出任何可能会造成危险的方式。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-09T01:40:04.267

不，没有，因为标准提升将每个`float`参数转换为`double`当通过可变参数列表传递时。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-09T13:59:47.107

正确的 MISRA-C:2004 合规性分析应给出：

*   违反 1.1，代码不符合 ISO 9899:1990（C++ 代码，C99 代码）。
*   违反 2.2，使用 // 注释。
*   违反 16.1，使用可变参数函数。
*   违反 20.9，使用 stdio.h。

如果您遇到上述错误以外的其他错误，则您的静态分析器可能已损坏。

我已经手动分析过，以及使用 LDRA Testbed 7.6.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-25T10:02:19.743

由于自动升级，无法在 printf 函数中指定 float 而不是 double ，但我认为您可以更改代码：

```
(void)snprintf(buffer, BUFFER_SIZE, "%10.4f", my_float); 
```

至：

```
(void)snprintf(buffer, BUFFER_SIZE, "%10.4f", (double)my_float); 
```

并取得正确的结果

# c# - 为 WPF 形状启用抗锯齿

> ID：14227031
> 
> 赞同：4
> 
> 时间：2013-01-09T01:39:34.997
> 
> 标签：c#, wpf, drawing, antialiasing

似乎很多人都在尝试关闭`anti-aliasing`，`WPF`但我似乎有相反的问题。我在 中绘制形状`WPF`，边缘都是锯齿且丑陋的。最糟糕的部分是，当我使用 ScaleTransform 缩小以使形状的高/宽小于一个像素时，它会完全消失。我怎样才能使它们光滑漂亮？

目前，我正在绘制`Rectangles`并将`Ellipses`它们放置在网格和`StackPanels`.

经过大量的谷歌搜索，我发现了如何`anti-alias`通过在窗口的构造函数中使用以下行来获取我的图像：`RenderOptions.SetBitmapScalingMode(this, BitmapScalingMode.Fant);`

但是，这只影响我的图像，而不影响我的形状。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-13T05:43:12.493

我有我认为同样的问题。设置`SnapsToDevicePixels`为 false 对我有用：

```
<Ellipse SnapsToDevicePixels="False" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:08:16.027

你可以`EdgeMode`按照你设置的方式设置`BitmapScalingMode`

```
 RenderOptions.SetEdgeMode(this, EdgeMode.Unspecified); 
```

但是`Anti-Aliasing`设置为默认值，因此您不需要更改它，但试一试:)

在您的窗口上设置`SnapsToDevicePixels = true;`也可能有助于形状。

# prolog - Prolog 中返回的错误值？

> ID：14227033
> 
> 赞同：2
> 
> 时间：2013-01-09T01:39:48.010
> 
> 标签：prolog

```
sitting(mary, james).
sitting(rosie, andrew).
sitting(kiera, tom).

issitting(X, Y) :- sitting(X, Y). 
```

嘿伙计们，我基本上想检查谁坐在谁旁边的真假值，

当我在编译器中输入

```
issitting(rosie, andrew). 
```

但是，当我键入时，会返回一个真值

```
issitting(andrew, rosie). 
```

返回一个假值（这应该是真的，因为他们坐在一起）。如果用户检查谁坐在彼此旁边（所有可能的组合），我不想添加三行额外的代码。

您将如何更改规则以使 Prolog 了解如果用户切换名称，它们仍然是正确的（不是错误的）。

我不明白为什么它给了我 'false' 。

我被卡住了，这是迄今为止我能做到的最好的：/

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T02:39:47.643

（我可以指出问题，但是你不会学到任何东西。我假设你正在使用 SWI，因为你说它`false`被返回了。）

```
?- issitting(andrew, rosie).
false. 
```

让我重申一下您的问题：您期望这`issitting(andrew, rosie)`是真的。但事实并非如此。如果你问一个人这个问题你会怎么做？大概你会问为什么？为什么不`andrew`坐在旁边`rosie`？而且，比如说，你不理解这些解释，你可能会问另一个问题：

> `andrew`至少坐在任何人旁边吗？

所以这个问题是对原始问题的**概括**。在 Prolog 中，我们可以在变量的帮助下做同样的事情，如下所示：

```
?- issitting(andrew, Anyone).
false. 
```

所以现在我们知道`andrew`坐在没人旁边了吗？使困惑？好吧，我们可以再次概括查询：

> 是否至少有一个人坐在任何人旁边？

```
?- issitting(Person, Anyone).
Person = mary,
Anyone = james ;
Person = rosie,
Anyone = andrew ;
Person = kiera,
Anyone = tom. 
```

所以周围有一些人。实际上，原因是你`sitting/2`和另一个关系`issitting/2`。您需要`issitting/2`通过添加以下规则进行概括：

```
issitting(X, Y) :- sitting(Y, X). 
```

但重点是向您展示一个很好的通用调试策略：

> 如果发生意外失败，请尝试概括您的查询（和您的程序）。

# android - Android 如何使用 HttpClient 在 sdcard 上保存 cookie

> ID：14227037
> 
> 赞同：2
> 
> 时间：2013-01-09T01:40:07.087
> 
> 标签：android, http, cookies

我需要知道一种将我的 HttpClient cookieStore 作为字符串存储在 txt 文件中的方法，以及如何重新使用它们并创建一个新的 httpConnection。

```
 httpclient=new DefaultHttpClient();
    cookieStore = new BasicCookieStore();
    localContext= new BasicHttpContext();
    localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore); 
```

# google-app-engine - 在配额使用方面优化谷歌应用引擎有哪些容易实现的目标？

> ID：14227040
> 
> 赞同：0
> 
> 时间：2013-01-09T01:40:40.087
> 
> 标签：google-app-engine

每个人都很快学会使用 Memcache。我最近学到的另一个方法是为我不会查询的模型属性设置 indexed=False。还有一些是什么？什么是*大*的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:11:14.830

一对夫妇帮助了我们（起初可能并非所有人都低调）。首先，我们对数据存储进行非规范化以减少连接。我使用 SQL 术语是因为我来自 SQL 背景。通过传播常见的查询元素，我们大大减少了必须进行的读取次数，即使在考虑了 Memcache 之后也是如此。可能会增加写入，但对于大多数应用程序而言，读取次数远远超过写入次数。

接下来，我们开始更频繁地使用任务队列、后端和通道 API。我不记得具体的例子，但我记得我们能够通过将一些处理移动到队列和后端以及通过通道发送数据而不是让客户端轮询来将前端使用量减少到免费配额标记以下。

此外，我们使用 objectify 进行数据访问，我们将其配置为在适当的情况下自动使用 memcache。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:25:42.017

1.  不要`offset`在查询中使用。改为使用游标。

    说明：offset 加载所有数据直到 offset+limit 并为此收费，但只返回 limit 实体。

2.  通过为您的应用程序适当地调整[空闲实例和挂起延迟](https://developers.google.com/appengine/docs/adminconsole/instances)，最大限度地减少实例使用。

# c - c中结构的定义

> ID：14227045
> 
> 赞同：3
> 
> 时间：2013-01-09T01:41:44.360
> 
> 标签：c, networking, network-programming

我只是对“UNIX NETWORK PROGRAMMING”（v2，pg162）一书中的结构定义有疑问，这里是：

```
struct {
    pthread_mutex_t mutex
    int buff[MAXNITEMS];
    int nput;
    int nval;
} shared= { 
    PTHREAD_MUTEX_INTIALIZER
}; 
```

分享后我无法理解代码。它的真正含义是什么？提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T01:47:12.703

该代码`struct { ... } shared = { PTHREAD_MUTEX_INITIALIZER }`定义了结构类型*和*上述结构类型的类型的变量`shared`。该部分`= { PTHREAD_MUTEX_INITIALIZER }`然后初始化这个变量，它的第一个组件是`PTHREAD_MUTEX_INITIALIZER`，其余的都是零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T01:43:39.230

这是一个宏，更多信息在这里：

[PTHREAD_MUTEX_INITIALIZER 宏](http://pic.dhe.ibm.com/infocenter/aix/v7r1/index.jsp?topic=/com.ibm.aix.basetechref/doc/basetrf1/PTHREAD_MUTEX_INITIALIZER.htm)

它用于将具有属性的互斥锁初始化为默认值。

# solr - 用于复杂查询性能优化的 Solr 分片

> ID：14227050
> 
> 赞同：0
> 
> 时间：2013-01-09T01:42:20.730
> 
> 标签：solr, sharding, lucene, solrcloud

对于高负载站点，我有大约 100 万个文档的相对较小的索引。我正在对它运行相对复杂的函数查询，性能是不可接受的。所以我对将当前的主+从拓扑移动到具有至少 3 个分片和 n 个副本的 SolrCloud 犹豫不决，因此所有函数查询都将分布在分片上，响应时间应该至少小 3 倍加上合并结果集的占用空间小（是是真的？）。所以我的问题是值得分片（并增加复杂性）来解决性能问题而不是索引大小问题（分片索引的最常见原因）。

# asp.net-mvc - 具有多种 ajax 形式的 AntiForgeryToken

> ID：14227058
> 
> 赞同：0
> 
> 时间：2013-01-09T01:43:20.820
> 
> 标签：asp.net-mvc

我有一个 MVC4 页面，允许登录用户更新各种配置文件元素（用户名、密码、cc#）。我想使用 AntiForgeryToken，但是在提交任何给定的表单时只有页面的一部分被更新，为其他表单元素创建的令牌在使用其中一个后无效。我怎样才能使这项工作。

提交第二个表单时返回的错误是：

“提供的防伪令牌用于用户“xxxxxxxxx-0gf5izjl-”，但当前用户是“xxxx-EjRYaQ7asdfV@test.com”

谢谢

# google-app-engine - 谷歌应用引擎的 ndb 可以安全使用吗？

> ID：14227059
> 
> 赞同：0
> 
> 时间：2013-01-09T01:43:35.043
> 
> 标签：google-app-engine

它是否相当稳定，或者如果我使用它，我是否会冒着重写代码的风险，因为它将来可能会改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:52:21.313

它稳定且完全受支持。

[1.6.4 sdk 版本](http://googleappengine.blogspot.be/2012/03/app-engine-164-released.html)的片段

```
- NDB for Python - The NDB API has graduated from experimental and is now a fully
  supported feature. This next-generation datastore API improves data modeling 
  and querying and has been built from the ground up to support an asynchronous
  computing model. 
```

# android - 如何用 int 值填充 Spinner

> ID：14227066
> 
> 赞同：11
> 
> 时间：2013-01-09T01:44:00.130
> 
> 标签：android, int, android-spinner

当像过去那样正常填充 Spinner 时，我通常使用 SpinnerAdapter 然后通常在资源中有项目来填充它。

我目前有一个不同的查询，我在我的代码中有一个 int 的用户输入，我希望我的微调器填充用户选择的数字。因此，如果用户输入数字“5”，它将被保存到一个 int 变量中。然后我希望 Spinner 显示 1,2,3,4,5 作为选项。

我真的不确定我将如何处理这个问题。

谢谢，奥利

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-09T02:09:56.250

**已编辑**

以下是如何将整数添加到微调器的基本示例：

```
mspin=(Spinner) findViewById(R.id.spinner1);
Integer[] items = new Integer[]{1,2,3,4};
ArrayAdapter<Integer> adapter = new ArrayAdapter<Integer>(this,android.R.layout.simple_spinner_item, items);
mspin.setAdapter(adapter); 
```

您可以参考此内容并根据您的逻辑在项目中进行更改。同样在您的情况下，您应该使用整数的 ArrayList，因为用户的选择数量似乎是动态的。您可以在上面的代码中创建一个数组列表并替换 Integer 数组。

希望这可以帮助！！

# java - String Java 查找空格

> ID：14227067
> 
> 赞同：0
> 
> 时间：2013-01-09T01:44:15.820
> 
> 标签：java, string, linkedhashmap

我在一个字符串上有一个短语，我想将它拆分为其他 5 个或更多字符串而不带空格。例如：

```
String test = "hi/ please hepl meok?"; 
```

而且我要 ：

```
String temp1 = "hi/";
String temp2 = "please";
String temp3 = "help";
String temp4 = "meok?"; 
```

我不想将它添加到数组中，因为我想将 temp4 拆分为另外 3 个字符串。例如

->> 拆分后的 temp4：

```
temp4 = "me"
temp5 = "ok"
temp6 = "?" 
```

之所以问这个问题，是因为我想编写一个方法来解码带有一些解码器的 LinkedHashMap 集中的字符串短语。谢谢。如果我的方法不对，请指导我！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T01:47:25.230

> 我不想将它添加到数组中，因为我想将 temp4 拆分为另外 3 个字符串。例如

用 拆分字符串[`String#split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)，然后将结果数组的各个部分分配给您的各个变量：

```
String[] parts = theOriginalString.split(" ");
String temp1 = parts[0];
String temp2 = parts[1];
String temp3 = parts[2];
String temp4 = parts[3];
String temp5 = parts[4]; 
```

我发现让这些单独的命名变量的想法有点可疑，但我可以看到用例——例如，如果你要着手处理一堆有用的名称使代码更清晰的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T01:46:33.840

给定您的字符串， split() 将解决问题

```
String tokens[] = test.split(" "); 
```

然后，tokens [0] 将是`"hi/"`，tokens[1] 将是`"please"`等等。

编辑在使用 split 的任何情况下，您都将首先将字符串存储在数组中，如果您想单独循环它们，请使用 StringTokenizer。

```
 StringTokenizer st = new StringTokenizer(test);
 while (st.hasMoreTokens()) {
     System.out.println(st.nextToken());
 } 
```

# dos - 结合两个DOS窗口对话框，谁能帮助我？

> ID：14227074
> 
> 赞同：0
> 
> 时间：2013-01-09T01:45:50.553
> 
> 标签：dos

现在，我想在 windows 系统中运行 mongodb 和 acitivemq，但那会出现两个 DOS 窗口对话框。但是，我希望它们在单个dos窗口中运行，同时，我不想将它们作为系统的服务运行。谁能帮我？以下是我的bat文件：

启动 apache-activemq-5.6.0\bin\activemq.bat

启动 mongodb.bat

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-11T03:10:36.563

如果您正在寻找相当于后台运行的 linux/unix

```
programe & 
```

你可以试试：

```
START /B programe1
START /B programe2 
```

# java - 在java中的类之间共享更新数据的最佳方法

> ID：14227079
> 
> 赞同：1
> 
> 时间：2013-01-09T01:46:32.717
> 
> 标签：java, class, share

我正在做一个项目并且遇到了一个问题，我不知道在类之间共享更新数据的最佳方式。我这样做的当前方法是在其中包含我的类的静态实例，并让所有其他类更改实例而不是原始类。

```
public class A{
  public static volatile instance;
  public B b = new B();
  public C c = new C();
  public D d = new D();
  public A(){
  this.instance = this;
  b.changeData();
  }
}

public class B{
  public void changeData(){
  A.instance.d.changeSomethingInD();
  }
} 
```

现在，D 对其变量所做的所有更改都可以被 B 和 C 访问。有没有更好的方法来做到这一点？

编辑1：我遇到的问题是所有其他类都可以访问更新的变量。这是我之前在做的：

```
public class MainClass extends JavaPlugin{
  private RegionLoader rLoader;
  private ClassesLoader cLoader;
  private MessageHandler mHandler;
  private PlayerDates pDates;

  public MainClass(){

      dirMaker();

      mHandler = new MessageHandler(this);
      pDates = new PlayerDates(this);
      cLoader = new ClassesLoader(this);
      rLoader = new RegionLoader(this);

  }
//getters and setters
} 
```

但问题是，如果 RegionLoader 在自身内部发生了某些变化，ClassesLoader 将没有更新的变量，并且可以与旧的变量一起使用，还是会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:55:46.010

为什么不直接`A`传入`B`. 这样你就不需要使用静态数据了。

```
 public class A{

      public B b;
      public C c = new C();
      public D d = new D();

      public A(){
         b = new B(this);
         b.changeData();
      }
    }

    public class B{
      private A a;

      public B(A a){
         this.a = a;
      }
      public void changeData(){
         a.d.changeSomethingInD();
      }
    } 
```

您还可以检查观察者模式。

# c++ - C++ 字符串实例化与 strncpy/memcopy

> ID：14227081
> 
> 赞同：0
> 
> 时间：2013-01-09T01:46:44.203
> 
> 标签：c++, string, performance, char

我有一种情况，我需要从一个可能很大的 s 中解析很多小`std::string`s `std::string`（我正在使用 20M 进行压力测试`std::string`）。我跟踪`std::string`要解析的开头的索引，当我到达结尾时，`std::string`我会做一个`substr`大的`std::string`. 然后，我将这些`std::string`已解析出来的 s 用作 a 的键`std::map`。

我希望通过切换到`char*`. 我收集到我需要做的是维护指向要解析出的字符串开头的指针，在解析字符串时计算字符串的长度，然后实例化一个`char*`保存解析出的字符串长度的新字符串。然后我`strncpy/memcpy`把字符串改成新的`char*`。当我使用这个 new`char*`作为 a 的键时，`std::map`我必须提供一个比较函子来运行 a `strcmp`。

我现在拥有的东西的方式，平均总共需要 290 毫秒来解析字符串而不插入`std::map`（插入总共需要 450 毫秒）。切换`char*`会给我显着（50 ms+）更好的结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:52:32.303

首先，没有人不尝试就知道真正的答案，所以你不妨自己尝试一下。但其次，我们可以做出有根据的猜测：可能不会；无论如何，这一切`std::string`都是在内部进行的。

您应该做的是创建一个表示现有字符串中的范围的类（即存储一对迭代器），并将该类用作地图的索引。这样你就可以避免分配一堆小字符串，这几乎肯定是你的大部分性能影响的来源，至少在加载期间是这样。然后，您只需将源字符串保存在内存中，以便迭代器仍然有效。

您还可以考虑`unordered_map`是否主要执行查找（您可以缓存散列的结果，因为您现在正在使用不可变字符串），但再次知道这是否会更快的唯一方法是所有性能问题的相同方法:*测试和数据*。

# python - 使用 Gmail OAuth2 和 SMTP (Python) 发送电子邮件

> ID：14227082
> 
> 赞同：1
> 
> 时间：2013-01-09T01:47:03.003
> 
> 标签：python, oauth, smtp, gmail, google-api

我正在开发一个允许用户使用 Gmail 进行身份验证并发送电子邮件的应用程序。

这是需要发生的事情：

*   用户使用 OAuth2 进行身份验证
*   获取用户的电子邮件地址（或任何其他持久唯一标识符）并用于将用户登录到应用程序
*   用户可以使用 SMTP 撰写和发送电子邮件

但是，我遇到了身份验证问题。我正在使用的函数是 OAuth2WebServerFlow()：

```
flow = OAuth2WebServerFlow(client_id=GOOGLE_CLIENT_ID,
                           client_secret=GOOGLE_CLIENT_SECRET,
                           scope=scope,
                           redirect_uri=base_app_url + '/oauth2callback') 
```

这在*scope='https://mail.google.com/* ' 时效果很好，但问题是我无法获取用户的电子邮件地址，因为用户没有授予该权限（如[https://developers所示.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)）。结果，我不得不硬编码自己的电子邮件地址才能使其正常工作。

另一方面，当*scope='https://mail.google.com/,https://www.googleapis.com/auth/userinfo.email'*时，我可以使用以下内容获取用户的电子邮件地址：

```
r = requests.get('https://www.googleapis.com/oauth2/v2/userinfo',
                 headers={'Authorization': 'OAuth ' + access_token}) 
```

然而，这种情况下的问题是，当我去发送电子邮件时，用于创建身份验证字符串的 access_token 不被接受，这给了我以下错误（我认为这是一个不合适的错误）：

```
SMTPSenderRefused: (535,
                    '5.7.1 Username and Password not accepted. Learn more at\n5.7.1 http://support.google.com/mail/bin/answer.py?answer=14257 cv19sm54718503vdb.5',
                    u'<MY_NAME@MY_GOOGLE_APP_DOMAIN.COM>') 
```

这是我发送电子邮件的代码：

```
def send_email(user_address, access_token, recipient_address, subject, body):
    xoauth2_string = 'user=%s\1auth=Bearer %s\1\1' % (user_address, access_token)
    url = "https://mail.google.com/mail/b/" + user_address + "/smtp/"

    conn = smtplib.SMTP('smtp.gmail.com', 587)
    conn.set_debuglevel(True)
    conn.ehlo()
    conn.starttls()
    conn.ehlo()
    conn.docmd('AUTH', 'XOAUTH2 ' + base64.b64encode(xoauth2_string))

    header = 'To:' + recipient_address + '\n'
    header += 'From:' + user_address + '\n'
    header += 'Subject:' + subject + ' \n'
    header += 'Content-Type: text/html; charset=UTF-8\n' 
    msg = header + '\n ' + body + ' \n\n'

    conn.sendmail(user_address, recipient_address, msg) 
```

基本上我想知道是否：

1.  我可以使用 scope='https://mail.google.com/' 获取用户的电子邮件或其他一些持久的唯一标识符。
2.  有一种方法可以使 SMTP 与 scope='https://mail.google.com/,https://www.googleapis.com/auth/userinfo.email' 一起工作。

为什么我的身份验证字符串被拒绝？有什么我想念的吗？请求多个权限时google api有问题吗？

# ruby-on-rails - 我需要将控制器中的哪些参数传递给安装了 Carrierwave 的模型？

> ID：14227086
> 
> 赞同：8
> 
> 时间：2013-01-09T01:47:25.920
> 
> 标签：ruby-on-rails, rspec, carrierwave

我有一个带有图像属性的 Artwork 模型，其中安装了 Carrierwave。在编写控制器规范时，我意识到图像字段保持空白，即使我认为我正在传递一个文件对象。

我的调试信息告诉我，问题出在我安装了 CarrierWave 的图像属性上，而不是其他问题。我认为我没有传递它需要的信息，但我不知道该尝试什么。

这是控制器操作，带有一些调试信息来识别问题：

```
def create
    @artwork = @imageable.artworks.new(params[:artwork])
    logger.debug "Artwork should be valid: #{@artwork.valid?}"
    logger.debug "Errors: #{@artwork.errors.full_messages}"
    if @artwork.save
        flash[:success] = "Artwork created."
        redirect_to [@imageable, :artworks]
    else
        flash[:error] = "Artwork not created."
        render :new
    end
end 
```

在运行我的规范后，我在测试日志中看到了这一点：

```
Processing by ArtworksController#create as HTML
  Parameters: {"artwork"=>{"image"=>"#<File:0x4515480>", "title"=>"Portrait","year"=>"2012", "surface_type"=>"canvas", "size"=>"10 x 10", "price"=>"100.0", "for_sale"=>false, "prints_available"=>false, "notes"=>"extra notes"}, "file"=>"#<File:0x46c6938>", "originals_gallery_id"=>"1"}
[1m[36mOriginalsGallery Load (0.0ms)[0m  [1mSELECT "originals_galleries".* FROM   "originals_galleries" WHERE "originals_galleries"."id" = ? LIMIT 1[0m  [["id", "1"]]
Artwork should be valid: false
Errors: ["Image can't be blank"] 
```

请问有什么想法吗？是否有我忘记设置的控制器参数？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-09T20:40:47.977

我的问题是一个更普遍的问题：在我的测试期间（使用 Rspec 和 FactoryGirl），我将错误类型的文件对象传递给控制器​​操作。这是我为图像属性定义的对象：

```
FactoryGirl.define do
  factory :artwork do
    image { File.open(File.join(Rails.root, 'spec', 'support', 'sample.gif')) }
    ...other attributes omitted
  end
end 
```

[以上是 Carrierwave 文档为 FactoryGirl 测试夹具推荐的设置。](https://github.com/jnicklas/carrierwave/wiki/How-to:-Use-test-fixtures)它适用于测试模型和大多数控制器动作，但不适用于创建动作。

我的测试日志告诉我，我的图像属性是空白的，尽管传入了这个 File 对象。经过一番搜索，我发现您可以传入 Rack::Test::UploadedFile 的实例（我认为 ActionDispatch::Http::UploadedFile 是通过浏览器提交的内容（？））。

因此，我没有在工厂中将`image`属性设置为，而是将其设置为. 我的控制器规格已通过，文件上传已保存到数据库中。`File.open(...)``Rack::Test::UploadedFile.new(Rails.root.join("spec/support/sample.gif"))`

我认为这有助于解释为什么很多人在浏览器中见证了成功的文件上传，但在他们的测试或验证中却没有。

[这篇关于在 Rails 3 中测试文件附件的帖子确实很有帮助](https://stackoverflow.com/questions/3966263/attachment-fu-testing-in-rails-3)。

# java - 对现有数据库使用 Hibernate

> ID：14227098
> 
> 赞同：12
> 
> 时间：2013-01-09T01:48:45.593
> 
> 标签：java, spring, hibernate

我们有一个已经运行了很长时间的应用程序。现在我们将它迁移到 Spring 并可能使用 Hibernate 或任何其他 ORM。

但是我们遇到了一个问题。对已经存在的数据库使用 Hibernate 并围绕 Schema 对对象进行建模是不推荐/坏主意吗？

大多数人主张不要使用 Hibernate，而不是使用其他一些 ORM，例如 iBatis。但是在我们公司，所有人都是Hibernate的支持者。

有什么经验吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T01:55:26.760

我会说在不了解您的要求的情况下选择 Hibernate、iBatis 或其他任何东西是不负责任的。

如果您没有实体对象模型，我会说 Hibernate 是一个糟糕的选择。

如果您使用存储过程作为数据库的接口，我会说 Hibernate 是一个糟糕的选择。

如果您不喜欢 Hibernate 为您生成的动态 SQL，我会说 Hibernate 是一个糟糕的选择。

得到它？像那些 Hibernate 支持者那样的下意识反应并不是一个好主意。

可能 iBatis 或 Spring JDBC 模板是比 Hibernate 更好的选择。您应该更加了解该决定并为您的应用程序做出决定，而不是盲目地听从暴民。

你也不必全神贯注或一无所有。可以使用一种技术实现部分解决方案，而用另一种技术实现其余部分。

我建议让你的持久层接口基于接口，这样你就可以在不影响客户端的情况下交换实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T00:42:54.513

我建议查看[SansORM](https://github.com/brettwooldridge/SansOrm "SansOrm")（NoORM 对象映射器）。它专为 SQL 优先开发而设计，非常适合改造现有模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T02:00:38.120

如果您可以在对象下对数据库进行建模，那么 Hibernate 可以很好地工作。
反之亦然，您很可能将数据库模型作为您的域模型。您需要评估这两个模型的距离，否则您将映射数据库 => ORM 对象 => 您的域模型。我会避免这种情况。

如果我想跳过 ORM 部分，我发现自己对[JDBI](http://www.jdbi.org/)非常满意，我更喜欢[Spring JDBC 模板](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/jdbc.html#jdbc-JdbcTemplate)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T02:46:14.827

正如其他人指出的那样，只有当您的数据库离对象模型不远时，ORM 才是一个不错的选择。

如果是这种情况，那么一个选项将是通过 JPA 休眠两个响应：

*   Netbeans 有一个从现有数据库生成 JPA 实体的工具。这些实体不依赖于 Netbeans，因此您可以在初始逆向工程之后使用不同的 IDE。

*   Spring Data JPA 可以避免编写琐碎的查询并专注于困难的查询。

# bash - 如何在不使用 find 或 grep -r 的情况下仅使用 bash grep 文件的内容？

> ID：14227099
> 
> 赞同：0
> 
> 时间：2013-01-09T01:48:50.770
> 
> 标签：bash, unix

我有一个任务要编写一个 bash 程序，如果我输入以下内容：

```
-bash-4.1$ ./sample.sh path regex keyword 
```

这将导致类似的结果：

```
path/sample.txt:12
path/sample.txt:34
path/dir/sample1.txt:56
path/dir/sample2.txt:78 
```

数字是搜索结果的行号。我完全不知道如何在 bash 中实现这一点，而不使用`find`or `grep -r`。我可以使用`grep`, `sed`, `awk`, ...</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:28:59.107

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:02:36.570

```
while read
do
  [[ $REPLY =~ foo ]] && echo $REPLY
done < file.txt 
```

# css - 缺少 Saas MakeFluidColumn mixin 的 Twitter Bootstrap - 尝试不将 span 硬编码到 HTML 中的类中

> ID：14227102
> 
> 赞同：0
> 
> 时间：2013-01-09T01:49:18.760
> 
> 标签：css, twitter-bootstrap, sass

我正在使用 Thomas Macdonald 的 sass 版本的 bootstrap (bootstrap-sass)

我试图不在我的 html 中嵌入 Bootstrap 类（即 span7 或 span10），如此处所述。
[http://ruby.bvision.com/blog/please-stop-embedding-bootstrap-classes-in-your-html](http://ruby.bvision.com/blog/please-stop-embedding-bootstrap-classes-in-your-html)

在 bootstrap-sass 中，我知道的唯一可用于将“span7”类应用于我的 div 的 sass mixin 是`@include makeColumn(7);`

这适用于固定网格，但不适用于流体网格。我需要这些专栏流畅且响应迅速。
@Thomas Macdonald 回答了 StackOverflow 上的问题，他创建了一个名为 makeFluidColumn [How to use twitter bootstrap with bootstrap-sass in rails app？](https://stackoverflow.com/questions/9897728/how-to-use-twitter-bootstrap-with-bootstrap-sass-in-rails-app/9909626#9909626)

但它不再包含在最新的 mixin 文件中，正如这个 github 问题中提到的那样： [https ://github.com/thomas-mcdonald/bootstrap-sass/issues/191](https://github.com/thomas-mcdonald/bootstrap-sass/issues/191)

还有什么我需要做的吗？我需要能够将跨度更改为混合，因为我试图通过媒体查询根据视口大小更改 div 跨越的列数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:26:11.010

我最终推出了自己的@mixin。

所以不要使用引导程序的 @include makeColumn(i); 我可以执行 @include col(i) 将宽度为 i 的列应用于 div 或其他元素。只需包含此 SCSS 文件

```
 /*=VARIABLES - GRID
------------------------------------------------*/
$columns: $gridColumns; //from bootstrap/_variables.scss
$column-width: $gridColumnWidth; //from bootstrap/_variables.scss
$gutter-width: $gridGutterWidth; //from bootstrap/_variables.scss
$max-width: $columns * ($column-width + $gutter-width);

/*=VARIABLES - FONTS
------------------------------------------------*/
$font-base: $baseFontSize; //from bootstrap/_variables.scss
$font-base-line-height: $baseLineHeight; //from bootstrap/_variables.scss
$font-base-line-height-half: $font-base-line-height / 2;
$font-base-percentage: (($font-base / 16px) * 100) + 0%;

/*MIXINS
------------------------------------------------*/
@mixin col($n, $padding: 0px, $border: 0px, $container-width: $max-width) {
    float: left;
    margin-left: percentage($gutter-width / $container-width);
    width: percentage(($n * ($column-width + $gutter-width) - $gutter-width - ($padding * 2) - ($border * 2)) / $container-width);
    border-width: $border;
    padding: em($padding, $font-base) percentage($padding / $container-width);
}

/*FUNCTIONS
------------------------------------------------*/
@function em($target, $context: $font-base) {
    @if $target == 0 { @return 0 }
    @return $target / $context + 0em;
}

@function perc($width, $container-width: $max-width) {
    @return percentage($width / $container-width);
}

@function lh($amount: 1, $context: $font-base) {
    @return em($font-base-line-height * $amount, $context);
}

@function heading-line-height($size) {

    $line-height: $font-base-line-height;

    $match: false;
    @while $match != true {

        @if $size == $line-height {
            $match: true;
        } @else if  $size < $line-height {
            $match: true;
        } @else if $size > $line-height {
            $line-height: $line-height + $font-base-line-height;
        } @else {
            $match: true;
        }

    } 

    @return ($line-height / $size) + 0em;
} 
```

# sql - 需要有关 SQL 查询的建议以返回活动的策略记录

> ID：14227105
> 
> 赞同：1
> 
> 时间：2013-01-09T01:50:05.123
> 
> 标签：sql

我需要一些关于编写查询的建议和想法，该查询返回 12 个月内每月有效或活跃的政策计数。我可以轻松地为给定月份构建它（参见简化示例），但希望找到一种方法来避免使用 JOIN 语句，这样更有效。那里的条件是我正在努力的部分。

```
select 'January', count(*)
from policies
where effective_date < '1/1/2012'
and expiration_date > '2/1/2012' 
```

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:56:11.683

使用 GROUP BY 根据月份聚合策略

```
SELECT month, count(*) FROM policies WHERE effective_date < '1/1/2012' AND expiration_date > '1/1/2013' GROUP BY month; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:53:17.647

感谢那些花时间和兴趣解决我的问题的人。

我想出了一个可能尽可能高效的解决方案。我写了一个子选择语句来设置我需要报告的日期值（伪查询：

```
select add_months(trunc(sysdate),"month",-12) from dual
union
select add_months(trunc(sysdate),"month",-11) .. 
```

等等），然后将其作为独立表添加到我的主查询中，该查询使用`WHERE`条件中的这些日期和`GROUP BY`. 像冠军一样工作。

再次感谢所有回复并帮助我进行一些不同思考过程的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T02:08:03.330

```
select 
datename(m,p.effective_date) as mymonth,

count(*)
from policies p

where effective_date BETWEEN '1 jan 2012' AND '31 dec 2012'
and  expiration_date BETWEEN '1 jan 2012' AND '31 dec 2012'

group by datename(m,p.effective_date) 
```

# java - 在 Apache POI 中创建单元格时出现空指针异常

> ID：14227108
> 
> 赞同：1
> 
> 时间：2013-01-09T01:50:27.743
> 
> 标签：java, apache-poi

每次运行我的代码（如下）时，我都会收到一个空指针错误，它指向用两个星号指定的行。

```
public void writeSomething(XSSFWorkbook wb){
        for (String elem: listOfSheetNames){
            if (elem.equals("Sheet2")){
                sheet = wb.getSheet(elem); //sheet is of type XSSFSheet
                XSSFRow row = sheet.getRow(0);
                **XSSFCell cell = row.getCell(1);

                if (cell == null){
                    cell = row.createCell(1);
                    cell.setCellType(Cell.CELL_TYPE_STRING);
                    cell.setCellValue("Apple");
                }                                       
            }
        }
    } 
```

我是 apache poi 的新手，我只是想将数据写入第二张 excel 表（Sheet2）中的空白单元格。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T02:22:08.353

不幸的是，该单元格当前`null`不是空白单元格。将数据放在指定的工作表上会使其空白。您可能要先创建单元格，然后检查它是否是`blank`单元格而不是`null`.

```
**XSSFCell cell = row.createCell(1);

if (cell == Cell.CELL_TYPE_BLANK){
   cell.setCellType(Cell.CELL_TYPE_STRING);
   cell.setCellValue("Apple");
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-18T17:36:56.347

这将导致不兼容的类型。

而是这样做：

```
if (cell.getCellType() == Cell.CELL_TYPE_BLANK){
    cell.setCellType(Cell.CELL_TYPE_STRING);
    cell.setCellValue("Apple");
} 
```

# sitecore - Sitecore - 营销人员 Web 表单 - 使用 ReadQueryString 选项

> ID：14227109
> 
> 赞同：2
> 
> 时间：2013-01-09T01:50:40.287
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers

将 WFFM 表单添加到 Sitecore 项目后，您可以转到演示详细信息并单击表单。在那里你会看到一个名为`ReadQueryString - Reads initial values from the url query string.`

我的表单有几个字段，其中之一是`Email`. 我尝试添加`?Email=test`到托管此表单的页面的 URL，但未获取该值。我是否正确理解了此选项的预期目的？我是否正确使用它？

Sitecore 6.5 版；面向营销人员的 Web 表单 2.3 版

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T09:41:44.873

您正确理解了目的，当检查该选项时，从查询串起读取表单的初始值。我在我的项目中使用了它，它工作正常。

确保您在查询字符串中使用字段的**项目名称**，而不是显示名称或标题。还要仔细检查您是否在检查`ReadQueryString`选项后发布了该项目。

# css - CSS边框半径方向

> ID：14227110
> 
> 赞同：3
> 
> 时间：2013-01-09T01:50:49.490
> 
> 标签：css

我要求制作这些菜单项：

顶部菜单：
![在此处输入图像描述](../Images/89fe727898fec71fc3ad38ee912024f3.png)

侧边菜单：
![在此处输入图像描述](../Images/dcfde6017dcce95f1a5d4b6ecd842af1.png)

我从 a 开始`border-radius`，但我不知道如何使另一侧成为“外半径”，我相信顶部和底部菜单主要是相同的想法，我只需要玩尺寸和方向.

我很快就会分享一个我正在开发的版本的 jsFiddle，目前我还没有设法做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:59:48.960

本质上，您想使用`:before`和`:after`选择器在您想要的角落创建一个带有边框半径的小框。

网上有很多例子，这里举几个：

*   [使用 CSS 和 CSS3 制作外边框半径](http://csstube.ajmlab.com/tutorials/css-snippets/making-outer-border-radius-css)
*   [CSS3 - 具有内半径和外半径的标签 - 无图形](http://www.cssplay.co.uk/menu/css3-radius-tabs.html)- （免费供个人使用 - 非商业用途）
*   [带有 CSS 的喇叭形边框](http://orderedlist.com/blog/articles/flared-borders-with-css/)

# android - cocos2d-x的游戏，在android上从后台切换到前台，为什么精灵是黑色的

> ID：14227114
> 
> 赞同：2
> 
> 时间：2013-01-09T01:51:18.413
> 
> 标签：android, cocos2d-x

我有一个 cocos2d-x 的游戏编码，它在 iphone 上运行良好，但在 android 上有一些错误。我玩了一会儿游戏，然后按“主页”按钮让它暂停（更改为背景）。但是，当我再次启动游戏时，无法加载资源或资源加载不完整，并出现一些黑幕。有人可以帮我解决问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:03:53.723

当activity切换到后台时。不要清除纹理缓存。

更多详情： http: [//novacreo.com/%E7%A8%8B%E5%BA%8F%E7%BB%84/%E8%BF%94%E5%9B%9Eandroid%E6%B8%B8%E6 %88%8F%E9%BB%91%E5%B1%8F%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/](http://novacreo.com/%E7%A8%8B%E5%BA%8F%E7%BB%84/%E8%BF%94%E5%9B%9Eandroid%E6%B8%B8%E6%88%8F%E9%BB%91%E5%B1%8F%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/)

# flash - Flash 对象在重新设置父对象时停止

> ID：14227116
> 
> 赞同：0
> 
> 时间：2013-01-09T01:52:02.283
> 
> 标签：flash, dom, playback, reparenting

我必须从 Flash 对象下无缝地拉出文档。从 DOM 中临时删除对象会停止播放，这是可以理解的，但是，即使通过“原子”操作（`appendChild()`在不先删除对象的情况下调用预期的父对象）在树内移动它也会停止播放。

有什么方法可以在不停止对象的情况下替换文档？

# java - 在Java中将字符串转换为日期

> ID：14227119
> 
> 赞同：0
> 
> 时间：2013-01-09T01:52:26.513
> 
> 标签：java

我在Java中有以下字符串：

```
2011-12-21T20:27:32-08:00 
```

谁能告诉我如何通过将其转换为日期来存储此字符串？

我需要将它存储在声明为时间戳的 MySQL 列中。

我尝试了以下方法，但它不起作用：

```
Date date = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssz").parse("2011-12-21T20:27:32-08:00"); 
```

它给出以下错误：

```
Exception in thread "main" java.text.ParseException: Unparseable date: "2011-12-21T20:27:32-08:00" – 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:59:47.967

根据[文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)，`z`期望时区指示符的格式与您的字符串中的格式不同，但您可以改用`X`它，它支持它们。所以（更改在格式字符串的末尾）：

```
Date date = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssX").parse("2011-12-21T20:27:32-08:00"); 
```

从[文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)：

```
字母日期或时间组件演示示例
------ ------------ ----------- ----------------------------------
z 时区 一般时区 太平洋标准时间；太平洋标准时间; GMT-08:00
Z 时区 RFC 822 时区 -0800
X 时区 ISO 8601 时区 -08；-0800; -08:00
```

* * *

[Daniel Kaplan](https://stackoverflow.com/users/61624/daniel-kaplan)在评论中指出这`X`似乎是新的。根据您的环境，您可能需要稍微预处理字符串以删除冒号并改用`Z`(大写，而不是`z`; 上面列表中的第二个)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:08:34.787

你应该看看这个问题：[Java SimpleDateFormat for time zone with acol separator?](https://stackoverflow.com/questions/2375222/java-simpledateformat-for-time-zone-with-a-colon-seperator) . 第一个答案可能会有所帮助。

# wordpress - 您如何在 woocommerce 中为产品添加星级？

> ID：14227121
> 
> 赞同：9
> 
> 时间：2013-01-09T01:52:32.737
> 
> 标签：wordpress, e-commerce, rating, woocommerce

我有一家 woocommerce 商店，我想在您看到每个产品的缩略图时为其添加星级。我已经在大产品视图中添加了星标，但我希望它们显示在每个缩略图下方，就像大多数电子商务商店（如 woodland.com）一样。我知道我可以使用 css 从视图中禁用项目，但不能添加它们。有什么想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-12-27T03:44:28.053

实际上有一种更简洁的方法来处理这个问题。只需使用 Woocommerce 内置的内置功能：

```
add_action('woocommerce_after_shop_loop_item', 'get_star_rating' );
function get_star_rating()
{
    global $woocommerce, $product;
    $average = $product->get_average_rating();

    echo '<div class="star-rating"><span style="width:'.( ( $average / 5 ) * 100 ) . '%"><strong itemprop="ratingValue" class="rating">'.$average.'</strong> '.__( 'out of 5', 'woocommerce' ).'</span></div>';
} 
```

我已经确认这对我有用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-26T17:32:41.527

您可以将其放入您的主题 functions.php 文件中：

```
add_action('woocommerce_after_shop_loop_item', 'my_print_stars' );

function my_print_stars(){
    global $wpdb;
    global $post;
    $count = $wpdb->get_var("
    SELECT COUNT(meta_value) FROM $wpdb->commentmeta
    LEFT JOIN $wpdb->comments ON $wpdb->commentmeta.comment_id = $wpdb->comments.comment_ID
    WHERE meta_key = 'rating'
    AND comment_post_ID = $post->ID
    AND comment_approved = '1'
    AND meta_value > 0
");

$rating = $wpdb->get_var("
    SELECT SUM(meta_value) FROM $wpdb->commentmeta
    LEFT JOIN $wpdb->comments ON $wpdb->commentmeta.comment_id = $wpdb->comments.comment_ID
    WHERE meta_key = 'rating'
    AND comment_post_ID = $post->ID
    AND comment_approved = '1'
");

if ( $count > 0 ) {

    $average = number_format($rating / $count, 2);

    echo '<div class="starwrapper" itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">';

    echo '<span class="star-rating" title="'.sprintf(__('Rated %s out of 5', 'woocommerce'), $average).'"><span style="width:'.($average*16).'px"><span itemprop="ratingValue" class="rating">'.$average.'</span> </span></span>';

    echo '</div>';
    }

} 
```

请注意，您可能需要`woocommerce_after_shop_loop_item`根据您的设计以及您希望星星出现的确切位置更改为不同的钩子。

此页面列出了**WooCommerce**操作挂钩：[http](http://wcdocs.woothemes.com/codex/extending/hooks/) ://wcdocs.woothemes.com/codex/extending/hooks/ 。我没有看到任何与缩略图相关的挂钩，但您可以尝试`woocommerce_after_shop_loop_item_title`或`woocommerce_after_shop_loop_item`。

（这个函数本质上是从 WooCommerce 的 single-product-reviews.php 复制而来）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-14T15:17:54.863

从 WooCommerce 3.0+ 开始，这是正确的代码：

```
$product = wc_get_product( $id );
echo wc_get_rating_html( $product->get_average_rating() ); 
```

产品对象上的 get_rating_html() 方法已被弃用。

更多信息在这里：[https ://docs.woocommerce.com/wc-apidocs/function-wc_get_rating_html.html](https://docs.woocommerce.com/wc-apidocs/function-wc_get_rating_html.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-20T15:18:33.907

使用这些函数（或下面较短的函数，输出相同的 HTML），您可以管理以数字形式输出评分，完全重用 Woocommerce 的函数：

```
function get_star_rating() {
    global $woocommerce, $product;
    /*$average = $product->get_average_rating();*/
    echo $product->get_rating_html();
} 
```

然后，您需要对其进行样式设置以显示星星。对于 5 颗星中的 3 颗星的评分，Woothemes 会这样做（诀窍在于相应 CSS 的宽度和 :before）：

HTML（由 Woocommerce 输出）：

```
<div itemprop="reviewRating" itemscope="" itemtype="http://schema.org/Rating" class="star-rating" title="Rated 3 out of 5">
    <span style="width:60%"><strong itemprop="ratingValue">3</strong> out of 5</span>
</div> 
```

还有 CSS（这里可能有一些多余的行）：

```
#reviews .comment .star-rating {
    float: none;
    font-size: 1em;
    margin: 0;
    position: absolute;
    top: 2px;
    right: 20px;
}
.star-rating {
    overflow: hidden;
    height: 1em;
    line-height: 1em;
    width: 5.1em;
    font-family: "fontawesome";
}

.star-rating:before {
    content: "\f006\f006\f006\f006\f006";
    float: left;
    top: 0;
    left: 0;
    position: absolute;
    letter-spacing: 0.1em;
    letter-spacing: 0\9;
    color: #fbfeff;
}

.star-rating span {
    overflow: hidden;
    float: left;
    top: 0;
    left: 0;
    position: absolute;
    padding-top: 1.5em;
}

.star-rating span:before {
    content: "\f005\f005\f005\f005\f005";
    top: 0;
    position: absolute;
    left: 0;
    letter-spacing: 0.1em;
    letter-spacing: 0\9;
    color: #f36557;
}

.star-rating {
    line-height: 1em;
    font-size: 1em;
    font-family: "fontawesome";
} 
```

希望有帮助！

# qt - QT - 如何在两个小部件之间同步数据？

> ID：14227128
> 
> 赞同：0
> 
> 时间：2013-01-09T01:53:49.947
> 
> 标签：qt, widget, synchronize

我有一个 QT 程序，其中包含我正在实现的自定义小部件。这个小部件是一个 Hexeditor，它已经可以使用了。但是现在我想在窗口上放同一个Hexeditor的另一个实例，并且我想在它们之间同步数据，所以如果我在一个Hexeditor中更改一个字节，另一个Hexeditor上会自动更改相同的字节。

这个问题的最佳解决方案是什么？我有哪些选择？有时文件可能非常大，所以我试图找到最佳解决方案。

这是一个普遍的问题，可能对其他文本小部件有效。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:22:45.383

我会在 Qt 中使用非常好的 MVC 架构小部件。

由于十六进制编辑器通常布置为表格，因此我将使用`QAbstractTableModel`实际存储十六进制数据，然后`QTableView`显示数据。然后，您可以将任意数量的十六进制编辑器连接到同一模型，所有这些都将自动同步。您还必须修改 a`QStyledItemDelegate`以在视图中提供仅十六进制的编辑，但这真的很简单。

# nginx - 石墨 nginx 每秒请求数

> ID：14227129
> 
> 赞同：4
> 
> 时间：2013-01-09T01:53:56.517
> 
> 标签：nginx, graphite

有什么方法可以让 Graphite 绘制 req/s ？

当您从 nginx_status 检索 nginx 请求时，您正在向石墨发送一个绝对值，所以我在想是否有任何方法可以获得每秒的速率？

我的理解是这`derivative(series)`会给你请求/分钟，但我真的可以使用请求/秒。

干杯。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T02:28:59.150

我不确定这是否是正确的方法，但似乎这样做了

```
scaleToSeconds(derivative(stats.*.*.*.nginx.handles),1) 
```

有人看到这有什么问题吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:19:01.323

通过 Logster 运行您的 nginx 访问日志，这将处理数据并将几个有趣的指标（包括每秒请求数，如果您愿意的话）转发到 Graphite。

[https://github.com/etsy/logster](https://github.com/etsy/logster)

# twig - 树枝路径函数中的 urlencode

> ID：14227131
> 
> 赞同：0
> 
> 时间：2013-01-09T01:54:32.737
> 
> 标签：twig, symfony-2.0

我有这条路线：

```
_view_tag:
    pattern:  /topic/{tid}
    defaults: {_controller: "MyCoreBundle:ViewTag:index" } 
```

我想显示这样的网址：`example.com/topic/Web+development`。我用`href="topic/{{ topicname|url_encode() }}"`. 它是有效的，但它当然不是正确的方法，所以我改为`href="{{ path('_view_tag', {'tid': topicname|url_encode() } ) }}"`. 但它不是显示`example.com/topic/Web+development`，它显示`example.com/topic/Web%2Bdevelopment`。

我也试试这个：

```
{% set _tid = topicname|url_encode() %}
<a href="{{ path('_view_tag', {'tid': _tid } ) }}" ... 
```

但仍然无法正常工作

`example.com/topic/Web+development`我的问题是，如何使用树枝路径功能使其显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:11:31.473

该`path`函数会为您处理 url 编码。您的问题是您的空间被编码了两次：首先是 a `+`，然后是转换为`%2b`. 这将起作用：

```
path('_view_tag', { 'tid': topicname } ) 
```

# matlab - 如何使用 MATLAB 将字符串数组保存到文本文件中

> ID：14227132
> 
> 赞同：2
> 
> 时间：2013-01-09T01:55:15.153
> 
> 标签：matlab

我想根据保存在“x.txt”中的索引在文本文件“marine_forservers.txt”中搜索字符串，然后将这些字符串保存在输出文件中这是我尝试过的代码，但它不能将字符串保存到文件中可以有人帮我吗？？

```
search = importdata('marine_forservers.txt');
patterns=importdata('x.txt');
fid = fopen('outputI.txt','w');
for i=1:length(patterns)
    for j = 1:16709
        if(j==patterns(i))
         str= search(j);
         fprintf(fid, '%s\n', str);
   end
end
end
fclose(fid); 
```

我在 ==> suppI 中在 8 fprintf(fid, '%s\n', str);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:54:40.287

这个错误：

```
??? Error using ==> fprintf Function is not defined for 'cell' inputs. 
```

告诉你你需要知道的一切；str 不是字符数组 - 它是一个 MATLAB 单元：

[http://www.mathworks.com/help/matlab/ref/cell.html](http://www.mathworks.com/help/matlab/ref/cell.html)

这应该解决它：

```
fprintf(fid, '%s\n', str{1}); 
```

作为旁注，这就是为什么您应该始终在原始问题中包含错误消息文本...

# php - PHP - 基于正则表达式生成字符串

> ID：14227137
> 
> 赞同：4
> 
> 时间：2013-01-09T01:55:32.693
> 
> 标签：php

我想根据我拥有的正则表达式生成一个字符串。

这个功能的目的是当有人忘记他们的密码，并填写“电子邮件新密码”的表格时，我会生成一个随机密码，该密码将通过电子邮件发送给他们。这个新密码必须满足我的正则表达式的条件。

这是我的正则表达式：

```
'/.*^(?=.{6,})(?=.*[A-z])(?=.*[A-Z])(?=.*[0-9])(?=.*\W).*$/' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-30T20:46:49.293

你看过[`Hoa\Regex`图书馆](https://github.com/hoaproject/Regex)吗？它使用各向同性随机方法基于正则表达式生成字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T00:14:53.067

试试这个。无需混淆正则表达式：

```
function random_password( $length = 8 ) {
    $chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_-=+;:,.?";
    $password = substr( str_shuffle( $chars ), 0, $length );
    return $password;
} 
```

# linux - 如何使用 ESXi 5.1 运行/测试 VMware Perl SDK？

> ID：14227143
> 
> 赞同：1
> 
> 时间：2013-01-09T01:55:50.563
> 
> 标签：linux, perl, vmware, esxi, vsphere

有人知道针对`VMware ESXi 5.1`我家中的服务器运行 Perl 脚本的细节吗？我已经下载了以下内容并将软件包安装在`Ubuntu 12.04 LTS`机器上，但我不知道如何开始。

> VMware-vSphere-CLI-5.1.0-780721.x86_64.gz
> VMware-vSphere-Perl-SDK-5.1.0-780721.x86_64.gz
> VMware-vSphere-SDK-5.1.0-774886.zip

安装软件包时，我确保满足所有 Perl 模块依赖项。接下来我该怎么做？例如，我如何在 Perl 中查询运行在 ESXi 服务器上的虚拟机列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T02:11:02.667

检查以下代码以获取 VM 名称：

```
#!/usr/bin/perl -w
use strict;
use VMware::VIRuntime;

my %opts = (
               datacenter => {
                        type        => "=s",
                        help        => "Enter the Dacenter Name",
                        required    => 1,
                    },
            );

Opts::add_options(%opts);
Opts::parse();
Opts::validate();
Util::connect();

my $dc = Opts::get_option("datacenter");
my $datacenter = Vim::find_entity_view ( view_type      => "Datacenter",
                                         properties     => [ "name" ],
                                         filter         => { name => $dc },
                                    );

my $vms = Vim::find_entity_views ( view_type       => "VirtualMachine",
                                   properties      => [ "name" ],
                                   begin_entity    => $datacenter,
                                );

foreach my $vm ( @$vms )
{
    print $vm->name."\n";
}
Util::disconnect(); 
```

运行上面的脚本如下：

```
perl vm_list.pl  --server <vCenter_server_name> --datacenter <Datacenter_name> 
```

当然，除非您阅读 vSphere perl SDK 文档，否则上述代码对您没有任何意义。请参阅以下链接以帮助您入门：

解释 vpshere 对象的示例代码：http: [//www.vmware.com/support/developer/viperltoolkit/doc/perl_toolkit_guide_idx.html](http://www.vmware.com/support/developer/viperltoolkit/doc/perl_toolkit_guide_idx.html)

API 参考指南：[http ://pubs.vmware.com/vsphere-50/index.jsp?topic=%2Fcom.vmware.wssdk.apiref.doc_50%2Fright-pane.html](http://pubs.vmware.com/vsphere-50/index.jsp?topic=/com.vmware.wssdk.apiref.doc_50/right-pane.html)

客户端对象：[http ://pubs.vmware.com/vi301/admin/wwhelp/wwhimpl/common/html/wwhelp.htm?context=admin&file=BSA_Inventory.9.2.html](http://pubs.vmware.com/vi301/admin/wwhelp/wwhimpl/common/html/wwhelp.htm?context=admin&file=BSA_Inventory.9.2.html)

通用 API 文档： http: [//www.vmware.com/support/developer/viperltoolkit/](http://www.vmware.com/support/developer/viperltoolkit/)

和[www.google.com](http://www.google.com)

# asp.net - Gravatar 会减慢您的网站速度吗？

> ID：14227144
> 
> 赞同：1
> 
> 时间：2013-01-09T01:55:51.667
> 
> 标签：asp.net, html, gravatar

最初我想使用 C# Identicon 处理程序，但它存在“参数无效”错误。

我很好奇使用 Gravatar 是否会大大降低您的网站速度？Stackoverflow 似乎很好用。

IE 是否阻止了您网站的加载，或者图像请求是否只是在后台异步处理？

有没有人因为使用 Gravatar 有过任何其他负面影响，比如 Google 给你差评？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:02:56.320

Gravatar 不涉及任何重要的服务器端处理。生成的图像 URL 与其他 URL 一样，实际上可能比您自己服务器上的图像加载速度更快（因为它们来自不同的主机并且将并行加载）

所以不，它不会以任何意想不到的方式减慢您的网站速度。

编辑：有关每个主机名的并行请求，请参阅[此问题。](https://stackoverflow.com/questions/9753898/is-the-web-browser-performance-rule-only-2-requests-in-parallel-per-hostname-s)

# html - 如何在设置为显示表格单元格的 div 之间添加边距？

> ID：14227148
> 
> 赞同：2
> 
> 时间：2013-01-09T01:56:19.233
> 
> 标签：html, css

我设置了一个父 div 来显示：table 及其各自的三个子 div 来显示：inline-cell。这三个子 div 是水平堆叠的，我在三个子 div 上设置了三个像素的边框。我将如何在子 div 之间添加边距，以便将空间放在边框的外侧而不是内侧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T02:45:56.063

您的 css 无效：“display: inline-cell”不是有效的 css 声明。您将需要改用“显示：表格单元格”。如果您希望它们彼此堆叠，也可以这样做，您需要将每个“表格单元格”包装成一个“表格行”。

HTML

```
<div class="table">
    <div class="tableRow">
      <div class="tableCell">Cell 1</div>
    </div>
    <div class="tableRow">
      <div class="tableCell">Cell 2</div>
    </div>
    <div class="tableRow">
      <div class="tableCell">Cell 3</div>
    </div> 
</div> 
```

CSS

```
.table{
border: 2px solid #999;
display: table;
border-spacing: 15px;
}
.tableRow{
    display: table-row;
}
.tableCell{
    border: 3px solid #333;
    border-collapse: separate;
    display: table-cell;
    border-collapse: separate;    
} 
```

# javascript - 如何在 javascript 幻灯片加载之前停止我的图像加载？

> ID：14227149
> 
> 赞同：1
> 
> 时间：2013-01-09T01:56:29.453
> 
> 标签：javascript, image, rotation, slideshow

我是新手，有一个快速的问题。我的主页上有一个非常简单的幻灯片。我遇到的问题是加载页面的第一秒左右，幻灯片图像显示在另一个之上。一旦加载页面的第一秒左右结束，一切正常。这是我的javascript代码：

```
<script type="text/javascript" language="javascript">
        window.onload = function () {
            var rotator = document.getElementById("slideshow_content");
            var images = rotator.getElementsByTagName("img");
            for (var i = 1; i < images.length; i++) {
                images[i].style.display = "none";
            }
            var counter = 1;
            setInterval(function () {
                for (var i = 0; i < images.length; i++) {
                    images[i].style.display = "none";
                }
                images[counter].style.display = "block";
                counter++;
                if (counter == images.length) {
                    counter = 0;
                }
            }, 3000);
        };
    </script> 
```

这是正文代码：

```
<div id="slideshow">
<div id="slideshow_content" style="padding-top:10px; padding-bottom:10px;">
        <img alt="" src="/images/slide1.jpg" />
        <img alt="" src="/images/slide2.jpg" />
</div>
</div> 
```

这是 2 个 div 的 CSS：

```
#slideshow {position:relative; top:0; left:0; max-width:1680px; height:342px; margin:0     auto; padding:0; background-color:#070707;}
#slideshow_content {width:960px; max-height:322px; margin:0 auto; padding:0;} 
```

你会如何建议解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:01:11.340

我会设置 CSS 以在页面加载时隐藏幻灯片，然后当幻灯片开始时它可以被取消隐藏。

这也意味着如果有人禁用了 javascript，他们就不会得到一堆看起来很奇怪的图像。

或者，您可以使用 CSS 隐藏除第一张图片之外的所有图片，这样即使有人禁用了 javascript，他们也会看到第一张图片。

# java - Android & PhoneGap -- 在 NPObject 上调用方法时出错

> ID：14227152
> 
> 赞同：4
> 
> 时间：2013-01-09T01:56:52.663
> 
> 标签：java, android, cordova

我正在尝试`FLAG_SHOW_WHEN_LOCKED`在我的 phonegap 应用程序中进行设置，但仅在显示某个页面时。为此，我有一个 Java 插件扩展自方法`CordovaPlugin`中的以下代码`execute`：

```
if (action.equals("showWhenLocked")) {
    boolean showWhenLocked = args.getBoolean(0);

    if (showWhenLocked) {
        this.cordova.getActivity().getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
    } else {
        this.cordova.getActivity().getWindow().clearFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
    }

    callbackContext.success();
    return true;
} 
```

它被调用`cordova.exec(null, null, 'MyPluginClass', 'showWhenLocked', [myVar])`，但在执行时我得到了错误

```
Uncaught Error: Error calling method on NPObject. at file:///android_asset/www/cordova-2.2.0.js:984 
```

任何想法是什么导致了这个/我做错了什么以及如何解决它？如果我在创建活动时设置标志，它就可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:51:47.733

我已经发现这种错误可能是由需要不可用线程的调用引起的。你的使用`getWindow()`告诉我，这更有可能。您很可能正在访问被另一个线程（如 UI 线程）锁定的信息。查看有关 UI 线程中的线程部分中的 cordova[文档。](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:50:43.110

使用：

```
callbackContext.success(); 
```

将显式调用成功回调，但在您的情况下，成功回调为空，这就是您收到错误的原因。

尝试使用：

```
callbackContext.sendPluginResult(new PluginResult(PluginResult.Status.OK)); 
```

这样 exec 调用会返回，但 JS 会在尝试调用它之前检查是否有成功回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T09:47:10.170

将**android-support-v4.jar**添加到项目构建路径并检查它在构建路径的**顺序和导出（选项卡）**中的条目对我有用。- 谢谢，Prodeveloper

# vim - 将空格压缩到单个空格/连接行

> ID：14227153
> 
> 赞同：1
> 
> 时间：2013-01-09T01:56:59.687
> 
> 标签：vim, vi

假设我复制并粘贴此代码：

```
foo(a,
    b,
    c)
{
    do something;
} 
```

我希望它看起来像这样：

```
foo(a, b, c) {
    do something;
} 
```

为此，我需要将包括换行符在内的连续空格减少为单个空格字符。我怎样才能有效地做到这一点？

* * *

到目前为止，我最好的解决方案是选择下一行的第一个字符（我想“提出”的那个）并且：

`h``v``b``l``c``space``esc`

如果您可以提供一种将下一行向上移动的方法以及一种将当前行向上移动的方法，则可以获得奖励积分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T01:58:11.100

`J`, 表示“加入线”。在您的情况下，`4J`您的第一行会将第一个片段转换为第二个片段。

# html - Twitter Bootstrap - 2 列布局

> ID：14227154
> 
> 赞同：3
> 
> 时间：2013-01-09T01:57:13.543
> 
> 标签：html, css, twitter-bootstrap

如何使用 Twitter Bootstrap 进行 2 列布局？我使用这个方案：

```
<div class="container">         
  <div class="row">
    <div class="span2"> 
      Red rectangle
    </div>
    <div class="span6">
      Blue rectangle
    </div>
    <div class="span6">
      Blue rectangle
    </div>
    <div class="span6">
      Blue rectangle
    </div>
    <div class="span6">
      Blue rectangle
    </div>
  </div>
</div> 
```

生成此布局： ![在此处输入图像描述](../Images/b4bac95fe844ded0ec5ddb2ecf5cc91d.png)

我想让蓝色矩形总是“在右边”，而不是左边。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T02:21:07.350

您可能需要查看[脚手架文档](http://twitter.github.com/bootstrap/scaffolding.html)。听起来更像是您希望将行嵌套在右侧列中。

```
<div class="container">         
  <div class="row">

    <div class="span2"> 
      Red Rectangle
    </div>

    <div class="span6">
      <div class="row">
        <div class="span6">
          Blue Rectangle
        </div>
      </div>
      <div class="row">
        <div class="span6">
          Blue Rectangle
        </div>
      </div>
      <div class="row">
        <div class="span6">
          Blue Rectangle
        </div>
      </div>
      <div class="row">
        <div class="span6">
          Blue Rectangle
        </div>
      </div>
    </div>

  </div>
</div> 
```

实际上可能没有必要将每个蓝色矩形包装在“行” div 中，它们应该使用 span6 堆叠。但是这样更干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T02:12:26.633

你想使用这个`.offset*`类。在上述情况下，您需要使用`.offset6`使矩形浮动到最右边。

看`offsetting columns`这里：

[http://twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

# c++ - 在 Qt 中动态创建/销毁自定义小部件

> ID：14227155
> 
> 赞同：2
> 
> 时间：2013-01-09T01:57:23.417
> 
> 标签：c++, qt

我刚开始使用Qt。我想制作一个带有自定义小部件的 GUI，可用于显示/编辑我的自定义数据类型。我还希望能够动态地创建/销毁这些小部件（而不破坏底层数据）。

我试图通过`dataContainer`在主 Window 类中存储我的数据项列表`dataContainer`（`customWidget`然后`customWidget`可以通过这个指针改变底层数据。

下面的代码允许用户重复地将`dataContainer`实例添加到列表中并编辑它们的每个“名称”。当我运行它时，只要我不实际编辑名称，一切都会正常工作，但如果我编辑名称然后单击“添加”按钮，则会出现段错误。此段错误发生在`customWidget`during `delete myWidget;`in的析构函数期间`Window::add()`。

两个问题：

1.  为什么这段代码会崩溃？我不允许像这样动态创建/销毁小部件吗？
2.  有没有更合适的方法来做到这一点？

如果我在这里遗漏了一些基本的东西，我深表歉意，但是我一直在上下很多论坛和教程，但没有发现任何有用的东西。

**主文件**

```
#include <QApplication>
#include "window.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    Window mainWindow;
    mainWindow.show();
    return app.exec();
} 
```

**窗口.h**

```
#ifndef WINDOW_H
#define WINDOW_H

#include <QWidget>
#include "customwidget.h"

class Window : public QWidget {
  Q_OBJECT
  public:
    Window();

  public slots:    
    void add();    

private:

  // the main data structure
  QList<dataContainer> dataList;

  // the widget that displays the custom data
  customWidget *myWidget;     

  QVBoxLayout *mainLayout;
  QPushButton *addButton;

};

#endif 
```

**窗口.cpp**

```
#include <QtGui>
#include "window.h"

Window::Window(){

  // start with a single piece of data in the list
  dataContainer newData;
  dataList.append(newData);

  // create layout container
  mainLayout = new QVBoxLayout(this);
  mainLayout->setAlignment(Qt::AlignTop);

  // make the Add button, and connect its clicked() SIGNAL
  // to our add() SLOT
  addButton=new QPushButton(tr("Add"),this);
  connect(addButton,SIGNAL(clicked()),this,SLOT(add()));
  mainLayout->addWidget(addButton);  

  // create a custom widget to display our data and
  // give it a pointer to the data it will display/modify
  myWidget = new customWidget(this,&(dataList.last()) );
  mainLayout->addWidget(myWidget);

  setLayout(mainLayout);   

}

void Window::add(){

  // create a new piece of data, and add to the list
  dataContainer newData;
  dataList.append(newData);

  // debug: show the current list
  qDebug() << "Data List(" << dataList.size() << ")";
  for (int i=0;i<dataList.size();i++){
    qDebug() << dataList[i].getName().c_str();
  }

  // delete the old widget
  delete myWidget;

  // and make a new widget with the new data
  myWidget = new customWidget(this,&(dataList.last()) );
  mainLayout->addWidget(myWidget);   

}
#include "window.moc" 
```

**自定义小部件.h**

```
#ifndef CUSTOMWIDGET_H
#define CUSTOMWIDGET_H

#include <QWidget>
#include <QtGui>
#include <string>

class dataContainer {
  private:

    std::string name;

  public:
    dataContainer(){name="oooh";};
    std::string getName()const{return name;};
    std::string setName(const std::string& n){name=n;};

};

class customWidget : public QWidget {
  Q_OBJECT

  private:
    dataContainer *data;

  public slots:
    void nameChangedSlot(const QString&);

  public:
    customWidget(QWidget *parent,  dataContainer *d);

};
#endif 
```

**customwidget.cpp**

```
#include "customwidget.h"

customWidget::customWidget(QWidget *parent,  dataContainer *d) : QWidget(parent) {

  // store a pointer to the data that we want to alter
  data = d;

  // create an edit box and initialize it with the data name
  QVBoxLayout *mainLayout=new QVBoxLayout(this);
  QLineEdit *edit=new QLineEdit(QString::fromStdString(data->getName()),this);
  mainLayout->addWidget(edit);

  connect(edit,SIGNAL(textChanged(const QString&)),this,SLOT(nameChangedSlot(const QString&)));

}

void customWidget::nameChangedSlot(const QString& name){

  // alter the contents of our data based on the changed string
  data->setName(name.toStdString());

}

#include "customwidget.moc" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:43:04.033

添加到布局的小部件不能直接删除。相反，您可以尝试以下代码，该代码从布局中删除特定小部件和相应的布局项：

```
QLayoutItem* item;
while ( ( item = mainLayout->takeAt( 0 ) ) != NULL )
{
    if(item->widget() == myWidget){
        delete item->widget();
        delete item;
    }
} 
```

# c++ - 如何定义 std::ostringstream 的上限，之后丢弃所有附加数据？

> ID：14227156
> 
> 赞同：0
> 
> 时间：2013-01-09T01:57:46.660
> 
> 标签：c++, stringstream

我有一些使用 a`std::ostringstream`作为临时缓冲区的现有代码。为了提高稳健性，我想定义缓冲区大小的上限（例如 16 KB）。当超出限制时，所有后续附加的数据都应该被静默丢弃。理想情况下，在记录警告之后。

最简单的方法是什么？`std::ofstream`似乎没有获得其当前大小的有效方法。我只能想到`my_stream.str().size()`，这似乎效率很低。

当然，我可以通过保留一个额外的计数器来手动跟踪插入字符的数量，但也许我缺少一个优雅的替代方案。我看到它有一个可以替换`ofstringstream`的内部缓冲区（ ）。`rdbuf()`

使用它来解决我的问题是否可能（并且实用）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T02:01:09.687

一种可能的解决方案是将[stringbuf](http://www.cplusplus.com/reference/sstream/stringbuf/)扩展到您自己的类中并在`ofstringstream`. 那么实现你的最大限制应该是微不足道的。看起来[`stringbuf::overflow`](http://www.cplusplus.com/reference/sstream/stringbuf/overflow/)是您要重载的功能。

或者，您可以将其包装`std::ostringstream`在另一个类中，该类`size`在写入之前进行检查。你如何断定这是低效的？只要不是每次调用都计算大小，它只是向下导航的问题。

编辑：在参考文献中遗漏了“复制”一词，但是是的，一旦你把它包起来，你就可以保留自己的计数器。

或者，您可以[`tellp`](http://www.cplusplus.com/reference/ostream/ostream/tellp/)尝试找出写入了多少个字符，只要它始终指向结尾即可。

> 返回值
> streampos 类型的整数值，包含输出序列开头和当前位置之间的字符数。

# google-app-engine - 如何从服务器端的模板访问 html 数组 (python) - Google App Engine

> ID：14227158
> 
> 赞同：1
> 
> 时间：2013-01-09T01:57:54.537
> 
> 标签：google-app-engine, python-2.7

对不起，如果这个问题是基本的，但我是初学者:(。

我在我的 html 模板中创建了一个数组（通过 javascript），用户可以为此输入输入多个值 --- 然后我如何从服务器端访问数组（python Google App Engine？）

这是我来自 html 模板 JS 的代码：

```
<script type="text/javascript">
    function addSchool() {
    var newContent = "<input type='text' name='institution[]'></input>";
           $("#providerList").append(newContent);}; 
```

HTML：

```
{% for s in list %}
    <div id="institution" name="institution[]">{{s}}</div>
{% endfor %}

<div id="onemore">
    <a href='javascript:addSchool()'>Add More Institutions as Providers</a>
</div> 
```

然后我的服务器端检索数组 - Google App Engine中的python： - （这是不工作的） - 只检索第一个：

```
mylist = self.request.get("institution[]") 
```

我在做什么错误的语法来检索数组？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:15:30.557

您必须创建可以提交的表单元素，例如输入或选择选项标签。或者您必须创建一个 json 字符串并将序列化的 json（javascript 对象）作为字符串发布。或者，您通过连接列表元素创建自己的字符串并将其用作帖子的有效负载。

例子 ：

```
<form action="/addschool" method="post"> 
    <input type="hidden" name ="more" value="school10,school11, school12" >
    <input class="button" type="submit" id="addschool" name="addschool" value="Add a school">
</form> 
```

现在你可以：

```
mylist = self.request.get("more").split(',') 
```

# sql-server - 动态游标不反映对基表的更新

> ID：14227159
> 
> 赞同：0
> 
> 时间：2013-01-09T01:58:00.230
> 
> 标签：sql-server, tsql

据我了解，使用游标`dynamic`将反映对基表所做的任何更改。为什么在以下示例中不会出现这种情况？

我用一个表变量和一个具有相同结果的实际表尝试了这个。如果循环开始后的行`@@fetch_status`未注释，我会得到我期望的结果。

```
declare @BalanceTable table
(
    LineId int not null identity(1, 1),
    Qty int not null,
    Price   money not null
)

insert into @BalanceTable (Qty, Price) values (3000, 1)
insert into @BalanceTable (Qty, Price) values (40, 2)
insert into @BalanceTable (Qty, Price) values (1, 1)
insert into @BalanceTable (Qty, Price) values (2000, 1)
insert into @BalanceTable (Qty, Price) values (4047, 2)
insert into @BalanceTable (Qty, Price) values (-3000, 1)
insert into @BalanceTable (Qty, Price) values (-38, 2)
insert into @BalanceTable (Qty, Price) values (3000, 1)

declare BalanceTable cursor
  dynamic for
    select LineId, Qty, Price
      from @BalanceTable
      order by LineId

declare @LineId int
declare @Qty int
declare @Price money

open BalanceTable

fetch next from BalanceTable into @LineId, @Qty, @Price

while @@fetch_status = 0
begin
    -- select @Qty = Qty, @Price = Price from @BalanceTable where LineId = @LineId

    declare @SearchLessZero bit
    set @SearchLessZero = case when @Qty > 0 then 1 else 0 end

    declare @OffsetLineId int
    declare @OffsetQty int
    set @OffsetLineId = -1

    while @Qty > 0 and @OffsetLineId is not null
    begin
        select @OffsetLineId = min(LineId)
          from @BalanceTable
          where LineId > @LineId and Price = @Price and 
            ((@SearchLessZero = 1 and Qty < 0) or (@SearchLessZero = 0 and Qty > 0))

        if @OffsetLineId is not null
        begin
            select @OffsetQty = Qty
              from @BalanceTable
              where LineId = @OffsetLineId

            if @Qty > -@OffsetQty
            begin
                set @Qty = @Qty + @OffsetQty
                set @OffsetQty = 0
            end
            else
            begin
                set @OffsetQty = @OffsetQty + @Qty
                set @Qty = 0
            end

            update @BalanceTable set Qty = @OffsetQty where LineId =     @OffsetLineId
        end
    end

    update @BalanceTable set Qty = @Qty where LineId = @LineId

    fetch next from BalanceTable into @LineId, @Qty, @Price
end

close BalanceTable
deallocate BalanceTable

select *
  from @BalanceTable
  order by LineId 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:27:53.633

动态游标中只允许很少的执行计划运算符。如果游标查询的执行计划包含不允许的运算符，则游标将转换为快照游标，因此看不到更新。

如果您查看光标的执行计划，您会发现发生了这种情况： ![不是动态游标](../Images/83604ac2ca187620b579965dda1cdef4.png)

查询中的问题运算符是排序。删除它，您将看到更新。

如果需要对数据进行排序，请向表中添加聚集索引，这样`ORDER BY`就不需要排序运算符。

# c++ - 碰撞检测和分类

> ID：14227163
> 
> 赞同：0
> 
> 时间：2013-01-09T01:58:19.967
> 
> 标签：c++, collision-detection, collision, sfml

我正在尝试为我的大学工作制作基于 2D 平台的游戏（在 SFML 中）。我不是要求任何人为我编写一些代码，但如果有人能提供一些指示，我将非常感激:)

目前我有大约 13 节课，包括：

BaseEntity（大多数游戏对象都由此派生）

玩家（继承自BE）

甲虫（继承自 BE - 游戏被称为“甲虫道奇”，因此会有移动的甲虫对玩家构成威胁）

宝石

MagicGem（玩家需要这些才能通过关卡）

平台

SolidBlock（从平台继承）

DownBlock（从 Platform 继承 - 玩家可以跌倒但不能跳过此块）

UpBlock（如上，反之亦然）

游戏之声

游戏（游戏管理员）

可以这么说，我已经构建了大部分游戏“积木”——每个类都有自己的更新函数，在 Game::Update 中调用。这同样适用于每个对象的 Draw() 函数。每个类都有一个指向游戏窗口的指针，因此它可以实现这些事情，并且它们还从 Game 传递了许多变量，例如当前按下的键以及经过的时间（用于移动计算）。

到这里为止一切看起来都很好而且很漂亮——然后我遇到了碰撞。虽然我了解它们的工作原理，但我尝试了两种或三种不同的方法来实现它们。起初我只是让 Player 类拥有一堆函数，例如 CollidesWith( Beetle& b ) 和 CollidesWith( Platform& plat )。显然，在对我关卡中的每个对象（当然包括宝石）进行测试时，这非常费力，我开始考虑如何实现广泛的相位碰撞检测。然后我尝试使用由 2 个 2DVectors（SFML 的内置类）定义的 AABB 类。这就是我有点卡住并决定来这里寻求帮助的地方。我回到纯粹使用精灵的大小来测试碰撞（因为它们是由一个盒子定义的 - 与 AABB 的一样，对吧？）但我

在我严重搞砸游戏的良好基础之前，任何人都可以就实现宽相位和窄相位碰撞检测的好方法提供一些友好的建议吗？我在一个阶段的工作非常好，然后我意识到玩家仍然可以通过平台的一侧移动，呵呵。

我应该为碰撞创建一个专用类吗？或者我应该继续使用每个对象的精灵的大小（每个对象都有自己的精灵和图像 - 实际上我将展示一个示例）：

```
class BaseEntity
{
public:
// Constructors
BaseEntity();
BaseEntity(sf::RenderWindow* gameWin, string imgPath, sf::Vector2f position = sf::Vector2f(0,0), sf::Vector2f velocity = sf::Vector2f(0,0));
virtual ~BaseEntity();
// Setters
void SetCurrentPos(sf::Vector2f newPos); // Set the current position 
void SetPreviousPos(sf::Vector2f newPrevPos); // Shouldn't be needed but there may be rare circumstances
void SetCurrentVel(sf::Vector2f newVel); // Set the velocity

// Getters
sf::Vector2f GetCurrentPos(); // Returns the current position values
sf::Vector2f GetPreviousPos(); // Returns the previous position values
sf::Vector2f GetCurrentVel(); // Returns the current velocity values 

void virtual SetSprite(string imgPath); // Set up the images for the sprite

void virtual Update(float elapsedTime); // The function that handles the updating of movement
void virtual Draw(); // The function that handles the 'Draw' aspect of this object

protected:

sf::RenderWindow* p_GameWin; // A pointer to the game window (used for drawing)
sf::Vector2f currentPos;
sf::Vector2f previousPos;
sf::Vector2f currentVel;
sf::Sprite mySprite; // This objects sprite
sf::Image myImage; // This objects image
}; 
```

播放器类继承自此并具有一些额外的功能，例如 CheckBoundaries、CollidesWith、Jump，并且还包含一些变量 - bool isColliding 可能在这种情况下感兴趣。

干杯伙计们，对这篇文章感到抱歉！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-26T17:03:47.777

正如您发现的那样，解决碰撞不能仅在单个游戏对象的级别上考虑。您需要一个对象，它可以跟踪所有参与碰撞的对象，并可以从它们中读取所有影响碰撞的属性。如果这样做了，那么它可以在每次游戏更新滴答时为所有对象全局解决碰撞。

我建议创建一个界面，通过它您可以获得处理碰撞检测所需的所有信息。所有参与碰撞的对象都需要从这里继承。该界面将允许您从每个对象案例和全局案例平滑过渡。

这只是一个帮助你理解的例子。您需要将其调整为您自己的代码。

```
class ICollidable
{
public:
    // we use these function to retrieve collision relevant information
    // (can be optimised)
    virtual sf::Vector2f GetPosition() = 0; // objects have position
    virtual sf::Vector2f GetSize() = 0; // objects have a size

    // using this function, we notify the object that it collided with something else
    virtual void ProcessCollision(ICollidable* other) = 0;

    // if you use virtual methods, you need a virtual destructor
    virtual ~ICollidable{};
}; 
```

现在您可以创建一个碰撞系统。碰撞系统将保存`ICollidable`可以相互交互的对象列表。您甚至可以选择一些对象根本不参与碰撞。这将负责在全球层面解决冲突。

```
class CollisionSystem
{
private:
    // hold all objects that participate in collision
    std::vector<ICollidable*> objectList; 
public:
    void AddToCollisionList(ICollidable* obj);
    void RemoveFromCollisionList(ICollidable* obj);
    void ProcessCollisionList();
} 
```

包含碰撞检查算法的`CollisionSystem::ProcessCollisionList();`实现。它将获取每个对象的位置和大小。基于该信息，它将决定两个对象发生碰撞并调用`ICollidable::ProcessCollision(ICollidable& other);`每个发生碰撞的对象。此方法将被子类覆盖以提供特定于类的功能。

在内部`CollisionSystem`，您可以使用四叉树或二叉树等数据结构来加快解决所有冲突所需的时间。作为第一步，我建议只在 X 轴上进行排序。通过保持列表排序，您只需检查不超过对象大小的邻居。

如果您的游戏需求发生变化，您可以使用更好的碰撞检查算法进行更新，您可以将更多属性添加到`ICollidable`. 一般来说，你还需要处理物理，你也可以通过`ICollidable`.

作为提示，如果两个物体发生碰撞，我建议立即将它们移开，以免它们在下一个游戏时间点发生碰撞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:24:33.540

根据您正在处理的实体数量，仅检查游戏中每个对象的碰撞可能会在内存和/或性能方面产生巨大的成本。

您可能希望对对象进行预处理以按轴对它们进行分类，例如增加 x 坐标，以简化碰撞检查。甚至在游戏开始之前准备好所有对象并对其进行分类可能会更好，例如作为一个级别的启动。我认为这将是我第一次尝试的方式。

# python - python中的累加器

> ID：14227165
> 
> 赞同：0
> 
> 时间：2013-01-09T01:58:28.170
> 
> 标签：python, while-loop, accumulator

我必须制作一个累加器来计算用户用来猜测随机数的条目数。我已经弄清楚了所有的while语句，但我无法得到计算它占用了多少条目的部分。谢谢你的帮助！

```
import random
secretNumber = random.randint(1,100)
secretNumber = int(secretNumber)
print("Guess a number between 1 and 100!")
number = input("Your guess: ")
number = int(number)
tries = 1
while number != secretNumber:
    if number > secretNumber:
        print("Too high!")
        number = input("Your guess: ")
        number = int(number)
    if number < secretNumber:
        print("Too low!")
        number = input("Your guess: ")
        number = int(number)
while number == secretNumber:
    print("You got it in",tries,"tries")
    break 
```

我需要帮助的部分是在休息后实施尝试累加器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:10:06.240

你想问的第一件事是当你`print tries`，你得到什么？实际上，你会看到你总是得到 1。

因为，你没有增加。您没有添加，因为用户一直在猜测。

一般来说，你可以`tries = tries + 1`为每个猜测写。

```
tries = 1
while number != secretNumber:
    if number > secretNumber:
        print("Too high!")
        tries = tries + 1      # here is the addition
        number = input("Your guess: ")
        number = int(number)
    if number < secretNumber:
        print("Too low!")
        tries = tries + 1      # here is the addition
        number = input("Your guess: ")
        number = int(number)
while number == secretNumber:
    print("You got it in",tries,"tries")
    break 
```

这段代码仍然有一些问题。第二个循环没有意义。循环听起来像循环。它会一直运行，直到满足条件或有人（你）打断它并告诉它退出。

如果用户找到了号码，那么`while number !- secretNumber`会变成`False`对的吗？它将退出第一个循环。因此，您可以跳过第二个循环并祝贺用户。

另一件小事是双重`if`陈述。 `if`声明很昂贵。计算机必须测试才能猜对。但无论哪种方式，都有不同的方法来处理多个条件。

```
if condition1 met:
    do this
elif condition2 met:
    do this
elif condition3 met:
    do this
elif more....
else:   # optional, but encourage, this is a default fallback case
    do this 
```

如果`number > secretNumber`是`True`，那么您不需要进行`number < secretNumber`理论上的测试。它通过适应使代码更清晰和逻辑合理`if .. elif .. else`

```
import random
secretNumber = random.randint(1,100)
secretNumber = int(secretNumber)
print("Guess a number between 1 and 100!")
number = input("Your guess: ")
number = int(number)
tries = 1
while number != secretNumber:
    if number > secretNumber:
        print("Too high!")
        tries = tries + 1      # here is the addition
        number = input("Your guess: ")
        number = int(number)
    elif number < secretNumber:
        print("Too low!")
        tries = tries + 1      # here is the addition
        number = input("Your guess: ")
        number = int(number)
print("You got it in",tries,"tries")
# another way to print is
# print("You got it in %s tries" % tries)
# print("You got it in {t} tries".format(t=tries)) 
```

对于初学者，用于`print`帮助调试您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T02:01:57.820

只需将线

```
tries += 1 
```

在循环中 - 此行将`tries`变量增加 1。

我还冒昧地通过从 if 语句中删除它的一部分来缩短它，并删除了第二个 while 循环（因为循环总是在没有理由在那里放置循环时发生）：

```
while number != secretNumber:
    tries += 1
    if number > secretNumber:
        print("Too high!")
    if number < secretNumber:
        print("Too low!")
    number = input("Your guess: ")
    number = int(number)
print("You got it in",tries,"tries") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T02:06:55.883

```
import random
i = 0
rand_num = random.randint(1, 100)
while True:
    i += 1
    try:
        guess = int(input('Guess the number: ')
    except ValueError:
        print('Invalid input, try again')
        continue
    if guess < rand_num:
        print('Too low, try again')
    elif guess > rand_num:
        print('Too high, try again')
    else:
        print('You got it in ', tries, ' tries!')
        break 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T02:07:24.613

如果你弄错了，你可以增加尝试次数：

```
...
while number != secretNumber:
    tries += 1
    if number > secretNumber:
        print("Too high!")
... 
```

此外，最后而不是这个：

```
while number == secretNumber:
    print("You got it in",tries,"tries")
    break 
```

你可以使用这个：

```
print("You got it in",tries,"tries") 
```

因为只有当你得到正确的数字时，它才会达到这一点。

另一件事，trys 最初应该等于 0，没有，因为一开始你尝试了 0 次，而不是 1。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-09T02:23:49.297

您想`tries += 1`在 while 循环中添加额外的行。这样做是在尝试每个猜测时加 1。那么你的代码将是：

```
import random
secretNumber = random.randint(1,100)
secretNumber = int(secretNumber)
print("Guess a number between 1 and 100!")
number = input("Your guess: ")
number = int(number)
tries = 1
while number != secretNumber:
    if number > secretNumber:
        print("Too high!")
        number = input("Your guess: ")
    number = int(number)
    if number < secretNumber:
        print("Too low!")
        number = input("Your guess: ")
        number = int(number)
while number == secretNumber:
    print("You got it in",tries,"tries")
    break 
```

# android - 容器上的高度 100% 会破坏 Android 4.0 的链接/按钮，但在 2.3、3 和 4.1 上很好

> ID：14227166
> 
> 赞同：1
> 
> 时间：2013-01-09T01:58:29.510
> 
> 标签：android, browser, android-4.0-ice-cream-sandwich

构建一个更大的 html/css/javascript 应用程序，所以我不能真正发布相关的代码片段。

它适用于浏览器、iOS 以及除 4.0 之外的所有其他版本的 Android。已在模拟器和设备上测试并确认问题。

我已经从 CSS 中清除了 tranform3d、用户选择和溢出滚动：触摸。

线索：

当我追踪这些事件时，它们似乎总是针对我的容器，而不是我接触的物品。

有任何想法吗？

好的，所以我发现父容器上有一个“高度：100%”。删除它会启用点击，但会终止滚动。啊。

它在 ICS 上的 Chrome 浏览器上运行良好，只是不是默认浏览器......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-09T02:04:50.843

尝试添加 document.body.addEventListener("touchstart", function(){}); 到身体，并保持它可以尽快调用

# html - 可以重新定位 Adob e Flash 权限弹出窗口吗？

> ID：14227169
> 
> 赞同：1
> 
> 时间：2013-01-09T01:58:39.943
> 
> 标签：html, css, flash, adobe

![在此处输入图像描述](../Images/ffb4d4aa4bf682c95f42d8e2a45abee0.png)

有人知道是否可以重新定位 Adob​​e Flash 权限弹出窗口？
左对齐的例子？

我正在从一个较小的 Iframe 中嵌入一个 Flash 对象，并且权限对话框不在视野范围内

建议赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:28:19.133

我假设 Flash SWF 比它内部的 iframe 大，并且 iframe 有滚动条。

我建议调整 swf 的大小以适合 iframe，然后检查相机访问，这将触发设置弹出窗口，然后重新调整 swf 的大小。

# c++ - 如何使用 WMI/C++ 获取内存信息（RAM 类型，例如 DDR、DDR2、DDR3？）

> ID：14227171
> 
> 赞同：8
> 
> 时间：2013-01-09T01:59:09.527
> 
> 标签：c++, wmi

我的 Windows XP SP 2 机器上有 DDR2 RAM，但在 WMI 资源管理器 (win32_physicalMemory) 上，我得到的内存类型 = 0（未知）而不是 21（DDR2 的代码）。命名空间是 CIMV2。你能告诉我如何从 WMI 获取 DDR2 内存类型吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T03:19:21.877

获取此类信息的最可靠方法之一是读取[SMBIOS](http://www.dmtf.org/standards/smbios)表，您必须查找[`Memory Device (Type 17) Structure`](http://dmtf.org/sites/default/files/standards/documents/DSP0134_2.7.1.pdf)（此结构描述安装在系统上的单个内存设备）和`Memory Type`字段。

这些是该字段的可能值。

```
01h Other
02h Unknown
03h DRAM
04h EDRAM
05h VRAM
06h SRAM
07h RAM
08h ROM
09h FLASH
0Ah EEPROM
0Bh FEPROM   
0Ch EPROM
0Dh CDRAM
0Eh 3DRAM
0Fh SDRAM
10h SGRAM
11h RDRAM
12h DDR
13h DDR2
14h DDR2 FB-DIMM
15h-17h Reserved
18h DDR3
19h FBD2
1Ah DDR4
1Bh LPDDR
1Ch LPDDR2
1Dh LPDDR3
1Eh LPDDR4 
```

为了从 C++ 应用程序访问 SMBIOS，您可以使用`MSSmBios_RawSMBiosTables`WMI 类或[`EnumSystemFirmwareTables`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724259%28v=vs.85%29.aspx)and[`GetSystemFirmwareTable`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724379%28v=vs.85%29.aspx)函数。

另外查看这些文章以了解如何解析 SMBIOS 表的信息。

*   [`SMBIOS Demystified`](http://www.codeguru.com/cpp/misc/misc/system/article.php/c12347/SMBIOS-Demystified.htm)(C++)
*   使用 Delphi (Delphi)[读取 SMBios 表](http://theroadtodelphi.wordpress.com/2011/08/02/reading-the-smbios-tables-using-delphi/)

# vba - 使用进度条复制文件

> ID：14227172
> 
> 赞同：3
> 
> 时间：2013-01-09T01:59:11.533
> 
> 标签：vba, file-io, progress-bar

所以我正在尝试在我开始学习的 Visual Basic 中做一些事情，但这还不够。我主要使用来自互联网的代码。现在我想将几个文件从第一个文件夹复制到第二个文件夹并覆盖现有文件，我想在进度条上查看进度（所有文件加起来大约 2GB）

已解决：我找到了一些程序的源代码并使用了一些部件来完成这项工作

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T13:34:06.263

这是我最喜欢的做法……使用`SHFileOperation` [API](http://allapi.mentalis.org/apilist/SHFileOperation.shtml)

该 API 将自动显示进度，如下面的屏幕截图所示。

这是一个例子。将此代码粘贴到模块中

```
Public Declare Function SHFileOperation Lib "shell32.dll" _
Alias "SHFileOperationA" (lpFileOp As SHFILEOPSTRUCT) As Long

Public Const FO_COPY = &H2
Public Const FOF_SIMPLEPROGRESS = &H100

Public Type SHFILEOPSTRUCT
    hWnd As Long
    wFunc As Long
    pFrom As String
    pTo As String
    fFlags As Integer
    fAnyOperationsAborted As Long
    hNameMappings As Long
    lpszProgressTitle As Long
End Type

Public Sub VBCopyFolder(ByRef strSource As String, ByRef strTarget As String)
    Dim op As SHFILEOPSTRUCT

    With op
        .wFunc = FO_COPY
        .pTo = strTarget
        .pFrom = strSource
        .fFlags = FOF_SIMPLEPROGRESS
    End With

    '~~> Perform operation
    SHFileOperation op
End Sub 
```

然后像这样复制文件或文件夹

```
Private Sub Sample()
    '~~> Copy Files
    Call VBCopyFolder("C:\Sample.Avi", "C:\NewSample.Avi")

    '~~> Copy Folders
    Call VBCopyFolder("C:\Temp1", "C:\Temp2")
End Sub 
```

**截屏**

![在此处输入图像描述](../Images/53a7ab5f3a927992a5822f43740194ec.png)

# python - 文本没有出现在文件的开头

> ID：14227173
> 
> 赞同：2
> 
> 时间：2013-01-09T01:59:30.233
> 
> 标签：python

除了我想要的以外，我有下面的代码做所有事情:-)。目标很简单，我试图将文本添加到目录（和子目录）中每个文件顶部的 appendtext 变量，脚本运行良好，但文本没有被附加。我哪里错了？

```
import os
import sys
import fnmatch
temp_fname = "temp_file"

appendtext="""Test string
"""
if len(sys.argv) < 2:
    sys.exit('Usage: test.py <build directory>')

for path,dirs,files in os.walk(sys.argv[1]):
    for fname in files:
        for pat in ['*.*']:
            if fnmatch.fnmatch(fname,pat):
                fullname = os.path.join(path,fname)
                with open(fullname, "r") as in_file:
                    with open(temp_fname, "w") as out_file:
                        out_file.write(appendtext)
                        for line in in_file:
                            out_file.write(line)
                os.rename(temp_fname, fullname) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:06:03.513

如果您希望文件顶部的文本，您应该执行以下操作：

```
temp_fname = "temp_file"
# the next line doesn't work in Python 2.5, 2.6, or 3.0
with open(fullname, "r") as in_file, open(temp_fname, "w") as out_file:
    out_file.write(appendtext)
    for line in in_file:
        out_file.write(line)
os.rename(temp_fname, fullname) 
```

这是为 Python 2.6 重写的上述代码：

```
temp_fname = "temp_file"
with open(temp_fname, "w") as out_file:
    with open(fullname, "r") as in_file:
        out_file.write(appendtext)
        for line in in_file:
            out_file.write(line)
os.rename(temp_fname, fullname) 
```

我们可以做得比这好一点。这始终使用相同的临时文件名 ( `"temp_file"`)，并且该文件将始终在单个目录中创建（运行时的默认目录）。我们真正想要的是一个具有唯一名称的临时文件，该文件创建在与我们将要编辑的文件完全相同的目录中。Python 为我们提供了一个方便的模块，称为`tempfile`创建临时文件。

默认情况下，你只是得到一个打开的文件句柄，你不知道文件名。但是我们需要知道文件名，以便在临时副本完全完成后，我们可以将其重命名为原始文件名。 `tempfile`提供`NamedTemporaryFile`这样的情况。

这是一个完整的程序：

```
import fnmatch
import os
import sys
import tempfile

headertext = "# header text\n\n"

def want_this_file(fname):
    for pat in ['*']:
        if fnmatch.fnmatch(fname, pat):
            return True
    return False

def prepend_file(fullname, path):
    # with statement means temp file is written and closed at end of with
    with tempfile.NamedTemporaryFile(dir=path, delete=False) as out_file:
        with open(fullname, "r") as in_file:
                out_file.write(headertext)
                for line in in_file:
                    out_file.write(line)
        # before temp file is closed, get its name
        temp_fname = out_file.name
    # rename temp file to fullname, clobbering original
    os.rename(temp_fname, fullname)

start_directory = sys.argv[1]

for dirpath, dirnames, filenames in os.walk(start_directory):
    for fname in filenames:
        if want_this_file(fname):
            fullname = os.path.join(dirpath, fname)
            prepend_file(fullname, dirpath) 
```

此答案使用模式“编写临时文件，然后将临时文件重命名为原始名称”。这是你应该这样做的方式。它让代码编写新版本，并且只有在新版本完全且成功编写*后*，才会执行单个操作将新文件重命名为旧文件名。因此，如果在尝试编写新版本时出现任何问题，原始文件将保持不变。这是解决问题的安全方法。

我们想在与原始文件相同的目录中创建临时文件，这样`os.rename()`操作将非常便宜。在 Linux 系统上，您的系统临时`/tmp`目录`tempfile`（如果临时文件在同一目录下，重命名操作总是非常快速和安全。

编辑：这是代码的改进版本。这会捕获错误，并在重新引发异常发出错误信号之前清理临时文件。此外，正如 JF Sebastian 指出的那样，文件应该以二进制模式打开；这是这样做的。

```
import fnmatch
import os
import shutil
import sys
import tempfile

file_patterns_to_match = ['*']

headertext = "# header text\n\n"
# make any newlines in headertext match the system line ending
headertext = headertext.replace('\n', os.linesep)

def want_this_file(fname):
    for pat in file_patterns_to_match:
        if fnmatch.fnmatch(fname, pat):
            return True
    return False

def prepend_file(fullname, path):
    # with statement means temp file is written and closed at end of with
    with tempfile.NamedTemporaryFile(dir=path, delete=False) as out_file:
        # get the name immediately
        temp_fname = out_file.name

        try:
            # use binary mode to avoid newline translations
            with open(fullname, "rb") as in_file:
                out_file.write(headertext)
                shutil.copyfileobj(in_file, out_file)
        except Exception:
            # on any error, clean up temp file and re-raise exception
            try:
                os.remove(temp_fname)
            except Exception:
                print("unable to clean up temp file: " + temp_fname)
                pass
            raise
    # rename temp file to fullname, clobbering original
    os.rename(temp_fname, fullname)

start_directory = sys.argv[1]

for dirpath, dirnames, filenames in os.walk(start_directory):
    for fname in filenames:
        if want_this_file(fname):
            fullname = os.path.join(dirpath, fname)
            prepend_file(fullname, dirpath) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:22:47.537

我知道你的问题是关于你的 python 脚本的。但是您可以使用 perl 在 bash 中的单行中实现这一点。

```
sgeorge-mn:stack sgeorge$ cat file_0*
Hi - 1 
Hi - 2 
Hi - 3 
Hi - 4 
Hi - 5 

sgeorge-mn:stack sgeorge$ find . -type f
./file_01.txt
./file_02.txt
./file_03.txt
./file_04.txt
./file_05.txt

sgeorge-mn:stack sgeorge$ find . -type f -exec  perl -pi -e 'print "Please donot add any comments \nThis is a header file.\nJust a test.\n" if $. == 1' {} \;

sgeorge-mn:stack sgeorge$ cat file_0*
Please donot add any comments 
This is a header file.
Just a test.
Hi - 1 
Please donot add any comments 
This is a header file.
Just a test.
Hi - 2 
Please donot add any comments 
This is a header file.
Just a test.
Hi - 3 
Please donot add any comments 
This is a header file.
Just a test.
Hi - 4 
Please donot add any comments 
This is a header file.
Just a test.
Hi - 5 
```

# php - PHP嵌套foreach返回键两次

> ID：14227179
> 
> 赞同：1
> 
> 时间：2013-01-09T01:59:55.030
> 
> 标签：php, multidimensional-array, foreach, rrdtool

不是编码员，我正在尝试做以下事情并且失去了我的想法。我确信答案可能与他们得到的一样基本，但我似乎找不到答案。

无论如何，这里去。有一个多维数组：

```
Array
[module 2] => Array
    (
        [1] => SimpleXMLElement Object
            (
                [0] => module 2 EARL outlet temperature
            )

        [2] => SimpleXMLElement Object
            (
                [0] => module 2 inlet temperature
            )
        [15] => SimpleXMLElement Object
            (
                [0] => module 2 EARL inlet temperature
            )

        [19] => SimpleXMLElement Object
            (
                [0] => module 2 outlet temperature
            )

    )

[module 6] => Array
    (
        [3] => SimpleXMLElement Object
            (
                [0] => module 6 EARL inlet temperature
            )

        [4] => SimpleXMLElement Object
            (
                [0] => module 6 asic-4 temperature
            )

        [11] => SimpleXMLElement Object
            (
                [0] => module 6 RP inlet temperature
            )

        [24] => SimpleXMLElement Object
            (
                [0] => module 6 asic-3 temperature
            )

        [25] => SimpleXMLElement Object
            (
                [0] => module 6 inlet temperature
            )

        [26] => SimpleXMLElement Object
            (
                [0] => module 6 EARL outlet temperature
            )

        [28] => SimpleXMLElement Object
            (
                [0] => module 6 outlet temperature
            )

        [30] => SimpleXMLElement Object
            (
                [0] => module 6 RP outlet temperature
            )

    ) 
```

我需要的是，从每个数组（模块 1、模块 2 等...）中，从每个子数组值返回数字键。基本上每个子数组键对应于另一个数组的键，该数组包含要由 rrdtool 绘制的温度。

感谢昨晚其他人的帮助，我能够按“模块＃”正确地对值进行分组（我最终如何得到上面的数组）。但是现在每次我运行我的 foreach 循环（如下）时，我都会得到两次返回的结果。

```
## Just for testing my foreach loops
foreach ($groupedmods as $modgroupname => $sensorname) {
    foreach ($sensorname as $dsindex => $sensor) {
        if($dsindex != 0) {
        file_put_contents('/usr/local/nagiosxi/var/php.log', print_r($dsindex, true). "\n",     FILE_APPEND);
        }
    }
}
## Draw some graphs
#foreach ($groupedtemps as $modgroupname ) {
#       $ds_name[$dcnt] = "Module Temps Test";
#       $opt[$dcnt] = "--vertical-label \"Temp\" --title \"Module Temps Test \" ";
#
#       foreach ($modgroupname as $dsindex ) {
#               if($dsindex != 0) {
#file_put_contents('/usr/local/nagiosxi/var/php.log', print_r($dsindex, true ). "\n", FILE_APPEND);
#                $def[$dcnt] = "DEF:var$dsindex=$rrdfile:$DS[$dsindex]:AVERAGE " ;
#                $def[$dcnt] .= "LINE2:var$dsindex#F00808:$sensor\"\" " ;
#               }
#       } 
#} 
```

输出我需要两次的索引列表：

```
1
2
15
19
3
4
11
24
25
26
28
30
5
16
17
20
21
22
23
29
6
8
7
18
9
31
10
27
12
35
13
32
14
33
34
1
2
15
19
3
4
11
24
25
26
28
30
5
16
17
20
21
22
23
29
6
8
7
18
9
31
10
27
12
35
13
32
14
33
34 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:31:31.973

Not super sure what's going on with you're version of PHP (maybe it's your objects, since I'm not using those), but I use the exact same code and array structure you do and get the same result. Like deceze says, sure you didn't run the program twice? The file is being used in append mode, so a second run won't overwrite the first and will just concat onto it.

If you didn't run it twice and the code still gives you errors you can use alternate code to just play with the keys. Give this a shot, the functionality should be the same and maybe it will solve your errors (if the above doesn't):

```
$mod_keys = array_keys($groupedmods);
foreach ($mod_keys as $k) {
  $new_keys = array_keys($groupedmods[$k]);
  foreach ($new_keys as $key) {
    if ($key != 0) {
      file_put_contents('/usr/local/nagiosxi/var/php.log', print_r($key, true)."\n", FILE_APPEND);
    }
  }
} 
```

# tomcat - 如何在 solrconfig.xml 中指定分片编号/zookeeper 路径？

> ID：14227181
> 
> 赞同：0
> 
> 时间：2013-01-09T01:59:56.870
> 
> 标签：tomcat, solr, solrcloud, solr4

在 solr 4[教程](http://wiki.apache.org/solr/SolrCloud)示例中显示我可以从 start.jar 启动 solr。

```
java -Djetty.port=7574 -DzkHost=localhost:9983 -jar start.jar 
```

我想从 war 文件中的 tomcat 启动它（我已经配置了 initctl 守护程序，所以它会更容易和更稳定），因此我必须在配置文件 solr.xml 或 solrconfig.xml 的某处指定这些云参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:18:01.447

您必须在 [yourtomcatdir]/solr/solr.xml 中执行此操作 - 在顶级节点 (solr) 的此文件中，您可以有一个 zkHost 属性，您可以在其中列出以逗号分隔的 zookeeper 实例 (host:port) 以进行连接用于获取核心配置。

# android - android google tv actionbar onfocus 事件

> ID：14227182
> 
> 赞同：0
> 
> 时间：2013-01-09T02:00:00.587
> 
> 标签：android, android-actionbar, google-tv

我是 android 开发的新手，我正在尝试为 google tv 开发一个简单的 android 应用程序，并希望创建一个类似于 googletv-android-sample 中提供的 leftNavBar 库的选项卡式布局，或者仅使用原始操作栏选项卡布局。但是，我正在寻找一种将 onFocus 事件附加到选项卡的解决方案，以便我可以在选项卡获得焦点时切换内容片段，而不是选择事件。谢谢你。

通过在 leftnavbar 库上实现 onfouschangelistener 给出了一种方法。

[选项卡焦点更改时更改 ImageView](https://stackoverflow.com/questions/14168000/change-imageview-when-tab-focus-changes)

任何其他想法将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:46:59.710

目前尚不清楚您在问什么 - 请修改您的问题。为什么要使用onHover？为什么使用 OnFocusChangeListener 是个问题？

例如 onFocusChange：

```
public void onFocusChange(View view, boolean hasFocus) {
  if(hasFocus){ 
      view.setBackgroundColor(Color.RED);
  } else {
      view.setBackgroundColor(Color.TRANSPARENT);
  }
} 
```

# java - JsonSerialize 与 HashMap

> ID：14227183
> 
> 赞同：1
> 
> 时间：2013-01-09T02:00:07.317
> 
> 标签：java, json, jaxb

我有以下java代码

```
 @XmlRootElement
public class PreferenceEntity  {
    String type, name;
    int id;
    Map<String, String> attributes = new HashMap<String, String>();
    List<PreferenceEntity> children;
    PreferenceEntity parent;

    public PreferenceEntity() {
        parent = null;
    }

    public PreferenceEntity(PreferenceEntity parent) {
        this.parent = parent;
    }

    @XmlAnyElement
    public List<PreferenceEntity> getChildren() {
        return children;
    }
    public void setChildren(List<PreferenceEntity> children) {
        this.children = children;
    }

    public String getType() {
        return type;
    }
    public void setType(String type) {
        this.type = type;
    }

    @JsonSerialize(contentUsing=SubjectAutocompleteSerializer.class)
    public Map<String, String> getAttributes() {
        return attributes;
    }

    @XmlTransient
    public PreferenceEntity getParent() {
        return parent;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setId(int id) { 
        if (id >= 0) {
            this.id = id;
        }
    }

    // Internal class
    public static class SubjectAutocompleteSerializer extends JsonSerializer<Map<String, String>> {

        @Override
        public void serialize(Map<String, String> map, JsonGenerator jgen, SerializerProvider provider)
                throws IOException, JsonProcessingException {
            jgen.writeStartObject();
            for (String key:map.keySet()) {
                jgen.writeStringField(key, map.get(key));
            }
            //jgen.writeFieldName(value.getType());
            //jgen.writeStringField(value.getType(), value.getType());
            // jgen.writeStartObject();
            //jgen.writeObject(value);
            //jgen.writeStartObject("XMY");
            //jgen.writeStringField("value", value.getName());
            // jgen.writeEndObject();
            jgen.writeEndObject();
        }

    }
} 
```

输出是：

```
{
-preferences : [
-{
-children : [
    -{
    children : null
    type : "A1"
    -attributes : {
    ColumnId : "86"
    }
    }
    -{
    children : null
    type : "A2"
    -attributes : {
    ColumnId : "87"
    }
    }
    -{
    children : null
    type : "A1"
    -attributes : {
    ColumnId : "382"
    Selected : "true"
    }
} 
```

所需的输出如下：

```
{
-preferences : [
-{
    -children : [
    -{
        children : null
        type : "A1"
        ColumnId : "86"
    }
    -{
        children : null
        type : "A2"
        ColumnId : "87"
    }
    -{
        children : null
        type : "A1"
        ColumnId : "382"
        Selected : "true"
    }
} 
```

如果我能得到它，那就更好了：

```
{
-preferences : [
-{
    -A1 : [
    -{
        children : null
        type : "A1"
        ColumnId : "86"
    }
    -A2{
        children : null
        ColumnId : "87"
    }
    -A3{
        children : null
        ColumnId : "382"
        Selected : "true"
    }
} 
```

我尝试使用 JsonSerialize，但它似乎不适用于 HashMap。任何指针都会有很大帮助。

问候白莲花

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:33:11.330

由于您想更改 JSON 输出的布局，我认为您应该在类级别更改序列化，这应该可以：

```
@JsonSerialize(using = SubjectAutocompleteSerializer.class)
public class PreferenceEntity {
    ...
        public static class SubjectAutocompleteSerializer extends JsonSerializer<PreferenceEntity> {

            public void serialize(PreferenceEntity value, JsonGenerator jgen,
                          SerializerProvider provider) throws IOException,
                JsonProcessingException {

                jgen.writeStartObject();
                if (value.name != null && !value.name.isEmpty()) {
                    jgen.writeStringField("name", value.name);
                }
                if (value.getType() != null && !value.getType().isEmpty()) {
                    jgen.writeStringField("type", value.getType());
                }
                for (Entry<String, String> entry : value.getAttributes().entrySet()) {
                    jgen.writeStringField(entry.getKey(), entry.getValue());
                }
                jgen.writeObjectField("children", value.getChildren());

                jgen.writeEndObject();
            }
    }
} 
```

# python - 使用 sqlite3dbm 和 mrjob 进行地图减少

> ID：14227186
> 
> 赞同：0
> 
> 时间：2013-01-09T02:00:24.953
> 
> 标签：python, mapreduce, mrjob

我有一个 sqlite3dbm，它将数据存储在键值对中。我需要使用`mrjob`. 当我运行我的代码`xyz.py my_db.db`时，mapper fn 无法正常工作。

```
def mapper(k,val):
  for word in val:
     yield(word,k) 
```

我为空`k`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:36:35.827

[检查这个](http://mrjob.readthedocs.org/en/latest/guides/writing-mrjobs.html#defining-command-line-options)。您需要适当地配置您的工作以从数据库文件中读取。

# javascript - 设置超时功能

> ID：14227209
> 
> 赞同：1
> 
> 时间：2013-01-09T02:03:40.510
> 
> 标签：javascript, jquery, function, settimeout

我一直在研究我的问题并且不想发布重复但我已经尝试了我的研究中描述的方法并且不能让我的功能延迟！

有人可以看看，让我知道我的语法是否有问题以及为什么它不起作用？除了 setTimeout 函数外，一切都运行良好

```
$(document).ready(function(){   
    $("#slider").easySlider({
        auto: true, 
        continuous: true
    });

    $("#prevBtn a").hide();
    $("#nextBtn a").hide();
    $("#slider").mouseover(function(){
        $("#prevBtn a").show();
        $("#nextBtn a").show();
    });

    setTimeout(function(){
        $("#prevBtn a").fadeOut('slow');
        $("#nextBtn a").fadeOut('slow');
    },3000);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T02:15:08.557

```
$(document).ready(function(){   
    $("#slider").easySlider({
        auto: true, 
        continuous: true
    });

    $("#prevBtn a").hide();
    $("#nextBtn a").hide();
    $("#slider").mouseover(function(){
        $("#prevBtn a").show();
        $("#nextBtn a").show();
    })
    .mouseout(function(){

        setTimeout(function(){
            $("#prevBtn a").fadeOut('slow');
            $("#nextBtn a").fadeOut('slow');
        },3000);

    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T02:08:13.427

您的 settimeout 功能有效。我放了一个

```
console.log('hi'); 
```

在里面，我看到了。

我认为您需要删除这些行，因为它会使隐藏在 dom 上的元素准备就绪。

```
$("#prevBtn a").hide();
$("#nextBtn a").hide(); 
```

# python - Python，为什么切换参数时返回不起作用？

> ID：14227211
> 
> 赞同：-1
> 
> 时间：2013-01-09T02:04:00.587
> 
> 标签：python, python-3.x, return

我正在学习 Python 并使用 3.3 版本。

我发现了一个我无法理解的“返回”问题。

案例 1\. OK 案例，当“return”按预期返回值时。

```
def switch(a,b):
    print ("inputed values:", "a is",a, ", b is",b)
    if b==0:
        print (a)
        return a
    elif b>a:
        switch(b,a)

print(switch(15,0)) 
```

执行时：

输入值：a 为 15，b 为 0

15

15

案例 2\. 问题案例，当“return”返回“None”时，虽然“print”打印了值。

```
def switch(a,b):
    print ("inputed values:", "a is",a, ", b is",b)
    if b==0:
        print (a)
        return a
    elif b>a:
        switch(b,a)

print(switch(0,15)) 
```

执行时：

输入值：a 为 0，b 为 15

输入值：a 为 15，b 为 0

15

没有任何

两种情况之间的区别在于，在第二个“elif”分支被执行时，值被切换并且函数被再次调用并使用切换的值。但在第二种情况下，返回是“无”。为什么在第二种情况下它不返回“a”值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:06:09.640

在第二个 if 语句的 switch 之前添加一个 return 语句

```
return switch(b,a) 
```

The switch method returns a but the missing return statement means the value returned by the `switch` statement is not returned hence the default `None` is returned.

# php - 计算循环

> ID：14227215
> 
> 赞同：0
> 
> 时间：2013-01-09T02:04:32.680
> 
> 标签：php

请需要帮助。

我需要的是在循环时它会计算达到零后的循环数。

```
$variable=50;//this is not fixed
$loop=0;
//------------------//
$variable-10;
//the $variable becomes 40
//$loop becomes 1
//repeat the process
$variable-10;
//the $variable becomes 30
//$loop becomes 2
//until the variable reaches zero then
//$loop becomes 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:10:14.730

```
$variable = 50;
$loop = 0;
while($variable > 0)
{
    $variable -= 10;
    $loop++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:10:53.783

在循环内实现你的变量 $variable=50

```
$count=0;
for ($variable=50; $variable<=0; $variable-=10){
$count++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T02:22:22.060

代码打高尔夫球！

```
for($v=50,$c=0;($v-=10)>0;++$c);
echo $c; 
```

在这个非常短的脚本的末尾，`$c`将表示循环的**代码部分**被执行的次数。本质上，它还表示执行**递增序列**的次数。

这与执行循环测试的次数形成对比，由于执行前的最后一种情况**，循环测试的**执行次数固有地高出 1。

# c++ - C ++复制指向对象的指针列表

> ID：14227217
> 
> 赞同：2
> 
> 时间：2013-01-09T02:04:42.573
> 
> 标签：c++, list

我的游戏中存储了 Client* 对象。我想将列表传递给客户。Client 对象存储了一个 Client 指针列表，因此我传入的列表我想覆盖存储的列表，但是 std::copy() 给出了错误。

```
void Client::SetClientList(list<Client*> c) 
{ _clients.clear(); std::copy(c.begin(), c.end(), _clients); } 
```

它给出了指向 xutility 文件的奇怪错误。如果我注释掉复制语句，那么它编译得很好，所以这就是它不喜欢的语句。

这个想法是每个客户端都存储一个范围内的客户端列表，因此也需要发送数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T02:06:08.247

`std::copy`需要 3 个迭代器，而不是 2 个和一个容器：

```
std::copy(c.begin(), c.end(), _clients.begin()); 
```

此外，如果它们是相同的列表类型，那么只需执行以下操作：

```
_clients = c; 
```

# php - 有效的 PHP 定制 _POST？

> ID：14227220
> 
> 赞同：1
> 
> 时间：2013-01-09T02:04:58.063
> 
> 标签：php

我只是在编写一个 PHP 脚本来处理 PayPal IPN 数据。我想检查已经购买了多少商品，然后动态调用`$_POST['item_name1']`每个商品。所以它会是：

```
$_POST['item_name1']
$_POST['item_name2']
$_POST['item_name3']
etc 
```

这在 PHP 中是否有效，我没有得到我期望的结果，现在确定如何自行测试：

```
for ($i = 1; $i <= $number_items; $i++) {
    $items[$i] = $_POST[' . "item_name" . $i . '];
} 
```

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:06:38.293

几乎。你要：

```
for ($i = 1; $i <= $number_items; $i++) {
    $items[$i] = $_POST['item_name' . $i];
} 
```

您还可以使用：

```
$_POST["item_name{$i}"]; 
```

# c++ - 将二维数组设置为二维数组时出错

> ID：14227221
> 
> 赞同：0
> 
> 时间：2013-01-09T02:05:08.517
> 
> 标签：c++

我有这个构造函数：

```
Transform::Transform( float matrix[4][4] )
{
    m = matrix;
} 
```

而这个类定义：

```
class Transform
{
    float m[4][4];
public:
    Transform();
    Transform(float matrix[4][4]); 
```

但这不会编译。

有什么问题？

错误 1 ​​错误 C2440: '=' : 无法从 'float [][4]' 转换为 'float [4][4]' c:\Users\Josh\Documents\agui\trunk\src\Agui\Transform.cpp 75

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T02:08:29.903

如果您使用的是 c++11，请尝试更改`float matrix[4][4]`为`std::array<std::array<float,4>,4>`

有点拗口，但它支持 c 数组本身不支持的此类操作。

你可以做这样的事情来清理语法。

```
typedef std::array<std::array<float,4>,4> Matrix; 
```

现在你可以做

```
Matrix myMatrix; 
```

ps 如果您不使用 C++11，则可以`vector`使用`array`. 它与数组略有不同，但也添加了更多功能，并且在您设置后访问是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T02:11:09.393

Karthik 的回答非常好，或者，您也可以这样做...

```
 for(int i = 0; i < 4; i++)
  {
     for(int j = 0; j < 4; j++)
      {
         m[i][j] = matrix[i][j];
      }
  } 
```

原理与 WhozCraig 在评论中提到的相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T02:14:39.700

即使您将构造函数的参数声明为`float matrix[4][4]`，编译器也会忽略第一个`4`。

# meteor - 未经授权访问 Google Calendar API 发布请求

> ID：14227222
> 
> 赞同：0
> 
> 时间：2013-01-09T02:05:12.460
> 
> 标签：meteor

我正在尝试在 Meteor 中使用 Google 日历 REST API，我可以毫无问题地使用任何 GET 方法，但是当我尝试在日历中创建事件时，出现未经授权的访问错误。

我在以下要点代码上获得了我的[代码](https://gist.github.com/4489908)

基本上我使用 Meteor.loginWithGoogle 并获得一个 AccessToken，通过它我可以从谷歌获得任何日历或用户信息，但是当我尝试插入一个事件时，我收到以下消息：

发布[https://www.googleapis.com/calendar/v3/calendars/primary/events](https://www.googleapis.com/calendar/v3/calendars/primary/events) 401（未经授权）

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T00:31:17.030

经过一段时间的尝试，它是正确的..

将以下文件添加到我的客户端文件夹

```
 Accounts.ui.config({requestPermissions: {google: 
  ['https://www.googleapis.com/auth/calendar',
  'https://www.googleapis.com/auth/userinfo.profile',
  'https://www.googleapis.com/auth/tasks']}}, requestOfflineToken: {google: true})

gCal = 
  insertEvent: (cliente, poblacion, texto, fecha)->
  #to-do calendar devuelve un Event Object que incluye un ID
  # si incluimos este id como campo en la alerta podremos despues
  # eliminar el evento en el calendario directamente desde la app
    url = "https://www.googleapis.com/calendar/v3/calendars/primary/events"
    event=  {
      summary: cliente
      location: poblacion
      description: texto
      start:
        "date": fecha
      end:
        "date": fecha
      }
    evento = JSON.stringify event
    console.log evento
    Auth = 'Bearer ' + Meteor.user().services.google.accessToken
    Meteor.http.post url, {
      params: {key: 'INSERT-YOUR-API-KEY-HERE'},
      data: event,
      headers: {'Authorization': Auth }
      }, 
      (err, result)->
        console.log result
        return result.id 
```

如果您通过 {{loginButtons}} 登录然后调用 insertEvent 它就像一个魅力。

# java - 如何正确编写多线程测试程序

> ID：14227224
> 
> 赞同：0
> 
> 时间：2013-01-09T02:05:22.227
> 
> 标签：java, multithreading, web-services, rest

我正在尝试编写一个压力测试程序来抨击我们的网络服务器。我正在尝试使用线程来模拟多个人打服务器。但是，我遇到的问题是 99.9% 的时间使用 1 个线程。2 个线程似乎在 10-20% 的时间内工作，而更多的线程似乎总是失败。

这是我运行的代码片段，试图生成用于测试的线程：

```
 public static final MAX = 1; // (or 2, or 100 while testing)
    <snip>
    <snip>

    String newParams = "{ bunch, of, test, parameters }";
    Callable<String> call1;
    ExecutorService pool = Executors.newFixedThreadPool(10);
    Future<String> f1;

    for (int i = 0; i < MAX; i++) {
    //      newParams = newParams + slight changes each iteration for each thread;
        call1 = new HttpPostClass.HttpPost(url, newParams);
        f1 = pool.submit(call1);
    }
    pool.shutdown(); 
```

我不知道这是否是因为我在循环中重新使用了相同的 Callable/Future 对象，或者这是由于我自己对导致此问题的多线程编程的无知/缺乏经验造成的。

提前感谢你们可以给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:30:48.450

如果你想对 web 服务器进行负载测试，请查看简单但功能强大的 ab：[http ://httpd.apache.org/docs/2.2/programs/ab.html](http://httpd.apache.org/docs/2.2/programs/ab.html)

# google-app-engine - Objectify - 获取下一条和上一条记录

> ID：14227226
> 
> 赞同：1
> 
> 时间：2013-01-09T02:05:50.340
> 
> 标签：google-app-engine, objectify

我正在开发一个托管在 Google AppEngine 上的应用程序。我正在使用 Objectify 进行数据操作。考虑一个例子

```
Kind: Person
ID   Name
100  Santhosh
101  Upendar
102  Suresh
103  Naresh 
```

我想在获取当前记录时获取上一条和下一条记录。例如，如果我想获取 Person id 102，我也想获取 101 和 103。我不想拆分这些查询，因为这会影响数据操作的数量。

有没有可以在这种情况下使用的方法/构造。

谢谢

桑托什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:01:17.693

那么显而易见的解决方案是简单地查询其他ID

```
ofy().load().type(Person.class).ids(101L, 102L, 103L); 
```

如果您希望 objectify 为您执行此操作，则需要将您的 Person 类更改为类似

```
@Entity
class Person {
    @Id Long id;
    // Other attributes here
    @Load Ref<Person> previousPerson; 
    @Load Ref<Person> nextPerson; 
} 
```

但是，如果您插入或删除新元素，则必须更新引用。我怀疑使用数据存储是否有效。

# node.js - 打印机驱动程序发送到 Web 服务器

> ID：14227230
> 
> 赞同：0
> 
> 时间：2013-01-09T02:06:09.153
> 
> 标签：node.js, pdf, printing, ftp, postscript

我需要“破解”一个程序来导出一些数据。程序可以输出的唯一方法是通过打印。我怎么能劫持这个？操作系统是 Windows Embedded。

我最初在想“打印到 pdf”程序/欺骗打印机驱动程序，然后 ftp 到服务器进行处理。但是，这可能需要 OCR 才能进行 PDF 解码。

或者有没有办法将 postscript 流发送到服务器？我想后记会更好，因为我可以更容易地解码它。

我对打印机/协议等一无所知。

我可以在 node.js 中获取/编写 IPP（互联网打印协议）客户端并将其添加为 Windows 中的普通打印机吗？

服务器软件是 node.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:36:34.737

我预计“打印到 pdf 到 ftp 到 OCR 解码”的性能会很糟糕。所以我承担了在节点中编写 IPP 服务器的艰巨任务......

# r - R mcparallel mapReduce

> ID：14227237
> 
> 赞同：3
> 
> 时间：2013-01-09T02:07:40.003
> 
> 标签：r, mapreduce, multicore

我正在寻找聚合（）函数的并行版本，看起来像[http://cran.r-project.org/web/packages/mapReduce/mapReduce.pdf](http://cran.r-project.org/web/packages/mapReduce/mapReduce.pdf)和[http://cran.r-project.org/web /packages/multicore/multicore.pdf](http://cran.r-project.org/web/packages/multicore/multicore.pdf)正是我正在寻找的。

因此，作为测试，我创建了一个包含 10m 记录的数据集

```
blockSize <- 5000
records <- blockSize * 2000
df <- data.frame(id=1:records, value=rnorm(records))
df$period <- round(df$id/blockSize)
# now I want to aggregate by period and return mean of every block:
x <- aggregate(value ~ period, data=df, function(x) { mean(x) })
# with mapReduce it can be done
library(multicore)
library(mapReduce)
jobId <- mcparallel(mapReduce(map=period, mean(value), data=df))
y <- collect(jobId) 
```

但仍然不知何故它没有利用我笔记本电脑上的所有 4 个 CPU 内核：

```
$ top
02:00:35 up 3 days, 18:14,  3 users,  load average: 1,61, 1,20, 0,79
Tasks: 237 total,   2 running, 235 sleeping,   0 stopped,   0 zombie
%Cpu0  : 17,4 us,  5,1 sy,  0,0 ni, 74,3 id,  0,0 wa,  0,0 hi,  3,2 si,  0,0 st
%Cpu1  : 13,4 us,  6,9 sy,  0,0 ni, 79,7 id,  0,0 wa,  0,0 hi,  0,0 si,  0,0 st
%Cpu2  : 21,3 us, 32,3 sy,  0,0 ni, 46,3 id,  0,0 wa,  0,0 hi,  0,0 si,  0,0 st
%Cpu3  : 17,0 us, 36,0 sy,  0,0 ni, 47,0 id,  0,0 wa,  0,0 hi,  0,0 si,  0,0 st
KiB Mem:   3989664 total,  3298340 used,   691324 free,    27248 buffers
KiB Swap:  7580668 total,  1154164 used,  6426504 free,   320360 cached

PID USER      PR  NI  VIRT  RES  SHR S  %CPU %MEM    TIME+  COMMAND
459 myuser    20   0 1850m 1,8g 1120 R  **99,1** 46,4   0:37.43 R 
```

我使用 R 2.15.1：

```
R version 2.15.1 (2012-06-22) -- "Roasted Marshmallows"
Copyright (C) 2012 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: i686-pc-linux-gnu (32-bit) 
```

我在做什么错以及如何使用多核在 R 中聚合巨大的数据集？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T02:14:39.913

您如何聚合庞大的数据集`R`？

利用`data.table`

```
library(data.table)

DT <- data.table(df)
setkey(DT, period)

DT[, list(value = mean(value)), by = period] 
```

这不会使用多个内核，但会非常快速且内存高效。

# google-chrome - Google Chrome UI 如何在后台工作？

> ID：14227238
> 
> 赞同：3
> 
> 时间：2013-01-09T02:07:58.630
> 
> 标签：google-chrome

自定义用户界面（例如选项卡、按钮和多功能框）在所有平台上看起来都相同。这是如何实现的？似乎没有使用依赖于平台的 UI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:39:11.193

Chrome 使用 Skia。这是一个例子（Gtk+ 3，cairo，skia）：

```
 g_signal_connect(window_container_, "draw",
                   G_CALLBACK(OnWindowContainerDraw), NULL);

gboolean OnWindowContainerDraw(GtkWidget* widget,
                               cairo_t *cr) {                  
  SkBitmap bitmap;
  bitmap.setConfig(SkBitmap::kARGB_8888_Config, 100, 100);
  bitmap.allocPixels();

  SkDevice device(bitmap);
  SkCanvas canvas(&device);
  SkPaint paint;
  SkRect r;

  paint.setARGB(255, 255, 255, 255);
  r.set(10, 10, 20, 20);
  canvas.drawRect(r, paint);

  cairo_surface_t* surface = cairo_image_surface_create_for_data(
      (unsigned char*)bitmap.getPixels(), CAIRO_FORMAT_ARGB32,
      bitmap.width(), bitmap.height(), bitmap.rowBytes());
  cairo_surface_mark_dirty(surface);
  cairo_set_source_surface(cr, surface, 0, 0);
  cairo_paint(cr);

  return FALSE;
} 
```

# entity-framework - MigrateDbToLatestVersion 不起作用

> ID：14227247
> 
> 赞同：1
> 
> 时间：2013-01-09T02:08:33.643
> 
> 标签：entity-framework, ef-code-first, database-migration

我希望有人能对这个问题有所了解，因为到目前为止它有点神秘，而且我在四处寻找后无法找到答案。

我们有一个应用程序，我们首先使用 EF 代码对现有数据库进行数据库迁移。我们的应用程序使用 2 个数据库，我们有 2 个 DAL，每个 DAL 都有一个单独的 DbContext 用于访问其各自的数据库。为简单起见，我们的解决方案如下所示：

解决方案

*   DataAccessLayerA --> 数据库A
*   DataAccessLayerB --> 数据库B

我们看到的问题是，在 DataAccessLayerA 上，我们的 MigrateDatabaseToLatestVersion 初始化程序运行良好，并且我们的 DatabaseA 被迁移。但是，在 DataAccessLayerB 上，MigrateDatabaseToLatestVersion 初始化程序绝对不执行任何操作，并且我们的 DatabaseB 不会被迁移。

这是我们在 DataAccessLayerA 上执行的代码：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<ContextA,     DALA.Migrations.Configuration>()); 
```

这是我们在 DataAccessLayerB 上执行的代码：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<ContextB, DALB.Migrations.Configuration>()); 
```

当我逐步执行代码时，两行代码都在执行，每行代码都发生在自己的单独模块中（使用 PRISM 的 WPF 应用程序）。

现在，DataAccessLayerB 的数据库迁移工作的唯一方法是我们显式使用 DbMigrator 类并调用 Update() 方法。这确实会将数据库迁移到最新版本，尽管它会在数据库中的系统表之外创建 __MigrationHistory 表。

我们正在使用实体框架 5.0，并且我们有 AutomaticMigrationsEnabled = false，因为我们希望使用基于代码的迁移来获得更多粒度和控制。

我可以忍受将 DbMigrator 类用于第二个，但我真的很想了解它为什么不起作用。我已经多次看过 Julie Lerman 的教程并在线阅读了关于代码优先迁移的文档，但仍然无法找到答案。

任何有关可能出错的信息将不胜感激。

# vba - 根据背景颜色计算excel中文本的实例

> ID：14227250
> 
> 赞同：1
> 
> 时间：2013-01-09T02:09:14.670
> 
> 标签：vba, excel, excel-formula

![样本Excel](../Images/cc479f6b5da94d817811980da5523696.png)

要求是一段代码，它可以计算字符串的实例，即（ABC，DEF，GHK），基于它们是否存在于彩色单元格中，并将结果放在下面的单元格中，如图所示。

有人可以请教吗？

我尝试了一个示例代码

```
Sub Color()

Dim varCounter As String
Dim color As Integer
Dim nocolor As Integer

Range("E5").Select
color= 0
nocolor= 0

      Do Until Selection.Value = ""
                  If Selection.Font.Color = RGB(255, 0, 0) Then
                   color= color+ 1
                     Else
                   nocolor= nocolor+ 1
                   End If
                   Selection.Offset(1, 0).Select
        Loop
  Range("E47").Select
  Selection.Value = no

  Range("E48").Select
Selection.Value = color

End Sub 
```

这是一个非常简单的代码，它检查文本字体是否有颜色，但我找不到任何检查单元格背景颜色的东西。

我也尝试了 excel formula ，但是我只能搜索 text 和 count ，它不计算基于单元格的背景颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T05:20:24.200

这是一个简单的用户定义函数。您可以将其放在常规模块中。然后，您可以从它所在的工作簿中的任何工作表中调用它：

```
Public Function CountByColorAndText(rng As Excel.Range, SearchText As String, CountColored As Boolean) As Long
Dim cell As Excel.Range
Dim CellCount As Long

For Each cell In rng
    If cell.Value = SearchText Then
         If (cell.Interior.ColorIndex = -4142 And Not CountColored) Or _
           (cell.Interior.ColorIndex <> -4142 And CountColored) Then
            CellCount = CellCount + 1
        End If
    End If
Next cell
CountByColorAndText = CellCount
End Function 
```

它需要三个参数：要评估的范围、要搜索的字符串以及您是否计算有色（或无色）单元格：

![在此处输入图像描述](../Images/968ab42491766cda26c92ae627df1e4d.png)

因此，在上面的 E 列中，公式为：

```
=CountByColorAndText($A$2:$A$13,$D3,FALSE) 
```

在 F 列中，除了最后一个参数 is 之外，它是相同`CountColored`的`TRUE`。

我不写很多用户定义的函数，所以有人可能会过来指出问题或改进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T03:03:13.540

而不是`Font.Color`使用`Interior.Color`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:50:28.667

再次编写代码会很棒。但是，如果您有兴趣看一下，我在这里有一个修订后的代码。我只是想知道这是否是一些常见的项目，因为昨天 OP 提出了同样的问题....

[VBA，COUNTIF，根据单元格颜色排除](https://stackoverflow.com/questions/14221747/vba-countif-exclude-based-on-cell-color/14221811#14221811)

顺便说一句`INTERIOR.COLOR`，你会看到一个代表 RGB 的大数字，你可能想在哪里使用`INTERIOR.COLORINDEX`

由于您正在检查`RGB`格式，您可以尝试以下操作。但是我建议你不要使用`select`，它会减慢你的代码。您可以根据自己的需要进行`sheets`更改。`ranges`

例如

```
Dim rng as Range
Dim cell as Range

'-- name column
Set rng = Sheets(2).Cells(Sheets(2).Rows.Count, "C").End(xlUp).Row

color= 0
nocolor= 0

 For Each Cell In rng
    If  Cell.InteriorColor = RGB(256,0,0) then
      color= color+ 1
    Else
      nocolor= nocolor+ 1
    End If
  Next Cell

'--output
Sheets(2).Range("E47").Value = nocolor
Sheets(2).Range("E48").Value = color 
```

# vb.net - EF 5.0 Code First 多对多关系

> ID：14227252
> 
> 赞同：0
> 
> 时间：2013-01-09T02:09:51.723
> 
> 标签：vb.net, entity-framework

我的应用程序有许多包含“Notes”属性的类。我们想创建一个 Notes 类来包含所有链接回每个类中的 NoteId 的注释。我已经放置：

```
Private ReadOnly _class As New ObservableListSource(Of Class)()

Public Overridable ReadOnly Property Classes As ObservableListSource(Of Class)
    Get
        Return _class
    End Get
End Property 
```

在要绑定到的每个类的新 Notes 类中。然后我放置：

```
Public Property NoteId() As Guid
Public Overridable Property Note() As Note 
```

在每个要绑定的类中。如果我尝试建立多个关系，EF 不会创建数据库。这似乎是一个多对多的问题，但我不确定接下来要尝试什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:07:48.693

假设每个实体可以有多个笔记，我认为你不走运。我不认为实体框架或任何其他形式将能够以您描述的方式映射关系。你描述的不是多对多的关系。将数据库关系想象成一条线。有两端。每一端都终止于一个表，或者更具体地说，终止于一个表的主键属性和另一个表的外键属性。您所描述的就像轮子上的辐条，其中一张桌子和许多其他桌子之间只有**一个**关系。其中单个外键列必须链接到许多其他主键列。您可以强制它工作，但您不会获得任何好的实体框架自动魔术，它通过导航属性拉入注释。

您的选择是：

对可以有注释的每种类型的实体都有一个外键。即在你的笔记类上为每种可以有笔记的实体添加一个导航属性，我不推荐这样做。

或者

每种实体都有一个单独的注释表。即，您将拥有 ANotes、BNotes、CNotes 之类的东西。我会推荐这个，因为我认为它比替代品更干净。

抱歉，希望对您有所帮助

# c# - 如何将额外的属性字段添加到 asp.net 下拉列表

> ID：14227254
> 
> 赞同：13
> 
> 时间：2013-01-09T02:09:56.913
> 
> 标签：c#, asp.net, c#-4.0, drop-down-menu, field

下面我可以设置值和文本：

```
dropListUserImages.DataValueField = "Value";
dropListUserImages.DataTextField = "Text";
dropListUserImages.Items.Add(new ListItem { Text = srText, Value = srValue}); 
```

我还想设置额外的属性，例如：

```
data-imagesrc
data-description 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-09T02:13:43.710

利用：

```
ListItem test  = new ListItem { Text = srText, Value = srValue}
test.Attributes.Add("data-imagesrc", "xxx");
test.Attributes.Add("data-description", "xxx");
dropListUserImages.Items.Add(test); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-09T21:58:46.240

在将复杂的对象列表转换为可以在前端读取的值时，我遇到了同样的挑战，我使用了类似于下面的逻辑，发现它非常有用，因为它可以适应每种类型的对象：

```
//Object can be whichever type as you wish
List<Object> example = new List<Object>();

var listItemExamples = example
    .Select(a => new Func<ListItem>(() => {
                ListItem item = new ListItem(a.PropropertyA.ToString(), a.PropropertyB.ToString() );
                item.Attributes["data-PropropertyC"] = a.PropropertyC.ToString();
                return item;
            })())
    .ToArray();

dropListUserImages.Items.AddRange(listItemExamples); 
```

# c# - 如何从“许多”“独立”“字符串”创建字符串 []？

> ID：14227258
> 
> 赞同：-1
> 
> 时间：2013-01-09T02:10:21.577
> 
> 标签：c#, .net, arrays, string

我定义了一些字符串`"a" "b"`，并且`"c"`.

如何在 C# 中将它们转换为字符串 []？

当我这样做时，`args = new string[3](file, DestUri, DestStorage);`我得到“需要方法名称”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T02:12:52.623

我错过了什么还是你只需要这个：

```
string[] strings = new string[]{file, DestUri, DestStorage}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T02:12:12.063

```
var a = "a";
var b = "b";
var c = "c";
var array = new [] { a, b, c }; 
```

要不就

```
var array = new [] { "a", "b", "c" }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T02:13:08.467

您试图声明一个可以声明如下的单维数组：

string[] alphabet = new string[] {"a", "b", "c"};

[http://msdn.microsoft.com/en-us/library/aa288453(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288453(v=vs.71).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T02:17:06.613

最紧凑的方式：

```
string[] array = {"a", "b", "c"}; 
```

# vb.net - Controls.Find 方法中 SearchAllChildren 参数的含义

> ID：14227262
> 
> 赞同：3
> 
> 时间：2013-01-09T02:11:08.503
> 
> 标签：vb.net, winforms, find

我正在使用 Forms.Controls.Find 方法来搜索父控件的子控件。该方法有 2 个参数；（键，SearchAllChildren）。我知道 Key 参数对子控件的名称进行字符串比较，并用具有匹配名称的控件填充返回数组。但是，我不知道 SearchAllChildren 参数的意义。

MSDN 文档说：真正搜索所有子控件；否则为假。这是什么意思？它不会搜索所有子控件吗？这是为了控制搜索是否递归？所以如果为真则搜索将通过所有孩子的孩子和所有孩子的孩子的孩子等等，但如果为假则只通过第一级孩子？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T02:21:22.573

`Controls.Find("name", false)`将仅搜索直接子级。

`Controls.Find("name", true)`将查找子控件并递归搜索所有子控件子控件等。

这种方法的文档真的很糟糕。我必须查看搜索以绝对确定差异。

# ruby-on-rails - 无法持久销毁数据库，可以检索

> ID：14227264
> 
> 赞同：0
> 
> 时间：2013-01-09T02:11:09.917
> 
> 标签：ruby-on-rails, backbone.js

我有一个使用主干的 Rails 应用程序。在控制台中，我可以创建一个集合，从服务器 (3) 获取文档，我通过检查长度来确认

> > > 文档 = 新文档（）；
> > > docs.fetch();
> > > 文档长度
> > > 3

获取其中一份文档

> > > d1 = docs.at(0) Object { cid= "c3" , changed={...}, attributes={...}, more...}

销毁文档

> > > d1.destroy(); 删除 http: localhost:3000/docs/1
> > > 204 无内容 23ms jquery.js?body=1 (line 8215) Object { readyState= 1 , setRequestHeader=function(), getAllResponseHeaders=function(), more...}

检查文档的长度

```
>>> docs.length

2 
```

创建一个新集合

> > > docz = 新文档（）；

从服务器获取文件。注意“304 Not modified message”

> > > docz.fetch(); GET http:// localhost:3000/docs 304 未修改 31ms
> > > jquery.js?body=1 (line 8215) Object { readyState= 1 , setRequestHeader=function(), getAllResponseHeaders=function(), more...}

检查长度。它是 3，当我期望它是 2 时。

```
>>> docz.length

3 
```

我不知道为什么当我调用 destroy 时，如果明显有 3 条记录，我会收到一条无内容消息

```
204 No Content
        23ms 
```

当我从数据库中检索记录时，访问数据没有问题

```
d.get('title')
>>>"diet book" 
```

我在模型上设置了一个 url，所以我应该能够删除我认为的单个记录

```
 url : function() {
       var base = 'docs';
       if (this.isNew()) return base;
       return base + (base.charAt(base.length - 1) == '/' ? '' : '/') + this.id;
    }, 
```

但是，我也不能删除通过一个集合`docs.at(0).destroy`具有相同的效果。

这是我在 rails 控制器中的销毁功能

```
class DocsController < ApplicationController

    respond_to :json
    ....

   def destroy
     respond_with Doc.find(params[:id])
   end 
end 
```

该模型

```
 class Doc < ActiveRecord::Base
  attr_accessible :keywords, :text, :title
 end 
```

**更新** 一位对这篇文章发表评论的人指出，当我调用 destroy 时，我应该销毁某些东西，但我认为在对象上调用 destroy 会破坏对象

```
d.destroy()  #should destroy d, shouldn't it? 
```

这是我从文档中了解到的

```
 book.destroy({success: function(model, response) {
  ...
}}); 
```

事实上，当我在一个对象上调用 save() 时，它会将对象保存到数据库中

```
d.save(); #this works, so why not d.destroy(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:44:18.403

当您在 Backbone 代码中执行此操作时：

```
d.destroy(); 
```

您将触发对服务器的 DESTROY 请求，并且客户端模型将被销毁和清理。您的服务器代码必须通过销毁服务器端模型来处理 DESTROY 请求；您的`destroy`控制器不这样做：

```
def destroy
  respond_with Doc.find(params[:id])
end 
```

所做的只是`Doc`从数据库中提取适当的内容并将其发送回客户端：您的`destroy`控制器需要销毁服务器端模型。您需要调整控制器方法以包括：

```
doc = Doc.find(params[:id])
doc.destroy 
```

`find`对and调用进行一些权限检查、错误检查和异常处理`destroy`可能也是一个好主意。

# python - 如何在Window XP + MinGW + Qt4.8.1上构建shiboken

> ID：14227270
> 
> 赞同：1
> 
> 时间：2013-01-09T02:11:45.133
> 
> 标签：python, qt, cmake, pyside

我试图从源代码构建 shiboken 1.1.2，配置为 Window XP + MinGW+Qt4.8.1，但总是出现以下错误。相信是因为我没有安装libxml2和libxslt。所以我使用他们的 Windows 二进制安装程序安装了这两个应用程序。安装它们后，我将它们的 bin 文件夹添加到我的 PATH 并再次 camke shiboken。同样的错误。谁可以帮我这个事？

提前致谢！

朱

```
D:\shiboken-1.1.2\build>cmake .. -G"MinGW Makefiles"
-- Could NOT find LibXml2 (missing:  LIBXML2_INCLUDE_DIR) (Required is at least version "2.6.32")
-- Could NOT find LibXslt (missing:  LIBXSLT_INCLUDE_DIR) (Required is at least version "1.1.19")
CMake Warning at ApiExtractor/CMakeLists.txt:12 (message):
  libxslt and/or libxml not found, disabling support for doc strings!

-- sphinx-build - not found! doc target disabled
-- Tests will be generated avoiding the protected hack!
-- Configuring done
-- Generating done
-- Build files have been written to: D:/shiboken-1.1.2/build 
```

# sql - 将 DataGridView 数据存储到 SQL Server 2008R2？

> ID：14227275
> 
> 赞同：-1
> 
> 时间：2013-01-09T02:12:27.993
> 
> 标签：sql, vb.net, datagridview, sql-server-2008-r2

请看下面的截图...

![DataGridView 模型](../Images/9aaa0c17384fdfe3607f3b147446410d.png)

我想知道，将 DataGridView 中的所有数据存储到列的最佳方法是什么？此数据特定于一个客户而不是其他任何人，因此这就是为什么我希望它存储在该客户的特定列中......我使用 SQL Server 2008R2 和带有参数的存储过程，以备不时之需。如果有人可以提供在 vb.net 中设置的示例，我将不胜感激！

这是我的函数，除了 datagridview 数据之外，它可以保存...

```
 'Save the invoice to later reference it'
Public Shared Function SaveInvoice(ByVal strInvDate As String, ByVal customerID As Integer, ByVal strCustomerName As String, ByVal strHTML As String, ByVal invoiceID As Integer) As Integer
    Dim Conn As String = "Data Source=localhost\sqlexpress;Initial Catalog=NuTech;Integrated Security=True"
    Dim oParam As SqlParameter() = { _
        New SqlParameter("@" & CustomerDocumentConstants.CUSTOMER_ID, customerID), _
        New SqlParameter("@" & CustomerDocumentConstants.INVOICE_DATE, strInvDate), _
        New SqlParameter("@" & CustomerDocumentConstants.CUSTOMER_NAME, strCustomerName), _
        New SqlParameter("@" & CustomerDocumentConstants.INVOICE_HTML, strHTML), _
        New SqlParameter("@" & CustomerDocumentConstants.INVOICE_ID, invoiceID), _
        New SqlParameter("@New_" & CustomerDocumentConstants.INVOICE_ID, 0)
        }

    oParam(oParam.Length - 1).Direction = ParameterDirection.Output

    Try
        SQLHelper.ExecuteNonQuery(Conn, CommandType.StoredProcedure, SAVE_INVOICE, oParam)

        If oParam(oParam.Length - 1).Value IsNot DBNull.Value Then
            invoiceID = oParam(oParam.Length - 1).Value
        End If

    Catch ex As Exception
        'Just catch it for all I care!"
    End Try

    Return invoiceID
End Function 
```

在我的参数中显示 INVOICE_HTML、strHTML 的地方：如果可能的话，我想用它来保存来自 datagridview 的数据。如果您需要任何帮助，请告诉我！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:10:30.890

更新--> 在使用 XML 拉扯一些头发之后，我能够得到我需要的东西。我现在可以存储和检索我需要的所有数据，我可以说它非常快，我可以说在数据库方面几乎没有 IO。我想对任何试图提供帮助的人说“谢谢”。

# html - 将图像与文本垂直对齐，包括 ie

> ID：14227281
> 
> 赞同：0
> 
> 时间：2013-01-09T02:13:29.327
> 
> 标签：html, css, vertical-alignment

最好的方法是什么？

这是我的html：

```
<div id="wrapper">
   <img src="http://i.imgur.com/b8xFk.jpg" /> <span id="text">Twitter</span>
</div> 
```

和我的CSS：

```
#wrapper{
  background-color:orange;
  height:60px;
  padding: 10px;
}

#wrapper img{
  vertical-align:middle;
}

#wrapper #text{
  line-height:60px; 
} 
```

还有一个[jsfiddle](http://jsfiddle.net/ZSQmg/)

如您所见，图像低于文本（至少在 Firefox 16 中）。在即，事情变得更加不稳定。将图像与文本垂直对齐以实现跨浏览器兼容性的最佳做法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:44:54.083

试试这个：

```
#wrapper img{
  vertical-align:middle;
  /*New:*/
  padding-bottom:4px;
} 
```

**[演示](https://jsfiddle.net/ZSQmg/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:39:16.613

在这里。这就是我正在尝试的方式。不确定是否有更清洁的方法。有什么建议么？

HTML：

```
<div class="foo">
<a href="#">
    <img src="http://i.imgur.com/b8xFk.jpg" />
    <span class="bar">&nbsp;Facebook </span>
</a> 
```

CSS：

```
.foo {
    height: 50px;
    line-height: 50px;
    background-color:orange;
}

.bar{
   font-size: 14px;
   line-height: 26px;
   vertical-align: middle;
}

.foo img {
    vertical-align: middle;
    margin-left: 10px;
}

.foo a{
    text-decoration: none;
} 
```

最后，这里是[jsFiddle](http://jsfiddle.net/Md3uE/)

谢谢

# php - 使用“真实”客户端和服务器客户端对 Web 服务进行身份验证

> ID：14227283
> 
> 赞同：1
> 
> 时间：2013-01-09T02:13:38.373
> 
> 标签：php, oauth-2.0, restful-authentication

我们有一个应用程序被部署为我们客户的实例。然后，这些实例使用 REST API 与我们的计费和管理 Web 服务进行通信。

这是一个图表：

![在此处输入图像描述](../Images/b8d9fa8e00facbac4807d7abe47b45a3.png)

永远不会公开可用，`Billing and management service`只有在我们为`Customer Instance`. 由于这是一个服务器到服务器的接口，我觉得这`2 legged OAuth`是最好的选择。

`Customer instance`它还包含一个 API（也是 RESTful）。第三方开发人员可以为其构建应用程序，因此我们将使用并`3 legged OAuth`遵循 Facebook 的模型。

但是，我们也希望能够允许`Billing/Management`访问该 API（也在客户实例上）。

*   我们应该如何验证这个区域？我们也应该使用 2 腿 OAuth 吗？
*   在同一个 API 端点上同时运行 2 条腿 OAuth 和 3 条腿 OAuth 会导致安全隐患吗？

我们计划使用 OAuth 2.0，所有的部分和服务都是用 PHP 编写的。

# c++ - 在 mingw 中发送信号的“kill”函数在哪里？

> ID：14227285
> 
> 赞同：0
> 
> 时间：2013-01-09T02:13:50.913
> 
> 标签：c++, c, visual-c++, mingw

我在 windows xp 中用 mingw 编译了我的代码。我想向子线程发送 SIGINT 信号。但是“signal.h”的头文件不包含“kill”函数。函数 raise(SIGINT) 将完成程序。我必须使用 kill(pid,SIGINT) 才能工作。但是没有函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:41:33.407

kill 函数是 c 标准库的一部分，代表一个系统调用，它将指定的信号发送到目标进程。由于你使用mingw，它不使用glibc库，而是使用gnulib来编译，所以你应该检查相应的gnulib函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:52:46.367

mingw 不支持在 Windows 上杀死。您可以使用 SendMessage 到另一个线程的窗口，让它处理它并优雅地死去。对于非窗口应用程序，使用事件（CreateEvent / WaitForSingleObject）作为与“子”线程的通信机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T02:28:14.307

看看 Win32 函数[TerminateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714%28v=vs.85%29.aspx)

# objective-c - 从 URL 和传递参数打开 iOS 应用程序

> ID：14227288
> 
> 赞同：25
> 
> 时间：2013-01-09T02:14:11.963
> 
> 标签：objective-c, ios, parameters, url-scheme

一个链接应该会打开应用程序。我有这个工作。我只想知道如何传递参数。假设网址是“addappt://?code=abc”。当视图控制器弹出时，代码字段应该填充文本 - 等号后的字母要签名。我有一部分工作要做。我使用以下内容 `(in app delegate.m)`：

```
NSArray *elements = [url.query componentsSeparatedByString:@"="];
NSString *key = [[elements objectAtIndex:0] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
          val = [[elements objectAtIndex:1] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

（顺便说一句：val 在 appdelegate.h 中声明

我也可以传递`val`给视图控制器。我唯一的问题是填充名为`'code'`. 一旦通过链接打开应用程序，如何填充代码？

帮助赞赏。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-09T08:12:24.750

[这是在 iOS](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)中使用自定义 URL 方案的一个很好的教程

与教程中一样，您应该解析 URL 参数并将它们存储在此方法中的应用程序中使用：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
  // Do something with the url here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-26T09:16:50.297

在 Xcode 12 上，此代码完美运行。你可以想象这也是一个常规的 URL。在源应用程序中，您可以使用参数调用和打开目标 URL，例如

```
 let url = URL(string: "DestinationApp:PATH?PARAMETER=11111")

    UIApplication.shared.open(url!) { (result) in
        if result {
            print(result)
           // The URL was delivered successfully!
        }
    } 
```

目标应用程序可以使用此方法处理 AppDelegate 中的方法。警报用于双重检查。

```
 func application(_ app: UIApplication, open url: URL, options: [UIApplication.OpenURLOptionsKey : Any] = [:]) -> Bool {
            // Determine who sent the URL.
            let sendingAppID = options[.sourceApplication]
            print("source application = \(sendingAppID ?? "Unknown")")

            // Process the URL.
            guard let components = NSURLComponents(url: url, resolvingAgainstBaseURL: true),
                let path = components.path,
                let params = components.queryItems else {
                    print("Invalid URL or path missing")
                    return false
            }

            if let parameter = params.first(where: { $0.name == "PARAMETER" })?.value {
                print("path = \(path)")
                print("parameter = \(parameter)")

                let alert = UIAlertController(title: "Path = \(path)", message: "Parameter = \(parameter)", preferredStyle: .alert)

                let keyWindow = UIApplication.shared.windows.filter {$0.isKeyWindow}.first

                if var topController = keyWindow?.rootViewController {
                    while let presentedViewController = topController.presentedViewController {
                        topController = presentedViewController
                    }

                    topController.present(alert, animated: true, completion: nil)
                }
                return true
            } else {
                print("parameter is missing")
                return false
            }
} 
```

# jquery - 使用 jQuery 在表中删除和插入 td

> ID：14227291
> 
> 赞同：0
> 
> 时间：2013-01-09T02:14:36.820
> 
> 标签：jquery, html

这个 HTML 标记是固定的，不能直接修改：

```
<table>
    <tbody>
        <tr>
            <td id="LeftPanel">A</td>
            <td>B</td>
            <td>C</td>
        </tr>
    </tbody>
</table> 
```

我正在尝试使用 jQuery 将标记更改为：

```
<table>
    <tbody>
        <tr>
            <td id="LeftPanel">A</td>
            <td>C</td>
            <td id="RightPanel">D</td>
        </tr>
    </tbody>
</table> 
```

1.  #LeftPanel 之后的 TD 需要删除 (B)。
2.  需要将 ID 为 #RightPanel 的新 TD 添加到表 (D) 的末尾。

请注意，完整源代码在同一级别上有许多表，因此唯一要使用的参考点是 td#LeftPanel。ABCD 仅供参考，不能用作脚本的一部分（完整的源代码在每个 TD 中都有很多 HTML，包括嵌套表）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:21:06.393

[http://api.jquery.com/category/traversing/](http://api.jquery.com/category/traversing/)

```
$('#LeftPanel')
        .next()
        .remove()
        .end()
        .parent()
        .append('<td id="rightPanel">D</td>'); 
```

[http://jsfiddle.net/msKvR/](http://jsfiddle.net/msKvR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:17:51.580

```
$('td#LeftPanel ~ td ').remove(); // remove b
$('td#LeftPanel ~ td ').append('<td id="RightPanel">D</td>'); // add d 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T02:20:20.220

如果您有多个表，请不要使用重复的 ID

改为这样做：

JS：

```
$('.LeftPanel')
        .next()
        .remove()
        .end()
        .parent()
        .append('<td class="RightPanel">D</td>'); 
```

HTML：

```
<table>
    <tbody>
        <tr>
            <td class="LeftPanel">A</td>
            <td>B</td>
            <td>C</td>
        </tr>
    </tbody>
</table>
<table>
    <tbody>
        <tr>
            <td class="LeftPanel">A</td>
            <td>B</td>
            <td>C</td>
        </tr>
    </tbody>
</table>
<table>
    <tbody>
        <tr>
            <td class="LeftPanel">A</td>
            <td>B</td>
            <td>C</td>
        </tr>
    </tbody>
</table> 
```

# android - RadioGroup 中的样式化 Android RadioButtons 不起作用

> ID：14227296
> 
> 赞同：2
> 
> 时间：2013-01-09T02:15:03.417
> 
> 标签：android, styles, radio-button, themes

我有一个包含滚动视图的简单布局，如下所示：

```
<ScrollView
        android:id="@+id/inputfields"
        android:layout_width="fill_parent"
        android:layout_height="280dp"
        android:clipChildren="true"
        android:measureAllChildren="true"
        android:visibility="gone" >
</ScrollView> 
```

其余的布局无关紧要。

在 OnCreate() 中，我将 RadioButtons 添加到新的 RadioGroup，通过 setOnCheckedChangeListener() 分配我的操作，并将 RadioGroup 添加到 ScrollView 容器。请参阅下面的代码摘录。

```
protected void onCreate(Bundle savedInstanceState) {
setContentView(R.layout.inputdlg);
//Populate the list
ScrollView layout = ScrollView)findViewById(R.id.inputfields);

Context cont = getContext();

final RadioGroup rg = new RadioGroup(cont);
rg.setScrollContainer(true);

int id = 0; //For the radiogroup the id does not need to be unique
for(String s : mStringsList) {
    RadioButton rb = new RadioButton(cont);
    rb.setText(s);
    rb.setId(id++);
    rb.setGravity(Gravity.CENTER_VERTICAL);
    rg.addView(rb);
}

rg.check(Integer.getInteger(mValue,0)); //0 is the default
rg.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    public void onCheckedChanged(RadioGroup group,  int checkedId) {
        if(mRadioListener!=null)
            mRadioListener.onClick(mEt.getText().toString());
        dismiss();
    }
});
layout.addView(rg);
} 
```

**问题。** 视图滚动良好，但单选按钮根本不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:35:05.683

它不是 ScrollView 或任何东西，而是我在 Styles.XML 中错误定义的自定义 RadioButton 样式

请参阅下面的区别：

坏的一个：

```
<style name="Widget.RadioButtonR" parent="android:Widget">
    <item name="android:background">@drawable/btn_radio_label_background</item>
    <item name="android:button">@drawable/btn_radio_r</item>
</style> 
```

正确的那一个：

```
<style name="Widget.RadioButtonR" parent="@android:style/Widget.CompoundButton.RadioButton">
    <item name="android:background">@drawable/btn_radio_label_background</item>
    <item name="android:button">@drawable/btn_radio_r</item>
    <item name="android:textColor">@color/myfontcolor</item>
</style> 
```

# php - 突出显示直到某个日期的最新帖子

> ID：14227302
> 
> 赞同：1
> 
> 时间：2013-01-09T02:15:15.150
> 
> 标签：php

我正在尝试使用 DateTime 来确定新发布的漫画应该突出显示多长时间。所以，我的目标是让最新的漫画“突出显示”2 天，然后恢复正常（灰色，和其他人一样）。

**注意**：这是我之前问过的一个问题。我正在重申它，因为前面的问题对人们来说变得相当混乱。所以我重新编写了代码，简化了我的问题，并重新提问。

![在此处输入图像描述](../Images/8a2f6293b0b97a703624e3a22458f48d.png)

**我的逻辑：**

```
Loop through all comics {
   if comic date >= current date, display that comic with highlight CSS tag, 

   else display it with normal CSS tag.
} 
```

**我的代码：**我想知道为什么这不起作用......它甚至没有显示最新的漫画（其日期> current_date）。

```
 $desc = (isset($_GET['description']) ? ($_GET['description']) : null);  

    $row = $catResult->fetch_assoc();

    $current_date = new DateTime;
    echo "Current Date: " . $current_date->format('Y-m-d H:i:s');

    //$comic_date->modify('3 day');

    //DISPLAY IMAGES TO CORRECT PAGE FROM DATABASE  

            echo '<ul>';
        $imageCounter = 0;
        while (($imageCounter < $imagesPerPage) && ($row = $catResult->fetch_assoc())) {

            $comic_date = new DateTime($row['date']);

            $class = ($comic_date >= $current_date) ? 'newcomics' : 'comics';   
                echo '<li>';                
                    echo        '<span class="' . $class . '"><a href=".?action=viewimage&site='.$site. '&id=' . $row['id'] .'" title="' . $row['description'] . '" alt="' . $row['title'] . '">
                                <img src="./scripts/thumber.php?img=.' . $thumbpath.$row['thumb'] . '&mw=220&mh=220"/></a> 
                                <br /><br /> ' . $row['description'] . $row['date'] . '</span>';                                
                    $imageCounter++;
                echo '</li>';

            }   
        echo '</ul>'; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:38:51.630

您的三元条件已设置为条件为真，您只输出`<span class="newcomics">`而不是其他任何内容（不是锚标记等）。

我建议这样做以使其更具可读性：

```
$class = ($row['date'] >= $current_date) ? 'newcomic' : 'comic'

echo '<span class="' . $class . '"><a href=".?action=viewimage&site='.$site. '&id=' . $row['id'] .'" title="' . $row['description'] . '" alt="' . $row['title'] . '"><img src="./scripts/thumber.php?img=.' . $thumbpath.$row['thumb'] . '&mw=220&mh=220"/></a> <br /><br /> ' . $row['description'] . $row['date'] . '</span>'; 
```

# regex - 我可以在 sed 中提及从不同模式到其他模式的反向引用吗

> ID：14227306
> 
> 赞同：3
> 
> 时间：2013-01-09T02:16:09.010
> 
> 标签：regex, linux, sed

假设我有这个数据

```
1:a:b:c
2:d:e:f
3:a:b
4:a:b:c:d:e:f 
```

我想要的输出是

```
1a1b1c
2d2e2f
3a3b
4a4b4c4d4e4f 
```

我从[这个问题中得到了](https://stackoverflow.com/questions/6566007/sed-replace-globally-a-delimiter-with-the-first-part-of-the-line/6566128#6566128)

我正在尝试的解决方案是这个

`sed -re 's/^([0-9]):/\1/g;s/:/L/g' temp.txt`

我有两种不同的模式。我只想知道我可以`\1`在第二种模式中使用吗

像这样

`sed -re 's/^([0-9]):/\1/g;s/:/\1/g' temp.txt`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T02:56:22.903

捕获组只能在创建它的替换命令中使用。这是一个很好的学习资源：http `sed`: [//www.grymoire.com/Unix/Sed.html](http://www.grymoire.com/Unix/Sed.html)

解决您的问题的更好方法是使用`awk`：

```
awk -F: '{ OFS=$1; $1="" }1' file 
```

结果：

```
1a1b1c
2d2e2f
3a3b
4a4b4c4d4e4f 
```

解释：

该`-F`标志将字段分隔符设置为冒号 ( `-F:`)。然后，对于每一行输入，将输出字段分隔符设置为第一个字段 ( `OFS="$1"`) 并“删除”第一个字段（或者只是将其设置为 null; `$1=""`）。最后`1`，启用默认打印。HTH。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T02:48:57.973

你不能那样做，但还有另一种方法：

```
sed ':a;s/^\([0-9]*\):\([^:]*\):/\1:\2\1/;ta;s/://' input 
```

## 解释

```
do {                                                           // a:
  1) match numbers at the beginning and a `:`                  // ^\([0-9]*\):
  2) match and remember everything that is not `:` upto an `:` // \([^:]*\):
  3) swap the `:` with the number from 1 (keep the first `:`)  // /\1:\2\1/
} while (there are matches)                                    // ta
finally delete the `:` after the number                        // s/:// 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:06:06.020

这可能对您有用（GNU sed）：

```
sed -r ':a;s/^(([^:]*):.*):|:/\1\2/;ta' file 
```

# java - Java中的快速哈希表

> ID：14227311
> 
> 赞同：4
> 
> 时间：2013-01-09T02:16:50.373
> 
> 标签：java, arraylist, hashtable, chess

我正在创建一个国际象棋程序，该程序利用先前评估位置的哈希表来（希望）减少搜索时间。唯一的问题是我使用 ArrayList 来存储哈希值，并且查找时间会根据我存储的位置数而增加。如何获得一个具有独立于当前大小的查找时间的哈希表？（请原谅我，我在 java 方面有点菜鸟，目标 c 真的是我的事）

编辑：如果重要的话，我正在使用 Zobrist 快速散列技术。根据一些试验，我确定不是哈希键的生成占用了大量时间。散列方法非常快，其对速度的影响几乎不明显。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T02:31:18.503

标准的 Java HashMap 非常好，并且已经可供您使用，但是如果您想要 Java 中最快的地图，请使用 Trove ( [http://trove4j.sourceforge.net/html/overview.html](http://trove4j.sourceforge.net/html/overview.html) )，它填充了以下数据结构针对性能进行了优化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T23:12:37.710

首先是一个初步说明：在国际象棋术语中，术语[转置表](http://chessprogramming.wikispaces.com/Transposition+Table)比“哈希表”更常见，并且会在 Google 上为您提供更好的搜索结果。

考虑到这一点，转置表和通用哈希表（例如，Java `Map`）之间有一个重要区别：

映射是一个关联数组，它保证在插入新值时不会删除现有条目。通常，这是您想要的，但是当您编写国际象棋引擎时，如果您不删除或覆盖旧条目，您很快就会耗尽内存。

相比之下，转置表更像是一个缓存，它只包含最近的条目。它可以实现为一个简单的固定大小的数组，由当前位置的哈希值寻址。计算密钥的一种众所周知且非常有效的方法是[Zobrist 散列](https://en.wikipedia.org/wiki/Zobrist_hashing)（您已经在问题中提到它）。该键用于索引数组。添加新条目时，它们将简单地覆盖现有条目。

这里有一些伪代码来说明这个想法：

```
// the transposition table entry
class TTEntry {
  long hashKey; // should be at least 64-bit to be safe

  // other information, e.g.:
  Move move;
  int distance;
  // ...
}

TTEntry[] ttable = ... // the more memory, the better

Entry getTTEntry(Board board) {
  long hashKey = board.getHashKey();
  int index = hashKey % ttable.length;
  return ttable[index];
}

void store(Board board) {
  Entry entry = getTTEntry(board);
  entry.hashKey = board.getHashKey();
  entry.move = ...;
  entry.distance = ...;
}

void probe(Board board) {
  Entry entry = getTTEntry(board);
  if (entry.hashKey == hashKey) {
    // entry found
    // ... do something with entry.move and entry.distance
  }
} 
```

您说您使用了一个，`ArrayList`但您的查找时间随着存储位置的数量而增加。如果您使用上面示例中的技术，那将永远不会发生。它不仅与搜索到的位置数量无关，而且它也会比 a 快`HashMap`，后者内部要复杂得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T02:23:22.040

`java.util.HashMap`是你最好的选择。键查找是`O(1)`（摊销的），它是一个非常好的通用 HashMap。

这并不是说它是最佳的：如果您知道如何并且有很多时间/决心，您当然可以设计一个自定义哈希图实现以更好地适应您的特殊情况。但是一个常规的 HashMap 绝对是开始的地方——你以后总是可以优化的。

# ios - 应用程序在后台时核心位置不起作用

> ID：14227314
> 
> 赞同：1
> 
> 时间：2013-01-09T02:17:10.513
> 
> 标签：ios, core-location

我试图让我的应用程序在后台运行核心位置但没有成功。我配置了正确的密钥`info.plist`并具有以下代码：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    NSLog(@"background");

    MainViewController *view2 = [[MainViewController alloc]init];
    view2.localizacao.distanceFilter = 250;
    view2.localizacao.desiredAccuracy = kCLLocationAccuracyHundredMeters;
    [view2.localizacao startMonitoringSignificantLocationChanges]; 
} 
```

当我在前台运行应用程序时，一切正常。但在后台，什么都没有。我能做些什么？

# javascript - ajax 发布/插入数据/行到谷歌电子表格

> ID：14227318
> 
> 赞同：2
> 
> 时间：2013-01-09T02:17:32.727
> 
> 标签：javascript, jquery, google-sheets

如何将数据发布（或插入）到谷歌电子表格？我不使用表单，但我有输入字段。但是，数据无法发送到我的电子表格。如果有人可以帮忙？

```
 <input id="name" type="text" />
 <input id="location" type="text" /> 
```

我想使用 ajax 将输入的数据发布到谷歌电子表格。

```
 $.ajax({
            type: 'post',
            url: 'https://docs.google.com/spreadsheet/ccc?key=8D84JF82FK23413',
            data: {
               name:  $('#name').val(),
               country: $('#location').val()
            },
            success: alert('PASS')
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T02:43:52.900

我认为仅通过 AJAX 请求插入一行是不可能的。AJAX 不能跨不同的域工作。

有很多东西要学，但您可以从 Google Speadsheet API 开始...

[https://developers.google.com/google-apps/spreadsheets](https://developers.google.com/google-apps/spreadsheets)

# java - 将 Java 控制台带到屏幕前面

> ID：14227319
> 
> 赞同：0
> 
> 时间：2013-01-09T02:17:42.517
> 
> 标签：java, console

我有一个仅在控制台中工作的 Java 应用程序（例如 Windows 命令提示符）。我想偶尔把窗口带到前面的屏幕上。有什么东西可以添加到我的代码中来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:25:14.167

如果您使用 awt 或 swing，那么两者`Window`都`JFrame`可以`toFront()`将窗口置于前面。如果您使用控制台，我认为这是不可能的。

# java - Java，无法访问同一类中的方法

> ID：14227320
> 
> 赞同：0
> 
> 时间：2013-01-09T02:17:50.877
> 
> 标签：java

调用 buildInven(bigPath.getText()) 时出现问题，我不断收到

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at TestLayout06$InputPanel.actionPerformed(TestLayout06.java:112) 
```

抛出。任何想法我的问题可能是什么？

代码：

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;
import java.util.StringTokenizer;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestLayout06 {

public static void main(String[] args) 
{
    new TestLayout06();
}

public TestLayout06() 
{
    EventQueue.invokeLater(new Runnable() 
    {
        @Override
        public void run() 
        {
            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            } catch (ClassNotFoundException ex) {
            } catch (InstantiationException ex) {
            } catch (IllegalAccessException ex) {
            } catch (UnsupportedLookAndFeelException ex) {
            }

            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLayout(new BorderLayout());
            frame.add(BorderLayout.NORTH, new InputPanel());
            frame.add(BorderLayout.CENTER, new InfoPanel());
            frame.add(BorderLayout.SOUTH, new CLInfoPanel());
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setSize(500, 500);
            frame.setVisible(true);

        }            
    });
}

protected class InputPanel extends JPanel implements ActionListener {

    int InventorySize = 2000;
    String AItem[] = new String[InventorySize];
    String Active[] = new String[InventorySize];
    String IdNum[] = new String[InventorySize];

    String Item[] = new String[InventorySize];
    String BNumber[] = new String[InventorySize];
    String Descrip[] = new String[InventorySize];
    String Retail[]  = new String[InventorySize];
    String Disc[] = new String[InventorySize];
    String Price[]  = new String[InventorySize];

    JTextArea bigPath = null;
    JButton bigOk = null;
    JTextArea lilPath = null;
    JButton lilOk = null;

    public InputPanel() 
    {            
        JLabel label = new JLabel("Menu");
        setLayout(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        add(label, gbc);

        JTextArea bigPath = new JTextArea("C:\\Users\\User\\Documents\\InputInventory.txt", 1, 30);
        JButton bigOk = new JButton("Load Inventory");
        JTextArea lilPath = new JTextArea("C:\\Users\\User\\Documents\\ItemsMarked.txt", 1, 30);
        JButton lilOk = new JButton("Load Info");

        bigOk.addActionListener(this);
        lilOk.addActionListener(this);

        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridy++;
        add(bigPath, gbc);
        gbc.gridy++;
        add(bigOk, gbc);
        gbc.gridy++;
        add(lilPath, gbc);
        gbc.gridy++;
        add(lilOk, gbc);
    }

    public void actionPerformed(ActionEvent evt) 
    {
        String str = evt.toString();
        boolean inv = str.contains("Load Inventory");
        boolean item = str.contains("Load Info");
        if (inv)
            this.buildInven(this.bigPath.getText());
        if (item)
            this.buildCLInf(lilPath.getText());
    }

    public void buildInven(String arg)
    {
        Scanner in = null;
        try
        {
            in = new Scanner(new File(arg));
        }
        catch (FileNotFoundException e)
        {
            bigPath.setText(arg + " not found");
        }
        int i = 0;
        while (in.hasNextLine())
        {
            int j = 0;
            StringTokenizer tkner = new StringTokenizer(in.nextLine());
            while (tkner.hasMoreTokens())
            {
                if(j == 0)
                    Item[i] = tkner.nextToken("|");
                else if(j == 1)
                    BNumber[i] = tkner.nextToken("|");
                else if(j == 2)
                    Descrip[i] = tkner.nextToken("|");
                else if(j == 3)
                    Retail[i] = tkner.nextToken("|");
                else if(j == 3)
                    Disc[i] = tkner.nextToken("|");
                else if(j == 5)
                    Price[i] = tkner.nextToken("|");
                else
                    tkner.nextToken("|");
                 j++;
            }
            i++;
        }
        in.close();
    }

    public void buildCLInf(String arg)
    {
        Scanner in = null;
        try
        {
            in = new Scanner(new File(arg));
        }
        catch (FileNotFoundException e)
        {
            lilPath.setText(arg + " not found");
        }
        int i = 0;
        while (in.hasNextLine())
        {
            int j = 0;
            StringTokenizer tkner = new StringTokenizer(in.nextLine());
            while (tkner.hasMoreTokens())
            {
                if(j == 0)
                    AItem[i] = tkner.nextToken("|");
                else if(j == 1)
                    Active[i] = tkner.nextToken("|");
                else if(j == 2)
                    IdNum[i] = tkner.nextToken("|");
                else
                    tkner.nextToken("|");
                 j++;
            }
            i++;
        }
        in.close();
    }

}

protected class InfoPanel extends JPanel {

    public InfoPanel() {            
        JLabel label = new JLabel("Menu");
        setLayout(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        add(label, gbc);

        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridy++;
        add(new JButton("Option 1"), gbc);
        gbc.gridy++;
        add(new JButton("Option 2"), gbc);
        gbc.gridy++;
        add(new JButton("Option 3"), gbc);
    }
}

protected class CLInfoPanel extends JPanel {

    public CLInfoPanel() {            
        JLabel label = new JLabel("Menu");
        setLayout(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        add(label, gbc);

        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridy++;
        add(new JButton("Option 1"), gbc);
        gbc.gridy++;
        add(new JButton("Option 2"), gbc);
        gbc.gridy++;
        add(new JButton("Option 3"), gbc);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:19:48.067

问题是您的`bigPath` *字段*仍然为空。在您的构造函数中，您要声明一个*局部*变量并对其进行初始化：

```
JTextArea bigPath = new JTextArea(...); 
```

这根本不会改变你的领域的价值。因此，该字段的值保持其默认值`null`，因此当您执行此代码时：

```
bigPath.getText() 
```

...你得到`NullPointerException`.

只需将上面的内容更改为：

```
bigPath = new JTextArea(/* code as before */); 
```

...并且对`bigOk`,`lilPath`也做同样的`lilOk`事情，在那里你有同样的错误。

这不一定是您的代码中的*全部*错误，但这就是您遇到异常的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T02:20:51.117

你得到了一个 NPE，因为你已经`bigPath`在方法中第二次声明了，因此你正在隐藏/隐藏你认为你正在使用的那个（在类中声明为一个字段的那个）。

改变：

```
JTextArea bigPath = new JTextArea("C:\\Users\\User\\Documents\\InputInventory.txt", 1, 30); 
```

至：

```
bigPath = new JTextArea("C:\\Users\\User\\Documents\\InputInventory.txt", 1, 30); 
```

这也适用于您在该范围内重新声明的所有其他变量。

# java - 在计时器中使用“if”语句执行任务而不满足指定条件？

> ID：14227325
> 
> 赞同：0
> 
> 时间：2013-01-09T02:19:09.360
> 
> 标签：java, if-statement, timer

我在计时器中使用“if”语句时遇到了麻烦。我将计时器设置为每秒运行一次 if 循环，但是即使不满足“if”条件，if 语句中的操作也会执行。我在这里做错了什么，还是这是不可能的？

代码：

```
 //GLOBAL TIMERS
    //car edge detection
    int initialDelay = 0; // start after 0 seconds
    int period = 50;        // repeat every 5 seconds
    final Timer carAI = new Timer();
    TimerTask task = new TimerTask() {
      public void run() {
          if (redcar.getX() == -50); {
              redcar.setIcon(new ImageIcon(gui.class.getResource("/main/redcar.png")));
              redcar.setLocation(redcar.getX() + 5, redcar.getY());
          }

      }
    };
    carAI.scheduleAtFixedRate(task, initialDelay, period); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T02:26:22.793

如果@Oli 的提示还不够，让我在编译器看到您的代码时重写它。

```
if (redcar.getX() == -50)
{;}
 ^  // the great ;
{
     redcar.setIcon(new ImageIcon(gui.class.getResource("/main/redcar.png")));
     redcar.setLocation(redcar.getX() + 5, redcar.getY());
} 
```

删除该分号以解决您的问题。

# javascript - 打开 jQuery UI 对话框时 IE 落后

> ID：14227326
> 
> 赞同：0
> 
> 时间：2013-01-09T02:19:18.547
> 
> 标签：javascript, jquery, jquery-ui, internet-explorer, cross-browser

使用的时候有个很奇怪的问题`jQuery UI dialog`，每次使用打开对话框`IE`，浏览器都会跳到后面。顺便说一句，我使用 Firefox、Chrome 和 Safari 没有问题。

**编辑**

问题的原因是我`$('*').blur();`在对话框打开后添加的，目的是删除`auto focus`.

# java - Mac 守护程序应用程序 LSUIElement 应用程序在打开浏览器时显示在 Dock 中

> ID：14227327
> 
> 赞同：1
> 
> 时间：2013-01-09T02:19:29.220
> 
> 标签：java

所以我正在尝试为 Mac 制作一个隐藏的守护程序应用程序。我在 jar 的 plist 中有 LSUIElement ，它确实从 Dock 中隐藏了应用程序，直到我使用打开浏览器窗口`java.awt.Desktop.getDesktop().browse(u);`时，应用程序显示在 Dock 中并停留在那里。有谁知道我该如何解决这个问题？

# google-analytics - 通过测量协议将跟踪数据发送到谷歌分析时，客户端 ID 是什么？

> ID：14227331
> 
> 赞同：61
> 
> 时间：2013-01-09T02:20:04.257
> 
> 标签：google-analytics, google-analytics-api

我想使用 Google 的新测量协议从我的服务器而不是 JavaScript 发送跟踪事件。

此页面说需要客户端 ID： [https ://developers.google.com/analytics/devguides/collection/protocol/v1/devguide#required](https://developers.google.com/analytics/devguides/collection/protocol/v1/devguide#required)

这个页面说它是可选的： [https ://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#visitor](https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#visitor)

另外，这些文档中定义的格式是不同的——第一页给出了一个整数作为例子，只是说它是“一个唯一值”，而第二个链接说它应该是一个 UUID。

如果我在后端发送用户 ID 或生成的 UUID，Google 如何知道将该访问者链接到现有访问者会话？看来我需要检索 GA 对现有用户的内部引用。

任何帮助表示赞赏 - 谢谢！

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-11T15:33:49.147

**整数或 UUID**

当您使用 javascript 跟踪时，`cid`它相当于 cookie 中的第二个值。`_utma`在 js 跟踪中，它是一个随机整数（由 生成`Math.round(2147483647 * Math.random())`）。但它是作为字符串存储和发送的：因此您可以使用两种格式（整数或 UUID）。

**必需/可选**

通过 js 跟踪，Analytics 服务器会忽略发送的缺少用户 ID 的请求。所以假设它是必需的。

**将 Web 访问者与测量协议操作联系起来**

如果您想将您的后端用户与之前使用 Analytics javascript 跟踪的访问者相关联`ga.js`，您可以从cookie中获取`cid`值。`_utma`但我不推荐它；每次更改（终端或浏览器更改、cookie 清理等）时，您将失去与客户先前操作的链接。

**更新**

`analytics.js`问问题时不存在。`cid`现在存储在 cookie 中`_ga`。您可以通过以下方式在 javascript 中获取它：

```
ga(function(tracker) {
  var clientId = tracker.get('clientId');
}); 
```

在撰写本文时，当您像上面的代码那样从跟踪器中获取 clientId 时，它不会给您一个 UUID，而是两个随机的 32 位整数，格式为“XY”。此实现将来可能会更改为 UUID。

或者用你自己的值设置它（比如后端生成的 UUID）：

```
ga('create', 'UA-XXXXX-Y', {'clientId': 'your_client_id'}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-15T23:18:12.813

在 Rails 中：

```
 def save_google_analytics_client_id
    if current_user && cookies["_ga"]
      client_id = cookies["_ga"].split(".").last(2).join(".")
      if current_user.google_analytics_client_id != client_id
        current_user.google_analytics_client_id = client_id
        current_user.save
      end
    end
  end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-03T22:14:29.027

我正在使用带有 express 和通用分析模块的节点，并选择使用嵌入在 _ga cookie 中的 cid，而不是生成我自己的 cid 服务器端。

我的 server.js 看起来像这样......

```
app.use(function(req, res, next) {
  if(req.session && (!req.session.cid) && req.cookies._ga){
    //Use the cid already embedded in the _ga cookie and save to session so I can access from socket routes
    var gaSplit = req.cookies._ga.split('.');
    req.session.cid = gaSplit[2] + "." + gaSplit[3];
  };
  next();
}); 
```

然后以后，我可以做到这一点..

```
ua = require('universal-analytics')
var visitor = ua('UAXXX', req.session.cid) 
```

高温高压

# heroku - 具有自定义 buildpack 的工头

> ID：14227332
> 
> 赞同：3
> 
> 时间：2013-01-09T02:20:08.377
> 
> 标签：heroku, foreman

如果我使用的是自定义 buildpack，如何让我的 heroku 应用程序与工头一起在本地运行？我正在使用 nginx/php-fpm 构建包（https://github.com/travisj/heroku-buildpack-nginx-php），它安装 php 和 nginx，然后启动所有进程。

我如何让它与工头一起运行？我知道没有 --buildpack 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:53:09.517

我有同样的问题，我什至开始滚动我自己的代码作为答案。不过，最后，我实际上搜索了记录在工头 github repo 上的问题，发现存在：

[https://github.com/ddollar/mason](https://github.com/ddollar/mason)

虽然，当我使用它时，我很快遇到了一个导致构建失败的 Ruby 错误。[@clowder 的拉取请求](https://github.com/ddollar/mason/pull/13)解决了一半的问题，所以我继续按照[@andys](https://github.com/andys)的建议在那里实施了其余的修复：

[https://github.com/steven-collins-omega/mason/tree/fix-symlink-copying](https://github.com/steven-collins-omega/mason/tree/fix-symlink-copying)

这似乎可以解决问题。祝你好运！

# python - Python在参数切换后立即获取字符串

> ID：14227337
> 
> 赞同：0
> 
> 时间：2013-01-09T02:20:51.127
> 
> 标签：python, string, matching, optional-parameters

我有一个脚本，它使用 os.walk 向下查找目录结构并按扩展名匹配文件并将文件复制到另一个位置。

这就是我的文件副本：

```
sourceDir=sys.argv[-2].rstrip("/")
destDir=sys.argv[-1].rstrip("/")
//copy code 
```

所以我只想打电话：

```
python mycode.py ~/a/ ~/b/ 
```

我想要做的是添加一个可选的参数开关，它也将通过搜索模式匹配：

```
python mycode.py --match "pattern" ~/a/ ~/b/ 
```

在我的代码中，如果：

```
if "--match" in sys.argvs:
  #try reference the string right after --match"
  for root, dir, files... etc 
```

所以准确地说，如果 --“match” 在 sys.argvs 中，我如何找到“模式”？python新手，所以任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:25:20.237

您可以使用模块 OptionParser。例子：

```
from optparse import OptionParser
usage = 'python test.py -m'
parse = OptionParser(usage)
parse.add_option('-m', '--match', dest='match', type='string'
                 default='', action='store',
                 help='balabala')
options, args = parse.parse_args() 
```

更新：如果您使用的是 python2.7，[argparse](http://docs.python.org/2/howto/argparse.html)会更好。用法与 OptionParser 类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:24:54.023

请不要尝试自己解析字符串。请改用[argparse](http://docs.python.org/2/howto/argparse.html#concepts)模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T02:25:02.653

该`argparse`库非常擅长可选参数解析：

```
import argparse

p = argparse.ArgumentParser(description="My great script")
p.add_argument("sourceDir", type=str, help="source directory")
p.add_argument("destDir", type=str, help="destination directory")
p.add_argument("--match", type=str, dest="match", help="search pattern")

args = p.parse_args()

print args.sourceDir, args.destDir, args.match 
```

这样，`args.match`如果`None`没有提供它：

```
Davids-MacBook-Air:BarNone dgrtwo$ python mycode.py ~/a/ ~/b/
/Users/dgrtwo/a/ /Users/dgrtwo/b/ None
Davids-MacBook-Air:BarNone dgrtwo$ python mycode.py --match "pattern" ~/a/ ~/b/
/Users/dgrtwo/a/ /Users/dgrtwo/b/ pattern 
```

它还可以判断是否存在正确数量的参数：

```
usage: mycode.py [-h] [--match MATCH] sourceDir destDir
mycode.py: error: too few arguments 
```

并包含一条帮助信息：

```
Davids-MacBook-Air:BarNone dgrtwo$ python mycode.py -h
usage: mycode.py [-h] [--match MATCH] sourceDir destDir

My great script

positional arguments:
  sourceDir      source directory
  destDir        destination directory

optional arguments:
  -h, --help     show this help message and exit
  --match MATCH  search pattern 
```

# jsduck - jsduck 可以用来记录不使用 sencha 框架的代码吗？

> ID：14227339
> 
> 赞同：3
> 
> 时间：2013-01-09T02:21:04.687
> 
> 标签：jsduck

我正在探索 JavaScript 文档工具，发现 JSDuck 令人印象深刻。我注意到 appcelerator 钛也使用它。但是，找不到太多关于使用它来记录不使用 Sencha 的 JavaScript 框架的代码的信息。关于如何以及是否可以用于记录任何 Javascript 代码的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T02:26:17.503

JSDuck 主要用于记录 Sencha Ext JS 和 Touch 框架，但是，它也适用于纯 JavaScript。您将无法利用许多 ExtJS 特定的自动检测功能。但是你仍然会有相当多的各种自动检测。

例如，以下文档注释不使用任何`@class`, `@method`,`@property`标签 - 所有这些信息和更多信息都是从代码中推断出来的：

```
/**
 * Docs for my class.
 */
function MyClass {
}
/**
 * Docs for a method.
 * @param {String} p1 ...
 * @param {Number} p2 ...
 * @return {Object}
 */
MyClass.prototype.foo = function(p1, p2) {};
/**
 * Docs for a property.
 */
MyClass.prototype.bar = "Hello"; 
```

# android - 在基于查询的文本视图中显示数据库

> ID：14227344
> 
> 赞同：0
> 
> 时间：2013-01-09T02:21:17.797
> 
> 标签：android, sqlite, textview

抱歉，如果我在这里问简单的 Q，但我不知道该怎么做。我想根据查询在 textview 中显示来自 SQLite 数据库的数据。我已经尝试了一些示例，但我不知道为什么没有出现 te 数据。我尝试来自[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)的示例以及[如何从数据库中获取值并将其显示在 android 的文本视图中](https://stackoverflow.com/questions/9460358/how-to-fetch-a-value-from-the-database-and-display-it-in-a-text-view-in-android)。som1 能告诉我有什么问题吗？这是我查询数据的代码。tq..

```
RelativeLayout main=(RelativeLayout)findViewById(R.id.act);

    try
    {
        db = this.openOrCreateDatabase("todotable.db", SQLiteDatabase.CREATE_IF_NECESSARY, null);

        Cursor c=db.rawQuery("SELECT category, name, description FROM " +
                todo + " where date = CURRENT_DATE", null);
        int column1=c.getColumnIndex("category");
        int column2=c.getColumnIndex("name");
        int column3=c.getColumnIndex("description");
        c.moveToFirst();
        if(c!=null)
        {   
            do
            {
                String category=c.getString(column1);
                String name =c.getString(column2);
                String description = c.getString(column3);
                //String category;
                //String description;
                data=data+category+" "+name+" "+description;
               // Data1=Data1+Score+"\n";
                System.out.println("cat "+category+" name "+name + " des "+description);
            }while(c.moveToNext());
            TextView tv=(TextView)findViewById(R.id.show);

            // TextView points=(TextView)findViewById(R.id.points);
            tv.setText(data);
            //points.setText(Data1);
            setContentView(R.layout.activity_crespro);

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:59:47.583

在访问活动中的任何视图之前，应该移动这段代码。

**setContentView(R.layout.activity_crespro);**

在为活动设置 ContentView 之前，您正在尝试访问视图（如示例中的显示和点 TextView）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:03:05.887

正如 Eric 在他的评论中指出的那样，您需要`setContentView(...)`在尝试访问该布局中的任何视图（TextViews、EditTexts、Buttons 等）之前使用。这样做的原因是布局中存在这些视图，因此活动实际上并不知道它们，直到您调用`setContentView()`以下链接将来对您非常有帮助

[活动文件](http://developer.android.com/reference/android/app/Activity.html)

# algorithm - 特定类型图中的最长路径

> ID：14227345
> 
> 赞同：9
> 
> 时间：2013-01-09T02:21:20.153
> 
> 标签：algorithm, graph-theory, graph-algorithm, pseudocode

我知道对于一般图而言，[最长路径问题](http://en.wikipedia.org/wiki/Longest_path_problem)是 NP 难题。但是，我正在考虑一种特定类型的图，它由一个循环组成，加上循环的每个顶点上的一个附加边。例如，对于长度为 7 的循环，我们有如下图：

![图形](../Images/a42e24be59e8997f8593cb0ab120d550.png)

所有边都被加权（权重是实数，可以是正数或负数）。我想在这张图上找到最大的简单路径，其中路径的大小是路径上边权重的总和。

该算法在循环的大小上应该是线性的。但任何想法都会受到赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T11:25:45.697

这可以简化为[最大子阵列问题](http://en.wikipedia.org/wiki/Maximum_subarray_problem)并在线性时间内解决。

1.  **断开循环**（在任何节点）。
2.  **将剩余图的**第二个副本附加到循环断开的点（我们可以跳过最后一个节点）。****
***   **将修改后的 Kadane 算法**应用于生成的节点列表。*   **如果找到的路径没有边**，则在图中搜索最大权重边。如果该边具有非负权重，则报告此单边路径。如果不是，则如果不允许空路径，则无论如何报告此单边路径，或者如果允许则报告空路径。**

 **![原始图](../Images/3753d229f8857d1ffd7a0975f50a510e.png)->![修正图](../Images/dbbb02a94274e0b813347da657e61ba8.png)

必要的 Kadane 算法修改：

1.  **跟踪**当前路径（子数组）中的节点数。`N`当子数组具有或更多“循环”节点时，从尾部修剪节点。为了有效地修剪这些节点，我们需要一个可以报告其元素最小值的队列。在路径头部前进的任何地方将元素推送到此队列（如果非负，则添加叶边权重），在修剪路径尾部时弹出元素，并在当前路径重置为空路径的任何地方重置队列。此队列包含（不一定简单）路径的前缀长度，其中最小值为推进路径尾部提供了适当的位置。这样的队列可以实现为仅包含非递减值的双端队列，也可以实现[为本](https://stackoverflow.com/a/7134189/1009831)答案中提到的一对堆栈。
2.  **将路径长度重置`max(0, leaf_edge_weight)`**为当前路径长度低于零的任何位置（而不是像原始 Kadane 算法那样将其重置为零）。
3.  **当当前（非空）路径与迄今为止最佳路径进行比较时，**添加非负叶边缘权重（对应于头节点）。****

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:33:18.317

在循环中选择一个链接。最长的路径要么通过该链接，要么不通过该链接，因此让我们找出任何一种情况下的最佳答案，然后选择其中最好的一个。

如果最长路径不经过循环链接，则删除该链接以生成树。从叶子向上计算，在每个节点上，该节点下的最长路径，以及从该节点到任何后代的最长路径。在每个节点上，您可以通过查看其子节点的答案来计算答案。根源处的答案为您提供了最长的路径。

如果最长的路径确实通过您选择的链接，则它必须包含从链接一端顺时针走的部分和从链接另一端逆时针走的部分。这两个的长度加起来不超过一加上构成循环的链接数。对于 i = 1 来限制计算链路每一侧的顺时针和逆时针路径的成本并保持运行最大值。通过该链接的最长路径的长度为，对于某些 k，最长路径顺时针方向最多 k 个链接，最长路径逆时针方向最多 Nk 个链接（可能有一些类似成本的摆弄 - ve 链接成本存在）。因此，您可以找到通过您选择的链接的最长路径，成本也是 O(n)。

计算两个案例的成本 O(n) 并选择最好的给你总成本 O(n)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:09:08.350

最长的路径几乎肯定在两个外部顶点之间。几乎肯定有必要覆盖循环中的所有顶点。

因此，您想使用 DFS 来绘制 O(N) 中的循环。然后计算当前循环排列的长度。加上从循环中的第一个点到它的外部的距离以及最后一个点到它的外部的距离。这为您提供了实际的路径长度，您将其与循环长度分开存储。

增加第一个点和最后一个点的索引（可以在 O(1) 中完成），删除现在从第一个点指向最后一个点的边的长度。然后再次添加外部长度。重复直到你覆盖了所有的顶点。由于您存储和更新路径长度而不是每次都实际重新计算它（这需要（O（N ^ 2）），因此可以在O（N）中完成。

这允许在 O(N) 中遍历循环。但是，它不是一个精确的算法。这需要检查您是否不应该将 first+i 和/或 last-j 用于某些 i,j 。要完全检查这一点，基本上需要 O(N^2)。

虽然，您可能会通过巧妙地确定这些边缘情况的可能位置在 O(N log N) 左右完成它。我怀疑一个精确的线性算法是可能的。****

# c++ - RAII 资源处理

> ID：14227354
> 
> 赞同：7
> 
> 时间：2013-01-09T02:22:19.037
> 
> 标签：c++, destructor, raii

我有一个 RAII 课程：

* * *

```
 template<typename T>
    class RAII
    {
    public:
    explicit RAII( T* p = 0 ): p_(p){}

    ~RAII() {delete p_;}

    T& operator*() const { return p_;} 
    T* operator‐&gt;() const{ return p_;}
    }; 
```

* * *

```
{

RAII<std::vector<int>> r(new std::vector<int>());
std::cout<<r­‐&gt;size()<<std::endl;

} // The std::vector<int> is automatically deallocated 
```

* * *

我知道当我超出范围时，我的析构函数将被调用。`~RAII() {delete P_};`

我的问题是：

它如何调用我的析构函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-14T06:29:06.143

当抛出异常并且控制从 try 块传递到处理程序时，C++ 运行时调用自 try 块开始以来构造的所有自动对象的析构函数。这个过程称为堆栈展开。自动对象按照其构造的相反顺序被销毁。（自动对象是已声明为 auto 或 register，或未声明为 static 或 extern 的局部对象。只要程序退出声明 x 的块，就会删除自动对象 x。）

如果在构造由子对象或数组元素组成的对象期间引发异常，则仅对在引发异常之前成功构造的那些子对象或数组元素调用析构函数。仅当成功构造对象时才会调用本地静态对象的析构函数。

如果在堆栈展开期间析构函数抛出异常并且该异常未被处理，则调用 terminate() 函数。

示例：请参见下面的反汇编。你会看到析构函数已经被压入堆栈。

```
class Test
{
public:
    Test()

    {
        std::cout<<"C'tor\n";
    }
    ~Test()
    {
        std::cout<<"D'tor\n";
    }
}
 int main()//_TCHAR* argv[])
{
Test();
}
00DD9C30 55                   push        ebp  
00DD9C31 8B EC                mov         ebp,esp  
00DD9C33 81 EC CC 00 00 00    sub         esp,0CCh  
00DD9C39 53                   push        ebx  
00DD9C3A 56                   push        esi  
00DD9C3B 57                   push        edi  
00DD9C3C 8D BD 34 FF FF FF    lea         edi,[ebp-0CCh]  
00DD9C42 B9 33 00 00 00       mov         ecx,33h  
00DD9C47 B8 CC CC CC CC       mov         eax,0CCCCCCCCh  
00DD9C4C F3 AB                rep stos    dword ptr es:[edi]  
    23: 
    24:     Test();
00DD9C4E 8D 8D 3B FF FF FF    lea         ecx,[ebp-0C5h]  
00DD9C54 E8 67 7C FF FF       call        Test::Test (0DD18C0h)  
00DD9C59 8D 8D 3B FF FF FF    lea         ecx,[ebp-0C5h]  
00DD9C5F E8 03 76 FF FF       call        Test::~Test (0DD1267h)
    25: } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T02:25:16.230

编译器自动生成代码来调用局部变量的析构函数。^*

* * *

[* 从技术上讲，它们被称为“具有自动存储期限的对象”。应该清楚为什么！]

# serialization - 在磁盘上存储一组 protobuf

> ID：14227355
> 
> 赞同：2
> 
> 时间：2013-01-09T02:22:21.543
> 
> 标签：serialization, storage, protocol-buffers, thrift

我使用 protobuf 作为序列化程序来格式化磁盘上的数据。我可能有大量的 protobuf 对象，比如数百万个。在磁盘上布局它们的最佳选择是什么？protobuf 对象将按顺序逐一读取，或通过外部索引随机访问读取。

我曾经使用 lenghth(int)+protobuf_object+length(int).... 格式，但如果其中一个 protobuf 碰巧是脏的，它就会失败。如果许多 protobuf 对象很小，它可能会有一些开销。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:44:24.497

如果您只需要顺序访问，存储多条消息的最简单方法是在它之前写入对象的大小，如文档所建议的：http: [//developers.google.com/protocol-buffers/docs/techniques#streaming](http://developers.google.com/protocol-buffers/docs/techniques#streaming)

例如，您可以使用以下成员函数创建一个类“MessagesFile”来打开、读取和写入您的消息：

```
// File is opened using append mode and wrapped into
// a FileOutputStream and a CodedOutputStream
bool Open(const std::string& filename,
          int buffer_size = kDefaultBufferSize) {

    file_ = open(filename.c_str(),
                 O_WRONLY | O_APPEND | O_CREAT, // open mode
                 S_IREAD | S_IWRITE | S_IRGRP | S_IROTH | S_ISUID); //file permissions

    if (file_ != -1) {
        file_ostream_ = new FileOutputStream(file_, buffer_size);
        ostream_ = new CodedOutputStream(file_ostream_);
        return true;
    } else {
        return false;
    }
}

// Code for append a new message
bool Serialize(const google::protobuf::Message& message) {
    ostream_->WriteLittleEndian32(message.ByteSize());
    return message.SerializeToCodedStream(ostream_);
}

// Code for reading a message using a FileInputStream
// wrapped into a CodedInputStream 
bool Next(google::protobuf::Message *msg) {
    google::protobuf::uint32 size;
    bool has_next = istream_->ReadLittleEndian32(&size);
    if(!has_next) {
        return false;
    } else {
        CodedInputStream::Limit msgLimit = istream_->PushLimit(size);
        if ( msg->ParseFromCodedStream(istream_) ) {
            istream_->PopLimit(msgLimit);
            return true;
        }
        return false;
    }
} 
```

然后，要编写您的消息，请使用：

```
MessagesFile file;
reader.Open("your_file.dat");

file.Serialize(your_message1);
file.Serialize(your_message2);
...
// close the file 
```

要阅读您的所有消息：

```
MessagesFile reader;
reader.Open("your_file.dat");

MyMsg msg;
while( reader.Next(&msg) ) {
    // user your message
}
...
// close the file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:05:56.740

（我希望我正确理解了您的问题，并且我的回答适合您的用例！）

将任意协议缓冲区消息流存储到磁盘的一种技术是定义一个包装器消息，其中所有字段都定义为`repeated`（这意味着`optional`），然后当您读取字节时，您将获得包装器类的实例并调用hasX() 方法来找到你实际拥有的东西。在您的情况下，这种方法的问题是您没有随机访问，也没有真正的流式传输（所有类型的消息都`Foo`将放在一起，然后是所有`Bar`s），如果您的数据太大，您将无法容纳整个很多记忆。

实际上，您基本上是在寻求一种方法来存储任何类型的数据，以便可以流式传输或随机访问。这是一个通用问题，而不是特定于协议缓冲区的问题。

你的问题是：

*   分隔记录...（见注）
*   ......以这样一种方式，可以检测到损坏并容忍或修复......
*   ...同时维护一个索引以允许随机访问

您可能会使用索引来允许进行某种完整性检查，但即使这样也需要一种机制来确保索引和数据对应并保持同步。

因此，它可能不是理想的解决方案，但实现您想要的一种方法，特别是如果完整性是一个问题，是将此信息存储在允许存储二进制数据并可以快速返回该数据的数据库中。随机访问和数据完整性的问题将成为数据库提供者的责任。任何能够存储 BLOB 的传统数据库都可以做到这一点，尽管我也会考虑将它存储在 NoSQL 中，例如 MongoDB。

## 笔记

如果您仔细定义您的协议缓冲区（即您知道所存储字段的类型和长度），那么您实际上不需要分隔您的记录，因为它们的长度永远不会改变。但是，这会破坏 Protocol Buffers 的特性之一，即其面向未来的特性。如果您以`.proto`固定消息大小的方式设计 a，您将无法添加新字段并仍然适合相同的文件格式，安全地说每条新消息在 x 字节后开始。

# javascript - Highchart 更改系列的线宽

> ID：14227357
> 
> 赞同：2
> 
> 时间：2013-01-09T02:22:28.440
> 
> 标签：javascript, jquery, highcharts

我想知道是否可以使用外部按钮动态更改 Highcharts 中 Serie 的 lineWidth 。我一直在阅读所有文档，但恐怕此功能不可用。

感谢和问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:35:26.533

是的你可以。

使用[此](http://api.highcharts.com/highcharts#plotOptions.line.lineWidth)属性，您可以设置线宽。只需按一下按钮更改选项并调用`chart.redraw()`

如果您只想更改其中一个系列，请这样[做](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-linewidth-specific/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-26T15:36:49.880

指定“线宽”。尝试这个-

```
series: [{
        name: '',
      color: '#ffe8d0',
        data: [7.0, 16.9, 19.5, 24.5, 38.2, 41.5, 55.2, 66.5],
      lineWidth: 7,
    },] 
```

# python - 正则表达式与 Python 中的 URL 不匹配

> ID：14227359
> 
> 赞同：0
> 
> 时间：2013-01-09T02:22:40.977
> 
> 标签：python, regex

> **可能重复：**
> [如何从 URL 中提取域名](https://stackoverflow.com/questions/1066933/how-to-extract-domain-name-from-url)

我想从 URL 中提取网站，即`console.aws.amazon.com`从以下 URL 中。

```
>>> ts
'https://console.aws.amazon.com/ec2/home?region=us-east-1#s=Instances,EC2 Management Console,12/3/2012 4:34:57 PM,11,0,,25806'
>>> re.match(ts,'(")?http(s)?://(.*?)/').group(0)

Traceback (most recent call last):
File "<pyshell#17>", line 1, in <module>
re.match(ts,'(")?http(s)?://(.*?)/').group(0)
AttributeError: 'NoneType' object has no attribute 'group' 
```

我[在 JS 中尝试了这个正则表达式](http://regexpal.com/)，它起作用了。知道为什么这在 JS 中匹配，但在 Python 中不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T02:28:28.937

你的比赛不正确。Python doco 说：

```
re.match(pattern, string, flags=0) 
```

你正在做：

```
re.match(string, pattern) 
```

所以只需将其更改为：

```
 re.match('(")?http(s)?://(.*?)/', ts).group(0) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T02:32:33.173

Use [urlparse](http://docs.python.org/2/library/urlparse.html)

```
>>> from urlparse import urlparse
>>> u = 'https://console.aws.amazon.com/ec2/home?region=us-east-1#s=Instances,EC2 Management Console,12/3/2012 4:34:57 PM,11,0,,25806'
>>> p = urlparse(u)
>>> p
ParseResult(scheme='https', netloc='console.aws.amazon.com', path='/ec2/home', params='', query='region=us-east-1', fragment='s=Instances,EC2 Management Console,12/3/2012 4:34:57 PM,11,0,,25806')
>>> p.netloc
'console.aws.amazon.com'
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T02:25:59.450

您始终可以为此使用[str.partition](http://docs.python.org/3.3/library/stdtypes.html?highlight=str.partition#str.partition)方法：

```
print(ts.partition('//')[2].partition('/')[0])
>>> console.aws.amazon.com 
```

正则表达式对此有点矫枉过正。

# android - common_google_play_services_unknown_issue" 未在 af、am、ar、be、bg 中翻译

> ID：14227361
> 
> 赞同：8
> 
> 时间：2013-01-09T02:22:59.813
> 
> 标签：android, eclipse, google-drive-api

我正在尝试导出（已签名或未签名）我的应用程序。但是我遇到了这个错误。 ![在此处输入图像描述](../Images/1b4afd5b660cac8e4cee671180791ef5.png)

这就是它所说的

```
"common_google_play_services_unknown_issue" is not translated in af, am, ar, be, bg, ca, cs, da, de, el, en-rGB, es, es-rUS, et, fa, fi, fr, hi, hr, hu, in, it, iw, ja, ko, lt, lv, nb, nl, pl, pt, pt-rPT, ro, ru, sk, sl, sr, sv, sw, th, tl, tr, uk, vi, zh-rCN, zh-rTW, zu

Issue: Checks for incomplete translations where not all strings are translated Id: MissingTranslation

If an application has more than one locale, then all the strings declared in one language should also be translated in all other languages.

If the string should not be translated, you can add the attribute translatable="false" on the <string> element, or you can define all your non-translatable strings in a resource file called donottranslate.xml. Or, you can ignore the issue with a tools:ignore="MissingTranslation" attribute.

By default this detector allows regions of a language to just provide a subset of the strings and fall back to the standard language strings. You can require all regions to provide a full translation by setting the environment variable ANDROID_LINT_COMPLETE_REGIONS. 
```

这是我第一次遇到这个错误。而且我在网上找不到任何解决方案。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-21T10:41:49.513

我遇到过同样的问题。问题是 Lint 将字符串翻译标记为致命错误。在 Eclipse 中，您需要进入首选项（Window -> Preferences -> Android -> Lint Error Checking）并将“Missing Translation”设置为警告或忽略。这在[这里讨论](https://stackoverflow.com/questions/11443996/lint-how-to-ignore-key-is-not-translated-in-language-errors)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T14:29:49.080

如果“未知问题”确实发生在没有翻译的语言中，这确实是一个问题 - 这将导致应用程序因堆栈跟踪而崩溃：

```
android.content.res.Resources$NotFoundException: String resource ID #0x7f0d0039
    at android.content.res.Resources.getText(Resources.java:201)
    at android.content.res.Resources.getString(Resources.java:254)
    at com.google.android.gms.common.GooglePlayServicesUtil.b(Unknown Source)
    at com.google.android.gms.internal.c.a(Unknown Source)
    at com.google.android.gms.internal.c.onCreateView(Unknown Source)
    at com.google.android.gms.maps.SupportMapFragment.onCreateView(Unknown Source)
    ... 
```

我所做的是打开`google-play-services-lib`项目，打开默认值`res/values/strings.xml`，然后：

1.  复制英文翻译 - 这消除了冗长的编译警告。
2.  为：添加“翻译” `common_google_play_services_unknown_issue`：

`<string name="common_google_play_services_unknown_issue">"Unknown issue."</string>`

这解决了警告问题，并且在发生意外情况时不会在运行时使应用程序崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-10T16:57:48.197

此问题实际上是由 Google Play 服务支持但您自己的应用程序不支持的所有语言引起的。您可以从 google_play_services_lib 中删除您的应用不支持的所有语言。

您只需解决所有剩余的不完整翻译。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-18T12:16:45.863

或者您可以添加`translatable="false"`到每个字符串，这样就不会产生错误。例如：

```
 <string name="hello" translatable="false" >Hello World!</string> 
```

# ruby-on-rails-3.2 - 在 Rails 中使用 turbolinks link_to

> ID：14227363
> 
> 赞同：44
> 
> 时间：2013-01-09T02:23:29.930
> 
> 标签：ruby-on-rails-3.2, turbolinks, ruby-on-rails-4

只是想知道是否有一种方法可以直接在 rails link_to 助手中使用 turbolinks，快速搜索了一下谷歌并没有发现任何值得注意的东西，这是我尝试过但无济于事的类型。

```
<%= link_to 'Giraffe', giraffe_path(@giraffe), :data-no-turbolink => 'true' %>
<%= link_to 'Giraffe', giraffe_path(@giraffe), :data { :no-turbolink => 'true'} %> 
```

我知道你可以在这样的常规链接中做到这一点

```
<a data-no-turbolink='true' href="/giraffe-130">Giraffe</a> 
```

现在我只是在链接周围的元素上包含属性，例如 lis 或 divs。

提前致谢。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-01-14T01:49:03.457

**编辑 Rails 5+：** @ManishShrivastava 正确指出了 Rails 5 所需的不同语法，如[Joseph 的回答](https://stackoverflow.com/a/37999169/4299353)所示。

`<%= link_to('Giraffe', @giraffe, data: { turbolinks: false }) %>`

**对于 Rails 4 及以下版本**

最初我认为您需要对符号使用哈希火箭语法，但事实并非如此。您可以使用`data:`散列，在该散列中使用下划线的任何符号`_`都将转换为破折号`-`。

我认为大多数 Rails 开发人员更愿意看到以下内容（包括我自己，因为我知道得更清楚了）：

`<%= link_to('Giraffe', @giraffe, data: { no_turbolink: true }) %>`

但以下也有效：

`<%= link_to('Giraffe', @giraffe, 'data-no-turbolink' => true) %>`

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2016-06-23T18:27:39.193

Turbolinks 5 使用稍微不同的语法

```
<%= link_to "Foo", new_foo_path(@foo), data: { turbolinks: false } %> 
```

来源：[Turbolinks Github 页面](https://github.com/turbolinks/turbolinks#disabling-turbolinks-on-specific-links)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-27T01:20:50.033

您可以毫无问题地使用符号来生成以下代码：

```
 <a data-no-turbolink='true' href="/giraffe-130">Giraffe</a> 
```

只需执行以下操作：

```
 <%= link_to 'Giraffe', giraffe_path(@giraffe),
             :data => { :no_turbolink => true } %> 
```

注意：`:no_turbolink`将变为`no-turbolink`并且值将使用 自动转换为 JSON `to_json`，例如`true`to `"true"`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-07T08:40:48.043

@Joseph你是对的，但只有很小的变化：

```
<%= link_to "Foo", new_foo_path(@foo), data: { turbolinks: 'false' } %> 
```

当我输入时`turbolinks: false`不适用于 bool，仅当我使用 string 作为 value 时才有效`turbolinks: 'false'`。所以也许有人帮助这个信息;）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-20T07:08:58.277

或 Ruby 1.9+ 语法：

```
<%= link_to 'Foo', foo_path(@foo), data: { no_turbolink: true } %> 
```

但我最终放弃了 turbolinks 支持[Wiselinks](https://github.com/igor-alexandrov/wiselinks)，它使所有链接的行为都明确，此外 Wiselinks 还支持部分更新（例如分页）、替换状态（不污染浏览器历史记录，非常适合列排序）、表单提交（非常适合搜索表单）、重定向、对没有历史 API 的浏览器的支持以及更智能的资产更改处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-21T13:23:24.840

当您想使用语言环境更改语言时，您可以这样做：

```
<%= link_to content_tag(:span, "Українською"),  {locale: :uk},  
data:{ turbolinks: "false" }%> 
```

# ruby-on-rails - 存储数据库查询时出现低级缓存错误

> ID：14227369
> 
> 赞同：0
> 
> 时间：2013-01-09T02:24:23.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试图通过缓存数据库查询来提高我的应用程序的性能。这些都是简单的查询，因为我需要加载和缓存所有对象。

这是我的 application_controller.rb 的缩短版本：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  def show_all
    load_models
    respond_to do |format|
      format.json { render :json => {"items" => @items}
      }
    end
  end

  protected    
  def load_models
    @items = Rails.cache.fetch "items", :expires_in => 5.minutes do
      Item.all
    end
  end
end 
```

但是当我尝试加载此页面时，我收到此错误：

```
ArgumentError in ApplicationController#show_all
undefined class/module Item 
```

我一直在关注 Heroku 在此处发布的低级缓存指南：[https ://devcenter.heroku.com/articles/caching-strategies#low-level-caching](https://devcenter.heroku.com/articles/caching-strategies#low-level-caching)

任何想法我可以在这里做些什么来让缓存工作？有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:46:08.760

我通过存储编码 JSON`Rails.cache.fetch`而不是原始 ActiveRecord 对象来解决此问题。然后我检索存储的 JSON，对其进行解码，并将其呈现给视图。完成的代码如下所示：

```
 def show_all
    json = Rails.cache.fetch "Application/all", :expires_in => 5.minutes do
      load_models
      obj = { "items" => @items }
      ActiveSupport::JSON.encode(obj)
    end

    respond_to do |format|
      format.json { render :json => ActiveSupport::JSON.decode(json) }
    end
  end

  def load_models
    @items = Item.all
  end 
```

# c# - 访问不受支持的扩展时如何配置 IIS 以重定向到自定义错误页面

> ID：14227374
> 
> 赞同：0
> 
> 时间：2013-01-09T02:25:04.343
> 
> 标签：c#, asp.net, iis, custom-error-pages

我尝试了一些方法来将我的自定义错误页面（例如 error.aspx）部署到我的网站上：

*   添加了自定义错误：`<customErrors mode="On" defaultRedirect="error.aspx" />`
*   添加了http错误： `<httpErrors> <remove statusCode="404" subStatusCode="-1" /> <error statusCode="404" prefixLanguageFilePath="" path="error.aspx" responseMode="ExecuteURL" /> </httpErrors>`

目前，我可以将此 URL 指向我的自定义错误页面：

[http://test.localdev.net/random_text.aspx](http://test.localdev.net/random_text.aspx)

但是，对于那些类型的 URL（不支持的扩展名），我失败了，对于这些 URL，IIS 将使用它自己的 404 页面：

[http://test.localdev.net/Default.random](http://test.localdev.net/Default.random)

谁能帮我修复它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:40:45.870

您是否在集成模式下使用 iis7 或更高版本？否则我认为您需要在 iis 本身中配置错误页面。

# c# - 如何防止玩家对象在 2d 环境中穿过墙壁

> ID：14227378
> 
> 赞同：0
> 
> 时间：2013-01-09T02:25:21.243
> 
> 标签：c#, xna, 2d

玩家框以不受欢迎的方式继续穿墙，我尝试过让玩家一次以 0.1f(u) 的增量移动，但这严重降低了游戏的性能。有什么方法可以检测到玩家是否撞到墙，他们撞到了哪一侧以及如何防止他们撞到墙上？

这是我正在运行的代码（这当然是极简的）

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Platformer
{

    public class Player
    {
        double terminalVelocity;
        //AnimatedTexture texture;
        public Texture2D texture;
        public Vector2 Position, Velocity;
        public Rectangle boundingBox;
        public Player(Texture2D tex, Vector2 pos, Vector2 vel, Rectangle bb)
        {
            texture = tex;
            Position = pos;
            Velocity = vel;
            boundingBox = bb;
            terminalVelocity = Math.Sqrt((2*bb.Width*bb.Height*Game1.gravity)/-9.8*2);
        }

        public void updateBoundingBoxes()
        {
            boundingBox.X = (int)Position.X;
            boundingBox.Y = (int)Position.Y;
        }

        public void onUpdate()  
        {
            updateBoundingBoxes();
            Position.X += Velocity.X;
            Position.Y += Velocity.Y;
            //Velocity = Vector2.Zero;
            Velocity.Y += Game1.gravity / 60;
            Velocity.X /= 1.2f;
        }

        public void Draw(SpriteBatch sb)
        {
            updateBoundingBoxes();
            sb.Begin();
                sb.Draw(texture,boundingBox,GameLighting.currentColour());
            sb.End();
        }

    }

    public enum GameLightingState
    {
        Red, Dark, Orange, Blue, White
    }

    public class Platform : Object
    {

        Texture2D text;
        public Rectangle rect;
        public Platform(Texture2D t, Vector2 p, int sizeX, int sizeY)
        {

            text = t;
            rect = new Rectangle((int)p.X, (int)p.Y, sizeX, sizeY);

        }

        public void onPlayerCollision(Player p)
        {
            p.Velocity.X = -p.Velocity.X / 2;
            p.Velocity.Y = -p.Velocity.Y / 2;
        }

        public void Draw(SpriteBatch sb)
        {
            sb.Begin();
               sb.Draw(text, rect, GameLighting.currentColour());
            sb.End();
        }

        public void onUpdate()
        {

        }

    }

    public class GameLighting
    {
        public static Color currentColour()
        {
            return eToColour(Game1.currentLightingState);
        }

        public static Color eToColour(GameLightingState gls)
        {
            switch (gls)
            {
                case(GameLightingState.Red):
                    return Color.Red;
                case (GameLightingState.Blue):
                    return Color.Blue;
                case (GameLightingState.Orange):
                    return Color.Orange;
                case (GameLightingState.Dark):
                    return Color.DarkGray;
                case (GameLightingState.White):
                    return Color.White;
            }
            return Color.White;
        }
    }

    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        public static float gravity = 9.80665f;
        public static GameLightingState currentLightingState;
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;
        List<Platform> platforms;
        List<Player> players;
        int controlledPlayerIndex = 0;
        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            // TODO: Add your initialization logic here
            currentLightingState = GameLightingState.White;
            platforms = new List<Platform>();
            players = new List<Player>();
            players.Add(new Player(this.Content.Load<Texture2D>("Images/dirt"), new Vector2(300,0), new Vector2(0,0), new Rectangle(300,0,20,20)));
            platforms.Add(new Platform(this.Content.Load<Texture2D>("Images/dirt"),new Vector2(300,450),200,20));
            platforms.Add(new Platform(this.Content.Load<Texture2D>("Images/dirt"), new Vector2(20,20), 20, 200));
            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            // TODO: use this.Content to load your game content here
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();
            foreach (Player p in players)
            {
                Boolean intersects = false;
                Rectangle tempRectangle = new Rectangle((int)(p.Position.X + p.Velocity.X),(int) (p.Position.Y + p.Velocity.Y), p.boundingBox.Width, p.boundingBox.Height);
                foreach (Platform pl in platforms)
                {
                    intersects = intersects || tempRectangle.Intersects(pl.rect);
                }
                if (!intersects)
                {
                    p.onUpdate();

                }
            }

            if (Keyboard.GetState().IsKeyDown(Keys.Space))
            {
                players[controlledPlayerIndex].Velocity.Y -= 0.75f;
            }
            if (Keyboard.GetState().IsKeyDown(Keys.A)) 
            {
                players[controlledPlayerIndex].Velocity.X -= 0.75f;
            }
            if (Keyboard.GetState().IsKeyDown(Keys.D))
            {
                players[controlledPlayerIndex].Velocity.X += 0.75f;
            }

            // TODO: Add your update logic here

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            // TODO: Add your drawing code here

            foreach (Platform p in platforms)
            {
                p.Draw(spriteBatch);
            }
            foreach (Player p in players)
            {
               p.Draw(spriteBatch);
            }
            base.Draw(gameTime);
        }
    }
} 
```

*根据第一条评论更新了源代码

关于此代码的一个注意事项，您需要在 XNA 中运行它并在一个名为 Images 的文件夹中使用一个名为 mud.png 的图标，图片看起来如何并不重要，您只需要它来完全了解正在发生的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:38:05.547

我自己最近也有类似的问题。这就是我所做的。

```
//variables needed
public bool follow = true;
public Vector2D startpoint;

//puts the startpoint value equal
//to the inital location of the player
public Player()
{
    startpoint.X = rectangle.X;
    startpoint.Y = rectangle.Y;
}

//if any of the collision tests fail
if(collision occurs)
{
    collision();
}
//else update startpoint to new valid location
else 
{
    startpoint.X = rectangle.X;
    startpoint.Y = rectangle.Y;
    follow = true;
}
if(follow == true)
{
    //movement commands occur
}
else
{
    follow = true;
}

//if a condition fails set player
//too last valid location
public void collision()
{
    rectangle.X = startpoint.X;
    rectangle.Y = startpoint.Y;
    follow = false;
} 
```

这对我来说效果很好，希望它有所帮助。

# html - 如何将链接添加到与引导程序内联的标题元素？

> ID：14227380
> 
> 赞同：3
> 
> 时间：2013-01-09T02:25:30.253
> 
> 标签：html, css, twitter-bootstrap

我正在使用引导程序，并希望在部分的标题中有一个链接（按钮）来编辑它（如维基百科 [编辑] 部分链接）。

这就是我所拥有的，但它的对齐不好（按钮在文本下方）：

```
<h3>
  <span>Details</span>
  <span>
    <a class="btn pull-right" href="/edit">Edit</a>
  </span>
</h3> 
```

有更好的方法来处理这个吗？*（我几乎可以肯定我错过了路径）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T14:18:06.827

对齐问题是因为我将`pull-right`类（浮动）直接添加到按钮，而不是我必须浮动包装器。

```
<h3>
    Details
    <span class="actions">
        <a class="btn" href="/edit">Edit</a>
    </span>
</h3> 
```

然后，我需要添加：

```
.actions {
    float: right;
} 
```

并且按钮正确对齐，因为它不再浮动。 [这是工作小提琴。](http://jsfiddle.net/eloyesp/x5Jkj/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T02:37:10.150

试试这个：

```
<h3>
  <span>
    <a class="btn pull-right" href="/edit">Edit</a>
  </span>
  <span>Details</span>
</h3> 
```

# mysql - 子查询中的 MySQL“未知列”

> ID：14227381
> 
> 赞同：0
> 
> 时间：2013-01-09T02:25:32.323
> 
> 标签：mysql, select, subquery, ifnull

```
SELECT  
hi_proins0.PROC_INST_ID_  processId,
act_re_procdef.NAME_ processName,
(
     #Unknown column 'hi_proins0.PROC_INST_ID_' in 'where clause'
   SELECT IFNULL(ct,0) FROM (
       SELECT COUNT(*) FROM act_hi_taskinst hi_task1
            INNER JOIN act_hi_procinst hi_proins1
                ON hi_task1.PROC_INST_ID_ = hi_proins1.PROC_INST_ID_
            WHERE  hi_proins1.PROC_INST_ID_ = hi_proins0.PROC_INST_ID_
                AND hi_task1.ASSIGNEE_ != hi_proins1.START_USER_ID_
                AND hi_task1.ASSIGNEE_ = hi_task0.ASSIGNEE_
            GROUP BY hi_task1.ASSIGNEE_
       ) ti

) approvalNodeCount,
(
   ...
) spendTime FROM 
  act_hi_taskinst hi_task0

LEFT JOIN act_hi_procinst hi_proins0 ON hi_proins0.PROC_INST_ID_ = hi_task0.PROC_INST_ID_
INNER JOIN act_re_procdef ON act_re_procdef.ID_ = hi_proins0.PROC_DEF_ID_ 
GROUP BY hi_proins0.PROC_INST_ID_ 
```

* * *

它在“where子句”中抛出未知列“hi_proins0.PROC_INST_ID_”

```
 SELECT IFNULL(ct,0) FROM (
   ...
 ) ti 
```

并且 ifnull 不适用于上面

如何解决？:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:27:16.637

试试这个：

```
SELECT hi_proins0.PROC_INST_ID_  processId, act_re_procdef.NAME_ processName,
       IFNULL((SELECT COUNT(*) FROM act_hi_taskinst hi_task1
               INNER JOIN act_hi_procinst hi_proins1 ON hi_task1.PROC_INST_ID_ = hi_proins1.PROC_INST_ID_
               WHERE hi_proins1.PROC_INST_ID_ = hi_proins0.PROC_INST_ID_    AND 
                     hi_task1.ASSIGNEE_ != hi_proins1.START_USER_ID_ AND hi_task1.ASSIGNEE_ = hi_task0.ASSIGNEE_
               GROUP BY hi_task1.ASSIGNEE_
            ), 0 ) approvalNodeCount,
(
   ...
) spendTime 
FROM act_hi_taskinst hi_task0
LEFT JOIN act_hi_procinst hi_proins0 ON hi_proins0.PROC_INST_ID_ = hi_task0.PROC_INST_ID_
INNER JOIN act_re_procdef ON act_re_procdef.ID_ = hi_proins0.PROC_DEF_ID_ 
GROUP BY hi_proins0.PROC_INST_ID_ 
```

# python - Python lxml XPATH - 查找特定节点的所有父节点的属性

> ID：14227382
> 
> 赞同：2
> 
> 时间：2013-01-09T02:25:38.583
> 
> 标签：python, xpath, svg, lxml

在 SVG 文件中，我使用`xpath`查找包含相对 SVG 路径的节点，例如，

```
<path d="m -0.3,-0.3 l 0.6,0 l 0,0.6 l -0.6,0 l 0,-0.6 z" transform="translate(-1 -0.5)"/> 
```

这个节点的各个父节点一直到根节点都会有一个

```
transform="translate(X Y)" 
```

确定上述相对路径的实际放置位置的属性。什么是正确/简洁/有效的方法来捕获这个路径/节点的父节点一直到根节点，特别是那些具有“转换”属性的节点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:34:41.297

采用

```
'ancestor::*[starts-with(@transform,"translate")]' 
```

例如：

```
import lxml.etree as ET

content = '''
<bar transform="translate(1 1)">
<foo transform="translate(1 1)">
<path d="m -0.3,-0.3 l 0.6,0 l 0,0.6 l -0.6,0 l 0,-0.6 z" transform="translate(-1 -0.5)"/>
</foo>
</bar>
'''
doc = ET.fromstring(content)
for path in doc.xpath('//path'):
    print(path.xpath('ancestor::*[starts-with(@transform,"translate")]')) 
```

产量

```
[<Element bar at 0xb749448c>, <Element foo at 0xb7494504>] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:52:41.603

> 什么是正确/简洁/有效的方法来捕获这个路径/节点的父节点一直到根节点，特别是那些具有“转换”属性的节点？

**使用**：

```
ancestor::*[@transform] 
```

这将选择所有具有`transform`属性的祖先元素。

**`transform`可以直接选择祖先的所有**属性：

```
ancestor::*/@transform 
```

**如果您只对那些`transform`字符串值以字符串“translate(”**（可能以空格开头）开头）的属性感兴趣，请使用：

```
ancestor::*/@transform[starts-with(normalize-space(@transform),'translate(')] 
```

# ios - 在 uitextfield 上显示弹出框

> ID：14227385
> 
> 赞同：0
> 
> 时间：2013-01-09T02:26:05.590
> 
> 标签：ios, ipad, ios5, ios6, uipopovercontroller

我使用下面的代码创建了弹出框：

```
UIViewController* popoverContent = [[UIViewController alloc] init]; //ViewController

UIView *popoverView = [[UIView alloc] init];   //view
popoverView.backgroundColor = [UIColor blackColor];

UIDatePicker *datePicker=[[UIDatePicker alloc]init];//Date picker
datePicker.frame=CGRectMake(0,44,320, 216);
datePicker.datePickerMode = UIDatePickerModeDateAndTime;
[datePicker setMinuteInterval:5];
[datePicker setTag:10];
[datePicker addTarget:self action:@selector(Result) forControlEvents:UIControlEventValueChanged];
[popoverView addSubview:datePicker];

popoverContent.view = popoverView;
popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
popoverController.delegate=self;
[popoverContent release];

[popoverController setPopoverContentSize:CGSizeMake(320, 264) animated:NO];
[popoverController presentPopoverFromRect:tempButton.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];//tempButton.frame where you need you can put that frame 
```

tempbutton 是在隐藏的 uitextfied 上创建的按钮（创建以获取 tempButton.frame 中的框架）。

我想知道是否可以在 uitextfied 中使用任何可以代替 tempbutton.frame 的函数，例如 uitextfied.frame 之类的。

请让我知道我是 ios 的菜鸟。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:32:49.630

您可以使用：

```
yourTextField.frame 
```

就像你会

```
tempButton.frame 
```

# php - 在 Javascript 中反序列化 PHP 数组

> ID：14227388
> 
> 赞同：14
> 
> 时间：2013-01-09T02:26:59.987
> 
> 标签：php, javascript, ajax

我有一个表，其中包含我计划请求并将其传递给的序列化数组行`JavaScript`。

问题是 - 是否可以`unserialize`使用 JavaScript 而不是 PHP？

否则我将不得不加载所有行，循环它们并反序列化它们并将它们分配给一个临时 PHP 数组，然后将其 json_encode 回 JavaScript，如果我可以发送仍然序列化的数据以便 JavaScript 可以反序列化数据时，这似乎非常低效它需要。

是否有一个内置的 Javascript 函数可以做到这一点，或者我必须在编码之前循环 PHP 中的行？

注意我没有使用 jQuery。

编辑：我的表中的 PHP 序列化数据示例：

```
a:8:{i:0;a:2:{i:0;i:10;i:1;i:11;}i:1;a:2:{i:0;i:9;i:1;i:11;}i:2;a:2:
{i:0;i:8;i:1;i:11;}i:3;a:2:{i:0;i:8;i:1;i:10;}i:4;a:2:{i:0;i:8;i:1;i:9;}i:5;a:2:
{i:0;i:8;i:1;i:8;}i:6;a:2:{i:0;i:8;i:1;i:7;}i:7;a:2:{i:0;i:8;i:1;i:6;}} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T02:33:36.617

Php.js 具有反序列化和序列化的 javascript 实现：

[http://phpjs.org/functions/unserialize/](http://phpjs.org/functions/unserialize/)

[http://phpjs.org/functions/serialize/](http://phpjs.org/functions/serialize/)

也就是说，在服务器端转换为 JSON 可能更有效。JSON.parse 会比 PHP.js 的反序列化快很多。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-11-24T20:18:11.667

我想我会尝试编写一个可以反序列化 PHP 序列化数据的 JS 函数。

但在寻求此解决方案之前，请注意：

*   PHP 函数生成的格式`serialize`是 PHP 特定的，因此最好的选择是使用 PHP`unserialize`来 100% 保证它正确地完成工作。
*   PHP 可以将类信息存储在这些字符串中，甚至可以存储一些自定义序列化方法的输出。因此，要反序列化此类字符串，您需要了解这些类和方法。
*   PHP 数据结构与 JavaScript 数据结构不是一一对应的：PHP 关联数组可以有字符串作为键，因此它们看起来更像 JavaScript 对象而不是 JS 数组，但在 PHP 中键保持插入顺序，键可以有JS 对象不可能实现的真正数字数据类型。有人可能会说，那么我们应该查看`Map`JS 中的对象，但那些允许将 13 和“13”存储为单独的键，这是 PHP 不允许的。而我们在这里只是触及了冰山一角......
*   PHP 序列化对象的受保护和私有属性，这不仅很奇怪（这有多*私密*？），而且是 JS 中（尚）不存在的概念，或者至少不以相同的方式存在。如果有人会以某种方式在 JS 中实现（硬）私有属性，那么一些反序列化如何能够*设置**这样*的私有属性？
*   JSON 是一种不特定于 PHP 的替代方案，也不关心自定义类。如果您可以访问发生序列化的 PHP 源，则将其更改为生成 JSON。PHP 提供`json_encode`了这一点，而 JavaScript 必须`JSON.parse`对其进行解码。如果可以的话，这当然是要走的路。

如果有了这些评论，您仍然认为需要 JS 反序列化函数，请继续阅读。

这是一个 JS 实现，它提供了一个`PHP`与内置对象具有相似方法的`JSON`对象：`parse`和`stringify`.

当`parse`方法的输入引用一个类时，它将首先检查您是否在（可选）第二个参数中传递了对该类的引用。如果没有，将为该类创建一个模拟（以避免不希望的副作用）。在任何一种情况下，都会创建该类的实例。如果输入字符串指定发生了*自定义*序列化`unserialize`，则将调用该对象实例上的方法。您必须提供该方法中的逻辑，因为字符串本身并未提供有关如何完成此操作的信息。它仅在*生成*该字符串的 PHP 代码中已知。

此实现还支持循环引用。当关联数组变成顺序数组时，会返回一个 JS 数组。

```
const PHP = {
    stdClass: function() {},
    stringify(val) {
        const hash = new Map([[Infinity, "d:INF;"], [-Infinity, "d:-INF;"], [NaN, "d:NAN;"], [null, "N;"], [undefined, "N;"]]); 
        const utf8length = str => str ? encodeURI(str).match(/(%.)?./g).length : 0;
        const serializeString = (s,delim='"') => `${utf8length(s)}:${delim[0]}${s}${delim[delim.length-1]}`;
        let ref = 0;

        function serialize(val, canReference = true) {
            if (hash.has(val)) return hash.get(val);
            ref += canReference;
            if (typeof val === "string") return `s:${serializeString(val)};`;
            if (typeof val === "number") return  `${Math.round(val) === val ? "i" : "d"}:${(""+val).toUpperCase().replace(/(-?\d)E/, "$1.0E")};`;
            if (typeof val === "boolean") return  `b:${+val};`;
            const a = Array.isArray(val) || val.constructor === Object;
            hash.set(val, `${"rR"[+a]}:${ref};`);
            if (typeof val.serialize === "function") {
                return `C:${serializeString(val.constructor.name)}:${serializeString(val.serialize(), "{}")}`;
            }
            const vals = Object.entries(val).filter(([k, v]) => typeof v !== "function");
            return (a ? "a" : `O:${serializeString(val.constructor.name)}`) 
                + `:${vals.length}:{${vals.map(([k, v]) => serialize(a && /^\d{1,16}$/.test(k) ? +k : k, false) + serialize(v)).join("")}}`;
        }
        return serialize(val);
    },
    // Provide in second argument the classes that may be instantiated
    //  e.g.  { MyClass1, MyClass2 }
    parse(str, allowedClasses = {}) {
        allowedClasses.stdClass = PHP.stdClass; // Always allowed.
        let offset = 0;
        const values = [null];
        const specialNums = { "INF": Infinity, "-INF": -Infinity, "NAN": NaN };

        const kick = (msg, i = offset) => { throw new Error(`Error at ${i}: ${msg}\n${str}\n${" ".repeat(i)}^`) }
        const read = (expected, ret) => expected === str.slice(offset, offset+=expected.length) ? ret 
                                         : kick(`Expected '${expected}'`, offset-expected.length);

        function readMatch(regex, msg, terminator=";") {
            read(":");
            const match = regex.exec(str.slice(offset));
            if (!match) kick(`Exected ${msg}, but got '${str.slice(offset).match(/^[:;{}]|[^:;{}]*/)[0]}'`);
            offset += match[0].length;
            return read(terminator, match[0]);
        }

        function readUtf8chars(numUtf8Bytes, terminator="") {
            const i = offset;
            while (numUtf8Bytes > 0) {
                const code = str.charCodeAt(offset++);
                numUtf8Bytes -= code < 0x80 ? 1 : code < 0x800 || code>>11 === 0x1B ? 2 : 3;
            }
            return numUtf8Bytes ? kick("Invalid string length", i-2) : read(terminator, str.slice(i, offset));
        }

        const create = className => !className ? {}
                    : allowedClasses[className] ? Object.create(allowedClasses[className].prototype)
                    : new {[className]: function() {} }[className]; // Create a mock class for this name
        const readBoolean = () => readMatch(/^[01]/, "a '0' or '1'", ";");
        const readInt     = () => +readMatch(/^-?\d+/, "an integer", ";");
        const readUInt    = terminator => +readMatch(/^\d+/, "an unsigned integer", terminator);
        const readString  = (terminator="") => readUtf8chars(readUInt(':"'), '"'+terminator);

        function readDecimal() {
            const num = readMatch(/^-?(\d+(\.\d+)?(E[+-]\d+)?|INF)|NAN/, "a decimal number", ";");
            return num in specialNums ? specialNums[num] : +num;
        }

        function readKey() {
            const typ = str[offset++];
            return typ === "s" ? readString(";") 
                 : typ === "i" ? readUInt(";")
                 : kick("Expected 's' or 'i' as type for a key, but got ${str[offset-1]}", offset-1);
        }

        function readObject(obj) {
            for (let i = 0, length = readUInt(":{"); i < length; i++) obj[readKey()] = readValue();
            return read("}", obj);
        }

        function readArray() {
            const obj = readObject({});
            return Object.keys(obj).some((key, i) => key != i) ? obj : Object.values(obj);
        }

        function readCustomObject(obj) {
            if (typeof obj.unserialize !== "function") kick(`Instance of ${obj.constructor.name} does not have an "unserialize" method`);
            obj.unserialize(readUtf8chars(readUInt(":{")));
            return read("}", obj);
        }

        function readValue() {
            const typ = str[offset++].toLowerCase();
            const ref = values.push(null)-1;
            const val = typ === "n" ? read(";", null)
                      : typ === "s" ? readString(";")
                      : typ === "b" ? readBoolean()
                      : typ === "i" ? readInt()
                      : typ === "d" ? readDecimal()
                      : typ === "a" ? readArray()                            // Associative array
                      : typ === "o" ? readObject(create(readString()))       // Object
                      : typ === "c" ? readCustomObject(create(readString())) // Custom serialized object
                      : typ === "r" ? values[readInt()]                      // Backreference
                      : kick(`Unexpected type ${typ}`, offset-1);
            if (typ !== "r") values[ref] = val;
            return val;
        }

        const val = readValue();
        if (offset !== str.length) kick("Unexpected trailing character");
        return val;
    }
}
/**************** EXAMPLE USES ************************/

// Unserialize a sequential array
console.log(PHP.parse('a:4:{i:0;s:4:"This";i:1;s:2:"is";i:2;s:2:"an";i:3;s:5:"array";}'));

// Unserialize an associative array into an object
console.log(PHP.parse('a:2:{s:8:"language";s:3:"PHP";s:7:"version";d:7.1;}'));

// Example with class that has custom serialize function:
var MyClass = (function () {
    const priv = new WeakMap(); // This is a way to implement private properties in ES6
    return class MyClass {
        constructor() {
            priv.set(this, "");
            this.wordCount = 0;
        }
        unserialize(serialised) {
            const words = PHP.parse(serialised);
            priv.set(this, words);
            this.wordCount = words.split(" ").length;
        }
        serialize() {
            return PHP.stringify(priv.get(this));
        }
    }
})();

// Unserialise a PHP string that needs the above class to work, and will call its unserialize method
// The class needs to be passed as object key/value as second argument, so to allow this side effect to happen:
console.log(PHP.parse('C:7:"MyClass":23:{s:15:"My private data";}', { MyClass } ));
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-09T02:33:18.287

环绕`json_encode`_`unserialize`

```
echo json_encode( unserialize( $array)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T02:31:19.873

[http://php.net/manual/en/book.json.php](http://php.net/manual/en/book.json.php)

Just noticed your comment so here we go:

in PHP

```
json_encode(unserialize(SerializedVal)); 
```

in JavaScript:

```
JSON.parse(JsonString); 
```

# apache - 如何使用 Apache 将两个域重定向到另一个域？

> ID：14227397
> 
> 赞同：-1
> 
> 时间：2013-01-09T02:28:17.407
> 
> 标签：apache, .htaccess, mod-rewrite

我有三个域，其中两个应该重定向到另一个。

www.example.com
www.example.net
www.example.org

我已经设置了 DNS 条目，以便它们都将转到相同的 IP 地址。

我希望将 .com 和 .net 网址永久重定向到 .org 地址。所以：

[http://www.example.com](http://www.example.com) -> [http://www.example.org](http://www.example.org)
[http://www.example.net](http://www.example.net) -> [http://www.example.org](http://www.example.org)
[http://example.com](http://example.com) -> [http ://www.example.org](http://www.example.org)
[http://example.net](http://example.net) -> [http://www.example.org](http://www.example.org)

在我的 .htaccess 文件中，我根据对[http://httpd.apache.org/docs/2.2/rewrite/remapping.html#canonicalhost的最佳理解设置了以下配置](http://httpd.apache.org/docs/2.2/rewrite/remapping.html#canonicalhost)

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www.example.org$ [NC]
RewriteCond %{HTTP_HOST} !^$
RewriteRule ^/?(.*)$ http://www.example.org/$1 [L,R=301] 
```

从理论上讲，应该发生的情况是对 HTTP_HOST*不是*www.example.org 的站点的任何请求，然后它应该永久重定向到[http://www.example.org/](http://www.example.org/) ，然后是 URL 上的任何原始路径.

我确信这很容易做到，我只是遗漏了一些明显的东西，但似乎所有其他问题和搜索结果都在谈论重定向子域和文件路径，但没有一个谈论重定向顶级域一个网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:32:56.413

这与我使用的几乎相同：

```
RewriteEngine on
RewriteCond  %{HTTP_HOST}   !^www.example.org$
RewriteRule ^/(.*)$ http://www.example.org/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:51:20.170

事实证明我是在正确的轨道上。我的最终代码是这样的：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www.example.org$ [NC]
RewriteRule ^(.*)$ http://www.example.org/$1 [L,R=301] 
```

对我来说问题的根源是我的主机不知道我有多个域。因此，当请求在解决后进入站点时，主机会抛出一个页面，说在那里找不到站点。所以我将我的 example.com 和 example.net 站点添加到我的主机并将它们停放在 example.org。

也许其他人可以比我更好地解释这里发生的事情，但真正的问题不在于重写，而在于我的托管服务提供商。

# struts - Value of submit button not being passed to ActionForm in Struts 1.x

> ID：14227407
> 
> 赞同：0
> 
> 时间：2013-01-09T02:29:18.747
> 
> 标签：struts

I am trying to implement multiple submit buttons in a Struts jsp. To do so, I am passing the value of the submit button to the ActionForm and reading that value. My setup is like this:

```
JSP
...snip...
<form name = "formName" action = "action.do" onSubmit = "return myFunc()" method = "POST">
<input type = "text" name = "myValue" /> 
<input type = "submit" name = "myButton" value = "Submit" />
</form>
...snip...

MyForm
...snip...
String myButton;
String myValue;
[Generated getters and setters]
...snip... 
```

As far as I can tell, the submit button from the jsp should submit a value of 'Submit' to the myButton variable in MyForm, but when I try to access it in the Action Class I always get a value of null.

I know that my struts-config.xml file is configured properly because the text input in the jsp successfully populates the 'myValue' variable in MyForm, which can be read by my Action Class.

Is there something special about submit buttons in Struts that I am missing? It seems everything should work...

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:41:46.963

您需要为此使用隐藏的输入类型， `value`提交按钮的属性仅用于按钮上的文本，而不用于将该值与其余的表单数据一起发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:11:36.697

可以通过使用 Struts JSP 标签来定义表单和提交按钮。为什么不使用 Struts JSP 标签？

```
<html:form action="action.do">
<html:submit property="myButton" value="Submit"/> 
```

希望能帮助到你

# php - PHP file_exists() not working

> ID：14227408
> 
> 赞同：0
> 
> 时间：2013-01-09T02:29:28.590
> 
> 标签：php, file-upload, if-statement

I have read some of the answered question here at stackoverflow which is quiet related to my problem but still I can't figure out what's wrong with my code. It does not check if the file already exist it only returns the default image even there is an existing file in my uploads folder. This is my first time to use file_exists() I'm not really familiar with this code.

here is my code:

```
<?php $filename = 'uploads/';?>
<?php if(file_exists($filename)) {?>
<img src='<?php  echo base_url();?>uploads/' width='180' height='200'  id="images"name='images' />

<?php } else { ?>

<img src='<?php echo base_url();?>assets/images/no_image.jpg' width='180' height='200' id="images" name='images' />
<?php } ?> 
```

Thanks for any help..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T02:32:46.933

这很可能是相对路径问题。您可能想尝试更绝对的路径：

```
<?php $filename = $_SERVER['DOCUMENT_ROOT'].'/my_site/uploads/';?> 
```

显然，您正确地提供了文档根目录的路径。如果您不确定那是什么，只需`var_dump($_SERVER['DOCUMENT_ROOT']);`将其与您相信或验证的上传路径进行比较。

# html - 我怎样才能使它没有人可以将我的 iWeb 站点放在 iframe 中？

> ID：14227411
> 
> 赞同：1
> 
> 时间：2013-01-09T02:30:03.440
> 
> 标签：html, iframe, breakout, iweb

如果有人知道，我想做这样没有人可以将我的 iWeb 站点放在 iframe 中？如何让我的页面自动脱离 iframe？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:30:57.140

[这个答案](https://stackoverflow.com/a/14244217/16959)也适用于这个问题：

如果将这段代码放在被`iframe`. 它的工作方式是查看（您请求的页面`top`包括`iframe`）和. 如果有不同，那么它会更改 top.location 以匹配.`self``iframe``iframe`

这是一些帮助理解这一点的 ASCII

```
|----[OuterPage.html]------|
|                          |
|    |--[InnerPage.html]-| |
|    |                   | |
|    | top !== self      | |
|    |                   | |
|    |-------------------| |
|                          |
| top === self             |
|                          |
|--------------------------| 
```

如果您单独请求 InnerPage.html（不在 iframe 中），则`top === self`评估结果为 true，但是如果您在 iframe 中请求相同页面，则相同条件将评估为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T19:10:36.800

[这里](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)还`X-Frame-Origin`指定了一个 http 标头，您可以将其放入服务器响应中，如果设置为 ，它将完全阻止浏览器呈现 iframe 。`SAMEORIGIN`

然而，它是一个依赖于浏览器的解决方案（因为浏览器必须支持标头以尊重其值），但比 JS 诡计 IMO 更好。

# xcode - xcode 4.2.5 占用大量内存，启动一些git进程

> ID：14227412
> 
> 赞同：4
> 
> 时间：2013-01-09T02:30:23.880
> 
> 标签：xcode, macos

最近我的电脑变得很慢，我检查了活动监视器，发现 xcode 占用了大约 1G 内存。每次我启动 xcode 时，都有一些我认为是 git 进程的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T15:05:45.920

尝试更新到最新版本的 XCode (5.0)

# browser - Managing multiple NPM modules browser-side

> ID：14227413
> 
> 赞同：2
> 
> 时间：2013-01-09T02:30:25.533
> 
> 标签：browser, requirejs, npm, browserify

Okay, I've looked and looked and don't quite see a question that looks like mine, nor a project that quite addresses my need. This is probably because I'm doing something insane, and I am also asking for something difficult. But I wanted to see what others think.

I'm building my first large-scale single-page application. The way I've set it up is by breaking it up into a number of NPM modules. I like this because NPM provides a nice environment to build purely node-run unit tests in, a way to reuse some of my code for other projects we do at my company, and a forced separation of concerns. Here's the general idea:

*   A core data model library
*   A core UI library
*   A psuedo-library that provides individual UI components based on the above two…</li>
*   …another of those…</li>
*   …etc for each sub-application of my application
*   A very small central project that pulls all the components provided by the above together into an interface as necessary

This means a lot of libraries, and a number of dependencies that are common (Underscore, moment, EventEmitter2, etc).

Now I need to figure out how to get all that code into a browser. Ideally, I'd want something with some **browserify** characteristics (rolls modules and dependencies together into single files to cut down on resource callbacks), but has some of **requirejs**'s asynchronous loading DNA (I'd rather not have to load my entire application up front; being able to call down chunks when the user navigates is useful).

I'm having trouble reconciling the above, though. I get what Require is trying to do, but every time I try to use it for already-built NPM modules (not AMD modules, though I'm happy to write that central project in an AMD-ish way) I get really confused and the sense that it's not really meant for me. For a single page application it seems like it's just going to resolve everything into one file anyway, since my dynamic resources are whole dependencies rather than individual files? And of course, Browserify is made with the sole intent of Hulk Smashing all your code into a single file. I could bundle each NPM module separately with Browserify, but then I'm duplicating the common dependencies for each.

I've looked at a bunch of other projects and they all seem to be addressing the client side more than the bundling side. What am I missing here?

*[In pipe dream mode, I also like **inject**, partly because it's written by LinkedIn (who have a good reputation in my mind), but also for its localStorage caching.]*

# c# - How to get the current line number at break/exception in Visual Studio add-in?

> ID：14227416
> 
> 赞同：4
> 
> 时间：2013-01-09T02:31:16.803
> 
> 标签：c#, visual-studio, visual-studio-2012, visual-studio-debugging, visual-studio-addins

I'm messing around with the Visual Studio add-in API trying to see if something I want to do is possible. One thing I am doing right now is something like:

```
 public void Exec(string commandName, vsCommandExecOption executeOption, ref object varIn, ref object varOut, ref bool handled)
    {
        _applicationObject.Events.DebuggerEvents.OnExceptionThrown += DebuggerEvents_OnExceptionThrown;
        handled = false;
        if(executeOption == vsCommandExecOption.vsCommandExecOptionDoDefault)
        {
            if(commandName == "MyAddin1.Connect.MyAddin1")
            {
                handled = true;
                return;
            }
        }
    }

    void DebuggerEvents_OnExceptionThrown(string ExceptionType, string Name, int Code, string Description, ref dbgExceptionAction ExceptionAction)
    {
        //how to get line number here?
    } 
```

Ideally, I'd like to be able to get the current function and line number whenever an exception is thrown by a program being debugged. Is this possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:57:07.700

此信息显然是从调试信息中提取的。`StackFrames`因此，它并不总是可用的，我想这就是为什么在这种情况下对象不实现它是有意义的。

无论如何，要获得包含文件和行号信息（以及 IL 偏移量等）的堆栈跟踪，您必须在已调试应用程序的上下文中动态执行代码。您可以使用`GetExpression`.

总之：

```
var tmp = dte.Debugger.GetExpression(
    "new System.Diagnostics.StackTrace(true).ToString();", true); 
```

这将返回一个带有堆栈跟踪的字符串，包括文件和行号......但是，您必须解析这个返回的字符串才能实际使用它，我认为这比更[常见的方法慢得多](https://stackoverflow.com/a/2960844/69742)

# python - Python - 按修改日期 [小时] 对文件进行分组

> ID：14227419
> 
> 赞同：1
> 
> 时间：2013-01-09T02:31:25.750
> 
> 标签：python

我正在使用以下脚本来获取目录中的所有文件，然后根据修改日期过滤它们。

```
dir = '/tmp/whatever'
dir_files = os.listdir(dir)
dir_files.sort(key=lambda x: os.stat(os.path.join(dir, x)).st_mtime)
files = []
for f in dir_files:
    t = os.path.getmtime(dir + '/' + f)
    c = os.path.getctime(dir + '/' + f)
    mod_time = datetime.datetime.fromtimestamp(t)
    created_time = datetime.datetime.fromtimestamp(c)
    if mod_time >= form.cleaned_data['start'].replace(tzinfo=None) and mod_time <= form.cleaned_data['end'].replace(tzinfo=None):
         files.append(f)
return by_hour 
```

我需要更进一步，按文件修改的时间对文件进行分组。有谁知道如何做到这一点？

更新：我想把它们放在字典里（{date,hour,files}）

**更新：** 感谢您的所有回复！我尝试使用来自 david 的响应，但是当我输出结果时，它看起来如下所示（即它正在分解文件名）：

```
defaultdict(<type 'list'>, {datetime.datetime(2013, 1, 9, 15, 0): ['2', '8', '-', '2', '0', '1', '3', '0', '1', '0', '9', '1', '5', '1', '8', '4', '3', '.', 'a', 'v', 'i', '2', '9', '-', '2', '0', '1', '3', '0', '1', '0', '9', '1', '5', '2', '0', '2', '4', '.', 'a', 'v', 'i', '3', '0', '-', '2', '0', '1', '3', '0', '1', '0', '9', '1', '5', '3', '8', '5', '9', '.', 'a', 'v', 'i', '3', '1', '-', '2', '0', '1', '3', '0', '1', '0', '9', '1', '5', '4', '1', '2', '4', '.', 'a', 'v', 'i', '3', '2', '-', '2', '0', '1', '3', '0', '1', '0', '9', '1', '5', '5', '3', '1', '0', '.', 'a', 'v', 'i', '3', '3', '-', '2', '0', '1', '3', '0', '1', '0', '9', '1', '5', '5', '5', '5', '8', '.', 'a', 'v', 'i'], datetime.datetime(2013, 1, 9, 19, 0): ['6', '1', '-', '2', '0', '1', '3', '0', '1', '0', '9', '1', '9', '0', '1', '1', '8', '.', 'a', 'v', 'i', '6', '2', '-', '2', '0', '1', '3', '0', '1', '0', '9', '1', '9', '0', '6', '3', '1', '.', 'a', 'v', 'i', '6', '3', '-', '2', '0', '1', '3', '0', '1', '0', '9', '1', '9', '1', '4', '1', '5', '.', 'a', 'v', 'i', '6', '4', '-', '2', '0', '1', '3', '0', '1', '0', '9', '1', '9', '2', '2', '3', '3', '.', 'a', 'v', 'i']}) 
```

我希望让它存储完整的文件名。另外，我将如何遍历它并在每个小时和它们所属的小时内获取文件？

我设法通过将其更改为附加来解决上述问题。但是，它不是从最旧的时间到最近的时间排序的。

非常感谢，本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T02:40:22.347

您可以使用以下行将对象四舍五入`datetime`到最接近的小时：

```
mod_hour = datetime.datetime(*mod_time.timetuple()[:4]) 
```

（这是因为`mod_time.timetuple()[:4]`返回一个像 一样的元组`(2013, 1, 8, 21`）。因此，使用 a`collections.defaultdict`来保存列表字典：

```
import collections

by_hour = collections.defaultdict(list)
for f in dir_files:
    t = os.path.getmtime(dir + '/' + f)
    mod_time = datetime.datetime.fromtimestamp(t)
    mod_hour = datetime.datetime(*mod_time.timetuple()[:4])
    # for example, (2013, 1, 8, 21)
    by_hour[mod_hour].append(f) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:24:15.117

```
import os, datetime, operator
dir = "Your_dir_path"
by_hour =sorted([(f,datetime.datetime.fromtimestamp(os.path.getmtime(os.path.join(dir , f)))) for f in os.listdir(dir)],key=operator.itemgetter(1), reverse=True) 
```

上面的代码将根据年-->月-->日-->小时-->分钟-->秒格式进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T04:30:01.703

基于 David 的出色回答，您可以使用 itertools.groupby 稍微简化工作：

```
import os, itertools, datetime

dir = '/tmp/whatever'
mtime = lambda f : datetime.datetime.fromtimestamp(os.path.getmtime(dir + '/' + f))
mtime_hour = lambda f: datetime.datetime(*mtime(f).timetuple()[:4])
dir_files = sorted(os.listdir(dir), key=mtime)
dir_files = filter(lambda f: datetime.datetime(2012,1,2,4) <   mtime(f) < datetime.datetime(2012,12,1,4), dir_files) 
by_hour = dict((k,list(v)) for k,v in itertools.groupby(dir_files, key=mtime_hour)) #python 2.6
#by_hour = {k:list(v) for k,v in itertools.groupby(dir_files, key=mtime_hour)} #python 2.7 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T07:34:32.660

懒惰地构建条目，使用 UTC 时区，只读取一次修改时间：

```
#!/usr/bin/env python
import os
from collections import defaultdict
from datetime import datetime

HOUR = 3600 # seconds in an hour
dirpath = "/path/to/dir"
start, end = datetime(...), datetime(...)

# get full paths for all entries in dirpath
entries = (os.path.join(dirpath, name) for name in os.listdir(dirpath))
# add modification time truncated to hour
def date_and_hour(path):
    return datetime.utcfromtimestamp(os.path.getmtime(path) // HOUR * HOUR)
entries = ((date_and_hour(path), path) for path in entries)
# filter by date range: [start, end)
entries = ((mtime, path) for mtime, path in entries if start <= mtime < end)
# group by hour
result = defaultdict(list)
for dt, path in entries:
    result[dt].append(path)

from pprint import pprint
pprint(dict(result)) 
```

# html - How to make nav submenus open above and below main bar, so no need to scroll

> ID：14227421
> 
> 赞同：1
> 
> 时间：2013-01-09T02:31:47.307
> 
> 标签：html, css, nav

I have a navigation bar created with html and css, it works well but I can't figure out how to get my sub menus to go above and below the bar when hovered, instead of all of them going below the bar, resulting in you having to scroll down the page.

Here is the html and css.

```
 <nav>
    <ul>
    <li><a href="#">One</a></li>
    <li><a href="#">Two</a></li>
    <li><a href="#">Three</a>
        <ul>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
        </ul>
    </li>
    <li><a href="#">Four</a>
        <ul>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
        </ul>
    </li>
    <li><a href="#">Five</a>
        <ul>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
            <li><a href="#">#</a></li>
        </ul>
    </li>
    <li><a href="#">Six</a></li>
    </ul>
    </nav>

    <!-- language: lang-css -->

nav ul ul {
    display: none;
}

nav ul li:hover > ul {
    display: block;
}

nav ul {
    background: #efefef; 
    background: linear-gradient(top, #efefef 0%, #bbbbbb 100%);  
    background: -moz-linear-gradient(top, #efefef 0%, #bbbbbb 100%); 
    background: -webkit-linear-gradient(top, #efefef 0%,#bbbbbb 100%); 
    box-shadow: 0px 0px 9px rgba(0,0,0,0.15);
    padding: 0 20px;
    !border-radius: 10px;  
    list-style: none;
    position: relative;
    top:245px;
    display: inline-table;
}
nav ul:after {
    content: "";
    clear: both;
    display: block;
}

nav ul li {
    float: left;
}
nav ul li:hover {
    background: #4b545f;
    background: linear-gradient(top, #4f5964 0%, #5f6975 40%);
    background: -moz-linear-gradient(top, #4f5964 0%, #5f6975 40%);
    background: -webkit-linear-gradient(top, #4f5964 0%,#5f6975 40%);
}
    nav ul li:hover a {
        color: #fff;
    }

nav ul li a {
    display: block;
    padding: 10px 32px;
    color: #757575;
    text-decoration: none;
    font-size: 13px;
}

nav ul ul {
    background: #5f6975;
    border-radius: 0px;
    padding: 0;
    position: absolute;
    top: 100%;
}
nav ul ul li {
    float: none; 
    border-top: 1px solid #6b727c;
    border-bottom: 1px solid #575f6a;
    position: relative;
}
nav ul ul li a {
    padding: 15px 40px;
    color: #fff;
}   
nav ul ul li a:hover {
    background: #4b545f;
}

nav ul ul ul {
    position: absolute;
    left: 100%;
    top:0;
} 
```

# google-analytics - Is it possible to segment visits by goal completions in Google Analytics?

> ID：14227422
> 
> 赞同：2
> 
> 时间：2013-01-09T02:31:56.763
> 
> 标签：google-analytics, google-analytics-api

I have a website, and want to use the Google Analytics API to give me data that only includes visits with a specific goal completion (say goal 2). I'm trying to use the ga:goal(2)Completions metric in a segment to get this data like this:

```
segment=dynamic::ga:goal(2)Completions!=0 
```

However, whenever I try this in the Query Explorer I'm told this is an invalid segment value. I don't see goal(n)Completions as a disallowed metric for use in segments in the documentation (https://developers.google.com/analytics/devguides/reporting/core/v3/reference#segment), so what's the problem here? Is there a different way to get this data segment?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:05:03.813

这是因为

*   你不应该使用“segment=”
*   (n) 值应不带括号。

ids= ga:XXXXXXXX

开始日期= 2012-01-01

结束日期= 2012-01-31

指标= ga：访问

段=动态::ga:goal2Completions!=0

我已经测试过，上面的示例应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T16:29:33.700

如果你想做相反的使用 segment= dynamic::ga:goal2Completions==0

您可以通过运行不进行分段的查询来仔细检查它 - 以上都应该总结最新的。

干杯

# android - 是否有可能获得 ACTION_DELETE 意图回调

> ID：14227423
> 
> 赞同：0
> 
> 时间：2013-01-09T02:31:59.313
> 
> 标签：android

我用了

```
Uri packageURI = Uri.parse("package:com.any.app");
Intent intent = new Intent(Intent.ACTION_DELETE, packageURI);
startActivity(intent); 
```

删除一个包，但删除操作完成后我无法获得回调或删除成功事件。

我搜索了很多但没有线索，是否有可能获得`ACTION_DELETE`回调？

![中文单词](../Images/ca8039ae7eaacd30fe719e35f7e4f98a.png)

由对话框上的确认按钮触发的事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:53:27.530

最后，我找到[了 this](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)和[this](https://stackoverflow.com/questions/12834594/intent-package-added-not-registering)。观察安装或删除包的方法是添加广播以接收意图。希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T07:28:20.190

Intent 中有一个 ACTION_PACKAGE_FULLY_REMOVED。详情[请看这里](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_FULLY_REMOVED.)

但要小心，Intent.ACTION_PACKAGE_FULLY_REMOVED 的 API 级别是 14。如果你的应用程序是 14 以下，你可以试试这个。首先，创建一个**BroadcastReceiver** “UninstallReceiver”。然后在AndroidManifest.xml中**声明它。我的声明是这样的**

```
<receiver android:name="com.example.manager.Broadcast.UninstallReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_FULLY_REMOVED" />
            <data android:scheme="package" />
        </intent-filter>
</receiver>" 
```

当您发送 Intent.ACTION_DELETE 时，如果应用程序完全卸载，您可以在 BroadcastReceiver 中接收广播，然后您可以做任何您想做的事情。

# javascript - Trying to create a simple Multiple Choice game

> ID：14227425
> 
> 赞同：1
> 
> 时间：2013-01-09T02:32:20.290
> 
> 标签：javascript, for-loop, innerhtml, getelementbyid, radio-group

My function that lists the question and choices won't work. I keep getting the error code `document.getElementById(...)` is null or not an object. The syntax appears to be correct.

I want the questions and choices to appear in the same divs. I do not want to list all my questions at once. When the user completes a question, they then move on to the next question which will appear in exactly the same divs as the first question until all the questions have been seen.

```
<script>

var questions = new Array();
questions[0] = 'Is there a difference between a jungle and a rain forest?'
questions[1] = 'What is the world\'s most common religion?',
questions[2] = 'What is the second largest country (in size) in the world?';

var choices = new Array();
choices[0] = ['No difference', 'Some difference', 'Completely different'],
choices[1] = ['Christianity', 'Buddhism', 'Hinduism', 'Islam'],
choices[2] = ['USA', 'China', 'Canada', 'Russia'];

var answers = new Array();
answers[0] = ['Some difference'],
answers[1] = ['Christianity'],
answers[2] = ['Canada'];

var score = 0;
i= 0;

var listQuestion = function(){  
    if( i < questions.length ){
        document.getElementById("myDiv1").innerHTML = '<p>'+questions[i]+'</p>';
        for (k=0; k<choices[i].length; k++){
            document.getElementById("myDiv2").innerHTML ='<p><input type = "radio" name = "questionchoice">'+choices[i][k]+'</p>';
        }
        document.getElementById("myDiv3").innerHTML = '<p><button onClick = "getRadioValue()">Check</button></p> <br>';
    };
};

var getRadioValue = function(){
    for ( var h = 0; h < document.getElementsByName('questionchoice').length; h++ ){
        var value = '';
        if (document.getElementsByName('questionchoice')[h].checked==true){
            value = document.getElementsByName('questionchoice')[h].value;
            score+=1
        }
    }
    if (value== answers[i]){
        document.getElementById("myDiv4").innerHTML ="That is correct. </br><button input type = 'submit' onClick = 'loadContent()'> Next Question</button>";   
    }
    else {
        document.getElementById("myDiv4").innerHTML ="That is incorrect. </br><button input type = 'submit' onClick = 'loadContent()'> Next Question</button>"; 
    }
    i++;
};

var whatIsScore = function(){
    return score; 
}

window.onload = listQuestion();

</script>

</head>

<body>
    <div id="myDiv1"></div> 
    <div id="myDiv2"></div>
    <div id="myDiv3"></div>
    <div id="myDiv4"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:49:26.830

这是完整的代码：

```
<!DOCTYPE html>
<html>
<head>

<script>
var questions = new Array();
questions[0] = 'Is there a difference between a jungle and a rain forest?';
questions[1] = 'What is the world\'s most common religion?',
questions[2] = 'What is the second largest country (in size) in the world?';

var choices = new Array();
choices[0] = ['No difference', 'Some difference', 'Completely different'],
choices[1] = ['Christianity', 'Buddhism', 'Hinduism', 'Islam'],
choices[2] = ['USA', 'China', 'Canada', 'Russia'];

var answers = new Array();
answers[0] = ['Some difference'],
answers[1] = ['Christianity'],
answers[2] = ['Canada'];

var score = 0;
i= 0;

var listQuestion = function(){  
    if(i<questions.length){
        document.getElementById("myDiv1").innerHTML = '<p>'+questions[i]+'</p>';
        var choicesOutput=[];//new Array()
        for (var k=0; k<choices[i].length; k++){
            choicesOutput.push(
                '<p><input type = "radio" name ='
                +' "questionchoice">'+choices[i][k]+'</p>');
        }
        document.getElementById("myDiv2").innerHTML =choicesOutput.join("");
        document.getElementById("myDiv3").innerHTML = 
            '<p><button onClick = "getRadioValue()">Check</button></p> <br>';
    }
};
var getRadioValue = function(){
    var value = '';
    for (var h = 0; 
        h < document.getElementsByName('questionchoice').length; h++){
        if (document.getElementsByName('questionchoice')[h]
            .checked==true){
            value = document.getElementsByName('questionchoice')[h].value;
            score++;
        }
    }
    if (value== answers[i]){
        document.getElementById("myDiv4").innerHTML =
            "That is correct. </br><button input type = "
            +"'submit' onClick = 'loadContent()'> Next Question</button>";
    }
    else {
        document.getElementById("myDiv4").innerHTML ="That is incorrect. "
           +"</br><button input type = 'submit' onClick = 'loadContent()'> N"
           +"ext Question</button>"; 
    }
    i++;
};
var whatIsScore = function(){
    return score; 
};
function loadContent(){
    document.getElementById("myDiv4").innerHTML="";
    listQuestion();
}
window.onload = listQuestion;
</script>
</head>
<body>
<div id="myDiv1"></div> 
<div id="myDiv2"></div>
<div id="myDiv3"></div>
<div id="myDiv4"></div>
</body>
</html> 
```

# bash - 如何修改 IP 地址中的第一个八位字节

> ID：14227426
> 
> 赞同：1
> 
> 时间：2013-01-08T20:44:28.767
> 
> 标签：bash, ip, shell

谁能指导我如何使用 shell 脚本修改 IP 地址中的前两个八位字节？

我试图修改这段代码，但没有奏效。任何指导或帮助将不胜感激。

此示例将替换最后一个八位字节：

```
cat test.sh
ip=$1
baseip=`echo $ip | cut -d"." -f1-3`
echo $baseip".0"
./test.sh 192.168.133.14
192.168.133.0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T20:50:06.123

```
ip=$1
tailip=`echo $ip | cut -d"." -f3-4`
echo "x.x."$tailip 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T21:04:52.420

```
ip="10.1.2.3"
echo $ip | awk -F '.' '{printf("192.168.%d.%d", $3, $4)}'

Output: 192.168.2.3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:03:18.113

使用 bash 的 PE 能力的好方法：

```
ip="10.1.2.3"; tmpip="${ip#*.*.}";  echo "192.168.$tmpip" 
```

还要注意的一件好事是您可以随机生成要生成的 IP。只是提供一些一般性的想法。

```
ip="10.1.2.3"; tmpip="${ip#*.*.}";  echo "$[RANDOM%256].$[RANDOM%256].$tmpip" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T02:59:53.133

```
bytes12=10.0
ip=$(echo $1 | sed "s/\([0-9]\+\.\)\{2\}\(.*$\)/$bytes12.\2/") 
```

sed：`s/a/b/`找到 a 并将其替换为 b。`\(\)`封装子表达式，由`\1, \2, ...`.

第一个子表达式匹配类似 的序列`192.168.`，即两次 ( `\{2\}`) 至少一个数字 ( `\+`) 后跟一个点。第二个子表达式匹配介于它和行尾 ( `$`) 之间的任何内容。

由于我们对 不感兴趣`\1`，因此无需提及。我们用我们固定的高阶字节表示来替换它`$bytes12`。最后一个 to 字节预计包含在 中`\2`，所以我们只是附加它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-30T15:08:07.973

```
INET_NTOA () { 
    local IFS=. num quad ip e
    num=$1
    for e in 3 2 1
    do
        (( quad = 256 ** e))
        (( ip[3-e] = num / quad ))
        (( num = num % quad ))
    done
    ip[3]=$num
    echo "${ip[*]}"
}

INET_ATON () {
    local IFS=. ip num e
    ip=($1)
    for e in 3 2 1
    do
        (( num += ip[3-e] * 256 ** e ))
    done
    (( num += ip[3] ))
    echo "$num"
} 
```

在这里找到：[如何在 bash 中有效地将 long int 转换为 dotted quad IP](https://stackoverflow.com/questions/3222379/how-to-efficiently-convert-long-int-to-dotted-quad-ip-in-bash)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-10T19:22:19.827

我使用这种类型的功能来自动启用或禁用防火墙规则，特别是对于我只想要在本地网络上的服务，而不能从其他任何地方访问。

我从我使用的服务器安装脚本的各个部分拼凑起来。它将提取网络接口名称，提取网络和掩码信息，然后对其进行解析，为您提供正确的掩码子网和 CIDR 表示法。实际上，我只是在今天使用此页面作为指南添加了最后一部分，但它将为您完全自动化该过程：

```
#!/bin/bash

subnetip=""
subnetmask=""
nicname=""

runme()
{
    # pull name for primary network interface with internet access
    nicname=$(ip route get 8.8.8.8 | awk '{print $5}')

    # pull interface IP Address/subnet info assigned by DHCP
    local subnetmasktemp=$(ip -o -f inet addr show $nicname | awk '{print $4}')

    # split ip/subnet into two variables, subnetip and subnetmask
    local IFS=/
    set $subnetmasktemp
    subnetip=$1
    subnetmask=$2

    # parse ipaddress and subnet info and output appropriate info for client subnet
    local baseip=0
    if [ "$subnetmask" -le 31 ] && [ "$subnetmask" -ge 24 ]; then
        baseip=`echo $subnetip | cut -d"." -f1-3`
        subnetip=($baseip".0")
    elif [ "$subnetmask" -le 23 ] && [ "$subnetmask" -ge 16 ]; then
        baseip=`echo $subnetip | cut -d"." -f1-2`
        subnetip=($baseip".0.0")
    elif [ "$subnetmask" -le 15 ] && [ "$subnetmask" -ge 8 ]; then
        baseip=`echo $subnetip | cut -d"." -f1`
        subnetip=($baseip".0.0.0")
    fi

    echo "$subnetip/$subnetmask"
}

runme; 
```

# mysql - Is there a easy way to update all the records follow one index?

> ID：14227430
> 
> 赞同：2
> 
> 时间：2013-01-09T02:32:43.920
> 
> 标签：mysql

Like this way:

```
delete from `table` where id = 3;

insert into table (id, value) values (3, "aaa"), (3, "bbb"), (3, "ccc");
```

The count of value is hundreds, and a lot of value is the same compared with the last time, only a little records to add or delete.

I use this table to store person's property, and that property is repeated, so I insert many records in the table for one person. When update one's property, some records add or delete, and most records not changed, but when I got the new property set, I don't known which to add and which to delete. So I have to delete all the old records, and then insert the new ones, but it too slow for me, is there a faster way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:15:53.610

我认为当每个人的记录数相对于整个表中的记录数较小时，您所做的可能是最快的方法，提高速度的唯一明显方法是在 id 列上创建非唯一索引。

如果您愿意进行一些非规范化，另一种方法可以做您想做的事情，就是将属性组合成逗号分隔的值。因此，您只需更新一行，而不是删除然后插入多行：

```
update table set id=3, values="aaa,bbb,ccc" where id=3; 
```

有了这个，您将失去搜索的能力`values`，除非您手动维护反向索引，并且您`values`不能包含逗号（或您使用的任何终止字符）。使用此技术时可能有用的另一个技巧是用终止字符包围值：

```
update table set id=3, values=",aaa,bbb,ccc," where id=3; 
```

这样，您仍然可以`values`通过用终止字符包围搜索词来进行全文搜索：`select * from table where ",aaa," in values`

此外，您失去了指定唯一约束的能力，因此您必须确保应用程序逻辑中的值没有重复条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:48:06.870

一旦你用正确的行设置了一个人，你可以像这样将它们复制到另一个人，例如从 id 1 复制到 2

```
insert into table (id, value)
select 2, value
from table
where id = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T02:53:41.217

您是否打算使用主键更新多个表？那么你可以看看[这个](https://stackoverflow.com/questions/668921/foreign-key-refering-to-primary-keys-across-multiple-tables)和[这个](https://stackoverflow.com/questions/6046514/how-can-i-share-the-same-primary-key-across-two-tables.)

# c++ - 在标题中定义类是一种好习惯吗？

> ID：14227438
> 
> 赞同：-1
> 
> 时间：2013-01-09T02:33:21.790
> 
> 标签：c++

我读过在标题中定义函数是一种不好的做法，但是类呢？在头文件中定义它们好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:37:54.337

除非这个类是纯模板类或其他应该是内联的类，否则最好将类实现放入 cpp 文件而不是头文件。总之，把接口放在头文件里，把实现放在cpp文件里。

附言

正如@jogojapan 所说，我说的是类实现而不是类定义。那是因为尽管 OP 正在谈论类定义，但我强烈怀疑他实际上是指类实现。

# c# - Linq FirstOrDefault 每次迭代都会评估谓词？

> ID：14227439
> 
> 赞同：3
> 
> 时间：2013-01-09T02:33:25.900
> 
> 标签：c#, linq, foreach, iteration

如果我有这样的声明：

```
var item = Core.Collections.Items.FirstOrDefault(itm => itm.UserID == bytereader.readInt()); 
```

这段代码是每次迭代都从我的流中读取一个整数，还是读取一次整数，存储它，然后在整个查找过程中使用它的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:38:13.853

考虑这段代码：

```
 static void Main(string[] args)
    {
        new[] { 1, 2, 3, 4 }.FirstOrDefault(j => j == Get());
        Console.ReadLine();
    }
    static int i = 5;
    static int Get()
    {
        Console.WriteLine("GET:" + i);
        return i--;
    } 
```

它表明，它将调用该方法所需的次数，以满足与条件匹配的第一个元素。输出将是：

> 得到：5
> 
> 得到：4
> 
> 得到：3

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T02:40:14.367

如果不检查，我不知道，但希望它每次都能阅读。

但这很容易通过以下版本的代码来解决。

```
byte val = bytereader.readInt();
var item = Core.Collections.Items.FirstOrDefault(itm => itm.UserID == val); 
```

我自己，无论如何我都会自动采用这种方法，只是为了消除任何疑问。形成一个好习惯可能是一个好习惯，因为没有理由为每个项目阅读它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T02:56:00.367

实际上很明显，调用是针对每个项目执行的——`FirstOrDefault()`将委托作为参数。使用 lambda 方法有点模糊了这一事实，但最终该方法只看到一个委托，它可以为每个项目调用以检查谓词。为了仅在某些魔术机制必须理解和重写该方法时才评估右侧，并且（有时可悲）编译器和运行时内部没有真正的魔术。

# mysql - 无法停止 mysql（无法锁定 ./ibdata1，错误：11）

> ID：14227441
> 
> 赞同：7
> 
> 时间：2013-01-09T02:33:35.903
> 
> 标签：mysql

两天以来，我无法使用我的 root 帐户连接到 mysql。我用其他帐户登录没有问题。

我首先以为我的服务器被黑了，有人更改了密码。我试图重置它。为此，我不得不使用 mysqld_safe 并因此停止 mysql，但我没有这样做：

```
> sudo /etc/init.d/mysql stop
Stopping MySQL database server: mysqld failed!

> mysqld stop
InnoDB: Unable to lock ./ibdata1, error: 11
InnoDB: Check that you do not already have another mysqld process
InnoDB: using the same InnoDB data or log files.
130107 13:48:34  InnoDB: Unable to open the first data file
[...]
InnoDB: Error in opening ./ibdata1
130107 13:48:34  InnoDB: Operating system error number 11 in a file operation.
InnoDB: Error number 11 means 'Resource temporarily unavailable'.
InnoDB: Some operating system error numbers are described at
InnoDB: http://dev.mysql.com/doc/refman/5.1/...ror-codes.html
InnoDB: Could not open or create data files.
InnoDB: If you tried to add new data files, and it failed here,
InnoDB: you should now edit innodb_data_file_path in my.cnf back
InnoDB: to what it was, and remove the new ibdata files InnoDB created
InnoDB: in this failed attempt. InnoDB only wrote those files full of
InnoDB: zeros, but did not yet use them in any way. But be careful: do not
InnoDB: remove old data files which contain your precious data!
130107 13:48:34 [ERROR] Plugin 'InnoDB' init function returned error.
130107 13:48:34 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.
mysqld: Too many arguments (first extra is 'stop'). 
```

MySQL 无法读取 ibdata1，所以我检查了它看起来正确的权限：

```
> ls -l /var/lib/mysql/
-rw-rw---- 1 mysql mysql 18874368 Jan  7 12:39 ibdata1
-rw-rw---- 1 mysql mysql  5242880 Jan  7 13:05 ib_logfile0
-rw-rw---- 1 mysql mysql  5242880 Jan  7 13:05 ib_logfile1 
```

我尝试按照[此处的说明](http://cglreport.zhenhua.info/2008/08/mysql-error-unable-to-lock-ibdata1.html)移动和复制文件，但没有成功：

```
> mv /var/lib/mysql/ibdata1 /var/lib/mysql/ibdata1.bak
> cp -a /var/lib/mysql/ibdata1.bak /var/lib/mysql/ibdata1 
```

这是 my.cnf 的一部分

```
user            = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
port            = 3306
basedir         = /usr
datadir         = /var/lib/mysql
tmpdir          = /tmp
LANGUAGE        = /usr/share/mysql/english
skip-external-locking 
```

数据目录是正确的。

同样，当我尝试获取 MySQL 状态时会发生以下情况：

```
# sudo /etc/init.d/mysql status
/usr/bin/mysqladmin: connect to server at 'localhost' failed
error: 'Access denied for user 'debian-sys-maint'@'localhost' (using password: YES)' 
```

[我在此页面](http://mirzmaster.wordpress.com/2009/01/16/mysql-access-denied-for-user-debian-sys-maintlocalhost/)上找到了解决此问题的方法，但是我必须以 root 用户身份登录才能这样做，这是我做不到的。我想这两个问题是联系在一起的。

你们中有人知道如何解决这个问题吗？因为这个，我的工作受阻。

非常感谢您阅读此消息并可能回复它。

祝你今天过得愉快！

# apache2 - 很长的请求没有回复

> ID：14227444
> 
> 赞同：1
> 
> 时间：2013-01-08T17:41:12.213
> 
> 标签：apache2, php, codeigniter

在我使用的应用程序中，我们有一个“从高层导出”功能，可以生成一个 .csv 文件。

有时（取决于我们需要导出的内容）请求需要很长时间（7-10 分钟）。一切正常（据我所知）服务器端，但我客户的浏览器（他尝试过 safari、chrome 和 firefox）没有得到响应。Aka 浏览器只是无限期地停留在那里加载动画（好吧，我们在 45 分钟后放弃了）。

在我的机器上，所有浏览器都运行良好。根据我拥有/放置的日志，一切都按计划进行，任务结束发送输出，但他没有得到回应。

欢迎任何想法，我不知道下一步该往哪里看。

编辑：我按照@ceejayoz 的建议做了，但问题仍然存在，浏览器没有收到响应，即使文件生成正确，它也只是坐在那里等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:43:51.613

我会让导出在服务器端生成，并让面向用户的页面刷新或每 15-30 秒通过 AJAX 检查一次以查看导出是否完成。完成后，将它们重定向到文件。

# php - PHP 会话未保存在会话文件中

> ID：14227446
> 
> 赞同：1
> 
> 时间：2013-01-09T02:34:10.890
> 
> 标签：php, session, session-variables

快速提问

我是 PHP 新手，但无法跨页面保存会话变量。

示例设置代码 step2.php

```
<?php session_start();
include("header.html");
$_SESSION['num'] = $_POST['num'];
?> 
```

示例检索代码 step3.php

```
<?php session_start();
...

...
echo "<br>session num " .  $_SESSION['num'] . " " . session_id();
echo "<br />";
Print_r ($_SESSION); 
```

我已经检查了会话文件夹的权限，看起来很好，我现在已经把它提高到 777。为我的会话存储了一个会话文件，但它是空的。我在 step2.php 中回显 $_SESSION['num'] ，它读起来很好，但好像 $_SESSION 没有任何意义，我猜它被视为局部变量。

step3.php 输出：

```
session num 64881284326c8492bc6ebe73747db934
Array ( ) 
```

我一定错过了一些完全愚蠢的东西。您是否需要完成并编写会话或其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:42:58.093

谢谢大家，是的，使用静态帮助我-我认为会话从帖子中获取了一个数组。由固定

```
$_SESSION['num'] = intval($_POST['num']); 
```

# javascript - sortable 我怎样才能将元素放回之前的位置？

> ID：14227448
> 
> 赞同：1
> 
> 时间：2013-01-09T02:34:27.270
> 
> 标签：javascript, jquery, jquery-ui-sortable

我了解如何获得订单，但我不知道如何在必要时将元素放回之前的位置。

请指教，万分感谢。

```
el.sortable({
    start: function(){   var order = etc //Got current order here//  },

    update: function(){
         //Process and etc//

         if(cancel) {
            //how can I put the element back to the position before??
         }

    },

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:37:17.140

$( ".selector" ).sortable( "cancel") 将起作用（在初始化您的可排序之后，当然，**不在**初始化内部）

```
el.sortable({
    start: function(){   var order = etc //Got current order here//  },

    update: function(){
         //Process and etc//

         if(cancel) { //NO NOT HERE
            //how can I put the element back to the position before??
         }

    },

});

el.sortable("cancel"); //here 
```

见[http://api.jqueryui.com/sortable/#method-cancel](http://api.jqueryui.com/sortable/#method-cancel)

> 取消（）
> 
> 取消当前排序的更改并将其恢复到当前排序开始之前的状态。在停止和接收回调函数中很有用。此方法不接受任何参数。

# opengl-es - cocos2d-x中glTexEnvi函数的使用

> ID：14227450
> 
> 赞同：0
> 
> 时间：2013-01-09T02:34:36.647
> 
> 标签：opengl-es, cocos2d-x

在 cocos2d-x 中，
我想使用 opengl 纹理环境功能。
ex)glTexEnvi 函数是这样的。

```
glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_COMBINE);
glTexEnvi(GL_TEXTURE_ENV, GL_COMBINE_RGB, GL_ADD);
glTexEnvi(GL_TEXTURE_ENV, GL_SRC0_RGB, GL_PREVIOUS);
glTexEnvi(GL_TEXTURE_ENV, GL_SRC1_RGB, GL_TEXTURE); 
```

但是，代码会出错。
而且我在 cocos2d-x api 列表中找不到函数及其参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:33:01.333

将 OpenGLES 添加到您的项目中。例如，`OpenGLES.framework`如果你在 iOS 平台上编码，你应该添加到你的项目中。

# mysql - 如何在 MS azure mysql 中设置“event_scheduler”

> ID：14227454
> 
> 赞同：3
> 
> 时间：2013-01-09T02:35:07.583
> 
> 标签：mysql, azure

我在尝试设置“event_scheduler = on”作为 MS Azure 服务的一部分提供的 MySQL 服务器时遇到问题（我使用的是 3 个月的试用版）

错误消息是“ERROR 1227 (42000): Access denied; you need (at least one) the SUPER privilege(s) for this operation”

有人帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-04-20T17:42:26.390

我知道这已经晚了，但这可以帮助其他正在寻找这个的人。

登录到您的 Azure 门户 > ${your_sql_server} > 单击“服务器参数”选项卡，您应该能够设置所有全局参数，例如“event_scheduler”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T03:52:32.877

我知道这个问题很古老，但这是关于 MS Azure 和这个错误的唯一问题。我已经想通了。这是一个权限问题（显然），为了解决它，您必须联系 MS Azure 并购买他们的支持计划，并且您*可能*会让工程师与您一起工作。

但是，如果您没有支持计划，我唯一能想到的就是使用似乎可以解决问题的 WebJobs。

我最终希望 MySQL 清除所有具有比当前日期更早的“日期”字段的条目。因此，我使用该 SQL 查询创建了一个 PHP 脚本，并使用 WebJobs 设置了一个 cronjob 以每天执行一次该脚本。它对我有用。

# windows-store-apps - Win8 商店应用程序，在 OnNavigatedFrom 方法中做一些检查

> ID：14227458
> 
> 赞同：2
> 
> 时间：2013-01-09T02:35:57.083
> 
> 标签：windows-store-apps, messagedialog

当我单击 NavigateButton(Back) 到主页时，我想做一些检查。1.显示 MessageDialog 显示更新内容“是”或“不是” 2.如果单击是，更新当前页面。如果单击否，则不执行任何操作 3.导航到主页。

我使用下面的代码，但目前它会先回到主页，然后弹出消息对话框。单击消息对话框后，如何让导航到主页的操作发生

```
 protected async override void OnNavigatedFrom(NavigationEventArgs e)
    {

        MessageDialog md = new MessageDialog("Do you want to save");
        md.Commands.Add(new UICommand("Yes", (UICommandInvokedHandler) =>
            {
                Application.Current.Exit();
                //this.UpdateClick();
            }));
        md.Commands.Add(new UICommand("No"));
        var task = md.ShowAsync().AsTask();
        await task;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:31:31.023

OnNavigateFrom 是不可取消的，并且在导航已经发生之后发生。

与其拥有代码，不如将后退按钮重新连接到弹出消息框的单击处理程序？然后，当用户单击按钮时，您执行相应的导航。

```
 private async void OnBackButtonClick(object sender, RoutedEventArgs routedEventArgs)
    {
        MessageDialog md = new MessageDialog("Do you want to save");

        md.Commands.Add(new UICommand("Yes", uiCommandInvokedHandler =>
        {
            // Refresh logic
        }));

        md.Commands.Add(new UICommand("No", uiCommandInvokedHandler =>
        {
            var rootFrame = (Frame)Window.Current.Content;
            rootFrame.Navigate(typeof(MainPage));
        }));

        await md.ShowAsync();
    } 
```

# html - 如何删除空格

> ID：14227460
> 
> 赞同：0
> 
> 时间：2013-01-09T02:36:06.243
> 
> 标签：html, css

我有这个问题，我不能在我的生活中尝试删除这个（li）标签中的空白，下面我已经包含了一个屏幕截图，我想要做的是删除灰色菜单之前的白色栏，以及使整个菜单栏与底部的灰色栏对齐。

**CSS**

```
.menu ul {
 list-style: none;
 padding: 0;
 margin: 0;
}

.menu li {
 float: left;
 margin: 0 0.5em 0 0.5em;
 left: 0px;
 padding: 0;
 list-style: none;
}

.menu li a {
 float: left;
 display: inline-block;
 width: 161.3px;
 text-decoration: none;
 text-align: left;
 font-family: 'MyriadPro', sans-serif;
 font-size: .875em;
 color: #FFF;
 height: 1.2em;
}

#MenuGreyBar li a{
 display: block;
 width: 200px;
 list-style: none;
 left: 0px;
 height: 1.2em;
 float: left;
 margin: 0;
} 
```

**HTML**

```
<div class="menu">
  <div>
    <ul id="MenuGreyBar">                        
      <li style="left: 0px;">
        <a href="#" class="bgGrey">&nbsp;</a>
      </li>
    </ul>
  </div>
  <ul>
    <li>
      <a href="about_us.html" class="bgLightBlue">About Us</a>
    </li>
    <li >
      <a href="Help_Support.html" class="bgMuddyGreen">Help & Support</a>
    </li>
    <li >
      <a href="Law_Info.html" class="bgGreen">Law & Information</a>
    </li>
    <!-- ... There are a few more. -->
  </ul>
</div> 
```

图片：（它没有让我嵌入）
[http://db.tt/tcSr5kGv](http://db.tt/tcSr5kGv)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:51:28.203

如果这是您的问题，我不肯定，但这是我的猜测：

```
.menu li {

  float: left;
  margin: 0 0.5em 0 0.5em; /* We set a left margin for all menu elements here
                              which will cause them to jut over. We want this for
                              most elements*/
  left: 0px;
  padding: 0;
  list-style: none;
}

.menu li a {

   float: left;
   display: inline-block;
   width: 161.3px;
   text-decoration: none;
   text-align: left;
   font-family: 'MyriadPro', sans-serif;
   font-size: .875em;
   color: #FFF;
   height: 1.2em;
}

#MenuGreyBar li a{

  display: block;
  width: 200px;
  list-style: none;
  left: 0px;
  height: 1.2em;
  float: left;
  margin: 0;       /*The first menu item is special and needs no margin, so we try
                     to clear it, however we are clearing the anchor element in the li
                     block, and the margin is applied on the li block itself, so the li
                     block's margin is rendered before the anchor has any say*/
} 
```

所以我们需要做的是清除实际`li`元素上的边距属性，这段代码会做到这一点：

```
#MenuGreyBar li{
 margin: 0;
} 
```

应该这样做，我最好的猜测。

# windows - 我需要一个可以删除目录中所有文件夹的批处理脚本，不包括某些文件夹

> ID：14227462
> 
> 赞同：1
> 
> 时间：2013-01-09T02:36:39.970
> 
> 标签：windows, batch-file

我需要一个只删除某些文件夹的脚本。假设一个目录包含文件夹“Programming, Pictures, Movies, Crap”，假设我只想保留“Programming”和“Crap”文件夹，就像将它们添加为排除项一样。

我不想做的是指定要删除的文件夹，例如：

```
set trashFolder=%userprofile%\Desktop\Test\M…
set trashFolder2=%userprofile%\Desktop\Test\…

rmdir /Q %trashFolder%
rmdir /Q %trashFolder2% <----i dont want this. 
```

假设我知道要保留哪些文件夹，但我不知道该文件夹中有什么，所以我制作了一个脚本，指定要保留哪些文件夹并删除该目录中的其余文件/文件夹。27 分钟前 - 还剩 4 天可以回答。

我非常想要一个文件夹的白名单，我想保持不知道该目录中还有什么。当然，删除除该白名单的文件夹之外的所有其他内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:47:06.493

有很多方法可以做到这一点。这是一种简单的方法。

```
for /d %%F in (*) do if /i "%%F" neq "Programming" if /i "%%F" neq "Crap" rd /q /s "%%F" 
```

如果您有要保存在名为“keep.txt”的白名单文件中的文件夹列表，每行一个文件夹，那么您可以执行以下操作：

```
for /f "eol=: delims=" %%F in ('dir /b /ad^|findstr /vxilg:"keep.txt"') do rd /q /s "%%F" 
```

# c++ - 需要帮助修复奇怪的模板错误

> ID：14227464
> 
> 赞同：1
> 
> 时间：2013-01-09T02:37:02.730
> 
> 标签：c++, templates, inheritance

当我尝试编译我的项目时，我收到一个 C2440 错误，说 C2440`'initializing' : cannot convert from 'vector<component_count>' to 'vector_2D'.`上的 MSDN 文档说`The compiler cannot cast from 'type1' to 'type2'.`我有一个基类，向量：

```
template <unsigned int component_count>
class vector {...} 
```

和一个派生类vector_2D：

```
class vector_2D : public vector<2> 
```

我的基类定义了一个默认和复制构造函数，以及运算符重载。给我错误的代码是：

```
vector_2D character_position = pen_position + vector_2D(offset_x, offset_y); 
```

pen_position 较早创建为

```
vector_2D pen_position(string_position); 
```

我似乎无法修复我的错误。谁能指出出了什么问题和/或如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:46:18.120

```
vector operator + (const vector& a_vector) const 
```

是问题所在。您正在返回一个基础，然后尝试将其分配给派生。

最简单的解决方法是提供重载

```
vector_2D operator + (const vector_2D& a_vector) const 
```

# objective-c - UIGestureRecognizerStateChanged 和 touchesMoved 有什么区别？

> ID：14227465
> 
> 赞同：3
> 
> 时间：2013-01-09T02:37:05.243
> 
> 标签：objective-c, ios, cocoa-touch, uigesturerecognizer

我正在调查`UIView`后拖动。`LongPressGesture`一些代码使用`touchesMoved:`，一些代码检查`UIGestureRecognizerStateChange`。我还是不明白，哪个更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:50:50.117

从[手册](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)：

> 当手势识别器识别出离散手势时，它会将 state 属性设置为 UIGestureRecognizerStateRecognized。如果手势是连续的，它首先将 state 属性设置为 UIGestureRecognizerStateBegan；然后，对于手势位置的每次更改，它将属性设置（或重置）为 UIGestureRecognizerStateChanged。当手势结束时，它将状态设置为 UIGestureRecognizerStateEnded。如果在任何时候手势识别器意识到这个多点触控序列不是它的手势，它就会将它的状态设置为 UIGestureRecognizerStateFailed。

因此，如果用户触摸屏幕总是会生成 touchMoved 事件，并且如果它处于连续手势的中间，也会导致设置 UIGestureRecognizerStateChanged 状态。

# sql - 在 SQLite 中如何实现多对多关系

> ID：14227468
> 
> 赞同：6
> 
> 时间：2013-01-09T02:37:16.483
> 
> 标签：sql, sqlite

我正在创建一个具有多对多关系的 SQLite 数据库我已将其分解为两个一对多关系，并使用以下代码

```
SQLiteManager: CREATE  TABLE "main"."LESSONS" 
(
   "LESSONID" INTEGER PRIMARY KEY  
   NOT NULL , "MODULEID" INTEGER, FOREIGN KEY(MODULEID) REFERENCES MODULES 
   (MODULEID), "STUDENTID" INTEGER, FOREIGN KEY (STUDENITD) REFERENCES STUDENTS
   (STUDENTID)
) 
```

错误：

```
[near ""STUDENTID"": syntax error ]
Exception Name: NS_ERROR_FAILURE
Exception Message: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE)
[mozIStorageConnection.createStatement] 
```

有谁知道我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T09:14:53.040

查看[文档](http://www.sqlite.org/lang_createtable.html)；它会告诉您，如果您在字段定义本身上指定外键，则不应使用关键字`FOREIGN KEY`本身。**此外，正如CL**所指出的，您使用了太多逗号。，即使单独指定约束时，外键名称也不应该在括号中。

此语句执行您想要的操作：

```
CREATE TABLE "LESSONS"
(
    "LESSONID"  INTEGER PRIMARY KEY NOT NULL,
    "MODULEID"  INTEGER REFERENCES MODULES(MODULEID),
    "STUDENTID" INTEGER REFERENCES STUDENTS(STUDENTID)
); 
```

另请注意，如果 MODULEID 是表 MODULES 的主键，那么您本身不必指定它；SQLite 不需要它。话虽如此，我更喜欢这样指定它，因为其他 SQL 引擎确实期望它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T02:39:06.107

您在声明时遇到拼写错误`foreign key`

```
FOREIGN KEY (STUDENITD) 
```

应该

```
FOREIGN KEY (STUDENTID) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T08:54:39.597

你的逗号太多了。列属性不以逗号分隔；仅在表列之间使用它们：

```
CREATE  TABLE "LESSONS" 
(
    "LESSONID"  INTEGER PRIMARY KEY NOT NULL,
    "MODULEID"  INTEGER FOREIGN KEY (MODULEID)  REFERENCES MODULES(MODULEID),
    "STUDENTID" INTEGER FOREIGN KEY (STUDENTID) REFERENCES STUDENTS(STUDENTID)
) 
```

# ios - 为什么 setEditing:animated: 和 insertRowsAtIndexPaths: 会导致这种奇怪的编辑风格动画？

> ID：14227475
> 
> 赞同：7
> 
> 时间：2013-01-09T02:37:56.543
> 
> 标签：ios, uitableview

我有一个`UITableView`我正在切换`setEditing:animated:`的，以允许用户插入和删除行。打开编辑时，我希望将新`insert new item`行添加到表中，然后我希望编辑控件像平常一样进行动画处理。我不希望新`insert new item`行使用淡入淡出之类的东西自行设置动画。我希望它只是出现，然后像任何现有的表数据源行一样滑入。

不过，这是由于我当前的代码而发生的事情（点击查看大图）：

[![](../Images/0026df69f5be96967c6dc2166acb3a9d.png)](https://i.imgur.com/5ZzjR.gif)

顶行做我想要的——它只是滑过，删除图标淡入。当它消失时，删除图标淡出，行再次展开。

第二行是我自己添加到表中的非数据源行。在出现时，它根本没有动画。插入图标和行同时出现并且不会滑入。当它消失时，行很好地扩展，但加号图标会随之滑动。动画是针对整行进行的，而不是针对加号图标然后单独行，就像第一行一样。

这是我的代码的简要介绍，但我认为提供类文件的链接可能会更好。

当按下工具栏上的编辑按钮时，我调用我的`UIViewController`方法`setEditing:animated:`。在这种方法中，我执行以下操作...

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {

    [super setEditing:editing animated:animated];

    // keep the table in the same editing mode
    [_table setEditing:editing animated:animated];

    if (editing) {

        [_table insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:_channels.count inSection:0]] withRowAnimation:UITableViewRowAnimationNone];

    } else {

        [_table deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:_channels.count inSection:0]] withRowAnimation:UITableViewRowAnimationNone];

    }

} 
```

这是插入动画发生的地方。我尝试将整个内容包装在 [_table beginUpdate] 和 endUpdate 中，以及插入行。似乎都没有产生我想要的干净动画。

有什么想法我可能会错过吗？整个代码文件在这里：

[https://github.com/ryancole/pound-client/blob/master/pound-client/controllers/ChannelListViewController.m#L106-L127](https://github.com/ryancole/pound-client/blob/master/pound-client/controllers/ChannelListViewController.m#L106-L127)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:16:21.383

超级调用会滑动“编辑”动画，所以如果你在它后面插入一些东西，它就不会参与其中。您要做的是在该调用之前插入行并在之后删除该行。您还需要使用不同的布尔值来跟踪行。

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {

    _amEditing = editing;

    if (editing) {

        [_table insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:_channels.count inSection:0]] withRowAnimation:UITableViewRowAnimationNone];

    } 

    [super setEditing:editing animated:animated];

    // keep the table in the same editing mode
    [self.view setEditing:editing animated:animated];

    if (!editing)
    {
        [_table deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:_channels.count inSection:0]] withRowAnimation:UITableViewRowAnimationNone];
    }

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _amEditing ? _channels.count + 1 : _channels.count;
} 
```

更新：

倒数第二行的图标仍然有一个奇怪的动画.. 要解决这个问题，您可以添加延迟删除..

```
 if (!editing)
    {
        [self performSelector:@selector(deleteLastRow) withObject:nil afterDelay:0.25];
    }

-(void) deleteLastRow
{
    [self.view deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:_objects.count inSection:0]] withRowAnimation:UITableViewRowAnimationNone];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:54:50.790

正如评论的那样，您必须`[super setEditing:editing animated:animated]`在插入行后调用

```
 - (void)setEditing:(BOOL)editing animated:(BOOL)animated {

    // remove this [super setEditing:editing animated:animated];

    // keep the table in the same editing mode
    [_table setEditing:editing animated:animated];

    if (editing) {

        [_table insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:_channels.count inSection:0]] withRowAnimation:UITableViewRowAnimationNone];

    } else {

        [_table deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:_channels.count inSection:0]] withRowAnimation:UITableViewRowAnimationNone];

    }
  [super setEditing:editing animated:animated]; // add it here

} 
```

# django - Django：使用评级应用程序的 AttributeError

> ID：14227478
> 
> 赞同：0
> 
> 时间：2013-01-09T02:38:16.453
> 
> 标签：django, views, attributeerror

[这在某种程度上是对我之前的问题](https://stackoverflow.com/questions/14211551/django-queryset-object-has-no-attribute)的扩展，但在解决了这个问题之后，我得到了不同的答案`AttributeError`。`'_RatingsDescriptor' object has no attribute 'cumulative_score'`在我看来，这是在尝试做这样的事情时读到 的：

```
def index(request):
    thing_list = Thing.ratings.cumulative_score()
    return render(request, 'index.html', {'thing_list':thing_list}) 
```

我的模型：

```
from ratings.models import Ratings

class Thing(models.Model):
    user = models.ForeignKey(User)
    ...
    ratings = Ratings() 
```

在使用[django-simple-ratings](https://github.com/coleifer/django-simple-ratings)应用程序时。该[链接](https://github.com/coleifer/django-simple-ratings/blob/master/ratings/models.py#206)引用`cumulative_score`了该模块中定义的位置。如何对多个对象使用累积分数？谢谢你的想法！

* * *

编辑：views.py：

```
def index(request):
    thing_list = Thing.objects.all()
    thing_list.ratings.cumulative_score()
    return render(request, 'index.html', {'thing_list':thing_list}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:41:27.710

它是一个实例方法，因此您必须首先从数据库中检索事物。

```
t = Thing.objects.get(xxxx)
t.ratings.cumulative_score() 
```

* * *

# python - BasicAuth 提示不会显示状态 401

> ID：14227480
> 
> 赞同：1
> 
> 时间：2013-01-09T02:38:19.190
> 
> 标签：python, http, http-headers, tornado, basic-authentication

即使我使用 Tornado 发送 401 状态代码，我也没有在 IE/Firefox 中看到密码提示：-

```
import tornado.ioloop
import tornado.web

class UserHandler(tornado.web.RequestHandler):
    def get(self, user_id):
        self.set_header('WWW-Authenticate', 'Basic realm="users"')
        self.send_error(status_code=401)

application = tornado.web.Application([
    (r"/users/(\w+)", UserHandler),
],debug=True)

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

此外，WWW-Authenticate 标头不会显示在响应标头中。当我不发送 401 状态时，它确实显示在标题中，但它仍然不显示密码提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:09:19.063

虽然我不知道为什么，但这很有效。

```
import tornado.ioloop
import tornado.web

class UserHandler(tornado.web.RequestHandler):
    def get(self, user_id):
        self.set_status(401)
        self.set_header('WWW-Authenticate', 'Basic realm=Users')

application = tornado.web.Application([
    (r"/users/(\w+)", UserHandler),
],debug=True)

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T22:36:34.870

您找到的解决方案（使用[`set_status()`](http://www.tornadoweb.org/en/stable/web.html#tornado.web.RequestHandler.set_status)代替`send_error()`）有效，因为[`send_error()`](http://www.tornadoweb.org/en/stable/web.html#tornado.web.RequestHandler.send_error)调用[`clear()`](http://www.tornadoweb.org/en/stable/web.html#tornado.web.RequestHandler.clear)“[r] 设置所有标题和内容”，如[源代码](http://www.tornadoweb.org/en/stable/_modules/tornado/web.html#RequestHandler.send_error)所示。[`write_error()`](http://www.tornadoweb.org/en/stable/web.html#tornado.web.RequestHandler.write_error)然后它会根据状态代码调用以发送新的内容和标头。

如果您可以通过手动（或使用您自己的方法）设置所有内容和标题来处理错误，请不要使用`send_error()`.

我发现你也可以修改`RequestHandler`'s 方法来`send_error()`为你工作而不是反对你。标`WWW-Authenticate`头是任何`401`响应的预期部分，因此如果`send_error(401)`能自动添加它会很好。这可以通过覆盖来完成`write_error()`：

```
class BaseHandler(RequestHandler):
    def write_error(self, status_code, **kwargs):
        if status_code == 401:
            self.add_header(
                'WWW-Authenticate',
                'Basic realm=' + json.dumps(self.realm))  # adds quotes
        super(BaseHandler, self).write_error(status_code, **kwargs)

class UserHandler(BaseHandler):
    realm = 'Users'
    # ... 
```

# jquery - 在具有不同设置的众多对象上调用插件

> ID：14227481
> 
> 赞同：0
> 
> 时间：2013-01-09T02:38:38.433
> 
> 标签：jquery, dynamic, plugins, settings

嘿，我一直在开发一个 jquery 插件，比如fancybox，用于点击时全屏显示图像。

我遇到的问题是我希望能够使用不同的元素多次调用插件并给它们自己定义的设置。

就像下面每个id都有自己的fadeIn时间

-> ("#id1").fadeIn(200);

-> ("#id2").fadeIn(400);

有什么方法可以做到这一点，因为我想让它完美地工作：D

带有图像框示例的设置元素：

```
// Two jQuery Calls with different settings.
$('.smallImage img').imageBox({
    'transition' : 'fadeIn',
    'cursor' : 'pointer',
    'gallery' : 'on'
});

$('.bigImage img').imageBox({
    'transition' : 'fadeIn',
    'cursor' : 'pointer',
    'gallery' : 'off'
});

(function( $ ){
    // Grab plugin settings sent from call - took from jquery developers area.
    $.fn.imageBox = function( method ) {  
        if ( methods[method] ) {
          return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
          return methods.init.apply( this, arguments ); // Sends settings through here.
        } else {
          $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
        }    
    };

    var settings;
    var methods = {
        init : function( options ) { 
            settings = $.extend({
                'transition' : "fadeIn",
                'cursor' : 'pointer',
                'gallery' : 'on'
            }, options);
        }
    }
})( jQuery ); 
```

想法将不胜感激，谢谢。

# c# - 将答案存储在具有唯一 ID 的 sql 表中，并将每个答案存储在列中

> ID：14227482
> 
> 赞同：2
> 
> 时间：2013-01-09T02:38:44.563
> 
> 标签：c#, asp.net, sql, sql-server-2008, tsql

我已经编程一年了，但从那以后我再也没有在任何地方问过问题。我有一个架构问题。我有 78 个问题和答案，这些问题在 html 代码中是静态的，除了问题 40 和 41 之外，所有问题都可以回答为是、否、n/a。我将答案存储在一个表格中，每个表格都有一个列问题。例如，表格答案：

```
userid (unique)
companyid (unique)
q1
q2
q3
...
q100 
```

答案表将只有每个公司的唯一行。如果用户编辑问卷，则该行将被转移到历史表并再次插入新行。如果我使用表格来回答问题或答案，那么对于每个公司，我将有 78 或 100 行带有答案的数据（在这种情况下，答案将来自下拉列表，其中只有是、否和 n/a 作为唯一选项.

我想知道是否有更好的方法来实现这一点，因为我需要实现 3 个不同的 sql 语句（问卷不完整、完整或至少一个答案设置为“否”的问卷），而不是使用语句来识别每个问卷我应该添加一个带有状态的新列并使用后面的代码吗？

我试图尽可能清楚，任何建议都会被欣赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:37:33.287

您需要[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的数据。标准化有多个级别，但通常以[第 3 范式](http://en.wikipedia.org/wiki/Third_normal_form)为目标是一个好主意。这是[关于前 3 个范式的教程](http://phlonx.com/resources/nf3/)。

在您的情况下，您可能不希望问题成为列，因为问题可能具有诸如“问题文本”和“问题类型”之类的属性，并且因为人们可能希望稍后添加和编辑问题。

考虑制作一个问题表，每个问题都是该表中的一条记录。

例如，Answers 可能是另一个表，其中有一个外键指向正在回答的问题，以及一个用于实际答案的列。也可能会有外键返回给用户和公司。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T02:41:35.873

我更喜欢创建一个存储 userid、questionid 和 answerid（或答案本身）的表。这样，您可以轻松地将新问题引入系统，而无需修改表结构。它还应该更容易确定是否有人至少回答了一个问题。

有一些潜在的缺点，只是取决于情况。

# windows-runtime - 如何使用 SurfaceImageSource 创建保留图形？

> ID：14227485
> 
> 赞同：1
> 
> 时间：2013-01-09T02:38:54.163
> 
> 标签：windows-runtime, directx, winrt-xaml

我想创建一个 XAML 应用程序，它会在屏幕的一部分中逐步显示一些图形。我可以有大量的元素，所以我想保留已经绘制的元素，只在它们出现时绘制新的元素。但不幸的是，我无法从 SurfaceImageSource 进入交换链（告诉我是否可能），所以我不能只在每次绘制调用时复制缓冲区。

如何在 SurfaceImageSource 上绘制新元素，同时以高性能方式保留旧元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:49:10.013

我认为交换链是您可以在屏幕上使用的东西，而不是像 SurfaceImageSource 那样使用的表面，所以我认为它根本没有交换链——它只是一个单一的纹理。我没有尝试过，但我假设如果您在渲染调用之间不清除它（使用 ClearRenderTargetView 方法） - 内容应该保持原样。如果您只想重用部分内容 - 您可能应该创建一个单独的纹理和一个渲染目标视图，用于渲染到该纹理，然后以某种方式将该纹理的内容复制到 SurfaceImageSource。我不确定最好的方法是什么 - 也许内存映射纹理并在它们之间进行 memcpy 或将一个作为纹理四边形（两个三角形）渲染到另一个。

# html - 提交按钮的自定义图像未显示

> ID：14227486
> 
> 赞同：0
> 
> 时间：2013-01-09T02:38:59.477
> 
> 标签：html, forms

我正在尝试为我的联系表自定义提交按钮。我似乎错过了什么。我的图片的链接似乎没有显示？有人可以帮助我，并指出我做错了什么或我可能遗漏了什么吗？

这是代码：

```
 <li id="emf-li-post-button" class="left">
<input type="image" style="width: 100px; height: 50px;" scr="http://andreethier.webs.com/Website/submit.png" 
value="submit.png" onmouseover="return true;" /></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:14:02.570

`input type="submit"`如果您想提交表单，您应该使用。

**HTML**

```
<li id="emf-li-post-button" class="left">
  <input type="submit" onmouseover="return true;" value="Text" />
</li> 
```

**CSS**

```
#emf-li-post-button input {
    background: url('http://andreethier.webs.com/Website/submit.png') no-repeat top left;
    height: 50px;
    width: 100px;
    border: none;
    font-size: 0;
    cursor: pointer;
} 
```

jsFiddle：http: [//jsfiddle.net/gabrielweyer/adKwH/](http://jsfiddle.net/gabrielweyer/adKwH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:49:41.813

这应该是正确的代码[jsFiddle](http://jsfiddle.net/jw8ac/)：

```
<li id="emf-li-post-button" class="left" style="list-style: none;">
  <input type="image" style="width: 100px; height: 50px;" src="http://andreethier.webs.com/Website/submit.png" value="submit.png" onmouseover="return true;" />
</li> 
```

# c# - 在 2 个类之间交换变量

> ID：14227489
> 
> 赞同：1
> 
> 时间：2013-01-09T02:39:25.480
> 
> 标签：c#, polymorphism, subclass, superclass, inheritance

每当我在 Sprite 中调用 Draw 方法时，它都不会绘制它，因为 X、Y、Width 和 Height 都是 0。:(

代码：

```
class Sprite   
{
    protected int Y;// { get; set; }
    protected int X;// { get; set; } { get; set; }
    protected int Width;// { get; set; } { get; set; }
    public int Height;// { get; set; } { get; set; }
    protected Image image;// { get; set; } { get; set; }

    public Sprite()
    {

    }

    public void Draw(Graphics drawArea)
    {
        Image sImage = Image.FromFile("alien.jpg");
        drawArea.Clear(Color.White);
        drawArea.DrawImage(sImage, X, Y, Width, Height);
    }
}

class User:Sprite
{
    public User()
    {

    }

    public User(int width, int height, int userWidth, int userHeight)
    {
        Sprite sprite = new Sprite();
        Image UserImage = Image.FromFile("alien.jpg");

        X = width;
        Y = height;
        Width = userWidth;  
        Height = userHeight;
        image = UserImage;
    }
} 
```

ps： sprite.Draw 在另一个类的另一个方法中声明，但一切都应该正常工作。感谢您的帮助，并可能为我节省了数小时的时间：）

缺口

**编辑**

这是提供参数和其他内容的子类。

```
 Alien mAlien;
User mUser;
protected int mLevel;

public gameLogic()
{

}

public gameLogic(int width, int height, int level)
{
  mUser = new User(width / 2, height - 30, 30, 30);
  mAlien = new Alien(width / 2, 5, 30, 30, "alien.jpg", 10 * level);
  mLevel = level;
}

public void drawAll(Graphics drawArea)
{
  Sprite sprite = new Sprite();
  sprite.Draw(drawArea);
} 
```

对于可能发生的所有这些错误，我深表歉意，我是一名新学生 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:44:45.300

试试这个：

```
public User(int width, int height, int userWidth, int userHeight)
{
    Sprite sprite = new Sprite();
    Image UserImage = Image.FromFile("alien.jpg");

    sprite.X = width;
    sprite.Y = height;
    sprite.Width = userWidth;  
    sprite.Height = userHeight;
    sprite.image = UserImage;
} 
```

为了访问精灵的字段，您必须指定`Sprite`要修改的对象。这是通过写变量名后跟`.`

**编辑：**刚刚意识到还有另一个问题-您的`User`类是从该类继承的`Sprite`。根据评论，显然您的用户**是**精灵，因此您永远不想实例化 a `Sprite`，而只使用`User`该类：

```
class User:Sprite
{
    public User(int width, int height, int userWidth, int userHeight)
    {
        Image UserImage = Image.FromFile("alien.jpg");

        X = width;
        Y = height;
        Width = userWidth;  
        Height = userHeight;
        image = UserImage;
    }
} 
```

然后，不要在另一个文件中的 sprite 上调用 draw，而是使用以下命令：

```
User user = new User(x, y, width, height)

...

user.draw(); 
```

这里的关键是确保你正在使用`new User...`而不是`new Sprite`- 即使你正在分配一个`Sprite`变量，例如`Sprite s = new User(...);`。

然后确保你在同一个对象上调用 draw -`user.draw`线。如果你想检查你是否做对了，试着做`Sprite` `abstract`- `abstract class Sprite`- 如果你尝试实例化`Sprite`而不是`User`.

编辑 2：好的，您真正需要做的就是更改您的调用代码：

```
public void drawAll(Graphics drawArea)
{
    mUser.draw(drawArea);
    mAlien.draw(drawArea);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T02:46:14.687

您的类、Sprite 和用户都缺少尾随“}”。其次，您应该在用户的构造函数中调用基本构造函数：

```
public User(int width, int height, int userWidth, int userHeight)
     : base(width, height, userWidth, userHeight, Image.FromFile("alien.jpg"))
{
} 
```

您还需要为接受这些参数的基类创建一个构造函数。

# ios - 当文本长度超过 iOS 中的最大长度时，不会粘贴文本

> ID：14227499
> 
> 赞同：1
> 
> 时间：2013-01-09T02:40:56.477
> 
> 标签：ios, uitextfield

我正在尝试在文本字段中粘贴更长的文本，长度超过定义的最大长度。但是没有粘贴文本。这是 iOS 中的默认行为吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T03:29:55.423

默认行为是（引用文档）：

> 如果应替换指定的文本范围，则为 YES；否则，不保留旧文本。

因此，如您所见，返回`NO`意味着文本不会更改。

# c# - 删除一部分 XML，对其进行编辑，然后在原始位置添加回 xml

> ID：14227501
> 
> 赞同：1
> 
> 时间：2013-01-09T02:41:01.020
> 
> 标签：c#, xml, regex, linq-to-xml, cdata

所以我最终要做的是解析 XML 并将元素值添加到包含在 cdata 部分中的元素。我在 xml 中搜索 cdata 部分，将其拉出并将其加载到另一个 xdocument 中以保留 xml 结构，然后添加元素值，但现在我不确定如何将其添加回原始 xml原来的位置。

这是原始 XML：

```
 <OUTPUT version="2.0"><RESPONSE><DATA state="FL" city="Sarasota">
      <![CDATA[<LION xmlns="http://www.com" version="5.050">
      <COMMENTS>
        <PLACES>   
          Forest under a tree
         </PLACES></COMMENTS></LION>]]>
   </DATA></RESPONSE></OUTPUT> 
```

我搜索 cdata 部分并插入如下元素值：

```
XDocument value = XDocument.Parse(returnValue);
RegexOptions options = RegexOptions.None;
Regex regex = new Regex(@"\<\!\[CDATA\[(?<text>[^\]]*)\]\]\>", options);

bool isMatch = regex.IsMatch(returnValue);
if(isMatch)
{
  Match match = regex.Match(returnValue);                   
  string HTMLtext = match.Groups["text"].Value;
  XDocument cdata = XDocument.Parse(HTMLtext);
  XNamespace ns = @"http://www";
  var com = cdata.Descendants(ns + "COMMENTS").First();
  var dcomm = com.Element(ns + "PLACES");
  dcomm.Value = "test"+ dcomm.Value; 
```

我剩下的是附加回 cdata 文本，因为将正则表达式转换为字符串已删除，然后将其放回原始 xml 中 cdata 的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:18:55.237

您可以测试以查看节点是否为 cdata，而无需使用 NodeType 属性使用正则表达式。在示例中，我们尝试转换为 XCData 进行测试。

```
 XElement root = XElement.Parse(input);
                XElement dataElement = root.Descendants("DATA").FirstOrDefault();
                XCData cdata = dataElement == null ? null : dataElement.FirstNode as XCData;
                if (cdata == null)
                {
                    return;
                }

                XElement nestedXml = XElement.Parse(cdata.Value);
                XNamespace ns = @"http://www.com";
                var com = nestedXml.Descendants(ns + "PLACES").First();

                com.Value = "Incomplete App Email sent to member." + com.Value;

                cdata.Value = nestedXml.ToString(SaveOptions.DisableFormatting);
                string updatedOutput = cdata.ToString(); 
```

# c++ - 如何检查编译器初始化大结构中的所有字段

> ID：14227506
> 
> 赞同：3
> 
> 时间：2013-01-09T02:41:39.020
> 
> 标签：c++, c

我经常使用包含 20 多个字段的大型结构，这些字段需要用不同的值进行初始化。每次写 init 函数的时候，我都心存疑虑，总是担心我错过了一个被赋值的字段。所以我不得不一一检查每个字段。

我讨厌这个，所以我使用 CHECK_VAL 宏，如示例代码。现在如果我在结构初始化中遗漏了一项，编译器会报错：

> “Check”类型的值不能用于初始化“int”类型的实体

我的问题：是否有其他方法可以帮助解决我的问题？语言是 C 和 C++，大结构是 POD 类型。

代码示例

```
#define DOCHECK 1
#if DOCHECK
typedef struct _Check{
    char k;
} Check;
Check g_check = {'c'};
#define CHECK_DEL Check c1234567;
#define CHECK_VAL (g_check)
#else
#define CHECK_DEL
#define CHECK_VAL
#endif

typedef struct _BigStruct{
    int bar;
    int foo;
    /*...*/
    int f99;
    int f100;
    CHECK_DEL;
}BigStruct;

void initBigStruct(BigStruct* p){
    int a,b,c,d;
    a = b = c = d = 0;
    /*
        many other code to caculate the value of a,b,c,d
    */
    {
        BigStruct tmp = {a,b,c,d, CHECK_VAL};
        *p = tmp;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T02:44:25.563

从语言的角度来看，可能不是很多。

但是，GCC 有[`-Wmissing-field-initializers`](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)针对这种情况的标志。我确信其他编译器也提供类似的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T02:44:47.547

如果您在谈论 C++，您可以只为该类编写一个构造函数，使用您想要的任何内容进行初始化。但是，这当然会取消 POD 您的数据并阻止使用`{..}`.

如果是 C，您可以编写一个工厂方法，该方法返回一个已初始化的结构，如 @Pubby 建议的那样。

如果计算变量的数量让您感到困扰，您可以使用命名初始化，就像在[使用标签的 C 结构初始化中一样。它有效，但如何？文档？](https://stackoverflow.com/questions/1601201/c-struct-initialization-using-labels-it-works-but-how-documentation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-05T13:24:37.497

这个问题发布多年后，我在嵌套结构中遇到了同样的问题。我提出了一个超出 POD 结构范围的替代答案。然而，它确实解决了确保分配数据层次结构的所有字段的主要问题。该解决方案使用 std::optional 和 std::tuple 并且可以处理嵌套的数据层次结构。

考虑

```
struct Aggregate2 {
   struct Aggregate1 {
     int DataType1;
     float DataType2;      
   } aggregate1
   size_t DataType3;
 } aggregate2; 
```

并比较

```
using Aggregate1 = std::tuple<std::optional<int>, std::optional<float>>;
using DataType3 = size_t;  
std::tuple<std::optional<Aggregate1>, std::optional<DataType3>> aggregate2; 
```

从技术上讲，这可以存储所需的数据，但获取和设置将不可读，并且分配检查不会轻松自动。

这些问题在这里可以说是通过权衡保持层次结构的类型的定义不如 struct 方式可读性来解决的。下面的代码使用 MSVC 和 gcc 编译。它包含有关如何使用它的详细说明。

```
//struct_alternative.h
#include <tuple>
#include <optional>

// C++17 template variable to determine if type is std::tuple.
template <typename T>
constexpr bool isTuple = false;
template<typename ... Types>
constexpr bool isTuple<std::tuple<Types...>> = true;

// Get last type of std::tuple
template<typename ...T>
using LastEntityType = std::tuple_element_t<sizeof...(T) - 1, std::tuple<T...>>;

// Class that inherits all members of D.
// Constructor parses that data tree and throws if any instance of D has unassigned Data::data.
template<typename D>
class AssignedData: public D {
public:
    explicit AssignedData(D&& d) : D(std::move(d)) {
        if constexpr (isTuple<typename decltype(D::data)::value_type>) {
            std::apply([&](auto&&... args) {((args.throwIfNotAssigned()), ...);}, *d.data);
        } else {
            d.throwIfNotAssigned();
        }
    }
};

//
// Data is a template class with capability of storing a hierarchy (tree-like structure) of tuple data.
// The template argument represents the type of the data that is stored in an std::optional<T> 
// It has a set and get functinality. 
// 
// Use as follows:
//
// Define data classes that inherit from Data.
//
// class DataType1 : public Data<int>{};
// class DataType2 : public Data<float>{};
//
// Construct aggregate data types where the template argumets can be a combination of tuples of previously
// defined data types and new data types.
//
// class DataType3 : public Data<size_t>{};
// class Aggregate1 : public Data<std::tuple<DataType1, DataType2>> 
// class Aggregate2 : public Data<std::tuple::<Aggregate1, DataType3>>{};
//
// Create intsances of the Aggregate data type and assign the members.
//
// Arrgregate2 aggregate2;
// aggregate2.set<Aggregate1, DataType1>(1); // Will assigne the value 1 to DataType1 of aggregate2::Aggregate1\. 
//
// Create an AssignedData object that guarantees that all members are assigned.
//
// auto assigned = AssignedData(std::move(aggregate)); // Will throw when not all data members are assigned.
//
// Get data member through
//
// int dataType1 = assigned.get<DataType4, DataType1>;
//
template <typename T>
class Data {
public:
    Data() {
        if constexpr(isTuple<T>) {
            // Make sure that all tuples are assigned.
            // If not done, Data::data which is of type std::optional<std::tuple<A, B ...>>
            // can get the tuple members (A, B ...) assigned but the std::optional<std::tuple<A, B...>>
            // will not have a value i.e. is an empty std::optional. This becomes a problem when traversing the Data tree.
            data = std::make_optional<T>();
        }
    }

    // Throw if any member of Data::data is not assigned i.e. is an empty optional.
    void throwIfNotAssigned() const {
        if (data.has_value()) {
            if constexpr (isTuple<T>) {
                std::apply([&](auto&&... args) {((args.throwIfNotAssigned()), ...);}, *data);
            }
        } else {
            throw(std::runtime_error("Data::data is not set."));
        }
    }

    // Get value of the data type corresponding to the last element of (First, ...U)
    template <typename First, typename ...U>
    auto get() const {
        if constexpr(isTuple<typename decltype(data)::value_type>) {
            if constexpr (sizeof...(U) > 0) {
                return std::get<First>(*data).template get<U...>();
            } else if (std::get<First>(*data).data.has_value()){
                return std::get<First>(*data).data.value();
            }
        } else if (data.has_value()) {
            return data.value();
        } 
        throw(std::runtime_error("Trying to get a Data::data that is not set."));
    }

    // Set value of the data type corresponding to the last element of (First, ...U)
    template<typename First, typename ...U>
    void set(const typename decltype(LastEntityType<First, U...>::data)::value_type& rhs) {
        if constexpr(isTuple<typename decltype(data)::value_type>) {
            if constexpr (sizeof...(U) > 0) {
                std::get<First>(*data).template set<U...>(rhs);
            } else 
                std::get<First>(*data).data = rhs;
        } else {
            data = rhs;
        }
    }

    std::optional<T> data;
}; 
```

# html - 创建嵌入视频的 youtube 画廊的最佳做法是什么？

> ID：14227511
> 
> 赞同：2
> 
> 时间：2013-01-09T02:42:51.413
> 
> 标签：html, youtube

我很好奇在网站上嵌入 youtube 视频的最佳做法是什么？理想情况下，我希望自动播放默认视频并将其静音，同时将其他视频用作缩略图。

有什么推荐的插件吗？我应该使用 iframe 还是对象？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:08:03.030

您的问题非常广泛：很难知道如何帮助您。例如，如果您使用 WordPress，您将有一些插件来帮助您执行此操作，但除此之外，这取决于您是打算动态生成视频还是手动创建一个包含您选择的主视频和缩略图的页面进步。

如果您打算对页面进行编程，则需要使用[YouTube 数据 API](https://developers.google.com/youtube/)（最好使用第 3 版，它使用 JSON 来降低有效负载大小）。

如果您手动布局页面，请查看 YouTube 视频的观看页面，您可以在那里获取嵌入代码。单击“共享 -> 嵌入”，然后您将看到一个`iframe`标签，您可以从中调整大小参数以满足您的需要。

不过需要注意的一点是：如果您在页面上**自动播放**视频，据我所知，您将失去增加该视频观看次数的机会。因此，如果您想宣传自己的视频并希望每次观看次数都增加，则必须允许用户开始播放视频。

# scheme - 为什么这个方案程序没有按预期工作？

> ID：14227515
> 
> 赞同：1
> 
> 时间：2013-01-09T02:43:09.443
> 
> 标签：scheme, r5rs

```
(define wadd (lambda (i L)
                (if (null? L) 0
                    (+ i (car L)))
                    (set! i (+ i (car L)))
                          (set! L (cdr L))))

(wadd 9 '(1 2 3)) 
```

这不返回任何内容。我期望它会这样做`(3 + (2 + (9 + 1))`，这应该等同于`15`. 我使用`set!`错误的方式吗？我不能`set!`在一个`if`条件内打电话吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:59:56.777

我从您的代码中推断出您打算以某种方式遍历列表，但是在`wadd`迭代列表的过程中没有任何内容 - 没有递归调用，没有循环指令，什么都没有：只是一个误用的条件和几个`set!`只执行一次的 s . 我不会尝试修复问题中的程序，无法修复 - 我宁愿向您展示解决问题的正确方法。你想要一些类似的东西：

```
(define wadd
  (lambda (i L)
    (let loop ((L L)
               (acc i))
      (if (null? L)
          acc
          (loop (cdr L) (+ (car L) acc)))))) 
```

执行时，前面的过程将评估这个表达式：`(wadd 9 '(1 2 3))`就像这样： `(+ 3 (+ 2 (+ 1 9)))`。请注意，正如@Maxwell 所指出的，上述操作可以使用[foldl](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._foldl%29%29)更简洁地表达：

```
(define wadd
  (lambda (i L)
    (foldl + i L))) 
```

作为一般规则，在 Scheme 中，您不会`set!`像在命令式、类 C 语言中那样频繁地使用赋值（指令）——首选函数式编程风格，它严重依赖递归和不使用的操作变异状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T03:44:50.543

我认为如果你修复你的缩进，你的问题会变得更加明显。

该函数`set!`返回`<#void>`（或类似的虚无）。您的 lambda`wadd`执行以下操作：

1.  检查是否`L`为 null，并评估为 0 或`i`+ `(car L)`，然后丢弃结果。
2.  修改`i`并评估为空
3.  修改`L`不返回

如果您将多个语句放在一个 lambda 中，它们会`begin`显式地包装在一个语句中：

```
(lambda () 1 2 3) => (lambda () (begin 1 2 3)) 
```

在`begin`一个序列中多个表达式的语句中，整个表达式的`begin`计算结果为最后一个语句的结果：

```
(begin 1 2 3) => 3 
```

# c# - 使用 json 数据的服务器错误 500

> ID：14227520
> 
> 赞同：0
> 
> 时间：2013-01-09T02:44:03.767
> 
> 标签：c#, wcf

我收到一个错误，我找不到解决方案。

我有一个桌面应用程序 (c#)，它连接到 WCF Web 服务。当我发送一些数据（某个类的 10 项）时，一切正常。但是，当我使用更多数据（可能超过 15 个项目）时，我收到服务器错误 500。为什么会发生这种情况？有大小限制吗？

怎么解决？。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:52:09.090

听起来像是绑定中的大小限制。您的绑定有一个最大尺寸。查看此帖子以获取更多信息：

[您可以发送到 WCF 服务的数据量是否有大小限制？](https://stackoverflow.com/questions/1344463/is-there-a-size-limit-to-the-amount-of-data-you-can-send-to-a-wcf-service)

您还应该查看您的事件日志——可能有一些有用的信息来追踪问题。

# python - 连接一个字符串和一个列表

> ID：14227522
> 
> 赞同：2
> 
> 时间：2013-01-09T02:44:39.603
> 
> 标签：python

> **可能重复：**
> [Python 连接字符串和列表](https://stackoverflow.com/questions/12633024/python-concatenate-string-list)

是否可以连接字符串和列表？

以下代码导致错误：`TypeError: not enough arguments for format string`

```
t = ["a", "b", "c"]
s = "%s.%s.%s" % t 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:45:51.680

如果您将列表转换为这样的元组，这可能会起作用：

```
t = ["a", "b", "c"]
s = "%s.%s.%s" % tuple(t) 
```

但是，python 字符串具有内置方法 .join，因此，如果您的列表增长，您可以像这样处理它：

```
'.'.join(t) 
```

这就是“pythonic 方式”，您还应该避免将 + 运算符与字符串一起使用，始终使用 .join 和格式化字符串。这是因为 Python 字符串（和元组）不是可变对象，所以，当你在做

```
"abc" + "cde" 
```

Python 必须分配新内存来存储新字符串。

我希望这解决了你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:46:20.767

如果我了解您要执行的操作，则该[`str.join`](http://docs.python.org/2/library/stdtypes.html#str.join)方法将是解决方案：

```
'.'.join(t)
>>> "a.b.c" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T02:47:07.367

如果你只是

t[0]+t[1]...+t？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T02:49:51.707

您也可以使用新的字符串格式来做到这一点：

```
t = ["a", "b", "c"]
s = "{}.{}.{}".format(*t) 
```

# sql - 条件 SQL 选择语句

> ID：14227526
> 
> 赞同：1
> 
> 时间：2013-01-09T02:45:03.133
> 
> 标签：sql, sql-server

我在下面有一张桌子。

```
Name          Product
---------------------
Value          2002
HigherLimit    *
HigherLimit    2002
LowerLimit     * 
```

我需要一个 select 语句来返回具有以下条件的 distinct(Name) 。

如果产品是 2002 则返回 '2002' 否则返回 '*'

这是预期的结果

```
Name          Product
---------------------
Value          2002
HigherLimit    2002
LowerLimit     * 
```

任何帮助将不胜感激。

谢谢妮居

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:48:07.150

由于`2002`将评估为大于`*`，您可以简单地使用`MAX()`按 分组的聚合`Name`：

```
SELECT
  Name,
  MAX(Product) AS Product
FROM yourtable
/* WHERE Product IN ('2002', '*') -- if necessary */
GROUP BY Name
ORDER BY Product DESC 
```

[http://sqlfiddle.com/#!2/8da48/2](http://sqlfiddle.com/#!2/8da48/2)

但是，如果您的实际表中的值不仅仅是 `2002`or `*`，并且您想要返回 2002 的值而不是最大的数字，请使用 a`CASE`分隔出您想要的值 (2002) 并将所有其他值返回为`*`。聚合的`MAX()`应用方式相同：

```
SELECT
  Name,
  /* Force *all* values not 2002 to be `*` */
  MAX(CASE WHEN Product = '2002' THEN Product ELSE '*' END) AS Product
FROM yourtable
GROUP BY Name
ORDER BY Product DESC 
```

[http://sqlfiddle.com/#!2/f03af/2](http://sqlfiddle.com/#!2/f03af/2)

# php - 如何在不引用外部 CSS 文件的情况下在 WordPress PHP 文件中创建内联 CSS？

> ID：14227529
> 
> 赞同：7
> 
> 时间：2013-01-09T02:45:31.630
> 
> 标签：php, css, wordpress

我想直接从 Wordpress 插件中加入 CSS 字符串。我不想从外部文件加载它，也不想争论为什么这是写入或错误的事情，我只想知道是否可能。

换句话说，我知道我可以做到这一点：

```
wp_register_style('myStyleSheet', 'my-stylesheet.php');
wp_enqueue_style( 'myStyleSheet'); 
```

但我不想。

我想做的是这样的（伪代码）：

```
$number = get_option('some_width')/2;
$css = " .divbox { width: $number; } ";
wp_register_style('myStyleSheet', $css);
wp_enqueue_style( 'myStyleSheet'); 
```

我阅读了 wp_register_style() 的 wp 法典，似乎不可能。有人有建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T02:52:13.990

那是我的愚蠢。几分钟后我找到了答案。绝望是一种很好的动力！:)

诀窍是不要使用 wp_register_style() 和 wp_enqueue_style()

这是我所做的：

```
function myStyleSheet() {

  global $value;
  $num = $value/2;

  echo '
       <style type="text/css">
            .divbox { width: '.$num.'; }    
       </style>
    ';
}
add_action( 'wp_print_styles', 'myStyleSheet' ); 
```

不过，也许有更好的方法？

# php - 从类中获取枚举样式的值？

> ID：14227530
> 
> 赞同：0
> 
> 时间：2013-01-09T02:45:37.577
> 
> 标签：php, enums

我正在尝试使用接口来替代 PHP 中缺少枚举，但它似乎并没有按照我想要的方式工作。

这是代码：

```
interface Brands
{
    const abrand = "A Brand";
    const anotherbrand = "Another Brand";
}

class Product
{
    private $brand;

    function __construct() {

    }

    public function getBrand() {
        return Brands::$this->brand;
    }
    public function setBrand($value) {
        $this->brand = $value;
    }
}

$product = new Product();
$product->setBrand("aproduct");

echo $product->getBrand(); 
```

有人可以解释为什么输出是`abrand`而不是`A Brand`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:02:37.787

好吧，那太愚蠢了。

我应该做`$product->setBrand(Brands::abrand);`而不是`$product->setBrand("aproduct");`

：/

# html - 每个浏览器都有不同的CSS？

> ID：14227531
> 
> 赞同：12
> 
> 时间：2013-01-09T02:45:41.413
> 
> 标签：html, css

有没有办法为特定浏览器加载不同的 CSS 文件？

像（糟糕的伪代码）：

```
if firefox
<link rel="stylesheet" type="text/css" href="includes/MyCssFirefox.css" />
if chrome
<link rel="stylesheet" type="text/css" href="includes/MyCssChrome.css" />
if Safari
<link rel="stylesheet" type="text/css" href="includes/MyCssSafari.css" /> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-09T02:49:03.217

**您想要的理想解决方案不存在：**

不幸的是，如果您尝试在 HTML 本身上执行此操作，则不存在跨浏览器解决方案。但是，它适用于大多数版本的 IE。像这样：

```
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="includes/myIEGeneralStyle.css" />
<![endif]-->
<!--[if IE 6]>
<link rel="stylesheet" type="text/css" href="includes/myIE6Style.css" />
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="includes/myIE7Style.css" />
<![endif]-->
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="includes/myIE8Style.css" />
<![endif]--> 
```

**所以最好的解决方案：**

像这样的 Javascript 解决方案怎么样：[浏览器检测](http://www.quirksmode.org/js/detect.html)。阅读有关此类的一些信息以更好地阐明，该文件基本上在做的只是这样的概念：

```
var browser = navigator.userAgent.toLowerCase().indexOf('chrome') > -1 ? 'chrome' : 'other'; 
```

显然，它不仅仅是检测浏览器的类型。事实上，它知道版本、操作系统以及您可以在该链接中阅读的更多详细信息。但是，它确实通过将 'chrome' 替换为 'mozilla'、'explorer' 等来检查所有类型的浏览器......

然后添加您的 css 文件，只需跟进条件语句，如下所示：

```
if (BrowserDetect.browser.indexOf("chrome")>-1) {
document.write('<'+'link rel="stylesheet" href="../component/chromeCSSStyles.css" />');
} else if (BrowserDetect.browser.indexOf("mozilla")>-1) {
    document.write('<'+'link rel="stylesheet" href="../component/mozillaStyles.css" />');
} else if (BrowserDetect.browser.indexOf("explorer")>-1) {
    document.write('<'+'link rel="stylesheet" href="../component/explorerStyles.css" />');
} 
```

祝你好运，希望这能帮到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:04:53.663

您可以在服务器端执行此操作。

```
if(Request.UserAgent is chrome){        
    //here output chrome stylesheet
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T02:50:46.277

您可以使用条件注释来定位 IE 浏览器。看看这个：[http](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/) ://css-tricks.com/how-to-create-an-ie-only-stylesheet/ 。要定位 Firefox，您可以查看以下答案：[https](https://stackoverflow.com/a/953491/1941910) ://stackoverflow.com/a/953491/1941910 。但我认为没有必要针对 firefox、chrome 或 safari，它们在应用 CSS 方面都做得很好。

# android - LoaderManager 的竞争条件？

> ID：14227535
> 
> 赞同：3
> 
> 时间：2013-01-09T02:46:00.087
> 
> 标签：android, android-loadermanager, android-cursorloader

我正在使用 LoaderManager 从我的手机加载联系人列表的光标。

我实际上只使用这里给出的示例代码：

[http://developer.android.com/reference/android/app/LoaderManager.html](http://developer.android.com/reference/android/app/LoaderManager.html)

我唯一的改变是，我没有将其用作主屏幕列表视图的适配器，而是将其用作 AutoCompleteTextView 的适配器。我的问题是，当我快速更改文本时，无论是通过疯狂输入，还是按住删除按钮来删除一行中的所有内容，都会导致此错误：

```
01-09 02:36:47.248: E/AndroidRuntime(24231): FATAL EXCEPTION: main
01-09 02:36:47.248: E/AndroidRuntime(24231): android.database.StaleDataException: Attempted to access a cursor after it has been closed.
01-09 02:36:47.248: E/AndroidRuntime(24231):    at android.database.BulkCursorToCursorAdaptor.throwIfCursorIsClosed(BulkCursorToCursorAdaptor.java:64)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at android.database.BulkCursorToCursorAdaptor.getColumnNames(BulkCursorToCursorAdaptor.java:159)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at android.database.AbstractCursor.getColumnIndex(AbstractCursor.java:283)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:308)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at android.database.CursorWrapper.getColumnIndexOrThrow(CursorWrapper.java:78)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at android.widget.CursorAdapter.swapCursor(CursorAdapter.java:338)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at android.widget.CursorAdapter.changeCursor(CursorAdapter.java:309)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at android.widget.CursorFilter.publishResults(CursorFilter.java:67)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:282)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at android.os.Looper.loop(Looper.java:137)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at android.app.ActivityThread.main(ActivityThread.java:5070)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at java.lang.reflect.Method.invokeNative(Native Method)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at java.lang.reflect.Method.invoke(Method.java:511)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
01-09 02:36:47.248: E/AndroidRuntime(24231):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:40:27.217

似乎 CursorAdapter 具有 getFilter() 的基本实现，它在通过 runQueryOnBackgroundThread() 后返回当前光标。这适用于 LoaderManager 的原始 Android 开发人员示例，因为 ListViews 根本不使用过滤器。但是，AutoCompleteTextViews 确实使用了过滤器，所以我实际上是在运行两个试图加载游标的异步线程，并且不是线程安全的。

由于 Filter 已经提供了与 LoaderManager 相同的异步加载功能，我只是取消了 LoaderManager 并通过覆盖 CursorAdapter.runQueryOnBackgroundThread() 来通过 Filter 加载。

# c# - 如何创建半动态字节数组

> ID：14227537
> 
> 赞同：0
> 
> 时间：2013-01-09T02:46:08.080
> 
> 标签：c#

如何在 C# 代码中动态生成字节？

格式如下：

第一个字节是标准88，第二个字节是剩余字节数，最后一个是剩余字节数。

例子：

1 个字节：

```
byte[] bytes = new byte[] { 0x88, 0x01, 0}; 
```

2个字节：

```
byte[] bytes = new byte[] { 0x88, 0x02, 0, 0}; 
```

5 个字节：

```
byte[] bytes = new byte[] { 0x88, 0x05, 0, 0, 0, 0, 0}; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:52:27.767

只是这个：

```
 static byte[] Get(byte num)
    {
        byte[] a = new byte[num + 2];
        a[0] = 0x88;
        a[1] = num;
        return a;
    } 
```

所有其他字节默认初始化为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T02:52:20.560

如果数组中有数据字节，则可以像这样动态创建数组：

```
// data bytes
byte[] data = { 1, 2, 3 };

byte[] buffer = new byte[data.Length + 2];
buffer[0] = 0x88;
buffer[1] = (byte)data.Length;
data.CopyTo(buffer, 2); 
```

如果您以其他方式创建数据字节，则代码的第一部分是相同的，那么只需将数据以与前两个字节相同的方式放入数组的其余部分。例如五个零字节：

```
int len = 5;

byte[] buffer = new byte[len + 2];
buffer[0] = 0x88;
buffer[1] = (byte)len;
for (int i = 0; i < len; i++) {
  buffer[i + 2] = 0;
} 
```

# .net - SignalR Web Sockets IIS8 Server 2012 - “不是 Web 套接字请求”

> ID：14227542
> 
> 赞同：4
> 
> 时间：2013-01-09T02:46:26.490
> 
> 标签：.net, signalr

我有一个在 IIS8/Windows Server 2012 上使用 SignalR(rc1) 的站点。它运行得很好，除了它似乎正在回退到 serverSentEvents 并且我想要 Web 套接字真的很糟糕。

我看到一个带有 200 响应的信号器/协商 GET： {"Url":"/signalr","ConnectionId":"b274f430-7d19-40b8-b448-4ea346042547","KeepAlive":15.0,"DisconnectTimeout":40.0, "TryWebSockets":true,"WebSocketServerUrl":null,"ProtocolVersion":"1.1"}

然后我看到一个带有 500 的信号器/连接 GET 和一个异常“不是网络套接字请求”：

www.xxxxxx.com/signalr/connect?transport=webSockets&connectionId=56dc6212-387c-43b2-8555-6f8787c9cf17&connectionData=%5B%7B%22name%22%3A%22orderhub%22%7D%2C%7B%22name%22%3A %22systemhub%22%7D%5D&tid=6

尝试直接加载链接会给出以下 ysod： ![不是网络套接字请求](../Images/47ea75926f13a8213dbb893c6ae54d0f.png)

然后它开始使用 serverSentEvents！有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:25:42.223

我们的服务器位于负载均衡器后面。负载平衡器仅接受端口 80 上的 HTTP 请求。我已更新负载平衡器以接受端口 80 上的所有类型的 TCP 连接。

**结果：WebSockets 现在可以在我们的网站上运行了！**

# r - R中的基本自定义函数没有定义内部对象

> ID：14227544
> 
> 赞同：0
> 
> 时间：2013-01-09T02:47:01.747
> 
> 标签：r, function, user-defined-functions

我正在尝试创建一个函数来自动化一些基本计算。然而，它似乎没有定义最终的`mat`对象，即使嵌入到函数中的代码在放在它之外时也能完美地工作。显然我正在做一些基本的错误，但我无法弄清楚出了什么问题。

代码是：

```
my_f = function(covs, B, k) { 

  ### empty matrix

  coeff <- paste("b_", covs, sep="")
  se <- paste("se_", covs, sep="")
  mat <- matrix(nrow=B, ncol=2+2*k, dimnames=list(c(), c("sim","N",coeff,se)))
  mat[,"sim"] <- seq(1:B) 

} 

 my_f(covs=list("x1", "x2"), B=50, k=2) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:51:18.663

虽然尚不清楚您希望它返回什么，但我认为您忘记了`return(mat)`函数末尾的行。

正如`myf`当前定义的那样，它将仅返回评估的最后一个事物`m[, "sim"]`，它是一个向量（因此忘记了矩阵的其余部分）。

您还必须将结果分配`my_f`给一个变量（可以是，但*不一定是*，也命名`mat`）。

```
mat <- my_f(covs=list("x1", "x2"), B=50, k=2) 
```

# macos - OSX上的QtRuby在计时器上恢复最小化窗口

> ID：14227546
> 
> 赞同：3
> 
> 时间：2013-01-09T02:47:25.730
> 
> 标签：macos, qt, user-interface, qtruby

我正在使用 OSX 上的 QtRuby 编写时间记录应用程序。重要的是，它定期提醒用户（我的团队）记录他们的时间，最好是进入前台（必要时最小化）。这非常不像 mac，所以我会接受一个弹跳的任务托盘图标。我也不能上班。

无论如何，我已经尝试了以下

```
self.show()
self.showNormal()
self.raise()
self.activateWindow()
self.maximize()
self.setWindowState(Qt::WindowActive)
self.setWindowState(Qt::WindowMaximized)

# Must execute this with GUI thread
msgbox = Qt::MessageBox.new()
msgbox.setText('LOG YOUR TIME!')
msgbox.exec() 
```

一旦最小化或在后台，所有这些命令似乎都被忽略了。尝试弹出消息框时，我解决了“无法为位于不同线程中的父级创建子级”的问题。通过发出信号来出错，但在用户激活窗口之前似乎不会处理事件。

有谁知道如何在 OSX 上使用 QTRuby 甚至 QT 和 C++ 弹出一个最小化窗口？

蒂亚卢克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T03:39:11.477

我使用 Qt 的线程而不是 ruby​​ 线程，现在一切都很可爱。也许与全局解释器锁有关。

我换了

```
Thread.new { loop { every_minute_do_on_diff_thread; sleep 60 } }
connect(self, SIGNAL('every_minute_do_signal()'), self, SLOT('every_minute_do()'))

def every_minute_do_on_diff_thread
  emit(every_minute_do_signal())
end 
```

和

```
timer = Qt::Timer.new(self);
connect(timer, SIGNAL('timeout()'), self, SLOT('every_minute_do()'))
timer.start(60000) 
```

# android - getInstalledApplications() 与 asynctask

> ID：14227552
> 
> 赞同：3
> 
> 时间：2013-01-09T02:48:08.650
> 
> 标签：android, android-asynctask

我正在获取已安装的非系统应用程序列表以显示给用户，我正在使用它来执行此操作：

```
 private class getApplications extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
        // perform long running operation operation

        for (i = 0; i < list.size(); i++) {

            if ((list.get(i).flags & ApplicationInfo.FLAG_SYSTEM) != 1) {

                label = (String) pm.getApplicationLabel(list.get(i));

                Log.w("Installed Applications", list.get(i).packageName.toString());

            }
        }

        return label;
    }

    @Override
    protected void onPostExecute(String result) {

        txtApplications.append(label);

        if (i!=list.size()-1) {

             txtApplications.append(", ");

           }
    }

    @Override
    protected void onPreExecute() {

        pm = getPackageManager();

        list = pm.getInstalledApplications(PackageManager.GET_META_DATA);

    }

}; 
```

只要它在主 UI 上就可以正常工作，但它会导致应用程序在加载时滞后。我已经阅读了这三个问题： [AsyncTask 和 getInstalledPackages() 失败](https://stackoverflow.com/questions/8079832/asynctask-and-getinstalledpackages-fail)，[PackageManager.getInstalledPackages() 返回空列表](https://stackoverflow.com/questions/3455781/packagemanager-getinstalledpackages-returns-empty-list)，[Android 中 UI 线程操作期间显示 ProgressDialog](https://stackoverflow.com/questions/8121501/showing-progressdialog-during-ui-thread-operation-in-android?lq=1)我想明白他们在说什么，但我在理解如何让它发挥作用时遇到了问题。我知道延迟来自 List list = pm.getInstalledApplications(PackageManager.GET_META_DATA); 我知道 getInstalledApplications(PackageManager.GET_META_DATA); 必须在主 UI 上运行，否则应用程序强制关闭。我该如何保持 getInstalledApplications(PackageManager.GET_META_DATA); 它需要在哪里，但在后台填充列表，这样应用程序就不会被冻结？预先感谢您的任何帮助。

更新代码以显示 Asynctask。我让代码在异步中运行，但现在它只在文本视图中显示一个结果而不是列表。我知道它必须是一些我缺少的简单的东西才能让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:40:58.040

我会修改你的`doInBackground()`，所以它看起来像这样：

```
@Override
protected String doInBackground(String... params) {
    // perform long running operation operation

    for (i = 0; i < list.size(); i++) {

        if ((list.get(i).flags & ApplicationInfo.FLAG_SYSTEM) != 1) {

            //add all the application names to the same String.
            label +=", " + (String) pm.getApplicationLabel(list.get(i));

            Log.w("Installed Applications", list.get(i).packageName.toString());

        }
    }

    return label;
} 
```

所以，我想说你的`onPostExecute()`需要看起来就像：

```
 @Override
    protected void onPostExecute(String result) {

        txtApplications.append(label);

           }
    } 
```

从现在开始，`label`包含所有应用程序名称（因为`label += ...`）；

# symfony - Symfony2 Sonata-project 管理包 - 如何列出自定义数据而不是 orm 实体

> ID：14227553
> 
> 赞同：1
> 
> 时间：2013-01-09T02:48:23.173
> 
> 标签：symfony, symfony-sonata, sonata-admin

Sonata Admin Bundle 提供 CRUD、过滤、排序、分页等功能。

我需要显示从几个表中查询的一些定制和处理的数据作为管理面板页面。将此类数据与分页、过滤和排序集成的最佳方式是什么？我的意思是......我想将 Doctrine Entity 切换到自定义模型类，并且仍然得到所有的东西（不包括创建/更新/删除操作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:33:03.963

分页、过滤和排序都依赖于特定于模型的实现。您需要使用自己的 ModelManager 创建一个新的捆绑包，实现 ModelManagerInterface 以及 Pager、FieldDescription 和许多其他类，这些类仅作为接口和抽象类存在于 SonataAdminBundle 中。

# objective-c - 没有可见的@interface

> ID：14227554
> 
> 赞同：0
> 
> 时间：2013-01-09T02:48:29.223
> 
> 标签：objective-c

下面的代码给我一个错误“银行帐户没有可见的@interface声明选择器getAccountNumber”为什么？请帮忙

```
// BankAccount.h  
#import <Foundation/Foundation.h>  
@interface BankAccount: NSObject  
@property long accountNumber;  
@end  

// BankAccount.m  
#import "BankAccount.h"  
@implementation BankAccount  
@end

//main.m  
#import <Foundation/Foundation.h>  
#import "BankAccount.h"  
int main (int argc, const char * argv[])  {  
    BankAccount *account1 = [[BankAccount alloc] init];  
    [account1 setAccountNumber: 34543212];  
    NSLog(@" Account No = %li",  [account1 getAccountNumber]);  
    return 0;  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:52:36.597

生成的吸气剂是`accountNumber`，不是`getAccountNumber`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T02:50:52.007

更改`[account1 getAccountNumber]`为`[account1 accountNumber]`。

# ruby-on-rails - 如何使用 Anemone 仅“抓取”根 URL？

> ID：14227555
> 
> 赞同：3
> 
> 时间：2013-01-09T02:48:34.503
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在下面的示例中，我希望 anemone 仅在根 URL (example.com) 上执行。我不确定我是否应该应用 on_page_like 方法，如果是，我需要什么模式。

```
 require 'anemone'
    Anemone.crawl("http://www.example.com/") do |anemone|
      anemone.on_pages_like(???) do |page|
        # some code to execute
      end
    end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T03:28:40.470

```
require 'anemone'
Anemone.crawl("http://www.example.com/", :depth_limit => 1) do |anemone|
  # some code to execute
end 
```

您还可以在选项哈希中指定以下内容，以下是默认值：

```
# run 4 Tentacle threads to fetch pages
:threads => 4,
# disable verbose output
:verbose => false,
# don't throw away the page response body after scanning it for links
:discard_page_bodies => false,
# identify self as Anemone/VERSION
:user_agent => "Anemone/#{Anemone::VERSION}",
# no delay between requests
:delay => 0,
# don't obey the robots exclusion protocol
:obey_robots_txt => false,
# by default, don't limit the depth of the crawl
:depth_limit => false,
# number of times HTTP redirects will be followed
:redirect_limit => 5,
# storage engine defaults to Hash in +process_options+ if none specified
:storage => nil,
# Hash of cookie name => value to send with HTTP requests
:cookies => nil,
# accept cookies from the server and send them back?
:accept_cookies => false,
# skip any link with a query string? e.g. http://foo.com/?u=user
:skip_query_strings => false,
# proxy server hostname
:proxy_host => nil,
# proxy server port number
:proxy_port => false,
# HTTP read timeout in seconds
:read_timeout => nil 
```

我个人的经验是，Anemone 的速度不是很快，而且有很多极端情况。缺少文档（正如您所经历的那样），并且作者似乎没有维护该项目。YMMV。我很快尝试了[Nutch](http://nutch.apache.org/)，但没有玩太多，但它似乎更快。没有基准，对不起。

# javascript - Ext.js：如何在面板的标题中添加搜索栏？

> ID：14227556
> 
> 赞同：1
> 
> 时间：2013-01-09T02:48:40.347
> 
> 标签：javascript, extjs

在 Ext.js 中，如何将搜索栏添加到面板的标题中？有一个 ext.panel.tool 类，但它们都不是搜索栏。只有一个“搜索”按钮，我需要在面板的标题中添加一个文本输入字段和一个搜索按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:18:02.030

尝试这个 -

```
 Ext.onReady(function() {

    Ext.define('Ext.ux.form.SearchField', {
        extend: 'Ext.form.field.Trigger',    
        alias: 'widget.searchfield',    
        trigger1Cls: Ext.baseCSSPrefix + 'form-search-trigger',          
        initComponent: function(){
            this.callParent(arguments);
        },      
        afterRender: function(){
            this.callParent();          
        }
    });

   Ext.create('Ext.panel.Panel', {
    title: 'Hello',
    width: 700,   
    renderTo: Ext.getBody(),
    tools: [ {
        xtype: 'searchfield'
     }]
   });

}); 
```

[请在此处](http://dev.sencha.com/deploy/ext-4.0.2a/examples/ux/form/SearchField.js)找到有关`searchField`源代码的更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-21T07:54:28.187

如果您想在面板中使用图标，则必须使用 type config 否则您可以使用搜索字段组件，它基本上是带有搜索栏样式的文本字段组件。

```
Ext.create('Ext.panel.Panel', {
title: 'Search',
renderTo: Ext.getBody(),
tools: [{
        xtype: 'searchfield'
    }, {
        type: 'search'
    }
]
}); 
```

# java - 如何让我的java程序在后台运行？

> ID：14227560
> 
> 赞同：-5
> 
> 时间：2013-01-09T02:49:06.480
> 
> 标签：java, windows, swing, jframe

我希望将程序编码为在后台运行，并在托盘中有一个图标。我该怎么做呢？操作系统是 Windows，程序是 JFrame。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:11:17.100

看，这里没有窗户，只有我们泰迪熊……

![在此处输入图像描述](../Images/fd92591dddb4eece204ac3af2d501c0b.png)

```
public class TestTrayIcon01 {

    public static void main(String[] args) {
        new TestTrayIcon01();
    }

    public TestTrayIcon01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    TrayIcon icon = new TrayIcon(ImageIO.read(getClass().getResource("/SmallTeddy.png")));
                    SystemTray tray = SystemTray.getSystemTray();
                    tray.add(icon);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
                JDialog dialog = new JDialog();
                dialog.setSize(100, 100);
                dialog.setVisible(true);
            }
        });
    }

} 
```

`JDialog`并且`JWindow`（在 Windows 下）不会在任务栏上显示“图标”。我很确定在 Mac 下几乎不可能没有停靠图标...

# python - 在python中的嵌套json字典中查找一个值

> ID：14227561
> 
> 赞同：13
> 
> 时间：2013-01-09T02:49:23.353
> 
> 标签：python, dictionary, python-2.7, nested

从以下 json 中，在 python 中，我想提取值“TEXT”。除了未知之外，所有的键都是不变的。Unknown 可以是任何字符串，例如“a6784t66”或“hobvp*nfe”。**unknown 的值是未知的**，只是它会在每个 json 响应中的那个位置。

```
{
  "A": {
    "B": {
      "unknown": {
        "1": "F",
        "maindata": [
          {
            "Info": "TEXT"
          }
        ]
      }
    }
  }
} 
```

一行json

```
'{"A":{"B":{"unknown":{"1":"F","maindata":[{"Info":"TEXT"}]}}}}' 
```

你将如何获得“文本”的价值？（我知道如何使用 json.loads 加载 json）..但我不确定如何获取“Text”的值。谢谢。

（我不确定最好的标题是什么。）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-09T02:57:09.433

它有点长，但在上面的例子中：

```
In [1]: import json

In [2]: s = """\
   ...: {
   ...:   "A": {
   ...:     "B": {
   ...:       "unknown": {
   ...:         "1": "F",
   ...:         "maindata": [
   ...:           {
   ...:             "Info": "TEXT"
   ...:           }
   ...:         ]
   ...:       }
   ...:     }
   ...:   }
   ...: }"""

In [3]: data = json.loads(s)

In [4]: data['A']['B']['unknown']['maindata'][0]['Info']
Out[4]: u'TEXT' 
```

您基本上将其视为字典，传递键以获取每个嵌套字典的值。唯一不同的部分是当您点击时`maindata`，结果值是一个列表。为了处理这个问题，我们拉出第一个元素`[0]`，然后访问`Info`键以获取值`TEXT`。

在`unknown`更改的情况下，您可以将其替换为一个变量，该变量代表它将在您的代码中使用的“已知”名称：

```
my_variable = 'some_name'
data['A']['B'][my_variable]['maindata'][0]['Info'] 
```

如果我第一次真正正确地阅读了您的问题，如果您`unknown`在任何时候都不知道是什么，您可以执行以下操作：

```
data['A']['B'].values()[0]['maindata'][0]['Info'] 
```

其中`values()`是一个变量，其中包含：

```
[{u'1': u'F', u'maindata': [{u'Info': u'TEXT'}]}] 
```

可以访问的单项列表，`[0]`然后您可以按上述方式进行操作。请注意，这取决于该词典中只有一个项目 - 如果有更多项目，您需要进行一些调整。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-06T14:34:30.810

您可以使用递归函数来挖掘每一层并使用缩进打印其值

```
def recurse_keys(df, indent = '  '):
    ''' 
    import json, requests, pandas
    r = requests.post(...)  
    rj = r.json() # json decode results query
    j = json.dumps(rj, sort_keys=True,indent=2)            
    df1 = pandas.read_json(j)         
    '''
    for key in df.keys():
        print(indent+str(key))
        if isinstance(df[key], dict):
            recurse_keys(df[key], indent+'   ')
recurse_keys(df1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T03:26:58.357

正如您所说，未知在一个固定的地方您可以执行以下操作

```
import json
s=json.loads('{"A":{"B":{"unknown":{"1":"F","maindata":[{"Info":"TEXT"}]}}}}')
i=s["A"]["B"].keys()
x=i[0]   # Will store 'unknown' in x, whatever unknown is
print s['A']['B'][x]['maindata'][0]['Info']    #here x dictionary index is used after B as its value will be the value for unknown 
```

这应该可以完成这项工作，因为只有未知的密钥才是真正的“未知”

# matlab - 错误：调用期间未分配输出参数

> ID：14227564
> 
> 赞同：3
> 
> 时间：2013-01-09T02:49:29.723
> 
> 标签：matlab

这是我的 k-最近邻算法代码：

```
function [preds, distances, indices] = knnfull(HandTrain,HandTest)
    nn_value = 10; % how many nearest      
    inputs = HandTrain(:,2:end);
    Y = HandTrain(:,1); 
    [preds, distances, indices] = knn_alg(inputs, y, HandTest, nn_value);
end

function [preds, D, I] = knn_alg(train_inputs, train_y, test_inputs, nn_value)
    num_train_inputs = size(train_inputs,2);
    num_train_examples = size(train_inputs,1)
    num_test_inputs = size(test_inputs,2);
    num_test_examples = size(test_inputs,1)
    preds = zeros(size(test_inputs,1),1);
    [D,I] = pdist2(train_inputs,test_inputs,'euclidean','Smallest',nn_value);
    preds = mode(train_y(I'),2);
end 
```

如果你问为什么我有两个独立的函数，这是一个很好的问题。但无论如何，我得到了错误：

> `Error in knnkaggle>knn_alg (line 16)
> num_train_inputs = size(train_inputs,2);
> 
> Output argument "indices" (and maybe others) not assigned during call to
> "C:...knn_alg".
> 
> Error in knnkaggle (line 10)
> [preds, distances, indices] = knn_alg(inputs, y, HandTest, nn_value);`

想不通问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:51:08.060

这意味着您的函数中存在可能的路径，它们根本没有为输出参数分配任何值。

# vb6 - 找不到可安装的 ISAM

> ID：14227566
> 
> 赞同：2
> 
> 时间：2013-01-09T02:49:48.473
> 
> 标签：vb6

> **可能重复：**
> [VB6 - XP 上的 foxpro 2.6 no isam 错误](https://stackoverflow.com/questions/6904001/vb6-a-foxpro-2-6-no-isam-error-on-xp)

我在 Windows 7 上的 VB6 上运行以下代码。但它提示错误`Cannot find installable ISAM`。你知道怎么解决吗？

```
Set dbMaster = OpenDatabase(App.Path, False, False, "FoxPro 2.6") 
```

# java - 防止游戏对象离开 Java 中的图形窗口

> ID：14227568
> 
> 赞同：2
> 
> 时间：2013-01-09T02:49:55.847
> 
> 标签：java, graphics, collision-detection

我正在用 Java 构建一个游戏，其中涉及用户控制一艘船。问题是，我不希望用户的船从两侧离开屏幕，同时又不让船以紧张的方式移动。

这是我的代码：

```
/* stop the ship if its goes far from the left side 
 * of the graphics window but allow control of
 * the ship if the ship_dx is above 0
 * this applies to the right side of the graphics
 * window
 */

if(ship_dx < 0) {
    // stop the ship 
    ship_velocity = 0;
    ship_dx = 0;
}
else if (ship_dx > 530 ) {
    ship_velocity = 0;
    ship_dx = 530;
} else {
    ship_velocity = 5;
} 
```

船不会离开屏幕，但如果我强迫船移动到图形窗口之外，船看起来很紧张，因为我将常量硬编码到我的 ship_dx 中。

# sql-server - 你如何检查一列是否是整数 ssis 派生列转换表达式？

> ID：14227569
> 
> 赞同：2
> 
> 时间：2013-01-09T02:49:55.873
> 
> 标签：sql-server, ssis

嗨，我正在使用 dtsx 包做一个对 SQL Server 商业智能开发工作室非常新的小项目，任何帮助都会很棒。

我有一个列名为 Number 的 Excel 文件，其中包含 int 值

我正在使用派生列转换

任何方式我都可以使用表达式来检查值是否为 int？

如果不是某种整数发送错误

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:41:16.600

在 C# 中我们没有 IsNumeric(VB.Net) 但我们可以使用 TryParse 来实现相同的功能

```
public override void Input0_ProcessInputRow(Input0Buffer Row)
{

    int result;
    if (int.TryParse(Row.Column.ToString(), out result))
    {
        Row.IsNumeric = 1;
    }
    else
    {
        Row.IsNumeric = 0;
    }

} 
```

vb.Net 中的相同代码是

```
 If IsNumeric(Row.Column) Then 
 Row.IsNumeric=1          // Create a `IsNumeric`  output column in script   transformation of data type int
 Else
 Row.IsNumeric=0
 End If 
```

`Derived Column Transformation`使用表达式甚至可以实现上述功能

```
ISNULL((DT_I4)(Column) == (DT_I4)(Column) ? 1 : 0) ? 0 : 1 
```

检查我以前在 SO 中的[答案](https://stackoverflow.com/questions/14228277/how-do-i-check-if-a-value-is-numeric-in-script-component-in-ssis-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:12:16.477

SSIS 表达式语言没有 IsNumeric() 函数，因此派生列组件不能用于执行相同操作。您将不得不改用脚本组件。脚本组件中的以下代码将实现相同的目的。

```
Imports System.Math
Imports Microsoft.SqlServer.Dts.Pipeline.Wrapper
Imports Microsoft.SqlServer.Dts.Runtime.Wrapper

Public Class ScriptMain
   Inherits UserComponent

   Public Overrides Sub Input0_ProcessInputRow(ByVal Row As Input0Buffer)
        Dim retNum As Double
        'use TryParse to test if the value is numeric or not

        If System.Double.TryParse(Row.Column, retNum) Then
            Row.DirectRowToNumeric()
        Else
            Row.DirectRowToNonNumeric()
        End If
    End Sub
End Class 
```

希望这可以帮助

拉吉

# spring - 休眠临时数据存储

> ID：14227572
> 
> 赞同：1
> 
> 时间：2013-01-09T02:50:34.780
> 
> 标签：spring, hibernate

我对 spring-hibernate DAO 进行单元测试...配置使用

`@ContextConfiguration( locations = { "classpath:test-applicationContext.xml" })`

但它看起来像是在与实际数据库进行交易。如何在不使用实际数据库的情况下使用临时数据存储

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:21:37.113

在单独的文件中定义您的数据存储，并将该 xml 文件包含在您的邮件应用程序 xml 中。测试时，包含一个单独的 xml 文件来保存指向另一个数据库（如 hsql）的数据存储。然后这将是您的主 applicationContext.xml 引用的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:57:57.647

谢谢伙计们，我使用了 H2 并让它工作：

```
<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.h2.Driver" />
    <property name="url"
        value="jdbc:h2:mem:processdb;INIT=RUNSCRIPT FROM 'classpath:create.sql'" />
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>
    <property name="configurationClass">
        <value>org.hibernate.cfg.AnnotationConfiguration</value>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.H2Dialect</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>

<tx:annotation-driven />

<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>
<bean id="stateDAO" class="com.tutorial.jquery.dao.impl.StateDAOImpl"></bean>
<bean id="stateService" class="com.tutorial.jquery.service.impl.StateServiceImpl"></bean> 
```

# android - 在 Web 视图外部单击时阻止 WebView 关闭

> ID：14227576
> 
> 赞同：2
> 
> 时间：2013-01-09T02:50:52.140
> 
> 标签：android, webview

在我的应用程序中，我加载了一个 WebView，用户在其中输入用户名/密码，如果用户不小心点击了 webview 之外，我不希望 webview 关闭，因为页面将不得不进行另一个网络调用来加载这个 webview。

我知道这可以为 Dialog 完成（就像这样`dialog.setCanceledOnTouchOutside(true);`：）但找不到类似的 webview 机制。

谢谢！

这是代码：

```
@SuppressLint("SetJavaScriptEnabled")
public class LoginDialogFragment extends DialogFragment {

private static final String TAG = LoginDialogFragment.class.getSimpleName();

View mainView = null;
WebView webView = null;
OnLoginSucceeded loginSucceeded = null;

ProgressBar progressBar = null;

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    mainView = inflater.inflate(R.layout.webview, container, false);

    if (getDialog() != null)
        getDialog().setTitle(getString(R.string.login));

    webView = (WebView) mainView.findViewById(R.id.webview);

    //display the progress bar
    progressBar = (ProgressBar) mainView.findViewById(R.id.user_profile_loading_progress);
    progressBar.setVisibility(View.VISIBLE);

    //turn caching off
    webView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setPluginsEnabled(true);

    webView.setWebChromeClient(new WebChromeClient() {
    });

    webView.setWebViewClient(new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            Log.i(TAG, "URL received in onCreateView's onPageStarted is: " + url);
            new HandleRequest().execute(url);
        }

        @Override
        public void onPageFinished(WebView view, String url) {
        }
    });

    new FetchLoginFormTask().execute();

    return mainView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:39:05.760

[我在这里找到了我的答案](https://stackoverflow.com/questions/8404140/how-to-dismiss-a-dialogfragment-when-pressing-outside-the-dialog)，我只是`getDialog().setCanceledOnTouchOutside(false);`确保当点击返回键时，webview 被关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:50:59.730

尝试覆盖该方法：

```
 @Override
public void setCancelable(boolean cancelable) {

    super.setCancelable(false);
} 
```

如果您的问题没有得到解决，那么请输入一些代码，以便我可以帮助您。

随时发表评论。

# ios - NSDateFormatter 麻烦？

> ID：14227585
> 
> 赞同：2
> 
> 时间：2013-01-09T02:51:39.997
> 
> 标签：ios, xcode, nsdate, nsdateformatter, utc

我正在尝试解析 RSS 提要，但日期很难解析。日期字符串是：`publishedDate = "2013-01-08T20:09:02.000Z"`

这是我的代码：

```
NSDateFormatter *utc = [[NSDateFormatter alloc] init];
[utc setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
[utc setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
NSDate *dtUTC = [utc dateFromString: publishedDate];

NSDateFormatter *dfLocal = [[NSDateFormatter alloc] init];
[dfLocal setDateFormat:@"yyyy-MM-dd"];
[dfLocal setTimeZone:[NSTimeZone localTimeZone]];

NSString *time =[dfLocal stringFromDate:dtUTC];
NSLog(@"original UTC %@  now local: %@", dtUTC, time); 
```

为什么`date`返回零？另外，我正在尝试将 UTC 时间转换为 CST 时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:57:22.620

采用

```
 [utc setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.'000Z'"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:03:26.137

对于包括毫秒的时间，请使用“S”。

```
[utc setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'.'SSS'Z'"];

NSString *publishedDate = @"2013-01-08T20:09:02.000Z";
NSDateFormatter *utc = [[NSDateFormatter alloc] init];
[utc setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
[utc setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'.'SSS'Z'"];
NSDate *dtUTC = [utc dateFromString: publishedDate];
NSLog(@"dtUTC: %@", dtUTC); 
```

NSLog 输出：
dtUTC：2013-01-08 20:09:02 +0000

```
SDateFormatter *dfLocal = [[NSDateFormatter alloc] init];
[dfLocal setDateFormat:@"yyyy-MM-dd"];
[dfLocal setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];

NSString *time =[dfLocal stringFromDate:dtUTC];
NSLog(@"original UTC %@  now local: %@", dtUTC, time); 
```

NSLog 输出：
原始 UTC 2013-02-08 20:09:02 +0000 现在本地：2013-02-08

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T03:09:08.793

只需将您的时区名称更改为 CST 并将 setDateFormat 更改如下：

```
NSDateFormatter *cst = [[NSDateFormatter alloc] init];
    [cst setTimeZone:[NSTimeZone timeZoneWithName:@"CST"]];
    [cst setDateFormat:@"yyyy-mm-dd'T'HH:mm:ss.'000Z'"];
    NSDate *theCST = [cst dateFromString:publishedDate];
    NSLog(@"theCST is %@", theCST); 
```

# javascript - 在脚本中设置 src 时未加载视频

> ID：14227586
> 
> 赞同：1
> 
> 时间：2013-01-09T02:51:48.970
> 
> 标签：javascript, html, video

我刚刚从 HTML5 Canvas 一书中复制了一些示例，该示例在 javascript 中加载视频并在 Canvas 上显示该视频；

基本代码如下：

```
videoElement = document.createElement("video");
videoDiv = document.createElement("div");
document.body.appendChild(videoDiv);
videoDiv.appendChild(videoElement);

videoElement.setAttribute("src", "url to the video");
videoElement.addEventListener("canplaythrough", videoLoaded, false); 
```

假设加载视频时应该调用videoLoaded，但事实并非如此；

我在firebug中检查了它，它显示浏览器只是不断加载视频，但没有获取任何内容；

我只是将 Firefox 从 v17 升级到 v18。

它在 V17 中工作。

有人能帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:05:16.867

尝试在没有“setAttribute”功能的情况下设置源。您还需要启用控件才能使大多数浏览器实际运行。

代替：

```
videoElement.setAttribute("src", "url to the video"); 
```

和：

```
videoElement.src = 'http://static.bouncingminds.com/ads/5secs/baileys_5sec.mp4';
videoElement.width = 320;
videoElement.height = 240;
videoElement.controls = true; 
```

您可以将[其他选项](http://www.w3schools.com/tags/tag_video.asp)应用于视频标签，我建议考虑的其中一个选项是“预加载”

使用上述代码可在 Chrome 上运行...我还建议不要依赖 HTML5，因为并非所有浏览器都支持。有一些不错的备用选项，例如[VideoJS](http://videojs.com/)和[JWPlayer](http://www.longtailvideo.com/jw-player/)，它们将播放浏览器支持的内容，而不是强制使用 HTML5 或 Flash

***编辑**：我刚刚注意到“FireFox”——用其他东西替换 .mp4 视频，FF 不能很好地与 mp4 一起播放*

# sencha-touch - Sencha Touch 2.0 中使用拖动事件移动滚动条

> ID：14227595
> 
> 赞同：1
> 
> 时间：2013-01-09T02:52:47.797
> 
> 标签：sencha-touch, sencha-touch-2

我有一个已部署到 iOS 和 Android 商店的应用程序。现在我正在采用同样的方法并构建一个也适用于 Chrome/Safari 桌面的版本。为此，我使用了此线程中的代码

[http://www.sencha.com/forum/showthread.php?110792-Add-support-for-mouse-scrolling-(for-development)&p=927483#post927483](http://www.sencha.com/forum/showthread.php?110792-Add-support-for-mouse-scrolling-(for-development)&p=927483#post927483)

修复滚动，现在需要弄清楚如何修复滚动条以支持拖放。关于如何实现这一点的任何指示 - 我将尝试弄清楚，但如果有人在此之前完成它会有所帮助。

我最初尝试为桌面应用程序走 ExtJS 路径，但发现这两个框架之间存在足够的差异，以至于开发和维护变得非常昂贵，所以想快速推出 V1，然后弄清楚如何如果我有足够的兴趣为 IE 和 FireFox 推出一个 - 并使用基于桌面的控件，则可以长期处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:44:59.227

通常，sencha touch 中的滚动条默认隐藏并在您完成拖动长列表或面板后淡出...如果您想让滚动条始终可见，您可以在您的 css 或 scss 文件中进行设置：

```
.x-tabpanel .x-scroll-indicator {
    opacity: 0.5 !important; 
    z-index: 0; // Make scroll bar draggable
} 
```

也许我理解错了你的问题，但希望它有所帮助:)

# jquery - 附加元素jquery？

> ID：14227596
> 
> 赞同：1
> 
> 时间：2013-01-09T02:52:56.500
> 
> 标签：jquery, append

此处是网页 s1527.mtchs.org/chat.html 的链接

当您提交或按 Enter 键时，我的 textarea 的值将附加到 div。当这种情况再次发生时，div中的旧值被删除并附加新值？我该怎么做才能添加另一个值而不是删除旧值？

jQuery：

```
var captionLength = 0;
var caption = "";

$(document).ready(function()
{
  setInterval ( "cursorAnimation()", 600 );
});

function testTypingEffect()
{ 
if(userInput.value !== "Message")
{
  caption = $("textarea#userInput").val();
  $(caption).append('<div id = content></div>');
  type();
  }
}

function type() 
{
    $('p.caption').html(caption.substr(0, captionLength++));
    if(captionLength < caption.length+1)
    {
        setTimeout("type()", 50);
    }
    else {
        captionLength = 0;
        caption = "";
}   
}
function testErasingEffect()
{
 caption = $("p.caption").html();
  captionLength = caption.length;
 if (captionLength>0)
  {
erase();
 }
 else
  {
$('p.caption').html("You didn't write anything to erase, but ok!");
   setTimeout("testErasingEffect()", 1000);
 }
   }

           function erase()
          {
$('p.caption').html(caption.substr(0, captionLength--));
if(captionLength >= 0)
{
    setTimeout("erase()", 50);
}
else {
    captionLength = 0;
    caption = "";
}   
}

function cursorAnimation() 
{
  $("p.cursor").animate(
 {
   opacity: 0
}, 300, "swing").animate(
 {
 opacity: 1
 }, 300, "swing");
}
$(document).keypress(function(e) {
   if(e.which == 13) {
       testTypingEffect();
  }
}); 
```

HTML：

```
<div id="chatwrapper">
  <div id="tab">chatname</div>
  <div id="content">
    <p id="time"> 2:14:26pm</p>
    <div id="effectTesting">
      <p id="user">\\diablo\\student\2015:</p>
      <p class="caption"></p>
      <p class="cursor">|</p>
    </div>
    <p class="testing"></p>
    <br>
  </div>
  <div id="textarea">
    <textarea id="userInput" onclick="if(this.value=='Message'){this.value=''}" onblur="if(this.value==''){this.value='Message'}">Message</textarea>
    <input type="submit" id="submit" name="submit" value="Submit" onclick="testTypingEffect()"/>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:45:28.883

您在第 21 行使用 .html() 而不是 .append() 。更改它还不够，因为您处理实际标题长度以及如何输入字符串不正确，所以我重新编写了您的关键功能。见我的jsfiddle。我也这样做了，因此每次按下提交时它都会在新行上添加新内容。此外，光标将“跟随”内容！

见：http: [//jsfiddle.net/GJBGt/9/](http://jsfiddle.net/GJBGt/9/)

HTML：您的原始 HTML

CSS：

```
span{ float:left; clear:both; margin: 5px 0px; overflow: auto;}
#textarea{ float: left; clear:both}
.cursor{ display:inline } 
```

JS：

```
var caption = "";
//you REALLY DON'T NEED variable captionLength that you had here before

$(document).ready(function()
{
  setInterval ( "cursorAnimation()", 600 );
});

function testTypingEffect()
{ 
if(userInput.value !== "Message")
{
  caption = $("textarea#userInput").val();

  typefirst();
  }
}

function typefirst() 
{
    $('p.caption').append("<span></span>");
    type();
}

function type()
{
    $("span").eq(-1).append(caption.substr(0, 1));
    $(".cursor").appendTo($("span").eq(-1));
    if(caption.length > 0)
    {
        caption = caption.substring(1);
        setTimeout("type()", 50);
    }
    else {
        caption = "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:26:21.370

我不确定您最终希望它看起来如何，但是您使用 append() 错误。

试试这个：

```
$("#content").append("<p class='caption'>"+caption+"</p>"); 
```

而不是你的：

```
$(caption).append('<div id = content></div>'); 
```

这会将元素添加`<p class="caption">(textarea caption)</p>`到 .

您可能还想稍微更改一下 type() 动画，如下所示：

```
$('p.caption:last').html(caption.substr(0, captionLength++)); 
```

而不是你的：

```
$('p.caption').html(caption.substr(0, captionLength++)); 
```

这仍然不完美，因为光标不在底部，但您可以通过在光标正上方附加新元素来实现。

# excel - 使用 C# 在 Excel 电子表格中有效插入行

> ID：14227597
> 
> 赞同：0
> 
> 时间：2013-01-09T02:52:57.200
> 
> 标签：excel, c#-4.0, com, excel-interop

我有一个包含约 1500 行数据的电子表格。在电子表格顶部插入行时，我发现使用以下代码插入单行的性能大约为 2.5 秒：

```
Excel.Range insert_range = _excel.Worksheets["Sheet Name"].Range[insert_address];
insert_range.Insert(Excel.XlDirection.xlDown, Type.Missing); 
```

但是，如果行数增加到 20（每次插入），则性能保持恒定约 2.5 秒。

有什么办法可以提高excel插入这些行的速度吗？

**编辑**

性能似乎与工作表中现有数据的数量相关，例如，一个包含 150 行的工作表需要 0.23 秒，这似乎是成比例的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:39:15.953

谢谢各位。

正如 Pynner 建议的那样，我发现将行添加到数据集的底部是最好的选择。

蒂姆，我禁用了 ScreenUpdating 并设置了 Calculation = Manual 但这没有任何重大影响。

谢谢

# api - 需要知道 Shopify API 中 UPS Standard 的特定运输方式代码

> ID：14227599
> 
> 赞同：5
> 
> 时间：2013-01-09T02:53:20.590
> 
> 标签：api, shopify, shipping, ups

我迫切需要知道 Shopify API 中 UPS 标准运输的具体代码。它将是 Order API 中的 2 位数字，shipping-lines > shipping-line > code。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T14:16:06.010

UPS 标准代码值为“11”

还有一些其他的UPS代码：

```
'01' => 'Next Day Air ("Red")',
'02' => 'Second Day Air ("Blue")',
'03' => 'Ground',
'07' => 'Express',
'08' => 'Expedited', 
'11' => 'Standard',
'12' => 'Third Day Select',
'13' => 'Next Day Air Saver ("Red Saver")',
'14' => 'Next Day Air Early A.M.',
'15' => 'Next Day Air Early A.M.',
'22' => 'Ground - Returns Plus - Three Pickup Attempts',
'32' => 'Next Day Air Early A.M. - COD',
'33' => 'Next Day Air Early A.M. - Saturday Delivery, COD',
'41' => 'Next Day Air Early A.M. - Saturday Delivery',
'42' => 'Ground - Signature Required',
'44' => 'Next Day Air - Saturday Delivery',
'54' => 'Express Plus',
'59' => 'Second Day Air A.M.',
'65' => 'WorldWide Saver',
'66' => 'Worldwide Express',
'72' => 'Ground - Collect on Delivery',
'78' => 'Ground - Returns Plus - One Pickup Attempt',
'90' => 'Ground - Returns - UPS Prints and Mails Label',
'A0' => 'Next Day Air Early A.M. - Adult Signature Required',
'A1' => 'Next Day Air Early A.M. - Saturday Delivery, Adult Signature Required',
'A2' => 'Next Day Air - Adult Signature Required',
'A8' => 'Ground - Adult Signature Required',
'A9' => 'Next Day Air Early A.M. - Adult Signature Required, COD',
'AA' => 'Next Day Air Early A.M. - Saturday Delivery, Adult Signature Required, COD', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T18:58:39.723

如果您下载 UPS 运输开发人员文档，则在附录或其他地方不再有任何“星期六”递送代码。相反，您使用您想要的服务，例如“次日航空”或“次日航空早早”将是与`SaturdayDeliveryIndicator`. 从他们的文档中：

> 周六交货指标。存在表示周六交货；缺席表示不是星期六交货。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-19T20:10:25.597

有几种方法：

1.  在 magento admin 中，转到系统 > 配置，然后单击运输方式选项卡，然后在允许的方法框内单击鼠标右键，检查元素，您会看到类似 UPS 标准值代表方法代码的内容。

2.  或打开 app/code/core/Mage/Usa/Model/Shipping/Carrier/Ups.php 并在第 327 行周围，您将看到所有带有相应代码的运输方式。

# android - 无论如何要通过 Android WebView 上的 POST 方法捕获表单数据？

> ID：14227605
> 
> 赞同：4
> 
> 时间：2013-01-09T02:53:50.357
> 
> 标签：android, post, webview, capture, intercept

这个问题已经提出了很多，但我还没有找到一个明确的答案。我宁愿不采取JS注入的方式，因为我觉得我不应该...

基本上我正在做的是制作一个 Android 应用程序，它将作为网站的离线对应物。同步后，如果需要，它将拉取对站点 html、JS 和 CSS 文件的任何更改。然后在离线时，它将在 WebView 中显示。

我希望能够像在线一样从表单中提取数据，但从 WebView 中提取数据并将其保存到设备上的数据库中。然后，当重新联机时，应用程序会将这些数据同步到实际的网站数据库。

我知道如何让它与 GET 一起使用，但我更愿意使用 POST 来吸引敏感。

# css - 背景视频出现在页面的一半（HTML5 视频元素）

> ID：14227607
> 
> 赞同：0
> 
> 时间：2013-01-09T02:53:57.933
> 
> 标签：css, html, video, web

我的网站是一个单页网站，分为两个单独的页面 (www.JazzAndRain.com)。我正在尝试将 HTML5 视频填满网站的前半部分，但不知何故，当它在 Chrome 和 Safari 中加载时，视频出现在页面的一半。当您检查元素时，视频将被向上推送。有谁知道正确加载视频的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:02:29.077

边距被内联添加 - 我假设是通过一些 javascript。停止任何正在做的事情......

# excel - 构造 Excel 日期和时间

> ID：14227608
> 
> 赞同：0
> 
> 时间：2013-01-09T02:54:02.753
> 
> 标签：excel, date, text

我有一个文本形式的日期，excel 没有像我想要的那样识别为日期和时间。是否有一个公式可以分解此文本，然后将其构建为正确的日期和时间？

01.01.2012 08:00:00.000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:01:24.003

`=DATE(MID(C5,7,4),MID(C5,4,2),LEFT(C5,2)) + TIME(MID(C5,12,2),MID(C5,15,2),MID(C5,18,2))`

当日期字符串在单元格 C5 中时

# android - @string 错误 + api 级别错误

> ID：14227610
> 
> 赞同：0
> 
> 时间：2013-01-09T02:54:05.533
> 
> 标签：android, string

所以我收到了@string 错误以及 API 级别错误。有什么建议么？我尝试更改 xmlns，但仍然无法摆脱错误。

```
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:columnCount="2"
android:orientation="horizontal" >

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/News" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:text="Workouts" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Videos" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Blog" />
</Button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:09:45.917

Button 是一个视图，不能用作 ViewGroup。您在 Button 节点中放置了 3 个 Button，这是不正确的。

但用你的话来说，你遇到了api级别的错误。GridLayout 从 API 级别 14 开始添加，不能在较低级别使用。您应该添加支持库以启用它，尝试阅读[相同的问题](https://stackoverflow.com/questions/9126780/how-to-make-android-gridlayout-compatible-to-older-version)以获得答案。

# javascript - jQuery：强制显示修改的dom

> ID：14227611
> 
> 赞同：9
> 
> 时间：2013-01-09T02:54:13.240
> 
> 标签：javascript, jquery, tablesorter, spin.js

我在尝试在我的页面上运行“加载微调器”时遇到了一个问题，该页面在对表格进行排序时运行，特别是对于速度较慢的客户端，因为可能需要 10 秒才能对页面进行排序。我可以看到 DOM 被微调器代码修改，但它不显示。我希望在排序发生之前我可以做些什么来强制显示微调器，当然在排序完成时停止它。

我的排序基于[“sorttable.js”](http://www.kryogenix.org/code/browser/sorttable/)，我已对其进行了修改以处理表第一列（其中包含名称）的二级排序。

我的微调器使用['spin.js'](http://fgnass.github.com/spin.js/)。

我仍然是这个 jQuery 东西的新手，而且这个可排序的代码相当复杂。我在下面突出显示部分，但我的完整修改的排序表代码（现在）可以在['sorttable-TESTING-ONLY.js'](http://infohorse.hrnz.co.nz/scripts/sorttable-TESTING-ONLY.js)中找到 ，测试 html 页面位于['TESTING-ONLY-sort_and_spin.htm'](http://infohorse.hrnz.co.nz/datahr/breeding/TESTING-ONLY-sort_and_spin.htm)。

因此，脚本在页面加载时设置了一些功能（“.....”表示跳过的行）：

```
makeSortable: function(table) {                          //line 75
  ......
  headrow = table.tHead.rows[0].cells;

  for (var i=0; i<headrow.length; i++) {                 //line 114
    .....
    headrow[i].sorttable_sortfunction = sorttable.guessType(table,i);   //line 126

    // code to start/stop spinner
    headrow[i].sorttable_spinner = (function(val) {      //line 136
      return function(val) {
        var $this = $(this),
        data = $this.data();

        if (data.spinner) {
          data.spinner.stop();
          delete data.spinner;
        }
        if (val > 0) {
          var opts = {
            .......
           };
           data.spinner = new Spinner($.extend({color: $this.css('color')}, opts)).spin(this);
           // can see spinner added to DOM but does not display...
         }
    }})(i); 
```

对它们进行编码会为列标题创建一个可点击的事件处理程序：

```
headrow[i].sorttable_columnindex = i;                            //line 171
headrow[i].sorttable_tbody = table.tBodies[0];

dean_addEvent(headrow[i],"click", function(e) {                  //line 176
   .... does some stuff with class names, etc

   this.sorttable_spinner(1);    // set spinner on             //line 224

   .... builds array to do sort then calls sort functions
   if (sort_direction == 'forward') {                            //line 247
     row_array.sort(this.sorttable_sortfunction); 
   } else {
     row_array.sort(this.sorttable_reversesortfunction);
   }

   tb = this.sorttable_tbody;
   for (var j=0; j<row_array.length; j++) {
     tb.appendChild(row_array[j][2]);
   }
   delete row_array;

   this.sorttable_spinner();  // now stop the spinner            //line 261 
```

这一切看起来应该可以正常工作。在带有 firebug 的 Firefox 中，我看到 DOM 加载了微调器代码，我看到它在浏览器中旋转，并且关闭微调器的行将其从 DOM 中删除。但是，如果我没有处于调试模式，只运行它，那么不会显示微调器？（使用 IE10 调试甚至不显示微调器）。

我在不同的地方尝试过 .show() 但总是被告知没有可用的功能。看到了提供单独排序过程的参考，`window.setTimeout( function () {...`但不明白如何在这种情况下实现它。

如果有人能给我一些指示，将不胜感激。

问候，布莱斯 S。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T02:58:39.933

基本上，JavaScript 只有一个线程用于您的代码和 UI。这意味着，如果您的代码不放弃控制权，那么在您放弃控制权之前不会显示 UI。所以，在这种代码中：

```
spinner_on();
dostuff();
spinner_off(); 
```

发生的情况是，您将微调器插入 DOM，执行操作，移除微调器，放弃控制 - 最后更新 UI，没有微调器（因为此时它不再存在）。

基本模式应该是这样的：

```
spinner_on();
setTimeout(function() {
  dostuff();
  spinner_off();
}, 0); 
```

这工作如下：将微调器插入 DOM，安排一些事情，放弃控制。UI 得到更新（使用微调器）。计划函数运行：事情完成，微调器从 DOM 中移除，控制权再次被放弃。UI 已更新（没有微调器）。

当您在调试器中时，调试器会从您的代码手中夺取控制权，因此您可以在代码中断时在 UI 中看到您的微调器。

# mysql - PHP/MYSQL - 显示来自多列的最新不同值

> ID：14227619
> 
> 赞同：2
> 
> 时间：2013-01-09T02:55:28.457
> 
> 标签：mysql, select, private-messaging

这是我的mysql表结构：

```
msgid | senderid | sender | recipientid | recipient | title | message | date 
```

我希望在收件箱中显示我的私人消息系统，就像 Facebook 所做的那样。也就是说，无论是传入还是传出，每个对话都会从表中输出一次。例如：

```
My username is 'admin'.

USER   |   MESSAGE       |   DATE   |  DIRECTION
Dan    | Hello           |  1/2/10  | Incoming
Bob    | How are you Bob?|  30/1/10 | Outgoing 
```

由于方向不同，问题不在于重复用户名。例如：

```
USER   |   MESSAGE       |   DATE   |  DIRECTION
Dan    | Hello           |  1/2/10  | Incoming
Bob    | How are you Bob?|  30/1/10 | Outgoing
Bob    | Hi admin        |  30/1/10 | Incoming 
```

所以我需要确保显示的唯一消息是最新的通信，无论方向如何（即，与另一个用户的最新消息，无论该用户是“发送者”还是“接收者”）。

我在这个网站上使用 PHP/MYSQL。我已经尝试了数千种方法来做到这一点，但我就是想不通。可能是我的数据库结构不正确。我将在线几个小时（之后会不断检查），所以请随时提出任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:08:19.277

如果我理解正确，这应该可以满足您的需要：

```
SELECT
IF(senderid = :userId,recipient,sender) AS USER,
message,
date,
IF(senderid = :userId,'Outgoing','Incoming') AS DIRECTION
FROM message 
WHERE senderid = :userId OR recipientid = :userId 
ORDER BY date DESC 
```

USER 和 DIRECTION 取决于此用户是否为发送者。

如果您只对最新消息感兴趣，可以向此查询添加 LIMIT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:34:59.667

我已经通过以下方式解决了我自己的问题：

```
SELECT * FROM (
    SELECT * FROM (
         (SELECT id, reciever, recieverid, message, datetime FROM messages WHERE sender = '$user')
       UNION
          (SELECT id, sender, senderid, message, datetime FROM messages WHERE reciever = '$user')
          ) as t
       ORDER BY datetime DESC
    ) as t2
GROUP BY reciever ORDER BY datetime DESC 
```

它似乎可以解决问题，尽管我不知道哪些消息是传入或传出的。当我有机会邀请一些实际用户时，我会知道它是否正常工作。

# ruby-on-rails-3 - Rails 3 表单动作和方法

> ID：14227621
> 
> 赞同：2
> 
> 时间：2013-01-09T02:55:55.307
> 
> 标签：ruby-on-rails-3, forms

我做了一个资源。

```
resources :dashboards 
```

我有一个包含表单的部分文件，我想使用这个部分（因为表单元素不会改变）来更新和创建。所以这就是我所拥有的：

**控制器**

```
class DashboardsController < ApplicationController
 def new     
    @dashboard = Dashboard.new
  end
end 
```

**看法**

/dashboards/new.html.erb

```
<%= render :partial => "form", :locals => { :dashboard => @dashboard } %> 
```

**部分形式**

/dashboards/_form.html.erb

```
<%= form_for(@dashboard) do |form| %>
.....
<% end %> 
```

**红宝石指南**

红宝石指南指出：

Article 模型可供应用程序的用户直接使用，因此——遵循使用 Rails 开发的最佳实践——您应该将其声明为资源。在处理 RESTful 资源时，如果您依赖记录标识，对 form_for 的调用会变得非常容易。**简而言之，您可以只传递模型实例并让 Rails 找出模型名称和其余部分。**例如：

```
## Creating a new article
# long-style:
form_for(@article, :url => articles_path)
# same thing, short-style (record identification gets used):
form_for(@article)

## Editing an existing article
# long-style:
form_for(@article, :url => article_path(@article), :html => { :method => "put" })
# short-style:
form_for(@article) 
```

**结果**

我以为我正确地遵循了 Rails 指南。因为我将@dashboard 设为资源。我可以将它传递到表单中并让它处理动作、方法和其余部分。相反，我得到了这个：

```
<form accept-charset="UTF-8" action="/dashboards" class="new_dashboard" id="new_dashboard_" method="post"> 
```

根据文档。我的表单的操作现在不应该是“/dashboards/new”，因为我们正在执行新操作吗？当我在 /edit 操作中使用相同的代码时，它是否应该传递一个额外的字段来声明要放置的方法？

无论如何，我的结果总是一样的。形式永远不会改变。

我究竟做错了什么？

**编辑**

这是我的路由器信息`rake routes`

```
GET    /dashboards(.:format)          dashboards#index
POST   /dashboards(.:format)          dashboards#create
GET    /dashboards/new(.:format)      dashboards#new
GET    /dashboards/:id/edit(.:format) dashboards#edit
GET    /dashboards/:id(.:format)      dashboards#show
PUT    /dashboards/:id(.:format)      dashboards#update
DELETE /dashboards/:id(.:format)      dashboards#destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:06:38.270

您是正确的，您应该能够“传递`@dashboard`到表单并让它处理动作、方法和其余部分”。这里的问题是`new`RESTful 操作的上下文中的内容。

当您使用 声明一组资源时`resources :dashboards`，您正在创建一组将请求映射到控制器操作的路由：

```
GET     /dashboards             index
GET     /dashboards/new         new
POST    /dashboards             create
GET     /dashboards/:id         show
GET     /dashboards/:id/edit    edit
PUT     /dashboards/:id         update
DELETE  /dashboards/:id         destroy 
```

如果你运行，你可以检查这个`rake routes`。

这里的问题是该`new`操作被定义为`GET`对路径的请求`/dashboards/new`，即这是*表单本身*的路径。实际表单属性中的 URL`action`是另外一回事：这是表单将通过`POST`请求将数据发布到的位置，在服务器（rails）端将映射到`create`控制器操作。

当您将表单助手与 一起使用时`form_for(dashboard)`，会创建一个表单，其路径对应于`dashboard`：如果它是一条新记录（即数据库中尚不存在），则表单操作将是`create`（并指向`/dashboards`），而如果它已经存在，它将指向记录的实际 URL（例如`/dashboards/123`）。这就是表单助手如此有用的原因。

因此，总而言之，`/dashboards`正确的 URL 不是针对`new`操作，而是针对`create`操作，表单助手使用它是因为`dashboard`是一条新记录。`new`是表单所在页面的路径，即`/dashboards/new`.

希望这是有道理的。

`@dashboard`ps 作为旁注，如果您将其作为本地 ( `:locals => { :dashboard => @dashboard }`)传递，则不应在部分中访问。只需使用`dashboard`.

# javascript - 如何找到以下数字的总组合？

> ID：14227623
> 
> 赞同：2
> 
> 时间：2013-01-09T02:56:16.170
> 
> 标签：javascript

我有以下数组：

```
[1,2,3]
[I,II]
[A,B,C] 
```

我想知道有多少种组合是可能的。例如：

```
[1,I], [1,A], [2,I], [2,A], [3,I], [3,A], ... 
```

数学中有一种叫做**笛卡尔积**的东西，但我不知道如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:39:04.027

您可以使用乘法计算数组中元素的可能组合数。

如果您有 2 个数组`array1`并且`array2`可能的组合数为`array1.length * array2.length`.

```
var array1 = ['1','2', '3'];
var array2 = ['I', 'II'];

var posibleCombinations = (array1.length * array2.length); 
```

上例的结果是 6。

使用三个数组，您将计算每个数组之间的可能组合，然后将每个数组的总和相加。

```
var array1 = ['1','2', '3'];
var array2 = ['I', 'II'];
var array3 = ['A','B','C'];

var posibleCombinations = (array1.length * array2.length) + (array1.length * array3.length) + (array2.length * array3.length); 
```

上例的结果是 21。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:06:46.297

```
var array1 = [1,2,3],
    array2 = ['I','II'],
    array3 = ['A','B','C'];

var count = array1.length + array2.length + array3.length;
    count = count * (count -1);
console.log(count); // 56 
```

公式为：

```
n = total * (total -1) // -1 assuming that the first can't be equal to the second 
```

# php - 使用 Ajax 进行多选

> ID：14227626
> 
> 赞同：0
> 
> 时间：2013-01-09T02:56:44.433
> 
> 标签：php, sql, ajax

我有一个多选表单，我现在正尝试将它与 AJAX 一起使用。下拉菜单应该充当图像的过滤器。

索引.php

```
<script>
function filterResults(str)
{
if (str=="")
  {
  document.getElementById("divResults").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("divResults").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","filter_ajax.php?filter="+str,true);
xmlhttp.send();
}
</script>

<form action="" class="css_form" id="picture_filter" name="picture_filter">
    <select onchange="filterResults(this.value)" multiple="multiple" name="filter[]" id="filter">
     <option value="filter_name_1">Filter name 1</option>
     <option value="filter_name_2">Filter name 2</option>
     <option value="filter_name_3">Filter name 3</option>
     <option value="filter_name_4">Filter name 4</option>
</select>
<div id="divResults"></div> 
```

和 filter_ajax.php

```
<?php

include ("connect.php");

    $filter = $_GET["filter"];
    $filterIn = implode("','",$filter);

        $result = mysql_query("SELECT * FROM edt_images
                                WHERE category1 IN ('$filterIn')
                                OR category2 IN ('$filterIn')
                                OR category3 IN ('$filterIn')
                                OR category4 IN ('$filterIn')
                                OR category5 IN ('$filterIn')
                                OR category6 IN ('$filterIn')")
            or die(mysql_error());
        while ($row = mysql_fetch_array($result)) {
            echo "<img src='files/small/thumb0_".$row['item_name'].".".$row['file_extension']."' border='0'/>"; 
        }

?> 
```

在我的数据库中，每张图片都有六个对应于类别的条目，并填充了子类别。因此，应该发生的是，当从“过滤器下拉列表”中选择一个项目时，它应该每六列查询该信息。但是我收到以下错误和输出：

implode()：传入的参数无效...第 6 行。

为了测试，我有五个条目。3 个填写了六个类别条目的所有信息，两个留空。

留空的两个总是返回上面的错误。

任何人对为什么会发生这种情况有任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:26:39.960

修改`<select>`：

```
<select onchange="filterResults(this)" multiple="multiple" name="filter[]" id="filter"> 
```

并试试这个（注意：你不需要在服务器端使用“，”来内爆数组 - 这已经在示例中使用 JS 完成）：

```
function filterResults(sel)
{
    var selectedOptions = [];
    for (var i = 0; i < sel.options.length; i++) {
        if (sel.options[i].selected) {
            selectedOptions.push("'" + sel.options[i].value + "'");
        }
    }
    if (selectedOptions.length == 0) {
        document.getElementById("divResults").innerHTML="";
        return;
    }
    str = selectedOptions.join(",");
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else  {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById("divResults").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","test.php?filter="+str,true);
    xmlhttp.send();
} 
```

UPD：同时修改您的 SQL：

```
$result = mysql_query("SELECT * FROM edt_images
                                WHERE category1 IN ($filterIn)
                                OR category2 IN ($filterIn)
                                OR category3 IN ($filterIn)
                                OR category4 IN ($filterIn)
                                OR category5 IN ($filterIn)
                                OR category6 IN ($filterIn)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:00:07.233

您发送到 PHP 脚本的不是数组。所以你不能使用`implode()`它并`implode()`返回一个错误。运行这个：

```
var_dump($filter); 
```

然后您可以根据结果决定如何修改您的代码。

# ruby-on-rails - 由于“请安装 postgresql 适配器”错误，Rails 控制台无法打开，在新创建的不使用 postgres 的应用程序中

> ID：14227630
> 
> 赞同：1
> 
> 时间：2013-01-09T02:57:20.627
> 
> 标签：ruby-on-rails, postgresql, rubygems, rails-console

我正在运行 Rails 3.2.11，但这似乎也发生在 3.2.10 和 3.2.9 中。本质上，我愿意

```
rails new sample_app
rails console 
```

这吐出：

```
/Users/carl/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem': Please install the postgresql adapter: `gem install activerecord-postgresql-adapter` (pg is not part of the bundle. Add it to Gemfile.) (LoadError)
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:7:in `<top (required)>'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:50:in `resolve_hash_connection'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:41:in `resolve_string_connection'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:27:in `spec'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:130:in `establish_connection'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/railtie.rb:82:in `block (2 levels) in <class:Railtie>'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:42:in `each'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/base.rb:720:in `<top (required)>'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/activerecord-3.2.11/lib/active_record/railtie.rb:41:in `block in <class:Railtie>'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/railtie.rb:179:in `call'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/railtie.rb:179:in `block in load_console'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/railtie.rb:179:in `each'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/railtie.rb:179:in `load_console'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/engine.rb:429:in `block in load_console'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application/railties.rb:8:in `each'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application/railties.rb:8:in `all'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/engine.rb:429:in `load_console'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/application.rb:153:in `load_console'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/commands/console.rb:27:in `start'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/commands/console.rb:8:in `start'
from /Users/carl/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2ndEd/gems/railties-3.2.11/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我的问题是：我使用的是默认生成的 Gemfile，甚至没有使用 postgres。为什么 Rails 向我抱怨，我该如何解决？这可能与我的 gemset 或 RubyGems 有关吗？以下是 Gemfile 供参考：

```
source 'https://rubygems.org'
gem 'rails', '3.2.11'
# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'
gem 'sqlite3'
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby
  gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails'
# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'
# To use Jbuilder templates for JSON
# gem 'jbuilder'
# Use unicorn as the app server
# gem 'unicorn'
# Deploy with Capistrano
# gem 'capistrano'
# To use debugger
# gem 'debugger' 
```

这是我的 database.yml：

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:30:46.263

请确认 config/database.yml 中没有指定 postgresql - 它应该使用您的首选数据库。

也就是说，新的 rails 应用程序的默认值应该是 sqlite。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-05T13:02:49.667

我有同样的问题，但我*在*开发中使用 postgres。当我更新 pg gem 时，问题就消失了。

```
# Gemfile
# gem "pg", "~> 0.15.0"   # old line
gem "pg", "~> 0.17.0"     # new line 
```

我更新了宝石：

```
$> bundle update pg 
```

我启动了 Rails 控制台，一切都恢复了。

# javascript - Twitter Bootstrap - 导航崩溃

> ID：14227632
> 
> 赞同：1
> 
> 时间：2013-01-09T02:57:41.533
> 
> 标签：javascript, css, twitter-bootstrap, responsive-design, media-queries

我正在努力更新我的网站以使用 Twitter Bootstrap 进行响应。我目前的网站可以查看@http [://www.JoshuaBock.com](http://www.JoshuaBock.com)。

我在尝试自定义导航栏折叠功能时遇到问题。目前我让它正确显示，但它在 981 像素和 1126 像素之间不起作用。我避免修改 Bootstrap 基本代码，以便可以轻松升级到更新版本的 Bootstrap。问题是由我的自定义媒体查询引起的：

媒体查询

```
<pre><code>
@media (min-width: 980px) and (max-width: 1126px) {
      .navbar{
        width: 85%;
      }
      .navbar-fixed-top,
      .navbar-fixed-bottom {
        position: static;
      }
      .navbar-fixed-top {
        margin-bottom: 20px;
      }
      .navbar-fixed-bottom {
        margin-top: 20px;
      }
      .navbar-fixed-top .navbar-inner,
      .navbar-fixed-bottom .navbar-inner {
        padding: 5px;
      }
      .navbar .container {
        width: auto;
        padding: 0;
      }
      .navbar .brand {
        padding-right: 10px;
        padding-left: 10px;
        margin: 0 0 0 -5px;
      }
      .nav-collapse {
        clear: both;
      }
      .nav-collapse .nav {
        float: none;
        margin: 0 0 10px;
      }
      .nav-collapse .nav > li {
        float: none;
      }
      .nav-collapse .nav > li > a {
        margin-bottom: 2px;
      }
      .nav-collapse .nav > .divider-vertical {
        display: none;
      }
      .nav-collapse .nav .nav-header {
        color: #777777;
        text-shadow: none;
      }
      .nav-collapse .nav > li > a,
      .nav-collapse .dropdown-menu a {
        padding: 9px 15px;
        font-weight: bold;
        color: #777777;
        -webkit-border-radius: 3px;
           -moz-border-radius: 3px;
                border-radius: 3px;
      }
      .nav-collapse .btn {
        padding: 4px 10px 4px;
        font-weight: normal;
        -webkit-border-radius: 4px;
           -moz-border-radius: 4px;
                border-radius: 4px;
      }
      .nav-collapse .dropdown-menu li + li a {
        margin-bottom: 2px;
      }
      .nav-collapse .nav > li > a:hover,
      .nav-collapse .dropdown-menu a:hover {
        background-color: #f2f2f2;
      }
      .navbar-inverse .nav-collapse .nav > li > a,
      .navbar-inverse .nav-collapse .dropdown-menu a {
        color: #999999;
      }
      .navbar-inverse .nav-collapse .nav > li > a:hover,
      .navbar-inverse .nav-collapse .dropdown-menu a:hover {
        background-color: #111111;
      }
      .nav-collapse.in .btn-group {
        padding: 0;
        margin-top: 5px;
      }
      .nav-collapse .dropdown-menu {
        position: static;
        top: auto;
        left: auto;
        display: none;
        float: none;
        max-width: none;
        padding: 0;
        margin: 0 15px;
        background-color: transparent;
        border: none;
        -webkit-border-radius: 0;
           -moz-border-radius: 0;
                border-radius: 0;
        -webkit-box-shadow: none;
           -moz-box-shadow: none;
                box-shadow: none;
      }
      .nav-collapse .open > .dropdown-menu {
        display: block;
      }
      .nav-collapse .dropdown-menu:before,
      .nav-collapse .dropdown-menu:after {
        display: none;
      }
      .nav-collapse .dropdown-menu .divider {
        display: none;
      }
      .nav-collapse .nav > li > .dropdown-menu:before,
      .nav-collapse .nav > li > .dropdown-menu:after {
        display: none;
      }
      .nav-collapse .navbar-form,
      .nav-collapse .navbar-search {
        float: none;
        padding: 10px 15px;
        margin: 10px 0;
        border-top: 1px solid #f2f2f2;
        border-bottom: 1px solid #f2f2f2;
        -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.1);
           -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.1);
                box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.1);
      }
      .navbar-inverse .nav-collapse .navbar-form,
      .navbar-inverse .nav-collapse .navbar-search {
        border-top-color: #111111;
        border-bottom-color: #111111;
      }
      .navbar .nav-collapse .nav.pull-right {
        float: none;
        margin-left: 0;
      }
      .nav-collapse,
      .nav-collapse.collapse {
        height: 0;
        overflow: hidden;
      }
      .navbar .btn-navbar {
        display: block;
      }
      .navbar-static .navbar-inner {
        padding-right: 10px;
        padding-left: 10px;
      }
    }

    @media (min-width: 980px) and (max-width: 1126px) {
        .nav-collapse.collapse{
            height:0 !important;
            overflow:hidden !important;
        }
    }

</pre></code> 
```

更多指定`!important`部分似乎是导致问题的原因。如果我删除`!important`导航不会崩溃。

实际代码可以在我的测试网站[@http://beta.joshuabock.com/index.html上查看](http://beta.joshuabock.com/index.html)

我知道我已经接近解决方案，但可以使用一些帮助来解决这个问题。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:48:50.413

当我指定媒体查询时，我通常会这样指定它们

```
@media all and (min-width: 980px) and (max-width: 1126px) 
```

注意到你的开始@media，所以不确定这是否会导致任何问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-24T15:24:59.563

这是我解决这个问题的方法

```
@media (max-width: 1992px) {
    .navbar-header {
        float: none;
    }
    .navbar-left,.navbar-right {
        float: none !important;
    }
    .navbar-toggle {
        display: block;
    }
    .navbar-collapse {
        border-top: 1px solid transparent;
        box-shadow: inset 0 1px 0 rgba(255,255,255,0.1);
    }
    .navbar-fixed-top {
        top: 0;
        border-width: 0 0 1px;
    }
    .navbar-collapse.collapse {
        display: none!important;
    }
    .navbar-nav {
        float: none!important;
        margin-top: 7.5px;
    }
    .navbar-nav>li {
        float: none;
    }
    .navbar-nav>li>a {
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .collapse.in{
        display:block !important;
    }
} 
```

# parsing - SimpleXML 解析来自 curl 撇号问题的响应

> ID：14227633
> 
> 赞同：0
> 
> 时间：2013-01-09T02:57:57.617
> 
> 标签：parsing, utf-8, simplexml

所以我的问题是当我解析来自 curl 的 xml 响应时，出于某种原因，我从 simplexml 获得的撇号字符是一些奇怪的字符。例如：

$xml = 新的 SimpleXMLElement($resp);

$xml->description 输出类似于：

> 在同意成为国王之手后，内德离开临冬城

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:58:32.863

SnowInferno 是对的，没有任何改变。只是*您*页面上声明的编码不是UTF-8，而是Windows-1252。为您的页面声明 UTF-8，它将起作用：

```
header("Content-Type: text/html; charset=utf-8");
$xml = new SimpleXMLElement($resp);

$xml->description ouputs something like: 
```

# ruby-on-rails-3.2 - 在 IMGKIT 中使用 scss

> ID：14227634
> 
> 赞同：1
> 
> 时间：2013-01-09T02:58:18.103
> 
> 标签：ruby-on-rails-3.2, sass, imgkit

我想为 imgkit 使用 scss，但 imgkit 只接受 css。我想将 scss 渲染为字符串，但我不知道如何将它传递给 imgkit。

```
kit = IMGKit.new(get_card_html, :quality => 70, :width=> 200, :height=> 324)

// IMGKit normally takes in a file path
kit.stylesheets << Rails.root.join('app', 'assets','stylesheets' ,'cards.css').to_s

// rendered it to string. how do i pass it into imgkit?
Onethingaday::Application.assets.find_asset('cards.css').body 
```

# algorithm - 斯卡拉快速排序

> ID：14227636
> 
> 赞同：0
> 
> 时间：2013-01-09T02:59:08.297
> 
> 标签：algorithm, scala, paradigms

```
object QuickSort {
  def main(args: Array[String]) = {
    val a = Array(5, 3, 2, 1, 20, 46, 9, 39 ,219)
    sort(a).foreach(n=> (print(n), print (" " )))
  }

  def sort(a:Array[Int]): Array[Int] =  {
    if (a.length < 2) a
    else {
      val pivot = a(a.length / 2)
      sort (a filter (pivot>)) ++ (a filter (pivot == )) ++
        sort (a filter(pivot <))
    }
  }
} 
```

首先，我正在做一个作业，我应该解释 Scala 中的各种排序算法。我对 Scala 比较陌生。我已经离开了另一个帖子，我得到了回答，这对我有帮助。我的问题在于这 3 行：排序方法中的这 2 行（我无法理解过滤器、++ 和 == 的使用）

```
sort (a filter (pivot>)) ++ (a filter (pivot == )) ++
 sort (a filter(pivot <)) 
```

以及 main 方法中的这一行（我无法理解 n 的用户和 foreach 一词）

```
sort(a).foreach(n=> (print(n), print (" " ))) 
```

我尝试用谷歌搜索这些问题，但没有得到任何帮助。不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:37:58.640

这是用函数式编程风格编写的，其中 filter 和 foreach 是高阶函数，即它们将另一个函数作为输入。

主函数中的部分`n => (print ... )`是匿名函数的语法糖，如下所示：

```
def someName(n : String) = (print ...) 
```

`foreach`依次将此函数应用于列表的每个参数。请注意，编写它的简短方法`n => ...`允许您节省`def someName`输入参数的需要`n`，因为编译器会自动得出它必须是`String`参数。

类似地，`pivot >`,`pivot <`和`pivot ==`只是编写形式函数的语法糖

```
def gt(arg : String) = pivot > arg 
```

再一次，`filter`将此函数应用于列表的每个参数，并从这些参数构建一个结果列表，此函数为其返回`true`.

换句话说，`(a filter (pivot>))`执行以下操作：将列表的元素与元素`a`进行比较`pivot`，`a filter (pivot>)`然后返回`a`小于枢轴元素的所有元素的列表。

Scala REPL 中的一个更简单的示例：

```
scala> List(1,2,3,4,5) filter (3>)
res0: List[Int] = List(1, 2) 
```

我假设你知道快速排序是如何工作的，所以你现在需要把这个拼图的各个部分放在一起就是知道`++`连接列表，所以你在这些行中执行传统的快速排序：对小于枢轴的元素进行排序，添加枢轴元素，并添加大于枢轴的排序元素。

# java - 使用 Spring JDBC 模板 - 性能

> ID：14227640
> 
> 赞同：1
> 
> 时间：2013-01-09T02:59:50.080
> 
> 标签：java, spring, jdbc

Spring SimpleJDBCTemplate 是生产级的吗？

在大流量（流量）站点中使用有多好？（假设每秒 1K 次点击）

我们有哪些选择来提高应用程序级别的性能（连接池等）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T03:02:59.187

是的，它是生产级的。您在该卷上的限制不是运行 JDBC 与 Spring JDBC 模板与其他任何东西。如果确实是每秒 1000 次点击，那么您的限制就是资源。同时 1000 个用户的点击量要少得多，因为他们有“思考时间”，而不是不断地点击你的应用程序。

使用任何数据库技术，您都需要进行大量调整，查看缓存并非常了解资源。是的，您绝对需要连接池。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T03:14:00.047

如果您正在谈论使用`SimpleJDBCTemplate`纯`JDBC`...去吧！它绝对应该提供尽可能多的性能，并帮助您摆脱大多数 JDBC 连接建立/中断样板代码和异常处理等。

Spring 将允许您配置连接池，像使用纯 JDBC 一样进行调整。

这是一个旧博客为您提供性能比较： http: [//pramatr.wordpress.com/2008/08/19/spring-jdbctemplate-the-phantom-performance-problem/](http://pramatr.wordpress.com/2008/08/19/spring-jdbctemplate-the-phantom-performance-problem/)

从那以后，春天变得更好了。

# javascript - 如何制作具有可变高度主体的页眉/正文/页脚“弹出”div？

> ID：14227643
> 
> 赞同：1
> 
> 时间：2013-01-09T03:00:17.157
> 
> 标签：javascript, jquery, css

我在我的网页上生成了一个看起来像经典窗口的弹出 div，可以最小化/调整大小/移动。

我需要它有一个 25 像素高的页眉，一个 50 像素高的页脚，然后窗口的主体总是采用“休息”，这是可变的，因为窗口可以调整大小。这个窗口的主体会动态更新它的 DOM，可以在其中添加元素。如果添加了足够多的元素，它们的组合高度超过了分配给窗口主体的高度，那么这个主体区域应该开始滚动，当用户滚动时，页脚始终保持在原位 - 它只是滚动的主体内容。

如何使用 CSS、jQuery 以及它与 IE8 一起使用来实现这一点？

代码应该如下所示，基本上：

```
<div id="wrap">
  <div id="header">
    ... 25 px high space fixed to the top
  </div>
  <div id="body">
    ... stretches to fill the space available height/width ... 
    ... scrollbars available when the body content exceeds height available ...
    ... jQuery allows user to resize the whole window, so this body should always fill ...
  </div>
  <div id="footer">
    ... 50px footer with controls, must always be fixed to bottom of window ...
    ... must never move no matter if the user scrolls the body ...
  </div>
</div> 
```

这可以完成，以便它可以跨浏览器工作吗？IE8+、火狐、Chrome？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T03:09:22.667

在此处尝试演示[http://jsfiddle.net/XfPAG/4/](http://jsfiddle.net/XfPAG/4/)。这个想法是使用绝对位置：

HTML

```
<div id="wrap">
  <div id="header">
    ... 25 px high space fixed to the top
  </div>
  <div id="body">
    ... stretches to fill the space available height/width ... 
    ... scrollbars available when the body content exceeds height available ...
    ... jQuery allows user to resize the whole window, so this body should always fill ...
  </div>
  <div id="footer">
    ... 50px footer with controls, must always be fixed to bottom of window ...
    ... must never move no matter if the user scrolls the body ...
  </div>
</div> 
```

CSS：

```
#wrap, #header, #body, #footer {
  position: absolute;
  left: 0;
  right: 0;
}

#wrap {
  top: 0;
  bottom: 0;
}

#header {
  height: 25px;
  top: 0;
}

#footer {
  height: 50px;
  bottom: 0;
}

#body {
  top: 25px;
  bottom: 50px;
  overflow: auto;
} 
```

# windows - Clang 在 Windows 7 64 位上崩溃

> ID：14227645
> 
> 赞同：3
> 
> 时间：2013-01-09T03:01:02.847
> 
> 标签：windows, crash, 64-bit, mingw, clang

我一直在 Windows XP 和 Windows Vista 上使用 MinGW 的“实验”构建成功地使用 clang，但现在我在我的新 Windows 7 64 位笔记本电脑上尝试它只是崩溃了。即使我只是运行“clang++”或“clang”，它也会崩溃，而且我不知道如何让 Windows 为我提供更详细的崩溃信息（如果可以的话，我会编辑它）。我已经重新下载了clang并重新安装了MinGW，并且我尝试在兼容模式下运行clang.exe，但它仍然无法正常工作。这是我第一次在 64 位上使用它，我希望这不是问题（如果是，我还有另一台可以使用的计算机）。

我环顾四周，甚至在给出任何输出或处理任何输入之前都找不到其他人遇到同样的clang崩溃问题，我真的感到迷茫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:09:35.650

现在这在各种系统上发生了多次，我找到了解决方案。***使用预先打包*****的文件****重新安装 MinGW***，“最新”的文件往往相对于 clang 不稳定。确保您还没有在 MinGW 安装之上安装更新版本的 gcc，因为这也会导致问题。*

# autohotkey - 按键时如何按住鼠标？

> ID：14227649
> 
> 赞同：0
> 
> 时间：2013-01-09T03:01:25.103
> 
> 标签：autohotkey

我是autohotkey的新手，并为我缺乏编程知识而道歉，但正如标题中所述，我正在努力做到这一点，当我按住键盘上的某个键时，鼠标将被按住在某个位置出色地。

我遇到的问题是，当我释放键盘上的键（在本例中为“向上”键）时，光标仍然保持向下。到目前为止，这是我的代码：

```
$Up::
Loop{
    if GetKeyState("Up", "P"){
        Click 112, 429, down
    }
    if not GetKeyState("Up", "P"){
        break
    }
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:22:12.000

这是代码

```
F1::
    if( not GetKeyState("LButton" , "P") )
        Click down
return

F1 Up::Click up 
```

阅读文档。[http://www.autohotkey.com/docs/](http://www.autohotkey.com/docs/)；

# django - Apache HTTP Basic Auth - 提供用户名和密码后出现 401 错误

> ID：14227650
> 
> 赞同：3
> 
> 时间：2013-01-09T03:01:47.620
> 
> 标签：django, apache, apache2, httpd.conf, bitnami

我正在尝试使用 Apache Http 配置我的亚马逊服务器，以在通过浏览器访问域时提示用户输入用户名/密码。

这是我的 app.conf 文件中的一个片段（包含在 httpd.conf 中）

```
Alias / "/opt/bitnami/apache2/htdocs"

<Directory "/opt/bitnami/apache2/htdocs">
  AuthType Basic
  AuthName "No Trespassing"
  AuthUserFile "/opt/bitnami/apache2/users"
  Require valid-user

<IfVersion < 2.3 >
  Order allow,deny
  Allow from all
  Satisfy all
</IfVersion>
<IfVersion >= 2.3>
  Require all granted
</IfVersion>
  ErrorDocument 403 "Authentication error"
</Directory> 
```

登录后，我被重定向到 401“授权错误”页面。这里有什么理由吗？我在想也许我的其他 .conf 文件会导致一些冲突。

在 httpd.conf 我有以下内容：

```
WSGIScriptAlias / /opt/bitnami/apps/django/scripts/djangoApp.wsgi
<Directory '/opt/bitnami/apps/django/django_projects/djangoApp'>
  Order allow,deny
  Allow from all
  Satisfy all
</Directory> 
```

这些片段的第一行是否会在此处引起冲突，从而阻止我登录？我不确定，但他们看起来都在创建一个类似的别名。

如果我应该提供更多详细信息，请告诉我。

这是日志中的错误：

```
[Wed Jan 09 03:49:49 2013] [error] [client X.X.X.X] client denied by server configuration: /opt/bitnami/apache2/htdocsindex.html
[Wed Jan 09 03:49:49 2013] [error] [client X.X.X.X] client denied by server configuration: /opt/bitnami/apache2/htdocsfavicon.ico
[Wed Jan 09 03:50:28 2013] [error] [client X.X.X.X] client denied by server configuration: /opt/bitnami/apache2/htdocsindex.html
[Wed Jan 09 03:50:28 2013] [error] [client X.X.X.X] client denied by server configuration: /opt/bitnami/apache2/htdocsfavicon.ico
[Wed Jan 09 03:50:28 2013] [error] [client X.X.X.X] client denied by server configuration: /opt/bitnami/apache2/htdocsfavicon.ico 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:11:54.143

我会尝试一些改变。

首先，您的第一个`Alias / "/opt/bitnami/apache2/htdocs"`很容易被`DocumentRoot /opt/bitnami/apache2/htdocs`指令替换。

然后你有几个别名，都用于“/”。而不是像 Alias 和 AliasMap 这样的 url-filesystem 映射指令，我会简单地使用 Location 指令进行安全设置。

```
<Location />
  (... Auth basic stuff)
<Location> 
```

通过使用**Location**您可以处理 url 而不是文件系统映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:32:45.353

我认为你的问题是两件事之一：

### 潜在的解决方案#1

只是运行 Apache 的用户无权访问该`/opt/bitnami/apache2/htdocs`目录。

有关处理“客户端被服务器配置错误拒绝”的更多详细信息，请参阅此页面：[http ://wiki.apache.org/httpd/ClientDeniedByServerConfiguration](http://wiki.apache.org/httpd/ClientDeniedByServerConfiguration)

Check to see what user/groups are set on the `/opt/bitnami` directory tree. Make sure that they're friendly to the Apache user.

### potential solution #2

Also if you look at your error messages the path is missing a '/' after htdocs. See the paths:

```
/opt/bitnami/apache2/htdocsindex.html
/opt/bitnami/apache2/htdocsfavicon.ico 
```

I think you need to add a trailing slash, '/', to your `Alias` line like so:

```
Alias / "/opt/bitnami/apache2/htdocs/" 
```

# drupal - drupal 获取安装drupal的目录的路径

> ID：14227658
> 
> 赞同：1
> 
> 时间：2013-01-09T03:03:06.833
> 
> 标签：drupal

在我拥有的各种环境中，相同的 Drupal 映像并不总是安装在根目录中。

如何检索到drupal 文件`http://`所在目录的路径？`index.php`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:58:34.433

你可以通过

```
global $base_url; 
```

[参考](http://api.drupal.org/api/drupal/developer!globals.php/global/base_url/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:33:55.070

您可以通过drupal 中定义的全局变量- Amol 提到的$base_url 来获取它，也可以直接访问它$GLOBALS['base_url']。

如果您需要文件系统路径，则可以使用 getcwd()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T04:02:45.877

您可以使用[base_path()](http://api.drupal.org/api/drupal/includes!common.inc/function/base_path/7)函数来获取子文件夹或[$GLOBALS['base_path']](http://api.drupal.org/api/drupal/developer!globals.php/global/base_path/7)变量来获取 Drupal 安装的基本路径。

[有关全局变量的更多信息。](http://api.drupal.org/api/drupal/globals/7)

# php - symfony 2中的文件上传错误

> ID：14227666
> 
> 赞同：1
> 
> 时间：2013-01-09T03:03:38.973
> 
> 标签：php, forms, file-upload, symfony, doctrine-orm

根据这个食谱食谱，尝试设置附加到 Doctrine 实体的文件上传表单：

[http://symfony.com/doc/2.0/cookbook/doctrine/file_uploads.html](http://symfony.com/doc/2.0/cookbook/doctrine/file_uploads.html)

这是我的实体/模型类：

```
<?php

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\HttpFoundation\File\UploadedFile;

/**
 * Invoice
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="TechPeople\InvoiceBundle\Entity\InvoiceRepository")
 * @ORM\HasLifecycleCallbacks
 */
class Invoice
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var integer
     *
     * @ORM\ManyToOne(targetEntity="User", inversedBy="user_invoices")
     * @ORM\JoinColumn(name="vendor_id", referencedColumnName="id")
     */
    private $vendor;

    /**
     * @var string
     *
     * @ORM\Column(name="month", type="string", length=255)
     */
    private $month;

    /**
     * @var integer
     *
     * @ORM\Column(name="year", type="smallint")
     */
    private $year;

    /**
     * @var boolean
     *
     * @ORM\Column(name="expenses", type="boolean")
     */
    private $expenses;

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="due", type="date")
     */
    private $due;

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="paid", type="date")
     */
    private $paid;

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="created", type="datetime")
     */
    private $created;

    /**
     * @var float
     *
     * @ORM\Column(name="expense_amount", type="decimal")
     */
    private $expense_amount;

    /**
     * @var float
     *
     * @ORM\Column(name="total_amount", type="decimal")
     */
    private $total_amount;

    /**
     * @var UploadedFile
     *
     * @Assert\File(maxSize="6000000")
     */
    public $attachment;

    /**
     * @var string
     *
     * @ORM\Column(name="attachment_path", type="string", length=255)
     */
    private $attachment_path;

    /**
     * @ORM\OneToMany(targetEntity="InvoiceItem", mappedBy="invoice")
     */
    protected $invoice_items;

    /**
     * Constructor for Invoice Entity class
     */
    public function __construct()
    {
        $this->products = new ArrayCollection();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set month
     *
     * @param string $month
     * @return Invoice
     */
    public function setMonth($month)
    {
        $this->month = $month;

        return $this;
    }

    /**
     * Get month
     *
     * @return string 
     */
    public function getMonth()
    {
        return $this->month;
    }

    /**
     * Set year
     *
     * @param integer $year
     * @return Invoice
     */
    public function setYear($year)
    {
        $this->year = $year;

        return $this;
    }

    /**
     * Get year
     *
     * @return integer 
     */
    public function getYear()
    {
        return $this->year;
    }

    /**
     * Set expenses
     *
     * @param boolean $expenses
     * @return Invoice
     */
    public function setExpenses($expenses)
    {
        $this->expenses = $expenses;

        return $this;
    }

    /**
     * Get expenses
     *
     * @return boolean 
     */
    public function getExpenses()
    {
        return $this->expenses;
    }

    /**
     * Set due
     *
     * @param \DateTime $due
     * @return Invoice
     */
    public function setDue($due)
    {
        $this->due = $due;

        return $this;
    }

    /**
     * Get due
     *
     * @return \DateTime 
     */
    public function getDue()
    {
        return $this->due;
    }

    /**
     * Set paid
     *
     * @param \DateTime $paid
     * @return Invoice
     */
    public function setPaid($paid)
    {
        $this->paid = $paid;

        return $this;
    }

    /**
     * Get paid
     *
     * @return \DateTime 
     */
    public function getPaid()
    {
        return $this->paid;
    }

    /**
     * Set created
     *
     * @param \DateTime $created
     * @return Invoice
     */
    public function setCreated($created)
    {
        $this->created = $created;

        return $this;
    }

    /**
     * Get created
     *
     * @return \DateTime 
     */
    public function getCreated()
    {
        return $this->created;
    }

    /**
     * Set expense_amount
     *
     * @param float $expenseAmount
     * @return Invoice
     */
    public function setExpenseAmount($expenseAmount)
    {
        $this->expense_amount = $expenseAmount;

        return $this;
    }

    /**
     * Get expense_amount
     *
     * @return float 
     */
    public function getExpenseAmount()
    {
        return $this->expense_amount;
    }

    /**
     * Set total_amount
     *
     * @param float $totalAmount
     * @return Invoice
     */
    public function setTotalAmount($totalAmount)
    {
        $this->total_amount = $totalAmount;

        return $this;
    }

    /**
     * Get total_amount
     *
     * @return float 
     */
    public function getTotalAmount()
    {
        return $this->total_amount;
    }

    /**
     * Set attachment
     *
     * @param string $attachment
     * @return Invoice
     */
    public function setAttachment($attachment)
    {
        $this->attachment = $attachment;

        return $this;
    }

    /**
     * Get attachment
     *
     * @return string 
     */
    public function getAttachment()
    {
        return $this->attachment;
    }

    /**
     * Set vendor
     *
     * @param \TechPeople\InvoiceBundle\Entity\User $vendor
     * @return Invoice
     */
    public function setVendor(\TechPeople\InvoiceBundle\Entity\User $vendor = null)
    {
        $this->vendor = $vendor;

        return $this;
    }

    /**
     * Get vendor
     *
     * @return \TechPeople\InvoiceBundle\Entity\User 
     */
    public function getVendor()
    {
        return $this->vendor;
    }

    /**
     * Add invoice_items
     *
     * @param \TechPeople\InvoiceBundle\Entity\InvoiceItem $invoiceItems
     * @return Invoice
     */
    public function addInvoiceItem(\TechPeople\InvoiceBundle\Entity\InvoiceItem $invoiceItems)
    {
        $this->invoice_items[] = $invoiceItems;

        return $this;
    }

    /**
     * Remove invoice_items
     *
     * @param \TechPeople\InvoiceBundle\Entity\InvoiceItem $invoiceItems
     */
    public function removeInvoiceItem(\TechPeople\InvoiceBundle\Entity\InvoiceItem $invoiceItems)
    {
        $this->invoice_items->removeElement($invoiceItems);
    }

    /**
     * Get invoice_items
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getInvoiceItems()
    {
        return $this->invoice_items;
    }

    /**
     * Get path for attachment
     *
     * @param string $type Can return web path, or absolute path, web is default
     * @return null|string
     */
    public function getAttachmentPath($type='web')
    {
        if($type == 'absolute') {
            return null === $this->attachment_path
                ? null
                : $this->getUploadRootDir().'/'.$this->attachment_path;
        } else {
            return null === $this->attachment_path
                ? null
                : $this->getUploadDir().'/'.$this->attachment_path;
        }
    }

    protected function getUploadRootDir()
    {
        // the absolute directory path where uploaded
        // documents should be saved
        return __DIR__.'/../../../../web/'.$this->getUploadDir();
    }

    protected function getUploadDir()
    {
        // get rid of the __DIR__ so it doesn't screw up
        // when displaying uploaded doc/image in the view.
        return 'uploads/invoice/attachments';
    }

    /**
     * @ORM\PrePersist()
     * @ORM\PreUpdate()
     */
    public function preUpload()
    {
        if (null !== $this->attachment) {
            // do whatever you want to generate a unique name
            $filename = sha1(uniqid(mt_rand(), true));
            $this->attachment = $filename.'.'.$this->attachment->guessExtension();
        }
    }

    /**
     * @ORM\PostPersist()
     * @ORM\PostUpdate()
     */
    public function upload()
    {
        if (null === $this->attachment) {
            return;
        }

        // if there is an error when moving the file, an exception will
        // be automatically thrown by move(). This will properly prevent
        // the entity from being persisted to the database on error
        $this->attachment->move($this->getUploadRootDir(), $this->path);

        unset($this->attachment);
    }

    /**
     * @ORM\PostRemove()
     */
    public function removeUpload()
    {
        if ($file = $this->getAttachmentPath('absolute')) {
            unlink($file);
        }
    }
} 
```

当我尝试提交编辑表单时出现以下错误（编辑表单是由学说生成的：generate:crud）：

```
Fatal error: Call to a member function move() on a non-object 
```

可能与以下内容相同：

[Symfony 形式。上传文件](https://stackoverflow.com/questions/11704525/symfony-forms-file-upload)

但这个问题没有答案。我希望发布第二个问题不会违反礼仪。

我对 Symfony2 还很陌生，只是想了解自己的方法，这让我很困惑。我可以发布您需要的任何其他信息，请告诉我什么。

这是表单类：

```
<?php

namespace TechPeople\InvoiceBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class InvoiceType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('month')
            ->add('year')
            ->add('expenses')
            ->add('due')
            ->add('paid')
            ->add('created')
            ->add('expense_amount')
            ->add('total_amount')
            ->add('attachment')
            ->add('vendor')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'TechPeople\InvoiceBundle\Entity\Invoice'
        ));
    }

    public function getName()
    {
        return 'techpeople_invoicebundle_invoicetype';
    }
} 
```

这是控制器：

```
<?php

namespace TechPeople\InvoiceBundle\Controller;

use Symfony\Component\HttpFoundation\Request;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;

use TechPeople\InvoiceBundle\Entity\Invoice;
use TechPeople\InvoiceBundle\Form\InvoiceType;

/**
 * Invoice controller.
 *
 */
class InvoiceController extends Controller
{
    /**
     * Lists all Invoice entities.
     *
     */
    public function indexAction()
    {
        $em = $this->getDoctrine()->getManager();

        $entities = $em->getRepository('TechPeopleInvoiceBundle:Invoice')->findAll();

        return $this->render('TechPeopleInvoiceBundle:Invoice:index.html.twig', array(
            'entities' => $entities,
        ));
    }

    /**
     * Finds and displays a Invoice entity.
     *
     */
    public function showAction($id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('TechPeopleInvoiceBundle:Invoice')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Invoice entity.');
        }

        $deleteForm = $this->createDeleteForm($id);

        return $this->render('TechPeopleInvoiceBundle:Invoice:show.html.twig', array(
            'entity'      => $entity,
            'delete_form' => $deleteForm->createView(),        ));
    }

    /**
     * Displays a form to create a new Invoice entity.
     *
     */
    public function newAction()
    {
        $entity = new Invoice();
        $form   = $this->createForm(new InvoiceType(), $entity);

        return $this->render('TechPeopleInvoiceBundle:Invoice:new.html.twig', array(
            'entity' => $entity,
            'form'   => $form->createView(),
        ));
    }

    /**
     * Creates a new Invoice entity.
     *
     */
    public function createAction(Request $request)
    {
        $entity  = new Invoice();
        $form = $this->createForm(new InvoiceType(), $entity);
        $form->bind($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $em->persist($entity);
            $em->flush();

            return $this->redirect($this->generateUrl('invoice_show', array('id' => $entity->getId())));
        }

        return $this->render('TechPeopleInvoiceBundle:Invoice:new.html.twig', array(
            'entity' => $entity,
            'form'   => $form->createView(),
        ));
    }

    /**
     * Displays a form to edit an existing Invoice entity.
     *
     */
    public function editAction($id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('TechPeopleInvoiceBundle:Invoice')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Invoice entity.');
        }

        $editForm = $this->createForm(new InvoiceType(), $entity);
        $deleteForm = $this->createDeleteForm($id);

        return $this->render('TechPeopleInvoiceBundle:Invoice:edit.html.twig', array(
            'entity'      => $entity,
            'edit_form'   => $editForm->createView(),
            'delete_form' => $deleteForm->createView(),
        ));
    }

    /**
     * Edits an existing Invoice entity.
     *
     */
    public function updateAction(Request $request, $id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('TechPeopleInvoiceBundle:Invoice')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Invoice entity.');
        }

        $deleteForm = $this->createDeleteForm($id);
        $editForm = $this->createForm(new InvoiceType(), $entity);
        $editForm->bind($request);

        if ($editForm->isValid()) {
            $em->persist($entity);
            $em->flush();

            return $this->redirect($this->generateUrl('invoice_edit', array('id' => $id)));
        }

        return $this->render('TechPeopleInvoiceBundle:Invoice:edit.html.twig', array(
            'entity'      => $entity,
            'edit_form'   => $editForm->createView(),
            'delete_form' => $deleteForm->createView(),
        ));
    }

    /**
     * Deletes a Invoice entity.
     *
     */
    public function deleteAction(Request $request, $id)
    {
        $form = $this->createDeleteForm($id);
        $form->bind($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $entity = $em->getRepository('TechPeopleInvoiceBundle:Invoice')->find($id);

            if (!$entity) {
                throw $this->createNotFoundException('Unable to find Invoice entity.');
            }

            $em->remove($entity);
            $em->flush();
        }

        return $this->redirect($this->generateUrl('invoice'));
    }

    private function createDeleteForm($id)
    {
        return $this->createFormBuilder(array('id' => $id))
            ->add('id', 'hidden')
            ->getForm()
        ;
    }
} 
```

这些都是非常基本的东西，直接来自文档，因为，正如我所说，我只是在学习 Symfony。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:30:46.267

$this->attachment 必须是 UploadedFile 对象。

但是在您的方法 preUpload() 中，您犯了一个错误并将其覆盖为字符串：

```
$this->attachment = $filename.'.'.$this->attachment->guessExtension(); 
```

然后，调用 upload() 方法并检查 $this->attachment 是否不为空，这是真的，因为它是一个字符串：

```
if (null === $this->attachment) {
     return;
} 
```

并在字符串上执行 ->move() 会显示错误；)

所以要回答，在 preUpload() 方法中替换这一行：

```
$this->attachment= $filename.'.'.$this->attachment->guessExtension(); 
```

为了：

```
$this->path = $filename.'.'.$this->attachment->guessExtension(); 
```

# html - 如何在 yii 中使用单选按钮列表隐藏显示 div

> ID：14227668
> 
> 赞同：1
> 
> 时间：2013-01-09T03:03:53.777
> 
> 标签：html, yii, show-hide, radiobuttonlist

我有一个问题我需要做的是，当在单选按钮列表上选择是时，它将显示一个 div，如果我选择否，它将保持隐藏

```
<td><?php echo $form->labelEx($model,'Is Scholarship?');?></td>
<!-- SCHOLAR -->
<td><?php echo $form->radioButtonList($model,'is_scholar',
                          array('Yes'=>'Yes', 'No'=>'No'));?>
<td><?php echo $form->error($model,'is_scholar');?></td> 
```

在我看来：

```
<div class="toggle-form-wrapper" style="display:none"  id="scholar">
  sd asds dasd asd asd asd sd asd asd
</div> 
```

我使用了不同的方法，但最终磨损了，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:05:18.353

您可以使用 JQuery。这很容易。Fro ex：
假设你有一个 id 为 'div1' 的 div。
而您的是和否按钮 id 是“是”和“否”对应的。只需编写以下 Jquery 即可正常工作：

$('#yes').click(function(){
$('#div1').show();
});

$('#no').click(function(){
$('#div1').hide();
});

希望它会帮助你。

# cron - “无法打开输入文件”crons 错误

> ID：14227669
> 
> 赞同：0
> 
> 时间：2013-01-09T03:03:58.100
> 
> 标签：cron

Stack Overflow 上还有其他一些关于此的问题，我确实理解这一点，但没有一个问题让我知道为什么我会得到`"Could not open input file"`.

我已经设置好了，所以每次运行 crons 时我都会收到一封电子邮件（我使用 cPanal 来设置 crons），但我得到的只是：

`Could not open input file: /home/methodjs/classified/emailNotifications.php`

因为是我第一次使用 crons 作业，所以我不知道这意味着什么或如何修复它。

我的命令行是：

`/usr/local/bin/php $HOME/classified/emailNotifications.php`

难道我做错了什么？谢谢你的帮助。顺便说一句，我确信那是通向 PHP 的正确途径，因为这就是我从我的主机那里得到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T10:03:04.297

确保文件位于此处：

```
 /home/methodjs/classified/emailNotifications.php 
```

尝试从命令行执行：

```
/usr/local/bin/php /home/methodjs/classified/emailNotifications.php 
```

出现什么？

确保您的 php 文件具有执行权限

```
chmod 755 /home/methodjs/classified/emailNotifications.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-16T10:56:07.423

错误出现在给定路径中的文件不存在或未为文件设置适当的权限。可以通过导航到 path 和 ll 检查权限来检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-10T16:42:37.103

全部，

从 Ubuntu 更新后，这个问题开始出现在我所有的 20 台 Kubuntu 机器上！由于 Ubuntu 是基于 Debian 的，不确定是 Debian 还是 Ubuntu 应该受到责备，所以调查一下！

Debian 用户，如果这也影响到您，请回复，以便我们进一步调查！

干杯!

# php - 多文件上传器，只发送一个文件

> ID：14227677
> 
> 赞同：1
> 
> 时间：2013-01-09T03:05:23.777
> 
> 标签：php, html

我已经尝试了将近两天，但它不起作用，我有一个简单的输入文件（在 php 中）

```
echo '<input id="files" type="file" name="ufile[]" multiple="multiple"/>'; 
```

它假设同时将多个文件发送到另一个页面，我接收文件的代码如下：

```
for($i=0; $i<count($_FILES['ufile']['name']); $i++) {
  //Get the temp file path
  $tmpFilePath = $_FILES['ufile']['tmp_name'][$i];

  //Make sure we have a filepath
  if ($tmpFilePath != ""){
    //Setup our new file path
    $newFilePath = 'upload/'. $_FILES['ufile']['name'][$i];

    //Upload the file into the temp dir
    if(move_uploaded_file($tmpFilePath, $newFilePath)) {

      //Handle other code here

    }
  }
} 
```

但它只能接收一个文件，我也尝试使用复制，它给出了相同的结果，我尝试使用计数方法 print_r 和 var_dump 来计算文件数：

```
$a=count($_FILES['ufile']['name']);
print_r($a);
var_dump($a); 
```

而且它们也都只显示文件。关于浏览器的兼容性，我已经用少数浏览器尝试过，包括最新版本的 Firefox、chrome 和...

预先感谢 **我编辑这篇文章，包括输出（var_dump）并添加html表单下面是javascript代码，在其中预览我使用输入文件选择的图像。** window.onload = 函数（）{

```
 if(window.File && window.FileList && window.FileReader)
    {
        var filesInput = document.getElementById("files");

        filesInput.addEventListener("change", function(event){

            var files = event.target.files; //FileList object
            var output = document.getElementById("result");

            for(var i = 0; i< files.length; i++)
            {
                var file = files[i];

                if(!file.type.match('image'))
                  continue;

                var picReader = new FileReader();

                picReader.addEventListener("load",function(event){

                    var picFile = event.target;

                    var div = document.createElement("div");

                    div.innerHTML = "<img class='thumbnail' src='" + picFile.result + "'" +
                            "title='" + picFile.name + "'/>";

                    output.insertBefore(div,null);            

                });

                picReader.readAsDataURL(file);
            }                               

        });
    }
    else
    {
        console.log("not supported");
    }
}

    </script> 
```

**这是我的 html 表单：**

```
echo '<form action="Data.php" method="post" enctype="multipart/form-data" name="form1" id="form1">';

echo'
<label for="files">Add image: </label>';

echo    '<input id="files" type="file" name="ufile[]" multiple/>';
    echo '
    <output id="result" />';

echo '<input type="submit" name="submit" value="Submit"id="newbutton" style="width:100px;height:30px" />';

</form> 
```

最后是 vardump 的结果

```
Array ( [ufile] => Array ( [name] => Array ( [0] => Awesoem-Arrow-Facebook-Timeline-Cover_02-@-GenCept.jpg ) [type] => Array ( [0] => image/jpeg ) [tmp_name] => Array ( [0] => C:\xampp\tmp\php6BDF.tmp ) [error] => Array ( [0] => 0 ) [size] => Array ( [0] => 120664 ) ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:30:46.653

在这里，精简到基本要素，是我过去在 PHP 中处理相同任务的方式：

```
if (isset($_FILES['name'])){
    $maxFiles = 4; 
    $counter = 0;
         while (is_uploaded_file($_FILES['name']['tmp_name'][$counter])){
              /*
                      do your magic with each file here
                  */
                  //remove the temp file after you're done with it
                  unlink ($_FILES['name']['tmp_name'][$counter]);
                  $counter++;
            }
} 
```

因此，您无需计算预先上传的文件总数，而是继续遍历 files 数组，直到没有更多文件为止。如果这对你不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:30:27.850

一个“文件”类型的输入字段只能包含一个文件。您只使用一个输入字段吗？

# php - 背景图片不会在 iOS 上显示，但在其他浏览器上显示正常

> ID：14227678
> 
> 赞同：0
> 
> 时间：2013-01-09T03:05:46.103
> 
> 标签：php, html, css

我们在 Magento 网站上有一个背景，由于内容的数量，它可以根据需要进行扩展。它似乎在 PC 和（希望是 Mac）上运行良好。但在任何 iOS 设备上，都不会显示白色背景。

我已经附上了两张截图——一张是它在普通 PC 浏览器中的样子，另一张是它在 iPhone 上的样子。

这是我们的网站： [http ://tinyurl.com/arfpf7g](http://tinyurl.com/arfpf7g)

这是一个直接指向 iOS 设备上未显示的图像的链接：http: [//tinyurl.com/bcovmvg](http://tinyurl.com/bcovmvg)

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:15:59.417

您有一个名为 .box_top 的类。里面有一个浮点数：left; 我不知道为什么，但尝试删除它并用溢出替换它：隐藏。至少在 FireFox 和 IE9 中是这样。

```
.box_top {
    background: url("../images/box_top.png") no-repeat scroll center top transparent;
    display: block;
    overflow: hidden;
    width: 1002px;
} 
```

另外，删除边距：0 0 -5px。这会在边框外侧的每个框的底部产生一个小的灰色阴影。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:45:56.933

这是 iOS 6.0 中的一个新错误，其中未在“隔行扫描”关闭的情况下保存的 PNG 图像不显示，或者有时是完全黑色的。尝试将“隔行扫描”设置为“关闭”保存您的 PNG 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:24:33.840

为什么该图像不会在 iOS 中显示，这并不神秘，图像尺寸为 978x10000 像素（是的 10,000）。尽管它在磁盘上只有 167 kB，但当扩展到内存时，它是巨大的。

来自[Safari Web 内容指南](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/CreatingContentforSafarioniPhone/CreatingContentforSafarioniPhone.html)：

> 对于 RAM 小于 256 MB 的设备，解码的 GIF、PNG 和 TIFF 图像的最大大小为 3 兆像素，对于 RAM 大于或等于 256 MB 的设备，最大大小为 5 兆像素。
> 
> 也就是说，对于 RAM 小于 256 MB 的设备，请确保 width * height ≤ 3 * 1024 * 1024。请注意，解码后的大小远大于图像的编码大小。

除了不显示在 iOS Safari 上之外，您肯定还会在其他所有浏览器上消耗大量内存。当然，您可以将图像的“顶部”和“侧面”部分分开并`background-repeat`用于平铺侧面。没有理由让那个东西的“侧面”部分的高度超过 50 像素。

这不是隔行扫描的问题，图像是在[没有隔行扫描的情况下编码的](https://gist.github.com/steveax/5017337)

# php - 如果语句不适用于 AND

> ID：14227679
> 
> 赞同：0
> 
> 时间：2013-01-09T03:05:49.467
> 
> 标签：php, if-statement, operators

我正在努力确保我的 twitter 提要以某种方式提供，缓存的或新的。我正在使用下面的代码来尝试确保缓存文件是否旧，此外，如果同时我的 twitter 速率限制中还有足够的尝试次数。问题是该声明似乎无法正常工作，但我不知道为什么。我已经尝试使用运算符'&&'和'AND'，但都不起作用。任何想法？

```
$json = file_get_contents("http://api.twitter.com/1/account/rate_limit_status.json", true);
$decode = json_decode($json, true);
$twitter_rate_remaining = $decode['remaining_hits'];

if(((time()-filectime($file)) > 1800) && ($twitter_rate_remaining > 5)) { //do something } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:15:44.480

好的，我想通了。我的函数中没有这个。我在外面有。嗬！

$json = file_get_contents("http://api.twitter.com/1/account/rate_limit_status.json", true); $decode = json_decode($json, true); $twitter_rate_remaining = $decode['remaining_hits'];

所以我无法获得 $twitter_rate_remaining 值，直到我将它移入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:12:18.300

注意：我们不知道您的问题是什么 $file - 它来自哪里？您使用的是什么操作系统和文件系统？

但是，我怀疑您想使用 filemtime 来检查缓存文件的更新。

它与 && 或 AND 无关，但您的两个条件的布尔值是什么 - 这就是布尔逻辑的含义。如果其中任何一个值是假的，那么整个测试将是假的。

做一些调试：

```
var_dump(time());
var_dump(filectime($file));
var_dump(time() - filectime($file));

var_dump(time()-filectime($file)) > 1800); // output boolean true or false

var_dump($twitter_rate_remaining);

var_dump($twitter_rate_remaining > 5); // output boolean true or false;

var_dump((time()-filectime($file)) > 1800) && ($twitter_rate_remaining > 5)); // output boolean true or false 
```

这样，您可以看到哪些条件是错误的。

# java - 从另一种形式更新面板的primefaces ajax

> ID：14227681
> 
> 赞同：7
> 
> 时间：2013-01-09T03:06:02.587
> 
> 标签：java, ajax, jsf-2, primefaces, panel

我这里有一些代码：

```
<f:view>
    <h:form id="formA">
        <p:treeTable id="tree">
            <p:ajax event="select" listener="..." update="mustRefresh" />  
            ...
        </p:treeTable>
    </h:form>
    <h:form id="formB">
        <p:panel id="mustRefresh"> ... </p:panel>

    </h:form>   
</f:view> 
```

当用户在 treeTable(formA) 上选择一条记录时，它的详细信息将显示在 formB 上并准备好进行编辑。我的麻烦是 update="mustRefresh" 不起作用，它会抛出这样的异常：

```
javax.faces.FacesException: Cannot find component with identifier "mustRefresh" referenced from "A4578:formA:tree". 
```

我尝试使用@form、formB、:formB 和:mustRefresh，但它不起作用。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-09T06:28:27.423

由于`mustRefresh`在组件层次结构中，`formB`您应该使用以下方式引用它：

```
<p:ajax event="select" listener="..." update=":formB:mustRefresh" /> 
```

看看[UIComponentBase.findComponent](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponentBase.html#findComponent%28java.lang.String%29)是如何工作的。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-10T00:59:05.583

使用`update="@([id$=mustRefresh])"`-- 这将直接选择 displayPost。无需将其映射到任何东西。

# android - Android：将 latin-1 转换为 UTF8 nativley

> ID：14227687
> 
> 赞同：0
> 
> 时间：2013-01-09T03:07:01.137
> 
> 标签：android, utf-8

我有一个编码的 RSS 提要，它会导致我在 Android 中[的解析器](http://www.ingeniumblog.net/2012/01/making-a-slick-rss-reader-in-android/)`iso-8859-1`出现很多问题。有时它会显示为格式错误的数据，因为它无法正确读取字节并且会过早退出。我能够在我的网络服务器上设置一个 PHP 脚本，将提要转换为 UTF-8：

```
<?php
header('Content-type: text/xml');
$url = urldecode($_GET['url']);
$str = file_get_contents($url);
$utf8 = utf8_encode($str);
echo $utf8;
?> 
```

它工作得很好。但是，我想让应用程序成为一个独立的实体，这样无论我是否支付账单，它都会运行。这个过程也需要明显的速度。

**有没有办法可以在 Android 中对 latin-1 输入流进行 utf-8 编码？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:11:49.247

PHP 和 Java 在这一点上完全不同，PHP 字符串是字节数组，Java 字符串是真正的字符串，Java 对字节数组有单独的机制。您的 PHP 解决方案仅在 RSS 采用 ISO-8859-1 时才有效，您可能可以通过使用 Windows-1252 来改进它，但它仍然不适用于实际的 UTF-8 RSS 提要。

所以你真正需要改变的是如何在 Android 中解码对字符串的响应。你还没有显示代码。您将阅读 RSS 提要的 Content-Type 标头或仅足以阅读编码属性，或默认解码为 Windows-1252。就像浏览器一样。

# javascript - waitForKeyElements(); - 在 Chrome 扩展程序的弹出窗口中停止脚本触发？

> ID：14227689
> 
> 赞同：0
> 
> 时间：2013-01-09T03:07:20.230
> 
> 标签：javascript, google-chrome, google-chrome-extension, content-script

[这个问题是另一个问题](https://stackoverflow.com/questions/14112730/javascript-not-always-working-in-chrome-extension-when-should-i-run-it)的后续问题，需要提出一个新的帖子，所以如果我提到的事情可能在没有阅读其他问题的情况下不清楚，请原谅我。

使用实用程序[waitForKeyElements()](https://gist.github.com/2625891)时，我遇到了一个问题，其中 a`div`包含在同一 URL 中包含的小弹出窗口中。我的扩展程序目前正在[Twitter](http://twitter.com/)站点上运行，我的意图是`div`将个人资料页面（例如[http://twitter.com/todayshow](http://twitter.com/todayshow)）中包含的 a 移到`div`页面上的另一个之上。我这样做是`waitForKeyElements()`因为使用此实用程序解决了一些加载问题。

但是，在个人资料页面上，您可以单击指向另一个用户名的链接，该链接会弹出一个小窗口（在同一窗口/选项卡内，在同一 URL 上），显示有关他们的一些信息和一些以前的推文。这里的问题是相同的`div`内容出现在此弹出窗口中，然后移动到弹出窗口后面的主页，它不应该出现在此处。在个人资料页面上，可以通过将`false`参数插入来停止`waitForKeyElements()`，但是在非个人资料页面上，仍然可以激活此弹出窗口，然后将其移至主页，因为`div`我希望将其移至上方个人资料页面仍然存在于此，导致明显的问题。

我想知道是否有办法解决这个问题，因为[Chrome 中的错误](http://code.google.com/p/chromium/issues/detail?id=100106)阻止了我排除这些页面。到目前为止（只是头脑风暴）我在想：

*   `div`在开始时不存在的页面上，创建一个空的意思`false`将处理该问题。
*   以某种方式阻止脚本在给定的 URL 上触发，尽管由于 Twitter 的工作方式，这将不得不监视`OnClick()`以及我不确定该怎么做的页面 URL（我认为）。
*   当弹出窗口出现时停止运行，但我几乎不知道从哪里开始。

任何帮助表示赞赏。与此问题相关的任何必要代码都可以在前两个链接中找到，我所面临的问题可以通过快速访问 Twitter 来查看。

**编辑：**插入`false`参数时，它在通过 URL 栏直接转到配置文件时起作用，如果您在配置文件上并使用链接访问配置文件，则不会插入脚本并且我的扩展程序失败。所以这也需要解决，或者完全需要一种替代方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:48:04.163

我有一个脑电波，我可以用它`insertAfter()`来插入`<div>`我最初在前面移动的，在`<div>`我最初移动之后。这`<div>`在弹出窗口中不存在，这意味着在不应该将任何内容移动到背面页面时。

关于上一个问题，我的代码现在很简单：

```
waitForKeyElements (
    "jQuery selector for div(s) you want to move", // Opposite to what it was.
    moveSelectDivs
);

function moveSelectDivs (jNode) {
     jNode.insertAfter ("APPROPRIATE JQUERY SELECTOR"); // Again, the opposite.
} 
```

这解决了我遇到的问题，我的扩展程序现在工作得很好，但是我会留下这个问题，以防将来有人回来。

# ruby-on-rails - 找不到 bootstrap-sass-2.2.2.0

> ID：14227690
> 
> 赞同：0
> 
> 时间：2013-01-09T03:07:32.773
> 
> 标签：ruby-on-rails, twitter-bootstrap, bundler

我正在尝试让 Rails 启动并运行。我能够`bundle install`成功运行，但是当我尝试使用启动服务器时，`rails s`我收到以下消息：

```
Could not find bootstrap-sass-2.2.2.0 
Run `bundle install` to install missing gems. 
```

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem 'rails_admin'
gem 'devise'
gem 'cancan'
gem 'simple_form'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
    # The following three gems are used for Bootstrap
    # See: https://github.com/seyhunak/twitter-bootstrap-rails
    #NOTE: For therubyracer, run "gem install libv8" and "gem install therubyracer -v '0.11.0'"

end

gem 'therubyracer', '0.11.0beta8'
gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
gem "less-rails"
gem 'bootstrap-sass', '~> 2.2.2.0'

gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T21:01:08.667

在运行 bundle install 之前，我在 gem 文件中添加了一个带有大写字母的 gem，这犯了一个错误。请注意，您添加的宝石没有任何大写字母。

**应该是这样的：**

```
gem 'bootstrap-sass' 
```

**不应该是这样的：**

```
gem 'Bootstrap-sass' 
```

# javascript - 按下其他 div 时刷新 div

> ID：14227692
> 
> 赞同：-1
> 
> 时间：2013-01-09T03:07:48.500
> 
> 标签：javascript, ruby-on-rails, refresh

当按下 div（刷新）时，我尝试刷新 div（容器）。

这是我的`index.html.erb`：

```
<div id="Container">

<ul id="sortable1" class="connectedSortable"> 
  <% @tasks_worker_todo.each do |task| %>
        <li class="ui-state-default">
            <div id="refresh"><%= best_in_place task, :done, :classes => 'highlight_on_success', type: :checkbox,collection: %w[No Yes] %></div> | 
            <%= task.admin_mail %> | 
            <%= task.task %>
        </li>
  <% end %>
</ul>

<br><br>

<ul id="sortable2" class="connectedSortable">
  <% @tasks_worker_done.each do |task| %>
        <li class="ui-state-highlight">
            <%= best_in_place task, :done,:classes => 'highlight_on_success', type: :checkbox, collection: %w[No Yes] %> | 
            <%= task.admin_mail %> | 
            <%= task.task %>
        </li>
  <% end %>
</ul>

</div> 
```

这就是我在我的尝试`application.js`：

```
$(document).ready(function() {
   $("#refresh").bind("click", function() {
     $("#Container").reload()
   });
}); 
```

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:16:59.933

您可以通过 重新加载页面`location.reload()`，但不能重新加载 DIV。您需要使用 iframe 或最好使用 AJAX 来完成您的任务。

# c - if 语句的段错误

> ID：14227699
> 
> 赞同：1
> 
> 时间：2013-01-09T03:08:55.530
> 
> 标签：c, segmentation-fault

我在 C 中有这段代码，

当 else 语句存在时，我尝试打印指针引用，我得到一个段错误。在 if(videoPlaying) 部分打印指针引用，打印效果很好，但在此之外的任何地方，它都会出现段错误。

omxPlayer 定义为 FILE *omxPlayer = NULL;

```
if(videoPlaying == 0)
{
    omxPlayer = popen("omxplayer diehard.mp4", "w");
    printf("%p\n", omxPlayer);
    videoPlaying = 1;
}
else
{
    printf("%p\n", omxPlayer);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:12:58.797

您应该检查代码的控制流，当`videoPlaying != 0`您很可能在该流中的某处损坏内存时。仅仅打印出损坏指针的地址应该仍然可以正常工作，因为地址始终有效，只有该地址中的内容无效，所以肯定还有更多错误并且在您显示的代码中没有看到。

您最好的选择是查看代码或在**valgrind**或任何此类内存分析工具下运行您的代码，它应该会指出哪里出了问题。

# css - Jquery-tab 异常阻止了我的 div

> ID：14227701
> 
> 赞同：0
> 
> 时间：2013-01-09T03:09:17.127
> 
> 标签：css, jquery-ui

我面临的问题是 jquery-tab 阻止了位于导航栏 id="NavBar" 上的主菜单类="oe_wrapper"。我希望 oe_menu 可以覆盖选项卡。这段代码有问题吗？提前致谢。

[http://jsfiddle.net/Sp7Mk/](http://jsfiddle.net/Sp7Mk/)

加价：

```
<div id="NavBar" style="width: 500px; height: 100px; background-color: blue;">
  <div class="oe_wrapper" style="background-color: red;">
                <ul id="oe_menu" class="oe_menu">
                    <li>
                        <a href="">Main Menu</a>
                        <div>
                            <ul>
                                <li class="oe_heading">
                                    My Account
                                </li>
                                <li><a href="#">Account Information</a></li>
                            </ul>
                            <ul>
                                <li class="oe_heading">
                                    Forms
                                </li>
                                <li><a href="#">F-1</a></li>
                                <li><a href="#">F-2</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
</div>

<div id="searchTab">
            <ul>
                <li><a href="#tabsAddll">Address</a></li>
                <li><a href="#tabsOther">Other</a></li>
            <li><a href="#tabsDis">Disabled</a></li>
            </ul>
            <div id="tabsAddll">
                <p>Address</p>
            </div>
            <div id="tabsOther">
                <p>Other</p>
            </div>
        <div id="tabsDis">
                <p>Disabled</p>
            </div>
        </div> 
```

js：

```
$(document).ready(function(){
        $( "#searchTab" ).tabs({ disabled: [ 2 ] });
    }); 
```

CSS：

```
*{ margin: 0 auto;}
body {
    background:#000000; 
}
ul.oe_menu{
    list-style:none;
    position:relative;
    float:right;
    clear:both;
   left: -400px;
}
ul.oe_menu > li{
    padding-bottom:2px;
    float:left;
    position:relative;
}
ul.oe_menu > li > a{
    display:block;
    background-color:#717171;
    color:#ffffff;
    text-decoration:none;
    font-weight:bold;
    font-size:12px;
    /* a link */
    width:90px;
    height:16px;
    padding:1.3px;
    margin:1px;
    text-shadow:0px 0px 1px #000;
    /*opacity:0.8;*/
    text-align: center !important;
}
ul.oe_menu > li > a:hover,
ul.oe_menu > li.selected > a{
    background:#fff;
    color:#101010;
    opacity:1.0;
}
.oe_wrapper ul.hovered > li > a{
    background:#fff;
    text-shadow:0px 0px 1px #FFF;
}
ul.oe_menu div{
    position:absolute;
    left:1px;
    background:#fff;
    width:668px;
    padding:30px;
}
ul.oe_menu div ul li a{
    text-decoration:none;
    color:#222;
    padding:2px 2px 2px 4px;
    margin:2px;
    display:block;
    font-size:12px;
}
ul.oe_menu div ul.oe_full{
    width:100%;
}
ul.oe_menu div ul li a:hover{
    background:#000;
    color:#fff;
}
ul.oe_menu li ul{
    list-style:none;
    float:left;
    width: 150px;
    margin-right:10px;
    text-align: left;
}
li.oe_heading{
    color:#aaa;
    font-size:16px;
    margin-bottom:10px;
    padding-bottom:6px;
    border-bottom:1px solid #ddd;
    width: 150px;
    text-align: left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:19:36.760

在行

```
<div id="NavBar" style="width: 500px; height: 100px; background-color: blue;"> 
```

您明确声明导航栏的高度为 100px，因此在 100px 之后，DOM 中的空间结束，下一个元素开始呈现。尝试将高度更改为 175 像素，因为我将它放在其他菜单的正下方。

# pdf - 分析pdf属性的pdf工具

> ID：14227706
> 
> 赞同：1
> 
> 时间：2013-01-09T03:09:24.477
> 
> 标签：pdf, pdf-generation

是否有任何 pdf 工具可以生成有关加载时间和内存使用情况的信息以在浏览器中显示 pdf 以及 pdf 中的总元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:03:55.887

不幸的是，并非如此。我已经完成了一些研究，不是针对浏览器中的 PDF，而是（也许这也是您正在查看的内容）移动设备上的 PDF。

有许多因素会起作用，并且在某种程度上可以对其进行测试：

*   PDF 中是否存在大图像以及它们的分辨率。这与内存使用直接相关。

*   图像压缩使用什么压缩方法。专门解压缩 JPEG-2000 图像会显着增加加载时间。更糟糕的是，由于 JPEG-2000 可以逐步解压缩，因此在图像完全解压缩和加载之前，它可能会呈现出非常糟糕的 PDF 外观（例如，这在一些较旧的平板电脑上特别难看）。

*   文档中使用的透明度效果有多复杂。

*   文档中使用了多少种字体。

*   在一个页面上使用了多少具有大量节点（点）的艺术线条对象（矢量元素）。

您可以在一定程度上使用 Acrobat Pro 测试文档中的内容（当您保存优化的 PDF 文件时，有一个隐藏得很好的工具可以审核哪些对象使用了 PDF 文档中的多少空间）。您还可以使用预检解决方案，例如 callas（我隶属于这家公司）的 pdfToolbox 或 enfocus 的 pitstop；这些工具将允许您获得包含自定义检查结果的报告，例如图像分辨率、压缩、矢量对象、色彩空间等。

# php - 使用 post、get 和函数

> ID：14227712
> 
> 赞同：0
> 
> 时间：2013-01-09T03:10:45.620
> 
> 标签：php, mysql, post, get

这是我的功能代码

```
function icerikduzenle($a,$b,$c)
{
global $veriyolu;
$menuid=$c;
$icerik=$b;
$icerik_id=$a;
$guncelle=mysql_query("update icerik set icerik='$icerik' , menu_id='$menu_id' where icerik_id='$icerik_id'",$veriyolu);

if($guncelle){
             echo "<script>alert(' İçerik düzenlendi! ')</script>";
             echo "<meta http-equiv='Refresh' content='0; URL=yonetim.php?menu=2'>";
             }else{
             echo "<script>alert(' !! İçerik düzenlenemedi !! ')</script>";
             echo "<meta http-equiv='Refresh' content='0; URL=yonetim.php?menu=2'>";             
             }
} 
```

我认为我对 _post vars 有问题。列出没有错误但不更新数据的数据

这是主要代码我不喜欢mysql中的连接表我使用了2个sql我认为post vars不会去任何地方

```
$iceriksql="select * from icerik order by menu_id asc";
$iceriksorgu= mysql_query($iceriksql);
echo "<table>";
while($iceriksonuc=mysql_fetch_array($iceriksorgu))
{
echo "<form method='post' action='yonetim.php?menu=2&icerikid={$iceriksonuc["icerik_id"]}&git=icerikduzenle'>";
$menusql= "select * from menu order by menu_id asc";
$menusorgu = mysql_query($menusql);
echo "<tr><td><select name='menu_id'>";
    while ($menusonuc=mysql_fetch_array($menusorgu))
    {
    if ($menusonuc['menu_id']==$iceriksonuc['menu_id'])
    {
    echo "<option value='{$menusonuc["menu_id"]}' selected>{$menusonuc["menu"]}</option>";
    }
    else
    {
    echo "<option value='{$menusonuc["menu_id"]}'>{$menusonuc["menu"]}</option>";
    }
    }
echo "</select></td>";
echo "<td><textarea name='icerik'>{$iceriksonuc["icerik"]}</textarea></td><td><input type='submit' name='submit' value='Düzenle' /></td></tr>";
echo "</form>";
}
echo "</table>"; 
```

这是我的代码的最后一部分

```
switch ($_GET['git']){ 
case "icerikduzenle";
icerikduzenle($_REQUEST['icerik_id'],$_REQUEST['icerik'],$_REQUEST['menu_id']);
break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:14:11.350

```
case "icerikduzenle"; 
```

必须

```
case "icerikduzenle": 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:16:05.010

尝试这个。大小写必须是冒号 (:)

```
switch ($_GET['git']){ 
    case "icerikduzenle" :
                 icerikduzenle($_REQUEST['icerik_id'],$_REQUEST['icerik'],$_REQUEST['menu_id']);
                 break;
} 
```

# c++ - 函数参数中缺少类型模板参数

> ID：14227721
> 
> 赞同：1
> 
> 时间：2013-01-09T03:12:29.737
> 
> 标签：c++, class, templates

为什么以下工作？

```
template<typename T> class example {
public:
    T val;
    example() {val=0;}
    example operator+(example ob) {
        example temp;
        temp.val = val+ob.val;
        return temp;
    }
};

int main() {
    example<int> a;
    a+a;
    return 0;
} 
```

如果我没有看到它编译我会说运算符重载应该如下：

```
example<T> operator+(example<T> ob {
    example<T> temp;
    temp.val = val+ob.val;
    return temp;
} 
```

另外，我尝试在 main 中更改以下内容：

```
example<int> a; 
```

到：

```
example a; 
```

但得到一个错误说“......缺少模板参数......”我的猜测是在类定义中，编译器将示例视为示例。但由于这只是一个猜测，我无法在任何地方确认，我想我会在这里问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:15:41.520

是的，当您在模板定义中时，可以省略模板参数（例如，不在 main 中，因为它在模板定义之外）。

省略时，参数将替换为*当前实例化*的参数。即，当您将模板实例化为 时，*模板定义*`example<int>`中所有出现的`example`没有模板参数的情况都将被替换为用于该实例化的目的。*`example<int>`*

 *来自标准（C++11，强调我的）：

> (14.6.2.1/1) 名称指的是**当前实例化**，如果它是
> 
> —**在类模板**、类模板的嵌套类、类模板的成员或类模板的嵌套类的成员的定义中，类模板**的注入类名（第 9 条）**或嵌套类，
> [...]

几节之后，标准给出了一个例子：

```
template <class T> class A {
  A*    p1;     // A is the current instantiation
  A<T>* p2;     // A<T> is the current instantiation

  /*...*/
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T03:17:39.597

这是因为`injected-class-name`（来自 9p2）：

> 类名被插入到在看到类名之后立即声明它的作用域中。类名也被插入到类本身的范围内；这被称为 **注入类名**。

从 14.6.1p1 开始：

> 像普通（非模板）类一样，类模板有一个注入类名（第 9 条）。注入的类名可以用作模板名或类型名。当它与模板参数列表一起使用时，作为模板模板参数的模板参数，或作为朋友类模板声明的详细类型说明符中的最终标识符，它指的是类模板本身. **否则，它相当于模板名称后跟 <> 中包含的类模板的模板参数。**

注入的类名是指`example<T>`允许简写版本的类本身的内部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T03:16:01.443

如果我正确理解您的问题，是的，在类定义中，您不需要将每个函数都设为类模板参数的模板。

实际上，如果您必须在类之外定义函数，则需要如下所示。

```
template<typename T>
example<T> example<T>::operator+(example<T> ob) { 
```

ps你应该改变论点`const example<T>& ob`以减少不必要的副本。*

# ipad - 无法在 iPad 应用程序上禁用点击突出显示颜色

> ID：14227724
> 
> 赞同：2
> 
> 时间：2013-01-09T03:12:53.673
> 
> 标签：ipad, safari, mobile-safari

我正在创建一个需要在 iPad 上查看的网页。

一切都很好，但每次我点击某个东西时，都会出现令人讨厌的黑色闪光。我尝试了很多解决方案：

```
html {
    -webkit-tap-highlight-color: rgba(0,0,0,0); 
    -webkit-user-select: none;
    -webkit-touch-callout:none;
} 

<script type="text/javascript">
    document.documentElement.style.webkitTouchCallout = "none";
</script> 
```

甚至将其添加到元素本身：

```
.viewCont {
    width: 1000px;
    height: 690px;
    position: absolute;
    background-repeat: no-repeat;
    -webkit-tap-highlight-color: rgba(0,0,0,0); 
    -webkit-user-select: none;
    -webkit-touch-callout:none;
} 
```

当我在我的 iPad 上的 Safari 中查看它时它可以工作，但是当我将它作为一个独立的仪表板应用程序时，闪烁又回来了。

有人有提示或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:54:06.520

您必须将此应用于所有元素，而不仅仅是 HTML 标记。像这样试试

```
html * {
    -webkit-tap-highlight-color: rgba(0,0,0,0); 
    -webkit-user-select: none;
    -webkit-touch-callout:none;
} 
```

# nomachine-nx - nxwebplayer 在 nxserver4 linux 下失败

> ID：14227729
> 
> 赞同：1
> 
> 时间：2013-01-09T03:13:31.093
> 
> 标签：nomachine-nx

在 nxwebplayer 会话开始时（nxserver4，在 debian 下），与 display:0 的连接失败（X 服务器）：

```
nxagentShadowInit：错误！无法遮蔽显示。伪彩色
不支持视觉类。仅支持 TrueColor 视觉效果。

```

我修改了/etc/X11/xorg.conf，没有结果：

```
Section "Screen"
SubSection "Display"
Depth 24
Visual TrueColor
EndSubSection
EndSection 
```

感谢您的想法和评论

# javascript - 你会推荐什么客户端javascript缓存库？

> ID：14227730
> 
> 赞同：4
> 
> 时间：2013-01-09T03:13:40.613
> 
> 标签：javascript, caching, client-side

我正在寻找一个客户端 javascript 缓存库

理想情况下，这是我想要的功能列表

*   没有依赖关系
*   简单的
*   时间到期支持
*   如果可用，请使用 localStorage，并回退到数组
*   积极发展

我找到了一些选项，但它们似乎并不是特别活跃

SO的相关问题也有点古老......

[https://github.com/monsur/jscache](https://github.com/monsur/jscache)（这个是最有前途的）

[http://www.dustindiaz.com/javascript-cache-provider](http://www.dustindiaz.com/javascript-cache-provider)

[你能推荐什么 JavaScript 缓存](https://stackoverflow.com/questions/1322694/what-javascript-cache-can-you-recommend)

[http://sourceforge.net/projects/jsoc/](http://sourceforge.net/projects/jsoc/)

[https://github.com/jeromeetienne/MicroCache.js/blob/master/microcache.js](https://github.com/jeromeetienne/MicroCache.js/blob/master/microcache.js)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-21T16:05:29.810

我们为 Javascript 制作了一个库。

*   没有依赖关系
*   简单的
*   时间到期支持
*   使用 localStorage 和 sessionStorage
*   它有更多的功能。

你可以从这里看

[https://github.com/giraysam/boomerang-cache](https://github.com/giraysam/boomerang-cache)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-11T03:53:16.877

我刚刚制作了简单的 js lib 用于缓存。它支持数组和本地存储

[https://github.com/hoangnd25/cacheJS](https://github.com/hoangnd25/cacheJS)

# java - 让jar文件复制自己

> ID：14227733
> 
> 赞同：0
> 
> 时间：2013-01-09T03:14:01.230
> 
> 标签：java, jar, file-copying

我试图让我的主要可执行 jar 文件将自身复制到另一个位置。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:35:31.167

```
return new File(MyClass.class.getProtectionDomain().
 getCodeSource().
 getLocation().
 getURI().
 getPath()).getName(); 
```

将返回全名

# postgresql - 如何从 PostgreSQL 中查询表的字段名列表？

> ID：14227738
> 
> 赞同：0
> 
> 时间：2013-01-09T03:14:24.180
> 
> 标签：postgresql, database-schema, field

如何从 PostgreSQL 数据库中检索表字段名称的纯文本列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:22:09.683

只需查询[INFORMATION_SCHEMA](http://www.postgresql.org/docs/9.2/static/information-schema.html)。[列](http://www.postgresql.org/docs/9.2/static/infoschema-columns.html)，像这样：

```
SELECT
    column_name,
    data_type,
    character_maximum_length,
    ordinal_position
FROM information_schema.columns
WHERE table_name = 'mytable' 
```

更好的`INFORMATION_SCHEMA`是，几乎所有流行的 SQL 数据库都普遍支持，所以这应该可以在任何地方工作。

如果您真的只想转储纯文本文件配方，您可以使用命令行执行此查询`psql`并将其保存为 CSV 或类似的东西。

# jsf - 如何为 Enum 类的项目实现 Primefaces Autocomplete 的 completeMethod？

> ID：14227742
> 
> 赞同：0
> 
> 时间：2013-01-09T03:14:55.910
> 
> 标签：jsf, autocomplete, primefaces

我想要一个自动完成功能，它应该显示我在 Enum 类中指定的项目的建议：

```
public enum Units {

      PERCENT, MILLIMETER, METER, NUMBER
} 
```

我在某个类中有一个返回这些值的方法：

```
public final List<Unit> getUnits() {
    List<Unit> items = new ArrayList<Unit>();
    Unit[] units = Unit.values();
    for (int i = 0; i < units.length; i++) {
        items.add(units[i]);
    }
    return items;
} 
```

由于要建议的项目没有 setter 和 getter，我应该如何实现自动完成的 completeMethod？我是 Primefaces 和 JSF 的新手，所以在这里感谢一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:13:01.543

`units[i]`您可以使用或通过访问枚举名称`units[s].name()`。您还可以使用 将字符串值转换为枚举`Unit.valueOf("PERCENT")`。您的`completeMethod`遗嘱如下：

```
public List<String> completeEnum(String query) {
    List<String> match = new ArrayList<String>();
    Unit[] units = Unit.values();
    for (int i = 0; i < units.length; i++) {
        if (units[i].name().contains(query))
            match.add(units[i]);
    }
    return match;
} 
```

为 value 提供一个普通的 String 属性`autocomplete`：

```
<p:autocomplete value="#{bean.enumString}" completeMethod="#{bean.completeEnum}"/> 
```

并将选定的字符串转换为`Unit`getters/setters：

```
private Unit unit;
private String enumString;

public String getEnumString() {
    return this.enumString;
}

public void setEnumString(String enumString) {
    this.unit = Unit.valueOf(enumString);
} 
```

请注意，如果提供的 String`Unit.valueOf(String)`无法`java.lang.IllegalArgumentException`转换为`Unit`.

# .net - 在不捕获的情况下获取应用程序鼠标事件？

> ID：14227744
> 
> 赞同：0
> 
> 时间：2013-01-09T03:15:25.457
> 
> 标签：.net, wpf, mouseevent

我想做一个这样的用户控件：

如果`TextBox`获得焦点，`PopUp`则显示 a；如果`TextBox`失去焦点，`PopUp`则隐藏。这并不难。但是，这是另一个要求：

如果用户单击（鼠标按下）此窗口的其他区域/元素（既不在 TextBox 也不在`PopUp`），则 PopUp 应该隐藏。（注意：重点仍然在`TextBox`）：

![在此处输入图像描述](../Images/35841af4cb6fe3a10056f7e02fad48ac.png)

而不捕获鼠标的原因有很多`TextBox`，最重要的一个是它`TextBox`有自己的机制来处理鼠标事件。捕获鼠标可能会使`TextBox`行为变得奇怪。

我想知道是否有一种方法可以在不捕获鼠标的情况下获取应用程序鼠标事件？

我认为必须有，想想`ComboBox`，你知道我的意思。

![在此处输入图像描述](../Images/ae14b022e48be224b169e03dbd3e1ee6.png)

# ruby-on-rails - Rails 应用程序在部署到 Heroku 时崩溃，不确定如何处理日志，从 1.9.1->1.9.3 开始

> ID：14227748
> 
> 赞同：1
> 
> 时间：2013-01-09T03:15:43.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, crash, ruby-on-rails-3.2

好吧，我放弃了，需要你的帮助。我的 Rails 应用程序在 Heroku 上崩溃，并且曾经在 1.9.3 之前工作。我已经完成了 1.9.3 的所有更改，甚至创建了一个新应用程序，但它仍然总是崩溃。在本地运行良好。以下是在heroku日志中：

```
2013-01-09T03:00:59+00:00 heroku[web.1]: Starting process with command `bundle exec rails server thin -p 52530
2013-01-09T03:01:04+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/tlsmail-0.0.1/lib/net/pop.rb:689: warning: already initialized constant POP3Session
2013-01-09T03:01:04+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/tlsmail-0.0.1/lib/net/pop.rb:702: warning: already initialized constant APOPSession
2013-01-09T03:01:04+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/tlsmail-0.0.1/lib/net/smtp.rb:806: warning: already initialized constant SMTPSession
2013-01-09T03:01:04+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/tlsmail-0.0.1/lib/net/pop.rb:687: warning: already initialized constant POP
2013-01-09T03:01:04+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/tlsmail-0.0.1/lib/net/pop.rb:688: warning: already initialized constant POPSession
2013-01-09T03:01:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.8/lib/rack/server.rb:283:in `parse_options'
2013-01-09T03:01:08+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.10/lib/rails/commands/server.rb:33:in `parse!' (OptionParser::InvalidArgument)
2013-01-09T03:01:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.8/lib/rack/server.rb:180:in `options'
2013-01-09T03:01:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.10/lib/rails/commands.rb:54:in `block in <top (required)>'
2013-01-09T03:01:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.10/lib/rails/commands.rb:49:in `<top (required)>'
2013-01-09T03:01:08+00:00 app[web.1]:   from script/rails:6:in `require'
2013-01-09T03:01:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.10/lib/rails/commands/server.rb:58:in `start'
2013-01-09T03:01:08+00:00 app[web.1]:   from script/rails:6:in `<main>'
2013-01-09T03:01:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.10/lib/rails/commands.rb:49:in `tap'
2013-01-09T03:01:08+00:00 app[web.1]: Exiting
2013-01-09T03:01:09+00:00 heroku[web.1]: Process exited with status 1
2013-01-09T03:01:09+00:00 heroku[web.1]: State changed from starting to crashed
2013-01-09T03:01:11+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=xxxxxx.herokuapp.com fwd=xxx.xxx.xxx.xxx dyno= queue= wait= connect= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:34:15.710

好吧，我已经解决了。日志中的线索是：

```
2013-01-09T03:01:08+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.10/lib/rails/commands/server.rb:33:in `parse!' (OptionParser::InvalidArgument) 
```

这表明瘦网络服务器无法以传递的参数启动。基于此：[https://devcenter.heroku.com/articles/rails3](https://devcenter.heroku.com/articles/rails3)，我将我的 procfile 更改为：

```
web: bundle exec rails server thin -p $PORT 
```

对此：

```
web: bundle exec rails server thin -p $PORT -e $RACK_ENV 
```

并将 RACK_ENV 设置为在我的环境中暂存：

```
$ echo "RACK_ENV=development" >>.env 
```

现在它可以工作并解决其他问题。

# javascript - ie8根据父元素的类更新:before内容的继承颜色

> ID：14227751
> 
> 赞同：2
> 
> 时间：2013-01-09T03:16:01.790
> 
> 标签：javascript, jquery, internet-explorer-8, pseudo-element

我对任何可以帮助我解决 ie8 中字体问题的人表示无限的崇拜和钦佩。是的，我知道 ie8 并不好玩，但我需要让它发挥作用，因为……好吧，因为。  

问题与 ie8 拒绝更新 :before 伪元素有关，如果 content: 保持不变。这使得当元素的父级收到 css 类更新（例如通过 jquery 或 javascript 的“选择”）时，控制字体颜色变得相当困难。什么是强制重新绘制伪元素的优雅方法：在内容之前？

```
<style>
.items div {color:red;}
.items dig.selected {color:green;}
</style>

$('.toggle').on('click', function(){$('.items').toggleClass('selected');});

<div class="items">
<div class="selected">item 1<i class="icon-arrow-left"></div>
<div>item 2<i class="icon-arrow-left"></i></div>
<a id="toggle">Toggle</a>
</div> 
```

我做了一个 jsfiddle 来演示手头的问题：http:   [//jsfiddle.net/SLpAE/1/](http://jsfiddle.net/SLpAE/1/)  

奇怪的是，在 ie >= 9 和 7 以及 ie8 兼容模式（有不同的问题）下工作，也可以在 Chrome、safari 和 FF 中工作

# ios - 获取嵌套在 UIScrollView 中的 UIImageView 中两个 CGPoints 之间的距离

> ID：14227753
> 
> 赞同：3
> 
> 时间：2013-01-09T03:16:04.940
> 
> 标签：ios, uiscrollview, uiimageview, distance, cgpoint

```
CGRect screenSize = [[UIScreen mainScreen]bounds];
CGFloat screenWidth = screenSize.size.width;
CGRect visibleRect;
    visibleRect.origin = scrollView.contentOffset;
    visibleRect.size = imageView.frame.size;
    CGPoint midPoint = CGPointMake(visibleRect.origin.x + visibleRect.size.width / 2, visibleRect.origin.y + visibleRect.size.height / 2);
CGPoint place = CGPointMake(class.xValue, class.yValue); 
```

xValue 和 yValue 在类中声明为“int”。

```
-(int)distanceFrom:(CGPoint)point1 to:(CGPoint)point2{
CGFloat xDist = ((point2.x) - (point1.x));
CGFloat yDist = ((point2.y) - (point1.y));
return (sqrt((xDist * xDist) + (yDist * yDist)));
} 
```

问题是，一旦我通过在应用程序中滚动来更改 zoomScale 并调用该方法，数字就会急剧变化（约 1000 像素）。如何考虑缩放比例？提前致谢， 亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:21:52.143

放大时，距离方法的结果乘以`zoomScale`滚动视图。如果您想获得实际距离，请尝试将距离除以`zoomScale`滚动视图。

# lua - 具有奇怪结果的力导向绘图算法

> ID：14227754
> 
> 赞同：1
> 
> 时间：2013-01-09T03:16:08.170
> 
> 标签：lua, organization, graphing, roblox

我一直在尝试使用 RBX::Lua 创建一个力导向的图形算法。到目前为止，一切似乎都在数学上运行得非常好，但有几件事完全没有意义。

我的问题是，节点之间经历了一种意想不到的吸引力，无论是否连接。程序所做的是，所有未连接的节点像磁铁一样相互排斥，所有连接的节点像弹簧一样相互吸引。

我在我的代码中看不到任何可能导致此问题的内容。

```
-- Creating an icon to represent each node
local n = Instance.new("Part", Instance.new("Humanoid", Instance.new("Model")).Parent)
n.Name = "Head"
local tor = Instance.new("Part", n.Parent)
tor.Name = "Torso"
tor.Anchored = true
tor.FormFactor = "Custom"
tor.Transparency = 1
local h = n.Parent.Humanoid
h.Health = 0
h.MaxHealth = 0
h.Parent.Name = "Node"
n.FormFactor = "Symmetric"
n.Shape = "Ball"
n.TopSurface, n.BottomSurface = "Smooth", "Smooth"
n.Size = Vector3.new(2,2,2)
n.BrickColor = BrickColor.new("Institutional white")
n.Anchored = true
Instance.new("Vector3Value", n).Name = "velocity"

-- List of connections and nodes
local t = {
    ["Metals"]={"Gold", "Silver", "Steel", "Brass", "Mercury"},
    ["Alloys"]={"Steel", "Brass"},
    ["Noble Gasses"]={"Helium", "Argon", "Krypton", "Xenon"},
    ["Water"]={"Hydrogen", "Oxygen"},
    ["Liquids"]={"Water", "Mercury"},
    ["Alone"]={}
}
--[[ -- Separate list for testing, commented out
local t = {
    ["A"]={"B"},
    ["B"]={"C"},
    ["C"]={"D"},
    ["D"]={"E"},
    ["E"]={"F"}
}]]

-- Add all of the nodes to the workspace, position them randomly
for _, v in pairs(t) do
    local p1 = workspace:findFirstChild(_) or n.Parent:clone()
    p1.Name = _
    p1.Parent = workspace
    p1.Head.CFrame = CFrame.new(Vector3.new(math.random(-100000,100000)/1000,0,math.random(-100000,100000)/1000))
    for a, b in ipairs(v) do
        if v ~= b then
            local p2 = workspace:findFirstChild(b) or n.Parent:clone()
            p2.Name = b
            p2.Parent = workspace
            p2.Head.CFrame = CFrame.new(Vector3.new(math.random(-100000,100000)/1000,0,math.random(-100000,100000)/1000))
            local at = p1:findFirstChild(b) or Instance.new("ObjectValue", p1)
            at.Name = b
            local at2 = at:clone()
            at2.Parent = p2
            at2.Name = _
            local lasso = Instance.new("SelectionPartLasso", p2.Head)
            lasso.Name = "Link"
            lasso.Humanoid = p2.Humanoid
            lasso.Part = p1.Head
            lasso.Color = BrickColor.new("Institutional white")
        end
    end
end

local parts = {} -- List of all of the nodes themselves
-- Add all of the nodes to the list
for _, v in ipairs(workspace:GetChildren()) do
    if v.ClassName == "Model" then
        table.insert(parts, v.Head)
    end
end

while wait() do -- Repeat forever waiting one frame between loops
    for _, v in ipairs(parts) do
        for a, b in ipairs(parts) do
            if v ~= b then
                local dif = b.Position-v.Position
                local force = 0
                if b.Parent:findFirstChild(v.Name) then -- if b is conneted to v
                    force = (dif.magnitude-30)/100
                else
                    force = force - 1/dif.magnitude^2
                end
                local add = dif/dif.magnitude*force
                add = add - v.Position/v.Position.magnitude/100
                v.velocity.Value = v.velocity.Value + add
            end
        end
        v.CFrame = v.CFrame + v.velocity.Value -- Postion the node
        v.velocity.Value = v.velocity.Value*.2 -- Damping
        v.CFrame = v.CFrame-v.CFrame.p*Vector3.new(0,1,0) -- Force 2D (optional)
        v.Parent.Torso.CFrame = v.CFrame -- To display links connecting nodes
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:21:12.540

我发现了问题。“b.Parent:findFirstChild(v.Name)”应该是“b.Parent:findFirstChild(v.Parent.Name)”，否则每次都会返回 true。这只是因为我如何设置节点的显示。

# objective-c - UITableView 不响应透明区域的触摸

> ID：14227755
> 
> 赞同：5
> 
> 时间：2013-01-09T03:16:14.657
> 
> 标签：objective-c, ios, uitableview, quartz-core

我有`UITableView`一个透明`backgroundColor`的，里面的单元格用下面的代码初始化

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
  self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
  if (self) {
    self.label = [[UILabel alloc] initWithFrame:CGRectMake(0, 10, CGRectGetWidth(self.contentView.frame), 180)];
    self.label.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    self.label.text = @"test";
    [self.contentView addSubview:self.label];
  }
  return self;
} 
```

每行的高度为 200，并且标签不会填满整个单元格。每个单元格之间会有透明部分。当我尝试通过触摸这些透明部分来滚动表格时，这些触摸将被完全忽略。我知道从 iOS5 开始，对视图的触摸将被忽略。我能做些什么来解决这个问题？

我试过的东西不起作用：

*设置透明或隐藏或 alpha = 0`UIView`以充当 tableView 的假背景*

同样的交易，触摸被忽略。

*`UIView`在tableView之上创建一个子类，子类`UIView`使用tableView作为nextResponder*

显然`UITableView`不使用 touchesBegan/cancelled/ended/moved，所以这不起作用。我认为实现我的方法来滚动`UITableView`两者都不明智。

*将 tableView 的 backgroundColor 设置为`[UIColor colorWithRed:0 green:0 blue:0 alpha:0.1]`*

我不想这样做，它仍然可见。

简而言之，**即使我从透明部分开始滚动，我还能做些什么来滚动表格？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:07:11.977

首先，您创建一个没有文本（或视图）的标签，使其完全填满单元格。然后使用您的文本创建一个新标签并将其添加为第一个视图的子视图。

# c# - 根据另一个 List<> 对一个 List<> 进行排序

> ID：14227757
> 
> 赞同：1
> 
> 时间：2013-01-09T03:16:17.327
> 
> 标签：c#, list, generics, sorting

说我有

```
List<int> ages  = new List<int>() { 8, 5, 3, 9, 2, 1, 7 };
List<int> marks = new List<int>() { 12, 17, 08, 15, 19, 02, 11 }; 
```

我可以`marks`这样排序`ages`：

```
while (true)
{
  bool swapped = false;

  for (int i = 0; i < ages.Count - 1; i++)
    if (ages[i] > ages[i + 1])
    {
      int tmp = ages[i];
      ages[i] = ages[i + 1];
      ages[i + 1] = tmp;

      tmp = marks[i];
      marks[i] = marks[i + 1];
      marks[i + 1] = tmp;

      swapped = true;
    }

  if (!swapped)
    break;
} 
```

现在我想把它放到一个接受任何两个列表的函数中。第一个参数将是参考列表，数字或可比较的列表。第二个参数将是包含数据的列表。

例如：

```
public static void Sort<T>(List<T> RefList, List<T> DataList)
{
  // sorting logic here...
} 
```

有几个问题：

首先，几乎可以肯定和`T`中的类型不一样。RefList 可能是日期、整数或双精度数；而 DataList 可以自由地成为任何东西。我需要能够接收两种任意的泛型类型。`RefList``DataList`

其次，我似乎无法在这一行中使用`>`运算符：`T`

```
if (ages[i] > ages[i + 1]) 
```

也许我的整个方法都是错误的。

顺便说一句，我已经阅读了对类似问题的回复，这些问题表明这两个列表应该组合成一个复合数据类型的列表。这对我的应用程序来说根本不实用。我要做的就是编写一个静态函数，它以某种方式根据另一个列表的元素对一个列表进行排序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T03:27:26.310

要按照您想要的方式对一个列表进行排序，您实际上需要以某种方式将第一个列表中的项目的引用保留到第二个列表中的权重/键。没有现有的方法可以做到这一点，因为您无法轻松地将元数据与任意值相关联（即，如果第一个列表是`int`您的情况的列表，则没有任何内容可以映射到第二个列表中的键）。您唯一合理的选择是同时对 2 个列表进行排序并按索引进行关联 - 同样没有现有的类可以提供帮助。

使用您拒绝的解决方案可能会容易得多。即简单的 Zip 和 OrderBy，而不是重新创建第一个列表：

```
ages = ages
  .Zip(marks, (a,m)=> new {age = a; mark = m;})
  .OrderBy(v => v.mark)
  .Select(v=>v.age)
  .ToList(); 
```

注意（由 phoog 提供）：如果您需要使用 Array 进行这种类型的排序，则[Array.Sort](http://msdn.microsoft.com/en-us/library/85y6y2d3%28v=vs.100%29.aspx)可以完全允许这种操作（有关详细信息，请参阅 phoog 的答案）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-09T03:37:09.843

没有框架方法可以做到这一点`List<T>`，但如果您不介意将数据放入两个数组中，您可以使用`Array.Sort()`将两个数组作为参数的重载之一。第一个数组是键，第二个是值，因此您的代码可能如下所示（撇开从列表中获取数组的步骤）：

```
Array.Sort(ages, marks); 
```

将值放入数组然后返回列表的具体细节取决于您是否需要以适当排序的*相同列表*结束，或者是否可以按所需顺序返回包含数据的*新列表。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-09T03:29:59.643

采用：

```
public static void Sort<TR, TD>(IList<TR> refList, IList<TD> dataList)
        where TR : System.IComparable<TR>
        where TD : System.IComparable<TD>
{
 ...
} 
```

然后使用：

```
refList[i].CompareTo(refList[i+1]) 
```

而不是运营商。

.Net 数字已经实现了 IComparable，您可以使用允许您指定不同的 IComparable 的重载。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T03:20:14.183

如果我能正确理解“我可以像这样按年龄排序我的分数：”，

我想提出以下建议，以消除很多混乱。

```
struct Student{
    int age;
    int marks;
};

List<Student> students = {{8,12}, ...}; 
```

现在您可以根据年龄排序，并且标记会自动排序。

如果不可能，您需要修复如下代码。

> 首先，T 在 RefList 和 DataList 中几乎肯定不是同一个类型。

然后你需要2个参数T1，T2。只是 T 意味着类型是相同的。

```
public static void Sort<RefType, DataType>(List<RefType> RefList, List<DataType> DataList)
{ 
```

您还可以按照 Mechanical Snail 的建议将两个列表**压缩**在一起，并在[Looping through 2 Lists at once中解释](https://stackoverflow.com/questions/242417/looping-through-2-lists-at-once)

# c++ - 如何在 openCV + VS 2010 中使用 CvAvgSdv

> ID：14227758
> 
> 赞同：0
> 
> 时间：2013-01-09T03:16:50.837
> 
> 标签：c++, visual-studio-2010, opencv

我从这个线程中读到——[使用 OpenCV 获取最准确的图像](https://stackoverflow.com/questions/4831074/get-most-accurate-image-using-opencv)——我可以使用方差来测量哪些输入图像最清晰。我似乎找不到这方面的教程。我对openCV很陌生。现在，我的代码从文件夹中扫描图像并使用矢量存储它们

```
for (int ct = 0; ct < images.size() ; ct++) {
    //should i put the cvAvgSdv function here?
    waitKey(0);
} 
```

感谢您的任何帮助！

更新：我称之为 fxn：cvAvgSdv(images[ct],&scalar_mean,&std_dev); 它给了我一个错误：没有合适的从 cv::Mat 到 const cvArr * 的转换函数存在。

我可以在不将 Mat 转换为 iplImage 的情况下使用 fxn 吗？如果没有，转换 Mat 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:22:01.947

是的。你应该这样计算：

```
CvScalar mean, std_dev; 
cvAvgSdv(img,&mean,&std_dev,NULL); 
```

# android - android ant构建文件在windows和linux系统中都使用吗？

> ID：14227759
> 
> 赞同：1
> 
> 时间：2013-01-09T03:16:52.927
> 
> 标签：android, ant

我在linux上做了一个ant build.xml文件，构建成功。

在 Windows 上，相同的构建失败。

是否可以使用相同的 build.xml 在 windows 和 linux 上构建？

# ruby-on-rails - 如何为定义的页面和记录总数选择数据？

> ID：14227761
> 
> 赞同：7
> 
> 时间：2013-01-09T03:17:09.113
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我有一个带有分页数据的表格，这是我为每一页选择数据的方式：

```
@visitors = EventsVisitor
      .select('visitors.*, events_visitors.checked_in, events_visitors.checkin_date, events_visitors.source, events_visitors.id AS ticket_id')
      .joins(:visitor)
      .order(order)
      .where(:event_id => params[:event_id])
      .where(filter_search)
      .where(mode)
      .limit(limit)
      .offset(offset) 
```

另外要建立表格分页，我需要知道记录的总数。目前我对此的解决方案非常粗糙：

```
total = EventsVisitor
      .select('count(*) as count, events_visitors.*')
      .joins(:visitor)
      .order(order)
      .where(:event_id => params[:event_id])
      .where(filter_search)
      .where(mode)
      .first()
      .count 
```

所以我的问题如下 -**为当前页面和记录总数选择有限数据的最佳 ruby​​ 方法是什么？**

我注意到如果我这样做`@visitors.count`- 将生成额外的 sql 查询：

```
SELECT COUNT(count_column) FROM (SELECT 1 AS count_column FROM `events_visitors` INNER JOIN `visitors` ON `visitors`.`id` = `events_visitors`.`visitor_id` WHERE `events_visitors`.`event_id` = 1 LIMIT 15 OFFSET 0) subquery_for_count 
```

首先，我不明白发送额外查询以获取我们已经拥有的数据计数的原因是什么，我的意思是，在我们从数据库中获取数据后，`@visitors`我们可以用 ruby​​ 对其进行计数，而无需发送额外的查询到数据库。

第二 - 我认为也许有一些方法可以使用类似的东西`.total_count`会产生类似的`count(*)`查询，但没有那个没用`limit/offset`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T07:08:05.563

您应该排除限制和偏移量 [http://guides.rubyonrails.org/active_record_querying.html#except](http://guides.rubyonrails.org/active_record_querying.html#except)。看看 kaminari 是如何做到 [的](https://github.com/kaminari/kaminari/blob/92052eedf047d65df71cc0021a9df9df1e2fc36e/lib/kaminari/models/active_record_relation_methods.rb#L11)

所以它可能是这样的

```
total = @visitors.except(:offset, :limit, :order).count 
```

# php - 基于键将 5 个数组与 php 组合

> ID：14227766
> 
> 赞同：2
> 
> 时间：2013-01-09T03:18:02.733
> 
> 标签：php

我有5个这样的数组

```
print_r($_POST['ponumber']);
print_r($_POST['man_part_number']);
print_r($_POST['model']);
print_r($_POST['damaged']);
print_r($_POST['serial_number']);
print_r($_POST['skid']); 
```

产生

```
Array
(
    [0] => 111111
    [1] => 111111
    [2] => 111111
    [3] => 111111
)
Array
(
    [0] => 11C2555
    [1] => 11C2555
    [2] => 11C2555
    [3] => 11C2555
)
Array
(
    [0] => FORMS PRINTER 2500 SERIES
    [1] => FORMS PRINTER 2500 SERIES
    [2] => FORMS PRINTER 2500 SERIES
    [3] => FORMS PRINTER 2500 SERIES
)
Array
(
    [0] => 0
    [1] => 0
    [2] => 0
    [3] => 0
)
Array
(
    [0] => CNCQ202070
    [1] => CNCQ210800
    [2] => MY5203B1KQ
    [3] => CN1863Q0PQ
)
Array
(
    [0] => 1
    [1] => 1
    [2] => 1
    [3] => 1
) 
```

我需要根据键组合它们，以便我得到 4 个数组，看起来像这样

```
Array
(
    [0] => 111111
    [1] => 11C2555
    [2] => FORMS PRINTER 2500 SERIES
    [3] => 0
    [4] => CNCQ202070
 ) 
```

等等...

它需要匹配每个数组中的每个键，并将它们组合成一个数组。我正在尝试 array_combine 和 array_merge 但我认为这不是正确的方法。任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T03:27:48.840

```
$items = array();

for($x = 0; $x < count($_POST['ponumber']); $x++){
    $item = array($_POST['ponumber']);
    $item[] = $_POST['ponumber'][$x];
    $item[] = $_POST['man_part_number'][$x];
    $item[] = $_POST['model'][$x];
    $item[] = $_POST['damaged'][$x];
    $item[] = $_POST['serial_number'][$x];
    $item[] = $_POST['skid'][$x];
    $items[] = $item;
} 
```

将给出您需要的数组的数组。请注意，这假定所有数组的大小相同。如果不是这种情况，您可能需要添加一些检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:21:43.993

您是否尝试过使用嵌套的 foreach 循环来创建五个新数组？

诚然，它漫长而乏味，但如果您急需它，这可能是一个开始？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T03:40:45.497

你可以使用这个：

```
$counter = 0;
$temp = array();
 if(isset($_POST)){ // check if $_POST isset.

foreach($_POST as $key=>$myarr)
    {
       foreach($myarr as $k=>$value)
       {

          $temp[$counter] = $value;
          break;
       }
       $counter++;
    }
    } 
```

检查你可以做：

```
var_dump($temp); 
```

*希望我有所帮助*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T04:10:05.970

如果您可以这样构造表单，您将获得一个更友好的`$_POST`数组：

```
<form>
  <input name="data[0][ponumber]" />
  <input name="data[0][man_part_number]" />
  <input name="data[0][model]" />
  <input name="data[0][damaged]" />
  <input name="data[0][serial_number]" />
  <input name="data[0][skid]" />

  <input name="data[1][ponumber]" />
  <input name="data[1][man_part_number]" />
  <input name="data[1][model]" />
  <input name="data[1][damaged]" />
  <input name="data[1][serial_number]" />
  <input name="data[1][skid]" />
</form> 
```

`$_POST`看起来像：

```
'data' => array(
  0 => array(
    'ponumber' => '111111',
    'man_part_number' => '11C2555',
    'model' => 'FORMS PRINTER 2500 SERIES',
    'damaged' => '0',
    'serial_number' => 'CNCQ202070',
    'skid' => '1',
  ), ...
) 
```

# mysql - MySQL LOAD DATA INFILE 在小文件上的性能

> ID：14227770
> 
> 赞同：0
> 
> 时间：2013-01-09T03:18:36.540
> 
> 标签：mysql, performance

我正在将一个包含大约 1K 行的小数据文件加载到 MyISAM 表中

```
{
id INT(8), 
text TEXT(or VARCHAR(1000))
} 
```

LOAD DATA INFILE 的成本约为 2 秒。我已经看到 MySQL 在加载大文件时平均每秒可以加载超过 10K 行。而且我大致知道有一些成本，例如打开/关闭表。有人可以帮我知道在这 2 秒内到底发生了什么吗？由于我的程序在时间紧迫的环境中运行，是否可以在几秒钟内对其进行优化。谢谢。

有人在这里问了类似的问题 [http://forums.mysql.com/read.php?144,558753,558753](http://forums.mysql.com/read.php?144,558753,558753)。似乎还没有得到很好的回答。

场景描述

整个 MySQL 设置用于一些学术项目，其中有大约 300G 的数据库用于各种项目。如果不是全部，这些数据库中的大多数都在 MyISAM 引擎中。这些数据库包含导入的转储和实验中处理的中间表。对这些表有删除和更新操作，但现在都处于空闲状态。我有一个项目，它生成一些结果元组，这些元组被插入到其中一个数据库的表中。该表被初始化为空。架构非常简单，仅包含我粘贴的两列。现在如果我设置 ENGINE=MyISAM，插入 1-1K 行总是需要 2s，但是，如果我切换到 ENGINE=INNODB，它会变成 0.01s。我在另一台机器上安装了一个新的 MySQL，用 ENGINE=MyISAM 创建表，并插入相同数量的行，只需要 0.01s。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:38:41.247

在 1k 行时，您可能会发现多插入更快。一些基准测试应该会有所帮助。这也应该有帮助：

[http://dev.mysql.com/doc/refman/5.5/en/optimizing-innodb.html](http://dev.mysql.com/doc/refman/5.5/en/optimizing-innodb.html)

# ruby-on-rails - 耙子测试：单元失败并显示状态（1）

> ID：14227774
> 
> 赞同：0
> 
> 时间：2013-01-09T03:19:05.137
> 
> 标签：ruby-on-rails, ruby

我正在使用 Rails 进行敏捷 Web 开发，但在运行`rake test:units`.

我在 Windows 7 上运行它，我不知道这是否是我的安装问题，或者我是否正在用测试填充一些东西。

这是完整的跟踪：

```
C:/Users/tom/projects/depot/test/unit/product_test.rb:5:in `<class:ProductTest>': undefined method `assert' for ProductTest:Class (NoMethodError)
    from C:/Users/tom/projects/depot/test/unit/product_test.rb:3:in `<top (required)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_test_loader.rb:15:in `block in <main>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_test_loader.rb:4:in `select'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Command failed with status (1): [ruby -I"lib;test" -I"C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib" "C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_test_loader.rb" "test/unit/**/*_test.rb" ]

Tasks: TOP => test:units
(See full trace by running task with --trace)
PS C:\Users\tom\projects\depot> rake test:units --trace
** Invoke test:units (first_time)
** Invoke test:prepare (first_time)
** Invoke db:test:prepare (first_time)
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:abort_if_pending_migrations
** Execute db:test:prepare
** Invoke db:test:load (first_time)
** Invoke db:test:purge (first_time)
** Invoke environment
** Execute db:test:purge
** Execute db:test:load
** Invoke db:test:load_schema (first_time)
** Invoke db:test:purge
** Execute db:test:load_schema
** Invoke db:schema:load (first_time)
** Invoke environment
** Execute db:schema:load
** Execute test:prepare
** Execute test:units
    SECURITY WARNING: No secret option provided to Rack::Session::Cookie.
    This poses a security threat. It is strongly recommended that you
    provide a secret to prevent exploits that may be possible from crafted
    cookies. This will not be supported in future versions of Rack, and
    future versions will even invalidate your existing user cookies.

    Called from: C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/session/abstract_store.rb:28:in `initialize'.

Rack::File headers parameter replaces cache_control after Rack 1.5.
C:/Users/tom/projects/depot/test/unit/product_test.rb:5:in `<class:ProductTest>': undefined method `assert' for ProductTest:Class (NoMethodError)
    from C:/Users/tom/projects/depot/test/unit/product_test.rb:3:in `<top (required)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_test_loader.rb:15:in `block in <main>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_test_loader.rb:4:in `select'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Command failed with status (1): [ruby -I"lib;test" -I"C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib"         "C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_test_loader.rb" "test/unit/**/*_test.rb" ]
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/testtask.rb:104:in `block (3 levels) in define'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `call'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `sh'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `sh'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:82:in `ruby'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `ruby'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/testtask.rb:100:in `block (2 levels) in define'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:61:in `verbose'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/testtask.rb:98:in `block in define'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
C:/RailsInstaller/Ruby1.9.3/bin/rake:19:in `load'
C:/RailsInstaller/Ruby1.9.3/bin/rake:19:in `<main>'
Tasks: TOP => test:units 
```

编辑：测试看起来像这样。添加`require test/unit`并没有解决问题。

需要'test_helper'

```
class ProductTest < ActiveSupport::TestCase
  product = Product.new
  assert product.invalid?
  assert product.errors[:title].any?
  assert product.errors[:description].any?
  assert product.errors[:price].any?
  assert product.errors[:image_url].any?
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:16:21.457

您的测试是错误的：例如，您必须将断言放在实际测试中

```
require 'test_helper'

class ProductTest < ActiveSupport::TestCase
  test "products should do bar" do
    assert ...
  end

  test "product should do foo" do
    ...
  end
end 
```

# java - Hibernate 无法删除父/子自加入实体

> ID：14227775
> 
> 赞同：2
> 
> 时间：2013-01-09T03:19:10.707
> 
> 标签：java, hibernate, annotations, parent-child, cascade

我正在尝试删除父/子自加入实体但无法这样做这是我的映射

```
@Entity
public class FolderNode  {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY, generator = "hibernate_sequence")
    @SequenceGenerator(name = "hibernate_sequence", sequenceName = "hibernate_sequence")
    @Column(name="folder_id")
    private long folderId;

    @ManyToOne
    @Cascade(CascadeType.DELETE)
    @JoinColumn(name="parent_id")
    @OnDelete(action = org.hibernate.annotations.OnDeleteAction.CASCADE)
    private FolderNode parent;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:09:59.353

对于正确的父/子关系建模，您应该对关系的一对多部分进行建模，请找到一个示例：

```
 @ManyToOne(cascade={CascadeType.ALL})
    @JoinColumn(name="parent_id")
    private Menu parent;
    @OneToMany(mappedBy="parent",orphanRemoval=true)
    private List<Menu> children = new ArrayList<Menu>(); 
```

这是一个单向链接，因此关系的所有者将是关系的父方。现在，当您发出 a`EM.delete(parent)`或`session.delete(parent)`将`delete`被链级联并且子级也将被删除（通常称为孤儿，默认情况下，hibernate 不会在孤儿上发出删除语句）所以这`orphanRemoval = true`就是配置的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-30T10:55:54.757

虽然回答有点老了，但今天我遇到了同样的问题，但是在删除孩子时，父母也被删除了。

`cascade={CascadeType.ALL}`如果您确实希望将 CRUD 操作从子级级联到父级，请不要在父级上使用。

```
@ManyToOne(cascade={CascadeType.ALL})
@JoinColumn(name="parent_id")
private Menu parent;

@OneToMany(mappedBy="parent",orphanRemoval=true)
private List<Menu> children = new ArrayList<Menu>(); 
```

如果您删除子项，它也会删除父项：您可以从父项中删除级联操作。

所以我们可以如下改变，

```
@ManyToOne
@JoinColumn(name="parent_id")
private Menu parent;

@OneToMany(mappedBy="parent",orphanRemoval=true)
private List<Menu> children = new ArrayList<Menu>(); 
```

# c++ - c++客户端socket同时连接

> ID：14227780
> 
> 赞同：0
> 
> 时间：2013-01-09T03:19:41.763
> 
> 标签：c++, linux, sockets, connection

你好，我有一个客户端套接字应用程序，它同时连接，在 linux 中有超过 5000 个服务器使用 tcpip，但是当我打开套接字连接时，几乎所有连接，检索错误 Operation now in progress。

这是我的客户端套接字连接代码：我怎样才能同时做好数千个套接字连接？？？对不起我的英语不好。这是我的代码：

```
struct sockaddr_in echoserver;
struct sockaddr_in sa_loc;
char aport[64];
int optval = 1;
int sock;

memset(&echoserver, 0, sizeof (echoserver));
echoserver.sin_family = AF_INET;  
echoserver.sin_addr.s_addr = inet_addr(server.c_str()); 
echoserver.sin_port = htons(0);     

SOCKET = socket(AF_INET, SOCK_STREAM, 0);
if (SOCKET == -1)
{
 iLastError = errno;
 strLastError = "Create socket Error : "+string(strerror(errno)); 
 connected = false;
 return connected;
}

struct timeval timeouts, timeoutr;
memset(&timeouts, 0, sizeof(timeouts)); // zero timeout struct before use
timeouts.tv_sec = SendTimeOut/1000;
timeouts.tv_usec = 0;
memset(&timeoutr, 0, sizeof(timeoutr)); // zero timeout struct before use
timeoutr.tv_sec = ReceiveTimeOut/1000;
timeoutr.tv_usec = 0;   
int sockopt = setsockopt(SOCKET, SOL_SOCKET, SO_SNDTIMEO, &timeouts, sizeof(timeouts)); 
if (sockopt == -1) 
{
 printf("%s%s","Set socket Option error : ",strerror(errno));
 iLastError = errno;
 strLastError = "setsockopt Error : "+string(strerror(errno));
}
sockopt = setsockopt(SOCKET, SOL_SOCKET, SO_RCVTIMEO, &timeoutr, sizeof(timeoutr)); // 
if (sockopt == -1) 
{
   printf("%s%s","Set socket Option error : ",strerror(errno));
   iLastError = errno;
   strLastError = "setsockopt Error : "+string(strerror(errno));
}

memset(&sa_loc, 0, sizeof(struct sockaddr_in));
sa_loc.sin_family = AF_INET;
sa_loc.sin_port = htons(0);  //8000
sa_loc.sin_addr.s_addr = inet_addr(SourceIP.c_str());
int bindid = bind(SOCKET, (struct sockaddr *)&sa_loc, sizeof(sa_loc));
if (bindid !=0) 
{
 iLastError = errno;
 strLastError = "Bind Error : "+string(strerror(errno));    
}

int conn = connect(SOCKET, (struct sockaddr *) &echoserver, sizeof(echoserver));

if (conn == -1)
{
 strLastError = "Connect Error : "+string(strerror(errno));   
 connected = false;
}
else {
 connected = true;
}

return connected; 
```

wpp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:35:37.653

如果您的变量`SendTimeOut`<1000，那么您的recv超时将为0，我不确定这是否与设置O_NONBLOCK相同，但如果是，那么听起来这是正常过程，您应该循环直到它成功（或者你得到 EISCONN) 或失败并显示不同的错误代码。如果这是有意的，您可能应该明确设置 O_NONBLOCK 。

[http://linux.die.net/man/3/connect](http://linux.die.net/man/3/connect)

> 为socket的文件描述符设置了EINPROGRESS O_NONBLOCK，无法立即建立连接；连接应异步建立。
> 
> ...
> 
> 如果无法立即建立连接并且为套接字的文件描述符设置了 O_NONBLOCK，则 connect() 将失败并将 errno 设置为 [EINPROGRESS]，但连接请求不应中止，并且应异步建立连接。在建立连接之前，对同一套接字的后续调用 connect() 将失败并将 errno 设置为 [EALREADY]。

# list - 在 tcl 中拆分列表后出现的杂散字符

> ID：14227782
> 
> 赞同：2
> 
> 时间：2013-01-09T03:19:52.080
> 
> 标签：list, split, tcl

我经常在我的列表中得到像 "{\\ {" 这样的字符，这是简单列表的结果，它是由空格连接或拆分的。

只是在寻找这些角色背后的原因。

我知道后跟特殊符号的退格可以从等式中忽略，但 \\ 是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:10:51.030

很久以前，Tcl 中的所有内容都在内部存储为字符串，包括列表。选择空格来分隔列表元素，以便以后可以将它们彼此区分开来......

```
set planets [list "mercury" "venus" "march"] ;# stored in planets as "mercury venus march"
puts [lindex $planets 2] ;# lindex treats it's first (string) argument as a list, and splits on whitespace to find the third element 
```

...但是随后需要某种方式来转义/引用空白字符，以便能够将它们存储在实际的列表元素中。`{`并被`}`用于此...

```
set programs [list "hello world" "primes"] ;# stored in programs as "{hello world} primes" 
```

...现在你需要能够逃脱`{`和`}`，等等。

在现代 Tcl 版本中，列表在内部存储的效率更高，但从脚本编写者的角度来看，它仍然以这种方式存储是为了向后兼容，可能还有其他原因。因此，当您将列表用作字符串时，您将获得列表的此字符串表示形式，其中包含空格、大括号和反斜杠。

您的问题的简单解决方案是永远不要将列表视为字符串，即不要将列表作为命令需要字符串的参数发送。然后你永远不会看到任何特殊的转义序列，除非你真的把它们放在一个元素中。

```
puts $mylist ;# bad unless used for debugging
puts [join $mylist] ;# good 
```

也不要将字符串视为列表：

```
set mystring "word1 {hello word3"
puts [lindex $mystring 1] ;# will throw an error
puts [lindex [split $mystring] 1] ;# good 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T05:09:47.720

`\\`是一个转义的反斜杠，这会导致一个简单的反斜杠字符，不会触发特殊处理。

来自[TCL 手册](http://www.tcl.tk/man/tcl8.4/TclCmd/Tcl.htm#M15)：

> 如果反斜杠 ("\") 出现在单词中，则会发生反斜杠替换。[...] [T]反斜杠被删除，后面的字符被视为普通字符并包含在单词中。这允许将双引号、右括号和美元符号等字符包含在单词中，而不会触发特殊处理。

例如，要将变量 x 设置为字符串文字`abc[def\ghi`，您需要转义`[`and`\`字符：

```
set x abc\[def\\ghi 
```

# css - 我叫什么字体？

> ID：14227783
> 
> 赞同：0
> 
> 时间：2013-01-09T03:20:01.080
> 
> 标签：css, fonts, font-face

我去了防弹@font-face 并尝试使用它作为模板将字体嵌入到我的网站中，但它不起作用。我想使用 **perspective-sans black regular**。我将四个文件上传到我的服务器：套件附带的 css 样式表，以及该字体的 eot、ttf 和 woff 文件。我想知道怎么了？现在存在的字体是默认字体。

[http://swarthmorebahais.org/](http://swarthmorebahais.org/)

```
 @font-face {
    font-family: 'persanbk'; src:
            url('persanbk-webfont.eot') format('eot'), 
            url('persanbk-webfont.woff') format('woff'), 
            url('persanbk-webfont.ttf') format('truetype')
}

#h2 {
    position:absolute;
    top:30%;
    left:50%;
    margin-top:-20px;
    margin-left:-351px;
    width:702px;
    height:60px;
    font:50px persanbk, sans serif;
    color:#cc0257;
}

 <div id='h2'>
            The earth is but one country,
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:28:46.803

所以在我看来你的字体文件有 404 错误，我会检查它们是否在正确的位置，你的代码说它们应该在你网站的根目录，例如：“http://swarthmorebahais .org/persanbk-webfont.eot" 是 404ing 字体预期位置之一。

# node.js - 如何在 mocha 中创建“事件”测试

> ID：14227786
> 
> 赞同：-1
> 
> 时间：2013-01-09T03:20:29.997
> 
> 标签：node.js, testing, mocha.js

我在 mocha 中为使用 UDP 在客户端和服务器之间发送消息的 node.js 客户端/服务器应用程序编写了一系列测试。

我的测试主要在“客户端”，将服务器视为一个块框并验证来自服务器的响应。问题是一些“对话”跨越多个消息发送和接收事件，有时长达几十秒。`it`有一个 1,000 行的测试脚本，顶部只有一个巨大的调用，这似乎很奇怪——我想在“对话”期间运行多个测试。我想要更多的粒度，如果测试的特定部分失败（例如，来自服务器的前 2 个响应很好，但第 3 个响应格式错误），则测试的特定部分失败，但初始测试通过。

我已经研究过嵌套调用`it`（似乎不起作用）并且最近将调用`it`分隔在单独的步骤中，每个步骤代表在客户端发送或接收一条消息。

这种方法似乎不起作用，因为 mocha 在第一步之后终止节点应用程序，从不等待套接字从服务器接收更多响应并完成其余步骤。

如何`it`在 mocha 中创建“事件”调用？

第一个将在测试开始时调用，然后每个连续的`it`只会在收到来自服务器的响应后调用。我正在寻找任何能够让我在测试中获得粒度的解决方案，而无需在我的`it`调用中编写大量函数，其中包括客户端和服务器之间的数十条消息。在事先已经发送和接收许多消息的对话上下文之外尝试验证来自服务器的响应也是不行的，因为这些消息决定了服务器响应的有效性。

[请参阅我在https://gist.github.com/4490219](https://gist.github.com/4490219)创建的示例实现。您可以看到结果是第一个测试通过但第二个测试从未执行，即使套接字显然仍处于打开状态并等待来自服务器的请求。

（PS 为要点的文本格式道歉 - 我在创建它时似乎无法选择 Javascript 作为语言类型）

（PPS 我真的不想在每一步开始时都使用一系列 setTimeout 调用来让 mocha 认为它必须等待）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-09T04:48:33.523

解决方案是使用嵌套`it`s 的组合（实际上可以通过`describe`在每个嵌套之间使用 a 来实现`it`）和使用`it`具有长超时的注册，`done`只有在服务器响应到达时才会调用。

对于未来的谷歌人，我创建了另一个要点来展示这个问题的解决方案。

[https://gist.github.com/Trindaz/4490646](https://gist.github.com/Trindaz/4490646)

# c - 从键盘读取输入而不按回车

> ID：14227787
> 
> 赞同：2
> 
> 时间：2013-01-09T03:21:01.060
> 
> 标签：c, input, delay, prompt

> **可能重复：**
> [C/C++：从标准输入中捕获字符而不等待按下回车](https://stackoverflow.com/questions/421860/c-c-capture-characters-from-standard-input-without-waiting-for-enter-to-be-pr)
> [如何在 C 中的 Linux 上进行非阻塞控制台 I/O？](https://stackoverflow.com/questions/717572/how-do-you-do-non-blocking-console-i-o-on-linux-in-c)

我正在尝试用 C 语言编写一个处于恒定循环中的程序，但我需要能够在每个循环开始时从键盘接收输入，或者如果没有按下任何键则继续。

getchar() 和 _getch() 是不够的，因为它们都在等待输入。如果有人知道类似于 _getch 但不等待输入的函数，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T04:20:23.407

没有 C 标准的方法来做你想做的事情（在没有用户按下回车的情况下从键盘捕获击键），你必须去特定平台。`<conio.h>`应该有你在 Windows 上需要的东西，你需要`curses`在 Linux 上得到这个。（我怀疑`curses`也可以在 Mac 上工作，但不要引用我的话）

在 Windows`kbhit()`上，不等待任何输入，如果在您进行测试的那一刻有按键按下，它只会返回。如果您还需要知道密钥是什么，那么您可以将其与`getch()`

就像是：

```
while(countdown++ <= 1000){  // give a second to hit something
    if(b=kbhit())            // if the user presses a key
        break;               // leave the loop early
    Sleep(1);                // else, sleep for 1 ms and try again
}
if (b != 0)          // if something was pressed
    printf("The key was %d\n", getch()); 
```

# php - PHP 循环 $a = new ShipPackage('UPS');

> ID：14227788
> 
> 赞同：-3
> 
> 时间：2013-01-09T03:21:03.540
> 
> 标签：php

我需要以下代码的 PHP 循环：生成以下示例的最简单方法是什么。

```
$a = new ShipPackage('UPS');
$a->setParameter('length','5');
$a->setParameter('width','5');
$a->setParameter('height','5');
$a->setParameter('weight','5');

$combined->addPackageToShipment($a); 
```

**如果循环 3X，它应该如下所示：**

```
$a = new ShipPackage('UPS');
$a->setParameter('length','5');
$a->setParameter('width','5');
$a->setParameter('height','5');
$a->setParameter('weight','5');
$combined->addPackageToShipment($a);

$a2 = new ShipPackage('UPS');
$a2->setParameter('length','5');
$a2->setParameter('width','5');
$a2->setParameter('height','5');
$a2->setParameter('weight','5');
$combined->addPackageToShipment($a2);

$a3 = new ShipPackage('UPS');
$a3->setParameter('length','5');
$a3->setParameter('width','5');
$a3->setParameter('height','5');
$a3->setParameter('weight','5');
$combined->addPackageToShipment($a3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:23:04.087

您可以根据需要使用`for`循环多次循环代码。您没有提供有关为什么需要循环的任何信息，因此我认为`for`循环将是最好的。

```
for ($b = 0; $b < 3; $b++) {

    $a = new ShipPackage('UPS');
    $a->setParameter('length','5');
    $a->setParameter('width','5');
    $a->setParameter('height','5');
    $a->setParameter('weight','5');

    $combined->addPackageToShipment($a);

} 
```

`3`将(in )更改`$b < 3`为您想要循环的次数。如果适用，您可以`3`用变量替换。

您还可以在某个条件为真*时*`while`使用循环来执行代码。

 *```
while ($canShip) {

    $a = new ShipPackage('UPS');
    $a->setParameter('length','5');
    $a->setParameter('width','5');
    $a->setParameter('height','5');
    $a->setParameter('weight','5');

    $combined->addPackageToShipment($a);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:27:28.247

```
for($x = 0; $x < 3;$x++)
{
  $a = new ShipPackage('UPS');
  $a->setParameter('length','5');
  $a->setParameter('width','5');
  $a->setParameter('height','5');
  $a->setParameter('weight','5');

  $combined->addPackageToShipment($a);
} 
```

我不确定您的问题，但据我了解，这将起作用。*

# ruby-on-rails - 推送到 Heroku 时将 rake gem 更新到 10.0.3 输出错误？

> ID：14227789
> 
> 赞同：0
> 
> 时间：2013-01-09T03:21:16.860
> 
> 标签：ruby-on-rails, postgresql, heroku, rake, rack

在我的 Rails 应用程序中，我刚刚从 0.9.2.2 更新了 rake gem。到 10.0.3，机架从 1.4.1 到 1.4.3。

在更新 gem 之前，当我`git push`对 Heroku 进行操作时，我的输出将如下所示：

```
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       rake aborted!
       could not connect to server: Connection refused
       Is the server running on host "127.0.0.1" and accepting
       TCP/IP connections on port 5432?
       Tasks: TOP => environment
       (See full trace by running task with --trace)
       Precompiling assets failed, enabling runtime asset compilation
       Injecting rails31_enable_runtime_asset_compilation
       Please see this article for troubleshooting help:
       http://devcenter.heroku.com/articles/rails31_heroku_cedar#troubleshooting 
```

（不关心资产预编译失败；我知道为什么会这样）

但是现在更新 gem 之后，当我推送到 Heroku 时，我收到了这个错误：

```
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       rake aborted!
       could not connect to server: Connection refused
       Is the server running on host "127.0.0.1" and accepting
       TCP/IP connections on port 5432?
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1206:in `initialize'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1206:in `new'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1206:in `connect'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:329:in `initialize'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:309:in `new_connection'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:319:in `checkout_new_connection'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:241:in `block (2 levels) in checkout'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `loop'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `block in checkout'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:233:in `checkout'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:96:in `block in connection'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/model_schema.rb:308:in `clear_cache!'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/railtie.rb:97:in `block (2 levels) in <class:Railtie>'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:418:in `_run__769451004690509272__prepare__527462282276125186__callbacks'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `__run_callback'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
       /tmp/build_15ju6av9wl7bb/config/environment.rb:5:in `<top (required)>'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:103:in `require_environment!'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:292:in `block (2 levels) in initialize_tasks'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/sprockets/assets.rake:93:in `block (2 levels) in <top (required)>'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/sprockets/assets.rake:23:in `invoke_or_reboot_rake_task'
       /tmp/build_15ju6av9wl7bb/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
       Tasks: TOP => environment
       (See full trace by running task with --trace)
       Precompiling assets failed, enabling runtime asset compilation
       Injecting rails31_enable_runtime_asset_compilation
       Please see this article for troubleshooting help:
       http://devcenter.heroku.com/articles/rails31_heroku_cedar#troubleshooting 
```

这里发生了什么？这是我需要解决的问题吗？该应用程序似乎仍然运行良好，但我想知道至少是什么导致了错误。rake 在 10.0.3 版本中是否更冗长？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:16:45.417

看起来新版本的 rake 只是更加冗长。如果你不需要访问数据库来编译你的资产（通常你不会），你可以添加

```
config.assets.initialize_on_precompile = false 
```

到`config/application.rb`.

有关更多信息，请参阅[https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)。

# batch-file - 将 TIFF 重命名为数字的批处理脚本

> ID：14227795
> 
> 赞同：-1
> 
> 时间：2013-01-09T03:22:15.607
> 
> 标签：batch-file, rename

我需要创建一个脚本来将文件夹中的数百个 TIF 文件重命名为带有前导零的五位数字。比如00001、00002、00003等。我也想设置起始编号。我的脚本编写经验很少，不知道从哪里开始。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:31:35.530

我会在 Python 中执行此操作，它在大多数操作系统上都可用。这是一个 Python 脚本，用于重命名当前目录中的所有 TIF 文件：

```
import os

i = 1
for tifFile in [a for a in os.listdir('.') if a.endswith('.tif')]:
    newFileName = "%05d.tif" % i
    os.rename(tifFile,newFileName)
    i = i + 1 
```

您需要注意 os.rename() 的行为在不同的操作系统上可能会有所不同——在某些操作系统上，它会覆盖与新文件同名的现有文件。在其他情况下，如果存在与新文件同名的现有文件，则会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:04:17.787

将初始数字减一放入参数中，默认为零：

```
@echo off
setlocal EnableDelayedExpansion
set num=00000%1
set num=1%num:~-5%
for /F "delims=" %%a in ('dir /b *.tif') do (
   set /A num+=1
   ren "%%a" "!num:~-5!.tif"
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:17:55.477

这应该可以正常工作

```
setlocal enabledelayedexpansion
set startnum=1
for %%a in (*.tif) do (
if !startnum! lss 10 ren "%%a" 0000!startnum!.* && set /a startnum+=1
if !startnum! lss 100 if !startnum! geq 10 ren "%%a" 000!startnum!.* && set /a startnum+=1
if !startnum! lss 1000 if !startnum! geq 100 ren "%%a" 00!startnum!.* && set /a startnum+=1
if !startnum! lss 10000 if !startnum! geq 1000 ren "%%a" 0!startnum!.* && set /a startnum+=1
if !startnum! lss 100000 if !startnum! geq 10000 ren "%%a" !startnum!.* && set /a startnum+=1
) 
```

另外，如果你只有数百个文件，你甚至可以摆脱`if`1000 之后的 's。

# c++ - 如何为 qt5 编译 LibQxt？

> ID：14227797
> 
> 赞同：5
> 
> 时间：2013-01-09T03:22:51.520
> 
> 标签：c++, visual-studio-2010, window, qt5, libqxt

我在为 qt 5 编译 LibQxt 时遇到问题。[http://dev.libqxt.org/libqxt/src](http://dev.libqxt.org/libqxt/src)

有些提交说“将 Libqxt 移植到 Qt5”。该项目说要使用configure-premake，但它给出的错误是windows没有premake，但在premake文件夹中有一个名为premake.exe的文件，提交“Port LibQxt to Qt5”所以我猜他们添加了选项在 Windows 上为 qt5 编译但没有更新 bash 脚本？任何人都幸运地使用 Visual c++ 2010 在 Windows 上为 qt5 编译 libqxt 并想与我分享如何？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:00:50.650

这是一个错误。 [使用 Qt5 在 Windows 上构建 libqxt](http://dev.libqxt.org/libqxt/issue/7/building-libqxt-on-windows-with-qt5) 仍然是开放的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T10:34:14.383

我设法用 Qt 5.2.1 在 Windows 上编译了提示。不过，不知道较新的 Qt 版本。

# android - PreferencesActivity:onCreate() 中的神秘 NullPointerException

> ID：14227799
> 
> 赞同：0
> 
> 时间：2013-01-09T03:23:29.650
> 
> 标签：android, android-preferences

我有一个`PreferencesActivity`过去工作得很好，但现在`NullPointerException`当我使用 Intent 调用活动时崩溃了。（我更喜欢使用 a`PreferencesFragment`但那些在库中不可用`v4.support`）。

`

```
致命例外：主要
java.lang.RuntimeException：无法启动活动 ComponentInfo{org.example.app/org.example.app.PrefsActivity} java.lang.NullPointerException
[剪掉一些编译器跟踪]
...
在 dalvik.system.NativeStart.main （本机方法）
引起：java.lang.NullPointerException
在 android.preference.PreferenceActivity.onCreate(PreferenceActivity.java:567)
在 org.example.app.PrefsActivity.onCreate(PrefsActivity.java:16)
[ETC]
...

```

有问题的线在`super.onCreate(savedInstanceState);`课堂`PrefsActivity`上。该类在该方法中只有另一行，即`addPreferenceFromResource(R.xml.prefs);`. 除了`onCreate`， Activity 几乎是空的。

该活动已在清单文件中注册，并且 xml 是正确的（无论如何它都没有机会加载）。这个问题出现在我尝试过的所有设备上，模拟器、手机和平板电脑，运行从姜饼到果冻豆的任何设备。

我正在使用 emacs/ant 并清理了项目。prefs 活动在基本 Intent 代码块中从 a 中调用`Fragment`：

```
    Intent i = new Intent(getActivity(), PrefsActivity.class);

    开始活动（一）；

```

谁能详细说明发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:08:31.727

好吧，经过重写，我发现了问题所在。

我从 onCreate 方法中省略了 @Override 注释。就是这样。

# ios - 在 UIKeyboard 上方附加一个 UIView

> ID：14227802
> 
> 赞同：0
> 
> 时间：2013-01-09T03:23:45.360
> 
> 标签：ios

将 UIView 附加到 UIKeyboard 正上方的最优雅的方式是什么（没有硬编码像素数）。

用例：我有一个用例，当用户想要输入任何内容时，我想让他在 twitter 和 facebook 上分享内容。我有一个 UIView，它有按钮可以在 facebook 和 twitter 上分享。

我希望 UIView 1\. 仅在 UIKeyboard 可见时出现 2\. 出现在 UIKeyboard 的正上方。即使设备旋转。

-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:33:37.483

在各种文本输入字段上使用[inputAccessoryView 。](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextField_Class/Reference/UITextField.html#//apple_ref/occ/instp/UITextField/inputAccessoryView)

# function - 在 Matlab 中连接两个手柄

> ID：14227803
> 
> 赞同：2
> 
> 时间：2013-01-09T03:24:06.717
> 
> 标签：function, matlab, user-interface, handles

我想连接我的两个axes.handles，这样当点击一个鼠标按钮时，另一个也会做第一个做的事情。我有一个外部函数，可以在单击鼠标时执行我想要执行的操作。我只需要更新 GUI 中的两个句柄，以便在单击一个轴时它会做同样的事情。

在主 GUI

```
function testminiproj_OpeningFcn(hObject, ~, handles, varargin)
handles.output = hObject;
handles.done=0;
guidata(hObject, handles);

setappdata(0,'figureHandle',gcf);

setappdata(gcf,'axesHandle1',handles.axes6);

setappdata(gcf,'axesHandle2',handles.axes7); 
```

这是我的外部函数，它通过调用mousemotion回调到主GUI；

```
function varargout = mousemotion(this,varargin)

%// get the figure handle from the application main data
figureHandle = getappdata(0,'figureHandle');

%// get the axes handle from the figure data
axesHandle1 = getappdata(figureHandle,'axesHandle1');

%// get the axes handle from the figure data
axesHandle2 = getappdata(figureHandle,'axesHandle2');

global rdata;
if nargin<1
  set(gcf,'WindowButtonDownFcn','mousemotion(''down'')');
  set(gcf,'WindowButtonUpFcn','mousemotion(''up'')');
  set(gcf,'WindowButtonMotionFcn',''); 
```

感谢任何帮助。我不擅长提出问题。希望有人能帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:00:54.213

您需要解决并手动找出单击了哪些轴。

其实并不难。只需使用`Position`图形和轴的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:04:07.887

您可以制作句柄矢量。像这样：

```
axesHandles = [axesHandles1; axesHandles2];
set(axesHandles, 'PropertyName', PropertyValue); 
```

这样，两个轴的属性值都将设置为`PropertyValue`.

# c - cpuinfo 决定处理器亲和性

> ID：14227806
> 
> 赞同：3
> 
> 时间：2013-01-09T03:24:20.553
> 
> 标签：c, linux, cpu-cache

我试图根据 /proc/cpuinfo 为我的应用程序确定处理器关联规则，我的 redhat Linux 显示

```
processor   : 0   to  47  , means server has 48 processor unit

physical id : 0   to  3   , means server has 4 cpu sockets 

cpu cores   : 6  , means  each socket has 6 cores 

siblings    :  12 , means each core has 2  hyperthreads 
```

总而言之，这台服务器有 4 * 6 * 2 = 48 个处理器单元，到目前为止我是正确的吗？

我喜欢做的是使用sched_setaffinity函数，首先我想知道的是同一个内核中的超线程，例如...

```
processor 0  : physical id:0,core id: 0  ...
processor 24 : physical id:0,core id: 0  ... 
```

如果在我的应用程序中，我在 thread1 中使用 CPU_SET(0, &mask)，在 thread2 中使用 CPU_SET(24, &mask)，那么我可以说 thread1 和 thread2 将共享相同的 L1 缓存，当然也共享相同的 L2 缓存，太……我猜对了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:55:00.640

如果您的线程被安排在同一个核心（即不同的超线程）上，您只能保证完全共享缓存，在这种情况下您的方法是正确的。

但请记住，将两个任务安排在同一个核心上并不一定会使它们运行得更快，如果你将它们安排在不同的核心上。在所有内核之间通常共享的 L3 非常快。

您需要检查高速缓存是如何在处理器之间共享的。大多数 Intel 处理器在 2-4 个内核之间共享 L2，在所有内核之间共享 L3，而大多数 AMD 型号仅共享 L3。

# android - 在 Android 中设置 Share Action Provider 的样式

> ID：14227810
> 
> 赞同：5
> 
> 时间：2013-01-09T03:24:45.390
> 
> 标签：android, android-intent, android-theme, shareactionprovider

![在此处输入图像描述](../Images/6b2f368e82fd0873667ce161c5586cac.png)

以下是我通过 Share Action Provider 分享内容的方式：

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT,
                    "Check the Link  : " + url);
sendIntent.setType("text/plain");
startActivity(Intent.createChooser(sendIntent, "Share with")); 
```

我想用窗口设置共享的样式。我想将文本颜色和荧光笔线条颜色从默认的蓝色更改为我的自定义颜色。我正在使用 Holo 灯光主题。我不知道如何设置这些元素的样式。谁能指出这样做的参考？

有没有办法通过样式访问 android.widget.ShareActionProvider 的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T03:52:51.297

我不知道如何设置对话框的样式，我在不同的设备中看到了不同的布局。但是您可以使用`PackageManager.queryIntentActivities(Intent intent, int flag)`来获取可以处理此意图的所有活动。并使用列表数据创建您自己的选择器。

编辑：演示

```
 final Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setData(Uri.parse("http://www.google.com"));
    PackageManager pm = getPackageManager();
    final List<ResolveInfo> infos = pm.queryIntentActivities(intent,
            PackageManager.MATCH_DEFAULT_ONLY);
    CharSequence[] names = new CharSequence[infos.size()];
    for (int i = 0; i < infos.size(); i++) {
        names[i] = infos.get(i).loadLabel(pm);
    }
    new AlertDialog.Builder(this).setItems(names,
            new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    ResolveInfo info = infos.get(which);
                    intent.setClassName(info.activityInfo.packageName,
                            info.activityInfo.name);
                    startActivity(intent);
                }
            }).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:49:21.310

据我所知，您无法设置选择器对话框的样式。这是一个系统级的活动，并使用默认的系统主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-01T11:28:35.937

你也可以这样使用

```
 final Intent intent = new Intent(Intent.ACTION_SEND);
        intent.setType("text/plain");
        intent.putExtra(android.content.Intent.EXTRA_SUBJECT,getString(R.string.app_name));
        intent.putExtra(android.content.Intent.EXTRA_TEXT,getString(R.string.tell_your_frnd));
        PackageManager pm = getPackageManager();
        final List<ResolveInfo> infos = pm.queryIntentActivities(intent,
                PackageManager.MATCH_DEFAULT_ONLY);
        name = new String[infos.size()];
        image=new Drawable[infos.size()];
        for (int i = 0; i < infos.size(); i++) 
        {
            name[i] = (String) infos.get(i).loadLabel(pm);
            image[i]=infos.get(i).loadIcon(pm);
        }

        CustomGrid adapter = new CustomGrid(ShareActivity.this,name,image);
        mGridView.setAdapter(adapter);

        mGridView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,int position, long id) 
        {

            ResolveInfo info = infos.get(position);

            intent.setClassName(info.activityInfo.packageName,
                    info.activityInfo.name);
            startActivity(intent);
        }
    }); 
```

# java - 在集合中搜索相同对象的不同实例

> ID：14227811
> 
> 赞同：1
> 
> 时间：2013-01-09T03:24:49.507
> 
> 标签：java, object, set, instance, loops

我在 World 类中有一个名为 collidable 的对象的集合：

```
Set<Collidable> collidables = new HashSet<Collidable>(); 
```

在尝试开发碰撞检测系统（用于球）时，我为 X 和 Y 做了两个 for 循环。

```
cboxX = (int) Math.floor(position.x - RADIUS);
cboxY = (int) Math.floor(position.y - RADIUS);
cboxW = Math.abs((int) Math.ceil(nextPosition.x + RADIUS) - (int) Math.floor(position.x - RADIUS));
cboxH = Math.abs((int) Math.ceil(nextPosition.y + RADIUS) - (int) Math.floor(position.y - RADIUS));

for (int x = cboxX; x <= cboxW + cboxX - 1; x++)
{
    for (int y = cboxY; y <= cboxH + cboxY; y++)
    {

    }
} 
```

这里一切都很好。但是，在 for 循环中，我尝试使用 x 和 y 参数检查可碰撞对象，但由于我正在创建可碰撞对象的新实例（尽管参数与先前生成的参数完全相同），它总是会出现错误：

```
world.collidables.add(new Block(new Vector2(x, y)));
System.out.println(world.collidables.contains(new Block(new Vector2(x, y)))); //returns false 
```

但是，如果我使用相同的块实例，它将变为 true：

```
Block b = new Block(new Vector2(x, y))
world.collidables.add(b);
System.out.println(world.collidables.contains(b)); //returns true 
```

然而，这是不可接受的，因为有两个 for 循环的全部原因是不必遍历每个可碰撞的、每次更新。

我要问的是，有没有人知道一种方法来获取可碰撞对象是否在我指定的位置，而不必遍历整个集合？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T03:29:46.830

您需要为自己提供两种方法的实现：

```
int hashCode()
boolean equals(Object o) 
```

这些方法应该被实现为`c1.hashCode() == c2.hashCode()`当且仅当两个实例的属性（向量）相等时。同时`hashCode()`必须与`equals(Object o)`文档所述的含义一致：

*   每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。
*   如果两个对象根据 equals(Object) 方法相等，则对两个对象中的每一个调用 hashCode 方法必须产生相同的整数结果。
*   如果根据 equals(java.lang.Object) 方法，如果两个对象不相等，则不需要对两个对象中的每一个调用 hashCode 方法都必须产生不同的整数结果。但是，程序员应该意识到，为不相等的对象生成不同的整数结果可能会提高哈希表的性能。

# netty - 在 netty 中，如何捕获所有 channelClosed 事件？

> ID：14227812
> 
> 赞同：2
> 
> 时间：2013-01-09T03:24:56.970
> 
> 标签：netty

我们有一个 HTTP 服务有大量的小请求，而且大部分只请求一次（大约 70%）

因此，如果我们在请求到来时保持通道打开，很快就会有很多通道留在内存中而什么都不做。

目前我们做的是注册一个 IdleStateHandler 和一个 IdleStateAwareChannelHandler，这样任何一个 5 秒内没有活动的通道都会被关闭。

这似乎行得通，并且打开的渠道的大小是稳定的。

但是我们还有另一个问题：

对于每个打开的频道，我们都自定义了与之关联的 ServerConnection 对象，以存储与当前频道相关的一些有用信息。我们将这些 ServerConnection 保存在一个名为 connectionMap 的全局映射中，键是通道。

每次调用messageReceived时，我们检查channel是否已经在connectionMap中，如果没有，则创建一个新的ServerConnection。

每次检测到 channelClosed/exceptionCaught 事件时，我们调用 connectionMap.remove 将其移除。

当 IdleStateHandler 被调用时，我们手动从地图中移除。

但是有些 ServerConnections 并没有被移除，而它的 Channel 的状态实际上是关闭的。

我们错过了什么吗？是否还有其他地方关闭了 Channel，但我们忘记了捕捉事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T03:41:57.587

您可以在频道关闭时收到通知，方法是使用`ChannelFutureListener`界面并注册频道的关闭未来。

```
class MyClass implements ChannelFutureListener
{
    // Whatever stuff this class also does 
    // ...

    public void operationComplete(ChannelFuture future) throws Exception
    {
        System.out.println("This channel closed! " + 
                           future.getChannel().getId().toString());
    }

} 
```

然后对于您的频道，您会...

```
channel.getCloseFuture().addListener(instanceOfMyClass); 
```

当频道关闭时，您`ChannelFutureListener`会收到通知。

请注意，这是 Netty 3.x。Netty 4.x 更改了一些您需要调整的方法名称（他们`get`从 getter 中删除了前缀）。

# c# - Visual Studio 2010 EXE 打包

> ID：14227814
> 
> 赞同：2
> 
> 时间：2013-01-09T03:25:38.243
> 
> 标签：c#, winforms, visual-studio

> **可能重复：**
> [在编译的可执行文件中嵌入 DLL](https://stackoverflow.com/questions/189549/embedding-dlls-in-a-compiled-executable)

我有 ac# winforms 应用程序以及一些依赖的 .dll 和依赖的外部 .exe。

是否有可能以某种方式将它们全部编译成一个可执行文件（不是安装程序），只是独立的可执行文件？

如果可能，从 VS 2010 Ultimate 开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:33:56.000

[ILMerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)是一个实用程序，可用于将多个 .NET 程序集合并为一个程序集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:34:24.513

**简而言之：**唯一可行的方法是将所有外部文件添加为**嵌入式资源**并使用`ILMerge`.

**选项 #1：**以下**步骤显示如何**在 Visual Studio 中嵌入资源文件：

1.  转到解决方案资源管理器，
2.  右键单击资源文件，
3.  转到构建操作：选择嵌入式资源。

您将在 exe 中拥有该文件引用。稍后您可以在运行应用程序时使用反射并获取资源。[从这里](http://msdn.microsoft.com/en-us/library/aa984367%28v=vs.71%29.aspx)借来的源代码：

**带有托管 dll 的选项 #2**：

对于托管 DLL，您有几个选项：

*   使用[ILMerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)。ILMerge 有一个不错的 GUI 界面，可以在 [这里]7 找到
*   将它们作为资源嵌入，有关详细信息，请参阅[本文](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx)。

查看以下[解释此问题的 CodeProject 文章](http://www.codeproject.com/Articles/9364/Merging-NET-assemblies-using-ILMerge)。

> ILMerge 是一个实用程序，可用于将多个 .NET 程序集合并为一个程序集。ILMerge 采用一组输入程序集并将它们合并到一个目标程序集中。输入程序集列表中的第一个程序集是主程序集。当主程序集是可执行文件时，目标程序集被创建为具有与主程序集相同入口点的可执行文件。此外，如果主程序集具有强名称，并且提供了 .snk 文件，则使用指定的密钥对目标程序集进行重新签名，使其也具有强名称。

# php - 将参数传递给 SimpleTest 单元测试

> ID：14227815
> 
> 赞同：0
> 
> 时间：2013-01-09T03:25:50.033
> 
> 标签：php, simpletest

我有一堂课，我正在编写使用 SimpleTest 的测试。类中有静态函数需要传递给我的 SQL 连接对象，它位于 Variables.php 中。我该怎么做呢？

```
<?
   require_once('../Variables.php');

   class TestOfMember extends UnitTestCase {

      function testGetMembersFromEmailAddress() {

         $this->assertTrue($Member::getMembersFromEmailAddress("xxx@xxx.com", $conn)==null);
         $this->assertTrue($Member::getMembersFromEmailAddress("xxx@gmail.com", $conn)!=null);
      }
    }

?>

class Member {
public static function getMembersFromEmailAddress($emailAddress, $conn) {

    $args = array();
    $args[] = $conn;

    try {
        $result = $conn->query("SELECT * FROM members WHERE Members_Email ='" . $emailAddress . "'");
        $members = $result->fetchAll(PDO::FETCH_CLASS, 'Member', $args);

        return $members;
    } catch (PDOException $e) {
        echo $e->getMessage();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:44:19.510

你描述的是一个典型的问题。解决它的最简单方法是使用所谓的*模拟对象*。这些对象的行为就像它们是一个真实的对象，但实际上它们只是一个薄壳。另外：您可以在测试中完全控制它们。

使用模拟对象有不同的方法，[SimpleTest 甚至有它自己的实现](http://simpletest.org/en/mock_objects_documentation.html)。或者你可以使用像[mockery](https://github.com/padraic/mockery)这样的框架。

在您的情况下，您需要一个`DatabaseConnection`带有`query()`方法的数据库连接对象（）。这将返回一个结果对象 ( `Result`)，该对象又具有一个`fetchAll()`方法并可能返回一个数组。

我首先声明了两个接口，这允许 SimpleTest 模拟方法。如果您已经为它们声明了类，则可以使用它们`Mock::generate()`来生成模拟类。

```
interface DatabaseConnection
{
    function query();
}

interface Result
{
    function fetchAll();
}

//this call generates a class called 'MockDatabaseConnection'
//with the same interface as 'DatabaseConnection'
Mock::generate('DatabaseConnection');
Mock::generate('Result');

class TestOfMember extends UnitTestCase
{
   //this method gets called before each test method, it sets up each test
   function setUp() {
       $mockResult = new MockResult();
       //here I just return a string, but you could return a Member object as well
       $mockResult->returns('fetchAll', array("Member 1", "Member 2", "Member 3"));
       $this->mockConn = new MockDatabaseConnection();
       $this->mockConn->returns('query', $mockResult);
   }

   function testGetMembersFromEmailAddress() {
       $conn = new MockDatabaseConnection();

       //here you could now check for the mocked values "Member 1", "Member 2" ...
       $this->assertTrue(Member::getMembersFromEmailAddress("xxx@xxx.com", $this->mockConn)==null);
       $this->assertTrue(Member::getMembersFromEmailAddress("xxx@gmail.com", $this->mockConn)!=null);
   }
} 
```

# objective-c - 有没有办法从 Method 结构中获取参数的类类型？

> ID：14227820
> 
> 赞同：2
> 
> 时间：2013-01-09T03:26:21.613
> 
> 标签：objective-c, introspection, objective-c-runtime

有这样的方法。

```
- (void)method: (CustomClass)param; 
```

`CustomClass`继承自`NSObject`。

我在`m`下面有一个变量，它是该`Method`方法的结构。我调用`method_getArgumentType()`来获取这样的参数类型：

```
char szArgType[100] = {0,};
Method m = ...;
...
method_getArgumentType(m, 2, szArgType, 100); 
```

我打印了`szArgType`. 它打印`@`了，但我想打印`CustomClass`。有没有一种好方法可以在运行时从 a 获取参数的真实对象类类型`Method`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T03:32:19.277

这是不可能的。接口类型（类）仅由编译器使用，并且在对方法签名进行编码时不保留该信息。

您可以在运行时获得的唯一信息是运行时指南的[类型编码一章](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html)中描述的信息，即参数是否是对象，而不是各种 POD 类型中的任何一种。*任何*对象的编码都是相同的，无论它的类是什么`@`，你在那里看到的。（本质上，一切都是`id`在编译器完成类型检查之后。）

# asp.net-mvc-3 - 将 IPrincipal 转换为 IClaimsPrincipal 返回 null

> ID：14227832
> 
> 赞同：0
> 
> 时间：2013-01-09T03:27:30.240
> 
> 标签：asp.net-mvc-3, .net-4.0

我继承了来代码（一个 MVC Web 应用程序）并且无法启动它。

这两条线存在：

```
var claimsPrincipal = principal as IClaimsPrincipal;
if (claimsPrincipal == null)
    throw new ArgumentException("Cannot convert principal to IClaimsPrincipal.", "principal"); 
```

`principal`是一个`IPrincipal`（在这种情况下是 a `System.Security.Principal.WindowsPrincipal`），并且不为空。

第一行设置`claimsPrincipal`为 null，因此抛出异常。我假设它在某些时候一定对某人有用，这是来自源代码控制的新副本。为什么这个演员会为我返回 null ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-23T03:10:31.560

我看到这个帖子是很久以前的了。但是我今天遇到了同样的问题，终于找到了解决方法。

在框架 4.5 或 4.6 中，您可以直接`System.Security.Principal.WindowsPrincipal`转换为`IClaimsPrincipal`，因为第一个实现了第二个。但是在框架 3.5 或 4.0 中，你不能这样做，因为第一个没有实现第二个。它只是实现了 IPrinciple，而不是 IClaimsPrincipal。[您可以从此处](https://msdn.microsoft.com/en-us/library/system.security.principal.windowsprincipal(v=vs.100).aspx)的 MSDN 链接中看到它。

这是一种解决此问题并获取 IClaimsPrincipal 对象的方法。

```
 var t = HttpContext.Current.User.Identity as WindowsIdentity;
            WindowsClaimsPrincipal wcp = new WindowsClaimsPrincipal(t);
            IClaimsPrincipal p = wcp as IClaimsPrincipal; 
```

HttpContext.Current.User 是一个WindowsPrincipal，最后可以得到IClaimPrincipal。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:35:28.967

`principal`可能实际上是`null`。你调试了吗？

检查类型是否`principal`实现了`IClaimsPrincipal`接口。

# ios - 如何使用 uitoolbar 上的完成按钮在情节提要中创建选择器视图作为弹出框

> ID：14227834
> 
> 赞同：3
> 
> 时间：2013-01-09T03:27:45.703
> 
> 标签：ios, ipad, ios5, ios6, uipopovercontroller

我已经使用代码创建了上面的示例，但想知道是否可以使用情节提要实现相同的目标。

我是ios的菜鸟，想知道如何去做。
提前致谢。

没有故事板和完成按钮的代码：

```
UIViewController* popoverContent = [[UIViewController alloc] init]; //ViewController

UIView *popoverView = [[UIView alloc] init];   //view
popoverView.backgroundColor = [UIColor blackColor];

UIDatePicker *datePicker=[[UIDatePicker alloc]init];//Date picker
datePicker.frame=CGRectMake(0,44,320, 216);
datePicker.datePickerMode = UIDatePickerModeDateAndTime;
[datePicker setMinuteInterval:5];
[datePicker setTag:10];
[datePicker addTarget:self action:@selector(Result) forControlEvents:UIControlEventValueChanged];
[popoverView addSubview:datePicker];

popoverContent.view = popoverView;
popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
popoverController.delegate=self;
[popoverContent release];

[popoverController setPopoverContentSize:CGSizeMake(320, 264) animated:NO];
[popoverController presentPopoverFromRect:tempButton.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];//tempButton.frame where you need you can put that frame 
```

# android - Google Talk 的 Android 辅助功能通知

> ID：14227837
> 
> 赞同：0
> 
> 时间：2013-01-09T03:27:48.373
> 
> 标签：android, notifications, accessibility, google-talk

我正在开发一个使用通知事件的 android 无障碍应用程序。但是，它只在用户发送传出消息时为 Google Talk 注册通知，并且似乎没有捕获传入消息的通知。知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:13:20.270

如果您收到传出通知，则表示该服务正在运行。

尝试记录到达 onAccessibilityEvent(AccessibilityEvent paramAccessibilityEvent) 的任何事件

当然，请确保在 Google Talk 中启用状态栏通知。

# jquery - 带有对齐中心的jquery mobile基本格式

> ID：14227839
> 
> 赞同：0
> 
> 时间：2013-01-09T03:28:02.237
> 
> 标签：jquery, jquery-mobile, alignment, center

我只是无法让按钮在这里对齐中心。我究竟做错了什么？另外，我需要在标题文本旁边添加一个图像，它们都应该居中对齐。我该怎么做？

```
<div data-role="page" id="pageMain">

<div data-role="content" align="bottom">    
    <div id ="mainDiv2">
        <table border="1" align="CENTER" cellspacing="0" width="100%">
        <tr>
        <td align="center">
            <div id="question">
            Test
            <Style>
                #question{
                  font:16px;
                }
            </style>        
            </div>
        </td></tr><tr>
        <td align="center">
            <div class="ui-grid-b">
                <div class="ui-block-a"><button id="button1" type="submit" data-theme="c">test</button></div>
            </div>
        </td>
        </tr>
        </table>
    </div>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:01:30.733

恕我直言，表格+ JQM网格的奇怪和不必要的组合......

这是否足够接近你想要的？

```
<div data-role="page" id="pageMain">
    <div data-role="header">
        <h1>Header</h1>
    </div>
    <div data-role="content" align="bottom">    
        <div style="
            background-image: url(http://twitter.com/images/resources/twitter-bird-light-bgs.png);
            width: 300px;
            height: 300px;
            margin: 0 auto;" data-role="none"></div>
        <h1 style="text-align: center;">Your text goes here</h1>
        <button id="button1" type="submit" data-theme="c">test</button>
    </div>
</div> 
```

jsFiddle 在[这里](http://jsfiddle.net/fWAEe/)

# windows-phone-8 - Windows Phone 8 模拟器上的控制台窗口功能

> ID：14227847
> 
> 赞同：6
> 
> 时间：2013-01-09T03:29:04.567
> 
> 标签：windows-phone-8, windows-phone-8-emulator

Windows Phone 7 Emulator 有一个不错的控制台窗口功能，可以通过注册表设置 (EnableConsole) 或通过 XDE.exe 的 decfg 参数启用

即使没有附加调试器，它也能工作。它有助于查找运行时绑定问题和异常。

有没有办法在 Windows 8 Phone 模拟器中启用控制台窗口？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T00:50:44.187

The WP8 emulator is a complete rewrite of the WP7 emulator, so it's unlikely it supports the same undocumented debug messages. At the end of the day the question is: what are you trying to log?

*   Are you trying to get at **informaiton specific to your app**? Then use Pavel's idea on sharing IsoStore files via the [CoreCon API](http://justinangel.net/WindowsPhone7EmulatorAutomation) for WP8\.
*   Are you trying to get messages for **interesting events in the emulator itself**? The emulator logs to an ETW provider and you can read from that log. I'll show here how.
*   Are you trying to get **information from inside the WP8 OS**? Then generate an ETL file and examine it or use the profiling APIs directly.

* * *

**Logging app specific messages**

Let's say something interesting happens in your app like an important button click. You'll want to log that in your app and write that message to IsoStore (or send to a custom web service). I use MetroLog for my WP8 & Win8 logging but you can use anything you want to as long as files get written down to IsoStore. Check out MetroLog @ [https://github.com/mbrit/MetroLog](https://github.com/mbrit/MetroLog)

You can then use the [CoreCon API](http://justinangel.net/WindowsPhone7EmulatorAutomation) to read the file out. I've uploaded a code sample of these APIs ofr WP8 @ [https://stackoverflow.com/a/13429709/81687](https://stackoverflow.com/a/13429709/81687)

* * *

**Logging Emulator specific messages**

Say you're interested in seeing when the emulator was activated, when the zoom was set, if a screenshot failed or if a touch event happened. The WP8 emulator uses ETW provider *ff86852d-541c-4f7e-98c5-5761e8cb7074* to log those an other events. You can read more about ETW here @ [http://msdn.microsoft.com/en-us/magazine/cc163437.aspx](http://msdn.microsoft.com/en-us/magazine/cc163437.aspx)

First, download [PerfView](http://www.microsoft.com/en-us/download/details.aspx?id=28567) to launch the XDE.exe emulator and start capturing ETW output.

![PerfView start with all the aforementioned options](../Images/bbdce496755534222e999643911f05c8.png)

*   Set the working directory to the location of the XDE.exe for WP8.
*   Make sure to run that emulator first from VS2012 to create the Hyper-V image. Or if you know how to you can crank out the image yourself and use the /VHD parameter.
*   When invoking XDE.exe you can get the /NAME parameter from the Hyper-V manager.
*   Make sure to set the extra provider to include "ff86852d-541c-4f7e-98c5-5761e8cb7074".

Now run the the emulator from PerfView, do some stuff, shutdown the emulator and stop collecting information. Once you do that you can see a log of everything that went on in the emulator. The interesting stuff is under the "Events" log once you filter it under the provider ID.

![PerfView events data](../Images/f775c1033568686a93cf815b484b9671.png)

In the above print screen you can see events and when they happened in the emulator. For example, event 76 is MicrophoneCaptureThreadStarted for the emulator and it happened 27 seconds into the profiling session. For the complete list of event codes see Microsoft.Xde.Etw.WindowsPhoneEmulatorProvider c'tor in the XDE.exe assembly. It's copy pasted here for your convince:

```
public WindowsPhoneEmulatorProvider()
{
    this.m_provider = new EventProviderVersionTwo(new Guid("ff86852d-541c-4f7e-98c5-5761e8cb7074"));
    this.XdeStarted = new EventDescriptor(0, 0, 9, 4, 0, 0, -9223372036854775808L);
    this.XdeStopped = new EventDescriptor(1, 0, 0, 4, 0, 0, 0L);
    this.DesktopResolutionChanged = new EventDescriptor(2, 0, 0, 4, 0, 0, 0L);
    this.InvalidLanguageSpecified = new EventDescriptor(3, 0, 0, 2, 0, 0, 0L);
    this.CantFindVhd = new EventDescriptor(5, 0, 0, 2, 0, 0, 0L);
    this.DiffDiskVhdRequiresVhdPath = new EventDescriptor(6, 0, 0, 2, 0, 0, 0L);
    this.InvalidVideoParam = new EventDescriptor(7, 0, 0, 2, 0, 0, 0L);
    this.InvalidMemorySize = new EventDescriptor(8, 0, 0, 2, 0, 0, 0L);
    this.CantFindVM = new EventDescriptor(9, 0, 0, 2, 0, 0, 0L);
    this.UnableToSendKeyToVM = new EventDescriptor(10, 0, 0, 2, 0, 0, 0L);
    this.FailedToCreateDiffVhd = new EventDescriptor(11, 0, 0, 2, 0, 0, 0L);
    this.FailedToCreateVM = new EventDescriptor(12, 0, 0, 2, 0, 0, 0L);
    this.FailedVMStop = new EventDescriptor(13, 0, 0, 2, 0, 0, 0L);
    this.FailedStartVM = new EventDescriptor(14, 0, 0, 2, 0, 0, 0L);
    this.UnableToConnectToGuest = new EventDescriptor(15, 0, 0, 2, 0, 0, 0L);
    this.ConnectedToGuest = new EventDescriptor(0x10, 0, 0, 4, 0, 0, 0L);
    this.GuestIndicatedResolution = new EventDescriptor(0x11, 0, 0, 4, 0, 0, 0L);
    this.LoadedSkin = new EventDescriptor(0x12, 0, 0, 4, 0, 0, 0L);
    this.ButtonPressed = new EventDescriptor(0x13, 0, 0, 4, 0, 0, 0L);
    this.VirtualMachineStateChanged = new EventDescriptor(20, 0, 0, 4, 0, 0, 0L);
    this.ProxyInitialized = new EventDescriptor(4, 0, 0, 4, 0, 0, 0L);
    this.UsageShown = new EventDescriptor(0x16, 0, 0, 4, 0, 0, 0L);
    this.DisplayOrientationSet = new EventDescriptor(0x17, 0, 0, 4, 0, 0, 0L);
    this.ZoomSet = new EventDescriptor(0x18, 0, 0, 4, 0, 0, 0L);
    this.ScreenshotSavedToFile = new EventDescriptor(0x19, 0, 0, 4, 0, 0, 0L);
    this.KeySentToVM = new EventDescriptor(0x1a, 0, 0, 4, 0, 0, 0L);
    this.MouseEventSentToVM = new EventDescriptor(0x1b, 0, 0, 4, 0, 0, 0L);
    this.UnableToSendMouseEventToVM = new EventDescriptor(0x1c, 0, 0, 0, 0, 0, 0L);
    this.BringToFrontExecuted = new EventDescriptor(0x1d, 0, 0, 4, 0, 0, 0L);
    this.ConnectedToAccelerometer = new EventDescriptor(30, 0, 0, 4, 0, 0, 0L);
    this.UnableToConnectToAccelermometer = new EventDescriptor(0x1f, 0, 0, 0, 0, 0, 0L);
    this.InvalidWindowsDetected = new EventDescriptor(0x20, 0, 0, 2, 0, 0, 0L);
    this.HyperVNotEnabled = new EventDescriptor(0x21, 0, 0, 2, 0, 0, 0L);
    this.AskedToConnectExternalSwitches = new EventDescriptor(0x22, 0, 0, 4, 0, 0, 0L);
    this.ConnectedToGuestNotifications = new EventDescriptor(0x23, 0, 0, 4, 0, 0, 0L);
    this.UnableToConnectToGuestNotifications = new EventDescriptor(0x24, 0, 0, 2, 0, 0, 0L);
    this.FailedToSetVmProperties = new EventDescriptor(0x25, 0, 0, 2, 0, 0, 0L);
    this.FailedToInitializeSnapshots = new EventDescriptor(0x26, 0, 0, 2, 0, 0, 0L);
    this.FailedToSetVhd = new EventDescriptor(0x27, 0, 0, 2, 0, 0, 0L);
    this.RdpServerDisconnected = new EventDescriptor(40, 0, 0, 4, 0, 0, 0L);
    this.ScreenshotFailed = new EventDescriptor(0x29, 0, 0, 2, 0, 0, 0L);
    this.AccelerometerSendFailed = new EventDescriptor(0x2a, 0, 0, 2, 0, 0, 0L);
    this.LocationSendFailed = new EventDescriptor(0x2b, 0, 0, 2, 0, 0, 0L);
    this.SnapshotStarted = new EventDescriptor(0x2c, 0, 0, 0, 0, 0, 0L);
    this.SnapshotSucceeded = new EventDescriptor(0x2d, 0, 0, 0, 0, 0, 0L);
    this.SnapshotFailed = new EventDescriptor(0x2e, 0, 0, 2, 0, 0, 0L);
    this.CloseAfterSilentSnapshot = new EventDescriptor(0x2f, 0, 0, 0, 0, 0, 0L);
    this.ApplySnapshotFailed = new EventDescriptor(0x30, 0, 0, 2, 0, 0, 0L);
    this.RemovingSnapshotAfterFailedConnect = new EventDescriptor(50, 0, 0, 0, 0, 0, 0L);
    this.RemovingSnapshotAfterSettingsDidntMatch = new EventDescriptor(0x33, 0, 0, 0, 0, 0, 0L);
    this.ConnectedToShellReadyPipe = new EventDescriptor(0x34, 0, 0, 4, 0, 0, 0L);
    this.UnableToConnectToShellReadyPipe = new EventDescriptor(0x35, 0, 0, 2, 0, 0, 0L);
    this.ConnectedToTouch = new EventDescriptor(0x36, 0, 0, 4, 0, 0, 0L);
    this.UnableToConnectToTouch = new EventDescriptor(0x37, 0, 0, 2, 0, 0, 0L);
    this.TouchSendFailed = new EventDescriptor(0x38, 0, 0, 2, 0, 0, 0L);
    this.SendTextFailed = new EventDescriptor(0x39, 0, 0, 2, 0, 0, 0L);
    this.ReceiveAudioFromGuestWithSpinFailed = new EventDescriptor(0x3a, 0, 0, 2, 0, 0, 0L);
    this.SendMicrophoneDataToGuestFailed = new EventDescriptor(0x3b, 0, 0, 2, 0, 0, 0L);
    this.LoadUserSettingsFailed = new EventDescriptor(60, 0, 0, 0, 0, 0, 0L);
    this.SetGuestSystemTimeAndZoneFailed = new EventDescriptor(0x3d, 0, 0, 2, 0, 0, 0L);
    this.HypervisorNotRunning = new EventDescriptor(0x3e, 0, 0, 2, 0, 0, 0L);
    this.HyperVManagementServiceNotRunning = new EventDescriptor(0x3f, 0, 0, 2, 0, 0, 0L);
    this.UserAlreadyInHyperVAdmin = new EventDescriptor(0x40, 0, 0, 4, 0, 0, 0L);
    this.UserAddedToHyperVAdmins = new EventDescriptor(0x41, 0, 0, 4, 0, 0, 0L);
    this.FailedToAddUserToHyperVAdmins = new EventDescriptor(0x42, 0, 0, 0, 0, 0, 0L);
    this.SendKeyboardEvent = new EventDescriptor(0x43, 0, 0, 4, 0, 0, 0L);
    this.SendKeyboardEventFailed = new EventDescriptor(0x44, 0, 0, 2, 0, 0, 0L);
    this.AudioPlayThreadStarted = new EventDescriptor(0x45, 0, 0, 0, 0, 0, 0L);
    this.AudioPlayThreadExited = new EventDescriptor(70, 0, 0, 0, 0, 0, 0L);
    this.AudioDataReceivedFromGuest = new EventDescriptor(0x47, 0, 0, 0, 0, 0, 0L);
    this.AudioGlitch = new EventDescriptor(0x48, 0, 0, 0, 0, 0, 0L);
    this.AudioPaused = new EventDescriptor(0x49, 0, 0, 0, 0, 0, 0L);
    this.AudioResumed = new EventDescriptor(0x4a, 0, 0, 0, 0, 0, 0L);
    this.AudioDeviceChange = new EventDescriptor(0x4b, 0, 0, 0, 0, 0, 0L);
    this.MicrophoneCaptureThreadStarted = new EventDescriptor(0x4c, 0, 0, 0, 0, 0, 0L);
    this.MicrophoneCaptureThreadExited = new EventDescriptor(0x4d, 0, 0, 0, 0, 0, 0L);
    this.MicrophoneDataSentToGuest = new EventDescriptor(0x4e, 0, 0, 0, 0, 0, 0L);
    this.MicrophoneDeviceChange = new EventDescriptor(0x4f, 0, 0, 0, 0, 0, 0L);
    this.GetNetworkInfoFailed = new EventDescriptor(90, 0, 0, 2, 0, 0, 0L);
    this.IPRenewalInitiated = new EventDescriptor(0x5b, 0, 0, 4, 0, 0, 0L);
} 
```

* * *

**Logging events from the Hyper-V hosted OS**

Let's say you want to know more about how WP8 JITs assemblies or when it does garbage collection. VS2012 ships with analysis tools that profile, store and display that information. For example, here's how to start a profiling session:

![Starting a WP8 analysis session](../Images/78778c6b58d4b552f51e2e2453ea38ce.png)

Once the profiling session is done you can see the "PerfLogs" folder under your app has the data for the profiling session. If you've profiled CPU/Execution then you can see VSPX files in that folder. Rename the VSPX file to ZIP and extract the files it contains. In that ZIP you'll find an ETL file. That ETL file is yet another ETW log we can examine PerfView.

![ETL and VSPX files](../Images/1a6ae094628e150b67e9d2aa44790e55.png)

When we open such an ETL file in PerfView we can see when each class was JITTed, how long it took and the IL & Native sizes. For example our app's App class was JITTed at 123.461ms, for 1.2ms with an IL size of 105 and native size of 289.

![PerfView Jitting data](../Images/c725ec84918b40ef123762f4839da81a.png)

You might also be able to directly use the profiling APIs instead of using VS2012 to capture that data. If that's something you'd like to do, you'll have to reverse engineer VS2012's SilverlightProfiler.*.dll assemblies in order to see what they're doing and recreate it outside VS2012\.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:54:37.757

我一直在寻找控制台或任何其他方式来跟踪 WP8 模拟器上的应用程序执行，而无需附加调试器。看来，因为它在 hyper-v VM 上运行，所以控制台不再可用。

但是我找到了一些解决方法。您可以创建简单的类，将您的消息记录到应用程序的隔离存储中（更多关于隔离存储的[信息](http://dotnetapp.com/blog/2012/08/02/windows-phone-8-shared-core-with-windows-8-file-io/)）。运行应用程序后，您可以使用[Windows Phone Power Tools](http://wptools.codeplex.com/)检查隔离存储的内容（幸运的是，它有一个“刷新”选项，因此您可以在模拟器上执行一些操作，然后只需修改隔离存储）。

# ruby-on-rails - Macports 的 postgres 安装不适用于 ruby on rails

> ID：14227850
> 
> 赞同：0
> 
> 时间：2013-01-09T03:29:32.337
> 
> 标签：ruby-on-rails, postgresql, macports, localserver

我正在尝试安装 Postgresql，以便与使用 postgres 的现有 Ruby on Rails 项目一起工作。但是，每次我`$ rails s`在项目目录中运行以启动本地服务器时，都会收到此错误。

```
=> Booting Thin
=> Rails 3.2.9 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/opt/local/lib/ruby/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load':
/Users/******/Documents/Jellyfish/config/initializers/session_store.rb:3: syntax
error, unexpected ':', expecting $end (SyntaxError)
...sion_store :cookie_store, key: '_Jellyfish_session'
                          ^
from /opt/local/lib/ruby/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load'
from /opt/local/lib/ruby/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
from /opt/local/lib/ruby/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load'
from /opt/local/lib/ruby/gems/1.8/gems/railties-3.2.9/lib/rails/engine.rb:588
from /opt/local/lib/ruby/gems/1.8/gems/railties-3.2.9/lib/rails/engine.rb:587:in `each'
from /opt/local/lib/ruby/gems/1.8/gems/railties-3.2.9/lib/rails/engine.rb:587
from /opt/local/lib/ruby/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `instance_exec'
from /opt/local/lib/ruby/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `run'
from /opt/local/lib/ruby/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:55:in `run_initializers'
from /opt/local/lib/ruby/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `each'
from /opt/local/lib/ruby/gems/1.8/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `run_initializers'
from /opt/local/lib/ruby/gems/1.8/gems/railties-3.2.9/lib/rails/application.rb:136:in `initialize!'
from /opt/local/lib/ruby/gems/1.8/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `send'
from /opt/local/lib/ruby/gems/1.8/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /Users/******/Documents/Jellyfish/config/environment.rb:5
from /opt/local/lib/ruby/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
from /opt/local/lib/ruby/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
from /opt/local/lib/ruby/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
from /opt/local/lib/ruby/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
from /Users/******/Documents/Jellyfish/config.ru:3
from /opt/local/lib/ruby/gems/1.8/gems/rack-1.4.2/lib/rack/builder.rb:51:in `instance_eval'
from /opt/local/lib/ruby/gems/1.8/gems/rack-1.4.2/lib/rack/builder.rb:51:in `initialize'
from /Users/******/Documents/Jellyfish/config.ru:0:in `new'
from /Users/******/Documents/Jellyfish/config.ru:0 
```

我怀疑这个问题与我的 database.yml 文件中的登录信息或我的 postgres 安装有关。

我已经使用 macports 和 command 安装了 postgres `sudo port install postgresql83 postgresql83-server`，并且 gem 同时运行了`sudo env ARCHFLAGS="-arch x86_64" gem install pg`和`gem install pg -- --with-pg-config=/opt/local/lib/postgresql83/bin/pg_config`.

我在 database.yml 文件中尝试了几种用户名/密码组合，例如我自己的计算机用户名/密码、postgres/空白密码、pg/空白密码、postgres/系统密码，但它们似乎都没有工作。

我能想到的最后一件事是，当我尝试使用

```
sudo mkdir -p /opt/local/var/db/postgresql83/defaultdb
sudo chown postgres:postgres /opt/local/var/db/postgresql83/defaultdb
sudo su postgres -c '/opt/local/lib/postgresql83/bin/initdb -D /opt/local/var/db/postgresql83/defaultdb' 
```

正如安装程序所建议的，它给了我这个错误：

```
shell-init: error retrieving current directory: getcwd: cannot access parent directories: Permission denied
could not identify current directory: Permission denied
could not identify current directory: Permission denied
could not identify current directory: Permission denied
The program "postgres" is needed by initdb but was not found in the
same directory as "initdb".
Check your installation. 
```

我希望这是足够的信息。我发现了几个人们遇到类似问题的问题，但似乎没有一个解决方案对我有用。非常感谢您阅读本文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:43:30.010

我不能保证 Postgres 安装正常，但这里的实际问题是您在 Ruby 1.8 上运行 rails 3.2.9。您遇到的具体错误位于 config/initializers/session_store.rb 中，可以通过将 key: '_Jellyfish_session' 更改为 :key => '_Jellyfish_session' 来修复，但是之后您也可能会遇到其他错误。我认为理论上 Rails 3.2.9 应该与 ruby​​ 1.8 一起使用，但如果可能的话，我建议更新到 1.9。

再看一遍之后，您应该可以通过执行以下操作使用 1.8 设置 rails 应用程序：

```
rails new myappname --old-style-hash 
```

这会将所有默认文件设置为使用 1.8 样式的哈希，如下所示：

```
{ :key => 'value' } 
```

而不是像这样的新样式：

```
{ key: 'value' } 
```

请注意，1.9 支持这两种样式，但 1.8 仅支持前者

# c++ - 如何将地址转换为 GDB 中的特定类型变量？

> ID：14227856
> 
> 赞同：3
> 
> 时间：2013-01-09T03:30:00.870
> 
> 标签：c++, linux, debugging, gcc, gdb

我在我的日志文件中得到了一个地址，例如 0x7fc9e401a02a，我知道这个地址是一个 Connection 类型的指针。

然后我启动GDB，我想知道的是：如何将此地址转换为Connection*类型的临时变量，并显示Connection*的相关信息？

如何做到这一点，任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:27:09.573

因为我的 Connection 类有一个命名空间，所以我应该做如下：

```
print * ('MyNameSpace::Connection' *) 0x7fc9e401a02a 
```

感谢 JaredC 和 dbrank0 的回答。

# php - 使用仅工作一次的jquery加载函数重新加载div以及如何传递变量

> ID：14227858
> 
> 赞同：1
> 
> 时间：2013-01-09T03:30:07.687
> 
> 标签：php, jquery, mysql, function, load

我对脚本的了解非常有限，所以我希望你们能帮助我解决我遇到的一个小问题......

单击链接时，我正在使用以下 jquery 函数用新内容刷新 div

```
<script> 
$(function() {       
$("#myButton").click(function() {
$("#loaddiv").fadeOut('slow').load("reload.php").fadeIn("slow");
});
});
</script> 
```

我的问题是，我需要将 2 个变量发送到 reload.php 页面以在 mysql 查询中使用（我不知道如何实现），我还需要使多个链接与这个函数一起工作，目前我有具有相同 id 的多个链接，只有第一个链接有效，所以我想我必须将不同的 id 关联到函数才能使其工作，我该怎么做？

这是我使用它的页面：[http ://www.emulegion.info/teste/games/game.php](http://www.emulegion.info/teste/games/game.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T03:41:01.160

您可能希望在第一行使用文档就绪而不是函数，因为这将确保在整个页面（和所有元素）加载之前不会执行代码。

然后您可以使用淡入淡出和加载的回调函数及时执行操作。

您可以在 .php 之后添加其他变量，然后可以在您的 reload.php 文件中将这些变量读取为 $var1 = $_GET['var1']; 为了安全起见，请确保对这些进行消毒。

```
<script type="text/javascript">

// execute when document is ready
$(document).ready(function() {

  // add click handler to your button
  $("#myButton").click(function() {

    // fade div out
    $("#loaddiv").fadeOut('slow',function(){

      // load new content
      $("#loaddiv").load("reload.php?var1=foo&var2=bar",function(){

        // content has finished loading, fade div in.
        $("#loaddiv").fadeIn('slow');

      }); // end load content

    });  // end fade div out

  }); // end add click to button

}); // end document ready

</script> 
```

对于不同的变量，您可以将 HTML5 样式变量添加到您的按钮。

```
<input type="button" id="myButton" data-var1="foo" data-var2="bar" /> 
```

您可以在单击按钮时检索它：

```
// add click handler to your button
  $("#myButton").click(function() {

  // get vars to use
  var var1 = $(this).data('var1');
  var var2 = $(this).data('var2');

  ... 

  load("reload.php?var1="+var1+"&var2="+var2 
```

如果您有多个按钮/链接，我会使用类而不是 id“myButton”。这样您就可以使用上述脚本将该功能应用于所有按钮。只需将“#myButton”替换为“.myButton”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:36:37.877

首先，您应该使用 .on('click', function() 或 .live('click', function() 来解决您的一键式问题。

您需要执行以下操作：

```
<script> 
$(function() {       
$("#myButton").on('click', function() {
var a = 'somthing';
var b = 'something_else';
$.post('url.php', {param1: a, param2: b}, function(data) {
   //data = url.php response
  if(data != '') {
   $("#loaddiv").fadeOut('slow').html(data).fadeIn("slow");
  }
});
});
});
</script> 
```

然后你可以只`var_dump($_POST);`输入 url.php 来找出正在发送的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T03:39:58.820

尝试创建一个`function`可以接受您想要的参数的。像：

```
$(document).ready(function(){
    $('.link').click(function(){
        reload(p1,p2);
    });
});

function reload(param1, param2){
    $("#loaddiv").fadeOut('slow').load("reload.php?param1="+param1+"&param2="+param2).fadeIn("slow");
} 
```

但是通过执行上述代码，您`reload.php`应该使用`$GET`. 此外，您需要`class`为链接使用名称，而不是`id`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T04:36:44.783

```
<script type="text/javascript">

// execute when document is ready
**$(document).ready(function() {**

  **$("#myButton").click(function() {**

    **$("#loaddiv").fadeOut('slow',function(){**

      **$("#loaddiv").load("reload.php?var1=foo&var2=bar",function(){**

        // content has finished loading, fade div in.
        $("#loaddiv").fadeIn('slow');

      }); 

    });  
  }); 
}); 

</script>
  $("#myButton").click(function() {

  // get vars to use
  var var1 = $(this).data('var1');
  var var2 = $(this).data('var2'); 
```

# yii - 与 Yii webapp 共享 sqlite2 数据库

> ID：14227860
> 
> 赞同：0
> 
> 时间：2013-01-09T03:30:32.200
> 
> 标签：yii, sqlite2

嗨，我有一个 PHP webapp 正在使用的 sqlite2 数据库，我想要一个 Yii webapp 来访问它。目前我将 db 文件复制到本地服务器，并将 config/main.php 更改为：

```
 'db'=>array(
        'connectionString' => 'sqlite:'.dirname(__FILE__).'/../data/thedatabase.db',
    ), 
```

当我运行 Gii 模型生成器时，我得到：

```
CDbException

CDbCommand failed to execute the SQL statement: CDbCommand failed to prepare the SQL statement: SQLSTATE[HY000]: General error: 26 file is encrypted or is not a database. The SQL statement executed was: SELECT DISTINCT tbl_name FROM sqlite_master WHERE tbl_name<>'sqlite_sequence' 
```

顺便说一句，我可以使用将数据库转换为 SQL

[将 sqlite2 数据库导出到 SQL](https://stackoverflow.com/questions/11443249/exporting-sqlite2-database-to-sql)

虽然我希望数据库保留为 sqlite2 数据库，以便 Yii 应用程序可以访问最新的用户信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:46:55.420

经过一番思考，在 Yii 项目中使用旧 PHP 项目中的一些代码看起来会更简单......

```
$db = sqlite_open($databasefilename, 0666, $sqliteerror);
$query = sqlite_query($db, "SELECT password FROM user WHERE username='$username'");
$row = sqlite_fetch_array($query);
if ($row) {
    return $row[password];
} 
```

编辑：使用该代码时出现以下错误： undefined function sqlite_open()

我正在使用 PHP 版本 5.4.7 ...

[http://au1.php.net/manual/en/function.sqlite-open.php](http://au1.php.net/manual/en/function.sqlite-open.php)

这里说：PHP 5 < 5.4.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:39:15.180

我通过使用'sqlite2：'而不是'sqlite：'让它与sqlite2数据库一起工作

```
'db2'=>array(
            'class'=>'CDbConnection',
            'connectionString' => 'sqlite2:'.dirname(__FILE__).'/../../../thedatabase.db',
), 
```

我可以做这样的查询：

```
Yii::app()->db2->createCommand($sql)->queryAll()); 
```

要停止**错误 500 对象配置必须是包含“类”元素的数组**'class'=>'CDbConnection' 在 config/main.php 中是必需的。我认为该信息已经包含在某处的第一个数据库连接中。

# .htaccess - htaccess 带有文件夹的干净网址

> ID：14227861
> 
> 赞同：-1
> 
> 时间：2013-01-09T03:30:37.673
> 
> 标签：.htaccess

在获得干净的 URL 工作时，我一直很糟糕。

如何编写 RewriteRule 以转换以下干净的 URL

```
/posts/test-title.php 
```

从

```
post-slug.php?slug=test-title 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:34:10.667

```
RewriteEngine On
Options +FollowSymlinks
RewriteBase /
RewriteRule ^posts/(.*) /post-slug.php?slug=$1 
```

不确定您是否打算在漂亮的 URL 上添加 .php 扩展名.. 似乎是多余的-如果这样做，那么您可以删除 post-slug.php 中的扩展名

```
 $slug_with_ext = str_replace(".php", "", $slug); 
```

# c++ - 链接器错误 LNK2019？

> ID：14227863
> 
> 赞同：0
> 
> 时间：2013-01-09T03:30:59.510
> 
> 标签：c++, visual-studio-2010, visual-c++

我有以下文件

file1_moduleA.hpp

file1_moduleA.cpp

共享文件.hpp

file1_moduleB.cpp

```
//sharedFile.hpp
extern CustomClass *doSomething(CustomClass *var1, const char *var2);
extern CustomClass *doSomethingElse(const char *var1);

template <class MYCLASS_A>
void myFunction(CustomClass *var1, const char* var2){
assert(somthing);
if (condition){
    new (MYCLASS_A);
}
}

//file1_moduleA.cpp
#include "sharedFile.hpp"
// Contains the definitions of doSomething and doSomethingElse among others

//file1_moduleA.hpp
// Other declarations

//file1_moduleB.cpp
#include"sharedFile.hpp"

//...SNIPPETS OF CODE
void someFunction(CustomClass* var1){
doSomething(var1, "FOO");
}
//... 
```

以下是在一个 Visual Studio 项目中，项目 A：file1_moduleA.hpp、file1_moduleA.cpp 和 sharedFile.hpp

以下是在另一个VS项目，项目B：file1_moduleB.cpp，file1_moduleB.hpp

项目 A 编译和链接完美，而项目 B 编译但在**file1_moduleB.cpp 中的 someFunction处为****CustomClass *doSomething(CustomClass *var1, const char *var2)提供未解析的符号**

 **我尝试过**定义**有和没有外部的函数；尝试在 file1_moduleA.hpp 中为模板使用单独的文件；尝试在 VS 中引入 ProjectB 和 ProjectA 之间的依赖关系，但似乎没有任何效果。我不确定为什么在链接期间找不到定义。但是，正在创建 ProjectA.lib。

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:40:46.897

如果您使用的是 Visual Studio，并且这些是不同的项目，则使项目 B 依赖于项目 A。

右键单击解决方案。转到项目依赖项。

选择项目 B。

单击项目 A（使项目 B 依赖于项目 A）

重建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:21:42.217

您是否在项目 B 中包含共享文件？**

# protobuf-net - 包含数据表的 Protobuf-Net 对象

> ID：14227864
> 
> 赞同：1
> 
> 时间：2013-01-09T03:31:01.513
> 
> 标签：protobuf-net

我正在使用 DataTable ProtoRead/ProtoWrite 来序列化 DataTables，它工作正常。我的问题是，如果我的业务对象有一个字段的 DataTable，我如何告诉运行时模型对 DataTable 使用特定的序列化例程？

谢谢。

# node.js - Node.js Superagent 没有一致地填充结果

> ID：14227865
> 
> 赞同：0
> 
> 时间：2013-01-09T03:31:03.500
> 
> 标签：node.js, express

我有这条路线可以查询 API 以获取有关项目的信息。它使用超级代理发布获取请求，传递一些带有 .set 的标头，并且 project_results 应该包含数据。

现在问题来了：我可以为这个特定的路线/项目加载页面 20 次......其中 19 次它会完美运行，但随机它会抛出一个错误：

```
TypeError: Cannot read property 'creator' of null 
```

这个错误指出了这条线：with`if(project.creator == req.signedCookies.user_3rb._id) {`

所以我知道它正在超越：`if(project_results.status == '200') {`

并且因为我一遍又一遍地查看同一个项目（而且我知道所有项目都有一个创建者，所以我检查了数据库）

我的问题是为什么有时它找不到 project_results 变量的这个属性？它非常不一致..我认为 project_results 在通过代码之前已完全填充...因为它通过了状态检查，我们知道 project_results 变量中至少有一些数据..

```
app.get('/user/projects/:project_id', function(req, res, next) {
    var agent = superagent.agent();
  var project = {};

    project.id = req.params.project_id;

    agent
        .get(apihost + '/api/project/'+project.id)
        .set('api_key', apikey)
        .set('access_token', user.access_token)
        .end(function(project_error, project_results) {

            if (project_error) {
        console.log(project_error);
            }

            if(project_results.status == '200') { 

                project = JSON.parse(project_results.text);

                // Check if we are the owner of the project
                if(project.creator == req.signedCookies.user_3rb._id) { 
                    project.owner = true;
                }

                ...... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:39:33.000

我是superagent的[贡献者之一。](https://github.com/visionmedia/superagent/graphs/contributors)

我建议隔离测试用例，而不是尝试直接在您的应用程序中进行调试。

一种简单的方法是创建一个非常短的快速应用程序，该应用程序始终返回对您尝试到达的路线的硬编码、完美响应 - 然后查看`project`20 次是否仍然为空 1：

```
var app = express();

app.use(function(req, res, next) {
  res.send({
    // your data hardcoded here
  });
});

app.listen(3000); 
```

如果 20 次仍然为 null 1，请[作为问题提交](https://github.com/visionmedia/superagent/issues)，我会检查出来。如果不是，那么很可能发生了其他事情 - 可能没有从数据库中始终如一地获取数据，或者在获取和渲染之间存在竞争条件。

# macros - 用于宏对齐的 Visual Studio 插件

> ID：14227868
> 
> 赞同：1
> 
> 时间：2013-01-09T03:31:27.013
> 
> 标签：macros, format, alignment

如何轻松格式化 C++ 宏定义？我的代码如下：

```
#define SADSKKHDJJKSDF 1
#define FD 2
#define KJDSKJFD 3 
```

我想要的是这样的：

```
#define SADSKKHDJJKSDF 1
#define FD             2
#define KJDSKJFD       3 
```

现在，我正在使用 vs2008 plubin“AStyle”，它将对我的代码异常宏有很大帮助。

是的，谁能帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:40:36.973

您可以使用代码对齐插件[http://visualstudiogallery.msdn.microsoft.com/7179e851-a263-44b7-a177-1d31e33c84fd/](http://visualstudiogallery.msdn.microsoft.com/7179e851-a263-44b7-a177-1d31e33c84fd/)

以下是设置说明[http://www.codealignment.com/ForVisualStudio.html](http://www.codealignment.com/ForVisualStudio.html)

然后你可以选择你的文本。使用“AlignByString”并检查“从插入符号位置对齐”

# sql-server - 在sql server中转换语法

> ID：14227872
> 
> 赞同：0
> 
> 时间：2013-01-09T03:32:03.163
> 
> 标签：sql-server, sql-server-2012

这些说法有什么问题？

```
ALTER PROCEDURE [cfg].[SetBooleanConfiguration]
@key varchar(50),
@value bit
AS
BEGIN

    exec cfg.SetConfiguration @key=@key, @datatype='Boolean', @value=CONVERT(varchar(4000),@value)

END 
```

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms187928.aspx)，我确信`CONVERT`语法写得很好。但是 SSMS 抱怨附近有不正确的语法`CONVERT`。怎么了？

**编辑：**

下面的语句运行良好：

```
exec cfg.SetConfiguration @key='aa', @datatype='Boolean', @value='1' 
```

但是，下面的陈述给了我错误：

```
exec cfg.SetConfiguration @key='aa', @datatype='Boolean', @value=CONVERT(varchar(4000),1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:39:28.663

@value 的数据类型是位？您是否尝试将其转换为 varchar(4000)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:40:08.197

试试这个

```
ALTER PROCEDURE [cfg].[SetBooleanConfiguration]
@key varchar(50),
@value bit
AS
BEGIN
    DECLARE @convertedValue varchar(1)

    SET @convertedValue=CONVERT(varchar(1),@value)

    exec cfg.SetConfiguration @key=@key, @datatype='Boolean', @value=@convertedValue

END 
```

# ruby-on-rails - 当一次使用很少的参数请求它时，我怎样才能使它成为 RESTful？

> ID：14227875
> 
> 赞同：0
> 
> 时间：2013-01-09T03:32:43.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我的路由就是这样。但是如果流派是空的呢？
它不会重定向到 example.com/shops/newest_first//california 吗？
我该如何解决这种路由和参数问题？

**路线.rb**

```
match 'shops/:sort/:genre/:area', :to => 'shops#index' 
```

**看法**

```
<%= form_tag shops_path, :method => :get do %>
    <%= select_tag :sort, options_from_collection_for_select(Sort.all, 'id', 'name', params[:sort]), :prompt => "Newest first" %>
    <%= select_tag :genre, options_from_collection_for_select(Genre.all, 'id', 'name', params[:genre]), :prompt => "all" %>
    <%= select_tag :area, options_from_collection_for_select(Area.all, 'id', 'name', params[:area]), :prompt => "all" %>
<% end %> 
```

**另一种观点**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:59:43.830

我会考虑将 GET 参数用于区域和排序等内容，因为您正在过滤其他资源的索引。您还可以查看指南中有关[动态段](http://guides.rubyonrails.org/routing.html#dynamic-segments)的部分，尽管这对中间的空段没有帮助。

# backbone.js - 用于主干应用程序的 Google Analytics 事件跟踪的在线资源

> ID：14227882
> 
> 赞同：2
> 
> 时间：2013-01-09T03:33:44.517
> 
> 标签：backbone.js, google-analytics, event-tracking

我试图在网上找到一些资源，以便在 Backbone 应用程序中使用 Google Analytics 的事件跟踪功能，而我唯一能找到的是[来自 airbnb 的博客文章](http://nerds.airbnb.com/how-to-add-google-analytics-page-tracking-to-57536)，它使用了 CoffeeScript。有谁知道常规 javascript Backbone 应用程序的任何资源？我以前没有使用过事件跟踪功能，因此感谢基本资源......

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:47:03.730

您可以在适当的时候将事件推送到队列中。

因此，例如，我们有一个单页应用程序，尽管我们从不重新加载页面，但我们想要跟踪其页面浏览量。

为了实现这个目标，我们在所有路由器事件上附加了一个监听器，它将每个新的页面视图推送到`_gaq`堆栈中。（这大大简化了。）

```
router.on("route", function(page) {
    _gaq.push(['_trackPageview', page]);      
}); 
```

这会将 page 参数推送到 Google Analytics 跟踪堆栈中。只需确保在本次通话之前您已设置 Google Analytics。

例如，对于事件，我们有时想要跟踪被按下的按钮。因此，我们只需将`_trackEvent`包含我们正在推送的详细信息的对象推送到队列中。

我建议您在整个应用程序中提供一个抽象此功能的函数，而不是在您的页面上放置大量`_gaq.push`代码，例如：

```
var track = function(event, payload){
    _gaq.push[event, payload];
}; 
```

这将使您与 Analytics API 的更改隔离开来，并允许您轻松地将其他报告位置添加到您的跟踪事件中。

# ruby-on-rails - sanize gem 的换行符和空格错误

> ID：14227887
> 
> 赞同：2
> 
> 时间：2013-01-09T03:34:04.707
> 
> 标签：ruby-on-rails, sanitize

我的 Sanitize clean 函数更改代码：

```
<h1>Test</h1>\r\n\r\n<ol>\r\n  <li>Foo</li>\r\n  <li>Bar</li>\r\n</ol>\r\n\r\n<p>Test end.</p> 
```

至

```
<h1>Test</h1>\r\n\r\n<ol>\n<li>Foo</li>\r\n  <li>Bar</li>\r\n</ol><p>Test end.</p>" 
```

生成的净化代码几乎完全相同；除了返回字符之外，差异非常小：

*   第一个列表项之前的换行符后的两个空格（在有序列表中） 列表项
*   以及结束有序列表标记后的换行符。

关于为什么会这样的任何想法？

# mysql - MySQL 信号重复键错误

> ID：14227890
> 
> 赞同：4
> 
> 时间：2013-01-09T03:34:13.007
> 
> 标签：mysql, triggers

我有一个表，其中包含一个 ENUM 字段。我希望 ENUM 的特定值要求引用 ID 列的唯一性。所以假设我有这个：

```
`id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
`type` ENUM('single','multi') NOT NULL,
`refid` INT UNSIGNED NOT NULL,
`extra` TEXT,
PRIMARY KEY (`id`) 
```

我想`(type,refid)`成为唯一的钥匙，但前提`type`是 is `single`。这不能用传统的键来完成，所以我想我会使用 Trigger 来检测一行的插入，检查 if `type='single'`，查找带有 的行，如果`type='single' and refid=new.refid`找到，则抛出一个重复的条目错误。

我使用的是 MySQL 5.5，所以`SIGNAL SQLSTATE`我可以使用。我可以使用它来触发 Duplicate Key 错误以处理`ON DUPLICATE KEY UPDATE`查询的一部分吗？如果可以，如何处理？

作为替代方案，我可以更新触发器中的行并返回一般错误条件，但我认为工作会更好（或至少更直观）`ON DUPLICATE KEY UPDATE`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:54:44.090

`REPLACE INTO`. 卧槽！忘了这一切。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T04:06:55.310

试试下面的触发器。我不擅长编写触发器。我还没有执行下面的代码。您可以将其用作原型。

```
CREATE TRIGGER checkDuplicateEntry
   BEFORE INSERT OR UPDATE OF type, ref_id ON employees
   DECLARE @duplicateCount INT;
   FOR EACH ROW
   IF ( new.type <> 'single' )
        BEGIN
           @duplicateCount = count(*) from yourTableName where type = 'single' AND refid = new.refid
        END;

   IF ( duplicateCount  > 0 )
        BEGIN
             SIGNAL SQLSTATE VALUE '99999'
             SET MESSAGE_TEXT = 'Duplicate Entry';
        END 
```

# linux - 如何从标题的扇区起始地址估计文件大小？

> ID：14227893
> 
> 赞同：0
> 
> 时间：2013-01-09T03:34:36.013
> 
> 标签：linux, file, terminal

假设我在 linux 分区的未分配空间中有一个已删除的文件，我想检索它。

假设我可以通过检查文件头来获得文件的起始地址。

有没有一种方法可以估计要分析的块数（这取决于图像的大小。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:56:43.417

一般来说，Linux/Unix 不支持恢复被删除的文件——如果它被删除了，它就应该消失了。这也有利于安全 - 一个用户不应该能够通过创建跨越几乎所有可用空间的巨大空文件来恢复被另一个用户删除的文件中的数据。

一些文件系统甚至支持所谓的安全删除——也就是说，它们可以在删除时自动擦除文件块（但这并不常见）。

您可以尝试编写一个实用程序，它将您的文件系统安装在的整个分区（例如，`/dev/sda2`）打开为一个大文件，并读取它并扫描原始数据的残余，但如果文件是碎片化的（这很可能） ，您能够以某种可用形式恢复大部分数据的可能性非常小。

说了这么多，有一些实用程序试图比简单的扫描更智能，并且可以尝试在 Linux 上取消删除您的文件，例如[extundelete](http://extundelete.sourceforge.net/)。它可能对你有用，但永远不能保证成功。当然，您必须是 root 才能使用它。

最后，如果您希望能够从该文件系统中恢复任何内容，您应该立即卸载它，并使用或压缩`dd`管道对其进行备份以节省所需空间。`dd``gzip`

# java - 为什么 getDocumentFilter 需要强制转换为 AbstractDocument？

> ID：14227894
> 
> 赞同：1
> 
> 时间：2013-01-09T03:34:38.790
> 
> 标签：java, swing, user-interface, jtextpane

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package texteditor;
import javax.swing.*;
import javax.swing.text.*;
import javax.swing.event.*;

/**
 *
 * @author
 */
public class TextPad implements DocumentListener,ChangeListener{
    private JTextPane textArea;
    private Document textDoc;

    private int selectionOffset;
    private int selectionLength;

    public void init()
    {
        //System.out.println("Constructor invoked");
        // TODO code application logic here
        JFrame window = new JFrame("Text Editor");
        //JMenuBar menuBar = window.getJMenuBar();

        /**
        //Create menu bar
        JMenuBar menuBar= new JMenuBar();
        //File Menu
        JMenu fileMenu = new JMenu("File");
        fileMenu.add(new JMenuItem("Save"));
        * */

       // menuBar.add(fileMenu);
       //window.setJMenuBar(menuBar);

        this.textArea= new JTextPane();

        this.textDoc = this.textArea.getDocument();
        this.textDoc.addDocumentListener(this);
        this.textArea.getCaret().addChangeListener(this);
        //System.out.println(d.getClass());

        //override  default text generation ****THIS LINE******
       ((AbstractDocument)this.textDoc).getDocumentFilter();

        //Add scorllable interface in jtextpane
        window.add(new JScrollPane(this.textArea));

        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setVisible(true);
    }
    public void changedUpdate(DocumentEvent e)
    {
       //System.out.println("changed");

    }
    public void removeUpdate(DocumentEvent e)
    {
          System.out.println("removed");
    }

    public void insertUpdate(DocumentEvent e)
    {

        try
        {
          System.out.println(this.textDoc.getText(0,this.textDoc.getLength()));

        }
        catch(Exception ex)
        {
            System.err.println(ex);
        }

    }
    /**
     *
     * @param e
     */
    public void stateChanged(ChangeEvent e)
    {
        System.out.println(this.textArea.getCaret().getMark());
    }

} 
```

为什么强制转换为`abstractDocument`as`((AbstractDocument)this.textDoc).getDocumentFilter();`有效，但没有强制转换它 `this.textDoc.getDocumentFilter();`会引发找不到方法的错误。谁能解释一下？

**编辑：**

```
if(this.textDoc instanceof AbstractDocument)
        {
            System.out.println("Yes it is");
        } 
```

prints`Yes it is`这也暗示它是一种`AbstractDocument`. 我不明白为什么调用`AbstractDocument`抛出错误的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:14:01.323

HoverCraft 是对的。使用 Java，您只能根据对象的转换方式访问对象的方法和属性。所以，为了证明

```
public interface Fooer {
    public int doFoo();
}

public class Foo implements Fooer{
    public int doFoo(){return 0;}
    public void doNoFooer(){}
}

public class Bar extends Foo {
    public void doYesFooer(){}
} 
```

如果您使用这些定义会发生以下情况：

```
Foo foo = new Bar();
foo.doNoFooer(); // fine because it is a method of Foo
foo.doFoo();
foo.doYesFooer(); // causes an error because the variable is improperly typed.

Fooer fooer = foo;
fooer.doFoo(); // find because it is part of the definition of Fooer
fooer.doYesFoo(); // causes an error because the variable is improperly typed.
fooer.doNoFoo(); // causes an error because the variable is improperly typed.

Bar bar = (Bar) foo;
// notice that the next three do not cause errors.
bar.doYesFooer();
bar.doNoFooer();
bar.doFoo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:43:03.037

要扩展 cwallenpoole 先前的答案并说明 Java 以这种方式工作的原因*，*请考虑以下代码片段

```
class Foo {
  int doFoo() {return 0;}
}

class Bar extends Foo {
  int doBar() {return 1;}
}

class FooBar {
  static int useBar(Foo foo) {
    ((Bar) foo).doBar();
  }
}

Bar someBar = new Bar();
Foo someFoo = new Foo();
FooBar.useBar(someBar) // compiles, no runtime error
FooBar.useBar(someFoo) // compiles, runtime error 
```

Java 的类型系统旨在使第二次调用成为编译时错误，而不是潜在的难以调试的运行时错误。显然，在此示例中，调试或添加 instanceof 检查并不难。但是，使用强制类型转换会破坏类型系统，并且还会破坏类型系统为程序员提供的任何编译时安全性，这是首先使用静态类型语言的主要原因之一。

明确地说，以下是编译时错误，警告程序员根据变量的类型，变量不一定具有该功能，即使子类定义了它。

```
class FooBar {
  static int useBar(Foo foo) {
    foo.doBar();
  }
} 
```

# javascript - 想了解 iframe 突破代码

> ID：14227895
> 
> 赞同：2
> 
> 时间：2013-01-09T03:34:44.830
> 
> 标签：javascript, iframe, breakout

将此脚本代码（如下）放置在 head 标记之间，我被告知这将不允许页面加载到 iframe 中。

如果这是正确的，是否有任何需要替换为我的自定义 URL 或此代码中的类似内容（例如，`top.location`应该是`top.myurl`）？

还是保持原样，然后将其粘贴到页面顶部？我试图了解这是如何工作的。

```
if (top.location!= self.location) {
  top.location = self.location.href
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:42:44.717

如果将这段代码放在被`iframe`. 它的工作方式是查看（您请求的页面`top`包括`iframe`）和. 如果有不同，那么它会更改 top.location 以匹配.`self``iframe``iframe`

这是一些帮助理解这一点的 ASCII

```
|----[OuterPage.html]------|
|                          |
|    |--[InnerPage.html]-| |
|    |                   | |
|    | top !== self      | |
|    |                   | |
|    |-------------------| |
|                          |
| top === self             |
|                          |
|--------------------------| 
```

如果您单独请求 InnerPage.html（不在 iframe 中），则`top === self`评估结果为 true，但是如果您在 iframe 中请求相同页面，则相同条件将评估为 false。

# antlr - 当有更通用的标记可用时，如何在词法分析期间将连接的标记分开

> ID：14227901
> 
> 赞同：3
> 
> 时间：2013-01-09T03:36:18.063
> 
> 标签：antlr, token, lexer, greedy

我正在研究的语言允许将某些标记粘在一起（例如“intfloat”），我正在寻找一种方法让词法分析器不将它们转换为 ID，以便它们在解析时单独可用。我能想到的最简单的语法是（省略 WS）：

```
B: 'B';
C: 'C';
ID: ('a'..'z')+;
doc : (B | C | ID)* EOF; 
```

对抗：

```
bc
abc
bcd 
```

我想从词法分析器中得到什么：

```
B C
ID (starts with not-a-keyword so it's an ID)
<error> (cannot concat non-keywords) 
```

但正如预期的那样，我得到的是 3 个 ID。

我一直在考虑使 ID 不贪心，但会退化为每个字符的单独标记。我想我可以稍后将它们粘在一起，但感觉应该有更好的方法。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:33:21.157

这是一个解决方案的开始，使用词法分析器将文本分解为标记。这里的诀窍是规则`ID`可以在每次调用时发出多个令牌。这是非标准的词法分析器行为，因此有一些警告：

*   我相信这在 ANTLR4 中不起作用*。*

*   此代码假定所有令牌都排队进入`tokenQueue`.

*   Rule`ID`不会阻止关键字重复，因此`intintint`会生成 tokens `INT` `INT` `INT`。如果这很糟糕，您将需要在词法分析器或解析器端处理它，这取决于您的语法中哪个更有意义。

*   关键字越短，这个解决方案就越脆弱。输入`internal`无效`ID`，因为它以关键字开头，`int`但后跟非关键字字符串。

*   语法会产生我没有删除的警告。如果您使用此代码，我建议您尝试删除它们。

这是语法：

### 多令牌.g

```
grammar MultiToken;

@lexer::members{
    private java.util.LinkedList<Token> tokenQueue = new java.util.LinkedList<Token>();

    @Override
    public Token nextToken() {
            Token t = super.nextToken();
            if (tokenQueue.isEmpty()){
                if (t.getType() == Token.EOF){
                    return t;
                } else { 
                    throw new IllegalStateException("All tokens must be queued!");
                }
            } else { 
                return tokenQueue.removeFirst();
            }
    }

    public void emit(int ttype, int tokenIndex) {
        //This is lifted from ANTLR's Lexer class, 
        //but modified to handle queueing and multiple tokens per rule.
        Token t;

        if (tokenIndex > 0){
            CommonToken last = (CommonToken) tokenQueue.getLast();
            t = new CommonToken(input, ttype, state.channel, last.getStopIndex() + 1, getCharIndex() - 1);
        } else { 
            t = new CommonToken(input, ttype, state.channel, state.tokenStartCharIndex, getCharIndex() - 1);
        }

        t.setLine(state.tokenStartLine);
        t.setText(state.text);
        t.setCharPositionInLine(state.tokenStartCharPositionInLine);
        emit(t);
    }

    @Override
    public void emit(Token t){
        super.emit(t);
        tokenQueue.addLast(t);
    }
}

doc     : (INT | FLOAT | ID | NUMBER)* EOF;

fragment
INT     : 'int';

fragment
FLOAT   : 'float';

NUMBER  : ('0'..'9')+;

ID  
@init {
    int index = 0; 
    boolean rawId = false;
    boolean keyword = false;
}
        : ({!rawId}? INT {emit(INT, index++); keyword = true;}
            | {!rawId}? FLOAT {emit(FLOAT, index++); keyword = true;}
            | {!keyword}? ('a'..'z')+ {emit(ID, index++); rawId = true;} 
          )+
        ;

WS      : (' '|'\t'|'\f'|'\r'|'\n')+ {skip();}; 
```

* * *

### 测试用例 1：混合关键字

*输入*

```
intfloat a
int b
float c
intfloatintfloat d 
```

*输出（代币）*

```
[INT : int] [FLOAT : float] [ID : a] 
[INT : int] [ID : b]
[FLOAT : float] [ID : c] 
[INT : int] [FLOAT : float] [INT : int] [FLOAT : float] [ID : d] 
```

### 测试用例 2：包含关键字的 ID

*输入*

```
aintfloat
bint
cfloat
dintfloatintfloat 
```

*输出（代币）*

```
[ID : aintfloat] 
[ID : bint] 
[ID : cfloat] 
[ID : dintfloatintfloat] 
```

### 测试用例 3：错误 ID #1

*输入*

```
internal 
```

*输出（令牌和词法分析器错误）*

```
[INT : int] [ID : rnal] 
line 1:3 rule ID failed predicate: {!keyword}? 
```

### 测试用例 4：错误 ID #2

*输入*

```
floatation 
```

*输出（令牌和词法分析器错误）*

```
[FLOAT : float] [ID : tion] 
line 1:5 rule ID failed predicate: {!keyword}? 
```

### 测试用例 5：非 ID 规则

*输入*

```
int x
float 3 float 4 float 5
5 a 6 b 7 int 8 d 
```

*输出（代币）*

```
[INT : int] [ID : x] 
[FLOAT : float] [NUMBER : 3] [FLOAT : float] [NUMBER : 4] [FLOAT : float] [NUMBER : 5] 
[NUMBER : 5] [ID : a] [NUMBER : 6] [ID : b] [NUMBER : 7] [INT : int] [NUMBER : 8] [ID : d] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:12:13.000

这是 ANTLR 4 的几乎所有语法的解决方案（只需要目标语言中的一个小谓词）：

```
lexer grammar PackedKeywords;

INT : 'int' -> pushMode(Keywords);
FLOAT : 'float' -> pushMode(Keywords);

fragment ID_CHAR : [a-z];
ID_START : ID_CHAR {Character.isLetter(_input.LA(1))}? -> more, pushMode(Identifier);
ID : ID_CHAR;

// these are the other tokens in the grammar
WS : [ \t]+ -> channel(HIDDEN);
Newline : '\r' '\n'? | '\n' -> channel(HIDDEN);

// The Keywords mode duplicates the default mode, except it replaces ID
// with InvalidKeyword. You can handle InvalidKeyword tokens in whatever way
// suits you best.
mode Keywords;

    Keywords_INT : INT -> type(INT);
    Keywords_FLOAT : FLOAT -> type(FLOAT);
    InvalidKeyword : ID_CHAR;
    // must include every token which can follow the Keywords mode
    Keywords_WS : WS -> type(WS), channel(HIDDEN), popMode;
    Keywords_Newline : Newline -> type(Newline), channel(HIDDEN), popMode;

// The Identifier mode is only entered if we know the current token is an
// identifier with >1 characters and which doesn't start with a keyword. This is
// essentially the default mode without keywords.
mode Identifier;

    Identifier_ID : ID_CHAR+ -> type(ID);
    // must include every token which can follow the Identifiers mode
    Identifier_WS : WS -> type(WS), channel(HIDDEN), popMode;
    Identifier_Newline : Newline -> type(Newline), channel(HIDDEN), popMode; 
```

此语法也适用于 ANTLRWorks 2 词法分析器解释器（即将推出！），适用于除单字符标识符之外的所有内容。由于词法分析器解释器无法评估 in 中的谓词，因此（在解释器中）`ID_START`这样的输入将在通道上生成一个带有文本类型的单个标记。`a<space>``a<space>``WS``HIDDEN`

# hadoop - 有没有人在 hadoop 流作业中使用 mapred.job.tracker=local ？

> ID：14227906
> 
> 赞同：1
> 
> 时间：2013-01-09T03:37:24.967
> 
> 标签：hadoop, streaming, local

在过去的几周里，我们每天使用 hadoop 流计算一些报告。最近我们对我们的程序做了一个改动，如果输入的大小小于10MB，我们会在JobConf中设置mapred.job.tracker=local，那么job就会在本地运行。

但是昨晚，许多作业都失败了，runningJob.getJobState() 返回了状态 3。我不知道为什么，stderr 中什么也没有。

我无法搜索与此问题相关的任何内容。所以我想知道我是否应该在生产模式下使用 mapred.job.tracker=local ？也许它只是hadoop提供的开发中的调试解决方案。

有人知道吗？任何东西，任何信息，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:18:08.040

我相信设置`mapred.job.tracker=local`与您的错误无关，因为`local`默认值也是如此。此配置参数定义 MapReduce 作业跟踪器运行的主机和端口。如果将其设置为“本地”，则作业将作为单个 map 和 reduce 任务在进程内运行。

参考[这里](http://hadoop.apache.org/docs/r1.0.0/mapred-default.html)。

# jsf - HTML doctype 在 JSF 中被删除

> ID：14227910
> 
> 赞同：0
> 
> 时间：2013-01-09T03:37:52.443
> 
> 标签：jsf, jsf-2, facelets

我的`<!DOCTYPE html>`声明正在从我的 JSF 页面中删除，这把事情搞砸了。

同样的问题已经被问过很多次了：

[JSF 中的 HTML 文档类型声明](https://stackoverflow.com/questions/12358196/html-doctype-declaration-in-jsf)

[DocType 未显示在 JSF 的渲染输出中](https://stackoverflow.com/questions/4763313/doctype-is-not-showing-in-the-rendered-output-from-jsf)

[JSF 模板：呈现的页面缺少 DOCTYPE](https://stackoverflow.com/questions/7505219/jsf-template-rendered-page-missing-doctype)

麻烦的是，[这个 Jira 条目](http://java.net/jira/browse/JAVASERVERFACES-2453)说该错误已得到修复。显然不是。我正在使用最新版本：

```
 <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-impl</artifactId>
        <version>2.2.0-m07</version>
    </dependency>

    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.2.0-m07</version>
    </dependency> 
```

作为参考，这里是我的页面：

test_layout.xhtml：

```
<!DOCTYPE html>
<html xmlns:ui="http://java.sun.com/jsf/facelets">
<body>
    <ui:insert name="content"/>
</body>
</html> 
```

test_content.xhtml：

```
<ui:composition 
    xmlns:ui="http://java.sun.com/jsf/facelets"
    template="test_layout.xhtml">

    <ui:define name="content">
        bunch 'o content
    </ui:define>

</ui:composition> 
```

有人有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:33:06.697

我升级到 2.2.0-m08，问题就消失了。

# matlab - 为什么不是球形图？如何在 Matlab 中绘制 3D 极坐标图？

> ID：14227914
> 
> 赞同：2
> 
> 时间：2013-01-09T03:38:08.390
> 
> 标签：matlab, math, polar-coordinates

```
[r,t] = meshgrid(linspace(0,2*pi,361),linspace(0,pi,361));
[x,y]=pol2cart(sin(t)*cos(r),sin(t)*sin(r));
%[x,y]=pol2cart(r,t);
surf(x,y); 
```

![在此处输入图像描述](../Images/8a177f2063004dcf78736498e18cd895.png)

我玩过这个[插件](http://www.mathworks.com/matlabcentral/fileexchange/13200)，但试图为此找到一个默认功能。如何制作 3D 极坐标图？

我正试图帮助这个人在[这里](https://math.stackexchange.com/q/188490/5902)可视化不同的积分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T05:02:23.703

您的代码中有几个问题：

*   您已经使用`sin(theta)*cos(phi)`和`sin(theta)*sin(phi)`位将球坐标转换为笛卡尔坐标。你为什么要调用`pol2cart`这个（此外，我们不是在极坐标中工作！）？
*   正如 natan 指出的那样，`z`您的情节中没有第三维（即）。对于统一半径，`r`在球面域中可以省略，它完全由`theta`和定义`phi`，但在笛卡尔域中，您拥有所有三个`x`和。的公式是（对于单位半径）。`y``z``z``z = cos(theta)`
*   您没有阅读 的文档[`surf`](http://www.mathworks.com/help/matlab/ref/surf.html)，其中说：

    > `surf(Z,C)`绘制 的高度`Z`，这是一个在几何矩形网格上定义的单值函数，并使用矩阵`C`（假定与 大小相同`Z`）为表面着色.

    换句话说，您的`surf(x,y)`线仅绘制矩阵`x`并将其`y`用作颜色图。

这是上面的代码，错误已修复并正确绘制：

```
[f,t] = meshgrid(linspace(0,2*pi,361),linspace(0,pi,361));
x = sin(t)*cos(f);
y = sin(t)*sin(f);
z = cos(t);
surf(x,y,z) 
```

![在此处输入图像描述](../Images/9f03a63a309d479ed76895089f956f99.png)

# ios - 用于搜索实体关系的 nspredicate

> ID：14227916
> 
> 赞同：1
> 
> 时间：2013-01-09T03:38:14.927
> 
> 标签：ios, nspredicate, nsmanagedobject

我为以下结构编写了以下谓词，不确定它是否正常工作：

我有一个 Car.h 托管对象

Car.h - 名称、品牌、型号。

toCarParts 关系 - CarPart.h - 车轮、轮胎、镜子等...

我有一个包含许多 Car.h 对象的数组我只想找到那些有轮胎的对象（所以我必须查看所有对象的 toCarParts，如果任何 CarParts 与我的查询匹配，我需要将那辆车拉到结果数组）

这个谓词会这样做吗？

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY toCarParts.name == [c] %@", carPartString]; 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:53:39.047

我相信这应该对你有用。

```
NSPredicate *predicate = 
   [NSPredicate predicateWithFormat:@"ANY toCarParts.name like %@", carPartString]; 
```

# c# - 为什么我的方法期望错误的返回类型？

> ID：14227917
> 
> 赞同：1
> 
> 时间：2013-01-09T03:38:39.373
> 
> 标签：c#, generics, interface

我有一个定义为接收两个参数的方法。一个是泛型​​类型，另一个是具有泛型返回类型的函数：

```
public class MyHelperClass<TRequest, TResponse>
{
   public TResponse Execute(TRequest request, Func<IDataRecord, TResponse> builder){ ... }
} 
```

然后我有一个对象，它有一个我想作为委托传递的方法

```
public class MyObject
{
   public TResponse BuildMe(IDataRecord rdr){ ... }
}

//call like this
MyHelperClass.Execute(input, myObjectInstance.BuildMe); 
```

但我收到一条错误消息：

“期望使用 'TRequest BuildResponse(IDataRecord)' 的方法

为什么它期望 TRequest 作为返回而不是 TResponse？

![在此处输入图像描述](../Images/84c89389812861250a259908025ffb09.png)

![在此处输入图像描述](../Images/06200ee6f0e2117f17901a68e29d8a4e.png)

![在此处输入图像描述](../Images/28286b7a568f46b10cba692ec22b0304.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T03:42:25.263

因为这：

```
private GetSamyungDataSourceV1<TRequest, TRequest> _getSamyungDataSourceV1; 
```

.. 应该：

```
private GetSamyungDataSourceV1<TRequest, TResponse> _getSamyungDataSourceV1;
                                          // ^^^ this. 
```

..否则，`TResponse`在那个类中是一个`TRequest`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:44:50.407

因为 _getSamyungDataSourceV1 被声明为`GetSamyungDataSourceV1<TRequest, TRequest>`-- 因此它的响应类型是 TRequest。也许应该`TResponse`改为使用第二种类型的参数。

# javascript - jquery在减少边距时定期向左移动

> ID：14227924
> 
> 赞同：0
> 
> 时间：2013-01-09T03:39:27.697
> 
> 标签：javascript, jquery-animate, jquery

我想创建一个动画。当我单击某个按钮时，我的 div 的边距会减少，并且会定期移动。

例如我有一个

`<div style="margin-left:300px"></div> <button>Click to move div 100px to left</button>`

当我单击按钮时，边距会减少，同时会定期向左移动。这里有 jquery 的动画代码吗？

定期移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:45:51.493

试试这个代码：

```
$(document).ready(function(){
  $('button').click(function(){
    $('div').animate({'margin-left': '100px'}, 500);
  });
}); 
```

演示：http: [//jsfiddle.net/amUw9/3/](http://jsfiddle.net/amUw9/3/)

[在http://api.jquery.com/animate/](http://api.jquery.com/animate/)上查看更多信息

# curl - 将 cURL 调用转换为 Coldfusion (cfhttp)

> ID：14227925
> 
> 赞同：4
> 
> 时间：2013-01-09T03:39:39.567
> 
> 标签：curl, coldfusion

这可能很简单，并不完全确定。有没有办法在下面接受这个 cURL 调用（它来自 Big Commerce 的 API）并使用 cfhttp 重写相同的函数？我知道 cfhttp 行为（或可以像）一个 form/method="post" 类型的交易，但我不确定在 cfhttp 标记中使用哪些参数（或它们的名称应该是什么）。任何帮助将不胜感激......我的目标是能够使用 Coldfusion 调用产品列表，此时我可以安排/导出到列表/excel/whatever，但使用 cfhttp 设置实际调用并转换这个 cURL 调用是我所坚持的。

```
curl --request GET \
 --user-agent "Your Client Name/1.0" \
 --header "Authorization: Basic YWRtaW46WW91ckFQSUtleUhlcmU=" \
 https://www.example.com/api/v2/products 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T04:02:57.420

应该是这样的：

```
<cfhttp
    method="get"
    url="https://www.example.com/api/v2/products"
    userAgent="Your Client Name/1.0">
    <cfhttpparam type="header" value="Authorization: Basic YWRtaW46WW91ckFQSUtleUhlcmU=">
</cfhttp> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:32:08.467

这对我有用：

```
<cfhttp method="post" url="#myUrl#">
<cfhttpparam type="header" name="Authorization" value="Basic YWRtaW46WW91ckFQSUtleUhlcmU" />
</cfhttp> 
```

# forms - Delphi 应用程序窗体在启动时显示而不是隐藏

> ID：14227927
> 
> 赞同：3
> 
> 时间：2013-01-09T03:39:51.643
> 
> 标签：forms, delphi, hide, systray

我有一个程序，它不会开始最小化，并在桌面上显示一个非常小的窗口。

图片：http: [//i.imgur.com/j8xus.jpg](http://i.imgur.com/j8xus.jpg)

代码：

程序：

```
program Project4;

uses
  Forms,
  Unit4 in 'Unit4.pas' {Form4};

{$R *.res}

begin
  Application.Initialize;
  Application.MainFormOnTaskbar := false;
  Application.ShowMainForm:=false;
  Application.CreateForm(TForm4, Form4);
  Application.Run;
end. 
```

单元：

```
unit Unit4;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, AppEvnts, ExtCtrls, Menus;

type
  TForm4 = class(TForm)
    TrayIcon1: TTrayIcon;
    ApplicationEvents1: TApplicationEvents;
    PopupMenu1: TPopupMenu;
    Exit1: TMenuItem;
    procedure TrayIcon1DblClick(Sender: TObject);
    procedure ApplicationEvents1Minimize(Sender: TObject);
    procedure ApplicationEvents1Restore(Sender: TObject);
    procedure FormCloseQuery(Sender: TObject; var CanClose: Boolean);
    procedure FormCreate(Sender: TObject);
    procedure Exit1Click(Sender: TObject);
  private
    { Private declarations }
    fCanClose: Boolean;
  public
    { Public declarations }
  end;

var
  Form4: TForm4;

implementation

{$R *.dfm}

procedure TForm4.ApplicationEvents1Minimize(Sender: TObject);
begin
  Hide();
  WindowState := wsMinimized;
end;

procedure TForm4.ApplicationEvents1Restore(Sender: TObject);
begin
  Show();
  WindowState := wsNormal;
  application.Bringtofront;
end;

procedure TForm4.Exit1Click(Sender: TObject);
begin
  fcanclose:=true;
  close;
end;

procedure TForm4.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
begin
  if not fCanClose then
    begin
      hide;
      windowstate:=wsminimized;
      CanClose:=false;
    end
      else
    CanCLose:=True;
end;

procedure TForm4.FormCreate(Sender: TObject);
begin
  fCanClose:=FALSE;
end;

procedure TForm4.TrayIcon1DblClick(Sender: TObject);
begin
  if (windowstate = wsminimized) then
    begin
      Show;
      windowstate := wsnormal;
      application.BringToFront;
    end
     else
    begin
      hide;
      windowstate:=wsminimized;
    end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T06:08:22.957

我创建了您的项目并遇到了同样的问题，直到我将以下代码行更改为`True`：

```
Application.MainFormOnTaskbar := True; 
```

现在，该应用程序似乎可以正常工作，而无需在隐藏之前最小化到桌面的左下角。

# php - 内部服务器错误：从 php 类访问数据？

> ID：14227930
> 
> 赞同：0
> 
> 时间：2013-01-09T03:40:26.313
> 
> 标签：php, class, internal-server-error

我还有一个问题。

当我尝试从以下 php 类获取数据时出现内部服务器错误：

```
<?php
/**
 * Created by JetBrains PhpStorm.
 * User: -Ryuk-
 * Date: 21/11/12
 * Time: 17:08
 * To change this template use File | Settings | File Templates.
  */
class game
{
    private $_serverStatus = "Online";
    private $_numOnline = "32";
    private $_maxPlayers = "50";
    private $_messageOfTheDay = "Welcome to game!";
    private $_Players = "Falcubar2011;Zacardor;";

public function GetStatus()
{
    return this::$_serverStatus;
}

public function GetNumOnline()
{
    return this::$_numOnline;
}

public function MaxPlayers()
{
    return this::$_maxPlayers;
}

public function GetMOTD()
{
    return this::$_messageOfTheDay;
}

public function GetPlayers()
{
    return this::$_Players;
}

public function GetServiceColour()
{
    if(this::GetStatus() != "Online")
        return "#FF0000";
    else
        return "#008000";
}
} 
```

我试图这样称呼它（在 index.php 中）我把它去掉了，所以你不会得到所有的垃圾。

```
$mc = new game();

  <div id="Stats">
        <div id=roundedbox>
            <h1>Info</h1>
            <p>
            <p><strong>IP:</strong> play.game.com</p>
            <br>

            <p>Slots: <?php print $mc->GetNumOnline(); ?> / <?php print $mc->MaxPlayers(); ?></p>
            <br>
            <p>Status: <?php print $mc->GetStatus(); ?></p>
            <br>
            <p>MOTD: <?php print $mc->GetMOTD(); ?></p>
            </div>
    </div> 
```

任何人都知道如何解决我遇到的这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:47:32.527

您的语法`this`完全错误。代替

```
return this::$_serverStatus; 
```

你应该使用

```
return $this->_serverStatus; 
```

同样，您的内部调用`GetStatus()`应该是

```
if ($this->GetStatus() != 'Online') {
    // ... 
```

我建议您从这里开始阅读 - [http://php.net/manual/en/language.oop5.basic.php](http://php.net/manual/en/language.oop5.basic.php)

# php - 禁用 PHP 计数？

> ID：14227940
> 
> 赞同：0
> 
> 时间：2013-01-09T03:42:18.587
> 
> 标签：php

所以，我正在尝试修改我拥有的一段代码，它是一个用于预订的日历。我在日历上发布活动，用户可以通过在任何一天点击链接进行预订。它目前只允许我在任何一天发布 2 个预订活动。这两个不能同时出现。我想改变这一点，我需要它能够同时发布多个可用的位置。例如，如果是一个武术课，有 10 个空位，它应该显示一天中的同一时间有 10 个空位......你明白了......

我相信这是阻止我实现这一目标的原因，但我不确定......

任何帮助深表感谢。谢谢是提前。

```
<script>
    <?php
    if($numslots>0) {
        ?>
        alert('<?php echo $numslots; ?> slots added');
        <?php
    } else if($numslots == -1) {
        ?>
        alert('Days selected are holidays. Cannot make these changes');
        <?php
    } else {
        ?>
        alert('Duplicate slots. Cannot make these changes');
        <?php
    }
    ?>

    document.location.href="calendar_manage.php?calendar_id=<?php echo $_GET["calendar_id"]; ?>&ref=slots";
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:46:41.633

在您的示例中，您一次有十个可用插槽，您需要填充一个新变量.. 让我们称之为 $available_slots.. 您需要使用插槽数填充它，在本例中为十个。所以你最终会...

```
$available_slots = 10;

if($numslots<$available_slots) {
    ?>
    alert('<?php echo $numslots; ?> slots added');
    <?php
} else if($numslots == -1) {
   etc... 
```

注意第一个 if 条件。我们现在检查 $numslots 是否**小于**$available_slots，而不是**大于**零。

# javascript - 如何将 Twitter Bootstrap 与 BoilerplateJS 一起使用？

> ID：14227942
> 
> 赞同：3
> 
> 时间：2013-01-09T03:42:40.847
> 
> 标签：javascript, twitter-bootstrap, boilerplatejs

我正在研究大型单页应用程序的 HTML5/CSS3/JavaScript 库/框架，我发现了 Twitter Bootstrap 和[BoilerplateJS](http://boilerplatejs.org)。这两个库/框架看起来都非常有趣，我们正在考虑同时使用它们。但是，我们想同时使用两者。由于我们没有使用任何一个库/框架的经验，我们认为我们会发布一个（或两个）关于两者结合的问题。

是否可以将 Twitter Bootstrap 与 BoilerplateJS 一起使用？如果是这样，如何将两者一起使用？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:01:17.403

BoilerplateJS 独立于 Twitter Bootstrap 等任何 UI 框架，它们可以有效地组合在一起以创建漂亮的单页应用程序。

Twitter Bootstrap 帮助您构建一致的 UI，您可以使用它为您的组件创建视图，而 BoilerplateJS 帮助您编排您的组件。

你可能知道推荐使用 MVVM/MVC 框架和 BoilerplateJS。如果您像我一样选择 KnockoutJS，您可能需要在视图中为 Twitter Bootstrap 元素使用自定义绑定。

例如，我在我的项目中使用它来将 UI 元素（如[分组按钮](http://twitter.github.com/bootstrap/components.html#buttonGroups)和[预输入](http://twitter.github.com/bootstrap/javascript.html#typeahead)）无缝绑定到视图模型。您只需在视图模型中引用此类绑定代码即可在视图中使用类似这样的内容：

```
<label class="control-label"><strong>How many rooms:</strong></label>
<div class="btn-group" data-toggle="buttons-checkbox">
    <button type="button" class="btn btn-info" data-value="1" data-bind="checkedButtons: RoomNumber">1</button>
    <button type="button" class="btn btn-info" data-value="2" data-bind="checkedButtons: RoomNumber">2</button>
    <button type="button" class="btn btn-info" data-value="3" data-bind="checkedButtons: RoomNumber">3+</button>
</div> 
```

注意`checkedButtons`这里的自定义绑定，加载到视图模型中

```
define(['Boiler', './../../kobuttonbinding' ], function (Boiler, kobuttonbinding) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:15:55.770

我在设计 BoilerplateJS 时看过 Twitter Bootstrap，HTML5 Boilerplate 类型的项目。我看到上述框架非常互补而不是竞争。

BoilerplateJS 提出了一种架构/结构来组织项目中的 JS 代码。Twitter bootstrap 在 BoilerplateJS 没有提出特定的指导线的情况下帮助您进行响应、UI 小部件、样式等。

我认为将 BoilerplateJS（非常专注于 JS 结构）与 Twitter Bootstrap 或 HTML5 Boilerplate（小部件、CSS、HTML 最佳实践）一起使用总是一个聪明的主意。

# powershell - 如何导出具有不同数量属性的对象？

> ID：14227943
> 
> 赞同：0
> 
> 时间：2013-01-09T03:42:48.177
> 
> 标签：powershell

警告 - 我过去曾问过[类似的问题](https://stackoverflow.com/questions/13483674/method-to-export-objects-with-varying-properties)，但这略有不同。

tl;博士; 我想导出具有不同数量属性的对象。例如; 对象 1 可能有 3 个 IP 地址和 2 个 NIC，但对象 2 有 7 个 IP 地址和 4 个 NIC（但不限于此数量 - 它可能是 N 个属性）。

我可以愉快地捕获和构建包含我需要的所有信息的对象。如果我只是将数组输出到控制台，每个对象都会显示其所有属性。如果我想 out-file 或 export-csv 我开始遇到标题周围的问题。

以前[JPBlanc](https://stackoverflow.com/users/608772/jpblanc)建议根据属性的数量对对象进行排序 - 即，具有最多属性的对象将排在第一位，因此将输出最多属性的标题。

假设我已经构建了一个服务器对象，该对象具有基于 IP 地址和 NIC 卡的不同属性。例如;

```
ServerName: Mordor
IP1: 10.0.0.1
IP2: 10.0.0.2
NIC1: VMXNET
NIC2: Broadcom

ServerName: Rivendell
IP1: 10.1.1.1
IP2: 10.1.1.2
IP3: 10.1.1.3
IP4: 10.1.1.4
NIC1: VMXNET 
```

最初，如果您要导出这些对象的数组，则标头将建立在第一个对象（也就是，您只会获得 ServerName、IP1、IP2、NIC1 和 NIC2）的基础上，这意味着对于第二个对象，您将丢失任何后续IP（例如 IP3 和 IP4）。为了纠正这个问题，在导出之前，我根据 IP 属性的数量进行排序 - tada - 第一个对象现在在数组中拥有最多的 IP，因此后续对象的 IP 都不会丢失。

不利的一面是当您拥有第二个可变属性时 - 例如 NIC。一旦我的排序基于 IP 完成，我们就会有标题 ServerName、IP1 - IP4 和 NIC1。这意味着 NIC2 的后续对象属性丢失。

有没有一种可扩展的方式来确保在导出这样的对象时不会丢失数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:30:35.510

尝试：

```
$o1 = New-Object psobject -Property @{
ServerName="Mordor"
IP1="10.0.0.1"
IP2="10.0.0.2"
NIC1="VMXNET"
NIC2="Broadcom"
}

$o2 = New-Object psobject -Property @{
ServerName="Rivendell"
IP1="10.1.1.1"
IP2="10.1.1.2"
IP3="10.1.1.3"
IP4="10.1.1.4"
NIC1="VMXNET"
}

$arr = @()
$arr += $o1
$arr += $o2

#Creating output
$prop = $arr | % { Get-Member -InputObject $_ -MemberType NoteProperty | Select -ExpandProperty Name } | Select -Unique | Sort-Object
$headers = @("ServerName")
$headers += $prop -notlike "ServerName"

$arr | ft -Property $headers 
```

输出：

```
ServerName IP1      IP2      IP3      IP4      NIC1   NIC2    
---------- ---      ---      ---      ---      ----   ----    
Mordor     10.0.0.1 10.0.0.2                   VMXNET Broadcom
Rivendell  10.1.1.1 10.1.1.2 10.1.1.3 10.1.1.4 VMXNET 
```

如果您知道类型（NICS、IPS ..），但不知道计数（例如多少 NICS），您可以尝试：

```
#Creating output
$headers = $arr | % { Get-Member -InputObject $_ -MemberType NoteProperty | Select -ExpandProperty Name } | Select -Unique
$ipcount = ($headers -like "IP*").Count
$niccount = ($headers -like "NIC*").Count

$format = @("ServerName")
for ($i = 1; $i -le $ipcount; $i++) { $format += "IP$i" }
for ($i = 1; $i -le $niccount; $i++) { $format += "NIC$i" }

$arr | ft -Property $format 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:32:54.317

如何获取所有唯一属性标题的列表，然后对所有对象进行选择？当您对不存在的属性的对象进行选择时，它将创建一个空白。

```
$allHeaders = $arrayOfObjects | % { Get-Member -inputobject $_ -membertype noteproperty | Select -expand Name } | Select -unique
$arrayOfObjects | Select $allHeaders 
```

当然，您正在遍历任何对象以获取标题，因此对于大量对象可能需要一段时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:20:39.327

这是我的解决方案尝试。我现在很累，所以希望这是有道理的。基本上，我正在计算最大数量的 NIC 和 IP 注释属性，创建一个具有这些属性数量的占位符对象，将其添加为 CSV 中的第一项，然后将其从 CSV 中删除。

```
# Create example objects
$o1 = New-Object psobject -Property @{
  ServerName="Mordor"
  IP1="10.0.0.1"
  IP2="10.0.0.2"
  NIC1="VMXNET"
  NIC2="Broadcom"
}

$o2 = New-Object psobject -Property @{
  ServerName="Rivendell"
  IP1="10.1.1.1"
  IP2="10.1.1.2"
  IP3="10.1.1.3"
  IP4="10.1.1.4"
  NIC1="VMXNET"
}

# Add to an array
$servers = @($o1, $o2)

# Calculate how many IP and NIC properties there are
$IPColSize = ($servers | Select IP* | %{($_ | gm -MemberType NoteProperty).Count} | Sort-Object -Descending)[0]
$NICColSize = ($servers | Select NIC* | %{($_ | gm -MemberType NoteProperty).Count} | Sort-Object -Descending)[0]

# Build a place holder object that will contain enough properties to cover all of the objects in the array.
$cmd = '$placeholder = "" | Select ServerName, {0}, {1}' -f (@(1..$IPColSize | %{"IP$_"}) -join ", "), (@(1..$NICColSize | %{"NIC$_"}) -join ", ")
Invoke-Expression $cmd

# Convert to CSV and remove the placeholder
$csv = $placeholder,$servers | %{$_ | Select *} | ConvertTo-Csv -NoTypeInformation
$csv | Select -First 1 -Last ($csv.Count-2) | ConvertFrom-Csv | Export-Csv Solution.csv -NoTypeInformation 
```

# ruby-on-rails - 警告：无法验证 CSRF 令牌的真实性

> ID：14227944
> 
> 赞同：1
> 
> 时间：2013-01-09T03:42:50.663
> 
> 标签：ruby-on-rails, ajax, cross-domain

我无法从我的 shopify 网站向我的 rails 应用程序发出跨域请求，该应用程序作为 shopify 应用程序安装。如标题所述，问题在于我的服务器警告我，`Can't verify CSRF token authenticity`我正在从我的 rails 应用程序返回的表单发出请求，其中包括相关的 CSRF 令牌。该请求是使用 jQuery 的 ajax 方法完成的，并且 preflight OPTIONS 请求由[rack-cors](https://github.com/cyu/rack-cors)处理。

[正如此答案](https://stackoverflow.com/questions/7203304/warning-cant-verify-csrf-token-authenticity-rails)中所建议的那样，我已将 X-CSRF-Token 包含在我的标题中。我的发帖请求是通过表格发出的，所以[这里](https://stackoverflow.com/questions/14039475/rails-3-cant-verify-csrf-token-authenticity)没有回答我的问题。[正如我刚刚通过询问这个问题](https://stackoverflow.com/questions/14226388/should-the-cors-preflight-options-request-return-200-ok)确认的那样，确实正在处理选项请求（在[这个问题](https://stackoverflow.com/questions/13043444/warning-cant-verify-csrf-token-authenticity-error-cors-with-devise-and-to)中提到） 。我已经坚持了一段时间，并且做了一些阅读。

我将尝试逐个代码片段浏览流程代码片段，也许当我写完这篇文章时，我会发现我的问题的答案（如果发生这种情况，那么你永远不会得到有机会阅读本段）。

这是我的控制器中的 new 和 create 方法。

```
class AustraliaPostApiConnectionsController < ApplicationController

  # GET /australia_post_api_connections/new
  # GET /australia_post_api_connections/new.json
  def new
    # initializing variables

    respond_to do |format|
      puts "---------------About to format--------------------"
      format.html { render layout: false } # new.html.erb 
      format.json { render json: @australia_post_api_connection }
    end
  end

  # POST /australia_post_api_connections
  # POST /australia_post_api_connections.json
  def create

    @australia_post_api_connection = AustraliaPostApiConnection.new(params[:australia_post_api_connection])

    respond_to do |format|
      if @australia_post_api_connection.save

        format.js { render layout: false }
      else

        format.js { render layout: false }
      end
    end
  end
end 
```

（我想知道 create 方法中的 respond_to 块，但我认为这不会导致 CSRF 令牌验证失败。）

在我的应用程序中，在 /AUSController/index，我有一个 ajaxified GET 请求，它从 /AUSController/new 中返回表单。我的目标是能够像在我的应用程序中一样从跨域来源进行所有相同的调用。现在 GET 请求适用于两者，因此我将忽略包含“新”表单。最终呈现 HTML 时，表单元素具有以下内容：

```
<form method="post" id="new_australia_post_api_connection" data-remote="true" class="new_australia_post_api_connection" action="http://localhost:3000/australia_post_api_connections" accept-charset="UTF-8">

<!-- a bunch more fields here -->

    <div class="field hidden">
      <input type="hidden" value="the_csrf_token" name="authenticity_token" id="tokentag">
    </div>
  </div>
</div>
</form> 
```

CSRF 令牌是通过调用生成的`form_authenticity_token`，详见上述参考资料[之一](https://stackoverflow.com/questions/7203304/warning-cant-verify-csrf-token-authenticity-rails)。

在这两种情况下，下一步以不同的方式完成：

我的应用程序根据 ajax 请求成功地将新表单返回到商店。我已经在应用程序中对此进行了测试，即从 /controller/index 对 /controller/new 进行 ajax 调用，然后提交表单。这就像一个魅力。在我的应用程序中从成功的 POST 返回的 js 如下：

```
/ this is rendered when someone hits "calculate" and whenever the country select changes
:plain
  $("#shipping-prices").html("#{escape_javascript(render(:partial => 'calculations', :object => @australia_post_api_connection))}") 
```

呈现以下部分，

```
= form_tag "/shipping_calculations", :method => "get" do

  = label_tag :shipping_type
  %br
  - @service_list.each_with_index do |service, index|
    - checked = true if index == 0
    = radio_button_tag(:shipping_type, service[:code], checked)
    = label_tag(:"shipping_type_#{service[:code]}", service[:name])
    = " -- $#{service[:price]}"
    %br 
```

当我从同一个域调用它时，`request.header`包含以下内容：

```
HTTP_X_CSRF_TOKEN
the_token_I_expect=

rack.session
{
  "session_id"=>"db90f199f65554c70a6922d3bd2b7e61", 
  "return_to"=>"/", 
  "_csrf_token"=>"the_token_I_expect=", 
  "shopify"=>#<ShopifyAPI::Session:0x000000063083c8 @url="some-shop.myshopify.com", @token="some_token">
} 
```

并且 HTML 很好地呈现和显示。

然而，从跨域来源来看，事情变得更加复杂。这是 CORS 和 CSRF 令牌和路由以及所有这些小细节开始蔓延的地方。特别是，当我进行 ajax 调用时，我使用以下脚本（它不在我的 rails 应用程序中，它存在于跨域服务器上）。这个 ajax 请求的动作是通过 GET 请求的回调函数附加到提交按钮的，为了完成，我已经包含了 GET 请求。

```
<script>

  var host = "http://localhost:3000/"
  var action = "australia_post_api_connections"

  console.log("start")
  $.ajax({
    url: host + action,
    type: "GET",
    data: { weight: 20 },
    crossDomain: true,
    xhrFields: {
      withCredentials: true
    },
    success: function(data) {
      console.log("success");
      $('#shipping-calculator').html(data);

      $('#new_australia_post_api_connection')
      .attr("action", host + action);

    $('.error').hide();

    $(".actions > input").click(function() {
      console.log("click")
      // validate and process form here
      $('.error').hide();

      var to_postcode = $("input#australia_post_api_connection_to_postcode").val();

      // client side validation
      if (to_postcode === "") {
        $("#postcode > .error").show();
        $("input#australia_post_api_connection_to_postcode").focus();
        return false;
      }

      tokentag = $('#tokentag').val()

      var dataHash = {
        to_postcode: to_postcode,
        authenticity_token: tokentag // included based on an SO answer
      }

      // included based on an SO answer
      $.ajaxSetup({
        beforeSend: function(xhr) {
          xhr.setRequestHeader('X-CSRF-TOKEN', tokentag);
        }
      });

      $.ajax({
        type: "POST",
        url: host + action,
        data: dataHash,
        success: function(data) {
          $('#shipping-prices').html(data);
        }
      }).fail(function() { console.log("fail") })
        .always(function() { console.log("always") })
        .complete(function() { console.log("complete") });
      return false;

    });

    }
  }).fail(function() { console.log("fail") })
  .always(function() { console.log("always") })
  .complete(function() { console.log("complete") });

  $(function() {
  });

</script> 
```

但是，当我从这个远程位置（Shopify 的遥远斜坡）调用它时，我在请求标头中找到以下内容，

```
HTTP_X_CSRF_TOKEN
the_token_I_expect=

rack.session
{ } 
```

而且我收到了一个非常不愉快的消息，`NetworkError: 500 Internal Server Error`而不是`200 OK!`我想要的......在服务器端，我们发现日志抱怨说，

```
Started POST "/australia_post_api_connections" for 127.0.0.1 at 2013-01-08 19:20:25 -0800
Processing by AustraliaPostApiConnectionsController#create as */*
  Parameters: {"weight"=>"20", "to_postcode"=>"3000", "from_postcode"=>"3000", "country_code"=>"AUS", "height"=>"16", "width"=>"16", "length"=>"16", "authenticity_token"=>"the_token_I_expect="}
WARNING: Can't verify CSRF token authenticity
Completed 500 Internal Server Error in 6350ms

AustraliaPostApiConnection::InvalidError (["From postcode can't be blank", "The following errors were returned by the Australia Post API", "Please enter Country code.", "Length can't be blank", "Length is not a number", "Height can't be blank", "Height is not a number", "Width can't be blank", "Width is not a number", "Weight can't be blank", "Weight is not a number"]):
  app/models/australia_post_api_connection.rb:78:in `save' 
```

缺少 a`rack.session`似乎是我痛苦的原因……但我一直无法找到令人满意的答案。

最后，我认为包含我的 rack-cors 设置是合适的，以防万一它有用。

```
# configuration for allowing some servers to access the aus api connection
config.middleware.use Rack::Cors do
  allow do
    origins 'some-shop.myshopify.com'
    resource '/australia_post_api_connections',
      :headers => ['Origin', 'Accept', 'Content-Type', 'X-CSRF-Token'],
      :methods => [:get, :post]
  end
end 
```

非常感谢您阅读所有这些内容。我希望答案与那个空有关`rack.session`。至少，那将是令人满意的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:12:29.303

好吧，我的一位同事想通了。问题是，我发送的 has 与我在控制器中期望的哈希结构不同。

在我的控制器中，我实例化了一个新的 API 连接，如下所示，

`AustraliaPostApiConnection.new(params[:australia_post_api_connection])`

我正在寻找`params[:australia_post_api_connection]`，但我的数据哈希中没有这样的索引，看起来像，

```
var dataHash = {
  to_postcode: to_postcode,
  authenticity_token: tokentag // included based on an SO answer
} 
```

为了解决这个问题，我将 JS 文件更改为包含，

```
var dataHash = {
  to_postcode: to_postcode,
}

var params = {
  australia_post_api_connection: dataHash,
  authenticity_token: tokentag // included based on an SO answer
} 
```

现在它起作用了！谢谢同事！

# mysql - MySQL：选择标签=x的标签

> ID：14227946
> 
> 赞同：1
> 
> 时间：2013-01-09T03:43:21.817
> 
> 标签：mysql, select, join

我有表格媒体、标签、标签内容

**c_媒体**

```
mid (primary)
m_title (varchar)
m_date (int 11, unix timestamp) index 
```

**标签**

```
t_id (primary)
t_name (varchar)
t_type (varchar)

key: tag (columns t_name, t_type) 
```

**标签内容**

```
tc_id (int 11) (same as t_id from tags table)
tc_cid (int 11) (same as mid from c_media table)
key: tc (columns tc_id, tc_cid) 
```

目标是从具有共同标签（在本例中为 162）且在过去 24 小时内创建的故事中获取热门标签。这似乎有效，但速度很慢，感谢您的帮助。

```
SELECT t_id, t_name, t_type, COUNT(t2.tc_id) AS total_tags FROM c_media
INNER JOIN tag_content t1 ON t1.tc_cid = mid AND t1.tc_id = '162'
INNER JOIN tag_content t2 ON t2.tc_cid = t1.tc_cid AND t2.tc_id != t1.tc_id
LEFT JOIN tags ON t_id = t2.tc_id
WHERE m_date > UNIX_TIMESTAMP( now( ) -86400 ) 
AND t_type NOT IN ('Topic', 'Position')
GROUP BY t2.tc_id
ORDER BY total_tags DESC
LIMIT 30 
```

# javascript - 如何在 Internet Explorer 中使用 javascript 和 ADO 连接两个 SQL 表

> ID：14227947
> 
> 赞同：0
> 
> 时间：2013-01-09T03:43:24.560
> 
> 标签：javascript, ado, jscript, activexobject

我正在使用 Javascript 和 Internet Explorer 的 ActiveXObjects 连接到 SQL 数据库。我可以毫无问题地从单个表中读出结果。不幸的是，我无法弄清楚连接同一数据库中的两个表的语法。这是我正在尝试的：

```
//create object
var conn = new ActiveXObject("ADODB.Connection");

//store credentials
var connectionstring = "Provider=sqloledb; Data Source={omitted}; Initial Catalog={omitted}; User ID={omitted};Password={omitted}";

//open the db connection with credentials
conn.Open(connectionstring);

//create a new record set
var rs = new ActiveXObject("ADODB.Recordset");

//search the record set with SQL call
rs.Open("SELECT * FROM [order] INNER JOIN OrderItems ON (order.Id = OrderItems.Id)", conn); 
```

如果我删除“INNER JOIN”和它之后的所有内容，我很好。请注意，我必须在第一个表的名称（“订单”）周围加上括号，因为我认为它是一个受保护的关键字......有人知道 Javascript 中这种事情的正确语法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-18T07:33:29.537

这可能是您正在寻找的 SQL 语法：

```
SELECT Orders.Id
FROM [Orders] 
INNER JOIN OrderItems ON [Orders].Id = OrderItems.Id 
```

请注意，`(`and`)`是不必要的。

如果要使用别名，则必须在`JOIN`子句的其余部分使用这些别名：

```
SELECT o.Id 
FROM [Orders] o
INNER JOIN OrderItems oi ON o.Id = oi.Id 
```

一旦你确定了 SQL，你应该能够将它传递给`Open`方法：

```
var sql = 
    'SELECT Orders.Id ' +
    'FROM [Orders] ' +
    'INNER JOIN OrderItems ON [Orders].Id = OrderItems.Id';

rs.Open(sql, conn); 
```

# php - PHP中SSH连接的横幅超时错误

> ID：14227948
> 
> 赞同：0
> 
> 时间：2013-01-09T03:43:27.027
> 
> 标签：php, ssh, amazon-ec2, remote-access, phpseclib

我最近下载了 PHP 的 phpseclib0.3.1 库，它应该允许我通过 SSH 连接到我的 EC2 实例。但是，我被“横幅超时”错误消息困住了。当我打电话时：

```
$ssh = new Net_SSH2('ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com',1234); 
```

第一个参数是公共 DNS，第二个参数是与安全组关联的端口（两者正确匹配）。当此命令运行时，我看到以下错误消息：

```
注意：无法连接到 ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com。第 815 行 ...\SSH2.php 中的横幅超时

```

对应于：

```
 // on windows this returns a "Warning: Invalid CRT parameters detected" error
    // the !count() is done as a workaround for <https://bugs.php.net/42682>
    if (!@stream_select($read, $write, $except, $sec, $usec) && !count($read)) {

        user_error(rtrim("Cannot connect to $host. Banner timeout"), E_USER_NOTICE); 
```

可以从[http://phpseclib.sourceforge.net/](http://phpseclib.sourceforge.net/)找到 SSH2.php 文件。如果我无法解决此问题，PHP 中有哪些替代方法可以连接到 EC2 实例？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T03:41:32.467

如果在 stream_select 之前删除 @ 会发生什么？是否开始出现任何错误？

具体来说，我想知道您是否收到这样的错误：

[http://www.frostjedi.com/phpbb3/viewtopic.php?p=384914#p384914](http://www.frostjedi.com/phpbb3/viewtopic.php?p=384914#p384914)

# php - 如何删除 Symfony 1.4 编辑管理页面中的“删除”操作？

> ID：14227951
> 
> 赞同：0
> 
> 时间：2013-01-09T03:43:54.963
> 
> 标签：php, doctrine, symfony-1.4, generator

我正在尝试从管理员生成的编辑页面中删除“删除”操作。我意识到我可以创建自己的模板并从那里删除操作，但我认为必须有一种方法可以使用 generator.yml 文件来删除它。

我的 generator.yml 文件是：

```
发电机：
  类：sfDoctrineGenerator
  参数：
    模型类：诗
    主题：管理员
    non_verbose_templates：真
    with_show: 假
    单数：~
    复数：~
    route_prefix: 诗
    with_doctrine_route: true
    actions_base_class：sfActions

    配置：
      动作：~
      领域：〜
      名单：~
      形式：~
      过滤器：~

      编辑：    
        行动：{}

      新：~

```

然而，编辑页面仍然在页面底部显示“删除”、“返回列表”和“保存”操作。

如何控制显示哪些操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:30:38.597

试试这个：

```
edit:
  actions:
    _edit: ~ 
```

添加您可能拥有的任何其他操作，只需保留删除操作即可。我有一个高度定制的 generator.yml 文件，但没有删除删除链接，所以我尝试了代码，它似乎按要求工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-17T18:43:46.173

试试这个（为了保留列表链接和保存按钮，而不是编辑视图中的删除链接，并删除删除链接和列表视图）：

```
config:
  actions: ~
  fields:  ~
  list:
    object_actions: {_edit: ~}
  filter:  ~
  form:    ~
  edit:
    actions:
      _list: ~
      save: ~
  new:     ~ 
```

# ruby-on-rails-3 - 为什么我的 Rails 应用程序认为我是 CSRF？

> ID：14227952
> 
> 赞同：-2
> 
> 时间：2013-01-09T03:43:56.677
> 
> 标签：ruby-on-rails-3, authentication

奇怪的定义：我的应用程序的会话模型似乎工作正常。cookie (user.remember_token = SecureRandom.urlsafe_base64) 被存储，登录仍然存在。生活很好。

然而，当用户编辑他们的个人资料并点击提交时，他们就会被注销。

[这个 SO Question](https://stackoverflow.com/questions/12171230/rails-user-logged-out-after-destroying-an-unrelated-object-with-remote-tru)让我认为 Rails 是因为 XSRF 而结束会话。

但为什么？

而不是在这里发布我所有的代码，一个链接得到了一切：[https ://github.com/chiperific/arcwmi_reports](https://github.com/chiperific/arcwmi_reports)

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:50:30.907

您的问题出在`User`模型中：

```
before_save :create_remember_token

def create_remember_token
  self.remember_token = SecureRandom.urlsafe_base64
end 
```

这将在保存用户时修改 remember_token - 即在创建*或更新*用户时。并且当用户更新他/她的个人资料时，remember_token 会更改。这会导致登录系统注意到 cookie 不再与用户匹配 - 并将用户注销。

修复 - 使用`before_create`而不是`before_save`.

# objective-c - 奇怪的错误：CGImageProviderCreate：无效的图像提供程序大小：55 x 36

> ID：14227957
> 
> 赞同：4
> 
> 时间：2013-01-09T03:44:24.533
> 
> 标签：objective-c, cocos2d-iphone, ccsprite

我正在使用 Objective-c 和 cocos2d，当组合两段看似不相关的代码时，我遇到了最奇怪的错误。

层初始化中的可疑代码。

```
/* sprite setup */

CCSprite *sprite = [ [ [ StaticSprite alloc ] initWithSheetName: @"001-Fighter01" atPosition: ccp( 200, 200 ) withColumn: 0 withRow: 1 ] autorelease ];
[ map.spriteLayer addChild: sprite ];
CCSprite *sprite2 = [ [ [ StaticSprite alloc ] initWithSheetName: @"001-Fighter01" atPosition: ccp( 250, 200 ) withColumn: 0 withRow: 1 ] autorelease ];
[ map.spriteLayer addChild: sprite2 ];
CCSprite *sprite3 = [ [ [ StaticSprite alloc ] initWithSheetName: @"001-Fighter01" atPosition: ccp( 200, 250 ) withColumn: 0 withRow: 1 ] autorelease ];
[ map.spriteLayer addChild: sprite3 ];

/* ui setup */

// dpad
dPadUI = [ DPad node ];
[ self addChild: dPadUI ]; 
```

DPad 创建给出错误`CGImageProviderCreate: invalid image provider size: 55 x 36`，导致崩溃。奇怪的是，如果我删除`sprite setup`代码，DPad 代码工作正常，如果我删除 DPad 代码，精灵代码工作正常，但是当两者都存在时，我得到了错误。

StaticSprite 是 CCSprite 类的一个相当简单的扩展：

```
@implementation StaticSprite

- ( id ) initWithSheetName: ( NSString * ) sheetName atPosition: ( CGPoint ) initPosition withColumn: ( int ) column withRow: ( int ) row {

    // setup frames
    [ [ CCSpriteFrameCache sharedSpriteFrameCache ] addSpriteFramesWithFile: [ NSString stringWithFormat: @"%@.plist", sheetName ] ];

    if ( self = [ super initWithSpriteFrameName:[ NSString stringWithFormat: @"%@-%d,%d.png", sheetName, column, row ] ] ) {

        int halfSize = [ Geometry spriteHalfSizeFromRect: [ self boundingBox ] ];
        self.anchorPoint = ccp( .5, halfSize / [ self boundingBox ].size.height );

        self.position = initPosition;
        self.zOrder = -self.position.y;
    }

    return self;
}

@end 
```

DPad 也是 CCSprite 的一个相当简单的扩展：

```
@implementation DPad

- ( id ) init {
    if ( self = [ super initWithFile: @"dPad.png" ] ) {
        self.anchorPoint = ccp( 18 / [ self boundingBox ].size.width, .5 );
        self.visible = false;
        self.blendFunc = ( ccBlendFunc ) { GL_SRC_ALPHA, GL_ONE };
        self.opacity = 64;
    }
    return self;
}

- ( void ) activateWithDirection: ( double ) angle {
    self.visible = true;
    [ self setRotation: CC_RADIANS_TO_DEGREES( -angle ) ];
}

- ( void ) deactivate {
    self.visible = false;
}

@end 
```

我似乎可以毫无问题地添加尽可能多的具有不同图像的静态精灵，并且 DPad 图像非常小。为什么这两段代码会单独工作，但是当在同一个应用程序中时，它们会导致奇怪的错误？

我尝试过将 DPad`init`方法重命名为`initDefault`.

**编辑**

我单步执行了 cocos2d 代码，发现错误就发生在这里。出错后`image`变为nil。

```
UIImage *image = [[UIImage alloc] initWithContentsOfFile:fullpath]; 
```

我知道它正在查找图像，因为它会在日志中的错误中打印出图像的大小。我似乎找不到在 Google 上看到此错误消息的其他人。

目前我正在通过将 DPad 代码放在所有 Sprite 创建代码之前来解决这个错误，这似乎阻止了错误的发生，但我真的很想弄清楚为什么会发生这种情况。零星的错误让我非常紧张，直到我弄清楚它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T00:53:26.193

哇，所以这是一个奇怪的。在我的代码中的某个地方，我有`max`而不是`MAX`，这在我的代码中造成了各种类型的破坏。过去几天我一直在感叹的三个无法解释的错误在一次更改之后都消失了。出于某种原因，`max`在我的代码中使用会导致一切，从使 floatValue 无法解释地返回 nil，到将对象添加到数组导致无法解释的错误访问错误。

感谢所有帮助过的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:48:28.387

这是一个很长的镜头，但我怀疑xcode“认为”错误中的文件名位于其他地方。我建议尝试删除当前图片并使用您尚未使用的新名称（testMeNow.jpg）将它们重新复制到您的项目中，然后试一试。

# jquery-ui - 使用 JqueryUI draggable()，如果元素没有被拖动一定距离，我如何才能恢复它？

> ID：14227958
> 
> 赞同：0
> 
> 时间：2013-01-09T03:44:25.273
> 
> 标签：jquery-ui, jquery-ui-draggable

像这样的东西：

```
$("#0").draggable({
                    handle:'#borderItem #statementType #statementContent',

                    cursor: "move",
                    axis: "x",
                    stop: function(event, ui) {

                        var direction = (ui.originalPosition.left > ui.position.left) ? 'left' : 'right';
                        var distance = 0;
                        if (direction == "left")
                        {
                            distance = ui.originalPosition.left - ui.position.left;
                        }
                        else
                        {
                            distance = ui.position.left - ui.originalPosition.left;
                        }
                        if (distance>75)
                        {
                            self.articleSlid(direction);

                        }
                        else
                        {
                           // Revert!
                        }
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:19:22.117

我用下面的代码做到了：

```
 var startTop = $("#0").outerHeight() + $("#0").position().top;
                var startLeft = $("#0").position().left;
                $("#0").draggable({
                    handle:'#borderItem #statementType #statementContent',

                    cursor: "move",
                    axis: "x",
                    stop: function(event, ui) {

                        var direction = (ui.originalPosition.left > ui.position.left) ? 'left' : 'right';
                        var distance = 0;
                        if (direction == "left")
                        {
                            distance = ui.originalPosition.left - ui.position.left;
                        }
                        else
                        {
                            distance = ui.position.left - ui.originalPosition.left;
                        }
                        if (distance>75)
                        {
                            self.articleSlid(direction);

                        }
                        else
                        {
                            $("#0").animate({left: startLeft},"slow");
                        }
                    }
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:22:50.983

您的解决方案正在运行，但该元素也已被可放置容器接受。

您应该使用 revert 回调来测试您的条件是否满足：

```
$("#0").draggable(
{
  ...,
  revert: function(event, ui)
  {
     //Test your position
     var position = ...;
     if(position === false)
     {
        //revert the element by returning true
        return true;
     }
     else
     {
        //return false so that the element does not revert
        return false;
     }
  },
  ...
} ); 
```

# ios - 如何在 touchesMoved: 中获得最低视图？

> ID：14227960
> 
> 赞同：2
> 
> 时间：2013-01-09T03:44:41.007
> 
> 标签：ios, cocoa-touch, uiview

我有 3 `UIViews`: `needToDragView`, 它的`superView`, 和`self.view`. 当我使用`touchesMoved:`只拖动我的`needToDragView`（3Views 中最低的）时。但它可以拖动所有3View。如何检测最低的UIView？

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
        UIView *dragView = [[touches anyObject] view];
        CGPoint newCenter = [[touches anyObject] locationInView:dragView.superview];
        dragView.center = newCenter;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T04:42:28.597

试试这个：确保你设置`UserInteractionEnabled = YES;`了needToDragView。

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    {
         UITouch *touch = [touches anyObject];
         if ([touch view]== needToDragView) {

         // Drag Image Here

         }
         else {

         // NSLog("Wrong");

         } 
    } 
```

**更新**

取而代之的是，您还可以`UIPanGestureRecognizer`像这样使用：

```
UIPanGestureRecognizer pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(function:)];
    [pan setMinimumNumberOfTouches:1];
    [pan setMaximumNumberOfTouches:2];
    [needsToDragView addGestureRecognizer:pan];
    [needsToDragView setUserInteractionEnabled:YES];

- (void)function:(UIPanGestureRecognizer *)recognizer
{
    NSLog(@"Moving View");

    mainView= recognizer.view;
    CGPoint translatedPoint = [recognizer translationInView:self.view];

    if([recognizer state] == UIGestureRecognizerStateBegan)
    {
        firstX = [mainView center].x;
        firstY = [mainView center].y;

    }

    translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);

    [mainView setCenter:translatedPoint];
} 
```

# gwt - 不包括 com.db4o.internal.query.ObjectSetFacade'

> ID：14227963
> 
> 赞同：1
> 
> 时间：2013-01-09T03:44:50.353
> 
> 标签：gwt, db4o

GWT + Springs + DB4o：知道如何在不添加新 RPC 类的情况下使其工作

[WARN] 调度传入的 RPC 调用 com.google.gwt.user.client.rpc.SerializationException 时出现异常：类型 'com.db4o.internal.query.ObjectSetFacade' 未包含在可由此 SerializationPolicy 序列化的类型集中或无法加载其 Class 对象。出于安全考虑，此类型不会被序列化。: instance = [com.ppp.prm.portal.shared.dto.MComments@2214ab5, com.ppp.prm.portal.shared.dto.MComments@4fda105f, com.ppp .prm.portal.shared.dto.MComments@7568f5ed, com.ppp.prm.portal.shared.dto.MComments@3de9d6d3, com.ppp.prm.portal.shared.dto.MComments@4316d666, com.ppp.prm .portal.shared.dto.MComments@1055e4f3, com.ppp.prm.portal.shared.dto.MComments@772a15e5, com.ppp.prm.portal.shared.dto.MComments@6c03aa81] 在 com.google.gwt。 user.server.rpc.impl.ServerSerializationStreamWriter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:49:33.350

## 问题

RPC 101 - 对象需要实现 IsSerializable 或 Serializable 接口。ObjectSetFacade 或其超类都没有实现它们。参考更多规则 - [https://developers.google.com/web-toolkit/doc/latest/tutorial/clientserver](https://developers.google.com/web-toolkit/doc/latest/tutorial/clientserver)

DB4o 是非 gwt java 库。您不能在任何 RPC 调用中发送 com.db4o.internal.query.ObjectSetFacade。

## 解决方案

1) 您应该从 db40 对象转换为与 GWT 和 RPC 兼容的域对象/pojo。

2) 示例 - 我们在服务器上使用 Dozer 将 Hibernate 对象转换为 Domain pojos。[https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate](https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate)

# java - java中需要的逻辑清理帮助

> ID：14227966
> 
> 赞同：2
> 
> 时间：2013-01-09T03:45:19.120
> 
> 标签：java, performance

我在 Java 中工作，遇到了我的同事写的一段奇怪的代码，我确信模运算符会起作用，但由于某种原因，我没有得到预期的结果，我认为我会从操作员那里得到预期的结果。

现在代码编写如下：

```
long divisionID = myMaxId % 40;
                if (divisionID == 0) {
                    divisionID = 1;
                }
                long empiresubID = 1;
                if (myMaxId >= 1600) {
                    empiresubID = 2;
                }
                if (myMaxId >= (1600 * 2)) {
                    empiresubID = 3;
                }
                if (myMaxId >= (1600 * 3)) {
                    empiresubID = 4;
                }
                if (myMaxId >= (1600 * 4)) {
                    empiresubID = 5;
                }
                if (myMaxId >= (1600 * 5)) {
                    empiresubID = 6;
                } 
```

其他几个地方也是这样，一直到 1600*40。

我想为 myMaxId %1600 使用模数运算符，但这给了我不正确的结果。

最终目标是有 40 个部门，我们首先在用户注册时使用 myMaxID % 40 为所有部门填充子部门 1。

然后一旦完成，细分将翻转到 2，然后我们填写所有细分细分 2。

我不认为它目前的编程方式是有效的，应该有其他方式来做到这一点。

对此的任何想法或帮助都会很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T03:49:23.220

`if`我认为您可以通过替换来摆脱 s 链

```
long empiresubID = (myMaxId / 1600) + 1; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T04:19:06.953

您的方法可以替换为两行：

```
long divisionID = myMaxId % 40 == 0 ? 1 : myMaxId % 40;
long empiresubID = (myMaxId / 1600) + 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T03:50:28.263

为什么不直接除以`myMaxId`1600（使用整数除法）？

然后可以直接设置`empiresubID`为结果加一...

看到生产中存在多少这样的代码总是让我感到惊讶！

# android - 为什么在ViewPager中选择一个TextView中的文本会导致系统认为它是在另一个TextView中选择的？

> ID：14227967
> 
> 赞同：1
> 
> 时间：2013-01-09T03:45:21.260
> 
> 标签：android, textview, android-viewpager, textselection

我有一个带有三个 TextView 的 ViewPager，我会在更改时更新它们以制作一本在内存中包含三页的书（本页、上一页和下一页）。我有时看到的是，当我在当前 TextView 中选择一个单词时，它认为我是在上一页的 TextView 中选择它，甚至不可见。

我认为这是我必须解决的 Android 中的某种限制，方法是提醒我在新 TextView 中选择文本，因为即使它在可见 TextView 中选择了一个单词，它也会给我文本屏幕左侧的文本视图，而不是与我选择的文本完全相同的屏幕部分。

有谁知道如何提醒它使用当前的文本视图？

# bash - 如果为真，则检查文件字符串根据文件字符串创建新文件

> ID：14227979
> 
> 赞同：0
> 
> 时间：2013-01-09T03:46:35.360
> 
> 标签：bash, filenames

情况：

AVI 文件有时包含两个文件 filename-cd1.avi 和 filename-cd2.avi。

我在 iMac 上的 bash 脚本中使用以下行将两个 cd 文件复制到一个 AVI 文件中：

MENCODER -ovc copy -oac copy *CD1.avi *CD2.avi -o "Joined Movie.avi" > /dev/null 2>&1

我想做的是保留基本文件名。所以：

找到带有“-cd2”的文件名，例如：OldMovie-cd2.avi

我想要做的是将“OldMovie”存储为一个变量，这样我就可以告诉 mencoder 对这两个文件执行复制，并且......这是踢球者 - 我希望得到的文件是“OldMovie.avi”是两个 cd 子文件的基本名称。

说得通？天哪，我希望如此。

感谢您的帮助，我已经搜索了几个小时没有解决方案。

兰迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T03:54:00.557

```
for avi in *-cd2.avi; do

    base=`echo $avi | sed 's+-cd2\.avi+$\.avi+g'`
    echo base is $base
    echo looking for ${base}-cd1.avi
    if [ -f "${base}-cd1.avi" ]; then
         echo Found ${base}-cd1.avi
         MENCODER -ovc copy -oac copy ${base}-cd1.avi ${base}-cd2.avi -o "${base}.avi" > /dev/null 2>&1
    else
         echo Did not find ${base}-cd1.avi
    fi
done 
```

# javascript - 计算一个数组中有多少个字符串在同一个数组中有重复项

> ID：14227981
> 
> 赞同：2
> 
> 时间：2013-01-09T03:46:50.053
> 
> 标签：javascript

> **可能重复：**
> [数组值计数 javascript](https://stackoverflow.com/questions/8607455/array-value-count-javascript)

我有一个包含多个重复项的数组，我想要实现的是计算每个唯一字符串在这个数组中有多少个重复项。

数组看起来像这样

```
array = ['aa','bb','cc','aa','ss','aa','bb']; 
```

因此我想做这样的事情

```
if (xWordOccurrences >= 5) {
    // do something
} 
```

但我不确定我将如何编码。我在想，用每个唯一的字符串创建一个对象，然后循环遍历原始数组，将每个字符串与其对象匹配并将其数字增加 1，然后遍历对象以查看哪些单词的重复次数最多...

但这似乎是一种过于复杂的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T03:55:18.840

您可以使用具有数组值键的对象并执行类似的操作

```
// count everything
function getCounts(arr) {
    var i = arr.length, // var to loop over
        obj = {}; // obj to store results
    while (i) obj[arr[--i]] = (obj[arr[i]] || 0) + 1; // count occurrences
    return obj;
}

// get specific from everything
function getCount(word, arr) {
    return getCounts(arr)[word] || 0;
}

getCount('aa', ['aa','bb','cc','aa','ss','aa','bb']);
// 3 
```

如果您只想获得一个，那么使用`getCounts`看起来类似于的修改版本会更有效率`getCount`，我称之为`getCount2`

```
function getCount2(word, arr) {
    var i = arr.length, // var to loop over
        j = 0; // number of hits
    while (i) if (arr[--i] === word) ++j; // count occurance
    return j;
}

getCount2('aa', ['aa','bb','cc','aa','ss','aa','bb']);
// 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:55:05.827

试试这个功能：

```
var countOccurrences = function(arr,value){
    var len = arr.length;
    var occur = 0;
    for(var i=0;i<len;i++){
        if(arr[i]===value){
            occur++;
        }
    }
    return occur;
}

var count = countOccurrences(['aaa','bbb','ccc','bbb','ddd'],'bbb');    //2 
```

如果需要，还可以将此函数添加到**Array**原型中：

```
Array.prototype.countOccurrences = function(value){
    var len = this.length;
    var occur = 0;
    for(var i=0;i<len;i++){
        if(this[i]===value){
            occur++;
        }
    }
    return occur;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T03:58:46.150

你如何构建一个具有命名属性的对象？

```
var array = ['aa','bb','cc','aa','ss','aa','bb'];

var summary = {};
var item = '';
for ( i in array){
    item = array[i];
    if(summary[item]){
        summary[item] += 1;
    }
    else{
        summary[item] = 1;
    }
}
console.log( summary ); 
```

摘要将包含这样的

```
{aa: 3, bb: 2, cc: 1, ss: 1} 
```

然后您可以对其进行迭代，然后在需要时对其进行排序。

终于得到你的计数，你可以使用这个**摘要['aa']**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T03:56:25.687

我看到了这篇关于它的帖子，也许它可以帮助：

[http://ryanbosinger.com/blog/2011/javascript-count-duplicates-in-an-array/](http://ryanbosinger.com/blog/2011/javascript-count-duplicates-in-an-array/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T03:57:50.347

```
<script type="text/javascript">

    var array = ['aa','bb','cc','aa','ss','aa','bb'];

    var myMap = {};

    for(i = 0; i < array.length; i++) {
        var count = myMap[array[i]];
        if(count != null) {
            count++;
        } else {
            count = 1;
        }
        myMap[array[i]] = count;
    }

    // at this point in the script, the map now contains each unique array item and a count of its entries

</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T04:12:02.307

希望这能解决你的问题

```
var array = ['aa','bb','cc','aa','ss','aa','bb'];
var dups = {};

for (var i = 0, l = array.length; i < l; i++ ) {
  dups[array[i]] = []; 
}

for (str in dups) {
  for (var i = 0, l = array.length; i < l; i++ ) {
    if (str === array[i]) {
      dups[str].push(str); 
    }
  }
}

for (str in dups) {
  console.log(str + ' has ' + (dups[str].length - 1) + ' duplicate(s)');
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T04:26:59.383

这个功能可以做你需要的一切。

```
function countDupStr(arr, specifier) {
    var count = {}, total = 0;
    arr.forEach(function (v) {
        count[v] = (count[v] || 0) + 1;
    });

    if(typeof specifier !== 'undefined') {
        return count[specifier] - 1;
    }

    Object.keys(count).forEach(function (k) {
        total += count[k] - 1;
    });

    return total;
} 
```

数组中的每个值都分配给计数对象并递增。无论是否传递了说明符，该函数都将返回该特定字符串的重复项或重复项的总数。请注意，此特定技术仅适用于数组中的字符串强制值，因为 Javascript 只能按字符串索引对象。

这意味着在对象分配期间，键将归一化为字符串，并且不能依赖于唯一性。也就是说，这个函数将无法辨别 和 的重复项之间的`3`区别`'3'`。举个例子，如果我要执行：

```
var o = {}, t = {};
o[t] = 1;
console.log(o); 
```

用于代替 的键`t`最终会是`t.toString()`，因此产生了 可能令人惊讶的对象`{'[object Object]': 1}`。只是在使用 Javascript 属性时要记住的事情。

# c++ - 具有相同参数类型但具有不同常量限定符的 std::vector 的强制转换

> ID：14227983
> 
> 赞同：-1
> 
> 时间：2013-01-09T03:46:57.533
> 
> 标签：c++, constants, stdvector, static-cast

问题很简单，一般来说，静态演员表（或其他演员表）是否安全

```
std::vector< Foo > 
```

至

```
std::vector< const Foo > 
```

二进制，我不明白为什么原生类型会有所不同，毕竟，这`const`是一种不应该影响元素大小的语言约束，或者我认为

我可不可以做

```
std::vector< const Foo >& someFunc()
{
  std::vector< Foo >& ref = ...
  return *reinterpret_cast<std::vector< const Foo >*>(& ref);
} 
```

不担心这会沉别人的船吗？还是一般来说这是不安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:50:34.687

暂时忽略你说的 std::vector 并假装你有其他一些不太明确的向量实现。您的代码在技术上是不安全的`T`，不是因为`T const`它们完全不同，而是因为 C++ 语言允许`vector<T>`并`vector<T const>`以完全不同的方式专门化。考虑以下代码：

```
#include <iostream>

template <class T>
struct vector {
    T* start_;
    T* end_;
    T* cap_end_;
};

template <class T>
struct vector<T const> {
    bool gotcha_;
    T* start_;
    T* end_;
    T* cap_end_;
};

struct foo { };

int
main()
{
    std::cout
        << sizeof(vector<foo>) << '\n'
        << sizeof(vector<foo const>) << '\n'
        ;
} 
```

请注意，还有其他更有害的变化可能会让你的生活变得悲惨。比如下面的成员被重新排序的地方：

```
#include <iostream>

template <class T>
struct vector {
    T* start_;
    T* end_;
    T* cap_end_;
};

template <class T>
struct vector<T const> {
    T* end_;
    T* cap_end_;
    T* start_;
};

template <class T>
long size(vector<T> const& v)
{
    return v.end_ - v.start_;
}

struct foo { };

int
main()
{
    vector<foo> v;
    v.start_ = new foo[10];
    v.end_ = v.start_ + 1;
    v.cap_end_ = v.start_ + 10;

    std::cout
        << size(v) << '\n'
        << size(*reinterpret_cast<vector<foo const>*>(&v)) << '\n'
        ;

    return 0;
} 
```

Wrt to std::vector，我对标准库规范的细节不够熟悉，无法知道这些专业化是否符合要求。也许更精通标准的人可以发表评论。

请注意我在回答将[模板类转换为更一般的专业化](https://stackoverflow.com/questions/13684521/casting-templated-class-to-more-general-specialization/13717076#13717076)时所说的一些内容可能有助于解释这个问题。

为了解决您关于检测特化的问题，有一些方法可以通过不使用类的特化但重载非成员函数来使您的代码不安全，我不确定您将如何检测到这一点。比如下面的：

```
#include <iostream>

template <class T>
struct vector {
    T* start_;
    T* end_;
    T* cap_end_;
};

template <class T>
void init(vector<T>& v, size_t sz, size_t cap)
{
    v.start_ = new T[cap];
    v.end_ = v.start_ + sz;
    v.cap_end_ = v.start_ + cap;
}

template <class T>
void init(vector<T const>& v, size_t sz, size_t cap)
{
    v.end_ = new T const[cap];
    v.cap_end_ = v.end_ + sz;
    v.start_ = v.end_ + cap;
}

template <class T>
long size(vector<T>& v)
{
    return v.end_ - v.start_;
}

template <class T>
long size(vector<T const>& v)
{
    return v.cap_end_ - v.end_;
}

struct foo { };

int
main()
{
    vector<foo const> v;
    init(v, 1, 10);

    std::cout
        << size(v) << '\n'
        << size(*reinterpret_cast<vector<foo>*>(&v)) << '\n'
        ;
} 
```

坏消息就够了。好消息是，如果您想使用具有通用接口的现有对象并限制或调整可以对该对象执行的操作，有一些简单、安全且易于理解的方法可以做到这一点。看看 std::stack [http://www.sgi.com/tech/stl/stack.html](http://www.sgi.com/tech/stl/stack.html)或者这个答案 [https://stackoverflow.com/a/994925/453436](https://stackoverflow.com/a/994925/453436)什么[是 C++ 中的代理类](https://stackoverflow.com/questions/994488/what-is-proxy-class-in-c)

# javascript - 在网络浏览器中捕获图像

> ID：14227989
> 
> 赞同：0
> 
> 时间：2013-01-09T03:48:06.677
> 
> 标签：javascript, html, image-processing, opencv, webgl

我正在从事图像处理项目。

我想使用网络浏览器从网络摄像头捕获图像（人脸），并且不允许安装任何其他插件。

目前，我正在使用 Flex/Flash 来捕获图像。根据要求，我也不允许使用 Flex/Flash。

是否有任何软件包可以从网络摄像头捕获图像？

注意：实际上，我想在浏览器端应用一些图像处理算法，如人脸检测、过滤器。如果用于图像捕获的同一包具有一些图像处理算法，我会很好。

由帖子作者更新：有人可以告诉我使用 webgl 的可能性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:43:47.663

如果您想让用户使用网络摄像头拍摄自己的快照，则可以`capture=camera`使用 HTML5 的`getUserMedia/Stream`API 一次性完成。方法如下：

```
<input type="file" accept="image/*;capture=camera"> 
```

支持最新的 chrome、firefox 和 opera。对于其他人来说，flash 或其他插件是唯一的选择。

链接： [我可以使用网络摄像头吗](http://caniuse.com/stream)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:16:39.793

正如 Gaurish 所提到`getUserMedia`的，您可以使用它，尽管不能保证它的跨浏览器支持。

要了解如何使用它和画布来获取图像，请查看使用 getUserMedia 过滤网络摄像头和使用它[的 HTML5 画布。](http://www.iandevlin.com/blog/2012/06/html5/filtering-a-webcam-using-getusermedia-and-html5-canvas)

# ruby - 如何使用脚本程序在打印布局中嵌入多个 SVG 图像？

> ID：14227991
> 
> 赞同：2
> 
> 时间：2013-01-09T03:48:07.247
> 
> 标签：ruby, svg

我目前有一个脚本可以生成大量 3.5 英寸见方的 SVG 图像。我需要的是能够将这些 SVG 放入可以轻松准确地打印的布局中。

我尝试过使用 HTML 模板，但 HTML/CSS 没有足够强大的打印支持。

哪种文档布局语言最适合处理 SVG 图像，如何在脚本语言中实现？

我使用 Ruby 来生成我的 SVG，虽然更可取，但 Ruby 也不是用来生成打印布局的语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:02:40.950

我建议将所有 SVG 编译为更大的 SVG，将所有内容放在您想要的位置，然后使用多个选项之一将其转换为 PDF：

*   在命令行上使用[Inkscape ，例如](http://inkscape.org/)
    `inkscape -f in.svg -A out.pdf`
*   使用[蜡染](http://xmlgraphics.apache.org/batik/)
    `java -jar batik-rasterizer.jar -m application/pdf -d out.pdf in.svg`

*   使用[librsvg](https://live.gnome.org/LibRsvg)，例如
    `rsvg-convert -f pdf -o out.pdf in.svg`
    （可能是最轻量级的选项）

您还可以使用带有 Cairo PDF 表面的[rsvg2 Ruby gem 。](http://rubygems.org/gems/rsvg2)不过，文档似乎稀缺或分散。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:04:29.957

如果您有预算，[Prince](http://www.princexml.com)就是您想要的。由于您已经尝试使用 CSS+HTML 来使其正常工作，因此您可能已经准备好一个可行的解决方案。只需生成 HTML、SVG 和 CSS（使用[CSS3 分页媒体扩展](http://www.w3.org/TR/css3-page/)以获得最佳控制），然后将其传递给 Prince 以生成 PDF。我已经在几个项目中使用了它，并且效果很好。

有像 Prince 一样工作的免费选项，尤其是[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)，但它们可能不像 Prince 那样尊重您的分页选项。

否则，您可以通过创建页面大小的 SVG 图像并对其进行布局、添加多个外部 SVG 文件的链接来使用[Cairo一起破解某些东西。](http://cairosvg.org)

这些选项中的任何一个最终都会生成 PDF，这是确保无论使用哪种浏览器或操作系统都能打印相同的唯一方法。

# css - 100% 宽度的像素偏移

> ID：14227995
> 
> 赞同：0
> 
> 时间：2013-01-09T03:48:38.487
> 
> 标签：css, width, percentage

我以前做过这个，我相信使用填充。这个想法是我想要两个元素（div）并排（浮动），其中具有百分比（100％）宽度，另一个具有（50px）的固定像素。

画得不好的插图：

```
------------------------------------------------
|              100%             |     50px     |
------------------------------------------------ 
```

我不想要以下任何东西

*   javascript
*   小于 100% 的宽度（如 95% 等）不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:11:27.390

从您的小提琴看来，您可能已经按照我认为可能是唯一可能的方式解决了它，绝对定位，然后填充以使其有呼吸空间。您知道您可以发布自己的问题答案：D

这是您可能遇到相同问题并直接想要答案的其他人的有效答案代码，无需费力：

HTML

```
<div class="black">
    <div class="yellow">
    </div>
    <div class="purple">
    </div>
</div> 
```

CSS

```
.black{background:black;padding-right:70px;height:100px;position:relative;}
.yellow{background:yellow;width:100%;height:100%;}
.purple{background:purple;width:50px;height:100%;margin:0 0 0 20px;position:absolute;right:0;top:0;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:25:43.447

这里的另一个答案：[jsfiddle](http://jsfiddle.net/JCV8L/)

```
#one
{
  width:100%;
  float:right;
}

#two
{
  width:50px;
  margin-right:-100%;
  float:right;
} 
```

这当然是在将 clearfix 解决方案添加到父 div 之后。

这可能不是最符合语义的做事方式，但它确实有效。如果您使用这种方法，我建议您在第一个 div（具有 100% 宽度）中为您的内容添加另一个 div。

# android - 如何处理 3rd 方 android 库中的库不匹配？

> ID：14227999
> 
> 赞同：1
> 
> 时间：2013-01-09T03:49:18.713
> 
> 标签：android, maven, actionbarsherlock, android-facebook

我正在编写一个同时使用 ActionBarSherlock 和 Facebook Android SDK 的 android 应用程序。这两个库都在其 libs 文件夹中提供了 android-support-v4.jar：

[https://github.com/facebook/facebook-android-sdk/blob/master/libs/android-support-v4.jar](https://github.com/facebook/facebook-android-sdk/blob/master/libs/android-support-v4.jar) https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/libs/android -support-v4.jar

但是，在头部修订中，两个版本的支持 jar 是不同的。这会导致使用 eclipse 构建我的应用程序失败。

我通过将它们作为 git 子模块包含在我的应用程序的存储库中来使用这两个库。一种解决方案是 fork 这些库之一，更新 fork 中的 android-support-v4.jar 版本，并将我的子模块指向 fork。虽然这也许是正确的方法，但不知何故这感觉不对。

在我使用上述方法之前，我想知道是否还有其他选择。许多流行的 Android 库似乎都在使用 maven，使用 maven 是解决这个问题的好方法吗？对于一般的 android 应用程序来说是一个好主意吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T04:12:16.590

首先从 All(yourProject,FacebookSDK etc.) 中删除 android-support-v4.jar。

然后按照以下步骤操作：

右键单击项目-> Android 工具-> 添加支持库，然后再次右键单击项目-> Android 工具-> 修复项目属性在 Facebook SDK 和其他库上执行相同操作。

并清理构建您的所有项目（Facebook SDK、您的项目和库）。您完成了。