# StackOverflow 问答 14300000-14300999

# java - 在同一帧上显示多个 JLabel

> ID：14300001
> 
> 赞同：2
> 
> 时间：2013-01-13T02:14:11.963
> 
> 标签：java, swing, user-interface, layout-manager, cardlayout

```
 JFrame frame = new JFrame("Picture");
  frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
  display = new JPanel();      
if(event.getSource().equals(birthday)){
    background = new JLabel(bday);
    display.add(background);

  }
  else if(event.getSource().equals(cake)){
    picture = new JLabel(pastry, SwingConstants.LEFT);
    display.add(picture);
  }
  else if(event.getSource().equals(input)){
    word = new JLabel(text);
    word.setHorizontalTextPosition(SwingConstants.RIGHT);
    word.setVerticalTextPosition(SwingConstants.CENTER);
    display.add(word);
  }
  frame.setPreferredSize (new Dimension(450, 350));
  frame.getContentPane().add(display);
  frame.pack();
  frame.setVisible(true); 
```

这是我的独立类中的 ActionListener 类的一部分。我有一个组合框/卡片布局。因此，当我从一个组合框标签单击一个按钮（蛋糕），从另一个组合框标签单击另一个按钮（生日）时，出现了两个框架。我希望这些东西在同一个框架上，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T03:47:24.960

而是每次调用 action perform 方法时创建框架的新实例，您需要创建一个共享实例......

![在此处输入图像描述](../Images/662ddc611035eb2fb575587f81a0cc6b.png)

```
public class OneFrameToRuleThemAll {

    public static void main(String[] args) {
        new OneFrameToRuleThemAll();
    }

    public OneFrameToRuleThemAll() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public static class TestPane extends JPanel {

        private JFrame frame;

        private static final String FRUIT[] = new String[] {
            "Banana",
            "Apple",
            "Manga",
            "Pear"
        };

        public TestPane() {

            JButton button = new JButton("Fruit");
            button.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {

                    if (frame == null) {
                        frame = new JFrame("Fruits basket");
                        frame.setSize(100, 200);
                        frame.setLayout(new GridLayout(0, 1));
                        frame.setLocationRelativeTo(TestPane.this);
                        frame.setVisible(true);
                    }

                    int index = (int)Math.round(Math.random() * (FRUIT.length - 1));
                    frame.add(new JLabel(FRUIT[index]));
                    frame.getContentPane().validate();

                }
            });

            setLayout(new GridBagLayout());
            add(button);

        }

    }

} 
```

# django - 来自平面项目表的仓储记录：Django Signals 还是 PostgreSQL Triggers？

> ID：14300002
> 
> 赞同：0
> 
> 时间：2013-01-13T02:14:13.850
> 
> 标签：django, postgresql, triggers, signals, django-signals

我有一个带有 PostgreSQL 数据库的 Django 网站。有一个用于“平面”项目表的 Django 应用程序和模型，其中定期插入许多记录，每月最多插入数百万条记录。我想使用这些记录来自动填充事实和维度表的星型模式（最初也在 Django models.py 中建模），以便有效地对记录进行复杂查询，并在 Django 站点上显示来自它们的数据.

两个主要选项不断出现：

1) PostgreSQL 触发器：根据记录的创建或更新，直接配置数据库以将适当的行插入事实表和维度表，可能使用 Python/PL-pgsql 和行级后触发器。优点：适用于 Django 之外的输入；预计效率会更高。缺点：将业务逻辑拆分到另一个位置；其他输入源可能不期望触发插入。

2) Django Signals：使用 Signals 功能在创建或更新记录时使用内置信号 django.db.models.signals.post_save 进行插入。优点：更容易构建和维护。缺点：必须重复一些代码或留在 Django 站点/应用程序环境中以支持新的输入源。

我认为 Django 的内置信号是维护事实表和维度表的方法是否正确？或者是否还有其他一些重要的选择被遗漏了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:44:41.600

I ended up using Django Signals. With a flat table "item_record" containing fields "item" and "description", the code in models.py looks like this:

```
from django.db.models.signals import post_save

def create_item_record_history(instance, created, **kwargs):
    if created:
        ItemRecordHistory.objects.create(
            title=instance.title, 
            description=instance.description, 
            created_at=instance.created_at,
            )
post_save.connect(create_item_record_history, sender=ItemRecord) 
```

It is running well for my purposes. Although it's just creating an annotated flat table (new field "created_at"), the same method could be used to build out a star schema.

# oracle - PostgreSQL 等效于 Oracle 的 PERCENTILE_CONT 函数

> ID：14300004
> 
> 赞同：9
> 
> 时间：2013-01-13T02:14:13.580
> 
> 标签：oracle, function, postgresql, percentile

有没有人发现 PostgreSQL 等效于 Oracle 的 PERCENTILE_CONT 函数？找了找，没找到，就自己写了。

这是我希望对您有所帮助的解决方案。

我工作的公司希望将 Java EE Web 应用程序从使用 Oracle 数据库迁移到使用 PostgreSQL。几个存储过程严重依赖于使用 Oracle 独特的 PERCENTILE_CONT() 函数。这个函数在 PostgreSQL 中不存在。

我试图搜索是否有人将该功能“移植”到 PG 中，但无济于事。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-13T23:15:24.383

经过更多搜索，我找到了一个页面，其中列出了 Oracle 如何在以下位置实现此功能的伪代码：

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions110.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions110.htm)

我决定在 PG 中编写自己的函数来模仿 Oracle 的特性。

我在::: 找到了 David Fetter 的数组排序技术

[http://postgres.cz/wiki/PostgreSQL_SQL_Tricks#General_array_sort](http://postgres.cz/wiki/PostgreSQL_SQL_Tricks#General_array_sort)

和

[排序数组元素](https://stackoverflow.com/questions/2913368/sorting-array-elements)

这里（为了清楚起见）是大卫的代码：

```
CREATE OR REPLACE FUNCTION array_sort (ANYARRAY)
RETURNS ANYARRAY LANGUAGE SQL
AS $$
SELECT ARRAY(
    SELECT $1[s.i] AS "foo"
    FROM
        generate_series(array_lower($1,1), array_upper($1,1)) AS s(i)
    ORDER BY foo
);
$$; 
```

所以这是我写的函数：

```
CREATE OR REPLACE FUNCTION percentile_cont(myarray real[], percentile real)
RETURNS real AS
$$

DECLARE
  ary_cnt INTEGER;
  row_num real;
  crn real;
  frn real;
  calc_result real;
  new_array real[];
BEGIN
  ary_cnt = array_length(myarray,1);
  row_num = 1 + ( percentile * ( ary_cnt - 1 ));
  new_array = array_sort(myarray);

  crn = ceiling(row_num);
  frn = floor(row_num);

  if crn = frn and frn = row_num then
    calc_result = new_array[row_num];
  else
    calc_result = (crn - row_num) * new_array[frn] 
            + (row_num - frn) * new_array[crn];
  end if;

  RETURN calc_result;
END;
$$
  LANGUAGE 'plpgsql' IMMUTABLE; 
```

以下是一些比较测试的结果：

```
CREATE TABLE testdata
(
  intcolumn bigint,
  fltcolumn real
); 
```

这是测试数据：

```
insert into testdata(intcolumn, fltcolumn)  values  (5, 5.1345);
insert into testdata(intcolumn, fltcolumn)  values  (195, 195.1345);
insert into testdata(intcolumn, fltcolumn)  values  (1095, 1095.1345);
insert into testdata(intcolumn, fltcolumn)  values  (5995, 5995.1345);
insert into testdata(intcolumn, fltcolumn)  values  (15, 15.1345);
insert into testdata(intcolumn, fltcolumn)  values  (25, 25.1345);
insert into testdata(intcolumn, fltcolumn)  values  (495, 495.1345);
insert into testdata(intcolumn, fltcolumn)  values  (35, 35.1345);
insert into testdata(intcolumn, fltcolumn)  values  (695, 695.1345);
insert into testdata(intcolumn, fltcolumn)  values  (595, 595.1345);
insert into testdata(intcolumn, fltcolumn)  values  (35, 35.1345);
insert into testdata(intcolumn, fltcolumn)  values  (30195, 30195.1345);
insert into testdata(intcolumn, fltcolumn)  values  (165, 165.1345);
insert into testdata(intcolumn, fltcolumn)  values  (65, 65.1345);
insert into testdata(intcolumn, fltcolumn)  values  (955, 955.1345);
insert into testdata(intcolumn, fltcolumn)  values  (135, 135.1345);
insert into testdata(intcolumn, fltcolumn)  values  (19195, 19195.1345);
insert into testdata(intcolumn, fltcolumn)  values  (145, 145.1345);
insert into testdata(intcolumn, fltcolumn)  values  (85, 85.1345);
insert into testdata(intcolumn, fltcolumn)  values  (455, 455.1345); 
```

以下是比较结果：

```
ORACLE RESULTS
ORACLE RESULTS

select  percentile_cont(.25) within group (order by fltcolumn asc) myresult
from testdata;
select  percentile_cont(.75) within group (order by fltcolumn asc) myresult
from testdata;

myresult
- - - - - - - -
57.6345                

myresult
- - - - - - - -
760.1345               

POSTGRESQL RESULTS
POSTGRESQL RESULTS

select percentile_cont(array_agg(fltcolumn), 0.25) as myresult
from testdata;

select percentile_cont(array_agg(fltcolumn), 0.75) as myresult
from testdata;

myresult
real
57.6345

myresult
real
760.135 
```

我希望这可以帮助某人不必重新发明轮子。

享受！雷·哈里斯

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-16T22:48:07.267

在 PostgreSQL 9.4 中，现在有对百分位数的原生支持，在*Ordered-Set Aggregate Functions*中实现：

> ```
> percentile_cont(fraction) WITHIN GROUP (ORDER BY sort_expression) 
> ```
> 
> 连续百分位数：返回与排序中指定分数相对应的值，如果需要，在相邻输入项之间进行插值
> 
> ```
> percentile_cont(fractions) WITHIN GROUP (ORDER BY sort_expression) 
> ```
> 
> 多个连续百分位数：返回与分数参数的形状匹配的结果数组，每个非空元素替换为对应于该百分位数的值

有关更多详细信息，请参阅文档：[http ://www.postgresql.org/docs/current/static/functions-aggregate.html](http://www.postgresql.org/docs/current/static/functions-aggregate.html)

# node.js - Node.js node-csv-parser 死锁，因为背压不起作用

> ID：14300005
> 
> 赞同：3
> 
> 时间：2013-01-13T02:14:21.933
> 
> 标签：node.js, csv, deadlock, backpressure

我正在尝试从 CSV 文件中读取 URL，检查它们是否可用，并将错误的 URL 写入另一个文件。我经历了大约几千次，然后急剧减速（从每秒检查 5 次到每 10 秒检查一次），然后得到“FATAL ERROR: CALL_AND_RETRY_2 Allocation failed - process out of memory”，大概是因为我没有申请正确地对发射流进行背压。

```
var csv = require('csv');
var request = require('request');
var fs = require('fs');

csv()
.from(fs.createReadStream('./urls.csv'), {columns: true})
.to(fs.createWriteStream('./badurls.csv'))
.transform(function(data, index, callback){
  checkImage(null,callback,data['main-image-url'],index)
});

function checkImage(err, callback, url, index) {
  if (url != "") {
    request.head(url, function(err, res) {
      console.log(index,res.statusCode,url);
      if (res.statusCode != 200) {
        callback(null,url+"\n");
      }
    })
  }
} 
```

# ios - 许多类型的视频类型不适用于 MPMoviePlayerController？

> ID：14300012
> 
> 赞同：0
> 
> 时间：2013-01-13T02:15:17.960
> 
> 标签：ios, mpmovieplayercontroller, ogg, mpeg, webm

我发现有许多类型的文件在 iOS 5.1 中无法与 MPMoviePlayerController 一起使用。它们包括 webm、ogv、flv（当然）、mpeg2 以及其他一些我忘记的东西。除了转换它们之外，还有什么方法可以提高播放这些文件的机会？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:46:40.620

iOS 不支持所有文件格式/编解码器。可以参考了解支持 的格式[iPad 上 MPMoviePlayerController 支持的视频格式有哪些？](https://stackoverflow.com/questions/2719214/what-are-the-video-formats-supported-by-mpmovieplayercontroller-on-the-ipad)

其他选项是编写您自己的应用程序来解码 n 显示（但它不实用）

# java - 在速度中查找模板文件

> ID：14300015
> 
> 赞同：0
> 
> 时间：2013-01-13T02:16:02.260
> 
> 标签：java, web-applications, velocity

我的 webapp 找不到它的模板文件。我已经阅读了[这篇文章](https://stackoverflow.com/questions/3443819/velocity-cant-find-resource)中的材料，但似乎并没有解决问题。我的 velocity.properties 文件，安装在我的 WEB-INF 目录中，包含以下行

```
resource.loader=class
resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader 
```

Java servlet 是

```
package test;

import java.io.*;
import javax.servlet.http.*;
import org.apache.velocity.Template;
import org.apache.velocity.VelocityContext;
import org.apache.velocity.context.Context;
import org.apache.velocity.tools.view.VelocityViewServlet;
import org.apache.velocity.app.Velocity;

import org.apache.commons.lang.StringEscapeUtils;

public class Recipes extends VelocityViewServlet {

    public Template handleRequest(HttpServletRequest request,
                                  HttpServletResponse response,
                                  Context context) {
        Velocity.init();
        Template template=null;
        try {
            context.put("recipeList","r1");
            template = Velocity.getTemplate("Recipes.vm");
        } catch (Exception e) {
            System.err.println("Exception caught: " + e.getMessage());
        }
        return template;
    }
} 
```

当我导航到该 URL 时，它失败了。我尝试将 vm 文件放在 WEB-INF 目录、classes 子目录、lib 目录和 lib 目录的 jar 中。事情失败后， catalina.out 包含

```
Jan 12, 2013 6:35:25 PM org.apache.velocity.runtime.log.CommonsLogLogChute log
SEVERE: ResourceManager : unable to find resource 'Recipes.vm' in any resource loader.
Exception caught: Unable to find resource 'Recipes.vm' 
```

并在 localhost.log

```
Jan 12, 2013 6:35:25 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet recipes threw exception
java.lang.NullPointerException
at org.apache.velocity.tools.view.VelocityView.performMerge(VelocityView.java:942)
at org.apache.velocity.tools.view.VelocityView.merge(VelocityView.java:902)
at org.apache.velocity.tools.view.VelocityViewServlet.mergeTemplate(VelocityViewServlet.java:318)
at org.apache.velocity.tools.view.VelocityViewServlet.doRequest(VelocityViewServlet.java:220)
at org.apache.velocity.tools.view.VelocityViewServlet.doGet(VelocityViewServlet.java:182)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:619) 
```

有人可以向我解释发生了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:23:34.067

你应该使用：

```
class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader 
```

资源加载器“类型”在定义加载器类的属性名称之前。

[请参阅资源加载器的 Velocity 开发人员指南](http://velocity.apache.org/engine/releases/velocity-1.7/developer-guide.html#Configuring_Resource_Loaders)。请注意，您链接到的答案指向正确的文档，但没有（似乎）包含正确的配置

（说了这么多，您确定这就是您应该使用 VelocityViewServlet 的方式吗？我以为您通常会请求 *.vm 文件，执行类似 a 的`fillContext`操作，然后完成它。）

* * *

您`Velocity.init()`从 VelocityViewServlet 中调用，这很可能不是您想要做的。除此之外，从文档中：

> 使用 Velocity 分布的默认属性初始化 Velocity 运行时引擎

如果您执行以下操作，我展示的配置将起作用：

```
String propFile = getServletContext().getRealPath("/WEB-INF/velocity.properties");
Velocity.init(propFile); 
```

也就是说，我不相信你会以正确的方式进行此操作，但我可能会弄错 - 我以前从未在独立的网络应用程序中使用过它，但这并不让我觉得是正确的。

如果不出意外，我至少会将一些东西移到基类中，例如：

```
public abstract class BaseVelocityServlet extends VelocityViewServlet {

    @Override
    public void init(ServletConfig config) throws ServletException {
        super.init(config);
        Velocity.init(getServletContext().getRealPath("/WEB-INF/velocity.properties"));
    }

    @Override
    protected Template getTemplate(HttpServletRequest request, HttpServletResponse response) {
        return Velocity.getTemplate(getTemplateName());
    }

    public abstract String getTemplateName();

} 
```

然后每个 URL 的 servlet 可以只填充上下文并提供一个模板名称：

```
public class Recipes extends BaseVelocityServlet {

    @Override
    protected void fillContext(Context context, HttpServletRequest request) {
        context.put("recipeList", "r1");
    }

    @Override
    public String getTemplateName() {
        return "Recipes.vm";
    }

} 
```

同样，我不相信这是正确的。我仍然认为它应该默认在 WEB-INF 下找到配置文件，但至少对我来说，它不是。

# maven - 如何使用 maven nbm 插件打包依赖项

> ID：14300023
> 
> 赞同：0
> 
> 时间：2013-01-13T02:17:29.960
> 
> 标签：maven, netbeans-platform

我已经修改了我想与我的模块一起打包的 netbeans 模块 jar。我该怎么做呢 ？

**上下文中的依赖**

```
 <dependency>
        <groupId>org.netbeans.modules</groupId>
        <artifactId>org-netbeans-modules-db-dataview</artifactId>
        <version>${netbeans.platform.version}</version>
        <scope>system</scope>
        <systemPath>${dbdataview}</systemPath>
    </dependency> 
```

**mvn nbm 配置**

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>nbm-maven-plugin</artifactId>
            <version>3.5</version>
            <extensions>true</extensions>
            <configuration>
                <additionalArguments>${netbeans.run.params.ide}</additionalArguments>
                <netbeansInstallation>/home/venkat/netbeans-7.1.1/</netbeansInstallation>
                <keystore>keystore</keystore>
                <keystorealias>ezondaice</keystorealias>
                <keystorepassword>ezondaice</keystorepassword>
            </configuration>
        </plugin> 
```

**编辑**

我也有以下依赖。这个好像和里面的nbm一起打包的

`/netbeans/modules/ext/org.yaml/`. 不确定为什么没有将其他依赖项打包到 nbm 中。

```
 <dependency>
        <groupId>org.yaml</groupId>
        <artifactId>snakeyaml</artifactId>
        <version>1.11-SNAPSHOT</version>
    </dependency> 
```

# c# - Windows 服务 - OnSessionChange - 慢速通知

> ID：14300025
> 
> 赞同：3
> 
> 时间：2013-01-13T02:17:47.037
> 
> 标签：c#, .net, windows, service, winlogon

我正在编写一个 Windows 服务，它需要检测机器上何时有任何用户会话更改（即用户登录、注销、断开连接等）。我已经在我的代码中实现了`OnSessionChange`覆盖方法，并且我注意到在用户会话更改（出于任何原因）和接收通知的服务之间可能会有长达一分钟的延迟。我目前只是将当前日期/时间和`changeDescription`原因打印到文本文件中，以消除我的代码可能添加的任何延迟。

我的问题是，这种行为是否可以预期 - 会话更改和通知服务之间的大量延迟？如果是，任何人都可以建议一种更好（更快）的方法来在任何用户会话更改时得到通知？

# java - 虽然循环只运行一次......（Java）

> ID：14300028
> 
> 赞同：-2
> 
> 时间：2013-01-13T02:18:12.013
> 
> 标签：java, loops

我只是不明白为什么这个循环只运行一次，但它让我发疯。提前感谢您的帮助。

```
public class Test
{

public static void main (String [] args)
{
    gladiator fighterA = new gladiator("Maximus", 25, 5, 10, 11, 8, 2, 1, true);
    gladiator fighterB = new gladiator("Minimus", 22, 8, 12, 10, 8, 4, 1, true);

    while(fighterA.getAlive() == true && fighterB.getAlive() == true);
    {
        double userDmg = (fighterA.getAttack() - fighterB.getDefence())*fighterA.getModifier();
        double enemyDmg = (fighterB.getAttack() - fighterA.getDefence())*fighterB.getModifier();
        //System.out.println(userDmg);
        //System.out.println(enemyDmg);
        fighterA.setHp(fighterA.getHp() - enemyDmg);
        fighterB.setHp(fighterB.getHp() - userDmg);
        //System.out.println(fighterA.getHp());
        //System.out.println(fighterB.getHp());
        if(fighterA.getHp() <= 0)
        {
            fighterA.setAlive(false);
        }
        if(fighterB.getHp() <= 0)
        {
            fighterB.setAlive(false);
        }
    }

    System.out.println("The fight is over!");

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:22:44.103

使用 Eclipse 的调试功能：[http ://www.ibm.com/developerworks/library/os-ecbug/](http://www.ibm.com/developerworks/library/os-ecbug/)

嗯嗯，断点。

# jquery - 需要分步帮助使用dreamweaver将jquery lightbox添加到我的代码中

> ID：14300031
> 
> 赞同：0
> 
> 时间：2013-01-13T02:18:58.657
> 
> 标签：jquery, jquery-plugins, dreamweaver, lightbox

我买了一个模板，一直在 Dreamweaver 中编辑。想加上lightbox的弹窗功能，自己试了下，搞不定。

我可以使用一些向白痴解释的分步说明..（即“此代码在第 26 行”类型的交易）...如果您想解释原因，那也很棒，所以这样我可以了解我的模板编码中发生了什么......

我使用的 jquery 灯箱插件是leadro vieira 插件，下面是我网站上特定页面之一的代码。我不知道您是否还需要编辑任何 .js 文件 .css 文件？我是否为您提供了足够的信息来帮助我？无论如何，任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:04:31.747

从下载 zip 文件

[http://leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

找到文件 jquery.lightbox-0.5.pack.js 并将其粘贴到项目的 js 文件夹中。

现有线路后

```
<script type="text/javascript" src="js/jquery-1.7.min.js"></script> 
```

放线

```
<script type="text/javascript" src="js/jquery.lightbox-0.5.pack.js"></script> 
```

在 zip 中找到 css 文件 jquery.lightbox-0.5.css，并将其放入您的 css 文件夹中。

在现有行之后：

```
<link rel="stylesheet" type="text/css" media="screen" href="css/style.css"> 
```

放线

```
<link rel="stylesheet" type="text/css" href="css/jquery.lightbox-0.5.css" media="screen" /> 
```

换行：

```
<img src="images/spec_offer1.jpg" alt="" /> 
```

和

```
<a class="lightbox" href="spec_offer1.jpg"><img src="spec_offer1_thumb.jpg" alt=""/></a> 
```

（您必须自己创建缩略图）

然后，在结束 body 标记上方添加以下内容：

```
<script>
    $('.lightbox').lightBox();
</script> 
```

# javascript - 如何在字符串中获取带引号的文本？

> ID：14300040
> 
> 赞同：0
> 
> 时间：2013-01-13T02:20:23.600
> 
> 标签：javascript, jquery, regex

我有一个这样的字符串：

```
var examplestring = 'Person said "How are you doing?" '; 
```

如何获取双引号内的字符串。具体来说，我想要一个设置为你好吗？在这种情况下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T02:27:13.547

一种方法是使用正则表达式：

```
var match = exampleString.match(/"([^"]*)"/);

if(match) {
  var quoted = match[1]; // -> How are you doing?
} else {
  //no matches found
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T02:23:04.030

```
var quotedString = examplestring.split('"')[1]; 
```

这将在每个“，分成以下

```
quotedString[0] = "Person said ";
quotedString[1] = "How are you doing?"
quotedString[2] = " "; 
```

然后从新数组的索引 1 中选择，返回“你好吗？” （不带引号）。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T02:25:16.180

```
var examplestring = 'Person said "How are you doing?" ';
var extract = examplestring.match(/\"(.*)\"/);
alert(extract[1]); 
```

# java - Java Web 服务 - 列表与数组

> ID：14300041
> 
> 赞同：1
> 
> 时间：2013-01-13T02:20:44.627
> 
> 标签：java, web-services, jax-rpc

我是网络服务的新手。我正在编写一些简单的 Web 服务进行测试，我有以下问题。

[这里](http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXRPC4.html)的网站说 JAX-RPC 支持原始类型数组。但是当我写一个简单的网络服务

```
@WebService
@SOAPBinding(style=Style.RPC)
public interface AddNums {
    @WebMethod
    public int addNumbers(int[] nums);

} 
```

并从 wsdl 生成客户端代码，我得到以下 WS 客户端界面。

```
@WebMethod
@WebResult(partName = "return")
public int addNumbers(
    @WebParam(name = "arg0", partName = "arg0")
    IntArray arg0); 
```

它生成具有成员受保护列表的 IntArray 类

```
public class IntArray {

    @XmlElement(nillable = true)
    protected List<Integer> item; 
```

这是支持数组的方式吗？那么，传递数组的唯一方法是创建一个**IntArray**实例并将**List** of **Integers**设置为它？

另外，当我将 Web 服务设为**Document**样式时

来自 WSDL 的 WS 客户端接口具有以下方法：

```
public int addNumbers(
    @WebParam(name = "arg0", targetNamespace = "")
    List<Integer> arg0); 
```

原来服务中的**int[ ]数组，变成了****List<Integer>**

这是否意味着 Web 服务中的 Array 类型总是在 wsdl 生成的客户端代码中转换为 List ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T22:17:47.453

JAX-WS 使用 JAXB 进行绑定。的默认映射`<sequence>`是`List`. 但是您可以使用`@XmlJavaTypeAdapter`注解来提供 XML 内容的[自定义](http://docs.oracle.com/javase/tutorial/jaxb/intro/j2schema.html)映射。

您可以在 JAXB[简介（Java 教程 > XML 绑定的 Java 体系结构 (JAXB)）中了解有关 JAXB 的更多信息](http://docs.oracle.com/javase/tutorial/jaxb/intro/index.html)

另一方面，您可以尝试返回一个数组。请参阅问题[I can't return array String[] with JAX-WS](https://stackoverflow.com/a/14083593/870248)的答案。但也许你应该考虑：看看这个问题：[你能从 JAX-WS @WebMethod 返回一个数组吗？](https://stackoverflow.com/a/1499324/870248).

# android - 带有操作菜单的主/详细模板 - 显示两者的正确方法

> ID：14300042
> 
> 赞同：0
> 
> 时间：2013-01-13T02:20:48.200
> 
> 标签：android, fragment, master-detail

初学者在这里，针对我的学习目标 sdk v14 和 v17...不需要旧的支持。

我正在使用主/详细模板并尝试获取操作菜单（用于搜索）以同时显示在手机和平​​板电脑视图中。实际上我可以让它工作，但我必须在 ItemDetailActivity.java 和 ItemListActivity.java 中复制我的代码

这些是我必须在这两种方法中搜索才能工作的方法：

```
public boolean onQueryTextChange(String newText) {  
public boolean onQueryTextSubmit (String query) {
public boolean onClose () { 
```

我只想搜索“详细信息”，而不是“列表”。

所以我的问题是：有没有办法将操作栏与列表片段相关联？这样我就可以将搜索功能保存在 1 个文件中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:03:13.800

我会继续回答我（认为）我知道的，因为我不想让这个问题悬而未决。

从调试器中的跟踪来看，在我看来，手机活动和平板电脑活动是分开的，如果你想连接一个操作菜单，你必须将它分别连接到两者。

# c - 计算机之间的 C 对象文件兼容性

> ID：14300044
> 
> 赞同：7
> 
> 时间：2013-01-13T02:21:01.477
> 
> 标签：c, assembly, compiler-construction, linker, compatibility

首先，我想声明这个问题与学校/家庭作业有关。

假设计算机 CP1 和 CP2 共享相同的操作系统和机器语言。如果 C 程序在 CP1 上编译，为了将其移动到 CP2，是否需要传输源代码并在 CP2 上重新编译，或者只是传输目标文件。

我的直觉答案是目标文件就足够了。C 代码由编译器翻译成汇编，并由汇编器汇编成机器代码。因为该架构共享相同的机器代码和操作系统，所以我认为没有问题。

但我越想，我就越感到困惑。

我的问题是：

a）由于它指的是目标文件而不是可执行文件，我假设没有链接。在 CP2 上链接时会出现任何问题吗？

b) 如果代码在 CP1 上使用 C11 标准但在 CP2 上唯一的编译器是 C99，这有关系吗？我假设一旦代码被编译/汇编，这无关紧要。

c）问题没有指定共享/动态链接库。所以这只有在程序不依赖 .dll/.so/ .dylib 文件的情况下才会真正起作用，否则 CP2 也需要这些文件。

我觉得有很多陷阱，考虑到这个问题有多模糊，我现在觉得简单地重新编译会更安全。

哈！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:41:35.757

答案是，这取决于。当您编译 C 程序并将目标文件移动到另一台计算机上的链接时，它应该可以工作。但是由于[字节顺序](https://en.wikipedia.org/wiki/Endianness)或[名称修改](https://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B)等因素，您的程序可能无法按预期运行，甚至可能在您尝试运行时崩溃。

`C11`编译器不支持`C99`，但源代码是否已编译和汇编无关紧要。

只要源代码是在一台机器上使用库编译的，您就不需要库来链接或运行另一台计算机上的文件（**仅限静态库**，动态库必须在您运行的计算机上应用程序）。这就是说，您应该使程序独立，这样您就不会遇到与以前相同的问题，即程序无法按预期工作或崩溃。

您可以获得支持[EABI](https://en.wikipedia.org/wiki/Application_binary_interface)的编译器，这样您就不会遇到这些问题。支持 EABI 的编译器创建与其他此类编译器生成的代码兼容的目标代码，从而允许开发人员将使用一个编译器生成的库与使用不同编译器生成的目标代码链接起来。

我以前尝试过这样做，但不是很多，最近也不是。因此，我的信息可能不是 100% 准确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T03:07:00.650

a）我已经听说过“目标文件”这个词被用来指代链接的二进制文件——尽管它有点不准确。所以也许他们的意思是“二进制文件”。我想说，如果它有不同的编译器，在不同的机器上链接可能会出现问题——除非目标文件格式是标准化的，我不确定。

b）使用不同的标准甚至编译器对于二进制代码都无关紧要 - 如果它是静态链接的。如果它依赖于动态库中的函数，则可能会出现问题。这也回答了 c)：是的，这将是一个问题。如果没有正确版本的所有必需动态库，该程序将无法启动。再次取决于链接模式（静态与动态）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T05:54:25.300

问：假设计算机 CP1 和 CP2 共享相同的操作系统和机器语言。

A: 然后你可以在两台电脑上运行相同的.exe

Q：如果在CP1上编译了一个C程序，为了把它移到CP2上，是否需要转移源代码？

A: 不需要。如果你想重新编译，你只需要源代码。如果它是不同的、不兼容的 CPU 和/或操作系统，您只需要重新编译。

程序执行通常根本不需要“目标文件”：

> [http://en.wikipedia.org/wiki/Object_files](http://en.wikipedia.org/wiki/Object_files)
> 
> 目标文件是包含通常不能直接执行的可重定位格式机器代码的文件。目标文件由汇编器、编译器或其他语言翻译器生成，并用作链接器的输入。

“可执行程序”可能需要一个或多个“共享库”（又名 .dll）。在这种情况下，同样的限制适用：共享库（如果尚未驻留）必须与 .exe 一起复制，并且还必须与 CPU 和操作系统兼容。

Finally, "scripts" do *not* need to be recompiled. You may copy the script freely from computer to computer. But each computer must have an "interpreter" to run the script: a Perl script needs a Perl interpreter, a Python script a python interpreter, and so on.

# php - 在 Symfony 1.4 中使用 PrinceXML

> ID：14300045
> 
> 赞同：0
> 
> 时间：2013-01-13T02:21:12.167
> 
> 标签：php, symfony-1.4, princexml

我试图在我的项目中使用 PrinceXML 来生成 PDF 文档，我试图用它制作一个简单的 PDF 文件，但似乎没有创建 PDF 文件。所以我做了一点调试，并尝试运行 PrinceXML 的 exe。

```
public function executePrincePDF(sfWebRequest $request)
{
  $output = system("D:\\Program Files\\xampp\\htdocs\\leave\\lib\\vendor\\prince\\Engine\\bin\prince.exe --version");
  echo $output;

  return sfView::NONE;
} 
```

但是没有输出，我看到了预期的输出，因为我尝试用一​​个普通的 php 文件运行上面的代码，输出是这样的：

`Prince 8.1 rev 4 Copyright 2002-2012 YesLogic Pty. Ltd. Non-commercial License Non-commercial License`

如何在 Symfony 1.4 中使用 PrinceXML？在使用 PrinceXML 之前我需要做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:14:41.990

只需使用提供的 php 包装类。[http://www.princexml.com/download/wrappers/](http://www.princexml.com/download/wrappers/)

将其重命名`Prince.class.php`并放入`lib`目录中，这样 symfony 将自动加载它并阅读自述文件以查看如何使用它。

# android - 从应用程序在 android 中启用位置

> ID：14300046
> 
> 赞同：0
> 
> 时间：2013-01-13T02:21:26.437
> 
> 标签：android, android-location

即使在配置中被禁用，您能否从应用程序（用户权限）激活 android 上的定位服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:27:48.630

没有。但是您可以检查它是否已启用并打开设置以防万一：

```
LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
boolean isEnabled = locationManager.isProviderEnabled (LocationManager.GPS_PROVIDER);
  if (!isEnabled){

startActivityForResult(new   Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS), 0);
 } 
```

# ruby-on-rails - ActionView::Template::Error 未定义方法

> ID：14300047
> 
> 赞同：3
> 
> 时间：2013-01-13T02:21:30.730
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, macos

我正在关注为旧版本的 rails 编写的[Head First Rails 。](http://www.headfirstlabs.com/books/hfrails/)我正在研究其第 2 章项目，但在 Rails 3 中。以下是我的文件。

ads_controller.rb

```
class AdsController < ApplicationController
  def show
    @ad = Ad.find(params[:id])
  end

  def index
    @ads = Ad.find(:all)
  end
end 
```

ad.rb

```
class Ad < ActiveRecord::Base
  attr_accessible :description, :email, :img_url, :name, :price, :seller_id
end 
```

index.html.rb

```
</h1>
<ul>
<% for ad in @ads %>
  <li><a href="/ads/<%= ad.id %>"><%= ad.name %></a></li>
<% end %>
</ul> 
```

显示.html.rb

```
<body>
    <p>
        <b>Name:</b><%= @ad.name %>
    </p>
    <p>
        <b>Description:</b><%= @ad.desciption %>
    </p>
    <p>
        <b>Price:</b><%= @ad.price %>
    </p>
    <p>
        <b>Seller Id:</b><%= @ad.seller_id %>
    </p>
    <p>
        <b>Email:</b><%= @ad.email %>
    </p>
    <p>
        <img src="<%= @ad.img_url %>"/>
    </p>
</body> 
```

架构.rb

```
ActiveRecord::Schema.define(:version => 20121209174120) do

  create_table "ads", :force => true do |t|
    t.string   "name"
    t.text     "description"
    t.decimal  "price"
    t.integer  "seller_id"
    t.string   "email"
    t.string   "img_url"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end

end 
```

为所有字段填充数据库。`http://0.0.0.0:3000/ads/`工作但`http://0.0.0.0:3000/ads/<any number>`不工作并引发以下错误：

广告中的 NoMethodError#show

```
Showing /Users/ava/Projects/mebay/app/views/ads/show.html.erb where line #6 raised:

undefined method `desciption' for #<Ad:0x007f7ff346c100>

Extracted source (around line #6):

3:      <b>Name:</b><%= @ad.name %>
4:  </p>
5:  <p>
6:      <b>Description:</b><%= @ad.desciption %>
7:  </p>
8:  <p>
9:      <b>Price:</b><%= @ad.price %>

Rails.root: /Users/ava/Projects/mebay
Application Trace | Framework Trace | Full Trace

app/views/ads/show.html.erb:6:in `_app_views_ads_show_html_erb___4217851794431988162_70093760484140' 
```

在服务器窗口上：

```
ActionView::Template::Error (undefined method `desciption' for #<Ad:0x007f7ff346c100>):
    3:      <b>Name:</b><%= @ad.name %>
    4:  </p>
    5:  <p>
    6:      <b>Description:</b><%= @ad.desciption %>
    7:  </p>
    8:  <p>
    9:      <b>Price:</b><%= @ad.price %>
  app/views/ads/show.html.erb:6:in `_app_views_ads_show_html_erb___4217851794431988162_70093760484140' 
```

如果我删除 show.html.rb 中的描述，那么它可以正常工作并显示名称、价格、seller_id 和电子邮件。我究竟做错了什么？

Ruby 版本：`ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.4.0]` Rails 版本：`Rails 3.2.7`

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T02:31:28.553

您在 show.html.erb 的“描述”中缺少“r”：

`undefined method 'desciption'`

`<b>Description:</b><%= @ad.desciption %>`

# c++ - 通过多次运行程序在 C++ 中多次输出到时间文件

> ID：14300049
> 
> 赞同：0
> 
> 时间：2013-01-13T02:21:36.547
> 
> 标签：c++, xcode

我想将我的 C++ 程序运行所需的时间输出到我桌面上名为 C10.txt 的文件中。我想运行程序 100 次，然后当我打开文件时，它会告诉我程序运行的所有不同时间。我知道我需要 fstream 来做到这一点，但我不知道从那里去哪里。这是我想多次运行的代码。我应该添加什么来完成这项工作？

```
#include <iostream>
#include <cmath>
#include <fstream>

using namespace std;

void merge(int*,int,int);
void mergeSort(int*,int,int);

const int ARRAYSIZE = 10;

int main()
{

    clock_t startTime = clock();
    srand(unsigned(time(0)));

    cout << (double( clock() - startTime ) / (double)CLOCKS_PER_SEC) * 1000000<<  " microseconds." << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:44:08.957

`ofstream yournamehere ("path_to_desktop\C10.txt");`在 main() 中，在您实际执行任何操作之前创建一个。

然后只需在 for 循环中调用您的代码，在开始时分配给`clock()`startTime 并写下您现在正在写的内容。`cout``yournamehere`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:16:28.640

以附加模式打开一个 ofstream。 `std::ofstream tlog("C10.txt", std::ofstream::app);`. 在 main 中，将时钟记录写入`tlog`而不是`std::cout`.

你的使用`std::endl`是浪费。Endl 刷新流，听起来你不需要那样。只需直接使用换行符“\n”即可。

# php - PDO 语句可能不正确

> ID：14300053
> 
> 赞同：1
> 
> 时间：2013-01-13T02:22:07.497
> 
> 标签：php, mysql, pdo

我有下面的 PDO 语句，我试图查找是否有与该语句匹配的行，如果为真则返回 1，然后回显“有一个匹配项”。出于某种原因，即使我的数据库在第 24 行明显匹配，它仍然会返回 false。我希望有人能帮我发现错误。

PDO 声明：

```
<?php

$employeeID = 1;
$dateToday = "01/12/13";

try{
    $conn = new PDO('mysql:host=localhost;dbname=timecard', 'username', 'password');
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $conn->prepare("SELECT COUNT(*) FROM timeRecords WHERE `timeOut`= 'NULL' AND `employeeID`= :employeeID AND `date`= :dateToday");

    $stmt->execute(array(':employeeID' => $employeeID, ':dateToday' => $dateToday));
    } catch(PDOException $e){
        echo'ERROR: ' . $e->getMessage();
    }

if($stmt->fetchColumn() > 0){
    echo "There was a match!";
} else {
    echo "There was no Match";
}

?> 
```

数据库：

```
+----+------------+----------+------------------+---------------------+-----------+------------+-----------+------------------+
| id | employeeID | date     | timeIn           | jobDescription      | equipType | unitNumber | unitHours | timeOut          |
+----+------------+----------+------------------+---------------------+-----------+------------+-----------+------------------+
|  1 |       NULL | NULL     | 01/06/13 7:16 pm |                     |           | NULL       |      NULL | 01/06/13 8:57 pm |
|  2 |       NULL | NULL     |                  |                     |           | NULL       |      NULL | 01/06/13 7:17 pm |
|  3 |       NULL | NULL     | 01/06/13 8:43 pm |                     |           | NULL       |      NULL | NULL             |
|  4 |       NULL | NULL     | 2:12 am          |                     |           | NULL       |      NULL | 12:47 pm         |
|  5 |       NULL | NULL     | 8:33 pm          |                     |           | NULL       |      NULL | NULL             |
| 17 |       NULL | NULL     | 2:32 pm          |                     |           | NULL       |      NULL | NULL             |
| 18 |       NULL | 01/12/13 | 2:33 pm          |                     |           | NULL       |      NULL | 5:07 pm          |
| 19 |       NULL | 01/12/13 | 2:37 pm          |                     |           | NULL       |      NULL | 5:07 pm          |
| 20 |       NULL | 01/12/13 | 5:07 pm          |                     |           | NULL       |      NULL | 5:07 pm          |
| 21 |          1 | 01/12/13 | 5:31 pm          | Worked in Jefferson | Excavator | 01E        |      8182 | 5:37 pm          |
| 22 |       NULL | NULL     |                  | Worked in Jefferson | Excavator | 01E        |      8932 | NULL             |
| 23 |       NULL | 01/12/13 | 7:10 pm          |                     |           | NULL       |      NULL | NULL             |
| 24 |          1 | 01/12/13 | 7:11 pm          |                     |           | NULL       |      NULL | NULL             |
+----+------------+----------+------------------+---------------------+-----------+------------+-----------+------------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:26:41.803

您可能想要更改 = 'null' 因为它正在寻找字符串 'NULL' 而不是 NULL

```
$stmt = $conn->prepare("SELECT COUNT(*) FROM timeRecords WHERE `timeOut` IS NULL AND `employeeID`= :employeeID AND `date`= :dateToday"); 
```

您也可能想尝试：

```
if($stmt->rowCount()){
    echo "There was a match!";
}else{
    echo "There was no Match";
} 
```

# java - Java函数在时间过去后结束

> ID：14300054
> 
> 赞同：3
> 
> 时间：2013-01-13T02:22:16.710
> 
> 标签：java, timer

这就是我想做的。给定一个函数

```
public void foo() {

} 
```

我想让它在一定时间过去后结束。也就是说，假设这是某种随机生成器，它必须生成满足一些困难约束的随机对象，因此在给定的时间分配下它可能会成功，也可能不会成功。也就是说，函数实际上可能是这样的

```
public void foo() {
   //task1
   while(fails) {
     //...
   }

   //task2
   while(fails2) {
      //...
   }

   //more tasks may follow, which use the data from the previous tasks to further try to satisfy difficult conditions
} 
```

这只是一个例子。但关键是该函数由许多 while 循环、许多测试用例和大量繁重的计算组成。

**目标：**我希望能够说“运行 foo()，如果 4 秒后 foo() 仍未完成，则立即停止 foo()”。

**我尝试过的：**我尝试在 foo() 的几乎每一行都包含条件，以查看已经过去了多少时间，如果 4 秒过去了，则返回函数。但是考虑到 foo() 的复杂程度，这显然很难在代码方面进行，因为这需要在函数的每一行上测试时间。

**我的思维逻辑：**我认为这应该是可能的，因为有些函数可以做这种事情，无论状态如何都会终止代码，例如 System.exit(1)。这就是想法。我希望能够从外部调用让这个函数 foo() 终止。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T02:38:51.730

```
// foo method and global variables used
private static ArrayList<Integer> foo() {
    // info class
    class Info {
        public boolean run, completed;
        public ArrayList<Integer> list;
    }
    // declare info object, list
    final Info info = new Info();
    final Object wait = new Object();
    // run a new thread
    Thread t = new Thread(
        new Runnable() {
            // run method
            @Override
            public void run() {
                // setup run
                info.run = true;
                info.completed = false;
                info.list = new ArrayList<>();
                // loop to modify list. Don't put a big piece of code that will
                // take a long time to execute in here. 
                while(info.run) {
                    // example of what you should be doing in here:
                    info.list.add(1);
                    // and if you are done modifying the list, use:
                    break;
                }
                // done modifying list
                info.completed = true;
                synchronized(wait) {
                    wait.notify();
                }
            }
        }
    );
    t.start();
    // wait for four seconds, then return list
    try {
        synchronized(wait) {
            wait.wait(4000);
        }
    } catch (InterruptedException e) { e.printStackTrace(); }
    info.run = false;
    return info.completed ? info.list : null;
}
// main method
public static void main(String[] args) {
    // get list
    ArrayList<Integer> list = foo();
    System.out.println("Done!");
} 
```

foo() 方法是做什么的？

1.  开始修改它最终会返回的列表
2.  如果修改此列表的时间超过四秒，它将停止修改列表并返回列表。
3.  如果列表提前停止，它将返回 null。
4.  它现在只使用局部变量！
5.  不错的奖励，它会在第二次修改完成后立即返回列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T02:28:35.750

将其作为可运行文件提交给执行器服务，并在返回的未来调用 get 并使用所需的超时时间。然后在超时异常的 catch 块中，您可以取消未来。

*编辑：代码示例*

```
import com.google.common.base.Throwables;

import java.util.concurrent.*;

public class ExecutorExample {
  private static final ExecutorService executor = Executors.newSingleThreadExecutor();

  public void example() {
    Future<String> future = executor.submit(new Callable<String>() {
      @Override
      public String call() throws Exception {
        return "Do your complicated stuff";
      }
    });

    try {
      future.get(4, TimeUnit.SECONDS);
    } catch (InterruptedException e) {
      Throwables.propagate(e);
    } catch (ExecutionException e) {
      //handle
    } catch (TimeoutException e) {
      future.cancel(true);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T02:31:44.923

像这样的东西可以解决问题，但要注意：

```
public static void main(String[] args){
    Runnable fooRunner = new Runnable(){ public void run(){
        foo();
    }

    Thread fooThread = new Thread(fooRunner);
    fooThread.start();

    Thread.sleep(4000);

    fooThread.stop(); //warning -- this is deprecated!
} 
```

问题是[`Thread.stop`已弃用](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#stop%28%29)。

Java 中的多线程从根本上说是一种*协作*努力。因为`foo()`可能正在操纵共享状态，可能受到它当前拥有的锁的保护，所以在任意点停止它可能非常危险，并且可能导致程序稍后出现不可预知的故障、错误等。（实际上，由于`foo`的返回类型是`void`，它*必须*在某个时候操作一些共享状态才能存储其结果。）

该语言确实提供了一种方法来告诉线程它应该在下一个方便的点停止：[`Thread.interrupt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)、[`Thread.interrupted()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupted%28%29)和[`InterruptedException`](http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html)。您的`foo()`方法确实需要检查它是否被定期中断；这就是它的完成方式，任何更高级别的库结构（如[`Future.cancel()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#cancel%28boolean%29)）都依赖于此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T02:23:57.490

你必须进入编写线程代码的地狱般的舞台。

[http://docs.oracle.com/javase/tutorial/essential/concurrency/](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

[伪代码（apache commons http://commons.apache.org/lang/download_lang.cgi](http://commons.apache.org/lang/download_lang.cgi)中可用的 mutableboolean ）

```
...
final MutableBoolean finished = new MutableBoolean(false);
new Thread(new Runnable(){
    public void run() {
        doComplicatedStuff(finished);
    }
}).start();

Thread.sleep(4000);
finished.setValue(true); 
```

# c++ - 在集合中的每个元素上调用 print 的通用算法

> ID：14300056
> 
> 赞同：1
> 
> 时间：2013-01-13T02:22:34.620
> 
> 标签：c++, templates, overloading, partial-specialization

编写模板函数时，例如：

```
template<class T> void print(T const & collection) 
```

当循环遍历集合并取消引用迭代器时，如果你有类似的东西，一切都会正常工作，`vector<int>`除非你将它更改为`vector<int*>`. 在不复制代码的情况下处理单个模板函数中的差异的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:18:30.327

`do_print`我会编写一个委托给类模板的单个模板函数`printer`。类模板是一个执行漂亮打印的函数对象，您`T*`只需在`*t`.

所以没有重复漂亮的打印代码，并且编写两个轻量级实现类也有一点不便（这些都被任何现代编译器优化掉了，所以没有运行时开销）。

与 SFINAE 技巧相比，我更喜欢这种解决方案，因为与函数重载技巧相比，部分类专业化为您提供了更多的控制（以及更好的错误消息）。Alexandrescu & Sutter 编码标准也推荐它。

`T**`顺便说一句，此代码也适用`T*`于`T`. `T**`send to`T*`和 finally to也是如此`T`。事实上，任意级别的间接都被简化为打印指针所指向的元素。

```
#include <iostream>
#include <vector>

namespace detail {

template<typename T>
struct printer
{
   void operator()(T const& t) 
   { 
      std::cout << t; // your pretty print code here
   }  
};

template<typename T>
struct printer<T*>
{
   void operator()(T const* t) 
   { 
      printer<T>()(*t); // delegate to printing elements (no duplication of prettty print)
   }
};

}

template<typename T>
void do_print(T const& t)
{
   detail::printer<T>()(t);
}

template<typename C>
void print(C const& collection)
{
   for(auto&& c: collection) 
      do_print(c);
   std::cout << "\n";
}

int main()
{
   int a = 1;
   int b = 2;

   auto c = &a;
   auto d = &b;

   std::vector<int> v1 { a, b };
   std::vector<int*> v2 { c, d };
   std::vector<int**> v3 { &c, &d };

   print(v1);
   print(v2);
   print(v3);
} 
```

[实时工作空间](http://liveworkspace.org/code/3XSemg%246)上的输出

# android - 如何从android中的字符串中加载按钮单击链接

> ID：14300057
> 
> 赞同：0
> 
> 时间：2013-01-13T02:22:39.417
> 
> 标签：android, parsing, webview

我有一个已解析的 Rss 提要，在项目上单击它会打开一个新窗口，其中包含标题、描述和一个按钮，单击以查看它从项目中解析的链接。如何通过单击浏览器的按钮打开该链接。我想我已经接近让它工作了，因为我让浏览器启动，但它没有从字符串中输入我的 url。这是我正在使用的代码

```
 public class SingleMenuItemActivity  extends Activity {

// XML node keys
static final String KEY_NAME = "title";
static final String KEY_COST = "description";
static final String KEY_DESC = "description";
static final String KEY_GUID = "guid";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent
    String name = in.getStringExtra(KEY_NAME);
    String cost = in.getStringExtra(KEY_DESC);
    String description = in.getStringExtra(KEY_DESC);
    String uriUrl = in.getStringExtra(KEY_GUID);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.cost_label);
    TextView lblDesc = (TextView) findViewById(R.id.description_label);

    lblName.setText(name);
    lblCost.setText(cost);
    lblDesc.setText(description);

Button devo = (Button) findViewById(R.id.button1);
devo.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v){
        Intent internetIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(KEY_GUID));
                internetIntent.setComponent(new ComponentName("com.android.browser","com.android.browser.BrowserActivity"));
                internetIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(internetIntent);

    }
});
}

 } 
```

这是应该将信息发送到此活动的 xml 解析器的代码，也许我这里有问题，或者它没有为 url 发送正确的值

```
 public class AndroidXMLParsingActivity extends ListActivity {

// All static variables
static final String URL = "http://www.cpcofc.org/devoapp.xml";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "item";
static final String KEY_NAME = "title";
static final String KEY_COST = "description";
static final String KEY_DESC = "description";
static final String KEY_GUID = "guid";
static final String KEY_LINK = "link";

ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_COST, parser.getValue(e, KEY_COST));
        map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
        map.put(KEY_GUID, parser.getValue(e, KEY_GUID));
        map.put(KEY_LINK, parser.getValue(e,KEY_LINK));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_DESC, KEY_NAME, KEY_COST}, new int[] {
                    R.id.desciption, R.id.name, R.id.cost});

    setListAdapter(adapter);

    Collections.reverse(menuItems);

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.cost)).getText().toString();
            Uri uriUrl = Uri.parse(menuItems.get(position).get(KEY_GUID));

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(KEY_NAME, name);
            in.putExtra(KEY_COST, cost);
            in.putExtra(KEY_GUID, uriUrl);
            startActivity(in);

        }
    });
}
 } 
```

记录崩溃

```
 01-12 20:38:26.886: E/AndroidRuntime(28371): FATAL EXCEPTION: main
 01-12 20:38:26.886: E/AndroidRuntime(28371): java.lang.NullPointerException: uriString
 01-12 20:38:26.886: E/AndroidRuntime(28371):   at android.net.Uri$StringUri.<init>(Uri.java:420)
 01-12 20:38:26.886: E/AndroidRuntime(28371):   at android.net.Uri$StringUri.<init>(Uri.java:410)
 01-12 20:38:26.886: E/AndroidRuntime(28371):   at android.net.Uri.parse(Uri.java:382)
 01-12 20:38:26.886: E/AndroidRuntime(28371):   at com.androidhive.xmlparsing.SingleMenuItemActivity$1.onClick(SingleMenuItemActivity.java:49)
 01-12 20:38:26.886: E/AndroidRuntime(28371):   at android.view.View.performClick(View.java:2532)
 01-12 20:38:26.886: E/AndroidRuntime(28371):   at android.view.View$PerformClick.run(View.java:9293)
 01-12 20:38:26.886: E/AndroidRuntime(28371):   at android.os.Handler.handleCallback(Handler.java:587)
 01-12 20:38:26.886: E/AndroidRuntime(28371):   at android.os.Handler.dispatchMessage(Handler.java:92)
01-12 20:38:26.886: E/AndroidRuntime(28371):    at android.os.Looper.loop(Looper.java:150)
01-12 20:38:26.886: E/AndroidRuntime(28371):    at android.app.ActivityThread.main(ActivityThread.java:4263)
01-12 20:38:26.886: E/AndroidRuntime(28371):    at java.lang.reflect.Method.invokeNative(Native Method)
01-12 20:38:26.886: E/AndroidRuntime(28371):    at java.lang.reflect.Method.invoke(Method.java:507)
01-12 20:38:26.886: E/AndroidRuntime(28371):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-12 20:38:26.886: E/AndroidRuntime(28371):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-12 20:38:26.886: E/AndroidRuntime(28371):    at dalvik.system.NativeStart.main(Native Method) 
```

此日志猫用于给出的第一个答案以及从第一个答案完成的更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:28:21.367

也许正确的是：

```
public class SingleMenuItemActivity  extends Activity {

private String mUrl = "";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ....
    mUrl = in.getStringExtra(KEY_GUID);

    ....
devo.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v){
        Intent internetIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(mUrl));
                internetIntent.setComponent(new ComponentName("com.android.browser","com.android.browser.BrowserActivity"));
                internetIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(internetIntent);

    }
});
}

 } 
```

如果 getIntent().getStringExtra(KEY_GUID) 得到一个像“http://www.google.cl”这样的真实网址

# c# - 如何在 WPF 中显示功能区窗口之前加载所有选项卡？

> ID：14300058
> 
> 赞同：0
> 
> 时间：2013-01-13T02:22:41.003
> 
> 标签：c#, wpf, ribbon-control

我正在使用 Microsoft 的 WPF 功能区控件。我有三个选项卡，每个选项卡加载不同的 WPF 用户控件。在加载主窗口之前，我使用了启动画面。加载主功能区窗口后，一旦用户单击另一个功能区选项卡，该选项卡需要 3 - 4 秒才能呈现和显示。然而，这只是第一次发生。之后切换标签不会显示任何延迟。

附加信息：我在呈现窗口之前初始化了所有用户控件，包括所有选项卡中使用的用户控件。

我通过在启动时将窗口移出屏幕然后在以编程方式切换所有选项卡后返回来发现了一个hack。但是，我在 Windows 8 中读到，如果将窗口移出屏幕，则窗口操作将暂停在内存中。

如何使标签切换和 UI 响应？欢迎所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T13:08:48.577

我无法完全避免延迟，但是我能够通过在更改选项卡时放置一个处理旋转图标覆盖来缓解这个问题。这可以通过在用户单击其他选项卡时在 UI 线程上调用 dispatcher.invokelater 并在加载新选项卡时关闭图标来完成。

# video - 与“视频”播放器相比，Windows Media Center 8 视频质量较差

> ID：14300067
> 
> 赞同：0
> 
> 时间：2013-01-13T02:24:00.363
> 
> 标签：video, windows-8, codec, windows-media-center

我无法弄清楚为什么 WMC8 视频播放器的质量比 Windows 8 中的视频播放器差。我尝试将编解码器更新为 ffdshow 但它不会改变 WMC 中的质量。图像看起来更加锯齿和四四方方，而在视频播放器中则更流畅。

有没有人遇到过类似的问题或对修复有想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:54:05.310

鲨鱼编解码器解决了这个问题。Win8 附带的编解码器并不是最好的。

# iphone - 在 iOS 中发布请求？

> ID：14300077
> 
> 赞同：1
> 
> 时间：2013-01-13T02:25:45.073
> 
> 标签：iphone, ios, networking, post, curl

我正在尝试在我的 iOS 应用程序中执行 POST 请求。

以下行在我的 Mac 的命令行中按预期工作

```
curl -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{"email":"frank.smith@gmail.com","password":"frankSmith"}' http://server.address 
```

但是，我似乎无法将其正确转换为 iOS。这是我尝试过的：

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@",SERVER_ADDRESS]];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
NSString *messageBody = [NSString stringWithFormat:@"{\"email\":\"%@\",\"password\":\"%@\"}",@"frank.smith@gmail.com",@"frankSmith"];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setHTTPBody:[messageBody dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request
                                                              delegate:self];
[connection start]; 
```

我错过了什么/做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:52:14.183

弄清楚了：

我只需要添加这一行：

`[request setHTTPShouldHandleCookies:NO];`

# python - Ruby 和 Minecraft 数据包

> ID：14300079
> 
> 赞同：2
> 
> 时间：2013-01-13T02:26:06.000
> 
> 标签：python, ruby, hex, packet, minecraft

我需要创建一个数据包并将其发送到 Minecraft 服务器。数据包需要以特定方式打包。我在 python 中管理了这个，但 ruby​​ 似乎让我失望了。

这是打包它的 Python 代码：

```
def short(data):
    return pack('>h',data)
def shortchar(data):
    return pack('>H',ord(data))
def string16(data):
    chars = ''.join([shortchar(i) for i in data])
    return short(len(data))+chars

packetbytes = '\x02\x33' + string16(name) + string16(host) + '\x00\x00\x63\xdd' 
```

Ruby 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:01:26.950

尝试这个：

```
def string_16(data)
  [data.size].pack('s>') + data.split('').map(&:ord).pack('S>*')
end

packet_bytes = "\x02\x33" + string_16(name) + string_16(host) + "\x00\x00\x63\xdd" 
```

# clojure - 处理后从函数返回值

> ID：14300081
> 
> 赞同：0
> 
> 时间：2013-01-13T02:26:26.017
> 
> 标签：clojure

在 clojure 中进行一些处理后，如何从函数返回值。

Java中的代码

```
private int add() { 

int i = 0;

if (i == 0) i++; 
if (i == 1) i += 2;
else i += 3;

} 
```

我曾想过使用 let 但 if 语句太多，因此我不确定如何返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:35:24.143

最简单的音译是只为 的每个新值命名新的局部变量`i`，如下所示：

```
(defn add []
  (let [i 0
        i' (if (= i 0) (inc i) i)
        i'' (if (= i' 1)
              (+ 2 i')
              (+ 3 i'))]
    i'')) 
```

所有这些本地变量都可以被命名`i`，而不是调用它们`i'`，但我不想混淆不变性的问题：我们没有`i`以任何方式进行修改，只是引入了一个新的命名本地绑定到一个新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:30:58.453

您的代码模式是：

```
if-else-expr(init-value) -> value1
if-else-expr(value1) -> value2
if-else-expr(value2) -> value3
if-else-expr... 
```

它可以在 clojure 中实现为

```
(defn add []
  (-> init-value
      (#(if (expr1-1) (expr1-2) (expr1-3)))
      (#(if (expr2-1) (expr2-2) (expr2-3)))
      (#(if (expr3-1) (expr3-2) (expr3-3)))
      ...)) 
```

在你的情况下：

```
(defn add []
  (-> 0
      (#(if (= % 0) (+ % 1) %))
      (#(if (= % 1) (+ % 2) (+ % 3))))) 
```

# iphone - 将 NSMutableIndexSet 的每个元素加 1

> ID：14300084
> 
> 赞同：1
> 
> 时间：2013-01-13T02:26:49.380
> 
> 标签：iphone, ios, objective-c, ipad

我有一个 NSMutableIndexSet 并且我希望能够添加和存储由 1 设置的索引，计划使用一个块来执行它，这是我到目前为止所拥有的：

```
[indexes enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL *stop) {
            //add and store back the set here
            idx++;
}]; 
```

有没有办法同时迭代和修改？如果是的话怎么办？上面的代码似乎不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T02:35:58.960

您不能枚举和修改您正在枚举的 NSMutableIndexSet。只需创建一个新的 NSMutableIndexSet 并将条目添加到其中。性能受到影响是值得怀疑的。

示例（使用 ARC）：

```
NSMutableIndexSet *originalIndexSet = [NSMutableIndexSet new];
[originalIndexSet addIndex:1];
[originalIndexSet addIndex:5];

NSMutableIndexSet *newIndexSet = [NSMutableIndexSet new];
[originalIndexSet enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL *stop) {
    [newIndexSet addIndex:idx+1];
}];

NSLog(@"originalIndexSet: %@", originalIndexSet);
NSLog(@"newIndexSet:      %@", newIndexSet); 
```

然后

```
originalIndexSet = newIndexSet; 
```

NSLog 输出：

> originalIndexSet：[索引数：2（2个范围内），索引：（1 5）]
> newIndexSet：[索引数：2（2个范围内），索引：（2 6）]

# design-patterns - 试图弄清楚为什么单身人士被认为是一件坏事；为什么聚合更好？

> ID：14300089
> 
> 赞同：2
> 
> 时间：2013-01-13T02:27:44.533
> 
> 标签：design-patterns, singleton, global

我试图理解为什么单身人士不受欢迎。

假设我有单身 MyClass：

```
class MyClass
{
public:
    void doSomething();
    static MyClass* getInstance();
private:
    int whatever;
    static MyClass* myClass;
    MyClass();
}; 
```

我有一个引用它的类：

```
void A::B()
{
    ...
    MyClass::getInstance()->doSomething();
} 
```

我读到的是，现在 A 类依赖于 MyClass。有效地测试 A 类意味着同时测试 MyClass。任何地方的任何人都可以同时修改我们的 MyClass，所以 A::B() 的结果是不可预测的。

但是为什么全球可访问性是造成这种情况的原因呢？如果我们有聚合呢？如果类 A 有一个指向我们的 MyClass 对象的指针或引用，而其他类也有指向同一个对象的指针或引用怎么办？

```
class A
{
public:
    void B();
private:
    MyClass* myClass;
};
void A::B()
{
    ...
    myClass->doSomething();
} 
```

难道你不能有同样的问题，其他一些类同时修改同一个 myClass 对象，因此 A::B() 依赖于它吗？我想问题是，在多个位置引用同一事物不是几乎像“全球状态”吗？

（我知道这个问题之前已经发布过，但我认为没有其他人专门询问过为什么多次引用同一个对象会更好。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:54:18.523

**“任何地方的任何人都可以同时修改我们的 MyClass”**

这仅在某种多线程或多进程环境中才有可能。如果这是问题的话，你的第二个例子似乎也好不到哪里去。

由于潜在的并发访问，不建议在多线程环境中使用全局变量（或您所称的单例变量），这就是您所说的。为避免并发问题，您将需要处理同步机制——并不总是那么容易。

即使没有多线程，Globals 也倾向于使代码难以在琐碎的系统中管理、调试和控制。

通常，“聚合”不能替代“单例”。单例的替代方案是多个实例，每个实例专用于特定线程，或本地特定类或方法 - 也许你的意思是“聚合” - 从而避免并发和控制/代码管理问题。

“**聚合**” **“委托”**或**“对象组合”**（在此上下文中或多或少是同义词）通常被认为是**继承**的替代方案：与其从基类继承功能，通常更希望设计一个完全独立的类执行必要的功能并由调用类引用和控制 - “黑盒”概念。

继承的问题之一是它倾向于强制派生类处理来自基类的实现和行为，这在派生类中可能不合适。它总是强制将实现细节暴露给派生类，从而违反封装。理想情况下，一个设计良好的类层次结构可以避免这个问题，但是如果你要处理教科书对 Cat(Animal)、Dog (Animal) 等的定义之外的任何东西，设计这样一个类层次结构通常不是一件简单的事情。

# java - 删除arraylist中的每个第三个元素

> ID：14300094
> 
> 赞同：4
> 
> 时间：2013-01-13T02:28:22.113
> 
> 标签：java, arrays, arraylist

我正在尝试遍历一个数组列表并每隔 3 个索引逐渐删除一个元素。一旦它到达数组列表的末尾，我想将索引重置回开头，然后再次遍历数组列表，再次每 3 个索引删除一个元素，直到数组列表中只剩下一个元素。

listOfWords 是一个长度为 3 的数组，之前已填充。

```
int listIndex = 0;

do
{           
    // just to display contents of arraylist    
    System.out.println(listOfPlayers);

    for(int wordIndex = 0; wordIndex < listOfWords.length; wordIndex++
    {
        System.out.print("Player");
        System.out.print(listOfPlayers.get(wordIndex));
        System.out.println("");
        listIndex = wordIndex;                                  
    }           

    listOfPlayers.remove(listOfPlayers.get(listIndex)); 
}
while(listOfPlayers.size() > 1); 
```

我已经尝试实施了几个小时，但我仍然遇到问题。数组列表的元素会发生以下情况：

```
1, 2, 3, 4

1, 2, 4

1, 2 
```

然后它在检查第三个元素（不再存在）时抛出“索引越界错误”异常。一旦它到达最后一个元素，我希望它环绕到第一个元素并继续遍历数组。我还希望它从停止的地方开始，而不是从数组列表中删除元素后从头开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T03:02:58.380

也许我刚刚错过了船，但这就是你想要的吗？

```
import java.util.ArrayList;
import java.util.Random;

public class Test {

    public static void main(String[] args) {

        ArrayList<Integer> numbers = new ArrayList<Integer>();
        Random r = new Random();

        //Populate array with ten random elements
        for(int i = 0 ; i < 4; i++){
            numbers.add(r.nextInt());
        }

        while(numbers.size() > 1){
            for(int i = 0; i < numbers.size();i++){
                if(i%3 == 0){//Every 3rd element should be true
                    numbers.remove(i);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T02:47:32.297

您可以将每隔三个元素移动到一个临时列表中，然后[`List#removeAll(Collection)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#removeAll%28java.util.Collection%29)在完成每个循环时使用它来删除这些项目......直到主列表为空......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T02:48:07.037

让我们备份并从算法上看问题。

*   从第一个项目开始并开始计数。
*   转到下一项并增加您的计数。如果没有下一项，则转到开头。
*   如果计数为“3”，则删除该项目并重置计数。（或模数。）
*   如果列表中还剩下一项，请停止。

让我们编写伪代码：

```
function (takes a list)
  remember what index in that list we're at
  remember whether this is the item we want to delete.

  loop until the list is size 1
    increment the item we're looking at.
    increment the delete count we're on

    should we delete?
      if so, delete!
      reset delete count

    are we at the end of the list?
      if so, reset our index 
```

以这种方式来看，很容易将其立即转换为代码：

```
public void doIt(List<String> arrayList) {
  int index = 0;
  int count = 0;

  while(arrayList.size() != 1) {
    index = index + 1;
    count = count + 1; //increment count

    String word = arrayList.get(index);//get next item, and do stuff with it

    if (count == 3) {
      //note that the [Java API][1] allows you to remove by index
      arrayList.remove(index - 1);//otherwise you'll get an off-by-one error
      count = 0; //reset count
    }

    if (index = arrayList.size()) {
      index = 0; //reset index
    }
  } 
} 
```

因此，您可以看到诀窍是逐步思考您在做什么，然后慢慢将其转化为代码。我认为您可能已经陷入了修复最初尝试的问题：永远不要害怕将代码扔掉。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-06T11:04:57.050

试试下面的代码。它不断删除其中的每个`nth`元素，`List`直到留下一个元素。

```
 List<Integer> array = new ArrayList<>(Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10));
    int nth = 3;
    int step = nth - 1;
    int benchmark = 0;

    while (array.size() > 1) {
        benchmark += step;
        benchmark = benchmark > array.size() - 1 ? benchmark % array.size() : benchmark;
        System.out.println(benchmark);
        array.remove(array.get(benchmark));
        System.out.println(array);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T02:35:11.567

您可以使用一个`int k`不断递增 3 的计数器，例如`k += 3`. 但是，在使用该计数器作为索引来排除任何数组元素之前，请检查您是否已经超出，如果是，请从您的计数器中减去该数组的长度`k`。还要确保，`break`一旦你发现数组只剩下一个元素，就退出你的循环。

```
int k = -1;
int sz = list.length;
while (sz > 1)
{
    k += 3;
    if (k >= sz)
    {
        k -= sz;
    }
    list.remove(k);
    sz --;
} 
```

这个例子表明你已经知道你将多久驱逐一个元素，即`sz - 1`次数。

顺便说一句，`sz % 3`只有三个可能的结果，0、1、2。用一张纸和一杯咖啡，您可以根据它找出幸存的元素是什么，根本不需要运行任何循环！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-13T09:48:01.073

您可以尝试使用迭代器。已经很晚了，所以不要期望太多。

```
public removeThirdIndex( listOfWords ) {
    Iterator iterator = listOfWords.iterator
    while( iterator.hasNext() ){
        iterator.next();
        iterator.next();
        iterator.next();
        iterator.remove();
    }
}

@Test
public void tester(){
    // JUnit test > main
    List listOfWords = ... // Add a collection data structure with "words"

    while( listOfWords.size() < 3 ) {
        removeThirdIndex( listOfWords ); // collections are mutable ;(
    }

    assertTrue( listOfWords.size() < 3 );
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-13T12:36:54.950

我只需将删除的设置为空，然后在内循环中跳过空值。

```
boolean continue;
do {
   continue = false;
   for( int i = 2; i < list.length; i += 3 ){
      while( list.item(i++) == null &&  i < list.length );
      Sout("Player " + list.item(--i) );
      continue = true;
   }
} while (continue); 
```

我会选择这个而不是不合理的数组改组。

（ i++ 和 --i 可能看起来很难看，可能会很好地重写。）

# vim - 有没有办法知道在 vim 中打开（存在）“预览”窗口？

> ID：14300101
> 
> 赞同：7
> 
> 时间：2013-01-13T02:29:56.323
> 
> 标签：vim

其实我只是想写一个脚本来切换`preview`窗口。但似乎无法从 vim 的任何内部设置存档。

所以，作为标题。我想写一个脚本来做到这一点。任何人都知道如何检查`preview`窗口是否打开（或存在）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T02:47:46.477

检查变量`previewwindow`或`pvw`（请参阅[链接](http://vimdoc.sourceforge.net/htmldoc/options.html#%27pvw%27)）。示例代码是：

```
fun! previewWindowOpened
    for nr in range(1, winnr('$'))
        if getwinvar(nr, "&pvw") == 1
            " found a preview
            return 1
        endif  
    endfor
    return 0
endfun 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-09T12:46:57.487

您可以添加`%w`到您的 `statusline`配置中，让它`[Preview]`在相关窗口中显示。

示例状态行设置（在 vimrc 中）

```
set statusline=%.50F%m%r\ %y\%w\ buffer\ %n\ %l\|%c\ [%p%%] 
```

查看`:h statusline`更多信息

# jquery - 下拉更改时如何禁用按钮？

> ID：14300103
> 
> 赞同：0
> 
> 时间：2013-01-13T02:30:09.773
> 
> 标签：jquery

下面的代码执行以下操作。用户从下拉列表中选择一个 SVN 分支。这会在另一个下拉列表中加载具有关联模块的另一个页面。`Continue`当第二个下拉菜单 ( `module_name`) 未被选中时，它工作正常并且按钮被禁用。但是，如果我返回并从第一个下拉列表中选择不同的分支，则该`Continue`按钮处于活动状态，我需要将其重置为禁用。

HTML 代码

```
<select name="branch_name" id="branch_name">
    <option value="">-- Select a branch --</option>
<?php
    foreach($results as $k) {
        echo "<option value='{$k}'>{$k}</option>";
    }
?>
</select>

<select name="module_name" id="module_name">
    <option value="">-- Select a module --</option>
<?php
    foreach($results as $k) {
        echo "<option value='{$k}'>{$k}</option>";
    }
?>
</select> 
```

JS代码

```
$(document).on('change', '#module_name', function(){
    $('#continue').prop('disabled', $('#module_name option:selected').length == '');
});

$('#branch_name').on("change", function() {
    $('#output').load('/tags/module',{branch_name: $(this).val()});
}); 
```

有效的新 JS 代码

```
$(document).on('change', '#module_name', function(){
    $('#continue').prop('disabled', $(this).val() =='');
});

$('#branch_name').on("change", function() {
    $("#continue").attr("disabled", "disabled");
    $('#output').load('/tags/module',{branch_name: $(this).val()});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:34:15.650

`length`是一个数字，您的测试正在检查选择中是否有一个`option`，所以它永远不会相等`''`

```
 /* checks how many eleemnts match selector, will return "0" if none exist*/
    $('#module_name option:selected').length 
```

用于`val()`查看 select 是否有值

```
$(document).on('change', '#module_name', function(){
    $('#continue').prop('disabled', $(this).val() =='');
}); 
```

# php - node.js socket.io 页面查看器

> ID：14300104
> 
> 赞同：0
> 
> 时间：2013-01-13T02:30:23.093
> 
> 标签：php, node.js, socket.io

我想使用 node.js 和 socket.io 来显示当前有多少用户正在查看我网站上的某个页面，方法是向 node.js 服务器发送带有页面地址（即 /homepage 或 /events）的消息，然后读取/写入具有地址名称的文件（即 homepage.txt 或 events.txt），获取当前计数并加 1，然后将其写回文件，然后在断开连接时执行相同操作，而是删除 1 并保存。

这是我到目前为止的代码，目前不包括用于测试的 fs 函数，服务器文件和客户端文件也在同一目录中

客户：

```
<?php
    $url = $_SERVER["REQUEST_URI"];
?>

<body style="overflow: hidden;" />

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="/node_modules/socket.io/lib/socket.io.js"></script>

<script>

    var socket = io.connect('http://localhost:5000');

    socket.on('connected', function (data) {
        $("#log").append('Connected!<br />');
        $("#log").append(data + "<br />");
        socket.emit('viewing', { page: '<?php echo $url; ?>' });
            socket.on('disconnected', function(data) {
            $("#log").append("User Disconnected" + "<br />");
        });
    });

</script>

<div id='log' style='height: 100%; border: 1px solid black;'></div> 
```

服务器：

```
var io = require('socket.io').listen(5000);

var connected_users = 0;

io.sockets.on('connection', function(socket) {
    connected_users++;
    console.log("User Connected!");
    socket.emit("connected", { message: "Users Online: " + connected_users + "!" });

    socket.on('viewing', function(data){
        console.log("User Is Viewing: " + data);
    });

    socket.on('disconnect', function(){
        connected_users--;
        console.log("User Disconnected!");
        socket.emit("disconnected", { message: "Users Online: " + connected_users + "!" });
    });
}); 
```

但由于某种原因，这似乎不起作用，所有服务器说的是“信息 - socket.io 已启动”，当用户连接到客户端页面时没有别的

关于我可能做错的任何提示/想法。

提前谢谢你——文尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:54:42.883

此外，您似乎还包括服务器端 socket.io 代码。正确的脚本标签是这样的：

```
<script src="http://localhost:5000/socket.io/socket.io.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T02:49:55.943

在您编写的行中，您的代码存在一些问题。

```
socket.on('viewing', function(data){
    console.log("User Is Viewing: " + data);//it should be data.page
}); 
```

此外，当`disconnect`事件发生在服务器端时，用户已经离开页面并且套接字已关闭，因此您无法向客户端发送任何内容。`disconnected`解决方案是从客户端发送事件。存在指示用户离开页面的事件，例如`onbeforeunload`事件。

# asp.net - 使用 jQuery load() 加载 MVC 4 默认视图

> ID：14300107
> 
> 赞同：1
> 
> 时间：2013-01-13T02:32:17.070
> 
> 标签：asp.net, ajax, asp.net-mvc, asp.net-mvc-4, jquery-load

我已经构建了一个 mvc 4 网站，并且我构建了它以便在使用 jQuery 加载不同的部分时不会刷新主布局页面。我将导航器和 jQuery 脚本放在 _Layout.cshtml 中：

```
<ul id="menu" class="menu-items">
                <li><a id="Item1" href="#" onclick="loadPage(this.id)">Item1</a></li>
                <li><a id="Item2" href="#" onclick="loadPage(this.id)">Item2</a></li>
                <li><a id="Item3" href="#" onclick="loadPage(this.id)">Item3</a></li>
                <li><a id="Item4" href="#" onclick="loadPage(this.id)">Item4</a></li>
            </ul>

</body>

<script>

    function loadPage(action) {

        $.post("/Home/" + action, function (data) {
            $(content).html(data);
        });
    }
</script> 
```

然后我有我的控制器：

```
namespace MyApp.Controllers
{
public class HomeController : Controller
{

    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Item1()
    {
        if (Request.IsAjaxRequest())
        {
            return PartialView();
        }
        return View();
    }

    [HttpPost]
    public ActionResult Item2()
    {
        if (Request.IsAjaxRequest())
        {
            return PartialView();
        }
        return View();
    } 
```

等等等等。

一切正常，除了我不知道如何只使用一个主要内容视图（当网站在浏览器中加载时为 index.cshtml）。我被迫将 index.cshtml 中的相同内容放入 item1.cshtml 中，这样当我为 item1 触发 onlick 时，它将返回到主要内容。我唯一的路由配置是默认的，最初设置为索引：

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

我想要的是能够只使用一个主要内容页面，但是当我单击 Item1 时，ajax 调用仍然让我回到主要内容。有谁知道我需要做什么？当我想更新主要内容时，必须同时更新两个视图似乎有点过头了。

另外，我认为其他网络开发人员会喜欢这段代码。特别是如果你像我一样建立一个乐队的网站。它允许我将演示歌曲媒体播放器放在 _layout.cshtml 页面中，这样当用户单击其他部分时它不会刷新（即，如果它刷新，则媒体播放器停止）。通过这种设计，用户可以在歌曲继续播放的同时浏览整个网站。

我对javascript相当陌生，所以我确信我可以制作一个更好的onclick处理程序而不是使用锚标签，所以如果有人想向我展示一个更好的方法，请这样做。但我的主要问题是 index.cshtml 与 item1.cshtml 的困境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T04:11:32.290

如果我错了，请纠正我：您想在单击 ItemX 链接时刷新部分页面，并且控制器方法 ItemX 仅通过 Ajax 使用（因为您正在构建单页应用程序）。

在这种情况下，您可以执行以下操作：

**html**

```
<ul id="menu" class="menu-items">
    <li><a id="Item1" href="#" onclick="loadPage(this.id)">Item1</a></li>
    <li><a id="Item2" href="#" onclick="loadPage(this.id)">Item2</a></li>
    <li><a id="Item3" href="#" onclick="loadPage(this.id)">Item3</a></li>
    <li><a id="Item4" href="#" onclick="loadPage(this.id)">Item4</a></li>
</ul>

<div id="container">
</div>

</body>

<script>
    function loadPage(action) {
        $.post("/Home/" + action, function (data) {
            $("#container").html(data);
        });
    }
    // Will load Item1 via Ajax on page load
    loadPage('Item1');
</script> 
```

**家庭控制器**

```
[HttpPost]
public ActionResult Item1()
{
    return PartialView();
} 
```

您的 PartialViews 应该只包含特定于当前项目的 HTML。

**更新**

如果您希望避免 Ajax 调用，您也可以在 cshml 中执行此操作

```
...
</ul>

<div id="container">
    @Html.Partial("Item1PartialView")
</div>

</body>
... 
```

# json - json 到对象 c#

> ID：14300109
> 
> 赞同：0
> 
> 时间：2013-01-13T02:32:26.263
> 
> 标签：json, api, asp.net-mvc-4

我对 c# 中的 json 非常陌生。我应该做一个项目并通过 mvc4 api 将我的数据提供给其他同学。因此，我也应该能够使用其他 api。

由于我真的不知道如何将请求的结果解析为对象，所以我在这里问。

我一直在请求这样的页面：

```
string url = "myUrl";

        WebRequest request = HttpWebRequest.Create(url);

        WebResponse response = request.GetResponse();

        StreamReader reader = new StreamReader(response.GetResponseStream());

        string urlText = reader.ReadToEnd(); 
```

该请求的结果如下：

```
[{"Id":1,"Whose":1,"ReservedUserId":null,"ReservedBy":null,"ReservedSince":null,"City":"Gent","Street":"Sleepstraat","Number":12,"PostalCode":9000,"DateAdded":"2012-12-28T00:00:00","Description":"Momenteel geen omschrijving van dit pand","ContractLength":"12 maand","Surface":12,"MonthPrice":350,"AvailableSince":"2012-12-28T00:00:00","Rooms":2,"Maintenance":"Goed","Equipment":"Niet gemeubeld","Smokers":false,"Animals":false,"Housemates":2,"Toilet":"Gedeeld","Kitchen":"Gedeeld","Shower":"Gedeeld","Internet":"Ja, Telenet","Included":"Gas & Elektriciteit","Guarantee":350,"ContactEmail":"kotbaas@baas.com","ContactTel":"0936001234"}] 
```

我怎样才能轻松地将其转换为 ac# 对象，以便我可以使用它的属性？

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:48:39.033

使用[JSON.Net](http://james.newtonking.com/pages/json-net.aspx%5d)序列化和反序列化 JSON。您可以通过 NuGet 安装它。

如果您有一个映射到 JSON 字段的类，您可以执行以下操作：

```
var chamber = JsonConvert.DeserializeObject<Chamber>(urlText); 
```

您还可以使用动态对象

```
var chamber = JsonConvert.DeserializeObject<dynamic>(urlText);
int id = chamber.Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T02:45:48.830

**方法一：**

首先创建一个所有变量都匹配 json 对象的类

```
public class ClassName{
      public int id {get;set;}
      public int Whose {get;set;}
      public int ReservedUserId {get;set;}
      ...
      ...
      ... 
      public string ContactTel {get; set;}
} 
```

然后您可以使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)将 JSON 对象反序列化为上面定义的新 C# 自定义对象

```
JavaScriptSerializer js = new JavaScriptSerializer();
ClassName [] c =  js.Deserialize<ClassName[]>(json); 
```

**方法二：**

您可以使用[JSON.NET](http://json.codeplex.com/)将 JSON 反序列化为动态对象

```
dynamic obj = JObject.Parse("{Id:1,Whose:1,ReservedUserId:null,ReservedBy:null}");
//dynamic obj = JObject.Parse(urlText); 
```

然后你可以使用访问对象

```
obj.Id;
obj.Whose;
obj.ReservedUserId;
obj.ReservedBy; 
```

# java - 启动意图问题

> ID：14300111
> 
> 赞同：0
> 
> 时间：2013-01-13T02:32:30.517
> 
> 标签：java, android

再次出现另一个新手错误，我似乎无法理解，

我想简单地开始一个新课程的意图，我已经在我的应用程序上完成了很多这些操作，没有任何问题。我的manaifest似乎很好（没有拼写错误或不应该出现的小写/大写字母）并且类名拼写正确等。

这是logcat错误：

```
01-13 02:23:21.816: E/AndroidRuntime(283): FATAL EXCEPTION: main
01-13 02:23:21.816: E/AndroidRuntime(283): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.flybase2/com.example.flybase2.search}: java.lang.NullPointerException
01-13 02:23:21.816: E/AndroidRuntime(283):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-13 02:23:21.816: E/AndroidRuntime(283):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-13 02:23:21.816: E/AndroidRuntime(283):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-13 02:23:21.816: E/AndroidRuntime(283):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-13 02:23:21.816: E/AndroidRuntime(283):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-13 02:23:21.816: E/AndroidRuntime(283):  at android.os.Looper.loop(Looper.java:123)
01-13 02:23:21.816: E/AndroidRuntime(283):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-13 02:23:21.816: E/AndroidRuntime(283):  at java.lang.reflect.Method.invokeNative(Native Method)
01-13 02:23:21.816: E/AndroidRuntime(283):  at java.lang.reflect.Method.invoke(Method.java:521)
01-13 02:23:21.816: E/AndroidRuntime(283):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-13 02:23:21.816: E/AndroidRuntime(283):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-13 02:23:21.816: E/AndroidRuntime(283):  at dalvik.system.NativeStart.main(Native Method)
01-13 02:23:21.816: E/AndroidRuntime(283): Caused by: java.lang.NullPointerException
01-13 02:23:21.816: E/AndroidRuntime(283):  at com.example.flybase2.search.onCreate(search.java:27)
01-13 02:23:21.816: E/AndroidRuntime(283):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-13 02:23:21.816: E/AndroidRuntime(283):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.flybase2"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" /> 
```

```
 <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

         <activity
        android:name=".search"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.example.flybase2.search" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

     <activity
        android:name=".add"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.example.flybase2.add" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

      <activity
        android:name=".view"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.example.flybase2.view" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

我的班级正在从以下位置加载意图：

```
 case (R.id.btnSearch):

    Intent Search = new Intent("com.example.flybase2.search");
    startActivity(Search);

    break;
} 
```

以及旨在从意图打开的“.search”类文件。

```
package com.example.flybase2;

import android.app.ListActivity;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;

public class search extends ListActivity implements OnClickListener {

Button searchButton;
EditText searchName;
ListView searchedListResults;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

searchButton = (Button) findViewById(R.id.btnSearch);   
searchName = (EditText) findViewById(R.id.inputName);   

searchButton.setOnClickListener(this);

}
@Override
public void onClick(View clickedSearchButton) {

String searchedName = searchName.getText().toString();

searchedListResults = (ListView)findViewById(android.R.id.list);
DBHandler DBsearchRef = new DBHandler(this, null, null);

DBHandler search = new DBHandler(this, null, null);

search.open();
Cursor cursor = search.searchOnName(searchedName);

startManagingCursor(cursor);

@SuppressWarnings("static-access")
String [] from = new String [] {DBsearchRef.KEY_NAME, DBsearchRef.KEY_TEL,  DBsearchRef.KEY_EMAIL, DBsearchRef.KEY_COMMENTS};
int [] to = new int [] {R.id.txtNameList, R.id.txtTelList, R.id.txtEmailList, R.id.txtCommentsList};

@SuppressWarnings("deprecation")
SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.search, cursor, from, to);
searchedListResults.setAdapter(cursorAdapter);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:38:56.517

你的意图是启动活动就好了。空指针异常出现在这一行

```
searchButton.setOnClickListener(this); 
```

您尚未为活动设置内容视图，因此`findViewById`返回 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T02:42:41.237

我认为您`setContentView()`在搜索课程中失踪了。在访问之前设置布局：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.YourLayOutName); 
```

# command-line - 是否可以使用 AHK 创建像这样的宏？

> ID：14300112
> 
> 赞同：0
> 
> 时间：2013-01-13T02:32:36.030
> 
> 标签：command-line, macros, autohotkey

我有点像 MMORPG 游戏中的 GM。我们的工作是举报使用作弊的人并将他们送进监狱。但是离开那个监狱区并不难，所以我们必须一次又一次地送他们。我有一个很长的昵称列表（我有大约 400 个昵称要重复报告）所以真的很无聊。

我想问的是，我对AHK一无所知。如果这种宏是可能的，我会做一个长期的研究来创建那个宏。但如果这不可能，我什至不会尝试。

我需要的是；宏将按“enter”激活聊天模式。然后将写入“/report -cheaternickname-”并记住存在 400 多个昵称，所以我需要为不同的昵称重复宏。写完“/report -cheaternickname-”宏后会按回车键。然后会弹出一个小聊天框。宏将点击框，将写入报告原因，然后点击确认。然后会弹出另一个聊天框，说“您的报告已收到”。宏也会点击确认。并且会出于 400 多个不同的原因使用 400 多个昵称。这真的可以吗？只是想知道。不要求您创建此宏。如果你回答这个问题，我会尝试自己做：D

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:17:35.777

该脚本用于在 Google 上执行一系列搜索。搜索字符串存储在文本文件中并读入数组，然后根据点击 {Tab} 键逐一执行（您可以自动重复此操作）。

当脚本中断时，您可以重新启动它并给它一个（新的）起始编号，或者告诉它再次从 1 开始。

不完全是您正在寻找的东西，但它为您提供了很多起点。

```
#Persistent
#SingleInstance Force
#installKeybdHook
SetWorkingDir %A_ScriptDir%
TempDir = C:\Temp
Menu, Tray, Icon , %A_AhkPath%, 2, 1
TrayTip, JobSearch, Started, 1
SetTitleMatchMode, 2
TextCounter = 0
Return

+Launch_App1::
Run, Notepad %TempDir%\Google.txt
Return

Launch_App1:: ; vacatures Job Search
+CapsLock::
Restart:
MouseGetPos, XPos2, YPos2
XPos3 := 50
YPos3 := 100
IniRead, TextCounter, %TempDir%\GoogleCounter.ini, Counter, Nr

ArrayCount = 0
Loop, Read, %TempDir%\Google.txt   ; This loop retrieves each line from the file, one at a time.
{
    ArrayCount += 1  ; Keep track of how many items are in the array.
    Array%ArrayCount% := A_LoopReadLine  ; Store this line in the next array element.
}
MaxSearchCount = %ArrayCount%
TextCounter += 1
If (TextCounter > 1)
InputBox, TextCounter , Start, Number (1..%MaxSearchCount%),,,,,,,10,%TextCounter%  ; InputBox, OutputVar [, Title, Prompt, HIDE, Width, Height, X, Y, Font, Timeout, Default]
TextCounter += 0
IniWrite, %TextCounter%, %TempDir%\GoogleCounter.ini, Counter, Nr
SearchText:=Array%TextCounter%
MouseClick, left
gosub, SendNewSearch
Return

;=======================================================================================================================================
Browser_Favorites:: ; Search for next Vacature string (Vacatures)
CapsLock::
If (TextCounter = 0) ; Restart with previous script if Textcounter is set to 0
{
    GoSub,  Restart
    Exit
}
IniRead, TextCounter, %TempDir%\GoogleCounter.ini, Counter, Nr
TextCounter += 1
IniWrite, %TextCounter%, %TempDir%\GoogleCounter.ini, Counter, Nr
SearchText:=Array%TextCounter%
If (SearchText = "")
{
    TextCounter := 0
    IniWrite, %TextCounter%, %TempDir%\GoogleCounter.ini, Counter, Nr
    Send, ^{F4}
    SplashTextOff
    ExitApp
}

Sleep, 200
Send, {Home 2}
Sleep, 700
Send, {WheelUp 10}
Sleep, 400
gosub, SendNewSearch
Exit

SendNewSearch:
    MouseGetPos, XPos3 ,YPos3 
    SetTitleMatchMode, 2
    IfWinActive, Chrome
    {
    while (A_Cursor = "AppStarting")
        Sleep, 200 ; Continue

    Sleep, 100
    SplashTextOff
    MouseClick, left, %XPos2%,%YPos2%
    WinGetTitle, this_title, A
    IfInString, this_title, Google
    {
        Send, {Home}+{End}{DEL}%SearchText%{Enter}
    }
    ToolTip, Waiting....
    DisplayText = Nr%TextCounter%  %SearchText%
    Sleep, 500
    SplashTextOn, 200, 0,%DisplayText%
    WinMove, %DisplayText%, , 800, 25
    ToolTip
    ;MouseMove,(50),(500)
    MouseMove,%XPos3%,%YPos3%
    ClipBoard = %SearchText%
    }
Exit
Exit

+Browser_Favorites::
run, %TempDir%\Google.txt
Return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:57:38.953

基本上你正在尝试编写一个输入输入的脚本，然后是一个字符列表然后再次输入？

您可以做的非常简单的事情是创建一个 .txt 文件，其中包含您希望它键入的所有内容（不包括输入，除了行之间），并创建一个如下所示的宏：

```
#n::
Loop, Read, inputFile.txt
{
    Send {Enter}%A_LoopReadLine%{Enter}
}
return 
```

基本上你运行宏并打开游戏到你可以开始输入回车，字符信息，回车，但按windows键和'n'键。然后，该宏将循环遍历“inputFile.txt”的每一行，并刺激输入一个回车、该行，然后再输入一个回车。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:09:29.843

这是可能的。您可以创建两个 txt 文件，其中包含 +400 个用户名和 +400 个不同原因的列表。宏可以逐行读取，可以使所有东西，你想要的，超过400次。

您将需要[此循环](http://www.autohotkey.com/docs/misc/Arrays.htm)将行从 txt 文件写入数组，[函数](http://www.autohotkey.com/docs/Functions.htm)中的循环用于检查指定像素处的预期颜色`PixelGetColor`（http://www.autohotkey.com/docs/commands/PixelGetColor.htm）用于检测纽扣。您还可以使用`PixelGetColor`命令或 AutoIt3 Window Spy，它将与 autohotkey 一起安装[，](/questions/tagged/autohotkey "显示标记为“自动热键”的问题")以查看按钮的颜色。最后你可以从这里开始编码（http://www.autohotkey.com/docs/）。

PS。抱歉，网站不允许我使用超过 2 个超链接。

# jquery - 禁用附加时突出显示的选项

> ID：14300117
> 
> 赞同：0
> 
> 时间：2013-01-13T02:34:36.757
> 
> 标签：jquery

我将一个禁用的选项附加到一个`<select>`框中，但我有一个小问题。如果我在 中附加选项，则`<select>`其中一个选项仍然突出显示，这似乎没什么大不了的，但是当突出显示一个禁用的选项并且显然无法突出显示其他选项时，它看起来并不好。

附加选项时如何删除突出显示？下面是代码：

```
var selectedOption = $('select#studentadd');
$('select#studentselect').append(selectedOption.html()).attr('disabled', 'disabled'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:16:31.953

可能这就是你想要的：

```
var selectedOption = $('select#studentadd');
$("select#studentselect").append(selectedOption.html()).attr("disabled", "disabled");
$("select#studentselect option:selected").removeAttr("selected"); 
```

工作 jsFiddle 在[这里](http://jsfiddle.net/pmatseykanets/u6V9s/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T02:47:56.883

要清除选定的选项，`select`最简单的方法是将 的值设置`select`为空字符串，使用`val()`

```
$('select#studentselect').val('').append(selectedOption.html()).attr('disabled', 'disabled'); 
```

# excel - Excel 宏在 Debug 中有效，但不能在完全运行中

> ID：14300120
> 
> 赞同：2
> 
> 时间：2013-01-13T02:34:59.733
> 
> 标签：excel, excel-2007, vba

所以我有一个宏，旨在为工作表的打印区域中的每个分页符插入 4 个标题行。当我在调试模式下逐步运行它时，它将为每个分页符插入正确的标题行，但是当它自行运行时，它似乎正在跳过部分。我添加了 Sleeps 和 Debug.Prints 以找出问题所在，但我仍然无法弄清楚。

这是代码：

```
Sub InsertRowPageBreak()

    Dim WS As Worksheet
    Dim rng As Range
    Dim pb As Variant
    Dim Row As Integer
    Dim OffSet As Integer
    Dim InsertRow As Integer

    Set WS = ThisWorkbook.Worksheets(1)
    WS.Activate
    Rows("1:1").Select
    Selection.Delete Shift:=xlUp
    Dim i As Integer
    i = 1

    For Each pb In WS.HPageBreaks
        Debug.Print "Iteration: " & i
        i = i + 1

        Row = pb.Location.Row
        Range("A" & Row).Select
        Debug.Print "Page Break at Row: " & Row

        If (Range("A" & Row - 2).Value Like "*Date*") Then
            InsertRow = Row - 4
            Range("A" & InsertRow).Select
            ActiveWindow.SelectedSheets.HPageBreaks.Add Before:=ActiveCell
            Debug.Print "Inserting Page Break @ Row: " & InsertRow
        Else
            Sleep 150
            InsertRow = Row - 1
            Debug.Print "Inserting Row " & InsertRow
            If (Range("D" & InsertRow).Value Like "*Compliment*") Then
                Sleep 150
                Sheets(2).Activate
                Rows("1:4").Select
                Selection.Copy
                Sheets(1).Activate
                Range("A" & InsertRow).Select
                Selection.Insert Shift:=xlDown
                ActiveWindow.SelectedSheets.HPageBreaks.Add Before:=ActiveCell
                Debug.Print "Inserted Header 1"
            ElseIf (Range("D" & InsertRow).Value Like "*Complaint*") Then
                Sleep 150
                Sheets(2).Activate
                Rows("5:8").Select
                Selection.Copy
                Sheets(1).Activate
                Range("A" & InsertRow).Select
                Selection.Insert Shift:=xlDown
                ActiveWindow.SelectedSheets.HPageBreaks.Add Before:=ActiveCell
                Debug.Print "Inserted Header 2"
            ElseIf (Range("D" & InsertRow).Value Like "*Question*") Then
                Sleep 150
                Sheets(2).Activate
                Rows("9:12").Select
                Selection.Copy
                Sheets(1).Activate
                Range("A" & InsertRow).Select
                Selection.Insert Shift:=xlDown
                ActiveWindow.SelectedSheets.HPageBreaks.Add Before:=ActiveCell
                Debug.Print "Inserted Header 3"
            End If
            Sleep 250
        End If
        Sleep 250
    Next pb

End Sub 
```

当我在调试模式下运行它时，Debug.Print 打印出来

```
Iteration: 1
Page Break at Row: 33
Inserting Row 32
Inserted Header 1

Iteration: 2
Page Break at Row: 66
Inserting Row 65
Inserted Header 1

Iteration: 3
Page Break at Row: 94
Inserting Row 93
Inserted Header 2

Iteration: 4
Page Break at Row: 119
Inserting Row 118
Inserted Header 3
```

当它自己运行时

```
Iteration: 1
Page Break at Row: 33
Inserting Row 32
Inserted Header 1

Iteration: 2
Page Break at Row: 35
Inserting Row 34

Iteration: 3
Page Break at Row: 92
Inserting Row 91
Inserted Header 2

Iteration: 4
Page Break at Row: 94
Inserting Row 93 
```

任何建议或帮助将不胜感激。

谢谢，凯文

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T03:22:45.483

插入`Pagebreak`Excel 后需要重新分页才能更新`HPageBreaks`集合。

为了允许 Excel 在代码运行时执行此操作，请`DoEvents`使用`Sleep`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T03:01:49.630

我目前无法访问 Excel，因此无法准确回答您的问题，但如果我是您，我会做一些不同的事情，因为现在您的代码看起来很容易出错。

首先，每当您通过循环向工作表添加或删除行时，都应该让它倒退。例如：

```
dim i as integer

for i = mySheet.usedrange.rows.count to 1 step -1

  'Put your code here

next i 
```

在这种情况下，您必须先循环遍历分页符并识别行号，然后以相反的顺序遍历行号，但这可能会有所帮助。

其次，将您将使用的任何工作表分配给一个变量，并引用它们而不是调用激活方法。我以前也用过`activate`，但后来知道这是一个菜鸟错误，老实说，我不记得为什么我首先使用它。例如，不要这样做：

```
Sheets(2).Activate
Rows("1:4").Select
Selection.Copy
Sheets(1).Activate
Range("A" & InsertRow).Select 
```

做这样的事情：

```
dim myBook as workbook, a as worksheet, b as worksheet

set myBook = Excel.ActiveWorkbook
set a = myBook.Sheets(1)
set b = myBook.Sheets(2)

b.rows("1:4").Select
Selection.Copy
a.Range("A" & InsertRow).Select 
```

就像我说的那样，我知道这并不能完全回答您的问题，如果不是很长，我会将其放在评论中，但我真的认为这将大大减少将来的错误并有助于您的整体[代码闻](http://en.wikipedia.org/wiki/Code_smell)。如果我现在有 Excel，我可以做得更多。对不起，我不能提供更多帮助，但祝你好运！

# javascript - 将 Html.ValidationSummary 转换为 javascript 友好的字符串

> ID：14300121
> 
> 赞同：1
> 
> 时间：2013-01-13T02:35:08.330
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, toastr

我有一个正在通过调用的部分视图，`Ajax.BeginForm()`我需要在脚本标签中返回，`Html.ValidationSummary()`该标签将显示为 toastr

这是我的部分代码：

```
<script id="partial-js-container" data-ajax-update="true">
    toastr.error('@Html.ValidationSummary()');
</script> 
```

返回的字符串中`Html.ValidationSummary()`有一个回车符，最终无法正常工作。我怎样才能解决这个问题并使其健壮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:05:30.170

> 我怎样才能解决这个问题并使其健壮？

通过正确编码：

```
<script id="partial-js-container" data-ajax-update="true">
     var message = @Html.Raw(Json.Encode(((@Html.ValidationSummary()==null)?"":@Html.ValidationSummary().ToHtmlString())));
                if (message.length > 0) {
            toastr.error(message);
        }
</script> 
```

# eclipse - 使用eclipse数据绑定时如何处理java.util.Properties

> ID：14300128
> 
> 赞同：2
> 
> 时间：2013-01-13T02:36:43.400
> 
> 标签：eclipse, swt, eclipse-rcp, jface

我有一个模型类，它包含一个 java.util.Properties。

```
public class Model{
    private Properties properties;
} 
```

此属性可以包含任意键值对。现在我想将“属性”绑定到 JFace TableViewer。这个怎么做？

一些示例代码会很好，我已经用谷歌搜索过，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:40:19.173

要从 TableViewer 访问您的模型，您必须提供 LabelProvider 和 ContentProvider 作为 TableViewer 的翻译，当然还要提供模型本身。

简而言之，ContentProvider 将您的模型内容包装到 TableViewer 的结构中（基本上是将您的模型分解为 TableViewer 的逐行方法）。

LabelProvider 允许您控制 TableCells 中的实际呈现。

为了提供您的模型，TableViewer 提供了一个 setInput 方法。但是，当您的模型被建模为 JavaBean 时，这种方法效果最好。

如果您查看这些片段，您会在 ContentProvider 的实现中找到类似的内容，如下[所示](http://git.eclipse.org/c/platform/eclipse.platform.ui.git/tree/examples/org.eclipse.jface.snippets/Eclipse%20JFace%20Snippets/org/eclipse/jface/snippets/viewers/Snippet013TableViewerNoMandatoryLabelProvider.java)：

```
public Object[] getElements(Object inputElement) {
   return (MyModel[]) inputElement;
} 
```

因此，如果我现在理解的您的模型只是您的属性的包装器，那么实现您的目标的一种方法是引入*PropertyLine*的概念，该概念可以通过启动或通过 JFace 数据绑定动态填充（可能是一个不同的主题）。

```
public class Model{
...
   private PropertyLine[] propertyLineArray;

   private PropertyLine[] initializeProperties(){
      //initialize your PropertyLines
   }
   public Model(){
      ...
      propertyLineArray=initializeProperties();
      ...
   }
   public PropertyLine[] getPropertyLines(){
      return propertyLineArray;
   }
}

public class ProperyLine{
...
    private String propertyKey;
    private String propertyText;
    //getter, setter
...
} 
```

您的 ContentProvider 看起来像这样：

```
private class PropertyContentProvider implements IStructuredContentProvider {
...
  public Object[] getElements(Object inputElement) {
     return (PropertyLine[]) inputElement;
  }
...
} 
```

你的 LabelProvider 看起来很简单：

```
public class PropertyLabelProvider extends LabelProvider implements
        ITableLabelProvider {
...

public String getColumnText(Object element, int columnIndex) {
    PropertyLine pl=(PropertyLine) element
    return pl.getPropertyText();
}
...
} 
```

您可以通过以下方式将所有内容连接起来：

```
final TableViewer v = new TableViewer(shell, SWT.BORDER
            | SWT.FULL_SELECTION);
v.setLabelProvider(new PropertyLabelProvider());
v.setContentProvider(new PropertyContentProvider ());
v.setInput(myModel.getPropertyLines()); 
```

# php - 删除除指定之外的所有空标签

> ID：14300130
> 
> 赞同：0
> 
> 时间：2013-01-13T02:37:22.903
> 
> 标签：php, regex, html-parsing, regex-negation

以下 PHP 正则表达式删除所有空标签：

```
#<[^\/>]*>([\s]?)*<\/[^>]*>#u 
```

我想删除不匹配的空标签：

```
<div style="clear:both"></div> 
```

我试过了：

```
#^(<div style="clear:both"></div>)<[^\/>]*>([\s]?)*<\/[^>]*>#u 
```

......但它没有工作。

如何添加否定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T03:04:13.123

假设它格式正确*并且*没有丢失结束标签，这应该可以解决问题：

```
<(?!div\s+style=(?:"[^"]*?\bclear:\s*both\b[^"]*"|'[^']*?\bclear:\s*both\b[^']*')\s*>\s*</div>).*?>\s*</.*?> 
```

确保也使用不区分大小写标志。不过，我仍然建议不要这样做。

编辑：我没有测试我的编辑，但我相当有信心它会更彻底。

# c - 关于数组和指针的存储

> ID：14300131
> 
> 赞同：1
> 
> 时间：2013-01-13T02:37:28.210
> 
> 标签：c, arrays, pointers, constants

我无法理解以下代码：

```
 const char *suit[4] = {"Hearts", "Diamonds", "Clubs", "Spades"} 
```

我不明白数组套装中存储了什么，它们是指针吗？如果是这样，字符串存储在哪里？

另外，是指针常量还是数组常量？

我将不胜感激此代码的完整详细说明，以及内存中发生了什么！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:41:24.623

[我们通过使用cdecl.org](http://cdecl.ridiculousfish.com/?q=const+char+%2Asuit%5B4%5D+)学到了很多东西。这就是它告诉我们的`suit`：

> 将西装声明为指向 const char 的指针的数组 4

所以：

*   该数组包含 4 个指针。
*   每个指针指向 a `char`（在这种情况下，每个字符串的第一个字符）。
*   指针不是`const`，数组也不是。

字符串是*文字*；它们的存储位置是特定于实现的。

在 ASCII 艺术中：

```
 "Clubs"
               ^
               |  "Spades"
               |   ^
               |   |
     +---+---+---+---+
suit |   |   |   |   |
     +---+---+---+---+
       |   |
       |   v
       |  "Diamonds"
       v
      "Hearts" 
```

请注意，`suit`它本身**不是**指针；它是数组的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T02:39:17.760

`const char *`是字符串类型，因为字符串只是字符数组。`const char *`这意味着您有一个（字符串）数组。字符串本身是常量，编译时存储在文件二进制文件的 .data 部分中。因此，指针指向的数据是恒定的。

# doctrine - 与教义的复杂关系

> ID：14300135
> 
> 赞同：1
> 
> 时间：2013-01-13T02:38:27.980
> 
> 标签：doctrine, relational-database, doctrine-1.2

我正在建立一个平台，访问者可以在该平台上填写表格以请求各个市场的产品和服务报价。

示例：访客 John Doe 希望在他的屋顶上安装太阳能电池板。他访问我们的网站，选择他的类别（太阳能电池板）并填写表格。然后，他的联系方式将发送给我们所有的太阳能电池板供应商。

可以请求报价的所有类别都存储在一个`category`表中：

```
id | name
-------------------
1  | solar panels
2  | car rental 
```

每个类别都有 2 个表格需要填写：

1.  一份表格，其中包含访问者的详细联系方式以及他们希望收到哪个类别的报价。此表单对每个类别都有相同的字段，并存储在一个`inquiry`表中：

    ```
    id | fk_id_category | name     | email              | Region
    ----------------------------------------------------------
    1  | 1              | John Doe | johndoe@gmail.com  | New York
    2  | 2              | Jane Doe | janedoe@gmail.com  | California 
    ```

2.  包含与该类别相关的特定问题的表格。这些存储在一个`category_field`表中：

    ```
    id | fk_id_category | label
    ---------------------------------------------------------------
    1  | 1              | What type of roof do you have?
    2  | 2              | What type of car do you want to rent?
    3  | 2              | For how long do you want to rent the car? 
    ```

    这些问题的答案存储在一个`inquiry_detail`表中：

    ```
    id | fk_id_inquiry | fk_id_category_field | answer
    ---------------------------------------------------------------
    1  | 1             | 1                    | A flat roof
    2  | 2             | 2                    | An SUV
    3  | 2             | 3                    | One week 
    ```

我正在使用 Doctrine 1.2.4，我想了解如何保存特定类别的答案（`inquiry_detail`表中的答案）。

目前我有以下解决方案，但我认为应该有更好的方法：将`name`每个表单元素的属性设置为表`id`中其对应记录的属性`category_field`：

```
<label for="2">What type of car do you want to rent?</label>
<input type="text" name="2" />
<label for="3">For how long do you want to rent the car?</label>
<input type="text" name="3" /> 
```

提交表单后，我们遍历`$_POST`数组并`inquiry_detail`为每个元素创建一个新记录（暂时不要介意`fk_id_inquiry`）。

```
foreach($_POST as $key => $value) {
    $inquiryDetail = new Model_Inquiry_Detail();

    $inquiryDetail['fk_id_category_field']   = $key;
    $inquiryDetail['answer']                 = $value;

    $inquiryDetail->save();
} 
```

# c++ - boost/thread.hpp 因“clang++ -std=c++11 -stdlib=libc++”而失败

> ID：14300136
> 
> 赞同：2
> 
> 时间：2013-01-13T02:38:28.373
> 
> 标签：c++, boost, c++11, clang, libc++

尝试使用 clang + libc++（C++11 模式）编译这一行时：

```
#include <boost/thread.hpp> 
```

clang 发出以下错误：

```
在 test.cpp:1 中包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/thread.hpp:13 包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/thread/thread.hpp:17 包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/thread/pthread/thread_data.hpp:11 包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/thread/locks.hpp:18 包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/chrono/time_point.hpp:33 包含的文件中：
/Users/yongwei/Programming/boost_1_52_0/boost/chrono/duration.hpp:353:49: 错误：
  constexpr 函数从不产生常量表达式
    静态 BOOST_CHRONO_LIB_CONSTEXPR 浮动最低（） ...
                        ^
/Users/yongwei/Programming/boost_1_52_0/boost/chrono/duration.hpp:355:21：注意：
  非 constexpr 函数 'max' 不能在常量表达式中使用
    返回 -(std::numeric_limits::max) ();
        ^
/usr/bin/../lib/c++/v1/limits:443:43：注意：在这里声明
_LIBCPP_INLINE_VISIBILITY 静态类型 max() _NOEXCEPT {return ...
                      ^
在 test.cpp:1 中包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/thread.hpp:13 包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/thread/thread.hpp:17 包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/thread/pthread/thread_data.hpp:11 包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/thread/locks.hpp:18 包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/chrono/time_point.hpp:33 包含的文件中：
/Users/yongwei/Programming/boost_1_52_0/boost/chrono/duration.hpp:361:50: 错误：
  constexpr 函数从不产生常量表达式
    静态 BOOST_CHRONO_LIB_CONSTEXPR 双最低（） ...
                         ^
/Users/yongwei/Programming/boost_1_52_0/boost/chrono/duration.hpp:363:21：注意：
  非 constexpr 函数 'max' 不能在常量表达式中使用
    返回 -(std::numeric_limits::max) ();
        ^
/usr/bin/../lib/c++/v1/limits:443:43：注意：在这里声明
_LIBCPP_INLINE_VISIBILITY 静态类型 max() _NOEXCEPT {return ...
                      ^
在 test.cpp:1 中包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/thread.hpp:13 包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/thread/thread.hpp:17 包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/thread/pthread/thread_data.hpp:11 包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/thread/locks.hpp:18 包含的文件中：
在 /Users/yongwei/Programming/boost_1_52_0/boost/chrono/time_point.hpp:33 包含的文件中：
/Users/yongwei/Programming/boost_1_52_0/boost/chrono/duration.hpp:369:55: 错误：
  constexpr 函数从不产生常量表达式
    静态 BOOST_CHRONO_LIB_CONSTEXPR 长双最低（） ...
                          ^
/Users/yongwei/Programming/boost_1_52_0/boost/chrono/duration.hpp:371:21：注意：
  非 constexpr 函数 'max' 不能在常量表达式中使用
    返回 -(std::numeric_limits::max)();
        ^
/usr/bin/../lib/c++/v1/limits:443:43：注意：在这里声明
_LIBCPP_INLINE_VISIBILITY 静态类型 max() _NOEXCEPT {return ...
                      ^
产生 3 个错误。

```

在我看来这是 libc++ 中的一个错误，因为 C++11 确实要求这些函数是`constexpr`.

有人遇到过同样的问题，你能同意吗？你知道任何修复吗？

我的clang版本是：

```
Apple clang 版本 4.1 (tags/Apple/clang-421.11.66) (基于 LLVM 3.1svn)
目标：x86_64-apple-darwin11.4.2
线程模型：posix

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:18:22.460

在马克思的暗示下，我找到了一种解决方法。在这种情况下，定义会有所`BOOST_NO_CXX11_NUMERIC_LIMITS`帮助。所以这似乎是 libc++ 的不完整。

根据 Howard Hinnant 的说法，这是 libc++ 的一个错误，并且已经在主干上修复了。然而，目前还没有关于 Apple 何时可以将修复程序发布到 Xcode 中的信息。我将标记现在已回答的问题。

编辑：该问题已在 Apple LLVM 4.2 版（clang-425.0.28）（基于 LLVM 3.2svn）中得到修复。我当前的 Xcode 版本是 4.6.3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T03:15:26.957

我在 xcode 4.3 中使用 boost，并使用 tr1 random，fisrt 也构建错误，但我在 #include 之前定义了 #define BOOST_HAS_TR1_RANDOM 1 并成功构建。你可以尝试类似的方法，手动指出构建器有它自己的 tr1 实现。这可能是 boost 的构建脚本的错误。

# python - 从 Python 的 pandas 中的数据帧制作 matplotlib 散点图

> ID：14300137
> 
> 赞同：86
> 
> 时间：2013-01-13T02:38:30.010
> 
> 标签：python, matplotlib, plot, dataframe, pandas

使用Python 中`matplotlib`的数据框制作一系列散点图的最佳方法是什么？`pandas`

例如，如果我有一个`df`包含一些感兴趣的列的数据框，我发现自己通常会将所有内容都转换为数组：

```
import matplotlib.pylab as plt
# df is a DataFrame: fetch col1 and col2 
# and drop na rows if any of the columns are NA
mydata = df[["col1", "col2"]].dropna(how="any")
# Now plot with matplotlib
vals = mydata.values
plt.scatter(vals[:, 0], vals[:, 1]) 
```

在绘图之前将所有内容转换为数组的问题在于它会迫使您脱离数据框。

考虑这两个用例，其中拥有完整的数据框对于绘图至关重要：

1.  例如，如果您现在想查看在`col3`对 的调用中绘制的对应值的所有值`scatter`，并按该值对每个点（或大小）进行着色，该怎么办？您必须返回，取出非 na 值`col1,col2`并检查它们的对应值。

    有没有办法在保留数据框的同时进行绘图？例如：

    ```
    mydata = df.dropna(how="any", subset=["col1", "col2"])
    # plot a scatter of col1 by col2, with sizes according to col3
    scatter(mydata(["col1", "col2"]), s=mydata["col3"]) 
    ```

2.  同样，假设您想根据某些列的值对每个点进行不同的过滤或着色。例如，如果您想自动在它们旁边绘制满足某个截止点的点`col1, col2`的标签（标签存储在 df 的另一列中），或者对这些点进行不同的着色，就像人们对 R 中的数据框所做的那样。对于例子：

    ```
    mydata = df.dropna(how="any", subset=["col1", "col2"]) 
    myscatter = scatter(mydata[["col1", "col2"]], s=1)
    # Plot in red, with smaller size, all the points that 
    # have a col2 value greater than 0.5
    myscatter.replot(mydata["col2"] > 0.5, color="red", s=0.5) 
    ```

如何才能做到这一点？

**编辑**回复 crubbum：

您说最好的方法是分别绘制每个条件（如`subset_a`, `subset_b`）。如果您有很多条件，例如，您想将散点分成 4 种类型甚至更多，并以不同的形状/颜色绘制每个点，该怎么办。您如何优雅地应用条件 a、b、c 等，并确保在最后一步绘制“其余”（不在任何这些条件下的事物）？

同样，在您的示例中，您`col1,col2`根据不同的方式进行绘图`col3`，如果有 NA 值破坏了 之间的关联`col1,col2,col3`怎么办？例如，如果您想`col2`根据它们的值绘制所有值`col3`，但某些行在`col1`or中具有 NA 值`col3`，则强制您首先使用`dropna`。所以你会这样做：

```
mydata = df.dropna(how="any", subset=["col1", "col2", "col3") 
```

然后你可以像你展示的那样使用 - 绘制使用 的值`mydata`之间的散点图。但是会丢失一些具有值但 NA 的点，并且仍然必须绘制这些点......那么你将如何基本上绘制“其余”数据，即*不在*过滤集中的点？`col1,col2``col3``mydata``col1,col2``col3`*`mydata`*

 ** * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-01-13T18:48:58.397

尝试将 的列`DataFrame`直接传递给 matplotlib，如下例所示，而不是将它们提取为 numpy 数组。

```
df = pd.DataFrame(np.random.randn(10,2), columns=['col1','col2'])
df['col3'] = np.arange(len(df))**2 * 100 + 100

In [5]: df
Out[5]: 
       col1      col2  col3
0 -1.000075 -0.759910   100
1  0.510382  0.972615   200
2  1.872067 -0.731010   500
3  0.131612  1.075142  1000
4  1.497820  0.237024  1700 
```

### 根据另一列改变散点大小

```
plt.scatter(df.col1, df.col2, s=df.col3)
# OR (with pandas 0.13 and up)
df.plot(kind='scatter', x='col1', y='col2', s=df.col3) 
```

![在此处输入图像描述](../Images/20ef6667736badda35130c2b302c40cf.png)

### 根据另一列改变散点颜色

```
colors = np.where(df.col3 > 300, 'r', 'k')
plt.scatter(df.col1, df.col2, s=120, c=colors)
# OR (with pandas 0.13 and up)
df.plot(kind='scatter', x='col1', y='col2', s=120, c=colors) 
```

![在此处输入图像描述](../Images/34c7962c55eeb77a788276a2ac95115e.png)

### 带有图例的散点图

但是，我发现创建带有图例的散点图的最简单方法是`plt.scatter`为每种点类型调用一次。

```
cond = df.col3 > 300
subset_a = df[cond].dropna()
subset_b = df[~cond].dropna()
plt.scatter(subset_a.col1, subset_a.col2, s=120, c='b', label='col3 > 300')
plt.scatter(subset_b.col1, subset_b.col2, s=60, c='r', label='col3 <= 300') 
plt.legend() 
```

![在此处输入图像描述](../Images/b02463c30481cfdfb571e9e7c5d3b10e.png)

### *更新*

据我所知，matplotlib 只是跳过具有 NA x/y 坐标或 NA 样式设置（例如，颜色/大小）的点。要查找由于 NA 而跳过的点，请尝试以下`isnull`方法：`df[df.col3.isnull()]`

要将点列表拆分为多种类型，请查看[numpy`select`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.select.html)，它是一个向量化的 if-then-else 实现，并接受可选的默认值。例如：

```
df['subset'] = np.select([df.col3 < 150, df.col3 < 400, df.col3 < 600],
                         [0, 1, 2], -1)
for color, label in zip('bgrm', [0, 1, 2, -1]):
    subset = df[df.subset == label]
    plt.scatter(subset.col1, subset.col2, s=120, c=color, label=str(label))
plt.legend() 
```

![在此处输入图像描述](../Images/a1a1c02eb04987d1b011e038e12c0873.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-10-15T10:28:43.657

Garrett 的出色答案几乎没有什么可补充的，但 pandas 也有一个[`scatter`方法](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.plot.scatter.html)。使用它，就像

```
df = pd.DataFrame(np.random.randn(10,2), columns=['col1','col2'])
df['col3'] = np.arange(len(df))**2 * 100 + 100
df.plot.scatter('col1', 'col2', df['col3']) 
```

[![将 col3 中的大小绘制到 col1-col2](../Images/d3afc88f04628564a1237e0ffbf81711.png)](https://i.stack.imgur.com/OUHpS.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-06-23T10:55:37.177

我会建议使用另一种方法，使用`seaborn`更强大的数据绘图工具。您可以`seaborn scatterplot`将第 3 列使用和定义为`hue`和`size`。

**工作代码：**

```
import pandas as pd
import seaborn as sns
import numpy as np

#creating sample data 
sample_data={'col_name_1':np.random.rand(20),
      'col_name_2': np.random.rand(20),'col_name_3': np.arange(20)*100}
df= pd.DataFrame(sample_data)
sns.scatterplot(x="col_name_1", y="col_name_2", data=df, hue="col_name_3",size="col_name_3") 
```

[![在此处输入图像描述](../Images/257d2e67ca96386123af4b21dd9a3d13.png)](https://i.stack.imgur.com/cl1LP.png)*

# html - 如何防止播放前加载html5视频？

> ID：14300141
> 
> 赞同：58
> 
> 时间：2013-01-13T02:38:54.707
> 
> 标签：html, video, html5-video

我在一个页面上有几个 html5 视频，我刚刚意识到，当您访问该页面时，所有视频都开始加载，即使我没有点击任何一个播放。

有没有办法只在单击播放后加载视频，以防止不必要的下载？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-01-13T02:52:28.147

```
<!DOCTYPE html>
<html>
<body>

<video width="320" height="240" controls="controls" preload="none">
  <source src="movie.mp4" type="video/mp4" />
  <source src="movie.ogg" type="video/ogg" />
  Your browser does not support the video tag.
</video>

</body>
</html> 
```

使用预加载“无”

[http://diveintohtml5.info/video.html](http://diveintohtml5.info/video.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-13T02:47:54.813

您应该使用该`preload`属性，并将其值设置为`none`.

[从](http://www.w3.org/wiki/HTML/Elements/video#HTML_Attributes)[规范](http://www.w3.org/wiki/HTML/Elements/video#HTML_Attributes)中引用[`<video>`](http://www.w3.org/wiki/HTML/Elements/video#HTML_Attributes)

> `preload`= " **none** " 或 " **metadata** " 或 " **auto** " 或 "" (*空字符串*) 或 empty
> 表示对 UA 的提示，即是否认为乐观下载视频本身或其元数据是值得的。
> - *“ **none** ”：向 UA 提示用户不需要视频，或者希望尽量减少不必要的流量。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-22T08:37:07.323

只需使用`<video preload="none">`

如果您只想加载视频的元数据，请使用`<video preload="metadata">`

# python - 缺少设置文件的适当 Python 异常类

> ID：14300146
> 
> 赞同：11
> 
> 时间：2013-01-13T02:39:25.340
> 
> 标签：python, error-handling

**如果缺少设置文件，应该引发什么适当的[python 异常？](http://docs.python.org/2/library/exceptions.html)**

例如，在 Django 项目中，允许用户定义本地设置的一种轻量级方法是将以下代码段添加到 settings.py 文件中

```
try:
    from local_settings import *
except ImportError:
    # want to add informative Exception here
    pass 
```

因此，任何本地设置都会覆盖 settings.py 中的默认设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-09T21:49:41.630

丢失文件的通常例外是[*IOError*](https://docs.python.org/3/library/exceptions.html#IOError)。

您可以通过创建子类来自定义措辞：

```
class MissingSettingsFile(IOError):
    'Missing local settings file'
    pass 
```

然后，在您的代码片段中使用该自定义异常：

```
try:
    from local_settings import *
except ImportError:
    raise MissingSettingsFile 
```

# java - 如何确保同一元素不会在数组中出现两次

> ID：14300148
> 
> 赞同：1
> 
> 时间：2013-01-13T02:39:45.183
> 
> 标签：java

我有一组以 .xml 或 .gxml 结尾的文件名。我将每个元素放入另一个数组中。我需要确保不添加两次相同的文件名。

所以真正的问题是如何确保相同的元素不会两次添加到数组中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T02:42:49.040

使用`Set`代替数组进行处理，以确保它不会出现两次

```
Set<String> fileNames = new HashSet<String>();
fileNames.add("1.txt");
fileNames.add("2.txt");
// not necessarily in that order with HashSet
System.out.println(fileNames); //[1.txt,2.txt]
fileNames.add("1.txt");// it will not add this one
System.out.println(fileNames); //[1.txt,2.txt] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T02:46:43.310

每次添加项目时循环遍历数组，然后比较两者。如果它们相同，则不要添加新的。

```
 for (int i = 0; i < array.length; i++)

    if (object = array[i]) {
       //DONT ADD THE OBJECT HERE
    else {
        //add the object
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T03:43:57.143

使用一套是最好的选择。另一种方法是使用 HashMap，文件名作为键，文件对象作为值。

```
HashMap<String,File> fileMap = new HashMap<String,File> ();

if (fileMap.get("fileName")==null)
fileMap.put("fileName",file) 
```

# java - 生成表示数字的组合

> ID：14300149
> 
> 赞同：2
> 
> 时间：2013-01-13T02:39:58.027
> 
> 标签：java, algorithm, recursion

问题：

> 给定无限数量的 25 美分、10 美分、5 美分和 1 美分的硬币，计算表示 n 美分的方式的数量。

我的答案：

```
public static int generateComb(int n){
    if(n < 0){
        return 0;
    }
    if(n == 0){
        return 1;
    }

    int ways = generateComb(n-25) + generateComb(n-10) + generateComb(n-5) + generateComb(n-1);
    return ways;
} 
```

请告诉我我的实现是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:57:59.860

一种解决方法是确保没有递归调用使用的硬币大于最后使用的硬币。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:07:49.450

与您的解决方案相同的方法，但稍短一些，并支持任意面额。

```
private static int generateComb(int amount, Collection<Integer> denominations) {
  if (amount == 0) return 1;
  if (denominations.isEmpty()) return 0;

  List<Integer> denominationsList = new ArrayList<Integer>(denominations);
  Collections.sort(denominationsList, Collections.reverseOrder());

  int currentDenomination = denominationsList.remove(0);
  int ways = 0;
  for (int total = 0; total <= amount; total += currentDenomination) {
    ways += generateComb(amount - total, denominationsList);
  }

  return ways;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T03:32:18.110

谢谢大家..我能够得到它：

```
public static int generateComb(int n, int denom){

    int next_denom = 0;
    switch(denom){
        case 25:
            next_denom = 10;
            break;
        case 10:
            next_denom = 5;
            break;
        case 5:
            next_denom = 1;
            break;
        case 1:
            return 1;
    }

    int ways = 0;
    for(int i = 0 ; i*denom <= n ; i++){
        ways+= generateComb(n-i*denom, next_denom);
    }
    return ways;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-10T07:14:54.423

另一种解决方案 -

```
int[] arr = {5, 3 , 1};
int sum = 10;
countNway(arr, sum, 0);

public int countNway(int[] arr, int sum, int start){

    if(start>arr.length){
        return 0;
    }
    if(sum==0){
        return 1;
    }
    if(sum<0){
        return 0;
    }
    int result =0;
    for(int i= start;i<arr.length;i++){
        for(int j = 1; j<=(sum/arr[i]); j++){
            result += countNway(arr, sum -arr[i]*j, i+1);
        }
    }
    return result;
} 
```

# python-3.x - 为什么这个 datetime 子类在 Python 3 上失败了？

> ID：14300153
> 
> 赞同：5
> 
> 时间：2013-01-13T02:41:36.573
> 
> 标签：python-3.x

我最近惊讶地发现这段代码在 Python 2.7 上运行得很好，但在 Python 3 上会失败。

```
import datetime

class MyTime(datetime.datetime):
    def __new__(cls, year):
        ob = datetime.datetime.__new__(cls, year, 1, 1)
        return ob

class MySpecialTime(MyTime):
    def __init__(self, *args, **kwargs):
        super(MySpecialTime, self).__init__(*args, **kwargs)

MyTime(2013)
MySpecialTime(2013) 
```

在 Python 3.3 上，最后一行因以下错误而崩溃：

```
Traceback (most recent call last):
  File "file.py", line 13, in <module>
    MySpecialTime(2013)
  File "file.py", line 10, in __init__
    super(MySpecialTime, self).__init__(*args, **kwargs)
TypeError: object.__init__() takes no parameters 
```

Python 2 和 3 之间有什么不同导致此代码仅在 3 上失败？提示 - 向`__init__`MyTime 添加和方法可解决此问题。我对纠正错误或编写更好的代码不感兴趣（我已经完成了这两件事）。相反，我想了解为什么会发生这种情况，特别是为什么 Python 3.3 的行为会有所不同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T18:40:33.123

这是五年前做出的一项决定的后果，现在使用 Python 3.3 强制执行，即： [http ://bugs.python.org/issue1683368](http://bugs.python.org/issue1683368)

`__init__`最终被调用的是来自 的那个`object`，并且那个不会接受参数 - 这是一个设计决策，其推理在错误报告中进行了概述。

# macos - 如何防止`fmt` shell脚本在句子结束后添加双空格？

> ID：14300157
> 
> 赞同：0
> 
> 时间：2013-01-13T02:41:55.613
> 
> 标签：macos, shell, option

我`fmt`在 Mac OS X 的几个编辑器中使用 shell 脚本进行换行。我总体上对它感到满意，除了一件事——句尾后有两个空格。（现在很少有人这样做，对吧？这似乎很老套，至少对我来说是这样，浪费了八十列的宝贵空间。）

我知道( [documentation](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/fmt.1.html)`-d chars` ) 有一个选项，它指定句子结尾的哨兵，所以目前我通过 欺骗脚本，注意到很少进入范围。它有效，但我想有一些更好的解决方案而不是这个棘手的解决方案？是否可以设置为真正的空列表？`fmt``-d @``@``chars``-d`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:49:18.707

`-d ''` works for me:

```
fmt -d '' <<< $'Do not.\nDouble-space.' 
```

# ruby-on-rails - Heroku 调度程序“不知道如何构建任务‘update_lines’”

> ID：14300158
> 
> 赞同：1
> 
> 时间：2013-01-13T02:42:34.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, rake

我有一个在 Heroku 上运行的应用程序。我想使用调度程序插件。我已按照[https://devcenter.heroku.com/articles/scheduler](https://devcenter.heroku.com/articles/scheduler)上的说明进行操作，但无济于事。

我在 db/lib/scheduler.rake 中有以下内容

```
task :update_lines => :environment do
  puts "Updating lines..."
  Line.get_lines
  puts "done."
end 
```

我在 Line 中有一个名为 get_lines 的类方法。

当我做一个错误`heroku run rake update_lines`

是“不知道如何构建任务'update_lines'”

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:58:02.570

该文件应位于`lib/tasks/scheduler.rake`链接文章中所述的位置：

> 对于 Rails，约定是设置 rake 任务。要在 Rails 中创建计划任务，请将以下代码复制到 lib/tasks/scheduler.rake 并对其进行自定义以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T02:59:36.923

需要定义任务，`lib/tasks/scheduler.rake`而不是`db/lib/scheduler.rake`为了让 rake 来获取它。

# javascript - jQuery mobile : ui-helper-hidden-accessible

> ID：14300161
> 
> 赞同：4
> 
> 时间：2013-01-13T02:42:55.340
> 
> 标签：javascript, jquery, html, css, jquery-mobile

在我的html代码中：

```
<div data-role="fieldcontain" id="containdiv" class="no-field-separator">
    <label for="field1" class="ui-hidden-accessible">To</label>
    <input type="search" name="field1" id="field1" autocorrect="off" autocapitalize="off" autocomplete="off" placeholder="Field #1?" value="" />
    <input type="hidden" id="field1val" name="field1val"/>
</div> 
```

在DOM中，经过jQUery mobile处理后，插入了以下元素

```
<span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span> 
```

在我的搜索`input`和我的隐藏之间`input`。

当用户输入我的搜索输入时，我会做一些事情，并用它来更新隐藏字段的值。

发生这种情况时，我注意到这个跨度（带有“ `ui-helper-hidden-accessible`”类）的内容使用隐藏输入的值进行了更新。

我不确定发生了什么，或者这是由什么触发的。

调查，我发现：http: [//forum.jquery.com/topic/ui-helper-hidden-accessible-change](http://forum.jquery.com/topic/ui-helper-hidden-accessible-change)

该字段的目的实际上是使其“隐藏但仍可访问”，但是，情况似乎并非如此 - 它在浏览器中呈现为可见。

有没有办法禁止 jQuery 在我的表单中创建这个元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-29T09:36:38.493

隐藏焦点类：

```
$( ".selector" ).autocomplete({
focus: function (event, ui) {
                $(".ui-helper-hidden-accessible").hide();
                event.preventDefault();
            }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T06:05:16.323

你可以试试这个。

```
.ui-helper-hidden-accessible { display:none; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T03:04:43.867

不确定您是否可以禁用 jQuery Mobile 正在执行的操作，但如果我了解您的需求，您是否尝试过类似隐藏元素的操作？

```
$(".ui-helper-hidden-accessible").hide(); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-01T15:53:50.700

试试这个 ：

```
$(".ui-helper-hidden-accessible").remove(); 
```

# actionscript-3 - Flex 在视频中以精确时间运行方法

> ID：14300162
> 
> 赞同：1
> 
> 时间：2013-01-13T02:42:57.460
> 
> 标签：actionscript-3, flash, apache-flex, video, flash-builder

我需要尝试在视频中某个剪辑正在播放的确切时间运行一种方法。

到目前为止，我可以这样做：

```
<s:VideoDisplay id="vid" currentTimeChange="checkTime()" x="208" y="49"/> 
```

然后在我的脚本中，我有

```
 function checkTime():void{

                label.text = new String(vid.currentTime);
                if(Math.round(vid.currentTime) == 12){
                    fademe();
                } 
```

以上确实有效，但我需要的确切时间大约是 11.650 秒来运行该方法。如果我取出 Math.round()，它就不起作用。

请帮忙，这可能很简单，但我是 Flex 和 actionscript 的新手。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:07:08.450

改变当前时间的大小。

```
 function checkTime():void{

            label.text = new String(vid.currentTime);
            int currentTime = Math.round(vid.currentTime*100) ;
            if( currentTime >= 1165 && currentTime <= 1170 ){
                fademe();
            } 
```

# java - 如何按索引对整数向量进行排序？

> ID：14300164
> 
> 赞同：0
> 
> 时间：2013-01-13T02:43:08.850
> 
> 标签：java

我想使用 java 可比较或比较器接口对整数向量进行排序。排序完成后，我应该能够像以前一样找到它的索引。

我还想知道可比较接口和比较器接口在何时使用什么方面的区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:47:07.803

比较器是一个接口，可让您比较两个对象。Comparable 可让您将当前对象与另一个对象进行比较。在您的情况下，您需要一个比较器，因为您无法更改 Integer 类以使其具有可比较性。您可以将其子类化，但这会令人困惑。

我不确定你以前所说的索引是什么意思。听起来您想要在旧值和新值之间进行一些映射。为什么不直接遍历# 的原始列表来查找旧索引？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:54:58.863

听起来您应该使用 2 个向量/列表或 2 个地图。

您无法仅用 . 代表当前位置和旧位置`List<Integer>`。

# jquery - Jquery 不能在潮汐dk 上工作

> ID：14300165
> 
> 赞同：0
> 
> 时间：2013-01-13T02:43:09.827
> 
> 标签：jquery, tidesdk

我开始学习潮汐dk，我想尝试包含一些用jquery编写的js函数，但接缝不起作用。

```
<html>
<head>

    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
        $(window).ready(function(){
            alert("ok");
            $('.p').css({"color":"red"});
        });     
    </script>
</head>
<body>

        <div class=".p" style="color:#000;background: #28A8D9;width:35%;height:350px;border:1px solid #000;">
            Just to try
        </div>
</body> 
```

有什么问题吗？我在文件夹资源中添加了 jquery。

ps潮汐dk v1.3.1beta for windows

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T06:18:58.273

DIV 上的类应该是“p”，而不是“.p”

```
<div class="p" ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T02:44:51.280

尝试从 .css() 中删除花括号

喜欢

```
$('.p').css("color", "red"); 
```

# c - 循环生成唯一随机数组的数组

> ID：14300166
> 
> 赞同：1
> 
> 时间：2013-01-13T02:43:19.407
> 
> 标签：c, random, do-loops

我编写了一些代码来生成结构数组。id 变量旨在是唯一的并随机生成。但是，似乎正在发生的事情是，如果生成函数（生成并填充结构数组）在数组中遇到匹配的数字，则标志变量设置为 0，并且它退出 do 循环而不创建新的随机数重新检查匹配。然后当循环退出时，代码继续并将匹配的随机数分配给数组中的空白点。作为警告，我意识到只取所有 10 个可能的整数，移动它们并填充数组会更简单，但我试图使用一个小样本来掌握 rand() 的窍门，这样我就可以看到它是什么在调试器中做。我怀疑我只是盯着这个太久了，尝试了太多的东西，但任何建议将不胜感激。谢谢。

编辑：只是为了澄清我的问题特别涉及 do 循环以及我需要做些什么来确保找到匹配项时，程序会生成一个新的随机数并再次开始搜索匹配项。这应该对数组中的每个位置重复，直到每个 id 元素都是唯一的。目前，当我运行程序时，我仍然得到重复的数字。

```
#include <stdio.h>
#include<stdlib.h>
#include<math.h>
#include<conio.h>
#include<assert.h>

struct student{
    int id;
    int score;
};

struct student* allocate(){
     /*Allocate memory for ten students*/
    struct student* s = malloc(10 * sizeof(struct student));
    assert (s != 0);

     /*return the pointer*/
     return s;
}

void generate(struct student* students){
     /*Generate random ID and scores for ten students, ID being between 1 and 10, scores between 0 and 100*/
   int i, j;
   int flag;
   int randNum = 0;
   for (i = 0; i < 10; i++) {
        flag = 1;
         do {
            randNum = (rand()%10 + 1);  //generate random ID for each student

            for (j = 0; j < 10 && flag == 1; j++) {  //search array for matching numbers
                if (students[j].id == randNum) {
                    flag = 0;
                }
                if (j == 9 && flag == 1) {
                    flag = 0;
                }
            }
         }
        while (flag == 1);  //set condition

        students[i].id = randNum;
        students[i].score = (rand()%(100 - 0 + 1) + 0);  //generate random score for each student
    }
}

void output(struct student* students){
     /*Output information about the ten students in the format:
              ID1 Score1
              ID2 score2
              ID3 score3
              ...
              ID10 score10*/
        int i;
        printf("Student scores: \n\n");
        for (i = 0; i < 10; i++) {
            printf("\t%d, %d\n", students[i].id, students[i].score);
        }
}

void summary(struct student* students){
     /*Compute and print the minimum, maximum and average scores of the ten students*/
    int sumS, minS, maxS, avgS, i, j, tempID, tempS;
    printf("Sorted students by scores: \n");
    for (i = 0; i < 10; i++) {
        sumS += students[i].score;
        for (j = 0; j <10; j++) {
            if (students[i].score < students[j].score) {
                tempS = students[j].score;
                tempID = students[j].id;
                students[j].score = students[i].score;
                students[j].id = students[i].id;
                students[i].score = tempS;
                students[i].id = tempID;
            }
        }
    }
    for (i = 0; i < 10; i++) {
        printf("\t%d, %d\n", students[i].id, students[i].score);
    }
    printf("Minimum score: %d\n", minS = students[0].score);
    printf("Maximum score: %d\n", maxS = students[9].score);
    printf("Average score: %d", avgS = sumS/10);
}

void deallocate(struct student* stud){
     /*Deallocate memory from stud*/
     free(stud);
}

int main(){
    struct student* stud = NULL;

    /*call allocate*/
    stud = allocate();

    /*call generate*/
    generate(stud);

    /*call output*/
    output(stud);

    /*call summary*/
    summary(stud);

    /*call deallocate*/
    deallocate(stud);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:47:15.167

`0`如果已经选择了数字，则将标志设置为，因此您应该 test ，并在循环开始时`while(flag == 0)`将标志重新设置为：`1`

```
do {
    flag = 1;
    randNum = (rand()%10 + 1);  //generate random ID for each student

    for (j = 0; j < i && flag == 1; j++) {  //search array for matching numbers
        if (students[j].id == randNum) {
            flag = 0;
        }
    }
}
while (flag == 0);  //set condition 
```

现在，`flag == 0`意思是“已经看过，再试一次”，`flag == 1`意思是“这是一个新数字，继续把它写入数组”。

Also, you only have the array slots for indices `< i` filled, so the comparison loop should not go to `9`, but only to `i-1`.

# javascript - 我可以使用哪些 jQuery/Javascript 速记或实践来使此代码更简约？

> ID：14300170
> 
> 赞同：0
> 
> 时间：2013-01-13T02:44:18.083
> 
> 标签：javascript, jquery, css, javascript-events

我创建了一个小脚本来处理低分辨率设备的响应式设计，并显示切换菜单而不是全宽菜单。以下脚本对我来说工作正常，但这对我来说看起来有点乱。我需要哪些简写或实践来使此代码更加简约和高效？

resetMenu() 函数正在处理以保留特定分辨率的 CSS，同时浏览器从正常模式调整大小到切换模式，这样做是一个好习惯吗？

```
$(document).ready(function($) {
function resetMenu() {
    $('#top-menu li, #search-form, .social').css({"display":"block"});
    $('#top-menu li').css({"display":"inline-block"});
};
$(window).resize(function () { 
if($(window).width() > 640){
    $(resetMenu());
}
else{
    $('#top-menu li, #search-form, .social').css({"display":"none"}).fadeOut(1000);
    $('#top-menu li:nth-child(2)').css({"display":"none"});
}
});

$(".togglebutton").toggle(
function () {
    if($(window).height() < 360){
        $('#top-menu li').css({"display":"inline-block"}).fadeIn(500);
        $('#top-menu li:nth-child(2)').css({"display":"none"});
        $('#search-form, .social').css({"display":"block"}).fadeIn(500);
        $('#top-menu li').css({"border":"none"});
    }
    else{
        $('#top-menu li, #search-form, .social').css({"display":"block"}).fadeIn(1000);
        $('#top-menu li:nth-child(2)').css({"display":"none"});
    }
},
function () {
    $('#top-menu li, #search-form, .social').css({"display":"none"}).fadeOut(1000);
    $('#top-menu li:nth-child(2)').css({"display":"none"});
}

)}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:14:41.660

我不认为您的代码真的那么混乱。如果您愿意，您可以在别处定义和命名这些匿名函数并将它们传递给事件处理程序。您可以定义一个负责跟踪窗口属性的对象，然后您可以将响应函数移动到该对象中。然后，WindowTracker 或您所称的任何名称都可以实现构建器和/或观察者模式，这样如果您最终向事件处理程序添加更多内容，您可以以允许关注点分离和更模块化代码的方式进行操作.

我不知道这是否会更小，但它可能是可读且合乎逻辑的。如果您正在寻找效率，您可能应该存储 jquery 搜索的结果，至少在内部用于函数调用。 [如何保存 jquery 选择器以供以后使用](https://stackoverflow.com/questions/5038060/how-to-save-jquery-selector-for-later-use)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:37:46.497

我通常更喜欢在不同模块上有声明和执行部分的代码，所以一部分是：

```
var one = $('#top-menu li')
var two = $('#top-menu li, #search-form, .social');
var three = $('#top-menu li:nth-child(2)');
var four = $('#search-form, .social')

function toggleIn() {
    if($(window).height() < 360){
        one.css({"display":"inline-block"}).fadeIn(500);
        three.css({"display":"none"});
        four.css({"display":"block"}).fadeIn(500);
        one.css({"border":"none"});
    }
    else{
        two.css({"display":"block"}).fadeIn(1000);
        three.css({"display":"none"});
    }
},

function toggleOut() {
    two.css({"display":"none"}).fadeOut(1000);
    three.css({"display":"none"});
}

function resetMenu() {
    one.css({"display":"block"});
    two.css({"display":"inline-block"});
}; 
```

而另一个只是：

```
$(window).resize(function () { 
    if($(window).width() > 640){
        $(resetMenu());
    }
    else{
        two.css({"display":"none"}).fadeOut(1000);
        three.css({"display":"none"});
    }
});

 $(".togglebutton").toggle(toggleIn, toggleOut); 
```

所以，我怎么看，第二部分将是你的“简约”代码。并且代码的每个功能部分都可以单独评估，这对于调试目的很有用。

# hadoop - Hadoop FileInputFormat isSplitable false

> ID：14300180
> 
> 赞同：4
> 
> 时间：2013-01-13T02:47:14.777
> 
> 标签：hadoop, hadoop-partitioning

我有一个简短的问题，我想我知道 FileInputFormat isSplitable 方法的答案。如果我重写此方法以返回 false，自然我将有一个映射器处理一个文件（我只有一个文件）。如果这个文件分布在 HDFS 上，所有这些都将被拉到我的单个映射器中。当我使用映射器处理它并创建键/值对以发送到减速器时，如果我创建大量它们，它们是否会分布在我的集群中以利用数据局部性或者是否存在某种隐式结果是，如果我将它设为 isSplitable false 就不会再发生了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T12:35:29.443

当`isSplitable`返回 false 时，只有一个映射器处理整个文件。映射器可以发出任意数量的 KV 对。

来到reducer，没有数据局部性的概念，使用下一个可用的空闲Reduce槽。仅供参考，在遗留MR架构的情况下，每个节点上都有Map和Reduce的槽，但在[YARN](http://hadoop.apache.org/docs/r0.23.0/hadoop-yarn/hadoop-yarn-site/YARN.html)的情况下有没有插槽的概念。

根据插槽的可用性或在 YARN 的情况下 ResourceManager 返回的内容，reducer 可以分布在多个节点上。

# ruby - 尝试使用 gem 调用方法时出现符号转换错误？

> ID：14300185
> 
> 赞同：0
> 
> 时间：2013-01-13T02:47:46.430
> 
> 标签：ruby, chartbeat

我正在尝试使用他们的 API 为我的网站获取一些 chartbeat.com 统计信息。使用 Python chartbeat egg 可以正常工作，但使用 Ruby 我很难通过第一阶段。最终，我的目标是提取 chartbeat quickstats 数组（当前用户、每秒速率等）并将其发送到graphite，并守护整个事情。

我对编程方法、理论和实践有很好的理解，我对 Ruby 语法非常熟悉，并尝试阅读符号、方法（私有/公共），但似乎无法让 Ruby 与我的脑。我认为这很可能是我的问题所在。

据我了解，我不必做`puts`类似的事情。调用`quickstats`on 方法`c`应该打印通过 GEM 从 chartbeat API 返回的任何内容。

chartbeat gem 来自[https://github.com/ashaw/chartbeat](https://github.com/ashaw/chartbeat)。我的红宝石是`Ruby 1.9.3p362 (2012-12-25 revision 38607) [x86_64-darwin12]`.

当我运行我的脚本时，我得到了这个：

```
/opt/local/lib/ruby1.9/gems/1.9.1/gems/chartbeat-0.2.2/lib/chartbeat.rb:31:in `[]': can't convert Symbol into Integer (TypeError)
from /opt/local/lib/ruby1.9/gems/1.9.1/gems/chartbeat-0.2.2/lib/chartbeat.rb:31:in `block in method_missing'
from /opt/local/lib/ruby1.9/gems/1.9.1/gems/chartbeat-0.2.2/lib/chartbeat.rb:30:in `each'
from /opt/local/lib/ruby1.9/gems/1.9.1/gems/chartbeat-0.2.2/lib/chartbeat.rb:30:in `method_missing'
from /Users/jed/Documents/workspace/chartbeat2graphite/c2b.rb:8:in `<main>' 
```

代码是：

```
require 'chartbeat'
require 'graphite'
require 'daemonize'

c = Chartbeat.new(:apikey => "sadfklj09238402938" , :host => "lipsum.com")

c.quickstats :path => '/' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:22:38.320

我不确定，但您实际使用的 gem 可能无法正常工作。宝石似乎已经两年没有更新了。

查看 fork，我发现[qhduong/chartbeat](https://github.com/qhduong/chartbeat)更新它以使用新的 URI，或者[DramaFever/chartbeat](https://github.com/DramaFever/chartbeat)也这样做但有区别。我不知道它们是否会影响它的运行方式。

# ios - 在游戏中实现多个角色服装的方法

> ID：14300191
> 
> 赞同：2
> 
> 时间：2013-01-13T02:48:20.033
> 
> 标签：ios, animation, unity3d, modeling

在游戏中拥有多个角色服装/服装（例如，可解锁、可购买等）有哪些方法？

主要问题是如何跟踪动画而不需要为每个服装重新设置角色动画。将所有服装包含在一个大文件中并链接到一个骨架是否合适？然后根据需要在游戏中启用/禁用每个装备？

有谁知道流行的游戏是如何做到这一点的——例如：古墓丽影如何处理劳拉的所有附加服装？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T20:04:00.303

如果您只有一个要换衣服的角色，并且您有 Unity Pro，您应该查看[Unity Character Customization 示例](http://unity3d.com/support/old-resources/example-projects/charactercustomization)。从演示页面：

> 该项目有两个目的：
> 
> 拥有一个插入式解决方案，您可以非常轻松地在游戏中拥有可自定义的角色。拥有一个广泛使用 AssetBundles 的示例项目，因此您对如何有效使用它们有一些参考。该项目包括用于生成示例资产的所有 fbx 文件。请随意将代码和图稿用于您自己的 Unity 作品。
> 
> 请注意，此示例项目需要 Unity Pro，因为它使用了 AssetBundles，这是 Pro 独有的功能。

有一些关于更改角色的纹理/网格渲染器以[在此处](http://forum.unity3d.com/threads/3742-Good-way-to-change-character-s-clothes...)和[此处](http://answers.unity3d.com/questions/256350/polycount-for-pc-model.html)更改服装的非常好的链接。

现在，如果您想添加可更改的项目或类似的东西，我建议您[通过](http://forum.unity3d.com/threads/16485-quot-stitch-multiple-body-parts-into-one-character-quot?p=126864&viewfull=1#post126864)`masterprompt`. 它在创建可切换对象和创建骨骼角色方面非常详细。

另一个想法：

> 创建一个骨架并将身体和衣服作为该骨架的父级。许多版本的身体适合衣服 - 所以只是前臂，全臂等 - 这可以解决在动画骨架时可能发生的交叉问题，特别是在游戏时间没有应用所有骨骼权重的设备上。加载所有当前可用的服装与只有一个骨架副本的游戏对象相同。打开和关闭装备所需的物品。为此，要配置：
> 
> 服装套装被创建为适用于头部/上身/下身/脚的 .asset 文件，它们组合在一起 - 这太多了，所以也许您只想创建一个包含组件名称的文本文件应该为每套服装开/关。您可以将其放入您的项目中，将其作为 TextAsset 加载，并通读启用那里列出的子网格并禁用其他的每一行。

# php - 使用 cookie 的 PHP/Javascript 循环 - 重定向

> ID：14300198
> 
> 赞同：0
> 
> 时间：2013-01-13T02:49:50.593
> 
> 标签：php, javascript, cookies

所以我对整个 Javascript / PHP 有点陌生。使用这两种语言进行编码确实非常有趣。现在，如果用户访问 chrisrjones.com，他们将被重定向到 chrisrjones.com/splash.php。有两个单选按钮询问用户是否喜欢启动页面。根据用户的选择，cookie 值设置为 true 或 false。一旦用户单击“进入”按钮，还会创建另一个名为“访问”的 cookie。

如果您的用户选择“是”，则启动页面是愚蠢的，他们会进入站点，但是如果在浏览器中关闭窗口/选项卡，则在重新加载站点时会显示启动页面。

如果用户选择“NO”启动页面是愚蠢的，他们根本无法进入该站点。

有没有办法让用户在点击任一按钮后进入网站？（一定有办法）

还有一种方法可以记住用户是否选择“是”而不是重定向它们。

**index.php**文件如下所示

```
<?php
$cookie_splash = $_COOKIE['nosplash'];
$cookie_visit = $_COOKIE['visit'];

if ($cookie_splash == "false" || $cookie_splash == "" && $cookie_visit == "") {
    echo "<script type = text/javascript>";
    echo "window.location = 'http://chrisrjones.com/splash.php'";
    echo "</script>";
}

if ($cookie_splash == "false" && $cookie_visit == "true") {
    echo "<script type = text/javascript>";
    echo "window.location = 'http://chrisrjones.com/index.php'";
    echo "</script>";

}
?>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>chrisRjones.com</title>
<!-- default - stylesheets at the bottom override styles at the top -->
<link rel="stylesheet" type="text/css" media="screen" href="stylesheet.css" />

<!-- favicon -->
<link href="favicon.ico" rel="icon" type="image/x-icon" />

</head>

<body>
<!-- cut for readablitiy -->
</body>
</html> 
```

**飞溅.php**

```
<!DOCTYPE html>

<html lang="en">

<head>
<title>chrisRjones.com - Splash</title>

<script type="text/javascript">

function valForm() {

    if(!document.getElementById('splash_false').checked && !document.getElementById('splash_true').checked  ) {
        alert('You either like splash pages or you don\'t choose one ...please');
        return false;
    }
}

</script>

<!-- Javascript radiobutton form validation END -->

</head>

<body>
<img src="<?php echo $path . $img ?>" alt="" width="640" height="auto"  />
<h1>Refresh the page to enjoy more pictures.</h1><br />

<p>
<form name="tosplashornottosplash" action="splash-process.php" method="post" onSubmit="return valForm()">
Splash pages are stupid.

<input type="radio" name="splash" id="splash_false" value="false" /> No
<input type="radio" name="splash" id="splash_true" value="true" /> Yes

<input type="submit" name="splashSubmit" onClick="return valForm(tosplashornottosplash)" value="Enter" />
</form>
</p>

</body>
</html> 
```

**飞溅过程.php**

```
<?php 

setcookie("visit", "true"); // delete cookie when browser / tab / session is clossed

$splashvar = $_POST["splash"];

if ( $splashvar == "false" ) {
    // create cookie - nosplash 1
    setcookie("nosplash", "false", time()+3600); // expires in one hour
}
    else {
        // create cookie - nosplash 0
        setcookie("nosplash", "true", time()+3600); // expires in one hour
    }

echo "<script type = text/javascript>";
echo "window.location = 'http://chrisrjones.com/index.php'";
echo "</script>";

?>

<!DOCTYPE html>

<html lang="en">

<head>
<title>chrisRjones.com - splash-process</title>

</head>

<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:24:37.197

如果在 Index.php 中，您可以尝试删除第二个。它实际上并没有做任何事情，因为他们，用户，已经在那里了。

# java - 如何使用 google API 从 Youtube 请求 Creative Common 内容

> ID：14300201
> 
> 赞同：1
> 
> 时间：2013-01-13T02:50:06.537
> 
> 标签：java, api, youtube

我正在尝试使用 Youtube API 来获取有创意的常见视频。

我尝试使用 YouTubeQuery 类中的 setField 方法，但我无法提供准确的字符串参数来按广告素材进行过滤。

编辑：我正在使用 Youtube API 的 Java 实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:39:00.850

有一个`license`参数采用`cc`或`youtube`作为值，其中`cc`表示知识共享：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#licensesp](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#licensesp)

我刚刚尝试直接在 URL 中指定参数并且它有效：

(cc) - [https://gdata.youtube.com/feeds/api/videos?q=football+-soccer%20&orderby=published&start-index=11&max-results=10&v=2&license=cc](https://gdata.youtube.com/feeds/api/videos?q=football+-soccer%20&orderby=published&start-index=11&max-results=10&v=2&license=cc)

(youtube) - [https://gdata.youtube.com/feeds/api/videos?q=football+-soccer%20&orderby=published&start-index=11&max-results=10&v=2&license=youtube](https://gdata.youtube.com/feeds/api/videos?q=football+-soccer%20&orderby=published&start-index=11&max-results=10&v=2&license=youtube)

如果您使用的是 Java 等客户端库，请查看文档的这一部分： [https ://developers.google.com/youtube/2.0/developers_guide_java#Searching_for_Videos](https://developers.google.com/youtube/2.0/developers_guide_java#Searching_for_Videos)

```
YouTubeQuery query = new YouTubeQuery(new URL("http://gdata.youtube.com/feeds/api/videos"));
query.setFullTextQuery("puppy");    
query.setStringCustomParameter("license", "cc");

VideoFeed videoFeed = service.query(query, VideoFeed.class); 
```

# java - 如何使用 Java 在 XML 中考虑标签名称及其属性来获取价值

> ID：14300206
> 
> 赞同：0
> 
> 时间：2013-01-13T02:50:52.480
> 
> 标签：java, xml, lucene

对不起，我想问一下如何通过考虑标签名称及其属性来获取标签值。我使用 XML 在 lucene 上建立索引

这是 XML

```
 <?xml version="1.0" encoding="utf-8"?>
<Root xmlns:wb="http://www.worldbank.org">
  <data>
    <record>
      <field name="Country or Area" key="ARB">Arab World</field>
      <field name="Item" key="AG.AGR.TRAC.NO">Agricultural machinery, tractors</field>
      <field name="Year">1961</field>
      <field name="Value">73480</field>
    </record>
  </data>
</Root> 
```

在早期项目中，我只使用如下来源获取标签值：

```
private String getTagValue(String tag, Element e) {
        NodeList nlList = e.getElementsByTagName(tag).item(0).getChildNodes();
        Node nValue = (Node) nlList.item(0);
        return nValue.getNodeValue();
    } 
```

但是现在，我想考虑它的属性，所以我必须定义什么标签和属性才能获得正确的值。感谢你的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:14:26.447

为此目的使用 xpath 查询。首先创建一个类似这样的查询（例如获取具有一定值的字段节点）：

```
myQuery = xpath.compile("//field[@value=\"1234\"]"); 
```

然后通过在 dom doc 上运行查询来填充节点集：

```
Object nodeSet = myQuery.evaluate(doc, XPathConstants.NODESET); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T05:04:40.303

将 getTagValue 更改为

```
private static String getTagValue(NodeList list, String name) {
    for (int i = 0; i < list.getLength(); i++) {
        Element e = (Element) list.item(i);
        if (e.getAttribute("name").equals(name)) {
            return e.getTextContent();
        }
    }
    return null;
}

public static void main(String[] args) throws Exception {
    Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder()
            .parse(new File("1.xml"));
    NodeList fields = doc.getElementsByTagName("field");
    String country = getTagValue(fields, "Country or Area");
    String year = getTagValue(fields, "Year");
} 
```

# javascript - 带有节点 appendChild() html 的动画

> ID：14300210
> 
> 赞同：3
> 
> 时间：2013-01-13T02:51:28.047
> 
> 标签：javascript, html, dom, web

我对 Web 开发非常陌生，我正在尝试创建一个网页，该网页将在单击按钮时向下延伸。我找到[了这个链接](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_node_appendchild)，其中包含以下代码：

**HTML：**

```
<ul id="myList"><li>Coffee</li><li>Tea</li></ul>

<p id="demo">Click the button to append an item to the list</p>

<button onclick="myFunction()">Try it</button> 
```

**JavaScript：**

```
function myFunction()
{
    var node=document.createElement("LI");
    var textnode=document.createTextNode("Water");
    node.appendChild(textnode);
    document.getElementById("myList").appendChild(node);
} 
```

这将添加信息。我想这样做，以便它动画化，而不仅仅是出现。我该怎么办？

任何帮助或教程表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:59:41.530

我建议您使用[bootstrap collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:01:45.667

您必须阅读一些关于 jQuery 的内容，但这里有一个您想要的内容的描述：[jQuery using append with effects](https://stackoverflow.com/questions/1520178/jquery-using-append-with-effects)

原则是首先创建一个 jQuery 对象，它代表您要附加的元素，确保它具有确保它不会立即可见的样式设置（例如`display: none`）。

然后将元素附加到页面中（此时由于样式设置，浏览器不会呈现它），最后使用 jQuery 方法将其动画化到视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T03:02:33.483

最常用的方法是通过 javascript 来控制 CSS 样式，如下所示（这些只是示例）：

```
// controlling the opacity of an element
document.getElementById(yourElementId).style.opacity = 0.5;
// controlling the position(top) of an element
document.getElementById(yourElementId).style.top = 10; 
```

您想为您想要做的任何动画创建一组 javascript，并将该代码放入单击时调用的函数中。淡入效果的示例可能是：

```
function myFunction()
{
var node=document.createElement("LI");
var textnode=document.createTextNode("Water");

// fade-in effect. The opacity starts from zero, and increases through 10steps.
node.style.opacity = 0;
for (var i=1;i<=10;i++) {
    node.style.opacity = i/10;
}
node.style.opacity = 1;
// end of fade-in effect

node.appendChild(textnode);
document.getElementById("myList").appendChild(node);
} 
```

（还没有彻底测试过，所以可能会不稳定）

我的示例是淡入，但对于任何类型的位置更改或颜色更改或其他任何类型的更改都一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-10T14:26:41.117

您可以使用**Element.animate()**。有关更多信息，请阅读[此](https://developer.mozilla.org/en-US/docs/Web/API/Element/animate)。

例子：

```
 const div = document.createElement('div');
    div.innerText = 'text'; 
    otherElenet.appendChild(div);
    div.animate([
        // keyframes
        { opacity: '0' },
        { opacity: '1' }
    ], {
        // timing options
        duration: 1000,
    }); 
```

> 注意，IE不支持

# scala - 配置播放！2.0 将html文件从assets文件夹复制到public文件夹？

> ID：14300214
> 
> 赞同：1
> 
> 时间：2013-01-13T02:52:46.583
> 
> 标签：scala, playframework-2.0

我目前正在使用 Play 构建网站！2.0 (2.1-RC2) 框架和 Scala。我有一堆“静态” html 文件，它们定义了 AngularJS 使用的视图（我更喜欢使用 Jade，但我似乎无法找到让 Jade 与 Play/Scala 预编译的方法。这使得感觉，因为 Jade 模板通常不是静态的）。

**作为一名开发人员，对我来说最有意义的一点是，我的项目结构**是将这些 html 文件与我的咖啡放在同一个位置，并减少文件 (/assets/*)。我知道 Play 希望我将它们放在我的公共文件夹中，但是我很难做到这一点。对我来说，公共文件夹应该用于库和生成的文件。

我想做的是以某种方式让 Play 将 /assets/views 中的 html 文件复制到 /public/views 作为构建的一部分。我怎么能做到这一点？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:28:16.767

我能够弄清楚如何在 Scalatra 测试项目中执行此操作，因此我只需要修改以下代码以使其适应 Play 的文件夹结构。但是，它确实有效。它的作用是定义一个新的 sbt “插件”，并在编译时将 /src/main/html 中的所有文件复制到 /resource_managed/main/views。

希望有人会发现这很有用！

```
import sbt._
import Keys._
import java.io.File
import org.apache.commons.io.FileUtils._

object CopyViews extends sbt.Plugin {
  import CopyViewsKeys._

  object CopyViewsKeys {
    val copy = TaskKey[Unit]("copy-views", "Copy views into resourceManaged.")
  }

  private def copyViewsTask = (streams, sourceDirectory in copy, resourceManaged in copy) map {
    (out, source, destination) =>
      out.log.info("Copying Views to " + destination.getAbsolutePath())
      copyDirectory(source, destination)
  }

  def copyViewsSettingsIn(c: Configuration): Seq[Setting[_]] =
    inConfig(c)(Seq(
      sourceDirectory in copy <<= (sourceDirectory in c) { _ / "html" },
      resourceManaged in copy <<= (resourceManaged in c) { _ / "views" },
      copy <<= copyViewsTask
    )) ++ Seq(
      compile in c <<= (compile in c).dependsOn(copy in c)
    )

  def copyViewsSettings: Seq[Setting[_]] = 
    copyViewsSettingsIn(Compile)
}

object ModFallBuild extends Build {
  import CopyViews._ // Import in our Build so we can use in our build.sbt file.

  lazy val modfall = Project("modfall", file("."))
} 
```

现在，在我们的 build.sbt 文件中，我们可以添加

```
seq(copyViewsSettings:_*) 
```

现在在编译时复制视图:)

我敢肯定，可能有一种更简单的方法可以做到这一点，但这对我有用，并且能够让我了解构建 sbt 插件！:P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:32:41.737

如果将静态 html 文件放在 public/htmls 下，则可以通过以下方式获取模板中单个文件的路径：

`@routes.Assets.at("htmls/yourfile.html")`

# javascript - 获取城市名称谷歌地图路线经过

> ID：14300217
> 
> 赞同：2
> 
> 时间：2013-01-13T02:53:26.130
> 
> 标签：javascript

我正在使用 Google 地图 API v3 开发网页。有没有办法收集从 A 点到 B 点的路线所经过的地点或城市名称？我在页面中使用 javascript。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T03:03:20.703

查看[路线 API 文档](https://developers.google.com/maps/documentation/javascript/reference#DirectionsResult)。看起来您提供了一个`DirectionsResult`包含 s 数组的对象`DirectionsRoute`。每个都`DirectionsRoute`包含一个`DirectionsLeg`s 数组，而这些数组又被进一步分解为一组`DirectionsStep`s。从每个步骤中，您可以拉出`start_location`and/or `end_location`，每个都表示为 Lat/Lng。从那里，我将让这个答案接管如何将 Lat/Lng 转换为城市（反向地理编码）：

[谷歌地图：如何获得国家、州/省/地区、城市给定的纬度/经度值？](https://stackoverflow.com/questions/4013606/google-maps-how-to-get-country-state-province-region-city-given-a-lat-long-va)

简而言之，谷歌地图提供的方向被分解为许多子部分，在大多数粒度级别，您可以提取纬度/经度，并让谷歌的地理编码 API 处理将其转换为城市名称。

# c# - C#搜索方法中的二叉搜索树

> ID：14300223
> 
> 赞同：0
> 
> 时间：2013-01-13T02:54:25.417
> 
> 标签：c#, data-structures, binary-search-tree

```
public bool Searchtree(Node root, int target)
    {
        if (root == null) return false;

        else if (target < root.data)
            Searchtree(root.left, target);

        else if (target > root.data)
            Searchtree(root.right, target);

        if (target == root.data)
        {
            //Console.WriteLine("Found: "+root.data);
            return true;
        }

        else
            return false;
    } 
```

这是一种在二叉搜索树中搜索整数的方法

方法调用将是：`binary.Searchtree(binary.root, 2);`

但它总是返回 False，即使它打印了 Writeline。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T03:03:48.777

返回对 Searchtree 的调用结果：

```
public bool Searchtree(Node root, int target)
{
    if (root == null)
        return false;
    else if (target < root.data)
        return Searchtree(root.left, target);
    else if (target > root.data)
        return Searchtree(root.right, target);

    return true;
} 
```

# css - LESS/CSS 功能区在调整大小时在 chrome 中中断

> ID：14300225
> 
> 赞同：1
> 
> 时间：2013-01-13T02:54:45.193
> 
> 标签：css, google-chrome, zooming, less, ribbon

我有一个在 Firefox 中看起来不错的 css/less 功能区，但在 Chrome 中会中断（调整大小时）。

以 100% 缩放查看时看起来不错，但移入或移出会使元素不对齐。我把它放在下面的一个修补程序中，并减少了颜色的变量，使其更容易玩弄。

注意：在 Tinkerbin 上使用此代码时，您必须将 CSS 语法设置为 LESS 并按 RUN，否则功能区根本不会加载 :)

[http://tinkerbin.com/9rMTZgdg](http://tinkerbin.com/9rMTZgdg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:25:25.550

这似乎是一个未解决的错误（截至 2013 年 1 月 13 日）。[这是另一个堆栈溢出问题](https://stackoverflow.com/questions/11930483/why-doesnt-chrome-scale-up-the-width-height-of-a-div-on-page-zoom)，它缩小`em`了边界大小的问题。该人最终[使用 webkit 提交了错误报告](https://bugs.webkit.org/show_bug.cgi?id=94013)。也许您应该将您的经验作为对该错误报告的确认。

似乎确实证实了这是一个`em`单位缩放问题`webkit`（至少是 Chrome，也可能是 Safari）。当我将您的代码完全切换为`px`测量值（根据您的 预先计算尺寸`font-size: 16px !important`）时，我会得到一个功能正常的功能区，[正如您在此处看到的那样](http://tinkerbin.com/WsDSXr1t)，它在 Chrome 中的缩放比例非常漂亮。

# java - 我的游戏的理想帧率是多少？

> ID：14300227
> 
> 赞同：-1
> 
> 时间：2013-01-13T02:54:50.253
> 
> 标签：java, macos, slick2d, frame-rate

我正在使用 Slick2D 库在 Java 中制作游戏，但我无法找到理想的帧速率来在我的 Mac 上运行它。

如果我将目标（最大）帧速率设置为 60，项目会稍微落后于我的鼠标。如果我不限制帧速率，它往往会在 250 fps 左右运行。这很棒，但是当我移动鼠标时，项目会在鼠标移动之前移动。

运行我的游戏以使其与光标同步的理想帧速率是多少，或者这是一个 Mac 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:31:33.233

隐藏系统光标并自己绘制。这样，可以保证同步:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:07:42.287

2D 游戏的最低帧率必须为 25FPS，并且足以显示游戏。尝试降低 FPS，看看会发生什么。

# php - 如何从父类访问子函数

> ID：14300230
> 
> 赞同：0
> 
> 时间：2013-01-13T02:55:19.980
> 
> 标签：php, oop, abstract-class

```
 class hydra {
    var $dbcon;

    function __construct($ezSQL){
        $this -> dbcon=$ezSQL;
    }

  }
  class user extends hydra{
    function foo(){
       echo "bar is: ".$this->dbcon;
    }
  } 
```

然后我打电话给：

```
$hydra      = new hydra($ezSQL); 
```

但是，此时我收到以下错误：

```
Fatal error: Cannot instantiate abstract class hydra 
```

如何设置一个将继承所有子函数的类，以便我可以执行以下操作：

```
$hydra = new hydra("foobar");
$hydra -> foo(); 
```

输出：

> 酒吧是： foobar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:12:37.143

**您无法将孩子的功能放入 parent**。试想，妈妈是不是从女儿那里得到了她的长相？不，它是从父母那里继承的孩子。

您提供的代码不会引发任何错误。但是从错误看来 hydra 是一个抽象类。当您想将儿童方法称为 hydra 时，您应该将该方法作为抽象方法。

```
abstract class hydra {
    var $dbcon;
    function __construct($ezSQL){
        $this -> dbcon=$ezSQL;
    }
    abstract public function foo();
} 
```

现在您可以实例化`user`但将该`foo()`方法调用为`hydra`. 它对类型提示的帮助很充分。

```
function dofoo(hydra $h){
    $h->foo();
}
$user = new user("bar");
dofoo($user); 
```

在这里，函数`dofoo`被视为`$h`一个`hydra`实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:12:23.243

我认为你对继承的想法是错误的。父母不从孩子那里继承功能，孩子从父母那里继承功能。在您的情况下，`hydra`没有功能`foo()`。该类`user`继承了构造函数和 的属性`hydra`，因此下面的代码是可行的。

```
$hydraChild = new user("foobar");
$hydraChild -> foo(); 
```

再一次，你不能设置一个继承它所有子函数的类。这不是面向对象编程的工作方式。

# python - 将 JPEG 图像导入 IPython（笔记本）程序

> ID：14300237
> 
> 赞同：0
> 
> 时间：2013-01-13T02:56:26.537
> 
> 标签：python, pygame, ipython

我正在使用 IPython 笔记本编写使用 pygame 库的程序。在这里，我想将图像文件导入程序。以下是我会使用的代码片段。

```
car = pygame.image.load('car.jpg') 
```

但要做到这一点，图像必须与 python 文件位于同一目录中。这些 IPython 笔记本文件保存在哪里？或者有没有其他方法可以将此文件导入到 IPython 笔记本中进行编程？

我正在使用Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:31:04.310

有多种方法可以更改目录或指定完整路径：

*   [IPython 理解](http://ipython.org/ipython-doc/dev/interactive/reference.html#magic-command-system)更改目录的`cd`命令（如果启用了“自动”；`%cd`如果没有，则使用），或者
*   使用[os.chdir](http://docs.python.org/2/library/os.html#os.chdir)，或
*   指定路径：

    ```
    load('/path/to/car.jpg') 
    ```

    或者

    ```
    import os
    load(os.path.expanduser('~/path/to/car.jpg')) # relative to user's home directory 
    ```

    或者

    ```
     IMAGEDIR = '/path/to/images'
     load(os.path.join(IMAGEDIR, 'car.jpg')) 
    ```

虽然`cd`在 IPython 中工作时很方便，但对于您的程序，您最好指定`car.jpg`.

# c - 如何修剪格式char []的字符串？

> ID：14300238
> 
> 赞同：3
> 
> 时间：2013-01-13T02:56:28.800
> 
> 标签：c

在我的 C 程序中，我创建了一个 char 数组，例如`char read_str[MAX_ALLOWED_BUFFER];`. 使用这个数组，我如何从它的左侧和右侧修剪空格和换行符。这不是一个指针，所以我不明白如何摆脱尾随字符。有人可以帮忙吗？

```
char read_str[MAX_ALLOWED_BUFFER];
FILE *fp;
fp = fopen(argv[1],"r");
fgets(read_str, MAX_BUFFER, fp);
// how to trim read_str ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T02:59:55.940

您需要识别第一个非空白字符，然后将值从那里复制到数组的开头。然后，您需要识别最后一个非空白字符，并在其后创建一个新的空终止符。

请注意，您实际上并没有删除或删除任何内容，您只是更改了数组中字符的值。

您可能会发现 C 标准库中的一些字符串处理函数很有用；这是它们的列表：[http](http://en.cppreference.com/w/c/string/byte) ://en.cppreference.com/w/c/string/byte 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T03:00:44.513

要从末尾修剪空白，只需在适当的位置写一个 0。字符串处理函数将其解释为字符串的结尾。要从开头删除空格，最简单的方法是使用指向数组的指针并让它指向第一个非空格字符。但是您也可以将字符移动到数组的开头，例如使用`memmove`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-13T03:20:10.367

一种方法是分配第二个字符串并将第一个字符串处理成第二个......

```
#include <stdio.h>
#include <string.h>

#define MAX_ALLOWED_BUFFER 100

char read_str[MAX_ALLOWED_BUFFER] = "    a core string     ";
char result[MAX_ALLOWED_BUFFER];

int main(void) {
  char *t;

  read_str[MAX_ALLOWED_BUFFER - 1] = '\0'; // not needed here but wise in general
  // trim trailing space
  for(t = read_str + strlen(read_str); --t >= read_str; )
    if (*t == ' ')
      *t = '\0';
    else
      break;
  // trim leading space
  for(t = read_str; t < read_str + MAX_ALLOWED_BUFFER; ++t)
    if(*t != ' ')
      break;
  strcpy(result, t);
  printf("got <%s>\n", result);
  return 0;
} 
```

# php - PHP：strlen() 不起作用......根本

> ID：14300240
> 
> 赞同：0
> 
> 时间：2013-01-13T02:56:48.487
> 
> 标签：php, forms, strlen

我试过查看其他答案，但我遇到的只是人们将他们的比较运算符放在错误的方向上。不是这里的情况。下面是我的代码的简化版本。此代码不会返回我认为*应该*的错误。

我正在尝试确定一个字符串（在本例中为密码）是否满足最小长度要求。但是，无论我输入什么字符串，它都不会给出应有的错误。作为调试的一种方式，我尝试在 strlen() 中输入一个简单的字符串“hi”，并告诉它如果小于则给出错误6 个字节长。然而，即使这样也不会像我想要的那样返回。

我觉得我错过了一些愚蠢的东西。帮助？

```
<?php
$Email = mysql_real_escape_string(Trim($_POST['Email']));
$Password = "hi";

// check fields
$error = false;
if(empty($Email)) $error = true;
if(strlen(utf8_decode($Password)) < 6) $error = true;

if($error != false) header("Location: index.php?error=true");

// store user to database
$success = insert_dbUser(new User($Email, $Password));

// redirect to success page 
if ($success) {
    header("Location: index.php?success=true");
}
else header("Location: index.php?error=existinguser");
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:59:41.280

确保在发送位置标头后结束脚本：

```
if ($error) {
    header("Location: index.php?error=true");
    exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T13:35:28.363

我会检查你的“if”语句的语法，因为其中两个既没有冒号“：”也没有大括号“{ //do stuff }”。else 需要将要发生的任何事情都放在大括号中。我可能弄错了，但是你所拥有的不寻常的语法对我来说很突出。以及需要退出语句。

# java - java mysql插入语法错误

> ID：14300244
> 
> 赞同：-1
> 
> 时间：2013-01-13T02:58:15.613
> 
> 标签：java, mysql, jdbc

我在 con=createConnection(); 处收到语法错误；在 netbeans ide 中，我想将记录插入 mysql 数据库。怎么能纠正这个？

```
private void btnlogActionPerformed(java.awt.event.ActionEvent evt) {                                       

         user=txtuser.getText();
      char[] pass=jPasswordField1.getPassword();
             String passString=new String(pass);
            **![con =createConnection();][1]**
             try{    

String str="INSERT INTO login(username,Password) VALUES ('" + user + "','" + passString + "')";
java.sql.PreparedStatement statement=con.prepareStatement(str); 
statement.setString(1,user);
    statement.setString(2,passString);
statement.executeUpdate();
            }
            catch(Exception e){
                JOptionPane.showMessageDialog(null,"Exception: "+ e.toString());
            }

public static void main(String args[]) {
try {
            Class.forName("com.mysql.jdbc.Driver");
            String connectionUrl = "jdbc:mysql://localhost/Stock?"+
                                   "user=root&password=";
            Connection con = DriverManager.getConnection(connectionUrl);

        } catch (SQLException e) {
            JOptionPane.showMessageDialog(null,"SQL Exception: "+ e.toString());
        } catch (ClassNotFoundException cE) {
            JOptionPane.showMessageDialog(null,"Class Not Found Exception: "+ cE.toString());
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:23:47.907

尝试这个，

```
 String str="INSERT INTO login(username,Password) VALUES (?,?)";
 java.sql.PreparedStatement statement=con.prepareStatement(str); 
 statement.setString(1,user);
 statement.setString(2,passString);
 statement.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:12:00.040

什么是`con`，你有 createConnection() 静态方法，会给你连接？

```
con =createConnection(); 
```

如果您正在使用`PreparedStatement`和设置参数，您应该在这样的查询中有占位符

```
String str = "INSERT INTO login(username,Password) VALUES (?, ?)"; 
```

# python - Python 控制台应用程序 - 输入行上方的输出

> ID：14300245
> 
> 赞同：9
> 
> 时间：2013-01-13T02:58:20.657
> 
> 标签：python, input, console, output, curses

我正在尝试在 Python3 中编写控制台应用程序。

问题是我希望所有输出消息 EG: print("Status message") 都位于底部输入行的上方。

```
Status message 1
Status message 2
Status message 3
Console:> I want to type here while the output messages displayed 
```

目前它看起来更像这样

```
Console:>  want to type here while the outStatus message 1
put messages displayed 
```

反正有没有使用诅咒来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T03:16:27.807

尝试这个：

```
print chr(27)+'[2AOutput' 
```

希望这是你所要求的。

抱歉，以上内容适用于 Python 2.7。我不确定 Python 3 版本是否

```
print(chr(27)+'[2AOutput') 
```

将工作与否。

参考： [http ://en.wikipedia.org/wiki/ANSI_escape_code](http://en.wikipedia.org/wiki/ANSI_escape_code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-11T22:53:14.547

这可以使用提供控制台带内控制的 ANSI 转义序列来完成。这就是 curses 库在后端的工作方式。

这个序列应该适合你想要的，为了清楚起见分开：

```
print("\u001B[s", end="")     # Save current cursor position
print("\u001B[A", end="")     # Move cursor up one line
print("\u001B[999D", end="")  # Move cursor to beginning of line
print("\u001B[S", end="")     # Scroll up/pan window down 1 line
print("\u001B[L", end="")     # Insert new line
print(status_msg, end="")     # Print output status msg
print("\u001B[u", end="")     # Jump back to saved cursor position 
```

请注意，这并非特定于 python 并且适用于大多数控制台。

参考：

[http://xn--rpa.cc/irl/term.html](http://xn--rpa.cc/irl/term.html) - 非常适合没有诅咒的 TUI 编程，包括有关为 vim 使用单独缓冲区的信息，例如屏幕切换

[https://invisible-island.net/xterm/ctlseqs/ctlseqs.html](https://invisible-island.net/xterm/ctlseqs/ctlseqs.html) - 完整的 ANSI 转义标准，维基百科不包括关键序列

# php - 如何在php中调用正确的mysql数据

> ID：14300251
> 
> 赞同：0
> 
> 时间：2013-01-13T03:00:10.220
> 
> 标签：php, mysql

我正在尝试访问 mysql 数据库并提取所有具有特定值的代码行（即电子邮件）。

我正在使用`$result=mysql_query($query);`然后`$row=mysql_fetch_array($result);`获取结果并将它们存储在一个数组中。

我知道从那里我可以使用 $row['email'] 访问数据，如果它只有一行......但是如果数组中有多行，我如何访问这些数据？例如，我可以这样做：

```
$var1 = $row['email'][0];
$var2 = $row['email'][1]; 
```

ETC。？这是正确的语法吗？如果我想把这个值放回 Mysql，我可以`UPDATE ...where email = '$row['email'][1]'";`或者我需要它是一个简单的变量`$var1`吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:06:40.187

利用`mysql_fetch_assoc`

```
foreach($row = mysql_fetch_assoc($result)) {
   $var = $row['email']
} 
```

不要忘记释放你的结果集

```
mysql_free_result($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:02:59.563

`mysql_fetch_array()`每次调用时都会获取下一行以获取其余行，您必须像这样循环遍历它们：

```
while($row = mysql_fetch_array($result)){
    $var1 = $row['email'];
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T03:03:42.130

```
while($row = mysql_fetch_array($result)) {

echo $row['one']."<br/>".$row['two'];
} 
```

# algorithm - 如何显示具有 n 个节点的斐波那契堆可以有高度 n？

> ID：14300256
> 
> 赞同：1
> 
> 时间：2013-01-13T03:01:06.090
> 
> 标签：algorithm, data-structures, fibonacci-heap

我想证明一个具有 n 个节点的斐波那契堆的高度可能为 n。

我用例子试过这个，但我不知道如何展示这个。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-13T03:41:21.427

（我假设您的意思是高度 n - 1：高度 n 是不可能的，因为对于 n 个节点，最大高度是高度 n - 1 的链表）

达到第一高度很容易：添加三个节点，然后执行 dequeue-min。这将删除一个节点并将高度为 0 的其他两个节点组合成高度为 1 的结构：

```
A
|
B 
```

如果您再次重复此过程并确保其中一个新节点具有最低优先级，您将获得其中两棵树，然后将它们合并在一起，如下所示：

```
A
|\
B C
  |
  D 
```

现在，对 B 执行删除操作。这使 A 具有顺序 1 和标记：

```
A*
|
C
|
D 
```

再次重复这个过程（插入三个节点，所有节点都具有无限负优先级，并调用 dequeue-min）得到：

```
E
|\
F A*
  |
  C
  |
  D 
```

删除 F 得到

```
E*
|
A*
|
C
|
D 
```

如果您重复执行添加三个节点、删除一个节点、然后删除剩下的单个树的单个子节点的过程，您可以使斐波那契堆成为高度为 n - 1 的单个树，用于您想要的任何 n。

希望这可以帮助！

# java - 属性“userDetailsS ervice”：找不到匹配的编辑器或转换策略

> ID：14300260
> 
> 赞同：6
> 
> 时间：2013-01-13T03:01:57.560
> 
> 标签：java, spring-security

我总是得到：

```
java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Cannot resolve reference to bean 'org.springframework.security.web.DefaultSecurityFilterChain#0' while setting bean property 'sourceList' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.DefaultSecurityFilterChain#0': Cannot resolve reference to bean 'org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0' while setting constructor argument with key [2]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting bean property 'authenticationManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authenticationManager': Cannot resolve reference to bean 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0' while setting constructor argument with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0': Initialization of bean failed; nested exception is org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'org.springframework.security.authentication.ProviderManager' to required type 'org.springframework.security.core.userdetails.UserDetailsService' for property 'userDetailsService'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [org.springframework.security.authentication.ProviderManager] to required type [org.springframework.security.core.userdetails.UserDetailsService] for property 'userDetailsService': no matching editors or conversion strategy found
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

**弹簧安全.xml**

```
<beans 
xmlns="http://www.springframework.org/schema/beans"
xmlns:security="http://www.springframework.org/schema/security" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<security:http auto-config="true" access-denied-page="/WEB-INF/view/error/access-denied.jsp">
    <security:intercept-url pattern="/**" access="ADMINISTRATOR" />
    <security:intercept-url pattern="/resources/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <security:intercept-url pattern="/index*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <security:form-login login-page="/index" default-target-url="/home" authentication-failure-url="/error" />
</security:http>

<bean id="userDetailsService" class="com.syncbro.clinic.service.impl.UserDetailsServiceImpl" />
<bean id="daoAuthenticationProvider" class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
    <property name="userDetailsService" ref="userDetailsService" />
</bean>

<bean id="providerManager" class="org.springframework.security.authentication.ProviderManager">
    <property name="providers">
        <list>
            <ref local="daoAuthenticationProvider" />
        </list>
    </property>
</bean>

<security:authentication-manager>
    <security:authentication-provider user-service-ref="providerManager">
        <security:password-encoder hash="sha-256" />
    </security:authentication-provider>
</security:authentication-manager> 
```

UserDetailsS​​erviceImpl.java

```
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service("userDetailsService")
public class UserDetailsServiceImpl implements UserDetailsService {

    @Autowired private UserDao userDao;
    @Autowired private Assembler assembler;

    @Override
    @Transactional(readOnly = true)
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {

        User user = userDao.findByUserName(username);
        if(user == null)
            throw new UsernameNotFoundException("[Login] User : " + username + " not found!");

        return assembler.assembleUser(user);

    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T03:50:16.127

这是我认为的问题：

```
<security:authentication-provider user-service-ref="providerManager"> 
```

您传递了一个`ProviderManager`看起来像`UserDetailsService`预期的 ref。（即使这不是发生错误的地方，异常消息也清楚地表明这是发生了什么......某处。）

# node.js - NodeJS 中的 Object.create

> ID：14300262
> 
> 赞同：3
> 
> 时间：2013-01-13T03:02:28.310
> 
> 标签：node.js, object-create

与 FireFox 相比，Object.create 在 Nodejs 中的工作方式不同。

假设一个像这样的对象：

```
objDef = {
  prop1: "Property 1"
}

obj = {
  prop2: "Property 2"
}

var testObj = Object.create(obj, objDef); 
```

上面的 javascript 在 Mozilla 中完美运行。它基本上使用传递给 Object.create 的第二个参数来设置默认值。

但这在 Node.js 中不起作用。我得到的错误是`TypeError: Property description must be an object: true`.

我怎样才能让它在 Node 中工作？我想基本上创建一个具有默认值的对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T03:19:04.183

第二个参数应该将属性名称映射到属性描述符，即对象。

请参阅 MDN 上显示的示例：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create#Using_%3CpropertiesObject%3E_argument_with_Object.create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create#Using_%3CpropertiesObject%3E_argument_with_Object.create)

你可以通过使用这样的东西来解决：

```
objDef = {
    prop1: {
        value: "Property 1"
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-13T03:22:19.350

第二个参数`Object.create(proto [, propertiesObject ])`应该是一个属性描述符对象

此处描述了属性描述符结构： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)

这将创建一个可以枚举和修改的具有默认值的属性：

```
Object.create(obj, {
    prop1: {
        configurable:true,
        enumerable:true,
        value:"Property 1",
        writable: true
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T16:50:59.203

```
Object.prototype.test = 0; 
```

将任何对象中的**测试**键的默认值设置为 0。

# mysql - 具有多个 AND OR WHERE 条件的复杂 MySQL 查询

> ID：14300269
> 
> 赞同：3
> 
> 时间：2013-01-13T03:03:57.957
> 
> 标签：mysql

我有一张桌子可以帮助选择产品。

我想查询我在哪里找回了每条记录：

```
category_id = 'M10' and band_id = '010'
OR
category_id = 'M10' and band_id = '020'

AND

category_id = 'M50' and band_id = '010'
OR
category_id = 'M50' and band_id = '020' 
```

我的查询：

```
SELECT 
product.entry_id AS entry_id, 
helpme.item_id AS product_id 
FROM inbound_help_me_choose helpme 
LEFT JOIN exp_channel_titles product ON (product.product_id = helpme.item_id) 
WHERE 
helpme.submarket_id = 'NZ' 
AND 
(
(helpme.category_id = 'M10' AND helpme.band_id = '010') 
OR 
(helpme.category_id = 'M10' AND helpme.band_id = '020')
) 
```

在第一类上工作正常，但是一旦我添加新的 WHERE 条件失败：

```
SELECT 
product.entry_id AS entry_id, 
helpme.item_id AS product_id 
FROM inbound_help_me_choose helpme 
LEFT JOIN exp_channel_titles product ON (product.product_id = helpme.item_id) 
WHERE 
helpme.submarket_id = 'NZ' 
AND 
(
(helpme.category_id = 'M10' AND helpme.band_id = '010') 
OR 
(helpme.category_id = 'M10' AND helpme.band_id = '020')
)
AND
(
(helpme.category_id = 'M50' AND helpme.band_id = '010')
OR 
(helpme.category_id = 'M50' AND helpme.band_id = '020')
OR 
(helpme.category_id = 'M50' AND helpme.band_id = '030')
) 
```

对我来说似乎没问题，所以我完全失去了为什么它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T03:07:42.253

我想你需要这个

```
SELECT 
product.entry_id AS entry_id, 
helpme.item_id AS product_id 
FROM inbound_help_me_choose helpme 
LEFT JOIN exp_channel_titles product ON (product.product_id = helpme.item_id) 
WHERE 
helpme.submarket_id = 'NZ' 
AND 
(
   (helpme.category_id = 'M10' AND helpme.band_id IN ('010','020')) OR 
   (helpme.category_id = 'M50' AND helpme.band_id IN ('010','020','030'))
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T03:12:04.693

稍微改变一下你需要的东西：

```
category_id = 'M10' and band_id = '010' OR category_id = 'M10' and band_id = '020'
AND
category_id = 'M50' and band_id = '010' OR category_id = 'M50' and band_id = '020' 
```

是相同的：

```
category_id = 'M10' and (band_id = '010' OR band_id = '020')
AND
category_id = 'M50' and (band_id = '010' OR band_id = '020') 
```

是相同的：

```
category_id = 'M10' and category_id = 'M50'
AND
(band_id = '010' OR band_id = '020') and (band_id = '010' OR band_id = '020') 
```

`category_id`不能两者兼而有之`M10`，`M50`所以你不会得到任何结果......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T03:18:40.717

您在问题中显示的第二个示例查询中的 where 子句中的条件，即在其 where 子句中遇到问题的条件，永远无法评估为真......

第一个示例中的第一个 where 子句要求 category_id 等于 M10。

然后在第二个示例中，where 子句使用“and”添加了另一组语句。问题是这个 where 子句只需要 category_id 为 M50 的记录

无论逻辑上的任何其他问题如何，我都可以相当确定您不会找到同时具有 M10 和 M50 的 category_id 的记录。

另一个用户，@rs。发布了一个带有修改的 where 子句的查询，该子句符合在开始或您的问题中指定的条件逻辑规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T03:08:44.707

`x AND y`运算符意味着它适用的和`x`条件`y`都需要同时满足。您只需要改用`OR`运算符。

# login - 注册用户后登录停止工作

> ID：14300273
> 
> 赞同：-1
> 
> 时间：2013-01-13T03:04:33.080
> 
> 标签：login, registration, wordpress

我正在注册一个新用户并使用`do_action( 'wp_login', $user_login )`. 在我最近更新 WordPress 之前一切正常。我检查了说明`wp-login`已贬值的法典`wp_signon()`。代码如下：

* * *

```
if ( isset( $_POST[ "submit" ] ) && wp_verify_nonce( $_POST[ 'smart_register_nonce' ], 'smart-register-nonce' ) ) 
{
    $licence_no     = $_POST[ "smart_user_licence" ];           
    $user_login     = $_POST[ "smart_user_login" ]; 
    $user_email     = $_POST[ "smart_user_email" ];
    $user_first     = $_POST[ "smart_user_first" ];
    $user_last      = $_POST[ "smart_user_last" ];
    $user_pass      = $_POST[ "smart_user_pass" ];
    $pass_confirm   = $_POST[ "smart_user_pass_confirm" ];

    // this is required for username checks
    require_once( ABSPATH . WPINC . '/registration.php' );
    // include the wordpress files necessary to run its functions
    include('../classpages/wp-config.php'); // this includes wp-settings.php, which includes wp-db.php, which makes the database connection
    include(ABSPATH . WPINC . '/pluggable-functions.php');

    if(username_exists( $user_login ) ) 
    {
        // Username already registered
        smart_errors()->add( 'username_unavailable', __( 'Username already taken' ) );
    }
    if(!validate_username( $user_login ) ) 
    {
        // invalid username
        smart_errors()->add( 'username_invalid', __( 'Invalid username' ) );
    }
    if( $user_login == '' ) 
    {
        // empty username
        smart_errors()->add( 'username_empty', __( 'Please enter a username' ) );
    }
    if(!is_email( $user_email ) ) 
    {
        //invalid email
        smart_errors()->add( 'email_invalid', __( 'Invalid email' ) );
    }
    if( email_exists( $user_email ) ) 
    {
        //Email address already registered
        smart_errors()->add( 'email_used', __( 'Email already registered' ) );
    }
    if( $user_pass == '' ) 
    {
        // passwords do not match
        smart_errors()->add( 'password_empty', __( 'Please enter a password' ) );
    }
    if( $user_pass != $pass_confirm ) 
    {
        // passwords do not match
        smart_errors()->add( 'password_mismatch', __( 'Passwords do not match' ) );
    }

    $errors = smart_errors()->get_error_messages();

    // only create the user in if there are no errors
    if( empty( $errors ) ) 
    {
        $new_user_id = wp_insert_user(array(
                'user_login'        => $user_login,
                'user_pass'         => $user_pass,
                'user_email'        => $user_email,
                'first_name'        => $user_first,
                'last_name'         => $user_last,
                'user_registered'   => date('Y-m-d H:i:s'),
                'role'              => 'author'
            )
        );

        // Create post object
        $my_post = array(
                  'post_title'    => $user_login,
                  'post_content'  => '',
                  'post_type'     => 'vet-profile',
                  'post_status'   => 'publish',
                  'post_author'   => $new_user_id,
                  'post_category' => array(8,39)
        );

        // Insert the post into the database
        wp_insert_post( $my_post );  

        if( $new_user_id ) 
        {
            // send an email to the admin alerting them of the registration
            wp_new_user_notification( $new_user_id );

            // Make sure user session has started
            $vsessionid = session_id();
            if ( empty( $vsessionid ) ) 
            {
                session_name('PHPSESSID'); 
                session_start();
            }

            // log the new user in
            wp_set_auth_cookie( $new_user_id, true );
            wp_set_current_user( $new_user_id, $user_login);    
            //do_action( 'wp_signon', $user_login );

            $creds = array();
            $creds['user_login'] = $user_login;
            $creds['user_password'] = $user_pass;
            $creds['remember'] = true;

            $user = wp_signon( $creds, false );

            if ( is_wp_error( $user ) ) 
            {
                $error = $user->get_error_message();
            } 
            else 
            {
                wp_set_current_user( $user->ID, $username );
                do_action('set_current_user');

                // send the newly created user to the home page after logging them in
                //$location = "http://example.com";
                //wp_safe_redirect( $location ); 
                //exit;
            }
            if ( $error ) 
            {
                echo $error; 
                print_r( $userdata ); 
                print_r( $current_user );
            }
        }
    }
} 
```

* * *

用户已创建但未登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:31:10.707

您将 $username 传递给 wp_set_current_user()，但看起来您没有在任何地方定义它。无论如何，这个论点是可选的——我建议你把它关掉。

您还在 $userdata 和 $current_user 上执行 print_r。我认为它们也没有设置。不要假设您的代码将在全局范围内运行——在您的代码中显式地使 $current_user 成为全局，或者（更好地）处理从 wp_set_current_user() 返回的对象。

# sql - 了解排名函数、OVER()、GROUP BY 之间的关系？

> ID：14300275
> 
> 赞同：2
> 
> 时间：2013-01-13T03:05:02.297
> 
> 标签：sql, sql-server-2008

我的书说——

**1-**排名函数（如 RANK()、DENSE_RANK()、ROW_NUMBER() 等）需要 OVER() 子句。

所以，下面的代码是错误的 -

```
select *, RANK()
from [grant]
order by Amount desc 
```

错误 - 'RANK' 附近的语法不正确，应为 'OVER'。

如果我在上面的代码中在 RANK() 之后添加 OVER()，我会再次收到错误。（错误 - 排名函数“RANK”必须有 ORDER BY 子句。）

**2-**然后，我的书补充说“排名函数需要 ORDER BY 信息作为参数出现在 OVER() 中”。

```
select *, RANK() OVER(ORDER BY Amount DESC) as GrantRank
from [grant] 
```

**我的问题是——**

**1 -**为什么我们需要一个带有排名函数的 OVER() 子句？ **2 -**为什么我们必须删除 order by 语句并将其放在 OVER() 中？

这本书没有解释这些事情背后的逻辑！请帮助我理解它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T03:22:49.790

> 为什么我们需要一个`OVER()`带有排名功能的子句？

需要该`OVER()`子句，以便 SQL Server 确切知道您希望如何确定诸如`RANK()`. `RANK()`如果您不向 SQL Server 提供排序标准，您会期待什么？比赛的获胜者是时间最快、时间最慢还是按字母顺序排列名字的获胜者？

> 为什么我们必须删除 order by 语句并将其放在`OVER()`?

`ORDER BY`在. _ `ORDER BY`_ `OVER()`这些是独立使用的 - 一个用于确定`RANK()`，另一个用于指示排序。

因此，例如，如果您想返回比赛的完赛者，但将他们排在最后，您可能会说：

```
SELECT 
  name, 
  finish_time, 
  [rank] = RANK() OVER (ORDER BY finish_time) -- fastest first
FROM 
  dbo.race_table
ORDER BY 
  finish_time DESC; -- fastest last 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:23:03.077

要了解发生了什么，您必须了解该`RANK`函数在做什么——它返回基于某些列的数据排名。对于那些并列的人，您将获得相同的排名。因此，如果您想知道授权表中哪一行的金额最高，您需要按该特定列的降序排列。

想象一下任何一项运动的排名——你可以让两支球队并列第一，而排名中的下一支球队将是第三名。这基本上就是该`RANK`功能为您做的事情。

[这是MSDN](http://msdn.microsoft.com/en-us/library/ms176102%28v=sql.105%29.aspx)上的一篇有用的文章。

这里是[SQL Fiddle](http://sqlfiddle.com/#!3/01570/1)，它也可能有所帮助。

# php - 构造内连接的错误

> ID：14300276
> 
> 赞同：0
> 
> 时间：2013-01-13T03:05:16.613
> 
> 标签：php, mysqli, inner-join

我在让我的 innerjoin 工作时遇到了一点问题。好吧，我确定这是有问题的行，因为我的绑定和 fetch_array 似乎是有序的。

这是我的代码：

```
$GetQuestion = $STD->prepare("
SELECT Users.ID, SecurityQuestion.Question, SecurityQuestion.Answer, SecurityQuestion.Show
FROM Users AS Users 
INNER JOIN SecurityQuestion AS SecurityQuestion
ON Users.ID = SecurityQuestion.UserID WHERE Users.Username=?");

$GetQuestion->bind_param("s", $_GET['RecoverUsername']);
$GetQuestion->execute();
$Results = $GetQuestion->fetch_array(MYSQLI_ASSOC); 
```

给出的错误是：

```
Fatal error: Call to undefined method mysqli_stmt::fetch_array() in /var/www/New/ForgotPassword.php on line 47 
```

但是当我使用数组时，这个结构在我的整个代码中都有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:07:58.153

该错误表明您尝试访问的方法不存在，在本例中为：`mysqli_stmt::fetch_array()`. 相反，您应该使用[`mysqli_stmt::fetch()`](http://www.php.net/manual/en/mysqli-stmt.fetch.php).

# java - 由于“进程崩溃”，检测运行失败

> ID：14300277
> 
> 赞同：1
> 
> 时间：2013-01-13T03:05:43.523
> 
> 标签：java, android, unit-testing

我的代码在我正常运行时工作正常，但是当我运行此单元测试时，此错误会打印在控制台中。我在这个单元测试中做错了什么？

测试运行失败：由于“进程崩溃”，检测运行失败。

**日志猫**

```
01-13 03:52:12.560: I/DEBUG(31): *** *** *** *** *** *** *** *** *** *** *** *** *** 

*** *** ***
01-13 03:52:12.560: I/DEBUG(31): Build fingerprint: 'generic/sdk/generic/:2.2/FRF91/43546:eng/test-keys'
01-13 03:52:12.560: I/DEBUG(31): pid: 446, tid: 452  >>> com.frozendragon.Sceptrum <<<
01-13 03:52:12.560: I/DEBUG(31): signal 11 (SIGSEGV), fault addr 00000028
01-13 03:52:12.560: I/DEBUG(31):  r0 00000000  r1 0026148c  r2 00000000  r3 0026148c
01-13 03:52:12.560: I/DEBUG(31):  r4 00260bd8  r5 002614cc  r6 00000000  r7 00000000
01-13 03:52:12.560: I/DEBUG(31):  r8 00000001  r9 00000000  10 00000000  fp 00000000
01-13 03:52:12.560: I/DEBUG(31):  ip 00000000  sp 485c1b38  lr 00000000  pc ab166044  cpsr 60000010
01-13 03:52:12.606: I/DEBUG(31):          #00  pc 00066044  /system/lib/libskia.so
01-13 03:52:12.606: I/DEBUG(31):          #01  pc 00068bb4  /system/lib/libskia.so
01-13 03:52:12.606: I/DEBUG(31):          #02  pc 00064e68  /system/lib/libskia.so
01-13 03:52:12.606: I/DEBUG(31):          #03  pc 0004b1ea  /system/lib/libandroid_runtime.so
01-13 03:52:12.606: I/DEBUG(31):          #04  pc 00013974  /system/lib/libdvm.so
01-13 03:52:12.606: I/DEBUG(31):          #05  pc 0003ddb4  /system/lib/libdvm.so
01-13 03:52:12.606: I/DEBUG(31):          #06  pc 00037186  /system/lib/libdvm.so
01-13 03:52:12.606: I/DEBUG(31):          #07  pc 00018714  /system/lib/libdvm.so
01-13 03:52:12.616: I/DEBUG(31):          #08  pc 0001e8c4  /system/lib/libdvm.so
01-13 03:52:12.616: I/DEBUG(31):          #09  pc 0001d790  /system/lib/libdvm.so
01-13 03:52:12.616: I/DEBUG(31):          #10  pc 0005408e  /system/lib/libdvm.so
01-13 03:52:12.616: I/DEBUG(31):          #11  pc 0005bde2  /system/lib/libdvm.so
01-13 03:52:12.616: I/DEBUG(31):          #12  pc 00018714  /system/lib/libdvm.so
01-13 03:52:12.616: I/DEBUG(31):          #13  pc 0001e8c4  /system/lib/libdvm.so
01-13 03:52:12.616: I/DEBUG(31):          #14  pc 0001d790  /system/lib/libdvm.so
01-13 03:52:12.616: I/DEBUG(31):          #15  pc 00053eec  /system/lib/libdvm.so
01-13 03:52:12.616: I/DEBUG(31):          #16  pc 00054102  /system/lib/libdvm.so
01-13 03:52:12.626: I/DEBUG(31):          #17  pc 0004825a  /system/lib/libdvm.so
01-13 03:52:12.626: I/DEBUG(31):          #18  pc 0001103c  /system/lib/libc.so
01-13 03:52:12.626: I/DEBUG(31):          #19  pc 00010b20  /system/lib/libc.so
01-13 03:52:12.626: I/DEBUG(31): code around pc:
01-13 03:52:12.626: I/DEBUG(31): ab166024 e59d001c e3a01000 e5c010a8 eaffff95 
01-13 03:52:12.626: I/DEBUG(31): ab166034 e1d4e2f4 e1d472f6 e5946004 e197200e 
01-13 03:52:12.626: I/DEBUG(31): ab166044 e5969028 e596a024 0a00002e e59db00c 
01-13 03:52:12.626: I/DEBUG(31): ab166054 e2848028 e1a0c008 e8bb000f e8ac000f 
01-13 03:52:12.626: I/DEBUG(31): ab166064 e8bb000f e8ac000f e89b0003 e26eb000 
01-13 03:52:12.626: I/DEBUG(31): code around lr:
01-13 03:52:12.626: I/DEBUG(31): stack:
01-13 03:52:12.626: I/DEBUG(31):     485c1af8  43480000  /data/dalvik-cache/system@framework@framework.jar@classes.dex
01-13 03:52:12.626: I/DEBUG(31):     485c1afc  002613c8  [heap]
01-13 03:52:12.626: I/DEBUG(31):     485c1b00  485c1be8  
01-13 03:52:12.626: I/DEBUG(31):     485c1b04  00261020  [heap]
01-13 03:52:12.626: I/DEBUG(31):     485c1b08  485c1be8  
01-13 03:52:12.626: I/DEBUG(31):     485c1b0c  ab165be8  /system/lib/libskia.so
01-13 03:52:12.626: I/DEBUG(31):     485c1b10  00000001  
01-13 03:52:12.636: I/DEBUG(31):     485c1b14  00000007  
01-13 03:52:12.636: I/DEBUG(31):     485c1b18  420d1a98  /dev/ashmem/dalvik-LinearAlloc (deleted)
01-13 03:52:12.636: I/DEBUG(31):     485c1b1c  80846dad  /system/lib/libdvm.so
01-13 03:52:12.636: I/DEBUG(31):     485c1b20  00000024  
01-13 03:52:12.636: I/DEBUG(31):     485c1b24  00231b78  [heap]
01-13 03:52:12.636: I/DEBUG(31):     485c1b28  46002d90  /dev/ashmem/mspace/dalvik-heap/2 (deleted)
01-13 03:52:12.636: I/DEBUG(31):     485c1b2c  8083d9b9  /system/lib/libdvm.so
01-13 03:52:12.636: I/DEBUG(31):     485c1b30  df002777  
01-13 03:52:12.636: I/DEBUG(31):     485c1b34  e3a070ad  
01-13 03:52:12.636: I/DEBUG(31): #00 485c1b38  46002d90  /dev/ashmem/mspace/dalvik-heap/2 (deleted)
01-13 03:52:12.636: I/DEBUG(31):     485c1b3c  8082e5b3  /system/lib/libdvm.so
01-13 03:52:12.636: I/DEBUG(31):     485c1b40  00000000  
01-13 03:52:12.636: I/DEBUG(31):     485c1b44  002614a4  [heap]
01-13 03:52:12.636: I/DEBUG(31):     485c1b48  00004000  
01-13 03:52:12.636: I/DEBUG(31):     485c1b4c  ffffffff  
01-13 03:52:12.636: I/DEBUG(31):     485c1b50  00000000  
01-13 03:52:12.636: I/DEBUG(31):     485c1b54  00261020  [heap]
01-13 03:52:12.636: I/DEBUG(31):     485c1b58  485c1be8  
01-13 03:52:12.636: I/DEBUG(31):     485c1b5c  002316e8  [heap]
01-13 03:52:12.636: I/DEBUG(31):     485c1b60  46002d90  /dev/ashmem/mspace/dalvik-heap/2 (deleted)
01-13 03:52:12.636: I/DEBUG(31):     485c1b64  ad32e451  /system/lib/libandroid_runtime.so
01-13 03:52:12.636: I/DEBUG(31):     485c1b68  ad374d50  /system/lib/libandroid_runtime.so
01-13 03:52:12.636: I/DEBUG(31):     485c1b6c  ad34bf0f  /system/lib/libandroid_runtime.so
01-13 03:52:12.636: I/DEBUG(31):     485c1b70  485c1f00  
01-13 03:52:12.636: I/DEBUG(31):     485c1b74  485c1be8  
01-13 03:52:12.646: I/DEBUG(31):     485c1b78  00261020  [heap]
01-13 03:52:12.646: I/DEBUG(31):     485c1b7c  ab165b68  /system/lib/libskia.so
01-13 03:52:12.646: I/DEBUG(31):     485c1b80  485c1be8  
01-13 03:52:12.646: I/DEBUG(31):     485c1b84  485c1c0c  
01-13 03:52:12.646: I/DEBUG(31):     485c1b88  485c1bb0  
01-13 03:52:12.646: I/DEBUG(31):     485c1b8c  00261020  [heap]
01-13 03:52:12.646: I/DEBUG(31):     485c1b90  00000000  
01-13 03:52:12.646: I/DEBUG(31):     485c1b94  00000001  
01-13 03:52:12.646: I/DEBUG(31):     485c1b98  00000000  
01-13 03:52:12.646: I/DEBUG(31):     485c1b9c  00000000  
01-13 03:52:12.646: I/DEBUG(31):     485c1ba0  00000000  
01-13 03:52:12.646: I/DEBUG(31):     485c1ba4  ab168bb8  /system/lib/libskia.so
01-13 03:52:12.646: I/DEBUG(31): #01 485c1ba8  00000000  
01-13 03:52:12.646: I/DEBUG(31):     485c1bac  00000000  
01-13 03:52:12.646: I/DEBUG(31):     485c1bb0  000013fc  
01-13 03:52:12.646: I/DEBUG(31):     485c1bb4  000001b8  
01-13 03:52:12.646: I/DEBUG(31):     485c1bb8  485c1c68  
01-13 03:52:12.646: I/DEBUG(31):     485c1bbc  00000000  
01-13 03:52:12.646: I/DEBUG(31):     485c1bc0  00000000  
01-13 03:52:12.646: I/DEBUG(31):     485c1bc4  00000000  
01-13 03:52:12.646: I/DEBUG(31):     485c1bc8  00261020  [heap]
01-13 03:52:12.646: I/DEBUG(31):     485c1bcc  433f6c68  /data/dalvik-cache/system@framework@framework.jar@classes.dex
01-13 03:52:12.646: I/DEBUG(31):     485c1bd0  8086caa4  /system/lib/libdvm.so
01-13 03:52:12.646: I/DEBUG(31):     485c1bd4  80870eea  /system/lib/libdvm.so
01-13 03:52:12.646: I/DEBUG(31):     485c1bd8  000013fc  
01-13 03:52:12.646: I/DEBUG(31):     485c1bdc  80887fc4  /system/lib/libdvm.so
01-13 03:52:12.646: I/DEBUG(31):     485c1be0  485c1f00  
01-13 03:52:12.656: I/DEBUG(31):     485c1be4  485c1c0c  
01-13 03:52:12.656: I/DEBUG(31):     485c1be8  00261020  [heap]
01-13 03:52:12.656: I/DEBUG(31):     485c1bec  00000003  
01-13 03:52:12.656: I/DEBUG(31):     485c1bf0  00000000  
01-13 03:52:12.656: I/DEBUG(31):     485c1bf4  485c1c68  
01-13 03:52:12.656: I/DEBUG(31):     485c1bf8  43957d20  
01-13 03:52:12.656: I/DEBUG(31):     485c1bfc  43957d0c  
01-13 03:52:12.656: I/DEBUG(31):     485c1c00  00231b78  [heap]
01-13 03:52:12.656: I/DEBUG(31):     485c1c04  ab164e6c  /system/lib/libskia.so
01-13 03:52:13.006: I/BootReceiver(73): Copying /data/tombstones/tombstone_07 to DropBox (SYSTEM_TOMBSTONE)
01-13 03:52:13.026: D/Zygote(33): Process 446 terminated by signal (11)
01-13 03:52:13.076: D/dalvikvm(73): GC_FOR_MALLOC freed 4012 objects / 829984 bytes in 66ms
01-13 03:52:13.076: I/ActivityManager(73): Process com.frozendragon.Sceptrum (pid 446) has died.
01-13 03:52:13.076: W/ActivityManager(73): Crash of app com.frozendragon.Sceptrum running instrumentation ComponentInfo{com.frozendragon.Sceptrum.test/android.test.InstrumentationTestRunner}
01-13 03:52:13.076: I/ActivityManager(73): Force stopping package com.frozendragon.Sceptrum uid=10028
01-13 03:52:13.087: D/AndroidRuntime(440): Shutting down VM
01-13 03:52:13.087: D/jdwp(440): Got wake-up signal, bailing out of select
01-13 03:52:13.087: D/dalvikvm(440): Debugger has detached; object registry had 1 entries
01-13 03:54:28.720: D/SntpClient(73): request time failed: java.net.SocketException: Address family not supported by protocol 
```

**单元测试代码**

```
Point ImagesPos, SheetSize, CurrentSprite, Size;
    protected void setUp() throws Exception {
        super.setUp();
        gameEngine = new GameEngine(400, 800);
        canvas = new Canvas();
        ImagesPos = new Point(200, 200);
        SheetSize = new Point(9, 9);
        CurrentSprite = new Point(2, 3);
        Size = new Point(200, 400);
        Context context = getContext();
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inScaled = true;
        animationbmp = BitmapFactory.decodeResource(context.getResources(), R.drawable.foot_animation_spritesheet9x9, options);
    }
    public void testDrawAnimationObjectCanvasBitmapIntIntPointPointFloat() {
        float rot = 45f;
        gameEngine.DrawAnimationObject(canvas, animationbmp, ImagesPos.x, ImagesPos.y, SheetSize, CurrentSprite, rot);
        animationbmp.recycle();
        gameEngine.DrawAnimationObject(canvas, animationbmp, ImagesPos.x, ImagesPos.y, SheetSize, CurrentSprite, rot);
        restorebmp();
    }
private void restorebmp()
{
    if(animationbmp.isRecycled() == false)
    {
        animationbmp.recycle();
    }
    Context context = getContext();
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inScaled = true;
    animationbmp = BitmapFactory.decodeResource(context.getResources(), R.drawable.foot_animation_spritesheet9x9, options);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:38:45.853

看来您的代码正在回收位图，然后立即尝试再次使用它：

```
 gameEngine.DrawAnimationObject(canvas, animationbmp, ImagesPos.x, ImagesPos.y, SheetSize, CurrentSprite, rot);
    //////////////////////////////////////////////
    animationbmp.recycle(); //Offending line here/
    //////////////////////////////////////////////
    gameEngine.DrawAnimationObject(canvas, animationbmp, ImagesPos.x, ImagesPos.y, SheetSize, CurrentSprite, rot); 
```

您不应该在回收后使用位图。您需要再次重新创建该位图对象，因为内存现在无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T03:31:13.603

您调用的 C++ 库因尝试取消引用内存地址 0x00...28 而崩溃。看起来像 libskia.so，它是 android 处理图形子系统的一部分。该内存地址意味着它可能正在查看数组中的第 N 个项目，但该数组为空。我会寻找一个传递给绘图调用的空指针，或者对 libskia 错误进行一些严肃的谷歌搜索。恐怕我无能为力，但这是一个开始。

# android - 如何使用 Log.d 获取传递给我活动中变量的内容，以及在哪里可以看到结果？

> ID：14300279
> 
> 赞同：-3
> 
> 时间：2013-01-13T03:05:56.503
> 
> 标签：android

这是一个菜鸟问题，但我搜索了很长时间，但我不明白

我真的很想找到传递给变量的值是什么......我在哪里可以看到结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:23:15.060

您传递给 Log.d 的字符串将转到设备上的文本文件。您可以通过下载文件或在终端中运行 adb logcat 来阅读它。或者通过使用 Eclipse 中的 DDMS 选项卡。

# php - 直接访问时返回 null 的 PHP 数组元素

> ID：14300282
> 
> 赞同：0
> 
> 时间：2013-01-13T03:06:51.020
> 
> 标签：php, arrays, wordpress, var-dump

知道为什么会发生这种情况吗？

代码：

```
<?php
print_r($this->$property);
var_dump($this->$property[0]);
?> 
```

输出：

```
Array
(
    [0] => WP_Post Object
        (
            [ID] => 34901
            [post_author] => 1
            [post_date] => 2013-01-04 21:04:34
            [post_date_gmt] => 2013-01-05 02:04:34
            [post_content] => 
            [post_title] => Castro Theater  
            [post_excerpt] => 
            [post_status] => publish
            [comment_status] => open
            [ping_status] => open
            [post_password] => 
            [post_name] => castro-theater
            [to_ping] => 
            [pinged] => 
            [post_modified] => 2013-01-04 21:04:34
            [post_modified_gmt] => 2013-01-05 02:04:34
            [post_content_filtered] => 
            [post_parent] => 0
            [guid] => http://demo.gala.local/2012/venues/castro-theater/
            [menu_order] => 0
            [post_type] => venue
            [post_mime_type] => 
            [comment_count] => 0
            [filter] => raw
            [p2p_id] => 34444
            [p2p_from] => 34891
            [p2p_to] => 34901
            [p2p_type] => scheduleitem_to_venue
        )

)
NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:15:08.750

您的代码最终`$property[0]`首先处理，然后尝试使用结果获取对象的属性。如果您获得`$this->$property`第一，那么您可以使用正常的数组表示法获取内容，并且事情将按您的预期工作。

```
$data = $this->$property;
var_dump($data[0]); 
```

# php - 带有微调器和错误消息的php ajax表单处理

> ID：14300286
> 
> 赞同：1
> 
> 时间：2013-01-13T03:07:25.407
> 
> 标签：php, ajax, forms

我想通过 php ajax 提交一个表单并试图保持简单，但它们不可避免地很复杂。

`pageA.php`只是一种形式。

`pageB.php`正在验证和处理代码。在我创建的这个页面的顶部，`$_SESSION['message'] = "";`如果有问题，在页面的末尾可能是`$_SESSION['message'] = "Password is too short";`- 例如。我想在`pageA.php`div 内显示此消息`#message`。

会话在两个页面的顶部开始（`session_start();`
在`pageA`我还有一个微调器 gif，默认情况下是隐藏的（`display:none;`），但它应该在（并且只是在）表单处理期间可见。

`pageA`.php

```
<form id="formReg" action="pageB.php" method="post">
. . .  
</form>
<img id="spinn" src="spinn.gif" />
<div id="message"></div>
<button id="sub">Register</button> 
```

JS 在底部`pageA`：

```
$("#sub").click( function() {
    $("#spinn").show(); // it seems this works, but very shortly
    $.post( $("#formReg").attr("action"), $("#formReg").serialize()); // this works (data are stored in the table).
    $("#formReg :input").val(''); //this works
    $("#spinn").hide();
    $("#message").html($_Session["message"]); // doesn't work, of course.
}); 
```

在`pageB.php`我的底部有：
`header("Location: pageA.php");`，以保持访问者`pageA`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:32:25.043

第一：表单提交后应该发生的所有动作都必须放在传递给的回调函数中`$.post()`。AJAX 函数立即返回，因此微调器将在显示后不久被隐藏。像这样做：

```
$.post(
    $("#formReg").attr("action"), $("#formReg").serialize(), 
    function(data, textStatus, jqXHR) {
        $("#spinn").hide();
        // Message display code - see below
    }
); 
```

这样，回调函数中的代码会在发布请求返回后立即执行，而不是在`$.post`调用返回后执行（它只是启动请求，但不等待它完成）。

关于显示消息：您`pageB.php`不必重定向，因为它仅通过 AJAX 调用。`pageA.php`所以客户端的浏览器打开后永远不会离开。AJAX 调用是一个单独的 HTTP 请求，不会影响当前打开的页面。要返回该值，您必须简单地输出它`pageB`-`data`上面定义的回调函数的参数将包含它。如果您想保持简单，只需执行以下操作：

```
// in pageB.php
echo $_SESSION['message'];

// In your JS callback
function(data, textStatus, jqXHR) {
    // "data" contains the output of pageB.php
    $("#message").html(data);
} 
```

如果您需要将多个项目传递给 AJAX 回调，请查看[JSON](http://en.wikipedia.org/wiki/JSON "JSON")。

# php - 从 Linkedin API 获取单个用户信息

> ID：14300291
> 
> 赞同：0
> 
> 时间：2013-01-13T03:08:27.433
> 
> 标签：php, api, oauth, linkedin

好的，我已经与这个系统战斗了大约 3 天，并且左右搜索并没有得到任何接近我想要的东西。话虽这么说，但我会依靠 StackOverflow 的无限智慧.....所以这里......

我正在尝试为自己创建一个更新的简历网站，但由于我懒得定期更新它，我有一个好主意，让它自动填充来自我的 LinkedIn 帐户的信息。我已经创建了与他们的 api 连接的 LinkedIn 应用程序并成功检索了信息问题是访问该站点的任何人都会被提示登录并批准我的应用程序，一旦他们这样做我会用他们的信息重建我的简历站点（我知道很搞笑）。

所以最大的问题是如何为我自己的应用程序获得授权，然后存储该授权并仅使用它来获取数据，而不管谁访问该站点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:37:25.603

没关系，我找到了存储您返回的身份验证令牌和秘密并将其用于所有请求的解决方案。

# android - SoundPool 加载永无止境

> ID：14300293
> 
> 赞同：1
> 
> 时间：2013-01-13T03:08:55.470
> 
> 标签：android, soundpool

这是我的代码：

```
 import java.util.Locale;

    import android.app.Activity;
    import android.content.Context;
    import android.media.AudioManager;
    import android.media.SoundPool;
    import android.media.SoundPool.OnLoadCompleteListener;
    import android.os.Bundle;
    import android.os.Vibrator;
    import android.util.Log;
    import android.view.MotionEvent;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.TextView;
    import android.view.GestureDetector;
    import android.view.GestureDetector.OnGestureListener;
    import android.speech.tts.TextToSpeech;
    import android.speech.tts.TextToSpeech.OnInitListener;

    public class GameActivity extends Activity implements OnGestureListener, OnInitListener {

        private SoundPool soundPool;
        private int wallSound, moveSound, completeSound, restartSound, readysetgoSound;
        boolean loaded = false;
        float actualVolume, maxVolume, volume;

        GestureDetector gDetector;
        Vibrator vibrator;

        @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);

            gDetector = new GestureDetector(this);
            vibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

            // Set the hardware buttons to control the music
            this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
            // Load the sound
            soundPool = new SoundPool(4, AudioManager.STREAM_MUSIC, 0);

            soundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
                @Override
                public void onLoadComplete(SoundPool soundPool, int sampleId,
                        int status) {
                    loaded = true;
                }
            });

            wallSound = soundPool.load(this, R.raw.wall, 1);
            moveSound = soundPool.load(this, R.raw.move, 1);
            completeSound = soundPool.load(this, R.raw.complete, 1);
            restartSound = soundPool.load(this, R.raw.restart, 1);
            readysetgoSound = soundPool.load(this, R.raw.readysetgo, 1);

            // Getting the user sound settings
            AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
            actualVolume = (float) audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
            maxVolume = (float) audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
            volume = actualVolume / maxVolume;

            while (!loaded) {
                Log.e("Load Status", "Loading...");
            }
        }

        public void onStart()   {
            super.onStart();
            while(soundPool.play(readysetgoSound, volume, volume, 1, 0, 1f) == 0)   {}
        }
... 
```

我遇到的问题是检查我的声音文件何时加载。在该`onCreate`方法中，请注意最后一个 while 循环。从理论上讲，据我了解，一旦加载了声音，代码就应该继续运行。但是，应用程序永远不会离开 while 循环，并且会一直不断地迭代它。我相信我可能会误解`onLoadCompleteListener`for`SoundPool`并错误地实施它。我想确保在`onCreate`完全加载所有五个声音之前，我的应用程序不会离开该方法。

我发现确保我想要的声音仅在加载后才播放的唯一方法是使用`onStart`方法中显示的 while 循环。在加载之前，该`play`方法始终返回零。但是，我不喜欢这种方法，因为每次我想播放声音时都必须使用它。可能效率也很低。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:12:37.647

我决定使用 MediaPlayer。以使用更多资源为代价，实现的相对容易性和控制播放的方法更广泛，这保证了这种转变。

以下是我的实现的简要概述：

```
MediaPlayer mediaPlayer = MediaPlayer.create(this, R.raw.readysetgo);
...
mediaPlayer.start();
while (mediaPlayer.isPlaying()) {} //wait until finished to move on
... 
```

# php - 为过去 30 天创建表格是否有效还是有更好的方法？

> ID：14300294
> 
> 赞同：0
> 
> 时间：2013-01-13T03:09:10.147
> 
> 标签：php, mysql

基本上我有一个用户可以上传和共享文件的网站。我希望这样用户可以跟踪过去 30 天内的下载量，并能够单独查看这 30 天中的每一天。

我正在考虑创建一个包含 31 列的表，其中 1 列是 id，其余的是 day1、day2、day3 等...每天更新此表，将 1 天的下载量移至前一天。

我的问题是这会有效还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T03:15:05.257

你最好有一个链接到你的文件表的下载表。每次下载文件时，下载表都会创建一条记录。

```
id
file_id
ip_address
user_agent
created 
```

等等

然后编写一个查询来确定一天发生了多少下载将是一件很容易的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T03:11:53.823

为了准确确定符合您标准的经过天数，我建议您确定当前日期与提交记录日期之间的差异。然后，使用此方法将允许您确定应该包含哪些内容和不应该包含哪些内容，而无需复杂的列结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T03:17:08.807

这不会特别有效。我希望更好的方法是有一张桌子：

```
UniqueID
FileID
DownloadTimeStamp 
```

并连续记录每次下载。通过适当的索引（FileID、DownloadTimeStamp），可以进行动态分析。

根据您每天的意思（在某些全球时间，如 UTC，或在用户的时区），您可以将这些汇总到：

```
FileID
Day
Count 
```

如果这似乎是一个性能问题，请减少分析的工作量。

# css - 较少未定义的方法错误

> ID：14300298
> 
> 赞同：2
> 
> 时间：2013-01-13T03:09:25.913
> 
> 标签：css, less

我有以下较少的编译错误。我的少低于不确定是什么原因造成的。

```
undefined_methodError: error evaluating function `darken`: Object #<Object> has no method 'toHSL' in /Users/anderskitson/Sites/mrskitson.ca/wp-content/themes/wordpress-bootstrap/library/less/variables.less:164:34
163 @navbarBackground:                "../images/nav.png";
164 @navbarBorder:                    darken(@navbarBackground, 12%);
165

(This action was triggered by a change to navbar.less) 
```

少文件

```
@navbarBackground: "../images/nav.png";
background: url("{@navbarBackground}"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T03:38:44.433

来自[精美手册](http://lesscss.org/functions/#color-operations-darken)：

> **变暗**
> 
> 将颜色的亮度降低绝对量。
> 
> 参数：
> 
> *   `color`: 颜色对象。
> *   `amount`：百分比 0-100%。
> 
> 回报：`color`

该`darken`函数需要颜色，但您`@navbarBackground`是背景图像的 URL。您收到投诉是`toHSL`因为 LESS 试图将颜色转换为 HSL 格式以使变暗计算更容易。

我不知道通过 LESS 使图像变暗的任何方法，您可能需要手动使图像变暗并根据需要在它们之间切换。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-04-03T13:13:03.453

您缺少一个`@`in darken 方法，即

```
@navbarBorder:darken(@navbarBackground, 12%); 
```

# php - 使用 PHP 编辑 XML。只有第一次有效，为什么？

> ID：14300300
> 
> 赞同：0
> 
> 时间：2013-01-13T03:10:44.290
> 
> 标签：php, xml

所以我的问题是，当我用一些 PHP 行编辑 XML 文件（如下）时，第一次一切正常，然后它会删除错误行并在错误的位置创建新行。

这里是用于删除行的 PHP 脚本：

```
<?php
session_start(); 

// The file
$filePath = '/....../test/test.xml';

// Grab file into an array, by lines
$fileArr = file($filePath);

// Remove desired line
unset($fileArr[7]); // $fileArr[15] == line #16
unset($fileArr[16]); // idem
unset($fileArr[25]); // idem

//Put back with PHP5
file_put_contents($filePath, implode('', $fileArr ));

session_destroy(); 
?> 
```

这里是写新行的 PHP 脚本

```
<?php
session_start(); 

// The file
$filePath = '/....../test/test.xml';

// Grab file into an array, by lines
$fileArr = file($filePath);

//Change
$etichettaasse = "\t\t\t\t<string>\t14 gen</string>\n\r";
$medianord =  "\t\t\t\t<number>\t280\t</number>\n\r";
$mediasud =  "\t\t\t\t<number>\t280\t</number>\n\r";

// Replace line
$fileArr[11] = $etichettaasse;
$fileArr[19] = $medianord;
$fileArr[27] = $mediasud;

// Implode and save
file_put_contents($filePath, implode('', $fileArr ));

session_destroy(); 
?> 
```

这里是**原始**XML：

```
<chart>
<axis_category color='ffffff' skip='0' size='12' alpha='80' />
<axis_value color='ffffff' skip='10' size='12' show_min='false' min="80" max="130"  />
<chart_border top_thickness='1' bottom_thickness='1' left_thickness='1' right_thickness='1' />              
<chart_data>
    <row>
        <null/>
            <string>    3 dic</string>
            <string>    10 dic</string>
            <string>    17 dic</string>
            <string>    24 dic</string>
            <string>    31 dic</string>

    </row>
    <row>
        <string>Media Nord</string>
            <number>    102.72  </number>
            <number>    101.60  </number>
            <number>    101.85  </number>
            <number>    101.84  </number>
            <number>    101.84  </number>

    </row>
    <row>
        <string>Media Sud</string>
            <number>    102.28  </number>
            <number>    101.24  </number>
            <number>    101.70  </number>
            <number>    101.88  </number>
            <number>    101.88  </number>

    </row>
</chart_data>
</chart> 
```

第一轮PHP脚本后，按要求更新：

```
<chart>
<axis_category color='ffffff' skip='0' size='12' alpha='80' />
<axis_value color='ffffff' skip='10' size='12' show_min='false' min="80" max="130"  />
<chart_border top_thickness='1' bottom_thickness='1' left_thickness='1' right_thickness='1' />              
<chart_data>
    <row>
        <null/>
            <string>    10 dic</string>
            <string>    17 dic</string>
            <string>    24 dic</string>
            <string>    31 dic</string>
            <string>    14 gen</string>

    </row>
    <row>
        <string>Media Nord</string>
            <number>    101.60  </number>
            <number>    101.85  </number>
            <number>    101.84  </number>
            <number>    101.84  </number>
            <number>    280 </number>

    </row>
    <row>
        <string>Media Sud</string>
            <number>    101.24  </number>
            <number>    101.70  </number>
            <number>    101.88  </number>
            <number>    101.88  </number>
            <number>    280 </number>

    </row>
</chart_data> 
```

PHP脚本第二轮之后：

```
<chart>
<axis_category color='ffffff' skip='0' size='12' alpha='80' />
<axis_value color='ffffff' skip='10' size='12' show_min='false' min="80" max="130"  />
<chart_border top_thickness='1' bottom_thickness='1' left_thickness='1' right_thickness='1' />              
<chart_data>
    <row>
        <null/>
            <string>    17 dic</string>
            <string>    24 dic</string>
            <string>    14 gen</string>
            <string>    14 gen</string>

    </row>
    <row>
        <string>Media Nord</string>
            <number>    101.60  </number>
            <number>    101.84  </number>
            <number>    280 </number>

            <number>    280 </number>

    <row>
        <string>Media Sud</string>
            <number>    101.24  </number>
            <number>    101.70  </number>
            <number>    280 </number>

    </row>
            <number>    280 </number> 
```

如果我只能拥有一个 PHP 文件而不是 2 个，我也会很高兴，但我不知道该怎么做。

这是修改此 XML 文件的最佳方法，还是有其他方法？

请注意，用户将写入 HTML 的新行。

我有这个“开始”脚本用于删除我要删除的内容。

你怎么看呢？

```
<?php
$file = '/...../test.xml';

$fp = fopen(file,"w"); // open it for WRITING ("w")

if (flock($fp, LOCK_EX)) {

    //do actions here
    $xml = file_get_contents($file);
    $sxe = simplexml_load_string($xml);

    echo '<pre>';

    // "delete the 1th string of row 1, etc."
    unset($sxe->chart_data->row[0]->string[0]);
    unset($sxe->chart_data->row[1]->number[0]);
    unset($sxe->chart_data->row[2]->number[0]);

    $sxe->chart_data->row[0]->addChild('string', 'test');
    $sxe->chart_data->row[1]->addChild('number', '999');
    $sxe->chart_data->row[2]->addChild('number', '9999');

    file_put_contents($file, $sxe->asXML());

    // unlock the file
    flock($fp, LOCK_UN);

} else {

    // flock() returned false, no lock obtained
    print "Could not lock $file!\n";
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:59:27.177

问题是当您`unset()`是数组成员时，您会更改行号。这很容易证明：

```
$origfile = array(
    "line1\n",
    "line2\n",
    "line3\n",
);

unset($file[1]); // delete line 2

$round1file = implode('', $file); // "write the file" 
```

结果是*两行*文件，而不是*三行*文件！

```
line1
line3 
```

因此，当您再次读取它时，您的数组将如下所示：

```
$round1file = array("line1\n","line3\n"); 
```

如果你再次删除第 2 行，你显然会留下`array("line1\n")`

直接的解决方案是用空行*替换*该行，而不是*取消设置*数组成员，即`$fileArr[7] = "\n"`代替`unset($fileArr[7])`.

**但是，您正在做的事情完全是疯狂的。**这是一个 XML 文件，因此您需要使用 XML 库对其进行解析和编写，否则我保证您迟早*会得到无效的 XML ！*此外，**您不能安全地覆盖多个进程可能正在使用**的文件——您需要使用某种文件锁定或适当的数据库。

对于文件锁定，您可以使用如下一对函数：

```
function file_get_contents_locked($filename)
{
    $fp = fopen($filename, 'rb');
    if ($fp===FALSE) {
        throw new RuntimeException("Could not open file '{$filename}'");
    }
    if (flock($fp, LOCK_SH)) {
        $data = stream_get_contents($fp);
        flock($fp, LOCK_UN);
        fclose($fp);
        return $data;
    } else {
            fclose($fp);
        throw new RuntimeException("Could not acquire lock on file '{$filename}'");
    }
}

function file_put_contents_locked($filename, $data)
{
    return file_put_contents($filename, $data, LOCK_EX);
} 
```

或者，如果您在某种重命名是原子的 *nix 上，您可以写入临时文件并重命名旧文件，而不是使用锁定。（在这种情况下您不需要锁定，因为*只要您使用此方法*写入，文件就永远不会半读或半写。）

```
function write_atomic($fullfilename, $data) {
    $tmpname = tempnam(dirname($fullfilename), 'write_atomic-');
    if (FALSE!==file_put_contents($tmpname, $data)) {
        rename($tmpname, $fillfilename);
    }
    unlink($tmpname);
} 
```

对于 XML 操作，两个简单的选项是简单但功能较弱的[SimpleXML](http://php.net/manual/en/book.simplexml.php)和更复杂但功能更强大的[DOMDocument 。](http://php.net/manual/en/book.dom.php)（您也可以使用 XMLReader 和 XMLWriter，但它们更难使用且速度更慢——仅当您无法一次将整个 XML 文件放入内存时才需要它们。）

这是一个帮助您入门的示例。查看链接的文档以获取更多详细信息：

```
function delete_xml_stuff($filename)
{
    $xml = file_get_contents_locked($filename);
    $sxe = simplexml_load_string($xml);
    // e.g., "delete the 2th string of row 1"
    unset($sxe->chart_data->row[0]->string[1]);
    file_put_contents_locked($filename, $sxe->asXML());

    // if you have more complex criteria, use DOMDocument:

    $d = new DOMDocument();
    $d->loadXML($xml);
    $xp = new DOMXPath($d);
    $results = $xp->query('//chart_data/row[2]/*[3]');
    if ($results->length) {
        $row2column3 = $results->item(0);
        $row2column3->parentNode->removeChild($row2column3);
    }
    file_put_contents_locked($d->saveXML());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T03:32:16.773

在使用 xml 时，您应该考虑使用 DOMDocument/XPath 或 simplexml 之类的 xml 库。无论是否修复此错误，您都会达到一个地步，即按照您认为的方式处理 XML 会变得非常混乱。

例如查看[SimpleXML](http://de3.php.net/manual/de/simplexml.examples.php)和页面上的示例。

# minify - 什么是 Google Closure Compiler REST API 请求限制？

> ID：14300301
> 
> 赞同：5
> 
> 时间：2013-01-13T03:10:59.523
> 
> 标签：minify, google-closure-compiler

从 Closure Compiler API 执行太多请求，您会收到以下错误：

```
Error(22): Too many compiles performed recently.  Try again later. 
```

实际/当前限制是多少？是每小时限制吗？滚动窗口？

关于如何计算的任何文档？我能找到的唯一信息是在这个页面上（搜索“滥用”）：[https ://developers.google.com/closure/compiler/docs/gettingstarted_ui?hl=en](https://developers.google.com/closure/compiler/docs/gettingstarted_ui?hl=en)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T16:16:48.023

有每分钟/每小时/每天的上限。这目前没有记录，但我相信上限允许每分钟约 1 的持续速率。根据我的经验，当人们遇到这个问题时，他们会更喜欢命令行工具，或者像 Plovr 这样的本地编译服务器，或者是偶然碰到它（即他们没有意识到他们一直在访问网络）服务）。

# c# - 检索和解析网页

> ID：14300303
> 
> 赞同：0
> 
> 时间：2013-01-13T03:11:21.013
> 
> 标签：c#, .net, web

我需要帮助开始使用 C# .NET 解析 Web 数据。

我想创建一个自动应用

1.  去一个网站，
2.  使用表单身份验证输入我的登录凭据，
3.  转到某些页面，
4.  检索和解析数据，然后
5.  将数据保存到我的数据库中。

当然，这是假设该站点不公开任何 Web 服务。

我该如何开始？这种用例有什么技术术语吗？我敢肯定还有其他应用程序可以做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:08:35.323

我建议查看[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)。它允许检索网页和解析数据。您将不得不编写代码来“将数据保存到我的数据库中”。

# php - PHP 或 JavaScript 或 jQuery cookie 过期 5 分钟

> ID：14300305
> 
> 赞同：2
> 
> 时间：2013-01-13T03:11:28.527
> 
> 标签：php, javascript, jquery, cookies, setcookie

我将如何使用 PHP 将 cookie 设置为在 5 分钟内过期？我熟悉`setcookie()`，但不熟悉它的时间属性。一个解释会很好。

有人可以指出我正确的方向（或包含示例代码）吗？

非常感谢。:)

（PS 我也不介意 jQuery 或 JavaScript 中的解决方案。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T03:13:30.887

`setcookie()`将过期时间设置为 time() + (60 * 5) 60 = seconds。5 = 多少分钟。

```
setcookie($name, $value, time() + (60 * 5), $path, $domain) 
```

# android - 在 Android 中，如何访问清单文件中未定义的视图？

> ID：14300306
> 
> 赞同：0
> 
> 时间：2013-01-13T03:11:31.617
> 
> 标签：android, manifest, findviewbyid

我的 android 应用程序使用单个 Activity 来创建一个未在清单中定义的 SurfaceView，并且我的所有 UI 元素都是自定义的。现在我正在尝试进行异步 HTTP 调用，但我无法访问我的应用程序的任何类。我看到的异步 http 调用的每个示例都如下所示：

```
class RequestTask extends AsyncTask<String, String, String>{

    @Override
    protected String doInBackground(String... uri) {
        // Code to make http call
        return responseString;
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        TextView txt = (TextView) findViewById(R.id.output);
        // format the result and write it to the TextView object
    }
} 
```

在该示例中，由于 RequestTask 无权访问任何应用程序对象，因此您可以使用 findViewByID 来获取它们。我不明白的是，如果我的清单中没有定义任何视图，我该如何访问我的应用程序的对象？我的清单中唯一的东西是活动：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.blah.blah.MyActivity"
        android:label="@string/app_name" >
        android:configChanges="keyboardHidden|orientation" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我这样做是为了简单/懒惰，到目前为止效果很好。有没有办法在不使用 findViewById 的情况下访问我的应用程序（活动或其中定义的视图或我实例化的其他类），或者我是否需要在清单中定义我的 SurfaceView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:20:16.603

向任务添加构造函数。在构造函数中传入它需要访问的视图。将其保存到任务的类变量中。

如果您需要做很多，请传入活动，并在活动上调用 findViewById。请记住在 onPostExec 结束时取消活动，以避免泄漏活动的风险。

# php - Codeigniter 无法加载库类

> ID：14300311
> 
> 赞同：3
> 
> 时间：2013-01-13T03:12:09.517
> 
> 标签：php, codeigniter

我有一个名为的库文件`myMenu.php`

```
<?php
class myMenu{
    function show_menu()
    {
        $obj = & get_instance();
        $obj->load->helper('url');

        $menu = "<ul>";

        $menu .= "<li>";
        $menu .= anchor('books/index','List of books');
        $menu .= "</li>";

        $menu .= "<li>";
        $menu .= anchor('books/input','Books entry');
        $menu .= "</li>";

        $menu .= "</ul>";

        return $menu;
    }
} 
```

现在我在我的控制器中加载了这个库`books.php`

```
function index()
    {
        $this->load->library('myMenu');
        $menu = new myMenu;
        $data['menu'] = $menu->show_menu();
        $this->load->view('main_view',$data);
    } 
```

但是页面显示错误`An error occurred : Unable to load the requested class: mymenu`。为什么此错误将类名显示为 `mymenu`（全部小写），其中我`myMenu`在控制器中编写

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-13T03:23:58.150

两个问题：

1）您的命名约定是错误的。

在 CodeIgniter 中，库必须以大写字母开头。类名和文件名都必须以大写字母开头，并且必须匹配。请参阅下面的文档。 [https://www.codeigniter.com/user_guide/general/creating_libraries.html](https://www.codeigniter.com/user_guide/general/creating_libraries.html)

2）你不应该实例化 myMenu `new`。访问您加载的库时，这几乎是通常的方式：

```
 $this->load->library('mymenu'); // when calling the loader, the case doesn't matter
    $data['menu'] = $this->mymenu->show_menu(); //'mymenu' is the lowercase of the class name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T03:13:46.050

类名应大写。`class MyMenu`

# wordpress - 如何在 WordPress 中为每个帖子设置标题、META 和关键字标签？

> ID：14300312
> 
> 赞同：0
> 
> 时间：2013-01-13T03:12:09.763
> 
> 标签：wordpress

我想在创建新帖子时为每个帖子设置标题、关键字、元标记。

有什么简单的插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:15:22.847

多合一 SEO Pack 包含您正在寻找的一切： [http ://wordpress.org/extend/plugins/all-in-one-seo-pack/](http://wordpress.org/extend/plugins/all-in-one-seo-pack/)

# ruby-on-rails - Rails 和 Ajax 替换 div 错误的内容

> ID：14300315
> 
> 赞同：0
> 
> 时间：2013-01-13T03:12:49.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

有问题，我尝试用一​​个部分替换我的 div #adm_content，我如何发表评论但 ajax 没有响应，我使用远程 true 替换，请参阅链接：

```
 <li><%= link_to "Editar perfil", edit_user_path(current_user), :remote => true %> 
```

我创建了edit.js.erb，是这样的：

```
$("#adm_content").html("<%= j render :partial =>'users/edit' %>"); 
```

我是我的 user_controller，我将响应放入 js 中，请参阅：

```
respond_to :js

  def edit
    @user = current_user
    respond_with @user
  end

  def update
    @user = current_user
    if @user.update_attributes(params[:user])
      respond_with @user
    else
      redirect_to "edit",:notice=>"Falha ao atualizar informações !"
    end
  end 
```

请，当我点击链接时，div没有改变，请问有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:50:38.570

我使用 JQuery 来处理 Rails 中的 Ajax 请求。如果您在 rails 应用程序中有 JQuery，则可以执行此操作。

看法：

```
<li><%= link_to "Editar perfil", edit_user_path(current_user), :id => "edit_profile" %>

 <script>
   $(function(){
     $("#edit_profile").click(function(){
       url = $(this).href
       $.get(url, function(data, status){
          alert(data)
       })
     })
   })
 </script> 
```

控制器：

```
 def edit
   @user = current_user
   respond_with @user # or use render "edit"
 end 
```

# android - 两部安卓手机之间的安卓套接字文件传输

> ID：14300317
> 
> 赞同：0
> 
> 时间：2013-01-13T03:12:53.437
> 
> 标签：android, file-io

所以我试图创建一个 android 程序，将文件从一部 android 手机传输到另一部。当单击发送按钮时，我放置了要调用的发送和接收方法，但它似乎没有将文件发送到目的地。（目前用一部手机测试它）下面是代码：任何帮助将不胜感激

```
 import java.io.BufferedInputStream;
    import java.io.BufferedOutputStream;
    import java.io.File;
    import java.io.FileInputStream;
    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.ObjectOutputStream;
    import java.io.OutputStream;
    import java.net.ServerSocket;
    import java.net.Socket;
    import java.net.UnknownHostException;
    import android.app.Activity;
    import android.content.Intent;
    import android.database.Cursor;
    import android.net.Uri;
    import android.os.Bundle;
    import android.provider.MediaStore;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.ImageView;
    import android.widget.TextView;
    import java.io.DataOutputStream; 

    public class MainActivity extends Activity {
    /** Called when the activity is first created. */

    private static final int SELECT_PICTURE = 1;

    private String selectedImagePath;
    private ImageView img;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        System.out.println("34");
        img = (ImageView) findViewById(R.id.ivPic);
        System.out.println("36");
        ((Button) findViewById(R.id.bBrowse))
                .setOnClickListener(new OnClickListener() {
                    public void onClick(View arg0) {
                        System.out.println("40");
                        Intent intent = new Intent();
                        intent.setType("image/*");
                        intent.setAction(Intent.ACTION_GET_CONTENT);
                        startActivityForResult(
                                Intent.createChooser(intent, "Select Picture"),
                                SELECT_PICTURE);
                        System.out.println("47");
                    }
                });
        ;
        System.out.println("51");
        Button send = (Button) findViewById(R.id.bSend);
        final TextView status = (TextView) findViewById(R.id.tvStatus);

        send.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Socket sock;
                try {
                    sock = new Socket("10.0.0.16", 8080); //IP
                    System.out.println("Connecting...");

                     // sendfile
                          File myFile = new File (selectedImagePath); 
                          byte [] mybytearray  = new byte [(int)myFile.length()];
                          FileInputStream fis = new FileInputStream(myFile);
                          BufferedInputStream bis = new BufferedInputStream(fis);
                          bis.read(mybytearray,0,mybytearray.length);
                          OutputStream os = sock.getOutputStream();
                          System.out.println("Sending...");
                          os.write(mybytearray,0,mybytearray.length);
                          os.flush();

                        sock.close();

                        int filesize=65383; // filesize temporary hardcoded

                        long start = System.currentTimeMillis();
                        int bytesRead;
                        int current = 0;

                        // create socket
                        ServerSocket servsock = new ServerSocket(8080);
                        while (true) {
                          System.out.println("Waiting...");

                          Socket sock2 = servsock.accept();
                          System.out.println("Accepted connection : " + sock2);

                       // receive file
                            byte [] mybytearray2  = new byte [filesize];
                            InputStream is = sock2.getInputStream();
                            FileOutputStream fos = new FileOutputStream("/storage/sdcard0/Pictures/Screenshots/IMG-20130112-WA0011.jpeg"); // destination path and name of file
                            //FileOutputStream fos = new FileOutputStream("/storage/sdcard0/Pictures/Screenshots/");
                            BufferedOutputStream bos = new BufferedOutputStream(fos);
                            bytesRead = is.read(mybytearray2,0,mybytearray2.length);
                            current = bytesRead;

                            do {
                               bytesRead =
                                  is.read(mybytearray2, current, (mybytearray2.length-current));
                               if(bytesRead >= 0) current += bytesRead;
                            } while(bytesRead > -1);

                            bos.write(mybytearray2, 0 , current);
                            bos.flush();
                            long end = System.currentTimeMillis();
                            System.out.println(end-start);
                            bos.close();

                          sock2.close();
                        }

                } catch (UnknownHostException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });
    }
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE) {
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);
                TextView path = (TextView) findViewById(R.id.tvPath);
                path.setText("Image Path : " + selectedImagePath);
                img.setImageURI(selectedImageUri);
            }
        }
    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }
    }

    <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvStatus"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <TextView
        android:id="@+id/tvPath"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Path: " />

    <Button
        android:id="@+id/bBrowse"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Files Available on  Your Phone to Send" >
    </Button>

    <Button
        android:id="@+id/bSend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Send Selected File" />

    <ImageView
        android:id="@+id/ivPic"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </ImageView>

</LinearLayout> 
```

权限：

```
 <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"> </uses-permission> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:23:53.807

我认为您的应用程序将被阻止

```
sock = new Socket("10.0.0.16", 8080); //IP
System.out.println("Connecting..."); 
```

因为服务器还没有设置。我对吗？“正在连接...”是否已打印？

# sql - 带有 where 条件的外连接

> ID：14300320
> 
> 赞同：2
> 
> 时间：2013-01-13T03:14:14.120
> 
> 标签：sql, database, ms-access, database-design

我试图获取所有可用的密钥，这意味着已经返回的密钥（return_date 不为空），密钥没有丢失（lost_key = false），并且之前从未租用过密钥（id 为空）。但是，当我运行它时，我得到 0 个记录。如果我删除 id 条件，我只会得到之前租用的密钥，并且所有不在 keyActivity 表中的密钥都将被忽略。有谁知道我做错了什么？

```
SELECT a.key_id, a.drawer_num
FROM 
    keys AS a 
    left outer JOIN keyActivity AS b 
        ON a.key_id = b.key_id
WHERE 
    return_date is not null 
    and lost_key =false
    and id is null; 
```

![在此处输入图像描述](../Images/a7b5521e55c6d9ba042de9936da576fa.png)

**使用的解决方案：**

```
SELECT a.key_id, a.drawer_num
FROM keys AS a LEFT JOIN keyActivity AS b ON a.key_id = b.key_id
WHERE (b.return_date is not null 
and b.lost_key =false) 
OR b.id is null; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:21:01.083

`id`可能是两个表中的一个字段，如果是这样，您的条件`id is null`将被错误地解释为`id`to `keys`be `NULL`，从而导致一个空的结果集。

如果你用它的全名来称呼它，它应该可以工作，即`b.id`因为你想排除任何以前`keyActivity`的 .

但是，我也相信您希望将前面的条件用 和 连接起来，`AND`然后用括号连接最后一个条件，`OR`因为只要返回了密钥，以前的密钥活动就可以了。

```
SELECT * FROM keys AS a LEFT OUTER JOIN keyActivity AS b ON a.key_id = b.key_id
  WHERE (b.return_date IS NOT NULL OR b.id IS NULL) AND a.lost_key = false; 
```

**编辑**：我重新安排了条件，以捕捉*店员*在分发钥匙之前丢失钥匙的情况。

# python - 如果用户尝试了一个选项，但该选项不正确，请返回某个点并重试 - Python

> ID：14300321
> 
> 赞同：2
> 
> 时间：2013-01-13T03:14:23.553
> 
> 标签：python, python-3.x

我正在为一个学校项目制作一个测验游戏，我想制作它，以便当用户输入无效命令时，它会返回并尝试输入再次转到该菜单并显示完全相同的输入框并尝试代码再次。我将在我希望发生这种情况的地方发布一个部分。

```
#---->TO HERE
if userinput == str("help"):
    print ("This is the help menu")
    print ("This is how you play")
else:
    print ("Invalid Command")
#This is where I want the user to go back and try entering a command again to get the same code to run through again. 
#FROM HERE <---- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T03:16:55.737

```
while True:
    userinput = input()
    if userinput == 'help':
        print('This is the help menu')
        print('This is how you play')
        break
    else:
        print('Invalid command') 
```

`while`循环用于此类情况。该`break`语句允许您“跳出”`while`或`for`循环。除非遇到语句`while True`，否则循环将永远循环。`break`

还有一个`continue`语句允许您跳过循环的其余部分并回到开头，但这里没有必要使用它。

请参阅[文档](http://docs.python.org/3.3/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)以进一步阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T03:19:59.070

我不喜欢`break`s 的无限循环，所以这里有一些我更喜欢的东西：

```
validCommands = ['help']
userInput = None
while userInput not in validCommands:
    userInput = input("enter a command: ").strip()
handleInput(userInput)

def handleInput(userInput):
    responses = {'help':['This is the help menu', 'This is how you play']
                }
    print('\n'.join(responses[userInput])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T05:30:54.377

```
questions = {
    'quiz_question_1': quiz_question_1,
    'quiz_question_2': quiz_question_2
}

def runner(map, start):
    next = start

    while True:
    questions = map[next]
    next = questions()

# whatever room you have set here will be the first one to appear
runner(questions, 'quiz_question_1') 

def quiz_question_1():
 a = raw_input(">")

 if a == "correct answer"
  return "quiz_question_2"

 if a == "incorrect answer"
  return "quiz_question_1" 
```

您可以在波浪形括号中添加更多“房间”。只需确保最后一个房间没有逗号，并且它们按照它们出现在代码中的顺序排列。

# c# - 有效读取单个 DataRow

> ID：14300324
> 
> 赞同：2
> 
> 时间：2013-01-13T03:14:32.517
> 
> 标签：c#, asp.net, sql-server, c#-4.0

我搜索并找不到`DataRow`使用`SqlDataReader`.

所以我想出了这个解决方案，但我想知道它是否是阅读单曲的最佳方式`DataRow`。

```
public static DataRow db_Select_DataRow(string strQuery)
{
    DataRow drw = null;
    if (strQuery.Length < 5)
        return drw;
    try
    {
        using (SqlConnection connection = new SqlConnection(srConnectionString))
        {
            connection.Open();
            using (SqlDataAdapter DA = new SqlDataAdapter(strQuery, connection))
            {
                using (DataTable drTemp = new DataTable())
                {
                    DA.Fill(0, 1, drTemp);
                    if (drTemp.Rows.Count > 0)
                        drw = drTemp.Rows[0];
                }
            }
        }
        return drw;
    }
    catch
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:09:22.740

我可能是错的，但我倾向于认为服务器上的网络往返和相关查询可能比您可能在客户端代码中使用的任何方法长一个数量级......您需要以这种方式访问​​单行的具体原因？

# eclipse-rcp - 如何在基于 GMF 的编辑器中突出显示节点？

> ID：14300332
> 
> 赞同：1
> 
> 时间：2013-01-13T03:16:20.863
> 
> 标签：eclipse-rcp, eclipse-emf, eclipse-pde, eclipse-gef, eclipse-gmf

我正在我的 GMF 编辑器中实现搜索功能。所以我打算做的是利用 EMF 搜索插件在 EMF 对象中进行搜索。但是当我点击搜索结果时，我将打开预先选择了节点的图表。

有没有一种方法可以遍历基于 GMF 的图表中的所有节点并根据某些参数突出显示一个节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:24:58.540

我想出了如何做到这一点。在此论坛帖子中找到了解决方案 -

[http://www.eclipse.org/forums/index.php/m/734758/](http://www.eclipse.org/forums/index.php/m/734758/)

**引用**

> 我为 YAKINDU 状态图工具 2.0 版做了类似的事情。它是一个状态图工具，您可以在其中执行状态图模型，然后在图表编辑器中突出显示活动状态。（见 [http://muelder.blogspot.com/2011/09/new-features-in-sct-2-milestone-5.html](http://muelder.blogspot.com/2011/09/new-features-in-sct-2-milestone-5.html)）的截图。
> 
> 从技术上讲，所有突出显示的东西都封装在一个名为 HighlightingSupportAdapter 的类中。也许你想看看代码，它是开源的。它是一个通用的 HighlightingAdapter，可以应用于每个基于 GMF 的编辑器。语义元素以及高亮颜色和高亮时间被传递给适配器。也许这对您的用例来说是一个好的开始！

# mysql - mysql使用变量在sql脚本中存储数据库名称

> ID：14300336
> 
> 赞同：0
> 
> 时间：2013-01-13T03:16:48.727
> 
> 标签：mysql, variables

我有一个 sql 文件，用于将新记录添加到数据库中。它涉及大量重新格式化数据，因为目标的标准化程度远大于源。我可以像最初一样声明表名吗

```
srcdb = 'dump_130113';
targetdb = 'test'; 
```

然后像这样引用它们

```
select * from srcdb.tablename; 
```

我知道

```
use database_name; 
```

问题是这样做甚至需要多次来回切换。

# scala - List[_] 中的扩展函数缺少参数类型

> ID：14300345
> 
> 赞同：3
> 
> 时间：2013-01-13T03:19:16.940
> 
> 标签：scala

斯卡拉版本 2.10.0

我创建了一个这样的函数。

```
def rm(workingSet: List[_])(item: Any)(f:(List[_], Any) => List[_]) = f(workingSet, item) 
```

我收到以下错误：

```
scala> val data = List(1,2,3)
scala> rm(data)(1)((list, item)=>list filter (_ != item))
<console>:10: error: missing parameter type for expanded function ((x$1) => x$1.$bang$eq(item))
          rm(data)(1)((list, item)=>list filter (_ != item))
                                                 ^ 
```

有人可以解释这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:20:20.030

我可以编译您的示例的唯一方法是引入一个类型参数：

```
def rm[A](workingSet: List[A])(item: A)(f:(List[A], A) => List[A]) = f(workingSet, item) 
```

您使用存在主义和的任何特殊原因`Any`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:40:01.997

有时编译器无法推断类型，您必须帮助它。尝试“list.filter(_ != item)” - 使用“.” 符号通常可以解决问题。如果还不行，你可以随时执行“list filter { li: Int => li != item }”。FWIW，scala 2.10 REPL 似乎没有为我推断参数类型的问题。

# regex - 如何修复 mod_rewrite 正则表达式产生 500 和 404 错误

> ID：14300353
> 
> 赞同：1
> 
> 时间：2013-01-13T03:20:41.600
> 
> 标签：regex, .htaccess, get

我的 .htaccess 中有以下行

```
RewriteRule ^folder/(.*)$ /folder/?value=$1 [L] 
```

当我有任何东西时，这总是给我一个 500 内部错误`http://website.com/folder/value`。

如果我只是将其更改为

```
RewriteRule ^folder/(.*)\.html$ /folder/?value=$1 [L] 
```

它正确地将我发送到`http://website.com/folder/value.html`在 $_GET 中设置的 value.html。

我希望能够接受任何东西，例如 value、value.com、value-4、otheritem。

关于为什么我的正则表达式每次都是 500 Internal Server Error'ing 的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:39:07.257

您可能会收到 500 个错误，因为您的规则是循环的。您的规则的目标与模式本身匹配（`/folder/?value=value`匹配`^folder/(.*)$`，因为查询字符串在匹配之前被剥离）。尝试包括适用于规则的条件，例如：

```
RewriteCond %{REQUEST_FILENAME !-f
RewriteCond %{REQUEST_FILENAME !-d
RewriteRule ^folder/(.*)$ /folder/?value=$1 [L] 
```

或者：

```
RewriteCond %{REQUEST_URI} !^/folder/?$
RewriteRule ^folder/(.*)$ /folder/?value=$1 [L] 
```

但从技术上讲，@Suku 的建议应该可行：

```
RewriteRule ^folder/(.+)$ /folder/?value=$1 [L] 
```

在我的测试 apache 实例中，上述所有方法都在 while`RewriteRule ^folder/(.*)$ /folder/?value=$1 [L]`循环中工作（并返回 500）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:18:19.390

以下是此规则发生的情况：

```
RewriteRule ^folder/(.*)$ /folder/?value=$1 [L] 
```

*   *请求*的URL`/folder/test`与模式匹配并重写为`/folder/?value=test`
*   由于`[L]`标志而停止重写

但是，由于路径/文件名已更改（`/folder/test`成为`/folder/`）， mod_rewrite 将执行另一次迭代：

*   *重写*后的URL`/folder/?value=test`与模式匹配并重写为`/folder/?value=`
*   重复

如其他评论/答案中所述，更改`*`为`+`应该可以解决问题。**如果`/folder/`存在并包含`index.php`**，则需要额外的一行：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^folder/(.+)$ /folder/?value=$1 [L] 
```

发生的情况是，在重写之后，Apache 为现有目录提供默认文档，这会触发另一次重写迭代。该条件阻止 mod_rewrite 变`/folder/index.php?value=test`回`/folder/?value=index.php`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T06:05:21.180

您可以尝试这种将`/folder`和`value`（键“值”的值）都视为动态字符串的方法，而不管它们的格式如何。

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  .*/([^/]+)/([^/]+)/?   [NC]
RewriteRule .*       %1/?value=%2      [L] 
```

它在内部映射一个像这样的 URL：

`http://website.com/anyfolder/anyvalue`或者

`http://website.com/any/number/of/folders/anyfolder/anyvalue`

至：

`http://website.com/anyfolder/?value=anyvalue`

当然`/anyfolder`必须存在映射的URL，否则会出现404错误。

此规则集在真实服务器中进行了测试，没有出现任何问题。

# extjs - 自动建议在 sencha 中的实现

> ID：14300354
> 
> 赞同：0
> 
> 时间：2013-01-13T03:20:59.223
> 
> 标签：extjs, sencha-touch

你能告诉我如何在 sencha 中实现自动建议吗？我用谷歌搜索并找到了两个或三个解决方案。但是所有解决方案都自动建议使用 Web 服务，但是我有数据数组，来自这个数据（示例名称）我想使用autosuggest 中的这个数组。你能修改这个链接以便我可以使用它吗？

我找到了这些链接

[https://github.com/martintajur/sencha-touch-2-autocomplete-textfield](https://github.com/martintajur/sencha-touch-2-autocomplete-textfield)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:54:15.843

[`TypeAhead`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-cfg-typeAhead)是内置的 ExtJS 组合框。您可以隐藏触发器，它看起来像一个带有自动建议的文本框。
查看[此页面](http://skirtlesden.com/articles/extjs-comboboxes-part-1)以获取有关如何自定义组合框的好教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T09:32:35.833

看看我的博客，可能对你有帮助。[Sencha touch 2 自动完成。](http://novasys.in/blogs/2013/09/05/setting-up-autocompletion-in-sencha-touch-2-with-sublimetext-2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T08:09:04.033

看看这个例子“自定义搜索字段” [http://dev.sencha.com/deploy/ext-4.0.0/examples/form/forum-search.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/form/forum-search.html)

# html - CSS背景图像不会显示

> ID：14300358
> 
> 赞同：0
> 
> 时间：2013-01-13T03:22:08.963
> 
> 标签：html, css, hover, background-image

我的 CSS 需要一个我想在 a:hover 上更改的背景图像。该类在字体颜色更改时工作正常，但我无法让我的图像在任何地方显示。

```
<ul class="qualities_cycle">
<a href="http://spielconsulting.com/qualities/transition/" class="cyclehover">
<li class="grid_4"> 
   <div class="title-wrap">
          <h3>Partnership Transition</h3>
       </div>
   <h5>Lorem ipsum dolor sit amet consec</h5>
       Seven out of ten Associateships fail - a devastating statistic. Spiel Consulting, however, sees tremendous success with Associateships...
</li>
</a>
</ul> 
```

这是CSS

```
.qualities_cycle {
width:100%;
overflow:hidden;
margin:0;
padding:0;
}
.qualities_cycle li {
    padding:0;
    background:none;
    border:none;
    line-height:22px;
    }
    .qualities_cycle li .title-wrap {
        position:relative;
        padding:0 90px 0 60px;
        }
        .qualities_cycle li .icon {
            position:absolute;
            left:0;
            top:0;
            }
        .qualities_cycle li .title-wrap h3 {
            font-weight:normal;
            }
        .qualities_cycle li .title-wrap h3 a {
            color:#0f0f0f;
            text-decoration:none;
            }
        .qualities_cycle li .title-wrap h3 a:hover {
            color:#80B34C;
            }
.grid_4 {
display:inline;
float: left;
position: relative;
padding: 19px 9px !important;
}

a.cyclehover {
color:#0F0F0F; 
background-image:url("http://spielconsulting.com/wp-content/uploads/2011/04/icon1.gif") no-repeat scroll 0 0 transparent;
-o-transition:color .2s ease-out, background 1s ease-in;
-ms-transition:color .2s ease-out, background 1s ease-in;
-moz-transition:color .2s ease-out, background 1s ease-in;
-webkit-transition:color .2s ease-out, background 1s ease-in;
/* ...and now override with proper CSS property */
transition:color .2s ease-out, background 1s ease-in;
}

a.cyclehover:hover {
color: #4C739B;
background-image:url("http://spielconsulting.com/wp-content/uploads/2011/04/icon2.gif") no-repeat scroll 0 0 transparent;
} 
```

一个jsfiddle链接在[这里](http://jsfiddle.net/LBzDu/1/)

我正在尝试输入三列，这就是我所拥有的，但图像没有显示： ![图片](../Images/f6d6d589c9d2dd5e881ec7c05a281c2c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T04:33:40.980

只需更改与**a.cyclehover相关的 CSS**

```
a.cyclehover {
color: #0F0F0F;
background-image: url("http://spielconsulting.com/wp-content/uploads/2011/04/icon1.gif");
display: block;
float: left;
background-repeat: repeat;
-o-transition: color .2s ease-out, background 1s ease-in;
-ms-transition: color .2s ease-out, background 1s ease-in;
-moz-transition: color .2s ease-out, background 1s ease-in;
-webkit-transition: color .2s ease-out, background 1s ease-in;
transition: color .2s ease-out, background 1s ease-in;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T03:57:24.637

快速浏览后，我在您的页面中发现了这些问题：

*   您正在使用`background-image`CSS 属性，就好像它是`background`.

*   `<div>`包含在. `<a>`_ `<div>`_ `overflow: hidden;`_`<div>`

*   您根本不应该将块元素（例如`<div>`）放在 a`<a>`中，这不是有效的 HTML。

*   您正在尝试将 CSS 过渡应用于`background`属性，但`background`不可动画化：[http ://www.w3.org/TR/css3-transitions/#animatable-properties](http://www.w3.org/TR/css3-transitions/#animatable-properties)

简而言之：重写页面，遵循一些好的文档并使用[W3C 标记验证器](http://validator.w3.org/ "W3C 标记验证服务")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T03:31:50.520

我没有深入研究您的代码，但是您以错误的方式使用了背景属性。

基本上，改变这个：

```
background-image:url("http://spielconsulting.com/wp-content/uploads/2011/04/icon1.gif") no-repeat scroll 0 0 transparent; 
```

对此：

```
background:url(http://spielconsulting.com/wp-content/uploads/2011/04/icon1.gif) no-repeat 0 0; 
```

检查它是否有效......如果是这样，如果确实有必要，您可以添加“滚动”属性。我什至不知道那个“透明”的东西是什么......默认情况下背景是透明的，所以它不应该是必要的。如果您需要应用另一种背景颜色，请在 url()...

顺便说一句，这就是你应该如何在 CSS 中“思考”背景速记（至少我是如何使用它们的）：

```
background: color url() repeat fixed left top; 
```

所以：

```
background: #000 url(imgs/logo.png) no-repeat scroll 0 0; 
```

在示例中，您可以使用透明而不是 #000 颜色，但同样，它是默认值。但是，如果您有另一个规则设置颜色并且您希望它是透明的，请使用它。

还要记住，背景只能应用于“块”元素。如果您的元素不是块元素，请将其设置为，例如： display: block; 或显示：内联块；为它设置一个宽度和一个高度，你应该很高兴。

# c++ - C++ 映射迭代器跳转元素

> ID：14300360
> 
> 赞同：2
> 
> 时间：2013-01-13T03:22:20.943
> 
> 标签：c++, map, insert, iterator

我对 std::map 结构有疑问：此代码片段可以正常工作：

```
map<string,int> mappa;
int main(int argc, char** argv) {
mappa["b"]=1;
mappa["a"]=2;
 for(std::map<string,int>::iterator it=mappa.begin();it!=mappa.end();++it )
{
    cout<<it->first<<"\n";     
} 
return 0;
} 
```

输出：

```
a
b 
```

但如果我这样做：

```
map<string,int> mappa; 
std::map<string,int> getList(){
return mappa;
}

int main(int argc, char** argv) {
mappa["b"]=1;
mappa["a"]=2;
for(std::map<string,int>::iterator it=getList().begin();it!=getList().end();++it )
 {
    cout<<it->first<<"\n";   
 } 
return 0;
} 
```

我的输出只是

```
b 
```

为什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T03:26:12.173

在 for 循环中，您从 mappa 的 2 个单独副本中获取 begin() 和 end()，因为 getList() 按值而不是引用返回。您需要更改 getList() 函数以通过引用返回。

按预期工作的代码：

```
#include <iostream>
#include <string>
#include <map>

using namespace std;

map<string,int> mappa; 

std::map<string,int>& getList() { // returning reference now
  return mappa;
}

int main(int argc, char** argv) {
  mappa["b"]=1;
  mappa["a"]=2;
  for(std::map<string,int>::iterator it=getList().begin();it!=getList().end();++it )
  {
    cout<<it->first<<"\n";   
  } 
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T03:28:23.737

您`getList`多次调用。每次它使用复制构造函数创建一个新地图。

你这样做：

```
std::map<string,int> myList = getList();
const std::map<string,int>::iterator myListEnd = myList.end();
for(std::map<string,int>::iterator myList.begin();it!=myListEnd;++it )
{ 
```

我假设您需要一份副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T03:28:54.447

getList() 返回 mappa 的副本。您需要更改它以返回参考：

```
std::map<string,int>& getList() 
```

甚至更好的 const 参考：

```
const std::map<string,int>& getList() 
```

在后一种情况下，您将需要使用 const_iterator 来迭代地图。

# c - Gwan 处理程序只接受文件请求

> ID：14300367
> 
> 赞同：0
> 
> 时间：2013-01-13T03:23:03.677
> 
> 标签：c, g-wan

使用下面的代码时，处理程序将无法识别非文件请求（例如，请求必须包含 www 文件夹中的文件）。对于所有其他请求， main 甚至都没有被调用，我不知道为什么会这样。

```
int init(int argc, char *argv[])

{
   printf("init\n");

   *(u32 *)get_env(argv, US_HANDLER_STATES) = (1L << HDL_AFTER_ACCEPT) | (1L << HDL_AFTER_READ) | (1L << HDL_BEFORE_WRITE);

   return 0;
}

void clean(int argc, char *argv[])
{
   printf("clean\n");
}

int main(int argc, char *argv[])
{
   printf("%s\n", (char *)get_env(argv, REQUEST));

   return 255;
} 
```

要求：`127.0.0.1/index.html`
打印：`GET /index.html`

要求：`127.0.0.1/favicon.ico`
打印：`GET /favicon.ico`

要求：`127.0.0.1/index`
打印：`N/A`

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:24:07.297

处理程序获得关于文件或其他方面的任何请求，无论是否有效。

您的处理程序不正确。由于您在进行解析*之前* 询问通知：`HTTP``HTML`

```
 *(u32*)get_env(argv, US_HANDLER_STATES) = 
      (1L << HDL_AFTER_ACCEPT) 
    | (1L << HDL_AFTER_READ) 
    | (1L << HDL_BEFORE_WRITE); 
```

...在显示它之前，您绝对应该检查它`REQUEST`是否可用`printf()`：

```
 const char *req = (char*)get_env(argv, REQUEST);
   printf("%s\n", req ? req : "not parsed yet"); 
```

您在上面发布的代码每次都会崩溃，因为 HTTP`REQUEST`值`NULL`在连接为 时为（尚不可用）`ACCEPTED`，或者请求为`READ`。

# windows - 如何从命令行 cmd windows gimp 运行 gmic

> ID：14300379
> 
> 赞同：0
> 
> 时间：2013-01-13T03:25:50.223
> 
> 标签：windows, windows-8, command-prompt, gimp, gmic

我在 Internet 上查找了几个小时，无法了解如何在命令提示符下执行命令，该命令对 gimp 文件执行某些操作，此外还可以使用 gmic 将过滤器应用于图像，我设法做到了这一切Image Magick，使用转换命令，它只是工作，但对于 gmic 我尝试使用 cmd

```
 gimp -b - 
```

如其网站文档所述： http: [//www.gimp.org/tutorials/Basic_Batch/](http://www.gimp.org/tutorials/Basic_Batch/)

但不，它弹出：

'gimp 不是内部或外部命令、可运行程序或批处理文件。

我是否在问一些非常愚蠢的问题，我真的不知道我做错了什么，也许我错过了一些步骤，错误给了我一个线索，就好像我必须为 gimp 命令创建一个文件才能工作，而不是成功在 Windows 中安装它。

顺便说一句，我在 Windows 8 64 位上。企业版。

非常感谢您的帮助。

Gimp 安装 2.8.2 gmic 安装 1.5.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:29:52.457

如果您的目标只是在图像上应用 G'MIC 效果，为什么不使用 G'MIC 项目的命令行界面“gmic”，而不是尝试通过 GIMP 插件来实现呢？G'MIC 项目为他的工具提供了一个命令行界面'gmic'，所以我猜它应该不那么难使用+你不会有由于 GIMP 的限制（例如，8 位处理，因为 'gmic' 能够处理 16 位图像）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T03:41:42.700

命令行界面本身并不知道在哪里`gimp`。使用完整路径调用它，例如`C:\Program Files\Gimp\gimp.exe -b -`，或者将包含 gimp 的目录添加到您的`%PATH%`系统变量中。

# ios - 缓慢的 UIViewController 加载时间（缓慢的 ClientState 警告）

> ID：14300381
> 
> 赞同：7
> 
> 时间：2013-01-13T03:26:13.170
> 
> 标签：ios, uiviewcontroller, autolayout

自从我将旧应用程序转换为 iOS 6 后，我开始在控制台中收到以下消息。

`WARNING: Slow defaults access for key ClientState took 0.023656 seconds, tolerance is 0.020000`

除了将我的代码从 iOS 5 更新到 iOS 6 之外，我还切换到了自动布局。我已经运行了 Instruments/Time Profiler，而`rootViewController`我的 appDelegate 是问题所在。每次我切换视图控制器时，它都会占用大部分时间（无论我是否必须实例化视图控制器或重新使用已经存在的视图控制器）。

```
window.rootViewController = myViewController; 
```

我知道该方法表面上做了什么，但我不确定幕后会发生什么……什么会导致它现在变慢，我该怎么做才能加快速度？

**编辑：**我试过把我的故事板从自动布局中去掉，问题就消失了（当然我的 UI 布局一团糟）。所以显而易见的结论是，它是关于自动布局的。我可能在屏幕上组合了不到 70 个视图，以及布置它们所需的各种约束。我很难相信自动布局会慢得多（从关闭自动布局的 ~80ms 到打开自动布局的 ~1370ms）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:33:06.747

在屏幕上拥有 70 次观看听起来很多！我的建议是以某种方式**使其更简单：**

*   您真的需要同时查看所有 70 个视图吗？

*   检查是否所有视图都需要自动布局，尽可能将其删除

*   某些视图可以用图形代替吗？我使用了视图，例如阴影，可能是图像

您能否将storyBoard 拆分为几个较小的部分，例如用于登录、详细信息、编辑模式等的一个。部分缓慢可能来自系统必须处理（太大）大storyBoard。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:44:24.120

考虑创建一个带有 2 个视图控制器的新项目并测试切换速度。每个 iOS 应用程序都有一个窗口、一个根视图控制器和一个视图控制器。问题可能不像您希望的那样狭窄和明确。每个视图控制器加载什么？你检查过底层代码吗？应用程序委托是否对根视图控制器的初始化或更改做任何事情？

# xcode - 不能使用释放或自动释放。出现黄色警告：内存泄漏和未使用的变量

> ID：14300384
> 
> 赞同：0
> 
> 时间：2013-01-13T03:27:08.357
> 
> 标签：xcode, memory-leaks, warnings, release

我正在使用 Xcode 4.5.2。我似乎无法解决这个问题。旧的 xcode 工作正常。但他们强迫我删除自动释放和 numValue 释放。我不知道该怎么办。我永远被困在这里。我清理并分析它。我在初始化期间存储到“numValue”的值永远不会被读取。

```
 NSString *numValue = [[NSString alloc] initWithFormat:@"%d", count1o++];    
        display.text = [display.text stringByAppendingString:digit];

        //[numValue release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:50:52.513

我怀疑你想要：

```
NSString *numValue = [[NSString alloc] initWithFormat:@"%d", count1o++];    
display.text = [display.text stringByAppendingString:numValue]; 
```

替换`digit`为`numValue`。

这不是 Xcode 的版本，而是您现在正在使用 ARC（可能是无意的），并且保留/释放/自动释放是由编译器完成的，并且它们在代码中是不允许的。

# c# - 如何用 WCF 替换现有的 .Net 套接字服务器

> ID：14300389
> 
> 赞同：1
> 
> 时间：2013-01-13T03:28:59.383
> 
> 标签：c#, .net, wcf, sockets

我目前正在研究基于套接字的技术，其中我的客户端（C++）和服务器（.Net）使用基于套接字的通信来发送和接收数据，但现在我希望用 WCF 替换我现有的套接字服务器。在进行任何此类动作之前，我想完全澄清它

1）是否可以更换现有的插座，如果可以，我该怎么做。2) 服务器套接字应用程序在定义的 IP/端口侦听，客户端套接字应用程序仅向该 IP/端口发送请求，但在 WCF 的情况下，有完整的 URI，即 IP/端口它还包含 WCF 服务的名称，所以怎么做这。3）我需要使用哪种类型的绑定配置，如果它是基本的或 wshttp 不能，它将极大地影响我的应用程序的性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:52:26.537

在不了解您的应用程序的所有详细信息的情况下，这是一个相当难以回答的问题，因此我将尝试以与您所要求的顺序不同的顺序来回答这个问题。

2) WCF 支持[多种传输配置](http://msdn.microsoft.com/en-us/library/ms729350.aspx)。这些不限于 HTTP。例如，net.tcp 传输根本不使用 http，但它确实实现了一些您需要在客户端复制的复杂功能。例如[消息框架](http://msdn.microsoft.com/en-us/library/cc219293.aspx)。这将您的选择限制为基于标准的方法之一（除非您喜欢这样做）。

3) 是的，http 传输可能会比直接套接字通信慢。您需要准确分析 WCF 需要哪些功能以及需要哪些性能，因为有许多不同的配置选项会对此产生影响。

1）所以我想这是主要答案。是的，这是可能的，但您需要在客户端和服务器上进行更改。虽然您可以扩展 WCF 以支持现有的套接字消息格式，但这可能是一个困难且成本高昂的开发过程。因此，您可能希望使用 Web 服务（也称为 http 绑定之一）而不是 net.tcp、msmq 等来实现这一点。

请注意，WCF 实际上是非常可配置的，每一层都能够定义自定义传输、消息传递、安全等。因此，我建议您阅读[文档](http://msdn.microsoft.com/en-us/library/ms733103.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:06:00.310

当我们使用套接字编程时，我们是在非常低的水平上进行的，与套接字应用程序相比，wcf、Web 服务或远程处理都不能表现得很好。WCF 提供了很多功能，但是所有这些功能都基于绑定配置，并且与套接字应用程序相比，所有这些都处于非常高的水平，因此就性能而言，套接字应用程序将与 wcf 相比表现良好，如果这已经构建无需更换。

# ios - 集合视图单元格显示不显示

> ID：14300393
> 
> 赞同：0
> 
> 时间：2013-01-13T03:30:05.727
> 
> 标签：ios, uitableview, uicollectionviewcell

我有一个collectionview 控制器和一个collectionviewcell。对于 collectionviewcell，我有一个自定义类。我正在尝试设置 uiimage 并且它不起作用。

先感谢您！。

我试图设置图像的 collectionview 控制器中的方法。

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *cellIdentifier=@"Cell";

    CollectionVIewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];
    ;
    CollectionVIewCell *feederCell = (CollectionVIewCell*)[_availableFilters objectAtIndex:indexPath.row];

    cell.labelDisplay.text=feederCell.filterName;
    NSLog(@"selected =%@",cell.labelDisplay.text);
    if (feederCell.isSelected) {
        UIImageView *imageView=[[UIImageView alloc]init];
        //process string name
        NSString*filePath =[NSString stringWithFormat:@"%@.png",feederCell.filterName];
        NSArray* words = [filePath componentsSeparatedByCharactersInSet :[NSCharacterSet whitespaceCharacterSet]];
        filePath=[words componentsJoinedByString:@""];
        cell.FilePath=filePath;
        //image
        UIImage *image = [UIImage imageNamed:filePath];
        [imageView setFrame:CGRectMake(0, 0, image.size.width, image.size.height)];
        [imageView setImage:image];
        [cell setIconDisplay:imageView];//setting the image that won't set
    }else if(!feederCell.isSelected){
        UIImageView *imageView=[[UIImageView alloc]init];
        NSString*filePath =[NSString stringWithFormat:@"%@.png",feederCell.filterName];
        NSArray* words = [filePath componentsSeparatedByCharactersInSet :[NSCharacterSet whitespaceCharacterSet]];
        filePath=[words componentsJoinedByString:@""];
        UIImage *image = [UIImage imageNamed:filePath];
        [imageView setFrame:CGRectMake(0, 0, image.size.width, image.size.height)];
        [imageView setImage:image];
        [cell setIconDisplay:imageView];
    }

    return cell; 
```

.h 文件

```
//
//  CollectionVIewCell.h

#import <UIKit/UIKit.h>

@interface CollectionVIewCell : UICollectionViewCell
@property (strong, nonatomic) IBOutlet UIImageView *IconDisplay;
@property (strong, nonatomic) IBOutlet UILabel *labelDisplay;
@property (assign,nonatomic) BOOL isSelected;
@property (strong,nonatomic)NSString*textName;
@property(strong,nonatomic)NSString*FilePath;

@end 
```

.m 文件

```
//
//  CollectionVIewCell.m

#import "CollectionVIewCell.h"

@implementation CollectionVIewCell

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        _labelDisplay.text=_textName;
        _IconDisplay=[[UIImageView alloc]init];
    }
    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:47:38.177

您需要将 UIImageView 添加为子视图。否则它存在但不显示。

# javascript - 隐藏/更改/添加图像

> ID：14300395
> 
> 赞同：0
> 
> 时间：2013-01-13T03:30:38.400
> 
> 标签：javascript, html, css, image, src

我最终要做的是首先隐藏一个框和一个图像，然后根据其他功能的结果，然后取消隐藏框（通过给它一个背景颜色）和图像，并根据功能更改图像被称为。

下面的代码有两个问题：

*   首先是在执行时出现该框，但图像没有。
*   其次，当脚本的其余部分（它是一个计算器，因此会发生多次）第二次调用任一函数（第一次调用时不会引发错误）时，我会收到一个错误，就好像图像不再存在一样：

> “JavaScript 运行时错误：无法设置未定义或空引用的属性 'src'”

脚本：

```
function one(input) {
    document.getElementById("result").style.background = "lightgray";
    document.getElementById("result").style.color = "green";
    document.getElementById("icon").src = "tick.png";
    document.getElementById("icon").style.visibility = "visible";
}
function two(input) {
    document.getElementById("result").style.background = "lightgray";
    document.getElementById("result").style.color = "red";
    document.getElementById("icon").src = 'cross.png';
    document.getElementById("icon").style.visibility = "visible";
} 
```

HTML：

```
 <div id="result">
<img src="tick.png" id="icon" style="visibility:hidden">
</div> 
```

和 CSS（尽管怀疑是必要的）：

```
#result {

width: 820px;
height: 450px;
border-radius: 20px;
padding-top:25px;
padding-bottom: 25px;
color: green;
font-size:40pt;
text-align: center;
margin-top: 100px;
margin-right: 150px;
margin-left:420px;
}

#result img{

margin-top: 85px;
width:220px;
height: 190px;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:28:29.263

巴尔玛让我思考，所以谢谢你！

在调用函数的同时查看 DOM 后发现脚本的另一部分使用 .innerText 替换了 HTML 中的代码（仍然不明白为什么会这样做）所以第一次调用我的标签已经消失了因此尝试调用空引用。把它放在自己的 div 中解决了这个问题。

还在css中添加了一个设置为绝对的位置属性，并通过将图像重新显示到视图中来解决该问题。

感谢各位大侠的帮助，不胜感激！:)

# python - 在Python中将三角形区域从一张图片复制到另一张图片

> ID：14300396
> 
> 赞同：3
> 
> 时间：2013-01-13T03:30:52.783
> 
> 标签：python, image-manipulation

我正在尝试编写一个 python 函数，它将一个三角形区域从图片上的任何地方复制到一个新的空白图片。我可以将图片中的矩形区域复制到新的空白图片中，但我只是不知道如何复制三角形。这就是我所拥有的，但它只复制一个矩形区域。抱歉，如果它看起来凌乱或过于复杂，但我刚刚开始如何用 python 编写。

```
 def copyTriangle():
     file=pickAFile()
     oldPic=makePicture(file)
     newPic=makeEmptyPicture(getWidth(oldPic),getHeight(oldPic))
     xstart=getWidth(oldPic)/2
     ystart=getHeight(oldPic)/2
     for y in range(ystart,getHeight(oldPic)):
         for x in range(xstart,getWidth(oldPic)):
           oldPixel=getPixel(oldPic,x,y)
           colour=getColor(oldPixel)
           newPixel=getPixel(newPic,x,y)
           setColor(newPixel,colour) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-10T17:49:31.083

将三角形区域从一张照片复制到另一张照片的功能。

```
def selectTriangle(pic):
  w= getWidth (pic)
  h = getHeight(pic)
  newPic = makeEmptyPicture(w,h)
  x0=107#test point 0
  y0=44
  x1=52#test point 1
  y1=177
  x2=273 #test point 2
  y2=216
#(y-y0)/(y1-y0)=(x-x0)/(x1-x0)

  for y in range (0,h):
    for x in range (0, w):
#finding pixels within the plotted lines between eat set of points
      if (x>((y-y0)*(x1-x0)/(y1-y0)+x0) and x<((y-y0)*(x2-x0)/(y2-y0)+x0) and x>((y-y2)*(x1-x2)/(y1-y2)+x2)): 
        pxl = getPixel(pic, x, y)
        newPxl= getPixel(newPic,x,y)
        color = getColor(pxl)
        setColor (newPxl, color)

  return (newPic) 
```

![原始图像](../Images/c728e587344d4cd94ed76b879e43d1de.png) ![三角形](../Images/8000befe1740ef6f710448f9572a88cd.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T03:46:36.593

如果您愿意像示例中那样逐个像素地进行操作，则只需复制三角形的像素即可。大多数情况下，这取决于您要如何定义三角形。

最简单的三角形是使您的 x 范围（内循环）取决于您的 y 值（外循环），例如：

```
for y in range(ystart, ystart+getHeight(oldPic)):
    for x in range(xstart, xstart + int( getWidth(oldPic)*((y-ystart)/float(getHeight)): 
```

更一般地说，您仍然可以保留相同的 x 和 y 循环，然后将复制命令放在一个`if`块中，在那里您检查该点是否在您的三角形中。

除此之外，还有更有效的方法可以做到这一点，例如使用掩码等。

请注意，在这里我也将 y 范围更改为`range(ystart, ystart+getHeight(oldPic))`，我认为这可能是您想要的高度不依赖于起始位置。

# php - 从服务器响应接收额外信息

> ID：14300397
> 
> 赞同：1
> 
> 时间：2013-01-13T03:30:59.257
> 
> 标签：php, android, sql-server, server-response

嗨，我正在向位于服务器上的 php 文件发送用户名，以检查用户名是否存在于我的数据库中。如果是，我想发回只包含“False”的响应，否则它将发回“True”。

这是我的php代码：

```
<?php

$username = $_POST['username'];
$password = $_POST['passsword'];
$email = $_POST['email'];

mysql_connect(//server name, server_admin, server_password) or die(mysql_error());
mysql_select_db("a1754417_word") or die (mysql_error());

$result = mysql_query("SELECT username FROM Users WHERE username = '$username'");

if(mysql_num_rows($result) != 0){
  echo mysql_num_rows;
  echo "False"; 
}else{
  echo "True";
}
?> 
```

这是我从 Logcat 的输出

```
01-13 03:16:34.606: I/Response 'False'(791): True
01-13 03:16:34.606: I/Response 'False'(791): <!-- Hosting24 Analytics Code -->
01-13 03:16:34.606: I/Response 'False'(791): <script type="text/javascript" src="http://stats.hosting24.com/count.php"></script>
01-13 03:16:34.606: I/Response 'False'(791): <!-- End Of Analytics Code --> 
```

我的代码正确地发回“True”，但它也发送了额外的信息，为什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:44:40.407

看来，您的托管服务商已将服务器配置为附加一些分析内容。如果您无法在控制面板的某处禁用它，则可能需要切换到更有信誉的主机。您还可以尝试使用[header()](http://ch2.php.net/manual/en/function.header.php)修改标题以摆脱这种情况：

另外，看看这个问题：

[Webhoster 插入了一个 javascript，它破坏了我的代码如何删除它？](https://stackoverflow.com/q/2268868/1175253)

# javascript - 从选择下拉javascript中显示基于ID的隐藏元素

> ID：14300403
> 
> 赞同：5
> 
> 时间：2013-01-13T03:31:30.483
> 
> 标签：javascript, html

我知道这可能是问得最多的问题，但我已经搜索了网络并尝试了几个示例，但没有一个有效。这是我的问题。

首先，我无法控制 TR TD 结构，不能使用 DIV。

我需要能够根据选择下拉菜单值显示某些 TD。我有 4 个不同的 ID，我正在使用“to”、“to_field”、“from”、“from_field”。我显示的脚本不起作用。有人可以帮我吗？

示例：如果有人在下拉列表中选择“使用中”，那么我只想显示所有具有“from”和“from_field”的 elementID。如果有人选择了不同的值，那么我想改变它。

```
 <script type="text/javascript">
        function showstuff(element){
            document.getElementById("from").style.display = element=="in_use"?"visibility":"visible";
            document.getElementById("to").style.display = element=="in_use"?"visibility":"hidden";
            document.getElementById("from_field").style.display = element=="in_use"?"visibility":"visible";
            document.getElementById("to_field").style.display = element=="in_use"?"visibility":"hidden";

            document.getElementById("from").style.display = element=="relocated"?"visibility":"visible";
            document.getElementById("to").style.display = element=="relocated"?"visibility":"visible";
            document.getElementById("from_field").style.display = element=="relocated"?"visibility":"visible";
            document.getElementById("to_field").style.display = element=="relocated"?"visibility":"visible";
        }
        </script>
        <table>
            <tr>
                <td><h2>Add/Edit Parts</h2></td>
            </tr>
        </table>
        <form action="includes/inventory_parts.php" method="post" name="myform">
        <table cellpadding="10" style="border:solid 1px #000000">
            <tr>
                <td colspan="20"><h3>Add New Part</h3></td>
            </tr>
            <tr>
                <td style="font-weight:bold">Printer Man Part#</td>
                <td style="font-weight:bold">Part#</td>
                <td style="font-weight:bold">Title</td>
                <td style="font-weight:bold">Serial#</td>
                <td style="font-weight:bold">Status</td>
                <td id="from" style="font-weight:bold;visibility:hidden">From Printer Serial#</td>
                <td id="to" style="font-weight:bold;visibility:hidden;">To Printer Serial#</td>
                <td style="font-weight:bold">Submit</td>
            </tr>
            <tr>
                <td><input type="text" name="printer_man_part_number" /></td>
                <td><input type="text" name="part_number" /></td>
                <td><input type="text" name="title" /></td>
                <td><input type="text" name="this_part_serial_number" /></td>
                <td>
                <select name="status" onchange="showstuff(this.value);">
                    <option></option>
                    <option value="in_use">In Use</option>
                    <option value="relocated">Relocated</option>
                    <option value="disposed">Disposed</option>
                    <option value="selling">Selling</option>
                </select>
                </td>
                <td id="from_field"><input type="text" name="from" style="visibility:hidden" /></td>
                <td id="to_field"><input type="text" name="to" style="visibility:hidden" /></td>
                <td><input type="submit" name="submit" value="Add Part" /></td>
            </tr>
        </table>
        </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T04:04:40.307

```
 function showstuff(element) {
        // first hide everything
        document.getElementById("from").style.visibility = 'hidden';
        document.getElementById("to").style.visibility = 'hidden';
        document.getElementById("from_field").style.visibility = 'hidden';
        document.getElementById("to_field").style.visibility = 'hidden';
        var targets;
        // select the IDs that should be unhidden based on element
        switch (element) {
          case 'in_use': targets = ['from', 'from_field']; break;
          case 'relocated': targets = ['to', 'to_field']; break;
          ...
        }
        // now unhide the selected IDs.
        for (var i = 0; i < targets.length; i++) {
          document.getElementById(targets[i]).style.visibility = 'visible';
        }
    } 
```

# java - 如何在 JSP 错误页面中显示请求的 URL？

> ID：14300404
> 
> 赞同：4
> 
> 时间：2013-01-13T03:31:31.393
> 
> 标签：java, jsp, servlets, custom-error-pages

在错误页面中，我想显示用户请求的 URL。

在我的**web.xml**中：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                            http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
        id="WebApp_ID"
        version="3.0">

    <display-name>MyStuff</display-name>

    <error-page>
        <error-code>404</error-code>
        <location>/WEB-INF/error-404.jsp</location>
    </error-page>

</web-app> 
```

这将转发到**error-404.jsp**，这是该文件的内容：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Page Not found</title>
</head>
<body>
    <p align="center">
    <%
        out.println("Requested resource: " + request.getRequestURL()+ " not found");
    %>
</body>
</html> 
```

问题是`request.getRequestURL()`需要更改，但不知道要搜索什么的关键字。

当我启动浏览器时，`http://localhost:8080/MyStuff`我收到以下错误：

**`Requested resource: http://localhost:8080/MyStuff/WEB-INF/error-404.jsp not found`**

如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T03:56:08.543

这是一个简单的 JSP 错误页面示例，显示了错误代码和请求页面的 URL：

*404.jsp*：

```
<%@ page language="java" isErrorPage="true" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <title>Error page</title>
    <meta charset="utf-8">
</head>
<body>
    <button onclick="history.back()">Back to Previous Page</button>
    <h1>404 Page Not Found.</h1>
    <br />
    <p><b>Error code:</b> ${pageContext.errorData.statusCode}</p>
    <p><b>Request URI:</b> ${pageContext.request.scheme}://${header.host}${pageContext.errorData.requestURI}</p>
    <br />
</body>
</html> 
```

* * *

## 有用的阅读：

*   [JavaServer Pages Specification (JSR 245)](http://download.oracle.com/otndocs/jcp/jsp-2_3-mrel2-spec/)中的“ **JSP.1.4 错误处理**”部分。
*   [处理 JSP 页面错误](http://docs.oracle.com/javaee/5/tutorial/doc/bnahe.html#bnahi)（来自官方 Java EE 5 教程）

PS
强烈建议不要在 JSP 中使用 scriptlet。阅读[这篇文章](https://stackoverflow.com/a/3180202/814702)。

# ios - 当属性包含在块中时应用程序挂起

> ID：14300405
> 
> 赞同：0
> 
> 时间：2013-01-13T03:31:32.183
> 
> 标签：ios, objective-c-blocks

我有一个 UIViewController 显示从在线数据库中提取的数据表。我有一个单例管理器来处理这些数据的提取**并**提供表所需的数据。

这是经理如何工作的示例：

```
@property (nonatomic) NSArray *dataArray;
...
- (void)refreshDataSource
{
    [AClass fetchInBackgroundWithCompletionHandler:^(NSArray *objects) {
        self.dataArray = [NSArray arrayWithArray:objects];
    }
}
...
- (NSArray *)tableViewDataSource
{
    return self.dataArray;
} 
```

视图控制器通过调用请求更新`-refreshDataSource`，`-viewDidLoad`但同时通过指向 -tableViewDataSource 向其 UITableView 提供来自管理器的缓存数据。

当视图控制器第一次出现时，一切都很好。我第二次展示相同的视图控制器时，应用程序挂起。网络请求也不会触发。

我发现的唯一解决方法是将我的`-refreshDataSource`电话转移到`-viewDidAppear:`。但这让我很恼火，为什么会发生这种情况，让我觉得这里一定有问题。

如果有人可以提供任何帮助或建议，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:24:19.620

您的问题并没有解释一切，但这里有一些想法可能会对您有所帮助。

1) viewDidLoad 仅在您的视图第一次加载时被调用。如果你切换到不同的视图，然后返回到你的tableView，refreshDataSource 将不会被调用。

2) viewDidLoad 可能在分配和初始化数组之前触发，因此在刷新数据时它为零，而 viewDidAppear 可能没有同样的问题。

如果没有更多信息，我无法给出更具体的答案。“第一次，一切都好。第二次去……”你能不能解释的更清楚些？如果可能的话，一步一步地做你所做的。

# javascript - NodeJS 模块导出/原型 - 没有方法

> ID：14300411
> 
> 赞同：10
> 
> 时间：2013-01-13T03:33:03.527
> 
> 标签：javascript, node.js

我有一个看起来像这样的模块：

```
var MyModule = module.exports = function MyModule(opts) {

    opts = (opts === Object(opts)) ? opts : {};

    if (!(this instanceof MyModule)) {
        return new MyModule(opts);
    }

    for (var key in opts) if ({}.hasOwnProperty.call(opts, key)) {
        this.config[key] == opts[key];
    }
};

MyModule.prototype.config = {
    something:'value'
}

MyModule.prototype.put = function put(info, cb) {
   //do stuff

}; 
```

但是，当我这样使用它时：

```
var myModule = require('myModule.js');

myModule.put({test}, function(){
    //some callback stuff
}); 
```

我收到以下错误：

> 类型错误：对象函数 MyModule(opts) {
> 
> ```
> opts = (opts === Object(opts)) ? opts : {};
> 
> if (!(this instanceof MyModule)) {
>     return new MyModule(opts);
> }
> 
> for (var key in opts) if ({}.hasOwnProperty.call(opts, key)) {
>     this.config[key] == opts[key];
> } } has no method 'put' 
> ```

看来我的`MyModule.prototype.put`?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T10:45:03.540

你写了 ：

```
var myModule = require('myModule.js');

myModule.put({}, function(){
  //some callback stuff
}); 
```

这里`myModule`其实是`MyModule`一个构造函数。所以你正在做的是`MyModule.put()`，调用`MyModule`. `MyModule.prototype.put`定义了一个“实例”方法，所以你必须先实例化：

```
var MyModule = require('./myModule.js');

var myModule = new MyModule();
// or as you used `if (!(this instanceof MyModule)) { … }`
var myModule = MyModule();

myModule.put({}, function () {}); 
```

所以基本上你的代码只需要一对`()`工作：

```
MyModule().put({}, function () {});
// same as
(new MyModule).put({}, function () {}); 
```

回顾：

```
var MyModule = function () {
  // Construct object
};

MyModule.staticMethod = function () {
  this; // is bound to `MyModule` function object
};

MyModule.prototype.instanceMethod = function () {
  this; // is bound to the `MyModule` instance object it’s called from
};

// Usage

MyModule.staticMethod();

var instance = new MyModule();
instance.instanceMethod(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T03:49:34.577

使用此代码，`var myModule = require('myModule.js');`您的`myModule`变量看起来像一个构造函数，而不是 myModule 的实例。

首先尝试实例化您的模块：

```
var MyModule = require('myModule.js');    
var myModule = new MyModule(); // Create an instance of your module.

// Now use it.
myModule.put(/*... your code here ...*/); 
```

# wpf - 将图像源绑定到不起作用的字符串 Windows Phone 7

> ID：14300413
> 
> 赞同：0
> 
> 时间：2013-01-13T03:33:17.123
> 
> 标签：wpf, silverlight, windows-phone-7

我有一个数据库，其中存储了我想在我的应用程序中使用的图像地址字符串。我有 ClientAuction 类，它从数据库中读取该字符串以及其他内容

```
public class ClientAuction : INotifyPropertyChanged
{  
    private string photoFileName; 
    public string PhotoFilename
    {
        set
        {
            if (photoFilename != value)
            {
                photoFilename = value;
                OnPropertyChanged("PhotoFilename");
            }
        }
        get
        {
            return photoFilename;
        }
    }
} 
```

所有其他绑定都在工作，但图像不会显示。我尝试了相对地址、硬盘上的地址、网址，但没有任何显示。我也尝试过使用 Uri 和 ImageSource 或使用 BitmapImage 但没有结果

```
 <Grid Name="AllAuctionsContentPanel" DataContext="{Binding Source={StaticResource presenter}}">
                <ScrollViewer>
                    <ListBox Name="AllItems" ItemsSource="{Binding Auctions}"  Height="750" SelectionChanged="Items_SelectionChanged">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="{StaticResource PhoneAccentBrush}" 
                                Width="450"
                                BorderThickness="1"
                                CornerRadius="12"
                                Margin="2">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>

                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Image Grid.Row="0" Grid.Column="0" 
                                       Source="{Binding PhotoFileName}"
                                       Height="128"
                                       Width="128"
                                       Margin="10">

                                        </Image>

                                        <ContentControl Grid.Row="0" Grid.Column="1" 
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center">
                                            <StackPanel >
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="Item Name: "></TextBlock>
                                                    <TextBlock Text="{Binding ItemName}"></TextBlock>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="Starting Bid: "></TextBlock>
                                                    <TextBlock Text="{Binding StartingBid}"></TextBlock>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="End Time: "></TextBlock>
                                                    <TextBlock Text="{Binding EndTime}"></TextBlock>
                                                </StackPanel>
                                            </StackPanel>
                                        </ContentControl>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </ScrollViewer>
            </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:44:08.880

尝试这个 -

```
 <Image>
        <Image.Source>
            <BitmapImage UriSource="{Binding PhotoFilename}" />
        </Image.Source>
    </Image> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T14:02:57.727

尝试绑定到类型的变量`Uri`而不是，`string`看看它是否有效。

# core-data - numberOfRowsInSection：核心数据和多个部分的方法

> ID：14300415
> 
> 赞同：3
> 
> 时间：2013-01-13T03:33:25.513
> 
> 标签：core-data, rows, nsfetchedresultscontroller, sections

我正在尝试显示一个包含 2 个部分的表格视图。第一部分将始终有 1 行，第二部分将具有与数据点一样多的行。我正在使用核心数据和以下 tableView:numberOfRowsInSection: 方法...

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (section == 0) {
        return 1;
    } else {
        id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
        return [sectionInfo numberOfObjects];
    }
} 
```

但是，我收到以下错误：

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“ *** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]”

任何帮助将不胜感激。谢谢。

新的 - - - - - - - - - - - - - - - - - - - - - - - - - ------------------------------

这是相关方法的当前实现：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (section == 0) {
        return 1;
    } else {
        NSUInteger frcSection = section - 1;
        id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:frcSection];
        return [sectionInfo numberOfObjects];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    [self configureCell:cell atIndexPath:indexPath];
    return cell;
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0) {
        cell.textLabel.text = entityOne.name;  //entityOne object passed from previous VC
    } else {
        entityTwo = [self.fetchedResultsController objectAtIndexPath:indexPath];
        cell.textLabel.text = entityTwo.name;
    }
}

- (void)controller:(NSFetchedResultsController *)controller
  didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex
     forChangeType:(NSFetchedResultsChangeType)type
{
    NSUInteger frcSectionIndex = 0;
    frcSectionIndex = sectionIndex + 1;

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:frcSectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:frcSectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.tableView;

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:32:33.393

原因是获取结果控制器 (FRC) 只有一个部分 ( **section #0** )，您希望将其显示在表格视图的第二部分 ( **section #1 ) 中。**

这是可能的，但您必须在 FRC 部分编号和表格视图部分编号之间进行映射，例如

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (section == 0) {
        return 1;
    } else {
        NSUInteger frcSection = section - 1;
        id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:frcSection];
        return [sectionInfo numberOfObjects];
    }
} 
```

中需要相同的映射`cellForRowAtIndexPath`。

在 FRC 委托方法`didChangeObject`中，`didChangeSection`您必须在调用表视图方法之前将节号*加 1*`insertRowsAtIndexPaths` （例如）。

* * *

**添加：** `configureCell`应该是这样的：

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0) {
        cell.textLabel.text = entityOne.name;  //entityOne object passed from previous VC
    } else {
        NSIndexPath *frcIndexPath = [NSIndexPath indexPathForRow:indexPath.row inSection:(indexPath.section - 1)];
        entityTwo = [self.fetchedResultsController objectAtIndexPath:frcIndexPath];
        cell.textLabel.text = entityTwo.name;
    }
} 
```

像这样`didChangeObject`：

```
- (void)controller:(NSFetchedResultsController *)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.tableView;
    NSIndexPath *tvIndexPath = [NSIndexPath indexPathForRow:indexPath.row inSection:(indexPath.section + 1)];
    NSIndexPath *tvNewIndexPath = [NSIndexPath indexPathForRow:newIndexPath.row inSection:(newIndexPath.section + 1)];

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:@[tvNewIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:@[tvIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:tvIndexPath] atIndexPath:tvIndexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:@[tvIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:@[tvNewIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
} 
```

你可能明白了：

*   当从 FRC 索引路径转到表视图索引路径时，向该部分添加一个。
*   从表视图索引路径到 FRC 索引路径时，从该部分中减去一个。

# php - Innerjoin With Where 子句？

> ID：14300417
> 
> 赞同：-1
> 
> 时间：2013-01-13T03:33:31.297
> 
> 标签：php, mysql, inner-join

```
$InnerJoinQuery = $STD->query("
        SELECT Users.ID, Users.Username, Users.Password, UserInformation.LastName, UserInformation.Firstname, UserInformation.DOB
        FROM Users AS Users 
        INNER JOIN UserInformation AS UserInformation 
        ON Users.ID = UserInformation.UserID WHERE Users.Username=".$_SESSION['real_name']."");
        $InnerJoinArray = $InnerJoinQuery->fetch_array(MYSQLI_ASSOC); 
```

我上面的代码导致错误。它适用于我的`WHERE`条款。

`WHERE Users.Username=".$_SESSION['real_name']."`

我怎样才能将这个嵌入到我的内部连接中？

更新：

```
$InnerJoinQuery = $STD->query("
        SELECT Users.ID, Users.Username, Users.Password, UserInformation.LastName, UserInformation.Firstname, UserInformation.DOB
        FROM Users
        INNER JOIN UserInformation
        ON Users.ID = UserInformation.UserID WHERE Users.Username = '".$_SESSION['real_name']."'");
        $InnerJoinArray = $InnerJoinQuery->fetch_array(MYSQLI_ASSOC);

        $_SESSION['UID'] = $InnerJoinArray['ID'];
        $_SESSION['Password'] = $InnerJoinArray['Password'];
        $_SESSION['Firstname'] = $InnerJoinArray['Firstname'];
        $_SESSION['LastName'] = $InnerJoinArray['LastName'];
        $_SESSION['DOB'] = $InnerJoinArray['DOB'];
            print_r($_SESSION); 
```

这将返回：

> 数组 ( [real_name] => inhumaneslayer [Password] => [UID] => [Firstname] => [LastName] => [DOB] => )

这不是预期的。

当我将查询更改为：

```
$InnerJoinQuery = $STD->query("
        SELECT Users.ID, Users.Username, Users.Password, UserInformation.LastName, UserInformation.Firstname, UserInformation.DOB
        FROM Users
        INNER JOIN UserInformation
        ON Users.ID = UserInformation.UserID WHERE Users.Username = 'inhumaneslayer'"); 
```

我得到了预期的结果：

> 数组（[real_name] => inhumaneslayer [Password] => PASSWORDHIDDEN [UID] => 5 [Firstname] => xx [LastName] => xx [DOB] => DOBHIDDEN）

这是预期的。

**我`unset($_SESSION);`在更改 SQL 之前取消了会话**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:36:21.050

您必须将字符串括在引号中：

```
... Users.Username='".$_SESSION['real_name']."'") 
```

另外 - 您需要正确转义变量。您将如何做到这一点 - 取决于您使用的数据库库。在你的情况下，它是[http://php.net/manual/en/mysqli.real-escape-string.php](http://php.net/manual/en/mysqli.real-escape-string.php)

```
... Users.Username='". $STD->real_escape_string($_SESSION['real_name']) ."'") 
```

但更好 - 学习如何使用准备好的语句[http://php.net/manual/en/mysqli.prepare.php](http://php.net/manual/en/mysqli.prepare.php)

```
$stmt = $STD->query("
        SELECT Users.ID, Users.Username, Users.Password, UserInformation.LastName, UserInformation.Firstname, UserInformation.DOB
        FROM Users AS Users 
        INNER JOIN UserInformation AS UserInformation 
        ON Users.ID = UserInformation.UserID WHERE Users.Username=?");

$stmt->bind_param("s", $_SESSION['real_name']);

$stmt->execute();
$result = $stmt->get_result();

$InnerJoinArray = $result->fetch_array(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T03:36:55.100

您忘记了字符串周围的（单/双）引号（您正在寻找一个字符串，而不是整数？）

尝试：`".... WHERE Users.Username='".$_SESSION['real_name']."'")`

否则，按照你的方式，它会搜索

`WHERE Users.Username=some_string`（而不是`Users.Username='some_string'`）这将返回一个错误，因为`some_string`它是一个字符串，它需要用引号引起来

* * *

如果仍然没有结果：

尝试将您的查询放入变量中`$query = "SELECT Users .....";`

然后`echo $query`看看你的 $_SESSION 变量实际产生了什么。在不知道这一点的情况下，我无能为力提供帮助。

# c# - 什么是 443 端口的替代端口？

> ID：14300419
> 
> 赞同：-1
> 
> 时间：2013-01-13T03:34:00.960
> 
> 标签：c#, iis, ssl, https

我使用 c#.net 开发了一个 Web 应用程序并将其部署在 IIS 上。我们的要求是使其仅在 https 上可用。所以我必须在https上测试它。

但是在我的带有 IIS 8 的 Windows 8 机器上，我无法选择 443 端口，因为它说它被另一个进程 WWAHost.exe 使用，并且它是 Windows 8 Metro 应用程序服务的进程。

有没有办法可以从该服务中获取此端口 443 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:39:20.930

我认为这没有必要——您可以在 IIS 中使用任何可用的端口来进行安全连接（尤其是用于测试目的）。但是，您必须安装证书。由于浏览器在提供 https 请求时默认使用端口 443，因此您必须手动提供您在 url 中分配的端口。

在 IIS 中设置站点时查看 DataBindings。您需要选择 HTTPS。然后通过浏览器访问时：

> [https://yourdomain.com:12345](https://yourdomain.com:12345)（假设端口 12345 是您分配的）

祝你好运。

# google-chrome - Google Chrome 控制台中的 MIME 类型警告

> ID：14300421
> 
> 赞同：0
> 
> 时间：2013-01-13T03:34:26.067
> 
> 标签：google-chrome, iis-7, asp-classic

我使用服务器端脚本 (.asp) 即时生成验证码图像（作为 .bmp）。

它包含在一个页面中，如下所示：

`<iframe id="commentCaptcha" height="20px" width="50px" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" src="/inc_captcha.asp">`

一切正常。

问题/问题是我在 google chrome 控制台中收到以下警告：

`Resource interpreted as Document but transferred with MIME type image/bmp: "/inc_captcha.asp".`

以下是从服务器返回的实际原始标头：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Content-Type: image/bmp
Expires: Sun, 13 Jan 2013 03:11:36 GMT
Server: Microsoft-IIS/7.5
Date: Sun, 13 Jan 2013 03:12:36 GMT
Connection: close 
```

有什么办法可以阻止这个警告吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:05:30.353

将来源设置`iframe`为非文档类型有点奇怪，而且不是通常的做法。

相反，`iframe`应该将`src`设置设置为`text/HTML`文档，您的图像`<img>`在该文档中。

如果它只是您所追求的图像，请使用`<img>`父文档中的标签，并且根本不要使用`iframe`。

# c# - 如何使用字符串声明变量？

> ID：14300422
> 
> 赞同：0
> 
> 时间：2013-01-13T03:34:37.463
> 
> 标签：c#, string

我需要声明一个名称与字符串匹配的变量。

这是我需要工作的，但实际上它使用名称的新表达式实例进行编译`"s"`（我需要它采用存储在字符串 s 中的名称）我该如何解决这个问题？

代码：

```
foreach (string s in StringArray)
            {
                if (SomeDifferentArray.Contains(s) != true)
                {
                    Expression s = new Expression(); 
                }
            } 
```

我需要为 中的每个字符串创建一个新的表达式实例`StringArray`，并且每个表达式都需要根据字符串所包含的文字进行命名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:39:45.143

这似乎是映射集合的用例。我自己不是 C# 用户，但我怀疑字典类会是一个：

[http://msdn.microsoft.com/en-us/library/xfhwa508.aspx](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

C# 是一种编译语言，因此您不能创建依赖于运行时数据的编译时变量。但是，您可以使用映射式数据结构将唯一键对象与单个值对象相关联。在您的情况下，您可以使用它将每个`string`与单个`Expression`.

```
Dictionary<string, Expression> myExpressionDict = new Dictionary<string, Expression>();

foreach(string s in StringArray) {
    if(!SomeDifferentArray.Contains(s)) {
        myExpressionDict[s] = new Expression();
    }
} 
```

此循环完成后，对于`s`original 中的任何字符串`SomeArray`，您都可以`myExpressionDict[s]`获取其关联`Expression`对象。

在 C# 中，这种结构称为“字典”。根据您的编程语言或库，同样的数据结构也可能有“map”或“hash”的名称。例如，在 Java 集合框架中它被称为 Map，在 Ruby 中它们使用术语哈希，而在 Python 中它使用名称字典（或简称 dict）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:40:05.773

您可以使用地图或字典。不完全是您要问的，但要简单得多。

# algorithm - Minimize maximum absolute difference in pairs of numbers

> ID：14300425
> 
> 赞同：1
> 
> 时间：2013-01-13T03:35:39.250
> 
> 标签：algorithm

**The problem statement**:
Give `n` variables and `k` pairs. The variables can be distinct by assigning a value from 1 to `n` to each variable. Each pair `p` contain 2 variables and let the absolute difference between 2 variables in `p` is `abs(p)`. Define the upper bound of difference is `U=max(Abs(p)|every p)`.

Find an assignment that minimize `U`.

```
Limit:   
n<=100  
k<=1000 
```

Each variable appear at least 2 times in list of pairs.

```
A problem instance:  
Input  
n=9, k=12  
1 2 (meaning pair x1 x2)   
1 3  
1 4  
1 5  
2 3  
2 6 
3 5   
3 7    
3 8  
3 9 
6 9  
8 9  
Output:  
1 2 5 4 3 6 7 8 9  
(meaning x1=1,x2=2,x3=5,...) 
```

**Explaination:** An assignment of `x1=1,x2=2,x3=3,...` will result in `U=6` (3 9 has greastest abs value). The output assignment will get `U=4`, the minimum value (changed pair: `3 7 => 5 7, 3 8 => 5 8`, etc. and 3 5 isn't changed. In this case, `abs(p)<=4` for every pair).

**There is an important point**: To achieve the best assignments, the variables in the pairs that have greatest abs must be change.
Base on this, I have thought of a greedy algorithm:

```
1)Assign every x to default assignment (x(i)=i)  
2)Locate pairs that have largest abs and x(i)'s contained in them.  
3)For every i,j: Calculate U. Swap value of x(i),x(j). Calculate U'. If U'<U, stop and repeat step 3\. If U'>=U for every i,j, end and output the assignment. 
```

However, this method has a major pitfall, if we need an assignment like this:

```
x(a)<<x(b), x(b)<<x(c), x(c)<<x(a) 
```

, we have to swap in 2 steps, like: `x(a)<=>x(b)`, then `x(b)<=>x(c)`, then there is a possibility that `x(b)<<x(a)` in first step has its abs become larger than U and the swap failed.
Is there any efficient algorithm to solve this problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T05:27:58.897

This looks like [http://en.wikipedia.org/wiki/Graph_bandwidth](http://en.wikipedia.org/wiki/Graph_bandwidth) (NP complete, even for special cases). It looks like people run [http://en.wikipedia.org/wiki/Cuthill-McKee_algorithm](http://en.wikipedia.org/wiki/Cuthill-McKee_algorithm) when they need to do this to try and turn a sparse matrix into a banded diagonal matrix.

# xcode - Xcode 上的 Cordova window.openDatabase() - 无错误输出

> ID：14300426
> 
> 赞同：0
> 
> 时间：2013-01-13T03:36:09.227
> 
> 标签：xcode, cordova

`window.openDatabase()`我有一个在`onDeviceReady()`事件处理程序中调用的 Cordova iOS 应用程序。事件处理程序的执行似乎`onDeviceReady()`在该行停止，因为`console.log()`该行下方的我从未出现在 Xcode 的调试控制台中。也没有任何其他错误消息。

相同的代码在 Android 设备和`Chrome/Ripple`模拟器上运行良好。怎么了？

```
var db = null;

// PhoneGap is ready
function onDeviceReady() {
    console.log("onDeviceReady");

    db = window.openDatabase("mydb", "1.0", "My DB", 100000000);        

    console.log("This will never be displayed in Xcode log");

    db.transaction(checkDB, checkErrorCB);        
} 
```

科尔多瓦版本：2.3.0

Xcode 版本：4.5.2

我正在 iPhone 5.1 和 iPhone 6.0 模拟器上进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:47:30.170

啊！！

似乎我指定的数据库大小太大了，当我删除零时，一切都开始工作了......当你已经查看相同的代码数周并且它运行良好时，这种事情很容易被忽视。我只是选择了一个随机的大数字“以防万一”。

此代码有效：

```
db = window.openDatabase("mydb", "1.0", "My DB", 10000000); 
```

# ruby-on-rails - 如何将特定于模型的配置选项添加到 rails 关注点？

> ID：14300427
> 
> 赞同：9
> 
> 时间：2013-01-13T03:36:13.303
> 
> 标签：ruby-on-rails

我正在为我的 rails 项目编写一个 Importable 关注点。这个问题将为我提供一种通用的方式来将 csv 文件导入到任何包含 Importable 的模型中。

我需要为每个模型指定一种方法来指定导入代码应该使用哪个字段来查找现有记录。有没有推荐的方法来添加这种类型的配置来解决问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-26T22:37:23.867

一个稍微“普通”的解决方案，我们这样做（巧合的是，对于某些 csv 导入问题）以避免将参数传递给关注点的需要。我确信引发错误的抽象方法有利有弊，但它将所有代码保留在 app 文件夹和您希望找到它的模型中。

在“关注”模块中，只有基础知识：

```
module CsvImportable
  extend ActiveSupport::Concern

  # concern methods, perhaps one that calls 
  #   some_method_that_differs_by_target_class() ...

  def some_method_that_differs_by_target_class()
    raise 'you must implement this in the target class'
  end

end 
```

并且在有问题的模型中：

```
class Exemption < ActiveRecord::Base
  include CsvImportable

  # ...

private
  def some_method_that_differs_by_target_class
    # real implementation here
  end
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-13T04:18:02.847

我建议不要在每个模型中都包含关注点，而是创建一个`ActiveRecord`子模块并使用它进行扩展`ActiveRecord::Base`，然后在该子模块中添加一个方法（比如`include_importable`）来执行包含。然后，您可以将字段名称作为参数传递给该方法，并在该方法中定义实例变量和访问器（例如`importable_field`）以保存字段名称以供您的`Importable`类和实例方法中引用。

所以是这样的：

```
module Importable
  extend ActiveSupport::Concern

  module ActiveRecord
    def include_importable(field_name)

      # create a reader on the class to access the field name
      class << self; attr_reader :importable_field; end
      @importable_field = field_name.to_s

      include Importable

      # do any other setup
    end
  end

  module ClassMethods
    # reference field name as self.importable_field
  end

  module InstanceMethods
    # reference field name as self.class.importable_field
  end

end 
```

然后，您需要扩展`ActiveRecord`此模块，例如将此行放入初始化程序 ( `config/initializers/active_record.rb`)：

```
ActiveRecord::Base.extend(Importable::ActiveRecord) 
```

（如果您担心，`config.autoload_paths`那么您不需要在这里要求它，请参阅下面的评论。）

然后在您的模型中，您将包括`Importable`以下内容：

```
class MyModel
  include_importable 'some_field'
end 
```

`imported_field`阅读器将返回该字段的名称：

```
MyModel.imported_field
#=> 'some_field' 
```

然后，您`InstanceMethods`可以在实例方法中设置导入字段的值，方法是将字段名称传递给[`write_attribute`](http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Write.html#method-i-write_attribute)，并使用以下方法获取值[`read_attribute`](http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Read.html#method-i-read_attribute)：

```
m = MyModel.new
m.write_attribute(m.class.imported_field, "some value")
m.some_field
#=> "some value"
m.read_attribute(m.class.importable_field)
#=> "some value" 
```

希望有帮助。不过，这只是我个人对此的看法，还有其他方法可以做到这一点（我也有兴趣了解它们）。

# opengl - 在着色器中绑定纹理

> ID：14300429
> 
> 赞同：1
> 
> 时间：2013-01-13T03:36:36.187
> 
> 标签：opengl, binding, textures, shader, wavefront

我正在用 VBO 编写波前 (.obj) 加载器。

当调用“usemtl”时，我正在考虑将 textureID 与顶点、texCoord 和法线数据一起发送。

使用该纹理 ID，我可以在不调用 glBindTexture 的情况下将纹理绑定到顶点/片段着色器中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:42:31.760

> 使用该纹理 ID，我可以在不调用 glBindTexture 的情况下将纹理绑定到顶点/片段着色器中吗？

不。纹理不绑定到着色器；它们与上下文有关。

如果你想获得技术，[NV_bindless_texture](http://www.opengl.org/registry/specs/NV/bindless_texture.txt)允许这样的功能，但这是 NVIDIA 特定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:36:12.777

这是一般材质的问题，需要在渲染几何体之前切换它们。

最简单的方法是：

```
foreach object in renderQueue
    set_material()
    draw_geometry() 
```

当然，当一个对象必须用两种不同的材料渲染时，我们会遇到一些麻烦。另一个问题是性能问题，您通常会按材质对对象进行排序并保存切换（纹理、着色器和其他数据）

# php - Instagram - 是否可以在不登录的情况下获取用户最近的媒体？

> ID：14300431
> 
> 赞同：1
> 
> 时间：2013-01-13T03:36:44.270
> 
> 标签：php, javascript, json, api, instagram

[http://followgram.me/search/](http://followgram.me/search/)是一个搜索引擎，您可以在其中从 Instagram 搜索用户最近的媒体，并且无需登录即可向您显示照片。

这怎么可能？当我检查 API 时，您似乎必须登录才能获得查询结果，否则这是一个错误的请求。我已经阅读了周围，但找不到任何东西。我错过了一些非常明显的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:40:41.423

以下解释它（直接取自[http://instagram.com/developer/authentication/](http://instagram.com/developer/authentication/)）

> 大多数情况下，Instagram 的 API 只需要使用 client_id。client_id 只是将您的服务器、脚本或程序与特定应用程序相关联。但是，某些请求需要身份验证 - 特别是代表用户发出的请求。经过身份验证的请求需要 access_token。这些令牌对用户来说是唯一的，应该安全地存储。访问令牌可能在将来的任何时间过期。
> 
> 请注意，在许多情况下，您可能根本不需要对用户进行身份验证。例如，您可以请求热门照片而无需进行身份验证（即您不需要提供 access_token；只需在请求中使用您的客户端 ID）。只有在您的应用程序代表用户发出请求（评论、喜欢、浏览用户的提要等）时，我们才需要进行身份验证。

# powershell - 通过 Powershell 在 Team Foundation Server 2010 中更改文件属性

> ID：14300434
> 
> 赞同：0
> 
> 时间：2013-01-13T03:36:55.613
> 
> 标签：powershell, tfs

我需要能够通过 Powershell 更改 Team Foundation Server 2010 中文件的“ANSI NULL”属性：

```
cls
if ( (Get-PSSnapin -Name Microsoft.TeamFoundation.PowerShell -ErrorAction SilentlyContinue) -eq $null )
{
    Add-PSSnapin Microsoft.TeamFoundation.PowerShell
}

[Microsoft.TeamFoundation.Client.TfsTeamProjectCollection] $tfs = get-tfsserver "http://tfsserver.com"

$items = Get-TfsItemProperty -Server $tfs -Item "$/databaseproject/Database/trunk/Database/Stored Procedures" -Recurse | where{$_.ItemType -eq "File"}
foreach($item in $items)
{
    #i'm stuck on how to get/change the file item properties
} 
```

本质上，我想将 TFS 中 .sql 文件的 ANSI NULLS 属性从 ON 更改为 OFF。我有大约 60 个要更改。

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:06:26.890

我不相信 Get-TfsItemProperty 输出的对象上存在 ANSI NULL 属性，即使它确实具有这样的属性，您也无法更改它。Get-TfsItemProperty 根据从服务器检索到的信息创建本地数据对象。它是不可变的，即它的所有属性只有 getter（而不是 setter）。

此属性更可能是某个文件（.dbschema??）中捕获的设置。在这种情况下，我通常建议您签出该文件，修改设置并重新签入。但是，我遇到了[这个可能有帮助的问答](http://go4answers.webhost4life.com/Example/to-set-quoted_identifier-ansi_nulls-53381.aspx)。具体看答案 8 和 9。答案 8 暗示可能存在一个错误，即使更改设置也无济于事。答案 9 有一些建议的解决方法。

# mysql - 简单的 MySQL 更新不适用于一般错误

> ID：14300435
> 
> 赞同：0
> 
> 时间：2013-01-13T03:37:13.667
> 
> 标签：mysql

我以前从来没有遇到过这种情况，非常非常奇怪，

非常简单的 SQL 更新不起作用：

```
UPDATE table givi_user_sessions set givi_user_clientid='somevalue' where givi_user_id=2; 
```

我尝试了其他变体，例如：

```
UPDATE table givi_user_sessions set  where givi_user_id=3 where givi_user_id=2 
```

这也是：

```
UPDATE table `givi_user_sessions` set  where `givi_user_id`=3 where `givi_user_id`=2 
```

所有这些选项都给了我以下错误：

> 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'table givi_user_sessions set givi_user_clientid='somevalue' where givi_user_id=2' 附近使用正确的语法

我仔细检查了该表是否存在，并且列名是否正确，我唯一记得的是我将表名从 user_sessions 更改为 givi_user_sessions，但这根本不重要，除非 mysql 引擎中出现问题，因为我肯定认为我的 sql 是正确的。或者我今天工作太久了。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:42:18.597

您不需要在查询中包含关键字“table”。您可以在此处查看更新查询的语法：http: [//www.w3schools.com/php/php_mysql_update.asp](http://www.w3schools.com/php/php_mysql_update.asp)

它应该如下所示：

```
UPDATE givi_user_sessions set givi_user_clientid='somevalue' where givi_user_id=2; 
```

# android - 将图像路径转换为uri

> ID：14300436
> 
> 赞同：0
> 
> 时间：2013-01-13T03:37:20.507
> 
> 标签：android, arrays, if-statement, uri, android-image

我正在尝试将我的网格视图中选定图像的图像路径转换为uris，以便我可以将它们传递到我的照片编辑器中，并从那里进行编辑。

```
 if (cb.isChecked()) {
                    String paths = imagePaths.get(i);
                    Uri uri = Uri.parse(paths);
                    editImagesUri[count] = uri;
                    count++;
                } 
```

那是我得到 NullPointerException 的代码，我似乎无法弄清楚问题出在哪里。

我已经对 if 语句中的内容进行了几次更改，以便它基本上做同样的事情，但错误仍然是一样的。

这是路径的值：

```
imagePaths = new ArrayList<String>();
    imagePaths = getPathOfAllImages(getActivity()); 
```

这是uri的值：

```
private static Uri[] editImagesUri; 
```

getPathOfAllImages 是我在这个网站上找到的一种方法作为答案。这是它的代码：

```
public static ArrayList<String> getPathOfAllImages(Activity activity) {
        ArrayList<String> absolutePathOfImageList = new ArrayList<String>();
        String absolutePathOfImage = null;
        String nameOfFile = null;
        String absolutePathOfFileWithoutFileName = null;
        Uri uri;
        Cursor cursor;
        int column_index;
        int column_displayname;
        int lastIndex;
        int counter = 0;
        // absolutePathOfImages.clear();

            uri = android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI;

            String[] projection = { MediaColumns.DATA,
                    MediaColumns.DISPLAY_NAME };

            cursor = activity.managedQuery(uri, projection, null, null, null);
            column_index = cursor.getColumnIndexOrThrow(MediaColumns.DATA);

            column_displayname = cursor
                    .getColumnIndexOrThrow(MediaColumns.DISPLAY_NAME);

            // cursor.moveToFirst();
            while (cursor.moveToNext()) {
                // for(int i=0; i<cursor.getColumnCount();i++){
                // Log.i(TAG,cursor.getColumnName(i)+".....Data Present ...."+cursor.getString(i));
                // }
                // Log.i(TAG,"=====================================");

                absolutePathOfImage = cursor.getString(column_index);
                nameOfFile = cursor.getString(column_displayname);

                lastIndex = absolutePathOfImage.lastIndexOf(nameOfFile);

                lastIndex = lastIndex >= 0 ? lastIndex
                        : nameOfFile.length() - 1;

                absolutePathOfFileWithoutFileName = absolutePathOfImage
                        .substring(0, lastIndex);

                    if (absolutePathOfImage != null) {
                        absolutePathOfImageList.add(absolutePathOfImage);
                    }

            }

        // Log.i(TAG,"........Detected images for Grid....."
        // + absolutePathOfImageList);
        return absolutePathOfImageList;
    } 
```

# java - 如何打包一个混合了 Java 和 Python 的项目

> ID：14300439
> 
> 赞同：1
> 
> 时间：2013-01-13T03:37:36.547
> 
> 标签：java, python, package

我的项目是由 Java 和 Python 编写的。我想知道有什么工具可以将 Python 代码打包到 Java 战争文件中吗？基本上我的java代码将被编译成一个war文件，python代码被打包在几个egg文件中，然后放入war文件的classes/文件夹中。现在我正在使用一个python脚本，它调用maven来构建war文件，调用setup.py来构建egg文件，最后将它们组合起来。这种方式不是规模的，因为每次我有一些新的鸡蛋文件时我都必须修改脚本。有人知道这种事情的好工具吗？谢谢你

# ios - 将全局变量的值从 .m 获取到另一个 .m

> ID：14300448
> 
> 赞同：0
> 
> 时间：2013-01-13T03:39:32.333
> 
> 标签：ios, class, ios5, import, ios6

我尝试通过 2 种方式将全局变量的值从 .m 获取到另一个 .m：

首先，我尝试将 viewController.m 类导入另一个 .m 类并尝试检索该值，但我收到了链接器错误。

其次，我只是用字符串名称创建了 extern，然后它就开始正常工作了。

我的问题是为什么 import 给了我错误以及 extern 变量如何识别该特定类的字符串名称？
（即：如果我在不同的类中有 2 或 3 个具有相同名称的变量，并且我输入 extern 和字符串名称，我会得到哪个值，因为我没有导入任何类。）

而且，附加问题：您何时真正导入课程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:56:47.067

当您需要访问它的属性和方法时，您真正导入了一个类。这听起来可能太明显了，但事实就是如此。类是 OOP 的封装概念的化身。

可以通过多种方式将变量从一个点传递到另一个点，一种可以使用 userdefaults 工具，您可以在应用程序委托中拥有该变量，然后在不同的类中访问该值，或者您可以在目标视图控制器上公开一个属性并让源视图控制器在转换到目标之前设置该属性..仅举几例。根据场景的不同，还有更多正确和错误的方法。

将视图控制器 A 导入另一个视图控制器 B，只是为了访问 A 中的值似乎有点矫枉过正（如果不是完全不恰当地使用导入机制）。

这个问题进一步解释了externs，我没有接触过他们，

[Objective-C 静态、外部、公共变量](https://stackoverflow.com/questions/7642304/objective-c-static-extern-public-variables)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T11:48:00.990

我知道这已经得到了详细的回答，但我只想提供一些澄清。

在 .m 文件中声明要*保密的数据。*对于您希望其他对象可以访问的数据，请在您的头`.h`文件中声明。为所有声明使用属性：

```
 //myViewController.h
  @interface myViewController: UIViewController

  @property (assign) int myInt;
  @property (strong) NSString* someString;

  @end 
```

您可以通过将消息传递给 myViewController 从另一个对象访问这些属性：

```
 [myViewController setMyInt:20];    //setter
  [myViewController someString];    //getter 
```

或者您可以使用等效的点符号

```
 myViewController.myInt = 20;
  myViewController.someString; 
```

（您需要`#include "myViewController.h"`在任何想要访问这些的对象中）

在 myViewController 中，您可以使用“self”访问它们：

```
 self.myInt;
  self.someString; 
```

这是通过 setter/getter 的中介访问。支持变量可以直接从 myViewController 内部（但不能从任何其他对象）访问，如`_myInt`, `_someString`。在 init 和 dealloc 方法之外不建议这样做。

属性封装了实例变量的声明*和*默认getter和setter的创建，所以你不需要单独声明变量，如果你需要改变默认行为，你只需要制作自己的访问器。

另请参阅我的回答：
[我应该在接口中声明变量还是在objective-c arc中使用属性？](https://stackoverflow.com/questions/14236799/should-i-declare-variables-in-interface-or-using-property-in-objective-c-arc/14236931#14236931)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T08:02:38.573

> 首先，我尝试将 viewController.m 类导入另一个 .m 类并尝试检索该值，但我收到了链接器错误。

您从不导入 .m（实现）文件。您只能导入 .h（标头）文件。

> 我的问题是为什么 import 给了我错误

在 C 中，有一条规则是任何（非`static`）具有特定名称的全局函数或变量只能*定义*一次。对于一个变量，写它的类型和名称来*定义*它。对于一个函数，实现定义了它。因此，在两个不同的代码文件中具有相同名称的全局函数或变量将失败。他们会发生冲突。

导入文件意味着获取文件的整个源并将其插入其中。当您将 Am“导入”到 Bm 中时，Am 的整个源代码都将插入到 Bm 中。这意味着 Am 中的每个声明现在都显示在程序的两个代码文件中——Am 和 Bm，因此出现错误。

您可以多次*声明*（但不能*定义）一个全局变量或函数。*您可以通过使用声明变量`extern`而不定义它。声明它`extern`允许你使用一个变量，即使它实际上没有在同一个代码文件中声明。

> 以及外部变量如何识别该特定类的字符串名称？（即：如果我在不同的类中有 2 或 3 个具有相同名称的变量，并且我输入 extern 和字符串名称，我会得到哪个值，因为我没有导入任何类。）

如上所述，您的程序中只能有*一个*具有给定名称的非`static`全局变量。在不同的文件中具有相同名称的变量将是错误的。可以从程序的任何其他部分通过其名称访问非`static`全局变量和函数（并且它通过链接的魔力工作）。

* * *

通常，将在许多文件中使用的全局变量的最佳实践是在 .m 文件中定义它（就像您正在做的那样），并`extern`在与该 .m 文件对应的 .h 文件中声明它。然后导入该标头的其他文件将自动访问该变量。

# java - 错误：找不到合适的构造函数

> ID：14300449
> 
> 赞同：2
> 
> 时间：2013-01-13T03:39:44.110
> 
> 标签：java, constructor, minecraft

我是java新手，正在尝试为Minecraft制作一个mod，但我不知道如何解决这个错误：

```
src\minecraft\net\minecraft\src\ThreadConnectToServer.java:39: error: no suitabl
e constructor found for Packet2ClientProtocol(int,Minecraft,String,String,int)
        GuiConnecting.getNetClientHandler(this.connectingGui).addToSendQueue
(new Packet2ClientProtocol(51, GuiConnecting.func_74254_c(this.connectingGui), t
his.Username, this.ip, this.port));

^

constructor Packet2ClientProtocol.Packet2ClientProtocol(int,String,int) is n
ot applicable
  (actual and formal argument lists differ in length)
constructor Packet2ClientProtocol.Packet2ClientProtocol() is not applicable
  (actual and formal argument lists differ in length)
1 error 
```

这是我的代码：

```
package net.minecraft.src;

import java.net.ConnectException;
import java.net.UnknownHostException;

public class ThreadConnectToServer extends Thread
{

/** The IP address or domain used to connect. */
    final String ip;

    /** The port used to connect. */
    final int port;

    /** A reference to the GuiConnecting object. */
    final GuiConnecting connectingGui;

final String Username;

    ThreadConnectToServer(GuiConnecting par1GuiConnecting, String par2Str, int par3)
    {
        this.connectingGui = par1GuiConnecting;
        this.ip = par2Str;
        this.port = par3;
        String Username = Info.Username;
    }

    public void run()
    {
        try
        {
            GuiConnecting.setNetClientHandler(this.connectingGui, new NetClientHandler(GuiConnecting.func_74256_a(this.connectingGui), this.ip, this.port));

            if (GuiConnecting.isCancelled(this.connectingGui))
            {
                return;
            }

            GuiConnecting.getNetClientHandler(this.connectingGui).addToSendQueu(new Packet2ClientProtocol(51, GuiConnecting.func_74254_c(this.connectingGui), this.Username, this.ip, this.port));
            }
            catch (UnknownHostException var2)
            {
                if (GuiConnecting.isCancelled(this.connectingGui))
                {
                    return;
                }

        GuiConnecting.func_74249_e(this.connectingGui).displayGuiScreen(new GuiDisconnected("connect.failed", "disconnect.genericReason", new Object[] {"Unknown host \'" + this.ip + "\'"}));
    }
    catch (ConnectException var3)
    {
        if (GuiConnecting.isCancelled(this.connectingGui))
        {
            return;
        }

        GuiConnecting.func_74250_f(this.connectingGui).displayGuiScreen(new GuiDisconnected("connect.failed", "disconnect.genericReason", new Object[] {var3.getMessage()}));
    }
    catch (Exception var4)
    {
        if (GuiConnecting.isCancelled(this.connectingGui))
        {
            return;
        }

        var4.printStackTrace();
        GuiConnecting.func_74251_g(this.connectingGui).displayGuiScreen(new GuiDisconnected("connect.failed", "disconnect.genericReason", new Object[] {var4.toString()}));
        }
    }
} 
```

这有什么问题我试图让字符串“用户名”重定向到另一个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:42:52.637

```
new Packet2ClientProtocol(51, GuiConnecting.func_74254_c(this.connectingGui), this.Username, this.ip, this.port) 
```

该错误表明这样的构造函数不存在。

只有2个选项

```
Packet2ClientProtocol.Packet2ClientProtocol(int,String,int)
Packet2ClientProtocol.Packet2ClientProtocol() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T03:44:12.100

Java 编译器告诉您不能构造`Packet2ClientProtocol`对象，因为您对构造函数的调用与任何已知的构造函数都不匹配。

具体来说，编译器发现了两个构造函数：

```
Packet2ClientProtocol.Packet2ClientProtocol(int,String,int)
Packet2ClientProtocol.Packet2ClientProtocol() 
```

但你的电话：

```
new Packet2ClientProtocol(51, GuiConnecting.func_74254_c(this.connectingGui), this.Username, this.ip, this.port) 
```

不匹配任何一个。

# c++ - 我在哪里使用 _endthreadex - Windows API

> ID：14300450
> 
> 赞同：10
> 
> 时间：2013-01-13T03:39:44.773
> 
> 标签：c++, c, windows, multithreading

我是 Windows API 的新手，最近我了解到我不应该使用 CreateThread 和 TerminateThread。我切换到了`_beginthreadex`，但是我不确定我应该怎么做`use _endthreadex`？

**例如**，这是我正在测试的一个基本功能：

```
// MyThreadFunction - outputs "#.) I Work" and ends
unsigned int __stdcall MyThreadFunction( void * lpParam ) 
{
    int i = (int)lpParam;
    cout << i << ".) I work! " << endl;
    _endthreadex(0);
    return 0;
} 
```

我的位置`_endthreadex`正确吗？我在返回 0 之前有它，这对我来说似乎很奇怪？我在 msdn 页面中读到`_endthreadex`它会在函数结束时自动调用，但你应该调用它以更好地清理内存，这就是我尝试将它放入的原因。它看起来不对，如果这是一个抱歉不好的问题。我只是想确保我尽我所能做每一件事

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T03:48:24.323

你实际上根本不需要打电话`_endthreadex()`。无论如何，在您的线程函数返回后，它将自动为您调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T13:21:09.087

答案已经在简短版本中给出，如果您想了解更多 - 您的函数的返回实际上将用作`_endthreadex`调用中的参数。这是启动线程时运行时正在执行的操作。该线程确实从 CRT 中的某个起点开始，内部`_callthreadstartex`正在执行：

```
_endthreadex(MyThreadFunction(...)); 
```

也就是说，一旦你返回，`_endthreadex`就会立即为你调用，并且它会从线程中退出。

你能明确地使用它吗？是的，您可以，而且您的代码也很好，因为无论您自己调用它还是为您调用它都无关紧要，前提是在途中没有发生泄漏（例如，特别是尚未调用的析构函数）局部变量）。

由于无论如何都会为您调用它，并且从函数返回在释放本地资源方面更安全，因此进行显式调用没有任何用处、优势和意义。

[MSDN 在备注部分](http://msdn.microsoft.com/en-us/library/hw264s73%28v=vs.110%29.aspx)基本上解释了完全相同的权利。

> 您可以显式调用 _endthread 或 _endthreadex 来终止线程；但是，当线程从作为参数传递给 _beginthread 或 _beginthreadex 的例程返回时，会自动调用 _endthread 或 _endthreadex。通过调用 endthread 或 _endthreadex 来终止线程有助于确保正确恢复为线程分配的资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T11:09:03.113

如前所述，您不必调用它。关于您的代码，我认为 final`return 0;`甚至不会被调用，因为`_endthreadex()`永远不会返回。这也可能导致不调用本地对象的析构函数（这是我相信 MSDN 想说的），因此在 C++ 中使用此函数甚至可能是有害的。考虑使用 Boost.Thread，他们有一个专门用于结束线程的异常，如果你想在中间的某个地方终止线程，它应该做正确的事情。

# linq - linq groupjoin 使用带有 where 子句的 lambda

> ID：14300454
> 
> 赞同：1
> 
> 时间：2013-01-13T03:40:08.057
> 
> 标签：linq, join, lambda

如果我还有一个可用的参数也将在 where 子句中使用，我需要使用 Lambda 添加连接。

我的问题是我不确定添加新对象 MemberTagLysts 的确切格式，以及应该如何创建 where 子句。

```
 var tagList =   from t in dc.Tags
    join b in dc.Businesses on t.BusinessId equals b.BusinessId
            where t.IsActive == true
            where b.IsActive == true
            orderby t.AdImage descending
            select new TagItem
            {
                    tagName = t.Name.Replace("\"", ""),
                    tagImage = tagImagePath + t.AdImage.Replace("\"", ""),
                    tagDescription = t.Description.Replace("\"", "")
            };

            if (!string.IsNullOrEmpty(lystId))
            {
                            tagList = (IQueryable<TagItem>)tagList.GroupJoin(dc.MemberTagLysts, a => a.tagId, b => b.TagId, (a, b) => new { a, b });
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:05:50.380

我想你想做这样的事情：

```
var tagList =   from t in dc.Tags
    join b in dc.Businesses on t.BusinessId equals b.BusinessId
    where t.IsActive
    where b.IsActive
    orderby t.AdImage descending
    select new TagItem
    {
            tagName = t.Name.Replace("\"", ""),
            tagImage = tagImagePath + t.AdImage.Replace("\"", ""),
            tagDescription = t.Description.Replace("\"", "")
    };

if (!string.IsNullOrEmpty(lystId))
{
    tagList = tagList
             .GroupJoin(dc.MemberTagLysts.Where(l => l.lystId == lystId),
                        a => a.tagId,
                        b => b.TagId,
                        (a, b) => new { a, b }));
} 
```

有条件地扩展查询是一种很好的做法。请注意，像这样的条件`where t.IsActive == true`是多余的，`where t.IsActive`使用精心选择的属性名称（正如您所拥有的那样）就足够且可争论更好地阅读。

# c# - 是否可以从我的 AppDomain 导出 dll 定义？

> ID：14300457
> 
> 赞同：0
> 
> 时间：2013-01-13T03:40:51.950
> 
> 标签：c#, reflection

我的代码库中有我不熟悉的代码，我正在寻找清理和锁定测试用例。

我面临的问题是

A) 编写它的开发人员已不在公司，看起来没有使用任何标准，也没有进行代码审查，所以甚至没有评论（变量名为 a、b 和 c，函数为 200行长...呃）

B) 编写它的开发人员有一个方钉圆孔的心态（即“嘿，我刚刚了解到的这个新功能真的很酷，我想我会滥用它”）

C) 重写其功能是非常混乱、无证和不平凡的任务

也就是说，代码是意大利面条，我缩小了一个部分，该部分进行了大量的 Reflection.Emit 调用以动态生成执行工作的 dll。完成手头的任务是难以置信的，但请参见 B) 点。

有一半的人想说“忘记这个”，然后重写代码，这样我就可以通过测试将其锁定。另一半想挽救那里的东西，因为我知道它有效，我的客户每天都使用代码，这并不容易。

有没有办法做类似下面的事情？

```
foreach(Assembly a in AppDomain.CurrentDomain.GetAssemblies())
{
    if(IS_Assembly_IM_LOOKING_FOR(a))
    {
        SaveToFile(a, @"C:\Temp\MyAssembly.dll")
    }
} 
```

这样我就可以拥有程序集的“锁定”版本，并且可以单独为它编写单元测试，并且通过意外修改动态创建它的代码而破坏它的几率为 0%？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:48:52.970

1.  您可以修改创建程序集的代码，以便将其保存到磁盘（请参阅[此 SO 问题](https://stackoverflow.com/questions/2058340/is-it-possible-to-save-a-dynamic-assembly-to-disk)）
2.  您也可以使用调试器（例如 WinDbg）成功地做到这一点，它可以将程序集从内存转储到文件中。

# iphone - 编写 GLKBaseEffect 替代品

> ID：14300458
> 
> 赞同：1
> 
> 时间：2013-01-13T03:40:58.070
> 
> 标签：iphone, ios, objective-c, opengl-es-2.0, glkit

最近，我一直在尝试学习如何使用 OpenGL ES 2.0 和 GLKit 来创建简单的 2D 游戏。我一直在关注[Ray Wenderlich](http://www.raywenderlich.com/9743/how-to-create-a-simple-2d-iphone-game-with-opengl-es-2-0-and-glkit-part-1)的本教程，到目前为止它非常有帮助。但是，在对我的项目（和他的）进行分析后，我发现`GLKBaseEffect`'s `prepareToDraw:`（特别是`GLKShaderBlockNode`'s `copyWithZone`）到处都在泄漏——顺便说一句，我正在使用 ARC。在搜索了很多之后，这似乎是一个错误`GLKBaseEffect`，我对此无能为力。这是真的？我发现建议的唯一解决方案是`GLKBaseEffect`完全报废。

如果是这种情况，我必须滚动我自己的自定义顶点和片段着色器。但是，我不知道该怎么做。对于创建自定义着色器和调整上述教程中的代码以改用这些代码，我将不胜感激。

非常感谢您的宝贵时间。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:13:29.553

对于初学者，在 XCode 中执行 File->New Project 并选择“OpenGL Game”。

如果你选择运行它，你会得到 2 个相互环绕的立方体。

看看 shader.fsh 和 shader.vsh。在 viewcontroller.m 中，检查 compilerShader、linkProgram 和 validateProgram（它们编译着色器）。

检查该示例应用程序应该足以让您“了解如何让着色器运行”，然后搜索一些 OpenGL ES 2.0 着色器教程或查看 Apple 代码库中的一些示例应用程序。

注意：从 Apple 内置的简单效果到着色器是一个非常宽的“峡谷”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:39:11.063

好吧，经过相当多的拖延，我决定硬着头皮去做。泄漏现在已经消失了，尽管我花了一段时间才让它工作。我通读了*[OpenGL ES 2.0 for iPhone 第 4 章](http://iphonedevelopment.blogspot.ca/2010/11/opengl-es-20-for-ios-chapter-4.html)*，了解了顶点和片段着色器以及如何编译和链接它们。在了解了它的工作原理后，我将作者的`GLProgram`帮助类放入我的项目中，以处理所有样板文件并快速开始工作。[然后，我创建了两个着色器，与此处](https://stackoverflow.com/a/11642818/1354100)找到的几乎相同。

我按照他的说明获取属性和统一位置并将它们存储在一个结构中，并在初始化时将它们全部传递给我的精灵对象。然后，当需要渲染时，我传递了我的属性的所有信息，就像我之前使用`GLKBaseEffect`;时所做的那样。唯一的区别（除了手动将纹理绑定到纹理单元之外）是我必须自己传入`modelviewMatrix`和`projectionMatrix`制服，而不是设置`GLKBaseEffect`属性。

# c# - SpriteBatch System.ArgumentNullException

> ID：14300459
> 
> 赞同：0
> 
> 时间：2013-01-13T03:41:07.813
> 
> 标签：c#, xna, argumentnullexception, spritebatch

我正在写一个基于网格运动的简单游戏，比如推箱子游戏。我需要使用几个不同的文本文件来存储关卡。我写了一些代码，现在我得到错误：

> System.ArgumentNullException “此方法不接受此参数的 null。Nazwa 参数：纹理”

整个代码在几个文件中。我的代码有什么问题？

游戏1.cs

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Sokoban
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        public Texture2D tOtoczenie;
        public Rectangle kOtoczenie;

        Sceny scena;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            graphics.PreferredBackBufferHeight = 660; // 11
            graphics.PreferredBackBufferWidth = 900; // 15
            Content.RootDirectory = "Content";
        }

        // Sterowanie po gridzie (en - grid movement with stops)
        KeyboardState stanKlawiatury, poprzedniStanKlawiatury;

        public bool WcisnietyKlawisz(Keys klawisz)
        {
            return stanKlawiatury.IsKeyDown(klawisz) && poprzedniStanKlawiatury.IsKeyUp(klawisz);
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        /// 

        protected override void Initialize()
        {
            // TODO: Add your initialization logic here
            scena = new Sceny();

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            // TODO: use this.Content to load your game content here
            tOtoczenie = Content.Load<Texture2D>("Otoczenie");
            kOtoczenie = new Rectangle(0, 0, 900, 660);
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            // TODO: Add your update logic here

            poprzedniStanKlawiatury = stanKlawiatury;
            stanKlawiatury = Keyboard.GetState();

            if (WcisnietyKlawisz(Keys.Right))
                scena.wspX += 60;

            else if (WcisnietyKlawisz(Keys.Left))
                scena.wspX -= 60;

            else if (WcisnietyKlawisz(Keys.Up))
                scena.wspY -= 60;

            else if (WcisnietyKlawisz(Keys.Down))
                scena.wspY += 60;

            if (Keyboard.GetState().IsKeyDown(Keys.NumPad1))
                scena.LoadScene("level1");

            scena.Update();
            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            // TODO: Add your drawing code here
            spriteBatch.Begin();
            spriteBatch.Draw(tOtoczenie, kOtoczenie, Color.White);
            spriteBatch.End();
            scena.Draw(spriteBatch);

            base.Draw(gameTime);
        }
    }
} 
```

风景.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;
using System.IO;
using Microsoft.Xna.Framework.Content;

namespace Sokoban
{
    public class Sceny
    {
        public List<ObiektyGry> sciany;
        public List<ObiektyGry> sloty;
        public List<ObiektyGry> diamenty;
        public List<ObiektyGry> graczL;

        public Texture2D tDiament;
        public Texture2D tSlot;
        public Texture2D tSciana;

        public Rectangle kDiament;
        public Rectangle kSlot;
        public Rectangle kSciana;

        public Texture2D tGracz;
        public Rectangle kGracz;

        public int wspX;
        public int wspY;

        public Sceny()
        {
            sciany = new List<ObiektyGry>();
            sloty = new List<ObiektyGry>();
            diamenty = new List<ObiektyGry>();
            graczL = new List<ObiektyGry>();
        }

        public void LoadContent(ContentManager theContentManager, string theAssetName)
        {
            tGracz = theContentManager.Load<Texture2D>("Gracz");
            tDiament = theContentManager.Load<Texture2D>("Diament");
            tSlot = theContentManager.Load<Texture2D>("Slot");
            tSciana = theContentManager.Load<Texture2D>("Ściana");
        }

        public void Update()
        {
            foreach (ObiektyGry obiekt in sciany)
                obiekt.Update();
            foreach (ObiektyGry obiekt in sloty)
                obiekt.Update();
            foreach (ObiektyGry obiekt in diamenty)
                obiekt.Update();
            foreach (ObiektyGry obiekt in graczL)
                obiekt.Update();
        }

        public void Draw(SpriteBatch spriteBatch)
        {
            foreach (ObiektyGry obiekt in sciany)
                obiekt.Draw(spriteBatch, obiekt.Tekstura, obiekt.Kształt);
            foreach (ObiektyGry obiekt in sloty)
                obiekt.Draw(spriteBatch, obiekt.Tekstura, obiekt.Kształt);
            foreach (ObiektyGry obiekt in diamenty)
                obiekt.Draw(spriteBatch, obiekt.Tekstura, obiekt.Kształt);
            foreach (ObiektyGry obiekt in graczL)
                obiekt.Draw(spriteBatch, obiekt.Tekstura, obiekt.Kształt);
        }

        public void LoadScene(string name)
        {
            sciany.Clear();
            graczL.Clear();
            diamenty.Clear();
            sloty.Clear();

            StreamReader reader = new StreamReader(name+".txt");

            int x = 0;
            int y = 0;

            string file = reader.ReadToEnd();

            for (int i = 0; i<file.Length; i++)
            {
                if (file[i] == 13)
                {
                    y++;
                    x = 0;
                }
                else if (file[i] != 10)
                    x++;

                if (file[i] == '1' ) // sciana
                {
                    ObiektyGry sciana = new ObiektyGry();
                    sciana.Kształt = new Rectangle(x * 60, y * 60,60,60);
                    sciana.Tekstura = tSciana;
                    sciany.Add(sciana);
                }

                else if (file[i] == '2') // slot
                {
                    ObiektyGry slot = new ObiektyGry();
                    slot.Kształt = new Rectangle(x * 60, y * 60, 60, 60);
                    slot.Tekstura = tSlot;
                    sloty.Add(slot);
                }

                else if (file[i] == '3') // diament
                {
                    ObiektyGry diament = new ObiektyGry();
                    diament.Kształt = new Rectangle(x * 60, y * 60, 60, 60);
                    diament.Tekstura = tDiament;
                    diamenty.Add(diament);
                }

                else if (file[i] == '4') //gracz
                {
                    ObiektyGry gracz = new ObiektyGry();
                    wspX = x * 60;
                    wspY = y * 60;
                    gracz.Kształt = new Rectangle(wspX, wspY, 60, 60);
                    gracz.Tekstura = tGracz;
                    graczL.Add(gracz);
                }
            }
        }
    }
} 
```

ObiektyGry.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Content;

namespace Sokoban
{

    public class ObiektyGry
    {
        public Rectangle Kształt { get; internal set; }
        public Texture2D Tekstura { get; internal set; }
        public static ContentManager contentManager;

        public ObiektyGry()
        {

        }

        public void Update()
        {

        }

        public void Draw(SpriteBatch spriteBatch, Texture2D Tekstura, Rectangle Ksztalt)
        {
            //Tekstura = obiekt.Tekstura;
            //Kształt = obiekt.Kształt;

            //spriteBatch.Begin();
            spriteBatch.Draw(Tekstura, Ksztalt, Color.White);
            //spriteBatch.End();
        }
    }
} 
```

level1.txt（例如）

```
111111111111111
100000000000001
100000000000001
100000000000001
100020000000001
100000034000001
100000000000001
100000000000001
100000000000001
100000000000001
111111111111111 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T01:48:16.137

因此，我删除了所有 Scney 类，并在 Game1 类中实现了关卡更改。在那之后，我对纹理完全没有任何问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:26:59.970

是的，正如评论中已经提到的，你还没有为你的场景加载你的纹理。我看到你已经加载了你的关卡，但没有加载你的纹理......

# mongodb - MongoDB查询与计数相同的集合

> ID：14300461
> 
> 赞同：1
> 
> 时间：2013-01-13T03:41:20.187
> 
> 标签：mongodb, mapreduce, aggregation-framework

我只有一个集合“详细信息”。它以不同的别名在查询中使用两次。由于 Mongo 没有别名，我认为 mapreduce 会给出结果。我也尝试过展开聚合，但它会在字段上展开，而不是在集合上展开。有关聚合或 mapreduce 的任何帮助。

```
Collection:

"details"
    {
        "user_id":1,
        "lft":2
        "rgt":5
    },
    {
        "user_id":2,
        "lft":1
        "rgt":6
    },
    {
        "user_id":3,
        "lft":3
        "rgt":4
    } 
```

SQL查询：

```
SELECT CONCAT( REPEAT('-', COUNT(parent.user_id) - 1), node.user_id) 
    AS user_id
FROM details AS node,
    details AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
GROUP BY node.user_id
ORDER BY node.lft; 
```

它应该输出：

```
 1
  -2
  --3 
```

我努力了：

```
 $mongodb = Connections::get('default')->connection;
    $details = Details::connection()->connection->command(array(
        'aggregate' => 'details',
        'pipeline' => array( 
            array('$project' => array( 
                    '_id' => array(
                        'parent'=>array(
                            'puser_id'=>'$user_id',
                            'pleft'=>'$left',
                            'pright'=>'$right',                     
                            ),
                        'node'=>array(
                            'nuser_id'=>'$user_id',
                            'nleft'=>'$left',
                            'nright'=>'$right',
                            )
                        ),

                    ),
                    '$group'=>array('_id'=>'$_id.parent.puser_id'),
                    '$match' => array(
                        '$_id.node.nleft'=>array('$gt'=>'$_id.parent.pleft'),
                        '$_id.node.nright'=>array('$gt'=>'$_id.parent.pright')
                            )
            ),
        )
    )); 
```

我被困在 $group 和 $match 上！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T07:34:45.700

我通过更改架构找到了答案：

```
{
"_id": ObjectId("5114a7eb9d5d0c640900001e"),
"user_id": "5114a7eb9d5d0c640900001d",
"username": "user8",
"refer_username": "user7",
"refer_id": "5114a7c59d5d0c6409000018",
    "ancestors": {
    "0": null,
     "1": "Initial",
     "2": "user6",
     "3": "user7"
    },
} 
```

这有助于我通过使用查询找到所有祖先：

```
 user_id = '5114a7eb9d5d0c640900001d'
 db.details.find({'user_id':user_id}); 
```

以及使用查询的所有后代：

```
 username = 'user8'
 db.details.find('ancestors':username) 
```

在不使用 Map/Reduce 和使用聚合框架的情况下，使用 $unwind 函数我能够计算用户的所有祖先和后代。

您可以查看此页面：[http](http://docs.mongodb.org/manual/tutorial/model-tree-structures/) ://docs.mongodb.org/manual/tutorial/model-tree-structures/它将真正提高您对 MongoDB 模型树结构的理解。它比 MySQL 更快更好。

# javascript - 使用 setTimeout 的变量范围

> ID：14300469
> 
> 赞同：1
> 
> 时间：2013-01-13T03:42:46.103
> 
> 标签：javascript, scope, settimeout

我很高兴它可以工作，但仍然对以下代码中“me”变量的范围有些困惑。现在使用它一段时间，但无法弄清楚它为什么起作用。

```
var timer=function(){
    this.timerMember=1;
    this.timerID=0;
    this.startTimer=function(){
        var me=this;
        this.timerID=setTimeout(function(){
            //shares scope with this.startTimer
            //timerMember is 2 here
            console.log(me.timerMember);
            // this is window
            console.log(this);
            // me doesn't exist in window
            console.log(this.me);
        },0);
//  this code gets executed before anonymous
//  timer function
//        clearTimeout(this.timerID);
        this.timerMember++;
    }
}
var t=new timer();
t.startTimer(); 
```

传递给 setTimeout 的匿名函数似乎与 timer.startTimer 共享范围，但 startTimer 显然在匿名函数执行时已完成（me.timerMemer = 2），因此当 startTimer 完成时， me 变量应该超出范围。对我来说幸运的是，JavaScript 会一直保留它，直到执行匿名函数（适用于所有浏览器），但我想知道这是否是正确的方法。这种行为是故意的还是只是幸运的意外？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T03:57:02.313

这是设计使然。这叫做闭包。

当一个函数在另一个函数内部定义时，外部函数中的局部变量被放入一个闭包中，这样它们即使在外部函数结束后仍然存在。内部函数保留闭包，以便以后可以访问变量。

# android - 单击按钮时如何取消声音？

> ID：14300474
> 
> 赞同：-4
> 
> 时间：2013-01-13T03:43:28.173
> 
> 标签：android, audio, button

我正在开发一个 Android 应用程序。单击按钮时如何取消声音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:32:28.167

你的意思是默认的触摸反馈声音吗？它来自手机的设置，与特定应用程序无关。

# windows-phone-7 - 应用程序启动时的 MessageBoxShow

> ID：14300475
> 
> 赞同：0
> 
> 时间：2013-01-13T03:43:47.127
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone, windows-phone-8

如何在应用程序启动后立即显示消息框。我想在我的应用程序中添加一条欢迎消息。例如：MessageBox.Show("Welcome");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:09:25.723

> “从 OnNavigatedTo(NavigationEventArgs) 方法中调用 Show(String) 方法。如果从应用程序 Activated 和 Launching 事件处理程序中调用 Show(String) 方法，则会引发 InvalidOperationException，并显示错误消息显示消息框。”

MSDN 来源@http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947(v=vs.105).aspx)

# jquery - 基于浏览器类型的jQuery语句

> ID：14300476
> 
> 赞同：0
> 
> 时间：2013-01-13T03:43:56.030
> 
> 标签：jquery

我有 jQuery 浏览器插件，我正在尝试组合一个 if 语句来根据用户浏览器类型添加一些类。我知道有更简单的方法可以做到这一点，但我必须用 jQuery 来做。下面的陈述对我不起作用。我可以弹出警报，但 addClass 不起作用。

```
var bro = $.browser;
if (bro.chrome) {
    $("#wrap").addClass("chrome");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:17:11.907

我使用以下代码在我的一个 js 文件中检测浏览器。

> (函数($) { var userAgent = navigator.userAgent.toLowerCase();

$.browser = { 版本: (userAgent.match( /.+(?:rv|it|ra|ie)/: / ) || [0,'0'])[1],
safari: /webkit/.测试（userAgent），
歌剧：/opera/.test（userAgent），
msie：/msie/.test（userAgent）&&！/opera/.test（userAgent），
mozilla：/mozilla/.test（userAgent）&&！/ (兼容|webkit)/.test(userAgent)
};

```
})(jQuery); 
```

并应用条件：if (jQuery.browser.msie) 来检查 IE(here) 我需要检查浏览器类型的地方。希望这会帮助你。谢谢

# jquery - 如何使用 jQuery UI 幻灯片效果制作更流畅的动画

> ID：14300485
> 
> 赞同：1
> 
> 时间：2013-01-13T03:46:56.597
> 
> 标签：jquery, css, user-interface, slide

我正在尝试将 jQuery UI 幻灯片效果用于下拉菜单中按钮的动画外观，但从左到右滑动的按钮动画似乎过于锯齿状，尤其是在涉及更多代码时。有没有办法让它更流畅？这是加载元素（图像/按钮）位置的时间问题吗？如果是这样，我该如何解决它还是其他问题？

这是一个例子：

[http://jsfiddle.net/userdude/ptnaP/6/](http://jsfiddle.net/userdude/ptnaP/6/)

上面 jsFiddle 链接中的代码包含指向 jQuery UI 包的实时链接……但使用自定义最小化版本，仅包括核心元素和滑动和拖放效果库似乎不会使动画更流畅。

jQuery：

```
$(document).ready(function(){
$(".bc").hide();
$(".bc img").hide();
$("#header").click(function(){

var selectedEffect = "slide";
$(".bc").stop(true, true).delay(500).slideDown(500);
$("#1").stop(true, true).delay(800).effect(selectedEffect,600);
$("#2").stop(true, true).delay(1200).effect(selectedEffect,600);
$("#3").stop(true, true).delay(1600).effect(selectedEffect,600);
}); 
```

});

HTML：

```
<div id="header">Click Me</div>
<div class="bc">
  <img src="http://i49.tinypic.com/t9a8sn.png" id="1" />
  <img src="http://i49.tinypic.com/t9a8sn.png" id="2"/>
  <img src="http://i49.tinypic.com/t9a8sn.png" id="3"/>
</div> 
```

CSS：

```
div.bc {
border: 15px #1d1d1d solid;
border-radius:10px;
margin:50px auto;
width: 320px;
height: 250px;
}
div.bc img {
margin-top:22px;
width:283px;
height:53px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T04:35:19.303

好吧，试试这个：

**CSS**

```
div.bc {
  border: 15px #1d1d1d solid;
  -moz-border-bottom-colors: #171717 #171717 #171717 #171717 #b89f7d #171717 #202020 #3a3939 #b89f7d;
  -moz-border-top-colors: #171717 #171717 #171717 #171717 #b89f7d #171717 #202020 #3a3939 #b89f7d;
  -moz-border-left-colors: #171717 #171717 #171717 #171717 #b89f7d #171717 #202020 #3a3939 #b89f7d;
  -moz-border-right-colors: #171717 #171717 #171717 #171717 #b89f7d #171717 #202020 #3a3939 #b89f7d;
  border-radius:10px;
  margin:50px auto;
  width: 320px;
  padding: 0;
  height: 250px;
}
div.bc img {
  display: inline-block;
  margin-top:22px;
  width: 282px;
  border: 19px solid transparent;
  border-top-width: 0;
  border-bottom-width: 0;
  height:53px;
} 
```

**jQuery**

```
<div id="header">Click Me</div>
<div class="bc">
  <img src="http://i49.tinypic.com/t9a8sn.png" id="1" />
  <img src="http://i49.tinypic.com/t9a8sn.png" id="2" />
  <img src="http://i49.tinypic.com/t9a8sn.png" id="3" />
</div>
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<script>
  (function load($) {
    var $bc = $(".bc"),
      $imgs = $bc.children("#1, #2, #3"),
      $header = $("#header"),
      effect = 'slide';

    $bc.hide();
    $imgs.hide();

    $header.click(function() {
      $bc.hide();
      $imgs.hide();

      $bc.stop(true, true).delay(500).slideDown(500);

      $imgs
        .filter('#1').delay(800).effect(effect, 600).end()
        .filter('#2').delay(1200).effect(effect, 600).end()
        .filter('#3').delay(1600).effect(effect, 600).end();
    });
  })(jQuery);
</script> 
```

[http://jsfiddle.net/userdude/ptnaP/9/](http://jsfiddle.net/userdude/ptnaP/9/)

看看你能不能发现问题。另外，删除`XHTML`文档类型。只需使用`<!doctype html>`.

# vb.net - 在 OpenDialog 中预览图像

> ID：14300488
> 
> 赞同：1
> 
> 时间：2013-01-13T03:47:11.263
> 
> 标签：vb.net, image, preview, fileopendialog

在 Visual Basic.NET 中，通过 OpenFileDialog 控件浏览文件时，是否可以在 OpenDialog 中选择图像时显示图像预览？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:51:32.147

OpenFileDialog 是一个高级的内置对话框。previw 图片选项不存在。如果你想要它，你必须开发另一个对话框。

# java - 访问 SharedPreference 在 Android 中不起作用

> ID：14300494
> 
> 赞同：1
> 
> 时间：2013-01-13T03:48:43.287
> 
> 标签：java, android, sharedpreferences

我有两个活动。在第一个活动中，我将字符串放入共享首选项中。然后我记录 getString ，我看到它出现了。然后我进入第二个活动，我敬酒 getString，我得到了显示的默认值。

第一个活动代码：

```
SharedPreferences.Editor pref_editor = mcontext.getSharedPreferences("Prefs", Context.MODE_PRIVATE).edit();
SharedPreferences pref = mcontext.getSharedPreferences("Prefs", Context.MODE_PRIVATE);
pref_editor.putString("test", "It works!").commit();
Log.d("XXX", pref.getString("test", "ERRRROR")); 
```

第二个活动代码：

```
SharedPreferences pref = mcontext.getSharedPreferences("Prefs", Context.MODE_PRIVATE);
String current = pref.getString("test", "ERROR");
Toast.makeText(getApplicationContext(), current,
                Toast.LENGTH_SHORT).show(); 
```

知道为什么我在敬酒时会得到“错误”的默认值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T04:43:49.320

请试试这个： -

```
SharedPreferences pref = mcontext.getSharedPreferences("Prefs", Context.MODE_PRIVATE);
SharedPreferences.Editor pref_editor = pref.edit();
pref_editor.putString("test", "It works!")
pref_editor.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T03:51:00.853

您没有在编辑器上调用 commit。在调用提交之前，这些更改是批处理的并且不会写入磁盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T04:27:53.340

从[这个SO帖子](https://stackoverflow.com/a/10186553/838023) 你试过apply（）吗？

# c# - How to make custom Rectangle property work with corresponding struct's properties?

> ID：14300497
> 
> 赞同：1
> 
> 时间：2013-01-13T03:49:32.987
> 
> 标签：c#, properties, struct

I have a `Rectangle` property in my class, which I'd like to make accept `Width` and `Height` correctly, and also return them, as if I was dealing with a normal `Rectangle`.

```
Vector2 position;
Rectangle rectangle;
public Rectangle Rect
    {
        get { return rectangle;  }
        set { rectangle = value; position.X = value.X; position.Y = value.Y; }
    } 
```

Seems fine, works great. Except for when you want to get or set `Width` or `X` specifically.

How do I make that possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T04:41:27.343

If the semantics of your class are such that you can be 100% certain that you're never going to care when outsiders adjust `Rect`, just expose it as a field and callers will be able to set its fields directly. If you cannot make that guarantee, then you might consider offering a method which passes `rectangle` to a callback method:

```
delegate void ActionByRef<T1>(ref T1 p1, ref T2 p2);
delegate void ActionByRef<T1,T2>(ref T1 p1, ref T2 p2);
delegate void ActionByRef<T1,T2,T3>(ref T1 p1, ref T2 p2, ref T3 p3);
void ActOnRect(ActionByRef<Rectangle> proc)
  { proc(ref rectangle); position.X = value.X; position.Y = value.Y; }
void ActOnRect<TP1>(ActionByRef<Rectangle,TP1> proc, ref TP1 p1)
  { proc(ref rectangle, ref p1); position.X = value.X; position.Y = value.Y; }
void ActOnRect<TP1,TP2>(ActionByRef<Rectangle,TP1> proc, ref TP1 p1, ref TP2 p2)
  { proc(ref rectangle, ref p1, ref p2); position.X = value.X; position.Y = value.Y; } 
```

That approach will avoid anyone having to make a copy of `rectangle` just to change one of its members. Probably not worth it with a 16-byte structure, but maybe worthwhile if a larger structure is necessary.

A third approach would be to simply require your callers to do something like:

```
var r = myThing.Rect;
r.X = 23;
myThing.Rect = r; // Or perhaps myThing.SetRect(R); 
```

The final approach I'd suggest would be to follow the pattern of `Control.SetBounds`, which includes an overload that takes the `Rectangle` members as separate parameters, but takes an additional parameter which specifies which parameter or parameters should be copied to the appropriate members of `Bounds`.

# sql - 为什么这条 SQL 语句会这样工作？

> ID：14300500
> 
> 赞同：1
> 
> 时间：2013-01-13T03:50:00.023
> 
> 标签：sql, sql-server, tsql

我一直在寻找一种进行 SQL 查询的好方法，在其中我可以有一个 where 语句，如果留空，它将表现得就像它根本不存在一样。我发现了这个，它似乎工作得很好：

```
WHERE (Column = @value OR @value is null) 
```

如果我为@value 指定一个值，则搜索会按照我的意愿进行过滤。但是如果我传入 null，就好像说 @value 可以是任何东西。我喜欢这个。这很好。但我不明白的是，为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T03:57:41.700

如果@value 为空，您的 WHERE 子句：

```
WHERE (Column = @value OR @value is null) 
```

减少到

```
WHERE (Column = @value OR 1=1) 
```

（这与`if (Column == value || true)`其他常用语言类似）

如果任何一个操作数（边）为真，则 OR 连接为真：[SQL 使用三值逻辑](http://en.wikipedia.org/wiki/Three-valued_logic)

```
+---------+------+---------+---------+
| A OR B  | TRUE | Unknown |  FALSE  |
+---------+------+---------+---------+
| TRUE    | TRUE | TRUE    | TRUE    |
| Unknown | TRUE | Unknown | Unknown |
| FALSE   | TRUE | Unknown | FALSE   |
+---------+------+---------+---------+ 
```

所以：

*   如果@value 为null，则WHERE 子句的右侧为真，因此整个条件为真，并且您的WHERE 子句将始终得到满足。
*   如果@value*不为*null，那么你的WHERE子句右边为假，那么是否满足WHERE子句取决于是否`Column = @value`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T03:59:23.470

嗯，有两种情况：

1) @value 是“某物”。

在这种情况下，第二个子句始终为假，因为“某事”永远不会为空。所以剩下的就是`WHERE Column = @value`.

2) @value 为空

在这种情况下，第二个子句总是假的，因为 null 永远不会等于任何东西。所以实际上剩下的就是`WHERE @value is null`@value 已知为空，所以这就像`WHERE 1 = 1`整个 WHERE 被忽略。数据库应该足够聪明，可以在接触任何数据之前弄清楚这一点，所以这应该就像根本没有指定条件一样执行。

因此，您在这里拥有的是一个可以像两个一样运行的单个 SQL 语句，带有一个“可选的 WHERE”。对于这两种情况，两个单独的 SQL 语句相比的优势在于，在构建 SQL 语句时不需要在应用程序中使用条件逻辑（如果有多个“切换”，这会变得非常麻烦）。

# c - 更快的算法来找出有多少数字不能被给定的一组数字整除

> ID：14300507
> 
> 赞同：7
> 
> 时间：2013-01-13T03:51:28.703
> 
> 标签：c, algorithm, subset, lcm

我正在尝试解决在线法官问题： http: [//opc.iarcs.org.in/index.php/problems/LEAFEAT](http://opc.iarcs.org.in/index.php/problems/LEAFEAT)

简而言之，问题是：

如果给定一个整数 L 和一组 N 个整数 s1,s2,s3..sN，我们必须找出从 0 到 L-1 有多少个数不能被任何 'si' 整除。

例如，如果给定我们， `L = 20`那么`S = {3,2,5}`从 0 到 19 有 6 个数字不能被 3,2 或 5 整除。

L <= 1000000000 和 N <= 20。

我使用了包含-排除原则来解决这个问题：

```
/*Let 'T' be the number of integers that are divisible by any of the 'si's in the 
given range*/

for i in range 1 to N
  for all subsets A of length i
    if i is odd then:
      T += 1 + (L-1)/lcm(all the elements of A)
    else
      T -= 1 + (L-1)/lcm(all the elements of A)
return T 
```

这是我解决这个问题的代码

```
#include <stdio.h>

int N;
long long int L;
int C[30];

typedef struct{int i, key;}subset_e;
subset_e A[30];
int k;

int gcd(a,b){
int t;
    while(b != 0){
            t = a%b;
            a = b;
            b = t;
    }

    return a;
}

long long int lcm(int a, int b){
    return (a*b)/gcd(a,b);
}

long long int getlcm(int n){
  if(n == 1){
    return A[0].key;
  }
  int  i;
  long long int rlcm = lcm(A[0].key,A[1].key);
  for(i = 2;i < n; i++){
    rlcm = lcm(rlcm,A[i].key);
  }
  return rlcm;
}

int next_subset(int n){
  if(k == n-1 && A[k].i == N-1){
    if(k == 0){
      return 0;
    }
    k--;
  }
  while(k < n-1 && A[k].i == A[k+1].i-1){
    if(k <= 0){
      return 0;
    }
    k--;
  }
  A[k].key = C[A[k].i+1];
  A[k].i++;
  return 1;
}

int main(){
  int i,j,add;
  long long int sum = 0,g,temp;
  scanf("%lld%d",&L,&N);
  for(i = 0;i < N; i++){
    scanf("%d",&C[i]);
  }
  for(i = 1; i <= N; i++){
    add = i%2;
    for(j = 0;j < i; j++){
      A[j].key = C[j];
      A[j].i = j;
    }
    temp = getlcm(i);
    g = 1 + (L-1)/temp;
    if(add){
      sum += g;
    } else {
      sum -= g;
    }
    k = i-1;
    while(next_subset(i)){
      temp = getlcm(i);
      g = 1 + (L-1)/temp;
      if(add){
        sum += g;
      } else {
        sum -= g;
      }
    }
  }
  printf("%lld",L-sum);
  return 0;
} 
```

`next_subset(n)`生成数组中大小为 n 的下一个子集，`A`如果没有子集，则返回 0，否则返回 1。它基于[此](https://stackoverflow.com/questions/8561166/best-recursive-algorithm-to-print-out-subsets)stackoverflow 问题中接受的答案所描述的算法。

该`lcm(a,b)`函数返回 a 和 b 的 lcm。该`get_lcm(n)`函数返回 中所有元素的 lcm `A`。它使用属性：`LCM(a,b,c) = LCM(LCM(a,b),c)`

当我将问题提交给法官时，它会给我一个“超出时间限制”。如果我们使用蛮力解决这个问题，我们只能得到 50% 的分数。

由于最多可以有 2^20 个子集，我的算法可能会很慢，因此我需要一个更好的算法来解决这个问题。

**编辑：**

在编辑我的代码并将函数更改为欧几里得算法后，我得到了错误的答案，但我的代码在时间限制内运行。它给了我对示例测试的正确答案，但对任何其他测试用例都没有；这是我运行代码的[ideone](http://ideone.com/H0g8Bz)的链接，第一个输出是正确的，但第二个不是。

我解决这个问题的方法正确吗？如果是，那么我在代码中犯了一个错误，我会找到它；否则谁能解释什么是错的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T04:09:16.603

您也可以尝试更改您的`lcm`函数以使用[Euclidean algorithm](http://en.wikipedia.org/wiki/Euclidean_algorithm)。

```
int gcd(int a, int b) {
    int t;

    while (b != 0) {
        t = b;
        b = a % t;
        a = t;
    }

    return a;
}

int lcm(int a, int b) {
    return (a * b) / gcd(a, b);
} 
```

至少对于 Python，两者之间的速度差异非常大：

```
>>> %timeit lcm1(103, 2013)
100000 loops, best of 3: 9.21 us per loop
>>> %timeit lcm2(103, 2013)
1000000 loops, best of 3: 1.02 us per loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T04:03:39.323

`k`通常，一个子集的最小公倍数`s_i`将超过远小于 20。所以你需要尽早停止`L`。`k`

可能只是插入

```
if (temp >= L) {
    break;
} 
```

后

```
while(next_subset(i)){
  temp = getlcm(i); 
```

就足够了。

此外，如果 中有任何`1`s，则`s_i`所有数字都可以被 1 整除。

我认为以下会更快：

```
unsigned gcd(unsigned a, unsigned b) {
    unsigned r;
    while(b) {
        r = a%b;
        a = b;
        b = r;
    }
    return a;
}

unsigned recur(unsigned *arr, unsigned len, unsigned idx, unsigned cumul, unsigned bound) {
    if (idx >= len || bound == 0) {
        return bound;
    }
    unsigned i, g, s = arr[idx], result;
    g = s/gcd(cumul,s);
    result = bound/g;
    for(i = idx+1; i < len; ++i) {
        result -= recur(arr, len, i, cumul*g, bound/g);
    }
    return result;
}

unsigned inex(unsigned *arr, unsigned len, unsigned bound) {
    unsigned i, result = bound, t;
    for(i = 0; i < len; ++i) {
        result -= recur(arr, len, i, 1, bound);
    }
    return result;
} 
```

调用它

```
unsigned S[N] = {...};
inex(S, N, L-1); 
```

您无需在任何地方为 0 添加 1，因为 0 可以被所有数字整除，计算`1 <= k < L`不能被 any 整除的数字的计数`s_i`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T04:53:26.487

恐怕您对问题的理解可能不正确。

你有 L。你有一组由 K 个元素组成的 S。您必须计算 L / Si 的商的总和。对于 L = 20、K = 1、S = { 5 }，答案就是 16 (20 - 20 / 5)。但是 K > 1，所以你也必须考虑公倍数。

为什么要遍历子集列表？它不涉及子集计算，只涉及除法和乘法。

你有 K 个不同的整数。每个数字都可以是质数。您必须考虑公倍数。就这样。

**编辑**

L = 20 和 S = {3,2,5}

叶子可以被 3 吃掉 = 6
叶子可以被 2 吃掉 = 10
叶子可以被吃掉 5 = 4

S的公倍数，小于L，不在S = 6, 10, 15

实际吃掉的叶子 = 20/3 + 20/2 + 20/5 - 20/6 - 20/10 - 20/15 = 6

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T05:28:11.557

创建一个包含 L 个条目的标志数组。然后标记每个接触的叶子：

```
for(each size in list of sizes) {
    length = 0;
    while(length < L) {
        array[length] = TOUCHED;
        length += size;
    }
} 
```

然后找到未触及的叶子：

```
for(length = 0; length < L; length++) {
    if(array[length] != TOUCHED) { /* Untouched leaf! */ }
} 
```

请注意，不涉及乘法和除法；但是您最多需要大约 1 GiB 的 RAM。如果 RAM 有问题，您可以使用位数组（最大 120 MiB）。

但这只是一个开始，因为可以复制而不是生成重复的模式。第一个模式是从 0 到 S1*S2，接下来是从 0 到 S1*S2*S3，接下来是从 0 到 S1*S2*S3*S4，以此类推。

基本上，您可以将 S1 和 S2 触及的所有值从 0 设置为 S1*S2；然后将模式从 0 复制到 S1*S2 直到到达 S1*S2*S3 并设置 S3 和 S1*S2*S3 之间的所有 S3；然后复制该模式，直到到达 S1*S2*S3*S4 并将所有 S4 设置在 S4 和 S1*S2*S3*S4 之间，依此类推。

下一个; 如果 S1*S2*...Sn 小于 L，则您知道该模式将重复并且可以从该模式生成从 S1*S2*...Sn 到 L 长度的结果。在这种情况下，数组的大小只需为 S1*S2*...Sn 而不必为 L。

最后，如果 S1*S2*...Sn 大于 L；然后您可以生成 S1*S2*...(Sn-1) 的模式并使用该模式创建从 S1*S2*...(Sn-1) 到 S1*S2*...Sn 的结果。在这种情况下，如果 S1*S2*...(Sn-1) 小于 L，则数组不需要像 L 一样大。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-13T05:44:55.063

您可以跟踪每个尺寸的下一个接触叶子的距离。到下一个触摸叶子的距离将是恰好是最小的距离，并且您将从所有其他距离中减去该距离（并在距离为零时换行）。

例如：

```
 int sizes[4] = {2, 5, 7, 9};
 int distances[4];
 int currentLength = 0;

 for(size = 0 to 3) {
     distances[size] = sizes[size];
 }

 while(currentLength < L) {
     smallest = INT_MAX;
     for(size = 0 to 3) {
         if(distances[size] < smallest) smallest = distances[size];
     }
     for(size = 0 to 3) {
         distances[size] -= smallest;
         if(distances[size] == 0) distances[size] = sizes[size];
     }
     while( (smallest > 1) && (currentLength < L) ) {
         currentLength++;
         printf("%d\n", currentLength;
         smallest--;
     }
 } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-14T17:39:29.080

@A.06：您是在 opc 上使用用户名 linkinmew 的那个，仪式？

无论如何，答案只需要你制作所有可能的子集，然后应用包含排除原则。这将完全在给定数据的时间范围内。为了制作所有可能的子集，您可以轻松定义递归函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-21T08:01:41.720

我不懂编程，但在数学上有一个定理适用于 GCD 1 L=20, S=(3,2,5) (1-1/p)(1-1/q )(1-1/r).....以此类推 (1-1/3)(1-1/2)(1-1/5)=(2/3)(1/2)(4 /5)=4/15 4/15 表示每组 15 个数字中有 4 个数字不能被任何数字整除，其余的可以手动计算，例如。16, 17, 18, 19, 20 （只有 17 和 19 表示只有 2 个数字不能被任何 S 整除） 4+2=6 6/20 表示前 20 个数字中只有 6 个数字可以'不被任何 s 分割

# php - PHP oop Mysql获取变量属性

> ID：14300510
> 
> 赞同：0
> 
> 时间：2013-01-13T03:52:17.327
> 
> 标签：php, mysql, mysqli

我可以设法从我的数据库中获取一个字段，该字段返回一个具有几个属性的对象，例如 id、height、width、top ……其中一个属性称为 props，其中包含属性名称的数组我需要的，例如它可以是：（'top'，'bottom'，'left'，'right'）。现在我要做的是遍历 $props 值并从原始对象中获取属性，并将其添加到字符串中。因此，假设从数据库中获取的类称为 $element，我有：

```
 $props=$element->props;
    foreach($props as $property){
        $style .= $property." : ".$element->{$property}."; ";
    }
    unset($property); 
```

但我最终得到的 $style 是类似 `top : ; left : ; bottom : ; right : ;`的，显然`$element->{$property}`代码的一部分没有返回任何东西。我尝试了很多替代方案，但我无法弄清楚发生了什么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:27:18.313

如果您的对象确实具有诸如 的属性`top`，我会尝试这种方法，因为如果您尝试访问元素对象的 top|left|bottom|right 属性，则不需要花括号：

```
$props=$element->props;
foreach($props as $property){
    $style .= $property . " : " . $element->$property . "; ";
} 
```

如果我可以建议进行一些小调整以使您在这里所做的事情更加明显，那么字符串连接可能会变得非常难看，尤其是如果您使用的是在 PHP 中有意义的分号：

```
$props = $element->props;
foreach($props as $property){
    $style_format = '%s : %s; ";
    $style .= sprintf($style_format, $property, $element->$property);
} 
```

# python - 字典和 For 循环

> ID：14300511
> 
> 赞同：-1
> 
> 时间：2013-01-13T03:52:29.497
> 
> 标签：python

说下面是我们的代码：

```
d = {"Happy":"Clam", "Sad":"Panda"}
for i in d:
    print(i) 
```

now `print(i`) 将只打印出键，但是我如何更改它以便打印值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T03:55:12.853

```
d = {"Happy":"Clam", "Sad":"Panda"}
for i in d:
    print(i, d[i]) # This will print the key, then the value 
```

或者

```
d = {"Happy":"Clam", "Sad":"Panda"}
for k,v in d.items(): # A method that lets you access the key and value
    print(k,v) # k being the key, v being the value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T03:56:38.350

```
d = {"Happy":"Clam", "Sad":"Panda"}
for i in d:
        print(i, d[i]) 
```

给我：

```
('Sad', 'Panda')
('Happy', 'Clam') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T04:02:14.607

Python [dict](http://docs.python.org/2/library/stdtypes.html#dict)有许多方法可用于获取键、值或两者的列表。

要回答您的问题，您可以使用`d.values()`仅获取值列表：

```
d = {"Happy":"Clam", "Sad":"Panda"}
for v in d.values():
   print(v) 
```

输出：

```
Clam
Panda 
```

但是，该`items()`方法特别有用，因此应该提及。

```
d = {"Happy":"Clam", "Sad":"Panda"}
for k, v in d.items():
   print(k, v) 
```

将打印：

```
Happy Clam
Sad Panda 
```

关于文档中项目排序的警告：

> **CPython 实现细节：**键和值以非随机的任意顺序列出，因 Python 实现而异，并且取决于字典的插入和删除历史。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T09:14:57.100

一种简单的方法是使用 for each 循环

```
for value in d.values:
    print(value) 
```

你也可以做一个发电机。生成器是可以停止和恢复的可迭代序列。

```
def generator(input):
    for value in input.values():
        yield value

gen = generator(d);
print(d.next()) // Clam

// Doing complex calculations
answer = 21 + 21

print(d.next()) // Panda 
```

另一种方法是使用高阶函数'map'。

```
map( print, d.values() )

// You can also use generators ;)
map( print, gen ) 
```

最后，python 3 中的字典现在支持压缩。字典压缩非常适合创建字典，而不是打印每个条目值的内容。这是值得谷歌搜索的东西，因为 python 中的所有内容都是字典。

# nosql - 扫描具有受限读取或吞吐量限制的 dynamoDB 表

> ID：14300512
> 
> 赞同：2
> 
> 时间：2013-01-13T03:54:15.917
> 
> 标签：nosql, amazon-dynamodb

有没有人有一个示例 java 代码对 dynamoDB 表执行扫描操作，其中扫描操作仅使用特定百分比的吞吐量限制？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-14T16:03:44.133

昨天，我们在[AWS Java 开发人员博客](https://java.awsblog.com/)上发布了一篇关于如何[在 Amazon DynamoDB 中进行速率受限扫描的](http://java.awsblog.com/post/Tx3VAYQIZ3Q0ZVW/Rate-Limited-Scans-in-Amazon-DynamoDB)博文。我不确定您使用的是哪种编程语言，但如果您使用的是 Java，那么这种使用 GoogleGuava [RateLimiter](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html)类的方法可能适合您。但格雷格之前的回复也是正确的。如果您使用的是 Amazon Elastic Map Reduce，则 DynamoDB 插件支持可[配置的读取和写入吞吐量百分比](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/EMR_Hive_Optimizing.html)，以便在扫描表时将其限制为自身。DynamoDB 的[Amazon Redshift 集成](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/RedshiftforDynamoDB.html)也有此设置。

[以下是博客文章的片段，展示了如何使用 RateLimiter 和适用于 Java 的 AWS 开发工具包](http://aws.amazon.com/sdkforjava/)执行限制自身每秒消耗 25 个读取容量单位的分页扫描：

```
// Initialize the rate limiter to allow 25 read capacity units / sec
RateLimiter rateLimiter = RateLimiter.create(25.0);

// Track how much throughput we consume on each page
int permitsToConsume = 1;

// Initialize the pagination token
Map<String, AttributeValue> exclusiveStartKey = null;

do {
    // Let the rate limiter wait until our desired throughput "recharges"
    rateLimiter.acquire(permitsToConsume);

    // Do the scan
    ScanRequest scan = new ScanRequest()
        .withTableName("ProductCatalog")
        .withLimit(100)
        .withReturnConsumedCapacity(ReturnConsumedCapacity.TOTAL)
        .withExclusiveStartKey(exclusiveStartKey);
    ScanResult result = dynamodb.scan(scan);
    exclusiveStartKey = result.getLastEvaluatedKey();

    // Account for the rest of the throughput we consumed,
    // now that we know how much that scan request cost
    double consumedCapacity = result.getConsumedCapacity().getCapacityUnits();
    permitsToConsume = (int)(consumedCapacity - 1.0);
    if(permitsToConsume <= 0) {
        permitsToConsume = 1;
    }

    // Process results here
    processYourResults(result);

} while (exclusiveStartKey  != null); 
```

# c - getopt_long 保留可选参数的默认值

> ID：14300515
> 
> 赞同：1
> 
> 时间：2013-01-13T03:55:13.880
> 
> 标签：c, getopt-long

我正在尝试使用 getopt_long 进行一些基本的选项解析。我的具体问题是不使用该选项时会覆盖默认的 int 值。我已经阅读了有关 getopt 的文档和一些解释，但没有看到有关保留默认值/可选参数的任何内容。

编译并运行它，我希望端口/p 的默认值为 4567。当我不指定任何选项或使用 -p 5050 时，一切正常。当我使用其他选项（-t）时，-p 的值也会改变。

```
gcc -o tun2udp_dtls tun2udp_dtls.c
$ /tun2udp_dtls
port 4567 // correct
$ /tun2udp_dtls -p 5050
port 5050 // correct
$ ./tun2udp_dtls -t foo
port 0 // wtf!? 
```

编码：

```
#include <errno.h>
#include <fcntl.h>
#include <netinet/in.h>
#include <sys/ioctl.h>
#include <sys/select.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <string.h>
#include <unistd.h>
#include <getopt.h>
#include <stdio.h>
#include <stdlib.h> 

int main (int argc, char *argv[]) {
    // Vars
    char devname[128];
    int port = 4567;

    int c;
    while (1) {
        static struct option long_options[] = {
            {"tdev",  required_argument, NULL, 't'},
            {"port",  required_argument, NULL, 'p'},
            {0, 0, 0, 0}
        };
        int option_index = 0;
        c = getopt_long (argc, argv, "t:p:", long_options, &option_index);

        if (c == -1) break;
        switch (c) {
            case 't':
                strncpy(devname, optarg, sizeof(devname));
                devname[sizeof(devname)-1] = 0;
            case 'p':
                port = atoi(optarg);
            default:
                break;
        }
    }

    // Temporary debug printout
    printf("tdev '%s'\n", devname);
    printf("port %i\n", port);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:05:33.770

`break`之前失踪`case 'p':`。这就是控制`port=atoi(optarg);`在处理“t”时到达的原因。然后`atoi(optarg)`为非数字设备名称返回 0，并将此 0 分配给端口。

# html - 无法让浮动 div 与文本对齐中心一起使用

> ID：14300518
> 
> 赞同：0
> 
> 时间：2013-01-13T03:55:39.323
> 
> 标签：html, css, css-float

任何人都知道我怎样才能让它工作：

```
<div width="100%" style="background-color:#0000FA;">
    <div style="float:left;width:110px;background-color:#F1F1F1;">
        <form  action="/dashboard/" id="PREVIOUS_MONTH" method="post">
            <input type="submit" class="button-orange" value="Previous Month">
        </form>
    </div>

    <div style="float:left;width:300px;text-align:center;">
            January
    </div>

    <div style="float:right;width:80px;background-color:#F9F0F0;">
        <form action="/dashboard/" id="NEXT_MONTH" method="post">
            <input type="submit" class="button-orange" value="Next Month">
        </form>
    </div>
</div> 
```

我想要的只是在左侧获得左按钮，在右侧获得右按钮以及要在两个按钮之间对齐的文本，即在外部 div 的中间。

我尝试使用 display:inline 作为文本按钮，但我没有任何运气。

所以我的输出是：

左按钮---------------------文本------------按钮对

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T04:06:46.203

如果你不浮动文本，那么你应该很好。您还需要将浮动放在文本之前。

```
<div width="100%" style="background-color:#0000FA;">
    <div style="float:left;width:110px;background-color:#F1F1F1;">
        <form  action="/dashboard/" id="PREVIOUS_MONTH" method="post">
            <input type="submit" class="button-orange" value="Previous Month">
        </form>
    </div>

    <div style="float:right;width:80px;background-color:#F9F0F0;">
        <form action="/dashboard/" id="NEXT_MONTH" method="post">
            <input type="submit" class="button-orange" value="Next Month">
        </form>
    </div>

    <div style="text-align:center;">
            January
    </div>
</div> 
```

[http://jsfiddle.net/BXp9v/2/](http://jsfiddle.net/BXp9v/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T04:11:51.277

你有很多问题。正如詹姆斯所说，不要浮动文本。然后，您的两个输入都没有正确关闭，并且剩余两个浮动的宽度太小（并且不必要）。

[http://jsfiddle.net/FxcWB/3/](http://jsfiddle.net/FxcWB/3/)

```
<div style="text-align: center;">
  <div style="float:left;">
    <form action="/dashboard/" id="PREVIOUS_MONTH" method="post">
      <input type="submit" class="button-orange" value="Previous Month" />
    </form>
  </div>

  <div style="float:right;">
    <form action="/dashboard/" id="NEXT_MONTH" method="post">
      <input type="submit" class="button-orange" value="Next Month" />
    </form>
  </div>

  <div>January</div>
</div> 
```

# java - 在覆盖的 paintComponent(...) 方法中旋转图像

> ID：14300520
> 
> 赞同：3
> 
> 时间：2013-01-13T03:55:53.447
> 
> 标签：java, image, swing, image-processing, graphics

我只是想知道如何使用 JLabel 组件的 paintComponent() 方法旋转矩形图像并正确设置其新宽度和高度？

我试图旋转（见附图）并且图像比例变大但JLabel比例保持不变是什么使图像超出JLabel边界或其他东西：S所以我的问题是如何将图像新的宽度和高度设置为动态组件更优化的方式？

![在此处输入图像描述](../Images/9508a163e1414164e82f66391181e1be.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T08:25:19.790

+1 对 MadProgrammers 的评论和链接。

使用链接中的方法（稍微编辑以省略使用`GraphicsConfiguration`，`drawRenderImage(..)`并更改变量名称）：

```
//https://stackoverflow.com/questions/4156518/rotate-an-image-in-java
public static BufferedImage createTransformedImage(BufferedImage image, double angle) {
    double sin = Math.abs(Math.sin(angle));
    double cos = Math.abs(Math.cos(angle));
    int originalWidth = image.getWidth();
    int originalHeight = image.getHeight();
    int newWidth = (int) Math.floor(originalWidth * cos + originalHeight * sin);
    int newHeight = (int) Math.floor(originalHeight * cos + originalWidth * sin);
    BufferedImage rotatedBI = new BufferedImage(newWidth, newHeight, BufferedImage.TRANSLUCENT);
    Graphics2D g2d = rotatedBI.createGraphics();
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.translate((newWidth - originalWidth) / 2, (newHeight - originalHeight) / 2);
    g2d.rotate(angle, originalWidth / 2, originalHeight / 2);
    g2d.drawImage(image, 0, 0, null);
    g2d.dispose();
    return rotatedBI;
} 
```

这是一个例子：

![在此处输入图像描述](../Images/9fdcefe2e0826b5fabd951ad423443a5.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class RotateImage {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new MyRotatableImage(createImage(), -45));
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    public static BufferedImage createImage() {
        BufferedImage img = new BufferedImage(100, 50, BufferedImage.TRANSLUCENT);
        Graphics2D g2d = img.createGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setColor(Color.WHITE);
        g2d.fillRect(0, 0, img.getWidth(), img.getHeight());
        g2d.setColor(Color.BLACK);
        g2d.setFont(new Font("Calibri", Font.BOLD, 20));
        FontMetrics fm = g2d.getFontMetrics();
        String text = "Hello world";
        int textWidth = fm.stringWidth(text);
        g2d.drawString(text, (img.getWidth() / 2) - textWidth / 2, img.getHeight() / 2);
        g2d.dispose();
        return img;
    }
}

class MyRotatableImage extends JPanel {

    private BufferedImage transformedImage;

    public MyRotatableImage(BufferedImage img, int angle) {
        transformedImage = createTransformedImage(img, angle);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.drawImage(transformedImage, 0, 0, null);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(transformedImage.getWidth(), transformedImage.getHeight());
    }

    //https://stackoverflow.com/questions/4156518/rotate-an-image-in-java
    public static BufferedImage createTransformedImage(BufferedImage image, double angle) {
        double sin = Math.abs(Math.sin(angle));
        double cos = Math.abs(Math.cos(angle));
        int originalWidth = image.getWidth();
        int originalHeight = image.getHeight();
        int newWidth = (int) Math.floor(originalWidth * cos + originalHeight * sin);
        int newHeight = (int) Math.floor(originalHeight * cos + originalWidth * sin);
        BufferedImage rotatedBI = new BufferedImage(newWidth, newHeight, BufferedImage.TRANSLUCENT);
        Graphics2D g2d = rotatedBI.createGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.translate((newWidth - originalWidth) / 2, (newHeight - originalHeight) / 2);
        g2d.rotate(angle, originalWidth / 2, originalHeight / 2);
        g2d.drawImage(image, 0, 0, null);
        g2d.dispose();
        return rotatedBI;
    }
} 
```

**参考：**

*   [在java中旋转图像](https://stackoverflow.com/questions/4156518/rotate-an-image-in-java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T04:52:18.057

好的，所以您希望 JLabel 保持其尺寸并改为调整图像大小。

无论如何，您可能已经在使用仿射变换，因此您可以使用一些三角函数和最小值/最大值来找到旋转图像的 AABB。适当缩放（我假设您已经在使用仿射变换进行旋转）

编辑：

AABB = [Axis Aligned Bounding Box](http://en.wikipedia.org/wiki/Axis-aligned_bounding_box#Axis-aligned_minimum_bounding_box)，它的边对应于旋转图像的最小/最大 x,y 坐标。只是一种更简洁的表达方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T01:29:51.643

好的，我尝试了**David Kroukamp**给我看的样本。谢谢，大卫，你为我指明了正确的方向。我认为这是[一个非常好的片段](https://stackoverflow.com/a/14301840/592704)。

```
public static BufferedImage rotateImage(Image image, int angle)
    {
        double sin = Math.abs(Math.sin(angle));
        double cos = Math.abs(Math.cos(angle));
        int originalWidth = image.getWidth(null);
        int originalHeight = image.getHeight(null);
        int newWidth = (int) Math.floor(originalWidth * cos + originalHeight * sin);
        int newHeight = (int) Math.floor(originalHeight * cos + originalWidth * sin);
        BufferedImage rotatedBI = new BufferedImage(newWidth, newHeight, BufferedImage.TRANSLUCENT);
        Graphics2D g2d = rotatedBI.createGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.translate((newWidth - originalWidth) / 2, (newHeight - originalHeight) / 2);
        g2d.rotate(angle, originalWidth / 2, originalHeight / 2);
        g2d.drawImage(image, 0, 0, null);
        g2d.dispose();
        return rotatedBI;
    } 
```

[David Kroukamp 的结果图像预览](https://i.stack.imgur.com/0Xf41.png)

我测试了片段，结果图像+它的组件的比例确实是动态变化的。 *但是我得到的结果组件宽度总是比它的内部图像宽一点：S*

例如，这是我旋转 45 度角的图像版本

![基于片段的结果图像](../Images/c9237642beca5c6a7a02c75751473c80.png)

...我发现（在蓝色背景上）它的宽度并不完全适合围绕白色图像...实际上我正在寻找某种*标准的 Java 图像处理旋转解决方案*，但我找不到它 :( 所以我必须深入挖掘问题，至少弄清楚如何**解决“更广泛的效果”**并**避免每次重新绘制时创建新的 BufferedImage 对象**......

好的，作为我研究的一部分，我尝试编写某种我的旋转代码改编。这里是 ：

**>经过测试**

```
public static void rotateImage(Graphics g, Image image,int tilt,JComponent component)
    {

        // create the transform, note that the transformations happen

                  // in reversed order (so check them backwards)
                  AffineTransform at = new AffineTransform();

                  //5\. modify component scale ...

                  double sin = Math.abs(Math.sin(Math.toRadians(tilt)));
                  double cos = Math.abs(Math.cos(Math.toRadians(tilt)));

                  int w=image.getWidth(null);
                  int h=image.getHeight(null);
                  int newW=(int) Math.floor(w * cos + h * sin);
                  int newH=(int) Math.floor(h * cos + w * sin);

                  component.setSize(newW, newH);

                  int width=component.getWidth();
                  int height=component.getHeight();

                  // 4\. translate it to the center of the component
                  at.translate(width / 2, height / 2);

                  // 3\. do the actual rotation
                  at.rotate(Math.toRadians(tilt));

                  // 2\. just a scale because this image is big
    //              at.scale(1, 1);

                  // 1\. translate the object so that you rotate it around the
                  //    center (easier :))
                  at.translate(-image.getWidth(null)/2, -image.getHeight(null)/2);

                  // draw the image
                  ((Graphics2D) g).drawImage(image, at, null);

        } 
```

...所以旋转 -30 度倾斜的结果图像看起来像这样

![在此处输入图像描述](../Images/1d7e2951df0329e45b0addda1e18c27d.png)

我非常希望小费可以节省一天:)

* * *

谢谢大家的帮助

# ruby - 如何找到正在使用您的 gem 的应用程序的目录？

> ID：14300525
> 
> 赞同：0
> 
> 时间：2013-01-13T03:57:02.197
> 
> 标签：ruby, rubygems

我正在编写一个 gem，它将访问需要 gem 的 ruby​​ 应用程序中的配置 yaml 文件。我已经签出，`Dir.pwd`但这只给出了我从中运行脚本的目录。我在想这个错误的方式吗？这就是我所说的。

gem 将有一个常量，可以通过`Gem::CONSTANT`. 实例化这个常量的代码是

```
module Gem
  config_file = #code to retrieve the yaml file.
  CONSTANT = config_file[:constant]
end 
```

然后其他方法将对这些常量执行操作。任何帮助将不胜感激，让我知道我是否需要更具体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:07:53.213

看`File.dirname($0)`。

`$0`是当前运行脚本的绝对路径/名称。

# perl - 使用 sed（或 awk、perl 等）来识别第一次出现的降价标题

> ID：14300527
> 
> 赞同：1
> 
> 时间：2013-01-13T03:57:24.460
> 
> 标签：perl, sed, awk, grep, jekyll

我有一系列带有 yaml 标头的文件，后跟 markdown 字幕，看起来像这样：

### 最小示例输入文件：

```
---
layout: post
tags: 
  - might 
  - be
  - variable 
  - number 
  - of 
  - these
category: ecology
---

my (h2 size) title
------------------

some text

possible other titles we don't want
-----------------------------------

more text more text 
```

正如我试图指出的那样，YAML 标题的大小和出现第一个字幕的行会有所不同，所以我不能指望提前知道任何更改的行号。我想确定第一个标题（也应该是结束后的第一个非空白文本`---`。然后我想将该文本写入 YAML 标题，就像我们从正文中删除的图块一样，其余文本保持不变：

### 目标输出文件

```
---
layout: post
tags: 
  - might 
  - be
  - variable 
  - number 
  - of 
  - these
categories: ecology
title: my (h2 size) title
---

some text

possible other titles we don't want
-----------------------------------

more text more text 
```

似乎这对于 sed/awk 等来说应该是一项合理的任务，但我对这些工具的使用非常初级，我无法把这个弄糊涂。

我看到我可以在单词之间搜索`sed 'word1/,/word2/p`，但不确定如何将其转换为在第二次出现`^---$`和第一次出现之间搜索`^----+-$`（超过 3 个破折号的行）；然后如何删除多余的空白行，然后粘贴到上面的 yaml 问题中。

也许有这么多步骤 perl 会比 sed 更好，但我对它的熟悉程度更低。感谢您的任何提示或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:59:45.700

只需执行 2 次 - 第一次（当 NR==FNR 时）找到您希望之前打印的标题和行号，第二次在行号合适时打印它和其他行：

```
$ cat tst.awk
NR==FNR {
   if (hdrEnd && !title && NF)  {title = $0; titleStart=FNR; titleEnd=FNR+1 }
   if (hdrStart && /^---$/)     {hdrEnd   = FNR }
   if (!hdrStart && /^---$/)    {hdrStart = FNR }
   next
}
FNR == hdrEnd { print "title:", title }
(FNR < titleStart) || (FNR > titleEnd)

$ awk -f tst.awk file file      
---
layout: post
tags: 
  - might 
  - be
  - variable 
  - number 
  - of 
  - these
category: ecology
title: my (h2 size) title
---

some text

possible other titles we don't want
-----------------------------------

more text more text 
```

hdrStart 是标题开始的行号等。如果您想跳过标题周围的更多行而不仅仅是文本和后续下划线行，只需将 titleStart 和 titleEnd 填充为 FNR-1 和 FNR+2 或其他. FNR（文件记录数）是当前打开的文件中的当前行号，而 NR（记录数）是到目前为止所有以前和当前打开的文件中读取的总行数。

如果您不想在命令行上两次指定文件名，可以在 awks BEGIN 部​​分复制它：

```
$ cat tst.awk             
BEGIN{ ARGV[ARGC++] = ARGV[ARGC-1] }
NR==FNR {
   if (hdrEnd && !title && NF)  {title = $0; titleStart=FNR; titleEnd=FNR+1 }
   if (hdrStart && /^---$/)     {hdrEnd   = FNR }
   if (!hdrStart && /^---$/)    {hdrStart = FNR }
   next
}
FNR == hdrEnd { print "title:", title }
(FNR < titleStart) || (FNR > titleEnd) 
```

那么您只需将脚本调用为：

```
$ awk -f tst.awk file 
```

编辑：实际上 - 这是一个不做 2-pass 方法并且可以说更简单的替代方案：

```
$ cat tst.awk
(state == 0) && /^---$/ { state=1; print; next }
(state == 1) && /^---$/ { state=2; next }
(state == 2) && /^./    { state=3; printf "title: %s\n---\n",$0; next }
(state == 3) && /^-+$/  { state=4; next }

state != 2 { print }

$ awk -f tst.awk file
---
layout: post
tags: 
  - might 
  - be
  - variable 
  - number 
  - of 
  - these
category: ecology
title: my (h2 size) title
---

some text

possible other titles we don't want
-----------------------------------

more text more text 
```

如果您熟悉状态机，那么它在做什么应该很明显，如果不让我知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T04:33:15.593

一个快速而肮脏的 perl 代码：

```
$/=undef;  # null line delimiter, so that the following reads the full file
my $all=<STDIN>;
my @parts=split(/^(----*)$/m,$all); # split in sections delimited by all-dashes linse
my @head=split("\n",$parts[2]);  # split the header in lines
my @tit=split("\n",$parts[4]);  # split the title section in lines
push @head,pop @tit;            # remove the last line from the title section and append to head
$parts[2]=join("\n",@head)."\n"; # rebuild the header
$parts[4]=join("\n",@tit);       # rebuild the title section
print join("",@parts);           # rebuild all and print to stdout 
```

这对您来说可能不够健壮：它不关心是否有 3 个或更多破折号，它假定 UNIX 换行符，不检查标题是否非空白等。但它可能作为起点有用，或者如果您只需要运行一次。另一种方法是读取数组中内存中的所有行，循环查找分隔线并移动标题行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:29:40.587

好老蟒蛇：

```
with open("i.yaml") as fp:
    lines = fp.readlines()

c = False
i = 0
target = -1

for line in lines:
    i += 1
    if c:
        if line.strip() != "":
            source = i - 1
            c = False

    if line.strip() == "---":
        if i > 1:
            c = True
            target = i - 1

lines[target:target] = ["title: " + lines[source]]
del lines[source + 1]
del lines[source + 1]

with open("o.yaml", "w") as fp:
    fp.writelines(lines) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T22:08:11.680

也许这个 Perl 代码会帮助您找到解决方案：

```
#!/usr/bin/env perl

use Modern::Perl;
use File::Slurp;

my @file_content = read_file('test.yml');
my ($start, $stop, $title);
foreach my $line (@file_content) {

    if ($line =~ m{ --- }xms) {
        if (!$start) {
            $start = 1;
        }
        else {
            $stop = 1;
            next;
        }
    }    

    if ($line && $stop && $line = m{\w}xms) {
        $title = $line;
        last;
    }

}

say "Title: $title"; 
```

**上面的数据输出：** 标题：我的（h2 大小）标题

# c++ - 在 Qlabel (Qt) 中附加图像

> ID：14300530
> 
> 赞同：-1
> 
> 时间：2013-01-13T03:57:42.630
> 
> 标签：c++, qt

我正在做一个视频处理项目。为了调试，我需要将一些帧的 ROI 附加到指定宽度的 QLabel 中。我需要将子帧附加到标签....有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:51:05.197

您可以使用 QLayout(horizintal, Vertical e tc) 和 QLabel。尝试根据需要动态创建 QLabels，并添加到布局中。有了这个，你可以添加尽可能多的图片......希望它有所帮助。

```
 #include <QtGui/QApplication>
    #include <QLabel>
    #include <QImage>
    #include <QLayout>
    #include <QMainWindow>
    #include <QStringList>
    #include <QDebug>
    #include <QScrollArea>

    //This assumes that the pictures are in the application's Current working directory
    //Four pictures used with names 1.png,2.png,3.png and 4.png respectively

    int main(int argc, char *argv[])
{
QApplication a(argc, argv);
QMainWindow w;
QWidget *central = new QWidget(&w);

w.setCentralWidget(central);
QLayout *test_layout = new QVBoxLayout(central);
QStringList file_names;
file_names <<"1"<<"2"<<"3"<<"4";
foreach(QString pics, file_names){
    QLabel* imagethings = new QLabel();
    QImage image(QString("%1.png").arg(pics));//QImage's Constructor takes a file path
    imagethings->setPixmap(QPixmap::fromImage(image));
    test_layout->addWidget(imagethings);//append the new image

}
    // remove Space as a result of widget Margin(see link for Box Model below)
    central->setStyleSheet("QLabel{border:0px; margin:0px; padding:0px;}"); 

     central->layout()->setContentsMargins(0,0,0,0);//remove Spac as a result of Layout Margins
   //Please try to take advantage of Qt's Detailed Documentatio that Comes with the SDK
    w.show();
   return a.exec();
} 
```

[http://doc.qt.digia.com/qt/stylesheet-customizing.html](http://doc.qt.digia.com/qt/stylesheet-customizing.html) -Box Model [http://doc.qt.digia.com/qt/stylesheet-reference.html](http://doc.qt.digia.com/qt/stylesheet-reference.html) -Stylesheet Reference 您可以通过链接查看让样式表更好地辨别

# php - 是否有“自动化”过程来更改整个代码中的 SQL 列名？

> ID：14300531
> 
> 赞同：2
> 
> 时间：2013-01-13T03:57:46.853
> 
> 标签：php, mysql

如果一个人有一个被许多不同代码使用的数据库，那么在整个过程中传播数据库更改的最实用的过程是什么？

我有一个我不断“发展”的个人 mysql 数据库。但是，我也有很多 PHP 代码已经建立，可以在这个数据库中使用特定的列名。除了在整个代码中手动查找/替换列名之外，是否有既定的方法/方式/流程来更改列名并在整个代码中传播？

从我有限的观点来看，我想它可能需要从等式的语言方面来处理，即，可能是某种类型的扩展功能，比如 PDO。

也许只是在代码开头将当前数据库列名称定义为变量的“缓冲区”层是最简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T04:09:51.377

最好的做法是分离*数据的持久化*从这些数据在您的应用程序中的使用方式。数据库的结构不应定义应用程序的结构。在您的应用程序中，您通过对象或定义的数组结构传递数据。在某个指定点，您将这些对象/数组存储到数据库中，因为您希望将它们持久化以供以后使用。为此，您需要定义一个点，将数据对象/数组放入数据库中，反之亦然。这意味着这一点是您引用特定于数据库的名称的唯一点。如果需要更改数据库模式，只需要更新处理数据库-对象转换的薄层即可；您不需要更新“整个应用程序”，因为应用程序的其余部分是指您定义的数据对象的命名。

这通常称为[对象关系映射](http://en.wikipedia.org/wiki/Object-relational_mapping)、[数据访问层](http://en.wikipedia.org/wiki/Data_access_layer)和其他相关技术。

```
+----------+ +-----+ +---...
|          | |     | |
| Database <-> DAL | | rest of your app...
|          | |     | |
+----------+ +-----+ +---... 
```

数据库结构和有形数据对象之间的转换只发生在 DAL 中。应用程序的其余部分只是与 DAL 对话以获取或存储数据对象，它不需要知道或关心数据库结构的确切外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:52:50.533

deceze 是 100% 正确的，这是要走的路。这是一个 DAL 的示例。这将是一个为您与数据库交互并返回您期望的对象的函数，例如：

```
function GetUser($id,$lname="",$fname="") {
      if ($id != -1)
         $m = mysql_query("SELECT * FROM users WHERE id=$id");
      elseif ($lname != "" && $fname != "")
         $m = mysql_query("SELECT * FROM users where user_first_name='$fname' AND user_last_name='$lname'");
      elseif ($lname != "")
         $m = mysql_query("SELECT * FROM users where user_last_name='$lname'");
      elseif ($fname != "")
         $m = mysql_query("SELECT * FROM users where user_first_name='$fname'");
      if (!$m)
        return NULL;
      $r = mysql_fetch_row($m);
      $obj = new stdClass();
      $obj->id = $r[0];
      $obj->FirstName = $r[1];
      $obj->LastName = $r[2];
      return $obj;
} 
```

返回的结果将为您提供一个与之交互的对象，您可以添加/更改并依赖它来不断获得您想要的结果。您只会更改此函数中的列名，而不是更改整个代码。

希望这有助于阐明他的答案。

# php - 用于验证文件路径的 PHP 解决方案

> ID：14300532
> 
> 赞同：2
> 
> 时间：2013-01-13T03:57:49.130
> 
> 标签：php, validation, filtering, filepath

我需要验证传递的文件路径，然后才能将其写入磁盘并为其创建新的目录结构。例如，我们有`$path = "/uploads/base/../../user_new_dir/img.jpg"`. 这是不正确的路径，因为`"/.." ("/uploads/base"`- 允许保存目录，`"/user_new_dir/img.jpg"`- 用户定义的路径和文件名）。

我不能使用`realpath($path)`，因为它仅适用于现有文件。我不能使用`realpath(dirname($path))`，因为我们可能会创建新文件夹来保存文件。

我寻找脚本，它检查所有可能的情况。我担心我会错过诸如`'.'`字符的多字节表示或其他意外方式之类的东西，这可能会导致安全问题。您能否建议在任何框架或 cms 中适当地实施我的任务，以便我进行调查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T04:02:47.320

看看这个：[https ://stackoverflow.com/a/4050444/108544](https://stackoverflow.com/a/4050444/108544)

该函数对路径字符串进行操作，如果目标路径实际上不存在于文件系统上，它也应该可以工作。

# search - 如何检查 ElasticSearch 上的重复数据？

> ID：14300533
> 
> 赞同：5
> 
> 时间：2013-01-13T03:57:50.580
> 
> 标签：search, elasticsearch, deduplication

当存储一些文档时，它应该存储不存在的并忽略其余的（应该在应用程序级别完成，也许检查文档的 id 是否已经存在等？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T04:20:58.967

以下是文档中的说明：

**操作类型**

索引操作还接受可用于强制创建操作的 op_type，允许“put-if-absent”行为。使用 create 时，如果索引中已存在该 id 的文档，则索引操作将失败。

以下是使用 op_type 参数的示例：

```
$ curl -XPUT 'http://localhost:9200/twitter/tweet/1?op_type=create' -d '{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elastic Search"
}' 
```

指定创建的另一个选项是使用以下 uri：

```
$ curl -XPUT 'http://localhost:9200/twitter/tweet/1/_create' -d '{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elastic Search"
}' 
```

# javascript - javascript/jquery 复选框比较使用“和”

> ID：14300535
> 
> 赞同：0
> 
> 时间：2013-01-13T03:58:47.393
> 
> 标签：javascript, jquery

我有两个复选框，如下所示：

```
<input type="checkbox" name="options_v[]" id="you_pick_v" value="you_pick" />
<input type="checkbox" name="options_v[]" id="owner_picks_v" value="owner_picks" /> 
```

如果未选中这些框，我希望我的 javascript 函数将另一个元素设为灰色，如果选中任何一个框，则将其设为黑色。出于某种原因，当我尝试在 if/else 语句中使用“and”或“or”时，我的 html 编辑器显示存在问题。我不允许在 javascript 中使用这些比较运算符吗？如果是这样，你有什么建议？对不起，如果我写的任何内容模棱两可。

这是我的javascript函数：

```
$(document).ready(function() {
   $('#you_pick_v, #owner_picks_v')
    .click(function(){
        var ypv = $('#owner_picks_v').is(':checked');
        var opv = $('#owner_picks_v').is(':checked');

    if(ypv == true and opv == true) {
            alert('both checked');

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T04:01:32.610

您需要使用`&&`代替`and`，然后`||`代替`or`。这是 JavaScript。

# java - Eclipse 没有告诉我错误来源行？

> ID：14300540
> 
> 赞同：0
> 
> 时间：2013-01-13T03:59:28.003
> 
> 标签：java, eclipse, debugging

我似乎记得 eclipse 曾经给你错误的行号，但现在我注意到当得到一个

```
IO ERROR java.lang.IndexOutOfBoundsException: Index: 4, Size: 4 
```

这就是它所说的。这是一个设置还是控制 Eclipse 是否可以引导您找到问题代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:11:25.127

不，这不是一个设置，该错误正在被您正在使用的某些代码吞噬，无论是在库中还是您编写的代码中。

正如 Perception 所说，我的钱花在了 Logging 上。

# makefile - Makefile 中的通配符（$(1) 是什么意思？）

> ID：14300541
> 
> 赞同：4
> 
> 时间：2013-01-13T03:59:33.680
> 
> 标签：makefile, wildcard

在以下行中，

```
selected = $(firstword $(foreach R,$(REPS),$(wildcard $(R)/$(1)))) 
```

$(1) 是什么意思？

我试图通过以下方式查看 $(1) 的值

```
$(info "dollar one is " $(1)) 
```

它不打印任何东西。这是否意味着它是一些参数。从某处传递并设置为 NULL 还是通配符中使用的特殊变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T05:56:20.563

这是[函数](http://www.gnu.org/software/make/manual/make.html#Call-Function)`selected`要使用的[表达式`call`](http://www.gnu.org/software/make/manual/make.html#Call-Function)。像这样：

```
$(call selected,foo) 
```

Make 将评估扩展表达式，将“foo”分配给`$(1)`.

在这种情况下，它看起来好像可以与通配符一起使用，如下所示：

```
SRCS := $(call selected,*.cc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:08:56.577

我不太确定`$(1)`在你的 make 文件中是如何使用的，但`$(1)`它是终端中传递的第一个参数，比如如果你键入`make target`then`target`将被分配给`$(1)`.

# vb.net - 为 Nexmo 入站消息获取 Unicode

> ID：14300544
> 
> 赞同：1
> 
> 时间：2013-01-13T03:59:48.540
> 
> 标签：vb.net, unicode, sms, nexmo

我正在尝试将 Nexmo 用于入站消息。我使用标准 GSM 进行了测试，效果很好，但是当我发送 unicode 时，它​​显示为“???????”。

接收参数的详细信息：

```
msisdn:6019xxxxxxx (My No that I sent from)
type:unicode
to:447937947888
network-code:
messageId:030000000DA63B29
message-timestamp:2013-01-13 03:43:13
text:????? ?????
concat:
concat-ref:
concat-total:
data:
udh: 
```

是否可以将消息文本获取为 Unicode，然后我可以将其转换为文本？

# wpf - WPF富客户端的数据层架构？

> ID：14300546
> 
> 赞同：2
> 
> 时间：2013-01-13T04:00:30.017
> 
> 标签：wpf, entity-framework, architecture, telerik, rich-client-platform

# 背景

我需要使用 .NET 构建富客户端应用程序。该应用程序需要处理具有大约 100000 个实体的 TreeViewControls 和 TableViewControls。GUI 是使用 WPF 构建的，很可能使用 Telerik Controls。我的问题是关于数据层的一般架构。我对这些概念有一些粗略的想法，但非常感谢您的评论/想法和提示，我应该深入挖掘哪些技术。以下是我的想法：

# 概念层

## 表示层

只是 WPF 控件，我需要对属性更改的不同控件进行高性能同步，但我预计这里不会出现重大问题。

## 业务层

创建视图（要在控件中显示的对象选择）、CRUD 操作（直接使用 POCO 进行的修改）、搜索（全局搜索，但也仅限于视图）

## 存储库

在实体地图中保存 POCO，决定从持久性存储中加载的天气

## 持久性管理器

我正在考虑使用 LocalDB 或简单的键值存储作为（持久）客户端缓存。因此，Persistence-Manager 会尝试从本地存储中获取对象。否则从服务器获取数据。此外，将数据持久化到客户端缓存。数据将通过网络服务提供。我很高兴尝试 WCF 数据服务。

## 持久层

有两个部分： - 使用像 EF 或 OpenAccess 这样的 ORM 的本地数据库连接；或一个简单的键值存储 - 使用 Web 服务的 HTTP 连接

# 问题

*   在这样的分层中，延迟加载引用的对象怎么样？我知道 EF 和其他 ORM 也解决了我在这里遇到的很多问题。但是我还没有看到如何将这些框架插入到上面的分层中。另外，在哪里跟踪更改？删除对象时在哪里确保一致性？（例如删除对这些对象的引用）
*   我渴望加载整个视图（分层结构）并对那些 POCO 集合的对象执行 Linq。如果 Linq 性能成为问题，也许可以实现一个简单的倒排索引。但是我应该如何最好地在服务器上实现全局搜索？是否有可用的库（“Linq to OData”）？
*   您如何看待完全“断开连接”的场景？将用户需要的所有数据保存在本地数据库中。在启动/停止和用户触发时同步。我可以直接在本地数据库上使用 ORM，这很有可能避免很多尝试手动实现许多一致性功能的麻烦（使用上面的分层）。
*   或者相反，忘记本地数据库并批量加载大部分需要的数据。在这里，我关心的是 web 服务的性能（没有使用 OData、WCF 的经验）。我已经使用 Redis 和 Python 构建了一个应用程序，它可以非常快（< 1 分钟）将大约 200000 个业务对象加载到客户端（对象已经序列化缓存在 Redis 中）。

我当然会做一些原型设计和基准测试，但是为了有个好的开始，任何想法和建议都非常感谢。

干杯，

简

# mysql - 基于另一个查询的结果，mysql多个不在where条件下

> ID：14300548
> 
> 赞同：0
> 
> 时间：2013-01-13T04:00:46.287
> 
> 标签：mysql, sql

我有一种情况，我需要从一个表中提取数据，但根据另一个表中的行排除一些行。我的意思是我需要从一个表中提取学生 ID，但排除另一个表中的学生 ID。

第一个查询：

`$sql = "select studentid from table 2 where iarsid = '12'";`

因为我将从这个查询中得到一个数组结果，所以我想使用这个结果并将它放在下一个查询中的 NOT 条件中，只需从另一个查询的结果中排除这些行。

第二个查询：

`$sql2 = "select studentid from table 2, table 3 where iarsid = '12' // and a lot of joins";`

基本上，在根据第二个查询拉出学生时，不需要第一个表中的学生。如果我使用了错误的逻辑，请指导以实现这一目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T04:05:41.600

您至少可以通过 3 种方式来实现总体思路，使用 LEFT JOIN，以及使用 NOT IN 和 NOT EXISTS。

通过左连接。

```
SELECT student_name
FROM table_A a
LEFT JOIN table_B b ON a.student_id = b.student_id
WHERE b.student_id IS NULL 
```

这将获取 table_A 中的所有学生信息，其中学生不在 table_B 中。

这里是通过不存在：

```
 SELECT student_name
 FROM table_A a
 WHERE NOT EXISTS (SELECT student_id FROM table_B b WHERE b.student_id = a.student_id) 
```

并通过 NOT IN

```
 SELECT student_name
 FROM table_A a
 WHERE a.student_id NOT IN (SELECT student_id FROM table_B b) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T04:07:10.200

您的意思是第二个查询使用第一个查询作为 NOT 条件吗？

```
"select studentid from table 2, table 3 where iarsid = '12' // and a lot of joins"
+ " WHERE studentid NOT IN (select studentid from table 2 where iarsid = '12')" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T04:34:03.747

我可以看到你已经接受了一个答案。但你也可以这样做。**通过检查您的计划**来检查哪个查询快速的最佳方法。**`Explain`**

```
 SELECT student_name
 FROM table_A a
 WHERE a.student_id NOT EXISTS (SELECT student_id FROM table_B b) 
```

由于这是一个使用 的未关联查询`exists`，因此对于更大的表来说这将是更胖的。`IN`对于小桌子来说会更快。找不到匹配项时它会更快的原因，它会返回一个 false 而不是`IN`进行全表扫描。

还有这个：

```
 SELECT student_name
 FROM table_A a
 WHERE NOT EXISTS (SELECT null 
                   FROM table_B b
                   WHERE a.studentid = b.studentid); 
```

# html - 如何将简单导航转换为包含下拉菜单？（具体情况——已尝试转换）

> ID：14300550
> 
> 赞同：0
> 
> 时间：2013-01-13T04:01:43.773
> 
> 标签：html, css, drop-down-menu, web, navigation

我已经尝试了一些方法来将我的导航解决方案转换为以准确和美观的方式包含下拉菜单，但我似乎无法让它 100% 工作。以下是我的 CSS 和 HTML，我希望有人可以向我解释，我似乎无法自己实现 - 如何在导航项悬停时出现下拉菜单，并使链接处于活动状态。

请不要介意页面名称，因为它们是伪代码，因为它们与手头的主题无关。

```
<div id="page">
        <a class="topNavigationLink" href="http://1.com">1</a>
        <a class="topNavigationLink" href="2.html">2</a>
        <a class="topNavigationLink" href="3.html">3</a>
        <a class="topNavigationLink" href="4.html">4</a>
        <a class="topNavigationLink" href="5.html">5</a>
        <a class="topNavigationLink" href="6.html">6</a>
        <a class="topNavigationLink" href="7.html" >7</a>
 </div>

#page
{
  display: block; 
  height:auto;
  position: relative; 
  overflow: hidden; 
  width: 938px;
padding:8px 10px;
box-shadow: 0px 0px 10px rgba(0,0,0,0.8);
background: url(background.png) center 0px;
}

a.topNavigationLink
{
text-align:center;
font-weight:bold;
margin-top:0px;
font-size:20px;
padding:18px 23.4px; /*modify this value to change link size*/
float:left;
background-color:black;
//clear:left;
text-decoration:none;
color:#FFFFFF;
font-family: Copperplate / Copperplate Gothic Light, sans-serif;
box-shadow: 0px 0px 10px rgba(0,0,0,0.8);
}

a.topNavigationLink:hover
{
color:DodgerBlue;
background-color:white;
box-shadow: 0px 10px 10px #00CC66;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:39:17.250

首先，您应该使用无序列表来标记导航块。在您的情况下，这可能如下所示：

```
<div id="page">
     <nav>
         <ul>
             <li><a href="http://1.com">1</a></li>
             …
         </ul>
     </nav>
     …
 </div> 
```

这是一个可以用作导航基础的简单示例：http: [//dabblet.com/gist/4291211](http://dabblet.com/gist/4291211)

# java - 在网格上尝试所有可能的配对并记录以改进边匹配

> ID：14300553
> 
> 赞同：0
> 
> 时间：2013-01-13T04:02:26.167
> 
> 标签：java

如果我无法解释任何事情，请放轻松。

基本上我想知道如何记录交换四面体网格中的所有点。[参考：http://gamegix.com/tetravex/game]。

我创建了网格并从随机解决方案中添加了瓷砖。我目前可以交换一对用户生成的图块，但不能将其作为自动过程进行。

通常如何使自动交换项目的过程自动化？并记录“好”掉期

swap 方法接受以下参数：

```
ems.swap(i1, j1, i2, j2); 
```

您要交换的第一个图块在哪里`i1,j1`，您要交换`i2,j2`的第二个图块在哪里。

完成此操作后，将对瓷砖进行评估，

```
 public static int AssessSwapTiles(EdgeMatchSolution ems, EdgeMatch em)
{
    int a = em.getRows();
    int b = em.getColumns();
    int swaptotal = 0;

    for (int i = 0; i < a; i++)
    {
        for (int j = 0; j < b; j++)
        {
            int numSides = ems.sidesMatched(i,j);
            System.out.print(numSides + " ");
            swaptotal += numSides;
        }
        System.out.println();
    }
    System.out.println(swaptotal);
    return swaptotal;
} 
```

此方法在交换之前调用一次，在交换之后再次调用。

很抱歉解释了很长时间，这只适用于那些将来会偶然发现这一点的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:30:10.830

存储它的最简单方法是使用[`Map<Swap, Int>`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)where`Swap`是一个包含`i1`, `j1`, `i2`,的类`j2`（并且定义了`equals`和`hashCode`方法）。“好的”交换是`Swap`具有最大价值的 s。

或者，您可以使用一个 4 维数组来存储交换值，由交换进行索引，即`swapValues[i1][j1][i2][j2]`交换的值`i1`，`j1`与`i2`, `j2`。

我不确定除了存储交换之外你还打算做什么，所以很难说如果没有更多信息，存储“好”交换的更好方法是什么。

# java - 将窗口添加到系统托盘的简单方法

> ID：14300555
> 
> 赞同：0
> 
> 时间：2013-01-13T04:02:47.297
> 
> 标签：java, swing, jframe, system-tray

> **可能重复：**
> [如何将我的 Java 程序放在系统托盘中？](https://stackoverflow.com/questions/7264981/how-can-i-put-my-java-program-in-the-system-tray)

我正在用java制作一个通知系统，我希望程序显示在系统托盘中，而不是在任务栏上，我尝试过：

```
notification.setExtendedState(JFrame.ICONIFIED); 
```

这不仅不起作用，而且落后于我的计算机当前代码：

```
public static void notify(String line1, String line2, String imagepath, int style){
        GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
        int width = gd.getDisplayMode().getWidth();
        int swidth = width - 320;

        JFrame notification = new JFrame();
        JPanel main = new JPanel(new FlowLayout(FlowLayout.RIGHT));
        main.setLayout( new GridLayout( 2 , 1 ) );

        JLabel notifyline1 = new JLabel();
        notifyline1.setText(line1);
        notifyline1.setFont(new Font("Minecraft",1 , 16));
        notifyline1.setForeground(new Color(242, 238, 17));
        main.add(notifyline1);

        JLabel notifyline2 = new JLabel();
        notifyline2.setText(line2);
        notifyline1.setFont(new Font("Minecraft",1 , 12));
        notifyline1.setForeground(Color.black);
        main.add(notifyline1);

        notification.add(main);
        notification.setExtendedState(JFrame.ICONIFIED);
        notification.setSize(new Dimension(320,64));
        notification.setLocation(swidth, 0);
        notification.setUndecorated(true);
        notification.setVisible(true);
    } 
```

另外，用一块石头杀死 2 只鸟有没有办法给 jlabel 上色，试过了

```
label1.setForegroundColor(new Color(100, 100, 100)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:06:07.567

Java 具有`TrayIcon`可用于最小化应用程序的类。您可以在[此处](http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html)`SystemTray`查看工作示例。

# python - 重命名应用文件夹

> ID：14300558
> 
> 赞同：0
> 
> 时间：2013-01-13T04:03:01.573
> 
> 标签：python, django, heroku

heroku 中项目文件夹的默认名称是“app”，而不是“myappname”，所以每次我推送到 heroku 时，我都必须确保将所有导入更改为正确的形式才能正常工作。所以我必须改变所有

```
from myappname.mymodule import myclass 
```

至

```
from app.mymodule import myclass 
```

我尝试从 heroku bash 重命名 app 文件夹，但 heroku 文件系统是只读的。有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:14:55.493

`/app/~`应该没关系，就像在`C:\etc\etc\~`Windows 或`/home/user/~`Linux 上一样。Heroku 使用您的 Git 存储库，因此假设您的文件夹结构如下：

```
RootFolder
    - .git folder
    - .heroku folder (if any)
    - requirements
    - Procfile
    - ProjectFolder
        - AppFolder
        - AppFolder 
```

您的导入将是`from ProjectFolder.AppFolder import myclass`并且这不会从您的本地计算机更改为 Heroku。

你的文件夹结构是什么样的，你的仓库在哪里`git`？

# runtime-error - 错误 C2679：二进制“<<”：未找到采用“Car”类型右侧操作数的运算符（或没有可接受的转换）

> ID：14300562
> 
> 赞同：0
> 
> 时间：2013-01-13T04:03:59.543
> 
> 标签：runtime-error

队列类

```
 #ifndef Queue_H
    #define Queue_H

    #include "Car.h"
    #include <iostream>
    #include <string>

    using namespace std;

    const int Q_MAX_SIZE = 20;

    class Queue {
    private:

        int size; // size of the queue
        Car carQueue[Q_MAX_SIZE];
        int front, rear;
    public:
        Queue();
        ~Queue();
        bool isEmpty();
        bool isFull();
        void enqueue(Car c);
        void dequeue(); // just dequeue the last car in the queue
        void dequeue(Car c); // if a certain car wants to go out of the queue midway. 
                             // Condition: Car is not in washing. Meaning is not the 1st item in the queue
        void dequeue(int index); // same as the previous comment
        Car getFront();
        void getCarQueue(Queue);
        int length();
        Car get(int);
    };

    Queue::Queue() {
        size = 0;
        front = 0;
        rear = Q_MAX_SIZE -1;
    }

    Queue::~Queue() { 
        while(!isEmpty()) {
            dequeue();
        }
    }

    void Queue::enqueue(Car c) {
        if (!isFull()) {
            rear = (rear + 1) % Q_MAX_SIZE; // circular array
            carQueue[rear] = c;
            size++;
        } else {
            cout << "Queue is currently full.\n";
        }
    }

    void Queue::dequeue() { 

    }

    void Queue::dequeue(int index) {
        if(!isEmpty()) {
            front = (front + 1) % Q_MAX_SIZE;
            if(front != index) {
                carQueue[index-1] = carQueue[index];
                rear--;
                size--;
            } else {
                cout << "Not allowed to dequeue the first car in the queue.\n";
            }
        } else {
            cout << "There are no cars to dequeue.\n";
        }
    }

    bool Queue::isEmpty() {
        return size == 0;   
    }

    bool Queue::isFull() {
        return (size == Q_MAX_SIZE);
    }

    Car Queue::getFront() {
        return carQueue[front];
    }

    int Queue::length() {
        return size;
    }

    Car Queue::get(int index) {
        return carQueue[index-1];
    }

    void Queue::getCarQueue(Queue q) {
        for(int i = 0; i< q.length(); i++) 
            cout << q.get(i) << endl;  // Error here
    }

    #endif 
```

错误 C2679: binary '<<' : no operator found 它采用'Car' 类型的右手操作数（或没有可接受的转换）我得到这个错误，这有点奇怪。那么有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:12:52.823

`cout`不知道如何处理`car`对象；它从未见过`car`对象，也不知道您如何将 a 输出`car`为文本。 `cout`只能处理它知道的类型`string`，, `char`, `int`, 等。具体的错误是因为存在`<<`接受 an`ostream`和 a的运算符版本`car`。

有两种选择：

1.  创建一个`operator<<`需要 a`ostream`和 a的重载`car`。这将显示 cout 如何输出一个`car`. 这通常不会这样做，因为您想要展示汽车的方式通常不止一种。
2.  编写输出语句，以便手动打印出汽车属性，例如 `cout << c.getMake() << " " << c.getModel()`

# objective-c - 目标 C：查找所有类

> ID：14300564
> 
> 赞同：0
> 
> 时间：2013-01-13T04:04:42.273
> 
> 标签：objective-c

有没有办法找到参与给定应用程序或同一命名空间下的所有类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T04:26:30.203

运行时函数`objc_getClassList()`将列出为程序注册的所有类。Objective-C 没有命名空间。（就像任何阅读者的注释：这几乎不是你应该想做的事情。）

# php - php 和 mysqli 准备的更新正在更新所有行

> ID：14300565
> 
> 赞同：1
> 
> 时间：2013-01-13T04:04:48.933
> 
> 标签：php, mysqli

我发现使用 mysqli 的准备更新正在更新我的表中的所有行，而不是 WHERE 子句中引用的行。我对发生这种情况的原因感到困惑。我使用下面的简化代码作为测试运行，它仍然会发生。我正在使用 PHP 5.3.18 和客户端 API 库版本 5.0.96。

```
$mysqli = new mysqli("localhost", "user", "pass", "db");
if (mysqli_connect_errno()) {
  printf("Connect failed: %s\n", mysqli_connect_error());
  exit();
}

$query = "UPDATE test SET first_name = ? WHERE last_name = ?";
if(!$stmt = $mysqli->prepare($query)) {
  die("Unable to prepare<br />");
}

$first = 'test';
$second = 'something';

$stmt->bind_param("ss", $first, $second);
if (!$stmt->execute()) {
  die("Could not execute<br />");
}

echo "done"; 
```

查询执行，但为表中的所有行更新了 first_name。是的，有一个带有“某物”的姓氏。不，其他三个测试行没有 last_name = something。这是图书馆的问题吗？我的 PHP 配置？也许睡眠不足？什么？

哦......另外......如果我使用像“UPDATE test SET first_name =？WHERE id =？”这样的查询 并更新参数以使用 id，它可以工作。它只更新单行。那么为什么我不能在 WHERE 子句中使用 last_name 列呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:41:06.863

我让服务器技术人员将我的服务器更新到 MySql 5.5，现在问题已解决。我猜它与库或 MySql 安装有关。

# php - 将用户转发到另一个页面的最佳方式？

> ID：14300566
> 
> 赞同：-1
> 
> 时间：2013-01-13T04:05:32.173
> 
> 标签：php, javascript

我显示的项目具有倒数计时器，并且一旦前一个项目的时间结束，也会显示“即将推出”的项目。我现在的问题是，一旦商品可供购买，我需要将即将推出的商品页面重定向到订单页面。

我在想的是，如果他们刷新商品页面，将用户重定向到订单页面？怎么做？我认为不建议使用

```
meta refresh 
```

正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T04:08:32.993

元刷新不是最好的方法——因为你需要先检查一个条件。

既然你使用的是php，为什么不在项目页面的开头检查用户是否应该被重定向到订单页面呢？

像这样：

```
<?php
  if(true){ //Check if available for buying
    header('Location:order.php');
    exit;
  }
  //rest of your code stays...
?> 
```

# c++ - OpenGL glBegin ... glEnd

> ID：14300569
> 
> 赞同：15
> 
> 时间：2013-01-13T04:06:05.780
> 
> 标签：c++, opengl

我想知道我的游戏会因为使用`glBegin`GLSL、VBO 和 VAO 等等而受到影响的严重程度。他们只是看起来**如此**困难和荒谬，以实现我可以更轻松地做的事情。我的选择会产生什么影响？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-13T04:18:58.480

很糟糕。

主要是出于性能原因，不推荐使用带有`glBegin()`和的直接模式 API 。`glEnd()`它并不真正支持数据并行性，并且严重依赖 CPU——每个顶点至少需要一个函数调用。这加起来很快。

在小型项目中使用直接模式 API 可能更简单、更愉快，但在性能和可维护性方面，使用 VBO 可以更好地扩展。管理数据比管理状态容易得多。

此外，学习新的 API 意味着您了解 OpenGL 在现实世界中的使用方式和应该如何使用的最新信息。例如，如果您想在游戏行业工作，那只是非常有用的知识。

一些有用的学习资料：

*   [现代 OpenGL 简介](http://duriansoftware.com/joe/An-intro-to-modern-OpenGL.-Table-of-Contents.html)

*   [学习现代 3D 图形编程](https://web.archive.org/web/20140209181347/http://www.arcsynthesis.org/gltut/)

*   适用于 OpenGL ≥3.3 的[OpenGL 教程](http://www.opengl-tutorial.org/)

# objective-c - 如何从文件中截断 x 字节

> ID：14300571
> 
> 赞同：5
> 
> 时间：2013-01-13T04:06:07.913
> 
> 标签：objective-c, file, byte

很简单，如何从文件（结尾）中删除 x 个字节或字符串..？我知道如何附加字节——我需要做相反的事情。

不幸的是，我还没有找到任何关于如何做到这一点的例子：-/

```
NSFileHandle* fh = [NSFileHandle fileHandleForUpdatingAtPath: path];
    [fh seekToEndOfFile];

    ?? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T04:26:06.853

[`NSFileHandle`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileHandle_Class/Reference/Reference.html)有一种[`truncateFileAtOffset`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileHandle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileHandle/truncateFileAtOffset%3a)方法可以完全满足您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-20T20:20:19.300

鉴于设置了 NSString sFilePath 变量，您可以通过以下方式将文件截断为 0 字节：

```
NSFileHandle *hFile;
hFile = [NSFileHandle fileHandleForUpdatingAtPath:sFilePath];
[hFile truncateFileAtOffset: 0];
[hFile closeFile]; 
```

# spring - Spring MVC - Spring Security : 如何拥有两种不同“类型”的用户，我将在 jsp 页面中显示不同的内容

> ID：14300573
> 
> 赞同：0
> 
> 时间：2013-01-13T04:06:52.917
> 
> 标签：spring, spring-mvc, spring-security

我想有两种类型的用户，比如说教师和学生。

应用程序的很多内容都会显示给这两种类型的用户，但“教师”用户会看到“学生”用户无法看到的一些内容。

我考虑采用的方法是使用 ROLE_Teacher 和 ROLE_Student 而不是 ROLE_User，但我不确定这是否是最佳实践，另外，当我想显示时，我必须修改每个 JSP 以进行测试具体内容。

以前有人尝试过解决同样的问题吗？Spring 是否已经包含一些机制来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T07:56:21.513

我认为定义不同的角色几乎是解决问题的标准方法。Spring Security 支持根据当前经过身份验证的用户的角色来约束 JSP 生成的内容。（相关文档：[http](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/taglibs.html) ://static.springsource.org/spring-security/site/docs/3.1.x/reference/taglibs.html ）当然，您必须修改每个 JSP 以仅提供以下内容适合用户的角色。我不认为有某种魔法可以为你完成这项工作。:)

# c# - 为什么当前上下文中不存在 WebRequestMethods？

> ID：14300575
> 
> 赞同：0
> 
> 时间：2013-01-13T04:07:06.950
> 
> 标签：c#, windows-phone-7, visual-studio-2012, windows-phone-8, system.net

我正在使用 Visual Studio 2012 并使用 Windows Phone 7.1 应用程序开发。这是一个新创建的项目。

当我使用此代码时，为什么会出现此错误？

```
The name 'WebRequestMethods' does not exist in the current context 
```

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;

...

public MainPage() {
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.google.com");
    request.Method = WebRequestMethods.Http.Post;
}

... 
```

它似乎无法识别 WebRequestMethods 是 System.Net 的一部分。如果我指定 System.Net.WebRequestMethods.Http.Post，它也会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T04:23:32.393

[System.Net.WebRequestMethods.Http](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.net%28v=vs.105%29.aspx)在 Windows Phone 的 .NET 配置文件中不可用，但根据您正在查看的文档页面，它可能并不明显。只需将其设置为字符串值“POST”。

我在我的博客文章中有一些额外的上下文：[Windows 运行时-支持什么在哪里？](http://blogs.msdn.com/b/jimoneil/archive/2013/01/03/windows-runtime-what-s-supported-where.aspx)

# c++ - 如何使函数在c ++中返回结构指针

> ID：14300578
> 
> 赞同：2
> 
> 时间：2013-01-13T04:07:13.473
> 
> 标签：c++

我想让函数返回特定节点的地址。但是编译器没有检测到我创建的节点数据类型结构。

```
struct node
{
int data;

node *link;
};

node *header,*current;
node traverse(int pos);

node *Linkedlist::traverse(int pos)
{
    int location = 0;  
    current->link = header->link;
    node *address = new node;
    address->data = NULL;
    address->link = NULL;

    while(current->link != NULL)
    {

        if(location == pos)
        {
            cout <<current->link->data <<" "<< endl; 
            address->link=current->link;
        }
        location ++;
        current->link = current->link->link;

    }

    return  address->link;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T04:09:16.783

改变

```
return  *address; 
```

至

```
return  address; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T04:19:16.640

由于地址是指向节点的指针变量，因此您只需返回变量即可。

`*`指针变量前面是显式引用，意思是获取指针变量所指向的值`address`。这与操作员`&`会做的事情是相反的，即获取变量的地址。

```
return  address; 
```

因此，您应该返回变量而不是返回变量指向的值是合乎逻辑的。

请注意，调用者需要注意`traverse`通过调用 else 显式释放内存，`delete`这将导致内存泄漏。这是因为一个潜在的设计问题，您在本地范围内分配了一个堆对象并返回了地址。

```
node * foo = Linkedlist::traverse(n);
...............
delete foo; 
```

您可以简单地在堆中创建对象或将其添加为类成员，在前一种情况下，您可以轻松地将对象的所有权从一个范围转移到另一个范围，而在第二种情况下，对象的生命周期会被对象控制`Linkedlist`

# java - Java-JTable 不显示网格线

> ID：14300580
> 
> 赞同：7
> 
> 时间：2013-01-13T04:07:49.973
> 
> 标签：java, swing

我在我的 JPanel 中显示了一个 JTable。JTable 在滚动窗格中。唯一的问题是网格线没有出现。我尝试使用这行代码，但没有用。

```
table.setShowGrid(true); 
```

下图：注意没有网格线![在此处输入图像描述](../Images/87c6ad7f6959f1edc32c1196a1cf90fe.png)

先感谢您。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T04:20:34.037

蚀刻边框会有所不同吗？

```
table.setBorder(new EtchedBorder(EtchedBorder.RAISED)); 
```

编辑：

网格线的默认颜色似乎是白色：

```
table.setGridColor(Color.BLUE) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-18T07:50:18.030

```
table.setShowHorizontalLines(true);
table.setShowVerticalLines(true); 
```

# ruby-on-rails - 如何使用正则表达式从字符串中删除一些非法字符？

> ID：14300586
> 
> 赞同：2
> 
> 时间：2013-01-13T04:08:57.500
> 
> 标签：ruby-on-rails, ruby, regex

我想`&%*@()!{}`从字符串中删除字符。我试过这段代码：

```
keyword.gsub!(/[\&\%\*\@\(\)\!\{\}]/, '')` 
```

但它失败了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T04:13:21.647

你的正则表达式不正确。看来您不了解`[...]`正则表达式的工作原理。

您可以使用：

```
gsub(/[&%*@()!{}]+/, '') 
```

例如：

```
'foo&%*@()!{}bar'.gsub(/[&%*@()!{}]+/, '') # => "foobar" 
```

不使用正则表达式的另一种方法是使用以下[`tr`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-tr)方法：

```
'foo&%*@()!{}bar'.tr('&%*@()!{}', '') # => "foobar" 
```

使用`tr`，AKA“翻译”的好处是它不需要正则表达式，并且可以像这里一样进行删除，或者从一个字符翻译到另一个字符。它也非常快。

```
require 'benchmark'

n = 1_000_000
Benchmark.bm() do |b|

  b.report { n.times { 'foo&%*@()!{}bar'.gsub(/[&%*@()!{}]+/, '') } }
  b.report { n.times { 'foo&%*@()!{}bar'.tr('&%*@()!{}', '')   } }

end 
```

在运行 1.9.3-p362 的机器上返回：

```
 user     system      total        real
4.120000   0.010000   4.130000 (  4.125929)
1.280000   0.000000   1.280000 (  1.282932) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-10T14:29:09.337

您可以使用 I18n 的音译：

```
require 'i18n'

I18n.transliterate(keyword).scan(/\w+[a-zA-Z0-9]/).join(' ') 
```

音译将删除单词的重音，正则表达式只会收集该范围内的字符，最后“连接”会将单词与它们之间的空格连接起来。

# java - 如何使用 Java 的正则表达式拆分嵌套的数学方程

> ID：14300590
> 
> 赞同：0
> 
> 时间：2013-01-13T04:10:12.337
> 
> 标签：java, regex, string

我很好奇如何使用 java 的字符串正则表达式有意义地拆分带括号的数学方程。没有例子很难解释，下面是一个。

一种通用的解决方案模式将受到赞赏，而不是仅适用于下面提供的示例的模式。

```
String s = "(5 + 6) + (2 - 18)";
// I want to split this string via the regex pattern of "+",
// (but only the non-nested ones) 
// with the result being [(5 + 6), (2 - 18)]

s.split("\\+"); // Won't work, this will split via every plus. 
```

我主要寻找的是第一级拆分，我想要一个正则表达式检查是否像“+”或“-”这样的符号以任何形式嵌套，如果是，不要拆分它，如果不是'不要拆分它。嵌套可以是 () 或 [] 的形式。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T04:12:44.830

不幸的是，没有 RegEx，你需要一个像[JEP这样的库](http://www.singularsys.com/jep/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T05:09:16.590

如果您不希望像 ((6 + 5)-4) 这样拆分嵌套表达式，我有一个非常简单的函数可以在不使用正则表达式的情况下拆分表达式：

```
public static String[] subExprs(String expr) {
    /* Actual logic to split the expression */
    int fromIndex = 0;
    int subExprStart = 0;
    ArrayList<String> subExprs = new ArrayList<String>();
    again:
    while ((subExprStart = expr.indexOf("(", fromIndex)) != -1) {
        fromIndex = subExprStart;
        int substringEnd=0;
        while((substringEnd = expr.indexOf(")", fromIndex)) != -1){
            subExprs.add(expr.substring(subExprStart, substringEnd+1));
            fromIndex = substringEnd + 1;
            continue again; 
        }
    }

    /* Logic only for printing */
    System.out.println("Original expression : " + expr);
    System.out.println();
    System.out.print("Sub expressions : [ ");
    for (String string : subExprs) {
        System.out.print(string + ", ");
    }
    System.out.print("]");
    String[] subExprsArray = {};
    return subExprs.toArray(subExprsArray);
} 
```

`Sample output :`

原表达式：(a+b)+(5+6)+(57-6)

子表达式：[ (a+b), (5+6), (57-6), ]

**编辑**

对于还要获取包含在 中的表达式的额外条件`[]`，此代码将处理`()`和中的表达式`[]`。

```
public static String[] subExprs(String expr) {

    /* Actual logic to split the expression */
    int fromIndex = 0;
    int subExprStartParanthesis = 0;
    int subExprStartSquareBrackets = 0;
    ArrayList<String> subExprs = new ArrayList<String>();
    again: while ((subExprStartParanthesis = expr.indexOf("(", fromIndex)) > -2
            && (subExprStartSquareBrackets = expr.indexOf("[", fromIndex)) > -2) {

        /* Check the type of current bracket */
        boolean isParanthesis = false;
        if (subExprStartParanthesis == -1
                && subExprStartSquareBrackets == -1)
            break;
        else if (subExprStartParanthesis == -1)
            isParanthesis = false;
        else if (subExprStartSquareBrackets == -1)
            isParanthesis = true;
        else if (subExprStartParanthesis < subExprStartSquareBrackets)
            isParanthesis = true;

        /* Extract the sub expression */
        fromIndex = isParanthesis ? subExprStartParanthesis
                : subExprStartSquareBrackets;
        int subExprEndParanthesis = 0;
        int subExprEndSquareBrackets = 0;
        if (isParanthesis) {
            while ((subExprEndParanthesis = expr.indexOf(")", fromIndex)) != -1) {
                subExprs.add(expr.substring(subExprStartParanthesis,
                        subExprEndParanthesis + 1));
                fromIndex = subExprEndParanthesis + 1;
                continue again;
            }
        } else {
            while ((subExprEndSquareBrackets = expr.indexOf("]", fromIndex)) != -1) {
                subExprs.add(expr.substring(subExprStartSquareBrackets,
                        subExprEndSquareBrackets + 1));
                fromIndex = subExprEndSquareBrackets + 1;
                continue again;
            }
        }
    }

    /* Logic only for printing */
    System.out.println("Original expression : " + expr);
    System.out.println();
    System.out.print("Sub expressions : [ ");
    for (String string : subExprs) {
        System.out.print(string + ", ");
    }
    System.out.print("]");
    String[] subExprsArray = {};
    return subExprs.toArray(subExprsArray);
} 
```

`Sample Output :`

原表达式：(a+b)+[5+6]+(57-6)-[ab]+[cd]

子表达式：[ (a+b), [5+6], (57-6), [ab], [cd], ]

建议改进代码。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T09:19:26.620

你不能知道你永远不会得到超过一级的括号，你不能用正则表达式分析递归语法，根据定义。您需要使用或编写*解析器。*为 Dijkstra Shunting Yard 算法，或递归下降表达式解析器，或可以执行任一操作的库提供 aloo，

# ios - 在 iOS 中禁用自定义文件类型的文件预览

> ID：14300600
> 
> 赞同：1
> 
> 时间：2013-01-13T04:12:45.737
> 
> 标签：ios, file, ios5, ios6

我已将文件类型与我的 iOS 应用程序相关联，因此我可以在应用程序中打开该类型的文件，例如从电子邮件中打开。打开文件有效，但只需点击电子邮件中的附件即可打开快速查看屏幕，该屏幕显示为空白。文件格式是一个带有自定义扩展名的 zip 文件，我相信这是独一无二的。

我可以做些什么来禁用我的文件类型的快速查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-01T08:21:19.777

我希望你想出了一个解决方案，因为:)

对于可能也在寻找解决方案的人，请查看您自定义类型继承自的协议（数组键***UTTypeConformsTo***，名称“符合 UTI”）

就我而言，我的自定义类型是一个带有自定义扩展名的 zip 存档（就像你一样），我输入了“ *public.data* ”和“ *public.archive* ”。“public.archive”负责操作系统在文件应用程序中显示我的自定义压缩包的内容，或者在邮件应用程序中快速查看。解决方案是仅从“public.data”继承。

# python - 用 Python 建模图

> ID：14300603
> 
> 赞同：10
> 
> 时间：2013-01-13T04:13:09.180
> 
> 标签：python, algorithm, graph, minimum-spanning-tree

我正在尝试解决与 Python 中的图形相关的问题。由于它是一个竞争性的编程问题，我没有使用任何其他 3rd 方包。

`5 X 5`该问题以方形网格的形式呈现图形。假设机器人位于网格上用户提供的位置。网格的索引位于`(0,0)`左上角和`(4,4)`右下角。网格中的每个单元格由以下 3 个字符中的任何一个表示。“<code>b”（ascii 值 98）表示机器人的当前位置，“<code>d”（ascii 值 100）表示网格中的脏单元格，“-”（ascii 值 45）表示网格中的干净单元格。例如，下面是机器人所在的示例网格`0 0`：

```
b---d
-d--d
--dd-
--d--
----d 
```

目标是以最少的步骤清理网格中的所有单元格。一个步骤被定义为一个任务，其中 i) 机器人改变它的位置 ii) 机器人改变细胞的状态（从 d 到 -）

假设最初标记为的位置`b`不需要清洁。机器人可以向上、向下、向左和向右移动。

**我的方法**

我已经阅读了一些关于图的教程，并决定将图建模为 25 X 25 的邻接矩阵，其中 0 表示没有路径，1 表示矩阵中的路径（因为我们只能在 4 个方向上移动）。接下来，我决定对其应用 Floyd Warshell 的所有对最短路径算法，然后对路径的值求和。但我有一种感觉，它不会起作用。我陷入困境，问题是以下之一：

i）最小生成树（我无法做到，因为我无法将网格建模和存储为图形）。

ii) A* 搜索（又是一个疯狂的猜测，但同样的问题，我无法正确地将网格建模为图形）。

如果您能提出解决此类问题的好方法，我将不胜感激。此外，关于各种形式的基于图形的问题（或指向这些问题的链接）的一些提示和伪代码也会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T21:00:48.237

我想你在这里问两个问题。

**1\. 如何在 Python 中将这个问题表示为图形？**

当机器人四处移动时，他会从一个肮脏的广场移动到另一个，有时会沿途经过一些干净的空间。你的工作是弄清楚访问脏方块的顺序。

```
# Code is untested and may contain typos. :-)

# A list of the (x, y) coordinates of all of the dirty squares.
dirty_squares = [(0, 4), (1, 1), etc.]
n = len(dirty_squares)    

# Everywhere after here, refer to dirty squares by their index
# into dirty_squares.

def compute_distance(i, j):
  return (abs(dirty_squares[i][0] - dirty_squares[j][0])
          + abs(dirty_squares[i][1] - dirty_squares[j][1]))

# distances[i][j] is the cost to move from dirty square i to
# dirty square j.
distances = []
for i in range(n):
  distances.append([compute_distance(i, j) for j in range(n)])

# The x, y coordinates of where the robot starts.
start_node = (0, 0)

# first_move_distances[i] is the cost to move from the robot's
# start location to dirty square i.
first_move_distances = [
  abs(start_node[0] - dirty_squares[i][0])
      + abs(start_node[1] - dirty_squares[i][1]))
  for i in range(n)]

# order is a list of the dirty squares.
def cost(order):
  if not order:
    return 0  # Cleaning 0 dirty squares is free.
  return (first_move_distances[order[0]]
          + sum(distances[order[i]][order[i+1]]
                for i in range(len(order)-1))) 
```

您的目标是找到一种方法来重新排序 list(range(n)) 以最小化成本。

**2.我如何找到解决这个问题的最小移动数？**

正如其他人指出的那样，这个问题的广义形式是难以处理的（NP-Hard）。您有两条信息有助于限制问题以使其易于处理：

1.  该图是一个网格。
2.  最多有 24 个脏方块。

我喜欢你在这里使用 A* 的直觉。它通常有助于解决找到最小移动数的问题。但是，A* 需要相当多的代码。我认为你最好使用分支绑定方法（有时称为分支和修剪），它应该几乎同样有效，但更容易实现。

这个想法是使用深度优先搜索开始枚举所有可能的解决方案，如下所示：

```
 # Each list represents a sequence of dirty nodes.
  []
  [1]
  [1, 2]
  [1, 2, 3]
  [1, 3]
  [1, 3, 2]
  [2]
  [2, 1]
  [2, 1, 3] 
```

每次您要递归到一个分支时，检查该分支是否比目前找到的最便宜的解决方案更昂贵。如果是这样，您可以跳过整个分支。

如果这不够有效，请添加一个函数来计算剩余成本的下限。然后，如果 cost([2]) + lower_bound(set([1, 3])) 比目前找到的最便宜的解决方案更昂贵，您可以跳过整个分支。lower_bound() 越紧，您可以跳过的分支越多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T08:31:29.323

比方说`V={v|v=b or v=d}`，得到一个全连通图`G(V,E)`。您可以计算每条边的成本，`E`时间复杂度为`O(n^2)`. 之后问题就变成了完全一样：**从一个指定的顶点开始，找到`G`覆盖的最短路径`V`。**

自 1832 年以来，我们称之为[**旅行商问题 (TSP) 。**](http://en.wikipedia.org/wiki/Travelling_salesman_problem)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T04:29:25.997

问题当然可以存储为图表。节点（脏单元）之间的成本是它们的[曼哈顿距离](http://en.wikipedia.org/wiki/Manhattan_distance)。忽略清洁电池的成本，因为无论采取何种方式，总成本都是相同的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T09:03:51.590

这个问题在我看来就像[最小直线斯坦纳树](https://en.wikipedia.org/wiki/Rectilinear_Steiner_tree)问题。不幸的是，问题是 NP 很难，所以如果我是正确的，你需要提出一个近似值（基于曼哈顿距离的最小生成树）。

# django - 在哪里存储电子邮件模板？

> ID：14300606
> 
> 赞同：1
> 
> 时间：2013-01-13T04:13:55.333
> 
> 标签：django, email, html-email, email-templates, django-email

我正在编写一个将发送 HTML 电子邮件的 Django 1.4 应用程序。我正在使用 Django 模板来呈现电子邮件内容，但我不确定如何存储模板。

我可以将它们存储在电子邮件应用程序中（就像其他模板一样），但使用静态文件感觉很愚蠢。

我考虑过创建一个电子邮件模型并将模板代码存储为一个 TextField，这会起作用。

我搜索了更好的解决方案，并在 reddit 上看到了[sendwithus.com](http://sendwithus.com "sendwithus.com")，这是一个好主意......

这类事情有 Django 约定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:29:38.627

一般的方法是将电子邮件模板全局存储在项目模板文件夹或电子邮件应用程序的模板文件夹中。如果您构建一个可重用的应用程序，您可以在您的应用程序模板文件夹中提供电子邮件模板的示例，但可以通过全局项目模板覆盖它们（在 TEMPLATE_READERS 中将项目模板优先于应用程序模板，通常是 django 中的默认值）。

我认为您的其他想法对于如此简单的事情来说太过分了。

# android - Android操作栏菜单项长按检测可能吗？

> ID：14300607
> 
> 赞同：2
> 
> 时间：2013-01-13T04:13:56.780
> 
> 标签：android, callback, android-actionbar, menuitem

我有一个`ActionBar`和一些菜单项设置为`ActionBar`像这样显示：

```
<item
        android:id="@+id/menu_play1"
        android:orderInCategory="100"
        android:showAsAction="ifRoom|withText" 
        android:title="Play1x"/> 
```

`onOptionsItemSelected(MenuItem item)`在捕捉正常点击时效果很好，但我想捕捉长按，这样我就可以做一些与正常按下的默认行为不同的事情。

那可能吗？如何？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T17:23:55.853

允许长按 MenuItem 并不是一个好方法。

使用 Java 反射已尝试使其成为可能：

```
 private interface OnMenuItemLongClickListener{
        boolean onMenuItemLongClik(MenuItem m);
    }
    private void getMenuItemsView(Activity a, final Menu m, final OnMenuItemLongClickListener listener) throws NoSuchFieldException, IllegalArgumentException, IllegalAccessException{
        View homeButton = a.findViewById(android.R.id.home);
        ViewParent parentOfHome = homeButton.getParent().getParent(); //ActionBarView is parent of home ImageView, see layout file in sources

        if (!parentOfHome.getClass().getName().contains("ActionBarView")) {
            parentOfHome = parentOfHome.getParent(); 
            Class absAbv = parentOfHome.getClass().getSuperclass(); //ActionBarView -> AbsActionBarView class
            Field actionMenuPresenterField = absAbv.getDeclaredField("mActionMenuPresenter");
            actionMenuPresenterField.setAccessible(true);
            Object actionMenuPresenter = actionMenuPresenterField.get(parentOfHome);
            Field actionMenuViewField = actionMenuPresenter.getClass().getSuperclass().getDeclaredField("mMenuView");
            actionMenuViewField.setAccessible(true);
            Object actionMenuView = actionMenuViewField.get(actionMenuPresenter);
            Field childrenField= actionMenuView.getClass().getSuperclass().getSuperclass().getDeclaredField("mChildren");
            childrenField.setAccessible(true);
            Field menuField =actionMenuPresenter.getClass().getSuperclass().getDeclaredField("mMenu");
            menuField.setAccessible(true);
            Object menu = menuField.get(actionMenuPresenter);
            Object[] menuItemsAsViews = (Object[])childrenField.get(actionMenuView);
            View.OnLongClickListener longListener = new View.OnLongClickListener() {

                @Override
                public boolean onLongClick(View v) {

                    return listener.onMenuItemLongClik(m.findItem(v.getId()));
                }
            };
            for(Object menuView:menuItemsAsViews ){
                View v = (View)menuView;
                v.setOnLongClickListener(longListener);
            }

    }
 } 
```

你可以在这个要点上得到这个：[https ://gist.github.com/NikolaDespotoski/6978883](https://gist.github.com/NikolaDespotoski/6978883)

# javascript - 我如何在javascript中制作一个调用栏？

> ID：14300614
> 
> 赞同：0
> 
> 时间：2013-01-13T04:16:29.887
> 
> 标签：javascript

我有一个用 javascript 编写的简单短信界面，每次单击通话按钮时，都会出现一个通话栏（类似于永不停止的进度栏或状态栏）。我仍然没有代码，因为我仍然是初学者..请帮助

我这里有一个链接[http://jsfiddle.net/XBppR/22/](http://jsfiddle.net/XBppR/22/)

```
function openPage()
{
if(some conditon)
opener.document.location = "http://www.google.com";
}
else{
// nothing, this else not required
}
} 
```

此代码不起作用..不要介意..仅用于发布目的..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:39:03.343

**警告：**以下答案包含 jQuery

所以你要做的是制作两张图，一张前景图来设置样式：（ ![看不太清楚，但是有点，高亮看看](../Images/cca6b21663e5a198348501b6ef01ca3a.png) 看不太清楚，放在黑色背景上）

以及用于创建动画效果的背景图像：

![背景图片](../Images/be428eeb828359f29f5a371dcc792fd8.png)

接下来，您必须将 FG 叠加在 BG 上。

HTML：

```
<div class="callbar">
    <div class="callbarbg" style="width: 200px;"></div>
    <div class="callbarfg"></div> <!-- later elements have higher z-index -->
</div> 
```

CSS：

```
.callbarbg {
    height: 20px;
    background-repeat: repeat-x;
    background-image: url("http://s9.postimage.org/4oij09p7j/sliding_Progress_Bar_BG.png");
    background-position:right top;
}
.callbarfg {
    position:relative;
    top:-20px;
    width: 200px;
    height: 20px;
    background-image: url("http://s9.postimage.org/bg8y34e73/sliding_Progress_Bar_FG.png");
}
.callbar {
    overflow:hidden;
    width:200px;
    height:20px;
} 
```

最后，您必须移动背景图像以使每个点中的淡入/淡出动画：

JS：

```
window.setInterval(function(){ 
    var obj = $("parent of .callbar").find(".callbarbg"); 
    if(!obj.data("width"))
        obj.data("width", 200);
    var w = obj.data("width") + 3;
    obj.data("width", w).css("width", w);
    var h = w%200;
    if(h == 0 || h == 1 || h == 2){
        obj.data("width", 200);
    }
}, 33); 
```

使用原始 API 工作 jQuery jsFiddle：http: [//jsfiddle.net/pitaj/K25U8/6/](http://jsfiddle.net/pitaj/K25U8/6/)

* * *

**编辑：**

无 jQuery 的 jsfiddle 现在上线了！

使用原始 API 工作的无 jQuery jsFiddle：http: [//jsfiddle.net/pitaj/GpGE2/](http://jsfiddle.net/pitaj/GpGE2/)

# python - python 微框架和请求库

> ID：14300618
> 
> 赞同：3
> 
> 时间：2013-01-13T04:17:51.190
> 
> 标签：python

在 python 中处理一个启动 http 请求并有一个小型 Web 服务器的辅助项目。这让我开始思考——似乎每个 python 微框架都有自己的模型来访问 http 请求的属性（例如，您可以用来获取查询字符串参数、标头等的底层请求对象以及用于设置的底层响应对象状态码、响应头等）。它们都允许您访问相同的数据，并且它们都在重新发明轮子。

是否有任何使用流行[请求](http://docs.python-requests.org/en/latest/)`Request`库中的和对象而不是拥有自己的实现的微框架？似乎请求库正在成为在 python 中执行 http 请求的规范方式，因此这将使框架特别小。在制作本质上将其他服务粘合在一起的应用程序时，它也会很酷，因为转发/包装请求将是微不足道的。您可以只更改传入请求的属性并调用以转发请求（是的，对于在网络服务器级别进行的简单转发更有意义，但您明白了）。`Response``.url``.prepare()`

或者如果没有任何框架特别这样做，是否有类似的好处，即传入的http请求对象也可以作为http客户端工作？

编辑：想指出这就是 http Request 对象在 Go 中的工作方式，这在一定程度上激发了我的问题。来自[net/http](http://golang.org/pkg/net/http/#Request)库“一个请求代表一个由服务器接收或由客户端发送的 HTTP 请求。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:36:11.990

[Flask](http://flask.pocoo.org/)基于[Werkzeug](http://werkzeug.pocoo.org/)。Werkzeug 本身正在使用[Request](http://werkzeug.pocoo.org/docs/wrappers/?highlight=request#werkzeug.wrappers.Request)本身正在使用[BaseRequest](http://werkzeug.pocoo.org/docs/wrappers/?highlight=request#werkzeug.wrappers.BaseRequest)。但这不是[Requests](http://docs.python-requests.org/en/latest/)库。

请注意，有[一个计划](http://kennethreitz.com/the-future-of-python-http.html)使用 Requests 和 Werkzeug创建一个[httpcore 库](https://github.com/core)，但这似乎已经停止。也就是说，这两个项目都在启动。

有些人使用 Requests 在他们的应用程序中[修改](https://github.com/davidthewatson/flasgist/blob/master/views.py#L60-72)了 Flask

# wordpress - 如何获取特定页面的内容？

> ID：14300620
> 
> 赞同：0
> 
> 时间：2013-01-13T04:18:37.407
> 
> 标签：wordpress

我想要示例获取带有`sasd`私有 slug 的页面内容我只希望它出现在侧边栏中..

我试过这个（页面）：

```
<?php
$the_slug = 'sasd';
$args=array(
  'name' => $the_slug,
  'post_type' => 'page',
  'post_status' => 'private',
  'numberposts' => 1
);
$my_posts = get_posts($args);
if( $my_posts ) {
echo 'ID on the first post found '.$my_posts[0]->ID;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:29:33.013

我不确定为什么你的代码不起作用......但它应该......

这是我的测试结果..

```
Array
(
    [0] => WP_Post Object
        (
            [ID] => 31
            [post_author] => 1
            [post_date] => 2013-01-13 04:23:39
            [post_date_gmt] => 2013-01-13 04:23:39
            [post_content] => fdsfsdfsdfsdfsdfsd
            [post_title] => sasd
            [post_excerpt] => 
            [post_status] => private
            [comment_status] => open
            [ping_status] => open
            [post_password] => 
            [post_name] => sasd
            [to_ping] => 
            [pinged] => 
            [post_modified] => 2013-01-13 04:23:39
            [post_modified_gmt] => 2013-01-13 04:23:39
            [post_content_filtered] => 
            [post_parent] => 0
            [guid] => http://localhost/wordpress/?p=31
            [menu_order] => 0
            [post_type] => post
            [post_mime_type] => 
            [comment_count] => 0
            [filter] => raw
        )

)
ID on the first post found 31 
```

请确保你有`sasd`作为帖子的标题。有这样的固定链接`http://localhost/wordpress/2013/01/13/sasd/`

要让它显示内容，您需要这样做：`$my_posts[0]->post_content`

或者只是看看`WP_Post Object`我发布的，看看如何获​​取其他数据的模式..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:30:05.647

当你收到你的帖子时：

```
foreach( $my_posts as $post ) :
     setup_postdata($post); 
     the_content(); // displays the content of the post
endforeach; 
```

参考`the_content`：[http ://codex.wordpress.org/Function_Reference/the_content](http://codex.wordpress.org/Function_Reference/the_content)

# android - Textview 可滚动和可点击

> ID：14300623
> 
> 赞同：0
> 
> 时间：2013-01-13T04:18:59.173
> 
> 标签：android, scroll, click, textview

我正在为 android 开发一个记事本应用程序，似乎我对 textview 有一个小问题。事情是这样的：我有一个笔记列表视图，当我点击一个笔记时，我打开另一个活动，它将我的笔记内容显示到一个文本视图中。当我单击此文本视图（表示注释中的文本）时，它会打开另一个用于编辑文本的活动（就像大多数这些应用程序一样）。问题是有些注释真的很长，所以我需要让我的 textview 可滚动。但由于我有一个“setOnclickListener”，我不能同时这样做。我在谷歌上搜索了很多，显然很多人似乎有这个问题。有没有办法实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:23:17.653

想法：

*   使用 OnGestureListener 或 OnTouchListener
*   使用“编辑”按钮
*   使用长按而不是 OnClick

# database - 雪花比索引好？

> ID：14300643
> 
> 赞同：5
> 
> 时间：2013-01-13T04:24:58.877
> 
> 标签：database, performance, data-warehouse, snowflake-schema

这是问题所在，我有一个包含销售信息的销售信息表，其中包含（主键 ID、产品名称、产品 ID、商店名称、商店 ID、销售日期）等列。我想做分析，比如向上钻取和向下钻取商店/产品/销售日期。

我正在考虑两种设计方案，

1.  在产品名称、产品 ID、商店名称、商店 ID、销售日期等列上创建单独的索引；
2.  使用数据仓库雪花模型，将当前销售信息表作为事实表，创建产品、店铺、销售日期维度表。

为了有更好的分析性能，听说雪花模型更好。但是为什么从数据库设计的角度来看它比相关列上的索引更好呢？

提前谢谢， 林

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T04:38:16.327

了解您的应用程序使用模式以及您想要优化的内容很重要。以下是选择其中一个的几个原因（其中有很多）。

## 标准化雪花 PRO：

**更快的查询和更低的磁盘和内存要求**。由于每个规范化的行只有短键而不是较长的文本字段，因此您的主事实表变得更小。即使使用了索引（除非查询可以由索引本身直接回答），通常也需要进行部分表扫描，较小的数据意味着更少的磁盘读取和更快的访问。

**更容易修改和更好的数据完整性**。假设一家商店更改了名称。在雪花中，您更改一行，而在大型非规范化表中，每次出现时都必须更改它，并且您经常会遇到拼写错误和同名的多个变体。

## 非规范化宽表 PRO：

**更快的单条记录加载。**当您通常只加载一条记录或少量记录时，将所有数据放在一行中只会导致一次缓存未命中或磁盘读取，而在雪花中，数据库可能必须从不同磁盘中的多个表中读取地点。这更像是 NoSQL 数据库如何存储与键关联的“对象”。

# css - 优化小屏幕需要 CSS 媒体查询？

> ID：14300644
> 
> 赞同：0
> 
> 时间：2013-01-13T04:25:38.910
> 
> 标签：css, media-queries

我对 CSS 媒体查询的接触不多。我基本上是通过实验来学习的。我正在尝试优化我的网站，使其在所有设备上看起来都不错。如果浏览器宽度很大（桌面设备，包括 Retina 显示器），我希望它使用特定的 CSS 文件；如果它是平板电脑（iPad 或其他，包括 Retina），我希望它使用不同的 CSS 文件，以及用于小屏幕的不同 CSS 文件（iPhone 或其他，包括 Retina）。我当前的设置包括在下面，以及它们的结果。

```
<link rel="stylesheet" type="text/css" href="stylesheets/prevhome.css" /> <!--Desktop -->
<link rel="stylesheet" type="text/css" media="screen and (max-device-width : 1024px), screen and (-webkit-min-device-pixel-ratio: 2)" href="stylesheets/tablet.css" /> <!-- Tablet -->
<link rel="stylesheet" type="text/css" media="screen and (max-device-width: 640px), screen and (-webkit-min-device-pixel-ratio: 2)" href="stylesheets/phone.css" /> <!-- Phone --> 
```

这在台式电脑上效果很好，但 Retina 显示屏 MacBook Pro 使用的是电话 CSS 文件而不是桌面文件。iPad 显示平板优化版本很棒，但 Retina 显示 iPad 使用的是手机优化的 CSS 文件。iPhone 使用 Phone CSS 文件可以很好地显示页面，而 Retina 显示屏 iPhone 也可以很好地显示它。我不知道我的网站在其他设备上的外观如何，因为我只有 Apple 设备可供测试。

所以，我的 CSS 链接显然设置不正确。我怎样才能正确设置它？除了 Retina 显示器，我不想针对任何特定设备。Windows 平板电脑应该使用平板电脑 CSS 文件，而不仅仅是 iPad。这可以用 3 个 CSS 链接和 3 个文件来完成吗，一个用于桌面（大于 1024 像素？），一个用于平板电脑（小于 1024 像素），一个用于手机（小于 640 像素）？还是我必须创建这些链接，然后为每个 Retina 设备、rMBP、iPad 和 iPhone 额外创建一个链接？甚至创建超过 3 个 CSS 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:16:15.613

您不需要检测 Retina 显示器，只需检测`device-width`：

```
<link rel="stylesheet" type="text/css" href="stylesheets/prevhome.css" /> <!--Desktop -->
<link rel="stylesheet" type="text/css" media="screen and (device-width : 1024px)" href="stylesheets/tablet.css" /> <!-- Tablet -->
<link rel="stylesheet" type="text/css" media="screen and (device-width: 640px)" href="stylesheets/phone.css" /> <!-- Phone --> 
```

出于 Web 性能的原因，所有这些都可以使用单个 CSS 文件完成，使用`@media (...) { selector1 { property: value; } }`媒体规则块而不是有条件地加载 1 到 3 个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:16:41.823

您的原始 CSS 链接的问题是您有两个条件（逗号表示交替），但您没有在第二个提供任何宽度条件 -

```
<link rel="stylesheet" type="text/css" href="stylesheets/prevhome.css" /> <!--Desktop -->
<link rel="stylesheet" type="text/css" media="screen and (max-device-width : 1024px), screen and (max-device-width : 1024px) and (-webkit-min-device-pixel-ratio: 2)" href="stylesheets/tablet.css" /> <!-- Tablet -->
<link rel="stylesheet" type="text/css" media="screen and (max-device-width: 640px), screen and (max-device-width: 640px) and (-webkit-min-device-pixel-ratio: 2)" href="stylesheets/phone.css" /> <!-- Phone --> 
```

伪代码中的原始链接可以写成——

“最大宽度为 1024像素的屏幕**或**最小设备像素比为 2 的屏幕”

这就是视网膜 MacBook 加载手机和平板电脑样式的原因。

当然，由于您没有为更高像素密度的情况加载特定/不同的样式表，因此您的原始链接可以写为-

```
<link rel="stylesheet" type="text/css" href="stylesheets/prevhome.css" /> <!--Desktop -->
<link rel="stylesheet" type="text/css" media="screen and (max-device-width : 1024px)" href="stylesheets/tablet.css" /> <!-- Tablet -->
<link rel="stylesheet" type="text/css" media="screen and (max-device-width: 640px)" href="stylesheets/phone.css" /> <!-- Phone --> 
```

这在功能上是等效的。

# asp.net-mvc - 为 ASP.Net MVC 中的剃刀视图生成的 WebViewPage 类是否存储在文件系统中？

> ID：14300649
> 
> 赞同：1
> 
> 时间：2013-01-13T04:26:37.940
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

[根据 Microsoft](http://haacked.com/archive/2011/02/21/changing-base-type-of-a-razor-view.aspx)的说法，ASP.Net MVC 中的 Razor 视图在第一次调用时会在运行时转换为[System.Web.Mvc.WebViewPage 类的实例。](http://msdn.microsoft.com/en-us/library/system.web.mvc.webviewpage%28v=vs.98%29.aspx)

这些自动生成的类在运行时第一次生成后是否存储在文件系统的某个临时目录中？如果是这样，它们存储在哪里？还是它们只存在于内存中，并没有持久化到文件系统中，因此无法看到自动生成的类是什么样子的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T09:00:03.033

> 这些自动生成的类在运行时第一次生成后是否存储在文件系统的某个临时目录中？

是的。

> 如果是这样，它们存储在哪里？

```
c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files 
```

当然，调整您正在使用的 .NET 框架版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-06T17:48:28.717

另请参阅您的`%userprofile%\AppData\Local\Temp\Temporary ASP.NET Files\`文件夹。

# git - 如何永远从 git 存储库中排除文件？

> ID：14300651
> 
> 赞同：-1
> 
> 时间：2013-01-13T04:26:49.393
> 
> 标签：git, github

我有一个 github 项目，它设置了所有构建文件和所有我想要的方式（由比我更有能力的人），我想用所有这些设置开始一个新项目。但是，这个项目不属于 repo。

我怎样才能系统地从 repo 中排除这个项目中的所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:03:56.000

如果我正确理解了您的问题，那么有一个 github 项目（不是您的）有一些您想包含在新项目中的文件；但是，您只想要文件，而不是 git repo 历史记录。

如果这是正确的，你可以这样做：

```
% mkdir my-new-project
% cd !$
% curl -#L https://github.com/USER/PROJECT/archive/master.tar.gz | tar xz --strip 1 
```

这会将项目的文件放入您的当前目录，并且不会将项目的 git repo 与它一起带来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:09:01.117

为新项目启动一个新存储库，并将您希望新项目使用的文件复制到其中。

# ios - 从函数的视图控制器中提取数据

> ID：14300653
> 
> 赞同：0
> 
> 时间：2013-01-13T04:27:13.637
> 
> 标签：ios, objective-c

传递数据并不能解决问题......当调用 AppDelegate 中的函数时，我需要从视图控制器中提取字符串数据。这是代码：

在应用委托中：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{

AMViewController *viewController = [[AMViewController alloc] initWithNibName:@"AMViewController" bundle:nil];
self.xpData = viewController.xpLabel.text;
NSLog(@"Value of xpString in AD: %@", self.xpData);

} 
```

在我的 ViewController 中，我没有使用操作来传递/检索字符串。当用户点击主页按钮时，我基本上是从 ViewController 中提取它。我这样做是因为我想在退出时保存我的数据。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:35:00.440

您是否尝试过使用[NSNotificationCenter](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)

或共享委托：

*   [http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/)
*   [http://coderchrismills.wordpress.com/2011/05/05/basic-delegate-example/](http://coderchrismills.wordpress.com/2011/05/05/basic-delegate-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:00:49.157

在你的`AppDelegate.h`

```
@property (atomic, copy) NSString *yourString; 
```

在你改变的地方`xpLabel.text`，这样做

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
appDelegate.yourString = xpLabel.text; 
```

现在在

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    NSLog(@"Value of xpString in AD: %@", self.yourString);
} 
```

* * *

另一种方法

`AMViewController`像这样在课堂上设置你的价值

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setObject:xpLabel.text forKey:@"yourkey"];
[prefs synchronize]; 
```

`applicationDidEnterBackground`像这样获取你的价值

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
yourString = [prefs stringForKey:@"yourkey"]; 
```

# google-apps-script - 在电子表格中将一个单元格链接到另一个单元格

> ID：14300657
> 
> 赞同：0
> 
> 时间：2013-01-13T04:27:58.767
> 
> 标签：google-apps-script

我有一个动态生成的电子表格。我希望能够允许查看者在单击单元格时转到不同的工作表/单元格。我很难找到一个好的方法来做到这一点。

去新牢房相当容易：`Spreadhseet.setActiveSheet()/Spreadsheet.setActiveRange()`工作正常。我的想法是在源单元格的内容中编码链接目标，然后编写一个脚本来“跟随”链接。

我尝试使用图像或绘图。但是这样做有两个问题：虽然可以通过编程方式插入图像，但我没有看到以编程方式将脚本与它们关联的方法。并且被调用的脚本没有与之关联的关联事件，因此无法查看用户单击了哪个单元格（单击图像不会设置活动单元格）。

我考虑过使用`onEdit()`. 这几乎可以工作，但`onEdit`仅在更改（而不是选择）时触发，因此用户实际上必须修改单元格才能“链接”。在测试时，我倾向于使用`onEdit`.

我尝试制作一个菜单项，并在菜单的脚本中获取活动单元格的内容以确定去哪里。这很有效，但对用户来说比我希望的要困难一些。

我希望有人能创造性地解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:17:07.123

从您所描述的绘图或图像插入应该可以工作，因为它具有与菜单项完全相同的功能。您可以像在菜单中一样为其分配脚本。

# jquery - 如何使用 javascript 显示 iOS Safari 地址栏？

> ID：14300658
> 
> 赞同：1
> 
> 时间：2013-01-13T04:28:06.050
> 
> 标签：jquery, ios, safari, scrolltop

我正在使用 jQuery 根据位置中哈希的更改为 scrollTop 设置动画。效果很好。

问题是，当我单击“主页”时，我希望它一直滚动到真正的顶部——包括地址栏。

显然，这与大多数人想要的相反。所以有很多关于如何隐藏那个讨厌的地址栏的问题。

就我而言，我希望能够（使用 JavaScript）滚动到页面顶部。现在，当我尝试将 scrollTop 设置为 0 或 -100 或 -500 时，它只会将我置于内容的顶部，并且地址栏保持隐藏状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:11:32.803

你可以尝试设置`document.body.scrollTop=0`。这将显示地址栏。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-30T15:33:27.357

对我来说这有效：

```
document.body.scrollTop = -1 
```

...但是由于动量滚动，之后内容有点偏移，所以我通常使用一个较短的间隔将 scrollTop 设置为 -1 直到它位于正确的位置。

我用这个助手...

```
const showMobileUrlBar = () => {

  let i = 0
  const to = setInterval(() => {

    document.body.scrollTop = -1

    // clear timeout after 250 ms and reset scrollTop to 0
    if (i++ > 25) {
      clearInterval(to)
      document.body.scrollTop = 0
    }

  }, 10)

} 
```

...在动画滚动位置时可以在 onComplete 回调中使用，如下所示：

```
TweenMax.to(window, 0.5, {scrollTo: 0, onComplete: showMobileUrlBar}) 
```

不是最好的解决方案，但它适用于 iPad 和 iPhone。

# javascript - 实现自动滚动后的奇怪可拖动行为

> ID：14300659
> 
> 赞同：4
> 
> 时间：2013-01-13T04:28:12.653
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable

[我已经使用jQuery UI draggable widget](http://api.jqueryui.com/draggable/)实现了拖放。

我现在在拖动操作期间实现自动滚动。我对其进行了设置，以便当您开始拖动时，浏览器窗口的顶部和底部会出现灰色叠加层。当您拖入其中一个叠加层时，浏览器窗口开始自动滚动。

[您可以在http://www.softcircuits.com/Client/scrolltest.html](http://www.softcircuits.com/Client/scrolltest.html)看到我的测试页面。通过拖动左侧的十字准线图标之一来拖动项目。

但是有一个问题：如果您滚动到页面底部，然后将一个项目拖动到顶部叠加层，它将按预期向上滚动。然而，对我来说，我在页面的一半左右，可拖动的助手不会再高了。我无法一直拖到页面顶部。

这很可能与 Draggable 小部件有关。有谁能够看到为什么会这样？我在 Windows 7 上使用谷歌浏览器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T09:24:58.637

为了跨浏览器兼容并避免奇怪的行为，我建议使用所有[JQueryUI 可拖动回调](http://api.jqueryui.com/draggable/)。

几天前我读到最后一个版本的 Chrome 在原生 HTML5 可拖动事件方面存在一些非常棘手的问题。

例如，我刚刚检查了您的网页源代码并且您正在使用`$('.drag-handle').on('drag', function(){...});`=> 您应该使用[拖动](http://api.jqueryui.com/draggable/#event-drag)回调。

在您的情况下，我还建议不要`window`用作可滚动容器。您应该创建一个`div`来包装所有表格内容并将其用作滚动容器。我过去已经完成了这个实现并且它正在工作。

不要忘记在`containment`创建可拖动小部件期间在选项中设置包装器 ID。

如果它总是不起作用，您还可以尝试覆盖`drag`回调中的辅助位置：

```
//Save the mouse position in global variables
$(document).mousemove(function(e){
   window.mouseXPos = e.pageX;
   window.mouseYPos = e.pageY;
});

$('[id^="drag-"]').each(function() {
    $(this).draggable({
        opacity: 0.7,
        cursorAt: { top: 15, left: 50 },        
        scroll: true,
        stop: function(){},  
        drag : function(e,ui){            
            //Force the helper position
            ui.position.left = window.mouseXPos - $(this).draggable('option','cursorAt').left;
            ui.position.top = window.mouseYPos- $(this).draggable('option','cursorAt').top; 
        });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T21:45:02.643

将可拖动的包含选项从窗口更改为文档对我有用。

```
$('.drag-handle').draggable({ 
    ...
    containment: "document",
    ...
}); 
```

请参阅：[http ://docs.jquery.com/UI/Draggable#option-containment](http://docs.jquery.com/UI/Draggable#option-containment)

# shell - 没有 seq 或 jot 的 shell 倒计时

> ID：14300661
> 
> 赞同：0
> 
> 时间：2013-01-13T04:28:55.243
> 
> 标签：shell, countdown

我正在尝试制作一个倒计时计时器脚本，该脚本需要几秒钟`$1`，然后倒计时到零，显示当前剩余的秒数。

问题是，我在一个没有`seq`or的嵌入式盒子上执行此操作`jot`，我知道这两个工具可以生成我的数字列表。

这是我在普通（非嵌入式）系统上工作的脚本：

```
#!/bin/sh

for i in $(/usr/bin/jot ${1:-10} ${1:-10} 1); do
    printf "\r%s " "$i"
    sleep 1
done

echo "" 
```

这适用于 FreeBSD。如果我在 Linux 机器上，我可以将这`for`一行替换为：

```
for i in $(/usr/bin/seq ${1:-10} -1 1); do 
```

为了同样的效果。

但是如果我没有`jot`OR`seq`怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T04:43:06.260

“香草” Bourne shell 的问题在于没有这样的东西。行为取决于特定的实现。大多数现代`/bin/sh`es 具有 POSIX 功能，但在细节上有所不同。当我进入“sh-compatibility”模式时，我习惯于回退到真正古老的 Bourne 功能，这在 30 年前很有帮助，但在现代系统甚至嵌入式系统上通常都太过分了。:)

无论如何，这是一个通用的倒计时循环，即使在非常旧的 shell 中也可以工作，但在现代 bash/dash/ksh/zsh/etc 中仍然可以正常工作。它确实需要`expr`命令，这是一个非常安全的要求。

```
i=10
while [ $i -gt 0 ]; do
  ...
  i=`expr $i - 1`
done 
```

因此，如果您的嵌入式系统具有`printf`，这是您的脚本，具有相同的“如果未指定参数，则默认为 10”行为：

```
#!/bin/sh
n=$1
i=${n-10}
while [ $i -gt 0 ]; do
  printf '\r%s ' "$i"
  i=`expr $i - 1`
  sleep 1
done 
```

（前两行可能可以替换为 just `i=${1-10}`，但有些 - 再一次，古老的 - shell 不喜欢将特殊参数扩展应用于数字参数。）

如果系统*没有*`printf`，那就有问题了；只有外壳的内置`echo`（或没有内置和一些随机选择的实现`/bin/echo`），没有保证的方法可以做这些事情（回显特殊字符或阻止换行符）。您可能可以使用`\r`或`\015`获取回车符。您可能需要`-e`让 shell 识别那些（但这可能只是回显文字`-e`）。在脚本中放置文字回车可能会起作用，但会使维护脚本变得很痛苦。

同样，`-n`可能会压缩换行符，但可能只是回显文字`-n`. 压缩换行符的最早方法是使用换行符自然去`echo`的特殊序列；`\c`这仍然适用于某些版本`/bin/echo`（包括 Mac OS X 上的版本）或与 bash 的内置 echo`-e`选项结合使用。

因此，脚本中看似最简单的部分可能是让您接触到`awk`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:39:34.690

如果您使用的是 Bash，这就是您想要的：

```
for i in {1..10} 
```

还是没有 bash？这个帖子里的东西怎么样？[Bourne Shell For i in (seq)](https://stackoverflow.com/questions/2102364/bourne-shell-for-i-in-seq)

> 尝试
> 
> ```
> for i in 1 10 15 20
> do
>    echo "do something with $i"
> done 
> ```
> 
> 否则，如果您有最新的 Solaris，至少有 bash 3。例如，这给出了从 1 到 10 和 15 到 20 的范围
> 
> ```
> for i in {1..10} {15..20}
> do
>   echo "$i"
> done 
> ```
> 
> 或者使用像 nawk 这样的工具
> 
> ```
> for i in `nawk 'BEGIN{ for(i=1;i<=10;i++) print i}'`
> do
>   echo $i
> done 
> ```
> 
> 或者甚至是while循环
> 
> ```
> while [ "$s" -lt 10 ]; do s=`echo $s+1|bc`; echo $s; done 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T04:46:09.073

如果你的 shell 是 bash，你可以从一个固定的数字开始倒计时，如下所示：

```
#!/bin/bash

for n in {10..1}; do
  printf "\r%s " $n
  sleep 1
done 
```

但这对你不起作用，因为 bash 不会处理类似的事情`{${1:-10}..1}`，而且你已经指定了你想要一个命令行选项。当然，你也说过你没有使用 bash，所以我们假设一个更简单的 shell。

如果你有`awk`，你可以用它来计算。

```
#!/bin/sh

for n in $(awk -v m="${1:-10}" 'BEGIN{for(;m;m--){print m}}'); do
  printf "\r%s " $n
  sleep 1
done
printf "\r \r"  # clean up 
```

如果你没有 awk，你应该可以在纯 shell 中做到这一点：

```
#!/bin/sh

n=${1:-10}

while [ $n -gt 0 ]; do
  printf "\r%s " $n
  sleep 1
  n=$((n-1))
done
printf "\r \r"  # clean up 
```

我认为纯 shell 版本可能足够简单，应该优于 awk 解决方案。

当然，正如 Mark Reed 在评论中指出的那样，如果您的系统不包含 a `printf`，那么您将需要执行一些丑陋`echo`的魔法，这取决于您的操作系统或外壳......如果您的外壳不支持`$((..))`,您可以将该行替换为`n=$(expr $n - 1)`. 如果您想在提供非数字的情况下添加错误处理`$1`，那不会受到伤害。

# ruby-on-rails - Rails 多个视图使用条件访问控制器

> ID：14300662
> 
> 赞同：0
> 
> 时间：2013-01-13T04:29:06.613
> 
> 标签：ruby-on-rails, controller, action

我有一个用户模型，除了标准帐户信息外，还包括运输信息。

我有三个不同的视图可以更新用户的信息：

*   向导
*   设置
*   帐户

我知道我应该使用 REST 模型，因此我尝试通过 Update 操作运行所有这些更新。一个问题是，在向导视图中，我需要调用 Stripe API。所以我在 Update 控制器中有那个 Stripe 调用。但是现在当用户尝试在设置或帐户视图上更新他们的帐户时，更新控制器正在调用 Stripe API，这显然不是我想要的。

所以我试图做的是插入一个条件来检查是否正在传递向导参数之一（：total_value），如果是，则向Stripe收费。如果不是，那么只需更新用户数据。但我无法让它工作，它只是更新用户而不是向 Stripe 收费。

这是分离这些更新的正确方向吗？或者我应该在用户控制器中创建自定义操作？这是如何运作的？

**users_controller**

```
def update
  if !params[:total_value].nil?
    if @user.update_attributes(params[:user])
      # flash[:success] = "Profile updated"
      sign_in @user
      # Value input by the user (in dollars)
      @userPrice = params[:user][:total_value]
      # Send full price in cents to Stripe
      @stripePrice = @userPrice.to_i * 100

      Stripe::Charge.create(
        :amount => @stripePrice,
        :currency => "usd",
        :card => params[:user][:stripe_card_token],
        :description => "Charge for service"
      )  
      redirect_to success_path
      flash[:success] = "Hurray!"
    else
      flash.now[:notice] = "Can not be saved, please enter information."
      render :new
    end
  elsif 
    if @user.update_attributes(params[:user])
      sign_in @user
      flash[:success] = "Profile updated"
      redirect_to account_path
    else
      flash[:error] = "Error"
    end
  end    
 end 
```

**向导/show.html.erb**

```
 <%= form_for(@user) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
        <%= f.text_field :total_value, placeholder: "0", :class => 'amount' %>

        <%= f.label :name %>
        <%= f.text_field :name, required: "required" %>

        <%= f.label :address_1, "Address" %>
        <%= f.text_field :address_1, required: "required" %>

        <%= f.label :address_2, "Address line 2" %>
        <%= f.text_field :address_2 %>

        <%= f.label :city, "City" %>
        <%= f.text_field :city, required: "required" %>

        <%= f.label :state, "State" %>
        <%= f.text_field :state, required: "required" %>

        <%= f.label :zip, "Zip code" %>
        <%= f.text_field :zip, required: "required" %>

        <%= f.hidden_field :stripe_card_token %>

        <%= label_tag :card_number, "Credit Card Number " %>  
        <%= text_field_tag :card_number, nil, name: nil %>  

        <%= label_tag :card_code, "Security Code on Card (CVV)" %>  
        <%= text_field_tag :card_code, nil, name: nil %>  
       <%= label_tag :card_month, "Card Expiration" %>  
        <%= select_month nil, {add_month_numbers_true: true}, {name: nil, id: "card_month"}%>  
        <%= select_year nil, {start_year: Date.today.year, end_year: Date.today.year+15}, {name: nil, id: "card_year"}%>  
        <%= f.submit "Update your shipping information", class: "btn btn-large btn-primary" %>

    <% end %> 
```

**用户/shipping.html.erb**

```
 <%= form_for(@user) do |f| %>
        <%= render 'shared/error_messages', object: f.object %>
            <%= f.label :name %>
            <%= f.text_field :name %>

            <%= f.label :address_1, "Address" %>
            <%= f.text_field :address_1 %>

            <%= f.label :address_2, "Address line 2" %>
            <%= f.text_field :address_2 %>

            <%= f.label :city, "City" %>
            <%= f.text_field :city %>

            <%= f.label :state, "State" %>
            <%= f.text_field :state %>

            <%= f.label :zip, "Zip code" %>
            <%= f.text_field :zip %>  

            <%= f.submit "Update your shipping information", class: "btn btn-large btn-primary" %>
      <% end %> 
```

**用户/account.html.erb**

```
 <%= form_for(@user) do |f| %>
    <%= render 'shared/error_messages', object: f.object %>
        <%= f.label :name %>
        <%= f.text_field :name %>

        <%= f.label :email %>
        <%= f.text_field :email %>

        <%= f.label :password %>
        <%= f.password_field :password %>

        <%= f.label :password_confirmation, "Confirm Password" %>
        <%= f.password_field :password_confirmation %>

        <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>

  <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:08:16.813

我看到两个问题。首先是您的：

`if !params[:total_value].nil?`

应该

`unless params[:user][:total_value].nil?` （我个人更`unless`喜欢`if !...`）

正如 Nishant 的评论中所述。其次，你有一个`elsif`条件的结束，没有它检查任何东西。一个`else`就够了。

# java - android webview显示空白页面

> ID：14300664
> 
> 赞同：38
> 
> 时间：2013-01-13T04:29:10.217
> 
> 标签：java, android, eclipse, android-emulator, webview

我有一个 android 应用程序，我正在使用在 android 2.3.3 上运行的模拟器开发一个嵌入 WebView 的框架布局，该框架布局嵌套在线性布局（垂直）中。无论我使用什么代码，它实际上都不会做任何事情。我将 android 应用程序的权限设置为 INTERNET。即使尝试仅加载 HTML 代码。我得到一个空白的白页，没有错误，什么都没有。logcat 中也没有任何内容。

```
WebView wview = (WebView)findViewById(R.id.webView1);
wview.getSettings().setJavaScriptEnabled(true); 
```

我已经尝试了所有这三种方法来尝试将任何内容加载到 webview 中：

```
wview.loadUrl("http://www.google.com");
wview.loadData("<HTML><BODY><H3>Test</H3></BODY></HTML>","text/html","utf-8");
wview.loadDataWithBaseURL(null, "<HTML><BODY><H3>Test</H3></BODY></HTML>","text/html","utf-8",null); 
```

这三个都给了我相同的结果。没有什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2015-06-25T02:59:18.623

```
WebSettings settings = wbView.getSettings();
settings.setDomStorageEnabled(true); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-06-02T15:10:41.453

可能有点晚了，但我想和你分享我的经验，因为我遇到了同样的问题并且花了很多时间。

把你的`WebView`in**`RelativeLayout`**而不是 in **`FrameLayout`**。

我测试过的内容：每次都调用我`WebView`的，但在屏幕上我得到了空白页。`onPageFinished()`

从`chrome://inspect` `WebView`调试器中，我可以`WebView`通过按下`inspect`按钮“ping”我的，然后`WebView`立即刷新。

我的想法 -`WebView`在 中未正确呈现`FrameLayout`，并`RelativeLayout`解决了问题（甚至`invalidate()`调用`requestLayout()`也没有帮助）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-13T07:49:35.050

我想如果你编辑你的一些代码就可以了。看看我在下面的例子中是怎么做的。用这种方式为你尝试..
**用于显示网页**

```
final WebView wbView = (WebView) findViewById(R.id.WebView);

WebSettings settings = wbView.getSettings();
settings.setJavaScriptEnabled(true); 
wbView.loadUrl("https://play.google.com/store/apps");
wbView.clearView();
wbView.measure(100, 100);
settings.setUseWideViewPort(true);
settings.setLoadWithOverviewMode(true); 
```

**要显示 HTML：**
请参阅本教程..

*   [android-tutorial-html-file-in-webview](http://www.monocube.com/2011/02/08/android-tutorial-html-file-in-webview/)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-13T07:01:04.097

而不是传递null，你应该传递一个空`String`给它。例如：`""`
所以你应该这样称呼它：
`wview.loadDataWithBaseURL("", "<HTML><BODY><H3>Test</H3></BODY></HTML>","text/html","utf-8","");`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-24T20:45:54.637

我给 +1 是因为这些都是使 webview 正常工作的有效帮助，但这不是我问题的解决方案。

我没有意识到我的 webview 布局包含一个 wrap_content，这导致它的高度为 0px。通过将其设置为 fill_parent 我解决了这个问题。（带有白色背景的 Webview 和带有白色背景的应用程序，当它在布局设计器中显示为全高时，您无法真正分辨出它不是全高。）

不过感谢您的帮助！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-09-04T17:03:50.970

`clearView`已弃用。

利用：

```
webView.loadUrl("about:blank") 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-11-18T10:28:07.480

就我而言，这是因为我的 webview 试图使用 HTTPS 加载证书不受信任的页面。

您可以使用以下代码段检查您的代码中是否存在这种情况：

```
@Override
public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {
    handler.proceed();
} 
```

*爪哇*

```
override fun onReceivedSslError(view: WebView?, handler: SslErrorHandler?, error: SslError?) {
    handler?.proceed()
} 
```

*科特林*

然后，如果是这种情况，请快速删除该片段并参考[文档](https://developer.android.com/training/articles/security-ssl#CommonProblems)以进一步诊断问题，并可能将证书添加到您的密钥库中。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-09-24T23:08:13.507

如果它仍然不起作用，请尝试在网址前添加**“http://”**或**“https://”**，它应该可以工作。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-07-28T23:41:04.433

在 webview 布局中将 wrap_content 更改为 fill_parent。它对我有用

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-10-31T03:52:29.900

我认为您需要的是 WebViewClient。设置 webviewclient 后调用 webview.loadUrl(_url); 像这样的东西....

```
private void loadUrlInWebView(String _URL){
    WebView myWebView = (WebView) findViewById(R.id.webviewer);     

    WebSettings webSettings = myWebView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webSettings.setUseWideViewPort(true);
    webSettings.setLoadWithOverviewMode(true);

    myWebView.setWebViewClient(new MyWebViewClient());
    myWebView.loadUrl(_URL);
}

private class MyWebViewClient extends WebViewClient{
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {         

            view.loadUrl(url);

        return true;
    }

    @Override
    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
        Toast.makeText(activity, "Oh no! " + description, Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-12-21T21:21:35.387

使用 ip 地址而不是 web url 然后使用以下 ssl 错误处理方法覆盖 webclient

```
@Override
public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {
    handler.proceed(); // Ignore SSL certificate errors
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-03-31T06:29:03.060

You can use the following code, this will be helpful:

```
WebView myWebView = (WebView) findViewById(R.id.webview);
myWebView.setWebViewClient(new MyWebViewClient());

private class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (Uri.parse(url).getHost().equals("www.example.com")) {
            // This is my web site, so do not override; let my WebView load the page
            return false;
        }
        // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
        startActivity(intent);
        return true;
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-07-04T08:55:33.657

尝试增加模拟设备的**RAM**。这为我解决了问题。

我通过查看 Android Monitor (Android Studio) 中的 logcat 消息发现了这一点。下面的消息让我知道增加**RAM**有什么问题：

```
W/art: Throwing OutOfMemoryError "Failed to allocate a 6635532 byte allocation with 1170528 free bytes and 1143KB until OOM"

W/JavaBrowserViewRendererHelper: Error allocating bitmap

E/chromium: [ERROR:java_browser_view_renderer_helper.cc(132)] Error unlocking java bitmap pixels. 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-10-15T20:41:18.463

我的 webview**上面显示了一个白色的空白方块**，有时完全空白。这仅在加载某些数据时发生。

将其更改为**RelativeLayout**，并将 layout_height 设置为**match_parent**对我有用。

```
<RelativeLayout xmlns:android=...
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <RelativeLayout
        android:id="@+id/ll_title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginTop="3dp"
        android:gravity="center_vertical"
        android:orientation="horizontal">

        .....

    </RelativeLayout>

    <WebView
        android:id="@+id/web_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/ll_title"
        android:background="@color/colorYellow" />

    <ProgressBar
        android:id="@+id/pb_spinning"
        style="?android:attr/progressBarStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:visibility="gone" />

</RelativeLayout> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-10-26T11:55:25.780

只需使用 loadDataWithBaseURL

```
 loadDataWithBaseURL(null,"html content" , "text/html" , "utf-8",null) 
```

# sql - 使用 t-SQL 选择已删除记录的数量

> ID：14300671
> 
> 赞同：5
> 
> 时间：2013-01-13T04:30:43.213
> 
> 标签：sql, sql-server, sql-server-2008

我似乎无法弄清楚如何使用 SQL Server 2008 选择以前删除的记录数。是这样的吗？

```
DELETE FROM [table] WHERE [id]=10
SELECT SCOPE_IDENTITY() 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-13T04:32:38.520

在语句`SELECT @@ROWCOUNT`之后立即使用。`DELETE`您可以[在 MSDN 上](http://technet.microsoft.com/en-us/library/ms187316.aspx)[阅读更多信息`@@ROWCOUNT`](http://technet.microsoft.com/en-us/library/ms187316.aspx)：

> # `@@ROWCOUNT`
> 
> 返回受最后一条语句影响的行数。
> 
> ## 评论
> 
> ...
> 
> **数据操作语言 (DML) 语句将`@@ROWCOUNT`值设置为受查询影响的行数，并将该值返回给客户端。**DML 语句可能不会向客户端发送任何行。

请注意，我说“立即之后”是因为其他语句可以更改 的值`@@ROWCOUNT`，即使它们本身不影响行：

> `DECLARE CURSOR`并将值`FETCH`设置`@@ROWCOUNT`为 1。
> 
> ...
> 
> `USE`, `SET <option>`, `DEALLOCATE CURSOR`,等语句`CLOSE CURSOR`，`BEGIN TRANSACTION`或`COMMIT TRANSACTION`将值重置`ROWCOUNT`为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T04:45:50.903

你也可以[`SET NOCOUNT OFF`](http://msdn.microsoft.com/en-us/library/aa259204%28v=sql.80%29.aspx)。

评论

当 SET NOCOUNT 为 ON 时，不返回计数（指示受 Transact-SQL 语句影响的行数）。当 SET NOCOUNT 为 OFF 时，返回计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T18:51:12.173

在调试存储过程时，我一般使用下面的这段代码：

```
DELCARE @Msg varchar(30)
...
SELECT @Msg = CAST(@@ROWCOUNT AS VARCHAR(10)) + ' rows affected'
RAISERROR (@Msg, 0, 1) WITH NOWAIT 
```

我在操作之前和之后使用它，例如删除。我将在消息中添加一个数字，以跟踪我在代码中的哪个片段。当您处理具有大量代码行的大型存储过程时，它非常有用。

# android - ListView Click Action 会先加载点击行下方的所有 html 文档吗？

> ID：14300674
> 
> 赞同：0
> 
> 时间：2013-01-13T04:31:20.340
> 
> 标签：android, listview, webview, local, onclicklistener

我有一个带有一个 TextView 的 ListView。列表视图由字符串数组和数组适配器填充（在扩展 ListActivity 和 list_item 布局的 List 类中）。现在设置了一个点击监听器，并使用 switch 位置语句和 assets 文件夹中的本地 html 文件通过 uri 解析方法链接到列表行。单击列表行时，html 页面设置为显示在设置为（TopicDisplay 类和 display_item 布局）的 Web 视图中。下面是我的

问题：当用户单击列表视图上的一行时 - 从该行到最后一行的 html 文档首先显示最后一个文档。我可以使用 android 设备后退按钮来浏览加载的每个 html 文档，直到单击的行。如何只显示点击的行 HTML 文档？

列表类中的代码

```
package com.abcdef.list;

//import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
//import android.widget.AdapterView;
//import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
//import android.widget.TextView;

public class List extends ListActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // storing string resources into Array
    String[] adobe_products = getResources().getStringArray(R.array.adobe_products);

    // Binding resources Array to ListAdapter
    this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.label, adobe_products));
}   
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    change(position);
}
void change(int position){
 //   Uri uri = null;
    switch(position){   

case 0 :{
    Intent i0 = new Intent(getApplicationContext(), TopicDisplay.class);
  Uri  uri0=Uri.parse("file:///android_asset/File0.html");
    i0.setData(uri0);
    startActivity(i0);}
case 1 :{
    Intent i1 = new Intent(getApplicationContext(), TopicDisplay.class);
  Uri  uri1=Uri.parse("file:///android_asset/Topic1.html");
    i1.setData(uri1);
    startActivity(i1);}
case 2 :{
    Intent i2 = new Intent(getApplicationContext(), TopicDisplay.class);
    Uri   uri2=Uri.parse("file:///android_asset/Topic2.html");
    i2.setData(uri2);
    startActivity(i2);}

case 3:{
    Intent i3 = new Intent(getApplicationContext(), TopicDisplay.class);
    Uri  uri3=Uri.parse("file:///android_asset/Topic3.html");
    i3.setData(uri3);
    startActivity(i3);}
  case 4:{
      Intent i4 = new Intent(getApplicationContext(), TopicDisplay.class);
      Uri    uri4=Uri.parse("file:///android_asset/Topic4.html");
    i4.setData(uri4);
    startActivity(i4);}
 case 5:{
     Intent i5 = new Intent(getApplicationContext(), TopicDisplay.class);
     Uri  uri5=Uri.parse("file:///android_asset/Topic5.html");
    i5.setData(uri5);
    startActivity(i5);}
 case 6:{
     Intent i6 = new Intent(getApplicationContext(), TopicDisplay.class);
     Uri  uri6=Uri.parse("file:///android_asset/Topic6.html");
     i6.setData(uri6);
     startActivity(i6);}
  case 7:{
      Intent i7 = new Intent(getApplicationContext(), TopicDisplay.class);
      Uri  uri7=Uri.parse("file:///android_asset/Topic7.html");
     i7.setData(uri7);
     startActivity(i7);}
  case 8:{
      Intent i8 = new Intent(getApplicationContext(), TopicDisplay.class);
      Uri  uri8=Uri.parse("file:///android_asset/Topic8.html");
     i8.setData(uri8);
     startActivity(i8);}  
   } } } 
```

这是我的 TopicDisplay 类代码

```
package com.abcdef.list;

import android.app.Activity;
//import android.app.Application;
//import android.content.Intent;
import android.os.Bundle;
import android.webkit.*;

public class TopicDisplay extends Activity{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.topic_display);

    WebView tabViewing = (WebView) findViewById(R.id.webView1);
    tabViewing.loadUrl(getIntent().getDataString());

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:32:31.607

> 当用户单击列表视图上的一行时 - 从该行到最后一行的 html 文档首先显示最后一个文档。

您只是忘记`break;`在 switch 语句中添加每个案例。

您还应该从每个 case 语句中删除公共代码，尝试：

```
Intent intent = new Intent(getApplicationContext(), TopicDisplay.class);
switch(position){   
case 0 :
    intent.setData(Uri.parse("file:///android_asset/File0.html"));
    break;
case 1 :
    intent.setData(Uri.parse("file:///android_asset/Topic1.html"));
    break;
case 2 :
    intent.setData(Uri.parse("file:///android_asset/Topic2.html"));
    break;
// etc
}
startActivity(intent); 
```

# xna - 新加载的精灵在 XNA 4.0 中无法正常运行

> ID：14300675
> 
> 赞同：0
> 
> 时间：2013-01-13T04:32:08.053
> 
> 标签：xna, xna-4.0, sprite

这是我正在进行的一个项目的代码，其中一个敌人在屏幕底部来回移动。

```
class enemy1
{
    Texture2D texture;
    public Vector2 position;
    bool isAlive = false;
    Random rand;
    int whichSide;
    public enemy1(Texture2D texture, Vector2 position)
    {
        this.texture = texture;
        this.position = position;
    }

    public void Update()
    {
        if (isAlive)
        {
            if (whichSide == 1)
            {
                position.X += 4;

                if (position.X > 1000 + texture.Width)
                    isAlive = false;
            }
            if (whichSide == 2)
            {
                position.X -= 4;

                if (position.X < 0)
                    isAlive = false;
            }
        }
        else
        {
            rand = new Random();
            whichSide = rand.Next(1, 3);
            SetInStartPosition();
        }
    }

    private void SetInStartPosition()
    {
        isAlive = true;
        if (whichSide == 1)
            position = new Vector2(0 - texture.Width, 563 - texture.Height);
        if (whichSide == 2)
            position = new Vector2(1000 + texture.Width, 563 - texture.Height);
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(texture, position, Color.White);
    }
} 
```

现在我希望有几个敌人来回走动，但他们从不同的位置开始，所以看起来屏幕底部有几个敌人来回走动。我已经设法在屏幕上绘制了一些其他敌人，但它们的行为不像第一个敌人。它们只是屏幕上的图片，不会在任何地方移动。所以现在我只有移动的英雄和屏幕底部的一个敌人，以及坐在屏幕顶部的其他 5 个敌人什么都不做。我如何随时轻松地从具有相同行为的类中添加新的精灵，同时又不创建十亿个变量来存储它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:00:38.050

Generally it's a good idea to have similar logic contained within the proper class, so if all `Sprite`s where to do the same thing, then all you would need to do is put your movement code inside a public method and then call that method inside `Update()`.

So, if your Sprite class looks something like this:

```
public class Sprite
{
    private Vector2 Position; 
    public Sprite(Texture2D texture, Vector2 position)
    {
       Position = position; 
    }

    //then just add this
    public void MoveSprite(int amount)
    {
        position.X += amount; 
    }
} 
```

Now, the object name "Sprite" is pretty generic, you will more than likely have many "Sprites" in your game.

So you're going to want to follow good OOP practices and maybe name this specific sprite something different and then have it derive from this class we're looking at right now. (But i'm not going to make design decisions for you)

This was a vague question, but that's my best shot at an answer for you.

# java - Java 代码编译错误

> ID：14300676
> 
> 赞同：0
> 
> 时间：2013-01-13T04:32:23.863
> 
> 标签：java, javac

我正在尝试编译一个名为“Left 4K Dead”的 4KB Java 游戏。无论如何，它会使用该`javac G.java`命令成功编译，但是当您使用`java G`它运行它时，会向我吐出这个错误：

`Exception in thread "main" java.lang.NoSuchMethodError: main`

任何人都知道如何使这项工作？谢谢 ：）

代码开头：

```
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import java.util.*;

 public class G extends Applet implements Runnable
 {
private boolean[] k = new boolean[32767];
private int m;

public void start()
{
    enableEvents(AWTEvent.KEY_EVENT_MASK | AWTEvent.MOUSE_EVENT_MASK | AWTEvent.MOUSE_MOTION_EVENT_MASK);
    new Thread(this).start();
}

public void run()
{
    BufferedImage image = new BufferedImage(240, 240, BufferedImage.TYPE_INT_RGB);
    Graphics ogr = image.getGraphics(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:34:30.847

> 线程“main”中的异常 java.lang.NoSuchMethodError: main

这个异常准确地表明了它的状态，没有`main`方法，所以程序无法启动。

Left 4k Dead 代码的问题在于它是一个[小程序](http://en.wikipedia.org/wiki/Java_applet)。它期望被编译然后从网页运行，而不是从命令行运行（即你不能用命令运行它`java`）。如果你想从命令行运行它，你应该查看一个独立的[小程序查看器](http://en.wikipedia.org/wiki/AppletViewer)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:49:29.283

类编译后，使用

`appletviewer <class-name>`

通过命令行运行它，因为它是一个`applet`.

**要不然**

您可以按照 CodeMaker 的建议将其嵌入浏览器中。

# javascript - 如何为 Ember 数据创建自定义序列化程序

> ID：14300679
> 
> 赞同：10
> 
> 时间：2013-01-13T04:32:55.570
> 
> 标签：javascript, ember.js, ember-data

我有一个 API，它返回的 JSON 格式不适合 Ember 的使用。取而代之的是（余烬所期待的）：

```
{ events: [
    { id: 1, title: "Event 1", description: "Learn Ember" },
    { id: 2, title: "Event 2", description: "Learn Ember 2" }
]} 
```

我得到：

```
{ events: [
    { event: { id: 1, "Event 1", description: "Learn Ember" }},
    { event: { id: 2, "Event 2", description: "Learn Ember 2" }}
]} 
```

所以如果我理解正确的话，我需要创建一个自定义的 Serializer 来修改 JSON。

```
var store = DS.Store.create({
    adapter: DS.RESTAdapter.create({
        serializer: DS.Serializer.create({
            // which hook should I override??
        })
    })
}); 
```

我已经阅读了与 DS.Serializer 相关的代码注释，但我不明白如何实现我想要的......

我该怎么做？

ps：我的目标是做`App.Event.find()`作品。目前，我得到`Uncaught Error: assertion failed: Your server returned a hash with the key 0 but you have no mapping for it`. 这就是为什么我需要修复收到的 JSON。

**编辑**：这是我现在的工作方式：

```
extractMany: function(loader, json, type, records) {
    var root = this.rootForType(type),
    roots = this.pluralize(root);

    json = reformatJSON(root, roots, json);
    this._super(loader, json, type, records);
  } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T05:05:41.680

我假设响应仅包含 ID，并且您正在尝试提取它们。

您将需要子类`DS.JSONSerializer`化，它提供了处理 JSON 有效负载的基本行为。特别是，您将需要覆盖该`extractHasMany`钩子：

```
// elsewhere in your file
function singularize(key) {
  // remove the trailing `s`. You might want to store a hash of
  // plural->singular if you deal with names that don't follow
  // this pattern
  return key.substr(0, key.length - 1);
}

DS.JSONSerializer.extend({
  extractHasMany: function(type, hash, key) {
    return hash[key][singularize(key)].id;
  }
}) 
```

# haskell - Haskell，输入参数，返回类型

> ID：14300681
> 
> 赞同：1
> 
> 时间：2013-01-13T04:33:22.357
> 
> 标签：haskell

对于这段 haskell 代码：

```
isIn :: (Eq a) => [a] -> [a] -> Bool
needle `isIn` haystack = any (needle `isPrefixOf`) (tails haystack) 
```

这是我相信的函数定义。我如何理解输入参数是什么以及返回类型是什么？

例如：什么是`(Eq a)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T04:51:46.277

`Eq`就是所谓的[typeclass](http://learnyouahaskell.com/types-and-typeclasses)。它声明了一些函数，在这种情况下`==`和朋友，我们可以创建该类型类的实例，为`==`和其他人提供定义。

这意味着当我们拥有某个类型类的实例时`Eq`，我们知道可以`==`在其上使用。

这里的诀窍是，在我们的函数中，我们需要有可以检查它们是否相等的类型。如果我们刚刚有`[a] -> [a] -> Bool`那么我们就会遇到麻烦，因为我们刚刚承诺我们的实现可以在没有`==`操作符的情况下工作，而它没有。

因此，我们使用`=>`添加上下文到我们的函数定义。它说类似“`a` *只要* `a`是类型类的实例，这将适用于任何情况`Eq`”。这样，我们可以`==`安全地使用并知道我们所有的参数类型都会适当地实现它。

**快速插图**

这是一个错误：

```
doIfEqual :: a -> a -> (a -> a -> [a])
doIfEqual a b f = if a==b then f a b else [] 
```

但这有效，因为我们指定`a`的是一个实例`Eq`

```
doIfEqual (Eq a) => a -> a -> (a -> a -> [a])
doIfEqual a b f = if a==b then f a b else [] 
```

# key-bindings - Tmux 使用 Ctrl-b 和 Ctrl-f 向上/向下滚动页面

> ID：14300684
> 
> 赞同：14
> 
> 时间：2013-01-13T04:33:42.310
> 
> 标签：key-bindings, tmux

进入滚动模式后，如何使用`Ctrl`+`b`和`Ctrl`+`f`上下滚动页面？

这些命令当前在字符之间来回移动。

*.tmux.conf*

```
set -g default-terminal "screen-256color"
setw -g xterm-keys on
set -g status-bg black
set -g status-fg white
set -g history-limit 999999999

bind C-d detach
bind r source-file ~/.tmux.conf

set -g prefix C-z 

if-shell 'test "$(tmux -V)" = "tmux 1.5"' 'set -g prefix C-a,C-z'
if-shell 'test "$(tmux -V)" = "tmux 1.6"' 'set -g prefix2 C-a'
if-shell 'test "$(tmux -V)" = "tmux 1.7"' 'set -g prefix2 C-a'

unbind C-b 
bind C-a send-keys C-a 
bind C-z send-keys C-z 

# These are available in iTerm by default, but need to be explicitly configured
# in Terminal.app.
# S-Up:    ^[[1;2A
# S-Down:  ^[[1;2B
# S-Right: ^[[1;2C
# S-Left:  ^[[1;2D
bind -n S-Up copy-mode
bind -n S-Down command-prompt
bind -n S-Right next-window
bind -n S-Left previous-window

#set -g base-index 1

set-window-option -g mode-keys vi 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-04T13:20:57.723

在下面添加`.tmux.conf`，你可以像在 vim 中使用`hjkl`, `Ctrl`+ `D`/ `Ctrl`+ `U`(PageDown/Up) 一样在 tmux 滚动模式中移动。甚至更多，您可以使用`/`搜索。

```
setw -g mode-keys vi
set -g status-keys vi
bind-key -t vi-edit Up   history-up
bind-key -t vi-edit Down history-down 
```

希望对你有帮助 ：）

# ruby-on-rails - RSpec 和 Factory 用于测试 next，prev 记录

> ID：14300685
> 
> 赞同：2
> 
> 时间：2013-01-13T04:33:55.010
> 
> 标签：ruby-on-rails, rspec, factory-bot

我有一个用户模型，其中包含下一个和上一个用户的方法：

```
def next_user
  User.where("id > ?", id).order("id ASC").first
end

def prev_user
  User.where("id < ?", id).order("id DESC").first
end 
```

我正在尝试使用 RSpec 和 Factory girl 来设置测试来测试它，但我不确定该方法 - 我只是开始使用 TDD。

我正在尝试这个：

```
describe "previous_next" do
   let(:user) { FactoryGirl.create(:user) }
   let(:next_user) { FactoryGirl.create(:user) }

   it "should know the next user" do
     expect(user.next_user).to eq next_user
   end

   it "should know the previous user" do
     expect(next_user.prev_user).to eq user
   end
end 
```

这是错误

```
1) User previous_next should know the next user
 Failure/Error: expect(user.next_user).to eq next_user

   expected: #<User id: 7624, name: "Example User", email: "sample9@email.com", created_at: "2013-01-13 04:31:19", updated_at: "2013-01-13 04:31:19", password_digest: "$2a$04$mbzI.yXYd9eSSfXbjChROewwvCHLFQI6qq5IUNzAKo9O...", remember_token: "KMSmiEeOr6f_Sgi8KJffIA", admin: false, plan_id: nil, password_reset_token: nil, password_reset_sent_at: nil, stripe_customer_token: nil>
        got: nil

   (compared using ==)
 # ./spec/models/user_spec.rb:93:in `block (3 levels) in <top (required)>'

 2) User previous_next should know the previous user
    Failure/Error: expect(next_user.prev_user).to eq user

   expected: #<User id: 7626, name: "Example User", email: "sample11@email.com", created_at: "2013-01-13 04:31:19", updated_at: "2013-01-13 04:31:19", password_digest: "$2a$04$uzrKmsXmVY7jUdRtfnfhUe89Jgy1176zE2UxdH90imJR...", remember_token: "gl10QvxjSMZYQS3JIgbREg", admin: false, plan_id: nil, password_reset_token: nil, password_reset_sent_at: nil, stripe_customer_token: nil>
        got: nil

   (compared using ==)
 # ./spec/models/user_spec.rb:97:in `block (3 levels) in <top (required)>' 
```

如果我将 next_user 记录创建为 :user Factory 的实例，为什么它会评估为零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:05:07.843

问题是`let`懒惰地评估，直到你要求它们才创建记录。

使用`let!`而不是`let`. 这会急切地评估它们并强制在测试之前创建记录。

# haxe - 不能在简单的 haxe 程序中使用 neko 类

> ID：14300692
> 
> 赞同：3
> 
> 时间：2013-01-13T04:35:06.603
> 
> 标签：haxe, neko

haxe 代码非常简单：

**主文件.hx**

```
package nekotest;

class Main {

    public static function main() {
        var name = neko.System.args()[0];
        trace("Hello " + name);
        trace("Your name is " + Std.string(name.length) + " characters longs.");
    }

} 
```

在控制台中：

```
E:\WORKSPACE\HaxeTest\src>haxe -main nekotest.Main -neko test.n
nekotest/Main.hx:6: characters 19-35 : Unknown identifier : neko 
```

haxe 和 neko 都安装好了：

```
E:\WORKSPACE\HaxeTest\src>haxe
Haxe Compiler 2.10 - (c)2005-2012 Motion-Twin
 Usage : haxe.exe -main <class> [-swf|-js|-neko|-php|-cpp|-cs|-java|-as3] <output> [options]
 Options :
  -cp <path> : add a directory to find source files
  -js <file> : compile code to JavaScript file
  -swf <file> : compile code to Flash SWF file

E:\WORKSPACE\HaxeTest\src>neko
NekoVM 1.8.2 (c)2005-2011 Motion-Twin
  Usage : neko <file> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T04:52:08.010

我使用的文件已过时，“neko.System”已被删除。我使用新的代码，可以编译：

```
static function main() {
    Sys.println("What's your name?");
    var input = Sys.stdin().readLine();
    Sys.println("Hello " + input);
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-04-13T17:12:12.427

更改后有效

```
var name = neko.System.args()[0]; 
```

到

```
var name = System.args()[0]; 
```

# php - 检查字符串是否为 MD5 哈希

> ID：14300696
> 
> 赞同：49
> 
> 时间：2013-01-13T04:35:48.453
> 
> 标签：php, hash, md5

我不小心在存储密码之前停止了哈希密码，所以现在我的数据库混合了 MD5 密码和未哈希密码。

我想遍历并散列那些不是 MD5 的。是否可以检查字符串是否为 MD5 哈希？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-01-13T04:37:19.333

您可以使用以下功能进行检查：

```
function isValidMd5($md5 ='')
{
    return preg_match('/^[a-f0-9]{32}$/', $md5);
}

echo isValidMd5('5d41402abc4b2a76b9719d911017c592'); 
```

MD5（*消息摘要算法*）哈希通常以文本格式表示为 32 位十六进制数。

该函数检查：

1.  它只包含字母和数字（af，0-9）。
2.  它有 32 个字符长。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-03-10T16:23:00.610

也许更快一点：

```
function isValidMd5($md5 ='') {
  return strlen($md5) == 32 && ctype_xdigit($md5);
} 
```

# c++ - 在 C++ 中逐字读取反斜杠字符

> ID：14300697
> 
> 赞同：1
> 
> 时间：2013-01-13T04:35:50.717
> 
> 标签：c++, backslash

在我的 c++ 代码中，我试图从字面上读取 \ 和 / 字符，但 \ 被读取为与 / 相同。

我的代码是这样的：

```
int x, y;
char orient;
cin >> N >> goalA >> goalB;
for (int i = 0; i < N; i++)
{
    cin >> x >> y >> orient;
    xVal [i] = x;
    yVal [i] = y;
    if (orient = '/')
    {
        orientVal [i] = 1;
    }
    else
    {
        orientVal [i] = 2;
    }
    cout << orientVal[i];
} 
```

但即使当 orient = '\' 时，我得到 orientVal [i] = 1 而不是 2。我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T04:40:55.783

赋值完成`=`且等于`==`

所以声明

```
if (orient = '/') 
```

应该

```
if (orient == '/') 
```

无论`orient`包含什么，第一个语句总是评估为真。因为在 C/C++ 中，非零值是 True。您的作业使声明简单地为

```
if ('/') 
```

这不过是

```
if (true) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T04:39:56.070

因为`if (orient = '/')`是一个总是作为布尔值（非零）计算为真的赋值。

你想要`if (orient == '/')`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T04:38:20.847

线

```
if(orient = '/' 
```

应该

```
if ('/' == orient) ... 
```

# windows-phone - 创建 IconicTile 时无法在隔离存储中加载图像

> ID：14300699
> 
> 赞同：1
> 
> 时间：2013-01-13T04:36:18.083
> 
> 标签：windows-phone, windows-phone-8

我正在尝试使用保存在隔离存储中的图像创建 IconicTile。

起初，我将图像保存到独立存储中。

```
// bitmap is Stream of image source (e.g. from PhotoChooserTask)
var wbmp = new WriteableBitmap(bitmap);
var file = "Shared/ShellContent/IconicTile.png";
// when file exists, delete it
if (storage.FileExists(file))
{
    storage.DeleteFile(file);
}
using (var isoFileStream = new IsolatedStorageFileStream(file, FileMode.Create, storage))
{
    // use ToolStackPNGWriterExtensions
    wbmp.WritePNG(isoFileStream);
} 
```

我已经确认 PNG 文件是使用 Isostorage Explorer Tools 成功创建的。然后我尝试创建 IconicTile。

```
var initialData = new IconicTileData
{
    BackgroundColor = SelectedColor,
    IconImage = new Uri("isostore:/Shared/ShellContent/IconicTile.png", UriKind.Absolute),             
    Title = tbTitle.Text,
    WideContent1 = tbWideContent1.Text,
    WideContent2 = tbWideContent2.Text,
    WideContent3 = tbWideContent3.Text
};
var uri = string.Format("/SecondaryPage.xaml");

var TileToFind = ShellTile.ActiveTiles.FirstOrDefault(x => x.NavigationUri.ToString().Contains(uri));
if (TileToFind == null)
    ShellTile.Create(new Uri(uri, UriKind.Relative), initialData, true);
else
    TileToFind.Update(initialData); 
```

但是创建的图块中的图像是白色的。（我想附上图片，但我的声誉太低。对不起。）

我不仅尝试了 PNG 格式，还尝试了 JPG 格式，但都不起作用。

无论如何要使用IsolatedStorage上的图像创建IconicTile？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T05:21:42.380

标志性的平铺格式需要透明背景，根据您在第一行（PhotoChooserTask）的评论，我怀疑您使用的是某种不透明的图像。

# javascript - 调用javascript函数时为空变量

> ID：14300700
> 
> 赞同：1
> 
> 时间：2013-01-13T04:36:36.353
> 
> 标签：javascript

我有一个功能如下。

我试图用

```
var testVar =  new genericYiiLocation();
console.log(testVar.getLongitude()); 
```

但是，我 this.getLongitude() 总是有一个空的 this.longitude。

我检查了 this.longitude 是否包含在 locateSuccess(loc) 中设置时所期望的值，并且看起来没问题。

任何指导将不胜感激。

```
function genericYiiLocation() {

    console.log('genericYiiLocation: Creating location handler');

    this.longitude=  '';
    this.latitude=   '';
    this.accuracy=   '';

    if (Modernizr.geolocation) {
        console.log('genericYiiLocation: Location supported');
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(locateSuccess, locateFail);
        }
        else {
            alert('genericYiiLocation: Geolocation is not supported in your current browser.');
            return false;
        }
    } else {
        alert ('genericYiiLocation: no native location support');
        return false;
    }

     function locateSuccess(loc){
        console.log('genericYiiLocation: storing location data');
        this.longitude = loc.coords.longitude;
    }

    // Unsuccessful geolocation
    function locateFail(geoPositionError) {
        switch (geoPositionError.code) {
            case 0: // UNKNOWN_ERROR
                alert('An unknown error occurred, sorry');
                break;
            case 1: // PERMISSION_DENIED
                alert('Permission to use Geolocation was denied');
                break;
            case 2: // POSITION_UNAVAILABLE
                alert('Couldn\'t find you...');
                break;
            case 3: // TIMEOUT
                alert('The Geolocation request took too long and timed out');
                break;
            default:
        }
    }

    this.getLongitude = function(){
        console.log('long: '+this.longitude);
        return this.longitude;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:45:56.637

据我了解原因是：

您的`this`回调内部与回调外部`locateSuccess`不同`this`。为了实现您的目标，您可以将回调`localSuccess`&绑定`locateFail`到`this`using `Function.prototype.bind`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T04:43:35.710

以下行：

```
 navigator.geolocation.getCurrentPosition(locateSuccess, locateFail); 
```

使您的`locateSuccess`函数在页面的*全局*范围内执行。因此，当`locateSuccess`函数尝试访问`this`时，它引用的是`window`对象而不是您的`genericYiiLocation`对象。

解决此问题的一种快速方法是将`genericYiiLocation`对象绑定到其范围内的另一个变量，然后在`locateSuccess`闭包中引用它，如下所示：

```
function genericYiiLocation() {

    console.log('genericYiiLocation: Creating location handler');

    this.longitude=  '';
    this.latitude=   '';
    this.accuracy=   '';

    //  ADDED
    var me = this;

    if (Modernizr.geolocation) {
        console.log('genericYiiLocation: Location supported');
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(locateSuccess, locateFail);
        }
        else {
            alert('genericYiiLocation: Geolocation is not supported in your current browser.');
            return false;
        }
    } else {
        alert ('genericYiiLocation: no native location support');
        return false;
    }

    function locateSuccess(loc){
        console.log('genericYiiLocation: storing location data');
        //  CHANGED
        me.longitude = loc.coords.longitude;
    }

    // Unsuccessful geolocation
    function locateFail(geoPositionError) {
        switch (geoPositionError.code) {
            case 0: // UNKNOWN_ERROR
                alert('An unknown error occurred, sorry');
                break;
            case 1: // PERMISSION_DENIED
                alert('Permission to use Geolocation was denied');
                break;
            case 2: // POSITION_UNAVAILABLE
                alert('Couldn\'t find you...');
                break;
            case 3: // TIMEOUT
                alert('The Geolocation request took too long and timed out');
                break;
            default:
        }
    }

    this.getLongitude = function(){
        console.log('long: '+this.longitude);
        return this.longitude;
    }
} 
```

# applescript - 使用 AppleScript 的 IF 语句

> ID：14300702
> 
> 赞同：0
> 
> 时间：2013-01-13T04:37:11.110
> 
> 标签：applescript

我正在尝试根据当前`"open"`应用程序的应用程序来处理不同的事件 - 屏幕最前面的那个。我设法使用变量保存了应用程序的名称。使用此代码。

```
tell application "System Events" 

    item 1 of (get name of processes whose frontmost is true)
    set openWindow to (get name of processes whose frontmost is true)
    do shell script "echo " & openWindow & " > /Users/name/temp/currentWindow.txt"

end tell 
```

然后我尝试使用此代码为每个打开的应用程序执行不同的事件

```
tell application "System Events"

  if openWindow = "AppleScript Editor" then
    display dialog "my variable: " & openWindow
  end if

end tell 
```

但是，此代码不适合做任何事情，我没有任何错误消息或任何内容，但是代码不显示对话框。如果我将对话框的代码放在代码的第一部分，它将显示打开的应用程序的名称。

关于如何使它工作的任何想法，这将非常有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:15:20.183

为了解释你的问题，这是因为这段代码......

```
set openWindow to (get name of processes whose frontmost is true) 
```

该代码返回一个项目列表。请注意，您要求提供流程（复数），因此您可以获得多个流程，因此无论是否找到一个或多个项目，applescript 都会将其作为列表提供给您。奇怪的是，在上面的行中，您确实要求列表中的“项目 1”，但由于某种原因，您对该行代码没有做任何事情。通常我会像这样写那行代码，所以我只得到第 1 项......

```
set openWindow to name of first process whose frontmost is true 
```

**无论如何，您不能将字符串“AppleScript Editor”与列表 {“AppleScript Editor”} 进行比较。它们不相等，因此您的 if 语句永远不会为真。**

显示对话框显示一个字符串。因此，当您将该代码移到 if 语句之外时，applescript 足够聪明，可以将您的列表转换为字符串以便显示。

所以底线是你得到一个列表，你必须访问列表中的项目。这些项目是字符串，所以得到一个（在你的情况下你想要项目 1）并在 if 语句中使用它。

希望你能从这个解释中学到东西。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:23:15.313

在第一个脚本中，将 openWindow 变量转换为字符串：

```
set openWindow to (get name of processes whose frontmost is true) as string 
```

# r - 从具有动态列索引的二进制矩阵中选择子集

> ID：14300704
> 
> 赞同：1
> 
> 时间：2013-01-13T04:37:22.870
> 
> 标签：r, matrix

一些问题，R 语言可能有优雅的解决方案......

给定一个包含二进制值 1 和 0 的矩阵 m，以及列索引的向量 v

1.  我将如何编写一个函数来提取 m 中由 v 中的整数索引的每个列中值为 1 的所有行？
2.  作为一项额外功能，如何将行索引与相应的行一起返回？

如果我举例说明，可能最好....

假设我要求的逻辑位于函数 selectByIndi​​ces(matrix, indexVector) 中。

所以如果我们有矩阵（或者可能是等效的数据框）：

```
 >(m= matrix(c( 1, 0, 1, 1, 1,0, 1, 1, 0, 1,1, 0, 1, 1, 0,1, 1, 1, 
   0, 1,0, 1, 0, 0, 1), 5))

         [,1] [,2] [,3] [,4] [,5]
  [1,]    1    0    1    1    0
  [2,]    0    1    0    1    1
  [3,]    1    1    1    1    0
  [4,]    1    0    1    0    0
  [5,]    1    1    0    1    1 
```

和索引向量：

```
 >c1 = c(1,3,4)
 >c2 =  c(4,5)
 >c3 =  c(1,3,5) 
```

该函数的行为如下：

```
 >selectByIndices( m, c1)

        [,1] [,2] [,3] [,4] [,5]
  [1,]    1    0    1    1    0
  [3,]    1    1    1    1    0

 >selectByIndices( m, c2)

        [,1] [,2] [,3] [,4] [,5]
  [2,]    0    1    0    1    1
  [5,]    1    1    0    1    1

 >selectByIndices( m, c3)

    #no rows (i.e. empty collection) returned 
```

希望它足够清楚，在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T04:58:51.517

```
## Create a function that extracts the qualifying rows
f <- function(m, j) {
    m[rowSums(m[, j]) == length(j),]
    # m[apply(m[, j], 1, function(X) all(X==1)),] ## This would also work
    # which(rowSums(m[, j]) == length(j))         ## & this would get row indices
}

## Try it out
f(m, c1)
#      [,1] [,2] [,3] [,4] [,5]
# [1,]    1    0    1    1    0
# [2,]    1    1    1    1    0

f(m, c2)
#      [,1] [,2] [,3] [,4] [,5]
# [1,]    0    1    0    1    1
# [2,]    1    1    0    1    1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:52:28.747

```
> selectRows <- function(mat, rown) suppressWarnings(mat[apply( mat[, rown], 1, all) , ])
> selectRows(m, c1)
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    0    1    1    0
[2,]    1    1    1    1    0

>  whichRows <-function(mat, rown) suppressWarnings( which( apply( mat[, rown], 1, all) ) )
> whichRows(m, c1)
[1] 1 3 
```

# sql - 对于 XML 多小节

> ID：14300705
> 
> 赞同：-1
> 
> 时间：2013-01-13T04:37:24.823
> 
> 标签：sql, xml, relationship

对所有大师的快速提问。

我正在尝试以 XML 格式从表中提取数据，该表具有包含多个数据的子部分。这是一个经理及其员工的列表。想像一个组织结构图。这一切都来自一个看起来像这样的表：

```
| ManagerID| EmployeeID |
|     0049 |    4433    |
|     0049 |    4430    | 
```

我需要这个：

```
<manager>
  <id>0049</id>
  <name>John Doe</name>
  <employees>
    <employee>
      <id>4433</id>
    </employee>
    <employee>
      <id>4430</id>
    </employee>
  </employees>
</manager> 
```

我试过写一些我在这里找到的简单查询。但是，由于数量可能很高，因此无法正常工作。我正在为同一个经理获取多条记录。

我只需要每个经理 1 个。什么是正确的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:23:43.130

我不喜欢分层 SQL 查询，是的，许多 SQL 数据库都支持它们，但我喜欢内存后处理，因为它非常简单直接，更重要的是，您可以轻松改进和修复您的错误数据。

这是您大致要做的事情，以下示例在 PHP 中读取相同的 Manager->Employee 关系并将整个层次结构导出为 JSON 对象。

在您的情况下，您必须将最终对象序列化为 XML 而不是 JSON。

```
// Connect to your Database 
mysql_connect("localhost", "username", "password") or die(mysql_error()); 
mysql_select_db("test") or die(mysql_error()); 

// Select accounts
$response = mysql_query("SELECT EmployeeID as id, ManagerID as parentid, name, title, description, phone, email, photo FROM accounts") or die(mysql_error()); 

// create some class for your records
class Account
{
    public $id = 0;
    public $parentid = null;
    public $name = '';
    public $title = '';
    public $desciption = '';
    public $phone = '';
    public $email = '';
    public $photo = '';

    public $children = array();

    public function load($record) {
        $this->id = intval($record['record_id']);
        $this->parentid = intval($record['parentid']);
        $this->title = $record['title'];
        $this->name = $record['name'];
        $this->description = $record['description'];
        $this->phone = $record['phone'];
        $this->email = $record['email'];
        $this->photo = $record['photo'];
    } 
}

// create hash and group all children by parentid
$children = Array();
while($record = mysql_fetch_array( $response )) 
{ 
    $account = new Account();
    $account->load($record);

    if( !isset($children[$account->parentid])) {
        $children[$account->parentid] = array();
    }
    array_push($children[$account->parentid], $account);
} 

// Create hierarchical structure starting from  $rootAccount
function recursiveLoadChildren($parent, $children) {
    if(isset($children[$parent->id])) {
        foreach($children[$parent->id] as $id => $account) {
            array_push($parent->children, $account);
            recursiveLoadChildren($account, $children);
        }
    }
}

$rootAccount = $children[0][0];
recursiveLoadChildren($rootAccount, $children);    

// serialize $rootAccount object including all its children into JSON string  
$jsonstring = json_encode($rootAccount); 
```

# c# - 在没有 string.Format() 的情况下格式化 DateTime.Now.ToUniversalTime()

> ID：14300707
> 
> 赞同：1
> 
> 时间：2013-01-13T04:37:37.753
> 
> 标签：c#, datetime, string-formatting, iso8601

`DateTime.Now.ToUniversalTime()`给我“2013/1/13 4:31:39”，但我想要“2012-01-13T04:31:39Z”，这在网站的 rss xml 节点中很常见。我将在 html5`<time>`属性中使用这种格式。

我知道它可以用 .NET 来完成`.ToString("yyyy-MM-ddTHH:mm:ssZ")`，但我在想 .NET 中是否有任何现有的 API 可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T04:43:52.330

除了“T”之外，这大部分都做了，而是放了一个空格

```
dateValue.ToString("u")   //=> 2013-01-13 04:43:05Z 
```

另请查看往返版本，即将“o”传递给[ToString](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)，唯一的问题是它提供了您似乎需要的更多精度

```
dateValue.ToString("o")       // => 2013-01-13T04:47:34.7559072Z 
```

# jsf - 即使在使用时在 jsf 中转义动态 html

> ID：14300712
> 
> 赞同：1
> 
> 时间：2013-01-13T04:38:54.410
> 
> 标签：jsf, primefaces

我正在尝试将动态 HTML 发布到 jsf 页面，并且它正在转义它，即使我在输出文本标记中说 escape="false"。

我正在使用 primefaces 3.4.2 Tomcat 7.0.22.0

JSF 页面：

```
 <p:tabView id="editableArticleTabs" dynamic="true" cache="true" rendered="#{articleBean.allowEdit}">
            <p:tab id="readArticleTab" title="Read">
                <div class="article">
                    <h1 class="title">#{articleBean.article.name}</h1>
                    <div class="byline"> by #{articleBean.article.creator.username} </div>

                    <blockquote class="summary">
                        <h2>Summary:</h2>
                        <h:outputText value="#{articleBean.article.summary}" escape="false" />
                    </blockquote>

                    <div class="textBody">
                        <p><h:outputText value="#{articleBean.article.body}" escape="false" /></p>
                    </div>
                </div>
            </p:tab>
           </p:tabView> 
```

我究竟做错了什么？它正在逃避一切。

此外，我在 getter 方法中的 System.out.printline 中打印出文本，因此我确定它没有作为转义存储在数据库中。

编辑：好的，这是踢球者。我尝试将文本从选项卡中取出，它可以工作。但我真的需要它在标签内工作。

最后编辑：这是我的错。我有两份代码，一份在选项卡中呈现，另一份没有。他们根据“可编辑性”进行条件渲染。我将逃生标志设置为一个，而不是另一个。重大失败。对不起，伙计们。

# java - 如何在 Java 中连接到 Cloud Foundry MySQL 数据库连接？

> ID：14300714
> 
> 赞同：0
> 
> 时间：2013-01-13T04:39:26.433
> 
> 标签：java, database, deployment, cloud-foundry

在 Cloud Foundry 上创建 mysql 作为服务并通过隧道连接到 mysql 数据库，这为我提供了到 mysql 数据库的连接字符串，我将该信息传递给我的应用程序。它可以在我的机器上运行，但是当我在 Cloud Foundry 服务器上部署该应用程序时，它会出现连接错误

这是我的连接代码，告诉我需要更改哪些内容才能部署到 Cloud Foundry

```
public class DB {
    private static Connection connection = null;
    public static Connection getConnection() {
        String url = "jdbc:mysql://127.0.0.1:10100/db8dad2d02e114ef6bc9d24e68367e33e";
        try {

            Class.forName("com.mysql.jdbc.Driver");
            connection = DriverManager.getConnection(url,"uC0ag3NRJCT8c","p1nyZ38zadwfa");
            System.out.println("Connect success fully");
            return connection;

        } catch (Exception e) {
            System.out.println("Error");
            System.out.println(e);
            e.printStackTrace();

        }
        return null;

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:38:18.670

jayesh 的回答在技术上是正确的，但基本上，在 Java 应用程序中（假设非 Spring）处理检索这些信息的最佳方法是使用 cloudfoundry-runtime 库：[https ://github.com/cloudfoundry/vcap- java/tree/master/cloudfoundry-runtime](https://github.com/cloudfoundry/vcap-java/tree/master/cloudfoundry-runtime) README 中有使用示例。

为了完整性，如果使用 Spring，那么事情就更容易了，你甚至不需要做任何特别的事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T04:56:40.330

问题在这里：

```
jdbc:mysql://127.0.0.1:10100 
```

在此您连接到 127.0.0.1，它是一个本地主机，尝试提供您的云服务器的实际 IP。然后它应该可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T22:15:35.497

您正在使用来自 vmc 隧道的信息来尝试连接。这不适用于云。您需要执行 jayesh 显示的操作，并改为从 Cloud Foundry 环境中读取连接凭据。埃里克的回答更加完整:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T05:39:41.333

```
 try {

        String vcap_services = System.getenv("VCAP_SERVICES");
        String hostname = "";
        String dbname = "";
        String user = "";
        String password = "";
        String port = "";
                //for cloud config
        if (vcap_services != null && vcap_services.length() > 0) {
            JsonRootNode root = new JdomParser().parse(vcap_services);

            JsonNode mysqlNode = root.getNode("mysql-5.1");
            JsonNode credentials = mysqlNode.getNode(0).getNode(
                    "credentials");

            dbname = credentials.getStringValue("name");
            hostname = credentials.getStringValue("hostname");
            user = credentials.getStringValue("user");
            password = credentials.getStringValue("password");
            port = credentials.getNumberValue("port");

            String dbUrl = "jdbc:mysql://" + hostname + ":" + port + "/"
                    + dbname;
            System.out.println(dbUrl);
            System.out.println(user + "password " + password);

            Class.forName("com.mysql.jdbc.Driver");
            connection = DriverManager.getConnection(dbUrl, user, password);
            return connection;
        } else {
//for local configuration
            Class.forName("com.mysql.jdbc.Driver");
            String url = jdbc:mysql://127.0.0.1:10100/db8dad2d02e114ef6bc9d24e68367e33e

            connection = DriverManager.getConnection(url, "user name",
                    "password");
            return connection;

        }

    } catch (Exception e) {

        e.printStackTrace();

    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T13:52:58.843

我也有同样的问题。你必须注意到“10100”是一个转发到mysql远程服务的端口。

你可以在本地使用它。在本地部署你的程序，你的数据库连接指向转发端口（101100）。

但是，当您将战争推送到 Cloud Foundry 实例时，这将不起作用 -

一种解决方案是使用基于 Spring 的云 bean。就我而言，我不想使用这种方法，所以我正在尝试另一种解决方案......

我不知道使用为远程连接创建的凭据（用户、密码、tc）是否可以在将战争推送到 Cloud Foundry 更改转发端口并使用默认 mysql 端口（3360）后建立连接

就我而言，我不想使用[Spring Cloud Beans](http://blog.springsource.org/2011/11/04/using-cloud-foundry-services-with-spring-part-2-auto-reconfiguration/)，因为生产应用程序不会部署到云存储中。

# iphone - UITextField position is different on iPhone 5 versus older iPhone (3GS/4/4S)

> ID：14300723
> 
> 赞同：2
> 
> 时间：2013-01-13T04:41:24.370
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

I have a UITextbox on the bottom of my screen (which is the table you see in the graphic below).

On the iPhone 3GS/4/4S it shows up correctly on the bottom. However, on my iphone 5, it is on the same screen where it would normally be on a regular iphone, screenshot below:

![iphone 5 retina display](../Images/e6b15df958932f4b92f69a111d625bbb.png)

Is there a way to resolve this through IB or must it be done with code?
You can see a bit of blank white space at the bottom where the last tab is cut off, it looks like its still reserving room for the input box.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T04:54:44.230

In interface builder (where you're using strings & struts and ***NOT*** auto layout), you can change what you're looking at by selecting the view controller you want to work with and then, in the Attributes Inspector for the view controller, touch this pop-up menu:

iPhone 5 screen size:

![enter image description here](../Images/6e0be910ba2eaa8f18781d601981c0ee.png)

iPhone 4 & earlier screen size:

![iPhone 4S & earlier screen sizes](../Images/2559c6d97854efcee5bdde4733ce13af.png)

You can then see the difference between the two iPhone screen sizes.

Now, to get the text field to hug (or stay aligned at the bottom), click the bottom strut for the text field. It should look something like this:

![I think this is a strut, not a spring](../Images/83ee87e105b446f831d1ac81a8d1ed53.png)

# javascript - 检查对象是否是JS中的事件

> ID：14300725
> 
> 赞同：3
> 
> 时间：2013-01-13T04:42:07.010
> 
> 标签：javascript, javascript-events

我有一个函数可以显式调用或在事件触发时调用。如果它是由事件触发的，我需要忽略可能具有有用值的函数参数。

是否有一种可靠的跨浏览器方法可以检查对象是否为事件？

我们一直在使用它，但意识到它在 IE7 中不起作用，因为`Event`它是未定义的：

```
var view = {
    save: function (data) {
        if (data.constructor === Event.constructor) {
            // It's an event.
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T04:48:31.913

我想“穷人”的方法是只检查所有`Event`对象都具有的某种方法的存在——不管它们是如何创建的：

```
if (!(typeof data.altKey == "undefined")) {
  // it's an Event
} 
```

**编辑**

由于在某些版本的 IE 中不接受 preventDefault 我已更改解决方案以使用不同的属性，实际上任何公共属性都应该可以正常工作。

# glsl - Blender GE 中的 GLSL 着色器

> ID：14300728
> 
> 赞同：3
> 
> 时间：2013-01-13T04:42:54.367
> 
> 标签：glsl, shader, game-engine, blender

我目前正在尝试在 bge（blender 游戏引擎）中实现类似 tron 的游戏模型。我相信做到这一点的唯一方法是使用 GLSL 着色器。我对学习如何使用这个强大的工具非常感兴趣。我只找到了一个教程网站，即[http://en.wikibooks.org/wiki/GLSL_Programming/Blender](http://en.wikibooks.org/wiki/GLSL_Programming/Blender)。无论我看了多少遍，我似乎都无法找到如何做我需要的 tron 外观。我想如何做到这一点是通过具有二级纹理，该纹理在材料正常渲染的地方具有黑色，在添加“光”的地方具有白色。光只是被绘制成无阴影的，带有一点绽放。

这是风格：http: [//imgur.com/a/6vOwN](http://imgur.com/a/6vOwN)

我似乎无法找到答案的问题是：

我如何获得材料之间的匹配颜色，以便我可以判断材料的那部分是白色（浅色）还是黑色（不透明）？

如何从材质中获取颜色，以便将其输出为无阴影或不透明？

如何添加绽放？

我当前的代码（什么都不做）如下所示：

（这只是为了展示blender使用的结构）

```
import bge

cont = bge.logic.getCurrentController()

VertexShader = """
   varying vec4 color;

   void main()
   {
       color = gl_MultiTexCoord0; // set the varying to this attribute

       gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
   }
"""

FragmentShader = """
   varying vec4 color;

   void main()
   {   
      gl_FragColor = color;
   }
"""

mesh = cont.owner.meshes[0]
for mat in mesh.materials:
    shader = mat.getShader()
    if shader != None:
        if not shader.isValid():
            shader.setSource(VertexShader, FragmentShader, 1) 
```

# android - 吐司多次来

> ID：14300732
> 
> 赞同：4
> 
> 时间：2013-01-13T04:43:28.210
> 
> 标签：android, toast

在我的应用程序中，单击一个按钮，我将创建一个 Toast 为 -

```
Toast.makeText(context,"Please Enter Username",Toast.LENGTH_SHORT).show(); 
```

但是当有人点击按钮 5-6 次并关闭应用程序或进入另一个屏幕时，它仍然会在另一个屏幕上继续显示 Toast 一段时间。我已经看到了许多相同的解决方案。

我努力了 -

```
toast = Toast.makeText(LoginActivity.this, message, Toast.LENGTH_SHORT);
        toast.show(); 
```

并取消了这个祝酒词-

```
onPause(){

if(toast!=null){
toast.cancel();

} 
```

同样在`onDestroy()`

我希望当有人点击按钮 5-6 次并退出应用程序或该活动时，toast 消息应该消失。或建议任何替代方案来解决相同的问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-13T04:48:25.587

> 但这给了我一种接近的力量-从未使用 Toast.makeText() 调用过 Toast；

您可以使字段变量和方法一次只显示一个 Toast：

```
Toast toast;

public void displayToast(String message) {
    if(toast != null)
        toast.cancel();
    toast = Toast.makeText(context, message, Toast.LENGTH_SHORT);
    toast.show();
} 
```

并在`onPause()`退出时取消任何现有的 Toast：

```
protected void onPause() {
    if(toast != null)
        toast.cancel();
    super.onPause();
} 
```

现在，每当您想显示 Toast 时，只需调用：

```
displayToast("Please Enter Username"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:04:20.587

尝试这个 ：

```
Toast mToast;

  @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mToast = Toast.makeText(this, "", Toast.LENGTH_SHORT);
      }

    @Override
    protected void onPause() {
        mToast.cancel();
        // TODO Auto-generated method stub
        super.onPause();
    }

    public void abc(View c) {

        mToast.cancel();
        mToast.setDuration(Toast.LENGTH_SHORT);
        mToast.setText("This is hi" + (i++));
        mToast.show();

    } 
```

而不是使用 'Toast.makeText' 使用 'mToast.setText("")' 这样您将获得所需的输出。

# sql-server - 使用 PYMSSQL 通过 VPN 从 SQL Server 检索数据

> ID：14300734
> 
> 赞同：2
> 
> 时间：2013-01-13T04:43:44.990
> 
> 标签：sql-server, connection, vpn, pymssql

所以，我正在尝试使用 pymssql 从我的 Linux 机器连接到 SQL Server 数据库。只能从我公司的专用网络内部访问该数据库。它被设置为接受 SQL Server 身份验证，并且在我的 Windows 机器上，当我登录到 VPN 时，我能够连接和查询它（Cisco Anyconnect 是安装在 Windows 机器上的客户端）。

当在工作时插入互联网的 linux 机器上运行时，python 脚本可以正常工作。我还没有在我的 Windows 机器上尝试过（因为现在，我在那台机器上没有 python）。

在我家里的 linux 机器上，我下载了 OpenConnect，它似乎可以很好地建立 VPN 连接。当我在这台机器上运行我的脚本时，在 VPN 上，我成功连接到数据库。如果我在脚本中使用的测试查询是创建表或操作数据库中的数据，那么它可以工作。但是，我无法检索任何数据，即，如果我运行选择查询，我会得到 []。

（另外，也许值得一提的是，在弄清楚如何在我的 linux 机器上安装 VPN 客户端之前，我尝试做的第一件事就是 ssh从私有网络内的 Windows 机器到我的家庭 linux 机器，同时将我的家庭 linux 机器上的端口转发到 SQL Server 机器上的 1433。然后我没有使用 pymsswl.connect() 连接到 SQL SERVER 机器，而是连接到我的本地端口。实际上，在这种情况下，我观​​察到与通过 VPN 相同的行为。在这种情况下，我无法取回数据，我并不感到特别惊讶，因为它已经超负荷了，而且我可以看到 SQL Server 不知道在哪里发送数据......虽然我真的只是在那里推测......）

我还应该提到，当我在我的 Windows 机器上的 Cisco 文件夹中单击时，有一个“安全目录”，其中包含我不太了解的各种奇怪的东西。也许这些证书/指纹在起作用。

所以，我承认这里完全是菜鸟，并希望得到任何帮助。如果我说了一些毫无意义的话，或者如果有其他可能适用的信息，我会尽力澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T12:54:40.563

您是否使用 SQL Server 身份验证登录？你是如何运行查询的？Sproc 具有隐含的权利，这意味着如果您使用无权访问它的表仍然可以工作，但执行简单的选择将拒绝访问，远射但谁知道。

这是一个链接，其中 Pinal Dave 谈到了类似的错误，并详细介绍了如何检查以确保实例已启动以及您应该尝试的许多其他故障排除步骤。[http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-服务器-microsoft-sql-server-error/](http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error/)

# google-plus - 是否可以链接 Google Drive 和 Google Plus？

> ID：14300737
> 
> 赞同：2
> 
> 时间：2013-01-13T04:44:08.110
> 
> 标签：google-plus, google-drive-api

是否有任何 API 可以链接 Google Drive 和 Google Plus - 为了简化问题，是否允许任何圈子成员在没有任何明确上传者同意的情况下查看某人在 Google Plus 中共享的文件？

此外，当个人资料（例如关于我）发生更改时，此更改是否会在其他人不输入某人个人资料的情况下显示给其他人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:06:04.517

这取决于您与谁分享更改，特别是哪些圈子。来自有关共享 Google Drive 文档的[常见问题解答：](http://support.google.com/drive/bin/answer.py?hl=en&answer=2664693)

> 选择一个圈子或输入您想与之分享信息的个人的姓名。

个人资料更改不会向用户广播（据我所知），也不会要求您分享。

# ios - 我在哪里可以从 WWDC 2011“实施 UIViewController 包含”下载“FlipNoteControllerExample”

> ID：14300738
> 
> 赞同：1
> 
> 时间：2013-01-13T04:44:27.283
> 
> 标签：ios, uiviewcontroller

我在哪里可以下载 WWDC 2011 "Implementing UIViewController Contentment" 中的 "FlipNoteControllerExample"？ 它不包括 Apple WDC 页面上的示例代码链接：

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:04:01.220

我不认为你可以。但是，还有其他很好的例子……

Apple WWDC 2012 会议上“iOS 上的视图控制器的演变”示例代码： [https ://developer.apple.com/devcenter/download.action?path=/wwdc_2012/wwdc_2012_sample_code/wwdc_2012_session_code.dmg](https://developer.apple.com/devcenter/download.action?path=/wwdc_2012/wwdc_2012_sample_code/wwdc_2012_session_code.dmg)

这里还有一个很好的例子： [https ://github.com/toolmanGitHub/stackedViewControllers](https://github.com/toolmanGitHub/stackedViewControllers)

在这里： [http ://www.merowing.info/2012/02/uiviewcontroller-containment/](http://www.merowing.info/2012/02/uiviewcontroller-containment/)

# image - 滚动时如何优化网络/移动网络上的图像加载

> ID：14300741
> 
> 赞同：1
> 
> 时间：2013-01-13T04:45:31.757
> 
> 标签：image, performance, backbone.js, load, haml

当图像加载时，我现在正在通过我的模板加载所有图像

```
 //For example, I will just pass the image url into the tempate when the page renders
  %div{class: "img_container <%= answer.image_scale %> <%=answer.show_image%>"}
    <% if (media_con.standard_resolution) { %>
    %a.fancy{href: "<%= media_con.standard_resolution %>"}
      %img{src: "<%=media_con.standard_resolution%>"} 
```

我意识到通过这样做（特别是如果我在页面上加载许多图像），它会导致效率低下，特别是在移动网络上很明显。

我如何才能仅在视图中加载图像（滚动），也许只是加载缩略图并在带有图像的视图出现时加载实际图像。

任何建议在这里表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:20:55.150

有许多库可以实现这一点。我个人使用了jQuery 的[延迟加载插件](http://www.appelsiini.net/projects/lazyload)（[演示](http://www.appelsiini.net/projects/lazyload/enabled_fadein.html)）。而不是在模板中设置`<img src>`属性，您应该设置一个名为`data-original`图像 url 的属性：

```
%img{data-original: "<%=media_con.standard_resolution%>", src="placeholder.png"} 
```

在客户端代码（可能在 中`Backbone.view.render`）您初始化库：

```
$("img[data-original]").lazyload(); 
```

# android - 如何在没有自己的服务器的情况下创建 News Android 应用程序？

> ID：14300744
> 
> 赞同：0
> 
> 时间：2013-01-13T04:45:58.043
> 
> 标签：android

我试图创建一个显示来自某个网​​站的新闻的新闻应用程序。
一些朋友帮我写了一些php，这样我就可以使用http请求调用php并从响应中获取JSON。
然后，我可以解析 JSON 并正确显示新闻。
但是，服务器不是我的。
实际上，我不想使用 php 进行服务器通信。
我想在客户端做这件事。
1）我知道如何在本地机器上使用python解析html并得到结果，有没有办法在Android中实现我的python代码，运行python代码后，它将连接到新闻网站并正确显示。
2）如果没有，我该怎么办，因为我不想托管服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:55:10.670

这是一个相当模糊的问题，但是我将回答一个特定的部分：

> 有什么方法可以在Android中实现我的python代码，并且在运行python代码之后

是的，它被称为[Scripting Layer 4 Android](http://code.google.com/p/android-scripting/)，它支持多种语言。具体来说，我发现[了 python-for-android](http://code.google.com/p/python-for-android/)，它允许您在 Android 设备上运行 python，您可以使用它来让您的应用程序从新闻网站中提取和解析 html。

# c# - GetJSON 检查空数据

> ID：14300746
> 
> 赞同：0
> 
> 时间：2013-01-13T04:47:13.063
> 
> 标签：c#, jquery, asp.net-mvc

我正在使用 MVC c# 我有一个对象

```
public class Person
{
        public int TypeId { get; set; }
        public string Code { get; set; }

} 
```

我有一个代码可以像这样为这个对象重新运行 JSON 对象

```
return Json(personCodeStore.GetPersonCodes(id).Select(x=>new {text =x.Code, value =x.TypeId}), JsonRequestBehavior.AllowGet); 
```

如何在我的 JSON 返回数据中添加一个指标，以便我可以检查空数据

```
$.getJSON('../PersonList?id=1', function (data) {
if (data==????)
{
alert("has data");
}
else
{
alert("is Empty");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:51:47.853

你能检查一下你知道 Person 对象会有的属性吗？像这样的东西：

```
if (data.Id) {
  // We got back something with an Id property... probably a Person
} else {
  // What else could we get back?!?
} 
```

# vb.net - 从 Dataset Vb.Net 中选择数据

> ID：14300747
> 
> 赞同：0
> 
> 时间：2013-01-13T04:47:21.990
> 
> 标签：vb.net, dataset

好的，首先我解释一下我做了什么。

首先，我将一个访问数据库导入到我的 vb 应用程序中，然后将其命名为数据集等。

这就是我的数据集的外观：1 表 4 列

到目前为止，我有这个：

```
Dim ds As ElementsDataSet
    Dim dt As ElementsDataSet.ElementsDataTable
    Dim conn As SqlConnection = New SqlConnection("Data Source=|DataDirectory|\Elements.accdb")
    Dim selectString As String = "Select Atomic Mass FROM Elements WHERE No =" & mol
    Dim cmd As New SqlCommand(selectString, conn)
If conn.State = ConnectionState.Closed Then conn.Open()

Dim datareader As SqlDataReader = cmd.ExecuteReader()

While datareader.Read = True

    MessageBox.Show(datareader.Item("Atomic Mass"))

End While

datareader.Close() 
```

执行此操作后，我收到此错误：

```
An unhandled exception of type 'System.Data.SqlClient.SqlException' occurred in System.Data.dll
Additional information: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:27:22.273

问题是您正在使用 a`SQLConnection`打开 Access 数据库。这行不通。

您要么需要 SQLServer 数据库，要么需要使用`OleDbConnection`Access 数据库。

这是一篇帮助您连接到 Access 数据库的 Microsoft 知识库文章： [如何使用 ASP.NET、ADO.NET 和 Visual Basic .NET 从 Access 数据库中检索和显示记录，以及](http://support.microsoft.com/kb/308278)CodeProject 上的这篇文章：[http:// /www.codeproject.com/Articles/8477/Using-ADO-NET-for-beginners](http://www.codeproject.com/Articles/8477/Using-ADO-NET-for-beginners)

```
Private Sub ReadRecords()
    Dim conn As OleDbConnection = Nothing
    Dim reader As OleDbDataReader = Nothing
    Try
        conn = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Temp\Elements.accdb"))
        conn.Open()

        Dim cmd As New OleDbCommand("Select Atomic Mass FROM Elements WHERE No =" & mol, conn)
        reader = cmd.ExecuteReader()    
        While reader.Read = True
        MessageBox.Show(reader.Item("Atomic Mass"))
        End While
    Finally

        If reader <> Nothing Then
            reader.Close()
        End If
        If conn <> Nothing Then
            conn.Close()
        End If
    End Try
End Sub 
```

# extjs - extjs：使用 xmlwriter 编写没有 root 的 xml

> ID：14300748
> 
> 赞同：0
> 
> 时间：2013-01-13T04:47:31.207
> 
> 标签：extjs, extjs4

当使用 xmlwriter 向服务器发送响应时，根标记将始终添加到请求中：

如果我想发布一个项目：

```
<book>
<id></id>
<title></title>
<publisher></publisher>
</book> 
```

实际生成的xml是：

```
<xmlData>
<book>
<id></id>
<title></title>
<publisher></publisher>
</book>
</xmlData> 
```

我可以确保只发布一条记录：每个请求一本书

如何删除 xmlData 元素？也就是让book标签成为根元素

extjs 文件说：

Ext.data.writer.Xml documentRoot：字符串

文档的根元素的名称。默认为“xmlData”。如果有**超过 1 条记录且未指定**根，则仍将使用默认文档根来确保创建有效的 XML 文档。

我的理解是，如果**只有一条记录**，则不会使用默认的文档根目录。我对吗？但是实际上，即使只有一条记录，仍然会添加根元素“xmlData”。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:26:25.873

该类`Ext.data.writer.Xml`有两个与根元素相关的配置属性：`documentRoot`和`defaultDocumentRoot`. 正如您所指出的，文档说：

> 如果有超过 1 条记录且未指定根，则仍将使用默认文档根来确保创建有效的 XML 文档。

换句话说，如果`documentRoot`为null，但写入了多条记录，`defaultDocumentRoot`则将使用的值作为根元素。在您的情况下，只有一条记录，但`documentRoot`不为空，因为它的默认值为“xmlData”。

要省略单个记录的根元素，您需要显式设置`documentRoot`为 null：

```
new Ext.data.writer.Xml({ documentRoot: null }); 
```

# javascript - 在 CSS 中更改图像？

> ID：14300753
> 
> 赞同：1
> 
> 时间：2013-01-13T04:48:18.593
> 
> 标签：javascript, html, css

我正在尝试为我的网站调整模板。我不是 CSS 大师，但我正在尝试找到一种方法来更改计时器上的图像。问题是，模板是 CSS，我不知道如何制作一个非常简单的幻灯片。我只想每 5 秒左右更改一次图像。

这是我在 html 文件中的内容：

```
<div id="mainPicture">
  <div class="picture">
    <div id="headerTitle">Header Text</div>
     <div id="headerSubtext">Header Subtext</div>
  </div>
</div> 
```

这是CSS的东西：

```
#mainPicture
{
clear:both;
width:670px;
height:345px;
background-color:#160306;
}

#mainPicture .picture
{
position:relative;
width:650px;
height:325px;
top:10px;
margin-left:10px;
background-image:url(LOGO2.jpg);
background-repeat:no-repeat;
} 
```

有什么方法可以每隔几秒钟将图像 url 更改为不同的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:28:35.627

仅使用 CSS 是不可能的。您需要利用某种 JavaScript 来完成此操作，正如您在 5 秒间隔后所说的那样。您可能想使用`setTimeout()`函数。我编写了一个脚本来使用 JavaSCript 更改页面的背景颜色。您可能想利用它来更改图像而不是背景颜色：

链接在这里：

[http://codeforbrowser.com/blog/changeing-background-color-using-javascript-and-jquery/](http://codeforbrowser.com/blog/changing-background-color-using-javascript-and-jquery/)

下面是演示：

[http://jsfiddle.net/refhat/gJWFR/1/](http://jsfiddle.net/refhat/gJWFR/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-13T04:53:01.140

如果它必须是严格的 CSS，我建议查看一些 CSS3 属性。否则我会研究 Jquery。

这是 CSS3 [http://www.w3schools.com/css3/css3_transitions.asp的链接](http://www.w3schools.com/css3/css3_transitions.asp)

# html - 如何定位在某物下方并将其固定在另一个元素下方

> ID：14300757
> 
> 赞同：0
> 
> 时间：2013-01-13T04:49:14.533
> 
> 标签：html, css, position

我想在按钮下方放置一个下拉菜单。这是我的代码，您可以看到程序下的子菜单不完全位于程序按钮下。

这是我的 HTML 代码：

```
 <!Doctype>
<html>
<head>
    <title>HelpHelp | Home</title>
    <link rel="stylesheet" type="text/css" href="main.css" />
</head>
<body>
    <div id="banner">
        <a href="index.html" title="Go Home"><img src="logo.psd" alt="" height="70px" /></a>
        <h3>Debugging HTML Since 2012</h3>
    </div>
    <div id="nav">
        <ul>
            <li>  <a href="index.html">Home</a>  </li>
            <li>  <a href="about.html">About</a>  </li>
            <li>  <a href="http://www.htmlhelp.cu.cc">Forum</a>  </li>
            <li>  <a href="#">Code</a>  </li>
            <li>  <a href="#">Programs</a>
                <ul>
                    <li><a href="#">Windows</a></li>
                    <li><a href="#">Macintosh</a></li>
                </ul>
            </li>
            <li>  <a href="#">Tutorials</a>  </li>
        </ul>    
    </div> <!-- End Nav Div -->
</body>
</html> 
```

这是我的 CSS 代码：

```
/* CSS Document */
body{
    margin:0px;
    background: -webkit-linear-gradient(#f1f0f0 0%, #dadada 100%);    
}
#banner{
    border-bottom:2px solid #000;
    background: -webkit-linear-gradient(#6e90e6 0%, #77a3f4 100%);
    height: 100px;
}
#banner img{
    position: relative;
    top:5px;
    left: -10px;
}
#banner h3{
    font-family: cursive;
    position:absolute;
    top: 0px;
    left: 250px;
    font-style: italic;
    font-weight: bold;
    font-size: 24px;
    text-shadow: 1px 1px 1px #fff;
}

#nav{
    border-bottom:1px solid #000;
    padding:0px;
    width:100%;
    background: #ff8c00;
}
#nav ul{
    list-style-type: none;
    margin:0px auto;
    text-align:center;
    padding-left:20px;
    position: relative;
}
#nav li{
    display:inline-block;
    padding:10px;
    width:100px;
    background:#ff8c00;
    border-right:1px solid #fff;
}
#nav a{
    padding:5px;
    text-align: center;
    background:#ff8c00;
    color: #000;
    text-decoration: none;
    font-family: sans-serif;
    font-size: 15px;
}
#nav a:hover{
    border-radius: 5px;
    box-shadow: -1px -1px 1px #000;
    background:#e27c0;
    padding-left:10px;
    padding-right:10px;
}
#nav ul ul{
    visibility: hidden;
    position:absolute;
    left:64%;
    top: 37px;
    padding: 0px;
    border:1px solid #000;
    border-top: 1px solid transparent; 
}
#nav ul li ul li{
    background: transparent;
    float:none;
    display:block;
    border-right:none;
    border-bottom:1px solid #fff;
}
#nav ul li:hover ul{
    visibility: visible;
    background: #ff8c00;
}
#about_title{
    width:100%;
    height:45px;
    border-bottom:1px solid #bfbfbf;
}
#about_who{
    width:250px;
    padding:10px;
    border: 1px solid#000000; 
    margin-left:15%;
    position: relative;
    top: 10px;
}
#about_what{
    width:250px;
    padding:10px;
    border: 1px solid #000000; 
    margin-left:15%;
    position: relative;
    top: 10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:39:11.440

由于 li 宽度可能会发生变化，并且 ul 必须绝对定位，因此将 ul 置于 li 下方可能会很棘手。如果 li 元素总是相同的宽度，添加这个可以让你到达那里，无论如何：

```
#nav li {position: relative;}
#nav ul li:hover ul {position: absolute; left: -3px;} 
```

[http://jsfiddle.net/yhfYt](http://jsfiddle.net/yhfYt)

# javascript - 文档就绪功能内的全局范围

> ID：14300760
> 
> 赞同：0
> 
> 时间：2013-01-13T04:49:49.823
> 
> 标签：javascript, jquery, scope

> **可能重复：**
> [如何创建全局可访问变量？](https://stackoverflow.com/questions/5601773/how-do-i-create-a-globally-accessible-variable)

如何在以下范围内制作变量和函数：

```
$(function() {  }) 
```

全球范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T05:05:32.613

你有这些选择。

1.  您可以在函数范围之前预先声明变量。
2.  您可以使用`window`前缀使它们在全局范围内。

## 选项1：

```
var myGlobal;
$(function() { 
    myGlobal = 4;
}); 
```

## 选项#2：

```
$(function() { 
    window.myGlobal = 4;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T05:24:39.930

如果您希望闭包内的代码在全球范围内可用，那么我建议您使用[JS namespaces](http://elegantcode.com/2011/01/26/basic-javascript-part-8-namespaces/)。例如：

```
var myNameSpace = myNameSpace || {} //create a namespace 
```

使用命名空间可确保您不会污染全局命名空间。然后在你的闭包中，你可以使用对象、函数和变量来扩展命名空间：

```
$(function(){
  if(myNameSpace){
    myNameSpace.function1 = function(p1){ return $(p1).val() };
    myNameSpace.function2 = function(p2){ return $(p2).val() };
  }
})(); 
```

function1 和 function2 应该通过 myNameSpace “全局”可用。

# apache - 带有 node.js 的 apache

> ID：14300761
> 
> 赞同：0
> 
> 时间：2013-01-13T04:50:05.633
> 
> 标签：apache, node.js, express, pug

我在编写玉脚本时遇到了一些问题。所以我想知道我是否可以在 apache 上托管我的网页。一旦页面打开，它将打开一个到端口 3000 的套接字，然后节点服务器将开始推送通知。

它会在浏览器中给出一些警告吗？这种方法还有其他问题吗？

所以 Apache 将在 3000 上的 80 个节点上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:38:34.163

我为了测试目的做过一次，效果很好，没有发出警告。

担心在两台服务器上拆分网站背景会给项目带来额外的复杂性。如果您最初从节点加载任何部分，则会导致加载时间更长，因为只有在 apache 的主页完成加载后，您才能建立与节点的连接。也有可能重复的代码在不同的服务器下做同样的事情。

最后我想说的是，如果其他服务器没有特殊需求，我会尽量用jade将所有东西都保留在node上，即使这需要一些学习，但以后肯定会有所回报。

如果您使用 apache 的唯一原因是为初始页面提供服务，那么我建议在这种情况下使用[nginx](http://nginx.com/)，因为它更轻量级，但我自己没有测试过。

# python - Ubuntu 上的 Python Cron 作业

> ID：14300762
> 
> 赞同：1
> 
> 时间：2013-01-13T04:50:29.383
> 
> 标签：python, ubuntu, cron

我有一个 python 程序，我想每 10 秒运行一次，就像 cron 作业一样。我不能在循环中使用睡眠，因为时间间隔会变得不确定。我现在的做法是这样的：

```
interval = 10.0
next = time.time() 

while True: 
    now = time.time() 
    if now < next: 
        time.sleep(next - now) 
        t = Thread(target=control_lights,)
        t.start()# start a thread
    next += interval 
```

它生成一个执行 contro_lights 函数的新线程。问题是随着时间的推移，python 进程的数量会增长并占用内存/CPU。有什么好的方法可以做到这一点吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:08:51.103

可以尝试在这个脚本中使用 supervisord 或 god 吗？在类 UNIX 操作系统上使用和控制许多进程非常简单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T08:35:53.193

看看一个名为[The Fat Controller](http://fat-controller.sourceforge.net/)的程序，它是一个类似于 CRON 的调度程序，但有更多选项。间隔可以从上一次运行结束（如 for 循环）或每隔 x 秒定期测量，我认为这是你想要的。在这种情况下特别有用的是，如果其中一个进程花费的时间超过 x 秒，您可以告诉胖控制器该怎么做：

*   无论如何运行一个新实例（将并行进程增加到指定的最大值）
*   等待上一个完成
*   杀死前一个并开始一个新的

文档中应该有大量关于如何设置它的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T07:17:20.267

您可以每 10 秒运行一次 cron 作业，只需将第二个参数设置为“0/10”。它将在 0、10、20 等上运行

```
#run every 10 seconds from mon-fri, between 8-17
CronTrigger(day_of_week='mon-fri', hour='8-17', second='0/10') 
```

# python - pandas 基于值而不是计数的窗口滚动计算

> ID：14300768
> 
> 赞同：24
> 
> 时间：2013-01-13T04:50:56.850
> 
> 标签：python, pandas

我正在寻找一种方法来执行类似的各种`rolling_*`功能`pandas`，但我希望滚动计算的窗口由一系列值（例如，DataFrame 的一列的值范围）定义，而不是由窗口中的行数。

例如，假设我有以下数据：

```
>>> print d
   RollBasis  ToRoll
0          1       1
1          1       4
2          1      -5
3          2       2
4          3      -4
5          5      -2
6          8       0
7         10     -13
8         12      -2
9         13      -5 
```

如果我做类似的事情`rolling_sum(d, 5)`，我会得到一个滚动总和，其中每个窗口包含 5 行。但我想要的是一个滚动总和，其中每个窗口都包含一定范围的`RollBasis`. 也就是说，我希望能够执行类似的操作`d.roll_by(sum, 'RollBasis', 5)`，并得到一个结果，其中第一个窗口包含所有`RollBasis`介于 1 和 5 之间的行，然后第二个窗口包含所有`RollBasis`介于 2 和 6 之间的行，然后是第三个窗口窗口包含所有`RollBasis`在 3 到 7 之间的行，以此类推。窗口的行数不相等，但`RollBasis`每个窗口中选择的值范围是相同的。所以输出应该是这样的：

```
>>> d.roll_by(sum, 'RollBasis', 5)
    1    -4    # sum of elements with 1 <= Rollbasis <= 5
    2    -4    # sum of elements with 2 <= Rollbasis <= 6
    3    -6    # sum of elements with 3 <= Rollbasis <= 7
    4    -2    # sum of elements with 4 <= Rollbasis <= 8
    # etc. 
```

我不能这样做`groupby`，因为`groupby`总是产生不相交的组。我不能用滚动函数来做到这一点，因为它们的窗口总是按行数滚动，而不是按值滚动。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-13T19:49:12.047

我认为这可以满足您的要求：

```
In [1]: df
Out[1]:
   RollBasis  ToRoll
0          1       1
1          1       4
2          1      -5
3          2       2
4          3      -4
5          5      -2
6          8       0
7         10     -13
8         12      -2
9         13      -5

In [2]: def f(x):
   ...:     ser = df.ToRoll[(df.RollBasis >= x) & (df.RollBasis < x+5)]
   ...:     return ser.sum() 
```

上面的函数接受一个值，在本例中为 RollBasis，然后根据该值索引数据框列 ToRoll。返回的系列由满足 RollBasis + 5 标准的 ToRoll 值组成。最后，对该系列求和并返回。

```
In [3]: df['Rolled'] = df.RollBasis.apply(f)

In [4]: df
Out[4]:
   RollBasis  ToRoll  Rolled
0          1       1      -4
1          1       4      -4
2          1      -5      -4
3          2       2      -4
4          3      -4      -6
5          5      -2      -2
6          8       0     -15
7         10     -13     -20
8         12      -2      -7
9         13      -5      -5 
```

玩具示例 DataFrame 的代码，以防其他人想尝试：

```
In [1]: from pandas import *

In [2]: import io

In [3]: text = """\
   ...:    RollBasis  ToRoll
   ...: 0          1       1
   ...: 1          1       4
   ...: 2          1      -5
   ...: 3          2       2
   ...: 4          3      -4
   ...: 5          5      -2
   ...: 6          8       0
   ...: 7         10     -13
   ...: 8         12      -2
   ...: 9         13      -5
   ...: """

In [4]: df = read_csv(io.BytesIO(text), header=0, index_col=0, sep='\s+') 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-13T20:46:14.157

根据 Zelazny7 的回答，我创建了这个更通用的解决方案：

```
def rollBy(what, basis, window, func):
    def applyToWindow(val):
        chunk = what[(val<=basis) & (basis<val+window)]
        return func(chunk)
    return basis.apply(applyToWindow)

>>> rollBy(d.ToRoll, d.RollBasis, 5, sum)
0    -4
1    -4
2    -4
3    -4
4    -6
5    -2
6   -15
7   -20
8    -7
9    -5
Name: RollBasis 
```

它仍然不理想，因为它与 相比非常慢`rolling_apply`，但也许这是不可避免的。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-01-17T15:22:13.390

基于 BrenBarns 的回答，但通过使用基于标签的索引而不是基于布尔的索引来加速：

```
def rollBy(what,basis,window,func,*args,**kwargs):
    #note that basis must be sorted in order for this to work properly     
    indexed_what = pd.Series(what.values,index=basis.values)
    def applyToWindow(val):
        # using slice_indexer rather that what.loc [val:val+window] allows
        # window limits that are not specifically in the index
        indexer = indexed_what.index.slice_indexer(val,val+window,1)
        chunk = indexed_what[indexer]
        return func(chunk,*args,**kwargs)
    rolled = basis.apply(applyToWindow)
    return rolled 
```

这比不使用索引列要快得多**：**

```
In [46]: df = pd.DataFrame({"RollBasis":np.random.uniform(0,1000000,100000), "ToRoll": np.random.uniform(0,10,100000)})

In [47]: df = df.sort("RollBasis")

In [48]: timeit("rollBy_Ian(df.ToRoll,df.RollBasis,10,sum)",setup="from __main__ import rollBy_Ian,df", number =3)
Out[48]: 67.6615059375763

In [49]: timeit("rollBy_Bren(df.ToRoll,df.RollBasis,10,sum)",setup="from __main__ import rollBy_Bren,df", number =3)
Out[49]: 515.0221037864685 
```

值得注意的是，基于索引的解决方案是 O(n)，而逻辑切片版本在平均情况下是 O(n^2)（我认为）。

我发现在从 Basis 的最小值到 Basis 的最大值的均匀间隔的窗口上执行此操作比在每个基础值上执行此操作更有用。这意味着改变功能：

```
def rollBy(what,basis,window,func,*args,**kwargs):
    #note that basis must be sorted in order for this to work properly
    windows_min = basis.min()
    windows_max = basis.max()
    window_starts = np.arange(windows_min, windows_max, window)
    window_starts = pd.Series(window_starts, index = window_starts)
    indexed_what = pd.Series(what.values,index=basis.values)
    def applyToWindow(val):
        # using slice_indexer rather that what.loc [val:val+window] allows
        # window limits that are not specifically in the index
        indexer = indexed_what.index.slice_indexer(val,val+window,1)
        chunk = indexed_what[indexer]
        return func(chunk,*args,**kwargs)
    rolled = window_starts.apply(applyToWindow)
    return rolled 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-09T13:51:33.323

为了扩展[@Ian Sudbury](https://stackoverflow.com/a/21189441/8601807)的答案，我将其扩展为可以通过将方法绑定到 DataFrame 类直接在数据帧上使用它（我希望我的代码在速度上肯定会有一些改进，因为我不知道如何访问类的所有内部）。

我还添加了面向后向窗口和居中窗口的功能。只有当您远离边缘时，它们才能完美运行。

```
import pandas as pd
import numpy as np

def roll_by(self, basis, window, func, forward=True, *args, **kwargs):
    the_indexed = pd.Index(self[basis])
    def apply_to_window(val):
        if forward == True:
            indexer = the_indexed.slice_indexer(val, val+window)
        elif forward == False:
            indexer = the_indexed.slice_indexer(val-window, val)
        elif forward == 'both':
            indexer = the_indexed.slice_indexer(val-window/2, val+window/2)
        else:
            raise RuntimeError('Invalid option for "forward". Can only be True, False, or "both".')
        chunck = self.iloc[indexer]
        return func(chunck, *args, **kwargs)
    rolled = self[basis].apply(apply_to_window)
    return rolled

pd.DataFrame.roll_by = roll_by 
```

对于其他测试，我使用了以下定义：

```
def rollBy_Ian_iloc(what,basis,window,func,*args,**kwargs):
    #note that basis must be sorted in order for this to work properly   
    indexed_what = pd.Series(what.values,index=basis.values)
    def applyToWindow(val):
        # using slice_indexer rather that what.loc [val:val+window] allows
        # window limits that are not specifically in the index
        indexer = indexed_what.index.slice_indexer(val,val+window,1)
        chunk = indexed_what.iloc[indexer]
        return func(chunk,*args,**kwargs)
    rolled = basis.apply(applyToWindow)
    return rolled

def rollBy_Ian_index(what,basis,window,func,*args,**kwargs):
    #note that basis must be sorted in order for this to work properly   
    indexed_what = pd.Series(what.values,index=basis.values)
    def applyToWindow(val):
        # using slice_indexer rather that what.loc [val:val+window] allows
        # window limits that are not specifically in the index
        indexer = indexed_what.index.slice_indexer(val,val+window,1)
        chunk = indexed_what[indexed_what.index[indexer]]
        return func(chunk,*args,**kwargs)
    rolled = basis.apply(applyToWindow)
    return rolled

def rollBy_Bren(what, basis, window, func):
    def applyToWindow(val):
        chunk = what[(val<=basis) & (basis<val+window)]
        return func(chunk)
    return basis.apply(applyToWindow) 
```

时间和测试：

```
df = pd.DataFrame({"RollBasis":np.random.uniform(0,100000,10000), "ToRoll": np.random.uniform(0,10,10000)}).sort_values("RollBasis") 
```

```
In [14]: %timeit rollBy_Ian_iloc(df.ToRoll,df.RollBasis,10,sum)
    ...: %timeit rollBy_Ian_index(df.ToRoll,df.RollBasis,10,sum)
    ...: %timeit rollBy_Bren(df.ToRoll,df.RollBasis,10,sum)
    ...: %timeit df.roll_by('RollBasis', 10, lambda x: x['ToRoll'].sum())
    ...: 
484 ms ± 28.8 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
1.58 s ± 10.2 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
3.12 s ± 22.7 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
1.48 s ± 45.8 ms per loop (mean ± std. dev. of 7 runs, 1 loop each) 
```

结论：绑定的方法不如[@Ian Sudbury的方法快，但也没有](https://stackoverflow.com/a/21189441/8601807)[@BrenBarn](https://stackoverflow.com/a/14307961/8601807)的慢，但它确实为可以调用它们的函数提供了更大的灵活性。

# python - 如何动态刷新多行输出

> ID：14300770
> 
> 赞同：10
> 
> 时间：2013-01-13T04:51:13.777
> 
> 标签：python

我想动态刷新一些信息（就像进度条一样），我可以用下面的代码来做

```
#! /usr/bin/env python
import sys
import time

print "start the output"
def loop():
    i = 0

    while 1:
        i += 1
        output = "\rFirst_line%s..." % str(i) 
        sys.stdout.write(output)        
        sys.stdout.flush()
        time.sleep(1)
loop() 
```

它只能动态输出单行信息，当在输出中添加'\n'时，它不能按预期工作。

```
output = "\rFirst_line%s...\n" % str(i) 
```

有什么办法可以帮助它刷新多行内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-11-10T15:40:39.137

我也遇到过这种情况，终于有办法解决了;D

[reprint- Python 2/3 的一个简单模块，用于在终端中打印和刷新多行输出内容](https://github.com/Yinzo/reprint)

您可以简单地将该`output`实例视为普通`dict`或`list`（取决于您使用的模式）。当您在实例中修改该内容时`output`，终端中的输出将自动刷新：D

这是一个例子：

```
from reprint import output
import time
import random

print "start the output"

with output(initial_len=3, interval=0) as output_lines:
    while True:
        output_lines[0] = "First_line  {}...".format(random.randint(1,10))
        output_lines[1] = "Second_line {}...".format(random.randint(1,10))
        output_lines[2] = "Third_line  {}...".format(random.randint(1,10))
        time.sleep(0.5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T08:24:07.810

You could do it with [curses](http://docs.python.org/2/library/curses.html), but it's nontrivial.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T08:17:58.280

没有办法独立于系统（当说“系统”时，我指的不仅仅是操作系统，还包括终端应用程序及其设置），因为没有标准的转义序列可以向上移动光标。至于与系统相关的方式，它们可能存在于您的配置中，但需要有关您的系统的更多信息。无论如何，使用这些功能通常不是一个好主意。

PS 希望您不要将程序的输出重定向到文件。如果重定向到一个文件，这样的进度指示器会产生可怕的输出。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-13T04:55:34.997

将 '\b' 写入控制台：

```
import sys
import time

print "start the output"
def loop():
    i = 0
    output = "\rFirst_line%s..." % str(0) 
    sys.stdout.write(output)
    while 1:
        sys.stdout.write('\b'*len(output))
        i += 1
        output = "\rFirst_line%s..." % str(i) 
        sys.stdout.write(output)        
        sys.stdout.flush()
        time.sleep(1)
loop() 
```

# ios - 使用 AFNetworking SetImageWithURL 显示 UIActivityIndi cator

> ID：14300771
> 
> 赞同：13
> 
> 时间：2013-01-13T04:51:15.013
> 
> 标签：ios, objective-c, afnetworking

我正在使用 AFNetworking 库来设置带有 URL 内容的图像。在以下示例中，topLeftImage 是 UIImageView 的一个实例。

```
[topLeftImage setImageWithURL:[NSURL URLWithString:imageURL]]; 
```

我想做的是在图像下载时显示 UIActivityIndi​​catorView 。但是我不知道在哪里触发活动指示器的启动和停止。以下是我的活动指示器代码。

```
UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
[topLeftImage addSubview:activityIndicator];
[activityIndicator startAnimating]; 
```

如何将上述代码链接到 setImageWithURL 方法，以便仅在图像下载时显示活动指示器？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-04T18:55:24.473

UIImageView+AFNetworking.h 类别提供了一个 setImageWithURL 方法，允许您使用成功和失败块。一旦请求成功或失败完成，此块将被执行。因此，您可以在请求之前启动动画，并将停止放在成功和失败块中。这是一个示例代码：

```
NSURL *imageURL = [NSURL URLWithString:@"http://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg/402px-Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg"];
NSURLRequest *imageRequest = [NSURLRequest requestWithURL:imageURL];
[_activityIndicator setHidden:NO];
[_activityIndicator startAnimating];
[_imageView setImageWithURLRequest:imageRequest
                  placeholderImage:nil
                           success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image)
 {
     [_activityIndicator setHidden:YES];
     [_activityIndicator stopAnimating];
     _imageView.image = image;
 }
                           failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error)
 {
     [_activityIndicator setHidden:YES];
     [_activityIndicator stopAnimating];
 }]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-14T07:45:28.653

在 Swift 中很`extension`简单：`UIImageView`

```
extension UIImageView {

    func setImageWithString(string: String?) {

        if let string = string, let url = NSURL(string: string) {

            let activityIndicatorView = UIActivityIndicatorView(frame: CGRectMake(0, 0, CGRectGetWidth(frame), CGRectGetHeight(frame)))
            activityIndicatorView.hidden = false
            activityIndicatorView.color = UIColor.lightGrayColor()

            addSubview(activityIndicatorView)
            bringSubviewToFront(activityIndicatorView)

            activityIndicatorView.startAnimating()

            setImageWithURLRequest(NSURLRequest(URL: url), placeholderImage: nil, success: { request, response, image in

                self.image = image
                activityIndicatorView.hidden = true
                activityIndicatorView.stopAnimating()
                activityIndicatorView.removeFromSuperview()

                }, failure: { request, response, error in

                    activityIndicatorView.hidden = true
                    activityIndicatorView.stopAnimating()
                    activityIndicatorView.removeFromSuperview()
            })
        }
    }
} 
```

# slf4j - logback 不创建文件

> ID：14300772
> 
> 赞同：0
> 
> 时间：2013-01-13T04:51:18.477
> 
> 标签：slf4j, logback

不知道我在这里做错了什么，但我的日志记录似乎已关闭。我在用

slf1.7.2 回退 1.0.9

这是我的配置文件：

```
<configuration debug="true">
    <contextName>myProduct</contextName>
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>%msg%n</pattern>
        </encoder>
    </appender>
    <appender name="ROLLINGFILE"
        class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>../logs/myproduct.log</file>
        <append>true</append>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>../logs/myproduct-%d{yyyy-DD}.%i.zip
            </fileNamePattern>
            <maxHistory>10</maxHistory>
            <timeBasedFileNamingAndTriggeringPolicy
                class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>

            </timeBasedFileNamingAndTriggeringPolicy>
        </rollingPolicy>
        <encoder>
            <pattern>%date{HH:mm:ss.SSS} %-5level %logger{40} [%file:%line] -
                %msg%n</pattern>
        </encoder>
    </appender>
    <root>
        <appender-ref ref="ROLLINGFILE" />
    </root>
    <logger name="org.hibernate" level="error">
        <appender-ref ref="ROLLINGFILE" />
    </logger>
    <logger name="org.springframework" level="error">
        <appender-ref ref="ROLLINGFILE" />
    </logger>
    <logger name="com.edelweissco" level="error">
        <appender-ref ref="ROLLINGFILE" />
        <appender-ref ref="STDOUT" />
    </logger>
</configuration> 
```

但是当我部署我的应用程序时，即使我将 spring 和 hibernate 设置为 ERROR，日志记录也在控制台中，控制台中充满了他们的日志记录语句。我的日志文件没有在任何位置的文件系统上创建，但我没有收到错误消息。

这是我启动时的控制台输出：

```
21:28:34,276 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
21:28:34,276 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback-test.xml] at [file:/Library/Tomcat/apache-tomcat-7.0.27/webapps/myapplication/WEB-INF/classes/logback-test.xml]
21:28:34,340 |-INFO in ch.qos.logback.classic.joran.action.ContextNameAction - Setting logger context name as [myProduct]
21:28:34,341 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
21:28:34,346 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
21:28:34,406 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
21:28:34,412 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ROLLINGFILE]
21:28:34,450 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use zip compression
21:28:34,454 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern ../logs/myproduct-%d{yyyy-DD}.%i for the active file
21:28:34,460 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@38a3c5b6 - The date pattern is 'yyyy-DD' from file name pattern '../logs/myproduct-%d{yyyy-DD}.%i.zip'.
21:28:34,460 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@38a3c5b6 - Roll-over at midnight.
21:28:34,460 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@38a3c5b6 - Setting initial period to Thu Jan 10 20:42:21 MST 2013
21:28:34,464 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
21:28:34,469 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[ROLLINGFILE] - Active log file name: ../logs/myproduct.log
21:28:34,469 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[ROLLINGFILE] - File property is set to [../logs/myproduct.log]
21:28:34,471 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [ROLLINGFILE] to Logger[ROOT]
21:28:34,473 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.hibernate] to ERROR
21:28:34,474 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [ROLLINGFILE] to Logger[org.hibernate]
21:28:34,474 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.springframework] to ERROR
21:28:34,474 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [ROLLINGFILE] to Logger[org.springframework]
21:28:34,474 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [com.edelweissco] to ERROR
21:28:34,474 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [ROLLINGFILE] to Logger[com.edelweissco]
21:28:34,474 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[com.edelweissco]
21:28:34,475 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
21:28:34,477 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@6f92c766 - Registering current configuration as safe fallback point
Jan 12, 2013 9:28:34 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext 
```

输出中没有错误，但日志记录似乎不像使用配置文件那样正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T18:26:05.370

如果您使用的是 jboss5.1 并且遇到同样的问题，请在 jboss-web.xml 中添加以下内容。

```
<class-loading>
    <loader-repository>
        com.hp:classloader=logback-slf4j
        <loader-repository-config>java2ParentDelegation=false</loader-repository-config>
    </loader-repository>
</class-loading> 
```

这应该可以解决您的问题。

# wpf - 模板化业务对象集合以在 DataGrid 中使用

> ID：14300774
> 
> 赞同：0
> 
> 时间：2013-01-13T04:51:38.043
> 
> 标签：wpf, xaml, templates, styles

假设以下两个虚构类：

```
public class Person
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public decimal Salary { get; set; }
    public string SSN { get; set; }
}

public class People: ObservableCollection<Person> {} 
```

假设我想在 DataGrid 中显示 People 对象的实例，并考虑以下注意事项：

*   ID 应该是只读的
*   工资应格式化为货币
*   不应显示 SSN

我知道如何用样式和模板做一些非常简单的事情，但我似乎找不到任何关于使用它们来指示 DataGrid 应该如何显示数据的好信息。如何执行上述操作的示例会很棒，并且任何指向此主题的良好资源的链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:05:56.667

我认为您正在 System.ComponentModel.DataAnnotations 命名空间中寻找 DisplayAttribute。您可以指定是否显示字段、列标题、列顺序等。您可以在每个字段中使用许多注释。

在您的示例中，您需要以下内容：

```
using System.ComponentModel.DataAnnotations

public class Person
{
    [Editable(false)]
    [Display(Name = "Person ID", Order = 0)]
    public int Id { get; set; }

    [MaxLength(30, ErrorMessage = "too long!")]
    [Display(Name = "First Name", Order = 10)]
    public string FirstName { get; set; }

    [Display(Name = "Last Name", Order = 20)]
    public string LastName { get; set; }

    [DisplayFormat(DataFormatString="C")]
    [Display(Name = "$/year", Order = 30)]
    public decimal Salary { get; set; }

    [Display(AutoGenerateField=false)]
    public string SSN { get; set; }
} 
```

每当您自动生成字段时，都会使用此信息。您甚至可以创建字段组以将它们分组到选项卡等中。

希望这是您正在寻找的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:28:00.343

是的，您可以手动设置`AutoGenerateColumns`并`False`指定要显示的列，并可以根据您的需要对其进行自定义，如下所示 -

```
 <DataGrid ItemsSource="{Binding People}"
              AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Id}" IsReadOnly="True"/>
            <DataGridTextColumn Binding="{Binding FirstName}"/>
            <DataGridTextColumn Binding="{Binding LastName}"/>
            <DataGridTextColumn Binding="{Binding Salary, StringFormat=C}"/>
        </DataGrid.Columns>
    </DataGrid> 
```

# php - AngularJS范围变量不更新

> ID：14300775
> 
> 赞同：0
> 
> 时间：2013-01-13T04:51:43.770
> 
> 标签：php, javascript, angularjs

这里奇怪的错误。我有这个表格：

```
<form name="newaccount" id="newaccount" ng-submit="doSubmit()">
<label>username</label>
<input name="username" type="text" required ng-model="username">
<span ui-toggle="username.length > 15">Too long!</span>
<label>name</label>
<input name="name" type="text" required ng-model="name">
<label>e-mail</label>
<input name="email" type="email" required ng-model="email" ui-validate>
<label>password</label>
<input name="password" type="password" required ng-model="password" ui-validate>
<div style="text-align: center;"><br>
<input type="submit"></div>
</form> 
```

而这个控制器：

```
$scope.username = "f";
$scope.password = "f";
$scope.email = "f";
$scope.name = "f";
$scope.doSubmit = function(){
    //Transition to progress view
    $scope.showLoginForm = false;
    $scope.showCreateForm = false;
    $scope.showLoading = true;
    $scope.resultSuccess = false;
    $scope.showResult = false;
    $scope.loadingMessage = "Creating account...";
    $scope.resultReason = "Success!";

    //Send POST
    $http({
        method: 'POST',
        url: "php/createaccount.php",
        data: {
            "username": $scope.username,
            "password": $scope.password,
            "name": $scope.name,
            "email": $scope.email
        }}
    ).success(function (data, status, headers, config) {
            $scope.showLoading = false;
            $scope.showResult = true;
            $scope.resultSuccess = data === "success";
            if($scope.resultSuccess){
                $scope.resultReason = "Account created successfully!";
            }else{
                $scope.resultReason = data;
            }

        }).error(function (data, status, headers, config) {
            $scope.showLoading = false;
            $scope.showResult = true;
            $scope.resultSuccess = false;
            $scope.resultReason = data;
        });
}; 
```

正如预期的那样，“f”出现在每个字段中。但是，如果您更改这些字段然后提交表单，服务器会响应（在发布数据上使用 print_r()）显示后端收到的 JSON 总是包含“f”作为每个字段的值，不是改变的值。

示例：使用用户名“test”等。

```
{"username":"f","password":"f","name":"f","email":"f"} 
```

因此，当我输入表单时，$scope 中的值由于某种原因没有得到更新。是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:50:02.477

不要在 $http 调用中分配单独的 $scope 属性，而是在您的范围上使用“大对象”：$scope.person = { username: 'f', ...}。然后你可以发布那个对象。

事实证明，其中的具体问题是 Angular 不会将值写入范围变量，除非它们验证，在这种情况下，电子邮件没有正确验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:38:26.587

范围是否使用“ng-app”和“ng-controller”明确定义？

我在您的 html 中找不到这两个指令。也许您没有将其作为问题的一部分。

我期望的示例结构：http: [//angularjs.org/#todo-html](http://angularjs.org/#todo-html)

# css - 拆分背景颜色

> ID：14300780
> 
> 赞同：0
> 
> 时间：2013-01-13T04:52:11.530
> 
> 标签：css

我正在尝试拆分 a 的背景颜色`div`- 我希望左侧为白色，右侧为黑色。我尝试使用其中`div`嵌套了两个 div 的包装器，但黑色 div 并没有像我需要的那样 100% 填充包装器 div。

这是小提琴：

[http://jsfiddle.net/nP8Qq/2/](http://jsfiddle.net/nP8Qq/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T05:19:49.897

像这样的东西？

[http://jsfiddle.net/nP8Qq/10/](http://jsfiddle.net/nP8Qq/10/)

我为 div 添加了颜色，以便您可以看到它们的位置。我为背景 div 着色，所以如果黑色 div 不够高，您将无法分辨。

我添加了缺少的结束标签`<p>Content</p>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T05:30:49.233

好的，我不回答为什么您的代码不起作用（Steve Wellens 的解决方案是完美的）。我建议使用一种*可能*更优雅的解决方案来处理多种颜色背景：**Linear Gradient with Color-stop**。

您可以`div`在`color-stop`. 使用`color-stop`，您可以指定您希望新颜色沿渐变线的哪个位置开始，使用`percentage`。指定 50% 将使您的新颜色恰好在线性渐变的一半处开始。

你可以玩弄百分比，直到你得到你想要的效果。

查看以下内容，他们已经通过渐变实现了您想要做的事情：

[线性渐变/色标](http://www.sitepoint.com/examples/css3/gradient.html)

[线性渐变参考](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient)

[CSS技巧 - 颜色停止](http://css-tricks.com/examples/CSS3Gradient/)

检查它是否对您有用。

# hibernate - JPA - 设置为 NULL 时删除外键

> ID：14300790
> 
> 赞同：2
> 
> 时间：2013-01-13T04:53:54.977
> 
> 标签：hibernate, jpa, null, foreign-keys, cascade

假设在表“Foo”中，我有一个外键“barId”到某个表“Bar”。我想要做的是通过设置 barId=null 来更新 'Foo' 中的现有条目，并自动删除以前关联的 Bar 条目。

在 JPA 中，是否可以通过注释自动声明和完成这一点？

还是我必须单独调用`barRepository.delete(...)`来删除旧的 Bar 对象？（同时保存更新的 Foo 对象）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:05:34.160

我相信这是由 JPA 的“孤儿删除”处理的：http: [//docs.oracle.com/cd/E19798-01/821-1841/giqxy/index.html](http://docs.oracle.com/cd/E19798-01/821-1841/giqxy/index.html)

# linux - 如何使用 Bash 从 Internet 将文件下载到我的 linux 服务器

> ID：14300794
> 
> 赞同：89
> 
> 时间：2013-01-13T04:54:45.147
> 
> 标签：linux, centos

我最近不得不升级到 VPS 服务器（HostGator Linux），因为我想运行一个比常规 PHP 数据库操作更复杂的脚本。我正在尝试安装 JDK 和 Apache Ant（如果重要，用于在服务器上编译 Android 应用程序）。

我观看了有关 Linux Bash 的教程并开始使用它。我目前正在尝试将 Java（使用 JDK 和 JRE）安装到服务器上。

我正在关注此页面上的教程： [http ://www.oracle.com/technetwork/java/javase/install-linux-64-self-extracting-142068.html](http://www.oracle.com/technetwork/java/javase/install-linux-64-self-extracting-142068.html)

但是，我不知道在这一行该怎么做：

1.  下载并检查下载文件大小。

    您可以下载到任何可以写入的目录。

如何从命令行下载 Java？

如果重要的话，我正在运行 CentOS v5.8

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-01-13T05:01:07.483

使用 wget

```
wget -O /tmp/myfile 'http://www.google.com/logo.jpg' 
```

或卷曲：

```
curl -o /tmp/myfile 'http://www.google.com/logo.jpg' 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-13T04:58:10.690

您可以使用该命令从命令行[`wget`](http://www.gnu.org/software/wget/)下载。具体来说，您可以使用

```
wget http://download.oracle.com/otn-pub/java/jdk/7u10-b18/jdk-7u10-linux-x64.tar.gz 
```

但是，由于 Oracle 要求您接受许可协议，因此这可能不起作用（我目前无法对其进行测试）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T04:59:53.250

我想你可以使用[`curl`](http://de.wikipedia.org/wiki/CURL)and [`wget`](http://de.wikipedia.org/wiki/Wget)，但是由于 Oracle 要求你检查一些复选标记，所以用提到的工具来模拟这将是痛苦的。您必须下载带有许可协议的页面，并通过查看它找出需要什么请求才能进行实际下载。

当然，您可以简单地启动浏览器，但这可能不符合“从命令行”的条件。因此，您可能想研究[`lynx`](http://de.wikipedia.org/wiki/Lynx_%28Browser%29)一个基于文本的浏览器。

# java - Java ImageIO - 特定路径的相同图像

> ID：14300797
> 
> 赞同：-1
> 
> 时间：2013-01-13T04:55:09.503
> 
> 标签：java, screenshot, javax.imageio

我实现了屏幕截图功能，目前它只是保存到项目文件中，但如果它保存到特定文件或位置（例如桌面）会很好。

目前：

```
try {
   imageId = random.nextInt(9999);
   ImageIO.write(MainGame.image, "png" , new File("Sinecure_" + imageId + ".png/"));
   System.out.println("Image Saved as Sinecure_" + imageId);
} catch (IOException e) {
   e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T04:59:10.230

您可以使用以下代码片段找到用户的主目录：

```
String userHome = System.getProperty( "user.home" ); 
```

那么你可以（取决于操作系统）像这样构造文件路径：

```
String fullPath = userHome+File.seperator+"Desktop"+File.seperator+"Sinecure_" + imageId + ".png";
ImageIO.write(MainGame.image, "png" , new File(fullPath)); 
```

以上是针对windows 7的。当然，您需要针对其他操作系统进行调整。检测您正在运行的操作系统的最简单方法是另一个系统属性：

```
String OS = System.getProperty("os.name") 
```

# extjs4 - IE 8 不适用于 grails+extjs4

> ID：14300799
> 
> 赞同：4
> 
> 时间：2013-01-13T04:55:17.657
> 
> 标签：extjs4

我的应用程序在 Forefox 中非常好。但它在 IE 8 中不起作用。

错误 - - -

```
Webpage error details 
```

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；InfoPath。 2；平板电脑 2.0) 时间戳：2013 年 1 月 13 日星期日 04:52:47 UTC

消息：'isModel' 为空或不是对象行：21 字符：452607 代码：0 URI：...://localhost:8088/rdptpl/static/js/ext/ext-all.js

我不知道我的问题在哪里。请帮忙.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T11:45:06.020

这可能是因为 IE 中的 HTML5 功能。[这](http://html5test.com/)是在浏览器中测试 html5 功能的网页。您能否简要介绍一下您的 ExtJS 应用程序中使用的 HTML5 功能。

在 ExtJS 中实现了一些 HTML5 功能，如可关闭选项卡、WebSQL、本地存储等。ExtJS 为浏览器提供了替代代码来实现其中一些 HTML5 功能。本地存储和 WebSQL 无法在 Internet Explorer 中实现。

让我知道

# xmpp - 当 Corp 阻止此功能时，如何保存 Lync 对话历史记录？

> ID：14300803
> 
> 赞同：22
> 
> 时间：2013-01-13T04:55:41.123
> 
> 标签：xmpp, lync, office365, lync-2010

我正在使用 Lync 2010 (4.0.7577.4356)，我们在我的小型开发团队中使用它来进行即时通讯。通过这个程序处理了许多技术问答，还有许多其他需要记录的项目。不幸的是，我们的母公司有一项关闭“对话历史记录”的政策，所以一旦关闭窗口，它就消失了。

我进行了相当多的研究，但我还没有找到保存这些数据的方法，因为这些设置是在我们的母公司级别进行的（通过 Active Directory 或其他方式）。这是我们需要的信息，甚至我的老板也试图找到一种方法来保存这些信息（除了在关闭窗口或计算机之前复制粘贴所有内容之外的所有内容）。

我怎样才能完成这项任务？是否有任何程序（免费软件或其他）可以保存这些对话？有谁知道我可以将 Lync（即时消息模块）连接到另一个即时消息程序（GTalk、Jabber、ICQ、Yahoo 或其他）的方法——然后从那里记录每条消息？我是一名软件开发人员，所以如果有人知道与 Lync 通信的方法，并且能够访问这些消息，那也会有所帮助！

在这一点上的任何事情都会有所帮助......提前谢谢！

-帕努文

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-08-05T15:16:46.123

Try this [https://github.com/bujocek/LyncIMLocalHistory](https://github.com/bujocek/LyncIMLocalHistory). I've used the Tom Morgans answer and created own local lync (Skype for Business) conversation history tracker. You can build it from source or just unpack and run latest release here: [https://github.com/bujocek/LyncIMLocalHistory/releases](https://github.com/bujocek/LyncIMLocalHistory/releases)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-14T14:16:08.867

有一个[客户端 Lync SDK](http://www.microsoft.com/en-us/download/details.aspx?id=18898)，如果您已经是 .NET 开发人员，它非常容易使用。

做这样的事情并让它与 Lync 一起在您的小型开发团队机器的每个成员上运行更容易 - 比尝试重新发明一个中央对话存储更容易。

我[最近写了一篇](http://thoughtstuff.co.uk/2013/01/tracking-lync-conversations-in-code/)关于记录对话的长度和状态的博客，以及关于在对话中识别不同类型的呼叫（您正在寻找即时消息呼叫类型）。

之后，您需要订阅 Flow 并捕获来回的每条消息，并将它们记录到数据库或其他任何地方。有一本非常好的书可以帮助您：[使用 Microsoft Lync 进行统一通信](http://www.amazon.co.uk/gp/product/0470939036/ref=as_li_ss_tl?ie=UTF8&camp=1634&creative=19450&creativeASIN=0470939036&linkCode=as2&tag=thostultd-21)。如果您认真对待 Lync 开发，那么这本书绝对适合您！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-12-09T20:31:28.907

在 Lync 2013 中，`CTRL`+`S`会将当前选项卡保存到您的 Outlook/Exchange 对话历史文件夹中。我不确定这是否适用于 2010 年。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T09:34:00.403

You may try this: [https://github.com/PhilippeRaemy/LyncLog](https://github.com/PhilippeRaemy/LyncLog). This tool saves the conversations in text files, using a file naming convention that makes it easy to identify the time and participants.

# php - PHP JSON 解析，缺少项目

> ID：14300804
> 
> 赞同：3
> 
> 时间：2013-01-13T04:55:58.480
> 
> 标签：php, json

当我在浏览器中输入一个 URL 时，我得到了输出（如下）

```
{"categories":[{"id":"16","name":"Arm Locks"},{"id":"555","name":"Articles"},{"id":"19","name":"Back Control"},{"id":"21","name":"Brazilian Jiu Jitsu"},{"id":"12","name":"Chokes"},{"id":"15","name":"Crank"},{"id":"14","name":"Escapes"},{"id":"554","name":"Grappling Videos"},{"id":"10","name":"Guard and Rubber Guard"},{"id":"13","name":"Guard Breaks"},{"id":"23","name":"Half Guard"},{"id":"26","name":"Japanese Jujutsu"},{"id":"1","name":"Jiu Jitsu Training"},{"id":"5","name":"Jiu Jitsu Videos"},{"id":"25","name":"Leg Locks"},{"id":"27","name":"MMA"},{"id":"17","name":"Mount"},{"id":"30","name":"North South Position"},{"id":"556","name":"Platinum Members Only"},{"id":"29","name":"Self Defense"},{"id":"18","name":"Side Control"},{"id":"28","name":"Strikes"},{"id":"11","name":"Sweeps"},{"id":"20","name":"Theory & Discussions"},{"id":"9","name":"Throws"},{"id":"31","name":"Wrestling"},{"id":"22","name":"Wrist Locks"}]} 
```

但是当我尝试使用 PHP 解析时（PHP 代码和输出）

**PHP 代码**

```
<?php
$url = "https://domain.com/apis/cats.php?type=json";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$json = curl_exec($ch);
$dcjsn = json_decode($json);

foreach ($dcjsn->categories as $cat){
    echo $cat->id;
    echo "<br>";
} 
```

**输出是：**

```
555
15
14
554
13
23
26
25
27
17
30
29
18
28
20
9
22 
```

意味着大约有 10 件物品丢失！

我未能识别代码中的错误。我也尝试过 file_get_contents() 但没有运气。

**添加：**

**var_dump($json)**的结果

 **```
string(574) "{"categories":[{"id":"555","name":"Articles"},{"id":"15","name":"Crank"},{"id":"14","name":"Escapes"},{"id":"554","name":"Grappling Videos"},{"id":"13","name":"Guard Breaks"},{"id":"23","name":"Half Guard"},{"id":"26","name":"Japanese Jujutsu"},{"id":"25","name":"Leg Locks"},{"id":"27","name":"MMA"},{"id":"17","name":"Mount"},{"id":"30","name":"North South Position"},{"id":"29","name":"Self Defense"},{"id":"18","name":"Side Control"},{"id":"28","name":"Strikes"},{"id":"20","name":"Theory & Discussions"},{"id":"9","name":"Throws"},{"id":"22","name":"Wrist Locks"}]}" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T05:16:43.947

您请求的 API 似乎需要身份验证，而您在浏览器中时并未从 PHP 代码登录。**

# c - BENCH_INNER : lmbench3.0 src代码宏查询

> ID：14300807
> 
> 赞同：3
> 
> 时间：2013-01-13T04:56:10.510
> 
> 标签：c, linux, unix, microbenchmark

我正在阅读[MHZ -](http://www.bitmover.com/lmbench/mhz-usenix.pdf) lmbench 的创建者的 Benchmark 论文剖析，并在旁边浏览代码。

1.  论文可以在@MHz 下载[：Microbenchmark 的剖析](http://www.bitmover.com/lmbench/mhz-usenix.pdf)
2.  源代码[lmbench-3.0](http://nchc.dl.sourceforge.net/project/lmbench/development/lmbench-3.0-a9/lmbench-3.0-a9.tgz)由 Carl Staelin 和 Larry McVoy 编写

在 BENCH_INNER() 宏里面我有一个疑问：

```
#define BENCH_INNER(loop_body, enough) {                \
    static iter_t   __iterations = 1;               \
    int     __enough = get_enough(enough);          \
    iter_t      __n;                        \
    double      __result = 0.;                  \
                                    \
    while(__result < 0.95 * __enough) {             \
        start(0);                       \
        for (__n = __iterations; __n > 0; __n--) {      \
            loop_body;                  \
        }                           \
        __result = stop(0,0);                   \
        if (__result < 0.99 * __enough              \
            || __result > 1.2 * __enough) {         \
            if (__result > 150.) {              \
                double  tmp = __iterations / __result;  \
                tmp *= 1.1 * __enough;          \
                __iterations = (iter_t)(tmp + 1);   \
            } else {                    \
                if (__iterations > (iter_t)1<<27) { \
                    __result = 0.;          \
                    break;              \
                }                   \
                __iterations <<= 3;         \
            }                       \
        }                           \
    } /* while */                           \
    save_n((uint64)__iterations); settime((uint64)__result);    \
} 
```

1.  据我了解， BENCH_INNER 用于自动计算所选时间间隔（“足够”）的最佳迭代次数。循环一直执行，直到我们不断迭代一段代码“loop_body”，这将占用我们选择的时间间隔的至少 95%，范围从 5 毫秒到 1 秒。

2.  为简单起见，让我们将“足够”设为 10000 微秒

3.  我们从 __iterations = 1 开始
4.  假设随着时间的推移，我们达到了 __result > 1.2 * '足够' 的阶段，即 __result > 12000 微秒
5.  现在由于 __result > 150 微秒，我们继续并缩放 __iterations 的值，以便 __result 大约等于 1.1 * '足够'
6.  但在我们重新计算 __result 之前，我们将打破循环，因为之前的 __result > .95 * '足够了'
7.  我们继续保存 __result 的值和修改后的 __iterations 值（这里 __result 的值不是我们保存的 __iterations 的值）

这种情况下的代码不应该重新计算 __result 吗？我错过了一些基本的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T07:50:01.940

是的，这里有一个问题，__result 必须设置为零。

而且我可以在您的代码中看到另一个可能的问题——结果是`0.99*enough`在一种情况下与`0.95*enough`在另一种情况下进行比较，这很可能是一个错字。我建议您重写此宏，明确说明“满足”条件并简化逻辑，首先检查良好条件。像这样：

```
#define SEARCH_EXIT_CASE(__result, __enough) ((__result) > 0.95 * (__enough) && (__result) < 1.2 * (__enough))

#define BENCH_INNER(loop_body, enough) {                \
    static iter_t   __iterations = 1;               \
    int     __enough = get_enough(enough);          \
    iter_t      __n;                        \
    double      __result = 0.;                  \
                                    \
    while(!SEARCH_EXIT_CASE(__result, __enough)) {             \
        start(0);                       \
        for (__n = __iterations; __n > 0; __n--) {      \
            loop_body;                  \
        }                           \
        __result = stop(0,0);                   \
        /* good result */ \
        if (SEARCH_EXIT_CASE(__result, __enough)) {         \
            break; \
        } \
        /* failure cases */ \
        if (__result > 150.) {              \
            double  tmp = __iterations / __result;  \
            tmp *= 1.1 * __enough;          \
            __iterations = (iter_t)(tmp + 1);   \
        } else { \
            if (__iterations > (iter_t)1<<27) { \
                __result = 0.;          \
                break;              \
            }                   \
            __iterations <<= 3;         \
        } \
        __result = 0.;          \
    } /* while */                           \
    save_n((uint64)__iterations); settime((uint64)__result);    \
} 
```

此外，我建议定义其他神奇的常量`1<<27, 1.1, 3, 150.0`，例如具有有意义的名称，如`MAX_ITER`, `CORRECTION_RATE`, `INCREASE_RATE`,`RESULT_OVERFLOW`等...

# c++ - 使用 boost::thread 发生的线程锁。我的条件变量有什么问题？

> ID：14300808
> 
> 赞同：0
> 
> 时间：2013-01-13T04:56:16.757
> 
> 标签：c++, multithreading, boost, condition-variable

我编写了一个 Link 类，用于在网络中的两个节点之间传递数据。我用两个双端队列实现了它（一个用于从节点 0 到节点 1 的数据，另一个用于从节点 1 到节点 0 的数据）。我正在尝试对应用程序进行多线程处理，但我遇到了线程锁。我试图防止同时读取和写入同一个双端队列。在阅读有关我最初如何实现此功能的更多信息时，我认为我错误地使用了条件变量（也许不应该使用布尔变量？）。我应该有两个互斥锁，每个双端队列一个吗？如果可以的话请帮忙。谢谢！

```
class Link {
public:
// other stuff...
void push_back(int sourceNodeID, Data newData);
void get(int destinationNodeID, std::vector<Data> &linkData);

private:
// other stuff...
std::vector<int> nodeIDs_;
// qVector_ has two deques, one for Data from node 0 to node 1 and 
// one for Data from node 1 to node 0
std::vector<std::deque<Data> > qVector_; 
void initialize(int nodeID0, int nodeID1);

boost::mutex mutex_;
std::vector<boost::shared_ptr<boost::condition_variable> > readingCV_;
std::vector<boost::shared_ptr<boost::condition_variable> > writingCV_;
std::vector<bool> writingData_;
std::vector<bool> readingData_;
}; 
```

push_back 函数：

```
void Link::push_back(int sourceNodeID, Data newData)
{
int idx;
if (sourceNodeID == nodeIDs_[0]) idx = 1;
else 
{
    if (sourceNodeID == nodeIDs_[1]) idx = 0;
    else throw runtime_error("Link::push_back: Invalid node ID");
}

boost::unique_lock<boost::mutex> lock(mutex_);
// pause to avoid multithreading collisions
while (readingData_[idx]) readingCV_[idx]->wait(lock);

writingData_[idx] = true;
qVector_[idx].push_back(newData);
writingData_[idx] = false;
writingCV_[idx]->notify_all();
} 
```

获取函数：

```
void Link::get(int destinationNodeID,
std::vector<Data> &linkData)
{
int idx;
if (destinationNodeID == nodeIDs_[0]) idx = 0;
else 
{
    if (destinationNodeID == nodeIDs_[1]) idx = 1;
    else throw runtime_error("Link::get: Invalid node ID");
}

boost::unique_lock<boost::mutex> lock(mutex_);
// pause to avoid multithreading collisions
while (writingData_[idx]) writingCV_[idx]->wait(lock);
readingData_[idx] = true;

std::copy(qVector_[idx].begin(),qVector_[idx].end(),back_inserter(linkData));
qVector_[idx].erase(qVector_[idx].begin(),qVector_[idx].end());
readingData_[idx] = false;
readingCV_[idx]->notify_all();
return;
} 
```

这是初始化（以防万一）

```
void Link::initialize(int nodeID0, int nodeID1)
{
readingData_ = std::vector<bool>(2,false);
writingData_ = std::vector<bool>(2,false);
for (int i = 0; i < 2; ++i)
{
    readingCV_.push_back(make_shared<boost::condition_variable>());
    writingCV_.push_back(make_shared<boost::condition_variable>());
}
nodeIDs_.reserve(2);
nodeIDs_.push_back(nodeID0);
nodeIDs_.push_back(nodeID1);
qVector_.reserve(2);
qVector_.push_back(std::deque<Data>());
qVector_.push_back(std::deque<Data>());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T07:49:26.357

*我正在尝试对应用程序进行多线程处理，但我遇到了线程锁。*

什么是“线程锁”？很难看出你的代码试图完成什么。首先考虑您的 push_back() 代码，其同步部分如下所示：

```
boost::unique_lock<boost::mutex> lock(mutex_);

while (readingData_[idx]) readingCV_[idx]->wait(lock);

writingData_[idx] = true;
qVector_[idx].push_back(newData);
writingData_[idx] = false;
writingCV_[idx]->notify_all(); 
```

您的布尔值以 false 开始，并且仅在线程*锁定 mutex*`writingData[idx]`时才暂时变为 true 。当互斥锁被释放时，它又是假的。因此，对于任何*其他*必须等待获取互斥锁的线程来说，永远*不会*是真的。 **`writingData[idx]`**

 ***但是在您的 get() 代码中，您有

```
boost::unique_lock<boost::mutex> lock(mutex_);
// pause to avoid multithreading collisions
while (writingData_[idx]) writingCV_[idx]->wait(lock); 
```

当一个线程获得互斥锁上的锁时，它又`writingData[idx]`回到了假，因此*永远不会*进入 while 循环（并在 CV 上等待）。

完全对称的分析适用于布尔值，在互斥锁之外`readingData[idx]`也*总是错误的。*

所以你的条件变量*永远不会*被等待。您需要彻底重新考虑您的设计。

从每个队列一个互斥锁开始（双端队列对于简单地传递数据来说是多余的），并为每个队列关联一个条件变量与非空队列。因此，该`get()`方法将等到队列非空，这将在该`push_back()`方法中发出信号。像这样的东西（未经测试的代码）：

```
template <typename Data>
class BasicQueue
{
public:
    void push( Data const& data )
    {
        boost::unique_lock  _lock( mutex_ );
        queue_.push_back( data );
        not_empty_.notify_all();
    }

    void get ( Data& data )
    {
        boost::unique_lock  _lock( mutex_ );
        while ( queue_.size() == 0 )
            not_empty_.wait( _lock ); // this releases the mutex
        // mutex is reacquired here, with queue_.size() > 0
        data = queue_.front();
        queue_.pop_front();         
    }

private:
    std::queue<Data>            queue_;
    boost::mutex                mutex_;
    boost::condition_variable   not_empty_;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T07:24:30.837

是的。你需要两个互斥锁。您的死锁几乎可以肯定是单个互斥锁争用的结果。如果您使用调试器闯入正在运行的程序，您将看到线程挂起的位置。我也不明白你为什么需要布尔值。（编辑：可能会提出一种使用单个互斥锁的设计，但每个共享数据结构使用一个互斥锁更简单、更安全）

一个经验法则是，每个要保护的共享数据结构都有一个互斥锁。该互斥锁保护数据结构免受并发访问并提供线程安全。在您的情况下，每个双端队列一个互斥锁。例如：

```
class SafeQueue
{
private:
  std::deque<Data> q_;
  boost::mutex m_;
  boost::condition_variable v_;

public:
  void push_back(Data newData)
  {
    boost::lock_guard<boost::mutex> lock(m_);
    q_.push_back(newData);
    // notify etc.
  }
// ...
}; 
```

关于通过条件变量的通知，请参见此处：

[在生产者-消费者情况下使用条件变量](https://stackoverflow.com/questions/2379806/using-condition-variable-in-a-producer-consumer-situation)

`condition_variable`所以每个对象也会有一个，生产者会通知，消费者会等待。现在您可以创建两个这样的队列来进行双向通信。请记住，如果两个线程都被阻塞（等待数据）并且两个队列都是空的，那么只有两个线程仍然可以死锁。***

# javascript - not working for firefox

> ID：14300813
> 
> 赞同：0
> 
> 时间：2013-01-13T04:58:42.677
> 
> 标签：javascript, html, css

I have this little bit of code for a fade in effect but for some reason firefox is not picking up the which I need because the fade it doesn't work for firefox. What am I missing to get this to work?

```
<noscript>
</style>
<style type="text/css"> 
  body {display:inherit !important;} /*if they haven't got javascript we need to show the body       
</style>
</noscript>

<script type="text/javascript">
 $(document).ready(function() { $("body").fadeIn(1500);});
</script> 
```

the css

```
body {
     background-color:#000;
     overflow-x:hidden;
     -webkit-text-size-adjust:100%;
     display:none;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T05:02:27.977

You can't have a `<noscript>` tag anywhere but the `<body>` section of your document, and you can't have a `<style>` tag anywhere but the `<head>` section of your document (see [this](https://stackoverflow.com/questions/218162/embedding-extra-styles-with-noscript) post).

An alternative way to do this would be to make the body tag default to `display: visible` and set the `display` property using JavaScript like so:

```
<body>
    <script type="text/javascript">document.body.style.display = "none";</script>
    ...
</body> 
```

Then get rid of your `<noscript>` tag completely and remove the `display:none;` line from your CSS declaration.

The advantage of this is that if the browser doesn't have JavaScript enabled, your `<body>` tag will be visible, regardless of how the browser handles the `<noscript>` tag.

# python - 存储数据的最佳格式

> ID：14300815
> 
> 赞同：0
> 
> 时间：2013-01-13T04:59:06.843
> 
> 标签：python, parsing, format

在我的程序中，我从文件中读取数据，然后解析它。格式是

```
data   |   data   |   data   |   data   |   data 
```

存储数据的更好格式是什么？它必须易于被python解析并且易于使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T05:03:35.747

JSON - [http://docs.python.org/2/library/json.html](http://docs.python.org/2/library/json.html)

CSV - [http://docs.python.org/2/library/csv.html?highlight=csvreader](http://docs.python.org/2/library/csv.html?highlight=csvreader)

XML - 可以根据您的需要进行选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T05:14:20.143

如果您不需要在`|`任何地方使用竖线 ( ) 字符，您的数据格式就可以了。数据库通常使用管道分隔的数据，并且很容易解析。

CSV（逗号分隔值）是一种更通用的格式，但与管道分隔没有太大区别。两者都有一些限制，但对于简单的数据，它们可以正常工作。

如果您有复杂的数据，XML 很好，但它是一种更复杂的格式。如果您的需求很简单，复杂并不一定意味着更好，因此您需要考虑要存储的数据，以及是否要将其传输到其他应用程序或语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T05:03:11.407

看看[酸洗](http://docs.python.org/2/tutorial/inputoutput.html#the-pickle-module)。您可以将对象序列化并将其写入文件，然后稍后再读回它们。

如果数据需要由用其他语言编写的程序读取，请考虑使用[JSON](http://docs.python.org/2/library/json.html)。

# python - heroku 上的 uwsgi 无法编译

> ID：14300817
> 
> 赞同：0
> 
> 时间：2013-01-13T04:59:45.830
> 
> 标签：python, heroku, uwsgi

我目前在 Heroku，python 2.7.3 上使用 uwsgi + gevent + bottle。它曾经工作得很好。由于heroku 引入了“runtime.txt”功能，每次我将构建推送到heroku 时都会遇到uWSGI 编译问题。有谁知道解决方法？

```
Counting objects: 2717, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (1127/1127), done.
Writing objects: 100% (2717/2717), 462.10 KiB | 144 KiB/s, done.
Total 2717 (delta 2008), reused 2073 (delta 1572)
-----> Python app detected
-----> Preparing Python runtime (python-2.7.3)

[...]

    /usr/local/lib/libpython2.7.a(posixmodule.o): In function `posix_tmpnam':

   /tmp/Python-2.7.2/./Modules/posixmodule.c:7370: warning: the use of `tmpnam_r' is dangerous, better use `mkstemp'

   /usr/local/lib/libpython2.7.a(posixmodule.o): In function `posix_tempnam':

   /tmp/Python-2.7.2/./Modules/posixmodule.c:7317: warning: the use of `tempnam' is dangerous, better use `mkstemp'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_global_listmech@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_set_mutex@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_encode@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_client_start@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_client_init@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_errdetail@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_version@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_errstring@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_dispose@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_setprop@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_getprop@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_decode@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_client_step@SASL2'

   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/libldap.so: undefined reference to `sasl_client_new@SASL2'

   *** error linking uWSGI ***
   collect2: ld returned 1 exit status

   ----------------------------------------
   Command /app/.heroku/python/bin/python -c "import setuptools;__file__='/app/build/uWSGI/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-N4yIW1-record/install-record.txt failed with error code 1 in /app/build/uWSGI 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:13:24.170

看起来他们的 libldap 安装已损坏（缺少 sasl 符号）。您可以重建 uWSGI 强制它不检测 ldap，编辑 buildconf/base.ini

# mysql - Mysql - 根据使用联接的最新日期从表中选择 nid

> ID：14300818
> 
> 赞同：-1
> 
> 时间：2013-01-13T04:59:47.310
> 
> 标签：mysql

表 - 表 1

表
1 - 包含字段 - (nid,date,profileid)
- 包含数据 (1,2012-12-1,12),(2,2013-5-12,12),(3,2012-10-10,13) ,(4,2013-1-20,13)

预期输出 - 根据每个 profileid 的最新日期选择 nid

我无法根据最新日期从表中选择 nid 按 profileid 分组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T05:09:49.003

我相信你想要这样的东西：

```
select 
   nid, 
   profileid 
from Table1 
group by profileid 
having max(`date`) 
```

稍微更准确的方法是使用派生表来获取您的最大日期并重新连接到您想要的表：

```
select 
   Table1.nid, 
   Table1.profileid 
from Table1
 inner join (select profileid, 
             max(date) as maxdate 
             from Table1
             group by profileid) derived on Table1.date = derived.maxdate
                                  and Table1.profileid = derived.profileid 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/2f62b/12/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T05:06:02.533

你是这个意思吗？按 profileid 从 table1 组中选择 nid, max(date)

# mysql - 在 ASP 页面中查询 Access 链接表时出错

> ID：14300824
> 
> 赞同：0
> 
> 时间：2013-01-13T05:01:03.657
> 
> 标签：mysql, ms-access, asp-classic

我能够访问从 ms 访问数据库到 My SQL 的链接表。我可以通过 asp.net 访问，但通过经典 ASP 我收到以下错误：

> Microsoft JET 数据库引擎错误 '80004005'
> ODBC--连接到 'MYSQLDB' 失败。

# php - 使用第二个选择标签的值填充第三个选择标签，第二个选择标签的值使用第一个选择标签从数据库中获取

> ID：14300829
> 
> 赞同：1
> 
> 时间：2013-01-13T05:01:37.277
> 
> 标签：php, ajax

我使用 Ajax 填充第二个选择标记的值，但我无法填充应该出现在选择第二个选择标记之后的第三个选择标记。请提出问题所在。

```
index.php

<html>
    <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <script language="javascript" type="text/javascript">

    function getXMLHTTP() { //function to return the xml http object
            var xmlhttp=false;  
            try{
                xmlhttp=new XMLHttpRequest();
            }
            catch(e)    {       
                try{            
                    xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
                }
                catch(e){
                    try{
                    xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                    }
                    catch(e1){
                        xmlhttp=false;
                    }
                }
            }

            return xmlhttp;
        }

        function getclass(clas) {       

            var strURL="findbooks.php?clas="+clas;
            var req = getXMLHTTP();

            if (req) {

                req.onreadystatechange = function() {
                    if (req.readyState == 4) {
                        // only if "OK"
                        if (req.status == 200) {                        
                            document.getElementById('booksdiv').innerHTML=req.responseText;                     
                        } else {
                            alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                        }
                    }               
                }           
                req.open("GET", strURL, true);
                req.send();
            }       
        }
        function getbooks(clas,nme) {       
            var strURL="findprice.php?clas="+clas+"&nme="+nme;
            var req = getXMLHTTP();

            if (req) {

                req.onreadystatechange = function() {
                    if (req.readyState == 4) {
                        // only if "OK"
                        if (req.status == 200) {                        
                            document.getElementById('pricediv').innerHTML=req.responseText;                     
                        } else {
                            alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                        }
                    }               
                }           
                req.open("GET", strURL, true);
                req.send();
            }

        }
    </script>
    </head>
    <body>
    <form method="post" action="" name="form1">
    <table width="60%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td width="150">Class</td>
        <td  width="150"><select name="class" onChange="getclass(this.value)">
        <option>select class</option>
        <?php
     for ($i=1;$i<=10;$i++)
    {
        ?>
                <option value="<?php echo $i; ?>"><?php echo $i; ?></option>
                <?php } ?>
            </select></td>
      </tr>
      <tr style="">
        <td>Books</td>
        <td ><div id="booksdiv"><select name="Books" >
        <option>Select books</option>
            </select></div></td>
      </tr>
      <tr style="">
        <td>City</td>
        <td ><div id="pricediv"><select name="price">
        <option>Select price</option>
            </select></div></td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
    </table>
    </form>
    </body>
    </html> 
```

findbooks.php

```
<?php 
    $class=$_GET['clas'];
    include "localhost.php";
    $query="SELECT * FROM books WHERE class='".$class."'";
    $result=mysql_query($query);

    ?>
    <select name="books" onchange="getbooks(<?php $class; ?>,this.value)" >
    <option>Select books</option>
    <?php 
    while($row=mysql_fetch_array($result))
     { 
     ?>
    <option><?php echo $row['name'];?></option>
    <?php 
    } 
    ?>
    </select>

findprice.php

<?php $class=$_GET['clas'];
    $name=$_GET['nme'];
    include "localhost.php";
    $query="SELECT price FROM books WHERE class='$class' AND name='$name'";
    $result=mysql_query($query);

    ?>
    <select name="price">
    <option>Select Price</option>
    <?php 
    while($row=mysql_fetch_array($result)) 
    { 
    ?>
    <option><?php $row['price'] ?></option>
    <?php } ?>
    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:37:27.817

在`findprice.php`

```
<?php 
$class=$_GET['clas'];
 include "localhost.php";
 $query="SELECT * FROM books WHERE class='".$class."'";
 $result=mysql_query($query);
?>
<select name="books" onchange="getbooks(<?php echo $class; ?>,this.value)" ><!--Notice the echo here-->
<option>Select books</option>
<?php 
 while($row=mysql_fetch_array($result))
 { 
?>
<option value="<?php echo $row['name'];?>"><?php echo $row['name'];?></option><!--Notice the option value here-->
<?php 
 } 
?>
</select> 
```

而在`findprice.php`

```
<?php $class=$_GET['clas'];
$name=$_GET['nme'];
include "localhost.php";
$query="SELECT price FROM books WHERE class='$class' AND name='$name'";
$result=mysql_query($query);

?>
<select name="price" onchange="getbooks(<?php echo $class; ?>,<?php echo $name; ?>,this.value)>
<option>Select Price</option>
<?php 
while($row=mysql_fetch_array($result)) 
{ 
?>
<option><?php echo $row['price'] ?></option><!--Notice the echo here-->
<?php } ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:12:21.323

解决方案是使用 Jquery [LIVEQUERY](http://docs.jquery.com/Plugins/livequery)。Livequery 通过绑定事件或自动触发匹配元素的回调来利用 jQuery 选择器的强大功能，即使在页面加载后也是如此！

```
 $(document).ready(function() {

//Populate the third 'select' tag 'onchange' of second 'select' tag.
    $('secondSelectTagID').livequery('change', function(){
           //Add necessary code to populate third dropdown.
    });
}); 
```

注意：您必须同时包含[jquery.js](http://jquery.com)和[jquery.livequery.js 才能](http://docs.jquery.com/Plugins/livequery)使这种方法起作用。

# jquery - 使用 jQuery 解析 JSON 对象

> ID：14300831
> 
> 赞同：1
> 
> 时间：2013-01-13T05:01:47.697
> 
> 标签：jquery, json

我正在尝试使用 jquery 解析 json 对象，但它给了我无法获取空对象长度的错误。我无法找到原因。请帮助我找到问题。这是我在做什么

```
 var slider_images = {
                "image": [
                            {"fname":"1", "caption":"this is 1"},
                            {"fname":"2", "caption":"this is 2"},
                            {"fname":"3", "caption":"this is 3"},
                            {"fname":"4", "caption":"this is 4"},
                            {"fname":"5", "caption":"this is 5"},
                            {"fname":"6", "caption":"this is 6"},
                            {"fname":"7", "caption":"this is 7"},
                            {"fname":"8", "caption":"this is 8"}
                        ]
            };

            var imageObj = $.parseJSON(slider_images.image);
            $.each(imageObj,function() {
                //alert("fname is::"+this['fname']);
                alert("1");
            }); 
```

我想获取图像下所有子对象的 fname 和标题。请让我知道我哪里出错了...

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T05:04:11.563

解析 JSON 意味着将字符串转换为 JavaScript 对象。你已经有一个对象，所以没有什么可以“解析”的。

你可以像这样使用你的对象：

```
 $.each(slider_images.image, function() {
        console.log(this);
 }); 
```

# clojure - 将 webapp 前端添加到现有的 clojure 应用程序

> ID：14300845
> 
> 赞同：3
> 
> 时间：2013-01-13T05:04:50.430
> 
> 标签：clojure, leiningen, ring, noir

我有一个基于 Clojure 的聊天机器人，我以典型的 leiningen 方式启动它`lein run`。我想为这个应用程序添加一个前端，但不完全确定如何去做。通过阅读有关 compojure、lib-noir 和 ring 的文档，看起来标准的服务方式是使用`lein ring server`. 如果可能的话，我宁愿只用一个 lein 命令启动应用程序和前端。这是否涉及使用类似的东西手动启动服务器（可能在另一个线程中）`(run-jetty handler {:port 3000})`，或者有人可以推荐更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:07:53.467

在您的案例中，您对“前端”的理解是什么？我看到了两种可能性。

第一个是当你的 Clojure 机器人完全独立并且有一些外部接口可以与之交互时。在这种情况下，您的前端将是通过此外部接口与机器人交谈的单独应用程序，实际上，在这种情况下，如果您想使用单个 lein 命令启动程序，您应该`-main`在您的 webapp 中使用显式函数，该函数将首先运行您的机器人和然后启动服务器。我不知道启动服务器的确切命令；你的对我来说看起来不错，但我想我在某处读到这种初创公司已被弃用......

另一种可能性是当您希望将 web 应用程序集成到机器人中时。在这种情况下，您只需以直接使用机器人命名空间的方式编写 webapp；不需要任何`-main`功能，您所要做的就是运行`lein ring server`命令。

第二个对我来说看起来更清楚，但这取决于你的机器人的整体架构。

**更新。**

我已经更深入地研究了 ring 和 leiningen 是如何协同工作的，似乎最简单的方法让你得到你想要的东西如下。首先，按照[自述文件的](https://github.com/weavejester/lein-ring)指示安装`lein-ring`插件。 接下来，将您的配置类似于以下内容：
`project.clj`

```
(defproject your-project "0.0.1"
  :dependencies [...]
  ...  ; All other configuration
  :ring {:handler your-namespace.web/handler
         :init your-namespace.bot/init}) 
```

看，您的`project.clj`文件中应该有其他选项（它们在我上面链接的自述文件中进行了描述）。`:handler`是您的主要 Web 应用程序处理程序（有关它是什么以及为什么需要它，请参阅 ring 文档）。`:init`应该是你的初始化函数。*这正是您应该添加代码以启动您的机器人的地方。*
最后，发出`lein ring server`命令来启动你的 webapp。`:init`这将首先调用您在 中指定的函数`project.clj`，然后启动您的机器人，然后启动您的 web 应用程序。

# xcode - 旋转动画 xcode iphone

> ID：14300851
> 
> 赞同：4
> 
> 时间：2013-01-13T05:05:54.397
> 
> 标签：xcode, animation, xcode4, rotation, spinning

我试图在 xcode 中使用简单的单视图应用程序将图像旋转一圈。我在主故事板上有一个圆形图像和一个按钮。我使用下面的代码，但圆形图像向右漂移，然后在旋转时回到左侧。我不确定它缺少什么。

谢谢你的帮助。

视图控制器.h

```
#import <UIKit/UIKit.h>

 @interface ViewController : UIViewController
 {
         IBOutlet UIImageView *theImageView;
         IBOutlet UIButton    *theButton;
         NSTimer              *theTimer;
         float        angle;
         BOOL         runStop;
     }

 @property (atomic, retain) IBOutlet UIImageView *theImageView;
 @property (atomic, retain) IBOutlet UIButton    *theButton;

 -(IBAction)runRoulette:(id)sender;

 @end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize theButton, theImageView;

- (void)viewDidLoad
{
    angle = 0;
    runStop = FALSE;
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void)rotateRoulette
{
    theImageView.center = CGPointMake(self.theImageView.center.x, self.theImageView.center.y);
    theImageView.transform=CGAffineTransformMakeRotation (angle);
    angle+=0.001;
}

-(IBAction)runRoulette:(id)sender
{
    if(!runStop)
    {
        theTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/600.0 target:self selector:@selector(rotateRoulette) userInfo:nil repeats:YES];
    }
    else
    {
        [theTimer invalidate];
        theTimer = nil;
    }
    runStop = !runStop;
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T00:25:23.640

我找到了一种非常简单的方法来让我的动画按照我想要的方式工作 -

```
theImageView.center = CGPointMake(160.0, 364.0);
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:5];
//theImageView.center=CGPointMake(self.theImageView.center.x, self.theImageView.center.y);
theImageView.transform = CGAffineTransformMakeRotation(M_PI/2.65);
[UIView commitAnimations]; 
```

它旋转 theImageView M_PI/2.65（M_PI/2.65 是 roataion 数量）计数为 5。

# javascript - CoffeeScript：如何遍历多层递归数据？

> ID：14300854
> 
> 赞同：0
> 
> 时间：2013-01-13T05:06:35.687
> 
> 标签：javascript, recursion, coffeescript

我的 commentsArray 中有许多级别的嵌套**评论**

（这是从 API 中提取的，无法更改）

```
commentsArray = [
    {
        author: "jeff"
        replies: [
            {
                author: "jeff"
                replies: [
                    {
                        author: "simon"
                    }
                ]
            },
            {
                author: "simon"
            }
        ]
    },
    {
        author: "simon"
    }
] 
```

我还有一个递归函数**dialogParse**，如果有问题的对象有“**回复**” ，它会调用自己

```
dialogueParse = (comment) ->
    for child in comment
        if child.author is "simon"
            console.log "Simon was found.."

        if child.replies
            dialogueParse child 
```

但是，此代码似乎无法正常工作。在我最初调用该函数后：

```
dialogueParse commentsArray 
```

..由于某种原因，仅找到位于第一级（数组末尾）的那个。

“ **simon** ”在 3 个不同的地方被列为作者。

我已经为此工作了几个小时，但一无所获。任何帮助都非常感谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T05:11:51.363

你不应该`child.replies`在递归中作为参数传递吗？

如：

```
dialogueParse = (comment) ->
    for child in comment
        if child.author is "simon"
            console.log "Simon was found.."

        if child.replies
            dialogueParse child.replies 
```

# haskell - 复制可被 5 整除的行

> ID：14300855
> 
> 赞同：1
> 
> 时间：2013-01-13T05:06:42.847
> 
> 标签：haskell, if-statement, rewrite, eof, parse-error

又是我：）。我尝试编写一个程序，它将数字可被 5 整除的行复制到另一个文件。这是代码（对不起波兰名字）：

```
import IO

przepiszConHelper :: Handle -> Handle -> Integer -> Integer -> IO ()
przepiszConHelper wejscie wyjscie liczba licznik = do
    eof <- hIsEOF wejscie
    if eof then return ()
        else
            linia <- hGetLine wejscie
            if (mod licznik liczba) == 0 then
                hPutStrLn wyjscie linia
            przepiszConHelper wejscie wyjscie liczba (licznik + 1)

przepiszCon :: String -> String -> Integer -> IO ()
przepiszCon wejscie wyjscie liczba = do
    wej <- openFile wejscie ReadMode
    wyj <- openFile wyjscie WriteMode
    przepiszConHelper wej wyj liczba 0
    hClose wej
    hClose wyj

main = przepiszCoN "wejscie.txt" "wyjscie.txt" 5 
```

我认为它应该可以工作......但我得到一个奇怪的错误：

```
przepisz.hs:6:9:
    Parse error in pattern: if eof then return () else linia 
```

这对我来说毫无意义。我一直在另一个程序中使用相同的表达式，它就像一个伤害。我试图删除这些行并用不同的缩进编写它们（我记得我之前遇到过一些空白问题）。但我仍然得到同样的错误:(。

* * *

- 编辑

好的，我有第一个错误......它只是`else do`代替`else`. 但是这里又出现了一个问题：

```
przepisz.hs:11:25: parse error on input `przepiszConHelper' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T05:20:13.507

问题在这里：

```
if eof then return ()
    else
        linia <- hGetLine wejscie 
```

实际上，问题不在于空格——您的问题是您似乎期望一个`do`块在子表达式内扩展，但事实并非如此。该`else`子句需要定义自己的`do`块：

```
if eof then return ()
    else do
        linia <- hGetLine wejscie 
```

但是，之后还有另一个错误：

```
if (mod licznik liczba) == 0 then
    hPutStrLn wyjscie linia
przepiszConHelper wejscie wyjscie liczba (licznik + 1) 
```

您缺少`else`this 的子句`if`。`if`始终是 Haskell 中的表达式，因此它必须始终计算为*something*。如果您想表达“`IO`如果条件为真则执行此操作，否则不执行任何操作”，您可以使用`return ()`：

```
if (mod licznik liczba) == 0 
    then hPutStrLn wyjscie linia
    else return () 
```

标准库甚至包括`when`表达这个想法的函数：

```
when (mod licznik liczba == 0) $ hPutStrLn wyjscie linia 
```

如果你愿意，你可以`if`用同样的方式重写外部表达式，得到如下内容：

```
przepiszConHelper :: Handle -> Handle -> Integer -> Integer -> IO ()
przepiszConHelper wejscie wyjscie liczba licznik = do
    eof <- hIsEOF wejscie
    when (not eof) $ do 
        linia <- hGetLine wejscie
        when (mod licznik liczba == 0) $ hPutStrLn wyjscie linia
        przepiszConHelper wejscie wyjscie liczba (licznik + 1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T01:19:17.643

我想建议一种不同的做事方式，主要是把纯代码从IO中分离出来，使用更多的标准函数。此外，我经常尝试编写比您所做的更小的函数，让每个函数都简单且易于维护。

首先让我们保留列表的第 n 个元素。我们将通过用数字压缩它来做到这一点，`[1..]`然后只保留数字可以被 整除的那些`n`。

```
przechowac :: Int -> [a] -> [a]
przechowac n listy = [a| (a,i) <- zip listy [1..], i `mod` n == 0] 
```

例如，

```
*Main> przechowac 3 [1..10]
[3,6,9] 
```

接下来让我们在字符串的行上使用它时保持纯净：

```
przechowacLinie :: Int -> String -> String
przechowacLinie n = unlines . przechowac n . lines 
```

```
*Main> putStrLn "Hej,\nHaskell\njest\nfantastyczny"
Hej,
Haskell
jest
fantastyczny
*Main> putStrLn (przechowacLinie 2 "Hej,\nHaskell\njest\nfantastyczny")
Haskell
fantastyczny 
```

现在让我们将它包装在一些 IO 中。我们将创建一个函数，将函数应用于文件，并将其保存到输出文件：

```
zastosowacFunkcje :: (String -> String) -> FilePath -> FilePath -> IO ()
zastosowacFunkcje f wejscie wyjscie = do
   wej <- readFile wejscie
   writeFile wyjscie (f wej) 
```

(`FilePath`是`String`使类型签名更清晰的类型同义词。)

我可以用它来编写你的函数：

```
przepiszCon :: Int -> FilePath -> FilePath -> IO ()
przepiszCon liczba = zastosowacFunkcje (przechowacLinie liczba) 
```

事实上，这些天我已经停止使用类似的功能`zastosowacFunkcje`，现在我倾向于这样做

```
przepiszCon :: Int -> FilePath -> FilePath -> IO ()
przepiszCon n wejscie wyjscie = fmap (przechowacLinie n) (readFile wejscie)
                                                     >>= writeFile wyjscie 
```

因为我觉得[`fmap`](https://stackoverflow.com/questions/13134825/how-do-functors-work-in-haskell/13137359#13137359)很方便。

# asp.net - 在没有 Visual Studio 的情况下从 ASP.Net 2.0 升级到 4.0

> ID：14300856
> 
> 赞同：2
> 
> 时间：2013-01-13T05:07:02.197
> 
> 标签：asp.net

**环境：**

Windows Server 2008 R2 企业版 IIS 7.5.7600.26385

**问题：** 我有一个现有的网站，目前正在运行 ASP.Net 2.0 版，并希望迁移到 ASP.Net 4.0。我没有 Visual Studio，所以我不能简单地使用“升级向导”来执行此任务。这是我到目前为止所尝试的：

在 IIS 中：

1.  创建一个新的应用程序池名称“aspnet_v40”并配置为使用 ASP.Net 4.0（集成）
2.  停止网站
3.  将网站更改为新的应用程序池（“aspnet_v40”）
4.  单击网站“.Net Compile”选项 - IIS 显示以下错误：执行此操作时出错 \Windows\Microsoft.Net\Framework64\v4.0.30319\config\web.config Line #141 Error: Unrecognized element '文件夹LevelBuildProviders'

登录到服务器后，我使用 aspnet_regiis 程序列出并验证已安装的 ASP.Net 版本（我以为我会从所有目录中得到相同的答案，但报告的内容如下）：

**C:\Windows\Microsoft.NET\Framework\v2.0.50727>aspnet_regiis -lv**

2.0.50727.0 C:\Windows\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll

4.0.30319.0 c:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll

2.0.50727.0 C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll

4.0.30319.0 c:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll

**C:\Windows\Microsoft.NET\Framework64\v2.0.50727>aspnet_regiis -lv**

2.0.50727.0 C:\Windows\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll

4.0.30319.0 c:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll

2.0.50727.0 C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll

4.0.30319.0 c:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll

**C:\Windows\Microsoft.NET\Framework\v4.0.30319>aspnet_regiis -lv**

2.0.50727.0 C:\Windows\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll

4.0.30319.0 c:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll

4.0.30319.0 c:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll

**C:\Windows\Microsoft.NET\Framework64\v4.0.30319>aspnet_regiis -lv**

2.0.50727.0 C:\Windows\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll

4.0.30319.0 c:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll

4.0.30319.0 c:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll

显然，我缺少一些步骤：

1.  如何摆脱“无法识别的元素'folderLevelBuildProviders'”错误。
2.  从 2.0 迁移到 4.0 需要哪些步骤（命令）（即：web.config 中的新元素或更改元素？？）

有没有人在没有 Visual Studio 的情况下从 2.0 升级到 4.0 的分步指南？或者，有没有人链接到这样的指南？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:51:20.700

好的——终于让事情开始了，下面是魔法：

检查使用 appcmd.exe 列出已配置的 isapiFilters：

**C:\Windows\System32\inetsrv>appcmd.exe 列表配置-section:system.webServer/isapiFilters**

```
<system.webServer>
  <isapiFilters>
    <filter name="ASP.Net_2.0.50727-64" path="%windir%\Microsoft.NET\Framework64\v2.0.50727\aspnet_filter.dll" enableCache="true" preCondition="bitness64" />
    <filter name="ASP.Net_2.0.50727.0" path="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_filter.dll" enableCache="true" preCondition="bitness32" />
  </isapiFilters>
</system.webServer> 
```

以上显示版本 4.0 过滤器不存在，因此我发出以下命令：

**C:\Windows\Microsoft.NET\Framework64\v4.0.30319>aspnet_regiis -iru**

```
Start installing ASP.NET (4.0.30319).
....Finished installing ASP.NET (4.0.30319). 
```

现在验证版本 4.0 是否存在：

**C:\Windows\System32\inetsrv>appcmd.exe 列表配置-section:system.webServer/isapiFilters**

```
<filter name="ASP.Net_2.0.50727-64" path="%windir%\Microsoft.NET\Framework64\v2.0.50727\aspnet_filter.dll" enableCache="true" preCondition="bitness64,runtimeVersionv2.0" />
<filter name="ASP.Net_2.0.50727.0" path="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_filter.dll" enableCache="true" preCondition="bitness32,runtimeVersionv2.0" />
<filter name="ASP.Net_2.0_for_V1.1" path="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_filter.dll" enableCache="true" preCondition="runtimeVersionv1.1" />
<filter name="ASP.Net_4.0_64bit" path="C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_filter.dll" enableCache="true" preCondition="runtimeVersionv4.0,bitness64" />
<filter name="ASP.Net_4.0_32bit" path="C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_filter.dll" enableCache="true" preCondition="runtimeVersionv4.0,bitness32" /> 
```

现在将站点从 2.0 版更新到 4.0 版：

1.  创建一个使用 4.0 版的应用程序池 - 如果需要，请务必将“启用 32 位应用程序”选项设置为 true。

2.  停止正在升级的网站。

3.  右键单击网站 -> 管理网站... -> 高级设置

4.  将“应用程序池”更改为步骤 1 中创建的 4.0 版本应用程序池。单击确定 -> 确定

5.  单击“.Net Compilation”选项并确认“Assemblies”部分使用的是 4.0 版。

6.  使用4.0框架重新编译网站DLL，存放在/bin目录下。

7.  删除 web 临时目录中的所有文件/文件夹（用于保存临时 asp.net 文件），必须这样做，否则在启动网站时将显示拒绝访问错误。

8.  右键单击网站 -> 管理网站 -> 开始

9.  测试所有页面。

以上对我有用。

# mongodb - 通过虚拟属性查询 Meteor Collection

> ID：14300857
> 
> 赞同：1
> 
> 时间：2013-01-13T05:07:17.533
> 
> 标签：mongodb, meteor

通过虚拟属性上的函数查询流星集合的最佳方法是什么，最好不要将属性保存到数据库中。我的收藏任务具有以下结构：

```
{
  name:"Freezer Area",
  subtasks:[
    {id:1,status:"red",name:"Unlock freezer"},
    {id:2,status:"yellow",name:"Check daily stock"},
    {id:3,status:"yellow",name:"Rotate stock"}
  ],
  managerId:curly
} 
```

虚拟属性是任务状态 - 根据其所有子任务的状态计算（例如，如果单个子任务为“红色”，则任务状态为“红色”；否则，如果所有子任务为“绿色”，则任务状态为“绿色”；否则任务状态为“黄色”）。

在我的一个模板中，我想只显示单一状态的任务。我可以在 Meteor Collection 上运行什么样的客户端查询？是否有推荐的方法来避免每次呈现这些模板时重新计算任务状态？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T07:31:24.897

通常做你想做的事情[map-reduce](http://www.mongodb.org/display/DOCS/MapReduce)是最好的选择，它将结果存储在一个单独的集合中，这样可以避免重新计算的需要。然而，meteor 并没有在它的 mini-mongo 版本中实现 map-reduce。

流星约束的更好选择是重新计算其状态并在任务状态更改时在集合中更新它，这样它就不需要对每个非更新查询进行冗余重新计算。

您还可以对数据进行后处理。它有点乱，但你明白了

```
results = virtualize_status(Collection.find({}).fetch());

//this function goes through and adds the status
function virtualize_status(results) {
    var totalresults = results.length, element = null;

    for (var i = 0; i < length; i++) {
        element = results[i];
        green = 0;
        red = 0;

        for (var j = 0; j < element.subtasks.length; j++) {
           if(element.subtasks[j].status == "green") {
               green++;
           }
           else if(element.subtasks[j].status == "red") {
               red++;
           }
        }

        final_status = "yellow";

        if(red > 0) {
            final_status = "red";
        }
        else if(green == element.subtasks.length) {
            final_status = "green"
        }

        results[i]["status"] = final_status;
    }

    return results;
} 
```

# django - Ajax 表单提交，文件未提交

> ID：14300858
> 
> 赞同：2
> 
> 时间：2013-01-13T05:07:56.827
> 
> 标签：django, jquery

我正在尝试为我的 Django 表单实现 AJAX 表单提交。

这些文件是在没有 AJAX 的情况下提交的，因此服务器端的逻辑似乎正在运行。并且使用 ajax，除了文件之外的其余值都会被提交。

这是我正在实现的代码，

# AJAX 表单提交

```
(function() {
  // using jQuery
  function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
      var cookies = document.cookie.split(';');
      for (var i = 0; i < cookies.length; i++) {
        var cookie = jQuery.trim(cookies[i]);
        // Does this cookie string begin with the name we want?
        if (cookie.substring(0, name.length + 1) == (name + '=')) {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }
  var csrftoken = getCookie('csrftoken');
  function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
  }
  $.ajaxSetup({
    crossDomain: false, // obviates need for sameOrigin test
    beforeSend: function(xhr, settings) {
    if (!csrfSafeMethod(settings.type)) {
      xhr.setRequestHeader("X-CSRFToken", csrftoken);
    }
  }
  });
})(); 
```

# jQuery

```
$('#save-form').live('submit', function(event) { // catch the form's submit event
  event.preventDefault();
  $.ajax({ // create an AJAX call...
      data: $(this).serialize(), // get the form data
      type: $(this).attr('method'), // GET or POST
      url: '/save/', // the file to call
      success: function(response) { // on success..
          $('#modalsave-form').html(response); // update the DIV
      }
  });
  return false;
}); 
```

# HTML 表单

```
<form class="form-horizontal" id="save-form" enctype="multipart/form-data" method="post" action="/save/">
    <div class="control-group">
        <label class="control-label" for="id_body">Write Something</label>
        <div class="controls">
          <textarea class="typeaheadfun" id="id_body" rows="3" cols="100" name="body" placeholder="Scribble Body" style="width: 455px;"></textarea>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="id_media">Add a File</label>
        <div class="controls">
          <input type="file" name="media" id="id_media"/>
        </div>
    </div>
    <hr>
    <input class="btn btn-primary pull-right" type="submit" value="Post!" />
    <br>
    {% csrf_token %}
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:22:41.250

当您提交 HTML 表单时，它通常使用HTML 标头`GET`或`POST`数据 HTML 标头将表单的数据发送到服务器。但是，当您需要有效地将二进制数据或附加文件发送到服务器时，HTML 作为其[规范](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)的一部分具有发送此类数据的不同方法。`enctype`tag的属性`<form>`指定浏览器应该使用哪种方法将数据发送到服务器。发送文件，`multipart/form-data`是广泛使用的编码方式。

当您尝试在没有 ajax 的情况下发送表单时，浏览器会使用`multipart/form-data`编码将文件数据发送到服务器，但是当您使用 ajax 提交表单时，您会执行以下操作：

```
data: $(this).serialize() 
```

该步骤不会以与服务器期望数据相同的方式对数据进行编码，因此您的 ajax 不起作用。

为了使它工作，而不是手动提交表单的数据，您应该使用 ajax 提交整个表单。手动操作很棘手，而且已经有插件可以做到这一点。一个这样的插件是[jQuery Form Plugin](http://malsup.com/jquery/form/#getting-started)。它允许使用 ajax 提交整个表单。以下是 js 代码，它可以让您了解如何将其与您的设置集成：

```
$('#save-form').live('submit', function(event) {
    event.preventDefault();

    $(this).ajaxSubmit({
        url: '/save/', // the file to call
        success: function(response) {
            $('#modalsave-form').html(response);
        }
    });

    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T13:28:05.870

另一种选择是使用免除插件需求的 FormData 接口

[https://developer.mozilla.org/en-US/docs/Web/API/FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData)

示例代码：（适应您的需要）

`

```
$('#fupload').click(function(){

var xhr = new XMLHttpRequest();

var token = $('input[name="csrfmiddlewaretoken"]').prop('value');
    $.ajaxSetup({
        headers: { "X-CSRFToken": token }
    });     

var formData = new FormData($('form')[0]);
formData.append('file',xhr.file);

    $.ajax({
        url: '/myurl/',  //server script to process data
        type: 'POST',
        xhr: function() {  // custom xhr
            myXhr = xhr;
            //if(xhr.upload){ // check if upload property exists
            //  xhr.upload.addEventListener('progress',progressHandlingFunction, false); 
                // for handling the progress of the upload
            //}
            return xhr;
        },
        // Form data
        data: formData,
        //Ajax events
        success: function(server_response){
            $( '#path' ).val("Success");
        },
        error: function(jqXHR, textStatus, errorThrown ){
             $( '#path' ).val(errorThrown);
         },
        //Options to tell JQuery not to process data or worry about content-type
        cache: false,
        contentType: false,
        processData: false
    });
}); 
```

`

# ruby-on-rails - users_path(user) 在使用 devise 时返回 /users.id 而不是 /users/id

> ID：14300865
> 
> 赞同：2
> 
> 时间：2013-01-13T05:08:21.197
> 
> 标签：ruby-on-rails, ruby, devise, routes

我发现当我使用`users_path(user)`它时返回`/users.id`其中 id 是用户的 id 但我希望它返回`/users/id`。我的配置 routes.rb 如下所示。

```
# config/routes.rb
Test::Application.routes.draw do
  root to: "static_pages#home"
  resources :users, only: [:index, :show]

  devise_for :users
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T05:18:28.127

将其用于单个用户的路径：

```
user_path(user) 
```

将此用于所有用户的路径或索引页面：

```
users_path # no arguments 
```

# html-lists - 显示不同 平板电脑边框大小

> ID：14300866
> 
> 赞同：1
> 
> 时间：2013-01-13T05:08:51.977
> 
> 标签：html-lists, tablet

我有一个与在 Android 4.0.4 上查看 webview 的 css 相关的问题

我有一个清单：使用`<ul> , <li>`标签。但在 7 英寸平板电脑上显示时，有些`<li>`边框尺寸不同（> 1px）。

这是html：

```
<div id="cmSettingMenuList">
<ul>
            <li >11111111</li>
                <li >2222222</li>
                <li >33333333</li>
                 <li >11111111</li>
                <li >2222222</li>
                <li >33333333</li>
                 <li >11111111</li>
                <li >2222222</li>

                 <li >11111111</li>
                <li >2222222</li>
                <li >33333333</li>
                <li >33333333</li>
                 <li >11111111</li>
                <li >2222222</li>
                <li >33333333</li>
        </ul>
     </div> 
```

我为此使用了 1 个 css：

```
#cmSettingMenuList ul {
width: 580px;
list-style: none;
overflow: visible;
}

#cmSettingMenuList ul li {
padding-left: 2px;
height: 58px;
line-height: 58px;
border-bottom: 1px solid #9AB2E7;
background-size: 26px;
position: relative;
} 
```

这是平板电脑上的显示：

[http://i.stack.imgur.com/RBsBL.png](http://i.stack.imgur.com/RBsBL.png)

它的大小不一样。你有什么解决办法吗。

谢谢

# php - MYSQL 仅在询问第一个排名时不会在 PHP 中返回结果

> ID：14300868
> 
> 赞同：2
> 
> 时间：2013-01-13T05:09:16.447
> 
> 标签：php, mysql

我正在尝试使用 PHP 从 MySQL 表中获取 1 条记录。我尝试了许多不同的 SELECT 语句，虽然它们都在 MYSQL 中工作，但它们拒绝在 php 中返回任何结果。

countryRanking 表是一个简单的两列表

```
country    clicks
------     ------
0        222
66       34 
175      1000
45       650 
```

mysql 返回国家列的排名（1、2、3 等），并返回除排名第一的国家以外的所有结果。例如，当 country=175 时，应该返回 1 但不返回结果。通过网络浏览器直接查询返回空白页面，没有错误信息。我的 PHP 代码

```
$result = mysql_query("SELECT FIND_IN_SET(clicks,
(SELECT GROUP_CONCAT(DISTINCT clicks  ORDER BY clicks DESC) 
FROM countriesRanking)) rank FROM countriesRanking
WHERE country = '$country'") or die(mysql_error());

$row =  mysql_fetch_assoc($result) or die(mysql_error());
$theranking = $row['rank'];
echo $theranking; 
```

编辑

我尝试了以下但得到相同的空白页

```
var_dump($row['rank']); 
```

编辑 2

对于成功的查询 print_r($result) 返回类似 Resource id #4 的内容。而 print_r($row) 返回 Array ( [0] => 4 [rank] => 4 )。但是在查询排名靠前的国家时。例如country=175，它返回一个空白页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:14:53.983

假设您没有收到错误，这意味着您已成功连接到数据库。你只是没有取回任何价值。尝试：

```
$row = mysql_fetch_row($result); 
```

我通常会认为 $row = mysql_fetch_assoc($result); 会起作用，但如果这些都不起作用，它必须是你的 mysql_query 中的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T05:26:55.660

您可以按如下方式进行调试。

1.  通过在 PHPMyAdmin 上运行它并检查结果来确保您的 SQL 是正确的。
2.  确保你没有任何致命错误，如果你得到一个空白页，那就有问题了。打开PHP错误并查看。
3.  `print_r($result)`看看它是否为空。
4.  如果您只想排名第一，则将 LIMIT 1 添加到您的查询中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T05:27:36.597

如果您只需要数据库中的一条记录，则必须在查询中使用限制

```
$result = mysql_query("SELECT FIND_IN_SET(clicks,
(SELECT GROUP_CONCAT(DISTINCT clicks  ORDER BY clicks DESC) 
FROM countriesRanking)) rank FROM countriesRanking
WHERE country = '$country' LIMIT 1") or die(mysql_error()); 
```

然后使用`while`循环

```
while($row =  mysql_fetch_assoc($result)) {
    $theranking = $row['rank'];
}
echo $theranking; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T12:17:20.817

试试这个。它基于您之前的问题。 MYSQL 在 PHP MYSQLI 版本[中返回空结果：](https://stackoverflow.com/questions/14295509/mysql-returns-empty-result-in-php)

```
<?PHP
function rank(){
/* connect to database */
$hostname = 'server';
$user = 'username';
$password = 'password';
$database = 'database';

    $link = mysqli_connect($hostname,$user,$password,$database);

    /* check connection */

    if (!$link){ 
        echo ('Unable to connect to the database');
    }

    else{
    $query = "SELECT COUNT(*) rank FROM countryTable a JOIN countryTable b ON a.clicks <= b.clicks WHERE a.country = 175";
    $result = mysqli_query($link,$query);
    $arr_result =  mysqli_fetch_array($result,MYSQLI_BOTH); 
        return $arr_result['rank'];
    }
    mysqli_close($link);
}

echo rank();

?> 
```

MYSQL 版本：

```
<?PHP
function rank(){
  /* connect to database */
  $hostname = 'server';
  $user = 'username';
  $password = 'password';
  $database = 'database';

  $link = mysql_connect($hostname,$user,$password);

  /* check connection */

  if (!$link){ 
    echo ('Unable to connect to the database');
  }

  else{
  $query = "SELECT COUNT(*) rank FROM countryTable a JOIN countryTable b ON a.clicks <= b.clicks WHERE a.country = 66";
  mysql_select_db($database);
  $result = mysql_query($query);
  $arr_result = mysql_fetch_array($result,MYSQL_BOTH); 
  return $arr_result['rank'];
  }
  mysql_close($link);
}

echo rank();

?> 
```

# java - Java 程序错误（文本字段）

> ID：14300870
> 
> 赞同：0
> 
> 时间：2013-01-13T05:09:25.137
> 
> 标签：java, compiler-errors

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class NICCode extends JFrame {

  NICCode() {
    setSize(600, 250);
    setResizable(false);
    setDefaultCloseOperation(3);
    setLocationRelativeTo(null);

    // JPanel
    JPanel labelPanel = new JPanel(new FlowLayout(1));
    JPanel leftBodyPanel = new JPanel(new GridLayout(3, 1));
    JPanel bodyPanel = new JPanel(new GridLayout(3, 1));
    JPanel buttonPanel = new JPanel(new FlowLayout(2));
    JPanel textFieldPanel = new JPanel(new FlowLayout(0));

    // JLabel
    JLabel titleLabel = new JLabel("Find Your Birthday By NIC");
    titleLabel.setFont(new Font("", 1, 25));
    JLabel myLabel = new JLabel("CSG");
    myLabel.setFont(new Font("", 1, 10));

    JLabel enterNicLabel = new JLabel("Enter Your NIC :");
    JLabel yourBirthDayLabel = new JLabel("Your Birth Day :");
    JLabel yourGenderLabel = new JLabel("Gender :");

    JLabel printBirthDayLabel = new JLabel("Your Birth Day");
    JLabel printGenderLabel = new JLabel("Your Gender");

    // JTextField
    JTextField nicText = new JTextField(25);
    nicText.setText("920000000V");

    // JButton
    JButton searchAgainButton = new JButton("Search Again");
    JButton exitButton = new JButton("Exit");

    // adds
    add("North", labelPanel);
    add("West", leftBodyPanel);
    add("South", buttonPanel);
    add(bodyPanel);

    labelPanel.add(titleLabel);
    leftBodyPanel.add(enterNicLabel);
    leftBodyPanel.add(yourBirthDayLabel);
    leftBodyPanel.add(yourGenderLabel);
    textFieldPanel.add(nicText);
    bodyPanel.add(textFieldPanel);
    bodyPanel.add(printBirthDayLabel);
    bodyPanel.add(printGenderLabel);
    buttonPanel.add(myLabel);
    buttonPanel.add(searchAgainButton);
    buttonPanel.add(exitButton);

    setVisible(true);
    // pack();

    String yearText = nicText.substring(0, 2);
    String dateText = nicText.substring(2, 5);
    String sex = "";
    int year = Integer.parseInt(yearText);
    int date = Integer.parseInt(dateText);
    int month = 0;
    if (date > 500) {
      sex = "Feamale";
      date -= 500;
    } else {
      sex = "Male";
    }
    int datesOfMonths[] = { 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
    for (int i = 0; i < 12; i++) {
      date = date - datesOfMonths[i];
      month = i;
      if (date < datesOfMonths[i + 1]) {
        break;
      }
    }
    if (month > 0) {
      month += 1;
    }
  }
} 
```

我刚刚创建了一个从 nic 查找生日的程序。我无法修复这个编译错误。我创建了一个 JTextField 来获取 Nic，然后我添加了子字符串方法来获取查找 nic 所需的数字。不幸的是，子字符串方法找不到 textField。它显示错误为“找不到符号”。这是一个文本字段。为什么方法找不到那个TextField。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:40:38.960

消息：

```
cannot find symbol 
```

不是指文本字段，而是指`substring(..)`不存在的方法`JTextField`。但是像..

```
textField.getText().substring(...); 
```

..可能会起作用，因为`getText()`返回 a`String`并`String`具有该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T05:40:59.337

改变

```
String yearText = nicText.substring(0, 2);
String dateText = nicText.substring(2, 5); 
```

至

```
String yearText = nicText.getText().substring(0, 2);
String dateText = nicText.getText().substring(2, 5); 
```

# postgresql - tsvector 只支持英文？

> ID：14300874
> 
> 赞同：3
> 
> 时间：2013-01-13T05:10:15.953
> 
> 标签：postgresql, postgresql-9.2

我做了以下事情：

```
ALTER TABLE blog_entry ADD COLUMN body_tsv tsvector;

CREATE TRIGGER tsvectorupdate BEFORE INSERT OR UPDATE ON blog_entry 
    FOR EACH ROW EXECUTE PROCEDURE tsvector_update_trigger(body_tsv, 'pg_catalog.english', body);

CREATE INDEX blog_entry_tsv ON blog_entry USING gin(body_tsv);

UPDATE blog_entry SET body_tsv=to_tsvector(body); 
```

现在这是有效的：

```
SELECT title FROM blog_entry WHERE body_tsv @@ plainto_tsquery('hello world'); 
```

但是当尝试搜索非英文文本时，它根本不起作用（没有结果）。

我正在使用 v9.2.2

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T08:48:04.903

我玩这个已经有一段时间了，但是你需要用正确的语言创建 ts_vector，而不是 ts_query。

因此，当您更新表时，请使用：

```
UPDATE blog_entry SET body_tsv=to_tsvector('german', body); 
```

您还可以扩展功能并使用 ispell 字典使词干更适合文本搜索引擎（尽管它仍然不会像 Solr 那样复杂）

为此，请下载例如包含在[OpenOffice 德语词典中的 ISPELL 词典](http://extensions.services.openoffice.org/en/project/dict-de_DE_frami)

.oxt 文件实际上是一个 .zip 文件，因此您可以简单地提取其内容。

然后将文件复制`de_DE_frami.dic`到 PostgreSQL“share/tsearch_data”目录，同时将扩展名更改为`.dict`（这是 PostgreSQL 所期望的。

然后将文件复制`de_DE_frami.aff`到同一目录，将扩展名更改为`.affix`.

**您需要将两个（文本）文件都转换为 UTF-8 以便它们与 PostgreSQL 一起使用**

然后使用以下命令注册该字典：

```
CREATE TEXT SEARCH CONFIGURATION de_config (copy=german);

CREATE TEXT SEARCH DICTIONARY german_stem (
    TEMPLATE = snowball,
    Language = german
);

CREATE TEXT SEARCH DICTIONARY german_ispell (
    TEMPLATE = ispell,
    dictfile = de_DE_frami,
    afffile = de_de_frami
);

alter text search configuration de_config 
     alter mapping for asciiword WITH german_ispell, german_stem; 
```

完成后，您可以使用以下命令创建 ts_vector：

```
UPDATE blog_entry SET body_tsv=to_tsvector('de_config', body); 
```

这也在手册中进行了描述：[http ://www.postgresql.org/docs/current/static/textsearch-dictionaries.html#TEXTSEARCH-ISPELL-DICTIONARY](http://www.postgresql.org/docs/current/static/textsearch-dictionaries.html#TEXTSEARCH-ISPELL-DICTIONARY)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-13T17:43:57.210

我知道这个问题已经有一段时间了，但我正在寻找更改 FTS 语言并找到了其他解决方案。（比下载字典更好）

在 Postgres CLI 上，您可以使用命令获取文本搜索配置列表：`\dF`

*   检查您当前的配置：

`show default_text_search_config;`

*   将您的文本搜索配置更改为另一种语言：

`set default_text_search_config = 'pg_catalog.[language]';`

# objective-c - 根据游戏状态随机生成敌人统计数据

> ID：14300877
> 
> 赞同：3
> 
> 时间：2013-01-13T05:10:43.300
> 
> 标签：objective-c, algorithm, random

在我的游戏中，我希望玩家玩游戏的次数越多，通过随机生成敌人来杀死敌人就越难，就像 iOS 上的游戏“地牢突袭”一样。这是敌人应该拥有的统计数据：

*   生命值
*   攻击
*   时间：敌人攻击前所需的秒数（时间越长，敌人越慢。）
    *   时间因攻击量而异（如果敌人真的很强，一定要慢）
*   分数：敌人被击杀时给出的分数

我认为正确的做法是确定敌人可以获得的最小统计数据，然后根据游戏状态增加它，并使用算法相应地计算它们，但我真的不知道该怎么做甚至从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:18:08.193

您可能希望从能够在特定范围内生成随机数开始。最简单的情况是在最小值和最大值之间均匀地生成随机数。随着游戏的进行，您可以更改最小值和最大值以随着统计数据的增加而增加。你的播放器。

你可以这样做，

```
NSUInteger BoundedUniformRandomNumber( NSUInteger min, NSUInteger max)
{
    NSUInteger range = max - min;
    u_int32_t randomNumber = (u_int32_t)min + arc4random_uniform((u_int32_t)range);
    return (NSUInteger)randomNumber;
} 
```

注意`arc4random_uniform`是 from `stdlib`so please include `#import <stdlib.h>`，也是`arc4random_uniform`半开的，这意味着它会返回最小值，但永远不会返回最大值。因此，您将在上述函数中生成的最大值实际上是`max - 1`.

希望这能让你开始。

# jquery - 网站动画仅在 Firefox 中正常工作

> ID：14300879
> 
> 赞同：2
> 
> 时间：2013-01-13T05:11:02.283
> 
> 标签：jquery

对此有些新意。

在一个使用 jQuery 的有许多动画的网站上工作。 [这是网站](http://pantsateria.com/linda/alphabetExperiment.html)

如果您花一点时间在 Firefox 中查看它，您将看到的正是我想要的，但如果您在 Chrome 或 Safari 中查看它，它就无法正常工作（但在两者中都显示相同的奇怪“错误” - 省略动画和计时方式关闭）。

更奇怪的是，在 IE (9) 中，一些单词的显示比预期高出大约 20 像素，但动画却没有。

此外，Chrome、Safari 和 IE 会在屏幕左侧显示缺少图像，但应该没有任何内容。

**注意**：HTML 看起来是多余的，因为所有以“L”结尾的 id 和类都用于大屏幕媒体查询 - 动画将覆盖更大的显示器 - 我没有在这个例子中包括）

PS：我读过JS中的onload函数可能很古怪，但是我尝试了很多打开代码的方法，它们都显示了相同的怪癖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:14:59.017

想通了问题。它在 js 中使用 %s（chrome 和 safari 不喜欢它们）

谢谢

# c - 如何使用管道运行命令？

> ID：14300880
> 
> 赞同：3
> 
> 时间：2013-01-13T05:11:45.193
> 
> 标签：c, unix, pipe, file-descriptor

我正在尝试使用 execvp 运行 ls|wc。所以我创建了一个管道然后 fork 来创建一个孩子。我关闭父/子中的适当（读/写）端，然后将另一端映射到标准输出/标准输入。然后我在子进程中使用 execvp 和 wc 在父进程中运行 ls。当我运行程序时它说

```
 wc:standard input:bad file descriptor.
 0 0 0
 wc: -:Bad file descriptor 
```

这是我的代码：

```
int main()
{
//int nbBytes = 0; //stream length
int pfd_1[2]; //file descriptor 
//char buffer[MAX_FILE_LENGTH]; 
char* arg[MAX_FILE_LENGTH];
pid_t processPid;

//Create a pipe

if(pipe(pfd_1) == -1)
{
    printf("Error in creating pipe");
    return 0;
}

//Create a child
processPid = fork();

if(processPid == -1)
{
    printf("Erro in fork");
    exit(1);
}   
else if(processPid == 0) //Child
{               
    //redirect read end file descriptor to standard input
    dup2(pfd_1[0],0);
    //Close the write end
    if(close(pfd_1[1] == -1))
    {
        printf("Error in closing the write end file descriptor");
        exit(1);
    }
    arg[0] = "wc";
    //arg[1] = "-l";
    arg[1] = '\0';

    if(execvp(arg[0],arg) == -1)
    {
        printf("Error in executing ls");
    }       

}
else //Parent
{               
    //redirect standard output to the file descriptor
    dup2(pfd_1[1],1);
    //Close the read end
    if(close(pfd_1[0] == -1))
    {
        printf("Error in closing the read end from parent");
        exit(1);
    }
    //Command 
    arg[0] = "ls";
    arg[1] = "/proc/1/status";
    arg[2] = '\0';

    if(execvp(arg[0],arg) == -1)
    {
        printf("Error in executing ls");
    }       
} 
```

}

知道可能出了什么问题吗？为什么它会将标准输入视为错误的文件描述符？我的理解是因为标准输入和读取结束文件描述符是别名，所以 wc -l 会读取父进程的任何输出。我是否需要进行 scanf 才能从标准输入中读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:19:41.490

问题出在这一行：

```
if(close(pfd_1[1] == -1)) 
```

您正在关闭 的结果`pfd_1[1] == -1`，这必然等于`0`（因为它们永远不会相等）。正确的行可能是：

```
if (close(pfd_1[1]) == -1) 
```

请注意，您稍后会在尝试关闭父进程中的读取端时再次执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T05:21:22.583

如果你要去`fork`孩子，你必须调用`wait()`父进程以避免“僵尸”子进程。因此，您不希望通过`exec`.

以您想要的方式设置一系列管道的一种快速方法是为您要运行的每个可执行文件派生一个子级，并将该数据读回父级中的缓冲区。然后将来自第一个子进程的数据提供给父进程分叉的新子进程。因此，每个子进程都从父进程获取数据，处理数据，然后将数据写回父进程，父进程将转换后的数据存储在缓冲区中。然后将该缓冲区馈送到下一个子节点等。缓冲区中数据的最终结果是管道的最终输出。

这是一个小伪代码：

```
//allocate buffer
unsigned char buffer[SIZE];

for (each executable to run in pipeline)
{
    pipes[2];
    pipe(pipes);

    pid_t pid = fork();

    if (pid == 0)
    {
        //setup the pipe in the child process
        //call exec
    }
    else
    {
        //setup the pipe in the parent process

        if (child executable is not the first in the pipeline)
        {
            //write contents of buffer to child process
        }

        //read from the pipe until the child exits
        //store the results in buffer

        //call wait, and maybe also check the return value to make sure the 
        //child returned successfully
        wait(NULL);

        //clean up the pipe
    }
} 
```

# java - 线程生命周期

> ID：14300882
> 
> 赞同：1
> 
> 时间：2013-01-13T05:12:00.257
> 
> 标签：java, eclipse, multithreading

1.  使用 name、mark1、mark2、mark3 和 sum 变量创建一个 Student 类。
2.  创建一个包含 4 个学生对象和一些值的 ArrayList。
3.  创建一个 MarkEvaluation 线程和 ShowMark 线程。
4.  MarkEvaluation 应该计算每个学生的总分。
5.  ShowMark 线程应显示计算的总和。
6.  使用 join 方法防止 ShowMark 线程在 MarkEvaluation 之前运行。

它不是家庭作业。正在做一些练习。这里他们要求我运行 2 个线程做不同的事情，但我不知道我们是否可以运行 2 个 run() 方法。我怎样才能执行 2 个不同的操作？对不起，我刚刚开始学习线程。这是我所做的，但它不完整。

```
import java.util.*;

class Student implements Runnable
 {
 public Student()
 {
     List<Object> list = new ArrayList<Object>();
     list.add("robin");
     list.add("ravi");
     list.add("raj");
     list.add("sam");
 }
 String name;
 int mark1=30,mark2=45,mark3=70,sum=0;

 public void run()
  {
    sum = mark1+mark2+mark3;
  }

}

public class Ch3Lu2Ex3
 {
  public static void main(String[] args) 
  {
    Student stu = new Student();
    Thread MarkEvaluation = new Thread(stu);
    MarkEvaluation.start();
    Thread ShowMark = new Thread();

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:16:12.113

你在正确的轨道上。您现在要做的是创建另一个`Runnable`类来显示结果总和，并且您需要找到某种方法来共享来自`MarkEvaluation`线程的计算总和。我建议使用[`BlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html), 因为该方法`take()`将阻塞，直到进入线程，满足您的最后一个要求而不必使用.`sum``put``join()`

明确地说，您需要 2 个实现 的类`Runnable`，1 个您已经拥有，另一个用于显示结果。您需要在它们之间共享 a ，并且您需要通过实例化 a和调用`BlockingQueue`来启动两个线程。希望这将使您走上正确的轨道，而无需简单地给您代码。`Thread``start()`

或者，您可以在线程上`ShowMark` `Runnable`保留对`Student`以及用于运行`Student`（`MarkEvaluation`上面调用）的线程的引用`join`，然后调用`getSum()`（或类似方法）从`Student`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T05:31:15.903

将其更改为

```
class Student implements Runnable {
...
}

class ShowMarkThread extends Thread {
    private final int sum;

    ShowMarkThread(int sum) {
        this.sum = sum;
    }

    @Override
    public void run() {
        System.out.println(sum);
    }
}

public class Ch3Lu2Ex3 {

    public static void main(String[] args) throws Exception {
        Student stu = new Student();
        Thread markEvaluation = new Thread(stu);
        markEvaluation.start();
        markEvaluation.join();
        new ShowMarkThread(stu.sum).start();
    }
} 
```

此外，我建议制作 2 个单独的课程 - Student 和 MarkEvaluationThread，`Student implements Runnable`看起来很糟糕

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T06:14:58.837

正如@dicarlo2 所提到的， BlockingQueue 也可以解决您的问题。但我认为你以错误的方式处理这个问题。这是我的多线程解决方案。我在 ShowMark 类中添加了一个 System.out.println 语句，以便我们知道魔法正在发挥作用。您还会时不时地看到学生乱序打印。我希望这有帮助！

```
import java.util.ArrayList;
import java.util.List;

public class Main {

  public static void main(String[] args) {
    List<Student> students = new ArrayList<Student>();
    students.add(new Student("Alice", 10, 20, 30));
    students.add(new Student("Bob", 20, 30, 40));
    students.add(new Student("Carol", 30, 40, 50));
    students.add(new Student("Robin", 40, 50, 60));
    for (Student s : students) {
      Thread mkThread = new MarkEvaluation(s);
      mkThread.start();
      //Must at least start thread before starting ShowMark. 
      Thread smThread = new ShowMark(s, mkThread);
      smThread.start();
    }
  }

  private static class Student {
    String name;
    double mark1, mark2, mark3, sum;

    public Student(String name, double mark1, double mark2, double mark3) {
      this.name = name;
      this.mark1 = mark1;
      this.mark2 = mark2;
      this.mark3 = mark3;
    }
  }

  private static class MarkEvaluation extends Thread {
    Student stu;
    public MarkEvaluation(Student stu) {
      this.stu = stu;
    }
    @Override
    public void run() {
      super.run();
      stu.sum = stu.mark1 + stu.mark2 + stu.mark3;
    }
  }

  private static class ShowMark extends Thread {
    Thread thread;
    Student stu;
    public ShowMark(Student stu, Thread thread) {
      this.stu = stu;
      this.thread = thread;
    }
    @Override
    public void run() {
      super.run();
      // A thread is alive if it has been started and has not yet died.
      while (thread.isAlive()) {
        try {
          System.out.println("Waited for thread: " + thread.toString() + " to finish.");
          thread.join();
        } catch (InterruptedException e) {
          e.printStackTrace();
        }
      }
      System.out.println(stu.name + " " + stu.sum);
    }
  }

} 
```

# javascript - Backbone.js 模型未传递给视图

> ID：14300884
> 
> 赞同：1
> 
> 时间：2013-01-13T05:13:04.920
> 
> 标签：javascript, backbone.js, backbone-boilerplate

我从backbone.js 开始，用backbone-boilerplate 构建我的第一个项目。

我有一个名为 Navitem 的模块，其视图名为`Sidebar`：

```
Navitem.Views.Sidebar = Navitem.Views.Layout.extend({
    template: "navitem/sidebar",
    tagName: 'ul',
    beforeRender: function()
    {
      var me = this;
      this.options.navitems.each(function(navitem)
      {
        //insertView from Layout datatype
        me.$el.append(new Navitem.Views.Item({
          model: navitem //select the 'ul' in sidebar view and append an Item with model navitem
        }).render().el);
      });
      return this;
    }
  }); 
```

构建侧边栏时，会将包含许多`Navitem.Model`' 的集合传入其中。调试后，`model:navitem`似乎工作正常并将正确的`navitem`模型传递给`new Navitem.Views.Item({...})`. 该类看起来像：

```
Navitem.Views.Item = Navitem.Views.Layout.extend({ 
    tagName: 'li',
    template: 'navitem/default'
    events: {
      click: "navRoute"
    },
    navRoute : function()
    {
      app.router.go(this.model.get('target'));
      return this;
    }
  }); 
```

模板看起来像`<a href="#"><%= model.get('label') %></a>`.

出于某种原因，当我调用`Item.render()`第一个代码块时，它会抱怨`model`视图中未定义的内容。我似乎无法弄清楚为什么会这样。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:25:14.990

可能与此处回答的内容有关：[Backbone.js：元素属性中的模板变量不起作用](https://stackoverflow.com/questions/7665511/backbone-js-template-variable-in-element-attribute-doesnt-work)

您需要将模型作为纯 JSON 传递给您的模板（除非您使用的是其他版本？）

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:57:37.463

我正在使用 Backbone Boilerplate 和 Backbone LayoutManager 编写的程序中做类似的事情。

尝试向您的 Navitem.Views.Item 视图添加序列化函数：

```
// provide data to the template
serialize: function() {
    return this.model.toJSON();
} 
```

然后在 Navitem.Views.Sid​​ebar 的 beforeRender 函数中：

```
beforeRender: function(){
  _.each(this.options.navitems.models, function(model){
    var view = new Navitem.Views.Item({model: model});
    this.insertView(view);
  }, this);
} 
```

并且 navitem/default 模板可能如下所示：

```
<%= label %> 
```

这是未经测试的代码（使用您的视图和集合），但这样做对我有用。

# jquery - jQuery $.value on select > 没有值属性的选项

> ID：14300895
> 
> 赞同：11
> 
> 时间：2013-01-13T05:15:03.420
> 
> 标签：jquery, html

鉴于此 HTML 代码：

```
<select id="menu">
    <option>hi</option>
    <option>bye</option>
</select> 
```

这个 jQuery 代码：

```
$("#menu option").first().attr("value") 
```

返回`hi`，即使`value`菜单中的第一个选项没有属性。

如果`<option>`具有`value`属性，`value`则按预期返回该属性。

我怎样才能让上述代码的返回值是`undefined`/我可以识别的其他东西？或者我可以检查是否`value`设置了属性，如果没有则只运行上面的代码？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-13T05:22:58.617

使用`:not([attr])`选择器：

```
$("#menu option:not([value])"); 
```

[http://jsfiddle.net/userdude/NQm54/](http://jsfiddle.net/userdude/NQm54/)

我还验证了更改后，`[value]`仍然报告为未设置，因此您继续收到相同的两个没有`value`属性的元素。

```
$('#menu').change(function(){
  console.log($(this).val());
  console.log($("#menu option:not([value])"));
}); 
```

[http://jsfiddle.net/userdude/NQm54/2/](http://jsfiddle.net/userdude/NQm54/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T05:36:37.953

```
$("#menu option:eq(0)").not("[value]").length == 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T05:19:31.153

如果未设置 value 属性，则该值默认为文本值。只需将属性值设置为某个值，以便您可以识别它，例如一个空字符串，如下所示

```
<select id="menu">
    <option value="">hi</option>
    <option>bye</option>
</select> 
```

然后这`$("#menu option").first().attr("value")`将返回一个空字符串

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T05:35:56.440

```
var option = document.getElementById("menu").options[0];
if (option.getAttribute("value") !== null) {
console.log("Has value: " + option.value);
 }
else {
console.log("Doesn't have a value.");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-22T11:13:16.457

用这个`$("option:selected", $("#menu")).attr("value");`

如果选择的选项没有任何 value 属性，将返回 undefined ，您可以通过 !foo 捕获它

# r - 从R中的数据框中提取复杂子集

> ID：14300897
> 
> 赞同：4
> 
> 时间：2013-01-13T05:15:18.443
> 
> 标签：r, dataframe

我有一个像这样的数据集：

```
testdata <- read.table(header=T, text='
patids labels dbins vprobs Response 
16186 SUP0         0.0         100        1 
16186 SUP0         0.2         99        1 
16186 SUP0         0.4         95        1 
16186 SUP0         0.6         99        1 
16186 SUP0         0.8         50        1 
16186 SUP0         1.0         0        1 
18185 SUP0         0.0         100        0 
18185 SUP0         0.2         100        0 
18185 SUP0         0.4         5        0 
18185 SUP0         0.6         2        0 
18185 SUP0         0.8         0        0 
54234 INF0         0.0         100        1 
54234 INF0         0.2         95        1 
54234 INF0         0.4         90        1 
54234 INF0         0.6         30        1 
54234 INF0         0.8         0        1 
18185 INF0         0.0         100        0 
18185 INF0         0.2         20        0 
18185 INF0         0.4         10        0 
18185 INF0         0.6         5        0 
18185 INF0         0.8         3        0 
18185 INF0         1.0         0        0 
16186 INF0         0.0         100        1 
16186 INF0         0.2         100        1 
16186 INF0         0.4         70        1 
16186 INF0         0.6         60        1 
16186 INF0         0.8         50        1 
16186 INF0         1.0         0        1 
54234 SUP1         0.0         100        1 
54234 SUP1         0.2         95        1 
54234 SUP1         0.4         90        1 
54234 SUP1         0.6         30        1 
54234 SUP1         0.8         0        1 
18185 SUP1         0.0         100        0 
18185 SUP1         0.2         50        0 
18185 SUP1         0.4         0        0
16186 SUP1         0.0         100        1 
16186 SUP1         0.2         100        1 
16186 SUP1         0.4         40        1 
16186 SUP1         0.6         10        1 
16186 SUP1         0.8         22        1 
16186 SUP1         1.0         0        1 ') 
```

现在，对于每个“标签”，即 SUP0、SUP1 等，我想获得变量 dbins 的平均值（平均值接管了所有唯一的“patids”变量。我面临的问题是“dbins”并不是全部每个“patids”的长度相同。在采取这种方式之前，有没有办法用 NA 或 0 填充？我的预期输出必须是这样的：

用于 SUP0

```
labels dbins dbins.16186 dbins.18185
SUP0         0.0         0.0 
SUP0         0.2         0.2          
SUP0         0.4         0.4          
SUP0         0.6         0.6          
SUP0         0.8         0.8          
SUP0         1.0         NA 
```

对于 INF0

```
labels      dbins.54234 dbins.18185 dbins.16186
INF0         0.0         0.0        0.0    0.0    
INF0         0.2         0.2        0.0    0.2   
INF0         0.4         0.4        0.0    0.4   
INF0         0.6         0.6        0.0    0.6   
INF0         0.8         0.8        0.8    0.8   
INFO         NA          1.0        1.0    1.0 
```

...这样我就可以对列进行平均了。

我一直在尝试使用 ddply 和类似的功能，但我无法获得这种特定的输出格式。有人可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T05:55:38.153

你想要的答案可能是两件事之一。

1.  您建议的确切输出。

2.  每个类别的手段（您提供的输出只是到达那里的一种方法）

我将使用 plyr 和 reshape2，但毫无疑问，@mnel 很快就会提供 data.table 解决方案。

### 1.你建议的输出

这里的问题是您有多个包含多个元素的组。[所以首先，我们需要对元素进行分组（在这里](https://stackoverflow.com/a/12831989/1465387)使用@Maiasaura 的解决方案）。

```
library(plyr)
testgroups <- ddply(testdata, .(labels, patids), function(x) { x$group <- 1:nrow(x); x }) 
```

然后我们可以适当地重塑它们：

```
library(reshape2)
testreshape <- dcast(testgroups[,c("labels", "patids", "dbins", "group")], labels+group~patids, value.var="dbins")

   labels group 16186 18185 54234
1    INF0     1   0.0   0.0   0.0
2    INF0     2   0.2   0.2   0.2
3    INF0     3   0.4   0.4   0.4
4    INF0     4   0.6   0.6   0.6
5    INF0     5   0.8   0.8   0.8
6    INF0     6   1.0   1.0    NA
7    SUP0     1   0.0   0.0    NA
8    SUP0     2   0.2   0.2    NA
9    SUP0     3   0.4   0.4    NA
10   SUP0     4   0.6   0.6    NA
11   SUP0     5   0.8   0.8    NA
12   SUP0     6   1.0    NA    NA
13   SUP1     1   0.0   0.0   0.0
14   SUP1     2   0.2   0.2   0.2
15   SUP1     3   0.4   0.4   0.4
16   SUP1     4   0.6    NA   0.6
17   SUP1     5   0.8    NA   0.8
18   SUP1     6   1.0    NA    NA 
```

从这里你可以使用类似的东西`testreshape[testreshape$labels=="INF0",]`

### 2.每个类别的手段

这要简单得多：

```
library(plyr)
testmeans <- ddply(testdata, .(labels, patids), summarise, mean=mean(dbins, na.rm=TRUE))

  labels patids mean
1   INF0  16186  0.5
2   INF0  18185  0.5
3   INF0  54234  0.4
4   SUP0  16186  0.5
5   SUP0  18185  0.4
6   SUP1  16186  0.5
7   SUP1  18185  0.2
8   SUP1  54234  0.4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T05:28:17.000

只需使用`mean`直接获取每个类别的`tapply`，这是为不规则数组制作的：

```
tapply(testdata$dbins, interaction(testdata$labels, testdata$patid, drop=TRUE), FUN=mean)
## INF0.16186 SUP0.16186 SUP1.16186 INF0.18185 SUP0.18185 SUP1.18185 INF0.54234 SUP1.54234 
##        0.5        0.5        0.5        0.5        0.4        0.2        0.4        0.4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T08:51:13.713

> 我想获得变量 dbins 的平均值（平均值接管了所有唯一的“patids”变量

使用`data.table`

```
R) library(data.table)
R) testdata=as.data.table(testdata)
R) testdata
    patids labels dbins vprobs Response
 1:  16186   SUP0   0.0    100        1
 2:  16186   SUP0   0.2     99        1
 3:  16186   SUP0   0.4     95        1
---
40:  16186   SUP1   0.6     10        1
41:  16186   SUP1   0.8     22        1
42:  16186   SUP1   1.0      0        1
    patids labels dbins vprobs Response

R) testdata[,list(dbins=mean(dbins)),by="patids"]
   patids dbins
1:  16186   0.5
2:  18185   0.4
3:  54234   0.4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T19:27:22.257

直接用于手段：

```
> require(data.table)
> testdata <- as.data.table(testdata)
> testdata[, mean(dbins), by=c("patids","labels")]
   patids labels  V1
1:  16186   SUP0 0.5
2:  18185   SUP0 0.4
3:  54234   INF0 0.4
4:  18185   INF0 0.5
5:  16186   INF0 0.5
6:  54234   SUP1 0.4
7:  18185   SUP1 0.2
8:  16186   SUP1 0.5
> 
```

# mysql - 无法调整mysql超时

> ID：14300903
> 
> 赞同：1
> 
> 时间：2013-01-13T05:16:46.667
> 
> 标签：mysql, sql

我做了以下事情：

```
SET GLOBAL wait_timeout = 5;
SET SESSION wait_timeout = 5;
SET GLOBAL interactive_timeout = 5;
SET SESSION interactive_timeout = 5; 
```

但是当我运行一个耗时的查询时，它仍然会在 600 秒时失去连接 - 而不是 5 秒。我在同一个 MySQL Workbench 选项卡中一个接一个地进行查询，所以它应该都在同一个会话中。

我也尝试过更新`C:\Program Files (x86)\MySQL\MySQL Server 5.1\my.ini`和添加`wait_timeout=5`......什么都没有。

有任何想法吗？

另外，为什么，当一个耗时的查询在一个选项卡中的 127.0.0.1 上运行时，我不能`SHOW FULL PROCESSLIST`在另一个选项卡中执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:23:53.203

`wait_timeout`仅控制连接在服务器关闭之前可以*空闲多长时间。*如果您正在执行一个需要很长时间的查询，那么该变量与您的问题无关。

MySQL 没有内置任何东西会在设定的时间后终止活动运行的查询。所以还有其他原因导致这种情况发生。你需要提供更多信息。

当您说“它正在关闭连接”时，*究竟*会发生什么？您是否在程序中收到错误，如果是，那是什么？你是如何运行程序的？

# cocoa - 当视图由 NSViewController 提供时，如何将自动布局与基于视图的 NSTableView 一起使用？

> ID：14300905
> 
> 赞同：14
> 
> 时间：2013-01-13T05:17:21.830
> 
> 标签：cocoa, nstableview, autolayout, nsviewcontroller

我制作了以下示例应用程序来说明我的问题。

*   左视图是占位符视图（在 Interface Builder 中添加）。当应用程序加载时，我添加了一个由 NSViewController 管理的子视图。NSViewController 绘制不同颜色的矩形，每个矩形都是一个 NSView，这些颜色视图的布局由约束管理，以编程方式创建并添加到`-loadView`控制器的方法中。

*   右视图是一个 NSTableView（在 Interface Builder 中添加）。当应用程序加载时，我使用相同的 NSViewController 类为表视图提供视图（仅添加一行）。

当我将子视图添加到占位符视图时，我还添加了两个额外的约束，

```
[_placeholderView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[CTRL_VIEW]|" options:0 metrics:nil views:views]];
[_placeholderView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[CTRL_VIEW]|" options:0 metrics:nil views:views]]; 
```

这些约束将子视图的框架设置为等于父视图的边界。一切都很好。

但是，当我使用委托方法为 NSTableView 提供视图时`-tableView:viewForTableColumn:row:`，该视图尚未添加到表中。因此它没有超级视图，因此不能（还）将约束添加到视图中。这就是为什么表格视图中的视图与表格视图单元格的边界不同的原因。

所以我的问题是如何向我提供给表视图的视图添加约束？表视图添加后可以再次访问视图吗？这似乎有点hack-ish。

![使用自动布局的两个视图。](../Images/840367bb5c14c959ed97fc34d0364aa5.png)

AppDelegate.h 的源代码，

```
#import <Cocoa/Cocoa.h>
@class BlahViewController;

@interface AppDelegate : NSObject <NSApplicationDelegate, NSTableViewDataSource, NSTableViewDelegate>

@property (assign) IBOutlet NSWindow *window;

/* Left view controller and place holding view */
@property (strong) BlahViewController *viewController;
@property (weak) IBOutlet NSView *placeholderView;

/* Right view (which is an NSTableView) */
@property (weak) IBOutlet NSTableView *tableView;

@end 
```

和 AppDelegate.m，

```
#import "AppDelegate.h"
#import "BlahViewController.h"

@interface AppDelegate ()
@property NSMutableArray *tableData;
@end

@implementation AppDelegate

- (id)init
{
    self = [super init];
    if (self) {

        _tableData = [[NSMutableArray alloc] init];
        [_tableData addObject:[[BlahViewController alloc] initWithNibName:@"BlahViewController" bundle:nil]];
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints"];
    }
    return self;
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {

    /* Add a managed subview to the place holder view*/
    _placeholderView.layer.backgroundColor = CGColorCreateGenericGray(0.5, 1.0);
    _viewController = [[BlahViewController alloc] initWithNibName:@"BlahViewController" bundle:nil];
    [_viewController.view setFrame:_placeholderView.bounds];
    [_placeholderView addSubview:_viewController.view];

    /* Additional constraints so the managed subview resizes with the place holder view */
    NSDictionary *views = @{ @"CTRL_VIEW" : _viewController.view };
    [_placeholderView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[CTRL_VIEW]|" options:0 metrics:nil views:views]];
    [_placeholderView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[CTRL_VIEW]|" options:0 metrics:nil views:views]];

}

-(NSInteger) numberOfRowsInTableView:(NSTableView *)tableView
{
    return [_tableData count];
}

-(id) tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    return [_tableData[row] view];
}

-(CGFloat) tableView:(NSTableView *)tableView heightOfRow:(NSInteger)row {
    return 150.;
}

@end 
```

**更新@jrturton**

`-(void) tableView:(NSTableView *)tableView didAddRowView:(NSTableRowView *)rowView forRow:(NSInteger)row`在工作中添加约束。

![添加了约束。](../Images/7392b43c836b8d3271b54cc5e95aa3f8.png)

**@swalkner**

我添加的约束非常基本，

```
-(void) tableView:(NSTableView *)tableView didAddRowView:(NSTableRowView *)rowView forRow:(NSInteger)row {
NSView *view = [rowView viewAtColumn:0];
NSDictionary *views = NSDictionaryOfVariableBindings(view);
[view.superview addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-12-[view]-12-|" options:0 metrics:nil views:views]];
[view.superview addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-12-[view]-12-|" options:0 metrics:nil views:views]];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T07:20:55.263

您可以在将视图添加到委托方法中的表后访问该视图`tableView:willDisplayCell:forTableColumn:row:`。此时您可以添加约束，但您可能需要注意不要一遍又一遍地添加相同的约束。

正如您自己发现的那样，该方法`tableView:didAddRowView:forRow:`将是一个更好的地方，因为每个新视图只会调用一次。

您也可以通过在视图上设置灵活的宽度自动调整掩码而不是任何水平尺寸约束来实现这一点。在添加单元格视图时，表格可能会考虑到这一点。如果你小心的话，你可以混合和匹配自动调整大小和约束。

我知道一些 iOS，一些 Autolayout，只有一点 OS X，所以我不能给你更多。我们不必担心 iOS 领域的单元格宽度会发生很大变化！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-06T20:01:43.423

macOS 10.13 似乎包含了这个开箱即用的功能`usesAutomaticRowHeights`，但在 Cocoa 文档中还没有解释：

[https://developer.apple.com/documentation/appkit/nstableview/2870126-usesautomaticrowheights](https://developer.apple.com/documentation/appkit/nstableview/2870126-usesautomaticrowheights)

此外，这在 IB 中作为单元格视图高度的配置设置。

我无法验证，但也许有人可以。

# ios - 无法更新从未插入的对象

> ID：14300909
> 
> 赞同：11
> 
> 时间：2013-01-13T05:17:59.937
> 
> 标签：ios, core-data, afincrementalstore

我创建一个类别对象并保存它：

```
 NSManagedObjectContext *managedObjectContext = [[FTAppDelegate sharedAppDelegate] managedObjectContext];

    _category = (Category *)[NSEntityDescription
                             insertNewObjectForEntityForName:@"Category"
                             inManagedObjectContext:managedObjectContext];

    NSError *error = nil;
    [managedObjectContext save:&error];
    if (error) {
        NSLog(@"error saving: %@",error);
    } 
```

然后编辑类别对象的名称并再次保存。

```
 _category.name = _nameTextField.text;

    NSManagedObjectContext *managedObjectContext = [[FTAppDelegate sharedAppDelegate] managedObjectContext];

    NSError *error = nil;
    [managedObjectContext save:&error];
    if (error) {
        NSLog(@"error saving: %@",error);
    } 
```

并得到这个错误：

```
 2013-01-12 17:53:11.862 instacat[7000:907] Unresolved error Error Domain=NSCocoaErrorDomain Code=134030 "The operation couldn’t be completed. (Cocoa error 134030.)" UserInfo=0x2027b300 {NSAffectedObjectsErrorKey=(
"<Category: 0x1ed43cf0> (entity: Category; id: 0x1ed52970 <x-coredata://68E5D7B6-D461-4962-BC07-855349DB3263-7000-00000141BAB4C399/Category/tE8AB2F2E-C14C-4E93-8343-CC245B7726622> ; data: {\n    categoryId = nil;\n    isPrivate = 0;\n    name = techies;\n    users =     (\n    );\n})"
), NSUnderlyingException=Cannot update object that was never inserted.}, {
    NSAffectedObjectsErrorKey =     (
         "<Category: 0x1ed43cf0> (entity: Category; id: 0x1ed52970 <x-coredata://68E5D7B6-D461-4962-BC07-855349DB3263-7000-00000141BAB4C399/Category/tE8AB2F2E-C14C-4E93-8343-CC245B7726622> ; data: {\n    categoryId = nil;\n    isPrivate = 0;\n    name = techies;\n    users =     (\n    );\n})"
    );
     NSUnderlyingException = "Cannot update object that was never inserted.";
} 
```

感谢您的时间和考虑。

我正在使用 AFIncrementalStore。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:24:43.747

像这样的东西怎么样：

```
self.category.name = self.nameTextField.text;

NSManagedObjectContext *managedObjectContext = [[FTAppDelegate sharedAppDelegate] managedObjectContext];

if(![self.category isInserted])
{
    [managedObjectContext insertObject:self.category];
}

NSError *error = nil;
[managedObjectContext save:&error];
if (error) {
    NSLog(@"error saving: %@",error);
} 
```

基本上检查对象是否已经插入，如果没有，插入它然后保存上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T20:29:41.123

我有同样的错误，但不同的和罕见的情况，它在近 100 次尝试中发生一次。在下面找到我的问题：

我在核心数据模型中有 2 个 NSManagedObjects： 1- Lead 2- LeadAttirbute Lead 与 LeadAttribute 有 1-M 关系。

有一个表单可以输入潜在客户并在提交潜在客户后刷新（创建新潜在客户）表单。如果我继续提交线索，那么在某个阶段，[managedObjectContext save:&error]; 开始给出以下错误：

Domain=NSCocoaErrorDomain Code=134030 "操作无法完成。(Cocoa 错误 134030。)" UserInfo=0x1f251740 {NSAffectedObjectsErrorKey=(" (entity: LeadInfoAttribute; id: 0x1f2eb920 ; data: {\n attributeId = 0;\n Lead = nil;\n optional = nil;\n orderId = 0;\n title = nil;\n value = Bjjbjp;\n})" ), **NSUnderlyingException=无法更新从未插入的对象。**}

并且它一直给出相同的错误，直到我不终止并重新启动应用程序。发生此错误后，我无法更新核心数据模型中的任何内容，所以我的问题是：

1-我们可以消除核心数据的故障状态吗？即在再次进行保存调用之前捕获并删除造成问题的对象。

2-这个问题的可能原因是什么？由于它非常罕见，并且无法每次都复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T09:08:32.380

您的对象正在丢失 managedObjectContext。要么使用

```
self.managedObjectContext 
```

或重新获取对象

```
[[FTAppDelegate sharedAppDelegate] managedObjectContext] 
```

并编辑重新获取的对象，然后保存它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T13:11:49.257

当你更新一个对象时，你不能使用 insertNewObjectForEntityForName，你需要先保存你的对象，然后调用类似的东西

```
 [self.managedObjectContext refreshObject:_category mergeChanges:YES] 
```

然后再次使用 managedObjectContext 保存。

这是直接 SQL 作为“INSERT”和“UPDATE”的区别。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-24T14:04:18.400

我刚刚遇到了这个问题，就我而言，问题如下：

*   1) 在上下文 A 中创建新的托管对象
*   2) 保存上下文 A
*   3) 通过 objectID 从上下文 B 中检索此对象
*   4) 对托管对象进行更改并保存上下文 B

通常不会有问题，但在这种情况下，上下文 A 是子上下文，因此不会保存到持久存储（仅保存到父上下文，而不是上下文 B）。因此，当从上下文 B 获取托管对象时，上下文没有此对象。进行更改时，上下文无论如何都会尝试保存它们……这就是发生此错误的时候。在某些情况下（正如@Trausti Thor 提到的） refreshObject:mergeChanges: 方法可能会有所帮助（它将数据传递到另一个上下文）。

在您的情况下，我将检查是否：

1) 来自 [[FTAppDelegate sharedAppDelegate] managedObjectContext] 的托管对象上下文总是返回相同的上下文

2）当您保存类别时，检查它是否真的保存到持久存储（self.category.objectID.isTemporaryID == NO）

注意：第二点更重要，因为如果你仔细看，你的类别对象仍然有临时的 objectID，这意味着它没有被持久化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T10:04:51.323

我认为正在发生的事情是你没有得到正确的 NSManagedObjectContext。

把它想象成一个会话。因此，当您更新时，您没有获得正确的会话，因此您的对象不存在。

在进行第二次保存之前，请尝试在该 NSManagedObjectContext 上找到您的对象。如果您需要进一步的帮助，请描述创建和更新之间发生的情况。

获取错误的 NSManagedObjectContext 可能是由于 AppDelegate 上的错误代码或从主线程以外的另一个线程访问。

# ruby-on-rails-3 - 嵌入的 ruby 代码如何生成 HTML？

> ID：14300913
> 
> 赞同：0
> 
> 时间：2013-01-13T05:18:35.980
> 
> 标签：ruby-on-rails-3

```
 <% flash.each do |key, value| %>
  <div class="alert alert-<%= key %>"><%= value %></div>
<% end %> 
```

上面的代码如何产生如下的 HTML？请解释一下。

```
<div class="alert alert-success">Welcome to the Sample App!</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:29:16.717

嵌入的 ruby​​ 代码不会生成 HTML。它只是嵌入到 HTML 中的 o/p 字符串。里面的任何东西：

```
<%= "text" %> 
```

进入输出。

在你的情况下

```
<div class="alert alert-<%= key %>"><%= value %></div> 
```

关键变量是一个字符串“成功”

value 变量是一个字符串“欢迎使用示例应用程序！”

因此，关键变量的值被替换为“成功”等等。

# iis - 严重：getRealPathFromConn 中的错误

> ID：14300915
> 
> 赞同：6
> 
> 时间：2013-01-13T05:19:05.050
> 
> 标签：iis, coldfusion, coldfusion-10

目前我正在用我们的应用程序调试一个看似随机的错误。我将尝试提供尽可能多的细节。基本上过了一会儿，我们服务器上的一个应用程序池就会停止。我必须启动它，或者有时，重新启动 Coldfusion 或更糟的机器才能让事情再次运行。

服务器日志表明由于 IIS 中的 Rapid Fail Succession 事件，池已停止。（应用程序在短时间内提供 X 个错误，因此 IIS 停止应用程序）

通过 ColdFusion 错误日志，我在 IIS 错误停止我的池时得到了这个错误日志。

> 严重：getRealPathFromConn java.net.SocketException 中的错误：对等方重置连接：java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92) 处 java.net.SocketOutputStream.socketWrite0(Native Method) 处的套接字写入错误.SocketOutputStream.write(SocketOutputStream.java:124) at org.apache.coyote.ajp.AjpProcessor.getRealPathFromServer(AjpProcessor.java:391)...等等

如果您真的需要完整的跟踪，我可以提供它，但它很长。我不确定 getRealPathFromConn 是关于什么的。我试过谷歌搜索，但还没有得出结论。在跟踪中，它们确实导致了各种应用程序中的不同文件，但有问题的行似乎彼此没有任何共同之处。

任何关于可能是什么原因或我接下来应该看哪里的想法都会有很大帮助。

编辑：我忘了说，我“相信”这是从星期一开始的。星期一之前唯一真正改变的是以下内容。

我们有一个应用程序结构：

```
root/app1/application.cfc
root/app2/application.cfc
root/app3/application.cfc
root/app3/website1
root/app3/website2
root/app3/website3 
```

我改变了结构，所以两个网站都有自己的 application.cfc，因为我们正在慢慢地改变网站的工作方式。我现在正在其中两个上进行测试。由于我进行了更改，因此 apppool 不断使 app1 的应用程序池崩溃。不是任何网站，但我觉得它可能是相关的。

**更新**将 Coldfusion 更新到最新版本。(10,0,7,283649) 系统运行了大约一周，今天早上崩溃了。

当时的 Coldfusion-error.log：

```
Jan 25, 2013 8:09:11 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in     production environments was not found on the java.library.path:     C:\\ColdFusion10\\cfusion\lib;C:\\ColdFusion10\\cfusion\jintegra\bin;C:\\ColdFusion10\\cfus ion\jintegra\bin\international;C:\\ColdFusion10\\cfusion\lib\oosdk\classes\win
Jan 25, 2013 8:09:12 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8012"]
Jan 25, 2013 8:09:12 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jan 25, 2013 8:09:12 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.23
Jan 25, 2013 8:09:21 AM org.apache.catalina.core.ApplicationContext log
INFO: ColdFusionStartUpServlet: ColdFusion: Starting application services
Jan 25, 2013 8:09:21 AM org.apache.catalina.core.ApplicationContext log
INFO: ColdFusionStartUpServlet: ColdFusion: VM version = 20.4-b02
Jan 25, 2013 8:09:29 AM org.apache.catalina.core.ApplicationContext log
INFO: CFMxmlServlet: Macromedia Flex Build: 87315.134646
Jan 25, 2013 8:09:35 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8012"]
Jan 25, 2013 8:09:35 AM com.adobe.coldfusion.launcher.Launcher run
INFO: Server startup in 25362 ms
Jan 25, 2013 8:10:04 AM org.apache.coyote.ajp.AjpProcessor getRealPathFromServer
SEVERE: Error in getRealPathFromConn
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
at org.apache.coyote.ajp.AjpProcessor.read(AjpProcessor.java:319)
at org.apache.coyote.ajp.AjpProcessor.readMessage(AjpProcessor.java:445)
at org.apache.coyote.ajp.AjpProcessor.readString(AjpProcessor.java:425)
at org.apache.coyote.ajp.AjpProcessor.getRealPathFromServer(AjpProcessor.java:407)
at org.apache.coyote.ajp.AbstractAjpProcessor.getRealPath(AbstractAjpProcessor.java:1154)
at org.apache.naming.resources.FileDirContext.doGetRealPath(FileDirContext.java:198)
at org.apache.naming.resources.BaseDirContext.getRealPath(BaseDirContext.java:412)
at org.apache.catalina.core.StandardContext.getRealPath(StandardContext.java:4475)
at org.apache.catalina.core.ApplicationContext.getRealPath(ApplicationContext.java:414)
at org.apache.catalina.core.ApplicationContextFacade.getRealPath(ApplicationContextFacade.java:335)
at coldfusion.runtime.ServletContextWrapper.doGetRealPath(ServletContextWrapper.java:179)
at coldfusion.runtime.ServletContextWrapper._doGetRealPath(ServletContextWrapper.java:116)
at coldfusion.runtime.ServletContextWrapper.getRealPath(ServletContextWrapper.java:98)
at coldfusion.runtime.TemplateProxyFactory.getFullName(TemplateProxyFactory.java:1092)
at coldfusion.runtime.TemplateProxyFactory.resolveName(TemplateProxyFactory.java:202)
at coldfusion.runtime.TemplateProxyFactory.resolveName(TemplateProxyFactory.java:159)
at coldfusion.runtime.TemplateProxyFactory.resolveFile(TemplateProxyFactory.java:120)
at coldfusion.cfc.CFCProxy.<init>(CFCProxy.java:138)
at coldfusion.cfc.CFCProxy.<init>(CFCProxy.java:84)
at coldfusion.runtime.AppEventInvoker.<init>(AppEventInvoker.java:64)
at coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:226)
at coldfusion.filter.RequestMonitorFilter.invoke(RequestMonitorFilter.java:48)
at coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:40)
at coldfusion.filter.PathFilter.invoke(PathFilter.java:112)
at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:94)
at coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38)
at coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
at coldfusion.filter.CachingFilter.invoke(CachingFilter.java:62)
at coldfusion.CfmServlet.service(CfmServlet.java:219)
at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)
at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:414)
at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:204)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

GetRealPathFromConn 异常一个接一个地通过大约 20 次左右。在事件查看器中，在 IIS 关闭池之前我当然有 5 个警告：

```
A process serving application pool 'domain.com' terminated unexpectedly. The process id was '3732'. The process exit code was '0xff'.
A process serving application pool 'domain.com' suffered a fatal communication error with the Windows Process Activation Service. The process id was '3052'. The data field contains the error number.
A process serving application pool 'domain.com' terminated unexpectedly. The process id was '7972'. The process exit code was '0xff'.
A process serving application pool 'domain.com' suffered a fatal communication error with the Windows Process Activation Service. The process id was '4736'. The data field contains the error number.
A process serving application pool 'domain.com' terminated unexpectedly. The process id was '8016'. The process exit code was '0xff'.
Application pool 'domain.com' is being automatically disabled due to a series of failures in the process(es) serving that application pool. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:52:14.290

因此，此问题与已修复的 CF 错误“相关”。但是，我们仍然遇到问题，但此错误不再出现在日志中。

我们认为我们遇到的问题与 Coldfusion 使用的 IIS/Tomcat 连接器有关。我将关闭它，因为它已在修补程序中修复，但相关问题仍然存在。

我不知道如何将其迁移到我的 ServerFault 问题：[https ://serverfault.com/questions/487643/tomcat-cf10-iis7-5-connector-tuning-help-503-errors](https://serverfault.com/questions/487643/tomcat-cf10-iis7-5-connector-tuning-help-503-errors)

# php - 表单提交后刷新页面上的值

> ID：14300916
> 
> 赞同：0
> 
> 时间：2013-01-13T05:19:08.983
> 
> 标签：php, html

因此，为了大大简化这一点，我没有使用我的实际代码，而只是试图传达我正在尝试做的事情，即使用更多数据。假设我有一个值为 1 的外部文本文件，该值为 100。我使用

```
$data=file('text.txt'); 
```

引入该值并将其显示在页面上。

```
echo "<p> Amount: $data[0] </p>"; 
```

然后我有一个表单提交按钮，当我单击它时，它将减小该值并通过显示 99 来修改文本文件。当我单击提交时，我有一个 print_r($data) 显示存储在文本文件中的修改值 99 但是该页面仍然显示 100。该值仅在我完全刷新页面后更新，我希望它是这样，当我单击提交时该值更新。我希望这是有道理的，我会尽力澄清。

编辑：我的表单操作只是当前页面 index.php

```
<form action='index.php' method='POST'> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:24:03.087

使用您提供的信息来解决您的问题，当页面提交时，您可以再次从 txt 文件中检索数据并将其显示在页面中。如果您有一个提交按钮，它显然会刷新页面。所以不会有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T05:25:29.527

一旦页面加载完毕，PHP 就完成了它的工作。

在您的情况下，仅在页面本身刷新后新值才会显示在页面上。如果不刷新页面，就无法更改显示。

如果您想在不刷新页面本身的情况下以交互方式更改显示文本的值，则必须使用 Javascript。

* * *

...但是如果即使在您提交后显示的值也没有更新（并且仅在您点击刷新后才更新），那么您可能会`echo`在更新文本文件之前调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T05:26:43.520

似乎您已经可以成功更新文件但无法在页面上重新显示该值......一旦页面刷新，它应该重新获取该值并将新值放入您的字段中。如果您想在不刷新的情况下执行此操作，可以使用 AJAX 执行此操作，如下所示：

```
<script type="text/javascript">
function changeText(){
        var newint = <?php echo $data[0]; ?>;
    document.getElementById('newvalue').innerHTML = newint;
}
</script>
<p id='newvalue'></p> 
<input type='button' onclick='changeText()' value='Change Text'/> 
```

# ruby-on-rails - 在全新安装的导轨和设计上获取错误未定义方法“可重新确认”

> ID：14300922
> 
> 赞同：0
> 
> 时间：2013-01-13T05:20:08.777
> 
> 标签：ruby-on-rails, devise

我有一个全新的 Rails 安装和设计。

我跑：

```
rails g devise:install

rails g devise user 
```

我注册并导航到 /users/edit 并收到错误消息

```
undefined method `reconfirmable' for #<Class:0x007ff836033398>

6:   <div class="form-inputs">
7:     <%= f.input :email, :required => true, :autofocus => true %>
8: 
9:     <% if resource.class.reconfirmable && resource.unconfirmed_email.present? %>
10:       <p>Currently waiting confirmation for: <%= resource.unconfirmed_email %></p>
11:     <% end %>
12: 
```

知道我在这里做错了什么吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:11:41.017

如果没有，请升级到 2.2.2，并且不要忘记重新生成视图

[github上的问题](https://github.com/plataformatec/devise/issues/2212)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:13:20.880

在您的用户表中检查您是否有该列`:unconfirmed_email`

此列是设计所必需的，

或者，如果您是全新安装，只需取消注释以下部分`db/xxx_devise_user_create.rb`

```
## Confirmable
# t.string   :confirmation_token
# t.datetime :confirmed_at
# t.datetime :confirmation_sent_at
# t.string   :unconfirmed_email # Only if using reconfirmable 
```

# c# - 如何重置 ICSharpCode.AvalonEdit 语法突出显示？

> ID：14300932
> 
> 赞同：1
> 
> 时间：2013-01-13T05:23:19.567
> 
> 标签：c#, wpf, winforms, avalonedit, icsharpcode

我将 ICSharpCode AvalonEdit 源代码编辑 WPF 控件托管到我的 Windows 窗体 C# 应用程序中。我知道以下代码加载了语法高亮定义：

```
ICSharpCode.AvalonEdit.TextEditor MyEditor = new ICSharpCode.AvalonEdit.TextEditor();
MyEditor.ShowLineNumbers = true;

Stream xshd_stream = File.OpenRead("C:\\Syntax Highlighting\\php.xsdh");
XmlTextReader xshd_reader = new XmlTextReader(xshd_stream);

// Apply the new syntax highlighting definition.
MyEditor.SyntaxHighlighting = ICSharpCode.AvalonEdit.Highlighting.Xshd.HighlightingLoader.Load(
    xshd_reader, ICSharpCode.AvalonEdit.Highlighting.HighlightingManager.Instance
);

xshd_reader.Close();
xshd_stream.Close(); 
```

但是，如果在我已经设置了语法高亮定义之后，我不想要任何语法高亮，我只想让它显示为纯文本呢？如何禁用 AvalonEdit 控件中的语法突出显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:33:42.437

你试过`MyEditor.SyntaxHighlighting = null`吗？
这对我有用：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <avalonEdit:TextEditor SyntaxHighlighting="C#" x:Name="TextEditor">
        public class Foo
        {
        }
    </avalonEdit:TextEditor>

    <Button Grid.Row="1" Content="Reset syntax highlighting" Click="Button_Click" />
</Grid> 
```

代码隐藏：

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        TextEditor.SyntaxHighlighting = null; // highlighting disappears
    } 
```

# jpa - Web 项目的动态掩码数据

> ID：14300933
> 
> 赞同：2
> 
> 时间：2013-01-13T05:23:31.960
> 
> 标签：jpa, ejb, eclipselink, mask, data-masking

目前我们的 Web 项目需要对一些数据进行**匿名化处理。**
（例如，像 432-55-1111 这样的安全号码可能显示为 432-55- *** *）这些数据可能包含电子邮件、ID、价格、日期等。

需要屏蔽的表名和列保存在数据库中。
我们正在使用 spring security 来判断用户是否可以看到数据。
数据域对象（CMP）可以从 SQL 或 JPQL（命名查询或本机查询）或 JPA 加载方法或大型机中获取。

我们需要找到一种最有效的方式**（而不是 DB 端）**来动态屏蔽这些数据。
如果我们在 EJB 方法 end 使用拦截器，我们需要注释所有 Object(DTO) 和所有列。那可能是效率低下。
任何人都知道在完成 SQL 执行并执行命名查询（本机查询）时我们如何调用方法（如拦截器），并且我们可以调用方法以通过查询和用户 ID 来屏蔽结果。

或者其他方式。

最好将它放在最低级别，这样其他应用程序（如报告）就不需要单独的解决方案。

我们项目的架构是JSF+Spring+EJB 3.0+JPA 1.0。
我们有很多网络项目。
对于 JPA，一些项目使用 EclipseLink 2.2，一些项目使用 Hibernate。

**更新：** 关于我们项目的更多信息。我们有很多关于不同功能的 web 项目。所以我们有很多与之相关的 ejb 项目。每个 ejb 都有 DAO 通过调用 JPQL 或 get(class, primarykey) 方法来获取他们的 CMP。如下所示：

```
Query   query = em.createNamedQuery(XXXCMP.FIND_XXX_BY_NAME);
                query.setHint(QueryHints.READ_ONLY, HintValues.TRUE);
                query.setParameter("shortName", "XXX").getSingleResult(); 
```

或者

```
XXXCMP screen = entityManager.find(XXXCMP.class, id); 
```

新的 EJB 服务代码转换器将数据从 CMP 转换为 DTO。
转换器如下：

```
/**
 * Convert to CMP.
 * 
 */
CMP convertToCMP(DTO dto, EntityManager em);

/**
 * Convert CMP to domain object with all fields populated, the default scenario is
 * <code>EConvertScenario.Detail</code>.
 * 
 */
DTO convertFromCMP(CMP cmp, EntityManager em); 
```

但是一些老服务使用自己的方法来转换CMP。还有一些用于搜索懒惰的域服务，他们也没有使用转换器。

我们想在 CMP 转换为 DTO 之前屏蔽数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:51:27.817

在这种情况下，您可能会拦截 JSF 的转换情况。此解决方案适用于 JSF 视图，而不适用于报告。

```
@FacesConverter("AnonymizeDataConverter")
public class AnonymizeDataConverter implements Converter{

    @Override
    public Object getAsObject(FacesContext context, UIComponent component,
        String value) {

        return getAnonymisedData(value);
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component,
            Object value) {

        return getAnonymisedData(value);     
    }

    public static String getAnonymisedData(Object data) {
        if (data == null) 
            return "";

        String value = data.toString().trim();

        if (!value.isEmpty())
            return value.substring(0, value.lenght() - 4) + "**";

        return "";
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:22:47.023

您可以尝试使用注释`EntityListener`拦截实体加载到持久性上下文中。`@PostLoad`

否则，可以在我认为适合屏蔽/格式化等的访问方法（getter/setter）中尝试。

**编辑：（**基于评论和问题更新）

您可以跨应用程序共享实体/DTO

```
public String getSomethingMasked(){

   return mask(originalString);
} 
```

*   数据检索模式在应用程序中并不统一。如果所有应用程序都使用相同的数据库，则必须对其进行泛化。用不同的工具再写同样的东西是没有意义的。每个应用程序可能会在之后应用业务逻辑。

    可能，您可以有一个单独的项目用于与数据库交互，然后将其包含在其他应用程序中以供进一步使用。因此，更改任何内容、调试、增强等将是一个共同点。

*   您正在使用 Eclipselink、Hibernate 和其他自定义方式来获取数据，并且您需要最少的解决方法，从我的角度来看，这似乎很困难。

    如果可能的话，要么集中数据检索，要么单独进行更改，我认为这是不可行的，会影响一致性。

# node.js - 消息 `sh "-c" "node server.js"` 失败，出现 1 个 openshift 错误

> ID：14300940
> 
> 赞同：0
> 
> 时间：2013-01-13T05:25:41.777
> 
> 标签：node.js, sockets, openshift

您好，我最近使用 redhat openshift，运行“rhc tail -a {application}”时出错。

我得到错误代码：

* * *

* * *

npm 错误！消息`sh "-c" "node server.js"`失败 1

和我的代码：

```
var fs = require('fs');
var db_helper = require("./db_helper.js");
var ipaddr = process.env.OPENSHIFT_INTERNAL_IP;
var port = process.env.OPENSHIFT_INTERNAL_PORT || 8080;
var http = require('http');
http.createServer().listen(port, ipaddr, function(){
console.log('Server started on %s...', Date(Date.now()));
});
var io = require('socket.io').listen(http);

io.sockets.on('connection',  function(client) {
  console.log('Client connected'); 

  client.on('status', function(data) {
    console.log(data);
      db_helper.get_status(data,function(data) {
        io.sockets.emit('populate', data);

      });

  });
  db_helper.get_statusadmin(function(data) {
        io.sockets.emit('adminpopulate', data);

      });
  client.on('statusadmin', function (data) {
    db_helper.get_statusadmin(function(data) {
        io.sockets.emit('adminpopulate', data);

      });
  });

}); 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:05:43.073

OpenShift 用于`npm start`初始化 node.js 应用程序。这利用了您应用程序的`package.json`文件，允许您通过更新“main”属性来定义初始化代码。

`sh "-c" "node server.js"`是什么`npm start`在呼唤你。听起来您的代码包含错误。

在您部署之前，我会尝试在本地运行和调试您的应用程序。

# android - 如何检查活动是否继续

> ID：14300945
> 
> 赞同：0
> 
> 时间：2013-01-13T05:27:06.363
> 
> 标签：android, for-loop, aviary

在我的应用程序中，我试图通过照片编辑器（一次一张）运行多张照片。我现在将它设置在一个 for 循环中，但我觉得它正在使照片编辑器超载，实际上并没有等到当前编辑会话结束，所以我想在我的 for 循环中放置一个控制语句来检查会话是否仍处于活动状态。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:34:57.993

比轮询查看它是否仍处于活动状态更容易判断电流何时结束。如果您以 开头，则`startActivityForResult`在调用的活动结束时将通知您的调用活动。

`Activity` [以文档](http://developer.android.com/reference/android/app/Activity.html)中的开始活动和获取结果为例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:01:35.903

您可能还想考虑在异步任务中运行它。这将使您的繁重处理远离 UI 线程。异步任务让您也可以进行进度更新。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

```
public class MainActivity extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.logo_page);

    // Call async task.
    my_async as = new my_async(this);
    as.execute();

} 
```

--

我的异步：

```
public class my_async extends AsyncTask<Object, Integer, String> {

private parentClass activity;

public my_async (parentClass activity) {
    this.activity = activity;
}

@Override
protected String doInBackground(Object... arg0) {
    // Do stuff

    return "MyString";
}

protected void onPostExecute(String contents) {
    activity.contents = contents;
} 
```

# c# - 如何使用 LINQ to LDAP 获取活动目录中的用户列表？

> ID：14300957
> 
> 赞同：2
> 
> 时间：2013-01-13T05:28:37.797
> 
> 标签：c#, winforms, linq, active-directory

我想使用 LINQ to LDAP 访问 ActiveDirectory，并且我想获取其中的所有用户列表，我该
怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T17:13:18.293

您可以尝试以下方法。

```
using ActiveDs;
using BdsSoft.DirectoryServices.Linq;
using System.Linq.Expressions;
using System.DirectoryServices;

[DirectorySchema( "user", typeof( IADsUser ) )]
class User
{
    public string Name { get; set; }

    public string sAMAccountName { get; set; }

    public string objectCategory { get; set; }

    public string mail { get; set; }

    public string Description { get; set; }

    [DirectoryAttribute( "PasswordLastChanged", DirectoryAttributeType.ActiveDs )]
    public DateTime PasswordLastSet { get; set; }

    [DirectoryAttribute("distinguishedName")]
    public string Dn { get; set; }

    [DirectoryAttribute("memberOf")]
    public string[] Groups { get; set; }

} 
```

使用此代码从控制台应用程序访问 AD，将您的 AD 服务器放置在以下代码中：

```
static void Main( string[] args )
{

    IEnumerable<User> users = GetADUsers();

    Console.WriteLine( "Users: " + users.Count().ToString() );

}

static DirectoryEntry ROOT = new DirectoryEntry( "LDAP://MyADDomainLocation.com" );

private static IEnumerable<User> GetADUsers()
{
    IEnumerable<User> users;

    var usersDS = new DirectorySource<User>( ROOT, SearchScope.Subtree );

            users = from usr in usersDS
                    where usr.Name == "A*" // FIlter A then any character(s)
                    select usr;

     users = users.OrderBy( user => user.Name ).ToList(); // Sort them alphabetically by name.

    return users;
} 
```

有关更多信息，请检查[**使用 C# 和 Linq To Active Directory 获取所有用户**](http://omegacoder.com/?p=236)

和[**LINQ 到 LDAP**](http://linqtoldap.codeplex.com/)

对于**.NET Core 或 Standard**，请参阅下面[**的 Chris D 的回答**](https://stackoverflow.com/a/53732624/2356600)。

为了获得有关此主题的全面知识，请[**通过 C# 检查（几乎）Active Directory 中的所有内容**](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C)

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-11T21:29:41.883

很抱歉回答这么老的问题，但我觉得它需要一个更新的答案。我为此编写了一个 .NET Standard 库：

*   Linq2Ldap.Core ( [NuGet](https://www.nuget.org/packages/Linq2Ldap.Core/) , [GitHub](https://github.com/cdibbs/linq2ldap.core) ) 独立于平台的核心库，可以将表达式转换为 LDAP 过滤器，并再次将它们解析出来。

它有两个用于 Active Directory 的包装库：

*   Linq2Ldap.Protocols ( [NuGet](https://www.nuget.org/packages/Linq2Ldap.Protocols/) , [GitHub](https://github.com/cdibbs/linq2ldap) ) - 围绕 Linq2Ldap.Core + System.DirectoryServices.Protocols 的薄包装。
*   Linq2Ldap ( [NuGet](https://www.nuget.org/packages/Linq2Ldap/) , [GitHub](https://github.com/cdibbs/linq2ldap) ) - System.DirectoryServices 的瘦包装器。

它的核心可以在`Expression<Func<T, bool>>`s 和 LDAP 过滤器之间转换。`T`表达式引用的模型 ( ) 必须实现一个接口`IEntry`，它基本上定义了一个花哨的索引器类，您可以像这样使用它`m => m["cn"] == "someuser"`：您也可以创建特殊属性来为您的目录属性设置别名。有关更多信息，请参阅项目 wiki。

# ruby-on-rails - 没有模板，需要渲染不返回json

> ID：14300964
> 
> 赞同：0
> 
> 时间：2013-01-13T05:31:18.817
> 
> 标签：ruby-on-rails, backbone.js

我正在尝试使 Sinatra 应用程序中的代码在 Rails 上下文中工作。Sinatra 应用程序使用 ajax 请求来触发 Sinatra 路由/控制器操作。例如，如果您在 javascript 模型上触​​发新函数

```
 new: function() {
      var _this = this;

      $.ajax({
        url: "/gamestart",
        type: "POST",  
     .... 
```

它将触发 Sinatra 应用程序中的路由/控制器代码

```
 post "/new" do

   end 
```

当我尝试在 Rails 中进行这项工作时，我收到 500 内部服务器错误。在我的 Rails 应用程序中，new_game 按钮触发对 Rails 路由的 ajax 请求，该路由触发控制器操作，并且该控制器操作使用 Rails 模型从数据库中获取数据。出于某种原因，这似乎不是在 Rails 中执行此操作的正确方法，我想知道这是否是我收到服务器错误的原因

```
 GET http://localhost:3000/gamestart 500 (Internal Server Error) 
```

如果可能，您能否告诉我在下面概述的一系列操作中出现错误的位置以及我可能会采取哪些措施来解决它。

**1**点击新游戏按钮触发'startNewGame'方法

```
'click #new_game': 'startNewGame', 
```

**2** startNewGame 方法调用 Game 模型上的方法

```
 startNewGame: function() {
          this.model.new();
        }, 
```

**3** Game 模型中的新方法向 url '/gamestart' 发出 GET 请求。我还尝试了发布请求。我不知道为什么它需要一个发布请求，但都没有奏效。（在原始的 Sinatra 应用程序中，gamestart url 立即进入函数 post '/gamestart' do...）

```
 new: function() {
      var _this = this;
  $.ajax({
    url: "/gamestart",
    type: "GET",              \\\ also tried POST
    success: function(response) {
      var json = $.parseJSON(response);

      _this.set({lost: false});
      _this.set({win: false});
      _this.trigger("gameStartedEvent", json);
    }
  })
}, 
```

**4**我将 url 定向到 Rails 路由器文件中的控制器操作

```
match 'gamestart' => 'locations#gamestart', :via => :get 
```

注意，在最初的 Sinatra 应用程序中，路由和控制器动作是结合在一起的

**5** location_controller.rb的gamestart方法

```
 def gamestart 
       word = Word.get_random
       masquerade_word = Word.masquerade(word)
       session[:word] = word
       session[:incorrect_guesses] = 0
       session[:chars_left] = word.size
       session[:revealed_word] = masquerade_word
       {:word => masquerade_word}.to_json
    end 
```

**6**词模型 Word.rb 上的 get_random 方法，从位置控制器调用

```
 def get_random
      words = []
      locations = Location.all (this pulls up the names of the locations from the db)
      locations.each do |e|
        words << e.name
      end 
      words.sample
    end 
```

**错误信息**

```
GET http://localhost:3000/gamestart 500 (Internal Server Error) jquery.js:8215
XHR finished loading: "http://localhost:3000/gamestart". jquery.js:8215
send jquery.js:8215
jQuery.extend.ajax jquery.js:7767
window.Game.Backbone.Model.extend game.js:27
window.OptionsView.Backbone.View.extend.startNewGame optionsView.js:14
jQuery.event.dispatch jquery.js:3062
elemData.handle.eventHandle 
```

请注意，在原始 Sinatra 应用程序中，路由和控制器操作以通常的 Sinatra 方式组合在一起

```
 post "/gamestart" do
   word = Word.get_random
   masquerade_word = Word.masquerade(word)
   session[:word] = word
   session[:incorrect_guesses] = 0
   session[:chars_left] = word.size
   session[:revealed_word] = masquerade_word
   {:word => masquerade_word}.to_json
end 
```

**更新** 500 错误似乎是由缺少模板触发的。位置控制器中的这个方法没有渲染任何东西。它没有视图文件。因此，我更改了控制器以使其成为 respond_to :json，然后在操作结束时使用 respond_with，但这触发了 406 错误。

```
 def gamestart 
       word = Word.get_random
       masquerade_word = Word.masquerade(word)
       session[:word] = word
       session[:incorrect_guesses] = 0
       session[:chars_left] = word.size
       session[:revealed_word] = masquerade_word
       {:word => masquerade_word}.to_json
    end 
```

**变成** 现在触发 406 错误

```
 respond_to :json

    def gamestart 
       word = Word.get_random
       masquerade_word = Word.masquerade(word)
       session[:word] = word
       session[:incorrect_guesses] = 0
       session[:chars_left] = word.size
       session[:revealed_word] = masquerade_word
       plainvariable = {:word => masquerade_word}.to_json    ###changed
       respond_with plainvariable                          ###changed
    end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T06:37:13.927

您说您的`gamestart`控制器方法由于缺少模板而导致服务器错误。如果我们看一下那个控制器方法：

```
def gamestart 
  #...
  {:word => masquerade_word}.to_json
end 
```

我们看到它*返回*一个 JSON 字符串，但它忽略了*渲染*任何内容。您不调用任何渲染或重定向方法，因此 Rails 很有帮助（哈哈）假设您要渲染`gamestart`视图模板；但是，你没有这样的东西，所以你得到一个错误。

你应该渲染你的 JSON，而不是返回它；更像这样的东西：

```
def gamestart
  #...
  render :json => { :word => masquerade_word }
end 
```

# java - 是否可以使用 java FileReader 或 java 的替代方法从 pdf 中读取文本？

> ID：14300965
> 
> 赞同：0
> 
> 时间：2013-01-13T05:31:30.297
> 
> 标签：java, pdf

我想为我的乳胶文档制作一个简单的字数计数器，以便我可以仔细检查我的字数是否准确。更一般地说，发现 java 是否可以解释 pdf 文件中的文本是有用的。谷歌上它什么也没带，所以我想也许不是？如果不是，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T05:37:34.700

*如果没有PDF*文件阅读器，您将无法从 .pdf 中读取文本。以下是几个 Java .pdf 库：

*   [阿帕奇 PDF 框](http://pdfbox.apache.org/)

*   [文字](http://itextpdf.com/)

另请参阅此链接，以获取使用 PDF 框提取 Java 文本的示例：

*   [http://pdfbox.apache.org/userguide/text_extraction.html](http://pdfbox.apache.org/userguide/text_extraction.html)

# android - 如何在 android 中拥有适用于所有设备或移动设备的 Facebook 密钥哈希

> ID：14300967
> 
> 赞同：0
> 
> 时间：2013-01-13T05:31:54.220
> 
> 标签：android, facebook

有没有办法让 Facebook 密钥哈希适用于所有设备或移动设备，而无需手动将其放入 Facebook 应用程序？因为每次我使用其他设备或移动设备时，我都需要输入实际的密钥哈希，问题是如果有人使用我的 Android 应用程序怎么办？那么他们不能使用 Facebook 登录，因为他们的密钥哈希没有注册到我的 Facebook 应用程序？

谁能知道如何解决这个问题？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:23:53.110

**有没有办法让 Facebook 密钥哈希适用于所有设备或移动设备，而无需手动将其放入 Facebook 应用程序？**

密钥哈希基于您用于构建 APK 的计算机，它不依赖于运行它的手机。如果您只在一台开发机器上开发您的应用程序，那么您只需为您的应用程序担心一个密钥哈希。因此，您无需担心运行应用程序的设备。

# iphone - 核心数据错误 - 'NSInvalidArgumentException'，原因：'*** -objCType 仅为抽象类定义。定义 -[FormatNumber objCType]！'

> ID：14300969
> 
> 赞同：0
> 
> 时间：2013-01-13T05:31:57.537
> 
> 标签：iphone, objective-c, ios6, xcode4.5

使用我的应用程序时出现此错误。这是一个简单的计算器，当我按下一个数字时就会发生：

```
2013-01-12 21:13:32.175 Basic Calc[1683:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '***
-objCType only defined for abstract class.  Define -[FormatNumber objCType]!'
*** First throw call stack: (0x1c8f012 0x10cce7e 0x1c8edeb 0xb96f35 0xba6b3f 0xb1a049 0xac8fc5 0x1c09ac6 0x1c4f13c 0xac8f60 0xac8eab 0x2b4b 0x10e0705 0x17920 0x178b8 0xd8671 0xd8bcf 0xd7872 0x4716d 0x47552 0x253aa 0x16cf8 0x1beadf9 0x1beaad0 0x1c04bf5 0x1c04962 0x1c35bb6 0x1c34f44 0x1c34e1b 0x1be97e3 0x1be9668 0x1465c 0x27cd 0x26f5) libc++abi.dylib: terminate called throwing an exception 
```

这是我的代码的一部分：

主视图控制器.m

```
currentNumber = currentNumber *10 + (float)[sender tag]; 
FormatNumber *convertedNumber;
convertedNumber = [[FormatNumber alloc] init];
[convertedNumber getNumber:currentNumber];
calculatorScreen.text = [NSString stringWithFormat:@"%@",convertedNumber]; 
```

格式编号.m

```
@interface FormatNumber: NSNumber
{
    NSString *nf;
}

-(NSString *) getNumber:(float)n1;

@end 
```

格式编号.m

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setMaximumFractionDigits:2];
[formatter setMinimumFractionDigits:0];
nf = [formatter stringFromNumber:[NSNumber numberWithFloat: n1]];
return nf; 
```

此外，当我收到错误时，代码指向 main.m 中的这一行：

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

有任何想法吗？

* * *

新代码：

主视图控制器.h

```
currentNumber = currentNumber *10 + (float)[sender tag];
NSNumber *convertedNumber = [[NSNumber alloc] init];
NSString *finalValue = [convertedNumber customFormatNumber:currentNumber];
calculatorScreen.text = [NSString stringWithFormat:@"%@",finalValue]; 
```

NSNumber+FormatNumber.h

```
@interface NSNumber (FormatNumber)
-(NSString *) customFormatNumber:(float)n1;
@end 
```

NSNumber+FormatNumber.m

```
@implementation NSNumber(FormatNumber)
-(NSString *) customFormatNumber:(float)n1
{
        NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
        [formatter setMaximumFractionDigits:2];
        [formatter setMinimumFractionDigits:0];
        NSString *nf = [formatter stringFromNumber:[NSNumber numberWithFloat:n1]];
        return nf; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:27:54.953

This has nothing to do with Core Data. You've subclassed `NSNumber` but haven't followed the rules laid out in the [NSNumber documentation](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html):

> As with any class cluster, if you create a subclass of NSNumber, you have to override the primitive methods of its superclass, NSValue. Furthermore, there is a restricted set of return values that your implementation of the NSValue method objCType can return, in order to take advantage of the abstract implementations of the non-primitive methods. The valid return values are “c”, “C”, “s”, “S”, “i”, “I”, “l”, “L”, “q”, “Q”, “f”, and “d”.

If the only reason you've subclassed is to implement that `getNumber:` method, you should use an Objective-C Category instead.

In `NSNumber+MyCategoryName.h`:

```
@interface NSNumber (MyCategoryName)

- (NSString *)getNumberAsString:(float)n1;

@end 
```

In `NSNumber+MyCategoryName.m`

```
@implementation NSNumber (MyCategoryName)

- (NSString *)getNumberAsString:(float)n1
{
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setMaximumFractionDigits:2];
    [formatter setMinimumFractionDigits:0];
    NSString *nf = [formatter stringFromNumber:[NSNumber numberWithFloat: n1]];
    return nf;
}

@end 
```

However, I don't think it's a good idea to put this method as a category on `NSNumber`. I could see it being a class method on `NSNumberFormatter`, perhaps. Finally, it's against the naming rules to call this method `getNumber:`; methods that start with `get` are usually reserved for methods that return multiple values through references passed in as arguments. Perhaps a better name would be `-max2FractionDigits:`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T06:05:39.467

我不认为这是核心数据问题。

尝试避免继承 NSNumber 并改用 category。

例如，您可以[**在这里**](http://cupsofcocoa.com/2011/03/27/objective-c-lesson-8-categories/)查看

# javascript - 我怎样才能更好地存储变量？

> ID：14300970
> 
> 赞同：0
> 
> 时间：2013-01-13T05:32:12.203
> 
> 标签：javascript, python, html, geolocation

这是我小组的项目：[https ://github.com/stuycs-ml7-projects/YAN-SHAN-PHAN-WU](https://github.com/stuycs-ml7-projects/YAN-SHAN-PHAN-WU)

我们正在开发可以使用 GPS 将消息存储在位置的应用程序（一个网站）。只能在其特定坐标处访问和存储消息。

我会经历我所拥有的。

HTML 初始化变量

```
<input type="hidden" id="Latitude" name="Latitude">
<input type="hidden" id="Longitude" name="Longitude"> 
```

我使用 document.ready 函数调用 getLocation() 将它们存储在隐藏字段中。

```
function getLocation()
  {if (navigator.geolocation)
    {    navigator.geolocation.watchPosition(showPosition);     }
  }
function showPosition(position)
  {
      document.getElementById("Latitude")  =  position.coords.latitude;
      document.getElementById("Longitude") =  position.coords.longitude;
  }

$(document).ready(function() {
   getLocation();
}); 
```

如果我按下一个按钮，它将请求 app.py 中的数据

```
Latitude = request.form['Latitude']
Longitude = request.form['Longitude'] 
```

然后找到该位置的所有消息

```
messages = database.returnMessagesinRange(Latitude,Longitude)
            return render_template('SCAN.html',messages=messages,
                Latitude =   Latitude, Longitude = Longitude) 
```

**沿着这条线的某个地方，我失去了坐标，最终得到了空白变量。任何想法如何解决，或者可能是避免所有麻烦的捷径？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:36:26.290

That's a quick guess, but try replacing document.getElementById("Latitude") = ... with document.getElementById("Latitude").value = ...

# django - 在 django-rest-framework 的上下文中，Web API 与实际网站不同吗？

> ID：14300971
> 
> 赞同：4
> 
> 时间：2013-01-13T05:32:13.810
> 
> 标签：django, django-rest-framework

我一直在研究 django-rest-framework。

告诉我我的印象是否正确。

它旨在帮助您为 Web 应用程序创建 RESTful API 端点。

它并不意味着生成您的实际网站。rest_framework 中包含的基于类的视图（APIView、generics.ListCreateAPIView 等）不应该用于呈现给网页本身。

那么这是否意味着您应该有一组用于此 api 的 url 和另一组用于访问和导航网站的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T07:57:01.687

> 它旨在帮助您为 Web 应用程序创建 RESTful API 端点。

是的

> 它并不意味着生成您的实际网站。rest_framework 中包含的基于类的视图（APIView、generics.ListCreateAPIView 等）不应该用于呈现给网页本身。

是的

> 那么这是否意味着您应该有一组用于此 api 的 url 和另一组用于访问和导航网站的 URL？

确切地

# android - 为什么星号不能与 android sip 客户端正常工作？

> ID：14300979
> 
> 赞同：3
> 
> 时间：2013-01-13T05:34:17.210
> 
> 标签：android, voip, asterisk

星号= 1.8.11.0

安卓= 2.3/4.0.3

Android Sip 客户端=原生 Android sip 客户端/sipdemo

当我使用 zoiper/xlite 从我的 pc 呼叫到 android（本机 android sip 客户端）时，我现在可以听到双方的音频，但是当我从 android 向 pc（zoiper/xlite）拨打电话时，我在 android 上听不到任何声音。另一方面，我已经在 elastix（也使用星号 1.8.11.0）上测试了这个场景，音频没有问题。pc(zoiper) ip 192.168.15.27 android ip 192.168.15.71 星号服务器 ip 192.168.15.118

**从 android 调用 zoiper 时进行 Sip 调试。**

```
<--- SIP read from UDP:192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK5996b0d9;rport=5060;received=192.168.15.118
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as05233e7d
To: <sip:211@192.168.15.71:45616;transport=udp>
Call-ID: 14151c2d29c039983aa449b56ce419e0@192.168.15.118:5060
CSeq: 102 OPTIONS
Content-Length: 0

<------------->
--- (7 headers 0 lines) ---
Really destroying SIP dialog '14151c2d29c039983aa449b56ce419e0@192.168.15.118:5060' Method: OPTIONS

<--- SIP read from UDP:192.168.15.71:45616 --->
OPTIONS sip:192.168.15.118 SIP/2.0
Call-ID: 5f7229b44e43a9e0eeaccabafd9a1e4f@192.168.15.71
CSeq: 7757 OPTIONS
From: "211" <sip:211@192.168.15.118>;tag=1758376458
To: "211" <sip:211@192.168.15.118>
Via: SIP/2.0/UDP 192.168.15.71:45616;branch=z9hG4bK6c57f04e92e9e34153367ca0e6e29675353134;rport
Max-Forwards: 70
User-Agent: SIPAUA/0.1.001
Content-Length: 0

<------------->
--- (9 headers 0 lines) ---
Looking for s in default (domain 192.168.15.118)

<--- Transmitting (NAT) to 192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.71:45616;branch=z9hG4bK6c57f04e92e9e34153367ca0e6e29675353134;received=192.168.15.71;rport=45616
From: "211" <sip:211@192.168.15.118>;tag=1758376458
To: "211" <sip:211@192.168.15.118>;tag=as6a8e1b47
Call-ID: 5f7229b44e43a9e0eeaccabafd9a1e4f@192.168.15.71
CSeq: 7757 OPTIONS
Server: Asterisk PBX 1.8.11.0
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Contact: <sip:192.168.15.118:5060>
Accept: application/sdp
Content-Length: 0

<--- SIP read from UDP:192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK1ecea84c;rport=5060;received=192.168.15.118
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as167765df
To: <sip:211@192.168.15.71:45616;transport=udp>
Call-ID: 5f4d210800aa07065fd35fba215e9783@192.168.15.118:5060
CSeq: 102 OPTIONS
Content-Length: 0

<------------->
--- (7 headers 0 lines) ---
Really destroying SIP dialog '5f4d210800aa07065fd35fba215e9783@192.168.15.118:5060' Method: OPTIONS
Really destroying SIP dialog '5e5f98ad4818911a86d4b438d054e39f@192.168.15.71' Method: OPTIONS
Reliably Transmitting (NAT) to 192.168.15.71:45616:
OPTIONS sip:211@192.168.15.71:45616;transport=udp SIP/2.0
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK15f7593b;rport
Max-Forwards: 70
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as53340ecf
To: <sip:211@192.168.15.71:45616;transport=udp>
Contact: <sip:asterisk@192.168.15.118:5060>
Call-ID: 3c9da88024211f4b2ad1f3af2b2acd73@192.168.15.118:5060
CSeq: 102 OPTIONS
User-Agent: Asterisk PBX 1.8.11.0
Date: Sat, 12 Jan 2013 19:44:34 GMT
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Content-Length: 0

---

<--- SIP read from UDP:192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK15f7593b;rport=5060;received=192.168.15.118
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as53340ecf
To: <sip:211@192.168.15.71:45616;transport=udp>
Call-ID: 3c9da88024211f4b2ad1f3af2b2acd73@192.168.15.118:5060
CSeq: 102 OPTIONS
Content-Length: 0

<------------->
--- (7 headers 0 lines) ---
Really destroying SIP dialog '3c9da88024211f4b2ad1f3af2b2acd73@192.168.15.118:5060' Method: OPTIONS

<--- SIP read from UDP:192.168.15.71:45616 --->
BYE sip:215@192.168.15.118:5060 SIP/2.0
Via: SIP/2.0/UDP 192.168.15.71:45616;branch=z9hG4bKad00f5add2a1f2e940a91e9a3f827b26353134
CSeq: 5511 BYE
From: "211" <sip:211@192.168.15.118>;tag=2465683119
To: <sip:215@192.168.15.118>;tag=as573c52b3
Call-ID: d188757cd6c044783fd413d11f8a982f@192.168.15.71
Allow: INVITE,ACK,CANCEL,OPTIONS,BYE,REFER,SUBSCRIBE,NOTIFY,INFO,PUBLISH
Supported: replaces,timer
Max-Forwards: 70
Content-Length: 0

<------------->
--- (10 headers 0 lines) ---
Sending to 192.168.15.71:45616 (NAT)
Scheduling destruction of SIP dialog 'd188757cd6c044783fd413d11f8a982f@192.168.15.71' in 6400 ms (Method: BYE)

<--- Transmitting (NAT) to 192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.71:45616;branch=z9hG4bKad00f5add2a1f2e940a91e9a3f827b26353134;received=192.168.15.71;rport=45616
From: "211" <sip:211@192.168.15.118>;tag=2465683119
To: <sip:215@192.168.15.118>;tag=as573c52b3
Call-ID: d188757cd6c044783fd413d11f8a982f@192.168.15.71
CSeq: 5511 BYE
Server: Asterisk PBX 1.8.11.0
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Content-Length: 0
<------------>
Scheduling destruction of SIP dialog '0d06690561757f98637241394cc8dbba@192.168.15.118:5060' in 6400 ms (Method: INVITE)
set_destination: Parsing <sip:215@115.167.21.82:5060;rinstance=49cb21467969bef8;transport=UDP> for address/port to send to
set_destination: set destination to 115.167.21.82:5060
Reliably Transmitting (NAT) to 192.168.15.27:5060:
BYE sip:215@115.167.21.82:5060;rinstance=49cb21467969bef8;transport=UDP SIP/2.0
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK1500d2f6;rport
Max-Forwards: 70
From: "device" <sip:211@192.168.15.118>;tag=as404f0eb0
To: <sip:215@115.167.21.82:5060;rinstance=49cb21467969bef8;transport=UDP>;tag=96055240
Call-ID: 0d06690561757f98637241394cc8dbba@192.168.15.118:5060
CSeq: 103 BYE
User-Agent: Asterisk PBX 1.8.11.0
X-Asterisk-HangupCause: Normal Clearing
X-Asterisk-HangupCauseCode: 16
Content-Length: 0
---
== Spawn extension (incoming-calls-wildcard, 215, 1) exited non-zero on 'SIP/211-00000008'
Retransmitting #1 (NAT) to 192.168.15.27:5060:
BYE sip:215@115.167.21.82:5060;rinstance=49cb21467969bef8;transport=UDP SIP/2.0
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK1500d2f6;rport
Max-Forwards: 70
From: "device" <sip:211@192.168.15.118>;tag=as404f0eb0
To: <sip:215@115.167.21.82:5060;rinstance=49cb21467969bef8;transport=UDP>;tag=96055240
Call-ID: 0d06690561757f98637241394cc8dbba@192.168.15.118:5060
CSeq: 103 BYE
User-Agent: Asterisk PBX 1.8.11.0
X-Asterisk-HangupCause: Normal Clearing
X-Asterisk-HangupCauseCode: 16
Content-Length: 0
---
<--- SIP read from UDP:192.168.15.27:5060 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK1500d2f6;rport=5060
Contact: <sip:215@115.167.21.82:5060;rinstance=49cb21467969bef8;transport=UDP>
To: <sip:215@115.167.21.82:5060;rinstance=49cb21467969bef8;transport=UDP>;tag=96055240
From: "device"<sip:211@192.168.15.118>;tag=as404f0eb0
Call-ID: 0d06690561757f98637241394cc8dbba@192.168.15.118:5060
CSeq: 103 BYE
User-Agent: Zoiper for Windows 2.39 r16838
Content-Length: 0
<------------->
-- (9 headers 0 lines) ---
Really destroying SIP dialog '0d06690561757f98637241394cc8dbba@192.168.15.118:5060' Method: INVITE

<--- SIP read from UDP:192.168.15.27:5060 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK1500d2f6;rport=5060
Contact: <sip:215@115.167.21.82:5060;rinstance=49cb21467969bef8;transport=UDP>
To: <sip:215@115.167.21.82:5060;rinstance=49cb21467969bef8;transport=UDP>;tag=96055240
From: "device"<sip:211@192.168.15.118>;tag=as404f0eb0
Call-ID: 0d06690561757f98637241394cc8dbba@192.168.15.118:5060
CSeq: 103 BYE
User-Agent: Zoiper for Windows 2.39 r16838
Content-Length: 0

<------------->
-- (9 headers 0 lines) ---
Reliably Transmitting (NAT) to 192.168.15.71:45616:
OPTIONS sip:211@192.168.15.71:45616;transport=udp SIP/2.0
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK30d9d70f;rport
Max-Forwards: 70
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as4f0724aa
To: <sip:211@192.168.15.71:45616;transport=udp>
Contact: <sip:asterisk@192.168.15.118:5060>
Call-ID: 05f27bf10f0a0759637b90252dc4366a@192.168.15.118:5060
CSeq: 102 OPTIONS
User-Agent: Asterisk PBX 1.8.11.0
Date: Sat, 12 Jan 2013 19:44:37 GMT
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Content-Length: 0

---

<--- SIP read from UDP:192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK30d9d70f;rport=5060;received=192.168.15.118
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as4f0724aa
To: <sip:211@192.168.15.71:45616;transport=udp>
Call-ID: 05f27bf10f0a0759637b90252dc4366a@192.168.15.118:5060
CSeq: 102 OPTIONS
Content-Length: 0

<------------->
--- (7 headers 0 lines) ---
Really destroying SIP dialog '05f27bf10f0a0759637b90252dc4366a@192.168.15.118:5060' Method: OPTIONS

<--- SIP read from UDP:192.168.15.71:45616 --->
OPTIONS sip:192.168.15.118 SIP/2.0
Call-ID: a5a311df861221d42844a8c485d4fee8@192.168.15.71
CSeq: 5815 OPTIONS
From: "211" <sip:211@192.168.15.118>;tag=3109248316
To: "211" <sip:211@192.168.15.118>
Via: SIP/2.0/UDP 192.168.15.71:45616;branch=z9hG4bK1e09e6f6c30b4b74ddc93c590abd3383353134;rport
Max-Forwards: 70
User-Agent: SIPAUA/0.1.001
Content-Length: 0

<------------->
--- (9 headers 0 lines) ---
Looking for s in default (domain 192.168.15.118)

<--- Transmitting (NAT) to 192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.71:45616;branch=z9hG4bK1e09e6f6c30b4b74ddc93c590abd3383353134;received=192.168.15.71;rport=45616
From: "211" <sip:211@192.168.15.118>;tag=3109248316
To: "211" <sip:211@192.168.15.118>;tag=as51223faf
Call-ID: a5a311df861221d42844a8c485d4fee8@192.168.15.71
CSeq: 5815 OPTIONS
Server: Asterisk PBX 1.8.11.0
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Contact: <sip:192.168.15.118:5060>
Accept: application/sdp
Content-Length: 0

<------------>
Scheduling destruction of SIP dialog 'a5a311df861221d42844a8c485d4fee8@192.168.15.71' in 32000 ms (Method: OPTIONS)
Reliably Transmitting (NAT) to 192.168.15.71:45616:
OPTIONS sip:211@192.168.15.71:45616;transport=udp SIP/2.0
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK1f8e44dc;rport
Max-Forwards: 70
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as7a9a1ea3
To: <sip:211@192.168.15.71:45616;transport=udp>
Contact: <sip:asterisk@192.168.15.118:5060>
Call-ID: 7ebcafc7159379fd047075a85c424588@192.168.15.118:5060
CSeq: 102 OPTIONS
User-Agent: Asterisk PBX 1.8.11.0
Date: Sat, 12 Jan 2013 19:44:41 GMT
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Content-Length: 0

---

<--- SIP read from UDP:192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK1f8e44dc;rport=5060;received=192.168.15.118
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as7a9a1ea3
To: <sip:211@192.168.15.71:45616;transport=udp>
Call-ID: 7ebcafc7159379fd047075a85c424588@192.168.15.118:5060
CSeq: 102 OPTIONS
Content-Length: 0

<------------->
--- (7 headers 0 lines) ---
Really destroying SIP dialog '7ebcafc7159379fd047075a85c424588@192.168.15.118:5060' Method: OPTIONS
Really destroying SIP dialog 'd188757cd6c044783fd413d11f8a982f@192.168.15.71' Method: BYE
Really destroying SIP dialog 'a81e6a5f591141abd73f9dad478a6b56@192.168.15.71' Method: OPTIONS
Reliably Transmitting (NAT) to 192.168.15.71:45616:
OPTIONS sip:211@192.168.15.71:45616;transport=udp SIP/2.0
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK017f2b0a;rport
Max-Forwards: 70
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as5367b37c
To: <sip:211@192.168.15.71:45616;transport=udp>
Contact: <sip:asterisk@192.168.15.118:5060>
Call-ID: 1f5a66a10c6dc1e4126a681d2001b173@192.168.15.118:5060
CSeq: 102 OPTIONS
User-Agent: Asterisk PBX 1.8.11.0
Date: Sat, 12 Jan 2013 19:44:44 GMT
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Content-Length: 0

---
<--- SIP read from UDP:192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK017f2b0a;rport=5060;received=192.168.15.118
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as5367b37c
To: <sip:211@192.168.15.71:45616;transport=udp>
Call-ID: 1f5a66a10c6dc1e4126a681d2001b173@192.168.15.118:5060
CSeq: 102 OPTIONS
Content-Length: 0

<------------->
--- (7 headers 0 lines) ---
Really destroying SIP dialog '1f5a66a10c6dc1e4126a681d2001b173@192.168.15.118:5060' Method: OPTIONS 
```

**从 pc (zoiper) 调用到 android 时**

```
<--- SIP read from UDP:192.168.15.71:45616 --->
BYE sip:215@192.168.15.118:5060 SIP/2.0
Via: SIP/2.0/UDP 192.168.15.71:45616;branch=z9hG4bKe2f448b90c482342407298e309be5aed353134
CSeq: 1 BYE
From: <sip:211@192.168.15.71:45616;transport=udp>;tag=4162167884
To: "device" <sip:215@192.168.15.118>;tag=as5805dc66
Call-ID: 2732e4564ce8534c5765a456045a9960@192.168.15.118:5060
Max-Forwards: 70
Content-Length: 0

<------------->
--- (8 headers 0 lines) ---
Sending to 192.168.15.71:45616 (NAT)
Scheduling destruction of SIP dialog '2732e4564ce8534c5765a456045a9960@192.168.15.118:5060' in 8576 ms (Method: BYE)

<--- Transmitting (NAT) to 192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.71:45616;branch=z9hG4bKe2f448b90c482342407298e309be5aed353134;received=192.168.15.71;rport=45616
From: <sip:211@192.168.15.71:45616;transport=udp>;tag=4162167884
To: "device" <sip:215@192.168.15.118>;tag=as5805dc66
Call-ID: 2732e4564ce8534c5765a456045a9960@192.168.15.118:5060
CSeq: 1 BYE
Server: Asterisk PBX 1.8.11.0
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Content-Length: 0

<------------>
== Spawn extension (incoming-calls-wildcard, 211, 1) exited non-zero on 'SIP/215-0000000a'
Scheduling destruction of SIP dialog 'MDhhMTg1YjllYTUwZThlMmNiZTQwYTMzODYyZmEzNjk.' in 6400 ms (Method: ACK)
set_destination: Parsing <sip:215@115.167.21.82:5060;transport=UDP> for address/port to send to
set_destination: set destination to 115.167.21.82:5060
Reliably Transmitting (NAT) to 192.168.15.27:5060:
BYE sip:215@115.167.21.82:5060;transport=UDP SIP/2.0
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK498da08b;rport
Max-Forwards: 70
From: <sip:211@192.168.15.118;transport=UDP>;tag=as10377813
To: <sip:215@192.168.15.118;transport=UDP>;tag=50312112
Call-ID: MDhhMTg1YjllYTUwZThlMmNiZTQwYTMzODYyZmEzNjk.
CSeq: 102 BYE
User-Agent: Asterisk PBX 1.8.11.0
Proxy-Authorization: Digest username="215", realm="asterisk", algorithm=MD5, uri="sip:192.168.15.118", nonce="", response="c897390cc8e4f674d7e9cd1efa7319a6"
X-Asterisk-HangupCause: Normal Clearing
X-Asterisk-HangupCauseCode: 16
Content-Length: 0

---
Retransmitting #1 (NAT) to 192.168.15.27:5060:
BYE sip:215@115.167.21.82:5060;transport=UDP SIP/2.0
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK498da08b;rport
Max-Forwards: 70
From: <sip:211@192.168.15.118;transport=UDP>;tag=as10377813
To: <sip:215@192.168.15.118;transport=UDP>;tag=50312112
Call-ID: MDhhMTg1YjllYTUwZThlMmNiZTQwYTMzODYyZmEzNjk.
CSeq: 102 BYE
User-Agent: Asterisk PBX 1.8.11.0
Proxy-Authorization: Digest username="215", realm="asterisk", algorithm=MD5, uri="sip:192.168.15.118", nonce="", response="c897390cc8e4f674d7e9cd1efa7319a6"
X-Asterisk-HangupCause: Normal Clearing
X-Asterisk-HangupCauseCode: 16
Content-Length: 0

---

<--- SIP read from UDP:192.168.15.27:5060 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK498da08b;rport=5060
Contact: <sip:215@115.167.21.82:5060;transport=UDP>
To: <sip:215@192.168.15.118;transport=UDP>;tag=50312112
From: <sip:211@192.168.15.118;transport=UDP>;tag=as10377813
Call-ID: MDhhMTg1YjllYTUwZThlMmNiZTQwYTMzODYyZmEzNjk.
CSeq: 102 BYE
User-Agent: Zoiper for Windows 2.39 r16838
Content-Length: 0

<------------->
--- (9 headers 0 lines) ---
SIP Response message for INCOMING dialog BYE arrived
Really destroying SIP dialog 'MDhhMTg1YjllYTUwZThlMmNiZTQwYTMzODYyZmEzNjk.' Method: ACK

<--- SIP read from UDP:192.168.15.27:5060 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK498da08b;rport=5060
Contact: <sip:215@115.167.21.82:5060;transport=UDP>
To: <sip:215@192.168.15.118;transport=UDP>;tag=50312112
From: <sip:211@192.168.15.118;transport=UDP>;tag=as10377813
Call-ID: MDhhMTg1YjllYTUwZThlMmNiZTQwYTMzODYyZmEzNjk.
CSeq: 102 BYE
User-Agent: Zoiper for Windows 2.39 r16838
Content-Length: 0

<------------->
--- (9 headers 0 lines) ---
Reliably Transmitting (NAT) to 192.168.15.71:45616:
OPTIONS sip:211@192.168.15.71:45616;transport=udp SIP/2.0
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK01e7e47d;rport
Max-Forwards: 70
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as73902c1e
To: <sip:211@192.168.15.71:45616;transport=udp>
Contact: <sip:asterisk@192.168.15.118:5060>
Call-ID: 7b77192d5d07c4bf5d0a82ab2c11c3c1@192.168.15.118:5060
CSeq: 102 OPTIONS
User-Agent: Asterisk PBX 1.8.11.0
Date: Sat, 12 Jan 2013 19:54:09 GMT
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Content-Length: 0

---

<--- SIP read from UDP:192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK01e7e47d;rport=5060;received=192.168.15.118
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as73902c1e
To: <sip:211@192.168.15.71:45616;transport=udp>
Call-ID: 7b77192d5d07c4bf5d0a82ab2c11c3c1@192.168.15.118:5060
CSeq: 102 OPTIONS
Content-Length: 0

<------------->
--- (7 headers 0 lines) ---
Really destroying SIP dialog '7b77192d5d07c4bf5d0a82ab2c11c3c1@192.168.15.118:5060' Method: OPTIONS

<--- SIP read from UDP:192.168.15.71:45616 --->
OPTIONS sip:192.168.15.118 SIP/2.0
Call-ID: c51761a244f0dc9639f87a5cf9af1b3f@192.168.15.71
CSeq: 9273 OPTIONS
From: "211" <sip:211@192.168.15.118>;tag=740019322
To: "211" <sip:211@192.168.15.118>
Via: SIP/2.0/UDP 192.168.15.71:45616;branch=z9hG4bK5ac51b5cca5ad84320fc342692fdbb2d353134;rport
Max-Forwards: 70
User-Agent: SIPAUA/0.1.001
Content-Length: 0

<------------->
--- (9 headers 0 lines) ---
Looking for s in default (domain 192.168.15.118)

<--- Transmitting (NAT) to 192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.71:45616;branch=z9hG4bK5ac51b5cca5ad84320fc342692fdbb2d353134;received=192.168.15.71;rport=45616
From: "211" <sip:211@192.168.15.118>;tag=740019322
To: "211" <sip:211@192.168.15.118>;tag=as1bed6ef2
Call-ID: c51761a244f0dc9639f87a5cf9af1b3f@192.168.15.71
CSeq: 9273 OPTIONS
Server: Asterisk PBX 1.8.11.0
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Contact: <sip:192.168.15.118:5060>
Accept: application/sdp
Content-Length: 0

<--- SIP read from UDP:192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK3c24b1cb;rport=5060;received=192.168.15.118
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as54c6581a
To: <sip:211@192.168.15.71:45616;transport=udp>
Call-ID: 7742af6c24e3e9a33efa0ba73051a29e@192.168.15.118:5060
CSeq: 102 OPTIONS
Content-Length: 0

<------------->
--- (7 headers 0 lines) ---
Really destroying SIP dialog '7742af6c24e3e9a33efa0ba73051a29e@192.168.15.118:5060' Method: OPTIONS

<--- SIP read from UDP:192.168.15.71:45616 --->
OPTIONS sip:192.168.15.118 SIP/2.0
Call-ID: 18347a0db6841423591b08250847a1e0@192.168.15.71
CSeq: 3824 OPTIONS
From: "211" <sip:211@192.168.15.118>;tag=841349553
To: "211" <sip:211@192.168.15.118>
Via: SIP/2.0/UDP 192.168.15.71:45616;branch=z9hG4bK79bb575a5d0f832291b861987849d9a2353134;rport
Max-Forwards: 70
User-Agent: SIPAUA/0.1.001
Content-Length: 0

<------------->
--- (9 headers 0 lines) ---
Looking for s in default (domain 192.168.15.118)

<------------->
--- (9 headers 0 lines) ---
Looking for s in default (domain 192.168.15.118)

<--- Transmitting (NAT) to 192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.71:45616;branch=z9hG4bK40d81d1686d23c9133e52f4180c2accb353134;received=192.168.15.71;rport=45616
From: "211" <sip:211@192.168.15.118>;tag=4017391219
To: "211" <sip:211@192.168.15.118>;tag=as52fe1845
Call-ID: 09809b7ed9a68b7f270f33f1d8de13dc@192.168.15.71
CSeq: 4619 OPTIONS
Server: Asterisk PBX 1.8.11.0
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Contact: <sip:192.168.15.118:5060>
Accept: application/sdp
Content-Length: 0

<------------>
Scheduling destruction of SIP dialog '09809b7ed9a68b7f270f33f1d8de13dc@192.168.15.71' in 32000 ms (Method: OPTIONS)
Reliably Transmitting (NAT) to 192.168.15.71:45616:
OPTIONS sip:211@192.168.15.71:45616;transport=udp SIP/2.0
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK13b8cca8;rport
Max-Forwards: 70
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as6e6638f8
To: <sip:211@192.168.15.71:45616;transport=udp>
Contact: <sip:asterisk@192.168.15.118:5060>
Call-ID: 76f6f373769041c3462ebb676641f1b7@192.168.15.118:5060
CSeq: 102 OPTIONS
User-Agent: Asterisk PBX 1.8.11.0
Date: Sat, 12 Jan 2013 19:54:31 GMT
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Content-Length: 0

---

<--- SIP read from UDP:192.168.15.71:45616 --->
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK13b8cca8;rport=5060;received=192.168.15.118
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as6e6638f8
To: <sip:211@192.168.15.71:45616;transport=udp>
Call-ID: 76f6f373769041c3462ebb676641f1b7@192.168.15.118:5060
CSeq: 102 OPTIONS
Content-Length: 0

<------------->
--- (7 headers 0 lines) ---
Really destroying SIP dialog '76f6f373769041c3462ebb676641f1b7@192.168.15.118:5060' Method: OPTIONS
Really destroying SIP dialog '9eeee094f46eec920ac462e291314bde@192.168.15.71' Method: OPTIONS
Reliably Transmitting (NAT) to 192.168.15.71:45616:
OPTIONS sip:211@192.168.15.71:45616;transport=udp SIP/2.0
Via: SIP/2.0/UDP 192.168.15.118:5060;branch=z9hG4bK47a8a134;rport
Max-Forwards: 70
From: "asterisk" <sip:asterisk@192.168.15.118>;tag=as76426de6
To: <sip:211@192.168.15.71:45616;transport=udp>
Contact: <sip:asterisk@192.168.15.118:5060>
Call-ID: 3a98a25b41dc3b3e699ee4383669e984@192.168.15.118:5060
CSeq: 102 OPTIONS
User-Agent: Asterisk PBX 1.8.11.0
Date: Sat, 12 Jan 2013 19:54:34 GMT
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Content-Length: 0 
```

我在本地网络（LAN）上使用星号....

**我在 extensions.conf 中的拨号计划是：**

```
[incoming-calls-wildcard]

exten => _2XX,hint,(SIP/${EXTEN},,120)

exten => _2XX,1,Dial(SIP/${EXTEN},,120)

exten => _2XX,n,Hangup 
```

**我的 sip 帐户是：**

```
[215]

deny=0.0.0.0/0.0.0.0

secret=very123

dtmfmode=rfc2833

canreinvite=no

context=incoming-calls-wildcard

host=dynamic

type=friend

nat=yes

port=5060

qualify=yes

callgroup=

pickupgroup=

dial=SIP/215

mailbox=215@device

permit=0.0.0.0/0.0.0.0

callerid=device <215>

callcounter=yes

faxdetect=no 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T05:19:08.167

感谢本论坛中的每一个人的期待......我已经设法解决了这个问题......这两个设备“xlite/zoiper”和“android native sip”客户端使用不同的默认音频编解码器。

xlite 的默认编解码器是 BroadVoice-32

zoiper 的默认编解码器是 GSM

android 的默认编解码器是 G.711 uLaw

因为这些设备在相互通信时应该使用相同的编解码器。在我的场景中，这些设备使用不同的编解码器，这会导致单向音频（从 android 调用到 xlite/zoiper 时）。在 sip.conf 中创建 SIP 帐户时，我们可以通过以下方式强制两个通信客户端使用相同的音频编解码器。

```
[211]
deny=0.0.0.0/0.0.0.0
secret=123456
dtmfmode=rfc2833
canreinvite=no
context=incoming-calls-wildcard
host=dynamic
nat=yes
type=friend
port=5060
qualify=yes
callgroup=
pickupgroup=
permit=0.0.0.0/0.0.0.0
callcounter=yes
faxdetect=no
disallow=all    (disable default audio codec)
allow=ulaw   (allow uLaw audio codec)

[215]
deny=0.0.0.0/0.0.0.0
secret=123456
dtmfmode=rfc2833
canreinvite=no
context=incoming-calls-wildcard
host=dynamic
nat=no
type=friend
port=5060
qualify=yes
callgroup=
pickupgroup=
permit=0.0.0.0/0.0.0.0
callcounter=yes
faxdetect=no
disallow=all    (disable default audio codec)
allow=ulaw   (allow uLaw audio codec) 
```

我们还可以通过在两侧选择相同的音频编解码器来配置客户端的音频编解码器设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:22:55.553

好，

配置方面，您的配置似乎没问题。但是，对我来说奇怪的是跟踪中的以下 IP 地址 - 115.167.21.82

你能详细说明这个IP地址是什么吗？我的假设是您位于 NAT 防火墙后面，这是您的外部 IP 地址。在这种情况下，在 /etc/asterisk/sip.conf 中查找“localnet”定义，并定义您的本地网络地址范围。

使用 Elastix 时，它可以自动设置一个 - 但是在进行手动安装时，您必须设置那个。

尼尔小号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:57:04.730

看起来你有 nat 问题：

[http://www.voip-info.org/wiki/view/Asterisk+SIP+NAT+solutions](http://www.voip-info.org/wiki/view/Asterisk+SIP+NAT+solutions)

# php - 从列表中选择产品

> ID：14300983
> 
> 赞同：0
> 
> 时间：2013-01-13T05:35:08.227
> 
> 标签：php, javascript, mysql

我已经在这个项目上工作了很长一段时间，但我仍然坚持这个代码。这是我可以显示产品列表的页面：

```
@mysql_connect("localhost", "root", "") or die();
@mysql_select_db("product") or die();

$result=mysql_query("select * from product_list ORDER BY name ASC");
while($row=mysql_fetch_array($result)){
  a href="show.php?code=$row['serial']|$row['name']
  $row['description'] 
```

show.php 是：

```
//connect to server and select database; you may need it
@mysql_connect("localhost", "root", "") or die();
@mysql_select_db("bibendum") or die();

$serial = intval($_GET['serial']);
$query = "SELECT serial, name, desription FROM product_list WHERE serial = {$serial}"; 

echo "{$row[name]}"; 
```

我收到此错误：

> 注意：未定义的索引：第 7 行的 show.php 中的序列
> 注意：未定义的索引：第 8 行的 show.php 中的序列
> 注意：使用未定义的常量名称 - 第 10 行的 show.php 中假定为“名称”
> 注意：未定义的变量：第 10 行 show.php 中的行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:43:24.393

我认为这：

```
 $serial = intval($_GET['serial']);
$query = "SELECT serial, name, desription FROM product_list WHERE serial = {$serial}"; 

echo "{$row[name]}"; 
```

应该是这样的：

```
 $serial = intval($_GET['code']);
$query = "SELECT serial, name, desription FROM product_list WHERE serial = '".$serial."'"; 
echo $row['name']; 
```

在上面您分配了查询，但您仍然需要执行查询才能获得结果。

这将无法通过 $_GET：

```
 a href="show.php?code=$row['serial']|$row['name']
$row['description'] 
```

如果您正在学习，请不要从使用 mysql 开始.....使用 mysqli 或 PDO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:25:02.720

我还要提醒您检查 $_GET['serial'] 是否有效，而不是例如 0。

# php - 如何使用 mod_rewrite 和 php 创建图像缩略图缓存

> ID：14300984
> 
> 赞同：2
> 
> 时间：2013-01-13T05:35:19.677
> 
> 标签：php, caching, mod-rewrite

我一直在编写一个脚本来使用 PHP 生成较低分辨率的图像副本。我正在努力使用 mod_write 仅当文件不存在时才执行 PHP 脚本

我目前拥有的（可能会有所偏差，因为我今天已经进行了数千次尝试）如下：

```
RewriteCond %{REQUEST_URI} (900x...|...x900)\.(png|jpe?g|gif)
RewriteCond %{HTTP_COOKIE} ^(.*;\ )?(window_resolution=(640))(;\ .*)?$ [NC]
RewriteRule full/(.*) /responsive/cache/480/responsive/$1 [L]

RewriteCond %{REQUEST_URI} (.*)(900x...|...x900)\.(png|jpe?g|gif)
RewriteCond %{HTTP_COOKIE} ^(.*;\ )?(window_resolution=(.*))(;\ .*)?$ [NC]
RewriteCond %{DOCUMENT_ROOT}/responsive/cache/%3%{REQUEST_URI} !-f
RewriteRule .* /responsive/resize.php [L] 
```

目前文件的位置如下：

```
/responsive/full/photo-900x500.jpg 
```

缓存存储：

```
/responsive/cache/ 
```

采用以下格式：

```
/responsive/cache/<resolution>/<original path> 
```

我想要文件的示例：

```
/responsive/cache/768/responsive/photo-900x500.jpg 
```

理想情况下，这将与 wordpress 之类的东西一起使用，我会在其中制作这样的结构

缓存：

```
/cache/ 
```

原件：

```
/wp-content/uploads/* 
```

例子：

```
/cache/768/wp-content/uploads/2012/01/test.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:24:12.367

经过数小时的删除和重新开始，我想出了这个，它似乎工作得很好。如果我愿意，它将保留完整的文件路径，并允许通过库克选择图像大小：

```
RewriteCond %{ENV:REDIRECT_STATUS} $^
RewriteCond %{REQUEST_URI} (900x...|...x900)\.(png|jpe?g|gif)
RewriteCond %{HTTP_COOKIE} ^(.*;\ )?(ricache_width=(480|640|768|992|1170))(;\ .*)?$ [NC]
RewriteRule (.*) /responsive/cache/%3/responsive/$1

RewriteCond %{ENV:REDIRECT_STATUS} $^
RewriteCond %{REQUEST_URI} (.*)(900x...|...x900)\.(png|jpe?g|gif)
RewriteCond %{HTTP_COOKIE} ^(.*;\ )?(ricache_width=(480|640|768|992|1170))(;\ .*)?$ [NC]
RewriteCond %{DOCUMENT_ROOT}/responsive/cache/%3%{REQUEST_URI} !-f
RewriteRule .* /responsive/resize.php [L]

RewriteCond %{ENV:REDIRECT_STATUS} $^
RewriteRule .* - [L] 
```

它缺少一个 404（这没什么大不了的，我在 PHP 中有一个备份，但我需要替换它）。但至少这是一个很好的起点！:)

# javascript - 单击表格中的图像

> ID：14300985
> 
> 赞同：3
> 
> 时间：2013-01-13T05:35:20.877
> 
> 标签：javascript, jquery, html, css

目前，当鼠标拖到一个单元格上时，下面的代码将突出显示允许的单元格以将所选部分拖到。

我需要修改代码以包括点击。例如，当鼠标拖过一个单元格时，允许的单元格会突出显示。单击同一单元格时，允许的单元格将保持突出显示，直到再次单击原始单元格或单击突出显示的位置之一，图像将出现的位置。我怎样才能做到这一点？

谢谢。

[当前小提琴](http://jsfiddle.net/bLb3H/42/)。

HTML：

```
<table border="1" id="tbl">
  <tr>
    <td ></td>
    <td  bgcolor=#000000 ></td>
    <td class="items  p1 p3"><img src="http://icons.iconarchive.com/icons/deleket/soft-  scraps/32/Button-Blank-Red-icon.png"/></td>
  </tr>
  <tr>
    <td bgcolor=#000000 ></td>
    <td class="items  p1"></td>
    <td class="items p3" bgcolor=#000000 ></td>
  </tr>
  <tr>
    <td class="piece" id="p1" ><img src="http://icons.iconarchive.com/icons/deleket/soft-scraps/32/Button-Blank-Gray-icon.png"></td>
    <td bgcolor=#000000 ></td>
    <td class="piece" id="p3" ><img src="http://icons.iconarchive.com/icons/deleket/soft-scraps/32/Button-Blank-Gray-icon.png" ></td>
  </tr>
</table> 
```

jQuery：

```
$('img').draggable({  });
$('#tbl td').droppable({
  hoverClass: 'over',
  drop: function(event, ui) {
    if ($(this).css("background-color")==='rgb(255, 255, 0)') {
      $(this).children('img').remove();
      var cell = ui.draggable.appendTo($(this)).css({
        'left': '0',
        'top': '0'
      });
      $('img').draggable('disable');
    } else {
      ui.draggable.draggable('option','revert',true);
    }
    $("td").each(function() {
      var id = $(this).attr("id");
      $("."+id).css("background", "");
    });
  }
});
$(".piece").mouseover(function() {
  id = $(this).attr('id');
  $("."+id).css("background", "yellow");
}).mouseleave(function() {
  id = $(this).attr('id');
  $("."+id).css("background", "");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:46:43.697

我认为这增加了您正在寻找的功能：

## [jsFiddle](http://jsfiddle.net/bLb3H/45/)

**JS**

```
var imgs = $('img'); 

imgs.draggable({  });

$('#tbl td').droppable({
    hoverClass: 'over',
    drop: function(event, ui) {
        var cell = $(this); 
        var img = ui.draggable;

        if (cell.hasClass("yellow")) {      
          cell.children('img').remove();
          img.appendTo(cell).css({
            'left': '0',
            'top': '0'
          });
          img.draggable('disable');
        } else {                     
          img.draggable('option','revert',true);      
        }

        $('.yellow').removeClass('yellow');  

        setUpHover(); 
    }
});

imgs.click(function(){
  //the image we just clicked on
  var img = $(this); 
  //The cells we can move our image to.
  var cells = $("." + img.parent().attr('id'));

  //disable dragging of other images while this one is in focus
  imgs.not(img).draggable('disable');
  //disable the hover event so that we don't lose our highlighted cells
  imgs.unbind('hover'); 
  //add a dynamic click event to the cells we're allowed to click on. 
  cells.click(function(){
    //re-enable dragging for all images
    imgs.draggable('enable'); 
    //remove the dynamic click event and remove the yellow background
    cells.unbind('click').removeClass('yellow'); 
    //add the image to the cell. 
    $(this).html(img); 
    //re-bind the hover event.
    setUpHover(); 
  }); 
}); 

function setUpHover(){
  imgs.unbind('hover').hover(function() {
    var id = $(this).parent().attr('id');
    $("."+id).addClass("yellow");
  }, function() {
    var id = $(this).parent().attr('id');
    $("."+id).removeClass("yellow");       
  });
} 
setUpHover(); 
```

**CSS**

```
#tbl td { width:32px; height:32px;}
.over { background-color: red; }
.yellow {
  background-color:yellow !important;     
} 
```

# javascript - Angularjs 指令：隔离范围和属性

> ID：14300986
> 
> 赞同：48
> 
> 时间：2013-01-13T05:35:28.537
> 
> 标签：javascript, angularjs

请在[此处查看示例](https://github.com/IgorMinar/foodme/blob/master/app/js/directives/fmRating.js)

```
foodMeApp.directive('fmRating', function() {
  return {
    restrict: 'E',
    scope: {
      symbol: '@',
      max: '@',
      readonly: '@'
    },
    require: 'ngModel',
    link: function(scope, element, attrs, ngModel) {

      attrs.max = scope.max = parseInt(scope.max || 5, 10);
... 
```

Angular 需要在隔离范围对象中定义`symbol`,以从父范围访问它。`max``readonly`

它在[这里使用](https://github.com/IgorMinar/foodme/blob/master/app/views/menu.html)

`<fm-rating ng-model="$parent.restaurant.price" symbol="$" readonly="true"></fm-rating>`

那么，这样做的目的是`attrs`什么？无法访问通过的所有属性`attrs`。为什么不能一个访问 max as`attrs.max`而不是`scope.max`

为什么要分配回来 like `attrs.max = scope.max`？

由于这个应用程序是由 Angular 作者编写的，我希望有一个理由。

谢谢。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-01-14T16:44:22.740

> attrs 的目的是什么？

在与指令相同的元素上定义的属性有几个目的：

1.  它们是将信息传递到使用隔离范围的指令的唯一方法。由于指令隔离作用域在原型上不是从父作用域继承的，因此我们需要一种方法来指定要传递给隔离作用域的内容。因此，“对象哈希”中的“@”、“=”和“&”都需要一个属性来指定要传递的数据/信息。
2.  它们用作指令间通信机制。（例如，[独立管理独立 AngularJS 指令之间的通信](https://stackoverflow.com/questions/13639399/managing-communication-between-independent-angularjs-directives-independenly/14298481#14298481)）
3.  他们[规范化](https://stackoverflow.com/questions/14289459/html-element-attribute-names-with-hyphens-are-auto-converted-to-camelcase/14289581#14289581)属性名称。

> 不能访问通过 attrs 传递的所有属性吗？

是的，你可以，但是

1.  你不会有任何数据绑定。
    '@' 设置单向“字符串”数据绑定（父作用域 → 指令隔离作用域） 使用 @ 您在指令中看到/获取的值始终是字符串，因此如果您尝试传递反对你的指令。
    '=' 设置双向数据绑定（父范围 ↔ 指令隔离范围）。
    如果没有数据绑定，您的指令将无法 $watch 或 $observe 自动更改模型/数据。
2.  带有 s 的属性值`{{}}`会给你带来问题，因为它们不会被插值。
    假设我们有`<my-directive name="My name is {{name}}">`并且父作用域有`$scope.name='Mark'`. 然后，在链接函数内部，`console.log(attrs.name)`结果为`undefined`.
    如果 name 是使用“@”定义的隔离范围属性，则`attrs.$observe('name', function(val) { console.log(val) })`结果为`My name is Mark`. （请注意，在链接函数内部，必须使用 $observe() 来获取插值。）

> 为什么不能将 max 的一个值访问为 attrs.max 而不是 scope.max

上面回答了

> 为什么要像 attrs.max = scope.max 一样分配回去？

我能想到这样做的唯一原因是，以防某些其他指令需要查看此属性/值（即指令间通信）。但是，另一个指令需要在该指令之后运行才能使其工作（可以通过`priority`指令设置在一定程度上进行控制）。

摘要：在具有隔离范围的指令中，通常您不想使用`attrs`. （我想这可能是一种将初始化数据/值发送到指令中的方法——即，如果您不需要这些值的数据绑定并且不需要插值。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T12:06:17.893

使用 attrs 您可以访问 html 标签中定义的属性，例如

```
<fm-rating ng-model="$parent.restaurant.price" symbol="$" readonly="true"> 
```

因此，在这种情况下，您将可以访问**symbol**和**readonly**属性。您在自定义指令中定义的每个属性都可用于**attrs**变量。

块：

```
attrs.max = scope.max = parseInt(scope.max || 5, 10); 
```

将**解析并将**当前**scope.max**值或**5**（如果不存在）分配给 scope.max 和 attrs.max。这样，**在分配之后，您可以从 attrs.max 中读取**。在此之前 attrs.max 属性未定义。

检查 fmRating.js 源我不知道为什么/在哪里/何时使用这段代码。

# extjs - Extjs4 在状态栏的最左侧设置一个按钮

> ID：14300988
> 
> 赞同：0
> 
> 时间：2013-01-13T05:36:20.097
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我有一个状态栏，我想在它的最左侧设置一个按钮。我可以使用边距将其放置在左侧，但它并未完全设置在左侧。但我需要这样做。谁能帮我解决这个问题？！下面是我的代码：

```
me.tbar = Ext.create('Ext.ux.StatusBar', {
        id: 'showgridtbar',
        tooltip: 'Print Payment Details',
        topBorder:false,
        items: [
          {xtype: 'button', iconCls: 'printp', margin: '0 0 0 -90', tooltip: 'Print Payment Details'}
        ],
    }), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:07:21.703

这很简单，你需要`statusAlign: 'right'`像这样使用

```
bbar: Ext.create('Ext.ux.StatusBar', {
     statusAlign: 'right', // the magic config
     items: [{
            text: 'A Button'
     }, '-', 'Plain Text', ' ', ' ']
}) 
```

这是一个**[JSFiddle](http://jsfiddle.net/sran/czrt6/29/)**

# sql-server - 最适合 VB 8 Express Edition 的 SQL 服务器？

> ID：14300992
> 
> 赞同：0
> 
> 时间：2013-01-13T05:37:36.870
> 
> 标签：sql-server, vb.net

我即将在 VB 上开始一个项目。为此，我使用的是 Visual Basics 2008 Express Edition。所以我只是想知道哪个是最适合的 SQL Server。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:40:38.607

SQL Server 2008 是与 VS 2008 一起发布的，因此建议使用它的一种变体。Express Edition 将运行良好。如果你想使用User Instances（比如当数据库文件存放在`App_Data`一个网站的文件夹中时，你*需要*安装Express Edition。另外，如果你打算在实际生产环境中*使用*任何数据相关的项目，但是不想花钱，这是唯一可以免费使用的选择。

当然，您可能需要考虑产品的使用年限。VS 2008 本身落后 2 代（目前，2013 年 1 月），SQL Server 2008 也是如此。您可以轻松使用 SQL Server 和 Visual Studio 的更高版本（在 Express Editions 中），我通常建议升级到可安装在您的机器上的最新版本。

* * *

如果您想尝试*所有*SQL Server 功能，建议您试用安装版或开发版 - 但对于后者，您需要 MSDN 许可证，如果您想尝试那么远，您应该认真考虑迁移来自 VS Express。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:55:22.080

Microsoft SQL Server 2008 R2 相得益彰。它是免费的，您可以使用存储过程、函数等。

# android - 使用 Jsoup 解析文本文件

> ID：14300995
> 
> 赞同：1
> 
> 时间：2013-01-13T05:38:15.323
> 
> 标签：android, parsing, html-parsing, jsoup, android-file

`Continent.txt`我的res/raw 文件夹中有一个文件。它里面包含以下内容。

```
<div class="continents"> 
  <a href="#US">US</a> 
  <a href="#CA">Canada</a> 
  <a href="#EU">Europe</a> 
</div> 
```

我可以使用 jsoup 解析**美国、加拿大、欧洲**的文本，但是当我将它们显示到 TextView 时，它们会显示在一行中。输出看起来像这样。

**美国 加拿大 欧洲**

我希望输出是这样的。

**我们**

**加拿大**

**欧洲**

这是我的代码。

```
package com.example.readfile;

import java.io.InputStream;
import java.util.ArrayList;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.content.res.Resources;
import android.widget.TextView;

public class MainActivity extends Activity {
    TextView txtContinent;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        txtContinent = (TextView) findViewById(R.id.textView1);

        new MyTask().execute();
    }

    class MyTask extends AsyncTask<Void, Void, ArrayList<String>> {

        ArrayList<String> arr_linkText = new ArrayList<String>();

        @Override
        protected ArrayList<String> doInBackground(Void... params) {

            Document doc;

            try {
                Resources res = getResources();
                InputStream in_s = res.openRawResource(R.raw.continent);

                byte[] b = new byte[in_s.available()];
                in_s.read(b);

                doc = Jsoup.parse(new String(b));
                Element link = doc.select("a").first();
                String text = doc.body().text(); 

                arr_linkText.add(text);

            } catch (Exception e) {
                // e.printStackTrace();
                txtContinent.setText("Error: can't open file.");
            }

            return arr_linkText; // << retrun ArrayList from here
        }

        @Override
        protected void onPostExecute(ArrayList<String> result) {

            for (String temp_result : result) {

                txtContinent.append(temp_result + "\n");
            }

        }

    }

} 
```

我不知道如何逐行读取文件，希望有人能向我说明。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:57:43.833

您正在一次获取整个文档正文的文本。您需要按每个元素解析它，就像这样

```
Elements links = doc.select("a");
for (Element link : links) {
    arr_linkText.add(link.text());
} 
```

如果不清楚，上面的代码旨在替换以下代码 -

```
Element link = doc.select("a").first();
String text = doc.body().text(); 

arr_linkText.add(text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T05:49:37.380

你设置[`android:inputType`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)包括`textMultiLine`吗？

# .htaccess - 这个 mod_rewrite RewriteRule 代码有什么问题？

> ID：14300996
> 
> 赞同：1
> 
> 时间：2013-01-13T05:38:20.663
> 
> 标签：.htaccess, mod-rewrite, apache2

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    public/    [L]
    RewriteRule    (.*) public/$1    [L]
</IfModule> 
```

我在 Windows 7 上使用 wamp apache。在 httpd.conf 中启用了 mod_rewrite.so。此代码直接取自此处的教程：http: [//anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/](http://anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/)

其目的是将调用重定向到实际逻辑所在的 ./public 文件夹。

当我尝试浏览此 .htaccess 文件目录中的 index.php 时，出现内部服务器错误 (http 500)。当我删除两个重写语句时，它起作用了。

不知道为什么，但日志文件夹中没有显示错误。没有任何错误日志。

关于这里出了什么问题的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:59:12.677

您的表达式 ,`(.*)`匹配目标 , `/public/something`。重写引擎循环，直到请求 URI 停止更改，并且您的请求 URI 变成`/public/public/public/public/public`etc，因为没有什么可以停止重写过程。尝试添加条件以防止循环：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule ^$   public/     [L]
    RewriteCond %{REQUEST_URI} !^/public/
    RewriteRule (.*) public/$1   [L]
</IfModule> 
```

因此，如果请求已经以 开头`/public`，则不要应用该规则。