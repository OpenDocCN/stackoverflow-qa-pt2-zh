# StackOverflow 问答 13506000-13506999

# asp.net-4.5 - 使vs2010项目dll与visual studio 2012兼容

> ID：13506009
> 
> 赞同：0
> 
> 时间：2012-11-22T04:42:02.873
> 
> 标签：asp.net-4.5

我已经使用 vs2010 创建了一个项目，现在我正在使用 vs2012 但我收到错误

```
Error   1   The type 'Microsoft.Practices.EnterpriseLibrary.Common.Instrumentation.IInstrumentationEventProvider' is defined in an assembly that is not referenced. You must add a reference to assembly 'Microsoft.Practices.EnterpriseLibrary.Common, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'. C:\Users\dcss3\Desktop\21nov2012\NuggettsCloud\AppDAL\AssetCardDAL.cs   103 18  AppDAL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:52:44.443

尝试将程序集引用 Microsoft.Practices.EnterpriseLibrary.Common 添加到您的项目中。可以通过右键单击项目中的引用节点并选择“添加引用”来完成。

# java - 使用 jxl 解析 Excel

> ID：13506015
> 
> 赞同：3
> 
> 时间：2012-11-22T04:42:41.437
> 
> 标签：java, excel, jakarta-ee, date, jxl

我使用 jxl 读取 .xls 文件，以下是我解析 xls 文件的代码。它工作正常，但问题是当我插入日期字段时，它只读取年份的最后两位数字。例如，如果我输入 12/13/2088 和 12/13/1988。它都将读取为 12/13/88。有没有解决这个问题的方法。我可以对 excel 单元格进行格式化或更改我当前的代码吗？

```
ArrayList listDet=new ArrayList();
    HashMap mapDet=null;
    HashMap primeDetails=new HashMap();

    WorkbookSettings ws = null;
    Workbook workbook = null;
    Sheet s = null;
    Cell rowData[] = null;
    int rowCount = '0';
    int columnCount1 = '0';
    int columnCount = '0';
    DateCell dc = null;
    int totalSheet = 0;

    try {
        ws = new WorkbookSettings();
        ws.setLocale(new Locale("en", "EN"));
        ws.setCellValidationDisabled(true);

        workbook = Workbook.getWorkbook(fileInputStream, ws);

        totalSheet = workbook.getNumberOfSheets();
        //Getting Default Sheet i.e. 0
        s = workbook.getSheet(0);

        //Total Total No Of Rows in Sheet, will return you no of rows that are occupied with some data
        System.out.println("Total Rows inside Sheet:" + s.getRows());
        rowCount = s.getRows();

        //Total Total No Of Columns in Sheet
        System.out.println("Total Column inside Sheet:" + s.getColumns());
        columnCount = s.getColumns();

        //Reading Individual Row Content
        for (int i = 0; i <rowCount ; i++) {
            //Get Individual Row
            rowData = s.getRow(i);
                mapDet=new HashMap();
                mapDet.put("col1",rowData[0].getContents());
                mapDet.put("col2",rowData[1].getContents());
                mapDet.put("col3",rowData[2].getContents());
                mapDet.put("col4",rowData[3].getContents());
                mapDet.put("col5",rowData[4].getContents());
                mapDet.put("col6",rowData[5].getContents());
                mapDet.put("col7",rowData[6].getContents());
                mapDet.put("col8",rowData[7].getContents());
                mapDet.put("col9",rowData[8].getContents());

                listDet.add(mapDet);

    }
        workbook.close();           
    } catch (IOException e) {
        e.printStackTrace();
    } catch (BiffException e) {
        e.printStackTrace();
    }
    catch(Exception exp)
    {

        exp.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-23T20:37:29.770

根据[javadocs/2_6_10/docs/jxl/Cell](http://jexcelapi.sourceforge.net/resources/javadocs/2_6_10/docs/jxl/Cell.html)方法： **getContents()**是一个 *“快速而肮脏的函数，用于将此单元格的内容作为字符串返回。”*

由于**getContents()**不允许完全控制格式，您可以定义自己的函数来控制`CellType.DATE`; 例如：

```
 private String getContents(Cell cell) {
    DateCell dCell=null;
    if(cell.getType() == CellType.DATE)
    {
      dCell = (DateCell)cell;
      // System.out.println("Value of Date Cell is: " + dCell.getDate()); 
      // ==> Value of Date Cell is: Thu Apr 22 02:00:00 CEST 2088
      SimpleDateFormat sdf=new SimpleDateFormat("yyyy-MM-dd");  
      // System.out.println(sdf.format(dCell.getDate()));
      // ==> 2088-04-22   
      return sdf.format(dCell.getDate());
    }
    // possibly manage other types of cell in here if needed for your goals   
    // read more: http://www.quicklyjava.com/reading-excel-file-in-java-datatypes/#ixzz2fYIkHdZP 
    return cell.getContents();
} 
```

那么你只需要根据调用你自己的私有函数来改变代码：

```
mapDet.put("col1", getContents(rowData[0]));
mapDet.put("col2", getContents(rowData[1]));
mapDet.put("col3", getContents(rowData[2]));
mapDet.put("col4", getContents(rowData[3]));
mapDet.put("col5", getContents(rowData[4]));
mapDet.put("col6", getContents(rowData[5]));
mapDet.put("col7", getContents(rowData[6]));
mapDet.put("col8", getContents(rowData[7]));
mapDet.put("col9", getContents(rowData[8])); 
```

代替

```
mapDet.put("col1",rowData[0].getContents());
...
mapDet.put("col9",rowData[8].getContents()); 
```

# php - PHP 正则表达式匹配

> ID：13506016
> 
> 赞同：-2
> 
> 时间：2012-11-22T04:42:47.210
> 
> 标签：php, preg-match

我正在尝试使用 preg_match 在我的网址中查找匹配的 ID 123。我尝试了以下方法：

```
$stringurl = "/category/any-text-string/123";

preg_match( '/\/category\/[\w|\W]+\/(\d+)/', $stringurl, $matches); 
```

结果：

```
array(2) { [0]=> string(21) "/category/any-text-string/123" [1]=> string(2) "123" } 
```

stringurl 可以是“/category/any-text-string/123?querystring”

我需要建议上面的表达式是否可以，或者是否有比上面更好的正则表达式模式，因为我对正则表达式很陌生。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:48:43.333

为什么这么难？尝试

```
$stringurl = "/category/any-text-string/123";
$url = explode('/',$stringurl);
in_array('123',$url); // Returns TRUE if found in the array, FALSE otherwise. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:10:01.380

我认为以下 RegExp 将更好地满足您的需求：

```
/^\/category\/[^\/]+\/(\d+)(?:\?.*)?$/ 
```

*   使用`^`and`$`匹配字符串的开头和结尾。没有它们，您将匹配以下字符串：`"/abc/category/any-text/123"`和`"/category/any-text/123abc"`

*   明确检查该`"?querystring"`部分。使其成为可选的。

*   用于`\/[^/]+\/`匹配两个斜杠之间的任何文本字符串（斜杠除外）。如果您不排除斜杠，那么您还将匹配以下字符串：`"/category/abc/def?a=/123"`

一般注意事项：

*   Within a character class just list the chars you want to match, don't separate them with `|` (unless `|` is one of the chars you want to match). So in your original regexp, `[\w|\W]` should have just been `[\w\W]`.

*   Don't use `[\w\W]` to mean "any character". Just use `.`.

# python - 过滤掉 ANSI 转义序列

> ID：13506033
> 
> 赞同：9
> 
> 时间：2012-11-22T04:43:39.767
> 
> 标签：python, ansi-escape

我有一个 python 脚本，它试图解释分别写入和读取 stdout 和 stdin 的数据跟踪。问题是这些数据充满了我不关心的 ANSI 转义。这些转义是 JSON 编码的，所以它们看起来像“\033[A”和“\033]0;”。我实际上不需要解释代码，但我确实需要知道每个代码中包含多少个字符（您会注意到第一个序列是 6 个字符，而第二个是 7 个字符）。有没有一种直接的方法可以从我拥有的字符串中过滤掉这些代码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-11-25T20:09:22.593

控制序列（又名 ANSI 转义序列）的完整正则表达式是

```
/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/ 
```

请参阅[ECMA-48 第 5.4 节](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-048.pdf "编码字符集的控制函数")和[ANSI 转义码](https://en.wikipedia.org/wiki/ANSI_escape_code#CSI_codes "ANSI 转义码")

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T06:51:40.230

另一种变体：

```
def strip_ansi_codes(s):
    """
    >>> import blessings
    >>> term = blessings.Terminal()
    >>> foo = 'hidden'+term.clear_bol+'foo'+term.color(5)+'bar'+term.color(255)+'baz'
    >>> repr(strip_ansi_codes(foo))
    u'hiddenfoobarbaz'
    """
    return re.sub(r'\x1b\[([0-9,A-Z]{1,2}(;[0-9]{1,2})?(;[0-9]{3})?)?[m|K]?', '', s) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T07:46:23.513

```
#!/usr/bin/env python
import re

ansi_pattern = '\033\[((?:\d|;)*)([a-zA-Z])'
ansi_eng = re.compile(ansi_pattern)

def strip_escape(string=''):
    lastend = 0
    matches = []
    newstring = str(string)
    for match in ansi_eng.finditer(string):
        start = match.start()
        end = match.end()
        matches.append(match)
    matches.reverse()
    for match in matches:
        start = match.start()
        end = match.end()
        string = string[0:start] + string[end:]
    return string

if __name__ == '__main__':
    import sys
    import os

    lname = sys.argv[-1]
    fname = os.path.basename(__file__)
    if lname != fname:
        with open(lname, 'r') as fd:
            for line in fd.readlines():
                print strip_escape(line).rstrip()
    else:
        USAGE = '%s <filename>' % fname
        print USAGE 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-21T07:56:40.493

这对我有用：

```
re.sub(r'\x1b\[[\d;]+m', '', s) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T05:37:53.773

它远非完美，但这个正则表达式可能会让你有所收获：

```
import re
text = r'begin \033[A middle \033]0; end'
print re.sub(r'\\[0-9]+(\[|\])[0-9]*;?[A-Z]?', '', text) 
```

它已经正确删除了您的两个示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-25T02:38:52.107

FWIW，这个 Python 正则表达式似乎对我有用。我实际上不知道它是否准确，但从经验上看它似乎有效：

```
r'\\033[\[\]]([0-9]{1,2}([;@][0-9]{0,2})*)*[mKP]?' 
```

# delphi - 如何在 Delphi 中对转义的宽字符串进行转义？

> ID：13506036
> 
> 赞同：1
> 
> 时间：2012-11-22T04:44:15.463
> 
> 标签：delphi, pascal, widestring

我的一些宽字符串包含用 转义的字符例如：宽字符串源看起来像：`'&#32;&#32;&#32;'` 转换后的结果必须是 `' '`（3 个空格）。

函数应该看起来像

```
function UriUnescape(const aSrc: WideString): WideString;
begin
  //Your code goes here
end; 
```

注意：1）我使用的是 Delphi 7。

2) 这个宽字符串是 SOAP 响应而不是 HTML 的一部分。

3) 通常，此方法应接受字母数字字符作为宽字符串的一部分：示例输入 :='be @' 结果 := 'be @'

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T07:07:57.607

您的 C# 链接是关于 URL 非转义的，但您的源字符串看起来更像是[HTML 编码](http://www.w3schools.com/tags/ref_entities.asp)的。在这种情况下，请参阅单元中[`HtmlDecode`](http://docwiki.embarcadero.com/Libraries/XE3/en/Web.HTTPApp.HTMLDecode)的功能`HttpApp`。

如果您想要 URL 解码，您可以尝试使用[`HttpDecode`](http://docwiki.embarcadero.com/Libraries/XE3/en/Web.HTTPApp.HTTPDecode)Indy 的`TIdURL.URLDecode`.

# openldap - 打开 LDAP 用户创建错误

> ID：13506037
> 
> 赞同：0
> 
> 时间：2012-11-22T04:44:37.400
> 
> 标签：openldap

当我尝试在 ubuntu 的 OpenLDAP 服务器中创建用户时

使用命令 "ldapadd -x -D "cn=Manager,dc=example,dc=com" -W -f user.ldif"

我的 user.ldif 文件是

* * *

dn: uid=john,ou=people,dc=example,dc=com

对象类：inetOrgPerson

对象类：posixAccount

对象类：shadowAccount

用户名：约翰

sn：母鹿

给定姓名：约翰

cn: John Doe

显示名称：John Doe

uid 号：1000

gid号：10000

用户密码：密码

gecos：约翰·多伊

登录外壳：/bin/bash

主目录：/home/john

阴影过期：-1

阴影标志：0

阴影警告：7

shadowMin: 8

阴影最大值：999999

shadowLastChange: 10877

邮件：john.doe@example.com

邮编：31000

l：图卢兹

o：示例

手机：+33 (0)6 xx xx xx xx

家庭电话：+33 (0)5 xx xx xx xx

职称：系统管理员

邮寄地址：

缩写：JD

* * *

我收到错误

“附加信息：objectClass：值 #0 每个语法无效”

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T03:22:40.240

好的，我将此帐户添加到我附近的一个测试盒中。我唯一需要编辑的是“postalAddress”，因为它是空的。一旦这个问题得到解决，条目就会毫无意外地添加。

考虑到错误与 OBJECTCLASS 相关，我怀疑“postalAddress”为空是否与您的问题有关。

因此，知道它对我有用，我将假设您可能拥有较旧的 OpenLDAP 版本，并且可能其中一个模式文件被错误地编辑，或者完全丢失。然而，这纯粹是一个猜测，考虑到我无法重现这个问题。

最大限度

# magento - 需要为品牌列表重写 URL

> ID：13506042
> 
> 赞同：1
> 
> 时间：2012-11-22T04:45:15.990
> 
> 标签：magento

我想为 SEO 优化制作 URL。

```
My URL is: supplements.html?manufacturer=166
I want URL like: supplements/manufacturer/scivation.html 
```

（scivation 是 id 166 的制造商和补充类别，制造商是属性）

任何帮助将不胜感激。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:05:56.743

因为“补充”是一个类别（会发生变化），所以在没有硬编码的情况下使用书写规则会更加困难。一种可能的解决方案是使用`Mage::getModel('core/url_rewrite')`( [example](https://stackoverflow.com/questions/4154521/gernerate-custom-urls-within-magento) ) 为每个创建路由（使用此方法您可能会遇到问题）

另一种解决方案是更改 url 格式

> /制造商/补充/scivation.html

然后创建一个自定义模块

配置文件

```
<global>
    <rewrite>
      <fancy_url>
            <from><![CDATA[/manufacturer\/(.*)/(.*)/]]></from>
            <to><![CDATA[manufacturer/index/processroute/manufacturername/$2/]]></to>
            <complete>1</complete>
       </fancy_url>
    <rewrite>
</global>
<frontend>
    <routers>
        <tagseo>
            <use>standard</use>
            <args>
                <frontName>customcategory</frontName>
            </args>
        </tagseo>
    </routers>

class MageIgniter_Manufacturer_IndexController extends Mage_Core_Controller_Front_Action
{
     public function processRoute(){
           print_r($requestUri = Mage::app()->getRequest()->getRequestUri()); //supplements/scivation.html
           print_r($this->getRequest()->getParam('manufacturername')); // scivation.html
           print_r($this->getRequest())
           // do you custom logic here base on about request path explode('/', trim($requestUri,'/'))

           //lookup the attribute_id from attribute name 
           //if attribute_id found then try 
           //$this->_forward(string $action, [string|null $controller = null], [string|null $module = null], [ $params = null])
           // to the catalog page
           // else  $this->_forward('defaultNoRoute');

     }
     ... 
```

阅读更多 @

[使用 Magento xml 进行简单的 URL 重写](http://www.excellencemagentoblog.com/simple-url-rewrite-using-magento-xml)

[Magento 路由器 URL - 需要连字符路径名](https://stackoverflow.com/questions/13238428/magento-router-url-need-hyphnated-path-name)

[Magento V1.7 网格视图 - 将制造商属性添加到视图](https://stackoverflow.com/questions/12699980/magento-v1-7-grid-view-add-manufacturer-attribute-to-view)

# javascript - 如何使用 javascript/html 向 Windows 8 商店应用程序添加评分和评论选项？

> ID：13506045
> 
> 赞同：0
> 
> 时间：2012-11-22T04:45:48.890
> 
> 标签：javascript, html, windows-8, microsoft-metro, windows-runtime

我想使用 javascript/html 向 Windows 8 商店应用程序添加评分和评论选项。我想在魅力设置和应用程序栏中添加它。当用户点击它时，用户应该被导航到 Windows 商店中的页面以对其进行评分和审查。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:07:38.357

在我们将应用程序提交到 Windows 应用商店后，设置 Charm 上的“评分和评论”会自动添加到我们的应用程序中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T14:11:38.540

您必须在 Windows 8 商店中找到该应用程序，然后在最左边的列中向下滚动，您可以在“评价此应用程序”下选择一个星号。

如果您点击了“评分和评论”并看到评论，那么您离得太远了，您无法从该页面留下评论。只需返回一页并在最左侧的列中向下滚动即可。

我花了一些力气找到自己，我猜微软已经在考虑更高分辨率的情况下制作了 Windows 8 商店。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:24:32.867

是的，所以一旦您下载了该应用程序，请转到设置并单击评分和评论按钮。您也可以在安装后直接在商店中搜索应用程序并在那里对其进行评分/评论。

阿伦

# python - Python：删除列表中的重复项传递到新列表（递归）

> ID：13506046
> 
> 赞同：1
> 
> 时间：2012-11-22T04:45:55.013
> 
> 标签：python, list, recursion, duplicates, erase

我正在尝试学习递归。我试图将一个列表作为参数并返回一个新列表，其中旧列表中的值仅在新列表中出现一次。我已经这样做了几个小时，但一直卡住。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:52:15.800

```
if (old_list[0] not in new_list): 
```

请注意，此时 new_list 将始终为空，因此此条件将始终为真，并且所有元素都将添加到新列表中。

您的代码距离正常运行只有一点点调整。我认为您应该检查它是否*在旧列表的其余部分中，*而不是检查该项目是否在 new_list 中：

```
if (old_list[0] not in old_list[1:]): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T04:51:35.277

我相信问题出在第二个 if 语句中：

```
def bag_to_set(old_list):
    new_list = []
    if old_list == []:
        new_list = []
    else:
        if (old_list[0] not in old_list[1:]):
            new_list = [old_list[0]] + bag_to_set(old_list[1:])
        else:
            new_list = bag_to_set(old_list[1:])
    return new_list 
```

看起来这通过在条件中用 old_list[1:] 替换 new_list 来解决它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T05:51:04.100

愚蠢的问题：为什么在 else 之后有第二个 if？我认为说起来可能会更顺畅一些：

```
if old_list == []:
  new_list == []
elif old_list[0] not in old_list[1:]:
   new_list = [old_list[0]] + bag_to_set(old_list[1:])
else: 
   new_list = [old_list[0]] + bag_to_set(old_list[1:]) 
```

这避免了 1 级嵌套。一个小问题，但我认为它可能值得扔在那里......

# asp.net - 间距问题

> ID：13506050
> 
> 赞同：2
> 
> 时间：2012-11-22T04:46:44.120
> 
> 标签：asp.net, html, css

```
<div class="w-box-header" style="text-align: right;">
<div class="footer-text">
My Support Representative
</div>
<div>
<asp:Label ID="mcr_Name" runat="server" Text="Test Joe" /><br />
<asp:Label ID="mcr_email" runat="server" Text="mailto@gmail.com" /><br />
<asp:Label ID="mcr_phone" runat="server" Text="P: (800) 555-5555 ext. 143" /><br />
<asp:Label ID="mcr_fax" runat="server" Text="F: (555) 555-5555" />
</div>
</div> 
```

这`<br>`导致在标签上方/下方放置大量空间。有什么办法可以覆盖这个间距并使它们正好在彼此下方？

它看起来像这样：

测试乔

mailto@gmail.com

电话：(800) 555-5555 分机。143

女：(555) 555-5555

如何像这样强制它：

测试 Joe
mailto@gmail.com 电话
：(800) 555-5555 分机。143
楼：(555) 555-5555

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:52:47.330

使用 div，并删除 BR

```
 <div class="w-box-header" style="text-align: right;">
        <div class="footer-text">
            My Engagex Support Representative
        </div>
        <div>
            <div>
                <asp:Label ID="mcr_Name" runat="server" Text="Test Joe" />
           </div>
            <div>
                <asp:Label ID="mcr_email" runat="server" Text="mailto@gmail.com" />
            </div>
            <div>
                <asp:Label ID="mcr_phone" runat="server" Text="P: (800) 555-5555 ext. 143" />
            </div>
            <div>
                <asp:Label ID="mcr_fax" runat="server" Text="F: (555) 555-5555" />
            </div>
        </div>
    </div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T05:12:14.827

首先，这可能是对`<label>`. 您没有标记任何内容，只是显示文本。

> label 元素表示表单控件的标题 (w3)

其次，`<br>`应该在线条划分很重要的情况下使用，而不是出于样式目的（请参阅[此处](https://developer.mozilla.org/en-US/docs/HTML/Element/br)）。

对于 ASP.Net，我会使用更简单的结构：

```
<div><asp:Literal runat="server" text="Foo" /></div>
<div><asp:Literal runat="server" text="Bar" /></div>
<div><asp:Literal runat="server" text="Baz" /></div> 
```

另请参阅：[使用语义 HTML5 和微格式标记联系人以](http://rachaelmoore.name/posts/design/html/html5-microdata-contact-info/)获得更高级的技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:51:01.973

我会通过 CSS 为您的标签添加填充，将它们的显示更改为阻止，并完全删除 br 标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T05:01:45.310

使用 CSS：

```
<div class="w-box-header" style="text-align: right;">
<div class="footer-text">
My Engagex Support Representative
</div>
<div>
<asp:Label ID="mcr_Name" runat="server" Text="Test Joe"  style="display:inline-block;"/><br />
<asp:Label ID="mcr_email" runat="server" Text="mailto@gmail.com" style="display:inline-block;"/><br />
<asp:Label ID="mcr_phone" runat="server" Text="P: (800) 555-5555 ext. 143" style="display:inline-block;"/><br />
<asp:Label ID="mcr_fax" runat="server" Text="F: (555) 555-5555" style="display:inline-block;"/>
</div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T05:04:09.847

是的，这个问题并不难解决。您需要为
标签编写 CSS 样式以更改其默认设置（由用户的 Web 浏览器确定）。
这是可以影响标签之间距离的两个属性。第一个称为边距，这在 Web 浏览器中具有默认值。

下面是一些调整边距的代码：

```
<html>
<head>
...
<style type="text/css">
br {
margin-top: 5px;
margin-bottom: 5px;
}

</style> 
```

或者，您可能需要更改填充

```
...
<style type="text/css">
br {
padding-top: 5px;
padding-bottom: 5px;
}
</style> 
```

如果在将它们的值设置为“0px”并且间距仍然存在之后，这些都不起作用，那么问题不在于
标签。它可以是其他标签元素的填充或边距，或者与您的标签`<img /> , <p>`相邻的任何其他元素。

尽管未选择此答案作为此问题的解决方案，但以下是 html 和 CSS 用于样式化 Web 布局的属性图： ![在此处输入图像描述](../Images/d8550148cf0f70743f7fb04dc942ba6a.png)

在大多数编程情况下，有很多方法可以得出相同的答案。只需确保您在解决站点中类似问题的方式上保持一致。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T05:04:17.480

一个简单的解决方案可能是删除`<br />`标签，而是使用 CSS 以您希望的方式设置这些线条的样式。如果您想在单独的行上显示每条信息，您可以指定它们应该在 CSS 中显示为“块”。

```
<div> 
    <asp:Label ID="mcr_Name" runat="server" Text="Test Joe" style="display:block;" />
    <asp:Label ID="mcr_email" runat="server" Text="mailto@gmail.com" style="display:block;" />
    <asp:Label ID="mcr_phone" runat="server" Text="P: (800) 555-5555 ext. 143" style="display:block;" />
    <asp:Label ID="mcr_fax" runat="server" Text="F: (555) 555-5555" style="display:block;" />
</div> 
```

为了减少该 CSS 代码的冗长和重复，您可以将样式定义移动到`<head>`标记中的元素，如下所示：

```
<head>
    <style type="text/css">
        .block {
            display: block;
        }
    </style>
</head>
<body>
    <div> 
        <asp:Label ID="mcr_Name" runat="server" Text="Test Joe" class="block" />
        <asp:Label ID="mcr_email" runat="server" Text="mailto@gmail.com" class="block" />
        <asp:Label ID="mcr_phone" runat="server" Text="P: (800) 555-5555 ext. 143" class="block" />
        <asp:Label ID="mcr_fax" runat="server" Text="F: (555) 555-5555" class="block" />
    </div>
</body> 
```

`<br />`我个人尽可能避免使用标签。我发现使用 HTML 标记（如`<div>`等`<br />`）只提供文档的**结构**而不提供样式要好得多。

在处理网页**样式（间距、字体、颜色等）时，坚持使用 CSS 取得了更大的成功。**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T05:13:43.640

把它放在你的 CSS 中

```
div {
    border: 1px solid black;
    width: 70px;
    overflow: hidden;
    white-space: nowrap;
} 
```

# c - 显示在反引号之间调用的程序的输出

> ID：13506051
> 
> 赞同：0
> 
> 时间：2012-11-22T04:47:03.743
> 
> 标签：c, linux, xterm, termcap

对于 termcaps 的练习，我必须编写一个程序来显示项目列表并让用户选择其中的一些。然后程序将输出以空格分隔的选定项目。该程序可以这样调用：

```
$> ./my_program foo1 foo2 foo3 
```

或像这样：

```
$> ls `my_program foo1 foo2 foo3` 
```

我的程序在第一种情况下运行良好，但在第二种情况下，my_program 的 stdout 被反引号拦截，不会显示在终端上。我知道程序运行良好，因为如果我盲目地选择一些项目，我会从 ls 得到预期的结果。

在我的程序中，我不能使用任何内置函数，但以下除外： • ioctl • tcsetattr • tcgetattr • tgetent • tgoto • tputs • tgetstr • tparm • open • close • write • malloc • free • read • exit • signal

在第二种情况下调用时，如何向用户显示 my_program 的标准输出？

编辑：我发现的唯一选择是将所有内容输出到stderr并将所选项目输出到stdout ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:42:40.883

您可以打开并写入`/dev/tty`in `my_program`，它只会写入终端而不是重定向的标准输出。

# excel - LastDate-单元格被修改的时间

> ID：13506055
> 
> 赞同：3
> 
> 时间：2012-11-22T04:47:18.690
> 
> 标签：excel, excel-formula

我有 excel 电子表格，我想知道上次修改我的 excel 单元格的日期时间。我可以在 Excel 或 Access 中执行此操作吗？

如果是，我可以使用什么功能？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:28:08.513

在 Excel 中，您可以**跟踪更改**

![查看菜单，跟踪更改](../Images/738a87bb5244498d5b3e8ad266ae21d2.png)

这将打开工作簿进行共享，您甚至可以告诉 Excel 跟踪特定单元格，以及是否要跟踪您的更改。

![更改对话框](../Images/6bac16908b224efa78acccebd5e553ea.png)

这是更改值时看到的示例：

![示例更改](../Images/989972faa2f975bdbb90382400deddd1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T21:32:26.630

您可以使用此跟踪更改功能来找出单元格的最后修改日期并找出用户是谁。

如何跟踪 Excel 2007 中的更改

[http://www.online-tech-tips.com/ms-office-tips/track-changes-in-excel/](http://www.online-tech-tips.com/ms-office-tips/track-changes-in-excel/)

# iphone - 在 iphone 键盘中添加符号

> ID：13506056
> 
> 赞同：1
> 
> 时间：2012-11-22T04:47:27.973
> 
> 标签：iphone, objective-c, ios, keyboard, uikeyboard

我不知道要在 iphone 键盘上添加特殊符号，例如 ® © ℠ ™ 等等。有没有人知道将这些符号添加到键盘或任何其他替代方案或在 textView 中添加这些符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:56:25.470

你必须使用表情符号。或者制作自定义键盘。

[创建自定义键盘并在 iPhone 上进行配置](https://stackoverflow.com/questions/7189287/create-custom-keyboard-and-configure-it-on-your-iphone)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T04:56:41.917

您不能向键盘添加符号。您可以创建自定义键盘视图并使用该`inputView`属性为文本字段设置它。`inputAccessoryView`或者，您可以使用文本字段的属性将工具栏添加到键盘。

如果用户在设置应用程序中添加表情符号键盘，其中几个符号已经可以直接输入。

# frameworks - 在自定义类中使用 ZF2 中的 ServiceLocator 和 Doctrine 2？

> ID：13506059
> 
> 赞同：0
> 
> 时间：2012-11-22T04:47:36.123
> 
> 标签：frameworks, doctrine, zend-framework2

我在 Zend Framework 2 中使用教义 2 时遇到了一点问题在此处的 Jason Grimes 教程[http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/](http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/)中指出。

在他的教程中，它可以工作（我对其进行了测试），因为 ServiceLocator 是从控制器类中调用的，但是对于我正在编写的应用程序，我必须使用自定义（非控制器）类与实体进行交互。我如何实现这一目标？使用不是控制器的自定义类中的服务定位器？谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:48:31.623

你需要做两个步骤

*   `Zend\ServiceManager\ServiceLocatorAwareInterface`在您的自定义类中实现。这允许框架为您注入服务定位器。

*   将您的自定义类转换为服务并使用 Service Manager 检索它。该组件将检查该类是否实现了 ServiceLocatorAwareInterface 并在将实例返回给您之前注入 ServiceLocator

# c - 结构传值

> ID：13506062
> 
> 赞同：1
> 
> 时间：2012-11-22T04:47:56.157
> 
> 标签：c, structure

假设我有一个这样的结构..

```
struct object{
     int id;
     char *name;
     node *list_head; //a pointer to the head of a linked list
};

typedef struct object object; 
```

我静态声明了一个结构变量。我必须将其按值传递给一个函数，该函数将一个元素插入到`temp_obj`如下所示的列表中。

我们可以假设`add_element`and`print_list`函数工作正常。如果我在之后打印列表，`function_a`它将不会打印插入的元素。我认为这是因为我将结构作为值传递，因此所做的更改`function_a`不会反映在`function_a`.

但是由于给定的接口，我必须按值传递结构。在这种情况下，我该怎么做才能反映对原始结构的更改？

```
object temp_obj
function_a(temp_obj);
print_list(temp_obj.list_head);

void function_a(object obj){
    //add an element to the list
    int num = 1;
    add_element(&obj.list_head, num);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T05:26:27.670

你可以在不太繁重的条件下做到这一点，但它是一种欺骗。

如果该`add_element()`函数将新元素添加到列表的末尾，而不是头部，并且如果您安排事情以使列表中有一个初始节点，那么您几乎可以这样做。

证明：

```
#include <assert.h>
#include <errno.h>
#include <stdarg.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

static void err_exit(const char *fmt, ...);

typedef struct node   node;
typedef struct object object;

struct object
{
    int   id;
    char *name;
    node *list_head; //a pointer to the head of a linked list
};

struct node
{
    node   *next;
    object *data;
};

static void add_element(node **list, int value)
{
    assert(list != 0);
    object *new_objt = calloc(sizeof(object), 1);
    node   *new_node = calloc(sizeof(node),   1);
    if (new_objt == 0 || new_node == 0)
        err_exit("Out of memory in %s\n", __func__);
    node *next = *list;
    while (next->next != 0)
        next = next->next;
    next->next = new_node;
    new_node->data = new_objt;
    new_objt->id = value;
}

static void print_list(const node *list)
{
    assert(list != 0);
    node *next = list->next;
    printf("List: ");
    while (next != 0)
    {
        if (next->data != 0)
            printf("%d ", next->data->id);
        next = next->next;
    }
    printf("EOL\n");
}

static void function_a(object obj)
{
    int num = 1;
    add_element(&obj.list_head, num);
}

int main(void)
{
    node   temp_node = { 0, 0 };
    object temp_obj  = { 0, 0, &temp_node };    // Key trick!

    print_list(&temp_node);
    function_a(temp_obj);
    print_list(&temp_node);
    function_a(temp_obj);
    print_list(&temp_node);

    return 0;
}

static void err_exit(const char *fmt, ...)
{
    int errnum = errno;
    va_list args;
    va_start(args, fmt);
    vfprintf(stderr, fmt, args);
    va_end(args);
    if (errno != 0)
        fprintf(stderr, " (%d: %s)", errnum, strerror(errnum));
    putc('\n', stderr);
    exit(EXIT_FAILURE);
} 
```

汇编

```
gcc -O3 -g -std=c99   -Wall -Wextra node.c -o node 
```

输出：

```
List: EOL
List: 1 EOL
List: 1 1 EOL 
```

如果练习的目的是打败一个脑死界面，这可以解决它。如果练习的目的是创建一个可用的界面，那么您可能不会这样做；您将指向结构的指针传递给，`function_a()`以便您可以更改`list_head`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T04:52:30.433

你完蛋了！

如果你不能改变接口，那么就没有办法让“按值传递”像“按引用传递”一样。

您的选项是更改接口以采用一个`object *`或使函数返回一个`object`（或`object*`） - 所有这些选项都需要更改接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:54:24.447

您**不能通过值传递来**做到这一点..您必须更改界面设计并使用引用**传递**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T05:01:36.580

`list_head`是一个指针，那么为什么要这样做：

```
add_element(&obj.list_head, num); 
```

这是正确的方法：

```
add_element(obj.list_head, num); 
```

列表的头部是其中的第一个元素。这永远不会改变，这就是你不需要通过的原因`&obj.list_head`。您只需要列表头的地址，而不需要保存列表头地址的指针的地址。

你的 add_element() 实现应该看起来像这样，假设你的 'node' 结构有一个 'next' 成员：

```
void add_element(node* head, int num)
{
    /* Iterate over the list that starts at 'head' and when we reach the end,
       insert 'num' as a new element */
    node* cur = head;
    while (cur->next != NULL)
        cur = cur->next;
    /* We're at the end. */
    cur->next = malloc(sizeof(node));
    cur->next->next = NULL;
    cur->next->num = num;
} 
```

按值传递将正常工作，因为您的`object`结构具有指针成员。这意味着`object`变量的副本仍将指向相同的数据，因为它们都是浅副本（所有副本共享相同的数据。）

# javascript - 调试包含 JavaScript 和 XML 的 .xml 文件

> ID：13506066
> 
> 赞同：0
> 
> 时间：2012-11-22T04:48:25.563
> 
> 标签：javascript, xml, visual-studio-2012

我正在尝试找到某种 IDE，它可以让我调试其中包含 XML 和 JavaScript 的 .xml 文件。我尝试的每个 IDE 只允许我调试 XML 而不是 JavaScript，它不会读取脚本标签。

# google-analytics - 增加页面加载样本大小对最终用户体验的影响

> ID：13506067
> 
> 赞同：-1
> 
> 时间：2012-11-22T04:48:31.467
> 
> 标签：google-analytics

我有一个网站，每周有大约 500-600 次访问。我想在谷歌分析跟踪代码中将抽样规模增加到 100%。我想知道这是否对我网站的性能有影响

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:23:21.783

与上面的评论相反，谷歌有一个设置样本大小的选项：

[https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setSampleRate](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setSampleRate)

这不会影响您的访问者（因为无论如何都会发送像素，因此会在数据处理期间进行采样）。

不过，如果您只有几百个访问者，我认为这不会有任何区别（我猜 Google 足够聪明，除非必要，否则不会使用采样，并且无论如何您都应该使用 setSampleRate 来使您的样本更小，而不是更大）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T00:35:24.350

**2016年答案**

根据[官方文档](https://support.google.com/analytics/answer/1205784?hl=en)，默认采样率为 1%。如果您的网站流量很少，您可以通过以下方式提高此速率`setSiteSpeedSampleRate()`

# ios - 如何在 iOS 中使用 SSO 实现 Fabcebook 登录以进行对话框提示？

> ID：13506071
> 
> 赞同：1
> 
> 时间：2012-11-22T04:49:31.997
> 
> 标签：ios, dialog, single-sign-on, facebook-login

我想使用对话框实现 Facebook 登录，而不是通过自动启动 Facebook 应用程序或 Safari。

我在我的项目中使用 ARC 并且我已经编译了脚本文件（**build_facebook_ios_sdk_static_lib.sh**），通过编译脚本文件，我在我的 facebook-ios-sdk-master 中获得了包含**lib->facebook-ios-sdk**和内部 facebook的文件夹-ios-sdk 文件夹，我有一些**.h**文件和几个文件。所有这些文件都已拖放到项目中。
问题是如何使用这些`.h`文件和几个文件实现登录对话框。而且我不想通过启动 Facebook 原生应用程序或在 iOS 中启动 Safari 来登录。请问，有答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:11:17.927

您需要在编译之前对 facebook_ios_static 库进行更改。
打开`facebook.m`文件然后转到方法

```
[facebook authorize:nil];
```

并设置

```
[self authorizeWithFBAppAuth:NO safariAuth:NO];
```

然后编译它。
因此，每次调用 fb 登录方法时，登录页面都会在对话框中提示，而不是在 safari 或 facebook 应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:14:21.953

我不认为这是可能的。最好使用标准的东西，因为用户已经习惯了。

iOS6 应该已经和 facebook 集成了，所以不用担心这个。

# opengl - 在 OpenGL 中将 YUV 纹理数据推送到 GPU 上的最有效过程是什么？

> ID：13506072
> 
> 赞同：0
> 
> 时间：2012-11-22T04:49:35.737
> 
> 标签：opengl, opengl-es, h.264

有谁知道以不需要混合的方式将 2vuy 非平面数据推送到 GPU 的有效方法？

我正在从 h264 视频文件中获取原始 2vuy 数据，并成功地将其加载到我映射到 OpenGL 对象的纹理中。我注意到我的代码在`glgProcessPixelsWithProcessor`. 我的`glTexImage2D`电话如下所示：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, width, height, 0, GL_YCBCR_422_APPLE,
    GL_UNSIGNED_SHORT_8_8_APPLE, data); 
```

Apple 在其 OpenGL 指南中说`GL_YCBCR_422_APPLE`，提供“可接受的”性能 (p103)，但是

> 注意：如果您的数据只需要进行混杂，`glgProcessPixels`则执行混杂的速度相当快，尽管不如数据不需要混杂那么快。但是非本地数据格式一次转换一个字节，并且会产生最好避免的性能成本。

我假设 CPU 上正在进行某种内部格式转换。我注意到另一个线程也在`glgProcessPixels`运行块方法。

我的路径是最有效的吗？如果不是，那是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:47:43.877

您现在的代码取决于 Apple 的扩展。我不知道里面发生了什么。

但是我的建议是，您创建三个 2D 纹理，每个纹理只有一个通道，每个纹理接收一个颜色平面；使用独立纹理使支持色度二次采样（即 422）更简单。

然后在着色器中执行色彩空间转换。在写下数学时，我建议您通过接触颜色空间（如 XYZ）来执行此操作，因为这允许您将输出设备的颜色配置文件考虑在内；ICC 配置文件提供从 XYZ 颜色空间坐标到设备颜色空间 (RGB) 坐标的转换数据。

# java - 静态工厂方法

> ID：13506073
> 
> 赞同：4
> 
> 时间：2012-11-22T04:49:43.567
> 
> 标签：java

静态工厂方法的一个优点是：

**与构造函数不同，它们可以返回其返回类型的任何子类型的对象，这为您选择返回对象的类提供了极大的灵活性。**

这到底是什么意思？有人可以用代码解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T04:54:23.540

```
public class Foo {
    public Foo() {
        // If this is called by someone saying "new Foo()", I must be a Foo.
    }
}

public class Bar extends Foo {
    public Bar() {
        // If this is called by someone saying "new Bar()", I must be a Bar.
    }
}

public class FooFactory {
    public static Foo buildAFoo() {
        // This method can return either a Foo, a Bar,
        // or anything else that extends Foo.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T05:06:13.863

让我将您的问题分为两部分
*（1）*与构造函数不同，它们可以返回其返回类型的任何子类型的对象
*（2）*，这为您选择返回对象的类提供了极大的灵活性。
假设您有两个扩展类，`Player`它们是`PlayerWithBall`和`PlayerWithoutBall`

```
public class Player{
  public Player(boolean withOrWithout){
    //...
  }
}

//...

// What exactly does this mean?
Player player = new Player(true);
// You should look the documentation to be sure.
// Even if you remember that the boolean has something to do with a Ball
// you might not remember whether it specified withBall or withoutBall.

to

public class PlayerFactory{
  public static Player createWithBall(){
    //...
  }

  public static Player createWithoutBall(){
    //...
  }
}

// ...

//Now its on your desire , what you want :)
Foo foo = Foo.createWithBall(); //or createWithoutBall(); 
```

*在这里你得到两个答案* **灵活性**和*不同于构造函数的行为* 现在你可以**通过这些工厂方法看到你需要哪种类型的玩家**

# java - 使用 Phpseclib 在 Java 中加密和在 PHP 中解密

> ID：13506077
> 
> 赞同：1
> 
> 时间：2012-11-22T04:50:06.357
> 
> 标签：java, php, rsa, phpseclib

**编辑2：** 问题已解决。我不明白 php 中的 loadkey 函数应该如何工作，我错误地认为它会读取一个密钥文件（它不会）。解决方案是将文件的内容读入一个变量，然后用loadkey加载该变量。

**编辑：** 问题似乎出在钥匙上。我意识到 loadkey 返回 false，表示它无法读取密钥。phpseclib 接受的格式和在 java 中创建的密钥是否存在差异？

* * *

我正在尝试在 Java (android) 中加密 AES 密钥并在 PHP 中解密它以使用对称加密进行数据传输。目前，我能够在 Java 中使用 RSA 加密和解密一个短文件或字符串，但无法在 PHP 中对其进行解密。

我正在使用 phpseclib 在 PHP 中解密，我没有收到任何错误，但我的输出字符串为空。

这是我正在使用的代码：

**爪哇：**

```
File archivo_llave_publica = new File(direccion);
        byte[] bytes_llave = leer(archivo_llave_publica);
        KeyFactory keyFactory = KeyFactory.getInstance("RSA");          
        EncodedKeySpec publicKeySpec = new X509EncodedKeySpec(bytes_llave);
        PublicKey pubKey = keyFactory.generatePublic(publicKeySpec);
        Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
        cipher.init(Cipher.ENCRYPT_MODE, pubKey);
        byte[] cipherData = cipher.doFinal(src);
        return cipherData; 
```

**PHP：**

```
<?php
include('./Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);
$rsa->loadKey('./key/Pri.txt'); // public key
$temprsa = $rsa->decrypt($key);
if ($temprsa==null){echo "null decrypt";} 
```

* * *

用于生成密钥的代码：

```
public void generaArchivoLlaves(String pub_file, String pri_file){
    File LlavePrivada = new File(raiz.getAbsolutePath()+"/Bushfire/"+pri_file);
    File LlavePublica = new File(raiz.getAbsolutePath()+"/Bushfire/"+pub_file);
    try {
        KeyPair kp = generaLlaves();
        byte[] privateKeyBytes = kp.getPrivate().getEncoded();
        byte[] publicKeyBytes = kp.getPublic().getEncoded();
        Toast.makeText(this, "Privada:  "+kp.getPrivate().getFormat(), Toast.LENGTH_LONG).show();
        Toast.makeText(this, "Pública:  "+kp.getPublic().getFormat(), Toast.LENGTH_LONG).show();
        escribir(LlavePrivada, privateKeyBytes);
        escribir(LlavePublica, publicKeyBytes);
    }
    catch (NoSuchAlgorithmException e) {Toast.makeText(this, "Error al generar llave", Toast.LENGTH_LONG).show();}
}

public KeyPair generaLlaves() throws NoSuchAlgorithmException{
    KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
    kpg.initialize(2048);
    KeyPair kp = kpg.genKeyPair();  
    //Toast.makeText(this, "Se generó correctamente", Toast.LENGTH_LONG).show();
    return kp; 
```

}

**注意**：函数 escribir 只是将数据逐字节写入文件。

什么可能导致问题？

# c# - Dispatcher.CheckAccess 从非托管工作线程返回 true

> ID：13506079
> 
> 赞同：0
> 
> 时间：2012-11-22T04:50:43.790
> 
> 标签：c#, .net, multithreading, unmanaged

我的代码如下：

```
 public override void Touch()
   {
        if ( System.Windows.Threading.Dispatcher.CurrentDispatcher.CheckAccess() )
        {
            TouchBase();
        }
        else
        {
            System.Windows.Application.Current.Dispatcher.BeginInvoke(
                    System.Windows.Threading.DispatcherPriority.Send,
                    (Action) (() => TouchBase()) );
        }
    } 
```

我刚刚在 if 块（不是 else 块）中发生了崩溃，因为其中的某些事情必须在主线程上完成，并且调用堆栈清楚地表明这不是主线程，而是一个非托管 IOCP 线程。

所以我的问题是，从非托管线程或其他东西调用 CheckAccess() 是否不起作用？真的可以这么破吗？任何人都知道这里发生了什么。顺便说一句，这个问题很少发生，所以添加一些日志记录的建议并不是那么有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:20:45.123

似乎（我需要一段时间才能确定这一点）正确的做法是调用 System.Windows.Application.Current.Dispatcher.CheckAccess() 。System.Windows.Dispatcher.CurrentDispatcher() 如果未设置，则会创建一个新的调度程序，这似乎是线程不受管理的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T17:00:28.330

System.Windows.Threading.Dispatcher.CurrentDispatcher 为您提供*当前执行*线程的调度程序，而不是应用程序调度程序所在的线程。每个线程都有一个调度程序——但这不是您要查找的调度程序。

System.Windows.Application.Current.Dispatcher 是应用程序的主要调度程序。如果你在这两个地方都使用它，你应该没问题。

# python - GeoDjango 查询问题

> ID：13506081
> 
> 赞同：0
> 
> 时间：2012-11-22T04:50:55.177
> 
> 标签：python, django, geodjango

我是使用 geodjango 的新手，我需要检查一个点是否存在于多面图层中。试用我用

```
x = '640744.97964'
y = '2498614.18957'
p = Point(float(x), float(y), srid=32645)
pt=layer.objects.get(the_geom__contains=p) 
```

但我得到错误`NoneType`对象没有属性`'group'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:39:48.200

使用 filter 而不是 get，因为您不确定这是否会返回 0、1 或 N 层。

```
layer.objects.filter(the_geom__contains=p) 
```

# ruby-on-rails-3 - 系统 ruby /gem 与 RVM ruby /gem

> ID：13506093
> 
> 赞同：1
> 
> 时间：2012-11-22T04:52:22.667
> 
> 标签：ruby-on-rails-3, rvm

我安装了**RVM**，阅读文档并不太理解。例如，我有一个 Rails 应用程序，它创建并运行只是 find（在我安装 RVM 之前），它使用系统 ruby​​ 和系统 gem。现在在我安装 RVM 之后：

1.  我是否需要将这些 gem 重新安装到 RVM 中，以便这些 gem 可以在 RVM 控制下？
2.  如何移植应用程序以使用 RVM gem 而不是系统 gem？
3.  RVM 是 ruby​​ 和 gem 的包装器还是这些 ruby​​ 和 gem 的单独存储库？因此，如果我在 RVM 下安装 gem，则 gem 仅存在于 RVM 中或存在于 RVM 和系统之间，反之亦然。我是在复制还是 RVM 和系统自己同步他们的 gem/系统？

我仍然对 RVM 的商品和用途感到完全困惑。现在，我以前所有无法正常工作的应用程序甚至都没有出现各种错误。

我的环境：Mac OS X 10.8；导轨 3.2.9；文本伴侣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:23:32.973

1.  是的。使用[捆绑器](http://gembundler.com/)，不会有任何痛苦。
2.  它只需要在 RVM 环境中运行。不需要特殊的移植。
3.  它旨在通过替换 $PATH、$GEM_HOME、$GEM_PATH 等环境变量来为每个项目提供单独的环境。

优点：

1.  您可以安装不同的 ruby​​ 解释器来满足应用程序的要求。想象一下，您正在使用 Rails 1.9.3 开始一个新项目，但您仍在使用旧的两个使用 1.8.7 和 1.9.1 并且到目前为止尚未移植。
2.  您的宝石不会相互冲突。例如，Psych 有特殊需求。如果你使用它，你必须在你的所有项目中使用它。但是使用 RVM，您可以为每个项目创建不同的 gemset。
3.  将 gem 目录移动到您获得读写访问权限的目录。这很好，因为不会强制您使用 root 权限编译 gem。

缺点：

1.  在 Fish shell 下长时间使用 RVM 时，我遇到了问题。有两次，几周后整个 RVM 都发疯了，然后就坏了。不详述，我必须删除整个`~/.rvm`目录。在 Bash 下从未发生过。

我使用 RVM 的典型工作流程如下：

1.  添加`ruby "1.9.3"`或等效于我的项目的 Gemfiles 以避免使用错误的 Ruby 版本运行它。
2.  安装 RVM 并安装我需要的 Ruby `rvm install 1.9.3`，.
3.  在给定的项目中，`rvm use 1.9.3`.
4.  安装所需的 gem。
5.  正常使用我的应用程序。

请注意我没有使用 Gemsets。这是因为缺点 #1。我真的很喜欢 Fish shell，没有它就活不下去，而且仅使用 bundler 就可以很好地管理宝石（一个问题：心理）。要使用 Gemsets，在 3\. 和 4\. 之间需要两个额外的步骤：

3a。创建一个`rvm gemset create gemset1`。
3b。使用它`rvm use gemset1@1.9.3`。

在处理一些遗留项目时，我总是使用 RVM。

请参阅此截屏视频：[http](http://railscasts.com/episodes/200-rails-3-beta-and-rvm) ://railscasts.com/episodes/200-rails-3-beta-and-rvm以获得体面的教程。

# shell - 用于在无人值守的情况下生成自签名 ssl 的 shell 脚本

> ID：13506095
> 
> 赞同：5
> 
> 时间：2012-11-22T04:52:32.827
> 
> 标签：shell, ssl, openssl, unattended-processing

我喜欢 95% 完成我的 shell 脚本来从全新安装中安装 Debian 邮件服务器，这是基于我当前正在运行的邮件服务器，我知道它正在工作。我所做的是我已经捕获了 SSL 所需信息的用户输入，但是每次我尝试使用 openssl 生成无人值守的 SSL 时它都会失败。有人可以帮助我吗？我尝试了以下适用于 mysql 更改但对我不起作用的方法。

```
openssl req -new -x509 -days 3650 -nodes -out /etc/ssl/certs/postfix.pem -keyout /etc/ssl/private/postfix.pem<<EOF
$country
$state
$city
$org
$unit
$commonname
$email
EOF 
```

这让我走到了这一步，然后我必须按回车键……不酷，因为我不需要按任何东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-11T18:52:08.223

我在 SaltStack 中使用的是：

```
openssl req -new -x509 -days 365 -nodes \
  -out /etc/ssl/certs/postfix.pem \
  -keyout /etc/ssl/private/postfix.pem \
  -subj "/C=RO/ST=Bucharest/L=Bucharest/O=IT/CN=www.example.ro" 
```

归功于[Sean P. Kane](http://www.codenes.com/blog/?p=300)。

# cakephp-2.0 - CakePHP 2.0 分页顺序子句不适用于 FIELD() 函数

> ID：13506097
> 
> 赞同：1
> 
> 时间：2012-11-22T04:52:40.597
> 
> 标签：cakephp-2.0

我在 cakephp 代码中遇到问题，以下代码工作正常。

```
 $options['conditions'] = array(
        'Tender.archidata_interest !=' => 'Not interesting',            
    );            
    $options['order'] = array(
        "FIELD(Status.flag, 'communication_pending', 'active')"
    );        
    $archidata_tender = $this->Tender->find('all', $options); 
```

但蛋糕分页代码不适用于订单条款。

```
 $tender_cond[] = array('Tender.id' => $local_tenders_id);   
$this->paginate = array('page' => '1', 'limit' => $pagelimit, 'order' => array("FIELD(Status.flag, communication_pending, active)"));$this->set('tenders', $this->paginate('Tender', $tender_cond)); 
```

我正在使用 FIELD(Status.flag, communication_pending, active) 根据以下顺序获取结果，但它不起作用，也没有给出任何错误。需要帮助 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:51:08.733

只是您忘记了分页代码中的引号吗？尝试改变这个：

```
'order' => array("FIELD(Status.flag, communication_pending, active)") 
```

对此：

```
'order' => array("FIELD(Status.flag, 'communication_pending', 'active')") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T05:47:01.813

'order' => "FIELD(Status.flag, communication_pending, active)" 删除数组对我有用 :)

# iphone - iOS：日期格式 - 2012 年 9 月 20 日

> ID：13506102
> 
> 赞同：17
> 
> 时间：2012-11-22T04:52:50.953
> 
> 标签：iphone, ios, date

我想以字符串“2012-11-22 10:19:04”中的“20-Sep-2012”格式显示日期。我怎样才能做到这一点？iOS有什么内置方法吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-22T05:00:57.323

```
NSString *myString = @"2012-11-22 10:19:04";
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.dateFormat = @"yyyy-MM-dd HH:mm:ss";     
NSDate *yourDate = [dateFormatter dateFromString:myString];
dateFormatter.dateFormat = @"dd-MMM-yyyy";
NSLog(@"%@",[dateFormatter stringFromDate:yourDate]); 
```

您的日志将像这样打印。`22-Nov-2012`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T05:00:41.503

尝试这个，

```
NSString *originalDateString = @"2012-11-22 10:19:04";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];//2012-11-22 10:19:04 
```

然后用它来解析日期字符串，

```
NSDate *date = [dateFormatter dateFromString:originalDateString]; 
```

您可以创建一个新的 dateformatter 以新格式打印，或者只是将现有格式重用为，

```
[dateFormatter setDateFormat:@"dd-MMM-yyyy"];//22-Nov-2012
NSString *formattedDateString = [dateFormatter stringFromDate:date];
NSLog(@"Date in new format is %@", formattedDateString); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-13T07:45:38.123

**Swift 3**中 (@Dinesh Raja) 接受的答案：

 **```
override func viewDidLoad() {
super.viewDidLoad()
    print(self.getFormattedDate(myString: "2012-11-22 10:19:04"))
}

func getFormattedDate(myString: String) -> String{
        let dateFormatter = DateFormatter()
        dateFormatter.dateFormat = "yyyy-MM-dd HH:mm:ss"
        let yourDate = dateFormatter.date(from: myString)!
        dateFormatter.dateFormat = "dd-MMM-yyyy"
        return dateFormatter.string(from: yourDate)
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T05:01:28.400

尝试这个

```
 NSString *str = @"2012-11-22 10:19:04";

    NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

    NSDate *date = [dateFormatter dateFromString: str];

    dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:@"dd-MMM-yyyy"];

    NSString *convertedString = [dateFormatter stringFromDate:date];
    NSLog(@"Converted String : %@",convertedString);// Print Log (Output) is 22-Nov-2012 
```

用这种方法查看我的博客所有信息[我的博客链接](http://parasjoshi3.blogspot.in/2012/01/convertstringtodatedatetostring.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T05:01:35.467

您可以通过以下方式实现此目的

```
 NSDateFormatter *dfTime = [[NSDateFormatter alloc] init];
      [dfTime setDateFormat:@"yyyy--MM-dd HH:mm:ss"];
      NSDate *dtTime = [dfTime dateFromString:<Your string>];
      NSDateFormatter *df = [[NSDateFormatter alloc] init];
      [df setDateFormat:@"dd-MMM-yyyy"];
       <Your result string> = [df stringFromDate:dtTime];

Where <Your string> = @"2012-11-22 10:19:04" & 
<Your result string> will be your new string 
```

享受编程**

# chef-infra - 为什么厨师在这里抱怨候选版本？

> ID：13506104
> 
> 赞同：1
> 
> 时间：2012-11-22T04:52:56.503
> 
> 标签：chef-infra

我在厨师独奏食谱中有这个片段

```
package "myserver" do
  action :upgrade
  source "/tmp/myserver-12.4.0-16052.noarch.rpm"
  provider Chef::Provider::Package::Rpm
end 
```

但厨师说：

```
INFO: Processing package[myserver] action upgrade (cbgd::default line 16)
DEBUG: package[myserver] checking rpm status
DEBUG: package[myserver] checking install state
DEBUG: package[myserver] current version is 12.4.0-16050
DEBUG: package[myserver] no candidate version - nothing to do
INFO: Chef Run complete in 2.621177 seconds 
```

我期待升级能够通过。一个简单的 rpm -Uvh 工作正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:57:50.357

当您从已知源文件安装单个软件包时，使用升级操作实际上没有任何意义。将操作更改为 :install。此外，Chef 有一个用于 rpm 包的快捷方式资源，`rpm_package，因此您不需要提供程序行（它会自动使用它。

```
rpm_package "myserver" do
  action :install
  source "/tmp/myserver-12.4.0-16052.noarch.rpm"
end 
```

最后，Chef 的包资源默认使用 :install，所以实际上你也不需要它。

```
rpm_package "myserver" do
  source "/tmp/myserver-12.4.0-16052.noarch.rpm"
end 
```

要将包名称设置为节点属性，您可以在食谱的 attributes/default.rb、应用于节点的角色或节点对象本身（在配方中，或在厨师服务员）。每个位置的原因各不相同，但一般规则是：

*   使用 cookbookname/attributes/default.rb 可以在其他地方覆盖的“正常默认值”（角色，节点）
*   使用角色属性在许多共享功能的系统中进行设置（例如，所有网络服务器都具有“网络服务器”角色）。
*   直接将节点属性用于特殊和独特的雪花。当然，我们不推荐雪花:-)。

要在属性文件中执行此操作：

```
default['myserver']['package_name'] = 'myserver-12.4.0-16052.noarch.rpm' 
```

然后在资源中：

```
rpm_package "myserver" do
  source "/tmp/#{node['myserver']['package_name']}"
end 
```

请参阅[Opscode Chef 文档](http://docs.opscode.com)以获取有关[Attribute Precedence](http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_precedence.html)和 cookbooks中的[Attribute Files 的](http://docs.opscode.com/essentials_cookbook_attribute_files.html)信息。角色是[Ruby DSL 或直接的 JSON](http://docs.opscode.com/essentials_roles_formats.html)。

# javascript - 如何获得特定类型的最后一个形状？

> ID：13506105
> 
> 赞同：1
> 
> 时间：2012-11-22T04:53:10.200
> 
> 标签：javascript, raphael

我需要在论文中找到最后一个路径或圆圈，以便执行进一步计算以绘制更多元素，并且调用`paper.bottom`仅获取最后一个元素。有没有办法获得特定类型的形状，例如`bottom.path`，`bottom.circle`或遍历第 n 个孩子？

我想避免使用 jQuery 选择器，因为我无法从中检索任何属性。

填充有形状的纸张示例：

```
var paper = Raphael('paper',500,500);
var c1 = paper.circle(100,100,50)
var p1 = paper.path("M10 20l70 0")
var c2 = paper.circle(200,100,50) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:16:19.047

检查底部元素将为您提供底部元素（沿 Z 轴） - 这是不希望的。考虑一种情况，其中元素的 Z 顺序被改变 - 可能是通过调用[`Element.toBack()`](http://raphaeljs.com/reference.html#Element.toBack)- 这将使检查完全无效。

相反，您可能希望通过迭代元素数组并检索特定类型的最后一个元素（例如*circle*）来寻求更语义化的方法。

Raphaël 还允许[扩展内置函数集](http://raphaeljs.com/reference.html#Raphael.fn)，因此我们可以将一个函数附加到 paper 元素上，仅用于此目的。下面的代码片段显示了一个这样的函数的例子，它从论文中返回传递类型的最后一个元素，或者`false`如果没有找到这样的元素：

```
Raphael.fn.last = function(type) {
    var element;
    this.forEach(function(el) {
        if (el.type == type) {
            element = el;
        }
    });
    return element || !!element;
}; 
```

请务必在纸质元素的任何实例化之前附加此功能。不仅仅是调用它，传递所需的元素类型：

```
var r = Raphael(paper, '100%', '100%');
// ...
// add elements etcetera
// ...
var lastCircle = r.last('circle'); 
```

请注意，对于建议的实现，这可能会导致繁重的操作 - 如果论文包含许多元素，但这里的目的是授予您功能扩展的概念，并启动思考过程。随意改进功能以提高其效率。

* * *

## [现场演示](http://jsfiddle.net/E3QkW/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:57:44.370

关于**如何遍历第 n 个孩子**：只需将您的路径放在一个集合中，它们就会像任何普通数组一样被索引。您可以轻松地调用该集合中的任何数字，并获得对其属性的完全访问权限：

```
var myPaper = Raphael('container', '800', '600');

myPaper.setStart();
var circ1 = myPaper.circle(50, 50, 40);
var circ2 = myPaper.circle(150, 50, 40);
var circ3 = myPaper.circle(250, 50, 40);
var circ4 = myPaper.circle(350, 50, 40);
var allCircles = myPaper.setFinish();

allCircles[2].attr({fill: "blue"}); 
```

​</p>

[http://jsfiddle.net/eE7xS/](http://jsfiddle.net/eE7xS/)

# c# - ef modelBuilder 强制外键 a 或外键 b

> ID：13506106
> 
> 赞同：0
> 
> 时间：2012-11-22T04:53:15.863
> 
> 标签：c#, sql-server, asp.net-mvc, entity-framework, orm

好的。

**背景。**

我最初试图按照以下方式制作 EF 模型：

```
public class Person
{
    [Key]
    public Guid ID { get; set; }
    public string Name { get; set; }
    public Guid PhoneID { get; set; }

    public virtual ICollection<Phone> Phones { get; set; }
}

public class Org
{
    [Key]
    public Guid ID { get; set; }
    public string Name { get; set; }
    public Guid PhoneID { get; set; }

    public virtual ICollection<Phone> Phones { get; set; }
}

public class Phone
{
    [Key]
    public Guid ID { get; set; }
    public string Number { get; set; }
    public Guid EntityID { get; set; }

    [ForeignKey("EntityID")]
    public virtual User User { get; set; }
    [ForeignKey("EntityID")]
    public virtual Org Org { get; set; }
} 
```

但我现在（大部分）意识到这会导致 SQL Server 中的外键关系完整性出现问题。因此，为了纠正这个问题，我将 Phone 类更改为：

```
public class Phone
{
    [Key]
    public Guid ID { get; set; }
    public string Number { get; set; }
    public Guid? PersonID { get; set; }
    public Guid? OrgID { get; set; }

    [ForeignKey("PersonID")]
    public virtual User User { get; set; }
    [ForeignKey("OrgID")]
    public virtual Org Org { get; set; }
} 
```

**问题。**

如何使用模型构建器/Fluent API 强制/映射规则以确保 Phone 对象具有 PersonID 或 OrgID？

**编辑：**

我确实意识到这会创建一个数据完整性规则，如果我在 SQL Server 中设计数据库，我将无法做到这一点，但对我来说，EF 似乎具有将数据库设计提升到新水平的潜在灵活性。

我将 EF（尤其是 Code-First）视为 Microsoft 在其软件开发战略中的下一个重大飞跃。恕我直言，这与 .Net 的引入一样大的飞跃（现在有一个声明应该引起一些争论！），将数据库设计从数据库本身移开并将其与托管代码集成。

# unix - 计算文件中的空白行数

> ID：13506109
> 
> 赞同：44
> 
> 时间：2012-11-22T04:53:32.103
> 
> 标签：unix, sed, grep, text-files

在[bash 中的 count (non-blank) lines-of-code 中，](https://stackoverflow.com/questions/114814/count-non-blank-lines-of-code-in-bash)他们解释了如何计算非空行的数量。

但是有没有办法计算文件中的空白行数？空行是指其中有空格的行。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-22T04:57:07.533

另一种方法是：

```
grep -cvP '\S' file 
```

*   `-P '\S'`(perl regex) 将匹配任何包含非空格的行
*   `-v`选择不匹配的行
*   `-c`打印匹配行数

* * *

如果您的 grep 不支持`-P`选项，请使用`-E '[^[:space:]]'`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-22T04:55:54.943

一种使用方式`grep`：

```
grep -c "^$" file 
```

或使用空格：

```
grep -c "^\s*$" file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-13T07:22:14.093

使用 Perl 单线：

```
perl -lne '$count++ if /^\s*$/; END { print int $count }' input.file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-01T12:41:03.477

您也可以`awk`为此使用：

```
awk '!NF {sum += 1} END {print sum}' file 
```

从手册中，“变量 NF 设置为输入记录中的字段总数”。由于默认的字段分隔符是空格，因此任何不包含任何内容或包含一些空格的行都将具有`NF=0`.

然后，这是一个计算这种情况发生多少次的问题。

### 测试

```
$ cat a
aa dd

ddd

he      llo
$ cat -vet a # -vet to show tabs and spaces
aa dd$
    $
ddd$
   $
^I$
he^Illo$ 
```

现在让我们计算空行的数量：

```
$ awk '!NF {s+=1} END {print s}' a
3 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-13T16:00:24.080

`grep -cx '\s*' file`

或者

`grep -cx '[[:space:]]*' file`

这比史蒂夫答案中的代码要快。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-24T12:51:12.183

要计算您的同事在项目中插入了多少***无用的空行***，您可以启动如下一行命令：

```
blankLinesTotal=0; for file in $( find . -name "*.cpp" ); do blankLines=$(grep -cvE '\S' ${file}); blankLinesTotal=$[${blankLines} + ${blankLinesTotal}]; echo $file" has" ${blankLines} " empty lines."  ; done; echo "Total: "${blankLinesTotal} 
```

这打印：

```
<filename0>.cpp #blankLines
....
....
<filenameN>.cpp #blankLines
Total #blankLinesTotal 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-15T21:21:12.497

```
grep -v '\S' | wc -l 
```

（在 OSX 上，Perl 表达式不可用，-P 选项）

# haskell - 同级误会

> ID：13506112
> 
> 赞同：3
> 
> 时间：2012-11-22T04:53:52.993
> 
> 标签：haskell, typeclass

*   我有自己的数据类型来表示图的节点和边，如下所示：

    ```
    data Node a = Node a deriving (Show, Eq)

    data Label a = Label a deriving (Show)

    data Cost = CostI Int | CostF Float deriving (Show)

    data Edge label node = Edge (Label label, (Node node,Node node), Cost) deriving (Show) 
    ```

*   现在，我创建一个函数来检查一条边是否包含 2 个节点，如下所示：

    ```
    isEdge:: (Eq n) => (Edge l n) -> (Node n, Node n) -> Bool
    isEdge (Edge (_, (n1,n2), _)) (n3, n4) = result
         where result = (n1 == n3) && (n2 == n4) 
    ```

*   该函数运行良好，这里的问题是**如果我从函数中删除 (Eq n)**，它会失败。那么，为什么会这样，即使在上面的声明中我声明`Node`为派生自 Eq 类？

    ```
    data Node a = Node a deriving (Show, Eq) 
    ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T05:53:48.633

`Eq`GHC 派生的实例`Node a`是这样的：

```
instance Eq a => Eq (Node a) where
    (Node x) == (Node y) = x == y
    (Node x) /= (Node y) = x /= y 
```

可以通过编译查看生成的代码`-ddump-deriv`。出于显而易见的`Eq a`原因，需要约束。因此，GHC 无法推断 for 的实例`Eq`，例如，`Node (a -> b)`因为无法比较函数。

然而，GHC 无法推断 for some 的实例这一事实`Eq`并不**意味着**`Node a`它会阻止您构造一个不是相等类型的类型值。 **`a``Node a``a`**

 *** * *

如果您想阻止人们构建 non-comparable `Node`s，您可以尝试设置这样的约束：

```
data Eq a => Node a = Node a deriving (Eq, Show) 
```

但是现在 GHC 告诉我们我们需要一个编译器编译指示：

```
Illegal datatype context (use -XDatatypeContexts): Eq a => 
```

好的，让我们将它添加到文件的顶部：

```
{-# LANGUAGE DatatypeContexts #-} 
```

现在编译：

```
/tmp/foo.hs:1:41: Warning: -XDatatypeContexts is deprecated: It was widely
considered a misfeature, and has been removed from the Haskell language. 
```

问题是现在*每个*使用`Node`s 的函数都需要一个`Eq`类约束，这很烦人（你的函数仍然需要约束！）。（另外，如果您的用户想要`Node`使用非相等类型创建 s 但从不测试它们的相等性，那么问题是什么？）

* * *

然而，实际上有一种方法可以让 GHC 做你想做的事：广义代数数据类型 ( [GADTs](http://www.haskell.org/ghc/docs/latest/html/users_guide/data-type-extensions.html#gadt) )：

```
{-# LANGUAGE GADTs, StandaloneDeriving #-}

data Node a where
  Node :: Eq a => a -> Node a 
```

这看起来就像您的原始定义，除了它强调`Node` *值构造函数*（以前在数据声明的右侧）只是一个函数，您可以向其中添加约束。现在 GHC 知道只能将相等类型放入`Node`s 中，并且与我们之前尝试的解决方案不同，我们可以创建不需要约束的新函数：

```
fromNode :: Node a -> a
fromNode (Node x) = x 
```

我们仍然可以派生`Eq`和`Show`实例，但语法略有不同：

```
deriving instance Eq   (Node a)
deriving instance Show (Node a) 
```

（因此上面的 StandaloneDeriving 杂注。）

为此，GHC 还要求我们向`Show`GADT 添加一个约束（如果您再次查看生成的代码，您会发现约束现在消失了）：

```
data Node a where
  Node :: (Eq a, Show a) => a -> Node a 
```

现在我们可以取消`Eq`约束`isEdge`，因为 GHC 可以推断它！

（对于这样一个简单的情况，这绝对是矫枉过正——同样，如果人们想在其中构建带有函数的节点，为什么不呢？但是，当你想强制执行你的某些属性时，GADT 在非常相似的情况下非常有用数据类型。看[一个很酷的例子](http://en.wikibooks.org/wiki/Haskell/GADT)）。

* * *

编辑（来自未来）：你也可以写

```
data Node a = (Eq a, Show a) => Node a 
```

但是您仍然需要单独启用 GADT 扩展和派生实例。看到[这个线程](https://stackoverflow.com/questions/13888720/alternative-for-deprecated-xdatatypecontext#comment19135458_13888788)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T05:21:19.523

当您将`deriving`子句添加到数据声明时，派生子句将包含声明范围内类型变量的任何必要约束。在这种情况下，`deriving Eq`将基本上创建以下实例：

```
instance Eq a => Eq (Node a) where
    (Node a) == (Node b) = a == b
    (Node a) /= (Node b) = a /= b 
```

任何派生`Eq`实例都将取决于出现在数据构造函数右侧的类型的 Eq 实例。

这是因为实际上没有其他方法可以`Eq`自动派生实例。如果两个值具有相同的类型并且它们的所有组件都相等，则它们是相等的。因此，您需要能够测试组件是否相等。为了一般地测试多态组件的相等性，您需要一个`Eq`实例。

这不仅适用于`Eq`，而且适用于所有派生类。例如这段代码

```
toStr :: Edge l n -> String
toStr = show 
```

不添加约束将无法工作`(Show l, Show n)`。没有这个约束，显示一个的函数`Edge`不知道调用什么来显示它的内部标签和节点。**

# rsync - rsync 中 --password-file 选项的语法和先决条件是什么？

> ID：13506120
> 
> 赞同：7
> 
> 时间：2012-11-22T04:55:01.687
> 
> 标签：rsync

我想存储 rsync 附带的 --password-file 选项。我不想使用 ssh public_private 密钥加密。我试过这个命令：

```
rsync -avz --progress --password-file=pass.txt source destination 
```

这说：

```
The --password-file option may only be used when accessing an rsync daemon. 
```

所以，我尝试使用：

```
rsync -avz --progress --password-file=pass.txt source destination rsyncd --daemon 
```

但这会返回各种错误，例如未知选项。我的sytanx正确吗？如何在我的 Debian 机器上设置 rsync 守护进程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:20:06.827

那是对的，

*--password-file*仅在连接***到***rsync 守护程序时适用。

不过，您可能没有在守护程序本身中设置它，您设置的密码和您在该调用期间使用的密码必须匹配。
编辑 /etc/rsyncd.secrets，并将该文件的所有者/组设置为 root:root 并具有世界读取权限。

```
#/etc/rsyncd.secrets
root:YourSecretestPassword 
```

要连接到 rsync 守护程序，请使用双冒号，后跟模块名称，以及要同步的文件或文件夹（使用 SSH 时不要使用冒号），

```
RSYNC_PASSWORD="YourSecretestPassword"; rsync -rtv user@remotehost::module/source/ destination/ 
```

笔记：

*   这意味着放弃 SSH 加密，虽然密码本身不是通过网络以纯文本形式发送的，但您的数据是......
*   这已经是不安全的，**永远不会**与您的任何用户帐户使用相同的密码。
*   为了更好地了解其内部工作原理（如何让特定 IP/进程能够上传到文件系统的指定区域而无需用户帐户）：[http ://transamrit.net/docs/rsync/](http://transamrit.net/docs/rsync/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-16T09:43:01.133

尝试了一段时间后，我得到了这个工作。由于我作为备份用户从我的实时服务器（和路由器数据）复制到我的笔记本电脑中的本地服务器，因此密码未加密没有问题，因此它安全地连接在我家中的笔记本电脑上。首先，如果 Centos 使用，则需要安装 sshpass，`yum install sshpass`然后创建用户备份并分配临时密码。如果您的 ssh 端口与默认端口不同，我列出了 -p 选项。

```
sshpass -p 'password' rsync -vaurP -e 'ssh -p 2222'  backup@???.your.ip.???:/somedir/public_data/temp/ /your/localdata/temp 
```

了解 SSH RSA 是一种更好的永久替代方案，但这是在旅途中备份和恢复的快速替代方案。如果您不太关心安全性但更关心您的数据在本地备份，例如在紧急情况下或数据恢复中，它会起作用。您的用户**备份**备份完成后，您可以更改密码。当您的服务器更改 IP、用户及其不断修改时（因为路由器更改配置和非静态 IP，以及当路由器不是本地的并且您在本地备份客户端服务器时，它的设置速度要快得多，而您并不总是访问做 SSH。我的一些客户甚至没有安装 SSH，他们不想麻烦创建公钥。在某些服务器上，只有您可以临时访问。顺便说一下，如果您想进行恢复，只需颠倒这种情况。不需要改变太多，从同一个命令shell你可以颠倒目标和源目录的顺序，并在目标上创建另一个具有相同临时密码的备份用户。完成后，删除备份用户或更改它在目标和/或源服务器上的密码。正如我所做的那样，您可以进一步保护，使用多服务器环境的 bash 脚本替换单行文件的密码。另一种方法是使用 -f 选项，这样密码就不会显示在 bash 历史记录中`-f "/path/to/passwordfile"` 问候

注意：如果您只想更新修改过的文件，那么您应该使用此参数**-h -v -r -P -t**如此处所述[https://unix.stackexchange.com/questions/67539/how-to-rsync-only -新文件](https://unix.stackexchange.com/questions/67539/how-to-rsync-only-new-files)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-10T03:51:54.223

```
rsync -arv -e \
    "sshpass -f '/your/pass.txt' ssh -o StrictHostKeyChecking=no" \
    --progress /your/source id@IP:/your/destination 
```

如果你没有，也许你必须安装“sshpass”。

# alloy - 了解合金中的复杂特征

> ID：13506121
> 
> 赞同：0
> 
> 时间：2012-11-22T04:55:18.643
> 
> 标签：alloy

在下面

```
sig building{
    abv: Man -> Man
 }
 {
 all m:Man | Above(m,m.abv)
 } 
```

下面是什么意思？它与签名定义有什么关系？这是 sig 的关系吗？

```
 {
 all m:Man | Above(m,m.abv)
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:02:46.033

这称为“附加事实”，意思是它必须适用于相应 sig 的所有原子。因此，您的模型的等效事实是

```
fact {
  all b: building |
    all m: Man | Above[m, m.(b.abv)]
} 
```

在附加事实中，您可以使用`this`关键字来引用相应 sig 的当前原子，因此编写附加事实的更清晰的方法是显式地写入`m.(this.abv)`，而不是依赖于`abv`隐式扩展为`this.abv`.

# python - 如何使用函数 numpy.append

> ID：13506122
> 
> 赞同：22
> 
> 时间：2012-11-22T04:55:25.740
> 
> 标签：python, numpy, append

我在使用函数 numpy.append 时遇到问题。我编写了以下函数作为更大代码段的一部分，但是，我的错误在以下内容中重现：

```
data = [
         [
          '3.5', '3', '0', '0', '15', '6', 
          '441', 'some text', 'some more complicated data'
         ], 
         [
          '4.5', '5', '1', '10', '165', '0', 
          '1', 'some other text', 'some even more complicated data'
         ]
       ]

def GetNumpyArrey(self, index):
    r = np.array([])
    for line in data:
        np.append(r, float(line[index]))

    print r 
```

index < 6\. 结果是：

```
>> [] 
```

我究竟做错了什么？

非常感谢 ！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-22T04:59:24.097

与 list`append`方法不同，numpy's`append`不会就地追加。它返回一个附加了额外元素的新数组。所以你需要做`r = np.append(r, float(line[index]))`.

但是，以这种方式构建 numpy 数组效率低下。最好将列表构建为 Python 列表，然后在最后创建一个 numpy 数组。

# php - php 在单独的页面中调用类函数

> ID：13506125
> 
> 赞同：1
> 
> 时间：2012-11-22T04:55:59.857
> 
> 标签：php, model-view-controller

我最近使用过 Java EE，并且喜欢 struts.xml 的想法，我可以在其中根据操作类的返回字符串处理对页面的重定向。

在 PHP 中，在我的新开发站点中，我正在尝试遵循 MVC 标准，而无需使用 Internet 上的 MVC 框架。所以我创建了控制器、模型和视图（现在是空的）。我唯一真正陷入困境的是当我在视图中提交表单（insert_product.php）时，我需要创建另一个 php 页面来处理发布数据并将它们传递给控制器​​。

无论如何避免创建这些页面并且可能有类似 struts.xml 的东西？即使我可以将数据直接发布到控制器类，那也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:29:38.437

请求周期为：

```
 |
browser  ---|--->  Controller  ---+
         request                  |
   ^        |                     V
   |        |
   |        |                   Model
   |        |
   |        |                     |
   +--------|------  View  <------+
         response
            |
  client    |       server 
```

如您所见，MVC 分离完全是服务器端的代码组织策略。您*不需要*单独的文件。任何 GET 或 POST 请求都由控制器处理，视图只是返回响应（即 HTML）。控制器如何处理传入请求以及哪个控制器处理哪些请求完全取决于您，它与任何特定文件无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T05:14:47.100

> 当我提交表单时

这是一个典型的场景，发生在程序员第一次从其他开发领域开始 Web 开发时。

**您不在视图中提交表单。**用户请求一个带有*额外*信息的新页面..

但是请注意，用户不会关心您的视图。用户的浏览器会得到一些代码，然后解释并生成一个页面。用户页面和你的视图（在这个场景中的 MVC 上）是两个完全不同的东西！

用户向您的服务器发出的请求可能（或可能不）包含额外信息（POST / GET）。

**也就是说，控制器应该获取信息。**如果相关，然后将其传递给模型。

# c# - 尝试将 Transaction.Commit() 发送到数据库时超时；潜在的僵局？

> ID：13506127
> 
> 赞同：1
> 
> 时间：2012-11-22T04:56:15.707
> 
> 标签：c#, transactions, timeout, commit, deadlock

我有一个网页，其编码结构如下：

```
SqlConnection conX =new SqlConnection(blablabla);
conX.Open();
SqlTransaction tran=conX.BeginTransaction();

try{
   SqlCommand cmdInsert =new SqlCommand("INSERT INTO Table1(ColX,ColY) VALUES @x,@y",conX);
   cmdInsert.Transaction=tran;
   cmdInsert.ExecuteNonQuery();

   SqlCommand cmdSelect=new SqlCOmmand("SELECT * FROM Table1",conX);
   cmdSelect.Transaction=tran;
   SqlDataReader dtr=cmdSelect.ExecuteReader();

   //read stuff from dtr
   dtr.Close();

   cmdInsert=new SqlCommand("UPDATE Table2 set ColA=@a",conX);
   cmdInsert.Transaction=tran;
   cmdInsert.ExecuteNonQuery();

   //display MiscMessage
   tran.Commit();
   //display SuccessMessage
}
catch(Exception x)
{
   tran.Rollback();
   //display x.Message
}
finally
{
   conX.Close();
} 
```

因此，在 MiscMessage 之前，一切似乎都有效。然后，过了一会儿（可能是 15 秒？） x.Message 弹出，说：

“超时已过。在操作完成之前超时时间已过或服务器没有响应。”

所以我的 trans.Commit() 有什么问题吗？数据库未更新，因此我假设 trans.Rollback 有效...

我已经读过死锁会导致超时......这个问题是由我从 Table1 中选择的 SELECT 语句引起的，它正被第一个 INSERT 语句使用？如果是这样，我该怎么办？如果这不是问题，那是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:00:27.400

因为您显示 MiscMessage，您的事务仍然打开，然后超时到期。提交事务，然后显示消息。

# c# - Apache FOP - 表格顶部和底部边框在表格内缺少分页符

> ID：13506130
> 
> 赞同：0
> 
> 时间：2012-11-22T04:56:39.170
> 
> 标签：c#, asp.net-mvc-4, pdf-generation, apache-fop

我正在使用 Apache FOP 从 XLS FO 文档生成 PDF。

我创建了一个测试 XLS FO 文档，其中包含一个带有折叠边框的表格，该表格有几行高。其中一行从一页开始并在下一页结束，这可以按预期工作。

问题是第一页表格的底部边框缺失，第二页表格的顶部边框也缺失。

以下是示例 XLS FO 文档。

```
<?xml version="1.0" encoding="utf-8"?>

<fo:root
  xmlns:fo="http://www.w3.org/1999/XSL/Format"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<!-- defines the layout master -->
<fo:layout-master-set>
<fo:simple-page-master master-name="first"
                       page-height="29.7cm"
                       page-width="21cm"
                       margin-top="1cm"
                       margin-bottom="2cm"
                       margin-left="2.5cm"
                       margin-right="2.5cm">
  <fo:region-body margin-top="3cm"/>
  <fo:region-before extent="3cm"/>
  <fo:region-after extent="1.5cm"/>
</fo:simple-page-master>
  </fo:layout-master-set>

  <!-- starts actual layout -->
  <fo:page-sequence master-reference="first">
    <fo:title>Sample Doc</fo:title>

  <fo:flow flow-name="xsl-region-body" font-size="x-small" font="Times New Roman">

<!-- table start -->
<fo:table table-layout="fixed" width="100%" border-collapse="collapse">
  <fo:table-column column-width="35mm"/>
  <fo:table-column column-width="100mm"/>
  <fo:table-column column-width="20mm"/>
  <fo:table-body>  
    <fo:table-row>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Column 1</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Columns 2</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Column 3</fo:block>
      </fo:table-cell>
    </fo:table-row>

    <fo:table-row>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Row 1</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Some text</fo:block>
      </fo:table-cell>
    </fo:table-row>

    <fo:table-row>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Row 2</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Some text</fo:block>
      </fo:table-cell>
    </fo:table-row>

    <fo:table-row>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Row 3</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Some text</fo:block>
      </fo:table-cell>
    </fo:table-row>

    <fo:table-row>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Row 4</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Some text</fo:block>
      </fo:table-cell>
    </fo:table-row>

    <fo:table-row>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Row 5</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Some text</fo:block>
      </fo:table-cell>
    </fo:table-row>
  </fo:table-body>
</fo:table>
<!-- table end -->
</fo:flow>
  </fo:page-sequence>
</fo:root> 
```

此图像显示缺少第 1 页的底部边框和缺少第 2 页的顶部边框，但所有文本接缝都在那里： ![缺少边框](../Images/2d5d001ff5d1b5dc35fd10b0e1a4e676.png)

请注意，例如，我已经尝试过使用带边框的空页眉和页脚。

```
<fo:root
  xmlns:fo="http://www.w3.org/1999/XSL/Format"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<!-- defines the layout master -->
<fo:layout-master-set>
<fo:simple-page-master master-name="first"
                       page-height="29.7cm"
                       page-width="21cm"
                       margin-top="1cm"
                       margin-bottom="2cm"
                       margin-left="2.5cm"
                       margin-right="2.5cm">
  <fo:region-body margin-top="3cm"/>
  <fo:region-before extent="3cm"/>
  <fo:region-after extent="1.5cm"/>
</fo:simple-page-master>
  </fo:layout-master-set>

  <!-- starts actual layout -->
  <fo:page-sequence master-reference="first">
    <fo:title>Sample Doc</fo:title>

  <fo:flow flow-name="xsl-region-body" font-size="x-small" font="Times New Roman">

<!-- table start -->
<fo:table table-layout="fixed" width="100%" border-collapse="collapse">
  <fo:table-column column-width="35mm"/>
  <fo:table-column column-width="100mm"/>
  <fo:table-column column-width="20mm"/>

<fo:table-header>
        <fo:table-row border-width="0.25mm" border-style="solid">
            <fo:table-cell>
                <fo:block></fo:block>
            </fo:table-cell>
            <fo:table-cell>
                <fo:block></fo:block>
            </fo:table-cell>
            <fo:table-cell>
                <fo:block></fo:block>
            </fo:table-cell>
    </fo:table-row>
</fo:table-header>
<fo:table-footer>
    <fo:table-row border-width="0.25mm" border-style="solid">
        <fo:table-cell>
            <fo:block></fo:block>
        </fo:table-cell>
        <fo:table-cell>
            <fo:block></fo:block>
        </fo:table-cell>
        <fo:table-cell>
            <fo:block></fo:block>
        </fo:table-cell>
    </fo:table-row>
</fo:table-footer>
<fo:table-body>
    <fo:table-row>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Row 1</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Some text</fo:block>
      </fo:table-cell>
    </fo:table-row>

    <fo:table-row>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Row 2</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Some text</fo:block>
      </fo:table-cell>
    </fo:table-row>

    <fo:table-row>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Row 3</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Some text</fo:block>
      </fo:table-cell>
    </fo:table-row>

    <fo:table-row>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Row 4</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Some text</fo:block>
      </fo:table-cell>
    </fo:table-row>

    <fo:table-row>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Row 5</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
        <fo:block>Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum</fo:block>
      </fo:table-cell>
      <fo:table-cell border-width="0.5mm" border-style="solid">
        <fo:block>Some text</fo:block>
      </fo:table-cell>
    </fo:table-row>
  </fo:table-body>
</fo:table>
<!-- table end -->
</fo:flow>
  </fo:page-sequence>
</fo:root> 
```

这可行，但我需要将这些功能用于解决此问题以外的其他事情，所以我需要知道是否有其他解决方案？

# angularjs - 在 Angular.js 中实现状态机来控制路由

> ID：13506132
> 
> 赞同：2
> 
> 时间：2012-11-22T04:56:52.500
> 
> 标签：angularjs, state-machine

谁能帮我集成状态机来控制路由？

最好的方法是什么？创建服务？

我需要基本上拦截每个 $location 请求，运行状态机并让它找出下一个 $location.path 应该是什么。

把这个问题想象成一堆随着时间的推移而被添加和删除的问题。用户偶尔访问一次，将用户的答案对象传递给状态机，状态机确定要加载哪个问题。这是我的伪代码，但我需要弄清楚把它放在哪里或者我可以挂钩什么事件，以确保所有路由请求都通过机器。我需要特定的 stateMachine 控制器吗？我要创建服务吗？我在哪里使用该服务？我需要覆盖 $locationProvider 吗？

```
$scope.user.answers = [{

id: 32,
answer: "whatever"

},
{

id:33,
answer: "another answer"

}]

$scope.questions = [{

id:32, 
question:"what is your name?", 
path:"/question/1"

},{

id:34, 
question:"how old are you?", 
path:"/question/2"

}]

var questions = $scope.questions;

angular.forEach(questions, function(question) {

if(question.id !exist in $scope.user.answers.id) {

$location.path = question.path
break;

}); 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T02:45:30.080

你有没有研究过这个项目？

[https://github.com/angular-ui/ui-router](https://github.com/angular-ui/ui-router)

我才刚刚开始尝试，但它看起来应该可以满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T04:35:11.533

与其拦截 $location 更改，不如使用 ng-click 和[ng-include](http://docs.angularjs.org/api/ng.directive%3angInclude)？使用 ng-click 调用您的状态机逻辑，并让它更新模型/范围属性，该属性指定要通过 ng-include 加载的模板：

```
<a ng-click="runStateMachine()">process answers</a>
<div ng-include src="partialToInclude"></div> 
```

控制器：

```
$scope.runStateMachine() {
    ... process $scope.answers and set $scope.partialToInclude  ...
} 
```

# xml - 存储库 xml 文件创建

> ID：13506135
> 
> 赞同：1
> 
> 时间：2012-11-22T04:57:09.830
> 
> 标签：xml, svn, svnkit

我想使用 SVNKit 创建一个 xml 文件。我们已经使用 `svn log --xml repourl`命令行创建了 xml 文件，但是为了在 Java 中执行这个命令，我使用了 process.xml 文件。它需要这么长时间。所以我需要使用 SVNKit 或任何其他方法创建存储库 xml 文件。

# objective-c - 在 Sharekit2.0 中自定义帖子到 facebook

> ID：13506136
> 
> 赞同：0
> 
> 时间：2012-11-22T04:57:20.433
> 
> 标签：objective-c, ios, xcode, facebook, sharekit

我已将最新的 sharekit 代码集成到我的项目中。我可以点击进入 Facebook 并看到我要发布的文字。

我想改变两件事。

首先，由于我的应用图片在顶部，我无法看到取消或发布按钮。所以我想将视图设置为可滚动的。我该如何改变呢？

其次，我想在按下回车后移除键盘，或者我想要一种移除键盘的方法。

第三，当我单击文本编辑时，它给了我错误：HTTP 状态代码：404。如何解决这个问题？

在这方面需要一些帮助..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:54:30.690

如果您使用以下代码，它将关闭键盘。

```
[self.view Endediting:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:42:56.873

```
[yourtextview resignFirstResponder]; 
```

这将删除键盘

或者作为一般情况，您可以使用它：`[self.view Endediting:YES];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:01:33.260

ShareKit 似乎从来都不是可定制的。就个人而言，我不喜欢将它集成到项目中以将图像发布到 Flickr 和 Twitter，但仅此而已。就我现在看到的情况而言，ShareKit 仍在使用旧的 FacebookSDK（或者至少看起来如此）。为了更好的定制，我建议从你的 ShareKit 中丢弃 Facebook，只使用新的 FacebookSDK。

# sublimetext2 - 额外 < 在 Sublime Text 2 中使用自动完成

> ID：13506140
> 
> 赞同：1
> 
> 时间：2012-11-22T04:57:46.203
> 
> 标签：sublimetext2

我在我的 Sublime Text 2 编辑器中安装了 All Autocomplete 包，一切正常，除了当我输入 "`<div"`或类似的东西时，自动完成框弹出，我选择我想要的并按 Enter 并添加 " `<<div></div>`" 额外“<”在我的标签前面。我每次都要回去删除多余的“<”......（！）

我似乎无法解决这个问题。如果我使用命令 CTRL+Space，会弹出该框，我可以选择我想要的标签，它不包含额外的标签，但会影响我的流程。

有没有人经历过这个？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:44:36.660

我刚刚安装了该软件包，它似乎对我来说工作正常。

我输入`<div`然后点击`Tab`or`Enter`并且它正确完成。

我唯一能想到的是 AllAutocomplete 包与您可能安装的另一个包/插件冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:06:31.787

Zen Coding 似乎有问题。[见这里](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=4807)。

不幸的是，我在那里尝试了所有建议，包括 peruvianidol 的 'Packages/HTML/html_completions.py' 解决方案，但没有任何运气。

# php - 将表单中输入的日期范围与 mySQL 数据库中的记录进行比较时遇到问题

> ID：13506141
> 
> 赞同：0
> 
> 时间：2012-11-22T04:57:57.387
> 
> 标签：php, mysql

我有一个名为的表`schedule`和一个名为`Date`where column type is 的列`date`。在该列中，我有一个日期范围，目前是从 2012 年 11 月 1 日到 2012 年 11 月 30 日。我有一个小表单，用户可以在其中输入日期范围（输入名称`from`和`to`），并且我希望能够将日期范围与数据库中当前的日期进行比较。

这就是我所拥有的：

```
////////////////////////////////////////////////////////
//////First set the date range that we want to use//////
////////////////////////////////////////////////////////

if(isset($_POST['from']) && ($_POST['from'] != NULL))
    {
    $startDate = $_POST['from'];
    }
else
    {
    //Default date is Today
    $startDate = date("Y-m-d");
    }
if(isset($_POST['to']) && ($_POST['to'] != NULL))
    {
    $endDate = $_POST['to'];
    }
else
    {
    //Default day is one month from today
    $endDate = date("Y-m-d", strtotime("+1 month"));
    }

//////////////////////////////////////////////////////////////////////////////////////
//////Next calculate the total amount of days selected above to use as a limiter//////
//////////////////////////////////////////////////////////////////////////////////////

$dayStart = strtotime($startDate);
$dayEnd = strtotime($endDate);
$total_days = abs($dayEnd - $dayStart) / 86400 +1;

echo "Start Date: " . $startDate . "<br>End Date: " . $endDate . "<br>";
echo "Day Start: " . $dayStart . "<br>Day End: " . $dayEnd . "<br>";
echo "Total Days: " . $total_days . "<br>";

////////////////////////////////////////////////////////////////////////////////////
//////Then we're going to see if the dates selected are in the schedule table//////
////////////////////////////////////////////////////////////////////////////////////

//Select all of the dates currently in the schedule table between the range selected.
$sql = ("SELECT Date FROM schedule WHERE Date BETWEEN '$startDate' AND '$endDate' LIMIT $total_days");

//Run a check on the query to make sure it worked. If it failed then print the error.
if(!$result_date_query = $mysqli->query($sql))
    {
    die('There was an error getting the dates from the schedule table [' . $mysqli->error . ']');
    }

//Set the dates to an array for future use.
// $current_dates = $result_date_query->fetch_assoc();

//Loop through the results while a result is being returned.
while($row = $result_date_query->fetch_assoc())
    {
    echo "Row: " . $row['Date'] . "<br>";
    echo "Start day: " . date('Y-m-d', $dayStart) . "<br>";
    //Set this loop to add 1 day to the Start Date until it reaches the End Date
    for($i = $dayStart; $i <= $dayEnd; $i = strtotime('+1 day', $i))
        {
        $date = date('Y-m-d',$i);
        echo "Loop Start day: " . date('Y-m-d', $dayStart) . "<br>";

        //Run a check to see if any of the dates selected are in the schedule table.
        if($row['Date'] != $date)
            {
            echo "Current Date: " . $row['Date'] . "<br>";
            echo "Date: " . $date . "<br>";
            echo "It appears as though you've selected some dates that are not in the schedule database.<br>Please correct the issue and try again.";
            return;
            }
        }
    }

    //Free the result so something else can use it.
    $result_date_query->free(); 
```

正如你所看到的，我已经添加了一些 echo 语句，所以我可以看到正在生成的内容。从我所见，看起来我`$row['Date']`并没有增加并且保持在同一日期。我最初将它设置为一个变量（目前已被注释掉），但我认为这可能会导致问题。

我创建了日期从 2012-11-01 到 2012-11-15 的表格进行测试，并将所有这些 php 代码输入到 phpfiddle.org，但我无法获得提供的用户名进行连接。

这是链接：[PHP Fiddle](http://phpfiddle.org/lite/code/tbz-2pr)

在此期间，我将通读文档以尝试找出用户连接问题，我非常感谢您能给我的任何指导或建议。

# javascript - Window.unload 在卸载后触发发布

> ID：13506142
> 
> 赞同：7
> 
> 时间：2012-11-22T04:58:05.113
> 
> 标签：javascript, jquery, ruby-on-rails

我正在尝试在卸载页面之前向服务器发布一个帖子，我遵循[了这个](https://stackoverflow.com/questions/10011491/jquery-post-on-window-unloadwindow-or-browser-close)并且它工作正常。我的问题是 window.unload 上的 $.post 在卸载**后**触发。我尝试使用注销链接并检查我的日志，我得到以下信息：

```
Started GET "/signout" for 127.0.0.1 at 2012-11-22 00:15:08 +0800
Processing by SessionsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms

Started GET "/" for 127.0.0.1 at 2012-11-22 00:15:08 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.4ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 13ms (Views: 12.9ms)

Started POST "/unloading" for 127.0.0.1 at 2012-11-22 00:15:08 +0800
Processing by HomeController#unloading as */*
  Parameters: {"p1"=>"1"}
WARNING: Can't verify CSRF token authenticity
Completed 500 Internal Server Error in 0ms

NoMethodError (undefined method `id' for nil:NilClass):
  app/controllers/home_controller.rb:43:in `unloading' 
```

第一部分是注销，然后用户被重定向到 root，**然后**它运行帖子（'/unloading'）。

有没有办法让“/卸载”先执行然后执行卸载操作？

我有这个作为我的 jquery 帖子

```
$(window).unload ->
  $.ajax {
    async: false,
    beforeSend: (xhr) ->
      xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))
    , url: '/unloading'
    , type: 'Post'
    , data: {
      p1: '1'
    }
  } 
```

**更新**

所以我确实将 ajax 请求转移到 beforeunload 并且它正在工作，但我必须做一个`return null`来删除出现的对话框，因为如果我不这样做，ajax 仍然会在弹出对话框时触发（即使没有回答“是/否我想离开这个页面”）。结果是这样的：

```
window.onbeforeunload ->
  $.ajax {
    async: false,
    beforeSend: (xhr) ->
      xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))
    , url: '/unloading'
    , type: 'Post'
    , data: {
      p1: '1'
    }
  }
  return null 
```

另外，我现在只用 Chrome 尝试过它，它按预期工作。尚未尝试在其他浏览器上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T02:49:26.363

试试`beforeUnload`活动

> 卸载事件的确切处理因浏览器版本而异。例如，某些版本的 Firefox 会在点击链接时触发该事件，但不会在窗口关闭时触发。在实际使用中，应该在所有支持的浏览器上测试行为，并与专有的 beforeunload 事件进行对比。

*   [https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)

**更新**

当页面卸载时触发 unload 事件。

*   [https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Synchronous_and_Asynchronous_Requests#XMLHttpRequests_being_stopped](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Synchronous_and_Asynchronous_Requests#XMLHttpRequests_being_stopped)

**更新 2**

要禁用`Are you sure that you want to leave this page?`弹出窗口，请尝试`null`从`beforeUnload`回调函数返回

*   [如何显示“您确定要离开此页面吗？” 何时提交更改？](https://stackoverflow.com/questions/1119289/how-to-show-the-are-you-sure-you-want-to-navigate-away-from-this-page-when-ch)

**更新 3**

检查跨浏览器兼容性

*   [http://jonathonhill.net/2011-03-04/ catching-the-javascript-beforeunload-event-the-cross-browser-way/](http://jonathonhill.net/2011-03-04/catching-the-javascript-beforeunload-event-the-cross-browser-way/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T16:38:19.070

正如@NickKnudson 建议的那样，在卸载窗口之前使用“beforeUnload”事件回发表单数据：

```
window.onbeforeunload = function() {
  $.ajax {
    async: false,
    beforeSend: (xhr) ->
      xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))
    , url: '/unloading'
    , type: 'Post'
    , data: {
      p1: '1'
    }
  }
} 
```

大约两周前遇到了完全相同的情况，切换到 beforeUnload 解决了问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T09:17:15.113

问题是窗口的`unload`事件在关闭窗口之前不会等待 AJAX 调用（这是异步的）完成。此外，jQuery 似乎没有对`beforeunload`事件进行内置处理——这就是为什么您需要恢复为原生 JS 代码来处理它的原因。见下文：

（**注：用***CoffeeScript*编写）

```
window.onbeforeunload = function() {
    $.ajax {
        async: false, // Important - this makes this a blocking call
        beforeSend: (xhr) ->
            xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))
      , url: '/unloading'
      , type: 'Post'
      , data: {
            p1: '1'
        }
    }
}; 
```

[onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload) - 卸载页面时在卸载事件之前触发的事件。

另请参阅有关此主题的[Google 论坛](https://groups.google.com/forum/?fromgroups=#!topic/jquery-en/Tlsl-h_15e4)讨论。

# sql - 相关子查询

> ID：13506147
> 
> 赞同：0
> 
> 时间：2012-11-22T04:59:13.007
> 
> 标签：sql, ms-access, correlated-subquery

试图显示过去 30 天内开具发票的客户车辆。我试过这个：

```
select C.*, V.*
from CAR_OWNERSHIP O
join VEHICLE V on v.VEH_ID = O.VEH_ID
join CUSTOMER C on C.CUS_ID = O.CUS_ID
where exists (select null
              from INVOICE I
              where I.INV_ID = O.INV_ID and
                    I.INV_DATE >= date() - 30); 
```

我收到“FROM 子句中的语法错误”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:43:16.637

我很快尝试了访问中的查询，我得到了与您相同的错误，但是当我将 JOIN 更改为特定的连接（如 LEFT OUTER JOIN 或 INNER JOIN）时，该错误消失了，但被另一个错误替换了

```
 Syntax error (missing operator) in query expression in 
```

我对此进行了研究，发现这篇[文章](https://stackoverflow.com/questions/10852499/access-2010-syntax-error-missing-operator-in-query-expression)表明使用多个连接时访问需要括号

```
select *
from (CAR_OWNERSHIP O
left outer join CUSTOMER C on C.CUS_ID = O.Cus_ID)
left outer join VEHICLE V on v.VEH_ID = O.VEH_ID
where exists (select null
          from INVOICE I
          where I.INV_ID = O.INV_ID and
                I.INV_DATE >= date() - 30); 
```

我希望这会有所帮助

# iframe - 在封闭的 jquery 手风琴部分中加载 iFrame

> ID：13506149
> 
> 赞同：2
> 
> 时间：2012-11-22T04:59:28.107
> 
> 标签：iframe, jquery-ui-accordion

我一直在阅读线程（特别是这个：[jquery 手风琴内的 iFrame](https://stackoverflow.com/questions/2291482/iframe-inside-jquery-accordion)），但仍然没有找到（或不理解）如何获取我隐藏在关闭的手风琴部分中的 Spotify 播放列表以在页面加载时完全加载。

提供了许多我已经尝试过的解决方案，到目前为止，没有任何方法可以解决问题（可能是由于我的 JS 菜鸟）。我会很感激任何见解。请具体说明在哪里放置什么，因为我是 Javascript 的新手。

JS：

```
<script>
     $(function() {
     $( "#accordion" ).accordion({
                collapsible: true,
            autoHeight: false,
            alwaysOpen: false,
            active: true
                });
            });
 </script> 
```

相关HTML：

```
<h3 id="bubble">The Bubble Creatures</h3>
<section id="bubble">
    <div id="bubble-story"><p>Blah blah</p></div>
    <iframe id="spotify" src="https://embed.spotify.com/?uri=spotify:user:seedpodpub:playlist:4MsCt5Fkg5G99Tb5VFqzQ4" width="300" height="380" frameborder="0" allowtransparency="true"></iframe>
</section> 
```

再次感谢你！○。

更新了更多信息：
本质上，我想这样做：

1.  如果部分样式为“#section1 {display:none;}”，则什么也不做。
2.  如果部分样式为“#section1 {display:block;}”，则触发 div #spotify 加载。

这应该可以克服我在隐藏 iframe 中看到的半加载问题（我希望）？我正在看这篇文章：[Event detect when css property changed using Jquery](https://stackoverflow.com/questions/1397251/event-detect-when-css-property-changed-using-jquery...and)再次未能实现建议的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T02:23:47.393

似乎您已经找到了摆脱这种情况的方法，但对于其他人，我建议了一个相当简单的解决方案。

我试图将我的 Google 地图 api 加载到 jQuery Accordion 内的 iframe 中。问题是如果您将手风琴加载为关闭状态，则 iframe 永远不会加载，因此如果您尝试打开手风琴，您将看不到任何内容。

解决方案是先将手风琴加载为打开或活动状态（`active: '0'`），然后在页面加载后使用此代码关闭手风琴：

```
$("#accordion-map").accordion(
  {
    active: 'none'
  }
); 
```

所以发生的情况是，当您声明您的手风琴打开并且上面的代码在之后立即关闭它时；）所以您永远看不到它打开。

在 Chrome 和 FireFox 中为我工作得很好。

# python - 使用Python根据引用键从bibtex文件中删除特定条目

> ID：13506155
> 
> 赞同：5
> 
> 时间：2012-11-22T05:00:24.353
> 
> 标签：python, regex, bibtex

如何使用 python 基于引用键从 bibtex 文件中删除特定条目？我基本上想要一个函数，它接受两个参数（bibtex 文件的路径和引用键）并从文件中删除与键对应的条目。我玩过正则表达式，但没有成功。我也看了一点 bibtex 解析器，但这似乎有点矫枉过正。在下面的骨架函数中，决定性的部分是`content_modified =`.

```
def deleteEntry(path, key):
  # get content of bibtex file
  f = open(path, 'r')
  content = f.read()
  f.close() 
  # delete entry from content string
  content_modified = 

  # rewrite file
  f = open(path, 'w')
  f.write(content_modified)
  f.close() 
```

这是一个示例 bibtex 文件（摘要中有空格）：

```
@article{dai2008thebigfishlittlepond,
    title = {The {Big-Fish-Little-Pond} Effect: What Do We Know and Where Do We Go from Here?},
    volume = {20},
    shorttitle = {The {Big-Fish-Little-Pond} Effect},
    url = {http://dx.doi.org/10.1007/s10648-008-9071-x},
    doi = {10.1007/s10648-008-9071-x},
    abstract = {The big-fish-little-pond effect {(BFLPE)} refers to the theoretical prediction that equally able students will have lower academic
self-concepts in higher-achieving or selective schools or programs than in lower-achieving or less selective schools or programs,
largely due to social comparison based on local norms. While negative consequences of being in a more competitive educational
setting are highlighted by the {BFLPE}, the exact nature of the {BFLPE} has not been closely scrutinized. This article provides
a critique of the {BFLPE} in terms of its conceptualization, methodology, and practical implications. Our main argument is that
of the {BFLPE.}},
    number = {3},
    journal = {Educational Psychology Review},
    author = {Dai, David Yun and Rinn, Anne N.},
    year = {2008},
    keywords = {education, composition by performance, education, peer effect, education, school context, education, social comparison/big-fish{\textendash}little-pond effect},
    pages = {283--317},
    file = {Dai_Rinn_2008_The Big-Fish-Little-Pond Effect.pdf:/Users/jpl2136/Documents/Literatur/Dai_Rinn_2008_The Big-Fish-Little-Pond Effect.pdf:application/pdf}
}

@book{coleman1966equality,
    title = {Equality of Educational Opportunity},
    shorttitle = {Equality of educational opportunity},
    publisher = {{U.S.} Dept. of Health, Education, and Welfare, Office of Education},
    author = {Coleman, James},
    year = {1966},
    keywords = {\_task\_obtain, education, school context, soz. Ungleichheit, education}
} 
```

编辑：这是我想出的解决方案。它不是基于匹配整个 bibtex 条目，而是查找所有开头`@article{dai2008thebigfishlittlepond,`，然后通过切片上下文字符串来删除相应的条目。

```
content_keys = [(m.group(1), m.start(0)) for m in re.finditer("@\w{1,20}\{([\w\d-]+),", content)]
idx = [k[0] for k in content_keys].index(key)
content_modified = content[0:content_keys[idx][1]] + content[content_keys[idx + 1][1]:] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:36:46.727

正如 Beni Cherniavsky-Paskin 在评论中提到的那样，您将不得不依赖这样一个事实，即您的 BibTex 条目将在行首之后开始和结束（没有任何制表符或空格）。然后你可以这样做：

```
pattern = re.compile(r"^@\w+\{"+key+r",.*?^\}", re.S | re.M)
content_modified = re.sub(pattern, "", content) 
```

注意这两个修饰符。`S`使`.`匹配换行符。在字符串的开头`M`进行匹配。`^`

如果你不能依赖这个事实，那么 BibTex 格式根本就不是一种常规语言（因为它允许嵌套`{}`必须计算正确的结果。有正则表达式风格，这可能仍然使这项任务成为可能（使用递归或平衡组），但我认为 Python 不支持这些功能。因此，您实际上必须使用 BibTex 解析器（我猜这也会使您的代码更加不稳定）。

# ios - iOS 上的 RevMob 崩溃

> ID：13506159
> 
> 赞同：2
> 
> 时间：2012-11-22T05:00:31.447
> 
> 标签：ios, revmob

我最近使用 Xcode 4.5 升级了我的 cocos2d 项目的 RevMob SDK。下面是显示我所做的代码：

```
#import <StoreKit/StoreKit.h>
#import <RevMobAds/RevMobAds.h>

- (void) applicationDidFinishLaunching:(UIApplication*)application{
    [RevMobAds startSessionWithAppID:@"my app id"];
    //some code here...
} 
```

在设备或模拟器上运行项目时，应用程序因以下错误而崩溃：

> +[RevMobAds startSessionWithAppID:]: 发送到类的无法识别的选择器

但是，可能有用的一件事是，当我将 RevMob 框架添加到我的 Xcode 时，它​​给了我编译错误（使用**LLVM GCC 4.2**），我遵循[了这个答案](https://stackoverflow.com/questions/12679199/cocos2d-with-new-revmobads-framework/12694807#12694807)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:22:49.843

此方法包含在版本 5.0.0 ( [RevMob changelog](http://sdk.revmob.com/ios#changelog) ) 中，因此请确保您使用的框架至少为 5.0.0。

# iphone - 如何在iphone中以编程方式获取“常规->日期和时间->自动设置”的值？

> ID：13506163
> 
> 赞同：4
> 
> 时间：2012-11-22T05:00:48.380
> 
> 标签：iphone, objective-c, ios, xcode

我想以编程方式了解“自动设置”值，以便验证我的应用程序的启动。这可以告诉我时间是否可靠，并进一步继续我的应用程序操作。

我不想改变价值，只是想知道它的价值是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:05:43.747

无法获得该设置的值。即使可以，有时也没有任何意义，因为用户可能不在小区覆盖范围内，这意味着时间可能无论如何都不准确。

# android - 如何将图像从 sd 卡上传到服务器中的文件夹

> ID：13506167
> 
> 赞同：2
> 
> 时间：2012-11-22T05:01:14.780
> 
> 标签：android, image-uploading

我想将图像从我的 sd 卡上传到服务器中的文件夹。我有以下信息 [http://mywebsite.myworks.com/parent/webservices/myuploader.ashx](http://mywebsite.myworks.com/parent/webservices/myuploader.ashx) (POST)

```
Content-Disposition: form-data; name="Filename"
FilName.jpg

Content-Disposition: form-data; name="password"
mypassword

Content-Disposition: form-data; name="action"
upload

Content-Disposition: form-data; name="parentNodeId"
1297

Content-Disposition: form-data; name="replaceExisting"
0

Content-Disposition: form-data; name="username"
admin

Content-Disposition: form-data; name="Filedata"; filename="2012-11-07 11-03-37.jpg"
Content-Type: application/octet-stream
[DATA] 
```

基本上我想要的是将图像上传到文件夹。到目前为止我所了解的是上传到 parentNodeId 为 1297 的文件夹。我看到了一些关于如何将图像上传到 php 服务器的教程。基于此我编写了一个函数。我在下面分享

```
private void doFileUpload() {
    HttpURLConnection conn = null;
    DataOutputStream dos = null;
    DataInputStream inStream = null;
    String exsistingFileName = "/sdcard/r.jpg";

    // Is this the place are you doing something wrong.
    String lineEnd = "rn";
    String twoHyphens = "--";
    String boundary = "*****";

    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1 * 1024 * 1024;
    String responseFromServer = "";
    String urlString = "http://mywebsite.myworks.com/parent/webservices/myuploader.ashx";

    try {
        // ------------------ CLIENT REQUEST
        Log.e("UploadMe", "Inside second Method");
        FileInputStream fileInputStream = new FileInputStream(new File(exsistingFileName));

        // open a URL connection to the Servlet
        URL url = new URL(urlString);

        // Open a HTTP connection to the URL
        conn = (HttpURLConnection) url.openConnection();

        // Allow Inputs
        conn.setDoInput(true);

        // Allow Outputs
        conn.setDoOutput(true);

        // Don't use a cached copy.
        conn.setUseCaches(false);

        // Use a post method.
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Connection", "Keep-Alive");
        // conn.setRequestProperty("Content-Type",
        // "multipart/form-data;boundary="+boundary);
        conn.setRequestProperty("Content-Type", "application/octet-stream");

        dos = new DataOutputStream(conn.getOutputStream());
        dos.writeBytes(twoHyphens + boundary + lineEnd);
         dos.writeBytes("Content-Disposition: form-data; name=\"Filename\";filename=\""
         + exsistingFileName + "\"" + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"Filename\";filename=\""
                + "r.jpg" + "\"" + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"password\";filename=\""
                + "mypassword" + "\"" + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"action\";filename=\""
                + "upload" + "\"" + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"parentNodeId\";filename=\""
                + "-1" + "\"" + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"replaceExisting\";filename=\""
                + "0" + "\"" + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"username\";filename=\""
                + "admin" + "\"" + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"Filedata\";filename=\""
                + "2012-11-07 11-03-37.jpg" + "\"" + lineEnd);

        dos.writeBytes(twoHyphens + boundary + lineEnd);

        dos.writeBytes(lineEnd);
        Log.e("UploadMe", "Headers are written");

        // create a buffer of maximum size
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

        // read file and write it into form...
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);

        while (bytesRead > 0) {
            dos.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }

        // send multipart form data necesssary after file data...
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        // close streams
        Log.e("UploadMe", "File is written");
        fileInputStream.close();
        dos.flush();
        dos.close();

    }

    catch (MalformedURLException ex)

    {

        Log.e("UploadMe", "error: " + ex.getMessage(), ex);

    }

    catch (IOException ioe)

    {

        Log.e("UploadMe", "error: " + ioe.getMessage(), ioe);

    }

    // ------------------ read the SERVER RESPONSE
    try {
        inStream = new DataInputStream(conn.getInputStream());
        String str;

        while ((str = inStream.readLine()) != null) {
            Log.e("UploadMe", "Server Response" + str);
        }

        inStream.close();
    }

    catch (IOException ioex) {
        Log.e("UploadMe", "error: " + ioex.getMessage(), ioex);
    }

} 
```

该程序运行时没有任何崩溃，并且我从我的日志猫输出中得到这些。但我在我的服务器文件夹中看不到任何东西。

```
11-22 10:26:39.546: E/UploadMe(3363): Inside second Method
11-22 10:26:39.843: E/UploadMe(3363): Headers are written
11-22 10:26:39.851: E/UploadMe(3363): File is written
11-22 10:26:40.820: E/UploadMe(3363): Server Response<?xml version="1.0"?>
11-22 10:26:40.820: E/UploadMe(3363): Server Response<MediaResponse xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" success="false" /> 
```

由于我不知道将文件上传到服务器，这是上传文件的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:11:28.617

看到这个

链接[如何在Android中将图像上传到服务器？](https://stackoverflow.com/questions/8803430/how-to-upload-image-into-server-in-android)

在此示例中，他们希望与您在服务器上上传图像相同，但存储在文件夹中是您的 Web 服务开发人员的任务，他实际存储图像的位置。

您的任务只是将图像发送到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T05:17:05.520

一个 lib 可用调用`android-async-http-1.4.2.jar`，您也可以上传带有 post 字符串数据的文件

这是示例代码

```
RequestParams params = new RequestParams();
params.put("fname", "name");// here write your parameter name and its value
params.put("file", new File(filePath)); // Upload a File
// params.put("profile_picture2", someInputStream); // Upload an
// InputStream
// params.put("profile_picture3", new ByteArrayInputStream(someBytes));
// // Upload some bytes

AsyncHttpClient client = new AsyncHttpClient();
client.post(urlServer, params, new AsyncHttpResponseHandler() {
    @Override
    public void onSuccess(String arg0) {
        super.onSuccess(arg0);
        Log.v("from response", arg0);
    }
}); 
```

这是jar下载链接

[https://github.com/loopj/android-async-http/downloads](https://github.com/loopj/android-async-http/downloads)

# iphone - 如何从iphone中的本地xml文件传递表格视图中的图像

> ID：13506172
> 
> 赞同：1
> 
> 时间：2012-11-22T05:01:38.983
> 
> 标签：iphone, ios

使用 NSXMLParser 我可以从本地 XML 文件中检索数据，但我在 XML 文件中给出的图像路径没有检索到。下面的代码向您详细展示了。

```
NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Prices.xml"];
NSData *data = [[NSData alloc] initWithContentsOfFile:path];
egsParser *theParser =[[egsParser alloc] initParser];
[xmlParser setDelegate:theParser]; 
```

从这段代码中，我可以解析数据，但不知道如何检索图像并将其显示在表格视图中。表格视图代码如下。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell == nil){
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
 }

theLists = [app.listArray objectAtIndex:indexPath.row];
cell.textLabel.text = theLists.title;
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
return cell;
} 
```

请提出一个想法，从本地 XML 文件解析和显示表格视图中的图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:13:29.787

使用以下代码

```
 cell.imageView.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"Your Image Link"]]];

or 

 cell.imageView.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSString stringWithFormat:@"Your Image Link"]]]; 
```

根据您的代码，它将如下所示。

```
 cell.imageView.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:theList.imgUrl]]]; 
```

如果你想从保存的路径中检索图像

```
 cell.imageView.image= = [UIImage imageWithContentsOfFile:@"yourSavedpath"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:09:40.153

您必须使用委托方法来解析 XML 文件...

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
}
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
}
- (void)parserDidStartDocument:(NSXMLParser *)parser {
}
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
} 
```

通过使用这些委托方法，您可以获得所需的元素。

# zend-framework2 - Zend Framework 2 Navigation 的异常

> ID：13506175
> 
> 赞同：1
> 
> 时间：2012-11-22T05:01:49.333
> 
> 标签：zend-framework2

我正在寻找在 layout.phtml 文件中显示导航菜单：

```
<?php echo $this->navigation('navigation')->menu(); ?> 
```

因此，我将这些行添加到 /module/Application/config/module.config.php 以便根据我的应用程序路由声明菜单的结构：

```
'navigation' => array(
        'default' => array(
            'place' => array(
                'label' => 'Places',
                'route' => '/place',
                'pages' => array(
                    'country' => array(
                        'label' => 'Countries',
                        'route' => '/place/country',
                    ),
                    'state' => array(
                        'label' => 'States',
                        'route' => '/place/state',
                    ),
                    'city' => array(
                        'label' => 'Cities',
                        'route' => '/place/city',
                    ),
                ),
            ),
        ),
     ), 
```

然后我为 Zend/Navigation 实例编写了一个加载器：

```
'service_manager' => array(
        'factories' => array(
            'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
            'navigation' => 'Zend\Navigation\Service\DefaultNavigationFactory',
        ),
    ), 
```

但我反复得到这个例外：

> 致命错误：Zend\Mvc\Router\Exception\RuntimeException: Route with name "" not found in C:\wamp\www\bsol\vendor\zendframework\zendframework\library\Zend\View\Helper\Navigation\AbstractHelper.php on第 471 行

我试图解决将这一行添加到菜单声明的问题：

```
 'pages' => array(
                    'route' => '/place',
                    'country' => array(
                        'label' => 'Countries',
                        'route' => '/place/country',
                    ), 
```

然而，在那种情况下，我得到另一个不同的例外：

> 致命错误：未捕获的异常 'Zend\Navigation\Exception\InvalidArgumentException' 带有消息'无效参数：$page 必须是 Zend\Navigation\Page\AbstractPage 或 Traversable 的实例，或 C:\wamp\www\bsol 中的数组' \vendor\zendframework\zendframework\library\Zend\ServiceManager\ServiceManager.php 在第 733 行

更新：根据 Jurian Sluiman 的建议，

这必须是我的路由器配置（module\Place\config\module.config.php），如果我有一个名为“Place”的模块，带有 3 个控制器（城市、国家和州）：

```
'router' => array(
        'routes' => array(
            'city' => array(
                'type'    => 'segment',
                'options' => array(
                    'route'    => '/city[/:action][/:oid]',
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    ),
                    'defaults' => array(
                        'controller' => 'Place\Controller\City',
                        'action'     => 'index',
                    ),
                ),
            ),

            'country' => array(
                'type'    => 'segment',
                'options' => array(
                    'route'    => '/country[/:action][/:oid]',
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    ),
                    'defaults' => array(
                        'controller' => 'Place\Controller\Country',
                        'action'     => 'index',
                    ),
                ),
            ),

            'state' => array(
                'type'    => 'segment',
                'options' => array(
                    'route'    => '/state[/:action][/:oid]',
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    ),
                    'defaults' => array(
                        'controller' => 'Place\Controller\State',
                        'action'     => 'index',
                    ),
                ),
            ),

        ),
), 
```

这一定是我的导航配置（实际上我在 /config/autoload/menu.global.php 的可自动加载文件中找到了这个）：

```
return array(
    'navigation' => array(
        'default' => array(
            'place' => array(
                'label' => 'Places',
                'route' => 'country',
                'pages' => array(
                    'country' => array(
                        'label' => 'Countries',
                        'route' => 'country',
                    ),
                    'state' => array(
                        'label' => 'States',
                        'route' => 'state',
                    ),
                    'city' => array(
                        'label' => 'Cities',
                        'route' => 'city',
                    ),
                ),
            ),
        ),
     ),
); 
```

...现在它起作用了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T15:55:58.993

通常路线不以`/`. 是路线名称的`/`分隔符，因此当`/place`组装路线时，您有一个 parent `""`，然后是一个 child `"place"`。第一个是空的，给你这个错误。

也许您将路线名称与路线本身混淆了。您必须提供路线的名称，因此将返回路线本身（URL）。所以想象你有这个路由配置：

```
'router' => array(
    'routes' => array(
        'place' => array(
            'type' => 'literal',
            'options' => array(
                'route'    => '/place',
                'defaults' => array(
                    // Some defaults here
                ),
            ),
        ),
    ),
), 
```

在这种情况下，您的路线**名称**是`place`and not `/place`。如果您的路由配置与上面的不同，请将路由配置放在您的问题中，以便我可以更新我的答案。

# php - 在切换控制流的情况下是否可以调用函数？

> ID：13506176
> 
> 赞同：3
> 
> 时间：2012-11-22T05:02:03.827
> 
> 标签：php, switch-statement

我真的可以这样做吗？

例子：

```
switch($string){
 case function_name(preferably built-in functions): 
  //codes to run...
  break;
  ....
  ....

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:13:06.883

对的，这是可能的。

您可以调用内置函数或用户定义函数作为 case 表达式。

举个例子：

```
function foo() { return 1; }    
function bar() { return 2; }
$var = 3;    
switch($var) {
    case foo():
        echo "FOO\n";break;
    case bar():
        echo "BAR\n";break;
    case max(1,2,3):
        echo "MAX\n"; break;
} 
```

输出

```
MAX 
```

您可以在[此处](http://www.icosaedro.it/articoli/php-syntax-ebnf.txt)查看 PHP 语法，开关构造定义为：

```
switch_case_list = "{" [";"] {case_list} "}"
    | ":" [";"] {case_list} "endswitch" ";" ;

case_list = "case" expr [":"|";"] inner_statement_list
    | "default" [":"|";"] inner_statement_list ; 
```

很明显，`case`可以跟在 an 之后`expr`，如果你看到 expr 的定义，你会发现函数调用属于其中。

# php - 使用 Propel 的 MVC 模型的用户登录行为

> ID：13506178
> 
> 赞同：1
> 
> 时间：2012-11-22T05:02:17.260
> 
> 标签：php, model-view-controller, propel

假设我们有`User`Propel 创建的类。

MVC 放置方法的正确位置是什么`login()`？`AuditLog`该方法将实现与类交互的审计日志。

1.  `User::login()`
2.  `UserQuery::login()`
3.  `UserPeer::login()`
4.  `WebController::login()`并且`APIController::login()`和`MobileController::login()`
5.  `AuditingLog::login()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:24:24.603

虽然很多人会争论不休，但在我看来，登录行为不是模型的功能，而是属于控制器的业务逻辑。也就是说，在三个控制器之间复制功能也不是最优的。我的建议是在控制器之外有一个静态类来处理一些类似的应用程序逻辑以及每个控制器调用的逻辑。

# jqgrid - jQGrid asp.net mvc版本是免费的吗？

> ID：13506179
> 
> 赞同：1
> 
> 时间：2012-11-22T05:02:26.483
> 
> 标签：jqgrid, jqgrid-asp.net

浏览了许多链接，但仍然令人困惑。

据我了解。jQGrid javascript 版本是免费的。虽然 asp.net mvc 版本不是免费的..

我对吗？

请提供资料

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:51:30.140

有**两种不同的产品**：免费的开源 JavaScript jQuery 插件和商业产品[jqSuite](http://www.trirand.net/)。jqSuite 的某些版本具有相同的名称 jqGrid（请参见[此处](http://www.trirand.net/licensing.aspx)和[此处](http://www.trirand.net/download.aspx)）。产品 jqSuite 在内部使用免费的开源 JavaScript jQuery 插件。所以它是基于免费 jqGrid 的“顶级解决方案”。

一般来说，如果您只需要在您的 ASP.NET 项目中包含 jqGrid，您实际上并不需要订购 jqSuite。来自[answer](https://stackoverflow.com/a/5501644/315935)、[this one](https://stackoverflow.com/a/9349688/315935)、[this one](https://stackoverflow.com/a/10871428/315935)和许多其他的演示展示了如何实现它。

另一个免费的解决方案是由[tpeczek开发的](https://stackoverflow.com/users/333253/tpeczek)[Lib.Web.Mvc](https://github.com/tpeczek/Lib.Web.Mvc)（参见[这里](http://tpeczek.codeplex.com/releases/view/62741)的演示）。

另一方面，使用[jqSuite](http://www.trirand.net/)可以提高您的工作效率。

查看[此处](https://stackoverflow.com/a/2736334/315935)和[此处](https://stackoverflow.com/a/4439755/315935)了解更多信息。

# algorithm - 什么搜索算法失败最快

> ID：13506184
> 
> 赞同：1
> 
> 时间：2012-11-22T05:02:57.917
> 
> 标签：algorithm

给定一个整数，我需要从一个小集合中找到一个匹配项。整数几乎总是**不在**集合中。对于大多数搜索算法，这是最坏的情况（花费时间最长）。但是对于这个应用程序，搜索时间将取决于搜索失败的速度。所以我想要一个最好的情况是“找不到”的算法。

这样的事情存在吗？

整数远非随机，是数组索引——比如 0..10k（15 位）。这些集合将包含 0..7 个整数，这对于简单的线性搜索来说是足够少的。但这在几乎所有情况下都是最坏的情况。

我唯一能想到的就是布隆过滤器。它会像这样工作：定义 F(int) = Set Bit (i AND 1Fh)（即，一个 32 位整数，一个位被设置）。对于每个集合，我会将 F（每个元素）的 OR'd 值存储在一起（一个 32 位整数，为 n 个元素设置最大 n 位）。然后搜索将是 IF (F(i) AND F(set))>0 然后执行线性搜索。

因此，除非至少一个集合元素具有与测试整数 i 相同的低 5 位，否则永远不会执行搜索。可以根据下一个最低 5 位添加第二个测试。

有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:21:19.813

我能想象到的最快的算法，它会立即成功或失败，是一个巨大的布尔数组 0..MaxInt，除了 Array[Set Member] 处的 True 之外，所有的都是 False。搜索将是一个简单的数组查找：

```
Found = Array[Test] 
```

但是内存占用是荒谬的。一个常见的优化是哈希数组。

作为测试，我使用 Set Members 的位实现了 Perfect Hash。**函数 PHash(int) 返回一个整数 0..15，它是数组索引，如果存在**匹配项，将在其中找到匹配项。那么搜索是：

```
IF Array[PHash(Test)] = Test 
  THEN Found at Index PHash(Test) 
  ELSE Not Found 
```

分析表明这比线性搜索慢，这可能不会让任何人感到惊讶。（叹）

当然，没有单个 Hash 可以将 15 位整数减少为不同的 4 位整数。我使用许多不同的哈希函数。为了生成 Set，我找出哪个函数为该 Set 生成不同的 4 位散列，然后将 Set 存储为散列函数指针加上一个 16 元素数组。每个数组元素是 X 或一个集合成员，其中 X 不在集合范围内。（未能找到完美哈希会引发异常，这还没有发生。）这些开销在分析中都不重要，因为它在程序启动时完成一次。

要在 Set 中查找 Test 整数，我调用 Set.HashFunction(Test)，然后将 Test 与该 Set.Array 元素进行比较。最后的比较与线性搜索的每个步骤相同。为了更快，哈希函数必须比线性搜索的剩余比较更快。所以这**可能**是一个更快的算法，但只适用于足够大的集合大小。

我还没有尝试找到那个集合大小。无论如何，这取决于每个散列函数的速度。

# macos - 如何让 OSX 上的终端清晰启动？

> ID：13506186
> 
> 赞同：0
> 
> 时间：2012-11-22T05:02:59.453
> 
> 标签：macos, terminal

我是 Mac OSX 的新手。在终端中输入导出命令后，每次启动终端时，都会显示两条消息： `-bash: export: '=': not a valid identifier`

```
-bash: export: `:/Users/Li/File/Java/TStream': not a valid identifier 
```

我知道 clear 和 command+k 可以得到一个干净的屏幕。但我只想从一个干净的终端开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:10:40.867

转到您的终端并输入

```
clear 
```

命令。这应该清除您的屏幕。也许您正在寻找的是一种让 bash 每次都运行的方法。如果是这样，请 cd 到您的主目录：

```
cd ~ 
```

然后编辑名为 .bash_profile 的文件，或者可能是 .bashrc

在最后一行写上不带引号的“清除”一词，然后保存。该文件在 bash 启动时运行，因此它要做的最后一件事就是清屏。

欲了解更多信息，结帐：[这个](http://wiki.bash-hackers.org/scripting/bashbehaviour)

编辑：

顺便说一句，我刚刚意识到您可能想要清除错误。当您打开 .bashrc 文件时，查看是否可以找到与您遇到的错误相似的行，然后将其注释掉。

# c# - 在 Windows Phone 7.1 中删除画布上的最后一条绘制线

> ID：13506188
> 
> 赞同：1
> 
> 时间：2012-11-22T05:03:33.353
> 
> 标签：c#, silverlight, windows-phone-7.1

我想在按钮单击事件中删除 Canvas 上的最后一条绘制线。

```
this.ContentPanelCanvas.Children.Clear(); 
```

上面的线删除画布上的所有绘制线。我只想删除最后一条绘制线。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:05:53.910

我还没有测试过，但最后一行可能也是`Children`集合的最后一个元素。因此，您应该能够：

```
if (this.ContentPanelCanvas.Children.Count > 0)
{
    this.ContentPanelCanvas.Children.RemoveAt(this.ContentPanelCanvas.Children.Count - 1);
} 
```

# datetime - CouchDB 日期函数

> ID：13506193
> 
> 赞同：1
> 
> 时间：2012-11-22T05:04:07.233
> 
> 标签：datetime, nosql, couchdb

我们正在将一个相当大的 PHP/MySQL 项目转换为 Angular/Node.js/CouchDB。我现在遇到的主要问题是我们的 MySQL 查询相当复杂，使用了很多日期函数（如 DATE_DIFF、DATE_FORMAT 等），我不知道如何将它们转换为这个新架构。

大多数开发人员如何处理 CouchDB 中的这些类型的函数？他们是否只是从数据库中提取原始数据并将所有计算留给控制器/前端？

示例查询：

```
SELECT DATE_DIFF(NOW(),table.datefrom) as how_long, DATE_FORMAT(table.datefrom,'%m/%d/%Y') as formatted_date FROM table ORDER BY datefrom 
```

CouchDB 将如何处理该查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:11:11.467

日期时间不是 CouchDB 中的“本机”类型。但是，您有几个不错的选择，可以根据情况进行选择。

您可以使用“时间戳”数值。（以本机毫秒为单位，或根据需要转换为秒）您可以使用`(new Date()).valueOf()`.

您还可以将日期时间的各个部分分解为一个数组。( `[ year, month, day, hour, minute, second ]`) 这将使您能够使用分组来“深入”到越来越具体的时间范围以及基于日期的各个部分的查询。

[如果你想从一个经过测试的库中进行日期操作和格式化，你可以引入一个像moment.js](http://momentjs.com/)这样的第三方模块作为一个[CommonJS模块](http://wiki.apache.org/couchdb/CommonJS_Modules)，你可以在你的视图/显示/列表/等中使用它。

我可以看到您上面的示例查询存在一个潜在问题。您基本上通过`DATE_DIFF(NOW(), ...)`. 在视图函数中，您将无法使用“瞬态”值，`NOW()`因为视图需要*不受*外部变量/条件的影响。但是，这可以通过添加一个[列表函数](http://wiki.apache.org/couchdb/Formatting_with_Show_and_List#Listing_Views_with_CouchDB_0.10_and_later)来解决，该函数可以获取您的视图结果并将输出转换为具有“相对”值，例如您想要实现的值，并且还可以接收查询字符串参数以进一步为您的视图添加动态。

# c# - 为什么 XmlSerializer 的 Deserialize() 会吐出一个 XmlNode[] 的子对象？

> ID：13506196
> 
> 赞同：1
> 
> 时间：2012-11-22T05:04:17.297
> 
> 标签：c#, .net, serialization, xmlserializer

我`XmlSerializer`用来序列化然后反序列化一个简单的对象。当我惊讶地反序列化对象时，我发现一个子对象没有正确反序列化，而是变成了`XmlNode[]`.

这几乎是我得到的结构：

```
// This line I put in here as a way of sneaking into the XML the 
// root node's C# namespace, since it's not the same as the 
// deserializing code and the deserializing code seemed unable to 
// deserialize properly without knowing the Type (see my code below).
// So I basically just use this fake construct to get the namespace 
// and make a Type of it to feed the XmlSerializer() instantiation.
[XmlRoot(Namespace = "http://foo.com/CSharpNamespace/Foo.Bar")]   

// This is because QueuedFile can be given to the Argument array.
[XmlInclude(typeof(QueuedFile))]
// This class is Foo.Bar.CommandAndArguments
public class CommandAndArguments {
    public String Command;
    public object[] Arguments;
}

// I don't think this matters to XmlSerialize, but just in case...
[Serializable()] 

// I added this line just thinking maybe it would help, but it doesn't
// do anything.  I tried it without the XmlType first, and that
// didn't work.
[XmlType("Foo.Baz.Bat.QueuedFile")]

// This class is Foo.Baz.Bat.QueuedFile (in a different c# 
// namespace than CommandAndArguments and the deserializing code)
public QueuedFile {
    public String FileName;
    public String DirectoryName;
} 
```

反序列化它的代码如下所示：

```
public static object DeserializeXml(String objectToDeserialize)
        {
            String rootNodeName = "";
            String rootNodeNamespace = "";

            using (XmlReader xmlReader = XmlReader.Create(new StringReader(objectToDeserialize)))
            {
                if (xmlReader.MoveToContent() == XmlNodeType.Element)
                {
                    rootNodeName = xmlReader.Name;
                    rootNodeNamespace = xmlReader.NamespaceURI;

                    if (rootNodeNamespace.StartsWith("http://foo.com/CSharpNamespace/"))
                    {
                        rootNodeName = rootNodeNamespace.Substring("http://foo.com/CSharpNamespace/".Length) + "." +
                                       rootNodeName;
                    }
                }
            }

            //MessageBox.Show(rootNodeName);
            try
            {
                Type t = DetermineTypeFromName(rootNodeName);

                if (t == null)
                {
                    throw new Exception("Could not determine type of serialized string.  Type listed as: "+rootNodeName);                    
                }

                var s = new XmlSerializer(t);
                return s.Deserialize(new StringReader(objectToDeserialize));

                // object o = new object();
                // MethodInfo castMethod = o.GetType().GetMethod("Cast").MakeGenericMethod(t);
                // return castMethod.Invoke(null, new object[] { s.Deserialize(new StringReader(objectToDeserialize)) });
            }
            catch (InvalidOperationException)
            {
                return null;
            }
        } 
```

这`CommandAndArguments`是序列化时的 XML：

```
<?xml version="1.0" encoding="utf-16"?>
<CommandAndArguments xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://foo.com/CSharpNamespace/Foo.Bar">
  <Command>I am a command</Command>
  <Arguments>
    <anyType xsi:type="Foo.Baz.Bat.QueuedFile">
      <FileName xmlns="">HelloWorld.txt</FileName>
      <DirectoryName xmlns="">C:\foo\bar</DirectoryName>
    </anyType>
  </Arguments>
</CommandAndArguments> 
```

但是当我反序列化时，我得到一个`CommandAndArguments`对象，其中 Arguments 是`XmlNode[]`第一项是属性，将 QueuedFile 作为类型，其他索引是属性的元素。但是为什么没有`QueuedFile`重新创建对象？

我怀疑这可能与 C# 命名空间有关，并且进行反序列化的引擎无法找到或使用`QueuedFile`...现在我已经添加了我没有错误，只是一个不完整的反序列化。`XmlInclude()``QueuedFile``XmlInclude()`

帮助？我已经阅读了我能找到的所有内容，并在谷歌上搜索了我所知道的所有内容并被卡住了。我当然有很多关于 XML 序列化的知识要学习，但我不确定我是如何在应该很简单的事情上失败的（实际上我之前做过几乎完全一样的事情，没有任何问题，唯一的区别是一切都是在同一个 C# 命名空间中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:06:59.833

对于遇到类似问题的任何人，根据您的情况，使用 NetDataContractSerializer 可能会更好。它是 DataContractSerializer 的替代方案，它在 XML 中记录 .Net 类型，使反序列化变得轻而易举，因为它确切地知道所涉及的类型，因此您无需使用反序列化命令告诉它根对象的类型。它可以生成 XML 或二进制形式的输出（我更喜欢 XML 以便于调试）。

下面是一些示例代码，用于轻松地将对象序列化和反序列化到字符串和从字符串中反序列化：

```
private static object Deserialize(string xml)
{
    object toReturn = null;

    using (Stream stream = new MemoryStream())
    {
        byte[] data = System.Text.Encoding.UTF8.GetBytes(xml);
        stream.Write(data, 0, data.Length);
        stream.Position = 0;
        var netDataContractSerializer = new NetDataContractSerializer();

        toReturn = netDataContractSerializer.Deserialize(stream);
    }

    return toReturn;
}

private static string Serialize(object obj)
{
    using (var memoryStream = new MemoryStream())
    using (var reader = new StreamReader(memoryStream))
    {
        var netDataContractSerializer = new NetDataContractSerializer();
        netDataContractSerializer.Serialize(memoryStream, obj);

        memoryStream.Position = 0;
        return reader.ReadToEnd();
    }
} 
```

非常简单！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:16:16.843

你能改变 XML 格式还是固定的？我不知道您遇到的问题是什么，但我广泛使用 DataContractSerializer 类，没有任何问题。

[http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)

```
public static void WriteObject(string fileName)
        {
            Console.WriteLine(
                "Creating a Person object and serializing it.");
            Person p1 = new Person("Zighetti", "Barbara", 101);
            FileStream writer = new FileStream(fileName, FileMode.Create);
            DataContractSerializer ser =
                new DataContractSerializer(typeof(Person));
            ser.WriteObject(writer, p1);
            writer.Close();
        }

        public static void ReadObject(string fileName)
        {
            Console.WriteLine("Deserializing an instance of the object.");
            FileStream fs = new FileStream(fileName,
            FileMode.Open);
            XmlDictionaryReader reader =
                XmlDictionaryReader.CreateTextReader(fs, new XmlDictionaryReaderQuotas());
            DataContractSerializer ser = new DataContractSerializer(typeof(Person));

            // Deserialize the data and read it from the instance.
            Person deserializedPerson =
                (Person)ser.ReadObject(reader, true);
            reader.Close();
            fs.Close();
            Console.WriteLine(String.Format("{0} {1}, ID: {2}",
            deserializedPerson.FirstName, deserializedPerson.LastName,
            deserializedPerson.ID));
        } 
```

# mongodb - MongoDB：将 mongod 记录到标准输出

> ID：13506198
> 
> 赞同：6
> 
> 时间：2012-11-22T05:04:26.640
> 
> 标签：mongodb

我已经在家用笔记本电脑上运行 MongoDB 一段时间了。`mongod`按照应有的方式将输出运行到标准输出。极好的...

我刚刚将它安装在我的工作笔记本电脑上，但它正在记录到一个文件中。

```
$ sudo mongod
all output going to: /usr/local/var/log/mongodb/mongo.log 
```

根据文档，MongoDB 应该默认记录到标准输出。这个 mongoDB 的安装是通过 home brew 完成的。为什么 mongod 记录到文件中，我如何让它记录到 stdout？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T10:32:59.100

如果您运行`cat `which mongod``，您会看到二进制文件周围的 Ruby 包装器会在未传递参数`mongod`的情况下附加默认配置。`--config`

```
ARGV << '--config' << '/usr/local/etc/mongod.conf' unless ARGV.find { |arg| arg =~ /--config/ }
exec "/usr/local/Cellar/mongodb/2.2.3-x86_64/mongod", *ARGV 
```

默认配置包含以下内容

```
# Store data in /usr/local/var/mongodb instead of the default /data/db
dbpath = /usr/local/var/mongodb

# Append logs to /usr/local/var/log/mongodb/mongo.log
logpath = /usr/local/var/log/mongodb/mongo.log
logappend = true

# Only accept local connections
bind_ip = 127.0.0.1 
```

如您所见，`logappend`并且`logpath`已设置。该`logpath`设置通常`None`是有意义的`/dev/stdout`。

说到点子上了。`mongod --config false`将输出到 STDOUT。这将在`mongod`没有配置的情况下运行二进制文件。如果这不理想，请更改`/usr/local/etc/mongod.conf`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T10:49:29.110

除了按照其他人的建议关闭文件日志记录之外，您还可以执行以下操作：

```
sudo mongod; tail -f /usr/local/var/log/mongodb/mongo.log 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-24T00:57:43.170

来自[文档](https://docs.mongodb.com/manual/reference/configuration-options/#systemLog.destination)：

> **systemLog.destination**类型：字符串
> 
> MongoDB 将所有日志输出发送到的目的地。指定文件或系统日志。如果指定文件，则还必须指定 systemLog.path。
> 
> 如果不指定 systemLog.destination，MongoDB 会将所有日志输出发送到标准输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T09:01:42.023

正如其他答案所说，您很可能在配置文件中进行了“logpath”设置。如果你不知道那在哪里，你可以通过运行 mongod 来找到它：

```
sudo su -
strace -e open mongod 
```

这会吐出一些信息 - mongod 尝试打开的每个文件 - 您应该能够在其中找到配置文件。对我来说，它看起来像这样（部分）：

```
…
open("/proc/cpuinfo", O_RDONLY)         = 3
open("/dev/urandom", O_RDONLY)          = 3
open("/etc/mongodb.conf", O_RDONLY)     = 4
all output going to: /var/log/mongodb/mongodb.log
open("/var/log/mongodb/mongodb.log", O_WRONLY|O_CREAT|O_APPEND, 0666) = 4
open("/var/log/mongodb/mongodb.log", O_WRONLY|O_CREAT|O_APPEND, 0666) = 1
… 
```

找到文件后，注释掉（用 # 号）logpath= 行，您的日志应该输出到标准输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T09:27:55.550

在我的机器上，brew 创建了一个 mongod.conf 文件`/usr/local/etc/`。

此外，您应该在日志文件的第 7 行（左右）看到类似这样的内容`/usr/local/var/log/mongodb/mongo.log`：

```
Tue Jan  8 10:14:25 [initandlisten] options: { bind_ip: "127.0.0.1", config: "/usr/local/etc/mongod.conf", dbpath: "/usr/local/var/mongodb" } 
```

# apache - 无法让我的网站在互联网上可用

> ID：13506199
> 
> 赞同：0
> 
> 时间：2012-11-22T05:04:32.487
> 
> 标签：apache, apache2

嗨，我正在使用 ubuntu 作为我的虚拟主机的服务器操作系统，但我在将我的域名重定向到我的服务器时遇到问题这是我的 /etc/hosts 文件和 /etc/apache2/sites-available/mysite 文件。

主机文件：

127.0.0.1 www.lowkey.se

# 以下行对于支持 IPv6 的主机是可取的

::1 ip6-localhost ip6-loopback fe00::0 ip6-localnet ff00::0 ip6-mcastprefix ff02::1 ip6-allnodes ff02::2 ip6-allrouters

网站可用/文件：

ServerAdmin webmaster@localhost 服务器名 www.lowkey.se

```
DocumentRoot /var/www/doost/
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory /var/www/doost/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory>

ErrorLog ${APACHE_LOG_DIR}/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog ${APACHE_LOG_DIR}/access.log combined 
```

以及来自我的域名提供商的屏幕截图：

![在此处输入图像描述](../Images/9bce0d6a30d81b6ed58d42bf9919f206.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:30:00.027

请在您的 Apache 配置中添加以下三行注释，然后重新启动 Apache：

```
DocumentRoot /var/www/doost/
ErrorLog ${APACHE_LOG_DIR}/error.log
CustomLog ${APACHE_LOG_DIR}/access.log combined 
```

如需评论，请按如下方式替换它们：

```
#DocumentRoot /var/www/doost/
#ErrorLog ${APACHE_LOG_DIR}/error.log
#CustomLog ${APACHE_LOG_DIR}/access.log combined 
```

# qt - 如何在上下文菜单中添加检查/取消检查 QAction？

> ID：13506201
> 
> 赞同：6
> 
> 时间：2012-11-22T05:05:03.827
> 
> 标签：qt, qt4, contextmenu, qmenu

我在 Qt 中创建了一个上下文菜单，我需要菜单中的项目以选中/未选中的方式工作，以便每次单击相应项目时都会切换。如何将此功能添加到 QAction 中，如下所示？![在此处输入图像描述](../Images/c9884780f77ef511c3f3f85d096abe31.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-18T20:04:29.207

这是手册中的相关部分。

> **可检查：布尔**
> 
> 该属性保存动作是否是可检查动作。
> 
> 可检查动作是具有开/关状态的动作。例如，在文字处理器中，粗体工具栏按钮可以打开或关闭。不是切换动作的动作是命令动作；简单地执行命令动作，例如文件保存。默认情况下，此属性为 false。
> 
> 在某些情况下，一个切换操作的状态应该取决于其他操作的状态。例如，“左对齐”、“居中”和“右对齐”切换操作是互斥的。要实现独占切换，请将相关的切换操作添加到 QActionGroup::exclusive 属性设置为 true 的 QActionGroup。
> 
> **访问功能：**
> 
> ```
> bool isCheckable() const
> 
> void setCheckable(bool) 
> ```
> 
> **通知信号：**
> 
> ```
> void changed() 
> ```

# python - 模型同级 Google App Engine 的不同默认值

> ID：13506202
> 
> 赞同：1
> 
> 时间：2012-11-22T05:05:05.500
> 
> 标签：python, google-app-engine, model

我正在为我的网站使用继承的建模模式，它在一个通用 PolyModel 基础下拥有每个媒体元素，每个不同的元素本身如下所示：

```
class STSeasonMedia(polymodel.PolyModel):
    season = db.ReferenceProperty(STSeason,collection_name='related_media')
    description = db.StringProperty()
    visible = db.BooleanProperty(default=True)
    priority = db.IntegerProperty(default=10) 
```

所以我希望“继承”模型有一些其他字段，但也有不同的默认值，例如：

```
class STVideo(STSeasonMedia):
    video_id = db.StringProperty()
    provider = db.StringProperty()
        priority = db.IntegerProperty(default = 100)

class STThumb(STSeasonMedia):
    picture = db.ReferenceProperty(STPicture,collection_name='thumbs')
    url = db.StringProperty()
    size = db.StringProperty()

class STNote(STSeasonMedia):
    content = db.TextProperty()
    visible = db.BooleanProperty(default=False)
    priority = db.IntegerProperty(default = 1) 
```

有没有办法设置这个不同的默认值，它们可能会在之后改变，但一开始必须由这些值改变。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:52:02.273

我认为您最好的解决方案可能是为`__init__`您的派生模型提供一种方法。如果用户没有提供任何属性，它可以为某些属性提供修改的默认值。

例如，您的 STVideo 类，它想要一个不同的默认值`priority`应该能够使用这个：

```
def __init__(self, priority=100, **kwargs):
    super(STVideo, self).__init__(priority=priority, **kwargs) 
```

# c# - 如何在远程计算机上运行应用程序并使用 .net c# 等待结果

> ID：13506204
> 
> 赞同：0
> 
> 时间：2012-11-22T05:05:05.607
> 
> 标签：c#, .net

我的要求是在外部计算机或远程计算机中运行计算并等待应用程序完成计算并返回结果。

这在 C# .net 中是否可行，如果可以，我该如何完成？

我试过 psexec 但它不等待响应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:39:30.613

**将 WCF 与异步调用一起使用；** 创建 WCF 服务并将该服务添加到您的项目中，同时在 Visual Studio的“*服务引用设置”*屏幕上选择“*生成异步操作”。*例如，这将为您的服务添加*异步*操作功能；

 **如果您的服务名称是 sumNumbers(int x, int y) 那么 Visual Studio 将自动为您生成 sumNumbersCompleted 事件。因此，您可以按如下方式调用您的服务；

```
sumNumbers(5,6);
sumNumbersCompleted+=methodWhentheEventisCompleted; 
```**

# javascript - 用javascript实现reportviewer find函数

> ID：13506205
> 
> 赞同：0
> 
> 时间：2012-11-22T05:05:09.410
> 
> 标签：javascript, jquery, asp.net

在我的页面上，我有reportviewer。

```
<rsweb:ReportViewer ID="ReportViewer1" runat="server" 
    CssClass="ReportViewer" AsyncRendering="false" 
    OnPreRender="RptViewer_PreRender" EnableViewState="true" 
    Width="100%" PageCountMode="Actual"
    WaitMessageFont-Size="1.2em" ShowToolBar="true" 
    Visible="true"
    InteractiveDeviceInfos="(Collection)">  
    <LocalReport></LocalReport>
</rsweb:ReportViewer> 
```

我正在尝试将它与我的工具栏集成，该工具栏也将具有报告查看器工具栏提供的功能。所以我没有使用reportviewer 的工具栏。

在我的工具栏上，我有图像和文本框：

```
<img src="img/search.png" alt="Find" onClick="findString()" />
<asp:TextBox id="txtSearch" runat="server"></asp:TextBox> 
```

这是我的脚本：

```
function findString() {
    var viewer = $("#ReportViewer1");
    var searchText = document.getElementByID('<%=txtSearch.ClientID>');
    if (!viewer.get_isLoading() && viewer.get_reportAreaContentType() == Microsoft.Reporting.WebFormsClient.ReportAreaContent.ReportPage) {
        viewer.find(str);
    }
    return false;
}

function nextHit() {
    var viewer = $("#ReportViewer1");
    if (!viewer.get_isLoading() && viewer.get_reportAreaContentType() == Microsoft.Reporting.WebFormsClient.ReportAreaContent.ReportPage) {
        viewer.findNext();
    }
    return false;
} 
```

在函数`findString`中，我得到（我在萤火虫中看到）`isLoading`是一个属性而不是一个函数。我错过了什么吗？

如果我将我的功能更改为：

```
function findString() {
    var viewer = $("#ReportViewer1");
    var searchText = document.getElementByID('<%=txtSearch.ClientID>');

        viewer.find(str);

    return false;
} 
```

我没有看到该错误，但没有看到报告中突出显示的搜索文本。帮助。

# jquery - JQuery Mobile 选择框不显示所选值？

> ID：13506207
> 
> 赞同：1
> 
> 时间：2012-11-22T05:05:13.533
> 
> 标签：jquery, jquery-mobile, jquery-selectbox

我有一个名为**crop**和varie**的选择框。通过Ajax 加载的品种****选择**框取决于**crop**的选择，然后呈现给JQueryMobile，正确填充的值。但未显示所选值。

 ****可能是什么原因？

我的代码：

```
<script>
            $(document).ready(function() {
                $("#crop").change(function(){
                    $.ajax({
                        type:'GET',
                        url :'variety.php',
                        dataType:"json",
                        //data:"fname=me",
                        data: ({crop: $('#crop').val()}),
                        success : function(data){
                            //                        alert(data);
                            $("#variety").html(data);                               
                        },
                        error : function(data){
                            //                        alert("Error"+data);
                        }
                    });

                });
            });
        </script>
<div data-role="fieldcontain">
                            <label for="crop" class="select">Crop :</label>
                            <select name="crop" id="crop" data-native-menu="false"><option selected>Choose an option</option>
                                <?php
                                while ($res = mysql_fetch_assoc($tests)) {
                                    $dropdown .= "\r\n<option value='{$res['id']}'>{$res['crop_name']}</option>";
                                }
                                echo $dropdown;
                                //}
                                ?>
                            </select>
                        </div>
                        <div data-role="fieldcontain">
                            <label for="variety" class="select">Variety :</label>
                            <select name="variety" id="variety" data-placeholder="true">
                            </select>
                        </div>  
<?php
                    }
                    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T05:11:18.743

您需要调用 selectmenu('refresh'); 在包含选择菜单的元素上。

$("#variety").html(data).selectmenu('refresh');

应该这样做。如果没有，请尝试：

$("#variety").html(data).selectmenu('refresh', true);****

# javascript - 使用 jQuery Trigger 事件将数据传递给 Change 事件处理程序？

> ID：13506209
> 
> 赞同：42
> 
> 时间：2012-11-22T05:05:17.923
> 
> 标签：javascript, jquery

有没有办法`change`通过 jQuery 的`trigger`方法将数据传递给事件？

这里的问题是一个`click`事件触发了上传菜单。但是，一旦选择了图像，`change`就会触发该事件。我传入触发事件的第二个参数的数据是传给click事件，而不是传给change事件。在下面的示例中，`data`未定义。

**触发图像更改**

```
$('.change_main_image').live('click', function() {
    $('input[name=photo].change_uploader').trigger('click', ["some string"]);
}); 
```

**事件处理程序**

```
$('input[name=photo].change_uploader').live('change', function (e, data) {
   alert(data); // undefined
   //canvas resize and upload script
}); 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-11-22T05:20:23.280

`.live()`已弃用。像这样使用`.on()`。`change`应该触发事件，而不是`click`

```
$('.change_main_image').on('click', function() {
    $('input[name=photo].change_uploader').trigger('change', [{somedata:true}]);
});

$('input[name=photo].change_uploader').on('change', function (e, data) {
   alert(data.somedata); 
   //canvas resize and upload script
}); 
```

# xpath - PHPCrawl 可以用于抓取网站吗？与 Scrapy 有什么不同？

> ID：13506216
> 
> 赞同：0
> 
> 时间：2012-11-22T05:06:28.337
> 
> 标签：xpath, web-scraping, web-crawler, scrapy, phpcrawl

我想抓取几个网站和许多建议`Scrapy`。它是基于 Python 的，因为我非常熟悉 PHP，所以我寻找了替代方案。

我有一个爬虫`PHPCrawl`。我不确定它是否只是一个爬虫，或者它是否也会提供抓取工具。如果它可以用于抓取——它是否支持 XPath 或正则表达式。

如何与`Scrapy`Python 上的哪个进行比较。

请建议我哪个最适合用于抓取网站。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:18:00.910

PHPCrawl 是一个纯粹的爬虫，它将找到的页面及其源代码“按原样”（连同一些上下文信息）提供给用户。因此它速度很快，它不能使用多进程并且有大量的选项来配置它。

不能对 Scrapy 说太多，因为到目前为止我还没有使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:52:16.367

是的当然。但正如我所说，PHPCrawl 提供页面源，您必须提取要从中提取的数据。

# jquery - jQuery顺序循环

> ID：13506217
> 
> 赞同：0
> 
> 时间：2012-11-22T05:06:40.847
> 
> 标签：jquery, loops, for-loop

我有 4 个盒子，我希望内容按盒子顺序依次更改 -
盒子 1 有水果和蜥蜴
盒子 2 水果和蜥蜴
盒子 3 水果和蜥蜴
盒子 4 水果和蜥蜴

加载时，您只会看到所有蜥蜴都被 CSS 隐藏的
水果 Box1：水果在
1 秒后变为蜥蜴
Box2：水果在
1 秒后变为蜥蜴 Box3：水果在 1 秒 后
变为蜥蜴 Box4：水果变为蜥蜴 这就是我的位置在并且我似乎无法让它循环：

```
x = 1;      
j = x + 1;

for (var i = 1; i<8; i++) { 
       setInterval(function() {
            $("#imager"+x).delay(1000).fadeOut(300);
            $("#imager"+j).delay(1000).fadeIn(300);
        },1000); 
    };

<div class="holder">                
    <ul>
        <li class="itemer">
            <img src="images/fruit.jpg" alt="fruit" id="imager1" />
        </li>
        <li class="itemer">
            <img src="images/lizard.jpg" alt="lizard" id="imager2" class="hide" />
        </li>
    </ul>
</div>
<div class="holder">                
    <ul>
        <li  class="itemer">
            <img src="images/fruit.jpg" alt="fruit" id="imager3" />
        </li>
        <li class="itemer">
            <img src="images/lizard.jpg" alt="lizard" id="imager4" class="hide" />
        </li>
    </ul>
</div>
<div class="holder">                
    <ul>
        <li class="itemer">
            <img src="images/fruit.jpg" alt="fruit" id="imager5" />
        </li>
        <li class="itemer">
            <img src="images/lizard.jpg" alt="lizard" id="imager6" class="hide" />
        </li>
    </ul>
</div>
<div class="holder">                
    <ul>
        <li class="itemer">
            <img src="images/fruit.jpg" alt="fruit" id="imager7" />
        </li>
        <li class="itemer">
            <img src="images/lizard.jpg" alt="lizard" id="imager8" class="hide" />
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:11:16.993

由于调用是异步的，因此不能运行传统的 for 循环。尝试使用递归调用，以便在当前迭代完成时开始下一次迭代：

```
var i = 1;
var nextIteration = function() {
    $("#imager"+i).fadeOut(300, function() {
        i++;
        $("#imager"+i).fadeIn(300);
        i++;
        setTimeout(nextIteration, 1000);
    });
}; 

setTimeout(nextIteration, 4000);​ 
```

[演示](http://jsfiddle.net/2BsKW/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:31:56.693

您可以为要显示和隐藏的元素创建一个“索引”，然后使用[jQuery.toggle](http://api.jquery.com/toggle/)将它们切换为可见，稍后您可以使用它的回调来调用下一个元素。

```
var divs = $('.holder');
var div_idx = 0;

function nextDiv()
{
    return divs[div_idx++ % divs.length];
}

var toggleHolder = function(){
    $(nextDiv()).toggle("slow",toggleHolder);
};  
$(nextDiv()).toggle("slow", toggleHolder);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T06:07:30.490

而不是动画延迟，只需延长超时时间

```
var imageIndex = 0;
var imageInterval = setInterval(function(){
                       $("#imager"+(++imageIndex)).fadeOut(300);
                       $("#imager"+(++imageIndex)).fadeOut(300);
                       if (imageIndex == 8) clearInterval(imageInterval);
                    }, 1000); 
```

- 或者 -

```
var imageIndex = 0;
for (var i=0; i < 8; i=i+2) {
     setTimeout(function(){
         $("#imager"+(++imageIndex)).fadeOut(300);
         $("#imager"+(++imageIndex)).fadeOut(300);
     }, (i+1)/2*1000);
} 
```

- 或者 -

```
function toggleImage(x, y, delay){
   setTimeout(function(){
      $("#imager"+x).fadeOut(300);
      $("#imager"+y).fadeOut(300);
   }, delay);
}

for (var i=1; i < 8; i=i+2) {
    toggleImage(i, i+1, (i+1)/2*1000);
} 
```

- 或者 -

```
for (var i=1; i < 8; i=i+2) {
   (function(x, y){
      setTimeout(function(){
         $("#imager"+x).fadeOut(300);
         $("#imager"+y).fadeOut(300);
      }, y/2*1000);
   })(i, i+1); 
```

- 或者 -

```
$([1,3,5,7]).each(function(index, value){
    setTimeout(function(){
        $("#imager"+value).fadeOut(300);
        $("#imager"+value+1).fadeOut(300);
    }, (value+1)/2*1000);
}); 
```

# java - JNA：指向结构数组的指针：无效指针

> ID：13506223
> 
> 赞同：1
> 
> 时间：2012-11-22T05:08:04.577
> 
> 标签：java, pointers, dll, structure, jna

我是 JNA 的新手，在指针映射方面遇到问题

本机方法：

> *   EXTERNC T_PDU_ERROR PDUStartComPrimitive(UNUM32 hMod,UNUM32 hCLL,T_PDU_COPT CopType,UNUM32 CoPDataSize,UNUM8
>     *pCopData,PDU_COP_CTRL_DATA *pCopCtrlData, void *pCopTag, UNUM32 *phCoP)

JNA 方法：

*   > int PDUStartComPrimitive（int hMod，int hCLL，int CoPType，int
    > CoPDataSize，byte[] pCoPData，PDU_COP_CTRL_DATA.ByReference
    > pCopCtrlData，指针 pCoPTag，IntByReference phCoP）；

原生结构：

```
typedef struct{
UNUM32 Time;
SNUM32 NumSendCycles;
SNUM32 NumReceiveCycles;
UNUM32 TempParamUpdate;
PDU_FLAG_DATA TxFlag;
UNUM32 NumPossibleExpectedResponses;
PDU_EXP_RESP_DATA *pExpectedResponseArray;
}PDU_COP_CTRL_DATA;

typedef struct{
UNUM32 ResponseType;
UNUM32 AcceptanceId;
UNUM32 NumMaskPatternBytes;
UNUM8 *pMaskData;   
UNUM8 *pPatternData;    
UNUM32 NumUniqueRespIds;
UNUM32 *pUniqueRespIds; 
}PDU_EXP_RESP_DATA; 
```

JNA 映射：

```
public class PDU_COP_CTRL_DATA extends Structure{       
    public int time;        
    public int numSendCycles;       
    public int numReceiveCycles;        
    public int tempParamUpdate;     
    public PDU_FLAG_DATA txFlag;        
    public int numPossibleExpectedResponses;        
    public Pointer pExpectedResponseArray;      
    public static class ByReference extends PDU_COP_CTRL_DATA implements     Structure.ByReference {
    };
}

public class PDU_EXP_RESP_DATA extends Structure{        
     public int responseType;        
     public int acceptanceId;
     public int numMaskPatternBytes;
     public byte[] pMaskData= new byte[1];
     public byte[] pPatternData = new byte[1];
     public int numUniqueRespIds;
     /* Array containing unique response identifiers. Only responses with a unique response identifier found in this array are considered, when trying to match them to this expected response. */
     public Pointer pUniqueRespIds;  
     public static class ByReference extends PDU_EXP_RESP_DATA implements Structure.ByReference {
     };
} 
```

当我在 Java 中执行 PDUStartComPrimitive 方法并查看底层 dll 日志时，我看到 PDU_COP_CTRL_DATA 结构字段 *pExpectedResponseArray 我得到 Invalid *PDU_EXP_RESP_DATA 指针。

我的 JNA 代码来设置 PDUStartComPrimitive 执行

```
 byte[] sendata = new byte[requestData.length() / 2];

        int byteIndex = 0;
        for (String byteString : requestData.split(" ")) {
            sendata[byteIndex] = Byte.parseByte(byteString, 16);
            byteIndex++;
        }
        /* Setting of the expected responses ends */

        PDU_COP_CTRL_DATA.ByReference objCopCtrlData = new PDU_COP_CTRL_DATA.ByReference();
        objCopCtrlData.numPossibleExpectedResponses = 1;
        objCopCtrlData.numReceiveCycles = 1;
        objCopCtrlData.numSendCycles = 1;
        objCopCtrlData.tempParamUpdate = 0;
        objCopCtrlData.time = 0;

        PDU_EXP_RESP_DATA expRespStruct = new PDU_EXP_RESP_DATA();

        expRespStruct.acceptanceId = 0;
        expRespStruct.numMaskPatternBytes = 1;
        expRespStruct.numUniqueRespIds = 0;
        expRespStruct.pUniqueRespIds = new Pointer(0);
        expRespStruct.responseType = 0;

        byte[] mskByte = byte int[] { 0 };
        byte[] patternByte = new byte[] { 0 };
        expRespStruct.pMaskData = mskByte;
        expRespStruct.pPatternData = patternByte;

        PDU_EXP_RESP_DATA[] refArr = (PDU_EXP_RESP_DATA[]) expRespStruct.toArray(1);
        refArr[0] = expRespStruct;

        expRespStruct.autoWrite();

        objCopCtrlData.pExpectedResponseArray = expRespStruct.getPointer();

        PDU_FLAG_DATA.ByValue objTxFlagData = new PDU_FLAG_DATA.ByValue();          
        objCopCtrlData.txFlag = objTxFlagData;

        String strComAction = "SEND_RECV";
        Pointer apiTag = new NativeString(strComAction, true).getPointer();
        IntByReference phCop = new IntByReference();

        int errorCode = PDUStartComPrimitive(1, 1,0x8004, sendata.length,sendata, objCopCtrlData, apiTag, phCop); 
```

我怀疑这可能是因为错误的 JNA 映射。你能帮我提出任何想法/建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:43:36.277

a 中的原始数组`Structure`被解释为内联数组，这会产生聚合（数组）类型的字段。您的本机结构指示这些字段的指针类型，因此您需要使用 Pointer、PointerType 或 NIO Buffer。

# algorithm - Kd树：最近邻搜索算法

> ID：13506226
> 
> 赞同：5
> 
> 时间：2012-11-22T05:08:26.993
> 
> 标签：algorithm, nearest-neighbor, kdtree

这是我对它的理解： 1\. 向下递归，根据 ELEMENT 是否存在于左子树或右子树中取左子树或右子树。2\. 将 CURRENT_BEST 设置为您到达的第一个叶节点。3\. 当你递归备份时，检查 ELEMENT 是否离分裂超平面比离 CURRENT_BEST 更近。如果是这样，请将 CURRENT_BEST 设置为当前节点。

这是我从[Wikipedia](https://en.wikipedia.org/wiki/K-d_tree)和我的班级得到的部分，也是我不明白的部分： 4.检查3.中挑出的分裂点的另一个子树中的任何节点是否比分裂点更接近ELEMENT .

我不明白为什么我们需要做 4.，因为可能位于分裂节点的一个子树中的任何点都必须比另一个子树中的任何点更靠近分裂节点。

显然，我对算法的理解存在缺陷，因此将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T14:43:14.353

第 4 步是第 3 步中的“其他”，如果平面比该点更近，您会做什么。仅仅因为您找到的点与您正在寻找邻居的点在同一个矩形中并不意味着它是最近的。

想象一下下面的场景：你的 kD-Tree 中有两个点，A 和 B。A 在它的矩形的中间，而 B 刚好在边缘的上方，在 A 旁边的分区区域中。如果你现在搜索对于点 C 的最近邻居，它紧邻 B 但恰好是边缘的另一侧并且在 A 的分区区域中，由于初始深度优先搜索选择任何内容，您选择的第一个点将是 A将与您的搜索点位于同一分区中。但是，B 实际上更接近，所以即使您选择了 A，您也需要检查 B 是否更接近，否则您的 kD-Tree 实际上不会给您正确的结果。

将其可视化的一个好方法是将其绘制出来：

> A-------------C--|--B

A 是我们在 DFS 中找到的第一个点，C 是我们想要最近邻的点，B 是实际最近邻，| 是我们的分裂平面。

另一种思考方式是在点 C 周围画一个半径为 dist(A,C) 的圆。如果任何其他矩形的任何部分都落在这个圆内，那么它们就有可能持有一个点，该点可能是比 A 更接近 C，因此必须检查它们。如果你现在找到 B，你可以减少你的圆的半径（因为 B 更接近），这样更少的矩形有相交的机会，并且一旦你检查了所有与你的圆相交的矩形（减少你的圆半径作为你的找到更近的邻居）你可以明确地说没有更近的点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:59:08.180

[我在 github 上](http://github.com/gvd/kdtree)写了一个基本的C++ 实现。它具有迭代和递归版本。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-11-22T07:15:52.877

```
function kdtree (list of points pointList, int depth)
{
    // Select axis based on depth so that axis cycles through all valid values
    var int axis := depth mod k;

    // Sort point list and choose median as pivot element
    select median by axis from pointList;

    // Create node and construct subtrees
    var tree_node node;
    node.location := median;
    node.leftChild := kdtree(points in pointList before median, depth+1);
    node.rightChild := kdtree(points in pointList after median, depth+1);
    return node;
} 
```

# javadoc - 如何生成没有框架的 JavaDoc？

> ID：13506227
> 
> 赞同：7
> 
> 时间：2012-11-22T05:08:40.997
> 
> 标签：javadoc, frames

[我目前在 GitHub 上](https://github.com/MartinThoma/prog-ws1213/tree/master/Blatt-01)有一些Source 和 Javadoc 。您可能知道，无法在 GitHub 上查看（渲染的）HTML 页面。但是这个问题存在[解决方案](https://stackoverflow.com/a/12252687/562769)。就在前一天，这个解决方案还可以处理框架，但我宁愿生成没有框架的Javadoc。这可能吗？

（我目前使用此命令生成 Javadoc `javadoc -d ../javadoc/ *`：）

我目前得到这个结果：

![在此处输入图像描述](../Images/0318de1652fdca924a986e657b634ce5.png)

我想得到相同的结果，但没有`frameset`（也许是`table`s 或`div`s）

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-25T07:07:54.513

像往常一样生成 javadoc 并将覆盖替换`index.html`为`overview-summary.html`.

# c++ - 标准头文件中 std::nothrow 和 std::new_handler 的用途是什么

> ID：13506234
> 
> 赞同：3
> 
> 时间：2012-11-22T05:10:01.697
> 
> 标签：c++, std, nothrow

我遇到了一个小的标准头文件`<new>`。我以前可能没有见过它的直接用途。这里是[g++ 版本](http://ideone.com/Bbxd6p)，供有兴趣的人使用。

以下部分是我感兴趣的：

```
 struct nothrow_t { };
  extern const nothrow_t nothrow;
  /** If you write your own error handler to be called by @c new, it must
   *  be of this type.  */
  typedef void (*new_handler)();
  /// Takes a replacement handler as the argument, returns the previous handler.
  new_handler set_new_handler(new_handler) throw(); 
```

1.  程序员如何使用`struct nothrow_t`它及其对象？`nothrow`对象真的需要`extern`吗？
2.  什么时候`new_handler`用？
3.  为什么所有的`operator new/delete`都在`extern C++`块中声明？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T05:28:33.833

`nothrow_t`用于告诉`operator new`在向后兼容的“失败时返回 null 而不是抛出异常”模式下操作。

也就是说，如果你看到这样的代码：

```
int * idx = new(std::nothrow) int; 
```

那将`nothrow_t`在工作。对于标准中的相关部分，从（从 C++11 N3376 开始）17.6.4.6 [replacement.functions]/1 开始，然后从那里开始。

要回答您的具体问题：

1.  是的，它确实必须是外部的，至少根据 18.6 [support.dynamic]/1，其中包括：

    ```
    namespace std {
        class bad_alloc;
        class bad_array_new_length;
        struct nothrow_t {};
        extern const nothrow_t nothrow;
        typedef void (*new_handler)();
        new_handler get_new_handler() noexcept;
        new_handler set_new_handler(new_handler new_p) noexcept;
    } 
    ```

    此外，17.6.2.3 [using.linkage]/1 表示“C++ 标准库中的实体具有外部链接 (3.5)”。函数和类（例如`get_new_handler`及`set_new_handler`以上）不需要显式注释以具有外部链接，因为默认情况下它们具有外部链接。

2.  `new_handler`当用户`operator new`通过调用覆盖使用的默认值时使用`set_new_handler`. 它只是一个函数指针类型。

3.  可能是因为`operator new`C 中没有保留的签名。`extern "C++"`告诉编译器允许对这些函数进行名称修改和其他 C++ 特定的事情。这样，您可以将一个翻译单元编译为 C，一个编译为 C++，并将它们链接到同一个二进制文件中，而不必担心 C 领域中的某个人定义了一个与编译器的`operator new`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T05:21:01.300

好吧，这确实是一个“请阅读文档”的问题。任何好的 C++ 入门书都应该讨论`nothrow`. 例如，我记得 Bjarne 的“The C++ Programming Language”确实如此。

但无论如何，您使用`nothrow`将`std::bad_alloc`异常转换为空指针结果，并且您使用*新的处理程序*可能重试失败的分配。

作为一个实际的问题，记住在你使用该功能时将其放在`::`前面，并且一般在使用全局placement new时，以避免从classes中选择placement new。除了通常应该避免放置 new （因为它是非常低级的语言特性），*即使它在技术上没有意义*，我也会这样做。就像一个好习惯一样。`new``nothrow`

 ** * *

例子：

```
#include <iostream>     // std::wcout, std::endl
#include <stdlib.h>     // EXIT_FAILURE, EXIT_SUCCESS
#include <new>          // std::nothrow
using namespace std;

int main()
{
    int* const p = ::new( std::nothrow ) int[0x7fffffff/sizeof(int)];
    if( !p )
    {
        cout << "Allocation failed!" << endl;
        return EXIT_FAILURE;
    }
    cout << "Alles success!" << endl;
    delete[] p;
    return EXIT_SUCCESS;
} 
```

我的系统上的输出：

```
[D:\开发\测试]
> 一个
分配失败！

[D:\开发\测试]
> _

```

请注意，以上假设是 32 位进程:)*

# css - 表格中的 CSS 问题

> ID：13506239
> 
> 赞同：0
> 
> 时间：2012-11-22T05:11:10.450
> 
> 标签：css, html

在将其发布在这里之前，我已经做了很多研究。所以，在这里我有一些不完美之处。[我的链接](http://eminli.net/test)

**问题：**在应该是联系信息选项卡的最后一个选项卡中，如何使这两个表彼此靠近？之后我将采取边界。但是我如何让它们靠近并居中呢？

我把它们放在桌子下，没有用。然后尝试使用除法，仍然无法正常工作。我应该在css文件中有什么机会？

暂时就是这样。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:18:18.327

对于问题 2，我想说的是在 css 中替换`float:right`为`sag`div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:36:39.513

```
 .contact-info {
        width:98%; 
        margin:1%;
    }
#sol {
    float:left;
    text-align:left; 
    margin-left:290px; 
    margin-right:auto; 
    width:200px;
    }
#sag {
    float:left;
    text-align:left; 
    margin-left:auto; 
    margin-right:auto; 
    width:200px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T07:10:16.780

对于您的第二个问题，我想告诉您，`css`替换`float:right`为`sag div`并将它们放置在页面的中心只需添加您的 css 只需添加
`#contact-info { width:250px; margin: 0 auto; }` 希望这会对您有所帮助！

# mysql - mysql：选择具有最大子值的记录？

> ID：13506240
> 
> 赞同：0
> 
> 时间：2012-11-22T05:11:10.343
> 
> 标签：mysql, database

嗨我有一个主要的表：

```
PRIMARY KEY(`x`,`y`,`Version`,`Revision`) 
```

在桌子上像：

```
`x`,`y,`version`,`revision`,`data` 
```

`x`, `y`,`version`并且`revision`都从零开始计数。

我试图弄清楚如何返回最高`revision`和它`data`的每一个`version`，给定一个特定的`x`和`y`。我可以制作哪些索引来加快速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:23:29.733

试试这个查询 -

```
SELECT t1.* FROM table t1
  JOIN (SELECT Version, MAX(Revision) Revision FROM table GROUP BY Version) t2
    ON t1.Version = t2.Version AND t1.Revision = t2.Revision 
```

...为了加快查询速度，您可以在 Version 和 Revision 字段上添加索引。无论如何-您应该使用`EXPAIN SELECT...`语句对其进行分析。

# html - 图片属性优先出现

> ID：13506241
> 
> 赞同：0
> 
> 时间：2012-11-22T05:11:15.150
> 
> 标签：html, image

```
<img src="#" alt="abc"/> 
```

在浏览器中呈现上述代码后，alt和src的位置发生了变化

```
<img alt="abc" src="#"/> 
```

有什么办法可以解决这些问题

“我希望每次src出现在其他属性之前！”

# javascript - 自动完成组合框

> ID：13506247
> 
> 赞同：1
> 
> 时间：2012-11-22T05:11:52.620
> 
> 标签：javascript, jquery, jquery-ui, xmlhttprequest, jquery-events

****autoComplete 组合框中的错误我认为它可能会在 xmlHttprequest 完成后被调用请在代码行附近为我提供一个解决方案`$("#isUsedCombo").combobox`** ***您会发现“isUsedCombo”str 变量*****

```
function editGov(govID){

    var xmlHttp;
    if (window.XMLHttpRequest) {
        xmlHttp = new XMLHttpRequest();
    }
    xmlHttp.onreadystatechange = function() {
        if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
           var x1=xmlHttp.responseText.split(",");
           isUsed=x1[5]; // isUsed comboxBox Value
           var str="<table> <tr>  <td>English Name</td> <td><input type=text id=txtEnName"+x1[0]+" value=\""+x1[1]+"\"> </td> <td></td></tr>     <tr>  <td>Arabic Name</td> <td><input type=text id=txtArName"+x1[0]+" value=\""+x1[2]+"\"> </td> <td></td></tr>        <tr>  <td>EnShort Name</td> <td> <input type=text id=txtEnNameSt"+x1[0]+" value=\""+x1[3]+"\"> </td> <td></td></tr>      <tr>  <td>ArShort Name</td> <td> <input type=text id=txtArNameSt"+x1[0]+" value=\""+x1[4]+"\"> </td> <td></td></tr>      <tr>  <td>Is Used</td> <td>  <select> id=isUsedCombo> <option value=1> Once</option>  <option value=2> Multiple </option>  </select>  </td> <td> </td></tr>     <tr>  <td></td> <td> <button class=bttnGov onclick=updateGov("+x1[0]+")> Update</button> </td> <td> <button class=bttnGov onclick=updateGov('close')> Close</button> </td> </tr> </table>";      
           DiaLgFrm(str);

            $("#isUsedCombo").combobox({
             selected: function(event, ui) { 
                isUsed= ui.item.value;
              }
            }); 
        }
    }
    var URL = "Empty\\emptyGovt2.aspx?govID="+govID;
    xmlHttp.open("GET", URL, true);
    xmlHttp.send(); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:28:51.027

你的字符串有问题

改变这个

```
 <select> id=isUsedCombo> 
```

至

```
 <select id=isUsedCombo> 
```

在`var str=`

# django - 如何使用 mongoengine 进行分页？

> ID：13506248
> 
> 赞同：10
> 
> 时间：2012-11-22T05:11:52.383
> 
> 标签：django, mongodb, pagination, mongoengine

我有一个关于使用 mongodb 和 mongoengine 的分页的问题。我有一张表，将来会有数百万条记录。我正在做这样的寻呼。

好吧，我不确定这是正确的方法

```
 list = Books.objects.all()
    paginator = DiggPaginator(list, 20, body = 10, tail = 2) 
```

在这里，我打开整个表格，然后进行分页，然后我们再次进入下一页，上面的代码运行并带来第二页或任何页面。

这是正确的方法还是有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-22T07:48:28.833

可以使用`skip`and `limit`from [QuerySet](https://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.queryset.QuerySet)来实现分页。
例如，如果您想显示第二页，每页限制为 10 个项目，您可以这样做：

```
page_nb = 2 
items_per_page = 10 

offset = (page_nb - 1) * items_per_page

list = Books.objects.skip( offset ).limit( items_per_page ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:23:03.600

[flask-mongoengine](https://github.com/MongoEngine/flask-mongoengine)插件有一个[分页器](https://github.com/MongoEngine/flask-mongoengine/blob/master/flask_mongoengine/__init__.py#L102)示例，您可以适应 digg 分页器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-16T00:38:38.900

您也可以使用更体面和可读的数组切片语法：

```
begin = (page - 1) * page_size # offset
end = offset + page_size
list = Books.objects[begin:end]() 
```

# c# - 哪些类型的 Windows 8 STORE 应用需要辅助功能测试？

> ID：13506249
> 
> 赞同：0
> 
> 时间：2012-11-22T05:11:54.527
> 
> 标签：c#, windows-8, winrt-xaml, appstore-approval

我们正在用 C# 开发一个 Windows 8 STORE 应用程序，它是一种网络扫描工具。
在提交应用程序之前，我们的应用程序是否需要任何辅助功能测试？

清楚地告诉我，哪种类型的应用程序需要辅助功能测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:02:13.697

在将您的应用程序提交到 Windows 应用商店的过程中，您可以选中一个复选框，您可以选中该复选框是否要将您的应用程序声明为符合可访问性指南。这是可选的。有关何时以及如何执行此操作的更多信息， 请参阅[将您的应用声明为可访问。](http://msdn.microsoft.com/en-us/library/windows/apps/hh694072.aspx)

# c# - 仅从迷失方向的 excel 文件 oledb 中读取一列

> ID：13506251
> 
> 赞同：1
> 
> 时间：2012-11-22T05:12:09.787
> 
> 标签：c#

我已经能够通过oledb读取一个普通的excel文件，但是我的项目的任务文件包含各种格式问题，比如多列合并，公式下有很多单元格等，结果数据集无法存储excel文件的数据。如果我设法读取工作表的内容-“输入选项卡”，单元格编号 AF6-AF-24，我的工作就完成了，但是在我处理列之前，excel 文件根本没有在 excel 中解析。请帮忙！

```
 OleDbConnection connExcel = new OleDbConnection("Provider= Microsoft.ACE.OLEDB.12.0;Data Source=P:\\DummyTesterF.xlsx; Extended Properties=\"Excel 12.0;HDR=YES;\"");
             OleDbCommand cmdExcel = new OleDbCommand();
             OleDbDataAdapter Adapter = new OleDbDataAdapter();
             cmdExcel.CommandText = String.Format("SELECT * From ['Input Tab$']");           

             cmdExcel.Connection = connExcel;
             Adapter.SelectCommand = cmdExcel;
             DataTable Table = new DataTable();
             Adapter.Fill(Table); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:22:03.657

最好改用 Office 互操作。

# asp.net - 列表 除了（另一个列表 ) 不返回正确的结果

> ID：13506252
> 
> 赞同：0
> 
> 时间：2012-11-22T05:12:13.547
> 
> 标签：asp.net, linq, list, ienumerable, except

这是我的数据：

旧答案：2 新答案：2 3 4

```
int Diffcount =  OldCountryAnswers.Except(NewCountryAnswers).Count(); 
```

差异计数为 0。

这是“除外”的正确行为吗？

我需要两个之间的差异计数`List<int>`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T05:15:28.620

```
int Diffcount =  NewCountryAnswers.Except(OldCountryAnswers).Count(); 
```

可能是您正在寻找的东西，这应该给您 2 的计数。

# java - java,从方法返回空值

> ID：13506256
> 
> 赞同：-2
> 
> 时间：2012-11-22T05:12:20.453
> 
> 标签：java

我需要为输入运算符名称返回 finalString 值。其中，internalPrestring 是针对特定运营商固定的，internalDigit 将从获取运营商名称中检索。然后所有这些都将添加到 finalString。但它给出了null，我无法理解这个问题

```
 import java.io.*;
 import java.lang.*;

 class CallManager
 {

   public static final String postString = "#";

   StringBuilder stringBuilder;

   String internalPreString;
   String preString;
   String middleString;
   String finalString;
   String operatorName;

   int internalDigit;

   //needs to set oprator name
   public void setOperatorName( String getMeFromPreferences)
   {

    operatorName = getMeFromPreferences;
        System.out.println("I got it " + operatorName);
   }

//afeter having operator name need to set inrernal digit for each operator
public void setOperatorBasedInternalDigit(int getIntegerForOperator)
    {
        internalDigit = getIntegerForOperator;
        System.out.println("I got it too " + internalDigit);
    }

//it needs to get string from ocr  
public void setString( String getMeFromOCR )
    {
        middleString = getMeFromOCR;
    }

//preString creator for differnet operator
public String getOperatorBasedPreString(String operatorName)
{
        if(operatorName.equals("Airtel"))
        internalPreString = "787";

        else if(operatorName.equals("Banglalink"))
        internalPreString = "123";

        else if(operatorName.equals("Grameen"))
        internalPreString = "555";

        else if(operatorName.equals("Robi"))
        internalPreString = "111";

        else if(operatorName.equals("TeleTalk"))
        internalPreString = "151";

        stringBuilder.append("*").append(internalPreString).append("*");
        preString = stringBuilder.toString();

        return preString;

}

//get operator name and retrive midlle string's digit size from it
public int getOperatorBasedInternalDigit( String operatorName)
{

        if(operatorName.matches("^Airtel | Grameen | Robi$"))
        internalDigit = 16; 

        else if(operatorName.matches("^Banglalink$"))
        internalDigit = 14;

        else if(operatorName.matches("^TeleTalk$"))
        internalDigit = 13;

        return internalDigit;
}

//check operator-based digit number with input middle string as a number then retrive final string
public String getString( String toBeInserted, int inetrnalDigit)
    {

        if(toBeInserted.length() == internalDigit)
        {

            int counter = 0;
            char [] insertHere  = new char[internalDigit];

            for(int verifier = 0; verifier < internalDigit; verifier ++)
            {
                insertHere[verifier] = toBeInserted.charAt(verifier);
                    if(!Character.isDigit(insertHere[verifier]))
                    break;

            counter ++;
            }

            if(counter == internalDigit)
            {

                    stringBuilder.append(preString).append(toBeInserted).append(postString);
                    finalString = stringBuilder.toString();
                    //to see what i've got finally as input for using this call manager method.it would be removed too
                    System.out.println(finalString);
                    return finalString;
            }

            else
            {
                //this printing could be used in main program
                System.out.println("number is less or more than desired ..... INVALID SCAN");
                System.out.println(middleString);
                //here i will call the method for scan the card again
                //
                //
                   return middleString;
             }
          }

          else
              {
                //this printing could be used in main program
                System.out.println("number is less or more than desired ..... INVALID SCAN");
                System.out.println(middleString);
                //here i will call the method for scan the card again
                //
                //
                return middleString;
              }

    }

}

//tester class that CallManager works rightly or not
class CallManagerDemo
{
    public static void main(String args[]) throws IOException
    {
            BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));

          System.out.println("Enter name of Operator");
          CallManager clm = new CallManager();

          clm.setOperatorName("Banglalink");
          System.out.println(clm.internalPreString);
          System.out.println(clm.preString);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:22:59.600

您只有四行处理您的`CallManager`课程：

```
CallManager clm = new CallManager();
clm.setOperatorName("Banglalink");
System.out.println(clm.internalPreString);
System.out.println(clm.preString); 
```

你得到 null 的原因：

1.  您正在使用默认构造函数，并且在其中完成了处理。所以这不是问题
2.  现在在下一行调用`setOperator`具有以下代码的方法：

    ```
    public void setOperatorName( String getMeFromPreferences)  
    {  
       operatorName = getMeFromPreferences;  
       System.out.println("I got it " + operatorName);  
    } 
    ```

    现在在这里你只设置 thw 变量`operatorName`，没有别的。因此，所有其他变量都为空，因为您没有进行任何处理或将它们初始化为某些东西的东西。

3.  因此，当您打印`clm.internalPreString`并`clm.preString`获得 null 时，因为它们未初始化。但是尝试打印`clm.operatorName`，它将打印您传递并在您的方法中初始化的操作员名称`setOperatorName`。

因此，当您在类中定义了这么多方法时，请使用它们以便根据您的逻辑设置所有变量

**更新**

```
public void setOperatorName( String getMeFromPreferences)  
{  
     operatorName = getMeFromPreferences;  

     //call any methods for example and use the values returned from the method by storing it inside a variable 
     String mystring = getOperatorBasedPreString(String operatorName) 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:23:11.940

你不认为你应该调用任何函数而不是使用对象的字符串变量。

你只是调用一个函数

```
public void setOperatorName(String getMeFromPreferences) {

        operatorName = getMeFromPreferences;
        System.out.println("I got it " + operatorName);
    } 
```

您正在调用没有任何变量设置的默认构造函数，您没有初始化任何正在调用表单对象的字符串。

我认为您应该调用任何函数，例如

```
public int getOperatorBasedInternalDigit(String operatorName) 
```

或者

```
public String getString(String toBeInserted, int inetrnalDigit) 
```

然后你会得到一些你所期望的字符串......希望这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T05:24:35.853

您从未为获得 NULL 值的变量设置值。术语 get/set 必须在直接访问属性的情况下使用。请阅读[Java Programming Style GuideLines](http://geosoft.no/development/javastyle.html)以获得更清晰的信息。使用适当的 getter 和 setter 来获取和像您为 operatorName 所做的那样设置值。

# arrays - 检查数组是否为空的最快方法

> ID：13506257
> 
> 赞同：5
> 
> 时间：2012-11-22T05:12:43.357
> 
> 标签：arrays, vb.net, performance, optimization

我想知道在 VB.NET 中检查数组是否为空的最快方法。数组已经初始化，所以我不能使用任何查看它的检查。这是下面的当前代码：

```
If Not (cubes(threadnumber)(i).objects.GetLength(0) = 0) Then
   cubes(threadnumber)(i).objects = New Double() {}
   ReDim cubes(threadnumber)(i).objects(-1)
End If 
```

我已经做了一些测试，我知道使用`.GetUpperBound`速度会快一点，但我不确定这是否可行，因为我认为`.GetUpperBound`如果数组长度为 1，则返回 0。

任何/所有加快速度的方法（即使是一小部分）都将非常有帮助。这个程序需要很长时间才能完成，上面代码的第一行占了很大一部分时间，它被称为 1.36 亿次。

此外，如果有人知道如何加速 For...Next 循环，那也很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:01:43.403

`Length`比`GetLength`我的系统快大约 2 倍（调用`Length`136M 次需要 0.650 秒，而调用`GetLength (0)`需要 1.480 秒）。

我也不明白你为什么要重新调整你的阵列，你已经创建了一个新阵列。

如果多维数据集是多维数组，我相信这将是最快的代码：

```
If cubes(threadnumber)(i).objects.Length > 0 Then
    cubes(threadnumber)(i).objects = New Double() {}
End If 
```

如果多维数据集不是多维数组（例如 List），则应将`cubes(threadnumber)`代码移出循环。

**更新**

`Length`比在没有调试器的情况下以发布模式运行时快 6 倍，在这种情况下，**我**的系统需要 0.181 秒和1.175 秒。这很可能是因为 JIT 会内联对 的调用，而不是对 的调用。`GetLength``Length``GetLength``Length``GetLength`

[这](https://gist.github.com/4130104)是我使用的测试代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T05:29:12.420

```
if myarray is nothing then... 
```

或者

```
if myarray isnot nothing then... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T06:12:57.553

GetLength 是我所知道的查看数组中是否包含元素的最快方法。我认为您不会加快这段代码的速度。

但是，调用这 1.36 亿次的代码可能会被优化。

查看您的代码：

```
If Not (cubes(threadnumber)(i).objects.GetLength(0) = 0) Then
   cubes(threadnumber)(i).objects = New Double() {}
   ReDim cubes(threadnumber)(i).objects(-1)
End If 
```

我猜你测试它是否有元素的原因是你可以重新调整数组以释放内存。释放内存的更好方法可能是清除立方体对象并允许数组超出范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T02:46:01.693

经过一些深入的测试和分析，我发现似乎是最快的方法（至少到目前为止）。做出这个小小的改变使我的程序加快了 500-600%。

当有一个项目添加到对象数组时，如果第二维的索引不在列表中，我还将立方体的第二维的索引添加到列表中。不过，任何其他建议都会受到欢迎。

# jquery - jQuery Mobile 的颜色选择器

> ID：13506262
> 
> 赞同：1
> 
> 时间：2012-11-22T05:13:06.417
> 
> 标签：jquery, jquery-mobile, color-picker

jQuery 有很多颜色选择器，但是当我尝试在普通的 jQuery Mobile 中实现它们时，它们不能按预期工作。它们确实与 jQuery Mobile 框架发生冲突并按需要进行渲染。

是否有任何其他与 jQuery Mobile 兼容的 jQuery 颜色选择器？

请给我建议。

提前感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T05:14:22.873

你见过这个吗，也许这可以帮助你

[https://github.com/Gautier/jquery-colorpicker-mobile](https://github.com/Gautier/jquery-colorpicker-mobile)

[http://bgrins.github.com/spectrum/](http://bgrins.github.com/spectrum/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-13T17:58:27.963

试一试`<input type="color">`。它可能适合你所追求的。

如果您正在寻找跨浏览器/平台的一致的东西，[这个](https://mobiscroll.com/color-picker)基于预设的移动选择器可能会有所帮助。具有亮度细化选项的单选和多选。查看[示例](https://demo.mobiscroll.com/color)。

# powershell - .net 项目中的 Azure power shell cmdlet dll

> ID：13506263
> 
> 赞同：0
> 
> 时间：2012-11-22T05:13:13.397
> 
> 标签：powershell, azure, cmdlet

在这里，我有一个关于如何在.net 项目中使用 Azure power shell cmdlet dll 的问题。我在 msdn 中查看了这个线程：使用 powershell cmdlet 我们可以使用这个命令。Remove-AzureVM -ServiceName -Name 这将涉及到 Microsoft.WindowsAzure.Management.ServiceManagement.dll 下的 dll 路径是：C:\Program Files (x86)\Microsoft SDKs\Windows Azure\PowerShell\Azure 我用反射器打开这个dll。而且我可以得到 RemoveAzureVMCommand 类，但是如何使用这个类来实现与 powershell cmdlet 相同的功能呢？有人可以给我分享一些光吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:44:40.207

Azure PowerShell Cmdlet 本质上是围绕 Windows Azure 服务管理 API 的包装器。您可以做的是编写自己的 C# 代码来调用“删除角色”（[http://msdn.microsoft.com/en-us/library/windowsazure/jj157184.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj157184.aspx)）函数，该函数将删除 VM。

希望这可以帮助。

# drupal - Drupal 7：帮助配置views3根据节点关系获取相关内容

> ID：13506265
> 
> 赞同：2
> 
> 时间：2012-11-22T05:13:21.923
> 
> 标签：drupal, views

我的应用程序中有两种内容类型：- 学生教师

师生有亲子关系。Student 内部有一个指向 Teacher 的节点引用字段，这意味着在创建学生时，用户需要在保存内容类型之前提供一个或多个教师。所以一个学生在这里与多个老师有关。

假设 X 是学生。Y 和 Z 是 X 的老师。现在，当我打开学生（X）页面时，我想查看一个块中属于（Y 或 Z）或两者的所有相关学生。

可以使用 Views UI 吗？请让我知道您对此的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:40:08.140

问题已经解决了。Views UI 在关系的帮助下发挥了神奇的作用。在这种情况下，将涉及两个关系。一个从学生到老师，以及其他与老师到学生的关系，涉及以前的关系。我一直在盲目地搜索，除非我在 Internet 上找到关于在 Views 中打开 SQL 查询的文章，这有助于我更有逻辑地工作。这个链接帮助了我： -

[https://drupal.stackexchange.com/questions/11997/use-of-relationships-joins-in-views](https://drupal.stackexchange.com/questions/11997/use-of-relationships-joins-in-views)

谢谢大家。

# c - c预处理器字符串连接

> ID：13506266
> 
> 赞同：4
> 
> 时间：2012-11-22T05:13:26.627
> 
> 标签：c, c-preprocessor

如何组合预定义的 C 值来生成字符串。

```
#define APP_NUMBER 22
#define ICON_FILE  "../icons/"##APP_NUMBER##".ico" 
```

这样在我的 .rc 文件中，我可以执行以下操作

```
 1000 ICON  ICON_FILE 
```

而不是 1000 图标“../icons/22.ico”

> > 它没有用

```
 #define MY_ICON_FILE 25
  #define STR(x) #x
  #define ICON_FILE_NUM(x) "../icons/" STR(x) ".ico"
  1000 ICON  ICON_FILE_NUM(MY_ICON_FILE) 
```

编译器错误

```
 can't open icon file `../icons/': Permission denied

  nothing was appended to "../icons/" 
```

我刚刚得到的最接近的是这样做：

```
 #define MY_ICON_FILE 25
  #define STR(x) #x
  #define ICON_FILE_NUM(x) "../icons/"STR(x)".ico" /// took out spaces
  1000 ICON  ICON_FILE_NUM(MY_ICON_FILE) 
```

（取出 STR(x) 周围的空格）

并得到了这个编译器错误

```
 can't open icon file `../icons/"25".ico': Invalid argument 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T06:09:23.947

这有效：

```
#define APP_NUMBER 22
#define STR(x) #x
#define ICON_FILE_NAME(num)  "../icons/" STR(num) ".ico"
#define ICON_FILE ICON_FILE_NAME(APP_NUMBER)

#include <stdio.h>
int main(void) {
    printf("ICON_FILE = \"%s\"\n", ICON_FILE);
    return 0;
} 
```

输出是：

```
ICON_FILE = "../icons/22.ico" 
```

但是`ICON_FILE`宏扩展为`"../icons/" "22" ".ico"`，这是 C 的有效语法（相邻的字符串文字被连接），但可能不适用于`.rc`文件，这解释了您收到的“无法打开图标文件”消息。

看起来您正在尝试使用标记粘贴来生成字符串文字。问题在于包含不匹配字符的*部分*`"`字符串文字不能是有效的预处理标记。例如，您不能将单个`"`参数作为参数传递给宏。

`#define`考虑编写一个为您生成适当指令的程序（脚本，等等） 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-30T22:22:02.293

Windows 资源文件不理解大多数元素的 C 风格文字字符串连接 - 字符串表可能是唯一的例外。

使用预处理器宏时的技巧是不使用字符串作为输入起点，预处理器不知道如何删除引号。

仅连接一次也很有帮助 - 考虑添加搜索路径`"-I../icons/"`而不是向资源名称添加路径。

从 boost 中提取以下内容，例如使用 windows msvc 使用的间接级别比我在大多数地方看到的要高。

```
#    define BOOST_PP_CAT(a, b) BOOST_PP_CAT_OO((a, b))
#    define BOOST_PP_CAT_OO(par) BOOST_PP_CAT_I ## par
#    define BOOST_PP_CAT_I(a, b) a ## b

#    define BOOST_PP_STRINGIZE(text) BOOST_PP_STRINGIZE_A((text))
#    define BOOST_PP_STRINGIZE_A(arg) BOOST_PP_STRINGIZE_I arg
#    define BOOST_PP_STRINGIZE_I(text) #text 
```

在示例中，您似乎可以执行 `BOOST_PP_CAT(../icons/, BOOST_PP_CAT(num,.ico))`

传递给仅应用外部 CAT 的字符串化存在问题（至少在 Windows 上）。所以 `BOOST_PP_STRINGIZE(BOOST_PP_CAT(../icons/, BOOST_PP_CAT(num,.ico)))`行不通。

3 项连接的加法

```
#    define BOOST_PP_CAT2(a, b, c) BOOST_PP_CAT_OO2((a, b, c))
#    define BOOST_PP_CAT_OO2(par) BOOST_PP_CAT_I2 ## par
#    define BOOST_PP_CAT_I2(a, b, c) a ## b ## c 
```

在我的测试 VS2013 中，输入

*   `..`正在转换为`"..."`使用相对路径`difficult`
*   `\`需要转义`\\`才能在宏 args 中工作，但正在转换为`"\\"`- 使用`/`for path 效果更好

使用字符串表比使用图标更容易查看输出

```
STRINGTABLE
BEGIN
  123  BOOST_PP_STRINGIZE(BOOST_PP_CAT(APP_NUMBER, .ico))
  124  BOOST_PP_STRINGIZE(BOOST_PP_CAT2(../icons/, APP_NUMBER,.ico)))
END 
```

我还没有解决 .. 被转换为 ... 我使用附加搜索路径进行了以下工作，

```
1000        ICON        BOOST_PP_STRINGIZE(BOOST_PP_CAT(APP_NUMBER, .ico))
1001        ICON        BOOST_PP_STRINGIZE(BOOST_PP_CAT2(icons/, APP_NUMBER, .ico)) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T21:51:51.807

我认为您无法使用 C 预处理器来做到这一点。但是，您可以使用 m4 预处理器来完成。

```
linux_prompt> cat icon.m4
define(APP_NUMBER, 22)

1000 ICON "../icons/APP_NUMBER.ico"

linux_prompt> m4 icon.m4

1000 ICON "../icons/22.icon" 
```

您必须确保文件的其余部分正确展开。执行“man m4”以获取更多信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T15:05:16.763

老实说，我会避免使用预处理器执行此操作。调试预处理器错误是一件痛苦的事，我见过使用多层预处理器替换和连接的情况，在尝试查找问题时导致灾难。只是我的2美分。

# c - 使用 execl 运行 Linux 命令

> ID：13506267
> 
> 赞同：3
> 
> 时间：2012-11-22T05:13:26.353
> 
> 标签：c, linux, unix, exec

我需要通过编写C语言程序列出当前目录中所有具有644权限的文件。我不能使用`system()`并且必须使用`execl()`才能使用系统调用。

这是我在代码中使用的一行：

```
execl("/usr/bin/find", "find . -maxdepth 1 -perm 644", (char *)NULL); 
```

问题是代码正在搜索整个磁盘而不是当前目录。你能帮我修一下吗？

* * *

```
 ...

        case 4:
            int status;
            switch (fork()){
                case -1: quit ("fork",1);
                case 0:
                execl("/usr/bin/find","find","." ,"-maxdepth" ,"1","-perm", "644",(char *)NULL) ;
                exit (200);
                default:
                wait(&status);
                exit(0);
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:44:22.040

分离论点：

```
execl("/usr/bin/find", "find", ".", "-maxdepth", "1", "-perm", "644", (char *)NULL); 
```

您的调用相当于调用`find`不带参数的程序（而且非常有趣`argv[0]`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T05:48:40.640

```
execl("/usr/bin/find","/usr/bin/find",  ".", "-maxdepth", "1", "-perm", "0644",(char *)NULL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T06:53:29.447

对于您的特定任务，使用[文件树遍历](http://linux.die.net/man/3/ftw)( `ftw`) 更合适。

ftw 只是一个库，因此您无需生成外部进程即可完成工作。此外，解析结果要容易得多。

# jquery - 使用 jQuery 在灯箱中动态更改图像

> ID：13506269
> 
> 赞同：0
> 
> 时间：2012-11-22T05:13:31.627
> 
> 标签：jquery

我有四个链接都像这样

```
<a href="" class="learn-more">Learn More</a>
<a href="" class="learn-more">Learn More</a>
<a href="" class="learn-more">Learn More</a>
<a href="" class="learn-more">Learn More</a> 
```

单击此链接中的每个链接时，将加载一个灯箱。除了灯箱中内容的标题外，所有四个链接都将加载相同的灯箱。所有四个灯箱都有不同的标题，但内容相同。此外，所有灯箱都将具有相同的产品图像，但第三个链接将具有不同的图像。我需要在 jQuery 中实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:51:16.250

html:

```
 <a href="" class="learn-more" rel="0">Learn More</a>
    <a href="" class="learn-more" rel="1" >Learn More</a>
    <a href="" class="learn-more" rel="2" >Learn More</a>
    <a href="" class="learn-more" rel="3" >Learn More</a>
    <div class="LightBox">
    <div class="LightBox_h"><img src="image/img0.jpg">your text</div>
    <div calss="LightBox_b">your text</div>
    <div calss="LightBox_f">your text</div>
    </div><!--End LightBox--> 
```

风格：

```
LightBox{display:none} 
```

询问：

```
$('a').click(function(){
  $('.LightBox').css({'display':'block'}); 
  var i_see =  parseInt($(this).attr('rel'));        //  you can use  case 
  if ( i_see == 0){$('.LightBox_h').html('new next')}
     else if (i_see ==1){$('.LightBox_h').html('new next')}
        else if (i_see ==2){$('.LightBox_h').html('new next')}
            else if (i_see ==3){$('.LightBox_h').html('new next')}
}); 
```

有些像这样

或者

```
var arr = ["img0" , "img1","img2" , "img3" ]; //sourse to img

   $('a').click(function(){
      $('.LightBox').css({'display':'block'}); 
      var i_see =  parseInt($(this).attr('rel'));       
      $('.LightBox_h img ').attr('src':'+ arr[i_see] +'); 

    }); 
```

# sitecore - Sitecore 计划任务未运行

> ID：13506278
> 
> 赞同：1
> 
> 时间：2012-11-22T05:15:03.273
> 
> 标签：sitecore

我将我的计划项目计划设置为：20090326T112200|20990426T112200|127|00:20:00

它应该每 20 分钟运行一次。但在我部署它们之后，这个时间表似乎从未运行过。

web.config 中的调度如下所示：

```
<scheduling>
    <!-- Time between checking for scheduled tasks waiting to execute -->
    <frequency>00:05:00</frequency>
    <!-- Agent to process schedules embedded as items in a database -->
    <agent type="Sitecore.Tasks.DatabaseAgent" method="Run" interval="00:10:00">
        <param desc="database">core</param>
        <param desc="schedule root">/sitecore/system/tasks/schedules</param>
        <LogActivity>true</LogActivity>
    </agent>
    <!-- Agent to process schedules embedded as items in a database -->
    <agent type="Sitecore.Tasks.DatabaseAgent" method="Run" interval="00:10:00">
        <param desc="database">master</param>
        <param desc="schedule root">/sitecore/system/tasks/schedules</param>
        <LogActivity>true</LogActivity>
    </agent> 
```

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-07-25T16:17:46.550

当我试图弄清楚为什么计划任务没有触发时，我遇到了这篇文章，并认为我会针对我所拥有的特定场景发布解决方案。

我发现的问题是我安装了 Sitecore SIM InitializeSpeedBooster.cofig，它删除了以下阻止计划任务运行的内容。

```
 <processor type="Sitecore.Pipelines.Loader.InitializeScheduler, Sitecore.Kernel">
      <patch:delete />
    </processor> 
```

从配置中删除该 patch:delete，您仍然可以更快地初始化 Sitecore，但会运行计划任务。

可以在我的博客文章中找到关于[Sitecore 计划任务不工作](https://adamsimsy.com/2016/07/26/sitecore-scheduled-tasks-not-running/)的更详细的解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T21:49:28.200

由于其体系结构，调度是 ASP.NET 应用程序中的一个一贯问题。在我看来，Sitecore 已尝试解决此问题，但效果一般。Barbosa 描述了一个明确的问题，但 Sitecore 有一个您可以使用的内置 keepalive 系统。在我的 web.config（6.3 版）中，它是在您发布的数据库调度代理之后直接配置的。

我们没有评估问题所需的所有信息。但是，从您的评论来看，您的 Last Run 字段似乎是空的？这是个问题。它*必须*具有调度工作的值。仅当“现在”和上次运行值之间的时间间隔大于“计划”字段中的时间值时，计划项目才会启动。

以下是我的 Sitecore 网站上运行正常的示例（RAW 值）：

```
Schedule: 20000101|21000101|127|23:59:00
Last run: 20121126T074001 
```

所以...下一个问题是：您是否在日志中看到调度代理的输出？首先确保您正在记录 INFO 级别。您应该看到如下内容：

```
1924 10:40:22 INFO  Scheduler - Adding agent: Sitecore.Tasks.DatabaseAgent (interval: 00:10:00) 
```

如果您没有看到，那么 Sitecore 没有启动调度程序，您应该打开一个 Sitecore 支持请求。如果您确实看到了这一点，那么问题很可能是您的 Sitecore 计划或命令项。您*应该*看到调度代理的输出，它正在启动/停止您的特定命令。如果您的计划项目失败，这将发生错误输出。这将我们带到下一步......

您的计划项目有一个命令字段，该字段必须链接到系统/任务/命令下的有效项目。该项目的类型和方法字段实际上指定了正在执行的方法。如果这些设置正确，我将采取的下一步是创建一个带有单个按钮的一次性 ASPX 页面......它执行此方法。如果*这*不起作用......好吧，那么你知道问题出在哪里。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T23:16:41.007

Sitecore 将仅在应用程序池未关闭时运行计划任务。换句话说，如果您的应用程序没有收到足够的流量，IIS 可能会循环关闭应用程序池以节省资源。为防止这种情况发生，您可以设置一个保持活动状态的服务，该服务在设定的时间间隔内向您的应用程序发出请求，以确保应用程序池永远不会关闭。

# wpf - 基于 XAML 绑定到区域性名称属性，使用不同区域性在 WPF GridView 中本地化货币值

> ID：13506279
> 
> 赞同：1
> 
> 时间：2012-11-22T05:15:05.280
> 
> 标签：wpf, gridview, binding, culture

第一次在这里发布海报，但已经阅读了很长时间，最后遇到了一个我无法回答的问题。

我有一个 ListView 托管具有多列的 GridView。一个显示价格，另一个显示货币代码（CAD、USD、GBP 等）。这一切都是使用实体框架从 SQL 服务器中提取出来的，因此 GridView 数据绑定到存储我的查询结果的 IEnumerable。货币代码存储在带有本地化字符串 (en-US, en-GB) 的单独表中，该字符串（在此应用程序的 WinForms 版本中）以前在 String.Format() 中用于本地化货币以显示适当的货币格式和符号。

我遇到的问题是在 XAML 中将 Price 绑定的 ConverterCulture 绑定到 Currency.LocalizedCultureName 以使其正确格式化。这是我当前的 XAML：

```
 <ListView Grid.Column="0" Name="pricingListingListView" ItemsSource="{Binding Source={StaticResource pricesByYear}}">
            <ListView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="{x:Type GroupItem}">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type GroupItem}">
                                        <GroupBox Header="{Binding Name}" Margin="0,0,0,10">
                                            <ItemsPresenter/>
                                        </GroupBox>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
            </ListView.GroupStyle>
            <ListView.View>
                <GridView>
                    <GridViewColumn HeaderContainerStyle="{StaticResource leftAlignedColumnHeader}" Header="Date" DisplayMemberBinding="{Binding Source.Date}" Width="60" />
                    <GridViewColumn HeaderContainerStyle="{StaticResource leftAlignedColumnHeader}" Header="Price" DisplayMemberBinding="{Binding Price, StringFormat='{}{0:C}', ConverterCulture={Binding Currency.LocalizedCultureName}}" Width="60" />
                    <GridViewColumn HeaderContainerStyle="{StaticResource leftAlignedColumnHeader}" Header="Currency" DisplayMemberBinding="{Binding Currency.Code}" Width="60" />
                    <GridViewColumn HeaderContainerStyle="{StaticResource leftAlignedColumnHeader}" Header="Unit" DisplayMemberBinding="{Binding Unit.Name}" Width="60" />
                    <GridViewColumn HeaderContainerStyle="{StaticResource leftAlignedColumnHeader}" Header="Source" DisplayMemberBinding="{Binding Source.Name}" Width="125" />
                    <GridViewColumn HeaderContainerStyle="{StaticResource leftAlignedColumnHeader}" Header="Project" DisplayMemberBinding="{Binding Project.Description}" Width="125" />
                    <GridViewColumn HeaderContainerStyle="{StaticResource leftAlignedColumnHeader}" Header="Plant Type" DisplayMemberBinding="{Binding Project.Plant.Name}" Width="100" />
                </GridView>
            </ListView.View>
        </ListView> 
```

PriceByYear 只是一个 CollectionViewSource，它将 IEnumerable 从我后面的代码中的 DP 中拉出来。数据被正确提取，只是没有格式化。

这编译得很好，但是当我加载包含它的窗口时会生成 XamlParseException：*不能在“Binding”类型的“ConverterCulture”属性上设置“Binding”。只能在 DependencyObject 的 DependencyProperty 上设置“绑定”。*

产生错误的行是：*<GridViewColumn HeaderContainerStyle="{StaticResource leftAlignedColumnHeader}" Header="Price" DisplayMemberBinding="{Binding Price, StringFormat='{}{0:C}', ConverterCulture={Binding Currency.LocalizedCultureName}} " 宽度="60" />*

简短的目标是显示价格，但根据存储为字符串值的文化名称对其进行格式化。网格视图中的每一行都可能不同。看来我无法在绑定中绑定，有没有其他方法可以解决这个问题？

## 回答

多重绑定成功了，这是有效的 XAML：

```
<local:LocalizeCurrencyMultiConverter x:Key="localizeCurrencyMultiConverter"/> 
```

...

```
<GridViewColumn HeaderContainerStyle="{StaticResource leftAlignedColumnHeader}" Header="Price"  Width="60">
                        <!--DisplayMemberBinding="{Binding Price, StringFormat='{}{0:C}', ConverterCulture={Binding Currency.LocalizedCultureName}}"-->
                        <GridViewColumn.DisplayMemberBinding>
                            <MultiBinding Converter="{StaticResource localizeCurrencyMultiConverter}">
                                <Binding Path="Price"/>
                                <Binding Path="Currency.LocalizedCultureName"/>
                            </MultiBinding>
                        </GridViewColumn.DisplayMemberBinding>
                    </GridViewColumn> 
```

和转换器类：

```
 public class LocalizeCurrencyMultiConverter :System.Windows.Data.IMultiValueConverter {
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
        string localizedCurrency;

        if (!values.Any() || values[0] == null)
            throw new ArgumentException("Convert requires a minimum a price to display, and optionally a culture.");

        double originalCurrency;
        if (!double.TryParse(values[0].ToString(), out originalCurrency))
            return values[0];
        string localization = (values[1] ?? "en-CA").ToString();

        try {
            localizedCurrency = string.Format(System.Globalization.CultureInfo.CreateSpecificCulture(localization), "{0:c}", originalCurrency);
        } catch {
            localizedCurrency = string.Format(System.Globalization.CultureInfo.CreateSpecificCulture("en-CA"), "{0:c}", originalCurrency);
        }
        return localizedCurrency;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture) {
        throw new NotImplementedException();
        return null;
    }
} 
```

奇迹般有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:09:41.953

1.  将 MultiBinding 与 Price 属性绑定和 Culture 属性绑定一起使用，
2.  编写一个 MultiValueConverter 并使用这些值来输出您想要的字符串。

我将为您简化：

[MSDN 多绑定](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)

[MSDN 多转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)

# .net - 如何使用实体框架实现跨 DBMS 插入忽略？

> ID：13506288
> 
> 赞同：5
> 
> 时间：2012-11-22T05:16:37.787
> 
> 标签：.net, entity-framework

根据我的数据主键（复合）的性质，唯一性违规是经常遇到的事情。在这种情况下，违规记录（新记录）将被静默丢弃（保持具有相同密钥的旧记录完好无损）并让其他记录插入。

例如，MySQL 让我们可以通过使用`INSERT IGNORE`而不是 bare轻松地做到这一点`INSERT`。但是我的应用程序必须是跨数据库的。

实现此行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:21:18.880

由于您已经用 标记了您的问题`entity-framework`，因此我建议您尝试生成尽可能多的模型，因为您有不同的数据库。然后使用 LINQ 执行`INSERT IGNORE`将变得轻而易举。

注意：LINQ-to-SQL 不支持批量插入，因此您可能希望对每个模型使用参数化 SQL。

# jquery-mobile - jquery mobile中的soundcloud

> ID：13506289
> 
> 赞同：0
> 
> 时间：2012-11-22T05:16:43.840
> 
> 标签：jquery-mobile, mobile, cloud, soundcloud

我希望在 jquery 移动页面中使用 soundcloud。我复制粘贴以下内容：

```
<iframe width="100%" height="166" scrolling="no" frameborder="no" src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F63422331&show_artwork=true"></iframe> 
```

来自[http://soundcloud.com/amar-dj/](http://soundcloud.com/amar-dj/)

它在 chrome 浏览器中运行良好，但是当我在移动设备上上传 jquery 页面时，曲目不播放。此外，我希望自定义 soundcloud 小部件以包括曲目、播放按钮以及艺术家和曲目名称。没有喜欢或分享按钮！为此，我写了以下内容：

```
<iframe width="100%" height="166" scrolling="no" frameborder="no" src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F63422331&amp;&show_artwork=false&show_comments=false&show_playcount=false&liking=false&sharing=false&buying=false;color=ff7700"></iframe> 
```

除了点赞按钮之外的所有按钮都消失了。如何隐藏喜欢按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:15:46.827

感谢您发现此问题，您现在应该可以通过提供`buying=false`参数来隐藏购买链接（问题已解决并已部署）。

至于like 按钮，请注意在您的示例中，您没有在 and 之间放置一个 & 符号( `&`) 。如果添加它，您将看不到按钮。`liking=false``color=ff7700``like`

# java - 在创建之前检查目录/文件是否存在？

> ID：13506290
> 
> 赞同：-1
> 
> 时间：2012-11-22T05:16:46.297
> 
> 标签：java, android, eclipse, mobile

目前这是我的代码：

```
 private void writeToSDFile(){

        File root = android.os.Environment.getExternalStorageDirectory(); 
        File dir = new File (root.getAbsolutePath() + "/download");
        dir.mkdirs();
        File file = new File(dir, "myData.txt");

        try {
            FileOutputStream f = new FileOutputStream(file);
            PrintWriter pw = new PrintWriter(f);
            pw.println(d8 + d7 + ":" + d6 + d5 + ":" + d4 + d3 + ":" + d2 + d1);
            pw.flush();
            pw.close();
            f.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
            Log.i(TAG, "******* File not found. Did you" +
                    " add a WRITE_EXTERNAL_STORAGE permission to the manifest?");
        } catch (IOException e) {
            e.printStackTrace();
        }   
    } 
```

基本上，我想知道是否有一种方法（可能通过使用 if 语句）仅在文件/目录不存在时才创建它们。目前，每次调用 writetoSDCard() 时都会重新创建它们。

我要做的就是继续将数据附加到文件的末尾。仅供参考，它会像这样存储：00:00:00:00

谢谢 ：）

另外，虽然我在这里，只是一个简单的问题，程序有没有办法说，从 txt 文档中读取 2 位数字的列表，然后将它们加在一起？例如 20 20 30 那么屏幕上的结果是 70？我还没有真正找到这样的东西：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:19:43.960

尝试这个

```
String FOLDERNAME="/download";
File dir = new File(Environment.getExternalStorageDirectory(), FOLDERNAME);
if(!dir.exists())
{
dir.mkdir();
} 
```

复制和过去

```
private void writeToSDFile(){

        String FOLDERNAME="/download";
        File dir = new File(Environment.getExternalStorageDirectory(), FOLDERNAME);
        if(!dir.exists())
        {
        dir.mkdir();
        }

    File file = new File(dir, "myData.txt");

    try {
        FileOutputStream f = new FileOutputStream(file);
        PrintWriter pw = new PrintWriter(f);
        pw.println(d8 + d7 + ":" + d6 + d5 + ":" + d4 + d3 + ":" + d2 + d1);
        pw.flush();
        pw.close();
        f.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        Log.i(TAG, "******* File not found. Did you" +
                " add a WRITE_EXTERNAL_STORAGE permission to the manifest?");
    } catch (IOException e) {
        e.printStackTrace();
    }   
} 
```

**///////////////////////////////////////// ///////////////// 编辑文件**

```
 File f;
  f=new File(dir, "myData.txt");
  if(!f.exists())
  {
  f.createNewFile();
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T05:19:59.817

```
String path=Environment.getExternalStorageDirectory()+"/dirpath";
File myDirectory = new File(path);
    if(!myDirectory.isDirectory()){
        myDirectory.mkdirs();
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T05:21:29.837

您可以通过调用`exists()`方法进行检查，`dir/file`或者您也可以选择特别喜欢`isDirectory()`或`isFile()`。

```
File dir = new File (root.getAbsolutePath() + "/download");
if(!dir.exists())
        dir.mkdirs();

or 

if(!dir.isDirectory())
        dir.mkdirs(); 
```

同样的方式你也可以为文件做

# matlab - 如何只保留一系列相同元素中的上部元素并删除其他元素

> ID：13506295
> 
> 赞同：1
> 
> 时间：2012-11-22T05:17:04.673
> 
> 标签：matlab

以下矩阵：

```
A = [ -1 1 -1 1 -1 1 0 0 0 0 -1 1 0 0 -1 1 -1 1 0 0 ] 
```

会是这样的：

```
A = [ -1 1           0 0 0 0 -1 1 0 0 -1 1      0 0 ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:39:34.097

有趣的小问题。我相信这有效：

```
A = [-1 1 -1 1 -1 1 0 0 0 0 -1 1 0 0 -1 1 -1 1 0 0]; %# Set up an example vector
I1 = [1, 1, A(1:end-2) - A(3:end)]; %# Index all repetitions of sets of two using zeros
I1(A == 0) = 1; %# Ensure our index doesn't remove any of the 0's from the original vector
Soln = A(I1 ~= 0); %# Obtain solution using nonzero entries of the index 
```

# jquery - 带有“PUT”选项的 odata.request 方法出错

> ID：13506296
> 
> 赞同：0
> 
> 时间：2012-11-22T05:17:21.413
> 
> 标签：jquery, odata, datajs

我想对我的 odata 服务数据执行更新操作。

我已经阅读了很多关于浏览器支持使用 ajax 调用的 put 和 delete 的内容。但是在我的代码中，我可以完美地执行方法：“DELETE”。甚至 get 和 post 都做得很好。现在，当我在执行“放置”或“合并”时，它会给出错误“HTTP 请求失败”。

这是我的代码：

```
 OData.request( 
                { 
                    requestUri: query, 
                    method:"PUT",
                    data: { UserName: "user3", EmailId: "User2@XYZf",Comments:"qwerty uiopfg" } 
                }, 
                function (insertedItem) { 

                    $("#doc").append('<div>Done</div>');

                }
                , function(err){

                        $("#doc").append('<div>'+err.message+'</div>');

                        }); 
```

编辑：任何人都可以使用方法：“PUT”选项提供一个简单的 OData.request 演示代码，该代码运行正常。

# coronasdk - 如何在电晕中将数据从 nativeTextField 保存到 sqlite 数据库

> ID：13506300
> 
> 赞同：0
> 
> 时间：2012-11-22T05:17:59.113
> 
> 标签：coronasdk

很难将本地文本字段中的数据保存到电晕中的 sqlite 数据库。

以下是一些相关代码：

```
 function printrecord()
        for row in db:nrows("SELECT * FROM test") do
           t = display.newText(row.pname .. " " .. row.age .. " " .. row.desc, 20, 30 * row.id, null, 16)
           t:setTextColor(255,255,255)
        end
    end

    newData = native.newTextField ( 20, _H - 90, 280, 30 )
    newData.inputType = "text"

    saveData = function ( event )
        textString = newData.text
        db:exec( [[ INSERT INTO test VALUES (NULL, textString, 30, "unknown")]] )
        t:removeSelf()
        t = nil
        printrecord()
    end

    savebutton = widget.newButton {
        default = "buttonGreen.png",
        over = "buttonGreenOver.png",
        label = "Save",
        embose = true,
        onRelease = saveData
        } 
```

当我尝试将`textString`from更改为`db:exec( [[ INSERT INTO test VALUES (NULL, textString, 30, "unknown")]] )`“这是一个字符串”之类的字符串时，它似乎工作正常，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:45:51.617

Lua 不会计算双括号内的 textString ......在 Corona 中运行它以查看差异：

```
textString="hello world"

print([[ INSERT INTO test VALUES (NULL, textString, 30, "unknown")]])

print([[ INSERT INTO test VALUES (NULL,"]]..textString..[[",30,"unknown")]]) 
```

希望这可以帮助。

# java - 将小数的幂提高到最高精度

> ID：13506302
> 
> 赞同：0
> 
> 时间：2012-11-22T05:18:32.803
> 
> 标签：java, math, bigdecimal

我想在java中执行以下操作：

Math.pow((int),(double))

并将小数精度保持在 16 以上（比实际大得多）。

这可能吗？我知道它涉及使用 BigDecimal 和可能的 ln 函数，但我不确定如何处理这个问题。

提前致谢。

**编辑**

我问的原因是因为我试图以极高的精度计算 pi。目前，我正在使用 Chudnovsky 的算法。我已经尝试为此目的使用 taylor 系列，但它需要很长时间才能实用。

编辑

也许这是一个更好的问题：如何找到 BigDecimal 的平方根。（从技术上讲，自从加注到 0.5 后，与原来的相同......）

# jsp - 在包含的 JSP 中访问 Struts2 属性

> ID：13506305
> 
> 赞同：0
> 
> 时间：2012-11-22T05:19:07.533
> 
> 标签：jsp, properties, struts2, include, action

我想在我的主 jsp 的包含的 jsp 文件中访问 Struts2 Action bean 属性

Main.jsp [我可以访问 Action Bean 的地方]

```
<s:if test="%{assignedProductBean.productCode =='NOMADIC'}">
   //SOMETHING HERE
</s:if>
<s:elseif test="%{assignedProductBean.productCode =='MOBILE'}">
  //SOMETHING 2 HERE
</s:elseif> 
```

这正在正确显示。但是我把这部分移到了 sub.jsp

子.jsp

```
<s:if test="%{assignedProductBean.productCode =='NOMADIC'}">
   //SOMETHING HERE
</s:if>
<s:elseif test="%{assignedProductBean.productCode =='MOBILE'}">
  //SOMETHING 2 HERE
</s:elseif> 
```

主.jsp

```
<s:include value="./Sub.jsp" /> 
```

现在我没有得到想要的结果。不管 'productCode' 是什么，这里总是会显示一些东西。

确切的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:32:24.290

对不起。我忘了添加

```
<%@ taglib uri="/struts-tags" prefix="s"%> 
```

在我的 Sub.jsp 中。

现在它工作正常。谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:20:46.030

当您使用 s:include 时，我认为您必须添加参数。

```
<s:include value="Sub.jsp">
    <s:param name="param1" value="value2" />
    <s:param name="param2" value="value2" />
</s:include> 
```

但我更喜欢使用

```
<jsp:include page='Sub.jsp'/> 
```

所以我不必发送参数。

# firefox - 无法在单个 Firefox 配置文件中使用不同的证书

> ID：13506307
> 
> 赞同：2
> 
> 时间：2012-11-22T05:19:19.540
> 
> 标签：firefox, certificate, profiles

我有两个证书可以打开两个不同的网站。我有两个 Firefox 配置文件可以访问它们。为什么不能通过将两个证书一起导入来在单个 firefox 配置文件中同时访问它们？

# node.js - jam.compile 返回一个函数

> ID：13506308
> 
> 赞同：0
> 
> 时间：2012-11-22T05:19:39.753
> 
> 标签：node.js, pug

我想重做我的博客，但是`[function]`每当我 console.log 时，我下面的代码似乎都会返回。是的，这是正确的路径，在我更新玉石之前它曾经可以工作，但现在不行了。

```
post.stub = jade.compile(
        fs.readFileSync(__dirname + '/blog/' + p + '/stub.jade')
) 
```

我该如何解决这个问题，以便`console.log(post.stub)`将我的 :markdown 返回到玉文件中而不是`[function]`？

提前致谢。

更新的答案：

```
 post.stub = jade.compile(
            fs.readFileSync(__dirname + '/blog/' + p + '/stub.jade')
        )({}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:30:00.453

这就是jade 和所有类似模板系统的工作方式。有2个步骤：

1.  将玉文本模板转换为函数（每个模板只需要发生一次）
2.  获取一组上下文数据，通过编译的模板函数运行它，并将呈现的字符串作为 HTML 返回（每次你有唯一的上下文数据时都会发生）

因此，如果您的模板不需要任何上下文数据，只需使用空对象调用它（可能 null/undefined 也可以正常工作）：

```
post.stub = jade.compile(
        fs.readFileSync(__dirname + '/blog/' + p + '/stub.jade')
)({}) 
```

另请参阅[jade javascript API 文档](https://github.com/visionmedia/jade#a5)。

# android - Android - Facebook API - 如何进行两次身份验证？

> ID：13506310
> 
> 赞同：0
> 
> 时间：2012-11-22T05:19:52.230
> 
> 标签：android, facebook, login, authorize

我在尝试第二次登录 Facebook 时遇到问题。用户第一次输入其凭据时，我开始在后台将一些图片上传到其 Facebook 帐户。

但是，在此期间，另一个用户可以再次点击 Facebook 按钮。我预计之前的请求仍在处理中，情况确实如此。但是，当第一个处理（即第一个用户的图片的上传）尚未完成时，我无法让第二个用户登录。

当前版本的情况是，当第二个用户点击我的 Facebook 按钮时，Facebook API 只是假设它引用了前一个用户（因为它仍在后台运行）。但是，我想用这个新用户开始另一个部分，而旧用户仍在后台运行。我怎样才能做到这一点？

这是我的简单代码（当用户在屏幕上点击我的 Facebook 按钮时，我调用以下方法）：

```
 private void uploadPictures(View target) {

    mFacebook = new Facebook(getString(R.string.facebookappid));
    mAsyncRunner = new AsyncFacebookRunner(mFacebook);
    mFacebook.authorize(this, Settings.FACEBOOK_PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
} 
```

PS：我也尝试过实例化多个 Facebook 和 AsyncFacebookRunner 对象，但它没有用（我得到了相同的行为，即即使对象不同，登录屏幕也不会第二次出现（如果之前的请求仍在处理中））！！！

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:41:18.807

您可以使用新的 3.0 beta SDK 执行类似的操作。您可以在[此处](https://developers.facebook.com/android/)获取并查看 SwitchUserSample。

您将无法对不同的用户使用单点登录 (SSO)（他们需要通过 webview 对话框登录），但您将获得一个不同的 Session 对象，该对象可用于不同的用户。

# php - 将excel导入mysql到php中的treeview

> ID：13506311
> 
> 赞同：0
> 
> 时间：2012-11-22T05:19:53.033
> 
> 标签：php, mysql, excel, import

我想从与 mysql 数据库有父子关系的 excel 文件中导入数据，并使用 mysql 数据库数据将其显示为树视图，

请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:25:50.757

将文件导出为 CSV，使用[mysqlimport](http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html)将所述 CSV 导入数据库。如果您需要进一步的帮助，请在此处发表评论，我们会看到。

# java - 生成未连接或未启用互联网的消息

> ID：13506313
> 
> 赞同：1
> 
> 时间：2012-11-22T05:20:11.187
> 
> 标签：java, android, android-layout, android-intent

在我的应用程序中，我调用 WebServices 并获取 GPRS 值。问题是，当未连接互联网时，我的应用程序会生成“强制关闭”消息。请指导我，它如何产生互联网不可用的消息，或者请连接互联网，它不会产生强制关闭的消息。感谢帮助

也请指导我移动网络。如果它不在我的应用程序上，则生成请在移动网络上的消息。怎么可能？？？

感谢 Kittu 和 ram Kiran 的帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T05:23:55.250

```
private boolean haveNetworkConnection() 
{
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) 
    {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;

} 
```

每当您尝试调用 Web 服务时调用此方法

```
if(haveNetworkConnection())
{
    // call the webservice
} 
```

`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>` 在清单中添加权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:27:59.650

你可以这样做：

```
//check connection
        public boolean isOnline() {
            ConnectivityManager cm =(ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            if (netInfo != null && netInfo.isConnectedOrConnecting()) {

                return true;
            }

          //alert box to show internet connection error
            AlertDialog.Builder Internet_Alert = new AlertDialog.Builder(DinnerDenActivity.this);
            // set title
            Internet_Alert.setTitle("Attention!");
            Internet_Alert.setMessage("This application requires internet connectivity, no internet connection detected");
            Internet_Alert.setPositiveButton("Quit", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface arg0, int arg1) 
                {
                    Intent intent = new Intent(Intent.ACTION_MAIN);
                    intent.addCategory(Intent.CATEGORY_HOME);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent);
                    onQuitPressed(); 
                }
            });

            Internet_Alert.create().show();
            return false;
        } 
```

**isOnline**检查互联网连接

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

此权限应添加到清单文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T06:07:03.830

按照此[链接检查](http://glorious-arvind.blogspot.in/2012/11/check-internet-connection.html)您的应用程序中的Internet 连接

在上面的链接中，我们使用警报 Dailog 检查所有类型的互联网连接。您可以在您的应用程序中使用它来避免`force close`您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T05:40:46.430

您也可以像这样使用广播接收器

```
public class NetworkBroadcastReceiver extends BroadcastReceiver{

    /*
     * (non-Javadoc)
     * 
     * @see android.content.BroadcastReceiver#onReceive(android.content.Context,
     * android.content.Intent)
     */
    @Override
    public void onReceive(Context context, Intent intent) {
        boolean isNetworkDown= intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
        if(isNetworkDown){
            ApplicationInfo.networkAvailable = false;
        }else{
            ApplicationInfo.networkAvailable = true;
        }
    }

} 
```

在调用您的网络服务之前，您可以`ApplicationInfo.networkAvailable`像这样检查

```
if(!ApplicationInfo.networkAvailable){
    //show msg -> no network connectivity
}else{
    //proceed with WS call
} 
```

注册您的接收器`CONNECTIVITY_ACTION`。这可以在代码和 AndroidManifest 文件中完成

# google-maps - 如何从附近搜索（）结果生成指向谷歌地图的 url 链接？

> ID：13506317
> 
> 赞同：0
> 
> 时间：2012-11-22T05:20:33.620
> 
> 标签：google-maps, google-maps-api-3, google-places-api

用下面的例子，

[https://google-developers.appspot.com/maps/documentation/javascript/examples/place-search](https://google-developers.appspot.com/maps/documentation/javascript/examples/place-search)

通过使用附近的搜索，返回的地方之一是“John St Square Supermarket”。如何生成一个 url 以在完整的谷歌地图中显示“John St Square Supermarket”？现在我通过将纬度和经度附加到“http://maps.google.com/?q=”来生成类似[http://maps.google.com/?q=123,456](http://maps.google.com/?q=123,456) 但它不会t 显示地名和正确的标记。

然后我尝试使用[http://maps.google.com/?q=John St Square Supermarket](http://maps.google.com/?q=John%20St%20Square%20Supermarket)

工作得很好......直到我偶然发现一个有多个位置的地名。例如，

[http://maps.google.com/?q=SK%20Dato%27%20Abu%20Bakar](http://maps.google.com/?q=SK%20Dato%27%20Abu%20Bakar)

它显示了多个位置，但我只需要一个我已经知道它的纬度和经度的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T05:47:02.717

您可以使用以下参数将纬度和经度添加到 URL `ll`：

> [https://maps.google.com/?q=pizza+hut&ll=-33.867701,151.208471](https://maps.google.com/?q=pizza+hut&ll=-33.867701,151.208471)

您还可以使用参数为用户指定默认缩放级别`z`：

> [https://maps.google.com/?q=pizza+hut&ll=-33.867701,151.208471&z=12](https://maps.google.com/?q=pizza+hut&ll=-33.867701,151.208471&z=12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:40:54.627

PlacesResult.url 属性代表 Google Places 的 url。 [https://developers.google.com/maps/documentation/javascript/reference#PlaceResult](https://developers.google.com/maps/documentation/javascript/reference#PlaceResult)

所以你可以这样做：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Place Search</title>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&libraries=places"></script>

    <style>
      #map {
        height: 400px;
        width: 600px;
        border: 1px solid #333;
        margin-top: 0.6em;
      }
    </style>

    <script>
      var map;
      var infowindow;
      var service;

      function initialize() {
        var pyrmont = new google.maps.LatLng(-33.8665433, 151.1956316);

        map = new google.maps.Map(document.getElementById('map'), {
          mapTypeId : google.maps.MapTypeId.ROADMAP,
          center : pyrmont,
          zoom : 15
        });

        var request = {
          location : pyrmont,
          radius : 500,
          types : ['store']
        };
        infowindow = new google.maps.InfoWindow();
        service = new google.maps.places.PlacesService(map);
        service.nearbySearch(request, callback);
      }

      function callback(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
          for (var i = 0; i < results.length; i++) {
            createMarker(results[i]);
          }
        }
      }

      function createMarker(place) {
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({
          map : map,
          position : place.geometry.location,
          reference : place.reference,
          name : place.name
        });

        google.maps.event.addListener(marker, 'click', onMarker_clicked);
      }

      function onMarker_clicked() {
        var marker = this;

        service.getDetails({
          reference : marker.get("reference")
        }, function(result) {
          var html = marker.get("name");
          if (result && "url" in result) {
            marker.set("url", result.url);
          }

          if (marker.get("url")) {
            html = "<a href='" + marker.get("url") + "' target=_blank>" + html + "</a>";
          }
          infowindow.setContent(html);
          infowindow.open(map, marker);
        });
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map"></div>
  </body>
</html> 
```

# java - Internet Explorer 8 中的波兰语字母编码问题

> ID：13506319
> 
> 赞同：0
> 
> 时间：2012-11-22T05:20:43.047
> 
> 标签：java, encoding, polish

我通过在我的网络应用程序中输入波兰字母来搜索实用程序。

如果我将波兰字母输入为**Łódź**，它将在 Firefox 中搜索数据库中的数据，但不会在 IE 8 中搜索。

以同样的方式，我将附加输入值的搜索条件并显示在当前条件面板中，它将显示不同的单词。

我使用 ajax 调用搜索功能。

也使用 UTF-8 ，ISO-8859-1 和 ISO-8859-2 来解决这个问题，但仍然没有改变。

当我输入**Łódź**时，它将显示在标准面板中，如下所示。

```
firefox: ÅÃ³dÅº
internet explorer: LÃ³dz 
```

请建议。

谢谢。汝池

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:44:28.060

ISO-8859-15 怎么样？在处理欧洲语言时，我通常在 Windows 上的 Java 中使用它。

# facebook - 将视频变量闪存到 Facebook OpenGraph

> ID：13506321
> 
> 赞同：0
> 
> 时间：2012-11-22T05:21:01.070
> 
> 标签：facebook, facebook-opengraph

人们到底是怎么做到的？Grooveshark 做到了，Youtube 做到了。他们如何通过查询字符串将 flash 变量输入 swf？

这是我的 OG 代码的链接，我知道这很好：

[https://recordmob.com/s/yc](https://recordmob.com/s/yc)

您可以在我的源代码中看到 og:video 属性设置正确：

但是，如果不访问 OG 中任何其他变量工具的 ExternalInterface，我怎么能在 facebook 的新闻提要中将该 id 放入 Flash 中呢？

我在这里拔头发！！！啊啊啊啊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:51:58.103

我想通了。我删除了 Facebook 出于安全原因不允许的 ExternalInterface 调用，并偶然发现了 loaderInfo.loaderURL 来获取查询字符串 ID。然后我只是做一个远程调用，通过一个 json 编码的字符串来拉入所有内容。奇迹般有效。

我的堆栈溢出策略是在处理某事后 8 小时提出问题。问了10分钟后，我在网上找到了答案。SO是我的圣安东尼，失物的守护神。

# iphone - 有什么方法可以在通信过程中跟踪设备的 Wi-Fi 连接

> ID：13506324
> 
> 赞同：1
> 
> 时间：2012-11-22T05:21:11.267
> 
> 标签：iphone, ios, connection, wifi, handle

目前我正在开发一个应用程序，它可以使用与**developer.apple** **[Wi-Tap](http://developer.apple.com/library/ios/#samplecode/WiTap/Introduction/Intro.html)**应用程序相同的[**bonjour**](https://developer.apple.com/bonjour/)服务通过 Wi-Fi 将多个文件发送到其他设备。只有一个区别是，我正在发送**Wi-Tap**发送字符串的文件。

 **现在我想在我的应用程序中处理 Wi-Fi 连接问题，例如连接丢失。

我可以处理以下情况的`NSStream` `Errors`直通 委托`handleEvent`

```
 NSStreamEventErrorOccurred 
 NSStreamEventEndEncountered 
```

但是我无法通过这个找到 Wi-Fi 连接丢失`delegate`。因此，我认为可能的解决方案是使用[**Reachability**](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)类来检查后台线程中的 wi-fi 连接。但是，这是一种不好的做法，并且会消耗更多的设备电池电量。

那么有没有其他方法可以在文件传输过程中跟踪设备的 Wi-Fi 连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:11:54.580

一种解决方法是使用**NSNetService**

由于这只是一个服务发布工具，它不会干扰您的数据传输，因此您只需使用

```
-(void)publishNetwork
{
//---publish the service---
netService = [[NSNetService alloc] 
              initWithDomain:@"" 
              type:BonjourServiceName 
              name:@"" 
              port:portNo];
netService.delegate = self;
[netService publish]; 

} 
```

你必须运行它

```
[netService scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

如果 Wifi 开启，那么这将被解雇

```
- (void)netServiceDidPublish:(NSNetService *)sender
 {
    NSLog(@"Service did publish:%@",sender);

 } 
```

如果没有wifi

```
-(void)netService:(NSNetService *)aNetService didNotPublish:(NSDictionary *)dict 
 {
   NSLog(@"Service did not publish: %@", dict);
} 
```

这些是 NSNetService 的代表，您可以参考该库。这只是解决您问题的一种方法，希望对您有所帮助。**

# html - HTML5 画布样式高度与属性高度

> ID：13506326
> 
> 赞同：0
> 
> 时间：2012-11-22T05:21:24.743
> 
> 标签：html, canvas, height, width

我目前正在学习如何使用 HTML5 新元素，我偶然发现了一个令人沮丧的问题，其中包含所有图形函数，例如 fillRect() 和 drawImage()。

我正在设置宽度和高度

样式=“宽度：75像素；高度：10像素；”

代替

宽度=“200”高度=“100”

结果是图形永远不会是正确的比例。

我的问题是，为什么会有所不同？我显然不明白这一切。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:39:39.883

我知道至少在 JSF（特别是 primefaces）中，不同之处在于，如果您将高度放在样式中 - 有时它不会用于正确计算和渲染组件（更复杂的组件）。如果你把它作为属性，那么它将起作用。

如果 HTML5 采用类似的方法，则意味着属性 height 和 width 是组件的实际高度和宽度，而样式只是显示它的方式。然而，有时，两种方法都会以相同的结果结束。

同样在primefaces中，当您将高度和宽度指定为属性时-您不能使用百分比。这可能是关键 - 执行特定宽度和高度而不是百分比的额外措施。

# telerik - 客户端更改了 RadGrid 中的文本框

> ID：13506332
> 
> 赞同：2
> 
> 时间：2012-11-22T05:22:17.003
> 
> 标签：telerik, radgrid, radtextbox

再会，

我有一个带有 RadTextbox 的 GridTemplateColumn。文本框值由 javascript 更改。但是当我单击文本框时，它会变回原来的值。

请帮忙

**javascript**

```
<title>Untitled Page</title>

<script type="text/javascript">
    function changeCountry() {            

        var grid = $find('<%=RadGrid1.ClientID %>');
        var MasterTable = grid.get_masterTableView();            
        var dataItems = MasterTable.get_dataItems();

        var cellCountry = dataItems[0].get_cell("CountryCol");
        var txtCountry = $telerik.$(cellCountry).find('input')[0];
        txtCountry.value = "New Country";        
    }
</script> 
```

**.aspx**

```
 <telerik:RadGrid ID="RadGrid1" runat="server" AllowPaging="True" CellSpacing="0" GridLines="None" PageSize="20" AutoGenerateColumns="false" OnItemDataBound="RadGrid1_ItemDataBound">
        <FilterMenu EnableImageSprites="False">
        </FilterMenu>
        <ClientSettings>
            <Selecting CellSelectionMode="None" AllowRowSelect="True" />
        </ClientSettings>
        <MasterTableView>
            <CommandItemSettings ExportToPdfText="Export to PDF" />
            <RowIndicatorColumn FilterControlAltText="Filter RowIndicator column" Visible="True">
            </RowIndicatorColumn>
            <ExpandCollapseColumn FilterControlAltText="Filter ExpandColumn column" Visible="True">
            </ExpandCollapseColumn>                               
            <Columns>

                <telerik:GridBoundColumn DataField="CR_Branch" HeaderText="Branch"></telerik:GridBoundColumn>
                <telerik:GridBoundColumn DataField="CR_Country" HeaderText="Branch" Display=false></telerik:GridBoundColumn>

                <telerik:GridTemplateColumn HeaderText="CR_Country" DataField="CR_Country" UniqueName="CountryCol">
                    <ItemTemplate>                    
                        <telerik:RadTextBox ID="txtCountry" runat="server"></telerik:RadTextBox>                                                   
                    </ItemTemplate>
                </telerik:GridTemplateColumn>                                                

            </Columns>
            <EditFormSettings>
                <EditColumn FilterControlAltText="Filter EditCommandColumn column">
                </EditColumn>
            </EditFormSettings>
        </MasterTableView>
    </telerik:RadGrid> 
```

**.aspx.cs**

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridHeaderItem)
    {
    }
    if (e.Item is GridDataItem)
    {
        GridDataItem dataItem = (GridDataItem)e.Item;

        RadTextBox txtCountry = ((RadTextBox)dataItem.FindControl("txtCountry"));
        txtCountry.Text = dataItem["CR_Country"].Text;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-06T15:30:39.313

您需要使用 Telerik 客户端脚本**set_value**函数而不是纯 javascript/HTML，即

```
function changeCountry() {            

    var grid = $find('<%=RadGrid1.ClientID %>');
    var MasterTable = grid.get_masterTableView();            
    var dataItems = MasterTable.get_dataItems();

    dataItems[0].findControl("txtCountry").set_value("New Country");
} 
```

# java - 打开后我的内部框架没有获得焦点......（Java）

> ID：13506333
> 
> 赞同：0
> 
> 时间：2012-11-22T05:22:25.263
> 
> 标签：java, swing, focus, jinternalframe, jdesktoppane

我有一个菜单，其中包含打开内部框架的项目，但每次我需要在框架中单击两次。一次将焦点放在 Int.frame 上，第二次将焦点放在文本字段上。

所以，这是我的问题：可以自动将焦点放在 Int.Frame 上吗？

* * *

我的主屏幕代码：

```
public final class principal extends javax.swing.JFrame {

viewCity city = new viewCity();

public principal() {
    initComponents();
    myListeners();
    setLocationRelativeTo(null);
}

public void myListeners() {
    menuCity.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
            menuCityClicked(e);
        }
    });
}

public void central(JInternalFrame window1) {

    int lDesk = panelPrincipal.getWidth();
    int aDesk = panelPrincipal.getHeight();
    int lIFrame = window1.getWidth();
    int aIFrame = window1.getHeight();

    window1.setLocation(lDesk / 2 - lIFrame / 2, aDesk / 2 - aIFrame / 2);
}

private void menuCityClicked(MouseEvent e) {
    if (!city.isVisible()) {
        panelPrincipal.add(city);
        central(city);
        city.requestFocus(); // Nothing
        city.requestFocusInWindow(); // Nothing
        city.setVisible(true);
        city.requestFocus(); // Nothing
        city.requestFocusInWindow(); // Nothing

    }
}} 
```

无论如何，菜单将始终保持焦点。例如，在浏览器的菜单中单击，您将保持焦点，通过移动光标，您将打开其他菜单而无需单击。

* * *

通过将属性“选择模型”设置为 null 作品，但给我 nullpointerexception。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:47:31.523

好的，问题出在 jMenu 上，但是 jMenuItem 工作正常，所以......我正在使用

# c# - 如何在组合框下拉列表中显示两列？

> ID：13506334
> 
> 赞同：-3
> 
> 时间：2012-11-22T05:22:25.310
> 
> 标签：c#, combobox

我想在组合框下拉列表中显示两列。在此图像下拉列表中仅显示公司 ID，我需要在下拉列表中显示公司 ID 及其名称。怎么显示？？请帮忙..

[http://i.stack.imgur.com/x5Kuh.jpg](http://i.stack.imgur.com/x5Kuh.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:24:38.713

在 sql 查询中，您可以连接 Company id 和 Name。所以你可以同时显示。

例如：select CompanyID+' '+CompanyName as Company,Id from yourtable

# php - 在 PHP 中显示选择结果

> ID：13506340
> 
> 赞同：0
> 
> 时间：2012-11-22T05:23:18.673
> 
> 标签：php, mysql, select

我运行一个查询，它只从特定字段返回第一个单词，这个字段有多个用空格分隔的单词。查询的结果将是我动态创建的选择框的值。我有 3 个选择框，它们是根据另一个选择动态创建的。

问题是查询返回整个句子，并且也显示在选择框中。我尝试仅在数据库中运行查询，它似乎给了我正确的结果。

这是代码片段。我该如何解决？

```
<?php
  //**************************************
 //     First selection results     //
//**************************************
if(isset($_GET['func'])&& $_GET['func'] == "drop_1") {
   drop_1($_GET['drop_var']); 
}

function drop_1($drop_var)
{
$result = mysql_query("SELECT DISTINCT SUBSTRING_INDEX(`h_name` ,' ', 1 ) AS name FROM hypermarket_em") or die(mysql_error());
echo '<select name="drop_2" id="drop_2"><option value=" " disabled="disabled" selected="selected">Select City</option>
        <option value="ALL" >ALL</option>';
while($drop_2 = mysql_fetch_array( $result )) 
{
      echo '<option value="'.$drop_2['name'].'">'.$drop_2['name'].'</option>';
}
echo '</select>';
echo "<script type=\"text/javascript\">
    $('#wait_2').hide();
    $('#drop_2').change(function(){
    $(this).parent().parent().find('.drop2').val($(this).val());
    $('#wait_2').show();
    $('#result_2').hide();
    $.get(\"func.php\", {
    func: \"drop_2\",
    drop_var: $('#drop_2').val()
    }, function(response){
    $('#result_2').fadeOut();
    setTimeout(\"finishAjax_tier_three('result_2', '\"+escape(response)+\"')\", 400);
    });
    return false;
    });
    </script>";
}
?> 
```

任何想法都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:42:31.650

您正在设置子字符串

```
SUBSTRING_INDEX(`h_name` ,' ', 1 ) AS name 
```

但仍然引用完整的原始字符串`$drop_2['h_name']`。尝试更改为 -

```
while($drop_2 = mysql_fetch_array( $result )) 
{
  echo '<option value="'.$drop_2['name'].'">'.$drop_2['name'].'</option>';
} 
```

编辑 -

如果您在 中正确使用别名`name`，`$drop_2['name']`我不确定为什么它仍在回显完整的字符串。您可以使用`explode()`我第一次回答的问题，作为故障保险

```
while($drop_2 = mysql_fetch_array( $result )) 
{
  $firstWord = explode(' ',trim($drop_2['name']));
  echo '<option value="'.$firstWord[0].'">'.$firstWord[0].'</option>';
} 
```

# android - Amazon Kindle Fire 中的应用内问题

> ID：13506344
> 
> 赞同：1
> 
> 时间：2012-11-22T05:23:28.393
> 
> 标签：android, amazon-s3, in-app-purchase

我正在尝试在 android 中为亚马逊开发应用程序。此时我从亚马逊示例代码下载了一个代码，我在我的应用程序中补充了这个。在 Kindle Fire 上运行应用程序时，我收到了以下回复：

但是在发送请求后它不会继续进行。没有响应生成。我的应用购买类型是权利，我正在尝试在服务器上对其进行测试。我没有在应用测试技术中使用亚马逊。为此，我还将我的应用程序添加到我的亚马逊开发者帐户中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T05:33:04.040

正如亚马逊所记录的 - 如果您的应用程序没有通过他们的 App Store 推送，它将不会与服务器通信。您需要安装 IAP SDK Tester 和相关的数据文件进行测试。

# actionscript-3 - 如何将 2 个 flv 文件与 alpha 通道合并？

> ID：13506346
> 
> 赞同：0
> 
> 时间：2012-11-22T05:23:40.767
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, flash-builder

我是 Flash 社区的新面孔。我可以给你们一些建议吗？

我有 2 个 flv 文件，一个是带有 alpha 通道的视频（我想在顶部显示），以及从移动设备上的摄像头录制的文件（可能在 iOS 设备上）。如果我想以编程方式将这些文件合并在一起，我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:18:34.620

我不确定，如果我理解正确，但我认为您想在同一位置显示 2 个视频。

这很容易。您应该开始一个新项目，并导入两个视频：

```
var myVideo:Video = new Video();
addChild(myVideo);
var nc:NetConnection = new NetConnection();
nc.connect(null);
var ns:NetStream = new NetStream(nc);
myVideo.attachNetStream(ns);
ns.play("http://www.example.com/file.flv");

var myVideo2:Video = new Video();
addChild(myVideo2);
var nc2:NetConnection = new NetConnection();
nc2.connect(null);
var ns2:NetStream = new NetStream(nc2);
myVideo2.attachNetStream(ns2);
ns2.play("http://www.example.com/file2.flv"); 
```

比您应该将视频的 alpha（不透明度）设置为 0.5（或 0-1 范围内的任何值），因此它将是半透明的：

```
myVideo2.alpha = 0.5; 
```

您最后使用 addChild() 添加的孩子将位于显示列表的顶部，因此您应该设置该孩子的 alpha。（您也可以将两者的 alpha 设置为任何值）。

希望它有所帮助。

# asp.net-mvc-4 - mvc4中的部分视图

> ID：13506349
> 
> 赞同：1
> 
> 时间：2012-11-22T05:23:59.577
> 
> 标签：asp.net-mvc-4, jquery-mobile, asp.net-mvc-partialview

我是 Jquery mobile 和 asp.net mvc4 的新手。在我的应用程序中，我将页面分为三个块（ui-block-a、ui-block-b、ui-block-c）。这三个块位于共享文件夹（_Layout.cshtml）中。部分查看左侧和右侧块。在中间块通常被查看。当我执行任何修改时，部分视图也正在引用。我只想在第一次加载时加载我的部分视图。如果我对中间块进行任何更改，部分视图不应受到影响。请帮助我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:46:41.867

`Partial view`并不意味着它会部分更新。它只是一小块 ui 代码，适合组合成一个单独的文件以供重用。

**更新时需要在中间块**中实现 ajax 函数。

[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)

将是您可以参考的api。

# android - 哪里可以得到果冻豆通知面板源代码

> ID：13506350
> 
> 赞同：1
> 
> 时间：2012-11-22T05:24:03.377
> 
> 标签：android

我是一个新的android程序员，我在互联网上浏览了果冻豆通知面板源代码，但还没有成功，我想使用一个滑动面板，就像果冻豆通知面板一样，从上到下滑动。
请帮我获取源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:04:42.663

干得好：

[https://github.com/android/platform_frameworks_base/tree/master/packages/SystemUI/src/com/android/systemui/statusbar](https://github.com/android/platform_frameworks_base/tree/master/packages/SystemUI/src/com/android/systemui/statusbar)

它托管在 Github 和 Google 自己的服务器上。

# signalr - SignalR - 无法加载集线器方法

> ID：13506352
> 
> 赞同：3
> 
> 时间：2012-11-22T05:24:05.137
> 
> 标签：signalr

我有兴趣使用 SignalR 为我的应用程序中的一些长时间运行的进程提供更好的用户体验，并且刚刚创建了我的第一个测试 SignalR 项目。我创建了一个空的 Web 项目，然后使用 NuGet 安装 SignalR.Sample 包。StockTicker.html 页面示例完美运行。然后我创建了自己的集线器和测试页面。

```
using System.Threading;
using Microsoft.AspNet.SignalR.Hubs;

namespace SignalR.Test
{
   [HubName("testHub")]
   public class TestHub : Hub
   {
      public void LongRunningProcess()
      {
         Thread.Sleep(1000);
         this.Clients.Caller.updateStatus("25% Completed");
         Thread.Sleep(1000);
         this.Clients.Caller.updateStatus("50% Completed");
         Thread.Sleep(1000);
         this.Clients.Caller.updateStatus("75% Completed");
         Thread.Sleep(1000);
         this.Clients.Caller.updateStatus("Done");
      }
   }
}

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>SignalR - Long Running Process</title>
</head>
<body>
   <h1>Long Running Process</h1>

   <p>Status:</p>

   <ul id="status">
      <li>Loading hub...</li>
   </ul>

   <script src="/bundles/jquery"></script>
   <script src="/Scripts/jquery.signalR-1.0.0-alpha2.js"></script>
   <script src="/signalr/hubs"></script>
   <script type="text/javascript">
      $(function () {
         var hub = $.connection.testHub;

         hub.updateStatus = function (message) {
            $("#status").append("<li>" + message + "</li>");
         };

         $.connection.hub.start().done(function () {
            $("#status").children().first().text("Hub loaded.");
            hub.longRunningProcess();
         })
         .fail(function() {
            $("#status").children().first().text("Hub failed");
         });
      })
   </script>
</body>
</html> 
```

当我运行该页面时，我收到以下（Firebug）错误：

```
TypeError: hub.longRunningProcess is not a function
    hub.longRunningProcess(); 
```

如果我查看 /signalr/hubs，我会在文件末尾看到以下脚本：

```
signalR.testHub = signalR.hub.createHubProxy('testHub'); 
signalR.testHub.client = { };
signalR.testHub.server = {
    longRunningProcess: function () {
        return signalR.testHub.invoke.apply(signalR.testHub, $.merge(["LongRunningProcess"], $.makeArray(arguments)));
     }
}; 
```

任何关于我哪里出错的建议/指针将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T06:07:48.540

我发现了问题。客户端脚本应如下所示：

```
 $(function () {
         var hub = $.connection.testHub;

         hub.client.updateStatus = function (message) {
            $("#status").append("<li>" + message + "</li>");
         };

         $.connection.hub.start().done(function () {
            $("#status").children().first().text("Hub loaded.");
            hub.server.longRunningProcess();
         })
         .fail(function() {
            $("#status").children().first().text("Hub failed");
         });
      }) 
```

注意将 .client 和 .server 属性添加到 hub 方法声明中，例如 hub.client.updateStatus() 和 hub.server.longRunningProcess()

# visual-c++ - 在托管 C++ 中编写二叉树类

> ID：13506358
> 
> 赞同：0
> 
> 时间：2012-11-22T05:24:38.463
> 
> 标签：visual-c++, binary-tree

我试图弄清楚如何在托管 C++ 中为学校项目创建一个二叉树类。我在非托管 C++ 和 C# 中找到了非常好的示例，因此我能够很好地理解发生了什么，但我似乎无法在托管 C++ 中弄清楚。我想知道的是：为什么我会出现堆栈溢出（见下文），这是一种明智的方法吗？这是我的课：

```
#pragma once

#include "stdafx.h"
#include <iostream>
#include <deque>
#include <climits>

using namespace std;
using namespace System;
using namespace System::Collections;

ref struct Node
{
int data;
Node ^parent;
Node ^left;
Node ^right;

// constructors
// default constructor

Node (){}
// constructor that takes a node with no leafs
// a constructor that accepts a new node with no children
Node(int input)
{
    Node ^node = gcnew Node(input);
    node->data =input;
    node->left = nullptr;
    node->right = nullptr;
    node->parent = nullptr;
}

// method to create a new Node 
Node ^newNode(int data)
{
    Node ^node = gcnew Node;
    node->data = data;
    node->left = nullptr;
    node->right = nullptr;
    node->parent = nullptr;

    return node;
}

// method that inserts a new node into an existing tree
Node ^insertNode(Node ^node, int input)
{
    Node ^p;
    Node ^returnNode;
    if (node == nullptr)
    {
        returnNode = newNode(input);
        returnNode->parent = p;
        return returnNode;
    }

    if (input <= node->data)
    {
        p = node;
        node->left = insertNode(node->left, input);
    }

    else
    {
        p = node;
        node->right = insertNode(node->right, input);
    }
    return node;
}

}; 
```

当我创建一个新实例并尝试添加一个节点时，我得到一个堆栈溢出异常。

```
#include "stdafx.h"
#include "GenericNodeClass.h"
#include "BinarySearchTreeClass.h"

using namespace std;
using namespace System;

int main ()
{
BinarySearchTreeClass^ BTree = gcnew BinarySearchTreeClass();

Node ^newNode = gcnew Node(7);
newNode = newNode->insertNode(newNode, 6);  // this just looks stupid
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:32:27.507

在你的`Node`构造函数中......

```
Node(int input)
{ 
```

...您无条件地调用`Node`构造函数...

```
 Node ^node = gcnew Node(input); 
```

这不能很好地结束。为什么要在构造函数`Node`中构造一个 new `Node`？当`Node`构造函数被调用时，它被调用来构造`*this`对象——而不是创建一个新的`Node`，你应该初始化当前实例。

同样在您的`insertNode`成员函数中-它已经可以访问该`*this`对象；无需通过单独的参数传递它。

# java - 通过 Post Request 上传文件

> ID：13506360
> 
> 赞同：2
> 
> 时间：2012-11-22T05:24:59.510
> 
> 标签：java, post, jersey, http-post

我正在尝试根据他们的[文档](http://wiki.smugmug.net/display/API/Uploading)通过 HTTP Post 将图像上传到 SmugMug 。我的所有标题都是正确的，但让我感到困惑的部分是在正文中设置二进制数据，如下所述：

> 此方法需要一个 POST 请求，其中包含正文中的二进制数据和标头中的所有其他元数据。

我试过了：

*   ```
    SMResponse response = builder.post(SMResponse.class, Files.readAllBytes(image.toPath())); 
    ```

*   ```
    SMResponse response = builder.post(SMResponse.class, new String(Files.readAllBytes(image.toPath()))); 
    ```

*   ```
    SMResponse response = builder.post(SMResponse.class, new String(Base64.encode(Files.readAllBytes(image.toPath())))); 
    ```

*   ```
    SMResponse response = builder.post(SMResponse.class, Base64.encode(Files.readAllBytes(image.toPath()))); 
    ```

我最好的猜测是第一个会起作用，但所有这些都会返回：

```
{"stat":"fail","method":"smugmug.images.upload","code":5,"message":"system error"} 
```

这是上传的完整方法，以防我错过了什么：

```
public boolean upload(File image, int albumId, String caption, String keywords, 
        Boolean hidden, Integer imageId, Integer altitude, Float latitude, 
        Float longitude, boolean pretty) throws IOException, InvalidKeyException, NoSuchAlgorithmException, SmugMugException {
    logger.debug("upload() called");
    byte[] imageBytes = Files.readAllBytes(image.toPath());

    WebResource resource = SmugMugAPI.CLIENT.resource("http://upload.smugmug.com/");

    LoggingFilter logFilter = new LoggingFilter();
    resource.addFilter(logFilter);

    OAuthSecrets secrets = new OAuthSecrets().consumerSecret(smugmug.getConsumerSecret());
    OAuthParameters oauthParams = new OAuthParameters().consumerKey(smugmug.getCosumerKey()).
            signatureMethod("HMAC-SHA1").version("1.0");
    // Create the OAuth client filter
    OAuthClientFilter filter = new OAuthClientFilter(SmugMugAPI.CLIENT.getProviders(), oauthParams, secrets);
    // Add the filter to the resource
    if (smugmug.getToken() != null){
        secrets.setTokenSecret(smugmug.getToken().getSecret());
        oauthParams.token(smugmug.getToken().getId());
    }
    resource.addFilter(filter);

    WebResource.Builder builder = resource.getRequestBuilder();
    //User agent
    builder = builder.header("User-Agent", smugmug.getAppName());
    //API Version header
    builder = builder.header("X-Smug-Version", "1.3.0");
    //Response Type header
    builder = builder.header("X-Smug-ResponseType", "JSON");
    //Content-Length header
    builder = builder.header("Content-Length", Long.toString(image.length()));
    //Content-MD5 header
    builder = builder.header("Content-MD5", DigestUtils.md5Hex(imageBytes));
    //X-Smug-FileName header
    builder = builder.header("X-Smug-FileName", image.getName());
    //X-Smug-AlbumID header
    builder = builder.header("X-Smug-AlbumID", Integer.toString(albumId));
    //X-Smug-Caption header
    if(caption != null){
        builder = builder.header("X-Smug-Caption", caption);
    }
    //X-Smug-Caption header
    if(keywords != null){
        builder = builder.header("X-Smug-Keywords", keywords);
    }
    //X-Smug-Hidden header
    if(hidden != null){
        builder = builder.header("X-Smug-Hidden", hidden.toString());
    }
    //X-Smug-ImageID header
    if(imageId != null){
        builder = builder.header("X-Smug-ImageID", imageId.toString());
    }
    //X-Smug-Altitude header
    if(altitude != null){
        builder = builder.header("X-Smug-Altitude", altitude.toString());
    }
    //X-Smug-Latitude header
    if(latitude != null){
        builder = builder.header("X-Smug-Latitude", latitude.toString());
    }
    //X-Smug-Latitude header
    if(longitude != null){
        builder = builder.header("X-Smug-Longitude", longitude.toString());
    }
    //X-Smug-Pretty header
    if(pretty){
        builder = builder.header("X-Smug-Pretty", Boolean.toString(pretty));
    }

    SMResponse response = builder.post(SMResponse.class, new String(imageBytes));
    if (!"ok".equals(response.getStat())) {
        throw new SmugMugException(response);
    }
    return true;
} 
```

我哪里出错了？

* * *

只是想看看响应：

```
SMResponse response = builder.entity(image).post(SMResponse.class); 
```

它实际上发回了一个空白响应（没有 json），这本身就很奇怪，因为我本以为会返回一些消息。这是输出：

```
Nov 21, 2012 11:55:48 PM com.sun.jersey.api.client.filter.LoggingFilter log
INFO: 1 * Client in-bound response
1 < 200
1 < Edge-Control: no-store
1 < X-SmugMug-Hiring: How to love what you do: http://www.smugmug.com/jobs/
1 < Date: Thu, 22 Nov 2012 05:55:48 GMT
1 < Content-Length: 0
1 < X-SmugMug-Values: 4/4 - It's the product, stupid
1 < Expires: Thu, 22 Nov 2012 05:55:49 GMT
1 < Connection: keep-alive
1 < Content-Type: application/json; charset=utf-8
1 < X-Powered-By: SmugMug/0.9
1 < Server: Apache
1 < Cache-Control: private, no-store, no-cache, max-age=1, must-revalidate
1 < 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:28:38.307

我不确定发生了什么，但是在 SmugMug 帐户设置中找到上传日志后，我能够让它工作（要到达那里，请转到工具 -> 帐户设置 -> 统计信息 -> 上传 -> 详细信息）。请注意，在上传日志中有一个仅显示错误或所有上传的切换。

现在讨论如何设置发布请求的实际“正文”的实际答案。实际格式应该是我发布的第一个格式：

```
SMResponse response = builder.post(SMResponse.class, Files.readAllBytes(image.toPath())); 
```

所以要么我搞砸了，并认为它不起作用，当时 smugmug 的结尾有问题，或者我的代码中有其他错误，在我尝试修复的过程中得到了修复这个非问题。

# java - 使用 PHP 从 Java 连接到 MySQL

> ID：13506363
> 
> 赞同：3
> 
> 时间：2012-11-22T05:25:17.793
> 
> 标签：java, php, mysql

我在 Java、PHP 和 MySQL 之间有一个奇怪的连接问题。

我无法通过 Java 直接访问网络服务器上的 MySQL 数据库。因此，我将机制转换为运行 PHP 脚本，该脚本为我完成这项工作并将结果返回给我的 Java 应用程序。

对于大多数查询来说，它工作得很好。但是当查询在查询中包含字符字段时，我没有得到预期的结果。

我包含 PHP 和 Java 代码片段以供参考。

请找到我做错的地方...

服务器上的 PHP 脚本...

```
<?php
$query=$_POST["query"];
echo" Query = ".$query."\n";
if($query){
$link=mysql_connect("mysql2.000webhost.com","a7946109_other","mypassword");
if($link){
mysql_select_db("a7946109_other");
$result=mysql_query($query);
if($result){
while($row=mysql_fetch_row($result)){ // for each row in results
foreach($row as $value){                           // for each column in row
echo "\t".$value;
}
echo"\n";
}
}
}else{
echo " MySQL connect failed ! \n";
}
}else{
echo " No Query ! \n";
}
exit();  // exit without auto_append_file
?> 
```

Java程序...

```
import javax.swing.*;
import java.awt.*;
import java.io.*;
import java.net.*;
import java.applet.*;
import java.security.*;

public class MySQL_POST {
    public static void main(String r[]){
    HttpURLConnection conn=null;
    try{
    URL url=new URL("mywebsite.com/postdb.php");
    String agent="Applet";
    String query="query=" + r[0];
    String type="application/x-www-form-urlencoded";
    conn=(HttpURLConnection)url.openConnection();
    conn.setDoInput(true);
    conn.setDoOutput(true);
    conn.setRequestMethod("POST");
    conn.setRequestProperty( "User-Agent", agent );
    conn.setRequestProperty( "Content-Type", type );
    conn.setRequestProperty( "Content-Length", ""+query.length());

    OutputStream out=conn.getOutputStream();
    out.write(query.getBytes());
    BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    String inputLine;
    while((inputLine=in.readLine())!=null){
        System.out.print(inputLine+"\n");
    };
    in.close();
    int rc = conn.getResponseCode();
    System.out.print("Response Code = "+rc+"\n");
    String rm=conn.getResponseMessage();
    System.out.print("Response Message = "+rm+"\n");
    }catch(Exception e){
    e.printStackTrace();
    }finally{
    conn.disconnect();
    }
    }

    } 
```

我有一个名为 TEST 的表，其中包含字段 SID INT(3)、SNAME VARCHAR(20)、SLNAME VARCHAR(20)

它在表中有两个条目。

当我使用 Java 执行以下查询时，我得到不同类型的输出，如下所示。

```
> java MYSQL_POST "SELECT * FROM TEST"

 Query = SELECT * FROM TEST
 1 Test1 Test1L
 2 Test2 Test2L
Response Code = 200
Response Message = OK 
```

这是我所期望的。

```
> java MYSQL_POST "SELECT SNAME FROM TEST WHERE SID = 1"

 Query = SELECT SNAME FROM TEST WHERE SID = 1
 Test1
Response Code = 200
Response Message = OK 
```

这也符合我的预期。

奇怪的来了。

```
> java MYSQL_POST "SELECT SID FROM TEST WHERE SNAME = 'Test1'"

  Query = SELECT SID FROM TEST WHERE SNAME = \'Test1\'
 Response Code = 200
 Response Message = OK 
```

这不会产生任何结果，正如预期的那样`1`

查询，涉及类似`SNAME = 'Test1'`或任何其他字符或不工作的字符。除了这些查询，其他都很好。

请任何人帮助我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T05:48:49.657

运行 PHP 脚本的服务器开启了[魔术引号](http://php.net/manual/en/security.magicquotes.php)设置。这会使用反斜杠自动转义来自 POST/GET/etc 的传入数据中的引号。不推荐使用魔术引号，它们自 PHP 5.4.0 起已被弃用。[禁用它们](http://www.php.net/manual/en/security.magicquotes.disabling.php)并为您的代码添加适当的卫生 - 直接从外部输入执行查询是一个巨大的安全风险。

# webserver - php邮件去收件人垃圾邮件/垃圾文件夹

> ID：13506366
> 
> 赞同：4
> 
> 时间：2012-11-22T05:25:52.913
> 
> 标签：webserver, sendmail, spam, php

我正在为我的大学网站工作。我写了一个 php 脚本，使用`php mail function`. 但问题是，我发送的所有电子邮件都进入了收件人的垃圾邮件/垃圾文件夹。

**为了解决它**：

我尝试了[stackoverflow](http://stackoverflow.com)和[serverfault](http://serverfault.com)网站中类似问题的所有步骤和答案，例如：*正确的标题*准确的名称等，但问题仍未解决。

这是发送电子邮件的 php 代码：

```
<?php
$from_address="webmaster@".$_SERVER['SERVER_NAME'];
$from_name="webmaster";
$headers = "MIME-Version: 1.0\r\n"
  ."Content-Type: text/plain; charset=utf-8\r\n"
  ."Content-Transfer-Encoding: 8bit\r\n"
  ."From: =?UTF-8?B?". base64_encode($from_name) ."?= <$from_address>\r\n"
  ."X-Mailer: PHP/". phpversion();
$subject="Web Mail Testing";
$body="This is test Message";
$to="riteshkumargupta1990@gmail.com";
mail($to, $subject, $body, $headers, "-fwebmaster@{$_SERVER['SERVER_NAME']}");
echo "The Mail is  SuccessFully Sent to :".$to;
?> 
```

我还附上了原始电子邮件（我在我的 gmail 帐户“riteshkumargupta1990@gmail.com”中收到的）

```
Delivered-To: riteshkumargupta1990@gmail.com
Received: by 10.204.8.210 with SMTP id i18csp146000bki;
        Wed, 21 Nov 2012 20:58:12 -0800 (PST)
Received: by 10.68.219.164 with SMTP id pp4mr1119127pbc.72.1353560291776;
        Wed, 21 Nov 2012 20:58:11 -0800 (PST)
Return-Path: <webmaster@nitw.ac.in>
Received: from www.nitw.ac.in (www.nitw.ac.in. [218.248.13.200])
        by mx.google.com with ESMTPS id sh10si3456960pbb.293.2012.11.21.20.58.10
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 21 Nov 2012 20:58:11 -0800 (PST)
Received-SPF: pass (google.com: best guess record for domain of webmaster@nitw.ac.in designates 218.248.13.200 as permitted sender) client-ip=218.248.13.200;
Authentication-Results: mx.google.com; spf=pass (google.com: best guess record for domain of webmaster@nitw.ac.in designates 218.248.13.200 as permitted sender) smtp.mail=webmaster@nitw.ac.in
Received: from www.nitw.ac.in (localhost.localdomain [127.0.0.1])
    by www.nitw.ac.in (8.13.8/8.13.8) with ESMTP id qAM50M0h016190
    for <riteshkumargupta1990@gmail.com>; Thu, 22 Nov 2012 10:30:23 +0530
Received: (from nobody@localhost)
    by www.nitw.ac.in (8.13.8/8.13.8/Submit) id qAM50McG016189;
    Thu, 22 Nov 2012 10:30:22 +0530
Date: Thu, 22 Nov 2012 10:30:22 +0530
Message-Id: <201211220500.qAM50McG016189@www.nitw.ac.in>
X-Authentication-Warning: www.nitw.ac.in: nobody set sender to webmaster@nitw.ac.in using -f
To: riteshkumargupta1990@gmail.com
Subject: Web Mail Testing
X-PHP-Originating-Script: 0:mailer.php
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit
From: =?UTF-8?B?d2VibWFzdGVy?= <webmaster@nitw.ac.in>
X-Mailer: PHP/5.3.5

This is test Message 
```

此外，在谷歌搜索时，我发现此类问题的不常见原因是**`server Blacklisting`**.

然后我使用以下工具对其进行测试：[http ://www.mxtoolbox.com/SuperTool.aspx?action=mx%3anitw.ac.in#](http://www.mxtoolbox.com/SuperTool.aspx?action=mx%3anitw.ac.in#)

当上述工具测试发现我的服务器在黑名单中时，我感到震惊。这是怎么回事？因为我上面附上的原始邮件说“：**`Received-SPF: pass (google.com: best guess record for domain of webmaster@nitw.ac.in designates 218.248.13.200 as permitted sender)`**

另外，如果我的服务器被列入黑名单，那么如何找到黑名单的原因以及如何解决？

**UPD：** 来自**影子**评论：“X-Authentication-Warning: www.nitw.ac.in: 没有人使用 -f 将发件人设置为 webmaster@nitw.ac.in”消息可能是原因吗？如果是，我该如何解决？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:41:59.560

设置 SMTP 服务器是一项棘手且乏味的任务，除非您的工作是日复一日地进行。检查您的服务器 SSL 证书是否使用授权的 CA 证书正确签名。有时可能是自己的问题签名证书.,

或者您也可以尝试将 Gmail 作为您的 SMTP 服务器，它可以解决许多问题..，[链接](http://lifehacker.com/111166/how-to-use-gmail-as-your-smtp-server)

# c++ - C++，从 char 数组中提取有符号多位整数

> ID：13506367
> 
> 赞同：0
> 
> 时间：2012-11-22T05:25:55.430
> 
> 标签：c++, arrays, integer, character

（Linux 上的 C++，KitTy）

（家庭作业）

嗨，这里是网站的新手。我正在寻找（如标题所示）从字符数组中提取多位数和一位数整数。

示例输入如下所示：

1234+-5000 + 65 =

数据将存储在一个数组中......

[1][2][3][4][+][-][5][0][0][0][''][+][''][6][5]['' ][ \0 ]......[MAX_STR_LEN]

输出需要是 1234、-5000 和 5 的总和。要考虑的事项是：

1.  我必须创建用于处理信息的任何辅助函数。
2.  这将在稍后转换为 Motorola 68k ASM 语言（手动）。

有什么建议么？非常感谢！

更新：解决了！感谢大家！我听了医生的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:55:44.463

我会做两个功能。

a) 一种将 char 数组分成几个 char[] 的方法，每个 char[] 只有一个数字。应该是直截了当的，只需遍历数组，当你找到一个数字开始复制时，当你找到一个分隔标记停止（即 + 或 - 或''）并跳到下一个。

b) 然后是第二个函数，它采用一个数字的 ascii 表示的 char 数组并将其转换为 int。容易吧？所以对于长度为 3 的 char[] 例如 char[2] + char[1] * 10 + char[2] * 100; （这里假设 ascii '1' 的 int 为 1，'2' = 2 - 如果不做一个查找表进行转换）

如果位置 0 有“-”字符，也有一个 if 语句使其为负数...

然后添加它们。完毕。

# python - Python 列表重新排序，还记得原来的顺序吗？

> ID：13506370
> 
> 赞同：0
> 
> 时间：2012-11-22T05:26:46.017
> 
> 标签：python, list, python-3.x, probability, bayesian

我正在做一个贝叶斯概率项目，我需要根据新信息调整概率。我还没有找到一种有效的方法来做到这一点。我要做的是从不同场景的等概率列表开始。前任。有 6 个人：E、T、M、Q、L 和 Z，他们各自的初始被选中概率表示为

```
myList=[.1667, .1667, .1667, .1667, .1667, .1667] 
```

新信息显示，按字母顺序排在前三分之一的人共有 70% 的机会被选中。制作了一个新列表，按名称的字母顺序（E、L、M、Q、T、Z）排序，其中仅包含新信息。(.7/.333=2.33, .3/.667=.45)

```
 newList=[2.33, 2.33, .45, .45, .45, .45) 
```

我需要一种方法来将 newList 与 myList 相同，这样我就可以在列表理解中乘以正确的值，并达到调整概率。拥有一个一致的顺序很重要，因为该过程将重复多次，每次都有不同的标准（元音，最接近 P 等），并且在一个包含大约 1000 个项目的列表中。每个 newList 可以改为一个 newDictionary，然后一旦创建了调整条件，就可以将它们排序到一个列表中，但是转换多个字典似乎效率低下。是吗？有没有一种简单的方法可以做到这一点我完全错过了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:00:08.697

对于它的价值，您可以为 Python 中的方法的速度做的最好的事情是使用 numpy 而不是标准类型（因此您将使用预编译的 C 代码来执行算术运算）。这将导致速度急剧增加。无论如何，Numpy 数组都有固定的顺序，语法更直接地适用于数学运算。您只需要考虑如何将操作表示为矩阵操作。例如你的例子：

```
myList = np.ones(6) / 6.
newInfo = np.array( [.7/2, .7/2, .3/4, .3/4, .3/4, .3/4] )
result = myList * newInfo 
```

由于两个向量都有单位和，因此无需标准化（我不确定您在示例中做了什么，我承认，所以如果我错过了一个微妙之处，请告诉我），但如果您确实需要它是微不足道的：

```
result /= np.sum(result) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:27:55.083

尝试将您的信息存储为元组列表：

```
bayesList = [('E', 0.1667), ('M', 0.1667), ...] 
```

你的列表理解可以是

```
newBayes = [(person, prob * normalizeFactor) for person, prob in bayesList] 
```

在设置列表理解之前计算了您的 normalizeFactor

# c++ - 指向数组的指针在 STL 与常规 for 循环中不同

> ID：13506373
> 
> 赞同：1
> 
> 时间：2012-11-22T05:27:04.220
> 
> 标签：c++, arrays, pointers, for-loop, foreach

我有两个循环一个接一个地遍历大约 20 个布尔值的数组，并打印每个布尔值的内存地址：

```
for (int i = 0; i < 20; ++i) {
    printf("%p\n", &_boolArray[i]);
}
for (bool b : _boolArray) {
    b = true;
    printf("%p\n", &b);
} 
```

我希望两个数组的输出完全相同。我得到的是一些不同的东西：

```
0x102eeefb0
0x102eeefb1
0x102eeefb2
0x102eeefb3
0x102eeefb4
0x102eeefb5
...
0x7fff5ce8b9bf
0x7fff5ce8b9bf
0x7fff5ce8b9bf
0x7fff5ce8b9bf
0x7fff5ce8b9bf 
```

我知道有更好的方法来填充数组（std::fill for one），但我仍然想知道为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:42:08.993

您每次都在第二个 for 循环中制作 b 的副本，应该通过引用传递

```
 for (bool &b : _boolArray) {
       //  ^^^ reference to original element
    b = true;
    printf("%p\n", &b);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T05:47:08.447

第二个 for 循环将数组值复制到位于另一个位置（常量）的 b，这就是您的输出看起来像这样的原因

你想做对

```
for(bool &b:_boolArray)
{
  printf("%p\n",b);
} 
```

# python - 谷歌应用引擎 | 蟒蛇 | 应用程序.YAML

> ID：13506375
> 
> 赞同：6
> 
> 时间：2012-11-22T05:27:04.877
> 
> 标签：python, google-app-engine, yaml, development-environment, app.yaml

我是 Google App Engine 以及 Python 网络开发的初学者。在制作了一个基于 Python 的小型应用程序后，过去 6 天我一直在尝试将其上传到 GAE。下面的“app.yaml”文件给出了之后给出的错误。

# APP.YAML（更新）

```
application: web2py
version: 1
runtime: python27
api_version: 1
threadsafe: false

default_expiration: "24h"

handlers: 
- url: /(?P<a>.+?)/static/(?P<b>.+)
  static_files: applications/\1/static/\2
  upload: applications/(.+?)/static/(.+)
  secure: optional

- url: /favicon.ico
  static_files: applications/welcome/static/favicon.ico
  upload: applications/welcome/static/favicon.ico

- url: /robots.txt
  static_files: applications/welcome/static/robots.txt
  upload: applications/welcome/static/robots.txt

- url: .*
#  script: gaehandler.py         # CGI
#  script: web2py.app # ?
  script: gaehandler.wsgiapp    # WSGI (Python 2.7 only)
  secure: optional

admin_console:
  pages:
  - name: Appstats
    url: /_ah/stats

skip_files: |
 ^(.*/)?(
 (app\.yaml)|
 (app\.yml)|
 (index\.yaml)|
 (index\.yml)|
 (#.*#)|
 (.*~)|
 (.*\.py[co])|
 (.*/RCS/.*)|
 (\..*)|
 (applications/(admin|examples)/.*)|
 ((admin|examples)\.(w2p|tar))|
 (applications/.*?/(cron|databases|errors|cache|sessions)/.*)|
 ((logs|scripts)/.*)|
 (anyserver\.py)|
 (web2py\.py)|
 ((cgi|fcgi|modpython|wsgi)handler\.py)|
 (epydoc\.(conf|css))|
 (httpserver\.log)|
 (logging\.example\.conf)|
 (route[rs]\.example\.py)|
 (setup_(app|exe)\.py)|
 (splashlogo\.gif)|
 (parameters_\d+\.py)|
 (options_std.py)|
 (gluon/tests/.*)|
 (gluon/(rocket|winservice)\.py)|
 (contrib/(gateways|markdown|memcache|pymysql)/.*)|
 (contrib/(populate|taskbar_widget)\.py)|
 (google_appengine/.*)|
 (.*\.(bak|orig))|
 )$

builtins:
- remote_api: on
- appstats: on
- admin_redirect: on
- deferred: on 
```

* * *

使用 Python 2.7.3 时的 Google App Engine 出现以下错误

# GAE 上的 YAML 错误

```
*** Running dev_appserver with the following flags:
    --admin_console_server= --port=8080 --use_sqlite
Python command: /usr/local/bin/python2.7
ERROR    2012-11-22 05:24:13,142 dev_appserver_main.py:626] Fatal error when loading application configuration:
mapping values are not allowed here
  in "/Applications/+++WWW+++/GAE/gae3web2py/app.yaml", line 9, column 9 
```

* * *

如果有人能帮助我，我将非常感激，尤其是在美国“感恩节”这一天！;-)

* * *

# 更新

“app.yaml”文件已按照建议使用间距进行了更新。但它仍然给出同样的错误。

我什至在这里尝试过，它给出了同样的错误： [Link](http://yaml-online-parser.appspot.com/) > [http://yaml-online-parser.appspot.com/](http://yaml-online-parser.appspot.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:02:17.653

这是您的`YAML`语法问题。如果您对语法感到困惑，[可以在此处找到规范。](http://www.yaml.org/spec/1.2/spec.html).

从第 2.1 节 - 集合：

> YAML 的块集合使用缩进来表示范围，并在每个条目自己的行开始。块序列用破折号和空格（“-”）表示每个条目。**映射使用冒号和空格（“：”）来标记每个键：值对。**注释以 octothorpe 开头（也称为“hash”、“sharp”、“pound”或“number sign” - “#”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T05:38:00.397

在配置您的 时`app.yaml`，您需要将所有参数与其值用空格分隔（`application:web2py`应该如此`application: web2py`，等等）。尝试在冒号后面加一个空格（特别是在这个后面：）`url:/(?P<a>.+?)/static/(?P<b>.+)`，看看是否能解决错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T21:20:27.517

尝试在这对我有用之后删除所有后续空格，尽管我还没有纠正`:`
一些其他错误。`app.yaml`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-24T12:14:04.820

我不确定 Google GAE 使用什么来解释 YAML 文件，但对于 PyYAML，该文件是不可接受的，`\`因为`static_files`.

这也恰好是文件的第 9 行（省略空行）。所以我会从逃避这些价值观开始。

请注意， http: [//yaml-online-parser.appspot.com/](http://yaml-online-parser.appspot.com/)`\1`现在只是解析您的示例，但在将数据从 textarea 传递到 PyYAML 之前，它似乎默默地将 '\2' 转换为 '\2'。

# c++ - 使用此关键字在结构中引用类时遇到问题

> ID：13506377
> 
> 赞同：1
> 
> 时间：2012-11-22T05:27:34.413
> 
> 标签：c++, winapi, pointers, struct

头文件：

```
// Free function to use in thread
unsigned int __stdcall WorkerFunction(void *);

class MyClass {
    public:
        int temp;
        void StartThread();
}

typedef struct {
    MyClass * cls;
} DATA; 
```

CPP类：

```
void MyClass::StartThread() {
    temp = 1234;
    DATA data = {this};

    HANDLE hThread = (HANDLE) _beginthreadex(0, 0, &WorkerFunction, &data, 0, 0);

    // Commented out for now while I address the current problem
    //CloseHandle(hThread);
}

unsigned int __stdcall WorkerFunction(void * param0) {
    MessageBox(NULL, "WorkerFunction()", "Alert", MB_OK);
    DATA * data = (DATA *) param0;
    MyClass* cls0 = data->cls;

    // Crashes when reference to cls0 is attempted.
    char buf[5];
    snprintf(buf, 5, "%i", cls0 ->temp);
    MessageBox(NULL, buf, "Alert", MB_OK);
} 
```

我在这里遇到了一个简单的问题，我无法解决。

*   我有一个线程的参数，它传递一个包含一个类的结构。
*   我实例化结构，`this`然后在线程启动时传递它
*   我尝试在工作函数中取消引用（？）它。
*   至此，一切编译OK。
*   当我添加行以访问类中的某些内容时，应用程序崩溃。

我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:32:48.033

您正在传递一个本地堆栈变量，该变量在返回时超出范围`StartThread()`。因此，您正在引用不再属于您的堆栈空间。

```
void MyClass::StartThread() {
    temp = 1234;
    DATA data = {this}; // << LOCAL VARIABLE OUT OF SCOPE ON FUNCTION EXIT

    HANDLE hThread = (HANDLE) _beginthreadex(0, 0, &WorkerFunction, &data, 0, 0);

    // Commented out for now while I address the current problem
    //CloseHandle(hThread);
} 
```

动态分配数据，或者更好的是，使数据成为线程数据的成员并作为线程数据`MyClass`传递。`this`在您的情况下，您只是通过结构传递 *this，所以只需将其作为参数传递

```
void MyClass::StartThread() {
    temp = 1234;

    HANDLE hThread = (HANDLE) _beginthreadex(0, 0, &WorkerFunction, this, 0, 0);

    // Commented out for now while I address the current problem
    //CloseHandle(hThread);
} 
```

在你的线程过程中：

```
unsigned int __stdcall WorkerFunction(void * param0) {
    MessageBox(NULL, "WorkerFunction()", "Alert", MB_OK);
    MyClass* cls0 = static_cast<MyClass*>(param0);

   etc...
} 
```

无论您传递给线程过程，它都必须在所需的持续时间内具有有效的生命周期。由线程。要么确保通过将动态分配的所有权传递给线程，让它*执行*删除，要么传递一个已知的指针，在线程过程中的使用生命周期内保持确定状态。它似乎`this`满足了后者，所以你应该很高兴。

# ssrs-2008 - 以不同的值定位不同的服务器

> ID：13506385
> 
> 赞同：2
> 
> 时间：2012-11-22T05:28:23.083
> 
> 标签：ssrs-2008, reporting-services, bids

我有一个在 BIDS 中开发的 SSRS 项目。这个项目被上传到两个不同的 SSRS 服务器，针对两个不同的环境。

大多数报告内容是相同的，但我必须处理两个环境之间的一些差异：

1.  SSRS 服务器 URL 不同
2.  数据源不同
3.  一些报告必须有不同的参数默认值
4.  SQL 查询中的几个数据集必须具有不同的值

对于#1 --> 我使用两种不同的 Visual Studio / BIDS 发布模式和不同的配置。

对于#2 --> 数据源配置自初始配置以来是相当静态的，我已设置报告以防止覆盖数据源 --> 这种解决方法是可以接受的。

#3 和 #4 有什么想法吗？理想情况下，它应该根据所选的 BIDS 发布模式自动更改为正确的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:37:22.987

**第 3 项**很简单：一旦部署，参数和相应的设置不会被重新部署报告覆盖。这是 SSRS 的指定行为。有关更多详细信息，请参见例如[我](https://stackoverflow.com/a/12901099/419956)对有关该行为的问题的回答。更改参数及其设置不是通过重新部署，而是通过报表服务器的 Web 前端。

在**第 4 项**中，我不完全确定“SQL 查询中的不同值”是什么意思，但是对于每个环境自定义 SQL 查询，有多种选择：

*   使用`ReportServerUrl` [global](http://msdn.microsoft.com/en-us/library/dd255216.aspx)，也许将其注入查询中并使查询响应不同的值。
*   如果您的实际数据库也不同，您还可以创建从数据集调用的视图或存储过程，并使视图/过程在两个环境中的行为不同。
*   使用环境之间不同的隐藏参数（另请参阅我对第 3 点的评论）并在 SQL 查询中使用它。

# node.js - 通过幻象运行茉莉花规格，得到“找不到变量：描述”

> ID：13506393
> 
> 赞同：6
> 
> 时间：2012-11-22T05:29:18.933
> 
> 标签：node.js, jasmine, phantomjs

我在centOS5 linux服务器上运行它作为CI作业时遇到了同样的问题，使用phantomJS 1.7（我自己编译）

```
Running "jasmine" task 
Testing jasmine specs via phantom 
...  
[D] ["phantomjs","onResourceReceived","GET
http://127.0.0.1:8888/test/spec/CommonTest.js"]
[D] ["phantomjs","onError","ReferenceError: Can't find variable: describe",        [{"file":"http://127.0.0.1:8888/test/spec/CommonTest.js","line":31,"function":""}]]     
ReferenceError: Can't find variable: describe 
... 
```

规范在其他机器上成功运行，如 WinXP 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:06:20.913

最后，它是由这个引起的：我为“node_modules”创建了一个符号链接以重用公共模块，但它阻止了grunt-jasmine-runner 获取某事。（还不确定）。要解决它，需要直接复制项目文件夹下的“node_modules”文件。

# c# - 我怎么知道任何操作正在对特定数据执行。

> ID：13506397
> 
> 赞同：-2
> 
> 时间：2012-11-22T05:29:42.187
> 
> 标签：c#, asp.net, sql-server-2008, tsql

我有一个问题，我从我的订单表中获取数据意味着用户可以编辑订单和价格。但是今天我想我怎么能知道任何其他用户打开了特定订单或其他用户正在编辑该特定订单。意味着我想限制用户在编辑该特定订单时编辑该特定订单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:13:08.037

您可以在设置的记录中添加一个“锁定”字段，当用户按下某个“编辑”按钮并在他保存时释放。但如前所述，这可能并不总是最好的解决方案。不要忘记您还必须处理废弃的锁等。

更好的解决方案（恕我直言）是在任何用户保存更改之前检查记录是否已更改，因为它是由该用户“加载”的。逐个字段比较，检查“last_changed”字段，比较哈希或您喜欢的任何内容。如果您的检查显示记录已更改，您可以提示用户执行所需的操作。就像丢弃他的更改，覆盖以前的更改或合并更改（如果可能）。

# javascript - 为什么在函数调用中捕获对象的值？

> ID：13506398
> 
> 赞同：5
> 
> 时间：2012-11-22T05:29:43.323
> 
> 标签：javascript

此代码应该在您单击它时弹出带有图像编号的警报：

```
for(var i=0; i<10; i++) {
    $("#img" + i).click(
        function () { alert(i); }
    );
} 
```

[您可以在http://jsfiddle.net/upFaJ/](http://jsfiddle.net/upFaJ/)看到它不起作用。我知道这是因为所有的 click-handler 闭包都引用同一个 object `i`，所以每个处理程序在触发时都会弹出“10”。

但是，当我这样做时，它工作正常：

```
for(var i=0; i<10; i++) {
    (function (i2) {
        $("#img" + i2).click(
            function () { alert(i2); }
        );
    })(i);
} 
```

[你可以在http://jsfiddle.net/v4sSD/](http://jsfiddle.net/v4sSD/)看到它的工作。

为什么它有效？`i`内存中仍然只有一个对象，对吗？对象总是通过引用传递，而不是复制，所以自执行函数调用应该没有区别。两个代码片段的输出应该是相同的。那么为什么`i`对象被复制了 10 次呢？为什么它有效？

我认为这个版本[不起作用](http://jsfiddle.net/vfwnU/)很有趣：

```
for(var i=0; i<10; i++) {
    (function () {
        $("#img" + i).click(
            function () { alert(i); }
        );
    })();
} 
```

似乎将对象作为函数参数传递会产生重大影响。

* * *

编辑：好的，所以前面的示例可以`i`通过按值传递给函数调用的原语 () 来解释。但是这个使用真实物体的例子呢？

```
for(var i=0; i<5; i++) {
    var toggler = $("<img/>", { "src": "http://www.famfamfam.com/lab/icons/silk/icons/cross.png" });
    toggler.click(function () { toggler.attr("src", "http://www.famfamfam.com/lab/icons/silk/icons/tick.png"); });
    $("#container").append(toggler);
} 
```

不工作：http: [//jsfiddle.net/Zpwku/](http://jsfiddle.net/Zpwku/)

```
for(var i=0; i<5; i++) {
    var toggler = $("<img/>", { "src": "http://www.famfamfam.com/lab/icons/silk/icons/cross.png" });
    (function (t) {
        t.click(function () { t.attr("src", "http://www.famfamfam.com/lab/icons/silk/icons/tick.png"); });
        $("#container").append(t);
    })(toggler);
} 
```

工作：http: [//jsfiddle.net/YLSn6/](http://jsfiddle.net/YLSn6/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T08:37:53.207

大多数答案都是正确的，因为将对象作为函数参数传递会破坏闭包，从而允许我们从循环中将事物分配给函数。但我想指出**为什么**会这样，而且这不仅仅是闭包的特例。

你看，javascript 将参数传递给函数的方式与其他语言有点不同。首先，根据天气，它似乎有两种方法，它是原始值还是对象。对于原始值，它*似乎*通过值传递，而对于对象，它*似乎*通过引用传递。

## javascript 如何传递函数参数

实际上，对 javascript 所做的真正解释解释了这两种情况，以及它为什么会破坏闭包，只使用一种机制。

javascript 所做的实际上是通过**引用的副本**传递参数。也就是说，它会创建另一个对参数的引用并将该新引用传递给函数。

## 通过价值传递？

假设 javascript 中的所有变量都是引用。在其他语言中，当我们说变量是引用时，我们希望它的行为如下：

```
var i = 1;
function increment (n) { n = n+1 };
increment(i); // we would expect i to be 2 if i is a reference 
```

但在 javascript 中，情况并非如此：

```
console.log(i); // i is still 1 
```

这是一个经典的价值传递，不是吗？

## 通过引用传递？

但是等等，对于对象，情况就不同了：

```
var o = {a:1,b:2}
function foo (x) {
    x.c = 3;
}
foo(o); 
```

如果参数是按值传递的，我们希望`o`对象保持不变，但是：

```
console.log(o); // outputs {a:1,b:2,c:3} 
```

那是经典的引用传递。所以我们有两种行为，取决于我们传递原始类型或对象的天气。

## 等等，什么？

但是等一下，看看这个：

```
var o = {a:1,b:2,c:3}
function bar (x) {
    x = {a:2,b:4,c:6}
}
bar(o); 
```

现在看看会发生什么：

```
console.log(o); // outputs {a:1,b:2,c:3} 
```

什么！这不是通过引用传递！数值不变！

这就是为什么我称它为**按副本传递的**原因。如果我们这样想，一切都是有道理的。我们不需要将原语视为在传递给函数时具有特殊行为，因为对象的行为方式相同。如果我们尝试修改变量指向的对象，那么它就像通过引用传递一样工作，但是如果我们尝试修改引用本身，那么它就像按值传递一样工作。

这也解释了为什么通过将变量作为函数参数传递会破坏闭包。因为函数调用会创建另一个像原始变量一样不受闭包约束的引用。

## 后记：我撒谎了

在我们结束之前还有一件事。我之前说过，这统一了原始类型和对象的行为。实际上不，原始类型仍然不同：

```
var i = 1;
function bat (n) { n.hello = 'world' };
bat(i);
console.log(i.hello); // undefined, i is unchanged 
```

我放弃。这没有任何意义。就是这样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T05:43:48.450

这是因为您正在*调用一个函数*，并为其传递一个*值*。

```
for (var i = 0; i < 10; i++) {
    alert(i);
} 
```

您希望这会提醒不同的值，对吗？因为您正在传递to的*当前值`i`*`alert`。

```
function attachClick(val) {
    $("#img" + val).click(
        function () { alert(val); }
    );
} 
```

有了这个函数，你会期望它会提醒`val`传递给它的任何东西，对吧？在循环中调用它时也有效：

```
for (var i = 0; i < 10; i++) {
    attachClick(i);
} 
```

这：

```
for (var i = 0; i < 10; i++) {
    (function (val) {
        $("#img" + val).click(
            function () { alert(val); }
        );
    })(i);
} 
```

只是上述的内联声明。您正在声明一个具有与上述相同特征的匿名函数`attachClick`并立即调用它。通过*函数参数*传递*值*的行为会破坏对变量的任何引用。*`i`*

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T05:59:35.403

赞成 deceze 的回答，但我想我会尝试一个更简单的解释。闭包起作用的原因是 javascript 中的变量是*函数作用域*的。闭包创建了一个新作用域，通过将`i`in 的值作为参数传递，您`i`在新作用域中定义了一个局部变量。如果没有闭包，您定义的所有点击处理程序都在同一范围内，使用相同的`i`. 您的最后一个代码片段*不起作用*的原因是因为没有 local `i`，所以所有点击处理程序都在寻找最近`i`定义的父上下文。

我认为另一件可能让你感到困惑的是这条评论

> 对象总是通过引用传递，而不是复制，所以自执行函数调用应该没有区别。

这适用于对象，但不适用于*原始*值（例如数字）。这就是为什么`i`可以定义一个新的本地。为了演示，如果你做了一些奇怪的事情，比如将 i 的值包装在一个数组中，闭包将*不起作用*，因为数组是通过引用传递的。

```
// doesn't work
for(var i=[0]; i[0]<10; i[0]++) {
    (function (i2) {
        $("#img" + i2[0]).click(
            function () { alert(i2[0]); }
        );
    })(i);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T05:43:05.680

在第一个示例中，只有一个值 of `i`，它是`for`循环中使用的值。这样，所有事件处理程序都将显示循环结束`i`时的值`for`，而不是所需的值。

在第二个示例中，`i`安装事件处理程序时的值被复制到`i2`函数参数，并且对于函数的每次调用以及每个事件处理程序都有一个单独的副本。

所以这：

```
(function (i2) {
    $("#img" + i2).click(
        function () { alert(i2); }
    );
 })(i); 
```

为函数的每次单独调用创建一个新变量`i2`，该变量具有自己的值。`i2`由于 javascript 中的闭包，每个单独的事件处理程序都会保留每个单独的副本- 从而解决您的问题。

在第三个示例中，没有创建新副本（它们都在循环`i`中引用相同`i`的内容），因此它的工作方式与第一个示例相同。`for`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T05:43:56.943

代码 1 和代码 3 不起作用，因为`i`它是一个变量，并且在每个循环中都会更改值。在循环结束时`10`将分配给`i`.

为了更清楚，看看这个例子，

```
for(var i=0; i<10; i++) {

}

alert(i) 
```

[http://jsfiddle.net/muthkum/t4Ur5/](http://jsfiddle.net/muthkum/t4Ur5/)

你可以看到我`alert`在循环之后放了一个，它会显示带有 value 的显示`alert`框`10`。

这就是代码 1 和代码 3 发生的情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T05:47:09.377

运行下一个示例：

```
for(var i=0; i<10; i++) {
     $("#img" + i).click(
          function () { alert(i); }
     );
}

i++; 
```

您现在会看到，`11`正在收到警报。因此，您需要`i`通过将其作为函数参数发送它的值来避免对 的引用。您已经找到了解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-07T02:33:16.347

其他答案没有提到的一件事是为什么我在问题中给出的这个例子不起作用：

```
for(var i=0; i<5; i++) {
    var toggler = $("<img/>", { "src": "http://www.famfamfam.com/lab/icons/silk/icons/cross.png" });
    toggler.click(function () { toggler.attr("src", "http://www.famfamfam.com/lab/icons/silk/icons/tick.png"); });
    $("#container").append(toggler);
} 
```

几个月后回到这个问题，对 JavaScript 有了更好的理解，它不起作用的原因可以理解如下：

1.  `var toggler`声明被提升到函数调用的顶部。所有对的引用`toggler`都指向相同的实际标识符。
2.  匿名函数中引用的闭包与包含 的闭包相同（不是浅拷贝），`toggler`循环的每次迭代都会更新闭包。

#2 相当令人惊讶。这会提醒“5”，例如：

```
var o;
setTimeout(function () { o = {value: 5}; }, 100);
setTimeout(function () { alert(o.value) }, 1000); 
```*

# c++ - 如何管理多个文件、全局变量和定义

> ID：13506405
> 
> 赞同：0
> 
> 时间：2012-11-22T05:30:16.727
> 
> 标签：c++, class, header, include

我有两个班级，班级“实体”和班级“瓷砖”。

类“实体”有一些成员函数使用类型为“tile”的全局数组。它还使用一些定义的数字。

类“tile”包含一个成员变量，它是指向类型“entity”的指针。

我想将这些类分成各种 .h 文件。我将尝试对其进行重组，但我确实想知道是否有可能做到这一点。

因此，再次为清楚起见：

“实体”使用“平铺”类型的全局二维数组

“瓷砖”用途

有没有办法把它分成三个 .h 文件（每个类一个，一个用于所有全局变量和定义）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T05:38:43.720

我不明白为什么你需要三个*.h*文件。只需为每个类创建一个单元，并将全局放入*Entity*的模块中（我不认为您可以避免全局）。

*实体.h*

```
class Entity
{
<...>
}; 
```

*实体.cpp*

```
#include "Entity.h"
#include "Tile.h"

Tile array[100];//here's your array 
```

*瓷砖.h*

```
#include "Entity.h"

class Tile
{
    <...>
    Entity * ptr;//here's your pointer
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T05:46:40.330

我认为您只需要对实体类进行前向声明吗？

瓦片.h：

```
class Entity;

class Tile {
     Entity *entity;
      ...
} 
```

实体.h：

```
//#include "tile.h" - add this back if you need to refer to tile in Entity defn

class Entity {
    ...
} 
```

实体.cpp

```
#include "entity.h"
// Remove the following or put in proper include protection if you uncomment the 
// include above
#include "tile.h"

Tile gbl[10][10]; 
```

# ruby-on-rails - 未定义的方法`before_create'

> ID：13506410
> 
> 赞同：2
> 
> 时间：2012-11-22T05:31:33.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有一个像这样链接的用户模型和公司模型：

```
class User < ActiveRecord::Base
  belongs_to :company
  accepts_nested_attributes_for :company
end

class Company < ActiveRecord::Base
   has_many :users  
 end 
```

在登录页面上，我希望用户设置他的信息（邮件、密码）和他的公司信息（几个字段）。所以我的表格是这样的：

```
<%= simple_form_for @user, :html => { :class => 'form-horizontal' } do |f| %>

        <%= f.input :email, :required => true, :placeholder => "user@domain.com" %>
        <%= f.input :password, :required => true %>
        <%= f.input :password_confirmation, :required => true %>

<h2>Company info</h2>
<%= simple_fields_for :company, :html => { :class => 'form-horizontal' } do |fa| %>
    <%= fa.input :name %>
    <%= fa.input :url %>
    <%= fa.input :description, :as => :text, :input_html => { :cols => 60, :rows => 3  } %>
    <%= fa.input :logo %>
    <%= fa.input :industry %>
    <%= fa.input :headquarters %>
<% end %>

        <div class="form-actions">
            <%= f.submit nil, :class => 'btn btn-primary' %>
            <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
            root_url, :class => 'btn' %>
        </div>

<% end %> 
```

我的用户模型有一个`company_id:integer`字段。所以从逻辑上讲，当我登录用户时，首先要做的是在用户之前创建公司，然后给用户创建模型适当的`company_id`. 所以我写了这个：

```
class UsersController < ApplicationController
  before_create :create_company

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      redirect_to root_url, :notice => "Registration successful."
    else
      render :action => 'new'
    end
  end

private

  def create_company
    @company = Company.new(params[:company])
    if @company.save
      self.company_id = @company.id
    else
      render :action => 'new'
    end
  end

end 
```

问题是：访问 /users/new 时出现此错误：

```
undefined method `before_create' for UsersController:Class 
```

怎么了？我检查了， before_create 没有被弃用，我在 Rails 3.2.8 中。这可能是我的`create_company`方法很愚蠢，但我不知道为什么......

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:37:33.267

before_create 是属于 ActiveRecord 的钩子方法

before_filter 是属于 Controller 的钩子方法。

所以我建议你在明确哪个是哪个之后重新构建你的代码。^_^

# c# - Kinect 的 SkeletonStream 反馈用户未检测到的 C#

> ID：13506415
> 
> 赞同：1
> 
> 时间：2012-11-22T05:32:07.673
> 
> 标签：c#, kinect, kinect-sdk

我试图让我的 Kinect 的 SkeletonStream 反馈一个数据，告诉我没有检测到任何人。如果检测到我的骨架，我可以获得饲料，但如果那里没有人，我将无法收到任何通知。有没有办法让 kinect 告诉我是否没有捡到骷髅？

```
private void kinect_SkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
    {
        using (SkeletonFrame frame = e.OpenSkeletonFrame())
        {
            if (frame == null)
            {
                return;
            }
            frame.GetSkeletons(ref allSkeletons);
            if (allSkeletons.All(s => s.TrackingState == SkeletonTrackingState.NotTracked))
                return;

            foreach (var skeleton in allSkeletons)
            {
                if (skeleton.TrackingState != SkeletonTrackingState.Tracked)
                {
                    continue;
                }
                if (skeleton.TrackingState == SkeletonTrackingState.NotTracked)
                {

                }
                foreach (Joint joint in skeleton.Joints)
                {
                    if (joint.TrackingState != JointTrackingState.Tracked)
                        continue;

                    if (joint.JointType == JointType.HipCenter)
                    {
                        hipCenter = joint.Position;
                        AdvanceFunction();
                    }

                }
                sdm.Draw(frame.GetSkeletons(), false);
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:04:22.830

没有什么可以简单地告诉您当前没有追踪任何骨骼。您将需要查看骨架框架以确定是否有任何用户。

您的`foreach`循环遍历所有骨架...

```
foreach (var skeleton in allSkeletons)
{
    if (skeleton.TrackingState != SkeletonTrackingState.Tracked)
    {
        continue;
    }

    ....
} 
```

在第一`if`条语句中——如果当前骨架没有被主动跟踪，那么循环将继续移动到下一个骨架。如果找到任何骨架，您将需要添加一个标志。例如，您可以执行类似...

```
bool hasActivePlayer = false;

foreach (var skeleton in allSkeletons)
{
    if (skeleton.TrackingState != SkeletonTrackingState.Tracked)
    {
        continue;
    }

    hasActivePlayer = true;

    ....
}

if (hasActivePlayer == false)
{
    // you aren't tracking anyone, deal with it
} 
```

您可能也有兴趣检查`SkeletonTrackingState.PositionOnly`. 在这种情况下，Kinect 知道有人在那里，但它不会主动跟踪他们的骨骼。`foreach`如果您也想查找它，您可以更新循环中的 ckeck 。

# html - Chrome中的LESS不替换变量

> ID：13506417
> 
> 赞同：3
> 
> 时间：2012-11-22T05:32:26.993
> 
> 标签：html, css, macos, google-chrome, less

我在本地运行 LESS（或尝试）。我正在运行 OSX，但我认为这并不重要。我使用以下内容允许它在本地运行：

```
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome -allow-file-access-from-files 
```

当网站加载时我得到这个：

```
less: parsed file://localhost/Users/dir/Website/ver_2/styles.less successfully. less-1.3.1.min.js:8
less: css for file://localhost/Users/dir/Website/ver_2/styles.less generated in 16ms less-1.3.1.min.js:8
less: css generated in 17ms less-1.3.1.min.js:8 
```

所以看起来它设置正确。当我尝试一个简单的预处理子时，Chrome 会忽略它并在开发人员工具中显示无效的属性值：

```
@color: black;
body > .container{background-color: @color;} 
```

对于如何解决这个问题，有任何的建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:18:23.850

已解决：导入为 . 扩展名（.less 或 .css）似乎是任意的。

# vb.net - VB.Net按钮在IE的不同窗口中打开多个用户并自动登录

> ID：13506424
> 
> 赞同：0
> 
> 时间：2012-11-22T05:33:04.590
> 
> 标签：vb.net

我有一个网站存储了 100 个用户 ....现在我想创建一个带有 100 个按钮的 VB 表单 ....当我点击 button1 时，它会打开 IE，然后自动登录 users1，当我点击 button2 时，它会打开 IE然后以 user2 身份自动登录。user3 直到 user100 相同....单击 vb 表单上的按钮。注意：我已经完成了设置打开 IE 并在每个窗口中以不同用户身份登录，但现在我正在寻找如何在单击表单中的每个按钮时在同一网站中设置不同用户自动登录。

我有更多关于表单的信息......我将使用（100 个按钮点击 = 100 个用户 = 100 个 IE 窗口......）这取决于用户点击他需要登录的按钮......因为我们不知道他想点击什么按钮/用户/时间.....

我真的非常需要你的帮助......在此先感谢。

这是Button_Click的一些代码

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

    Using p As New Process
        p.StartInfo.FileName = "C:\Program Files\Internet Explorer\iexplore.exe"
        p.StartInfo.Arguments = "http://test.com"
        p.Start()
    End Using 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:07:50.883

这是我能想出的解决这个问题的唯一方法。

我的猜测是您的登录名使用的是 POST 变量，这非常标准。

要完成这项工作，您必须允许使用 GET 提供用户名和密码。也就是说，像这样在 url 中发送它们：

[http://test.com/login.php/asp?username=username&password=password](http://test.com/login.php/asp?username=username&password=password)

由于您尚未指定使用 PHP 还是 ASP.NET，我将添加有关如何获取两者值的信息： ASP.NET Request.Querystring("username") PHP $_GET["username"];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:50:23.367

根据评论编辑

你是对的，不可能隔离单独的 webbrowser 控件。我建议您研究一下 WaTin 来控制单独的 IE 实例，或者研究 Awsomium .NET，我相信它允许在 1.7 中进行单独的会话，尽管我还没有测试过。

另请注意，由于默认情况下 IE8 会话 cookie 在实例之间共享，因此您需要使用 -nomerge 标志运行它们。瓦廷支持这一点。

基于您在问题中没有提到这一点，我假设您使用的是 IE7。如果是这种情况，并且此应用程序不打算在其他机器上使用，则应该可以创建一个带有嵌入式网络浏览器控件的单独应用程序，然后从主应用程序启动该应用程序的多个实例，因此您可以添加您自己的沟通机制，但 WaTin 可能是一个更好的主意

旧答案：

很难弄清楚你想做什么，但我猜你想创建一个 winforms 应用程序，让你选择一个用户帐户，然后打开浏览器并使用该帐户登录网站。

基于这个假设，我的建议是有一个按钮，以及选择帐户的某种方式，比如一个组合框和一个网络浏览器控件：

[http://img198.imageshack.us/img198/888/66649645.jpg](http://img198.imageshack.us/img198/888/66649645.jpg)

而不是每个用户帐户 1 个按钮并尝试操作外部浏览器。如果这确实是您想要做的，请发表评论，我将根据需要编辑我的答案，并在您需要时提供起始代码，但如果不真正了解您需要做什么，我就无法做到这一点。

# java - 阔叶或 apache Ofbiz

> ID：13506425
> 
> 赞同：7
> 
> 时间：2012-11-22T05:33:11.500
> 
> 标签：java, content-management-system, e-commerce

JAVA Broadleaf 和 apache ofbiz 哪个电子商务平台更好。如果有比这两个更好的请建议..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:37:09.390

I work for Broadleaf Commerce. One of the key differences is the stack. Broadleaf leverages the Spring framework (e.g. Spring Security, Spring-MVC, and core Spring) along with JPA/Hibernate as the primary underlying architecture.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T06:33:04.320

OfBiz 是一种流行的电子商务工具，设计有供应链管理或基于 ERP 的解决方案的所有集成。我认为阔叶是一个基本的电子商务工具，需要与所有的SCM解决方案集成，当然它很容易与其他工具集成。ofBiz 的 DataFile 工具在数据导入和导出操作方面非常出色。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-07-26T15:42:17.210

有一家公司在一些流行的开源电子商务平台上完成了基准测试，包括他们自己以及 Broadleaf 和 A​​pache OfBiz。我会说值得一试。产生的统计数据非常有趣！无论如何这里是链接，他们的产品是 Avetti Commerce：[http ://www.avetticommerce.com/ecommerce-performance-benchmarking](http://www.avetticommerce.com/ecommerce-performance-benchmarking)

# java - 是否有可移植的 Java

> ID：13506429
> 
> 赞同：-1
> 
> 时间：2012-11-22T05:34:21.663
> 
> 标签：java, portability

我只是想知道是否有人知道便携式 Java IDE/编译器？类似于 iPod 但不是那么先进的东西，可以让您使用和编译 java？只是认为这将是一个很酷的主意：P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:37:18.410

[这就是目的](http://javafiddle.net/)。我们可以编译程序，而无需在我们的机器上安装 Java 编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T05:39:10.070

有一个支持此功能的 Android IDE，请参阅[AIDE](https://play.google.com/store/apps/details?id=com.aide.ui&hl=en)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-17T13:42:51.380

搜索 drJava。是一个相当复杂的编辑器，包括一个（n Eclipse）编译器。不幸的是，这个项目似乎已经死了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T05:40:06.313

如果您手头有 iOS 设备（iPhone、iPod touch 或 iPad），您可以越狱并从 Cydia 安装 Java。这为您提供了编译器和 VM。但是，它很旧并且仅限于命令行功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T06:23:22.233

您可以使用[http://ideone.com/](http://ideone.com/)。这是一个编译和运行 java 应用程序的网站，在这里您可以创建一个帐户并保存所有示例程序，以后您可以从不同的位置引用它们，甚至与他人共享。
您还可以在其中练习其他计算机语言。它支持 40 多种编程语言。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T03:15:35.463

您是否考虑过使用代号一个平台？ [http://www.codenameone.com/](http://www.codenameone.com/)

# jquery - 在 resizestop 上调整大小后如何获得 jqgrid 列宽

> ID：13506431
> 
> 赞同：1
> 
> 时间：2012-11-22T05:34:43.933
> 
> 标签：jquery, jqgrid

我想在调整大小后获得 jqgrid 列的新宽度。为此，我想使用 resizestop 事件。

我的jqgrid代码如下：

```
<sjg:grid id="gridtable" caption="　" dataType="json" 
                href="%{listurl}"
                gridModel="listMS_Departments"
                width="200"
                autowidth="true"

                pager="true" 
                pagerInput="true"
                pagerPosition="center"  
                rowList="15,30,50"
                rowNum="15"
                rownumbers="true"
                viewrecords="true"

                hidegrid="false"

                navigator="true"
                navigatorAdd="false"
                navigatorEdit="false"
                navigatorRefresh="false"
                navigatorSearch="false"
                navigatorDelete="false"
                navigatorSearchOptions="{showQuery: false,multipleSearch: false}"
                navigatorEditOptions="{closeAfterEdit:false,reloadAfterSubmit:true}"
                navigatorAddOptions="{
                                          reloadAfterSubmit:true,
                                          afterSubmit:function(response,postdata){
                                          return isError(response.responseText);
                }
                }"
                navigatorExtraButtons="{                            
                            hide : { 
                                title : 'Show/Hide', 
                                icon: 'ui-icon-wrench', 
                                topic: 'showcolumns'
                            }                                       
                        }"    
                onSelectRowTopics="rowselect"

                >
                <sjg:gridColumn id="deptCd" name="id" index="id" title="%{getText('department.code')}" resizable="true"
                    sortable="true" search="true" editable="true" editrules="{required:true,custom:true,custom_func:validateCapitalAlphanumeric}" key="true" editoptions="{maxlength :3}" formoptions="{elmsuffix:'  *'}" />
                <sjg:gridColumn id="deptNm" name="deptNm" index="deptNm" title="%{getText('department.name')}" resizable="true"
                    sortable="true" editable="true" edittype="text" editrules="{required:true}" formatter="String" editoptions="{maxlength :10}" formoptions="{elmsuffix:'  *'}"/>   
            </sjg:grid> 
```

无论我尝试如下：

```
$('#gridtable_id').jqGrid({

                 resizeStop: function (newwidth,index) {
                 alert($("#gridtable_id").width());
            },

        }); 
```

`'#gridtable_id'`是 jqgrid 列标题的 id 表示在 html 中它是`<th>`标签的 id。任何人都可以在调整大小后帮助我获得 jqgrid 列的新宽度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:20:14.923

您可以通过两种方式获得新宽度：

方式#1：

```
resizeStop: function(newwidth, index) {
                 alert(newwidth);
            } 
```

方式#2：

```
resizeStop: function () {
                 alert(this.newWidth);
            } 
```

希望能帮助到你！

# javascript - 访问类中的公共变量 javascript

> ID：13506434
> 
> 赞同：-2
> 
> 时间：2012-11-22T05:35:01.033
> 
> 标签：javascript

我有一个 Javascript 类，它具有三个文本变量：

```
myClasss = function(){
    this.color = "yellow";
    this.type = "car";
    this.other = this.type + ", " + this.color;
} 
```

我的班级有错误。我该如何填写`this.Other`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:38:09.097

除了函数定义后缺少的分号外，它可以工作。

```
myClasss = function() {
    this.color = "yellow";
    this.type = "car";
    this.other = this.type + ", " + this.color;
};
alert(new myClasss().other == "car, yellow"); 
```

[你可以在 jsFiddle 中看到它](http://jsfiddle.net/2rDuz/)

# c++ - Visual C++ 的调用方法

> ID：13506435
> 
> 赞同：1
> 
> 时间：2012-11-22T05:35:10.580
> 
> 标签：c++, visual-c++, c++-cli

我想使用 Invoke Method 在 Microsoft Visual C++ 中关闭表单。

我想知道创建一个委托方法来为 Form 预定义关闭方法，即 close()。

还请告诉我我可以使用 Invoke 方法的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:53:40.050

我有一个链接来学习代表在 C++ 中的使用。它现在正在工作..

[http://www.functionx.com/vcnet/topics/delevents.htm](http://www.functionx.com/vcnet/topics/delevents.htm)

# php - 上传不工作

> ID：13506436
> 
> 赞同：0
> 
> 时间：2012-11-22T05:35:28.690
> 
> 标签：php, jquery, forms, uploadify

我正在使用 uploadify 在我的网站上上传多个文件，但它无法正常工作。我已经修复了各种东西，但它不能正常工作。问题是，当我上传文件时，它会显示加载栏，完成后它会消失，但是当我检查目标时，文件中不存在。请帮我。我的代码如下：

索引.php

```
<form>
        <div id="queue"></div>
        <input id="file_upload" name="file_upload" type="file" multiple="true">
    </form>

        <script type="text/javascript">
            <?php $timestamp = time();?>
            $(function() {
                $('#file_upload').uploadify({
                    'formData'     : {
                        'timestamp' : '<?php echo $timestamp;?>',
                        'token'     : '<?php echo md5('unique_salt' . $timestamp);?>'
                    },
                    'swf'    : 'uploadify.swf',
                    'uploader' : 'uploadify.php'

                });
            });
        </script> 
```

上传.php

```
 <?php

    // Define a destination
    $targetFolder = 'uploads/'; // Relative to the root

    $verifyToken = md5('unique_salt' . $_POST['timestamp']);

    if (!empty($_FILES) && $_POST['token'] == $verifyToken) {
        $tempFile = $_FILES['Filedata']['tmp_name'];
        $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
        $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

        // Validate the file type
        $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
        $fileParts = pathinfo($_FILES['Filedata']['name']);

        if (in_array($fileParts['extension'],$fileTypes)) {
            move_uploaded_file($tempFile,$targetFile);
            echo '1';
        } else {
            echo 'Invalid file type.';
        }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T03:59:07.110

昨天刚遇到类似的问题。我的问题是位于 php.ini 中的 upload_max_filesize 设置为 2M。我将它提升到 4M 和 TADA，问题解决了。如果您确实遇到了同样的问题，请不要忘记重新启动服务器。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T20:06:57.140

正如一些评论所说，使用PHP上传时，您需要对上传目录授予写入权限。如果您使用 filezilla，只需右键单击服务器上的文件夹，单击 fileattributes，并将其设置为，例如 775。

# firefox - How to read id value of a DIV element using Selenium WebDriver?

> ID：13506438
> 
> 赞同：1
> 
> 时间：2012-11-22T05:36:04.013
> 
> 标签：firefox, selenium, webdriver, selenium-webdriver

```
<div id="ctl00_ContentHolder_vs_ValidationSummary" class="errorblock">
   <p><strong>The following errors were found:</strong></p>
   <ul><input type="hidden" Name="SummaryErrorCmsIds" Value="E024|E012|E014" />
   <li>Please select a title.</li>
   <li>Please key in your first name.</li>
   <li>Please key in your last name.</li>
   </ul>
</div> 
```

> here is my snippet for example. i want to get the value of ID i.e., ct100_contentHolder_vs_ValidationSummary. using selenium web driver. h

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T05:46:22.170

You can try this :

```
String id=driver.findElementByXpath("//div[@class='errorblock']").getAttribute("id")); 
```

But in this case the class of this division should be unique.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T12:40:54.577

Use following code to extract id of first div:

```
WebElement div = driver.findElement(By.tagName("div"));
div.getAttribute("id"); 
```

This is the code for all div available on the page:

```
List<WebElement> div = driver.findElements(By.tagName("div"));
for ( WebElement e : div ) {    
    div.getAttribute("id");    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T14:22:12.303

I know this answer is really late but I wanted to put this here for those who come later. Searching by XPath should be avoided unless absolutely necessary because it is more complicated, more error prone, and slower. In this case you can easily do what the accepted answer did without having to use XPaths:

```
String id = driver.findElement(By.cssSelector("div.errorblock")).getAttribute("id"); 
```

Some explanation... this line finds the *first* element (`.findElement` vs `.findElements`) using a CSS Selector. The CSS Selector, `div.errorblock`, locates all `div` elements with the class (symbolized by the period `.`) `errorblock`. Once it is located, we get the ID using `.getAttribute()`.

CSS Selectors are a great tool that all automators should have in their toolbox. There's a great CSS Selector reference here: [http://www.w3.org/TR/selectors/#selectors](http://www.w3.org/TR/selectors/#selectors).

# javascript - NS_ERROR_XPC_BAD_CONVERT_JS ，在创建新表单和输入字段时

> ID：13506442
> 
> 赞同：0
> 
> 时间：2012-11-22T05:36:36.040
> 
> 标签：javascript

我是 javascript 新手，最近一直在尝试。但我被困在一个返回错误的函数中：

```
[10:55:47.027] NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument arg 0 [nsIDOMHTMLFormElement.appendChild] @ http://localhost/myproj/test5.html:15 
```

现在让我解释一下代码的作用：1）我定义了一个名为“add”的函数，它接受一个参数，它是一个字符串数组。当它被调用时，该函数创建一个新表单和新输入，其类型为“文本”，值与参数数组中的每个字符串相同。

这是代码：

```
function add(index_array) {

//create the form
    var myform = document.createElement("form");
    myform.id="k_form"
    for ( i =0 ; i <index_array.length ; i ++)
    {
        var mytext = document.createElement("input");
        mytext.tpye="text";
        mytext.value="index_array[i]";
        mytext.id="index_array[i]";
        myform.appendChild("mytext");
        console.log("error");
    }
mydiv=document.getElementById("d_div");
mydiv.appendChild("myform");
} 
```

现在当我执行它时，我得到上面显示的错误，我无法弄清楚我的错误，任何人都可以帮忙。万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:39:39.790

您正在尝试将字符串附加到表单而不是节点变量

```
myform.appendChild("mytext"); 
```

应该

```
myform.appendChild(mytext); 
```

还

```
mydiv.appendChild("myform"); 
```

应该

```
mydiv.appendChild(myform); 
```

# performance - 内存利用率 GWT 应用程序

> ID：13506446
> 
> 赞同：0
> 
> 时间：2012-11-22T05:36:56.573
> 
> 标签：performance, gwt, memory

我们正在尝试加载测试 GWT 应用程序（2.0.4），其中所有小部件都加载在单个页面上，并且在加载页面时会进行近 20 次 rpc 调用。

服务器：JBoss 5，我们正在使用 JConsole 监控堆内存。

在负载测试期间，我们注意到堆内存即使对于最少的用户数也会增加到最大值。但是，一旦触发 gc，内存就会被回收。

谁能解释为什么服务器上的 GWT 应用程序的内存利用率（堆内存）如此之高，即使对于少量用户也是如此？

我们正在使用 Hibernate + Spring 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:39:56.163

1) 通过组合它们获取的数据，这将有助于减少应用程序屏幕启动时 GWT RPC 调用的数量。加载时的多个 RPC 调用往往会阻塞浏览器和服务器上的大量资源。

2) 分析您是否需要 RPC 调用首先获取的所有数据。

3) 堆空间使用量取决于您使用 Hibernate、Dozer、Gilead、延迟/缓存加载等的服务器端技术。

4) 代码拆分和片段合并可帮助您减少您首先加载的应用程序 javascript。

我猜您正在使用 Dozer 将休眠实体复制到客户端的 DTO/bean。尝试使用休眠 C3P0 连接池设置。

# android - android应用程序运行时如何获取ram和cpu利用率的统计信息

> ID：13506448
> 
> 赞同：0
> 
> 时间：2012-11-22T05:37:20.890
> 
> 标签：android, eclipse, android-emulator

我正在阅读Android api`onpause()`中的`onresume()`方法。我在想是否可以选择实时测量 ram 和 cpu 利用率？

然后，我认为我将能够提高质量应用程序。如果有工具或解决方法，请告诉我。如果我可以使用 Eclipse ID 进行管理，那将是非常棒的，因为我总是使用 eclipse 进行开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:54:39.830

您可以使用 Eclipse 提供的 DDMS。这是一个关于如何使用它的很棒的教程：

[http://developer.android.com/guide/developing/debugging/ddms.html](http://developer.android.com/guide/developing/debugging/ddms.html) ,

您可以使用它来获取各种信息，例如正在运行的线程数、进程、内存分配和使用情况等等。在 Eclipse 中打开它并生成一个堆转储以在 Eclipse 内存分析器中查看它。

# html - 在 100% 宽度的 div 中居中 div

> ID：13506452
> 
> 赞同：1
> 
> 时间：2012-11-22T05:37:40.937
> 
> 标签：html, css

这就是我所拥有的：

[http://jsfiddle.net/kRUBY/](http://jsfiddle.net/kRUBY/)

```
<style>
div.box {
    width:400px;
    height:200px;
    float:left;
}
</style>

<div style="width:100%; height:200px; overflow:hidden;">

    <div style="width:2000px; height:200px;">
        <div class="box" style="background:red;"></div>
        <div class="box" style="background:blue;"></div>
        <div class="box" style="background:yellow;"></div>
        <div class="box" style="background:orange;"></div>
        <div class="box" style="background:black;"></div>
    </div>

</div> 
```

随着页面大小的调整，我希望 2000px div 的内容保持居中，因此黄色 div 始终位于屏幕中间。

是否可以仅使用 css 来执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T05:41:14.987

```
<div style="width:100%; height:200px; overflow:hidden;">
    <div style="width:2000px; height:200px;position: relative; left: 50%; margin-left: -1000px">
        <div style="width:400px; height:200px; float:left; background:red;"></div>
        <div style="width:400px; height:200px; float:left; background:blue;"></div>
        <div style="width:400px; height:200px; float:left; background:yellow;"></div>
        <div style="width:400px; height:200px; float:left; background:orange;"></div>
        <div style="width:400px; height:200px; float:left; background:black;"></div>
    </div>
</div>​ 
```

[这是链接](http://jsfiddle.net/kRUBY/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:39:55.217

放入`margin: auto;`您的 2000px div

# python - 如何使用 python 请求模块通过代理身份验证（需要摘要身份验证）

> ID：13506455
> 
> 赞同：27
> 
> 时间：2012-11-22T05:37:59.927
> 
> 标签：python, digest-authentication, python-requests, proxy-server

我之前在使用 Mechanize 模块，现在尝试使用 Requests 模块。
（[当需要 HTTPS 和代理身份验证时，Python mechanize 不起作用](https://stackoverflow.com/questions/13505349/)）

当我访问 Internet 时，我必须通过代理服务器。
代理服务器需要身份验证。我写了以下代码。

```
import requests
from requests.auth import HTTPProxyAuth

proxies = {"http":"192.168.20.130:8080"}
auth = HTTPProxyAuth("username", "password")

r = requests.get("http://www.google.co.jp/", proxies=proxies, auth=auth) 
```

当代理服务器需要基本身份验证时，上述代码运行良好。
现在我想知道当代理服务器需要摘要身份验证时我必须做什么。
HTTPProxyAuth 似乎在摘要身份验证中无效（r.status_code 返回 407）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2017-08-18T19:33:23.173

**无需自己实现！** *大多数情况下*

Requests 内置了对代理的支持，用于基本身份验证：

```
proxies = { 'https' : 'https://user:password@proxyip:port' } 
r = requests.get('https://url', proxies=proxies) 
```

[在文档](https://requests.readthedocs.io/en/latest/user/advanced/#proxies)上查看更多信息

或者，如果您需要摘要式身份验证`HTTPDigestAuth`可能会有所帮助。
*或者你可能需要像下面的 yutaka2487 那样尝试扩展它。*

注意：必须使用代理服务器的 ip 而不是其名称！

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-22T21:54:36.710

我编写了可用于代理身份验证的类（基于摘要身份验证）。
我从 requests.auth.HTTPDigestAuth 中借用了几乎所有的代码。

```
import requests
import requests.auth

class HTTPProxyDigestAuth(requests.auth.HTTPDigestAuth):
    def handle_407(self, r):
        """Takes the given response and tries digest-auth, if needed."""

        num_407_calls = r.request.hooks['response'].count(self.handle_407)

        s_auth = r.headers.get('Proxy-authenticate', '')

        if 'digest' in s_auth.lower() and num_407_calls < 2:

            self.chal = requests.auth.parse_dict_header(s_auth.replace('Digest ', ''))

            # Consume content and release the original connection
            # to allow our new request to reuse the same one.
            r.content
            r.raw.release_conn()

            r.request.headers['Authorization'] = self.build_digest_header(r.request.method, r.request.url)
            r.request.send(anyway=True)
            _r = r.request.response
            _r.history.append(r)

            return _r

        return r

    def __call__(self, r):
        if self.last_nonce:
            r.headers['Proxy-Authorization'] = self.build_digest_header(r.method, r.url)
        r.register_hook('response', self.handle_407)
        return r 
```

用法：

```
proxies = {
    "http" :"192.168.20.130:8080",
    "https":"192.168.20.130:8080",
}
auth = HTTPProxyDigestAuth("username", "password")

# HTTP
r = requests.get("http://www.google.co.jp/", proxies=proxies, auth=auth)
r.status_code # 200 OK

# HTTPS
r = requests.get("https://www.google.co.jp/", proxies=proxies, auth=auth)
r.status_code # 200 OK 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-02-02T22:13:52.797

我编写了一个 Python 模块（可[在此处](https://gist.github.com/Tey/ded2486da8a69bb84d2dce94e2e09ff7#file-requests_digest_proxy-py)获得），它可以使用摘要方案通过 HTTP 代理进行身份验证。它在连接到 HTTPS 网站时工作（通过猴子补丁），并且还允许对网站进行身份验证。这应该适用`requests`于 Python 2 和 3 的最新库。

以下示例通过 HTTP 代理获取网页[https://httpbin.org/ip](https://httpbin.org/ip) ，该代理需要使用用户名和密码`1.2.3.4:8080`进行 HTTP 摘要认证：`user1``password1`

```
import requests
from requests_digest_proxy import HTTPProxyDigestAuth

s = requests.Session()
s.proxies = {
        'http': 'http://1.2.3.4:8080/',
        'https': 'http://1.2.3.4:8080/'
}
s.auth = HTTPProxyDigestAuth('user1', 'password1')

print(s.get('https://httpbin.org/ip').text) 
```

如果网站需要某种 HTTP 身份验证，可以这样指定给`HTTPProxyDigestAuth`构造函数：

```
# HTTP Basic authentication for website
s.auth = HTTPProxyDigestAuth(('user1', 'password1'),
        auth=requests.auth.HTTPBasicAuth('user1', 'password0'))
print(s.get('https://httpbin.org/basic-auth/user1/password0').text))

# HTTP Digest authentication for website
s.auth = HTTPProxyDigestAuth(('user1', 'password1'),,
        auth=requests.auth.HTTPDigestAuth('user1', 'password0'))
print(s.get('https://httpbin.org/digest-auth/auth/user1/password0').text) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-11T08:40:57.993

此代码段适用于两种类型的请求（`http`和`https`）。在当前版本的请求（2.23.0）上测试。

```
import re
import requests
from requests.utils import get_auth_from_url
from requests.auth import HTTPDigestAuth
from requests.utils import parse_dict_header
from urllib3.util import parse_url

def get_proxy_autorization_header(proxy, method):
    username, password = get_auth_from_url(proxy)
    auth = HTTPProxyDigestAuth(username, password)
    proxy_url = parse_url(proxy)
    proxy_response = requests.request(method, proxy_url, auth=auth)
    return proxy_response.request.headers['Proxy-Authorization']

class HTTPSAdapterWithProxyDigestAuth(requests.adapters.HTTPAdapter):
    def proxy_headers(self, proxy):
        headers = {}
        proxy_auth_header = get_proxy_autorization_header(proxy, 'CONNECT')
        headers['Proxy-Authorization'] = proxy_auth_header
        return headers

class HTTPAdapterWithProxyDigestAuth(requests.adapters.HTTPAdapter):
    def proxy_headers(self, proxy):
        return {}

    def add_headers(self, request, **kwargs):
        proxy = kwargs['proxies'].get('http', '')
        if proxy:
            proxy_auth_header = get_proxy_autorization_header(proxy, request.method)
            request.headers['Proxy-Authorization'] = proxy_auth_header

class HTTPProxyDigestAuth(requests.auth.HTTPDigestAuth):

    def init_per_thread_state(self):
        # Ensure state is initialized just once per-thread
        if not hasattr(self._thread_local, 'init'):
            self._thread_local.init = True
            self._thread_local.last_nonce = ''
            self._thread_local.nonce_count = 0
            self._thread_local.chal = {}
            self._thread_local.pos = None
            self._thread_local.num_407_calls = None

    def handle_407(self, r, **kwargs):
        """
        Takes the given response and tries digest-auth, if needed.
        :rtype: requests.Response
        """

        # If response is not 407, do not auth
        if r.status_code != 407:
            self._thread_local.num_407_calls = 1
            return r

        s_auth = r.headers.get('proxy-authenticate', '')

        if 'digest' in s_auth.lower() and self._thread_local.num_407_calls < 2:
            self._thread_local.num_407_calls += 1
            pat = re.compile(r'digest ', flags=re.IGNORECASE)
            self._thread_local.chal = requests.utils.parse_dict_header(
                    pat.sub('', s_auth, count=1))

            # Consume content and release the original connection
            # to allow our new request to reuse the same one.
            r.content
            r.close()
            prep = r.request.copy()
            requests.cookies.extract_cookies_to_jar(prep._cookies, r.request, r.raw)
            prep.prepare_cookies(prep._cookies)

            prep.headers['Proxy-Authorization'] = self.build_digest_header(prep.method, prep.url)
            _r = r.connection.send(prep, **kwargs)
            _r.history.append(r)
            _r.request = prep

            return _r

        self._thread_local.num_407_calls = 1
        return r

    def __call__(self, r):
        # Initialize per-thread state, if needed
        self.init_per_thread_state()
        # If we have a saved nonce, skip the 407
        if self._thread_local.last_nonce:
            r.headers['Proxy-Authorization'] = self.build_digest_header(r.method, r.url)

        r.register_hook('response', self.handle_407)
        self._thread_local.num_407_calls = 1

        return r

session = requests.Session()
session.proxies = {
    'http': 'http://username:password@proxyhost:proxyport',
    'https':  'http://username:password@proxyhost:proxyport'
}
session.trust_env = False

session.mount('http://', HTTPAdapterWithProxyDigestAuth())
session.mount('https://', HTTPSAdapterWithProxyDigestAuth())

response_http = session.get("http://ww3.safestyle-windows.co.uk/the-secret-door/")
print(response_http.status_code)

response_https = session.get("https://stackoverflow.com/questions/13506455/how-to-pass-proxy-authentication-requires-digest-auth-by-using-python-requests")
print(response_https.status_code) 
```

通常，使用协议 HTTPS 连接时，代理授权的问题也与其他类型的身份验证（ntlm、kerberos）有关。尽管存在大量问题（自 2013 年以来，也许还有一些我没有找到的更早的问题）：

在请求中：[摘要代理身份验证](https://github.com/psf/requests/issues/2526)、[NTLM 代理身份验证](https://github.com/psf/requests/issues/1582)、[Kerberos 代理身份验证](https://github.com/requests/requests-kerberos/issues/83)

在 urllib3 中：[NTLM 代理身份验证](https://github.com/urllib3/urllib3/issues/242)，[NTLM 代理身份验证](https://github.com/urllib3/urllib3/issues/1434)

和许多其他人，问题仍然没有解决。

问题的根源在于`_tunnel`模块`httplib`（python2）/ `http.client`（python3）的功能。如果连接尝试不成功，它会引发一个`OSError`不返回响应代码（在我们的例子中为 407）和构建自动化标头所需的额外数据。卢卡萨在[这里](https://github.com/requests/toolbelt/issues/136#issuecomment-190610347)给出了解释。只要 urllib3 的维护者（或请求）没有解决方案，我们就只能使用各种变通方法（例如，使用 @Tey' 的[方法](https://stackoverflow.com/a/59154283/13114398)或做类似的事情[）](https://github.com/urllib3/urllib3/issues/1434#issuecomment-517674113)。在我的变通方法中，我们预先准备通过向代理服务器发送请求并处理收到的响应来获取必要的授权数据。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-22T20:37:24.303

对于那些仍然在这里结束的人，似乎有一个名为 requests-toolbelt 的项目，它具有此功能以及其他常见但未内置的请求功能。

[https://toolbelt.readthedocs.org/en/latest/authentication.html#httpproxydigestauth](https://toolbelt.readthedocs.org/en/latest/authentication.html#httpproxydigestauth)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-22T16:29:44.553

您可以通过使用`requests.auth.HTTPDigestAuth`而不是使用摘要身份验证`requests.auth.HTTPProxyAuth`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-13T20:57:50.097

```
import requests
import os

# in my case I had to add my local domain
proxies = {
  'http': 'proxy.myagency.com:8080',
  'https': 'user@localdomain:password@proxy.myagency.com:8080',
}

r=requests.get('https://api.github.com/events', proxies=proxies)
print(r.text) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-03T09:52:14.663

这是一个不适用于 http 基本身份验证的答案 - 例如组织内的透明代理。

```
import requests

url      = 'https://someaddress-behindproxy.com'
params   = {'apikey': '123456789'}                     #if you need params
proxies  = {'https': 'https://proxyaddress.com:3128'}  #or some other port
response = requests.get(url, proxies=proxies, params=params) 
```

我希望这可以帮助别人。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-15T14:54:19.527

这对我有用。实际上，在此解决方案中不了解 user:password 的安全性：

```
import requests
import os

http_proxyf = 'http://user:password@proxyip:port'
os.environ["http_proxy"] = http_proxyf
os.environ["https_proxy"] = http_proxyf

sess = requests.Session()
# maybe need sess.trust_env = True
print(sess.get('https://some.org').text) 
```

# ruby-on-rails - 一次仅显示 3 个选择字段行（导轨）

> ID：13506457
> 
> 赞同：0
> 
> 时间：2012-11-22T05:38:26.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, select

我试图一次只显示 3 个选择字段行。即，我希望显示名人、娱乐和时尚，然后用户可以向下/向上滚动以选择他们想要的内容。现在，当有人点击选择字段时，大约会显示 8 行。有没有办法做到这一点？

这是我的代码：

```
<%= f.select(:category, options_for_select([['Celebrity', 1], ['Entertainment', 2], ['Fad', 3], ['Funny', 4], ['Person', 5], ['Pets', 6], ['Place', 7], ['Relationship', 8], ['Sports', 9], ['Time', 10], ['Travel', 11], ['Thing', 12], ['Work', 13]], 5), {}, { :class=>"imy", :tabindex => "5", :style=>"width:430px;"}) %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:42:14.410

这项工作应该由 javascript 而不是 Rails 来完成。

尝试下面的 2 个 jquery 选择插件：

1.  [http://loudev.com/](http://loudev.com/)
2.  [http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/#enabledisable](http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/#enabledisable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:44:17.223

HTML 使用“大小”选择属性，表单肯定[有该属性作为控件的参数](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag)。

所以应该是

```
<%= f.select(:category, options_for_select(...), size: 3 %> 
```

# javascript - 如何从 JavaScript 中的 URL 中提取主机？

> ID：13506460
> 
> 赞同：20
> 
> 时间：2012-11-22T05:38:35.983
> 
> 标签：javascript, node.js, parsing, url

捕获域直到结束字符`$, \?, /, :`。我需要一个捕获`domian.com`所有这些的正则表达式。

```
domain.com:3000
domain.com?pass=gas
domain.com/
domain.com 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-22T05:40:45.913

如果您确实有有效的 URL，这将起作用：

```
var urls = [
    'http://domain.com:3000',
    'http://domain.com?pass=gas',
    'http://domain.com/',
    'http://domain.com'
];

for (x in urls) {
    var a = document.createElement('a');
    a.href = urls[x];
    console.log(a.hostname);
}

//=> domain.com
//=> domain.com
//=> domain.com
//=> domain.com 
```

请注意，当您使用的语言具有其他内置方法时，将正则表达式用于此类事情是愚蠢的。

元素上可用的其他属性`A`。

```
var a = document.createElement('a');
a.href = "http://domain.com:3000/path/to/something?query=string#fragment"

a.protocol   //=> http:
a.hostname   //=> domain.com
a.port       //=> 3000
a.pathname   //=> /path/to/something
a.search     //=> ?query=string
a.hash       //=> #fragment
a.host       //=> domain.com:3000 
```

* * *

## 编辑#2

经过进一步考虑，我查看了 Node.js 文档并发现了这个小宝石：[**`url#parse`**](http://nodejs.org/api/url.html#url_url_parse_urlstr_parsequerystring_slashesdenotehost)

上面的代码可以改写为：

```
var url = require('url');

var urls = [
    'http://domain.com:3000',
    'http://domain.com?pass=gas',
    'http://domain.com/',
    'http://domain.com'
];

for (x in urls) {
    console.log(url.parse(urls[x]).hostname);
}

//=> domain.com
//=> domain.com
//=> domain.com
//=> domain.com 
```

* * *

## 编辑#1

如果您想了解如何使用`jsdom`和解决此问题，请参阅此帖子的修订历史记录`nodejs`

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-22T07:10:32.217

由于您使用的是节点，因此只需使用内置`url.parse()`方法；你想要得到的`hostname`属性：

```
var url=require('url');
var urls = [
  'http://domain.com:3000',
  'http://domain.com?pass=gas',
  'http://domain.com/',
  'http://domain.com'
]; 
```

更新：

```
urls.forEach(function(x) {
  console.log(url.parse(x).hostname);
}); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-05-18T12:34:42.257

新的挑战者出现了。根据节点文档，您也可以使用

```
 var url = new URL(urlString);
   console.log(url.hostname); 
```

[https://nodejs.org/api/url.html#url_the_whatwg_url_api](https://nodejs.org/api/url.html#url_the_whatwg_url_api)

这似乎是一种更现代的方式。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-08-25T15:36:04.360

我正在使用 Node `^10`，这就是我从 URL 中提取主机名的方式。

```
var url = URL.parse('https://stackoverflow.com/q/13506460/2535178')
console.log(url.hostname)
//=> stackoverflow.com 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T08:35:24.757

```
/^((?:[a-z0-9-_]+\.)*[a-z0-9-_]+\.?)(?::([0-9]+))?(.*)$/i 
```

匹配是主机、端口、路径

# java - 如何在 actionPerfomed() 中调用 actionPerformed()

> ID：13506467
> 
> 赞同：2
> 
> 时间：2012-11-22T05:39:08.620
> 
> 标签：java, swing, dialog, popup, action

我的代码有问题。

添加信息菜单中有三个菜单项（客户、商品和员工）。单击它们（使用`addActionListener`）应显示各种文本字段/单选按钮/组合框（需要填写信息）和提交按钮。

提交所需信息并单击提交按钮后，应将信息打印到弹出窗口。

我被困在最后一点，它应该`actionPerformed`再次调用该方法并将值打印到弹出窗口。任何人都可以帮忙吗？

EDITED##我已经编辑了我的代码。我的问题从第 1 行开始。216到线号。225\. 当我点击Customer menuitem的按钮“submit3”时，弹出窗口，但没有显示包含“txt1”内容的字符串的内容。如何将组件的值传递给 actionPerformed 以便它可以在新的弹出窗口中打印它们？

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
import javax.swing.border.TitledBorder;

public class Retail extends JFrame implements ActionListener 
{
/**
 * 
 */
private static final long serialVersionUID = 1L;
JMenuBar menuBar = new JMenuBar();
JMenu addmenu = new JMenu("Add Information");
JMenu delmenu = new JMenu("Delete Information");
JMenu savemenu = new JMenu("Save Information");
JMenuItem emp = new JMenuItem("Employee");
JMenuItem merc = new JMenuItem("Merchandise");
JMenuItem cust = new JMenuItem("Customer");
Container contentPane = getContentPane();
JPanel p2 = new JPanel();

public Retail()
{
    super();
    contentPane.setLayout(new BorderLayout());
    JPanel p1 = new JPanel();
    p1.setBorder(new TitledBorder("Select Menu"));
    p1.setPreferredSize(new Dimension(500, 100));
    contentPane.add(p1,BorderLayout.NORTH);

    p2.setBorder(new TitledBorder("Entry Screen"));
    p2.setPreferredSize(new Dimension(500,500));    
    contentPane.add(p2,BorderLayout.CENTER);
    p2.setLayout(new BorderLayout());

    p1.add(menuBar);
    menuBar.add(addmenu);
    menuBar.add(delmenu);
    menuBar.add(savemenu);
    addmenu.add(emp);
    addmenu.addSeparator();
    addmenu.add(merc);
    addmenu.addSeparator();
    addmenu.add(cust);
    addmenu.addSeparator();

    emp.addActionListener(this);
    merc.addActionListener(this);
    cust.addActionListener(this);

}
public void actionPerformed(ActionEvent e)
{
    JButton submit1 = new JButton("Submit Employee Information"); 
    JButton submit2 = new JButton("Submit Merchandise Information");
    JButton submit3 = new JButton("Submit Customer Information");
    if(e.getSource() == emp)
    {   
        p2.removeAll();
        p2.updateUI();
        String[] states={"MA","AZ","CA"};
        JLabel lb1 = new JLabel("First Name:");
        JTextField txt1 = new JTextField(12);
        JLabel lb2 = new JLabel("Last Name:");
        JTextField txt2 = new JTextField(12);
        JLabel lb3 = new JLabel("Address:");
        JTextField txt3 = new JTextField(12);
        JLabel lb4 = new JLabel("City:");
        JTextField txt4 = new JTextField(12);
        JLabel lb5 = new JLabel("State");
        JComboBox cb1 = new JComboBox(states);
        JLabel lb6 = new JLabel("ZipCode");
        JTextField txt5 = new JTextField(12);
        JPanel p3 = new JPanel();
        p3.setLayout(new GridLayout(8,1));
        JPanel p4 = new JPanel();
        p4.setLayout(new GridLayout(1,2));
        JLabel lb7= new JLabel("Gender:");
        JRadioButton rb1 = new JRadioButton("Male");
        JRadioButton rb2 = new JRadioButton("Female");
        ButtonGroup bgroup = new ButtonGroup();
        bgroup.add(rb1);
        bgroup.add(rb2);
        JLabel lb8 = new JLabel("Submit Information:");
        JPanel p5 = new JPanel();
        p5.setLayout(new GridLayout(8,1));
        p3.add(lb1);
        p3.add(lb2);
        p3.add(lb3);
        p3.add(lb4);
        p3.add(lb5);
        p3.add(lb6);
        p3.add(lb7);
        p3.add(lb8);

        p5.add(txt1);
        p5.add(txt2);
        p5.add(txt3);
        p5.add(txt4);
        p4.add(rb1);
        p4.add(rb2);
        p5.add(cb1);
        p5.add(txt5);
        p5.add(p4);
        p5.add(submit1);

        p2.add(p3,BorderLayout.WEST);
        p2.add(p5,BorderLayout.EAST);

        submit1.addActionListener(this);
    }

    if(e.getSource() == merc)
    {
        p2.removeAll();
        p2.updateUI();
        String[] states={"MA","AZ","CA"};
        JLabel lb1 = new JLabel("First Name:");
        JTextField txt1 = new JTextField(12);
        JLabel lb2 = new JLabel("Last Name:");
        JTextField txt2 = new JTextField(12);
        JLabel lb3 = new JLabel("Address:");
        JTextField txt3 = new JTextField(12);
        JLabel lb4 = new JLabel("City:");
        JTextField txt4 = new JTextField(12);
        JLabel lb5 = new JLabel("State");
        JComboBox cb1 = new JComboBox(states);
        JLabel lb6 = new JLabel("ZipCode");
        JTextField txt5 = new JTextField(12);
        JPanel p3 = new JPanel();
        p3.setLayout(new GridLayout(8,1));
        JPanel p4 = new JPanel();
        p4.setLayout(new GridLayout(1,2));
        JLabel lb7= new JLabel("Gender");
        JRadioButton rb1 = new JRadioButton("Male");
        JRadioButton rb2 = new JRadioButton("Female");
        JLabel lb8 = new JLabel("Submit Information:");

        JPanel p5 = new JPanel();
        p5.setLayout(new GridLayout(8,1));
        p3.add(lb1);
        p3.add(lb2);
        p3.add(lb3);
        p3.add(lb4);
        p3.add(lb5);
        p3.add(lb6);
        p3.add(lb7);
        p3.add(lb8);
        p5.add(txt1);
        p5.add(txt2);
        p5.add(txt3);
        p5.add(txt4);
        p4.add(rb1);
        p4.add(rb2);
        p5.add(cb1);
        p5.add(txt5);
        p5.add(p4);
        p5.add(submit2);

        p2.add(p3,BorderLayout.WEST);
        p2.add(p5,BorderLayout.EAST);

        submit2.addActionListener(this);

    }
    if(e.getSource() == cust)
    {
        p2.removeAll();
        p2.updateUI();
        String[] states={"MA","AZ","CA"};
        JLabel lb1 = new JLabel("First Name:");
        JTextField txt1 = new JTextField(12);
        JLabel lb2 = new JLabel("Last Name:");
        JTextField txt2 = new JTextField(12);
        JLabel lb3 = new JLabel("Address:");
        JTextField txt3 = new JTextField(12);
        JLabel lb4 = new JLabel("City:");
        JTextField txt4 = new JTextField(12);
        JLabel lb5 = new JLabel("State");
        JComboBox cb1 = new JComboBox(states);
        JLabel lb6 = new JLabel("ZipCode");
        JTextField txt5 = new JTextField(12);
        JPanel p3 = new JPanel();
        p3.setLayout(new GridLayout(8,1));
        JPanel p4 = new JPanel();
        p4.setLayout(new GridLayout(1,2));
        JLabel lb7= new JLabel("Gender");
        JRadioButton rb1 = new JRadioButton("Male");
        JRadioButton rb2 = new JRadioButton("Female");
        JLabel lb8 = new JLabel("Submit Information:");
        JPanel p5 = new JPanel();
        p5.setLayout(new GridLayout(8,1));
        p3.add(lb1);
        p3.add(lb2);
        p3.add(lb3);
        p3.add(lb4);
        p3.add(lb5);
        p3.add(lb6);
        p3.add(lb7);
        p3.add(lb8);

        p5.add(txt1);
        p5.add(txt2);
        p5.add(txt3);
        p5.add(txt4);
        p4.add(rb1);
        p4.add(rb2);
        p5.add(cb1);
        p5.add(txt5);
        p5.add(p4);
        p5.add(submit3);

        p2.add(p3,BorderLayout.WEST);
        p2.add(p5,BorderLayout.EAST);
        final String s;
        s = txt1.getText();
        submit3.addActionListener(new ActionListener() 
        {
            @Override
            public void actionPerformed(ActionEvent args0) 
            {
                JOptionPane.showMessageDialog(rootPane,s);
            }
        });
    }
}
public static void main(String[] args)
{

    Retail frame = new Retail();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setTitle("Retail Information");
    frame.pack();
    frame.setResizable(true);
    frame.setVisible(true);
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:57:23.583

最后一次测试：

```
if(e.getSource()==submit1) 
```

永远不会成功，因为`submit1`它是`JButton`您刚刚在开始时构建的`actionPerformed`，因此不能成为当前事件的来源。

我建议您不要像这样构建新的布局组件，而是使用`CardLayout`for`p2`并在您的操作处理程序中翻转到适当的卡片。这样您就可以为所有按钮注册一次侦听器，并且您将正确收到所有事件的通知。

此外，您应该为每个 UI 组件单独注册，而不是让一个巨人`actionPerformed`来测试源代码。`ActionListeners`这使逻辑（和代码）更加清晰。

**编辑**

例如，而不是这个：

```
emp.addActionListener(this);
merc.addActionListener(this);
cust.addActionListener(this); 
```

你可以这样做：

```
emp.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        // logic for click on emp button
    }
});
merc.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        // logic for click on merc button
    }
});
// etc. 
```

然后你不需要`implements ActionListener`你的主要课程。

然后，如果您使用`CardLayout`for `p2`，您可以在程序开始时将动作侦听器附加到每个界面元素。然后，响应任何特定操作的逻辑变得更加简单——只需更新适当的 UI 元素并切换要显示的“卡片” `p2`。有关最后一部分的更多信息，请参阅[文档。`CardLayout`](http://docs.oracle.com/javase/6/docs/api/java/awt/CardLayout.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T05:57:12.577

您可以调用适当的下一个菜单项的 .doClick()

或者

定义从适当的 actionPerformed() 方法调用的单独方法（例如 doEmpAction() 和 doCustAction() ），并从另一个调用它们。所以 doCustAction 只需调用 doEmpAction。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T06:06:35.233

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
import javax.swing.border.TitledBorder;

public class Retail extends JFrame implements ActionListener {

    /**
     *
     */
    private static final long serialVersionUID = 1L;
    JMenuBar menuBar = new JMenuBar();
    JMenu addmenu = new JMenu("Add Information");
    JMenu delmenu = new JMenu("Delete Information");
    JMenu savemenu = new JMenu("Save Information");
    JMenuItem emp = new JMenuItem("Employee");
    JMenuItem merc = new JMenuItem("Merchandise");
    JMenuItem cust = new JMenuItem("Customer");
    Container contentPane = getContentPane();
    JPanel p2 = new JPanel();

    public Retail() {
        super();
        contentPane.setLayout(new BorderLayout());
        JPanel p1 = new JPanel();
        p1.setBorder(new TitledBorder("Select Menu"));
        p1.setPreferredSize(new Dimension(500, 100));
        contentPane.add(p1, BorderLayout.NORTH);

        p2.setBorder(new TitledBorder("Entry Screen"));
        p2.setPreferredSize(new Dimension(500, 500));
        contentPane.add(p2, BorderLayout.CENTER);
        p2.setLayout(new BorderLayout());

        p1.add(menuBar);
        menuBar.add(addmenu);
        menuBar.add(delmenu);
        menuBar.add(savemenu);
        addmenu.add(emp);
        addmenu.addSeparator();
        addmenu.add(merc);
        addmenu.addSeparator();
        addmenu.add(cust);
        addmenu.addSeparator();

        emp.addActionListener(this);
        merc.addActionListener(this);
        cust.addActionListener(this);

    }

    public void actionPerformed(ActionEvent e) {
        JButton submit1 = new JButton("Submit Employee Information");
        JButton submit2 = new JButton("Submit Merchandise Information");
        JButton submit3 = new JButton("Submit Customer Information");
        if (e.getSource() == emp) {
            p2.removeAll();
            p2.updateUI();
            String[] states = {"MA", "AZ", "CA"};
            JLabel lb1 = new JLabel("First Name:");
            JTextField txt1 = new JTextField(12);
            JLabel lb2 = new JLabel("Last Name:");
            JTextField txt2 = new JTextField(12);
            JLabel lb3 = new JLabel("Address:");
            JTextField txt3 = new JTextField(12);
            JLabel lb4 = new JLabel("City:");
            JTextField txt4 = new JTextField(12);
            JLabel lb5 = new JLabel("State");
            JComboBox cb1 = new JComboBox(states);
            JLabel lb6 = new JLabel("ZipCode");
            JTextField txt5 = new JTextField(12);
            JPanel p3 = new JPanel();
            p3.setLayout(new GridLayout(8, 1));
            JPanel p4 = new JPanel();
            p4.setLayout(new GridLayout(1, 2));
            JLabel lb7 = new JLabel("Gender:");
            JRadioButton rb1 = new JRadioButton("Male");
            JRadioButton rb2 = new JRadioButton("Female");
            ButtonGroup bgroup = new ButtonGroup();
            bgroup.add(rb1);
            bgroup.add(rb2);
            JLabel lb8 = new JLabel("Submit Information:");
            JPanel p5 = new JPanel();
            p5.setLayout(new GridLayout(8, 1));
            p3.add(lb1);
            p3.add(lb2);
            p3.add(lb3);
            p3.add(lb4);
            p3.add(lb5);
            p3.add(lb6);
            p3.add(lb7);
            p3.add(lb8);

            p5.add(txt1);
            p5.add(txt2);
            p5.add(txt3);
            p5.add(txt4);
            p4.add(rb1);
            p4.add(rb2);
            p5.add(cb1);
            p5.add(txt5);
            p5.add(p4);
            p5.add(submit1);

            p2.add(p3, BorderLayout.WEST);
            p2.add(p5, BorderLayout.EAST);

            submit1.addActionListener(this);//instead of this line use next line to add actionlistener.

        }
        if (e.getSource() == merc) {
            p2.removeAll();
            p2.updateUI();
            String[] states = {"MA", "AZ", "CA"};
            JLabel lb1 = new JLabel("First Name:");
            JTextField txt1 = new JTextField(12);
            JLabel lb2 = new JLabel("Last Name:");
            JTextField txt2 = new JTextField(12);
            JLabel lb3 = new JLabel("Address:");
            JTextField txt3 = new JTextField(12);
            JLabel lb4 = new JLabel("City:");
            JTextField txt4 = new JTextField(12);
            JLabel lb5 = new JLabel("State");
            JComboBox cb1 = new JComboBox(states);
            JLabel lb6 = new JLabel("ZipCode");
            JTextField txt5 = new JTextField(12);
            JPanel p3 = new JPanel();
            p3.setLayout(new GridLayout(8, 1));
            JPanel p4 = new JPanel();
            p4.setLayout(new GridLayout(1, 2));
            JLabel lb7 = new JLabel("Gender");
            JRadioButton rb1 = new JRadioButton("Male");
            JRadioButton rb2 = new JRadioButton("Female");
            JLabel lb8 = new JLabel("Submit Information:");

            JPanel p5 = new JPanel();
            p5.setLayout(new GridLayout(8, 1));
            p3.add(lb1);
            p3.add(lb2);
            p3.add(lb3);
            p3.add(lb4);
            p3.add(lb5);
            p3.add(lb6);
            p3.add(lb7);
            p3.add(lb8);

            p5.add(txt1);
            p5.add(txt2);
            p5.add(txt3);
            p5.add(txt4);
            p4.add(rb1);
            p4.add(rb2);
            p5.add(cb1);
            p5.add(txt5);
            p5.add(p4);
            p5.add(submit2);

            p2.add(p3, BorderLayout.WEST);
            p2.add(p5, BorderLayout.EAST);

            submit2.addActionListener(this);//instead of this line use next line to add actionlistener.

        }
        if (e.getSource() == cust) {
            p2.removeAll();
            p2.updateUI();
            String[] states = {"MA", "AZ", "CA"};
            JLabel lb1 = new JLabel("First Name:");
            final JTextField txt1 = new JTextField(12);
            JLabel lb2 = new JLabel("Last Name:");
            JTextField txt2 = new JTextField(12);
            JLabel lb3 = new JLabel("Address:");
            JTextField txt3 = new JTextField(12);
            JLabel lb4 = new JLabel("City:");
            JTextField txt4 = new JTextField(12);
            JLabel lb5 = new JLabel("State");
            JComboBox cb1 = new JComboBox(states);
            JLabel lb6 = new JLabel("ZipCode");
            JTextField txt5 = new JTextField(12);
            JPanel p3 = new JPanel();
            p3.setLayout(new GridLayout(8, 1));
            JPanel p4 = new JPanel();
            p4.setLayout(new GridLayout(1, 2));
            JLabel lb7 = new JLabel("Gender");
            JRadioButton rb1 = new JRadioButton("Male");
            JRadioButton rb2 = new JRadioButton("Female");
            JLabel lb8 = new JLabel("Submit Information:");
            JPanel p5 = new JPanel();
            p5.setLayout(new GridLayout(8, 1));
            p3.add(lb1);
            p3.add(lb2);
            p3.add(lb3);
            p3.add(lb4);
            p3.add(lb5);
            p3.add(lb6);
            p3.add(lb7);
            p3.add(lb8);

            p5.add(txt1);
            p5.add(txt2);
            p5.add(txt3);
            p5.add(txt4);
            p4.add(rb1);
            p4.add(rb2);
            p5.add(cb1);
            p5.add(txt5);
            p5.add(p4);
            p5.add(submit3);

            p2.add(p3, BorderLayout.WEST);
            p2.add(p5, BorderLayout.EAST);

            //submit3.addActionListener(this);//instead of this line use next line to add actionlistener.Commment this line.
            submit3.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println("------>" + txt1.getText());
                    //JOptionPane.showMessageDialog(rootPane, txt1.getText());
                    new MyDialog(txt1.getText());
                }
            });
            // submit3.addActionListener(new SubmitActionListener(txt1.getText()));//out action listener

        }
        if (e.getSource() == submit1) {
            JOptionPane.showMessageDialog(rootPane, " button is clicked");

        }

    }

    class MyDialog extends JDialog {

        public MyDialog(String textbox1) {
            JLabel label = new JLabel(textbox1);
            add(label);
            setModalityType(ModalityType.APPLICATION_MODAL);

            setTitle("Info");
            setDefaultCloseOperation(DISPOSE_ON_CLOSE);
            setLocationRelativeTo(null);
            setSize(300, 200);
            setVisible(true);

        }
    }

    public static void main(String[] args) {

        Retail frame = new Retail();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Retail Information");
        frame.pack();
        frame.setResizable(true);
        frame.setVisible(true);
    }
} 
```

这适用于 submit3 按钮。根据需要修改其他按钮。

# ios - UISplitview 方向在 iOS 5 和 iOS 5.1 中没有改变

> ID：13506469
> 
> 赞同：2
> 
> 时间：2012-11-22T05:39:22.810
> 
> 标签：ios, uisplitviewcontroller, uiinterfaceorientation

我在我的应用程序中使用了拆分视图。
当我在 iOS 6 模拟器中运行我的应用程序时，它会随着方向的变化而旋转并且运行良好，但是当我在 iOS 5 或 iOS 5.1 模拟器中运行相同的应用程序并且我改变模拟器的方向时，拆分视图不会随着方向的变化而改变。
我还添加了代码

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown || interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

-(BOOL)shouldAutorotate
{
    return YES;
} 
```

我使用以下代码添加拆分视图 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation { return YES; }

主视图和详细视图中的上述方法。

我使用以下代码添加了拆分视图

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
     // obj_PageControlViewController = [[PageControlViewController alloc]initWithNibName:@"PageControlViewController-iPad" bundle:nil];

     MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController_iPad" bundle:nil];
     UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

     DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController_iPad" bundle:nil];
     UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

     masterViewController.detailViewController = detailViewController;

     self.splitViewController = [[UISplitViewController alloc] init];
     self.splitViewController.delegate = detailViewController;
     self.splitViewController.viewControllers = @[masterNavigationController, detailNavigationController];
     TabBarAppDelegate *appDelegate = (TabBarAppDelegate *)[[UIApplication sharedApplication] delegate];
     [appDelegate.window setRootViewController:self.splitViewController];

} 
```

但这是行不通的。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T17:09:16.520

你说你添加了`shouldAutorotateToInterfaceOrientation:`，但你没有说你*在哪里*添加它。要在 iOS 5.1 或更早版本中获得 UISplitViewController 的自动旋转，您必须`shouldAutorotateToInterfaceOrientation:`在拆分视图控制器的*两个*子视图控制器（主视图控制器和详细视图控制器）的视图控制器中提供。

这将起作用，假设拆分视图控制器是您的应用程序的顶级（根）视图控制器，由 Master-Detail 模板设置。

哦，为自己省点麻烦：在 中`shouldAutorotateToInterfaceOrientation:`，只需返回 YES。在 iPad 上，您总是希望自动旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:56:55.427

在 iOS5 及以下您应该使用

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
```

您在上面发布的（shouldAutorotate）适用于 iOS6+

# objective-c - 为什么这段代码在使用 Apple LLVM 编译时会崩溃，而不是在 LLVM/GCC 中？

> ID：13506470
> 
> 赞同：0
> 
> 时间：2012-11-22T05:39:29.383
> 
> 标签：objective-c, xcode, cocoa, llvm, llvm-gcc

我正在尝试获取此代码：[http](http://code.google.com/p/switchcontrol/source/browse/trunk/code/AFSwitchControl.m) ://code.google.com/p/switchcontrol/source/browse/trunk/code/AFSwitchControl.m在 Xcode 4.5.2 中的 Apple LLVM 下编译。它在使用 LLVM/GCC 编译时可以工作，但在第 198 行切换到 Apple LLVM 时会在 mouseDown 方法中崩溃：

```
NSRect knobRect = _AFSwitchControlKnobRectForInsetBackground(slotRect, _offset); 
```

因为 _offset 没有设置。假设在 bind 方法中设置了这一行：

```
[self setOffset:(CGFloat)[self state]]; 
```

但由于某种原因，似乎没有在 LLVM 下设置任何内容。我的绑定调用如下所示：

```
[control bind:NSValueBinding toObject:self withKeyPath:@"isToggleSwitchOn" options:nil]; 
```

任何想法为什么控件的状态在 LLVM 下没有返回任何内容？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T08:05:23.207

问题实际上是上面几行，在对_AFSwitchControlPartRects 的调用中。

```
- (void)mouseDown:(NSEvent *)event {
    NSRect textRect, backgroundRect;
    _AFSwitchControlPartRects([self bounds], &textRect, &backgroundRect);

    NSRect slotRect = _AFSwitchControlInsetBackgroundRect(backgroundRect);
    NSRect knobRect = _AFSwitchControlKnobRectForInsetBackground(slotRect, _offset); 
```

_AFSwitchControlPartRects 的第二个参数，&textRect 是一个指向矩形的指针。

然而，在函数的实现中，该参数应该是指向*两个*矩形的足够空间的指针。

```
NS_INLINE void _AFSwitchControlPartRects(NSRect bounds, NSRect *textRects, NSRect *backgroundRect) {
    NSDivideRect(bounds, textRects, backgroundRect, NSWidth(bounds)/5.0, NSMinXEdge);

    textRects[1] = _AFSwitchControlInsetTextRect(NSOffsetRect(textRects[0], NSWidth(*backgroundRect), 0));
    textRects[0] = _AFSwitchControlInsetTextRect(textRects[0]); 
```

当它写入 textRects[1] 时，它会在 -mouseDown 的堆栈上涂鸦。缓冲区溢出。

在我看来，它正在发生在破坏 self 上，所以下一次对 self 的取消引用将会消失。这恰好是_offset的使用。

# jquery - 油脂猴和 jquery 无法正常工作

> ID：13506473
> 
> 赞同：1
> 
> 时间：2012-11-22T05:39:34.250
> 
> 标签：jquery, greasemonkey, sandbox, jquery-get

我在 GM 1.5 中使用 jQuery，发现我无法使用 .get

我需要[http://code.jquery.com/jquery.js](http://code.jquery.com/jquery.js)

我的代码就是这样

```
this.$ = this.jQuery = jQuery.noConflict(true);

$(document).ready(function () {
    $.get('index.php',function () {
        console.log('yay');
        console.log($(this).html());

    });
}); 
```

我确定我在以前的版本中能够做到这一点，这与所做的沙箱更改有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:53:56.480

问题中的代码工作正常。在 Windows XP 和 Windows 7 上使用 Greasemonkey 1.5 和 Firefox 16 和 17 进行了验证。

关于：

> 啊，现在我被告知 GM_setValue 不存在。我不认为这是 GM_ 功能和 jQuery 功能之间的选择

1.  你不必选择。不要注入 jQuery（或大多数其他库）使用`@require`. 然后，通过适当的`@grant`指令，您可以`GM_`轻松地使用函数。

2.  `this.$ = this.jQuery = jQuery.noConflict(true);`除非您使用`@grant none`-- 这会关闭`GM_`功能，否则代码中没有任何意义。

3.  `$(document).ready()`Greasemonkey 脚本中不需要，除非您使用`@run-at document-start`.

所以，使用这样的代码：

```
// ==UserScript==
// @name     YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_getValue
// @grant    GM_setValue
// @grant    etc., etc.
// ==/UserScript==

$.get ('index.php', function () {
    console.log ('yay');
    console.log ($(this).html () );
} ); 
```

# android - 如何在android中单击按钮时显示特定文件夹内容

> ID：13506478
> 
> 赞同：0
> 
> 时间：2012-11-22T05:40:02.800
> 
> 标签：android, android-listview, android-sdcard

我正在寻找在按钮单击事件上打开指定的文件夹内容（存在于外部存储卡上）。并将它们显示在单独的列表中。当我加载列表中的内容时，我收到错误为空指针异常。我的源代码是：

```
public class Access_MemCardActivity_main extends Activity {

Button btn_view;
boolean mExternalMediaAvailable=false;
ArrayList<String> item=new ArrayList<String>();
ArrayAdapter<String> adapter;
private ListView lv;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String state=Environment.getExternalStorageState();

    if(Environment.MEDIA_MOUNTED.equals(state)){
        mExternalMediaAvailable=true;
    }
    else{
        mExternalMediaAvailable=false;
    }

    btn_view=(Button)findViewById(R.id.btn_view);

    btn_view.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {

        if(mExternalMediaAvailable){
            Toast.makeText(getApplicationContext(), "External Media..", Toast.LENGTH_LONG).show();

            String SD_Card_Path=Environment.getExternalStorageDirectory().toString()+"/reports";

            File file = new File(SD_Card_Path);
            File[] file_Array=file.listFiles();

            Toast.makeText(getApplicationContext(), file_Array.toString(), Toast.LENGTH_LONG).show();

            for(int i=0;i< file_Array.length;i++){
                 file=file_Array[i];
                 if(file.isDirectory()){
                     item.add(file.getName()+"/");
                 }
                 else{
                     item.add(file.getName());
                 }
            }
            Toast.makeText(getApplicationContext(), item.toString(),Toast.LENGTH_LONG).show();

            lv=(ListView)findViewById(R.id.list_view);
            adapter=new ArrayAdapter<String>(Access_MemCardActivity_main.this,R.layout.main,R.id.list_view,item);
            lv.setAdapter(adapter);

        }
        else{
            Toast.makeText(getApplicationContext(), "You Dont Have External Media..", Toast.LENGTH_LONG).show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:05:06.980

这，

```
adapter=new ArrayAdapter<String>(Access_MemCardActivity_main.this,R.layout.main,R.id.list_view,item); 
```

对我来说看起来不对......你不能通过。`R.layout.main`相反，你应该通过`row.xml`布局。

无论如何，下面的代码片段都可以正常工作。

```
lv = (ListView) findViewById(R.id.list_view);
adapter = new ArrayAdapter < String > (this,
android.R.layout.simple_list_item_1);

for (int i = 0; i < file_Array.length; i++) {
    file = file_Array[i];
    if (file.isDirectory()) {
        adapter.add(file.getName() + "/");

    } else {
        adapter.add(file.getName());
    }
}
lv.setAdapter(adapter); 
```

如果您在 onClickListener 下构建 ArrayAdapter，则将上下文作为 ActivityName.this 传递。

```
adapter = new ArrayAdapter < String > (ActivityName.this,
    android.R.layout.simple_list_item_1); 
```

# javascript - 更改占位符文本

> ID：13506481
> 
> 赞同：90
> 
> 时间：2012-11-22T05:40:24.797
> 
> 标签：javascript, jquery, html

如何更改输入元素的占位符文本？

例如，我有 3 个文本类型的输入。

```
<input type="text" name="Email" placeholder="Some Text">
<input type="text" name="First Name" placeholder="Some Text">
<input type="text" name="Last Name"placeholder="Some Text"> 
```

如何使用 JavaScript 或 jQuery更改**Some Text文本？**

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-11-22T06:03:05.530

如果您想使用 Javascript，那么您可以使用`getElementsByName()`方法来选择`input`字段并更改`placeholder`每个字段...请参阅下面的代码...

```
document.getElementsByName('Email')[0].placeholder='new text for email';
document.getElementsByName('First Name')[0].placeholder='new text for fname';
document.getElementsByName('Last Name')[0].placeholder='new text for lname'; 
```

否则使用 jQuery：

```
$('input:text').attr('placeholder','Some New Text'); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-22T05:47:32.497

此解决方案使用 jQuery。如果要对所有文本输入使用相同的占位符文本，可以使用

```
$('input:text').attr('placeholder','Some New Text'); 
```

如果你想要不同的占位符，你可以使用元素的 id 来改变占位符

```
$('#element1_id').attr('placeholder','Some New Text 1');
$('#element2_id').attr('placeholder','Some New Text 2'); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-12-21T17:22:55.283

```
var input = document.getElementById ("IdofInput");
input.placeholder = "No need to fill this field"; 
```

你可以在这里找到更多信息：http `placeholder`: [//help.dottoro.com/ljgugboo.php](http://help.dottoro.com/ljgugboo.php)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-22T05:44:07.143

使用 jquery，您可以通过以下代码执行此操作：

```
<input type="text" id="tbxEmail" name="Email" placeholder="Some Text"/>

$('#tbxEmail').attr('placeholder','Some New Text'); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-09-10T09:59:13.557

我一直面临着同样的问题。

在 JS 中，首先您必须清除文本输入的文本框。否则不会显示占位符文本。

这是我的解决方案。

```
document.getElementsByName("email")[0].value="";
document.getElementsByName("email")[0].placeholder="your message"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-02T10:12:39.980

尝试访问输入的占位符属性并更改其值，如下所示：

```
$('#some_input_id').attr('placeholder','New Text Here'); 
```

如果需要，还可以清除占位符，例如：

```
$('#some_input_id').attr('placeholder',''); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-08T00:40:38.240

对于 JavaScript 使用：

```
document.getElementsByClassName('select-holder')[0].placeholder = "This is my new text"; 
```

对于 jQuery 使用：

```
$('.select-holder')[0].placeholder = "This is my new text"; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-07T21:23:58.057

在您的 javascript 文件中

document.getElementsByName('Email')[0].placeholder = '电子邮件的新文本';

# ip - windows phone 8中的IP地址

> ID：13506484
> 
> 赞同：14
> 
> 时间：2012-11-22T05:40:46.390
> 
> 标签：ip, windows-phone-8

我需要找到运行我的软件的手机的 IP 地址。我原以为这是直截了当的，但是在搜索了论坛之后，似乎（令人难以置信）在 windows phone 7 中没有这种方法 - 但是，这在 windows phone 8 中是否发生了变化？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T09:42:04.447

是的，这现在可以在 WP8 中实现，而无需使用 WP7 所需的多播解决方案。请注意，您的手机上会有多个网络接口（例如，我的 WP8 模拟器上有三个）

```
public static IPAddress Find()
{
    List<string> ipAddresses = new List<string>();

    var hostnames = NetworkInformation.GetHostNames();
    foreach (var hn in hostnames)
    {
        if (hn.IPInformation != null)
        {
            string ipAddress = hn.DisplayName;
            ipAddresses.Add(ipAddress);
        }
    }

    IPAddress address = IPAddress.Parse(ipAddresses[0]);
    return address;
} 
```

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T23:56:19.613

当然，有一种方法可以找到手机的 IP 地址。这是一篇 MSDN 博客文章，它解释了如何做到这一点：[在 Windows Phone Mango 上查找您自己的 IP 地址](http://blogs.msdn.com/b/andypennell/archive/2011/08/11/finding-your-own-ip-address-on-windows-phone-mango.aspx)

我刚刚在诺基亚 Lumia 920 (Windows Phone 8) 上对其进行了测试，它运行良好。但是，由于使用了多播 IP，这仅适用于 WiFi。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T07:11:00.250

Windows RT 代码

```
public static string GetIpAddress()
{
        var address = "";
        var icp = NetworkInformation.GetInternetConnectionProfile();

        if (icp != null && icp.NetworkAdapter != null)
        {
            var hostname =
                NetworkInformation.GetHostNames()
                    .SingleOrDefault(
                        hn =>
                        hn.IPInformation != null && hn.IPInformation.NetworkAdapter != null
                        && hn.IPInformation.NetworkAdapter.NetworkAdapterId
                        == icp.NetworkAdapter.NetworkAdapterId);

            if (hostname != null)
            {
                address = hostname.CanonicalName;
            }
        }
        return address;
} 
```

# windows-phone-8 - 隔离存储 Windows phone 8

> ID：13506485
> 
> 赞同：5
> 
> 时间：2012-11-22T05:40:47.263
> 
> 标签：windows-phone-8, windows-phone, isolatedstorage

如何在 windows phone 7.5 的 IsoStoreSpy 等 windows phone 8 应用程序上查看隔离存储的内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T05:48:54.217

[Windows Phone Power Tools](http://wptools.codeplex.com/)似乎可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:51:30.903

有： ISETool.exe ，这是一个满足您需求的命令行工具。

# java - Spring 3中的@PathVariable如何检查所需的值

> ID：13506488
> 
> 赞同：0
> 
> 时间：2012-11-22T05:40:54.300
> 
> 标签：java, jakarta-ee, spring-mvc

我创建了一种方法

```
@RequestMapping(value = "/settings/userSettings/{key}", method = RequestMethod.POST)
@Secured("ROLE_HOME_TAB")
public ModelAndView updateUserSetting(HttpServletRequest request,
        @PathVariable("key") String key,
        @RequestParam(defaultValue = "") String value) {
    Map<Object, Object> model = new HashMap<Object, Object>();

        try {
            User user = RequestUtils.getUser(request);
            UserSettings userSettings = userManager.getUserSettings(user,
                    key);
            if (userSettings == null) {
                userSettings = new UserSettings(user, key);
            }
            userSettings.setValue(value);
            userManager.saveObject(userSettings);
        } catch (Exception e) {
            log.error("", e);
        }

    return new ModelAndView(new JSONView(
            model));
} 
```

但是当我启动服务器时，我收到了这个错误

```
Superclass has no null constructors but no arguments were given

Could not generate CGLIB subclass of class 
```

在我的`UserSetting`pojo 类中，我正在检查非空键。如何解决这个问题？

我只能使用`@PathVariable`，我不能使用`@RequestParam`所以请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:52:23.540

请尝试：您要使用 CGLib 代理的类必须提供默认构造函数。

**来源： http:** [//forum.springsource.org/showthread.php?50210-Superclass-has-no-null-constructors-but-no-arguments-were-given](http://forum.springsource.org/showthread.php?50210-Superclass-has-no-null-constructors-but-no-arguments-were-given)

# ruby - 如何在 ruby 中创建嵌套目录

> ID：13506492
> 
> 赞同：4
> 
> 时间：2012-11-22T05:41:12.973
> 
> 标签：ruby

假设我想在当前目录下创建一个类似“a/b/c”的目录。

怎么做？

我试过这个：

```
Dir.mkdir("a/b/c"). 
```

但是它不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T05:45:24.353

我猜这是因为 c 的父目录不存在。如果你尝试在 shell 中做同样的事情，你也会得到一个错误。如果父目录不存在，您可以使用 -p 选项强制创建它们：

```
mkdir -p a/b/c 
```

在 Ruby 中可以使用 FileUtils 模块中的 mkdir_p 来完成：

```
require "fileutils"

FileUtils::mkdir_p "a/b/c" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T04:43:51.147

可以让你的生活更轻松的是

```
system 'mkdir "/home/awais/development/rails/testing2"' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T05:43:38.403

您需要使用[FileUtils.mkdir_p](http://apidock.com/ruby/FileUtils/mkdir_p)

# c# - 使用后台工作者问题需要帮助来解决这个问题

> ID：13506495
> 
> 赞同：0
> 
> 时间：2012-11-22T05:41:25.563
> 
> 标签：c#, backgroundworker

当我按下 btn_Connect 时，backgroundworker 会，但是当它到达它时，在我单击消息框上的确定后提示消息框，它将再次运行并再次显示消息框，当我再次单击 btn_Connect 时，它会执行相同的操作并且它会增加，因此第一次单击是两次第二次单击 btn_Connect 将显示三次消息框。如何解决这个问题，

这是我的代码：

```
private void testConnection()
    {
        backgroundWorker.ReportProgress(15);

        txt.createConnectionFile(txtServerName.Text, txtDatabase.Text, txtUserName.Text, txtPassword.Text);

        backgroundWorker.ReportProgress(30);

        cn.createConnection();

        backgroundWorker.ReportProgress(60);

        try
        {
            backgroundWorker.ReportProgress(80);

            cn.openConnection();

            MessageBox.Show("Connected!", "Connection Success", MessageBoxButtons.OK, MessageBoxIcon.Information);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, "Connection Error", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
        }

        backgroundWorker.ReportProgress(100);
    }

    private void backgroundWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        progressBar.Value = e.ProgressPercentage;
    }

    private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        testConnection();
    }
private void btnConnect_Click(object sender, EventArgs e)
    {
        progressBar.Visible = true;
        backgroundWorker.WorkerReportsProgress = true;
        backgroundWorker.WorkerSupportsCancellation = true;
        backgroundWorker.ProgressChanged += backgroundWorker_ProgressChanged;
        backgroundWorker.DoWork += backgroundWorker_DoWork;

        backgroundWorker.RunWorkerAsync();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:45:42.723

我注意到的一件事是，每次单击按钮时，您都会继续连接 DoWork 和 RunWorkerCompleted 事件。

根据上面的代码，我怀疑第一次单击按钮时它会运行一次，然后该按钮会再次启用。下次单击按钮时，它将运行两次，下一次运行 3 次，以此类推。

您需要连接按钮单击之外的事件。例如在 OnLoad 中。

如果您不能这样做，请将点击代码替换为

```
private void btnConnect_Click(object sender, EventArgs e)
    {
        progressBar.Visible = true;
        backgroundWorker.WorkerReportsProgress = true;
        backgroundWorker.WorkerSupportsCancellation = true;
        backgroundWorker.ProgressChanged -= backgroundWorker_ProgressChanged;
        backgroundWorker.ProgressChanged += backgroundWorker_ProgressChanged;

        backgroundWorker.DoWork -= backgroundWorker_DoWork;
        backgroundWorker.DoWork += backgroundWorker_DoWork;

        backgroundWorker.RunWorkerAsync();
    } 
```

# python - Python中的“线程”，绘制接收到的数据并同时发送

> ID：13506498
> 
> 赞同：2
> 
> 时间：2012-11-22T05:41:31.820
> 
> 标签：python, multithreading, wxpython, blocking, pyserial

我在这里寻求一些高级别的建议。我正在使用 Python 绘制通过串行不断接收的数据。同时，我希望用户能够通过提示（例如 Python shell）输入数据。然后，该数据将通过同一串行端口发送，以与也发送数据的设备通信。

我的问题是绘图 app.MainLoop()“线程”似乎被阻塞，并且在窗口关闭之前它不会显示我的 raw_input 部分。我也尝试将这 4 行放在我的 while 循环中，但发生了同样的问题 - 它让我输入所有信息一次，但一旦开始绘图，它就会永远阻塞，直到我关闭绘图窗口。

```
if __name__ == '__main__':
    app = wx.App()
    window = DataLoggerWindow()
    window.Show()
    app.MainLoop()
    prompt_counter = "main"
    while(1):
        if prompt_counter == "main":
            ans = raw_input("Press f for freq, press a for amplitude: \n")
            if ans == "f":
                prompt_counter = "freq"
            elif ans == "a":
                prompt_counter = "amp"
            else:
                prompt_counter = "main"
        elif prompt_counter == "freq":
                freq = raw_input("Enter the frequency you want to sample at in Hz: \n")
                ser.write("f"+freq+"\n")
                prompt_counter = "main"
        elif prompt_counter == "amp":
                amp = raw_input("Type in selection")    
                ser.write("a"+amp+"\n")
                prompt_counter = "main" 
```

绘图部分所做的只是读取串行端口，并打印接收到的数据。这两个部分分别与后端的设备一起工作。所以我很确定这是我如何编写 Python 代码的问题，但我不确定为什么....有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:12:42.363

免责声明：我不认为以下是好的做法。

您可以将 wx 内容的执行放在单独的线程中。

```
app = wx.App()
window = DataLoggerWindow()
import threading
class WindowThread(threading.Thread):
    def run(self):
        window.Show()
        app.MainLoop()
WindowThread().start() 
```

这样，`MainLoop`只会阻塞另一个线程，主线程应该仍然可用。

但是，我认为这不是最佳方法，您应该使用 App.OnIdle 钩子之类的东西。

# php - 如何在 wordpress 的网格中显示投资组合项目？

> ID：13506501
> 
> 赞同：0
> 
> 时间：2012-11-22T05:41:42.270
> 
> 标签：php, javascript, css, wordpress

我有 maxx wordpress 主题，我想在我制作的新页面中显示特定类别的投资组合项目。

这是我的网站：[http ://corenetos.com](http://corenetos.com)

我怎样才能做到这一点？

# node.js - 节点/快递 - 在数据库回调之前渲染页面？

> ID：13506502
> 
> 赞同：0
> 
> 时间：2012-11-22T05:41:55.663
> 
> 标签：node.js, express

全面披露：我对完全异步模型非常陌生。

在我的应用程序中，有许多实例需要将信息提交到数据库，但应用程序可以在不知道结果的情况下继续运行。在等待数据库写入完成之前呈现页面是否可以接受？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:52:10.780

是的。例如：

```
app.get('/', function(req, res, next) {
  res.jsonp({
    message: 'Hello World!'
  });
  var i = 0;
  while (true) {
    i++;
  }
}); 
```

当用户访问'/'时，他会立即看到结果。但是如果只有一个节点实例在运行，当其他用户访问'/'时，他不会收到任何响应，因为唯一的实例处于无限循环中。

如果您有很多繁重的工作要做（例如，受 CPU 限制的工作），最好使用 MSMQ 和 AMQP 等消息队列，而不是在节点实例中完成所有工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:01:06.457

当然。但是，如果确实出现问题，您将如何通知用户错误？除非您正在使用套接字或 ajax 或其他东西，否则请求是标准方式。

# ruby - ruby 中表达式 `?value1:value2` 的对应项是什么？

> ID：13506509
> 
> 赞同：1
> 
> 时间：2012-11-22T05:42:13.943
> 
> 标签：ruby

我想知道这种表达式在 Ruby 中对应的是什么：

```
var status=false;
var xx=new Obj(xx,status?"0":"1",status?"2":"3"); 
```

我在 Ruby 中尝试过同样的方法，但似乎语法：

```
status?"23":nil 
```

不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:45:55.157

方法名称可以以问号结尾，因此请使用更多空格：

```
status ? "23" : nil 
```

等效地你可以写：

```
("23" if status) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T05:44:03.177

`status`在和之间放置一个空格`?`。似乎它可能会被解析为方法名称`status?`。另外，不要用分号结束你的句子。并且不要使用`var`.

```
x = status ? "0" : "1" 
```

# javascript - JavaScript 未在 ASP.NET 中触发

> ID：13506510
> 
> 赞同：0
> 
> 时间：2012-11-22T05:42:28.807
> 
> 标签：javascript, asp.net

```
 function isGoodEmail() {
            var email = document.getElementById("<%=txtComapnyEmail.ClientID%>").value;
            if (email == "Email") {
                if (window.isValidEmail(email)) {
                    if (/(aol|gmail|yahoo|hotmail)\.com$/.test(email)) {
                        alert(' valid email, but not for this site.  No free service emails!');
                        return false;
                    }
                    return true;
                }
                return false;
            } 
```

按钮代码：

```
<asp:Button runat="server" class="button-orange" Text="Confirm and start my company page"
                                ID="Companystart" OnClick="CompanystartClick" OnClientClick="isGoodEmail" /> 
```

我正在从按钮调用上面的 JavaScript，但它没有验证电子邮件。即使输入`gmail`它也被接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:17:04.027

如果你`OnClientClick="return isGoodEmail()"`说它会工作，它会调用 JavaScript 代码。

但是假设您将“gmail”作为电子邮件的文本，那么 if 条件

```
if (email == "Email") 
```

为假，因此内部没有执行或返回任何内容，因此感觉就像没有调用 JavaScript

尝试使用firebug调试和断点js代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:46:54.433

使用以下

```
 <asp:Button runat="server" class="button-orange" Text="Confirm and start my company page"
                            ID="Companystart" OnClick="CompanystartClick" OnClientClick="return isGoodEmail()" /> 
```

**在您的客户点击功能调用OnClientClick="return isGoodEmail()"**之前，您缺少“返回”

 **正如您在 java 脚本中编写的 return true 和 false 一样，在您的函数调用中，函数名之前也应该有 return。

为了更好地了解**`return true and false`**您，可以通过此链接

[在点击事件监听器中添加“return false”有什么效果？](https://stackoverflow.com/questions/128923/whats-the-effect-of-adding-return-false-to-an-onclick-event)

- -编辑

```
 function isGoodEmail() {
        alert("In the beginning");
        var email = document.getElementById("<%=txtComapnyEmail.ClientID%>").value;
        alert(email);
        if (email == "Email") {

            if (window.isValidEmail(email)) {
                if (/(aol|gmail|yahoo|hotmail)\.com$/.test(email)) {
                    alert(' valid email, but not for this site.  No free service emails!');
                    return false;
                }
                return true;
            }
            return false;
        } 
```**

# perl - 这段使用 Switch.pm 的代码安全吗？

> ID：13506511
> 
> 赞同：4
> 
> 时间：2012-11-22T05:42:28.440
> 
> 标签：perl, if-statement, switch-statement

在我们公司，我们使用这个代码（最后给出）大约 10 年，它运行良好。

前几天我们遇到了一些问题，我们不得不重新编写完整的包，我们决定用 Damian 的 Switch 模块替换这段代码（以提高代码的可读性）。

一切对我们来说都很好。

后来我在[Perlmonks](http://www.perlmonks.org/?node_id=486756)上发现 Damian 把这个模块放在了

> 您不应该在生产中使用 Damian 模块，因为它们的目的是探索和原型化未来的核心语言功能。

但它对我们来说很好，因为我们没有达到这个模块的限制（我猜）。

现在我请你们看看这两种实现（嵌套 if else vs switch），让我知道在较新的实现中使用 Switch 是否很好，或者我们是否会为我们创造一些未来的问题？在下面给出的代码中使用 Switch 是否正常，或者是否存在任何隐藏的错误/问题？

我已经在 CPAN 和 Perlmonks 上阅读了这个模块的错误和评论，我想我们的代码离遇到这些错误还很远（我认为是这样）。

我们正在使用`Perl 5.8.5`.

**PS：**我知道 Switch 的替代方案，我们`given/when`在 Perl 5.10 中有，我们可以使用[这里](https://stackoverflow.com/questions/844616/obtain-a-switch-case-behaviour-in-perl-5)`dispatch table`指定的其他解决方案，但现在我们只想比较使用 Switch 的新实现。

**使用嵌套 if else**

```
if ($command =~ /^enter$/) {
    $self->show_main_frames();
}       
elsif ($command =~ /^XYZ_MENU/i) {
    $self->show_main_menu($manual, $dbot);
}
elsif ($command =~ /^DBOT/i) {
    $dbot->process();
}
# XML is used for the reminders-history: Request 2666
elsif ($command =~ /^XML_DBOT/i) {
    $dbot->process();
}
elsif ($command =~ /^UGS/i) {
    $ugsui->process();
}
elsif ($command eq "kill") {
    my $login = $self->{COMMON_HASH}{login} || "";
    my $su_login = $self->{CONF}->get("start", "SU_LOGIN");
    if ($login eq $su_login) {      
            # usually only certain user with certain permission will be
            # able to do this. 
            $self->do_error("Daemon was killed by ".$login);
            $self->db_connection->disconnect();
            $self->{LOG}->write("User $login killed the daemon", 0);
            exit; # this 'exit' actually kill the daemon
    }
    else {
            $self->do_error("User $login tried to kill the daemon. ".
            "This incident will be reported");
            $self->{LOG}->write("User $login tried to kill the daemon", 2);
    }
}
elsif ($command eq "logout") {
    # check if we should delete the password cookie
    my $forget_me = $self->{CGI}->param("forget_me") || 0;
    if ($forget_me) {
            $self->{DB_PASSWORD_COOKIE}->delete_cookie();
    }

    $ugsui->do_logout();
    # Cliff edit remove id from logged_in
    $session->remove_session($session->login());
    # delete the session of the user
    delete $self->{SESSIONS}{$session->id()};
    if ($self->{CACHE_TO_FILE}) {
            my $session_data_path = 
                XYZ_DIR
            ."/code/cache/session_data"
        .$session->id();
            unlink($session_data_path);
    }
}
# if we just login we should create all the main frames        
elsif ($command eq "login") {
    # if extra_param holds "command*XXX" the XXX will be placed instead of
    # the command. extra_param holds pairs that are astrics-separated
    my $extra_param = $cgi->param("extra_param");
    $extra_param = "" if (!defined($extra_param));
    $extra_param =~ /command\*([^\*]+)/i;
    my $other_command = defined($1) ? $1 : "";
    if ($other_command =~ /^dbot/i) { # meanwhile - works only on dbot 
                                  # commands
        $command = $other_command;
            # now we will get the other parameters from the extra_param 
            # (actually including the command that is still in the 
            # $extra_param)         
            while ($extra_param =~ /^\*?([^\*]+)\*([^\*]+)(.*)/) {
            $extra_param = $3;
            my $name = $1;
            my $value = $2;     
            $cgi->param(-name => $name,
                 -value => $value);
            }#end while
    }#end if
    else{
    $self->show_main_frames();
    }
}#end elsif
else {
    $self->show_main_frames();
}#end outer else 
```

**使用开关**

```
switch ($command) 
{
    case /^enter$/      { $self->show_main_frames() }
    case /^XYZ_MENU/i   { $self->show_main_menu($manual, $dbot) }
    case /^DBOT/i       { $dbot->process() }
        case /^XML_DBOT/i   { $dbot->process() }
        case /^UGS/i        { $ugsui->process() }
        case "kill"     {
                my $login = $self->{COMMON_HASH}{login} || "";
                    my $su_login = $self->{CONF}->get("start", "SU_LOGIN");
                if ($login eq $su_login) {      
                        # usually only certain user with certain permission will be
                        # able to do this. 
                        $self->do_error("Daemon was killed by ".$login);
                        $self->db_connection->disconnect();
                        $self->{LOG}->write("User $login killed the daemon", 0);
                        exit; # this 'exit' actually kill the daemon
                    }
                else    {
                        $self->do_error("User $login tried to kill the daemon. ".
                            "This incident will be reported");
                        $self->{LOG}->write("User $login tried to kill the daemon", 2);
                    }
                    }
        case "logout"       {
                    # check if we should delete the password cookie
                    my $forget_me = $self->{CGI}->param("forget_me") || 0;
                    if ($forget_me) {
                            $self->{DB_PASSWORD_COOKIE}->delete_cookie();
                    }

                $ugsui->do_logout();
                # Cliff edit remove id from logged_in
                $session->remove_session($session->login());
                # delete the session of the user
                delete $self->{SESSIONS}{$session->id()};
                    if ($self->{CACHE_TO_FILE}) {
                            my $session_data_path = 
                                XYZ_DIR
                        ."/code/cache/session_data"
                        .$session->id();
                    unlink($session_data_path);
                    }
                    }
        case "login"        {
                # if extra_param holds "command*XXX" the XXX will be placed instead of
                # the command. extra_param holds pairs that are astrics-separated
                my $extra_param = $cgi->param("extra_param");
                $extra_param = "" if (!defined($extra_param));
                $extra_param =~ /command\*([^\*]+)/i;
                my $other_command = defined($1) ? $1 : "";
                if ($other_command =~ /^dbot/i) 
                    { # meanwhile - works only on dbot 
                                       # commands
                    $command = $other_command;
                        # now we will get the other parameters from the extra_param 
                        # (actually including the command that is still in the 
                        # $extra_param)         
                        while ($extra_param =~ /^\*?([^\*]+)\*([^\*]+)(.*)/) {
                        $extra_param = $3;
                        my $name = $1;
                        my $value = $2;     
                        $cgi->param(-name => $name,
                             -value => $value);
                            }#end while
                    }#end if
                else {$self->show_main_frames();}
                }
    else            {$self->show_main_frames();}
} # end switch 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T06:07:06.870

Switch 自己解析源代码。这可能导致难以诊断直接使用它的代码中的错误。Switch 产生的问题不是间歇性的，因此如果您的代码有效，您无需担心。

但实际上，它并没有增加太多。

带开关：

```
switch ($command) {
    case /^enter$/      { $self->show_main_frames() }
    case /^XYZ_MENU/i   { $self->show_main_menu($manual, $dbot) }
    case /^DBOT/i       { $dbot->process() }
    case /^XML_DBOT/i   { $dbot->process() }
    case /^UGS/i        { $ugsui->process() }
    case "kill"         {
        my $login = $self->{COMMON_HASH}{login} || ""; 
```

不带开关：

```
for ($command) {
    if    (/^enter$/)      { $self->show_main_frames() }
    elsif (/^XYZ_MENU/i)   { $self->show_main_menu($manual, $dbot) }
    elsif (/^DBOT/i)       { $dbot->process() }
    elsif (/^XML_DBOT/i)   { $dbot->process() }
    elsif (/^UGS/i)        { $ugsui->process() }
    elsif ($_ eq "kill")   {
        my $login = $self->{COMMON_HASH}{login} || ""; 
```

（`elsif (/^kill\z/)`也可以。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T06:36:22.833

实际上**Switch**模块并没有为您提供任何“杀手级功能”；**elsif**语句也可以做到这一点，它安全、稳定并且没有**Switch**的缺点。这是我在项目中遇到的**Switch问题（我不再使用它）：**

通过 Perl 过滤器进行切换。该技术有以下限制：

*   您的源代码实际上是在运行中重写并替换为后续的**elsif**语句。
*   一些 Perl 错误报告会引用错误的行；其中一些显示您的源代码中没有的代码（自动生成的代码）。

不是过滤器限制，而是模块本身的限制：

*   如果您调用的文件（.pl 或 .pm）**使用 Swtich**超过 1Mbyte 大小，这可能会导致“神秘错误”（如 doc 中所写）。我可以确认这些错误不会导致**Switch**模块并且完全不明显，因此您可以在数周的编码/文档之后进行硬调试。

我建议使用自 Perl 5.10 起可用的**elsif**或语句。`given..when`因此，如果您使用 perl 5.8.x - 请使用 elsif。

您还可以阅读[Switch](http://search.cpan.org/~rgarcia/Switch-2.16/Switch.pm)文档的“限制”段落。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-22T06:35:40.490

因为 Switch 有自己的源代码解析，所以在某些情况下根本不起作用。例如，它不可能与 mod_perl 一起使用。

但是，如果您有 Perl 5.10 或更高版本，则可以使用相同的功能进行更好的替换：[`given`/`when`](http://perldoc.perl.org/perlsyn.html#Switch-Statements)

```
use v5.10;

given ($var) {
when (/^abc/) { $abc = 1 }
when (/^def/) { $def = 1 }
when (/^xyz/) { $xyz = 1 }
default       { $nothing = 1 }
} 
```

`given`受到 Perl 核心的支持（并且可以在任何地方使用，包括 mod_perl）——您只需`use v5.10;`，它就可以立即提供给您。

# javascript - 重用变量而不是新的 DOM 搜索

> ID：13506512
> 
> 赞同：1
> 
> 时间：2012-11-22T05:42:29.423
> 
> 标签：javascript, jquery

我正在尝试使用我之前定义的 menuBar 对象对其中的对象进行操作。

```
var menuBar = $(".menu-bar ul");
var menuActive = menuBar.find("li.active");
menuBar.hover(function(){
    menuActive.toggleClass("active");
});
$('.menu-bar ul > li > a[href="'+ window.location.href +'"]').parent().addClass("active"); 
```

我不喜欢再次调用 DOM 搜索来定义链接父级的活动类。

关于如何使用 menuBar 变量的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:47:23.317

您可能正在寻找：

```
menuBar.find('> li > a[href="'+ window.location.href +'"]').parent().addClass("active"); 
```

或者真的因为你试图选择父母：

```
menuBar.find('> li:has(> a[href="'+ window.location.href +'"])').addClass("active"); 
```

`:has`伪类允许您选择包含另一个元素的元素。这就是你想要的，你应该允许选择器本身做它可以做的任何优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T05:47:21.213

您可以指定要在其中搜索的上下文：

```
$('li > a[href="'+ window.location.href +'"]', menuBar.children()).parent().addClass("active"); 
```

这`menuBar.children()`将是上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T05:48:37.337

尝试这样的事情

```
var menuBar = $(".menu-bar ul");
var menuActive = menuBar.find("li.active");
menuBar.hover(function(){
    menuActive.toggleClass("active");
});
$('li > a[href="'+ window.location.href +'"]',menuBar).parent().addClass("active"); 
```

# stress-testing - 在对 HTTP 服务器进行压力测试时，我应该测试保持连接处于活动状态吗？

> ID：13506520
> 
> 赞同：1
> 
> 时间：2012-11-22T05:43:06.967
> 
> 标签：stress-testing

我正在使用[Faststream](http://www.servetrue.com/webstresstester.php)的 Web 压力测试器工具对 Web 请求进行压力测试，它具有保持连接活动的选项。

我认为对于通常的 Web 请求（例如对 PHP 页面的请求），在 Web 服务器处理请求并发回之后，连接将关闭。说我不应该在这种情况下保持连接是准确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:24:30.083

IP 会话的建立和拆除成本很高，因此在 HTTP 1.1 中添加了项目，这些项目利用已经打开的连接而不是建立新的连接来下载额外的项目。您可能需要查看来自 Web Stress Tester 的文档，看看这是否是被引用的内容。您还可以查看有关 HTTP 1.1 的 w3c 文档，以熟悉更新附带的与会话管理相关的新增内容。

但是，一般来说，您希望尽可能地模拟您的行为与您的实际最终用户行为，以使您的测试成为生产中最终用户行为的最佳预测器。如果您有一个应用程序可以使您正在建模的会话保持活动状态，那么请务必启用该设置。如果您的应用程序在当前会话中没有保持活动状态，则不要启用该选项。

# jquery - webapi 的页面导航

> ID：13506524
> 
> 赞同：0
> 
> 时间：2012-11-22T05:43:29.817
> 
> 标签：jquery, asp.net-mvc-4, asp.net-web-api

这里我需要为 Asp.net Web Api 开发一个 jquery 站点。但是，每次我运行 web api 应用程序时，它都会打开索引页面。但是如何为这个 web api 创建一个新的视图页面，它连接到我自己的控制器说产品 ..或者如何从默认索引链接新页面页。请你甚至可以参考我任何教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:50:32.567

您是否看过这篇文章 -[您的第一个 ASP.NET Web API](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)？

# mysql - 如何删除字符串列mysql的重复字符

> ID：13506526
> 
> 赞同：0
> 
> 时间：2012-11-22T05:43:37.973
> 
> 标签：mysql, codeigniter

它有字符串列`'SELL'`它有字符串值，如

```
2,3,2,3,5,2,5,4,,3,,3,,2,3,5,4,,5,0,2,3,,,,,,,,2,3... 
```

我想让那个专栏像

```
2,3,5,4 
```

删除**重复值**、**不需要的逗号**并**删除 0**

是否可以用mysql来做，请帮助，在此先感谢

```
UPDATE 
```

我可以删除逗号

```
REPLACE(SELL, ',', '') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:44:58.847

如果你尝试，一切皆有可能。您只需要生成字符串中存在的所有数字（这超出了这个问题的范围，所以我将使用硬编码的捐赠者表）。

```
SELECT t.id,
       GROUP_CONCAT(d.num
                    ORDER BY find_in_set(d.num,t.sell))
FROM table1 AS t
JOIN donor AS d ON find_in_set(d.num,t.sell)
GROUP BY t.id; 
```

[http://sqlfiddle.com/#!2/b4c23/2](http://sqlfiddle.com/#!2/b4c23/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:47:38.727

此任务仅适用于 SQL。您应该编写一些脚本（PHP、Python、Perl 等）来扫描您的数据，将其擦洗以满足您的要求并将其写回您的表中。

# google-maps - 尝试将活动添加到 Google 地方

> ID：13506533
> 
> 赞同：0
> 
> 时间：2012-11-22T05:44:14.820
> 
> 标签：google-maps, google-places-api

我正在尝试使用 Google Place Actions API，特别是事件，但我终生无法获得有效的帖子。

这是我正在使用的网址：

[https://maps.googleapis.com/maps/api/place/event/add/json?sensor=false&key=placesApiKey&duration=26000&reference=CjQwAAAAv4TTQ3ySXiGhOElWFNAQ-roLOfgwo215yRTk1Bmhg0jSJ-sAdz9nHgNgnGBAmqP7EhC7K0AjTfFcZgCUh68c2yNtGhRkmynXvE5d4XA5ZfyBqAxlNdsAIg&summary=this](https://maps.googleapis.com/maps/api/place/event/add/json?sensor=false&key=placesApiKey&duration=26000&reference=CjQwAAAAv4TTQ3ySXiGhOElWFNAQ-roLOfgwo215yRTk1Bmhg0jSJ-sAdz9nHgNgnGBAmqP7EhC7K0AjTfFcZgCUh68c2yNtGhRkmynXvE5d4XA5ZfyBqAxlNdsAIg&summary=this) is going to be something fun

参考的是亚利桑那州的坦佩。我不断收到 404 回复，说这是非法请求。任何帮助都会很棒！我真的不知道我做错了什么。

我尝试了三种不同的方法，结果都一样：

```
HttpClient client = new HttpClient();
client.getParams().setParameter(HttpMethodParams.RETRY_HANDLER, new DefaultHttpMethodRetryHandler());

String url = "https://maps.googleapis.com/maps/api/place/event/add/json?sensor=false&key=" + googlePlacesAPIKey;
PostMethod post = new PostMethod(url);
NameValuePair[] data = {
        new NameValuePair("duration", Long.toString(duration)),
        new NameValuePair("reference", reference),
        new NameValuePair("summary", summary)
    };

post.setRequestBody(data); 
```

和

```
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost("https://maps.googleapis.com/maps/api/place/event/add/json?sensor=false&key=" + googlePlacesAPIKey);

try {

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("duration", Long.toString(duration)));
    nameValuePairs.add(new BasicNameValuePair("reference", reference));
    nameValuePairs.add(new BasicNameValuePair("summary", summary));

    post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    HttpResponse response = client.execute(post);
} 
```

和

```
URL url = new URL("https://maps.googleapis.com/maps/api/place/event/add/json?sensor=false&key="+googlePlacesAPIKey+"&duration="+duration+"&reference="+reference+"&summary="+summary);
HttpURLConnection httpCon = (HttpURLConnection) url.openConnection();
httpCon.setDoOutput(true);
httpCon.setRequestMethod("POST");
OutputStreamWriter out = new OutputStreamWriter( httpCon.getOutputStream());
System.out.println(httpCon.getResponseCode());
System.out.println(httpCon.getResponseMessage()); out.close(); 
```

和

```
HttpPost post = new HttpPost("https://maps.googleapis.com/maps/api/place/event/add/json?sensor=false&key=" + googlePlacesAPIKey);
post.setHeader("Content-type", "application/json");

JSONObject object = new JSONObject();

object.put("duration", Long.toString(duration));
object.put("reference", reference);
object.put("summary", summary);

String message = object.toString();

post.setEntity(new StringEntity(message));

HttpResponse response = client.execute(post); 
```

以下是那些好奇的人的 API 链接：

[https://developers.google.com/places/documentation/actions#event_add](https://developers.google.com/places/documentation/actions#event_add)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:59:59.017

好的，虽然我不适合 Java，但我为 Android Java 创建了一个示例代码。

## [MainActivity.java]

```
package com.example.placeseventtest;

import org.json.JSONArray;
import org.json.JSONObject;
import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
  private final String API_KEY = "YOUR_API_KEY";
  private PlacesHTTP myUtil;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView resTxtView = (TextView) findViewById(R.id.responseText);
    myUtil = new PlacesHTTP(API_KEY, resTxtView);

    Button currentPosBtn = (Button) this.findViewById(R.id.currentPosBtn);
    currentPosBtn.setOnClickListener(new OnClickListener() {
      public void onClick(View view) {
        JSONObject params = new JSONObject();
        JSONObject location = new JSONObject();
        JSONArray types = new JSONArray();
        try {
          location.put("lat", 123.4556);
          location.put("lng", 123.4556);

          params.put("location", location);
          params.put("accuracy", 20);
          params.put("name", "Event Name");

          //only one type is available.
          types.put("parking");
          params.put("types", types);

          params.put("language", "en");
        } catch (Exception e) {}

        // Show the request JSON data.
        TextView reqTxtView = (TextView) findViewById(R.id.requestText);
        try {
          reqTxtView.setText(params.toString(2));
        } catch (Exception e) {}

        // POST to Google Server
        myUtil.execute(params);
      }
    });
  }
} 
```

* * *

## [地点HTTP.java]

```
package com.example.placeseventtest;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.widget.TextView;

public class PlacesHTTP extends AsyncTask<JSONObject, Void, HttpResponse>{

  private HttpPost post;
  private HttpClient httpClient;
  private String url;
  private TextView txtView;

  public PlacesHTTP(String api_key, TextView resultView) {
    url = String.format("https://maps.googleapis.com/maps/api/place/add/json?sensor=false&key=%s", api_key);
    txtView = resultView;
  }

  protected void onPreExecute() {
    httpClient = new DefaultHttpClient();
    post = new HttpPost(url);
    post.setHeader("Accept", "application/json");
    post.setHeader("Content-type", "application/json");
  }

  @Override
  protected HttpResponse doInBackground(JSONObject... params) {
    //Send data as JSON format
    JSONObject opts = params[0];
    StringEntity strEntity;
    HttpResponse response = null;
    try {
      strEntity = new StringEntity(opts.toString());
      post.setEntity(strEntity);
      response = httpClient.execute(post);
    } catch (Exception e) {
      e.printStackTrace();
    }
    return response;
  }

  protected void onPostExecute(HttpResponse result) {
    if (result != null) {
      // Display the result
      try {
        txtView.setText(EntityUtils.toString(result.getEntity()));
      } catch (Exception e) {
        e.printStackTrace();
      }
    } else {
        txtView.setText("null");
    }
  }
} 
```

* * *

我得到了这个结果：

![在此处输入图像描述](../Images/98df1eea7fc667137741e1f7346fb010.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:59:13.903

在python中，你可以这样做：

```
#!/usr/bin/python
# coding: utf8

import sys
import urllib

parameters = urllib.urlencode({
    'key' : "YOUR_API_KEY",
    'sensor' : 'false'
  })
url = "https://maps.googleapis.com/maps/api/place/event/add/json?%s" % (parameters)

#The reference
reference = "CoQBdgAAAN4u...YKmgQ"

#Add event
postdata = '''
{
  "duration": 86400,
  "language": "ja",
  "reference": "%s",
  "summary": "Event Name!",
  "url" : "http://hogehoge.com/test_page"
}
''' % (reference)

f = urllib.urlopen(url, postdata)
print f.read() 
```

# android - 画廊视图中每个图像下方的文本视图

> ID：13506535
> 
> 赞同：0
> 
> 时间：2012-11-22T05:44:21.053
> 
> 标签：android, android-layout, android-intent, galleryview

在我的应用程序中，我使用了 5 个galleryview 来显示图像，正确完成后，我可以正确填充图像。现在我想在每个图像下方添加 textview。

我想要这样的画廊视图：

```
image1    Image2    Image3  image4
                                             -------->Galleryview1

text1     text2      text3   text4

------------------------------------------
image1    image2    image3    image4

                                             --------->Galleryview2
text1     text2      text3    text4 
```

**我的代码：**

适配器代码：

```
public class GalleryviewAdapter extends BaseAdapter 
{      

    static final String URL="http://aaaa/home.xml";

    public static GalleryviewAdapter instance=new GalleryviewAdapter();
    public static GalleryviewAdapter getInstance()
       {
           return instance;
       }
       Context context;        
       GalleryviewAdapter()
       {
           System.out.println("Inside cons");
           getelement();
//         getelementindia();
       }
//     String[] itemsArray = 
//         {
//       "SUN","MON", "TUS", "WED", "THU", "FRI", "SAT"
//         };

//     MyAdapter(Context c)
//     {
//      context = c;
//     }

       private Activity activity;  
       private  LayoutInflater inflater=null; 
       public void ImageAdapter(Activity a) 
       {   
           activity = a;  
                inflater = (LayoutInflater)activity.getSystemService
                        (Context.LAYOUT_INFLATER_SERVICE);         
        } 

    String imageurl[]= {};//new String[5];
//    String imageurlindia[]={};
    public void getelement()
    {
        System.out.println("Inside getelement");
//     String[] itemsarray={};
//     ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
//     ArrayList<String> menuItems = new ArrayList<String>();
       TaplistingParser parser = new TaplistingParser();
       String xml= parser.getXmlFromUrl(URL);
       Document doc=parser.getDomElement(xml);        
//       System.out.println("sssss="+doc);
       NodeList nl=doc.getElementsByTagName("article");
       imageurl = new String[nl.getLength()];
       System.out.println("len="+nl.getLength());
       for(int i=0; i < nl.getLength(); i++ )
       {
//         System.out.println("Inside for");
//          HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
//          map.put("SectionName", parser.getValue(e, "sectionname"));
//          System.out.println("b4 items="+parser.getValue(e, "sectionname"));
//          itemsarray[i] = parser.getValue(e, "sectionname");
//          System.out.println("items="+itemsarray[i]);
        imageurl[i]=parser.getValue(e, "kickerimage");
//          menuItems.add(parser.getValue(e, "sectionname"));
//      menuItems.add(parser.getValue(e, "sectionname"));
//       System.out.println("menu="+menuItems);

       }    
//      String[] itemsarray = menuItems.toArray(new String[menuItems.size()]); 

//       String[] itemsarray = new String[menuItems.size()];
//       itemsarray=menuItems.toArray(itemsarray);
////       for(int j= 0;j < itemsarray.length;j++ )
////       {
////           Log.d("string is",(itemsarray[j]));
////       }
//      return itemsarray;
    }

      public int getCount() 
      {
       // TODO Auto-generated method stub
       return imageurl.length;
      }

      public Object getItem(int position) 
      {
       // TODO Auto-generated method stub
       return imageurl[position];
      }

      public long getItemId(int position) 
      {

       return position;
      }

      public View getView(int position, View convertView, ViewGroup parent) 
      {

//        System.out.println("sssssssss="+imageurl[position]);
//          View vi=convertView;   
//          ViewHolder holder;   
//          if(convertView==null)
//          {  
//              vi = inflater.inflate(R.layout.main, null); 
//              holder=new ViewHolder();  
//              holder.text=(TextView)vi.findViewById(R.id.Txt01);  
//              holder.image=(ImageView)vi.findViewById(R.id.imageview1);   
//              vi.setTag(holder);   
//          }

       Bitmap bitmap=DownloadImage(imageurl[position]);
       View rowView = LayoutInflater
         .from(parent.getContext())
         .inflate(R.layout.main, null);
//     
       ImageView imgview=(ImageView)rowView.findViewById(R.id.imageview1);     
       imgview.setImageBitmap(bitmap);

//     
//     ImageView imgviewindia=(ImageView)rowView.findViewById(R.id.imageviewindia);
//     imgviewindia.setImageBitmap(bitmap);

//     TextView listTextView = (TextView)rowView.findViewById(R.id.);
//     listTextView.setText(getelement()[position]);           
       return rowView;
      } 

      private Bitmap DownloadImage(String URL)
        {        
//          System.out.println("image inside="+URL);
            Bitmap bitmap = null;
            InputStream in = null;        
            try
            {
                in = OpenHttpConnection(URL);
                bitmap = BitmapFactory.decodeStream(in);
                in.close();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
//          System.out.println("image last");
            return bitmap;                
        }
        private InputStream OpenHttpConnection(String urlString)
                throws IOException
                {
                    InputStream in = null;
                    int response = -1;

                    URL url = new URL(urlString);
                    URLConnection conn = url.openConnection();

                    if (!(conn instanceof HttpURLConnection))                    
                        throw new IOException("Not an HTTP connection");                   
                    try{
                        HttpURLConnection httpConn = (HttpURLConnection) conn;
                        httpConn.setAllowUserInteraction(false);
                        httpConn.setInstanceFollowRedirects(true);
                        httpConn.setRequestMethod("GET");
                        httpConn.connect();

                        response = httpConn.getResponseCode();                
                        if (response == HttpURLConnection.HTTP_OK) 
                        {
                            in = httpConn.getInputStream();                                
                        }                    
                    }
                    catch (Exception ex)
                    {
                        throw new IOException("Error connecting");            
                    }
                    return in;    
        }
      }
//  } 
```

主要.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageview1"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="-20dp"
        android:layout_width="120dp"
        android:layout_height="100dp"        
        android:paddingLeft="10dp"
        android:paddingRight="10dp" 
        />
      <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/Txt01" />

</LinearLayout> 
```

我的主要活动代码：

```
public class NewspapperActivity extends Activity 
{
    /** Called when the activity is first created. */
    Context ctx;

    static final String URLHeading = "http://aaaaaa.in/cccccc.xml";
    String[] headingurl=new String[20];
//    ListViewwithimageAdapter adapter;
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.galleryview);        
//        ArrayList<String>item = new ArrayList<String>();

        Heading parser = new Heading();       
        String xmldata = parser.getXmlFromUrl(URLHeading);

        Document domelement = parser.getDomElement(xmldata);

        NodeList node = domelement.getElementsByTagName("item");

//        int i ;

        TextView txt1 = (TextView)findViewById(R.id.Text01);
        TextView txt2 = (TextView)findViewById(R.id.Text02);
        TextView txt3 = (TextView)findViewById(R.id.Text03);
        TextView txt4 = (TextView)findViewById(R.id.Text04);
        TextView txt5 = (TextView)findViewById(R.id.Text05);

//        glly.setAdapter(adapter);
//        System.out.println("prakash4");
//        for(i=0 ; i < node.getLength();i++)
//        {
            Element e0 = (Element) node.item(0);
            txt1.setText(parser.getValue(e0, "sectionname"));

            Element e1 = (Element) node.item(1);
            txt2.setText(parser.getValue(e1, "sectionname"));

            Element e2 = (Element) node.item(2);
            txt3.setText(parser.getValue(e2, "sectionname"));

            Element e3 = (Element) node.item(3);
            txt4.setText(parser.getValue(e3, "sectionname"));

            Element e4 = (Element) node.item(4);
            txt5.setText(parser.getValue(e4, "sectionname"));

            Gallery glly= (Gallery)findViewById(R.id.Gallery01);
            Gallery glly2= (Gallery)findViewById(R.id.Gallery02);
            Gallery glly3= (Gallery)findViewById(R.id.Gallery03);
            Gallery glly4= (Gallery)findViewById(R.id.Gallery04);
            Gallery glly5= (Gallery)findViewById(R.id.Gallery05);
//          GridView gv = (GridView)findViewById(R.id.grid);

//          ListViewwithimageAdapter adapter = ListViewwithimageAdapter.getInstance();
            GalleryviewAdapter adapter=GalleryviewAdapter.getInstance();
            glly.setAdapter(adapter);    
            glly.setSelection(1);
            glly2.setAdapter(adapter);
            glly2.setSelection(1);
            glly3.setAdapter(adapter);
            glly3.setSelection(1);
            glly4.setAdapter(adapter);
            glly4.setSelection(1);
            glly5.setAdapter(adapter);
            glly5.setSelection(1);
//          item.add(parser.getValue(e, "sectionname"));
//        }
//        gv.setAdapter(new GridviewImageAdapter(this));

    } 
```

}

我是新手..请帮助我。提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:35:48.540

使用下面的 xml 代码而不是您的 xml 代码，它将解决您的问题，如果您对此有任何问题，请告诉我。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/imageview1"
            android:layout_width="120dp"
            android:layout_height="100dp"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="-20dp"
            android:paddingLeft="10dp"
            android:paddingRight="10dp" 
            android:src="@drawable/ic_launcher"/>

        <TextView
            android:id="@+id/Txt01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/imageview1"
            android:layout_centerHorizontal="true"
            android:text="Dipak" />
    </RelativeLayout>

</RelativeLayout> 
```

# spring - struts 2 和 jquery ajax 调用

> ID：13506538
> 
> 赞同：0
> 
> 时间：2012-11-22T05:44:28.830
> 
> 标签：spring, jquery, struts2, struts2-jquery

我正在使用 Spring3、struts 2 和 jquery jquery-1.8.2.js 开发 web 项目。

这是我的 jquery ajax 调用

```
function(){

    var data = {};

    data['patientFETO.title'] = $('#idSelTitle').val().trim();
    data['patientFETO.firstName'] = $('#idFirstName').val().trim();
    data['patientFETO.lastName'] = $('#idLastName').val().trim();
    data['patientFETO.mobileNumber'] = $('#idMobileNumber').val().trim();
    data['patientFETO.idNumber'] = $('#idIDNumber').val().trim();
    data['patientFETO.gender'] = $('#idSelGender').val().trim();
    data['patientFETO.age'] = $('#idAge').val().trim();
    data['patientFETO.dob'] = $('#idDOB').val().trim();

    $.ajax({url:'savePatientAction', 
        cache: false,
        type:"POST",
        data:data, 
        dataType: 'json',
        error: function(XMLHttpRequest, textStatus, errorThrown){
            alert('Error ' + textStatus);
            alert(errorThrown);
            alert(XMLHttpRequest.responseText);
        },
        success: function(data){         
            alert('SUCCESS');

           } 
```

这是我的 struts 动作映射

```
<action name="savePatientAction" class="appointmentAction" method="doPatientSave">
        <result name="success">/account/confirmation.jsp</result>
        <exception-mapping result="success" exception="e"></exception-mapping>
    </action> 
```

当我运行它给出 SyntaxError: JSON.parse: unexpected character " [http://localhost:8080/ML/resources/js/jquery-1.8.2.js](http://localhost:8080/ML/resources/js/jquery-1.8.2.js) " Line 7764

请给我解决这个问题的想法谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:59:40.570

请按照以下步骤操作： 1\. struts.xml - 您需要启用 JSON 结果类型 2\. 在您的操作映射中，

进行这些更改后，当您调用响应将是 JSON 类型，ajax 调用可以处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:58:04.927

该功能`$.ajax()`应该这样做：`error: function(jqXHR, textStatus, errorThrown)`，而不是`error: function(XMLHttpRequest, textStatus, errorThrown)`关于[DOCUMENT](http://api.jquery.com/jQuery.ajax/)：

```
A function to be called if the request fails. 
The function receives three arguments: 
The jqXHR (in jQuery 1.4.x, XMLHttpRequest) object, 
a string describing the type of error that occurred 
and an optional exception object, if one occurred. 
```

由于您正在使用`jquery 1.8, you should change the name of the parameter`

# javascript - 2.2.0 版本中由异常键触发的 knockout.js 值绑定

> ID：13506539
> 
> 赞同：3
> 
> 时间：2012-11-22T05:44:31.760
> 
> 标签：javascript, data-binding, knockout.js

考虑以下简单的示例：

```
<input data-bind="value: query, valueUpdate: 'afterkeydown'"/> 
```

在 knockoutjs 2.1.0 中，当我按下 , , 中的任何一个时，绑定`ctrl`不会被***触发***并且不会更新。`Up arrow``Down arrow``Shift`*`query`*

 *在 knockoutjs 2.2.0 中，绑定会针对上述所有按键触发。

这对一些现有代码造成了严重破坏（它是一个自动完成功能，并且经常使用向上和向下箭头从下拉列表中进行选择）。

哪种行为是正确的？我假设从技术上讲，后者是正确的，因为这些按下这些键**是**一个 keydown 事件，但是如果值发生变化，绑定不应该只触发吗？

我想保持一切实时，[文档状态](http://knockoutjs.com/documentation/value-binding.html)：

> 如果您想实时更新视图模型，“afterkeydown”是最佳选择

建议？

*   ko 2.1.0 演示：http: [//jsfiddle.net/Rmcza/7/](http://jsfiddle.net/Rmcza/7/)
*   ko 2.2.0 演示：http: [//jsfiddle.net/Rmcza/8/](http://jsfiddle.net/Rmcza/8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T18:40:32.260

我按照`subscribe`上面建议的方法，但它似乎有点乱，不符合淘汰赛的精神。一位同事建议编写一个扩展器，在没有变化的情况下抑制绑定（这将模拟 2.1 的行为）：

```
ko.extenders.suppressNoChange= function(target) {
    var result = ko.computed({
        read: target,
        write: function(newValue) {
            var current = target();
            if (newValue!== current) {
                target(newValue);
            }
        }
    });
    result(target());
    return result;
}; 
```

所以现在我们可以扩展我们计算的 observables，这样绑定就不会在没有发生变化的情况下触发。

我们可以按如下方式使用它：

```
ko
  .computed({
     read: function(){},
     write: function(v){})
  .extend({
     suppressNoChange: null
  }); 
```

并允许我对问题中的 2.2 小提琴进行非常小的更改以恢复 2.1 行为。

见[http://jsfiddle.net/Rmcza/26/](http://jsfiddle.net/Rmcza/26/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:57:30.450

我认为这是RP Niemeyer 在 9 月所做的[更改](https://github.com/SteveSanderson/knockout/commit/4fe4f0fc1313e82cf84e031e2e8412631d51a256)的结果。它导致计算的可观察对象在触发时始终写入，即使值没有更改。

您会在[这个小提琴](http://jsfiddle.net/Rmcza/10/)中注意到，在使用非计算的 observable 时*不会*发生这种情况。我使用显式订阅对此进行了测试，并且向下箭头不会触发该事件。

```
this.test = ko.observable('');
this.test.subscribe(function(newValue) {
    alert("The test value new name is " + newValue);
}); 
```

也许 Ryan 可以解释为什么会发生这种变化，以及为什么在这种情况下计算的行为与常规的 observables 不同。您可能想在 GitHub 页面上提出问题。*

# java - 关闭窗口后如何正确停止 Java 小程序

> ID：13506540
> 
> 赞同：3
> 
> 时间：2012-11-22T05:44:31.410
> 
> 标签：java

于是，我做了一个小程序游戏，放到了一个网页上。我注意到关闭小程序所在的页面后声音一直在播放。我做了一些研究，发现小程序仍在运行，即使在页面关闭后也是如此。我读到您应该使用`void destroy()`and`void stop()`方法来转储所有资源。有没有完全停止应用程序的正确方法？目前我只是让它创建一个 nullpointerexception 以在关闭时使应用程序崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T05:48:53.903

destroy 方法就是为了这个用途，我只是使用它，你可以确保它在小程序完成时被调用，你也可以在 finalize 部分调用它，例如：

```
public void finalize () {
    destroy();
} 
```

# c# - 使用 System.Runtime.Serialization.Json 反序列化 JSON

> ID：13506542
> 
> 赞同：2
> 
> 时间：2012-11-22T05:44:42.310
> 
> 标签：c#, json, deserialization, datacontractjsonserializer

我在使用 C# 反序列化一些 json 时遇到问题。

假设这是我正在发送的 json 片段（重复多次，但除了 id/name 没有别的）：

```
[
    {
    "id":0,
    "name":"N/A"
    },
    {
        "id":1,            
        "name":"Annie"            
    },
    {
        "id":2,            
        "name":"Olaf"            
    }    
] 
```

如果顶层被命名，我会做类似的事情

```
[DataContract]
public class ChampList
{
    [DataMember(Name = "SOMENAME")]
    public ElophantChamp[] ElophantChamps { get; set; }
}

[DataContract]
public class ElophantChamp
{
    [DataMember(Name = "id")]
    public int ID { get; set; }

    [DataMember(Name = "name")]
    public string Name { get; set; }

} 
```

然后通过调用它来反序列化它：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
HttpWebResponse response = (HttpWebResponse)request.GetResponse();

DataContractJsonSerializer jsonSerializer = new DataContractJsonSerializer(typeof(ChampList));
object objResponse = jsonSerializer.ReadObject(response.GetResponseStream());
ChampList jsonResults = objResponse as ChampList; 
```

但是在没有顶级容器对象并且我不能有空白数据成员名称的情况下，我该怎么办？如果我将 DataMember 保留为未命名（即，将其保留为 [DataMember]），我只会得到一个空值，这表明无法正确解析它。

没有错误被抛出，并且 sesponse 流完全符合我的期望。

根据我所能告诉的搜索和基本推理，我应该离我需要去的地方不远。我在处理最高级别时做错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:49:51.813

没有父类 ChampList 是否可以工作？

```
DataContractJsonSerializer jsonSerializer = new DataContractJsonSerializer(typeof(ElophantChamp[]));
object objResponse = jsonSerializer.ReadObject(response.GetResponseStream());
ElophantChamp[] jsonResults = objResponse as ElophantChamp[]; 
```

# exchange-server - 使用 lotusscript 代理或 Java 代理或 Javascript 语言将交换邮件导出到 Excel

> ID：13506547
> 
> 赞同：-2
> 
> 时间：2012-11-22T05:45:40.213
> 
> 标签：exchange-server, lotus-notes, exchangewebservices, lotus-domino, lotusscript

我想使用 lotusscript 代理或 Java 代理或 Javascript 语言将交换服务器上的邮件（主题行和正文内容）导出到 Excel。我怎样才能做到这一点？任何想法、建议或示例代码都是可观的。

* * *

在做 reasearch 后发现了从 POP3 服务器下载邮件的代码。我使用了下面的代码，但卡在了**var oServer = new ActiveXObject("EAGetMailObj.MailServer");** 出现错误 - “**自动化服务器无法创建对象**”。然后我将主机 url 放在受信任的站点中并启用 IE 的活动 x 控制设置，但也得到了同样的错误。有什么想法，为什么？

以下代码演示了如何从 POP3 邮件帐户接收电子邮件。此示例从 POP3 服务器下载电子邮件并在检索到电子邮件后删除该电子邮件。

代码：

```
MailServerPop3 = 0;
MailServerImap4 = 1;

try
{
var oServer = new ActiveXObject("EAGetMailObj.MailServer");
// please change the server, user, password to yours
oServer.Server = "pop3.adminsystem.com"
oServer.Protocol = MailServerPop3;

oServer.User = "testx";
oServer.Password = "testpassword";

// If your server requires SSL connection, 
// Please add the following codes.
oServer.SSLConnection = true;
oServer.Port = 995;

var oClient = new ActiveXObject("EAGetMailObj.MailClient");
oClient.LicenseCode = "TryIt";

// Connect POP3 server.
oClient.Connect(oServer);

var infos = new VBArray(oClient.GetMailInfos()).toArray();
for (var i = 0; i < infos.length; i++) {
    var info = infos[i];

    // Receive email from POP3 server
    var oMail = oClient.GetMail(info);

    // Save email to local disk
    oMail.SaveAs("d:\\" + i + "_test.eml", true);

    // Mark email as deleted on server.
    oClient.Delete(info);
}

// Quit and pure emails marked as deleted from POP3 server.
oClient.Quit
}
catch( err )
{

 WScript.Echo( err.description );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:34:16.277

[您可以在http://archive.msdn.microsoft.com/ewsjavaapi](http://archive.msdn.microsoft.com/ewsjavaapi)使用 Java 和 Exchange Web 服务 API Java 实现

# iphone - 如何将 NSString 转换为固定块大小的十六进制字符串

> ID：13506556
> 
> 赞同：-2
> 
> 时间：2012-11-22T05:46:38.727
> 
> 标签：iphone, objective-c, ios, xcode

在我的应用程序中，我将**NSString**转换为**HexString**。但我总是需要一个固定大小（16 字节）的十六进制字符串，例如，如果我的十六进制字符串的长度是 15 字节，我希望它是 16 字节。我知道我可以在十六进制字符串的开头添加零，但是如何添加它，因为当我将它转换回 NSString 时，简单地添加一个“0”是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:17:05.560

你可以试试这个代码......

```
+ (NSString *) stringToHex:(NSString *)str
{   
 NSUInteger len = [str length];
   unichar *chars = malloc(len * sizeof(unichar));
   [str getCharacters:chars];

  NSMutableString *hexString = [[NSMutableString alloc] init];

    for(NSUInteger i = 0; i < len; i++ )
    {
      // [hexString [NSString stringWithFormat:@"%02x", chars[i]]]; //previous input

      [hexString appendFormat:@"%02x", chars[i]]; //EDITED PER COMMENT BELOW
    }
    free(chars);

   return [hexString autorelease];
 }
```

我希望这能帮到您。快乐编码。

# symfony - 反式树枝过滤器中的 Symfony2 HTML

> ID：13506561
> 
> 赞同：16
> 
> 时间：2012-11-22T05:47:06.410
> 
> 标签：symfony, translation, twig

我使用 Symfony2.1 并拥有默认的 config.yml

[文档说](http://symfony.com/doc/current/book/translation.html#twig-templates)：

```
 {# but static strings are never escaped #}
  {{ '<h3>foo</h3>'|trans }} 
```

但是，如果我将它复制并粘贴到我的空模板中（没有任何额外的自动转义或其他），我得到了转义字符串`<h3>foo</h3>`。我做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-22T18:45:34.817

尝试使用[twig raw 过滤器](http://twig.sensiolabs.org/doc/filters/raw.html)：

```
{{ '<h3>foo</h3>' | trans | raw }} 
```

`raw`但是，如果您正在处理任何用户输入，请不要使用过滤器！[据Symfony 的创建者称，](http://blog.insight.sensiolabs.com/2013/11/28/a-new-batch-of-rules.html)它允许跨站点脚本攻击。有关安全但更繁琐的替代方案，请参阅[此类似问题](https://stackoverflow.com/questions/14891977/html-inside-translation-message)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-24T08:20:11.823

在翻译中保留 HTML 内容是错误的，因为翻译人员通常会破坏它。但如果你*真的*需要它：

```
{% trans %}<h3>foo</h3>{% endtrans %} 
```

[https://github.com/symfony/symfony/issues/2713#issuecomment-12510417](https://github.com/symfony/symfony/issues/2713#issuecomment-12510417)

# syntax - Prolog“或”运算符，查询

> ID：13506569
> 
> 赞同：28
> 
> 时间：2012-11-22T05:47:42.530
> 
> 标签：syntax, prolog, operators, logic

我正在编写一些我不熟悉的序言。

我正在寻找“或”运算符

```
registered(X, Y), Y=ct101, Y=ct102, Y=ct103. 
```

这是我的查询。我想写的是这样的代码：

“返回 X，假设 Y 等于值 Z 或值 Q 或值 P”

如果 Y 等于所有 3，我要求它返回 X。这里的 or 运算符是什么？有吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-23T08:16:56.543

只是另一种观点。在 Prolog 中执行“或”也可以使用“分离”运算符或分号：

```
registered(X, Y) :-
    X = ct101; X = ct102; X = ct103. 
```

更全面的解释：

[Prolog 中的谓词控制](https://stackoverflow.com/questions/4115021/predicate-control-in-prolog)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-22T06:12:40.923

您可以通过这种方式“调用”替代绑定`Y`：

```
...registered(X, Y), (Y=ct101; Y=ct102; Y=ct103). 
```

请注意括号是保持正确的执行控制流所必需的。/ `;`2 它是通用`or`运算符。对于您的限制使用，您也可以选择更惯用的

```
...registered(X, Y), member(Y, [ct101,ct102,ct103]). 
```

回溯时将 Y 绑定到列表的*每个*成员。

**编辑**我延迟理解你的最后一个要求。如果您希望 Y 匹配*所有*3 个值 or 不合适，请改用

```
...registered(X, ct101), registered(X, ct102), registered(X, ct103). 
```

或更紧凑的

```
...findall(Y, registered(X, Y), L), sort(L, [ct101,ct102,ct103]). 
```

findall/3 以与 register/2 成功相同的顺序构建列表。然后我使用排序来确保匹配。

```
...setof(Y, registered(X, Y), [ct101,ct102,ct103]). 
```

setof/3 还对结果列表进行排序

# jsf - p:dataTable 初始化

> ID：13506573
> 
> 赞同：1
> 
> 时间：2012-11-22T05:48:17.863
> 
> 标签：jsf, primefaces

我有一个代码，我在其中将元素从方法添加到类类型列表中。但是，每当我尝试生成 ap:dataTable 时，列表的相应 get 方法都无法找出我已经添加的先前值。我的代码如下 -

```
List<LastToleranceExceed> excptn = new ArrayList<LastToleranceExceed>();

public void ret_approve(FlPendingList fl)throws SQLException{

  String q = "----My Query----";
  PreparedStatement pq=cn.prepareStatement(q);
  ResultSet rsq=pq.executeQuery();

  while(rsq.next()){
    excptn.add(new LastToleranceExceed(unit_name,energy_name,
                                       consump_id,date_list,
                                       shift_list,
                                       Edit_Quantity,
                                       Quantity,
                                       uom_list,
                                       violation));
  }

public List<LastToleranceExceed> getExcptn() throws SQLException{
  return excptn;
} 
```

在 Xhtml 中：

```
<p:dataTable value="#{flApproval.excptn}" 
             var="vio" 
             id="dt2" 
             rendered="#{flApproval.dt_show}">

  <p:column>
    <f:facet name="header">
      Date
    </f:facet>
    #{vio.activitydate}
  </p:column>

</p:dataTable> 
```

这段代码有什么问题？我怎样才能得到我添加的值？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:10:19.420

什么时候`ret_approve`调用方法，可能是在数据表初始化之后。您可以尝试`@PostConstruct`在`ret_approve`.

# android - 如何在android中为自定义对话框设置标题，图标

> ID：13506583
> 
> 赞同：1
> 
> 时间：2012-11-22T05:49:23.593
> 
> 标签：android

我有一个类在 android 中扩展了 Dialog。它很好地显示了自定义对话框。但我无法为该对话框设置图标和标题。我该怎么做？

**我的代码：**

```
public class helpDialog extends Dialog implements OnClickListener {
    Button okButton;
    String Description;
    TextView text;
    public helpDialog(Context context, String desc) {
        super(context);
        Description=desc;

        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        /** Design the dialog in main.xml file */
        setContentView(R.layout.custom);
        text=(TextView)findViewById(R.id.text);
        text.setText(Description);
        okButton = (Button) findViewById(R.id.submit);
        okButton.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        /** When OK Button is clicked, dismiss the dialog */
        if (v == okButton)
        dismiss();
    }
} 
```

**我的custom.xml：**

```
<TextView
    android:id="@+id/text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="20dp"
    android:textColor="#000000"
    android:gravity="center"
    android:text="Help alert for iDispatch"
    android:textSize="18dp" />

<Button
    android:id="@+id/submit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="OK"
    android:textColor="#FFFFFF" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:54:43.133

使用这个

```
private AlertDialog AskOption()
{
    AlertDialog myQuittingDialogBox =new AlertDialog.Builder(this) 
        //set message, title, and icon
        .setTitle("Confirm Delete") 
        .setMessage("Do you want to Delete Employee "+listview_array[1]+" ?") 
        .setIcon(R.drawable.dialog_warning)
        .setPositiveButton(resource.getString(R.string.yes), new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) 
            { 
                if(dh.selectEmployeeTypeById(EmpId).size()>0)
                {
                    //CODE

                }
                dialog.dismiss();
            }   
        })
        .setNegativeButton(resource.getString(R.string.no), new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        })
        .create();
        return myQuittingDialogBox;
} 
```

对于自定义对话框一个小示例布局这是我的自定义对话框

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:orientation="vertical"
tools:context=".StaffTimeClock" >

<TextView android:id="@+id/img"
android:layout_width="fill_parent"
android:text="@string/selectjob"
android:gravity="center"
android:textSize="30dp"
android:textColor="#fff"
android:background="#203C56"
android:padding="10dp"
android:layout_height="wrap_content"/>

<ListView
android:id="@+id/list"
android:layout_weight="1"
android:layout_width="fill_parent"
android:layout_height="0dp"
android:cacheColorHint="#222000" />

<View
android:layout_width="fill_parent"
android:layout_height="3dp"
android:background="#000"/>

<LinearLayout android:id="@+id/lin00"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#fff"
android:orientation="horizontal">

<Button
 android:layout_weight="0.1"
 android:contentDescription="@string/ok"
 android:id="@+id/okBtn"
 android:layout_gravity="center"
 android:layout_margin="10dp"
 android:padding="10dp"
 android:textSize="25dp"
 android:background="@drawable/toolbar_background"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:text="@string/ok"/>

 <Button
 android:layout_weight="0.1"
 android:contentDescription="@string/ok"
 android:id="@+id/selectBtn"
 android:layout_gravity="center"
 android:layout_marginTop="10dp"
 android:layout_marginBottom="10dp"
 android:padding="10dp"
 android:textSize="25dp"
 android:background="@drawable/toolbar_background"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:text="@string/selectall"/>

 <Button
 android:layout_weight="0.1"
 android:contentDescription="@string/cancel"
 android:id="@+id/cancelBtn"
 android:layout_gravity="center"
 android:layout_marginTop="10dp"
 android:layout_marginBottom="10dp"
 android:padding="10dp"
 android:textSize="25dp"
 android:background="@drawable/toolbar_background"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:text="@string/cancel"/>

 </LinearLayout>
 </LinearLayout> 
```

这是调用对话框的代码

```
 private void showPopUp(int eid)
 {
 final AlertDialog.Builder helpBuilder = new AlertDialog.Builder(this);
 helpBuilder.setTitle("");

 LayoutInflater inflater = getLayoutInflater();
 final View PopupLayout = inflater.inflate(R.layout.jobselection, null);
 helpBuilder.setView(PopupLayout);

 final AlertDialog helpDialog = helpBuilder.create();
  helpDialog.show();

 okbtn = (Button)PopupLayout.findViewById(R.id.okBtn);
 caneclbtn = (Button)PopupLayout.findViewById(R.id.cancelBtn);
 selectallbtn = (Button)PopupLayout.findViewById(R.id.selectBtn);
 clearallbtn = (Button)PopupLayout.findViewById(R.id.clearallBtn);

  jobList = (ListView)PopupLayout.findViewById(R.id.list);

  mylist = new ArrayList<HashMap<String, String>>();

  for(int i=0;i<Punchedjobs.size();i++)
  {
  map = new HashMap<String, String>();
  map.put("name", Punchedjobs.get(i));
  mylist.add(map);
  }
 sd = new SimpleAdapter(StaffTimeClock.this,mylist,R.layout.jobslist,
 new String[]{"name"},new int[]{R.id.jobText});
 jobList.setAdapter(sd);

 okbtn.setOnClickListener(new OnClickListener() {

 public void onClick(View v)
 {
 \\code

 }
 });

 caneclbtn.setOnClickListener(new OnClickListener()
 {
 public void onClick(View v)
 {
 helpDialog.dismiss();
 }
 });

 selectallbtn.setOnClickListener(new OnClickListener() {

 public void onClick(View v)
 {

 }
 );

 } 
```

# mongodb - 寻找 MongoDB benchrun 的样本

> ID：13506585
> 
> 赞同：0
> 
> 时间：2012-11-22T05:49:42.050
> 
> 标签：mongodb, amazon-web-services, benchmarking

我想使用 mongodb benchrun 运行一个基准测试，这将在后端存储上产生大量负载。同时将代表真实的应用程序工作负载。如果有人准备好一些js代码，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:58:33.677

您可以查看 github 上的 MongoDB 存储库 - 有多个使用 benchRun 的性能测试。 [https://github.com/mongodb/mongo/tree/master/jstests](https://github.com/mongodb/mongo/tree/master/jstests)在 bench_xxx.js 文件中有一些。

您还可以查看我在这里的一些示例脚本： [https ://github.com/asya999/bits-n-pieces/tree/master/benchRun](https://github.com/asya999/bits-n-pieces/tree/master/benchRun)

# javascript - 如何在 Flot 中通过 JSON 添加动态刻度？

> ID：13506586
> 
> 赞同：1
> 
> 时间：2012-11-22T05:49:47.993
> 
> 标签：javascript, jquery, flot

我想将 X 轴值从默认值更改为从 JSON 传递的动态刻度。

通过我的上一篇文章[How to plot time values in Flot Graph](https://stackoverflow.com/questions/13490667/how-to-plot-time-values-in-flot-graph/13496103#comment18485567_13496103)，我发现可以通过[Categories.js](https://github.com/flot/flot/blob/master/jquery.flot.categories.js)

我添加了 JS 并以以下格式修改了 My JSON，以匹配示例中给出的格式。

```
 [{"data":[["Over Time",5202]],"label":"Over Time"},{"data":[["Shift Start",19620]],"label":"Shift Start"},{"data":[["Maintenance break",82920]],"label":"Maintenance break"},{"data":[["Lunch break",240]],"label":"Lunch break"},{"data":[["BreakDown",75720]],"label":"BreakDown"},{"data":[["Break",3060]],"label":"Break"},{"data":[["Tea break",72840]],"label":"Tea break"}] 
```

我的 JS 代码为

```
 <script language="javascript" type="text/javascript">  
$(document).ready(function(){
$.getJSON('ReasonByTime.txt', function(json) {
    $.plot($("#placeholder"),json, {bars: { show: true, barWidth:0.2}, xaxis: { mode: "categories" }});
}); 
```

});

当我运行此代码时，x 轴不显示任何值，默认值也不会显示。我的结果图是这样的。

![在此处输入图像描述](../Images/32e20792d0c0bec92df2f4a866774627.png)

[我测试了code.google.com/p/flot/](http://code.google.com/p/flot/source/browse/trunk/examples/categories.html?r=341&spec=svn341)中给出的示例示例，但刻度/类别不起作用。我得到这样的例子的输出。

![在此处输入图像描述](../Images/f915105e3b64f55198c361ac3783bd0a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:59:20.027

Flot 现在托管在 github 之外： [https ://github.com/flot/flot](https://github.com/flot/flot)

如果你从那里获取[jquery.flot.js](https://github.com/flot/flot/blob/master/jquery.flot.js)和[jquery.flot.categories.js](https://github.com/flot/flot/blob/master/jquery.flot.categories.js)并运行你的代码，它就会工作。不起作用的是**jquery.flot.js**版本 0.7 与来自 github 的最新类别插件相结合。

我用这段代码运行它并正确显示：

```
var data = [{
    "data": [["Over Time", 5202]]},
{
    "data": [["Shift Start", 19620]]},
{
    "data": [["Maintenance break", 82920]]},
{
    "data": [["Lunch break", 240]]},
{
    "data": [["BreakDown", 75720]]},
{
    "data": [["Break", 3060]]},
{
    "data": [["Tea break", 72840]]}];

$.plot($("#placeholder"), data, {
    bars: {
        show: true,
        barWidth: 0.2
    },
    xaxis: {
        mode: "categories"
    }
});​ 
```

这是它的工作版本：http: [//jsfiddle.net/ryleyb/CQ3YS/](http://jsfiddle.net/ryleyb/CQ3YS/)

# javascript - 单击按钮时不会显示音频控件 JavaScript

> ID：13506597
> 
> 赞同：0
> 
> 时间：2012-11-22T05:50:08.850
> 
> 标签：javascript, css, html

我有一个问题，我正在将 JavaScript 嵌入到我的网站中，以便在单击按钮时显示音频控件。我用 CSS 隐藏了控件，我需要 JavaScript 在单击按钮时显示控件。这是我的代码。

```
<video id="videoBackground" poster="img/loading.gif" onload="function()" width="1920" height="1080" preload="auto" onprogress="animCD_onprogress();" onended="animCD_start();">
    <source id="colorVid_mp4" type="video/mp4" src="img/luther_color.mp4">      
</video>

    <audio id="audioInterview" preload='auto' controls>
        <source src="audio/interview.mp3" type="audio/mpeg">
    </audio>

<div class="buttonSkip" onclick="window.location='http://www.lrltv.org/muslims-nuclear.html'"></div>

<div id="buttonPlacement" class="buttonPlacement">
    <div onclick="showAudio('audioInterview')"; class="btnDonate"></div>
    <div onclick="alert('Clicked Buy');" class="btnBuy"></div>  
</div>

<!-- Show Audio when button is clicked -->

<script>
    function showAudio('audioInterview')
    {
        var obj=document.getElementById('audioInterview');
        obj.className = 'show';
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:03:56.267

```
function showAudio('audioInterview')
{
    var obj=document.getElementById('audioInterview');
    obj.className = 'show';
} 
```

错了，应该是

```
 function showAudio(controlId)
    {
        var obj=document.getElementById(controlId);
        obj.className = 'show';
    } 
```

# python - Python os.exec()：在运行“通知发送”时终止

> ID：13506600
> 
> 赞同：1
> 
> 时间：2012-11-22T05:50:36.863
> 
> 标签：python, exec, libnotify

我正在 Linux 下编写一个小 Python 脚本，它会弹出许多`libnotify`弹出窗口，目前使用以下语法：

```
import os
os.execv('/usr/bin/notify-send', ['App Title', 'Message']) 
```

不幸的是，出于某种奇怪的原因，它直接将解释器杀死到命令提示符处。
它不会对脚本执行的任何其他命令执行此操作，只是`notify-send`.

没有给出错误，没有抛出已知的异常，没有任何错误的迹象，它只是在命令提示符下消失。

有没有人有同样容易做到的建议或替代方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T05:57:20.870

您应该使用`subprocess.call`which 在新进程中启动由其参数命名的程序并等待子进程退出，而不是`os.execv`用其参数指定的程序替换当前进程中正在运行的程序。

用法是`subprocess.call(['/usr/bin/notify-send', 'App Title', 'Message'])`

# javascript - 在 Visual Studio 2010 或 2012 中发布网站时自动缩小 JavaScript 文件？

> ID：13506601
> 
> 赞同：15
> 
> 时间：2012-11-22T05:50:38.953
> 
> 标签：javascript, asp.net, visual-studio-2010, minify, publishing

VS 2010 或 2012 中是否有任何方法可以在发布时缩小 JavaScript 文件？

我想要自动缩小 js 文件。有什么好的压缩例子吗？

**请注意，我没有使用 MVC。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T05:53:02.587

使用 MVC 4。它捆绑多个脚本并缩小它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T05:52:55.577

如果您使用的是 ASP.NET 4.5 ，则可以查看[捆绑和缩小。](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

# jsp - 我的网页显示一些 apache tomcat 错误，但没有显示我网站的正确页面

> ID：13506602
> 
> 赞同：0
> 
> 时间：2012-11-22T05:50:48.453
> 
> 标签：jsp, tomcat

我网站中的一个 apge 没有正确显示，它显示 Apache Tomcat 错误，内容如下：

类型异常报告

信息

描述：服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

堆栈跟踪：org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:553) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:457) org.apache.jasper.servlet.JspServlet.serviceJspFile( JspServlet.java:391) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) org.netbeans.modules.web.monitor。 server.MonitorFilter.doFilter(MonitorFilter.java:393)

根本原因

这是我在打开 jsp 页面时遇到的错误代码的一部分。请帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:03:39.727

在您的 JSP 中的某个地方，您在调用`.nextToken()`时没有检查`.hasMoreTokens()`. 这是通常的模式（来自[docs](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/StringTokenizer.html)）：

```
 StringTokenizer st = new StringTokenizer("this is a test");
 while (st.hasMoreTokens()) {
     System.out.println(st.nextToken());
 } 
```

如果您只是打电话`.nextToken()`而不检查令牌是否可用，有时您会遇到错误。

# jquery - jQuery 复制 HTML 元素并为所有子 ID 添加值

> ID：13506603
> 
> 赞同：0
> 
> 时间：2012-11-22T05:50:49.647
> 
> 标签：jquery, variables, append, clone, attr

有趣的一个。我正在开发一个大型的模块化表单，用户可以在其中添加或删除服务，并且需要进入 DOM，复制一个 HTML 元素，并在它的末尾添加一个值，它是孩子的​​ ID。

例如：

```
<li id="serviceModule" class="serviceModule">
    <ol>
        <li id="subModuleTypeA">subModule</li>
        <li id="subModuleTypeB">
            <ol>
                <li id="subModuleTypeASubModuleX">subSubModule</li>
                <li id="subModuleTypeASubModuleY">subSubModule</li>
                <li id="subModuleTypeASubModuleZ">subSubModule</li>
            </ol>
        </li>
        <li id="subModuleTypeC">subModule</li>
    </ol>
</li> 
```

会成为：

```
<li id="serviceModule1" class="serviceModule">
    <ol>
        <li id="subModuleTypeA1">subModule</li>
        <li id="subModuleTypeB1">
            <ol>
                <li id="subModuleTypeASubModuleX1">subSubModule</li>
                <li id="subModuleTypeASubModuleY1">subSubModule</li>
                <li id="subModuleTypeASubModuleZ1">subSubModule</li>
            </ol>
        </li>
        <li id="subModuleTypeC1">subModule</li>
    </ol>
</li> 
```

增值方法：

```
$.fn.valulator = function(magic){

    var thiis = $(this),
        el,
        id;

    thiis.add(thiis.children()).each(function(){

        el = $(this);
        id = el.attr('id');

        el.attr('id', id + magic);
    });

    return this;
}; 
```

触发的绑定`valulator`：

```
$add.click(function(event){

    event.preventDefault();

    $index = $index + 1;
    $('.serviceModule')
        .clone()
        .valulator($index)
        .appendTo('#services');
}); 
```

谢谢你的帮助！这是一个 jsFiddle：http: [//jsfiddle.net/phqvr/3/](http://jsfiddle.net/phqvr/3/)

* * *

更新

发现我遇到的第一个问题`valulator()`是`children()`只会带来直接后代..相反，我需要搜索所有元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:22:03.307

使用下面的代码，

`$(this).find('li').attr('id',$(this).find('li').attr('id')+ magic);`

我改变了小提琴，检查这个[http://jsfiddle.net/B2SdM/](http://jsfiddle.net/B2SdM/)

它将生成 id 为 1,2,3... 等的新元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:27:10.980

知道了; 有两个问题。

1）如更新中所述，`children()`仅遍历了一个级别 - 将其重新设计为：

```
thiis.find('*').andSelf().each() 
```

2）在我的小提琴中，有一个附加条件`if(el[id])`总是会失败。替换为以下代码以防止添加到没有 ID 开头的元素：

```
if (id){} 
```

完整的工作代码在这里：http: [//jsfiddle.net/phqvr/4/](http://jsfiddle.net/phqvr/4/)

```
 $.fn.valulator = function(magic){

        var thiis = $(this),
            el,
            id;

        thiis.find('*').andSelf().each(function(){

            el = $(this);
            id = el.attr('id');            

            if (id){

                el.attr('id', id + magic);
            }
        });

        return this;
    }; 
```

# magento - 添加js代码以在magento的控制器中创建布局

> ID：13506604
> 
> 赞同：0
> 
> 时间：2012-11-22T05:50:53.947
> 
> 标签：magento

我正在使用我的控制器中创建一个块

> $this->_addContent($this->getLayout()->createBlock('mymodule/mymodule_newpage')

有什么办法可以将 js 代码嵌入到 addcontent 函数中。我不想添加完整的 js，而是添加一大段代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:24:03.963

您可以通过在选项卡`(mymodule/mymodule_newpage)`下写入该特定 js 文件来将其添加到静态块中`content`。

```
<script type="text/javascript" src="http://your_site.com/js/your_js_file.js"></script> 
```

虽然我不是 100% 确定。
试一下。
祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:10:52.323

你可以试试：

$this->_addContent($this->getLayout()->createBlock('core/text')->setText('你的脚本在这里'));

Obs：我无法让 sintax highlight fpr PHP 工作了......

# javascript - Javascript将数字转换为给定格式

> ID：13506605
> 
> 赞同：6
> 
> 时间：2012-11-22T05:51:02.177
> 
> 标签：javascript, jquery

我得到了 java-script Number 格式的要求，如下所示

我需要一个函数，它有 2 个参数，比如

```
var number = 1000;
var format = #,###.0; //or #,### ; 

function ConvertNumber(number, format){   
    // this function need to return 1,000.0 if format is #,###.0
    // this function need to return 1,000 if format is #,### 
} 
```

任何人都可以拥有这种功能吗？非常感谢您的帮助谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:54:43.327

您可以从 JQuery 中设置[NumberFormatter](http://plugins.jquery.com/project/numberformatter)插件。

这是您如何使用此插件的示例。

```
$("#salary").blur(function(){
    $(this).format({format:"#,###.00", locale:"de"});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:02:52.460

**试试这个：**

```
function ConvertNumber(number, decimals, dec_point, thousands_sep) {

  // Strip all characters but numerical ones.
  number = (number + '').replace(/[^0-9+\-Ee.]/g, '');
  var n = !isFinite(+number) ? 0 : +number,
    prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),
    sep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,
    dec = (typeof dec_point === 'undefined') ? '.' : dec_point,
    s = '',
    toFixedFix = function (n, prec) {
      var k = Math.pow(10, prec);
      return '' + Math.round(n * k) / k;
    };

  // Fix for IE parseFloat(0.55).toFixed(0) = 0;
  s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');
  if (s[0].length > 3) {
    s[0] = s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, sep);
  }
  if ((s[1] || '').length < prec) {
    s[1] = s[1] || '';
    s[1] += new Array(prec - s[1].length + 1).join('0');
  }
  return s.join(dec);
}​ 
```

**例子：**

```
example 1: ConvertNumber(1234.5678, 2, '.', ',');
returns 1: '1,234.57'

example 2: ConvertNumber(1000);
returns 2: '1,000'

example 3: ConvertNumber(1000.55, 1);
returns 3: '1,000.6'

example 4: ConvertNumber(67000, 5, ',', '.');
returns 4: '67.000,00000'

example 5: ConvertNumber('1.20', 4);
returns 5: '1.2000' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T08:36:48.103

检查这个功能...

```
var number = 1000; // int or float or string
var format = '#,###.0'; // you can put any format that you want... only string

function ConvertNumber(number, format){
    var tail=format.lastIndexOf('.');number=number.toString();
    tail=tail>-1?format.substr(tail):'';
    if(tail.length>0){if(tail.charAt(1)=='#'){
        tail=number.substr(number.lastIndexOf('.'),tail.length);
    }}
    number=number.replace(/\..*|[^0-9]/g,'').split('');
    format=format.replace(/\..*/g,'').split('');
    for(var i=format.length-1;i>-1;i--){
        if(format[i]=='#'){format[i]=number.pop()}
    }
    return number.join('')+format.join('')+tail;
}

// Examples
// ConvertNumber(1234,'#,###') === 1,234
// ConvertNumber(1234,'#,###.00') === 1,234.00
// ConvertNumber(1234,',###.00') === 1,234.00
// ConvertNumber(1234.4575,',###.##') === 1,234.45
// ConvertNumber(1234567890.4575,',###,###,###.##') === 1,234,567,890.45
// ConvertNumber(123.4575,',#,#.##') === 1,2,3.45
// ConvertNumber(123456.4575,'-#-#.##') === 1234-5-6.45
// ConvertNumber(1234567.4575,' ## ###.##') === 12 34 567.45 
```

希望此功能对您和遇到相同问题的人非常有帮助...祝您好运...

# c++ - 替换 LLVM 指令的操作数

> ID：13506607
> 
> 赞同：4
> 
> 时间：2012-11-22T05:51:09.830
> 
> 标签：c++, compiler-construction, llvm

在以下代码中，我尝试替换 LLVM 指令的操作数。但是它不起作用，并且没有任何改变。知道如何解决这个问题吗？

```
for (OI = insn->op_begin(), OE = insn->op_end(); OI != OE; ++OI)
{
    Value *val = *OI;
    iter = mapClonedAndOrg.find( val );

    if( iter != mapClonedAndOrg.end( ) )
    {
        // Here I try to replace the operand, to no effect!
        val = (Value*)iter->second.PN;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T06:31:16.473

您应该使用迭代器`OI`来替换它，而不是本地指针`val`。所以应该是这样的。

```
for (OI = insn->op_begin(), OE = insn->op_end(); OI != OE; ++OI)
{
    Value *val = *OI;
    iter = mapClonedAndOrg.find( val );

    if( iter != mapClonedAndOrg.end( ) )
    {
        *OI = (Value*)iter->second.PN;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T06:09:07.870

你所做的只是让一个本地指针指向别的东西，你实际上并没有改变它指向的*东西。*为此，您需要使用取消引用运算符`*`：

```
*val = *((Value*) iter->second.PN); 
```

# vba - VBA 中的 MS 通信控制

> ID：13506611
> 
> 赞同：1
> 
> 时间：2012-11-22T05:52:18.017
> 
> 标签：vba, excel, vb6, serial-port

我正在为 Excel 使用 VBA。我的要求是在 VBA 中创建的表单应通过我系统的串行端口与外部系统通信。出于同样的目的，就像我们在 VB 中所做的那样，我正在尝试在 VBA 中添加 MS Comm Control。

我可以通过从`Tools -> Additional Controls`. 但是，当我尝试`MSComm`对我的表单进行控制时，它给了我以下错误。

> 指定操作不信任主题。

因此，我无法将控件放在我的表单上，因此无法使用它。

对于 MS `Winsock`Control，观察到相同的行为。

在 stackoverflow 上发现了一个类似的问题：[MSCOMM32.ocx 使用导致 Not Trusted Error](https://stackoverflow.com/questions/1403647/mscomm32-ocx-excel-vba-problem)没有任何具体答案。

我的安装是：Win XP - SP3、MS Office 2010、VB6、MS VS 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:00:38.763

在 Excel 宏（或任何第 3 方程序或编程语言）中合法使用 VB6 控件受到限制。唯一的例外是当您拥有 Office Developer Edition 的许可（或在较新版本的 Office 中包含 VSTO 或同等产品的额外开发人员包），或者如果您只是创建它们以在安装了 VB6 的同一台机器上使用。

但是您的问题可能与 Microsoft kill-bitting OCX（阻止在 IE 和 Office 中使用？）有关，或者更可能是您使用的是 64 位 Excel（因此是 64 位 VBA）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-22T00:24:10.013

我遇到了类似的问题，但使用的是 MsWinSck.OCX。[我通过从http://www.nirsoft.net/utils/acm.html](http://www.nirsoft.net/utils/acm.html)加载 ActiveX 兼容性管理器来修复它，并通过在行中选择 OCX 来启用 OCX (Winsck.OCX)，然后单击菜单上的绿色 LED。

希望这可能会有所帮助。

# .net - Excel 加载项在运行时未加载 COM 加载项

> ID：13506613
> 
> 赞同：1
> 
> 时间：2012-11-22T05:52:45.350
> 
> 标签：.net, excel, add-in

我们使用 ExcelDNA 在 VB .Net 中创建了一个 Excel 插件。此加载项还动态创建 COM 加载项，在 Excel 中创建自定义任务窗格。

这一直在我们的客户端计算机上运行，​​但是由于某种原因，自定义任务窗格加载项消失了。从下图中可以看出，有 2 个加载项，这是正确的，但在我们的客户端机器上它显示 1 个加载项，即只有 Excel 加载项，但它之前在他们的机器上工作过。

我们已经尝试了以下方法：

o 删除了所有冲突的插件

o 卸载并重新安装我们的 RDA

o 检查 RDA 的注册表项

o 通过 excel addins -> Go 重新添加 RDA 插件

o 禁用防病毒

o 将 dll 和 .xll 文件从工作机器复制到客户端机器。

似乎没有任何工作......

![加入](../Images/eda8f68202ae4c491a301ea1758ae1ec.png)

# php - 如何使用php编辑和保存表中的行

> ID：13506616
> 
> 赞同：0
> 
> 时间：2012-11-22T05:53:00.700
> 
> 标签：php, javascript, mysql

我有一个页面显示我的表格的所有内容。除了表格的每一行，我还有一个包含复选框的列。我已经实现了这个来删除行。如果我想在表格中编辑和保存更改，我应该如何处理？下面是我为删除实现的代码。

```
<?php
// Connect to server and select databse.
mysql_connect("localhost", "root", "")or die("cannot connect"); 
mysql_select_db("project")or die("cannot select DB");

$sql="SELECT * FROM menu";
$result=mysql_query($sql);

$count=mysql_num_rows($result);
?>

<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<td><form name="form1" method="post" action="">
<table width="400" border="0" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<td bgcolor="#FFFFFF">&nbsp;</td>
<td colspan="4" bgcolor="#FFFFFF"><strong>Delete multiple rows in mysql</strong> </td>
</tr>
<tr>
<td align="center" bgcolor="#FFFFFF">#</td>
<td align="center" bgcolor="#FFFFFF"><strong>Vendor_id</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Item_id</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Item_name</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Price</strong></td>
</tr>

<?php
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td align="center" bgcolor="#FFFFFF"><input name="checkbox[]" type="checkbox" id="checkbox[]" value="<?php echo $rows['item_id']; ?>"></td>
<td bgcolor="#FFFFFF"><?php echo $rows['vendor_id']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $rows['item_id']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $rows['item_name']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $rows['Price']; ?></td>
</tr>

<?php
}
?>

<tr>
<td colspan="5" align="center" bgcolor="#FFFFFF"><input name="delete" type="submit" id="delete" value="Delete"></td>
</tr>

<?php

// Check if delete button active, start this 
if(isset($_POST['delete'])){
$checkbox = $_POST['checkbox'];
for($i=0;$i<count($_POST['checkbox']);$i++){
$del_id = $checkbox[$i];
$sql = "DELETE FROM menu WHERE item_id='$del_id'";
$result = mysql_query($sql);}

if($result){echo "<meta http-equiv=\"refresh\" content=\"0;URL=delete_menu.php\">";}}
mysql_close();
?>
</table></form></td></tr></table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:09:37.073

首先使用 PDO 而不是 mysql ......

并为您的回答..

有很多方法可以做到这一点......但我能想到的最简单的是......在每个表格行中创建一个编辑按钮/（链接）。这会将要编辑的数据的 id 发送到一个 php 页面，您可以在其中进行编辑并将其保存到数据库表部分...

举个例子……

我会把这个加到你的桌子上。。

HTML

```
<td bgcolor="#FFFFFF"><a href="saveEdit.php?id=".<?php echo $rows['vendor_id']; ?>EDIT</a></td> 
```

这将带你到带有 id 的 saveEdit.php 页面...

您可以通过以下方式获取 saveEdit.php 中的 id 值

```
$vendor_id=$_GET['id']; 
```

你现在有一个ID...创建一个表格...从表中获取该供应商的相关数据并在表格中显示...让用户编辑它...并将其保存到数据库表中..就像你一样做了，删除供应商..

# asp.net-mvc - 如何在 MVC 4 HttpPost 中包含所有自定义对象属性

> ID：13506618
> 
> 赞同：1
> 
> 时间：2012-11-22T05:53:15.920
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个带有自定义对象的视图模型。在最初的获取中，我填充了 Foo 并使用了 Foo 的几个属性。

在帖子中，我发现视图模型上的 Foo 为空。

我可以添加到我的视图中，`@Html.HiddenFor(x => x.Foo.Id)`这可以确保 Foo 至少填充了一个 Id，但是我可能需要为所有属性添加类似的代码。

有没有办法发回完整的对象？

```
public class RequestModel
    {
        public Foo Foo{ get; set; }

        [Required]
        [Display(Name = "Comment")]
        public string Comment { get; set; }
    } 
```

**控制器**

```
public ActionResult Index(int? id)
{
   //Populate Foo here using EF and add it to the model
   var model = new RequestModel { Foo = foo };    
   return View(model);
}

[HttpPost]
public ActionResult Index(int? id, RequestModel model)
{
   return View(model);
} 
```

**看法**

```
@Html.DisplayTextFor(m=>m.Application.Name) 
```

ETC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:20:25.560

将具有所需属性的视图模型添加到解决方案中。将您的验证等放在上面，并使用它在您的页面和控制器之间移动您的数据，然后将属性映射到您的 EF 对象。

# c# - smtp 异常发送邮件失败？

> ID：13506623
> 
> 赞同：8
> 
> 时间：2012-11-22T05:54:25.583
> 
> 标签：c#, asp.net, smtp

```
StringBuilder emailMessage = new StringBuilder();
emailMessage.Append("Dear Payment Team ,");
emailMessage.Append("<br><br>Please find the Payment instruction");    

try
{
    MailMessage Msg = new MailMessage();
    // Sender e-mail address.
    Msg.From = new MailAddress("pqr@gmail.com");
    // Recipient e-mail address.
    Msg.To.Add("abc@gmail.com");
    Msg.CC.Add("zcd@gmail.com");
    Msg.Subject = "Timesheet Payment Instruction updated";
    Msg.IsBodyHtml = true;
    Msg.Body = emailMessage.ToString();
    SmtpClient smtp = new SmtpClient();
    //smtp.EnableSsl = true;

    smtp.Host = ConfigurationManager.AppSettings["HostName"];
    smtp.Port = int.Parse(ConfigurationManager.AppSettings["PortNumber"]);
    smtp.Send(Msg);
    Msg = null;
    Page.RegisterStartupScript("UserMsg", "<script>alert('Mail has been sent successfully.')</script>");
}
catch (Exception ex)
{
    Console.WriteLine("{0} Exception caught.", ex);
} 
```

### 在 web.config 中添加了此代码

```
<appSettings>
    <add key="HostName"   value="The host name as given by my company" />
    <add key="PortNumber" value="25" />
</appSettings> 
```

我不断收到异常尝试更改指定的端口号但没有成功

### 异常详情

```
 System.Net.Mail.SmtpException was caught
  Message=Failure sending mail.
  Source=System
  StackTrace:
       at System.Net.Mail.SmtpClient.Send(MailMessage message)
       at PAYMENT_DTALinesfollowup.Sendbtn_Click(Object sender, EventArgs e) in d:\AFSS-TFS\AFSS\Code\ERPNET\PAYMENT\DTALinesfollowup.aspx.cs:line 488
  InnerException: System.Net.WebException
       Message=Unable to connect to the remote server
       Source=System
       StackTrace:
            at System.Net.ServicePoint.GetConnection(PooledStream PooledStream, Object owner, Boolean async, IPAddress& address, Socket& abortSocket, Socket& abortSocket6, Int32 timeout)
            at System.Net.PooledStream.Activate(Object owningObject, Boolean async, Int32 timeout, GeneralAsyncDelegate asyncCallback)
            at System.Net.PooledStream.Activate(Object owningObject, GeneralAsyncDelegate asyncCallback)
            at System.Net.ConnectionPool.GetConnection(Object owningObject, GeneralAsyncDelegate asyncCallback, Int32 creationTimeout)
            at System.Net.Mail.SmtpConnection.GetConnection(ServicePoint servicePoint)
            at System.Net.Mail.SmtpTransport.GetConnection(ServicePoint servicePoint)
            at System.Net.Mail.SmtpClient.GetConnection()
            at System.Net.Mail.SmtpClient.Send(MailMessage message)
       InnerException: System.Net.Sockets.SocketException
            Message=A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 125.63.68.148:25
            Source=System
            ErrorCode=10060
            NativeErrorCode=10060
            StackTrace:
                 at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
                 at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception)
            InnerException: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T07:05:47.673

您需要为 smtp 提供用户名和密码。

使用下面的代码： -

```
 MailSettings.SMTPServer = Convert.ToString(ConfigurationManager.AppSettings["HostName"]);
    MailMessage Msg = new MailMessage();
    // Sender e-mail address.
    Msg.From = new MailAddress("pqr@gmail.com");
    // Recipient e-mail address.
    Msg.To.Add("abc@gmail.com");
    Msg.CC.Add("zcd@gmail.com");
    Msg.Subject = "Timesheet Payment Instruction updated";
    Msg.IsBodyHtml = true;
    Msg.Body = emailMessage.ToString();
    NetworkCredential loginInfo = new NetworkCredential(Convert.ToString(ConfigurationManager.AppSettings["UserName"]), Convert.ToString(ConfigurationManager.AppSettings["Password"])); // password for connection smtp if u dont have have then pass blank

    SmtpClient smtp = new SmtpClient();
    smtp.UseDefaultCredentials = true;
    smtp.Credentials = loginInfo;
    //smtp.EnableSsl = true;
    //No need for port
    //smtp.Host = ConfigurationManager.AppSettings["HostName"];
    //smtp.Port = int.Parse(ConfigurationManager.AppSettings["PortNumber"]);
     smtp.Send(Msg); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T08:47:41.360

首先，您不需要手动读取 .config 文件中的值。您可以在 System.Net 部分中设置，您的 SmtpClient 对象将自动读取它们：

```
<system.net>
    <mailSettings>
      <smtp from="Sender's display name &lt;sender_email@domain.com&gt;">
        <network host="mailserver.yourdomain.com" port="25" userName="smtp_server_username" password="secret" defaultCredentials="false" />
      </smtp>
    </mailSettings>
  </system.net> 
```

然后，从您的代码中，您只需编写：

```
 SmtpClient smtp = new SmtpClient();
        MailMessage mailMessage = new MailMessage();
        mailMessage.To.Add(new MailAddress("recipient@somedomain.com", "Recipient Display Name"));
        mailMessage.Subject = "Some Subject";
        mailMessage.Body = "One gorgeous body";
        smtp.Send(mailMessage); 
```

回到你的错误，看起来你有某种网络问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T04:20:28.797

我建议您在异常情况下发送电子邮件的最简单方法 - 使用 Elmah。请按照此指南获取解决方案： [https ://www.stormconsultancy.co.uk/blog/development/tools-plugins/setup-email-alerts-from-elmah-when-exceptions-are-raised/](https://www.stormconsultancy.co.uk/blog/development/tools-plugins/setup-email-alerts-from-elmah-when-exceptions-are-raised/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-11T05:35:24.303

```
try
           {
               MailMessage mail = new MailMessage();
               //SmtpClient SmtpServer = new SmtpClient("smtp.google.com");
              SmtpClient SmtpServer = new SmtpClient(sServer);

              // SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com", 587);
               mail.From = new MailAddress(sFromEmailId);
               mail.To.Add(sToEmailId);
               mail.Subject = sSubject;
               mail.Body = sMessage;
               mail.IsBodyHtml = true;             
               HttpFileCollection hfc = Request.Files;
               for (int i = 0; i < hfc.Count; i++)
               {
                   HttpPostedFile hpf = hfc[i];
                   if (hpf.ContentLength > 0)
                   {
                       mail.Attachments.Add(new Attachment(fupload.PostedFile.InputStream, hpf.FileName));

                   }
               }
               SmtpServer.Port = 587;
               //SmtpServer.Host = "smtp.gmail.com";
               SmtpServer.DeliveryMethod = SmtpDeliveryMethod.Network;
               SmtpServer.UseDefaultCredentials = false;
               SmtpServer.Credentials = new System.Net.NetworkCredential(sFromEmailId, sPassword);
               SmtpServer.EnableSsl = true;
               SmtpServer.Send(mail);                
               ClientScript.RegisterStartupScript(this.GetType(), "Alert", "dim('Mail Sent Successfully..!');", true);
               mail.Dispose();
           }
           catch (Exception ex)
           {                
               ClientScript.RegisterStartupScript(this.GetType(), "Alert", "dim('Error in Sending Mail..!');", true);
           } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-13T09:07:39.133

此异常的另一个原因可能是您的系统上安装了防病毒软件。这可能会禁止应用程序发送邮件。只需注意一个对话框，该对话框要求您允许通过系统上的应用程序发送邮件。

# regex - R在字符串中填充0

> ID：13506624
> 
> 赞同：9
> 
> 时间：2012-11-22T05:54:26.773
> 
> 标签：regex, string, r

我有以下数据

```
GT-BU7867-09
GT-BU6523-113
GT-BU6452-1
GT-BU8921-12 
```

如何使用 R 使连字符后的数字填充前导零，使其具有三位数字？生成的格式应如下所示：

```
GT-BU7867-009
GT-BU6523-113
GT-BU6452-001
GT-BU8921-012 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T06:30:12.567

基础解决方案：

```
sapply(strsplit(x,"-"), function(x)
    paste(x[1], x[2], sprintf("%03d",as.numeric(x[3])), sep="-")
) 
```

结果：

```
[1] "GT-BU7867-009" "GT-BU6523-113" "GT-BU6452-001" "GT-BU8921-012" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T06:01:01.587

使用`stringr`and`str_pad`的解决方案`strsplit`

```
library(stringr)
    x <- readLines(textConnection('GT-BU7867-09
GT-BU6523-113
GT-BU6452-1
GT-BU8921-12'))

unlist(lapply(strsplit(x,'-'),
       function(x){
         x[3] <- str_pad(x[3], width = 3, side = 'left', pad = '0')
         paste0(x, collapse = '-')}))

[1] "GT-BU7867-009" "GT-BU6523-113" "GT-BU6452-001"
[4] "GT-BU8921-012" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T10:20:12.470

另一个使用`str_pad`和`str_extract`来自包的版本`stringr`

```
library(stringr)   
x <- gsub("[[:digit:]]+$", str_pad(str_extract(x, "[[:digit:]]+$"), 3, pad = "0"), x) 
```

即提取 x 的尾随数字，用 0 将它们填充为 3，然后将它们替换为原始尾随数字。

# debugging - LLDB 中断地址

> ID：13506629
> 
> 赞同：17
> 
> 时间：2012-11-22T05:55:03.380
> 
> 标签：debugging, breakpoints, lldb

对于这个可能微不足道的问题，我深表歉意，但由于谷歌一遍又一遍地给我同样不适用的答案，我遇到了困难。

我正在尝试在 LLDB 中设置断点。阅读文档后，我可以选择在源代码中的某一行或某个符号上停止。

我想要做的是在某个内存位置设置断点。

也不是对该内存位置进行读写操作，而是在该位置的指令即将执行时中断。

在伪代码中：

`break 0x00010000`

*当 EIP 指向 0x00010000 时中断。*

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-22T22:51:44.637

`breakpoint set`有地址选项；您将键入`help breakpoint set`以查看所有这些。对于您的具体示例，

```
(lldb) br s -a 0x10000 
```

（您始终可以在 lldb 中使用较短版本的命令名称，这些命令名称是明确的，因此`breakpoint set`无需输入）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-06T23:27:02.640

另一种方法是使用“进程启动--stop-at-entry ...”。这将允许您在程序启动后设置断点，然后“继续”将让您在第一个断点处停止。有趣的是（在 Ubuntu 中测试）使用 --stop-at-entry 需要更长的时间来启动（约 3 秒）。我需要在 OS X 上使用它，也许它会更快。

# c# - DataContractJsonSerializer 跳过具有空值的节点

> ID：13506630
> 
> 赞同：21
> 
> 时间：2012-11-22T05:55:16.410
> 
> 标签：c#, serialization, datacontractserializer, datacontractjsonserializer

我正在使用`DataContractJsonSerializer`将我的自定义对象序列化为 JSON。但我想跳过值为`null`. 如果`DataMember`是`null`该节点不应该出现在 JSON 字符串中。

我怎样才能做到这一点？给我一个简单`code snippet`的工作。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-22T06:04:07.077

您可以在`EmitDefaultValue = false`属性中使用该`[DataMember]`属性。对于标有该属性的成员，将不会输出其值。

```
[DataContract]
public class MyType
{
    [DataMember(EmitDefaultValue = false)]
    public string Prop1 { get; set; }
    [DataMember(EmitDefaultValue = false)]
    public string Prop2 { get; set; }
    [DataMember(EmitDefaultValue = false)]
    public string Prop3 { get; set; }
}
public class Test
{
    public static void Main()
    {
        var dcjs = new DataContractJsonSerializer(typeof(MyType));
        var ms = new MemoryStream();
        var data = new MyType { Prop2 = "Hello" };
        dcjs.WriteObject(ms, data);

        // This will write {"Prop2":"Hello"}
        Console.WriteLine(Encoding.UTF8.GetString(ms.ToArray()));
    }
} 
```

# ajax - 分页在 JqGrid 中不起作用

> ID：13506633
> 
> 赞同：0
> 
> 时间：2012-11-22T05:55:30.743
> 
> 标签：ajax, jquery, jqgrid

我在我的项目中使用 jQGrid 最新版本。以下是我配置的完整配置。

```
jQuery("#list").jqGrid( {
        url : 'Link.do?method=findAllBrand',
        mtype : 'GET',
        height : 350,
        datatype : "xml",
        colNames : [ 'Name' ],
        colModel : [ {
            name : 'name',
            index : 'name',
            width : 620
        } ],
        rowNum : 10,
        rowList : [ 10, 20, 30 ],
        sortname : 'id',
        sortorder : "desc",
        viewrecords : true,
        multiselect : true,
        imgpath : 'themes/base/images',
        caption : "Brand (s) Summary Grid",
        pager : #pager,
        cache : false,
        onSelectRow : function(id) {

        }
    }); 
```

我从服务器以 xml 的形式获取以下数据：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><rows><page>1</page><total>4</total><records>75</records><row id="BRD00005"><cell>AEG</cell></row><row id="BRD00010"><cell>ARC</cell></row><row id="BRD00006"><cell>Aga</cell></row><row id="BRD00007"><cell>Allenzi </cell></row><row id="BRD00008"><cell>Amana</cell></row><row id="BRD00009"><cell>Andi</cell></row><row id="BRD00011"><cell>Arda</cell></row><row id="BRD00012"><cell>Ariston</cell></row><row id="BRD00013"><cell>Asko</cell></row><row id="BRD00014"><cell>Baumatic</cell></row><row id="BRD00015"><cell>Bendix</cell></row><row id="BRD00003"><cell>Blanco</cell></row><row id="BRD00001"><cell>Bosch</cell></row><row id="BRD00004"><cell>Chef</cell></row><row id="BRD00016"><cell>Damani</cell></row><row id="BRD00017"><cell>Davell</cell></row><row id="BRD00018"><cell>Delonghi</cell></row><row id="BRD00019"><cell>Dishlex</cell></row><row id="BRD00020"><cell>Electrolux</cell></row><row id="BRD00021"><cell>Emilia</cell></row><row id="BRD00022"><cell>Euro</cell></row><row id="BRD00023"><cell>Eurolec</cell></row><row id="BRD00024"><cell>Euromaid</cell></row><row id="BRD00002"><cell>F&amp;P</cell></row><row id="BRD00027"><cell>FP</cell></row><row id="BRD00025"><cell>Fagor</cell></row><row id="BRD00026"><cell>Fisher And Paykel</cell></row><row id="BRD00028"><cell>Franke</cell></row><row id="BRD00030"><cell>GE</cell></row><row id="BRD00034"><cell>GVA</cell></row><row id="BRD00029"><cell>Gaggenau</cell></row><row id="BRD00031"><cell>Glem </cell></row><row id="BRD00032"><cell>Glem Gas</cell></row><row id="BRD00033"><cell>Glemgas</cell></row><row id="BRD00035"><cell>Haier</cell></row><row id="BRD00036"><cell>Hisense </cell></row><row id="BRD00037"><cell>Hitachi</cell></row><row id="BRD00038"><cell>Hoover</cell></row><row id="BRD00039"><cell>Hotpoint</cell></row><row id="BRD00040"><cell>IAG</cell></row><row id="BRD00041"><cell>Ilve</cell></row><row id="BRD00042"><cell>Indesit</cell></row><row id="BRD00043"><cell>Jenn Air</cell></row><row id="BRD00044"><cell>Kelvinator </cell></row><row id="BRD00045"><cell>Kleenmaid</cell></row><row id="BRD00047"><cell>LG</cell></row><row id="BRD00046"><cell>La Germania</cell></row><row id="BRD00048"><cell>Liebherr</cell></row><row id="BRD00049"><cell>Linea</cell></row><row id="BRD00050"><cell>Lofra</cell></row><row id="BRD00051"><cell>Maytag</cell></row><row id="BRD00052"><cell>Midea</cell></row><row id="BRD00053"><cell>Miele</cell></row><row id="BRD00054"><cell>NEC</cell></row><row id="BRD00055"><cell>Neff</cell></row><row id="BRD00056"><cell>Nobel</cell></row><row id="BRD00057"><cell>Omega</cell></row><row id="BRD00058"><cell>Onix</cell></row><row id="BRD00059"><cell>Panasonic </cell></row><row id="BRD00060"><cell>Robinhood</cell></row><row id="BRD00061"><cell>Sagi</cell></row><row id="BRD00062"><cell>Samsung</cell></row><row id="BRD00063"><cell>Seimen </cell></row><row id="BRD00064"><cell>Sharp</cell></row><row id="BRD00065"><cell>Simpson</cell></row><row id="BRD00066"><cell>Smeg</cell></row><row id="BRD00067"><cell>St George</cell></row><row id="BRD00068"><cell>Technika</cell></row><row id="BRD00069"><cell>Techno</cell></row><row id="BRD00070"><cell>Technogas</cell></row><row id="BRD00071"><cell>Teka</cell></row><row id="BRD00072"><cell>Thor</cell></row><row id="BRD00073"><cell>Vintec</cell></row><row id="BRD00074"><cell>Westinghouse</cell></row><row id="BRD00075"><cell>Whirlpool</cell></row></rows> 
```

我已按照用户 Oleg 在另一篇文章中的建议修改了寻呼机参数。但寻呼机仍无法按预期工作。最初它只显示记录的 10 条数据，当我单击下一步时，它什么也不做。

```
what did i do wrong 
```

谢谢你米希尔帕雷克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:16:35.523

option的值`pager`必须被引用：`pager : "#pager"`. 你`datatype: "xml"` *不* `loadonce: true`使用. 如果**您的服务器 ( `url : 'Link.do?method=findAllBrand'`) 负责分页和排序**。如果用户点击下一页新的请求到服务器，带有相应的参数`page=2`。

通常，服务器应返回对应的项目数`page`和`rows`参数。XML 响应包含更多的项目。我想服务器返回独立于请求页面的*所有项目。*在这种情况下，您应该包括`loadonce: true`. 在这种情况下，客户端代码（jqGrid 的 JavaScript 代码）将为您进行分页和排序。如果您使用`loadonce: true`选项，您可以删除该部分

```
<page>1</page><total>4</total><records>75</records> 
```

从服务器返回的 XML 数据。

此外，我建议您尽可能考虑更改为使用 JSON 而不是 XML。在这种情况下，您可以减少项目的表示，例如

```
<rows>
<row id="BRD00022"><cell>Euro</cell></row>
<row id="BRD00002"><cell>F&amp;P</cell></row>
<row id="BRD00026"><cell>Fisher And Paykel</cell></row>
</rows> 
```

到

```
[["Euro","BRD00022"],["F&P","BRD00002"],["Fisher And Paykel","BRD00026"]] 
```

因此，您可以减少传输数据的大小。

此外，就像我在对上一个问题[的评论](https://stackoverflow.com/questions/13492887/xml-not-well-formed-in-firefox-getting-xml-response-from-server#comment18464513_13492887)中写给您的那样，您应该替换`sortname : 'id'`以`sortname : 'name'`使您的网格没有名称为 的列`"id"`。该选项 `sortorder : "desc"`可能应该被删除。

您应该删除[不推荐使用的选项](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:upgrade_from_3.4.x_to_3.5#options) `imgpath`并删除`cache`jqGrid 中也不存在的选项。相反，我强烈建议您添加`gridview: true`选项和`autoencode: true`. 如果您使用`autoencode: true`，则不需要使用 HTML 编码（在服务器端转换`F&P`为）。`F&amp;P`

**更新**：[演示](http://www.ok-soft-gmbh.com/jqGrid/Mihir.htm)演示了网格的外观：

![在此处输入图像描述](../Images/a40a82fe15d75203569f2d83d1aa94df.png)

我在网格中包含了工具栏过滤器和高级搜索，以显示使用`loadonce: true`.

# java - 如何验证spring mvc中的文本框只输入数字？

> ID：13506635
> 
> 赞同：0
> 
> 时间：2012-11-22T05:55:41.633
> 
> 标签：java, validation, spring-mvc, bean-validation

我正在 Spring MVC 中创建注册表单。有一个联系号码字段，我将它与 bean 中的长字段值绑定。我想验证它只输入数字。我想在 Spring MVC 中进行注释基础验证。任何帮助将不胜感激。我是 Spring MVC 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:37:41.190

您可以使用[Spring Validations](http://static.springsource.org/spring/docs/2.0.x/reference/validation.html)。[这是实现它的一个很好的教程。在您的情况下，您需要使用](http://www.dzone.com/tutorials/java/spring/spring-form-validation-1.html)**自定义验证器**来实现自己的验证逻辑。请参阅[此](https://stackoverflow.com/questions/5273329/apply-custom-validator-in-spring-mvc-controller-in-more-than-one-class)链接以获取有关实现自定义验证的一些帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:38:14.663

Spring 支持开箱即用的标准 JSR-303 Bean 验证。只需遵循[Spring 参考文档中记录良好的用例即可](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#validation-beanvalidation)

# java - 无法在java中将大文件（> 1gb）转换为字节数组

> ID：13506638
> 
> 赞同：0
> 
> 时间：2012-11-22T05:55:47.983
> 
> 标签：java, bytearray, alfresco

我需要将大文件 (>1gb) 转换为字节数组，以便将该文件上传到 alfresco CMS 存储库。我`UPLOAD LARGE CONTENT SERVLET`用于上传大文件。

在那个程序中，我需要转换文件字节数组。在执行时，我遇到了堆空间问题，我无法上传。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T05:58:58.110

那么这里的图书馆没有问题。问题是你正试图在内存上放置 1GB 的字节。启动程序时，根据你的可用内存将堆大小增加到1.6G或2G

```
java -Xmx1600M Main 
```

如果您从 Eclipse 运行，则右键单击项目 => 属性 => 运行时参数并指定`-Xmx2G over there`

# java - 在android中禁用相机

> ID：13506642
> 
> 赞同：1
> 
> 时间：2012-11-22T05:56:36.083
> 
> 标签：java, android, android-intent

全部

我想禁用设备中的相机选项。我启动服务以获取相机选项，然后我将使用 lock() 方法锁定。我怎样才能让相机对象访问它？

谢谢库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:09:39.313

您可以从设备管理员处执行此操作，但用户必须明确启用它，并且它仅在 ICS 上可用。这是参考：http: [//developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

禁用摄像头 - 指定应禁用摄像头。请注意，这不一定是永久禁用。可以根据上下文、时间等动态启用/禁用相机。在 Android 4.0 中引入。

阅读：- [http://developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html)

获取相机对象 如果您在自己的应用程序中打开它，则必须抓住该相机对象（例如，在您的活动中）。你无法取回它。

我想如果你在相机上获得了锁，你需要释放它，使用 unLock()。

通常，在调用 release() 之前，相机会锁定到具有活动相机对象的进程。为了允许进程之间的快速切换，您可以调用该方法暂时释放相机以供另一个进程使用；完成其他过程后，您可以调用 reconnect() 来回收相机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T23:27:02.993

好吧，您首先需要像手机中的超级用户一样控制相机，您可以使用[DeviceAdministration](https://developer.android.com/guide/topics/admin/device-admin.html)类来执行此操作，这允许像相机一样进行一些硬件和超级用户控制，您可以查看这个[repo](https://github.com/barneyElDinosaurio/LockCamera)之类的示例。

# javascript - 从网站连接到本地 NodeJS 服务器

> ID：13506645
> 
> 赞同：0
> 
> 时间：2012-11-22T05:56:47.687
> 
> 标签：javascript, node.js, sockets, webserver, socket.io

我无法从一个远程网站连接到我们的本地 NodeJS 服务器，该网站有一个页面尝试使用以下方式连接到它：

```
<script type="text/javascript" src="http://myipaddress:8101/socket.io/socket.io.js"></script> 
```

但它只是超时。该端口绝对是开放的，可以通过在线端口检查器访问，我的防火墙中还有一条规则允许该端口上的任何内容。

服务器脚本现在非常基本：

```
var io = require('socket.io').listen(8101, {
'log level': 2,
'transports': ['websocket', 'flashsocket', 'htmlfile', 'xhr-polling', 'jsonp-polling'],
});

var mysql = require('mysql');
var dateFormat = require('dateformat');

var connection = mysql.createConnection({
host     : '127.0.0.1',
user     : 'NodeJS',
password : 'pass',
database : 'db'
});

var connectedClients = 0 ;
var connectedUserNames = {} ;
// listen on new connections
io.sockets.on('connection', function(socket) { // When someone connects...
socket.emit('Welcome!') ;
}) 
```

我哪里错了？

* * *

试过：

```
<script>
var socket = io.connect('http://myip.com:8101');
socket.on('news', function (data) {
console.log(data);
socket.emit('my other event', { my: 'data' });
});
</script> 
```

哪个不按预期工作。

# tomcat - 在 ubuntu 12.04LTS 上安装 tomcat 7

> ID：13506648
> 
> 赞同：5
> 
> 时间：2012-11-22T05:57:06.470
> 
> 标签：tomcat, ubuntu

我最近升级到**Ubuntu 12.04LTS**并安装了**Tomcat 7**，但出现以下错误：

```
root@me:/# sudo apt-get install tomcat7 tomcat7-docs tomcat7-examples tomcat7-admin -y
Reading package lists... Done
Building dependency tree 
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
tomcat7 : Depends: tomcat7-common (>= 7.0.26-1ubuntu1.1) but it is not going to be installed
tomcat7-admin : Depends: tomcat7-common (>= 7.0.26-1ubuntu1.1) but it is not going to be installed
tomcat7-docs : Depends: tomcat7-common (>= 7.0.26-1ubuntu1.1) but it is not going to be installed
tomcat7-examples : Depends: tomcat7-common (>= 7.0.26-1ubuntu1.1) but it is not going to be installed
E: Unable to correct problems, you have held broken packages. 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-22T09:07:53.317

`tomcat6-common`显然，由于某些冲突，您需要在安装 tomcat7 之前删除。

请参阅[https://askubuntu.com/questions/173981/installing-tomcat-7-on-ubuntu-server-12-04](https://askubuntu.com/questions/173981/installing-tomcat-7-on-ubuntu-server-12-04)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T09:08:47.957

[您可以从这里](http://tomcat.apache.org/download-70.cgi)更好地下载软件包并解压并使用它。

# r - 高效创建 axb 扩展网格内存

> ID：13506652
> 
> 赞同：4
> 
> 时间：2012-11-22T05:57:43.300
> 
> 标签：r, memory, memory-management, data.table

可能是一个非常简单的问题，但我希望能够设置变量，`a`并`b`能够从 R 中的 expand.grid 创建一个 data.frame 或 data.table。

例如`a=5`，如果`b=3`

我希望我能够获得与

```
expand.grid(seq(0,1,by=1/5),seq(0,1,by=1/5), seq(0,1,by=1/5)) 
```

如果`a=3`,`b=4`我会得到

```
expand.grid(seq(0,1,by=1/3), seq(0,1,by=1/3), seq(0,1,by=1/3), seq(0,1,by=1/3)) 
```

ie`b`是列数......并且`a`是间隔大小。

谢谢

**编辑**

理想情况下，我会输入`a`大约 100 和`b`大约 30 的数字，有没有什么东西可以快速且有效地产生内存……也许是某种形式`data.table`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T06:04:15.920

像这样的东西应该可以工作，使用`replicate`和`do.call`

```
exgrid <- function(a, b){
  do.call(expand.grid,replicate(b , seq(0,1,by = 1/a), simplify = FALSE))
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T10:29:20.227

这将生成一个具有 100 行 Mio 行且没有内存问题的 data.frame（一个 ffdf）。它使用包ff。您可以根据需要增加列。请注意，如果您使用这些列，这可以生成相当多的数据。

```
require(ffbase)
x <- expand.ffgrid(ff(1:1000), ff(1:1000), ff(1:100))
dim(x)
x[1:5, ] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T06:18:42.920

我相信这会让你接近你所需要的：

```
b <- 4    
expand.grid(rep(list(seq(0,1,by=1/3)), b)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-15T19:18:59.137

```
> require('ffbase')
> require('BioGeoBEARS')

#https://www.rdocumentation.org/packages/BioGeoBEARS/versions/0.2.1/topics/expand.grid.jc
> system.time(mtx <- expand.ffgrid(ff(mcS$from), ff(mcS$to)))
#user  system elapsed 
#4.45    3.30    9.74 

> system.time(mtx <- expand.grid(mcS$from, mcS$to))
#user  system elapsed 
#1.92    0.25    2.18 

> system.time(mtx <- expand.grid.alt(mcS$from, mcS$to))
#user  system elapsed 
#8.05    0.95    9.03 

> system.time(mtx <- expand.grid.jc(mcS$from, mcS$to))
#user  system elapsed 
#0.44    0.17    0.61 
```

虽然评估的时间更快，但正常`expand.grid()`情况下读取对象的时间会`mtx`比`expand.ffgrid()`.

添加信息（数据大小）：

```
> as_data_frame(mtx)
# A tibble: 100,000,000 x 2
    from    to
   <int> <int>
 1   101   126
 2   126   126
 3   192   126
 4    19   126
 5    66   126
 6    82   126
 7   143   126
 8     1   126
 9    88   126
10   168   126
# ... with 99,999,990 more rows 
```

# drupal-7 - 如何在不使用管理工具栏的情况下在 Drupal 7 中将图像字段添加到博客？

> ID：13506653
> 
> 赞同：0
> 
> 时间：2012-11-22T05:57:43.990
> 
> 标签：drupal-7

我刚开始使用在 Drupal 7 上运行的网站工作，该网站托管来自不同用户的许多博客，我的任务是向博客内容类型添加一个图像字段。在我的网站本地副本上，我使用管理工具栏向博客添加了一个图像字段。但是，我无法在开发或生产服务器上以管理员身份登录，但我可以编辑代码并将其推送到服务器。我该怎么做呢？

这是我第一次使用 Drupal，所以我真的不知道我在做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:11:59.337

你不能。

有几个选项可以做到这一点，但您必须将字段添加到内容类型，或者编写并安装一个自定义模块来为您添加字段。两者都需要管理员访问权限。

我真的建议你不要更改代码。Drupal 7 是围绕字段构建的，因此对它们进行硬编码可能会导致一些非常讨厌的问题破坏整个事物。

# java - Java 等式不起作用？

> ID：13506654
> 
> 赞同：0
> 
> 时间：2012-11-22T05:57:54.737
> 
> 标签：java, binary, equals

```
public class Binary {

    private int _DecNum;
    private String _BinNum;

    public Binary(int n) {
    _DecNum = n;
    _BinNum = ConvToBinR(n);
    }

    public static String ConvToBin(int n) {
    String a = "";
    while(n > 1) {
        a = (n % 2) + a;
        n = n /2;
    }
    return n + a;
    }

    public String toString() {
    return _BinNum;
    }

    public boolean equals(Object a) {
    return this == a || (a instanceof Binary && this._BinNum == ((Binary) a)._BinNum);
    }

    public static void main(String[] args ) {
    int a = Integer.parseInt(args[0]);
    int b = Integer.parseInt(args[1]);
    Binary Zero = new Binary(a);
    Binary One = new Binary(b);
    System.out.println("Base 10: " + a + " in Base 2: " + Zero);
    System.out.println(Zero.equals(One));
    }
} 
```

嗨，大家好！由于某种我无法弄清楚的原因，我的 equals 函数不起作用。this._BinNum == ((二进制) a)._BinNum; 即使我将 a 和 b 的值设置为相等，也会给我一个错误的陈述。任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T05:59:55.167

就像您使用`equals`方法来比较您的实例一样，您也应该使用`equals`方法来比较字符串：-

```
this._BinNum.equals(((Binary) a)._BinNum) 
```

*   [如何比较 Java 中的字符串](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

另外，我不明白您为什么要`this == a`在方法中进行比较`equals`。这将始终返回 false，除非您在传递的同一实例上调用 equals 方法。所以你不需要那个。只需使用这个： -

```
public boolean equals(Object a) {
    return (a instanceof Binary && this._BinNum.equals(((Binary) a)._BinNum));
} 
```

* * *

您似乎正在尝试将您的`Decimal`价值转换为`Binary String`. 你已经在`Integer`课堂上有了一个方法。使用[`Integer#toBinaryString`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toBinaryString%28int%29)or[`Integer#toString`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toString%28int,%20int%29)与`radix`: -

```
Integer.toBinaryString(5);
Integer.toString(5, 2); 
```

这当然是供您将来参考，因为它可以手动进行以用于学习目的。

* * *

作为旁注，您应该在代码中遵循[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)，以便将来其他用户可以轻松阅读。

*   变量和方法名称应以小写字母、美元或下划线开头。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T06:00:42.320

_BinNum 是一个字符串，所以使用

```
this._BinNum.equals(((Binary) a)._BinNum) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T05:59:57.057

您应该使用`equals()`方法来进行 String 而不是`==`运算符的camparision。`==`比较对象引用而不是对象内容

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T06:00:30.017

这是两个不同的对象，它们的引用不同且不相等。

使用`String`'`equals()`方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T06:28:29.217

运算符“==”将根据对象的哈希码查看对象是否相等。但是，它不会在对象中寻找值。

而 equals() 方法将检查对象中的值。所以，尝试使用 stringA.equals(stringB)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-22T06:00:15.817

您应该尝试`stringA.equals(stringB)`为此使用函数

# xaml - 为什么我不能在 XAML 中编写数字运算？

> ID：13506658
> 
> 赞同：2
> 
> 时间：2012-11-22T05:58:20.440
> 
> 标签：xaml

对不起，如果问题太明显了。

我在 XAML 中工作了很长时间，但这个问题对我来说仍然是个谜：为什么我不能在 XAML 中编写数字运算？比如2+3等等。

为什么 XAML 不能在运行时操作表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:38:37.307

因为标记语言只负责标记:)。你也不能在 HT* **M** *L 中这样做。它们不是真正的编程语言。

您可以使用编程语言进行操作。Java Script 是一种编程语言，PLSQL 是一种编程语言，c#，java ... 等等，因为它们是做操作的。但是 HTML、XML、XAML 只是表示数据如何呈现的表达式。而不是如何计算数据。

SGML 是标记语言的祖先。

有关标记语言的更多信息[http://en.wikipedia.org/wiki/Markup_language](http://en.wikipedia.org/wiki/Markup_language)

所以我们有，

*   编程语言

*   标记语言

除了新标准 W3C 之外，IEEE 还对它们制定了一些规则，我们需要遵守。

问候

# xcode - Xcode：带有背景图像和图像的按钮和标签

> ID：13506660
> 
> 赞同：1
> 
> 时间：2012-11-22T05:58:31.790
> 
> 标签：xcode, interface-builder

我想用界面生成器制作一个故事板。页面上有 12 个按钮，所有 12 个按钮都有相同的背景图像（按钮图像）。在每个按钮背景上，我想（以编程方式）显示一个不同的图标和一个标签。

我希望我能把我的问题说清楚：我有静态背景图像，但它上面的图标应该调整大小以适应空间。

单击时，背景图像和图标应变暗以显示单击。

有没有“最好的方法”来做到这一点？我觉得我对这里的界面构建器有点迷茫。

非常感谢。

# php - UTF-8 字符识别问题

> ID：13506662
> 
> 赞同：0
> 
> 时间：2012-11-22T05:58:40.387
> 
> 标签：php, intranet

**下载.php**

```
} else {
    $filename = NULL;
}

$err = '<div align="center">GREEK error msg</div>';

if (!$filename) {
    // if variable $filename is NULL or false display the message
    echo $err;
} else {
    // define the path to your download folder plus assign the file name
    $path = '../downloads/'.$filename;

    // check that file exists and is readable
    if (file_exists($path) && is_readable($path)) {
        // get the file size and send the http headers
        $size = filesize($path);
        header('Content-Type: application/octet-stream;');
        header('Content-Length: '.$size);
        header('Content-Disposition: attachment; filename='.$filename);
        header('Content-Transfer-Encoding: binary');
        // open the file in binary read-only mode
        // display the error messages if the file can´t be opened
        $file = @ fopen($path, 'rb');
        if ($file) {
            // stream the file and exit the script when complete
            fpassthru($file);
            exit;
        } else {
            echo $err;
        }
    } else {
        echo $err;
    }
}
?> 
```

这就是我所说的：

```
<a href="scripts/download.php?file=GREEKCHARS_Earth.pdf"></a> 
```

1.  如果文件名是英文下载脚本工作正常。
    如果文件名是希腊语，则会显示错误消息。

2.  如果我**回显 $filename**，我会看到正确的希腊名称，所以我认为正确的名称是在我的 download.php 中传递的。

3.  由于我**使用 $filename 获得了正确的名称**并且我的实际文件具有相同的名称，因此脚本在哪里无法下载我的文件并且它给了我错误消息？

它似乎无法将希腊语 $filename 与实际文件匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:18:37.623

问题是 HTTP 标头可能只包含 ASCII 字符。这是标准，因为标头用于定义以何种编码遵循的内容，标头本身不能包含某些尚未指定编码的字符。

要在标头中发送非 ASCII 符号，它们需要根据 RFC 2231 进行编码。
请在此处查看此答案：[如何根据 RFC 2231 在 PHP 中编码文件名？](https://stackoverflow.com/questions/4968272/how-can-i-encode-a-filename-in-php-according-to-rfc-2231)

# semantic-web - Freebase 中的传入和传出属性是什么？

> ID：13506664
> 
> 赞同：1
> 
> 时间：2012-11-22T05:58:55.610
> 
> 标签：semantic-web, freebase, mql

Freebase 中的传入和传出属性是什么？我知道给定域中给定类型的属性，但我也看到与属性关联的传入和传出属性。我试图为此查找文档，但找不到任何实质性内容。有谁知道这些是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:29:05.900

Freebase 模式（即类型和属性）与其余数据存储在同一图表中 - 因此，与主题（例如`/m/05mw61p`）具有`/type/object/name`属性（在这种情况下为“堆栈溢出”）相同，属性只是图中的另一个节点，并且有自己的`/type/object/name`属性 - 因此 的`/type/object/name`属性`/people/person/date_of_birth`将指向“出生日期”。

与其他一切一样，属性有自己的模式，它定义了使它们成为属性而不仅仅是另一个节点的东西 - 其中一些属性对于它们是什么非常明显（例如`/type/property/expected_type`），但其他一些有点晦涩难懂且记录很差。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T19:02:35.677

如果您提供一个示例或上下文来帮助澄清您的问题，这将有所帮助。属性可以是主控，也可以不是主控，这有点像传入/传出，但我怀疑您实际上是在询问传入/传出**链接**而不是属性。

正如 Philip 所说，属性只是图中的一个类型化对象，因此传出链接具有`/type/property`属性的值 - 预期类型（类似于 rdf 范围）、唯一性、它属于什么类型等。传入链接具有给定属性作为它的值或对象。对于属性，这通常是作为主题/来源的另一个属性，“委托”给该属性（即在不同类型中以不同名称重用该属性）。

传出链接

```
property    target  expected type
/type/object/type   /type/property
/type/property/schema   /people/person
/type/property/expected_type    /type/datetime
/type/property/unique   true /type/boolean 
```

传入链接

```
source  property
/m/0dl8xrg birthDate    /type/property/delegated 
```

如果我们查看该传入链接[的来源](http://www.freebase.com/inspect/m/0dl8xrg)`/base/svocab/person/birthdate`，我们会发现它是具有相应传出链接的属性，该链接委托给`/people/person/date_of_birth`

链接的方向与其所具有的语义一致，但可以在任一方向上导航链接。

# ios - 使用 QuartzCore 为 UITextView 创建阴影

> ID：13506667
> 
> 赞同：3
> 
> 时间：2012-11-22T05:59:10.910
> 
> 标签：ios, uitextview, shadow, quartz-core

我使用以下代码`QuartzCore`为我创建了一个阴影。`UITextView`

```
myTextView.layer.masksToBounds = NO;
myTextView.layer.shadowColor = [UIColor blackColor].CGColor;
myTextView.layer.shadowOpacity = 0.7f;
myTextView.layer.shadowOffset = CGSizeMake(2.0f, 2.0f);
myTextView.layer.shadowRadius = 8.0f;
myTextView.layer.shouldRasterize = YES; 
```

它创建了一个`shadow`，`looks good too.`这是我上面代码的输出。

![在此处输入图像描述](../Images/ebf447367273c2412cb44bd01f4d4709.png)

但是当我尝试向 中添加文本时`myTextView`，我的 textView 文本超出了范围，并且看起来超出了`myTextView`下面的内容。

![在此处输入图像描述](../Images/9a652ff1fd3ade812458c85049bb0ef3.png)

**仅当我添加 shadow 时才会发生**。如果我不添加阴影，里面的文字`textView`不会显示奇怪。我做错了什么？我怎么能克服这个？为什么会这样？

**更新：**

`@borrrden`说我发现它正在发生，因为设置了`maskToBounds = NO;`If we set `YES`then we cannot get shadow。原因这里有[答案](https://stackoverflow.com/questions/3690972/why-maskstobounds-yes-prevents-calayer-shadow)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T06:17:26.060

由于 UIView 行为，没有“正确”的解决方案。当 maskToBounds 为 NO 时，任何延伸到层边界之外的子层都将可见。并且 UITextField 在 UITextField 层之外滚动文本。

在 UITextView 后面添加清晰的视图并在其上放置阴影。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T06:26:20.880

只需在您的 textView 下添加另一个 UIView 并将其图层设置为显示阴影（不要忘记将其背景颜色设置为清晰颜色以外的其他颜色 - 否则不会绘制阴影）

```
myTextView = [UITextView alloc] initWithFrame:CGRectMake(100,100,200,200);
UIView* shadowView = [UIView alloc] initWithFrame:myTextView.frame];
shadowView.backgroundColor = myTextView.backgroundColor;
shadowView.layer.masksToBounds = NO;
shadowView.layer.shadowColor = [UIColor blackColor].CGColor;
shadowView.layer.shadowOpacity = 0.7f;
shadowView.layer.shadowOffset = CGSizeMake(2.0f, 2.0f);
shadowView.layer.shadowRadius = 8.0f;
shadowView.layer.shouldRasterize = YES;
[someView addSubview:shadowView];
[someView addSubView:myTextView]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-07T15:30:30.270

除了上一个答案，只需将原始 uiTextView 中的所有属性复制到 helper 视图中即可：

```
UITextView *helperTextView = [[UITextView alloc] init];
helperTextView = textView;  //copy all attributes to the helperTextView;

shadowTextView = [[UIView alloc] initWithFrame:textView.frame];
shadowTextView.backgroundColor = textView.backgroundColor;
shadowTextView.layer.opacity = 1.0f;
shadowTextView.layer.masksToBounds = NO;
shadowTextView.layer.shadowColor = [UIColorFromRGB(0x00abff)CGColor];
shadowTextView.layer.shadowOpacity = 1.0f;
shadowTextView.layer.shadowOffset = CGSizeMake(1.0f, 1.0f);
shadowTextView.layer.shadowRadius = 10.0f;
shadowTextView.layer.cornerRadius = 8.0f;
shadowTextView.layer.shouldRasterize = YES;

[self.view addSubview:shadowTextView];
[self.view addSubview:helperTextView]; 
```

# java - MM/DD/YYYY中的mongodb日期存储

> ID：13506676
> 
> 赞同：1
> 
> 时间：2012-11-22T06:00:25.080
> 
> 标签：java, mongodb

我正在尝试以 mm/dd/YYYY 格式存储日期以实现我尝试在 mongoShell 中执行以下操作

```
dt=new Date(2012,01,01)
ISODate("2012-01-31T18:30:00Z") 
```

这不是我想要的格式。我正在尝试将其存储为 ISODate("2012-01-01") 以便我可以使用 between , greater than less than 那种比较从 mongoDB 中获取我想要的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-18T12:24:08.130

一种可能的解决方案是以以下格式存储

```
{
  year : 2016,
  month: 1,
  day: 1,
  yymmdd : 20160001
}
{
  year : 2015,
  month: 10,
  day: 20,
  yymmdd : 20151020
} 
```

**yymmdd**是
年乘以 10,000
月乘以 100 并加上日期

所以 Jan - 1 2016 将是 2016x10000 + 0x100 +1 = 20160001
Nov-20 2015 将是 2015x10000 + 10*100 + 25 = 20151025

等等

上述设计可以实现从 0AD 到 9999AD 的排序

日期是一个 64 位整数，所以如果您使用 yyyymmdd 样式（如上），它是一个 32 位整数，可以节省您的空间并服务于您的目的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:29:49.553

听起来您的问题是关于如何将存储在 Mongo 中的 ISO 日期转换为字符串。我相信您可以为 Java 制定正确的语法，但是在 Mongo shell 中，您可以像这样简单地做到这一点：

```
> d=new Date(2012,01,01)
ISODate("2012-02-01T05:00:00Z")
> print ( d.getFullYear()+"/"+d.getMonth()+"/"+d.getDate() )
2012/1/1 
```

但请注意，您返回的是传递给 Date 的数字，而不是反映月份的数字。要解决这个问题，您可以使用`d.toLocaleDateString()`

```
> d.toLocaleDateString()
02/01/2012 
```

这是因为 JavaScript Date 函数需要（并返回）从 0 开始的月份，并且您还需要确保注意相对于 UTC/GMT 时区的时区。

# python - 使用 Python 编写 Excel 文件时出现 xlwt.Style.EasyXFCallerError

> ID：13506678
> 
> 赞同：1
> 
> 时间：2012-11-22T06:00:33.413
> 
> 标签：python, excel, python-2.7, xlwt

我正在尝试使用 python 编写 Excel 工作表并遇到以下错误：

```
Traceback (most recent call last):
  File "create_excel.py", line 29, in <module>
    ws.row(8).write(0,'',Style.easyxf('pattern: pattern solid, fore_colourgreen;'))
  File "/usr/local/lib/python2.7/site-packages/xlwt/Style.py", line 618, in easyxf
    field_sep=field_sep, line_sep=line_sep, intro_sep=intro_sep, esc_char=esc_char, debug=debug)
  File "/usr/local/lib/python2.7/site-packages/xlwt/Style.py", line 574, in _parse_strg_to_obj
    raise EasyXFCallerError("no value supplied for %s.%s" % (section, k))
xlwt.Style.EasyXFCallerError: no value supplied for pattern.fore_colourgreen 
```

导致上述错误的行是：-

```
ws.row(8).write(0,'',Style.easyxf('pattern: pattern solid, fore_colourgreen;')) 
```

我还将该行修改为：

```
ws.row(8).write(0,'',Style.easyxf('pattern: pattern solid, fore-colourgreen;')) 
```

正如一些论坛所`-`代替的`_`，`fore-colourgreen`但无济于事。

有人可以让我知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:59:41.453

你错过了一个空间：

`'pattern: pattern solid, fore_colourgreen;'`

应该

`'pattern: pattern solid, fore_colour green;'`

使用连字符还是下划线都没有关系；`easyxf`处理任何一个（通过自动将连字符转换为下划线）。

# python - 我是否正确使用了 python 的 subprocess.call ？

> ID：13506687
> 
> 赞同：0
> 
> 时间：2012-11-22T06:01:28.073
> 
> 标签：python, subprocess

我正在尝试从 Python 代码中创建一系列 tar 文件。作为一种做法，我有一个子目录 - 'O'，其中包含我想要 tar 的文件。当我尝试打字时

```
tar -cf O.tar ./O 
```

从命令行，一切正常。但是，当我进入 Python 解释器并输入

```
import subprocess
subprocess.call(["tar","-cf O.tar ./O"]) 
```

我收到以下错误：

```
tar: Cowardly refusing to create an empty archive 
```

这有意义吗？我试过

```
import os
os.listdir(".") 
```

为了确保我仍然可以从 Python shell 中看到我的“O”子目录，我可以。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:04:47.040

也许。

```
import subprocess
subprocess.call(["tar","-cf", "O.tar", "./O"]) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-03T15:01:36.030

它将运行：

```
import subprocess
import sys
proc = subprocess.Popen(["tar","-cf O.tar ./O"],stdin=subprocess.PIPE)
proc.communicate() 
```

如果您可以执行其他命令或程序，请使用 sys.executeable()

# ruby-on-rails - 如何确定 Rails 是从 CLI、控制台还是作为服务器运行？

> ID：13506690
> 
> 赞同：38
> 
> 时间：2012-11-22T06:01:40.543
> 
> 标签：ruby-on-rails, rack, rack-middleware

我有一个[中间件，用于使用 Bonjour 在本地网络应用程序上宣布我的应用程序](https://github.com/crishoj/rack_jour)，但是当从 rake 或通过控制台调用 Rails 时，它也会宣布服务。

我想排除这些情况，只在 Rails 作为服务器运行时使用 Bonjour 中间件。

中间件配置接受 proc 在某些条件下使用 proc 排除中间件`proc`：

```
config.middleware.insert_before ActionDispatch::Static, Rack::SSL, :exclude => proc { |env| 
  env['HTTPS'] != 'on' 
} 
```

但是如何确定 Rails 是从 CLI、控制台还是作为服务器调用的呢？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-23T09:15:39.120

[使用pry](https://github.com/pry/pry)查看`Rails`模块显示可以像这样检测控制台调用：

```
Rails.const_defined? 'Console' 
```

和这样的服务器调用：

```
Rails.const_defined? 'Server' 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-12-04T17:57:28.280

超级有帮助。谢谢@crishoj。

我想更仔细地检查 Console 对象以解决我正在处理的另一个问题，发现可以使用 来访问 Console 常量`Rails::Console`，因此另一个检查选项是使用：

```
defined? Rails::Console
defined? Rails::Server 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-04-01T12:59:22.430

在有或没有像 Puma/Passenger 这样的应用服务器的情况下使用 Rails 5，这里有三种方法可以确定你的应用程序是如何运行的：

```
# We are running in a CLI console
defined?(Rails::Console)

# We are running as a Rack application (including Rails)
caller.any?{|l| l =~ %r{/config.ru/}}

# We are running as a CLI console
caller.any?{|l| l =~ %r{/lib/rake/task.rb:\d+:in `execute'}} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-12-28T19:44:02.470

## 每个命令的环境摘要。

我发现现有的答案要么不完整，要么多余，要么不详尽。所以这里是每个命令的表格格式以及生成的环境是什么样的。

### 导轨 4.2

```
| Command                            |  Rails.const_defined?( "Console" )  |  Rails.const_defined?( "Server" )  |               ARGV              |
|------------------------------------|-------------------------------------|------------------------------------|---------------------------------|
| `rake db:migrate:status`           |  false                              |  true                              |  ["db:migrate:status"]          |
| `rails console`                    |  true                               |  true                              |  []                             |
| `rails server`                     |  false                              |  true                              |  []                             |
| `rails g migration new_migration`  |  false                              |  true                              |  ["migration", "new_migration"] |
| `rails r "puts 'Hi'"`              |  false                              |  true                              |  []                             | 
```

您可以看到，仅检查定义为`Rails`常量的“服务器”不会捕获生成器，例如`rails g migration`. 你需要检查`ARGV`来做到这一点。

我希望这有帮助。我只能立即访问 Rails 4.2，但可以随意添加其他 Rails 版本的部分，以及添加任何需要“捕获”的附加命令。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-06T06:48:06.543

Rails 5 在Passenger 下运行时未定义“服务器”。

我发现的最佳解决方案是[这个](https://stackoverflow.com/questions/12088025/detect-if-application-was-started-as-http-server-or-not-rake-task-rconsole-etc/12246652#answer-12242882)答案的变体：

```
if %w(rails rake).include?(File.basename($0))
   <console or runner>
else
   <server>       
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-03T03:59:32.320

在我们的项目中，我必须在**boot.rb**中检测控制台模式，为此我使用了：

```
in_console = (ARGV & ['c', 'console']).any? 
```

这不是一个万无一失的解决方案，但对于我们的用例来说已经足够了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-27T08:20:52.320

这是我在乘客/美洲狮上检测 sidekiq 或运行服务器的版本。鉴于前面的答案，不能 100% 确定它在所有情况下都能正常工作（我还没有测试过运行 rails runner 或 rake 任务时的情况）

```
@running_app = begin
  if defined?(Rails::Console)
    'Console'
  elsif Sidekiq.server?
    'Worker'
  elsif defined?(::PhusionPassenger) || defined?(Rails::Server) 
    'Server'
  else
    nil # unknown
  end
end 
```

* * *

## 回答 #8

> 赞同：-7
> 
> 时间：2018-11-18T18:04:24.043

对于帕德里诺：

控制台检查：

```
if Padrino::constants.include? :Cli
    #your code
end 
```

服务器检查：

```
if !Padrino::constants.include? :Cli
    #your code
end 
```

# cocos2d-x - cocos2d-x，共享或复用 CCTexture2D

> ID：13506691
> 
> 赞同：0
> 
> 时间：2012-11-22T06:01:47.427
> 
> 标签：cocos2d-x

在我的游戏中，每个角色都有相同的纹理。因此，如果一个场景中有 100 个角色，则应该有 100 个带有纹理的精灵，并且可能存在内存问题。

因此，我认为如果可以共享一个 CCTexture2D，（我的意思是一个内存分配），内存使用量将大幅下降。

可以使用静态或全局声明吗？

有什么意见lz~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T19:52:27.563

相同的精灵，相同的纹理。一个不会优化这种情况的游戏引擎不能真正称自己为游戏引擎。

如果你有一个使用“tex.png”的精灵，那么 tex.png 将被加载到内存中。如果您还使用 tex.png 添加了更多的精灵，那么只有精灵对象本身会使用更多的内存（几百字节），但纹理在加载后会被重新使用。即，您将拥有一个 gazillion 加上一个 sprite，所有这些都来自相同的纹理。

使用精灵批处理节点来提高使用相同纹理的精灵的渲染速度仍然适用并且强烈推荐，但它不会影响内存使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T06:56:40.613

CCSpriteBatchNode 将是你最好的朋友。

首先，您使用要使用的纹理文件创建一个 BatchNode。

然后只需将 100 多个 Sprite 添加到您的批次中。他们只使用一种复制纹理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:25:02.613

有了 m.ding 的回答，我解决了我的问题。

这是解决方案。

步骤 1) 将纹理定义为批处理节点。

```
batchNode = CCSpriteBatchNode::create("mans.pvr.ccz");
this->addChild(batchNode);
CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFramesWithFile("mans.plist"); 
```

步骤 2) 使用批处理节点的纹理创建精灵并将其添加到场景中。

```
CCSprite *man = CCSprite::createWithSpriteFrameName("body_black.png");
batchNode->addChild(man, 1, 1000); 
```

步骤 3）如果要更改纹理，只需使用批处理节点的缓存纹理。

```
((CCSprite *)this->getChildByTag(1000))->setDisplayFrame(CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName("body_red.png"")); 
```

就是这样~。希望这有帮助！

**更新**：添加到批处理节点，而不是“this”。:)

# spring - Liferay Spring Mvc Portlet

> ID：13506693
> 
> 赞同：0
> 
> 时间：2012-11-22T06:02:07.747
> 
> 标签：spring, liferay

在 Liferay Spring Mvc 项目中，我在 liferay 中遇到一个错误

> Portlet 未注册

我从网上得到的解决方案是

> 从项目的 lib 文件夹中删除 portlet.jar。

删除 portlet.jar 文件后，我得到了类似的错误

> 上下文初始化失败（弹簧错误）

你能帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-04T09:05:14.207

您必须使用ant build 构建portlet，如果您正常构建到war 文件，portlet 将无法运行。在 portlet 项目中使用 build.xml，然后构建它 [在此处输入图像描述](http://i.stack.imgur.com/nzUUB.png)

# python - 正则表达式无法与 python 一起正常工作

> ID：13506697
> 
> 赞同：2
> 
> 时间：2012-11-22T06:02:23.073
> 
> 标签：python, regex

我有这个代码

```
site = hxs.select("//h1[@class='state']")
mydata = site.select("string()").extract()
cleaned_mydata = re.sub(ur'(\s)\s+', ur'\1', mydata[0], flags=re.MULTILINE + re.UNICODE)

        log.msg(str(mydata),level=log.ERROR)
        log.msg(str(cleaned_mydata),level=log.ERROR) 
```

第一个输出是

> 错误：[u'\r\n 212\r\n 作业在 xxxx 中包含 php \r\n ']

其他输出是

> xxxxxx 中包含 php 的作业

正则表达式也`212`用它剥离数字。我该如何解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:53:38.853

问题是这个正则表达式会留下它找到的第一个空格并只删除后续的空格。

这意味着

```
u'\r\n 212\r\n jobs containing php in xxxx \r\n ' 
```

变成

```
u'\r212\rjobs containing php in xxxx ' 
```

当你打印这个时，`212`将被打印出来，然后回车会将光标返回到第一列，这样下面的内容`jobs...`就会覆盖`212`.

这提出了两个问题：

*   您似乎正在以二进制模式读取文本文件（否则`\r\n`会被规范化为`\n`s） - 为什么？
*   您真的希望正则表达式以这种方式工作吗？

**编辑：**

所以，根据你的评论，你想

*   完全去除前导和尾随空格
*   将多个连续的空白字符压缩成一个空格（ASCII 32）。

然后使用

```
cleaned_mydata = re.sub(r'\s+', ' ', mydata[0].strip()) 
```

# java - 我的 getView 方法没有被调用来填充 listview 中的数据

> ID：13506698
> 
> 赞同：1
> 
> 时间：2012-11-22T06:02:25.803
> 
> 标签：java, android

```
public class ListDetails extends ListActivity 
{
    ImageButton imagebutton;
    LoanDetails details;
    ArrayList<String> CreateReqID1, OpenTime1, RequestSummary1, RequestStatus1;
    TextView CreateReqID, OpenTime, RequestSummary, RequestStatus;
    ListView list;
     public void onCreate(Bundle savedInstanceState) 
        {       
            super.onCreate(savedInstanceState);
            setContentView(R.layout.listdetails);           

            CreateReqID1 =  (ArrayList<String>) getIntent().getExtras().get("details1");
            OpenTime1 = (ArrayList<String>) getIntent().getExtras().get("details2");
            RequestSummary1 = (ArrayList<String>) getIntent().getExtras().get("details3");
            RequestStatus1 = (ArrayList<String>) getIntent().getExtras().get("details4");

            setListAdapter(new MyAdapter(this, R.layout.requestlistview));        
            }

     private class MyAdapter extends ArrayAdapter<String> {

            public MyAdapter(Context context, int resource) {
                super(context, resource);           

            }
                @Override
                public View getView(final int position, View convertView, ViewGroup parent) {

                    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    final View row = inflater.inflate(R.layout.requestlistview, parent, false);

                    Log.i("values set", "success");
                    CreateReqID = (TextView) row.findViewById(R.id.createReq);
                    OpenTime = (TextView) row.findViewById(R.id.openTime);
                    RequestSummary = (TextView) row.findViewById(R.id.requestSumary);
                    RequestStatus = (TextView) row.findViewById(R.id.status);

                    CreateReqID.setText(CreateReqID1.get(position));
                    OpenTime.setText(OpenTime1.get(position));  
                    RequestSummary.setText(RequestSummary1.get(position));
                    RequestStatus.setText(RequestStatus1.get(position));        

                    return row;
                }           
            }
} 
```

我有上面的代码可以将数据添加到列表视图中，但是我的 getview 方法没有被调用，请告诉我原因。

我的 listview xml 如下所示

```
<ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/imageView2"
        android:layout_alignRight="@+id/imageButton5"
        android:layout_below="@+id/textView1" > 
```

我的列表布局格式如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFFFF" >

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/textView2"
        android:layout_marginTop="12dp"
        android:layout_x="10dp"
        android:layout_y="60dp"
        android:text="RequestSummary"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#000000"
        android:textColorLink="#000000" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/textView4"
        android:layout_marginTop="11dp"
        android:layout_x="10dp"
        android:layout_y="85dp"
        android:text="RequestStatus"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#000000"
        android:textColorHint="#000000" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="11dp"
        android:layout_x="10dp"
        android:layout_y="35dp"
        android:text="OpenTime"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="15dp"
        android:layout_marginTop="15dp"
        android:layout_x="10dp"
        android:layout_y="10dp"
        android:text="CreateReqID"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/createReq"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView2"
        android:layout_marginLeft="29dp"
        android:layout_toRightOf="@+id/textView4"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#000000"
        android:textColorHint="#000000" />

    <TextView
        android:id="@+id/requestSumary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView4"
        android:layout_alignBottom="@+id/textView4"
        android:layout_alignLeft="@+id/createReq"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/status"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView3"
        android:layout_alignBottom="@+id/textView3"
        android:layout_alignLeft="@+id/requestSumary"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/openTime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView2"
        android:layout_alignBottom="@+id/textView2"
        android:layout_alignLeft="@+id/createReq"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#000000" />

</RelativeLayout> 
```

我想动态填充文本视图，我得到了数组列表中的所有内容，但我的 getView 方法没有被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:06:08.040

您没有将字符串数组传递给`ArrayAdapter`..`ArrayAdapter`使用传递的列表来计算要在视图中显示的项目数..

查看[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)的 javadoc 。您要么需要将对象数组发送到其构造函数，要么调用[add()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#add%28T%29)方法之一将对象添加到适配器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:08:01.817

您错过了`getCount()`adatper的方法。只需覆盖getCount方法并返回适当的计数。以下方法将强制您的getView被调用5次

```
@Override
    public synchronized int getCount() {
        return 5;
    } 
```

# jquery - jQuery .slideToggle 不能根据具体情况工作

> ID：13506699
> 
> 赞同：0
> 
> 时间：2012-11-22T06:02:33.260
> 
> 标签：jquery

我正在使用 jQuery 隐藏/显示内容，它可以工作，但不是我想要的方式。我的元素的层次结构如下：

```
<div class="row">
    <div class="column">
        <a href="">Show/Hide</a>
    </div>
    <div class="column hide-id">blahblahblah</div>
</div> 
```

这是代码：

```
$(document).ready(function(){   
    $('.hide-id').hide();
    $('.column > a').click(function() {
        $('.hide-id').slideToggle(500);
            return false;
        });
    });
}); 
```

问题在于：

```
$('.hide-id').slideToggle(500); 
```

它工作正常，但我有这个“hide-id”类重复了几次，这意味着每次我点击“.column a”时，每个带有“hide-id”的div都会显示而不是我点击的单个div .

我尝试了它的变体，例如：

```
$(this).parent().next().slideToggle(500);
this = .column a + .parent() = .column + .next() = .column that contains .hide-id 
```

但是，当我`.slideToggle`从`.hide-id`其他应该工作的东西更改时，脚本会像我的选择器无效一样响应，因为它根本没有响应。

有没有办法让`$('.hide-id').slideToggle(500);`工作或者我需要找到替代方案？我已经尝试将 .each 应用于它，但我要么没有正确执行，要么就是无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:16:48.930

在您的代码中，您正在做什么，`when you click the show/hide link you are toggling all the .hide-id class object`所以您可以这样做：http: [//jsbin.com/obemoc/1/edit](http://jsbin.com/obemoc/1/edit)

```
$(document).ready(function(){   
   $('.hide-id').hide();
      $('.column > a').click(function() {
        $(this).parents('div.row').children('.hide-id').slideToggle(500);
        return false;
    });
}); 
```

在这里，我们从单击链接父级中找到所需的子级并切换幻灯片功能。

# uiimageview - UIImageView 层次结构上的手势

> ID：13506701
> 
> 赞同：1
> 
> 时间：2012-11-22T06:02:43.067
> 
> 标签：uiimageview, frame

我有一个名为“A”的基本 UIImageView，它可以响应 pinchGesture，我捏了它，在我添加子视图之前我重置了框架，它看起来不错。然后我在基础UIImageView“A”上添加subView“B”，但是“B”有“A”的压缩变换，它很大（小）。我已经重置了框架。为什么会发生这种情况。如何使 B 显示原始框架。

```
 - (void)scalePiece:(UIPinchGestureRecognizer *)gestureRecognizer
{
    [self adjustAnchorPointForGestureRecognizer:gestureRecognizer];

    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {
        [gestureRecognizer view].transform = CGAffineTransformScale([[gestureRecognizer view] transform], [gestureRecognizer scale], [gestureRecognizer scale]);
        [gestureRecognizer setScale:1];
    }
}

- (void)adjustAnchorPointForGestureRecognizer:(UIGestureRecognizer *)gestureRecognizer {
    if (gestureRecognizer.state == UIGestureRecognizerStateBegan) {
        UIView *piece = gestureRecognizer.view;
        CGPoint locationInView = [gestureRecognizer locationInView:piece];
        CGPoint locationInSuperview = [gestureRecognizer locationInView:piece.superview];

        piece.layer.anchorPoint = CGPointMake(locationInView.x / piece.bounds.size.width, locationInView.y / piece.bounds.size.height);
        piece.center = locationInSuperview;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T23:37:37.027

如果您将转换应用于 UIView A，则该转换将应用于其所有子视图，在您的情况下为 B。如果您不希望 B 受 A 的变换影响，可以尝试将 B 添加到 A 的超级视图中。

# php - 在 PHP 中获取标签之间的数据

> ID：13506704
> 
> 赞同：0
> 
> 时间：2012-11-22T06:03:07.813
> 
> 标签：php, string, tags, preg-match-all

本质上，我需要一种方法来搜索一大串文本以查找多个出现的两个单独的类似 BBCode 的标签，并获取它们之间的数据。例如：

```
$string = "Referenced section of text[ref]Reference text[/ref]";
$getStringBetween = gsb($string, "[ref]", "[/ref]";
echo $getStringBetween; //Would output "Reference Text" 
```

我曾经`preg_match_all`搜索过这个字符串，一开始还可以，但我发现它相对不可靠。它工作的时间很好，但不久之后它会中断并输出第一个引用标记和最后一个数组键之间的所有内容。

另一个大问题是 [ref][/ref] 标签需要在自己的行上才能工作。

我的故事的道德，我需要一些方法来查找两个特定的文本字符串并使用 PHP 获取它们之间的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:15:22.463

您是否尝试过使用 preg_match_all 进行“最小化”？Preg 匹配通常是贪婪的（会尽可能多地抓取符合条件的），但您可以更改为最小。使用 .+? 或者 。*？作为比赛。

如果您想跨多行匹配，请将 m 用于多行 - 根据问题不确定是否需要它，但它可能是您需要的。

以下应该为您做：

```
preg_match_all('#\[ref\](.*?)\[/ref\]#m', $string, $aMatches); 
```

# google-maps - 谷歌将 API 放置在附近搜索产生奇怪结果的地方

> ID：13506706
> 
> 赞同：4
> 
> 时间：2012-11-22T06:03:18.753
> 
> 标签：google-maps

我最近一直在使用places API，更具体地针对给定纬度/经度坐标的附近郊区。

我指定我想显示给定坐标的“位置”类型，该坐标是维多利亚的点厨，并且还给出了 5000 或 5 公里的半径。结果很好，但是当我将半径增加到 10000' 时，结果尺寸减小了，当我给半径 30000' 时，唯一出现的地方是墨尔本。诡异的。

现在我知道，如果不指定 rankby 距离，它会根据受欢迎程度显示结果，所以我将其更改为 rankby 距离，显示“位置”类型，但这会产生零结果的错误！

我不明白为什么会这样，我尝试了不同的类型，例如子区域、邮政编码和地理编码，所有结果都为零。但是，如果我指定了食物等类型，结果就会开始出现。

我想要做的就是获取给定坐标附近或半径内的邮政编码和/或郊区的列表。我开始相信 API 是错误的，或者不能用 places API 做到这一点？

非常感谢，我希望有人能澄清这一点。

我也在考虑使用一组本地化的附近邮政编码，而不是依赖谷歌，但客户最初坚持他们希望拥有与 airbnb.com 上类似的功能，我相信它只使用谷歌位置。

# jquery - 使用 jQuery 更改自定义 HTML 属性

> ID：13506708
> 
> 赞同：2
> 
> 时间：2012-11-22T06:03:36.350
> 
> 标签：jquery, facebook, html

如果我有这样的事情怎么办

```
<div class="fb-like-box" data-href="" data-width="292" data-show-faces="true" data-stream="true" data-header="false" colorscheme="light"></div> 
```

我想使用 jQuery 将属性“colorscheme”更改为 colorscheme="dark"，并将“data-header”更改为 data-header="false"，依此类推。

当单击按钮或图像或某些其他类型的动作时，这些更改将需要发生......我可以将动作部分记下来，如果您愿意，我将如何要求更改这些特定变量。

我还需要帮助更改所有其他参数，例如 data-href、data-width 和 data-show-faces

**非常感谢提前！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:17:37.660

首先，您应该在按钮或图像上编写单击事件，例如

```
$('#buttonID').click(function(){
    $(".fb-like-box").attr({ "data-href": "#", "colorscheme":"dark", "data-value": "I was updated" });
}); 
```

仅当您单击所选按钮时，div 的属性才会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:07:42.270

您可以使用[jquery .attr() 方法](http://api.jquery.com/attr/)更改任何属性。

如果您在属性名称中遇到减号问题，您可以使用 "" 对其进行转义。像这样：

```
$("#SomeId").attr({ "data-href": "javascript:void(0)", "data-value": "oh hi there!" }); 
```

# asp.net - 如何在 iframe 中加载服务器文件？

> ID：13506713
> 
> 赞同：1
> 
> 时间：2012-11-22T06:03:57.590
> 
> 标签：asp.net, html

我使用这段代码：

```
<iframe src="@HttpContext.Current.Server.MapPath("~/Temp/sample.docx")" height="800" scrolling="no" align="top" frameborder="0" >
  <p>Your browser does not support iframes.</p>
</iframe> 
```

但我收到此错误：

```
The address wasn't understood 
```

Firefox 不知道如何打开这个地址，因为协议 (d) 没有与任何程序关联。

您可能需要安装其他软件才能打开此地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:11:52.713

如果你使用的是 ASP.NET MVC，那么 src 必须这样写：

```
src="@Url.Content("/Temp/sample.docx")" 
```

# apache - Apache 服务器找不到 404

> ID：13506716
> 
> 赞同：3
> 
> 时间：2012-11-22T06:04:07.247
> 
> 标签：apache, http-status-code-404

我正在尝试设置我的网站，每当我尝试使用我的域名进行连接时，我都会收到“404 Not Found”

当我尝试使用我的 IP 访问该站点时，它工作正常。

我在 Debian x64 上。

有人可以帮我解决这个问题。

如果您需要更多信息，请询问。

[httpd.conf](http://pastebin.com/2KEszZ0U)

[Apache2.conf](http://pastebin.com/px5vDw84)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:20:49.017

你的网站在哪里？在本地网络上还是在托管服务提供商上？

在任何情况下，您都需要根据您的要求将您的网络服务器 IP 添加到 DNS 服务器（本地或 www），不知道您的网络服务器是本地还是全球，很难给您答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:17:03.963

虚拟主机应如下所示：

```
 <VirtualHost *:80>
        ServerAdmin nicholas_brown@rocketmail.com
        DocumentRoot /home/web/websites/special-faces.net
        ServerName special-faces.net
        ServerAlias www.special-faces.net
        ErrorLog /home/web/website_logs/errorlog.txt
        CustomLog /home/web/website_logs/accesslog.txt common

        <Directory "/home/web/websites/special-faces.net">
            Order allow,deny
            Allow from all
        </Directory>

     </VirtualHost> 
```

如果要使用 .htaccess 文件，请在“全部允许”行之后添加：

```
 Allowoverride all 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T17:56:24.097

对于服务器版本：Apache/2.4.16 及更高版本，

```
<VirtualHost localhost.com:80>
        ServerName localhost.com
        ServerAlias localhost.com
        ServerAdmin webmaster@localhost
        RewriteEngine On

        DocumentRoot /var/www/html
        DocumentRoot /home/<user name where code will be placed>/public_html/html
        <Directory /var/www/html>
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combinedtimezone

</VirtualHost> 
```

# android - 如何在 Kindle Fire 上安装 .apk 文件

> ID：13506718
> 
> 赞同：1
> 
> 时间：2012-11-22T06:04:11.367
> 
> 标签：android, in-app-purchase, amazon

我正在尝试为 Kindle Fire 进行亚马逊应用内购买。我在应用程序购买过程中去亚马逊。对于 InApp，首先要在 Kindle 上安装 sdkTester.apk 文件，但我没有这样做是正确的程序吗？或者 SDKTESTER.apk 文件可以放到亚马逊 BUttonClicker 示例项目的 bin 文件夹中？我尝试了第二种方法，但在发送请求后它不再继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:07:37.730

您可以尝试使用`adb`：
输入`adb install "packagename.apk"`命令提示符；
要确保 adb 看到您的设备类型：
`adb devices`，并且您必须在列表中看到您的设备。

`adb`- 你可以从 SDK 中获得。

# sql - 好的开源 SQL 解析器？

> ID：13506722
> 
> 赞同：3
> 
> 时间：2012-11-22T06:04:29.777
> 
> 标签：sql, parsing

Java 应用程序需要支持数据库 Oracle、DB2 和 MSS。一些涉及 sql 函数的查询的语法在不同的数据库中具有不同的语法。示例：oracle 中的 NULLIF() 可能不适用于 MSS。是否有任何开源 SQL 解析器可以将查询字符串解析并转换为 db 特定的 sql？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-08-23T18:44:24.413

jOOQ 有一个 SQL 解析器，可以完全满足您的需求。您可以在此处查看在线版本：[https](https://www.jooq.org/translate) ://www.jooq.org/translate 。解析器也可以用作[CLI](https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/sql-parser-cli/)或[API](https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/sql-parser-api/)。一个例子：

```
System.out.println(
    DSL.using(SQLSERVER, new Settings()
            .withParseDialect(ORACLE)
            .withTransformTableListsToAnsiJoin(true))
        .parser()
        .parse("select nvl(a.z, 1) from a, b, c where a.x = b.x(+) and a.y = c.y")
); 
```

这将打印：

```
select coalesce(A.Z, 1)
from A
  join C
    on A.Y = C.Y
  left outer join B
    on A.X = B.X; 
```

jOOQ 是开源 RDBMS 的开源，并具有其他数据库产品的商业驱动程序。我知道您可能正在寻找一个全 OSS 库，我只能为您提供部分 OSS 库，也许其他人会发现这个迟到的答案很有用。

免责声明：我在 jOOQ 背后的公司工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:31:00.007

@hd1 有一个正确的问题：你想要完成什么？因为如果您的目标不是解析 SQL，只需使用不同的 DB 来存储实体，例如支持[JPQL（Java Persistence Query Language）的](http://en.wikipedia.org/wiki/Java_Persistence_Query_Language)[JPA（Java Persistence API）](http://en.wikipedia.org/wiki/Java_Persistence_API)库，即与数据库无关（或应该是）。

链接：

*   [Eclipselink](http://www.eclipse.org/eclipselink/)
*   [休眠](http://www.hibernate.org/)

# java - json数组有问题

> ID：13506726
> 
> 赞同：1
> 
> 时间：2012-11-22T06:04:57.250
> 
> 标签：java, android, eclipse, json

首先感谢您花时间查看我的问题，我是 android 开发的新手，我遇到了来自以 JSON 编码的 PHP 服务器的数组的问题，我尝试寻找答案，但所有示例JSON使用字段名解码数组，我的没有字段名。

这是可以是多个字符串的数组的示例：

```
[["104733","\u5e38\u4e16\u7530 \u9752","images\/myphoto\/104733_20120711101030_sq_s.jpg","062556","2012\/11\/21","test20121121-2","Test2\n\u643a\u5e2f\u304b\u3089","11.11","333.33","555.55","77.77","22:22:22","20:44:44","19:07:06","17:29:28",0," ","0"," "," ","61116",0," "]
,["104733","\u5e38\u4e16\u7530 \u9752","images\/myphoto\/104733_20120711101030_sq_s.jpg","062555","2012\/11\/21","test20121121","Test\n\u643a\u5e2f\u304b\u3089","11.11","333.33","555.55","77.77","22:22:22","20:44:44","19:07:06","17:29:28",0," ","0"," "," ","61117",0," "]] 
```

基本上说 \u643a\u5e2f\u304b\u3089 是日语中携带帯から的字符。

我设法使用这种循环手动分隔字段，但仍然以编码格式获取名称。

```
 for(int i=0; i<num; i++){
            //Separate the string in to the different groups
            endIdx = strcline.indexOf("]", startIdx)+1;
            String temp = strcline.substring(startIdx, endIdx);

            //Get the user id from the string temp
            startIdx2 = 2;
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String userId = temp.substring(startIdx2, endIdx2);
            Log.v("temp", userId);
            startIdx2 = endIdx2 + 3;

            //Get the user name
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String userName = temp.substring(startIdx2, endIdx2);
            Log.w("temp", userName);
            //String userName2 = new String(userName.getBytes(), "UTF-8");

            //Log.d("fullurl", userName2);
            //Log.w("temp", String.valueOf(userName2));
            startIdx2 = endIdx2 + 3;

            //Get the user photo url
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String userPhoto = temp.substring(startIdx2, endIdx2);
            Log.d("temp", userPhoto);
            startIdx2 = endIdx2 + 3;

            //Get the training id
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String trainingId = temp.substring(startIdx2, endIdx2);
            Log.d("temp", trainingId);
            startIdx2 = endIdx2 + 3;

            //Get the diary's date
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String diaryDate = temp.substring(startIdx2, endIdx2);
            Log.d("temp", diaryDate);
            startIdx2 = endIdx2 + 3;

            //Get the Diary's title
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String diaryTitle = temp.substring(startIdx2, endIdx2);
            Log.d("temp", diaryTitle);
            startIdx2 = endIdx2 + 3;

            //Get the diary's content
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String diaryContent = temp.substring(startIdx2, endIdx2);
            Log.d("temp", diaryContent);
            startIdx2 = endIdx2 + 3;

            //Get the swim distance
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String swimDistance = temp.substring(startIdx2, endIdx2);
            Log.d("temp", swimDistance);
            startIdx2 = endIdx2 + 3;

            //Get the bike distance
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String bikeDistance = temp.substring(startIdx2, endIdx2);
            Log.d("temp", bikeDistance);
            startIdx2 = endIdx2 + 3;

            //Get the run distance
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String runDistance = temp.substring(startIdx2, endIdx2);
            Log.d("temp", runDistance);
            startIdx2 = endIdx2 + 3;

            //Get the other distance
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String otherDistance = temp.substring(startIdx2, endIdx2);
            Log.d("temp", otherDistance);
            startIdx2 = endIdx2 + 3;

            //Get the swim time
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String swimTime = temp.substring(startIdx2, endIdx2);
            Log.d("temp", swimTime);
            startIdx2 = endIdx2 + 3;

            //Get the bike time
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String bikeTime = temp.substring(startIdx2, endIdx2);
            Log.d("temp", bikeTime);
            startIdx2 = endIdx2 + 3;

            //Get the run time
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String runTime = temp.substring(startIdx2, endIdx2);
            Log.d("temp", runTime);
            startIdx2 = endIdx2 + 3;

            //Get the other time
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String otherTime = temp.substring(startIdx2, endIdx2);
            Log.d("temp", otherTime);
            startIdx2 = endIdx2 + 2;

            //Get the number of photos
            endIdx2 = temp.indexOf(",", startIdx2);
            String numPhotos = temp.substring(startIdx2, endIdx2);
            Log.d("temp", numPhotos);
            startIdx2 = endIdx2 + 2;

            //Get the string for the Photos
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String stringPhotos = temp.substring(startIdx2, endIdx2);
            Log.d("temp", stringPhotos);
            startIdx2 = endIdx2 + 3;

            //Get the like flag
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String likeFlg = temp.substring(startIdx2, endIdx2);
            Log.d("temp", likeFlg);
            startIdx2 = endIdx2 + 3;

            //Get the name of friend who liked
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String friendLiked = temp.substring(startIdx2, endIdx2);
            Log.d("temp", friendLiked);
            startIdx2 = endIdx2 + 3;

            //Get the string for the likes
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String stringLike = temp.substring(startIdx2, endIdx2);
            Log.d("temp", stringLike);
            startIdx2 = endIdx2 + 3;

            //Get the id for this array
            endIdx2 = temp.indexOf(",", startIdx2) - 1;
            String arrayId = temp.substring(startIdx2, endIdx2);
            Log.d("temp", arrayId);
            startIdx2 = endIdx2 + 2;

            //Get the number of comments
            endIdx2 = temp.indexOf(",", startIdx2);
            String numberComments = temp.substring(startIdx2, endIdx2);
            Log.d("temp", numberComments);
            startIdx2 = endIdx2 + 2;

            //Get the string for the comments
            endIdx2 = temp.indexOf("]", startIdx2) - 1;
            String stringComments = temp.substring(startIdx2, endIdx2);
            Log.e("temp", stringComments);

            startIdx = endIdx + 1;

            arrayTemp[i] = temp;
            Log.w("LogStr", temp);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:32:06.330

您的 json 是字符串数组的数组，这就是您没有字段名称的原因。它们只存在于对象中。

用字符串操作解析 json 是一件很痛苦的事情。您应该查看`org.json`包中的类并从此处开始解析`JSONArray`。

```
JSONArray a1 = new JSONArray(json);
for (int i = 0; i < a1.length(); i++) {
    JSONArray a2 = a1.getJSONArray(i);
    for (int j = 0; j < a2.length(); j++) {
    String s1 = a2.getString(j);
        // ...
    }
} 
```

# android - 选择 ListView 项时更改 TextView 的字体颜色

> ID：13506730
> 
> 赞同：8
> 
> 时间：2012-11-22T06:05:33.347
> 
> 标签：android, android-listview

我通过自定义适配器设置的每个 ListView 项中都有一个 TextView。TextView XML 不在编写 ListView XML 的同一文件中，我希望当 ListView 的任何项目被选中时，该特定项目的字体颜色应该改变。我还通过定义 TextView 的不同状态（即选择、聚焦和按下）来尝试这一点，但这并不能解决我的问题。请建议我一些解决方案。这是片段..

一个 xml 文件中的列表视图，例如。文件1.xml

```
<ListView
    android:id="@+id/listView1"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="0.5"
    android:clickable="true" /> 
```

和不同xml中的T​​extView ..即file2.xml

```
<TextView
    android:id="@+id/rowListTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingBottom="10dp"
    android:paddingLeft="10dp"
    android:paddingTop="10dp"
    android:text="@string/app_name"
    android:textColor="@color/file3"
    android:textSize="10sp"
    android:textStyle="bold" /> 
```

res/color 文件夹中的文本颜色属性文件，即 file3.xml。

```
<item android:state_selected="true" android:color="@android:color/white"/>
<item android:state_focused="true"  android:color="@android:color/white"/>
<item android:state_pressed="true"  android:color="@android:color/white"/>
<item android:color="@android:color/black"/> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-10-23T18:09:49.743

试试这个 textColor 的颜色状态列表。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="#fff"/>
    <item android:state_activated="true" android:color="#fff"/>
    <item android:color="#000" />
</selector> 
```

[Android指南](http://developer.android.com/guide/topics/resources/color-list-resource.html)没有提到`state_activated`属性，但它对我有用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-27T17:53:49.177

在选择器中：

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">  
    <item  android:state_activated="true"  android:color="#ff0000" />
    <item android:state_active="true" android:color="#ff0000" />  
    <item android:state_pressed="true" android:color="#ff0000" />
    <item android:state_selected="true" android:color="#ff0000" />
    <item android:state_focused="true" android:color="#ff0000" />
    <item android:color="#000000" />
</selector> 
```

活动中：`myListView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);`

```
public void onItemClick(AdapterView<?> parent, View view,
                      int position, long id) {
                     pl=position;
                     myListView.setItemChecked(pl, true);
                     adapter.notifyDataSetChanged();
                          ..... 
```

项目.xml：

```
<?xml version="1.0" encoding="utf-8"?>
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceListItemSmall"
    android:gravity="center_vertical"
    android:textColor="@drawable/selector"
    android:minHeight="?android:attr/listPreferredItemHeightSmall"
    /> 
```

在我点击它们后，我检查的项目是红色的。只有一项检查项目。享受！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-22T06:18:57.427

下面的片段会帮助你。

```
listView.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView <? > adapterView, View rowView,
    int position, long id) {
        TextView textView = (TextView) rowView.findViewById(R.id.rowListTextView);

        textView.setTextColor("Desired Color");

    }
}); 
```

当您滚动列表并且您选择的项目失去焦点时，我没有包括诸如保留文本颜色的场景。此代码段将引导您朝着正确的方向前进。

# android - 如何获取 Android AVD 中可用的示例演示应用程序的源代码

> ID：13506732
> 
> 赞同：2
> 
> 时间：2012-11-22T06:05:36.493
> 
> 标签：android, android-emulator

出于学习目的，我需要在 Sample-Graphics 下的 Android AVD 中获取演示应用程序“Finger Paint”的源代码。我想获得完整的项目，以便我可以在 Eclipse 中运行该项目并了解其工作原理。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:10:53.743

完整的项目在[这里](https://github.com/nikt/Finger-Paint)。您也可以检查[Link1](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.2_r1.1/com/example/android/apis/graphics/FingerPaint.java)和[Link2](http://code.google.com/p/flatnote/source/browse/trunk/src/com/androsz/flatnote/handwriting/FingerPaint.java?r=10)。

# c++ - 两种模板类型的 sizeof，当两者都从一个基数派生时

> ID：13506734
> 
> 赞同：7
> 
> 时间：2012-11-22T06:05:42.767
> 
> 标签：c++, c++11

示例代码

```
#include <iostream>

struct base {};

template<typename Type>
struct left : base {

   Type value;
};

template<typename Type>
struct right : base {

   Type value;
}; 

int main() {
   std::cout << "sizeof left<base> = " << sizeof(left<base>) << std::endl;
   std::cout << "sizeof left<right<base>>    = " << sizeof(left<right<base>>) << std::endl;
   std::cout << "sizeof left<right<left<right<left<base>>>>> = " << sizeof(left<right<left<right<left<base>>>>>) << std::endl;
} 
```

输出

GCC 4.6 是

```
sizeof left<base> = 2  
sizeof left<right<base>>    = 3  
sizeof left<right<left<right<left<base>>>>> = 6 
```

用铿锵3.1

```
sizeof left<base> = 2  
sizeof left<right<base>>    = 3  
sizeof left<right<left<right<left<base>>>>> = 6 
```

使用 MSVC 2012

```
sizeof left<base> = 1
sizeof left<right<base>>    = 1
sizeof left<right<left<right<left<base>>>>> = 1 
```

所以，问题是，它是 GCC/clang 中的错误，还是实现定义，还是正确的输出（来自标准的引用，或者对这种行为的解释会很好）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:49:02.400

相关引用是 1.8 [intro.object] 第 6 段：

> 除非对象是位域或大小为零的基类子对象，否则该对象的地址就是它占用的第一个字节的地址。如果一个对象是另一个的子对象，或者如果至少一个是大小为零的基类子对象并且它们属于不同类型，则两个不是位域的对象可能具有相同的地址；否则，它们应具有不同的地址。

在您的`right<T>`和`left<T>`对象中（为什么必须使用不同的类模板？一个应该就足够了）您每个人都有一个成员`value`（类型`T`）。每个人都需要获得自己的唯一地址。因此，

```
sizeof(left<right<left<right<left<base>>>>>) == 1 
```

绝对是错的！有 6 个不同的对象：

*   5`value`秒
*   一`left<right<left<right<left<base>>>>>`

只有 the`left<right<left<right<left<base>>>>>`和它的一个主题 the （`value`如果我记得其他规则的话，第一个）可以共享一个地址。也就是说，对象的大小至少需要为 5。由于对象在对齐时效果最好，它似乎被填充到 6 个字节（这很奇怪；我希望它被填充到 4 的倍数）。

甚至`left<base>`不可能的大小`1`：已经涉及两个`base`对象！一个以基类形式的`lef<base> and one in form of a member of this class. These two`base` 对象需要不同的地址，因此，大小至少需要为 2。

无论如何，对象大小只要求它们至少有多大。他们没有任何要求，他们不得大于某物。这被认为是实施质量问题。基于此，唯一错误的编译器（假设大小引号确实是正确的）是 MSVC++。其他尺寸有时可能比期望的稍大，但这不是错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:35:41.410

GCC 的行为很奇怪，但 sizeof 完全是编译器问题，所以它只取决于编译器如何说你可以尝试

```
#pragma pack(1) 
```

并再次查看结果

# ruby-on-rails - Rails has_many：通过嵌套形式

> ID：13506735
> 
> 赞同：28
> 
> 时间：2012-11-22T06:05:46.127
> 
> 标签：ruby-on-rails, nested-forms, has-many-through

我刚刚加入`has_many :through`协会。我正在尝试通过一个表单实现为所有 3 个表（和关联表）`Physician`保存数据的能力。`Patient`

## 我的迁移：

```
class CreatePhysicians < ActiveRecord::Migration
  def self.up
    create_table :physicians do |t|
      t.string :name
      t.timestamps
    end
  end
end

class CreatePatients < ActiveRecord::Migration
  def self.up
    create_table :patients do |t|
      t.string :name
      t.timestamps
    end
  end
end

class CreateAppointments < ActiveRecord::Migration
  def self.up
    create_table :appointments do |t|
      t.integer :physician_id
      t.integer :patient_id
      t.date :appointment_date
      t.timestamps
    end
  end
end 
```

### 我的模型：

```
class Patient < ActiveRecord::Base
  has_many :appointments
  has_many :physicians, :through => :appointments
  accepts_nested_attributes_for :appointments
  accepts_nested_attributes_for :physicians
end
class Physician < ActiveRecord::Base
  has_many :appointments
  has_many :patients, :through => :appointments
  accepts_nested_attributes_for :patients
  accepts_nested_attributes_for :appointments
end
class Appointment < ActiveRecord::Base
  belongs_to :physician
  belongs_to :patient
end 
```

### 我的控制器：

```
def new
    @patient = Patient.new
    @patient.physicians.build
    @patient.appointments.build
end 
```

### 我的观点（`new.html.rb`）：

```
<% form_for(@patient) do |patient_form| %>
  <%= patient_form.error_messages %>
  <p>
    <%= patient_form.label :name, "Patient Name" %>
    <%= patient_form.text_field :name %>
  </p>
  <%  patient_form.fields_for :physicians do |physician_form| %>
    <p>
      <%= physician_form.label :name, "Physician Name" %>
      <%= physician_form.text_field :name %>
    </p>
 <% end %>

  <p>
    <%= patient_form.submit 'Create' %>
  </p>
<% end %>

<%= link_to 'Back', patients_path %> 
```

我可以为 an 创建一个新`Patient`的`Physician`和关联的记录`Appointment`，但现在我想`appointment_date`在表单中也有字段。我应该在哪里放置`Appointment`s 的字段以及在我的控制器中需要进行哪些更改？我尝试了谷歌搜索并尝试了[这个](https://stackoverflow.com/questions/2182428/rails-nested-form-with-has-many-through-how-to-edit-attributes-of-join-model)，但在实现它时遇到了一些或其他错误。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-01-11T08:35:57.313

好的，这个问题的小问题困扰了我几个小时，所以我将在这里发布我的工作解决方案，希望它可以节省一些时间。这适用于 Rails 4.0 和 Ruby 2.0。这也克服了我遇到的“符号到整数转换”问题。

**楷模：**

```
class Patient < ActiveRecord::Base 
  has_many :appointments
  has_many :physicians, :through: :appointments
  accepts_nested_attributes_for :appointments
end 

class Appointment < ActiveRecord::Base
  belongs_to :physician 
  belongs_to :patient
  accepts_nested_attributes_for :physician
end

class Physicians < ActiveRecord::Base
  has_many :appointments
  has_many :patients, through: :appointments
end 
```

**控制器：**

```
def new
  @patient= Patient.new 
  @appointments = @patient.appointments.build
  @physician = @appointments.build_physician 
end

def create
  Patient.new(patient_params)
end

def patient_params
   params.require(:patient).permit(:id, appointments_attributes: [:id, :appointment_time, physician_attributes: [:id ] )
end 
```

**看法**

```
<% form_for(@patient) do |patient_form| %>
  <%= patient_form.error_messages %>
  <p>
    <%= patient_form.label :name, "Patient Name" %>
    <%= patient_form.text_field :name %>
  </p>

  <% patient_form.fields_for :appointments do |appointment_form| %>
    <p>
      <%= appointment_form.label :appointment_date, "Appointment Date" %>
      <%= appointment_form.date_field :appointment_date %>
    </p>

    <% appointment_form.fields_for :physician do |physician_form| %>
      <p>
        <%= physician_form.label :name, "Physician Name" %>
        <%= physician_form.text_field :name %>
      </p>
    <% end %>
  <% end %>

  <p>
    <%= patient_form.submit 'Create' %>
  </p>
<% end %>

<%= link_to 'Back', patients_path %> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-02T20:45:31.440

“我得到了它的工作。我只是改变了模型如下”：在上面的评论中引用了 Shruti

```
class Patient < ActiveRecord::Base 
  has_many :appointments, :dependent => :destroy 
  has_many :physicians, :through => :appointments
  accepts_nested_attributes_for :appointments
end 

class Appointment < ActiveRecord::Base
  belongs_to :physician 
  belongs_to :patient
  accepts_nested_attributes_for :physician
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-22T06:52:31.217

您的患者类接受医生和预约的嵌套属性。尝试添加另`fields_for`一种预约方式。

```
<% form_for(@patient) do |patient_form| %>
  <%= patient_form.error_messages %>
  <p>
    <%= patient_form.label :name, "Patient Name" %>
    <%= patient_form.text_field :name %>
  </p>

  <% patient_form.fields_for :physicians do |physician_form| %>
    <p>
      <%= physician_form.label :name, "Physician Name" %>
      <%= physician_form.text_field :name %>
    </p>
  <% end %>

  <% patient_form.fields_for :appointments do |appointment_form| %>
    <p>
      <%= appointment_form.label :appointment_date, "Appointment Date" %>
      <%= appointment_form.date_field :appointment_date %>
    </p>
  <% end %>

  <p>
    <%= patient_form.submit 'Create' %>
  </p>
<% end %>

<%= link_to 'Back', patients_path %> 
```

# c# - 网页中的异步更新数据

> ID：13506736
> 
> 赞同：0
> 
> 时间：2012-11-22T06:05:50.863
> 
> 标签：c#, asp.net, asynchronous

我正在使用 ASP.NET 和 C# 来设计我的网页。

在网页中，我有一个 GridView，我将数据库中的数据填充到其中。进入数据库的数据将来自另一个网站。

我需要做的是在特定的时间间隔（每 1 分钟）我需要检查数据库中的新行，如果存在任何新行，那么我需要在我的页面中向浏览器显示通知`(no) of new orders have come. Click here to load them.`. 当我点击那里时，必须刷新页面并显示新行。

如何在每个特定时间间隔检查数据库？你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:10:04.967

您可以在给定的时间间隔触发 ajax 调用并获取通知

```
 //first call 
yourAjaxFunctionHere();

 //later call done by settimeout function 
function yourAjaxFunctionHere() {
  $.ajax({
    url: 'ajax/test.html', 
    success: function(data) {
      $('.result').html(data);
    },
    complete: function() {
      // Schedule the next request when the current one's complete
      setTimeout(worker, 5000);
    }
  });
} 
```

jquery ajax调用服务器端代码教程

*   [从客户端脚本调用服务器端函数](http://pranayamr.blogspot.ca/2012/01/calling-server-side-function-from.html)
*   [Jquery Ajax 调用函数](http://pranayamr.blogspot.ca/2011/07/jquery-ajax-calling-functions.html)
*   [使用 Jquery/Javascript 调用跨域 WCF 服务](http://pranayamr.blogspot.ca/2011/06/calling-cross-domain-wcf-service-using.html)
*   [使用 jQuery 调用 WCF 服务的步骤](http://pranayamr.blogspot.ca/2010/12/steps-to-call-wcf-service-using-jquery.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:13:12.017

最简单的方法是获取 jquery 计时器之一：[Jquery Timer Plugins](http://archive.plugins.jquery.com/project/timers)。然后创建严肃的 Wcf 或 Asmx Web 服务，并在每个计时器滴答时询问它。然后更新您的数据，发出 ajax 请求并更新它，将 GridView 放在更新面板中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:01:40.460

WCF 回调呢？

[回调](http://idunno.org/archive/2008/05/29/wcf-callbacks-a-beginners-guide.aspx)

回调允许您直接从服务器获取事件，并且您不需要每隔 X 秒拉一次服务器。

# extjs - Extjs 3.4：从其他可编辑字段中获取值

> ID：13506737
> 
> 赞同：1
> 
> 时间：2012-11-22T06:06:06.623
> 
> 标签：extjs, combobox, datagridcomboboxcolumn

这是我的代码：

```
{header: "Kabupaten", width: 60, sortable: true, dataIndex: 'id_k',
        renderer: function(value, metaData, record, rowIndex, colIndex, store) {
            return rend_kab(value);
        },
        editor: new Ext.form.ComboBox({
            listeners: {
                beforequery: function(qe){
                qe.combo.store.setBaseParam('id_p', "VALUE FROM THE OTHER FIELD");
                }, 
                scope:this
            },
            store : kab,
            valueField: 'id_k',
            displayField: 'nm_kb',
            triggerAction: 'all'
        })
    },
    {header: "Provinsi", width: 60, sortable: true, dataIndex: 'id_p',
        renderer: function(value, metaData, record, rowIndex, colIndex, store) {
            return rend_prov(value);
        },
        editor: new Ext.form.ComboBox({
            store : prov,
            valueField: 'id_p',
            displayField: 'nm_p',
            triggerAction: 'all'
        })
    } 
```

请参阅文本“其他字段的值”，我希望它更改为同一行中字段“id_p”的值...我该怎么做？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:42:55.400

你可以去，

```
 editor: new Ext.form.ComboBox({
            listeners: {
                beforequery: function(qe){
//If you have checkbox selection model then 
// to get rowIndex need to catch row in which combobox is present. using 
//this.parent.getSelectionModel().getSelected()
                    qe.combo.store.setBaseParam('id_p', gridStore.getAt(rowIndex).get("id_p"));

                }, 
                scope:this
            },
            store : kab,
            valueField: 'id_k',
            displayField: 'nm_kb',
            triggerAction: 'all'
        }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:55:26.903

您可以通过不同方式访问组件/变量：

假设您有两个组合框：

```
var ComboBoxP = Ext.create('Ext.form.ComboBox',{
        id: 'CBP', //used for example 2
        valueField: 'id_p',
        displayField: 'nm_p'
});

var ComboBoxKB = Ext.create('Ext.form.ComboBox',{
        id: 'CBKB', //used for example 2
        valueField: 'id_k',
        displayField: 'nm_kb',
}); 
```

1）只需使用变量。

```
SetParam( ComboBoxP.getValue() + ComboBoxKB.getValue() ); 
```

2）使用id和getComponent（简称getCmp，不推荐这种方式，因为id需要唯一）

```
SetParam( Ext.getCmp('CBP').getValue() + Ext.getCmp('CBKB').getValue() ); 
```

3）在您的父容器中查找组件。对于这种方法，您需要在应用程序中有良好的结构以及对上/下选择器有很好的了解。

```
 this.up('form').down('combobox').getValue(); 
```

# php - 获取指定模式 PHP 之间的字符串

> ID：13506741
> 
> 赞同：0
> 
> 时间：2012-11-22T06:06:28.883
> 
> 标签：php, preg-match

我有这样的字符串

```
$string = "<!--:en-->English Characters<!--:--><!--:zh-->日本<!--:-->"; 
```

我只对`<!--:zh--><!--:-->`;之间的内容感兴趣

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T06:12:46.710

```
preg_match( '/<!--:zh-->(.*?)<!--/', $string, $matches);

print_r($matches[1]); 
```

# php - 哪些是对其他供应商的现有代码库进行修改的正确方法？

> ID：13506742
> 
> 赞同：0
> 
> 时间：2012-11-22T06:06:30.020
> 
> 标签：php

假设我们已经下载了某个供应商的某些产品（例如框架或 CMS）的 PHP 源代码。

检查源代码后发现，为了与我们的应用程序正确集成，需要稍微修改其中的某些部分（更改 1-2 行）。

是否有任何众所周知的技术可以进行此类修改？想象一下，我们改变了一些东西，在该供应商发布了其产品的新版本之后，我们应该手动比较所有文件，以便将我们的修改转移到新版本。有什么方法可以避免此类问题吗？也许有一些命令行工具可以简化它？

**编辑**
刚刚发现[https://stackoverflow.com/questions/1973021/what-are-some-strategies-to-facilitate-relatively-heavy-modification-of-vendors?rq=1](https://stackoverflow.com/questions/1973021/what-are-some-strategies-to-facilitate-relatively-heavy-modification-of-vendors?rq=1) [@Breton](https://stackoverflow.com/users/51101/breton)
的答案提到使用 GIT 和 2 个单独分支机构。我们可以这样做，但也许有人知道其他方法可以做到这一点？ 在我们的例子中，供应商代码的修改非常小（1-2 行）......

# css - CSS 半屏浏览器宽度

> ID：13506743
> 
> 赞同：0
> 
> 时间：2012-11-22T06:06:31.913
> 
> 标签：css

每次我拖动浏览器窗口以使其自动调整为显示器大小的一半时，侧面都会出现一个空块。我尝试将宽度更改为 min-width: 100%，但这并不能解决问题。有任何想法吗？

网站：[http ://andrewgu12.kodingen.com/graphicDesign/index.php](http://andrewgu12.kodingen.com/graphicDesign/index.php)

CSS：

```
 div#bodyContent-container { 
    min-width:100%;
    height: 100%;
    min-height:1100px;
    background:#f3f3f3;
    margin: 0 auto;
    padding: 0;
 }
 div#bodyContent {
    width:960px;
    height:100%;
    min-height: 1024px;
    margin: 0 auto;
    padding: 0;
    -webkit-box-shadow: 6px 0px 10px -7px #888, -6px 0px 10px -7px #888;
     -moz-box-shadow: 6px 0px 10px -7px #888, -6px 0px 10px -7px #888; /* Firefox 3.6 and earlier */
    box-shadow: 6px 0px 10px -7px #888, -6px 0px 10px -7px #888;
    padding-top: 200px;
 }
footer {
    min-width: 100%;
    height:50px;
    color:#ffffff;
    text-align: center;
    padding-top: 20px;
    bottom: 0;
    background: #161616; /* Old browsers */
    background: -moz-linear-gradient(top,  #161616 0%, #202020 92%, #131313 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#161616), color-stop(92%,#202020), color-stop(100%,#131313)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #161616 0%,#202020 92%,#131313 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #161616 0%,#202020 92%,#131313 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #161616 0%,#202020 92%,#131313 100%); /* IE10+ */
    background: linear-gradient(top,  #161616 0%,#202020 92%,#131313 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#161616', endColorstr='#131313',GradientType=0 ); /* IE6-9 */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:12:38.880

您好，现在**定义您的** `body` `min-width:960px;`并**解决**了这个问题

**像这样**

```
body{
min-width:960px;
} 
```

**结果是**

![在此处输入图像描述](../Images/4d1f47b1c36752498bea745ba24d2c90.png)

# java - Httpunit 测试 - 如何检索 cookie 值

> ID：13506747
> 
> 赞同：2
> 
> 时间：2012-11-22T06:06:44.267
> 
> 标签：java, webclient, http-unit

我已经为我的 Web 应用程序编写了“Httpunit”测试，我想检索 cookie，但是当我使用“web.getCookieValue(String value);”时 它返回 null 。

这是我的代码：

```
 public class Test_9 extends TestCase  {

   public void test_9() throws Exception {
     WebConversation web = new WebConversation();
     WebRequest  request = new PostMethodWebRequest("http://localhost:8090/get"  );
     web.getCookieValue("auth");
     request.setParameter("table", "activity");
     request.setParameter("id", "0");
     request.setParameter("subset", "null");
     WebResponse response = web.getResource(request);
     JSONObject json = new JSONObject(response.getText());
     boolean success = json.getBoolean("success");

     if(success){
        System.err.println("/getActivities :"+json.toString());
     }
     else{
        assertEquals(false, success);
        String message = json.getString("msg");
        System.err.println("/getActivities :"+message);
     }
 }
} 
```

请帮助我提前谢谢:)。

# vb.net - VB.Net 桌面应用程序中的内存泄漏

> ID：13506751
> 
> 赞同：0
> 
> 时间：2012-11-22T06:07:07.170
> 
> 标签：vb.net, memory-management, memory-leaks, desktop-application, out-of-memory

我们的 vb.net 桌面应用程序内存使用存在问题。应用程序在使用 4-5 小时后抛出异常。我们正在使用 ANTS Memory Profiler 检查这种行为，它显示了私有字节的持续增加。“堆中的字节数”正在减少（它在快照之间显示负值）。对象、变量和数据元素以代码形式布置。

Windows 任务管理器显示大约 12-20 MB 的应用程序工作集（永远不会超过 100 MB），但提交大小从 95 MB 开始，达到大约 50 MB 后会引发错误。工作时 400 MB 仍为最大 40-60 MB。

所以问题在于“提交大小”并没有大幅减少。

我们的应用程序内置于 vb.net、sql server 2005、Infragistics Netadvantage controls 8.3 和 framework 2.0。我们使用网络服务作为我们的中间层。我们还在升级到 VS 2012、Framework 4.5 和 Infragistics Netadvantage 控件 12.1 后检查了相同的行为。

# macos - 在 Mac 上使用 openssl 1.0.0 和 Qt 4.8.3

> ID：13506755
> 
> 赞同：0
> 
> 时间：2012-11-22T06:07:22.037
> 
> 标签：macos, qt, openssl, qtwebkit

当我在使用 Qt 4.8.3 构建的基于 qtwebkit 的应用程序中使用 openssl 0.9.8 时，我遇到了很多 ssl 错误。如果我使用 openssl 1.0.0，则没有错误。但是，Mac 默认只附带 openssl 0.9.8 和 0.9.7。默认安装中不包含 openssl 1.0.0。因此，我想在我的应用程序包中部署 libssl.1.0.0.dylib。Qt 使用 mac API dlopen 动态加载 ssl 库。因此，它只搜索 LD_LIBRARY_PATH 中给出的路径。我知道我可以创建一个 shell 脚本来使用修改后的 LD_LIBRARY_PATH 启动应用程序（这就是人们在 linux 上部署应用程序的方式）。但这似乎不是mac上的标准做法。我也不想将 openssl 1.0.0 安装到系统路径中。

请告知解决此问题的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:03:37.660

您`DYLD_LIBRARY_PATH`在 OSX 上更改。

# algorithm - 卡尔曼滤波器算法是否可能导致奇异方差矩阵？

> ID：13506756
> 
> 赞同：1
> 
> 时间：2012-11-22T06:07:27.260
> 
> 标签：algorithm, matlab, kalman-filter

在卡尔曼滤波器实现中，“预测估计协方差”P(k|k-1)，（[参见此处的 wiki](http://en.wikipedia.org/wiki/Kalman_filter)）是否有可能是奇异矩阵？如果没有，我的代码有问题吗？

这是状态空间模型

```
%    y{t}=Z{t} b{t} +  eps{t},                  eps{t} ~ N(0,H{t})
%              b{t} = Pi{t} b{t-1} + tao{t}     tao{t} ~ N(0,Q{t})
%                                               b{1} ~ N(b0,P0)
%                                               t=1,...,T 
```

这是作为卡尔曼滤波器算法主要部分的后向递归：

```
for t=1:T

    v{t} = y{t} - Z{t} * b_tt_1{t};
    M{t} = P_tt_1{t} * Z{t}';
    F{t} = Z{t} * M{t} + H{t};

       F_{t}= inv(F{t});
       MF_{t}= M{t} * F_{t};

    b_tt{t}=b_tt_1{t} + MF_{t} * v{t};
    P_tt{t}=P_tt_1{t} - MF_{t} * M{t}';

    b_tt_1{t+1} = Pi{t} * b_tt{t};
    P_tt_1{t+1} = Pi{t} * P_tt{t} * Pi{t}' + Q{t};

end 
```

这发生在我使用实际数据时。为了查看问题可能出在哪里，我编写了一些代码来生成随机状态空间模型（如果需要，我可以提供代码）。

当 T 很大时，经过一些 t0，P_tt_1{t0} 是奇异的并且状态 (b{t0}) 发散。

编辑：我使用协方差更新方程的“约瑟夫形式”（参见维基百科）。它有所帮助，但是当状态空间模型很大时（就方程或状态的数量而言），结果仍然存在差异。我认为这意味着问题与数值稳定性有关。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:40:32.913

您的矩阵唯一可以变成奇异的地方是在该行中：

```
F_{t}= inv(F{t}); 
```

您可以改用[伪逆](https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse)`pinv'。

或者如果你重写这些行会更好：

```
F_{t}= inv(F{t});
MF_{t}= M{t} * F{t}; 
```

至

```
MF_{t}= M{t} / F{t}; 
```

Matlab 将求解线性方程：`MF_{t} * F{t} = M{t}`- 即使 F_{t} 是奇异的，它也可能有一个解 - 或者它仍然是通过伪逆求解的奇异方程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:31:11.587

问题在于 inv 或 pinv 函数的反转过程。矩阵很大，但它们也是正定的。所以我使用cholesky分解进行反演。功能是：

```
function A_=inversePD(A)
%A:positive definite matrix
M=size(A,1);
[R b] = chol(A);
if b~=0
    return
end
R_ = R \ eye(M);
A_ = R_ * R_';
end 
```

# c++ - operator< 用于列表排序

> ID：13506757
> 
> 赞同：1
> 
> 时间：2012-11-22T06:07:30.180
> 
> 标签：c++

我有一个简单的 Position 结构：

```
struct Position
{
    int x;
    int y;
}; 
```

我还有一个职位列表：

```
std::list<Position> positons; 
```

我正在尝试使用 list::sort() 对列表进行排序，并且需要为 Positions 对象定义 operator<。我尝试保持简单，创​​建类似：

```
bool operator<(const Position& one, const Position& two)
{
    return one.x < two.x && one.y < two.y;
} 
```

但这不起作用。如何确定一个类/结构对象作为一个整体小于另一个？我将如何为我的 Position 结构做这件事？

**编辑**当我调用positions.sort（）时，我得到一个调试断言失败，它说：表达式：无效的运算符<

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:12:35.330

您当前的定义没有建立[严格的弱顺序](http://en.wikipedia.org/wiki/Strict_weak_ordering)。尝试类似：

```
bool operator<(const Position& one, const Position& two)
{
    return std::tie(one.x, one.y) < std::tie(two.x, two.y);
} 
```

这使用[std::tie](http://en.cppreference.com/w/cpp/utility/tuple/tie)创建两个`std::tuple<int const&, int const&>`对象，其中包含对 and 的和元素的引用，`x`然后`y`使用operator [<](http://en.cppreference.com/w/cpp/utility/tuple/operator_cmp)比较两个元组（执行[字典比较](http://en.wikipedia.org/wiki/Lexicographical_order)）。`one``two`

`std::tie`[需要 C++11，但使用boost::tuple](http://www.boost.org/doc/libs/release/libs/tuple/doc/tuple_users_guide.html)可以获得类似的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T06:25:36.090

您可以按与原点的距离或大小对您的位置进行排序，如下所示：

```
std::vector<Position> Foo;
std::sort(Foo.begin(), Foo.end(), [](Position& a, Position& b) {return (abs(a.x) + abs(a.y)) <  (abs(b.x) + abs(b.y)); }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T06:15:59.813

您可以按 x 排序，然后按 y 排序。也将其定义为自由函数：

```
bool function(const Position& one, const Position& two)
{
    return one.x < two.x || (one.x == two.x && one.y < two.y);
} 
```

或作为`operator`：

```
bool operator<(const Position& other)const
{
    return x < other.x || (x == other.x && y < other.y);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T06:38:36.497

最简单的解决方案是放弃`struct`并使用

```
typedef std::array< int, 2 > Position; // C++11, access pos[0] and pos[1] 
```

或者

```
typedef std::pair< int, int > Position; // C++03, access pos.first and pos.second 
```

这些类`operator<`（以及您可能需要的所有其他运算符）已预定义。不能调用坐标`.x`和`.y`，但总比重新发明轮子好。

如果你真的想要，还有一个技巧可以以一种方式调用`std::array`as`x`和的成员`y`：

```
enum coord_name { x, y, z };

template< typename lhs_t >
auto operator ->* ( lhs_t &&lhs, coord_name rhs )
    -> decltype( lhs[ + rhs ] )
    { return lhs[ + rhs ]; }

Position coords;
std::array< float, 3 > coords_3d_floating;

// usage:
coords->*x = 8;
coords->*y = coords_3d_floating->*z * 1.5; 
```

这需要 C++11。

# android-layout - 使文本视图在布局内可移动

> ID：13506760
> 
> 赞同：3
> 
> 时间：2012-11-22T06:07:40.037
> 
> 标签：android-layout

如何使动态创建的textview在android中的relativelayout内移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T13:11:21.050

我知道的唯一方法是：

[http://developer.samsung.com/android/technical-docs/2D-Graphics-in-Android](http://developer.samsung.com/android/technical-docs/2D-Graphics-in-Android)

干杯，

# android - 自定义 ListView 项目图形布局 Android

> ID：13506763
> 
> 赞同：5
> 
> 时间：2012-11-22T06:07:41.880
> 
> 标签：android, android-layout, android-listview

请原谅我的无知，但这是我使用 Android 的第三天，我看过教程，它们似乎都专注于 listview item UI 的 xml 声明。我的问题是，我希望能够在 Eclipse 的设计器“图形布局”中看到自定义列表视图项 UI。但是，它显示它就像它在 Android 中的任何其他视图一样，即。标题和状态栏位于顶部并占据整个屏幕。我想看到的只是我正在设计的列表视图项目，即。只有 50dp 高和填充宽度。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:38:27.837

我相信您正在寻找的是自定义适配器。您看到的只是列表视图项，您正在寻找的是自定义布局。看看这个教程，特别是关于设计自定义布局和自定义适配器的部分。

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:19:28.543

这是制作自定义列表视图的一般布局示例：

主要活动布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
     />
</LinearLayout> 
```

ListView 行布局 XML (list.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <ImageView
        android:id="@+id/icon"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:contentDescription="@string/image"
        android:paddingLeft="10dp"
        android:paddingRight="10dp" />

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/icon"
        android:paddingBottom="10dp"
        android:textColor="#CC0033"
        android:textSize="16dp" />

    <TextView
        android:id="@+id/desc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/title"
        android:layout_toRightOf="@+id/icon"
        android:paddingLeft="10dp"
        android:textColor="#3399FF"
        android:textSize="14dp" />
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-09T19:35:13.630

我认为查看列表视图的唯一方法是在设备上运行应用程序并用测试数据填充列表视图。这有点痛苦。

# java - Java双字符数组测试错误

> ID：13506768
> 
> 赞同：-1
> 
> 时间：2012-11-22T06:08:09.640
> 
> 标签：java, multidimensional-array

[![在此处输入图像描述](../Images/91412692baad6c3112d9c4444833cba5.png)](https://i.stack.imgur.com/9cTJT.jpg)（单击屏幕截图以查看更大的版本。）

我在第 251 行上的 getActiveState() 方法和 getColumn(x, y) 方法之前已经过测试并且可以正常工作，所以我不明白为什么我现在会收到错误消息。谁能解释一下？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-22T07:04:37.537

我认为 NullPointerException 发生在以下代码行中

251 号线

```
this.region.getColumn(x, y) // is null for some kind of columns ... 
```

# mysql - 如何为同一个 sql 文件设置不同的“ERRORS 1064 (42000)”？

> ID：13506769
> 
> 赞同：0
> 
> 时间：2012-11-22T06:08:21.893
> 
> 标签：mysql, sql, phpmyadmin

当我尝试在我的数据库中导入转储时，它返回：

> 第 30001 行的错误 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在第 25 行的 '' 附近使用的正确语法。

sql 文件已使用 MySQL 5.1.2 导出。

奇怪的是，每次我尝试导入时，指示的错误行都会改变！可以是上面的“30001”行，也可以是“400”、“57000”行……不用我更改.sql文件！

导入的sql文件内容为：

```
CREATE TABLE IF NOT EXISTS `geonames2` (  
`geonameid` int(10)    unsigned NOT NULL DEFAULT '0',  
`name` varchar(200) NOT NULL DEFAULT    '',   
`ansiname` varchar(200) NOT NULL DEFAULT '',  
`alternatenames`    varchar(2000) NOT NULL DEFAULT '',   
`latitude` double NOT NULL    DEFAULT '0',   
`longitude` double NOT NULL DEFAULT '0',      
`feature_class` char(1) DEFAULT NULL,   
`feature_code` varchar(10)    DEFAULT NULL,   
`country_code` char(2) DEFAULT NULL,   
`cc2`    varchar(60) DEFAULT NULL,   
`admin1_code` varchar(20) DEFAULT '',      
`admin2_code` varchar(80) DEFAULT '',   
`admin3_code` varchar(20)    DEFAULT '',   
`admin4_code` varchar(20) DEFAULT '',   
`population`    bigint(11) DEFAULT '0',   
`elevation` int(11) DEFAULT '0',      
`gtopo30` int(11) DEFAULT '0',   
`timezone` varchar(40) DEFAULT NULL,    
`modification_date` date DEFAULT '0000-00-00',   
PRIMARY KEY    (`geonameid`)  ) CHARSET=utf8; 
```

然后，插入部分（这会产生我认为的问题）：

```
INSERT INTO `geonames2` (`geonameid`, `name`, `ansiname`, `alternatenames`,      `latitude`, `longitude`, `feature_class`, `feature_code`, `country_code`, `cc2`, `admin1_code`, `admin2_code`, `admin3_code`, `admin4_code`, `population`, `elevation`, `gtopo30`, `timezone`, `modification_date`)     
     VALUES (1024032, 'Île Glorieuse', 'Ile Glorieuse', 'Glorieuse,Ile Glorieuse,Île Glorieuse', -11.55, 47.3, 'T', 'ISL', 'FR', '', '00', '', '', '', 0, 0, -9999, 'Europe/Paris', '2012-01-18'),
     (1024034, 'Île du Lys', 'Ile du Lys', 'Ile du Lise,Ile du Lys,Le Lys,Île du Lys', -11.5, 47.36667, 'T', 'ISL', 'FR', '', '00', '', '', '', 0, 0, -9999, 'Europe/Paris', '2012-01-18'),
     ...
     ...
     still 137, 000 rows !
     ...
     ...
     (2968290, 'Villes-sur-Auzon', 'Villes-sur-Auzon', 'Villes,Villes-sur-Auzon', 44.05669, 5.2343, 'P', 'PPL', 'FR', '', 'B8', '84', '843', '84148', 1100, 0, 295, 'Europe/Paris', '2011-07-19'); 
```

我花了一夜的时间在 INSERT 部分发现问题，但我仍然没有看到问题......我需要一双新的眼睛来帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:28:36.330

它工作正常.. 我试图找出错误，但您的代码中没有错误。可能是您的数据库工具有问题。而是转储只是将内容复制并粘贴到工具的 sql 选项卡中。它工作正常，你可以在 sql fiddle[看到](http://sqlfiddle.com/#!2/e4518/1)我的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:41:24.973

脚本可能非常大，而且很难找到错误。连接到数百或数千条语句之一的错误行。

尝试使用[dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/)（免费快速版）中的 Sql Document 运行脚本。在 Sql Document 中打开您的 SQL 文件并按 F5（执行），错误将带有下划线。在专业版中，将在打开文档时检查语法错误。

# makefile - 合并的 makefile，来自非递归的 makefile

> ID：13506770
> 
> 赞同：0
> 
> 时间：2012-11-22T06:08:48.290
> 
> 标签：makefile

我们有一个支持多个目标（MCU）和项目配置的项目，它非常复杂（复杂，因为项目配置甚至有时包含的 makefile 的位置是根据 makefile 的参数选择的）。我正在为单元测试添加一个新目标，它对于所有目标和项目配置都是通用的，我遇到了问题。

有没有办法获得一个包含所有makefile的最终合并makefile，比如makefile的预处理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:40:55.077

如果您使用的是 GNU Make，请尝试运行`make -p`并检查输出。这将是很多，它不完全是你所要求的，但它可能会有所帮助。

# objective-c - setter 和 getter 的方法名称约定

> ID：13506773
> 
> 赞同：3
> 
> 时间：2012-11-22T06:09:06.133
> 
> 标签：objective-c, cocoa, naming-conventions

我希望我的所有实例变量都是私有的和公共方法中的访问器/突变器。我想知道在构建大型类时是否应该注意一个命名约定，该约定既是为了其他开发人员的可读性，也是一个防止方法名称与其他类发生冲突的约定。

例如，如果我想要一个类访问和更改一个名为“支持音乐家”的“质量”（不一定是特定变量），那么使用 and`[myInstance setSupportsMusicians:YES]`作为所有其他变异器和访问器的方法名称前缀是否`[myInstance returnSupportsMusicians]`是可接受的名称？`set``return`

显然，我知道我可以为它们命名任何我想要的名称，但我想获得一些意见，因为我知道命名约定是有组织的开发的重要组成部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:33:02.820

你最好`@property`用来声明这样的事情。这样，您可以获得它的所有实现优势（如原子性、自动 ivar 生成等）以及方便的点语法（例如`myInstance.supportsMusicians = YES`），而完全不必担心底层方法名称。

但是，如果您确实想手动声明您的方法，或者只想知道自动生成的方法是什么，那么命名约定是：

```
- (void)setSupportsMusicians:(BOOL)supportsMusicians;
- (BOOL)supportsMusicians; 
```

某些类型的布尔属性还有一个侧面案例，其中“is”用作可读性的前缀，例如

```
- (BOOL)isVisible; 
```

然而，这并没有被普遍遵循，并且可能被视为遗留约定。

请注意，不应随机使用“get”作为前缀，因为它具有特定含义：它用于调用者提供要填充的缓冲区的上下文中，例如`-[NSString getBytes:length:]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T06:11:19.447

set 和 get 是 Java 和其他一些语言风格。

但可可风格是（伪代码，用于名称）：

可可中的 setName() 是 setName：

可可中的 getName() 是名称：

编辑：这仅用于命名约定，不要将其作为方法的语法。

几个有用的链接：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html)

[http://cocoadevcentral.com/articles/000082.php](http://cocoadevcentral.com/articles/000082.php)

# django - 在外部脚本文件中使用 django 变量

> ID：13506774
> 
> 赞同：1
> 
> 时间：2012-11-22T06:09:06.133
> 
> 标签：django, django-templates

我有很多与 HTML 一起内联编写的脚本。现在，我正在尝试将脚本移动到外部文件。但是，我的大部分脚本都使用 django 变量和 if.else 语句。因此，我无法将这些脚本移动到外部文件。是否可以在从外部文件加载的脚本中使用 django 模板变量/条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:39:01.033

您要求的是客户端包含，以便最终将外部文件保留为“链接”。这意味着加载主页，然后加载外部内容，所有客户端。然而，您希望包含被 django 处理。

Django 模板是在服务器端呈现的，这意味着它们必须在服务器端的上下文中进行评估。主页必须将包含内容折叠到其中，以便将其提供给客户。因此，如果您接受可以将内容保存在外部文件中，但您所要求的内容将在同一页面中呈现，那么您所要求的就是可能的。

否则，您将不得不做一些更复杂的事情，比如让 javascript 加载外部页面，将相同的上下文信息传递回服务器，服务器可以通过不同的 url 端点呈现模板。或者只是依赖会话数据，让其他 url 完全自己呈现其页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:26:58.023

你用过[包含](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include)吗？制作另一个 html 文件并将其包含在父模板中。

您可以使用关键字参数将其他上下文传递给模板：

```
{% include "name_snippet.html" with person="Jane" greeting="Hello" %} 
```

# sql - 无法更改 java Derby 数据库中现有表中的列

> ID：13506777
> 
> 赞同：2
> 
> 时间：2012-11-22T06:09:13.980
> 
> 标签：sql, database, jdbc, derby

我试图通过更改表中的一列来更改我的表。但是，我在执行以下 sql 命令时遇到错误 -

```
ALTER TABLE WALLETUSER MODIFY WALLETUSERNAME VARCHAR NOT NULL; 
```

我收到的错误是 -

错误代码 -1，SQL 状态 42X01：语法错误：在第 1 行第 24 列遇到“MODIFY”。

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T08:16:50.137

试试这个：

```
ALTER TABLE WALLETUSER ALTER COLUMN WALLETUSERNAME NOT NULL; 
```

## 完整的语法指南：

```
ALTER TABLE table-Name
{
    ADD COLUMN column-definition |
    ADD CONSTRAINT clause |
    DROP [ COLUMN ] column-name [ CASCADE | RESTRICT ]
    DROP { PRIMARY KEY | FOREIGN KEY constraint-name | UNIQUE constraint-name | CHECK constraint-name | CONSTRAINT constraint-name }
    ALTER [ COLUMN ] column-alteration |
    LOCKSIZE { ROW | TABLE }
} 
```

**列定义**

```
Simple-column-Name [ DataType ]
[ Column-level-constraint ]*
[ [ WITH ] DEFAULT DefaultConstantExpression | generation-clause ] 
```

资源：

*   [德比 ALTER TABLE 语法](http://db.apache.org/derby/docs/10.7/ref/rrefsqlj81859.html)

# php - Mysql 更新、替换和连接

> ID：13506780
> 
> 赞同：1
> 
> 时间：2012-11-22T06:09:24.833
> 
> 标签：php, mysql, json, replace, concatenation

我有一个像下面这样的 php 数组。

```
$arr = array(
                array(
                    "date"=>date('Y-m-d'),
                    "message"=>"test message 1",
                    "from_id"=>21,
                    "to_id"=>14
                ),
                array(
                    "date"=>date('Y-m-d'),
                    "message"=>"test message 2",
                    "from_id"=>23,
                    "to_id"=>12
                )               
            ); 
```

我在这个数组上做了一个 json_encode 来将它转换成 json。

```
$jsonarr =  json_encode($arr); 
```

**$jsonarr 的输出：**

```
[
 {"date":"2012-11-22","message":"test message 1","from_id":21,"to_id":14},
 {"date":"2012-11-22","message":"test message 2","from_id":23,"to_id":12}
] 
```

之后，我将其插入 mysql 表中。到这里为止一切都很好。

现在我必须通过连接用另一个 json 更新它。

**另一个 JSON：**

```
[
 {"date":"2012-11-22","message":"test message 3","from_id":28,"to_id":2},
 {"date":"2012-11-22","message":"test message 4","from_id":53,"to_id":72}
] 
```

我希望我的 mysql 表中的字段显示如下：

```
[
 {"date":"2012-11-22","message":"test message 1","from_id":21,"to_id":14},
 {"date":"2012-11-22","message":"test message 2","from_id":23,"to_id":12},
 {"date":"2012-11-22","message":"test message 3","from_id":28,"to_id":2},
 {"date":"2012-11-22","message":"test message 4","from_id":53,"to_id":72}
] 
```

我如何为此编写一个 UPDATE 查询。

我可以通过使用 2 个查询来做到这一点。一个选择查询，然后格式化该字段并稍后更新。但这可以通过一个查询来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:36:29.847

您当前问题的解决方案是：

MySQL 本身不支持 JSON 值。您需要从数据库中获取值：

```
SELECT FOR UPDATE my_json_field
FROM my_table
WHERE id = 555; 
```

然后在PHP脚本中修改：

```
$my_array = json_decode($value_of_my_json_field);
$my_array = array_merge($my_array, $arr);
$value_of_my_json_field = json_encode($my_array); 
```

然后在数据库中更新它：

```
UPDATE my_table
SET my_json_field = :value_of_my_json_field
WHERE id = 555; 
```

**确保这发生在事务**中。此外，您需要使用 InnoDB 存储引擎。

但更有趣的问题是*为什么*需要将 JSON 存储在 DB 中？为什么不使用单独的表：

*   表：消息
    *   id 整数
    *   日期时间戳
    *   from_id 整数（这应该是外键）
    *   to_id 整数（这应该是外键）

然后你可以简单地插入到那个表中。这是这样做的正确方法。如果您没有很好的理由使用 JSON，我建议您摆脱它。

# ruby-on-rails - Rails Elastic Search 错误“指定的堆栈大小太小，指定至少 160k 错误：无法创建 Java 虚拟机。”

> ID：13506784
> 
> 赞同：0
> 
> 时间：2012-11-22T06:10:00.550
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, elasticsearch

我正在使用 Elasticsearch 和 Tire 开发 Rails3 项目。在我尝试运行它时安装 Elastic-search 后，它给了我以下错误：

```
The stack size specified is too small, Specify at least 160k
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

我有 Java 7，我的操作系统是 Ubuntu 12.04。如何解决此错误？

我是否需要安装 Java 6，如果需要，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:09:13.997

与旧版本的弹性搜索（0.19.0）有同样的问题。安装了 0.19.8，它又可以工作了。你可以在这里得到它：[elasticsearch-0.19.2.tar.gz](https://github.com/downloads/elasticsearch/elasticsearch/elasticsearch-0.19.2.tar.gz)

祝你好运！

确实，java 1.7 和旧版本的 es 似乎存在问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:04:44.450

将堆栈大小增加到大于 160k 的数量。

在大约第 34 行编辑文件`elasticsearch-0.xx.x/bin/elasticsearch.in.sh`并将 -Xss 增加到更大的`-Xss256k`值，例如。

```
# reduce the per-thread stack size
JAVA_OPTS="$JAVA_OPTS -Xss256k" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T17:25:13.400

或者，您可以在控制台上启动 elasticsearch 时发送堆栈大小选项并将其设置为大于 160k

```
sudo ./bin/elasticsearch -Xss194k 
```

# javascript - 提交动态生成的表单

> ID：13506789
> 
> 赞同：0
> 
> 时间：2012-11-22T06:10:30.133
> 
> 标签：javascript

我想要做的是根据一些输入动态创建一个新表单，一旦完成，我就给出了一个提交按钮来提交表单。

这是代码：

```
function add(index_array) {
    //create the form
    var myform = document.createElement("form");
    myform.id="k_form"
    for ( i =0 ; i <index_array.length ; i ++)
    {
        var mytext = document.createElement("input");
        mytext.tpye="text";
        mytext.value=index_array[i];
        mytext.id=index_array[i];
        myform.appendChild(mytext); 

    }
    var mybutton = document.createElement("input");
    mybutton.type="button"
    mybutton.value="submit"
    myform.appendChild(mybutton);
    mydiv=document.getElementById("d_div");
    mydiv.appendChild(myform);
} 
```

这将创建表单，现在我正在尝试在用户单击提交时处理此表单的输入。

我怎样才能做到这一点？

我在想我可以调用这个函数

```
document.forms["myform"].submit() 
```

但是当用户点击提交时，我怎样才能让它触发呢？

请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:46:34.580

添加 onclick="doSomeThing();" 顶部按钮

并编写你的 doSomething 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:20:36.567

添加验证功能：

```
function add(index_array) {
var myform = document.createElement("form");
$(myform).attr('id',"k_form");
for ( i =0 ; i <index_array.length ; i ++)
{
    var mytext = document.createElement("input");
    $(mytext).attr('type','text').attr('value',index_array[i]).attr('id', index_array[i]);
    $(myform).append(mytext); 
}
var mybutton = document.createElement("input");
$(mybutton).attr('type','submit').attr('value','submit').attr('onclick','return display_textarea();');
$(myform).append(mybutton); 
mydiv=document.getElementById();
$("#d_div").append(myform);
}

function display_textarea(){
 var validation_success = true;
//do your validation here;
if(validation_success)
    return true;//submits the form
else {
     alert('validation not success');
    return false;// will not submit the form
    }
} 
```

# java - RSA 身份验证问题

> ID：13506791
> 
> 赞同：1
> 
> 时间：2012-11-22T06:10:36.027
> 
> 标签：java, authentication, rsa

我正在制作一个系统，我想通过 RSA 验证服务器的身份，但我似乎无法让服务器正确解密客户端的消息。

公钥和私钥在数组的 0 号槽中，而 mod 在 1 号槽中，因此它们设置正确。

**客户端代码**

```
int keyLength = 3072 / 8;//RSA key size
byte[] data = new byte[keyLength];

//Generate some random data. Note that
//Only the fist half of this will be used.
new SecureRandom().nextBytes(data);

int serverKeySize = in.readInt();
if (serverKeySize != keyLength) {//Definitely not the right heard
    return false;
}

//Take the server's half of the random data and pass ours
in.readFully(data, keyLength / 2 , keyLength / 2);

//Encrypt the data
BigInteger[] keys = getKeys();
BigInteger original = new BigInteger(data);
BigInteger encrypted = original.modPow(keys[0], keys[1]);
data = encrypted.toByteArray();

out.write(data);

//If the server's hash doesn't match, the server has the wrong key!
in.readFully(data, 0, data.length);

BigInteger decrypted = new BigInteger(data);

return original.equals(decrypted); 
```

**服务器端代码**

```
int keyLength = 3072 / 8;//Key length
byte[] data = new byte[keyLength];

//Send the second half of the key
out.write(data, keyLength / 2, keyLength / 2);
in.readFully(data);

BigInteger[] keys = getKeys();
BigInteger encrypted = new BigInteger(data);
BigInteger original = encrypted.modPow(keys[0], keys[1]);
data = original.toByteArray();

out.write(data); 
```

AFAIK 实现是正确的，但它似乎没有产生正确的输出。同样不，出于各种原因，我不想使用密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:21:12.910

有一些关键细节没有被考虑在内。您要应用 RSA 的数据必须编码为 BigInteger x，其中 0 <= x < n，其中 n 是您的模数。你没有那样做。事实上，因为您正在用随机数据填充整个数据数组，所以您不能保证这一点。PKCS#1 填充算法旨在正确执行此操作，但由于您自己滚动，您必须在代码中修复此问题。此外，仔细检查`BigInteger(byte[])`构造函数和`BigInteger.toByteArray()`解码/编码整数的方式。许多人天真地只期望基本 256 编码，而忘记了 BigInteger 也必须适应负整数。它通过使用 ASN.1 DER 整数规则来实现。如果正整数的高位字节 >= 128，则添加前导零字节。

# jquery - 在第一个选项卡上第一次单击时，浏览器视图向上移动

> ID：13506793
> 
> 赞同：0
> 
> 时间：2012-11-22T06:10:54.670
> 
> 标签：jquery, html, css, zurb-foundation

我正在使用 Zurb 基础来创建简单的选项卡，如此[处所示](http://foundation.zurb.com/docs/tabs.php#simple3)。

一切都很好，但是，当我第一次单击另一个选项卡时，浏览器中的视图会发生变化。它似乎在向上移动。我认为它就像链接一样，用锚标签移动它。在随后的点击中，它不会这样做。

这是我的代码：

```
<dl class="tabs">
  <dd class="active"><a href="#simple1">Overview</a></dd>
  <dd><a href="#simple2">Location</a></dd>
  <dd><a href="#simple2">Features</a></dd>
  <dd><a href="#simple2">Reviews</a></dd>
  <dd><a href="#simple2">Promotions</a></dd>
  <dd><a href="#simple2">T&amp;C's</a></dd>
</dl>
<ul class="tabs-content">
  <li class="active" id="simple1Tab">
...
  </li>
...
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:28:56.020

添加一个井号标签和一个 url 的结尾会使您的浏览器“有时”进入顶部，也许使用 javascript 作为 url 可能是解决方案？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T06:06:56.560

它似乎是由视图高度大小的变化引起的。选项卡之间的高度差异似乎是造成它的原因。这是我为不同脚本找到的 hack，但它成功了

```
/* 'Prevents Jumping Javascript Effect on Tabs and Sorter' */ html, body {
    height: 100%;
    margin: 0 0 1px;
    padding: 0;
} 
```

# c# - C#：检查类型 T 是否为 bool

> ID：13506794
> 
> 赞同：8
> 
> 时间：2012-11-22T06:10:58.357
> 
> 标签：c#, compiler-errors

我不敢相信我不能用谷歌搜索这个。我不知道用谷歌搜索什么。

```
public static T GetValue<T>(T defaultValue)
{
  if (T is bool) // <-- what is the correct syntax here?
    return (T)true; // <-- I don't think this works either
} 
```

编辑：对不起，我没有提到，上面的功能只是为了显示我的问题。这不是一个真正的功能。谢谢大家的回答！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-22T06:27:29.943

如果*必须*使用相同的方法/签名并且*必须*使用的类型`T`（并且有这样做*的*原因，尽管如果没有，那么请参阅 Albin 的答案）：

```
public static T GetValue<T>(T defaultValue)
{
  // Need to use typeof to get a Type object for bool, just as with T
  if (typeof(T) == typeof(bool)) {
    // Need to say "get out of my way C#"
    // The first cast to object is required as true (bool) is
    // otherwise not castable to an unrestricted T.
    // This widen-restrict approach could result in a cast error,
    // but from the above check it is known that T is bool.
    return (T)(object)true;
  }
  // .. other stuff that .. does stuff.
} 
```

但是，显式返回`true`（这不是布尔值的默认值）并`defaultValue`完全忽略，否则似乎.. 可疑。但是 -[*它编译！装运它！*](https://english.stackexchange.com/a/48448)

笔记：

*   `==`Types的使用对于子类*不能可靠地工作*（但没关系，因为它`bool`是一个结构，所以子类型不是问题）。在这些情况下，请查看`IsAssignableFrom`.
*   `typeof(T)`不一定是传入的值的类型（可能是`null`引用类型）。这与子类型一起，可能导致`is`在值上使用的方法发生细微的变化。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-22T06:13:15.570

不要检查类型，检查变量

```
public static T GetValue<T>(T defaultValue)
{
  if (defaultValue is bool) // <-- what is the correct syntax here?
    return (T)true;
} 
```

但另一方面，当您进行类型检查并对泛型类型中的不同类型进行不同处理时，您通常会做错事。

为什么不为具有特殊处理的类型创建重载？

```
public static bool GetValue(bool defaultValue)
{
    return true;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T06:22:48.407

也许您正在寻找`default(T)`，它返回提供的类型的默认值。`bool`默认值为`false`。

# java - 如何使用 Nimbus Laf 更改内部框架的“最小化、最大化和关闭”图标？

> ID：13506796
> 
> 赞同：3
> 
> 时间：2012-11-22T06:11:14.813
> 
> 标签：java, swing, jinternalframe, nimbus, uimanager

我正在使用 Nimbus Look and Feel，我知道如何使用以下代码更改工具提示颜色：

```
UIManager.put("info", Color.white); 
```

但是如何将图标（最小化、最大化和关闭）更改为另一个图标/png 文件？

这里是关闭按钮的键：和后面`InternalFrame:InternalFrameTitlePane:"InternalFrameTitlePane.closeButton"[Enabled].backgroundPainter` 一样`info`。

这是包含所有密钥的站点：http: [//docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:07:05.933

Looks like a ugly Hack, but works for me.

```
 JComponent     title = ((BasicInternalFrameUI)myInternalFrame.getUI()).getNorthPane();
    for (int i = 0; i < title.getComponentCount(); i++) {
        JComponent component = (JComponent)title.getComponent(i);
        if(component instanceof JButton) {
            JButton button = ((JButton)component);
            if(button.getName() == null) continue;
            if(button.getName().endsWith("closeButton")) {
                button.setIcon(myIcon);
                button.setSelectedIcon(myIcon);
                button.setPressedIcon(myIcon);
            }
            if(button.getName().endsWith("maximizeButton")) {
                ...
            }
            if(button.getName().endsWith("iconifyButton")) {
                ...
            }
        }
    } 
```

# ocaml - ocaml 电池编译：未绑定模块 Toploop

> ID：13506800
> 
> 赞同：2
> 
> 时间：2012-11-22T06:11:29.617
> 
> 标签：ocaml, ocaml-batteries

```
**Build mode: shared
ocamlbuild -no-links syntax.otarget byte.otarget src/batteries_help.cmo META shared.otarget

Finished, 0 targets (0 cached) in 00:00:00.

+ ocamlfind ocamlc -c -g -annot -warn-error A -package camomile,num,str -package camlp4.lib -pp camlp4of -pp camlp4of -I libs/estring -I benchsuite -I src -I testsuite -I build -I qtest -I libs -I src/syntax/pa_comprehension -I src/syntax/pa_strings -o libs/estring/pa_estring_top.cmo 
libs/estring/pa_estring_top.ml

File "libs/estring/pa_estring_top.ml", line 18, characters 15-44:

Error: Unbound module Toploop

Command exited with code 2.**

Compilation unsuccessful after building 6 targets (5 cached) in 00:00:00.** 
```

我在路径中找到了 toploop.cmi：

```
cd OCaml/lib/ocaml/compiler-libs/
ls topl*

toploop.cmi 
```

如你所见，

```
export PATH=/home/xxx/OCaml/lib/ocaml/compiler-libs/:$PATH 
```

我已经`/home/xxx/...`作为我的系统路径。但它仍然没有工作。我应该怎么做才能包含模块toploop？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:49:19.823

您似乎正在使用 OCaml 4.00 编译 Batteries（哪个版本？），它引入了新`compiler-libs`目录（但某些发行版之前有一个，因此可能已关闭）。`toploop`以前位于 OCaml stdlib 目录的根目录下，但您现在应该在`-I +compiler-libs`某处添加一个选项，或者使用相应的 ocamlfind 打包 ( `-package compiler-libs.toplevel`)。

# perl - Jquery.get 超时行为？

> ID：13506809
> 
> 赞同：6
> 
> 时间：2012-11-22T06:12:03.133
> 
> 标签：perl, jquery, mojolicious

我是网络编码的新手，最近一直在玩 JQuery。我注意到一些行为，想知道这是否是正常行为以及处理它的最佳方法。

我正在对我的网络服务器进行简单的获取，有时服务器可能需要几分钟才能返回其结果。我注意到我的服务器端代码被多次调用，在这种情况下，'/userprofile' 最多可以调用 3 次。

```
("li#user").click(function(){
    $.get('/userprofile',{partialrender: 'true' },
        function (data) {
          $("div#content").html(data); 
    });
}); 
```

所以我的问题是；

1）这是正常行为吗？和 2）如果是这样，是 JQuery 发出额外的调用还是浏览器？3）有什么好的方法来处理这个？

我很欣赏问题 3 的答案可能是一个困难的答案，但非常感谢任何帮助。

非常感谢。

更新：

多谢你们，

好的，由于后端数据库很小，所以我不能用那个确切的调用产生问题，但我可以用另一个相同的调用。我在获取之前发出了警报，它只被调用了一次。我正在使用 Mojolicious 网络框架，所以我想知道它是否与此有关？我正在使用 Morbo 网络服务器。

这是我表现出这种行为的代码

```
("li#importDevice").click(function(){
    alert('import clicked');
    $.get('/importDevice',{device: 'corptest' },
       function (data) {
         $("div#content").html(data); 
   });
 })

sub importDevice {
  my $self = shift;
  my $res = "test";
  my $dir      = $self->session("dir");
  my ($debug, $log, $path, $upload) = createLogHandles($self);
  my %deviceEntry = device::getDeviceEntry($devicename);
  print "In Import   Device \n";
  return $self->redirect_to('failed') unless $self->session('role') eq 'admin';

  my %sessiondetails = utils::buildSessionDetails(%deviceEntry);

 #THE FUNCTION BELOW IS WHERE THE DELAY CAN BE. 
 my $result = utils::connectToDevice(\%sessiondetails);

  if ($result ne 'failedconnect') {
    Vendor::importConfig($session,$dir);
    Vendor::processConfig($dir,$debug,$upload);
  }  
$self->render(text => $result);  
} 
```

当我的 utile::connectToDevice 需要一段时间来响应时，我看到整个回调被再次调用。

这是我的 morbo 网络服务器日志的输出。它确实似乎接到了两个电话。

```
[Thu Nov 22 00:22:27 2012] [debug] GET /importdevice (Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11).
[Thu Nov 22 00:22:27 2012] [debug] Routing to controller "MyApp::DevT" and action "importDevice".
[Thu Nov 22 00:22:50 2012] [debug] 200 OK (22.117681s, 0.045/s).
[Thu Nov 22 00:22:50 2012] [debug] GET /importdevice (Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11).
[Thu Nov 22 00:22:50 2012] [debug] Routing to controller "MyApp::DevT" and action "importDevice". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:23:52.417

我在进行 ajax 调用时的建议是，设置一个标志，表明已经有对服务器的请求。每次检查标志并根据其状态决定是否提出请求。一旦您从服务器获得响应，请重置标志。所以你可以试试这个 -

```
var running=false;
$("li#user").click(function(){

    if(!running){
       running=true;
       $.get('/userprofile',{partialrender: 'true' },
        function (data) {
          $("div#content").html(data);
          running=false; 
       });
    }
}); 
```

这将避免用户点击按钮 100 次和泛滥请求的情况。

**更新**

删除了 if 条件中的错误。

如果上述事情没有帮助，那就这样做。

```
$("li#user").unbind('click').click(function(){
   // do the thing
}); 
```

这将从元素中分离所有点击处理程序和事件并再次绑定。

# ruby-on-rails - 嵌套关联中的 Rails Active Record 回调错误

> ID：13506810
> 
> 赞同：0
> 
> 时间：2012-11-22T06:12:02.883
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在包含的模型中遇到 Active Record 回调问题`accepts_nested_attributes`

我`build_associated_parties`使用`after_create`回调调用，但这些值没有被保存并且我得到`<nil>`错误。我也尝试过使用`before_create`&`after_initialize`回调但没有成功。

是什么导致回调失败？

连接.rb

```
class Connection < ActiveRecord::Base 
  attr_accessible :reason, :established, :connector, :connectee1,
                  :connectee2, :connectee1_attributes,
                  :connectee2_attributes, :connector_attributes 

  belongs_to :connector, class_name: "User" 
  belongs_to :connectee1, class_name: "User"
  belongs_to :connectee2, class_name: "User"

  accepts_nested_attributes_for :connector, :connectee1, :connectee2 

  belongs_to :permission 

  after_create :build_associated_parties    

  # builds connectee's, connector, permission objects
  def build_associated_parties   
    build_connector
    build_connectee1
    build_connectee2
    build_permission
  end 
```

连接控制器.rb

```
class ConnectionsController < ApplicationController
  def new
    @connection = Connection.new
  end

  def create        
    @connection = Connection.new params[:connection]
    if @connection.save     
      flash[:notice] = "Connection created successfully!"
      redirect_to @connection
    else
      render :new
    end
  end
end 
```

但是，如果我改为在控制器内部构建这些属性，如下所示，我不会收到错误消息。这很好，但似乎不利于将业务逻辑代码保留在控制器之外。

```
class ConnectionsController < ApplicationController
  def new
    @connection = Connection.new
    @connection.build_connectee1
    @connection.build_connectee2
    @connection.build_connector
  end
end 
```

如何使用模型中的代码完成相同的功能？将其保留在模型中是否有优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:38:25.997

您在创建`build_associated_parties`后调用了您的方法`connection`，那么这些方法如何：

```
 build_connector
 build_connectee1
 build_connectee2
 build_permission 
```

知道它将使用什么参数吗？所以他们不知道将什么值传递给方法，然后他们会得到错误。在控制器中，他们没有错误，因为他们使用了`params[:connection]`.

在您的表单上，如果您已经有 的字段`connector, connectee1, connectee2`，您应该将初始化对象的代码放入新控制器中。当您保存`@connection`时，它也保存了这些对象。我认为这些代码不需要放入模型中。您的模型只应放置其他逻辑代码，例如搜索或计算...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:01:27.497

将逻辑移出控制器并返回模型。但是，`build_*`代码覆盖了我传递给嵌套属性的值。

通过将**unless {attribute}**添加到这些`build_`方法中，我能够正确传递值。

类连接 < ActiveRecord::Base attr_accessible :reason, :established, :connector, :connectee1, :connectee2, :connectee1_attributes, :connectee2_attributes, :connector_attributes

```
 belongs_to :connector, class_name: "User"
  belongs_to :connectee1, class_name: "User"
  belongs_to :connectee2, class_name: "User"

  accepts_nested_attributes_for :connector, :connectee1, :connectee2

  belongs_to :permission

  after_initialize :build_associated_parties

  validates :reason, :presence => true
  validates_length_of :reason, :maximum => 160

  #builds connectee's, connector, permission objects
  def build_associated_parties
    build_connector unless connector
    build_connectee1 unless connectee1
    build_connectee2 unless connectee2
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:09:15.167

`after_create`是一个很大的问题。`after_initialize`在您的模型中使用并在`self`您的`build_associated_parties`方法中使用。看看这是否有效。

# java - (Android) 播放声音的初始延迟 - SoundPool 和 MediaPlayer

> ID：13506811
> 
> 赞同：1
> 
> 时间：2012-11-22T06:12:06.620
> 
> 标签：java, android, multithreading, soundpool

所以我已经学习了一段时间的 Android 开发，我正在编写一个节拍器应用程序，带有敲击速度。我正在做的是保留一个播放按钮，当你按下它时它会启动节拍器。在按钮的 onClick() 中，我使用了一个 ScheduledExecutorService 来重复 Runnable，它有一个带有节拍器点击的 SoundPool。

事情就是这样。节拍器的前两个滴答声之间的延迟明显小于应有的延迟；然后它会平息。因此，如果我希望它以 120 bpm 的速度敲击，它会在前两个滴答声中加速到 150 bpm，然后恢复正常。由于某种原因，我只能假设最初的滴答声已被延迟。

我尝试使用 MediaPlayer 而不是 SoundPool、TimerTask、单独的 Handlers 和 Runnables 而不是 ScheduledExecutorService，但没有运气。问题可能是什么？

# c# - 代码不在服务器端执行？

> ID：13506812
> 
> 赞同：0
> 
> 时间：2012-11-22T06:12:10.947
> 
> 标签：c#, web-applications, aforge

代码在本地计算机上测试和工作，但不在服务器端。
所以，我使用**log4net**来查看会发生什么，这是 log4net 产生的结果：http: [//pastebin.com/Xr3iq68t](http://pastebin.com/Xr3iq68t)
正如大家所见，我几乎将**log4net**放在了代码的每一行中。

我的本地计算机与服务器之间有什么区别（我正在使用 somee.com 免费托管来测试代码）。如果是因为权限问题，我测试了另一个代码，它从同一源下载快照并将其保存在服务器端文件夹中，它可以保存它。
那么，代码有什么问题吗？

代码`Rec`只执行到上课，不继续执行其余的代码。它应该在那之后去`video_NewFrame`，但从日志文件记录来看，它不会继续。
完整代码可以在这里查看：http: [//pastebin.com/VCjVj3uc](http://pastebin.com/VCjVj3uc)

```
protected void Button1_Click(object sender, EventArgs e)
{
    string usr = "http://IPaddress.com:8081/snapshot.cgi";
    log.Info("DDNS: " + usr);
    log.Info("Starting JPEG stream...");
    //camera source
    JPEGSource = new JPEGStream(usr);
    log.Info("***JPEGSource = new JPEGStream(usr);***");
    JPEGSource.Login = login;
    JPEGSource.Password = password;
    log.Info("***JPEG login & password***");
    JPEGSource.Start();
    log.Info("JPEGSource.Start()");
    JPEGSource.NewFrame += new NewFrameEventHandler( video_NewFrame );
    log.Info("***Goto video_NewFrame class***");

    //System.Threading.Thread.Sleep(6000);
    //Label2.Text = Label2.Text + streamingSource + "<br> "; 
    this.Label1.Text = "Camera Source: " + usr;
}

private void video_NewFrame(object sender, NewFrameEventArgs eventArgs)
{
   Bitmap image = (Bitmap)eventArgs.Frame.Clone();
   log.Info("***Bitmap image = (Bitmap)eventArgs.Frame.Clone();***");
   width = image.Width;
   height = image.Height;

   frames.Enqueue((Bitmap)image.Clone());
   log.Info("***Cloning frame***");

   if (!IsRecording)
   {
       log.Info("Entering thread");
       IsRecording = true;
       Thread th = new Thread(DoRecording);
       th.Start();
   }
} 
```

注意：摄像机IP地址为DDNS IP地址。

# python - numpy图像中像素+邻域的高效处理

> ID：13506814
> 
> 赞同：4
> 
> 时间：2012-11-22T06:12:27.323
> 
> 标签：python, image-processing, numpy

我有一个场景的范围图像。我遍历图像并计算检测窗口下的平均深度变化。检测窗口根据当前位置周围像素的平均深度改变大小。我累积平均变化以产生一个简单的响应图像。

大部分时间都花在 for 循环中，在我的机器上拍摄 512x52 图像大约需要 40 多秒。我希望能加快一些速度。是否有更有效/更快的方式来遍历图像？是否有更好的 pythonic/numpy/scipy 方式来访问每个像素？还是我应该去学习cython？

**编辑：**我通过使用 scipy.misc.imread() 而不是 skimage.io.imread() 将运行时间减少到大约 18 秒。不知道有什么区别，我会尝试调查。

这是代码的简化版本：

```
import matplotlib.pylab as plt
import numpy as np
from skimage.io import imread
from skimage.transform import integral_image, integrate
import time

def intersect(a, b):
    '''Determine the intersection of two rectangles'''
    rect = (0,0,0,0)
    r0 = max(a[0],b[0])
    c0 = max(a[1],b[1])
    r1 = min(a[2],b[2])
    c1 = min(a[3],b[3])
    # Do we have a valid intersection?
    if r1 > r0 and  c1 > c0: 
         rect = (r0,c0,r1,c1)
    return rect

# Setup data
depth_src = imread("test.jpg", as_grey=True)
depth_intg = integral_image(depth_src)   # integrate to find sum depth in region
depth_pts = integral_image(depth_src > 0)  # integrate to find num points which have depth
boundary = (0,0,depth_src.shape[0]-1,depth_src.shape[1]-1) # rectangle to intersect with

# Image to accumulate response
out_img = np.zeros(depth_src.shape)

# Average dimensions of bbox/detection window per unit length of depth
model = (0.602,2.044)  # width, height

start_time = time.time()
for (r,c), junk in np.ndenumerate(depth_src):
    # Find points around current pixel      
    r0, c0, r1, c1 = intersect((r-1, c-1, r+1, c+1), boundary)

    # Calculate average of depth of points around current pixel
    scale =  integrate(depth_intg, r0, c0, r1, c1) * 255 / 9.0 

    # Based on average depth, create the detection window
    r0 = r - (model[0] * scale/2)
    c0 = c - (model[1] * scale/2)
    r1 = r + (model[0] * scale/2)
    c1 = c + (model[1] * scale/2)

    # Used scale optimised detection window to extract features
    r0, c0, r1, c1 = intersect((r0,c0,r1,c1), boundary)
    depth_count = integrate(depth_pts,r0,c0,r1,c1)
    if depth_count:
         depth_sum = integrate(depth_intg,r0,c0,r1,c1)
         avg_change = depth_sum / depth_count
         # Accumulate response
         out_img[r0:r1,c0:c1] += avg_change
print time.time() - start_time, " seconds"

plt.imshow(out_img)
plt.gray()
plt.show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:02:56.227

迈克尔，有趣的问题。您遇到的主要性能问题似乎是图像中的每个像素都有两个计算的积分（）函数，一个是 3x3 大小，另一个是事先不知道的大小。无论您使用什么 numpy 函数，以这种方式计算单个积分的效率都非常低；这是一个算法问题，而不是实现问题。考虑一个大小为 N N 的图像。您可以仅使用大约 4*N N 次操作*来计算该图像中任何大小 K K 的所有积分**，而不是（正如人们可能天真地期望的那样）N* N *K*K. 你这样做的方法是首先在每行的窗口 K 上计算滑动总和的图像，然后在每列的结果上滑动总和。更新每个滑动和以移动到下一个像素只需要添加当前窗口中的最新像素并减去前一个窗口中最旧的像素，因此无论窗口大小如何，每个像素都进行两次操作。我们必须这样做两次（对于行和列），因此每个像素需要 4 次操作。

我不确定 numpy 中是否内置了滑动窗口总和，但这个答案提出了几种方法，使用步幅技巧：[https](https://stackoverflow.com/a/12713297/1828289) ://stackoverflow.com/a/12713297/1828289 。您当然可以通过一个循环在列上和一个循环在行上完成相同的操作（使用切片来提取行/列）。

例子：

```
# img is a 2D ndarray
# K is the size of sums to calculate using sliding window
row_sums = numpy.zeros_like(img)
for i in range( img.shape[0] ):
    if i > K:
        row_sums[i,:] = row_sums[i-1,:] - img[i-K-1,:] + img[i,:]
    elif i > 1:
        row_sums[i,:] = row_sums[i-1,:] + img[i,:]
    else: # i == 0
        row_sums[i,:] = img[i,:]

col_sums = numpy.zeros_like(img)
for j in range( img.shape[1] ):
    if j > K:
        col_sums[:,j] = col_sums[:,j-1] - row_sums[:,j-K-1] + row_sums[:,j]
    elif j > 1:
        col_sums[:,j] = col_sums[:,j-1] + row_sums[:,j]
    else: # j == 0
        col_sums[:,j] = row_sums[:,j]

# here col_sums[i,j] should be equal to numpy.sum(img[i-K:i, j-K:j]) if i >=K and j >= K
# first K rows and columns in col_sums contain partial sums and can be ignored 
```

您如何最好地将其应用到您的案例中？我认为您可能想要预先计算 3x3（平均深度）和几个较大尺寸的积分，并使用 3x3 的值来选择检测窗口的较大尺寸之一（假设我了解您的意图算法）。您需要的较大尺寸的范围可能会受到限制，或者人为限制它可能仍然可以正常工作，只需选择最接近的尺寸即可。使用滑动总和一起计算所有积分的效率要高得多，我几乎可以肯定，对于很多你永远不会在特定像素上使用的尺寸计算它们是值得的，特别是如果某些尺寸很大。

P.S. This is a minor addition, but you may want to avoid calling intersect() for every pixel: either (a) only process pixels which are farther from the edge than the max integral size, or (b) add margins to the image of the max integral size on all sides, filling the margins with either zeros or nans, or (c) (best approach) use slices to take care of this automatically: a slice index outside the boundary of an ndarray is automatically limited to the boundary, except of course negative indexes are wrapped around.

**EDIT:** added example of sliding window sums

# c++ - c ++在应用程序运行时重新加载功能

> ID：13506816
> 
> 赞同：-1
> 
> 时间：2012-11-22T06:12:30.940
> 
> 标签：c++, function, reload

我有一个读取配置文件的函数，我想重新加载这个函数来获取新变量

```
void readConfigFile()
{
    ifstream File;
    File.open("config.txt", ios::in);
    while (!File.eof()){
        string line;
        int Hour;
        int Minuts;
        getline(File, line);
        File >> Hour >> Minuts;
    }
    File.close();
}

int main()
{
    readConfigFile();
    while (1) {
        time_t now;
        struct tm *current;
        now = time(0);
        current = localtime(&now);
        if( current->tm_hour == Hour && current->tm_min == Minuts){
            std::cout <<  "Done" << std::endl;
        }
        Sleep(5000);
    }

    return 0;
} 
```

我如何重新加载此 readConfigFile() 函数以在应用程序运行时获取新的小时/分钟

例如

```
if(Clicked Button){

reload readConfigFile();

} 
```

当我在互联网上搜索重新加载时

我发现我可以通过运算符重载来做到这一点

但我无法使用它

我还是初学者:(

谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:25:07.537

如果我没有误解您的要求，我想您已经自己编写了代码。

您是否在问如何在程序中运行时将新的 Hour 和 Min 加载到`main()`'s`while`循环中？

```
int main()
{
    readConfigFile();
    while (1) {

    // Read the Config file here
    if (Button Clicked)
    {
        readConfigFile();
    }

    time_t now;
    struct tm *current;
    now = time(0);
    current = localtime(&now);  
    if( current->tm_hour == Hour && current->tm_min == Minuts){
        std::cout <<  "Done" << std::endl;
    }
    Sleep(5000);
} 
```

**编辑：**

我没有注意到 Hour 和 Min 是本地变量的错...

请将它们更改为全局变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:17:39.113

我猜问题是变量`Hour`和`Minuts`（原文如此）是函数的*本地变量。*`readConfigFile`

这意味着每当您调用时，`readConfigFile`您只更改那些局部变量，而不是您可能拥有的任何全局变量。

如果这些变量是全局的，那么你只需要`readConfigFile`再次调用，它就会再次读入它们。

# objective-c - 如何仅缩放饼图中的特定切片（CorePlot ios）而不是整个饼图

> ID：13506818
> 
> 赞同：0
> 
> 时间：2012-11-22T06:12:37.820
> 
> 标签：objective-c, core-plot

如何**仅缩放**pe 图表 (CorePlot iOS) 中的特定切片，而不是用户交互的整个饼图。

我知道下面的方法可以让切片触动：

```
-(void)pieChart:(CPTPieChart *)plot sliceWasSelectedAtRecordIndex:(NSUInteger)index 
```

但我只想放大那个切片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T14:20:05.450

您可以“分解”选定的切片。在您的数据源中实现该`-radialOffsetForPieChart:recordIndex:`方法并为所选切片返回一个正偏移量，以使其从饼图的其余部分中弹出。

您可以使用`-sliceFillForPieChart:recordIndex:`数据源方法来控制每个切片的填充。这将允许您调整颜色和/或透明度以突出显示所选切片。

如果要使所选切片大于其他切片，请使用第二个饼图显示所选切片。对两个绘图使用相同的绘图数据。在第一个上，对除所选切片之外的所有切片使用正常切片填充，这可能是透明的。反转第二个绘图的模式，即除所选切片之外的所有切片都是透明的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T09:46:43.840

你说像下面...

如果要使所选切片大于其他切片，请使用第二个饼图显示所选切片。对两个绘图使用相同的绘图数据。

我需要这样的概念。我从外部饼图中选择一个切片，需要在第二个饼图中加载选择的切片值，并做出一些效果。如何在第二张图表中加载该值。示例代码非常少。

# html - 如何摆脱按钮图像下的按钮？

> ID：13506825
> 
> 赞同：0
> 
> 时间：2012-11-22T06:12:59.450
> 
> 标签：html, css

在按钮图像加载之前会发生什么，它后面有一个按钮，这很奇怪......我该如何摆脱它？

```
<button id="cambtn" onclick="camera()"><img id="camicon" src="camera.png" alt="Camera" width="120" style="position:absolute; left:50px; top:50px;"></button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:32:29.747

如果你把这个片段放在你的样式表中，它应该处理按钮格式。

```
#cambtn {
  background: transparent;
  border: 0 none;
  padding: 0;
} 
```

内联示例（虽然不推荐）：

```
<button style="background: transparent;border: 0 none;padding: 0;" id="cambtn" onclick="camera()"><img id="camicon" src="camera.png" alt="Camera" width="120" style="position:absolute; left:50px; top:50px;"></button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:38:17.837

如果您不想要按钮，请不要使用该`button`元素。假设元素不在表单内，只需将点击功能直接分配给图像：

```
<img id="camicon" onclick="camera()" src="camera.png" ...> 
```

# python - 如何编写一个计算python中总分的函数？

> ID：13506828
> 
> 赞同：-1
> 
> 时间：2012-11-22T06:13:10.253
> 
> 标签：python

如何在python中编写一个计算总分的函数？

例如，

```
 rank_list=[['Peter','Amy','John','Kitty'],['Amy','John','Kitty','Peter']] 
```

第一名得5分，第二名得2分，第三名得0分，最后一名得9分。

我想要一个计算人总点数的列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:27:19.040

这对你有用吗？

```
In [277]: rank_list=[['Peter','Amy','John','Kitty'],['Amy','John','Kitty','Peter']]

In [278]: points = collections.defaultdict(int)

In [279]: for rank_lis in rank_list:
   .....:     for score, person in ran
random     range      rank_list  
   .....:     for score, person in enumerate(rank_lis[::-1]):
   .....:         points[person] += score
   .....:         

In [280]: points.items()
Out[280]: [('Amy', 5), ('John', 3), ('Kitty', 1), ('Peter', 3)] 
```

更有效的解决方案：

```
In [285]: rank_list=[['Peter','Amy','John','Kitty'],['Amy','John','Kitty','Peter']]

In [286]: for rank_lis in rank_list:
    for score, person in enumerate(rank_lis, -3):
        points[person] -= score
   .....:         

In [287]: points.items()
Out[287]: [('Amy', 5), ('Peter', 3), ('Kitty', 1), ('John', 3)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T06:32:54.473

你可以使用`defaultdict`： -

```
rank_list=[['Peter','Amy','John','Kitty'],['Amy','John','Kitty','Peter']]
my_dict = {0:3, 1:2, 2:1, 3:0}   # Have a mapping from index to score

from collections import defaultdict

ranking = defaultdict(int)

for elem in rank_list:
    for index, value in enumerate(elem):
        ranking[value] += my_dict[index]

print ranking.items() 
```

**输出 ： -**

```
[('Amy', 5), ('Kitty', 1), ('Peter', 3), ('John', 3)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T06:39:08.290

使用反向列表作为索引（因为 0 = 3、3 = 0 等），并保存到字典：

```
d = {}
for list in rank_list:
  for name in list:
    if name in d:
      d[name] = d[name] + list[::-1].index(name)
    else:
      d[name] = list[::-1].index(name) 
```

`list[::-1]`反向输出列表。此外，您还可以通过打印获得分数`d['Peter']`，例如。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T06:39:27.043

它看起来像是[collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)的工作：

```
from collections import Counter

rank_list=[['Peter','Amy','John','Kitty'],['Amy','John','Kitty','Peter']]
rank_by_place = (3, 2, 1, 0)

ranks = Counter()
for record in rank_list:
    for name, rank in zip(record, rank_by_place):
        ranks.update({name: rank})

print ranks.most_common()  # ordered by rank 
```

# mysql - MySQL VARCHAR 的最大大小是多少？

> ID：13506832
> 
> 赞同：333
> 
> 时间：2012-11-22T06:13:36.710
> 
> 标签：mysql, varchar, maxlength

我想知道 MySQL VARCHAR 类型的最大大小是多少。

我读到最大大小受大约 65k 的行大小限制。我尝试将字段设置为，`varchar(20000)`但它说这太大了。

我可以将其设置为`varchar(10000)`. 我可以设置的确切最大值是多少？

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2012-11-22T06:22:06.787

**请记住，MySQL 有最大行大小限制**

> MySQL 表的内部表示具有 65,535 字节的最大行大小限制，不包括 BLOB 和 TEXT 类型。BLOB 和 TEXT 列仅对行大小限制贡献 9 到 12 个字节，因为它们的内容与行的其余部分分开存储。阅读有关[表列数和行大小限制的更多信息。](https://dev.mysql.com/doc/refman/5.7/en/column-count-limit.html)

**MySQL 5.0.3 前后单个列可以占用的最大大小不同**

> VARCHAR 列中的值是可变长度字符串。在 MySQL 5.0.3 之前，长度可以指定为 0 到 255 之间的值，在 5.0.3 和更高版本中可以指定为 0 到**65,535之间的值。**MySQL 5.0.3 及更高版本中 VARCHAR 的有效最大长度取决于最大行大小（65,535 字节，在所有列之间共享）和使用的字符集。

但是，请注意，如果您使用 utf8 或 utf8mb4 等多字节字符集，则限制会更低。

**使用`TEXT`类型来克服行大小限制。**

> 四种 TEXT 类型是 TINYTEXT、TEXT、MEDIUMTEXT 和 LONGTEXT。这些对应于四种 BLOB 类型，并且具有相同的最大长度和存储要求。

**有关 BLOB 和 TEXT 类型的更多详细信息**

*   MySQLv8.0 的参考[https://dev.mysql.com/doc/refman/8.0/en/blob.html](https://dev.mysql.com/doc/refman/8.0/en/blob.html)
*   MySQLv5.7 的参考[https://dev.mysql.com/doc/refman/5.7/en/blob.html](https://dev.mysql.com/doc/refman/5.7/en/blob.html)
*   MySQLv5.6 的参考[https://dev.mysql.com/doc/refman/5.6/en/blob.html](https://dev.mysql.com/doc/refman/5.6/en/blob.html)

**更**

查看有关处理所有数据类型的存储要求的[数据类型存储要求](https://dev.mysql.com/doc/refman/5.7/en/storage-requirements.html)的更多详细信息。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-11-22T06:22:54.897

根据[在线文档](https://dev.mysql.com/doc/refman/5.6/en/static-format.html)，有 64K 行限制，您可以使用以下方法计算行大小：

```
row length = 1
             + (sum of column lengths)
             + (number of NULL columns + delete_flag + 7)/8
             + (number of variable-length columns) 
```

您需要记住，列长度不是它们大小的一对一映射。例如，`CHAR(10) CHARACTER SET utf8`十个字符中的每一个都需要三个字节，因为该特定编码必须考虑每个字符三个字节的属性`utf8`（这是[MySQL 的`utf8`编码](https://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8.html)而不是“真正的”UTF-8，它最多可以有四个字节）。

但是，如果您的行大小接近 64K，您可能需要检查数据库的架构。这是一个罕见的表，需要在正确设置的（3NF）数据库中如此宽 - 这是*可能的，*只是不是很常见。

如果你想使用更多，你可以使用`BLOB`or`TEXT`类型。这些不计入行的 64K 限制（除了小的管理占用空间），但您需要注意它们的使用带来的其他问题，例如无法使用超过一定数量的整个文本块进行排序字符数（尽管这可以向上配置），强制临时表在磁盘上而不是在内存中，或者必须配置客户端和服务器通信缓冲区以有效地处理大小。

允许的尺寸是：

```
TINYTEXT          255 (+1 byte  overhead)
TEXT          64K - 1 (+2 bytes overhead)
MEDIUMTEXT    16M - 1 (+3 bytes overhead)
LONGTEXT      4G  - 1 (+4 bytes overhead) 
```

您仍然存在字节/字符不匹配（因此一`MEDIUMTEXT utf8`列可以“仅”存储大约 50 万个字符`(16M-1)/3 = 5,592,405`），但它仍然大大扩展了您的范围。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2013-10-30T14:57:46.177

[资源](https://stackoverflow.com/questions/332798/equivalent-of-varcharmax-in-mysql)

> varchar 的最大长度取决于 MySQL 中的最大行大小，即 64KB（不包括 BLOB）：
> 
> VARCHAR(65535) 但是，请注意，如果您使用多字节字符集，则限制会更低：
> 
> VARCHAR(21844) 字符集 utf8

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2016-06-09T08:51:52.240

来自 MySQL 文档：

> MySQL 5.0.3 及更高版本中 VARCHAR 的有效最大长度取决于最大行大小（65,535 字节，在所有列之间共享）和使用的字符集。例如，utf8 字符每个字符最多需要三个字节，因此可以将使用 utf8 字符集的 VARCHAR 列声明为最多 21,844 个字符。

VARCHAR 的限制因使用的字符集而异。使用 ASCII 将使用每个字符 1 个字节。这意味着您可以存储 65,535 个字符。使用 utf8 将使用每个字符 3 个字节，导致字符限制为 21,844。但是，如果您使用的是现代多字节字符集 utf8mb4，您应该使用它！它支持表情符号和其他特殊字符。每个字符将使用 4 个字节。这会将每个表的字符数限制为 16,383。请注意，其他字段（例如 INT）也将计入这些限制。

结论：

**utf8**最多**21,844 个**字符

**utf8mb4**最多**16,383**个字符

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-22T06:18:16.633

您也可以使用 MEDIUMBLOB/LONGBLOB 或 MEDIUMTEXT/LONGTEXT

MySQL 中的 BLOB 类型最多可以存储 65,534 字节，如果您尝试存储超过此数量的数据，MySQL 将截断数据。MEDIUMBLOB 最多可存储 16,777,213 字节，LONGBLOB 最多可存储 4,294,967,292 字节。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-07-07T06:48:48.763

Mysql 5.0.3 版本之前 Varchar 数据类型可以存储 255 个字符，但从 5.0.3 开始可以存储 65,535 个字符。

但它的最大行大小限制为 65,535 字节。这意味着包括所有列，它不能超过 65,535 字节。

在您的情况下，当您尝试设置超过 10000 时，它可能会超过 65,535 并且 mysql 会给出错误。

欲了解更多信息：[https ://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html](https://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html)

博客示例：[http ://sforsuresh.in/mysql_varchar_max_length/](http://sforsuresh.in/mysql_varchar_max_length/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-02T09:20:01.327

就我而言，我根据@Firze 的回答（带有 UTF8 限制）尝试了 20'000 并且 phpMyAdmin 以最大大小响应；答案是减少或选择 BLOB。

所以，我认为，最后，最好是**根据你拥有的 MySQL 版本和使用的引擎来测试自己**。由于 MySQL/phpMyAdmin 有保障。

* * *

## 回答 #8

> 赞同：-9
> 
> 时间：2012-11-22T06:15:39.717

您可以使用[`TEXT`type](http://dev.mysql.com/doc/refman/5.1/en/blob.html)，不限于 64KB。

# html - 想要隐藏 iframe 直到点击链接

> ID：13506834
> 
> 赞同：4
> 
> 时间：2012-11-22T06:13:42.117
> 
> 标签：html, css

我有四个链接在同一页面的 iframe 上打开。我的问题是 iframe 在页面加载时占用了空间，我希望它保持隐藏状态，直到在小屏幕尺寸中单击任何链接，因为在页面加载时同一页面正在加载该 iframe，尽管它在大屏幕尺寸下运行良好。

这是我打开 iframe 的代码：

```
<ul class="thumbnails">
    <li class="span2">
        <h6>DELHI :</h6>
        A-21/13,Naraina Industrial Area,
        Phase II,
        New Delhi - 110028.
        Tel. No. : 011 - 49807100 / 101
        <a href="https://maps.google.co.in/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Pearl+Academy+of+fashion,+CH+Girdhari+Lal+Marg,+Naraina+Industrial+Area,+Naraina,+Delhi&amp;aq=0&amp;oq=Pearl+Academy+Of+Fashion+de&amp;sll=20.984928,82.752628&amp;sspn=61.071168,79.013672&amp;ie=UTF8&amp;hq=Pearl+Academy+of+fashion,+CH+Girdhari+Lal+Marg,+Naraina+Industrial+Area,+Naraina,+Delhi&amp;t=m&amp;ll=28.648453,77.146039&amp;spn=0.011298,0.037293&amp;z=15&amp;output=embed" target="frame">Click Here To View Map</a>
    </li>
    <li class="span2">
        <h6>NOIDA :</h6>
        B-25,Sector - 59,
        Noida- 201301, UP.
        Tel. No. : 0120 - 4904000
        <a href="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=B-25,Sector+-+59,+Noida-+201301+UP.&amp;sll=37.0625,-95.677068&amp;sspn=50.244827,79.013672&amp;ie=UTF8&amp;hq=&amp;hnear=Sector+59,+NOIDA,+Gautam+Buddha+Nagar,+Uttar+Pradesh,+India&amp;t=m&amp;ll=28.610219,77.367697&amp;spn=0.022605,0.074587&amp;z=14&amp;iwloc=A&amp;output=embed" target="frame">Click Here To View Map</a>
    </li>
    <li class="span2">
        <h6>CHENNAI :</h6>
        82,Sterling Road,
        Nungambakkam,(Opposite Loyola College),
        Chennai - 600034
        Tel. No. : 044-42664445 /46/49/50, 43447900
        <a href="https://maps.google.co.in/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Pearl+Academy+Of+Fashion,+Sterling+Rd,+Nungambakkam,+Chennai,+Tamil+Nadu&amp;aq=0&amp;oq=Pearl+Academy+Of+Fashion,+Chennai&amp;sll=13.065034,80.239013&amp;sspn=0.008121,0.009645&amp;ie=UTF8&amp;hq=Pearl+Academy+Of+Fashion,&amp;hnear=Sterling+Rd,+Nungambakkam,+Chennai,+Tamil+Nadu&amp;t=m&amp;ll=13.065516,80.239592&amp;spn=0.006271,0.018647&amp;z=16&amp;iwloc=A&amp;output=embed" target="frame">Click Here To View Map</a>
    </li>
    <li class="span2">
        <h6>JAIPUR :</h6>
        SP-38A,RIICO Industrial Area,
        Delhi Road,Kukas,
        Jaipur-302028.
        Tel. No. : 01426 - 414800, 227515, 227616, 227617
        <a href="https://maps.google.co.in/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Pearl+Academy+Of+Fashion,+Jaipur+city+office,+Rajasthan&amp;aq=&amp;sll=25.845253,74.840307&amp;sspn=7.677536,9.876709&amp;ie=UTF8&amp;hq=Pearl+Academy+Of+Fashion,+Jaipur+city+office,&amp;hnear=Rajasthan&amp;t=m&amp;cid=16689440355655361409&amp;ll=27.527758,76.783447&amp;spn=2.922529,9.547119&amp;z=7&amp;iwloc=A&amp;output=embed" target="frame">Click Here To View Map</a>
    </li>
</ul>
<span style="color: #e15b1f;">For more information contact:<a href="#"> counsellor@pearlacademy.com</a>, Toll Free No. 1800 103 3005</span> 
```

这是同一页面上的 iframe：

```
<div style="display:none;">
    <iframe name="frame" src="#" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="870" height="300"></iframe>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:30:57.767

现在你可以这样做`:focus`

像这样

**CSS**

```
.frame_div{
border:solid 1px red;
    width:300px;
    display:none;
}

.frame_div iframe{
    height:200px;
    width:300px;
    background:green;
}

.click_iframe{
display:inline-block;
    vertical-align:top;
}
.click_iframe:focus + div{
display:block;
} 
```

**HTML**

```
<ul class="thumbnails">
 <li class="span2">
<a href="#" target="frame" class="click_iframe">Click Here To View Map</a>
<div class="frame_div"><iframe name="frame" src="#" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="870" height="300"></iframe></div>
</li>
</ul> 
```

***[现场演示](http://jsfiddle.net/BqPEZ/3/)***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T06:52:24.297

您可以将 onclick 事件添加到您的 ul：

```
<ul class="thumbnails" onClick="document.getElementById('frame').parentNode.style.display=''"> 
```

假设您的 iframe id 是“frame”：

```
<div style="display:none;"><iframe name="frame" id="frame" src="#" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="870" height="300"></iframe></div> 
```

# iphone - 我应该使用哪个库来对捕获的图像进行面部跟踪？

> ID：13506839
> 
> 赞同：-1
> 
> 时间：2012-11-22T06:14:06.587
> 
> 标签：iphone, opencv

我正在创建一个带有面部处理的应用程序。如何创建面部动画？有没有我可以使用的图书馆？捕捉到人脸图像后如何进行人脸跟踪？请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:23:36.707

据我所知，没有完全免费的库来跟踪面部表情——我认为这是制作动画所需要的。

但是，这里有一个适用于 iOS（和其他平台）的商业库：[http ://www.image-metrics.com/livedriver/overview/](http://www.image-metrics.com/livedriver/overview/)

这可在试用许可证和免费教育许可证下使用。我相信它会做你想要的。

您的另一个选择是使用 OpenCV 之类的工具开发您自己的面部特征跟踪系统：http: [//opencv.org/](http://opencv.org/) 虽然这将是一个挑战。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:51:43.313

人脸检测已包含在 CoreImage (CI) 中，请参阅

[http://www.bobmccune.com/2012/03/22/ios-5-face-detection-with-core-image/](http://www.bobmccune.com/2012/03/22/ios-5-face-detection-with-core-image/)

如果你想要人脸识别，你必须自己做一些事情，但有一些教程可用——其中大部分使用 OpenCV。

# c# - windows应用程序获取连接的android手机的电池状态

> ID：13506840
> 
> 赞同：1
> 
> 时间：2012-11-22T06:14:07.620
> 
> 标签：c#, android, windows, samsung-mobile

有没有办法在您的 PC 上运行的 C#.NET windows 应用程序中获取连接到您 PC 的 android 手机（特别是三星 Galaxy SIII）的电池状态？提前致谢。

我认为我们必须为此求助三星手机驱动程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-20T21:38:47.103

看看 AndroidLib.dll 库。Dan 有一个类可以处理设备电池电量报告，设备以正常启动方式启动（即正常 rom 启动）

AndroidLib 的主线程

[http://forum.xda-developers.com/showthread.php?t=1512685](http://forum.xda-developers.com/showthread.php?t=1512685)

有关 AndroidLib 的文档

[http://www.regawmod.com/software/windows/androidlib/current/documentation/index.html](http://www.regawmod.com/software/windows/androidlib/current/documentation/index.html)

// 使用 AndroidLib.dll 的示例代码

```
private void button1_Clicked(object sender, EventArgs e)
    {
          string serial;
          android = AndroidController.Instance;
          android.UpdateDeviceList();
          serial = android.ConnectedDevices[0];
          device = android.GetConnectedDevice(serial);
          // this will give the label lblsomelabel the Value of the device battery level.
          lblsomelabel.Text = device.Battery.Level.ToString();
          lblsomelabel.Text += "%";
    } 
```

使用带有名为 button1 的按钮和名为 lblsomelabel 的标签的表单

您将获得 Connected Devices 序列号，然后将其与设备关联。

然后可以调用该库以按照指示提取电池电量。

希望这可以帮助。Dan 的 Github 有他使用的代码示例，您可以查看 git hub 以更好地理解他的调用。

# mysql - 如何使用iphone将数据插入mysql

> ID：13506841
> 
> 赞同：0
> 
> 时间：2012-11-22T06:14:10.983
> 
> 标签：mysql, iphone

我正在使用 iPhone 中的“MapView”应用程序

在这个应用程序中，我当前位置的纬度和经度被发送到服务器，以便其他用户可以看到这个位置并在 MapView 中显示。

如何从 iPhone 向 mysql(PHP) 中插入记录或数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:52:47.340

除了数据库服务器之外，您还需要一个 Web 服务器来托管一个带有您的 iPhone 应用程序可以访问的 API 的 Web 应用程序。这个网络应用程序可以用任何可以写入 MySQL 数据库的语言（php、python、java、ruby、perl 等等）编写。您可能希望使用一个 restful api，使用 json 来表示数据。有许多资源可以帮助您学习创建这样的东西。祝你好运！

# android - 我在 onPostExecute 中所做的一切都使用 NullPointer

> ID：13506848
> 
> 赞同：0
> 
> 时间：2012-11-22T06:14:52.593
> 
> 标签：android, android-asynctask, expandablelistview

我必须从服务器更新一个可扩展列表，我正在使用 asyncTask 下载并在本地数据库中填充新值，一切都在 doInBackground 中完成，但完成后我尝试在 onPostExecute 中刷新我的可扩展列表，但我在声明中得到了一个 nullPointer在加载新数据之前运行良好。我所做的只是调用首先初始化expandableList的相同方法..

首次初始化列表的方法：

```
public void initializeExpandableList() {
        // TODO Auto-generated method stub
        getValuesForList();
        setupList();
        setupClickListenersOnExpandList();

    } 
```

`getValuesForList()`和的代码`setUpList()`是：

```
public void getValuesForList() {

    // get which list_id are present in subtopic table

    DataBaseHelper myDbHelper = new DataBaseHelper(context);
    ArrayList<String> ids = myDbHelper.getListIdsFromSubTopic();

    ArrayList<String> typeList = myDbHelper.getTypeListFromDB(ids);
    // typeList = myDbHelper.getTypeListFromDB();
    Log.v("typelist", typeList + "");
    arrGroupelements = typeList.toArray(new String[typeList.size()]);

    Log.v("arrGrp", arrGroupelements.toString() + "");

    ArrayList<ArrayList<String>> subtopics = myDbHelper.getChildForGroup();

    arrChildelements = new String[subtopics.size()][];
    for (int i = 0; i < subtopics.size(); i++) {
        ArrayList<String> row = subtopics.get(i);
        arrChildelements[i] = row.toArray(new String[row.size()]);
    }
    Log.e("arrChildElements", arrChildelements.toString());

} 
```

对于 setUpList() 方法：

```
public void setupList() {
            expList.setAdapter(adap);
            // adap.notifyDataSetChanged();
            ((BaseAdapter) expList.getAdapter()).notifyDataSetChanged();
        } 
```

在 doInBackground() 中插入数据后，在 onPostExecute 内部，我正在调用一个方法，该方法`refresh()`再次调用 initializeExpandableList()，我得到空指针。

```
private void refresh() {
        // TODO Auto-generated method stub
initializeExpandableList();
    } 
```

而不是initializeExpandableLIst，也试过了

```
((BaseAdapter) expList.getAdapter()).notifyDataSetChanged(); 
```

并尝试重新启动活动：

```
Intent intent = getIntent();
         finish();
         startActivity(intent); 
```

在最后一行再次获得空指针`startActivity(intent);`

我在这里想念什么？

# qt - 如何在不影响性能的情况下反转 QImage？

> ID：13506849
> 
> 赞同：1
> 
> 时间：2012-11-22T06:14:54.527
> 
> 标签：qt, qt4, qgraphicsview, qimage

我在 QGraphicsView 中有一个 QImage ，我需要连续显示图像。有时我需要连续显示倒置的图像。为此，我使用

```
img.invertPixels(QImage::InvertRgba); 
```

但是此时，由于连续的反转过程，显示正在闪烁。如何在不影响性能的情况下实现反相过程？显示似乎很平滑，没有反转。`

```
QImage img(byImageBuf, width, height, QImage::Format_Indexed8);   
  scene->clear();        
 if(bInvertPixel)       
 {   
    /* Inverted image */        
     img.invertPixels(QImage::InvertRgba);      
 }        
 scene->addPixmap(QPixmap::fromImage(img));     

 view->fitInView(0, 0, width, height,  Qt::IgnoreAspectRatio);        
 view->update();` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:51:44.010

由于您使用的是索引图像类型 ( `QImage::Format_Indexed8`)，您可以反转颜色表并切换它：

```
if(bInvertPixel)
{
   /* Inverted image */
   img.setColorTable( invertedColorTable );
}
else
{
   img.setColorTable( standardColorTable );
} 
```

`standardColorTable`并且`invertedColorTable`是 QRgb 值的数组。

颜色表的美妙之处在于您不必每次显示图像时都更新它；只需设置一次，然后忘记它。连接来自按钮的信号以反转颜色并在那里设置颜色表。

# javascript - 带有javascript的无限定时器循环（没有setInterval）？

> ID：13506852
> 
> 赞同：11
> 
> 时间：2012-11-22T06:15:08.313
> 
> 标签：javascript, performance, memory-leaks

我被（一位朋友）要求建立一个计时器（无限的，每秒写一行），但没有`setInterval`.

我[解决](http://jsbin.com/ukohoj/5/edit)了它：

```
var i = 0;

    function k(myId, cb)
    {
        setTimeout(function ()
        {
            console.log(myId);
            cb();
        }, 1000);
    }

    function go()
    {
        i++;
        k(i, go);
    }

    go(); 
```

它正在工作。

问题是我担心会有记忆压力。它实际上创建了一个递归，并且在一段时间（一周或其他时间）之后 - 该过程将消耗大量内存。（堆栈永远不会被释放）

如何更改我的代码以不消耗太多内存？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T06:20:15.993

## 这不是递归

它可能看起来像递归，但 setTimeout 不会创建递归。

setTimeout 的工作方式是立即返回。所以调用`k`立即结束，堆栈被释放。

当超时实际发生并且`go`再次发生调用时，它不是来自上一次调用的点，`k`而是来自全局范围*。

* 注意：我没有使用 ECMAScript 规范中定义的范围的严格含义。我的意思是调用`k`将就像您将其写在一个普通的`<script></script>`标签中一样：也就是说，在任何其他函数调用之外。

## 关于您对关闭的担忧

`k`在您的特定情况下，该函数创建的闭包中实际上包含的内容很少。唯一重要的闭包是对参数`cb`和的引用`myId`。即便如此，它也只会持续大约一秒钟：

```
 #1   function k(myId, cb) {
 #2        setTimeout(function(){
 #3            console.log(myId); // there is a closure here to myId
 #4            cb();              // and another one for cb
 #5
             /* But at this point in the function, setTimeout ends
             * and as the function returns, there are no remaining
             * references to either "cb" or "myId" accessible
             * anywhere else. Which means that the GC can immediately
             * free them (though in reality the GC may run a bit later)
             */
  #6       }, 1000); // So one second is roughly the longest the closure lasts
    } 
```

## 可以更简单

我应该注意到您的代码相当复杂。如果你像这样简单地编写它，它可以写得更简单，并且根本不使用闭包（减去全局变量 i）：

```
// Simpler, does exactly the same thing:
var i = 0;
function go () {
    console.log(i);
    i++;
    setTimeout(go, 1000); // callback
}
go(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T06:24:00.767

此行是错误的：

> 它实际上创建了一个递归，并且在一段时间（一周或其他时间）之后 - 该过程将消耗大量内存。（堆栈永远不会被释放）

它不会*创建*递归，因为函数*完全*退出然后再次调用。

递归堆叠在彼此之上

```
function a() {a()}; // function calls itself until a stack overflow. 
```

堆栈看起来像这样

```
a()
  a()
    a()
      a() ... until a crash. 
```

使用 setTimeout，您可以执行一个函数。该函数为函数再次运行设置了一个事件——但重要的区别在于：函数完全退出，并且消失了[1]。然后它再次被调用。

执行方面，它与这样做没有太大区别：

```
function a() {console.log("I am called");}

a(); // Call the function;
a(); // Call the function again
a(); // Call the function again 
```

`setTimeout`如果你愿意，只是给浏览器一个“呼吸”的机会。屏幕更新的机会，处理其他事件的机会。用正确的术语来说，它不是`block`浏览器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T06:17:43.793

这不会造成内存泄漏。

事实上，这是一个非常常用的概念。通常它以这种形式出现：

```
setTimeout(function next() {

    // Do something...

    // Have the function set another timeout to call itself later.
    setTimeout(next, 10);

}, 10); 
```

当您想经常检查某事（这里每 10 毫秒）时，最好使用此模式，而不是`setInterval`因为它可以提高您的页面性能。例如，如果您的函数执行时间超过 10 毫秒，并且您使用它，`setInterval(f, 10)`那么它将不断被调用。但是，如果您使用`setTimeout`上面的模式，它至少可以确保处理器在每次调用之间获得 10 毫秒的中断，无论您的函数执行多长时间。

有关此模式的更多信息，请参阅[Paul Irish 的此视频（从 7:46 开始） 。](http://youtu.be/i_qE1iAmjFg?t=7m46s)

# php - 代码点火器更新无法立即在服务器上运行

> ID：13506857
> 
> 赞同：1
> 
> 时间：2012-11-22T06:15:43.703
> 
> 标签：php, codeigniter

我面临一个相当奇怪的问题。

我正在使用 Code Igniter 和 MySQL 在 Yellowpages 网站上工作。在我的本地机器上一切正常，但上传到我的服务器时遇到问题。

唯一的问题是：

当我进行一些更改并按下更新按钮时，更改会立即显示在视图中（还检查了它是否在数据库中获取更新）。但是，如果我在 5-10 秒内再次按下“编辑”按钮，更改将被撤消。

最有趣的事实是，即使我用旧的更改按更新...过几个小时来检查一下。我再次看到了新的价值观。

我真的不知道怎么了。

这是我的代码：

**控制器**

```
    功能客户列表（）
    {
        $数据 = 数组（）；
        $data = $this->footer_images();

        $this->load->library('分页');

        if($this->session->userdata('user_role') == "Admin" || $this->session->userdata('user_role') == "Employee")
        {
            if($this->session->userdata('user_role') == "Admin")
                $cond = array('启用' => 1,'批准' => 1);
            否则 if($this->session->userdata('user_role') == "Employee")
                $cond = array('enabled' => 1,'approve' => 1,'branch' => $this->session->userdata('branch'));

            $config = 数组（）；

            $config["base_url"] = base_url() 。“家/客户名单”；
            $config["total_rows"] = $this->companies->count_entry($cond,"companies");
            $config["per_page"] = 10;
            $config["uri_segment"] = 3;
            $config["num_links"] = 3;
            $config["full_tag_open"] = '';
            $config["full_tag_close"] = '';
            $config["cond"]=$cond;

            $this->分页->初始化($config);

            $off=$this->uri->segment(3);

            if($off=="" && !isset($_POST['off']))
                $off=0;
            否则 if(isset($_POST['off']))
                $off=$this->input->post("off");
            别的
                $off=$this->uri->segment(3);

            $data["customers"] = $this->companies->get_data_with_cond_page($config["per_page"], $off, $config["cond"]);

            $content_data['content'] = $this->load->view("customerList",$data,TRUE);

            if($this->session->userdata('user_role') == "Admin")
                $this->load->view('masterTemplate/adminTemplate',$content_data);                
            否则 if($this->session->userdata('user_role') == "Employee")
                $this->load->view('masterTemplate/employeeTemplate',$content_data);
        }
        别的
        {
            $data['signup_error'] = "OK";
            $content_data['content'] = $this->load->view("home",$data,TRUE);
            $this->load->view("masterTemplate/template",$content_data);
        }
    }

    函数编辑公司（）
    {

        $数据 = 数组（）；
        $data = $this->footer_images();

        $slno = $this->uri->segment(3);

        $cond = array('slno' => $slno);
        $data['results'] = $this->companies->get_data_with_cond($cond);
        $data['category'] = $this->category->get_all_data();
        //// $data['subcategory'] = $this->subcategories->get_all_data();

        /* $data['makeColumns'] = $this->makeColumns1();
        $data['getTotalData'] = $this->getTotalData("category","");
        $data['perPage'] = $this->perPage(); */
        $data['category'] = $this->category->get_all_data();

        if($this->session->userdata('user_role') == "Admin")
        {
            $this->load->view('template/Admin/header');
            $this->load->view("edit_company",$data);
            $this->load->view('template/Admin/footer',$data);
        }

    }

    函数更新公司（）
    {
        $this->form_validation->set_rules('company_name', 'Company Name', 'required');
        $this->form_validation->set_rules('category', 'Category', 'required');

        if ($this->form_validation->run() == FALSE)
        {
            $sl = $this->input->post('slno');
            重定向（“home/editCompany/$sl?stat=err”）；          
        }
        别的
        {
                $数据 = 数组（
                                'company_name' => $this->input->post('company_name'),
                                'contact_person' => $this->input->post('contact_person'),
                                '地址' => $this->input->post('地址'),
                                'city' => $this->input->post('city'),
                                'state' => $this->input->post('state'),
                                '地标' => $this->input->post('地标'),
                                'pincode' => $this->input->post('pincode'),
                                'std_code' => $this->input->post('std_code'),
                                'mobile' => $this->input->post('mobile'),
                                'phone' => $this->input->post('phone'),
                                'fax' => $this->input->post('fax'),
                                'cmail' => $this->input->post('cemail'),
                                '网站' => $this->input->post('网站'),
                                'category_name' => $this->input->post('category')
                            );

                $cond = 数组（
                            'slno' => $this->input->post('slno')
                         );

                        if($this->companies->update_data($cond,$data))
                        {
                            重定向（“home/customerList?stat=ok”）；
                        }
                        别的
                        {
                            重定向（“home/customerList?stat=nok”）；
                        }

        }
    }

```

**模型**

```
    函数更新数据（$cond，$data）
    {
        $this->db->where($cond)->update('companies',$data);
        返回真；
    }

```

早期的帮助将不胜感激。谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:01:29.090

看来我的页面缓存有问题。一旦我使用了无缓存公式……它就起作用了。现在，跑得也不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:20:27.583

更新后尝试按 control+f5 刷新缓存

# objective-c - Apple Push Notifications ，我们如何获得警报

> ID：13506858
> 
> 赞同：0
> 
> 时间：2012-11-22T06:15:52.557
> 
> 标签：objective-c, apple-push-notifications

在创建 .cer、AppID 和 .p12 后使用 APNS（Apple Push Notifications）。如何创建 .PEM 文件。创建 .PEM 文件后，我必须遵循哪些必要步骤才能在我的应用程序中获取 APNS 警报。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:45:55.080

我不确定你的问题到底是什么，但是一个很好的使用 APNS 的教程： [http ://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

它有点旧，但应该仍然是正确的。该页面上还有很多其他非常好的教程！

# ios - JSON 字符串编码 - 混乱

> ID：13506859
> 
> 赞同：1
> 
> 时间：2012-11-22T06:15:54.180
> 
> 标签：ios, objective-c, json, ios5

在使用 json 解析时，我面临着一个非常混乱的情况。

情景是，

第 1 步：我有两个链接

```
 1\. http://www.xyz.com/json/getpidl.asp?id=5527446
     2\. http://www.xyz.com/json/getpidl.acp?id=5587963
     ****BOTH LINKS ARE WORKING** ** 
```

第 2 步：现在我尝试使用以下代码对这两个链接中的 json 字符串（一个接一个）进行编码

```
 NSMutableString *responseString = [[NSMutableString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    NSError *error;
SBJSON *parserObject = [[SBJSON alloc] init]; 
```

第 3 步：a) Link1 - 响应字符串具有 json 字符串 b) Link2 - 响应字符串为空

第 4 步：所以，我更改了如下代码，

```
 NSMutableString *responseString = [[NSMutableString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

    if (!(responseString))
    {
    responseString = [[NSMutableString alloc] initWithData:responseData encoding:NSASCIIStringEncoding];
    }
    NSError *error;
SBJSON *parserObject = [[SBJSON alloc] init]; 
```

第5步：现在问题已经解决了。但**我无法理解这里的问题。谁能帮我理解这种情况**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:25:01.687

目前尚不清楚这与 JSON 有什么关系。您的代码片段创建 SBJSON 解析器对象，但从不使用它们。

`initWithData`如果不查看数据的样子，也很难弄清楚为什么调用失败。我的猜测是数据包含无效的 UTF8 字节序列，因此解码为 UTF8 失败，但解码为 ASCII 有效，因为“坏”字符仅被视为未知的单字节字符。

# validation - Excel VBA - 年初至今验证

> ID：13506876
> 
> 赞同：0
> 
> 时间：2012-11-22T06:17:38.737
> 
> 标签：validation, date, excel, vba

在财政年度开始时，我的用户表单中有一个变量输入。我希望能够验证该条目，以便在输入的日期不是财政年度的开始日期时提示用户。

例如，我的财政年度的开始日期是 2012 年 7 月 1 日，因此如果我正在运行该月的 2012 年 7 月至 2013 年 6 月的报告，则输入的财务不会返回错误消息。但是，如果我正在运行的月度报告是“2013 年 7 月”或“2013 年 8 月”，并且我输入的 YTD 是“2012 年 7 月”，我想要一个提醒说“您要重置输入的 YTD 吗？”

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:34:57.813

您没有解释很多...您的第一个示例是 12 个月的报告，然后您提到了月度报告。使用您的示例，如果月度报告从 2013 年 8 月开始运行。引发提示的用户输入是否总是错误的，或者只是有时？

无论如何，像一年的第一天这样的事情不会改变。为什么不简单地对过去和接下来 20 个（？）财政年度的第一天进行硬编码，并验证用户的输入与其中一个匹配。我实际上建议进行单元格内数据验证（针对由第一天组成的列表进行验证），但您说您使用的是用户表单。

# haxe - 使用单个脚本测试多种 Haxe 目标语言

> ID：13506879
> 
> 赞同：3
> 
> 时间：2012-11-22T06:17:48.523
> 
> 标签：haxe

在 Haxe 中，是否有任何脚本或命令可以自动以多种目标语言运行 Haxe 程序？我想编写一个执行以下操作的脚本：

1) 将 Haxe 源代码编译为 JavaScript、C++、PHP 和 Java。

2) 以每种目标语言显示 Haxe 程序的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:23:46.650

您可以使用普通的 hxml 和一个允许您输出到终端的特殊 js 运行时来执行此操作。我正在使用[phantomjs](http://phantomjs.org/)，但其他环境如 node.js 是可能的。

请注意，我需要添加一个特定的退出命令才能使 phantomjs 正确退出。有关更多详细信息，请参阅 phantomjs 文档。您还需要从 haxelib 安装 hxjava 和 hxcpp。

我在`--next`这里使用一次完成多个编译。您可以轻松地将其分解为多个 hxml 文件，并通过 makefile 等进行管理。

```
-main Main  
-php php                                                                        
-cmd echo "PHP:"                                                                
-cmd php php/index.php                                                          
-cmd echo "\n"                                                                  

--next                                                                          
-main Main                                                                      
-js bin/Main.js                                                                 
-cmd echo "phantom.exit();" >> bin/Main.js                                      
-cmd echo "JS:"                                                                 
-cmd phantomjs bin/Main.js                                                      
-cmd echo "\n"                                                                  

--next                                                                          
-main Main                                                                      
-cpp cpp                                                                        
-cmd echo "CPP:"                                                                
-cmd ./cpp/Main                                                                 
-cmd echo "\n"                                                                  

--next                                                                          
-main Main                                                                      
-java java                                                                      
-cmd echo "JAVA:"                                                               
-cmd java -jar java/java.jar                                                    
-cmd echo "\n" 
```

# facebook-graph-api - FQL 查询未在 PHP 中执行

> ID：13506881
> 
> 赞同：0
> 
> 时间：2012-11-22T06:17:58.533
> 
> 标签：facebook-graph-api, facebook-fql

我正在尝试使用 facebook graph api 让用户的朋友签到。我正在使用 FQL 来完成工作。但是，我遇到了一个问题，因为相同的查询在图形 api 资源管理器中执行良好，但在 php 中执行时返回空数据集。这是代码。

```
$fql_query_url = 'https://graph.facebook.com/'
. '/fql?  q=SELECT+page_id+from+checkin+WHERE+author_uid+in(SELECT+uid2+FROM+friend+WHERE+uid1=me())'
. '&access_token=' . $accesstoken;
$fql_query_result = file_get_contents($fql_query_url);
$fql_query_obj = json_decode($fql_query_result, true); 
```

当我回显 $fql_query_obj 时，我得到一个数组，但它为空。

# web-services - 有没有办法使用 Spring ReloadableResourceBundleMessageSource 在 CXF 中实现本地化内部化

> ID：13506890
> 
> 赞同：2
> 
> 时间：2012-11-22T06:18:27.710
> 
> 标签：web-services, spring, localization, internationalization, cxf

我一直在寻找一种基于 Spring 的配置方法，以在我用 Apache CXF 开发的基于 Rest 的应用程序中支持本地化/国际化。我需要根据用户选择的语言本地化异常消息、我的 API 的响应和其他信息性消息。语言环境信息将出现在请求标头“Accept-Language”参数中。

在 Spring MVC 中，有一种预定义的方式支持本地化，并且在基于语言请求参数集从类路径动态加载相应的属性文件时非常有用。

```
Spring MVC uses 
ReloadableResourceBundleMessageSource, 
LocaleChangeInterceptor, 
DefaultAnnotationHandlerMapping to configure Localization. 
```

但是我找不到可以在 CXF Restful Web 服务中使用的类似方式。

任何人都可以在里面放一些光。

谢谢

拉胡尔

# c++ - 将部分指定的模板化矩阵乘法运算符重载函数声明为类外的友元

> ID：13506891
> 
> 赞同：1
> 
> 时间：2012-11-22T06:18:35.150
> 
> 标签：c++, templates, generics

我正在编写一个矩阵基类，并遇到了标题中的问题。

这里是我的报关表。

```
template <typename T, size_t m, size_t n, typename _Prd>
template <size_t _m, size_t _n>
const Matrix<T,m,_n,_Prd> operator* (const Matrix<T,m,n,_Prd>& lhs, const Matrix<T,_m,_n,_Prd>& rhs) ; // matrix mult 
```

和课堂内的朋友声明。

```
template <size_t _m, size_t _n>
friend const Matrix<T,m,_n,_Prd> operator* <>(const Matrix<T,m,n,_Prd>& lhs, const Matrix<T,_m,_n,_Prd>& rhs) ; 
```

和实施：

```
template <typename T, size_t m, size_t n, typename _Prd>
template <size_t _m, size_t _n>
const Matrix<T,m,_n,_Prd> operator* (const Matrix<T,m,n,_Prd>& lhs, const Matrix<T,_m,_n,_Prd>& rhs) 
{
    assert (n == _m) ;
    Matrix<T,m,_n,_Prd> result ;

    for (size_t j = 0 ; j < m ; ++j)
        for (size_t i = 0 ; i < _n ; ++ i)

            for (size_t k = 0 ; k < n ; ++ k) 
                result.at(j,i) += lhs.at(j,k) * rhs.at(k,i) ;

    return result ;
} 
```

但是这些不能编译，错误是：

```
In file included from main.cpp:13:
Matrix.hpp:43: error: too many template-parameter-lists
Matrix.hpp:66: error: invalid use of template-id ‘operator*<>’ in declaration of primary template
In file included from main.cpp:13:
Matrix.hpp:364: error: too many template-parameter-lists 
```

我在同一个类上遇到了另一个问题，[当从原始返回不同的模板类型时，没有匹配的函数](https://stackoverflow.com/questions/13505920/no-matching-function-when-return-different-template-type-from-the-original)

**更新**：

我根据下面的建议进行了修改，但它仍然不起作用。

前向声明：

```
template <typename T, size_t m, size_t n, typename _Prd,size_t _m, size_t _n>
const Matrix<T,m,_n,_Prd> operator* (const Matrix<T,m,n,_Prd>& lhs, const Matrix<T,_m,_n,_Prd>& rhs) ; // matrix mult 
```

班级内的朋友声明：

```
template <size_t _m, size_t _n>
friend const Matrix<T,m,_n,_Prd> operator* (const Matrix<T,m,n,_Prd>& lhs, const Matrix<T,_m,_n,_Prd>& rhs) ; 
```

执行 ：

```
template <typename T, size_t m, size_t n, typename _Prd,size_t _m, size_t _n>

const Matrix<T,m,_n,_Prd> operator* (const Matrix<T,m,n,_Prd>& lhs, const Matrix<T,_m,_n,_Prd>& rhs) 
{
    assert (n == _m) ;
    Matrix<T,m,_n,_Prd> result ;

    for (size_t j = 0 ; j < m ; ++j)
        for (size_t i = 0 ; i < _n ; ++ i)

            for (size_t k = 0 ; k < n ; ++ k) 
                result.at(j,i) += lhs.at(j,k) * rhs.at(k,i) ;

    return result ;
} 
```

但是当我想这样使用它时：

```
Matrix<double,2,3> testmat8(10.0) ;
Matrix<double,3,4> testmat9(2.0) ;
Matrix<double,2,4> testmat10 ;
testmat10 = testmat8 * testmat9 ; 
```

错误是：

```
main.cpp:143: undefined reference to `Matrix<double, 2ul, 4ul, std::equal_to<double> > const operator*<3ul, 4ul>(Matrix<double, 2ul, 3ul, std::equal_to<double> > const&, Matrix<double, 3ul, 4ul, std::equal_to<double> > const&)' 
```

还是没解决...

**更新2：**

为了澄清我的目的，我编写了 3 个解决方法。然而，并非所有这些都按预期工作。

```
//member operator * rather than friend function
template <typename T, size_t m, size_t n, typename _Prd>
template<size_t _m, size_t _n>
Matrix<T,m,_n,_Prd> Matrix<T,m,n,_Prd>::operator *(const Matrix<T,_m,_n,_Prd> & rhs) const 
{
    assert (n == _m) ;
    Matrix<T,m,_n,_Prd> result ;
    for (size_t j = 0 ; j < m ; ++j)
        for (size_t i = 0 ; i < _n ; ++ i)
            for (size_t k = 0 ; k < n ; ++ k) 
                result.at(j,i) += this->at(j,k) * rhs.at(k,i) ;
    return result ;
}

//work around for *
template <typename T, size_t m, size_t n, typename _Prd>
template<size_t _m, size_t _n>
void Matrix<T,m,n,_Prd>::mul (Matrix<T,m,_n,_Prd> & result, const Matrix<T,m,n,_Prd> & A, const Matrix<T,_m,_n,_Prd> & B) 
{
    assert (n == _m) ;
    for (size_t j = 0 ; j < m ; ++j)
        for (size_t i = 0 ; i < _n ; ++ i)

            for (size_t k = 0 ; k < n ; ++ k) 
                result.at(j,i) += A.at(j,k) * B.at(k,i) ;
}

template <typename T, size_t m, size_t n, typename _Prd>
template<size_t _m, size_t _n>
Matrix<T,m,_n,_Prd> Matrix<T,m,n,_Prd>::mul(const Matrix<T,_m,_n,_Prd> & B) const 
{
    assert (n == _m) ;
    Matrix<T,m,_n,_Prd> result ;

    for (size_t j = 0 ; j < m ; ++j)
        for (size_t i = 0 ; i < _n ; ++ i)

            for (size_t k = 0 ; k < n ; ++ k) 
                result.at(j,i) += this->at(j,k) * B.at(k,i) ;

    return result ;
} 
```

我这样称呼他们：

```
 testmat10 = testmat8 * testmat9 ; //works, but I have to comment out the friend operator * overload outside of the class.
    testmat10 = testmat8.mul(testmat9) ; //works, but mul() has to be a member, not as expected as a friend .
    Matrix<double,2,3>::mul(testmat10, testmat8, testmat9) ; 
//works, but this is ridiculous, for a static function, how would I avoid use <double,2,3> as the testmat8's template before using mul? I shouldn't have used template when I use mul in this way. 
```

但是我想要的答案是有人可以澄清为什么非成员运算符 * 不能与第一个 mul() 做同样的事情？什么是编码我的矩阵乘法函数的正确方法？

**Update3：（已解决）** 感谢 jpalecek，我根据他的回答修改了我的代码。

前向声明：

```
template < typename T, size_t m, size_t n, typename _Prd, size_t _m, size_t _n> 
const Matrix<T,m,_n,_Prd> operator * (const Matrix<T,m,n,_Prd>& lhs, const Matrix<T,_m,_n,_Prd> & rhs) ; 
```

朋友声明：

```
// here is tricky
template <typename U, size_t mm, size_t nn, typename _Prd2, size_t _m, size_t _n>
friend const Matrix<U,mm,_n,_Prd2> operator* (const Matrix<U,mm,nn,_Prd2>& lhs, const Matrix<U,_m,_n,_Prd2>& rhs) ; 
```

执行：

```
template <typename U, size_t mm, size_t nn, typename _Prd2, size_t _m, size_t _n>
const Matrix<U,mm,_n,_Prd2> operator* (const Matrix<U,mm,nn,_Prd2>& lhs, const Matrix<U,_m,_n,_Prd2>& rhs) 
{
    return lhs.mul(rhs) ;
} 
```

mul() 作为成员函数：

```
template <typename T, size_t m, size_t n, typename _Prd>
template<size_t _m, size_t _n>
Matrix<T,m,_n,_Prd> Matrix<T,m,n,_Prd>::mul(const Matrix<T,_m,_n,_Prd> & B) const 
{
    assert (n == _m) ;
    Matrix<T,m,_n,_Prd> result ;
    for (size_t j = 0 ; j < m ; ++j)
        for (size_t i = 0 ; i < _n ; ++ i)
            for (size_t k = 0 ; k < n ; ++ k) 
                result.at(j,i) += this->at(j,k) * B.at(k,i) ;
    return result ;
} 
```

用法：

```
//test * operator, all work
Matrix<double,2,3> testmat8(10.0) ;
Matrix<double,3,4> testmat9(2.0) ;
Matrix<double,4,4> testmat11(3.0) ;
Matrix<double,2,4> testmat10 ;
testmat10 = testmat8 * testmat9 * testmat11;
cout <<testmat10<<endl ;
testmat10 = testmat8.mul(testmat9) ;
cout << testmat10 << endl ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:26:45.340

您的语法无效。您将模板参数化两次：

```
template <typename T, size_t m, size_t n, typename _Prd>
template <size_t _m, size_t _n> 
```

这没有明确的含义。`template<...>`后面应该是你的正文/声明`operator*`，而不是另一个`template<...>`。

另请参见此处：[专门化成员函数时出现“模板参数列表过多”错误](https://stackoverflow.com/questions/3595859/too-many-template-parameter-lists-error-when-specializing-a-member-function)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:42:47.923

您面临的问题是您无法与函数的部分专业化（这些不存在）或专业化系列成为朋友。所以它要么是一个函数的所有特化，要么是一个：

```
template <class T> class A;
template <class T, class U>
void operator*(A<T>, A<U>);

template <class T>
class A {
    template <class X, class U>
    friend void ::operator*(A<X>, A<U>); 
```

将适用于所有专业化（您必须用 6 个参数替换参数列表），

```
 friend void ::operator*<>(A<T>, A<T>); 
```

将意味着一个特定的专业化（这不是你想要的）。[这里](http://ideone.com/shVcRP)和[这里](http://ideone.com/eDUOIs)的例子。

# android - 将数组转换为字符串数组并将数据设置为 android 中的 Spinner ..？

> ID：13506894
> 
> 赞同：0
> 
> 时间：2012-11-22T06:18:42.593
> 
> 标签：android, spinner, android-spinner

由于我是 android 开发的新手，我遇到了一个问题，我无法将数据设置为微调器适配器..

在这里我从数据库中获取数据就像

String times = [09:30,10:30,12:15,04:45,10:50] 我在这种模式下得到数组。当我试图将此数组设置为微调器适配器时，它会出错......

```
 dateadp=new ArrayAdapter<CharSequence>(this, android.R.layout.simple_spinner_dropdown_item,times);
 datespn.setAdapter(dateadp); 
```

那么如何将以下数组转换为字符串数组以及如何将该数据附加到微调器。谁能帮我这个....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:24:53.317

我认为您对将 arraylist 转换为 String 数组感到震惊。如果您要将数据输入到数组列表中，那么代码就在这里。

```
ArrayAdapter<String> dateadp;
timesArray= times.toArray(new String[times.size()]);
dateadp=new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item,timesarray);
datespn.setAdapter(dateadp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:27:46.207

如果

["09:30","10:30","12:15","04:45","10:50"] 表示字符串 abc。

然后你可以采取以下方法。

```
String processingString = abc.substring(abc.indexOf("[") + 1,
abc.indexOf("]"));

String[] arr = processingString.split(",");

ArrayAdapter < String > adapter = new ArrayAdapter < String > (this,
android.R.layout.simple_list_item_1, arr); 
```

# asp.net-mvc - 为 User.Identity Name 为 Integer 的操作编写单元测试

> ID：13506897
> 
> 赞同：0
> 
> 时间：2012-11-22T06:19:03.967
> 
> 标签：asp.net-mvc, unit-testing, identity

我正在使用带有 Web Api 的 ASP.NET MVC 3 的单元测试来编写测试用例。

现在我有一个动作，它调用了我在服务层中定义的一些方法，我在其中使用了以下代码行。

```
var userId = ((Project)(User.Identity)).UserId; 
```

项目类在哪里

```
using System;
using System.Security.Principal;
using System.Web.Security;

namespace Project.Web.Core.Models
{ 
[Serializable]
public class ProjectUser : IIdentity
{
    public ProjectUser(){} 
    public int UserId { get; set; }
  }
} 
```

现在如何为此创建单元测试方法，我得到空引用异常。我是编写单元测试的新手，谁能帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:13:28.527

与此问题类似：[Testing controller Action that uses User.Identity.Name](https://stackoverflow.com/questions/1389744/testing-controller-action-that-uses-user-identity-name)

User.Identity 对象所在的 HttpContext 不存在于单元测试的上下文中，它只存在于 ASP.NET 进程中运行的代码的上下文中。

如果您将 HttpContext 作为参数传递给服务方法，可能会更容易编写单元测试。然后，您可以对引用的问题使用类似于[此答案的代码：](https://stackoverflow.com/a/6752924/1225352)

```
var mock = new Mock<UnknownServiceClass>();
var mockedUser = new ProjectUser(){ UserId = 1 };
mock.SetupGet(p => p.HttpContext.User).Returns(mockedUser); 
```

# eclipse - 插件，附加组件，管理单元，扩展之间的区别？

> ID：13506898
> 
> 赞同：1
> 
> 时间：2012-11-22T06:19:10.550
> 
> 标签：eclipse, plugins, eclipse-plugin, add-on, snap-in

在使用 eclipse、Microsoft 技术等时，我遇到了许多不同的术语，例如插件、附加组件、管理单元、扩展等。

我想知道它们每个的确切含义是什么？什么时候使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:51:32.200

我认为它们几乎相同并且基本上增强了软件的现有功能，但是可以插入不同的功能并且仅适用于 MS 产品

> **插件**：在计算中，插件是一组软件组件，可为更大的软件应用程序添加特定功能。
> 
> **addon** ：addon ：添加到某些东西以改进它的组件；
> 
> **（管理单元）** Microsoft 管理控制台 (MMC) 是 Windows 2000 和更高版本的基于 Windows NT 的操作系统的一个组件，它为系统管理员和高级用户提供了一个灵活的界面，他们可以通过该界面配置和监控系统

扩展是相同的插件，但用于 Google Chrome 浏览器，而插件用于 Firefox。

希望有帮助。

# android - 自定义推送通知到移动设备

> ID：13506899
> 
> 赞同：1
> 
> 时间：2012-11-22T06:19:17.523
> 
> 标签：android, ios, push-notification, server-push

我正在搜索有关自定义推送通知的信息。我想在服务器和设备（Android 和 iOS）之间实现一个隧道。当它到来时，服务器应该将信息发送到设备（应用程序）。

另外，据我所知，推送仅以一种方式工作，服务器不知道它的消息是否已到达设备。也许我对这个说法有误，所以请纠正我。

我的情况是我希望服务器可以知道这些信息。所以我的问题是如何在服务器和设备（Android、iOS）之间创建这种行为。也许我应该查看一些库甚至协议名称。

此时我正在阅读名为[MQTT的推送通知](http://mqtt.org/)

我将不胜感激任何信息。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:27:21.270

您正在寻找的是适用于 Android的[Google Cloud Messaging和 iOS 端的](http://developer.android.com/guide/google/gcm/index.html)[Apple Push Notification Service](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)。（Windows Mobile 中也有 Azure，但由于成本问题，似乎没有人真正关心。

是的，您断言推送通知是单向的是正确的。但是，如果设备处于连接状态，则提供返回服务器的确认路径相对简单。作为对通知的响应，您可以简单地让设备向服务器发布一个令牌，确认收到推送通知。

# java - Java 异步异常：我能捕捉到它们吗？

> ID：13506900
> 
> 赞同：20
> 
> 时间：2012-11-22T06:19:37.023
> 
> 标签：java, exception, virtual-machine

我一直在阅读 JLS，遇到了第[11.1.3 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.1.3)我引用的[异步异常：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.1.3)

> 大多数异常是同步发生的，因为它们发生在线程中，并且在程序中被指定为可能导致此类异常的某个点处发生。相比之下，异步异常是可能在程序执行的任何时候发生的异常。

和

> 异步异常仅由于以下原因而发生：
> 
> [...]
> 
> *   Java 虚拟机中的内部错误或资源限制，阻止它实现 Java 编程语言的语义。在这种情况下，抛出的异步异常是 VirtualMachineError 子类的一个实例。

是否有可能捕获此类异常以用于日志记录或通知（因为我相信这样的事情是不可恢复的）？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-22T06:39:55.480

您可以像任何其他异常一样捕获此类异常。唯一的问题是它们可能出现在程序中的*任何*地方，因此很难可靠地捕获它们。您基本上必须将`run`所有线程的方法和`main`方法包装在一个`try..catch`块中，但是对于您无法控制的线程（如 Swing EDT 或计时器线程等），您不能这样做。

通常也不建议捕获 的任何子类`Error`，因为 JVM 可能处于不稳定状态，这可能会导致进一步的故障（例如，在 的情况下`OutOfMemoryError`，您甚至可能没有足够的内存来处理异常）。`Error`但是，日志记录将是在我眼中捕捉 s 的正当理由。

我建议的解决方案是为此使用[未捕获的异常处理程序](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)，方法是[将其设置为默认异常处理程序](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#setDefaultUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)。在此处理程序中，您将获得所有异常和错误，如果它们没有在代码中的任何地方捕获，您可以尝试记录它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T06:52:09.960

捕获这些异常（VirtualMachineError 的子类）没有意义，因为您没有不知道 pogram 处于何种状态，文档说虚拟机错误：

> 当内部错误或资源限制阻止它实现本章中描述的语义时，Java 虚拟机实现会抛出一个对象，该对象是类 VirtualMethodError 的子类的实例。**本规范无法预测可能会遇到内部错误或资源限制的位置，也没有明确规定何时可以报告这些错误**。

因此，假设您遇到 OutOfMemoryError 或 UnknownError ，您无能为力，一旦您的 vritualmashine 无法正常工作，您将无法为用户提供任何帮助，因为您的程序也无法正常工作，除了您不知道什么时候，点，以及它发生的原因，因为它不是由您的程序引起的代码错误。

# network-protocols - 如何管理 Cisco IOS 配置文件版本控制？

> ID：13506913
> 
> 赞同：1
> 
> 时间：2012-11-22T06:21:13.700
> 
> 标签：network-protocols, cisco, cisco-ios

只是想知道为配置提供版本的最佳方式是什么。详细说明 - 我想要不同版本的配置文件并查询 running-config 以获取当前正在运行的配置版本。是否可以设置 MIB OID 来指定当前运行的配置版本，然后再轮询？我可以把它放在配置文件本身吗？

这里的上下文是升级管理。

谢谢！

编辑：为了澄清（我什至不明白我第一次写了什么），我真正想要的是一种将版本元数据添加到配置文件的简单方法。

理想情况下，我想做的是在配置文件中有这样一行：

```
! configuration_version 1.10 
```

这样做的问题是，当您将配置文件复制到运行时，您会丢失注释，因此我能找到的唯一选择是将 config_version 属性放在其中一个横幅中，例如 motd 或登录横幅。这可行，但它是一种黑客行为，而且由于 cli 中没有“显示横幅”命令，因此从运行配置中解析横幅消息很麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:25:48.977

我所看到的是将版本添加到环回的描述中，比如说

int lo100 描述 Ver1.51

另一件事是标记 snmp 位置行，如 ::ver1.51

希望对您有所帮助，如果是的话，请给我一些选票 我是新手！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:14:39.960

我们通过编程来完成这项工作。我们通过 SSH V2 协议连接到 cisco 路由器并发送必要的命令来获取运行配置，并将其保存到文件中。

当我们将配置更新到最新版本时，我们连接到路由器并请求运行配置，如果配置不同，我们会解析访问列表中的更改以及所有这些内容，并通过 ssh 发送命令以保留该路由器更新到最新版本。

对于 IOS 升级，我们也使用 tftp 命令。

**编辑：**

您可以将注释添加到描述您输入的命令的配置文件中。在评论前加上感叹号 (!)。

来自思科的示例：

```
Router# configure terminal
Router(config)# !The following command provides the router host name.
Router(config)# hostname new_name
new_name(config)# end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T01:15:44.443

您还可以使用配置回滚来管理多个版本的配置，例如：

```
Router#conf t
Router(config)#archive
Router(config-archive)#path ?
flash: Write archive on flash: file system
ftp: Write archive on ftp: file system
http: Write archive on http: file system
https: Write archive on https: file system
pram: Write archive on pram: file system
rcp: Write archive on rcp: file system
scp: Write archive on scp: file system
tftp: Write archive on tftp: file system

Router(config-archive)#path flash:
Router(config-archive)#end
Router# 
```

show archive 然后可以列出保存的配置，并且 configure revert 可以用来返回到旧版本。

但是请注意将所有配置存储在路由器上；不是最好的主意，因为磁盘可能会变坏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-06T23:45:29.010

您可以制作配置的副本并将其放在闪存或 nvram 中，将其命名为 hostname-config-version.number 之类的名称。然后，您可以更改脚本以在 flash 或 nvram 中查找文件名，而不是查看配置。

# oracle - oracle - 删除其中定义的约束

> ID：13506914
> 
> 赞同：1
> 
> 时间：2012-11-22T06:21:19.007
> 
> 标签：oracle, oracle10g

我有一个甲骨文查询 -

```
occupation varchar2(50) CHECK(occupation IN ('student','govt_service','private','business'))); 
```

现在我需要删除检查约束，所以我使用以下查询 -

```
ALTER TABLE registration drop constraint occupation; 
```

但由于我没有定义约束名称，它说无效的约束名称。有没有办法删除约束？我想我可以更改表并添加约束的名称，然后将其删除，但还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:26:28.193

运行此查询：

```
select * from all_constraints where table_name = 'REGISTRATION'; 
```

您会找到约束名称。

**编辑：**我还建议你有一个表`Occupations`并用外键替换当前约束。（如果您已经想这样做，请向我道歉）。此外，规范化，职业可能有 ID，并且应在这些 ID 上定义外来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:27:52.827

尝试在 USER_CONSTRAINTS 表中查询 CONSTRAINT_NAME，它必须为您创建的约束生成系统名称。

```
select * from USER_CONSTRAINTS
where owner='<your_schema>' and CONSTRAINT_TYPE='C'; 
```

# php - 用ajax更新html代码

> ID：13506915
> 
> 赞同：0
> 
> 时间：2012-11-22T06:21:27.603
> 
> 标签：php, html, ajax, zend-framework

*更新*：我解决了这个问题，但解决方案仍然是暂时的。显然，提交按钮保存了提交和...的值，所以当我将子表单更改为新元素时，提交不会改变。所以我从主窗体中删除了提交按钮并将其添加到子窗体中，在更新页面中我添加了它自己的提交按钮，问题就解决了。但老实说，我不喜欢这种解决方案。

我用 Zend 框架编写了一个表单，然后在其中添加了一个子表单。取决于选择项的值，子表单会发生变化，并且它将具有新元素。我写了一个ajax来做到这一点。但是另一方面，getParam/Post 方法无法获取新元素值（我的意思是当我使用 ajax 更改表单时，html 代码保持不变）如何更新表单元素？

```
public function init() {
    //echo "in init";
    $this -> setMethod('post');
    $this->setAction('insert-rule');
    //echo "after set metho";
    $ruleName = new Zend_Form_Element_Text('rname');
    $ruleName -> setLabel('Rule Name:') -> setRequired('true');
    $address = new Zend_Form_Element_Text('address');
    $address -> setLabel('Address') -> setRequired('true');
    $port = new Zend_Form_Element_Text('port');
    $port -> setLabel('Port') -> setRequired('true');
    $submit = new Zend_Form_Element_Submit('submit');
    $submit -> setValue('Submit');
    $this -> addElements(array($ruleName, $address, $port));
    $action = new Zend_Form_Element_Select('action');
    $action -> addMultiOption(0, "allow");
    $action -> addMultiOption(1, "warning");
    $action -> addMultiOption(2, "block");
    $command = new Zend_Form_Element_Select('command');
    $command -> addMultiOption(0, "select");
    $command -> addMultiOption(1, "update");
    $command->setAttrib('onChange', 'changeform()');
    //TODO will add more command
    //echo "after def";
    $this -> addElements(array($action, $command));
    //echo "after add";
    $subForm = $this -> mySubForm();
    //echo "after myform";
    $this ->addSubForm($subForm,'subform');
    //echo "add subform";
    $this->addElement($submit);
    $subForm -> setElementDecorators(array('ViewHelper',
     array( array('data' => 'HtmlTag'),
      array('tag' => 'td', 'class' => 'subform')), array('Label', array('tag' => 'td')), 
      array( array('row' => 'HtmlTag'), array('tag' => 'tr'))));
               $subForm->addDecorator('htmlTag', array('tag' => 'div','id'=>'sub'));
}

public function mySubForm() {
    ///echo "my subform";
    $subForm = new Zend_Form_SubForm();
    //echo "new ing";
    $table=new Zend_Form_Element_Text('table');
    $table -> setLabel('On') -> setRequired('true');
    $table->setValue('table name');
    $user=new Zend_Form_Element_Text('user');
    $user -> setLabel('for') -> setRequired('true');
    $user->setValue('user name');
    // echo "subform".$table->getName;
    $condition=new Zend_Form_Element_Text('condition');
    $condition -> setLabel('where') -> setRequired('true');
    $subForm -> addElements(array($table,$user,$condition));
    // $subForm -> setElementDecorators(array('ViewHelper',
     // array( array('data' => 'HtmlTag'),
      // array('tag' => 'td', 'class' => 'subform')), array('Label', array('tag' => 'td')), 
      // array( array('row' => 'HtmlTag'), array('tag' => 'tr'))));
      return $subForm;
} 
```

这是我的表单代码，这是我的 ajax 代码

```
 <script>
        function changeform() {
            var sel=document.getElementById("command");
             var chosenoption=sel.options[sel.selectedIndex];
                 // window.alert(chosenoption.innerHTML);
            var xmlhttp;
            if(window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            } else {// code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function() {
                // window.alert(xmlhttp.status);
                if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    // window.alert('response');
                    document.getElementById("sub").innerHTML = xmlhttp.responseText;
                }
            }

            if(chosenoption.innerHTML=='update') {

                xmlhttp.open("Post", "http://localhost/dbfirewall/public/add-rule/update", true);
                xmlhttp.send();
            }
        }
    </script> 
```

在我的更新页面中有一个元素名称 subform[column] 并且当我更改选择项时子表单被替换但是当我得到子表单列元素时它什么也不显示

```
 public function insertRuleAction()
{
    $arr=$this->_request->getParam('subform');
    echo 'arr:'.$arr['column']; 
```

# c# - MVVM 模式，ObservableObject

> ID：13506922
> 
> 赞同：2
> 
> 时间：2012-11-22T06:22:38.517
> 
> 标签：c#, wpf, mvvm

请帮助我理解 MVVM 模式中的一件事：

例如，我需要在地图上显示城市。在 ViewModel 中，我有 ObservableCollection，它绑定到 View ItemsSource。ObservableCollection 包含类型为“City”的对象。必须从 ObservableObject 继承“City”类（我使用 MVVM Toolkit）吗？或者我应该创建一个包装类，从 ObservableObject 继承它，在 ViewModel 中使用来自“城市”对象的数据创建新的包装对象并将它们添加到集合中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:40:46.653

假设您的 City 类在您的模型中，并且您实际上需要了解 city 对象属性的更改 - 那么您应该为它创建一个包装器（即 CityViewModel）。您的包装器应该监听通知 City 类的任何更改的事件，并触发相关的 Property Change 通知。

模型类的设计应与模型相匹配，并且不应更改以适应您的视图 - 首先拥有 ViewModel 的目的是从您的视图中抽象您的模型。模型应该对视图一无所知。

如果您的 City 类的属性没有改变，或者您不在乎它们是否改变（而且您不是纯粹主义者），那么您可以直接公开它 - 无需继承 ObservableObject。（虽然我不使用 MVVM 工具包，但我不明白为什么你需要继承 ObservableObject 只是因为你将 City 对象存储在 ObservableCollection 中）。

然而，纯粹的视图是包装您绑定的所有内容，并且从不将模型中的任何内容直接暴露给视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:29:05.707

ObservableCollection 或 ObservableObject 与 MVVM 模型无关。您可以在没有 ObservableCollection 和 ObservableObject 的情况下创建基于 MVVM 的应用程序（当您需要更改类的属性值时使用 ObservableObject，但如果您的应用程序是只读的，您甚至不需要它）。

MVVM - M-Model（业务层），V-View（GUI），ViewModel-（GUI的上下文）。

当 XAML 用于绑定时。您必须需要一种通知机制来通知 GUI 某些内容发生了变化。现在，如果更改集合意味着您从集合中添加或删除了项目，则需要发出通知，如果您正在使用 ObservableCollection，则不需要该通知。同样，如果你的类 City 有一个属性 Population，当更改需要通知 GUI 时，这就是为什么需要创建一个 ObservableObject。

希望能帮助到你..

# php - 如何使用 Google API PHP 客户端获取 OAuth2 访问令牌？

> ID：13506930
> 
> 赞同：4
> 
> 时间：2012-11-22T06:23:23.370
> 
> 标签：php, google-api, google-fusion-tables, google-oauth

我正在尝试获取 OAuth 访问令牌以将一些数据导入融合表。我正在尝试使用 Google API PHP 客户端。我为此创建了一个服务帐户，并且正在使用代码，主要来自[serviceAccount](http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/prediction/serviceAccount.php)示例：

```
function access_token()
{
    $client = new Google_Client();
    $client->setAuthClass ('Google_OAuth2');
    // ^ Don't know if this line is required,
    // ^ but it fails just as well without it.
    $client->setApplicationName ('Mysite.dom.ain');
    $client->setAssertionCredentials (new Google_AssertionCredentials
        (   'MANY-NUMBERS-LETTERS-DASHES@developer.gserviceaccount.com',
            array ('https://www.googleapis.com/auth/fusiontables'),
            file_get_contents ('path/to/my/privatekey.p12') ));
    $client->setClientId ('NUMBERS-LETTERS-DASHES.apps.googleusercontent.com');
    $client->authenticate();
    // ^ Also fails equally good with and without this line.
    return $client->getAccessToken();
} 
```

一点调试输出显示`$client->authenticate()`返回`true`，但`$client->getAcessToken()`返回`null`。不抛出异常。我觉得我在做一些根本错误的事情。如果是这样，请原谅我的愚蠢并指出我正确的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T17:39:20.770

您不需要 authenticate() 调用，但需要调用`refreshTokenWithAssertion()`来刷新底层访问令牌。如果您使用客户端库发出签名请求，那么如果底层访问令牌已过期，它将懒惰地为您发出此调用。

刷新 access_token 的 API 请求很昂贵，并且配额较低，因此您需要缓存 access_token。

```
// Set your client id, service account name, and the path to your private key.
// For more information about obtaining these keys, visit:
// https://developers.google.com/console/help/#service_accounts
const CLIENT_ID = 'INSERT_YOUR_CLIENT_ID';
const SERVICE_ACCOUNT_NAME = 'INSERT_YOUR_SERVICE_ACCOUNT_NAME';

// Make sure you keep your key.p12 file in a secure location, and isn't
// readable by others.
const KEY_FILE = '/super/secret/path/to/key.p12';

$client = new Google_Client();
$client->setApplicationName("Google FusionTable Sample");

// Set your cached access token. Remember to store the token in a real database instead of $_SESSION.
session_start();
if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}

$key = file_get_contents(KEY_FILE);
$client->setAssertionCredentials(new Google_AssertionCredentials(
    SERVICE_ACCOUNT_NAME,
    array('https://www.googleapis.com/auth/fusiontables'),
    $key)
);

$client->setClientId(CLIENT_ID);

if ($client->getAuth()->isAccessTokenExpired()) {
  $client->getAuth()->refreshTokenWithAssertion();
}

// Get the json encoded access token.
$token = $client->getAccessToken(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:29:38.180

我认为你所做的一切都是正确的，现在你有两个选择：

*   使用你`$client`的类似的东西拨打服务电话

```
 $service = new Google_FusiontablesService($client);
    $selectQuery = "select * from 1AwxQ46kfmPoYoq38e5CopJOWkCo_9GUU_ucD6zI";
    $service->query->sql($selectQuery) 
```

*   或调用内部函数`refreshTokenWithAssertion()`以获取您的令牌：

```
 $client::$auth->refreshTokenWithAssertion();
    $token = $client->getAccessToken(); //this should work now 
```

对于[这两种](https://github.com/odi86/GFTPrototype/blob/master/services/OAuthToken.php) [情况](https://github.com/odi86/GFTPrototype/blob/master/examples/php/UpdateTable.php)，我的 GitHub 存储库中都有示例。

# c# - 为什么这个顺序操作没有被执行？

> ID：13506935
> 
> 赞同：0
> 
> 时间：2012-11-22T06:23:53.070
> 
> 标签：c#, backgroundworker

我正在[`this tutorial`](http://stuff.seans.com/2009/05/21/net-basics-do-work-in-background-thread-to-keep-gui-responsive/)讨论如何在后台执行一些工作，在这段代码中，我对为什么在调用方法`reading the file...`之前不显示消息感到困惑。`ReadTheFile(filename)`

```
private void btnSelect_Click(object sender, EventArgs e)
{
    OpenFileDialog ofd = new OpenFileDialog();
    ofd.CheckFileExists = true;
    ofd.CheckPathExists = true;

    if (ofd.ShowDialog() == DialogResult.OK)
    {
        lblResults.Text = " ... reading the file ...";
        FileReader1 fr = new FileReader1();
        int numLines = fr.ReadTheFile(ofd.FileName);

        lblResults.Text = string.Format("We read {0} lines", numLines.ToString());
    }
} 
```

作者通过以下方式解释它，但它并没有真正让我明白。

`Worse, even though we set the label’s Text property before we call ReadTheFile, the message loop doesn’t get a chance to process that change, and update the text, before we go out to lunch in ReadTheFile.`

这是什么意思？这可以用更简单的术语来解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:45:51.897

> 更糟糕的是，即使我们在调用 ReadTheFile 之前设置了标签的 Text 属性，消息循环也没有机会在我们去 ReadTheFile 吃午饭之前处理该更改并更新文本。

基本上你正在设置标签的文本。但是，您随后开始执行可能需要几秒钟、几分钟、几小时的“密集”任务。只要您继续加载文件并读取行数，窗口就不会更新。这就是在后台线程中执行此操作的重点。在后台线程处理文件时，让主线程继续绘制窗口并处理 UI 内容。

我将继续本教程。一旦你开始创建和运行后台工作程序的部分，你最终可能会得到其中一个“啊哈！” 时刻。=)

您可能也有兴趣阅读一般的线程。

[http://www.codeproject.com/Articles/26148/Beginners-Guide-to-Threading-in-NET-Part-1-of-n](http://www.codeproject.com/Articles/26148/Beginners-Guide-to-Threading-in-NET-Part-1-of-n)

[http://www.techrepublic.com/article/a-beginners-guide-to-threading-in-c/1044970](http://www.techrepublic.com/article/a-beginners-guide-to-threading-in-c/1044970)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:51:15.317

您可以阅读[Application.DoEvents Method](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.doevents.aspx)。

> 当您运行 Windows 窗体时，它会创建新窗体，然后等待事件处理。每次表单处理一个事件时，它都会处理与该事件相关的所有代码。所有其他事件都在队列中等待。当您的代码处理事件时，您的应用程序不会响应。例如，如果将另一个窗口拖到顶部，则该窗口不会重新绘制。

因此，在您`btnSelect_Click`完成之前，您的表单不会重新绘制。

* * *

我会编辑我的回答来评论，最好不要`DoEvents`明确使用，因为它可能会导致相当奇怪的程序行为。（基于 J.Skeet 的评论）。

[您也可以在 SO 上](https://stackoverflow.com/questions/5181777/use-of-application-doevents)阅读Use of Application.DoEvents() 以获取更多信息。该线程中发布了来自 MSDN 的摘录：

> 调用此方法会导致当前线程暂停，同时处理所有等待窗口消息。如果消息导致事件被触发，那么您的应用程序代码的其他区域可能会执行。这可能会导致您的应用程序出现难以调试的意外行为。如果您执行需要很长时间的操作或计算，通常最好在新线程上执行这些操作。

# java - Cassandra LongType 列名到字符串问题

> ID：13506938
> 
> 赞同：1
> 
> 时间：2012-11-22T06:24:02.707
> 
> 标签：java, cassandra, thrift

我正在使用 java 和 cassandra thrift 从具有比较器作为 LongType 的列族中获取行键。

这是我正在使用的代码：

```
for (ColumnOrSuperColumn column : slice) {
    Column col = column.getColumn();
    System.out.println("Column Name: " + new String(col.name.array()));
    System.out.println("Column Name: " + new String(col.name.array(), "UTF-8"));
    System.out.println("Column Name: " + new String(col.getName(), "UTF-8" ) );
} 
```

*slice*是一个*ColumnOrSuperColumn*对象的列表，其中包含从 ColumnFamily 检索到的数据。

问题是没有一个打印语句将长列名打印为字符串。我希望将这些长值作为字符串来创建 json 语句。我在这里错了什么？有没有其他方法可以获得预期的输出？

卡桑德拉版本：1.1.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:29:12.827

由于比较器是 LongType，所以 col.name.array() 的内容是 long（8 个字节），而不是字符串。

因此，您需要一种将 8 个字节转换为长字节的方法。由于 thrift 在下面使用 ByteBuffer，最简单的方法是使用：

```
System.out.println("Column name: " + col.name.getLong(0)); 
```

但请注意，这通常是为什么通常建议不要直接使用 thrift API，而是使用更高级别的客户端来正确反序列化类型的原因。

# c++ - 增强精神 std::vector 已解析但未捕获

> ID：13506940
> 
> 赞同：1
> 
> 时间：2012-11-22T06:24:06.057
> 
> 标签：c++, boost-spirit

我正在尝试将此字符串解析并捕获`"{ABC,HIJ}:{10,15,20}"`到`struct indicator_rec`.

解析成功，但是，只有第一组`{ABC,HIJ}`被捕获到该`std::vector<std::string>`字段中。

第二部分`{10,15,20}`被正确解析，但未能进入第二个字段`std::vector<unsigned>`。

我究竟做错了什么？

输出：

```
<equation>
  <try>{ABC,HIJ}:{10,15,20}</try>
  <indicator>
    <try>{ABC,HIJ}:{10,15,20}</try>
    <fail/>
  </indicator>
  <indicators>
    <try>{ABC,HIJ}:{10,15,20}</try>
    <indicator>
      <try>ABC,HIJ}:{10,15,20}</try>
      <success>,HIJ}:{10,15,20}</success>
      <attributes>[[A, B, C]]</attributes>
    </indicator>
    <indicator>
      <try>HIJ}:{10,15,20}</try>
      <success>}:{10,15,20}</success>
      <attributes>[[H, I, J]]</attributes>
    </indicator>
    <success>:{10,15,20}</success>
    <attributes>[[[A, B, C], [H, I, J]]]</attributes>
  </indicators>
  <parameters>
    <try>{10,15,20}</try>
    <parameter>
      <try>10,15,20}</try>
      <success>,15,20}</success>
      <attributes>[]</attributes>
    </parameter>
    <parameter>
      <try>15,20}</try>
      <success>,20}</success>
      <attributes>[]</attributes>
    </parameter>
    <parameter>
      <try>20}</try>
      <success>}</success>
      <attributes>[]</attributes>
    </parameter>
    <success></success>
    <attributes>[[]]</attributes>
  </parameters>
  <success></success>
  <attributes>[[[[A, B, C], [H, I, J]], []]]</attributes>
</equation> 
```

代码：

```
#define BOOST_SPIRIT_DEBUG
#include <boost/config/warning_disable.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix_core.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/spirit/include/phoenix_stl.hpp>
#include <boost/spirit/include/classic_symbols.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/fusion/include/io.hpp>

#include <boost/algorithm/string.hpp>
#include <boost/regex.hpp>   // std::regex not fully implemented in stdc++ yet

#include <string>
#include <map>
#include <utility>
#include <functional>

// -----------------------------------------------------------------------------
namespace client
{
    namespace qi      = boost::spirit::qi;
    namespace ascii   = boost::spirit::ascii;
  namespace spirit  = boost::spirit;
    namespace phoenix = boost::phoenix;

    // ---------------------------------------------------------------------------
    struct indicator_rec
    {
    public:
        indicator_rec() { }

        std::vector<std::string>  m_indicators;
        std::vector<unsigned>     m_parameters;
    };
}

BOOST_FUSION_ADAPT_STRUCT(
    client::indicator_rec,
    (std::vector<std::string>,  m_indicators)
    (std::vector<unsigned>,     m_parameters)
)

namespace client
{
    // ---------------------------------------------------------------------------
    template <typename Iterator>
    struct system_parser : 
        qi::grammar<Iterator, ascii::space_type, indicator_rec()>
    {
            system_parser() : 
                system_parser::base_type(equation)
            {
                    using qi::double_;
                    using qi::_val;
                    using qi::_1;
                    using boost::spirit::ascii::string;

                    equation %=
                            (indicator | indicators)                      
                            >> ':'
                            >> (parameters | parameter)
                            ;

                    indicator %= (string("ABC")|string("HIJ"))
                            ;

                    indicators %= '{' >> (indicator % ',') >> '}'
                            ;

                    parameter %= qi::uint_
                            ;

                    parameters %= '{' >> (parameter % ',') >> '}'
                            ;

                    BOOST_SPIRIT_DEBUG_NODE(equation);
                    BOOST_SPIRIT_DEBUG_NODE(parameter);
                    BOOST_SPIRIT_DEBUG_NODE(parameters);
                    BOOST_SPIRIT_DEBUG_NODE(indicator);
                    BOOST_SPIRIT_DEBUG_NODE(indicators);
            }

            qi::rule<Iterator, ascii::space_type, indicator_rec()>
                equation;

            qi::rule<Iterator, ascii::space_type, std::vector<std::string>()> 
                indicators;

            qi::rule<Iterator, ascii::space_type, std::string()> 
                designator, indicator;

            qi::rule<Iterator, ascii::space_type, unsigned> 
                parameter;

            qi::rule<Iterator, ascii::space_type, std::vector<unsigned>()> 
                parameters;
    };

    template <typename Iterator>
    bool parse_system( Iterator first, Iterator last, client::indicator_rec& rec )
    {
        system_parser<Iterator> parser;
        bool r = qi::phrase_parse( first, last, parser, ascii::space, rec );
        if (first != last) // fail if we did not get a full match
            return false;
        return r;
    }

    template <typename Iterator>
    bool parse_universe(Iterator first, Iterator last, std::vector<std::string>& v)
    {
        bool r = qi::phrase_parse(first, last,
                              //  Begin grammar -------------------------------------
                              (
                                                        (+(qi::alpha|qi::char_( "_" ))) >> ':' >> '{' >>
                                                            (+~qi::char_(",}")) % ','
                                                            >> '}'
                              )
                              ,
                              //  End grammar ---------------------------------------
                              ascii::space, v);

        if (first != last) // fail if we did not get a full match
            return false;
        return r;
    }
}

main( int argc, char* argv[] )
{
    std::string calculator( "{ABC,HIJ}:{10,15,20}" );
    client::indicator_rec rec;
    client::parse_system( calculator.begin(), calculator.end(), rec );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:33:23.430

昨天的[这个问题，差不多。](https://stackoverflow.com/questions/13472591/object-in-parameter-specification)每个规则的签名都需要使用这个函数声明符语法。括号之前的类型是从规则“返回”的属性（它的综合属性），里面的类型是继承的属性（你可以在[这里](http://www.boost.org/libs/spirit/doc/html/spirit/qi/tutorials/mini_xml___asts_.html)找到一个使用它们的简单示例）。

所以如果你不使用这些继承的属性，你必须`rule_attribute_type()`在你的规则声明中使用。理想情况下，如果不这样做会导致编译器错误，但显然由于[规则模板参数](http://www.boost.org/libs/spirit/doc/html/spirit/qi/reference/nonterminal/rule.html)的异质性，不幸的是，事实并非如此。

# iphone - 使用 ios 5 的 iphone 5 NIB

> ID：13506944
> 
> 赞同：1
> 
> 时间：2012-11-22T06:24:34.903
> 
> 标签：iphone, ios, ios5, iphone-5, autolayout

我刚开始使用 ios 6 自动布局，我不得不说我非常喜欢它们。也就是说，我正在开发一个需要同时支持 ios 5 和 iphone 5 的应用程序。不幸的是，如果我想支持 ios 5，我似乎不能使用自动布局。因此，我想知道什么最好的方法是支持 ios 5，同时又不会让你的布局在 iphone 5 上看起来很糟糕？

我可以看到一些可能的解决方案，但它们看起来都非常糟糕。

我可以做某种宏，在其中传递两个 nib 文件并根据操作系统选择一个？

根据操作系统，我可以使用加载的不同 nib 文件来执行多个构建目标。

我可以在整个应用程序中用自动调整大小的蒙版替换自动布局约束。

有没有人可以分享这个问题的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:44:54.067

如果你想离开你的自动布局，加载不同笔尖的第一个想法会更好。但是，您不应该使用宏，而应该在代码中使用简单的检查，因为宏检查不起作用，因为它仅在编译项目时执行一次。

另一方面，如果您支持旧 iOS 版本，建议使用自动调整大小的蒙版

# html - 在父 div 中间创建一个 div

> ID：13506949
> 
> 赞同：2
> 
> 时间：2012-11-22T06:24:56.130
> 
> 标签：html, css

我试图将 div 保持`#chat-inner`在 div 的中间`#chat-main`，我可以通过使用百分比值来做到这一点，但我的问题是应该存在`2px`百分比值无法提供的间隙（相对于宽度和高度）。为了清楚理解，请参阅 CSS 代码中的注释。

**[`JSbin`](http://jsbin.com/ofipey/2/edit)**

**HTML**

```
<div id="chat-outline">
  <div id="chat-main">
    <div id="chat-inner">
    </div>
  </div>
</div> 
```

**CSS**

```
#chat-outline
{background-color:grey;width:30%;height:40%;
 position:fixed;bottom:5px;right:5px;
 padding:2px;}

#chat-main
{
  width:100%;
  height:100%;
  background-color:silver;
  overflow:hidden;
}

#chat-inner
{
  width:95%;
  height:97%;

  /*How can I give pixels here? I need 2px value*/
  margin:2.5% 2.5% 2.5% 2.5%;  

  /*margin:2px;*/

  background-color:cornflowerblue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:31:41.163

尝试这样的事情（[演示](http://jsbin.com/ofipey/10/edit)）：

```
#chat-outline
{ background-color:grey;width:30%;height:40%;
  position:fixed;bottom:5px;right:5px;
padding:2px;}

#chat-main
{
  width:100%;
  height:100%;  
  background-color:silver;
  overflow:hidden;
  position:relative;
}

#chat-inner
{  
  top:2px;
  bottom:2px;
  right:2px;
  left:2px;  
  background-color:cornflowerblue;
  position:absolute;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:40:26.523

您还可以通过以下方式实现您想要的结果`padding`：-

```
#chat-outline
{background-color:grey;width:30%;height:40%;
  position:fixed;bottom:5px;right:5px;
padding:2px;}

#chat-main
{
  width:100%;
  height:100%;
  background-color:silver;
  overflow:hidden;
  padding:2px;
  -moz-box-sizing:border-box;
  box-sizing:border-box;
  -webkit-box-sizing:border-box;
}

#chat-inner
{
  width:100%;
  height:100%;
  background-color:cornflowerblue;
} 
```

**[演示](http://tinkerbin.com/UlfIBbdW)**

# visual-studio-2008 - Does SQL Server 2012 work with Visual Studio 2008 applications?

> ID：13506954
> 
> 赞同：3
> 
> 时间：2012-11-22T06:25:11.530
> 
> 标签：visual-studio-2008, sql-server-2012-express

Does SQL Server 2012 or SQL Server Express 2012 work with Visual Studio 2008 applications?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:46:45.943

As long as your "old" VS 2008 app doesn't use [any of the (few) deprecated features of SQL Server 2012](http://technet.microsoft.com/en-us/library/ms143729.aspx) - then yes - I don't see any reason why it shouldn't work.

The key is the use of ADO.NET - it's really more about which database access technology (and which version of the .NET framework) you're using - rather than what Visual Studio version your app was written in. To the app, it's just a server you connect to - using ADO.NET and a connection string - and then you fire off SQL queries against it.

ADO.NET is the preferred way to connect to SQL Server from any .NET application, and it should support **any** version of SQL Server - from 2000 through 2012 and any edition (Express, Web, Standard, Enterprise, DataCenter - you name it).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T11:53:26.827

Yes, absolutely vs2012 is compatible with sql server 2008

Here are other compatibility points :- Visual Studio 2012 is compatible with sql server 2008/ 2008 R2 Visual studio 2010 is compatible with sql server 2008 / 2005 Visual Studio 2008 is compatible with sql server 2005

# java - JFrame isResizable(false) 大小问题

> ID：13506955
> 
> 赞同：6
> 
> 时间：2012-11-22T06:25:17.403
> 
> 标签：java, swing, jframe, dimensions, preferredsize

我打算制作一个 ContentPanel 为 600x600 的 JFrame，并且我希望 JFrame 不能重新调整大小。在这个盒子里，我画了一个 600x600 的红色轮廓矩形，以确保在我运行程序时一切都匹配。在限制 JFrame 的大小调整之前，我通过执行以下操作来设置 JFrame 的大小：

```
getContentPane().setPreferredSize( new Dimension(600,600));
pack(); 
```

当我启动程序时，我的矩形边界与 JFrame 的尺寸完美契合。但是，当我将 isResizable(false) 添加到等式中时，矩形的右边缘和矩形的底边缘之间似乎存在像素缓冲区。通过一些试验和错误，似乎 isResizable(false) 在高度和宽度上增加了 10 个像素。（因此 contentPane 的尺寸为 590x590 + 额外的 10 是我的解决方法）

我的问题 为什么会这样？我似乎在任何地方都找不到关于额外 10 像素的任何文档？

注意：通过在不修改大小的情况下制作 JFrame 也观察到此异常。如果不使其不可调整大小，则没有可观察的面板/内容窗格，但是当使用 isResizable(false) 时，面板/窗格的可见部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T06:35:15.620

你是对的，将一个框架设置为 un-resiable 似乎确实为其高度和宽度增加了 10 个像素，至于为什么，我不能说，这似乎是更新本机对等体的副作用，但是......

`JFrame#pack`您可以在调用后通过调用重置它`JFrame#setResizable`

```
public class TestResizableFrame {

    public static void main(String[] args) {
        new TestResizableFrame();
    }

    public TestResizableFrame() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new FixedPane());
                frame.setResizable(false);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class FixedPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Dimension size = getSize();
            String text = size.width + "x" + size.height;
            FontMetrics fm = g.getFontMetrics();
            int x = (getWidth()- fm.stringWidth(text)) / 2;
            int y = ((getHeight() - fm.getHeight()) / 2) + fm.getAscent();
            g.drawString(text, x, y);
            g.setColor(Color.RED);
            g.drawRect(0, 0, getWidth() - 1, getHeight() - 1);
        }

    }

} 
```

# jquery - 在表格布局中检测 td 中的焦点

> ID：13506956
> 
> 赞同：0
> 
> 时间：2012-11-22T06:25:26.790
> 
> 标签：jquery, jquery-selectors

**如果在表中的任何td**上都没有找到焦点，则任务是采取行动。表格布局存储在**jquery 变量**中，其布局如下所示

```
<table class="cal_tbl" cellSpacing="1" cellPadding="3">  <tbody>
<tr>
  <td class="cal_head">&lt;&lt;</td>
  <td class="cal_head">&lt;</td>
  <td class="cal_head" colSpan="3">November 2012</td>
  <td class="cal_head">&gt;</td>
  <td class="cal_head">&gt;&gt;</td>
</tr>
<tr>
  <td class="cal_subhead">Sun</td>
  <td class="cal_subhead">Mon</td>
  <td class="cal_subhead">Tue</td>
  <td class="cal_subhead">Wed</td>
  <td class="cal_subhead">Thu</td>
  <td class="cal_subhead">Fri</td>
  <td class="cal_subhead">Sat</td>
</tr>
<tr>
  <td colSpan="4"></td>
  <td class="cal_cell">1</td>
  <td class="cal_cell">2</td>
  <td class="cal_cell">3</td>
</tr>
<tr>
  <td class="cal_cell">4</td>
  <td class="cal_cell">5</td>
  <td class="cal_cell">6</td>
  <td class="cal_cell">7</td>
  <td class="cal_cell">8</td>
  <td class="cal_cell">9</td>
  <td class="cal_cell">10</td>
</tr>
<tr>
  <td class="cal_cell">25</td>
  <td class="cal_cell">26</td>
  <td class="cal_cell">27</td>
  <td class="cal_cell">28</td>
  <td class="cal_cell">29</td>
  <td class="cal_cell">30</td>
</tr>  </tbody></table> 
```

我必须检查焦点是否在任何**td** 以下是我尝试过的代码

```
if ($(CurrentCalendarButton).children[i].is(":focus") == true)
     alert("Keep it on") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:01:46.440

问题是 DOM 上的所有非元素实际上都接受焦点，由浏览器决定哪些元素接受焦点。请参阅[哪些 HTML 元素可以接收焦点？](https://stackoverflow.com/questions/1599660/which-html-elements-can-receive-focus)

也许在您的**td**上有一个悬停事件：

```
var hasFocus = false;
$('td').hover(
    function () { hasFocus = true;  alert('has focus  !');},
    function () { hasFocus = false; alert('lost focus !');}
); 
```

# android-layout - 使用 Android 列表视图进行布局

> ID：13506959
> 
> 赞同：0
> 
> 时间：2012-11-22T06:25:36.513
> 
> 标签：android-layout

我的应用程序的主菜单显示 10 个选项，按 5 行排列。我使用了一个涉及两个列表视图的非常简单的布局，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ListView
        android:id="@+id/list1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:fadeScrollbars="true"
        android:divider="#00000000" />

    <ListView
        android:id="@+id/list2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:fadeScrollbars="true"
        android:divider="#00000000" />

</LinearLayout> 
```

我为手机使用了一种相当简单的行布局，而为平板电脑使用了一种更高级的行布局，这一切都非常好。但是当手机处于纵向模式时，两个列表视图开始滚动。这很好，除了它们独立滚动。如果它们同步滚动会更好。有什么想法可以实现这一目标吗？这不是一个交易破坏者，所以我正在寻找一个简单的解决方案，但我想不出一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:04:08.700

解决方案非常简单——我只使用一个网格视图而不是两个列表视图。任务完成。

# jquery - 带有knockoutjs的Jquery自动完成

> ID：13506967
> 
> 赞同：2
> 
> 时间：2012-11-22T06:26:27.230
> 
> 标签：jquery, knockout.js, jquery-autocomplete

我正在使用带有 knockoutjs 的 jquery 自动完成功能。它适用于键盘和鼠标点击事件。但我的问题是，当我输入任何不存在的名称时，它会在我的页面中显示该名称（存储在可观察变量中）。

这是我的javascript代码：

```
 //For autocomplete extender generating members
$(function () {
    $('.tags').autocomplete({

        //make ajax call to get all mentored member of logged member
        source: function (request, response) {
            $.ajax({
                url: "Members.aspx/GetAllMembers",
                data: "{ 'prefixText': '" + request.term + "' }",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    response(data.d);
                    self.memberOptions(data.d);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert('error occured while autocomplete');
                }
            });
        },
        minlength: 0,
        select: function (event, ui) {
            //get selected member name
            self.selectedMember(ui.item.actualValue ? ui.item.actualValue : ui.item.value ? ui.item.value : "");
            self.LoadAddress(self.choosenDateId(), self.selectedMember());
        }
    });
}); 
```

我的需要是，当我输入无效名称时，页面应显示登录用户的地址（存在于会话中）。即self.selectedMember（用户名）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:07:49.040

我在选择事件之后添加了下面的块并且它有效：

```
change: function (event, ui) {
            if (!ui.item) {
                //if invalid name selected, load goals of logged user
                self.selectedMember(userName)
                self.LoadAddress(self.choosenDateId(), self.selectedMember());
            }
        }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:25:03.507

您将本机 jQuery 代码与淘汰赛混合，不要这样做。KO 的重点是消除模型和视图之间的依赖关系。改用自动完成绑定

[如何创建一个自动完成的组合框？](https://stackoverflow.com/questions/7537002/autocomplete-combobox-with-knockout-js-template-jquery)

# javascript - 基于当前宽度使用jQuery定义背景元素

> ID：13506969
> 
> 赞同：1
> 
> 时间：2012-11-22T06:26:37.220
> 
> 标签：javascript, jquery, css, parallax, parallax.js

我需要在 jQuery 插件中为响应式视差背景图像及其位置实现多 if...else if...else 语句。

我到目前为止的代码是：

```
if ($thirdBG.hasClass("inview")){
  //call the newPos function and change the background position
  $thirdBG.css({'backgroundPosition': newPos(0, windowHeight, pos, 2550, 0)});
  //$secondBG.css({'backgroundPosition': newPos(50, windowHeight, pos, 1550, 0.3)});
  if (current_width < 960) {
    bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 6350, 0.2)});
  }
  else if (current_width < 768) {
    bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 6350, 0.2)});
  }
  else if (current_width < 480) {
    bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 6350, 0.2)});
  }
  else if (current_width < 320) {
    bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 6350, 0.2)});
  }
  else {
    bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 4910, 0.2)});
  }
  //bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 4910, 0.2)});
  //call the newPos function and change the second background position
} 
```

然而，这并不是我想要的。此代码定义宽度是否小于某个大小。我希望它说类似

```
if (current_width > 320 and < 480) {
  bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 6350, 0.2)});
} 
```

我想要的基本上是：

在位置 X 显示 bg3 以获取以下尺寸范围：

大于 320 小于等于 480 大于 480 小于等于 768 大于 768 小于等于 960 大于 960

不确定语法需要是什么。

有没有比我拥有的多个 if...else if...else 语句更有效的方法来编写该代码？

最后，我想知道如何在屏幕上回显当前的垂直滚动位置，这样我就可以知道图像的位置，而无需保存和重新加载页面 1000 次。

* * *

在此处添加完整的 nbw-parallax.js 插件代码：

```
/*
Demo: Despiration Tutorial Parallax Demo
Author: Elias Ghosn - Despiration.com
Author URL: http://www.despiration.com/
Tutorial URL: http://www.ianlunn.co.uk/blog/code-tutorials/recreate-nikebetterworld-parallax/

License: http://creativecommons.org/licenses/by-sa/3.0/ (Attribution Share Alike). Please attribute work to Despiration.com simply by leaving these comments in the source code or if you'd prefer, place a link on your website to http://www.despiration.com/.

Dual licensed under the MIT and GPL licenses:
http://www.opensource.org/licenses/mit-license.php
http://www.gnu.org/licenses/gpl.html
*/

$(document).ready(function() { //when the document is ready...
    var current_width = $(window).width();
     //do something with the width value here!
     //jQuery('nav').removeClass("is-sticky");
    if(current_width < 960){
      jQuery('nav').addClass("is-sticky");

    }
    $(".menusel").click(function () {   $(".mobico").fadeIn('slow');});
    $(".mobico a").click(function () {   $(".mobico").fadeOut('slow');});
    //save selectors as variables to increase performance
    var $window = $(window);
    var $firstBG = $('#intro');
    var bg1 = $("#intro .bg1");
    var $secondBG = $('#separator1');
    var bg2 = $("#separator1 .bg2");
    var $thirdBG = $('#separator2');
    var bg3 = $("#separator2 .bg3");
    var $fourthBG = $('#separator3');
    var bg4 = $("#separator3 .bg4");

    var windowHeight = $window.height(); //get the height of the window

    //apply the class "inview" to a section that is in the viewport
    $('#intro, #separator1, #separator2, #separator3').bind('inview', function (event, visible) {
            if (visible == true) {
            $(this).addClass("inview");
            } else {
            $(this).removeClass("inview");
            }
        });

    //function that places the navigation in the center of the window
    function RepositionNav(){
        var windowHeight = $window.height(); //get the height of the window
        var navHeight = $('#nav').height() / 2;
        var windowCenter = (windowHeight / 2);
        var newtop = windowCenter - navHeight;
        $('#nav').css({"top": newtop}); //set the new top position of the navigation list
    }

    //function that is called for every pixel the user scrolls. Determines the position of the background
    /*arguments:
        x = horizontal position of background
        windowHeight = height of the viewport
        pos = position of the scrollbar
        adjuster = adjust the position of the background
        inertia = how fast the background moves in relation to scrolling
    */
    function newPos(x, windowHeight, pos, adjuster, inertia){
        return x + "% " + (-((windowHeight + pos) - adjuster) * inertia)  + "px";
    }

    //function to be called whenever the window is scrolled or resized
    function Move(){
        var pos = $window.scrollTop(); //position of the scrollbar

        //if the first section is in view...
        if($firstBG.hasClass("inview")){
            //call the newPos function and change the background position
            $firstBG.css({'backgroundPosition': newPos(0, windowHeight, pos, 500, 0)});
            //call the newPos function and change the second background position
            bg1.css({'backgroundPosition': newPos(50, windowHeight, pos, 0, 0.2)});
        }

        //if the second section is in view...
        if($secondBG.hasClass("inview")){
            //call the newPos function and change the background position
            $secondBG.css({'backgroundPosition': newPos(0, windowHeight, pos, 1550, 0)});
            //$secondBG.css({'backgroundPosition': newPos(50, windowHeight, pos, 1550, 0.3)});
            bg2.css({'backgroundPosition': newPos(90, windowHeight, pos, 2610, 0.2)});
            //call the newPos function and change the second background position
        }

        if ($thirdBG.hasClass("inview")){
            //call the newPos function and change the background position
            $thirdBG.css({'backgroundPosition': newPos(0, windowHeight, pos, 2550, 0)});
            //$secondBG.css({'backgroundPosition': newPos(50, windowHeight, pos, 1550, 0.3)});
            if (current_width < 320) {
                bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 6350, 0.2)});
            }
            else if (current_width = 320 && < 480) {
                bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 6350, 0.2)});
            }
            else if (current_width = 480 && < 768) {
                bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 6350, 0.2)});
            }
            else if (current_width = 768 && < 960) {
                bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 6350, 0.2)});
            }
            else {
                bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 4910, 0.2)});
            }
            //bg3.css({'backgroundPosition': newPos(50, windowHeight, pos, 4910, 0.2)});
            //call the newPos function and change the second background position
        }

        if ($fourthBG.hasClass("inview")){
            //call the newPos function and change the background position
            $fourthBG.css({'backgroundPosition': newPos(0, windowHeight, pos, 5850, 0)});
            //$secondBG.css({'backgroundPosition': newPos(50, windowHeight, pos, 1550, 0.3)});
            //call the newPos function and change the second background position
            if (current_width < 320) {
                bg4.css({'backgroundPosition': newPos(50, windowHeight, pos, 8110, 0.2)});
            }
            else if (current_width = 320 && < 480) {
                bg4.css({'backgroundPosition': newPos(50, windowHeight, pos, 8110, 0.2)});
            }
            else if (current_width = 480 && < 768) {
                bg4.css({'backgroundPosition': newPos(50, windowHeight, pos, 8110, 0.2)});
            }
            else if (current_width = 768 && < 960) {
                bg4.css({'backgroundPosition': newPos(50, windowHeight, pos, 8110, 0.2)});
            }
            else {
                bg4.css({'backgroundPosition': newPos(50, windowHeight, pos, 6110, 0.20)});
            }
        //bg4.css({'backgroundPosition': newPos(50, windowHeight, pos, 6110, 0.20)});
        }

        $('#pixels').html(pos); //display the number of pixels scrolled at the bottom of the page
    }

    RepositionNav(); //Reposition the Navigation to center it in the window when the script loads

    $window.resize(function(){ //if the user resizes the window...
    var current_width = $(window).width();
     //do something with the width value here!
    // jQuery('nav').removeClass("is-sticky");
    if(current_width < 960){
      jQuery('nav').addClass("is-sticky");

    }
        Move(); //move the background images in relation to the movement of the scrollbar
        RepositionNav(); //reposition the navigation list so it remains vertically central
    });

    $window.bind('scroll', function(){ //when the user is scrolling...
        Move(); //move the background images in relation to the movement of the scrollbar
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:15:38.243

关于声明的第一件事`if`：你可以写：

```
if( width < someval ){
    .
    .
} else if( width > someotherval && width < sometotalotherval ){

} else {

} 
```

所以使用`&&`or`||`运算符。

我不知道您所说的“回显并保存 100 次”是什么意思。

问候...

**编辑：**

为了这个评论片段：

> 我需要知道的是 div 在浏览器窗口中以不同宽度开始和结束的位置（不仅是前面的 div，还有后面的 bg div。

看看：

`<element>.getBoundingClientRect()`

方法。它返回四个值：任意 html 元素的顶部、左侧、右侧和底部，它们的原点是**屏幕**的左上角。因此，如果一个元素不可见，因为它位于顶部并且文档向下滚动，则顶部值为负数，如果底部值也是负数，则您知道该元素完全不可见。使用此方法，您可以轻松获取 div 的开头和结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:14:28.770

如果您首先使用最低值颠倒您的语句顺序，您将不会遇到相同的重叠问题。只有一个条件为真

```
if( current_width < 320 ){

}else if( current_width < 480){
  /* true when greater or equal to 320 and less than 480 */
}

/* etc*/ 
```

# javascript - 使用 JavaScript 从 XML 文件中获取值

> ID：13506970
> 
> 赞同：0
> 
> 时间：2012-11-22T06:26:42.830
> 
> 标签：javascript, xml

我在从 XML 文件中获取节点值时遇到了一些问题

我的 XML 如下所示：

```
<item>
   <item1><Description>test</Description></item1>
   <item2><Description>test2</Description></item2>
   <item3><Description>test3</Description></item3>
</item> 
```

我正在尝试从 Item2 > Description 中获取“test2”。

我能够在警报消息框中显示 xml 文件，但似乎无法获得我正在寻找的值。

我正在尝试在 JavaScript 中执行此操作，到目前为止，我提出了以下建议：

```
function get_item()
{
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }

      xmlhttp.onreadystatechange=function()
       {

       if (xmlhttp.status==200)
         {
         //alert(xmlhttp.responseText);
          xmlDoc = xmlhttp.responseText;

            var item = xmlDoc.getElementsByTagName("Description")[0]; 
                item = item.childNodes.length ? item.childNodes[0].nodeValue : "" ;

             alert(item)

         } else
         {
         alert('Panel not communicating.Reason: '+xmlhttp.status);
         }
       }

    xmlhttp.open("POST","http://192.168.0.5/xml_file.xml",false);

    xmlhttp.send();
} 
```

如果我删除：

```
var item = xmlDoc.getElementsByTagName("Description")[0]; 
                    item = item.childNodes.length ? item.childNodes[0].nodeValue : "" ; 
```

并将警报更改为：

```
alert(xmlDoc) 
```

它会提醒我的 XML 文件，所以我知道它正在读取我的 xml 文件但无法获取值。

我做错了什么还是有更好的方法来获得这个价值？

（我不想为此使用 jQuery）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:32:46.487

使用`xmlhttp.responseXML`而不是`xmlhttp.responseText`，我认为旧版本的 IE 可能存在一些问题，在这种情况下您可以尝试

```
xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
xmlDoc.async=false;
xmlDoc.loadXML(xmlhttp.responseText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:37:05.420

此函数可用于解析 XML 并使用此链接 (http://www.hiteshagrawal.com/javascript/javascript-parsing-xml-in-javascript)。

```
 function readXML()
    {
       if(xmlDoc.readyState == 4)
       {
        //Using documentElement Properties
        //Output company
        alert("XML Root Tag Name: " + xmlDoc.documentElement.tagName);

        //Using firstChild Properties
        //Output year
        alert("First Child: " + xmlDoc.documentElement.childNodes[1].firstChild.tagName);

    //Using lastChild Properties
    //Output average
    alert("Last Child: " + xmlDoc.documentElement.childNodes[1].lastChild.tagName);

    //Using nodeValue and Attributes Properties
    //Here both the statement will return you the same result
    //Output 001
    alert("Node Value: " + xmlDoc.documentElement.childNodes[0].attributes[0].nodeValue);
    alert("Node Value: " + xmlDoc.documentElement.childNodes[0].attributes.getNamedItem("id").nodeValue);

    //Using getElementByTagName Properties
    //Here both the statement will return you the same result
    //Output 2000
    alert("getElementsByTagName: " + xmlDoc.getElementsByTagName("year")[0].attributes.getNamedItem("id").nodeValue);

    //Using text Properties
    //Output John
    alert("Text Content for Employee Tag: " + xmlDoc.documentElement.childNodes[0].text);

    //Using hasChildNodes Properties
    //Output True
    alert("Checking Child Nodes: " + xmlDoc.documentElement.childNodes[0].hasChildNodes);
} 
```

# rest - 怎样才能学会使用 twitter API？

> ID：13506972
> 
> 赞同：0
> 
> 时间：2012-11-22T06:26:48.743
> 
> 标签：rest, twitter

好的，在您下结论之前，例如我正在寻找免费午餐或类似的东西，请完整阅读说明。

我只有在 PHP、Java 和 ASP.NET 中制作小型简单应用程序的经验。我不知道 GET、SET 等**到底**是什么以及 REST 服务是什么。为了尝试使用 Twitter API，我做了一些阅读并知道（我可能在这里错了，因为这是我认为我知道的......）你可以发出这样的 GET 请求： [http:// api.twitter.com/1/statuses/user_timeline.json](http://api.twitter.com/1/statuses/user_timeline.json)

使用，比如说，cURL（我还没有尝试过），你会得到一个返回的 JSON 对象，其中包含特定格式的时间轴上的状态。我从[这里验证了这一点](https://dev.twitter.com/console)

但我不明白 Twitter 是如何知道它是我并且只返回我的数据？我在哪里发送我的帐户详细信息？

我想要的是用户访问我的网站，单击一个按钮以授予我的应用程序访问他/她的推文的权限，然后我在 PHP 中进行一些处理并显示输出。但我不知道我从哪里开始？

我不是要你给我面包，我是要你告诉我我应该怎么做才能学会钓鱼？

到目前为止，我一直在关注的所有教程都是一种勺子喂食，他们会说“从我们的网站下载这个 php 文件，将它包含在你的源文件中，使用这个方法来做这个，那个方法来做那个。”

这对我来说是一个变化，所以有人有任何指示吗？有没有我应该做的阅读或必须遵循的方法来了解我做错了？

编辑：我知道那里有 3rd 方库，学习使用它们可能更容易，但我想知道制作这些库的人是如何做到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:01:40.683

要使用 Twitter（至少它的 REST API），您最好阅读有关以下内容的教程：

*   **REST**架构，因为它是 Twitter 与您的应用程序通信的方式。
*   **HTTP 请求**。对请求的身份验证（HTTP 标头）、HTTP 请求的种类（Twitter API 的 GET 和 POST）和请求的返回代码很有用。
*   **OAuth**是 Twitter 用于验证请求的协议。
*   Twitter 请求后返回的数据格式。大多数时候它是**JSON**，但它也可以像在 URL 查询字符串中（用于 OAuth 身份验证）。您很幸运，因为之前也有 XML 和 Atom（用于 RSS 提要）。
*   当然还有**Twitter 文档**，以了解他们如何使用所有这些东西，他们如何知道您使用此应用程序（请求身份验证）以及了解 API 操作的对象（主要是推文、用户和时间线）。

祝你好运！

# php - PHP从多维数组创建多个表

> ID：13506974
> 
> 赞同：3
> 
> 时间：2012-11-22T06:27:04.560
> 
> 标签：php, arrays, multidimensional-array

我有这样的数组：

```
{"seats":[{"column":"8","fare":"995.0","name":"U10 UB","row":"0","zIndex":"1"},
{"column":"8","fare":"995.0","name":"U9 UB","row":"1","zIndex":"1"},
{"column":"8","fare":"995.0","name":"L10 LB","row":"0","zIndex":"0"},
{"column":"8","fare":"995.0","name":"L9 LB","row":"1","zIndex":"0"},
{"column":"8","fare":"995.0","name":"SL5 LB","row":"3","zIndex":"0"},
{"column":"8","fare":"995.0","name":"SU5 UB","row":"3","zIndex":"1"},
{"column":"6","fare":"995.0","name":"U8 UB","row":"0","zIndex":"1"},
{"column":"6","fare":"995.0","name":"U7 UB","row":"1","zIndex":"1"},
{"column":"6","fare":"995.0","name":"L8 LB","row":"0","zIndex":"0"},
{"column":"6","fare":"995.0","name":"L7 LB","row":"1","zIndex":"0"},
{"column":"6","fare":"995.0","name":"SL4 LB","row":"3","zIndex":"0"},
{"column":"6","fare":"995.0","name":"SU4 UB","row":"3","zIndex":"1"},
{"column":"4","fare":"995.0","name":"U6 UB","row":"0","zIndex":"1"},
{"column":"4","fare":"995.0","name":"U5 UB","row":"1","zIndex":"1"},
{"column":"4","fare":"995.0","name":"L6 LB","row":"0","zIndex":"0"},
{"column":"4","fare":"995.0","name":"L5 LB","row":"1","zIndex":"0"},
{"column":"4","fare":"995.0","name":"SL3 LB","row":"3","zIndex":"0"},
{"column":"4","fare":"995.0","name":"SU3 UB","row":"3","zIndex":"1"},
{"available":"false","column":"2","fare":"995.0","name":"U4 UB","row":"0","zIndex":"1"},
{"available":"false","column":"2","fare":"995.0","name":"U3 UB","row":"1","zIndex":"1"},
{"available":"false","column":"2","fare":"995.0","name":"L4 LB","row":"0","zIndex":"0"},
{"available":"false","column":"2","fare":"995.0","name":"L3 LB","row":"1","zIndex":"0"},
{"available":"false","column":"2","fare":"995.0","name":"SL2 LB","row":"3","zIndex":"0"},
{"available":"false","column":"2","fare":"995.0","name":"SU2 UB","row":"3","zIndex":"1"},
{"available":"false","column":"0","fare":"995.0","name":"U2 UB","row":"0","zIndex":"1"},
{"available":"false","column":"0","fare":"995.0","name":"U1 UB","row":"1","zIndex":"1"},
{"available":"false","column":"0","fare":"995.0","name":"L2 LB","row":"0","zIndex":"0"},
{"available":"false","column":"0","fare":"995.0","name":"L1 LB","row":"1","zIndex":"0"},
{"available":"false","column":"0","fare":"995.0","name":"SL1 LB","row":"3","zIndex":"0"},
{"available":"false","column":"0","fare":"995.0","name":"SU1 UB","row":"3","zIndex":"1"}]} 
```

* * *

```
Array (
      [0] => Array (
        [0] => Array (
            [1] => stdClass Object (
                [column] => 0
                [name] => U2 UB
                [row] => 0
                [zIndex] => 1
              )
            [0] => stdClass Object (
                [column] => 0
                [name] => L2 LB
                [row] => 0
                [zIndex] => 0
              )
          )
        [8] => Array (
            [1] => stdClass Object (
                [column] => 8
                [name] => U10 UB
                [row] => 0
                [zIndex] => 1
              )
            [0] => stdClass Object (
                [column] => 8
                [name] => L10 LB
                [row] => 0
                [zIndex] => 0
              )
          )
        [6] => Array (
            [1] => stdClass Object (
                [column] => 6
                [name] => U8 UB
                [row] => 0
                [zIndex] => 1
              )
            [0] => stdClass Object (
                [column] => 6
                [name] => L8 LB
                [row] => 0
                [zIndex] => 0
              )
          )
        [4] => Array (
            [1] => stdClass Object (
                [column] => 4
                [name] => U6 UB
                [row] => 0
                [zIndex] => 1
              )
            [0] => stdClass Object (
                [column] => 4
                [name] => L6 LB
                [row] => 0
                [zIndex] => 0
              )
          )
        [2] => Array (
            [1] => stdClass Object (
                [column] => 2
                [name] => U4 UB
                [row] => 0
                [zIndex] => 1
              )
            [0] => stdClass Object (
                [column] => 2
                [name] => L4 LB
                [row] => 0
                [zIndex] => 0
              )
          )
      )
      [1] => Array (
        [0] => Array (
            [0] => stdClass Object (
                [column] => 0
                [name] => L1 LB
                [row] => 1
                [zIndex] => 0
              )
            [1] => stdClass Object (
                [column] => 0
                [name] => U1 UB
                [row] => 1
                [zIndex] => 1
              )
          )
        [8] => Array (
            [1] => stdClass Object (
                [column] => 8
                [name] => U9 UB
                [row] => 1
                [zIndex] => 1
              )
            [0] => stdClass Object (
                [column] => 8
                [name] => L9 LB
                [row] => 1
                [zIndex] => 0
              )
          )
        [6] => Array (
            [1] => stdClass Object (
                [column] => 6
                [name] => U7 UB
                [row] => 1
                [zIndex] => 1
              )
            [0] => stdClass Object (
                [column] => 6
                [name] => L7 LB
                [row] => 1
                [zIndex] => 0
              )
          )
        [4] => Array (
            [1] => stdClass Object (
                [column] => 4
                [name] => U5 UB
                [row] => 1
                [zIndex] => 1
              )
            [0] => stdClass Object (
                [column] => 4
                [name] => L5 LB
                [row] => 1
                [zIndex] => 0
              )
          )
        [2] => Array (
            [1] => stdClass Object (
                [column] => 2
                [name] => U3 UB
                [row] => 1
                [zIndex] => 1
              )
            [0] => stdClass Object (
                [column] => 2
                [name] => L3 LB
                [row] => 1
                [zIndex] => 0
              )
          )
      )
      [3] => Array (
        [8] => Array (
            [0] => stdClass Object (
                [column] => 8
                [name] => SL5 LB
                [row] => 3
                [zIndex] => 0
              )
            [1] => stdClass Object (
                [column] => 8
                [name] => SU5 UB
                [row] => 3
                [zIndex] => 1
              )
          )
        [6] => Array (
            [0] => stdClass Object (
                [column] => 6
                [name] => SL4 LB
                [row] => 3
                [zIndex] => 0
              )
            [1] => stdClass Object (
                [column] => 6
                [name] => SU4 UB
                [row] => 3
                [zIndex] => 1
              )
          )
        [4] => Array (
            [0] => stdClass Object (
                [column] => 4
                [name] => SL3 LB
                [row] => 3
                [zIndex] => 0
              )
            [1] => stdClass Object (
                [column] => 4
                [name] => SU3 UB
                [row] => 3
                [zIndex] => 1
              )
          )
        [2] => Array (
            [0] => stdClass Object (
                [column] => 2
                [name] => SL2 LB
                [row] => 3
                [zIndex] => 0
              )
            [1] => stdClass Object (
                [column] => 2
                [name] => SU2 UB
                [row] => 3
                [zIndex] => 1
              )
          )
        [0] => Array (
            [0] => stdClass Object (
                [column] => 0
                [name] => SL1 LB
                [row] => 3
                [zIndex] => 0
              )
            [1] => stdClass Object (
                [column] => 0
                [name] => SU1 UB
                [row] => 3
                [zIndex] => 1
              )
          )
      )
    ) 
```

我尝试从上面的数组创建两个表并得到结果：

```
L2 LB 
U2 UB 
L4 LB 
U4 UB 
L6 LB 
U6 UB 
L8 LB 
U8 UB 
L10 LB 
U10 UB 
L1 LB 
U1 UB 
L3 LB 
U3 UB 
L5 LB 
U5 UB 
L7 LB 
U7 UB 
L9 LB 
U9 UB 
SL1 LB 
SU1 UB 
SL2 LB 
SU2 UB 
SL3 LB 
SU3 UB 
SL4 LB 
SU4 UB 
SL5 LB 
SU5 UB

```

我试过这个>>>>

```
foreach ($output_sub1 as $output_sub11) {
         ksort($output_sub11);
         echo '<table border="1">'; 
        foreach ($output_sub11 as $output_sub12) {
          echo '<tr>';
         //print_r($output_sub12);  
         ksort($output_sub12);        

        foreach($output_sub12 as $row_sub1 => $columns_sub1) {
             echo '<td>';
                echo  $columns_sub1->name."<br>";                 
             echo '</td>';    
                }
        echo '</tr>';
            }
        echo '</table>';
    } 
```

但是我想要的结果应该是这样的>>>

**表格1 ：**

```
3U UB |6U UB |9U UB |12U UB |15U UB |18U UB | 
2U UB |5U UB |8U UB |11U UB |14U UB |17U UB | 
1U UB |4U UB |7U UB |10U UB |13U UB |16U UB |
```

**表#2：**

```
3L磅|6L磅|9L磅|12L磅|15L磅|18L磅| 
2L磅|5L磅|8L磅|11L磅|14L磅|17L磅| 
1L磅|4L磅|7L磅|10L磅|13L磅|16L磅|
```

谁能说我如何遍历循环来创建像上表一样？
注意：数组包含 zIndex 值 0 和 1。因此所有 zIndex 值 0 应归为表 #1，所有 zIndex 值 1 应归为表 #2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:25:09.327

我已经在这里发布了代码..

[http://jaiphp.blogspot.in/](http://jaiphp.blogspot.in/)

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:37:44.073

试试这个，

```
$json_string = "CONTAINS THE JSON OUTPUT"           
            $allseats = json_decode($json_string);
            $table1 = array();
            //print_r($allseats);exit;
            foreach ($allseats->seats as $seats) {
            //    print_r($seats); 
            if($seats->zIndex == 1) {
                $table1[] = $seats; 
            } else {
                $table2[] = $seats; 
            }
            }

            foreach ($table1 as $data) {
            $datarow[$data->row][$data->column] = $data->name;
            }

            foreach ($table2 as $data2) {
            $datarow2[$data2->row][$data2->column] = $data2->name;
            }
            echo "<table border=1>";
            foreach ($datarow as $row) {
            echo "<tr>";
                            //Please change the "i" value as per your requirement
            for($i=0;$i<20;$i++) {
                if (isset($row[$i])) {
                echo "<td>";
                echo $row[$i];
                echo "</td>";
                }
            }
            echo "</tr>";
            }
            echo "</table>";

            echo "<table border=1>";
            foreach ($datarow2 as $row2) {
            echo "<tr>";
            for($i=0;$i<20;$i++) {
                if (isset($row2[$i])) {
                echo "<td>";
                echo $row2[$i];
                echo "</td>";
                }
            }
            echo "</tr>";
            }
            echo "</table>"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T06:37:31.880

您粘贴了数组的转储，我无法在我的 PC 中尝试使用它。使用 'echo json_encode($array);' 并粘贴

# c# - 使用c#将excel数据转换为日期时间

> ID：13506981
> 
> 赞同：1
> 
> 时间：2012-11-22T06:27:36.470
> 
> 标签：c#, excel

我是 C# 新手，我有一个 C# 程序和一个从另一个程序导出的 excel 文件。如何将其转换为日期时间？这是代码，其中`dtFrom`和`dtTo`是`DateTimePicker`变量：

```
System.Data.DataTable dtExcel = new System.Data.DataTable();
dtExcel.TableName = "MyExcelData";
string SourceConstr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source='" +        this.textBox1.Text + "';Extended Properties= 'Excel 8.0;HDR=Yes;IMEX=1'";
OleDbConnection con = new OleDbConnection(SourceConstr);
string query = "Select Customer, SUM(Wt) AS Weight from [Sheet0$] WHERE (CONVERT(datetime, [Date]) >= " + this.dtFrom.Value.Month + ") GROUP BY Customer order by Customer"; 
OleDbDataAdapter data = new OleDbDataAdapter(query, con);
data.Fill(dtExcel); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:11:01.243

我认为这可能不是您唯一的问题，但要回答您的问题，如果您更换

```
string query = "Select Customer, SUM(Wt) AS Weight from [Sheet0$] WHERE (CONVERT(datetime, [Date]) >= " + this.dtFrom.Value.Month + ") GROUP BY Customer order by Customer"; 
OleDbDataAdapter data = new OleDbDataAdapter(query, con); 
```

和

```
string query = "Select Customer, SUM(Wt) AS Weight from [Sheet0$] WHERE (CONVERT(datetime, [Date]) >= @Date) GROUP BY Customer order by Customer"; 
OleDbCommand command = new OleDbCommand(query);
command.Parameters.Add("@Date", OleDbType.DBTimeStamp).Value = this.dtFrom.Value;
OleDbDataAdapter data = new OleDbDataAdapter(command, con); 
```

你可能会走在正确的轨道上。不能 100% 确定`OleDbType`您需要哪个，但您可以很容易地看到可用的选项。

# objective-c - 在 nsmutabledictionary 中为节点设置值，其中包含数组

> ID：13506984
> 
> 赞同：1
> 
> 时间：2012-11-22T06:27:46.440
> 
> 标签：objective-c, ios, ios6

这是json格式的数据结构

```
{
 "12122012":[
   {"date":12/12/2012 10:45, checked:YES},  
   {date:12/12/2012 11:45, checked:NO},
   {date:12/12/2012 12:45, checked:YES},
   {date:12/12/2012 13:45 , checked:YES}
 12112012:[
   {date:12/11/2012 10:45, checked:YES},  
   {date:12/11/2012 11:45, checked:NO},
   {date:12/11/2012 12:45, checked:YES},
   {date:12/11/2012 13:45 , checked:YES}]
} 
```

我们必须将 12112012:[0].checked =NO 的检查值更改为 NO 这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:39:17.697

为此，您应该在 NSMutableDictionary 中有 NSMutableArrays。

# delphi - 如何使文件真正隐藏在目录中？

> ID：13506986
> 
> 赞同：4
> 
> 时间：2012-11-22T06:27:53.257
> 
> 标签：delphi, operating-system, delphi-xe2, hidden-files

我昨天下载了一个程序，它是用于加密和安全的。除非有人要求，否则我不会在这里命名它，但它具有使指定文件夹中的文件完全不可见的功能。

我有隐藏文件和文件夹 - 已选择并隐藏受保护的操作系统文件 - 未选择但文件已完全从视图中消失，也不会出现在搜索中。我将文件夹从 VMware Workstation 复制到我的主机上，但文件仍然是超级隐藏的！根据 Windows，文件夹中的文件为零。

这个巫毒魔法怎么可能？我想在我自己的加密程序中使用 Delphi 来模拟这个。我在这里和通过谷歌没有找到任何方法来暗示它是如何可能的，但实际的程序帮助文件说它们仍在文件夹中，但没有注册大多数处理文件的普通 Windows 软件。

这是我无法提供任何代码来显示我尝试过的内容的问题之一，而是对我可以尝试的建议持开放态度，或者这里的某个人可能确切地知道它是如何完成的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T06:48:22.973

由于信息较少，一种可能性是在 NTFS 上使用替代文件流，可以将其添加到文件和文件夹中。您可以通过在命令行中键入“notepad C:\temp:hidden1.txt”来尝试此操作，如果您选择“是”，则将创建新的文件流。保存后，您可以以完全相同的方式重新打开它。这也可以从 delphi 完成（加载/保存）。仅在使用 NTFS 时才有效。我不知道在描述的情况下是否使用了这种方法，找到 ADS 可以使用以下代码完成：

```
unit u_ListADS;

// 20120928 by Thomas Wassermann
// www.devworx.de
interface

uses
  Windows, Messages, SysUtils, Variants, Classes, StrUtils;

 Procedure GetADS(List: TStrings; const Path, WildCard: String; Recursiv: Boolean = false);

function NtQueryInformationFile(FileHandle: Cardinal; IoStatusBlock: Pointer; FileInformation: Pointer; FileInformationLength: Cardinal;
  FileInformationClass: Cardinal): Cardinal; stdcall; external 'ntdll.dll';

implementation

type
  _FILE_STREAM_INFORMATION = record
    NextEntryOffset: Cardinal;
    StreamNameLength: Cardinal;
    StreamSize: int64;
    StreamAllocationSize: int64;
    StreamName: array [0 .. MAX_PATH] of WideChar;
  end;

  PFILE_STREAM_INFORMATION = ^_FILE_STREAM_INFORMATION;

function GetStreams(aFilename: String): TStringList;
var
  FileHandle: Integer;
  FileName: array [0 .. MAX_PATH] of WideChar;
  StreamName: String;
  InfoBlock: _FILE_STREAM_INFORMATION;
  StatusBlock: record Status: Cardinal;
                      Information: PDWORD;
               end;

  Procedure Analyze;
    begin
      CopyMemory(@FileName, @InfoBlock.StreamName, InfoBlock.StreamNameLength);
      StreamName := Copy(Filename, 1, PosEx(':', Filename, 2) - 1);
      if StreamName <> ':' then Result.Add(StreamName);
    end;
begin
  Result := TStringList.Create;
  FileHandle := FileOpen(aFilename, GENERIC_READ);
  NtQueryInformationFile(FileHandle, @StatusBlock, @InfoBlock, SizeOf(InfoBlock), 22);
  FileClose(FileHandle);
  if InfoBlock.StreamNameLength <> 0 then
    Repeat

      if (InfoBlock.NextEntryOffset <> 0) then
        begin
        InfoBlock := PFILE_STREAM_INFORMATION(PByte(@InfoBlock) + InfoBlock.NextEntryOffset)^;
        Analyze;
        end;
    until InfoBlock.NextEntryOffset = 0
end;

Procedure GetADS(List: TStrings; const Path, WildCard: String; Recursiv: Boolean = false);
  Var
    SR: SysUtils.TSearchRec;
    RES: Integer;
    SP: String;
    StreamList: TStringList;
    i: Integer;
  begin
    if length(Path) = 0 then
      exit;
    if length(WildCard) = 0 then
      exit;
    SP := IncludeTrailingBackSlash(Path) + WildCard;
    RES := FindFirst(IncludeTrailingBackSlash(Path) + '*.*', faDirectory, SR);
    While RES = 0 Do
    Begin
      If (SR.attr And faDirectory) <> 0 Then
        If SR.Name[1] <> '.' Then
          if Recursiv then
            GetADS(List, IncludeTrailingBackSlash(Path) + SR.Name, WildCard, Recursiv);
      RES := FindNext(SR);
    End;
    SysUtils.FindClose(SR);
    RES := FindFirst(SP, $27, SR);
    While RES = 0 Do
    Begin
      StreamList := GetStreams(IncludeTrailingBackSlash(Path) + SR.Name);
      for i := 0 to StreamList.Count - 1 do
        List.Add(IncludeTrailingBackSlash(Path) + SR.Name + StreamList[i]);
      StreamList.Free;
      RES := FindNext(SR);
    End;
    SysUtils.FindClose(SR);
  end;

end. 
```

呼叫可能是例如

```
 GetADS(Listbox1.Items,Directory.Text, WildCards.Text,rekursiv.checked); 
```

# sockets - 在本地主机上发送邮件时无法打开套接字

> ID：13506987
> 
> 赞同：3
> 
> 时间：2012-11-22T06:27:54.577
> 
> 标签：sockets, zend-framework, email, xampp, localhost

嗨，我在我的本地 PC 上使用 zend 框架来完成我的一个项目。为此，我在 Windows 上使用 xampp。我有这种错误：

异常信息：

消息：无法打开套接字

堆栈跟踪：

# 0 C:\xampp\htdocs\library\Zend\Mail\Protocol\Smtp.php(167): Zend_Mail_Protocol_Abstract->_connect('ssl://smtp.gmai...')

# 1 C:\xampp\htdocs\library\Zend\Mail\Transport\Smtp.php(199): Zend_Mail_Protocol_Smtp->connect()

# 2 C:\xampp\htdocs\library\Zend\Mail\Transport\Abstract.php(348): Zend_Mail_Transport_Smtp->_sendMail()

# 3 C:\xampp\htdocs\library\Zend\Mail.php(1194): Zend_Mail_Transport_Abstract->send(对象(Zend_Mail))

smtp 细节很好，因为它可以在其他本地电脑上运行。

请帮我。

谢谢

# java-me - 如何在 J2ME 中将 DateTime 值转换为文件名

> ID：13506991
> 
> 赞同：1
> 
> 时间：2012-11-22T06:28:16.347
> 
> 标签：java-me, midp, lcdui, java-micro-editon-sdk3.0

我正在使用 J2ME 做一个 Java 移动程序。

我想将日期时间字段值保存到 Mysql 中，我正在尝试将 datetime 字段转换为 long 并尽可能将其保存在 Mysql 中。

在执行它的 c# ToFileTime() 方法中，J2ME 中有类似的东西吗？

```
 public DateField getDateField() {
        if (dateField == null) {
            // write pre-init user code here
            dateField = new DateField("dateField", DateField.DATE_TIME);
            dateField.setDate(new java.util.Date(System.currentTimeMillis()));
            // write post-init user code here
            long myFileTime = dateField.
        }
        return dateField;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:34:47.090

您需要更正 2 行

```
//no need to pass system current time. new Date() creates current time date
 dateField.setDate(new java.util.Date());

// gettime returns time in millis
long myFileTime = dateField.getDate().getTime(); 
```

# windows - 用于创建多个文件夹和子文件夹的批处理文件

> ID：13506993
> 
> 赞同：2
> 
> 时间：2012-11-22T06:28:25.417
> 
> 标签：windows, batch-file, command-line

需要帮忙：

我们想在 DOS 中创建一个批处理文件（在命令提示符下运行），它将创建 50 个文件夹（例如，文件夹 1、文件夹 2、文件夹 3 等），并在每个文件夹中创建子文件夹（filesin、filesout）。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T06:47:55.880

```
for /L %%g in (1,1,50) do (
    md folder%%g
    md folder%%g\filesin
    md folder%%g\filesout
) 
```

# c# - 将现有项目添加到解决方案的效果

> ID：13506997
> 
> 赞同：1
> 
> 时间：2012-11-22T06:28:38.187
> 
> 标签：c#, visual-studio

我有两个解决方案。假设**Sol1**和**Sol2**。
现在我想将 Sol1 的项目添加到 Sol2。Sol2 没有修改该项目。
这样做有什么害处。这会以任何方式影响**Sol1吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:34:41.617

如果您通过选择“**添加现有项目**”并从第一个解决方案中选择项目来执行此操作，则（该项目的）源代码库对于两个解决方案都是相同的。因此，一个项目的变化肯定会影响另一个项目。

如果不想影响其他项目。获取该项目的副本并将其用于添加不同的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:40:43.127

[构建中断] 因为 Sol2 正在使用 Sol1 中的项目，并且可能正在引用它的类。在后期，如果有人从 sol1 更改了项目代码，则 sol2 将不再构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T08:00:25.993

*哦...这是大多数开发人员常犯的错误。它对您的解决方案 1 和解决方案 2 都产生了不利影响。*

由于项目是指相同的物理位置，如果您使用现有项目选项添加，因此每当它发生更改时，都会在其他解决方案中提示源更改消息。

> 因此，始终将您的项目复制到其他物理位置，而不是使用现有项目选项添加，它会让您的生活变得更酷。

# android - Android 当前日期和时间

> ID：13506999
> 
> 赞同：1
> 
> 时间：2012-11-22T06:28:48.483
> 
> 标签：android, datetime

我需要将日期和时间格式化为 2012 年 11 月 15 日 18:55 GMT。

时间应为 GMT 和 24 小时格式。我尝试使用以下代码，但它以 12 小时格式给出时间。有什么办法吗？

```
DateFormat currentDateTimeString = DateFormat.getDateTimeInstance();
currentDateTimeString.setTimeZone(TimeZone.getTimeZone("gmt"));
gmtTime = currentDateTimeString.format(new Date()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T06:30:49.387

您可以使用 DateFormats 在任何时区将日期转换为字符串：

```
 DateFormat df = DateFormat.getTimeInstance();
  df.setTimeZone(TimeZone.getTimeZone("gmt"));
  String gmtTime = df.format(new Date()); 
```

**或者**

```
 Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
 Date currentLocalTime = cal.getTime();
 DateFormat date = new SimpleDateFormat("dd-MM-yyy HH:mm:ss z");   
 date.setTimeZone(TimeZone.getTimeZone("GMT")); 
 String localTime = date.format(currentLocalTime); 
 System.out.println(localTime); 
```