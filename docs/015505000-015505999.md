# StackOverflow 问答 15505000-15505999

# php - Laravel 验证 HTML 选择输入的数字数组

> ID：15505008
> 
> 赞同：2
> 
> 时间：2013-03-19T16:24:24.387
> 
> 标签：php, html, validation, laravel

在 Laravel 中，很容易验证数字输入 -

```
$rules = array('numericInput' => 'numeric'); 
```

**但不确定如何验证数值数组。这可能是什么规则。或者 Laravel 的 Validator 类甚至可以实现吗？**

例如-

此 HTML 表单将多个 Select 项目提交给 laravel 服务

```
<form .....>
  <select multiple="multiple" name="objectIdArr[]" >
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
  </select>
</form> 
```

Laravel 得到了什么——

```
( [input] => Array ( [objectIdArr] => Array ( [0] => 1 [1] => 3 [2] => 5 )) 
```

什么是规则！

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:26:53.017

Laravel 3.x's validator doesn't handle arrays unfortunately as it expects each unique name to be a string.

You could however extend the validator class as a library (follow the docs for a decent example) and allow your extended class to recieve an array that then is broken out into strings and validated, if any of the strings fail validation the validator returns a failure with your custom message.

# php - MySQL - 搜索忽略空格的字段

> ID：15505011
> 
> 赞同：6
> 
> 时间：2013-03-19T16:24:31.007
> 
> 标签：php, mysql, phpactiverecord

什么是搜索字段的好方法，忽略搜索词和字段中的空格？

例子：

```
SELECT * 
FROM tablename
WHERE NOSPACES(fieldname) LIKE '%{search term with spaces removed}%' 
```

真实世界的例子：

我的客户有一个销售长块引擎的网站。然而，他们经常让人们在他们的网站上搜索“cat 3306 **longblock** ”（而不是“cat 3306 long block”）。当搜索“longblock”时，我们需要显示“long block”引擎。

注意：对于这个问题可能无关紧要，但这个网站是使用 PHP 5.3 和[phpActiverecord 构建的](http://www.phpactiverecord.org/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:30:41.610

我建议有多种方法，具体取决于您想要实现的简单程度。我个人会使用此处列出的原则使用全文搜索[http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)

但是您也可以使用正则表达式去除搜索词中的空格，即

```
$str=preg_replace('/\s+/', '', $str); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T17:47:10.897

您可能还想考虑使用[Sphinx](http://www.ibm.com/developerworks/library/os-php-sphinxsearch/)或[Lucene](http://lucene.apache.org/core/index.html)进行全文搜索，例如搜索 mysql 的全文。我没有亲自使用过它们，但我听说两者都优于 mysql 内置的全文索引。

所有这些方法需要注意的一点是，它们需要一个特殊的索引来保持更新，这会增加更多的维护和服务器开销。

关于狮身人面像的好文章：http: [//astellar.com/2011/12/replacing-mysql-full-text-search-with-sphinx/](http://astellar.com/2011/12/replacing-mysql-full-text-search-with-sphinx/)

对于适用于产品名称或编号的免维护解决方案，只需将用户的搜索词按空格分开，并为每个查询添加 LIKE '%term%'。

此外，我创建了一个特殊的搜索字段，它是产品名称或编号，其标记按字母顺序排列，空格和符号被去除。每次产品名称更改时，您都需要更新此字段。然后，除了对原始字段的查询之外，我还`OR`搜索了这个新的剥离字段。例如，如果您有一个像“cat 3306 longblock”这样的产品名称，则创建一个 product_name_search 字段并放置“3306catlongblock”。当用户搜索时，`3306 long-block`您通过剥离符号和分割空格来处理搜索：

```
WHERE (other product name search clauses) OR 
    (product_name_search LIKE '%3306%' AND product_name_search LIKE '%longblock%') 
```

这个过程不如自由文本好，但它对产品名称和编号的效果相当好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-14T08:38:26.850

有一种使用替换功能的方法。例子：

```
SELECT * FROM `products` where REPLACE(PartName, ' ', '') = REPLACE('0 1 3000 70 27', ' ', '') 
```

# jquery - 通过 jquery 从 asp.net 中的 memebrship 类中检索属性

> ID：15505013
> 
> 赞同：0
> 
> 时间：2013-03-19T16:24:38.007
> 
> 标签：jquery, asp.net

我正在尝试按客户在谷歌地图中个性化设备放置地图。有没有办法通过 jquery 从成员资格类（asp.net id？）访问属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:33:18.057

是的，你可以使用 http 处理程序，你可以从那里得到任何东西。
您可以`IRequiresSessionState`使用访问会话。
更多详细信息：
[如何在 HttpHandler 中使用 Session 变量](https://stackoverflow.com/questions/1240732/how-can-i-use-session-variable-in-an-httphandler)

有用的链接从 jquery
[http://www.codeproject.com/Articles/203621/Call-HTTPhandler-from-jQuery-Pass-data-and-retriev调用 httphandler](http://www.codeproject.com/Articles/203621/Call-HTTPhandler-from-jQuery-Pass-data-and-retriev)
[传递参数从 jQuery 调用到 Http Handler](https://stackoverflow.com/questions/6828089/passing-parameter-to-http-handler-from-jquery-call)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:34:12.230

你有几个选择：

1.  访问当前用户是通过将其写入响应。类似（JavaScript）的东西：

    ```
    var userid = '<%=HttpContext.Current.User.Identity.Name%>'; 
    ```

2.  向返回当前用户 ID 的 Web 方法（向页面方法/Web 服务或 HTTP 处理程序）发出 ajax 请求。就像是

    ```
    $.post("SomeURL/GetUserID",function(data){  }); 
    ```

此处的完整示例：http: [//encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

# c# - 在 .Net 2.0 应用程序中缓存数据库表。访问它的最快方法是什么？

> ID：15505018
> 
> 赞同：1
> 
> 时间：2013-03-19T16:25:01.760
> 
> 标签：c#, .net, database, select, datatable

我有一个（静态）表，我需要非常频繁地访问它。因此我在运行时缓存它。

现在我使用 DataTable 来存储信息并使用 Select() 来检索它（过滤通常分布在 2 或 3 列上）。但这似乎非常（！）缓慢并且是主要瓶颈。

因此：缓存数据库表（在 .Net 2.0 中）的最佳方式是什么以及如何以最快的速度访问它？

* * *

[编辑 1]

```
DataTable cache = new DataTable();
cache.Columns.Add("id", typeof(int));
cache.Columns.Add("data_id", typeof(int));
cache.Columns.Add("data", typeof(string));
cache.Columns.Add("value", typeof(float)); 
```

例如：

```
DataRow[] result1 = cache.Select("id = 1 AND data_id = 2 AND data = 'some data'");
DataRow[] result2 = cache.Select("data = 'some other data'", "data desc"); 
```

* * *

[编辑 2]

考虑到@MichaelPerrenoud 的建议，我最终实现了一个字典。请记住，这种设计是针对我需要缓存的数据库表的结构。

```
Dictionary<string, Dictionary<NewObject, float>> cache;
class NewObject {int id; int data_id;} 
```

这样，**缓存将***数据*作为 [key] 并将新字典作为 [value]。后者将*id + data-id作为 [key] ，将 value 作为 [* *value* ] 。

在访问数据时，此 Dictionary比 DataTable 快**~%90 。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:46:40.630

所以我认为对你来说一个好的解决方案是这样的。我假设您在**最初**获得数据`DataTable`后拥有 。

 *****免责声明：我尚未编译此代码 - 这是一个概念 - 您可能需要修复一些语法。***

```
Dictionary<string, List<DataRow>> CacheData(DataTable t, params string[] fields)
{
    Dictionary<string, List<DataRow>> cache = new Dictionary<string, List<DataRow>>();
    StringBuilder key = new StringBuilder();

    foreach (DataRow r in t.Rows)
    {
        key.Clear();
        foreach (string f in fields)
        {
            if (key.Length > 0) { key.Append("_"); }
            key.Append(Convert.ToString(r[f]);
        }

        if (!cache.ContainsKey(key.ToString())) { cache.Add(key.ToString(), new List<DataRow>()); }
        cache[key.ToString()].Add(r);
    }
    return cache;
} 
```

现在，您可以以任何您认为合适的方式存储这些字典，然后在需要时从中提取数据，例如，如果您需要处理第一个示例，它可能看起来像这样来创建缓存：

```
CacheData(table, "id", "data_id", "data"); 
```

然后要获取数据，您将构建一个像这样的字符串：

```
string key = "1_2_some data"; 
```

并从字典中拉出行列表，如下所示：

```
dictionary[key]; 
```

这将返回 a`List<DataRow>`供您使用。

* * *

但是，您只需要这样做***一次***，然后一遍又一遍地利用这些字典。**

# tsql - 检查存储过程：将特定时区城市的日期时间转换为另一个

> ID：15505019
> 
> 赞同：0
> 
> 时间：2013-03-19T16:25:02.417
> 
> 标签：tsql, stored-procedures

我正在尝试创建存储过程，它使用本文将特定时区城市的日期时间转换为另一个：[在 SQL 2005 中有效地转换 UTC 和本地（即 PST）时间之间的日期](https://stackoverflow.com/questions/24797/effectively-converting-dates-between-utc-and-local-ie-pst-time-in-sql-2005)

```
 ALTER PROCEDURE [dbo].[Get_TimeOfTimeZone]
    (
        @DateTimeFrom   datetime,
        @CityNameFrom   nvarchar(MAX),
        @CityNameTo     nvarchar(MAX),
        @ResultDate     datetime OUTPUT
    )

AS
    SET NOCOUNT ON

    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED

    Declare @Query nvarchar(1000)
    Declare @ParmDefinition nvarchar (500)

    SET @Query = N''
    SET @Query = @Query + N'SELECT tz.Offset, tz.TimeZoneID '
    SET @Query = @Query + N'FROM TimeZoneCity, TimeZones tz WITH (NOLOCK) '
    --SET @Query = @Query + N'INNER JOIN    TimeZones WITH (NOLOCK) ON TimeZoneCity.TimeZoneID = tz.TimeZoneID '
    SET @Query = @Query + N'LEFT JOIN   TimeZoneDaylightSavings WITH (NOLOCK) ON TimeZoneDaylightSavings.TimeZoneID = tz.TimeZoneID '
    SET @Query = @Query + N'    WHERE TimeZoneCity.CityName = @CityNameTo '
    SET @Query = @Query + N'    AND TimeZoneCity.TimeZoneID = tz.TimeZoneID '
    SET @Query = @Query + N'        AND @DateTimeFrom >= TimeZoneDaylightSavings.BeginDst AND @DateTimeFrom < TimeZoneDaylightSavings.EndDst '

    SET @Query = @Query + N'SET @ResultDate =   DATEADD(HH, tz.Offset + CASE WHEN tz.TimeZoneID IS NOT NULL THEN 1 ELSE 0 END, '
    SET @Query = @Query + N'                            DATEADD(HH, (SELECT TimeZones.Offset '
    SET @Query = @Query + N'                                            FROM TimeZones, TimeZoneCity WITH (NOLOCK) ' 
    SET @Query = @Query + N'                                            WHERE TimeZoneCity.CityName = @CityNameFrom '
    SET @Query = @Query + N'                                            AND TimeZoneCity.TimeZoneID = TimeZones.TimeZoneID), '
    SET @Query = @Query + N'                                    @DateTimeFrom)) '

    SET @ParmDefinition = N'@ResultDate datetime, @DateTimeFrom datetime, @CityNameFrom nvarchar(MAX), @CityNameTo nvarchar(MAX) '

    EXECUTE sp_executesql @Query, @ParmDefinition, @ResultDate = @ResultDate, @DateTimeFrom = @DateTimeFrom, @CityNameFrom = @CityNameFrom, @CityNameTo = @CityNameTo

    SET NOCOUNT OFF 
RETURN 
```

当我执行它时，我有这些错误：

```
Msg 4104, Level 16, State 1, Line 1
The multi-part identifier "tz.Offset" could not be bound.
Msg 4104, Level 16, State 1, Line 1
The multi-part identifier "tz.TimeZoneID" could not be bound. 
```

任何人都可以检查我的存储过程并帮助我吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:32:45.180

您在查询中混合`JOIN`类型。以下行使用逗号和`WHERE`子句连接

```
FROM TimeZoneCity, TimeZones tz WITH (NOLOCK) 
```

由于您正在混合连接语法，因此别名`tz`不可用。您应该始终使用相同的语法。这一行应该是：

```
SET @Query = @Query + N'FROM TimeZoneCity 
                        INNER JOIN TimeZones tz WITH (NOLOCK) 
                              ON TimeZoneCity.TimeZoneID = tz.TimeZoneID' 
```

# visual-c++ - 使用 Clang 抑制匿名结构警告 - “-fms-extensions”不起作用

> ID：15505023
> 
> 赞同：5
> 
> 时间：2013-03-19T16:25:17.113
> 
> 标签：visual-c++, clang, compiler-warnings, suppress-warnings, compiler-flags

我有一个 Xcode 项目，我使用带有 Visual Studio C 代码的一些 3rd 方库使用 Clang 编译。

在第 3 方库中，头文件中使用了匿名结构（我无法真正改变它）。因此我得到这个警告：

“myfile.h:47:17：匿名结构是 GNU 扩展”

如此处所述，我尝试在我的 Xcode 项目的 C 标志中传递“-fms-extensions”：http: [//clang.llvm.org/docs/UsersManual.html#microsoft-extensions](http://clang.llvm.org/docs/UsersManual.html#microsoft-extensions)

没运气。知道如何摆脱该警告吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-03T09:51:48.997

添加`-Wno-microsoft`对我不起作用。

使用这个小测试程序

```
typedef struct test_struct
{
  struct
  {
    int a;
    int b;
  };
  int x;
} Test;

int main(int argc, char **argv)
{
  Test test;
  test.a = 0;
} 
```

使用`-Wno-gnu`禁用警告

版本是 Apple LLVM 5.0 版（clang-500.2.79）（基于 LLVM 3.3svn）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T17:56:52.533

您可以简单地使用`-Wno-microsoft`来隐藏警告。

# jquery - jquery jqgrid日期搜索不起作用

> ID：15505026
> 
> 赞同：0
> 
> 时间：2013-03-19T16:25:19.857
> 
> 标签：jquery, asp.net, jqgrid

我已经实现了 jqgrid jquery 并应用了搜索日期，但没有过滤记录。下面是我的代码片段。

```
// jquery jqgrid part
      { name: 'DateUpdated', index: 'DateUpdated',
                    sorttype: 'date'
                , sortable: true
                , datefmt: 'm/d/Y', width: 220, formatter: ndateFormatter,
                    formatoptions: { srcformat: 'm/d/Y', newformat: 'm/d/Y' },
                    searchoptions: { sopt: ['eq'] }
                }
//    ------------------------------
    function ndateFormatter(cellval, opts, rwdat, _act) {

                                    var time = cellval.replace(/\/Date\(([0-9]*)\)\//, '$1');
                                    var date = new Date();
                                    date.setTime(time);
                                    return (date.getMonth() + 1) + "/" + date.getDate() + "/" + date.getFullYear();

                                } 
```

我还在搜索选项中应用了 datepicker，但它没有按日期过滤。

# wordpress - Wordpress 无法在生产服务器中反映自定义 css 文件

> ID：15505028
> 
> 赞同：0
> 
> 时间：2013-03-19T16:25:22.243
> 
> 标签：wordpress

我在本地服务器上是这样写的。

主题/twentytwelve/style.css

```
body {
background: red
}
... 
```

它可以正常工作。但是此代码在生产服务器上不起作用。

我不知道为什么它有效。

我想手动自定义css文件。你有什么主意吗？

提前致谢。

我的样式表是

`http://54.248.234.114/wp-content/themes/twentytwelve/style.css?ver=3.5.1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:50:54.890

我假设样式在代码中被进一步覆盖。在这种情况下，第 1590 行。

尝试在其中添加您的风格。

不要忘记 TwentyTwelve 是一个响应式主题，其样式将通过媒体查询以特定宽度启动。

# android - java.lang.NoClassDefFoundError - Android - 维基

> ID：15505029
> 
> 赞同：1
> 
> 时间：2013-03-19T16:25:23.100
> 
> 标签：android, wikitude

这是我的第一篇文章。我的 android 应用程序有问题（关于使用 Wikitude 的增强现实），这就是 logcat 中显示的内容：

```
03-19 17:04:06.870: E/AndroidRuntime(15789): FATAL EXCEPTION: main
03-19 17:04:06.870: E/AndroidRuntime(15789): java.lang.NoClassDefFoundError: tirocinio.myapp.wikitude.RealtaAumentataActivity 
```

这是处理增强现实的类，或者至少应该这样做：（我只发布了 onCreate() 方法:)

```
@Override
public void onCreate(Bundle savedInstanceState) {
.....
    super.onCreate(savedInstanceState);
    setContentView(R.layout.aractivity);
    this.architectView = (ArchitectView) this.findViewById(R.id.architectView);
    architectView.onCreate(apiKey);
......
 } 
```

这是“aractivity”文件xml：

```
### aractivity.xml ###

<com.wikitude.architect.ArchitectView
    android:id="@+id/architectView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</com.wikitude.architect.ArchitectView> 
```

这些是进口：

```
### import ###

import java.io.IOException;
import java.net.URI;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.NameValuePair;
import org.apache.http.client.utils.URLEncodedUtils;
import org.json.JSONArray;
import org.json.JSONException;
import tirocinio.myapp.R;
import tirocinio.myapp.activity.PoiDetailActivity;
import android.app.Activity;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.media.AudioManager;
import android.os.Bundle;
import android.view.WindowManager;
import android.widget.Toast;
import com.wikitude.architect.ArchitectUrlListener;
import com.wikitude.architect.ArchitectView; 
```

这是我的清单：我认为这是正确的

```
### Manifest ###

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="tirocinio.myapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_GPS" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name="tirocinio.myapp.activity.HomeActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="tirocinio.myapp.activity.MappaActivity"
            android:label="@string/app_name" />
        <activity
            android:name="tirocinio.myapp.wikitude.RealtaAumentataActivity"
            android:label="@string/app_name" />
    </application>

</manifest> 
```

这是构建路径：

```
### buildpath ###

 - maps.jar
 - QCAR.jar
 - wikitudes.jar
 - Android Dipendences
 - Google APIs [Android 4.2.2] 
```

# javascript - 如何将我的 HREF 设置为来自输入字段和选择列表的文本？

> ID：15505033
> 
> 赞同：0
> 
> 时间：2013-03-19T16:25:25.800
> 
> 标签：javascript, html, href

当用户单击“搜索”按钮时，我正在尝试将我的按钮的 HREF 设置为输入字段中的文本和我的选择列表中的选定选项。

```
<div>
  <div>
    <input type="text" value="Keywords" style="width:206px" />
  </div>
  <div style="clear:both">
    <select>
      <option value="Test">Test</option>
    </select>
  </div>
  <div>
    <button><a href="">Search</a></button>
  </div>
</div> 
```

如何从输入框的值和选择列表的选定值中设置href？我可能需要为此创建一个表单，但我想我可以用一些更简单的东西来摆脱困境。我只需要编译搜索字符串并将用户重定向到适当的页面，因为搜索引擎已经构建。

谢谢！

**编辑 1**

抱歉，我正在使用 php 加载选择列表，但我无法提供选择列表如何填充的代码，因为其中包含公司敏感信息。我不应该包括那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:34:32.677

使用javascript，您可以检索表单字段的值并将其处理为您需要的内容。

假设选择 ID`select`和链接 ID 为`link`：

```
var value = document.getElementById('select').value;
document.getElementById('link').setAttribute('href', value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:44:55.533

仅使用 PHP（无 jQuery，无 Javascript），您将在表单中使用提交按钮并使用`$_POST`：

第一个表格（精简为基础）：

```
<form method="post">    
    <input name="keywords" type="text" value="Keywords" style="width:206px" />
    <select name="options">
        <option value="Test">Test</option>
    </select>
    <input type="submit" name="ok" value="ok" />
</form> 
```

2nd，在你的 php 页面的开头，它包含该表单：

```
if (isset($_POST['ok'])) { // submit has been clicked...

    if (isset($_POST[keywords])) { // there's input in keywords

        $keywords = $_POST['keywords'];
        // sanitize $keywords to prevent sql-injection

        // go to the page you want to call...
        // assuming there's no output before header ...
        // and $keywords is in the right format ...
        // and you retrieved $_POST['options'] to do sth with that, too

        header('Location: http://www.url.com/page.php?key=$keywords');
    } else exit('no keywords entered!');  
} 
```

# c - 从线程返回单个整数值

> ID：15505037
> 
> 赞同：0
> 
> 时间：2013-03-19T16:25:32.883
> 
> 标签：c, pthreads, return, pthread-join

我需要帮助从线程返回整数值。我已经尝试了几件事，但无法让它工作。我是 C 新手，是的，这是家庭作业，但我被困住了，需要一些帮助。我已经在线程中创建了指针，但是当我将它传递回 main 时，它没有显示正确的值。我已经尝试过 malloc ，但这也不起作用。任何提示将不胜感激。

这是代码：

```
#include<stdio.h>
#include<stdlib.h>
#include<math.h>
#include<pthread.h>
#include "FindNextHigher.h"
#include "SortNumber.h"

void *thread_next(void *arg)
{
   /* Call FindNextHigher */
   int *num =(int *)arg;
   int next = FindNextHigher(*num);
   printf("next= %d\n", next);
   /* Convert int to pointer to pass and print to check*/
   int *next_ptr=&next;
   printf("nextptr= %d\n", *next_ptr);
   return (void *)next_ptr;
}

int main(int argc, char *argv[])
{
   FILE* f = fopen(argv[1], "r");
   int i, num, *next_ptr;
   printf("next_ptr = %d\n", *next_ptr);
   pthread_t thread1, thread2, thread3, thread4;
   void *exit_status;

   for(i=1; i<=20; i++)
   {
   fscanf(f, "%d", &num);
   if (i==1 || i<=60){
     pthread_create(&thread1, NULL, thread_next, &num);
     pthread_join(thread1, &exit_status);
     printf("Threadid 1 processes number %d which is %d and the next higher number is %d\n", i, num, *next_ptr);
     if (i==60){
        printf("--------------Process finished for Thread 1----------");
        } 
     }
   else {
   if (i==61 || i<=120){ 
     pthread_create(&thread2, NULL, thread_next, &num);
     pthread_join(thread2, &exit_status);
     printf("Threadid 2 processes number %d which is %d and the next higher number is %d\n", i, num, *next_ptr);
     if (i==120){
        printf("--------------Process finished for Thread 2----------");
     }
   }
   else{
   if (i==121 || i<=180){
     pthread_create(&thread3, NULL, thread_next, &num);
     pthread_join(thread3, &exit_status);
     printf("Threadid 3 processes number %d which is %d and the next higher number is %d\n", i, num, *next_ptr);
     if (i==180){
        printf("--------------Process finished for Thread 3----------");
      }
   }
   else{
   if (i==181 || i<=240){
     pthread_create(&thread4, NULL, thread_next, &num);
     pthread_join(thread4, &exit_status);
     printf("Threadid 4 processes number %d which is %d and the next higher number is %d\n", i, num, *next_ptr);
     if (i==240){
        printf("--------------Process finished for Thread 4----------");
     }
   }
   }
   }
   }
   }    
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:32:51.447

有一些错误。`next_ptr`首先，在打印之前不要初始化。

接下来，您在 4 个线程之间共享一个指向同一个变量实例的指针，而没有任何同步机制来保护对它的访问。您将需要使用临界区或互斥体/信号量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:36:07.373

首先，您需要注意以下几点：

```
int i, num, *next_ptr;
...

for(i=1; i<=20; i++)
{
  fscanf(f, "%d", &num);
  ...
  pthread_create(&thread1, NULL, thread_next, &num); 
```

您正在向`&num`所有线程发送相同的地址 ( )，同时分别读取每个线程的编号。由于它们都有一个指向相同数字的指针，因此很可能它们都将采用最后一个值（或任意分配的任何值或以后的值）。因此，作为论点，您需要拥有与`num`线程一样多的 s 。

要返回整数，您可以将整数强制转换为 a `void *`，这会起作用，但它并不完全是标准的。一种解决方案是通过参数为返回值提供一个位置：

```
struct arg_and_return
{
    int num;
    int ret;
};

struct arg_and_return ar;
fscanf(f, "%d", &ar.num);
pthread_create(&thread, NULL, thread_func, &ar); 
```

并在线程内填写`((struct arg_and_return *)arg)->ret`. 当然，你仍然需要和`ar`线程一样多的 s 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:47:47.213

您不应像在代码中那样返回指向线程函数本地变量的指针`next`。原因与任何其他函数几乎相同——当函数退出时（当线程终止时），变量的生命周期已经结束，因此指向它的指针是不可靠的。相反，请尝试以下方法之一：

启动时使用变量 from`main`并将其地址传递给线程函数，然后从线程修改它（但不要在线程仍在运行时从线程外部触摸它，除非您使用互斥锁）。

或者，在线程中动态分配`int`并返回指向它的指针；当你完成它时，你会从你的主线程中释放它。

或者，如果您确定表示是兼容的，则可以将`int`要返回的指针类型转换为指针类型并将其返回，然后再转换回`int`主线程中。这是一种常见的方法，但是您需要确保它可以在您的系统上运行（如果指针至少与`int`s 一样大，它通常会起作用，但您不应该理所当然地认为它会这样做）。

# iphone - 如何使 JavaScript 网页看起来像 iPhone 上的应用程序

> ID：15505038
> 
> 赞同：3
> 
> 时间：2013-03-19T16:25:38.587
> 
> 标签：iphone, ios, ipad, javascript

我想让一个带有 JavaScript 游戏的简单网页看起来像 iPhone 上的应用程序。我知道我可以将书签保存到主屏幕，它看起来像一个应用程序，我知道我可以在我的 HTML 中为缩略图设置 apple-itouch-image。但是当你点击主屏幕上的应用程序时，很明显这只是一个网页。我怎样才能像谷歌阅读器一样摆脱顶部的 URL 和搜索栏？如果您稍后向上滚动，可以看到该栏。

单击网页时是否可以直接进入全屏模式？

我不是在寻找像 PhoneGap 这样的东西，我只是想用 JavaScript 制作一个简单的网页看起来像一个应用程序，我不希望它实际上是一个应用程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T16:28:43.833

您可以在页面的头块中放置一些元标记。试试这些：

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" /> 
```

`viewport`设置宽度并控制缩放和缩放。

`apple-mobile-web-app-capable`通知 Apple iOS 应用程序可以安装到用户跳板，这样它就可以在没有菜单栏的情况下启动 Safari Mobile 浏览器

`apple-mobile-web-app-status-bar-style`控制屏幕顶部细状态栏的外观。

另一个有用的行是：

```
<link rel="apple-touch-icon-precomposed" href="myicon.png"/> 
```

一旦安装，这将为应用程序提供一个自定义图标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T16:28:03.227

您需要定义一些`<meta>`标签，最值得注意的是`apple-mobile-web-app-capable`. 在此处查看完整教程[http://mobile.tutsplus.com/tutorials/iphone/iphone-web-app-meta-tags/](http://mobile.tutsplus.com/tutorials/iphone/iphone-web-app-meta-tags/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-19T16:28:54.727

添加

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

然后它应该在保存到主屏幕后工作。

# .net - 名称空间“Microsoft”中不存在类型或名称空间名称 Web

> ID：15505040
> 
> 赞同：1
> 
> 时间：2013-03-19T16:25:47.377
> 
> 标签：.net, windows-phone-7

我恢复了一个旧的 WP7 项目，但我无法构建它，因为我在这一行找不到 Microsoft.Web

使用 Microsoft.Web.Media.SmoothStreaming；

不幸的是，我尝试添加一个参考（Microsoft.Web.Media.SmoothStreaming），但我找不到这个参考......

我在 Visual Studio 2012

任何想法？

谢谢

# iphone - 如何将数组从一个视图传递到iphone中的另一个视图

> ID：15505041
> 
> 赞同：4
> 
> 时间：2013-03-19T16:25:47.283
> 
> 标签：iphone, ios

我是电话编程的新手。我已经在数组中存储了一些数据，我想将该数组数据从一个视图传递到另一个视图。我尝试了什么但它不起作用。任何人都可以告诉我这是什么错误。

#import“firstviewcontroller.h”

```
 @property(nonatomic,retain)NSMutableArray *tapCollection;
 @property(nonatomic,retain)NSMutableArray *imageCollection; 
```

#import“firstviewcontroller.m”

```
 @synthesize imageCollection,tapCollection;
    -(void)viewdidload
    {
    self.tapCollection = [[NSMutableArray alloc] init];
    self.imageCollection = [[NSMutableArray alloc] init];
    }
    - (void)insertNewObject:(id)sender
    {

        secondviewcontroller*r= [[secondviewcontrolleralloc] initWithNibName:@"secondviewcontroller" bundle:nil];
        self.navigationController.navigationBar.tintColor=[UIColor blackColor];
         r.imageCollection1 =imageCollection;
             r.tapCollection1 =tapCollection;
        [self.navigationController pushViewController:r animated:YES];

    } 
```

实际上，我存储在数组中的数据是图像和按钮标签值。在控制台中，它显示的图像和按钮标签值存储在数组中

```
2013-03-19 21:54:03.374 Taukyy[290:1c103] (
    0,
    "<UIImage: 0x9cd59e0>",
    1,
    "<UIImage: 0x9cd6220>",
    2,
    "<UIImage: 0x9cd6b70>"
) 
```

# 导入“secondviewcontroller.h”

```
@property(nonatomic,retain)NSMutableArray *tapCollection1;
@property(nonatomic,retain)NSMutableArray *imageCollection1; 
```

# 导入“secondviewcontroller.m”

```
@synthesize tapCollection1,imageCollection1;
- (void)viewDidLoad
{
    imageCollection1 = [[NSMutableArray alloc] init];
   tapCollection1 = [[NSMutableArray alloc] init];
   NSLog(@"%@",tapCollection1);
   NSLog(@"%@",imageCollection1);
} 
```

但是这里的值没有显示。它的显示如下

```
2013-03-19 21:29:16.379 Taukyy[594:1c103] (
)
2013-03-19 21:29:16.380 Taukyy[594:1c103] (
)
2013-03-19 21:29:16.381 Taukyy[594:1c103] (
) 
```

请任何人告诉我这段代码有什么错误谢谢阿斯拉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:28:48.250

从中删除`viewDidLoad's`数组分配`secondviewcontroller.m`

你`tapCollection1`&`imageCollection1`是`retain`属性。所以它应该`retain`分配的对象。

你的**secondviewcontroller.h**应该看起来像，

```
@property(nonatomic,retain)NSMutableArray *tapCollection1;
@property(nonatomic,retain)NSMutableArray *imageCollection1; 
```

和

```
- (void)viewDidLoad
{
  //remove the allocation codes
} 
```

您可以将其登录到**firstviewcontroller.m**中 ，例如，

```
 - (void)insertNewObject:(id)sender
    {

         secondviewcontroller*r= [[secondviewcontrolleralloc] initWithNibName:@"secondviewcontroller" bundle:nil];
         self.navigationController.navigationBar.tintColor=[UIColor blackColor];
         r.imageCollection1 =imageCollection;
         r.tapCollection1 =tapCollection;
         NSLog(@"%@",r.imageCollection1);
         NSLog(@"%@",r.tapCollection1);
        [self.navigationController pushViewController:r animated:YES];

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T16:31:05.767

不要再次分配/初始化您的数组。在准备转场时设置它们。

```
@synthesize tapCollection1,imageCollection1;
- (void)viewDidLoad
{
   //imageCollection1 = [[NSMutableArray alloc] init];
   //tapCollection1 = [[NSMutableArray alloc] init];
   NSLog(@"%@",tapCollection1);
   NSLog(@"%@",imageCollection1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:36:34.623

不要in of ，而是在`init`方法中做`mutableArrays``viewDidLoad``SecondViewController``init``SecondViewController`

```
 -(id)initWithNibName //this method
  {
     //create object

      self.imageCollection1 = [NSMutableArray alloc] init];
      self.tapCollection1 = [NSMutableArray alloc] init];

   } 
```

您现在将获得正确的值..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:41:27.590

为什么要分配以前分配的数组。

只需删除

```
imageCollection1 = [[NSMutableArray alloc] init];
tapCollection1 = [[NSMutableArray alloc] init]; 
```

# c++ - 如何将结构转换为 char[] 数组？

> ID：15505045
> 
> 赞同：3
> 
> 时间：2013-03-19T16:25:54.007
> 
> 标签：c++, casting, struct, bytearray

我有一个类型的变量`Blah`。

我想将其转换为`char[sizeof(blah)]`，而不复制。
我需要类型转换足够强大以实例化期望的模板`char[N]`。

我已经尝试了很多东西，但我无法完全理解它。
我希望这样的事情能够正常工作：

```
class Blah {
 int a;   
};

template <typename T>
void foo (T& a) 
{ 
    //Not an array
}

template <int N>
void foo (char(&a)[N]) 
{ 
    //an array!
}

Blah b;
foo(b); //not an array
foo((char[sizeofBlah])b); //hopefully treated as an array 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T16:28:05.803

你不能表演这样的演员，那没有意义。您*可以*做的是获取对象的*地址*并将地址重新解释为字节地址：

```
char* const buf = reinterpret_cast<char*>(&obj); 
```

这应该可以满足您的要求，但请注意使用术语“cast to `char[]`”，因为它会混淆正在发生的实际操作。

你也可以将地址解释为固定大小缓冲区的起始地址，当然：

```
using buffer_t = char[sizeof(Blah)];
buffer_t* pbuf = reinterpret_cast<buffer_t*>(&obj); 
```

但请注意，您仍然在此处使用*指向*缓冲区的指针。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T16:42:26.417

您可以使用 来执行此操作`reinterpret_cast<char (&)[sizeof b]>(b)`，但我不建议这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:37:41.577

最干净的方法是将其作为操作添加到类中：

```
class Blah {
    int a;
public:
    void serialize(char *output) { output[0] = a; /* add others as needed */ }
};

Blah blah;
char buffer[sizeof(Blah)];
blah.serialize(buffer); 
```

这将允许您明确地查看正在发生的事情并集中代码，以防您以后需要更改它。

编辑：在我的示例中，序列化接口不是很优雅（或很安全），但我的观点是您应该将其添加为方法。

# scala - 如何访问/初始化和更新可变映射中的值？

> ID：15505048
> 
> 赞同：26
> 
> 时间：2013-03-19T16:26:07.853
> 
> 标签：scala, dictionary

考虑使用可变映射来跟踪出现/计数的简单问题，即：

```
val counts = collection.mutable.Map[SomeKeyType, Int]() 
```

我目前增加计数的方法是：

```
counts(key) = counts.getOrElse(key, 0) + 1
// or equivalently
counts.update(key, counts.getOrElse(key, 0) + 1) 
```

这不知何故感觉有点笨拙，因为我必须两次指定密钥。在性能方面，我还希望它`key`必须在地图中定位两次，我想避免这种情况。`Int`有趣的是，如果提供一些修改自身的机制，就不会出现这种访问和更新问题。例如，更改为提供函数`Int`的类将允许：`Counter``increment`

```
// not possible with Int
counts.getOrElseUpdate(key, 0) += 1
// but with a modifiable counter
counts.getOrElseUpdate(key, new Counter).increment 
```

不知何故，我总是期望具有可变映射的以下功能（有点类似于`transform`但不返回新集合并且在具有默认值的特定键上）：

```
// fictitious use
counts.updateOrElse(key, 0, _ + 1)
// or alternatively
counts.getOrElseUpdate(key, 0).modify(_ + 1) 
```

但是据我所知，这样的功能不存在。一般来说（性能和语法方面）有这种`f: A => A`就地修改的可能性不是很有意义吗？可能我只是在这里遗漏了一些东西......我想必须有一些更好的解决方案来解决这个问题，使这样的功能变得不必要？

**更新：**

我应该澄清一下我知道`withDefaultValue`但问题仍然存在：执行两次查找仍然比一次慢*两倍*，无论它是否是 O(1) 操作。坦率地说，在许多情况下，我非常乐意实现因子 2 的加速。显然，修改闭包的构造通常可以移到循环之外，所以恕我直言，与运行不必要的操作两次。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-19T17:05:34.993

您可以使用默认值创建地图，这将允许您执行以下操作：

```
scala> val m = collection.mutable.Map[String, Int]().withDefaultValue(0)
m: scala.collection.mutable.Map[String,Int] = Map()

scala> m.update("a", m("a") + 1)

scala> m
res6: scala.collection.mutable.Map[String,Int] = Map(a -> 1) 
```

正如 Impredicative 所提到的，地图查找速度很快，所以我不用担心 2 次查找。

**更新：**

正如 Debilski 指出的那样，您可以通过执行以下操作更简单地做到这一点：

```
scala> val m = collection.mutable.Map[String, Int]().withDefaultValue(0)
scala> m("a") += 1
scala> m
 res6: scala.collection.mutable.Map[String,Int] = Map(a -> 1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-28T19:49:17.697

开始`Scala 2.13`，[`Map#updateWith`](https://www.scala-lang.org/files/archive/api/2.13.x/scala/collection/mutable/Map.html#updateWith(key:K)(remappingFunction:Option[V]=%3EOption[V]):Option[V])服务于这个确切的目的：

```
map.updateWith("a")({
  case Some(count) => Some(count + 1)
  case None        => Some(1)
}) 
```

> def updateWith(key: K)(remappingFunction: (Option[V]) => Option[V]): Option[V]

* * *

例如，如果密钥不存在：

```
val map = collection.mutable.Map[String, Int]()
// map: collection.mutable.Map[String, Int] = HashMap()

map.updateWith("a")({ case Some(count) => Some(count + 1) case None => Some(1) })
// Option[Int] = Some(1)
map
// collection.mutable.Map[String, Int] = HashMap("a" -> 1) 
```

如果密钥存在：

```
map.updateWith("a")({ case Some(count) => Some(count + 1) case None => Some(1) })
// Option[Int] = Some(2)
map
// collection.mutable.Map[String, Int] = HashMap("a" -> 2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-17T02:03:09.117

我想延迟初始化我的可变映射而不是折叠（为了提高内存效率）。**collection.mutable.Map.getOrElseUpdate()**方法适合我的目的。我的地图包含一个用于求和值的可变对象（同样，为了提高效率）。

```
 val accum = accums.getOrElseUpdate(key, new Accum)
        accum.add(elem.getHours, elem.getCount) 
```

*collection.mutable.Map.withDefaultValue()*不会为后续请求的键保留默认值。

# c# - how to use Ninject intercept using InterceptAttribute

> ID：15505051
> 
> 赞同：5
> 
> 时间：2013-03-19T16:26:17.480
> 
> 标签：c#, ninject, aop, ninject-extensions, ninject-interception

I have a NinjectWebCommon as follow. I am unable to get the TimingInterceptor to trigger on the method that has "Timing" attribute set. It works fine if the intercetor is defined at the class level where all method call is going to be intercepted, but I would like to have the ability to specify the method I want to intercept (opt in).

I do have the **Ninject.Extensions.Interception.DynamicProxy** added.

```
public static class NinjectWebCommon 
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var NinjectSettings = new NinjectSettings();
        var kernel = new StandardKernel(NinjectSettings);

        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        GlobalConfiguration.Configuration.DependencyResolver = new BazingaNinjectResolver(kernel);

        RegisterServices(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IMyService>().To<MyService>().InRequestScope();
    }        
} 
```

**my Service class define as follow**

```
public class MyService : IMyService
{
    Logger log;

    public MyService()
    {
        log = LogManager.GetLogger(this.GetType().FullName);
    }

    [Timing]
    public string GetString()
    {
        log.Info("log me!!");
        return "Cool string !!!!";
    }

    public string GetUnInterceptString()
    {
        return "Not intercepted";
    }
} 
```

**Interceptor and attribute define as follows**

```
public class TimingAttribute : InterceptAttribute
{
    public override IInterceptor CreateInterceptor(IProxyRequest request)
    {
        return request.Context.Kernel.Get<TimingInterceptor>();
    }
}

public class TimingInterceptor : SimpleInterceptor
{
    readonly Stopwatch _stopwatch = new Stopwatch();

    protected override void BeforeInvoke(IInvocation invocation)
    {
        _stopwatch.Start();
    }

    protected override void AfterInvoke(IInvocation invocation)
    {
        _stopwatch.Stop();
        string message = string.Format("Execution of {0} took {1}.",
            invocation.Request.Method,
            _stopwatch.Elapsed);

        _stopwatch.Reset();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:33:02.370

您需要它是虚拟的，以便 ninject 拦截它：

```
public class MyService : IMyService
{
    Logger log;

    public MyService()
    {
        log = LogManager.GetLogger(this.GetType().FullName);
    }

    [Timing]
    public virtual string GetString()
    {
        log.Info("log me!!");
        return "Cool string !!!!";
    }

    public string GetUnInterceptString()
    {
        return "Not intercepted";
    }
} 
```

# unit-testing - How to exclude specific unit tests from default "maven test" and eclipse "run as junit test"

> ID：15505052
> 
> 赞同：7
> 
> 时间：2013-03-19T16:26:22.323
> 
> 标签：unit-testing, maven, junit, maven-surefire-plugin

In my code I have 2 types of tests: **fast unit tests** and **slow performance tests**. I am trying to ensure that the performance tests are never run unless the user explicitly wants to run them (e.g. using the right test suite or maven build profile) because this kicks of a remote process that is computationally-intensive on a grid.

I understand how to create build profiles that exclude (or include) specific tests using maven-surefire-plugin as explained on this [site](http://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html). The problem I have, however, is that I have not found **a way to exclude tests from the default run while still providing the option to run the test when needed**. By default run I mean:

*   Right click on the project in eclipse and selects "run as| Maven test"
*   Right click on src/test/java and select run as junit test

In both cases above it runs all the unit tests (include the slow tests I hope to exclude by default). The same thing happens if there is a typo in the build profile I try to run.

Is there a way I can excluse performance tests from the default run without having to move them to a separate maven module?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:01:08.740

我们在项目中所做的就是用一个特殊的标记接口来标记慢速单元测试。 `@Cathegory(SlowTest.class)`注释并将它们添加到故障安全插件中。

```
<plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-failsafe-plugin</artifactId>
   <configuration>
       <groups>com.whatever.SlowTest</groups>
   </configuration>
    <executions>
      <execution>
        <configuration>
            <includes>
                <include>**/*.class</include>
            </includes>
        </configuration>
        <goals>
            <goal>integration-test</goal>
            </goals>
    </execution>
</executions> 
```

如果您不想执行它们：使用 maven 选项 -DskipITs。这将跳过它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:30:33.077

默认情况下，使用`profiles`您可以使一个活动不包括您的慢速测试，并使用另一个来运行所有测试。

您必须在您的`fastTestOnly`个人资料中指定这些标签：

```
<profiles>
  <profile>
    <id>fastTestOnly</id>
    <activation>
      <activeByDefault>true</activeByDefault>
    </activation>
    ...
  </profile>
</profiles> 
```

这样，当您运行简单时，`mvn install`只有选择的配置文件是`fastTestOnly`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T19:48:14.120

您问题的本机 Junit 案例只能通过将不同的测试保存在不同的源文件夹（或包）中来解决 AFAIK，然后转到“在...中运行所有测试”的运行配置并限制测试运行特定的源文件夹（或包）。

我知道没有通用的方法可以以通用的方式实现这一点，但是为每个项目创建一个新的运行配置集（通过复制现有的配置集）并删除那些不再相关的配置并不会太麻烦。

# java - 在 Eclipse for Android App 中创建了第二个页面，但无法正常工作

> ID：15505063
> 
> 赞同：0
> 
> 时间：2013-03-19T16:27:02.007
> 
> 标签：java, android, mobile

我在 Android 中创建了第一个默认的 Hello World 页面，但我在那里放置了一个按钮来将屏幕移动到第二个窗口（我创建的）。但是当我点击第一个按钮时，它会将我移动到一个空白页面。

实际上我的第二页有一个按钮（显示第二页），但为什么 android 不显示呢？我错了吗？

MainActivity.java 文件内容为：

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button b = (Button) findViewById(R.id.button1);

        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent(MainActivity.this, Second.class));
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

第二.java内容为：

```
import android.app.Activity;
import android.os.Bundle;

public class Second extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }

} 
```

以下是应用截图：

1.  [http://pbrd.co/YRNZvw](http://pbrd.co/YRNZvw)
2.  [http://pbrd.co/YRNNN5](http://pbrd.co/YRNNN5)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:30:49.697

所以你说你的布局文件上`activity_second.xml`有一个按钮。当您切换到`Graphic Layout`eclipse时，您看到按钮了吗？你必须先在那里看到它。如果不是，它通常会告诉你原因。你也必须`setContentView(R.layout.activity_second);`在`onCreate`二等舱。

编辑：

下次为了省点麻烦，因为您使用的是 eclipse，所以要向项目添加新活动，请执行以下操作：

```
click new -> android -> Android Activity 
```

并从那里添加一个名称和一个可选的父活动。那应该为您完成所有基本接线，并且您不会遇到这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:30:23.687

您在第二个活动的 OnCreate 中缺少 setContentView。

应该是这样的：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_second);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:30:33.527

```
setContentView(R.your_layout_id); 
```

`onCreate`在第二种方法中调用它`Activity`

或像这样替换您的 onCreate 函数

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Button button = new Button(this);
    button.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,   
            LayoutParams.WRAP_CONTENT));
    button.setText("Click Me");
    setContentView(button);

} 
```

# jquery - jQuery trigger callback function with vclick on jQuery Mobile

> ID：15505064
> 
> 赞同：1
> 
> 时间：2013-03-19T16:27:06.780
> 
> 标签：jquery, jquery-mobile, callback, eventtrigger

I am using jQuery Mobile v1.2.0 and i'm attempting to implement a callback function with the jQuery `trigger` function on a click/vclick on a link.

This is my callback function and the trigger below it.

```
var callback = function() {
   console.log('in the callback, yo!');
   var mainContainer = $.mobile.activePage.find('.main');
   // do some stuff...  
};

$.mobile.activePage.find('.new_link').trigger('click', [callback]); 
```

What I am finding is that `Callback` is pulling through as `undefined` when I do a typeof on it. My understanding is this should be a function, which is what i'm checking for, but for some reason it does not find it.

```
var page = $.mobile.activePage;

page.on('vclick', '.new_link', function(e, Callback) {
    e.stopPropagation();
    e.preventDefault();

    // comes through as 'undefined'
        console.log(typeof(Callback));

    if (typeof Callback === 'function') {
        Callback();
    }

}); 
```

I can see that the code gets as far as checking for the type of `Callback`, but it does not have a function. I see nothing in the jQuery trigger documentation for a callback such as this, but i'm led to believe it does work.

# networking - 实时计算网络数据包的数量 (CLI)

> ID：15505068
> 
> 赞同：1
> 
> 时间：2013-03-19T16:27:30.133
> 
> 标签：networking, tcpdump

我想在 CLI 中实时计算网络传入/传出数据包的数量（我想使用该计数来编写 shell 脚本）

我尝试将 'tcpdump' 和 'tsahrk' 与管道结合使用，但它不起作用（我没有什么天赋和学习能力）。

最后，我找到了命令'dumpcap'，它几乎接近我的需要，这里是dumpcap stdout

```
[root@hostname ~]# dumpcap -i eth0
File: /tmp/wiresharkXXXXuTE8mU
Packets: 31 
```

当我将此命令与“grep”结合使用时，例如“dumpcap -i eth0 | grep -o '[0-9]*' 过滤标准输出（31）中的数字，但它仍然不起作用。

他们有什么方法可以解决这个问题或对此有任何想法吗？

**非常感谢您对此事的关注。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:58:35.190

基于我电脑上的以下输出：

```
ifconfig eth0 | grep RX
      RX packets:113995 errors:0 dropped:0 overruns:0 frame:0
      RX bytes:62022831 (62.0 MB)  TX bytes:11453699 (11.4 MB) 
```

我可以执行以下操作来检索 RX 数据包的数量：

```
ifconfig eth0 | grep "RX packets" | tr ":" " " | awk '{print $3}'
113995 
```

不幸的是，目前还不清楚您到底需要什么。“实时计算数据包数量”是什么意思？您是否希望计数器增加并在看到数据包时报告计数器的值？或者您只是想计算在给定时间段内看到了多少数据包？你的shell脚本的最终目标是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:54:50.450

诸如 tcpdump、TShark 或 dumpcap 之类的数据包捕获程序可能会将接口置于混杂模式，这意味着将出现比正常情况下更多的数据包。

dumpcap 中的计数进入标准错误，而不是标准输出。

Dumpcap 会将数据包写入相关文件，您可能想要也可能不想要；如果您有很多流量，该文件将越来越大，并在文件系统 /tmp 上占用更多空间。

您可能需要考虑一些仅从常规网络堆栈中获取统计信息的工具，例如 Linux 上的 ifconfig 或各种操作系统上的 netstat：

```
$ netstat -w 1 -I en0
            input          (en0)           output
   packets  errs      bytes    packets  errs      bytes colls
         0     0          0          0     0          0     0
         0     0          0          0     0          0     0
         1     0         98          1     0         98     0
         1     0         98          1     0         98     0

                      ... 
```

# php - How to use pagination in codeigniter with segments?

> ID：15505069
> 
> 赞同：1
> 
> 时间：2013-03-19T16:27:30.387
> 
> 标签：php, codeigniter, pagination

I have one problem in Codeigniter pagination with segments. I need to pass segments with page number.

Example: [http://www.mysite.com/app/controller/method/param1/param2/page_number](http://www.mysite.com/app/controller/method/param1/param2/page_number)

```
<?php

$this->load->library('pagination');
$config['base_url'] = 'http://localhost/welcome/par1/para2/';
$config['total_rows'] = 200;
$config['per_page'] = 20;

$this->pagination->initialize($config);

echo $this->pagination->create_links();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:59:30.653

尝试使用 URL 帮助函数 current_url() 作为您的基本 URL。

从 CI 文档（[http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)）：

> current_url() - 返回当前正在查看的页面的完整 URL（包括段）。

因此，在您的情况下，控制器将如下所示：

```
$this->load->library('pagination');
$config['base_url'] = current_url();
$config['total_rows'] = 200;
$config['per_page'] = 20;

$this->pagination->initialize($config);

echo $this->pagination->create_links(); 
```

此方法应允许您拥有所需数量的参数。

# sql-server - ASP.NET Dynamic Data Image Field Template

> ID：15505073
> 
> 赞同：0
> 
> 时间：2013-03-19T16:27:45.990
> 
> 标签：sql-server, image-uploading, asp.net-dynamic-data

I'm engaged in a minor skirmish with Dynamic Data. I've got a custom database image field template to allow users to upload and edit images where **inserting** works but **updating** does not. I can make update work by removing the *if insert mode* around where the `uri` is set in the following code (in DBImage_Edit.ascx.cs):

```
protected override void ExtractValues(IOrderedDictionary dictionary)
{
  ...
  dictionary["contenttype"] = "image/" + imgext;
  dictionary["filecontents"] = new System.Data.Linq.Binary(FileUploadEdit.FileBytes);
  if (Mode == DataBoundControlMode.Insert)
  {
    dictionary["uri"] = imgname + "_" + DateTimeOffset.Now.Ticks.ToString() + "." + imgext;
  }
  ...
} 
```

To recap, if the *uri* is set to something different than the previous value in the DB when **editing**, the new image is uploaded successfully. If the *uri* is the same as the previous value in the DB, even though the *filecontents* and *contenttype* are changed, SQL Server never gets the news.

The metadata:

```
...
[DisplayName("Uri")]
[ScaffoldColumn(true)]
[Required]
public object uri { get; set; }

[DisplayName("Graphic")]
[ScaffoldColumn(true)]
[UIHint("DBImage")]
public object filecontents { get; set; }
... 
```

I've also removed the *UpdateCheck* but that did not seem to change the behavior:

```
[global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_filecontents", DbType="VarBinary(MAX)")] //, UpdateCheck=UpdateCheck.Never
public System.Data.Linq.Binary filecontents
  {
    get
    {
... 
```

(See commented out *UpdateCheck=UpdateCheck.Never* above)

Kind regards,

Jordan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:46:01.727

我把它放了一个星期，回来后很容易就明白了。有时你只需要出去走走，不要想太多这些事情。

问题是缓存。我通过在 OnDataBinding 中添加 nocache 参数来更改图像处理程序 url：

**老的：**

```
ImageEdit.ImageUrl = "http://localhost/WebServices.CAD/ImageHandler.ashx?uri=" + row.uri; 
```

**新的：**

```
ImageEdit.ImageUrl = "http://localhost/WebServices.CAD/ImageHandler.ashx?nocache=" + System.DateTime.Now.Ticks.ToString() + "&uri=" + row.uri; 
```

按设计工作。

# .htaccess - Rewrite rule for seo - title in url

> ID：15505074
> 
> 赞同：2
> 
> 时间：2013-03-19T16:27:46.523
> 
> 标签：.htaccess, rewrite

Lets say I want users to be able to type this url in:

```
www.website.com/blog/2453/I-gained-0.1%-more-scripting-knowledge-! 
```

I'm trying to include title information in the url for seo benefits.

I also want to include an id for my query. Effectively I want to pick up the id and **ignore** the title stuff that comes after, bearing in mind its user generated text so could contain any special characters in it.

How can I write a .htaccess rewrite rule so that the server reads it as the following with the appropriate GET data:

```
www.website.com/blog.php?id=2453 
```

This is what I have tried but frankly I am way out of my depth here:

```
RewriteRule ^blog/([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/?$  blog.php?id=$1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:09:15.313

`.`除了 URL 中的、`%`和`!`字符之外，您使用的重写规则应该可以工作。这些`%`字符在 URL 中使用是不安全的，因为它在 URL 语法中具有特殊含义。我也不会使用感叹号。

如果 ID 始终为数字，请使用`([0-9]+)`而不是`([A-Za-z0-9-]+)`.

试试这个网址：

```
www.website.com/blog/2453/I-gained-0.1-more-scripting-knowledge 
```

有了这个规则：

```
RewriteRule ^blog/([0-9]+)/[A-Za-z0-9\-\.]+/?$  blog.php?id=$1 [NC,L] 
```

# graphics - Where can I find a tutorial/example or help on "Octree" with XNA?

> ID：15505075
> 
> 赞同：0
> 
> 时间：2013-03-19T16:27:48.007
> 
> 标签：graphics, matrix, xna, minecraft, octree

I am developing a small minecraft style game on XNA. I generates a voxel mode, so I'm looking to be optimized to the maximum my matrix "World"! This is the one I'm looking for example "**How to Use Octree with Xna ?**." Unfortunately, I have not found a tutorial on this on google or other ... I find this strange, because this technology is much used!

I wish I could turn my 100x100x100 matrix containing for each box a bit (1 or 0) indicating whether or not there is a block. Is this a tutorial "Octree" I need to do this? Or can someone show me an example of a transformation matrix3D to a Octree matrice ?

Thousand thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:42:54.987

[XNA 中的静态八叉树，XNA](http://www.xnawiki.com/index.php/Octree)中的[松散八叉树，XNA](http://ploobs.com.br/?p=1622)中的[另一个松散八叉树](http://octtree.codeplex.com/)。

# java - 定义数据结构的泛型/变量类型

> ID：15505081
> 
> 赞同：2
> 
> 时间：2013-03-19T16:28:01.890
> 
> 标签：java, generics, type-conversion

我有一个数据结构（`LinkedHashMap`），但问题是（第二个）值应该是变量类型，因为我可以在那里放置类型`String`或类型`int`或任何原始类型，所以我的问题是：

有没有办法为它定义一个可以获取任何值类型的变量类型？

这就是我所拥有的：

```
private LinkedHashMap<String, String> keyVal; 
```

我想要这样的东西：

```
private LinkedHashMap<String, anyValue> keyVal; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:30:06.850

```
private LinkedHashMap<String, Object> keyVal; 
```

你可以使用`Object`它。但请记住，在尝试从该映射中取回数据时（稍后），您可能难以将其转换`Object`为所需的数据类型，因为您可能不知道实际存在的数据类型。

因此，**建议**避免此类实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:30:00.177

您不能让泛型类​​型成为原始类型。如果您希望能够在地图中存储*任何内容*，则可以将地图的“值”泛型类型设为`Object`：

```
private LinkedHashMap<String, Object> keyVal; 
```

由于自动装箱，您仍然可以存储看起来像原始类型的内容，即

```
keyVal.put("one", 1); 
```

将放置一个`Integer`，即使您指定了一个`int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:31:34.940

不，您可以拥有的最接近的参数是`Object`第二个参数。

现在，我建议重新考虑您需要完成什么，因为这实际上*与*创建泛型的目的背道而驰。

如果你有一个绑定类型并且想要保持一些灵活性，那么你可以使用类似`<String, ? extends SomeType>`.

在 Java 中不建议在同一个数据结构中混合多种类型的对象（无论好坏，都是题外话），但类型安全在防止奇怪的错误方面大有帮助。

试着想想当你真正*需要*检索对象时你会如何处理这个问题……你会假设它们是字符串吗？你打算怎么处理他们？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T16:39:56.697

你说你想要一个 Map<String, *Primitive type* >。

A 由[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2)指定，原语是*NumericType*或`boolean`，*NumericType*是*IntegralType*或*FloatingPointType*。

如果您的需要不是*原始*的，而只是*NumericType*，您可以使用`java.lang.Number`：

```
Map< String, Number > 
```

另一种方法是定义一个 Any 类，它包含所有可能的属性：

```
enum Type {
    NULL,
    INTEGER,
    SHORT,
    FLOAT,
    ...
}

class Any {
   private int   iValue;
   private short sValue;
   private float fValue;
   ...
   private Type  active = Type.NULL;

   public void setInt( int value ) {
      iValue = value;
      active = Type.INTEGER;
   }
   public void setFloat( float value ) {
      fValue = value;
      active = Type.FLOAT;
   }
   ...
   public int getInt() {
      if( type !=  Type.INTEGER ) {
         throw new ClassCastException( type.name() + " is not an integer" );
      }
      return iValue;
   }
   ...
} 
```

如果`getInt()`在持有人上调用，则由您进行一些检查并抛出异常`float`。一切皆有可能，例如像 C 语言那样的转换。

**编辑**

您也想要 String ，而[String 不是*原始*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.3)的.

您必须将以下内容添加`private short sValue;`到`Any`类中：

```
private String sValue; 
```

并将以下内容`SHORT,`放入`Type`枚举中：

```
STRING, 
```

**但是，就像其他人所说，最好的方法是避免这些弱类型** *（法语中的fourre-tout）。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T16:59:35.253

您可以使用

```
private LinkedHashMap<String, Object> keyVal; 
```

使第二种类型的参数尽可能通用。它允许您将任何对象存储为值，因为每个类都扩展了`Object`.

这会导致您不知道地图中的事物是什么类型的问题——您只知道它们是类型`Object`，这意味着您什么都不知道*。*

因此，要再次使用这些对象，您必须将它们转换回它们的原始类型，这可能会导致运行时异常：[`ClassCastException`](https://stackoverflow.com/q/907360/905686).

[泛型](https://en.wikipedia.org/wiki/Generics_in_Java)是关于使用相同代码为不同类型定义数据结构，但如果您想使用泛型类，则必须使用其类型参数对其进行参数化。这确保了类型在运行时是已知的，并且是泛型的巨大优势（避免`ClassCastException`）。但是，您仍然可以指定允许多种类型的更通用的类型。

例如，如果您按照以下方式定义它，您可以存储任何实现`Serializable`.

```
private LinkedHashMap<String, ? extends Serializable> keyVal; 
```

如您所见，这允许您将允许的类型限制为公共属性（即，成为更通用类型的子类）。这样，您将地图的值用作更通用类的对象，因为它是您所知道（并且想知道）的关于对象的一切。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-23T10:24:03.577

1.  最好看看： [Oracle.com 上的泛型课程](http://docs.oracle.com/javase/tutorial/extra/generics/index.html)。
2.  注意什么时候应该使用通配符（？），你应该使用泛型。
3.  `LinkedHashMap<String, Object> keyVal;`不建议在类型中使用 Object 。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-07T15:36:27.550

就像有些人说的，你可以使用 Object 作为泛型变量类型，特别是在使用泛型方法或者不知道用户会来什么数据类型时，就像这个简单的：

```
import java.util.Scanner;

public class GenericMethod {
    public static void main(String[] args) {
        System.out.println("Type something that's yours: ");

        Scanner sc = new Scanner(System.in);

        Object thing;
        thing = sc.next();
        isMine(thing);
    }

    // Generic Method
    public static <T> void isMine(T x) {
        System.out.println(x + " is mine.");
    }
} 
```

# google-analytics - How long custom variables take to appear in Google Analytics?

> ID：15505084
> 
> 赞同：3
> 
> 时间：2013-03-19T16:28:10.703
> 
> 标签：google-analytics

I want to test custom variables in analytics, but I am not sure if they appear as I track them. I have tracked successfully two other variables but I am having problem with the third, the only difference I see is the name that contains spaces `Signed up users`.

Anyway what I want to know is how many time do I have to wait to see custom variable appear?

I am using this code:

```
x=function(){_gaq.push(['_setCustomVar', 3, 'Signed up users', 'true', 3]);_gaq.push(['_trackPageview']);} 
```

And when I run this function real time result mark a visit, anyway I don't see the custom variable tracked, going to try with other variables.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:40:53.403

测试这一点的一种方法是设置基于自定义变量的过滤器 - 因为实时视图，正如它在 GA 界面中所说的那样，“现在服从配置文件过滤器”，您应该能够立即从实时结果中推断出，如果您的自定义变量是否已设置（为此使用测试配置文件，因为过滤器将永久更改您的数据）。

数据显示在标准报告中需要多长时间取决于您的网站（Google 需要计算的数据越多，花费的时间就越长） - 我认为在帮助论坛中它说 4 小时，根据我的经验，它通常会快一点（一到两个小时）。

# mysql - [RuntimeException: SqlMappingError(No rows when expecting a single one)]

> ID：15505088
> 
> 赞同：1
> 
> 时间：2013-03-19T16:28:17.643
> 
> 标签：mysql, scala, playframework-2.0, anorm

Is there a way that I can get Scala Anorm to hanlde empty row results?

I just get this error: [RuntimeException: SqlMappingError(No rows when expecting a single one)]

My method:

```
def findByEmail(email: String): User = {
      DB.withConnection { implicit connection=>
        SQL("SELECT * FROM users WHERE email = {email}").on(
          'email  -> email
          ).as(User.simple.single)
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-06T22:54:02.390

你快到了，不需要使用单打和奇怪的大小写匹配。只需这样做：

```
def findByEmail(email: String): Option[User] = {
  DB.withConnection { implicit connection=>
    SQL("SELECT * FROM users WHERE email = {email}").on(
      'email  -> email
      ).as(User.simple.singleOpt)
  }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-19T17:36:48.563

如果有人遇到这个错误，这就是我解决地雷的方法：

```
 def findByEmail(email: String): User = {
        DB.withConnection { implicit connection=>
          val query = SQL("SELECT * FROM users WHERE email = {email}").on(
            'email  -> email
          )
          simple.single(query()) match {
              case Success(user) => user
              case Error(e) => null
          }
        }
    } 
```

您可以将案例设置为任何

# deployment - Cruisecontrol.net 部署微星

> ID：15505090
> 
> 赞同：0
> 
> 时间：2013-03-19T16:28:21.133
> 
> 标签：deployment, windows-installer, cruisecontrol.net

是否可以使用 CruiseControl.net 将 MSI 部署到远程服务器并在 sql server 上运行数据库脚本？我是 CruiseControl.Net 的新手，正在寻找一个例子。

我尝试了以下 wiki 页面，但部署页面正在建设中：

[http://www.cruisecontrolnet.org/projects/ccnet/wiki/Configuration](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Configuration)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:59:26.917

您可以让 CruiseControl.net 调用 PowerShell 或批处理文件。可以在[此处](http://ccnet.sourceforge.net/CCNET/Executable%20Task.html)找到有关 CruiseControl.net 配置以调用 PowerShell 或批处理文件的更多信息。

从 PowerShell 或批处理文件中，您可以使用[PSExec](http://forum.sysinternals.com/remote-install-of-msi-packages-using-psexec_topic22970.html)为远程服务器安装 MSI 文件。至于在远程服务器上运行数据库脚本，您可以使用[SqlCmd](http://msdn.microsoft.com/en-us/library/ms162773.aspx)。

# php - On an Ajax page called, should I reassign post variables locally, or is it fine to access $_POST as needed?

> ID：15505093
> 
> 赞同：0
> 
> 时间：2013-03-19T16:28:35.227
> 
> 标签：php, variables, post

Is there a speed detriment to accessing $_POST vars versus a local copy? Should I reassign the values locally ie $newFoo = $_POST['foo']; or just access $_POST['foo'] as needed?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:31:45.413

`$_POST`是一个普通的变量数组，它的速度没有什么特别的，所以像使用任何其他变量一样使用它，不需要复制值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:33:05.617

据我所知，可以忽略性能差异（如果有的话），因此您不必重新定义为“局部”变量。但是出于可读性原因，您可能希望这样做，尽管其他一些人出于完全相同的可读性原因更愿意保留“$_Post”方法......

# perl - Pausing a perl script while SFTP transfers files

> ID：15505095
> 
> 赞同：0
> 
> 时间：2013-03-19T16:28:37.580
> 
> 标签：perl, sftp

FYI, I'm a complete newbie with Perl, as in I can spell it and only a little more so I'm trying to learn. What I'm trying to accomplish is using SFTP to transfer files from a Windows machine to a Linux machine.

I've noticed that Perl issues the SFTP get command, but doesn't wait for the transfer to finish so when the Perl script tries to use a file it can't find it. I know there is the sleep command, but the number and size of files will vary on a weekly basis so using sleep(600) seems a little silly.

Is there a standard way to pause a Perl script until SFTP finishes transferring all necessary files?

TIA.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:35:55.960

使用 Net::SFTP 可能已经解决了这个难题，但我的工作场所不允许我下载和安装东西，尤其是在生产环境中。因此，我没有等待典型的官僚机构，而是进行了更多挖掘并发现了这一点：

通过使用包含 SFTP 命令的单独文件以批处理模式调用 SFTP，Perl 脚本必须等待 SFTP 完成执行单独“命令”文件中的命令。因此，通过使用批处理模式选项，只要 SFTP 完成文件传输工作，Perl 脚本就会暂停。

# php - Fill rectangle in the picture with text

> ID：15505096
> 
> 赞同：0
> 
> 时间：2013-03-19T16:28:38.520
> 
> 标签：php, image, algorithm, text, imagemagick

I have got a picture with fixed size and variable number of text (User can define what to show and what do not). Now I want to fill rectangle in the picture with selected text. Simpliest solution would be using fixed coordinates for every text. But as I said before, user can select what to show. I do not want to show "free spaces" just because user do not want to show the text which should be at this place.

I have found this [page](http://valokuva.org/?p=93). The author described exactly what I need. Problem is I do not have Imagick php class on my webserver.

Could you please provide me another function or algorithm for this problem? Thank you lorin

# php - PHP 文件上传导致 Windows Apache 服务器上的文件损坏

> ID：15505104
> 
> 赞同：1
> 
> 时间：2013-03-19T16:28:53.957
> 
> 标签：php, apache, file-upload, brokenimage

我为 PHP 编写了一个文件上传脚本。我在 Windows Apache 服务器上进行测试，但它最终必须在带有 Apache 的 CentOS 服务器上工作。因为我还在调试，所以没有在live linux机器上测试过。谷歌了它，但找不到一个好的解决方案。

发生什么了？当我上传 .png 或 .jp(e)g 文件时，一切顺利。该脚本将我的文件移动到正确的目录，但随后输出一个不可读的文件。检查下面的图像。我上传的部分脚本：

```
if ($posting_photo === true) {
    $uploaded_file = $_FILES['review_photo'];
    $uploaded_file['ext'] = explode('.', $uploaded_file['name']);

    //Only continue if a file was uploaded with a name and an extension
    if ((!empty($uploaded_file['name'])) && (is_array($uploaded_file['ext']))) {
        $uploaded_file['ext'] = secure(strtolower(end($uploaded_file['ext'])));
        $upload_session = secure($_COOKIE[COOKIE_NAME_POST_REVIEW_SESSION]);
        $upload_dir = realpath(getcwd() . DIR_REVIEW_IMAGES) . DIRECTORY_SEPARATOR . $upload_session . DIRECTORY_SEPARATOR;
        $upload_ext = array('jpg', 'jpeg', 'png');

        //Only continue if a file was uploaded in a right way
        if (($uploaded_file['error'] == 0) && ($uploaded_file['size'] > 0) && ($uploaded_file['size'] <= MAX_FILESIZE_REVIEW_PHOTO_BYTES) && (in_array($uploaded_file['ext'], $upload_ext))) {

            //Check if upload dir already exists. If so, there will be probably files in it. So we check for that too. If not, we can start with the first file.
            if (is_dir($upload_dir)) {
                //
                //
                //Part where a new file name gets generated. Not very interesting and it works well, so I left it out on Stack Overflow
                //
                //

            } else {
                mkdir($upload_dir, 0777, true);
                $upload_name = $upload_session . '-1.' . $uploaded_file['ext'];

            }

            //Check if new upload name was generated. If not, something is wrong and we will not continue
            if (!empty($upload_name)) {
                chmod($upload_dir, 0777);

                if (move_uploaded_file($uploaded_file['tmp_name'], $upload_dir . $upload_name)) {
                    $files = array_diff(@scandir($upload_dir), array('.', '..'));

                    //Change slashes on Windows machines for showing the image later
                    $upload_dir = str_replace('\\', '/', $upload_dir);

                }

            }

        }

    }

} 
```

* * *

此处未初始化的所有变量均较早初始化。cookie 是之前设置和检查的，用于唯一的目录和文件名。检查此图像以获取输出文件。左边的 x 来自 Dropbox（Dropbox 说：无法同步……访问被拒绝）。照片查看器窗口显示：无法打开此图片，因为您无权访问文件位置。在浏览器中查看文件会导致权限被拒绝。 [链接到图片](https://dl.dropbox.com/u/9719519/Fora/screenuploadingfiles.png)

谁熟悉这个问题和/或知道解决方案？希望你能在这里帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-26T10:09:56.600

这个也有过一次。这是 PHP 5.3.x 中的一个错误。从 5.3.3 升级到 5.6 后，问题就消失了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:07:53.870

好的，这是有关问题的更新... 上述问题是由我办公室的本地服务器引起的。在我家的本地服务器上，移动后图像很好。所以这不是我的脚本，而是服务器。我猜PHP处理不同的东西。

我办公室的 PHP 版本是 5.4.9 版，家里的 PHP 是 5.3.3 版。也许这些信息可以提供帮助？

# c# - Get the value of all td tags using xpath and html agilty

> ID：15505109
> 
> 赞同：0
> 
> 时间：2013-03-19T16:29:20.347
> 
> 标签：c#, xpath, web-scraping, html-agility-pack

How can I get information out of all td tags in Classen = "string_14" so that I can store it away clean without html code in.

I have thought about this:

```
enter code here
<table class="string_14">
                <tbody><tr>
                    <td>Postadr.:</td> 
                    <td class="tab_space">Stenslivegen 67, 2817 Gjøvik</td> 
                </tr>
                <tr>
                    <td>Telefon:</td> 
                    <td class="tab_space">611 80 710</td>
                </tr>

                <tr>
                    <td>Mobil:</td> 
                    <td class="tab_space">957 92 455</td>
                </tr>
                </tbody>
                </table> 
```

And my code to get it looking like this today, I want help with is to write xpath to name =? how should I write to get a single td.

```
 HtmlDocument doc = new HtmlDocument();
        doc.Load(new StringReader(result));
        HtmlNode root = doc.DocumentNode;

        List<string> list = new List<string>();
        foreach (HtmlNode div in root.SelectNodes("//div[@class='biz_list']"))
        {
            string name = doc.DocumentNode.SelectNodes("//d[@class='string_14']/@tr");
            list.Add(name);
            string att = div.OuterHtml;
            list.Add(att);
        } 
```

What I want out of this is I'm going to scrape a page and then the LATE stage I'll save this down to the xml file.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:50:05.917

我想你想要的是这样的：

```
HtmlNodeCollection collection = doc.DocumentNode.SelectNodes("//table[@class='string_14']//td[@class='tab_space']"); 
```

您可以查阅[XPath 教程](http://www.w3schools.com/xpath/)以了解更多信息。

# git - 如何恢复导致 gitk 树合并的提交？

> ID：15505114
> 
> 赞同：0
> 
> 时间：2013-03-19T16:29:32.177
> 
> 标签：git, merge

我的一个队友做出了承诺并推动了它。它导致了 git 树中的合并。问题是代码被标记了，这个推送使它看起来像提交在标记之前。实际情况是提交在标签之后。合并后还有其他推动。现在，我想从 gitk 树中完全删除这个提交。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:43:01.250

如果不重写历史然后用`git push -f ...`. 如果您想恢复合并提交本身（合并到您的分支中的更改），您可以`git revert <commit-hash>`像使用普通提交一样使用。它将创建一个新的提交，从合并提交中恢复更改。

从树中删除合并提交的简单方法是

*   `git checkout -b TESTING`（创建一个临时分支进行测试）
*   `git branch TMP <commit-on-YOUR-branch-just-before-merge>`
*   `git rebase TMP -i`

您必须在编辑器中删除合并到您的分支的其他分支的所有提交。如果一切顺利：

*   `git branch -f YOUR_BRANCH TESTING`
*   `git push -f ...`

# unix - 如何获取在 unix bash shell 脚本中调用的 PL/SQL 过程的输出变量的值

> ID：15505115
> 
> 赞同：0
> 
> 时间：2013-03-19T16:29:35.107
> 
> 标签：unix

```
#!/usr/bin/env bash

sqlplus -s user@lnpfvd1.world/password<<!

   declare 

   var_truc_result VARCHAR2(255);

   begin 

   brr_truncate_generic_procedure('TABLE_NAME', var_truc_result);

   end;
/
! 
```

我们正在调用`brr_truncate_generic_procedure`which 在变量内部设置一些值（成功/失败）`var_truc_result`。

我们只想在 unix shell 变量中使用这个变量，以便我们可以在此基础上放置一些逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:56:24.600

我现在不能自己测试这个，但是这样的东西应该可以工作：

```
result=`sqlplus / <<SCRIPT| grep ^result | sed "s/^result: //"
set serveroutput on
declare
    var_truc_result VARCHAR2(255);
begin
   brr_truncate_generic_procedure('TABLE_NAME', var_truc_result);
   dbms_output.put_line( 'result: ' || var_truc_result);
end;
/
exit
SCRIPT`

echo var_truc_result is: $result 
```

你也可以试试

```
select var_truc_result as "answer"
from dual 
```

代替 dbms_output 行，但您需要调整 grep/sed

**编辑：**

我在 AskTom 上找到[了这个](http://asktom.oracle.com/pls/asktom/f/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:430819636473)讨论，它提供了上述内容的一些变化等，这也可能有所帮助

# video-streaming - 快速和肮脏的播放设置

> ID：15505120
> 
> 赞同：4
> 
> 时间：2013-03-19T16:29:52.950
> 
> 标签：video-streaming, h.264, vlc, rtsp, live555

我正在尝试使用 VLC 通过非常低的带宽连接来解码和显示来自 RTSP 服务器的 H264 视频流。这样做 VLC 最初设法建立 RTP 流。但片刻之后，视频冻结并停止，同时引发以下错误：

```
main warning: picture is too late to be displayed (missing 2252 ms)
avcodec error: more than 5 seconds of late video -> dropping frame (computer too slow ?)
live555 warning: no data received in 10s, eof ? 
```

当将“网络缓存”增加到约 20 秒时（出于显而易见的原因），这些错误就会消失。但由于这是一个实时视频流，延迟是一个问题，因此增加网络缓存是不可取的。

但是，我不需要 VLC 默认提供的流畅播放和音频同步等花哨的东西。显示最新解码帧的快速而肮脏的解决方案对我来说绰绰有余。我知道这大大减少了使用 Gstreamer 的延迟。所以我正在寻找一种在 VLC 中做到这一点的方法。是否可以使用设置标志或者我必须修改源？

提前致谢

# java - 允许您在构造函数中抛出检查异常的目的是什么？

> ID：15505123
> 
> 赞同：-3
> 
> 时间：2013-03-19T16:29:58.270
> 
> 标签：java

我从来不明白这一点，但为什么 Java 允许你从构造函数中抛出一个检查异常？

```
public class PerformanceLogger{

    public PerformanceLogger() throws Exception{
        //do stuff
    }
} 
```

拥有这样的代码的后果是您无法在类字段级别实例化实例。

```
class MyClass {

    PerformanceLogger p = new PerformanceLogger(); //compile error  
} 
```

唯一有效的是从方法中调用构造函数。那么为什么要打扰呢？如果 Java 不允许在编译时***从构造函数中抛出已检查的异常，这不是更干净吗？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:32:19.343

这与任何返回对象的方法完全相同，不多也不少。

没有理由禁止它。

如果它被禁止，构造函数将如何调用其他抛出异常的方法？通过抓住他们？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:33:18.680

## 您不应该实例化实例变量`inline`：

你应该`declare`他们，然后`assign`他们在构造函数中。

```
class MyClass 
{
    final PerformanceLogger p;

    public MyClass()
    {
        try { p = new PerformanceLogger(); }
        catch ( final Exception e ) { /* do something with it here */ } 
    }
} 
```

`static`你会以同样的方式实例化一个变量

```
class MyClass 
{
    static final PerformanceLogger P;

    static
    {
        try { P = new PerformanceLogger(); }
        catch ( final Exception e ) { /* do something with it here */ } 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:35:09.340

类字段初始化由编译器自动移动到构造函数中，即：

```
public class MyClass {
    private PerformanceLogger p = new PerformanceLogger();
} 
```

严格等同于：

```
public class MyClass {
    private PerformanceLogger p;
    public MyClass() {
        p = new PerformanceLogger();
    }
} 
```

这样，您可以用 try-catch 块包围您的初始化。

尝试将字段初始化保留在构造函数中以避免此类问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:37:51.770

您可以使用初始化块来实例化它们：

```
class MyClass {
  PerformanceLogger p;
  {
    try {
      p = new PerformanceLogger();
    } catch (Exception e) {
      // Handle the exception here (omitted for brevity).
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T16:38:16.683

我们可以在构造函数中编写代码，有可能发生异常。我们必须向调用类对象的方法抛出异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T16:39:20.060

你永远不知道，它什么时候有用。考虑在创建对象时需要执行一些 IO 操作的场景。构造函数是这样做的最佳场所。当你执行任何 IO 操作或任何不可靠的操作时，必然会出现异常。所以构造函数只有一种方式来传达对象创建失败，即通过抛出异常，因为它们不能返回任何值。

还有一件事，您可以使用构造函数在静态或初始化块以及方法以外的方法中抛出检查的异常来创建此类对象。

# ruby - Ruby - 如何根据值有效地从哈希中获取数据

> ID：15505126
> 
> 赞同：1
> 
> 时间：2013-03-19T16:30:01.693
> 
> 标签：ruby, search, hash, key-value

我有这样的哈希（输出`SOURCE.inspect`）：

> ```
> [{:id=>"1", :day=>"Monday", :message=>"... text ..."}, {:id=>"2", :day=>"Friday", :name=>"... message ..."}, ...] 
> ```

我需要获取**day == Monday**的所有“项目” ，但该怎么做呢？我试过了

```
SOURCE.select{|key, hash| hash[:day] == "Monday" } 
```

但这是错误的......而且，文件很大（几乎 1MB 的文本），在这个哈希中搜索的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:32:39.790

```
SOURCE.select {|x| x[:day] == "Monday" } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T16:35:56.287

`select`在数组上为您提供一个元素 - 在您的情况下，是一个哈希。所以你可以这样做：

```
SOURCE.select { |hash| hash[:day] == "Monday" } 
```

# mysql - MySQL 计数 IF 和 JOIN

> ID：15505127
> 
> 赞同：1
> 
> 时间：2013-03-19T16:30:05.857
> 
> 标签：mysql, count, multiple-tables, ringcentral

我有两张桌子：

1.  `deskcases`： `| CaseID | Resolved At(Date) | Labels |`

2.  `ringcentral`： `| Date | Type | Action Result |`

我的目标是在前 7 天获得以下输出：

```
| Date | Count of TotalResolvedCases | Count of Total Calls | 
```

我需要在两个单独的表中计算案例和呼叫，然后按日期加入和分组计数。我还在处理两个表中不同的日期格式，因此古怪的 group by 和 join 函数。

我还需要让加入包括前 7 天的所有日期（`deskcases`有所有日期，所以我认为 INNER JOIN 应该在这里工作吗？）

要关闭，我尝试在下面运行以下查询，但在一两分钟后它只是搅动而没有结果。关于如何使它工作的任何想法？预先感谢您的帮助！:-)

（运行 MySQL 5.0.96）

```
SELECT
DATE_FORMAT(
    deskcases.`Resolved At`,
    '%Y-%m-%d'
)AS Date1,
(
    SELECT
        COUNT(deskcases.`Case #`)
    FROM
        deskcases
    WHERE
        deskcases.Labels NOT LIKE '%SPAM%'
    AND deskcases.Labels NOT LIKE '%Online Orders%'
    AND deskcases.Labels NOT LIKE '%Internal SPAM%'
    AND deskcases.`Resolved At` > NOW()- INTERVAL 8 DAY
)AS TotalResolvedCases,
(
    SELECT
        COUNT(ringcentral.Counter)
    FROM
        ringcentral
    WHERE
        `ringcentral`.`Type` = 'Voice'
    AND `Action Result` = 'Accepted'
    AND ringcentral.`Date` > NOW()- INTERVAL 8 DAY
)AS TotalCalls
FROM
 deskcases
INNER JOIN ringcentral ON DATE_FORMAT(
 deskcases.`Resolved At`,
 '%Y-%m-%d'
)= ringcentral.Date
GROUP BY
 Date1
ORDER BY
 Date1 ASC 
```

# 编辑

我可以稍微编辑一下以给我一些结果，但似乎我正在计算所有案例和使用我的子选择查询的调用，并且总数没有按日期分组。这是代码：

```
SELECT
DATE_FORMAT(
    deskcases.`Resolved At`,
    '%Y-%m-%d'
)AS Date1,
(
    SELECT
        COUNT(deskcases.`Case #`)
    FROM
        deskcases
    WHERE
        deskcases.Labels NOT LIKE '%SPAM%'
    AND deskcases.Labels NOT LIKE '%Online Orders%'
    AND deskcases.`Case Status` LIKE '%Resolved%'
)AS TotalResolvedCases,
(
    SELECT
        COUNT(ringcentral.Counter)
    FROM
        ringcentral
    WHERE
        `ringcentral`.`Type` = 'Voice'
    AND `Action Result` = 'Accepted'
)AS TotalCalls
FROM
  deskcases
LEFT OUTER JOIN ringcentral ON DATE_FORMAT(
  deskcases.`Resolved At`,
  '%Y-%m-%d'
)= ringcentral.Date
WHERE deskcases.`Resolved At` > NOW()- INTERVAL 8 DAY
GROUP BY
  Date1
ORDER BY
  Date1 ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:09:40.893

在这种情况下，您绝对不应该按时加入。

例如，您可能有以下数据：

```
deskcases                           ringcentral
---------                           -----------
date      | whatever_d              date      | whatever_r
----------------------              ----------------------
today       x                       yesterday   u
yesterday   y
yesterday   z 
```

现在，当你加入他们时，你会得到：

```
joinedTable
-----------
date      | whatever_d  |  whatever_r
-------------------------------------
today       x 
yesterday   y              u
yesterday   z              u 
```

糟糕，您从铃声表中获得了 2 次条目，但您只想要 1 次。

那么，如何获取数据？要么编写 2 个语句，要么将它们与`UNION`：

```
SELECT
DATE(`Resolved At`) AS Date1,
"Deskcases" AS fromTable,
COUNT(*) AS TotalNumber
FROM
        deskcases
    WHERE
        deskcases.Labels NOT LIKE '%SPAM%'
    AND deskcases.Labels NOT LIKE '%Online Orders%'
    AND deskcases.Labels NOT LIKE '%Internal SPAM%'
    AND deskcases.`Resolved At` > CURDATE()- INTERVAL 8 DAY
GROUP BY 1, 2
UNION ALL
SELECT
`Date` AS Date1,
"ringcentral" AS fromTable,
COUNT(*) AS TotalNumber
FROM
        ringcentral
    WHERE
        `ringcentral`.`Type` = 'Voice'
    AND `Action Result` = 'Accepted'
    AND ringcentral.`Date` > CURDATE()- INTERVAL 8 DAY
GROUP BY 1, 2 
```

另请注意，我更改`NOW()`为`CURDATE()`. 在deskcases 表中，您的日期列似乎是一个时间戳。当您从“2013-03-20 10:06:00”中减去 8 天时，您将得到“2013-03-12 10:06:00”，因此您将丢失“2013-03-12”之间的所有行00:00:00' 和 '2013-03-12 10:05:59'。我也只是使用了`DATE()`函数而不是`DATE_FORMAT()`. `DATE_FORMAT()`在很多方面都是一个非常好的和有用的功能，但在这种情况下，你必须在使用时输入更少的字符`DATE()`:)

**更新：**

```
SELECT 
Date1, 
SUM(CASE WHEN fromTable = 'Deskcases' THEN TotalNumber ELSE 0 END) AS TotalDeskcases,
SUM(CASE WHEN fromTable = 'ringcentral' THEN TotalNumber ELSE 0 END) AS TotalRingcentral 
FROM (
SELECT
DATE(`Resolved At`) AS Date1,
'Deskcases' AS fromTable,
COUNT(*) AS TotalNumber
FROM
        deskcases
    WHERE
        deskcases.Labels NOT LIKE '%SPAM%'
    AND deskcases.Labels NOT LIKE '%Online Orders%'
    AND deskcases.Labels NOT LIKE '%Internal SPAM%'
    AND deskcases.`Resolved At` > CURDATE()- INTERVAL 8 DAY
GROUP BY 1, 2
UNION ALL
SELECT
`Date` AS Date1,
'ringcentral' AS fromTable,
COUNT(*) AS TotalNumber
FROM
        ringcentral
    WHERE
        `ringcentral`.`Type` = 'Voice'
    AND `Action Result` = 'Accepted'
    AND ringcentral.`Date` > CURDATE()- INTERVAL 8 DAY
GROUP BY 1, 2
) sq
GROUP BY Date1 
```

# c# - Linq：选择列表包含必须在另一个列表中的属性的对象

> ID：15505130
> 
> 赞同：3
> 
> 时间：2013-03-19T16:30:14.633
> 
> 标签：c#, linq

我已经阅读了许多使用 linq 和列表的解决方案，但我似乎无法找到解决问题的方法。我已经描述了下面的情况。详细信息列表包括系统中的每个详细信息。

```
List<Detail> allDetails

Detail
    List<Program> programs

Program
    int ID
    int code 
```

我有一个特定角色有权访问的程序 ID 列表。

```
int[] specificPrograms 
```

要求是我需要从 allDetails 返回一个 Details 列表，其中 allDetails 中的 Detail 程序列表必须全部包含在 specificPrograms 列表中。

例如：如果有 2 个详细信息包含以下程序

```
Detail 1
Programs   ID        Code
---------------------------------
           1         111
           2         222
           3         333
           4         444

Detail 2
Programs   ID        Code
---------------------------------
           1         111
           3         333 

SpecificPrograms contains IDs: 1, 3, 4 
```

只返回详细信息 2，因为每个详细信息中的程序必须存在于 specificPrograms 列表中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T16:33:27.137

```
var result = allDetails.Where(detail => detail
                 .programs.All(x => SpecificPrograms.Contains(x.ID))); 
```

# php - 带延迟的while循环输出

> ID：15505131
> 
> 赞同：1
> 
> 时间：2013-03-19T16:30:17.950
> 
> 标签：php

我正在使用 while 循环来显示最后 30 张专辑缩略图，但正如您所知，一次 30 张照片会减慢网页加载时间，我希望网页完全加载后我想以 5 秒的间隔加载这 30 张照片。网页完全加载 5 秒后将加载前 5 张照片，然后在 5 秒间隙后再次加载下 5 张照片我知道我可以使用 6 个查询来执行此操作，但为什么要浪费服务器资源，所以我想要一个查询但加载为每个用户方便。这是我的 while 循环

```
 $res = mysql_query("SELECT * from `"tableA where cat='photos' order by created desc limit 30");
    while($row = mysql_fetch_array($res)) {
    $photo .= thumbnail($row,150);
        } 
```

之后，无论我想去哪里，我都可以打电话给 $photo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:34:13.770

最好的方法是使用 javascript（和 jQuery 更方便）。例如，查看这个[Lazy Loading](http://www.appelsiini.net/projects/lazyload) jQuery 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:45:42.180

试试这个..我还修正了你查询中的引号..

```
<?php
$round =1; 
$res = mysql_query("SELECT * from `tableA` where `cat`='photos' order by created desc limit 30");
    while($row = mysql_fetch_array($res)) 
    {
        $photo .= thumbnail($row,150);
        if (($round % 5) == 0 ) { // action only happens when round is divisble by 5
            sleep(5); // wait 5 seconds
        }
        $round += 1;
    }
 ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:32:11.130

您应该输出一些标记，其中包含图像的 URL 或 Javascript 可以从中重新创建 URL 的数据，然后，在客户端，您可以处理从该标记动态创建图像，有延迟等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T16:47:49.617

在您的情况下，该页面仅在执行所有 PHP 之后才显示给用户，因此您不能指望 PHP 延迟某些显示。

正如已经提到的，您必须在客户端进行（可能在 Javascript 中）。一种方法是构造（使用 PHP）一个包含所有图像 URL 的 Javascript 数组，然后以适当的延迟循环遍历该数组。

服务器端将如下所示：（编辑：假设 tableA 包含名为“url”的列）

```
$images = array();
$res = mysql_query("SELECT * from `tableA` where cat='photos' order by created desc limit 30");
while($row = mysql_fetch_array($res)) {
    $images[] = $row['url'];
}
echo json_encode($images); 
```

# symfony - KnpPaginatorBundle 2.3 设置参数不转换对象

> ID：15505135
> 
> 赞同：0
> 
> 时间：2013-03-19T16:30:22.007
> 
> 标签：symfony

我尝试在 symfony 2.2.1 中使用最新版本的 af knp_paginator

我的查询是：

```
$qb = $em->getRepository('TemplateDefaultBundle:Member')->createQueryBuilder('m');

$query = $qb->select('m, p.id')
            ->join('m.photos', 'p' )
            ->where('m.status = 1')
            ->where('m.game = :game')
            ->andWhere('m.status = 1')
            ->setParameter('game', $this->game); 
```

`this->game`好对象在哪里。

有用：

```
$query->getQuery()->execute(); 
```

它**不起作用**：

```
$pagination->paginate( $query->getQuery(), $this->get('request')->query->get('page', 1), 6 ); 
```

并提供我拥有的探查器

```
WHERE m0_.game_id = 'Object(Template\\DefaultBundle\\Entity\\Game)' AND m0_.status = 1 
```

我的作曲家.json：

```
 "symfony/symfony": "2.2.*",...
    "knplabs/knp-paginator-bundle": "2.3", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:31:28.723

在您的查询中，您传递的是对象`game`而不是它的`id`.
要获得您想要的结果，请替换`setParameter('game', $this->game)`为`setParameter('game', $this->game->getId())`.

所以你的查询变成：

```
$query = $qb->select('m, p.id')
        ->join('m.photos', 'p' )
        ->where('m.status = 1')
        ->where('m.game = :game')
        ->andWhere('m.status = 1')
        ->setParameter('game', $this->game->getId()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T21:52:45.037

为了避免 ->getId() 目前的解决方法，可以使用分页器包的下一个组合：

```
"knplabs/knp-components": "1.2.1",
"knplabs/knp-paginator-bundle": "~2.3" 
```

# php - 正则表达式 '#/true|1|on|yes/i#' 仅适用于第二个和第三个单词

> ID：15505139
> 
> 赞同：0
> 
> 时间：2013-03-19T16:30:25.233
> 
> 标签：php, regex, preg-match

我正在尝试验证 php 中的真/假开关。用户输入可以是“true”、“1”、“on”或“yes”——而且它应该不区分大小写。为什么我的正则表达式只适用于“1”和“on”？

测试.php：

```
define("REGEXP_TRUE", '#/true|1|on|yes/i#');

echo      preg_match( REGEXP_TRUE, "true" );
echo "\n".preg_match( REGEXP_TRUE, "1" );
echo "\n".preg_match( REGEXP_TRUE, "on" );
echo "\n".preg_match( REGEXP_TRUE, "yes" )."\n"; 
```

输出：

```
[mles@worker]$ ./bin/php test.php 
0
1
1
0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:32:32.633

您错误地放置了双定界符`#/`，`/i#`因此另一个“定界符”是正则表达式的正常部分，并且`/i`不区分大小写的修饰符不起作用，它只是正则表达式的一部分

应该只是

```
define("REGEXP_TRUE", '/true|1|on|yes/i'); 
```

# javascript - jquery在数据库中的php cicle中悬停时显示div

> ID：15505147
> 
> 赞同：0
> 
> 时间：2013-03-19T16:30:39.993
> 
> 标签：javascript, jquery, html, css

在生成产品列表时，我实际上遇到了 div id 的问题。我在文本链接上使用淡入淡出和隐藏效果

这是一部分代码：

javascript

```
$('.theLink').hover(
    function () {
        $('.theDiv').fadeIn();
    },
    function () {
        $('.theDiv').hide();
    }); 
```

css

```
.theDiv {
    display: none;
    margin-top:-7px;
    background-color:#fff;
    width: 148px;
    line-height:100%;
    border:1px solid #c3c3c3;
    background:#fff;
    -moz-border-radius:3px;
    -webkit-border-radius:3px;
    border-radius:3px;
    position: relative;
    padding: 10px;
} 
```

html

```
<div class="theLink">Compatibilit&agrave;</div>    
<div class="theDiv">' . $something . '</div> 
```

变量`$something`正常工作并在列表中的产品中的每个项目上显示正确的详细信息当我检查它时，`theLink`它会在列表的每个项目中打开`theDiv`，而不是仅在当前项目中打开。

我希望已经清楚了。提前感谢您的帮助。

添加：

我将添加实现的代码，让您了解零件的放置位置

```
<div class="content">
    <div class="bordobasso">
        <div class="theLink">
            <div class="compatibilita">Compatibilit&agrave;</div>
        </div>
        <div class="dettagliprodotto">Acquista</div>
    </div>
</div><div class="theDiv">' . $new_products['products_id'] . '</div> 
```

`content`已经有另一个 jquery 函数来扩展列表中的项目并放置一些 css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:32:43.960

测试这个：

```
$('.theLink').hover(
    function () {
        $(this).closest('.content').next('.theDiv').fadeIn();
    },
    function () {
        $(this).closest('.content').next('.theDiv').hide();
}); 
```

'this' 变量指示 jquery 在哪个元素中查找 'theDiv' 元素

示例：http: [//jsfiddle.net/k5hs8/](http://jsfiddle.net/k5hs8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:34:54.843

我建议这样做：

```
$('.theLink').hover(
    function () {
        $('.theDiv', $(this).parent()).fadeIn();
    },
    function () {
        $('.theDiv', $(this).parent()).hide();
}); 
```

使用这个 html：

```
<div>
<div class="theLink">Compatibilit&agrave;</div>    
<div class="theDiv">' . $something . '</div>
</div> 
```

# sql - 基于where子句的mysql条件选择查询

> ID：15505149
> 
> 赞同：2
> 
> 时间：2013-03-19T16:30:48.383
> 
> 标签：sql, where-clause

我有这个查询

```
SELECT column1 FROM Table1 WHERE column1 LIKE CONCAT('%', :regex, '%') OR (column2 IS NOT NULL AND column2 LIKE CONCAT('%', :regex, '%') 
```

`column1`如果记录`Table1`满足 where 子句，则始终返回值。但我想要的是，如果满足 where 子句`column1`的第一部分，则查询返回值，如果满足第二部分，则返回值。我应该如何修改查询以实现此结果？`LIKE CONCAT('%', :regex, '%')``column2``(column2 IS NOT NULL AND column2 LIKE CONCAT('%', :regex, '%')`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:33:52.737

一种选择是使用`CASE`语句：

```
SELECT 
    CASE 
       WHEN column1 LIKE CONCAT('%', :regex, '%') THEN column1
       ELSE column2 
    END yourcolumn
FROM Table1
WHERE column1 LIKE CONCAT('%', :regex, '%') 
    OR (column2 IS NOT NULL AND column2 LIKE CONCAT('%', :regex, '%') 
```

# twitter-bootstrap - 如何回流引导跨度 与 Angularjs？

> ID：15505151
> 
> 赞同：1
> 
> 时间：2013-03-19T16:30:51.077
> 
> 标签：twitter-bootstrap, angularjs

我是 Angularjs 的新手，对如何做我想做的事没有直觉。

我有一个显示一堆属性的部分。如果模型不包含该属性，则通过 AngularUi 的 ui-if 像这样删除该项目。

```
<div class="row-fluid">
    <div class="span3" ui-if="!!model.Prop1">Prop1: {{ model.Prop1 }}</div>
    <div class="span3" ui-if="!!model.Prop2">Prop2: {{ model.Prop2 }}</div>
    <div class="span3" ui-if="!!model.Prop3">Prop3: {{ model.Prop3 }}</div>
    <div class="span3" ui-if="!!model.Prop4">Prop4: {{ model.Prop4 }}</div>
</div> 
```

我想要做的是，例如，如果两个属性为空，则`span6`改为使用引导程序跨度。基本上我希望它为实际具有数据的属性平均分割 span12 并删除其他属性。ui-if 可以很好地从 dom 中删除空属性，但是现在我该如何调整`span<x>`'s 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:35:09.970

您可以使用[ng-class](http://docs.angularjs.org/api/ng.directive%3angClass)或者您只需插入 class 属性：

```
<div class="span{{number}}" ui-if="!!model.Prop1">Prop1: {{ model.Prop1 }}</div> 
```

在控制器中你会这样做：

```
$scope.number = 6; 
```

当然，设置的逻辑`$scope.number`会比设置更复杂，并且应该驻留在[Controller](http://docs.angularjs.org/guide/concepts#controller)中。

# android - 安卓。我想添加动作以将动作添加到 main.xml 按钮

> ID：15505152
> 
> 赞同：1
> 
> 时间：2013-03-19T16:30:54.563
> 
> 标签：android, button, action, android-actionbar, onclicklistener

我想添加操作以将操作添加到 main.xml 按钮。

这是我的代码：

`<menu xmlns:android="http://schemas.android.com/apk/res/android" >`

```
<item
    android:id="@+id/SendMes"
    android:showAsAction="ifRoom|withText"
    android:textColor="#ff0000"
    android:textColorHighlight="#ff0000"
    android:textColorHint="#ff0000"
    android:textColorLink="#ff0000"
    android:enabled="True"
    android:title="Pargi"/> 
```

只是如何启动像 onclicklistner 这样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:33:37.347

您需要`onOptionsItemSelected`在活动中覆盖方法以捕获所选项目的点击事件：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

   //get the item id, match with required one and do your stuff

} 
```

确保你也注入你的菜单 xml 文件：

```
@Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    getMenuInflater().inflate(R.menu.your_whatever_menu_file, menu);
    return true;
} 
```

有关更多信息，请阅读[此](http://mobileorchard.com/android-app-development-menus-part-1-options-menu/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:34:23.497

使用`onOptionsItemSelected`这样的：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case R.id.SendMes:
    //Do whatever you want
        return true;
    default:
        break;
    }

    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:36:05.867

你试过添加>> android:onClick="YOUR_METHOD_IN_ACTIVITY" 吗？

# nhibernate - Nhibernate Cascade=none 没有按预期工作

> ID：15505153
> 
> 赞同：1
> 
> 时间：2013-03-19T16:30:58.463
> 
> 标签：nhibernate

我有两个类，供应商和联系人。供应商是联系人的父级。供应商和联系人之间存在一对多的关系。我已将供应商和公司之间的级联关系设置为无。这意味着（至少对我而言）当我更改供应商的联系人并保存供应商时，此保存操作不应级联到联系人，因此，我对联系人所做的任何更改都不应保留到数据库中。

**然而，事实并非如此**。当我更改联系人的名字并保存其父级时，保存操作将级联到联系人。例如，使用下面的测试函数，我看到一个名字为“This_new_first_name_should_not_be_saved”的联系人。最初，我没想到会看到此更改持续到数据库中。

我只是误解了级联的工作原理还是我的代码有问题？

测试.cs

```
[Test]
        public void RemoveManyToOneAssociation()
        {
            var container = BuildContainer();
            var vendorRepo = container.Resolve<Repository<Vendor>>(); //Get respository
            var contactRepo = container.Resolve<Repository<Contact>>(); //Get repository

            var vendor = vendorRepo.FirstOrDefault();
            var contact = vendor.Contacts.FirstOrDefault();
            contact.FirstName = "This_new_first_name_should_not_be_saved"; 
            vendor.Contacts.Remove(contact);
            vendorRepo.Save(vendor); 
            //The saving action above should not cascade to contacts because we have set cascade to "none"

        } 
```

**供应商.hbm.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="DataAccess"
                   namespace="DataAccess">

  <class name="Vendor">
    <id name="Id" type="int" unsaved-value="0">
      <generator class="hilo" />
    </id>
    <property name="VendorName" />
    <set name="Contacts" inverse="true" cascade="none">
      <key column="VendorID" />
      <one-to-many class="Contact"/>
    </set>
    <many-to-one name="Company" column="CompanyID"></many-to-one>
  </class>

</hibernate-mapping> 
```

**联系人.hbm.xml**

```
 <?xml version="1.0" encoding="utf-8" ?>
    <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                       assembly="DataAccess"
                       namespace="DataAccess">

      <class name="Contact">
    <id name="Id" type="int">
      <generator class="hilo" />
    </id>
    <property name="FirstName" />
    <property name="LastName" />
    <many-to-one name="Vendor" class="Vendor" column="VendorID"></many-to-one>
  </class>

</hibernate-mapping> 
```

**供应商.cs**

```
public class Vendor : Entity<int>
    {
        public Vendor()
        {
        }

        public Vendor(string name)
        {                       
            VendorName = name;
        }

        public virtual string VendorName { set; get; }

        public virtual ISet<Contact> Contacts { set; get; }

        public virtual Company Company { set; get; }

        public virtual void CopyTo(Vendor target)
        {
            target.VendorName = VendorName;
            target.Company = Company;
        }
    } 
```

**联系人.cs**

```
public class Contact : Entity<int>
    {
        public Contact()
        {
            //it's not the best practice to initialize virtual properties in constructor but we're controlling 
            //the inheritance in this so doing this should be fine
            // http://stackoverflow.com/a/469577/89605
            FirstName = "";
            LastName = "";
        }

        public Contact(string firstName, string lastName)
        {
            FirstName = firstName;
            LastName = lastName;
        }

        public virtual string FirstName { set; get; }
        public virtual string LastName { set; get; }
        public virtual Vendor Vendor { set; get; }

        public virtual void CopyTo(Contact contact)
        {
            contact.FirstName = FirstName;
            contact.LastName = LastName;
        }
    } 
```

**更新** * *Repository.cs* *

```
public class Repository<T> where T : class
    {
        private ISession _session;

        public Repository(ISession session)
        {
            _session = session;
        }

        public virtual T GetById(int id)
        {
            return _session.Get<T>(id);
        }

        public virtual T LoadById(int id)
        {
           return _session.Load<T>(id);
        }

        public virtual List<T> GetAll()
        {
                return _session.Query<T>().ToList();
        }

        public virtual T FirstOrDefault()
        {
            return _session.Query<T>().FirstOrDefault();
        }

        public virtual void Save(T entity)
        {
            using (ITransaction _transaction = _session.BeginTransaction())
            {
                 _session.Save(entity);
                _transaction.Commit();                
            }
        }

        public virtual void Delete(T entity)
        {
            using (ITransaction _transaction = _session.BeginTransaction())
            {
                _session.Delete(entity);
                _transaction.Commit();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:43:11.500

As you have already inferred, you are misunderstanding how cascading works. More precisely, how *NHibernate* works.

All changes you make to already-persistent entities are persisted on `Flush`.

A call to `session.Save()` on an entity retrieved using the same session is a NO-OP (I have to assume that's what your `Repository<T>.Save()` method does, as I don't have your sources)

# c - 将 void 指针转换为 C 中的 uint64_t 数组

> ID：15505154
> 
> 赞同：5
> 
> 时间：2013-03-19T16:31:02.417
> 
> 标签：c, pointers, memory, void-pointers, dereference

我目前正在使用 Linux 内核模块，我需要访问一些存储在数组中的 64 位值，但是我首先需要从 void 指针进行转换。

我正在使用`phys_to_virt`返回 void 指针的内核函数，我不完全确定如何实际使用此 void 指针来访问它指向的数组中的元素。

目前我正在这样做：

```
void *ptr;
uint64_t test;

ptr = phys_to_virt(physAddr);
test = *(uint64_t*)ptr;
printk("Test: %llx\n", test); 
```

我从测试中得到的值不是我期望在数组中看到的，所以我很确定我做错了什么。我需要访问数组中的前三个元素，因此我需要将 void 指针转换为 uint64_t[] 但我不太确定如何执行此操作。

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T18:35:57.770

> 我正在使用返回 void 指针的内核函数 phys_to_virt，我不完全确定如何实际使用此 void 指针来访问它指向的数组中的元素。

是的，[`phys_to_virt()`](http://lxr.free-electrons.com/source/arch/arm/include/asm/memory.h?a=avr32#L223)确实返回一个`void *`. 的概念[`void *`](https://stackoverflow.com/questions/692564/concept-of-void-pointer-in-c-programming)是它是无类型的，因此您可以将任何内容存储到其中，是的，您需要将其类型转换为某些内容以从中提取信息。

```
ptr = phys_to_virt(physAddr); // void * returned and saved to a void *, that's fine

test = *(uint64_t*)ptr; // so: (uint64_t*)ptr is a typecast saying "ptr is now a 
                        //      uint64_t pointer", no issues there
                        // adding the "*" to the front deferences the pointer, and 
                        // deferencing a pointer (decayed from an array) gives you the
                        // first element of it. 
```

所以是的，`test = *(uint64_t*)ptr;`将正确地进行类型转换并为您提供数组的第一个元素。注意你也可以这样写：

```
test = ((uint64_t *)ptr)[0]; 
```

您可能会发现它更清楚一点，并且意味着同样的事情。

# c# - 将多行 XML 添加到数据集，然后将其放入数据网格中

> ID：15505158
> 
> 赞同：0
> 
> 时间：2013-03-19T16:31:14.893
> 
> 标签：c#, xml, dataset

我有以下代码（C#）：

```
FinalXMLString = FinalXMLString + "<row " + xmlString + " />";
                xmlString = "";
                dataList.Clear();

            }

            StringReader streamreader = new System.IO.StringReader(FinalXMLString);
            XmlTextReader xmlreader = new System.Xml.XmlTextReader(streamreader);
            dataSet.ReadXml(xmlreader); 
```

我的 FinalXMLString 如下所示：

```
<row EntryID = \"1\" ManufacturerID = \"59\" Name = \"Conbraco hkhkhklh\" AuditDate = \"2/22/2013 10:22:46 AM\" SqlLogin = \"UNITED-SYSTEMS\\jessical\" Application = \"G5;Desktop;admin\" ChangeType = \"U\"  /><row EntryID = \"2\" ManufacturerID = \"59\" Name = \"Conbraco hkhkhklh\" AuditDate = \"3/18/2013 4:14:21 PM\" SqlLogin = \"uss2012SQL01\" Application = \"G5;Desktop;admin\" ChangeType = \"U\"  />" 
```

那是来自调试器模式，所以反斜杠仍然存在。问题是 ReadXml 每次都失败。上面的xml格式不正确吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:53:27.657

基于该 xml 字符串，您有两个根元素。这是您的 FinalXmlString 的简化示例：

```
<row />
<row /> 
```

尝试将这些元素包装在 rows 元素中示例：

```
<rows>
  <row />
  <row />
</rows> 
```

# asp.net - 为什么我的查询字符串会被 iPhone 上的 Chrome Mobile 和 Kindle Fire 的 Silk 浏览器修改？

> ID：15505160
> 
> 赞同：1
> 
> 时间：2013-03-19T16:31:21.237
> 
> 标签：asp.net, google-chrome, mobile, amazon-silk

我有一个带有以下 url [https://pv.xxxxx.org/Y/Students.aspx](https://pv.xxxxx.org/Y/Students.aspx)的门户应用程序，至少它在我的 PC 上的任何网络浏览器中都是这样显示的。在我的 Kindle Fire HD (Silk) 或 iPhone (Chrome) 上，它显示为

[https://pv.xxxxx.org/(F(gXjx4o3HVBTt2dUj-0_fg8JrTaBqvjZUE7WjynRNoYUKpUo3YFpP6KD92KXl6XSeJE633w9eetXNHJhE_bXBrMe8wcd9FKivh16Ibrz4a06dZd4UAxyHTxK2euBM8gRlqzEmgLnQmy830rW2UtMwfmuNJQVwsvyz72EaLNgTkf01))/Y/Students.aspx](https://pv.xxxxx.org/(F(gXjx4o3HVBTt2dUj-0_fg8JrTaBqvjZUE7WjynRNoYUKpUo3YFpP6KD92KXl6XSeJE633w9eetXNHJhE_bXBrMe8wcd9FKivh16Ibrz4a06dZd4UAxyHTxK2euBM8gRlqzEmgLnQmy830rW2UtMwfmuNJQVwsvyz72EaLNgTkf01))/Y/Students.aspx)

只要我单击 Web 表单应用程序中的任何链接，系统就会将我注销。我已经在系统中编写了相当重的错误处理代码，因此如果出现任何问题，它会向我发送一封电子邮件并将日志记录到数据库和事件日志中，而我什么也得不到。我无法重现该问题，因为它仅发生在这两个移动设备（我可以访问）上，并且我无法在其上运行调试器。

其他一些信息不会对我在 iPhone 上的 Safari 中的 url 造成不良影响。我确实使用查询字符串来传递变量，但不是在您第一次加载应用程序时，这是在最终用户（在本例中为我）经过身份验证并位于登录页面之后。

所以我的问题是为什么要修改它，我可以让它停止，如果不能，我该如何修复它？我一直在努力寻找有关该问题的任何提及，更不用说通过谷歌搜索找到解决方案了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:02:30.323

我的门户应用程序正在运行 asp.net 4.0，我无法进入 4.5，因为我正在运行 Windows 2003 服务器，它不会让我安装它。所以这个问题与任何运行 4.5 或更高版本的人无关。在我上面提到的浏览器中，他们采用基于表单的身份验证并将其设置为无 Cookie 模式。我假设，虽然我不确定，但 Querystring 的添加是身份验证令牌。

为了解决这个问题，让我的最终用户不必弄乱他们的 cookie 设置，我用以下代码更新了我的 web.config：

```
<authentication mode="Forms" >
  <forms loginUrl="~/Account/LogOn" timeout="2880" cookieless="UseCookies" />
</authentication> 
```

该代码片段的关键部分是：

```
cookieless="UseCookies" 
```

一旦我更新了 Web.Config，Querystring 的添加就消失了，我能够使用 chrome 的开发人员工具观察到 .aspxauth 身份验证令牌的创建。

为了完整起见，我在这里添加了解释，这就是我最终找到答案的地方：

[在 iOS 上使用 Google Chrome 浏览器在 ASPNET 站点上进行 FormsAuthentication](http://www.hanselman.com/blog/FormsAuthenticationOnASPNETSitesWithTheGoogleChromeBrowserOnIOS.aspx)

谢谢斯科特·汉塞尔曼先生。

# excel - 删除超链接，保留公式和格式

> ID：15505162
> 
> 赞同：0
> 
> 时间：2013-03-19T16:31:22.340
> 
> 标签：excel, hyperlink, format, formula

我不太擅长 Excel，但我会尝试解释我的问题。不知何故，一个 Excel 是通过计时器创建的，并且不知何故有 100 个不可见的超链接散布在整个工作表中。我试图找到一种从 A1:k50 复制的方法，删除所有超链接，但保留公式、值和格式。我在网上找到了这段代码，我尝试添加 HR.PasteSpecial xlPasteFormulas 但这似乎不起作用。任何想法/想法将不胜感激。

```
 Sub RemoveHlinks()
'Remove hyperlinks from selected cells without
'removing the cell formatting.
Dim Hlink      As Hyperlink
Dim HR         As Range
Dim Temp       As Range
Dim MaxCol     As Integer

With ActiveSheet.UsedRange
   MaxCol = .Column + .Columns.Count
End With

Set Temp = Cells(1, MaxCol)

For Each Hlink In Selection.Hyperlinks
 Set HR = Hlink.Range
 HR.Copy Destination:=Temp
 HR.ClearContents
 Set Temp = Temp.Resize(HR.Rows.Count, HR.Columns.Count)
 Temp.Copy
 HR.PasteSpecial xlPasteFormats
 HR.PasteSpecial xlPasteValues
 Temp.Clear
Next Hlink

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T17:45:34.557

我也想知道为什么，但是在阅读了这段代码实际上有效的代码后，你需要做的就是遵循上面提到的注释：

'从**选定**的单元格中删除超链接而不删除单元格格式。

即突出显示/选择列（或单元格）并运行代码

瞧，在保留格式的同时删除了超链接。

丹尼斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:13:24.597

（已编辑）

我相信您将不得不复制每个单元格中的每个属性（希望没有合并的属性，这会导致额外的麻烦），然后删除它的超链接，然后恢复属性。

您可以录制宏以发现所有属性，这里有一些字体和内部示例。要发现您可能需要这样做的其他属性，您必须开始录制宏，选择一些单元格，手动更改该属性，停止录制，并在生成的代码中查看这些属性是什么。

```
 Sub Macro1()
    '
    ' Macro1 Macro
    '

        Dim Cell As Range
        Dim SelectedRange As Range

        Set SelectedRange = ActiveSheet.Range("A1:K50")

        Dim Rows As Integer
        Dim Columns As Integer
        Dim i As Integer
        Dim j As Integer

        Rows = SelectedRange.Rows.Count
        Columns = SelectedRange.Columns.Count

        For i = 1 To Rows
            For j = 1 To Columns
                Set Cell = SelectedRange.Cells(i, j)
                Call ClearHyperlinks(Cell)
            Next
        Next

    End Sub

    Sub ClearHyperlinks(Cell As Range)
        '''''''''' Font Properties''''''''''''''

        Dim fName As Variant
        Dim fFontStyle As Variant
        Dim fSize As Variant
        Dim fStrikethrough As Variant
        Dim fSuperscript As Variant
        Dim fSubscript As Variant
        Dim fOutlineFont As Variant
        Dim fShadow As Variant
        Dim fUnderline As Variant
        Dim fThemeColor As Variant
        Dim fTintAndShade As Variant
        Dim fThemeFont As Variant

        With Cell.Font
            fName = .Name
            fFontStyle = .FontStyle
            fSize = .Size
            fStrikethrough = .Strikethrough
            fSuperscript = .Superscript
            fSubscript = .Subscript
            fOutlineFont = .OutlineFont
            fShadow = .Shadow
            fUnderline = .Underline
            fThemeColor = .ThemeColor
            fTintAndShade = .TintAndShade
            fThemeFont = .ThemeFont
        End With

        ''''''''''Interior Properties''''''''''''''

        Dim iPattern As Variant
        Dim iPatternColorIndex As Variant
        Dim iThemeColor As Variant
        Dim iTintAndShade As Variant
        Dim iPatternTintAndShade As Variant

        With Cell.Interior
            iPattern = .Pattern
            iPatternColorIndex = .PatternColorIndex
            iThemeColor = .ThemeColor
            iTintAndShade = .TintAndShade
            iPatternTintAndShade = .PatternTintAndShade
        End With

        ''''''''''''' Number Format '''''''''
        Dim NumberFormat As Variant
        NumberFormat = Cell.NumberFormat

        '''''''''''''' Delete Hyeperlinks
        Cell.Hyperlinks.Delete

        ''''''''''''''''''Restore properties'''''''''''''''

        Cell.NumberFormat = NumberFormat

        With Cell.Font
            .Name = fName
            .FontStyle = fFontStyle
            .Size = fSize
            .Strikethrough = fStrikethrough
            .Superscript = fSuperscript
            .Subscript = fSubscript
            .OutlineFont = fOutlineFont
            .Shadow = fShadow
            .Underline = fUnderline
            .ThemeColor = fThemeColor
            .TintAndShade = fTintAndShade
            .ThemeFont = fThemeFont
        End With

        With Cell.Interior
            .Pattern = iPattern
            .PatternColorIndex = iPatternColorIndex
            .ThemeColor = iThemeColor
            .TintAndShade = iTintAndShade
            .PatternTintAndShade = iPatternTintAndShade
        End With

    End Sub 
```

（原创）您可以简单地手动或自动复制所有内容（包括超链接）。在粘贴这些内容的新工作表中，只需使用以下命令删除超链接：

选择.超链接.删除

# sql-server - 本例中如何处理 SQL 查询？

> ID：15505165
> 
> 赞同：1
> 
> 时间：2013-03-19T16:31:26.917
> 
> 标签：sql-server, performance, tsql

这个问题的目的是找出如何使用内部连接来过滤掉结果。
我有 2 个表，由一列相关。表`Names`包含大约 100,000 多条记录。

```
Table: Names
+----+------+
| ID | Name |
+----+------+
| 1  | A100 |
| 2  | A100 |
| 3  | A100 |
| 4  | A200 |
...

Table: TableB
+----+---------------+
| ID | ChildrenCount |
+----+---------------+
| 1  |  20           |
| 2  |  25           |
| 3  |  10           |
| 4  |  70           |
... 
```

**问题 1**
这些查询中哪一个更有效？

```
select n.[ID]
from Names n
inner join TableB b
  on b.[ID] = n.[ID]
    and b.[ChildrenCount] > 50
where n.[Name] Like 'A%' 
```

或者

```
select n.[ID]
from Names n
inner join TableB b
  on b.[ID] = n.[ID]
    and b.[ChildrenCount] > 50
    and n.[Name] Like 'A%' 
```

**问题2**
【查询1】是`where`先过滤掉子句再对结果集进行inner join，还是按顺序过滤（先inner join，后where子句）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:40:19.240

理论上，在关系代数之后，首先应用连接，然后整个集合被 WHERE 子句过滤，所以看起来第一个示例的查询效果更好。但是 sql server 会优化查询，并根据需要更改这些操作的顺序；所以这些可以在加入之前应用的过滤器将被应用，然后去加入，然后其他以前不能应用的过滤器。此外，这两个查询的执行计划应该完全相同。自己检查一下。

# java - 连接外部 Accumulo 实例和 java

> ID：15505166
> 
> 赞同：2
> 
> 时间：2013-03-19T16:31:30.687
> 
> 标签：java, apache-zookeeper, accumulo

我正在尝试使用 Accumulo 连接到 VM。问题是，我无法将它连接到 Java 中。我可以看到 Apache 抛出的网页，但我无法让它与代码一起使用。我认为这是缺乏知识问题而不是真正的问题，但我找不到有关它的文档。所有示例都使用 localhost 作为 zooServer 名称，这显然对我不起作用。

所以，这是我的代码：

```
 String instanceName = "accumulo-02"
  String zooServers = "192.168.56.5, accumulo-02.localdomain:9997"
  ZooKeeperInstance inst = new ZooKeeperInstance(instanceName, zooServers)
  .... 
```

其余的并不重要，因为我无法连接到服务器。

这也是用 Groovy 编写的。我刚刚为 Java 人员更改了我的代码。

编辑：该程序驻留在我的电脑上。Accumulo、Hadoop 和 Zookeeper 都在 VM 上。它的 ip 是那个 IP，而实例名称是那个名字。在 accumulo 的配置中，'accumulo-02' 是 master、slave 等的域...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:06:09.157

***要在使用ZooKeeperInstance**连接到**[Apache Accumulo](http://accumulo.apache.org)**时正确指定**[Apache ZooKeeper](http://zookeeper.apache.org)**节点列表，zooServers 应指定为：*

 **1.  ZooKeeper 已经设置并运行的**host:port**的*逗号分隔列表，**没有空格*。
****   确保您使用的是**ZooKeeper的***客户端*端口，而不是**TServer**。（端口*2181*是 ZooKeeper 的默认客户端端口。端口*9997*是 TServer 的默认客户端端口。）*******   如果你在默认端口（*2181*）上运行 ZooKeeper，你可以省略*:port*部分，只留下一个逗号分隔的*主机*列表，或者如果你有一些在非标准端口上，你可以将它们组合起来标准端口，如“ *proxyhost,proxyhost:2182,thirdhost:2181* ”。*   无论您使用*IP 地址* **还是***主机名*都无关紧要，只要可以从客户端访问您指定的任何内容，并且端口是**开放**的并且未被防火墙阻止。*********

 ******[请参阅此处](http://svn.apache.org/viewvc/accumulo/branches/1.4/src/core/src/main/java/org/apache/accumulo/core/client/ZooKeeperInstance.java?view=co)关于构造函数的 JavaDoc 注释。********

# javascript - 带有 Div 悬停覆盖的图片库

> ID：15505167
> 
> 赞同：-2
> 
> 时间：2013-03-19T16:31:31.797
> 
> 标签：javascript, css, hover, gallery, overlay

我想为客户创建一个类似于 Tiffany 在下面链接中使用的图片库：
[Tiffanys](http://www.tiffany.com/Shopping/CategoryBrowse.aspx?cid=622067&mcat=148204/)

但是我对 javascript 不是很熟悉，我不确定我是否需要为此使用它，
或者是否可能还有另一个方式，有什么建议会有所帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:56:47.807

使用 css3 可以轻松完成缩放效果..这是一个示例

```
.image{
   -webkit-transition: -moz-transform .3s ease-out; 
   -moz-transition: -webkit-transform .3s ease-out; 
   -o-transition: -o-transform .3s ease-out; 
    transition: transform .3s ease-out; /*this is for the transition to go smoother*/
}

 .image:hover
{
   -moz-transform: scale(1.3);
   -webkit-transform: scale(1.3);
   -o-transform: scale(1.3);
   transform: scale(1.3);/*scaling effect*/
} 
```

# iphone - 使用 NSKeyedArchiver 复制 UIView 会抛出 NSInvalidUnarchiveOperationException

> ID：15505170
> 
> 赞同：8
> 
> 时间：2013-03-19T16:31:36.640
> 
> 标签：iphone, ios, xcode, uiview, nskeyedarchiver

用这个来复制`UIView`

```
UIView copyOfView = 
[NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:originalView]] 
```

这会引发以下错误：

`NSInvalidUnarchiveOperationException`

`[NSKeyedUnarchiver decodeBoolForKey]: value for key (UIHighlighted) is not a boolean`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-03T13:59:18.313

如果我们使用`Archive/Unarchive`with `UIImageView`，我将面临错误，尽管我修复了该突出显示问题。

```
let NewView = whichView.snapshotView(afterScreenUpdates: true)! 
```

以上行将为您提供最佳解决方案。

# html - 使用bash从html表中提取单元格值

> ID：15505171
> 
> 赞同：3
> 
> 时间：2013-03-19T16:31:36.790
> 
> 标签：html, regex, bash, html-parsing

我正在尝试创建一个 BASH/Perl 脚本，该脚本将从动态 html 表中获取特定值。

这是我的页面示例

```
<table border="1" bordercolor="#FFCC00" style="background-color:#FFFFCC" width="100%" cellpadding="3" cellspacing="3">

<tr 对齐=“中心”>

<th>环境</th><th>发布轨道</th><th>工件</th><th>名称</th><th>版本号</th><th>Cert Idn</th ><th>Build Idn</th><th>请求状态</th><th>更新时间</th><th>日志信息。</th><th>Initiator</th>

</tr>

<tr>
<td>DEV03</td><td>2.1.0</td><td>abpa</td><td>ecom-abpa-ear</td><td>204</td><td>82113 </td><td>171242</td><td>已部署</td><td>3/18/2013 3:10:58 PM</td><td width="70">日志信息</td> a></td><td>CESAR</td>
</tr>

<tr>
<td>DEV03</td><td>2.1.0</td><td>abpa</td><td>abpa_dynamic_config_properties</td><td>20</td><td>82113</td> <td>167598</td><td>已部署</td><td>3/18/2013 2:32:27 PM</td><td width="70">日志信息</a></ td><td>CESAR</td>

</tr>

</table>

```

我的目标是从这个单元格中获取这个值。

“部署”

另一种看待它的方式......

检索“请求状态”列下的所有数据

“已部署”的值是动态的并且可以更改。

我尝试了以下方法：

```
sed -e 's/>/>\n/g' abpa_cesar_status.txt | egrep -i "^\s*[A-Z]+&lt;/td&gt;
" | sed -e 's|&lt;/td&gt;||g' | grep Deployed 
```

但这仅适用于“已部署”

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:46:34.373

您应该使用解析器[`xmllint`](http://xmlsoft.org/xmllint.html)来执行此操作。

您可以根据`xmllint`xpath 提取元素。

例如：

```
$ xmllint --html --format --shell file.html <<< "cat //table/tr/td[position()=8]/text()"
/ >  -------
Deployed
 -------
Deployed
/ > 
```

上面命令中的 xpath`//table/tr/td[position()=8]/text()`会返回第 8 列中的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T17:24:02.063

您也可以使用我的[Xidel](http://videlibri.sourceforge.net/xidel.html)来获取第 8 列中的所有内容：

```
xidel your_table.html -e '//table//tr/td[8]' 
```

或者如果列位置也可以改变，先获取列号：

```
xidel your_table.html -e 'column:=count(//table//th[.="Request Status"]/preceding-sibling::*)+1' -e '//table//tr/td[$column]' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T17:32:35.857

请注意，您的**文档输出格式不正确**（缺少一些开头`<a>`），是正常/预期还是错字？否则，这是一个[格式良好的版本](http://pastebin.com/R8RGX1T9)。

### 命令

我喜欢[xmlstarlet](http://xmlstar.sourceforge.net/docs.php)，简单直接的 XPath 用于简短的测试：

```
xmlstarlet sel -t -m "//table/tr/td[position()=8]" -v "./text()" -n 
```

### 解释

```
sel   (or select)        - Select data (mode) or query XML document(s) (XPATH, etc)
-t or --template         - start a template
-m or --match <xpath>    - match XPATH expression
-v or --value-of <xpath> - print value of XPATH expression
-n or --nl               - print new line 
```

### 输出

```
Deployed
Deployed
# plus empty-cell 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T17:07:21.997

您可以尝试[xsh ，它是](http://p3rl.org/XML%3a%3aXSH2)[XML::LibXML](http://p3rl.org/XML%3a%3aLibXML)的包装器：

```
open :F html abpa_cesar_status.txt ;
$status = count(//table/tr[1]/th[.="Request Status"]/preceding-sibling::th) ;
ls //td[count(preceding-sibling::td)=$status] ; 
```

为了使用它，您必须使您的 html 格式更好一些（我必须删除`</a>`才能使脚本正常工作）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T16:46:54.393

又快又脏：

```
cat your_html_file | perl -pe "s/^<\/?table.*$//g;s/^<tr .*$//g;s/<tr> (<td>.*?){8}//g;s/<th.*$//g;s/<\/.*$//g" | sed '/^$/d' 
```

但是，这不是您应该这样做的方式。使用现有的（Perl？）软件来解析 html 并提取您的价值。

**编辑：**由于您更改了代码（添加了空格），因此这不再起作用。QED。

# c++ - 用于 UV 映射的多边形点从 3D 到 2D 的正交投影

> ID：15505174
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:31:44.370
> 
> 标签：c++, math, orthographic, xsi

我想使用简单的正交投影在平面上变换或投影多边形点的位置 - 用于 UV 映射并被卡住。编码：

```
 CPolygonFaceRefArray lPolygons = lPolygonMesh.GetPolygons();

    for( long f=0; f < lPolygons.GetCount(); f++ )
    {
        PolygonFace lFace = lPolygons[ f ];
        CPointRefArray lPoints = lFace.GetPoints();

        Point lPoint1 = lPoints[ 0 ];
        Point lPoint2 = lPoints[ 1 ];
        Point lPoint3 = lPoints[ 2 ];

        CVector3 lPoint1Position = lPoint1.GetPosition();
        CVector3 lPoint2Position = lPoint2.GetPosition();
        CVector3 lPoint3Position = lPoint3.GetPosition();

        _LogValue2( f, L"--------------------------------------" );

        // Vector A->B, that becomes the X axis of the local plane.
        CVector3 lLocalX = lLocalX.Sub( lPoint1Position, lPoint2Position );
        lLocalX.NormalizeInPlace();

        // Vector A->C
        CVector3 lVector13 = lVector13.Sub( lPoint1Position, lPoint3Position );
        lVector13.NormalizeInPlace();

        // Determine the Z vector of the local plane:.
        CVector3 lLocalZ = lLocalZ.Cross( lLocalX, lVector13 );
        lLocalZ.NormalizeInPlace();

        // Determine Y vector of the local plane, assuming that it’s perpendicular to already known X and Z.
        CVector3 lLocalY = lLocalY.Cross( lLocalZ, lLocalX );
        lLocalY.NormalizeInPlace();

        // In result we got three axis of the local plane:
        // lLocalX.Dot( lLocalY ) == lLocalX.Dot( lLocalZ ) ==  lLocalY.Dot( lLocalZ ) == 0;

        /*
        Now use system of equations to determine the positions of all points in reference to the local plane.

        double GetBase(const double& a1, const double& b1, const double& c1, const double& a2, const double& b2, const double& c2, const double& a3, const double& b3, const double& c3 )
        {return (a1*b2*c3)+(a3*b1*c2)+(a2*b3*c1)-((a3*b2*c1)+(a1*b3*c2)+(a2*b1*c3));}

        double GetX(const double& a1, const double& b1, const double& c1, const double& d1, const double& a2, const double& b2, const double& c2, const double& d2, const double& a3, const double& b3, const double& c3, const double& d3, const double& in_Base)
        {return ( (d1*b2*c3)+(d2*b1*c2)+(d2*b3*c1)-((d3*b2*c1)+(d1*b3*c2)+(d2*b1*c3)) ) / in_Base;}

        double GetY(const double& a1, const double& b1, const double& c1, const double& d1, const double& a2, const double& b2, const double& c2, const double& d2, const double& a3, const double& b3, const double& c3, const double& d3, const double& in_Base)
        {return ( (a1*d2*c3)+(a3*d1*c2)+(a2*d3*c1)-((a3*d2*c1)+(a1*d3*c2)+(a2*b1*c3)) ) / in_Base;}

        double GetZ(const double& a1, const double& b1, const double& c1, const double& d1, const double& a2, const double& b2, const double& c2, const double& d2, const double& a3, const double& b3, const double& c3, const double& d3, const double& in_Base)
        {return ( (a1*b2*d3)+(a3*b1*d2)+(a2*b3*d1)-((a3*b2*d1)+(a1*b3*d2)+(a2*b1*d3)) ) / in_Base;}
        */

        double fU; 
        double fV; 
        double fW;
        double fBase;

        // For each point, except the first one (lPoint1Position), which we aleady know.

        for( long p=1; p < lPoints.GetCount(); p++ )
        {
            Point lPoint = lPoints[ p ];
            CVector3 lPointPosition = lPoint.GetPosition();
            CVector3 lPointVector = lPointVector.Sub( lPoint1Position, lPointPosition );

            fBase = GetBase( 
                        lLocalX.GetX(), lLocalY.GetX(), lLocalZ.GetX(),
                        lLocalX.GetY(), lLocalY.GetY(), lLocalZ.GetY(),
                        lLocalX.GetZ(), lLocalY.GetZ(), lLocalZ.GetZ() ); 

            fU = GetX( lLocalX.GetX(), lLocalY.GetX(), lLocalZ.GetX(), lPointVector.GetX(),
                       lLocalX.GetY(), lLocalY.GetY(), lLocalZ.GetY(), lPointVector.GetY(),
                       lLocalX.GetZ(), lLocalY.GetZ(), lLocalZ.GetZ(), lPointVector.GetZ()
                       ,fBase ); 

            fV = GetY( lLocalX.GetX(), lLocalY.GetX(), lLocalZ.GetX(), lPointVector.GetX(),
                       lLocalX.GetY(), lLocalY.GetY(), lLocalZ.GetY(), lPointVector.GetY(),
                       lLocalX.GetZ(), lLocalY.GetZ(), lLocalZ.GetZ(), lPointVector.GetZ()
                       ,fBase ); 

            fW = GetZ( lLocalX.GetX(), lLocalY.GetX(), lLocalZ.GetX(), lPointVector.GetX(),
                       lLocalX.GetY(), lLocalY.GetY(), lLocalZ.GetY(), lPointVector.GetY(),
                       lLocalX.GetZ(), lLocalY.GetZ(), lLocalZ.GetZ(), lPointVector.GetZ()
                       ,fBase ); 

            _LogRoundValue3( p, fU, fV, fW );
        }

        // Result for a cube with the center in 0,0,0 (global coords) is:
        // INFO : Values: 0, --------------------------------------
        // INFO : 1 = 0, 0, 0
        // INFO : 2 = 0, 1, 0
        // INFO : 3 = 0, 1, 0
        // INFO : Values: 1, --------------------------------------
        // INFO : 1 = 1, 1, 0
        // INFO : 2 = 1, 1, 0
        // INFO : 3 = 0, 1, 0
        // INFO : Values: 2, --------------------------------------
        // INFO : 1 = 1, 0, 0
        // INFO : 2 = 1, 1, 0
        // INFO : 3 = 0, 1, 0
        // INFO : Values: 3, --------------------------------------
        // INFO : 1 = 1, 0, 0
        // INFO : 2 = 1, 1, 0
        // INFO : 3 = 0, 1, 0
        // INFO : Values: 4, --------------------------------------
        // INFO : 1 = 1, 0, 0
        // INFO : 2 = 1, 1, 0
        // INFO : 3 = 0, 1, 0
        // INFO : Values: 5, --------------------------------------
        // INFO : 1 = 0, 0, 0
        // INFO : 2 = 0, 1, 0
        // INFO : 3 = 0, 1, 0

        // and for a rotated cube at the same place:
        // INFO : Values: 0, --------------------------------------
        // INFO : 1 = 0.027506, 0.033672, 0
        // INFO : 2 = 0.487751, 0.969746, 0
        // INFO : 3 = 0.460245, 1, 0
        // INFO : Values: 1, --------------------------------------
        // INFO : 1 = 1.15549, 0.753083, 0
        // INFO : 2 = 1.03428, 1, 0
        // INFO : 3 = -0.121205, 1, 0
        // INFO : Values: 2, --------------------------------------
        // INFO : 1 = 1, 0.04442, 0
        // INFO : 2 = 1, 1.04442, 0
        // INFO : 3 = 0, 1, 0
        // INFO : Values: 3, --------------------------------------
        // INFO : 1 = 1, -0.093859, 0
        // INFO : 2 = 1, 0.906141, 0
        // INFO : 3 = 0, 1, 0
        // INFO : Values: 4, --------------------------------------
        // INFO : 1 = 1, -0.04442, 0
        // INFO : 2 = 1, 0.95558, 0
        // INFO : 3 = 0, 1, 0
        // INFO : Values: 5, --------------------------------------
        // INFO : 1 = 0.027506, 0.09418, 0
        // INFO : 2 = -0.43274, 1.03025, 0
        // INFO : 3 = -0.460245, 1, 0
    } 
```

它只是每个多边形投影，我假设 - 并非总是如此，但这并不重要 - 所有多边形点都在同一个局部平面上。

我从确定局部平面开始，然后使用方程系统试图找到局部平面上点的坐标。然而结果是错误的。

该代码使用 XSI 的 API，矢量类文档在这里：

[http://download.autodesk.com/global/docs/softimage2013/en_us/sdkguide/index.html?url=si_cpp/classXSI_1_1MATH_1_1CVector3.html,topicNumber=si_cpp_classXSI_1_1MATH_1_1CVector3_html](http://download.autodesk.com/global/docs/softimage2013/en_us/sdkguide/index.html?url=si_cpp/classXSI_1_1MATH_1_1CVector3.html,topicNumber=si_cpp_classXSI_1_1MATH_1_1CVector3_html)

*   第一个问题是：这是一个正确的方法吗？
*   如果是，那它有什么问题？

…是的，我已经阅读了[http://en.wikipedia.org/wiki/3D_projection](http://en.wikipedia.org/wiki/3D_projection) :)

我会很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:10:24.713

我建议您使用点积计算映射坐标：

```
fU = lPointVector.Dot(lLocalX);
fV = lPointVector.Dot(lLocalY);
fW = lPointVector.Dot(lLocalZ); // should be zero if points lie in plane 
```

这会将您从 3D 坐标带到 2D，这似乎是您所要求的。如果不是，你应该澄清你的问题。

# mongodb - 一种确保在 MongoDb 的 findAndModify 中独占读取的方法？

> ID：15505176
> 
> 赞同：2
> 
> 时间：2013-03-19T16:31:45.687
> 
> 标签：mongodb, pymongo

我有一个 MongoDB 集合（用作作业队列），多个进程从中读取记录，使用`findAndModify`. `FindAndModify`搜索`active`字段为“false”的记录，将其设置为“true”，这样其他进程就不会读取相同的记录。

问题是查看日志，我看到不同的进程仍然读取相同的记录。这似乎发生在两个进程同时从队列中读取时。有什么方法可以确保一次只处理从集合中读取的内容？

我正在使用 Mongo 2.2.3 和 pymongo 2.2。

非常感谢！

编辑：有问题的日志是：

> worker.3 2013-03-18 23:57:45,434 default-worker-3
> project_name INFO 队列作业：作业 ID：5147a90f68e8fe0097002bdf
> 
> worker.3 2013-03-18 23:57:47,608 default-worker-3
> project_name INFO 输入：14497 文档
> 
> worker.2 2013-03-18 23:57:45,440 default-worker-2
> project_name INFO 队列作业：作业 ID：5147a90f68e8fe0097002bdf
> 
> worker.2 2013-03-18 23:57:47,658 default-worker-2
> project_name INFO 输入：14497 文档

如您所见，worker.3 和worker.2 从队列中读取相同的作业（两个worker 具有相同的mongodb id）。

find_and_modify 命令：

```
query = {"active": False}
try:
    return self.collection.find_and_modify(
            query=query,
            update={"$set": {"active": True}},
            upsert=False,
            sort={"added_on": 1},
            limit=1
        )
except Exception, exc:
    LOGGER.exception(exc) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T04:11:05.187

让我说得非常清楚 - 两个不同的 findAndModify 命令不可能在您的场景中返回相同的文档。

不可能。以下是执行该工作的方法的前几行：

```
 Lock::DBWrite lk( ns );
    Client::Context cx( ns );

    BSONObj doc;

    bool found = Helpers::findOne( ns.c_str() , queryOriginal , doc ); 
```

请注意第 122 行，其中在查找之前获取了 WRITE 锁。

[https://github.com/mongodb/mongo/blob/master/src/mongo/db/commands/find_and_modify.cpp#L122](https://github.com/mongodb/mongo/blob/master/src/mongo/db/commands/find_and_modify.cpp#L122)

*两个进程不可能*同时持有写锁。似乎更有可能发生了一些不同的事情（多个文档具有相同的 id 值，调用 find_and_modify 的函数返回相同的文档，将其返回给两个线程，其他我们不知道足以推测的事情）。

FindAndModify 是一个原子命令，它在执行期间持有一个独占写锁。我的建议是深入了解日志真正向您显示的内容，而不是根据关于必须发生的事情的不正确/无根据的假设来更改您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:40:09.723

而是将您的“锁定”分为两个阶段。第一个更新记录查询第一个没有锁时间戳或时间戳过期的对象并设置新锁。然后使用您刚刚建立的锁定数据找到相同的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T17:18:24.113

首先对mongodb进行一个简单的查询以获取单个作业记录，

```
job = db.coll.find({query}).limit(1) 
```

接下来更新指定作业 ID 和位置的记录`active=false`

```
update_response = db.coll.update(
    {_id:job.id, active=false},
    {$set:{active:true}},
    false,
    false
) 
```

如果作业已经被另一个进程更新，由于 的查询约束，更新不会成功`active=false`。检查记录已更新的 update_response：

```
if update_response['n'] > 0 and update_response['updatedExisting']==true:
    return job 
```

如果您的更新未成功，请获取另一个作业并重试。

# ruby-on-rails - 由于 JSON v(1.7.3) gem 错误，无法在 Mac OS Mountain Lion 上运行 Bundle Install

> ID：15505178
> 
> 赞同：0
> 
> 时间：2013-03-19T16:31:55.270
> 
> 标签：ruby-on-rails, ruby, json

首先，我在我的 Mac 上安装了来自 xcode 的命令行工具，所以这不是问题。请不要将我指向其他 50 篇关于此的帖子，因为它们都只是说“安装命令行工具”。

这是我运行时遇到的错误`bundle install`

```
Installing json (1.7.3) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
creating Makefile

make
compiling parser.c
make: gcc-4.2: No such file or directory
make: *** [parser.o] Error 1

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p194/gems/json-1.7.3 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p194/gems/json-1.7.3/ext/json/ext/parser/gem_make.out
An error occured while installing json (1.7.3), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.3'` succeeds before bundling. 
```

找遍了整个地方，也有人告诉我安装`install ruby-dev`命令，但是我没有找到mac的解决方案，因为我没有`apt-get`安装。

此外，查看错误，看起来文件试图去的地方缺少一个目录。我不知道该怎么办？

我也找不到完全重新安装 ruby​​ 的方法。

有什么简单的解决方案吗？

万分感谢！

编辑：这是我的本地 gem 列表，我正在运行 GCC 版本 4.2.1 和 Ruby 版本 1.9.3-p194

奇怪的是已经安装了更新版本的 JSON（1.7.5），所以我不知道它为什么要安装 1.7.3，也许有一个具有依赖项的 gem？我希望我可以跳过那个 gem，然后安装包的其余部分。1.7.5 应该满足依赖关系，除非 gem 需要特定版本，对吧？

```
*** LOCAL GEMS ***

actionmailer (3.2.13, 3.2.7, 3.2.6)
actionpack (3.2.13, 3.2.7, 3.2.6)
activemodel (3.2.13, 3.2.7, 3.2.6)
activerecord (3.2.13, 3.2.7, 3.2.6)
activeresource (3.2.13, 3.2.7, 3.2.6)
activesupport (3.2.13, 3.2.7, 3.2.6)
appscrolls (0.9.0, 0.8.4)
arel (3.0.2)
bcrypt-ruby (3.0.1)
bourne (1.4.0, 1.2.1)
builder (3.2.0, 3.0.0)
bundler (1.3.4, 1.1.5)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.6.1, 1.3.3)
comp_tree (1.1.3)
devise (2.2.3, 2.1.2)
draper (1.1.0)
erubis (2.7.0)
execjs (1.4.0)
factory_girl (4.2.0)
factory_girl_rails (4.2.1)
hike (1.2.1)
i18n (0.6.4, 0.6.1, 0.6.0)
journey (1.0.4)
jquery-rails (2.2.1, 2.1.1, 2.0.2)
js-routes (0.8.7)
json (1.7.5)
mail (2.5.3, 2.4.4)
metaclass (0.0.1)
mime-types (1.21, 1.19)
mocha (0.13.3, 0.12.7)
multi_json (1.7.1, 1.3.6)
orm_adapter (0.4.0)
polyglot (0.3.3)
pure (0.2.2)
rack (1.5.2, 1.4.5, 1.4.1)
rack-cache (1.2)
rack-ssl (1.3.3, 1.3.2)
rack-test (0.6.2, 0.6.1)
rails (3.2.13, 3.2.7, 3.2.6)
railties (3.2.13, 3.2.7, 3.2.6)
rake (10.0.3, 0.9.2.2)
rdoc (4.0.0, 3.12)
request_store (1.0.5)
ruby_parser (3.1.2)
rubygems-bundler (1.1.1, 1.0.3)
rvm (1.11.3.6, 1.11.3.5)
sass (3.2.7, 3.2.1, 3.1.20)
sass-rails (3.2.6, 3.2.5)
sexp_processor (4.2.0)
shoulda (3.4.0)
shoulda-context (1.0.2)
shoulda-matchers (1.5.1, 1.5.0)
simple_form (2.1.0, 2.0.2)
sprockets (2.9.0, 2.2.2, 2.1.3)
sqlite3 (1.3.6)
state_machine (1.1.2)
thor (0.17.0, 0.16.0, 0.15.4)
tilt (1.3.6, 1.3.3)
treetop (1.4.12, 1.4.10)
tzinfo (0.3.37, 0.3.33)
uglifier (1.3.0, 1.2.7)
warden (1.2.1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:40:31.007

听起来你没有安装 GCC。至少有以下三种获取方式：

1.  去应用商店。安装 Xcode。然后，在 Xcode 中，选择 Xcode > Preferences > Downloads 并单击命令行工具旁边的安装。

2.  登录 Apple Developer 站点，进入[下载页面](https://developer.apple.com/downloads/index.action "下载页面")并下载命令行工具磁盘映像。安装。

3.  通过 homebrew、macports 或从头开始编译来安装 GCC。

# html - 填充难题

> ID：15505180
> 
> 赞同：1
> 
> 时间：2013-03-19T16:31:58.953
> 
> 标签：html, css, wrapper, margin, padding

我无法弄清楚这个填充。我想去掉我主页 claireisabelwebb.com 上照片周围的细微顶部和左侧填充。

这是我的CSS：

```
/* Wrapper for Text and Photo on Home Page */

.wrapper_text_photo{ 
        display:block;
        /* float: left; */
        position: fixed;;
        background: rgba(0,0,255, 0);
        height: 800px;
        padding-top: 3px;
        padding-left: 10 px;
        margin-top:20px;
        /* margin-left:100px;*/
        margin-left:55px;
        /* margin-left:100px;*/
        margin-top: 232px;
}

/* Photo on Home Page */

.photo_home {
        float: left;
        margin-right:10px;
        padding-left: 10px;
        padding-top: 10px;
        background: rgba(0,0,255, 0);
}

/* Text on Home Page */

.home_text{ 
        display:block;
        position: fixed;
        background: rgba(255,255,255,.85);
        width:1100px;
        height: 480px;
        margin-left: 300px;
        padding-left: 10px;
        padding-right: 5px;

}
.home_text p img {
    float:left;
    background: rgba(255,255,255, .85);
} 
```

和html：

```
 <!-- Text and Photo __________________________________________-->

<div class="wrapper_text_photo">

    <div class="home_text">
            <p><img class="photo_home" src="http://claireisabelwebb.com/images/Home/claire-ed.jpg" alt="person_name" height="280px" />I graduated in YYYY from XXXX College with departmental honors in SUBJECT. As a junior, I participated in a XXXX mission in PLACE. <br><br>
            Email me at someemail@someemail.com.
            <br> 
            &raquo;try scrolling this page up and down&laquo;
            </p>
    </div>
</div> 
```

我很难看到包装器的边距和内边距在哪里，以及它如何与每个元素（照片和文本框）的内边距和边距相互作用。这是编码的正确方法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:33:40.940

```
.photo_home {
    ...
    padding-left: 10px;
    padding-top: 10px;
    ...
} 
```

这不会碰巧与它有任何关系，不是吗？尝试删除那里的填充线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:42:35.167

You are adding padding. If you don't want the padding to show a background, you have two options.

Switch it to margin:

```
.photo_home {
    float: left;
    margin: 10px 10px 0 10px;
    background: rgba(0, 0, 255, 0);
} 
```

or use this style for background transparency:

```
.photo_home {
    float: left;
    margin-right: 10px;
    padding-left: 10px;
    padding-top: 10px;
    background: transparent;
} 
```

![enter image description here](../Images/7b51b7e8d0893c262ab5b9dcac712aa3.png)

# git - Git - 特定文件的提交之间的差异

> ID：15505183
> 
> 赞同：0
> 
> 时间：2013-03-19T16:32:09.357
> 
> 标签：git, logging, diff

我想查看特定文件的旧提交之间的所有差异。它的命令应该是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:46:34.577

这显示了您对和`/path/to/file`之间的文件的更改：`commit1``commit2`

```
git diff <commit1_hash> <commit2_hash> -- /path/to/file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:16:05.663

如果要查看特定文件的更改历史记录：

```
git log --follow -p path/to/file 
```

# objective-c - 启用“仪器程序流程”时 objc_msgSend 中的 EXC_BAD_ACCESS

> ID：15505190
> 
> 赞同：1
> 
> 时间：2013-03-19T16:32:22.823
> 
> 标签：objective-c, xcode, cocoa, clang, sentestingkit

到目前为止，我已经花了几天时间试图追查这个问题，但没有运气。

我正在尝试测量我的项目中的测试覆盖率，这是一个使用 Xcode 在 Objective-C 中开发的 Mac OS 应用程序，这意味着在构建设置中启用“仪器程序流程”和“生成测试覆盖率文件”。我相信这些对应于clang中的`-fprofile-arcs`和`-ftest-coverage`标志。

当这些被启用时（虽然它似乎只`-fprofile-arcs`影响这个问题）程序将在某些地方崩溃并出现`EXC_BAD_ACCESS`异常。`objc_msgSend`

在运行应用程序本身时，会在返回第一个网络请求时发生这种情况。回溯不包含我的任何代码，并且似乎完全发生在 Foundation/Cocoa 框架中。虽然这很烦人，但我忍受了根据我是在运行测试还是使用应用程序来打开/关闭构建设置。

我现在在测试时遇到了似乎相同的问题。我刚刚编写了一个包含网络访问的测试，并且在检测程序流时，测试失败，并且在同一位置出现明显相同的异常。

* * *

我需要弄清楚是什么原因造成的。我正在开发的应用程序是针对大学项目的，其中一个目标是报告测试覆盖率并评估测试过程。当由于测试崩溃而无法测试应用程序的大部分时，这很难做到。

```
* thread #1: tid = 0x2203, 0x00007fff8ffb6250 libobjc.A.dylib`objc_msgSend + 16, stop reason = EXC_BAD_ACCESS (code=1, address=0x10)
frame #0: 0x00007fff8ffb6250 libobjc.A.dylib`objc_msgSend + 16
frame #1: 0x00007fff88ffe708 Foundation`___NSURLConnectionWillCacheResponse_block_invoke_0 + 110
frame #2: 0x00007fff88e86528 Foundation`__65-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]_block_invoke_0 + 28
frame #3: 0x00007fff88e8646c Foundation`-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:] + 227
frame #4: 0x00007fff88e86368 Foundation`-[NSURLConnectionInternal _withActiveConnectionAndDelegate:] + 63
frame #5: 0x00007fff88ffda3c Foundation`_NSURLConnectionWillCacheResponse + 126
frame #6: 0x00007fff879f8272 CFNetwork`___delegate_willCacheResponse_block_invoke_0 + 48
frame #7: 0x00007fff87a75a7a CFNetwork`___withDelegateAsync_block_invoke_0 + 90
frame #8: 0x00007fff87b062ea CFNetwork`__block_global_1 + 28
frame #9: 0x00007fff90110154 CoreFoundation`CFArrayApplyFunction + 68
frame #10: 0x00007fff87a667e4 CFNetwork`RunloopBlockContext::perform() + 124
frame #11: 0x00007fff87a666bb CFNetwork`MultiplexerSource::perform() + 221
frame #12: 0x00007fff900f1b31 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
frame #13: 0x00007fff900f1455 CoreFoundation`__CFRunLoopDoSources0 + 245
frame #14: 0x00007fff901147f5 CoreFoundation`__CFRunLoopRun + 789
frame #15: 0x00007fff901140e2 CoreFoundation`CFRunLoopRunSpecific + 290
frame #16: 0x00007fff8a660eb4 HIToolbox`RunCurrentEventLoopInMode + 209
frame #17: 0x00007fff8a660c52 HIToolbox`ReceiveNextEventCommon + 356
frame #18: 0x00007fff8a660ae3 HIToolbox`BlockUntilNextEventMatchingListInMode + 62
frame #19: 0x00007fff92804563 AppKit`_DPSNextEvent + 685
frame #20: 0x00007fff92803e22 AppKit`-[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
frame #21: 0x00007fff927fb1d3 AppKit`-[NSApplication run] + 517
frame #22: 0x00007fff9279fc06 AppKit`NSApplicationMain + 869
frame #23: 0x0000000100001842 River`main(argc=5, argv=0x00007fff5fbff7b0) + 34 at main.m:13
frame #24: 0x00007fff93aed7e1 libdyld.dylib`start + 1 
```

这是运行测试时的回溯：

```
* thread #1: tid = 0x2503, 0x00007fff8ffb6250 libobjc.A.dylib`objc_msgSend + 16, stop reason = EXC_BAD_ACCESS (code=1, address=0x10)
frame #0: 0x00007fff8ffb6250 libobjc.A.dylib`objc_msgSend + 16
frame #1: 0x00007fff88ffe708 Foundation`___NSURLConnectionWillCacheResponse_block_invoke_0 + 110
frame #2: 0x00007fff88e86528 Foundation`__65-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]_block_invoke_0 + 28
frame #3: 0x00007fff88e8646c Foundation`-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:] + 227
frame #4: 0x00007fff88e86368 Foundation`-[NSURLConnectionInternal _withActiveConnectionAndDelegate:] + 63
frame #5: 0x00007fff88ffda3c Foundation`_NSURLConnectionWillCacheResponse + 126
frame #6: 0x00007fff879f8272 CFNetwork`___delegate_willCacheResponse_block_invoke_0 + 48
frame #7: 0x00007fff87a75a7a CFNetwork`___withDelegateAsync_block_invoke_0 + 90
frame #8: 0x00007fff87b062ea CFNetwork`__block_global_1 + 28
frame #9: 0x00007fff90110154 CoreFoundation`CFArrayApplyFunction + 68
frame #10: 0x00007fff87a667e4 CFNetwork`RunloopBlockContext::perform() + 124
frame #11: 0x00007fff87a666bb CFNetwork`MultiplexerSource::perform() + 221
frame #12: 0x00007fff900f1b31 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
frame #13: 0x00007fff900f1455 CoreFoundation`__CFRunLoopDoSources0 + 245
frame #14: 0x00007fff901147f5 CoreFoundation`__CFRunLoopRun + 789
frame #15: 0x00007fff901140e2 CoreFoundation`CFRunLoopRunSpecific + 290
frame #16: 0x00007fff88f03f5e Foundation`-[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 268
frame #17: 0x00007fff88f03e0b Foundation`-[NSRunLoop(NSRunLoop) runUntilDate:] + 78
frame #18: 0x00000001006beba2 RiverTests`runExampleBlock(block=0x00000001020b68b0, name=0x00000001020b6950) + 562 at SPTExampleGroup.m:31
frame #19: 0x00000001006bfd08 RiverTests`__48-[SPTExampleGroup compileExamplesWithNameStack:]_block_invoke(.block_descriptor=0x00000001020b6a50) + 200 at SPTExampleGroup.m:241
frame #20: 0x00000001006c0877 RiverTests`-[SPTSenTestCase SPT_runExampleAtIndex:](self=0x00000001020e04a0, _cmd=0x0000000100519090, index=0) + 423 at SPTSenTestCase.m:61
frame #21: 0x00000001006c0bfd RiverTests`__33+[SPTSenTestCase testInvocations]_block_invoke(.block_descriptor=0x00000001020e03d0) + 61 at SPTSenTestCase.m:82
frame #22: 0x00000001006c142d RiverTests`-[SPTSenTestInvocation invoke](self=0x00000001020e0170, _cmd=0x00007fff9303afa4) + 93 at SPTSenTestInvocation.m:16
frame #23: 0x00000001007d2a05 SenTestingKit`-[SenTestCase invokeTest] + 164
frame #24: 0x00000001007d2b7f SenTestingKit`-[SenTestCase performTest:] + 173
frame #25: 0x00000001006c11ab RiverTests`-[SPTSenTestCase performTest:](self=0x00000001020e04a0, _cmd=0x00000001007d87f4, run=0x000000010055bb30) + 123 at SPTSenTestCase.m:127
frame #26: 0x00000001007d2453 SenTestingKit`-[SenTest run] + 65
frame #27: 0x00000001007d5dc1 SenTestingKit`-[SenTestSuite performTest:] + 125
frame #28: 0x00000001007d2453 SenTestingKit`-[SenTest run] + 65
frame #29: 0x00000001007d5dc1 SenTestingKit`-[SenTestSuite performTest:] + 125
frame #30: 0x00000001007d2453 SenTestingKit`-[SenTest run] + 65
frame #31: 0x00000001007d5dc1 SenTestingKit`-[SenTestSuite performTest:] + 125
frame #32: 0x00000001007d2453 SenTestingKit`-[SenTest run] + 65
frame #33: 0x00000001007d4b18 SenTestingKit`+[SenTestProbe runTests:] + 134
frame #34: 0x00007fff88edc395 Foundation`__NSFireDelayedPerform + 358
frame #35: 0x00007fff9012f804 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 20
frame #36: 0x00007fff9012f31d CoreFoundation`__CFRunLoopDoTimer + 557
frame #37: 0x00007fff90114ad9 CoreFoundation`__CFRunLoopRun + 1529
frame #38: 0x00007fff901140e2 CoreFoundation`CFRunLoopRunSpecific + 290
frame #39: 0x00007fff8a660eb4 HIToolbox`RunCurrentEventLoopInMode + 209
frame #40: 0x00007fff8a660b94 HIToolbox`ReceiveNextEventCommon + 166
frame #41: 0x00007fff8a660ae3 HIToolbox`BlockUntilNextEventMatchingListInMode + 62
frame #42: 0x00007fff92804563 AppKit`_DPSNextEvent + 685
frame #43: 0x00007fff92803e22 AppKit`-[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
frame #44: 0x00007fff927fb1d3 AppKit`-[NSApplication run] + 517
frame #45: 0x00007fff9279fc06 AppKit`NSApplicationMain + 869
frame #46: 0x0000000100001842 River`main(argc=8, argv=0x00007fff5fbff6d8) + 34 at main.m:13
frame #47: 0x00007fff93aed7e1 libdyld.dylib`start + 1 
```

这些顶部看起来像同一个问题。这是我的代码中某处的问题（我不知道它会在哪里）还是有什么方法可以缓解这个问题？

I've tried the typical debugging tips like turning on zombie objects and printing out the contents of the registers when it crashes, neither of those help at all. The registers appear to contain garbage, and having zombies enabled doesn't give any information.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T01:45:03.553

你使用的是什么版本的 Xcode？我记得在单元测试中使用代码覆盖率时看到过类似的情况，但它已在 Xcode 4.6 中修复。我相信在此之前可以通过使用 GCC 而不是 Clang 来解决它，但这可能可行，也可能不可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T01:55:22.357

据我所知，实际的段错误是由于 target->isa 为 NULL 引起的。

对我来说，这表明内存覆盖。我会尝试启用保护 malloc （[关于如何做到这一点的 SO 问题](https://stackoverflow.com/questions/7472604/how-to-enable-guard-malloc)），以期捕获超出缓冲区末尾的内容。

# html - Drop-down-menu works great with Firefox, but not with WebKit

> ID：15505194
> 
> 赞同：0
> 
> 时间：2013-03-19T16:32:31.927
> 
> 标签：html, css, drop-down-menu

I am working on a Drop-Down-Menu only using CSS & HTML5 (no JavaScript) in my personal website. Here it is: [http://davidvalles.cu.cc](http://davidvalles.cu.cc)

If you enter with Firefox, the menu works great (it is the one called "Secciones"): when you put the mouse over the "Secciones" div, the menu appears with a transition.

But if you try it with Safari or Chrome, it will work normally, unless you put the mouse UNDER the "Secciones" div. In that case, menu will appear normally. And I don't want the menu to open in that case. I only want it to open when you put the mouse over the "Secciones" link (all the box that contains the Secciones text).

What am I doing wrong? Why does the menu work perfectly in Firefox but not in Safari? Could you take a look at it? Thank you, and sorry for my poor English, I'm learning. Please, correct me :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:17:34.050

你的宽松？“宽松”是宽松的价值吗？

```
-moz-transition: opacity .25s ease;
-webkit-transition: opacity .25s ease;
-o-transition: opacity .25s ease;
-ms-transition: opacity .25s ease;
transition: opacity .25s ease; 
```

# jquery - 为生成的表单捕获提交，以便用户将在 div 中看到处理后的结果

> ID：15505202
> 
> 赞同：0
> 
> 时间：2013-03-19T16:32:45.393
> 
> 标签：jquery, ajax, bind, document-ready

用户点击一个菜单，并使用以下代码，菜单`$.load()`是它的链接内容：

```
$(function() {
    $('#menu a').click(function() {
        $('#content').load(this.href);  
        return false;
    });
}); 
```

好的，现在表单已加载。还有一个问题。提交表单时，结果不应将我们带到真实`action`地址。所以我使用以下代码：

```
$('#content').on('submit', function() { // catch the form's submit event
    alert('begin');
    $.ajax({ // create an AJAX call...
        data: $(this).serialize(), // get the form data
        type: $(this).attr('method'), // GET or POST
        url: $(this).attr('action'), // the file to call
        success: function(response) { // on success..
            alert('aaaa');
            $('#content').html(response); // update the DIV
        }
    });
    return false; // cancel original event to prevent form submitting
}); 
```

不幸`on`的是没有被调用并且`alert('begin');`不起作用！

感谢[jquery 提交表单，然后在现有 div 中显示结果](https://stackoverflow.com/questions/1218245/jquery-submit-form-and-then-show-results-in-an-existing-div)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:59:03.437

我已经输入了第一个代码和平`$(document).ready(function() {});`，但它运行得非常完美，但是如果没有准备好文档，第二个代码就无法工作。

**但为什么？**我不知道。

现在可以使用的最终代码如下：

```
$(document).ready(function()
{
    $('#content').on('submit', 'form', function() { // catch the form's submit event
        alert('begin');
        $.ajax({ // create an AJAX call...
            data: $(this).serialize(), // get the form data
            type: $(this).attr('method'), // GET or POST
            url: $(this).attr('action'), // the file to call
            success: function(response) { // on success..
                $('#content').html(response); // update the DIV
            }
        });
        return false; // cancel original event to prevent form submitting
    }); 

}); 
```

谢谢你们的尝试。

# iphone - 通过以编程方式设置键来动态创建 NSPredicate

> ID：15505208
> 
> 赞同：8
> 
> 时间：2013-03-19T16:33:05.993
> 
> 标签：iphone, ios, objective-c, core-data, nspredicate

为什么以下片段中的前者有效，而后者无效？

**片段 1**

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(coin_unique == %@)", [NSNumber numberWithInt:species]]; 
```

**片段 2**

```
// Does NOT Work
NSString *predicateText = @"coin_unique";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(%@ == %@)", predicateText, [NSNumber numberWithInt:species]]; 
```

我必须根据我的方法中收到的参数动态创建谓词。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-19T16:36:24.700

`coin_unique`是一个键，所以它需要`%K`格式说明符：

```
NSString *predicateText = @"coin_unique";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(%K == %@)", predicateText, [NSNumber numberWithInt:species]]; 
```

[格式语法在这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)描述得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T01:21:49.530

即使我的 NSPredicate 格式正确，我也收到以下错误。

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Insufficient arguments for conversion characters specified in format string.' site:stackoverflow.com 
```

像个傻瓜一样，我忘记将第二个参数传递给谓词格式（因为有两个`%@`）。即`NSPredicate(format:predicateFormat,argumentArray:[Date()])`当需要两个元素时，数组中只有一个元素：`[Date(), Date()]`

# qt - 为 QToolButton 菜单使用样式表

> ID：15505210
> 
> 赞同：1
> 
> 时间：2013-03-19T16:33:12.250
> 
> 标签：qt, qt5

如何设置附加到 QToolButton 的下拉菜单的样式？

我试过了`QToolButton::menu`，`QToolButton::drop-down`并且`QMenu#myObject`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:17:02.413

发表我的评论作为答案：

“尝试直接在与工具按钮关联的菜单上设置样式表”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:37:38.750

实际上它是一个 QComboBox，这是我用来自定义组合框的样式表。

```
QComboBox {
    border: 1px solid rgb(95, 95, 95);
    border-radius: 3px;
    /*padding: 1px 18px 3px 3px;*/
    /*min-width: 6em*/;
    color: rgb(220, 220, 220);
    margin: 0 0 0 0;
}

QComboBox:editable {
    background: qlineargradient(x1: 0, y1: 0, x2: 0, y2: 1,
                                  stop: 0 rgb(51, 51, 51), stop: 0.4 rgb(39, 39, 39),
                                  stop: 0.5 rgb(32,32,32), stop: 1.0 rgb(38,38,38));
}

QComboBox:!editable {
    background: qlineargradient(x1: 0, y1: 0, x2: 0, y2: 1,
                                  stop: 0 rgb(51, 51, 51), stop: 0.4 rgb(39, 39, 39),
                                  stop: 0.5 rgb(32,32,32), stop: 1.0 rgb(38,38,38));
}

QComboBox::drop-down:editable {
}

QComboBox:!editable:on {
}

QComboBox::drop-down:editable:on {
}

QComboBox:on { /* shift the text when the popup opens */
   /* padding-top: 3px;
    padding-left: 4px;*/
        background: qlineargradient(x1: 0, y1: 0, x2: 0, y2: 1,
                                  stop: 0 rgb(51, 51, 51), stop: 0.4 rgb(39, 39, 39),
                                  stop: 0.5 rgb(32,32,32), stop: 1.0 rgb(38,38,38));
}

QComboBox::drop-down {
    subcontrol-origin: padding;
    subcontrol-position: center right;
    width: 15px; 
      right:3px;
    border-top-right-radius: 3px; /* same radius as the QComboBox */
    border-bottom-right-radius: 3px;
      background:none;
}

QComboBox::down-arrow {
    image: url(:/images/arrow-down-inverted.png);
    height: 10px;
}

QComboBox::down-arrow:on { /* shift the arrow when popup is open */
    top: 1px;
    left: 1px;
} 
```

# hibernate - 如何在数据更改时刷新 TableView 中的单行

> ID：15505212
> 
> 赞同：2
> 
> 时间：2013-03-19T16:33:15.573
> 
> 标签：hibernate, javafx-2, tableview

我正在使用 Hibernate 和 JavaFx。我要做的是更改一个元素（行）并在更改后刷新它。

我**不想**刷新所有元素（正如我在教程中找到的那样），我不能使用 SimpleStringProperty，因为在 JPA 映射文件中使用它是不可能的。

我尝试删除并添加相同的元素 - 元素已删除但未再次添加。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:32:08.343

I ran into the same problem when I started using TableView tied to a database table. I'd update the data for an object, which is displayed in one row of the table, and since the data structure is an ObservableList I would expect the data to refresh automatically. Doesn't happen, and there is an open (last I checked) JIRA issue for this. In the meantime you can do this:

```
 tableView.getColumns().get(0).setVisible(false);
              tableView.getColumns().get(0).setVisible(true); 
```

This forces the refresh, and it happens very quickly. Doesn't matter what index you use in the get() method, so I always use zero (0). Previously I was resetting the entire List of data and clearing the tableView and resetting the data, and that caused a noticeable flash/redraw. The setVisible method above didn't cause that to happen and was exactly what I was hoping for. Good Luck.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T18:34:12.010

```
import javafx.application.Application;

import javafx.scene.Group;

import javafx.scene.Scene;

import javafx.stage.Stage;

import java.util.Date;

import javafx.collections.FXCollections;

import javafx.collections.ObservableList;

import javafx.concurrent.Service;

import javafx.concurrent.Task;

import javafx.event.ActionEvent;

import javafx.event.EventHandler;

import javafx.geometry.Insets;

import javafx.scene.control.Button;

import javafx.scene.control.ProgressIndicator;

import javafx.scene.control.TableColumn;

import javafx.scene.control.TableView;

import javafx.scene.control.cell.PropertyValueFactory;

import javafx.scene.layout.Region;

import javafx.scene.layout.StackPane;

import javafx.scene.layout.VBox;

public class ServiceSample extends Application {

    final GetDailySalesService service = new GetDailySalesService();

    private void init(Stage primaryStage) {

        Group root = new Group();

        primaryStage.setScene(new Scene(root));

        VBox vbox = new VBox(5);

        vbox.setPadding(new Insets(12));

        TableView tableView = new TableView();

        Button button = new Button("Refresh");

        button.setOnAction(new EventHandler<ActionEvent>() {

            public void handle(ActionEvent t) {

                service.restart();

            }

        });

        vbox.getChildren().addAll(tableView, button);

        Region veil = new Region();

        veil.setStyle("-fx-background-color: rgba(0, 0, 0, 0.4)");

        ProgressIndicator p = new ProgressIndicator();

        p.setMaxSize(150, 150);

        //Define table columns

        TableColumn idCol = new TableColumn();

        idCol.setText("ID");

        idCol.setCellValueFactory(new PropertyValueFactory("dailySalesId"));

        tableView.getColumns().add(idCol);

        TableColumn qtyCol = new TableColumn();

        qtyCol.setText("Qty");

        qtyCol.setCellValueFactory(new PropertyValueFactory("quantity"));

        tableView.getColumns().add(qtyCol);

        TableColumn dateCol = new TableColumn();

        dateCol.setText("Date");

        dateCol.setCellValueFactory(new PropertyValueFactory("date"));

        dateCol.setMinWidth(240);

        tableView.getColumns().add(dateCol);

        p.progressProperty().bind(service.progressProperty());

        veil.visibleProperty().bind(service.runningProperty());

        p.visibleProperty().bind(service.runningProperty());

        tableView.itemsProperty().bind(service.valueProperty());

        StackPane stack = new StackPane();

        stack.getChildren().addAll(vbox, veil, p);

        root.getChildren().add(stack);

        service.start();

    }

    public class GetDailySalesService extends Service<ObservableList<DailySales>> {

        @Override

        protected Task createTask() {

            return new GetDailySalesTask();

        }

    }

    public class GetDailySalesTask extends Task<ObservableList<DailySales>> {       

        @Override protected ObservableList<DailySales> call() throws Exception {

            for (int i = 0; i < 500; i++) {

                updateProgress(i, 500);

                Thread.sleep(5);

            }

            ObservableList<DailySales> sales = FXCollections.observableArrayList();

            sales.add(new DailySales(1, 5000, new Date()));

            sales.add(new DailySales(2, 2473, new Date(0)));

            return sales;

        }

    }

    public class DailySales {

        private Integer dailySalesId;

        private Integer quantity;

        private Date date;

        public DailySales() {

        }

        public DailySales(int id, int qty, Date date) {

            this.dailySalesId = id;

            this.quantity = qty;

            this.date = date;

        }

        public Integer getDailySalesId() {

            return dailySalesId;

        }

        public void setDailySalesId(Integer dailySalesId) {

            this.dailySalesId = dailySalesId;

        }

        public Integer getQuantity() {

            return quantity;

        }

        public void setQuantity(Integer quantity) {

            this.quantity = quantity;

        }

        public Date getDate() {

            return date;

        }

        public void setDate(Date date) {

            this.date = date;

        }

    }

    @Override public void start(Stage primaryStage) throws Exception {

        init(primaryStage);

        primaryStage.show();

    }

    public static void main(String[] args) { launch(args); }

} 
```

# jquery - (jQuery 1.8.2) 加载绑定不起作用

> ID：15505220
> 
> 赞同：0
> 
> 时间：2013-03-19T16:33:24.300
> 
> 标签：jquery

我编写了一个小脚本，从另一个页面加载一些内容到工具提示 div。加载后，我想移动工具提示并对其进行一些操作。为此，我想等待浏览器渲染。我编写了这样的代码：

```
element.on("load", function (event) {
    /* some code */
    $(this).off(event);
});

element.load(url, function() {
    /* some code */
}); 
```

结果：工具提示已加载，但未触发事件。

[http://jsfiddle.net/sUJrU/](http://jsfiddle.net/sUJrU/)

# php - 如何获取产品相对于我当前所在商店的类别 ID

> ID：15505221
> 
> 赞同：4
> 
> 时间：2013-03-19T16:33:25.540
> 
> 标签：php, magento, magento-1.7

我在产品页面上并拥有产品对象，但是当我尝试使用以下方法获取类别 ID 时：

```
$_product->getCategoryIds(); 
```

或者：

```
$_product->getResource()->getAttribute('category_ids')->getFrontend()->getValue($_product); 
```

它为我提供了所有类别 ID，我只想要我所在商店的那些。

这是一个多商店环境，因此是我的问题。其他一切似乎都很好，并且类别列表工作正常。这是我唯一的问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T20:02:07.573

与 Alans 的回答非常相似，可能循环少了一点：

```
$rootCategory = Mage::getModel('catalog/category')
    ->load(Mage::app()->getStore()->getRootCategoryId());

$sameStoreCategories = Mage::getResourceModel('catalog/category_collection')
    ->addIdFilter($product->getCategoryIds())
    ->addFieldToFilter('path', array('like' => $rootCategory->getPath() . '/%'))
    ->getItems();

var_dump(array_keys($sameStoreCategories)); 
```

这将始终有效。丑陋的事情是您仍然需要加载类别。

如果启用了平面类别表，则可以使用以下变体：

```
$sameStoreCategories = Mage::getResourceModel('catalog/category_flat_collection')
    ->addIdFilter($product->getCategoryIds())
    ->getItems();

var_dump(array_keys($sameStoreCategories)); 
```

为什么它有效？因为平面表是按商店索引的，而每个平面表只包含与该商店组根类别相关联的类别实体记录。

因此，即使您按与产品关联的所有类别 ID 进行过滤，该集合也将仅包含当前商店中存在的类别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:19:06.697

如果您有数百万个类别或数百万个产品，或者需要收集所有产品及其所有类别 - 您可以尝试下一个怪异的方式（再次仅在类别平面索引重建后有效）：

*   在某些安装程序或 cron - 创建一个新表并使其与下一个请求保持同步

对于每个商店：

```
CREATE TABLE IF NOT EXISTS categories_X SELECT product_id, CONVERT(GROUP_CONCAT(category_id) USING utf8) as category_id FROM catalog_category_product where category_id in (select entity_id from catalog_category_flat_store_X) GROUP BY product_id 
```

*   其中 X - 是商店的 ID

*   再次编写模型或直接请求以获取所需商店和所需产品的所有类别

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:16:36.580

这个有点棘手，所以如果以下内容不起作用，则可能是代码而不是您。

问题是，据我所知，Magento 没有跟踪哪些类别在哪个商店中。相反，Magento 会跟踪特定商店 的**根类别。**

这意味着一旦我们有了一个类别 ID 列表，我们需要获取每个类别的根类别，然后检查该根类别是否与当前商店的根类别匹配。

以下代码应该可以做到这一点，但请使用各种产品进行测试

```
 //get root category for current store
    $store_root_id = Mage::app()->getStore()->getRootCategoryId();

    //get category IDs from product
    $ids = $product->getCategoryIds();        

    //load full cateogires
    $categories = Mage::getModel('catalog/category')
    ->getCollection()
    ->addIdFilter($ids);

    //filter out categories with different root
    $category_ids = array();
    foreach($categories as $cat)
    {
        //path property is 1/root_id/id/id
        $parts      = explode('/', $cat->getPath());
        $one        = array_shift($parts);
        $root_id    = array_shift($parts);

        if($root_id == $store_root_id)
        {
            $category_ids[] = $cat->getId();    
        }            
    }

    var_dump($category_ids); 
```

# javascript - 使用 Javascript 将 CSS 样式表作为字符串注入

> ID：15505225
> 
> 赞同：54
> 
> 时间：2013-03-19T16:33:45.803
> 
> 标签：javascript, css, dom, google-chrome-extension

我正在开发一个 Chrome 扩展，我希望用户能够添加自己的 CSS 样式来更改扩展页面（而不是网页）的外观。我已经研究过 using `document.stylesheets`，但似乎它希望拆分规则，并且不会让您注入完整的样式表。有没有一种解决方案可以让我使用字符串在页面上创建新的样式表？

我目前没有使用 jQuery 或类似的，所以纯 Javascript 解决方案会更可取。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-03-19T17:43:50.573

有几种方法可以做到这一点，但最简单的方法是创建一个`<style>`元素，设置它的**textContent**属性，然后附加到页面的`<head>`.

```
/**
 * Utility function to add CSS in multiple passes.
 * @param {string} styleString
 */
function addStyle(styleString) {
  const style = document.createElement('style');
  style.textContent = styleString;
  document.head.append(style);
}

addStyle(`
  body {
    color: red;
  }
`);

addStyle(`
  body {
    background: silver;
  }
`); 
```

如果你愿意，你可以稍微改变它，以便在`addStyle()`调用时替换 CSS 而不是附加它。

```
/**
 * Utility function to add replaceable CSS.
 * @param {string} styleString
 */
const addStyle = (() => {
  const style = document.createElement('style');
  document.head.append(style);
  return (styleString) => style.textContent = styleString;
})();

addStyle(`
  body {
    color: red;
  }
`);

addStyle(`
  body {
    background: silver;
  }
`); 
```

***IE 编辑：****请注意，IE9 及以下版本[最多只允许 32 个样式表](http://blogs.msdn.com/b/ieinternals/archive/2011/05/14/internet-explorer-stylesheet-rule-selector-import-sheet-limit-maximum.aspx)，因此在使用第一个片段时要小心。这个数字在 IE10 中增加到 4095。*

***2020 年编辑：****这个问题已经很老了，但我仍然偶尔会收到有关它的通知，因此我将代码更新为更现代，并替换`.innerHTML`为`.textContent`. 这个特定实例是安全的，但`innerHTML`尽可能避免是一个好习惯，因为它可能是 XSS 攻击向量。*

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-06-27T21:23:46.047

感谢[这个家伙](http://jonraasch.com/blog/javascript-style-node)，我能够找到正确的答案。这是如何完成的：

```
function addCss(rule) {
  let css = document.createElement('style');
  css.type = 'text/css';
  if (css.styleSheet) css.styleSheet.cssText = rule; // Support for IE
  else css.appendChild(document.createTextNode(rule)); // Support for the rest
  document.getElementsByTagName("head")[0].appendChild(css);
}

// CSS rules
let rule  = '.red {background-color: red}';
    rule += '.blue {background-color: blue}';

// Load the rules and execute after the DOM loads
window.onload = function() {addCss(rule)}; 
```

## [小提琴](https://jsfiddle.net/j26design/scrjqkc8/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-09-17T11:03:40.527

你听说过承诺吗？它们适用于所有现代浏览器，并且使用起来相对简单。看看这个将 css 注入 html 头部的简单方法：

```
function loadStyle(src) {
    return new Promise(function (resolve, reject) {
        let link = document.createElement('link');
        link.href = src;
        link.rel = 'stylesheet';

        link.onload = () => resolve(link);
        link.onerror = () => reject(new Error(`Style load error for ${src}`));

        document.head.append(link);
    });
} 
```

您可以按如下方式实现它：

```
window.onload = function () {
    loadStyle("https://fonts.googleapis.com/css2?family=Raleway&display=swap")
        .then(() => loadStyle("css/style.css"))
        .then(() => loadStyle("css/icomoon.css"))
        .then(() => {
            alert('All styles are loaded!');
        }).catch(err => alert(err));
} 
```

真的很酷，对吧？这是一种使用 Promises 决定样式优先级的方法。

或者，如果您想同时导入所有样式，您可以执行以下操作：

```
function loadStyles(srcs) {
    let promises = [];
    srcs.forEach(src => promises.push(loadStyle(src)));
    return Promise.all(promises);
} 
```

像这样使用它：

```
loadStyles([
    'css/style.css',
    'css/icomoon.css'
]); 
```

您可以实现自己的方法，例如按优先级导入脚本、同时导入脚本或同时导入样式和脚本。如果我获得更多选票，我将发布我的实现。

如果您想了解有关 Promises 的更多信息，请[在此处阅读更多信息](https://javascript.info/promise-basics)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-07T13:53:08.593

我最近也有同样的需求，并编写了一个与 Liam 相同的函数，除了还允许多行 CSS。

```
injectCSS(function(){/*
    .ui-button {
        border: 3px solid #0f0;
        font-weight: bold;
        color: #f00;
    }
    .ui-panel {
        border: 1px solid #0f0;
        background-color: #eee;
        margin: 1em;
    }
*/});

// or the following for one line

injectCSS('.case2 { border: 3px solid #00f; } '); 
```

[这个函数](https://github.com/patcullen/injectCSS/blob/master/injectCSS.js)的来源。你可以从[Github repo](https://github.com/patcullen/injectCSS)[下载](https://github.com/patcullen/injectCSS/archive/master.zip)。或者在这里查看更多[示例用法](http://mindmeat.blogspot.com/2014/05/injecting-css-with-javascript.html)。

我的偏好是将[它与 RequireJS](https://gist.github.com/patcullen/90ff7dbcf34e2ce7a06a)一起使用，但在没有 AMD 加载程序的情况下，它也可以作为全局函数工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-31T03:02:42.980

我认为注入任何 HTML 字符串的最简单方法是通过：[`insertAdjacentHTML`](https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML)

```
// append style block in <head>

const someStyle = `
<style>
    #someElement { color: green; }
</style>
`;

document.head.insertAdjacentHTML('beforeend', someStyle); 
```

# c# - 数据集的超出范围异常

> ID：15505231
> 
> 赞同：0
> 
> 时间：2013-03-19T16:34:00.133
> 
> 标签：c#, asp.net

希望这是一个简单的

我正在从我的数据集的列中提取数据。由于提供了 SQL 查询 ID，因此只会返回一个结果。所以我认为这个结果总是在数据集的“0”行。

如果我单击我的数据网格中的第一个结果........将 id '0' 发送到我的第二页，然后从它崩溃的数据库中提取图像名称。如果我在网格中选择第二个结果，即“1”，那很好。

这是我的代码：

```
 SqlConnection sqlcon = new SqlConnection(connstring);
        SqlCommand sqlcmd = new SqlCommand("select pic from cds WHERE _id = '" + passedID + "'", sqlcon);
        SqlDataAdapter adp = new SqlDataAdapter(sqlcmd);
        DataSet ds = new DataSet();
        adp.Fill(ds);
        // Rows set to '0' for the first result in the dataset but crashes if the first item is selected.
        object a = ds.Tables[0].Rows[0]["pic"];
        string test = a.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:36:41.337

添加检查以确保您的查询已检索到至少一行

```
if(ds.Tables[0].Rows.Count > 0)
{
    object a = ds.Tables[0].Rows[0]["pic"];
    string test = a.ToString();
}
else
{
    Response.Write("No rows for the ID = " + passedID);
} 
```

数据集没有行。包含在 Dataset 中的 DataTable 具有 Rows 属性，但如果您的查询失败（未找到具有请求的 ID 的行），则 Rows 集合的元素为零，您无法访问索引为零。（超出范围）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:38:07.913

我会猜测问题是您传递了错误的 id，或者`cds`表中没有传递的 id 的数据。

当您尝试访问`Rows[0]`时，您会收到错误消息，因为没有数据，因此集合中没有行。

# scala - Play2 和 Scala，我应该如何配置我的集成测试以使用适当的数据库运行

> ID：15505234
> 
> 赞同：2
> 
> 时间：2013-03-19T16:34:05.637
> 
> 标签：scala, testing, h2, playframework-2.1, anorm

我试图弄清楚如何在我的 Play2 应用程序中编写我的数据库集成测试。

在我的 conf 文件中，我指定了两个数据库，xxx_test 用于常规使用，h2 db 用于测试：

```
db.xxx_test.driver=com.mysql.jdbc.Driver
db.xxx_test.url="jdbc:mysql://localhost/xxx_test?characterEncoding=UTF-8"
db.xxx_test.user="root"
db.xxx_test.password=""

db.h2.driver=org.h2.Driver
db.h2.url="jdbc:h2:mem:play"
db.h2.user=sa
db.h2.password="" 
```

在我的用户对象中，我指定`xxx_test`在运行应用程序时使用。

```
def createUser(user: User): Option[User] = {

    DB.withConnection("xxx_test") {
      implicit connection =>
        SQL("insert into users(first_name, last_name, email, email_validated, last_login, created, modified, active) values({first_name},{last_name},{email},{email_validated},{last_login}, {created}, {modified}, {active})").on(
          'first_name -> user.firstName,
          'last_name -> user.lastName,
          'email -> user.email,
          'email_validated -> user.emailValidated,
          'last_login -> user.lastLogin,
          'created -> user.created,
          'modified -> user.modified,
          'active -> true
        ).executeInsert().map(id => {
          return Some(User(new Id[Long](id), user.firstName, user.lastName, user.email, user.emailValidated, user.lastLogin, user.created, user.modified, true))
        }
        )
    }
    None
  } 
```

在我的测试中，我创建了一个新的 inMemoryDatabase，然后使用 User 创建并获取我的对象进行测试。

```
class DBEvolutionsTest extends Specification {

  "The Database" should {
    "persist data properly" in {
      running(FakeApplication(additionalConfiguration = inMemoryDatabase())) {

        User.create(User(Id[Long](1L), "jakob",
          "aa",
          "aaa",
          true,
          DateTime.now(),
          DateTime.now(),
          DateTime.now(),
          true)) 

        val newUser = User.findBy(Id[Long](1L))

        newUser.get.firstName must beEqualTo("jakob")
      }
      }
    }

} 
```

这当然不是正确的方法，因为 User 对象使用的是`xxx_test`而不是 `h2`db。测试将在真实数据库中创建一个用户，而不是在内存中创建一个用户，因为我在 User( `DB.withConnection("xxx_test")`) 对象中指定了数据库。我想有一些聪明的方法可以做到这一点，我不想在应用程序中传递数据库名称，比如`User.create(User(...), "xxx_test")`

你是如何解决这个问题的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:30:25.920

您可能想查看如何在 scala 中进行依赖注入。一个好的解决方案是将数据库从用户模型中抽象出来，然后将其作为依赖项传递。

一种简单的方法是更改​​配置文件以进行测试。Play 让您[指定在命令行上使用哪个配置文件](http://www.playframework.com/documentation/2.0/ProductionConfiguration)。虽然这不是最实用的。

另一种解决方案是使用隐式，将数据库连接定义为函数的隐式参数：

```
def createUser(user: User)(implicit dbName: String): Option[User]= 
  DB.withConnection(dbName) { ... } 
```

您仍然必须在所有调用中向上传播参数，但您可以隐藏它： def importUsers(csvFile: File)(implicit dbName: String): Seq[User] = { conn => ... User.createUser( u) ... }

当你从顶部调用它时：

```
implicit dbName = "test"
importUsers(...) 
```

这是内置在 scala 中的，所以它很容易设置并且不需要很多样板来支持它。就个人而言，我认为隐式使代码不清楚，我更喜欢本演示文稿中提出的解决方案[Dead-Simple Dependency Injection](http://lanyrd.com/2012/nescala/sqygc/)。

它的要点是，您使您`createUser`和所有其他依赖于数据库连接的方法根据连接返回一个函数，而不仅仅是结果。以下是它如何与您的示例一起使用。

1-您创建一个配置连接的连接特征。一个简单的形式是：

```
trait ConnectionConfig {
   def dbName: String
} 
```

2-您的方法取决于该配置返回一个函数：

```
def createUser(user: User): ConnectionConfig => Option[User] = { conn =>

    DB.withConnection(conn.dbName) { ... }

} 
```

3-当您在另一个方法中使用 createUser 时，该方法也变得依赖于连接，因此您可以通过返回对 ConnectionConfig 的依赖关系以及函数返回类型来标记它，例如：

```
def importUsers(csvFile: File): ConnectionConfig => Seq[User] = { conn =>
    ...
    User.createUser(u)(conn)
    ...
} 
```

这是一个好习惯，因为在您的代码中会清楚哪些方法取决于与数据库的连接，并且您可以轻松地交换连接。因此，在您的主应用程序中，您将创建真正的连接：

```
class RealConncetionConfig extends ConnectionConfig {
   val dbName = "xxx_test"
} 
```

但是在您的测试文件中，您创建了一个测试数据库配置：

```
class DBEvolutionsTest extends Specification {

  class TestDBConfig extends ConnectionConfig {
      val dbName = "h2"
  }

  val testDB = new TestDBConfig()

  "The Database" should {
    "persist data properly" in {
      running(FakeApplication(additionalConfiguration = inMemoryDatabase())) {

        User.create(User(Id[Long](1L), "jakob",
          "aa",
          "aaa",
          true,
          DateTime.now(),
          DateTime.now(),
          DateTime.now(),
          true))(testDB) 

        val newUser = User.findBy(Id[Long](1L))

        newUser.get.firstName must beEqualTo("jakob")
      }
      }
    }

} 
```

这是它的要点。查看我提到的演示文稿和幻灯片，有一种很好的方法可以将所有这些抽象化，这样您就可以摆脱`(conn)`使这段代码变得丑陋的论点。

作为旁注，如果我是你，我什至会抽象 DB 的类型。因此，与其将 SQL 放在 User 模型对象中，不如将其放在单独的实现中，这样您就可以轻松切换数据库的类型（使用 mongodb、dynamo...）。它就像这样，从前面的代码扩展而来：

```
trait ConnectionConfig {
   def createUser(user: User): Option[User]
} 
```

在用户模型对象中：

```
def createUser(user: User): ConnectionConfig => Option[User] = { conn =>
    conn.createUser(user)
} 
```

这样，在根据用户模型测试部分代码时，您可以制作一个模拟数据库，其中 createUser 始终有效并返回预期结果（或始终失败......），甚至无需使用内存数据库（您仍然会需要测试真正的 SQL 连接，但您可以测试应用程序的其他部分）：

```
trait ConnectionConfig {
    def createUser(user: User): Option[User] = Some(user)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:13:43.933

您必须为内存数据库定义一个不同于默认 (xxx_test) 名称的名称。我认为以下代码段应该有效。

```
FakeApplication(additionalConfiguration = inMemoryDatabase("h2")) 
```

另请参阅：[https ://stackoverflow.com/a/11029324/2153190](https://stackoverflow.com/a/11029324/2153190)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T23:33:52.553

该`inMemoryDatabase`方法定义如下：

```
def inMemoryDatabase(
  name: String = "default", 
  options: Map[String, String] = Map.empty[String, String]): Map[String, String] 
```

我的猜测是您应该将 the`xxx_test`作为`name`参数传递。

# mysql - SQL 使用第一个表中的数据更新辅助表

> ID：15505237
> 
> 赞同：0
> 
> 时间：2013-03-19T16:34:12.567
> 
> 标签：mysql, sql

我只是在学习 SQL，所以如果这有点简单，请原谅。

我有一个将数据保存到 2 个表的应用程序表单：“应用程序”和“文件”。

Applications 表有一个主键 appID，它是自动递增的。

提交时，会在两个表中创建一条新记录。我的问题是，“文件”表也有一个 appID 列，它的值应该与应用程序表中的值相同。

有人可以帮我构建我的 SQL 查询来实现这一点（或者有没有更简洁的方法）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:41:12.300

在为 Application 表发出`INSERT`语句后，`LAST_INSERT_ID()`在填充`appID`files 表时使用该函数：

例如：

```
# NULL for appID
INSERT INTO Applications 
VALUES (NULL, "app name") 

# NULL for fileID, LAST_INSERT_ID() for recently inserted appID
INSERT INTO files 
VALUES (NULL, LAST_INSERT_ID(), "file name") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:36:50.040

像这样的东西应该工作。

```
insert into files
(appid, field1, field2, etc)
select appid, value1, value2, etc
from applications
where appid = the one you just inserted. 
```

# grails - Spring 安全核心和 Grails 中的记住我功能

> ID：15505241
> 
> 赞同：1
> 
> 时间：2013-03-19T16:34:21.107
> 
> 标签：grails, cookies, spring-security, remember-me

我正在尝试使用 spring 安全核心在我的 grails 应用程序中实现“记住我”功能。这个想法是如果用户之前登录过，则直接登录用户而不询问用户名和密码。所以，我在我的 config.groovy 文件中添加了这些代码

```
grails.plugins.springsecurity.rememberMe.cookieName='sptest_remember_me'
grails.plugins.springsecurity.rememberMe.alwaysRemember=true 
grails.plugins.springsecurity.rememberMe.tokenValiditySeconds=5*60
grails.plugins.springsecurity.rememberMe.parameter='_spring_security_remember_me'
grails.plugins.springsecurity.rememberMe.key='sptest_test'
grails.plugins.springsecurity.rememberMe.useSecureCookie=false
grails.plugins.springsecurity.rememberMe.persistent=false 
```

但是会话过期后我会收到登录屏幕提示，我希望应用程序记住用户的登录信息一个月左右。我该怎么做 ？

# javascript - 跨域/多域身份验证的安全问题

> ID：15505246
> 
> 赞同：4
> 
> 时间：2013-03-19T16:34:31.420
> 
> 标签：javascript, authentication, cross-domain, browser-security

我们有一个多域平台，它使用中央域进行身份验证和 api 操作。

API & 认证 + 账户管理

*   `https://example.com`

只读 + 小部件操作

*   `http://example.com`
*   `http://example.net`
*   `http://example.org`

我已经阅读了大多数（如果不是全部）有关此类设置的 StackOverflow 问题，但无法深入了解此问题。（关于此的大多数问答都涉及一般原则，很少涉及细节）。

我们正在使用（一个 javascript iframe 代理库）在和其他域名`Porthole.js`之间推送 API 调用。`https://example.com`一切都很完美。

我正试图围绕“登录状态”和持久化用户数据来自定义 javascript。

看看像 StackOverflow 这样的网站是如何建模的，我的第一个想法是：

*   在 localStorage 中缓存登录状态 + 自定义数据（用户名、照片等）+ cookie 数据`https://example.com`10 分钟，或直到注销。10分钟后，缓存会命中服务器的API进行更新。
*   在第一次访问网络站点时，查询远程 localStorage。如果他们已登录，则代理返回登录状态、自定义数据和 http（不是 https）cookie id。然后此数据在 10 分钟内被视为“新鲜”，或直到注销。
*   来自的 cookie`http://example.com`被克隆到请求域，替换该会话。这允许我跨域使用单个 cookie / id。

我最担心的是最后一步——克隆 http cookie——尽管它只用于跟踪和“预览”访问。但是整个系统依赖于浏览器安全模型，我可能会遗漏一些东西。这似乎是一种优雅且“安全”的机制，就好像我使用了 AuthTicket 模型（用户访问[https://example.com/auth-request?destination=http://example.net/auth-response](https://example.com/auth-request?destination=http://example.net/auth-response)，被重定向到[http://example.net/auth-response?nonce=VERYBIGNUMBER](http://example.net/auth-response?nonce=VERYBIGNUMBER)）或在 iframe 中发出透明的 oAuth 请求。

任何人都可以阐明我错过的明显/明显的安全问题，或者这看起来和替代方案一样安全吗？

# php - 从 SQL 文本字段中按日期过滤

> ID：15505255
> 
> 赞同：0
> 
> 时间：2013-03-19T16:34:55.953
> 
> 标签：php, sql, datetime

我遇到了以下问题：

我不得不从 MS SQL Server 迁移数据库，其中某些字段包含未按此类存储的日期值。例如，有一个带有“validfrom”和“validto”字段的“offers”字段。可悲的是，他们使用文本字段（varchar）进行这种类型的输入，我现在很难按日期正确过滤它。一个例子如下：

```
datefrom = "21.01.2012"
dateto = "21.05.2012" 
```

现在我尝试使用按日期整理旧条目

```
$curDate = date('d.m.Y'); // Outputs 19.03.2013 
```

在我的 PHP PDO 中，我使用以下查询

```
$query = "SELECT * from mytable where validtill >= '$curDate'" 
```

这将输出

```
$query = "SELECT * from mytable where validtill >= '19.03.2013'" 
```

我仍然收到带有 2011 年日期条目的旧条目。我想我遗漏了一些东西 - 也许我无法将字符串比较为“日期”。我尝试将字段从 vharchar 更改为 date，但是当我这样做时，整个导入的数据会变得混乱。

有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:48:35.180

在您的问题中，您说您必须从 MS Sql Server 迁移——您迁移到什么数据库？您需要将 varchar 字段转换为日期才能进行日期比较。

假设 MySQL，那么您可以使用`str_to_date`. 像这样的东西应该工作：

```
select str_to_date(dtfield, '%d.%m.%Y')
from yourtable
where str_to_date(dtfield, '%d.%m.%Y') > str_to_date('1/20/2012', '%m/%d/%Y') 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/b2ff3/1)

假设您仍在 SQL Server 中，那么您必须删除日期的每个部分，以将日期置于 SQL Server 可以理解的格式中，然后`CONVERT`将其数据类型更改为日期：

```
SELECT CONVERT(datetime,RIGHT(dtfield,4)+SUBSTRING(dtfield,4,2)+LEFT(dtfield,2))
FROM yourtable
WHERE CONVERT(datetime,RIGHT(dtfield,4)+SUBSTRING(dtfield,4,2)+LEFT(dtfield,2)) > '1/20/2012' 
```

[更多小提琴](http://sqlfiddle.com/#!3/12f99/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:43:23.067

对。这将进行字符串比较，并且您似乎首先拥有 DAY。这意味着 2013 年 3 月 21 日大于 2014 年 3 月 19 日......因为它首先比较排序的是日期。

如果您可以将数据重新排列为 Ymd，则此文本字符串比较将起作用，即 2013 > 2012 > 2011 和 2013-02-xx > 2012-02-xx...

我的建议是在您的数据库中创建一个新列，您可以使用 PHP 脚本将新的正确值转换并存储为日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:41:41.907

也许是：

```
$query = "SELECT CAST(m.field as date) as field, m.* from mytable as m where m.field >='" . date('Y-m-d') . "';"; 
```

# curl - 在 Urban Airship 上注册 device_token 的 curl 命令语法是什么？

> ID：15505260
> 
> 赞同：0
> 
> 时间：2013-03-19T16:35:02.217
> 
> 标签：curl, urbanairship.com

我有一个从 GCM 收到的 android device_token。我想用 curl 协议将它发送到 Urban Airship 并为我的 android 设备接收他们的 APID。我寻找类似的东西：

curl -X PUT -u "myAppKey:secretKey" \ -H "Content-Type: application/json" \ -H "Basic : xxxxx" [https://go.urbanairship.com/api/device_tokens/](https://go.urbanairship.com/api/device_tokens/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:47:44.990

此类请求没有 Urban API。只能在应用程序构建中使用 Urban SDK 接收 APID。

# c# - Kinect 骨架大小调整/图像大小调整？

> ID：15505262
> 
> 赞同：0
> 
> 时间：2013-03-19T16:35:08.433
> 
> 标签：c#, image, compare, kinect

我之前发布过关于 c# kinect 图像比较的帖子，我已经通过在黑色背景上截取骨架流的截图来克服一些问题，以克服比较照片固有的问题，现在我的问题是我需要图像用户要与预先保存的动作进行比较，但是当用户与我的身高不同时，我遇到了麻烦，有没有办法克服这个问题？我唯一的想法涉及调整图像大小或比较某些彩色像素的位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:56:42.367

这取决于您要如何比较图像。如果你想逐个像素地比较它们，你不需要调整大小，你只需要在 for 循环中使用一个比率。例如，如果 image1 的大小是 WIDTH1*HEIGHT1，而 image2 的大小是 WIDTH2*HEIGHT2，您可以使用这样的 for 循环：

```
for(int i = 0; i < WIDTH1; i++)
{
    for(int j = 0; j < HEIGHT1; j++)
    {
        pixel1 = image1[i][j];
        pixel2 = image2[i * WIDTH2/WIDTH1][j * HEIGHT2/HEIGHT1];
        // compare
    }
} 
```

一种更优雅的方法是将 pixel1 与来自 image2 的多个像素的组合进行比较。例如，如果 image1 为 300*300，image2 为 600*600，那么您可以将 image1 的每个像素与 image2 中 4 个像素的平均 RGB 进行比较（因为对于 image1 中的每个像素，image2 中存在四个像素）。如果大小不能相互整除，则可以使用加权平均。例如，如果 image1 为 300*300，image2 为 400*400，那么您可以将 image1 的 pixel1 与 image2 中 4 个像素的加权平均值进行比较：

```
pixel1 = image1[i][j];
pixel2 = 0.75 * image2[i * WIDTH2/WIDTH1][j * HEIGHT2/HEIGHT1] + 
    0.25 * AVERAGE(image2[i * WIDTH2/WIDTH1 + 1][j * HEIGHT2/HEIGHT1] +
    image2[i * WIDTH2/WIDTH1][j * HEIGHT2/HEIGHT1 + 1] + 
    image2[i * WIDTH2/WIDTH1 + 1][j * HEIGHT2/HEIGHT1 + 1]); 
```

基本上它的意思是：pixel2 是 75% 的一个像素和 25% 的相邻像素。通过这样做，您实际上是在做一个简单的调整大小算法（将 4 个不同的像素组合成 1 个）。

# c++ - TextOut 向背景添加边距

> ID：15505264
> 
> 赞同：2
> 
> 时间：2013-03-19T16:35:11.400
> 
> 标签：c++, winapi, text-editor

我正在编写我的文本框控件，我尝试进行选择，所选文本将以浅蓝色背景显示，然后我注意到背景有时会超过其他字母，所以我检查了它，正如您将在下面的例子，我发现该`TextOut`函数为背景添加了边距。

这是示例代码：

全局变量：

```
int WritePosition = 0;
bool color; 
```

和代码：

```
case WM_CHAR:

    hdc = GetDC(hWnd);
    SetMapMode(hdc, MM_HIMETRIC);

    wchar_t wch;
    wch = (wchar_t)wParam;

    SIZE size;
    GetTextExtentPoint32(hdc, &wch, 1, &size);

    if(color)
        SetBkColor(hdc, RGB(190, 210, 236));
    color = !color;

    TextOut(hdc, WritePosition, 0, &wch, 1);

    WritePosition += size.cx;
    ReleaseDC(hWnd, hdc); 
```

这段代码写字母，一个白色背景，一个浅蓝色背景，依此类推。

![在此处输入图像描述](../Images/d694d616feb3f6067bdc6a0d27dee3c5.png)

正如您在输出图像中看到的，第二个字母的背景，被第三个字母的背景覆盖。
有没有办法防止添加背景？

# css - 将 font-size 设置为大于 100% 的优势

> ID：15505265
> 
> 赞同：6
> 
> 时间：2013-03-19T16:35:12.907
> 
> 标签：css, responsive-design

在这个非常棒[的响应式设计开发指南中](http://paulstamatiou.com/responsive-retina-blog-development-part-1)，作者讨论了设置一个固定的列宽，该列宽在较小的屏幕尺寸下变得流畅：

> 内容是 37.62136em 宽（乘以 16px 浏览器默认值和我在 content = 620px 上的 103% 字体大小）直到较小的视口扩展到 100% 宽度。

让我困惑的部分是使用`font-size: 103%`. 结果是浏览器将文本呈现为 17px，那么为什么不手动设置它并根据 17px 计算内容 div 的宽度`em`呢？也许使用大于 100% 的字体大小还有其他我不知道的副作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:41:59.520

我认为 103% 的选择没有什么秘诀。我的猜测是 103%/17px 最适合字体。

只要您以`em`单位设置其他所有内容，您就可以轻松缩放字体大小`html`或`body`在整个站点中反映这些更改。基本字体大小（我通常保留为 100%/16px）是一个偏好问题。

# git - Youtrack 与 GIT（不是 github）的集成级别

> ID：15505266
> 
> 赞同：7
> 
> 时间：2013-03-19T16:35:15.717
> 
> 标签：git, teamcity, agile, youtrack

我试图找到这方面的信息，但它所有的少量信息似乎与 Youtrack 中可用功能的旧版本相矛盾或讨论。

据我了解，您需要设置 Teamcity 并将其链接到 YouTrack，以便它知道解析提交消息。但是我想知道它与 YouTrack 的集成程度如何，作为当前信息：

[http://confluence.jetbrains.com/display/YTD3/Integration+with+TeamCity](http://confluence.jetbrains.com/display/YTD3/Integration+with+TeamCity)

似乎没有相关的 4.X 版本，但这意味着您可以使用主题标签提交，它会根据您的提交消息执行一些操作，如下所示：

```
#PR-1 Fixed
Have fixed the underlying issue for this bug, it was due to X,Y,Z 
```

在我看来，这将设置`#PR-1`为已修复状态，但是上面链接中的文档似乎暗示没有保留评论，这似乎有点垃圾。那么有没有办法从 YouTrack 获取有关该提交中所做的相关信息？无论是通过将您带到 TeamCity 以查看提交消息或替代方法的链接。

我们最初使用的是 TFS，但开发起来很痛苦，因为它可怕的只读标志会停止构建脚本中的文件模板化，用于构建和测试软件的工作流编辑器以及最后的工作项跟踪器，这对使用 Visual 的每个人都非常有用工作室，如果你不这样做，你会得到一个垃圾网络前端。

无论如何...我的印象是 Youtrack、TeamCity、Git 都可以端到端地一起使用，并且您可以拥有完整的可追溯性，将放入 GIT 的提交与 TeamCity 构建的版本和放入完成的故事联系起来YouTrack 中的状态。

因此，假设您将 GIT 与 Teamcity 关联起来进行构建，并且 Youtrack 与 Teamcity 关联，您能否获得这种级别的可追溯性？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T17:11:31.113

我宁愿其他人添加到此，所以我不会将其标记为答案，但我可以看到这对许多开发团队来说是一件有吸引力的事情，我将发布我目前的发现。

我设法让**GIT 与 TeamCity 交谈，TeamCity**又**与 YouTrack 交谈**。因此，当我提交时，我可以将评论放在 Youtrack 项目上，也可以在板上移动它们。然后，如果我在 YouTrack 中查看工单的 TeamCity 更改，我可以看到追溯到提交级别的跟踪，以查看谁更改了内容和时间，以及版本之间的差异，因此它是一个完整的端到端解决方案。

让我感到困惑的一件事是**您需要绑定正确 VCS 用户名的 Teamcity 用户**，否则您的更改将不会传递给 YouTrack。

# android - Android：我正在尝试构建自定义列表视图，其中每行包含 3 个项目

> ID：15505268
> 
> 赞同：1
> 
> 时间：2013-03-19T16:35:26.100
> 
> 标签：android, listview

我正在尝试构建自定义列表视图，其中每行包含以下项目：

*   可点击的图片
*   文本
*   可点击的图片

我尝试了很多在其他线程中发现的自定义适配器，但直到现在都没有成功。两个可点击的图像都将使用该行上的文本。

这是我的行布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:orientation="horizontal">

    <ImageButton
        android:id="@+id/imageButton3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="Minus"
        android:src="@drawable/minus" />

    <EditText
        android:id="@+id/item"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="12dp"
        android:layout_weight="1"
        android:clickable="false"
        android:ems="10"
        android:focusable="false"
        android:gravity="center_vertical|center_horizontal"
        android:inputType="text" >

    </EditText>
    <ImageButton
        android:id="@+id/imageButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="Plus"
        android:src="@drawable/plus" />
</LinearLayout> 
```

这是我的列表视图：

```
<ListView
    android:id="@+id/listViewcart"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

</ListView>

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

</ListView> 
```

这是我当前的自定义适配器：

```
public class ListAdapter extends ArrayAdapter<Item> {
    public ListAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
        // TODO Auto-generated constructor stub
    }

    private List<Item> items;

    public ListAdapter(Context context, int resource, List<Item> items) {
        super(context, resource, items);
        this.items = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;

        if (v == null) {
            LayoutInflater vi;
            vi = LayoutInflater.from(getContext());
            v = vi.inflate(R.layout.shoppingcart_row, null);
        }

        Item p = items.get(position);

        if (p != null) {
            TextView tt = (TextView) v.findViewById(R.id.item);

            if (tt != null) {
                tt.setText(p.getText());
            }
        }

        return v;
    }
} 
```

这是我尝试在我的主课中调用它的方法：

```
List test = new ArrayList<String>();
try {
    test.add("test1");
    test.add("test2");
    test.add("test3");

    ListView cart = (ListView) findViewById(R.id.listViewcart); 

    ListAdapter customAdapter = new ListAdapter(this, R.layout.shoppingcart_row, test);

    cart.setAdapter(customAdapter);
}
catch (Exception e) {
    e.printStackTrace();
    System.out.println(test);
} 
```

我正在获得 NPE。我打印了测试列表以防万一，它表明我正在添加 3 个元素。我认为问题出在自定义适配器中，但我无法弄清楚。

我也尝试使用 ArrayList 而不是 List 但我无法修改我的自定义适配器以使用它。有人可以看到我在这里做错了什么吗？谢谢你。

编辑：

logcat 错误日志：

```
java.lang.NullPointerException
   at com.example.hrana.za.vkushti.ShoppingCart.additems(ShoppingCart.java:109)
   at com.example.hrana.za.vkushti.ShoppingCart.onCreate(ShoppingCart.java:49)
   at android.app.Activity.performCreate(Activity.java:5008)
   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
   at android.app.ActivityThread.access$600(ActivityThread.java:130)
   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
   at android.os.Handler.dispatchMessage(Handler.java:99)
   at android.os.Looper.loop(Looper.java:137)
   at android.app.ActivityThread.main(ActivityThread.java:4745)
   at java.lang.reflect.Method.invokeNative(Native Method)
   at java.lang.reflect.Method.invoke(Method.java:511)
   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
   at dalvik.system.NativeStart.main(Native Method)
[test1, test2, test3] 
```

编辑 2

additems() 方法：

```
public void additems()
{       
    List test = new ArrayList<String>();
    try{
        test.add("test1");
        test.add("test2");
        test.add("test3");

        ListView cart = (ListView) findViewById(R.id.listViewcart); 

        ListAdapter customAdapter = new ListAdapter(this, R.layout.shoppingcart_row, test);

        cart.setAdapter(customAdapter); // line 109
    }
    catch (Exception e){
        e.printStackTrace();
        System.out.println(test);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:47:01.540

试试这个：

在您的主要课程中：`List<String> test = new ArrayList<String>();`

在您的适配器中：`private List<String> items;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:03:43.957

它得到错误的那一行基本上是说它没有找到你的`ListView`. 这是因为您可能会混淆`ListView`. 在此错误中，*购物车*为*null*。

设置您`Activity`使用正确的 XML 文件。

```
setContentView(R.layout.shoppingcart); 
```

更改此行

```
ListView cart = (ListView) findViewById(R.id.listViewcart); 
```

到

```
ListView cart = (ListView) findViewById(android.R.id.list); 
```

现在将布局的 XML 更改`ListView`为 this 并删除另一个`ListView`.

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

</ListView> 
```

现在更改您的自定义适配器`ListAdapter`以使用 a`String`而不是`Item`. 当你实例化适配器时，你会得到一个无效的转换错误。

这是您使用的适配器，`ArrayList<String>`而不是`List<Item>`.

```
public class ListAdapter extends ArrayAdapter<String> {
    public ListAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
        // TODO Auto-generated constructor stub
    }

    private ArrayList<String> items;

    public ListAdapter(Context context, int resource, List<String> items) {
        super(context, resource, items);
        this.items = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;

        if (v == null) {
            LayoutInflater vi;
            vi = LayoutInflater.from(getContext());
            v = vi.inflate(R.layout.shoppingcart_row, null);
        }

        String p = items.get(position);

        if (p != null) {
            TextView tt = (TextView) v.findViewById(R.id.item);

            if (tt != null) {
                tt.setText(p.getText());
            }
        }

        return v;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:05:01.133

确保在调用 addItems(); 之前在 Activity 中调用了 setContentView(R.layout.layout)；

# javascript - 如何在 ASP.NET MVC 中最好地将网格导出为 PDF

> ID：15505269
> 
> 赞同：1
> 
> 时间：2013-03-19T16:35:28.157
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, infragistics, iggrid

我不知道这是否一定很重要，但我正在使用 Infragistics iggrid 为我的网格及其报告内容导出为 PDF。

我遇到的根本问题是我要导出的数据在浏览器中，我希望不必创建要下载的服务器端文件。我们在屏幕上有一个图标，用户单击该图标即可下载 PDF。

所以我在客户端上做的是收集所有数据。这必须在客户端完成，因为我想在用户对其进行排序、过滤和列排序时导出数据（否则我可以只收集服务器端的数据，这会使这更简单）。然后我通过 POST 将数据发送到服务器。

在服务器端，我生成 PDF 文件。现在，显然，我可以保存 PDF 服务器端并重定向到生成的文件，但这增加了我希望避免的临时文件的维护（但最坏的情况下，我可以去那里。现在只是在寻找选项） .

我尝试返回base64编码的数据库，然后执行：

`window.open("data:application/pdf;base64," + encodedData);`

这不起作用（至少在 IE 中），因为 URL 限制有点超过 2K。

我在这里尝试使用 downloadDataURI javascript 函数：[http ://code.google.com/p/download-data-uri/](http://code.google.com/p/download-data-uri/)

但这似乎只适用于 Chrome（即使在注释掉 webkit 检查之后），而且我显然不够聪明，无法弄清楚原因。

我确定我错过了一些不需要创建服务器端文件的明显可能性，但我只是没有看到它。（免责声明：我女儿今天早上把我吵醒了，所以答案可能真的很琐碎，明天当我的大脑工作时我会感到愚蠢）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:41:53.913

> 在服务器端，我生成 PDF 文件。现在，显然，我可以保存 PDF 服务器端并重定向到生成的文件，但这增加了我希望避免的临时文件的维护（但最坏的情况下，我可以去那里。现在只是在寻找选项） .

您无需将其保存在服务器上。您可以简单地将 PDF 文件（我假设您在某种 Stream 或字节 [] 中拥有它）传输给用户。你需要做的就是像

```
 Response.ContentType = "application/pdf";
 Response.AddHeader("Content-Disposition", "filename.pdf");
 Response.BinaryWrite(bytes);
 Response.Flush();
 Response.Close();
 Response.End(); 
```

这将提示用户保存文件或在 Adob​​e Reader 中打开它。该文件根本不会在服务器上创建。

# javascript - 鼠标按下时的 JavaScript

> ID：15505272
> 
> 赞同：16
> 
> 时间：2013-03-19T16:35:36.453
> 
> 标签：javascript, while-loop, mousedown

```
var mdflag;
var count = 0;

document.addEventListener("mousedown",mdown,false);
    document.addEventListener("mouseup",mup,false);
}

function mdown()
{
    mdflag=true;
    while(mdflag)
    document.getElementById("testdiv").innerHTML = count++;

}
function mup()
{
    mdflag = false;
} 
```

我想在鼠标按下时运行代码，我找不到任何建议我可以做的事情 while(mousedown) 所以我尝试为 mousedown 制作一个标志，该标志在鼠标按下时重置但是我相信 while 循环是什么导致我陷入无限循环。

有什么建议可以帮助我实现目标吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-19T16:42:06.710

您必须在某个合理的时间间隔内调用 mousedown 活动。我会这样做：

```
var mousedownID = -1;  //Global ID of mouse down interval
function mousedown(event) {
  if(mousedownID==-1)  //Prevent multimple loops!
     mousedownID = setInterval(whilemousedown, 100 /*execute every 100ms*/);

}
function mouseup(event) {
   if(mousedownID!=-1) {  //Only stop if exists
     clearInterval(mousedownID);
     mousedownID=-1;
   }

}
function whilemousedown() {
   /*here put your code*/
}
//Assign events
document.addEventListener("mousedown", mousedown);
document.addEventListener("mouseup", mouseup);
//Also clear the interval when user leaves the window with mouse
document.addEventListener("mouseout", mouseup); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T16:38:13.720

您不能这样做，因为您的函数必须在处理另一个事件之前结束，但是您可以重复调用一个函数，直到鼠标启动：

```
var timer;
document.addEventListener("mousedown", function(){
     timer=setInterval(function(){
          document.getElementById("testdiv").innerHTML = count++;
     }, 100); // the above code is executed every 100 ms
});
document.addEventListener("mouseup", function(){
    if (timer) clearInterval(timer)
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-01-28T01:39:11.300

您需要使用 setInterval 来执行您的功能并使用 clearInternal 来停止

```
let interval = setInterval(function(){
    console.log("executing...");
}, 0);

document.addEventListener("mouseup", function(){
    clearInterval(interval); 
    console.log('End'); 
}); 
```

# php - 在 php 上使用 Javascript

> ID：15505275
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:35:43.930
> 
> 标签：php, javascript

k，我知道了，所以我再次检查并发现了我缺少的有趣的东西：javascript：

```
function my_tmpDropFunc(ddObj, targetObj ,doll)
{
    if(isDropTarget(targetObj, ddObj) || confirmed)
    {
        var typeTarget = getPositionType(targetObj.id);
        var typeDD = getPositionType(ddObj.id);

        // Item-Types to Confirm using
        toConfirm = new Array();
        //toConfirm.push(new Array(32768, 'confirmCostume'));

        //Itembox
        if (typeTarget == 384)
        {
            onDropOnItembox(ddObj, targetObj)
            return "break";
        }

        if (typeDD == 384 && onDropFromItembox(ddObj, targetObj))
            return "break";

        //Essen
        if(typeTarget == 8)
        {
            ddObj.moveTo(pickObj.x, pickObj.y);
            SwapBlockingfields(false);
            changeShow();
            SetToolTip(true);
            PICK_ITEM = false;

            // Gurt, Style
            if(ddObj.contenttype == 64 || ddObj.contenttype == 32768)
            {
                // If a Confirmation needed, not confirmed an the type requires a confirmation...
                if (confirmNeeded && !confirmed && in_multi_array(toConfirm, ddObj.contenttype))
                {
                    // Get the correct BlackOutDialogBox (Defined in array).
                    for (key in toConfirm)
                    {
                        if (ddObj.contenttype == toConfirm[key][0])
                        {
                            blackOutDialogBoxToUse = toConfirm[key][1];
                            if (showUseItemAlarm(ddObj,targetObj,typeTarget,doll,typeDD,blackOutDialogBoxToUse))
                                return "return";
                        }
                    }
                }

                //Verbrauchen
                dd.elements[ddObj.name].hide();
                targetObj.div.style.cursor = 'wait';
                changeDraggable(false);
                ddObj.moveTo(pickObj.x, pickObj.y);
                doll = document.getElementById('plDoll').value;
                sendRequest('get', 'ajax.php', 'mod=overview&submod=useItem&item='+ ddObj.id +'&doll='+doll);
            }
            return "return";
        }

        //Crafting
        if (checkCrafting(ddObj,targetObj,typeDD,typeTarget))
            return "return";

        //Enchanten
        if (targetObj.iid && typeTarget < 256 && !ddObj.enchanttype)
            return "continue";
        if (checkEnchant(ddObj, targetObj, typeTarget))
            return "return";

        //Ins Inventar
        if (typeTarget >= 512)
        {
            x = getPositionX(targetObj.id)-1;
            y = getPositionY(targetObj.id)-1;
            field = CalcFieldWithObj(ddObj, typeTarget, maxcols, maxrows);
            if(!(field[x][y] & ddObj.contentsize))
                return "continue";
        }

        if(!(targetObj.contenttypeaccept & ddObj.contenttype))
            return "continue";

        //Bestätigung bevor Item Seelengebunden wird.
        if (showUniqueItemAlarm(ddObj,targetObj,typeTarget,doll,typeDD))
            return "return";

        my_SwapContent (targetObj,ddObj);
        newXY(targetObj);
        newXY(ddObj);
        if(typeTarget < 256)
            reformEquiped(targetObj, targetObj.w, targetObj.h, true);
        else if(typeDD < 256)
        {
            reformEquiped(ddObj,targetObj.w, targetObj.h, false);
            ddObj.contentsize = ddObj.contentsizebase;
            newXY(dd.obj);
        }
        targetObj.maximizeZ();
        //aElts[i].div.style.zindex = 200;

        // Pruefen ob von Lager verschoben wird
        var from = ddObj.id.substring(1, 4);
        var storage = false;
        if (from >= 352 &&  from <= 357)
            storage = true;
        if (storage)
            sendRequest('get', 'ajax/guildstorageswap.php', 'old='+ ddObj.id +'&new='+targetObj.id+'&doll='+doll);
        else
            sendRequest('get', 'ajax/inventoryswap.php', 'old='+ ddObj.id +'&new='+targetObj.id+'&doll='+doll);
        tt_Init(1);
        return "break";
    }
} 
```

正如您所看到的，“Reflic”建议它将数据发送到 ajax，所以在 ajax.php 中我需要创建什么来接收该数据它发送什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:37:58.253

调查[`json_encode`](http://php.net/json-encode)。例子：

```
var myJSvariable = <?php echo json_encode($myPHPvariable); ?>; 
```

这适用于任何类型的 PHP 变量，不包括资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:38:00.767

使用 AJAX 通过 JavaScript 将请求发送到**PHP**脚本。 [http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/) - [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

编辑：当然使用 JSON 格式。

# java - java排序数组，它的位置很重要

> ID：15505280
> 
> 赞同：0
> 
> 时间：2013-03-19T16:35:57.763
> 
> 标签：java, sorting

假设我有这个数组

```
int [] array= new int[26]; 
```

它有 26 个位置，因为位置 0 是 'a' ，位置 1'b' ... 位置 25 是 'z' 所以在每个位置我都有一个 int 数字所以

```
if in position array[0]=5 it means i have 5 'a'
if in position array[1]=6 it means i have 6'b'
if in position array[0]=0 it means that i do not have the 'a' letter 
```

我想要的是在每个循环中找到 2 个最小频率和两个最小频率的字母

```
for(int i=0;i<array.length;i++)
        if(array[i]==0)
        continue;       
        else{
            cmin1=(char)('a'+i);
            posi=i;                 
            min1=array[posi] ;
            break;
        }
            for(int j=posi+1;j<array.length;j++){
            if(array[j]==0)
                continue;   
            else if(array[j]<=min1){
                posj=posi;
                posi=j;
                cmin2=cmin1;
                cmin1=(char)(j+'a');    
                min2=min1;
                min1=array[j];
            } 
```

我试过这个是错误的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:44:10.813

Java是面向对象的，所以...

让我们看一个类，它的名字是 LetterFrequency LetterFrequency 有 2 个属性：1) Char 字符 2) 整数出现

您需要按“出现”属性对 LetterFrequency 对象进行排序。为此，请让 LetterFrequancy 实现 Comparable 并相应地定义方法 compareTo()。

然后将所有 LetterFrequency 对象放入 List 并使用该方法

```
Lists.sort(yourList) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:43:29.287

首先对数组进行排序......现在应用搜索算法......一旦找到最小的元素，你就可以得到第二小的元素，因为数组已经排序......我想这样做不会有任何困难。 ..对于排序，您可以使用复杂的快速排序（nlogn）...希望它可以帮助您

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:44:35.290

如果您只想找到数组中的最小元素，可以使用以下代码：

```
List<int> list = Arrays.asList(ArrayUtils.toObject(array));

// Print the smallest element of your array
System.out.println(Collections.min(list)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:47:09.120

我会创建一个代表每个频率计数的类。然后我会创建一个[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)按频率对记录进行排序的方法。然后我会使用[`Arrays.sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28T%5b%5d,%20java.util.Comparator%29)or[`Collections.sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)对集合进行排序`Comparator`。

或者，如果您只是想在数组中查找条目但不能更改数据类型，那么您需要定义一种算法来*搜索*（而不是*排序*）数组。要做到这一点，并且一次性完成，我将为两个最不频繁出现的位置和相应频率定义局部变量。将最少初始化为数组中的第一项，然后通过比较当前项进行比较，如果小于则旋转保持跟踪的变量的值。最后，您将获得最不频繁的两个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T16:53:21.237

首先，这个数组声明永远不会起作用：

```
 int [] array= new array[26]; 
```

你需要：

```
 int [] array= new int[26]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T16:55:55.830

排序会起作用，但它不是性能最好的方法。

一个 O(n) 的循环怎么样？

```
int min1 = Integer.MAX_INT;
int idx1 = -1;
int min2 = Integer.MAX_INT;
int idx2 = -1;

for(int i=0;i<array.length;i++) {
    // skip empty items
    if(array[i]==0)
         continue;

    if (array[i] < min1) {
         min2 = min1;
         idx2 = idx1;
         min1 = array[i];
         idx1 = i;
    }
    else if (array[i] < min2) {
         min2 = array[i];
         idx2 = i;
    }
} 
```

# visual-studio-2012 - 在 Visual Studio 2012 的 Web 项目中从加载中排除目录

> ID：15505282
> 
> 赞同：3
> 
> 时间：2013-03-19T16:36:02.317
> 
> 标签：visual-studio-2012, web-project

我们有一个 CMS 网站，用户在该网站上上传了很多内容到该`content`网站的目录中，包括很多文章。

由于加载了所有这些子目录（每篇文章一个），打开这个项目需要很长时间。

有没有办法告诉 Visual Studio***不要***在站点中加载特定目录？该目录中没有代码文件，在开发过程中我也不想编辑任何内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-29T04:44:39.277

如果这是一个没有 .csproj 文件的“网站”项目，您可能必须将文件夹设置为*Hidden*。

Visual Studio 不加载隐藏文件夹。

[http://forums.asp.net/t/1179077.aspx/1](http://forums.asp.net/t/1179077.aspx/1)

# java - 具有从超类继承的属性的托管 Bean

> ID：15505285
> 
> 赞同：2
> 
> 时间：2013-03-19T16:36:09.573
> 
> 标签：java, jsf, properties, managed-bean, view-scope

我在构建 JSF 项目时遇到了问题`ViewScope` `ManagedBeans`。所以我决定将问题隔离为一个简单的代码，显然问题仍然存在。基本上我意识到类中的属性可以`TesteMBean`完美地工作，但是，从超类继承的属性`GenericoMBean`不能保留它的值。

我还是初学者，所以不知道这是否是 JSF 的正常行为。有人可以启发我吗？如果可能的话，通过一个例子告诉我如何正确地做到这一点。非常感谢您。

按照代码。

超类：

```
package br.com.telesnet.sige.web.mb;

public abstract class GenericoTesteMBean {

    protected String textoBase;

    public java.lang.String getTextoBase() {
        if (this.textoBase == null){
            return "";
        }else{
            return textoBase;
        }
    }

    public void setTextoBase(String textoBase) {
        this.textoBase = textoBase;
    }
} 
```

继承的 ManagedBean：

```
package br.com.telesnet.sige.web.testes;

import java.io.Serializable;

import javax.annotation.ManagedBean;
import javax.faces.bean.ViewScoped;

import br.com.telesnet.sige.web.mb.GenericoTesteMBean;

@ManagedBean
@ViewScoped
public class TesteMBean extends GenericoTesteMBean implements Serializable{
    private static final long serialVersionUID = 1L;
    private java.lang.Integer valor;
    private java.lang.String texto;

    public TesteMBean(){
        this.setValor(0);
    }

    public void incrementar(){
        this.setValor(this.getValor()+1);
        this.texto = this.getTexto() + "X";
        this.textoBase = this.getTextoBase() + "A";
    }

    public java.lang.Integer getValor() {
        if (this.valor == null){
            return 0;
        }else{
            return valor;
        }
    }

    public void setValor(java.lang.Integer valor) {
        this.valor = valor;
    }

    public java.lang.String getTexto() {
        if (this.texto == null){
            return "";
        }else{
            return texto;
        }
    }

    public void setTexto(java.lang.String texto) {
        this.texto = texto;
    }
} 
```

网络表格：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

<h:body>
    <f:view>
        <h:form id="formLabel">
            <h:outputLabel value="Valor:"></h:outputLabel>
            <h:outputLabel value="#{testeMBean.valor}"></h:outputLabel>

            <h:outputLabel value="Texto:"></h:outputLabel>
            <h:outputLabel value="#{testeMBean.texto}"></h:outputLabel>

            <h:outputLabel value="TextoBase:"></h:outputLabel>
            <h:outputLabel value="#{testeMBean.textoBase}"></h:outputLabel>

        </h:form>

        <h:form id="formIncremento">
            <h:commandButton actionListener="#{testeMBean.incrementar()}" value="incrementar">
            </h:commandButton>

        </h:form>

    </f:view>
</h:body>
</html> 
```

不想要的输出（按钮“incrementar”点击了五次）：

```
 Valor: 5 Texto: XXXXX TextoBase: A 
```

所需的输出（按钮“incrementar”点击五次）：

```
 Valor: 5 Texto: XXXXX TextoBase: AAAAA 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:04:36.393

只需将您的三个文件复制到我的工作区，“incrementar”就可以完美运行。

唯一的区别在于你的托管 bean，你有这个 @ManagedBean 注释的导入

```
import javax.annotation.ManagedBean; 
```

将其更改为

```
import javax.faces.bean.ManagedBean; 
```

您可以阅读本文以了解[Java EE 6 @javax.annotation.ManagedBean 与 @javax.inject.Named 与 @javax.faces.ManagedBean的概念](https://stackoverflow.com/questions/11986847/java-ee-6-javax-annotation-managedbean-vs-javax-inject-named-vs-javax-faces)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:48:34.617

**更新**
既然我看到了您的问题，就删除了我的旧答案。

1.  `h:form`你的 s周围不需要 a `h:outputLabel`。只需在它们周围使用某种`h:outputPanel`东西，就足够了。
2.  您使用的是 an`actionListener`而`h:commandButton`不是 an `action`- 在这种情况下没关系，但是您知道[区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener)吗？此外，您可以删除`actionListener`属性内的括号。
3.  之后，尝试使用一些调试消息`incrementar`来帮助您找到问题。
4.  如果您使用 ajax 功能，则需要更新`h:outputLabel`新创建的 s 中的 s `h:outputPanel`。

所以就：

```
<h:outputPanel id="myOutputPanel">
   ... your h:outputLabels here ...
</h:outputPanel>

<h:form id="formIncremento">
  <h:commandButton action="#{testeMBean.incrementar}" update=":myOutputPanel">
</h:form> 
```

但提供的代码不使用任何 ajax 功能。这意味着必须重新加载页面（在浏览器中*刷新*或*F5 ）才能显示更改。*这不适用于`@ViewScoped`bean，因为 bean 在页面刷新后被销毁并在之后立即创建。要么你应该`<f:ajax...>`在你的`h:commandButton`或尝试使用一些具有内置功能的框架，比如 primefaces' `p:commandButton`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T14:06:07.410

您的抽象基类必须实现 Serializable 才能使属性在请求中传递。

# postgresql - Postgresql - 检测更改并调用 Web 服务

> ID：15505286
> 
> 赞同：33
> 
> 时间：2013-03-19T16:36:09.717
> 
> 标签：postgresql

我有一个 PostgreSQL 数据库。我想要做的是，检测数据库中发生的任何更改（插入、更新），然后调用 web 服务。我怎么能这样做？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-19T16:51:00.880

您应该能够使用[PostgreSQL 中的触发器和侦听/通知功能](http://www.postgresql.org/docs/9.0/static/sql-notify.html)来实现以下目的：

1.  每当表中发生任何更改时，一组插入/更新/删除[触发器都会创建一个通知事件，使用创建/更改/删除的 ID 作为有效负载。](http://www.postgresql.org/docs/9.1/static/sql-createtrigger.html)

2.  后台进程定期检查通知（[这里是使用 Java/JDBC 的示例](http://jdbc.postgresql.org/documentation/81/listennotify.html)），然后从数据库加载更改的记录以执行 Web 服务调用。

这绝不是一个实时推送式系统，但您必须轮询数据库以获取通知事件以触发 Web 服务调用。不过，它会成功的。

# forms - CakePHP 2.3.1 在某些视图中停用表单验证

> ID：15505287
> 
> 赞同：5
> 
> 时间：2013-03-19T16:36:10.823
> 
> 标签：forms, validation, cakephp, cakephp-2.3

Cookbook 为 2.3 版引入了停用表单强制验证的可能性。或者至少我是这样理解的：引用：来自[http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)

> " 2.3 版中的新功能。
> 
> 从 2.3 开始，HTML5 required 属性也将根据验证规则添加到输入中。您可以在选项数组中显式设置必需的键以覆盖它的字段。要跳过整个表单的浏览器验证触发，您可以为使用 FormHelper::submit() 生成的输入按钮设置选项 'formnovalidate' => true 或在 FormHelper::create() 的选项中设置'novalidate' => true。 "

在我的情况下，我从这个模型中搜索，当然用户不需要填写所有必填字段，例如添加数据集。所以我想停用我的搜索表单的验证。

我尝试了所有三种变体，但没有看到任何结果：在我的搜索表单中，创建的必填字段仍然是必填的。

我所做的那些尝试：

第一次尝试：

```
echo $this->Form->create('Partner', array('action' => 'search', 'novalidate' => true)); 
```

第二次尝试：

```
echo $this->Form->input('name', 
array('required' => false, 'value' => $this->Session->read('Searchparameter.name'))
); 
```

第三次尝试：

```
 $this->Form->submit('Submit', array('formnovalidate' => true));
    echo $this->Form->end(); 
```

变化：

```
echo $this->Form->end(__('Submit'), array('formnovalidate' => true)); 
```

我理解错了什么？顺便说一句：我确实停用了缓存，所以这不应该是问题。

当然，我仍然可以使用旧的解决方法进行此验证，但是当 2.3 提供此选项时，我很乐意使用它。

灾难简

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T13:15:39.537

所以我想我发现了问题并且至少有一个变化工作：

我现在使用的是：

```
echo $this->Form->create('Partner', array('action' => 'search', 'novalidate' => true)); 
```

我想我所期望的是这些字段不会被标记为胖标签和星号。这些仍然存在，但无论如何您都不必再填写它们了。我用真正提交的表格测试的时间我猜我有 99 种变化之一，这真的是错误的。

如果这让我高兴是我的决定，但显然我可以关闭 HTML5 验证。如果我想让标签不是粗体和星号，也有选择吗？

灾难简

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-14T02:20:50.643

解决方案实际上要简单得多。如果您想在特定视图中禁用验证，您实际上只需要在创建表单时引用一个不存在的模型。例如，您可以做类似的事情

`echo $this->Form->create('PartnerSearch');`

在您的控制器中，您可以通过以下方式访问表单字段：

```
$this->request->data["PartnerSearch"]["field"] 
```

而不是通常的方式：

```
$this->request->data["Partner"]["field"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-12T05:33:55.033

对我来说，跳过浏览器验证，是的，`array('novalidate' => true)`确实有效。

```
<?php echo $this->Form->create('MyModelName', array('novalidate' => true)); ?> 
```

让标签不是粗体和星号，

```
<?php echo $this->Form->input('myinput', array('required' => false)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-07T02:08:27.457

就我而言，我使用**按钮**提交表单。这让我有了更大的灵活性。在这种情况下，我使用 then 属性“formnovalidate”传递按钮的选项数组。表单如下所示：

```
<?php
echo $this->Form->create('yourCtrllerName',array('action'=>'actionInYourCtrller'));
echo $this->Form->input('your_field_pass',array('label'=>'pass','type'=>'password'));
....  other Form fields .....
echo $this->Form->button('Button Caption',
                          array('type'=>'submit',
                                'name'=>'keyInsideTheDataArrayForButtonData',
                                'formnovalidate' => true,
                                'value'=>'valueOfTheAboveKeyInTheDataArray',
                                'style'=>'<style you want to apply to button>',
                                ... other options if needed...
                                )
                         );
echo $this->Form->end(); 
```

# c# - 重构某种通用方法

> ID：15505294
> 
> 赞同：0
> 
> 时间：2013-03-19T16:36:35.547
> 
> 标签：c#

我一遍又一遍地使用我的某种方法。因此，我倾向于将这个类导入到我的所有项目中，在那里我必须访问 Windows Phone 设备的独立存储。

但是，它对我来说似乎并不优雅。看一看：

```
public static Object getFileContent (String filename, String returntype)
        {
            IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication();

            Object returnobj = new Object();
            List<String> list = new List<String>();
            String r;

            IsolatedStorageFileStream fileStream = isf.OpenFile(filename, FileMode.Open, FileAccess.Read);
            StreamReader reader = new StreamReader(fileStream);

            if (returntype.Equals("list"))
            {
                while ((r = reader.ReadLine()) != null)
                {
                    list.Add(r);
                }
                returnobj = list;
            }
            else if (returntype.Equals("string"))
            {
                r = reader.ReadLine();
                returnobj = r;
            }

            fileStream.Close();
            reader.Close();

            return returnobj;
        } 
```

我的主要问题是参数`returntype`。这显然是一个字符串。我想直接把它作为类型。但这在我最后一次尝试中不起作用。

另外，当我使用这种方法时，例如：

```
string random = (string) MyFavClass.getFileContent("randomFile","string"); 
```

我必须再次转换该方法的返回类型，然后才能使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T16:41:28.037

只需编写两个方法：`getFileContentAsString`和`getFileContentAsList`. 如果您只能支持两种类型，那么您不会在这里获得任何通用性的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:47:27.960

如果您要拥有任意数量的返回类型，则可以使用策略模式。

```
public static T GetFileContents<T>(String filename, Func<StreamReader, T> readMethod)
{
    // initialize stuff

    using (StreamReader reader = new StreamReader(...))
    {
        return readMethod(reader);
    }
}

public static string ReadStreamAsString(StreamReader reader)
{
    return reader.ReadLine();
}

public static List<string> ReadStreamAsList(StreamReader reader)
{
    var list = new List<string>();

    while ((r = reader.ReadLine()) != null)
    {
        list.Add(r);
    }

    return list;
} 
```

并使用它：

```
string myString = GetFileContents("foo.txt", ReadStreamAsString);

List<string> myList = GetFileContents("bar.xml", ReadStreamAsList); 
```

我的泛型可能已经关闭，但希望它传达了正确的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:57:41.290

假设：

1.  只读，仅转发访问是列表中所需的全部；和
2.  希望在应用程序代码中同等对待两种可能性的结果。

然后他会工作：

```
 public abstract class MySequence : IEnumerable<string> {
    protected string Filename { get; private set; }

    public MySequence(string filename) {
      Filename = filename;
    }

    IEnumerator IEnumerable.GetEnumerator() { return this.GetEnumerator(); }

    public IEnumerator<string> GetEnumerator() {
      using (var isf = IsolatedStorageFile.GetUserStoreForApplication()) 
      using (var stream = isf.OpenFile(Filename, FileMode.Open, FileAccess.Read))
      using (var reader = new StreamReader(stream)) {
        return GetEnumerator(reader);
      }
    }
    protected abstract IEnumerator<string> GetEnumerator(StreamReader reader);
  }
  public class MyListSequence : MySequence, IEnumerable<string> {
    public MyListSequence(string filename) : base(filename) {}
    protected override IEnumerator<string> GetEnumerator(StreamReader reader) {
      while (! reader.EndOfStream) yield return reader.ReadLine();
    }
  }
  public class MyStringSequence : MySequence, IEnumerable<string> {
    public MyStringSequence(string filename) : base(filename) {}
    protected override IEnumerator<string> GetEnumerator(StreamReader reader) {
      yield return reader.ReadLine();
    }
  } 
```

用法是这样的：

```
 foreach (var s in (new MyListSequence("fred"))) { Console.WriteLine(s); }
  foreach (var s in (new MyStringSequence("fred"))) { Console.WriteLine(s); } 
```

当 ti 应用时，这种机制的一个特殊优势是不需要为列表分配存储空间；eaxh 文本行由迭代器简单地读取和返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:46:16.773

未经测试，但我会尝试做这样的事情：

```
public static T getFileContent (String filename, Func<StreamReader, T> process)
    {
        IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication();

        Object returnobj = new Object();
        List<String> list = new List<String>();
        String r;

        IsolatedStorageFileStream fileStream = isf.OpenFile(filename, FileMode.Open, FileAccess.Read);
        StreamReader reader = new StreamReader(fileStream);

        try{
            return process(reader);
        }
        finally{
            fileStream.Close();
            reader.Close();
        }
    } 
```

我确信这很容易出错，但我的想法是传入一个转换器函数，该函数将处理您想要返回的任何类型。

# c# - wpf应用程序中的线程异常

> ID：15505295
> 
> 赞同：0
> 
> 时间：2013-03-19T16:36:39.603
> 
> 标签：c#, wpf

大家好，我收到一个例外`if (checkBox1.IsChecked == true || checkBox2.IsChecked == true)`：

> 调用线程无法访问此对象，因为不同的线程拥有它。

在我的 wpf 应用程序中：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    int i = 0;
    int j = Int32.Parse(textBox1.Text);
    thr = new Thread[j];
    for (; i < j; i++)
    {
        thr[i] = new Thread(new ThreadStart(go));
        thr[i].IsBackground = true;
        thr[i].Start();
    }
}

public void go()
{
    while (true)
    {
       string acc = "";
       string proxy = "";
       if (checkBox1.IsChecked == true || checkBox2.IsChecked == true)
       {
           if (checkBox1.IsChecked == true)
               Proxy.type = "http";
           else if (checkBox2.IsChecked == true)
               Proxy.type = "socks5";
           else
               Proxy.type = "none";
           proxy = rand_proxy();
       }
    }
} 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:42:16.133

您不能从创建的线程以外的线程访问 UI 元素。您的复选框是在 UI 线程上创建的，您只能在 UI 线程上访问这些复选框。尝试这个。

```
public void go()
    {
        Dispatcher.BeginInvoke(new Action(()=>{
        while (true)
        {
            string acc = "";
            string proxy = "";
            if (checkBox1.IsChecked == true || checkBox2.IsChecked == true)
            {
                if (checkBox1.IsChecked == true)
                    Proxy.type = "http";
                else if (checkBox2.IsChecked == true)
                    Proxy.type = "socks5";
                else
                    Proxy.type = "none";
                proxy = rand_proxy();
            }
}), null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:44:47.273

Basically you're not allowed to access controls from threads other than the thread they were created on. There's a good explanation of the WPF threading model [here](http://msdn.microsoft.com/en-us/library/ms741870.aspx), and [this](http://nnish.com/2010/03/14/accessing-wpf-controls-on-a-non-ui-thread/) walks through the issue you are describing.

Good luck.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:41:28.693

您不能在与 UI 不同的线程上访问 UI 元素。要解决此问题，您可以检查

```
checkBox1.Dispatcher.CheckAccess() 
```

如果为真，请使用

```
checkBox1.Dispatcher.Invoke 
```

或者

```
checkBox1.Dispatcher.BeginInvoke 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:41:31.867

使用[CheckAccess](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.checkaccess.aspx)查看是否需要调用[Dispatcher.BeginInvoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.begininvoke.aspx)或 Invoke 另请参阅[此帖子](http://blog.clauskonrad.net/2009/03/wpf-invokerequired-dispatchercheckacces.html)

# javascript - 正则表达式根本无法在 IE 8、9 和 10 中运行

> ID：15505300
> 
> 赞同：0
> 
> 时间：2013-03-19T16:36:56.890
> 
> 标签：javascript, regex, internet-explorer, replace

这是我们要替换的文本：

```
<A href="http://domain.com"><IMG src="https://domain.com/images/siteheader.jpg"></A> 
```

使用 javascript .replace，我们尝试使用以下内容替换为空格：

```
.replace ("/<A href=\"http:\/\/domain.com\"><IMG src=\"https:\/\/domain.com\/images\/siteheader.jpg\"><\/A>/i"," "); 
```

在所有其他浏览器中，这似乎都有效，但在 IE 中却不行。我什至尝试使用这个在线正则表达式验证器：[http](http://www.online-toolz.com/tools/regexp-editor.php) ://www.online-toolz.com/tools/regexp-editor.php它说它是有效的。有点难过。IE 是否在做一些不正常的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T16:40:05.967

您*可以*将字符串（其文字形式看起来像`"..."`）*或*正则表达式（其文字形式看起来像`/.../`）与`replace`. 你正试图同时做这两件事。删除引号：

```
.replace (/<A href="http:\/\/domain.com"><IMG src="https:\/\/domain.com\/images\/siteheader.jpg"><\/A>/i, " "); 
```

当你使用一个字符串时，它只是按字面意思匹配，不做正则表达式处理。

我还没有验证正则表达式的全部内容，只是删除了周围`"`并删除`\`了嵌入的`"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:42:04.280

正则表达式是文字，不应在其周围加上引号：

```
.replace(/your regex here/,'replacement') 
```

话虽如此，文本来自哪里？如果它来自`.innerHTML`，浏览器可能会返回一个与您在源中实际拥有的字符串不同的字符串（例如，属性名称可能是大写的，或者属性本身已交换。我相信旧版本的 IE 会去掉单个单词周围的引号属性值，这也会弄乱您的正则表达式。

简而言之，您不应该为此使用正则表达式。你可以试试这个：

```
var toRemove = document.querySelector("a[href='http://domain.com']"),
    parent = toRemove.parentNode;
parent.removeChild(toRemove); 
```

# python - Python：划定连续区域

> ID：15505301
> 
> 赞同：-2
> 
> 时间：2013-03-19T16:36:58.030
> 
> 标签：python, sequencing

我有一个 .txt，例如（标签分隔）：

```
1 2345
1 2346
1 2347
1 2348
1 2412
1 2413
1 2414 
```

前四行连续包含从 2345 到 2348 的连续整数值。类似地，最后三行包含从 2412 到 2414 的连续值。我想对它们进行分组，使这些连续值集的最小值和最大值出现在一行上如下所示：

```
1 2345 2348
1 2412 2414 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:41:57.973

为此，您可以使用稍微修改过的[Raymond Hettinger 集群函数](https://stackoverflow.com/a/14783998/190597)版本：

```
def cluster(data, maxgap):
    """Arrange data into groups where successive elements
       differ by no more than *maxgap*

        >>> cluster([1, 6, 9, 100, 102, 105, 109, 134, 139], maxgap=10)
        [[1, 6, 9], [100, 102, 105, 109], [134, 139]]

        >>> cluster([1, 6, 9, 99, 100, 102, 105, 134, 139, 141], maxgap=10)
        [[1, 6, 9], [99, 100, 102, 105], [134, 139, 141]]

    https://stackoverflow.com/a/14783998/190597 (Raymond Hettinger)
    """
    groups = [[data[0]]]
    for x in data[1:]:
        if abs(x - groups[-1][-1]) <= maxgap:
            groups[-1].append(x)
        else:
            groups.append([x])
    return groups

data = []
with open('data.txt', 'r') as f:
    for line in f:
        _, num = line.split()
        data.append(int(num))
for row in cluster(data, 1):
    print('1 {s} {e}'.format(s=row[0], e=row[-1])) 
```

产量

```
1 2345 2348
1 2412 2414 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:44:50.727

使用模块读取和写入数据`csv`，并跟踪“下一个”组何时开始：

```
import csv

def grouped(reader):
    start = end = next(reader)
    print start, end
    for row in reader:
        if int(row[1]) - 1 != int(end[1]):
            yield (start, end)
            start = end = row
        else:
            end = row
    yield (start, end)

with open('inputfile.csv', 'rb') as inf, open('outputfile.csv', 'wb') as outf:
    inputcsv = csv.reader(inf, delimiter='\t')
    outputcsv = csv.writer(outf, delimiter='\t')
    for start, stop in grouped(inputcsv):
        outputcsv.writerow(start + stop[1:]) 
```

这写道：

```
1   2345    2348
1   2412    2414 
```

供`outputfile.csv`您输入。

这个解决方案永远不会在内存中保留超过 3 行的数据，因此您应该能够向其抛出任何大小的 CSV 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:40:46.820

numpy 提供了一些可以提供帮助的工具：

```
In [90]: import numpy as np

In [91]: x = np.loadtxt('seq.dat', dtype=int)

In [92]: x
Out[92]: 
array([[   1, 2345],
       [   1, 2346],
       [   1, 2347],
       [   1, 2348],
       [   1, 2412],
       [   1, 2413],
       [   1, 2414],
       [   1, 2500],
       [   1, 2501],
       [   1, 2502],
       [   2, 3000],
       [   2, 3001],
       [   2, 3100],
       [   2, 3101],
       [   2, 3102],
       [   2, 3103]])

In [93]: skip = np.where(np.diff(x[:,1]) != 1)[0]

In [94]: istart = np.hstack((0, skip + 1))

In [95]: istop = np.hstack((skip, -1))

In [96]: groups = np.hstack((x[istart], x[istop, 1:]))

In [97]: groups
Out[97]: 
array([[   1, 2345, 2348],
       [   1, 2412, 2414],
       [   1, 2500, 2502],
       [   2, 3000, 3001],
       [   2, 3100, 3103]]) 
```

分组时忽略第一列数据，因此如果第一列会影响组的形成方式，则需要进行一些调整。

# mysql - 是否可以将 MySQL 配置为将 TIMESTAMP 值作为 UNIXTIMESTAMP 返回？

> ID：15505303
> 
> 赞同：1
> 
> 时间：2013-03-19T16:36:58.523
> 
> 标签：mysql

是否可以将 MySQL 配置为默认将 TIMESTAMP 值作为 UNIXTIMESTAMP 返回，而不是在 SELECT 语句中强制转换每一列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:43:33.347

MySQL has a function to convert a date to a unix timestamp.

[https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

```
mysql> SELECT UNIX_TIMESTAMP();
        -> 1196440210
mysql> SELECT UNIX_TIMESTAMP('2007-11-30 10:30:19');
        -> 1196440219 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:43:50.717

You cannot do that in MySQL configuration.

You can do that on application level - e.g. in PHP, you can use the `mysqli_result::fetch_fields()` method to detect timestamp type and convert it, other connectors will have similar methods.

Or you can do it - as suggested - using `UNIX_TIMESTAMP()` function on timestamp columns.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:58:20.957

听起来好像您想要相同数据的不同视图：

```
mysql> select * from t;
+------+---------------------+
| data | ts                  |
+------+---------------------+
| foo  | 2013-03-19 16:54:45 |
+------+---------------------+
1 row in set (0.00 sec)

mysql> select data, unix_timestamp(ts) from t;
+------+--------------------+
| data | unix_timestamp(ts) |
+------+--------------------+
| foo  |         1363712085 |
+------+--------------------+
1 row in set (0.00 sec)

mysql> create view tv (data, time_t) as select data, unix_timestamp(ts) from t;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from tv;
+------+------------+
| data | time_t     |
+------+------------+
| foo  | 1363712085 |
+------+------------+
1 row in set (0.00 sec) 
```

# android - 将 UTC 时间格式转换为本地时间

> ID：15505304
> 
> 赞同：1
> 
> 时间：2013-03-19T16:36:58.370
> 
> 标签：android, utc, android-date

我有这种格式的 UTC 时间`2013-03-04T14:37:15`如何将其转换为本地时间，然后再进行`one minute ago`格式化。

我首先尝试将时间转换为本地格式：

```
private String getDate(String date) {
        Date fDate = null;
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        simpleDateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
        try {
            fDate = simpleDateFormat.parse(date);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
return fDate.toString();
    } 
```

但是上面的函数会抛出一个异常，说无法解析的日期..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:41:57.227

你得到的解析异常是因为`T`你的 date( `2013-03-04T14:37:15`) 中的额外内容。

您可以删除多余的“T”并使用当前日期格式解析日期，

或者，如果您需要使用 解析它，请`T`更改格式以解析文字`T`，

```
new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T16:45:48.423

检查[DateUtils.getRelativeTimeSpanString()](https://developer.android.com/reference/android/text/format/DateUtils.html#getRelativeTimeSpanString%28long,%20long,%20long%29)（一个与 DateUtils 同名的方法）。它会是这样的：

```
Date fDate = null;
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
simpleDateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
fDate = simpleDateFormat.parse(date);
return DateUtils.getRelativeTimeSpanString(context, System.currentTimeMillis()-fDate.getTime())' 
```

# google-chrome - 如何让 Chrome 重新加载源地图？

> ID：15505311
> 
> 赞同：21
> 
> 时间：2013-03-19T16:37:37.170
> 
> 标签：google-chrome, coffeescript, source-maps

我在 Chrome Dev 27 上，并在 Dev Tools 设置中选中了*Disable cache*。当我重新加载页面时，Chrome 会正确重新加载地图页面使用的所有资源，包括`.js`文件。但是，它不会自动重新加载相应的[源映射](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/) `.map`。监控 Chrome 我的应用程序之间的 HTTP 流量，在随后的页面加载中，我没有看到来自 Chrome 的任何`.map`文件请求。如何让 Chrome 也重新加载源地图？

Chrome 不重新加载`.map`文件的问题是它也不会重新加载生成文件的文件，在我的例子中，`.js`它恰好是一个 CoffeeScript 文件*（*在旧版本的文件中，即使新代码（来自）正在运行。`.coffee`*`.coffee``.js`*

 ** * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-09T19:01:27.873

我今天也遇到了同样的问题。为我解决它的等待是关闭源下的咖啡文件选项卡，转到网络选项卡，右键单击，然后选择“清除浏览器缓存”

这为我修好了。

也就是说，对我来说，映射文件并不总是“卡在”缓存中……只是有时，当他们这样做时，清除缓存技巧会修复它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-08T15:45:22.847

刚刚遇到同样的问题并找到了一些其他解决方案：

根据这个[提交](https://chromium.googlesource.com/chromium/src.git/+/beef274074ec525b2fb5ad3de3f205fdfc3df6e9)和这个铬的[错误报告](https://code.google.com/p/chromium/issues/detail?id=508270)，问题已经解决，不应该影响下一个版本。

这个问题比清除整个浏览器缓存更简单一点的解决方案：

在浏览器选项卡中打开源映射并执行硬重新加载（取决于操作系统，请尝试`CTRL`+ `F5`）。这会刷新文件并保留浏览器缓存。

另一种方法，也许是一个好的做法是通过添加一个参数来破解源映射生成`?build=12345`。有关如何操作源映射文件名的信息，请参阅您的构建工具。

如果您有权访问服务器配置或`.htaccess`，则可`Cache-Control: no-cache`以为源映射扩展名设置标头，例如“.js.map”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-23T17:40:40.633

我通过**删除 .map 文件**并执行硬重新加载 (CTRL-F5) 解决了这个问题。

我不想失去我所有的历史！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-30T10:29:55.443

转到设置->显示高级设置->清除浏览数据->仅选中“缓存的图像和文件”->单击“清除浏览数据”

这将清除您在浏览器中缓存的源地图，而不会删除所有 cookie。*

# r - R - “申请” 2个矩阵

> ID：15505319
> 
> 赞同：0
> 
> 时间：2013-03-19T16:37:52.387
> 
> 标签：r, apply

我正在做一个 R 任务，我必须编写一个函数来完成`dist.xyz`它的工作。

```
dist.xyz(a, b = NULL, all.pairs=FALSE) 
```

a 和 b 是数字矩阵，该函数计算“a”和“b”对应行之间的距离。

我尝试了一个 for 循环（如下所示），但它花费的时间太长，并且“应用”只允许我们一次对 1 个矩阵进行操作。

```
 dis = vector()
 for (i in 1:nrow(a)) {
    append(dis,sqrt(sum((a[i,] - b[i,]) ^ 2)))
 } 
```

有没有办法“应用”到两个矩阵？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:48:52.453

如果您有示例数据会更容易。但这是我的看法。这不是“适用于 2 个矩阵”的通用解决方案。但是，在您的情况下，您只需要申请一个矩阵 ab，因为每行的元素差异是您首先要做的事情。然后对每一行应用平方、总和和平方根以获得结果。

```
set.seed(7)   # just to ensure reproducible results

rowDist<-function(a,b) {
   apply(a-b,1,function(x)sqrt(sum(x^2)))
}

a<-matrix(rnorm(25),5,5)
b<-matrix(rnorm(25),5,5)

rowDist(a,b)
#[1] 2.716251 2.685056 3.699462 2.125998 3.437412 
```

# database - Oracle 数据库，删除时发生了什么

> ID：15505325
> 
> 赞同：1
> 
> 时间：2013-03-19T16:38:07.780
> 
> 标签：database, hibernate, oracle11g, delete-row

我遇到了这样的问题：有一个大表由 FK 连接到其他三个记录。每天有一次计时器女巫的任务是删除一些由日期和一些字符串定义的行。定时器是某种休眠解决方案。这个计时器的三个实例大约在同一时间开始工作。

当三个计时器并发触发并尝试执行时会发生什么：

```
getHibernateTemplate().bulkUpdate(
            "DELETE FROM Data WHERE type= ? AND date< ? AND rownum <= ?", new Object[] { host, date, limit }); 
```

限制设置为某种数字，例如：limit *100 < select count(* ) from Data where type='x' AND date<'y'。

我想从 db 的角度知道发生了什么。

# android - 连接wifi时启动3g

> ID：15505329
> 
> 赞同：0
> 
> 时间：2013-03-19T16:38:16.437
> 
> 标签：android, wifi, 3g

我想在启用 wifi 时使 3g 工作！停一会儿wifi，通过3g连接。之后关闭3g并再次使用wifi！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:42:48.627

I don't think it is possible to switch to mobile data network when WiFi is enabled. Perhaps you should silently disable the WiFi (from code) and wait for the 3G network to establish. Once your required task is done, turn the WiFi on again and your 3G network will be disconnected.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:24:15.100

我认为以下应该工作......

```
WifiManager wm = null;
WifiManager.WifiLock wfl = null;

// To disable wi-fi
wm = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
if (wm != null) {
    wfl = wm.createWifiLock(WifiManager.WIFI_MODE_SCAN_ONLY, "myWifiLock");
    Boolean result = wm.setWifiEnabled(false);
    Log.d(TAG, "wm.setWifiEnabled(false) result: " + result);
}

// To re-enable wi-fi
if (wfl != null)
    wfl.release();
if (wm != null) {
    Boolean result = wm.setWifiEnabled(true);
    Log.d(TAG, "wm.setWifiEnabled(true) result: " + result);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:26:19.593

这是一个可以在您的代码中启用和禁用的代码！

```
 wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);                   

              Runnable runnable = new Runnable() {

              // ginetai o kwdikas gia to anoigma kai to klisimo tou wifi   
                  @Override
                  public void run() {

                    //  new LongOperation().execute();
                    for (int i = 0; i <= 150; i++) {

                      try {

                        Thread.sleep(1000);

                        if (i >= 0 && i <18){

                            wifi.setWifiEnabled(true);
                        //  wifi.setWifiEnabled(false);// Disabling WiFi

                          }

                          else if (i>= 18 && i < 40){

                        wifi.setWifiEnabled(true); 
                      //    wifi.setWifiEnabled(false); // Enabling WiFi

                          }

                          else if (i>= 40 && i < 58){

                    //      wifi.setWifiEnabled(true); // Disabling WiFi
                        wifi.setWifiEnabled(false);

                          }

                          else if (i>= 58 && i < 78){

                            wifi.setWifiEnabled(true);
                        //wifi.setWifiEnabled(false); // Enabling WiFi

                          }

                          else{

                        //  wifi.setWifiEnabled(true);
                            wifi.setWifiEnabled(false);// Disabling WiFi

                          }

                      } catch (InterruptedException e) {
                        e.printStackTrace();
                      }

                    }
                  }
                };
                new Thread(runnable).start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:42:20.143

只是禁用Wi-Fi？这两个过程都是自动的：启用时连接 Wi-Fi 网络，并在没有 Wi-Fi 连接时获得 3G。

# sql-server - 在 PHP 中使用 SQLSRV Native Client 连接池是否会影响@@IDENTITY？

> ID：15505331
> 
> 赞同：0
> 
> 时间：2013-03-19T16:38:23.077
> 
> 标签：sql-server, insert, connection-pooling, identity

我在测试中没有问题，但我想知道有数千个同时用户的实时环境。

如果我分别执行两个查询：

```
insert into table (somecolumnname) values (somedata) 
```

其次是

```
select @@IDENTITY as lastInsertId 
```

这将为我提供稍后在其他查询中使用的最后一个插入 ID。@@IDENTITY ( [http://msdn.microsoft.com/en-gb/library/aa933167(v=sql.80).aspx](http://msdn.microsoft.com/en-gb/library/aa933167(v=sql.80).aspx) ) 上的文档说：

> @@IDENTITY 函数的作用域是执行它的本地服务器。

如果这是本地服务器，如果有人进来并在我执行第二个查询时插入另一条语句，那么我将得到错误的 insertID；即使它在交易中？

其次，我在这里阅读了一个有冲突的帐户（[http://msdn.microsoft.com/en-gb/library/ms187342.aspx](http://msdn.microsoft.com/en-gb/library/ms187342.aspx)）：

```
The scope of the @@IDENTITY function is current session on the local server on which it is executed. 
```

因此，如果@@IDENTITY 是基于会话的，那么在使用本机客户端和连接池进行连接时，会话到底是什么？根据我对连接池的理解，如果第二个用户在第一个用户访问我的站点时访问该站点；nativec 客户端将使用相同的连接，而不是打开第二个单独的连接。如果是这种情况，这是否与在 @@IDENTITY 方面共享会话相同，这意味着来自其他用户的插入仍然会影响结果？

听起来确实像一个事务应该确保我从@@IDENTITY 获得正确的值，但我发现很难找到明确的文档告诉我情况就是这样，当然这很难在测试环境中测试。

我尝试使用绝对游标同时执行这两个查询：

```
inset into table (somecolumnname) values (somedata);select @@IDENTITY as lastindertid 
```

但问题是这是通过一个抽象函数运行的，该函数将 select @@identity 查询附加到末尾以将脏全局设置为最后一个插入 id（我不能轻易更改，否则我会）。由于没有 sqlsrv_last_result 函数，如果不将光标移动得太远并检查它是否为空，我无法知道我是否在最后一个结果上；但这再次要求我在 try:catch 中从每个查询中提取数据（例如，以防止从删除中提取数据时出错），然后在光标返回 null 之前使用最后一次拉取……这当然非常慢。

如果有人设法对此进行了测试，或者可以指出定义不冲突的地方，那将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:59:11.930

我发现本机客户端（与 DBLIB 不同）默认设置 NOCOUNT 关闭，这意味着 INSERT 将受影响的行数作为结果集返回，这导致了我原来的问题。

立即运行“SET NOCOUNT ON”，然后在同一个查询批处理中使用 SCOPE_IDENTITY() 似乎已经解决了这个问题，因为不需要我运行两个单独的查询来定位选择部分。

将来更多的插入将使用存储过程。

# msbuild - MSBuild 设置 TargetFrameworkDirectories 不正确

> ID：15505332
> 
> 赞同：6
> 
> 时间：2013-03-19T16:38:23.813
> 
> 标签：msbuild, .net-4.5

当我尝试构建 C# 控制台应用程序（可能还有其他应用程序）时，它似乎`TargetFrameworkDirectories`设置不正确；特别是它省略了 Facades 目录。

由于我一直在尝试诊断问题一段时间，因此这里列出了可能相关的事实。

*   当尝试在 Visual Studio 2012 中构建一个引用 Reactive Extension 库（使用 NuGet 管理）的项目时，问题就表现出来了。错误（或警告）是`warning MSB3267: The primary reference "System.Runtime", which is a framework assembly, could not be resolved in the currently targeted framework. ".NETFramework,Version=v4.5"`. 在msbuild执行期间出现问题`ResolveAssemblyReference`
*   我可以使用 msbuild 从命令行重现错误，这似乎更简单
*   其他工作站没有出现此问题。在一台好机器上运行带有详细信息的 msbuild，而在坏机器上运行日志文件中出现了一些差异
*   在一台好机器上`TargetFrameworkDirectories`（的一个参数`ResolveAssemblyReference`）是`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\,C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\Facades\`，但在一台坏机器上它缺少第二个条目（Facades 目录）
*   扫描好的和坏的 msbuild 日志文件会发现以下差异：

    1.  目标`AssignProjectConfiguration`在错误构建中被跳过，但在良好构建中运行
    2.  好构建中跳过了许多目标`GetInstalledSDKLocations`，但坏构建中没有提到
    3.  任务在良好构建`ResolveAssemblyReference`中传递，但在不良构建中不传递。`Assemblies``Implicit=true`
    4.  任务在bad build`ResolveAssemblyReference`中传递了 task 参数`TargetFrameworkDirectories`，`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\`但 good build 将 Facades 目录（见上文）作为第二项。

由于这是由`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets`我在好机器和坏机器上区分该文件驱动的。它们包含许多不同之处。第一个区别是项目元素（第 17 行），它`TreatAsLocalProperty="OutDir"`在好机器上有一个额外的属性。在好机器上，目标文件包含更多注释，例如`<!-- VS10 without SP1 and without VS11 will not have VisualStudioVersion set, so do that here -->`. 跳到`AssignProjectConfiguration`目标，好机器有`Condition="'$(CurrentSolutionConfigurationContents)' != '' or '@(ProjectReference)'!=''"`，而坏机器有`Condition="'@(ProjectReference)'!=''"`（我假设这解释了为什么它被跳过）。

我尝试的最后一件事是修复“Microsoft .NET Framework 4.5”和“Microsoft .NET Framework 4.5 Multi-Targeting Pack”。它没有帮助。

任何建议都将不胜感激，特别是如果我可以避免重新安装 Visual Studio 2012！

更新：似乎重新安装 .NET 4.5 然后“仅仅”修复 VS2012 解决了我的问题。关于导致此问题的原因，我最好的猜测是我的 Microsoft.Common.targets 以某种方式更改为旧版本。我不知道是什么改变了目标文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:21:51.980

正如@leppie 所建议的，这是一个.NET 问题。出于某种原因，修复 .NET 似乎无法解决问题。然而，重新安装 .NET 4.5（随后修复 VS2012）似乎可以修复它。

# f# - 如何在保留父对象的同时展平集合？

> ID：15505336
> 
> 赞同：0
> 
> 时间：2013-03-19T16:38:38.097
> 
> 标签：f#

在 C# 中，您只需使用`SelectMany`which 具有重载来保持父对象。你如何在 F# 中做同样的事情？也就是说，我想遍历一组程序集并返回所有具有实现特定属性的类的程序集。

我知道我`collect`类似于 select many，但我不确定如何在维护父（程序集）信息的同时使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:21:43.353

您可以通过将 a应用于要为“父”集合的每个元素返回的“子”集合来实现`SelectMany`using ：`collect``map`

假设您有一些`source`并且想要使用`getChildren`（对于 中的每个元素`source`）让孩子使用，然后您想使用`selectResult`同时使用孩子和父母来计算结果，您可以使用以下方式编写以下内容`SelectMany`：

```
source.SelectMany
  ( (fun parent -> getChildren parent),
    (fun parent child -> selectResult parent child ) ) 
```

使用`collect`，相同的代码如下所示（请注意，该`map`操作应用于我们传递给的 lambda 函数内部`collect`-`parent`仍在范围内）：

```
source |> Seq.collect (fun parent ->
  getChildren parent 
  |> Seq.map (fun child ->
      selectResult parent child )) 
```

还值得注意的是，`SelectMany`可以使用 F# 序列表达式来实现捕获的行为 - 也许以更易读的方式 - 如下所示：

```
seq { for parent in source do 
        for child in getChildren parent do
          yield selectResult parent child } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:01:51.910

看起来你只需要`filter`而不是`collect`：

```
let hasTypeWithAttribute<'t when 't :> Attribute> (a: Assembly) = a.GetTypes() |> Array.exists (fun t -> t.GetCustomAttributes(typeof<'t>, true).Length > 0)

let assemblies = inputSet |> Set.filter hasTypeWithAttribute<AttributeName> 
```

# c++ - 类的多维矩阵

> ID：15505339
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:38:43.613
> 
> 标签：c++, matrix

我是 C++ 新手。

```
class ProjectionValue{
public:
    int angleLength;
    int detectorIndex_xLength;

    int detectorIndex_yLength;

    double ***matrix; 

    ProjectionValue(int angleLength, int detectorIndex_xLength, int detectorIndex_yLength);

    ~ProjectionValue();
}; 
```

我在我的主类中声明了 ProjectionValue 类（我的类）的 3d 矩阵。

```
ProjectionValue*** A_projection [10][10][5];

for(int x=0; x< A->Tomo->object3d->Nx; x++)
{
    for(int y=0; y< A->Tomo->object3d->Ny; y++)
    {
        for(int z=0; z< A->Tomo->object3d->Nz; z++)
        {
            for( int kk=0; kk<11; kk++) 
            {
                for(int m=0; m < A->Tomo->detector->Nx; m++ )  
                {
                    for(int n=0; n < A->Tomo->detector->Ny; n++ )  
                    {
                        (**A_projection[x][y][z])->matrix[kk][m][n] = A->Tomo->ICD_projection(*A->Tomo->xraysource->Source,*A->Tomo->detector->GetCoordinates(m,n), initial_object, x, y, z);
                    }
                }

                A->Tomo->xraysource->RotateXRaySource(-5);
                A->Tomo->detector->RotateDetector(-5); 
            }   
        }   
    }
} 
```

我认为“Form_Solution.exe 中发生了“System.AccessViolationException”类型的未处理异常”。是这里：

```
(**A_projection[x][y][z])->matrix[kk][m][n] = A->Tomo->ICD_projection(*A->Tomo->xraysource->Source,*A->Tomo->detector->GetCoordinates(m,n), initial_object, x, y, z); 
```

我可以为这个问题做些什么，我的 3d 类矩阵的声明有什么问题吗？矩阵的分配内存是否必要，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:09:20.607

我会改变你个人写这篇文章的方式。除非您想编写自己的动态分配数组类，否则我只会使用 stl 向量。

```
using std::vector;

class Matrix3D
{
public:
Matrix3D(unsigned x, unsigned y, unsigned z)
{
   data.clear();
   data.resize(x);
   for(unsigned i=0;i<data.size();++i)
   {
      data[i].resize(y);
      for(unsigned j=0;j<data[i].size();++j)
      {
          data[i][j].resize(z);
      }
   }
}

vector< vector< vector< float > > > data;
}; 
```

我没有尝试编译这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:51:46.693

这个：

```
ProjectionValue*** A_projection [10][10][5]; 
```

不是“`ProjectionValue`类的 3D 数组”。它是指向指针的指针的 3D 数组`ProjectionValue`。你可能想要：

```
ProjectionValue A_projection [10][10][5]; 
```

除非您想要自己分配（和取消分配）所有指针和对象的额外开销。

# c# - ASP.NET MVC 4 将 Windows 身份验证应用于单个控制器？

> ID：15505343
> 
> 赞同：4
> 
> 时间：2013-03-19T16:38:53.987
> 
> 标签：c#, asp.net, asp.net-mvc, authentication, asp.net-mvc-4

我有一个对所有用户开放的 MVC 4 应用程序，无需登录。只有**一个控制器**需要通过 Web.Config应用**Windows 身份验证，如下所示：**

```
 <authentication mode="Windows" />
    <authorization>
      <allow users="domain\jsmith" />
      <deny users="*" />
    </authorization> 
```

控制器将**MySite.Com/MyApp/MyAdminReportController**

如果这是可能的，怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:30:31.637

我认为您只需要 Windows 身份验证并指定只需要授权的路径。如果您也不需要 Forms 身份验证，它看起来像这样：

```
<configuration>
  ...
  <system.web>
    ......
    <authentication mode="Windows">
    </authentication>
  </system.web>
  <location path="MyAdminReport">
    <system.web>
      <authorization>
        <deny users="?" />
      </authorization>
    </system.web>
  </location>

</configuration> 
```

这是网络配置方法，其他选项是将 [Authorize] 属性添加到您的控制器（即使不是孔控制器，您也可以仅为特定操作添加此属性）。

```
[Authorize]
public class MyAdminReportController : Controller
{

   //[Authorize]
   public ActionResult PrivatePage()
   {
      return View();
   }

} 
```

# selenium - 如何使用 Soda/Selenium 发送左右光标？

> ID：15505344
> 
> 赞同：0
> 
> 时间：2013-03-19T16:38:55.073
> 
> 标签：selenium, selenium-webdriver, soda

我`Soda`用来跑步`Selenium Webdriver`。大多数情况下它按预期工作，但我试图弄清楚如何将左右光标键发送到浏览器以移动 jquery ui 滑块句柄。

我试过了

```
.typeKeys('css=a.ui-slider-handle[lr="l"]','\37') 
```

和

```
 .type('css=a.ui-slider-handle[lr="l"]','\37') 
```

和

```
.typeKeys('\37') 
```

和

```
.type('\37') 
```

似乎没有任何东西可以移动滑块。他们都没有错误。在执行此操作之前，我会单击手柄以确保...

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:09:22.823

试试下面，我在 Firefox 中使用 jquery UI 滑块页面对此进行了测试，它对我有用。

.clickAt("//div[@id='slider']/a[1]", "")

//鼠标左键向下

.mouseDownAt("//div[@id='slider']/a[1]", "0,0")

//将光标从左边移动200

.mouseMoveAt("//div[@id='slider']", "200,0")

//释放鼠标按钮

.mouseUpAt("//div[@id='slider']", "");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:23:20.073

Java中的工作代码-

```
WebDriver driver = new InternetExplorerDriver();
driver.get("http://jqueryui.com/demos/slider/");
//Identify WebElement
WebElement slider = driver.findElement(By.xpath("//div[@id='slider']/a"));
//Using Action Class
Actions move = new Actions(driver);
Action action = move.dragAndDropBy(slider, 30, 0).build();
action.perform();
driver.quit(); 
```

来源 - [https://gist.github.com/2497551](https://gist.github.com/2497551)

# php - 基本 CSS 样式（如边框底部）不影响动态创建的表

> ID：15505351
> 
> 赞同：1
> 
> 时间：2013-03-19T16:39:19.613
> 
> 标签：php, html, css, tcpdf

我正在从 MYSQL 读取表格数据并以 html 格式编写以生成 PDF（使用 TCPDF LIbrary）。但是在生成的 PDF 中，只有一些内联 html CSS 会影响 include(color,width.height) 但其他 css，如border-botttom（我最需要）或所有其他 css 都被库忽略。

```
$bookings_table_Result = mysql_query($bookings_table_query);
$tbl_header = '<table style=\"width:900px; border: 1px solid black; padding:0px;\">';
$tbl_footer = '</table>';
$tbl = '';

    while($row = mysql_fetch_array($bookings_table_Result)){
    $checkin = $row["checkin"];
    $checkout = $row["checkout"];
    $nights = $row["nights"];
    $guest = $row["guest"];
    $country = $row["country"];
    $guestcount = $row["guestcount"];
    $amount = $row["amount"];

    $tbl .= '<tr >

            <td style="border-bottom: solid 1px Black; width: 80px;">'.$checkin.'</td>
            <td style="border: 1px solid #000000; width: 80px;">'.$checkout.'</td>
            <td style="border: 1px solid #000000; width: 20px;">'.$nights.'</td>
            <td style="border: 1px solid #000000; width: 200px;">'.$guest.'</td>
            <td style="border: 1px solid #000000; width: 150px;">'.$country.'</td>
            <td style="border: 1px solid #000000; width: 40px;">'.$guestcount.'</td>
            <td style="border: 1px solid red; width: 80px; color: blue;">'.$amount.'</td>
            </tr>';
     };
$tbl .= '</table>';

$pdf->writeHTML($tbl, true, false, true, false, ''); 
```

我上传了结果 PDF 的图片

![在此处输入图像描述](../Images/cefa72acc44e4f4377dd91dd485d0cc5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:44:33.133

您在使用的行中有拼写错误`border-bottom`，请参阅：

```
... '<table style="width: 900px; border-bottom:1pt solid black;" border: 1px; cellspacing="0">';
                        This is out of the style attribute!! ------^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:44:02.510

从外观上看，您没有生成有效的 html 表：您似乎没有将表头添加到`$tbl`变量中。

如果这不是问题（您没有显示输出表格的位置......），您最好发布生成的 html 而不是 php，因为这似乎`html`与.`css``php`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T16:56:51.087

当您使用 php 在 html 中回显样式时，请尝试将代码更改为以下内容：

```
 $tbl .= '<tr >
        <td style=\"border: 1px solid #000000; width: 80px;\">'.$checkin.'</td>
        <td style=\"border: 1px solid #000000; width: 80px;\">'.$checkout.'</td>
        <td style=\"border: 1px solid #000000;  width: 20px;\">'.$nights.'</td>
        <td style=\"border: 1px solid #000000; width: 200px;\">'.$guest.'</td>
        <td style=\"border: 1px solid #000000; width: 150px;\">'.$country.'</td>
        <td style=\"border: 1px solid #000000; width: 40px;\">'.$guestcount.'</td>
        <td style=\"border: 1px solid #000000; width: 80px;\">'.$amount.'</td>
        </tr>'; 
```

使用单引号时，`''`您需要包含反斜杠以告诉服务器`""`在回显您的表格时保留。

当我使用 php 从 mysql db 回显我的表时，我遇到了类似的问题。

jeroen 提出了一个很好的观点。如果要创建有效的 html 表，则需要添加开始表声明。

您似乎也在样式定义之外对表格进行样式设置。

改变

`$tbl_header = '<table style="width: 900px; border-bottom:1pt solid black;" border: 1px; cellspacing="0">';`

到

`$tbl_header = '<table style=\"width:900px; border-bottom:1px solid black; border: 1px solid black; padding:0px;\">`

但是，底部的边框可能没有一点，然后是整个表格上的一个，因为您的最后一个边框声明将覆盖前一个边框。. .

# javascript - 画布中的垂直旋转图像

> ID：15505353
> 
> 赞同：1
> 
> 时间：2013-03-19T16:39:22.083
> 
> 标签：javascript, html, canvas

如何仅使用`Canvas`（不使用 WebGL 等）垂直旋转图像？

我在看类似`-webkit-transform: rotateY();`CSS3 的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T17:43:40.380

[编辑：哎呀！我想我误解了你的问题。你想用 3D 效果翻转，只是没有 webGL。]

**是的，您可以在没有 webGL 的情况下在画布中进行 3D 旋转。**

几个画布库提供 3D 画布旋转...

看看 K3D（NICE 效果！）：[http ://www.kevs3d.co.uk/dev/canvask3d/k3d_test.html](http://www.kevs3d.co.uk/dev/canvask3d/k3d_test.html)

看看GreenSock：[http ://www.greensock.com/css3/](http://www.greensock.com/css3/)

如果您根本不需要*任何*库，请查看 K3D。它的许可证足够自由，可以让您提取所需的旋转代码。

.

.

[我在下面的原始答案可能与您想要的不符-但无论如何我都会把它留在这里]

这是垂直翻转画布图像的方法

当你想垂直翻转时，讽刺的是你是在水平轴上翻转。

要在水平轴上翻转，您可以使用 context.scale ，如下所示：

```
context.scale(1,-1);  // flip vertically--using the HORIZONTAL axis ! 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/JBCGC/](http://jsfiddle.net/m1erickson/JBCGC/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvasH=document.getElementById("canvasH");
    var ctxH=canvasH.getContext("2d");

    var img=new Image();
    img.onload=function(){
      // flip on the horizontal axis
      // (causes upside down)
      canvasH.width=img.width;
      canvasH.height=img.height;
      ctxH.save();
      ctxH.scale(1,-1);
      ctxH.translate(0,-img.height);
      ctxH.drawImage(img,0,0);
      ctxH.restore();
    }
    img.src="http://dl.dropbox.com/u/139992952/houseIcon.png";

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvasH" width=300 height=300></canvas>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T16:42:38.410

你可以试试这个——

```
 // translate context to center of canvas
  context.translate(canvas.width / 2, canvas.height / 2);

  // rotate 45 degrees clockwise
  context.rotate(Math.PI / 4); 
```

旋转变换需要一个以弧度为单位的角度。 [参考](http://www.html5canvastutorials.com/advanced/html5-canvas-transform-rotate-tutorial/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T18:37:58.763

我喜欢@markE 的回答，只是想我也会发布这个。它允许您将图像旋转到您需要的任何角度。

```
function rotate(angle) {
    ctxH.clearRect(0, 0, width, height);
    ctxH.save();
    ctxH.translate(width / 2, height / 2);
    ctxH.rotate(angle * Math.PI / 180);
    ctxH.drawImage(img, -width / 2, -height / 2);
    ctxH.restore();
} 
```

**[markE的改装Demo（带动画）](http://jsfiddle.net/loktar/JBCGC/3/)**

# ruby-on-rails - Rails：自定义验证 :on => :update 在 :create 期间运行

> ID：15505356
> 
> 赞同：2
> 
> 时间：2013-03-19T16:39:25.137
> 
> 标签：ruby-on-rails, validation

我的控制器中有以下内容：

```
def create
  group = Group.create(params[:group])
end 
```

这在我的模型中：

```
validate :governance_style_change, :on => :update

. . . .

private

  def governance_style_change
    if self.governance_style_was != 3
      errors.add(:governance_style, I18n.t("group.errors.cannot_change_governance_style"))
    end
  end 
```

出于某种原因，验证在`create`. 我做错了什么吗？

# oracle - CHAR_USED 查询返回“从 1 列获取 0 行”

> ID：15505357
> 
> 赞同：1
> 
> 时间：2013-03-19T16:39:26.057
> 
> 标签：oracle

我创建了下表：

```
Create table temp.test(c1 VARCHAR2(10 BYTE)); 
```

我试图使用 CHAR_USED 来确定列大小是 BYTES 还是 CHARS，但我得到的只是'从 1 列获取 0 行'。我使用的数据库版本是 Oracle 11g。有没有人知道为什么它不返回该表的语义长度信息？

使用的查询如下：

```
select CHAR_USED from all_tab_columns where table_name='temp.test'
select CHAR_USED from all_tab_columns where table_name='test' and owner = 'temp' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:43:24.810

Assuming that you are not using case-sensitive identifiers (which you are not and should not), object names are stored in the data dictionary in upper case. So when you query a table like `all_tab_columns`, you'd need to use upper-case

```
SELECT column_name, char_used
  FROM all_tab_columns
 WHERE table_name = 'TEST'
   AND owner = 'TEMP' 
```

# python - Python：比较两个字符串并返回它们共有的最长段

> ID：15505363
> 
> 赞同：1
> 
> 时间：2013-03-19T16:39:35.573
> 
> 标签：python, string, compare, substring

作为 Python 的新手，我编写了一个工作函数，它将比较两个字符串并搜索两个字符串共享的最长子字符串。例如，当函数比较“goggle”和“google”时，它会将“go”和“gle”识别为两个常见的子字符串（不包括单个字母），但只会返回“gle”，因为它是最长的。

我想知道我的代码的任何部分是否可以改进/重写，因为它可能被认为是冗长而复杂的。我也很高兴看到解决方案的其他方法。提前致谢！

```
def longsub(string1, string2):
    sublist = []
    i=j=a=b=count=length=0

    while i < len(string1):
        while j < len(string2):
            if string1[i:a+1] == string2[j:b+1] and (a+1) <= len(string1) and (b+1) <= len(string2):
                a+=1
                b+=1
                count+=1
            else:
                if count > 0:
                    sublist.append(string1[i:a])
                count = 0
                j+=1
                b=j
                a=i
        j=b=0
        i+=1
        a=i

    while len(sublist) > 1:
        for each in sublist:
            if len(each) >= length:
                length = len(each)
            else:
                sublist.remove(each)

    return sublist[0] 
```

编辑：比较“护目镜”和“谷歌”可能是一个不好的例子，因为它们的长度相同，最长的公共段位于相同的位置。实际输入会更接近于：“xabcdkejp”和“zkdieaboabcd”。正确的输出应该是“abcd”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:43:22.017

实际上，标准库中恰好有一个函数： [`difflib.SequencMatcher.find_longest_match`](http://docs.python.org/2/library/difflib.html#difflib.SequenceMatcher.find_longest_match)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:55:35.393

**编辑**：此算法仅在单词在相同索引中具有最长段时才有效

您只需一个循环即可逃脱。使用辅助变量。像这样的东西（需要重构）[http://codepad.org/qErRBPav](http://codepad.org/qErRBPav)：

```
word1 = "google"
word2 = "goggle"

longestSegment = ""
tempSegment = ""

for i in range(len(word1)):
    if word1[i] == word2[i]:
        tempSegment += word1[i]
    else: tempSegment = ""

    if len(tempSegment) > len(longestSegment):
        longestSegment = tempSegment

print longestSegment # "gle" 
```

**编辑**：mgilson 的使用建议`find_longest_match`（适用于不同位置的段）：

```
from difflib import SequenceMatcher

word1 = "google"
word2 = "goggle"

s = SequenceMatcher(None, word1, word2)
match = s.find_longest_match(0, len(word1), 0, len(word2))

print word1[match.a:(match.b+match.size)] # "gle" 
```

# jquery - 如何在下拉列表上使用 jQuery 更改事件来使用控制器中的 ActionResult 填充另一个下拉列表

> ID：15505364
> 
> 赞同：0
> 
> 时间：2013-03-19T16:39:39.267
> 
> 标签：jquery, asp.net-mvc-3

我正在尝试使用下拉列表的更改事件在我的控制器中调用 ActionResult 以填充另一个下拉列表。

这是我尝试过的jQuery：

```
 $(function () {
        $('#CertificationId').change(function () {
            var data = {
                certificationId: $('#CertificationId').val()

            };

            var certificationId = $('#CertificationId').val();
//            $.post('@Url.Action("AjaxGetCourseOptions", "WorkerCertifications")', {certificationId : certificationId}, $(this).parents('form:first').serialize(), function (data) {
//                //$('#form').children().remove().append(data);
//            }, 'html');

//            var url = '@Url.Action("AjaxGetCourseOptions", "WorkerCertifications")';
//            var certificationId = $('#CertificationId').val();
//            $.post(url, { certificationId: certificationId }, function (result) {
//                alert('success');
//            });

//            $.getJSON('/WorkerCertifications/AjaxGetCourseOptions/SysAdmin/Worker/Certifications/14843/', data, function (result) {
//                alert(result.message);
//            });

            $.getJSON('@Url.Action("AjaxGetCourseOptions", "WorkerCertifications")', data, function (result) {
                alert(result.message);
            });

//            $.getJSON(this.href, data, function (result) {
//                alert(result.message);
//            });
            return false;
        });
    }); 
```

这是来自控制器的代码：

```
public ActionResult AjaxGetCourseOptions( string certificationId )
    {
        var viewData = new WorkerCertificationViewModel
        {
            //CourseOptions = ScheduledCourse.GetActive().ToSelectList(x => x.Id, x => x.Id),
            CourseOptions = ScheduledCourse.GetAvailableCourses(Convert.ToInt64(certificationId)).ToSelectList(x => x.Id, x => x.Id)

        };

        viewModel.CourseOptions = viewData.CourseOptions;

        return Json( new {message = "Test"},
                     JsonRequestBehavior.AllowGet
            );
    } 
```

我似乎无法让 jQuery 调用控制器中的代码。我怎样才能做到这一点？

## 更新

我仍然有一个问题让这个工作。这是下拉菜单的更改事件触发之前的页面 URL [http://mylocalhost.com/camms/WorkerCertifications/Insert/SysAdmin/Worker/Certifications/14843](http://mylocalhost.com/camms/WorkerCertifications/Insert/SysAdmin/Worker/Certifications/14843)

更改事件触发后，我有一个硬编码的（暂时）网址，我想发布到该网址，但它已附加到当前网址。知道如何解决这个问题吗？这是它试图发布到的网址： [http ://mylocalhost.com/camms/WorkerCertifications/Insert/SysAdmin/Worker/Certifications/camms/WorkerCertifications/AjaxGetCourseOptions/SysAdmin/Worker/Certifications/14843/?certificationId=10916](http://mylocalhost.com/camms/WorkerCertifications/Insert/SysAdmin/Worker/Certifications/camms/WorkerCertifications/AjaxGetCourseOptions/SysAdmin/Worker/Certifications/14843/?certificationId=10916)

网址应如下所示： [http ://mylocalhost.com/camms/WorkerCertifications/AjaxGetCourseOptions/SysAdmin/Worker/Certifications/14843/?certificationId=10916](http://mylocalhost.com/camms/WorkerCertifications/AjaxGetCourseOptions/SysAdmin/Worker/Certifications/14843/?certificationId=10916)

我必须删除本地主机和端口才能保存此更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:55:31.877

在我的应用程序中，我正在填充这样的下拉列表：

有两个下拉列表工作类别和工作。一旦您选择了一个工作类别，工作列表就会被填充。

```
 function ListingJobs()
    {
        var job_ID = $( "#JobCatID" ).val();

        $.ajax( {
            url: '@Url.Action("GetJobs")',
            data: { JobCatID: job_ID },
            dataType: "json",
            type: "POST",
            error: function ()
            {
                alert( "An error occurred." );
            },
            success: function ( data )
            {

                var items = "";

                $.each( data, function ( i, item )
                {

                    items += "<option value=\"" + item.values + "\">" + item.texts  + "</option>";
                } );

                $( '#JobID' ).html( items );
            }
        } );
    }

    $( '#JobCatID' ).change( function ()
    {
        ListingJobs();
    } ); 
```

在您的控制器中，您必须提供一个转换为 json 的值-名称对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:46:36.593

我通过以下方式实现了这一点：

查询：

```
$(function () {
    $('#CertificationId').change(function (evt) {
        var data = {
            certificationId: $('#CertificationId').val()

        };

        var certificationId = $('#CertificationId').val();
        $.ajax({
            //url: "/camms/WorkerCertifications/GetCourseOptions/SysAdmin/Worker/Certifications/14843",
            url: window.location.href.replace('Insert', 'GetCourseOptions'),
            type: 'POST',
            data: { certificationId: certificationId },
            success: function (courseOptions) {
                // courseOptions is your JSON array
                var $select = $('#CourseId');
                $select.children().remove();
                if (courseOptions.length > 0) {
                    var listItems = [];
                    for (var i = 0; i < courseOptions.length; i++) {
                        listItems.push('<option value="' +
                            courseOptions[i].Value + '">' + courseOptions[i].Text + '</option>');
                    }
                    $select.append(listItems.join(''));
                }

                //                    $.each(courseOptions, function (i, option) {
                //                        $('<option>', {
                //                            value: option.Id
                //                        }).html(option.Id).appendTo($select);
                //                    });
            }
        });

        return false;
    });
}); 
```

在控制器中：

```
[HttpPost]
    public JsonResult GetCourseOptions( string certificationId = "0")
    {
        var list = ScheduledCourse.GetAvailableCourses(Convert.ToInt64(certificationId)).ToSelectList(x => x.ScheduledCourseId, x => x.ScheduledCourseId);

        var result = new JsonResult();

        result.Data = list.ToList();

        return result;
    } 
```

# c++ - opencv python transfer ((uchar*)(img->imageData img->widthStep*i))[j];

> ID：15505368
> 
> 赞同：-2
> 
> 时间：2013-03-19T16:39:55.030
> 
> 标签：c++, python, opencv, iplimage

我试图将 opencv c++ 代码传输到 python。但我不知道如何更改下面的这一行：

((uchar*)(img->imageData + img->widthStep*i))[j];

当我这样写时： (img.imageData + img.widthStep * i)[j]

它发生此错误消息：'cv2.cv.iplimage' 对象没有属性'imageData'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:57:19.337

这很简单。

`img[i, j]`会给你一个`(B, G, R)`像素的元组`i, j.`

# ruby-on-rails - 试图将单个产品拉入灯箱，但导轨拉动多个/不正确的产品

> ID：15505371
> 
> 赞同：0
> 
> 时间：2013-03-19T16:39:56.917
> 
> 标签：ruby-on-rails, ruby, css, coffeescript

我有一个产品页面，列出了某个组的每个产品，而不是当您单击主图像时转到每个产品的产品展示页面，我想将图像加载到 css3 灯箱中。

我的 _product.html.erb 代码如下：

```
<% if products.any? %>
<ul id="products" class="inline product-listing" data-hook>
  <% products.each do |product| %>
    <% if product.on_display? %>
      <div class="grid_1">
      <li id="product_<%= product.id %>" class="columns product three <%= cycle("alpha", "secondary", "", "omega secondary", :name => "classes") %>" data-hook="products_list_item" itemscope itemtype="http://schema.org/Product">
    <div class="main-image" type="button" value="Zoom In Modal Window" class="popup_button" data-type="zoomin" data-productid="<%= product.id %>">
      <%= large_image(product, :itemprop => "image", :class => "product-image", :class => "popup_button") %>
    </div><!-- main-image-->
    **<div class="overlay-container">
    <div class="product-container zoomin">
        <span class="close">X</span>
        <%= product %>
        <%= large_image(product, :itemprop => "image", :class => "product-image") %>
    </div><!-- window-container zoomin -->
    </div><!-- overlay-container -->**
    <div class="prod_info_box">
    <%= link_to truncate(product.name, :length => 50), product, :class => 'info', :itemprop => "name", :title => product.name %>
    <span class="price selling" itemprop="price"><%= product.price_in(current_currency).display_price %></span> 
```

灯箱代码以粗体显示。我正在使用主图像 div 中使用的相同“产品”变量将选定的单个产品拉入灯箱，但是当我在这里使用它时，它似乎拉入了多个产品并将它们层叠在一个之上其他。它甚至没有拉出正确的产品对象。您单击“The Temptress”，它会拉出“The Tim”，这是网格右下角的产品。知道为什么要这样做，因为我使用的是相同的“产品”

```
<% products.each do |product| %> 
```

谢谢你的帮助！

PS这是咖啡脚本：

```
$(document).ready ->
 $(".popup_button").click ->
  type = $(this).attr("data-type")
  $(".overlay-container").fadeIn ->
    window.setTimeout (->
      $(".product-container." + type).addClass "product-container-visible"
    ), 100

$(".close").click ->
  $(".overlay-container").fadeOut().end().find(".product-container").removeClass "product-container-visible" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:31:40.407

You can add a product id to the using an id (or data attribute if you prefer). So you can do something like:

```
<div id="<%= product.id %>" class="product-container zoomin"> 
```

Then, in your coffeescript, you can do something like:

```
$(document).ready ->
 $(".popup_button").click ->
  type = $(this).attr("data-type")

  product_id = $(this).attr("data-productid")

  $(".overlay-container").fadeIn ->

    window.setTimeout (->
      $("#" + product_id + ".product-container." + type).addClass "product-container-visible"
   ), 100 
```

# c# - 如何在c#中播放背景声音

> ID：15505372
> 
> 赞同：0
> 
> 时间：2013-03-19T16:39:58.190
> 
> 标签：c#, audio

我已经按照在c#中添加声音的教程进行了操作，但是它无法播放声音，但是没有错误。我能怎么做？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Media;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            SoundPlayer myPlayer = new SoundPlayer(WindowsFormsApplication2.Properties.Resources.sound1);
            myPlayer.PlayLooping();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:52:50.147

确保您已`Form1_Load()`分配给 Form`Load`事件。我已经输入了你的代码，它工作得很好。

要分配事件，只需查看下图。![在此处输入图像描述](../Images/e1de4747b240b4f6ad1e741ed00d186a.png).

这将确保`Form1_Load()`在表单加载时调用。

在测试了当您尝试将非 .WAV 文件传递​​给 .WAV 文件时会发生什么之后`SoundPlayer`，它会产生一个错误：

`Error 1 The best overloaded method match for 'System.Media.SoundPlayer.SoundPlayer(string)' has some invalid arguments`.

这让我相信代码没有被调用。

# regex - Apache RewriteRule 将所有文件请求重定向到 php 处理程序

> ID：15505374
> 
> 赞同：2
> 
> 时间：2013-03-19T16:40:08.227
> 
> 标签：regex, apache, url-rewriting

我正在尝试获取允许以下列形式请求的任何文件的重写规则：

```
/assets/files/uploads/306/This-is-an-awesome-file.jpg 
```

由 file.php 处理，以及任何请求的文件，例如

```
/assets/files/uploads/306.jpg 
```

不匹配并正常返回文件

路径：/assets/files/uploads/ 保证在那里，第四个令牌保证是 'number'.'extension' 或 'number'/'title'.'extension'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:27:29.323

在更一般的正则表达式中，使用 / 和 . 逃脱

```
^\/assets\/files\/uploads\/[0-9]+\/[a-zA-Z0-9_]+\.[a-zA-Z]+$ 
```

+ 表示前面的字符必须至少出现一次。[something] 指定了一个有效的字符范围，因此 [az] 表示任何小写字母，而 [abc] 表示只允许 ab c。因此，这里我们要求有一个数字（至少一个数字），然后是斜线，然后是文件名（我假设文件名是字母数字和下划线，但您可以在 [a-zA-Z0-9_] 中包含其他内容是合法的），后跟一个 . 和文件扩展名。

^ 表示行首，$ 表示行尾。您可能需要也可能不需要这些。

不熟悉 Apache RewriteRule，我不知道这对正则表达式有什么影响。

# c++ - 将字符转换为 ASCII？

> ID：15505375
> 
> 赞同：7
> 
> 时间：2013-03-19T16:40:08.707
> 
> 标签：c++, visual-studio-2010

我尝试了很多将字符转换为 Ascii 的解决方案。他们都有一个问题。

一种解决方案是：

```
char A;
int ValeurASCII = static_cast<int>(A); 
```

但是VS提到static_cast是无效的类型转换！！！

PS：我的 A 始终是特殊字符之一（而不是数字）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T17:32:03.997

A`char`是整数类型。当你写

```
char ch = 'A'; 
```

您将值设置为`ch`编译器用来表示字符的任何数字`'A'`。这通常是`'A'`这些天的 ASCII 代码，但这不是必需的。您几乎可以肯定使用的是使用 ASCII 的系统。

像任何数字类型一样，您可以使用普通数字对其进行初始化：

```
char ch = 13; 
```

如果您想对一个`char`值进行算术运算，只需执行以下操作：`ch = ch + 1;`等等。

但是，为了显示值，您必须绕过 iostreams 库中的假设，即您希望将`char`值显示为字符而不是数字。有几种方法可以做到这一点。

```
std::cout << +ch << '\n';
std::cout << int(ch) << '\n' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-19T16:46:50.243

嗯，这有什么问题：

```
#include <iostream>

using namespace std;

int main(int, char **)
{
    char c = 'A';

    int x = c; // Look ma! No cast!

    cout << "The character '" << c << "' has an ASCII code of " << x << endl;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:43:52.657

You can use chars as is as single byte integers.

# dynamics-crm-2011 - 在 Dynamics CRM 2011 中以编程方式设置 iFrame 高度

> ID：15505380
> 
> 赞同：0
> 
> 时间：2013-03-19T16:40:15.187
> 
> 标签：dynamics-crm-2011

在 Dynamics CRM 中，如何以编程方式设置 iframe 的高度？以下函数不执行任何操作，iframe 始终具有相同的大小。即使您转到 iframe 属性并在那里更改行号，它仍然不会导致大小发生任何变化。

```
 function doOnLoad(sender, args) {
         setIframeHeight();
 }

 function setIframeHeight() {
     //lowest control in iframe
     var element = $('btnInsert');

     //the following line gets called, and what's displayed is 25
     alert(window.parent.parent.frames[0].document.getElementById('IFRAME_TransactionProduct_RA_d').parentNode.height); 

     //the following line doesn't do anything         
     window.parent.parent.frames[0].document.getElementById('IFRAME_TransactionProduct_RA_d').parentNode.height = 5000000; 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-29T06:29:55.187

您可以在 iframe 代码中尝试此操作：

//set div(show iframe) height = iframe body height * 1.2 window.parent.parent.frames[0].document.getElementById('IFRAME_ApprovalProcess_d').style["height"] = ($(body * 1.2)) +“像素”；

//但是如果表单中的内容器未加载可能会出现一些问题，因此 window.parent.parent.frames[0].document.getElementById('IFRAME_ApprovalProcess_d') 这可以是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:39:22.870

要获得元素的高度，你可以像你一样做，但要设置你有使用样式，就像这样：

```
parentNode.style.height = "100px"; 
```

# google-places-api - 使用带有方向服务的 google map places api

> ID：15505382
> 
> 赞同：1
> 
> 时间：2013-03-19T16:40:27.430
> 
> 标签：google-places-api

我想使用方向服务在道路上标记折线，但是当我在原点参数中使用地名时，它会返回其他内容，例如

```
http://maps.googleapis.com/maps/api/directions/xml?origin=candies bandra west&destination=thadomal shahani engineering college&sensor=false 
```

这是我的要求，但我对来源的回应只是：Bandra West，孟买，马哈拉施特拉邦，印度孟买，马哈拉施特拉邦，印度

# sql - RegExp_Replace Oracle 中某个单词列表之后的所有内容

> ID：15505384
> 
> 赞同：2
> 
> 时间：2013-03-19T16:40:33.217
> 
> 标签：sql, database, oracle, plsql

我有一列中有 200 多个单词的列表。我想替换这些词之后的任何内容。

```
Eg: E Graham St       DDS  ==> E Graham St
    Trent Ave      4DF ===> Trent Ave 
```

单词的示例是 AVE、ST ...。我正在考虑将该字符串传递给函数，并且在函数内部将有正则表达式替换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:47:45.863

你可以使用类似的东西：

```
SQL> select regexp_replace(str, '^((.*? ave[ \.])|(.*? st[ \.])|(.*? rd[ \.])|(.*? close[ \.])).*$', '\1', 1, 1, 'i')
  2   from (select 'E Graham St       DDS' str from dual
  3         union all select 'Trent Ave      4DF' from dual
  4         union all select 'Foo bar Rd. asd' from dual
  5         union all select 'E Graham St St DDS' from dual);

REGEXP_REPLACE(STR,'^((.*?AVE[\.])|(.*?ST[\.])|(.*?RD[\.])|(.*?CLOSE[\.])).*$','
--------------------------------------------------------------------------------
E Graham St
Trent Ave
Foo bar Rd.
E Graham St 
```

# html - TextFX HTML Tidy 替换（格式化 HTML）

> ID：15505388
> 
> 赞同：15
> 
> 时间：2013-03-19T16:40:49.927
> 
> 标签：html, notepad++, htmltidy

因此，在几个网站上，TextFX 的 HTML 整洁性都非常出色，而且自 2008 年以来也不受支持。

看来，最新版本的 Notepad++ 实际上完全打破了它。

现在我在一行中有一些 HTML 需要缩进等。任何人都可以推荐的 Notepad++ 上 HTML Tidy 的替代品？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-12T21:31:52.903

我使用[NppTidy2](https://github.com/davegb3/NppTidy2)插件，效果很好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T16:55:49.967

对于其他坚持这一点的人，最后我使用了这个工具

[http://infohound.net/tidy/](http://infohound.net/tidy/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-10T20:49:34.520

以 zip 格式下载旧版本的 notepad++。从 zip \unicode\plugins\Config\tidy 复制到 C:\Program Files (x86)\Notepad++\plugins\Config\tidy

重启记事本++，现在你可以使用插件了

菜单 -> TextFX -> TextFX HTML Tidy –> Tidy: Reindent XML

使用插件下载旧版本的链接 [http://notepad-plus-plus.org/download/v5.6.8.html](http://notepad-plus-plus.org/download/v5.6.8.html)

# sql - SQL 查询返回行，即使它不存在于表中

> ID：15505389
> 
> 赞同：0
> 
> 时间：2013-03-19T16:40:53.083
> 
> 标签：sql

这是一个具体的问题。

我有一个包含数据的 Excel 表。类似的数据存在于关系数据库表中。一些行可能不存在，或者可能存在一些额外的行。目标是用表格中的数据验证excel表中的数据。

我有以下查询

```
 Select        e_no, start_dt,end_dt
  From         MY_TABLE
  Where        e_no In 
  (20231, 457) 
```

在这种情况下，数据库中不存在 e_no 457（因此不返回）。但我希望我的查询返回一行，即使它不存在（457、null、null）。我怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:49:00.820

For `Sql-Server`：使用临时表或表类型变量并与之左`MY_TABLE`连接

**[Sql-Server 小提琴演示](http://sqlfiddle.com/#!3/d5303/1)**

```
Declare @Temp Table (e_no int)

Insert into @Temp
Values (20231), (457) 

Select   t.e_no, m.start_dt, m.end_dt
From     @temp t left join MY_TABLE m on t.e_no = m.e_no 
```

如果您传递的值是 csv 列表，则使用[拆分函数](https://stackoverflow.com/questions/697519/split-function-equivalent-in-tsql)获取插入到 @Temp 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:43:13.750

Why not simply populate a temporary table in the database from your spreadsheet and join against that? Any other solution is probably going to be both more work and more difficult to maintain.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:11:28.727

你也可以这样做`UNION`

```
Select
     e_no, start_dt ,end_dt
From         MY_TABLE
Where e_no In (20231, 457) 

UNION

Select 457, null, null 
```

# objective-c - 在更新循环中实现轻松

> ID：15505392
> 
> 赞同：1
> 
> 时间：2013-03-19T16:40:59.040
> 
> 标签：objective-c, easing

我想通过某种减速来动画从点 y1 到点 y2 的精灵。当它到达点 y2 时，物体的速度将为 0，因此它会完全停止。

我知道这两点，我知道物体的起始速度。动画时间对我来说不是那么重要。如果需要，我可以决定。

例如：`y1 = 0`, `y2 = 400`,`v0 = 250`每秒像素数（= 起始速度）

我阅读了有关缓动函数的信息，但我不明白如何在更新循环中实际实现它。这是我的更新循环代码，其中应该以某种方式实现缓动功能。

```
-(void)onTimerTick{
   double currentTime =  CFAbsoluteTimeGetCurrent() ;
   float timeDelta = self.lastUpdateTime - currentTime;
   self.lastUpdateTime = currentTime;

   float *pixelsToMove = ???? // here needs to be some formula using v0, timeDelta, y2, y1

   sprite.y +=  pixelsToMove;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T17:41:02.213

# 时序函数作为贝塞尔曲线

缓动计时函数基本上是一条贝塞尔曲线，`(0,0)`横轴`(1,1)`是“时间”，纵轴是“变化量”。由于贝塞尔曲线在数学上是

```
start*(1-t)^3 + c1*t(1-t)^2 + c2*t^2(1-t) + end*t^3 
```

您可以插入任何时间值并获取应应用的更改量。请注意，时间和变化都是标准化的（在 0 到 1 的范围内）。

**请注意**，变量 t*不是*时间值，t 是您沿着曲线走了多远。*时间值是沿曲线的点的 x 值*。

* * *

下面的曲线是一个示例“缓和”曲线，开始缓慢，走得更快，最后变慢。

例如，如果已经过去了三分之一的时间，您将计算对应于更新动画属性的值的更改量为

```
currentValue = beginValue + amountOfChange*(endValue-beginValue) 
```

![贝塞尔曲线](../Images/67e1ed66a41974a940e946bad8023804.png)

# 例子

假设您正在将位置设置为动画，`(50, 50)`使用`(200, 150)`控制点为`(0.6, 0.0)`和`(0.5, 0.9)`且持续时间为 4 秒的曲线（控制点试图接近上图的控制点）。

当动画的 1 秒过去（总持续时间的 25%）时，曲线上的值*是*：

```
(0.25,y) = (0,0)*(1-t)^3 + (0.6,0)*t(1-t)^2 + (0.5,0.9)*t^2(1-t) + (1,1)*t^3 
```

这意味着我们可以计算`t`为：

```
0.25 = 0.6*t(1-t)^2 + 0.5*t^2(1-t) + t^3 
```

[Wolfram Alpha 告诉](http://www.wolframalpha.com/input/?i=0.25+%3D+.6*t%281-t%29%5E2+%2B+.5*t%5E2%281-t%29+%2B+t%5E3)我`t = 0.482359`

如果我们`t`输入

```
y = 0.9*t^2*(1-t) + t^3 
```

当持续时间的 1 秒过去时，我们将获得“变化量”。

Wolfram Alpha再次[告诉我](http://www.wolframalpha.com/input/?i=y+%3D+0.9*t%5E2*%281-t%29+%2B+t%5E3%2C+t%3D0.482359)，`y = 0.220626`这意味着 22% 的值在 25% 的时间后发生了变化。这是因为曲线开始时很慢（您可以在图像中看到它开始时大部分是平坦的）。

所以最后： 1 秒进入动画的位置是

```
(x, y) = (50, 50) + 0.220626 * (200-50, 150-50)
(x, y) = (50, 50) + 0.220626 * (150, 100)
(x, y) = (50, 50) + (33.0939, 22.0626)
(x, y) = (50+33.0939, 50+22.0626)
(x, y) = (83.0939, 72.0626) 
```

我希望这个例子能帮助你理解如何使用计时功能。

# mysql - 选择一个字段。如果为空，请选择另一个

> ID：15505396
> 
> 赞同：2
> 
> 时间：2013-03-19T16:41:19.333
> 
> 标签：mysql, sql, select, if-statement

在我的用户表中，有电子邮件和号码字段。我必须选择电子邮件。但如果为空，请选择数字。我可以在一个查询中执行此操作吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:42:20.283

您可以使用`COALESCE`

```
SELECT COALESCE(email, number)
FROM   tableName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/76523/1)
*   [合并（）](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

从文档，

> 返回列表中的第一个非 NULL 值，如果没有非 NULL 值，则返回 NULL。

# performance - 用相反符号对两行的所有可能组合进行矩阵化

> ID：15505398
> 
> 赞同：1
> 
> 时间：2013-03-19T16:41:25.140
> 
> 标签：performance, r, matrix, add

我有一个正整数和负整数矩阵。我想将特定列中具有相反符号的任意两行的所有可能组合加在一起（下面我的示例中的列“a”），这样加法在该列中给出零。

合并的行行被放入`newmat`并且`newmat[,"a"]`只有零。

一个问题是，对于较大的矩阵（> 500 行），我的解决方案变得异常缓慢。

```
##initialize matrix
nof.rows <- 100
mat <- cbind(matrix(ncol=40, nrow=nof.rows, sample(40*nof.rows)),
         matrix(ncol=6, nrow=nof.rows, c(1,2,-1,3, -2, -3),
                dimnames=list(seq_len(nof.rows),c("a", "b", "c", "d", "e", "f"))))

newmat <- matrix(ncol=ncol(mat), nrow=0)

##column which will contain nothing but zeroes
col <- "a"

for (i in seq_len(nrow(mat))){
  curr.row <- mat[i,]
  curr.col <- mat[,col]
  opposite.sign.indices <- vector()
  if(curr.row[col] > 0)
    opposite.sign.indices <- which(curr.col<0)
  else
    opposite.sign.indices <- which(curr.col>0)
  opposite.sign.indices <- setdiff(opposite.sign.indices, seq_len(i))
  for (j in opposite.sign.indices){
      opposite.sign.row <- mat[j,]
      newrow <- (abs(opposite.sign.row[col]) * curr.row
                 + (abs(curr.row[col])*opposite.sign.row))
      newmat <- rbind(newmat, newrow)
    }
}

newmat <- unique(newmat) 
```

关于如何加快进程的任何想法？提前谢谢-H-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:42:17.853

这要快得多：

```
##initialize matrix
nof.rows <- 100
mat <- cbind(matrix(ncol=40, nrow=nof.rows, sample(40*nof.rows)),
         matrix(ncol=6, nrow=nof.rows, c(1,2,-1,3, -2, -3),
                dimnames=list(seq_len(nof.rows),c("a", "b", "c", "d", "e", "f"))))
col="a"

pos.row.idx <- which(mat[,col]>0)
neg.row.idx <- which(mat[,col]<0)
newmat <- unique(t(apply(expand.grid(pos.row.idx, neg.row.idx), 1, function(x){
  abs(mat[x[2],col]) * mat[x[1],] + abs(mat[x[1],col]) * mat[x[2],]
}))) 
```

# javascript - JavaScript 创建对象的新实例

> ID：15505405
> 
> 赞同：22
> 
> 时间：2013-03-19T16:41:33.953
> 
> 标签：javascript, object, instances

所以我正在设计一个成绩册界面，我有一个课程定义为：

```
<script>
course = new Object();
 var name;
 var gradingareas;
 var finalgrade;
</script> 
```

然后稍后我想创建一个新实例：

```
 var gradingareas = new Array("Homework", "Classwork", "Exams");

 course1 = new course("CS1500", gradingareas, 85); 
```

我也试过没有前面的 var 无济于事。我得到一个“未捕获的类型错误：对象不是函数”我对 javascript 很陌生，所以我什至不知道我是否以正确的方式处理这个问题。感谢任何帮助。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-19T16:44:13.830

您现有的代码：

```
// Creates a new, empty object, as a global
course = new Object();
// Creates three new variables in the global scope.
var name;
var gradingareas;
var finalgrade; 
```

变量和对象之间没有联系。

看起来你想要更像：

```
function Course(name, gradingareas, finalgrade) {
    this.name = name;
    this.gradingareas = gradingareas;
    this.finalgrade = finalgrade;
} 
```

然后：

```
var course1 = new Course("CS1500", gradingareas, 85); 
```

请注意使用大写字母来命名构造函数。这是 JS 社区的惯例。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-08-21T13:08:59.577

JS 是原型的，而不是基于类的，如果您不熟悉它，那么立即学习这一点而不是试图从中混合经典继承模型是有好处的，但是，经典继承在 JS 中仍然存在并且很好。

无论如何，回答你将如何访问你的变量：

`course1.name`适用于上面的示例。

如果您想私有化您的数据，您可以使用闭包来采用这种方法：

```
var Course = function(name, grade) {
  // Private data
  var private = {
    name: name,
    grade: grade
  }

  // Expose public API
  return {
    get: function( prop ) {
      if ( private.hasOwnProperty( prop ) ) {
        return private[ prop ];
      }
    }
  }
}; 
```

然后实例化一个新对象：

`var course = new Course('Programming with JavaScript', 'A');`

并开始使用所有私人数据：

`course.get('name');`

当然，您可能也希望 setter 操作该数据；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-10T12:23:34.760

您描述的代码执行以下操作：

```
// Declares a memory variable called course and stores and object in it
var course = new Object();

// Declares three variables
 var name;
 var gradingareas;
 var finalgrade; 
```

这些声明的变量不会自动连接到对象。如果您希望在对象上声明这些属性，您有 2 个选项：

1.  将它们声明为对象的**属性**
2.  在对象的**原型**上声明它们

* * *

**示例 1：将它们声明为对象的属性：**

```
// Declares a memory variable called course and stores and object in it
var course = new Object();

// Access or create new properties with . or [] operator
course.name = 'math';
course.gradingareas = 'muliple';
course['finalgrade'] = 'A'

console.log(course);
```

* * *

**示例 2：在原型上声明它们：**

```
// Create a constructor function
function Course (name, grade) {
  this.name = name;
  this.grade = grade;
}

// course is added on the prototype
Course.prototype.gradingareas = 'some gradingareas';

// the name and the grade are added on the object itself
var course = new Course ('willem', 10);

console.log(course);
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-09T13:13:37.967

要使用构造函数和默认值创建一个非常简单的对象，您可以执行以下示例：

```
//My object with constructor
var myObjectWithConstrutorFunction = {

    //construtor function with default values in constructor
    myConstrutor: function(Name = 'bob', Age = 18){
        this.Name = name;
        this.Age = age;
    }
};

// instance
var myInstance = new myObjectWithConstrutorFunction.myConstrutor();

// show on console
console.log('object with constructor function: ', myInstance);

// show properties 
console.log(myInstace.Name, myInstance.Age); 
```

PS：如果你正在创建一个外部类，那么创建一个与**类同名的****构造函数名称是一个很好的做法。**

# java - 正则表达式匹配具有 6 个或更多级别的 URL

> ID：15505406
> 
> 赞同：0
> 
> 时间：2013-03-19T16:41:35.933
> 
> 标签：java, regex, nutch

我正在尝试匹配具有 6 个或超过 6 个级别或子路径的 URL

```
http://www.domain.com/level1/level2/level3/level4/level5/level6/level7/level8/level9/level10/level11/level12.html 
```

我想出了一个表情

```
^http:\/\/([a-zA-Z\.-]*)\W(\b\w+\b) 
```

...匹配级别 1（[演示](http://rubular.com/r/JzIJjD7OUP)）

但是，当我尝试匹配具有六个或更多级别的 URL 时，它似乎不起作用。

```
^http:\/\/([a-zA-Z\.-]*)\W(\b\w+\b){6,} 
```

（[演示](http://rubular.com/r/ZFWSGXP23j)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:46:41.333

尝试以下操作：

```
^http:\/\/([a-zA-Z\.-]*)(\/[\w\.]+){6,} 
```

[http://rubular.com/r/QZlidUqheq](http://rubular.com/r/QZlidUqheq)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:09:25.373

我认为这就是你想要的：

```
^http://([a-zA-Z.-]+)/(?:[^/]+/){6,}.*$ 
```

这匹配六个或更多级别，这就是您在问题中所说的。但是，在问题的标题中，您将其表述为“超过六个”。如果那是您真正想要的，请将量词从 更改`{6,}`为`{7,}`。

附带说明一下，正斜杠 ( `/`) 在正则表达式中没有特殊含义，不需要转义。Rubular 强制您转义斜杠，因为它用作正则表达式分隔符。Nutch 使用 Java 的内置正则表达式，因此您应该使用具有相同风格的测试器，例如[这个](http://www.regexplanet.com/advanced/java/index.html).

# java - Java 面向对象 - 高级构造函数帮助 ? :\

> ID：15505409
> 
> 赞同：-2
> 
> 时间：2013-03-19T16:41:37.483
> 
> 标签：java, oop

有人可以检查我的代码并确定为什么我的取货功能不起作用。

-- 为这些程序的发生编写缺失的方法

*   狗鲍勃=新狗（5）；
*   System.out.println(bob);
*   bob.walk();
*   bob.walk();
*   bob.pickUp("网球");
*   System.out.println(bob);
*   bob.drop();
*   bob.bark();
*   System.out.println(bob);

-- 在我定义了 pickUp 方法的课堂上：

```
 public Head()
{

}

public void pickUp(String object)
{   
    this.object = object;
    System.out.println("Picked up "+object);
}

public String getObject()
{
    return object;
}

public void drop()
{
    System.out.println("Dropped "+object);
    object = null;
}

public void bark()
{
    System.out.println("WOOF!");
}

public String toString()
{
    return "Head is holding "+ object;
}
} 
```

- 我正在使用该方法的另一个类：

```
public class Dog
{
private int position;
private Leg hind1;
private Leg hind2;
private Leg front1;
private Leg front2;
private Head head = new Head();

//Constructor for Dog class
public Dog(int position)
{
    hind1 = new Leg(position-2);
    hind2 = new Leg(position-2);
    front1 = new Leg(position+2);
    front2 = new Leg(position+2);
}

public void walk()
{
    front1.step();
    front2.step();
    hind1.step();
    hind2.step();
    System.out.println("Pitter patter...");
}

public String toString()
{
    return "Head is holding " + head+", Leg at "+hind1.position+", Leg at "+ hind2.position+", Leg at "+front1.position+", Leg at "+front2.position;
}   

public void pickup()
{
    head.pickUp(head.object);
} 

public void drop()
{
    head.drop();
}

public void bark()
{
    head.bark();
} 
```

PS。head 是我制作的一个新对象，它属于 Head 类，这是第一个代码的来源。我目前正在尝试让第二个代码工作以显示头部拾取的拾取对象。

-编辑：即使我确实输入了一个字符串（例如head.pickUp（“ball”）；），当我尝试运行程序时它仍然显示“找不到符号-method.pickUp（java.lang.String）” .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:53:09.290

已编辑（第三次！）：既然您已经发布了代码，我已经确认我在下面的答案是正确的。Tl; dr - 您正在尝试在 head.object 设置之前使用它。您应该传递给 pickUp 的是一个字符串，它代表您要拾取的对象的名称。例如，head.pickUp("ball");

* * *

如果您能进一步澄清“不工作”的含义，这将有所帮助-但是，您在这里似乎遇到了一种先有鸡还是先有蛋的问题：

如果我没看错，您的代码看起来像这样吗？（在您的评论中包括整个班级可能会有所帮助）

```
public class Head {

   String object;

   public void pickUp(String object)
   {   
       this.object = object;
       System.out.println("Picked up "+object);
   }

}

public class SomeOtherClass {

   Head head = new Head();

   public void pickup()
   {
       head.pickUp(head.object);

   } 
} 
```

为清楚起见（再次）编辑 - 看起来您正在尝试使用拾取功能（SomeOtherClass 中的那个）来定义头部的对象属性。但是，通过使用 head.object 调用它，您假定已经定义了 head.object。您实际上在哪里设置要使用的字符串？

目前还不清楚您要在这里完成什么 - 但您可能想尝试 1) 在头类的构造函数中设置 head.object 。或 2) 使用 head.object 以外的字符串（尚未设置）调用 head.pickUp。- 对于初学者，尝试用“Hello World”替换 head.object。或者，如果我完全误解了你的意图，也许给我们更多的背景信息？

已编辑 - 因为我意识到您的拾取功能不在 Head 中。

# jquery - 如何阻止 JQuery Animate 函数移动整个页面

> ID：15505423
> 
> 赞同：0
> 
> 时间：2013-03-19T16:42:18.740
> 
> 标签：jquery, css, html, scroll, jquery-animate

我无法让动画函数仅移动指定的 DIV。相反，它会移动整个页面。如果您单击下面链接上的“RSVP”，您可以看到我在说什么。我尝试将其切换为仅调用某些 ID（即 .wrap 与 #header），但它没有做任何事情。你如何让它只为标题设置动画而不滚动其他任何东西？

这是我的代码。还有更多，但我只包括了具有淡入淡出/滚动属性的 JQuery：

```
 $.ajax({
    type: "POST",
    url: "http://mktietheknot.com/wp-content/themes/Retro/rsvp-process.php",
    data: dataString,
    dataType: "json",
    success: function(data) {
      if ( data.status == 'pass' ) {
        $('#rsvp-form').fadeOut(function(){

          $('#rsvp-form').html('<div class="rsvp-received">' +data.response+ '</div>').fadeIn(1000);

        });

        myTimer = $.timer(2500,function(){

          $('#rsvp .rsvp-link').click();

        });

      }
      else {

        $('#rsvp-form').append('<div class="error">' +data.response+ '</div>');
        $('#rsvp .submit').fadeIn('500');
        console.debug(data);

      }
    }
  });

  return false;            

  });
});

  $('#nav-rsvp a').unbind();
$('#nav-rsvp a, .rsvp-link').click(function(){
  if ( $('.wrap').hasClass('open') ) {
  $('.wrap').animate({
  top: '-=115'
  }, 750, 'easeInOutCubic');
  $('.wrap').removeClass('open');
  } 
  else {
  $('.wrap').animate({
  top: '+=115'
  }, 750, 'easeInOutCubic');
  $('.wrap').addClass('open'); 
}
return false;
});

})(jQuery); 
```

这是他对 CSS 的赞美：

```
/* === Header Section === */
#header {
background:url(wp-content/themes/Retro/images/structure/body_bg.png) repeat-x scroll center bottom transparent;
padding: 0 0 13px;
position:fixed;
width: 100%;
z-index: 100;
}
#header .section_inn {
padding-top: 0;
background:url(http://mktietheknot.com/wp-content/themes/Retro/images/structure/body_bg_brown.png) repeat-x;
width: 100%;
height: 130px;
z-index: 1000;
}
#header .wrap {
background: none repeat scroll 0 0 transparent;
width: auto;
top:-115px;
} 
```

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:31:38.877

我偶然发现了修复程序。我的 JQuery 文件从我之前的问题中有一个工作负载。见[（我以前的问题）](https://stackoverflow.com/questions/15488267/cant-get-hidden-div-to-appear-using-jquery)。但是，当我弄乱 wordpress 主题附带的默认 jquery 文件时，我发现它们的 onload 有点不同。我试着改变它只是为了踢球，它修复了它。不知道为什么，但确实如此。

修复程序更改`(function($){})(jQuery);`为

`jQuery.noConflict();`
`jQuery( document ).ready( function( $ ) {} );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:34:34.560

尝试为#header 上的顶部样式设置动画。它需要动画到

```
#header {top:115px} 
```

# visual-studio-2010 - 创建批处理文件以打开 Visual Studio 命令提示符？

> ID：15505426
> 
> 赞同：0
> 
> 时间：2013-03-19T16:42:22.453
> 
> 标签：visual-studio-2010, command-line, msbuild

我已经尝试过这样的事情但没有奏效：

```
@echo off
call "c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC"
mstest /testcontainer: mytest.dll 
```

另存为 .bat 文件，当我双击它时，它什么也不做。

因此，我正在尝试打开位于 Visual Studio 中的命令提示符并执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:51:53.613

您的批处理文件在那里似乎有点变形。我不是专家，但你有：

```
call "C:\Program Files\Microsoft Visual Studio 2008\VC\" 
```

...但没有批处理文件名。 [有关信息，请参阅此](http://www.robvanderwoude.com/call.php)。

如果`mstest`是您的批处理文件名，那么调用应该更像：

```
call "C:\Program Files\Microsoft Visual Studio 2008\VC\mstest.bat " <arguments> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:57:02.597

您是否尝试将目录更改为`"c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC"`?

尝试这个：

```
@echo off
CD "c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC"
mstest /testcontainer: mytest.dll
PAUSE 
```

# c# - 从 asp.net 控件继承：如何添加具有 ViewState 支持的自定义属性

> ID：15505427
> 
> 赞同：1
> 
> 时间：2013-03-19T16:42:24.813
> 
> 标签：c#, asp.net, viewstate, custom-server-controls

我有一个继承自 LinkBut​​ton 的 ASP.NET 自定义服务器控件。它添加了一个自定义属性，该属性在客户端正确显示为锚标记内的 data-attribute="value" 。到目前为止，一切都很好。

现在我想在客户端修改该数据属性的值，并让服务器控件看到它的变化。但是，尽管我将服务器值保留在 ViewState 中，但我不知道如何告诉 ASP.NET 从客户端加载回值。

[这是一个](http://msdn.microsoft.com/en-us/library/1whwt1k7%28v=vs.100%29.aspx)可能对 ControlState 执行此操作的示例，但我真的很想使用 ViewState，而且我认为这应该很容易，只要我知道如何...

我必须做些什么才能让 ASP.NET 在 ViewState 中跨回发维护该属性值？

# php - 使用 PHP 和 mySQL 从 Web 搜索创建可下载的 CSV

> ID：15505430
> 
> 赞同：2
> 
> 时间：2013-03-19T16:42:29.893
> 
> 标签：php, mysql, export-to-csv

我正在尝试创建一个可以由用户下载的 CSV 文件，并且没有将数据永久保存在服务器上。

我在这个页面上使用了 mySQL 和 PHP。我以正确的格式获取数据以在网页上显示（“回显”），但无法生成/下载文件......也许我遗漏了一些东西或在错误的地方寻找，但任何帮助都会很棒！

我一直在尝试我自己的和我发现的其他脚本，但我目前拥有的脚本如下：

```
$file = 'export';
$colresult = mysql_query("SHOW COLUMNS FROM ".$tbl_name.""); 

if (mysql_num_rows($colresult) > 0) {  
while ($row = mysql_fetch_assoc($colresult)){   
$csv_output .= $row['Field'].", ";   $i++;  } } $csv_output .= "\n";   

$csvresult = mysql_query($sql); 

while ($rowr = mysql_fetch_row($csvresult)) {  
for ($j=0;$j<$i;$j++) {   $csv_output .= $rowr[$j].", ";  
}  

$csv_output .= "\n"; }   
$filename = $file."_".date("Y-m-d_H-i",time()).".csv"; 
header("Content-type: application/csv"); 
header("Content-disposition: attachment;filename=".$filename.".csv"); 
readfile("../documents/csv/".$filename.".csv");

$fp = fopen($filename, 'w');
foreach($csvret as $csvret){
fputcsv($fp, $csvret);
}

print $csv_output; 
print $filename; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:45:56.010

您需要传递一些标头以强制 Web 浏览器将文件识别为“可下载”：

```
<?php

header('Content-Description: File Transfer');
header("Content-Type: application/csv"); 
header('Content-Disposition: attachment; filename="'.basename($filename).'"');
header('Content-Transfer-Encoding: binary');
header('Connection: Keep-Alive');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($filename));

readfile($filename);
exit; 
```

只需添加该代码代替：

```
print $csv_output; 
print $filename; 
```

# ios - intellij application verification error while using the same .p12 and provisioning that I used on flash builder what can I do?

> ID：15505432
> 
> 赞同：1
> 
> 时间：2013-03-19T16:42:31.657
> 
> 标签：ios, actionscript-3, mobile, intellij-idea, starling-framework

Im quite sorry for the long tittle, I've been stuck with that for a while now, we started using flash builder for some mobile applications, so i got the mobile.provisioning file and the .p12 certificate, it works perfectly on flash builder, but now we moved to this new sw and some things need to be set differently. apparently I'm not setting it right on intellij or am I missing something else? I looked for this and I only get solutions for Xcode

Im setting those at project settings - modules -ios the .p12 as keystore certificate

Also I've tried running the application on simulator and works fine

thanks for your attention Kind Regards JFB

# javascript - How can I make node wait? or perhaps a different solution?

> ID：15505438
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:42:49.690
> 
> 标签：javascript, node.js

I am using [https://github.com/gpittarelli/node-ssq](https://github.com/gpittarelli/node-ssq) to query of a bunch of TF2 game servers to find out if they are on, and if so, how many players are inside. Once I find a server that is on and has less than 6 players in it, I want to use that server's Database ID to insert into somewhere else.

Code looks like this:

```
for (var i = 0;i < servers.length;i++) {

                ssq.info(""+servers[i].ip, servers[i].port, function (err, data) {

                    serverData = deepCopy(data);
                    serverError = deepCopy(err);
                });

                if (!serverError) {

                    if (serverData.numplayers < 6){
                        //its ok
                        currentServer = servers[i].id;
                        i = 99999;
                    }
                }
                else {
                    if (i == servers.length-1){
                        currentServer = 666;
                    }
                }

            } 
```

And then right after I insert into database with [https://github.com/felixge/node-mysql](https://github.com/felixge/node-mysql) . If I put a console.log(serverData) in there, the info will show up in the console AFTER it inserted into the DB and did a couple other stuff.

So how do I "stop" node, or should I be looking at this / doing this differently?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:58:21.817

**更新：**

一个简单的解决方案是将您的`if`语句移动到回调函数中：

```
for (var i = 0;i < servers.length;i++) {
  ssq.info(""+servers[i].ip, servers[i].port, function (err, data) {

      serverData = deepCopy(data);
      serverError = deepCopy(err);

      // moving inside the function, so we have access to defined serverData and serverError
      if (!serverError) {

          if (serverData.numplayers < 6){
              //its ok
              currentServer = servers[i].id;
              i = 99999;
              /* add an additional function here, if necessary */
          }
      }
      else {
          if (i == servers.length-1){
              currentServer = 666;
              /* add an additional function here, if necessary */
          }
      }
  });
  // serverData and serverError are undefined outside of the function
  // because node executes these lines without waiting to see if ``ssq.info`` 
  // has finished. 
} 
```

回调中的任何其他函数`ssq.info`都可以访问该函数中定义的变量。嵌套太多匿名函数时要小心。

**原始（nodesque）答案** 如果`ssq.info`是一个异步函数（看起来是这样），Node 将立即执行它并继续前进，仅在`ssq.info`完成后处理回调函数（您作为最后一个参数传递）。这就是为什么您的`console.log`语句将立即执行的原因。这是节点异步性质的美丽/恐怖：）

您可以使用`setTimeout`让 Node 等待，但这会阻碍服务器上的**所有**其他进程。

在我看来，更好的解决方案是利用 Node 的[Event Emiters](http://nodejs.org/api/events.html)来：

1.  监视事件（在这种情况下，当玩家离开服务器时）
2.  检查玩家人数是否小于6
3.  如果是这样，请执行您的查询函数（使用回调）

一个很好的入门知识是： [Mixu 的 Node Book - Control Flow](http://book.mixu.net/ch7.html)。另外，请参阅[此](https://stackoverflow.com/a/6898978/1048479)SO 帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:49:12.677

你应该使用回调，

```
connection.query('INSERT INTO table', function(err, rows, fields) {
  if (err) throw err;
     //entry should be inserted here.

}); 
```

[http://www.sequelizejs.com/](http://www.sequelizejs.com/)库也更成熟一些，它可能是 node-mysql 的实现问题

# php - 将 Highchart 转换为多个 y 轴

> ID：15505444
> 
> 赞同：1
> 
> 时间：2013-03-19T16:43:01.423
> 
> 标签：php, javascript, jquery, highcharts, highstock

我有一个使用 Highcharts 和来自 mySQL 数据库的数据的工作图。我现在需要它来查看不同轴上的线条，以便更好地布置图表。

这是包含我的数据的图表的代码和 JSFiddle：

[http://jsfiddle.net/petenaylor/tGfau/3/](http://jsfiddle.net/petenaylor/tGfau/3/)

```
(function($){ // encapsulate jQuery

$(function() {
var seriesOptions = [],
    yAxisOptions = [],
    seriesCounter = 0,
    names = ['Electric', 'Oil', 'Gas'],
    colors = Highcharts.getOptions().colors;

$.each(names, function(i, name) {

    $(function() {

$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function(data) {
    // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container',
            zoomType: 'x'
        },

        rangeSelector : {
            selected : 12
        },

        title : {
            text : 'Energy Prices'
        },

        series : [{
            name : 'Electric',

            <?php 
            $result = mysql_query (" SELECT * FROM energyprices ORDER BY id ASC") or die (mysql_error());
            while ($row = mysql_fetch_array($result)) {
            extract($row);
            $date = strtotime($row['pDate']);
            $date = $date."000"; // convert from Unix timestamp to JavaScript time
            $data1[] = "[$date, $electric]";
            }
            ?>

            data: [<?php echo join($data1, ',') ?>],
            tooltip: {
                valueDecimals: 2
            }
        },{
            name : 'Oil',

            <?php 
            $result = mysql_query (" SELECT * FROM energyprices ORDER BY id ASC") or die (mysql_error());
            while ($row = mysql_fetch_array($result)) {
            extract($row);
            $date = strtotime($row['pDate']);
            $date = $date."000"; // convert from Unix timestamp to JavaScript time
            $data2[] = "[$date, $oil]";
            }
            ?>

            data: [<?php echo join($data2, ',') ?>],
            tooltip: {
                valueDecimals: 2
            }
        },{
            name : 'Gas',

            <?php 
            $result = mysql_query (" SELECT * FROM energyprices ORDER BY id ASC") or die (mysql_error());
            while ($row = mysql_fetch_array($result)) {
            extract($row);
            $date = strtotime($row['pDate']);
            $date = $date."000"; // convert from Unix timestamp to JavaScript time
            $data3[] = "[$date, $gas]";
            }
            ?>

            data: [<?php echo join($data3, ',') ?>],
            tooltip: {
                valueDecimals: 2
            }
        }]
    });
});

});

});

// create the chart when all data is loaded
function createChart() {

    chart = new Highcharts.StockChart({
        chart: {
            renderTo: 'container'
        },

        rangeSelector: {
            selected: 4
        },

        /*yAxis: {
            labels: {
                formatter: function() {
                    return (this.value > 0 ? '+' : '') + this.value + '%';
                }
            },

            plotLines: [{
                value: 0,
                width: 2,
                color: 'silver'
            }]
        },*/

        yAxis: [{ // Primary yAxis
            labels: {
                formatter: function() {
                    return (this.value > 0 ? '+' : '') + this.value + '%';
                },
                style: {
                    color: '#89A54E'
                }
            },
            title: {
                text: 'Electric',
                style: {
                    color: '#89A54E'
                }
            },
            opposite: true

        }, { // Secondary yAxis
            gridLineWidth: 0,
            title: {
                text: 'Oil',
                style: {
                    color: '#4572A7'
                }
            },
            labels: {
                formatter: function() {
                    return this.value;
                },
                style: {
                    color: '#4572A7'
                }
            }

        }, { // Tertiary yAxis
            gridLineWidth: 0,
            title: {
                text: 'Gas',
                style: {
                    color: '#AA4643'
                }
            },
            labels: {
                formatter: function() {
                    return this.value;
                },
                style: {
                    color: '#AA4643'
                }
            },
            opposite: true
        }],

        plotOptions: {
            series: {
                compare: 'percent'
            }
        },

        tooltip: {
            pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
            valueDecimals: 2
        },

        series: seriesOptions
    });
}

});
})(jQuery); 
```

正如您所看到的那样，它应该可以正常工作，但是，我需要它像下面的示例一样运行。重要的是我有 y 轴显示值并且缩放必须有效。我试图用我自己的数据调整下面的代码，但我得到了问题无响应的脚本。我认为我的数据可能太多，图表无法处理。

[http://jsfiddle.net/petenaylor/c73u5/5/](http://jsfiddle.net/petenaylor/c73u5/5/)

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            zoomType: 'xy'
        },
        title: {
            text: 'Average Monthly Weather Data for Tokyo'
        },
        subtitle: {
            text: 'Source: WorldClimate.com'
        },
        xAxis: [{
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        }],
        yAxis: [{ // Primary yAxis
            labels: {
                formatter: function() {
                    return this.value +'°C';
                },
                style: {
                    color: '#89A54E'
                }
            },
            title: {
                text: 'Temperature',
                style: {
                    color: '#89A54E'
                }
            },
            opposite: true

        }, { // Secondary yAxis
            gridLineWidth: 0,
            title: {
                text: 'Rainfall',
                style: {
                    color: '#4572A7'
                }
            },
            labels: {
                formatter: function() {
                    return this.value +' mm';
                },
                style: {
                    color: '#4572A7'
                }
            }

        }, { // Tertiary yAxis
            gridLineWidth: 0,
            title: {
                text: 'Sea-Level Pressure',
                style: {
                    color: '#AA4643'
                }
            },
            labels: {
                formatter: function() {
                    return this.value +' mb';
                },
                style: {
                    color: '#AA4643'
                }
            },
            opposite: true
        }],
        tooltip: {
            formatter: function() {
                var unit = {
                    'Rainfall': 'mm',
                    'Temperature': '°C',
                    'Sea-Level Pressure': 'mb'
                }[this.series.name];

                return ''+
                    this.x +': '+ this.y +' '+ unit;
            }
        },
        legend: {
            layout: 'vertical',
            align: 'left',
            x: 120,
            verticalAlign: 'top',
            y: 80,
            floating: true,
            backgroundColor: '#FFFFFF'
        },
        series: [{
            name: 'Rainfall',
            color: '#4572A7',
            type: 'column',
            yAxis: 1,
            data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]

        }, {
            name: 'Sea-Level Pressure',
            type: 'spline',
            color: '#AA4643',
            yAxis: 2,
            data: [1016, 1016, 1015.9, 1015.5, 1012.3, 1009.5, 1009.6, 1010.2, 1013.1, 1016.9, 1018.2, 1016.7],
            marker: {
                enabled: false
            },
            dashStyle: 'shortdot'

        }, {
            name: 'Temperature',
            color: '#89A54E',
            type: 'spline',
            data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
        }]
    });
});

}); 
```

任何人都可以帮忙吗？

非常感谢

皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:06:31.537

我认为这就是你想要的：http: [//jsfiddle.net/mxrhS/](http://jsfiddle.net/mxrhS/)

我通过定义 3 个 yaxis 来做到这一点，然后将每个系列设置为使用不同的 yaxis：

```
yAxis:[{opposite:false},{opposite:true},{opposite:true,offset:50}], 
```

和

```
series: [{
                        name: 'Electric',
                        yAxis:0, 
```

# java - Android questionnaire app: Setting up a scoring system for users answers and using this to represent an outcome

> ID：15505450
> 
> 赞同：1
> 
> 时间：2013-03-19T16:43:18.237
> 
> 标签：java, android, eclipse

I have created the bases for an Android app that asks a user a set of questions; linked to diabetes symptoms,and produces a diabetic status based on the user's answers. However I am having trouble with creating a point system to produce the diabetic states.

The app asks 11 questions (on separate activities) that only 7 are relevant to diabetic symptoms. Each question's answers are within a RadioGroup and I have managed to produce a toast to show which has been selected (my own testing use). I would like to give each RadioButton (answer) a number value so that for instance if a user scores above 10 then they are diabetic. Can anyone help??

RadioGroup sample code within one of the activity's .java file:

```
final RadioGroup radioDQ1Group = (RadioGroup) findViewById(R.id.radioDQ1Group1);
    Button btnNext = (Button) findViewById(R.id.btnNext1);
    btnNext.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            startActivity(new Intent(Diabetes_Question_1.this, Diabetes_Question_3.class));

            // get selected radio button from radioGroup
            int selectedId = radioDQ1Group.getCheckedRadioButtonId();

            // find the radio button by returned id
            RadioButton radioDQ1Button = (RadioButton) findViewById(selectedId);

            Toast.makeText(Diabetes_Question_1.this, radioDQ1Button.getText(), Toast.LENGTH_SHORT).show();
}
    }); 
```

I would like each activity's score to be sent to the next activity or saved globally within the app so that once a 'Calculate' button is pressed the app will total the score and show the user another activity stating their potential diabetic states. Can anyone help ASAP as my deadline is tight?? Any help will be greatly appreciated!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:46:11.013

一种选择是将分数保存在 SharedPreferences 变量中。当您计算时，您可以从中读取。

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

选项 2：

我猜在每个活动中，您都在单击按钮时调用 nextActivity，因此在 startNextActivity 的意图中，您可以传递分数。

# css - Safari（移动 + 桌面）分组 CSS 关键帧动画

> ID：15505456
> 
> 赞同：1
> 
> 时间：2013-03-19T16:43:28.523
> 
> 标签：css, safari, transform, css-transitions, webkit-transform

我在使用 Safari 创建模拟漂浮在空中的气泡的效果时遇到问题，除了羽毛。我省略了一些代码来了解事情的要点。正在进行的工作的 url 在[这里](http://poetreatapp.com)。

这是我的动画对象的 webkit 样式。

```
@-webkit-keyframes f1 {
  100% {
    -webkit-transform: translateX(-25px) translateY(-350px); 
  } 
}

.feather {
  /* other styling omitted */
  -webkit-animation-duration: 7s;
  -webkit-animation-timing-function: linear;
} 
```

以及创建一堆对象的javascript。

```
animateFeathers = function() {
    var $feather = $('<img>'),
    $feather.addClass('feather animated');
    $feather.attr('src','img/feather.png');
    $feather.css('-webkit-animation-name','f1');
    $featherContainer.append($feather);

    setTimeout(function() {
        $feather.remove();
    }, 9000);

    // random time to create next feather
    var rTimeout = Math.random() * maxTime + minTime;
    setTimeout(animateFeathers, rTimeout);
} 
```

如果您在 Chrome 或 Firefox 中访问该[链接](http://poetreatapp.com)，您将看到预期的效果。然而，在 Safari（同样是移动设备或桌面）中，羽毛会堆叠，并且每 7 秒才会在一组中进行动画处理。我希望它们在插入 DOM 后立即开始动画。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:41:26.600

不得不求助于使用画布，因为我真的无法在 Safari 上获得性能。花了好几个小时，但它的工作：

[http://poetreatapp.com/](http://poetreatapp.com/)

# bash - 将 0 参数（默认为可执行文件名）传递给被调用程序

> ID：15505461
> 
> 赞同：1
> 
> 时间：2013-03-19T16:43:35.493
> 
> 标签：bash

默认情况下，bash 在调用程序时将可执行文件名作为第一个（更准确地说是 0）参数传递

调用程序是否有任何特殊形式可用于传递 0 参数？

它对于根据调用位置以不同方式运行的程序非常有用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:54:20.513

我认为设置参数 0 的唯一方法是更改​​可执行文件的名称。例如：

```
$ echo 'echo $0' > foo.sh
$ ln foo.sh bar.sh
$ sh foo.sh
foo.sh
$ sh bar.sh
bar.sh 
```

一些 shell 对命令具有非 POSIX 扩展`exec`，允许您指定备用值：

```
$ exec -a specialshell bash
$ echo $0
specialshell 
```

除了在子shell中运行之外，我不知道有类似的技术可以像这样更改子进程的名称

```
$ ( exec -a subshell-bash bash ) 
```

更新：三秒钟后，我在[http://cr.yp.to/ucspi-tcp/argv0.html](http://cr.yp.to/ucspi-tcp/argv0.html)`argv0`找到了该命令。

# html - 将 a 与 a 内的另一个重叠 我有一个如下所示的表格。

| + | - |
| + | - |

我希望只有选定td的内容可见。我的限制是只能通过CSS. 我无法更改HTML或注入某种JavaScript. 这是我想出的： 将所选td内容置于另一个之上 展开所选td以“取代”另一个 隐藏未选中的td 不幸的是，这些想法我都没有成功，所以你们知道如何实现这一目标吗？ 这是一个可以玩的 jsfiddle：http: //jsfiddle.net/u6n7r/6/ 我会对跨浏览器解决方案感到满意，但 IE9 支持是强制性的。 只需隐藏with display: none： td:not(.selected) { display: none; } 这是您的小提琴的更新 htmlcss 4 2 回答 2 This answer is useful 2 只需隐藏with display: none： td:not(.selected) { display: none; } 这是您的小提琴的更新 于 2013-03-19T16:45:34.430 回答 This answer is useful 0 相对放置表格。定位 td 的绝对值，top:0 和 left:0。给 td 的 z-index 为 10。给 .selected 的 z-index 为 11。 .selected { background-color: green; z-index: 11; } .plus { } .minus { } td { width: 30px; height: 30px; border: 3px solid red; background-color: silver; position: absolute; top: 0; left: 0; z-index: 10; } table { border: 3px solid blue; width: 72px; height: 36px; position: relative; } 于 2013-03-19T16:47:57.263 回答 Related 2 codeigniter - Codeigniter - 创建链接“查看全部”分页 1 objective-c - OSX - 使用多个表格视图 - 如何检查单元格越界 2 c# - (C#) 从“long recordingId = Calendar.getInstance().getTimeInMillis();”返回时间戳 1 .net - 查看来自 wcf 服务的响应 2 database - 大型站点如何在多台服务器上存储数据？ 2 php - 美元（$）登录表单输入字符串在php中被视为变量 1 android - Android ProgressBar 未更新 onProgress 1 r - levelplot：如何调整比例级别（at）和比例标签（标签） 1 cakephp - file_put_contents Cakephp 错误 + 致命错误：允许的内存大小 1 node.js - 全局命名空间中的 Yeoman 生成器函数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15505462
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, css

我有一个如下所示的表格。

```
<table>
    <tr>
        <td class="selected plus"><a>+</a></td>
        <td><a class="minus">-</a></td>
    </tr>
</table> 
```

我希望只有选定`td`的内容可见。我的限制是只能通过`CSS`. 我无法更改`HTML`或注入某种`JavaScript`.

这是我想出的：

*   将所选`td`内容置于另一个之上
*   展开所选`td`以“取代”另一个
*   隐藏未选中的`td`

不幸的是，这些想法我都没有成功，所以你们知道如何实现这一目标吗？

这是一个可以玩的 jsfiddle：http: [//jsfiddle.net/u6n7r/6/](http://jsfiddle.net/u6n7r/6/)

我会对跨浏览器解决方案感到满意，但 IE9 支持是强制性的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:45:34.430

只需隐藏`<td/>`with `display: none`：

```
td:not(.selected) { display: none; } 
```

这是[您的小提琴的更新](http://jsfiddle.net/u6n7r/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:47:57.263

相对放置表格。定位 td 的绝对值，top:0 和 left:0。给 td 的 z-index 为 10。给 .selected 的 z-index 为 11。

```
.selected {
    background-color: green;
    z-index: 11;
}

.plus {

}

.minus {

}

td {
    width: 30px;
    height: 30px;
    border: 3px solid red;
    background-color: silver;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 10;
}
table {
    border: 3px solid blue;
    width: 72px;
    height: 36px;
    position: relative;
} 
```

# jquery - using .get to add html before adding to DOM

> ID：15505472
> 
> 赞同：0
> 
> 时间：2013-03-19T16:44:10.317
> 
> 标签：jquery, dom

I am looping through JSON results to build a page before adding it the the DOM

Depending on what is in the looped results I may want to add the contents of another file but its not adding. I'm trying it in a logical way but often not right!

To test, the file `addme.php` contains one line which is `html += 'hello';`

```
var html = '';
var i=0, length=data.length, image;

for(; i<length; i++) {

image = data[i]; 

html += '<li>';
html += '<div id="holder'+image.itemID+'">';

if(image.comment){

$.get('/pages/includes/addme.php', { list_id:+image.list_id });

}

html += '<div class="row">'+image.comment+'</div>';
html += '</div>';
html += '</li>';

}
$('#display').append(html); 
```

Can this be done? I know I can't use append as its not actually in the DOM yet at the point it needs adding

# javascript - Dojo 是否允许更改 dom id 或 widgetid？

> ID：15505478
> 
> 赞同：0
> 
> 时间：2013-03-19T16:44:29.187
> 
> 标签：javascript, dojo

我有一个 dojo 组件列表，现在希望允许用户删除其中的任何一个。但这提出了一个挑战，即随着链上的一个节点被破坏，数组序列被破坏。所以我想我必须手动重新分配每个节点（在删除节点之后）id和小部件id。

前：

节点 1 | 节点 2 | 节点 3 |....| 节点 n |

删除后：

节点 1 | ***_* __ *_* ___** | 节点 3 |....| 节点 n |

重新分配后：

节点 1 | 节点 2 | 节点 3 |....| 节点 n-1 |

但似乎这些代码行不起作用：

```
dojo.setAttr(denomNode, "id", 'widget__record['+ index +'].id');
dojo.setAttr(denomNode, "widgetid", '_record['+ index +'].id'); 
```

那么dojo可以允许在运行时手动更改id和widegetid吗？如果不是，这种情况的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:44:40.150

我的建议是隐藏节点，这样用户就看不到它，并有一个隐藏字段来跟踪已删除的条目，并以逗号分隔的 id 列表。在服务器端，您可以遍历数组并确保在处理值之前没有删除每个条目。

# mysql - 在数据库中存储特定的日期时间格式

> ID：15505484
> 
> 赞同：1
> 
> 时间：2013-03-19T16:44:47.493
> 
> 标签：mysql, sql, database, datetime, solr

这是 SOLR 要求的日期时间格式：

```
1995-12-31T23:59:59Z 
```

当我尝试将其存储为 MySQL 中的日期时间字段时，它说它无效。我的问题是，理想情况下，我想在我的数据库中保留一个日期时间，这样我就可以按日期排序，而不仅仅是将其设为 varchar。在我的情况下如何最好地做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T17:00:10.103

它需要看起来像 '1995-12-31 23:59:59' 才能作为 DATETIME 字段存储在数据库中而不会引发错误。

如果您需要以您呈现的形式将其从数据库中提取出来，您可以随时执行以下操作：

```
select DATE_FORMAT(timestamp_field,'%Y-%m-%dT%TZ') as solrDate from table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:50:22.067

您可以使用 DATETIME 数据类型。DATETIME 类型用于同时包含日期和时间部分的值。MySQL 以 'YYYY-MM-DD HH:MM:SS' 格式检索和显示 DATETIME 值。支持的范围是“1000-01-01 00:00:00”到“9999-12-31 23:59:59”。

请参阅这篇文章：[DATE、TIME、DATETIME、TIMESTAMP 数据类型](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)

# c++ - 多次使用循环连续输入字符，如字符串

> ID：15505486
> 
> 赞同：1
> 
> 时间：2013-03-19T16:44:49.783
> 
> 标签：c++

在下面的代码中，我是否有可能接受多个输入，进行一些计算（如最后一个字符）并在最后打印..然后再次输入直到 5 次？

```
#include <iostream>
using namespace std;
int main ()
{
    char name;
    int i=0;
    while(i != 5){

        while(!(name != '<' || name != '>')){
            cin>>name;
            //do some calculation with the inputs
            //cout<<name;
        }
        i++;
        cout<<name;
        //print the result of calculation this loop
    }
} 
```

出于某种原因，我不允许使用`string`, or `array`, or `break`, 以及除`iostream`. 是否可以使用循环？什么是替代品？

**编辑::**在上面的代码中，我想确定最后输入的内容。如果我输入`asdf>`然后我得到`>>>>>`。我希望它打印`>`并返回循环并要求我再拍一张。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:53:54.943

解决方案是在此行之前重置名称变量：

```
while (!(name != '<' || name != '>')) { 
```

你需要做的是：

```
name = 0; 
```

另外，我建议在进入第一个 while 循环之前初始化变量。

编辑：或者，您可以使用`'\0'`而不是 `0`. 不过内部没什么区别。该代码只会对大多数没有经验的用户更有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:54:31.850

在内部`while`终止之后`name`保持`<`or`>`并且在下次遇到内部之前不重置，内部`while`立即终止，`name`仍然是`<`or `>`。`name`只需在内部`while`或轻微重组之前重置：

```
while (cin >> name && !(name != '<' || name != '>'))
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:51:06.633

看起来你想要一个指向字符的指针。这将表现得就像一个数组，实际上并不是一个数组，并且只需要`#include <iostream>`输入和输出。

```
char* name; 
```

您也可以尝试使用字符向量，但这是很长的路要走，并且会打破“只有`<iostream>`规则：

```
#include <vector>
#include <iostream>

using namespace std;

vector<char> CharVec;
vector<char>::iterator it;

int main ()
{
    char input;
    int i=0;
    while(i != 5){
        if(input != '<'){ //this should be if, not while
            CharVec.push_back(input);
        }
        i++;
    }
    //move print to outside the character entering loop
    it = CharVec.begin();
    while(it != CharVec.end())
    {
        cout << *it;
        it++;
    } 
```

}

# yii - 动态创建显示不同数据的 CGridView

> ID：15505491
> 
> 赞同：1
> 
> 时间：2013-03-19T16:45:24.167
> 
> 标签：yii, cgridview

我是 Yii 的新手，我很难弄清楚这一点。我想根据用户选择的选项在页面上显示多个 CGridView，每个 gridview 只显示该选项的记录。在这种情况下，选项是作业状态，例如打开、关闭、进行中等。

我有一些代码可以通过遍历数组来显示多个网格视图，但我不确定如何过滤它们：

```
$test = array(1,2,3,4,5);

foreach ($test as $value) {

$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'job-grid',
    'dataProvider'=>$model->search(),   
    'columns'=>array(
        'ID',
        'CustomerCompany',
        'FirstName',
        'LastName',
        /* etc */
    ),
));

} 
```

关于如何从数组中的值过滤每个 gridview 的任何想法？

谢谢！

更新

好的，我想出了如何做我想做的事情。我在控制器中处理它是这样的：

```
public function actionBoard()
{
    $models = array();

    $statuses = JobStatus::model()->findAll();
    foreach ($statuses as $status)
    {
    $model=new Job('search');
    $model->unsetAttributes();  // clear any default values

    if(isset($_GET['Job']))
        $model->attributes=$_GET['Job'];
        $model->Status = $status->ID;
        $models[$status->Status] = $model;
    }

    $this->render('board',array('models'=>$models));
} 
```

所以我找到所有状态，然后使用 ID 字段进行搜索，将结果放入数组中，然后将其传递给视图。我在视图中这样处理：

```
foreach ($models as $status)
{

$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'job-grid',
    'dataProvider'=>$status->search(),
    'columns'=>array(
        'ID',
        'CustomerCompany',
        'FirstName',
        'LastName',
        'Phone1',
        'Phone2',
        /* etc */
    ),
)); 
```

基本上，为“状态”数组中的每个“状态”创建一个网格视图。似乎可行，只是花了一些时间用 MVC 术语而不是我习惯的旧 ASP.NET 数据绑定方法来考虑它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:09:17.347

你要求不同的 CGridViews，所以这里是：

进入你的模型。

现在，您需要编写一些新的 search() 方法。

在每种方法中，您将指定所需的值，例如以下两种方法：

```
public function searchA() {
// Warning: Please modify the following code to remove attributes that
// should not be searched.

        $criteria = new CDbCriteria;

        $criteria->compare('id', $this->id);
        $criteria->compare('email', $this->email, true);
        $criteria->compare('password', $this->password);
        $criteria->compare('created', $this->created);
        $criteria->compare('lastmodified', $this->lastmodified);
        $criteria->compare('confirmed', $this->confirmed);
        $criteria->compare('is_human', 1);// this is a human

        return new CActiveDataProvider($this, array(
            'criteria' => $criteria,
        ));
    }

    public function searchB() {

        $criteria = new CDbCriteria;

        $criteria->compare('id', $this->id);
        $criteria->compare('email', $this->email, true);
        $criteria->compare('password', $this->password);
        $criteria->compare('created', $this->created);
        $criteria->compare('lastmodified', $this->lastmodified);
        $criteria->compare('confirmed', $this->confirmed);
        $criteria->compare('is_human', 0);//this is not a human, maybe a donkey ... who knows
        $criteria->compare('username', $this->username, true);

        return new CActiveDataProvider($this, array(
            'criteria' => $criteria,
        ));
    } 
```

现在您有了搜索方法，为每个 cgridview 使用所需的搜索方法

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'job-grid',
    'dataProvider'=>$model->searchA(),   
    'columns'=>array(
        'ID',
        'CustomerCompany',
        'FirstName',
        'LastName',
        /* etc */
    ),
));

$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'job-grid2',
    'dataProvider'=>$model->searchB(),   
    'columns'=>array(
        'ID',
        'CustomerCompany',
        'FirstName',
        'LastName',
        /* etc */
    ),
)); 
```

简单的

ps：作为一个技巧，您可能想要使用常量，例如：

```
const CONSTA = 1;
const CONSTB = 2; 
```

然后在模型中使用：

```
self::CONSTA 
```

或在模型之外为：

```
ModelName::CONSTA 
```

通过使用 const，如果您的值随时间变化，您不必修改整个代码，也不必在整个项目中查看这些值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T20:56:04.020

您应该从问题的数据部分开始：首先尝试创建几个返回所需结果的数据提供者。如果您使用**Gii**自动生成一些模型，您可以查看`search()`那里的方法以查看如何创建具有不同查询条件的此类提供程序的示例。您应该尝试将此代码保存在某个模型中。例如，您可以创建一个`searchByStatus($status)`方法，该方法返回给定状态的数据提供者。

然后在控制器中，您可以从此方法中获取多个数据提供者，为您想要的每种状态提供一个，将它们发送到视图，最后将它们馈送到不同的 CGridViews。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T20:50:34.633

这是同一视图中[动态网格](http://www.yiiframework.com/wiki/323/dynamic-parent-and-child-cgridview-on-single-view-using-ajax-to-update-child-gridview-via-controller-after-row-in-parent-gridview-was-clicked)视图的 wiki 。

# java - 我无法在我的应用程序中打开谷歌地图

> ID：15505493
> 
> 赞同：0
> 
> 时间：2013-03-19T16:45:27.767
> 
> 标签：java, android, google-maps, android-maps

我正在创建一个应用程序，它有一个按钮，点击后必须打开谷歌地图。但`onclick`它是空白的！我已经使用了意图，还有其他方法可以将谷歌地图加载到我的应用程序中吗？我的代码有什么问题？我错过了什么？

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >
<Button
    android:id="@+id/button1"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="14dp"
    android:text="MAPS" />

</RelativeLayout> 
```

**MainaActivity.java**

```
package com.stayconnected;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {
    Button button1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        addListenerOnButton();
    }
        public void addListenerOnButton() {

            final Context context = this;

            button1 = (Button) findViewById(R.id.button1);

            button1.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {

                    Intent intent = new Intent(context, MainActivity2.class);
                                startActivity(intent); 

                }

            });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

**MainActivity.java**

```
package com.stayconnected;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity2 extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main2);
        String url = "http://maps.google.com/maps?saddr=" + "9982878"+","+"76285774"+"&daddr="+"9992084"+","+"76286455";
        Intent intent1 = new Intent(android.content.Intent.ACTION_VIEW,  Uri.parse(url));
        startActivity(intent1);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

**AndroiManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.stayconnected"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.stayconnected.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.stayconnected.MainActivity2"
            android:label="@string/app_name" >
            </activity>
    </application>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />

</manifest> 
```

我必须下载谷歌地图密钥或其他东西吗？因为我在互联网上读到要在我的应用程序活动中加载谷歌地图，所以我必须下载密钥，然后地图才能工作！这就是我遇到这个问题的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:17:27.823

```
 String url = "http://maps.google.com/maps?saddr=" + "9982878"+","+"76285774"+"&daddr="+"9992084"+","+"76286455";
    Intent intent1 = new Intent(android.content.Intent.ACTION_VIEW,  Uri.parse(url));
    startActivity(intent1); 
```

如果您使用上述方法，您的操作系统将找到可用的应用程序来显示地图。我在三星galaxy s3中测试了上述内容。我可以选择默认手机浏览器、chrome 和地图。我的手机上已经安装了所有应用程序。

它可能是手机中可用的浏览器或地图。但这会从您的活动中打开一个新应用程序。

如果您想通过自定义在应用程序中显示地图，请使用适用于 android 的 google map api。

[http://www.youtube.com/watch?v=dSqLKIow7sY](http://www.youtube.com/watch?v=dSqLKIow7sY)。您可以按照教程获取 google map API Key。如果您使用 Google 地图 API 在手机上显示地图，则需要 API 密钥。

```
<uses-permission android:name="android.permission.INTERNET"/>//permission in manifest 
```

在 map.xml 中获取密钥后，粘贴密钥

```
<com.google.android.maps.MapView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapview"
android:layout_width="fill_parent"
android:layout_height="350dp"
android:clickable="true"
android:apiKey="paste your key here" //paste key
/> 
```

您也可以使用网络视图。这和打开浏览器显示地图一样好。

```
public class MainActivity extends Activity {

WebView wv;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    wv= (WebView) findViewById(R.id.wv);
    wv.getSettings().setPluginsEnabled(true);
    WebSettings webSettings = wv.getSettings();
    webSettings.setJavaScriptEnabled(true);
    wv.loadUrl("http://maps.google.com/maps?saddr=" + "9982878"+","+"76285774"+"&daddr="+"9992084"+","+"76286455");
}
} 
```

Xml 布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<WebView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/wv"></WebView>
</LinearLayout> 
```

# apache - 强制删除 .htaccess 中的 .php 扩展名

> ID：15505498
> 
> 赞同：2
> 
> 时间：2013-03-19T16:45:39.300
> 
> 标签：apache, .htaccess, mod-rewrite

我知道有很多问题，例如“我如何删除 .php 扩展名，以便 /test/ 将成为 /test.php”，但如果用户直接转到 test.php，它不会替换扩展名。所以我想替换它应该是/的.php。这是我正在使用的 .htacces 的一部分：

```
RewriteEngine on

RewriteRule stuff\.php /other_stuff/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/]+)/$ $1.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ /$1/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:06:07.337

您需要检查实际请求而不是 URI（由其他规则重写）。该`%{THE_REQUEST}`变量在重写引擎的过程中不会改变。`RewriteEngine`尝试在指令下方添加这些规则：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /([^/]+)\.php(\?|\ |$)
RewriteRule ^ /%2/ [L,R=301] 
```

# css - 在页脚中制作 4 个 div 不会自动调整大小并居中

> ID：15505502
> 
> 赞同：0
> 
> 时间：2013-03-19T16:45:43.737
> 
> 标签：css, html, position, footer

这是我正在制作的网站；

[http://teetime.comeze.com/](http://teetime.comeze.com/)

4 页脚的 DIV 元素看起来很好，直到您缩小浏览器宽度，然后它们才开始从 dang 页脚上掉下来。

我尝试了许多组合，但我不能让它保持不变但也能居中

任何帮助，将不胜感激。

```
CSS
.footer {
    background-color: #336600;
    clear: both;
    float: none;
    padding-top: 10px;
    padding-right: 0;
    padding-bottom: 0px;
    padding-left: 0px;
    height: 330px;
    color: #F7F7F7;
    width: 100%;
    text-align: center;
}
#third {
    width: 180px;
    float: left;
    text-align: left;
    margin-left: 10px;
}

#first {
    width: 300px;
    float: right;
    overflow: visible;
    margin-right: 10px;
}
#second {
    width: auto;
    float: right;
    margin-top: 8px;
    margin-right: 10px;
    margin-left: 10px;
}

#fourth

Honestly, not sure what to do here, lol! Tried a bunch of different combinations, same result. 
```

相关的 HTML，页脚在容器/内容 div 之外。

```
 <div class="footer">
 <div id=third>
   <h1>Site Map
   </h1>
     <p1>
     <a href="/index.html">Home page
</a>  <br><a href="/estimate.htm">Estimate form
</a>  <br>  <p1><a href="/lawncare.htm">Lawn care process
</a> <br>
 <p1><a href="/tree.htm">Tree and Shrub Control
</a> <br>
 <p1><a href="/pestcontrol.htm">Pest Control Services
</a> <br>
 <p1><a href="/landscape.htm">Organic Landscaping </a> <br>
 <p1><a href="/billpay.htm">Secure Online Bill Pay
</a>  <br>
 <p1><a href="/careers.htm">Careers and Team
</a> 
<p1>
<br>
 <p1><a href="/testimony.htm">Customer Testimony and Lawn Gallery
</a> 
<br>

 </div>
  <div id=first><p>
    <h1>Tee Time Lawn Care</h1>
    <p1>23736 W 119th St
Plainfield, IL 60585</p1>
<br>
    <p1> (815) 609-6969</p1>
    <br>
    <br>
   <p2> A local lawn and landscaping company with an emphasis on safe,organic lawn care. Lawn care companies like us will treat your lawn and yard like a golf course so give us a call if your need the best lawn in your neighburhood. </p2>
  </div>
 <div id=second> 
  <h1>Lawn care company service in  Illinois (Il)<br>Chicagoland area:</h1><p2> 
      Naperville lawn care, Naperville landscaping<br>
      Plainfield lawn care, Plainfield landscaping<br>
      Aurora lawn care, Aurora landscaping<br>
     Channahon lawn care, Channahon landscaping<br>
      Osego lawn care, Oswego landscaping<br>
      Shorewood lawn care, Shorewood landscaping<br>
      Bolingbrook lawn care, Bolingbrook landscaping<br>  Barrington lawn care, Barrington landscaping<br>
      And nearby  towns and cities for your yard service needs.
</p2>
  </div><div id=fourth>
  <h1> Our lawn care and landscaping services include:</h1>
 <p2>Organic and granular fertilization, Aeration and seeding, pest control, Tree and Shrub maintenance service, soil conditioning, heat guard, summer recovery, root rejuvenation, winterizng, blanket barrier, mole removal, yard cleaning, lawn and yard mowing, commercial landscaping, weed removal, weed prevention, and more!
 <br> Please contact us for additional services.</p2>
  </div>
  <!-- end .footer -->

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:49:11.570

看起来您需要在页脚中为标签使用百分比宽度。

如果在缩小屏幕时减少页脚的宽度，您是否还考虑过使用媒体查询将内部页脚 div 置于彼此之上？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:51:13.430

您可以在“%”中指定宽度，例如 20%、30%、30%、20%。因此，当您的浏览器宽度减小时，页脚元素也会相应缩小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:03:29.187

给予`min-width`你的`div.footer`意志可以解决问题。:)

# ios - 如何将 UITableView 从一个控制器克隆到另一个控制器以保持同步？

> ID：15505503
> 
> 赞同：0
> 
> 时间：2013-03-19T16:45:45.883
> 
> 标签：ios, uitableview

我在 SO 中找到[了这个；](https://stackoverflow.com/questions/6364254/insert-uitableviewcontroller-into-other-uiview)它并不能完全回答我的问题，即：有没有办法在使用 Storyboards 并保持同步时将 UITableView 从一个控制器*克隆到另一个控制器？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:29:34.560

您可以克隆它们，因为它们的初始属性值保持不变，如位置、布局等。为此，只需从故事板复制 UITableView，转到目标视图控制器并将其粘贴到那里。

如果你在两个视图控制器之间共享同一个 UITableView 对象，它仍然是可能的，但是你必须估计你自己需要做多少工作。当一个视图控制器只处理一个表格视图时，大部分工作都是在后台完成的，表格就交给你了。如果您的 UITableView 在两个视图控制器之间共享，您必须非常小心地使用它。您需要照顾视图的整个生命周期 - 请参阅常用方法，如`viewDidLoad`，`viewDidAppear`等等。当您的视图存在于两个场景中时，您将如何处理它们？也许你会发明一种独特的设计模式——如果你能找到最乐观和编程正确的方法来完成它。

使用情节提要，您无法实现克隆到数据更改将在两者之间无缝反映的水平。故事板，顾名思义，只是一个板，在您的代码接管之前，您可以在其中绘制东西以了解它们最初的外观。

为了实现您想要的，您必须创建一个共享模型，通过适当的委托方法更新两个表视图。很可能这样的模型（NSArray，或根据您的要求的任何此类集合）可以驻留在共享类中（应用程序委托不是错误的选择），您的两个视图控制器都可以从中引用它。这是一种巧妙的做法，它不仅从编程的角度来看是正确的，而且对于任何时候处理代码的人来说都是可扩展的和有帮助的。

有关如何从模型更新 UI 的详细信息，没有什么比[从头开始](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)更好的了，我的意思是翻阅书籍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:31:28.593

I think the best approach would be to use a framework such as the freely available Sensible TableView, then use the same model for both table views. This should be really straight forward.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:17:33.063

我*不知道这种可能性*。

我会**在不同的控制器之间传递 tableview 源对象**，让视图控制器处理他们自己的表视图。

# java - java 返回一个包含在 collections.synchronizedlist 中的数组列表的克隆

> ID：15505504
> 
> 赞同：0
> 
> 时间：2013-03-19T16:45:47.517
> 
> 标签：java, list, arraylist, clone, synchronized

我想知道如何在以下情况下生成我的数组的克隆：

```
private List<TestObject> testList = Collections.synchronizedList(new ArrayList<TestObject>()); 
```

……

```
public synchronized List<TestObject> getAllTestObjects(){
    return testList.clone();
    //I have tried casting to List<TestObject>
} 
```

它正在为 List 的未定义 clone() 抱怨。但我不确定如何最好地绕过它？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:52:29.960

您需要使用提供的构造函数`ArrayList`

```
public synchronized List<TestObject> getAllTestObjects(){
    return new ArrayList<TestObject>(testList);        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:59:33.803

这应该有效：

```
private static class TestObject {
}
private TestObject[] objects = new TestObject[10];
private List<TestObject> testList = 
  Collections.synchronizedList(new ArrayList<TestObject>(Arrays.asList(objects))); 
```

# java - String.subString() 和 String.subSequence() 有什么区别

> ID：15505508
> 
> 赞同：35
> 
> 时间：2013-03-19T16:45:55.353
> 
> 标签：java, string, substring, subsequence

`String.subSequence()`有以下javadoc：

> 返回一个新的字符序列，它是该序列的子序列。
> 
> 调用表单的这个方法
> 
> ```
> str.subSequence(begin, end) 
> ```
> 
> 行为方式与调用完全相同
> 
> ```
> str.substring(begin, end) 
> ```
> 
> 定义此方法以便 String 类可以实现 CharSequence 接口。

谁能解释一下？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2018-04-06T08:01:36.987

**要理解这一点，您首先需要知道的是子字符串**和子**序列**之间有什么区别

 ****子字符串**是字符串的*连续*部分或子部分

然而

**子序列**是字符串或序列的一部分，可能是连续的或不连续的，但元素的*顺序保持不变*

例如，假设我们有以下字符串：

```
str_a="hello there"
str_b="hello"
str_c="ello th"
str_d="hllo"
str_e="ho hre"
str_f="there hello" 
```

`str_b`是 的子串`str_a`，`str_c`也是 的子串，`str_a`但`str_d`不是 的子串，`str_a`因为该子串不*连续*。

现在所有子字符串都是子序列，因为顺序保持不变。

`str_d`是 的子序列`str_a`，`str_e`也是 的子序列，`str_a`但`str_f`不是 的子序列，`str_a`因为在这种情况下，不维持*顺序。*

现在对于 java，javadoc 中没有关于这些方法的适当说明。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-03-19T16:48:12.990

**子序列**

子序列是子字符串、后缀和前缀的概括。找到两个或多个字符串的子序列的最长字符串称为最长公共子序列问题。

示例：字符串“anna”是字符串“banana”的子序列：

```
banana
 || ||
 an na 
```

**子串**

字符串的子串是字符串后缀的前缀，相当于前缀的后缀。如果一个字符串是另一个字符串的子字符串，那么它也是一个子序列，这是一个更一般的概念。

示例：字符串“ana”是香蕉在两个不同偏移量处的子字符串（和子序列）：

```
banana
 |||||
 ana||
   |||
   ana 
```

[在这里](http://en.wikipedia.org/wiki/Substring)阅读更多。

[但就 Java 而言，它们的使用没有任何区别，如javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#subSequence%28int,%20int%29)中明确说明的那样。同样正如其中所述，该方法`subSequence`仅在类中实现，`String`以使其与`CharSequence`接口兼容。而且这个方法的名字确实是用词不当。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-03-19T17:13:30.683

Using`str.subSequence(begin, end)`返回一个[CharSequence](http://docs.oracle.com/javase/6/docs/api/java/lang/CharSequence.html)，它是表示为字符序列的字符串的只读形式。例如：

```
String string = "Hello";
CharSequence subSequence = string.subSequence(0, 5); 
```

`chars`它只是在`CharSequence`不实例化 a 的新实例的情况下无法更改的意义上读取的`CharSequence`。

如果必须使用`str.subSequence(begin, end)`，可以将结果转换为`String`：

```
String string = "Hello";
String subSequence = (String) string.subSequence(0, 5); 
```

并使用所有普通`String`运算符，例如`subSequence += " World";`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-03-31T19:46:52.253

简单的理解：

**子字符串**：子字符串是字符串中连续的字符序列，其中 oder 很重要。

```
Substring
string
ring 
```

**Subsequences**：从一个字符串，任何字符，但按顺序。

```
Substring
u s i
s b t i n g
r g 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-03T04:59:29.107

子串是连续的子序列。

例如，对于序列 abc，我们有

```
substrings: a, ab, abc, b, bc, c, and the empty substring;
subsequences: a, b, ab, c, ac, bc, abc, and the empty subsequence. 
```

当字母重复时，一些子串和子序列看起来是一样的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-25T11:04:47.687

如果你看一下String的来源，你会看到子序列实际上调用了子字符串。它与子字符串唯一不同的是它将字符串转换为 CharSequence。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-20T22:27:37.513

简而言之，它对对象来说并不重要`String`。它们是等价的，除非您需要将结果传递给只需要 的东西`String`，在这种情况下，您必须使用`subtring(int,int)`版本或将`subsequence(int,int)`版本转换为 a `String`（因为它是内部的）。

`String.substring(int,int)`先存在，因为`String`先存在。在 Java 1.4`CharSequence`中添加了，显然有人意识到在那里拥有相同的功能会很有用，但返回的是 a`CharSequence`而不是`String`（为了灵活性）。于是，随之而来`CharSequence.subSequence(int,int)`。但是，自从`String`implements `CharSequence`，`String`继承了看似多余的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-15T17:28:58.513

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-07-15T06:04:35.697

基本上它就是返回的内容。一个是 String，另一个是 CharSequence（您可以将其转换为字符串）。
当您需要 CharSequence 类型的变量时，您将使用 subSequence。**

# c# - 如何使用 WPF 在 C# 中快速平滑动画

> ID：15505510
> 
> 赞同：1
> 
> 时间：2013-03-19T16:45:59.723
> 
> 标签：c#, wpf, animation, timer, rectangles

我目前正在编写乒乓球游戏。我已经完成了大部分游戏，但我遇到了一个烦人的问题。我使用的`dispatcherTimer`优先级设置为发送，时间跨度设置为 1 毫秒。我正在使用最多 dx=9 和 dy=9 为矩形设置动画，以使球移动得足够快。由于大像素跳跃，球出现在屏幕上跳跃而不是平滑移动。根据每个周期 1 毫秒的数学计算，这个球的移动速度应该比现在快得多。我需要更频繁地更新球并减少移动它......

有没有更好的方法来做到这一点？这是我所拥有的片段...

```
pongballTimer = new DispatcherTimer(DispatcherPriority.Send);
pongballTimer.Tick += new EventHandler(pongballTimer_Tick);
pongballTimer.Interval = new TimeSpan(0, 0, 0, 0, _balldt);

private void pongballTimer_Tick(object sender, EventArgs e)
{
   double pongtop = Canvas.GetTop(PongBall);
   double pongleft = Canvas.GetLeft(PongBall);
   double paddletop = Canvas.GetTop( RightPaddle );
   double paddleleft = Canvas.GetLeft( RightPaddle );

   if (pongleft + PongBall.Width > paddleleft)
   {
      if (((pongtop < paddletop + RightPaddle.Height) && (pongtop > paddletop)) ||
         ((pongtop + PongBall.Height < paddletop + RightPaddle.Height) &&
         (pongtop + PongBall.Height > paddletop)))
      { 
         _dx *= -1;
         SetBalldy(pongtop, PongBall.Height, paddletop, RightPaddle.Height);
         _rightpoint++;
         lblRightPoint.Content = _rightpoint.ToString();
         meHitSound.Play();
      }

      else // The ball went past the paddle without a collision
      {
         RespawnPongBall(true); 
         _leftpoint++;
         lblLeftPoint.Content = _leftpoint.ToString();
         meMissSound.Play();

         if (_leftpoint >= _losepoint)
               LoseHappened("You Lost!!");
               return; 
      }
   }

   if (pongleft < 0)
   {
      meHitSound.Play();
      _dx *= -1;
   }

   if (pongtop <= _linepady ||
         pongtop + PongBall.Height >= PongCanvas.Height - _linepady)
   {
      meDeflectSound.Play();
      _dy *= -1;
   }
   Canvas.SetTop(PongBall, pongtop + _dy);
   Canvas.SetLeft(PongBall, pongleft + _dx);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:03:47.603

您可以使用 WPF 中内置的动画技术之一，而不是在计时器回调中执行移动。

开始阅读[Property Animation Techniques Overview](http://msdn.microsoft.com/en-us/library/aa970492.aspx)，也许要特别注意最后一节*Per-Frame Animation: Bypass the Animation and Timing System*。

然后您可以继续阅读[如何：使用 CompositionTarget 在每帧间隔上渲染](http://msdn.microsoft.com/en-us/library/ms748838.aspx)。

# java - 使用 Java 获取 Windows 文件属性（作者、日期、主题等）

> ID：15505513
> 
> 赞同：0
> 
> 时间：2013-03-19T16:46:05.840
> 
> 标签：java, python, windows, file, properties

我正在尝试从文件中获取 Windows 文件属性，例如作者、日期、主题等。我尝试使用摘要信息，`FileNotFound`但出现异常。我怎么能这样。我已经搜索了一段时间，没有发现任何有用的东西。如果解决方案在 Java 中是不可能的，那么它可以在 C 或 Python 中实现吗？提前致谢

# python - 二进制numpy数组到整数列表？

> ID：15505514
> 
> 赞同：11
> 
> 时间：2013-03-19T16:46:07.033
> 
> 标签：python, numpy, binary

我有一个二进制数组，我想将其转换为整数列表，其中每个 int 是数组的一行。

例如：

```
from numpy import *
a = array([[1, 1, 0, 0], [0, 1, 0, 0], [0, 1, 1, 1], [1, 1, 1, 1]]) 
```

我想转换`a`为`[12, 4, 7, 15]`.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-19T17:09:32.843

@SteveTjoa 的回答很好，但是为了好玩，这里有一个 numpy 单行：

```
In [19]: a
Out[19]: 
array([[1, 1, 0, 0],
       [0, 1, 0, 0],
       [0, 1, 1, 1],
       [1, 1, 1, 1]])

In [20]: a.dot(1 << arange(a.shape[-1] - 1, -1, -1))
Out[20]: array([12,  4,  7, 15]) 
```

（`arange`是`numpy.arange`。）

如果位的顺序相反，请更改由 产生的值的顺序`arange`：

```
In [25]: a.dot(1 << arange(a.shape[-1]))
Out[25]: array([ 3,  2, 14, 15]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T16:52:27.597

[我曾经在这里](https://stackoverflow.com/questions/4065737/python-numpy-convert-list-of-bools-to-unsigned-int)问过一个类似的问题。这是[我的答案](https://stackoverflow.com/a/4065901/208339)，适合您的问题：

```
def bool2int(x):
    y = 0
    for i,j in enumerate(x):
        y += j<<i
    return y

In [20]: a
Out[20]: 
array([[1, 1, 0, 0],
       [0, 1, 0, 0],
       [0, 1, 1, 1],
       [1, 1, 1, 1]])

In [21]: [bool2int(x[::-1]) for x in a]
Out[21]: [12, 4, 7, 15] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T17:07:12.640

您也可以直接在 numpy 中执行此操作：

```
from numpy import *
a = array([[1, 1, 0, 0], [0, 1, 0, 0], [0, 1, 1, 1], [1, 1, 1, 1]])

b2i = 2**arange(a.shape[0]-1, -1, -1)

result = (a*b2i).sum(axis=1)  #[12  4  7 15] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-27T06:42:20.190

如果你喜欢直接使用按位数学，这个应该很好用。

```
def bits2int(a, axis=-1):
    return np.right_shift(np.packbits(a, axis=axis), 8 - a.shape[axis]).squeeze()

bits2int(a)
Out: array([12,  4,  7, 15], dtype=uint8) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-10T15:10:26.400

另一个：

```
def row_bits2int(arr):
    n = arr.shape[1]  # number of columns

    # shift the bits of the first column to the left by n - 1
    a = arr[:, 0] << n - 1  

    for j in range(1, n):
        # "overlay" with the shifted bits of the next column
        a |= arr[:, j] << n - 1 - j  
    return a 
```

# java - Java Long 原始类型最大限制

> ID：15505515
> 
> 赞同：132
> 
> 时间：2013-03-19T16:46:08.153
> 
> 标签：java

我使用的是 Long 原始类型，每当我的“generateNumber”方法被调用时，它就会递增 1。如果龙达到他的最大极限会发生什么？会抛出任何异常还是会重置为最小值？这是我的示例代码：

```
class LongTest {
   private static long increment;
   public static long generateNumber(){
       ++increment;
       return increment;
   }
} 
```

* * *

## 回答 #1

> 赞同：415
> 
> 时间：2013-03-19T16:53:14.203

`Long.MAX_VALUE`是`9,223,372,036,854,775,807`。

[如果你每纳秒执行一次你的函数，根据这个来源](http://www.google.ca/search?q=9%2C223%2C372%2C036%2C854%2C775%2C807+nanoseconds+in+years)，遇到这种情况仍然需要超过 292 年。

发生这种情况时，它只会环绕到`Long.MIN_VALUE`，或者`-9,223,372,036,854,775,808`像其他人所说的那样。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-03-19T16:47:03.737

它会溢出并环绕到`Long.MIN_VALUE`.

不过可能性不大。即使每秒增加 1,000,000 次，也需要大约 300,000 年才能溢出。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-19T16:48:29.093

超过 long 的最大值不会引发异常，而是会返回。如果你这样做：

```
Long.MAX_VALUE + 1 
```

您会注意到结果等同于 Long.MIN_VALUE。

从这里开始：[java number超过long.max_value - 如何检测？](https://stackoverflow.com/questions/12348067/java-number-exceeds-long-max-value-how-to-detect)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-19T16:47:17.837

范围从 -9,223,372,036,854,775,808 到 +9,223,372,036,854,775,807。

将从 -9,223,372,036,854,775,808 开始

```
Long.MIN_VALUE. 
```

# date - 使用日期时 MS Access Group By 中断

> ID：15505516
> 
> 赞同：2
> 
> 时间：2013-03-19T16:46:10.193
> 
> 标签：date, ms-access, group-by

出于某种原因，在 Access 2010 中使用分组依据的选择查询中使用日期/时间字段会中断（记录未正确“按”文本字段首先“分组”，多次显示相同的“aTextField”值）。我能够在一个简单的表查询中复制该问题。前任：

```
SELECT aTextField, SUM(aIntField) AS SumOfaIntField
FROM simpleTable
GROUP BY aTextField, aDateField
HAVING aDateField >= Date()
ORDER BY aTextField; 
```

一旦您从查询中删除“aDateField”（分组依据和有行），它就会正常工作。我什至可以删除 HAVING 行，它仍然会中断。让我相信这是 Group By 的事情。

任何反馈都会很棒。谢谢！

**编辑**更多细节

```
**simpleTable**
--------------------------------------------
| ID | aTextField | aIntField | aDateField |
============================================
|  1 | John Doe   |         1 |  3/14/2013 |
|  2 | John Doe   |           |  3/15/2013 |
|  3 | Jane Doe   |         1 |  3/15/2013 |
|  4 | John Doe   |         2 |  3/18/2013 |
|  5 | Jane Doe   |         1 |  3/19/2013 |
|  6 | John Doe   |           |  3/20/2013 |
|  7 | John Doe   |         3 |  3/21/2013 |
|  8 | Jane Doe   |         1 |  3/19/2013 |
|  9 | John Doe   |           |  3/22/2013 |
| 10 | Jane Doe   |         2 |  3/20/2013 |
| 11 | Jane Doe   |           |  3/21/2013 |
| 12 | Jane Doe   |           |  3/22/2013 |
--------------------------------------------

**Expected Result**
-------------------------------
| aTextField | SumOfaIntField |
===============================
| Jane Doe   |              4 |
| John Doe   |              3 |
-------------------------------

**Actual Result**
-------------------------------
| aTextField | SumOfaIntField |
===============================
| Jane Doe   |              2 |
| Jane Doe   |              2 |
| Jane Doe   |                |
| Jane Doe   |                |
| John Doe   |                |
| John Doe   |              3 |
| John Doe   |                |
------------------------------- 
```

因此，似乎正在发生的是每个日期也有单独的一行。我只需要按日期过滤，而不必按它分组。但是，Access 不会接受不分组的查询。选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:53:14.400

您按`aTextField`和分组`aDateField`。可能`simpleTable`包括日期相同但时间不同的行。在这种情况下，您的分组将为每个日期/时间组合生成一行。

无论这是否是解释，您都应该通过包含`aDateField`在`SELECT`列表中来检查数据库引擎实际评估的内容。

```
SELECT aTextField, aDateField, SUM(aIntField) 
FROM simpleTable
GROUP BY aTextField, aDateField
HAVING aDateField >= Date()
ORDER BY aTextField; 
```

还可以考虑使用`WHERE`代替`HAVING`子句：

```
WHERE aDateField >= Date() 
```

根据您的样本数据，我怀疑您想要...

```
SELECT aTextField, SUM(aIntField) 
FROM simpleTable
GROUP BY aTextField
WHERE aDateField >= Date()
ORDER BY aTextField; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:11:49.897

您应该能够使用以下内容：

```
SELECT aTextField, SUM(aIntField) AS SumOfaIntField
FROM simpleTable
WHERE aDateField >= Date()
GROUP BY aTextField
ORDER BY aTextField; 
```

你会注意到我删除了`GROUP BY`列上的`aDateField`。由于您想要每个 的总数`aTextField`，因此您不需要按日期分组。按日期分组将为每个不同的日期生成单独的行。

*注意：此查询在 MS Access 2010 中进行了测试，并生成了您想要的结果。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:51:52.040

我认为您对 GROUP BY 的工作方式有误解。`aTextField`对于每个唯一的文本字段/日期时间组合，您应该看到相同的一次

**样本**

```
a 2012-01-01
a 2012-01-01
b 2012-01-01
b 2012-01-02
b 2012-01-02 
```

**按 aTextField、aDateField 分组**

```
a 2012-01-01
b 2012-01-01
b 2012-01-02 
```

**按 aTextField 分组**

```
a
b 
```

# garbage-collection - 复制生成代码的垃圾收集

> ID：15505519
> 
> 赞同：0
> 
> 时间：2013-03-19T16:46:12.403
> 
> 标签：garbage-collection, jit

复制（分代）垃圾收集提供了任何形式的自动内存管理的最佳性能，但需要修复指向重定位数据块的指针。在支持这种内存管理技术的语言中，这是通过禁止指针算术并确保所有指针都指向可识别对象的开头来启用的。

如果您在运行时使用 JIT 编译器生成代码，事情看起来有点棘手，因为调用堆栈上的返回地址将指向，而不是代码块的开头，而是其中的随机位置，因此修复是一个问题。

这通常是如何解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:19:09.680

很多时候，您*不会*重新定位代码。这既是因为修复堆栈和其他地址确实很复杂（想想跨代码片段的跳转），而且因为您实际上不需要对此类代码进行垃圾收集（因为它仅由您编写的代码操作，所以您可以做手动内存管理）。您也不希望创建大量机器代码（与应用程序对象相比），因此碎片等不是问题。

如果您坚持移动机器代码并修复堆栈，我认为有*一种*方法：类似于Mark-Compact，构建一个“break table”（我不知道这个名字来自哪里；“relocation table”可能是更清晰），它告诉您应该调整指向移动对象的指针的数量。现在，遍历堆栈以获取返回地址（当然，高度特定于平台）并在它们引用重定位代码时修复它们。与其寻找完全匹配，不如寻找低于您当前要替换的返回地址的最高地址。您可以通过查看对象大小来检查该地址是否确实引用了某些移动的机器代码（毕竟，您有一个指向对象开头的指针）。由于各种原因，这种方法并非对所有对象都可行。

不过，还有其他原因可以做类似的事情。一些 JIT 编译器具有*堆栈替换*功能，这意味着创建一些机器代码的新版本（例如，优化程度更高或优化程度更低）并用它替换所有出现的旧版本。不过，这比仅修复返回地址要复杂得多。您必须确保新版本在逻辑上继续旧版本挂起的地方。我*不*熟悉这是如何实现的，所以我不会详细介绍。

# objective-c - 删除文件 obj c

> ID：15505529
> 
> 赞同：23
> 
> 时间：2013-03-19T16:46:51.670
> 
> 标签：objective-c, nsfilemanager

我正在使用以下代码创建文件

```
NSString *docPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *filename = @"xyz123.data";
docPath = [NSString stringWithFormat:@"%@/%@", docPath, filename];

NSError *error = nil;
[data writeToFile:docPath options:0 error:&error]; 
```

要删除文件，我使用以下

```
NSFileManager *manager = [NSFileManager defaultManager];

NSError *error = nil;

NSString *path = @"xyz123.data";
//NSString *path = @"Documents/xyz123.data";
[manager path error:&error]; 
```

但是第一个和第二个路径似乎都不起作用，我总是收到错误“没有这样的文件或目录”。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-19T16:52:14.320

您`NSHomeDirectory() stringByAppendingPathComponent`在文件创建中使用过，但在尝试删除文件时未在任一路径中使用。尝试：

```
[manager removeItemAtPath:[NSHomeDirectory() stringByAppendingPathComponent:@"Documents/xyz123.data"] error:&error] 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-19T16:53:58.457

试试这个：

```
NSString *docPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *filePath = [docPath stringByAppendingPathComponent:@"xyz123.data"];
NSError *error = nil;
[data writeToFile:filePath options:0 error:&error];
[[NSFileManager defaultManager] removeItemAtPath:filePath error:&error]; 
```

# c++ - 从基类调用函数

> ID：15505547
> 
> 赞同：1
> 
> 时间：2013-03-19T16:47:49.580
> 
> 标签：c++, inheritance

我有A班和B班。

```
class A{
public:
    foo();
};

class B : public A{
public:
    int x;
}; 
```

假设测试文件中有一个来自 B 类的对象。我应该如何调用 foo 函数？

```
object.foo(); // or
object.A::foo(); 
```

其他问题：我们什么时候调用这样的函数？如果我做多重继承怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:49:08.777

很简单`object.foo()`，没有什么要补充的了：

```
B object;
object.foo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:52:17.283

B 类继承了 A 类的公共成员，所以函数`foo()`也属于 B 类，可以使用 B 类的对象调用。

```
B b;
b.foo(); 
```

您需要了解[C++ 中的继承。](http://www.tutorialspoint.com/cplusplus/cpp_inheritance.htm)它和

```
b.x; 
```

看到`x`并且`foo()`两者都是对象的成员，`b`甚至`b`是 B 类的对象，它可能是因为 B 类继承自 A 类的特性，在您的代码函数`foo()`中。

**注意**A 类只有一个成员函数 foo()

```
A a;
a.foo(); 
```

有效，但是

```
a.x; 
```

无效

**编辑：** 多级继承C类继承B类，B类继承A类，然后

```
class C : public B{
public:
    int y;  
};

C c;
c.foo();  // correct 
```

也是有效的。

和

```
c.x;
c.y; 
```

同样有效的, `x`, `y`,`foo()`都是 C 类的成员。

注意：我告诉你的是[C++ 中的多级多重继承](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr134.htm)是不同的。在继承的情况下，C++ 中的三个访问说明符也非常重要：[c++ 中的 public private protected](https://stackoverflow.com/questions/860339/difference-between-private-public-and-protected-inheritance-in-c)

# drag-and-drop - KineticJS 在移动其他对象时动态更改对象的位置

> ID：15505548
> 
> 赞同：1
> 
> 时间：2013-03-19T16:47:49.077
> 
> 标签：drag-and-drop, position, kineticjs

我的舞台上有一条垂直线和一条水平线以及一个圆圈，当我移动任何一条线时，试图使圆圈以两条线的交叉为中心，这是我的脚本不起作用：

```
 var cy = 512;
        var cx = 512;
        var gy = 0;
        var gx = 0;
        var stage1 = new Kinetic.Stage({
            container: 'container',
            width: 1024,
            height: 1024
        });
        var layer = new Kinetic.Layer();
        var circle = new Kinetic.Layer();
        var circle1 = new Kinetic.Circle({
            x: cx + gx,
            y: cy + gy,
            radius: 140,
            stroke: '#00ffff',
            strokeWidth: 4,
            opacity: 0.5
        });
        circle.add(circle1);

        var GreenLine1 = new Kinetic.Line({
            points: [0, 512, 1024, 512],
            stroke: 'green',
            strokeWidth: 4,
            lineCap: 'round',
            lineJoin: 'round',
            opacity: 0.3
        });

        var BlueLine1 = new Kinetic.Line({
            points: [512, 0, 512, 1024],
            stroke: '#0080c0',
            strokeWidth: 4,
            lineCap: 'round',
            lineJoin: 'round',
            opacity: 0.5
        });

        var bgroup1 = new Kinetic.Group({
            draggable: true,
            dragBoundFunc: function (pos) {
                return {
                    x: pos.x,
                    y: this.getAbsolutePosition().y
                }
            }
        });
        var ggroup1 = new Kinetic.Group({
            draggable: true,
            dragBoundFunc: function (pos) {
                return {
                    x: this.getAbsolutePosition().x,
                    y: pos.y
                }
            }
        });
        bgroup1.add(BlueLine1);
        ggroup1.add(GreenLine1);
        layer.add(bgroup1);
        layer.add(ggroup1);
        stage1.add(circle);
        stage1.add(layer);
        BlueLine1.on('mouseover', function () {
            document.body.style.cursor = 'e-resize';
        });
        BlueLine1.on('mouseout', function () {
            document.body.style.cursor = 'default';
        });
        GreenLine1.on('mouseover', function () {
            document.body.style.cursor = 'n-resize';
        });
        GreenLine1.on('mouseout', function () {
            document.body.style.cursor = 'default';
        });

        ggroup1.on('dragend', function (event) {
        var gy = ggroup1.getPosition().y;
        circle.draw();
        });
        ggroup1.on('dragstart', function (event) {
        circle1.moveTo(ggroup1);

        });
        bgroup1.on('dragstart', function (event) {
        circle1.moveTo(bgroup1);
        });
        bgroup1.on('dragend', function (event) {
         var gx = bgroup1.getPosition().x;
         circle.draw();
        }); 
```

非常感谢您的建议，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:21:50.523

**保持你的圈子在你的十字准线**

我可以建议您的代码的更简单版本吗？

与其保持 2 组并在 2 组之间移动圆圈，不如仅对圆圈进行编码以在 2 条线的交点处自动重绘自身。

因此，当用户移动您的 GreenLine1 或 BlueLine1 时，只需将您的 circle1 移动到您的“十字准线”的交点处。

首先，将自定义 drawFunc 添加到您的 circle1 中，使其始终绘制在十字准线中：

```
 drawFunc: function(canvas) {
      var context = canvas.getContext();
      var centerX=BlueLine1.getPosition().x;
      var centerY=GreenLine1.getPosition().y;
      context.beginPath();
      context.arc(centerX, centerY, this.getRadius(), 0, 2 * Math.PI, false);
      context.lineWidth = this.getStrokeWidth();
      context.strokeStyle = this.getStroke();
      context.stroke();
    }, 
```

然后，每当用户拖动任何一条线时，只需触发 circle1 重绘自身：

```
 // keep circle in center of crosshairs
    stage1.getDragLayer().afterDraw(function() {
      layer.draw();
    }); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/cgF8y/](http://jsfiddle.net/m1erickson/cgF8y/)

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Prototype</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.3-beta.js"></script>

<style>
#container{
  border:solid 1px #ccc;
  margin-top: 10px;
}
</style>        
<script>
$(function(){

    function init(){

        var cy = 512/2;
        var cx = 512/2;
        var gy = 0;
        var gx = 0;
        var stage1 = new Kinetic.Stage({
            container: 'container',
            width: 1024/2,
            height: 1024/2
        });
        var layer = new Kinetic.Layer();
        stage1.add(layer);

        var circle1 = new Kinetic.Circle({
            drawFunc: function(canvas) {
              var context = canvas.getContext();
              var centerX=BlueLine1.getPosition().x;
              var centerY=GreenLine1.getPosition().y;
              context.beginPath();
              context.arc(centerX, centerY, this.getRadius(), 0, 2 * Math.PI, false);
              context.lineWidth = this.getStrokeWidth();
              context.strokeStyle = this.getStroke();
              context.stroke();
            },
            x: cx + gx,
            y: cy + gy,
            radius: 140/2,
            stroke: '#00ffff',
            strokeWidth: 4,
            opacity: 0.5
        });
        layer.add(circle1);

        var GreenLine1 = new Kinetic.Line({
            points: [0, 512/2, 1024/2, 512/2],
            stroke: 'green',
            strokeWidth: 4,
            lineCap: 'round',
            lineJoin: 'round',
            opacity: 0.3,
            draggable:true
        });
        layer.add(GreenLine1);

        var BlueLine1 = new Kinetic.Line({
            points: [512/2, 0, 512/2, 1024/2],
            stroke: '#0080c0',
            strokeWidth: 4,
            lineCap: 'round',
            lineJoin: 'round',
            opacity: 0.5,
            draggable:true
        });
        layer.add(BlueLine1);

        // keep circle in center of crosshairs
        stage1.getDragLayer().afterDraw(function() {
          layer.draw();
        });

        BlueLine1.on('mouseover', function () {
            document.body.style.cursor = 'e-resize';
        });
        BlueLine1.on('mouseout', function () {
            document.body.style.cursor = 'default';
        });
        GreenLine1.on('mouseover', function () {
            document.body.style.cursor = 'n-resize';
        });
        GreenLine1.on('mouseout', function () {
            document.body.style.cursor = 'default';
        });

        layer.draw();

    } // end init();

init();

}); // end $(function(){});

</script>       
</head>

<body>
    <div id="container"></div>
</body>
</html> 
```

# c# - 从泛型类型对象 C# 返回 null 时出错

> ID：15505556
> 
> 赞同：-5
> 
> 时间：2013-03-19T16:48:10.787
> 
> 标签：c#, generic-handler

我在从 BSTree 中的泛型类型对象返回 null 时遇到问题

> 这是错误：System.exe 中出现“System.NullReferenceException”类型的第一次机会异常附加信息：对象引用未设置为对象的实例。如果有这个异常的处理程序，程序可以安全地继续

和我的代码

```
 public BTree()  //creates an empty tree
    {
        root.Name = default(T);
        root.Members = default(T);
    } 
```

谢谢

我将 root 设置为：

```
public BST()
    {
        root = null;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:49:59.563

这里的问题是，`root`目前`null`你正在尝试设置它的成员时遇到异常。鉴于这`BTree()`是一个构造函数和`root`一个大概的实例字段，您需要在使用前对其进行初始化

```
public BTree() {
  root = new Artist<T>();
  root.Name = default(T);
  root.Members = default(T);
} 
```

**编辑**

基于 PasteBin 代码更新

# c# - 如何使用代码制作 DataGrid 模板？

> ID：15505562
> 
> 赞同：0
> 
> 时间：2013-03-19T16:48:17.050
> 
> 标签：c#, wpf, xaml

我想只使用 C# 制作这个 XAML 模板：

```
<DataGrid AlternationCount="2" AutoGenerateColumns="False" Margin="6,78,9,47" Name="datagrid_Jobs">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Title, Mode=OneWay}" Header="Job" />
        <DataGridTextColumn Binding="{Binding Mode=TwoWay, Path=Score}" Header="Score" />
        <DataGridTemplateColumn Header="Perecent Complete">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Slider Margin="5" Maximum="100" Minimum="0" Value="{Binding Path=Score, UpdateSourceTrigger=PropertyChanged}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

我只想在 XAML 中定义网格，我想用 C# 制作整个模板。
我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:07:38.840

我认为你需要的只是在这个网站上检查它：

[http://harishasanblog.blogspot.ca/2011/01/create-datagrid-in-wpf-using-code.html](http://harishasanblog.blogspot.ca/2011/01/create-datagrid-in-wpf-using-code.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:18:31.353

您应该使用`FrameworkElementFactory`( [msdn](http://msdn.microsoft.com/en-US/library/system.windows.frameworkelementfactory.aspx) )。

XAML：

```
<DataGrid AlternationCount="2" AutoGenerateColumns="False" Margin="6,78,9,47" Name="datagrid_Jobs"
          Loaded="datagrid_Jobs_Loaded">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Title, Mode=OneWay}" Header="Job" />
        <DataGridTextColumn Binding="{Binding Mode=TwoWay, Path=Score}" Header="Score" />
        <DataGridTemplateColumn x:Name="pcColumn" Header="Perecent Complete" />
    </DataGrid.Columns>
</DataGrid> 
```

代码隐藏：

```
public void datagrid_Jobs_Loaded(object sender, EventArgs e)
{
    FrameworkElementFactory sliderHolder = new FrameworkElementFactory(typeof(Slider));
    sliderHolder.SetBinding(Slider.ValueProperty, new Binding("Score") { UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged });
    sliderHolder.SetValue(Slider.MarginProperty, new Thickness(5));
    sliderHolder.SetValue(Slider.MaximumProperty, (double)100);
    sliderHolder.SetValue(Slider.MinimumProperty, (double)0);
    var dataTemplate = new DataTemplate();
    dataTemplate.VisualTree = sliderHolder;
    dataTemplate.DataType = typeof(DataGridTemplateColumn);
    pcColumn.CellTemplate = dataTemplate;
} 
```

# divshot - 从导航栏链接页面

> ID：15505567
> 
> 赞同：1
> 
> 时间：2013-03-19T16:48:27.033
> 
> 标签：divshot

如何从导航栏链接到我在 divshot 中创建的页面，同时仍留在 divshot 应用程序中。

当我预览时，我希望能够单击导航栏中的链接并转到我创建的不同页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:50:48.803

不幸的是，我们还没有内置在 Divshot 中的页面之间链接的能力。这是我们最常要求的功能之一，也是我们正在努力尽快推出的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:35:56.193

一种解决方法是创建一个功能，将您带到您想要的页面。完成模型后，您将能够用更改页面的真实功能替换代码。

```
<script>
var pages = [
  {name: 'page1', url: 'https://api.divshot.com/previews/whateverthelinktothepreviewpage1is'},
  {name: 'page2', url: 'https://api.divshot.com/previews/whateverthelinktothepreviewpage2is'}
  ]

function gotoPageByName( pageName ) {
  for ( var i in pages ) {
    if ( pages[i].name == pageName) {
      window.location = pages[i].url
    }
  }
}
</script> 
```

然后

```
<a href="javascript: gotoPageByName('page1');" class="btn">Change Page</a> 
```

# ios - MKCoordinateRegionMakeWithDistance 抛出“线程 1：信号 SIGABRT”

> ID：15505573
> 
> 赞同：1
> 
> 时间：2013-03-19T16:48:39.147
> 
> 标签：ios, ios6, mkmapview, mapkit

我遇到了一个新问题，但我不知道为什么... Rob 在[这里](https://stackoverflow.com/questions/14562669/try-to-load-a-created-map-in-mkmapview/14564399?noredirect=1#comment20570969_14564399)发布了我的进一步解决方案。我喜欢他的作品，并且在 iOS 6.1 更新之前效果很好。

```
- (void)loadKml:(NSURL *)url
{
    // parse the kml

    Parser *parser = [[Parser alloc] initWithContentsOfURL:url];
    parser.rowElementName = @"Placemark";
    parser.elementNames = @[@"name", @"Snippet", @"coordinates", @"description"];
    parser.attributeNames = @[@"img src="];
    [parser parse];

    // add annotations for each of the entries

    for (NSDictionary *locationDetails in parser.items)
    {
        MKPointAnnotation *annotation = [[MKPointAnnotation alloc] init];
        annotation.title = locationDetails[@"name"];
        annotation.subtitle = locationDetails[@"Snippet"];
        NSArray *coordinates = [locationDetails[@"coordinates"] componentsSeparatedByString:@","];
        annotation.coordinate = CLLocationCoordinate2DMake([coordinates[1] floatValue], [coordinates[0] floatValue]);
        [self.mapView addAnnotation:annotation];
    }

    // update the map to focus on the region that encompasses all of your annotations

    MKCoordinateRegion region;
    if ([self.mapView.annotations count] > 1)
    {
        region = [self regionForAnnotations:self.mapView.annotations];
        region = MKCoordinateRegionMake(region.center, MKCoordinateSpanMake(region.span.latitudeDelta * 1.05, region.span.longitudeDelta * 1.05));  // expand the region by 5%
    }
    else
    {
        id<MKAnnotation> annotation = self.mapView.annotations[0];
        region = MKCoordinateRegionMakeWithDistance(annotation.coordinate, 100.0, 100.0); // >>>this line throws: "Thread 1: signal SIGABRT"<<<
    }
    [self.mapView setRegion:region animated:YES];
} 
```

自从更新到 iOS 6.1 模拟器后，它就无法工作了。

编辑：我收到此错误：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:43:17.723

几个想法：

1.  您是否检查过以确保您`IBOutlet`的`mapView`连接已连接？如果`self.mapView`是`nil`，应用程序可能会崩溃。

2.  您是否查看过`annotation.coordinate`以确保您在那里获得有效的结果？也许有一个`MKUserLocation`还没有有效值；

3.  我知道我是给你这个例程的人，但我注意到我们没有检查没有位置的情况。你可能想要这样的东西：

    ```
    if ([self.mapView.annotations count] > 0)
    {
        MKCoordinateRegion region;
        if ([self.mapView.annotations count] > 1)
        {
            region = [self regionForAnnotations:self.mapView.annotations];
            region = MKCoordinateRegionMake(region.center, MKCoordinateSpanMake(region.span.latitudeDelta * 1.05, region.span.longitudeDelta * 1.05));  // expand the region by 5%
        }
        else
        {
            id<MKAnnotation> annotation = self.mapView.annotations[0];
            region = MKCoordinateRegionMakeWithDistance(annotation.coordinate, 100.0, 100.0);
        }
        [self.mapView setRegion:region animated:YES];
    } 
    ```

4.  顺便说一句，我注意到您正在使用：

    ```
    parser.attributeNames = @[@"img src="]; 
    ```

    那是检索您的图片网址吗？我原以为那应该是：

    ```
    parser.attributeNames = @[@"src"]; 
    ```

    也许您对解析器进行了一些更改，但`attributeDict`of`didStartElement`永远不会有一个由`img src=`. 如果 XML 标记是`<img src="http://blah.blah.blah/0.jpg">`，那么您要查找的属性名称就是`src`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:02:26.517

您是否检查过您当时实际上有要使用的注释？也许你`self.mapView.annotations[0]`返回零。

# jquery - Kendo UI 在网格中突出显示文本

> ID：15505575
> 
> 赞同：1
> 
> 时间：2013-03-19T16:48:44.557
> 
> 标签：jquery, asp.net-mvc, kendo-ui

我正在尝试突出显示剑道网格​​中的文本。我正在使用[jQuery Highlight 插件](http://bartaz.github.com/sandbox.js/jquery.highlight.html)！突出显示文本。

我可以对普通的旧 html 网格使用突出显示插件。但是，当我尝试引用由 Kendo 生成的网格时，我无法让高亮显示工作。

这是我的 MVC 页面中的代码片段。

```
<div id="grid">
    @(Html.Kendo().Grid<MyModel>()...
</div> 
```

我用我的浏览器（IE、Chrome）查看了渲染的代码，并注意到有一个与网格关联的 <script> 标记。我从浏览器中获取了呈现的 HTML 和 <script> 标签并插入我的页面以验证突出显示是否正常工作。

当我删除以下标签时，突出显示有效。当它出现在出现时，突出显示不起作用。

```
<script>
        jQuery(function () { jQuery("#grid6cbf1150-e10f-4df3-890b-85d9b3e754e0").kendoGrid( ... ); });
</script> 
```

那么问题来了，这个标签是做什么来阻止高亮的呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:41:40.340

我尝试了hightlight演示，它似乎工作正常。检查我创建的以下示例：

不要忘记将样式添加到您的页面，以便您可以看到实际的突出显示：

```
<style>
.highlight {
    background-color: #FFFF88;
}
</style> 
```

[http://jsfiddle.net/ehnSq/18/](http://jsfiddle.net/ehnSq/18/)

# batch-file - Batch for 循环可以增加步长值吗？

> ID：15505576
> 
> 赞同：3
> 
> 时间：2013-03-19T16:48:47.350
> 
> 标签：batch-file, batch-processing

这可能是简短而甜蜜的，但我只是在检查。

批处理`for`命令可以**增加步进值**吗？

```
@echo off
SetLocal EnableDelayedExpansion
set xyz=200
for /l %%n in (100,%xyz%,26000) do (
    set /a value_=!value_!+1
    set x=%%n
    set value_!value_!=!x!
    echo value_!value_!=!x!
)
echo.
echo variable 'value_5' = !value_5!
echo.
pause 
```

运行上面的代码几乎可以满足我的需要（针对每个更高的变量依次生成更高的值）。唯一的区别是我需要每个循环将**步长值增加**两倍。+200 第一圈，+400 第二圈，+800 第三圈等。

目前，每个循环有 200 个，输出为：

```
value_1=100
value_2=300
value_3=500
value_4=700
value_5=900
value_6=1100
value_7=1300
...

...
variable 'value_5' = 900 
```

每次递增 200 (xyz)。我真的需要每次在前一个值上**加倍步长。**在 for 语句内部或外部添加计算不会更改输出。

所以输出将显示为：

```
value_1=100
value_2=300
value_3=700
value_4=1500
value_5=3100
value_6=6300
value_7=12700
value_8=25500

variable 'value_5' = 3100 
```

我希望这是有道理的。如果不可能，是否有另一种快速的方法来做到这一点，或者我会有很多

```
set value_1=100
set value_2=300
...

...
set value_98=xxx
set value_99=xxx 
```

线条占用大量空间。那我必须计算每一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:20:44.260

```
@echo off
SetLocal EnableDelayedExpansion
set xyz=200
SET minval=100
SET maxval=26000
SET /a numvals=2+((maxval-minval) / xyz)
SET num
for /l %%n in (1,1,%numvals%) do (
    IF !minval! LEQ %MAXVAL% (
     set /a value_%%n=!minval!
     SET /a minval+=xyz
     SET /a xyz=2*!xyz!
     )
)
echo.
echo variable 'value_5' = !value_5!
echo.
SET value_
pause 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:10:32.143

你确定批处理是最好的语言吗？这是您在 JScript 中寻找的内容：

```
// test.js
var val=[];
for (var x=y=100; x<=26000; y*=2, x+=y) {
    val.push(x);
    n = val.length - 1;
    WSH.echo("val[" + n + "]=" + x);
}
WSH.echo("\nvariable 'val[4]' = " + val[4] + '\n'); 
```

输出：

```
C:\Users\me\Desktop>cscript /nologo test.js
val[0]=100
val[1]=300
val[2]=700
val[3]=1500
val[4]=3100
val[5]=6300
val[6]=12700
val[7]=25500

variable 'val[4]' = 3100 
```

请记住，JavaScript 数组是 0 索引的，`element[0]`第一个元素在哪里，`element[1]`第二个元素在哪里，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:00:30.900

你也可以使用 %While% 循环来解决这个问题：

```
@echo off
setlocal EnableDelayedExpansion
rem Define auxiliary While variables
set While=if "%1" equ "While" ( for /L %%? in () do if
set Do=(
set EndWhile=) else exit ) else for /F %%a in ('cmd /Q /C "%~F0" While') do set %%a
rem While dispatcher
if "%1" equ "While" goto WhileBody
rem Original program
set xyz=200
set n=100
:WhileBody
%While% !n! leq 26000 %do%
    set /A value_+=1
    set value_!value_!=!n!
    echo value_!value_!=!n!
    set /A n+=xyz, xyz*=2
%EndWhile%
set value_
echo.
echo variable 'value_5' = !value_5!
echo.
pause 
```

[本站](http://www.dostips.com/forum/viewtopic.php?f=3&t=3487)详细介绍了之前程序的前 8 行。这种方法可以用在更通用的方式上，也更清晰（即对于“Original program”这一行）。

安东尼奥

# performance - Powershell SqlCommand 和 StreamWriter 慢写

> ID：15505577
> 
> 赞同：1
> 
> 时间：2013-03-19T16:48:47.730
> 
> 标签：performance, powershell, file-io, streamwriter, sqlcommand

我正在编写一个从数据库中提取任意 SQL 查询的 PowerShell 脚本。这些查询可能会变得非常大，在尝试 sqlcmd 之后，我最终得到了 StreamWriter / SqlCommand 组合。我遇到的问题是执行有点慢。就像 10 倍一样慢。我被告知它应该更快，因此问题。编码！

```
 $conn.ChangeDatabase("MyDB")
                $mycmd = new-object System.Data.SqlClient.SqlCommand($Myquery, $conn) 
                $mycmd.CommandType = [System.Data.CommandType]::Text
                $mycmd.CommandTimeout = 300
                echo "Executing Reader."        
                $Results = $mycmd.ExecuteReader()

                echo "Opening file for writing."                    
                $sw2 = new-object system.IO.StreamWriter($sqlOutput, 1)
                echo "File Opened for Writing."     
                $delimiter = ","
                echo "Starting Row Reading"
                $Counter = $Results.FieldCount
                echo $Counter
                # Put in header row on first execution.
                $currtext = ""
                if ($Counter -gt 0)
                {
                    echo "Writing Header Row as:"
                    for ($i = 0; $i -lt $Counter; $i++)
                    {
                        $currtext = $currtext + $Results.GetName($i)
                        if ($i -lt $Counter - 1)
                        {$currtext = $currtext + $delimiter}
                    }

                    echo $currtext
                    $sw2.writeline($currtext)
                    $firstexecution = 0
                }
                else
                {
                    $sw2.writeline("No Data Found")
                }

                $rowcount = 0
                while ($Results.Read())
                {
                    $rowcount = $rowcount + 1
                    #echo "Reading Row"
                    $i = 0
                    $currtext = ""
                    for ($i = 0; $i -lt $Counter; $i++)
                    {
                        #echo "Processing Row"
                        $currtext = $currtext + """" + [string]$Results[$i] + """" 
                        if ($i -lt $Counter - 1)
                            { $currtext = $currtext + $delimiter }
                    }
                    #echo "Writing Line."
                    #echo $currtext
                    $sw2.writeline($currtext)
                }
                echo "Total Rowcount:" + $rowcount
                $sw2.flush()
                $sw2.close()
                $sw2.dispose()
                $Results.close() 
```

任何人都知道我做错了什么/如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:56:03.237

添加管理单元：

```
Add-PSSnapin SqlServerCmdletSnapin100
Add-PSSnapin SqlServerProviderSnapin100 
```

调用你的变量：

```
$SQLUsername        = "user"
$SQLPassword        = "password"
$SQLDatabase        = "database"
$SQLServer          = "localhost" 
```

获取您的数据：

```
$DBComputers = Invoke-Sqlcmd -ServerInstance $SQLServer -Username $SQLUsername -Password $SQLPassword `
 -Database $SQLDatabase -Query "SELECT * FROM Physical WHERE Retired=0 AND OS LIKE '%Windows%' ORDER BY Name" 
```

遍历行：

```
foreach ( $DBComputer in $DBComputers ) {

    Write-Host $DBComputer.Name    ##$DBComputer.COLUMNNAME

} 
```

通过使用上面的以下示例，我已经使用 PowerShell 完成了很多 SQL。上面的示例以非常快的速度查询戴尔 R720 服务器上的 SQL 标准实例上的数据。这是 Microsoft Access 数据库还是真正的 SQL 实例？访问引擎并不理想，而且根据您的磁盘类型会很重要。

您提到了一个大型数据集，我认为最大的事情是确保数据库被索引并运行真正的 SQL 引擎，而无需从非代码角度了解更多关于数据库的信息。

# android - 检测通知是否已被删除

> ID：15505578
> 
> 赞同：3
> 
> 时间：2013-03-19T16:48:49.000
> 
> 标签：android, android-notifications, accessibilityservice

我有以下问题。我想检测何时从通知栏中删除了通知。

我可以使用 AccessbilityService 扫描通知并将其 ParcelableData 转换为通知

```
Notification notif = (Notification) event.getParcelableData(); 
```

我的一个想法是，利用通知的 PendingIntent 是否已被点击，但我找不到任何关于如何检测的信息。

有任何想法吗？我有点绝望......现在尝试了几个小时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-10T14:12:15.850

您可以在 Notification.Builder 上使用 setDeleteIntent：

[http://developer.android.com/reference/android/app/Notification.Builder.html#setDeleteIntent(android.app.PendingIntent)](http://developer.android.com/reference/android/app/Notification.Builder.html#setDeleteIntent(android.app.PendingIntent))

它可以用来做你想做的事（我想这对你来说太晚了，但它可以帮助别人）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:36:26.260

SO上已经回答了一个非常相似的问题：

[检测新的 Android 通知](https://stackoverflow.com/questions/9367196/detect-a-new-android-notification)

简而言之，可以检测到新通知何时出现，仅此而已。您无法检测到通知何时被解除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T21:32:38.433

据我所知，除非你有root，否则这是不可能的，但是从昨天发布的android 4.3 开始，这是可能的。这里有一些链接：

[安卓开发者博客](http://android-developers.blogspot.co.il/2013/07/android-43-and-updated-developer-tools.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20blogspot/hsDu%20%28Android%20Developers%20Blog%29)：

> 通知访问——您的应用程序现在可以在状态栏通知发布时访问并与之交互。您可以以任何您想要的方式显示它们，包括将它们路由到附近的蓝牙设备，并且您可以根据需要更新和关闭通知。

[安卓开发者网站](http://developer.android.com/about/versions/android-4.3.html#NotificationListener)：

> Android 4.3 添加了一个新的服务类 NotificationListenerService，它允许您的应用在系统发布新通知时接收有关它们的信息。
> 
> 如果您的应用当前使用无障碍服务 API 来访问系统通知，您应该更新您的应用以改用这些 API。

[android 开发者网站 - API 说明](http://developer.android.com/about/versions/jelly-bean.html#43-beautiful-apps)：

访问通知

> 通知长期以来一直是一种流行的 Android 功能，因为它们让用户可以在一个地方查看来自整个系统的信息和更新。现在在 Android 4.3 中，应用程序可以在用户许可的情况下观察通知流，并以他们想要的任何方式显示通知，包括将它们发送到通过蓝牙连接的附近设备。
> 
> 您可以通过新的 API 访问通知，这些 API 允许您注册通知侦听器服务，并在用户许可的情况下接收状态栏中显示的通知。通知将完整发送给您，其中包含有关原始应用程序、发布时间、内容视图和样式以及优先级的所有详细信息。您可以评估通知中感兴趣的字段，处理或添加应用程序的上下文，并以您选择的任何方式路由它们以进行显示。
> 
> 新 API 在添加、更新和删除通知时为您提供回调（因为用户关闭它或原始应用程序撤回它）。您将能够启动附加到通知或其操作的任何意图，以及将其从系统中关闭，从而允许您的应用程序为通知提供完整的用户界面。

当然还有这个新监听器的 API 文档，在[这个链接中](http://developer.android.com/reference/android/service/notification/NotificationListenerService.html#onNotificationRemoved%28android.service.notification.StatusBarNotification%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-03T19:45:09.393

如果您扩展 NotificationListener 并在回调中做自己的事情，这是可能的： [https ://developer.android.com/reference/android/service/notification/NotificationListenerService.html](https://developer.android.com/reference/android/service/notification/NotificationListenerService.html)

# java - GWT 从小程序调用 JS 方法

> ID：15505579
> 
> 赞同：1
> 
> 时间：2013-03-19T16:48:49.757
> 
> 标签：java, javascript, gwt, applet

我试图从小程序调用 Javascript 方法，我阅读了一些示例，但没有任何效果。

小程序：

```
 JSObject window = JSObject.getWindow(this);
        String[] args = new String[]{"some string"};
        window.call("alert2 ", args); 
```

GWT，查看

```
 public static native void export() /*-{
    $wnd.alert2 = function(result) {
        @cl.covepa.client.main.shared.view.DlgVerificarHuellaView::alert2(Ljava/lang/String;)(result);
    }
}-*/;

public static void alert2(String result) {
    Dialogs.getInstance().alert("CONFIRMACION :" + result);
} 
```

在构造函数调用中，我也在 onModuleLoad 中进行了测试。

```
export(); 
```

当小程序运行时，它说

> JavaScript 对象上没有这样的方法“alert2”

没关系，我知道代码被混淆了，但我想这是方法保留其名称的方式，但不起作用，我仍然在客户端看到这个

```
function dBb(){$wnd.alert2=function(a){T2c((!S2c&&(S2c=new X2c),S2c),'CONFIRMACION :'+a)}} 
```

我想念什么？！谢谢

**更新 ：**

HTMLPanel 包含一个带有此字符串的 HTML 对象，它在显示对话框中添加。

```
<div> 
   <applet id="uploadApplet" code="app.VerifHuella.class" 
           archive="VerificarHuella.jar" width="322" height="465" MAYSCRIPT>
       <param name="RUT" value="15645322"/>
   </applet> 
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:32:37.420

您的问题似乎是您调用该方法时该方法在窗口中不可用。这可能是因为三个原因：

*   在 gwt 排列的异步加载发生之前，您的 appled 运行。
*   你没有`export()`在你的`onModuleLoad()`
*   你的 alert2 方法不是静态的

无论如何，如果您想在不使用一行 jsni 的情况下导出类和方法，您可以尝试[gwtexporter](http://code.google.com/p/gwt-exporter/)，在您的情况下，您的代码可能如下所示：

```
 class DlgVerificarHuellaView implements Exportable {
    @Export($wnd.alert2)
    public static void alert2(String msg) {
    }
 } 
```

另一种无需编写 jsni 即可导出函数的好方法是使用[gwtquery](http://code.google.com/p/gwtquery/)：

```
import static com.google.gwt.query.client.GQuery.*

Properties wnd = window.cast();
wnd.setFunction("alert2", new Function() {
  public void f() {
    Properties arg = getDataProperties();
    DlgVerificarHuellaView.alert2(arg.get(0));
  }
}); 
```

# java - 如何让自定义 javadoc 标记出现在 netbeans 的自动完成 javadoc 中？

> ID：15505580
> 
> 赞同：1
> 
> 时间：2013-03-19T16:48:50.430
> 
> 标签：java, netbeans, javadoc

我在属性的构建部分添加了一个自定义标签@modifies，如下所示：

-tag 修改：a:"此方法修改："

这仅在我单击“生成 javadoc”时出现，而不是在我查看 netbeans 中的方法时出现，在该窗口中，我得到显示该方法采用的所有参数和其他 javadoc 内容的窗口。

编辑：要清楚，这与注释无关。注释在 javadoc 注释之外，在运行时和编译时使用，标签仅由 javadoc 生成器使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T15:15:18.557

我们最终将我们的 javadoc 标签包装在 html/bold 中，使其看起来与现有的 javadoc 注释相似。结果很接近，他们看起来一样。

# python - 如何在 re.findall 中显示在 python 中具有字符串和数字的模式的所有匹配项

> ID：15505582
> 
> 赞同：1
> 
> 时间：2013-03-19T16:48:59.173
> 
> 标签：python, regex, search, match

我想提取以下模式的所有匹配项：

```
pattern = 'link_uid=[0-9]' 
```

我的字符串看起来像：

```
astr = 'this is test link_uid=23500534 and the second test is link_uid=12345' 
```

我正在寻找以下输出：

```
link_uid=23500534
link_uid=12345 
```

当我这样做时，`re.findall('link_uid=[0-9]', astr)`我得到：`link_uid=2, link_uid=1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:51:31.673

您的输入包含多个数字，将其与：

```
r'link_uid=\d+' 
```

结果：

```
>>> re.findall(r'link_uid=\d+', astr)
['link_uid=23500534', 'link_uid=12345'] 
```

# r - 使用cut()时如何处理NA？

> ID：15505587
> 
> 赞同：4
> 
> 时间：2013-03-19T16:49:10.350
> 
> 标签：r, na

我有两个具有 (1440*720) 相同尺寸的二进制文件：我想根据第二个文件值（间隔）取第一个文件的平均值，这个文件的值范围从 1 到 7。只要值在0-1之间的第二个文件范围内，计算第一个文件中对应的平均值并返回结果，对2-3,3-4,5-6,7-8做同样的事情。没有数据值被分配为不适用。

1-读取第一个文件：

```
 conne <- file("C:\\corr.bin","rb")
  corr<- readBin(conne, numeric(), size=4,  n=1440*720, signed=TRUE) 
```

2-读取第二个文件：

```
 conne1<- file("C:\\use.bin","rb")
   cus<- readBin(conne1, numeric(), size=4,  n=1440*720, signed=TRUE)

       cusBREAK <- cut(cus,10:80))
      (corrMEAN <- aggregate(corr, list(cusBREAK), mean)) 
```

但是我得到了 NA，这意味着如果其中一个像素中有 NA，则将平均值返回为 NA。

```
 (corrMEAN <- aggregate(corr, list(cusBREAK), mean))
      Group.1   x
     1   (0,1] NaN
     2   (1,2] NaN
     3   (2,3] NaN
     4   (3,4] NaN
     5   (4,5] NaN 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T08:04:42.743

似乎您需要告诉`mean`函数省略`NA`值：

```
aggregate(corr, list(cusBREAK), mean, na.rm=TRUE) 
```

# html - 画布与 HTML DOM？

> ID：15505592
> 
> 赞同：0
> 
> 时间：2013-03-19T16:49:31.280
> 
> 标签：html, dom, canvas

我想做一些非常小的游戏。[是这里。](http://e-shoppingpark.cz/test4/)

用户：honza 密码：honza

我不知道我应该使用画布还是 HTML DOM。当我更改部分、缩放和移动时，我只想重绘大约 20 张图片（蓝色块中的 10 张和灰色块中的 10 张）。大概会有一个感动的人。你有什么意见？我应该使用画布还是 HTML DOM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:00:36.127

DOM 中的操作（移动内容、动画、更改颜色等）将导致浏览器**重绘**和**重**排元素，这是一个消耗资源的过程。尤其是在您有大量持续的视觉更新的情况下，这些更新会不断触发浏览器进行处理，从而导致低端系统上的用户体验缓慢、滞后。

另一方面，画布不会那么多，因为`<canvas>`元素的大小相同，所以没有`reflow`任何动画等只会`repaint`在`<canvas>`.

有关更详尽的解释，请参阅此：[http ://www.phpied.com/rendering-repaint-reflowrelayout-restyle/](http://www.phpied.com/rendering-repaint-reflowrelayout-restyle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:00:01.877

如果您可以使用普通的旧 DOM 元素为游戏制作所有必要的动画，那么我认为这就足够了，但是对于任何类型的复杂动画，我建议使用画布。

假设您移动的人不包括非连续动画，您所描述的似乎完全可以使用 DOM。您可以在没有画布的情况下创建相对复杂的动画，这比使用画布做同样的工作要多得多。

如果您这样做是为了学习新事物，那么请选择画布，因为它将为您提供更好的服务。

# android - GoogleMap：编辑标记和折线

> ID：15505593
> 
> 赞同：0
> 
> 时间：2013-03-19T16:49:38.453
> 
> 标签：android, hashmap, google-maps-api-2

我有一个很长的、可变的`Marker`s 和`Polyline`s 列表，我从我的服务器获取。在某些情况下，`Marker`s 必须更改其图标，`Polyline`s 必须更改其颜色。

我的对象有 id，所以我应该能够知道我必须更新哪个折线/标记。但是，Markers 和 Polylines 没有`setId()`or`getId()`方法，它们会在服务器请求时动态更新（和添加）。

我考虑过使用 a`HashMap<Integer, Marker>`和 a`HashMap<Integer, Polyline>`来了解应该删除然后添加哪些项目。我想过这个：

*   我收到一个项目。我得到了它的 ID。
*   我查询正确`HashMap`的具有相同 ID 的项目。
*   如果 HashMap 不返回 null，我调用`Marker.remove()`or `Polyline.remove()`，然后从`HashMap`
*   现在`hashMap.get(id)`无论如何都应该返回 null，所以我`Polyline`在`Marker`将`GoogleMap`项目添加到`HashMap`.

但是在我开始实施之前，我想知道是否有任何方法可以不涉及使用 Giant `HashMap`s。

有没有其他方法可以在不使用`HashMap`s、`SparseArray`s 或类似的东西的情况下实现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:59:48.337

我只使用过一次适用于 Android 的 Google Map API，但我很确定，在检查了与之相关的文档后，应该可以添加一些 Listeners。

您能否提供信息应在哪些条件下更改？例如，如果单击时标记发生变化，则可以使用 GoogleMap.OnMarkerClickListener [https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnMarkerClickListener](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnMarkerClickListener)

无论如何，如果您有标记的引用，带有 Java 变量，您不能更改该信息吗？或者简单地说，当你所说的这种“条件”发生时，你不能清除地图上的标记并再次添加它们吗？您不会有相同的标记，但结果将是相同的。当标记已经附加到地图上时，恐怕您无法修改它们，但您可以尝试一下。

# c# - 如何将 String Array 值分配给 Collection 或如何比较 Array 和 LIst 值

> ID：15505600
> 
> 赞同：0
> 
> 时间：2013-03-19T16:50:11.957
> 
> 标签：c#, asp.net-mvc, arrays

我输入了 1、2、3、4，我将它们传递给一个只返回有效 ID 的 Web 服务。

例如，列表 [1,4] 是有效的，这意味着它返回 1 和 4。我需要 1 和 4 作为有效列表，而 2 和 3 作为无效列表。

我从网络服务获得了有效列表`ValidList`。问题是，如何获取无效列表。

```
public ActionResult MethodName(Class LookUp)
{

  int totalRecords;

  Collection<Class> ValidList = new Collection<Class>();
  Collection<Class> invalidList = new Collection<Class>();

  string[] arrId = LookUp.SearchKey.Split(',');

  if (LookUp.SearchKey != "")
  {
    ValidList = Helpers.ProcessException<Collection<Class>>(() => WebserviceMethodName(LookUp));
  }

  totalRecords = ValidList.Count;

  // I  Tried This but it wont works
   //invalidList = lookUpList.Select(i => new { ID = i.ID }).Any(i => arrId);

  // I want Valid and Invalid List 

  return Json(lookUpList);                        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:54:52.527

试试这个 invalidList = lookUpList.Except(arrId.ToList())。

# ios - 在 facebook sdk ios 上获取 user_likes

> ID：15505601
> 
> 赞同：0
> 
> 时间：2013-03-19T16:50:14.053
> 
> 标签：ios, facebook-ios-sdk

我请求访问用户的喜欢，但我找不到一个片段来实际访问它。以下是我请求访问用户喜欢的方式（我还请求允许代表他发帖）：

```
NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"publish_actions",
                        @"user_likes",
                        nil];

[FBSession openActiveSessionWithPublishPermissions:permissions defaultAudience:FBSessionDefaultAudienceEveryone allowLoginUI:YES
                              completionHandler:
 ^(FBSession *session,
   FBSessionState state, NSError *error) {
     [self sessionStateChanged:session state:state error:error];
 }]; 
```

哪个和 AlertView 弹出显示我要求用户喜欢和发布权限，但是在回调中我无法读取`NSDictionary<FBGraphUser> *user`发送给我的喜欢，只包含基本的个人资料信息。

```
 if (FBSession.activeSession.isOpen) {
    [[FBRequest requestForMe] startWithCompletionHandler:
     ^(FBRequestConnection *connection,
       NSDictionary<FBGraphUser> *user,
       NSError *error) {
         if (!error) {
             NSLog(@"%@", user);
         }
       }
  } 
```

有什么想法可以让用户喜欢吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T07:25:46.237

```
[FBRequestConnection startWithGraphPath:@"/me/posts?fields=likes" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    if(error) {
        NSLog(@"%@", error);
        return;
    }

    NSArray *myLikes = (NSArray*)[result data];
    // Do something with myLikes
}]; 
```

使用 myLikes writeToFile: 作为 *.plist 来检查数据的组织方式。希望这可以帮助。

# r - 热图中 x 轴上的对角线标签方向

> ID：15505607
> 
> 赞同：29
> 
> 时间：2013-03-19T16:50:28.907
> 
> 标签：r, label, data-visualization, heatmap, lattice

在 R 中创建热图已成为许多帖子、讨论和迭代的主题。我的主要问题是，将 lattice`levelplot()`或 basic graphics中可用解决方案的视觉灵活性与 basic's 、 pheatmap's或 gplots'`image()`的轻松聚类相结合是很棘手的。这是我想要更改的一个小细节 - x 轴上标签的对角线方向。让我向您展示我在代码中的观点。`heatmap()``pheatmap()``heatmap.2()`

```
#example data
d <- matrix(rnorm(25), 5, 5)
colnames(d) = paste("bip", 1:5, sep = "")
rownames(d) = paste("blob", 1:5, sep = "") 
```

您可以使用以下命令轻松将方向更改为对角线`levelplot()`：

```
require(lattice)
levelplot(d, scale=list(x=list(rot=45))) 
```

![在此处输入图像描述](../Images/b1fd4a629e06002d97397c22250be203.png)

但应用聚类似乎很痛苦。其他视觉选项也是如此，例如在热图单元格周围添加边框。

现在，转向实际的`heatmap()`相关功能、聚类和所有基本视觉效果都非常简单——几乎不需要调整：

```
heatmap(d) 
```

![在此处输入图像描述](../Images/d432f85816805d49bbbdfe431868d2e8.png)

这里也是：

```
require(gplots)
heatmap.2(d, key=F) 
```

![在此处输入图像描述](../Images/9ed79c3a22402f1dcc1a10defb1c49ef.png)

最后，我最喜欢的一个：

```
require(pheatmap)
pheatmap(d) 
```

![在此处输入图像描述](../Images/67a807d612f6b04fada1684344c7711b.png)

但所有这些都**没有选择旋转标签**。Manual for`pheatmap`建议我可以`grid.text`用来定制我的标签。这是多么令人高兴——尤其是在聚类和更改显示标签的顺序时。除非我在这里遗漏了什么......

最后，有一个旧的好`image()`。我可以旋转标签，通常它是最可定制的解决方案，但没有集群选项。

```
image(1:nrow(d),1:ncol(d), d, axes=F, ylab="", xlab="")
text(1:ncol(d), 0, srt = 45, labels = rownames(d), xpd = TRUE)
axis(1, label=F)
axis(2, 1:nrow(d), colnames(d), las=1) 
```

![在此处输入图像描述](../Images/1ffa89f8a9ce9690f2f089d6bd5522d5.png)

那么我应该怎么做才能获得理想的、快速的热图、聚类和方向以及漂亮的视觉特征呢？我的最佳出价正在改变`heatmap()`，或者`pheatmap()`不知何故，因为这两个似乎在调整方面最通用。但欢迎任何解决方案。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-19T17:41:21.737

要解决`pheatmap`这个问题，您真正想做的就是在它的调用中进入`pheatmap:::draw_colnames`并调整几个设置`grid.text()`。这是一种方法，使用`assignInNamespace()`. （它可能需要额外的调整，但你得到了图片；）：

```
library(grid)     ## Need to attach (and not just load) grid package
library(pheatmap)

## Your data
d <- matrix(rnorm(25), 5, 5)
colnames(d) = paste("bip", 1:5, sep = "")
rownames(d) = paste("blob", 1:5, sep = "")

## Edit body of pheatmap:::draw_colnames, customizing it to your liking
draw_colnames_45 <- function (coln, ...) {
    m = length(coln)
    x = (1:m)/m - 1/2/m
    grid.text(coln, x = x, y = unit(0.96, "npc"), vjust = .5, 
        hjust = 1, rot = 45, gp = gpar(...)) ## Was 'hjust=0' and 'rot=270'
}

## For pheatmap_1.0.8 and later:
draw_colnames_45 <- function (coln, gaps, ...) {
    coord = pheatmap:::find_coordinates(length(coln), gaps)
    x = coord$coord - 0.5 * coord$size
    res = textGrob(coln, x = x, y = unit(1, "npc") - unit(3,"bigpts"), vjust = 0.5, hjust = 1, rot = 45, gp = gpar(...))
    return(res)}

## 'Overwrite' default draw_colnames with your own version 
assignInNamespace(x="draw_colnames", value="draw_colnames_45",
ns=asNamespace("pheatmap"))

## Try it out
pheatmap(d) 
```

[![在此处输入图像描述](../Images/74d1715c116d896934216b3fae8a3047.png)](https://i.stack.imgur.com/9gNfN.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T17:20:26.557

它比我的评论假设的要复杂一些，因为`heatmap`为了绘制树状图而分解了绘图区域，而最后一个绘图区域不是`image`您要附加标签的绘图。

虽然 as`heatmap`提供了一个解决方案，但它提供了在绘制`add.expr`时需要评估表达式的参数。`image`人们还需要知道由于树状图排序而发生的标签重新排序。最后一点涉及一些不雅的技巧，因为我将首先绘制热图以获取重新排序信息，然后使用它来正确绘制带有角度标签的热图。

首先是一个例子`?heatmap`

```
 x  <- as.matrix(mtcars)
 rc <- rainbow(nrow(x), start = 0, end = .3)
 cc <- rainbow(ncol(x), start = 0, end = .3)
 hv <- heatmap(x, col = cm.colors(256), scale = "column",
               RowSideColors = rc, ColSideColors = cc, margins = c(5,10),
               xlab = "specification variables", ylab =  "Car Models",
               main = "heatmap(<Mtcars data>, ..., scale = \"column\")") 
```

在这个阶段，标签不是我们想要的，而是`hv`包含我们需要在其组件中重新排序`colnames`of的信息：`mtcars``$colInd`

```
> hv$colInd
 [1]  2  9  8 11  6  5 10  7  1  4  3 
```

您可以像使用输出一样使用它，`order`例如：

```
> colnames(mtcars)[hv$colInd]
 [1] "cyl"  "am"   "vs"   "carb" "wt"   "drat" "gear" "qsec" "mpg"  "hp"  
[11] "disp" 
```

现在使用它以正确的顺序生成我们想要的标签：

```
 labs <- colnames(mtcars)[hv$colInd] 
```

然后我们重新调用`heatmap`，但这次我们指定`labCol = ""`抑制列变量的标签（使用零长度字符串）。我们还使用调用来`text`以所需的角度绘制标签。调用`text`是：

```
text(x = seq_along(labs), y = -0.2, srt = 45, labels = labs, xpd = TRUE) 
```

这本质上就是您的问题。使用 的值，`y`您需要将其调整为字符串的长度，以使标签不与`image`绘图重叠。我们指定`labels = labs`按要求的顺序传入我们想要绘制的标签。整个`text`调用被传递给`add.expr`unquoted。这是整个通话：

```
 hv <- heatmap(x, col = cm.colors(256), scale = "column",
               RowSideColors = rc, ColSideColors = cc, margins = c(5,10),
               xlab = "specification variables", ylab =  "Car Models",
               labCol = "",
               main = "heatmap(<Mtcars data>, ..., scale = \"column\")",
               add.expr = text(x = seq_along(labs), y = -0.2, srt = 45,
                               labels = labs, xpd = TRUE)) 
```

结果是：

![在此处输入图像描述](../Images/b0c8bf07277563a67736a1ef124f330d.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-14T13:50:57.897

我也在寻找用热图旋转标签文本的方法。最终我设法找到了这个解决方案：

```
library(gplots)

library(RColorBrewer)

heatmap.2(x,col=rev(brewer.pal(11,"Spectral")),cexRow=1,cexCol=1,margins=c(12,8),trace="none",srtCol=45) 
```

关键参数是`srtCol(or srtRow for row labels)`，用于在 gplots 中旋转列标签。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-02-28T06:50:03.823

[2019-01-04 发布](https://cran.r-project.org/web/packages/pheatmap/NEWS)的最新版本[`pheatmap`](https://cran.r-project.org/web/packages/pheatmap/index.html)（1.0.12）通过参数支持这一点。`angle_col`

```
#example data
d <- matrix(rnorm(25), 5, 5)
colnames(d) = paste("bip", 1:5, sep = "")
rownames(d) = paste("blob", 1:5, sep = "")

#update to latest version on CRAN
install.packages("pheatmap")
library("pheatmap")
pheatmap(d, angle_col = 45) 
```

[![带有角度列标签的漂亮热图](../Images/36c3ee48948187d4777f0e194aed0231.png)](https://i.stack.imgur.com/HFqnw.png)

我在 GitHub 上创建了一个包，其中包含该`heatmap.2`功能的改进版本。这支持调整轴标签，包括`srtCol`传递给`axis`函数的参数。它可以从以下位置安装：[https ://github.com/TomKellyGenetics/heatmap.2x](https://github.com/TomKellyGenetics/heatmap.2x)

```
library("devtools")
install_github("TomKellyGenetics/heatmap.2x")
library("heatmap.2x")

heatmap.2x(d, scale = "none", trace = "none", col = heat.colors, srtCol = 45) 
```

[![带有角度列标签的增强 heatmap.2x](../Images/7bd3914b9da9b9463d51916930aca30a.png)](https://i.stack.imgur.com/hyJbT.png)

从[2.12.1 版本](https://cran.r-project.org/web/packages/gplots/NEWS)开始[`gplots`](https://cran.r-project.org/web/packages/gplots)，该`heatmap.2`函数还支持该`srtCol`参数。

```
library("gplots")
heatmap.2(d, scale = "none", trace = "none", srtCol = 45) 
```

[![heatmap.2 带有倾斜的列标签](../Images/91220d3f77676b65f7aa55f78d44023c.png)](https://i.stack.imgur.com/EFlYR.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-20T22:22:42.773

使用`lattice::levelplot`and的解决方案`latticeExtra::dendrogramGrob`：

```
library(lattice)
library(latticeExtra) 
```

示例数据：

```
d <- matrix(rnorm(25), 5, 5)
colnames(d) = paste("bip", 1:5, sep = "")
rownames(d) = paste("blob", 1:5, sep = "") 
```

您必须为行和列定义树状图（在内部计算`heatmap`）：

```
dd.row <- as.dendrogram(hclust(dist(d)))
row.ord <- order.dendrogram(dd.row)

dd.col <- as.dendrogram(hclust(dist(t(d))))
col.ord <- order.dendrogram(dd.col) 
```

并将它们传递给的 参数中`dendrogramGrob`的函数。`legend``levelplot`

我定义了一个新主题，颜色来自，并使用 和`RColorBrewer`修改了单元格边框的宽度和颜色：`border``border.lwd`

```
myTheme <- custom.theme(region=brewer.pal(n=11, 'RdBu'))

levelplot(d[row.ord, col.ord],
          aspect = "fill", xlab='', ylab='',
          scales = list(x = list(rot = 45)),
          colorkey = list(space = "bottom"),
          par.settings=myTheme,
          border='black', border.lwd=.6,
          legend =
          list(right =
               list(fun = dendrogramGrob,
                    args =
                    list(x = dd.col, ord = col.ord,
                         side = "right",
                         size = 10)),
               top =
               list(fun = dendrogramGrob,
                    args =
                    list(x = dd.row,
                         side = "top")))) 
```

![带树状图的水平图](../Images/dc74fb956f00a3fe01c52de08d9d7289.png)

您甚至可以使用`shrink`参数来缩放与它们的值成比例的单元格大小。

```
levelplot(d[row.ord, col.ord],
          aspect = "fill", xlab='', ylab='',
          scales = list(x = list(rot = 45)),
          colorkey = list(space = "bottom"),
          par.settings=myTheme,
          border='black', border.lwd=.6,
          shrink=c(.75, .95),
          legend =
          list(right =
               list(fun = dendrogramGrob,
                    args =
                    list(x = dd.col, ord = col.ord,
                         side = "right",
                         size = 10)),
               top =
               list(fun = dendrogramGrob,
                    args =
                    list(x = dd.row,
                         side = "top")))) 
```

![具有树状图和缩放单元格大小的 levelplot](../Images/83f4ecf71080758f0c65af5f064e0e99.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-07T01:59:09.140

我能够接受 Gavin Simpson 的回答并将其剪裁一点，以便为我工作以进行简单的原型设计，`data1`read.csv() 对象在哪里`data1_matrix`，当然还有从中产生的矩阵

```
heatmap(data_matrix, Rowv=NA, Colv=NA, col=heat.colors(64), scale='column', margins=c(5,10),
   labCol="", add.expr = text(x = seq_along(colnames(data1)), y=-0.2, srt=45, 
   labels=colnames(data1), xpd=TRUE)) 
```

繁荣！谢谢加文。

这个工作的一个关键位是`add.expr`他将labCol设置为“”的位之前的部分，这是防止以前（直下）标签与新的45度标签重叠所必需的

# regex - 没有结尾斜杠的 url 正则表达式模式并排除 url 中的某些文本

> ID：15505610
> 
> 赞同：0
> 
> 时间：2013-03-19T16:50:46.160
> 
> 标签：regex

我正在寻找 preg_match_all 模式来查找页面上没有斜杠的所有 URL。

例如：如果我有

```
a href="/testing/abc/">end with slash

a href="/testing/test/mnl">no ending slash 
```

结果将是#2。解决方案发布在[find pattern for url with no end slash](https://stackoverflow.com/questions/15414909/find-pattern-for-url-with-no-ending-slash)

我试图修改提供的模式以排除具有“图像”或“.pdf”但还没有运气的网址。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:03:26.997

这应该适合您的需求（[演示](http://regexr.com?346iv)）：

```
href="(?:(?<!images).(?!(?:[.]pdf|/)"))*?" 
```

*   `(?:)`= 非捕获组
*   `(?<!images).`= 任何前面没有的字符`images`
*   `.(?!(?:[.]pdf|/)")``.pdf"`= 任何不跟也不跟的字符`/"`
*   `*?`=*匹配尽可能短*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:01:30.907

我找到了一种方法来排除具有 .pdf 的链接，方法是修改另一个问题提供的答案。仍在研究为什么它与图像示例不匹配。

```
href=(['"])[^\s]+(?<![\/]|.pdf)\1 
```

链接到工作测试[http://www.rubular.com/r/jmBVstpGZD](http://www.rubular.com/r/jmBVstpGZD)

# jquery - 第一个 ajax 请求在 Firefox 中非常慢，但在 IE 中很快

> ID：15505611
> 
> 赞同：2
> 
> 时间：2013-03-19T16:50:49.937
> 
> 标签：jquery, ajax, firefox

我有一个简单的 jQuery Ajax 请求，服务器用一个静态的空 JSON 数组回复该请求（以排除任何数据库性能问题）。该请求被`.change`一个`select`字段调用；结果用于突出显示/禁用某些`select`字段的条目。

```
$.post(url, $('#inputForm').serialize(), function(data) {//do something}); 
```

在页面刷新后第一次发送请求时，Firefox (19) 需要几秒——有时超过 10 秒——才能获得响应（如 Firebug 中所示）。然而，随后的响应会在几毫秒内收到。IE（9），有点令人惊讶的是，页面刷新后立即得到快速响应。

该行为与是否正在发送缓存控制标头无关。

该问题已在[类似问题](https://stackoverflow.com/questions/492730/jquery-ajax-function-call-is-slow-first-time)中提出，但尚未得到回答。

关于什么可能会在第一次请求时减慢 Firefox 的任何想法？

![在此处输入图像描述](../Images/157dac901d5e6b1e64d64c091724fd04.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T18:40:32.270

将 localhost 更改为 127.0.0.1，修复了我的慢 Firefox ver26.0 慢 ajax 问题。

# jquery - 浏览器调整大小条件并不总是正确触发

> ID：15505620
> 
> 赞同：3
> 
> 时间：2013-03-19T16:51:13.960
> 
> 标签：jquery, if-statement, resize

在调整浏览器大小时，我有一个简单的功能可以检查窗口比例以影响布局，其中一部分是：

```
if ( jQ(window).width() > ($elemH*2) ) /* Target widest settings */ {
    $body.addClass('wide').removeClass('tall');
    $elemW = ($elemH*2);
    productWideSize(); 
```

以上工作完美，有 0 个问题（我将其包括在内纯粹是为了上下文）。问题似乎出在`productWideSize()`，如下：

```
function productWideSize(){
    $info = jQ('#productInfo');
    $infoH = jQ('#productInfo').outerHeight();
    $maxH = (jQ('#product-form').height()-120);
    if ( $infoH < $maxH ) /* Check if element height is LT available space */ {
        $info.removeClass('scroll').css({
            'margin-top' : '-' + $infoH/2 + 'px'
        })
    } else {
        $info.addClass('scroll').css({
            'margin-top' : '',
        })
    };
}; 
```

仔细调整浏览器的大小时，效果很好；但是如果突然改变浏览器大小，通常 if/else 部分之间的转换不会触发。在 Chrome 和 Firefox 中测试。

显然代码“有效”，但它并不是特别健壮。我对编码还是很陌生，想知道我是否采用了一些根本上不好的做法。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:41:19.893

似乎问题是在条件中引用它们之前缓存这些值。将其更改为以下作品：

```
function productWideSize(){
    $info = jQ('#productInfo');
    if ( jQ('#productInfo').outerHeight() < jQ('#product-form').height()-120 ) {
        $info.removeClass('scroll').css({
            'margin-top' : '-' + jQ('#productInfo').outerHeight()/2 + 'px'
        })
    } else {
        $info.addClass('scroll').css({
            'margin-top' : '',
        })
    }
}; 
```

# internet-explorer-9 - 任何人都知道为什么 IE9 typeof console.log 报告“对象”，其他人报告“功能”？

> ID：15505621
> 
> 赞同：4
> 
> 时间：2013-03-19T16:51:17.567
> 
> 标签：internet-explorer-9, ie-developer-tools, console.log

在 Firefox/Chrome/others 中，typeof console.log 报告“功能”。在 IE9 中，（假设开发者控制台已打开，因此定义了 window.console 属性），如果您在开发者控制台中显示变量 console.log，则显示

```
function(...) {
[native code]
} 
```

但它会将 typeof console.log 报告为“对象”。该标准规定，功能应该被报告为“功能”。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:05:45.457

这似乎是 IE 中的一个错误，因为许多（或所有）应该是函数的控制台元素似乎是对象。

如果您尝试调用不存在的函数方法，那么您可能需要参考这篇文章： [http ://whattheheadsaid.com/2011/04/internet-explorer-9s-problematic-console-object](http://whattheheadsaid.com/2011/04/internet-explorer-9s-problematic-console-object)

否则，最简单的解决方案是：

```
typeof(console.log) !== 'undefined' 
```

这不是最漂亮的解决方案，因为它确实是 IE 不符合标准的错误，尽管他们有相反的想法，但 console.log 不应该是一个对象或函数，所以它应该可以安全使用。否则你可以做一些更复杂的事情，比如：

```
switch (typeof(console.log)) {
    case 'object':
    case 'function':
        // Should be a valid console.log object, do something with it
    break;
} 
```

# ctags - 如何使 ctags 成为默认索引？

> ID：15505623
> 
> 赞同：1
> 
> 时间：2013-03-19T16:51:29.690
> 
> 标签：ctags

我最近开始从事多个项目。所有项目都完全使用 C 语言。我已经安装了 exuberant-ctags 以便于浏览代码。ctags 是一个很棒的工具，但我有一个问题。我通常为我的日常开发克隆许多存储库并浏览代码。那么有没有一种方法可以让 ctags 自动生成标签文件，而无需我手动创建标签文件，无论何时我下载新的 repo 以及当我向现有 repo 添加新代码时？

# android - Android 滚动视图自动调整大小

> ID：15505626
> 
> 赞同：1
> 
> 时间：2013-03-19T16:51:39.413
> 
> 标签：android, layout, android-edittext, autoresize

我是android开发的新手。我正在尝试做一些我认为很简单的事情，但经过大量阅读、反复试验和决心后，我未能找到一个我觉得简单而优雅的解决方案，因此我正在寻求有关如何处理以下问题的帮助：

我有两个 UI 元素，一个读取“TextView”的文本视图和一个 EditText 框：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:ems="10"
    android:gravity="top|left"
    android:inputType="textMultiLine"
    android:scrollbarAlwaysDrawVerticalTrack="false"
    android:scrollbarStyle="insideOverlay" >
    <requestFocus />
</EditText>

</LinearLayout> 
```

我试图实现的行为是：当用户将文本添加到 EditText 框时，它会扩展和增长——在某些时候它会增长到足以将 TextView 滚动到屏幕外。我希望 TextView 内容始终可见。因此，EditText 或者可能是它所在的容器需要剪辑它的内容，而不是滚动整个屏幕。

与 EditText 一起，我尝试了使用以下元素的所有可能迭代，但无法找到解决方案。

*   滚动视图
*   框架布局
*   线性布局

如果可能的话，我更愿意在纯 xml 中实现这个解决方案，这样我就可以保持良好的关注点分离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:55:33.077

使用`minLines`和`maxLines`(of ) 分别指定可以收缩/增长到`EditText`的最小值和最大值。`EditText`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:19:04.347

尝试将其包裹起来`EditText`以`ScrollView`使其可滚动。设置`ScrollView` `layout_weight`属性 to`1`和`fillViewport`to`true`将强制 ScrollView 填充可用空间，但永远不会推出`TextView`屏幕。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:fillViewport="true" >
        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:gravity="top|left"
            android:inputType="textMultiLine"
            android:scrollbarAlwaysDrawVerticalTrack="false"
            android:scrollbarStyle="insideOverlay" >
            <requestFocus />
        </EditText>
    </ScrollView>
</LinearLayout> 
```

# bioinformatics - ChIP-seq 数据处理和程序 SPP 的输出

> ID：15505635
> 
> 赞同：0
> 
> 时间：2013-03-19T16:52:09.770
> 
> 标签：bioinformatics, spp

我一直在用 spp 处理一些 ChIP-seq 数据。我浏览了文献，似乎 spp 被认为是一个很好的程序（ENCODE 使用它）。我找到并改编了我找到的使用 spp 的两个教程，[https](https://sites.google.com/a/brown.edu/bioinformatics-in-biomed/spp-r-from-chip-seq) ://sites.google.com/a/brown.edu/bioinformatics-in-biomed/spp-r-from-chip-seq和[http:// compbio.med.harvard.edu/Supplements/ChIP-seq/tutorial.html](http://compbio.med.harvard.edu/Supplements/ChIP-seq/tutorial.html)我还阅读了论文...ncbi.nlm.nih.gov/pubmed/19029915。我还给 Karchencko 教授发了电子邮件，并在 bioconductor listserv 上发了帖子——都没有任何回应。我的问题是关于 MSER 和预测的测序深度 - spp 的附加输出。那么我认为MSER是什么，是权威确定峰值的得分值吗？当我查看高于该分值的峰值时，它们的定义非常明确。此外，预测的测序深度是否是对额外“标签”数量的预测，以便 MSER 和 FDR 值一致？很难找到有关该程序的体面信息。非常感谢任何建议或其他信息！

TIA

# c# - 在 JQuery 中读取返回对象

> ID：15505636
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:52:10.550
> 
> 标签：c#, jquery, asp.net, .net

4 分钟前在 JQuery 中读取返回对象|LINK

我创建了一个返回 GenericList 对象的 wcf 服务。我需要使用 Jquery 在客户端读取该对象，但可以使其正常工作：

下面是我的代码：

svc 方法：

```
[OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Json)]
    public CommentList GetComments()
    {
        Comments oComment1 = new Comments();
        oComment1.Title = "AMaking hay when the sun shines";
        oComment1.Author = "Plan_A";
        oComment1.CommentText = "AI like hay almost as much as I like sun. Just joking";

        Comments oComment2 = new Comments();
        oComment2.Title = "Making hay when the sun shines";
        oComment2.Author = "Plan_B";
        oComment2.CommentText = "I like hay almost as much as I like sun. Just joking";

        CommentList oCommentList = new CommentList();
        oCommentList.Comment.Add(oComment1);
        oCommentList.Comment.Add(oComment2);

        return oCommentList;
    } 
```

客户端的 Jquery 脚本：

```
$('#CommentsButton').click(function () {
        $.getJSON('http://localhost:55679/RESTService.svc/GetComments?callback=?', function (data) {
                 alert(data);

        }); 
```

我得到的响应（通过 Inspect 元素 - Chrome 工具）

```
jsonp1363710839478({"Comment":[{"Author":"Plan_A","CommentText":"AI like hay almost as much as I like sun. Just joking","Title":"AMaking hay when the sun shines"},{"Author":"Plan_B","CommentText":"I like hay almost as much as I like sun. Just joking","Title":"Making hay when the sun shines"}]}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:57:31.710

试试这个：

```
$.getJSON('http://localhost:55679/RESTService.svc/GetComments?callback=?', function (data) {
    alert(data.Comments[0].Author);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:17:08.463

这行得通。

```
$.ajax({
        type : "GET",
        dataType : "jsonp",
        url : 'http://localhost:55679/RESTService.svc/GetComments',
        success: function(data){
            console.log(data.Comment.length);
            for(var i=0; i<data.Comment.length; i++){
                console.log(data.Comment[i].Title);
            }
        }
    }); 
```

# javascript - 如果 `scroll` 事件也触发，则忽略 `wheel` 事件

> ID：15505640
> 
> 赞同：0
> 
> 时间：2013-03-19T16:52:16.057
> 
> 标签：javascript, scroll, mouseevent, mousewheel

我想将`wheel`/`mousewheel`事件绑定到容器以触发“下一页”效果，但如果鼠标位于本身可滚动的元素上，我不希望它触发。

有什么办法可以干净地做到这一点，还是我必须求助于检查范围
[ `event.target`- `this`] 中的每个元素来查看它是否具有`overflow:auto`或`overflow:scroll`它`scrollHeight`是否大于它`offsetHeight`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:53:58.387

我很确定您可以将滚轮/鼠标滚轮事件添加到不可滚动元素然后调用

```
event.stopPropagation() 
```

# java - 如何在 Tor 中使用 HtmlUnit？

> ID：15505645
> 
> 赞同：4
> 
> 时间：2013-03-19T16:52:18.440
> 
> 标签：java, htmlunit, tor

我想将 HtmlUnit 与 Tor 一起使用。但是我无法使用 HtmlUnit 连接到 Tor（我正在运行 Tor Browser Bundle）。我在 TOR 文档中读到，我可以通过 localhost:9050 上的 socks 代理将 Tor 与其他应用程序一起使用。

我可以使用以下代码连接到在 google 上找到的普通代理：

```
WebClient webClient = new WebClient();      
ProxyConfig prc = new ProxyConfig("xxx.xxx.xxx.xxx", 8081, false);
webClient.getOptions().setProxyConfig(prc); 
HtmlPage page = webClient.getPage("http://whatismyipaddress.com");          
System.out.print(page.asText()); 
```

但是，如果我用 localhost 和 9050 替换 ip 和端口，则它不起作用：

```
WebClient webClient = new WebClient();      
ProxyConfig prc = new ProxyConfig("localhost", 9050, true);
webClient.getOptions().setProxyConfig(prc); 
HtmlPage page = webClient.getPage("http://whatismyipaddress.com");          
System.out.print(page.asText()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:10:53.073

发现问题：端口号是 9150，而不是 9050。不知道他们为什么在文档中说 9050。

# erlang - 为 erlang 寻找持久的、分布式的工作队列

> ID：15505646
> 
> 赞同：7
> 
> 时间：2013-03-19T16:52:21.157
> 
> 标签：erlang, queue, worker, elixir

在重新发明轮子之前，我正在寻找满足这些要求的开源项目的指针。

*   **如果没有太多的包袱（例如：扭曲的依赖迷宫），虽然 go 或 C 是​​可能的，但**在 erlang 中实现。****
***   erlang 中的端点或客户端（例如：我希望在执行工作时运行 erlang 代码。）*   将作业分发到节点，并调用一些 erlang 函数来完成作业。*   以某种方式坚持工作*   没有主节点，没有单点故障*   同构架构*   管理可能被备份的作业队列，而不会将作业丢在地上*   一项工作不止一次完成是可以的*   像 Riak 或 Couchbase 这样的操作配置文件（例如：启动一个节点，然后启动其他节点并将它们指向它。）**

 **强烈偏爱轻量级的东西。erlang 中有很多过度劳累的企业级解决方案，看起来他们需要很长时间才能学习，就像我从头开始重新创建它一样（事实上，我基本上为这个问题构建了一个解决方案来回答某人其他关于stackoverflow的问题。我可以构建我所描述的内容，但这似乎是erlang设计目的中间的需求之一。）

我所考虑的： - ejabbered - 更像是一个消息传递框架 - rabitmq - 理论上是这样做的，但每次我访问他们的网站时，我都会淹没在抽象的海洋中。它似乎准备好做所有事情。我什至无法判断它是否有任何持久性。

**编辑添加：**这是关于使用储物柜进行分布式锁定的幻灯片。似乎它解决了问题的关键部分（如果有人想自己动手。） [http://www.slideshare.net/knutnesheim/locker-distributed-consistent-locking](http://www.slideshare.net/knutnesheim/locker-distributed-consistent-locking)

**进一步编辑：** 我真的在寻找比 RabbitMQ 更轻量级的东西。我知道它可以做我想做的事，但学习它的成本似乎与我自己做的成本相当，最终定制解决方案将更接近我真正需要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T08:17:40.893

我们使用 RABBITMQ 将我们所有的应用程序绑定成一套完整的东西。在整个设置中是一个中央 RABBITMQ 服务器，系统创建队列，无论是持久的还是临时的。由于 RABBITMQ 的可用性，我们的整个分发系统都在它之上运行。使用不同技术构建的系统通过 RABBITMQ 从其他系统发送和接收任务。

我们提出了一种消息格式，它可以是系统相互通信的 JSON 或 XML。它是如此之快。但是，这里有很多细节我不会介绍，但是我必须在 RABBITMQ 客户端上编写一个 OTP 应用程序来从 erlang 程序员那里抽象出所有 AMQP 东西。程序员所知道的只是一个 APi，假设我正在向 发送请求`System A`，只需准备消息格式 M 并调用 API: `zeenode_amqp:req(SystemA,Message)`。系统可以发送`synchronous`或`asynchronous`请求。

你应该从中得到什么：RABBITMQ 非常适合排队系统。事实上，在我们的设置中，RABBITMQ`pushes`将消息直接发送到服务器，只要它们从客户端访问 RABBITMQ。通过使用精心设计的队列和交换命名约定并仔细理解各种 AMQP 用例模型，它将非常适合您。

我认为可以滚动你自己的，使用 Process 字典，如[`Gproc`](http://blog.rusty.io/2009/09/16/g-proc-erlang-global-process-registry/)结合`Erlang Queue Module`，和[`Poolboy`](https://github.com/devinus/poolboy). 无论如何，我会推荐 RABBITMQ。让我知道，我可以给你寄一些图书馆，让你研究它们，看看它们是否适合你。一旦你有一个好的 RABBITMQ 设置，按照他们网站上的文档进行了很好的配置，然后，你也安装了 Erlang amqp 客户端，那么就可以动态创建队列和交换（无论你是否希望它们持久化，取决于你在做什么）。您甚至可以集群 RABBITMQ 服务器，以保证可用性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:24:29.140

我们将 RabbitMQ 用于此类任务。RabbitMQ 交换队列绑定模型支持灵活配置。您发布到交换，绑定确保消息到达队列。一个或多个工作进程可以订阅一个队列。队列和交换可以是持久的。有人说完全理解 RabbitMQ 大约需要半年时间。**

# php - 将 thisValue 从 Javascript 传递到 PHP 文件

> ID：15505647
> 
> 赞同：1
> 
> 时间：2013-03-19T16:52:27.067
> 
> 标签：php, javascript

我正在使用 javascript 和 php 来获取自动建议。

```
 <div>
        <div>
            University Name:<input type="text" size="20" name="uni" value="" id="uniString" onkeyup="lookup(this.value);" onblur="fill();">
        </div>

        <div class="suggestionsBox" id="suggestions" style="display: none;">
            <div class="suggestionList" id="autoSuggestionsList">
                &nbsp;
            </div>
        </div>
    </div> 
```

当用户键入名称时，我会显示结果并使用填充函数来获取值。一切正常。但是有什么方法可以使用“thisValue”（即所选大学）来打印下拉列表？我想打印所选大学的课程，所以我写了这段代码：

```
function lookup(uniString) {
    if (uniString.length == 0) {
        // Make the suggestions box invisible
        $('#suggestions').hide();
    } else {
        $.post("autosuggestions.php", {
            universityString: "" + uniString + ""
        }, function(data) {
            if (data.length > 0) {
                $('#suggestions').show();
                $('#autoSuggestionsList').html(data);
            }
        });
    }
} // lookup

function fill(thisValue) {
    if (thisValue) {
        $('#uniString').val(thisValue);
        var strURL = "findCourse.php?uniString=" + thisValue;
        var req = getXMLHTTP();
        if (req) {
            req.onreadystatechange = function() {
                if (req.readyState == 4) {
                    // only if "OK"
                    if (req.status == 200) {
                        document.getElementById('coursediv').innerHTML = req.responseText;
                    } else {
                        alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                    }
                }
            }
            req.open("GET", strURL, true);
            req.send(null);
        }
    } else {
        setTimeout("$('#suggestions').hide();", 200);
    }
}
findCourse.php: $uni = $_POST['uniString'];
$query = mysql_query("SELECT .... FROM .... WHERE university.uni_name='$uniString' AND .......");
if ($query) {
    ....
}`enter code here` 
```

不幸的是，它不起作用。我用'document.write()'对其进行了测试。thisValue 打印了什么，它打印了大学名称（这就是我想要的）。但是当我将值传递给 php 文件 (getCourse.php) 时，结果值为 null。

任何人都可以帮助我吗？我很确定我的问题很愚蠢，对此我很抱歉，我在 javascript 方面不是很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:56:20.807

```
req.open("GET", strURL, true);

$uni = $_POST['uniString']; 
```

如果在 ajax 中使用 get 方法，则需要在 PHP 中使用 $_GET。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:58:09.090

在您的以下代码中，您应该将“universityString”替换为“uniString”。

```
$.post("autosuggestions.php", {universityString: ""+uniString+""}, function(data){
  if(data.length >0) {
    $('#suggestions').show();
    $('#autoSuggestionsList').html(data);
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:29:38.153

使用 jQuery .blur()

```
$('#uniString').blur(function() {
    if ( $('#uniString').val() =! '' )
    {
        // DO POST
    }
}); 
```

如需更多帮助，请学习[.blur()](http://api.jquery.com/blur/)

# c++ - opencv .at 处理不同的图像类型

> ID：15505654
> 
> 赞同：4
> 
> 时间：2013-03-19T16:52:52.337
> 
> 标签：c++, opencv

我有一些代码希望能够同时处理 8 位和 16 位图像。

现在代码之间的唯一区别是 8 位代码使用：

```
filename.at<uchar>(i, j) 
```

16位代码使用：

```
filename.at<ushort>(i, j) 
```

现在最简单的方法是在顶部包含一个检查图像类型的 if 语句，然后我只有两个代码块做同样的事情，但我想避免这个，因为维护变得有点痛苦。

首先，我通读了 OpenCV 文档，我可能错过了它，但我没有看到任何返回 Mat 对象用于存储像素数据的数据类型的内容。因此，如果我错过了它，我会感到很傻，但那将是最好的。

我研究的另一个选项是函数指针，但我不确定是否可以为 .at 模板函数执行此操作。

非常感谢对任何这些选项的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:31:41.090

一种可能的解决方案是简单地根据输入的深度进行分支。（感谢您的灵感，perfanoff！）

在访问单个像素之前：

```
bool eightBit = false;  //I assume 8- and 16-bits are the only options
if (m.depth() == CV_8U)
    eightBit = true; 
```

在任何像素访问之前进行比较是一种优化，因此您可以避免调用`.depth()`并为每个像素进行比较，因为结果永远不会改变。

然后，在你的循环中：

```
if (eightBit)
{
 // Something using m.at<uchar>(i,j) 
}
else
{
 // Something using m.at<ushort>(i,j)
} 
```

这将允许对像素数据进行读写访问。但是，像这样在内部循环中分支可能不利于性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:30:18.983

您可以定义自己的函数来访问 Mat 中的元素。不过，您应该测试它会慢多少。

```
inline ushort GetPixel(const Mat& m,int x,int y)
{
    if (m.depth == CV_8U)
       return m.at<uchar>(x,y);
    else return m.at<ushort>(x,y);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:54:53.010

这是我的 2 克拉。：

```
template < class T > 
void myfunction( Mat & img ) {
    // code with a lot of img.at<T>(y,x);
} 
```

并称之为：

```
myfunction<ushort>(img); 
```

或者 ：

```
myfunction<uchar>(img); 
```

# java - 使用 DateFormat.parse() 无法解析的日期

> ID：15505658
> 
> 赞同：5
> 
> 时间：2013-03-19T16:53:03.550
> 
> 标签：java, datetime, simpledateformat, aem

我在这个网站上遵循了一些其他解决方案来解决这个困境，我没有安装 Joda Time，但我仍然不知道为什么会失败。

正如一种解决方案所述，我还尝试删除冒号，但这没有帮助。

`currentNode.getProperty("jcr:created").getString()`= *2013-03-07T11:57:08.596-05:00*

我收到此错误：**java.text.ParseException: Unparseable date: "2013-03-07T11:57:08.596-05:00"**

```
<%@page import="
    java.util.Date,
    java.text.SimpleDateFormat,
    java.text.DateFormat"
%>
<%
    DateFormat outputFormat = new SimpleDateFormat("MMMM dd, yyyy");
    DateFormat inputFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
    String currentDate = currentNode.getProperty("jcr:created").getString();
    Date date = inputFormat.parse(currentDate); // <-- Failing here
    String currentDateString = outputFormat.format(date);
%> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T16:55:44.377

时区格式`Z`应该是`-0500`，不是`-05:00`。

所以我建议你更换

```
DateFormat inputFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ"); 
```

和

```
DateFormat inputFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSX"); 
```

有关可用格式的更多详细信息，请参阅[SimpleDateFormat 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。

如果您的 jdk 不允许 X 模式，则必须修复输入字符串以删除`:`. 这可以通过正则表达式来完成：

```
currentDate = currentDate.replaceAll(":(\\d\\d)$", "$1") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-15T05:53:09.340

在醉酒机器人测试解决方案后，我发现半小时的时区不起作用，比如`-0530 (India).`

因此，改进的答案是：

```
DateFormat inputFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSXXX"); 
```

注意最后添加`XX`的，现在也考虑了分钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:08:45.207

尽管已经回答了这个问题，但如果您的要求只是以“MMMM dd,yyyy”格式显示创建日期，还有另一种方法可以实现该解决方案。

Property 对象有一个 getDate() 方法，它返回一个 Calendar 对象，可以使用 getTime() 从中获取日期对象。

因此，如果重写如下所示，上面的代码将起作用。

```
<%@ page import="java.util.Calendar,
    java.text.SimpleDateFormat,
    java.text.DateFormat" %>
<%
DateFormat outputFormat = new SimpleDateFormat("MMMM dd, yyyy");
Calendar currentDate = currentNode.getProperty("jcr:created").getDate();
String currentDateString = outputFormat.format(currentDate.getTime()); %> 
```

因此，它将消除将字符串转换为日期然后执行剩余操作的需要。希望这可以帮助。

# php - preg_match 在第一个选择器中选择匹配

> ID：15505666
> 
> 赞同：3
> 
> 时间：2013-03-19T16:53:15.807
> 
> 标签：php, regex

我有这个字符串要测试，但无法让它按我的意愿工作：

```
<?php
$string = '500 or fatal error ?';
$regex = '#(fatal|500)#';
if (preg_match($regex, $string, $return)) {
    // Return 500
    echo $return[1];
}
?> 
```

我希望我的脚本返回致命而不是 500，因为它是我的第一个选择器。是否可以 ？

在此先感谢，并为我糟糕的英语感到抱歉。

PS：也许我的标题不是很清楚，但我不知道如何更好地解释它。如果你找到它，改变它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:58:01.340

有两种正则表达式引擎：`text-directed engines`和`regex-directed`引擎。

php 是`regex-directed`引擎，它总是返回最左边的匹配，即使以后可以找到“500”匹配

> 引擎将从字符串的第一个字符开始。它将在第一个字符处尝试正则表达式的所有可能排列。只有在尝试了所有可能性并发现失败时，引擎才会继续处理文本中的第二个字符。同样，它将以完全相同的顺序尝试所有可能的正则表达式排列。结果是正则表达式导向的引擎将返回最左边的匹配。

[你可以在这里](http://www.regular-expressions.info/engine.html)找到更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T17:01:16.587

正如您所设想的那样，这是不可能的，但是不同的实现将使它起作用

```
$string = '500 or fatal error';
$regexes = array('#\bfatal\b#', '#\b500\b#');

$match = null;
foreach ($regexes as $re)
  if (preg_match($re, $string, $match))
    break;
# $match is null -> not found 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T17:10:13.967

如果你只想使用一个正则表达式，你可以这样做：

```
$selectors = array( 'fatal', '500'); // Array of selectors (in priority order)

$delimiter = '/';
$regex = $delimiter . '(' . implode('|', array_map( 'preg_quote', $selectors, array_fill( 0, count( $selectors), '/'))) . ')' . $delimiter;
preg_match_all( $regex, $string, $matches); 
```

按照数组的顺序查看我们找到了哪些选择器：

```
$found_selectors = array_flip( $matches[1]);
foreach( $selectors as $selector) { 
    if( isset( $found_selectors[$selector])) 
        return $selector;
} 
```

请注意，我翻转了`$matches[1]`数组以在数组中获得恒定的查找时间，而不是执行`array_search()`/ `in_array()`，这两者都将执行线性搜索。

您可以从[这个演示](http://viper-7.com/nrOkef)`fatal`中看到，给定您的输入字符串，这会产生。

# jquery - Phpmyadmin 喜欢输入

> ID：15505668
> 
> 赞同：0
> 
> 时间：2013-03-19T16:53:20.227
> 
> 标签：jquery

我正在尝试将一些表格更改为动态可更改的表格（单击单元格以修改内容 - 本质上，您单击单元格并将内容转换为要修改的文本框，当您单击它会将数据提交到 php 语句得救）。我对 jquery 或 ajax 不是很熟悉，所以这会很困难。

目前我只是想实现第一部分（单击并转换为文本框-单击关闭并转换回文本）

我在stackoverflow的其他地方找到了这个

[http://jsfiddle.net/NCHJB/3/](http://jsfiddle.net/NCHJB/3/)

所以理想情况下我想删除

```
 <td><button>Edit</button></td> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:10:05.410

我会在那里放一个输入框，并使用 css 删除所有边框、背景...等。

然后当你关注输入框的时候，给它添加一个css类来恢复类似输入的css样式，当你失去焦点的时候移除它们（onblur）

小提琴：http: [//jsfiddle.net/Pe47d/](http://jsfiddle.net/Pe47d/)

HTML

```
<input type="text" id="test" value="something!" /> 
```

Javascript (jQuery)

```
$('#test').focus( function() {
    $(this).addClass('focus');
}).blur( function() {
    $(this).removeClass('focus');
    // Do stuff here if you want... like submitting data to server or something
}); 
```

CSS

```
#test {
    border: none;
    padding: 0;
    margin: 0;
    background: none;
}

#test.focus {
    border: 1px solid #000;
} 
```

**更新**您的要求..

小提琴：http: [//jsfiddle.net/S99My/](http://jsfiddle.net/S99My/)

HTML

```
<table id="table">
    <tr><td><span class="text">Something</span><input type="text" class="hidden" name="somename" value="Something" /></td></tr>
    <tr><td><span class="text">Something</span><input type="text" class="hidden" name="somename" value="Something" /></td></tr>
    <tr><td><span class="text">Something</span><input type="text" class="hidden" name="somename" value="Something" /></td></tr>
    <tr><td><span class="text">Something</span><input type="text" class="hidden" name="somename" value="Something" /></td></tr>
</table> 
```

Javascript

```
jQuery( function($) {
    $('.text').click( function() {
        $(this).hide();
        $(this).siblings('input').show().focus();
    });

    $('#table input').blur( function() {
        // Save stuff here....
        $(this).hide();
        $(this).siblings('.text').show();
    });
}); 
```

CSS

```
.hidden {
    display: none;
} 
```

# vb6 - vb6函数不返回值

> ID：15505670
> 
> 赞同：0
> 
> 时间：2013-03-19T16:53:22.140
> 
> 标签：vb6

这里是 VB 菜鸟，正在处理旧版 VB 6.0 应用程序。

当我在下面的函数中检查 lineno 的值时，我得到了预期值：

```
Public Function GetNumOfLines(filename As String) As Integer
    Dim lineno as Integer
    lineno = 0  
    Open App.Path + filename For Input As #1

    Do While Not EOF(1)
        lineno = lineno + 1
        Line Input #1, linevar
        Loop
        Close #1

    MsgBox "numOfLines: " & lineno 'This works
    End Function 
```

但是当我从 GetATRNames（如下）调用 GetNumOfLines 时，numOfLines 为 0：

```
Public Function GetATRNames() As String()   
    Dim filename as String  
    filename = "\atrname.dat"
    Dim numOfLines as Integer
    numOfLines = GetNumOfLines(filename)

    MsgBox "numOfLines: " & numOfLines 'This does not
        End Function 
```

关于为什么 numOfLines = GetNumOfLines(filename) 给我的值与我在 GetNumOfLines 中检查时不同的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T16:55:48.173

你没有返回值。放：

```
GetNumOfLines = lineno 
```

在第一个函数结束时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T16:56:11.207

您只需要返回您的值：

```
Public Function GetNumOfLines(filename As String) As Integer
    Dim lineno as Integer
    lineno = 0  
    Open App.Path + filename For Input As #1

    Do While Not EOF(1)
        lineno = lineno + 1
        Line Input #1, linevar
        Loop
        Close #1

    MsgBox "numOfLines: " & lineno 'This works

    'return number of lines
    GetNumOfLines = lineno

    End Function 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T16:57:10.927

您需要从 GetNumOfLines 函数返回值

添加行

```
GetNumOfLines = lineno 
```

作为函数的最后一行。

# powershell - 如何查找在某个日期范围内被禁用的用户

> ID：15505674
> 
> 赞同：3
> 
> 时间：2013-03-19T16:53:28.140
> 
> 标签：powershell, active-directory

我正在尝试获取 2012 年被禁用的用户列表，但我完全迷失了。我正在尝试使用此脚本在日期范围内获取禁用的用户，但它显示“意外令牌'（'”

```
get-aduser -filter {(useraccountcontrol:1.2.840.113556.1.4.803:=2)(modifyTimeStamp -gt (get-date 1/1/2012) -and modifyTimeStamp -lt (get-date 12/31/2012))} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:49:34.963

我现在手头没有 AD，所以我无法实际测试它，但从外观上看，您正在混合 LDAP 和 PowerShell 过滤条件。尝试这样的事情：

```
$filter = "(useraccountcontrol:1.2.840.113556.1.4.803:=2)"
$start  = Get-Date "1/1/2012"
$end    = Get-Date "12/31/2012"

Get-ADUser -LDAPFilter $filter -Properties "*" | ? {
  $_.modifyTimeStamp -gt $start -and $_.modifyTimeStamp -lt $end
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:00:10.683

```
#Requires -version 3.0
(Get-ADUser -Filter {Enabled -eq $false} -SearchBase 'ou=users,dc=domain,dc=com' -Property *)..modifytimestamp 
```

嘿，我从来不知道 -Property 参数。谢谢。

# php - 添加新用户，不会进入数据库或显示结果

> ID：15505677
> 
> 赞同：1
> 
> 时间：2013-03-19T16:53:38.990
> 
> 标签：php, mysql, database, forms

我正在尝试使用用户名和密码字段以及按钮将新用户输入系统。当我输入凭据时，我根本没有得到任何响应，甚至没有错误消息。

这是代码：

```
<?php
    session_start();
    $logged_in = isset($_SESSION['USERNAME']) && $_SESSION['USERNAME'] ?    
    $_SESSION['USERNAME'] : null;
    if(!$logged_in) {
    header("location:index.php");   
    }
    include 'dbsettings.php';

    // username and password sent from form in login.php
    $username=$_POST['username'];
    $password=$_POST['password'];

   // encrypting password
    $encrypted_password=md5($password);

    $stmt = $dbh->prepare("SELECT * FROM user_info WHERE username = ?");
    $stmt->execute(array($username)); 
    $row = $stmt->fetch(PDO::FETCH_ASSOC);

    if (! $row){

  //add new user to database
  $stmt = $dbh->prepare("INSERT INTO user_info(username, password) VALUES (?,?)");
  $params1 = array($username, $encrypted_password);

  if (!$stmt ->execute($params1)){
echo "user has not been entered on the database check with administrator of the system.    
<span class='label label-important'>Important</span>";

}else{
echo $username." has been added to the database as admin. <span class='label  
label-success'>Success</span>";

//send an email to the user

session_start();
$_SESSION['USERNAME']=$username;
$_SESSION['PASSWORD']=$encrypted_password;

}

}else{
        echo $username." is already a supervisor register in the PPM tool. <span class='label label-warning'>Warning</span>";

}
$dbh = null; 
?> 
```

这是表单的目标和表单本身：

```
 <form name="form1" method="post" action="adduser.php" >

 <input type="text"  placeholder="Username" name="username" id="username">
 <input type="password"  placeholder="Password" name="password" id="password"> 
 <button class="btn btn-primary addSupervisor" type="button">Add new  
 user</button>

  </form> 
```

你能看出这不起作用的任何原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:02:54.930

添加到顶部以强制错误，以防您的设置以某种方式禁用它：

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

此外，您似乎第二次调用 session_start() （在评论发送电子邮件给用户之后），也应该看看。

# java - Tomcat不加载库

> ID：15505680
> 
> 赞同：0
> 
> 时间：2013-03-19T16:53:54.497
> 
> 标签：java, sql-server, eclipse, tomcat

好吧，我的 Tomcat（通过 Eclipse 运行）似乎无法加载 SQL Server 驱动程序库：

```
 java.lang.NullPointerException
java.lang.RuntimeException
    at org.ktu.gdia.core.MainController.processFile(MainController.java:132)
    at org.ktu.gdia.core.MainController.run(MainController.java:57)
java.sql.SQLException: No suitable driver found for jdbc:microsoft:sqlserver://isd.ktu.lt:1433;DatabaseName=LN2012_bakDB2
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at org.apache.tomcat.dbcp.dbcp.DriverManagerConnectionFactory.createConnection(DriverManagerConnectionFactory.java:75)
    at org.apache.tomcat.dbcp.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)
    at org.apache.tomcat.dbcp.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1185)
    at org.apache.tomcat.dbcp.dbcp.PoolingDriver.connect(PoolingDriver.java:180)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at org.ktu.gdia.database.DbActions.openConn(DbActions.java:64)
    at org.ktu.gdia.core.MainController.processFile(MainController.java:134)
    at org.ktu.gdia.core.MainController.run(MainController.java:57)
Exception in thread "Thread-2" java.lang.NullPointerException
    at org.ktu.gdia.database.GenForestDatabase.personExists(GenForestDatabase.java:178)
    at org.ktu.gdia.core.MainController.processFile(MainController.java:158)
    at org.ktu.gdia.core.MainController.run(MainController.java:57) 
```

sqljdbc.jar 和 sqljdb4.jar 和 jtds-1.3.0.jar 位于 Tomcat/lib 目录中。我正在使用 Tomcat 7。Eclipse 是否有可能使 Tomcat 使用与它应该使用的 Tomcat 7 中不同的 lib 目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:58:07.870

您不需要所有这些 JAR，只需要您实际想要加载的 JAR。它似乎是 Microsoft 驱动程序，而不是 jTDS。

我不知道 Eclipse 在做什么，但 Tomcat 期望 JDBC 驱动程序 JAR 从其 /lib 目录中加载。

我不同意问题是无法加载驱动程序。“没有合适的驱动程序”通常意味着连接字符串中的 URL 语法不正确。

你有

```
jdbc:microsoft:sqlserver://isd.ktu.lt:1433;DatabaseName=LN2012_bakDB2 
```

[此](http://msdn.microsoft.com/en-us/library/ms378428.aspx)URL 建议采用以下格式：

```
jdbc:sqlserver://host:1433;databaseName=dbNameHere;integratedSecurity=true; 
```

如果 URL 看起来是正确的，我会开始检查其他内容：

1.  `isd.ktu.lt`您可以从运行 Java 应用程序的服务器ping 服务器吗？如果您看不到该服务器，Java 也不会。
2.  您能否使用 Microsoft SQL Server Studio 成功连接到该服务器？如果它不能，Java 也不会。
3.  您确定 SQL Server 侦听器已配置为默认侦听端口 1433？出于安全原因，许多 DBA 会选择默认值以外的其他内容。
4.  看起来您应该使用数据库连接池。检查您的[JNDI 配置](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)是否正确。

以下是成功连接到 SQL Server 的应用程序的配置：

```
 <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
    <property name="url" value="jdbc:sqlserver://host:port;databaseName=db"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:01:35.150

您的 URL 必须是`jdbc:sqlserver://server:port;DatabaseName=yourDbName` 并且类名必须是 like `com.microsoft.sqlserver.jdbc.SQLServerDriver`。[您可以从这里](http://www.microsoft.com/en-us/download/details.aspx?id=2505)下载和使用 MicrosoftSQL Server JDBC Driver 2.0

# iphone - iOS 中的呼叫和短信计数器

> ID：15505682
> 
> 赞同：4
> 
> 时间：2013-03-19T16:53:55.760
> 
> 标签：iphone, ios, objective-c, xcode

我想监控 iphone 中的通话和短信使用情况，例如通话时间、通话时间、通话时间等。在短信的情况下也是如此。经过一番谷歌搜索后，我发现“Consume”是执行我想要的类似任务的应用程序。

经过大量研究，我找到了读取 sqlite db 的解决方案？但这是解决这个问题的正确方法吗？苹果允许这种类型的应用程序吗？

任何人都可以解释“消费”是如何工作的，或者我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:35:02.927

目前尚不**完全**清楚 Consume 是如何工作的，但在他们的网站上有一些细节可以提供答案。

来自[http://bjango.com/help/consume/gettingstarted/](http://bjango.com/help/consume/gettingstarted/)

> 请注意，大多数移动电话运营商都要求您注册在线服务，然后才能使用网络浏览器或消费...

来自[http://bjango.com/help/consume/problems/](http://bjango.com/help/consume/problems/)

> 不少供应商要求您注册“在线服务”。简而言之，这意味着您需要注册才能在线查看您的帐户详细信息和状态。如果您尚未注册，Consume 将无法获取所需的信息。

**看起来**，Consume 是从手机运营商网站获取信息，而不是在本地查找。这并不奇怪，因为苹果批准访问手机记录的应用程序的可能性很小。第三方应用程序不应该获得直接的本地访问权限。如果您为越狱手机提供网站，那就另当别论了。

# haskell - Haskell“无法推断”，“非类型变量参数”

> ID：15505683
> 
> 赞同：2
> 
> 时间：2013-03-19T16:53:57.027
> 
> 标签：haskell, types

从我[之前的问题](https://stackoverflow.com/questions/15488992/haskell-infinite-type)中，我一直在尝试制定一些单子代码。首先，这是我正在使用的状态机功能：

```
import Control.Monad
import Control.Monad.Error

newtype FSM m = FSM { unFSM :: String -> m (String, FSM m) } 

fsm f []     = return []
fsm f (r:rs) = do
    (xs, f') <- unFSM f r  
    liftM (xs:) (fsm f' rs) 
```

现在，这编译得很好：

```
exclaim :: (Monad m) => FSM m
exclaim = FSM exclaim'
exclaim' xs = return (xs ++ "!", exclaim) 
```

但这不是，因为类型声明：

```
question :: (MonadError String m) => FSM m
question = FSM question'
question' xs 
    | last xs == '?' = throwError "Already a question"
    | otherwise      = return (xs ++ "?", question) 
```

错误是`Non type-variable argument`，我认为是指`String`之后`MonadError`。如果我删除类型声明，我会得到`Could not deduce`。我知道启用 FlexibleContexts 只是“修复”了这个问题，但是我可以做一些更简单的事情来让我抛出错误吗？我宁愿不启用各种编译器扩展。

完整代码[在这里](http://hpaste.org/84333)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:57:17.290

如果您绝对不想使用`FlexibleContexts`or `NoMonomorphismRestriction`，您可以在不打开模块中的扩展的情况下进行`question`更`question'`通用的编译以使其编译：

```
question :: (Error e, MonadError e m) => FSM m
question = FSM question'

question' :: (Error e, MonadError e m) => String -> m (String, FSM m)
question' xs
    | last xs == '?' = throwError $ strMsg "Already a question"
    | otherwise      = return (xs ++ "?", question) 
```

`Error`通过使用,使其抛出一个通用类型`strMsg`，并指定类型签名。

但是，我仍然更喜欢启用`FlexibleContexts`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T20:20:29.440

详细说明丹尼尔的答案，他的解决方案实际上是避免的一般解决方案`FlexibleContexts`。

任何时候你有一个约束，比如：

```
(SomeTypeConstructor SomeType) => ... 
```

...`SomeType`触发`FlexibleInstances`警告的具体类型在哪里，您始终可以`FlexibleContexts`通过对要使用的操作进行类型分类来解决`SomeType`，例如：

```
class IsSomeType t where
    get :: t -> SomeType
    set :: SomeType -> t -> t 
```

...然后纳入`IsSomeType`您的约束：

```
(IsSomeType t, SomeTypeConstructor t) => ... 
```

...并且仅使用`IsSomeType`.

# sql - SQL时间查询从晚上6点到早上6点

> ID：15505686
> 
> 赞同：3
> 
> 时间：2013-03-19T16:54:06.360
> 
> 标签：sql, sql-server, sql-server-2008

如何计算晚上6点和早上6点之后的记录数？

这工作到晚上 12 点。

```
SELECT distinct count(barcode) c 
FROM table1 
where DAY(timestamp) = DAY(GETDATE())
  AND MONTH(timestamp) = MONTH(GETDATE())
  AND YEAR(timestamp) = YEAR(GETDATE())
  AND datepart(hh,timestamp) >= 18 
  AND datepart(hh,timestamp) >= 6; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T17:04:59.697

我想这可能就是你要找的全部。它从 GETDATE() 调用中删除任何秒数，并为其添加适当的小时数。

```
SELECT COUNT(barcode)
FROM table1
WHERE timestamp >= DATEADD(HOUR,18,CONVERT(VARCHAR(10), GETDATE(),110))
  AND timestamp <= DATEADD(HOUR,6,CONVERT(VARCHAR(10), GETDATE()+1,110)) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/1d2e7/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:49:50.233

如果你想按天计算，但要让一天从下午 6 点而不是午夜开始，只需在时间上添加一个偏移量：

```
select cast(timestamp + 0.25 as date) as theday, count(barcode)
from table1
group by cast(timestamp + 0.25 as date)
order by theday desc; 
```

如果你想在下午 6 点进行计数。- 早上 6 点 多天：

```
select cast(timestamp + 0.25 as date) as theday, count(barcode)
from table1
where datepart(hh, timestamp) in (18, 19, 20, 21, 22, 23, 0, 1, 2, 3, 4, 5)
group by cast(timestamp + 0.25 as date)
order by theday desc; 
```

在最近一天，您可以执行以下操作：

```
select top 1 cast(timestamp + 0.25 as date) as theday, count(barcode)
from table1
where datepart(hh, timestamp) in (18, 19, 20, 21, 22, 23, 0, 1, 2, 3, 4, 5)
group by cast(timestamp + 0.25 as date)
order by theday desc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:11:31.290

这个怎么样？

> 其中 datefunction(timestamp)>=getdate()-1 和 (datepart(hh,timestamp)>=18 或 datepart(hh,timestamp)<=6)

其中 datefunction 将日期时间转换为日期

# c# - 绑定 MVC 混淆

> ID：15505687
> 
> 赞同：1
> 
> 时间：2013-03-19T16:54:11.457
> 
> 标签：c#, asp.net-mvc, model, bind, overwrite

我对此代码有一个看法：

```
@Html.DropDownListFor(m => m.state, Model.States, new { @class = "search" }) 
```

以及带有此代码的控制器：

```
model.state = "MG";
return View("Pageabc",model); 
```

使用以下方法调用此页面：

[http://localhost.com:58213/Search/Pageabc/?state=SC](http://localhost.com:58213/Search/Pageabc/?state=SC)

看，在控制器上，我设置 state = MG 以使该值 = 在下拉菜单中选中，但下拉菜单使值 = SC 被选中。

我能做些什么？谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:13:00.197

ModelState 收到 state = SC 的值。

解决方案：

ModelState.SetModelValue("状态", null);

# web-services - Java Web 服务中 Handler 类的位置

> ID：15505688
> 
> 赞同：0
> 
> 时间：2013-03-19T16:54:15.630
> 
> 标签：web-services, jakarta-ee, soaphandler

我正在尝试将 SOAP 处理程序添加到 Web 服务。

在 @WebService 注解之后添加到 Web 服务的注解是：

```
@HandlerChain(file="MyHandler.xml") 
```

Web 服务与 WEB-INF/classes 下的服务类一起打包，处理程序类位于 WEB-INF/lib 下的 jar 中。

例如：

```
WEB-INF/classes/com/.../MyService.class
WEB-INF/classes/com/.../MyServiceImpl.class
WEB-INF/classes/com/.../MyHandler.xml
.
.
.
WEB-INF/lib/JarProvidedToMe.jar  <--- Has the handler class (MyHandler.class) in it that is referenced in MyHandler.xml 
```

MyHandler.xml（更改了完全限定名称）：

```
<?xml version="1.0" encoding="UTF-8"?>
<handler-chains xmlns="http://java.sun.com/xml/ns/javaee">
    <handler-chain>
        <handler>
            <handler-name>com.full.path.MyHandler</handler-name>
            <handler-class>com.full.path.MyHandler</handler-class>
        </handler>
    </handler-chain>
</handler-chains> 
```

当我尝试部署 Web 服务时，我得到了 MyHandler.xml 中引用的处理程序类 (MyHandler.class) 的 ClassNotFoundException。

使用 Eclipse，我已经能够使用 Eclipse 中的对话框添加自己的处理程序。Eclipse 将处理程序类放在与服务类相同的位置。但我需要能够使用在 jar 文件中提供给我的处理程序。

Web 服务正在部署到 WebLogic 10.3 的 ear 文件中

如果我需要更好地描述一些东西，请告诉我。我是 Web 服务和 Java 的新手。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:58:53.993

问题实际上是处理程序代码（MyHandler）在构造函数中引发了异常。这导致 WebLogic 显示 ClassNotFoundException。我修复了导致构造函数抛出异常并且处理程序被正确附加和调用的问题。

# c++ - 如何在 C/C++ 中创建一个 microshell？

> ID：15505691
> 
> 赞同：0
> 
> 时间：2013-03-19T16:54:20.263
> 
> 标签：c++, c, shell, unix, pid

我有一个任务是“在 C/C++ 中创建一个 microshell”，我试图弄清楚这到底意味着什么。到目前为止，我有这个 C 代码：

```
#include <sys/types.h>
#include <sys/wait.h>
#include <stdio.h>
#include <string.h>
#include <iostream>
#include <sstream>
#include <stdlib.h>
#include <sys/utsname.h>

int main(void)
{

char buf[1024];
pid_t pid;
int status;
printf("%% ");

while (fgets(buf,1024,stdin) != NULL)
{

    buf[strlen(buf) -1] =0; //remove the last character. Important!

    if ((pid = fork()) <0)
            printf("fork error");
    else if (pid==0)
    {       /* child */
            execlp(buf, buf, (char *) 0);
            printf("couldn't execute: %s", buf);

            exit(127);
    }//else if end

    /* parent */
    if ( (pid = waitpid(pid, &status, 0)) <0)
            printf("waitpid error");

    printf("%% ");
}//while end

exit(0);
}//main end 
```

我需要能够仅使用它的名称来调用它。所以我的程序的名字是prgm4.cpp，所以我需要能够做到这一点：

```
%>prgm4
prgm4>(user enters command here) 
```

我需要在我的代码中添加什么才能做到这一点？另外，我将如何更改它以接受带有两个单词的命令，例如 cat file.txt？感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:07:39.010

如果我理解正确，您只是在询问如何使用程序名称运行程序，而不是使用文件的完整路径。

```
$ prgm4 # You want this...
$ /path/to/my/program/prgm4 # ...Instead of this. 
```

如果是这样，它与程序本身没有任何关系。您需要将程序移动到[`$PATH`](http://en.wikipedia.org/wiki/Path_variable)变量中的某个位置，例如 Linux 上的 /usr/bin，或者编辑 PATH 变量以包含它已经在其中的目录。例如：

```
$ PATH="/path/to/my/program:$PATH" 
```

有关更多详细信息，请参阅[此](https://superuser.com/questions/284342/what-are-path-and-other-environment-variables-and-how-can-i-set-or-use-them/284351#284351)超级用户问题。

# javascript - 显示验证消息而不移动页面中的其他元素

> ID：15505692
> 
> 赞同：1
> 
> 时间：2013-03-19T16:54:22.820
> 
> 标签：javascript, validation

我有两个文本框作为必填字段，一个在另一个之上。如何在文本框下方显示“必填字段”消息而不导致下方元素向下移动？

![在此处输入图像描述](../Images/92ac42ee2998bc9cfd6a388d63297582.png)

当显示“来源不存在”消息时，“目的地”文本框会向下移动一点。显示错误消息时如何防止“目标”文本框移动？我宁愿用 Javascript 来做这件事。

![在此处输入图像描述](../Images/9c5be6ccf0924bfc1d6fc854a2c9e394.png)

这是我尝试过的，我只是不知道该怎么做。validateStop() 方法创建一个“div”元素并在其中插入错误消息。

```
function validateStop(stopNode){
        var inputStop = $.trim(stopNode.value);
        createSiblingNodeFor(stopNode);//creates div node to display error msg. 
        if(isEmpty(inputStop)){
            showInputRequiredMsg(stopNode.id, stopNode); 
            return false;
        }
}

<td>
    <input id="origin" type="text" onblur="validateStop(this)" value="" name="origin">
    <div id="originvalidationResult" style="color: red;">origin is required.</div>
</td> 
```

**编辑：**

我在 div 元素中添加了“position:absolute”，这就是在 IE8 中发生的事情，尽管它似乎在 Firefox 中工作。我们需要使用IE8：

```
In IE8: 
```

![在此处输入图像描述](../Images/9765cdd7609543902e95ee38b7648b77.png)

```
In Firefox: 
```

![在此处输入图像描述](../Images/392b23e246940b6c0bfcea429c7bf42c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:01:58.917

To have things go predictably, make sure that the parent `<td>` has enough height (apply some height style ) when the page renders. I'd also specify height of the input field and give the error div height as well. Tweak the spacing until nothing shifts.

# coldfusion - 从列表中删除重复项

> ID：15505697
> 
> 赞同：6
> 
> 时间：2013-03-19T16:54:36.093
> 
> 标签：coldfusion, coldfusion-10

我有一个字符串列表，我需要删除重复项。我尝试了很多东西，例如：

*   使用[`listRemoveDuplicates(list,",",true);`](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSd8001ae4abdbd911-7fc6f4b01350d8e2282-8000.html)

*   使用[本纳德的方法](http://www.bennadel.com/blog/432-Using-ColdFusion-Structures-To-Remove-Duplicate-List-Values.htm)。

*   使用[ListDeleteDuplicates](http://www.cflib.org/udf/ListDeleteDuplicates) udf

不幸的是，他们都没有工作。我真的不确定发生了什么。所以任何帮助将不胜感激。

我目前正在使用免费的开发者版本的 ColdFusion 10，以防万一。

样品清单：

> lacunar_DM, 同型半胱氨酸, HTN, 烟草, 未定, lacunar_DM, 同型半胱氨酸, 烟草

这是通过附加一个静态列表和一个从数据库中提取的动态列表来创建的：

```
<cfsavecontent variable= "lacunar_list">
lacunar_DM,
Homocysteine,
HTN,
Tobacco,
undetermined
</cfsavecontent>
<cfset combination = ListAppend(lacunar_list, lacunar)>

<cfoutput>
List before removing dups: #combination#<br/>
List after removing dups: #listremoveduplicates(combination, ",", true)#<br/>
</cfoutput> 
```

结果如下：

删除重复之前的列表：

> lacunar_DM, 同型半胱氨酸, HTN, 烟草, 未定, lacunar_DM, 同型半胱氨酸, 烟草

删除副本后的列表：

> lacunar_DM, 同型半胱氨酸, HTN, 烟草, 未定, lacunar_DM, 同型半胱氨酸, 烟草

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T17:30:22.683

我认为您的问题是您的列表包含额外的空白。“同型半胱氨酸”和“同型半胱氨酸”不是相同的值。同样，“烟草”和“烟草”不是相同的值。

```
lacunar_DM, Homocysteine, HTN, Tobacco, undetermined ,lacunar_DM,Homocysteine,Tobacco
-----------^-------------^----^--------^------------^------------X------------X 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T18:02:12.627

如前所述，您的列表项包含额外的空白。查看您的列表，所有项目都`_`用作空格，因此最简单的解决方案是先删除空格，然后删除重复项。

```
listRemoveDuplicates( Replace( YourList, " ", "", "ALL" ) ) 
```

如果您确实有一些有效空格，那么我建议`Trim()`您在手动编译列表时在字段周围使用 a。

```
YourList = ListAppend( YourList, Trim( ListItem ) ) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-19T17:29:52.773

确保列表中的每个项目都删除了空格。`" Tobacco"`不相等`"Tobacco"`，也不会被视为重复。在您的 SQL 查询中，修剪值以确保没有前导或尾随空格。在您的静态列表中，确保逗号之间没有空格。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T18:08:38.130

如果您没有 CF10，这是我从列表中删除重复项的首选方法。

```
<cfset newlist = [] />
<cfloop list="#combination#" index="i">
    <cfif NOT arrayFind(newlist,trim(i))> // can also use arrayFindNoCase
     <cfset arrayAppend(newlist,trim(i))>
 </cfif>
</cfloop>

<cfoutput>
    #arraytolist(newlist)#
</cfoutput> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T03:04:26.713

问题是您创建的列表中`cfsavecontent`有换行符，因为该列表中的每个项目都在`cfsavecontent`. 由于您加入的另一个列表没有相同的空格，因此您不会得到正确的结果。

通常，最好从 Coldfusion 的列表中删除不必要的空格。

试试这个而不是使用`cfsavecontent`：

```
<cfset lacunar_list = "lacunar_DM,Homocysteine,HTN,Tobacco,undetermined" >
<cfset combination = ListAppend(lacunar_list, lacunar)> 
```

# mysql - mysql错误1406

> ID：15505699
> 
> 赞同：5
> 
> 时间：2013-03-19T16:54:38.530
> 
> 标签：mysql

我创建了一个数据库并尝试从电子表格 csv 文件加载数据。里面还没有数据。当我跑

```
LOAD DATA INFILE 'docs.csv' INTO list FIELDS TERMINATED BY '\t' LINES TERMINATED BY '\n' (vendor, title, project, description, shelf); 
```

我收到一条消息“ **ERROR 1406 (22001): Data too long for column 'vendor' at row 1** ”。不过，第 1 行的供应商条目长度为 6 个字符。我创建了我的表如下：

```
CREATE TABLE list (
    autonumber  SERIAL,
    vendor      varchar(50),
    title       varchar(100),
    project     varchar(100),
    description     text,
    shelf       smallint UNSIGNED,
PRIMARY KEY(autonumber)); 
```

描述栏中的许多条目中有逗号和回车（电子表格中的Alt + Enter）；我对 FIELDS TERMINATED 命令使用 \t 是否正确&回车会造成麻烦吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:09:54.863

我认为在你的字段中有回车符会导致麻烦，因为你的行分隔符是 \n。我相信一个字段中的回车将作为记录的结尾。如果您可以将带引号的标识符添加到您的字段中，那可能会有所帮助。

您需要将此子句添加到您的 infile 语句中：

```
OPTIONALLY ENCLOSED BY '"' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:00:02.210

该列的值太长

尝试从 50 更改为 100

```
 CREATE TABLE list (
     autonumber  SERIAL,
     vendor      varchar(100),
     title       varchar(100),
     project     varchar(100),
     description     text,
     shelf       smallint UNSIGNED,
    PRIMARY KEY(autonumber)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T08:17:05.087

给出 infile 的完整路径并按以下方式执行代码。

```
LOAD DATA INFILE 'docs.csv' INTO TABLE list

 FIELDS TERMINATED BY ',' 

 ENCLOSED BY '"' 

 LINES TERMINATED BY '\r\n' (vendor, title, project, description, shelf); 
```

像下面的例子一样给出 infile 的路径..

```
load data local infile 'c:/xampp/htdocs/example.csv'

     into table mytbl fields terminated by ','

     enclosed by '"'

     lines terminated by '\r\n' 

     ignore 1 lines (f_name,age,id); 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-11T02:56:49.060

也许您的 csv 文件编码与 mysql 字符集不同，这也会导致***"ERROR 1406 (22001): Data too long for column 'vendor' at row 1"***。

例如，如果你的mysql字符集是GBK，而你的csv文件是用UTF-8编码的，那么在加载时也会导致同样的错误。

只需将文件编码更改为与 mysql 字符集相同。

# codeigniter - 代码点火器文件上传

> ID：15505702
> 
> 赞同：-1
> 
> 时间：2013-03-19T16:54:48.183
> 
> 标签：codeigniter, file-upload

我正在从两个单独的视图上传图像，因此在库下的自动加载中，我包含了**upload**。

我在配置中有一个名为 upload.php 的文件。从这里我传递大小，文件类型等参数。

```
 if( ??){
        $config['upload_path'] = realpath('x');
$config['allowed_types'] = 'gif';
$config['max_size'] = '1048';
$config['max_width']  = '1024';
$config['max_height']  = '768';
          }
           else{
        $config['upload_path'] = realpath('x');
$config['allowed_types'] = 'gif';
$config['max_size'] = '1048';
$config['max_width']  = '1024';
$config['max_height']  = '768';

              } 
```

现在由于我有两个上传的地方，我有不同的文件大小，类型参数，我的控制器如何知道要拿哪一个。我应该在 if{} else {] 条件中输入什么。

让我知道，如果我不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:37:56.670

您的代码必须做一些事情：

（1）你需要在每个上传表单中设置一个标志（隐藏变量是一个好方法），以便你知道将文件存储在哪个文件夹中。我们称之为标志`upload_target`

在您的控制器中：

（2）`upload_target`从post变量中获取

(3) 根据值`upload_target`，根据需要设置upload_config 值，然后加载/初始化上传类。

**`upload_config`值的放置**
**位置 如果您尝试在 config/upload.php 中定义二维数组，库加载器可能会感到困惑。**

相反，定义一个名为`upload_settings.php`并定义以下数组的配置文件：

```
$config['target1']['upload_path'] = './uploads_path_1/';
$config['target1']['allowed_types'] = 'gif|jpg|png';
$config['target1']['max_size']  = '100';
$config['target1']['max_width']  = '1024';
$config['target1']['max_height']  = '768';

$config['target2']['upload_path'] = './uploads_path_2/';
$config['target2']['allowed_types'] = 'gif|jpg|png';
$config['target2']['max_size']  = '100';
$config['target2']['max_width']  = '1024';
$config['target2']['max_height']  = '768'; 
```

在您的上传控制器中，您将执行以下操作：

```
$this->config->load('upload_settings', TRUE); 
```

根据`upload_target`您从表单的 post 变量中获得的值：

```
$upload_config_values = $this->load->config('target1','upload_settings'); 
```

或者

```
$upload_config_values = $this->load->config('target2','upload_settings'); 
```

您现在可以加载或初始化您的上传类：

```
$this->load->library('upload', $upload_config_values); 
```

我把它写成元代码给你一个可行方法的大纲。

**设置隐藏值标志/参数**
对于您用于上传文件的每个表单，添加一个隐藏值，如下所示。
对于第一种形式：

对于第二种形式：

从 post 变量中获取`upload_target`值并根据该值选择正确的配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:16:29.400

在上传.php

```
 $config['first']['upload_path'] = realpath('x');
    $config['first']['allowed_types'] = 'gif';
    $config['first']['max_size'] = '1048';
    $config['first']['max_width']  = '1024';
    $config['first']['max_height']  = '768'; 
```

同样的第二

```
 $config['second']['upload_path'] = realpath('x');
....
.. 
```

和在控制器中

```
$this->load->config('upload_values', TRUE);

$upload_values = $this->config->item('first');

$this->load->library('upload', $upload_values); 
```

# ruby-on-rails - 如何从自定义身份验证中输出配置文件信息

> ID：15505703
> 
> 赞同：0
> 
> 时间：2013-03-19T16:54:49.897
> 
> 标签：ruby-on-rails

我从头开始创建身份验证/授权。我需要帮助创建可以输出用户在注册时输入的信息以及他们的个人资料信息的页面。例如，当用户访问索引时，他们将看到注册信息（电子邮件、密码、用户、生日、邮政编码）。然后用户可以到 /users/ID-HERE 填写他们的个人资料信息（身高、孩子、职业、宗教、种族等），这是用户可以编辑个人资料信息的唯一页面。在这个页面 /users/ID-HERE/edit 用户可以修改他们的注册信息。

现在我没有的是输出用户输入信息的页面，它只显示编辑字段。所以我真正想要的是 /users/ID-HERE 显示用户输入的信息（不显示编辑字段）。然后 /users/ID-HERE/edit 将允许用户修改他们的个人资料信息。然后创建另一个 URL，/users/ID-HERE/account-edit 将允许用户修改他们的注册信息。并且在某个阶段，当我构建它时，我会在用户 CP 中输出注册信息。

而且我不明白如何做到这一点。我只有页面 atm 允许您编辑帐户和个人资料信息，但没有单独的页面用于输出用户输入的纯文本信息。

路线.rb：

```
Dating::Application.routes.draw do
  get 'signup' => 'users#new'
  get 'login' => 'sessions#new'
  get 'logout' => 'sessions#destroy'
  get 'edit' => 'users#edit'
  get "/profile/:id" => "users#show"

  resources :users
  resources :sessions
  resources :password_resets
  resources :galleries
  resources :photos 
```

show.html.erb（个人资料信息）：

```
<h1><%= @user.username %></h1>

<h2>Basics</h2>

<%= form_for @user do |f| %>

    <div class="field">
        <%= f.label :height %><br/>
        <%= f.select :feet, [['Feet', nil], '4', '5', '6'] %>
        <%= f.select :inches, [['Inches', nil], '0', '1', '2', '3', '4',                    
                                '5', '6', '7', '8', '9', '10', '11'] %>
        </div>
    <div class="field">
        <%= f.label :children %><br/>
        <%= f.select :children, [['Do you have or want kids?', nil], 'Yes, they live with me', 'I want kids now', 'I want one someday', 'Not for me']%>
        </div>
    <div class="field">
        <%= f.label :religion %><br/>
        <%= f.select :religion, [['What is your faith?', nil], 'Agnostic', 'Atheist', 'Christian', 'Catholic', 'Buddhist', 'Hindu', 'Jewish', 'Muslim', 'Spiritual without affiliation', 'Other', 'None', 'Prefer not to say']%><br/>
        <%= f.select :religion, [['How important is this to you?', nil], 'Very Important', 'Somewhat Important', 'Not Important']%>
        </div>
    <div class="field">
        <%= f.label :career %><br/>
        <%= f.text_field :career %>
    </div>
    <div class="field">
        <%= f.label :education %><br/>
        <%= f.select :education, [['What is your education level?', nil], 'High school', 'Some college', 'Undergraduate', "Bachelor's", "Master's ", 'PhD', 'Business school', 'Law school', 'Medical school' ]%>
        </div>
    <div class="field">
        <%= f.label :ethnicity %><br/>
        <%= f.select :ethnicity, [['What is your ethnicity?', nil], 'Asian', 'Black', 'Biracial', 'Indian', 'Hispanic/Latin', 'Middle Eastern', 'Native American', 'Pacific Islander', 'White', 'Other' ]%>
        </div>
        <%= f.label :user_drink %><br/>
        <%= f.select :user_drink, [['How much do you drink?', nil], 'Often Drinks', 'Sometimes drinks', 'Never drinks', 'No comment' ]%>
        </div><br/>
        <%= f.label :user_smoke %><br/>
        <%= f.select :user_smoke, [['How often do you smoke?', nil], 'Often smokes', 'Sometimes smokes', 'Never smokes'] %>
        </div>
    <div class="actions"><%= f.submit %></div>

    <h3>About Me</h3>

    <%= form_for @user do |f| %>

    <div class="field">
        <%= f.label :about_me %><br/>
        <%= f.text_field :about_me %>
    <div class="actions"><%= f.submit %></div>

<% end %>
<% end %> 
```

new.html.erb（注册表单）：

# 报名

```
<%= form_for @user do |f| %>
  <% if @user.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% @user.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

    <div class="field">
        <%= f.label :email %><br/>
        <%= f.text_field :email %>
    </div>
    <div class="field">
        <%= f.label :password %><br/>
        <%= f.password_field :password %>
    </div>
    <div class="field">
        <%= f.label :username %><br/>
        <%= f.text_field :username %>
    </div>
    <div class="field">
        <%= f.label :zip_code %><br/>
        <%= f.text_field :zip_code %>
    </div>
    <div class="field">
        <%= f.label :birthday %><br/>
        <%= f.text_field :birthday %>
    </div>
    <%= f.collection_select :role, User::ROLES, :to_s, :humanize %>
    <div class="actions"><%= f.submit %></div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:04:14.937

在你的`users_controller`：

```
def show
  @user = User.find(params[:id])
end 
```

现在您`@user`可以在`show`视图中使用了。因此，您不需要表格，只需：

```
<h1><%= @user.username %></h1>

<h2>Basics</h2>
  <p><%= @user.feet %></p>
  <p><%= @user.inches %></p>
  <p><%= @user.children %></p>
  <p><%= @user.religion %></p>
  ... 
```

此外，默认情况下资源将提供[7 条路由](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)，因此您可以为其中一些路由创建别名，而不是使用`match`：

```
match '/signup', :to => 'users#new'
match '/login',  :to => 'sessions#new'
match '/logout', :to => 'sessions#destroy'

resources :users
resources :sessions
resources :password_resets
resources :galleries
resources :photos 
```

# maven - 在部署新版本之前备份已部署的 Web 应用程序（自动）

> ID：15505704
> 
> 赞同：2
> 
> 时间：2013-03-19T16:54:50.467
> 
> 标签：maven, tomcat, deployment, backup

情况如下：

我正在使用 maven 和 cargo 插件来自动将 Web 应用程序部署到不同的环境，使用 Hudson 来运行/安排作业来完成这项工作。我使用 tomcat 作为目标应用程序容器。

但我想在 maven/cargo 部署最新版本之前找到将部署的 Web 应用程序备份到某个网络/FTP 位置的最佳方法。我一直在寻找一些有助于做类似事情的 maven 插件，但似乎这样的任务超出了 maven 的范围。此外，我正在寻找一些可能有助于完成这项工作的 Hudson 插件，但没有成功。

我还查看了[(Tomcat) Backup WAR on Deploy](https://stackoverflow.com/questions/5227551/tomcat-backup-war-on-deploy)中的讨论，但我想避免有人去从 tomcat 获取 war 文件并将其放入外部位置，我想自动执行此任务。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:21:12.310

考虑在 prepare-package 阶段或 package 阶段定义 maven-antrun-plugin。查看阶段列表：http: [//www.sonatype.com/books/mvnref-book/reference/lifecycle-sect-structure.html#lifecycle-sect-default](http://www.sonatype.com/books/mvnref-book/reference/lifecycle-sect-structure.html#lifecycle-sect-default) 然后，创建将您的战争复制到任何地方的 ant 目标.

这里是阶段安装的 maven-antrun-plugin 示例：

```
<build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <id>file-exists</id>
                        <phase>install</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <target>
                                <exec executable="cmd">
                                    <arg value="/c"/>
                                    <arg value="copy your file"/>
                                </exec>
                            </target>
                        </configuration>
                    </execution>

                </executions>
            </plugin>
        </plugins>
    </build> 
```

然后，创建将您的战争复制到任何地方的蚂蚁目标。您可以使用其他任务代替 exec 任务，例如 SCP 任务：[https](https://ant.apache.org/manual/Tasks/scp.html) ://ant.apache.org/manual/Tasks/scp.html 此外，您可以定义自己的 maven 配置文件，该配置文件仅在 Hudson 中调用。

# c# - 如何从设置中保存的 stringCollection 中删除字符串

> ID：15505711
> 
> 赞同：1
> 
> 时间：2013-03-19T16:55:08.017
> 
> 标签：c#, winforms, settings, draggable, stringcollection

我是这个社区的新手。我有一个问题：我遵循了这个[如何保存在 Windows 窗体中运行时创建的控件](https://stackoverflow.com/questions/10739641/how-i-can-save-controls-created-in-run-time-in-windows-forms)并且代码运行良好，但是当我想从 stringCollection 中删除一个字符串时我遇到了问题。我使用方法 stringcollection.Remove("string") 插入了一个刚刚存储的有效字符串，并且我还使用 settings.default.save() 保存了所有内容，但该字符串并未从字符串集合中删除。为什么它不起作用？请有人帮助我！:)

这是我的代码：

```
public Form1()
{
    InitializeComponent();

    if (Properties.Settings.Default.StringCollection == null)
        Properties.Settings.Default.StringCollection = new System.Collections.Specialized.StringCollection();

}

private void make_BookButtonAndStore(int x, int y, string name)
{
    make_Book(x, y, name);
    Properties.Settings.Default.StringCollection.Add(String.Format("{0};{1};{2}", book1.Location.X, book1.Location.Y, book1.Name));
    Properties.Settings.Default.Save();
}

private void make_Book(int x, int y, string name)
{
    // this code is initializing the book(button)
    book1 = new Button();
    //Image img = button1.Image;
    //book1.Image = img;
    book1.Name = name;
    //book1.Height = img.Height;
    //book1.Width = img.Width;
    book1.Location = new Point(44 + x, 19 + y);
    book1.MouseDown += new MouseEventHandler(book1_MouseDown);
    book1.MouseMove += new MouseEventHandler(book1_MouseMove);
    book1.MouseUp += new MouseEventHandler(book1_MouseUp);
    groupBox1.Controls.Add(book1);
}

void book1_MouseDown(object sender, MouseEventArgs e)
{
    activeControl = sender as Control;
    previousLocation = e.Location;
    Cursor = Cursors.Hand;
}

void book1_MouseMove(object sender, MouseEventArgs e)
{
    if (activeControl == null || activeControl != sender)
        return;

    var location = activeControl.Location;
    location.Offset(e.Location.X - previousLocation.X, e.Location.Y - previousLocation.Y);
    activeControl.Location = location;

}

void book1_MouseUp(object sender, MouseEventArgs e)
{
    activeControl = null;
    Cursor = Cursors.Default;

    Button btnPremuto = (Button)sender;
                Properties.Settings.Default.StringCollection.Remove(previousLocation.X+";"+previousLocation.Y+";"+btnPremuto.Name);
    Properties.Settings.Default.StringCollection.Add(String.Format("{0};{1};{2}", btnPremuto.Location.X, btnPremuto.Location.Y, btnPremuto.Name));
    Properties.Settings.Default.Save();

}

private void Form1_Load(object sender, EventArgs e)
{
    foreach (string line in Properties.Settings.Default.StringCollection)
    {
        if (!String.IsNullOrWhiteSpace(line))
        {
            // The line will be in format x;y;name
            string[] parts = line.Split(';');
            if (parts.Length >= 3)
            {
                int x = Convert.ToInt32(parts[0]);
                int y = Convert.ToInt32(parts[1]);

                make_Book(x, y, parts[2]);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:11:04.057

我现在没有时间对此进行测试，但乍一看，您似乎正在`previousLocation`从. 这将是鼠标位置，而不是控件的位置？`e.Location``book1_MouseDown`

在我看来，您将控件的位置存储在您的 中，并且我认为它具有一些尺寸，因此在触发`StringCollection`时鼠标可能不在控件的左上角。`MouseDown`

我建议查看从中获取位置，`sender`而不是`e`跟踪控件的先前位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T10:10:31.523

那里有很多稍微奇怪的代码！我认为您试图解决的设置问题是将 StringCollections 保存到设置时存在一些稍微奇怪的行为。尽管您可以向集合添加/删除内容然后调用保存，但这实际上不会做任何事情。

您可以看到设置对象在属性中具有正确的元素，但它不起作用。您还必须重新设置属性，例如：

```
public class Config
{
    private readonly Settings _settings;
    private readonly ACollectionOfStrings _selectedCategories;

    internal Config(Settings settings)
    {
        _settings = settings;
        if(_settings.SelectedCategories == null)
            _settings.SelectedCategories = new StringCollection();

        _selectedCategories = new ACollectionOfStrings(_settings.SelectedCategories);
    }

    public IEnumerable<string> SelectedCategories
    {
        get { return _selectedCategories; }
    }

    private void ModifySettings(Action<Settings> modification)
    {
        modification(_settings);
        Save();
    }

    private void Save()
    {
        _settings.Save();
    }

    public void AddCategory(string category)
    {
        _selectedCategories.Add(category);
        SaveList();
    }

    private void SaveList()
    {
        ModifySettings(s => s.SelectedCategories = _selectedCategories.List);
    }

    public void Remove(string category)
    {
        _selectedCategories.Remove(category);
        SaveList();
    }
} 
```

我省略的代码有一些轻微的复杂性 - ACollectionOfStrings 是一个小包装类，它基本上通过对 StringCollection 的调用，但也是一个 IEnumerable（有点困惑，事实并非如此，而且 GetEnumerator 调用 String集合不返回 IEnumerator 所以你还必须包装它 - 多么奇怪的类！）

# php - 根据多个组合框中选择的选项从数据库中获取值

> ID：15505712
> 
> 赞同：1
> 
> 时间：2013-03-19T16:55:10.110
> 
> 标签：php

我有一个允许多项选择的组合框，我还有另一个组合框。

根据从第一个组合框中选择的值，我需要在第二个组合框中显示它们。

我的需求场景看起来很像这个例子，让第一个组合框包含所有状态的列表。Whenever a state is selected, all the cities in that state will be fetched from the database and displayed in the second combo box.

如果我们在第一个组合框中选择多个项目（状态）。所选州的城市应显示在第二个组合框中。

我想到了一个解决方案，将所有选择的项目存储在一个数组中。我不确定如何实现它。如果有人提供一个工作示例，那将有很大帮助。

我是 PHP 新手，所以很难实现。如果有人提供一个工作示例，那将有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:13:26.490

在您的状态复选框中使用数组后缀。这是一个小例子。这是非常基本的，但显示了这个想法。

```
<form method="post">
<table><tr><td>
<?
    // Sample array, you should use database query instead
    $statesArr = array('FL'=>'Florida','CA'=>'California','NY'=>'New York');

    foreach ($statesArr as $stateCode => $stateName) { 
        $checked = (count($_POST['states']) && in_array($stateCode,$_POST['states']))?'checked="checked"':''; // rechecking selected checkboxes
        echo '<label><input type="checkbox" name="states[]"  value="'.$stateCode.'" '.$checked.'/>'.$stateName.'</label><br />';
    }

?>
</td><td>
    <?  if ($_POST && count($_POST['states'])) {
            echo '<select multiple="multiple">';
            $sql = "SELECT `CityName` FROM `Cities` WHERE `ParentStateCode` IN ('".implode("','",$_POST['states'])."')";
            $result = mysql_query($sql);
            while ($row = mysql_fetch_assoc($result)) {
                echo '<option>'.$row['CityName'].'</option>';
            }
            echo '</select>';
        }
    ?> 
    </td>
    </tr></table>
    <input type="submit" />
</form> 
```

# java - J2OBJC javax 无法解决

> ID：15505714
> 
> 赞同：0
> 
> 时间：2013-03-19T16:55:17.983
> 
> 标签：java, objective-c, xcode

我正在尝试将我的 java 文件转换为目标 c 文件。我的 java 文件包括 javax 导入。当我尝试使用 J2OBJC 进行转换时，出现错误“无法解析导入 javax”。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:00:22.110

在 Android 上运行 javax 库已经很漂亮了。我认为您将节省大量时间重构您的模型并消除对 javax 库的直接依赖。然后你可以使用 j2objc 来转换没有 javax 依赖的普通模型。

# jquery - 是否可以显示来自网络服务的弹出窗口

> ID：15505715
> 
> 赞同：2
> 
> 时间：2013-03-19T16:55:18.513
> 
> 标签：jquery, asp.net, ajax, web-applications, popup

ASP.NET 4.0

在我的网络应用程序中，我正在使用网络服务方法。是否可以显示弹出窗口以从 Web 服务中的方法向用户请求信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:34:14.563

您可以使用 jquery 调用 web 方法，并根据收到的数据显示 msg 框。参考[这个](https://stackoverflow.com/questions/6928533/calling-a-webmethod-with-jquery-in-asp-net-webforms)以获得更好的想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:57:29.077

是的，您可以使用 jQuery 调用 Web 服务的功能，并且可以显示任何弹出窗口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:02:29.237

如果没有关于您正在调用的 Web 服务的更多详细信息，我将给您一个非常笼统的示例。它需要 jQuery。

它假定 Web 服务由客户端中的某个触发器调用：它可能是用户事件（单击、按键）或 DOM 事件（加载、就绪）。一个处理程序被分配给这个事件。在按钮单击事件的情况下：

```
$('#btnCallService').bind('click'
    , {dataObject: 'add evet related data here'}
    , function(event){
        /* here a handler is executed when btnCallService is clicked  */
        callServiceHandler(event.data)
    }
); 
```

这是处理程序的主体，以及对服务的调用。

```
function callServiceHandler(eventData) {
    $.ajax({
        type: "GET",
        url: "url_to_your_service_method",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: yourWebMethodArguments,
        success: function (resultData) {
            /* everything is right! result data are available for client side processing and rendering */

            alert('Request completed!');
        }
        error: function (req, status, message) {
            /* something is wrong: guide the user */
            alert('Unable to execute your request: \n' + message);
        },

    });
} 
```

如您所见，web 方法根本不调用弹出窗口。您可以将处理程序集中在一个库中，并从您站点的每个位置调用它。

# jquery - jQuery复选框启用禁用

> ID：15505717
> 
> 赞同：0
> 
> 时间：2013-03-19T16:55:19.247
> 
> 标签：jquery, checkbox

我有一个关于启用和禁用复选框的问题。

如果我选中该复选框，则应禁用“个人培训”。

但我做不到

**[这是一个小提琴](http://jsfiddle.net/aldimeola1122/nhhQz/8/)**。

```
$('#optionen :checkbox').on('change', function () {
    $('.menu li.' + this.className).toggleClass('hide');

}); 
```

你能帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:00:50.430

```
$('#optionen :checkbox').on('change', function(){ 
```

这意味着“查找`#optionen`，然后查找任何属于它的后代的复选框”。这会找到这个元素：

```
<input type="checkbox"> 
```

然后将事件处理程序绑定到此元素。在事件处理程序中，`this`指向元素。事件处理程序查找元素的`className`属性。没有`class`设置属性，所以`className`是一个空字符串。因此，您的代码实际上如下所示：

```
$('.menu li.').toggleClass('hide'); 
```

这显然是一个无效的选择器，所以有一个错误并且没有任何反应。

我不确定您的解决方案是什么；它可能就像向元素添加`class`属性一样简单：`input`

```
<input type="checkbox" class="leaf"> 
```

[jsFiddle](http://jsfiddle.net/nhhQz/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:01:17.093

[http://jsfiddle.net/nhhQz/10/](http://jsfiddle.net/nhhQz/10/)

```
$('#optionen :checkbox').on('change', function(){
    $('.menu li').toggleClass('versteckt');
}); 
```

那是你要的吗？

```
<input type="checkbox" id="optionen"> 
```

您没有带有复选框的类或 ID。我认为您想要带有复选框的“optionen”的ID。然后您还想删除对类的引用，除非您想在复选框内添加一个类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:01:31.850

你有两个明显的解决方案，第一个给出`input`类`leaf`：

```
<span><input class="leaf" type="checkbox" />SERVICES</span> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nhhQz/11/)。

第二个是更正HTML（ a （或）的*唯一*有效子元素是an ）：`ul``ol``li`

```
<div id="optionen">
    <ul>
        <li><span><input type="checkbox" />SERVICES</span>

            <ul class="menu">
                <li class="first leaf"><a href="/site/personal_training">PERSONAL TRAINING</a>

                </li>
                <li class="leaf"><a href="/site/personal_training">PERSONAL TRAINING</a>

                </li>
                <li class="leaf"><a href="/site/personal_training">PERSONAL TRAINING</a>

                </li>
            </ul>
        </li>
    </ul>
</div> 
```

然后使用：

```
$('#optionen :checkbox').on('change', function () {
    $(this).closest('li').find('ul.menu li').toggleClass('versteckt');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nhhQz/14/)。

参考：

*   [`closest()`](http://api.jquery.com/closest/).
*   [`find()`](http://api.jquery.com/find/).

# data-binding - 绑定到类库设置

> ID：15505723
> 
> 赞同：0
> 
> 时间：2013-03-19T16:55:37.940
> 
> 标签：data-binding, wpf-controls, settings

我有一个具有主窗口的应用程序，该应用程序具有宽度、高度、左侧和顶部的设置，以便它可以记住它在会话之间的大小和位置。我有这样的 XAML 设置（与其他 3 个属性类似）：

```
Height="{Binding myHeight, Source={x:Static local:MySettings.Default}, Mode=TwoWay}" 
```

'local' 被声明为 xmlns，它是程序的根命名空间。这很好用。

但是我有另一个应用程序，它是一个类库，但也包含一个窗口。我尝试进行类似的设置，将“本地”定义更改为类库的根命名空间，将具有相同名称的设置添加到类库的设置中，但在这个设置中，我只是收到错误“本地：未找到我的设置”。我错过了什么？这在类库中是不可能的吗？

# javascript - 带有 chrome 断点的变量范围

> ID：15505725
> 
> 赞同：2
> 
> 时间：2013-03-19T16:55:39.483
> 
> 标签：javascript, google-chrome, d3.js, google-chrome-devtools

在开发 JavaScript 应用程序时，我在使用 Chrome 开发人员工具时遇到了一些意想不到的事情。我在一个函数中有以下代码块：

```
var b = bins + 1,
    selectValues = [],
    selectedPoints = [],
    n = numVals;

    while(b--){selectValues.push(0)};

    //Main selection iterator
    if (range_min == range_max){
        mainSVG.selectAll(".sim-ui-scatter-points")
            .each(function(){
                d3.select(this).call(addClass,["foo"]);
                d3.select(this).call(removeClass,["bar","foobar"])  
                });
        } else {
            do some other stuff
        });
    } 
```

`n`计划为语句中的每个项目添加一些变量的功能`.each`，我使用 Chrome 调试器在语句中放置了一个断点，然后在浏览器在断点处暂停时在控制台中`.each`请求，然后返回. 但是，如果在我的代码中添加一个，如下所示：`n``ReferenceError: n is not defined``console.log(n)`

```
 //Main selection iterator
    if (range_min == range_max){
        mainSVG.selectAll(".sim-ui-scatter-points")
            .each(function(){
                console.log(n)
                d3.select(this).call(addClass,["foo"]);
                d3.select(this).call(removeClass,["bar","foobar"])  
                });
        } else {
            do some other stuff
        });
    } 
```

代码不仅可以正确返回`n`到控制台，而且我可以在 Chrome 调试器的控制台中请求，`n`在我之前使用的同一行上使用断点并获得正确的值而不是引用错误。为什么会这样？

# java - 我的 android 应用程序关闭

> ID：15505733
> 
> 赞同：0
> 
> 时间：2013-03-19T16:55:51.957
> 
> 标签：java, android

我正在尝试做一个必须登录到站点的应用程序，但是当我启动管理连接的活动时，程序关闭并弹出一个窗口，提示应用程序意外中断。

这是活动代码（它不完整且尚未完成）：

```
package com.example.myfirstapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import android.annotation.TargetApi;
import android.os.Build;
import android.content.Context;
import android.content.Intent;
import android.widget.TextView;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.URL;
import java.net.URLConnection;
import java.net.URLEncoder;

public class DisplayMessageActivity extends Activity {

    private TextView textView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent = getIntent();
        String username = intent.getStringExtra(MainActivity.EXTRA_USERNAME);
        String password = intent.getStringExtra(MainActivity.EXTRA_PASSWORD);

        if(connect()){  
            try {

            URL url = new URL("http://www.example.com/"); //obviously non the real url

            // Construct data
            String data = URLEncoder.encode("username", "UTF-8") + "=" + URLEncoder.encode(username, "UTF-8");
            data += "&" + URLEncoder.encode("pass", "UTF-8") + "=" + URLEncoder.encode(password, "UTF-8");

            // Send data
            URLConnection conn = url.openConnection();
            conn.setDoOutput(true);
            OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
            wr.write(data);
            wr.flush();

            // Get the response
            BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            String line;
            while ((line = rd.readLine()) != null) {
                System.out.println(line);
            }
            wr.close();
            rd.close();
            } catch (Exception e) {
            }
        }else   {
            textView.setText("Errore di connessione.");
        }

        setContentView(textView);
        // Show the Up button in the action bar.
        setupActionBar();
    }

    /**
     * Set up the {@link android.app.ActionBar}, if the API is available.
     */
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    private void setupActionBar() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            getActionBar().setDisplayHomeAsUpEnabled(true);
        }
    }

    private boolean connect(){
        ConnectivityManager connMgr = (ConnectivityManager) 
        getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
        if(networkInfo != null && networkInfo.isConnected())    {
            return true;
        }
        else{
            return false;
        }
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            // This ID represents the Home or Up button. In the case of this
            // activity, the Up button is shown. Use NavUtils to allow users
            // to navigate up one level in the application structure. For
            // more details, see the Navigation pattern on Android Design:
            //
            // http://developer.android.com/design/patterns/navigation.html#up-vs-back
            //
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

和清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myfirstapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.myfirstapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.myfirstapp.DisplayMessageActivity"
            android:label="@string/title_activity_display_message"
            android:parentActivityName="com.example.myfirstapp.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.myfirstapp.MainActivity" />
        </activity>
    </application>

</manifest> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:59:26.727

您没有初始化 textView。直到你没有初始化 textview。

它保持为空，你会`NullPointerException`。

首先通过调用该方法设置活动布局`setContentView`并移除`setContentView(textView);`

```
private TextView textView;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    textView = (TextView)findViewById(R.id.yourTextView);
    .......

} 
```

除此之外，不要在主线程上进行网络操作，这在 android 版本 >= 3.0 中是不允许的。

使用异步任务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:58:34.530

那行不通：

```
}else{
  textView.setText("Errore di connessione.");
} 
```

`TextView`未连接到您的布局，也未以其他方式启动。在使用 textView 之前试试这个：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = getIntent();
    textView = (TextView) findViewById(R.id.YOUR_ID_FROM_LAYOUT); 
```

我相信你有一个NPE...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:08:37.120

很明显，这是行不通的。您可能有 NullPointerException 因为您的 TextView 没有界限。做这样的事情，

在您的 onCreate 方法中 -

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(your_layout);
    textView = (TextView)findViewById(R.id.textViewId);

    ....

    }else   {
            textView.setText("Errore di connessione.");
        } 
} 
```

# multithreading - 为什么我生成的线程在父 AppDomain 而不是当前子 AppDomain 中打开？

> ID：15505735
> 
> 赞同：0
> 
> 时间：2013-03-19T16:56:01.327
> 
> 标签：multithreading, appdomain

我们有一项服务可以运行多个（并且根据安装的部件而变化）组装模块。每个模块都在其自己的 AppDomain 中运行，因为我们可以运行同一程序集的多个实例，连接到不同的数据库。

最近我添加了一个新模块，以替换现有的单独服务。该模块是多线程的，并且还使用我们内部的遗留日志库，它也是多线程的。新模块是现有非托管 c++ 代码的 ac# 包装器。

我的问题是日志代码将数据存储在 AppDomain 中，包括要写入的文件名和位置等。这在模块的主线程上工作正常，但是当创建新线程时，它们是在父 AppDomain 下创建的，即服务可执行文件本身。父 AppDomain 不包含日志记录代码正在寻找的数据，因此它无法写出其数据。

我发现一篇关于此的文章指出，使用旧的 Win32 CreateThread() 调用创建的线程不会在当前 AppDomain 中创建，我应该使用 .Net 线程。我的代码就是这种情况，所以我将模块代码更改为使用 .Net 线程，但我仍然得到相同的结果。

我还尝试让日志记录类作为单例运行，但生成的线程仍然尝试从父 AppDomain 中拉出单例，这当然没有正确的数据。

我真的需要让这个工作，我已经碰壁了。

有任何想法吗？？？

# javascript - 使用 javascript 在 asp.net 中使用 css 打印 listview

> ID：15505737
> 
> 赞同：0
> 
> 时间：2013-03-19T16:56:04.333
> 
> 标签：javascript, asp.net, css, printing

打印时没有使用 css 类，但在使用程序时我看到了 css 类

```
 <script type="text/javascript">
        function printDiv() {
            var divToPrint = document.getElementById('DivIdToPrint');
            var newWin = window.open('', 'Print-Window');

            //newWin.document.open();
            newWin.document.write('<html><body onload="window.print()">' + divToPrint.innerHTML + '</body></html>');
            newWin.document.close();
            setTimeout(function() { newWin.close(); }, 10);
        }

    </script>

 <div id="DivIdToPrint" class="ListadoLicencias">
          <asp:Listview>
      </div>

                 <br />
  <asp:Button runat="server" ID="cmdImprimir" Text="Imprimir" OnClientClick="printDiv();"  /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:06:05.070

我认为问题在于它`innerHTML`只是按照它所说的去做：它采用**内部**HTML。你需要做类似的事情

```
newWin.document.write(
    '<html><body><div id="DivIdToPrint" class="ListadoLicencias">'
        + divToPrint.innerHTML
        + '</div></body></html>'
); 
```

或`innerHTML`从父元素中获取。

要应用您的样式表，您必须将您在弹出函数中编写的 HTML 扩展为

```
<html><head><link href="style.css" rel="stylesheet"/></head><!-- ... --></html> 
```

# java - 在多服务器 Adob e Coldfusion 9 中为特定实例添加到 ColdFusion 类路径

> ID：15505738
> 
> 赞同：3
> 
> 时间：2013-03-19T16:56:05.297
> 
> 标签：java, coldfusion, classpath, coldfusion-9

Adobe ColdFusion 9 Multi-Server 在 CF Admin 中没有“JVM 和 Java 设置”页面，因此要向 CF 类路径添加一些内容，对于给定实例，该实例必须使用备用 jvm.config 启动。

从备用 jvm.config 开始我没有问题。但是，我确实无法**准确地**知道如何以正确的方式编辑该文件。

我的库存 jvm.config 看起来像这样（忽略换行符——它们不在实际文件中）：

```
java.args=-server -Xmx512m -Dcoldfusion.sessioncookie.httponly=true -Dsun.io.useCanonCaches=false -XX:MaxPermSize=192m -XX:+UseParallelGC -Xbatch -Djava.awt.headless=true
-Dcoldfusion.rootDir={application.home}/
-Djava.security.policy={application.home}/servers/cfusion/cfusion-ear/cfusion-war/WEB-INF/cfusion/lib/coldfusion.policy
-Djava.security.auth.policy={application.home}/servers/cfusion/cfusion-ear/cfusion-war/WEB-INF/cfusion/lib/neo_jaas.policy 
```

我尝试将类文件夹添加到类路径中的一次比较成功的尝试如下所示。（这里只是一对。）

```
java.args=-server -Xmx512m -Dcoldfusion.sessioncookie.httponly=true -Dsun.io.useCanonCaches=false -XX:MaxPermSize=192m -XX:+UseParallelGC -Xbatch -Djava.awt.headless=true
-Dcoldfusion.rootDir={application.home}/
-Djava.security.policy={application.home}/servers/cfusion/cfusion-ear/cfusion-war/WEB-INF/cfusion/lib/coldfusion.policy
-Djava.security.auth.policy={application.home}/servers/cfusion/cfusion-ear/cfusion-war/WEB-INF/cfusion/lib/neo_jaas.policy
-Dcoldfusion.classPath={application.home}/servers/hud/cfusion.ear/cfusion.war/WEB-INF/cfusion/lib,/var/www/apps/onecpd/GeoServices_sandbox 
```

*我说“我更成功的尝试之一”是因为实例确实启动了，并且这些类在 CF 类路径上[我可以用 createObject() 实例化它们]，但是实例启动并不干净——有很多 Flex-相关错误：

```
jamie@icf109118-ubuntu:/opt/jrun4/servers/hud/cfusion.ear/cfusion.war/WEB-INF/cfusion/lib$ sudo /opt/jrun4/bin/jrun -config /opt/jrun4/bin/jvm_onecpd.config start onecpd
Starting Macromedia JRun 4.0 (Build 108858), onecpd server
03/19 11:37:34 info JRun Naming Service listening on *:2911
03/19 11:37:35 info No JDBC data sources have been configured for this server (see jrun-resources.xml)
03/19 11:37:35 info JRun Web Server listening on *:8303
03/19 11:37:35 info JRun Proxy Server listening on *:51003
03/19 11:37:35 info Deploying enterprise application "JRun 4.0 Internal J2EE Components" from: file:/opt/jrun4/lib/jrun-comp.ear
03/19 11:37:35 info Deploying EJB "JRunSQLInvoker" from: file:/opt/jrun4/lib/jrun-comp.ear
Server onecpd ready (startup time: 2 seconds)
03/19 11:37:35 info Deploying enterprise application "cfusion" from: file:/opt/jrun4/servers/onecpd/cfusion.ear/
03/19 11:37:36 info Deploying web application "cfusion" from: file:/opt/jrun4/servers/onecpd/cfusion.ear/
java.lang.ClassNotFoundException: flex.server.j2ee.cache.CacheFilter
    at coldfusion.bootstrap.BootstrapClassLoader.loadClass(BootstrapClassLoader.java:235)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at coldfusion.bootstrap.ClassloaderHelper.initFilterClass(ClassloaderHelper.java:123)
    at coldfusion.bootstrap.BootstrapFilter.init(BootstrapFilter.java:34)
    at jrun.servlet.FilterObject.init(FilterObject.java:63)
    at jrun.servlet.FilterManager.loadFilter(FilterManager.java:220)
    at jrun.servlet.FilterManager.init(FilterManager.java:158)
    at jrun.servlet.FilterManager.create(FilterManager.java:75)
    at jrun.servlet.WebApplicationService.start(WebApplicationService.java:230)
    at jrun.ea.EnterpriseApplication.start(EnterpriseApplication.java:194)
    at jrun.deployment.DeployerService.initModules(DeployerService.java:708)
    at jrun.deployment.DeployerService.createWatchedDeployment(DeployerService.java:243)
    at jrun.deployment.DeployerService.deploy(DeployerService.java:428)
    at jrun.deployment.DeployerService.checkWatchedDirectories(DeployerService.java:179)
    at jrun.deployment.DeployerService.run(DeployerService.java:889)
    at jrunx.scheduler.SchedulerService.invokeRunnable(SchedulerService.java:230)
    at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
    at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)
03/19 11:37:36 user failed to load: flex.server.j2ee.cache.CacheFilter
03/19 11:37:36 error Error loading class for Filter CFCacheFilter: Filter is disabled.
[1]java.lang.ClassNotFoundException: flex.server.j2ee.cache.CacheFilter
    at coldfusion.bootstrap.BootstrapClassLoader.loadClass(BootstrapClassLoader.java:235)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at coldfusion.bootstrap.ClassloaderHelper.initFilterClass(ClassloaderHelper.java:123)
    at coldfusion.bootstrap.BootstrapFilter.init(BootstrapFilter.java:34)
    at jrun.servlet.FilterObject.init(FilterObject.java:63)
    at jrun.servlet.FilterManager.loadFilter(FilterManager.java:220)
    at jrun.servlet.FilterManager.init(FilterManager.java:158)
    at jrun.servlet.FilterManager.create(FilterManager.java:75)
    at jrun.servlet.WebApplicationService.start(WebApplicationService.java:230)
    at jrun.ea.EnterpriseApplication.start(EnterpriseApplication.java:194)
    at jrun.deployment.DeployerService.initModules(DeployerService.java:708)
    at jrun.deployment.DeployerService.createWatchedDeployment(DeployerService.java:243)
    at jrun.deployment.DeployerService.deploy(DeployerService.java:428)
    at jrun.deployment.DeployerService.checkWatchedDirectories(DeployerService.java:179)
    at jrun.deployment.DeployerService.run(DeployerService.java:889)
    at jrunx.scheduler.SchedulerService.invokeRunnable(SchedulerService.java:230)
    at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
    at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)
[0]javax.servlet.ServletException: flex.server.j2ee.cache.CacheFilter
    at coldfusion.bootstrap.ClassloaderHelper.initFilterClass(ClassloaderHelper.java:132)
    at coldfusion.bootstrap.BootstrapFilter.init(BootstrapFilter.java:34)
    at jrun.servlet.FilterObject.init(FilterObject.java:63)
    at jrun.servlet.FilterManager.loadFilter(FilterManager.java:220)
    at jrun.servlet.FilterManager.init(FilterManager.java:158)
    at jrun.servlet.FilterManager.create(FilterManager.java:75)
    at jrun.servlet.WebApplicationService.start(WebApplicationService.java:230)
    at jrun.ea.EnterpriseApplication.start(EnterpriseApplication.java:194)
    at jrun.deployment.DeployerService.initModules(DeployerService.java:708)
    at jrun.deployment.DeployerService.createWatchedDeployment(DeployerService.java:243)
    at jrun.deployment.DeployerService.deploy(DeployerService.java:428)
    at jrun.deployment.DeployerService.checkWatchedDirectories(DeployerService.java:179)
    at jrun.deployment.DeployerService.run(DeployerService.java:889)
    at jrunx.scheduler.SchedulerService.invokeRunnable(SchedulerService.java:230)
    at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
    at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66) 
```

请注意，如果不将 {application.home}/servers/hud/cfusion.ear/cfusion.war/WEB-INF/cfusion/lib 添加到 Dcoldfusion.classPath，服务器根本不会真正启动。

那么，在 jvm.config 中干净地向 ColdFusion 类路径添加内容的神奇公式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:16:53.430

来自 Christian Cantrell - 工程经理和传播者，我给你[ColdFusion 类路径的权威指南](http://blogs.adobe.com/cantrell/archives/2004/07/the_definitive.html)（虽然它有点过时了）

以下是我认为与您的设置相关的部分摘录：

> **J2EE 部署**
> 
> 1.  将类或 jar 文件添加到类路径的最简单方法是简单地将它们放在 lib 目录中，它们会自动被拾取。该目录位于 {cf_installation}/servers/lib。这些类文件将可供所有服务器使用。
>     
>     
> 2.  您还可以通过将类文件放到“{cf_installation}/servers/default/cfmx/WEB-INF/lib”中，使您的类文件仅对 ColdFusion 服务器可用。（请注意，将它们放入 {cf_installation}/servers/default/cfmx/WEB-INF/cfusion/lib 将不起作用。）
>     
>     
> 3.  您可以将它们放在任何 Java 扩展目录中。要查找 Java 扩展目录列表，请打开 ColdFusion 管理员并单击“系统信息”。在底部，您将看到一个名为“Java Ext Dirs”的系统属性。您可以将 jar 和 class 文件放在任何这些目录中，以让 ColdFusion 服务器获取它们。
>     
>     
> 4.  另一种方法是通过 JRun 管理控制台添加类。打开控制台，在默认服务器下，单击设置，然后将您的类添加到类路径列表中。（注意您也可以点击默认服务器下的“ColdFusion MX 应用程序”，然后点击设置进行相同的更改。）
>     
>     
> 5.  最后，再一次，您可以自己编辑 jvm.config 文件，但我还是建议您坚持使用上述方法之一。

**从下面的评论更新**

When editing the jvm.config file (option 5), try adding the directory path to the `java.class.path=` line in the jvm.config file (at the bottom). Not in the `java.args=` as you have done in the posted example.

# jquery - 如何获取以给定字符串开头的特定类的元素？

> ID：15505745
> 
> 赞同：34
> 
> 时间：2013-03-19T16:56:23.030
> 
> 标签：jquery, html, css, twitter-bootstrap

我有一个包含多个类的元素列表，例如：

```
<input class="etape btn-info others">
<input class="etape btn-inverse others">
<input class="etape btn-danger others"> 
```

如何编写允许我执行以下操作的 jQuery 代码...

```
$(".etape").click(function(){
   $(this).get("the class that starts with btn-")
   // in order to store this value in a variable to reuse it later 
}); 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-19T17:06:00.710

您可以使用正则表达式或`split`类名。

```
$(".etape").click(function(){
   var classes = $.grep(this.className.split(" "), function(v, i){
       return v.indexOf('btn') === 0;
   }).join();
}); 
```

[http://jsfiddle.net/LQPh6/](http://jsfiddle.net/LQPh6/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-19T17:34:00.103

你也可以试试：

```
$(".etape").click(function () {
    var theClass = $(this).attr("class").match(/btn[\w-]*\b/);
    console.log(theClass); 
}); 
```

使用 match 而不是 grep...

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-19T16:57:54.873

```
 // Only select input which have class 
 $('input[class]').click(function(){  
   var myClass;
   // classNames will contain all applied classes
   var classNames = $(this).attr('class').split(/\s+/);  

     // iterate over all class  
     $.each(classNames, function(index, item) {
        // Find class that starts with btn-
        if(item.indexOf("btn-") == 0){
          // Store it
          myClass = item;
        }
     });

  }); 
```

[**现场演示**](http://jsfiddle.net/aFmY7/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-19T17:00:17.317

将这些值存储在[`data`](http://api.jquery.com/jQuery.data/)属性中可能会更好：

```
<input class="etape others" data-btntype="info">
<input class="etape others" data-btntype="inverse">
<input class="etape others" data-btntype="danger"> 
```

然后：

```
 $(".etape").click(function(){
     var myBtnType = $(this).data('btntype');
 }); 
```

[jsFiddle](http://jsfiddle.net/Mr5zn/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-19T16:59:37.590

你可以让 btn 成为它自己的类。但是，这将起作用。

```
$("div[class^='btn-']") 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-19T16:59:45.503

试试这个：`$('input[class*='btn']').attr("class");`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-05-26T11:02:01.363

**我刚刚将@Vohuman 的功能设置为可重复使用的功能：**

```
// getClassStartsWith(classes,startswith);
// Example : getClassStartsWith( 'item w-2 h-4 hello' , 'h-' );
function getClassStartsWith(t,n){var r=$.grep(t.split(" "),function(t,r){return 0===t.indexOf(n)}).join();return r||!1} 
```

例子...

**HTML：**

```
<div class="item w-2 h-4 hello"></div> 
```

**JS：**

```
var $element = $('.item');
var classes = $element[0].className;
var getHeight = getClassStartsWith(classes,'h-'); 
```

那将返回`h-4`，如果没有类开始`h-`将返回`false`

**演示： http:** [//jsbin.com/mijujunaca/edit ?js,console](http://jsbin.com/mijujunaca/edit?js,console)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-19T16:58:26.747

这个怎么样？ [http://api.jquery.com/attribute-contains-word-selector/](http://api.jquery.com/attribute-contains-word-selector/)

```
$('input[class~="btn-"]') 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-19T16:59:43.860

以第一类开头`btn`且不能是第一类的类：

工作小提琴：http: [//jsfiddle.net/c9Tdx/](http://jsfiddle.net/c9Tdx/)

```
$("input[class^='btn'],input[class*=' btn']").each(function(){
     //whatever
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-19T17:02:52.523

试试这个，

```
if($(selector).attr("class").lastIndexOf("classToStartFrom") == 0)
   return "this selector class name starts with 'classToStartFrom'";
else
   return "this selector class name doesn't start with 'classToStartFrom'"; 
```

代码未经测试。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-10-25T17:32:46.487

此函数可以使用**正则表达式获取 Class、ID、Data 和所有类型的属性**

```
$.fn.Get_Attr_Regex = function(Pattern,Type) 
{
    Type = Type || 'class';
    var List_Str = this.attr(Type);

    if(typeof List_Str !== typeof undefined && List_Str !== false) 
    {
        var regex = new RegExp(Pattern, "g");
        var List_Array = List_Str.split(" ");
        for(var i = 0; i < List_Array.length; i++)
        {
            if(regex.test(List_Array[i]))
            {
                return List_Array[i];
            }
        }
    }
    return false;
}; 
```

使用它

```
$('.T_Header').Get_Attr_Regex('btn.*','class'); // => return class value which start with btnxxx 
```

或者

```
$('.T_Header').Get_Attr_Regex('btn.*','id');  // => return id value which start with btnxxx 
```

或者

```
$('.T_Header').Get_Attr_Regex('btn.*','data-info'); // => return data attribute value which start with btnxxx 
```

# django - 通过 neo4django 连接到 neo4j 时出错

> ID：15505753
> 
> 赞同：4
> 
> 时间：2013-03-19T16:56:51.070
> 
> 标签：django, neo4j, neo4django

我有一个 Django（1.4.0 版）网络应用程序，它使用 neo4django 映射器在 neo4j（1.8.2 版）上运行查询。

但是，一旦我进行类似的查询

```
OnlinePerson.objects.filter(name="Bijan") 
```

我得到一个运行时错误

```
('The type node for class OnlinePerson could not be created in the database.', StatusException()) 
```

我尝试了很多不同的东西，但无法解决！

```
Traceback:
File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/Bijan/BHIC/mySVN/NeoD/src/NeoD/views.py" in home
  22\.     return render_to_response('index.html', {'Person' : entries, 'Person2': ["Bijan","Nastaran"]})
File "/Library/Python/2.7/site-packages/django/shortcuts/__init__.py" in render_to_response
  20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
File "/Library/Python/2.7/site-packages/django/template/loader.py" in render_to_string
  171\.         return t.render(Context(dictionary))
File "/Library/Python/2.7/site-packages/django/template/base.py" in render
  140\.             return self._render(context)
File "/Library/Python/2.7/site-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
File "/Library/Python/2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/Library/Python/2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/Library/Python/2.7/site-packages/django/template/defaulttags.py" in render
  145\.         len_values = len(values)
File "/Library/Python/2.7/site-packages/django/db/models/query.py" in __len__
  85\.                 self._result_cache = list(self.iterator())
File "/Library/Python/2.7/site-packages/neo4django/db/models/query.py" in iterator
  733\.         for model in self.query.execute(using):
File "/Library/Python/2.7/site-packages/neo4django/db/models/query.py" in execute
  610\.             type_node = self.nodetype._type_node(using)
File "/Library/Python/2.7/site-packages/neo4django/db/models/base.py" in _type_node
  423\.             return cls.__type_node_classmethod(using)
File "/Library/Python/2.7/site-packages/neo4django/db/models/base.py" in __type_node
  406\.             raise RuntimeError(error_message, e)

Exception Type: RuntimeError at /
Exception Value: ('The type node for class OnlinePerson could not be created in the database.', StatusException()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:08:45.337

最终经过大量的努力并尝试了不同的解决方案，问题得到了解决。我认为主要问题在于我的 neo4j 版本（1.8.2）。

切换回 1.7.2 后，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:08:38.437

你有安装 Neo4j Gremlin 插件吗？类型节点是使用 Gremlin 插件创建的，因为它们需要某些事务性承诺。它通常默认安装。不幸的是，一些环境（比如 Heroku）禁用了这个插件。

# c++ - 窗口是否接收三次点击事件？如何处理高阶点击？

> ID：15505755
> 
> 赞同：3
> 
> 时间：2013-03-19T16:56:52.933
> 
> 标签：c++, windows, winapi

窗口是否会像双击一样接收有关三次单击的消息？我找不到与`WM_LBUTTONTRIPLECLICK`message 类似的[`WM_LBUTTONDBLCLK`消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645606.aspx)。

我想实现类似于 Microsoft Word 的东西，其中三次单击选择整个段落。如何检测窗口上的三次点击？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T17:04:48.947

这记录在 MSDN 上：http: [//msdn.microsoft.com/en-us/magazine/cc163628.aspx](http://msdn.microsoft.com/en-us/magazine/cc163628.aspx)

这个想法是等待双击，然后在之后的特定时间段内检查单击。

> 它不只是 Internet Explorer，它也是 Microsoft Word 和 Outlook®，尽管 Outlook 略有不同之处在于三次单击选择行而不是段落。你是对的，没有 `WM_LBUTTONTRIPLECLICK`，但自己实现一个并不难。毕竟，什么是三次单击而不是快速连续的三次单击？或者快速连续双击和单击。您只需要知道点击需要多快才能算作三次点击？要找出答案，您可以调用适当命名的 `::GetDoubleClickTime`，它以毫秒为单位返回双击时间。因此，如果您在这么多毫秒内双击然后单击，则算作三次单击。

# javascript - 丢弃后销毁可拖动对象时出错

> ID：15505763
> 
> 赞同：4
> 
> 时间：2013-03-19T16:57:09.337
> 
> 标签：javascript, jquery, jquery-ui

当我尝试在拖放后销毁可拖动对象时，我在 jQuery UI 中收到错误消息。我正在使用 jQuery 1.9.1 和 jQuery UI 1.10.0。

**脚本**

```
$(".drag").draggable({
    revert: "invalid",
    helper: "clone"
});

$(".drop").droppable({
    accept: ".drag",
    drop: function(event,ui){
      ui.helper.remove();
      $(this).append(ui.draggable);
      $(ui.draggable).draggable("destroy");
    }
}); 
```

**HTML**

```
<div class="drag">Draggable</div>
<div class="drop">Droppable</div> 
```

**示例：http:** [//jsfiddle.net/feDME/](http://jsfiddle.net/feDME/)

**收到错误**

> 类型错误：$(...).data(...) 未定义

我在过去的几个小时里都没有运气。我发现了一篇类似的帖子，其中不包含决议。有谁可以帮我离开这里吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T19:24:38.670

看起来 jquery-ui 可拖动代码中有一个竞争条件，它在拖动停止时尝试设置光标。以下行失败，因为在调用 stop 时“可拖动”数据尚未附加到可拖动 div。

```
var o = $(this).data('draggable').options; 
```

这有点骇人听闻，但这个 setTimeout 会解决它。

```
$(".drop").droppable({
    accept: ".drag",
    drop: function(event,ui){
      ui.helper.remove();
      $(this).append(ui.draggable);
      setTimeout(function() {
          $(ui.draggable).draggable("destroy");      
      }, 0);      
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-02T09:00:30.370

我不建议你使用`setTimeout`黑客。真正按需调用destroy方法的正确方法是`ui-draggable-dragging`在调用`destroy`方法之前删除特殊类。因此，您的代码将如下所示：

```
$(".drop").droppable({
    accept: ".drag",
    drop: function(event,ui){
      ui.helper.remove();
      $(this).append(ui.draggable);
      var dragElem = $(ui.draggable);
      // this will destroy the item
      dragElem.removeClass('ui-draggable-dragging').draggable("destroy");
    }
}); 
```

检查可拖动代码，了解发生了什么以及为什么要删除此类[https://github.com/jquery/jquery-ui/blob/master/ui/draggable.js#L92](https://github.com/jquery/jquery-ui/blob/master/ui/widgets/draggable.js#L94)

# c++ - 是否可以在编译时收集数据

> ID：15505767
> 
> 赞同：1
> 
> 时间：2013-03-19T16:57:17.573
> 
> 标签：c++, templates, c-preprocessor, metaprogramming

目标：在代码的不同部分，我正在加载文件（在我的例子中是纹理和字体）。因此，下载文件可以在程序执行的任何时候发生（虽然所有缓存，但仍然。）我想下载只在启动时发生一次。

可能的解决方案：

1.  使用纹理和字体手动填充缓存对象。
2.  扫描文件夹 /textures/ /fonts/
3.  魔法

实际上我会像第二种情况一样处理纹理（因为它对内存并不重要）。对于字体，我将使用第一种情况（因为它们对每种尺寸都有不同的渲染）。但我仍然想知道如何使这个过程自动化。

应该忘记纹理和字体以缩小问题范围并考虑带字符串的向量。

```
class Files{
    static vector<string> files;
    static void addFile(string file){/* magic. may be template<string file> */}
    static void loadFiles()
    {
         for(auto file:files){
            cout << file; //for example
         }
    }

}

int main(){
    Files::loadFiles();//=> foobarsmthing
    Files::addFile("foo");
    Files::addFile("bar");
    Files::addFile("smthing");
    return 0;
} 
```

我知道可以使用模板计算一些表达式。并认为我的问题的答案只是“不”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:06:28.823

当然，这是可能的。只是不作为 C++ 模板元编程的一部分。TMP 是图灵完备的，这意味着它在计算能力方面与任何其他编程语言一样强大。但它无法与外界对话。它不能通过网络套接字进行通信，它不能扫描你的硬盘驱动器中的文件，它不能播放声音，它不能在你的桌面上渲染一个茶壶。

但是您可以在编译过程中运行其他脚本。MSBuild 和所有风格的 makefile 都支持在编译期间运行任意脚本。您不必限制自己*只*运行C++ 编译器。

# java - Java 正则表达式 - 满足包容性逗号

> ID：15505769
> 
> 赞同：1
> 
> 时间：2013-03-19T16:57:19.383
> 
> 标签：java

我正在尝试拆分逗号分隔的对字符串，但无法解决如何满足包含逗号的问题。

这是我的测试用例 -

```
private void stringSplit() {
   String value = "{aaa=1111,bbb=2222,ccc=3333}";
   String regEx = "[^,]+=[^,]+";
   String separator = "=";
   final Pattern pattern = Pattern.compile(regEx);
   final Matcher matcher = pattern.matcher(value);
   while (matcher.find()) {
      final String group = matcher.group();
      final String key = group.substring(0, group.indexOf(separator));
      final String val =
         group.substring(
            group.indexOf( separator ) + separator.length(),
            group.length());
      System.out.println("key [" + key + "], val [" + val + "]");
   }
} 
```

这是我的结果-

```
key [{aaa], val [1111]
key [bbb], val [2222]
key [ccc], val [3333}] 
```

到目前为止一切都很好...

但是数值中可能有逗号，即

```
"{aaa=11,11,bbb=2222,ccc=333,3}"; 
```

我想要的结果是-

```
key [{aaa], val [11,11]
key [bbb], val [2222]
key [ccc], val [333,3}] 
```

你们中的任何一个正则表达式大师都可以在这里帮助我吗？

谢谢！

**编辑**

继@bmorris591 之后的进一步评论。

好的，我有一个最终查询 - 这是这个疯狂的正则表达式（+ 一些 java 代码）需要处理的最终列表。

这是我的代码 -

```
private void stringSplit() {
    String value = "{1=\"1, one\", 22=\"+t,w,o\", 333=\"three, \"3\", -33,,333,\", 4444=\"four. '4-4, (44),  -44\"}, 555=\"\", \"666\"=6666, \"777\"=\"7777\"}";
    String regex = "[^\\{,]+=([[\\w]\\(\\)\\-\\+\\.\"'\\s,]+)[,}]";
    String separator = "=";
    final Pattern pattern = Pattern.compile(regex);
    final Matcher matcher = pattern.matcher(value);
    while (matcher.find()) {
        final String group = matcher.group();
        showKeyAndValue(group, separator);
    }
}

private void showKeyAndValue(final String group, final String keyValueSeparator) {
    System.out.println("group [" + group + "]");
    final String key = removeQuotesFromString(group.substring(0,
            group.indexOf(keyValueSeparator)));
    final String val = removeQuotesFromString(group.substring(
            group.indexOf(keyValueSeparator)
                    + keyValueSeparator.length(), group.length()));
    System.out.println("key [" + key + "], val [" + val + "]");
}

private String removeQuotesFromString(final String str) {
    String returnString = str.trim();
    if (returnString.startsWith("\"")) {
        returnString = returnString.substring(
                returnString.indexOf("\"") + 1, returnString
                        .lastIndexOf("\""));
    }
    return returnString;
} 
```

这是结果 -

```
group [1="1, one",]
key [1], val [1, one]
group [ 22="+t,w,o",]
key [22], val [+t,w,o]
group [ 333="three, "3", -33,,333,",]
key [333], val [three, "3", -33,,333,]
group [ 4444="four. '4-4, (44),  -44"}]
key [4444], val [four. '4-4, (44),  -44]
group [ 555="",]
key [555], val []
group [ "666"=6666,]
key [666], val [6666,]
group [ "777"="7777"}]
key [777], val [7777] 
```

**除了**键 666 之外，所有结果都是正确的。如您所见，后面有一个逗号。现在我可以把它去掉（对于一个**没有封装在引号中的***值*（基本上是一个数字））但我想知道这是否可以在正则表达式中实现，因为这将是一个“更清洁”的解决方案......

 **非常感谢，如果您能想到任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:01:42.440

您可以使用负前瞻的魔力，将字符串拆分为逗号**而不是**数字使用

```
public static void main(String[] args) {
    final String s = "{aaa=11,11,bbb=2222,ccc=333,3}";
    final String[] ss = s.substring(1, s.length() -1).split(",(?!\\d)");
    for(final String str : ss) {
        System.out.println(str);
    }
} 
```

输出

```
aaa=11,11
bbb=2222
ccc=333,3 
```

您可以轻松扩展它以直接拉出 key=value 对

```
public static void main(String[] args) {
    final String s = "{aaa=11,11,bbb=2222,ccc=333,3}";
    final Pattern p = Pattern.compile("([A-Za-z]++)=([\\d,]+)(?!\\d)[,}]");
    final Matcher matcher = p.matcher(s);
    while (matcher.find()) {
        System.out.println(matcher.group(1));
        System.out.println(matcher.group(2));
        System.out.println("DONE");
    }
} 
```

输出

```
aaa
11,11
DONE
bbb
2222
DONE
ccc
333,3
DONE 
```

**编辑**

在OP的评论之后：

*该对的值部分是字母数字（包括`,+-*/=()`），并且该值始终封装在引号中，也可能多次出现`,+-*/=()`...*

我已经修改了表达式：

```
public static void main(String[] args) {
    final String s = "{1=\"1, one\", 22=\"+t,w,o\", 333=\"three, 3, -33,,333\", 4444=\"four. 4-4, (44), -44\"}";
    System.out.println("String is: " + s);
    final Pattern p = Pattern.compile("([^{=,\\s]++)=\"([^\"]++)\"");
    final Matcher matcher = p.matcher(s);
    while (matcher.find()) {
        System.out.println(matcher.group(1));
        System.out.println(matcher.group(2));
        System.out.println("DONE");
    } 
```

输出：

```
String is: {1="1, one", 22="+t,w,o", 333="three, 3, -33,,333", 4444="four. 4-4, (44), -44"}
1
1, one
DONE
22
+t,w,o
DONE
333
three, 3, -33,,333
DONE
4444
four. 4-4, (44), -44
DONE 
```

该模式现在将匹配任何不是`=,{`或空格后跟 an `=`，然后是任何不包含`"`封装 in的模式`"`。这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:50:55.957

bmorris591

感谢您的回复。

对不起，但回顾我原来的帖子有点太简单了。

该对的*值*部分是字母数字（包括“,+-*/=()”），该值也*总是*封装在引号中， “,+-*/=()”也*可能*多次出现。 .

IE

```
"{1=\"1 one\", 22=\"two\", 333=\"three 3\"}"
"{1=\"1, one\", 22=\"+t,w,o\", 333=\"three, 3, -33,,333\", 4444=\"four. 4-4, (44), -44\"}" 
```

由于这很复杂，我认为最简单的解决方案是在构造对字符串之前用一些标记字符替换所有出现的逗号，执行正则表达式，然后将逗号重新应用于值...

感谢您对我最初帖子的回复，因为它*是*我最初问题的解决方案......**

# objective-c - 网点应该有 getter/setter 吗？

> ID：15505771
> 
> 赞同：2
> 
> 时间：2013-03-19T16:57:19.777
> 
> 标签：objective-c, macos, cocoa-touch, cocoa, interface-builder

我应该**总是**写吗

```
 @interface MyClass
    {
        NSTextField * myTextField ;
    }
    @property (assign)  NSTextField * myTextField ; 
```

要不就

```
 @interface MyClass
    {
        NSTextField * myTextField ;
    } 
```

?

为什么我有理由认为我们应该添加该`@property`行：

*   我最近有一个程序，如果插座没有 getter/setter，它将无法工作。

*   加：我们在创建项目时发现了以下行

    ```
    @property (assign) IBOutlet NSWindow *window; 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:59:05.723

一旦你`property`为一个出口对象或任何其他对象创建了一个 ivar，就会为它创建一个（在新的编译器中）。

现在创建 ivars 和属性已过时。甚至`property`与自动合成相匹配。

如果您真的想要 ivars，那么您可以将其放入`.m`文件中，或者如果您希望它们是私有的，则使用它们为类添加扩展名。

> 出口应该有setter/getter

是的，您确实需要多次访问它们。比如检查单选按钮、复选框的状态，设置stringValue为NSTextField，通过[tableView reloadData]重新加载表格等。

```
@interface MyClass
    {
        NSTextField * myTextField ; //this is ivar
    }
    @property (assign)  NSTextField * myTextField ; //this is property
@end 
```

无论您放入什么`.h`都是`public`可访问的，如果您想隐藏它，`.m`即使在扩展中也可以这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:26:48.803

我个人更喜欢，如果你需要你的对象引用范围，那么在类之外使用属性声明。否则将其声明为类括号内的实例变量，并在实现文件中声明。（如果您没有进一步继承此变量功能）

所以，

*   如果您需要在类之外访问变量实例，请声明属性。在 MyClassViewController.h 头文件中

`@property (strong, nonatomic) IBOutlet NSTextField *myTextField;`

所以现在在其他类中，可以通过以下方式访问它：

```
MyClassViewController *myClassViewController = [[MyClassViewController alloc] init];
[myClassViewController.myTextField setText:@"MyValue"]; 
```

也得到像

```
NSLog(@"%@", [myClassViewController.myTextField text]); 
```

*   如果您不希望这样的公共访问，但您希望它被继承。然后在类声明块本身中声明。在 ViewController.h 头文件中

    ```
    @interface ViewController { @public: // or @protected
      NSString *myString;
    } 
    ```

现在，如果有另一个类继承了 ViewController 类，那么这个属性将根据其访问说明符在 ChildViewController 中被继承。

*   如果您想要完全隐藏的属性或变量。就像它甚至没有在该类本身之外使用一样，那么您可以在私有类别本身的实现文件（.m）中声明它。在 ViewController.m 文件中：

`@interface ViewController () {`

```
 NSString *myString;
} 
```

因此，这将仅在 .m 文件中可见，其他任何地方都没有。

现在声明`@property`- 只有在需要 setter-getter 默认方法（如 setMyString 等）时才需要声明它。这也可以根据您对该实例的可见性要求在 .h 和 .m 中声明。

希望现在你能理解这个概念。一切都与能见度有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T17:02:02.063

All you need is the property for Interface Builder using `IBOutlet`. If you're not using Interface Builder you don't need `IBOutlet`. If you're not using Interface Builder you may not even need a property at all (properties are generally public, while instance variables are always private).

```
@interface MyClass : UIViewController

@property (assign) IBOutlet NSTextField *myTextField ; 
```

You don't need to create an instance variable or synthesize it as its done for you.

You can access it with `self.myTextField` in your code.

# debian - debian apt 软件包哈希和不匹配

> ID：15505775
> 
> 赞同：42
> 
> 时间：2013-03-19T16:57:29.967
> 
> 标签：debian, upgrade, apt

在 Debian 命令行中，我在执行`aptitude update; aptitude upgrade`. 下面是命令行输出。我试过了`aptitude clean`，但这似乎没有帮助。我也做了一些谷歌搜索，但似乎没有任何帮助。几天来我一直收到不匹配错误。

任何帮助表示赞赏。

* * *

```
Resolving dependencies...
open: 405; closed: 880; defer: 58; conflict: 78.
The following packages will be upgraded:
  apache2.2-bin apt-utils aptdaemon aptdaemon-data avahi-daemon bind9-host dnsutils ekiga gir1.2-cogl-1.0 gir1.2-coglpango-1.0 gstreamer0.10-alsa gstreamer0.10-ffmpeg
  gstreamer0.10-plugins-base gstreamer0.10-x host libapt-inst1.5 libavahi-client3 libavahi-common-data libavahi-common3 libavahi-core7 libavahi-glib1 libavahi-gobject0
  libavahi-ui-gtk3-0 libavahi-ui0 libavutil51 libbind9-80 libcapi20-3 libcogl-common libcogl9 libdbus-glib-1-2 libdns88 libgconf2.0-cil libgssapi-krb5-2 libgssrpc4
  libgstreamer-plugins-base0.10-0 libisc84 libisccc80 libisccfg82 libk5crypto3 libkrb5-3 libkrb5support0 liblwres80 libmp3lame0 libmtp-common libmtp-runtime libmtp9
  libpostproc52 libruby1.8 libswscale2 libsystemd-login0 libtag1-vanilla libtag1c2a libxml2 libxml2-utils linux-headers-3.2.0-4-686-pae linux-headers-3.2.0-4-common
  linux-image-3.2.0-4-686-pae linux-libc-dev linux-source-3.2 python-aptdaemon python-aptdaemon-gtk python-aptdaemon.gtk3widgets python-aptdaemon.gtkwidgets
  python-libxml2 python-numpy ruby1.8 telepathy-gabble unattended-upgrades xserver-xorg-video-ati xserver-xorg-video-radeon
The following packages are RECOMMENDED but will NOT be installed:
  krb5-locales
70 packages upgraded, 0 newly installed, 0 to remove and 168 not upgraded.
Need to get 4322 kB/136 MB of archives. After unpacking 7982 kB will be used.
Do you want to continue? [Y/n/?]
Get: 1 http://www.deb-multimedia.org/ testing/main libavutil51 i386 8:1.0.5-dmo1 [111 kB]
Get: 2 http://www.deb-multimedia.org/ testing/main libmp3lame0 i386 1:3.99.5-dmo2 [338 kB]
Get: 3 http://www.deb-multimedia.org/ testing/main libpostproc52 i386 8:1.0.5-dmo1 [79.6 kB]
Get: 4 http://www.deb-multimedia.org/ testing/main libswscale2 i386 8:1.0.5-dmo1 [126 kB]
Get: 5 http://www.deb-multimedia.org/ testing/main libtag1-vanilla i386 1.8-dmo1 [257 kB]
Get: 6 http://www.deb-multimedia.org/ testing/main libtag1c2a i386 1.8-dmo1 [9396 B]
Get: 7 http://www.deb-multimedia.org/ testing/main gstreamer0.10-ffmpeg i386 1:0.10.13-dmo1 [3402 kB]
Fetched 4322 kB in 35s (121 kB/s)                                                                                                                                                
E: Failed to fetch http://www.deb-multimedia.org/pool/main/f/ffmpeg-dmo/libavutil51_1.0.5-dmo1_i386.deb: Hash Sum mismatch
E: Unable to correct for unavailable packages 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-19T19:29:29.037

尝试使用`apt-get`：

```
apt-get clean
rm -rf /var/lib/apt/lists/*
apt-get clean
apt-get update
apt-get upgrade 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-12-14T16:45:14.570

如果删除`/var/lib/apt/lists/*`不起作用...
（尤其是如果您在代理后面），请**像这样修复“哈希和不匹配”**：

使用此内容创建文件 */etc/apt/apt.conf.d/99fixbadproxy*

```
Acquire::http::Pipeline-Depth 0;
Acquire::http::No-Cache true;
Acquire::BrokenProxy    true; 
```

另请参阅[此处](https://gist.github.com/trastle/5722089)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2020-06-09T04:58:02.650

我在 Windows 上使用 Virtualbox 时遇到了这个问题，Ubuntu 作为我的 GuestOS。由于 Hyper-V 在 Windows 上运行，我得到了哈希和不匹配（以及其他奇怪的错误）。[此链接](https://petri.com/how-to-disable-hyper-v-completely-in-windows-10)详细说明了如何禁用 Hyper-V，摘录如下：

打开 Powershell - 以管理员身份运行并使用以下命令：

```
bcdedit /set hypervisorlaunchtype off 
```

随后重新启动。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-31T12:19:48.850

我在安装 Tizen GBS 包时遇到了类似的问题。

**只有以下解决方案对我有帮助：**

1.  手动下载错过的 *.deb 包
2.  将包复制到 /var/cache/apt/archives
3.  再次运行安装命令

在这种情况下，apt 工具首先检查包的本地可用性。如果它存在于 /var/cache/apt/archives 路径下，则跳过下载步骤（带有哈希和不匹配错误）。

**例子：**

```
wget http://download.tizen.org/tools/latest-release/Ubuntu_16.04/amd64/librpm-tizen_4.11.0.1.tizen20140530-tizen20140723_amd64.deb

sudo cp librpm-tizen_4.11.0.1.tizen20140530-tizen20140723_amd64.deb /var/cache/apt/archives 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-23T13:55:35.887

## 编辑：我的 ubuntu 安装崩溃了。我不确定确切的原因，但这个黑客是主要嫌疑人。

我遇到了类似的问题

```
Get:1 http://in.archive.ubuntu.com/ubuntu artful/main amd64 openjdk-8-jre-headless amd64 8u144-b01-2 [27.3 MB]                                                                                                                                                                 
Err http://in.archive.ubuntu.com/ubuntu artful/main amd64 openjdk-8-jre-headless amd64 8u144-b01-2                                                                                                                                                                             
  Hash Sum mismatch
Hashes of expected file:
 - SHA256:46924d3fdb329b18b652bc3410f1f2c92ef1259b9a7d66bb1c5d3804b42a8c1c
 - SHA1:0097b24ef75249d381c7c3f3fb6b36593720c15e [weak]
 - MD5Sum:1ff35c4d8a2bed71dceba105801cf567 [weak]
 - Filesize:27256930 [weak]
Hashes of received file:
 - SHA256:ea6892eb6ce7cdc1674a46719302cdbf1b9d485e36bccd27247591527423bb6d
 - SHA1:8c19fbdc9f534d8d3c304374bf0c8e7b05cb620b [weak]
 - MD5Sum:1ff35c4d8a2bed71dceba105801cf567 [weak]
 - Filesize:27256930 [weak]
Last modification reported: Sat, 30 Sep 2017 20:08:32 +0000 
```

幸运的是，哈希不匹配只发生在一个包中。因为我绝对确定下载的包是预期的，所以我简单地编辑了 InRelease 文件。

我遵循的步骤：1.`grep`对于预期的有`/var/lib/apt/lists`

```
sudo grep 46924d3fdb329b18b652bc3410f1f2c92ef1259b9a7d66bb1c5d3804b42a8c1c * 
```

2.  就我而言，它是

    in.archive.ubuntu.com_ubuntu_dists_artful_main_binary-amd64_Packages

3.  将预期文件的哈希值替换为接收文件的哈希值。

4.  升级通过了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-30T13:44:19.867

将您的替换`/etc/apt/sources.list`为：

```
deb http://http.debian.net/debian/ jessie main
deb http://http.debian.net/debian/ jessie-backports main
deb http://security.debian.org/ jessie/updates main 
```

然后我也会跑：

```
sudo apt-key update -y
sudo apt-get update -y
sudo apt-get upgrade -y 
```

这应该够了吧。

@source：[https ://www.lowendtalk.com/discussion/62567/apt-get-hash-sum-mismatch-debian-jessie](https://www.lowendtalk.com/discussion/62567/apt-get-hash-sum-mismatch-debian-jessie)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-23T02:18:48.450

升级`apt`_`sudo apt-get install apt`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-25T10:01:06.750

在我的情况下，它试图从 nodesource 安装 Nodejs，但最终总是出现问题：“哈希和不匹配”。上述解决方案均无效。

我不明白为什么，因为我按照信中的说明进行操作：

```
# 使用 Debian，作为 root
curl -sL nodesource-url | 重击 -
apt-get install -y nodejs

```

事实证明，当我的主要 debian sources.list 使用 http 时，Nodejs 的存储库使用了 https。

*   猫 /etc/apt/sources.list.d/nodesource.list

```
德布 https://...
deb-src https://...

```

将 URL 更改为**http**并运行**apt-get update**解决了这个问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-20T06:59:47.020

对我来说，`rm -rf /var/lib/apt/lists/* && apt-get update`没有用。
然而，`rm -rf /var/lib/apt/lists/* && apt update`确实奏效了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-18T14:59:09.423

在我的情况下，以下解决方案对我不起作用：

*   `/var/lib/apt/lists/*`
*   将服务器更改为“主要服务器”（或其他一些外部服务器）

我仍然有相同的存储库给我“哈希和不匹配”错误。

我解决了尝试这个解决方案：

1.  转到“软件和更新”
2.  从“Ubuntu软件”部分取消选中所有存储库
3.  选择“身份验证”部分
4.  删除所有条目
5.  制作一个`sudo apt update`（没有存储库，它很快就会结束）
6.  重新打开“软件和更新”->“Ubuntu 软件”并重新检查所有您需要的存储库
7.  再试一次`sudo apt update`

祝你好运。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-04T08:36:39.787

有时反向代理（apache，nginx，...）和网络会产生校验和问题，我们可以尝试不同区域的http代理来解决问题：

```
apt-get update -o Acquire::http::Proxy="$HTTP_PROXY"  -o Debug::Acquire::http=true 
```

# python - Django：使用通用 DeleteView 删除选中的项目？

> ID：15505778
> 
> 赞同：1
> 
> 时间：2013-03-19T16:57:37.667
> 
> 标签：python, django, django-templates, django-views, django-generic-views

我有一个表格，我在其中列出了我的所有项目，其中包含两列（删除、URL 名称）。在删除列中，每个项目都有复选框，一个复选框用于选择所有项目。

如何在 Django 中使用通用视图 DeleteView 来实现它？可能吗？

## 我的例子：

**模型.py**

```
class UrlStatus_Proxy(models.Model):

    urls = models.URLField(u'Site URL', max_length=100, null=True, unique=True)
    status_url = models.CharField(u'Site', max_length=20, choices=STATUS_URL)

    def __unicode__(self):
        return self.urls 
```

**views.py** 类 ProxyUrlListView(ListView):

```
 model = UrlStatus_Proxy

    def get_context_data(self, **kwargs):
        context = super(ProxyUrlListView,
                        self).get_context_data(**kwargs)

        context['allow_urls'] = UrlStatus_Proxy.objects.filter(status_url__startswith='allow')
        context['block_urls'] = UrlStatus_Proxy.objects.filter(status_url__startswith='block')
        return context 
```

**网址.py**

```
url(r'^url_status/(?P<pk>\d+)/delete/?$',ProxyUrlDeleteView.as_view(),name='delete_proxy'),
url(r'url_status/$', ProxyUrlListView.as_view(template_name='example.html')) 
```

我现在只为 block_urls 对象编写了模板，因为它足以解决问题。

**例子.html**

```
<form action="" method="post" enctype="multipart/form-data"> {% csrf_token %} {{ form.errors }}
        {% if block_urls %}
                <li>
                    {% csrf_token %}
                    <div class="hastable">
                        <table>
                            <thead>
                            <tr>
                                <th>{% trans 'Site Url' %}</th>
                                <th><label>{% trans 'Delete' %}</label><input type="checkbox" value="check_one" onclick="check(this)" class="submit"/></th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for block in block_urls %}
                                <tr>
                                    <td style="text-align: center">{{ block.urls }}</td>
                                    <td style="text-align: center"><input type="checkbox" value="{{ block.id }}" name="list" class="checkbox"/></td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div style="text-align: right">
                        <input type="submit" id="delete_selected_block" name="delete_selected_block " value="Delet selected" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only">

                    </div>
                </li>
        {% endif %}
</form> 
```

如何使用上面在**urls.py中显示的 DeleteView 解决此问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:25:43.797

DeleteView 是 SingleObjectMixin 的子类，所以它只能用于删除一个 sngle 对象。

你应该 ：

*   使用基于 ajax 的删除

或者

*   创建一个基于 BaseListView 的 BundledDeleteListView 来执行捆绑删除。

好编码！

# magento - Magento：多个网站和多个控制器覆盖

> ID：15505784
> 
> 赞同：1
> 
> 时间：2013-03-19T16:57:51.740
> 
> 标签：magento, controller, overriding, checkout

我面临一个问题，我不确定是否有解决方案。实际上，我们有一个 magento 网站 A 和一个 magento 网站 B，它们都使用相同的核心资源。因为它们都有一些规范，所以我们覆盖了网站对应文件夹中的部分代码。

所以实际上，两个网站都在使用 A 网站的 Checkout 模块。但是 B 网站的结帐行为现在必须改变，我正在寻找一种方法来仅为 B 网站重写控制器。

所以我的问题是：我怎样才能只为 A 网站重写 A 文件夹中的结帐控制器，并在 B 文件夹中重写相同的控制器，只为 B 网站？

我已经尝试过执行以下操作但没有成功：

一个站点-> config.xml

```
<routers>
    <checkout>
        <args>
            <modules>
                <Mage_Checkout>Mage_Checkout</Mage_Checkout>
                <A_Checkout before="Mage_Checkout">A_Checkout</A_Checkout>
                <frontname>checkout</frontname>
            </modules>
        </args>
    </checkout>
</routers> 
```

B 站点-> config.xml

```
<routers>
    <checkout>
        <args>
            <modules>
                <Mage_Checkout>Mage_Checkout</Mage_Checkout>
                <B_Checkout before="A_Checkout">B_Checkout</B_Checkout>
                <frontname>checkout</frontname>
            </modules>
        </args>
    </checkout>
</routers> 
```

问题是首先调用了 B 结帐控制器。

在这种情况下，我唯一的解决方案是检查 websiteId，然后如果我们在 A 网站上调用父函数，或者如果我们在 B 网站上继续。

你能告诉我这是否是一个好的解决方案吗？还是我错过了什么？

非常感谢您的任何建议！

塞布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:41:36.703

我的建议是创建两个类似的模板并将一个模板分配给商店 A，将另一个模板分配给商店 B。现在对于商店 B 模板应用您想要一页结帐的任何修改。

在这里，您仍将共享相同的核心代码，但只是在块和模板级别，您需要进行修改，这比自定义要容易得多。

# php - Symfony2：列出虚拟文件夹（Netbeans）中的所有视图/路由文件

> ID：15505793
> 
> 赞同：0
> 
> 时间：2013-03-19T16:58:10.350
> 
> 标签：php, model-view-controller, symfony, netbeans, views

由于我最近在一个项目中大量使用 TWIG 模板引擎和 30 个或更多视图，我想知道是否有一种方法可以避免 Netbeans 中的浏览过程从 Bundle 切换到 Bundle 以访问其他模板文件。

我正在寻找的是类似于“视图”和“路由”-导航器的东西，例如“重要文件”-文件夹。

有人已经为此问题编写了文件夹结构吗？那里可能有插件吗？

**或者简单地说：你**如何处理这个问题？

谢谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:07:22.660

由于类似的问题，我们从 Eclipse / Netbeans 平台切换到 PHPStorm。PHPStorm 具有 Symfony2 框架集成，可以非常方便地使用任意数量的 bundle 导航 Symfony2 应用程序。他们还添加了一些非常棒的代码重新格式化工具和作曲家集成。绝对值得研究。

[JetBrains - PHPStorm](http://www.jetbrains.com/phpstorm/)

# php - 在 xampp 1.8.1 中配置 phpmyadmin

> ID：15505799
> 
> 赞同：0
> 
> 时间：2013-03-19T16:58:34.860
> 
> 标签：php

我刚刚在我的 Windows 7 电脑上安装了 xampp 1.8.1，之后我更新了 root 用户并给了它一个密码，但是当我点击 phpMyadmin 时，我得到了这些错误

```
MySQL said: 

Cannot connect: invalid settings. 

phpMyAdmin tried to connect to the MySQL server, and the server rejected the connection. You should check the host, username and password in your configuration and make sure that they correspond to the information given by the administrator of the MySQL server. 
```

这是我的 config.inc.php

```
* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = '';
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['AllowNoPassword'] = true;
$cfg['Lang'] = '';

/* Bind to the localhost ipv4 address and tcp */
$cfg['Servers'][$i]['host'] = '127.0.0.1';
$cfg['Servers'][$i]['connect_type'] = 'tcp';

/* User for advanced features */
$cfg['Servers'][$i]['controluser'] = 'pma';
$cfg['Servers'][$i]['controlpass'] = ''; 
```

我应该编辑或做什么...提前谢谢

# javascript - 打开页面并从其他页面调用函数

> ID：15505801
> 
> 赞同：-3
> 
> 时间：2013-03-19T16:58:40.053
> 
> 标签：javascript, html

我有两页。第一个，`pay.html`，包含：

```
<a href="javascript:showHint()">Click me</a> 
```

但功能`showHint()`在第二页。

如何打开第二页并从第一页中的链接调用该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:02:54.090

您应该将 JavaScript 函数抽象为一个单独的`.js`文件，并将该文件包含在每个页面上：

```
<script type="text/javascript" src="commonFunctions.js"></script> 
```

任何时候，只要您有通用代码，就将其抽象为一个共享组件，并从需要的地方调用该组件。

# mysql - VS 2012 Lightswitch 和 MySQL

> ID：15505804
> 
> 赞同：1
> 
> 时间：2013-03-19T16:58:50.967
> 
> 标签：mysql, visual-studio-2012, form-authentication, lightswitch-2012

我目前遇到一个问题，我不能 100% 确定造成麻烦的部分，所以我只想告诉你们我正在尝试做什么以及实际在做什么。

它是关于通过使用 MySQL 部署具有表单身份验证的 Lightswitch 桌面应用程序（本地）来尝试和或多或少地失败

1.  在 VS 2012 中使用集成的 Lightswitch 创建一个新的 Lightswith 应用程序
2.  使用连接向导选择数据库源到我的根服务器 MySQL
3.  导入表格等。
4.  创建一些屏幕
5.  尝试部署一切，工作正常，直到为可能创建身份验证数据提供数据库连接 - 因为根本没有 MySQL 连接器可供选择..这就是我坚持的地方。

当我删除表单身份验证时，似乎一切正常。有任何想法吗？不支持 Lightswitch 中使用简单 MySQL 的表单身份验证，还是 .NET 连接器本身有问题？

# xcode - Xcode - 在菜单选项中找不到情节提要？

> ID：15505808
> 
> 赞同：0
> 
> 时间：2013-03-19T16:59:03.893
> 
> 标签：xcode, uistoryboardsegue, xcode4.6

我刚刚开始在 Xcode 上为 iOS 编程。我目前正在浏览关于 AVFoundation 的教程（[在此处找到](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)）。有一次，我想使用“推”segue 使 UIButton 将一个视图链接到另一个视图。正如教程中所见，这个segue 应该在“Connections Inspector”的“Storyboard Segue”子菜单下。但是，当在情节提要中选择 UIButton 时，我没有情节提要 Segue 子菜单。有什么建议么？非常感谢。

*附加信息：我确实在导航控制器中嵌入了带有按钮的视图。我正在使用 Xcode 4.6。我在 Connection Inspector 中看到的按钮的唯一子菜单选项是触发的 segue、插座集合、发送的事件、引用插座和引用插座集合。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:49:11.167

弄清楚了。Xcode 现在将“Storyboard Segues”放在“Triggered Segues”下。“Push”之类的触发器现在是“Action”的子选项。如果您将“操作”拖到要“推送”到的视图，它将继续为您提供包括“推送”在内的选项下拉列表。

# powershell - 为什么 add_EventName 不能与 Timer 一起使用？

> ID：15505812
> 
> 赞同：10
> 
> 时间：2013-03-19T16:59:11.930
> 
> 标签：powershell, powershell-2.0, powershell-3.0

`add_NameOfEvent({scriptblock})`在 PowerShell 中，您可以使用对象的 -method订阅事件。这适用于按钮等 Form 对象。但是当我尝试使用它时`System.Timers.Timer`它不起作用。这是为什么？样本：

```
$timer1 = New-Object System.Timers.Timer
$timer1.Interval = 2000
$timer1.add_Elapsed({ Write-Host "Timer1 tick" })

$timer2 = New-Object System.Timers.Timer
$timer2.Interval = 2000
Register-ObjectEvent -InputObject $timer2 -EventName Elapsed -Action { Write-Host "Timer2 tick" }

$timer1.Start()
$timer2.Start() 
```

`$timer2`可以正常工作，但`$timer1`永远不会写入控制台。与前任有何`Timer`不同。一个表单组件（该`add_...`方法工作的地方）？是否`Timer`在单独的线程中运行并因此写入“隐藏”控制台？

证明该方法适用于那些不熟悉它的表单组件：

```
PS > Add-Type -AssemblyName System.Windows.Forms
PS > $b = New-Object System.Windows.Forms.Button
PS > $b.add_click({ Write-Host "button" })
#Get-EventSubscriber won't show this event, but it's added
PS > $b.PerformClick()
button 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T10:06:41.817

如果您尝试此代码：

```
$w = new-object 'System.Windows.Forms.Form'
$timer1 = New-Object System.Timers.Timer
$timer1.Interval = 2000
$timer1.add_Elapsed({ Write-Host "Timer1 tick" })
$timer1.SynchronizingObject = $w
$timer1.Start()
$w.ShowDialog() 
```

您将看到预期的行为，因为 System.Timers.Timer 可以与窗口窗体同步（如在 ac# 代码中）。

powershell 控制台中的问题是计时器是在不同的线程中创建的，并且无法与控制台同步，因为它没有公开`ISynchronizeInvoke`表示用于编组在间隔已过时发出的事件处理程序调用的对象的接口.

当`SynchronizingObject`是`null`时，处理 Elapsed 事件的方法在系统线程池中的线程上调用。

IMO 在幕后 Register-ObjectEvent 创建一个系统线程池来完成事件处理程序调用。

我无法手动重新创建`Register-ObjectEvent` 做什么，但我认为可以使用一些 c#/Pinvoke 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:43:49.210

[本文](http://blogs.msdn.com/b/powershell/archive/2008/06/11/powershell-eventing-quickstart.aspx)向我表明，您必须订阅事件才能在 PowerShell 引擎中引发它们。看起来你已经有了这个概念，因为`$timer2.`我一直在尝试`$timer1`在我自己的会话中开始，并且使用公开的方法似乎无法正常工作，我特别指的是`.Start()`.

# c# - Visual Studio 链接文件不存在

> ID：15505817
> 
> 赞同：20
> 
> 时间：2013-03-19T16:59:19.200
> 
> 标签：c#, visual-studio-2010, build-events

在 Visual Studio 中，您可以执行`Add`-> `Existing Item`，然后`Add as Link`从`Add`下拉按钮中执行。

这很棒。这让您可以从另一个项目中添加一个文件，并且编辑该文件也会在原始项目中对其进行编辑。

我想使用此功能在一个解决方案中的所有项目中都存在一个配置文件（名为 Shared.config）。并让该文件始终相同。

解决方案
`|
`|- 项目一
`| `- Shared.config [物理]
`|- 项目 2
`| `- Shared.config [链接]```````

 ```发布后，该文件确实会出现在所有已发布的项目中，所以没有问题。

但是在发布之前（在构建开发期间）链接文件并不真正存在。尝试在 Windows 资源管理器中查看该文件证明该文件不在项目目录中。Visual Studio 只是让它看起来好像它存在于解决方案资源管理器中。（虽然在构建时，链接的项目可能被复制到`bin`目录中；但我不想使用/访问目录中的`bin`文件。）

现在，这会产生问题。在项目发布之前尝试打印`System.IO.File.ReadAllText(HttpContext.Current.Server.MapPath("Shared.config"))`会失败，因为 Shared.config 尚不存在于项目根目录中。

我想做的，我需要你帮助的地方是：

*   我想 ON BUILD 将所有链接文件从原始位置复制到目标位置。

这将使 Visual Studio 拥有链接文件和原始文件的副本，以相同的名称存在于同一目录中。

通常，如果该目录已包含同名文件，VS 将不允许您在该目录中创建链接项。

但是，我首先通过创建链接项目进行了测试；然后使用 Windows 资源管理器将原始文件复制到目标目录，并查看 Visual Studio 是否正常。解决方案资源管理器只是隐藏了物理文件，而是显示了链接的项目。（即使您单击`Show all files`解决方案资源管理器。）

解决方案
`|
`|- 项目一
`| `- Shared.config [物理]
`|- 项目 2
`| `- Shared.config [链接]
`| `- Shared.config [物理的，在构建期间复制到这里，对解决方案资源管理器不可见]`````````

 ```这正是我想要的！尝试编辑文件时，Visual Studio 将打开“链接项目”。并且在构建时，一个物理文件将被复制到目标目录，因此它存在于试图访问它的代码中。

现在我该怎么做？这应该通过 Build 事件来完成吗？如果是这样，我怎么说'将所有链接文件的原件复制到它们的目标目录？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-02T14:59:07.743

我对[dss539 的回答](https://stackoverflow.com/questions/15505817/visual-studio-linked-files-dont-exist/15506350#15506350 "dss539 的回答")有些麻烦（在 vs2010 中测试）。首先，解决方案资源管理器中出现每个匹配文件的重复项。其次，`'%link'`它不是属性访问器，它是字符串本身，并且它始终不等于空字符串`''`，因此每个具有`None`构建操作的文件都在构建时被匹配、复制和复制。第三，链接文件正在复制到项目的根目录中，但我需要将文件复制到放置链接的位置。所以我做了一些修改：

```
<Target Name="CopyLinkedFiles" BeforeTargets="Build">
  <ItemGroup>
    <LinkedItem Include="@(Content)" Condition="%(Content.Link) != ''" />
  </ItemGroup>
  <Copy SourceFiles="@(LinkedItem)" DestinationFiles="%(LinkedItem.Link)"/> 
</Target> 
```

`LinkedItem`不再重复解决方案资源管理器中的项目。要复制链接，您必须设置`Content`构建操作。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-19T17:25:02.853

您可能应该使用 MSBuild 功能来实现这一点。

编辑 csproj 文件（在 Visual Studio 中，右键单击项目并卸载它。然后右键单击并编辑）

滚动到底部，您应该会找到这一行。

`<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />`

在该行之后，立即添加这些行。

```
 <ItemGroup>
    <LinkedItem Include="@(None)" Condition="'%Link' != ''" />
  </ItemGroup>
  <Target Name="CopyLinkedFiles" BeforeTargets="Build" Inputs="@(LinkedItem)" Outputs="@(LinkedItem->'%(Filename)%(Extension)')">
    <Copy SourceFiles="@(LinkedItem)" DestinationFolder="$(MSBuildProjectDirectory)" />
  </Target> 
```

现在，每次构建时，在构建操作发生之前，MSBuild 都会复制所有链接的文件。

**解释**

`ItemGroup`包含我的名为“LinkedItem”的“数组”。我通过仅添加包含链接属性的“无”项来生成此数组。

`Target`是一个 MSBuild 概念。您可以将其视为构建的特定阶段。我将此阶段命名为“CopyLinkedFiles”，但您可以将其命名为任何名称。

`BeforeTargets`是一个指令，它告诉 MSBuild 在指定阶段之前运行操作。在这里，我选择在“构建”阶段之前运行“CopyLinkedFiles”。

`Inputs`是优化参数。如果不需要，它用于通过跳过副本来加快构建速度。如果你不关心，你可以忽略这个参数。MSBuild 将`Inputs`与预期`Outputs`时间戳进行比较以查看它是否需要执行。

`Copy`是一个 MSBuild 任务，它接受要复制的文件并输出到指定文件夹。

**减少冗余**

您可以将其粘贴到每个 .csproj 文件中，也可以将其放在中央 .proj 中并将其嵌入到 csproj 文件中。可悲的是，无论您做什么，您都必须编辑每个 .csproj 至少 1 次。:(

在 Common 项目调用中创建文件`WhateverNameYouLike.proj` 将这些内容放入文件中。

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <!-- paste the previously shown code here -->

  <!-- you can save yourself some hassle by linking the config file here, but if you really enjoy adding the file as a link to every project, you can skip this line -->
  <None Include="..\Common\Shared.config">
    <Link>Shared.config</Link>
  </None>
</Project> 
```

现在烦人的部分：在每个 .csproj 中，您必须 在结束标记`<Import Project="..\Common\WhateverNameYouLike.proj" />` 之前添加一行，例如可能在结尾处。`</Project>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T17:12:57.123

右键单击链接的配置文件，选择属性，`Copy to Output Directory`从更改`Never`为`Copy always`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T17:13:05.287

您可以在 Visual Studio 中创建构建前和构建后事件。

选择项目，右键单击，属性，构建事件。

对于预建 -

```
copy /y "$(LocationOfShared.Config)Shared.config\" "$(TargetDir)" 
```

对于后期构建

```
cd $(TargetDir)
del shared.config 
```

显然，您需要使用将要返回的实际位置，但您明白了。

编辑 - 上面的答案更容易和直接，但这应该作为一种循环方式来工作。``````

# iphone - 在不影响 UIViewController 清晰度的情况下放大/转换 UIView

> ID：15505818
> 
> 赞同：2
> 
> 时间：2013-03-19T16:59:20.893
> 
> 标签：iphone, ios, objective-c, uiview, transform

我想放大`UIView`这是另一个的子视图`UIViewController`。

目前`UIView`放置在 的右下角`UIViewController`。

我的放大按钮所做的是，它将放大`UIView`并`UIView`填充在`UIViewController`. 我曾经`transform`这样做过。

这是我的代码，

**UIViewController.m (1024*748 大小)**

```
@property (nonatomic, strong) MyUIViewController *myUIViewController;  //subclass of UIView

//adding as subview and assigning its "rootView" as self.
self.myUIViewController = [[MyUIViewController alloc] initWithFrame:CGRectMake(371, 420, 648, 299)];
self.myUIViewController.rootView = self;
[self.view addSubview:self.myUIViewController]; 
```

**MyUIViewController**

```
 @property (nonatomic, weak) UIViewController *rootView;  

- (void)enlargeView:(UITapGestureRecognizer *)sender
{
    @try
    {
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDelegate: self];
            [UIView setAnimationDuration:2];
            [UIView setAnimationDelay:0];

            CGAffineTransform scaleTransform = CGAffineTransformScale( self.transform, 1.55, 2.4  );
            self.transform = scaleTransform;
            [UIView commitAnimations];

            [self setCenter:self.rootView.view.center];
        }

    }
    @catch (NSException *exception)
    {
        NSLog(@"%s\n exception: Name- %@ Reason->%@", __PRETTY_FUNCTION__,[exception name],[exception reason]);
    }
} 
```

目前它可以很好地放大动画。但是有一个清晰度问题。

那么有没有其他方法可以在不影响`MyUIViewController`清晰度的情况下实现这个放大功能？

对此的任何帮助表示赞赏。

谢谢。

# c - C中的“短”数据类型是什么？

> ID：15505828
> 
> 赞同：14
> 
> 时间：2013-03-19T16:59:38.943
> 
> 标签：c, short

在以下函数中：

```
void AddWordData(FILE* dataFile, short word, int* dc)
{
    fprintf(dataFile, "%06o\n", word);
    ++(*dc);
} 
```

该函数正在获得一个简短的类型。我在网上做了一些搜索，但只找到了short int。当一个函数得到一个短类型时是什么意思？它是什么数据类型？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-19T17:01:29.140

`short`是 的缩写`short int`。它们是同义词。`short`, `short int`, `signed short`, 和`signed short int`都是相同的数据类型。a 中有多少位`short`取决于编译器和系统，但[至少需要 16 位](http://www.ericgiguere.com/articles/ansi-c-summary.html)：

> 任何符合标准的编译器还必须遵守以下关于任何特定类型可以接受的值范围的限制。请注意，这些是下限：实现可以自由地超过任何或所有这些。另请注意，char 的最小范围取决于 char 是否被视为有符号或无符号。... 短整数： -32767 到 +32767 。

更多来自[维基百科](http://en.wikipedia.org/wiki/C_data_types)：

> 整数类型的实际大小因实现而异。唯一的保证就是long long不小于long，long不小于int，不小于short。此外，int 应该是目标处理器最有效地使用的整数类型。这提供了很大的灵活性：例如，所有类型都可以是 64 位的。然而，只有几种不同的整数宽度方案（数据模型）是流行的，并且由于数据模型定义了不同程序的通信方式，因此在给定的操作系统应用程序接口中使用统一的数据模型。 [3]
> 
> 在实践中应该注意，char 通常是 8 位大小，short 通常是 16 位大小，long 通常是 32 位大小（同样是 unsigned char、unsigned short 和 unsigned long）。例如，这适用于各种平台，如 1990 年代 Sun0S 4 Unix、Microsoft MSDOS、现代 Linux 和用于嵌入式 8 位 PIC 微控制器的 Microchip MCC18。

编辑：

LP64下（全64位非Windows操作系统）：char为8位，short为16位，int为32位，long为64位，long long可能为128位。

Windows 保持 LLP64：char 为 8 位，short 为 16 位，int 为 32 位，long 为 32 位，long long 为 64 位。

# android - Android WebViewClient 区分点击和重定向

> ID：15505839
> 
> 赞同：2
> 
> 时间：2013-03-19T16:59:55.170
> 
> 标签：android, webview, webviewclient

我已经覆盖了“WebViewClient”对象，并且我希望区分用户何时点击链接 - 因此他们实际请求了它，以及中间服务器何时重定向请求。

例如 - 当浏览器启动时，需要登录的 Wifi 将重定向到他们的登录页面。这也将尝试在 web 视图中加载此页面。

当用户点击一个 html 链接时——（假设它没有被重定向）这将是一个真正的请求。

webviewclient 有什么我可以覆盖/拦截/调用来区分的吗？

# python - 如何在 Mac OS 10.8 上安装 MySql-python-1.2.3

> ID：15505840
> 
> 赞同：2
> 
> 时间：2013-03-19T16:59:55.027
> 
> 标签：python, mysql, macos

我已经下载[了 http://sourceforge.net/projects/mysql-python/](http://sourceforge.net/projects/mysql-python/)

并且还下载了 Xcode 和命令行工具。

当我使用这个命令“sudo python setup.py build”

我看到这个：

```
running build
running build_py
copying MySQLdb/release.py -> build/lib.macosx-10.8-intel-2.7/MySQLdb
running build_ext
building '_mysql' extension
clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-        aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -  Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -pipe -  Dversion_info=(1,2,4,'beta',4) -D__version__=1.2.4b4 -  I/Applications/XAMPP/xamppfiles/include/mysql -  I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _mysql.c -o    build/temp.macosx-10.8-intel-2.7/_mysql.o -mmacosx-version-min=10.4 -arch i386 -arch ppc -D_P1003_1B_VISIBLE -DSIGNAL_WITH_VIO_CLOSE -DSIGNALS_DONT_BREAK_READ -DIGNORE_SIGHUP_SIGQUIT -DDONT_DECLARE_CXA_PURE_VIRTUAL
clang: warning: not using the clang compiler for the 'powerpc' architecture
_mysql.c:44:10: fatal error: 'my_config.h' file not found
#include "my_config.h"
         ^
1 error generated.
error: command 'clang' failed with exit status 1 
```

我现在该怎么办？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-24T12:39:00.280

MAMP 的 MySQL 版本不附带 dev 标头。您必须下载并安装官方 MySQL 版本，或根据以下方法将标头集成到 MAMP 中：[http ://dreamconception.com/tech/how-to-install-mysqldb-mysql-python-on-mamp/](http://dreamconception.com/tech/how-to-install-mysqldb-mysql-python-on-mamp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-19T13:04:16.690

在尝试此解决方案之前阅读[此答案。](https://stackoverflow.com/a/51351548/1723626)无论如何，有同样的问题，这对我有用 -

```
brew install mysql-connector-c
brew install mysql
brew link --overwrite mysql
pip install MySQL-python 
```

# .net - CS1607：为“文件版本”指定的版本在 .NET 中不是正常的“major.minor.build.revision”格式

> ID：15505841
> 
> 赞同：31
> 
> 时间：2013-03-19T16:59:57.367
> 
> 标签：.net, warnings, wildcard, assemblyversionattribute

我正在尝试在我的项目中设置我的`AssemblyVersion`和`AssemblyFileVersion`属性，如下所示：

```
[assembly: AssemblyVersion("3.0.*")]
[assembly: AssemblyFileVersion("3.0.*")] 
```

但我收到这个警告：

> **CS1607：**程序集生成——为“文件版本”指定的版本“3.0.*”不是正常的“major.minor.build.revision”格式

[在MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute.aspx)的`AssemblyVersionAttribute Class`页面上如下：

> 您可以指定所有值，也可以使用星号 (*) 接受默认内部版本号、修订号或两者。例如，[assembly:AssemblyVersion("2.3.25.1")] 表示 2 为主要版本，3 为次要版本，25 为内部版本号，1 为修订号。**诸如 [assembly:AssemblyVersion("1.2.*")] 的版本号指定 1 作为主要版本，2 作为次要版本，并接受默认的构建和修订号。**诸如 [assembly:AssemblyVersion("1.2.15.*")] 的版本号指定 1 作为主要版本，2 作为次要版本，15 作为内部版本号，并接受默认修订号。

注意粗体部分。有谁知道为什么`[assembly: AssemblyVersion("3.0.*")]`（来自我的项目）无效，但`[assembly:AssemblyVersion("1.2.*")]`（来自 MSDN 示例）有效？

特别是，我很想知道是否可以从非零主编号开始，因为我正在编写的应用程序是该程序的版本 3。

更新 >>> 抱歉，这似乎在另一篇文章中得到了回答……请投票关闭它，谢谢。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-19T17:13:13.627

您假设问题出在这一行：

```
[assembly: AssemblyVersion("3.0.*")] 
```

当它实际上是这个时：

```
[assembly: AssemblyFileVersion("3.0.*")] 
```

就像[您所说的问题的公认答案不是这个问题的重复](https://stackoverflow.com/a/10229738/366904)一样：

> 对于`AssemblyFileVersionAttribute`您不能使用 * 特殊字符，因此您必须提供完整且有效的版本号。

该`*`语法*仅适用*于`AssemblyVersion`属性。它不适用于该`AssemblyFileVersion`属性。

有两种解决方法可以在此处实现您可能想要的结果：

1.  完全省略该`AssemblyFileVersion`属性。这将导致程序集文件版本信息自动从属性（*这*`AssemblyVersion`是支持语法的属性）中推断出来。*`*`*

**   摆脱大炮并安装[Build Version Increment 插件](http://visualstudiogallery.msdn.microsoft.com/22c5f085-d1be-44a3-b5a4-4710a467b972)，它为您提供了比您动摇的更多的版本增量选项。*

# twitter-bootstrap - 标记为 Openlayers 中具有动态颜色的图标

> ID：15505847
> 
> 赞同：0
> 
> 时间：2013-03-19T17:00:11.157
> 
> 标签：twitter-bootstrap, openlayers

我有一个代码可以通过 php 在 Openlayers 上动态创建动态标记：

```
$shapeStyle="\"$shapeName\":{\"graphicName\": \"triangle\",fillColor:\"$color\",pointRadius:$size,label:\"$label\",labelYOffset:7+$size}" 
```

现在我想升级这个方法并用图标做同样的事情，而不是局限于 Openlayer 提供的几个选项：“圆形”、“方形”、“星形”、“x”、“十字”和“三角形” .

我知道它可以用 OpenLayers.Marker 来完成，但是因为我将有 N 种颜色类型，所以对 M 图标集着色 N 倍的操作对我来说似乎太昂贵了。而且也不太灵活。

我想知道我是否可以使用 imageDiv (OpenLayers.Icon.imageDiv)，这样我就可以添加一些插入引导程序的 Font Awesome 图标的 html。此图标可以通过 css 着色，如本文所述：“[我可以仅使用 CSS 为引导图标添加颜色吗？](https://stackoverflow.com/questions/12379153/can-i-add-color-to-bootstrap-icons-only-using-css) ”。

这种替代方法有希望吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:32:56.520

如果您继续使用矢量特征和样式，您可以这样做。`"externalGraphic"`与`"graphicWidth"`和一起使用`"graphicHeight"`

请参阅以下位置提供的选项：

[http://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Feature/Vector-js.html#OpenLayers.Feature.Vector.OpenLayers.Feature.Vector](http://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Feature/Vector-js.html#OpenLayers.Feature.Vector.OpenLayers.Feature.Vector)

# android - 传递数组列表 between activities loses some objects Im trying to pass an arrayList from activity A to another activity B. The object class I am using implements Parcelable. In A activity the arrayList seems to be well formed, but when 问问题 问问题 2013-03-19T17:00:12.827 209 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Im trying to pass an arrayList from activity A to another activity B. The object class I am using implements Parcelable. In A activity the arrayList seems to be well formed, but when I try to get it back in B activity it is incomplete. I mean: The arrayList in activity A has 5 objects: [modelo.Restaurante@419a1810, modelo.Restaurante@419a1d38, modelo.Restaurante@419a1ec0, modelo.Restaurante@419a2010, modelo.Restaurante@419a21b8] The arrayList I get in activity B has only 3 object, and two null or empty values: [modelo.Restaurante@419b1398, , modelo.Restaurante@419b1658, null, modelo.Restaurante@419b18c8] If I try with different number of elements it always makes the fault in odd positions. Could anyone help me? Here the code: Activity A where a put the arrayList in the intent: Intent intent = new Intent(BuscadorPrincipalActivity.this, ListaRestaurantes.class); intent.putParcelableArrayListExtra("jatetxeak", restaurantes); startActivity(intent); Activity B where I get want to get it again: Bundle extras = getIntent().getExtras(); if(extras !=null) { array_restaurantes= extras.getParcelableArrayList("jatetxeak"); } Object class that implements parcelable: public class Restaurante implements Parcelable{ private int idRestaurante; private int idPueblo; private String nombre; private String direccion; private String telefono; private String mail; private String web; private String tipoDeCocina; private String horario; private double latitud; private double longitud; private String foto; private String especialidades; public Restaurante(int idRestaurante,int idPueblo, String nombre, String direccion, String telefono, String mail, String web, String tipoDeCocina, String horario, double latitud, double longitud, String foto, String especialidades) { super(); this.idRestaurante = idRestaurante; this.idPueblo=idPueblo; this.nombre = nombre; this.direccion = direccion; this.telefono = telefono; this.mail = mail; this.web = web; this.tipoDeCocina = tipoDeCocina; this.horario = horario; this.latitud = latitud; this.longitud = longitud; this.foto = foto; this.especialidades = especialidades; } public Restaurante() { super(); // TODO Auto-generated constructor stub } public int getIdRestaurante() { return idRestaurante; } public void setIdRestaurante(int idRestaurante) { this.idRestaurante = idRestaurante; } public String getNombre() { return nombre; } public void setNombre(String nombre) { this.nombre = nombre; } public String getDireccion() { return direccion; } public void setDireccion(String direccion) { this.direccion = direccion; } public String getTelefono() { return telefono; } public void setTelefono(String telefono) { this.telefono = telefono; } public String getMail() { return mail; } public void setMail(String mail) { this.mail = mail; } public String getWeb() { return web; } public void setWeb(String web) { this.web = web; } public String getTipoDeCocina() { return tipoDeCocina; } public void setTipoDeCocina(String tipoDeCocina) { this.tipoDeCocina = tipoDeCocina; } public String getHorario() { return horario; } public void setHorario(String horario) { this.horario = horario; } public double getLatitud() { return latitud; } public void setLatitud(double latitud) { this.latitud = latitud; } public double getLongitud() { return longitud; } public void setLongitud(double longitud) { this.longitud = longitud; } public String getFoto() { return foto; } public void setFoto(String foto) { this.foto = foto; } public String getEspecialidades() { return especialidades; } public void setEspecialidades(String especialidades) { this.especialidades = especialidades; } public int getIdPueblo() { return idPueblo; } public void setIdPueblo(int idPueblo) { this.idPueblo = idPueblo; } public ContentValues createContentValuesRestaurante(Restaurante restaurante) { ContentValues values = new ContentValues(); values.put("idRestaurante", restaurante.idRestaurante); values.put("nombre", restaurante.nombre); values.put("direccion", restaurante.direccion); values.put("telefono", restaurante.telefono); values.put("mail", restaurante.mail); values.put("web", restaurante.web); values.put("tipoCocina", restaurante.tipoDeCocina); values.put("horario", restaurante.horario); values.put("latitud", restaurante.latitud); values.put("longitud", restaurante.longitud); values.put("foto", restaurante.foto); values.put("especialidades", restaurante.especialidades); return values; } public static final Parcelable.Creator <restaurante>CREATOR = new Parcelable.Creator<restaurante>(){ public Restaurante createFromParcel(Parcel source) { Log.d ("parcelabler pruebak", "createFromParcel()"); return new Restaurante(source); } public Restaurante[] newArray(int size) { Log.d ("parcelabler pruebak", "createFromParcel() newArray "); return new Restaurante[size]; } }; /** * This constructor "deserializes" the object. * @param in */ private Restaurante (Parcel source) { Log.d ("parcelabler pruebak", "parcel source"); idRestaurante=source.readInt(); idPueblo=source.readInt(); nombre=source.readString(); direccion=source.readString(); telefono=source.readString(); mail=source.readString(); web=source.readString(); tipoDeCocina=source.readString(); horario=source.readString(); latitud=source.readInt(); latitud=source.readInt(); foto=source.readString(); especialidades=source.readString(); /// To "deserialize" the HashMap /*int hashSize = source.readInt(); contentSrc = new HashMap<string, string="">(); for (int i = 0; i < hashSize; i++) contentSrc.put(source.readString(), source.readString());*/ } public int describeContents() { return 0; } public void writeToParcel(Parcel dest, int flags) { Log.d ("parcelabler pruebak", "writeToParcel"); dest.writeInt(idRestaurante); dest.writeInt(idPueblo); dest.writeString(nombre); dest.writeString(direccion); dest.writeString(telefono); dest.writeString(mail); dest.writeString(web); dest.writeString(tipoDeCocina); dest.writeString(horario); dest.writeDouble(latitud); dest.writeDouble(longitud); dest.writeString(foto); dest.writeString(especialidades); /// To "serialize" the HashMap /* dest.writeInt(contentSrc.size()); Iterator<entry<string, string="">> i = contentSrc.entrySet().iterator(); while (i.hasNext()){ Map.Entry <string, string="">e = (Map.Entry<string, string="">) i.next(); dest.writeString(e.getKey()); dest.writeString(e.getValue());}*/ } } I would be really grateful for any help... thank you so much... It could be very challenging to hit a predifined Excle format with the native BIRT Excel emitter, there are several after market Excel emitters that might help you get there. The easier way is to set up your BIRT report to export with the format you want, then save report and use it as foundation for recreating the next report. You can use grids, and master pages to get just the layout you want, then plug in report pieces. You can also use the library to save grids, tables & data sets that you use over and over. androidarraylistparcelable 4 0 回答 0 Related 1 php - 将 SQL 转储到文件：带有重音（意大利语）不同字符集的数据 2 android - 如何在 TextView 中显示终端窗口输出 1 git - 将现有的 git repo 推送到 github：系统无法拉取 2 css - 通过单击其他链接隐藏 CSS 页面 2 android - 如何在位图而不是屏幕上获取触摸事件坐标 2 java - JSpinner 动态更新，如何删除元素？ 1 ios - 如何检测用户正在使用输入法进行中途输入？ 7 java - 条件静态字段可能吗？ 1 c - 无法使用c中的多个管道从进程中读取消息 6 css - 图标字体与图像 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</string,></string,></entry<string,></string,></restaurante></restaurante>

> ID：15505849
> 
> 赞同：1
> 
> 时间：
> 
> 标签：android, arraylist, parcelable

Im trying to pass an arrayList from activity A to another activity B. The object class I am using implements Parcelable. In A activity the arrayList seems to be well formed, but when I try to get it back in B activity it is incomplete.

I mean: The arrayList in activity A has 5 objects: [modelo.Restaurante@419a1810, modelo.Restaurante@419a1d38, modelo.Restaurante@419a1ec0, modelo.Restaurante@419a2010, modelo.Restaurante@419a21b8]

The arrayList I get in activity B has only 3 object, and two null or empty values: [modelo.Restaurante@419b1398, , modelo.Restaurante@419b1658, null, modelo.Restaurante@419b18c8]

If I try with different number of elements it always makes the fault in odd positions.

Could anyone help me?

Here the code:

Activity A where a put the arrayList in the intent:

```
 Intent intent = new Intent(BuscadorPrincipalActivity.this, ListaRestaurantes.class);
        intent.putParcelableArrayListExtra("jatetxeak", restaurantes);  

            startActivity(intent); 
```

Activity B where I get want to get it again:

```
Bundle extras = getIntent().getExtras();
          if(extras !=null)
          {
             array_restaurantes=   extras.getParcelableArrayList("jatetxeak");

          } 
```

Object class that implements parcelable:

```
public class Restaurante implements Parcelable{

private int idRestaurante;
private int idPueblo;
private String nombre;
private String direccion;
private String telefono;
private String mail;
private String web;
private String tipoDeCocina;
private String horario;
private double latitud;
private double longitud;
private String foto;
private String especialidades;

public Restaurante(int idRestaurante,int idPueblo, String nombre, String direccion,
        String telefono, String mail, String web, String tipoDeCocina,
        String horario, double latitud, double longitud, String foto,
        String especialidades) {
    super();
    this.idRestaurante = idRestaurante;
    this.idPueblo=idPueblo;
    this.nombre = nombre;
    this.direccion = direccion;
    this.telefono = telefono;
    this.mail = mail;
    this.web = web;
    this.tipoDeCocina = tipoDeCocina;
    this.horario = horario;
    this.latitud = latitud;
    this.longitud = longitud;
    this.foto = foto;
    this.especialidades = especialidades;
}

public Restaurante() {
    super();
    // TODO Auto-generated constructor stub
}

public int getIdRestaurante() {
    return idRestaurante;
}

public void setIdRestaurante(int idRestaurante) {
    this.idRestaurante = idRestaurante;
}

public String getNombre() {
    return nombre;
}

public void setNombre(String nombre) {
    this.nombre = nombre;
}

public String getDireccion() {
    return direccion;
}

public void setDireccion(String direccion) {
    this.direccion = direccion;
}

public String getTelefono() {
    return telefono;
}

public void setTelefono(String telefono) {
    this.telefono = telefono;
}

public String getMail() {
    return mail;
}

public void setMail(String mail) {
    this.mail = mail;
}

public String getWeb() {
    return web;
}

public void setWeb(String web) {
    this.web = web;
}

public String getTipoDeCocina() {
    return tipoDeCocina;
}

public void setTipoDeCocina(String tipoDeCocina) {
    this.tipoDeCocina = tipoDeCocina;
}

public String getHorario() {
    return horario;
}

public void setHorario(String horario) {
    this.horario = horario;
}

public double getLatitud() {
    return latitud;
}

public void setLatitud(double latitud) {
    this.latitud = latitud;
}

public double getLongitud() {
    return longitud;
}

public void setLongitud(double longitud) {
    this.longitud = longitud;
}

public String getFoto() {
    return foto;
}

public void setFoto(String foto) {
    this.foto = foto;
}

public String getEspecialidades() {
    return especialidades;
}

public void setEspecialidades(String especialidades) {
    this.especialidades = especialidades;
}

public int getIdPueblo() {
    return idPueblo;
}

public void setIdPueblo(int idPueblo) {
    this.idPueblo = idPueblo;
}

public ContentValues createContentValuesRestaurante(Restaurante restaurante) {
    ContentValues values = new ContentValues();
    values.put("idRestaurante", restaurante.idRestaurante);
    values.put("nombre", restaurante.nombre);
    values.put("direccion", restaurante.direccion);
    values.put("telefono", restaurante.telefono);
    values.put("mail", restaurante.mail);
    values.put("web", restaurante.web);
    values.put("tipoCocina", restaurante.tipoDeCocina);
    values.put("horario", restaurante.horario);
    values.put("latitud", restaurante.latitud);
    values.put("longitud", restaurante.longitud);
    values.put("foto", restaurante.foto);
    values.put("especialidades", restaurante.especialidades);
    return values;
}

public static final Parcelable.Creator<Restaurante> CREATOR = new Parcelable.Creator<Restaurante>(){

    public Restaurante createFromParcel(Parcel source) {
        Log.d ("parcelabler pruebak", "createFromParcel()");
        return new Restaurante(source);
    }

    public Restaurante[] newArray(int size) {
        Log.d ("parcelabler pruebak", "createFromParcel() newArray ");
        return new Restaurante[size];
    }

};

/**
 * This constructor "deserializes" the object.
 * @param in
 */
 private Restaurante (Parcel source) {

   Log.d ("parcelabler pruebak", "parcel source");
    idRestaurante=source.readInt();
    idPueblo=source.readInt();
    nombre=source.readString();
    direccion=source.readString();
    telefono=source.readString();
    mail=source.readString();
    web=source.readString();
    tipoDeCocina=source.readString();
    horario=source.readString();
    latitud=source.readInt();
    latitud=source.readInt();   
    foto=source.readString();
    especialidades=source.readString();

    /// To "deserialize" the HashMap
      /*int hashSize = source.readInt();
      contentSrc = new HashMap<String, String>();
      for (int i = 0; i < hashSize; i++)
          contentSrc.put(source.readString(), source.readString());*/
}

public int describeContents() {

    return 0;
}

public void writeToParcel(Parcel dest, int flags) {

      Log.d ("parcelabler pruebak", "writeToParcel");

  dest.writeInt(idRestaurante);
  dest.writeInt(idPueblo);
  dest.writeString(nombre);
  dest.writeString(direccion);
  dest.writeString(telefono);
  dest.writeString(mail);
  dest.writeString(web);
  dest.writeString(tipoDeCocina);
  dest.writeString(horario);
  dest.writeDouble(latitud);
  dest.writeDouble(longitud);   
  dest.writeString(foto);
  dest.writeString(especialidades);

/// To "serialize" the HashMap
 /* dest.writeInt(contentSrc.size());
  Iterator<Entry<String, String>> i = contentSrc.entrySet().iterator();
  while (i.hasNext()){
      Map.Entry<String, String> e = (Map.Entry<String, String>) i.next();
      dest.writeString(e.getKey());
      dest.writeString(e.getValue());}*/

} 
```

}

I would be really grateful for any help... thank you so much...

# domain-driven-design - 从单独的数据源检索的值对象？

> ID：15505854
> 
> 赞同：2
> 
> 时间：2013-03-19T17:00:19.013
> 
> 标签：domain-driven-design, soa

我正在开发一个系统来为流程建模。Process 的一个属性是它的速率。我认为 Rate 是一个值对象，因为它没有特定的身份。这个费率是从我不拥有的服务（想想 SOA，而不是 DDD 服务）中检索的。对于每种类型的流程，服务可能会有所不同，因为流程有团队和服务来支持他们保存我想要的数据。我如何在 DDD 中组织它？

这里有一些代码可以帮助解释：

```
class Process
{
    private final Rate rate;
    ...

    public Process( Rate rate )
    {
        this.rate = rate;
    }

    public Rate getRate()
    {
        return this.rate;
    }
    ...
}

class ProcessFactory
{
    public Process createProcess( ProcessSpecification spec );
}

class ProcessRepository
{
    public Process getProcessByName( String name );
} 
```

如果 ProcessSpecification 包含一个 RateSpecification 来描述哪个服务调用费率，ProcessRepository 是否应该负责知道如何从各种其他服务加载费率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:34:37.283

如果`Process`是一个聚合，并且聚合用作一致性边界，那么它不应该引用来自其他来源的数据。相反，您可以在创建`Rate`a 时检索适当的值，`Process`并将其与聚合的其余部分一起保存。

如果进程的速率在 Process 聚合范围之外发生变化，那么您可能需要一种同步机制来轮询来自服务的速率值并相应地更新 Process 聚合。在这种情况下，速率值仍与聚合的其余部分一起存储。

此外，如果比率值仅用于显示目的，那么它不应该是`Process`聚合的一部分，即使它在概念上是聚合的一部分。在这种情况下，只需在需要显示费率时调用服务即可。如果性能是一个问题，可以使用缓存。

# asp.net-mvc-3 - 如何在分页 webgrid 时保留过滤结果

> ID：15505859
> 
> 赞同：1
> 
> 时间：2013-03-19T17:00:31.417
> 
> 标签：asp.net-mvc-3, c#-4.0, webgrid

我使用 MVC3 开发一个系统，并且要渲染 Grid，必须使用 WebGrid。我有一个 ActionResult 返回包含空网格的索引页面。我有另一个 ActionResult 接收这些过滤器参数，执行过滤器查询并返回填充的网格。当我对该网格进行分页时，该网格返回空，因为它调用了 Index ActionResult。

*   所以我的问题是如何在分页 webgrid 时保留这些过滤结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:43:41.783

我找到了解决方案。它涉及将您的搜索保持在 Session（或 Cache 或 TempData）上，仅此而已。该解决方案很好，因为您可以使其适应您的实际情况，不需要特定的 JQuery 类。

魔术发生在您的 Index ActionResult（或您的默认 ActionResult，它将以其默认行为呈现网格页面）中。

代码示例：

```
[HttpGet]
public ActionResult Index()//My default action result that will render the grid at its default situation
{
    SearchViewModel model = new SearchViewModel(); 

    if (Request.IsAjaxRequest()) //First trick is here, this verification will tell you that someone sorted or paged the grid.
    {
        if (Session["SearchViewModel"] != null) //If session is not empty, you will get the last filtred values from it.
            model = (SearchViewModel)Session["Filtro"];
    }
    else // If it is not an AjaxRequest, you have to clear your Session, so new requests to Index with default behavior won't display filtred values.
    {
        Session["SearchViewModel"] = null;
    }

    model.GridResult = ExecuteFilter(model); // OPITIONAL! This code dependes on how is your real world situation. Just remember that you need to return a default behavior grid if the request was not called by the WebGrid, or return filtred results if WebGrid requested.
    return View(model);
} 
```

因此，这将是您的默认 ActionResult。它将验证请求是否被 WebGrid 分页或排序事件调用，以决定是否返回过滤结果或正常行为结果。

下一步是搜索 POST ActionResult：

```
[HttpPost]
public ActionResult Index(SearchViewModel pesquisa) // IMPORTANT!! It is necessary to be the SAME NAME of your GET ActionResult. The reason for that I know, but won't discuss here because it goes out of the question.
{
    SearchViewModel model = new SearchViewModel();
    model.GridResult = ExecuteFilter(pesquisa); // Execute your filter
    Session["SearchViewModel"] = model; //Save your filter parameters on Session.
    return View("Index", model);
} 
```

就是这样。Index.cshtml 没有任何技巧。只是 ActionResult 索引的 SearchForm，将我的 SearchViewModel 作为参数传递。

为什么这个解决方案有效？

好吧，当您单击排序或分页时，WebGrid 会执行类似于此的 JavaScript：

$('#yourGrid').load('它传递用于显示当前页面的url，以及一些分页或排序参数，但这些参数是WebGrid使用的') 由于它执行了.load() 方法，因此请求将是一个 GET，并且会命中您的 Index GET ActionResult。但这是一个 AJAX 调用，所以我们的魔术将使用您保存在 Session 上的参数再次执行过滤器。

我提醒的唯一细节是关于您的默认网格行为。GET Index ActionResult 必须永远返回一个有效的网格结果，不管它是否在 Session 上有过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:25:09.470

这应该可以帮助你。 [链接](http://www.dotnetcurry.com/ShowArticle.aspx?ID=618) 本文解释了如何进行分页并允许您保持数据源相同。

此外，通常当我执行过滤器时，我会在 javascript 中使用过滤器的每个模型字段创建一个对象，然后在网格执行它的 DataBinding 事件时将其传递给它。我主要与 Telerik 合作，所以我对 Webgrids 不太熟悉，否则我会给你举个例子。这基本上就是我所做的。

看法

```
function onDataBinding(e) {
    var searchModel = {
        SearchName: $('#@Html.FieldIdFor(model => model.SearchName")').val(),
        ...
    };
    e.data = searchModel;
} 
```

控制器

```
 [GridAction(EnableCustomBinding = true)]
    public ActionResult BackordersList(GridCommand command, SearchModel model)
    {
        var searchName = model.SearchName;
        var gridData = _service.GetData(searchName);

        model.GridData = new GridModel<Data>
        {
            Data = gridData.Select(PrepareModelForGrid),
            Total = gridData.TotalCount
        };

        return new JsonResult
        {
            Data = model.GridData
        };
    } 
```

# sql - 在“重复”查询的情况下 MS Access SQL 连接问题

> ID：15505862
> 
> 赞同：2
> 
> 时间：2013-03-19T17:00:37.353
> 
> 标签：sql, vba, ms-access, left-join, ms-access-2010

我面临一个问题，我们有 3 张桌子。它应该显示供应仓库是否没有该项目（已删除）或者甚至没有设置，但是根据源矩阵它应该是供应仓库。

简化的布局应该是这样的。

表**MainData**

*   字段**ItemNo** - 个人标识符，无重复 (PK)
*   Field **ItemType** - 有一定的选择，我必须过滤一些特定的值。

表**仓库数据**

*   Field **ItemNo** - 与 MainData 相关，但 PK 与下一个字段结合
*   字段**ItemLocation** - 给出使用 ItemNo 描述的此类项目的特定位置
*   字段**ItemCategory** - 需要加入 SourceWHMatrix
*   Field **ItemDeleted** - 它是一个 char 字段（因为导出的数据），如果项目被“删除”，则值为“X”，否则为 Null（非空！）

表**源WHMatrix**

*   Field **ItemLocation** - 前两个字段是主键
*   字段**项目类别**
*   字段**SourceLocation** - 它应该提供物品的交付地点

我需要检查以下内容：如果**ItemNo**属于某个**ItemType**（MainData 表）*并且* **ItemDeleted** Is Null 那么这个 ItemNo 是否**在**SourceLocation **（**由**SourceWHMatrix**基于**ItemLocation** *和* **ItemCategory**确定）。需要列出在**SourceLocation**中“删除”的所有**ItemNo**（在这种情况下，在表**WarehouseData**字段**ItemLocation**中检查返回的**SourceLocation**值）*或者*甚至没有为此类位置设置。

 *******注意：如果不同 ItemLocation 的**ItemNo****相同**，**ItemCategory**并不总是匹配。而且每个**ItemLocation**都有很多不同**的ItemCategory**来确定源仓库。

我尝试了许多 LEFT JOIN 组合，但似乎我无法列出那些未设置的值。（通过创建 WarehouseData 的重复表，我能够在供应仓库中列出已删除的项目。）我也可以在 VBA 中使用 ADODB 执行此操作，但我想将所有内容保存在 SQL 代码中，甚至不使用自定义函数。它在 Access 2010 中，在其 JET SQL 引擎上运行。

这是当前不起作用的查询

```
SELECT MD.itemno, 
       MD.itemtype, 
       WD.itemlocation, 
       SMat.sourcelocation, --this could be empty
       WD.itemdeleted AS "SourceWHDelFlag" 
FROM   maindata AS MD 
       INNER JOIN (warehousedata AS WD 
                   INNER JOIN (sourcewhmatrix AS SMat 
                               LEFT JOIN wd 
                                      ON SMat.sourcelocation = WD.itemlocation) 
                           ON ( WD.itemlocation = SMat.itemlocation 
                                AND WD.itemcategory = SMat.itemcategory ) ) 
               ON MD.itemno = WD.itemno 
WHERE  ( MD.itemtype = 'Value1' 
          OR MD.itemtype = 'Value2' ) 
```

这是我经过进一步思考后能想到的。但是，查询现在在我的 i5 上运行了 20 分钟。所以这不是最优的，而且当我可以检查 Access 的一些预先结果时，似乎将别名语句添加到 where 子句会导致错误，因为不再在同一个 where 子句中的其他字段上正确过滤。所以这是我的“解决方案”：

```
SELECT MD.ItemNo,
       MD.ItemType
       WD.itemlocation, 
       SMat.sourcelocation, --this could be empty
       (SELECT WD.ItemDeleted FROM WD WHERE WD.ItemNo = MD.ItemNo) AS "SourceWHDelFlag"
FROM MainData AS MD INNER JOIN (WarehouseData AS WD
                                LEFT JOIN SourceWHMatrix AS SMat
                                       ON (WD.ItemLocation = SMat.ItemLocation
                                           AND WD.ItemCategory = SMat.ItemCategory))
                                ON MD.ItemNo = WD.ItemNo
WHERE (MD.ItemType = 'Value1' OR MD.ItemType = 'Value2')
      AND WD.ItemDeleted Is Null
      AND WD.ItemCategory Is Not Null
      AND WD.ItemCategory Not Like '##' -- This is another filter value, and it seems to be buggy
                                        -- with SELECT clause in WHERE statement
      AND (SELECT WD.ItemDeleted FROM WD WHERE WD.ItemNo = MD.ItemNo) Is Not Null 
```

提前感谢您的帮助！

**更新** 我做了一些VBA，这段代码实际上是有效的。我在代码中注释了所有必要的信息，但它仍然非常缓慢。（如果您想在合理的时间范围内显着加快运行速度，我愿意。） 200 条记录大约需要 10 分钟，因此运行 16-17 千条记录需要 15 小时。我可以在 Excel 中使用一些 VLookup 更快地在 Excel 中执行此操作......

```
Private Sub Command0_Click()

'initialize variables
Dim connDB As ADODB.Connection
Dim filtRecSet As ADODB.Recordset
Dim tmpRecSet As ADODB.Recordset
Dim tmpLineText As String
Dim tmpCounter As Integer
Dim filePath As String
Dim tmpFSO As New FileSystemObject
Dim tmpStream As TextStream
Dim startTime, endTime As Double

'set values
Set connDB = New ADODB.Connection
Set connDB = CurrentProject.Connection
Set filtRecSet = New ADODB.Recordset
Set tmpRecSet = New ADODB.Recordset
filePath = "C:\data\output.txt"
Set tmpStream = tmpFSO.CreateTextFile(filePath, True)

startTime = Now()

'this is a test database
'I previously deleted all not required MD.ItemType to test speed of SQL queries
'it's the reason for no filtering on MD.ItemType

'open base recordset, which are not deleted (WD.ItemDeleted)
'and belong tospecific MD.ItemType values
'and can match certain filters on WD.ItemCategory
With filtRecSet
    .ActiveConnection = connDB
    .Source = "SELECT MD.ItemNo, WD.ItemLocation, MD.ItemType, WD.ItemCategory, SMat.SourceLocation FROM MainData As MD INNER JOIN (WarehouseData As WD LEFT JOIN SourcwWHMatrix As SMat ON (WD.ItemLocation = SMat.ItemLocation AND WD.ItemCategory = SMat.ItemCategory)) ON MD.ItemNo = WD.ItemNo WHERE WD.ItemCategory Is Not Null AND WD.ItemCategory Not Like '[0-9][0-9]' AND WD.ItemDeleted Is Null"
    .LockType = adLockOptimistic
    .CursorType = adUseClient
End With
'RecordCount: 16610

'open control recordset for all appropiate MD.ItemType
With tmpRecSet
    .ActiveConnection = connDB
    .Source = "SELECT MD.ItemNo, WD.ItemLocation, MD.ItemType, WD.ItemCategory, SMat.SourceLocation FROM MainData As MD INNER JOIN (WarehouseData As WD LEFT JOIN SourcwWHMatrix As SMat ON (WD.ItemLocation = SMat.ItemLocation AND WD.ItemCategory = SMat.ItemCategory)) ON MD.ItemNo = WD.ItemNo"
    .LockType = adLockOptimistic
    .CursorType = adUseClient
    .Filter = adFilterNone
End With
'RecordCount: 138713

filtRecSet.Open
'tmp variable to see how many records have been processed
tmpCounter = 1
If Not filtRecSet.EOF Then
    'select first record
    filtRecSet.MoveFirst
    Do While Not filtRecSet.EOF
        'find SourceLocation
        tmpRecSet.Filter = "MATNR = '" & filtRecSet(0).Value & "' AND WERKS = '" & filtRecSet(5).Value & "'"
        tmpRecSet.Open
        'check how many records in recordset; there should not be more than one, that's why it considered as error
        If tmpRecSet.RecordCount = 1 Then
            tmpRecSet.MoveFirst
            tmpLineText = filtRecSet(0).Value & "|" & filtRecSet(1).Value & "|" & filtRecSet(2).Value & "|" & filtRecSet(3).Value & "|" & filtRecSet(4).Value & "|" & filtRecSet(5).Value & "|" & tmpRecSet(3).Value
        ElseIf tmpRecSet.RecordCount > 1 Then
            tmpLineText = "ERROR"
        'in case EOF is True -> no records
        Else
            tmpLineText = filtRecSet(0).Value & "|" & filtRecSet(1).Value & "|" & filtRecSet(2).Value & "|" & filtRecSet(3).Value & "|" & filtRecSet(4).Value & "|" & filtRecSet(5).Value & "|"
        End If
        Debug.Print "Record no.: " & tmpCounter
        'write out text file
        tmpStream.WriteLine tmpLineText
        filtRecSet.MoveNext
        tmpRecSet.Close
        tmpCounter = tmpCounter + 1
    Loop
End If

tmpStream.Close
endTime = Now()

Debug.Print "Elapsed time: " & CStr((endTime - startTime) * 24 * 60 * 60) & " seconds."

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:03:35.507

我只是想出了一些解决方案，昨天的想法几乎是好的，但是有一个关于速度的问题。因此，我尝试在我的测试数据库中为所有这些字段设置一些索引（我没有使用此功能，因为我也面临有关 Access 文件 2 GB 限制的问题，并希望保留所有可能的空间）。**此外，我在MD.ItemNo**和**WD.ItemNo**之间强制执行了引用完整性。已建立主键和关系；索引允许重复，除了**MD.ItemNo**。结果是，它在几秒钟内运行，并返回正确的结果。

现在我只需要修改我的导入脚本来生成这样的 XML，这些 XML 会在必要的字段上创建索引。这也是一个问题，因为所有字段都是必需的，这就是整个导入脚本跳过其中三分之二（总共大约 800 个字段）的原因。

这也加快了 VBA 代码的运行速度，但仍然非常非常慢。

这是有效的 SQL：

```
SELECT MD.ItemNo,
       MD.ItemType
       WD.ItemLocation, 
       WD.ItemDeleted
       SMat.SourceLocation, --this could be empty
       (SELECT WD.ItemDeleted
           FROM WD
           WHERE WD.ItemNo = MD.ItemNo
                 AND WD.ItemLocation = SMat.SourceLocation
       ) AS SourceDeleted
FROM MainData AS MD INNER JOIN (WarehouseData AS WD
                                LEFT JOIN SourceWHMatrix AS SMat
                                       ON (WD.ItemLocation = SMat.ItemLocation
                                           AND WD.ItemCategory = SMat.ItemCategory))
                                ON MD.ItemNo = WD.ItemNo
WHERE (MD.ItemType = 'Value1' OR MD.ItemType = 'Value2')
      AND WD.ItemDeleted Is Null
      AND WD.ItemCategory Is Not Null
      AND WD.ItemCategory Not Like '[0-9][0-9]' -- there's an issue about wildcards
      AND (SMat.SourceLocation Is Null -- to display not set up ItemNo on SourceLocation
           OR (SELECT WD.ItemDeleted
                  FROM WD
                  WHERE WD.ItemNo = MD.ItemNo
                        AND WD.ItemLocation = SMat.SourceLocation
              ) Is Not Null) -- check if ItemDeleted on SourceLocation 
```*******

# javascript - 使用 Href 更改图像的 src

> ID：15505863
> 
> 赞同：-7
> 
> 时间：2013-03-19T17:00:38.370
> 
> 标签：javascript, jquery

我想每 5 秒从链接标签中更改带有“href”的标签的 src。

这是代码：

```
<div id="bgStretch"><img id="bgStretchimg" src="images/picture1.jpg" alt=""></div> <!--   here is the image src i want to change-->

<nav class="bgNav">
 <ul>
  <li class="active"><a href="images/picture1.jpg"></a></li>
  <li><a href="images/picture2.jpg"></a></li>
 </ul>
</nav>
<!--these are the links so i hope you guys to gimme a solution in javascript--> 
```

这是我试过的jQuery：

```
<script>
  $(document).ready(function() {
    var items = $("nav.bgNav ul li");
    var index = -1;

    function next() {
        // if not the very first iteration, 
        // remove the active class from prev item
        if (index !== -1) {
            var urlI=$(this).("a").attr(href);
            items.eq(index).removeClass("active");
        }
        // go to next item
        ++index;
        // if past end, wrap to beginning
        if (index >= items.length) {
            index = 0;
        }
        // add active class to next item
        items.eq(index).addClass("active");
    $('#bgStretchimg').attr('src', urlI);
        // schedule next iteration
        setTimeout(next, 1000);
    }

    next();
});

</script> 
```

它不适合我，所以我问你们，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:12:51.897

抱歉，如果花了很长时间！

这是一个[有效的 JsFiddle](http://jsfiddle.net/dozoisch/J7VTg/)！

```
$(document).ready(function () {

     var items = $("nav.bgNav ul");
     var img = $("#bgStretchimg");

     next();

     function next() {

         var urlI = items.children('.active').children("a").attr('href');

         var nextI = items.children('li.active').removeClass("active").next();
         if (nextI.length == 0) {
             nextI = items.children().eq(0);
         }

         nextI.addClass('active');
         img.attr('src', urlI);

         // schedule next iteration
         setTimeout(function () {
             next();
         }, 2000);
     }
 }); 
```

如果你想在第一次调用之前有一个延迟，你可能想把它放在 setTimeout 中，就像它在函数中一样，所以它在第一次更改之前等待。

```
// in document ready directly
setTimeout(function () {
    next();
}, 2000); 
```

* * *

可能还想寻找一个已经像这样构建的插件：[jQuery Cycle](http://www.malsup.com/jquery/cycle/)

# c# - 如何从 XAML 中隐藏 setter？

> ID：15505864
> 
> 赞同：1
> 
> 时间：2013-03-19T17:00:41.867
> 
> 标签：c#, xaml, interface, hide, setter

我有一个无法设置属性的接口：

```
public interface IThing
{
    string MyText { get; }
} 
```

我有一个允许设置属性的实现：

```
public class Thing : ObservableObject, IThing
{
    private string myText = "Testing 1 2 3";

    public string MyText
    {
        get { return this.myText; }
        set
        {
            if (this.myText != value)
            {
                this.myText = value;
                this.RaisePropertyChanged("MyText");
            }
        }
    }
} 
```

我这样做是为了通过接口传递我的对象，其他代码不能更改属性，但任何具有实际实现的代码都可以。

但是当我有一个包含 IThing 的视图模型并绑定到 XAML 中的属性时，我发现 XAML 仍然可以设置它们！

有哪些方法可以防止这种情况？谢谢你的帮助。

编辑：一些不完善的解决方法：

1.  使实现类中的设置器成为内部的。由于碰巧我的视图位于单独的程序集中，因此不允许 XAML 设置它们。但这只是巧合。如果我的观点在同一个程序集中怎么办？

2.  创建另一个包含我的实现类的类，但不提供所有属性的设置器。这似乎可行，但似乎很烦人。

仍在寻找更好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:09:36.067

您不能在实现中隐藏该属性，因为 XAML 仍然可以通过反射访问这些属性。您将需要提供一个具有较低可见性的设置器的实际实现。

或者使用 将[`Binding`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.mode.aspx)模式设置为`OneWay`。

XAML：

`{Binding Path=MyText, Mode=OneWay}`

视图模型：

```
public class MainWindowViewModel
{
    private readonly IThing _thing = new Thing();
    public string MyText { get { return _thing.MyText; } }
}

public interface IThing
{
    string MyText { get; }
}

public class Thing : INotifyPropertyChanged, IThing
{
    private string _myText = "Testing 1 2 3";

    string IThing.MyText
    {
        get { return _myText; }
    }

    public string MyText
    {
        get { return _myText; }
        set
        {

            if (_myText != value)
            {
                _myText = value;
                OnPropertyChanged();
            }
        }
    }

    INotifyPropertyChanged
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:05:48.073

你到底想做什么？您如何在 XAML 中绑定它。如果您不希望 XAML 更新您的属性，则可以将绑定模式设置为 OneWay。

# git - 将 svn 存储库与相同代码库的现有 git 存储库合并

> ID：15505865
> 
> 赞同：0
> 
> 时间：2013-03-19T17:00:43.317
> 
> 标签：git, svn

所以情况是这样的：

*   从代码库的 Git 存储库开始并进行更改
*   必须使用代码库的 SVN 存储库

这个问题（[Merge svn repo with git repo](https://stackoverflow.com/questions/10307142/merge-svn-repo-with-git-repo)）几乎相同，但它假设在 Git 中工作作为最终结果。有人可以展示一个使用 svn/git svn 的工作流程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:17:00.927

CharlesB 在链接问题中的回答将帮助您入门。svn2git 创建一个 git 存储库，该存储库的分支链接到适当的 SVN 分支（可以设置一个 SVN 存储库，这不起作用，但假设 SVN 设置并不糟糕，它会起作用）

您将初始 git 存储库合并到 svn2git 创建的 git 存储库中，并告诉您的 git 开发人员从现在开始使用该存储库（或该存储库的镜像）。

然后，您定期使用 git svn 将更改从您的 git 存储库移入/移出 svn。

git svn fetch 会将更改从 SVN 分支拉到 git 存储库中的分支中。

git svn dcommit 会将更改从 git 分支移动到 SVN。

对于您的 git 用户，SVN 存储库将显示为远程源。对于您的 SVN 用户来说，您的 git 用户看起来就像他们在直接使用 SVN。

有一些开销；它没有设置并忘记。新的“公共”分支只能在 SVN 中创建，您需要非常熟悉 git svn 的选项。

# c++ - 我可以从一个包含多个类对象的列表中得到一些东西吗？

> ID：15505869
> 
> 赞同：0
> 
> 时间：2013-03-19T17:00:55.480
> 
> 标签：c++, list, class

我有 ：

```
class Library
{
private:
list<Publication> L;
}
class Publication
{
protected:
string title;
string editor;
}

class Book:public Publication
{
private:
vector<string> Author;
} 
```

当我在我的列表中插入一本书时，我失去了作者？如果不是，当我想显示列表中的一个出版物时，我还想显示该出版物的作者。我怎样才能在不修改列表结构的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:05:26.000

如果不更改`L`. 它是一个`list<Publication>`- 它存储`Publication`s，而不是`Book`s。如果您将 a 推`Book`入其中，它将被切成薄片，只剩下`Publication`部分。

如果要以`Publication`多态方式存储 s，则需要使用指针或引用。我建议使用以下方法之一：

```
// When the Library has sole-ownership of a dynamically allocated Publication:
std::list<std::unique_ptr<Publication>> L;
// When the Library has shared-ownership of a dynamically allocated Publication:
std::list<std::shared_ptr<Publication>> L;
// When the Library wants a reference to a Publication:
std::list<std::reference_wrapper<Publication>> L; 
```

如果出于某种原因您不能使用其中任何一个，您当然可以将原始指针存储在`L`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:05:39.633

您正在存储`Publication`对象，因此当您尝试存储时`Books`，您会得到[*对象切片*](http://en.wikipedia.org/wiki/Object_slicing)。解决方案是将[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)存储到`Publications`. 例如，

```
#include <memory>
class Library
{
private:
  std::list<std::unique_ptr<Publication>> L;
}; 
```

# objective-c - 如何从 UITableViewCell 输入新视图？（当表格视图从 .plist 中获取其信息时）

> ID：15505870
> 
> 赞同：2
> 
> 时间：2013-03-19T17:01:00.143
> 
> 标签：objective-c, xcode, view, tableview

当我按下表格视图单元格时，我想出现一个新视图。但我似乎有一些问题，因为我的表格视图单元格从我制作的 .plist 文件中获取信息。这是我的代码。PS：我在 Storyboard 中制作这个。

视图控制器.h：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>

@property (copy, nonatomic) NSDictionary *firstTableView;
@property (copy, nonatomic) NSArray *firstTableViewKey;

@end 
```

视图控制器.m：

```
#import "ViewController.h"

static NSString *SectionsTableIdentifier = @"SectionsTableIdentifier";

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UITableView *tableView = (id)[self.view viewWithTag:1];
    [tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:SectionsTableIdentifier];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"firstTableView" ofType:@"plist"];

    self.firstTableView = [NSDictionary dictionaryWithContentsOfFile:path];

    self.firstTableViewKey = [[self.firstTableView allKeys] sortedArrayUsingSelector:@selector(compare:)];

    tableView.backgroundColor = [UIColor clearColor];
    tableView.opaque = NO;
    tableView.backgroundView = nil;

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
#pragma mark -
#pragma mark Table View Data Source Methods
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return [self.firstTableViewKey count];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    NSString *key = self.firstTableViewKey[section];
    NSArray *nameSection = self.firstTableView[key];
    return [nameSection count];

}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{
    return self.firstTableViewKey[section];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SectionsTableIdentifier];

    NSString *key = self.firstTableViewKey[indexPath.section];
    NSArray *nameSection = self.firstTableView[key];

    cell.textLabel.text = nameSection[indexPath.row];
    return cell;

}

@end 
```

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:20:53.783

如果您想使用情节提要以模态方式推送视图，您可以使用：

```
UIStoryboard *storyboard       = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
NewViewController *VC   = [storyboard instantiateViewControllerWithIdentifier:@"A_STRING_ID FOR_YOUR_VC_IN_STORYBOARDS"];
    [self presentViewController:VC animated:NO completion:nil]; 
```

可以从您的 plist 文件中填充字符串 (A_STRING_ID FOR_YOUR_VC_IN_STORYBOARDS) 的位置，或者您获得文本的位置

如果您想通过带有故事板的导航堆栈移动它

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil]; 
NewViewController *VC = [storyboard instantiateViewControllerWithIdentifier:@"A_STRING_ID FOR_YOUR_VC_IN_STORYBOARDS"];
[self.navigationController pushViewController:VC animated:YES]; 
```

# ios - CGContextSaveGState 与 UIGraphicsPushContext

> ID：15505871
> 
> 赞同：25
> 
> 时间：2013-03-19T17:01:01.907
> 
> 标签：ios, objective-c, drawrect, cgcontext

有两个drawRect方法：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);
    // do drawing here
    CGContextRestoreGState(context);
} 
```

和

```
- (void)drawRect:(CGRect)rect 
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    UIGraphicsPushContext(context);
    // do drawing here
    UIGraphicsPopContext(); 
} 
```

UIGraphicsPushContext / UIGraphicsPopContext 来自**UIKit** 而 CGContextSaveGState / CGContextRestoreGState 来自**CoreGraphics**。

**问题**：这些方法有什么区别？哪个更好用？是否有一些例子证明一种方法比另一种更好，反之亦然？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-19T17:06:59.693

`UIGraphicsPushContext(context)`将上下文推送到 CGContextRefs 堆栈上（使上下文成为当前绘图上下文），而`CGContextSaveGState(context)`将当前图形状态推送到由上下文*维护的图形状态堆栈上。*如果您需要创建一个新的 CGContextRef 作为当前绘图上下文，您应该使用 UIGraphicsPushContext，当您使用一个图形上下文并且只想保存时，您应该使用 CGContextSaveGState，例如：当前的变换状态、填充或描边颜色，等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-26T09:06:02.537

UIGraphicsPushContext(ctx) 在你想用 UIkit 绘制并且当前上下文不是你想绘制的上下文时很有用。你使用这个函数来使你想绘制的上下文成为当前上下文。CGContextSaveGState(ctx) 保存上下文（ctx引用），以后可以使用CGContextRestoreGState()恢复上下文

# active-directory - 如何在 OpenLdap 和 Active Directory 之间同步数据

> ID：15505872
> 
> 赞同：0
> 
> 时间：2013-03-19T17:01:06.827
> 
> 标签：active-directory, openldap, data-synchronization

目前我有一个所有服务（emai、svn ..）都使用的 OpenLDAP 数据库，我想将它与 ActiveDirectory (AD) 同步。

我做了一些研究，发现可以使用 389DS（Redhat 开发的开源 LDAP）来完成，但我必须将自己的数据库迁移到 389DS，我暂时不想这样做。

所以我请求你的帮助。如果您有任何想法，请成为我的猜测！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T13:34:59.053

享受吧[http://lsc-project.org/wiki/](http://lsc-project.org/wiki/)

你应该很高兴拥有它

杰克

# css - CSS 背景颜色开关

> ID：15505874
> 
> 赞同：0
> 
> 时间：2013-03-19T17:01:10.313
> 
> 标签：css, css-transitions, background-color

是否可以仅使用 CSS3 切换背景颜色？

我尝试过使用关键帧动画，但这只会转换背景颜色。我想做的就是在 5 秒后改变背景颜色，没有过渡。我不想要任何悬停效果等。

我想肯定有办法，如果我可以淡入它只是为了切换到它。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:04:13.643

好吧，要制作 a`transition`没有 a`transition-duration`但有`delay`，请使用

```
html { background: red; transition: background 0s 5s; } 
```

但这里的问题是，没有状态变化，所以转换不起作用。我认为你需要一些 JavaScript。像这样的东西：

```
$('html').addClass('loaded'); 
```

当 css 是

```
html { background: red; transition: background 0s 5s; }
html.loaded { background: blue; } 
```

这是一个[小提琴](http://jsfiddle.net/dUBzq/)

旁注：注意语句的[供应商前缀](http://peter.sh/experiments/vendor-prefixed-css-property-overview/)。`transition`

## 使用`animations`

这将不需要 JavaScript：

```
html {
    background: blue; /* fallback */
    animation: switchColor 5s;
}

@keyframes switchColor {
    0% {
        background: red;
    }
    99.9999% {
        background: red;
    }
    100% {
        background: blue;
    }
} 
```

这是[小提琴](http://jsfiddle.net/dGmtq/)

## 使用纯 jQuery

或者你可以只使用 JavaScript。如果您只想切换颜色而没有过渡，请使用以下`setTimeout()`功能：

```
setTimeout(function() {
    $('html').css('background', 'blue');
}, 5000); 
```

这是[小提琴](http://jsfiddle.net/hnWg9/)

# r - R中行之间的日期时间差异

> ID：15505879
> 
> 赞同：9
> 
> 时间：2013-03-19T17:01:25.097
> 
> 标签：r

我想计算 R 中的时间差（增量时间）。时间戳存储在两列数据框中，时间为日期时间（年月日小时：分钟：秒.毫秒），例如前三个行：

```
c_id    c_time
6875    2012-08-15 00:00:40.169
6874    2012-08-15 00:01:40.055
6876    2012-08-15 00:02:40.542 
```

我想输出一个有差异的列，例如

```
c_diff
0
00:01:0.886
00:01:0.487 
```

有人可以告诉我该怎么做吗？如果您有其他/更好的建议如何保持结果，将不胜感激提前非常感谢！米舒

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T17:24:24.613

试试这个（我假设你有你的数据`data.frame`被调用`mydf`）并且你想要第一个时间戳和所有后续时间戳之间的差异：

```
c_time <- as.POSIXlt( mydf$c_time )
difftime( c_time[1] , c_time[2:length(c_time)] )
  #Time differences in secs
  #[1]  -59.886 -120.373
  #attr(,"tzone")
  #[1] "" 
```

# 编辑

但是，如果您想要后续时间戳之间的差异差异，您需要反转您的观察（因为第一轮您得到 time1 - time2 这将是负数），所以您可以改用：

```
c_time <- rev( c_time )
difftime(c_time[1:(length(c_time)-1)] , c_time[2:length(c_time)])
  #Time differences in secs
  #[1] 60.487 59.886
  #attr(,"tzone")
  #[1] "" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:35:25.917

我不会给你完整的答案，但这将帮助你几乎到达那里：

```
x="2012-07-11 04:22:40.169"
datex=strptime(x,format='%Y-%m-%d %H:%M:%S') #this converts your date string 
#into a date value recognized in r

y="2012-08-15 08:32:40.169"
datey=strptime(y,format='%Y-%m-%d %H:%M:%S')

time_diff=as.numeric(difftime(datey,datex)) #in decimal days
>35.17361 
```

然后，您可以从十进制天数将其转换回您想要的任何时间格式，但根据您想要对其执行的操作，您可能希望将其保留为数字形式（可能是十进制小时数，将 time_diff 乘以 24）。 ..

# javascript - Javascript：检查函数是否存在，如果存在则重命名并从字符串创建函数

> ID：15505888
> 
> 赞同：1
> 
> 时间：2013-03-19T17:01:36.043
> 
> 标签：javascript, function

我试图让 JS 检查一个函数是否存在，如果它存在，那么它会重命名字符串，然后根据该字符串创建函数。我得到了第一部分，我可以弄清楚如何根据字符串创建函数名称：

```
var myMicro = 'getMicro';

if (typeof window[myMicro] === "function") {
    myMicro = 'getMicro2';
} else {
    myMicro = 'getMicro';
}

function window[myMicro] (obj, place, func, params, finishFUNC) {

} 
```

第一部分有效，但用这个字符串创建函数似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:03:01.280

您可能可以这样做：

```
window[myMicro] = function (obj, place, func, params, finishFUNC) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:05:03.907

最好不要覆盖全局变量：

```
var myMicro = "getMicro" in window ? "getMicro2" : "getMicro";
window[myMicro] = function(obj, place, func, params, finishFUNC) {
    // ...
}; 
```

# image-processing - 使用 Neon 将图像下采样 3 的算法

> ID：15505889
> 
> 赞同：0
> 
> 时间：2013-03-19T17:01:36.790
> 
> 标签：image-processing, assembly, arm, neon

我想知道是否可以使用霓虹灯向量将图像下采样 3 ？我正在尝试在纸上为此编写算法，但似乎不可能。因为当你得到例如 8 个字节时，你不能得到 3*3 像素，就没有足够的像素来完成下采样操作。根据 downsample by 2: [Explaining ARM Neon Image Sampling](https://stackoverflow.com/questions/15391807/explaining-arm-neon-image-sampling) 我考虑加载 16 字节，然后从一行加载 8 字节，然后将它们分配给 32 字节向量，然后处理该向量的 24 字节？

更新：我已经根据答案编写了示例代码，但是我在 vst1_u8 中遇到了分段错误...

```
inline void downsample3dOnePass( uint8_t* src, uint8_t *dst, int srcWidth)
{

    // make sure rows/cols dividable by 8
    int rows = ((srcWidth>>3)<<3);
    // 8 pixels per row
    rows=rows>>3;

    for (int r = 0; r < rows; r++)
    {
       // load 24 pixels (grayscale)
       uint8x8x3_t pixels     = vld3_u8(src);
       // first sum = d0 + d1
       uint8x8_t firstSum     = vadd_u8 ( pixels.val[0], pixels.val[1] );
       // second sum = d1+d2;
       uint8x8_t secondSum    = vadd_u8 ( firstSum,  pixels.val[2] );
       // total sum = d0+d1+d2
       uint8x8_t totalSum     = vadd_u8(secondSum, firstSum);
       // average = d0+d1+d2/8 ~9 for test
       uint8x8_t totalAverage = vshr_n_u8(totalSum,3);
       // store 8 bytes
       vst1_u8(dst, totalAverage);
       // move to next 3 rows
       src+=24;
       // move to next row
       dst+=8;

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:34:49.763

[*对于您处理的每条*](http://blogs.arm.com/software-enablement/161-coding-for-neon-part-1-load-and-stores/)扫描线，您可以通过`vld3.8`. 如果你有第一、二、三行像素的起始地址，`r0..r2`那么：

```
vld3.8 {d0,d1,d2}, [r0]
vld3.8 {d3,d4,d5}, [r1]
vld3.8 {d6,d7,d8}, [r2] 
```

给你

*   `d0``[0,3,6,9,12,15,18,21]`有第一行的字节
*   `d1``[1,4,7,10,13,16,19,22]`有第一行的字节
*   `d2``[2,5,8,11,14,17,20,23]`有第一行的字节
*   相同的`d3`..`d5`对于第二行和`d6`..`d8`对于第三行

然后对它们进行平均。您可能希望扩展到 16 位，以免降低精度。

**编辑：**总数看起来有点像（留下除以九）：

```
//
// load 3x8 bytes from three consecutive scanlines
//
uint8x8x3_t pixels[3] =
    { vld3_u8(src), vld3_u8(src + srcwidth), vld3_u8(src + 2*srcwidth) };

//
// expand them to 16bit so that the addition doesn't overflow
//
uint16x8_t wpix[9] =
    { vmovl_u8(pixels[0].val[0]),
      ...
      vmovl_u8(pixels[3].val[2]) };

//
// nine adds. Don't always add to wpix[0] because of possible dependencies.
//
wpix[0] = vaddq_u16(wpix[0], wpix[1]);
wpix[2] = vaddq_u16(wpix[2], wpix[3]);
wpix[4] = vaddq_u16(wpix[4], wpix[5]);
wpix[6] = vaddq_u16(wpix[6], wpix[7]);
wpix[0] = vaddq_u16(wpix[0], wpix[8]);

wpix[1] = vaddq_u16(wpix[2], wpix[4]);
wpix[3] = vaddq_u16(wpix[6], wpix[0]);
wpix[0] = vaddq_u16(wpix[1], wpix[3]);

[ .. divide-by-nine magic (in 16bit, aka for uint16x8_t), in wpix[0] ... ]
//
// truncate to 8bit and store back
//
vst1_u8(dst, vmovn_u16(wpix[0]); 
```

祝你好运 ！

# android - android中的自定义切换按钮

> ID：15505894
> 
> 赞同：1
> 
> 时间：2013-03-19T17:01:51.630
> 
> 标签：android, custom-controls, togglebutton

我添加了一个自定义切换按钮，它工作正常。问题在于切换按钮的启用和禁用。我需要一个不同的布局按钮打开，按钮关闭，按钮打开和禁用，按钮打开和启用，按钮关闭和禁用以及按钮关闭和启用。这是开/关的代码。怎么做 ？？

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true">
        <bitmap android:src="@drawable/button_pause_pressed"
          android:gravity="center_vertical|center_horizontal" />
    </item>
    <item android:state_checked="false">
        <bitmap android:src="@drawable/button_play_pressed_new"
          android:gravity="center_vertical|center_horizontal" />
    </item>        
</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:25:39.313

我以前没有这样做，但由于*StateList*是可绘制的，因此可以引用另一个包含*选择器*的 XML 文件。

这看起来像这样...
**button.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_enabled="true"
    android:drawable="@drawable/button_enabled"/>

    <item android:drawable=@drawable/button_disabled/>
</selector> 
```

**button_enabled.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_checked="true">
    <bitmap android:src="@drawable/button_pause_pressed"
      android:gravity="center_vertical|center_horizontal" />
</item>
<item android:state_checked="false">
    <bitmap android:src="@drawable/button_play_pressed_new"
      android:gravity="center_vertical|center_horizontal" />
</item>        
</selector> 
```

button_disabled.xml看起来像**button_enabled.xml ，但包含禁用按钮的****外观**。

# c - Tornado shell 命令在 vxworks 5.5 中查找当前系统日期

> ID：15505898
> 
> 赞同：0
> 
> 时间：2013-03-19T17:01:59.043
> 
> 标签：c, date, command, vxworks

我在 Vxworks PPC 板上使用 tornado 2.2 来运行我的 C 程序。获取当前系统时间的 Tornado shell 命令是什么。谷歌没有给出任何答案，它只提供有关 C 系统调用以查找系统日期的详细信息。

此 vxworks 板连接到 windows xp 机器。我可以在 Windows 中查看系统时间。我希望 vxworks 板时间与 windows 机器时间不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:55:10.343

重新启动 vxwork 板后，系统时间将重置为 1970。`time`命令将返回从 1970 开始的秒数。要以标准可呈现格式获取和设置时间，我们必须实现一个[C 程序](http://csg.lbl.gov/pipermail/vxwexplo/2003-August/002745.html)。

# mongodb - 定义 MongoDB 查询

> ID：15505900
> 
> 赞同：0
> 
> 时间：2013-03-19T17:02:06.393
> 
> 标签：mongodb

我想定义两个查询，但尽管有 mongoDB 示例，我真的不知道/理解如何做到这一点：

查询1：

```
SELECT COUNT(*), SUM(PKTS), SUM(BYTES) FROM mytable 
```

查询2：

```
SELECT srcad, srcpo, dstad, dstpo, pro, COUNT(*), SUM(PKTS), SUM(BYTES) FROM mytable WHERE scrpo=80 OR dstpo=80 GROUP BY srcad, scrpo, dstad, dstpo, pro 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:09:22.950

对于第一个，聚合查询将是：

```
db.mytable.aggregate({$group:{_id:1, sump:{$sum:"$pkts"}, sumb:{$sum:"$bytes"} }}); 
```

对于第二个，您执行相同操作，但添加了 $match 阶段而不是 where 子句，并按多个字段分组：

```
db.mytable.aggregate([ 
   {$match:{$or:[{scrpo:80},{dstpo:80}]} },
   {$group:{_id :  {srcad:"$srcad",scrpo:"$scrpo",
                    dstad:"$dstad",dstpo:"$dstpo",pro:"$pro"},
            sump:{$sum:"$pkts"}, 
            sumb:{$sum:"$bytes"} 
    }}
]); 
```

# php - PHP致命错误：无法为非对象调用重载函数

> ID：15505901
> 
> 赞同：0
> 
> 时间：2013-03-19T17:02:08.770
> 
> 标签：php, apache

我在我的 apache error_log 上看到了很多这样的错误。

我的设置：

*   我有 15 个不同的网站使用相同的 PHP 助手存储库（位于 /usr/share/myphphelpers/helpers.php
*   在每个网站上，我通过 require_once('/usr/share/myphphelpers/helpers.php') 调用 helpers.php 文件
*   此错误发生在特定函数上 - 所有网站都调用此函数（该事件是用户触发的）

这可能是因为所有网站都使用相同的资源文件/功能吗？我能做些什么？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:30:04.863

虽然我还不确定代码的哪一部分触发了这个错误，但我知道它是由**服务器过载**引起的。

我有两个 m1.small Amazon 实例在负载均衡器下运行，但它们无法处理所有流量。添加另一个实例解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:47:18.477

如果他们都在同一个文件上工作，那么这样做：添加行

```
<?php
    // ...
    if(!empty($_COOKIE[$dev = 'dev']) || !empty($_GET[$dev])){
        error_reporting(E_ALL);
        ini_set('display_errors', true);
    }
    // ... 
```

在错误所在的文件中，看看会发生什么，各方将起作用，并且您检查一件事，只有您会看到所有错误。

当然，您必须添加 cookie`dev=1`或`dev=1`url。

# java - How can I use the Apache Commons CLI library to handle "complex" arguments?

> ID：15505902
> 
> 赞同：1
> 
> 时间：2013-03-19T17:02:13.130
> 
> 标签：java, command-line-arguments, apache-commons-cli

An example might be where the arguments to the commandline are `-x`, `-y`, and `-z`. However, if `-z` is used, then it also requires `-a value` `-b value2`, and `-c value3`. to all be passed and present and there is an optional `-d value` argument.

I don't see any examples with any kind of complexity like this. Is there an example of how to set up "complex" argument sets where the value of an argument defines later arguments? Or is there a different method of parsing arguments that would be better suited to this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:19:00.790

我认为使用 commons-cli 你只能对框架进行简单的解析，它现在不提供高级的可能性。然后，您将在初始解析完成后进行额外的检查，例如您将自己描述为单独步骤的检查。

# c++ - 错误 C2660：“SurroundTheGrid”：函数不采用 0 个参数

> ID：15505903
> 
> 赞同：-4
> 
> 时间：2013-03-19T17:02:15.267
> 
> 标签：c++, arguments

请帮忙，在尝试测试我的 C++ 编程作业时遇到问题。任何帮助将不胜感激，我认为这与我在名为 SurroundTheGrid() 的函数中的参数有关

```
1>------ Build started: Project: Assignment 08 ADL, Configuration: Debug Win32 ------
1>Build started 3/19/2013 12:57:34 PM.
1>InitializeBuildStatus:
1>  Creating "Debug\Assignment 08 ADL.unsuccessfulbuild" because "AlwaysCreate" was   specified.
1>ClCompile:
1>  Assignment 08 ADL.cpp
1>j:\co 127\assignment 08 adl\assignment 08 adl.cpp(108): error C2660:   'SurroundTheGrid' : function does not take 0 arguments
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:12.90 
```

========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

抱歉没有发布代码大家，我是新来的。但是在这里，任何帮助都会非常有用，谢谢。

```
 /*
 Anthony Lehnen
 Assignment 08 ADL
 03/12/2013
 */

 #include <iostream>
 #include <string>
 #include "student.h" // this includs student.h
 #include "COMPFUN.H"     // for decimals
 #include "GRID.H"

 extern const int east = 3;

 using namespace std;

 //************HEADER**************//
 void Heading()
 {
system("cls");
cout << "Anthony Lehnen\t"   "CO 127\t"  "02/28/2013\t"  "Assignment 07" <<           endl;
cout << endl;
cout << endl;
 }

 void display(student aStudent)
 {
  decimals(cout, 2);
  cout << "{ student: " << aStudent.name();
  cout << ", GPA = " << aStudent.GPA() << " }" << endl;
 }

 int Student()
 { // test drive student: this main will vary amongst students
student aStudent("Nguyen", 36.5, 123.5);
student anotherStudent("Stella", 4.0, 16.0);  // Straight A so far
student one("one", 0.0, 0.0); // Should be 3.0
one.completedCourse( 4.0, 2.0 );
one.completedCourse( 4.0, 4.0 );  // 4 credit A
display(one);
display(aStudent);
display(anotherStudent);

// Finish branch coverage testing of standing
student two("two", 100.0, 30.0);
student three( "three", 30.05, 100.0 );
student four("four" , 60.0, 100.0 );
student five("five ", 60.05, 100.0);
student six ("six " , 90.0, 100.0);
student seven("seven", 90.05, 100.0 );

cout << endl << endl;

cout << "Student: " << one.name() <<" is a " << one.standing() << endl;
cout << "Student: " << two.name() <<" is a " << two.standing() << endl;
cout << "Student: " << three.name() <<" is a " << three.standing() << endl;
cout << "Student: " << four.name() <<" is a " << four.standing() << endl;
cout << "Student: " << five.name() <<" is a " << five.standing() << endl;
cout << "Student: " << six.name() <<" is a " << six.standing() << endl;
cout << "Student: " << seven.name() <<" is a " << seven.standing() << endl;
cout << endl << endl;

return 0;

 }
  void SurroundTheGrid()
  {
 int r, c;

 for(r = 0; r < g.nRows(); r++)
 {
    myGrid.putDown(r, 0);
    myGrid.putDown(r, myGrid.nColumns()-1);
 }
 for(c = 1; c < myGrid.nColumns() -1; c++)
 {
    myGrid.putDown(0, c);
    myGrid.putDown(myGrid.nRows()-1, c);
 }
   }

  int TestSurroundGrid()
  {//Test drive SurroundTheGrid
  grid myGrid(4, 10, 3, 0, east);
  SurroundTheGrid(myGrid);
  myGrid.display();
  return 0;

  }

  //**********************MAIN***************************//
  int main()
  {
  Heading();
  Student();

  system("pause");
  system("CLS");

  Heading();
  SurroundTheGrid();

  system("pause");

  return 0;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:05:51.263

从编译器读取错误消息是一项重要的技能，所以让我们看看我们能从中得到什么。你得到的具体错误是这个：

```
j:\co 127\assignment 08 adl\assignment 08 adl.cpp(108): error C2660: 'SurroundTheGrid' : function does not take 0 arguments 
```

正如您已经正确解释的那样，这是说问题与您的`SurroundTheGrid`功能有关。但是，它不是函数本身的声明或定义。问题实际上在于您对该函数的*调用之一。*

具体来说，错误消息告诉您问题位于文件的第 108 行附近`assignment 08 adl.cpp`（尽管它为您提供了完整路径，只是为了使消息更长）。

它告诉你你试图调用`SurroundTheGrid`不带参数的函数，但它实际上需要一些参数（我不知道确切的数字，错误消息没有说）。

据推测，第 108 行发生的事情是你有类似的东西：

```
SurroundTheGrid();        // passes no arguments to the function -- WRONG! 
```

当你应该有类似的东西时：

```
SurroundTheGrid(myGrid);  // pass an argument specifying the grid (or something) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:05:28.783

由于您没有发布代码，因此我无法在这里详细介绍，但您的猜测是正确的。与错误状态一样，您`SurroundTheGrid`使用 0 个参数调用函数（所以只有括号，没有任何参数），但该函数不接受 0 个参数。这意味着您应该提供正确数量和类型的参数（同样，我不能告诉您有多少或哪些参数，因为您没有发布代码）。

# c - 在非实时操作系统/内核上执行接近实时任务的最佳方法是什么？

> ID：15505905
> 
> 赞同：9
> 
> 时间：2013-03-19T17:02:19.867
> 
> 标签：c, linux, real-time

在 GNU/Linux 机器上，如果想要执行“实时”（亚毫秒级时间关键）任务，您几乎总是必须经历冗长、复杂且容易出现问题的内核修补过程以提供足够的支持[[ 1]](http://en.wikipedia.org/wiki/RTLinux#Background) [[2]](http://en.wikipedia.org/wiki/Xenomai)。

最大的问题是，许多实时任务最有用的系统甚至没有基本的硬件要求来允许这些补丁工作，即高分辨率定时器外围设备。或者如果他们这样做，它是特定于硬件的，因此需要根据具体情况在补丁中具体实施。即使 CPU/指令时钟速率足够快，可以提供所需的时间粒度，甚至更多，也是如此。

所以，我的问题是，有哪些最好的*方法*/技巧可以尽可能接近上述实时目标？可以简单地在应用程序源代码中完成的事情，无需深入了解底层硬件或过多的“内核黑客”。

提升进程优先级，为“关键”任务启动一个额外的线程，以及（在 C 中）使用 nanosleep() 的变体是迄今为止我想出的最好看的答案/技巧。我希望能找到更多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:34:28.143

sched_setscheduler [(2)](http://man7.org/linux/man-pages/man2/sched_setscheduler.2.html)和朋友允许您使用两种不同的软实时调度器，SCHED_FIFO SCHED_RR。在这些调度程序下运行的进程的优先级高于常规进程。所以只要你只有几个这些进程，并控制它们之间的优先级，你实际上可以获得相当下降的实时响应。

根据评论中的要求，这是 SCHED_FIFO 和 SCHED_RR 之间的区别：

使用“实时”调度程序，最多有 100 个不同的优先级（POSIX 只需要 32 个不同的级别，因此应该使用[sched_get_priority_min(2)](http://man7.org/linux/man-pages/man2/sched_get_priority_min.2.html)和[sched_get_priority_max(2)](http://man7.org/linux/man-pages/man2/sched_get_priority_max.2.html)来获取实际数量。调度程序都通过抢占进程工作和具有较低优先级的线程，区别在于它们如何处理具有相同优先级的任务。

SCHED_FIFO，是一个先进先出的调度器（因此得名）。这意味着首先到达运行队列的任务，被允许运行直到它完成，自愿放弃它在运行队列上的空间，或者被更高优先级的任务抢占。

SCHED_RR，是一个循环调度器。这意味着具有相同优先级的任务只允许运行一定的时间段。如果在这个时间段用完时任务仍在运行，则任务被抢占，并允许运行队列中的下一个任务（具有相同优先级）运行直到其时间段。与 SCHED_FIFO 一样，较高优先级的任务会抢占较低优先级的任务，但是，当允许被较高优先级任务抢占的任务再次运行时，它只允许运行其时间片中剩余的时间。[请参阅sched_rr_get_interval(2)](http://man7.org/linux/man-pages/man2/sched_rr_get_interval.2.html)中的 Noes 部分，了解如何设置任务的时间段。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T22:35:40.673

**MRG**

在非 RT 内核上很难保证亚毫秒级。我知道近年来发生了很多非常好的工作（例如大内核锁已经消失），但这仍然不足以保证它。

您可以从 CERN 和 Fermilab 的友好原子困扰者那里[了解Scientific Linux。](http://linux.web.cern.ch/linux/mrg/)这可以安装 MRG（请参阅我的链接），它为您提供 PREEMPT_RT 补丁的预打包设置。

或者，如果您有钱，您可以购买 Redhat MRG。这是一个完全支持的 Linux 发行版，内置了 PREEMPT-RT 补丁，因此可以消除容易出现问题的内核补丁。

问题是，Redhat 收取了*很多*费用（每次安装每年 3000 美元）。我认为他们已经跌倒了，它的最大客户之一是高速交易投资者，他们仍然有很多美元，因此不会注意到每盒每年 3000 美元的价格。

**我是如何与 MRG 相处的**

我已经用 MRG 做了很多工作（使用上述两种方法），它非常好。它用服务中断的线程替换了普通内核中的中断服务例程。这意味着您可以以高于 IRQ 线程的优先级运行您的软件！如果您想接近*保证*应用程序的亚毫秒延迟，这就是您必须做的事情。

似乎 MRG 的东西逐渐漂移到主线内核中，在我看来这是一件好事。也许有一天它会成为主线的东西。

**其他陷阱**

现代 CPU 热管理可能是一个真正的痛苦。我的系统在处理系统管理中断时锁定了 0.3 秒（通过 bleedin' BIOS，而不是操作系统），只是因为 CPU 有点热身。看到[这个](http://linux.web.cern.ch/linux/mrg/2/Realtime_Tuning_Guide/#sect-Realtime_Tuning_Guide-General_System_Tuning-Setting_BIOS_parameters)。因此，您必须警惕底层硬件的功能。通常，您必须开始担心放弃现代 PC 的管理冷却，并回到一直快速旋转的大风扇。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T23:01:04.933

通过消除从其他进程到实时进程的“干扰”，您可以在 Linux 上走得更远。我在 Windows 中玩过同样的东西，这是一个更大的恐惧，但它显示了方向。所以一种清单：

*   最重要（奇怪但真实）：硬件。不要选择笔记本电脑，这将被优化为在 SMM 中断期间做奇怪的事情。你无能为力。
*   驱动程序：Linux（和 Windows）有坏的驱动程序和好的驱动程序。与硬件有关。只有一种方法可以找出答案：基准测试。

与系统的其余部分隔离，禁用所有共享：

*   隔离一个 CPU ( `man cpuset`)。创建两个 CPU 集，一个用于正常进程，一个用于实时进程。
*   将代码的实时部分减少到最低限度。与系统其他部分的大缓冲区通信。将 IO 减少到最低限度（因为 IO 有不好的保证）。
*   使进程具有最高（软）实时优先级。
*   禁用超线程（您不想共享）
*   预先分配你需要的内存，然后 mlock() 内存。
*   隔离您使用的设备。首先为设备分配一个专用的 IRQ（将其他设备移动到另一个 IRQ，或删除其他设备/驱动程序）。
*   隔离您使用的 IO。

减少系统其余部分的活动：

*   只启动您真正需要的流程。
*   删除不需要的硬件，例如磁盘和其他硬件。
*   禁用交换。
*   不要使用 Linux 内核模块或预先加载它们。模块的初始化是不可预测的。
*   最好也删除用户:)

使其稳定且可重现：

*   禁用所有节能。您始终想要相同的性能。
*   查看所有 BIOS 设置，并从中删除所有“事件”和“共享”。所以没有花哨的速度步骤，热管理等。选择低延迟，不要选择名称中带有“突发”的东西，因为这通常会以吞吐量换取更差的性能。
*   查看 Linux 驱动程序设置和更低的延迟（如果适用）。
*   使用最近的内核，它每天都试图看起来像一个实时内核。

然后进行基准测试，使用压力测试并在记录最大值的同时让机器开启数天。延迟。

所以：祝你好运:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T23:38:44.300

> 最大的问题是，许多实时任务最有用的系统甚至没有基本的硬件要求来允许这些补丁工作，即高分辨率定时器外围设备。

我非常不同意：最大的问题是您可能会在没有任何警告的情况下被封锁或抢占任意时间。如果您偶尔会睡 500 毫秒，那么您能否以 1 微秒的精度入睡并不重要。实时计算是关于保证最坏情况的时间，而不是精确的睡眠间隔。如果您想对 I2C EEPROM 进行编程，您可以从高分辨率定时器中受益，它可以让您尽可能接近设置/保持时间，而不会浪费任何时间。偶尔的 500 毫秒随机延迟无关紧要，因为 EEPROM 只会坐在那里等待。不过，这不是一个实时应用程序。如果您正在实施一个具有 1us 更新的控制回路来驱动伺服器，那么 500ms 的延迟将在系统不受控制地运行时导致巨大的位置中断。

您无法在应用程序中做任何事情来解决您的磁盘驱动程序可能会花费数百毫秒处理中断上下文中的 IO 完成的事实。使驱动程序对 RT 应用程序更友好的补丁是构成 RT 内核的原因。

# javascript - PostgreSQL Filter Problems on Heroku

> ID：15505908
> 
> 赞同：0
> 
> 时间：2013-03-19T17:02:25.067
> 
> 标签：javascript, ruby, ajax, heroku, filter

I am a newbie to Ruby and have expirienced a problem with a PostgreSQL Database on Heroku.

So, I have written a little app which stores time entries: [http://timekeper.herokuapp.com/](http://timekeper.herokuapp.com/)

Now i have deployed the application to heroku and connected it with a Postgre Database.

**Expected Behaviour**

After pressing the "Speichern"-Button an AJAX Request is fired an should update the table and the right diagram.

**Problem**

The AJAX Request is being responsed but seems to be empty there is not data in it.

**What have i tried?**

The logs (´heroku logs´) doesnt contain anything suspicious.

I have tracked down the problem to one Command:

```
data = DateTime.now
time_a = DateTime.new(data.year, data.month, data.day)
time_b = DateTime.new(data.year, data.month, data.day, 23, 59, 59, 59)
Entry.all(:starttime => time_a..time_b, :order => [starttime.desc]) #=> [] 
```

The database contains Entries because ´Entry.all´ returns the entries.

This is a picture of an irb Session on Heroku with the loaded app.rb: ![irb Session on Heroku](../Images/e8c602420229205b85de4b58496a5138.png)

When i connect the PostgreSQL Database on Heroku with my local System. Everything is working!

If you want to examine the whole source code, you can find it on GitHub: [https://github.com/Reflic/timekeeper](https://github.com/Reflic/timekeeper)

Thank you for your Help, Kevin

**Edit 1** This is the AJAX Javascript Code:

```
function hour_chart(loading){
  if(loading){
$('#hour').html('');
  }
  $.ajax({
url: '/api/percenttoday',
type: 'GET',
data: '',
success: function(obj) {
    Morris.Donut({
        element: 'hour',
        data: [
            {label: "24h", value: obj.workpercent},
            {label: "24h", value: obj.offpercent}
        ],
        colors: ['#679DC6', '#6D6D6D'],
        formatter: function (y){return y+' %'}
    });
}
});
} 
```

This is the ruby router:

```
get '/api/percenttoday' do
today_data = Stats.prepare(Stats.today(DateTime.now));

workpercent = (today_data[1].last * 100) / Dtutil::DAYSECONDS
offpercent = 100 - workpercent
json :workpercent => workpercent, :offpercent => offpercent
end 
```

And here is the **Stats** Module: [https://github.com/Reflic/timekeeper/blob/master/utilities.rb](https://github.com/Reflic/timekeeper/blob/master/utilities.rb)

# iphone - what am i doing wrong with the tab bar delegate?

> ID：15505912
> 
> 赞同：0
> 
> 时间：2013-03-19T17:02:36.843
> 
> 标签：iphone, ios, objective-c, uitabbarcontroller, uitabbar

I took some advice from the previous questions and modify the code quite a bit.I am still trying to detect when a tab bar item is being touched.If the selected index is zero is should return "moo" in nslog.I might be missing a minor detail.

view controller 1

```
 TUHomeViewController *homeViewController = [[TUHomeViewController alloc] initWithNibName:nil bundle:nil];
UINavigationController *homeNavigationController = [[UINavigationController alloc] initWithRootViewController:homeViewController];
homeNavigationController.tabBarItem = [[DSTabBarItem alloc] initWithFinishedSelectedImage:[UIImage imageNamed:@"home"] 
                                                            finishedUnselectedImage:[UIImage imageNamed:@"home1"]
                                                                                 iconSize:CGSizeMake(76, 59)
                                                                                tag:0];
[tabBarViewControllers addObject:homeNavigationController]; 
```

view controller 2.h

```
 @interface viewcontroller2 : UIViewController<UIWebViewDelegate,UITabBarControllerDelegate>{

       } 
```

view controller 2

```
 - (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{

if(self.tabBarController.selectedIndex == 0){
    NSLog(@"MOO");
 return(TRUE);

}
return(FALSE);
 }

  - (void)viewDidLoad {
  [super viewDidLoad];
   self.delegate = self;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:26:15.543

将您的委托设置为自我：

```
[tabBarViewControllers setDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:27:10.550

只需在 appdelegare（您正在创建的地方）中实现您的 tabBar 委托

```
self.objTabBarController.delegate=self; 
```

并在 appdelegate 中实现其委托方法

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
    NSLog(@"MOO");
    return YES;
} 
```

# gwt - GWT 编辑器 - 可分配给原始编辑器类型，但需要类型参数化

> ID：15505924
> 
> 赞同：3
> 
> 时间：2013-03-19T17:03:09.943
> 
> 标签：gwt, editor

我正在尝试在 GWT 中使用编辑器框架，以便我可以让多个编辑器编辑同一个 bean（每个编辑器编辑一个不相交的字段子集）。

这大概是我所拥有的：

```
class EventEditor implements Editor<MajorEvent> {

    // Dispatch to a sub editor. 
    // Later there will be multiple such sub editors with different types,
    // but all implementing Editor<MajorEvent>.

    @Path("")
    public GenSubEditor genSubEditor() {
        return genPresenter.getView().getSubEditor();
    }
}

public class GenSubEditor implements Editor<MajorEvent> {

    Editor<String> nameEditor() {
        return endDate;
    }
} 
```

这是 GWT 编译器给我的错误：

`The type `GenSubEditor` is assignable to the raw Editor type, but a type parameterization is required.`

如果我在方法中替换`GenSubEditor`为，编译器不会抱怨。但是似乎驱动程序生成器没有解析我的子编辑器并且从未找到。所以这不是一个解决方案，或者这意味着我做错了什么。`Editor<MajorEvent>``genSubEditor``nameEditor`

希望有人可以提供帮助。我没有提供 SSCCE，因为我实际上不知道如何创建存根 gwt 演示者/视图，但如果有人告诉我该怎么做，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-30T03:05:55.867

我相信这是一个 GWT 错误。GWT 编译器不会读取非静态内部类的泛型类型。在这种情况下，它知道`GenSubEditor`implements `Editor`，但无法读取其`MajorEvent`参数类型。

尝试做`GenSubEditor`一个`static`类。如果您使用任何引用，请记住删除对外部类实例的所有引用。

我将尝试提交有关此问题的错误报告。

# objective-c - iOS中是否有任何方法可以从Detail View浏览Core Data对象，类似于“Notes”应用程序的功能

> ID：15505926
> 
> 赞同：3
> 
> 时间：2013-03-19T17:03:23.243
> 
> 标签：objective-c, cocoa-touch, core-data, ios6, nsfetchedresultscontroller

我找不到太多关于这个的信息，所以我不知道从哪里开始。我要做的是在我的详细信息视图上添加一个 UIButton，这样当我按下它时，它将从表视图加载下一个核心数据对象，类似于“Notes”应用程序。关于如何做到这一点的任何建议？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T06:01:24.097

委托模式怎么样？

使主视图控制器成为详细视图控制器的委托。当您按下“下一步”按钮时，向委托（您的表格视图控制器）发送一条消息。然后，委托将使用下一个对象设置详细视图。

我不会向详细视图控制器添加任何代码来确定下一个对象。您的 tableview 控制器已经有这些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T14:49:32.357

您可以为您的详细信息视图设置一个委托，询问它的主视图在按下按钮时要做什么（或者只是为给定项目提供下一个项目），这是我认为的最佳解决方案，或者保留列表视图控制器都可以访问和查询的单独对象中的模型对象。虽然这不是一个很好的模式，也没有真正反映视图的层次结构，也没有反映面向对象编程的关键规则之一：最小特权规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:00:44.257

您最好的选择是执行一个获取请求，该请求获取您希望连续加载的所有对象。这实际上不会获取数据，但会“错误”对象。故障基本上为您提供对核心数据实体的引用，而无需实际检索该实体。您的请求将返回一个 NSArray，该 NSArray 根据您加载到获取请求对象中的排序描述符进行排序。然后，您可以拥有一个本地属性来跟踪您当前在 NSArray 中的哪个索引，并在按下 UIButton 时简单地加载数组中的下一个对象。当您从数组加载对象时，核心数据将自动检索该实体的所有属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:11:50.417

如果您的模型具有与 tableView 中的每个对象对应的唯一值，您可以将对象属性加载到 prepareForSegue 中的字典数组中并将其传递给详细视图，确保它们之间存在一一对应的关系indexPath.row 中的对象和数组的 objectAtIndex。

确保您抓住所选行的索引以确定您在列表中的位置，然后您可以在每次点击 UIButton 时遍历字典数组。如果您需要做的不仅仅是填充详细视图，您可以获取与每个字典对象对应的唯一模型对象。

它不像使用原始对象那样干净，但它解决了 MySpecialPurpose 提到的错误问题。

# emacs - Emacs 预测模式和 LaTeX

> ID：15505928
> 
> 赞同：0
> 
> 时间：2013-03-19T17:03:26.337
> 
> 标签：emacs, autocomplete, latex, auctex

我正在尝试使用带有 Auctex 的Emacs[预测模式来编辑 LaTeX 文档。](http://www.dr-qubit.org/emacs.php#predictive)我想禁用用于选择替代建议的热键功能，并使用弹出菜单或使用 TAB 就地循环选择。

文档建议可以通过将 completion-use-hotkeys 设置为 nil 来关闭热键功能，但没有这样的变量。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:02:50.547

尝试使用变量 completion-ui-use-hotkeys

# php - 按键数组的PHP平均值

> ID：15505929
> 
> 赞同：1
> 
> 时间：2013-03-19T17:03:26.557
> 
> 标签：php, arrays, average

我想弄清楚如何从这个数组中的某些键（呼叫、联系人和音调）中获取平均值。我希望结果是一个数组，其中只有这三个键，其中包含三个键的平均值。所以应该是 [calls]=>27 [contacts]=>13 等。在此先感谢。

```
Array ( 
    [0] => Array ( 
              [index] => 78 
              [name] => RepOne 
              [repnumber] => 0001 
              [date] => 2013-03-16 07:17:14 
              [calls] => 36 
              [contacts] => 21 
              [pitches] => 10 
    ) 

    [1] => Array ( 
              [index] => 75 
              [name] => RepOne 
              [repnumber] => 0001 
              [date] => 2013-03-13 10:03:06 
              [calls] => 18 
              [contacts] => 12 
              [pitches] => 8  
    ) 

    [2] => Array ( 
              [index] => 74 
              [name] => RepOne 
              [repnumber] => 0001 
              [date] => 2013-03-12 03:03:06 
              [calls] => 20 
              [contacts] => 6 
              [pitches] => 3 
    ) 
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:09:05.813

以下代码假定您的数据的结构类似于以下 JSON：

```
[
    { 'call': 5, 'contacts': 2, 'pitches': 3 },
    { 'call': 22, 'contacts': 17, 'pitches': 1 }
] 
```

或者像这样的 JSON：

```
{
    'rep1_id': { 'call': 5, 'contacts': 2, 'pitches': 3 },
    'rep2_id': { 'call': 22, 'contacts': 17, 'pitches': 1 }
} 
```

试试这个：

```
function array_average_by_key( $arr )
{
    $sums = array();
    $counts = array();
    foreach( $arr as $k => &$v )
    {
        foreach( $v as $sub_k => $sub_v )
        {
            if( !array_key_exists( $sub_k, $counts ) )
            {
                $counts[$sub_k] = 0;
                $sums[$sub_k]   = 0;
            }
            $counts[$sub_k]++;
            $sums[$sub_k]  += $sub_v;
        }
    }
    $avg = array();
    foreach( $sums as $k => $v )
    {
        $avg[$k] = $v / $counts[$k];
    }
    return $avg;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T17:15:13.943

```
$avrage = array('calls' => 0,'contacts' => 0,'pitches' => 0); #prevent notice  
$i = count($yourArray);  #UPDATE
foreach($yourArray as $value)
{
   $avrage['calls'] += $value['calls'];
   $avrage['contacts'] += $value['contacts'];
   $avrage['pitches'] += $value['pitches'];
}
# UPDATE : check zero value before using division .
$avrage['calls'] = ($avrage['calls']?floor($avrage['calls']/$i):0);   #round value
$avrage['contacts'] = ($avrage['contacts']?floor($avrage['calls']/$i):0);
$avrage['pitches'] = ($avrage['pitches']?floor($avrage['calls']/$i):0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:12:11.487

```
<?php

$dataRows = ...your array...;

$averages = array('calls' => 0, 'pitches' => 0, 'contacts' => 0)

//sum average for each row
foreach($dataRows as $row) {
    foreach($row as $key => $value) {
        $add = false;

        //only add for specific values
        switch($key) {
            case 'calls':
            case 'pitches':
            case 'contacts':
                $add = true;
        }

        if($add) {
            $averages[$key] += $value;
        }

    }
}

//divide by number of rows for average
//the &$value is important as it is the refernce to the value
//so it will set the value in the array
foreach($average as &$value) {
    $value /= count($dataRows);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T17:14:57.407

我猜你的意思是这样的。我正在为“*平均值*”取平均值。

```
<?php
$newAverages = array();

$contacts = '';
$pitches = '';
$calls = '';

//Simply add them all together
foreach ($original_array as $key=>$throwaway){
 $contacts = $contacts + $original_array[$key]['contacts'];
 $pitches = $pitches + $original_array[$key]['pitches'];
 $calls = $calls + $original_array[$key]['calls'];
}

$totalReps = count($original_array);

//Then divide by the total
$newAverages['contacts'] = $contacts/$totalReps;
$newAverages['pitches'] = $pitches/$totalReps;
$newAverages['calls'] = $calls/$totalReps;

print_r($newAverages);
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T17:24:37.533

尽管 php 中存在一些像 array_sum() 这样的快捷函数，但对于这种二维结构，直接一步一步的解决方案可能是最好的：

```
$input_array = ...
$wanted_columns = array ("call", "contacts", "pitches");
$result = array_fill_keys ($wanted_columns, 0);

foreach ($input_array as $row) 
    foreach ($wanted_columns as $column_name) 
        $result[$column_name] += $row[$column_name];

$array_size = count ($input_array);
foreach ($result as &$value)
    $value /= $array_size; 
```

** 上面的代码适用于任何一组想要的列，您只需在 $wanted_columns 处设置

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T18:11:49.083

这是另一种更详细的方法：

```
// a function to extract values by particular column names
function array_columns( array $array, array $columns )
{
    $result = array_fill_keys( $columns, array() );
    foreach( $array as $value )
    {
        foreach( $columns as $column )
        {
            $result[ $column ][] = is_array( $value ) && array_key_exists( $column, $value )
                                   ? $value[ $column ]
                                   : null;
        }
    }

    return $result;
}

// a function to calculate the average value of array elements
function array_average( array $array )
{
    $count = count( $array );
    return $count > 0 ? array_sum( $array ) / $count : 0;
} 
```

用法：

```
$averages = array_map( 'array_average', array_columns( $yourArray, array( 'calls', 'contacts', 'pitches' ) ) );

var_dump( $averages ); 
```

产生：

```
array(3) {
  ["calls"]=>
  float(24.666666666667)
  ["contacts"]=>
  int(13)
  ["pitches"]=>
  int(7)
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-20T22:06:36.803

如果您使用的是 PHP 5+，则可以使用以下内容：

```
function calculateAverage($array){
    $sum = array_sum($array);
    $average = $sum / count($array);

    return $average;
}

// Assuming the original array above is used
$contactsAverage = calculateAverage(array_column($associativeArrayAbove, "contacts") );
echo $contactsAverage; 
```

# sql - 如何将 GETDATE() 存储在 varchar 中，但作为日期时间？

> ID：15505931
> 
> 赞同：1
> 
> 时间：2013-03-19T17:03:31.153
> 
> 标签：sql, datetime

当我使用`INSERT INTO table varchar_field Values (GETDATE())`时，数据库将值存储为：

```
 Mar 19 2013 12:55PM 
```

但我想存储为：

```
 2013-03-19 12:55:24.577 
```

如何实现？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T17:06:52.297

***请停止将您的日期值存储为`varchar`，使用正确的数据类型。***

您最好的解决方案是将您的列更改为正确的数据类型。

但是，如果您需要转换`getdate()`，您可以使用：

```
INSERT INTO table varchar_field
select convert(varchar(50), GETDATE(), 121) 
```

这是[SQL Server 的所有数据转换的完整列表](http://anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in-sql-server-2005/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T17:06:07.193

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms187928.aspx "转换和转换 (Transact-SQL)")：

```
select CONVERT(varchar(50),getdate(),121)

INSERT INTO table varchar_field Values (CONVERT(varchar(50),getdate(),121)) 
```

正如 Lamak 指出的那样，我错误地忽略了指定 varchar 的长度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:13:52.907

第1步

```
alter yourtable drop column varchar_field 
```

第2步

```
alter yourtable add column datetimefield datetime default getdate() 
```

第 3 步

```
select convert(varchar(50), datetimefield, 121)
from yourtable 
```

这种方法允许您在需要时更改格式，或进行日期数学运算。`

# ruby-on-rails - 分布式系统的认证和授权

> ID：15505932
> 
> 赞同：4
> 
> 时间：2013-03-19T17:03:30.680
> 
> 标签：ruby-on-rails, authentication, oauth, authorization, cas

我正在研究分布式系统的体系结构，基本上是 ruby​​（rails、sinatra 等）。

我有几个纯 API 组件，比如 API_C1、API_C2、API_C3。它有几个 Web 客户端应用程序，比如 Portal1、Portal2 和一些本地客户端应用程序，比如 Native1。

要求：

1.  所有 Web 客户端（Portal1、Portal2）的 SSO，集中式身份验证。
2.  所有 API 组件都应通过授权公开其 API。
3.  集中式 API 授权。

我做了几个 POC 来尝试一些选项，但仍然没有完整的画面。

我尝试了用于 SSO 的 ruby​​cas 服务器。它工作得很好。如有必要，我考虑使用 java cas 实现。

集中式 API 授权对我来说相当棘手。我倾向于采用 OAuth2 方式，但有一些问题：

1.  是否可以让集中式 OAuth 提供者为所有 API 组件提供服务？那么它应该如何工作以及使用哪些库/宝石？
2.  如何使我的 Web 应用程序（Portal1 和 Portal2）默认受信任。我不希望用户授权访问受信任的应用程序。
3.  对于本机客户端应用程序（非 Web 环境），我想支持 2 条腿 OAuth。是正确的选择吗？3条腿和2条腿可以同时工作吗？

4.  用户信用如何转化为 oauth 令牌？假设以下用例：

    *   用户登录到 Portal1（通过 CAS 服务器）并打开一些页面
    *   Portal1 后端服务器应从 API_C1 和 API_C2 中提取数据以显示页面。如何在这里授权 API？

我有一些想法，比如在同一个 SSO CAS 会话下拥有 API 组件。这有点允许我的场景 4) 解决，这里没有代码。但是为 API 使用会话是一种不好的做法，那么如何将会话和 OAuth 授权混合用于 API？

请指出正确的方向。是否有其他选项可以做所有事情，例如自定义 OpenId 或 OAuth 提供程序以支持 SSO？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-16T23:08:36.307

虽然这是一个老问题（2 年前），但是我会在这里留下一个答案，以防有人试图解决类似的问题。

* * *

我认为您考虑使用 OAUTH 是正确的方向，但是我建议您使用[OAUTH 协议的 2.0 版](http://oauth.net/2/)

# 集中授权

> 是否可以让集中式 OAuth 提供者为所有 API 组件提供服务？那么它应该如何工作以及使用哪些库/宝石？

*   OAUTH 2.0 通过让授权服务作为独立系统/服务运行来允许这种情况，系统中的其他服务可以信任该服务并知道如何验证其颁发的令牌（通过使用其 x.509 证书公钥例如）

*   有基于 SaaS 的授权服务器，您甚至可以使用它们而无需任何设置成本，例如[Auth0](https://auth0.com/)

# 网络客户端

> 如何使我的 Web 应用程序（Portal1 和 Portal2）默认受信任。我不希望用户授权访问受信任的应用程序。

*   使用[资源所有者密码授权](http://oauthlib.readthedocs.org/en/latest/oauth2/grants/password.html)，用户（资源所有者）使用`username`&`password`以及已知的`client_id`（也可以绑定到已知的 HTTP 源）向客户端（网站/门户/应用程序）进行身份验证

*   或者，[授权代码授权](http://oauthlib.readthedocs.org/en/latest/oauth2/grants/authcode.html)，其中门户将用户重定向到具有一些 URL 参数的已知授权服务 URL，以便用户在那里进行身份验证并被重定向回门户

# 原生应用

> 对于本机客户端应用程序（非 Web 环境），我想支持 2 条腿 OAuth。是正确的选择吗？

*   在 OAuth 2.0 中，在这种情况下使用[客户端凭据授权](http://oauthlib.readthedocs.org/en/latest/oauth2/grants/credentials.html)`client_id`，可以存储&`client_secret`并将它们发送到授权服务器以作为受信任的客户端进行身份验证（不需要用户凭据）

# 混合在一起

> 3条腿和2条腿可以同时工作吗？

*   OAuth 2.0 的所有上述授权类型都可以在同一个授权服务/服务器上一起工作（据我所知。我实际上已经让它与 Microsoft [OWIN](http://owin.org/) for [ASP.net](http://www.asp.net/)一起工作）

> 用户信用如何转化为 oauth 令牌？假设以下用例：

*   授权服务具有客户端用于发布表单或重定向以获取的端点（url）`access_token`，但实际方法取决于您使用的身份验证流程（发布与重定向）

> 用户登录到 Portal1（通过 CAS 服务器）并打开一些页面 Portal1 后端服务器应该从 API_C1 和 API_C2 中提取数据以显示该页面。如何在这里授权 API？

*   使用[资源所有者密码授予](http://oauthlib.readthedocs.org/en/latest/oauth2/grants/password.html)用户进入`username`&`password`进入portal1，然后`access_token`获得an，然后当portal1调用API_C1时，它可以附加`access_token`到调用（HTTP Header：`Authorization`）（模拟登录用户）

*   使用[授权代码授予](http://oauthlib.readthedocs.org/en/latest/oauth2/grants/authcode.html)用户重定向到身份验证服务，在那里输入他们的凭据，然后使用 重定向回 portal1（客户端），`access_token`然后附加到对 API_C1 的调用以模拟登录用户

# 类似主题

最后，查看与您的问题相关的[类似答案](https://stackoverflow.com/a/35401130/225022)

# javascript - 下拉列表中的文本将其他文本字段设置为禁用

> ID：15505933
> 
> 赞同：0
> 
> 时间：2013-03-19T17:03:40.440
> 
> 标签：javascript, asp.net, forms

我有一个包含多个字段的 ASPX 表单。

选中时有问题的字段（下拉菜单）应该禁用另一个下拉菜单和文本字段，但由于某种原因它不起作用。

我究竟做错了什么？

```
<td class="td"><asp:DropDownList ID="DeliveryTypeList" runat="server" AutoPostBack="true" onchange="javascript:changeTextFields();"></asp:DropDownList></td> 
```

我拥有的javascript是：

```
<script type = "text/javascript">
function changeTextFields() {
    var val = document.getElementById("DeliveryTypeList").text;
    if (val == "PO Box 110") {document.getElementById("ReceivedFrom").disabled = false;  document.getElementById("ReferenceNumber").disabled = false }
    if (val == "Courier Delivery") { document.getElementById("ReceivedFrom").disabled = true; document.getElementById("ReferenceNumber").disabled = false }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:06:57.807

您的客户端代码可能没问题，但您的问题出`AutoPostback = true`在`DeliveryTypeList`. 此设置导致客户端在选定的索引更改时发布到服务器，因此代码`changeTextFields`无关紧要。

如果需要`AutoPostback = true`，则必须在服务器端添加一些额外的逻辑才能在回发时执行客户端代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:11:54.130

下拉列表的 id 永远不会相同，因为它是服务器端控件。在 Java Script 中改用类。

查看

> [下拉选择值更改时隐藏 div](https://stackoverflow.com/questions/5323251/hiding-a-div-when-dropdown-selected-value-changes/5323327#5323327)

对于类似的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:12:41.237

为了维护客户端状态，您希望在从服务器返回后在页面加载时调用脚本。

由于您使用的是 javascript，因此您可以使用它`e.options[e.selectedIndex].value`来检索下拉列表的选定值。

我的想法：与 javascript 相比，使用 jQuery 选择 DOM 会容易得多。

```
<asp:DropDownList ID="DeliveryTypeList" runat="server" 
    AutoPostBack="true" onchange="javascript:changeTextFields();">
    <asp:ListItem Text="PO Box 110" Value="PO Box 110" />
    <asp:ListItem Text="Courier Delivery" Value="Courier Delivery" />
</asp:DropDownList>
<asp:DropDownList ID="ReceivedFrom" runat="server">
</asp:DropDownList>
<asp:TextBox ID="ReferenceNumber" runat="server" />
<script type="text/javascript">
    function changeTextFields() {
        var e = document.getElementById('<%= DeliveryTypeList.ClientID %>');
        var val = e.options[e.selectedIndex].value;
        if (val == "PO Box 110") {
            alert(val);
            document.getElementById('<%= ReceivedFrom.ClientID %>').disabled = false;
            document.getElementById('<%= ReferenceNumber.ClientID %>').disabled = false;
        }
        if (val == "Courier Delivery") {
            alert(val);
            document.getElementById('<%= ReceivedFrom.ClientID %>').disabled = true;
            document.getElementById('<%= ReferenceNumber.ClientID %>').disabled = false;
        }
    }
    // Call at page load
    changeTextFields();
</script> 
```

# asp.net - 我可以在 Web Pages v2 网站的 global.asax 和 _AppStart.cshtml 中包含哪些类型的代码？

> ID：15505935
> 
> 赞同：1
> 
> 时间：2013-03-19T17:03:42.460
> 
> 标签：asp.net, global-asax, asp.net-webpages, app-startup

我已经阅读了许多文章和文档，但我仍然不清楚我可以在 global.asax 和 _AppStart.cshtml 文件中包含哪些内容。

我试着把简单的东西，比如

```
@{
    var rlist = new List<string>();
    rlist.Add("Value1");
    rlist.Add("Value2");
} 
```

在这两个文件中，并尝试在我的 Default.cshtml 中使用它们，但没有运气。它说它没有在上下文中定义。

我认为这段代码在任何地方都可以识别。

我发现它仅适用于 _AppStart.cshtml 的唯一方法是将我的 var 分配给 AppState 字典：

```
@{
    var rlist = new List<string>();
    rlist.Add("Value1");
    rlist.Add("Value2");
    AppState["rlist"] = rlist;
} 
```

然后我可以通过我的页面引用 rlist 变量，如下所示：

```
var soulis = ((List<string>) AppState["rlist"]); 
```

**在 Global.asax 上面不起作用..**

有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:11:45.773

AppStart 是一个网页框架文件，它在应用程序首次启动时执行一次，就像 Global.asax 一样。我怀疑它是专门为保护初学者而设计的，当该文件由 Visual Studio/WebMatrix 生成时，Global.asax 默认包含的所有事件。

您可以使用 Global.asax 挂钩特定事件以执行您喜欢的任何代码。

AppStart 更多地是为简单的事情而设计的，例如初始化帮助程序，例如 WebSecurity 帮助程序，或用于设置全局变量。如果您声明变量，则只有将它们声明为全局变量，才能在应用程序中访问它们。您已经发现了一种方法：

```
AppState["rlist"] = rlist; 
```

或者您可以使用网页的动态功能：

```
App.rlist = rlist; 
```

# spring - Camel Route，发现以元素“dataFormats”开头的无效内容

> ID：15505938
> 
> 赞同：0
> 
> 时间：2013-03-19T17:03:43.847
> 
> 标签：spring, activemq, apache-camel

我的骆驼路线有问题，它无法识别我的“dataFormats”标签。我想我的命名空间可能有问题，但我不确定。任何帮助将不胜感激。我的错误如下：

无法在项目 ExactTargetSample 上执行目标 org.apache.camel:camel-maven-plugin:2.10.4:run (default-cli)：null：MojoExecutionException：InvocationTargetException：来自文件 [C:\EclipseWorkspaces\EclipseWorkSpaceCurrent 的 XML 文档中的第 52 行\ApacheCamel\target\classes\META-INF\spring\camel-context.xml] 无效；嵌套异常是 org.xml.sax.SAXParseException；行号：52；列号：20；cvc-complex-type.2.4.a：发现以元素“ **dataFormats** ”开头的无效内容。'{" [http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring) ":avro、" [http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring) ":beanio、" [http://camel.apache.org之一/schema/spring](http://camel.apache.org/schema/spring) ":bindy, " [http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring) ":[http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring) ":crypto, " [http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring) ":csv, " [http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring) " :custom, " [http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring) ":flatpack, " [http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring) ":gzip, " [http://camel.apache.org/ schema/spring](http://camel.apache.org/schema/spring) ":hl7, " [http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring) ":jaxb, " [http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring) ":jibx, " [http://camel. apache.org/schema/spring](http://camel.apache.org/schema/spring) ":json, " [http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring) ":protobuf, " [http://camel.apache.](http://camel.apache.org/schema/spring)org/schema/spring ":rss, " [http://camel.apache.org/schema/spring](http://camel.apache.org/schema/spring)是期待。-> [帮助 1]

* * *

我的路线的副本可以在下面找到：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:camel="http://camel.apache.org/schema/spring"
   xsi:schemaLocation="
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
   http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

 <!-- load properties --> 

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations" value="file:backend.properties" /> 
</bean>
<bean id="properties" class="org.apache.camel.component.properties.PropertiesComponent">
    <property name="location" value="file:backend.properties" /> 
</bean>

<bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="tcp://0.0.0.0:61616?useLocalHost=true" /> 
</bean>

<bean id="pooledConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory">
    <property name="maxConnections" value="8" /> 
    <property name="maximumActive" value="500" /> 
    <property name="connectionFactory" ref="jmsConnectionFactory" /> 
</bean>

<bean id="jmsConfig" class="org.apache.camel.component.jms.JmsConfiguration">
    <property name="connectionFactory" ref="pooledConnectionFactory" /> 
    <property name="transacted" value="false" /> 
    <property name="concurrentConsumers" value="1" /> 
</bean>

<bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="configuration" ref="jmsConfig" /> 
</bean>

<!-- Custom Loaded Beans -->

<bean id="TriggeredSendBean" class="com.backend.trigger.ClientTest"/>

 <!-- camel configuration --> 

<camel:camelContext xmlns="http://camel.apache.org/schema/spring">
    <dataFormats>
        <json id="WelcomeEmail" library="Jackson" unmarshalTypeName="com.testObjects.EnrollResponse" />
     <dataFormats>

    <camel:route id="genericMessageHandler" streamCache="true">
    <from uri="activemq:topic:Test.Central" /> 
    <unmarshal ref="WelcomeEmail" /> 

    <to uri = "bean:TriggeredSendBean?method=setup" /> 
    <to uri = "bean:TriggeredSendBean?method=addSubscriberAllList" />
    <to uri = "bean:TriggeredSendBean?method=sendWelcomeEmail" />

    </camel:route>
</camel:camelContext> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:41:12.053

一切看起来都很好。可能你错过了将 camel-jackson 依赖添加到你的 pom.xml 中。只是一个猜测！

```
 <dependency>
        <groupId>org.apache.camel</groupId>
        <artifactId>camel-jackson</artifactId>
        <version>${camel-version}</version>
    </dependency> 
```

# java - Maven导入eclipse时不向项目添加依赖jar文件

> ID：15505940
> 
> 赞同：7
> 
> 时间：2013-03-19T17:03:46.593
> 
> 标签：java, eclipse, maven

一切都加载到 Maven 存储库中。在我的情况下，位于`C:\opt\m2\repository`. 我`M2_REPO`在 eclipse 中设置变量指向`C:\opt\m2\repository`和在命令行中我做了`mvn clean install`。

然后我等了 10 分钟，让所有依赖项都下载完毕，然后去检查 repo。一切都下载到那里。

然后我`mvn eclipse:eclipse`将项目导入eclipse。

除了所有的 Maven 依赖项之外，似乎所有东西都被导入了。我的项目有 9409 错误，因为它缺少那些 jar 文件。

我`Project -> Clean`没有帮助。

我做`F5`了项目名称，没有帮助。

我确实删除并再次导入，没有帮助。

仅供参考，我也尝试了 m2e 插件，没有帮助。

我错过了什么吗？

这是 .classpath 文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
<classpathentry kind="src" output="ks-common-util/target/classes" path="ks-common-util/src/main/java"/>
<classpathentry kind="src" output="ks-common-util/target/classes" path="ks-common-util/src/main/resources"/>
<classpathentry kind="src" output="ks-common-util/target/test-classes" path="ks-common-util/src/test/java"/>
<classpathentry kind="src" output="ks-common-util/target/test-classes" path="ks-common-util/src/test/resources"/>
<classpathentry kind="src" output="ks-common-test/target/classes" path="ks-common-test/src/main/java"/>
<classpathentry kind="src" output="ks-common-test/target/classes" path="ks-common-test/src/main/resources"/>
<classpathentry kind="src" output="ks-common-test/target/test-classes" path="ks-common-test/src/test/java"/>
<classpathentry kind="src" output="ks-common-test/target/test-classes" path="ks-common-test/src/test/resources"/>
<classpathentry kind="src" output="ks-common-api/target/classes" path="ks-common-api/src/main/java"/>
<classpathentry kind="src" output="ks-common-api/target/classes" path="ks-common-api/src/main/resources"/>
<classpathentry kind="src" output="ks-common-impl/target/classes" path="ks-common-impl/src/main/java"/>
<classpathentry kind="src" output="ks-common-impl/target/classes" path="ks-common-impl/src/main/resources"/>
<classpathentry kind="src" output="ks-common-impl/target/test-classes" path="ks-common-impl/src/test/java"/>
<classpathentry kind="src" output="ks-common-impl/target/test-classes" path="ks-common-impl/src/test/resources"/>
<classpathentry kind="src" output="ks-common-ui/target/classes" path="ks-common-ui/src/main/java"/>
<classpathentry kind="src" output="ks-common-ui/target/classes" path="ks-common-ui/src/main/resources"/>
<classpathentry kind="src" output="ks-common-ui/target/test-classes" path="ks-common-ui/src/test/java"/>
<classpathentry kind="src" output="ks-common-ui/target/test-classes" path="ks-common-ui/src/test/resources"/>
<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
<classpathentry exported="true" kind="con" path="org.maven.ide.eclipse.MAVEN2_CLASSPATH_CONTAINER"/>
<classpathentry kind="output" path="target/classes"/> 
```

该项目结构为父子项目。1 个父项目和 8 个子项目。他们每个人都有一个 pom.xml 文件。

父项目很好，我可以编译它。但是，没有一个子项目可以工作，因为没有一个依赖项被加载到项目中。

这是父 pom.xml 的依赖项

```
 <dependencyManagement>
<dependencies>
  <!-- Test Framework Dependencies -->
  <dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>${junit.version}</version>
    <scope>test</scope>
  </dependency>
  <dependency>
    <groupId>org.apache.derby</groupId>
    <artifactId>derby</artifactId>
    <version>${derby.version}</version>
    <scope>test</scope>
  </dependency>
  <dependency>
    <groupId>org.apache.derby</groupId>
    <artifactId>derbynet</artifactId>
    <version>${derby.version}</version>
  </dependency>
  <dependency>
    <groupId>org.apache.derby</groupId>
    <artifactId>derbyclient</artifactId>
    <version>${derby.version}</version>
  </dependency>
  <dependency>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty</artifactId>
    <version>${jetty.version}</version>
    <scope>test</scope>
  </dependency>
  <dependency>
    <artifactId>servlet-api</artifactId>
    <groupId>javax.servlet</groupId>
    <version>2.5</version>
    <scope>provided</scope>
  </dependency>
  <dependency>
    <groupId>javax.persistence</groupId>
    <artifactId>persistence-api</artifactId>
    <version>1.0</version>
  </dependency>
  <dependency>
    <groupId>javax.transaction</groupId>
    <artifactId>jta</artifactId>
    <version>1.1</version>
  </dependency>
  <dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib-nodep</artifactId>
    <version>2.1_3</version>
  </dependency>
  <dependency>
    <groupId>org.eclipse.persistence</groupId>
    <artifactId>eclipselink</artifactId>
    <version>${eclipselink.version}</version>
  </dependency>
  <dependency>
    <groupId>org.apache.openjpa</groupId>
    <artifactId>openjpa</artifactId>
    <version>1.2.1</version>
  </dependency>

  <!-- Hibernate -->
  <dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-annotations</artifactId>
    <version>3.4.0.GA</version>
  </dependency>
  <dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>3.4.0.GA</version>
  </dependency>

  <!-- Hibernate Transitive Dependencies -->
  <dependency>
    <groupId>dom4j</groupId>
    <artifactId>dom4j</artifactId>
    <version>1.6.1</version>
  </dependency>
  <dependency>
    <groupId>commons-collections</groupId>
    <artifactId>commons-collections</artifactId>
    <version>3.2</version>
  </dependency>
  <dependency>
    <groupId>antlr</groupId>
    <artifactId>antlr</artifactId>
    <version>2.7.7</version>
  </dependency>

  <!-- Spring Dependencies -->
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>${spring.version}</version>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aspects</artifactId>
    <version>${spring.version}</version>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-beans</artifactId>
    <version>${spring.version}</version>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>${spring.version}</version>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>${spring.version}</version>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
    <version>${spring.version}</version>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-orm</artifactId>
    <version>${spring.version}</version>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <version>${spring.version}</version>
    <scope>test</scope>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>${spring.version}</version>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
    <version>${spring.version}</version>
  </dependency>
  <dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-core</artifactId>
    <version>${spring.security.version}</version>
    <exclusions>
      <exclusion>
        <groupId>org.springframework</groupId>
        <artifactId>spring-support</artifactId>
      </exclusion>
    </exclusions>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-security-core</artifactId>
    <version>${spring.security.version}</version>
    <exclusions>
      <exclusion>
        <groupId>org.springframework</groupId>
        <artifactId>spring-support</artifactId>
      </exclusion>
    </exclusions>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-security-cas-client</artifactId>
    <version>${spring.security.version}</version>
  </dependency>

  <!-- This jar is only needed if you are using CAS with Spring Security -->
  <dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-cas-client</artifactId>
    <version>${spring.security.version}</version>
    <exclusions>
      <exclusion>
        <groupId>org.springframework</groupId>
        <artifactId>spring-dao</artifactId>
      </exclusion>
    </exclusions>
  </dependency>
  <dependency>
    <groupId>org.opensaml</groupId>
    <artifactId>opensaml</artifactId>
    <version>1.1</version>
    <!-- <version>2.2.2</version> -->
  </dependency>
  <dependency>
    <groupId>xerces</groupId>
    <artifactId>xercesImpl</artifactId>
    <version>${xercesImpl.version}</version>
  </dependency>

  <!-- Metro Dependencies -->
  <dependency>
    <groupId>com.sun.xml.ws</groupId>
    <artifactId>webservices-rt</artifactId>
    <version>${metro.version}</version>
  </dependency>
  <dependency>
    <groupId>org.jvnet.jax-ws-commons.spring</groupId>
    <artifactId>jaxws-spring</artifactId>
    <version>1.8</version>
    <exclusions>
      <exclusion>
        <groupId>org.springframework</groupId>
        <artifactId>spring</artifactId>
      </exclusion>
      <!-- These must be excluded for WSIT to work -->
      <exclusion>
        <groupId>com.sun.xml.ws</groupId>
        <artifactId>jaxws-rt</artifactId>
      </exclusion>
      <exclusion>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-impl</artifactId>
      </exclusion>
      <exclusion>
        <groupId>javax.activation</groupId>
        <artifactId>activation</artifactId>
      </exclusion>
      <exclusion>
        <groupId>javax.xml.soap</groupId>
        <artifactId>saaj-api</artifactId>
      </exclusion>
      <exclusion>
        <groupId>com.sun.xml.messaging.saaj</groupId>
        <artifactId>saaj-impl</artifactId>
      </exclusion>
      <exclusion>
        <groupId>com.sun.xml.stream.buffer</groupId>
        <artifactId>streambuffer</artifactId>
      </exclusion>
      <exclusion>
        <groupId>com.sun.xml.stream</groupId>
        <artifactId>sjsxp</artifactId>
      </exclusion>
      <exclusion>
        <groupId>com.sun.org.apache.xml.internal</groupId>
        <artifactId>resolver</artifactId>
      </exclusion>
    </exclusions>
  </dependency>

  <!-- stax-ex 1.0 pom making a disaster so trying 1.2 -->
  <dependency>
    <groupId>org.jvnet.staxex</groupId>
    <artifactId>stax-ex</artifactId>
    <version>1.2</version>
  </dependency>

  <!-- CXF Dependencies -->
  <!-- Libraries not required for Java 1.6_04+ are being excluding (based cxf WHICH_JARS file) -->
  <dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-api</artifactId>
    <version>${cxf.version}</version>
    <exclusions>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-javamail_1.4_spec</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-activation_1.1_spec</artifactId>
      </exclusion>
    </exclusions>
  </dependency>
  <dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-rt-core</artifactId>
    <version>${cxf.version}</version>
    <exclusions>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-javamail_1.4_spec</artifactId>
      </exclusion>
    </exclusions>
  </dependency>
  <dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-rt-frontend-jaxws</artifactId>
    <version>${cxf.version}</version>
    <exclusions>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-javamail_1.4_spec</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-jaxws_2.1_spec</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-activation_1.1_spec</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-annotation_1.0_spec</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-ws-metadata_2.0_spec</artifactId>
      </exclusion>
      <exclusion>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
      </exclusion>
      <exclusion>
        <groupId>javax.xml.soap</groupId>
        <artifactId>saaj-api</artifactId>
      </exclusion>
      <exclusion>
        <groupId>com.sun.xml.messaging.saaj</groupId>
        <artifactId>saaj-impl</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.codehaus.woodstox</groupId>
        <artifactId>wstx-asl</artifactId>
      </exclusion>
    </exclusions>
  </dependency>
  <dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-rt-frontend-simple</artifactId>
    <version>${cxf.version}</version>
    <exclusions>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-jaxws_2.1_spec</artifactId>
      </exclusion>
    </exclusions>
  </dependency>
  <dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-common-utilities</artifactId>
    <version>${cxf.version}</version>
    <exclusions>
      <exclusion>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
      </exclusion>
    </exclusions>
  </dependency>
  <dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-tools-common</artifactId>
    <version>${cxf.version}</version>
    <exclusions>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-ws-metadata_2.0_spec</artifactId>
      </exclusion>
      <exclusion>
        <groupId>javax.xml.soap</groupId>
        <artifactId>saaj-api</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.apache.velocity</groupId>
        <artifactId>velocity</artifactId>
      </exclusion>
    </exclusions>
  </dependency>
  <dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-rt-transports-http</artifactId>
    <version>${cxf.version}</version>
  </dependency>
  <dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-rt-transports-http-jetty</artifactId>
    <version>${cxf.version}</version>
  </dependency>
  <dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-rt-ws-security</artifactId>
    <version>${cxf.version}</version>
    <exclusions>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-annotation_1.0_spec</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-stax-api_1.0_spec</artifactId>
      </exclusion>
      <exclusion>
        <groupId>javax.xml.soap</groupId>
        <artifactId>saaj-api</artifactId>
      </exclusion>
    </exclusions>
  </dependency>
  <dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-rt-bindings-soap</artifactId>
    <version>${cxf.version}</version>
    <exclusions>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-javamail_1.4_spec</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-activation_1.1_spec</artifactId>
      </exclusion>
      <exclusion>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
      </exclusion>
      <!-- GWT hosted not working if this is excluded -->
      <!--
        <exclusion>
        <groupId>org.codehaus.woodstox</groupId>
        <artifactId>wstx-asl</artifactId>
        </exclusion>
      -->
    </exclusions>
  </dependency>
  // deleted to fit in SO POST

  <!-- Logging -->
  <dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.6.0</version>
  </dependency>
  <dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.6.0</version>
  </dependency>
  <dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>${log4j.version}</version>
  </dependency>
  <dependency>
    <groupId>commons-logging</groupId>
    <artifactId>commons-logging</artifactId>
    <version>1.1.1</version>
  </dependency>

  <!-- Velocity (used by cxf & statements) -->
  <dependency>
    <groupId>velocity</groupId>
    <artifactId>velocity</artifactId>
    <version>${velocity.version}</version>
  </dependency>
  <dependency>
    <groupId>org.apache.velocity</groupId>
    <artifactId>velocity</artifactId>
    <version>${velocity.version}</version>
  </dependency>
  <dependency>
    <groupId>org.apache.velocity</groupId>
    <artifactId>velocity-tools</artifactId>
    <version>${velocity.tools.version}</version>
  </dependency>
  <dependency>
    <groupId>commons-lang</groupId>
    <artifactId>commons-lang</artifactId>
    <version>2.3</version>
  </dependency>

  <!-- Pom dependencies for impl specific jars -->
  <dependency>
    <groupId>org.kuali.student.common</groupId>
    <artifactId>ks-jta</artifactId>
    <version>${project.version}</version>
    <type>pom</type>
  </dependency>
  <dependency>
    <groupId>org.kuali.student.common</groupId>
    <artifactId>ks-cxf</artifactId>
    <version>${project.version}</version>
    <type>pom</type>
  </dependency>
  <dependency>
    <groupId>org.kuali.student.common</groupId>
    <artifactId>ks-metro</artifactId>
    <version>${project.version}</version>
    <type>pom</type>
  </dependency>
  <dependency>
    <groupId>org.kuali.student.common</groupId>
    <artifactId>ks-eclipselink</artifactId>
    <version>${project.version}</version>
    <type>pom</type>
  </dependency>
  <dependency>
    <groupId>org.kuali.student.common</groupId>
    <artifactId>ks-hibernate</artifactId>
    <version>${project.version}</version>
    <type>pom</type>
  </dependency>

  <!-- GWT Dependencies -->
  // deleted in order to fit in SO post
  <dependency>
    <groupId>org.kuali.rice</groupId>
    <artifactId>rice-impl</artifactId>
    <version>${kuali.rice.version}</version>
    <exclusions>
      <exclusion>
        <groupId>org.springframework</groupId>
        <artifactId>spring-dao</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jpa</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.springframework</groupId>
        <artifactId>spring-remoting</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.springframework</groupId>
        <artifactId>spring-support</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jmx</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.springframework</groupId>
        <artifactId>spring-mock</artifactId>
      </exclusion>
      <exclusion>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
      </exclusion>
      <exclusion>
        <groupId>htmlunit</groupId>
        <artifactId>htmlunit</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty</artifactId>
      </exclusion>
      <!--
        <exclusion>
        <groupId>org.springmodules</groupId>
        <artifactId>spring-modules-ojb</artifactId>
        </exclusion>
      -->
      <!--
        <exclusion>
        <groupId>ojb</groupId>
        <artifactId>db-ojb</artifactId>
        </exclusion>
      -->
      <exclusion>
        <groupId>com.oracle</groupId>
        <artifactId>ojdbc14</artifactId>
      </exclusion>
      <exclusion>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-activation_1.1_spec</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-javamail_1.4_spec</artifactId>
      </exclusion>
      <!--
        These dependencies conflict with gwt-dev for running hosted mode via eclipse
        launch file.
      -->
      <exclusion>
        <groupId>tomcat</groupId>
        <artifactId>jasper-compiler-jdt</artifactId>
      </exclusion>
      <exclusion>
        <groupId>tomcat</groupId>
        <artifactId>jasper-compiler</artifactId>
      </exclusion>
      <exclusion>
        <groupId>tomcat</groupId>
        <artifactId>jasper-runtime</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.eclipse.jdt</groupId>
        <artifactId>core</artifactId>
      </exclusion>

      <!-- JOTM - uncomment out to switch to Bitronix -->        
      <!-- 
      <exclusion>                                 
        <groupId>xapool</groupId>                 
        <artifactId>xapool</artifactId>           
      </exclusion>                                
      <exclusion>                                 
        <groupId>jotm</groupId>                   
        <artifactId>jotm</artifactId>             
      </exclusion>
       -->

      <!-- itext -->
      <exclusion>
        <groupId>itext</groupId>
        <artifactId>itext</artifactId>
      </exclusion>
    </exclusions>
  </dependency>
  <dependency>
    <groupId>commons-beanutils</groupId>
    <artifactId>commons-beanutils</artifactId>
    <version>1.7.0</version>
  </dependency>
  // deleted some because SO only allow 30000 characters 
```

```
 <dependencies>
<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
</dependency> 
```

这是孩子们的 pom.xml 之一

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.kuali.student</groupId>
        <artifactId>student</artifactId>
        <version>1.2</version>
    </parent>
    <groupId>org.kuali.student.common</groupId>
    <artifactId>ks-common</artifactId>
    <packaging>pom</packaging>
    <name>KS Common</name>
    <description>Kuali Student Common</description>
    <issueManagement>
        <system>Jira</system>
        <url>https://test.kuali.org/jira/browse/KSCOR</url>
    </issueManagement>
    <profiles>
        <profile>
            <id>default</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <modules>
                <module>ks-cxf</module>
                <module>ks-metro</module>
                <module>ks-eclipselink</module>
                <module>ks-hibernate</module>
                <module>ks-jta</module>
                <module>ks-rice-lessdep</module>
                <module>ks-common-util</module>
                <module>ks-common-test</module>
                <module>ks-common-api</module>
                <module>ks-common-impl</module>
                <module>ks-common-ui</module>
            </modules>
        </profile>
        <profile>
            <id>skip-ui</id>
            <modules>
                <module>ks-cxf</module>
                <module>ks-metro</module>
                <module>ks-eclipselink</module>
                <module>ks-hibernate</module>
                <module>ks-jta</module>
                <module>ks-rice-lessdep</module>
                <module>ks-common-util</module>
                <module>ks-common-test</module>
                <module>ks-common-api</module>
                <module>ks-common-impl</module>
            </modules>
        </profile>
    </profiles>
    <repositories>
        <repository>
            <id>kuali.nexus</id>
            <name>Nexus Repository Manager</name>
            <url>http://nexus.kuali.org/content/groups/public</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
    </repositories>
</project> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T18:58:37.563

使用 m2e 插件，您无需进行任何手动操作。从您的工作区中删除该项目，然后转到`File->Import->Maven->Existing Maven Projects`. 浏览对话框以导入您的项目，您就完成了。

![Maven 导入 - 第 1 部分](../Images/d8f54c580b7eb69a99cf1e86a3808de2.png)

![Maven 导入 - 第 2 部分](../Images/5d96520ee6c4f3a17b9221cb17517130.png)

请注意，如果您的 Maven 项目或其任何子模块中有任何`.classpath`、`.settings`或`.project`资源，则需要在执行导入之前删除它们（`mvn eclipse:clean`不足以*删除*它们）。这是因为它们会与 m2e 设置产生冲突。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T17:06:38.057

试试，按这个顺序：

```
mvn eclipse:eclipse -Dwtpversion=2.0

mvn package

mvn eclipse:clean 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:37:08.057

试试这种方式：

1.  您需要的第一件事是 M2Eclipse。它有一点问题，但它可以工作。（[http://m2eclipse.sonatype.org/sites/m2e](http://m2eclipse.sonatype.org/sites/m2e)）
2.  通过eclipse(M2Eclipse)导入maven项目
3.  在项目上做一个 mvn elipse:clean eclipse:eclipse
4.  在eclipse中刷新项目

它应该以这种方式工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-22T15:08:11.937

我尝试在 pom.xml 中添加，更新，清理项目没有奏效。但是，这行得通

1 - 右键单击​​ Maven 项目。

2 - Maven -> 添加依赖

3 - 输入 GroupID、工件、版本。

4 - 提交

瞧，它就在那里！希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-07T16:06:36.657

尝试关闭您的 IDE 并重新启动它.. 关闭时您可能会注意到下载了一些依赖项 jar 文件。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-06-26T09:55:25.153

我遇到了同样的问题，我以这种方式解决了它（在项目中我使用了 Maven、Spring、hibernate）：

1.  帮助
2.  检查更新

我不得不升级：Spring IDE（对不起，我不记得全名了）。在此操作之后一切正常（在此操作之前，我尝试了许多解决方案但没有任何帮助）。

# java - 无法让小组工作

> ID：15505942
> 
> 赞同：0
> 
> 时间：2013-03-19T17:03:48.620
> 
> 标签：java, regex, match, regex-group

我是 Java 正则表达式的新手，我正在尝试从此文本中提取所有“课程#”：

```
<a id="lesson1" href="lesson1.html">Lesson 1</a>
<a id="lesson2" href="lesson2.html">Lesson 2</a>
<a id="lesson3" href="lesson3.html">Lesson 3</a>
<a id="lesson4" href="lesson4.html">Lesson 4</a>
<a id="lesson5" href="lesson5.html">Lesson 5</a>
<a id="lesson6" href="lesson6.html">Lesson 6</a>
<a id="lesson7" href="lesson7.html">Lesson 7</a>
<a id="lesson8" href="lesson8.html">Lesson 8</a>
<a id="lesson9" href="lesson9.html">Lesson 9</a> 
```

我正在使用此代码从我的字符串中提取该部分：

```
String s = ""
        + "<a id=\"lesson1\" href=\"lesson1.html\">Lesson 1</a>\n"
        + "<a id=\"lesson2\" href=\"lesson2.html\">Lesson 2</a>\n"
        + "<a id=\"lesson3\" href=\"lesson3.html\">Lesson 3</a>\n"
        + "<a id=\"lesson4\" href=\"lesson4.html\">Lesson 4</a>\n"
        + "<a id=\"lesson5\" href=\"lesson5.html\">Lesson 5</a>\n"
        + "<a id=\"lesson6\" href=\"lesson6.html\">Lesson 6</a>\n"
        + "<a id=\"lesson7\" href=\"lesson7.html\">Lesson 7</a>\n"
        + "<a id=\"lesson8\" href=\"lesson8.html\">Lesson 8</a>\n"
        + "<a id=\"lesson9\" href=\"lesson9.html\">Lesson 9</a>\n"
        + "";

Pattern pattern = Pattern.compile("id=\"(lesson[0-9])");
Matcher m = pattern.matcher(s);

System.out.println("Find: " + m.find())
System.out.println("Matches: " + m.matches());

if (m.matches()) {
   System.out.println("Group 0: " + m.group(0));
} 
```

我用这段代码得到的输出是：

```
Find: true
Matches: false 
```

在 javadocs 我读到如果 m.matches 返回 false 我不能访问组。

为什么如果 m.find() 返回 true，而 m.matches() 返回 false？我无法使用此代码访问组，所以我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:09:54.030

该`matches`方法尝试将整个输入序列与模式进行匹配。您应该`Matcher.find()`循环调用，直到它返回 false。每次调用 时`Matcher.find()`，您都可以访问当前找到的事件的组。

```
while (m.find()) {
   String someGroup = m.group(1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:09:23.437

这是对您问题前半部分的回答。

来自[Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html)

“find 方法扫描输入序列，寻找与模式匹配的下一个子序列。”

“matches 方法尝试将整个输入序列与模式进行匹配。”

不同之处在于该`find`方法在字符串中的任何位置查找正则表达式的匹配项，而该`matches`方法仅在整个输入匹配时才返回 true。特别是，您的正则表达式以 开头，`id =`而您的字符串以 开头`<a`，因此您不会得到匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:14:58.787

试试下面的代码：

```
 String data = "" + "<a id=\"lesson1\" href=\"lesson1.html\">Lesson 1</a>\n"
            + "<a id=\"lesson2\" href=\"lesson2.html\">Lesson 2</a>\n"
            + "<a id=\"lesson3\" href=\"lesson3.html\">Lesson 3</a>\n"
            + "<a id=\"lesson4\" href=\"lesson4.html\">Lesson 4</a>\n"
            + "<a id=\"lesson5\" href=\"lesson5.html\">Lesson 5</a>\n"
            + "<a id=\"lesson6\" href=\"lesson6.html\">Lesson 6</a>\n"
            + "<a id=\"lesson7\" href=\"lesson7.html\">Lesson 7</a>\n"
            + "<a id=\"lesson8\" href=\"lesson8.html\">Lesson 8</a>\n"
            + "<a id=\"lesson9\" href=\"lesson9.html\">Lesson 9</a>\n" + "";

    Pattern pattern = Pattern.compile("\\>([Ll]esson\\s+\\d+)");
    Matcher matcher = pattern.matcher(data);

    while (matcher.find()) {
        System.out.println(matcher.group(1));
    } 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T17:16:18.533

你只需要这样做：

```
if (m.find()) {
   System.out.println(m.group(1));
} 
```

*   `group(1)`而不是`group(0)`因为`group(0)`返回整个匹配，而`group(1)`返回第一个括号的组。
*   你要么`m.find()`要么`m.matches()`。不同之处在于`m.matches()`需要匹配整个字符串（请参阅[Java Regex 中的matches() 和find() 之间的区别](https://stackoverflow.com/questions/4450045/difference-between-matches-and-find-in-java-regex)）。您的正则表达式仅匹配字符串中的子字符串，因此`matches()`失败并`find()`找到。

# javascript - 将 HTML 标记传递到车把

> ID：15505944
> 
> 赞同：17
> 
> 时间：2013-03-19T17:03:55.047
> 
> 标签：javascript, jquery, html, json

我有一个不寻常的情况，客户希望在从 JSON 对象传递到把手的字符串中放置换行符。我试过转义字符，但不出所料，它并没有被 DOM 渲染。有什么建议么？

* * *

```
"company": "Lorem adscs ireland <br/> marketed as iuhmdsf in Europe" 
```

* * *

```
var products = Data;

var theTemplateScript = $("#product-template").html();

var theTemplate = Handlebars.compile (theTemplateScript);
$("#marketed-products .products").append (theTemplate(products)); 
```

* * *

```
{{#items}}
<li><span class="company">{{company}}</li>
{{/items}} 
```

* * *

上面代码的输出应该是这样的

Lorem adcs 爱尔兰
在欧洲以 iuhmdsf 销售

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-19T17:05:34.143

使用三方括号，如`{{{returnedHtml}}}`，在这种情况下，Handlebars 不会转义该值。

即它将变成：

```
{{#items}}
<li><span class="company">{{{company}}}</li>
{{/items}} 
```

# umbraco - 用户控件的 AncerstorOrSelf 等效项

> ID：15505945
> 
> 赞同：0
> 
> 时间：2013-03-19T17:04:04.893
> 
> 标签：umbraco

我们通常为导航控件之类的东西创建 Razor 控件，但是我们有点厌倦了一次又一次地编写相同的代码，所以我们认为我们应该创建一个包含在标准用户控件中的导航控件。

在 umbraco Razor 视图中，有一个动态方法 AncestorOrSelf，它采用可选的 Level 作为参数。

APi 中是否有可用于返回单个节点的等效项？

提前感谢艾尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:32:14.570

您可以使用[uQuery 的](http://our.umbraco.org/documentation/Reference/Querying/uQuery/)扩展方法['GetAncestorOrSelfNodes()'](http://our.umbraco.org/documentation/Reference/Querying/uQuery/Content/Nodes#GetAncestorOrSelfNodes%28%29)来完成此操作。

> uQuery 是一个 API，提供对内容、媒体和成员数据的读/写访问，以及扩展关系。uQuery 源自 uComponents，从 v4.8 开始添加到 Umbraco。

**例子：**

```
var current = uQuery.GetCurrentNode();
var ancestor = current.GetAncestorOrSelfNodes().FirstOrDefault(n => n.Level == 2); 
```

# javascript - JavascriptMVC 和 JQuery

> ID：15505946
> 
> 赞同：0
> 
> 时间：2013-03-18T20:41:22.907
> 
> 标签：javascript, model-view-controller, jquery

我负责管理和增强一个 JavascriptMVC 框架，该框架与后端的 python 一起使用。我更多的是后端开发人员，但需要尝试加快一些前端功能。

过去处理过 jquery，我想我可以在 DOM 加载后对其进行一些更改。这是我尝试过的...

我确实尝试将原始 jquery 脚本直接应用到 index.html 页面的末尾（以及在窃取调用之后）。我也试着把它说唱到主steel(); 调用 init.js 脚本。然后尝试将它放在有问题的部分中以更改为 $.Controller 。

显然这不起作用。

我的问题：渲染后我应该如何将 jquery 注入到 DOM 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:28:03.283

我刚刚学习了以前的人在这个框架中创建的方案。它比我想象的要快，但仍然很痛苦，而且还会有更多。

# ios - UITtextView 文本仅在模拟器中不起作用

> ID：15505948
> 
> 赞同：0
> 
> 时间：2013-03-19T17:04:11.227
> 
> 标签：ios, iphone, xcode, ios-simulator, uitextview

我正在开发一个`iOS`应用程序，我已经测试了几个应用程序`iPhones`并且它运行良好，只有一个问题，我的`UITextView`应用程序中有一个在设备上运行良好但在模拟器中它只会让我输入 1 textview 中的字符，有时根本没有，它会打开我的键盘，看起来我可以输入，但我遇到了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T19:28:55.043

Xcode 发行说明说：

> iOS 模拟器有时会停止响应硬件键盘。退出并重新启动模拟器通常会纠正此问题。(14642684)

# php - PHP preg_match URL 段不工作

> ID：15505952
> 
> 赞同：0
> 
> 时间：2013-03-19T17:04:17.327
> 
> 标签：php, preg-match

我有一个字符串：

```
https://domain.tld/123456/api/v1/projects/45242457-foo-bar.json 
```

我正在尝试使用以下方法匹配“45242457-foo-bar”：

```
preg_match('~"/projects/(.*).json"~', $url, $matches, PREG_OFFSET_CAPTURE); 
```

这不断返回零匹配。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:04:59.360

你需要逃避你的时期（和一个贪婪的*）：

```
~"/projects/(.*?)\.json"~ 
```

# java - 如何在 jsp var 中使用字符串？

> ID：15505958
> 
> 赞同：3
> 
> 时间：2013-03-19T17:04:40.037
> 
> 标签：java, jsp

我想在jsp方面做这样的事情：

```
<c:forEach items="${configForm.unselectedServers}" var="item">
    String name = "";
    <c:forEach items="$item.configs" var="conf">
        name += ", " + {$conf.name}
        .... 
```

有可能做这样的事情吗？

`item.configs`它是一个类的数组（包含`name`）。我知道它有效的那部分，我只是想知道如何将这些值放入字符串中。

* * *

编辑：

我收到以下错误：

```
Caused by: java.lang.NumberFormatException: For input string: ""
        at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
        at java.lang.Long.parseLong(Long.java:431)
        at java.lang.Long.<init>(Long.java:678)
        at org.apache.el.lang.ELArithmetic$LongDelegate.coerce(ELArithmetic.java:186)
        at org.apache.el.lang.ELArithmetic.coerce(ELArithmetic.java:357)
        at org.apache.el.lang.ELArithmetic.add(ELArithmetic.java:235)
        at org.apache.el.parser.AstPlus.getValue(AstPlus.java:40)
        at org.apache.el.parser.AstPlus.getValue(AstPlus.java:38)
        at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
        at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:935)
        at org.apache.jsp.config.configDetail_jsp._jspx_meth_c_005fset_005f5(configDetail_jsp.java:509)
        at org.apache.jsp.config.configDetail_jsp._jspx_meth_c_005fforEach_005f1(configDetail_jsp.java:475)
        at org.apache.jsp.config.configDetail_jsp._jspx_meth_c_005fforEach_005f0(configDetail_jsp.java:407)
        at org.apache.jsp.config.configDetail_jsp.access$4(configDetail_jsp.java:384)
        at org.apache.jsp.config.configDetail_jsp$Helper.invoke1(configDetail_jsp.java:615)
        at org.apache.jsp.config.configDetail_jsp$Helper.invoke(configDetail_jsp.java:679) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T17:08:55.870

怎么样：

```
<c:forEach items="${configForm.unselectedServers}" var="item">
  <c:set var="name" value="" />
  <c:forEach items="${item.configs}" var="conf">
    <c:set var="name" value="${name}, ${conf.name}" />
  </c:forEach>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T17:17:53.657

更好的方法是使用 JSTL 本身来处理它，如下所示：

```
<c:forEach items="${configForm.unselectedServers}" var="item">
  <c:set var="name" value="" />
  <c:forEach items="$item.configs" var="conf">
    <c:set var="name" value='${name + "," + conf.name}'/>
    <%--Do something here--%>
  </c:forEach>
</c:forEach> 
```

但是如果这个问题只是为了你的意识，你可以用 scriptlet 做这样的事情：

```
 <c:forEach items="${configForm.unselectedServers}" var="item">
      <c:set var="name" value="" />
      <c:forEach items="$item.configs" var="conf">
        <c:set var="name" value='${name + "," + conf.name}'/>
        <%
          String name = pageContext.getAttribute("name");
          //do something here
        %>
      </c:forEach>
    </c:forEach> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T17:36:39.270

也许这有帮助。

```
<c:forEach items="${configForm.unselectedServers}" var="item">
   <c:set var="name" value=""/>
   <c:forEach items="${item.configs}" var="conf">
      // here u can use yr variable like this
      <c:set var="name" value="${conf.first_name}"/>
   </c:forEach>
</c:forEach> 
```

# android - Cordova 插件的输出延迟

> ID：15505959
> 
> 赞同：7
> 
> 时间：2013-03-19T17:04:42.147
> 
> 标签：android, cordova, ibm-mobilefirst

我编写了一个 Cordova 插件来下载文件并将其保存在数据文件夹中。除了返回值外，一切正常。我想显示一个进度条并需要获取当前进度。这是我的代码中的相关部分：

```
 while ((readed = is.read(buffer)) > 0) {
     fos.write(buffer, 0, readed);
     totalReaded += readed;

     int newProgress = (int) (totalReaded*100/fileSize);
     if (newProgress != progress) {
         progress = newProgress;
         PluginResult res = new PluginResult(PluginResult.Status.OK, progress);
         res.setKeepCallback(true);
         callbackContext.sendPluginResult(res);
     }
  } 
```

我的 JavaScript：

```
downloader.prototype.writeFile = function (downloaderSuccess, downloaderFailure, options) {
    cordova.exec(downloaderSuccess, downloaderFailure, "downloader", "writeFile", options);
};

function downloaderSuccess(progress) {
    WL.Logger.debug("Result: "+progress)
}

function downloaderFailure(error) {
    WL.Logger.error("Error: "+error);
} 
```

发生的情况是只有在文件下载*后*才会输出进度。如果我将 PluginResult.Status 设置为 NO_RESULT，它根本不会输出任何内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:21:17.967

你正在用吗

```
 cordova.getThreadPool().execute(new Runnable() {
            public void run() {
                // while loop goes here
            }
        }); 
```

在您的下载代码的开头？

看看[src/org/apache/cordova/FileTransfer.java](https://github.com/apache/cordova-android/blob/master/framework/src/org/apache/cordova/FileTransfer.java#L310)。该文件几乎可以完成您正在做的事情，您可以看到它们如何能够发送实时进度更新，因为它们位于单独的线程中。

我认为问题在于 JavaScript 和 Java 代码[都在同一个 WebCore 线程中运行，](http://docs.phonegap.com/en/2.5.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)所以正在发生的事情是下载阻塞了 Java 和 UI 之间的通信（例如，发送结果），直到下载完成。

如果您遵循该指南中关于不阻塞 WebCore 线程的建议（因此，请使用：`cordova.getThreadPool().execute())`，您将能够获得进度更新。

为了测试这一点，我使用了这个插件：[https](https://github.com/phonegap/phonegap-plugins/blob/master/Android/Downloader/Downloader.java) ://github.com/phonegap/phonegap-plugins/blob/master/Android/Downloader/Downloader.java 进行文件下载。就目前而言，此代码的行为与您的代码相同 - 仅在下载文件后才发送进度更新。但是，一旦我将 downloadUrl() 方法包装在可运行文件中，它就可以正常工作，在更新发生时发送进度更新，而不是等到结束。

请让我知道这是否有帮助，或者您是否希望我提出更好的解释。

# javascript - Rails 不会以 json 格式输出数据

> ID：15505969
> 
> 赞同：0
> 
> 时间：2013-03-19T17:05:13.490
> 
> 标签：javascript, json, ruby-on-rails-3

这让我发疯

我需要链接格式为

```
links = [{source: 1, target: 2}, {..}, ...] 
```

控制器代码：

```
 @edges = []
     Follow.where("followable_type= 'User'").map do |x|
      @edges << {source: x.follower_id, target: x.followable_id}
     end 
```

查看代码（在 javascript 内）：

```
var links = [(<%= @edges.to_json %>)]; 
```

html源代码中的输出是

```
var links = [([{&quot;source&quot;:2,&quot;target&quot;:3},{&quot;source&quot;:2,&quot;target&quot;:1},{&quot;source&quot;:8,&quot;target&quot;:1},{&quot;source&quot;:1,&quot;target&quot;:8},{&quot;source&quot;:17,&quot;target&quot;:13},{&quot;source&quot;:8,&quot;target&quot;:13},{&quot;source&quot;:8,&quot;target&quot;:3},{&quot;source&quot;:13,&quot;target&quot;:3},{&quot;source&quot;:3,&quot;target&quot;:2},{&quot;source&quot;:39,&quot;target&quot;:13},{&quot;source&quot;:3,&quot;target&quot;:39},{&quot;source&quot;:15,&quot;target&quot;:1},{&quot;source&quot;:1,&quot;target&quot;:15},{&quot;source&quot;:3,&quot;target&quot;:1},{&quot;source&quot;:3,&quot;target&quot;:8},{&quot;source&quot;:3,&quot;target&quot;:13},{&quot;source&quot;:21,&quot;target&quot;:3},{&quot;source&quot;:13,&quot;target&quot;:21},{&quot;source&quot;:13,&quot;target&quot;:39},{&quot;source&quot;:21,&quot;target&quot;:13},{&quot;source&quot;:21,&quot;target&quot;:27},{&quot;source&quot;:27,&quot;target&quot;:13},{&quot;source&quot;:1,&quot;target&quot;:3},{&quot;source&quot;:1,&quot;target&quot;:39},{&quot;source&quot;:1,&quot;target&quot;:2},{&quot;source&quot;:1,&quot;target&quot;:13},{&quot;source&quot;:1,&quot;target&quot;:21},{&quot;source&quot;:1,&quot;target&quot;:27}])]; 
```

所以我想我应该把 html_safe 放在那里..这给了

```
var links = [([{"source":2,"target":3},{"source":2,"target":1},{"source":8,"target":1},{"source":1,"target":8},{"source":17,"target":13},{"source":8,"target":13},{"source":8,"target":3},{"source":13,"target":3},{"source":3,"target":2},{"source":39,"target":13},{"source":3,"target":39},{"source":15,"target":1},{"source":1,"target":15},{"source":3,"target":1},{"source":3,"target":8},{"source":3,"target":13},{"source":21,"target":3},{"source":13,"target":21},{"source":13,"target":39},{"source":21,"target":13},{"source":21,"target":27},{"source":27,"target":13},{"source":1,"target":3},{"source":1,"target":39},{"source":1,"target":2},{"source":1,"target":13},{"source":1,"target":21},{"source":1,"target":27}])]; 
```

哪个更好，但是每个键都是一个字符串..我需要它不是字符串

我怎样才能使这项工作？是控制器的问题还是视图的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:11:04.387

JSON 中没有符号的概念（如 Ruby 中）。密钥必须是 JSON 中的字符串。在您的情况下，您似乎不需要密钥。你可以只拥有一个追随者 ID 和可追随者 ID 的数组。

# jquery - 单击时重新加载/重置嵌入式 swf

> ID：15505972
> 
> 赞同：3
> 
> 时间：2013-03-19T17:05:26.670
> 
> 标签：jquery, flash, embed

我的页面上的标签中有各种 Flash 电影。有什么方法可以单击按钮 (html) 我可以重新启动/重新加载嵌入式 Flash 电影？

我正在使用：

```
<object data="flash/cvdb_video_cvdb_access.swf" type="application/x-shockwave-flash" id="flash_99674493" width="680" height="316">
<param name="movie" value="flash/cvdb_video_cvdb_access.swf">
<param name="wmode" value="opaque">
</object> 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T17:26:14.940

您可以使用 jQuery 从前一个`<object..`元素中获取所有 HTML，然后将 html 注入回其中，因为无法“重新加载”单个元素。您重新加载位置和整个 dom，但您不希望这样。你只是想重新加载你的 swf。

```
var obj = $("object#flash_99674493");
var orig = obj.html();

var restart = function() {
    obj.html(orig);
    alert("reloaded");
} 
```

看到（[这个jsfiddle](http://jsfiddle.net/QTVFD/)）

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-19T17:10:11.220

是的你可以。使用您的对象`(... id="flash_99674493"...)`示例，您可以：

```
var elem = $("#flash_99674493")[0]; 
elem.reload(); 
```

当您标记您的问题时，我正在使用`jQuery`.

# spring - Spring DataSource bean 未正确自动装配

> ID：15505974
> 
> 赞同：0
> 
> 时间：2013-03-19T17:05:31.773
> 
> 标签：spring, jdbc, datasource, code-injection

我的 Spring.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee" xmlns:lang="http://www.springframework.org/schema/lang"
xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
    http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">
<context:annotation-config />
<context:component-scan base-package="org.test.dao.impl"></context:component-scan>

<bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver.class"></property>
    <property name="url" value="jdbc:oracle:thin:@//localhost:1521/XE"></property>
    <property name="username" value="test"></property>
    <property name="password" value="testpass"></property>
</bean> 
```

我的模型

```
package org.test.model;

public class User {

private String id;
private String name;
private String password;
public String getId() {
    return id;
}
public void setId(String id) {
    this.id = id;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
} 
```

}

我的道

```
package org.test.dao;

import org.test.model.User;
import java.util.List;
public interface TestInterface {
public List<User> getAllUsers();
} 
```

我的道实现

```
package org.test.dao.impl;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.List;

import javax.sql.DataSource;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Required;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.jdbc.core.support.JdbcDaoSupport;
import org.springframework.stereotype.Component;
import org.test.dao.TestInterface;
import org.test.model.User;
@Component
public class TestInterfaceImpl implements TestInterface {

public DataSource dataSource;
private JdbcTemplate jdbcTemplate;
public DataSource getDataSource() {
    return dataSource;
}
@Autowired
public void setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;
    System.out.println(dataSource);
}
@Override
public List<User> getAllUsers() {
            jdbcTemplate = new JdbcTemplate();
            jdbcTemplate.setDataSource(getDataSource());
            String sql = "SELECT * FROM TEST_USERS";
            return jdbcTemplate.query(sql, new UserRowMapper());
}
private class UserRowMapper implements RowMapper<User>{

    @Override
    public User mapRow(ResultSet rs, int num) throws SQLException {
        User user = new User();
        user.setId(rs.getString("ID"));
        user.setName(rs.getString("NAME"));
        user.setPassword(rs.getString("PASSWORD"));
        return user;
    }

}

} 
```

我的主要课程

```
package org.test.run;

import java.util.List;

import org.test.dao.impl.TestInterfaceImpl;
import org.test.model.User;

public class Run {

/**
 * @param args
 */
public static void main(String[] args) {
    TestInterfaceImpl t = new TestInterfaceImpl();
    List<User> users = t.getAllUsers();
    System.out.println(users);
}

} 
```

错误即时消息

```
Exception in thread "main" java.lang.IllegalArgumentException: No DataSource specified
at org.springframework.util.Assert.notNull(Assert.java:112)
at      o     `enter code here`rg.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:99     )
at    `enter code here`org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:79)
at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:381)
at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:455)
at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:463)
at org.test.dao.impl.TestInterfaceImpl.getAllUsers(TestInterfaceImpl.java:35)
at org.test.run.Run.main(Run.java:15) 
```

每当我尝试注入数据源时，它都不起作用。我不知道出了什么问题。所有配置都已到位。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T17:30:55.677

DAO实现类需要标记为spring处理：

```
@Repository
public class TestInterfaceImpl implements TestInterface {} 
```

现在如果正在使用spring包扫描，它将找到这个类并处理所有@Autowired注解。

虽然这不是必需的，但请尝试`@Qualifier`为您的数据源设置方法添加注释。

```
@Autowired
@Qualifier("myDataSource")
public void setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;
    System.out.println(dataSource);
} 
```

注释您的 DAO 类`@Repository`将解决问题。您可以通过注解为您的 dao 类提供标识符`@Repository("testInterfaceImpl")`。

# database - 将表导入 PostgreSQL 时如何在 CSV 值中转义逗号？

> ID：15505975
> 
> 赞同：3
> 
> 时间：2013-03-19T17:05:32.660
> 
> 标签：database, postgresql, csv, import

我正在尝试使用“复制”命令将 csv 文件导入我的 postgres 表。包含逗号的值已用双引号括起来，但我似乎找不到使用“复制”命令将它们加载到 postgres 表中而没有任何错误的选项。

**我正在使用的“复制”命令：**

```
CREATE TABLE candidates (Sno int, name varchar, cases int, case_details varchar, .....);
copy candidates from 'something.csv' with NULL AS ' ' csv ; 
```

**有问题的 csv 行示例：**

```
1, "some name", 2, "(1):IPC Sections -  147, 323, 352, 504, 506 , Other Details - Case no.283A/2000, A.C.J.M-5, Ghumangunj Ellahabad, UP, Dt.12.11.2000", ..... 
```

属性上方的`case_details`值中有逗号。那是我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T18:35:56.033

为我工作（PG 9.2，linux）：

```
$ cat something.csv 
1, "some name", 2, "(1):IPC Sections -  147, 323, 352, 504, 506 , Other Details - Case no.283A/2000, A.C.J.M-5, Ghumangunj Ellahabad, UP, Dt.12.11.2000"

$ psql test
test=> CREATE TABLE candidates (Sno int, name varchar, cases int, case_details varchar);
CREATE TABLE
test=> \copy candidates from 'something.csv' with NULL AS ' ' csv ;
test=> select * from candidates ;
 sno |    name    | cases |                                                             case_details                                                             
-----+------------+-------+--------------------------------------------------------------------------------------------------------------------------------------
   1 |  some name |     2 |  (1):IPC Sections -  147, 323, 352, 504, 506 , Other Details - Case no.283A/2000, A.C.J.M-5, Ghumangunj Ellahabad, UP, Dt.12.11.2000
(1 row) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:32:43.747

可能的解决方案 - 用任何其他字符替换引号中的逗号，加载数据，将逗号替换回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T19:23:17.007

PhpPgAdmin 工具不够智能，无法处理逗号。Postgres 足够聪明来处理它们。它首先使用逗号将导入文件中的给定行中的数据拆分，然后自动在值周围加上引号。所以没有办法和客户一起做。至少对于 5.1 版是这样。他们可能在以后的版本中修复了它。

因此，如果您从 PhpPgAdmin 工具导入，请将逗号替换为“;” 或与您的数据分开的东西，然后在导入后运行 SQL 查询进行修复。

# ruby - 来自变量的Grep元素？

> ID：15505979
> 
> 赞同：2
> 
> 时间：2013-03-19T17:05:41.987
> 
> 标签：ruby, file, grep

我需要使用正则表达式提取元素。

首先我从一个函数读取一个文件，然后从第二个函数读取另一个文件并提取一个值。

在处理第二个函数的读取时，我从第一个文件中 grep 值：

```
#function read file
def get_file_as_string(filename)
  data = ''
  f = File.open(filename, "r") 
  f.each_line do |line|
    data += line
  end
  return data
end 
```

主要的：

```
file.each do |filename|
  lunsrvfile = 'server_lun.csv'
  ldev = get_file_as_string lunsrvfile
  f=File.read(filename)
  lunid = f.scan(/^"No.","time","(\h+:\h+:\h+).*/).flatten  #it's ok:  ex: 00:02:00
       if (ldev =~ /#{lunid}/) then
           server = ldev.lines.grep(lunid) #--> don't work
           #server = %x[grep lunid 'server_lun.csv' |awk -F ";" '{print $1}'] #--> don't work
           puts filename
           puts lunid
           puts server
    end
end 
```

server_lun.csv：

```
server1;00:02:00
server2;00:03:25
server3;00:03:26 
```

# 谢谢你的回答：

是的，我已经测试过了，但是当我把

```
server = ldev.lines.grep(/#{lunid}/) 
```

列出了所有文件（lunsrvfile）。

如果匹配，我需要第一个值：例如 server1

# 谢谢你的回答2：

但有：

```
server = ldev.grep(/#{lunid}/).first.split(';').first 
```

只有第一个 server1 是打印的。

输出：

```
filename1
lunid1
server1

filename2
lunid2
server1
(...) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:17:20.613

`grep`需要一个正则表达式，你传递给它一个字符串。对命令执行的方式与您`=~` 对`grep`命令执行的方式相同。此外，您不需要实施`get_file_as_string`. 顶部的一个衬垫将为您完成。

我认为这会做你想要的：

```
lunsrvfile = 'server_lun.csv'
ldev = File.open(lunsrvfile, "rb").read

file.each do |filename|
  f = File.read(filename)
  lunid = f.scan(/^"No.","time","(\h+:\h+:\h+).*/).flatten  #it's ok:  ex: 00:02:00
  if (ldev =~ /#{lunid}/) then
    server = ldev.lines.grep(/#{lunid}/)
    puts filename
    puts lunid
    puts server
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:32:16.967

您可以通过这种方式将文件读入数组

```
ldev = IO.readlines lunsrvfile 
```

然后

```
ldev.grep /#{lunid}/ 
```

将只返回该服务器的字符串

要获取服务器名称，您可以尝试例如：

```
ldev.grep(/#{lunid}/).first.split(';').first 
```

# php - PHP For 循环到 While 循环的转换

> ID：15505980
> 
> 赞同：-7
> 
> 时间：2013-03-19T17:05:43.190
> 
> 标签：php

我希望一个简单的问题，被困了几个小时，所以希望能得到一些帮助。

我需要知道如何将其转换为 do while：

```
for ($counter = 0 ; $counter < 10 ; $counter++) { 
```

这会持续一段时间：

```
for ($mower = $counter ; $mower ; $mower--) { 
```

感谢您的帮助，如有需要可以提供更多信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:08:01.753

```
for (init; condition; increment) {
    stuff; 
} 
```

几乎完全等同于

```
init;
while (condition) {
    stuff;
    increment;
} 
```

（在大多数情况下甚至编译为相同的字节序列），几乎所有具有类 C 语法的语言（包括 PHP）。

它也类似于

```
init;
if (condition) do {
    stuff;
    increment;
} while (condition); 
```

除了后者是可怕的。:) 但是请注意，如果初始状态和条件使您知道第一次迭代将始终运行，则可以摆脱`if`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:08:04.390

嗯，有这样的吗？

```
$counter = 0;
do {
  $counter++;
} while($counter < 10);

$mower = $counter;
while($mower) {
  $mower--;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:09:45.583

首先做while循环：

```
$counter = 0;

do{

// some statement
$counter ++;
} while($counter < 10); 
```

对于while循环：

```
$mower = $counter; 
while($mower){
   //statement
$mower--;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T17:08:10.437

```
$counter = 0;
do {
    // Do things
    $counter ++;
} while ($counter  < 10); 
```

和

```
$mower = $counter;
while ($mower) {
    // Do things
    $mower--;
} 
```

更多信息：

*   [http://php.net/manual/en/control-structures.while.php](http://php.net/manual/en/control-structures.while.php)
*   [http://php.net/manual/en/control-structures.do.while.php](http://php.net/manual/en/control-structures.do.while.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T17:08:38.743

第一：

```
$cont = 0;
do{
   //whatever
   $cont++;
}while($cont<10); 
```

第二：

```
$mover = $counter;
while($mower){
    //whatever
   $mower--;
} 
```

# excel - 带有 countif 的宏，不包括其他值

> ID：15505988
> 
> 赞同：2
> 
> 时间：2013-03-19T17:06:03.737
> 
> 标签：excel, vba

我有一个宏可以帮助我在 2 个数据集之间执行 countif 函数，并查看指定为“我们的”的所有数据是否都包含在指定为“他们的”的数据集中。此宏适用于其他数据比较。但是，我想比较在底部我可能具有欧洲其他地区（如果这是欧洲列表）或美国其他地区（当有美国列表提供州时）的值的国家/地区。有没有办法以这种方式修改它，如果它符合“欧洲其他地区”的值，它将检查除了出现在它上面的值之外的所有其他内容 - 换句话说：出现在 B2:B7 范围内的所有内容都应该是排除在外。每个数据集的范围都不相同，所以它应该调整到长度（就像现在发生的一样）。欧洲其他地区/美国其他地区将始终位于列表的末尾。谁能帮我解决这个问题？

截屏

![在此处输入图像描述](../Images/6e153b090c38a19c931256a0526a124c.png)

**我的宏：**

```
Sub GOOD_ALMOST_C_Countif_Until_LastRow()

Dim LastRowColumnB As Long
LastRowColumnB = Range("B65000").End(xlUp).Row

For i = 2 To LastRowColumnB
Cells(i, 3) = Application.CountIf(Range("A:A"), Cells(i, 2))
Next
End Sub 
```

ps - 在发布这个问题之前我做了互联网研究。然而，我的研究并没有带来任何积极的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:39:34.883

最简单的想法完全适合您的非动态数据范围（只是一些数学）：

```
If Cells(i,2) = "Rest of Europe" Then
    Cells(i,3) = Cells(Rows.Count, "A").End(xlUp).Row - 1 - _
                 WorksheetFunction.Sum(Range(Cells(2,3), Cells(i-1, 3)))
End If 
```

假设您在 A:A 中只有欧洲国家

# delphi - 名称/值对上的 TStringList CustomSort 方法

> ID：15505990
> 
> 赞同：1
> 
> 时间：2013-03-19T17:06:17.357
> 
> 标签：delphi, delphi-2010

可以使用名称/值对中的名称在 TStringList 上使用 customSort

我目前正在使用 TStringList 对每个 pos 中的一个值进行排序。我现在需要使用此值添加其他数据，因此我现在使用 TStringList 作为名称/值

我目前的比较排序是：

```
function StrCmpLogicalW(sz1, sz2: PWideChar): Integer; stdcall;
  external 'shlwapi.dll' name 'StrCmpLogicalW';

function MyCompare(List: TStringList; Index1, Index2: Integer): Integer;
begin
  Result := StrCmpLogicalW(PWideChar(List[Index1]), PWideChar(List[Index2]));
end;
Usage:
  StringList.CustomSort(MyCompare); 
```

有没有办法修改它，以便它根据名称值对的名称进行排序？

或者，还有其他方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T17:08:52.373

```
function MyCompare(List: TStringList; Index1, Index2: Integer): Integer;
begin
  Result := StrCmpLogicalW(PWideChar(List.Names[Index1]), PWideChar(List.Names[Index2]));
end; 
```

但实际上，我认为你的也应该工作，因为字符串本身无论如何都以名称开头，所以按整个字符串排序隐含地按名称排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T17:08:24.173

要解决此问题，您可以使用[`Names`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TStrings.Names)文档中描述的索引属性，如下所示：

> 指示作为名称-值对的字符串的名称部分。
> 
> 当 TStrings 对象的字符串列表包含名称-值对的字符串时，请读取 Names 以访问字符串的名称部分。Names 是 Index 处字符串的名称部分，其中 0 是第一个字符串，1 是第二个字符串，依此类推。如果字符串不是名称-值对，则 Names 包含一个空字符串。

因此，`List[Index1]`您只需使用`List.Names[Index1]`. 您的比较功能因此变为：

```
function MyCompare(List: TStringList; Index1, Index2: Integer): Integer;
begin
  Result := StrCmpLogicalW(
    PChar(List.Names[Index1]), 
    PChar(List.Names[Index2])
  );
end; 
```

# java - java.lang.NoSuchMethodError：OC4J 中的 javax.persistence.OneToMany.orphanRemoval()Z

> ID：15505991
> 
> 赞同：1
> 
> 时间：2013-03-19T17:06:17.980
> 
> 标签：java, jpa, oc4j

我使用 JPA 制作了一个简单的项目，但是使用 OC4J 作为服务器存在问题。

```
[oracle:deploy] Deployment failed for spring.

BUILD FAILED
C:\Resources\springsource\sts-3.1.0.RELEASE\plugins\org.eclipse.jst.server.generic.oc4j_1.5.206.v20090812\buildfiles\oracle.10.1.3.xml:74: Deploy error: Operation failed with error:
Error creating bean with name 'mySessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; 
nested exception is java.lang.NoSuchMethodError: javax.persistence.OneToMany.orphanRemoval()Z 
```

类路径

hibernate3.jar hibernate-jpa-2.0-api-1.0.1.Final.jar javassist-3.14.0-GA.jar jstl-1.2.jar jstl-impl-1.2.jar jta-1.1.jar log4j-1.2.16。 jar ojdbc6.jar org.springframework.asm-3.0.5.RELEASE.jar org.springframework.beans-3.0.5.RELEASE.jar org.springframework.context 3.0.5.RELEASE.jar org.springframework.core-3.0。 5.RELEASE.jar org.springframework.expression-3.0.5.RELEASE.jar org.springframework.jdbc-3.0.5.RELEASE.jar org.springframework.orm-3.0.5.RELEASE.jar org.springframework.transaction- 3.0.5.RELEASE.jar spring-web-3.0.5.RELEASE.jar org.springframework.aop-3.0.5.RELEASE.jar org.springframework.aspects-3.0.5.RELEASE.jar org.springframework.context。 support-3.0.5.RELEASE.jar org.springframework.instrument-3.0.5.RELEASE.jar org.springframework.instrument.tomcat-3.0.5.RELEASE.jar org.springframework.test-3.0.5.RELEASE.jar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:09:48.583

可能如下：

您的类路径中某处有 JPA 1.0 API jar。您需要找到并删除有问题的罐子。

如果您不确定，是哪个 JAR。请将您的类路径发布到您的问题中，以便我看一下。

# c# - 您可以在 C++/CLI WinForms 应用程序中本地使用 C++ 库吗？

> ID：15505992
> 
> 赞同：0
> 
> 时间：2013-03-19T17:06:18.400
> 
> 标签：c#, .net, visual-c++

您可以创建一个在 CLR 上运行的 VC++ Windows 窗体项目，该项目本质上是一个用 C++ 编写的 .NET 应用程序。您可以直接从此类项目中使用非托管 C++ 库吗？这是否意味着该库必须在 .NET 下编译和运行？或者您必须为此类库编写[CLR 包装类](http://www.multicoreconsulting.co.uk/blog/c-snippets/how-to-call-unmanaged-cplusplus-from-csharp/)，并且只有那些可以从 CLR 应用程序中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:09:40.573

是的。这里有一些指南。混合 CLI/C++ 和本机代码。您不需要包装器就可以在 CLI/C++ 中使用它们。事实上，您使用 CLI/C++ 和本机代码来创建包装器。

[http://www.technical-recipes.com/2012/mixing-managed-and-native-types-in-c-cli/](http://www.technical-recipes.com/2012/mixing-managed-and-native-types-in-c-cli/)

[http://www.codeproject.com/Articles/35041/Mixing-NET-and-native-code](http://www.codeproject.com/Articles/35041/Mixing-NET-and-native-code)

如果您实际上是在尝试制作一个在 C# 中使用的包装器，它应该看起来像这样：

```
#include "NativeClass.h"

public ref class NativeClassWrapper {
    NativeClass* m_nativeClass;

public:
    NativeClassWrapper() { m_nativeClass = new NativeClass(); }
    ~NativeClassWrapper() { delete m_nativeClass; }
    void Method() {
        m_nativeClass->Method();
    }

protected:
    // an explicit Finalize() method—as a failsafe
    !NativeClassWrapper() { delete m_nativeClass; }
}; 
```

请参阅[本机 C++ 的 C++/CLI 包装器以在 C# 中用作参考](https://stackoverflow.com/questions/10223186/c-cli-wrapper-for-native-c-to-use-as-reference-in-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:31:00.433

使用智能指针库可以更简单地管理本机（非垃圾收集）对象的分配，这在存在异常、多次调用`Dispose()`、忘记调用`Dispose()`等情况下非常困难。

这是 Dr_Asik 的示例，改写为使用[我编写的智能指针](https://codereview.stackexchange.com/q/1695/2150)：

```
#include "clr_scoped_ptr.h"
#include "NativeClass.h"

public ref class NativeClassWrapper {
    clr_scoped_ptr<NativeClass> m_nativeClass;

public:
    NativeClassWrapper() m_nativeClass(new NativeClass()) {}
    // auto-generated destructor is correct
    // auto-generated finalizer is correct

    void Method() {
        m_nativeClass->Method();
    }
}; 
```

对于字符串转换，请使用`marshal_as`Microsoft 为此目的提供的类。在此处查看 ildjarn 的答案：[C++/CLI 字符串转换](https://stackoverflow.com/a/6179487/103167)

# c - 真正基本的mpir问题

> ID：15505993
> 
> 赞同：1
> 
> 时间：2013-03-19T17:06:18.947
> 
> 标签：c, precision, floating-point-precision, pointer-arithmetic

我知道这是一个非常愚蠢的问题，但我希望有人能提供帮助。

出于精确的原因，我被迫使用 mpir，所以我必须为它翻译所有的 c 代码。基本上我只需要更重要的精度数字。

但是，我对用于变量的数据类型感到非常困惑。我了解 mpz_t 用于整数。由于我存储的数字有很多小数位，这显然不合适，因为整数只是整数

mpq_t 用于有理数。因为我不认为存储的每个值都是有理数，所以我看不出这有多合适。

mpf_t 用于浮点数。由于这具有“有限的精度”，我看不出这对我的变量有什么用处，因为我被告知使用 mpir 的主要原因是为了提高精度。

我只是希望能够以准确的方式表示我的数字，而我使用它的全部原因是因为有人告诉我它有助于在真正的大数和小数之间进行算术运算时保持准确性。我应该为 mpir 使用什么数据类型？我被告知我需要大于四倍的精度。:-(

我只是发现自己对整个事情感到困惑，需要一些关于使用什么数据类型以及如何确定精度级别的指导。如果可能，以非常简单的方式进行解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:19:10.177

来自[MPIR 2.6.0 文档](http://www.mpir.org/mpir-2.6.0.pdf)（PDF 链接），第 7 章：

> MPIR 浮点数存储在 mpf_t 类型的对象中，对其进行操作的函数具有 mpf_ 前缀。
> 
> 每个浮点数的尾数具有用户可选择的精度，仅受可用内存限制。每个变量都有自己的精度，可以随时增加或减少。

看起来它具有各种功能来帮助您设置精度，以位为单位，例如`mpf_set_default_prec`、`mpf_get_prec`和`mpf_set_prec`。

您应该使用`mpf_t`它作为数据类型，它的精度有限，但 MPIR 的优点是您可以设置该限制。如果您愿意，可以使用 128 位作为浮点数的尾数。这将是 32 位浮点数的 4 倍以上。

从[Wikipedia on quadruple-precision floating-point format](http://en.wikipedia.org/wiki/Quadruple-precision_floating-point_format)看来，四倍精度意味着 113 位的有效数/尾数，因此您可能希望使用 MPIR 的至少 113 位精度来获得该​​精度水平。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:14:13.717

[http://www.mpir.org/mpir-2.6.0.pdf](http://www.mpir.org/mpir-2.6.0.pdf)

文档的第 48 页指出，每个浮点变量都具有用户可选择的精度，仅受可用内存的限制。

他们还写道：

```
void mpf_set_prec (mpf_t rop, mp_bitcnt_t prec) [Function]

    Set the precision of rop to be at least prec bits. The value in 
    rop will be truncated to the new precision. This function requires 
    a call to realloc, and so should not be used in a tight loop. 
```

调用该函数是否适合您的需求？

# android - 安卓数据备份服务

> ID：15505996
> 
> 赞同：3
> 
> 时间：2013-03-19T17:06:32.067
> 
> 标签：android, sharedpreferences, android-backup-service

我正在尝试使用数据备份服务，以保存用户共享首选项，如此[处](http://developer.android.com/guide/topics/data/backup.html#BackupAgentHelper)所述。但是，我在尝试在不同的 Android 版本中进行测试时遇到了以下问题。

**Android 2.3.4：**扩展 BackupAgentHelper 后，尝试使用 bmgr 工具测试服务（按照[此处](http://developer.android.com/guide/topics/data/backup.html#Testing)的步骤），在我的带有 Android 2.3.4 的 Motorola Atrix 中，我看到以下消息：

```
W/BackupTransportService(1618): Unknown package in backup request: @pm@ 
W/BackupTransportService(1618): Not ready for backup request right now: [OperationScheduler: enabledState=false lastSuccess=2013-03-11/20:50:36 moratoriumSet=2013-03-16/22:50:00 moratorium=1970-01-01/02:00:00 trigger=1970-01-01/02:00:00]
W/PerformBackupThread(1618): Backup pass unsuccessful, restaging 
```

当然，没有创建备份，卸载并重新安装我的应用程序后，没有调用 onRestore。

**Android 4.0：**我还尝试在带有 API14 的模拟器上测试该服务。再次按照相同的步骤使用 bmgr 工具测试服务，而不是显示上述消息，实际上调用了 onBackup()（xxx.yyy.zzz 是我的包，XXXXXXXX 是 ApplicationInfo）：

```
03-19 18:33:10.932: V/ActivityThread(808): handleCreateBackupAgent: CreateBackupAgentData{appInfo=ApplicationInfo{XXXXXXXX xxx.yyy.zzz} backupAgent=xxx.yyy.zzz.DataBackUpActivity mode=0}
03-19 18:33:10.932: V/ActivityThread(808): Initializing agent class xxx.yyy.zzz.DataBackUpActivity
03-19 18:33:10.943: D/DataBackUpActivity(808): onCreate()
03-19 18:33:10.952: V/BackupServiceBinder(808): doBackup() invoked
03-19 18:33:10.952: D/DataBackUpActivity(808): onBackup()
03-19 18:33:10.952: D/BackupHelperDispatcher(808): handling existing helper 'prefs' android.app.backup.SharedPreferencesBackupHelper@YYYYYYYY
03-19 18:33:10.972: V/ActivityThread(808): handleDestroyBackupAgent: CreateBackupAgentData{appInfo=ApplicationInfo{XXXXXXXX xxx.yyy.zzz} backupAgent=xxx.yyy.zzz.DataBackUpActivity mode=0} 
```

在模拟器上卸载并重新安装我的应用程序后，调用了 onRestore()，但是找不到我的应用程序的 MainActivity，因此抛出了 ClassNotFoundException：

```
V/ActivityThread(2246): Initializing agent class xxx.yyy.zzz.DataBackUpActivity
D/DataBackUpActivity(2246): onCreate()
V/BackupServiceBinder(2246): doRestore() invoked
D/DataBackUpActivity(2246): onRestore()
D/backup_data(2246): SKIP_PADDING FAILED at line 331
V/ActivityThread(2246): handleDestroyBackupAgent: CreateBackupAgentData{appInfo=ApplicationInfo{XXXXXXXX xxx.yyy.zzz} backupAgent=xxx.yyy.zzz.DataBackUpActivity mode=0}
W/dalvikvm(2246): Unable to resolve superclass of Lcom/yyy/zzz/MainActivity; (1164)
W/dalvikvm(2246): Link of class 'Lcom/yyy/zzz/MainActivity;' failed
D/AndroidRuntime(2246): Shutting down VM
W/dalvikvm(2246): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
E/AndroidRuntime(2246): FATAL EXCEPTION: main
E/AndroidRuntime(2246): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{xxx.yyy.zzz/xxx.yyy.zzz.MainActivity}: java.lang.ClassNotFoundException: xxx.yyy.zzz.MainActivity
E/AndroidRuntime(2246):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1879)
E/AndroidRuntime(2246):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
E/AndroidRuntime(2246):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
E/AndroidRuntime(2246):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
E/AndroidRuntime(2246):     at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(2246):     at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(2246):     at android.app.ActivityThread.main(ActivityThread.java:4340)
E/AndroidRuntime(2246):     at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(2246):     at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(2246):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(2246):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(2246):     at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(2246): Caused by: java.lang.ClassNotFoundException: xxx.yyy.zzz.MainActivity
E/AndroidRuntime(2246):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
E/AndroidRuntime(2246):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
E/AndroidRuntime(2246):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
E/AndroidRuntime(2246):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
E/AndroidRuntime(2246):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870)
E/AndroidRuntime(2246):     ... 11 more 
```

有趣的是，如果我在 ClassNotFoundException 之后重新启动我的应用程序，它可以正常工作，包括恢复的共享首选项！

我在 SO 中遇到过类似的问题（例如[这里](https://stackoverflow.com/questions/4820554/android-unable-to-instantiate-activity-classnotfoundexception?rq=1)，[这里](https://stackoverflow.com/questions/7641765/mysterious-classnotfoundexception-when-android-system-engage-backupagent)），但是它们不属于我的问题的范畴。我认为 Manifest 文件或其他地方的应用程序设置没有问题，因为在 API14 中调用了 onBackup 和 onRestore 方法，并且在 ClassNotFoundException 之后恢复了备份。最后，我想指出我正在使用 API17 (Google Inc) 构建 Eclipse 项目。

对不起，我的帖子很长，但我想尽可能清楚地说明问题。如果有人对为什么在这些不同的 Android 版本中发生这种情况有任何反馈，请告诉我们。

**编辑：**阅读[这篇](https://stackoverflow.com/questions/3790190/backupmanager-backupagent-in-android-2-2)文章后，我还尝试使用 bmgr 工具中的此命令命令将备份传输更改为所谓的 LocalTransport：

```
adb shell bmgr transport android/com.android.internal.backup.LocalTransport 
```

结果是用户共享偏好在我的 Android 2.3.4 Atrix 手机中成功恢复。但是，在 Android 4.0 模拟器中，行为与以前相同，即调用了 onRestore()，引发了相同的 ClassNotFoundException，并且在重新启动应用程序后，我的应用程序可以正常工作并包含用户共享的偏好。所以在上一个问题之上，一个新的问题是为什么“LocalTransport”在 Android 2.3.4 上工作，而在 4.0 上抛出异常（至少在这种情况下）。如果有人可以分享意见，请继续。

**EDIT2：**好的，这很奇怪。ClassNotFoundException 仅针对我的应用程序中的 MapActivities 引发。更准确地说，我的应用程序从 MapActivity 开始，因此在第一次启动时抛出了 ClassNotFoundException。我所做的是创建一个带有两个按钮的虚拟 Activity 作为启动器 Activity，每个按钮都可以启动我的 MapActivities（在我的应用程序中我总共有 2 个）。现在在这种情况下，出现“找不到类”错误，如以下消息所示：

```
D/DataBackUpActivity(1114): onCreate()
D/DataBackUpActivity(1114): DB path = /data/data/xxx.yyy.zzz/databases/MyDB.db
V/BackupServiceBinder(1114): doRestore() invoked
D/DataBackUpActivity(1114): onRestore()
V/ActivityThread(1114): handleDestroyBackupAgent: CreateBackupAgentData{appInfo=ApplicationInfo{XXXXXXXX xxx.yyy.zzz} backupAgent=xxx.yyy.zzz.DataBackUpActivity mode=0}
W/dalvikvm(1114): Unable to resolve superclass of Lcom/yyy/zzz/MyMapActivity1; (1165)
W/dalvikvm(1114): Link of class 'Lcom/yyy/zzz/MyMapActivity1;' failed
E/dalvikvm(1114): Could not find class 'xxx.yyy.zzz.MyMapActivity1', referenced from method xxx.yyy.zzz.MyMainActivity$6.onClick
W/dalvikvm(1114): VFY: unable to resolve const-class 1927 (Lcom/yyy/zzz/MyMapActivity1;) in Lcom/yyy/zzz/MyMainActivity$6;
W/dalvikvm(1114): Unable to resolve superclass of Lcom/yyy/zzz/MyMapActivity2; (1165)
W/dalvikvm(1114): Link of class 'Lcom/yyy/zzz/MyMapActivity2;' failed
E/dalvikvm(1114): Could not find class 'xxx.yyy.zzz.MyMapActivity2', referenced from method xxx.yyy.zzz.MyMainActivity$7.onClick
W/dalvikvm(1114): VFY: unable to resolve const-class 1835 (Lcom/yyy/zzz/MyMapActivity2;) in Lcom/yyy/zzz/MyMainActivity$7; 
```

如您所见，这些错误仅适用于我的 MapActivities，并且仅在恢复过程之后。如果我直接重新启动我的应用程序，一切正常，包括恢复的数据。那么有谁知道为什么仅在 MapActivity 并且仅在还原过程之后才抛出“找不到类”？我应该注意到这仅在 Android 4 上发生。在我的 Android 2.3.4 的 Atrix 手机中，数据恢复工作正常（使用 LocalTransport）。这真的很奇怪...... :-|

**EDIT3：**当启动器活动是 MapActivity 时，我创建了一个小型 Eclipse 项目来测试备份/恢复服务。它是用谷歌 API17 构建的。你可以从[这里](https://www.dropbox.com/s/y9yyn0wbqnqm0i7/MyBackupManagerExample.rar)下载。我已经在带有 Google API10 的模拟器中测试了这个项目，效果很好。但是，在具有 Google API14 的模拟器中，一旦完成恢复，就会引发 ClassNotFoundException。该项目有一个按钮，可以将您在 EditText 上编写的任何文本保存到用户首选项。所以要测试它：

1.  在 EditText 中输入文本
2.  按下按钮保存并退出应用程序
3.  使用 bmgr 工具强制备份
4.  卸载应用程序，然后从 Eclipse 重新安装。

调用 onRestore 后，会抛出 ClassNotFoundException。最后，我应该注意，如果您将 MapActivity 替换为简单的 Activivy，则恢复成功。

让我知道是否有人尝试过。顺便说一句，完全相同的问题已经发布[在这里](https://stackoverflow.com/questions/14739630/android-backup-agent-and-sherlockmapactivity)，到目前为止还没有答案。这是一个错误吗？是否应该被举报？

**EDIT4：**作为 EDIT2 的延续，我在其中添加了一个初始虚拟 Activity，在深入研究问题的同时，我发现：如果在恢复后，我只需从我的虚拟 Activity 启动我的 MapActivity，然后抛出 NoClassDefFoundError 并且应用程序崩溃，但在下一次应用启动时工作正常（如前所述）。但是，如果我捕获 NoClassDefFoundError（因此不允许应用程序崩溃），那么即使我重新启动应用程序，也会继续抛出 NoClassDefFoundError！怎么可能？我在 Android 项目中打开了一个问题，你可以在[这里](https://code.google.com/p/android/issues/detail?id=53607)找到它。

# javascript - 使用 REST 端点检索实体中的自定义实体的 ODataSetName

> ID：15505998
> 
> 赞同：2
> 
> 时间：2013-03-19T17:06:38.253
> 
> 标签：javascript, ajax, dynamics-crm-2011, odata

[在我的 restendpoint.js 中，我有这里](http://dynamics2011.blogspot.com/2012/03/crm-2011-and-odata-retrieve-example.html)定义的 retrieveRecord 函数

我有一个功能应该在应用程序实体上的程序（查找字段）更改时运行。它基本上应该检索程序记录的属性。

我对 oDataSetName 应该是什么感到有些困惑？

我的实体的显示名称是 Program 实体的名称是 ntt_programme

我已经尝试过 ProgrammeSet 和 ntt_ProgrammeSet 但没有成功。ajax 调用导致失败回调方法，即在我的情况下我收到警报`In ProgrammeErrorCallBack`

1.  为什么会导致回调方法失败？
2.  oDataSetName 应该是什么以及它在 CRM 中的确切存储位置 - 是否总是 EntityName 后跟 Set？

我在这里有点迷路，因为我对 JS / AJAX / REST / JSON 完全陌生！

* * *

```
ProgrammeOnChange: function () {
    var programmeLookup = Xrm.Page.getAttribute("new_programmeid").getValue();
    if (programmeLookup != null && programmeLookup[0] && programmeLookup[0].name != null) {
        var programmeId = programmeLookup[0].id;
        alert(programmeId);
        var oDataSetName = "ProgrammeSet";
        CRM2011Common.Functions.retrieveRecord(programmeId, oDataSetName, CRM2011.Application.ProgrammeSuccessCallBack, CRM2011.Application.ProgrammeErrorCallBack);
    }
},

ProgrammeSuccessCallBack: function (result) {
    alert("In ProgrammeSuccessCallBack");
    var programme = result;
    alert(programme.new_name);
},

ProgrammeErrorCallBack: function (XmlHttpRequest, textStatus, errorThrown) {
    alert("In ProgrammeErrorCallBack");
    alert('Error retrieving Programme: ' + textStatus + ' ' + errorThrown);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:13:33.237

我猜你有一个大小写问题。它应该是`ntt_programmeSet`，或与之相等的东西，但大小写不同。

我总是建议先使用[LinqPad](http://www.linqpad.net/)测试 REST oData 调用。它可以防止您因外壳问题而出现任何错误。您可以创建到 CRM SDK 端点的新 odata 连接，然后编写 linq 语句来拉回信息。如果您单击 Lambda 符号，它将为您提供 odata URL。只要您的 javascript 生成准确的 url，您就应该很好。

# php - 使用 GROUP BY 的 MySQL 查询太慢

> ID：15505999
> 
> 赞同：0
> 
> 时间：2013-03-19T17:06:40.993
> 
> 标签：php, mysql

我有两张桌子：`posts`和`categories`。有`posts table`大约`360,000 lines`。

我只想显示每个类别的第一篇文章，按日期排序并使用分页。

查询：

```
SELECT * FROM 
   (SELECT * FROM posts ORDER BY date_post DESC) as temp 
   GROUP BY id_category ORDER BY date_post DESC 
   LIMIT $offset, $limit" 
```

该查询大约需要 1 分钟才能加载并显示我的网站。

我尝试将 MyISAM 更改为 InnoDB 并使用分区但没有成功。

托管网站的服务器是专用服务器，我相信问题不在于它。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:11:49.740

您可以按如下方式简化查询：

```
 SELECT * 
   FROM posts
   GROUP BY id_category
   ORDER BY date_post DESC 
   LIMIT $offset, $limit 
```

我不确定你想用子查询完成什么。也不确定是否需要 GROUP BY，但把它留在了那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:12:39.880

您需要重构查询：

```
SELECT posts.* FROM
(
    SELECT id_category,MAX(date_post) date_post
    FROM posts GROUP BY id_category
) postkeys LEFT JOIN posts USING (id_category,date_post); 
```

这应该为您提供每种产品以及该产品的最新帖子。

# 警告

我故意将 LIMIT 子句移动到子查询中，以生成所需的 id 范围。这工作非常非常快！

我已经为 YouTube 视频学习了这项技术：[http ://www.youtube.com/watch?v=ZVisY-fEoMw&feature=share&list=PL0194B59719B45A96](http://www.youtube.com/watch?v=ZVisY-fEoMw&feature=share&list=PL0194B59719B45A96)

我将此应用于我在 StackOverflow 中回答的帖子问题：[Fetching a Single Row from Join Table](https://stackoverflow.com/questions/5983156/fetching-a-single-row-from-join-table/6023217#6023217)

试试看 ！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:26:08.353

您的查询不正确，因为您[在 GROUP BY 查询中使用了非聚合列](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)，并且这些列的值可能是不确定的（您不能保证您将获得第一篇文章）。

不知道它是否更快，但如果你确定没有多个帖子具有相同的时间戳，你可以使用这个：

```
SELECT posts.*
FROM
  posts INNER JOIN (
    SELECT
      id_category, MAX(date_post) mx_date
    FROM
      posts
    GROUP BY
      id_category
  ) mx ON posts.id_category=mx.id_category
          AND posts.date_post=mx.mx_date
ORDER BY
  posts.date_post DESC
LIMIT $offset, $limit 
```

请[在此处](http://sqlfiddle.com/#!2/29f34/1)查看小提琴。

当然，请确保您有一个索引 on`id_category`和 on `date_post`。如果你想考虑一个事实，多个帖子可以共享相同的时间戳，我们需要一个 id，我们需要再添加一个 join。