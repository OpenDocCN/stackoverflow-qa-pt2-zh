# StackOverflow 问答 12890000-12890999

# c++ - 将一串数字解析为整数数组

> ID：12890001
> 
> 赞同：1
> 
> 时间：2012-10-15T05:53:33.003
> 
> 标签：c++, arrays, string, parsing, csv

我有一个文本文件，其数字范围为 0-255，以逗号分隔。我希望能够将这些数字中的每一个存储到一个整数数组中。文本文件可能包含的一个示例是；“32,51,45,12,5,2,7,2,9,233,132,175,143,33……”等

我设法让我的程序将文本文件中的数据存储为字符串并将它们输出到屏幕上。接下来我需要做的是将该字符串的值存储在一个整数数组中，用逗号分隔数字。

这是我到目前为止编写的代码，但我在让它工作时遇到了问题；

```
int _tmain(int argc, _TCHAR* argv[])
{
   string line;
   ifstream myfile ("example.txt");
   if (myfile.is_open())
   {
       while ( myfile.good() )
       {
           getline (myfile,line);
           cout << line << endl;
       }
       myfile.close();
   }

   else cout << "Unable to open file"; 

//STRING CONVERSION
std::string str = line;
std::vector<int> vect;

std::stringstream ss(str);

int i = 0;

while (ss >> i)
{
    vect.push_back(i);

    if (ss.peek() == ',')
        ss.ignore();
}

system("pause");
return 0; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T06:23:38.020

看起来您用于标记字符串的代码有点不对劲。特别是，您需要确保在整数字符串上调用 atoi() 以获取整数。不过，我将专注于字符串的解析。

您可以使用的一件事是 C 的[strtok](http://en.cppreference.com/w/cpp/string/byte/strtok)。我推荐这个主要是因为你的情况很简单，这可能是最简单的方法。

您要查找的代码基本上是这样的：

```
char* numStr = strtok(str.c_str(), ",");
while (numStr)
{
    vect.push_back(atoi(numStr));
    numStr = strtok(NULL, ",");
} 
```

strtok() 有两个参数：一个指向要标记的 C 样式字符串 (char*) 的指针，以及分隔符字符串（请注意，分隔符字符串中的每个字符都被视为自己的分隔符）。

我应该提到 strtok 不是线程安全的，您还必须确保从文件中提取的字符串以 null 字符结尾`\0`。

[这个问题](https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c)的答案为我的解决方案提供了许多替代方案。如果您更喜欢使用，`std::stringstream`那么我建议您查看该页面上的第 5 个答案。

关于 PDB 的问题，您遇到的确切错误是什么？

# scheme - 矩阵的方案流

> ID：12890002
> 
> 赞同：0
> 
> 时间：2012-10-15T05:53:37.933
> 
> 标签：scheme, sicp, r5rs

我想在方案中有一个流，它包含一堆具有一定顺序的矩阵。

该流的流车将是矩阵 [1 6 0 3]；也就是说，第 1 行 col 1 为 1，第 1 行 col 2 为 6，第 2 行 col 1 为 0，第 2 行 col 2 为 3。每个矩阵在技术上都是一个列表，但我有一个表示（构造函数和选择器）一个 2x2 矩阵。因此，这将是一个 2x2 矩阵流。

现在，流中的下一项应该是 [2 10 0 5]。这里的模式是下一个流中的矩阵增加如下： [k (4k+2) 0 (2k+1)] 其中 k 是第 k 个矩阵。

我有一个想法，我想如何存储这些。例如，我知道我可以通过以下方式获得连续的流：

```
(define ones (cons-stream 1 ones)) 
```

和一个连续的整数流：

```
(define integers (cons-stream 1 (add-streams ones integers))) 
```

所以，我想要一个上述格式的连续矩阵流。也就是说，第一个（汽车流）将是由 [1 6 0 3] 表示的矩阵，然后是由 [2 10 0 5] 表示的矩阵，然后是由 [3 14 0 7] 表示的矩阵。

所以，我知道它会是这样的：

```
(define start-matrix '(1 6 0 3))

(define init-stream (cons-stream start-matrix 
                             (add-streams ___________
                                          init-stream))) 
```

下划线是“我认为”是缺失的部分。我已经从这篇文章中删除了“添加流”程序来清理我的帖子。

***编辑：意识到我认为我的“开始矩阵”必须是 1 6 0 3，而不是 1 4 0 2。

但是必须有一种方法可以将 1 4 0 2 添加到第 k 个矩阵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:26:02.080

好的，首先，您意识到您必须定义自己的**add-streams**版本来进行矩阵加法？（我意识到这可能是您编辑掉的内容）。

其次，您看不出 SICP 示例和您的版本之间缺少什么吗？在 SICP 示例中，有一个函数提供恒定的 1 流。1 是添加到**整数**流的每个新元素的内容。现在，您要向**init-stream**流的每个新成员添加一些内容。你肯定能弄清楚那是什么？我的意思是，如果你每次都添加它并且你做了k次......（你提到它很多次，你必须知道它是什么）。因此，您所缺少的只是一个功能，该功能可以提供源源不断的那件事。

第三，您知道为什么 SICP 示例会从 one 流中添加新元素**，**而不是每次都添加 1 吗？（有一个原则被证明）。

Fourthly, do you see that **init-stream** is not a good name for this function? **init-stream** indicates a general purpose function, whereas you are defining something that returns a very specific stream. Why not just follow the SICP naming examples and name it for what it returns?

My third and fourth questions needn't be answered for you to solve your problem; I'm just interested to know if you grasp the point.

# c - 替换字符串中的字符

> ID：12890008
> 
> 赞同：6
> 
> 时间：2012-10-15T05:54:17.763
> 
> 标签：c, string, character

> **可能重复：**
> [在 C 中替换字符串的函数是什么？](https://stackoverflow.com/questions/779875/what-is-the-function-to-replace-string-in-c)

我正在尝试用多个字符替换字符串中的某个字符。这是我正在尝试做的一个例子。

假设我有字符串“aaabaa”

我想用 5 个“c”替换所有出现的字符“b”。

所以当我完成时，“aaabaa”变成了“aaacccccaa”

我写了以下代码：

```
#include <stdio.h>
#include <string.h>
int main(void)
{
    char s[20] = "aaabaa";
    int i, j;
    for (i=0; s[i]!= '\0'; i++)
    {
        if (s[i] == 'b')
        {
            for (j=0; j<5; j++)
            {
                s[i+j] = 'c';
            }
        }
    }
    printf("%s\n", s);
} 
```

我这个函数的输出是“aaaccccc”。它似乎只是用 c 覆盖了最后两个 a。有什么办法可以让最后几个 a 不会被覆盖？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T06:03:27.010

如果你想在一般情况下这样做，而不用担心尝试调整缓冲区的大小，你应该`malloc`使用一个足够大的新字符串来保存结果：

```
/* return a new string with every instance of ch replaced by repl */
char *replace(const char *s, char ch, const char *repl) {
    int count = 0;
    const char *t;
    for(t=s; *t; t++)
        count += (*t == ch);

    size_t rlen = strlen(repl);
    char *res = malloc(strlen(s) + (rlen-1)*count + 1);
    char *ptr = res;
    for(t=s; *t; t++) {
        if(*t == ch) {
            memcpy(ptr, repl, rlen);
            ptr += rlen;
        } else {
            *ptr++ = *t;
        }
    }
    *ptr = 0;
    return res;
} 
```

用法：

```
int main() {
    char *s = replace("aaabaa", 'b', "ccccc");
    printf("%s\n", s);
    free(s);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T05:59:30.810

您的问题是您将“ccccc”替换为原始字符串，从而在您希望替换的内容之后覆盖剩余的字符......您应该复制到一个新字符串并跟踪两个索引 - 每个索引一个。

并且很高兴您声明`char s[20]`的大小大于原始字符串的大小加上替换值，否则您会在关键登录系统中创建缓冲区溢出漏洞:-)

干杯，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T06:07:08.170

有必要声明第二个 char 数组。在下面的代码中，它只是在条件失败时将数组 s 的内容复制到 s1。

```
#include <stdio.h>
#include <string.h>
int main(void)
{
  char s[20] = "aaabaa";
  char s1[1024];
  int i, j, n;
  for (i=0, n = 0; s[i]!= '\0'; i++)
  {
    if (s[i] == 'b')
    {
        for (j=0; j<5; j++)
        {
            s1[n] = 'c';
            n++;
        }
    }
    else
    {
        s1[n] = s[i];
        n++;
    }
}
s1[n] = '\0';
printf("%s\n", s1);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T06:09:34.580

您可以使用不同的变量

```
#include <stdio.h>
#include <string.h>
int main(void)
{
    char s[20] = "aaabaa";
    char temp[20]="";
    int i, j,k;
    k=0;
    for (i=0; s[i]!= '\0'; i++)
    {
        if (s[i] == 'b')
        {
            for (j=0; j<5; j++)
            {
                temp[k] = 'c';
                k++;
            }
        }
        else
        {
            temp[k]=s[i];
            k++
        }
    }
    printf("%s\n", temp);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T08:53:15.400

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    char temp[20];
    char s[20] = "aaabaa";
    int i, j;
    for (i=0; s[i]!= '\0'; i++)
    {
        if (s[i] == 'b')
        {
            strcpy(temp,s[i+1]); //copy rest of the string in this case 'aa'
            for (j=0; j<5; j++)
            {
                s[i+j] = 'c';
            }
            s[i+j] = '\0';   // here we get s = "aaaccccc"
            strcat(s,temp); // concat rest of the string (temp = "aa") after job is done. 
                           //  to this point s becomes s = "aaacccccaa"
        }
    }
    printf("%s\n", s); //s = "aaacccccaa". 
} 
```

在这里，我们使用缓冲区（temp）来存储我们要替换的字符之后的字符串的其余部分。替换完成后，我们将其附加到末尾。

所以我们得到 s = "aaacccccaa"

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T06:01:35.073

好吧，如果您要动态分配数组，您可能必须分配第二个数组。这是必要的，因为您的字符串 s 仅分配了固定数量的内存。

因此，我建议不要尝试覆盖 for 循环中的字符，而是增加一个计数器，告诉您新数组必须有多大。您的计数器应该从原始字符串的大小开始，每次找到 'b' 的实例时递增 4。然后，您应该能够编写一个函数，将修改后的字符串适当地复制到大小为 [counter] 的新字符缓冲区，每次找到“b”时插入 5 个 c。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-15T05:57:56.130

使用此功能：

```
char *replace(char *st, char *orig, char *repl) {
  static char buffer[4096];
  char *ch;
  if (!(ch = strstr(st, orig)))
   return st;
  strncpy(buffer, st, ch-st);  
  buffer[ch-st] = 0;
  sprintf(buffer+(ch-st), "%s%s", repl, ch+strlen(orig));
  return buffer;
  } 
```

对于您的情况：`printf("%s\n", replace(s,"b","ccccc"));`

# android - 我可以为android设计角度移动菜单吗？

> ID：12890009
> 
> 赞同：-2
> 
> 时间：2012-10-15T05:54:19.660
> 
> 标签：android, android-layout

我可以为android设计角度移动菜单吗？

![在此处输入图像描述](../Images/9ca895efbbd56f2f9acbe5e96d6af78f.png)此图供参考。按钮应在角度路径上滚动，并且居中的按钮应始终聚焦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:02:49.327

是的，你当然可以。xml布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="Back" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/button1"
            android:layout_marginLeft="26dp"
            android:layout_marginTop="23dp"
            android:layout_toRightOf="@+id/button1"
            android:text="Next" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/button2"
            android:layout_marginLeft="16dp"
            android:layout_marginTop="17dp"
            android:layout_toRightOf="@+id/button2"
            android:text="Button" />

        <Button
            android:id="@+id/button4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:text="Button" />

</RelativeLayout> 
```

# visual-studio - 加载项项目中临时密钥文件的意义是什么？

> ID：12890017
> 
> 赞同：2
> 
> 时间：2012-10-15T05:54:48.927
> 
> 标签：visual-studio, pfx

当我使用 VS10（甚至很可能还有其他版本）为 Outlook 创建新的加载项时，我看到 IDE 为我创建了一个文件：`OutlookAddIn1_TemporaryKey.pfx`.

它可以通过 Crypto Shell Extensions 打开，据我记得我还没有检查任何与任何密码学有关的东西。我可以安全地删除它吗？

在同一个目录下我也有`OutlookAddIn1_1_TemporaryKey.pfx`，这让我怀疑VS10的帮手糊涂了。我知道 VS 喜欢创建一堆文件来控制情况，我可以忍受。话虽如此，我想知道我是否需要例如版本控制或分发那些 PFX 文件。那是怎么回事？

# mysql - 如何开始使用类似于 MySQL 的 PostgreSQL

> ID：12890018
> 
> 赞同：2
> 
> 时间：2012-10-15T05:55:12.983
> 
> 标签：mysql, postgresql-9.2

我不知道：

1.  只需登录到 postgreSQL
2.  创建数据库
3.  添加表格
4.  插入记录
5.  删除、更新等

这些事情通常使用 mysql 非常容易。有人可以帮我设置以下替代 postgresql

a)[重置](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)默认密码——非常简洁的描述，我没有发现 PostgreSQL 的清晰程度相同（非常感谢任何文档链接）

b) 我们知道 mysql 的超级用户是“root”，PostgreSQL 也是如此

c）从命令行如何（PostgreSQL的？）：

```
 mysql -uroot -proot  
   create database testdb; 
   use testdb;
   create table test(id int(11) auto_increment, name varchar(20), primary key(id));
   insert into test(name) values("testing one"),("testing two"),("testing three"),("testing four");
   select * from test;
   update test set name=concat(name,now()) where id =3;
   delete from test where id =4;
   drop table if exists test;
   drop database if exists testdb; 
```

**EDIT MAC OS** # 默认密码重置

```
sudo mate /Library/PostgreSQL/9.2/data/pg_hba.conf 
```

替换（信任的md5）

```
# "local" is for Unix domain socket connections only
local   all             all                                     md5
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5 
```

和

```
# "local" is for Unix domain socket connections only
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust 
```

节省

执行了重新加载配置.app

```
 login to postgresql without password : 
  $ psql -U postgres
  postgres# ALTER USER postgres WITH PASSWORD 'new password';
  \q 
```

-revert back all the changes in pg_hba.conf (用 md5 替换 trust) 并保存

-重新加载配置

现在我可以用新密码登录到 postgresql

`psql -U postgres`

`Password for user postgres:[my new password]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:11:16.063

登录：

```
psql -d postgres_dbname -U postgres 
```

创建数据库：

```
create database  testuser;

\c testuser;  /*use testuse as mysql*/ 
```

创建表：

```
create table employee (Name char(20)); 
```

插入 ：

```
 insert into employee VALUES ('XAS'); 
```

[更新链接](http://www.postgresql.org/docs/8.1/static/sql-update.html)

[删除链接](http://www.postgresql.org/docs/8.2/static/sql-delete.html)

`Reset Password :` [看这里](http://bayurimba.wordpress.com/2012/02/14/how-to-change-postgresql-root-password/)也 [看这里](http://linuxadminzone.com/recover-or-reset-root-password-of-mysql-and-postgresql-servers/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T06:07:18.857

只需登录到 postgreSQL

```
psql -U postgres -W template1
-U = username
postgres is root 
-W = ask for password
tempalte1 = default database 
```

创建数据库

```
-- Create the database from within postgresql
create database my_database_name
-- Connect to the database
\c my_database_name

-- Create the database without logging in
createdb -U postgres -W my_database_name 
```

1.  添加表格
2.  插入记录
3.  删除、更新等

以上从 3 到 5 都和 MySQL 一样

对于重置 postgres 忘记密码[，此链接](http://wiki.spry.com/Change_forgotten_PostgreSQL_password)是一个很好的参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T06:14:20.640

postgresql 是一个与 mysql 完全不同的系统；所以不要假设事情会像mysql。它们是完全不同的动物；您的某些 SQL 语句可能不起作用，尤其是在您使用 MySQL 专有命令时。

1.  要登录到 postgresql，请使用[`psql`命令 shell](http://www.postgresql.org/docs/7.4/static/app-psql.html)
2.  [`CREATE DATABASE`](http://www.postgresql.org/docs/8.3/static/sql-createdatabase.html)
3.  [`CREATE TABLE`](http://www.postgresql.org/docs/8.3/static/sql-createtable.html)
4.  [`INSERT`](http://www.postgresql.org/docs/8.3/static/sql-insert.html)
5.  对于所有其他基本 SQL 命令，请考虑阅读本[教程](http://www.postgresql.org/docs/8.3/static/tutorial-sql.html)

用户访问控制在 postgresql 中是更细粒度和详细的。有用户和角色。用户只是具有登录能力的角色（如 MySQL），但在 postgresql 中，您可以拥有无​​法登录的角色（*帐户*）。

角色的访问权限在 中定义[`pg_hba.conf`](http://www.postgresql.org/docs/8.3/static/auth-pg-hba-conf.html)。这个文件定义了一个角色是否可以登录，他们通过什么方式进行身份验证，他们可以从哪里登录以及他们可以访问什么数据库。

[`ALTER USER`](http://www.postgresql.org/docs/8.3/static/sql-alteruser.html)用于重置凭据。

postgresql 的“root 用户”通常是`postgres`; 这是在安装过程中创建的系统用户。对于 Windows，二进制安装程序将询问您是否也想以该用户身份启动该服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-20T23:44:39.760

请看一下这个[PostgreSQL 错误“无法连接到服务器：没有这样的文件或目录”](https://stackoverflow.com/questions/12472988/postgres-could-not-connect-to-server-no-such-file-or-directory)

尝试安装 postgresApp，这解决了我和你一样的问题。

# oracle - 如何编写可重用函数以从查询中返回 CSV 输出？

> ID：12890026
> 
> 赞同：1
> 
> 时间：2012-10-15T05:55:29.603
> 
> 标签：oracle, csv, plsql, code-reuse

在我的应用程序的许多地方，我需要将数据显示为 CSV。

为此，我通常会遍历游标并构建 CSV。

```
for j in c_get_mydata loop
    v_CSV := v_CSV || ', ' || j.column_value;
end loop; 
```

如何编写一个可以接受查询并返回 CSV 字符串的可重用函数？你建议把它作为一个单独的函数，还是像上面那样处理每个查询更好？如果您建议将其作为一个单独的函数，您是否建议该函数将查询字符串或结果光标作为输入？

**编辑：**

澄清：我想将单列数据显示为一行，用逗号分隔。

例如：`Tom, Dick, Harry, Sally`

我不希望在多行上显示多列数据：

```
Tom, 18, London
Dick, 22, New York
Harry, 16, San Fransisco
Sally, 18, Paris 
```

**编辑2：**

我发现了收集功能：

从员工中选择收集（员工姓名）

这会返回一个数据集，但如何将其转换为字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T06:11:28.530

最简单的选择通常是使用`DBMS_SQL`包。Tom Kyte 的[`dump_csv`程序](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:68212348056)就是一个很好的例子。当然，您可能希望将结果写入 CLOB，而不是将其写入文件，`utl_file`但这是一个相对容易的调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-23T12:37:30.097

老问题并且已经正确回答了我知道，但由于这是“oracle cursor to csv”的热门谷歌点击之一，我刚刚写了一些东西来做到这一点，我想我会发布一个新的答案。

从 Oracle 11.2 开始，DBMS_SQL 可以处理普通的引用游标，而不仅仅是像 Tom Kyte 的 2000 解决方案中的字符串。您使用将其摄取到 DBMS_SQL

```
l_cursor_id := dbms_sql.to_cursor_number(your_refcursor); 
```

（`l_cursor_id`然后将包含一个无意义的生成数字，DBMS_SQL 使用它来跟踪其相应的内部值。）

由于 ref 游标已经打开并解析，您跳过这些步骤并调用

```
dbms_sql.describe_columns(l_cursor_id, l_col_count, l_cursor_columns); 
```

其中`l_cursor_columns`（DBMS_SQL 为您填充的 ​​OUT 参数）是 a `dbms_sql.desc_tab`，它是一个列定义数组，其中填充了查询中每一列的条目并包含列名、数据类型等，并且`l_col_count`有些冗余地包含与`l_cursor_columns.count`. 然后，您需要遍历这个数组调用`dbms_sql.define_column`，以告诉 DBMS_SQL 使用它刚刚告诉您的数据类型来处理每一个，这是一个相当冗长的步骤，我永远看不到重点。（它确实允许您将所有`'%CHAR%'`类型视为`varchar2`etc，所以我想它允许一些灵活性。）

那么这只是一个`dbms_sql.fetch_rows`循环调用并处理结果的问题。我把它放在一个接受 ref 游标参数的流水线表函数中，所以你会得到这样的结果：

```
select column_value
from   table(csv.report(cursor(
           select * from dept  -- << Use any query here
       )));

COLUMN_VALUE
----------------------------------------------
10,ACCOUNTING,NEW YORK
20,RESEARCH,DALLAS
30,SALES,CHICAGO
40,OPERATIONS,BOSTON

4 rows selected. 
```

完整的文章和代码在这里： [www.williamrobertson.net/documents/refcursor-to-csv.shtml](http://www.williamrobertson.net/documents/refcursor-to-csv.shtml)

# mysql - 显示重复的行号

> ID：12890028
> 
> 赞同：0
> 
> 时间：2012-10-15T05:55:33.713
> 
> 标签：mysql, sql, duplicates

我将一个表加入到自身中以查找重复的行

```
select a.data, a.rowNumber, b.rowNumber
from DuplicateRows as a
join DuplicateRows as b 
on
a.data = b.data and a.Id != b.Id
group by a.data, a.rowNumber, b.rowNumber 
```

此查询给出的结果如下

```
"content" | 1 | 2
"content" | 1 | 6
"content" | 2 | 1
"content" | 2 | 6 
...and so on 
```

为什么我重写它以形成类似的结果

```
"content" | 1 | 2, 6 
```

**编辑**

我认为这个问题应该稍微纠正一下。你看我不想得到相反的结果，我的意思是我只想得到一个条目

```
`1 -> 2, 6` 
```

不是

```
`1 -> 2, 6 and `2 -> 1, 6` 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T05:57:49.770

采用`GROUP_CONCAT`

```
SELECT  a.data, 
        a.rowNumber, 
        GROUP_CONCAT(b.rowNumber)
FROM    DuplicateRows AS a
        INNER JOIN DuplicateRows AS b 
            ON  a.data = b.dataAND a.Id != b.Id
GROUP BY a.data, a.rowNumber 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/bee43/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T06:17:05.673

根据您的最新编辑，我认为这就是您需要的：

```
SELECT a.data, a.a, GROUP_CONCAT( DISTINCT b.a)
FROM TableName as a
JOIN TableName as b 
    ON a.data = b.data AND a.a < b.a
GROUP BY a.data 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/cbc13/6)

# 附言

我稍微使用（和修改）了吴宇森的桌子。

# 编辑

此查询的相对较好的结果：

```
SELECT a.data, MIN(a.rowNumber), GROUP_CONCAT( DISTINCT b.rowNumber)
FROM DuplicateRows AS a
JOIN DuplicateRows AS b 
  ON a.data = b.data AND a.rowNumber < b.rowNumber
GROUP BY a.data 
```

小提琴就[在这里](http://sqlfiddle.com/#!2/898026/6)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T05:58:03.687

在 mysql 中尝试 GROUP_CONCAT 函数

```
select a.data, a.rowNumber, group_concat(b.rowNumber)
from DuplicateRows as a
join DuplicateRows as b 
on
a.data = b.data and a.Id != b.Id
group by a.data, a.rowNumber, b.rowNumber 
```

# java - 测试应用程序生命周期、销毁和创建

> ID：12890030
> 
> 赞同：1
> 
> 时间：2012-10-15T05:55:40.767
> 
> 标签：java, android, unit-testing

我需要测试我的应用程序生命周期及其销毁和重新创建，因为当键盘滑入/滑出（或旋转）时，应用程序被销毁并重新创建。当它这样做时，我还需要测试内存泄漏。

我在教程中看到[http://developer.android.com/tools/testing/activity_test.html#StateManagementTests](http://developer.android.com/tools/testing/activity_test.html#StateManagementTests)

```
Terminate the activity and restart it:
mActivity.finish();
mActivity = this.getActivity(); 
```

然而，这是非常简化的。我的日志似乎表明调用finish() 会产生一个具有不同线程ID 的后台线程，然后调用onPause()、finish()、onStop() 和onDestroy()。我什`getInstrumentation().waitForIdleSync();`至尝试等待该后台线程完成，但是当我测试预期值时，我仍然会遇到竞争条件。

不仅如此，当它使用 getActivity() 重新创建 Activity 时（当第一个竞争条件没有发生或我注释掉断言时），它只会返回与我刚刚完成的完全相同的对象！我可以说是因为我登录`this`了我的 onXXX...() 方法。

这与方向旋转/键盘滑动应用程序生命周期不同，它总是创建一个新的 Activity 对象。

那么如何测试这种破坏/轮回场景呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:13:40.280

我所知道的复制方向变化的唯一方法就是实际去做。（键盘#7 键）也许你真正想要的是防止应用程序在方向改变时被杀死......;）你可以通过覆盖你的活动中的 onConfigurationChanged() 函数来做到这一点。见：http: [//developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:32:28.880

好的，我找到了！它涉及很多 waitForIdleSync()，因为它是多线程的，并且 setActivity(null)。我只能获得相同内存的 +- 30%。我也想感谢 Peter Carpenter，因为他的想法加速了我的应用程序，我从来没有想过这一点！

```
public void testMemoryLeaks() {
    Log.e(TAG, "------------ testMemoryLeaks()");
    getInstrumentation().waitForIdleSync();
    System.gc();
    Main mActivity = getActivity();
    Log.d(TAG, "-- Extractor.stop() "+mActivity.getExtractor());
    mActivity.getExtractor().stop();
    getInstrumentation().waitForIdleSync();
    System.gc();
    long mem = Runtime.getRuntime().freeMemory();
    Log.d(TAG, "-- freeMemory: " + mem);
    Log.d(TAG, "-- mActivity.finish()");
    mActivity.finish();
    getInstrumentation().waitForIdleSync();
    Log.d(TAG, "-- setActivity()");
    setActivity(null);
    getInstrumentation().waitForIdleSync();
    System.gc();
    Log.d(TAG, "-- getActivity()");
    mActivity = getActivity();
    assertTrue(mActivity != null);
    Log.d(TAG, "-- Extractor.stop() "+mActivity.getExtractor());
    mActivity.getExtractor().stop();
    getInstrumentation().waitForIdleSync();
    System.gc();
    long memAfter = Runtime.getRuntime().freeMemory();
    Log.d(TAG, "-- freeMemory: " + memAfter);
    assertTrue("Memory leak", mem > memAfter * .70 && mem < memAfter * 1.30);
    mActivity.finish();
    getInstrumentation().waitForIdleSync();
    Log.d(TAG, "-- end testMemoryLeaks()");
} 
```

# wpf - 如何根据当前屏幕设置窗口样式？

> ID：12890039
> 
> 赞同：0
> 
> 时间：2012-10-15T05:56:43.507
> 
> 标签：wpf, styles, touch

我正在开发一个有多个窗口的应用程序。根据工作站配置，可能会有一个或多个屏幕，其中可能包括一个小触摸屏。

如果窗口在触摸屏上，我想更改一些控件样式。这对于可能太小而无法用指尖可靠击中的按钮尤其有趣。

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:05:23.253

您可以查看 MVVM 设计模式。它旨在将 UI 的呈现与数据和命令分开。在 MVVM 术语中，您将拥有一个具有处理按钮按下等功能的 ViewModel 和两个 View，每个屏幕类型一个。MVVM 框架可以帮助您在每个屏幕上显示正确的视图。我已经使用[Caliburn.Micro](http://caliburnmicro.codeplex.com/ "Caliburn.Micro")来实现类似的功能。

# java - 需要正则表达式来匹配给定的字符串

> ID：12890048
> 
> 赞同：2
> 
> 时间：2012-10-15T05:57:28.690
> 
> 标签：java, regex

我需要一个正则表达式来匹配特定的字符串，比如`1.4.5`下面的字符串。我的字符串会像

```
absdfsdfsdfc1.4.5kdecsdfsdff 
```

我有一个正则表达式`[c1.4.5k]`作为输出。但我只想匹配`1.4.5`。我试过这种模式：

```
[^\\W](\\d\\.\\d\\.\\d)[^\\d] 
```

但没有运气。我正在使用 Java。请让我知道模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:35:45.300

当我正确阅读您的表达`[^\\W](\\d\\.\\d\\.\\d)[^\\d]`时，您需要一个单词字符而不是前面的数字。那是对的吗？

为此，您可以使用[lookbehind 和lookahead assertions](http://www.regular-expressions.info/lookaround.html)。这些断言只检查它们的条件，但它们不匹配，因此结果中不包含这些东西。

```
(?<=\\w)(\\d\\.\\d\\.\\d)(?!\\d) 
```

因此，您可以删除捕获组。您也在模式中重复自己，您也可以简化它：

```
(?<=\\w)\\d(?:\\.\\d){2}(?!\\d) 
```

这将是我的模式。（这`?:`是一个非捕获组）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:37:18.517

使用向前看和向后看。

```
(?<=c)[\d\.]+(?=k) 
```

其中 c 是紧接在 1.4.5 之前的字符，k 是紧接在 1.4.5 之后的字符。您可以用任何适合您目的的正则表达式替换 c 和 k

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:46:00.350

```
String str= "absdfsdfsdfc**1.4.5**kdec456456.567sdfsdff22.33.55ffkidhfuh122.33.44"; 
String regex ="[0-9]{1}\\.[0-9]{1}\\.[0-9]{1}";  
Matcher matcher = Pattern.compile( regex ).matcher( str);                    
if (matcher.find())
{
String year = matcher.group(0);

System.out.println(year);
}
else
{
    System.out.println("no match found");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T06:26:35.267

你的要求很模糊。您是否需要将一系列正好 3 个数字与正好两个点匹配？

```
[0-9]+\.[0-9]+\.[0-9]+ 
```

可以写成

```
([0-9]+\.){2}[0-9]+ 
```

您是否需要匹配 x 多个大小写的数字，中间用 x-1 个点分隔？

```
([0-9]+\.)+[0-9]+ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T06:03:35.050

我认为这个应该这样做：`([0-9]+\\.?)+`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T06:03:37.547

正则表达式

```
((?<!\d)\d(?:\.\d(?!\d))+) 
```

作为 Java 字符串：

```
"((?<!\\d)\\d(?:\\.\\d(?!\\d))+)" 
```

# jquery-plugins - 当 JSON 为 DataSource 时在 jquery 数据表列中显示图像

> ID：12890049
> 
> 赞同：4
> 
> 时间：2012-10-15T05:57:38.847
> 
> 标签：jquery-plugins, datatables

我正在使用 JQuery 数据表插件来显示班级中的学生列表。插件的数据源设置为服务器端操作，它将返回一个包含这些属性（名字、姓氏、年龄、性别……）的 json 对象。我们的要求最近更改为根据学生性别显示图像（男性/女性）。

我可以加载所有数据，按照我想要的方式格式化表格，然后将其转换为 DataTable，但这是不可能的，因为我们有很多记录并且我们正在使用分页。

数据表插件中是否有任何功能可以进行后期渲染？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T06:51:16.813

使用[mRender 选项](http://datatables.net/ref#mRender)

数据表文档中的代码

```
$(document).ready(function() {
  $('#example').dataTable( {
    "aoColumnDefs": [
        {
            // `data` refers to the data for the cell (defined by `mData`, which
            // defaults to the column being worked with, in this case is the first
            // Using `row[0]` is equivalent.
            "mRender": function ( data, type, row ) {
                return data +' '+ row[3];
            },
            "aTargets": [ 0 ]
        },
        { "bVisible": false,  "aTargets": [ 3 ] },
        { "sClass": "center", "aTargets": [ 4 ] }
     ]
    } );
} ); 
```

链接到[这里的工作示例](http://datatables.net/release-datatables/examples/advanced_init/column_render.html)

编辑：实现此目的的另一种方法是使用 Daniel 指出的“fnRowCallback”。使用此[链接](https://stackoverflow.com/questions/8206419/is-it-possible-to-view-pictures-or-images-inside-datatables-and-how-does-one-goe/8214234#8214234):)

干杯！！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-18T16:56:15.450

我尝试了“mRender”并得到了我需要的东西

**查询：**

```
 $('#tblUserSalaryDetails').dataTable({
            "bJQueryUI": true,
            "bAutoWidth": false,
            "bProcessing": true,
            "bDestroy":true,
            "bPaginate": true,
            "aLengthMenu": [[5, 10, 25, 50, 100, -1], [5, 10, 25, 50, 100, "All"]],
            "iDisplayLength": 10,
            "ServerSide": true,
            "bFilter": true,
            "bScrollAutoCss": true,
            "bSort": true,
            "bInfo": false,
            "sAjaxSource": '@Url.Action("getUserDetails","Home")',
            "aoColumns": [
                        { sWidth: '2%', "mData": "Sno", "bSortable": false, "sClass": "center", "sTitle": "S.No", "bSearchable": false },
                        { sWidth: '4%', "mData": "EmpID", "sClass": "center", "sTitle": "Emp Id" },
                        { sWidth: '7%', "mData": "EmpSalary", "sClass": "center", "sTitle": "Emp Salary" },
                        {
                            "bSortable": false, "mData": null, "sTitle": "Actions", "bSearchable": false, "mRender": function () {
                                return '<img alt="Edit" src="/Content/images/ApplicationSetup/Action-edit-icon.png" title="Edit" style="height:18px;width:19px;cursor:pointer;" /> <img alt="Delete" src="/Content/images/ApplicationSetup/Trash-can-icon.png" title="Delete" style="height:18px;width:19px;cursor:pointer"  />';
                            }
                        }
            ],
            "sAjaxDataProp": "EmpSalDetails",
            "sPaginationType": "full_numbers",
            "oLanguage": {
                "sZeroRecords": "No Records Found"
            },
            "aoColumnDefs": [
             { "sWidth": "9%", "aTargets": [-1] }
            ]
        }); 
```

# javascript - 为什么这个椭圆的简单旋转会旋转太多并扭曲尺寸？

> ID：12890057
> 
> 赞同：2
> 
> 时间：2012-10-15T05:58:15.373
> 
> 标签：javascript, math, geometry, shapes, kinematics

[三个不同的人告诉](https://stackoverflow.com/questions/12889334/how-can-rotate-an-elliptical-animation-path-by-a-certain-amount-of-degrees)我，这是旋转椭圆的正确方法：

```
// Get current position on the elliptical path.
var x = Math.cos( this.timer.delta() * this.speed ) * ( this.pathWidth / 2 );
var y = Math.sin( this.timer.delta() * this.speed ) * ( this.pathHeight / 2 );

// Rotate the ellipse.
var newX = x * Math.cos( this.angle ) - y * Math.sin( this.angle );
var newY = x * Math.sin( this.angle ) - y * Math.cos( this.angle ); 
```

我正在使用计时器，以便椭圆路径上的位置随着时间的推移而循环。

当 this.angle = 0 时，路径没有变化。

但是当 this.angle 大于 0 时，椭圆不会保持它的比例。它被挤压和拉动。而且一个度数的增量之间的差异非常严重。

**编辑1：**

另外，我希望 this.angle == 0 时的路径与 180、360、540、720 等时的路径相同。

但它们都是不同的。

**编辑2：**

尽管错字已被纠正，但行为相同。

**编辑 3：**

通过将度数转换为弧度并改用它们来解决行为。

像这样：

```
this.angleRadians = this.angle * ( Math.PI / 180 ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T06:02:36.383

你的`newX`等式是错误的。你不见了`y`。

# android - Alarmmanager.setRepeating 立即触发

> ID：12890058
> 
> 赞同：4
> 
> 时间：2012-10-15T05:58:21.267
> 
> 标签：android, alarmmanager

这是我的代码：

```
cal.set(Calendar.YEAR, Calendar.MONTH, Calendar.DAY_OF_MONTH, hourOfDay, minute,Calendar.SECOND);

Intent intent=new Intent(FaceActivity.this,AlarmReceiver.class);
        PendingIntent pendingIntent=PendingIntent.getBroadcast(FaceActivity.this, 0, intent, 0);
        AlarmManager alarmManager=(AlarmManager) getSystemService(ALARM_SERVICE);
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent); 
```

这里 hourOfDay 是当前时间的一小时后。分钟可能具有相同的值。

现在这里 cal.getTimeInMillis() 设置为比当前时间晚一小时的时间。但是当我运行这段代码时，广播接收器被立即调用。谁能告诉我，我做错了什么？提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:52:05.507

终于找到了我的错误，我得到了错误的值`Year`, `Month`, `Day`, `Second`。

通过使用下面的代码，它工作得非常好。

```
cal.set(cal.get(Calendar.YEAR), cal.get(Calendar.MONTH), cal.get(Calendar.DAY_OF_MONTH), hourOfDay, minute,cal.get(Calendar.SECOND)); 
```

# zlib - 我的代码中的解压缩错误

> ID：12890061
> 
> 赞同：0
> 
> 时间：2012-10-15T05:58:32.320
> 
> 标签：zlib, unzip

我正在设计一个 zip-unzip 实用程序。我正在使用**zlib**库。**充气**和**放气**工作完美，没有任何错误。Unzip 适用于文本和 .c 文件，但是当我使用它来压缩**.mp3**或**.jpg**图像时，输出大小为**5B**。指针很完美，我已经验证过了。此错误的原因可能是什么？有没有人遇到过类似的问题？有人可以指导我吗？我已经被困在这里很长一段时间了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:08:59.457

检查库的任何其他返回代码。

一个 5 字节的块是一个明确的指标，没有什么可压缩的。这种块由一个字节代码组成，说明下一个块是“原始”，两个字节序列告诉下一个块的大小，另外两个字节是第一个长度字段的位反转。我相信调用者应该在再次调用 deflate 之前写入下一个原始数据块。

# java - java中的二分查找

> ID：12890065
> 
> 赞同：2
> 
> 时间：2012-10-15T05:59:09.170
> 
> 标签：java, arrays, search, binary

我正在尝试在 Java 中实现二进制搜索，但不起作用...不知道为什么，它总是给我一个错误，说找不到数字...

我不知道为什么，我没有看到任何错误：S 感谢您的帮助...

```
public void busquedaBinaria(int[] arreglo, int buscar) {        

        int centro = 0; //middle
        int inferior = 0;
        int superior = arreglo.length - 1;
        boolean encontrado = false; //found flag

        while(inferior <= superior)
        {
            centro = (superior + inferior) / 2;            

              if (arreglo[centro] == buscar){
                  System.out.println("-Number " + buscar + " found in the " + centro + " position.");
                  encontrado=true;
                  break;
              }
              else if (arreglo[centro] > buscar) {
                  superior = centro - 1;
              }
              else{
                  inferior = centro + 1;
              }     
              System.out.println(centro);
        }

        if (encontrado == false) {
            System.out.println("-Number " + buscar + " hasn't been found.");
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T06:02:08.627

您可以使用`Arrays#binarySearch`or `Collections#binarySearch`，它们已在库中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T06:17:31.570

这是我的贡献：

```
public class BinarySearch
{
   private static String search( String[] entries, String entry, int left, int right )
   {
      int index = ( left + right ) / 2;
      if( left > right || index >= entries.length )
      {
         return null;
      }
      int cmp   = entries[index].compareTo( entry );
      if( cmp == 0 )
      {
         return entry;
      }
      if( cmp > 0 )
      {
         return search( entries, entry, left, index - 1 );
      }
      return search( entries, entry, index + 1, right );
   }// String search( String[] entries, String entry, int left, int right )

   public static String search( String[] entries, String entry )
   {
      return search( entries, entry, 0, entries.length );
   }// String search( String[] entries, String entry )

   public static void main( String[] args )
   {
      String[] entries = new String[] { "Aubin", "Barbara", "George", "Muriel", "Sarah", "Tom" };
      for( String entry : entries )
      {
         System.out.println( search( entries, entry ));
      }
      System.out.println( search( entries, "Toto" ));
   }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T06:14:21.167

二进制搜索仅适用于已排序的数字。请确保数组**arreglo**已排序。

如果您的数组按降序排列，那么您必须稍微更改逻辑。

```
 if (arreglo[centro] == buscar){
       System.out.println("-Number " + buscar + " found in the " + centro + " position.");
       encontrado=true;   
       break; 
     } 
     else if (arreglo[centro] > buscar) { 
       superior = centro + 1;
     }
     else{ 
       inferior = centro - 1; 
     } 
```

# android - Android NDK 错误 No such file or directory for a path that exists in Eclipse

> ID：12890067
> 
> 赞同：0
> 
> 时间：2012-10-15T05:59:16.710
> 
> 标签：android, eclipse, android-ndk, native

我在 Eclipse 中收到以下错误：

```
**** Build of configuration Default for project com.opera.sdk.Opera ****

D:\android-ndk-r8b-windows\android-ndk-r8b\ndk-build.cmd all 
"Compile++ thumb : operanative <= main.cpp

In file included from jni/src/main.cpp:4:0:
jni/include/controller.hpp:6:28: fatal error: gogi_opera_api.h: No such file or directory
compilation terminated.
make: *** [obj/local/armeabi/objs/operanative/src/main.o] Error 1

**** Build Finished **** 
```

这是我的 Android.mk 生成文件：

```
MY_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_PATH := $(MY_PATH)
LOCAL_MODULE    := libopera
LOCAL_SRC_FILES := libopera.a
include $(PREBUILT_STATIC_LIBRARY)

# final library
include $(CLEAR_VARS)
LOCAL_PATH := $(MY_PATH)
LOCAL_MODULE     := operanative
LOCAL_SRC_FILES  := src/main.cpp \
                    src/controller.cpp \
                    src/lock.cpp \
                    src/event.cpp \
                    src/dialog.cpp \
                    src/queue.cpp \
                    src/screen.cpp \
                    src/surface.cpp \
                    src/timer.cpp \
                    src/waiter.cpp \
                    src/window.cpp
LOCAL_C_INCLUDES := jni/include \
                    $(GOGI_SDK_PATH)/include \
                    $(GOGI_SDK_PATH)/jsplugins/ooif/include
LOCAL_WHOLE_STATIC_LIBRARIES := libopera
LOCAL_LDLIBS := -llog -ljnigraphics
include $(BUILD_SHARED_LIBRARY) 
```

这是我的 Application.mk 文件：

```
APP_STL:=stlport_static
APP_ABI := armeabi armeabi-v7a
APP_PLATFORM := android-14 
```

并且问题中的 controller.hpp 文件具有以下定义：

```
#ifndef CONTROLLER_HPP
#define CONTROLLER_HPP

#include <memory>

#include "gogi_opera_api.h"

#include "event.hpp"
#include "dialog.hpp"
#include "queue.hpp"
#include "screen.hpp"
#include "surface.hpp"
#include "timer.hpp"
#include "waiter.hpp"
#include "window.hpp" 
```

我将文件放在正确的位置，并根据需要重写了 application.mk，但出现上述构建错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:02:56.893

将 *.hpp 更改为 *.cpp

它在 echoprint 项目中为我工作。

# asp.net - Global.asax 未发布且事件未在 Global.asax 中触发

> ID：12890068
> 
> 赞同：3
> 
> 时间：2012-10-15T05:59:30.550
> 
> 标签：asp.net, global-asax

我正在开发 ASP.NET Web 应用程序，对于未处理的异常，我正在使用 Global.asax 文件，我在其中编写了一个逻辑来将错误日志写入为

```
Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs)

        'Code that runs when an unhandled error occurs

End Sub 
```

这一切都在本地工作，但是当发布网站 global.asax 时仍然没有发布我将 global.asax 上传到远程服务器但事件没有触发我的应用程序使用 IIS 7 作为 Web 服务器

我是否需要任何类型的配置建议您是否有任何解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:20:18.540

我还上传了 App_global.asax.compiled 并且它有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-17T11:29:16.510

我们尝试了很多东西。

1.  [global.asax 在本地计算机上工作，但在我发布到服务器后不起作用](https://stackoverflow.com/q/3647556/1184435)
2.  [为什么 Global.asax 事件没有在我的 ASP .NET 网站中触发？](https://stackoverflow.com/q/1028187/1184435)
3.  [Global.asax 没有为发布版本触发](https://stackoverflow.com/q/811005/1184435)
4.  [ASP.NET MVC 应用程序中的 Global.asax 之谜](https://sbrakl.wordpress.com/2014/08/28/mystery-of-global-asax-in-asp-net-mvc-application/)

我们还尝试将以下文件放入`root`和`bin`目录中。

1.  **App_global.asax.dll**和**App_global.asax.compiled**文件
2.  **预编译的App.config**

都没有用！

为了触发全局事件，对于我们的 asp.net 2.0 网站，我们必须使用 raw`Global.asax`而不是dll。`pre-compiled`

希望这对某人有帮助！干杯! 快乐编码！:D

# mysql - SELECT * FROM 多个表。MySQL

> ID：12890071
> 
> 赞同：88
> 
> 时间：2012-10-15T05:59:34.373
> 
> 标签：mysql, multiple-tables

`SELECT name, price, photo FROM drinks, drinks_photos WHERE drinks.id = drinks_id`

产生 5 行（5 个数组），`photo`是一行中唯一的唯一字段。`name, price`重复（*在这里，* `fanta-` `name, price` *重复3次。*）我如何摆脱这些重复？

**编辑：**`name, price`我 想要`photo`每杯饮料。

```
 id      name      price
  1\.    fanta        5
  2\.     dew         4

 id      photo                   drinks_id
  1\.     ./images/fanta-1.jpg      1
  2\.     ./images/fanta-2.jpg      1  
  3\.     ./images/fanta-3.jpg      1 
  4\.     ./images/dew-1.jpg        2
  5\.     ./images/dew-2.jpg        2 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-10-15T06:01:44.043

您在这里所做的称为 a [`JOIN`](https://dev.mysql.com/doc/refman/5.1/en/join.html)（尽管您隐含地这样做是因为您从多个表中进行选择）。这意味着，如果您没有在 WHERE 子句中添加任何条件，那么您将拥有这些表的*所有组合*。只有在您的条件下，您才能将加入限制在饮料 ID 匹配的那些行中。

但是，如果有 X 张带有此特定饮料 ID 的照片，则每种饮料的结果中仍有 X 多行。您的声明不限制您想要拥有*哪些照片！*

如果您只希望每杯饮料只有一行，则必须告诉 SQL 如果有多行具有特定的饮料 ID，您要做什么。为此，您需要分组和[聚合函数](https://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)。您告诉 SQL 您想要将哪些条目组合在一起（例如所有相等的饮料 ID），并且在 SELECT 中，您必须告诉每个分组结果行应该采用哪些不同的条目。对于数字，这可以是平均值、最小值、最大值（仅举几例）。

在您的情况下，如果您只想要一行，我看不出查询照片以获取饮料的意义。您可能认为您的结果中可以为每种饮料提供一*组照片*，但 SQL 无法做到这一点。如果您只想要*任何*照片并且不在乎会得到哪张照片，只需按drinks_id 分组（以便每杯饮料仅获得一行）：

```
SELECT name, price, photo
FROM drinks, drinks_photos
WHERE drinks.id = drinks_id 
GROUP BY drinks_id 
```

```
name     price   photo
fanta    5       ./images/fanta-1.jpg
dew      4       ./images/dew-1.jpg 
```

在 MySQL 中，我们还有[GROUP_CONCAT](https://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)，如果您希望将文件名连接到一个字符串：

```
SELECT name, price, GROUP_CONCAT(photo, ',')
FROM drinks, drinks_photos
WHERE drinks.id = drinks_id 
GROUP BY drinks_id 
```

```
name     price   photo
fanta    5       ./images/fanta-1.jpg,./images/fanta-2.jpg,./images/fanta-3.jpg
dew      4       ./images/dew-1.jpg,./images/dew-2.jpg 
```

但是，如果您有`,`字段值，这可能会变得很危险，因为您很可能希望在客户端再次拆分它。它也不是标准的 SQL 聚合函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T06:04:59.497

您将在此处获得名称和价格的重复值。而且 ids 在drinks_photos 表中是重复的。你无法避免它们。还有你想要的输出到底是什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T06:03:41.823

为了摆脱重复，您可以按`drinks.id`. 但是这样一来，您每张照片只能获得一张照片`drinks.id`（您将获得哪张照片取决于数据库内部实现）。

虽然没有记录，但在 MySQL 的情况下，你会得到最低的照片`id`（根据我的经验，我从未见过其他行为）。

```
SELECT name, price, photo 
FROM drinks, drinks_photos 
WHERE drinks.id = drinks_id
GROUP BY drinks.id 
```

# sql-server-2008 - 查询在 SSRS 2008 或 BIDS 2008 中不起作用，但在 SSMS 中起作用

> ID：12890074
> 
> 赞同：7
> 
> 时间：2012-10-15T06:00:10.580
> 
> 标签：sql-server-2008, ssrs-2008, bids

# 环境

* * *

### 数据库服务器（DWH 产品和开发 + SSRS 产品）

*   赢 XP SP3
*   SQL Server 2008 耳鼻喉科
*   企业局域网
*   DWH 没有远程查询超时限制，即设置为`0`
*   `600`为 SSRS 数据库服务器设置的远程查询超时秒数
*   对并发连接没有限制，即它们设置为`0`
*   `KeepAlive`SQL Server 的TCP/IP属性 =`30000`

### 开发盒

*   赢 XP SP3
*   2008年投标

### 共享数据源（由 .rdl 使用）

*   使用服务器的机器名，没有别名
*   权限一切正常

# 问题

* * *

查看报告的“预览”选项卡时，BIDS 返回的错误在大约 1 分钟后出现（在 SSMS 中查询需要约 1 分 10 秒 -**编辑：2012-10-16**现在在 SSRS 本身中复制了错误通过将报告部署到报告管理器并尝试运行报告：*在下面添加了异常堆栈跟踪*）：

> 本地报告处理过程中发生错误。
> 
> 报告处理过程中发生错误。
> 
> 数据集“MainData”的查询执行失败。
> 
> 从服务器接收结果时发生传输级错误。（提供者：TCP 提供者，错误：0 - 指定的网络名称不再可用。）

*   该查询已经过测试，最终用户帐户具有`db_datareader`权限，针对 prod 和 dev db 服务器，并且在 SSMS 中工作正常。
*   此帐户用于最终用户在运行时执行 .rdl。
*   SSMS 用于验证查询在语法上是否正确，并返回完整且完整的结果集，没有错误和警告。

# 查询结构（为简洁起见列出）

* * *

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED
SET NOCOUNT ON
SET ANSI_WARNINGS OFF

/********************************************************** 
    CTE to be used to clean strings
***********************************************************/
;WITH
    CTE_1           AS  ( SELECT SomeData )
    ,CTE_2          AS  ( SELECT SomeData )
    ,Recursive_CTE  AS  ( SELECT SomeData )     -- String cleaning performed here
    ,CTE_3          AS  ( SELECT SomeData )

/**************************     
 Data set returned here
***************************/
SELECT
    Column_1
    ,Column_2
    ,Column_3
    .
    .
    .
    ,Column_n
FROM
    Fact
    INNER JOIN  Dimension_1     AS 1        ON Fact.Key_1   = 1.Key_1
    INNER JOIN  Dimension_2     AS 2        ON Fact.Key_2   = 2.Key_2
    INNER JOIN  Dimension_3     AS 3        ON Fact.Key_4   = 3.Key_3
    INNER JOIN  Dimension_5     AS 4        ON Fact.Key_4   = 4.Key_4
    LEFT JOIN   CTE_3           AS clean    ON 4.Key_4      = clean.Key_4   -- Clean names returned in query and used in GROUP BY clause    
WHERE
    Condition_1 = Test_1
    AND Condition_2 = Test_2
    AND Condition_3 = Test_3
    .
    .
    .
    AND Condition_n = Test_n
GROUP BY
    Group_1 
    ,Group_2
    ,Group_3
    .
    .
    .
    ,Group_n
ORDER BY
    Group_1 
    ,Group_2
    ,Group_3
    .
    .
    .
    ,Group_n 
```

### 注释（不确定这是否有帮助）：

*   递归 CTE 只执行 24 次递归。
*   所有的钥匙都是`PRIMARY KEY CLUSTERED INDEXES`

# 问题）

* * *

1.  从哪里开始诊断问题实际上是什么？
2.  发现问题后如何解决？

# 到目前为止我所做的...

* * *

**2012-10-15**

*   在谷歌机器上搜索无济于事。
*   与看到这种情况的其他团队成员交谈，他们认为这可能与性能有关，即查询运行时间过长，或者他们认为 SSRS 或连接器执行的 SQL 代码验证/语法检查可能更严格它用。

* * *

**2012-10-16**

```
ERROR: Throwing Microsoft.ReportingServices.ReportProcessing.ReportProcessingException: Query execution failed for dataset 'DataSet1'., ;
 Info: Microsoft.ReportingServices.ReportProcessing.ReportProcessingException: Query execution failed for dataset 'DataSet1'. ---> System.Data.SqlClient.SqlException: A transport-level error has occurred when receiving results from the server. (provider: TCP Provider, error: 0 - The specified network name is no longer available.)
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at System.Data.SqlClient.TdsParserStateObject.ReadSni(DbAsyncResult asyncResult, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParserStateObject.ReadNetworkPacket()
   at System.Data.SqlClient.TdsParserStateObject.ReadBuffer()
   at System.Data.SqlClient.TdsParserStateObject.ReadByte()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.ReportingServices.DataExtensions.SqlCommandWrapperExtension.ExecuteReader(CommandBehavior behavior)
   at Microsoft.ReportingServices.OnDemandProcessing.RuntimeDataSet.RunDataSetQuery()
   --- End of inner exception stack trace --- 
```

*   上述异常在同一数据集的日志中多次出现 -> 可能的原因可能是 CTE 中的递归？
*   我检查了 DWH 数据库服务器和 SSRS 数据库服务器级别的 TCP/IP 设置。两者都将`KeepAlive`属性设置为`30000`，即 30 秒 -> 断开连接的可能原因？
*   [在此处](http://support.microsoft.com/kb/555938)找到针对 Visual Studio 2005 的查询的类似问题解决方案（基于堆栈跟踪） 。我取消选择`Tools > Options > Database Tools > Query and View Designers > Cancel long running query`（设置为 30 秒）。没有变化（我相信，一旦部署到 SSRS 服务器，此客户端设置也不会影响报告，但我想我会试一试）
*   发现[这个](http://blogs.msdn.com/b/sql_protocols/archive/2005/09/28/474698.aspx)状态`OBDC connection attempt when server is not ready to process a new local connection, possibly due to overload`-> 当 SSRS 将查询提交到 DWH 服务器时，递归 CTE 是否会导致这样的过载（即使我没有进行 ODBC 连接）？
*   发现[这](http://www.sqlservercentral.com/Forums/Topic652500-147-1.aspx#bm653337)表明 SSRS 不喜欢虚拟表（没有提及原因，也没有提供参考）-> 可能需要重写查询？
*   回复评论：网络诊断

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:05:22.023

首先，你必须找到问题所在。

当您使用运行 Profiler 打开报告时，您能检查发生了什么吗？使用事件审计登录、审计注销、异常、SQL:Stmt:Starting/Completed 启动跟踪。在您尝试打开报告后检查结果并告知我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T23:03:32.550

建议：当查询变得复杂并且 SSRS 开始抱怨时，将查询包装到数据库中的视图或存储过程中，在 SSMS 中测试新的（更简单的）查询，然后查看相同的简单查询在 SSRS 中是否有效。

在所有情况下，使用 SQL Server Profiler 和其他诊断工具来查看数据库的实际运行情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-11T14:11:41.677

似乎是超时问题......但请尝试以下操作：

如果要确保不使用相同的执行计划，请尝试**选项（重新编译）**以使用不同的计划。

这可能/可能不会导致解决问题，但至少您将缩小范围并检索您在 SSMS 中所做的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-30T17:50:30.040

尝试从写入繁重的数据库中读取时遇到此错误。

```
SQLEXCEPTION: Transaction was deadlocked on lock resources with another process and has been chosen as the deadlock victim. 
```

这将导致您描述的 SSRS 行为，日志中有以下线索：

```
---> System.Data.SqlClient.SqlException: A transport-level error has occurred when receiving results from the server. (provider: TCP Provider, error: 0 - The specified network name is no longer available.) 
```

如果这是您的问题，可以尝试以下方法：

*   创建没有索引的临时表以镜像查询中的事实和暗淡表。在没有任何连接的情况下使用您需要的数据填充它们，然后添加索引。仅在这些临时表之间执行连接。
*   考虑使用 READ UNCOMMITTED 事务隔离来调试问题，或在查询中添加 NOLOCK 提示。如果这提高了性能，您可能会遇到与我遇到的相同的死锁问题。
*   从长远来看，您可能希望从不大量写入的数据库中读取数据，例如。包含夜间数据的数据库报告版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-05T04:42:49.447

一个新的答案促使我写这个答案来结束这个问题，虽然这还没有完全验证，但据我所知，**该问题不会出现在更高版本**的 SQL Server 工具中（**即现在跨工具的相同结果将发生**）。

原因（根据记忆）是 SSMS 与 SSRS 使用不同的客户端连接，在 2008 版本中，我相信 SSRS 使用的是 ADO.Net 连接器，而 SSMS 使用的是不同的东西（不记得现在是什么了）。

我在研究这个问题时遇到了一篇旧文章（5-6 年前），它基本上列出了 SQL Server 堆栈工具之间的不同客户端连接类型（我刚刚尝试再次搜索 30 分钟以找到它，但是鉴于这些工具现在已有 10 年的历史，我没有成功找到它）。我还记得在 2012 年或 2014 年发布时，我看到微软的一篇文章说客户端类型将在所有工具中标准化。

因此，除非您使用 2008 工具（或更低版本），否则您不会遇到它在 SSMS 中工作但在 SSRS 中失败的问题，它很可能在两者中都失败，或者在两者中都工作。

如果您仍在使用 SSMS 2008，我相信您可以设置高级查询执行选项，请尝试查看以下连接客户端类型选项：

*   `Tools > Options... > Query Execution > SQL Server > General`
*   `Tools > Options... > Query Execution > SQL Server > Advanced`

# qt - QML：菜单下拉问题

> ID：12890075
> 
> 赞同：1
> 
> 时间：2012-10-15T06:00:28.657
> 
> 标签：qt, qml, qlistview

如图所示，如何在 QML 的下拉功能中获取不同的项目容器。

![在此处输入图像描述](../Images/91777d713f1ca974018ce633ff25d525.png)

我使用 listview 尝试了以下实现中的要求，但无法得到相同的结果。下面是片段

```
import QtQuick 1.1

Rectangle {
    width:400;
    height: 400;

    Rectangle {
            id:comboBox
            property variant items: ["Item 1", "Item 2", "Item 3"]

            signal comboClicked;
            width: 400;
            height: 30;
            z: 100;
            smooth:true;

            Rectangle {
                id:chosenItem
                radius:4;
                width:parent.width;
                height:comboBox.height;
                color: "#203586"
                smooth:true;
                Text {
                    anchors.top: parent.top;
                    anchors.margins: 8;
                    id:chosenItemText
                    x: 11
                    y: 5
                    color: "#ffffff"
                    text:"Menu";
                    anchors.topMargin: 5
                    anchors.left: parent.left
                    anchors.leftMargin: 12
                    font.family: "Arial"
                    font.pointSize: 14;
                    smooth:true
                }

                MouseArea {
                    width: 400
                    height: 30
                    anchors.bottomMargin: 0
                    anchors.fill: parent;
                    onClicked: {
                        comboBox.state = comboBox.state==="dropDown"?"":"dropDown"
                    }
                }
            }

            Rectangle {
                id:dropDown
                width:comboBox.width/4;
                height:0;
                clip:true;
                radius:4;
                anchors.top: chosenItem.bottom;
                anchors.margins: 2;
                color: "lightblue"

                ListView {
                    id:listView
                    height:500;
                    model: comboBox.items
                    currentIndex: 0
                    delegate: Item{
                        width:comboBox.width;
                        height: comboBox.height;

                        Text {
                            text: modelData
                            anchors.top: parent.top;
                            anchors.left: parent.left;
                            anchors.margins: 5;

                        }
                        MouseArea {
                            anchors.fill: parent;
                            onClicked: {
                                comboBox.state = ""
                            }
                        }
                    }
                }
            }

            states: State {
                name: "dropDown";
                PropertyChanges { target: dropDown; height:30*comboBox.items.length }
            }

            transitions: Transition {
                NumberAnimation { target: dropDown; properties: "height"; easing.type: Easing.OutExpo; duration: 1000 }
            }
        }
    } 
```

通过上述方法，我得到如下所示的下拉菜单，这不符合要求。

我尝试了各种方法，但我无法通过正常工作来达到确切的要求 ![在此处输入图像描述](../Images/7f6260a2d6007e409857f72ad2e1fde4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:13:33.940

将 Rectangle 添加到列表视图的委托。将该矩形的大小设置为项目的大小（comboBox.width，comboBox.height）减去您喜欢的边距，并为该矩形添加一个半径，这应该会产生第一张图像中显示的列表。

```
delegate: Item{
  width:comboBox.width;
  height: comboBox.height;

  Rectangle {
    width: parent.width - margin;
    height: parent.height - margin;
    anchors.centerIn: parent;

    Text {
      text: modelData
      anchors.top: parent.top;
      anchors.left: parent.left;
      anchors.margins: 5;
    }
    MouseArea {
      anchors.fill: parent;
      onClicked: {
        comboBox.state = ""
      }
    }
  }
} 
```

# c# - 如何在c#中一次100个应用程序写入日志时实现同步

> ID：12890079
> 
> 赞同：1
> 
> 时间：2012-10-15T06:00:49.097
> 
> 标签：c#, .net, multithreading, synchronization, locking

```
public class Logwriter {
    public Void WriteXml()
    {
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(@"C:\Log_Data.xml");

        XmlElement newelement = xmlDoc.CreateElement("entry");
        XmlElement xmldata = xmlDoc.CreateElement("data");
                    XmlElement xmlcontent = xmlDoc.CreateElement("content");

                    xmldata.InnerText ="1234" ;
        xmlcontent.InnerText ="Stackoverflow";

                    newelement.AppendChild(xmldata);
        newelement.AppendChild(xmlcontent);

                    xmlDoc.DocumentElement.AppendChild(newelement);
        xmlDoc.Save(@"C:\Log_Data.xml");
}} 
```

上面的 WriteXml() 函数一次可以被 100 个应用程序调用，所以我必须防止 IOException 错误。我可以使用锁来避免这些异常，所以我该怎么做。请解释在编写 xml 期间我必须锁定哪个对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T06:11:57.630

听起来您在谈论一个命名的互斥锁；您可以将 a`Mutex`与 类似的名称一起使用`Global\MySharedLog`，然后在同一台机器上的不同会话中的不同应用程序将可以看到该名称。这允许每个 exe 在一段时间内获取排他锁（以托管方式）。

然而！

*   每个应用程序有一个单独的日志会更简单，更高效
*   xml 不是一种很好的日志格式，特别是如果您要每次都读取/写入整个内容以添加一行；在日志条目 #10 上听起来不错，在日志条目 #12,301,023 上不太好

例如：

```
Mutex m = new Mutex(false, @"Global\MySharedLog");
...

m.WaitOne();
try {
    // do some work here
} finally {
    m.ReleaseMutex();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:15:30.753

我建议您需要一个单独的 Windows 服务，该服务可以通过从 100 个应用程序发送的 TCP 数据包接收日志消息。这将有效地序列化文件访问。

然后，您的日志记录例程必须将数据发布到`localhost`特定端口上。

Windows 服务将缓冲，然后在自己的时间将日志条目写入文件。

# android - goBack() 正在让我的应用程序在点击后退按钮时强制关闭

> ID：12890086
> 
> 赞同：0
> 
> 时间：2012-10-15T06:01:49.497
> 
> 标签：android, webview, navigation

我正在尝试使 android 设备的后退按钮成为在 WebView 中向后导航的一种方式。但是，当我单击后退按钮时，它会强制关闭。

这是我的 .java 文件（编辑掉的包名）：

```
package ----;

import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class ---- extends Activity {
WebView mainWebView;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    WebView mainWebView = (WebView) findViewById(R.id.mainWebView);

    WebSettings webSettings = mainWebView.getSettings();
    webSettings.setJavaScriptEnabled(true);

    mainWebView.setWebViewClient(new MyCustomWebViewClient());
    mainWebView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

    mainWebView.loadUrl("https://app.tent.is/global");
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // Check if the key event was the Back button and if there's history
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mainWebView.canGoBack()) {
        mainWebView.goBack();
        return true;
    }
    // If it wasn't the Back key or there's no web page history, bubble up to the default
    // system behavior (probably exit the activity)
    return super.onKeyDown(keyCode, event);
}

private class MyCustomWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T06:03:53.303

这里

`WebView mainWebView = (WebView) findViewById(R.id.mainWebView);`

改变

`mainWebView = (WebView) findViewById(R.id.mainWebView);`

这个东西是`WebView mainWebView;`你之前声明的对象`onCreate`，它永远不会被初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:07:59.387

> 您可以使用代码

```
 package ----;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.KeyEvent;
    import android.view.View;
    import android.webkit.WebSettings;
    import android.webkit.WebView;
    import android.webkit.WebViewClient;

    public class ---- extends Activity {
    WebView mainWebView;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mainWebView = (WebView) findViewById(R.id.mainWebView);

        WebSettings webSettings = mainWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);

        mainWebView.setWebViewClient(new MyCustomWebViewClient());
        mainWebView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

        mainWebView.loadUrl("https://app.tent.is/global");
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // Check if the key event was the Back button and if there's history
        if ((keyCode == KeyEvent.KEYCODE_BACK) && mainWebView.canGoBack()) {
            mainWebView.goBack();
            return true;
        }
        // If it wasn't the Back key or there's no web page history, bubble up to the default
        // system behavior (probably exit the activity)
        return super.onKeyDown(keyCode, event);
    }

    private class MyCustomWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
      }
    } 
```

# git - 每当开发人员在 git repo 中推送更改时如何识别 .java 文件（通过钩子）

> ID：12890087
> 
> 赞同：1
> 
> 时间：2012-10-15T06:02:01.593
> 
> 标签：git, hook, post-commit

.git 目录 hooks 目录在那个提交后文件中，我必须编写脚本来确定开发人员是否将任何 .java 文件推送到 git repo。如果至少有一个 java 文件，则构建应该开始。我已经编写了脚本在提交后挂钩中自动构建（curl http my jenkins 项目路径）。假设开发人员只推送不需要构建的属性文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:12:16.977

最简单的解决方案是使用脚本来检测推送的新文件的文件扩展名：
请参阅“[希望 Git 发布接收挂钩以检测某些文件类型](https://stackoverflow.com/a/5939409/6309)”。

您可以尝试重用 GitHub 使用的内容来检测他们收到的语言：

[**语言学家**](https://github.com/github/linguist)：

这就是[GitLab 正在做的事情](https://github.com/gitlabhq/gitlabhq/pull/1410)……在接收后挂钩中！

# java - 会话超时处理 - （在会话自动到期时更新特定的用户行）

> ID：12890088
> 
> 赞同：0
> 
> 时间：2012-10-15T06:02:07.063
> 
> 标签：java, database, session, logout, session-timeout

我开发了一个网络应用程序。我想在其中添加注销功能。为此，我使用了 HttpSessionListener，但没有按我的意愿工作。

```
 import javax.servlet.http.HttpSessionListener;
 import javax.servlet.http.HttpSessionEvent;

 public class GetActiveSessions implements HttpSessionListener {

 private static int activeSessions = 0;

 public void sessionCreated(HttpSessionEvent se) {

 activeSessions++;
            System.out.println("+ 1 session");

 }

 public void sessionDestroyed(HttpSessionEvent se) {

 if(activeSessions > 0)

 activeSessions--;
            System.out.println("- 1 session");

 }

 public static int getActiveSessions() {
            System.out.println(activeSessions);

 return activeSessions;

 }

 } 
```

我在 sessionDestroyed() 方法中标记了用户注销（通过更新数据库）。

如果会话超时，则容器调用 sessionDestroyed() 方法并且我更新数据库但是当我显式调用 session.invalidate() （当用户单击注销链接时）值与会话对象解除绑定但容器不调用 sessionDestroyed() 方法所以无法更新数据库。

并且还需要在用户关闭浏览器窗口时注销用户。

有三种机会可以将用户标记为注销。1\. 容器会话超时。2\. 用户点击注销链接 3 用户关闭浏览器窗口。

请提出您的宝贵意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:32:34.387

每当值取消绑定更新数据库时，解决您的问题的方法是使用 HttpSessionBindingListener。

当用户关闭浏览器时，会触发 onunload 事件，您可以调用相应的 servlet 从 logoutUser() javascript 函数中注销用户（更新数据库）。

```
< script>

function logoutUser()

{

 // Call logout servlet 

}

< / script >
< / head >

< body onunload="logoutUser()" >

..... 
```

onunload 的一个问题是即使刷新页面也会触发它。

# python - MySQL LOAD DATA LOCAL INFILE Python

> ID：12890098
> 
> 赞同：22
> 
> 时间：2012-10-15T06:02:49.387
> 
> 标签：python, mysql

我正在运行 Ubuntu 12.04 和 MySQL 5.5 好吧，这就是问题所在：

使用 Python 的 MySQLDB 模块，SQL 命令：

```
cursor.execute("LOAD DATA LOCAL INFILE 'example.csv' INTO TABLE 'example_mysql_table' TERMINATED BY ',';") 
```

不工作。我明白了`ERROR 1148: The used command is not allowed with this MySQL version`

我已经四处寻找解决方案一段时间了，到目前为止，似乎其他有同样问题的人已经通过在 [mysqld] 和 [mysql ]。这对我不起作用，我不知道为什么。

相关链接：

[MySQL：启用 LOAD DATA LOCAL INFILE](https://stackoverflow.com/questions/10762239/enable-load-data-local-infile)

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-31T09:13:07.947

在花了几个小时尝试配置文件中的各种设置并重新启动 mysql 数十次之后，我想出了这个似乎解决了问题的方法（在任何地方的任何文档中都找不到这个）

```
MySQLdb.connect(server, username, password, database, local_infile = 1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T06:16:55.987

如我所见，没有文件选项[local-infile](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_local_infile)。但是您可以在脚本中动态更改此值。

要查看此选项，请运行此查询 -

```
SELECT @@global.local_infile; 
```

要设置变量，请使用此语句 -

```
SET @@global.local_infile = 1; 
```

* * *

在 MySQL 命令行控制台中测试，一切正常：

```
SET @@GLOBAL.local_infile = 1;
LOAD DATA LOCAL INFILE 'test.csv' INTO TABLE table1;
Query OK, 3 rows affected (0.06 sec)

SET @@GLOBAL.local_infile = 0;
LOAD DATA LOCAL INFILE 'test.csv' INTO TABLE table1;
ERROR 1148 (42000): The used command is not allowed with this MySQL version 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-18T04:30:58.833

我知道这是一个非常古老的线程，但我想我只是添加一些关于 Flask 的脚注。

我无法通过 LOAD DATA INFILE 将任何 csv 文件上传到 MySQL，因此我尝试使用 LOAD DATA LOCAL INFILE。我得到了上面提到的相同的“错误 1148：此 MySQL 版本不允许使用的命令”。

我对此的解决方案是打开 flaskext > mysql.py 并修改“连接”功能。我补充说：

```
if self.app.config['MYSQL_LOCAL_INFILE']:
    self.connect_args['local_infile'] = self.app.config['MYSQL_LOCAL_INFILE'] 
```

然后我补充说：

```
app.config['MYSQL_LOCAL_INFILE'] = True 
```

到我的烧瓶模块。这有效地允许在使用 flaskext.mysql 时将 pymysql 的 local_infile 选项设置为“True”

# python - 在 CentOS 中安装 Openerp 6.01 时出错

> ID：12890100
> 
> 赞同：1
> 
> 时间：2012-10-15T06:02:57.580
> 
> 标签：python, centos, openerp, kloxo

我是openerp的新手。

在安装 openerp 6 的过程时，我想用这个命令生成一个配置文件，

cd /home/openerp/openerp-server/bin/

`./openerp-server.py -s --stop-after-init -c /home/openerp/openerp-server.cfg`

但它总是显示一条消息

`ImportError: No module named psycopg2`

当我检查 psycopg2 包时，它已经安装了，

包 python-psycopg2-2.4.5-1.rhel5.x86_64 已安装且最新版本

没事做

这有什么问题？我的服务器是centos，我安装了python 2.6.7。

真的需要你们的帮助。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:11:35.203

请`psycopg2`从[http://rpmfind.net/linux/RPM/sourceforge/p/pg/pgbarman/rhel5-deps/python26-psycopg2-2.4.5-1.rhel5.x86_64.html安装](http://rpmfind.net/linux/RPM/sourceforge/p/pg/pgbarman/rhel5-deps/python26-psycopg2-2.4.5-1.rhel5.x86_64.html)

# python - Tornado - POST 中缺少“_xsrf”参数

> ID：12890105
> 
> 赞同：15
> 
> 时间：2012-10-15T06:03:21.573
> 
> 标签：python, python-3.x, tornado

从下面的代码中可以看出，我有一个`GET`for 注册，它将其工作委托给`POST`.

```
class RegistrationHandler(tornado.web.RequestHandler):
    def get(self):
        s = """
          <h1>Register</h1>
              <form method="post" action="/register">
                  <div>
                      <label>User</label>
                      <input name="user_name" value="test@test.com"/>
                  </div>
                  <div>
                      <label>password</label>
                      <input name="password" type="password"/>
                  </div>
                  <div>
                      <input type="submit" value="submit"/>
                  </div>
              </form>
        """
        self.write(s)

    @log_exception()
    def post(self):
        user_name = self.request.arguments['user_name']
        password = self.request.arguments['password']
        log.debug('Registering user with credentials %r' % (user_name, password))
        with sa_session() as db_session:
            User.register(user_name, password, db_session) 
```

当我从我的网络浏览器访问 URL 时，我得到一个注册表单，提交后我得到“403：禁止”。

控制台日志：

```
2012-10-15 11:27:42,482 - __main__ - DEBUG - Starting server on port 8080
2012-10-15 11:27:49,377 - root - INFO - 304 GET /register (127.0.0.1) 0.78ms
2012-10-15 11:27:53,143 - root - WARNING - 403 POST /register (127.0.0.1): '_xsrf' argument missing from POST
2012-10-15 11:27:53,144 - root - WARNING - 403 POST /register (127.0.0.1) 1.05ms 
```

这个错误是什么意思，我该如何纠正？谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-16T14:31:35.353

我想你在你的设置中启用了跨站点请求伪造 cookie（默认情况下它是打开的）。

[Tornado 的 XSRF 在这里](http://tornado.readthedocs.org/en/latest/guide/security.html#cross-site-request-forgery-protection)

要解决此问题，请在您的设置中将其关闭：

```
settings = {
    "xsrf_cookies": False,
} 
```

注意：通常你不想关闭它，通常你会在这样的模板中生成 HTML：请注意添加 XSRF cookie 的 xsrf 位。

```
 <form method="post" action="/register">
     <input name="user_name" value="test@test.com"/>
     <input name="password" type="password"/>
     <input type="submit" value="submit"/>
{% raw xsrf_form_html() %}
 </form> 
```

---编辑以下评论---而不是：

```
 def get(self):
        loader = template.Loader("resources")
        page_contents = loader.load('register_page.html').generate()
        self.write(page_contents) 
```

做：

```
 def get(self):
     self.render("../resources/register_page.html") 
```

或更好：

```
 def get(self):
     self.render("register_page.html") 
```

（并将其放在您的模板目录中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-13T09:11:17.023

这里同样的问题。在深入研究代码后，我检查了用于检查的 tornado 内置函数：

```
def check_xsrf_cookie(self):
    """Verifies that the ``_xsrf`` cookie matches the ``_xsrf`` argument.

    To prevent cross-site request forgery, we set an ``_xsrf``
    cookie and include the same value as a non-cookie
    field with all ``POST`` requests. If the two do not match, we
    reject the form submission as a potential forgery.

    The ``_xsrf`` value may be set as either a form field named ``_xsrf``
    or in a custom HTTP header named ``X-XSRFToken`` or ``X-CSRFToken``
    (the latter is accepted for compatibility with Django).

    See http://en.wikipedia.org/wiki/Cross-site_request_forgery

    Prior to release 1.1.1, this check was ignored if the HTTP header
    ``X-Requested-With: XMLHTTPRequest`` was present.  This exception
    has been shown to be insecure and has been removed.  For more
    information please see
    http://www.djangoproject.com/weblog/2011/feb/08/security/
    http://weblog.rubyonrails.org/2011/2/8/csrf-protection-bypass-in-ruby-on-rails

    .. versionchanged:: 3.2.2
       Added support for cookie version 2\.  Both versions 1 and 2 are
       supported.
    """
    token = (self.get_argument("_xsrf", None) or
             self.request.headers.get("X-Xsrftoken") or
             self.request.headers.get("X-Csrftoken"))
    if not token:
        raise HTTPError(403, "'_xsrf' argument missing from POST")
    _, token, _ = self._decode_xsrf_token(token)
    _, expected_token, _ = self._get_raw_xsrf_token()
    if not token:
        raise HTTPError(403, "'_xsrf' argument has invalid format")
    if not _time_independent_equals(utf8(token), utf8(expected_token)):
        raise HTTPError(403, "XSRF cookie does not match POST argument") 
```

正如您可以阅读方法定义：

> 该`_xsrf`值可以设置为名为的表单字段或在名为或`_xsrf` 的自定义 HTTP 标头中`X-XSRFToken``X-CSRFToken`

因此我尝试设置一个名为`X-CSRFToken`. 下面是ajax定义：

```
$.ajax({
    url: this.my_url,
    type: 'POST',
    data: JSON.stringify(body),
    beforeSend: function(xhr) {
            xhr.setRequestHeader('X-CSRFToken', getCookie('_xsrf'));},
}); 
```

最后，我们需要定义`getCookie`负责检索正确 CSRF 令牌的函数。该函数的定义直接取自 Tornado [CSRF 文档](https://www.tornadoweb.org/en/stable/guide/security.html#cross-site-request-forgery-protection)：

```
function getCookie(name) {
    var r = document.cookie.match("\\b" + name + "=([^;]*)\\b");
    return r ? r[1] : undefined;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:48:42.447

有一个冲突：你是怎么做`get`的和你放的形式`method="post"`？这就是为什么`error 403`

如果您使用`get`，那么您将不需要`xsrf`保护。否则，您将其添加到表单声明之后

```
<form method="post" action="/register">
{% raw xsrf_form_html() %} # the 'raw' word is to force escape to be desactivated (it is by default activated) 
```

所以 xsrf 你会在你渲染的 html 中发现它是一个隐藏的标签。

# graph - 求图形的周长

> ID：12890106
> 
> 赞同：1
> 
> 时间：2012-10-15T06:03:26.247
> 
> 标签：graph, cycle

我需要输出表示为邻接矩阵的给定图的周长。谁能给我一些提示，我如何使用邻接矩阵或邻接列表来获得图的周长？

例子：

```
graph one:
0 1 0 0
1 0 0 1
0 0 0 0
0 1 0 0 

graph two:
0 1 0 0 1
1 0 1 0 0
0 1 0 1 0
0 0 1 0 1
1 0 0 1 0

The result:
Girth of graph 1: infinity
Girth of graph 2: 5 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-28T21:41:09.200

[http://webcourse.cs.technion.ac.il/234247/Winter2003-2004/ho/WCFiles/Girth.pdf](http://webcourse.cs.technion.ac.il/234247/Winter2003-2004/ho/WCFiles/Girth.pdf)有一个基于 BFS 的算法，复杂度为 O(VE)。这适用于无向图（例如，您的示例邻接矩阵是对称的）。另请参阅[https://github.com/jaspervdj/Genus/blob/master/src/genus/FindGirth.java](https://github.com/jaspervdj/Genus/blob/master/src/genus/FindGirth.java)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T06:32:30.883

该算法将找到最短循环的长度：

```
- set `girth` to infinity
- for each edge
-- remove the edge from the graph
-- measure the distance between the edge endpoints
-- if `girth` is longer than distance+1
--- set `girth` to distance+1
-- return the edge to the graph. 
```

[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)的时间复杂度是，`O(v^2)`所以这个算法是`O(v^4)`。

如果您的图是稀疏的，您可以转换为邻居列表表示，然后在`O(v^2+e*(e+v*log(v)))`=中运行前面的算法`O(v^2+e^2+v*e*log(v))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:04:08.817

如果你从所有点运行 dijkstra 并且每一轮都取到与给定源的最大距离，它会更便宜（O（v^3））。然后取这些元素中的最大值，这就是周长。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-24T12:59:26.613

在[鼠尾草](http://www.sagemath.org/ "智者")

```
sage: G1 = Matrix([[0,1,0,0],[1,0,0,1],[0,0,0,0],[0,1,0,0]])
sage: G2 = Matrix([[0,1,0,0,1],[1,0,1,0,0],[0,1,0,1,0],[0,0,1,0,1],[1,0,0,1,0]])
sage: G1 = Graph(G1)
sage: G2 = Graph(G2)
sage: G1.girth()
+Infinity
sage: G2.girth()
5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-31T17:12:34.307

图的周长是图中包含的最短环的长度，即具有最小可能和的环（如果图有负环，则可以为负）。找到周长的最简单方法是在给定的图（V<= 400）上运行 Floyd Warshall 算法（在 O(V^3) 时间内）并将每对之间的距离存储在二维数组中。之后对每个可能的顶点（在 O(V) 时间内）迭代 dist[i][i]，检查是否存在从顶点 i 开始并在顶点 i 结束的循环，然后取所有顶点中的最小值从 dist[i][i] 获得的可能值。

# ios - 无法在 iOS 6 中加载 UITableViewCell 笔尖

> ID：12890114
> 
> 赞同：0
> 
> 时间：2012-10-15T06:03:39.133
> 
> 标签：ios, uitableview

所以我不确定这里发生了什么，但在 iOS 6 之前，使用故事板，我会这样做来创建一个 UITableViewCell 子类。

1）为我的网点创建的 UITableViewCell 子类 .h 和 .m。2）在storyboard的ViewController上创建的自定义UITableViewCell。将其标识更改为自定义 UITableViewCell。给它重用标识符名称。

然后，当我想在 ViewController 的类中实例化单元格时，在

```
static NSString *TotalDistanceCellIdentifier = @"TotalDistanceCellIdentifier"; 
```

在 viewDidLoad 中：

```
[self.tableView registerNib:[UINib nibWithNibName:@"TotalDistanceTableViewCell" bundle:nil] forCellReuseIdentifier:TotalDistanceCellIdentifier]; 
```

然后在 cellForRowAtIndexPath 中：

```
 TotalDistanceTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:TotalDistanceCellIdentifier];

    return cell; 
```

在 iOS 5 和 5.1 中，我看到了我的 UITableViewCell。但是在我运行 iOS 6 或 iOS 6 模拟器的 iPhone 上，它会崩溃：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle:.....with name 'TotalDistanceTableViewCell'' 
```

iOS 6 中的 UItableViewCells 有什么变化吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:17:13.007

你描述的方式从来都不是正确的。如果它以前有效，则可能是该异常是新的。

如果你*有一个单独的 nib 文件*，你只需要注册一个 nib 。对于故事板中的原型，只需使用重用标识符出列，tableView 将从您的原型创建新单元格。

只需删除 registerNib 行，你应该没问题。

# sockets - 为什么我可以创建多个服务器套接字但只能创建一个客户端？

> ID：12890116
> 
> 赞同：0
> 
> 时间：2012-10-15T06:03:43.773
> 
> 标签：sockets

考虑以下代码：

```
{
    int Socket1 = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);

    sockaddr_in SrcSockAddr;
    SrcSockAddr.sin_family = PF_INET;
    SrcSockAddr.sin_addr.s_addr = inet_addr("192.168.1.2");
    SrcSockAddr.sin_port = htons(5061);

    if( -1 == bind(Socket1, (sockaddr*) &SrcSockAddr, sizeof (SrcSockAddr)) )
       exit(1);

    sockaddr_in DstSockAddr;
    DstSockAddr.sin_family = PF_INET;
    DstSockAddr.sin_addr.s_addr = inet_addr("192.168.1.3");
    DstSockAddr.sin_port = htons(5061);

    if( connect(Socket1, (sockaddr*)&DstSockAddr, sizeof(DstSockAddr)) )
        exit(2);

    int Socket2 = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);

    if( -1 == bind(Socket2, (sockaddr*) &SrcSockAddr, sizeof (SrcSockAddr)) )
        exit(3);

    DstSockAddr.sin_port = htons(5062);
    if( connect(Socket2, (sockaddr*)&(DstSockAddr), sizeof(DstSockAddr)) )
        exit(4);

    exit(0);
} 
```

假设两个地址都是正确的，则执行结果将是 3。我不能将两个套接字绑定到一个地址，这完全有道理。
然而，在服务器情况下，accept() 返回的不是像 connect() 这样的结果代码，而是另一个描述符。所以我可以有多个传入连接到一个地址，但只有一个传出。

这有什么原因吗？

**编辑：**
嗯，好吧，我刚刚发现 bind() 不是必需的。但是如何设置数据包的源端口呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:08:52.197

您将两个套接字进程绑定到同一个`structaddr.PORT`. 这是你做不到的。用不同的端口号更改另一个 socketaddr 结构，你应该没问题。IP+PORT 必须是唯一的。

```
if( -1 == bind(Socket1, (sockaddr*) &SrcSockAddr, sizeof (SrcSockAddr)) )

 if( -1 == bind(Socket2,
 (sockaddr*) &SrcSockAddr, sizeof (SrcSockAddr)) ) //SrcSockAddr already in use 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:22:52.137

您不能将两个套接字绑定到同一个 IP：端口。但是，您可以`accept()`从绑定到 IP:port 的侦听套接字中获得与待处理的入站连接一样多的套接字。所有这些套接字都有那个 IP:port 作为它们的本地地址，但是通过从侦听套接字继承它，而不是通过`bind()`函数。

# android - 当列表中已存在静态数据时，SQLite 创建和删除行

> ID：12890119
> 
> 赞同：0
> 
> 时间：2012-10-15T06:04:01.333
> 
> 标签：android, sqlite

我正在尝试使用 SQLite 数据库来实现删除功能。我有一个列表，其中已经有一些静态数据（Product_1、_2、_3...），然后我使用 db.insert 添加新位置。日志说

```
05:35:10.875    495 example.CustomAdapter   DEBUG       row inserted, ID = 2 
```

05:35:10.885 495 示例.CustomAdapter 调试 ID = 1，名称 = 05:35:10.885 495 示例.CustomAdapter 调试 ID = 2，名称 = A1

一切都很好，添加了新职位并且可以看到。然后我用 db.delete(DBHelper.TABLE, DBHelper.COLUMN_ID + id, null); 删除 ID=1 （其中 id 从 long id = acmi.id 收到；AdapterView.AdapterContextMenuInfo acmi = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();）并且日志说没有这样的列：

```
05:35:27.955    495 example.CustomAdapter   ERROR   AndroidRuntime  FATAL EXCEPTION: main 
```

05：35：27.955 495 example.CustomAdapter ERROR AndroidRuntime android.database.sqlite.SQLiteException：没有这样的列：_id5：，编译时：从mytable中删除_id5 05：35：27.955 495 example.CustomAdapter ERROR AndroidRuntime at android.database。 sqlite.SQLiteCompiledSql.native_compile(Native Method)

我究竟做错了什么？难道是因为我已经有四个位置充满了静态数据？ ![在此处输入图像描述](../Images/e0ef11df039506767f239d3f21ab8212.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:28:14.253

请先阅读： [http ://en.wikipedia.org/wiki/Column_%28database%29](http://en.wikipedia.org/wiki/Column_%28database%29)

然后读这个：

```
SQLiteException: no such column: _id5: 
```

您没有名为 _id5 的列。您有一个名为 ID 的列，其中可能包含值 5。

要删除列 ID 包含 5的行 ( [http://en.wikipedia.org/wiki/Row_(database) )：](http://en.wikipedia.org/wiki/Row_%28database%29)

```
db.delete(DBHelper.TABLE,"ID=" + id,null); 
```

或者

```
db.delete(DBHelper.TABLE,"ID=?",id); 
```

其中 id 等于 5。

# java - JPasswordField 编码输入

> ID：12890120
> 
> 赞同：5
> 
> 时间：2012-10-15T06:04:04.767
> 
> 标签：java, swing, jpasswordfield

Java`JPasswordField`正在对用户在密码字段中输入的输入进行编码，而我不想要它。我正在根据纯数值的数据库值检查密码。

我正在输入密码的数值为

```
12345 
```

它返回

```
[C@1e9b48b 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T06:11:28.577

我认为当您的意思是编码时，您可能正在尝试使用该`toString`方法。在 char 数组上，将只使用标准对象`toString`方法。

相反，你可能会做

```
String password = new String(passwordField.getPassword()); 
```

它“编码”的唯一另一种方式是如果您以某种方式获得加密密码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T06:14:29.557

该文档附带一个示例[http://docs.oracle.com/javase/tutorial/uiswing/components/passwordfield.html](http://docs.oracle.com/javase/tutorial/uiswing/components/passwordfield.html)

输入不是“编码”的，但是对于您输入的每个字符，都会在 inout 字段中打印一个特殊字符。

# python - Python Shell 询问文件名，然后询问子字符串（任意），程序将输出出现次数

> ID：12890125
> 
> 赞同：0
> 
> 时间：2012-10-15T06:04:49.840
> 
> 标签：python, input

所以我需要编写一个程序，要求我输入文件名，然后输入任何单词，它会输出一个单独的文本文件中有多少单词。

这是我到目前为止所拥有的：

```
fname= raw_input("Enter File Name: ")
s= raw_input("enter substring: ")

with open(fname, 'r') as f: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:48:19.733

```
// read the file into a list
// split each line into words
// compare each word with the desired word and count
import string
fname = raw_input("Enter File Name: ")
s     = raw_input("enter substring: ")
fp    = open(fname, 'rt')
L     = fp.readlines()    # read all lines into a list "L"
c     = 0                 # word count
for i in L:
    arr = string.split(i) # split on whitespace
    for word in arr:
        if word == s:
            c += 1
print "There are %d occurrances of the word \"%s\" in file \"%s\"\n" % (c, s, fname) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:22:34.413

还有一行：

```
print f.read().count(s) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:22:57.127

到目前为止，您拥有的是一个良好的开端。事实上，如果我自己解决问题，这几乎正是我会开始的。由于这可能是一项家庭作业，因此我不会为您编写代码，但希望我可以为您指明下一步该做什么。

首先，您需要将文件读入一个可以搜索的字符串。可能你会想用它`f.read()`来一次得到这一切。您也可以一次处理一行，但我认为如果您的搜索字符串跨越多个行，这将不起作用。

您可能需要在搜索之前对字符串进行一些“清理”（例如，正则化空格、大写、标点符号等）。您需要多少可能取决于您的文件内容究竟是什么，以及您希望搜索工作的紧密程度。如果您搜索“生病”，您希望它匹配“我会”吗？“连字符”匹配“连字符-\ 命名”怎么样（如果您的文本文件有连字符在两行之间分隔单词）？

获得清理后的字符串后，您必须决定如何搜索子字符串。您可以使用`str`类的方法（例如`find`或`count`），也可以使用类似的模块`re`进行更高级的文本搜索。阅读文档并选择最适合您的。

# jquery - 使用 django 上传 jQuery 文件 - 出现意外的令牌错误

> ID：12890131
> 
> 赞同：0
> 
> 时间：2012-10-15T06:05:30.823
> 
> 标签：jquery, python, django

[jquery文件上传](http://blueimp.github.com/jQuery-File-Upload/)。

它使用了某种与 django 模板语言相冲突的 javascript 模板语言，所以我使用了一些自定义模板标签“raw”来生成成功的原始内容。但是，不知道为什么 jquery 文件上传不起作用。给出一些意外的令牌非法错误

```
 var second = "var _e=tmpl.encode" + tmpl.helper + ",_s='" +
                        str.replace(tmpl.regexp, tmpl.func) +
                        "';return _s;";
                        console.log("---------------------");
    console.log(second);
    console.log("-------------------");
    var f = !/[^\w\-\.:]/.test(str) ? tmpl.cache[str] = tmpl.cache[str] ||
            tmpl(tmpl.load(str)) :
                new Function(
                    tmpl.arg + ',tmpl', second  // GETTING UNEXPECTED TOKEN HERE AT THIS PLACE.

                ); 
```

这是我得到错误的变量“second”的值：

```
 var _e=tmpl.encode,print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);},_s='\n\n';for (var i=0, file; file=o.files[i]; i++) ';}\n    <tr class="template-upload fade">\n        <td class="preview"><span class="fade"></span></td>\n        <td class="name"><span>'+_e(file.name)+'</span></td>\n        <td class="size"><span>'+_e(o.formatFileSize(file.size))+'</span></td>\n        ';if (file.error) ';}\n            <td class="error" colspan="2"><span class="label label-important">Error</span> '+_e(file.error)+'</td>
    ';} else if (o.files.valid && !i) ';}\n            <td>\n                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div>    </div>\n            </td>\n            <td class="start">';if (!o.options.autoUpload) ';}
            <button class="btn btn-primary">
                <i class="icon-upload icon-white"></i>
                <span>Start</span>
            </button>
        ';}_s+='</td>
    ';} else ';}
        <td colspan="2"></td>
    ';}_s+='\n        <td class="cancel">';if (!i) ';}
        <button class="btn btn-warning">
            <i class="icon-ban-circle icon-white"></i>
            <span>Cancel</span>
        </button>
    ';}_s+='</td>
</tr>
';}_s+='\n';return _s; 
```

这是我得到错误的 js 文件 tmpl.js 。

[http://blueimp.github.com/JavaScript-Templates/tmpl.js](http://blueimp.github.com/JavaScript-Templates/tmpl.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:19:19.423

[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

阅读有关 javascript 的部分。

# hadoop - 在 Hadoop 上并行实现决策树 ID3/C4.5

> ID：12890133
> 
> 赞同：2
> 
> 时间：2012-10-15T06:06:09.207
> 
> 标签：hadoop, parallel-processing, decision-tree, id3, c4.5

我想`ID3/C4.5`在`Hadoop`. 任何人都可以通过想法如何继续。

我对算法很清楚，但我需要知道如何并行化它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:14:05.810

我会考虑将属性选择的一次迭代作为一项 MapReduce 作业的方法。按照这个想法，您可以将属性分配给每个映射器以检查信息增益，并且在缩减阶段（使用单个缩减器），您可以选择最佳属性。
如果在一台机器上计算单次迭代（在所有属性上）比作业启动开销（大约 20-40 秒）稍长，我会认为这种方法是实用的。

# java - 使用 Java RMI 调用 Python 方法

> ID：12890137
> 
> 赞同：0
> 
> 时间：2012-10-15T06:06:37.333
> 
> 标签：java, python, rmi, rpc, web2py

我有一个通过 Python web2py 创建的远程方法。如何从 Java 测试和调用该方法？

我能够测试该方法是否实现`@service.xmlrpc`，但我如何测试该方法是否实现`@service.run`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:44:04.263

如果你能做到这一点，我会感到惊讶。Java RMI 需要 Java 对等体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:30:34.510

如果问题可以松散地解释为“使用 Java 调用 Python 方法”（如果您不需要专门使用 Java RMI），那么您可以使用其他框架来桥接 Java 和 python。例如，一种开源许可替代方案是[Versile](https://versile.com/)（完全披露：我是开发人员之一）。有关使用示例，请参阅 Versile Python 和 Versile Java 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:51:06.400

除非您使用某种 java-python 桥 ( [jython](https://stackoverflow.com/questions/8898765/calling-python-in-java) )，否则这是不可能的，这仍然是 Java RMI，即一个 java 程序调用另一个包装您的 python 脚本的 java 程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T06:25:53.020

您必须编写一个接口 X extends Remote 声明一个方法“myMethod()”。

```
X x = (X)Naming.lookup( "//a/b/c" );
x.myMethod(); 
```

困难之一是在服务器端管理命名。

# c# - 如何将 PrincipalContext 与 MVC Web 应用程序一起使用

> ID：12890138
> 
> 赞同：6
> 
> 时间：2012-10-15T06:06:59.167
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, active-directory

我在 MVC .Net 3.5 中有一个网站，我需要在控制器中使用下面的代码。所以我引用了名称空间

`System.DirectoryServices.AccountManagement`

我收到一个错误：

```
Error   1   The type or namespace name 'DirectoryServices' does not exist in the namespace 'System' (are you missing an assembly reference?) 
```

我缺少哪个程序集以及如何将其添加到项目中？

```
 // set up domain context
        PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

        // find a user
        UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

        if (user != null)
        {
            // do something here.... 
            string givenName = user.GivenName;
        } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-15T06:08:08.187

确保您已添加`System.DirectoryServices.AccountManagement.dll`对此命名空间所在的程序集的引用。

供参考：[PrincipalContext](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.principalcontext.aspx)。

# matlab - 如何从 SYS 对象计算根和极点

> ID：12890147
> 
> 赞同：-1
> 
> 时间：2012-10-15T06:07:42.083
> 
> 标签：matlab

我想从 TF 对象计算根和极点。但是我在手册中没有找到该功能。

例如：

我有一个给定的`TF`对象。我想知道根和极点在哪里。

目的是我有两个对象，将它们相乘并从结果中我想知道根和极。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:59:55.117

最简单的方法是从`tf`对象获取零极增益 (ZPK) 数据。您可以按如下方式执行此操作：

```
G = tf([1], [1 0.1 1]);
[z,p,k] = zpkdata(G);

z % are the zeros (roots as you call them)
p % are the poles
k % is a static gain 
```

您还可以使用`pzmap(G)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:28:31.623

我对控制系统工具箱没有经验，但我会试一试。

阅读[文档](http://www.mathworks.nl/help/control/ref/tf.html)和[一些背景资料](http://regpro.mechatronik.uni-linz.ac.at/downloads/autpr/Tutorials/MatlabSimulink/Defining%20Transfer%20Functions%20in%20Matlab.htm)，在我看来，您通过以下方式定义 TF 对象

```
TF_obj = tf(num, den, ...) 
```

其中`num`和`den`是分别定义分子和分母中多项式的系数向量。

**编辑（2）：**如果你有一个现有的 TF 对象`TF_obj`，你仍然可以像这样访问`num`和`den`：

```
num = TF_obj.num;
den = TF_obj.den; 
```

现在，*极点*是分母多项式的根，而*根*是分子多项式的根。因此，使用 Matlab 的[`roots`函数](http://www.mathworks.nl/help/matlab/ref/roots.html)：

```
TF_roots = roots(num);
TF_poles = roots(den); 
```

或者

```
TF_roots = roots(TF_obj.num);
TF_poles = roots(TF_obj.den); 
```

如果你愿意，你可以在没有 Matlab 的搜索路径的地方定义一个小辅助函数，它允许你在一个单行中做到这一点：

```
function [rts, pls] = TfRootsPoles(num, den)
    rts = roots(num);
    pls = roots(den);
end 
```

以便

```
[TF_roots, TF_poles] = TfRootsPoles(num, den); 
```

将是上述更易读的直观版本。

您也可以`[z,p,k] = zpkdata(G)`按照 Egon 的建议使用，它本质上是相同的功能，但将 TF 对象作为其输入。

**编辑（1）：**刚刚看到你的[另一个问题](https://stackoverflow.com/questions/12889919/roots-doesnt-work-in-a-function)。我确实认为这是重复的，因为您得到了答案（以与我建议的完全相同的方式），因此我将对这个答案投赞成票。

# ruby - 这种内部 DSL 语法在 Ruby 中是否可行？

> ID：12890149
> 
> 赞同：3
> 
> 时间：2012-10-15T06:07:55.237
> 
> 标签：ruby, dsl

我正在尝试为 Ruby 创建一个内部 DSL，我还没有开始编写它，我想知道这种语法在 Ruby 中是否可行：

```
IF more_than: 1, :class smells to: "god class", sense: HIGH and has "no temp attributes", sense: 0.5
THEN problem "some problem"
WITH ponderation percent: 10 
```

并且：

```
IF more_than: 1, :class
{
    smells to: 'god class', sense: 2
    and
    (
        has 'no temp attributes', sense: 0.5 or
        smells to: 'extensive coupling', sense: 1.5 or
        has 'refused parent Bequest', sense: HIGH or
        smells to: 'tradition breaker', sense: LOW
    )
    and
    (
        has :Method
        {
            smells to: 'extensive coupling', sense: 1.5
        }
    )
}
THEN
{ 
    problem "abusive conceptualization"
}
WITH
{
    ponderation percent: 10
} 
```

**更新：：** D 我仍在定义 DSL 的要求，这是我的出发点，我正在考虑自定义解析器或 Ruby。你会说什么是更好的主意，为它创建一个自定义解析器或使用 Ruby？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:17:17.440

这是不可能的。问题在于这些结构：

```
:class to 
```

您不能将参数传递给符号，只能传递给方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:52:50.830

这是一个有效的 ruby​​ 语法的替代版本：

```
IF CLASS Student {
    smells to: 'god class', sense: 2 and
    has 'no temp attributes', sense: 0.5 or
    smells to: 'extensive coupling', sense: 1.5 or
    has 'refused parent bequest', sense: HIGH or
    smells to: 'tradition breaker', sense: LOW and
    has_method {
        smells to: 'extensive coupling', sense: 1.5
    }
}
THEN {
    problem 'abusive conceptualization'
}
WITH {
    ponderation percent: 10
} 
```

**更新：**我一直在检查可能性，可以使用大写的 IF、THEN、WITH。

# .net - 基于 MVC3 权限的复选框列表

> ID：12890160
> 
> 赞同：1
> 
> 时间：2012-10-15T06:08:29.573
> 
> 标签：.net, asp.net-mvc-3, permissions

我试图找到一种显示/隐藏动作的方法。我想让系统管理员为用户选择特定的权限。例如：读写创建发送消息转发消息等...每个页面将包含将显示或不显示的部分，取决于权限。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:10:26.843

```
@if (User.IsInRole("Admin"))
{
    <div>Only administrators can see this message</div>
} 
```

# sqlite - 连接表：一个是普通表，另一个是 FTS 虚拟表

> ID：12890164
> 
> 赞同：1
> 
> 时间：2012-10-15T06:09:11.750
> 
> 标签：sqlite, full-text-search, fts4

将普通表与 FTS 表连接起来是个好主意吗？我想知道它是否会影响 FTS 表的原始性能，还是不会？当然，查询肯定会使用 MATCH 子句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T08:00:54.237

当你连接两个表`A`时`B`，SQLite 要么从表中查找匹配记录，要么从表中`A`查找`B`匹配记录。`B``A`

如果表上有索引`A`或`B`使这些查找快速，则连接速度很快。如果两个表上都有索引，SQLite 会选择它估计效率更高的一个。

所以，回答你的问题：如果你要么

*   使用 将字段连接到 FTS 字段`MATCH`，或连接到 FTS 表的`rowid`，或
*   将 FTS 字段连接到在另一个表中索引的某个字段。

要检查这一点，请使用[`EXPLAIN QUERY PLAN`](http://www.sqlite.org/eqp.html).

# django - solr 中的选择性排序

> ID：12890165
> 
> 赞同：0
> 
> 时间：2012-10-15T06:09:14.963
> 
> 标签：django, solr, django-haystack

我有许多文档被索引到 Solr。我现在面临一个要求，搜索结果应该根据它们的`scores`. 在**不完全匹配的情况下**，如果出现平局，则将对名为 的字段应用另一级别的排序`priority`。

我在 django 1.4 中使用 solr 和 django-haystack。

我可以/应该做什么来达到我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:16:51.460

edismax 的提升可用于此目的。它适用于所有分数，但如果它是一个小值，它只会对平局或接近平局产生影响。基本分数的显着差异不会重新排序。

见：[http ://wiki.apache.org/solr/ExtendedDisMax#boost_.28Boost_Function.2C_multiplicative.29](http://wiki.apache.org/solr/ExtendedDisMax#boost_.28Boost_Function.2C_multiplicative.29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:02:13.590

我不了解 django 或 django-haystack，但如果您想在 solr 中进行二次排序，只需将多个排序指定为逗号分隔列表。例子...

```
score desc, priority desc 
```

...将按分数对文档进行排序，如果两个文档具有相同的分数，则将按优先级字段排序。

但是请注意，这只会为具有*完全相同*的分值的事物提供二次排序 - 您可能希望通过您的优先级字段“提高”文档的分数（即：实际影响分数，在排序之前） .

# iphone - iPhone用锚点画线

> ID：12890167
> 
> 赞同：0
> 
> 时间：2012-10-15T06:09:19.387
> 
> 标签：iphone, drawing

我需要创建一个简单的绘图应用程序。这个应用程序由一条带有两个锚点的线组成，两端各有一个。用户应该能够在锚点上触地并拖动它以操纵线的长度和斜率。此外，用户应该能够触摸连接两个锚点的线以移动它以及屏幕周围的锚点。

我在这里有点难过，我知道我可以通过简单地使用 touch down/up 来控制长度和坡度，但我认为这不适用于多条线？！谁能指出我应该看的方向吗？非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:45:48.697

我一直在研究类似的问题，最终我使用了类似于此链接的 UIWebView

[http://mbostock.github.com/protovis/ex/splines.html](http://mbostock.github.com/protovis/ex/splines.html)

我可以使用

```
[myWebview stringByEvaluatingJavaScriptFromString....] 
```

我必须对 JS 代码进行一些更改来处理触摸开始和触摸结束事件，而不是鼠标按下和鼠标抬起来让它在 iPad/iPhone 上工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:13:17.017

编辑：我重写了答案，这次是通过实施一个简短的测试。下面的源代码执行以下操作： 在触摸时，它检查列表中每个点`self.lineDrawView.lines`到当前触摸点的距离。如果距离小于 10 px，则保存当前触摸点及其列表索引。

如果没有找到匹配点，则另一个函数遍历由内部对组成的所有行`self.lineDrawView.lines`并计算到每行的距离（[此处](http://forums.codeguru.com/showthread.php?194400-Distance-between-point-and-line-segment/page2)借用的到行代码的距离）。同样，如果距离低于 10 px，则保存当前触摸点以及当前行的起点和终点。

然后，在触摸移动时，要么移动保存的点，要么根据前一个触摸点和当前触摸位置之间的距离重新计算保存的线。

视图控制器的标题：

```
#import <UIKit/UIKit.h>
#import "myView.h"

@interface ViewController : UIViewController
{
    CGPoint dragStartingPoint, lineOriginStart, lineOriginEnd;
    int currentPointIndex, currentLineIndex;
}

@property (retain) myView *lineDrawView;
@property (retain) UITouch *currentTouch;
@end 
```

视图控制器的来源：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.lineDrawView = [[myView alloc] initWithFrame:self.view.frame];
    [self.view addSubview:self.lineDrawView];
    self.lineDrawView.lines = [[NSMutableArray alloc] init];
    [self.lineDrawView.lines addObject:[NSValue valueWithCGPoint:CGPointMake( 10,  10)]];
    [self.lineDrawView.lines addObject:[NSValue valueWithCGPoint:CGPointMake(300, 100)]];
    [self.lineDrawView.lines addObject:[NSValue valueWithCGPoint:CGPointMake(200, 400)]];
    [self.lineDrawView.lines addObject:[NSValue valueWithCGPoint:CGPointMake( 50, 300)]];
}

-(float)distanceOfPoint:(CGPoint)p toLineWith:(CGPoint)v0 and:(CGPoint)v1
{
    float vx = v0.x - p.x;
    float vy = v0.y - p.y;
    float ux = v1.x - v0.x;
    float uy = v1.y - v0.y;
    float length = ux * ux + uy * uy;
    float result;

    float det = (-vx * ux) + (-vy * uy);
    // if this is < 0 or > length then it's outside the line segment
    if(det < 0)
        result = (v0.x - p.x) * (v0.x - p.x) + (v0.y - p.y) * (v0.y - p.y);
    else if(det > length)
        result = (v1.x - p.x) * (v1.x - p.x) + (v1.y - p.y) * (v1.y - p.y);
    else
    {
        det = ux * vy - uy * vx;
        result = (det * det) / length;
    }

    return sqrtf(result);
}

-(int)getLineNearToPoint:(CGPoint)p withMaximumDistance:(float)d
{
    CGPoint p1, p2;
    NSValue *v1, *v2;

    for(int i=0; i<self.lineDrawView.lines.count/2; i++)
    {
        v1 = [self.lineDrawView.lines objectAtIndex:i*2+0];
        v2 = [self.lineDrawView.lines objectAtIndex:i*2+1];
        p1 = [v1 CGPointValue];
        p2 = [v2 CGPointValue];
        if([self distanceOfPoint:p toLineWith:p1 and:p2]<=d) return i;
    }

    return -1;
}

-(int)getPointNearToPoint:(CGPoint)p withinRadius:(float)r
{
    float dx, dy;
    CGPoint p2;
    NSValue *v;

    for(int i=0; i<self.lineDrawView.lines.count; i++)
    {
        v = [self.lineDrawView.lines objectAtIndex:i];
        p2 = [v CGPointValue];
        dx = p.x - p2.x;
        dy = p.y - p2.y;
        if(sqrtf(dx*dx + dy*dy)<=r) return i;
    }

    return -1;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    int iPoint, iLine;
    currentLineIndex = -1;
    currentPointIndex = -1;

    for(UITouch *t in touches)
    {
        // check if a starting/ending point is near the current touch
        CGPoint p = [t locationInView:self.view];
        iPoint = [self getPointNearToPoint:p withinRadius:10];
        if(iPoint != -1)
        {
            currentPointIndex = iPoint;
            self.currentTouch = t;
        }

        // check if current touch is near a line
        iLine = [self getLineNearToPoint:p withMaximumDistance:10];
        if((iLine != -1) && (iPoint == -1))
        {
            currentLineIndex = iLine;
            self.currentTouch = t;

            // save current touch position
            dragStartingPoint = p;

            // save original starting/ending point
            NSValue *v1 = [self.lineDrawView.lines objectAtIndex:iLine*2+0];
            NSValue *v2 = [self.lineDrawView.lines objectAtIndex:iLine*2+1];
            lineOriginStart = [v1 CGPointValue];
            lineOriginEnd = [v2 CGPointValue];
        }

        // only use first touch, discard the rest
        break;
    }
    [self.lineDrawView setNeedsDisplay];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    for(UITouch *t in touches)
    {
        // only respond to touch move events of the touch previously assigned
        // to a point or line
        if(t != self.currentTouch) continue;

        CGPoint p = [t locationInView:self.view];

        // Are we moving a starting/ending point?
        if(currentPointIndex != -1)
        {
            NSValue *v = [NSValue valueWithCGPoint:p];
            [self.lineDrawView.lines replaceObjectAtIndex:currentPointIndex withObject:v];
        }

        // Are we moving a line?
        if(currentLineIndex != -1)
        {
            // calculate drag distance
            float dx = p.x - dragStartingPoint.x;
            float dy = p.y - dragStartingPoint.y;

            // calculate new starting/ending points
            CGPoint p1 = CGPointMake(lineOriginStart.x+dx, lineOriginStart.y+dy);
            CGPoint p2 = CGPointMake(lineOriginEnd.x+dx, lineOriginEnd.y+dy);
            NSValue *v1 = [NSValue valueWithCGPoint:p1];
            NSValue *v2 = [NSValue valueWithCGPoint:p2];

            // replace old values
            [self.lineDrawView.lines replaceObjectAtIndex:currentLineIndex*2+0 withObject:v1];
            [self.lineDrawView.lines replaceObjectAtIndex:currentLineIndex*2+1 withObject:v2];
        }

        // only use first touch, discard the rest
        break;
    }
    [self.lineDrawView setNeedsDisplay];
}

- (void)dealloc
{
    self.lineDrawView.lines = nil;
    [super dealloc];
}
@end 
```

绘图视图的标题：

```
#import <UIKit/UIKit.h>

@interface myView : UIView

@property (retain) NSMutableArray *lines;
@end 
```

绘图视图来源：

```
#import "myView.h"

@implementation myView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if(self) {
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    // fill background
    CGContextSetRGBFillColor(context, 0.5, 0.5, 0.5, 1.0);
    CGContextFillRect(context, self.frame);

    // draw lines
    CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
    CGContextSetLineWidth(context, 2.0);
    for(int i=0; i<self.lines.count/2; i++)
    {
        CGPoint p1 = [[self.lines objectAtIndex:i*2+0] CGPointValue];
        CGPoint p2 = [[self.lines objectAtIndex:i*2+1] CGPointValue];
        CGContextMoveToPoint(context, p1.x, p1.y);
        CGContextAddLineToPoint(context, p2.x, p2.y);
    }
    CGContextStrokePath(context);
}

@end 
```

# android - Android 音量键事件捕获

> ID：12890170
> 
> 赞同：2
> 
> 时间：2012-10-15T06:09:59.703
> 
> 标签：android, cordova, phonegap-plugins

我目前正在为`android`..

`volume`当用户按下 android 手机时我如何捕获关键事件

我正在使用**电话间隙**...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T09:05:29.387

使用以下代码获取关键事件

在现有的 java 类中使用此代码

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    //If volume down key
    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
        this.loadUrl("javascript:cordova.fireDocumentEvent('volumedownbutton');");
        return true;
    } else if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) {
        this.loadUrl("javascript:cordova.fireDocumentEvent('volumeupbutton');");
        return true;
    } else {
        //return super.onKeyDown(keyCode, event); 
    }
    //return super.onKeyDown(keyCode, event);

    return true;
} 
```

并在您的 html 页面中使用以下内容

```
document.addEventListener("volumeupbutton", onVolumeUpKeyDown, false);  

document.addEventListener("volumedownbutton", volumedownbutton, false);

function    onVolumeUpKeyDown()
{
    alert("Working Up")     
}

function    volumedownbutton()
{
    alert("Working Down")       
} 
```

我从这里得到了这个答案[**https://stackoverflow.com/questions/9770901/phonegap-event-volumeupbutton-and-volumedownbutton-is-not-working**](https://stackoverflow.com/questions/9770901/phonegap-event-volumeupbutton-and-volumedownbutton-is-not-working)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T06:18:01.840

如 Phonegap API Docs 中所述，以下代码仅适用于 Blackberry：

```
document.addEventListener("volumeupbutton", yourCallbackFunction, false);
document.addEventListener("volumedownbutton", yourCallbackFunction, false); 
```

但是检查一下也没有什么坏处。它可能适用于最新的 Phonegap SDK

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:13:48.450

您可以在 PhoneGap 中为音量键按钮添加事件侦听器，如 PhoneGap 文档中所述，如下[所示](http://docs.phonegap.com/en/1.3.0/phonegap_events_events.md.html#volumedownbutton)

谢谢

# xaml - 在资源 windows-8 中创建新颜色

> ID：12890172
> 
> 赞同：1
> 
> 时间：2012-10-15T06:10:13.273
> 
> 标签：xaml, windows-8, microsoft-metro

我想在 windows-8 中用我自己的 RGB 值创建新颜色。
就像 android 中的 color.xml 一样。
有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T07:43:54.597

我创建了一个`Color.xaml`资源字典如下

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <SolidColorBrush x:Key="MyBlack" Color="#000000"/>
</ResourceDictionary> 
```

然后在`App.xaml`我添加了以下内容

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            ...
            ...
            <ResourceDictionary Source="Color.xaml"/>
    </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

在我的`Text.xaml`我用过这个

```
 <TextBlock Text="How are you?" Foreground="{StaticResource MyBlack}"/> 
```

**PS**感谢[Antonio Bakula](https://stackoverflow.com/users/351383/antonio-bakula)的[回答](https://stackoverflow.com/a/12890677/468724)，也请看看这个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T06:58:02.843

像这样定义颜色：

```
<Page.Resources>
  <ResourceDictionary>
    <SolidColorBrush x:Key="MyCustomColor">#FFDEDEDE</SolidColorBrush>
  </ResourceDictionary>
</Page.Resources> 
```

像这样使用它：

```
<TextBlock Text="Test" Foreground="{StaticResource MyCustomColor}"></TextBlock> 
```

如果您想定义您的自定义应用程序样式，请查看：

[http://www.markermetro.com/2012/07/technical/windows-8-overriding-metro-app-resources/](http://www.markermetro.com/2012/07/technical/windows-8-overriding-metro-app-resources/)

# c# - BerkeliumSharp 在 Window XP 上工作，在 Windows 8 上静默失败

> ID：12890173
> 
> 赞同：1
> 
> 时间：2012-10-15T06:10:21.680
> 
> 标签：c#, windows-8, berkelium

我正在使用此处找到的 BerkeliumSharp：[http ://code.google.com/p/berkelium-sharp/](http://code.google.com/p/berkelium-sharp/)

我正在尝试学习如何使用它，但遇到了问题。以下代码在 Windows XP 上正常运行，并输出 document.html。但是在 Windows 8 上，没有事件触发，基本上是静默失败。

什么可能导致这种情况？

```
 static void Main()
    {
        BerkeliumSharp.Init(new System.IO.FileInfo(Assembly.GetEntryAssembly().Location).DirectoryName);
        Context context = Context.Create();
        Window window = new Window(context);
        window.ChromeSend += new ChromeSendHandler(window_ChromeSend);
        window.Load += new BasicHandler(window_Load);
        window.Resize(1024, 768);
        window.NavigateTo("http://www.google.com");

        while (true)
        {
            Berkelium.Managed.BerkeliumSharp.Update();
            System.Threading.Thread.Sleep(100);
        }
    }

    static void window_Load(Window window)
    {
        window.ExecuteJavascript("window.chrome.send(document.documentElement.innerHTML);");
    }
    static void window_ChromeSend(Window window, string message, string[] arguments)
    {
        System.IO.File.WriteAllText("document.html", message);
    } 
```

# delphi - 如何在 FM2 中从 TMediaPlayerControl 截屏？

> ID：12890175
> 
> 赞同：2
> 
> 时间：2012-10-15T06:10:33.943
> 
> 标签：delphi, firemonkey, delphi-xe3

为了执行此操作，我使用以下代码：

```
procedure TForm4.Button2Click(Sender: TObject);
begin
  MediaPlayerControl1.MakeScreenshot.SaveToFile('c:\temp\e.bmp');
end; 
```

当此代码运行保存到文件的位图时；但它始终是黑色图像。我正在努力解决这个问题。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:22:54.993

MakeScreenshot 实际上是 FMX.Types.TControl 的一种方法，[旨在](http://docwiki.embarcadero.com/Libraries/XE3/en/FMX.Types.TControl.MakeScreenshot)将底层窗口的内容绘制到位图上。由于 DirectShow 使用在大多数情况下使用 DirectDraw 和覆盖表面来渲染视频帧的[视频渲染器过滤器，因此 MakeScreenshot 方法永远不会“看到”视频帧 - 因此是黑色位图。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407349%28v=vs.85%29.aspx)似乎 TMediaPlayer 没有内置方法来访问视频帧，就像在[TVideoCaptureDevice的](http://docwiki.embarcadero.com/Libraries/XE3/en/FMX.Media.TVideoCaptureDevice)[SampleBufferToBitmap](http://docwiki.embarcadero.com/Libraries/XE3/en/FMX.Media.TVideoCaptureDevice.SampleBufferToBitmap)方法中预见的那样

# php - 除法没有输出正确的值（PHP）

> ID：12890178
> 
> 赞同：-1
> 
> 时间：2012-10-15T06:11:12.740
> 
> 标签：php, division

我对计算的输出有疑问。我只是想除以数字，但结果不正确。

假设 $some_value = 1160.00，$another_value = 1360。

```
<?php
$money_earned = $some_value;
$cost_proposed = $another_value;                               
$money_percentage = (($money_earned / $cost_proposed) * 100);
?> 
```

返回值为：0.073529411764706

但实际值应该是：85.29411764705882

为什么这给了我不正确的输出值？

**编辑：**这是我的真实代码：

```
$money_earned = calculate_cost($_GET['track']);
$cost_proposed = $res[0]['cost_proposed'];
$money_percentage = (($money_earned / $cost_proposed) * 100); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:26:10.477

你在某个地方的数学有错误。

0.073529411764706 * 1360 = 100

因此，您在代码中实际拥有的是：

```
$money_percentage = 100 / $cost_proposed 
```

仔细检查你的代码，看看你从哪里得到这个等式。

编辑：根据评论，您正在将带有逗号的字符串转换为整数。这在逗号处中断，因此您以 1 结尾。完全适合数学。

去掉逗号并转换为整数以使其工作。理想情况下，将所有数字存储为数字，仅在屏幕上显示时添加逗号。

```
$number = (int)str_replace("," , "", $string); 
```

# android - 安装到设备时对 .apk 文件的限制

> ID：12890184
> 
> 赞同：1
> 
> 时间：2012-10-15T06:11:29.620
> 
> 标签：android, android-intent

在安装到设备时，我必须对 apk 文件提供一些限制，并考虑执行以下限制：

1.  .apk 文件应仅安装在特定设备上，因此当用户尝试将其安装到其他设备时，它应该闪烁错误消息“不是要安装的正确设备”，因此用例是用户将 apk 文件复制到他的设备中并双击它，它将检查设备是否正确安装，如果没有，则不应安装并闪烁上述错误。

2.  提供密码保护：当用户双击apk文件时，它必须弹出密码字段，用户必须提供正确的密码，并且必须根据清单文件中提到的密码验证密码。

请为我提供一些示例的解决方案。

谢谢，

皮克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:22:11.570

密码保护 apk 文件似乎是不可能的。你可以参考：

[给apk密码](https://stackoverflow.com/questions/12577058/to-give-password-to-the-apk)

相反，您可以在安装后要求用户输入密码。

这是获取设备名称的方法：

[获取 Android 设备名称](https://stackoverflow.com/questions/7071281/get-android-device-name)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:01:27.923

与密码保护应用程序一样，我会说在不安装 .apk 的情况下限制设备是相当不可能的。`Build.MANUFACTURER`不过，您可以使用和从应用程序内部检查设备制造商和型号`Build.MODEL`；然后，如果设备和/或制造商不是您想要的，您可以显示 Toast 并强制关闭应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:02:06.367

这两个功能都可以嵌入到 App 逻辑本身中。从`Application`课堂上`onCreate()`做一点检查就可以了。就像检查设备 IMEI 等并设置一个布尔标志，任何活动都可以检查它。

您的应用程序无法控制自己的安装。

您可以在 Google Play 商店发布时打开*版权保护* ，也可以从您的 Play 商店开发者控制台限制设备（品牌和型号）。

可以在应用程序的清单文件本身中提供功能明智的设备限制（例如仅带摄像头的设备等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T10:27:46.267

与保护您的 APK 不受未知来源的影响一样，您可以向您的应用程序添加许可，否则您可以在应用程序类中编写简单的函数并从 onCreate() 方法调用。在函数中，您需要检查设备名称和型号，如果允许则返回 true，否则返回 false。根据结果​​，您可以允许或退出应用程序。

# .net - 为 CRM 2011 中的自定义工作流活动动态设置“ReferenceTarget”属性

> ID：12890186
> 
> 赞同：5
> 
> 时间：2012-10-15T06:11:36.950
> 
> 标签：.net, dynamics-crm-2011, workflow-activity

我有一个自定义工作流活动，它根据传递的输入参数（实体名称和名称）创建记录。现在，我希望能够将创建的记录作为输出参数传递。但是要声明一个 EntityReference 类型的 OutArgument，我必须设置 ReferenceTarget 属性。由于我不知道正在创建哪种实体类型，因此我希望能够动态设置此属性。当我尝试在“ReferenceTarget”属性中使用属性或变量时，它无法识别它。

我该怎么做呢 ？请帮忙。

```
[Input("Entity Name")]
public InArgument<string> EntityName { get; set; }

[Input("Name")]
public InArgument<string> Name { get; set; }

[Output("Created Record")]
[ReferenceTarget("contact")]     <<=== how do i set this dynamically??
public OutArgument<EntityReference> CreatedRecord { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:14:56.090

据我所知你不能，我怀疑这是为了支持工作流编辑器的行为，它怎么知道要呈现哪些选项？

当我过去遇到这种情况时，我创建了一个可视化的工作室模板，我可以使用它来快速生成我需要的各种版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T18:17:30.750

最好的解决方法（不是一个简洁的方法）是创建与您怀疑可能需要作为 ReferenceTarget 传递的许多不同实体类型一样多的输入参数，然后根据工作流程中的条件调用自定义工作流程活动并设置 apt 输入参数，然后在工作流的 Execute 方法中，您可以检查哪个输入参数不是空白并进行相应处理。

工作流输入参数保留在开发人员内部，因此只要您完成工作并在不同场景中灵活使用相同的自定义工作流活动，尤其是当您不知道必须处理哪种类型的实体引用时，它就可以了和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-28T08:20:16.997

> 到目前为止，这实际上是不可能的，但是有这个解决方法。

我建议创建一个自定义实体调用`Context`，并引用您计划传递的所有**输入参数。**并填充`context[""]`as`EntityReference`以将其作为输出返回。

```
[Output("Created Record")]
[ReferenceTarget("new_context")]
public OutArgument<EntityReference> CreatedRecord { get; set; }

//set whatever you wanted to export
var entity = new Context();
entity["new_contact"] = ? //populate contact if created as per input
entity["new_account"] = ? //populate account if created as per input
// and so on 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-10T21:48:30.833

EntityReference 本质上具有目标实体类型。你无法改变这一点。如果需求是动态的，您最好启动插件或在工作流程序集中执行后续逻辑。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-25T16:28:55.407

```
//Set lookup for Account(Customer)
[RequiredArgument]
[Input("Select Account to Assign")]
[ReferenceTarget("account")]
public InArgument<EntityReference> account { get; set; } 
```

# javascript - 富 || (foo = this.foo) 它有什么作用？

> ID：12890190
> 
> 赞同：1
> 
> 时间：2012-10-15T06:12:13.083
> 
> 标签：javascript, backbone.js

我想知道这条线的作用：

```
foo || (foo = this.foo) 
```

在下面的函数定义中

```
someFunction: function(foo)  
{   
    foo || (foo = this.foo);  
    ...  
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T06:19:50.290

这可能更常见地写成：

```
someFunction: function(foo)  
{   
    foo = foo || this.foo;
    // do something with foo
} 
```

它所做的只是将`foo`参数设置为上下文的`foo`实例变量，如果：

*   `someFunction`不带参数调用
*   `someFunction``falsy`使用诸如 false、空字符串、0、null 或 undefined 之类的参数调用。

例如，假设 someFunction 在对象字面量中定义，如下所示：

```
var myObject = {
    foo: "default value of foo",
    someFunction: function(foo)  
    {   
        foo = foo || this.foo;
        // do something with foo
    }
} 
```

这样，如果需要，`someFunction`的参数`foo`将回退到默认值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T06:13:36.500

如果`foo`没有交给`someFunction`，或者如果 的值`foo`评估为假，`foo`则将其`this.foo`作为“默认”值

编辑：它之所以有效，是因为包括 JS 在内的许多编程语言都使用[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。如果`foo`评估结果为真，引擎不会费心评估该`(foo = this.foo)`部分，因为整个语句已经为真。

如果`foo`为 false （记住 JS 不是强类型的，所以在这种用法中，那种意思是“不提供”），然后评估第二部分*，*并最终设置`foo`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:36:10.263

```
foo || (foo = this.foo); 
```

是相同的

```
if (!!!foo) {
    foo = this.foo;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T06:13:49.857

据我了解，它会检查`foo`参数是否已设置，如果未设置，则使用默认值 ( `this.foo`) 覆盖它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T06:14:47.147

通常，`foo`是虚拟变量的占位符。

```
someFunction: function(foo)
{
    // If foo is null, then foo is assigned with this.foo
    // If not, the original value of foo is taken.
    foo || (foo = this.foo);
} 
```

# emacs - 如何在 emacs org-mode 中突出显示当前子树？

> ID：12890193
> 
> 赞同：8
> 
> 时间：2012-10-15T06:12:31.680
> 
> 标签：emacs, org-mode

如何使**当前子树**更清晰可识别？

使“行号”粗体是可以的，或者只是在当前子树的整个文本下划线也很好。

我的意思是，有人可以帮我提供一些***elisp***代码吗？实现这一点（例如，强调整个子树）？

* * *

我不能给你看下划线，所以我**加粗**了这个例子：

> * [1] 这是一个子树
> 
> 一些文字
> 
> ** **[1.1] 子树 n°2**
> 
> **还有文字**
> 
> *** [1.1.1]子树你好
> 
> ** [2] 祝你有美好的一天

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:20:00.070

加载以下定义

```
(defun org-subtree-highlight-find-overlay (p1 p2)
  "Find an overlay with property 'org-subtree-highlight-overlay"
  (defun org-subtree-highlight-find-overlay01 (overlays)
    (if overlays
    (let ((ov (car overlays)))
      (if (overlay-get ov 'org-subtree-highlight-overlay)
          ov
        (org-subtree-highlight-find-overlay01 (cdr overlays))))
      nil))
  (org-subtree-highlight-find-overlay01 (overlays-in p1 p2)))

(defun org-subtree-highlight-toggle ()
  "Toggle subtree highlighting"
  (interactive)
  (save-excursion
    (let* ((p1 (progn (org-back-to-heading t) (point)))
       (p2 (progn (outline-next-visible-heading 1)
              (if (and (org-at-heading-p) (not (eobp))) (backward-char 1))
              (point)))
       (ov (org-subtree-highlight-find-overlay p1 p2)))
      (if ov
      (delete-overlay ov)
    (setq ov (make-overlay p1 p2))
    (overlay-put ov 'org-subtree-highlight-overlay t)
    ;; set a format for the subtree (can be also 'bold)
    (overlay-put ov 'font-lock-face 'underline)))))

;; keybindin example
(add-hook 'org-mode-hook
      (lambda ()
        (local-set-key "\C-c\C-h" 'org-subtree-highlight-toggle))) 
```

结果应该是这样的

![emacs 截图](../Images/e79ad00858fe3b93c37926a4dc9696e7.png)

# android - 如何设置进度条

> ID：12890195
> 
> 赞同：0
> 
> 时间：2012-10-15T06:13:07.173
> 
> 标签：android

```
public class circularlistparsing extends ActivityGroup {

public int currentPage = 1;
public ListView lisView1;
static final String KEY_ITEM = "docdetails";
static final String KEY_ITEM2 = "info";
static final String KEY_NAME1 = "";
static final String KEY_NAME = "heading";
static final String KEY_DATE = "date";
public Button btnNext;
public Button btnPre;
public static String url = "http://dev.taxmann.com/TaxmannService/TaxmannService.asmx/GetCircularList";
TextView txtreord;
TextView totalpage;
TextView pagenumber;
ProgressDialog dialog;
TextView title;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    txtreord = (TextView) findViewById(R.id.recored);
    totalpage = (TextView) findViewById(R.id.totalpage);
    pagenumber = (TextView) findViewById(R.id.pagenumber);
    title = (TextView) findViewById(R.id.title);

    title.setText("Cirrcular");
    // listView1
    lisView1 = (ListView) findViewById(R.id.listView1);

    // Next
    btnNext = (Button) findViewById(R.id.btnNext);
    // Perform action on click
    btnNext.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            currentPage = currentPage + 1;

            // new YourTask().execute();
            ShowData();
            pagenumber.setText("Of" + currentPage + "]");
        }
    });

    // Previous
    btnPre = (Button) findViewById(R.id.btnPre);
    // Perform action on click
    btnPre.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            currentPage = currentPage - 1;

            // new YourTask().execute();
            ShowData();
            pagenumber.setText("Of" + currentPage + "]");
        }
    });

    ShowData();
 }

public void ShowData() {
    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(url); // getting XML

    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);

    NodeList n2 = doc.getElementsByTagName(KEY_ITEM2);

    int displayPerPage = 10; // Per Page
    int TotalRows = nl.getLength();

    txtreord.setText(TotalRows + "Records|"); // number of records

    int indexRowStart = ((displayPerPage * currentPage) - displayPerPage);
    int TotalPage = 0;
    if (TotalRows <= displayPerPage) {
        TotalPage = 1;
    } else if ((TotalRows % displayPerPage) == 0) {
        TotalPage = (TotalRows / displayPerPage);
    } else {
        TotalPage = (TotalRows / displayPerPage) + 1; // 7
        TotalPage = (int) TotalPage; // 7
    }

    totalpage.setText("Page[" + TotalPage);

    int indexRowEnd = displayPerPage * currentPage; // 5
    if (indexRowEnd > TotalRows) {
        indexRowEnd = TotalRows;
    }

    // Disabled Button Next
    if (currentPage >= TotalPage) {
        btnNext.setEnabled(false);
    } else {
        btnNext.setEnabled(true);
    }

    // Disabled Button Previos
    if (currentPage <= 1) {
        btnPre.setEnabled(false);
    } else {
        btnPre.setEnabled(true);
    }

    // Load Data from Index
    int RowID = 1;
    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
    HashMap<String, String> map;

    // RowID
    if (currentPage > 1) {
        RowID = (displayPerPage * (currentPage - 1)) + 1;
    }

    for (int i = indexRowStart; i < indexRowEnd; i++) {
        Element e = (Element) nl.item(i);

        Element e2 = (Element) n2.item(i);

        String date = e2.getAttribute(KEY_DATE);
        // adding each child node to HashMap key => value

        map = new HashMap<String, String>();
        map.put("RowID", String.valueOf(RowID));

        map.put(KEY_DATE, date);

        String mytime = date;
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmdd");
        Date myDate = null;
        try {
            myDate = dateFormat.parse(mytime);

        } catch (ParseException t) {
            t.printStackTrace();
        } catch (java.text.ParseException t) {
            // TODO Auto-generated catch block
            t.printStackTrace();
        }

        SimpleDateFormat timeFormat = new SimpleDateFormat("yyyy-MM-dd");
        String finalDate = timeFormat.format(myDate);

        // System.out.println("rrrrrrrrrrrrr"+finalDate);

        String Heading = parser.getValue(e, KEY_NAME);

        int a = Heading.indexOf("|");
        String beforeSubString = Heading.substring(0, a);
        String afterSubString = Heading.substring(a, Heading.length())
                .replace("|", "") + "[" + finalDate + "]";
        // String
        // final1="<b>"+beforeSubString+"<b>"+"|"+afterSubString.replace("|",
        // "|\n")
        // .replace("|", "");
        // String k=Html.fromHtml(final1).toString();
        //
        // Html.fromHtml(final1);

        map.put(KEY_NAME, beforeSubString);
        map.put(KEY_NAME1, afterSubString);

        // adding HashList to ArrayList
        menuItems.add(map);

        RowID = RowID + 1;

    }

    SimpleAdapter sAdap;
    sAdap = new SimpleAdapter(circularlistparsing.this, menuItems,
            R.layout.list_item,
            new String[] { "RowID", KEY_NAME1, KEY_NAME }, new int[] {
                    R.id.ColRowID, R.id.ColName, R.id.textView1 });
    lisView1.setAdapter(sAdap);

    lisView1.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

            Intent i = new Intent(circularlistparsing.this, detail.class);
            // sending data to new activity
            // i.putExtra("product", product);
            startActivity(i);

        }
    });

}
} 
```

这是我的源代码这个活动公共类循环列表解析扩展了活动组这是我的活动这个活动正在加载onButton单击另一个类我想设置进度条以加载数据请告诉我如何实现这个我做了很多尝试但无法显示进度条我使用了异步任务然后也无法显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:41:41.863

使用此代码更改您的代码。

```
public int currentPage = 1;
public ListView lisView1;
static final String KEY_ITEM = "docdetails";
static final String KEY_NAME = "heading";
public Button btnNext;
public Button btnPre;
int TotalPage = 0;
int ERROR_CODE;
ArrayList<HashMap<String, String>> menuItems;
public static String url = "paste your URL";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // listView1
    lisView1 = (ListView) findViewById(R.id.listView1);

    // Next
    btnNext = (Button) findViewById(R.id.btnNext);

    // Previous
    btnPre = (Button) findViewById(R.id.btnPre);
    // Perform action on click
    btnNext.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            currentPage = currentPage + 1;
            new Data().execute();
        }
    });

    // Perform action on click
    btnPre.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            currentPage = currentPage - 1;
            new Data().execute();
        }
    });

    new Data().execute();
}

private class Data extends AsyncTask<Object, Integer, Object> {
    private ProgressDialog progress;

    @Override
    protected void onPreExecute() {

        progress = ProgressDialog.show(AndroidXMLParsingActivity.this, "",
                "Loading...");

        super.onPreExecute();
    }

    @Override
    protected Object doInBackground(Object... params) {
        // do hard work here
        ShowData();
        return null;
    }

    @Override
    protected void onPostExecute(Object result) {

        progress.dismiss();
        if (ERROR_CODE == 1) {
            Toast.makeText(AndroidXMLParsingActivity.this, "No Xml found.",
                    Toast.LENGTH_SHORT).show();
        } else if (ERROR_CODE == 2) {
            Toast.makeText(AndroidXMLParsingActivity.this, "No doc found.",
                    Toast.LENGTH_SHORT).show();
        } else {
            // Disabled Button Next
            if (currentPage >= TotalPage) {
                btnNext.setEnabled(false);
            } else {
                btnNext.setEnabled(true);
            }

            // Disabled Button Previos
            if (currentPage <= 1) {
                btnPre.setEnabled(false);
            } else {
                btnPre.setEnabled(true);
            }

            SimpleAdapter sAdap;
            sAdap = new SimpleAdapter(AndroidXMLParsingActivity.this,
                    menuItems, R.layout.list_item, new String[] { "RowID",
                            KEY_NAME }, new int[] { R.id.ColRowID,
                            R.id.ColName });
            lisView1.setAdapter(sAdap);
        }
    }
}

public void ShowData() {
    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(url); // getting XML
    if (xml != null) {
        Document doc = parser.getDomElement(xml); // getting DOM element
        if (doc != null) {
            NodeList nl = doc.getElementsByTagName(KEY_ITEM);

            int displayPerPage = 5; // Per Page
            int TotalRows = nl.getLength();
            int indexRowStart = ((displayPerPage * currentPage) - displayPerPage);

            if (TotalRows <= displayPerPage) {
                TotalPage = 1;
            } else if ((TotalRows % displayPerPage) == 0) {
                TotalPage = (TotalRows / displayPerPage);
            } else {
                TotalPage = (TotalRows / displayPerPage) + 1; // 7
                TotalPage = (int) TotalPage; // 7
            }
            int indexRowEnd = displayPerPage * currentPage; // 5
            if (indexRowEnd > TotalRows) {
                indexRowEnd = TotalRows;
            }

            // Load Data from Index
            int RowID = 1;
            menuItems = new ArrayList<HashMap<String, String>>();
            HashMap<String, String> map;

            // RowID
            if (currentPage > 1) {
                RowID = (displayPerPage * (currentPage - 1)) + 1;
            }

            for (int i = indexRowStart; i < indexRowEnd; i++) {
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map = new HashMap<String, String>();
                map.put("RowID", String.valueOf(RowID));
                map.put(KEY_NAME, parser.getValue(e, KEY_NAME));

                // adding HashList to ArrayList
                menuItems.add(map);

                RowID = RowID + 1;
            }
        }
        ERROR_CODE = 2;
    }
    ERROR_CODE = 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:23:18.357

试试这个代码，

```
/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);      

    RelativeLayout fv = new RelativeLayout(this);
    ProgressBar pb = new ProgressBar(this);
    fv.setGravity(Gravity.CENTER);
    fv.addView(pb);
    setContentView(fv); 
} 
```

这对我来说很好..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:24:46.967

```
@Override
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
txtreord = (TextView) findViewById(R.id.recored);
totalpage = (TextView) findViewById(R.id.totalpage);
pagenumber = (TextView) findViewById(R.id.pagenumber);
title = (TextView) findViewById(R.id.title);

title.setText("Cirrcular");
// listView1
lisView1 = (ListView) findViewById(R.id.listView1);

// Next
btnNext = (Button) findViewById(R.id.btnNext);
// Perform action on click
btnNext.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        currentPage = currentPage + 1;

        // new YourTask().execute();
        ShowData();
        pagenumber.setText("Of" + currentPage + "]");
    }
});

// Previous
btnPre = (Button) findViewById(R.id.btnPre);
// Perform action on click
btnPre.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        currentPage = currentPage - 1;

        // new YourTask().execute();
        ShowData();
        pagenumber.setText("Of" + currentPage + "]");
      }
   });

   new NflAsyncTask().execute();

   }
}       
public class NflAsyncTask extends AsyncTask<Void, Void, Void> {

private ProgressDialog progressDialog;

protected void onPreExecute() {
    progressDialog = ProgressDialog.show(Activityname.this,
            "Please wait", "Loading Data ...", true);
}

@Override
protected Void doInBackground(Void... params) {
     XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(url); // getting XML

        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        NodeList n2 = doc.getElementsByTagName(KEY_ITEM2);

        int displayPerPage = 10; // Per Page
        int TotalRows = nl.getLength();

        txtreord.setText(TotalRows + "Records|"); // number of records

        int indexRowStart = ((displayPerPage * currentPage) - displayPerPage);
        int TotalPage = 0;
        if (TotalRows <= displayPerPage) {
            TotalPage = 1;
        } else if ((TotalRows % displayPerPage) == 0) {
            TotalPage = (TotalRows / displayPerPage);
        } else {
            TotalPage = (TotalRows / displayPerPage) + 1; // 7
            TotalPage = (int) TotalPage; // 7
        }

        totalpage.setText("Page[" + TotalPage);

        int indexRowEnd = displayPerPage * currentPage; // 5
        if (indexRowEnd > TotalRows) {
            indexRowEnd = TotalRows;
        }

        // Disabled Button Next
        if (currentPage >= TotalPage) {
            btnNext.setEnabled(false);
        } else {
            btnNext.setEnabled(true);
        }

        // Disabled Button Previos
        if (currentPage <= 1) {
            btnPre.setEnabled(false);
        } else {
            btnPre.setEnabled(true);
        }

        // Load Data from Index
        int RowID = 1;
        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, 
        HashMap<String, String> map;

        // RowID
        if (currentPage > 1) {
            RowID = (displayPerPage * (currentPage - 1)) + 1;
        }

        for (int i = indexRowStart; i < indexRowEnd; i++) {
            Element e = (Element) nl.item(i);

            Element e2 = (Element) n2.item(i);

            String date = e2.getAttribute(KEY_DATE);
            // adding each child node to HashMap key => value

            map = new HashMap<String, String>();
            map.put("RowID", String.valueOf(RowID));

            map.put(KEY_DATE, date);

            String mytime = date;
            SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmdd");
            Date myDate = null;
            try {
                myDate = dateFormat.parse(mytime);

            } catch (ParseException t) {
                t.printStackTrace();
            } catch (java.text.ParseException t) {
                // TODO Auto-generated catch block
                t.printStackTrace();
            }

            SimpleDateFormat timeFormat = new SimpleDateFormat("yyyy-MM-dd");
            String finalDate = timeFormat.format(myDate);

            // System.out.println("rrrrrrrrrrrrr"+finalDate);

            String Heading = parser.getValue(e, KEY_NAME);

            int a = Heading.indexOf("|");
            String beforeSubString = Heading.substring(0, a);
            String afterSubString = Heading.substring(a, Heading.length())
                    .replace("|", "") + "[" + finalDate + "]";
            // String
            // final1="<b>"+beforeSubString+"<b>"+"|"+afterSubString.replace("|",
            // "|\n")
            // .replace("|", "");
            // String k=Html.fromHtml(final1).toString();
            //
            // Html.fromHtml(final1);

            map.put(KEY_NAME, beforeSubString);
            map.put(KEY_NAME1, afterSubString);

            // adding HashList to ArrayList
            menuItems.add(map);
            RowID = RowID + 1;
        }

    return null;
}

protected void onPostExecute(Void result) {

    progressDialog.dismiss();
    SimpleAdapter sAdap;
    sAdap = new SimpleAdapter(circularlistparsing.this, menuItems,
            R.layout.list_item,
            new String[] { "RowID", KEY_NAME1, KEY_NAME }, new int[] {
                    R.id.ColRowID, R.id.ColName, R.id.textView1 });
    lisView1.setAdapter(sAdap);
}
}
} 
```

# python - 锁定类/文件以避免多次访问

> ID：12890202
> 
> 赞同：0
> 
> 时间：2012-10-15T06:13:55.393
> 
> 标签：python, pyserial

例子：

测试.py

```
class test_class(object):
    def display(self):
        print "Hello" 
```

锁1.py

```
from test import test_class
from time import sleep
obj = test_class()
while True:
    obj.display()
    sleep(1) 
```

锁2.py

```
from test import test_class
obj = test_class()
# Raise error if instance of test_class has been implemented before
try:
   obj.display()
except Exception as e:
   print e 
```

我需要做的是锁定（或任何东西）文件lock2.py的类（或整个test.py），如果在引发错误（或Expeption）之前已经为该类初始化了对象。尽管该示例可能看起来不相关，但我已经简化了该示例。

我尝试使用锁定文件即 test.py

```
http://packages.python.org/lockfile/lockfile.html

http://pypi.python.org/pypi/zc.lockfile 
```

但这似乎没有帮助。

* * *

## 这是一个实际的代码片段

comm_port.py

```
import serial
class CommPort(object):
    def __init__(self):
        self.ser = serial.Serial("/dev/ttyUSB0")
        # update in db (I've removed actual db update process
        # db.flag = 1 
```

访问文件1.py

```
from comm_port import CommPort
# if db.flag != 1:
    port = Commport()
    port.ser.flushInput()
    port.ser.flushOutput()
    ## will flush the buffer.. what if it flused the data that was supposed for go for accessing_file2
    port.ser.write("1")
    # do stuff using serial-port object "port"
    # lets say script gets busy for 30 secs for doing some stuffs
    # db.flag = 0 
```

访问文件2.py

```
from comm_port import CommPort
# if db.flag != 1:
    port = Commport()
    port.ser.flushInput()
    port.ser.flushOutput()
    port.ser.write("2")
    # do stuff using serial-port object "port"
    # lets say script gets busy for 40 secs for doing some stuffs
    # db.flag = 0 
```

这个例子可能看起来并不相关，但这是我的情况。两个文件也可以同时激活，但我一次只需要一个文件来操作。如果使用 comm_port.py 并且其余文件检查此标志，我所做的是创建一个 db 标志。如果 comm_port 忙，其他访问文件将无法工作。但我不认为它的最佳做法。

所以我需要检查是否有办法检查 CommPort 类是否被任何对象或锁定 comm_port.py 或任何其他现有的想法是最受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:23:20.280

您不能对这种情况应用锁定，因为导入不能以这种方式工作。导入的模块只执行**一次**，即第一次导入。后续导入仅从 复制现有引用`sys.modules`。您将需要弄清楚您的实际问题是什么，然后提出问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:05:54.437

您还可以检查实例是否已存在，如果存在则引发错误：

```
In [1]: import gc

In [2]: class Foo(object):
   ...:     pass

In [3]: bar=Foo()

In [4]: [item for item in gc.get_referrers(Foo) if isinstance(item,Foo)]
Out[4]: [<__main__.Foo at 0x187cc90>] 
```

使用`any([isinstance(item,Foo) for item in gc.get_referrers(Foo)])`，如果为真，则引发异常。

# php - 我应该如何编写一个接收文件的 Web API？

> ID：12890203
> 
> 赞同：1
> 
> 时间：2012-10-15T06:13:55.800
> 
> 标签：php, javascript, web-services, api, file-upload

我正在尝试创建一个 Web API，允许某人（最好是一个程序）提交一个大型二进制文件并接收该文件的 ID 作为回报。我有一些带有表单 ( `method="POST"`) 的 HTML 和一个`<input type="file" ...>`可以使用标准 multipart/form-data MIME 类型将文件提交到某些 PHP 代码的元素。PHP 生成 ID 并将其作为结果打印出来。因为 PHP 只是打印 ID，而不是重定向到另一个 HTML 页面或生成 HTML 本身，所以它不是很漂亮，但希望对于程序化文件提交 API 的预期用例来说已经足够了。

到现在为止还挺好。当我想让客户端代码捕获返回的 ID 并使用它调用其他 API 时，这会变得很棘手。如果客户端是带有 JavaScript 的网页，客户端似乎应该使用`XMLHttpRequest`，但我不清楚如何让该对象使用用户通过文件输入控件选择的文件。

我希望相同的 API 既可以用于手动操作的 Web 表单（便于 UI 和测试），也可以用于纯编程调用（如 JavaScript、curl/libcurl 等）。我不希望 PHP 使用查询字符串中的 ID 重定向到另一个页面，并且我不希望直接返回 HTML。我只想要一个简单的文件，ID out API。

由于这被证明是困难的，我怀疑我做错了事情。我对替代设计持开放态度，但我更愿意让事情尽可能简单。我发现了一个有点[类似的问题](https://stackoverflow.com/questions/1156429/how-do-i-write-a-restful-web-service-that-accepts-a-binary-file-pdf)，但它过于以 Java 为中心，并不能完全解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:17:52.190

我不得不做类似的事情，我最终做的是将表单提交到隐藏的 iframe。然后可以简单地在 iframe onload 处理程序中检索来自 php 的响应。

事实上，这是我使用的代码：

```
 $('submitdestination').onload=function(){
        var appID=this.contentDocument.body.children[0].innerHTML;
        //did something with appID
        new mBox.Notice({type: 'ok',delayClose: 1000,content: 'Data saved.',position: {y: 'bottom',x: 'right'}});//displayed message
    }
    $('cvdetails').submit(); 
```

注意：`submitdestination`是我的 iframe。`cvdetails`是我的形式。表单的目标设置为`submitdestination`。另外，我正在使用 Mootools，以防有人注意到我的美元参数中缺少散列。

这是我使用的 HTML 的精简版（尽管 iframe 没有改变）：

```
<form id="cvdetails" name="cvdetails" action="scripts/upload.php" method="post" enctype="multipart/form-data" target="submitdestination" autocomplete="off">
    <button type="button" id="save" class="mainbutton">Save</button>
</form>
<iframe id="submitdestination" name="submitdestination" style="display:none" ></iframe> 
```

保存按钮有一个点击处理程序，可以简化为：

```
$('save').addEvent('click',function(evt){evt.stop();$('cvdetails').submit();}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:20:25.750

感谢@Asad 的帮助，我能够按照我想要的方式进行工作。把它们放在一起，我基本上有这个代码：

```
<html>
    <head>
        <script type="text/javascript">

window.onload = function(){
    setUploadID(-1);
    document.getElementById('hidden_iframe').onload = captureUploadID;
}

function setUploadID(id)
{
    document.getElementById('upload_id').innerHTML = id;
}

function captureUploadID()
{
    var upload_id = this.contentDocument.body.childNodes[0].textContent;
    setUploadID(upload_id);
}
        </script>
    </head>
    <body>
        <form action="upload.php" enctype="multipart/form-data" method="POST" target="hidden_iframe">
            File: <input type="file" name="media" /><br>
            <input type="submit" value="Upload" />
        </form>
        <br>
        Upload ID: <span id="upload_id"></span>
        <iframe id="hidden_iframe" style="display: none;"></iframe>
    </body>
</html> 
```

# c# - 从控制台应用程序记录

> ID：12890204
> 
> 赞同：5
> 
> 时间：2012-10-15T06:14:02.363
> 
> 标签：c#, logging, console-application

我创建了一个控制台应用程序，它从 Excel 工作表传输数据并将其传输到数据库。我需要登录它。

我该怎么办？因为我完全不知道该怎么做。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-15T06:21:58.393

如果您只是想将文本作为日志写入文件，您可以执行以下操作：

```
string strLogText = "Some details you want to log.";

// Create a writer and open the file:
StreamWriter log;

if (!File.Exists("logfile.txt"))
{
  log = new StreamWriter("logfile.txt");
}
else
{
  log = File.AppendText("logfile.txt");
} 

// Write to the file:
log.WriteLine(DateTime.Now);
log.WriteLine(strLogText);
log.WriteLine(); 

// Close the stream:
log.Close(); 
```

这段代码的来源来自这篇[文章。](http://www.itauthor.com/2007/08/21/writing-to-a-log-file-in-c/)
这是[StreamWriter 类的一些文档。](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)

否则，如果您想要更多的东西，您可以按照其他人的建议进行操作并查看[Log4Net。](http://logging.apache.org/log4net/release/features.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T06:22:27.560

`I require to do logging into it....`

您的意思是您希望将日志记录添加到应用程序中，还是希望人们添加`log in`？

将事物记录到文件[Log4Net](http://logging.apache.org/log4net/)的存在是为了方便您。如果您不想依赖第三方的东西，那么您可以做类似的事情

```
Trace.Listeners.Clear();

if (options.Verbose)
{
    var ctl = new ConsoleTraceListener(false) { TraceOutputOptions = TraceOptions.DateTime };
    Trace.Listeners.Add(ctl);
}

if (options.Log)
{
    var logFileFs = new FileStream("my.log", FileMode.Append);
    var twtl = new TextWriterTraceListener(logFileFs)
    { TraceOutputOptions = TraceOptions.ThreadId | TraceOptions.DateTime };
    Trace.Listeners.Add(twtl);
}

Trace.AutoFlush = true;

Trace.WriteLine(DateTime.Now.ToString(CultureInfo.InvariantCulture) + "   My App Started"); 
```

这使您可以向输出添加不同的输出，例如日志文件和详细打印，以便您可以登录到文件并在用户选择使用详细输出时在控制台中打印它。

线

```
Trace.WriteLine(DateTime.Now.ToString(CultureInfo.InvariantCulture) + "   My App Started"); 
```

应该做成一个函数来接收你的消息，也许还有一个日志级别，这样你就可以对所有书面日志消息有一个统一的外观。

如果您不需要那么多功能，您可以直接写入文件流。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T06:17:16.837

有很多方法可以记录。您可以使用自己的日志记录

否则尝试 Log4net，这是您完成的简单配置更改。

好文章[http://www.codeproject.com/Articles/140911/log4net-Tutorial](http://www.codeproject.com/Articles/140911/log4net-Tutorial)

只是为您提供的附加信息 reg ELMAH（另一种错误记录方式） [在控制台应用程序中使用 ELMAH](https://stackoverflow.com/questions/841451/using-elmah-in-a-console-application)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T06:17:23.360

如果您可以使用第三方产品，请选择[log4net](http://logging.apache.org/log4net/)。它是一个很棒的 .NET 日志记录框架。

# string - 如何颠倒一串阿拉伯语中两个单词的顺序？

> ID：12890206
> 
> 赞同：1
> 
> 时间：2012-10-15T06:14:07.403
> 
> 标签：string, perl, unicode, bidi

我需要在 perl 中反转阿拉伯字符串的文本方向，就像我在这个[Fiddle](http://jsfiddle.net/saurabh_saxena/ArKyx/2/)中使用 CSS 所做的那样。我是 perl 的新手，所以我需要一些指导来获得我的预期结果。

[我正在寻找与Fiddle](http://jsfiddle.net/saurabh_saxena/ArKyx/2/)中所示完全相同的结果。我已经使用这个[StackOverflow Question](https://stackoverflow.com/questions/3204668/how-do-i-reverse-the-order-of-two-words-in-a-string)中的建议进行了尝试。

但是这段代码实际上是在颠倒文本中的单词顺序。如果我对阿拉伯文字做同样的事情，它会改变它的意思。

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:49:00.410

您应该始终按书写顺序存储文本。文本的方向是您使用的 Unicode 字符的属性，用于读取文本的程序（文本编辑器、Web 浏览器等）应该实现[Unicode 双向文本算法](http://en.wikipedia.org/wiki/Bi-directional_text)才能正确显示。如果您正在编写一个程序来*显示*文本（而不是仅仅生成它），您会发现[Text::Bidi CPAN 模块](https://metacpan.org/module/Text%3a%3aBidi)很有帮助。

对于从右到左和从左到右语言的某些混合，双向算法可能会出错。在这些情况下，您可以在输出中添加 Unicode 方向标记。例如，如果阿拉伯语段落恰好以英文产品名称开头，您可以在开头插入[RTL 标记](http://www.fileformat.info/info/unicode/char/200F/index.htm)，以便正确显示整个段落。在 Perl 中：

```
my $RLM = "\x{200F}"; # Unicode RIGHT-TO-LEFT MARK
say "${RLM}Quux ﻢﻧ ﺎﻠﻣﺎﻠﻛ: \"Centre D\'affaires\""; 
```

‏</p>

# visual-c++ - 为 VisualStudio 2012 安装 OpenCV

> ID：12890207
> 
> 赞同：5
> 
> 时间：2012-10-15T06:14:10.407
> 
> 标签：visual-c++, opencv, visual-studio-2012

我尝试为 VS2012 安装 OpenCV，但不幸的是，我得到的只是（确切地说）2584 构建错误并且没有工作库。

所以我的问题很简单：**是否可以在 VisualStudio 2012 下使用 OpenCV（例如 2.4.0）**？如果是这样，我可以使用 VC++ 11.0 编译器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T06:19:29.757

我不确定您是否可以为 VS 2012 成功构建 OpenCV，（还没有看到任何成功的案例），但您肯定可以轻松地使用 VS 2010 构建它。（检查[此参考](http://jepsonsblog.blogspot.in/2012/07/installation-guide-opencv-24-with.html)）

另外，查看[这篇文章](http://docs.opencv.org/trunk/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#how-to-build-applications-with-opencv-inside-the-microsoft-visual-studio)，它解释了如何在 VS 中使用 OpenCV 构建应用程序

# java - 在 Integer 上同步会导致 NullPointerException

> ID：12890214
> 
> 赞同：1
> 
> 时间：2012-10-15T06:14:45.883
> 
> 标签：java, concurrency, synchronization

这个问题基于 [Synchronizing on an Integer value](https://stackoverflow.com/questions/659915/synchronizing-on-an-integer-value)。

那里的解决方案似乎很好，只是有一个小问题，它没有解决如何从`ConcurrentHashMap`.

所以为了解决我在下面的程序中所做的

```
import java.util.concurrent.ConcurrentHashMap;

public class Example {

    private final ConcurrentHashMap<Integer, Integer> concurrentHashMap = new ConcurrentHashMap<Integer, Integer>();

    public void doSomething(int i) {
        synchronized (getLockForId(i)) {
            concurrentHashMap.remove(i);
        }
    }

    public Integer getLockForId(int id) {
        concurrentHashMap.putIfAbsent(id, id); // I want to replace these two
                                                // operation with single one
                                                // since it seems the cause of
                                                // NPE
        return concurrentHashMap.get(id);
    }

    public static void main(String[] args) {
        final Example example = new Example();
        new Thread(new Runnable() {
            @Override
            public void run() {
                int i = 0;
                while (true) {
                    example.doSomething(++i);
                }
            }
        }).start();
        new Thread(new Runnable() {
            @Override
            public void run() {
                int i = 0;
                while (true) {
                    example.doSomething(++i);
                }
            }
        }).start();
    }
} 
```

问题是它总是导致`NullPointerException`. 我的第一个分析是因为我正在删除它分配给 null 的值，所以它导致`NullPointerException`. 所以我在下面做了

```
 Object obj = new Object();
    synchronized (obj) {
        obj = null;
    } 
```

但以上不会导致`NullPointerException`. 所以我的问题是为什么它会抛出`NullPointerException`上述情况？

即使我这样做

```
public Integer getLockForId(int id) {
   return concurrentHashMap.putIfAbsent(id, id); 
} 
```

它仍然会导致，`NullPointerException`因为它仅在有 else 返回时才返回值`null`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T06:17:24.733

嗯，是的，那*会*抛出一个`NullPointerException`. 考虑这种模式：

```
 Thread 1                     Thread 2

 putIfAbsent (puts)
 get (returns non-null)
 acquire monitor
                              putIfAbsent (doesn't put)
 remove (removes value)
                              get (returns null)
                              acquire monitor (bang!) 
```

并不是“将值分配给 null”——`Map.get`如果给定键没有条目，则返回 null。

很难知道该推荐什么，因为您的代码确实没有做任何*有用*的事情。*如果您可以在真实*代码中说出您想要实现的目标，我们可能会为您提供更好的建议。

编辑：正如 Nikita 所指出的，仅返回的值是`putIfAbsent`行不通的，因为它会返回*以前*的值，或者`null`如果它不存在 - 而您想要条目的*新*值。

我怀疑您基本上必须同步对地图的访问，以使您的`getLockId`方法相对于`remove`操作具有原子性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T06:25:03.107

您可以尝试使所有访问`concurrentHashMap`同步。因此，当您从地图中获取价值时，您会同步`concurrentHashMap`并删除它。像这样的东西：

```
public void doSomething(int i) {
    synchronized (getLockForId(i)) {
        // do stuff
        synchronized (concurrentHashMap) {
            concurrentHashMap.remove(i);
        }
    }
}

public Integer getLockForId(int id) {
    synchronized (concurrentHashMap) {
        concurrentHashMap.putIfAbsent(id, id);
        return concurrentHashMap.get(id);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-26T08:56:18.660

考虑改用 google 的 LoadingCache。它使用弱引用，因此垃圾收集留给 JVM；您不必删除不再需要的参考资料。它处理与创建新条目有关的并发问题。值同步器的代码如下所示：

```
import com.google.common.cache.CacheBuilder;
import com.google.common.cache.CacheLoader;
import com.google.common.cache.LoadingCache;

import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class ValueSynchronizer<T> {
  private final LoadingCache<T, Lock> valueLocks;

  public ValueSynchronizer() {
    valueLocks = CacheBuilder.newBuilder().build(
      new CacheLoader<T, Lock>() {
        public Lock load(final T id) {
          return new ReentrantLock();
        }
      });
  }

  public void sync(final T onValue, final Runnable toDo)
  {
    final Lock lock = valueLocks.getUnchecked(onValue);
    lock.lock();

    try {
      toDo.run();
    }
    finally {
      lock.unlock();
    }
  }
} 
```

实际上同步一个值看起来像这样：

```
private final ValueSynchronizer<Long> retrySynchronizer 
    = new ValueSynchronizer<>();

@Override
public void onApplicationEvent(final EventThatCanBeSentMultipleTimes event)
{
  retrySynchronizer.sync(event.getEventId(), () ->
  {
    //...Your code here.
  });
} 
```

（根据 Apache 2.0 许可授权：http: [//www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0)）

# objective-c - 表中的 JSON 数据

> ID：12890216
> 
> 赞同：0
> 
> 时间：2012-10-15T06:15:05.437
> 
> 标签：objective-c, xcode, json, web-services, tableview

```
(
        {
        "first_name" = Akash;
        idprofile = 1;
        iduser = 1;
        "last_name" = Testing;
        picUrl = "http://qalina.acapglobal.com/kangatime/ktapp/profilepics/1/1_Jellyfish.jpg";
        "profile_picture_filepath" = "1_Jellyfish.jpg";
    },
        {
        "first_name" = testing;
        idprofile = 3;
        iduser = 1;
        "last_name" = tst;
        picUrl = "http://qalina.acapglobal.com/kangatime/ktapp/profilepics/1/3_Penguins.jpg";
        "profile_picture_filepath" = "3_Penguins.jpg";
    },
        {
        "first_name" = test;
        idprofile = 4;
        iduser = 1;
        "last_name" = test;
        picUrl = "http://qalina.acapglobal.com/kangatime/ktapp/profilepics/1/4_Chrysanthemum.jpg";
        "profile_picture_filepath" = "4_Chrysanthemum.jpg";
    },
        {
        "first_name" = prashant1;
        idprofile = 19;
        iduser = 1;
        "last_name" = kharade1;
        picUrl = "http://qalina.acapglobal.com/kangatime/ktapp/profilepics/1/19_Koala.jpg";
        "profile_picture_filepath" = "19_Koala.jpg";
    },
        {
        "first_name" = Priyank;
        idprofile = 68;
        iduser = 1;
        "last_name" = Jain;
        picUrl = "http://qalina.acapglobal.com/kangatime/ktapp/profilepics/1/68_P.jpg";
        "profile_picture_filepath" = "68_P.jpg";
    },
        {
        "first_name" = sdasd;
        idprofile = 106;
        iduser = 1;
        "last_name" = sdasd;
        picUrl = "http://qalina.acapglobal.com/kangatime/ktapp/profilepics/1/";
        "profile_picture_filepath" = "<null>";
    }
) 
```

这是我的 json 响应数据。我想在表格视图中显示基于“idprofile”键的六个配置文件（6 个字典），其中包含 first_name、last_name 和配置文件图像。我越来越糊涂了。请帮忙？

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    AppDelegate *appDel = [[UIApplication sharedApplication]delegate];

    navBar=[[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 50)];
    [navBar setTintColor:[UIColor colorWithRed:0.0f/255.0f green:82.0f/255.0f blue:151.0f/255.0f alpha:1.0f]];
    UIImageView *myImageView=[[UIImageView alloc] initWithFrame:CGRectMake(87, 3, 134, 33)];
    myImageView.image=[UIImage imageNamed:@"sprofile.png"];
    [navBar addSubview:myImageView];
    //[myImageView release];

    [self.view addSubview:navBar];

    UIButton *logOutButton=[UIButton buttonWithType:UIButtonTypeCustom] ;
    [logOutButton setFrame:CGRectMake(244, 10, 71, 32)];
    //[logOutButton setTitle:@"Log out" forState:UIControlStateNormal];
    [logOutButton setImage:[UIImage imageNamed:@"logout.png"] forState:UIControlStateNormal];
    [logOutButton addTarget:self action:@selector(goToLoginScreen) forControlEvents:UIControlEventTouchUpInside];
    [navBar addSubview:logOutButton];

    UILabel *headerLabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 50, 320, 30)];
    [headerLabel setBackgroundColor:[UIColor colorWithRed:210.0f/255.0f green:221.0f/255.0f blue:228.0f/255.0f alpha:1.0f]];
    [headerLabel setText:@"Currently selected profile: Please select"];
    [headerLabel setTextAlignment:NSTextAlignmentCenter];
    [headerLabel setFont:[UIFont fontWithName:@"helvetica" size:14.0f]];
    [headerLabel setTextColor:[UIColor colorWithRed:78.0f/255.0f green:126.0f/255.0f blue:70.0f/255.0f alpha:1.0f]];
    [self.view addSubview:headerLabel];

    homeTable=[[UITableView alloc] initWithFrame:CGRectMake(0, 81, 320, 367) style:UITableViewStylePlain];
    [homeTable setBackgroundColor:[UIColor colorWithRed:232.0f/255.0f green:237.0f/255.0f blue:240.0f/255.0f alpha:1.0f]];
    homeTable.delegate=self;
    homeTable.dataSource=self;
    homeTable.rowHeight=100;
    [self.view addSubview:homeTable];

    profileArray = [[NSMutableArray alloc]init];

    [self callWebService];

}

-(void)goToLoginScreen
{
    AppDelegate *appDelegate=(AppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegate.window.rootViewController dismissViewControllerAnimated:YES completion:nil];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [profileArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    UIButton *selectButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    selectButton.frame = CGRectMake(100, 30, 63, 32);
    //[selectButton setBackgroundColor:[UIColor yellowColor]];
    [selectButton setBackgroundImage:[UIImage imageNamed:@"select.png"] forState:UIControlStateNormal];
    //[selectButton addTarget:self action:@selector(selectButtonSelected: ) forControlEvents:UIControlEventTouchUpInside];
    selectButton.tag = indexPath.row;

    [cell.contentView addSubview:selectButton];

//    NSDictionary *item = [profileArray objectAtIndex:[indexPath row]];
//    [[cell textLabel] setText:[item objectForKey:@"first_name"]];

    //    Home *tempHomeObj=(Home *)[profileArray objectAtIndex:indexPath.row];
    //    NSString *fName = (NSString *)tempHomeObj.fName;
    //    NSLog(@"fnameeeee==>%@",fName);

    //NSLog(@"fName==>%@",appDel.fName);

    AppDelegate *appDel=(AppDelegate *)[[UIApplication sharedApplication] delegate];

    NSLog(@"profileeeee==>%@",profileArray);

   // NSMutableString *tempStr = (NSMutableString *)profileArray;

    cell.textLabel.text = [self.profileArray objectAtIndex:indexPath.row];

    //cell.imageView.image = appDel.tempUserImage;

    return cell;
}

-(void)callWebService
{
    //adding the indicator view to show that data is being processed.......
    indicatorView=[[UIView alloc] initWithFrame:CGRectMake(110  ,180,100 , 100)];
    indicatorView.tag=3000;
    [indicatorView setAlpha:0.7];
    indicatorView.layer.cornerRadius=15;
    indicatorView.backgroundColor=[UIColor blackColor];
    [self.view addSubview:indicatorView];

    //now adding the activity indicator
    activityIndicator = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    //activityIndicator.frame = CGRectMake(20.0,20.0, 40.0, 40.0);
    //activityIndicator.center = indicatorView.center;
    activityIndicator.center=CGPointMake(50, 50);
    [activityIndicator startAnimating];
    [[self.view viewWithTag:3000]addSubview:activityIndicator];

   // AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
    NSURL *url = [NSURL URLWithString:@"http://qalina.acapglobal.com/kangatime/kangatime_api/api/user/all_profiles/format/json"];
    ASIFormDataRequest *request=[ASIFormDataRequest requestWithURL:url];
    [request addPostValue:@"1" forKey:@"id"];
    //[request addPostValue:pwdField.text forKey:@"pass"];

    [request setDelegate:self];
    [request startAsynchronous];

}

- (void)requestFinished:(ASIHTTPRequest *)request
{

    // Use when fetching text data
    NSString *responseString = [request responseString];
   // NSLog(@"responsestring==%@",responseString);
    NSMutableArray *responseArr= [responseString JSONValue];
    NSLog(@"responseArr==>%@",responseArr);
    NSDictionary *tempDict = [responseArr objectAtIndex:0];
    //NSLog(@"tempDict==>%@",tempDict);

    if(indicatorView!=nil)
    {
        [indicatorView removeFromSuperview];
        indicatorView=nil;
    }

    for(NSDictionary *dict in tempDict)
    {
        Home *objHome=[[Home alloc] init];
        AppDelegate *appDel = [[UIApplication sharedApplication]delegate];
       appDel.fName = [tempDict objectForKey:@"first_name"];
        NSLog(@"appDel.fName==>%@",appDel.fName );

        appDel.lName = [tempDict objectForKey:@"last_name"];
        //NSLog(@"lName==>%@",lName);

        NSMutableString *myStr=[NSMutableString stringWithString:appDel.fName];
        [myStr appendFormat:@" "];
        [myStr appendString:appDel.lName];
        objHome.userName=myStr;

        NSLog(@"objHome.userName==>%@",objHome.userName);

        NSString *idProfile = [tempDict objectForKey:@"idprofile"];
        NSLog(@"idProfile==>%@",idProfile);
//        NSString *imageStr=[tempDict objectForKey:@"profile_picture_filepath"];
//        NSMutableString *urlString= [NSMutableString stringWithString:@"http://qalina.acapglobal.com/kangatime/ktapp/profilepics/"];
//        [urlString appendString:imageStr];
//        NSURL *mainURL=[[[NSURL alloc] initWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]] autorelease];
//       // NSLog(@"mainURL==>%@",mainURL);
//
//      appDel.tempUserData = [[NSData alloc] initWithContentsOfURL:mainURL];
        //NSLog(@"tempUserData==>%@",tempUserData);

       // Home *objHome=[[Home alloc] init];

         //appDel.tempUserImage = [[UIImage alloc] initWithData:appDel.tempUserData];

        [profileArray addObject:objHome.userName];
       // [profileArray addObject:appDel.tempUserImage];

        NSLog(@"profileArray==>%d",[profileArray count]);
    }

    //[profileArray addObject:]

//    [homeTable setDataSource:self];
//    [homeTable setDelegate:self];
    [homeTable reloadData];

    //[self setProfileArray:[tempDict objectForKey:@"first_name"]];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:20:53.870

首先你已经解析了 json。要解析 jason，您可以使用[JSONKit](https://github.com/johnezang/JSONKit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:49:20.960

在 JSONKIT 的帮助下，首先你必须解析响应字符串。

您将从 JSON 响应中获取数组或字典。@SmartWork 为您提供了 JSONKIT 的链接以及[如何创建下面给出的 JSON 数组字符串？](https://stackoverflow.com/a/8893119/790794)将帮助您从响应中检索数组/字典。

# c# - 组合与继承。我哪里做错了？

> ID：12890224
> 
> 赞同：3
> 
> 时间：2012-10-15T06:15:42.513
> 
> 标签：c#, oop, composition

我需要在我的实体中对组织层次结构进行建模。一个组织可以是总部、区域负责人、子区域、区域办事处。组织正在执行许多通用功能，但有几个特定的​​功能，例如只有区域可以执行任务 A。还有一些特定于区域的属性（数据）。

我使用组合而不使用继承对其进行建模，但现在我只以一个组织类结束，其中有很多引用，这些引用取决于组织的类型，可以有有效的引用，也可以为空。

对象组合是一种痛苦，现在我正在通过工厂处理。但现在我主要关心的是开发人员需要记住组织类型是什么以及属性是否对该组织有意义。

只是为了清楚我的意思。

```
 public class Organization : IKeyed<int> {
        public virtual int Id { get; protected set; }
        public virtual string Code { get; set; }
        public virtual OrganizationType orgType {get;set;}
        public virtual Organization Parent {get;set;}
        public virtual IList<Organization> Children {get;set;}

        public virtual typeA {get; set;} // only meaningful when organization type is 'Head office'

        public virtual typeB {get;set;}// only meaningful when 'Region'
        public virtual void AddChild(Organization org){...}
    ...

    } 
```

我应该在这里使用继承吗？还是我在这里错过了一些技巧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T06:47:42.940

在我看来，我建议您创建一个包含常见行为和字段的抽象基类。然后，您可以添加子类来扩展更具体的行为和/或属性。

```
public abstract class Organization : IKeyed<int> { 
    public virtual int Id { get; protected set; } 
    public virtual string Code { get; set; }

    // remove this property
    // public virtual OrganizationType orgType {get;set;} 
    public virtual Organization Parent {get;set;} 
    public virtual IList<Organization> Children {get;set;} 

    // move this property to sub-class
    // public virtual typeA {get; set;} // only meaningful when organization type is 'Head office' 

    // move this property to sub-class
    // public virtual typeB {get;set;}// only meaningful when 'Region'

    public virtual void AddChild(Organization org){...} 
    ... 

}

public class HeadOffice : Organization
{
    public virtual typeA { get; set; }
}

public class Region : Organization
{
    public virtual typeB { get; set;}
}

public class OtherOrganizationType : Organization
{
    // 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:53:20.247

关于您的具体问题继承与组合：我一遍又一遍地听到的格言是“当对象 A 是对象 B 的一种类型时使用继承。当对象 A 由对象 B 组成时使用组合”。

在这种情况下，您不能说区域办事处是总公司的一种。你也不能说总公司是由地区办事处组成的。这告诉我对象不应该直接相关。相反，想想是什么让他们有资格执行常见任务。也许他们都可以 HireWorker 因为他们都是 HiringOrganizations，也许他们都可以 ReportSales 因为他们都是 SalesEntities。在这些情况下，您应该有一个 HiringOrginization 或 SalesEntity 超类，HeadOffice 和 RegionalOffice 都是它们的子类。

就 org 结构而言，可能值得考虑在单独的 OrgStructure 对象中维护该结构。您的 OrgStructure 对象将维护所有对象实例之间的关系，而不是在每个对象中具有 Parent 属性和 Child 属性。这提供了更多的灵活性，并消除了将关系维护到专用对象的责任。

# c# - 如何在以下代码中调用 GetInvocationList()？

> ID：12890227
> 
> 赞同：0
> 
> 时间：2012-10-15T06:16:17.723
> 
> 标签：c#, .net, vb.net

类层次结构和代码如下： 以及如何调用 GetInvocationList() 来查看 Main 函数中已添加的委托绑定了多少函数？

```
namespace Test
{
    public class Program
    {
        public class SelectSet
        {
            public event SelectSet.AddedEventHandler Added;
            public delegate void AddedEventHandler(object BusinessObject);
        }

        public class C1
        {
            public static SelectSet SelectSet;
        }

        static void Main()
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:27:47.177

> 以及如何调用 GetInvocationList() 来查看 Main 函数中已添加的委托绑定了多少函数？

你不能（至少没有反思），你不应该。公开*事件*的目的是仅公开添加或删除处理程序的功能。所以有点像你的代码是这样写的：

```
public class SelectSet
{
    // Private fields here

    public void AddAddedHandler(SelectSet.AddedEventHandler handler)
    {
        // Implement using private fields
    }

    public void RemoveAddedHandler(SelectSet.AddedEventHandler handler)
    {
        // Implement using private fields
    }

    public delegate void AddedEventHandler(object BusinessObject);
} 
```

如果您查看*该类*，很明显从外部您将无法找出有哪些处理程序。仅仅因为您声明了一个类似字段的事件并不能让外界访问您的字段。

当然，如果需要，您可以显式公开处理程序 - 但这并不是一个好主意。

有关更多信息，请参阅我[关于事件和代表](http://csharpindepth.com/Articles/Chapter2/Events.aspx)的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:02:12.850

至少在 VB 中，委托可用作`Private <EventName>Event`，因此您可以`AddedEvent.GetInvocationList`直接从类内部检索，或使用外部反射。

# java - 《logback-classic 原生讲 SLF4J》解读

> ID：12890228
> 
> 赞同：3
> 
> 时间：2012-10-15T06:16:19.527
> 
> 标签：java, logging, log4j, slf4j, logback

我正在寻找[比 log4j 更喜欢 logback 的原因，](http://logback.qos.ch/reasonsToSwitch.html)并遇到了这一点：

**logback-classic 原生讲 SLF4J**

> 由于 logback-classic 中的 Logger 类本机实现了 SLF4J API，因此在调用具有 logback-classic 作为底层实现的 SLF4J 记录器时，您会产生零开销。此外，由于 logback-classic 强烈鼓励使用 SLF4J 作为其客户端 API，如果您需要切换到 log4j 或 jul，您可以通过将一个 jar 文件替换为另一个来实现。你不需要通过 SLF4J API 来修改你的代码日志。这可以大大减少切换日志框架所涉及的工作。

有人可以解释上述观点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T06:23:44.987

如果您使用其他任何 SLF4J 实现，则需要一个额外的桥接器，它通过调用底层实现中的适当方法来实现 SLF4J 接口。

这将导致一些开销。

logback 直接实现接口，因此您不需要额外的网桥 => 没有开销。

话虽如此，在大多数情况下，开销很小，以至于对所选日志库本身的性能影响可以忽略不计，所以我不会太担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-04T17:50:30.337

接受的答案是正确的。只是想将其添加为补充信息。

如果你往里看，`logback-classic.jar`你`ch.qos.logback.classic.Logger`会发现：

```
public final class Logger implements org.slf4j.Logger ... 
```

这就是作者所说的：

> ... `Logger`logback-classic 中的类原生实现了 SLF4J API ...

# javascript - 在 jquery 小部件中以边距自动居中

> ID：12890234
> 
> 赞同：-2
> 
> 时间：2012-10-15T06:16:44.457
> 
> 标签：javascript, jquery, css

我有一个 jquery 小部件，我正在制作我想要将一些 div 居中的地方。这是我试图做的代码，我似乎无法让它工作。

```
jQuery.fn.nav = function(home, eat, sleep, drink) {
//store the jQuery object(s) for later use
var elements = this;

return this.each(function() {
    var containerElement = this;
    var container = jQuery(this);
    container.css('width', '100%');
    container.css('text-align', 'center');

    var centElement = document.createElement('div');
    var cent = jQuery(centElement);
    cent.css('overflow', 'auto');
    cent.css('width', '275px');
    cent.css('margin-left', 'auto');
    cent.css('margin-right', 'auto');

    if(home == true) {
        var navElement = document.createElement('div');
        var nav = jQuery(navElement);
        nav.addClass('inactive');
        nav.attr('id', 'home');
        cent.append(nav);
    }
    if(eat == true) {
        var navElement = document.createElement('div');
        var nav = jQuery(navElement);
        nav.addClass('inactive');
        nav.attr('id', 'eat');
        cent.append(nav);
    }
    if(drink == true) {
        var navElement = document.createElement('div');
        var nav = jQuery(navElement);
        nav.addClass('inactive');
        nav.attr('id', 'drink');
        cent.append(nav);
    }
    if(sleep == true) {
        var navElement = document.createElement('div');
        var nav = jQuery(navElement);
        nav.addClass('inactive');
        nav.attr('id', 'sleep');
        cent.append(nav);
    }
    container.append(cent);
    //put together the styling used
    var styleText = "#" + containerElement.id + " div {width: 60px; height: 60px; float: left;";
    styleText += " margin-left: 5px; margin-right: 3px;}";
    styleText += "#" + containerElement.id + " div a {display: block; width: 100%; height: 100%;}";
    styleText += "#" + containerElement.id + " #home.inactive {background-image:url(img/inactive_home.png); background-size: cover;}";
    styleText += "#" + containerElement.id + " #eat.inactive {background-image:url(img/inactive_eat.png); background-size: cover;}";
    styleText += "#" + containerElement.id + " #sleep.inactive {background-image:url(img/inactive_sleep.png); background-size: cover;}";
    styleText += "#" + containerElement.id + " #drink.inactive {background-image:url(img/inactive_drink.png); background-size: cover;}";
    styleText += "#" + containerElement.id + " #home.active {background-image:url(img/active_home.png); background-size: cover;}";
    styleText += "#" + containerElement.id + " #eat.active {background-image:url(img/active_eat.png); background-size: cover;}";
    styleText += "#" + containerElement.id + " #sleep.active {background-image:url(img/active_sleep.png); background-size: cover;}";
    styleText += "#" + containerElement.id + " #drink.active {background-image:url(img/active_drink.png); background-size: cover;}";
    var style = document.createElement('style');
    style.type = 'text/css';
    style.innerHTML = styleText;
    document.getElementsByTagName('head')[0].appendChild(style);
});
} 
```

让我再解释一下，因为人们似乎不喜欢我的问题。我一直使用 'margin: 0 auto' 来使 div 居中，实际上这就是我将下面链接的页面主体居中的方式 (easyuniv.com/staging)。我有这个 javascript 函数，它在调用它的 div 内创建我的导航。变量容器是调用它的 div，我将它的宽度设置为 100%，然后在其中附加一个 div（称为 cent），它具有自动边距左和边距右。

出于某种原因，我无法让我的 div 居中，并试图找出原因。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:58:26.517

### 好的，有你的问题。使用这个 CSS：

```
#hesd div {margin: 25px auto 10px; float: none;} 
```

### 截屏：

![](../Images/5fc89b0a3c10ce3d65a8e1b45482b279.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T06:57:25.977

`var styleText`使用以下样式更改您的

```
 var styleText = "#" + containerElement.id + " div {width: 60px; height: 60px;";
    styleText += " margin-left: 5px; margin-right: 3px;}";
    styleText += "#" + containerElement.id + " div a {display: block; width: 100%; height: 100%;}";
    styleText += "#" + containerElement.id + " #home.inactive {background-image:url(img/inactive_home.png); background-size: cover;float:left;}";
    styleText += "#" + containerElement.id + " #eat.inactive {background-image:url(img/inactive_eat.png); background-size: cover;float:left;}";
    styleText += "#" + containerElement.id + " #sleep.inactive {background-image:url(img/inactive_sleep.png); background-size: cover;float:left;}";
    styleText += "#" + containerElement.id + " #drink.inactive {background-image:url(img/inactive_drink.png); background-size: cover;float:left;}";
    styleText += "#" + containerElement.id + " #home.active {background-image:url(img/active_home.png); background-size: cover;float:left;}";
    styleText += "#" + containerElement.id + " #eat.active {background-image:url(img/active_eat.png); background-size: cover;float:left;}";
    styleText += "#" + containerElement.id + " #sleep.active {background-image:url(img/active_sleep.png); background-size: cover;float:left;}";
    styleText += "#" + containerElement.id + " #drink.active {background-image:url(img/active_drink.png); background-size: cover;float:left;}"; 
```

希望这会有所帮助

# couchdb - 如何通过 HTML 页面访问 couchDB 并在该页面中显示一些 db 值

> ID：12890237
> 
> 赞同：1
> 
> 时间：2012-10-15T06:16:53.600
> 
> 标签：couchdb

从过去的 4 天开始，我一直在搜索这个。我需要做一件简单的事情。1) 创建一个 HTML 页面。2）在couchDB中创建一个数据库。3) 从我的 HTML 页面访问 CouchDB。4) 获取值并在 HTML 页面中显示 CouchDB 中的值。

我浏览了互联网上提供的各种文档，但无法理解。如果有人可以解释简单的步骤，那将有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:57:34.740

CouchDB 有一个 HTTP RESTful API。一切都是通过直接向服务器发出带有 JSON 数据的 HTTP 请求来完成的，[如 wiki 中所述](http://wiki.apache.org/couchdb/Reference)。

Cloudant 有一篇很好的文章，[介绍了如何使用 Backbone 来执行此操作](https://cloudant.com/blog/backbone-and-cloudant/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T07:22:54.230

*   [尝试从这里](HTTP://couchdb.apache.org/)下载 CouchDb并安装它。
*   转到开始-> 所有程序 Apache CouchDb 并启动 CouchDB。
*   从浏览器尝试 URL localhost:5984/_utils/，您将可以选择创建数据库和文档。
*   尝试使用 Jquery 或 Backbone.js 将 CouchDb 与 HTML 连接起来。

# c# - 通过bat文件在iis中创建应用程序池

> ID：12890239
> 
> 赞同：3
> 
> 时间：2012-10-15T06:16:57.057
> 
> 标签：c#, .net, iis, batch-file

我使用以下代码通过bat命令使用作为asp.net4.0的inbuild应用程序池

```
%systemroot%/system32/inetsrv/APPCMD set app "Sample" /applicationPool:"ASP.NET v4.0 Classic"
%systemroot%/system32/inetsrv/APPCMD set apppool /apppool.name:"ASP.NET v4.0 Classic" /managedPipelineMode:Integrated 
```

但是通过这个如果 IIS 中不存在 ASP.NET v4.0 Classic，那么它将引发错误

所以我需要安装 aspnet_regiis -i 并使用管道模式创建一个新池：通过 bat 文件集成。

你能给我一个解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T07:12:41.773

我找到了解决方案

创建应用程序池：

```
%systemroot%/system32/inetsrv/APPCMD add apppool /name:Poolname 
```

要将应用程序添加到池中：

```
%systemroot%/system32/inetsrv/APPCMD set app "applicationname" /applicationPool:"Poolname" 
```

设置该池的其他属性：

```
%systemroot%/system32/inetsrv/APPCMD set apppool /apppool.name:"Poolname" /managedPipelineMode:Integrated 
```

启动创建的池：

```
%systemroot%/system32/inetsrv/APPCMD start apppool /apppool.name:"Poolname" 
```

在iis中安装aspnet4.0框架为

```
%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i 
```

注意：我们可以在这里使用任何框架......

# ios - 从核心数据中调用单个特定行

> ID：12890240
> 
> 赞同：0
> 
> 时间：2012-10-15T06:17:01.090
> 
> 标签：ios, core-data

我有一堆 MySQL 行，我从 PHP 脚本下载到 iOS 并保存到核心数据中。现在，我对核心数据比较陌生。我将如何从核心数据中获取这些行之一来显示？如果这太模糊，这是我的情况：当用户单击 iOS 中的特定按钮时，我想根据用户显示特定结果，例如与更大列表中的用户位置匹配的城市名称的城市名称。但是，我只需要一排。我只是希望了解该过程和任何帮助，无论是教程还是具体建议，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:32:51.663

以下是使用对象的基础知识：

```
// Utility method to fetch objects
    - (NSArray *)fetchEntity:(NSString *)entityName  withPredicate:(NSPredicate *)predicate inContext:(NSManagedObjectContext *)moc
    {
        NSFetchRequest* request = [[NSFetchRequest alloc] init];    
        NSEntityDescription* entity = [NSEntityDescription entityForName:entityName inManagedObjectContext:moc];
        [request setEntity:entity];
        [request setPredicate:predicate];

        return  [moc executeFetchRequest:request error:nil];
    } 
```

您可以像这样使用它来获取名称：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name == %@",@"My product"]; // act as a filter
NSManagedObject *product = [[CoreDataUtils fetchEntity:@"Product" withPredicate:predicate inContext:self.moc] objectAtIndex:0];
NSLog(@"%@",[product objectForKey:@"name"]); 
```

或者您可以像这样设置名称：

```
[product setValue:@"New Product" forKey:@"name"]; 
```

编辑对象时不要忘记保存 NSManagedObjectContext

```
[self managedObjectContext save:nil]; 
```

这里有一个很棒的教程：[iOS 5 上的核心数据教程：入门](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

# c# - 将php数组转换为asp.net arraylist

> ID：12890253
> 
> 赞同：0
> 
> 时间：2012-10-15T06:17:52.680
> 
> 标签：c#, php, asp.net

我正在尝试将一些 php 代码转换为`asp.net`代码

php代码：

```
 function setOption ($result) {
            foreach ($result as $value) {

                $parentid[$value['id']] = $value['parentid'];   
                $subid[$value['parentid']][] = $value['id'];    
                $name[$value['id']] = $value['name'];           
                $display[$value['id']] = $value['display'];         
            }           

            return array($parentid, $subid, $name, $display);

        } 
```

asp.net 代码

```
ArrayList al = new ArrayList();
    ArrayList parentid = new ArrayList();
    ArrayList subid = new ArrayList();
    ArrayList name = new ArrayList();
    ArrayList display = new ArrayList();

DataTable tbl = ds.Tables[0];
for (int i = 0; i < tbl.Rows.Count; i++)
{
    DataRow myRow = tbl.Rows[i];
    int id = Convert.ToInt32(myRow["id"]);
    int parent_id = Convert.ToInt32(myRow["parent_id"]);
    int oid = Convert.ToInt32(myRow["oid"]);
    int dis = Convert.ToInt32(myRow["display"]);
    string title = myRow["title"].ToString();

    parentid.Insert(id, parent_id);
    subid.Insert();
    name.Insert(id, title);
    display.Insert(id, dis);
}

al.Add(parentid);
al.Add(subid);
al.Add(name);
al.Add(display);

return al; 
```

但是at`$subid[$value['parentid']][] = $value['id'];`是二维数组代码，asp.net如何在asp.net arraylist代码中呈现呢？

# javascript - 从 node.js 控制台程序连接到 socket.io node.js 服务器

> ID：12890257
> 
> 赞同：0
> 
> 时间：2012-10-15T06:18:10.317
> 
> 标签：javascript, node.js, websocket, socket.io

让我再解释一下设置。我在 node.js 服务器内运行了 socket.io。

我想从在控制台（浏览器外部）中运行的另一个 node.js 程序连接到该服务器。

到目前为止，我看到的所有示例都只讨论了在浏览器内部运行的 socket.io 客户端，但我想连接到浏览器外部的控制台程序。

有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T06:22:03.920

没问题，用`socket.io-client`

更多信息在这里：[https ://github.com/LearnBoost/socket.io-client](https://github.com/LearnBoost/socket.io-client)

# ios - window.location.href 在 phonegap 中不起作用

> ID：12890262
> 
> 赞同：0
> 
> 时间：2012-10-15T06:19:07.523
> 
> 标签：ios, cordova

我想重定向到 Phonegap 中的另一个页面。

我在 javascript 中编写了以下代码，但它没有被重定向：

```
window.location.href = "http://www.google.com"; 
```

谁能告诉它为什么不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-06T12:15:53.880

您必须通过配置白名单来允许在应用程序内导航外部站点。

你必须使用`allow-navigation`这样的标签：

`<allow-navigation href="http://www.google.com/*" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T17:42:18.817

你检查过你的框架初始化了吗？在尝试更改页面之前，请确保 jquery 和 phonegap 已完全加载。否则 phonegap 会挂起并中断。

看看这里：[一起使用 JQuery-Mobile/Phonegap 的正确方法？](https://stackoverflow.com/questions/10945643/correct-way-of-using-jquery-mobile-phonegap-together)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T13:53:14.793

尝试不使用`href`：

```
window.location = "http://www.google.com"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T07:06:41.987

尝试执行以下操作：

*   打开你的文件`Cordova.plist`文件

*   右键单击`ExternalHosts`->`Add Row`

*   将`String`新添加的行的值设置为`*`。

因此，您应该有这样的新添加行：

```
Item0            String          * 
```

通常，您应该替换`*`为您想要提供访问权限的外部 URL（`http://www.google.com`例如），但我曾经`*`确保问题是否来自那里。

有关更多信息，请查看在线文档的“域白名单指南”部分：http: [//docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)。

* * *

这是一个简单的工作示例，使用`window.location.href`：

```
<!DOCTYPE html>
<html>
    <head>               
        <script type="text/javascript" charset="utf-8">
            function init() {
                window.location.href = "http://www.google.com";
            }      
        </script>
    </head>

    <body onload="init();">
    </body>                

</html> 
```

让我知道这个是否奏效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T17:43:37.403

很可能是您要移动到的页面。该页面是否包含 phongap.js 文件等？

尝试一个简单的测试：创建一个新的 HTML 页面，其中只有基本元素和正文中的几个单词，这样你就知道你在那里了。将其保存为 test.html。现在试试 window.location="test.html"。

如果这有效，那么您就知道这是新页面中的内容。祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-05T20:25:16.323

使用 Cordova 4 对我来说工作得很好。您可以尝试使用 Google Chrome 进行远程调试并查看 Javascript 控制台中发生的情况吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-10T04:57:03.290

如果您使用 like `window.location`or`window.location.href`并且它在 IOS 或 safari 中仍然不起作用。

你可以使用这个：

```
var isAndroid = !!navigator.userAgent.match(/android/ig);
        var targetUrl = 'your url';
        window.location = targetUrl;

if(!isAndroid) {
    var doc = window.document,
        ifr = doc.createElement('iframe');
    ifr.src = targetUrl;
    ifr.style.cssText = 'display:none;';
    doc.body.appendChild(ifr);
} 
```

# xml - 谁能给我发一个 XML 嵌入模式的例子？

> ID：12890263
> 
> 赞同：0
> 
> 时间：2012-10-15T06:19:18.550
> 
> 标签：xml, schema

我了解 xml 架构导入/包含，我可以在另一个文件中定义架构并在当前 WSDL 或架构中重用。但是我还是不明白什么是嵌入式模式，我什至无法在一个模式中搜索一个关键字“嵌入”。

你们可以发一个“嵌入式”模式示例，我可以理解和研究吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T03:31:28.973

我们只需要将模式与 WSDL 一起内联，这将被称为嵌入模式。

感谢大家。

# java - 为什么我将策略设置为 HORIZONTAL_SCROLLBAR_ AS_NEEDED 后看不到水平滚动条

> ID：12890265
> 
> 赞同：0
> 
> 时间：2012-10-15T06:19:28.213
> 
> 标签：java, swing, jtable, jscrollpane, jscrollbar

我`jTable`在`jScrollPane`as 中添加了：

```
 public Scenario_One() {
      initComponents();
      jScrollPane1.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
      jScrollPane1.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
    }

    private void initComponents() {
       .
       .
       jScrollPane1.setViewportView(jTable1);
       .
       .
    } 
```

单行显示的文本太大，所以我不得不使用水平滚动条。但即使将策略设置为`as needed`我也看不到水平滚动条。这可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:48:20.503

正如@MadProgrammer 已经评论的那样，控制 JScrollPane 内的表大小调整行为的属性是 autoResizeMode。基本上，有两种选择：

*   autoResizeOff：列总是以它们的 prefWidth 显示，根据需要显示/隐藏水平滚动条。如果它们的总宽度小于视口宽度，则尾随空间是空闲的（显示视口）
*   所有其他：列的大小使得表格的总宽度适合scrollPane，水平滚动条从不显示

核心 JTable*不*支持表格“适合”视口直到列太宽而无法完全显示然后自动允许滚动的（直观）期望。JXTable（包含在[SwingX 项目](http://swingx.java.net)中）为此提供了一个额外的大小调整选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:03:54.423

尝试这样的事情......

![在此处输入图像描述](../Images/4e46b3ca9d4138dda303e08eb42a90d3.png)

```
public class TestTableColumns {

    public static void main(String[] args) {
        new TestTableColumns();
    }

    public TestTableColumns() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                DefaultTableModel model =new DefaultTableModel(
                                new Object[][] {
                                    {"1", "2"},
                                    {"11", "21"},
                                    {"12", "22"},
                                    {"13", "23"},
                                    {"14", "24"},
                                    {"15", "25"},
                                    {"16", "26"},
                                    {"17", "27"},
                                    {"18", "28"}}, 
                                new Object[] {
                                    "Small", "Big"});

                JTable table = new JTable(model);
                table.setShowHorizontalLines(true);
                table.setShowVerticalLines(true);
                table.setShowGrid(true);
                table.setGridColor(Color.DARK_GRAY);
                table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
                table.getColumn("Small").setPreferredWidth(100);
                table.getColumn("Small").setWidth(12);
                table.getColumn("Big").setPreferredWidth(400);
                table.getColumn("Big").setWidth(100);

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(table));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }            
        });
    }    
} 
```

视口的宽度由它所包含的组件的宽度决定。对于 a `JTable`，这取决于列的大小和自动大小策略

# php - 代码中途冻结 - PHP

> ID：12890277
> 
> 赞同：0
> 
> 时间：2012-10-15T06:20:53.557
> 
> 标签：php

我有这个必须在 CLI 中执行的相对复杂的组合和排列代码。该代码将一个数字作为命令行参数，然后输出所有唯一组合的所有排列的列表。数组是由空格分隔的数字字符串。

如果 N 为 6 或更少，则代码运行良好。甚至 7。但是，当我通过 n=8 时，代码只是冻结，它停止并且不再继续。

我怎样才能解决这个问题，使 N 可以是 8。

N 永远不会大于 8，但代码必须能够以 8 执行。

这是代码

```
 for ($i=0; count($list) < $nop; $i++) {
        shuffle($array);
        $tmp = implode(' ', $array);
            if (!isset($list[$tmp])) {
                $list[$tmp] = 1;
    }} 
```

感谢您提前提供的所有建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:23:40.853

```
for ($i=0; count($list) < $nop; $i++) { 
```

导致无限循环。循环中没有任何地方的大小`$list`或`$nop`改变，所以如果`count($list) < $nop`为真，它将是一个无限循环。

# c# - 将资源字符串设置为 XAML

> ID：12890279
> 
> 赞同：11
> 
> 时间：2012-10-15T06:21:37.783
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我知道如何从“Hello”的资源
`<TextBlock x:Uid="Text1"/>` 中设置字符串`Text1.Text`

但我想这样做

```
<TextBlock Text = {something here to get GreetingText}/> 
```

`GreetingText`“你好”在哪里

这样我也可以从代码中获得相同的字符串

```
var loader = new Windows.ApplicationModel.Resources.ResourceLoader();
var string = loader.GetString("GreetingText"); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T06:47:34.380

包括这个

```
xmlns:system="clr-namespace:System;assembly=mscorlib" 
```

有这样的资源`system:string`。

```
<Window.Resources>
    <system:String x:Key="GreetingText">Hello</system:String>        
</Window.Resources> 
```

并在 xaml 中使用它作为

```
<TextBlock Text="{StaticResource GreetingText}" /> 
```

并在后面的代码中使用它

```
string s = (string)objectofMainWindow.Resources["GreetingText"]; 
```

编辑：回答您的评论

它是这样的。资源字典在里面`Window.Resources`

```
<Window 
    xmlns:system="clr-namespace:System;assembly=mscorlib"

      Your Rest namespaces

     />

<Window.Resources>
    <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
                    xmlns:local="using:ATTFamilyMap.strings">
        <system:String x:Key="GreetingText">Hello</system:String>
    </ResourceDictionary>
</Window.Resources>

Your Code

</Window> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-16T11:31:23.770

Nikhil 的答案是在正确的轨道上，但对于其他平台也是正确的。

对于 Windows 8，您需要在资源目录中执行以下操作：

```
<x:String x:Key="MyString">This is a resource</x:String> 
```

在您的 xaml 中：

```
<TextBlock Text="{StaticResource MyString}"/> 
```

在代码中：

```
string myString = (string)(App.Current.Resources["MyString"]); 
```

# ios - Jenkins 与 Git 和 XCode：不能拉子子模块？

> ID：12890287
> 
> 赞同：3
> 
> 时间：2012-10-15T06:21:58.293
> 
> 标签：ios, xcode, git, jenkins, git-submodules

我将 Jenkins 用于 CI，将 git 用于 XCode 项目，我安装了 XCode 集成插件和 Git 插件，我的项目中的子模块之一有一个子子模块，但 Jenkins 无法拉取它，尽管据说可以做到那。

有没有人有同样的问题和解决方案？我想我必须添加另一个执行步骤来拉取所有子子模块？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:54:56.107

我们有子模块，它似乎运行良好，但由于未知原因，我们在周四有一个项目中断，在一个子模块上，所以必须在某些情况下子模块使它变得糟糕。如果我发现更多，我会在这里发布。

# c++ - c++数学赋值

> ID：12890289
> 
> 赞同：-5
> 
> 时间：2012-10-15T06:22:08.233
> 
> 标签：c++, math

任务是编写一个计算机程序，将 1/3 与自身相加很多次，并将结果与​​ 1/3 乘以 1/3 与自身相加的次数相比较。也可以用 ½ 做同样的事情。程序将执行两次该算术运算，一次使用单精度 (float)，一次使用双精度 (double)。这两个都将在一个程序中。确保您使用的计数器类型适用于这些大数字。您的程序将执行这些添加 109（10 亿）次。

```
#include<iostream>
#include<conio.h>
#include<math.h>
#include <limits>

using namespace std;
typedef std::numeric_limits< double > dbl;
int main()
{
    long size=1000000000;
    int count=0;
    long N=10;
    float nAdd=1;
    float nMul=1;

    cout.precision(dbl::digits10);
    cout<<"Iterration #\t\tAdd\t\t\tMul"<<endl;
    for(long  i=1; i<=size; i++)
    {
        nAdd+=1.0/3.0;
        nMul*=1.0/3.0;

        count++;
        if(count%N==0 && count!=0)
        {
            N*=10;
            cout<<i<<"\t\t"<<fixed <<nAdd<<"\t\t"<<fixed <<nMul<<endl;
        }
        if(count==size)
        {
            cout<<"Difference : "<<fixed <<nAdd<<" - "<<fixed <<nMul<<" = "<<fixed <<nAdd-nMul<<endl;
        }
    }
    getch();
    return 0;
} 
```

所以因为我已经这样做了，所以我没有正确理解我必须使用的数字将乘以 1/3 或 1/3 将添加到其中

你能解释一下吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:43:17.733

> 将 1/3 加到自身上很多次

这意味着您应该添加 ⅓ 一堆：⅓ + ⅓ + ⅓ + ⅓ + ...

然后，您应该将该计算的结果与将 ⅓ 乘以添加它的次数的结果进行比较。因此，例如，如果将它加在一起四次（⅓ + ⅓ + ⅓ + ⅓），那么您将该结果与 ⅓ × 4 的结果进行比较。

数学上的结果应该是一样的，但是这个作业的目的是教你一些关于计算机如何执行计算的知识。

# php - 开发连接到 codeigniter 数据的 iOS xcode

> ID：12890292
> 
> 赞同：1
> 
> 时间：2012-10-15T06:22:29.840
> 
> 标签：php, iphone, codeigniter

我有一个使用 MySQL 数据库在 CodeIgniter 中编写的现有 Web 应用程序。

我现在想学习如何为 Web 应用程序开发 iPhone 应用程序。

我看过很多关于 xcode 和 iphone 开发的教程，但我还没有看到关于连接和显示我的数据库中的数据的教程。

我已经看到 RESTful 的主题出现了几次，但不确定这是否是我需要去的方向？

如果有人成功构建了连接到 MySQL DB 的 iphone 应用程序，他们是否愿意分享一些入门技巧或 tuts。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:58:12.160

我在一个类似的项目中工作：http: [//www.savemeeting.com](http://www.savemeeting.com)它包含一个应用程序（iOS、Android 和 Blackberry）和一个显示相同信息的 Web。基本上，您的应用程序中需要一个 Web 服务（RESTful、XML-RPC、SOAP...）服务器和一个 Web 服务客户端。

我建议你写一个 RESTful 服务器，如果你使用 Code Igniter，你可以使用这个库：[https](https://github.com/philsturgeon/codeigniter-restserver) ://github.com/philsturgeon/codeigniter-restserver然后在你的 iOS 应用程序中编写客户端（对不起，我不知道在这部分指导你）。

# datatable - 比较数据表并删除 vb.net 中的重复项

> ID：12890299
> 
> 赞同：0
> 
> 时间：2012-10-15T06:23:09.397
> 
> 标签：datatable, vb.net-2010

我正在使用两个名为 dnddatatable 和 dtdup 的数据表。它包含一组电话号码。我想将第二个数据表与第一个数据表进行比较，并从数据表 1（名称为 dnddatatable）值中删除等于第二个数据表名称为（dtdup）的值。

```
data in the datatable as follows.

dnddatatable(data table1)

phone
9865015695
9840903331 
98668625
800971868
809679532
837445478

dtdup(dtata table2)

phone_numbers
9865015695
9840903331 

result dnddatatable(data table1)

98668625
800971868
809679532
837445478 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:33:33.657

我之前回答了一个非常相似的问题，想法完全一样

```
For i As Integer = 0 To dataset.Tables(0).Rows.Count - 1
        Dim found As Boolean = False
        For j As Integer = 0 To dataset1.Tables(0).Rows.Count - 1
            If dataset.Tables(0).Rows(i)(0).ToString = dataset1.Tables(0).Rows(j)    (0).ToString Then
                found = True
            End If
        Next
        If found = False Then
            'here you are getting the right result in each loop
            'in this example i'm showing the result in a textbox
            'just change the instruction and write them in your note pad or wherever you want to
            MsgBox(dataset.Tables(0).Rows(i)(0).ToString)
        End If
    Next 
```

# c++ - 如何从 QML 更改 C++ 模型？

> ID：12890304
> 
> 赞同：1
> 
> 时间：2012-10-15T06:23:19.793
> 
> 标签：c++, qt, qml

我在 Qml 中有一个列表视图，其中文本输入作为元素之一。我使用 c++ 模型来扩充列表视图。现在，如果用户在 qml 的文本输入中输入任何值，我想更改 C++ 模型。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:32:56.083

您必须在模型类中创建一个插槽并调用它：

```
public slots:
  setDataInModel(const int index, const QVariant &value); 
```

当它被这样编辑时，从该元素的 qml 委托中调用它：

```
model.setDataInModel(index, text) 
```

您还可以创建 Q_INVOKABLE 的方法并以相同的方式从 QML 调用它们。

# java - ResultSet 的 Oracle JDBC 性能

> ID：12890305
> 
> 赞同：6
> 
> 时间：2012-10-15T06:23:21.313
> 
> 标签：java, oracle, jdbc, prepared-statement, resultset

到目前为止，我一直在使用这样的东西来查询运行良好的数据库：

```
PreparedStatement prepStmt = dbCon.prepareStatement(mySql);
ResultSet rs = prepStmt.executeQuery(); 
```

但是后来我需要使用`rs.first();`才能迭代我的`rs`多次。所以我现在用

```
PreparedStatement prepStmt = dbCon.prepareStatement(mySql,ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); 
```

我的问题与两者的表现有关。如果我使用第二个选项，我会失去什么？使用第二个选项会对我到目前为止编写的代码产生任何负面影响吗？

PS：请注意，我的应用程序是一个使用后端 Oracle 11g 数据库的多用户、数据库密集型 Web 应用程序（在 Weblogic 10.3.4 上）。

谢谢大家的关注。

**更新**

我的最大 reslutset 大小将小于 1000 行和 15-20 列

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T06:38:30.637

如果您使用可滚动性（您的第二个选项），请注意这一点：

> 重要提示：由于任何可滚动结果集的所有行都存储在客户端缓存中，因此结果集包含多行、多列或非常大的列的情况可能会导致客户端 Java 虚拟机 (JVM) 失败. 不要为大型结果集指定可滚动性。

来源：[Oracle 数据库 JDBC 开发人员指南和参考](http://docs.oracle.com/cd/B28359_01/java.111/b31224/resltset.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T06:34:01.990

由于 Oracle 游标是只进的结构，为了模拟可滚动游标，如果 JDBC 驱动程序希望能够确保在您遍历结果第二次。根据查询返回的结果的数量和大小，这可能涉及在应用程序服务器上消耗大量额外内存。另一方面，这应该意味着`ResultSet`第二次迭代应该比第一次更有效。

所需的额外内存是否有意义取决于您的应用程序。您说最大的`ResultSet`将有 1000 行。如果您认为每行是 500 字节（这显然取决于数据类型——如果您`ResultSet`只有一堆数字，它会小得多，如果它包含一堆长描述字符串，它可能会大得多） , 1000 行是每个用户 500 kb。如果您有 1000 个同时使用的用户，那么这只是 500 MB 的存储空间，这可能不会让人望而却步。另一方面，如果您有 100 万个同时用户，那就是 500 GB，这可能意味着您要购买一些新服务器。如果您的行是 5000 字节而不是 500，那么您

# tfs - 为一个解决方案处理多个 TFS

> ID：12890307
> 
> 赞同：1
> 
> 时间：2012-10-15T06:23:30.593
> 
> 标签：tfs, tfs-2010

目前我的解决方案连接到客户端 TFS。我们在我们的组织中配置了一个新的 TFS 服务器。是否可以将相同的解决方案连接到两个 TFS 服务器？

在签入或获取最新信息时，我需要有一个选项来选择 TFS 服务器（客户端 TFS 或本地 TFS）并使用选定的 TFS 执行操作。可能吗？

我正在使用 TFS 2010。

# sphinx - 如何在狮身人面像中按日期过滤？

> ID：12890312
> 
> 赞同：1
> 
> 时间：2012-10-15T06:23:58.940
> 
> 标签：sphinx

我在数据库表中有一个列为“created_date”。

我正在尝试根据两个日期之间的“开始日期”和“结束日期”来选择记录

如何在 sphinx 中编写如下查询

> SELECT * FROM table where created_date BETWEEN "2001-01-05" AND "2001-01-10"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:55:31.220

您可以使用[setfilterrange](http://sphinxsearch.com/docs/2.0.5/api-func-setfilterrange.html)

```
$cl->SetFilterRange ( $attribute, $min, $max, $exclude=false ) 
```

这里 $cl 是 sphinx 类的对象， $min & max 是您的日期范围。

希望这有帮助！

# java - 依赖注入期间的弹簧错误

> ID：12890313
> 
> 赞同：0
> 
> 时间：2012-10-15T06:24:03.847
> 
> 标签：java, spring, spring-mvc, dependency-injection

我正在学习 Spring 并编写一个简单的程序来将属性注入 POJO。下面是主要课程——

```
public class test {
    public static void main (String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml");
        MySpring sm = (MySpring)context.getBean("myspring");
        System.out.println(sm);
    }

} 
```

POJO 如下——

```
 public class MySpring {
    public String count;
    void setcount(String val){
        this.count = val;
    }
    String getcount(){
        return count;
    }

} 
```

配置文件如下 -

```
 <?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
  <bean id="myspring" class="MySpring" >
   <property name="count" value="PowerShell" />
   </bean>
</beans> 
```

但是，当我运行 test.java 类时出现以下错误——

```
 Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myspring' defined in class path resource [Beans.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'count' of bean class [MySpring]: Bean property 'count' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1396)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at 
.....
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at test.main(test.java:7)
Caused by: org.springframework.beans.NotWritablePropertyException: Invalid property 'count' of bean class [MySpring]: Bean property 'count' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1064)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:924) 
```

我知道这是一个常见错误，但无法找到根本原因，因为一切似乎都很好。任何关于可能是什么问题的指示都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:25:54.213

*Bean 属性“count”不可写或具有无效的 setter 方法*

你需要有一个`count`属性设置器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:27:31.950

二传手应该是`setCount()`，不是`setcount()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:28:19.527

代码`void setcount(String val){`应在大写字母中更改为“C”

```
void setCount(String val) 
```

get/set 后的起始字母应为大写字母。这同样适用于 getter 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T06:35:37.467

在命名 setter/getter 时，您需要遵循 Javabeans 命名约定。这是 BeanIntrospection 框架的要求。以下应该工作：

```
void setCount(String val){
  this.count = val;
}

String getCount(){
  return count;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T07:16:36.010

我猜，`Spring`严格按照`naming convention`bean 的属性注入。 `Properties`总是`accessed via method calls on their owning object`。对于`readable`属性，将有一个`getter` `method`可读取的值，对于`writable`属性，将有一个`setter` `method`可写入的值。

因此，在您的情况下`Spring's IOC container implementation ApplicationContext`，尝试实例化`bean`(MySpring) 和`inject`您的类的属性，`MySpring`即`count`, for `injecting purpose container try to finding out the getCount() getter method inside your MySpring class`，但您的内部没有这样的方法，`class`它属于`Exception`.

修改了你的 bean

```
class MySpring
{
    private String count;

    /**
     * @return the count
     */
    public String getCount() {
        return count;
    }

    /**
     * @param count the count to set
     */
    public void setCount(String count) {
        this.count = count;
    }   

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-02T09:46:47.047

[Spring IoC 容器支持 JavaBeans 规范 ( http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html) )中描述的 setter 注入。

它搜索“setCamelVarName()”之类的内容，并将方法名称中“set”之后的第一个字母小写，并按原样使用方法名称的其余部分来推断属性名称。所以，要在你的类中设置“count”属性，你应该声明一个公共方法`public void setCount(int count)`而不是`public void setcount(int count)`. 无论如何，最后一个也违反了良好的 Java 开发实践。

# android - PhoneGap - 不适用于新设备

> ID：12890314
> 
> 赞同：1
> 
> 时间：2012-10-15T06:24:05.347
> 
> 标签：android, eclipse, cordova, error-handling

您好，我正在使用 PhoneGap Android 并发布了一个应用程序，该应用程序可以在 Android 2.3.3 下在虚拟设备和实际设备中运行。

但是，当在 Android 4.1 上同时在虚拟设备和实际设备上运行时，该应用程序甚至不会超过应用程序的第一页。

我对可能出现的问题感到茫然，因为我已将每段代码都放在了 try 块中，但它们都没有被触发，并且该应用程序在旧版本中运行良好。

这是我在 Android 4.1 下的 logcat

```
10-14 22:48:53.502: I/CordovaLog(871): Changing log level to DEBUG(3)
10-14 22:48:53.502: I/CordovaLog(871): Found preference for useBrowserHistory=false
10-14 22:48:53.512: D/CordovaLog(871): Found preference for useBrowserHistory=false
10-14 22:48:53.562: D/JsMessageQueue(871): Set native->JS mode to 1
10-14 22:48:53.694: D/DroidGap(871): DroidGap.init()
10-14 22:48:53.822: D/CordovaWebView(871): DroidGap.loadUrl(file:///android_asset/www/splash.html, 10000)
10-14 22:48:53.822: D/DroidGap(871): onMessage(splashscreen,show)
10-14 22:48:54.202: D/dalvikvm(871): GC_FOR_ALLOC freed 87K, 3% free 8080K/8259K, paused 335ms, total 339ms
10-14 22:48:54.312: I/dalvikvm-heap(871): Grow heap (frag case) to 9.111MB for 1228816-byte allocation
10-14 22:48:54.522: D/dalvikvm(871): GC_FOR_ALLOC freed 1K, 3% free 9278K/9479K, paused 201ms, total 201ms
10-14 22:48:55.032: D/dalvikvm(871): GC_CONCURRENT freed 4K, 3% free 9283K/9479K, paused 102ms+77ms, total 440ms
10-14 22:48:56.101: D/CordovaWebView(871): >>> loadUrl(file:///android_asset/www/splash.html)
10-14 22:48:56.101: D/PluginManager(871): init()
10-14 22:48:56.141: D/CordovaWebView(871): >>> loadUrlNow()
10-14 22:48:56.141: D/DroidGap(871): Resuming the App
10-14 22:48:56.192: I/Choreographer(871): Skipped 33 frames!  The application may be doing too much work on its main thread.
10-14 22:48:56.532: D/SoftKeyboardDetect(871): Ignore this event
10-14 22:48:56.802: I/Choreographer(871): Skipped 75 frames!  The application may be doing too much work on its main thread.
10-14 22:48:56.973: D/gralloc_goldfish(871): Emulator without GPU emulation detected.
10-14 22:48:57.764: D/SoftKeyboardDetect(871): Ignore this event
10-14 22:48:59.602: D/DroidGap(871): onMessage(onPageStarted,file:///android_asset/www/splash.html)
10-14 22:49:06.772: D/SoftKeyboardDetect(871): Ignore this event
10-14 22:49:16.172: E/CordovaWebView(871): CordovaWebView: TIMEOUT ERROR!
10-14 22:49:16.172: D/Cordova(871): CordovaWebViewClient.onReceivedError: Error code=-6 Description=The connection to the server was unsuccessful. URL=file:///android_asset/www/splash.html
10-14 22:49:16.232: D/DroidGap(871): onMessage(onReceivedError,{"errorCode":-6,"url":"file:\/\/\/android_asset\/www\/splash.html","description":"The connection to the server was unsuccessful."})
10-14 22:49:16.764: I/Choreographer(871): Skipped 131 frames!  The application may be doing too much work on its main thread.
10-14 22:49:16.764: D/SoftKeyboardDetect(871): Ignore this event
10-14 22:49:17.321: D/Cordova(871): onPageFinished(file:///android_asset/www/splash.html)
10-14 22:49:17.332: D/CordovaWebView(871): >>> loadUrlNow()
10-14 22:49:17.364: D/DroidGap(871): onMessage(onNativeReady,null)
10-14 22:49:17.364: D/DroidGap(871): onMessage(onPageFinished,file:///android_asset/www/splash.html)
10-14 22:49:17.386: I/Choreographer(871): Skipped 112 frames!  The application may be doing too much work on its main thread.
10-14 22:49:49.262: D/DroidGap(871): Paused the application!
10-14 22:49:50.032: W/IInputConnectionWrapper(871): showStatusIcon on inactive InputConnection
10-14 22:49:51.446: D/DroidGap(871): onDestroy()
10-14 22:49:51.446: D/CordovaWebView(871): >>> loadUrlNow()
10-14 22:49:51.472: D/CordovaWebView(871): >>> loadUrlNow()
10-14 22:49:51.642: D/DroidGap(871): onMessage(onPageStarted,about:blank)
10-14 22:49:51.682: W/System.err(871): java.net.SocketException: Socket closed
10-14 22:49:51.682: W/System.err(871):  at libcore.io.Posix.accept(Native Method)
10-14 22:49:51.702: W/System.err(871):  at libcore.io.BlockGuardOs.accept(BlockGuardOs.java:55)
10-14 22:49:51.702: W/System.err(871):  at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:98)
10-14 22:49:51.702: W/System.err(871):  at java.net.ServerSocket.implAccept(ServerSocket.java:202)
10-14 22:49:51.702: W/System.err(871):  at java.net.ServerSocket.accept(ServerSocket.java:127)
10-14 22:49:51.702: W/System.err(871):  at org.apache.cordova.CallbackServer.run(CallbackServer.java:195)
10-14 22:49:51.702: W/System.err(871):  at java.lang.Thread.run(Thread.java:856)
10-14 22:49:52.302: D/Cordova(871): onPageFinished(about:blank)
10-14 22:49:52.312: D/DroidGap(871): onMessage(onPageFinished,about:blank)
10-14 22:49:52.312: D/DroidGap(871): onMessage(exit,null) 
```

任何帮助将非常感激。

谢谢你。

编辑：

我正在使用 PhoneGap 版本：cordova-2.1.0.js

通过更多阅读，我还将这一行添加到我的 MainActivity.java

```
super.setIntegerProperty("loadUrlTimeoutValue", 60000); 
```

并且还将 ADB 连接超时从 5000 更改为 10000

这是我的清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.game.demo"
android:versionCode="2"
android:versionName="1.1" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<supports-screens 
android:largeScreens="true" 
android:normalScreens="true" 
android:smallScreens="true" 
android:resizeable="true" 
android:anyDensity="true" />

<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:29:05.817

可能这个[链接](https://groups.google.com/forum/?fromgroups=#!msg/phonegap/HYUfLJF1oH0/r9rZTfz_cccJ)会帮助你检查它

**注意：**从 Android 3.2（API 级别 13）开始，`screen size`当设备在纵向和横向之间切换时，也会发生变化。

`minSdkVersion`因此，如果您想在为 API 级别 13 或更高级别（由and属性声明）进行开发时防止由于方向更改而导致运行时重新启动，则除了“orientation”值之外`targetSdkVersion`，您还必须包含该值。`screenSize`也就是说，您必须 decalare `android:configChanges="orientation|screenSize"`。

但是，如果您的应用程序以 API 级别 12 或更低级别为目标，那么您的 Activity 始终会自行处理此配置更改（此配置更改不会重新启动您的 Activity，即使在 Android 3.2 或更高版本的设备上运行时也是如此）。

为每个活动添加标签

```
 android:configChanges="orientation|screenSize|keyboardHidden" 
```

# xmpp - 扩展 XMPP Presence 节的最佳方式是什么

> ID：12890325
> 
> 赞同：1
> 
> 时间：2012-10-15T06:25:32.863
> 
> 标签：xmpp, openfire

我们使用 openfire 3.7.1 作为我们的 XMPP 服务器，并且我们希望扩展 Presence 节以包含一些额外的信息，例如：

```
<presence from="you@MyServer.com">
    <body>...</body>
    <custom_element>
        <custom_data/>
    </custom_element>
</presence> 
```

您能否告诉我一些指示，因为这样做会更好吗？例如，我是否应该修改或扩展一些 XMPP 模式，以便 openfire 像往常一样处理上述存在数据包（目前，如果我像上面一样发送消息，openfire 似乎不会将其视为存在数据包）？我应该创建一个插件来拦截所有数据包以处理我们的自定义元素吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T10:39:38.027

这是通常的做法：

```
<presence from="you@MyServer.com">        
    <x xmlms="http://mycompany.com/mycustomnamespace1>
        <custom_data/>
    </x>
</presence> 
```

Openfire 将毫无问题地路由这样的数据包。当服务器必须处理对此自定义元素的任何操作时，您只需要一个服务器插件。当服务器应该只将状态路由给您的联系人时，服务器上不需要任何内容​​。

# wpf - 如何在 WPF 上绘制垂直折线图？

> ID：12890326
> 
> 赞同：0
> 
> 时间：2012-10-15T06:25:36.163
> 
> 标签：wpf, linechart

我正在学习在我的 WPF 中绘制折线图。我在这边找到了一个水平线图教程“ [http://www.c-sharpcorner.com/uploadfile/mahesh/line-chart-in-wpf/](http://www.c-sharpcorner.com/uploadfile/mahesh/line-chart-in-wpf/) ”，我设法做到了。但我的问题是如何绘制垂直图？

我以我提供的网站上的图表为例，如果**将**图表转换为**垂直图表**。**X 轴**将是**int（在顶部）**，**Y 轴**将是**Date（在左侧）**。任何人都可以帮助我吗？

我想要的图表应该是这样的：http: [//imageshack.us/photo/my-images/202/capturegfj.jpg/](http://imageshack.us/photo/my-images/202/capturegfj.jpg/)

p/s：抱歉，由于信誉点低，我无法上传图片。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:40:18.413

您可以使用 Microsoft 提供的图表控件：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.chart.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.chart.aspx)

我猜这`SeriesChartType.Line`是你的图表类型。

这是 MSDN 上的示例。[http://msdn.microsoft.com/en-us/library/hh297122%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/hh297122%28v=vs.100%29.aspx)

# php - 如何发布元素包含“http://www.example.com?i=12&j=34”等数据的 ajax 数据

> ID：12890327
> 
> 赞同：3
> 
> 时间：2012-10-15T06:25:38.373
> 
> 标签：php, javascript, jquery

```
var desc = "www.google.com?i=12&j=34"
$.ajax({
            url: 'controller/function',
            type: 'POST',
            data: ({tDescription:desc}),
            beforeSend: function(){
                //Do Something
            },
            success: function(msg){
                //Do Something                
            }
        }); 
```

在`$_POST`包含如下

```
tDescription: www.google.com?i=12
j:34 
```

如何按原样检索 Total desc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:30:43.490

用于[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)对数据进行编码。

```
data: ({tDescription:encodeURIComponent(desc)}), 
```

**什么时候用哪个？****escape()**
方法不对 + 字符进行编码， 该字符在服务器端被解释为空格以及由字段中带有空格的表单生成。由于这个缺点以及该函数无法正确处理非 ASCII 字符的事实，您应该尽可能避免使用 escape()。最好的选择通常是 encodeURIComponent()。

 ****escape()**不会编码：@*/+

**encodeURI()**方法的使用比 escape() 更专业一点，因为它对 URI [REF] 进行编码，而不是查询字符串，后者是 URL 的一部分。当您需要对要用于任何使用 URI 并且需要某些字符保持未编码的资源的字符串进行编码时，请使用此方法。请注意，此方法不对 ' 字符进行编码，因为它是 URI 中的有效字符。

**encodeURI()**不会编码：~!@#$&*()=:/,;?+'

最后，在编码 URI 的单个组件时，大多数情况下应该使用**encodeURIComponent()方法。**此方法将对某些通常被识别为 URI 的特殊字符的字符进行编码，以便可以包含许多组件。请注意，此方法不对 ' 字符进行编码，因为它是 URI 中的有效字符。

**encodeURIComponent()**不会编码：~!*()'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:11:14.387

`serialize()`您的内容，您可以在目的地对其进行解析。**

# xml - Magento 将客户我的帐户布局设置为一列

> ID：12890332
> 
> 赞同：1
> 
> 时间：2012-10-15T06:26:03.370
> 
> 标签：xml, magento, layout, account

我目前正在使用最新版本的 Magento 1.7.0.2。客户登录后，他们会看到典型的 2 列我的帐户详细信息，导航菜单位于左侧。我需要删除此导航，以便我的仪表板页面只有一列。我也不希望删除左侧导航后的空白区域。我已经尝试了 local.xml 中的内容，但发生的情况是我的帐户中的客户导航菜单已被删除，但任何带有左侧边栏的页面也会丢失该边栏。请注意，我正在运行自定义模板，并且唯一的 customer.xml 文件位于 app/design/frontend/base/default/layout 中。我的 local.xml 在 /app/design/frontend/default/custom_template/layout 中。

我将如何做到这一点以及我需要编辑的文件的路径是什么。任何帮助是极大的赞赏。这是customer.xml中客户我的帐户布局的代码

```
<customer_account translate="label">
    <label>Customer My Account (All Pages)</label>
    <!--remove name="catalog.compare.sidebar"/>
    <remove name="sale.reorder.sidebar"/-->
    <!-- Mage_Customer -->
    <reference name="root">
        <action method="setTemplate"><template>page/1column.phtml</template></action>
    </reference>

    <reference name="content">
        <block type="page/html_wrapper" name="my.account.wrapper" translate="label">
            <label>My Account Wrapper</label>
            <action method="setElementClass"><value>my-account</value></action>
        </block>
    </reference>

    <reference name="left">
        <block type="customer/account_navigation" name="customer_account_navigation" before="-" template="customer/account/navigation.phtml">
            <action method="addLink" translate="label" module="customer"><name>account</name><path>customer/account/</path><label>Account Dashboard</label></action>
            <action method="addLink" translate="label" module="customer"><name>account_edit</name><path>customer/account/edit/</path><label>Account Information</label></action>
            <action method="addLink" translate="label" module="customer"><name>address_book</name><path>customer/address/</path><label>Address Book</label></action>
        </block>
        <block type="checkout/cart_sidebar" name="cart_sidebar" template="checkout/cart/sidebar.phtml">
            <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/sidebar/default.phtml</template></action>
            <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/sidebar/default.phtml</template></action>
            <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/sidebar/default.phtml</template></action>
        </block>
        <block type="catalog/product_compare_sidebar" name="catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml"/>
        <remove name="tags_popular"/>

    </reference>
</customer_account> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T06:39:56.460

`customer_account_index`由于您只需要仪表板页面的一列布局，因此请在布局句柄中进行更改， 因为这是针对客户帐户仪表板布局的。

如果您将在句柄上进行更改，`customer_account`如果未在特定句柄上更新，它将应用于所有客户页面。

希望这个帮助！

# jquery - 如何让 jQuery 验证引擎和 prettyCheckboxes 一起工作？

> ID：12890333
> 
> 赞同：0
> 
> 时间：2012-10-15T06:26:09.207
> 
> 标签：jquery, jquery-plugins, checkbox, drop-down-menu, jquery-validation-engine

我正在为我的 WordPress 网站使用 jQuery Validation Engine 和 prettyCheckboxes jQuery 插件。

最初，JVE 将兼容性与样式`<select>`'s (jQuery selectBox) 的插件集成在一起，我一直在尝试使用`<input type="checkbox">`替换插件 prettyCheckboxes 来做同样的事情。

您必须`prettySelect : true`在插件初始化中添加一个选项，所以我`prettyCheckboxes : true`在插件中添加了一个，您可以在下面的要点中看到行、、、`164`和`330`修改`495`后`693`的`1944`插件。

除此之外，您还必须做一些 ID/class jiggery 以确保 ID 不会重复，并且不会在不应添加的地方添加类。我还必须将“checked”属性添加到 hidden 中`<input type="checkbox">`，以便 JVE 插件发现它已更改。

它只能在我可以显示错误消息的情况下起作用，但这是错误的。基本上，当您单击复选框时，它会注册要显示的消息，而当您取消选中该消息时，它会消失；反之亦然。但是，当您在取消单击第一次单击后单击其他复选框时，它根本不起作用，**除非您按照最初单击的顺序进行操作**。这真的很奇怪。

所以我的问题是，**我怎样才能让 prettyCheckboxes 正确地与 JVE 一起工作**？显然我已经错误地修改了它，但我只是不确定在哪里或如何让它按预期工作。

修改后的 jQuery 验证引擎、prettyCheckboxes、自定义 HTML 和脚本：[https](https://gist.github.com/0349d8c92039fc8c6009)
://gist.github.com/0349d8c92039fc8c6009 （对不起，我不能发布两个以上的超链接！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:52:07.630

由于某种原因，我的一些代码干扰了插件：

```
$('.custom-tick').click(function() {
    $(this).each(function() {
        if ($(this).hasClass('checked')) {
            $(this).siblings('input[type="checkbox"]')
                .attr('checked', true);
        } else {
            $(this).siblings('input[type="checkbox"]')
                .attr('checked', false);
        }
    });
}); 
```

我删除了它，复选框正在正确激活验证。

# c# - 时间和距离上的轻微偏移

> ID：12890339
> 
> 赞同：0
> 
> 时间：2012-10-15T06:26:41.920
> 
> 标签：c#, xna, farseer

我正在搭建一个教授基础物理的教学平台。

根据我在 Flash 开发方面的经验，我之前也遇到过类似的问题。

游戏时间与现实世界时间不同。在这种情况下，例如，如果计算机滞后或出于其他原因，弹丸所覆盖的距离可能会更大或更小。

这是该平台的屏幕截图。如屏幕截图所示，我只是在开发一个课程来教授基本的 s = v * t 关系。

![教学课 s = u * t 关系](../Images/0ccc093469f6a74728f7dacfa41a8f4d.png)

**必要的背景**

红线标记位置 69.06284 m，即我们的目标距离。时间 11.56087 秒是给定值。

用户应该输入一个速度，将弹丸从 0 m 向右移动，以便在给定的时间内到达红线。

当时间到时，绿线标记弹丸的位置。

我可以向您保证，我输入了精确到小数点后 5 位的速度，因此在这种情况下不会出现人为错误。

忽略黄色矩形。它只是一个 UI 元素。

屏幕宽 800 像素，因此 10 像素代表 1 米。

**解决问题的方法**

坦率地说，我不确定该怎么做。但我从某人那里听说可变时间步更能代表真实世界的时间。但是，Farseer 作为物理模拟引擎，应该是固定时间步长使用的吧？

任何建议将不胜感激。

编辑：在屏幕截图中，弹丸覆盖的实际距离约为 66.3 m，而理论距离为 69.1 m。我还注意到，如果目标距离（当前为 69.1 m）更小（红线向左移动更多），则误差更小。

**如何发射弹丸？**

```
public override void ShootProjectile(Vector2 start, float angle, float speed) {
    GameTemplate g = Game as GameTemplate;
    Arrow a = new Arrow(Game, start, this);
    a.Initialize();
    a.Restitution = 0f;
    a.Friction = 0f;
    a.LinearVelocity = new Vector2(speed, 0);
    Console.WriteLine("Speed: "+a.LinearVelocity.X);
    _fireTime = g.SinceGameStarts;

    //Console.WriteLine("Fire time: "+_fireTime);
    _projectiles.Add(a);
} 
```

在Arrow类中，我基本上是通过一个CreateBody方法来设置Farseer的：

```
protected override void CreateBody() {
    GameTemplate g = Game as GameTemplate;
    Vector2 positionInMeters = _initPos / g.MeterInPixels;
    float width = 30f / g.MeterInPixels;
    float height = 40f / g.MeterInPixels;
    _body = BodyFactory.CreateRectangle(g.GameWorld.World, width, height, 1f, positionInMeters);
    _body.BodyType = BodyType.Dynamic;
    _origin = new Vector2(15f, 40f);
} 
```

**如何计算弹丸的飞行时间？**

可能您对 _fireTime = g.SinceGameStart 行感到好奇。因为GameStart 是GameTemplate 中变量_currTime 的getter。_currTime 的值在每次 Update(gameTime) 调用时更新一次。所以如果我想知道弹丸飞行了多长时间，我这样做：

```
time = _currTime - projectile.FireTime 
```

# android - 每次重启设备后自动从 sd 卡安装 apk 到设备

> ID：12890341
> 
> 赞同：1
> 
> 时间：2012-10-15T06:26:45.233
> 
> 标签：android

嗨，我正在努力创建一个即使在硬重置或格式化设备后也无法删除或卸载但在这样的生根过程中失败的应用程序，现在我想要一个代码在硬重置后从 sd 卡自动安装应用程序或重新启动android设备，该应用程序是为了找到丢失的手机，以便即使丢失的设备也被重置或格式化，
我的应用程序可以帮助用户找到他的手机谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:40:52.133

> 我正在努力创建一个即使在硬重置或格式化设备后也无法删除或卸载但在这样的生根过程中失败的应用程序

构建您自己的 ROM 模组，预先安装您的应用程序。

> 现在我想要一个代码在硬重置或重启安卓设备后从 sd 卡自动安装应用程序

幸运的是，出于明显的安全原因，这是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:50:29.437

AFAIK，有 2 种 android 应用程序：系统应用程序和用户应用程序。如果您想阻止从您的应用程序中卸载，它必须是系统应用程序。

如果您正在为 root 手机开发应用程序（并且您的手机也已 root），请尝试将 *.apk 复制到 /system/app 然后重新启动手机。

希望这可以帮助。

# mysql - 如何查找表中的重复行？

> ID：12890344
> 
> 赞同：-1
> 
> 时间：2012-10-15T06:27:01.357
> 
> 标签：mysql, sql, duplicates

> **可能的重复：**
> [MySQL 重复行](https://stackoverflow.com/questions/667035/mysql-duplicate-rows)
> [显示重复的行号](https://stackoverflow.com/questions/12890028/displaying-duplicate-row-numbers)

如果表中没有任何主键列，谁能告诉我如何在表中查找重复行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:34:10.530

对于`Table`列`Field1, Field2`：

```
SELECT FIELD1, FIELD2
FROM Table
GROUP BY FIELD1, FIELD2
HAVING COUNT(*)>1 
```

# iphone - 当 UIButton 动画时，我想识别按钮上的事件

> ID：12890345
> 
> 赞同：3
> 
> 时间：2012-10-15T06:27:15.127
> 
> 标签：iphone, objective-c, ios, xcode

> **可能重复：**
> [使用 UIView animateWithDuration 进行动画处理时无法触摸 UIButton](https://stackoverflow.com/questions/8346100/uibutton-cant-be-touched-while-animated-with-uiview-animatewithduration)

我想从左到右为 UIButton 设置动画，如果用户触摸按钮我应该发送事件，但是当按钮动画时它不是发送事件。请帮助我，我的项目在这一点上停止了。一些开发人员建议我使用

```
[UIView animateWithDuration:3
                      delay:0
                    options:UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                                myBtn.frame=CGRectMake(0,
                                                       100,
                                                       myBtn.frame.size.width,
                                                       myBtn.frame.size.height);
                              }
                 completion:^(BOOL finished) { NSLog(@"Animation Completed!"); }]; 
```

这种方法，但它也不起作用，请告诉我该怎么办？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:44:17.323

您应该使用 tapGesture 识别器来获取该按钮的 Tap 事件，如下所示`viewDidLoad`。

```
- (void)viewDidLoad

 {
   UITapGestureRecognizer *btnTapped = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tapAction:)];
   btnTapped.numberOfTapsRequired = 1;
   btnTapped.delegate = self;
   [myBtn addGestureRecognizer:btnTapped];//here your button on which you want to add sopme gesture event.
   [btnTapped release];

 [super viewDidLoad];
} 
```

这就是你的 Button 动画代码。

```
[UIView animateWithDuration:3
                          delay:0
                        options:UIViewAnimationOptionAllowUserInteraction
                     animations:^{
                                    myBtn.frame=CGRectMake(0, 100, myBtn.frame.size.width, myBtn.frame.size.height);
                                 }
                     completion:^(BOOL finished) {NSLog(@"Animation Completed!");]; 
```

下面是允许同时识别的委托方法

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
   {
      return YES;
   }

 here Above methods   Returning YES is guaranteed to allow simultaneous recognition. returning NO is not guaranteed to prevent simultaneous recognition, as the other gesture's delegate may return YES

   - (void)tapAction:(UITapGestureRecognizer*)gesture
    {
     //do here which you want on tapping the Button..

    } 
```

**编辑：**如果您想找到触摸手势，您应该使用 UILongPressGestureRecognizer 而不是 UITapGestureRecognizer 并设置持续时间。

我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:34:34.977

在动画下`UIButton`不能使用，你必须使用`NSTimer`：

```
timer = [NSTimer timerWithTimeInterval:.005
                                      target:self
                                      selector:@selector(moveButton)
                                      userInfo:nil
                                      repeats:YES];
                [[NSRunLoop mainRunLoop] timer forMode:NSRunLoopCommonModes];

// you can change the speed of the button movement by editing (timerWithTimeInterval:.005) value

-(void)moveButton{
       button.center = CGPointMake(button.center.x+1,button.center.y);

 if (button.frame.origin.x>=self.view.frame.size.width ) {
        [timer invalidate];
    //The event that will stop the button animation

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:39:35.340

问题是按钮已经获得最后一帧并且不适用于当前位置。

@jrturton 在这个问题上给出了一个很好的解决方案：[UIButton can't be touch while animated with UIView animateWithDuration](https://stackoverflow.com/questions/8346100/uibutton-cant-be-touched-while-animated-with-uiview-animatewithduration)

它基本上实现了 touchesBegan: 方法来处理presentationLayer。

# c# - Watin Recorder v2 无法重新运行测试

> ID：12890347
> 
> 赞同：0
> 
> 时间：2012-10-15T06:27:27.047
> 
> 标签：c#, debugging, watin

当我尝试创建 Web 应用程序测试并使用 Watin Test Recorder v2 进行记录时。例如：1）进入google.com页面 2）在搜索框中输入“Hollywood” 3）点击谷歌搜索 4）点击第一个结果

记录器实际上可以记录动作，我可以清楚地看到所有步骤和描述，从中提取 C# 代码没有问题

但是，当我尝试重新运行测试时，它只能做： - 导航到 google.com 页面并用空的搜索框挂在那里！！- 还尝试设置一些断点进行调试，但无法找出问题的根源。

有没有人遇到过这个问题，能给我建议吗？？

谢谢

# ios - 如何在 ios 的增强现实中像本地视频一样运行远程视频

> ID：12890351
> 
> 赞同：3
> 
> 时间：2012-10-15T06:27:55.243
> 
> 标签：ios, augmented-reality

我正在研究 iOS 增强现实，刚刚`vuforia-videoplayback-ios-1-0-2` 从[https://ar.qualcomm.at/sdk/ios实现](https://ar.qualcomm.at/sdk/ios)

在检测到标记时的本地视频的情况下，视频仅覆盖在标记上（视频屏幕尺寸随着标记尺寸的增加而增加，反之亦然）。但在远程图像的情况下，我将视频链接作为文件名而不是视频文件（.mp4）。它有效，但来自网络的视频通过 iPhone 内置的全屏播放器运行。我只想让它覆盖在标记上，就像在本地视频的情况下发生的那样。

如果有人帮我解决这个问题，我将不胜感激。

# jquery - 在 TextBox / Label 中显示多行数据

> ID：12890357
> 
> 赞同：0
> 
> 时间：2012-10-15T06:28:24.180
> 
> 标签：jquery, html

我必须显示可以是单行或多行的数据（从数据库中获取）。我尝试使用文本框，但它的大小不能动态改变，我也使用了标签，但对于多行，它在一行中显示所有数据，而不是分成多行。需要一些建议或解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:34:37.483

对于多行数据，您可能需要我们`nl2br`：

```
$text = nl2br(htmlentities($row['text']));
echo "<textbox>$text</textbox>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:40:54.933

jquery [autosize](https://github.com/jackmoore/autosize)插件将对您有所帮助。将您的文本放入 textarea 并应用自动调整大小。它会根据内容增加或减少文本区域的长度。

# php - 如何使用 php 在同一主机上管理两个不同网站的单独会话状态

> ID：12890360
> 
> 赞同：10
> 
> 时间：2012-10-15T06:28:45.707
> 
> 标签：php, session-variables, session-state, session-cookies

我目前正在开发两个网站，并通过连接到`localhost`.

第一个站点用 引用，`http://localhost/web1`第二个站点用 引用 `http://localhost/web2`。

我为每个设置了三个特定于域的会话变量创建了一个登录脚本，例如：

1.  `$_SESSION['web1_user']`
2.  `$_SESSION['web1_login']`
3.  `$_SESSION['web1_sessionID']`

但是，当我在**同一个浏览器上登录****两个**站点时，然后退出**一个**站点（触发，我也会自动退出**第二个**站点。****`session_destroy()`****

 ******任何关于我如何解决这个问题的想法都将不胜感激。:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T00:37:36.093

啊，共享主机的乐趣！最好的办法是在您实际需要同时登录两个站点时为每个站点使用不同的浏览器...

但是，要解释为什么这很重要，您必须了解以下内容：

`Session`变量存储在服务器上，服务器上有一个键控引用，浏览器上有一个 cookie。一旦您取消并破坏了两者中的任何一个，就无法再进行匹配 - 您的会话就消失了！

```
session_start();
session_unset();
session_destroy(); 
```

以上将杀死所有将服务器链接到浏览器的会话变量（在服务器端）。

轻松管理此问题的方法是将会话变量放入另一组数组中：

```
$_SESSION["site1"] = array( $user_id, $session_id );
$_SESSION["site2"] = array( $user_id, $session_id ); 
```

你当然可以让它变得花哨：

```
$_SESSION['site3']['userID']    = 'someuserid';
$_SESSION['site3']['sessionid'] = 'somesessionid'; 
```

然后当您从站点 1 注销时

```
session_start();
unset($_SESSION['site1']); 
```

在这种情况下，您为每个站点创建了一个单独的会话管理系统（使用二维数组，其顶层由您的站点标识符作为关键字）。这使得每个站点都可以管理一组单独的会话变量——当你销毁一个时，你不会触及其他的。

但是，我真的建议使用不同的浏览器来代替（或另外）......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T06:44:26.360

我最近解决了一个与您的问题有关的问题。最初，我正在寻找与您所描述的类似的实现，并且在进行了相当多的搜索之后 - 这就是我想出的：

**站点 1**：

```
ini_set("session.cookie_domain", "yourdomainname");
$some_name = session_name("some_name");
$domain = 'your domain name';
session_set_cookie_params(0, "/", $domain);
session_start();
$_SESSION['user']=$_POST['user'];
$_SESSION['password']=$_POST['password']; 
```

**站点 2**：

```
$some_name = session_name("some_name");
ini_set('session.cookie_domain', 'yourdomainname');
session_start();
echo $_SESSION['user'];
echo $_SESSION['password']; 
```

这种改变对我来说效果很好——我猜它也会对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T06:37:09.170

采用

```
session_name('web1'); 
```

前`session_start();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T06:32:34.727

在每个应用程序中设置不同的会话名称，[通过`session_name()`](http://php.net/manual/en/function.session-name.php)或[通过`session.name`](http://www.php.net/manual/en/session.configuration.php#ini.session.name)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T06:33:45.990

你可以用这个

```
ini_set("session.cookie_domain", ".example.com"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T06:46:40.117

您需要为不同的站点制作不同的主机

在这种情况下，您有两个站点在名为 localhost 的同一主机上运行，​​因此对于相同的主机名会话是共享的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T07:11:53.523

在第二个域中包含带有会话开始的文件。

web1 包含会话开始文件 web2 include('../web1/session.php');

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-15T06:36:29.793

您可以在所有网站中使用不同的会话名称，例如您使用的第一个网站，`$_SESSION['web1_user'], $_SESSION['web1_login'], $_SESSION['web1_sessionID']`然后您可以使用的第二个网站`$_SESSION['web2_user']`

我已经面临这个问题并使用不同的会话名称解决了它。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-10-15T06:31:42.993

Bez 会话在同一个浏览器中共享，因此如果您从一个选项卡注销，其他选项卡将被注销，

示例：我登录 Chrome，然后在另一个 Chrome 中打开，会话是共享的，所以如果我从其中一个注销，另一个会自动注销！******

# android - Android - 使用带有请求标头的 url 打开浏览器

> ID：12890361
> 
> 赞同：6
> 
> 时间：2012-10-15T06:28:49.750
> 
> 标签：android

我有一个特定的要求，我必须从我的活动中触发浏览器上的 url。我可以使用以下代码做到这一点：

```
String finalUrl = "http://localhost:7001/display/result.jsp?param=12345";
Intent browserIntent = new Intent(android.content.Intent.ACTION_VIEW,
                        Uri.parse(finalUrl)); 
```

现在，我想通过在请求中将“param”作为请求标头而不是作为 queryString 本身传递来调用 result.jsp。

有人可以请教吗？

非常感谢提前

**编辑** 即使是请求正文中带有“参数”的 POST 请求也应该没问题。

**编辑 2** 接受的答案是针对 POST 请求，而不是针对标头。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T08:38:40.317

Android 浏览器支持“查看”javascript，例如以下代码可以启动浏览器应用程序以显示警报对话框：

```
 String finalUrl = "javascript:alert('hello')";
    Intent browserIntent = new Intent(android.content.Intent.ACTION_VIEW,
                            Uri.parse(finalUrl));
    startActivity(browserIntent); 
```

通过 javascript 进行 post 操作的一个常见技巧是您通过 javascript 创建一个表单，然后提交它。所以理论上像下面这样的代码应该可以工作（部分代码是从[这篇文章](http://mentaljetsam.wordpress.com/2008/06/02/using-javascript-to-post-data-between-pages/)中复制的）：

```
 //String finalUrl = "http://localhost:7001/display/result.jsp?param=12345";
    String finalUrl = "javascript:" + 
        "var to = 'http://localhost:7001/display/result.jsp';" +
        "var p = {param:'12345',param2:'blablabla',param3:'whatever'};"+
        "var myForm = document.createElement('form');" +
        "myForm.method='post' ;" +
        "myForm.action = to;" +
        "for (var k in p) {" +
            "var myInput = document.createElement('input') ;" +
            "myInput.setAttribute('type', 'text');" +
            "myInput.setAttribute('name', k) ;" +
            "myInput.setAttribute('value', p[k]);" +
            "myForm.appendChild(myInput) ;" +
        "}" +
        "document.body.appendChild(myForm) ;" +
        "myForm.submit() ;" +
        "document.body.removeChild(myForm) ;";
    Intent browserIntent = new Intent(android.content.Intent.ACTION_VIEW,
                            Uri.parse(finalUrl));
    startActivity(browserIntent); 
```

# android - 切换选项卡时调用了两次 onCreateOptionsMenu() 并且不调用 OnOptionItemSelected()

> ID：12890362
> 
> 赞同：4
> 
> 时间：2012-10-15T06:29:01.680
> 
> 标签：android, actionbarsherlock, achartengine, android-tabs

我的应用程序中也有 3 个选项卡，在应用程序中使用**actionbarSherlock**和**achartengine**库：就像我启动应用程序并从主选项卡移动到第二个选项卡，或者即使我移动到第三个选项卡，我`onCreateOptionsMenu()`也会被调用两次，因为`onOptionItem`Selected 永远不会被调用，当我转到第三个选项卡并返回到第二个选项卡时，它会被调用，然后`onCreateOptions`菜单只被调用一次，然后`onOptionItemSelected`被调用。

`action bar sherlock`使用和`achartengine`库的应用程序中共有 3 个选项卡

**案例1**：从第一个选项卡移动---->>>>第二个选项卡：`onCreateOptionsMenu()`被调用两次并且`onOptionItemSelected()`没有被调用

**案例 2**：从第一个选项卡移动 ---->>>> 第三个选项卡：`onCreateOptionsMenu()`被调用两次并且`onOptionItemSelected()`未被调用

**案例 3**：从第一个选项卡移动 ---->>>> 第三个选项卡 --->>>第二个选项卡：`onCreateOptionsMenu()`被调用一次，`onOptionItemSelected()`也被调用

**案例 4**：从第一个选项卡移动 ---->>>> 第二个选项卡 --->>> 第三个选项卡：`onCreateOptionsMenu()`被调用一次，`onOptionItemSelected()`也被调用

请建议我解决这个问题。自从这个问题困扰我以来，已经有 4-5 天了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T07:25:34.277

我终于找到了解决方案，它仍然是一个悬而未决的问题，发明者和开发人员尚未解决。:-))

# ruby-on-rails - 为什么 Rails 应用程序在某些情况下返回 406 而不是 404？

> ID：12890364
> 
> 赞同：2
> 
> 时间：2012-10-15T06:29:02.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3, error-handling

我有一个运行良好的大型 Rails 应用程序，但由于该应用程序的一些令人讨厌的行为，我遇到了谷歌的问题。当我打电话

[http://railsapp.com/index.html](http://railsapp.com/index.html)

哪个不存在，应用程序返回正确的 404 错误。但是当我打电话

[http://railsapp.com/index.htm](http://railsapp.com/index.htm)

它返回一个 406 错误，这不是很好。每次请求扩展名为 .htm 的不存在文件时，都会出现此问题。如何让我的 Rails 应用程序返回 404 而不是 406？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:47:00.867

尝试这个

```
 respond_to do |format|    
   format.html {}
   format.js {}        
  end 
```

因为在您的“#{RAILS_ROOT}/public/..”中，406.htm 文件不是他们的，因此它会给出错误，并且 404.html 文件在公用文件夹中可用，因此可以调用。

在你的 {RAILS_ROOT}/public 这些是文件是他们的

```
1\. 404.html
2\. 422.html
3\. 500.html 
```

如果你使用这些文件，那么它会调用 else 它会给出错误，比如文件不存在。

或者

你也可以在 ApplicationController 中定义一个方法，如：

```
def render_404
  render :file => "#{RAILS_ROOT}/public/404.html",  :status => 404
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:11:10.267

406.htm 文件在您的公用文件夹中不可用，因此您收到错误 - 非现有文件。根据您的布局在您的公用文件夹中添加 406.html 文件，然后尝试。

# jquery - 仅在 IE 9 中使用 jquery 的属性集未添加到元素

> ID：12890366
> 
> 赞同：0
> 
> 时间：2012-10-15T06:29:11.227
> 
> 标签：jquery, internet-explorer, internet-explorer-9

使用 jQuery，我向这样的对象元素添加 2 个属性

```
$('#myObject').attr('codebase', pluginURL_IE);
$('#myObject').attr('onerror', 'InstallFailed();'); 
```

此代码适用于 IE 7 和 IE 8，但不适用于 IE 9。

我使用开发人员工具检查了我的标签，发现“codebase”属性已设置，而“onerror”属性未在 IE 9 中设置。

知道为什么我只在 IE 9 中遇到这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:35:56.150

您可以在 jQuery 中使用 .error() 事件处理程序。下面是一个例子

```
$('#myObject').error(function(){
  InstallFailed();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:38:59.527

尝试 -

```
$('div').attr({codebase: 'pluginURL_IE', onerror: 'InstallFailed();' }); 
```

[**演示**](http://jsfiddle.net/drxAj/)

# nosql - StarCounter 和 CAP

> ID：12890367
> 
> 赞同：8
> 
> 时间：2012-10-15T06:30:12.170
> 
> 标签：nosql, starcounter

我一直在阅读一个名为 Starcounter 的数据库。它声称它可以处理“NoSql”数据库只能处理的负载，而不会降低一致性。据我了解 CAP 定理，如果您保持一致性，您将失去可用性或分区容错性。那么 StarCounter 的工作原理是什么？

我可以想象 StarCounter 很快，但是 NoSql 需要降低一致性才能跟上的说法对我来说似乎有点奇怪。谁能解释一下？

提前感谢罗兰

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T15:36:16.997

# 简短的回答

CAP 定理（又名 Brewers 定理）不能因单一信息（如一致的数据库）而被击败。如果您有一个水平扩展的数据库，您将无法获得一致性***和***性能。这个结论来自物理定律，可以从布鲁斯定理和爱因斯坦的相对论中推导出来。您需要扩大/扩大，而不是扩大。不是很“多云”，但如果伽利略的敌人今天还活着，他们可能会承认，大自然在尊重人类时尚方面做得很差。

### 缩放一致的数据

我确信还有其他方法，但 Starcounter 通过将数据库映像托管在 RAM 中来工作。不是将数据库数据移动到应用程序代码，而是将部分应用程序代码移动到数据库中。只有最终响应中的数据从 RAM 内存中的原始位置（数据最初所在的位置）移动。即使每秒处理数百万个请求，这也使得大部分数据保持不变。缺点是数据库需要了解应用程序逻辑的编程语言。但是，如果您曾经尝试过每秒处理数百万个 HTTP 请求，每个请求都需要大量的数据库访问，那么好处是显而易见的。

* * *

# 一个更彻底的答案

这个问题很好。难怪你会觉得奇怪，因为仅仅几年前 CAP 才被证明（变成了一个定理）。当理论物理学家告诉他停止寻找永动机，因为它无法工作时，许多开发人员就像孩子一样失望。我们仍然*想要*横向扩展的一致数据库，不是吗？

## CAP 定理

CAP 定理给出了任何一条信息都不能具有一致性（C）、可用性（A）和分区容限（P）。它适用于信息单元（例如数据库）。当然，您可以拥有运行方式不同的独立信息。一件可以是AP，另一件可以是CA，第三件可以是CP。您只是不能拥有相同的信息作为 CAP。

在一致且可用的数据库中不可能出现“P”的问题导致横向扩展的数据库必须如何在节点之间进行信令。结论必须是，即使在一百年后，CAP 也认为单个一致的数据必须存在于使用硬线或光束互连的硬件上。

### CAP中P的问题

如果您将水平缩放应用于可用的一致数据库，则问题在于性能。良好的性能是首先进行水平缩放的原因，这是一件非常糟糕的事情。由于每个节点都需要在访问数据库时与其他节点进行通信以实现一致性，并且考虑到信号最终受到光速的限制，您会留下一个可悲但真实的事实，即数据库科学家（以及 CPU 科学家） ) 不仅仅是因为未能将横向扩展视为神奇的银弹而固执己见。它不会发生，因为它不可能发生（但是，您的数据库的一部分可以放在 AP 集中，所以请记住，我们在这里讨论的是一致的数据）。

### 永动机和 CAP

数据库社区的情况有点像永动机的状态，当时马和马车是上班的方式。在没有任何反对它的理论证据的情况下，专利局为不可能的永动机授予了数百项专利。今天，我们可能会对此一笑置之，但我们在数据库行业也有类似的情况，一致的横向扩展数据库。当你听到有人声称他们有一个横向扩展的 ACID 数据库时，要小心。直到麻省理工学院的网络崩溃数学家证明布鲁尔在 CAP 定理上的正确性才正式诞生，所以不幸的是，寻找不可能的事情还没有结束。你可以比较一下，如果你愿意，在现代理论物理学理应阻止它之后，落后者多年来一直试图发明永动机。旧习惯很难改掉（我向 Stack Overflow 上的任何人道歉，他们仍在自行绘制轴承和手臂无限移动的图纸——我并不是要冒犯他人）。

### CAP 和性能

然而，一切都没有丢失。并非所有信息都需要保持一致。并非所有部分都需要横向扩展。您只需接受布鲁斯定理并充分利用它。

对于 Facebook 等应用程序，一致性被丢弃了。这没关系，因为数据输入一次，然后由单个用户操作。我们仍然可以体验 Facebook 日常使用中的副作用，例如一段时间内突然出现和消失的东西。

但是，在大多数业务应用程序中，数据需要正确。您的簿记中所有帐户的总和必须为零。如果您售出 10 件商品中的 2 件，即使有多个用户从同一库存中购买，您的库存也必须等于 8。

横向扩展可用数据的问题是您必须在没有分区容差的情况下勉强凑合。这个花哨的词只是意味着您必须始终在云中的节点之间发出信号。而且，由于光传播一米需要几纳秒，如果不使您的横向扩展导致性能降低而不是提高性能，这将变得不可能。当然，这仅适用于一致的数据。英特尔、AMD、甲骨文等公司的工程师已经知道这一点的含义。很长一段时间。不是他们的科学家没有听说过横向扩展。只是他们已经开始接受爱因斯坦所描述的世界。

# 阴霾中的一些安慰

如果您进行数学计算，您会发现单台 PC 在其运行的每一秒内都有备用指令用于地球上的每个人（谷歌上的“现代 CPU”和“MIPS”）。如果你再做一些数学运算，比如用 Amazon.com 的总营业额（你可以在 wwww.nasdaq.com 上找到）除以一本书的平均价格，你会发现销售交易的总数可以计算在内单个现代 PC 的 RAM。很酷的是，2012 年物品、客户、订单、产品等的数量与 1950 年占据的空间相同。图像、视频和音频的大小增加了，但数字和文本信息并没有随着时间的推移而增加物品。当然交易数量会增加，但不会与计算机能力的增长处于同一阶段。所以合乎逻辑的解决方案是横向扩展只读和 AP 数据并“纵向扩展/纵向扩展”

### “缩小”而不是“扩大”

在 VM（如 Java VM 或 .NET CLR）中运行的数据库引擎和业务逻辑通常使用相当有效的机器代码。这意味着移动内存是一致数据库总吞吐量的巨大瓶颈。这通常被称为记忆墙（维基百科有一些有用的信息）。

诀窍是将代码传输到数据库映像，而不是将数据从数据库映像传输到代码（如果使用 MVC 或 MVVM 模式）。这意味着消费代码在与数据库映像相同的地址空间中执行，并且数据永远不会移动（并且磁盘只是保护事务和映像）。数据可以保留在原始数据库映像中，而不必复制到应用程序的内存中。不是将数据库视为 RAM 数据库，而是将数据库视为主内存。一切都保持不变。

只有属于最终用户响应的一部分的数据才会从数据库映像中移出。对于具有数亿同时用户的大规模应用程序，这通常相当于每秒只有几百万个请求，鉴于 HTTP 打包是在网关服务器上完成的，单台 PC 处理这些请求是没有问题的。幸运的是，这样的服务器可以很好地扩展，因为它们不需要共享数据。

事实证明，磁盘在顺序写入时速度很快，因此经过突袭的磁盘可以保持 TB 级或每分钟更改一次。

### Starcounter中的水平缩放

通常您不会缩放 Starcounter 节点。它缩小而不是缩小。这适用于几百万同时用户。要超过这个，您需要添加更多 Starcounter 节点。它们可用于对数据进行分区（但随后您会失去一致性，并且 Starcounter 不是为分区而设计的，因此它不如 Volt DB 等解决方案优雅）。所以更好的选择是使用额外的 Starcounter 节点作为网关服务器。这些服务器简单地将所有传入的 HTTP 请求一次累积一毫秒。这听起来像是很短的时间，但如果您决定需要扩展 Starcounter，那么累积数千个请求就足够了。然后，这批请求以每秒一千次的速度发送到 ZLATAN 节点（零延迟原子性节点）。每个这样的批次可以包含数千个请求。这样，一个 ZLATAN 节点可以服务数亿用户会话。虽然您可以拥有多个 ZLATAN 节点，但一次只有一个活动的 ZLATAN 节点。这就是 CAP 定理的兑现方式。要超越这一点，您需要考虑与 Facebook 和其他公司相同的权衡。

另一个重要的注意事项是 ZLATAN 节点不为应用程序提供数据。相反，应用程序控制器代码由 ZLATAN 节点运行。序列化/反序列化和向应用程序发送数据的成本远远大于处理控制器逻辑周期的成本。即代码被发送到数据库而不是相反（传统的方法是应用程序请求数据或发送数据）。

### 通过少做事使“共享一切”节点更快

使用数据库作为编程语言的“堆”而不是远程系统进行序列化和反序列化是 Starcounter 称之为 VMDBMS 的技巧。如果数据库在 RAM 中，则不应将数据从 RAM 中的一个位置移动到 RAM 中的另一个位置，大多数 RAM 数据库都是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:09:50.800

没有“技巧”。Starcounter 谈论的是速度，而 CAP/NoSQL 谈论的是可扩展性。功能+可扩展性与速度之间存在权衡。

如果您能证明其他地方存在瓶颈，有时可以忽略可扩展性。例如，一家新创业公司不应该担心他们的网站扩展到一百万用户，他们应该担心获得前一百名用户。（有人记得早期 Twitter 的宕机频率吗？）如果他们的交易率远高于您的网页点击率，Starcounter 会很有用。

另一方面，我不相信任何将所有“NoSQL”数据库混为一谈的人。各种 NoSQL 数据库的不同之处多于同类。它们具有完全不同的架构和属性。其中一些扩展到数千个节点，其中一些不会扩展到超过一个节点。有时增加可扩展性会减慢您的速度。有时删除功能会加快您的速度。

[http://strata.oreilly.com/2010/12/strata-gems-mysql-handlersocket.html](http://strata.oreilly.com/2010/12/strata-gems-mysql-handlersocket.html)

# wordpress - Wordpress 上传大文件问 题

> ID：12890370
> 
> 赞同：0
> 
> 时间：2012-10-15T06:30:20.150
> 
> 标签：wordpress, file, upload

我正在使用 CCF（自定义联系表格）插件，我需要在前端上传文件字段以及其他字段。我在插件中定义的最大上传文件大小为 2MB。

问题是，如果我尝试上传大文件（例如 15MB），那么表单不会显示任何错误，也不会上传文件。唯一发生的事情是相同的表单刚刚刷新，即使对于其他字段也没有显示任何错误。

这是预期的行为还是有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:32:11.833

查看插件的代码，在函数 processFileUpload($field) 的 custom-contact-forms-front.php 中，我看到：

```
if ($field->field_max_upload_size > 0 && $_FILES[$field->field_slug]['size'] > ($field->field_max_upload_size * 1000))
   $errors[] = basename($_FILES[$field->field_slug]['name']) . __(' is too large of a file. The maximum file size for that field is ', 'custom-contact-forms') . $field->field_max_upload_size . __(' KB.', 'custom-contact-forms'); 
```

这是非常神秘的，IMO，但看起来它应该在 $errors 数组中放置一条错误消息。在下面我看到

```
$upload_result = $this->processFileUpload($field, $post_time);
foreach ($upload_result as $err) {
$this->setFormError($field->field_slug, $err); 
```

所以看起来插件试图创建一条错误消息。必须深入一些层才能看到哪里出错了。

# ruby-on-rails - RVM 在多用户环境中的使用

> ID：12890371
> 
> 赞同：-1
> 
> 时间：2012-10-15T06:30:21.543
> 
> 标签：ruby-on-rails, rvm

我有多个用户在我的 Ubuntu 机器上使用用户 ID（比如 user1、user2 ...）在 Rails 应用程序上工作。目前我们正在为每个用户安装 RVM，并且正在安装 Rails 后 gemset 创建。问题是机器上的每个新用户都需要为每个帐户设置整个堆栈（RVM、Ruby、Rails）。

这是最好的策略，还是在系统级别安装 RVM（比如以 root 用户）并在其他用户之间共享它是否有意义。如果 RVM 以 root 身份安装，gemset 创建/库将在各自的主目录下可用。

管理在 Rails 上工作的多用户的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:50:52.733

我认为 RVM 文档说明了一切：[https ://rvm.io/rvm/install/#explained](https://rvm.io/rvm/install/#explained)

**安装说明**

*有三种不同的方式来安装和配置 RVM。*

单用户安装（推荐）

*   对于用户 $HOME 中的隔离安装

多用户安装

*   对于服务器管理员 - 对于系统上所有用户都可以使用的安装 -**请注意单用户取代多用户。**这也曾经被称为系统范围的安装。**在不了解 umask 工作原理的情况下使用这种类型的安装是一个很大的安全风险。**

混合模式安装

*   对于系统上所有用户都可以使用的安装 - 在用户的 $HOME 中使用隔离的 rubies/gemset。安装说明与多用户安装完全相同，不同之处在于用户环境。

# wordpress - htaccess 将域重定向到 wordpress 页面？

> ID：12890374
> 
> 赞同：0
> 
> 时间：2012-10-15T06:30:45.683
> 
> 标签：wordpress, apache, .htaccess, redirect

我有一个域名页面[http://www.domain.com](http://www.domain.com)或 domain.com

我想使用 htaccess 将[http://www.domain.com](http://www.domain.com)或 domain.com 重定向到 domain.wordpress.com

我目前有这个：

```
RewriteOptions inherit
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

RewriteCond %{HTTP_HOST} ^domain\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.domain\.com$
RewriteRule ^/?$ "http\:\/\/domain\.wordpress\.com\/" [R=301,L] 
```

它没有重定向，有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:42:25.327

```
RewriteEngine on

Options -Indexes

RewriteCond %{HTTP_HOST} ^domain\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.domain\.com$
RewriteRule ^/?$ "http\:\/\/domain\.wordpress\.com\/" [R=301,L] 
```

它对我有用..希望这会有所帮助

# lucene - org.apache.lucene.queryParser.ParseException

> ID：12890379
> 
> 赞同：3
> 
> 时间：2012-10-15T06:31:19.713
> 
> 标签：lucene, elasticsearch

我的项目中出现以下错误：

org.apache.lucene.queryParser.ParseException：无法解析“AMERICAN EXP PROPTY CASLTY INS AND”：在第 1 行第 34 列遇到“”。期待以下之一：...“+”...“-”... . "(" ... " *" ... ... ... ... "[" ... "{" ... ... ... "* " ...

```
at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:211)
at org.elasticsearch.index.query.xcontent.QueryStringQueryParser.parse(QueryStringQueryParser.java:196)
... 15 more 
```

请帮助解决如何解决...当我在任何字符串的末尾添加 AND 时，它会给我上述错误。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:35:10.427

当您使用 QueryString 查询或将您的查询指定为`q`参数时，elasticsearch 正在使用 Lucene 来解析您的查询。因此，它希望您的查询遵循[Lucene 查询语法](https://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/queryparsersyntax.html)，并在您的查询包含语法错误时返回错误（在您的情况下，在末尾悬空 AND）。如果您希望查询字符串被解释为文本而不被解析为查询，请考虑改用[文本查询](http://www.elasticsearch.org/guide/reference/query-dsl/text-query.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:48:16.773

那很好笑。Lucene 正在等待一个新术语，因为在 Lucene 中，您可以构建如下查询：“termA AND termB”或“+termA +termB”

您可以尝试将您的查询小写并查看它是否有效？

# ruby - 在循环中修改的数组会导致输出 ruby 出现错误

> ID：12890382
> 
> 赞同：1
> 
> 时间：2012-10-15T06:31:29.823
> 
> 标签：ruby

我有一个将字谜放入数组数组的代码。（包含字谜）但在某处我犯了一个错误，第一个值不作为数组输出，而只是作为字符串输出

我正在使用 << 运算符将一个数组推入另一个数组，代码并不复杂，但我找不到错误

```
def combine_anagrams(words)
    indexes = []
    anagrams = []

    words.each{|word| 
    if(word.is_a? String )
        first_word = word.downcase.chars.sort.join
        words.each{|second_word| 
            if(second_word.is_a? String)
                if(first_word == second_word.downcase.chars.sort.join)
                    indexes << words.index(second_word)
                end
            end
        } 

        indexes.each{|index| anagrams << words[index] }
        words.reject!.with_index {|el, idx| indexes.include?(idx)}

        words << anagrams # i replaced words with an array all_anagrams
        indexes = []
        anagrams = []
    end
    }

    return words
end

puts combine_anagrams([ 'cars','for', 'potatoes', 'racs', 'four','scar', 'creams', 'scream'] ).inspect 
```

输出

```
["for", "four", ["cars", "racs", "scar"], ["potatoes"], ["creams", "scream"]] 
```

如果我在输入中切换“cars”和“for”的顺序，我会得到

```
["cars", "racs", "scar", ["for"], ["potatoes"], ["four"], ["creams", "scream"]] 
```

这里发生了什么

对不起，我只是乞求学习 ruby​​ 的凌乱代码

当我将数组输出到屏幕上时，我创建了一个附加变量`all_anagrams = []`来存储所有字谜的`all_anagrams` 数组我在循环中并且这些值被跳过了吗？但是我不知道如何处理这个问题。

all_anagrams 的输出是

```
[["cars", "racs", "scar"], ["potatoes"], ["creams", "scream"]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:01:29.067

您需要的是在空白之前引入一个新数组来存储字谜，让我们称之为`valid_anagrams`。现在你正在推动它`words`。正如 Fredrick 指出的那样，您在迭代单词时正在修改单词。它不好，为了避免你保留一个被调用的单词的克隆`words_clone`并拒绝它的项目。以下代码应该可以工作 -

```
def combine_anagrams(words)
    indexes, anagrams, valid_anagrams = [], [], []
    words_clone = words.clone # creating a clone of words

    words.each do |word|
            if(word.is_a? String )
                 first_word = word.downcase.chars.sort.join
                words.each do |second_word|
                        if(second_word.is_a? String)
                            if(first_word == second_word.downcase.chars.sort.join)
                                    indexes << words.index(second_word)
                            end
                        end
                end

                indexes.each{|index| anagrams << words[index] }

                # reject from words_cloned instead of words
                words_clone.reject!.with_index {|el, idx| indexes.include?(idx)}

                # insert anagrams into valid_anagrams array. In your code you inserted it in words array
                valid_anagrams << anagrams unless valid_anagrams.include?(anagrams)
                indexes, anagrams = [], []
            end
    end

    # return valid_anagrams array
    return valid_anagrams
end 
```

# asp.net-mvc - 在我的应用程序中集成 1 路呼叫

> ID：12890384
> 
> 赞同：0
> 
> 时间：2012-10-15T06:31:39.043
> 
> 标签：asp.net-mvc, outbound

我正在尝试在我的应用程序中实现一个呼叫系统，我可以在其中向用户“呼叫我”提供一个按钮，并且在按下该按钮时，用户会收到一条记录的消息，该消息为用户提供一些 2 位代码，当用户将该 2 位代码输入到我的应用程序中，我的应用程序对他进行身份验证并注册他，但我不确定我应该寻找什么来实现这种类型的功能。请注意，我正在开发 ASP.NET MVC 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:32:38.580

> 但我不确定我应该寻找什么来实现这种功能

您应该考虑购买 SMS 网关 API。购买此类服务后，您将能够使用提供的 API 从您的应用程序向手机发送 SMS 消息。

# actionscript-3 - AS3：转换为向量

> ID：12890387
> 
> 赞同：0
> 
> 时间：2012-10-15T06:31:46.827
> 
> 标签：actionscript-3, vector

我正在尝试从未知类创建一个向量，但它失败了，关于如何做到这一点的任何想法？

这是我尝试过的：

```
var vector:Vector = new Vector(); // throw exception

function base():void{
var vector:Vector.<String> = createVector(String);// throw classCastException
}

function createVector(cls:Class):*{
     var array:Array = new Array();
     for(var i:int = 0; i < 10; i++){
         var element:cls = new cls();
          array.push(element);
     }

     return Vector(array);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:35:17.930

[Vector](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html)需要一个参数类型，因此您无法按照自己的意愿执行此操作，但使用[getQualifiedClassName](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#getQualifiedClassName%28%29)获取类信息，您可以构造一个字符串，使您能够调用 Vector。使用[getDefinitionByName 的](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#getDefinitionByName%28%29)构造函数：

前任。

```
// get class parameter name
var className:String=getQualifiedClassName(String);

// get the Vector class object for the given class
var o:Object=getDefinitionByName("__AS3__.vec::Vector<"+className+">");

// call the constructor
var v:*=o.prototype.constructor(["hello", "world"]); 
```

所以你的函数可以写成：

```
 public function createVector(cls:Class):*{
        var cn:String = getQualifiedClassName(cls);
        var o:Object = getDefinitionByName("__AS3__.vec::Vector.<"+cn+">");
        var array:Array = [];
        for(var i:int = 0; i < 10; i++){
            var element:* = new cls();
            array.push(element);
        }
        return o.prototype.constructor(array);
    } 
```

Wonderfl 的实时示例： [http ://wonderfl.net/c/pkjs](http://wonderfl.net/c/pkjs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T11:34:59.980

根据@Patrick 的回答，我找到了一个可行的解决方案。

看看这个：

```
function createVector(cls:Class):*{
        var className:String = getQualifiedClassName(cls);
        var vectorClass:Class = getDefinitionByName("__AS3__.vec::Vector.<"+className+">") as Class;

        var vector:* = new vectorClass(10);        
        for(var i:int = 0; i < 10; i++){
            var element:MyClass = new cls(); // may be Object or Object extends cls
            vector[i] = element;
        }

        return vector;
    } 
```

# php - 如何在php中迭代arraylist

> ID：12890389
> 
> 赞同：0
> 
> 时间：2012-10-15T06:31:53.243
> 
> 标签：php, html, mysql, arraylist, pdo

**我的代码做了什么：** 我从 php 方法返回数组列表 --> 方法名称：- getSubjectInfo()。
在我的（Index.php）页面中，我在 $results 变量中获取了这个数组列表值。*在这里，我被困在如何迭代 index.php 页面中的 arraylist 值？*

**我的问题：**如何在我的 index.php 页面中迭代数组列表（$results）？请看我下面提到的代码

我`$results = $sub_info->fetchAll(PDO::FETCH_OBJ);` 在我的方法中使用了生成列表。

## 索引.php

```
 <?php
            include_once '../../classes/conn/connection.php';
            include_once '../../classes/setups/Subdetails_setup.php'; 
            $con = new connection(); 
            $info = new Subdetails_setup($con); 
            $results = $info->getSubjectInfo();     
            echo $results; //this is returning a list of objects. My problem is how can i iterate these values
        ?> 
```

我试过这样 `echo (each($results));`，但这是在一行中打印我的值，如下所示：-`Subject Name 1 FIction1Non FIction2`

**＆我的 Subdetails_setup.php 类具有方法 getSubjectInfo()** ：-

```
 function getSubjectInfo()
 { 
    $sub_info = $this->con->prepare("SELECT * FROM subjectdetails");
    $sub_info->execute();

    $results = $sub_info->fetchAll(PDO::FETCH_OBJ);

    foreach ($results as $key)
        { 
           echo $key->subject_name; 
            echo $key->subject_id; 
        }
    // Return the result array
        return $results;
   } 
```

请帮助我。-阿舒托什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:37:24.877

**您的Subdetails_setup.php**中的此代码需要删除，并放在**index.php**中。您不需要详细信息，只需返回结果即可。

```
 foreach ($results as $key)
    { 
       echo $key->subject_name; 
       echo $key->subject_id; 
    } 
```

如果您想检查它是否全部工作，请更改您的**index.php**并添加以下行：

```
 $results = $info->getSubjectInfo();
    var_dump($results); 
```

现在**var_dump()**可以工作了，用前面的代码替换该行，修改为显示一个表：

```
 foreach ($results as $key)
    { 
       echo "<tr>";
       echo "<td>".$key->subject_name."</td>"; 
       echo "<td>"$key->subject_id."</td>"; 
       echo "</tr>";
    } 
```

# javascript - 如何从 XML 文件中获取另一个标签内的子标签计数并使用 JavaScript 显示其元素

> ID：12890390
> 
> 赞同：1
> 
> 时间：2012-10-15T06:31:55.097
> 
> 标签：javascript, cordova, xml-parsing

如何从 XML 文件中获取另一个标签内的子标签计数并使用 JavaScript 显示其元素：这是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
    <pdfDetails>
        <Menu menuTitle="AllTools">
            <pdf>
                <title>Integrated Architecture</title>
                <description>details</description>
                <fileName>tools_selection_wizard.pdf</fileName>
                <imageName>icon_Image.png</imageName>
            </pdf>
            <pdf>
                <title>Integrated Architecture Builder</title>
                <description>details</description>
                <fileName>integrated_architecture_builder.pdf</fileName>
                <imageName>pdf_icon_Image.png</imageName>
            </pdf>
            <pdf>
                <title>ProposalWorks</title>
                <description>details</description>
                <fileName>proposal_works.pdf</fileName>
                <imageName>pdf_icon_Image.png</imageName>
            </pdf>
            <pdf>
                <title>Cross</title>
                <description>details</description>
                <fileName>works.pdf</fileName>
                <imageName>pdf_icon_Image.png</imageName>
            </pdf>
            <pdf>
                <title>Integrated Architecture Videos</title>
                <description>details</description>
                <fileName>integrated_architecture_videos.pdf</fileName>
                <imageName>pdf_icon_Image.png</imageName>
            </pdf>
        </Menu>
        <Menu menuTitle="Discover">
            <pdf>
                <title>Integrated</title>
                <description>details</description>
                <fileName>integrated_architecture.pdf</fileName>
                 <imageName>pdf_icon_Image.png</imageName>
            </pdf>
            <pdf>
                <title>Integrated Architecture Videos</title>
                <description>details</description>
                <fileName>integrated_architecture_videos.pdf</fileName>
                <imageName>pdf_icon_Image.png</imageName>
            </pdf>
            <pdf>
                <title>Podcasts</title>
                <description>details</description>
                <fileName>pod_casts.pdf</fileName>
                <imageName>pdf_icon_Image.png</imageName>
            </pdf>
        </Menu>
    </pdfDetails> 
```

在第一个菜单标签中，pdf 标签是 5，第二个是 3。如何获取计数并以表格视图格式显示元素。这是我到目前为止所做的，但它没有获取数据

```
<script type="text/javascript">
    function parseXML(){
        xmlDoc=loadXMLDoc("Details.xml");

        mnu=xmlDoc.getElementsByTagName("Menu");
        var mnucount=mnu.length

        pdf=xmlDoc.getElementsByTagName("pdf");
        var pdfcount=pdf.length

        if(mnucount>=1){
            alert(mnucount);
            for(i=0;i<mnucount;i++){
                //xmlDoc.getElementsByTagName("title")[j].childNodes[0];
                '<br>'
                if(pdfcount>=1){
                    alert(pdfcount);
                    var str = '<table border="1">';
                    str+='<tr><td>title</td><td>description</td><td>fileName</td><td>imageName</td></tr>';          
                    for(j=0;j<pdfcount;j++){                
                        p=xmlDoc.getElementsByTagName("title")[j].childNodes[0];
                        txttitle=p.nodeValue;               
                        q=xmlDoc.getElementsByTagName("description")[j].childNodes[0];
                        txtdescription=q.nodeValue;             
                        r=xmlDoc.getElementsByTagName("fileName")[j].childNodes[0];
                        txtfileName=r.nodeValue;            
                        s=xmlDoc.getElementsByTagName("imageName")[j].childNodes[0];
                        txtimageName=s.nodeValue;   
                        str=str+'<tr><td>'+txttitle+'</td><td>'+txtdescription+'</td><td>'+txtfileName+'</td><td>'+txtimageName+'</td></tr>';
                    }
                    str+='</table>';
                    document.getElementById('data').innerHTML = str;
                }
            }
        }
    }

    function loadXMLDoc(dname){
        if (window.XMLHttpRequest) 
        {
            xhttp=new XMLHttpRequest();
        }
        else                        // Internet Explorer
        {
            xhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xhttp.open("GET",dname,false);
        xhttp.send();
        return xhttp.responseXML;
    }
</script> 
```

这没有获取任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:50:39.650

我已经修改了您的`parseXML()`功能，如下所示。使用代码并检查结果。

```
function parseXML(){
    xmlDoc=loadXMLDoc("Details.xml");

    mnu=xmlDoc.getElementsByTagName("Menu");
    var mnucount=mnu.length;

    if(mnucount>=1){
        alert(mnucount);
        for(i=0;i<mnucount;i++){

            pdf=xmlDoc[i].getElementsByTagName("pdf");
            var pdfcount=pdf.length;

            if(pdfcount>=1){
                alert(pdfcount);
                var str = '<table border="1">';
                str+='<tr><td>title</td><td>description</td><td>fileName</td><td>imageName</td></tr>';          
                for(j=0;j<pdfcount;j++){                
                    p=pdf[j].getElementsByTagName("title")[0].childNodes[0];
                    txttitle=p.nodeValue;               
                    q=pdf[j].getElementsByTagName("description")[0].childNodes[0];
                    txtdescription=q.nodeValue;             
                    r=pdf[j].getElementsByTagName("fileName")[0].childNodes[0];
                    txtfileName=r.nodeValue;            
                    s=pdf[j].getElementsByTagName("imageName")[0].childNodes[0];
                    txtimageName=s.nodeValue;   
                    str=str+'<tr><td>'+txttitle+'</td><td>'+txtdescription+'</td><td>'+txtfileName+'</td><td>'+txtimageName+'</td></tr>';
                }
                str+='</table>';
                document.getElementById('data').innerHTML = str;
            }
        }
    }
} 
```

# networking - Broken Pipe 和 Connection reset by peer 有什么区别？

> ID：12890393
> 
> 赞同：5
> 
> 时间：2012-10-15T06:32:13.037
> 
> 标签：networking, broken-pipe, connection-reset

在我的日常工作中，我需要通过 SSH 连接到服务器，我通常会遇到两种不同的错误，第一个是“Broken Pipe”，第二个是“Connection reset by peer”。

我想知道这两组错误之间有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T06:40:22.427

真的没有。两者都表示连接已断开。'Broken pipe' 是 Unix 的事情，据我所知，它不会在 Windows 上发生，而且可能只发生在写入时，而在读取和写入时都可能发生“连接重置”。

# tridion - Tridion 2011 核心服务：如何删除以前版本的组件？

> ID：12890394
> 
> 赞同：8
> 
> 时间：2012-10-15T06:32:15.350
> 
> 标签：tridion, tridion-2011

我想使用核心服务删除组件的以前版本，只保留最新版本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T09:09:32.707

文档说明了 Delete 方法：“从系统中永久删除项目或项目的特定版本”

因此，您可以通过传入版本的 uri 来删除版本（例如 tcm:2-123-64-v4）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-15T07:17:36.517

Tridion 默认附带一个名为**“Purge Tool”**的工具，您可以将其用于此目的。

*   [您可以在在线文档](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=purge%2520tools&sid=lcSearch.runSearch1350285477583&eventType=lcContent.loadDocconcept_1837C7746D9E496099784B3C4C81F310&query=&scope=&filename=PurgeTool.xml&docid=concept_1837C7746D9E496099784B3C4C81F310&inner_id=&tid=&addHistory=true&resource=)中找到更多信息

有一个**可视化界面**，而且如果您有业务需求以编程方式执行此操作，或者作为计划任务，它还提供了一个[命令行界面](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=purge%2520tools&sid=lcSearch.runSearch1350285477583&eventType=lcContent.loadDocidheading-259253576&query=&scope=&filename=AG_PurgeTool_4_concept.xml&docid=idheading-259253576&inner_id=&tid=&addHistory=true&resource=)。

# android - 计时器中的异常 - java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序 - Android

> ID：12890400
> 
> 赞同：1
> 
> 时间：2012-10-15T06:32:43.537
> 
> 标签：android, multithreading, service, timer, db4o

我使用服务每 3 小时更新一次 db4o 文件：

```
 @Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    super.onCreate();
    Log.d("Service", "Service started");
    pref = new MyPreferences(getApplicationContext());
    addNotificacion();//update notifications

    timer.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
            Looper.prepare();
                            Log.d(TAG, "updating...");
            updateInService();
            addNotificacion();
            Log.d(TAG, "End of update");
        }
    }, 40000, 60000);

} 
```

我对 addNotificacion() 方法没有问题，但 updateInService 抛出了主题的异常。在这种方法中，我访问 db4o，使用 http 客户端，更新 AlarmManager 的警报......但我不修改 UI。我在 OnBootReceiver 中启动服务。

我该如何解决我的问题？

提前致谢。

编辑后：

添加后`Looper.prepare();`，系统在第一次迭代中完成，但在第二次，我在实例 Looper.prepare(); 中有一个异常；：java.lang.RuntimeException：每个线程只能创建一个 Looper

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T06:47:46.597

您正在从工作线程更新 UI。您需要在主线程中调用。你可以使用**runOnUiThread**

```
activity.runOnUiThread(new Runnable() {
  public void run() {
    //Update UI code
        updateInService();
        addNotificacion();

  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:20:47.263

您可能希望在方法实现`Looper.loop()`结束时调用。`run()`

见[http://developer.android.com/reference/android/os/Looper.html](http://developer.android.com/reference/android/os/Looper.html)

# ruby-on-rails - 在rails应用程序中使用google chart api-使用arrayToDataTable时如何在系列中指定一个空（缺失）值

> ID：12890401
> 
> 赞同：0
> 
> 时间：2012-10-15T06:32:47.933
> 
> 标签：ruby-on-rails, google-visualization

我的应用程序使用 google chart api 绘制了 4 个数据系列。控制器加载一个数组，视图有谷歌图表 javascript 来绘制购物车。

如果数组已完全填充，它可以工作，但当然有时数据系列缺少一些点，我看不到如何在系列中指定“缺失”数据点，因此 arrayToDataTable() javascript 函数将知道提供“null”该点的数据。

在我的控制器中，我加载了一个包含数据的数组（完全填充的数组示例）：

```
@typed_array = [["Month", "Apples", "Bananas", "Cherries", "Oranges"], 
  ["Jan", 5.0, 4.0, 3.0, 7.0], 
  ["Feb", 6.0, 3, 3.0, 7.0], 
  ["Mar", 7.0, 5.0, 4.0, 6.0], 
  ["Apr", 8.0, 5.0, 4.0, 5.0], 
  ["May", 9.0, 6.0, 5.0, 4.0]] 
```

该视图包含：

```
%script{:src => "https://www.google.com/jsapi", :type => "text/javascript"}
:javascript
  google.load('visualization', '1.0', {'packages':['corechart']});

  google.setOnLoadCallback(drawChart);

  function drawChart() {

    // Create the data table.
    var data = new google.visualization.arrayToDataTable(#{@typed_array});

    // Set chart options
    var options = {'title':'Report 1: ',
         backgroundColor: { fill: "#fee", stroke: "#246", strokeWidth: 2 },
         'width':800,
                   'height':300,
                   'interpolateNulls':true};
    var chart = new google.visualization.LineChart(document.getElementById('chart_div_line1'));
    chart.draw(data, options);
  }

#chart_container
  %p &nbsp;
  #chart_div_line1{:style=>"padding:20px;"}
  %p &nbsp; 
```

对于一个完全填充的数组，它工作正常。

有谁知道在 ruby​​ 数组中放入什么所以 arrayToDataTable 知道它是一个空（缺失）值？

```
 ["Feb", 6.0, ????, 3.0, 7.0], 
```

我已经尝试`nil` `'nil'` `'null'` `'_'` `'__'`了所有打破图表的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:00:53.837

答案原来是微不足道的简单...

a) 在红宝石方面，使用 nil

b) 在 javascript 中，当传入数组时，使用 @typed_array.to_json 而不是 @typed_array

在我的控制器中，我加载了一个包含数据的数组（完全填充的数组示例）：

```
@typed_array = [["Month", "Apples", "Bananas", "Cherries", "Oranges"], 
  ["Jan", 5.0, 4.0, 3.0, 7.0], 
  ["Feb", nil, 3, 3.0, 7.0], 
  ["Mar", nil, 5.0, 4.0, 6.0], 
  ["Apr", 8.0, nil, 4.0, 5.0], 
  ["May", 9.0, 6.0, nil, 4.0]] 
```

该视图包含：

```
%script{:src => "https://www.google.com/jsapi", :type => "text/javascript"}
:javascript
  google.load('visualization', '1.0', {'packages':['corechart']});

  google.setOnLoadCallback(drawChart);

  function drawChart() {

    // Create the data table.
    var data = new google.visualization.arrayToDataTable(#{@typed_array.to_json});

    // Set chart options
    var options = {'title':'Report 1: ',
         backgroundColor: { fill: "#fee", stroke: "#246", strokeWidth: 2 },
         'width':800,
                   'height':300,
                   'interpolateNulls':true};
    var chart = new google.visualization.LineChart(document.getElementById('chart_div_line1'));
    chart.draw(data, options);
  }

#chart_container
  %p &nbsp;
  #chart_div_line1{:style=>"padding:20px;"}
  %p &nbsp; 
```

# android - Android 上的慢速 HttpPost 请求

> ID：12890404
> 
> 赞同：4
> 
> 时间：2012-10-15T06:33:00.937
> 
> 标签：android, json, http-post

我正在制作一个应用程序，其中涉及以 JSON 格式从我的服务器下载数据。我正在使用 HTTP Post 来实现相同的目的。我正在下载的 JSON 文件大小约为 2-3 Kb。我在不同的线程上执行所有这些操作。

但是，我的应用程序的性能非常难以预测。我尝试调试它，发现有时我的应用程序卡在我创建 HttpPost 对象的行，有时执行该行几乎不需要 1-2 秒。可能是什么问题？可能是因为我的应用程序占用了大量内存吗？还有一件事，我的应用程序在我强制关闭后第二次运行良好。谢谢 ！

```
public String getJSONString(String url) {
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) 
        {sb.append(line + "n");}
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }
    return json;

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:59:25.217

你可以试试这个代码..

```
 // Create a new HttpClient and Post Header
        httpclient = new DefaultHttpClient();
        httppost = new HttpPost(your URL) 

        // Sending details in Json Format
        JSONObject holder = new JSONObject();
        try { 
                     ------------
                   --------------

                } catch (JSONException e1) {
            e1.printStackTrace();
        }

    StringEntity se = new StringEntity(holder.toString());
    se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,"application/json"));
    httppost.setEntity(se);
    response = httpclient.execute(httppost);

            // Sends data to server

        StringEntity se = new StringEntity(holder.toString());

        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
                "application/json"));

        httppost.setEntity(se);

        response = httpclient.execute(httppost);

        resp = response.toString();

        String responseServer = EntityUtils.toString(response.getEntity()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:37:38.460

看到这个帖子，遇到和你一样的问题

[使用 HttpClient 的 HTTP Post 请求需要 2 秒，为什么？](https://stackoverflow.com/questions/3046424/http-post-requests-using-httpclient-take-2-seconds-why)

你能确认它是否有效吗？

```
HttpParams params = new BasicHttpParams();
params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
HttpClient httpclient = new DefaultHttpClient(params); 
```

# c - 具有多个指针的二维链表 C

> ID：12890405
> 
> 赞同：0
> 
> 时间：2012-10-15T06:33:15.610
> 
> 标签：c, list, pointers, 2d

我这里有两个结构。主链表是单词。单词列表的每个节点都有意义

```
typedef struct node{
  char word[20];
  struct node2 *meaning;
  struct node *next;
}word;

typedef struct node2{
  char meaning[100];
  struct node2 *next;
}means; 
```

我现在的问题是我不能添加多个含义。我可以只添加 1 个含义，每当我尝试添加时，它会覆盖以前的含义。我该怎么做？这就是我添加意义的方式

```
word *tmp2=(*head);
means *tmp3;
tmp3=(means *)malloc(sizeof(means));
if(tmp2==NULL){
  printf("\n**List still empty, add a word**\n");
  return;
}
do{
  if(strcmp(tmp2->word,ins)==0){
    tmp2->meaning=tmp3;
    strcpy(tmp3->meaning,mea);
    tmp3->next=NULL;
    printf("\n**You have successfully added a meaning**\n");
    return;
  }
  tmp2=tmp2->next;
}while(tmp2!=NULL);
printf("\n**Word is not on the list, cannot add meaning**\n");
return; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:39:24.497

当你这样做

```
tmp2->meaning=tmp3;
strcpy(tmp3->meaning,mea);
tmp3->next=NULL; 
```

您覆盖了结构的 word 元素中的含义，并将其 next 设置为 NULL，因此您永远失去了之前的 tmp2->meaning。

您可以轻松地将其添加到前面的含义之上：

```
tmp3->next = tmp2->meaning;
strcpy(tmp3->meaning, mea);
tmp2->meaning = tmp3; 
```

如果要显示含义：

```
void display_meanings_of(word *w)
{
  means *m;

  m = w->meaning;
  if (m)
    printf("Meanings of the word %s:\n", w->word);
  else
    printf("The word %s has no meaning.\n", w->word);
  while (m)
  {
    printf(" - %s\n", m->meaning);
    m = m->next;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:39:55.707

这是你的问题：

```
tmp2->meaning=tmp3;
strcpy(tmp3->meaning,mea);
tmp3->next=NULL; 
```

第一行只是覆盖现有的指针，然后将`next`指针设置`NULL`为最后一行。

相反，您需要将新含义*链接*到列表中。这是通过在创建指针时设置`tmp2->meaning`为来完成的，并使用类似的东西`NULL``word`

```
tmp3->next = tmp2->meaning;
tmp2->meaning = tmp3;

strcpy(tmp3->meaning, mea); 
```

现在`tmp3`将始终放在列表的头部，并`tmp3->next`指向前一个头部，或者`NULL`如果没有前一个头部。

**编辑：**查看含义的功能：

```
void show_meanings(word *w)
{
    int i;
    means *m;
    for (m = w->meaning, i = 1; m != NULL; m = m->next, i++)
        printf("Meaning %d: %s\n", i, m->meaning);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:03:50.630

你写的这个函数的参数是什么？什么是（*头）？什么是“ins”？什么是“米”？

我认为在 malloc 之后检查并返回而不释放内存不是一个好主意。如果你一直在一个空列表中添加一个含义，堆最终会耗尽内存。

```
word *tmp2=(*head);
means *tmp3;
tmp3=(means *)malloc(sizeof(means));
if(tmp2==NULL){
  printf("\n**List still empty, add a word**\n");
  return;
} 
```

建议：

```
word *tmp2=(*head);
means *tmp3;
if(tmp2==NULL){
  printf("\n**List still empty, add a word**\n");
  return;
}
// if tmp2 is not null then we malloc
tmp3=(means *)malloc(sizeof(means)); 
```

# c - 调用 va_arg 的次数少于传递的参数数量

> ID：12890406
> 
> 赞同：1
> 
> 时间：2012-10-15T06:33:31.413
> 
> 标签：c, undefined-behavior, variadic-functions

如果我调用`va_arg`的次数少于可变参数函数中传递的参数数量，这是未定义的行为吗？

例如：

```
#include <stdarg.h>
void foo(unsigned n, ...) {
    va_list ap;
    int bar = 0;

    va_start(ap, n);
    if (n) bar = va_arg(ap,int);
    // Do something with bar
}

int main() {
    foo(2, 3, 4);
    return 0;
} 
```

该程序会导致未定义的行为吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T06:35:45.113

您的程序*确实*会导致未定义的行为，但不是因为您使用`va_arg`. 这只是忽略了额外的参数，因此包含它似乎是浪费打字。

导致未定义行为的原因是您没有包含`va_end`在该函数中。

从规范（**7.15.1.1`va_arg`宏**）：

> **`va_arg`**宏的每次调用都会修改**`ap`**，以便依次返回连续参数的值。...如果没有实际的下一个参数...行为未定义...

并从**7.15.1.3`va_end`宏**：

> ...如果在**`va_end`**返回之前未调用宏，则行为未定义。

没有提到必须调用`va_arg`一定次数。如您所见`va_end`，尽管如此，这很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:36:47.200

`va_arg`被定义为按照传递的顺序返回参数。如果您调用它的次数少于参数，您将简单地忽略任何额外的参数。

# iphone - iPhone 4、iPhone 5 和 iPad 在用户界面方面的区别

> ID：12890408
> 
> 赞同：1
> 
> 时间：2012-10-15T06:33:34.737
> 
> 标签：iphone, ios, ipad

> **可能重复：**
> [如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

我们可以区分 iPad 和 iPhone 使用

```
UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone/UIUserInterfaceIdiomPad 
```

但是如何根据用户来区分 iPhone 4 和 iPhone 5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T06:37:12.147

引用[这篇文章](https://stackoverflow.com/a/12447113/716216)：

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

然后只需检查：

```
if( IS_IPHONE_5 )
{}
else
{} 
```

请注意，如果您不想，则不必将其定义为宏。简化版：

```
if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone) {
    if ([[UIScreen mainScreen] bounds].size.height == 568) {
        //5
    }else{
        //not 5
    }
}else{
    //iPad
} 
```

是的，这适用于景观。即使设备的方向发生了变化，设备的高度也保持不变。获取 UIScreen 的高度与获取视图的高度不同。

# php - 使用 PDO 从 mysql 数据库中检索数据时未找到数据库

> ID：12890409
> 
> 赞同：1
> 
> 时间：2012-10-15T06:33:36.840
> 
> 标签：php, mysql, pdo

我正在尝试使用 PDO 从 mysql 数据库中检索数据，但“未找到数据库”输出正在执行

这是我的代码

```
<form id="form" action="sum1.php" method="post">
<td><p align="center"> IDNO : <input type="text" name="id" id="id" maxlength="10"></p></td>
 <input type="submit" id="submit" class='btnExample' value="Click here to get your Result">
 </form> 
<?PHP 
$dbhost     = "localhost";
$dbname     = "demo";
$dbuser     = "admin";
$dbpass     = "123456";
$db = new PDO("mysql:host=$dbhost;dbname=$dbname", "$dbuser", "$dbpass");
if ($db_found) {
$id = $_POST['id'];

$add = $db->prepare("SELECT htno, SUM(tm) AS tech FROM hmm WHERE htno > :id");
$add -> execute(array('id'=>$id));
echo " <center><table id='mytable' cellspacing='0'  border=3 align=center> 
<tr><TH scope='col'>Total Marks</TH> </tr><center>"; 
while ($row1 = $add->fetch(PDO::FETCH_ASSOC))
{
 echo "<tr>"; 
 echo "<td align=center>" . $row1['tech4']. "</td>";
 echo "</tr>";
  }
  }
else {
print "Database NOT Found ";
}
$db = null;
?> 
```

我找不到错误

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:37:59.207

在您的代码中，您正在使用以下语句创建连接对象：

```
$db = new PDO("mysql:host=$dbhost;dbname=$dbname", "$dbuser", "$dbpass"); 
```

但是，为了检查它，你有：

```
if ($db_found) { 
```

相反，你必须在`$db`那里使用。像这样：

```
if ($db) { 
```

# 编辑

此外，您的执行函数应如下所示：

```
$add->execute(array(':id'=>$id)); 
```

注意`:id`代替`id`。

# npapi - NPAPI 属性获取

> ID：12890410
> 
> 赞同：2
> 
> 时间：2012-10-15T06:33:42.417
> 
> 标签：npapi

我正在尝试从我的 NPAPI 插件中获取 javascript 对象的属性，但是在使用 NPN_HasProperty()、NPN_HasMethod() 和 NPN_Enumerate() 以及它们返回的内容以及不返回的内容时遇到了一些问题。

例如，如果我使用 x=new Array; 创建一个数组；Javascript x.hasOwnProperty('length') 返回 true，并且 NPN_HasProperty() for 'length' 返回 true，但 NPN_Enumerate 没有像我预期的那样列出此属性。

在一个相关问题中，我想检测一个对象是否是一个函数。关于如何在 NPAPI 插件中执行此操作的任何建议？我正在尝试调用 NPN_HasMethod('call') 但这会返回 false （因为在原型上定义了 'call'？）插件有什么方法可以遵循继承，或执行相当于“x instanceof Function”的方法。 . ?

任何关于如何枚举属性的进一步信息，特别是如何遵循继承图，都非常受欢迎，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:51:02.643

NPN_Enumerate 是一件有趣的事情；它是与 NPN_Construct 同时引入的，至少在许多浏览器上它们不适用于原生 javascript 对象。提供它们主要是为了让您可以枚举或构造 NPObject。

我已经在您实际提出该特定问题的线程上回答了您的其他问题；最好一次只回答一个问题，以避免混淆。

如果您需要这样做，我会建议您使用 NPN_Evaluate 将 javascript 函数注入页面，该函数将枚举属性并返回数组或逗号分隔的字符串（这会更有效，因为您必须迭代数组通过进行 NPN_GetProperty 调用）。

# android - Android，如何清除大多数手机可以从主页按钮获取的最近任务列表？反射是一种可能的方式吗？

> ID：12890415
> 
> 赞同：9
> 
> 时间：2012-10-15T06:34:05.990
> 
> 标签：android, reflection, launcher, tasklist

我正在写一个启动器，它需要从系统中清除最近的应用程序/任务列表，而不是“没有在最近的任务列表中显示我的应用程序”，但我现在不知道。我在stackoverflow中搜索过，只有[这个问题](https://stackoverflow.com/questions/6723132/android-clear-the-recent-app-list-shown-after-long-home-press)匹配，但答案没有任何帮助。其他人也问过同样的问题，他提到了来自 Android 4.0 的 RemoveTask。是的，我已经检查了 Android 2.3.7 和 Android 4.0 的源代码，大致估计，如果我可以删除 ActivityMangerService.Java 中定义的 mRecentTasks 列表，我想我几乎可以到达终点：

```
final ArrayList<TaskRecord> mRecentTasks = new ArrayList<TaskRecord>(); 
```

另一个可能有用的定义：

```
static ActivityManagerService mSelf;
public static ActivityManagerService self() {
    return mSelf;
} 
```

因为我不熟悉 Java&refelction，所以我需要有关清除此列表的方式的帮助，以下是我的代码：

```
 public static <T> void clearRecentTaskList(Launcher launcher){
    ActivityManager am = (ActivityManager) launcher.getSystemService(Context.ACTIVITY_SERVICE);
    Object systemRecentTask = new ArrayList<T>();

    Object receiver = null;
    Field recentTaskList = null;
    Class<?> service = null;
    Field self = null;        

    try {
        service = Class.forName("com.android.server.am.ActivityManagerService");
        Log.d(LOG_TAG, "clearRecentTaskList, service gotton"+service.getName());
    } catch (ClassNotFoundException e2) {
        Log.d(LOG_TAG, "clearRecentTaskList, class service not found");
    }

    try {
        self = service.getDeclaredField("mSelf");
    } catch (SecurityException e2) {
        Log.d(LOG_TAG, "clearRecentTaskList, SecurityException during get mSelf");

    } catch (NoSuchFieldException e2) {
        Log.d(LOG_TAG, "clearRecentTaskList, NoSuchFieldException during get mSelf");
    }
    Log.d(LOG_TAG, "clearRecentTaskList, self  gotton " + self.toGenericString());

    try {
        self.setAccessible(true);
        receiver = self.get(null);
    } catch (IllegalArgumentException e2) {
        Log.d(LOG_TAG, "clearRecentTaskList, IllegalArgumentException during use self to get the receiver");
    } catch (IllegalAccessException e2) {
        Log.d(LOG_TAG, "clearRecentTaskList, IllegalAccessException during use self to get the receiver");
    }

    if ( receiver != null){
        Log.d(LOG_TAG, "clearRecentTaskList, receiver is : "+receiver.toString());
    } else {
        Log.d(LOG_TAG, "clearRecentTaskList, receiver is NULL");
    }

    try {
        recentTaskList = service.getDeclaredField("mRecentTasks");
        recentTaskList.setAccessible(true);
        Log.d(LOG_TAG, "clearRecentTaskList, recentTaskList gotton"+recentTaskList.toGenericString());

        try {
            systemRecentTask = recentTaskList.get(receiver);
        } catch (IllegalArgumentException e1) {
            Log.d(LOG_TAG, "IllegalArgumentException during try to clearRecentTask");
        } catch (IllegalAccessException e1) {
            Log.d(LOG_TAG, "IllegalAccessException during try to clearRecentTask");
        }

        Log.d(LOG_TAG, "Try to print the size of recent task: "+((ArrayList<T>) systemRecentTask).size());

    } catch (SecurityException e) {
        Log.d(LOG_TAG, "SecurityException during try to clearRecentTask");
    } catch (NoSuchFieldException e) {
        Log.d(LOG_TAG, "NoSuchFieldException during try to clearRecentTask");
    }   
} 
```

使用此功能，我总是遇到“NullPointerException”，因为接收者是自己获得的空值。而且我尝试了另一种这样的方式（如果我删除所有的try/catch）：

```
self = service.getDeclaredMethod("mSelf", null);
receiver = self.invoke(null, null); // mSelf is a static method which in ActivityMangerService class 
```

同样的结果，我无法获取 ActivityManagerService 的实例，然后我无法获取 mRecentTasks。任何意见表示赞赏，虽然我不知道“如何删除此列表中的所有项目”，但这可能是另一个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T23:43:10.900

虽然我本*可以*编辑我之前的答案，但我在另一个项目中使用的这个解决方案是如此全面不同（而且更容易），所以最好重新开始......

在这种情况下，我只是使用反射来访问 ActivityManager 的 removeTask() 方法，并将所有这些都包装到 MyActivityManager 的便利类中，如下所示：

```
import java.lang.reflect.Method;

public class MyActivityManager {

    private ActivityManager mActivityManager = null;
    private Method mRemoveTask;

    public MyActivityManager(Context context) {
        try {
            Class<?> activityManagerClass = Class.forName("android.app.ActivityManager");
            mActivityManager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);

            mRemoveTask = activityManagerClass.getMethod("removeTask", new Class[] { int.class, int.class });
            mRemoveTask.setAccessible(true);

        }
        catch ( ClassNotFoundException e ) {
            Log.i("MyActivityManager", "No Such Class Found Exception", e);
        }
        catch ( Exception e ) {
            Log.i("MyActivityManager", "General Exception occurred", e);
        }
    }

    /**
     * If set, the process of the root activity of the task will be killed
     * as part of removing the task.
     */
    public static final int REMOVE_TASK_KILL_PROCESS = 0x0001;

    /**
     * Completely remove the given task.
     *
     * @param taskId Identifier of the task to be removed.
     * @param flags Additional operational flags.  May be 0 or
     * {@link #REMOVE_TASK_KILL_PROCESS}.
     * @return Returns true if the given task was found and removed.
     */
    public boolean removeTask(int taskId, int flags) {
        try {
            return (Boolean) mRemoveTask.invoke(mActivityManager, Integer.valueOf(taskId), Integer.valueOf(flags) );
        } catch (Exception ex) {
            Log.i("MyActivityManager", "Task removal failed", ex);
        }
        return false;
    }

    public void clearRecentTasks() {
        List<RecentTaskInfo> recents = mActivityManager.getRecentTasks(1000, ActivityManager.RECENT_IGNORE_UNAVAILABLE);
        // Start from 1, since we don't want to kill ourselves!
        for( int i=1; i < recents.size(); i++ ) {
            removeTask( recents.get(i).persistentId, 0);
        }
    }

} 
```

然后，当我想清除最近的任务时，我会执行以下操作：

```
new MyActivityManager(this).clearRecentTasks(); 
```

可能需要其中一项或两项才能使其正常工作：

```
<uses-permission android:name="android.permission.GET_TASKS" />
<uses-permission android:name="android.permission.REORDER_TASKS" /> 
```

在我的情况下，应用程序是使用系统权限安装的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T09:57:44.940

我发现最好的方法是这样做：

```
public class BaseActivity extends Activity {
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);

            Log.d("Focus debug", "Focus changed !");

        if(!hasFocus) {
            Log.d("Focus debug", "Lost focus !");

            Intent closeDialog = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
            sendBroadcast(closeDialog);
        }
    }
}// all credit goes here: http://www.juliencavandoli.com/how-to-disable-recent-apps-dialog-on-long-press-home-button/ 
```

这不是我自己的代码，但这只是隐藏了最近的应用程序列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T08:40:25.867

关于如何在此问题上执行此操作，这里有一些很好的线索：

[改变 getRecentTasks 的结果](https://stackoverflow.com/questions/6258980/altering-the-result-of-getrecenttasks)

在这些之后，我出于自己的目的采取了以下方法（类似的情况，平板电脑被借给人们，然后有人必须在将它们交给下一个人之前“清除历史记录”）。

首先，在我的清单中，我创建了 18 个这样的任务：

```
<activity
  android:name=".nul.Null0"
  android:enabled="false"
  android:excludeFromRecents="false"
  android:exported="false"
  android:label="n0"
  android:launchMode="singleInstance"
  android:stateNotNeeded="true"
  android:taskAffinity=""
  android:theme="@android:style/Theme.Translucent.NoTitleBar" >
  <intent-filter>
    <action android:name="com.morphoss.blah.welcome.nul.Null0" />
    <category android:name="android.intent.category.DEFAULT" />
  </intent-filter>
</activity> 
```

其次，在助手启动“欢迎屏幕”以供下一个人使用平板电脑时启动的 AsyncTask 中，在清除浏览器历史记录和 cookie 后，我执行以下操作：

```
try {
    PackageManager pm = getPackageManager();
    ComponentName cn;
    Intent nullActivity;
    for( int i=0; i<19; i++ ) {
        cn = new ComponentName("com.morphoss.blah.welcome","com.morphoss.blah.welcome.nul.Null"+i);
        pm.setComponentEnabledSetting(cn, PackageManager.COMPONENT_ENABLED_STATE_ENABLED, PackageManager.DONT_KILL_APP);
        nullActivity = new Intent();
        nullActivity.setComponent(cn);
        nullActivity.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(nullActivity);
        Thread.sleep(20);
    }
    Thread.sleep(100);
    for( int i=0; i<18; i++ ) {
        cn = new ComponentName("com.morphoss.blah.welcome","com.morphoss.blah.welcome.nul.Null"+i);
        pm.setComponentEnabledSetting(cn, PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP);
    }
}
catch( Exception e) {
    if ( Constants.LOG_DEBUG ) Log.d(TAG,Log.getStackTraceString(e));
} 
```

虽然我在每个任务的启动之间使用了“Thread.sleep(20)”，但我还没有完全检查那里需要什么，也许更短的时间可能会奏效。出于我的目的，在删除这些内容时延迟 1 秒是没有问题的。

最后的成分是正在启动的十八个（非常简单的）活动，如下所示：

```
package com.morphoss.blah.welcome.nul;

import android.app.Activity;
import android.os.Bundle;

public class Null0 extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.finish();
    }
} 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-17T22:18:18.517

我刚刚遇到了同样的问题。好吧，我不知道最近的列表有多清晰，但我知道，如何不把你的应用放在那里。从： FLAG_ACTIVITY_NO_HISTORY 标志开始。

这对我有用，我希望我能帮助你。干杯，详细信息：最低 SDK 级别 14

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-25T09:20:15.400

从所有最近的任务中清除：

ActivityTaskManager.getService().removeAllVisibleRecentTasks();

# java-me - 我怎样才能知道在 j2me 中是否有任何类（内存）的对象被引用？

> ID：12890417
> 
> 赞同：4
> 
> 时间：2012-10-15T06:34:12.417
> 
> 标签：java-me

我正在为触摸设备开发自定义文本字段，此文本字段将用于游戏。这个自定义文本字段是一个类，并且有一个变量，其中存储了键盘图像，它是静态变量，如果我必须在一页（屏幕）中显示 2 个文本字段，我将不得不创建文本字段类的 2 个对象并且由于键盘图像存储在静态变量中，它将由两个对象共享，现在我想知道，如果自定义键盘类创建了任何对象，这些对象（内存）是否被任何变量引用，如果不是我想释放图像内存并在创建新对象时重新加载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:50:51.107

如果您有权访问[`WeakReference`](http://docs.oracle.com/javame/config/cldc/ref-impl/cldc1.1/jsr139/java/lang/ref/WeakReference.html)，则可以在类中为图像保留静态`WeakReference`，并在类的实例中具有非静态（强）引用：

```
public class CustomTextField {
    // Only necessary if multiple threads can create UI elements
    private static final Object lock = new Object();
    private static WeakReference<Image> keypadRef;

    private final Image keypad;

    public CustomTextField() {
        this.keypad = loadKeypad();
    }

    private static Image loadKeypad() {
        Image keypad = null;
        // Same comment as above: you don't need the lock if the UI elements are
        // not created in multiple threads.
        synchronized (lock) {
            if (keypadRef != null) {
                keypad = keypadRef.get();
            }
            // Either there was no existing reference, or it referenced a GCed
            // object.
            if (keypad == null) {
                keypad = new Image();
                keypadRef = new WeakReference(keypad);
            }
        }
        return keypad;
    }
} 
```

这使得键盘图像只要没有引用它的实例就可以进行垃圾收集，否则它会被保留并在实例之间共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:16:11.627

对于 Java ME 应用程序的 IMO，您应该对代码库有足够的了解，以便自己了解何时可以释放图像等需要大量内存的对象。

# c# - 单击树节点值时在文本框中显示内容

> ID：12890420
> 
> 赞同：0
> 
> 时间：2012-10-15T06:34:27.247
> 
> 标签：c#, javascript, asp.net

我有一个带有父节点和子节点的树视图。如果我单击一个节点，我想要在文本框中对该节点的描述。这应该发生在所有节点上。我该怎么做。

我尝试过的代码是：

```
private void fetchtreeview()
    {
        TVContent.Nodes.Clear();
        DataTable topics = dsSOW.Tables["Tableofcontents$"];
        drText = dsSOW.Tables["Tableofcontents" + "$"].Select("Mappingcode is NULL");
        if (drText.Length > 0)
        {
            foreach (DataRow drItem in drText)
            {
                string ss = drItem.ItemArray[1].ToString();

                string ss1 = drItem.ItemArray[0].ToString();
                if (ss1 != string.Empty)
                {
                    TreeNode node = new TreeNode(ss, ss1);
                    //txtArea.Text = node.Text;
                    node.PopulateOnDemand = false;
                    TVContent.Nodes.Add(node);

                    PopulateNode(node);
                }
            }
        }
    }
    protected void PopulateNode(TreeNode node1)
    {
        decimal order = Convert.ToDecimal(node1.Value);
        drText = dsSOW.Tables["Tableofcontents" + "$"].Select("Mappingcode='" + order + "'");
         if (drText.Length > 0)
        {
            foreach (DataRow drItem in drText)
             {
                string ss = drItem.ItemArray[1].ToString();
                string ss1 = drItem.ItemArray[0].ToString();
                //decimal order1 = Convert.ToDecimal(ss1.ToString());
                TreeNode node = new TreeNode(ss, ss1);    
                DataRow[] drText1 = dsSOW.Tables["Content" + "$"].Select("contentcode='" + ss1 + "'");               
                if (drText1.Length > 0)
                {
                   foreach (DataRow drItem1 in drText1)
                    {
                        txtArea.Text = txtArea.Text + drItem1.ItemArray[1].ToString();
                    }
                }      
                node1.ChildNodes.Add(node);
                snode = node.Value;
                if (snode != string.Empty)
                {
                    drText = dsSOW.Tables["Tableofcontents$"].Select("Mappingcode='" + snode + "'");
                    if (drText.Length > 0)
                    {
                        PopulateNode(node);
                    }
                }
            }
          }    
        TVContent.Attributes.Add("OnClick", "OnTreeClick(event)");
        //TVContent.Attributes.Add("onmouseover", "showToolTip(event)");
         } 
```

在实现此代码时，我得到了关于页面加载本身的节点的描述。我希望它仅在单击节点后出现。我从数据集中获取描述值。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:07:59.627

有一个事件 private void treeView1_AfterSelect(object sender, TreeViewEventArgs e)

在这种情况下，您将获得一个 e.Node。

从“e.Node.getsomething”你可以得到有关所选节点的信息。

# android - 如何删除android设备中的页脚空间

> ID：12890421
> 
> 赞同：1
> 
> 时间：2012-10-15T06:34:28.377
> 
> 标签：android, css, media-queries

这是我上周使用 css3 媒体查询创建的网站链接。[http://www.i-nsp.com/index.html](http://www.i-nsp.com/index.html) 这在台式机和平板设备上运行良好。但是当我签入安卓手机时，在页脚区域我得到了一些额外的空白。所以任何想法如何解决这个问题。

谢谢，纳雷什库马尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:42:49.013

在您的身体底部，您有以下 html：

```
<img border="0" src="http://visit1.geo.vip.in2.yahoo.com/visit.gif?&amp;r=http%3A//stackoverflow.com/questions/12969053/extra-space-after-the-footer-in-android-device&amp;b=Netscape%205.0%20%28Windows%20NT%206.1%3B%20WOW64%29%20AppleWebKit/537.4%20%28KHTML%2C%20like%20Gecko%29%20Chrome/22.0.1229.94%20Safari/537.4&amp;s=1680x1050&amp;o=Win32&amp;c=32&amp;j=true&amp;v=1.2"> 
```

它导致底部的空间。

删除它，重新定位它，或者尝试在其上设置 display:none。

# payment-gateway - 使用 PayPal 对信用卡进行预授权

> ID：12890424
> 
> 赞同：1
> 
> 时间：2012-10-15T06:34:35.500
> 
> 标签：payment-gateway, paypal

我的应用程序必须确保客户有足够的可用信用额度，但在订单交付之前不会实际从客户的帐户中扣除。订单交付后，应收取金额。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:30:03.853

当然是; 请参阅[使用授权和捕获](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_admin_authcapture)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:30:27.943

您可以通过授权用户在 PayPal 中执行此操作，如果用户获得授权，则您可以将其发送以进行付款。您还可以保留资金并在日期发生时进行处理。您可以在以下链接中找到更多信息。

**贝宝支付专业版** [https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_WPWebsitePaymentsPro](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_WPWebsitePaymentsPro)

**快速结帐** [https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECGettingStarted](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECGettingStarted)

# javascript - 如何使用 css 和 javascript 实现移动火花效果，如 css-tricks.com 页脚

> ID：12890426
> 
> 赞同：2
> 
> 时间：2012-10-15T06:34:51.737
> 
> 标签：javascript, jquery, html, css

[在这里](http://css-tricks.com/gallery/think-less-do-more/)，如果您将鼠标悬停在页脚中的任何链接（即“书架”链接）上，您会得到一点点向左移动的火花效果。

我尝试使用萤火虫，但无法弄清楚这是如何实现的。

假设我认为始终显示的白色边框 (?) 是一个单父 div，而触发 div 是其中的单个 div。然后当鼠标悬停发生时，jquery 应该被用来为子 div 应用背景颜色或边框左序。即使这样，也会出现这样的情况，即这些子 div 使父 div 的高度大于子 div 的高度，这与 url 中明显的相反。

对于测试场景，我使用了一个父 div ( `class_1`) 和一个子 div ( `class_2`) 而不是很多：html：

```
<div class="class_1">
<div class="class_2"></div><!--end of class_2 -->

</div><!-- end of class class_1 --> 
```

CSS：

```
.class_1{
height111:1px;

width:150px;
margin:0 auto;

border:2px solid red;

}
.class_2{

width:70px;
margin:0 auto;
border:1px solid green;

} 
```

正确的方法应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:12:47.593

演示：http: [//jsfiddle.net/qYpck/](http://jsfiddle.net/qYpck/)

它仅使用 CSS 实现 - 背景渐变，然后在父`a`标签的悬停上转换 - background-position 是赋予它*火花*幻觉的属性。

```
<ul class="link-list">
  <li><a href="#">Link one<span></span></a></li>
  <li><a href="#">Link two<span></span></a></li>
  <li><a href="#">Link three<span></span></a></li>
</ul> 
```

记下`span`链接内部的空白。

这是具有魔力的过渡 CSS：（请注意，您需要为`transition`属性使用浏览器前缀，例如`-moz-`和`-o-`- 它们出现在上面的小提琴中，但为了便于阅读和简洁，我在下面省略了它们）

```
.link-list a:hover>span, .link-list a:focus>span {
    background-position: -100% 0;
    transition: background 0.4s;
} 
```

使用 CSS 进行转换的好处是巨大的——比如：

*   渐进式增强（*闪烁*效果对于页面功能来说不是必需的，因此它纯粹是一种美学功能，不会减慢无法识别它的浏览器的速度）

*   CSS 过渡是硬件加速的，通常比 JS 动画更平滑

*   消除 javascript 引擎的压力

阅读更多：[与 jQuery 动画相比，使用 CSS 动画有什么优势吗？（性能或其他）](https://stackoverflow.com/questions/7933659/is-there-any-advantage-to-using-css-animations-over-jquery-animations-performa)

要检查该技术将支持哪些浏览器，请查看 caniuse.com

*   [http://caniuse.com/background-img-opts](http://caniuse.com/background-img-opts)
*   [http://caniuse.com/css-transitions](http://caniuse.com/css-transitions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:22:37.823

```
.link-list a:hover>span, .link-list a:focus>span {
    background-position:-100% 0;
    -webkit-transition:background 0.4s;
   -moz-transition:background 0.4s;
    -o-transition:background 0.4s;
    transition:background 0.4s
} 
```

使用 CSS 过渡效果制作背景动画

# android - 如何获取 Android 设备 GPS id（如 IMEI 号码）

> ID：12890429
> 
> 赞同：0
> 
> 时间：2012-10-15T06:35:03.763
> 
> 标签：android

在我的 android 应用程序中，我想获取我的 android 设备 GPS Id（如 IMEI 号码）。我不知道这是否可能。请在这部分帮助我。

谢谢，安卓开发者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:24:15.780

在清单文件中添加

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

在您的代码中添加

```
TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
String imeiNumber=telephonyManager.getDeviceId(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T06:21:34.220

您将获得您的 Android 手机的 IMEI 号码 需要权限：READ_PHONE_STATE

```
 TelephonyManager teleManager = (TelephonyManager) context .getSystemService(Context.TELEPHONY_SERVICE);
    String IMEI = teleManager.getDeviceId(); 
```

# html - 第二列的中心按钮具有灵活的宽度？

> ID：12890431
> 
> 赞同：0
> 
> 时间：2012-10-15T06:35:20.040
> 
> 标签：html, css, layout, stylesheet

如何将红色和黄色蓝色按钮居中`#top-menu`？

[http://jsfiddle.net/qhoc/qKXD2/](http://jsfiddle.net/qhoc/qKXD2/)

我的问题是我想`#top-menu`留在右侧而不是重叠整个屏幕宽度。现在，里面的任何东西`#top-menu`都是屏幕本身的中心。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:41:05.547

像这样更改#top-menu .center 和#logo 样式我认为这就是您想要的

```
#logo {
  background-color: yellow;
  display: block;
  float: left;
  width: 180px;
  height: 45px;
  position:absolute;
 }

#top-menu .center {
  width: 235px;
  margin auto;
} 
```

[演示](http://jsfiddle.net/qKXD2/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T06:43:10.133

`float:left`从按钮样式中删除并添加`display:inline-block.` 添加`overflow:auto`到`#top-menu .center`

**解释**

`Float:left`：使您的 div 与父 div 完全对齐。

`disply:block:`使 div 占据整个水平空间。

`Overflow:auto`: 使父 div 根据 ot 内部的内容进行扩展。

由于您需要将两个 div 并排放置，因此请给`inline-block`. inline-block 使 div 根据 div 内部的内容进行扩展。

**[现场演示](http://jsfiddle.net/qKXD2/5/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:55:59.927

这就是解决方案。删除徽标中左侧的浮动并放置margin：0 auto；请参阅以下链接

[http://jsfiddle.net/qKXD2/6/](http://jsfiddle.net/qKXD2/6/)

非常感谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T09:05:22.670

检查[演示](http://jsfiddle.net/qKXD2/12/)以获取标题上的中心徽标和顶部菜单。

# ios - 使用 UICollectionViewFlowLayout 的子类显示 uicollectinviewcellls

> ID：12890432
> 
> 赞同：0
> 
> 时间：2012-10-15T06:35:32.527
> 
> 标签：ios, uicollectionview

我试图通过子类化 UICollectionViewFlowLayout 在定义的点（存储在核心数据中）显示单元格。当我添加一个对象并且我已经在查看集合视图时，此代码会在定义的点显示单元格，但是当加载或刷新集合视图时对象不会出现。我已经通过自定义 UICollectionViewFlowLayout 连接到 self.collectionView.collectionViewLayout 但是当我将包含它的坐标的对象传递给它时，我唯一一次引用它是在 cellforitematindexpath 中。我错过了什么？

```
#import "DayViewLayout.h"

@interface DayViewLayout () {
    NSMutableArray *_insertedIndexPaths;
    NSMutableArray *_deletedIndexPaths;
}

@end

@implementation DayViewLayout

- (void)prepareLayout {
    [super prepareLayout];
    _insertedIndexPaths = [NSMutableArray new];
    _deletedIndexPaths = [NSMutableArray new];
}

- (void)prepareForCollectionViewUpdates:(NSArray*)updates
{
    [super prepareForCollectionViewUpdates:updates];
    for (UICollectionViewUpdateItem *updateItem in updates) {
        if (updateItem.updateAction == UICollectionUpdateActionInsert) {
            [_insertedIndexPaths addObject:updateItem.indexPathAfterUpdate];
        }
        else if (updateItem.updateAction == UICollectionUpdateActionDelete) {
            [_deletedIndexPaths addObject:updateItem.indexPathBeforeUpdate];
        }
    }
}

- (void)finalizeCollectionViewUpdates
{
    [_insertedIndexPaths removeAllObjects];
    [_deletedIndexPaths removeAllObjects];
}

- (UICollectionViewLayoutAttributes*)initialLayoutAttributesForAppearingItemAtIndexPath:(NSIndexPath*)itemIndexPath
{
    if ([_insertedIndexPaths containsObject:itemIndexPath]) {

        UICollectionViewLayoutAttributes *attributes =
        [UICollectionViewLayoutAttributes
         layoutAttributesForCellWithIndexPath:itemIndexPath];

        CGRect visibleRect =
        (CGRect){.origin = self.collectionView.contentOffset,
            .size = self.collectionView.bounds.size};
        attributes.center = CGPointMake(CGRectGetMidX(visibleRect),
                                        CGRectGetMidY(visibleRect));
        attributes.alpha = 0.0f;
        attributes.transform3D = CATransform3DMakeScale(0.6f,
                                                        0.6f,
                                                        1.0f);

        return attributes;
    } else {
        return [super initialLayoutAttributesForAppearingItemAtIndexPath:itemIndexPath];
    }
}

- (UICollectionViewLayoutAttributes*)finalLayoutAttributesForDisappearingItemAtIndexPath:(NSIndexPath*)itemIndexPath
{
    if ([_deletedIndexPaths containsObject:itemIndexPath]) {
        UICollectionViewLayoutAttributes *attributes =
        [UICollectionViewLayoutAttributes
         layoutAttributesForCellWithIndexPath:itemIndexPath];

        CGRect visibleRect =
        (CGRect){.origin = self.collectionView.contentOffset,
            .size = self.collectionView.bounds.size};
        attributes.center = CGPointMake(CGRectGetMidX(visibleRect),
                                        CGRectGetMidY(visibleRect));
        attributes.alpha = 0.0f;
        attributes.transform3D = CATransform3DMakeScale(1.3f,
                                                        1.3f,
                                                        1.0f);

        return attributes;
    } else {
        return [super finalLayoutAttributesForDisappearingItemAtIndexPath:itemIndexPath];
    }
}

-(UICollectionViewLayoutAttributes*)layoutAttributesForItemAtIndexPath:(NSIndexPath*)indexPath {
    UICollectionViewLayoutAttributes *attributes =
    [super layoutAttributesForItemAtIndexPath:indexPath];
    [self applySettingsToAttributes:attributes];
    return attributes;
}

- (NSArray*)layoutAttributesForElementsInRect:(CGRect)rect {
    // 1
    NSArray *layoutAttributes = [super layoutAttributesForElementsInRect:rect];
    [layoutAttributes enumerateObjectsUsingBlock:
     ^(UICollectionViewLayoutAttributes *attributes,
       NSUInteger idx, BOOL *stop)
     {
         [self applySettingsToAttributes:attributes];
     }];
    return layoutAttributes;
}

-(void)applySettingsToAttributes:(UICollectionViewLayoutAttributes*)attributes {
    // 1
    NSIndexPath *indexPath = attributes.indexPath;
    attributes.zIndex = -indexPath.item;

    // 2
    attributes.frame= CGRectMake([_object.x floatValue], [_object.y floatValue], [_object.width floatValue], [_object.height floatValue]);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:12:01.623

我为解决这个问题所做的就是在 collectionviewcontroller 从 fetchedresultscontroller 加载对象及其索引路径时创建一个字典。然后将此字典传递给 UICollectionViewFlowLayout。在 UICollectionViewFlowLayout 的 applySettingsToAttributes 方法中，我将对象从字典中取出并从对象设置属性框架。

我之前的问题是我在创建单元格时设置了对象，这仅在我插入新对象时有效，而在加载/刷新视图时无效。

# android - 在 Android 中将 KeyStore 写入文件时，使用 BouncyCastle PKCS12SafeBagBuilder 或 PKCS12BagAttributeCarrier 更改 PKCS12 安全包属性？

> ID：12890436
> 
> 赞同：1
> 
> 时间：2012-10-15T06:35:47.467
> 
> 标签：android, openssl, bouncycastle, keystore, pkcs#12

我正在尝试使用 BouncyCastle 1.47（`bckpix-jdk15on-147.jar`和`bcprov-jdk15on-147.jar`）将私钥和关联的签名证书写入 Android 设备上的 PKCS12（.p12）文件，并希望更改密钥加密算法和其他包属性。我正在尝试实现与 OpenSSL`PKCS12_create()`功能相同的控件，您可以在其中设置：

*   私钥加密算法
*   证书加密算法
*   加密迭代次数
*   MAC 迭代次数

到目前为止，我已经看到了使用`PKCS12BagAttributeCarrier`or `PKCS12SafeBagBuilder`with 的建议`PKCS12PfxPduBuilder`，但无法弄清楚如何更改上面列出的四个属性（或正确使用它们）。

有谁知道目前首选哪种方法，或者在改变`PKCSObjectIdentifiers.pkcs_9_at_friendlyName`和之外有这些方法的经验或例子`PKCSObjectIdentifiers.pkcs_9_at_localKeyId`？`KeyStore`在写入文件之前，我应该使用对象以外的东西作为容器吗？

我能够创建 PKCS12 文件并注意到两个迭代计数的默认值是 1024，私钥算法是`pbeWithSHA1And3-KeyTripleDES-CBC`，证书算法是`pbeWithSHA1And40BitRC2-CBC`。

这是我用来创建 PKCS12 文件的内容：

```
Context appContext = ...;
String p12Filename = ...;
String p12Password = ...;
String p12Alias = ...;
RSAPrivateKey privateKey = ...;
X509Certificae signedCert = ...;

KeyStore store = KeyStore.getInstance("PKCS12", "BC");
store.load(null, null);
X509Certificate[] chain = new X509Certificate[1];
chain[0] = signedCert;

store.setKeyEntry("UserCredentials", privateKey, p12Password.toCharArray(), chain);

FileOutputStream fos;
File outputDir = appContext.getFilesDir();
File pkcs12File = new File(outputDir, p12Filename);
fos = new FileOutputStream(pkcs12File);

store.store(fos, p12Password.toCharArray());
fos.flush();
fos.close(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:21:18.457

是的，org.bouncycastle.pkcs 包是正确的地方。

为了准备 1.49，在这个领域做了大量的工作。目前，我建议在[http://www.bouncycastle.org/betas](http://www.bouncycastle.org/betas)上获取该版本您可以使用 PKCS 包的测试类作为参考，还有一个示例程序和新的[http://www.cryptoworkshop.com/guide](http://www.cryptoworkshop.com/guide)上的指南

问候，

大卫

# c++ - 有错误的引用变量，必须在构造函数基/成员初始化程序中初始化

> ID：12890438
> 
> 赞同：5
> 
> 时间：2012-10-15T06:36:19.263
> 
> 标签：c++, constructor, compiler-errors, visual-studio-2012

当我尝试编译下面的源代码时出现以下错误。任何人都可以描述为什么存在这个错误以及我该如何解决它？

> **错误 1 ​​错误 C2758: 'A::s_' : 必须在构造函数基/成员初始化程序中初始化**

```
#include <iostream>
#include <string>

using namespace std;

class A
{
public:
    A(string& s) : s_(s) { cout << "A::ctor" << endl; }
    A(const A& rhs)      { cout << "A::copy" << endl; }
    ~A()                 { cout << "A::dtor" << endl; }

    A& operator=(const A& rhs) { cout << "A::copyassign" << endl; }

private:
    string& s_;    
};

int main()
{

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T07:56:55.000

首先， your`A::s_`是对 a 的引用`std::string`；这意味着它引用了必须存在于某处的东西。

由于他的引用类型，以及引用必须在创建时初始化的事实，您必须`A::s_`在所有`A`构造函数中初始化（正如其他用户所指出的那样）：

```
class A
{
public:
    A(string& s) : s_(s)
    { cout << "A::ctor" << endl; }

    A(const A& rhs) : s_(rhs.s_) // <-- here too!!
    { cout << "A::copy" << endl; }

    ~A()
    { cout << "A::dtor" << endl; }

    A& operator=(const A& rhs)
    { cout << "A::copyassign" << endl; }

private:
    string& s_;    
}; 
```

现在，回到我提到的第一件事；必须引用存在的`A::s_`东西，所以你必须知道一些东西，看看下面的代码：

```
int main()
{
    // New A instance:
    A a("hello world");

    return 0;
} 
```

构造这个`A`实例，我们提供了一个`const char[12]`值，使用这个值`std::string`创建一个临时值并将其提供给`A::A(string& s)`构造函数。`A::s_`构造函数结束后引用在哪里？临时`std::string`创建的会发生什么？它的生命周期延长了还是在构造函数结束时就*死了？*`A`你确定参考是你需要的吗？

```
std::string s("hello world");

int main()
{
    // New A instance:
    A a(s);

    return 0;
} 
```

使用上面的代码，创建了一个调用相同构造函数的新`A`实例`A::A(string& s)`，但提供的字符串位于全局范围内，因此它不会被销毁，并且`A::s_`from`a`实例将在其整个生命周期中引用一个有效的字符串，但真正的威胁在复制构造函数中：

```
std::string s("hello world");

int main()
{
    A a(s);    // a.s_ references the global s.
    A b(a);    // b.s_ references the a.s_ that references the global s.

    return 0;
} 
```

复制的对象值将引用`std::string`给定对象的值！那是你要的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T06:39:41.287

您的复制构造函数从不初始化引用。确保这样做：

```
A(const A &rhs) : s_(rhs.s_) {cout << "A::copy" << endl;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:42:05.720

```
 string& s_; 
```

这是一个参考变量。当对象被分配时它应该有一个值，因为这是对象的一部分，这就是为什么应该使用构造函数的初始化列表来初始化这个属性。

如果您不需要将此属性作为对象的一部分，则可以使用指针而不是引用：

```
 string* s_; 
```

# javascript - 使用 cookie JavaScript HTML 表单

> ID：12890441
> 
> 赞同：0
> 
> 时间：2012-10-15T06:36:31.667
> 
> 标签：javascript, cookies

作为该问题的延续：[JavaScript 在提交 HTML 表单时显示新页面](https://stackoverflow.com/questions/12887702/javascript-display-new-page-when-submit-html-form/12889531#12889531)

Littm 接受的答案（使用 Cookie）

现在我希望如果 cookie 存在，confirm.html 将显示“抱歉，您不能提交表单两次”，如果不存在，则正常显示 cookie。

任何想法真的很感激吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:12:57.510

你应该试试这个

```
function getCookie(c_name){
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++){
      x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
      y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
      x=x.replace(/^\s+|\s+$/g,"");
      if (x==c_name){
        return unescape(y);
        }
    }
}

function checkCookie(cookie_name){
    var cookieName=getCookie(cookie_name);
    if (cookieName!=null && cookieName!=""){
        alert("Sorry you can't submit the form twice");
    } else {
      //your code
    }
} 
```

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

# c# - C# linq 同名分组

> ID：12890442
> 
> 赞同：0
> 
> 时间：2012-10-15T06:36:34.533
> 
> 标签：c#, linq, datatable

我有一个像这样的数据表

```
Date      status       recno
---------------------------------
2012      DST;Par        1
------------------------------------
2012      DST            2
--------------------------------
2012      DST            3
--------------------------------------------
2012      DST;Ts         4
----------------------------------- 
```

目前我写了一个这样的查询：

```
var data = from b in table.AsEnumerable()
           where b.DateInterval>=fromDate && b.DateInterval<=toDate
           group b by b.Channel1_status into g                       
           select new
           {
               AccountNo=accountNumber,
               Status = statusLabels[g.Key].ToString(),
               StatusCount = g.Count(),
           }; 
```

但是，它向我返回了以下结果：

```
Result: DST-2 
        DST;par-1 and DST;Ts-1

Expected: DST-4  DST;par-1 and DST;Ts-1 
```

请向我解释我做错了什么以及如何获得预期的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:56:11.000

如果您想统计所有以 DST 开头的状态并仍然对变化进行分组（DST；par，DST；ts），您可以手动进行。

像这样的东西（未经测试，但我认为你明白了）：

```
var dst = data.FirstOrDefault(x => x.Status == "DST");
if (dst != null) {
    foreach (var group in data.Where(x => x != dst && x.Status.StartsWith("DST")) {
        dst.StatusCount += group.StatusCount;
    }
} 
```

# c# - C# interop.excel 从不检查保存时的兼容性

> ID：12890455
> 
> 赞同：0
> 
> 时间：2012-10-15T06:37:46.517
> 
> 标签：c#, .net, excel, ms-office, office-interop

我使用`Microsoft.Office.Interop.Excel`; 我尝试使用以下方法保存兼容 97-2003 的 XLS

```
 private void CreationFichier(_Worksheet template, int nom)
    {
        _Workbook fichierCree = _excel.Workbooks.Add();
        fichierCree.DoNotPromptForConvert = true;
        fichierCree.CheckCompatibility = false;

        var feuilleActiveClasseurCree = (_Worksheet)fichierCree.Sheets[1];
        string nomFichier = (nom - 4).ToString() + ".xls";
        label3.Text = "Creation du fichier "+nomFichier+" ...";
        progressBar1.Value++;
        template.Copy(feuilleActiveClasseurCree);

        fichierCree.SaveAs(_folderdestination.SelectedPath + "\\" + nomFichier, XlFileFormat.xlExcel8);
        fichierCree.Close();
    } 
```

但这会创建一个用于检查兼容性的弹出窗口 - 我不想要这个弹出窗口。

[http://i.stack.imgur.com/8zop9.png](http://i.stack.imgur.com/8zop9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T19:59:50.223

我没有找到仅通过代码解决此问题的方法，但我确实找到了适合我的解决方案。就我而言，我每次都打开与模板相同的文件并将其另存为新文件。使用 Office.Interop.Excel._Application.Visible = true 我可以更好地看到正在发生的事情。我只是从我的桌面 Excel 中取出主模板，并在再次选中“不再为此框显示此对话框”后重新保存它。现在，当我使用该文件作为模板时，它不再会通过询问是否保存兼容性的对话框来中断我的程序。

此外，为了防止任何文件访问问题，我对模板执行 System.IO.File.Copy，然后打开并保存我的新文件。

这是一个迟到的答案，可能无法解决您的具体问题。我希望它对现在正在寻找解决方案的人有所帮助。

# asp.net - jquery标签下的CSS错误

> ID：12890459
> 
> 赞同：0
> 
> 时间：2012-10-15T06:38:00.353
> 
> 标签：asp.net, jquery-ui, legend, fieldset

当我在我的 aspx 页面中使用 jquery 选项卡控件时，我在 UI 中遇到了这个异常问题。在所有其他页面中显示图例文本（字段集和图例显示），但是当我在 jquery 选项卡控件中使用相同的图例字段集代码时，它们的显示方式与在其他页面中的方式不同。

```
 <div id="tab-1">
            <div style="margin-top: 10px;">
                <fieldset>
                    <legend class="legendfont">Lender Company Data</legend>
                    <table style="width: 100%">
                        <tr>
                        <td class="textfont labelposition" style="width: 12%">
                         Lender Company:
                        </td>
                        </tr>
                    </table>
                </fieldset>
           </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:54:47.107

这是一个简单的解决方案，在相应的图例类的css中，需要适当地给出字体大小，在其他页面中，可以调整但使用jquery rab控件，必须为不同的控件分离css以免他们搞砸。所以这是通用 css 中的编辑：

```
.legendfont
{
font-family:Segoe UI Semibold;
} 
```

现在：

```
.legendfont
{
font-family:Segoe UI Semibold;
font-size:16px;
} 
```

# ios - 在 iOS 应用程序中从 Twitter 获取推文时使用 dispatch_queue

> ID：12890462
> 
> 赞同：0
> 
> 时间：2012-10-15T06:38:02.310
> 
> 标签：ios, multithreading

在我的 iOS 应用程序中，我在 Utility 类中从 Twitter 获取推文，然后更新主类 UITableView（单元格显示单个推文）。下面是我的代码：

```
NSMutableArray *tweetsArray = [[NSMutableArray alloc]init];

+ (NSMutableArray *)getTweetStatus:(NSString *)myData{
ACAccountStore *store = [[ACAccountStore alloc] init];
ACAccountType *twitterAccountType = 
[store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
dispatch_queue_t myCustomQueue;
myCustomQueue = dispatch_queue_create("com.example.MyCustomQueue", NULL);
[store requestAccessToAccountsWithType:twitterAccountType 
                 withCompletionHandler:^(BOOL granted, NSError *error) {
                      dispatch_sync(myCustomQueue, ^{
                     if (!granted) {
                         // The user rejected your request 
                         NSLog(@"User rejected access to the account.");
                     } 
                     else {
                         // Grab the available accounts
                         NSArray *twitterAccounts = 
                         [store accountsWithAccountType:twitterAccountType];

                         if ([twitterAccounts count] > 0) {
                             // Use the first account for simplicity 
                             ACAccount *account = [twitterAccounts objectAtIndex:0];

                             // Now make an authenticated request to our endpoint
                             NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
                             [params setObject:@"1" forKey:@"include_entities"];

                             //  The endpoint that we wish to call
                             NSURL *url =  [NSURL URLWithString:@"http://api.twitter.com/1/statuses/home_timeline.json"];

                             //  Build the request with our parameter 
                             TWRequest *request = 
                             [[TWRequest alloc] initWithURL:url 
                                                 parameters:params 
                                              requestMethod:TWRequestMethodGET];

                             // Attach the account object to this request
                             [request setAccount:account];

                             [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                                 dispatch_sync(myCustomQueue, ^{
                                 if (!responseData) {
                                      // inspect the contents of error 
                                      NSLog(@"%@", error);
                                  } 
                                  else {
                                      NSError *jsonError;
                                      NSMutableArray *tweets =[NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&jsonError];            
                                      if (tweets) {                          
                                          // at this point, we have an object that we can parse
                                          NSLog(@"%@", tweets);
                                      }
                                      else { 
                                          // inspect the contents of jsonError
                                          NSLog(@"%@", jsonError);
                                      }
                                      [tweetsArray addObjectsFromArray:tweets];

                                  }
                                 });
                              }];

                         }
                     }
    });
    }];
     return tweetsArray; 
    } 
```

问题是我不想在收到响应之前“返回 tweetsArray”（即从 TWRequest performRequestWithHandler 方法获取响应，该方法将推文响应添加到“tweetsArray”中），为此我将“dispatch_sync”放在两个地方：

1.  在`requestAccessToAccountsWithType:twitterAccountType`
2.  在`[request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)`

但我不能这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:43:13.257

也许您应该将代码更改为以下内容：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    // put you twitter request here

    dispatch_async(dispatch_get_main_queue(), ^{

        [self changeMyInterfaceMethod: tweetsArray];

    });
}); 
```

# php - 无法在 mysql_query 函数中执行 PHP 代码。代码作为字符串存储在变量中

> ID：12890463
> 
> 赞同：0
> 
> 时间：2012-10-15T06:38:04.567
> 
> 标签：php, mysql

下面是用于生成要在`mysql_query`函数内部执行的代码的代码

```
for($i=1;$i<=$totalcols;$i++) {
    $val_array[] = "\'\".\$data->val(\$i,$i).\"\'";

} 
```

`implode`然后使用和`stripslashes`函数将上面的数组转换为不带斜线的字符串。

```
$val = stripslashes(implode(",",$val_array)); 
```

所有这些都会产生一个字符串，如下所示

```
'".$data->val($i,1)."','".$data->val($i,2)."','".$data->val($i,3)."' 
```

这是我在`VALUES()`. 不是执行代码然后将值插入数据库，而是将字符串按原样插入数据库。mysql_query 函数的使用如下。

```
mysql_query("INSERT INTO import_excel ($val_string) VALUES($val)") or die(mysql_error()); 
```

如果数据插入数据库，这是屏幕截图 ![在此处输入图像描述](../Images/b16d3e9cdabf575eca0fc68301912501.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:04:46.630

您想要做的通常是这样完成的：

```
$val_array[] = "'{$data->val($i)}'"; 
```

即变量值在构建时插入到字符串中，而不是在执行时插入。

这是因为干净的 PHP 代码通常不使用“eval”函数，尽管有一些滥用 PHP 的方法来做到这一点。

此外，您通常需要应用该函数来转义值中的引号，以防止 SQL 注入：

```
$val_array[] = "'".mysql_real_escape_string($data->val($i))."'"; 
```

# diagram - 排列图

> ID：12890466
> 
> 赞同：1
> 
> 时间：2012-10-15T06:38:39.250
> 
> 标签：diagram

![在此处输入图像描述](../Images/f1f62fff2860f6c81c755593c229b7f8.png)

我做了一个qt节点来绘制图表。我想安排图表。但我找不到方法:(我认为图表的流程解决了我的问题。所以我想得到找到流程的解决方案。有了上图，我想得到一个这样的列表

```
[A, B]
[A, C, D]
[A, C, E] 
```

每个节点都有一个父链接和子链接，所以我可以找到它们。使用递归函数，我能找到答案吗？我必须使用什么算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:40:00.197

您在这里拥有的是图表（来自图论，而不是条形图等）。在这种情况下，它是树——但如果从 B 到 D 有一个链接，那么它就不再是树了。

所以为了“找流”，你应该做一个“拓扑排序”；如果它是一棵树，“BFS”运行也可以。

这样，您将获得“层”，即图表中从左到右的顺序，这可以映射到 x 坐标。如果图是树，找到好的 y 坐标更容易，如果是一般图，则更难。在前一种情况下，您可以通过排列每个节点的子树来递归地（“自下而上”）确定位置 - 即它右侧的所有元素。

如果您的结构是图表，您可以查看 Sugiyama 的算法，但这涉及更多。在这种情况下，我建议使用图形库。

后一种算法在这里实现以玩：

*   转到[交互式图形源演示](http://live.yworks.com/yfiles-for-html/demos/DataBinding/demo.yfiles.binding.interactivegraphsource/index.html)

*   然后将顶部的组合框切换为“2 Dynamic Bindings”并修改右侧的文本框如下：

节点来源：

```
['A','B','C','D','E'] 
```

边缘来源：

```
['AB', 'AC', 'CD', 'CE'] 
```

*   然后按下右上角的应用按钮，你会从上面得到你的图表，整齐的动画。

# sql - 将行拆分为 12 列

> ID：12890467
> 
> 赞同：1
> 
> 时间：2012-10-15T06:38:40.773
> 
> 标签：sql, pivot

我有一张桌子，比如说，1000 行。其中一列是 URL。

因此，从表中选择 URL。

但是我想每行显示 12 个 URL。原因是我们正在发布供人们在线进行的工作，他们一次将审查 12 个网站。

因此，在这种情况下，我们将输出大约 90 行，每行有 12 列（除了最后一行会短一些）。

有没有一种简单的方法可以做到这一点？这是枢轴或其他功能的情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:01:29.190

动态 PIVOT 的简单示例

```
CREATE TABLE dbo.Url
 (
  Id int IDENTITY,
  url nvarchar(max)
  )    

INSERT dbo.Url
VALUES ('http://www.url1.com'),
       ('http://www.url2.com'),
       ('http://www.url3.com'),
       ('http://www.url4.com')

DECLARE @cols AS nvarchar(MAX),
        @query AS nvarchar(MAX)

SELECT @cols = STUFF((SELECT DISTINCT ',' + QUOTENAME(ROW_NUMBER() OVER (ORDER BY Url))
                      FROM dbo.url
                      GROUP BY Url
                      FOR XML PATH(''), TYPE
                      ).value('.', 'NVARCHAR(MAX)'), 1, 1, '')

SET @query = 'SELECT' + @cols + ' FROM
      (
       SELECT Id, url
       FROM dbo.url
       ) x
       PIVOT
       (
        MAX(url)
        FOR Id IN (' + @cols + ') 
        ) p '
EXECUTE(@query) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:41:23.007

这是在线解决方案。虽然看起来有点复杂

```
declare @Temp_URLS table (URL nvarchar(128))
declare @Temp_Reviewers table (Name nvarchar(128))

insert into @Temp_Reviewers (Name)
select top 5
    'Reviewer' + 
    right('0000' + 
cast(row_number() over (order by number) as nvarchar(128)), 4)  
from master.dbo.spt_values

insert into @Temp_URLS (URL)
select top 30 
    'http://URL' + 
    right('0000' + 
    cast(row_number() over (order by number) as nvarchar(128)), 4) + '.com'
from master.dbo.spt_values

select
    Name,
    [1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12]
from 
(
    select TT.Name, row_number() over (order by TT.Name asc) as RowNum
    from @Temp_Reviewers as TT
) as R
    outer apply
    (
        select top 12 TT.URL, row_number() over (order by TT.URL) as RowNum
    from 
    (
        select TTT.URL, 1 + row_number() over (order by TTT.URL asc) / 12 as RowNum
    from @Temp_URLS as TTT
    ) as TT
        where TT.RowNum = R.RowNum
    ) as CALC
pivot
(
    min(CALC.URL)
    for CALC.RowNum in
        ([1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12])
) as PVT 
```

这是没有 Pivot 和 Row_Number 的解决方案

```
declare @Temp_URLS table (URL nvarchar(128), csikey int identity(1, 1))

insert into @Temp_URLS (URL)
select top 30 
    'http://URL' + 
    right('0000' + 
    cast(row_number() over (order by number) as nvarchar(128)), 4) + '.com'
from master.dbo.spt_values

select
    A.RowNum1,
    min(case when A.RowNum2 = 1 then A.URL else null end) as [1],
    min(case when A.RowNum2 = 2 then A.URL else null end) as [2],
    min(case when A.RowNum2 = 3 then A.URL else null end) as [3],
    min(case when A.RowNum2 = 4 then A.URL else null end) as [4],
    min(case when A.RowNum2 = 5 then A.URL else null end) as [5],
    min(case when A.RowNum2 = 6 then A.URL else null end) as [6],
    min(case when A.RowNum2 = 7 then A.URL else null end) as [7],
    min(case when A.RowNum2 = 8 then A.URL else null end) as [8],
    min(case when A.RowNum2 = 9 then A.URL else null end) as [9],
    min(case when A.RowNum2 = 10 then A.URL else null end) as [10],
    min(case when A.RowNum2 = 11 then A.URL else null end) as [11],
    min(case when A.RowNum2 = 12 then A.URL else null end) as [12]
from
(
    select
        T1.csikey, T1.URL,
        count(T2.csikey) / 12 + 1 as RowNum1,
        count(T2.csikey) % 12 + 1 as RowNum2
    from @Temp_URLS as T1
        left outer join @Temp_URLS as T2 on T2.csikey < T1.csikey
group by T1.csikey, T1.URL
) as A
group by A.RowNum1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:36:25.440

请尝试以下查询，它适用于 Oracle 11G：

```
SELECT * FROM(
  SELECT URL,
    CAST(FLOOR((NUM+2)/3) AS INT) AS Row_Num,
    MOD(NUM+2, 3)+1 AS OrderNum
  FROM(
      SELECT 
        ROW_NUMBER() OVER (ORDER BY URL) as NUM, URL
      FROM 
        TBL_URL
  )T1
)T2 PIVOT (MIN(URL) FOR OrderNum IN ('1' AS "1", '2' AS "2", '3' AS "3")); 
```

# javascript - createPattern 未按预期返回

> ID：12890469
> 
> 赞同：0
> 
> 时间：2012-10-15T06:38:54.703
> 
> 标签：javascript, jquery, scope, variable-types, jcanvas

我在变量“pattern”上收到 TypeError，并且我的脚本没有在标记的断点之后执行。我正在使用 JCanvas 和 JQuery，并且所有依赖项都已到位。错误的原因是什么。[这里](http://calebevans.me/projects/jcanvas/sandbox.php#function%20draw%28patt%29%20%7B%0A%20%20%24%28%22canvas%22%29.drawEllipse%28%7B%0A%20%20%20%20fillStyle%3a%20patt,%0A%20%20%20%20x%3a%20200,%20y%3a%20100,%0A%20%20%20%20width%3a%20250,%20height%3a%20100%0A%20%20%7D%29;%0A%7D%0A%0Avar%20patt%20=%20%24%28%22canvas%22%29.createPattern%28%7B%0A%20%20%20%20source%3a%20%22images/water.jpg%22,%0A%20%20%20%20repeat%3a%20%22repeat%22,%0A%20%20%20%20//%20Draw%20ellipse%20when%20pattern%20loads%0A%20%20%20%20load%3a%20draw%0A%7D%29;)使用了一个类似的实现。

```
function drawMe(thumbUrl){
  function drawThumb(){
    $("canvas").drawRect({
      //Code breaks here.
      fillStyle: pattern,
      x: 200, y: 100,
      width: 250, height: 100,
      fromCenter: false         
    });
  }

  var pattern = $("canvas").createPattern({
    source: thumbUrl,
    repeat: "repeat",
    load: drawThumb
  })

}

drawMe("http://placehold.it/100x100"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:55:17.183

我认为你需要改变这个

```
function drawThumb(){
    $("canvas").drawRect({
      //Code breaks here.
      fillStyle: pattern,
      x: 200, y: 100,
      width: 250, height: 100,
      fromCenter: false         
    });
  } 
```

对此

```
function drawThumb(pattern){
    $("canvas").drawRect({
      //Code breaks here.
      fillStyle: pattern,
      x: 200, y: 100,
      width: 250, height: 100,
      fromCenter: false         
    });
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T11:08:04.950

我在 Chrome 上遇到了这个问题。重新启动chrome后，它解决了我的问题......

# iphone - UIwebview 丢失 css3/html 格式

> ID：12890471
> 
> 赞同：0
> 
> 时间：2012-10-15T06:39:02.443
> 
> 标签：iphone, html, ios, uiwebview, formatting

我想要做的是获取网页的某些部分/部分并显示在我的 UIWebView 中。

我试图展示的部分有一些输入字段和一个提交按钮。当我使用 UIWebview 显示提取的部分时。我失去了所有的格式。空格等细节丢失。

我将该html页面下载到我的计算机并手动修改它（删除了不必要的部分），它在计算机上运行良好。

这是我的示例代码。看了其他相关问题无果。

```
-(IBAction)showContactPage {

NSString *urlContents = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"wwww.example.com/contact.html"] encoding:NSASCIIStringEncoding error:nil];

[myWebView loadHTMLString:urlContents baseURL:[NSURL URLWithString:@"http://www.example.com/"]];
}

//WebView Delegate method

 - (void)webViewDidFinishLoad:(UIWebView *)webView{

 NSString *urlContents = [myWebView stringByEvaluatingJavaScriptFromString:@"document.getElementsByClassName('column')[0].innerHTML"]; 

 NSString *headContents = [myWebView stringByEvaluatingJavaScriptFromString:@"document.head.innerHTML"];

 urlContents = [NSString stringWithFormat:@"<html><head>%@</head><body>%@</body></html>",headContents,urlContents];

 [myWebView loadHTMLString:urlContents baseURL:[NSURL URLWithString:@"http://www.example.com/"]];

 [self.view addSubview:myWebView]; 
```

}

如果我错过了 UIwebview 上的某些内容，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:40:48.357

发现哪里出错了。stringByEvaluatingJavaScriptFromString 方法返回的是它内部的内容，而不是它的属性，因此我们正在丢失格式，
即。在我的情况下，下面的代码没有返回具有“列”作为类名的标签的属性

```
urlContents = [myWebView stringByEvaluatingJavaScriptFromString:@"document.getElementsByClassName('column')[0].innerHTML"]; 
```

这没有返回`<div id="left" class="column">`，因此我丢失了格式/样式

# asp.net - 如何在 asp.net 中使用 ReturlURL？

> ID：12890474
> 
> 赞同：0
> 
> 时间：2012-10-15T06:39:15.080
> 
> 标签：asp.net

您好我正在尝试在 asp.net 中配置登录系统。我现在使用的方式在 login.aspx 中是这样的。

Response.Redirect("Default.aspx");

它总是在登录后转到该页面。我有 dvd.aspx，当我单击它时，我将被定向到登录页面，登录后，我想进入 dvd.aspx 而不是默认页面。如何在我的登录页面上配置返回 url。读了这么多东西，我迷路了。

有人可以建议简单的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:51:34.890

例如，如果您是 dvd.aspx 并且当您检查用户未登录时，您应该像这样重定向。

```
Response.Redirect("/dvd.aspx?returnUrl=" + System.Web.HttpContext.Current.Request.Url.PathAndQuery); 
```

或者，如果您不想使用查询字符串，请将当前页面写入会话。

# c# - AppFabric 缓存错误

> ID：12890475
> 
> 赞同：5
> 
> 时间：2012-10-15T06:39:29.033
> 
> 标签：c#, .net, appfabric, appfabric-cache

我们生产中的 AppFabric Cache 几乎每天都会崩溃，而且非常不稳定。记录以下错误：

> Microsoft.ApplicationServer.Caching.DataCacheException：ErrorCode：SubStatus：暂时失败。请稍后重试。（没有足够的辅助节点或它们处于节流状态。）
> 
> Microsoft.ApplicationServer.Caching.DataCacheException：ErrorCode：SubStatus：暂时失败。请稍后重试。（该请求未找到主节点。）
> 
> AppFabric 缓存服务崩溃。{外部存储的租约已过期：Microsoft.Fabric.Federation.ExternalRingStateStoreException：租约已在 Microsoft.Fabric.Data.ExternalStoreAuthority.UpdateNode（NodeInfo nodeInfo，TimeSpan 超时）在 Microsoft.Fabric.Federation.SiteNode.PerformExternalRingStateStoreOperations 过期(Boolean& canFormRing, Boolean isInsert, Boolean isJoining)}

有人可以给我一些输入吗？这是一个启用了 HA 的缓存环境，具有 3 个缓存主机。它们都运行在 Windows Server 2008 企业版上，并且使用 SQL Server 进行配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:06:27.800

服务器不可用有几种症状。首先，应用程序可能会收到带有 RetryLater 错误代码和**CacheServerUnavailable****错误**子状态的 DataCacheException 异常：

 ***   缓存集群无法访问缓存配置存储（SQL Server、Xml 或自定义）
*   应用程序指向一个或多个不正确、不可用或关闭的缓存主机。
*   缓存集群已关闭。
*   应用程序以未获准访问缓存集群的用户身份运行。

查看[http://msdn.microsoft.com/en-us/library/ff921010.aspx](http://msdn.microsoft.com/en-us/library/ff921010.aspx)以了解可用于监控 AppFabric 缓存集群运行状况的各种工具和命令

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T15:59:32.083

我们最近遇到了这个问题，它似乎是由于有缺陷的 Read-Through Provider 造成的。直读提供程序未正确管理（关闭/处置）其 sql 服务器池数据库连接。

在高使用率期间，我们观察到“ `Lease with external store expired`”错误，因为似乎缓存服务实际上缺乏与配置存储的可用连接。

用于 SqlServer 的 .NET 数据提供程序的性能计数器有助于识别此问题。**

# c# - 它加载的应用程序和 dll 的两个实例

> ID：12890476
> 
> 赞同：0
> 
> 时间：2012-10-15T06:39:36.990
> 
> 标签：c#, dll, exe, multiple-instances, static-class

我有一个可执行文件（VC++），它使用不同的命令行参数运行两次，所以基本上有两个实例在运行。这个可执行文件加载一个 C# dll，我想知道的第一件事是是否将 dll 的两个实例加载到两个不同的实例。如果是，那么我在 dll 中有一个静态类，它将如何实例化，即，是否会有两个静态类实例，或者它会在两个进程之间共享。

当我尝试运行可执行文件的两个实例时，只有一个实例成功加载了 dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:46:21.087

进程加载在其自己的 AppDomain 中，即使 DLL 加载到各自的 AppDomain 中，它们之间也不会共享任何内容。因此，每个进程中都会有两个单独的静态类实例。其次，DLL 在宿主进程中加载​​。如果您有私有 DLL，那么它们会在进程中单独加载，没有任何共享。

进程空间会有所不同，例如，DLL 中的全局变量将特定于每个单独的进程。内存中的代码可能会被共享（Windows 通常使用引用计数来提高该部分的效率）。

# javascript - 如何将变量函数传递给javascript中的onclick事件？

> ID：12890479
> 
> 赞同：0
> 
> 时间：2012-10-15T06:39:49.477
> 
> 标签：javascript, html, function, variables

我是javascript的新手。我不确定我在这里做错了什么。我想传递一个变量，它是一个锚标记的 onclick 事件的函数。我想不通。提前致谢。

```
 var test = function(val1, val2) { alert("bla"); };  

    $.each( result, function (key, value){ var a = key; var b = key+value; var doSomething = function() { test (a, b)); $('#id').bind("click", test); }); 
```

我需要动态创建锚标记并将多个变量传递给“onclick”事件。所以我想做的是在 for 循环中动态创建一个变量函数并将其绑定到锚标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:43:08.827

试试这个代码：

```
var test = function() { 
    alert("hello"); 
};  

$("#myUL").append("<li><a href='#' onclick=test()>test</a></li>"); 
```

是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:11:29.793

你需要这样的东西：

```
for (var i = 0; i < 5; i++) {
  $("button").eq(i).on("click", {value: i}, function(event) {
    var msgs = [
      "button = " + $(this).index(),
      "event.data.value = " + event.data.value,
      "i = " + i
    ];
    logDiv.append( msgs.join(", ") + "<br>" );
  });
} 
```

jQuery 站点：[event.data](http://api.jquery.com/event.data/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-15T06:41:56.517

你应该使用：

```
$(document).ready(function(){
    $("#myUL").click(function(){
         alert("hello");
    });
}; 
```

# android - 视频录制在 ICS 中不起作用

> ID：12890483
> 
> 赞同：7
> 
> 时间：2012-10-15T06:40:19.953
> 
> 标签：android, android-layout, android-intent, android-4.0-ice-cream-sandwich

我已经在 Android Phone 中实现了代码录制视频。此代码适用于 2.2 、 2.3 。

但是当我签入 ICS 代码时不起作用？

在这里我发布了代码和 xml 文件。

**videorecord.java**

```
import java.io.File;
import java.io.IOException;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.hardware.Camera;
import android.media.CamcorderProfile;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.os.Environment;
import android.util.Log;
import android.view.Display;
import android.view.KeyEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class videorecord extends Activity{
    SharedPreferences.Editor pre;
    String filename;
    CountDownTimer t;
    private Camera myCamera;
    private MyCameraSurfaceView myCameraSurfaceView;
    private MediaRecorder mediaRecorder;
    Integer cnt=0;
    LinearLayout myButton;
    TextView myButton1;
    SurfaceHolder surfaceHolder;
    boolean recording;
    private TextView txtcount;
    private ImageView btnplay;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        recording = false;

        setContentView(R.layout.videorecord);

        init();

        myCamera = getCameraInstance();
        if(myCamera == null){
        }

        myCameraSurfaceView = new MyCameraSurfaceView(this, myCamera);
        FrameLayout myCameraPreview = (FrameLayout)findViewById(R.id.videoview);

        Display display = getWindowManager().getDefaultDisplay(); 
           int width = display.getWidth();
           int height = display.getHeight();
        myCameraSurfaceView.setLayoutParams(new LinearLayout.LayoutParams(width, height-60));

        myCameraPreview.addView(myCameraSurfaceView);

        myButton = (LinearLayout)findViewById(R.id.mybutton);
        btnplay.setOnClickListener(myButtonOnClickListener);
    }

    private void init() {

        txtcount = (TextView) findViewById(R.id.txtcounter);

        //myButton1 = (TextView) findViewById(R.id.mybutton1);

        btnplay = (ImageView)findViewById(R.id.btnplay);

        t = new CountDownTimer( Long.MAX_VALUE , 1000) {

            @Override
            public void onTick(long millisUntilFinished) {

                cnt++;
                String time = new Integer(cnt).toString();

                long millis = cnt;
                   int seconds = (int) (millis / 60);
                   int minutes = seconds / 60;
                   seconds     = seconds % 60;

                   txtcount.setText(String.format("%d:%02d:%02d", minutes, seconds,millis));

            }

            @Override
            public void onFinish() {            }
        };
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

         if ((keyCode == KeyEvent.KEYCODE_BACK)) 
         {

             if(recording)
             {
                 new AlertDialog.Builder(videorecord.this).setTitle("Do you want to save Video ?")
                    .setPositiveButton("OK", new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {

                            filename();
                            //finish();
                        }
                    }).setNegativeButton("Cancle", new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                        }
                    }).show();
             }
             else
             {
                 if ((keyCode == KeyEvent.KEYCODE_BACK))
                 {
                            //Intent homeIntent= new Intent(Intent.ACTION_MAIN);
                        //homeIntent.addCategory(Intent.CATEGORY_HOME);
                        //homeIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        //startActivity(homeIntent);

                        //this.finishActivity(1);
                     finish();

                }

                 //moveTaskToBack(true);

            //   finish();
                        return super.onKeyDown(keyCode, event);
                    }
             }
         else
         {
            // Toast.makeText(getApplicationContext(), "asd", Toast.LENGTH_LONG).show();
             android.os.Process.killProcess(android.os.Process.myPid()) ;
         }

        return super.onKeyDown(keyCode, event);
    }

    ImageView.OnClickListener myButtonOnClickListener
    = new ImageView.OnClickListener(){

        public void onClick(View v) {

                    if(recording){

                Log.e("Record error", "error in recording .");   
                mediaRecorder.stop();  

                t.cancel();
                filename();
                releaseMediaRecorder(); 

            }else{

                releaseCamera();

                   Log.e("Record Stop error", "error in recording .");
                //
                if(!prepareMediaRecorder()){
                    prepareMediaRecorder();
                    finish();
                }

                mediaRecorder.start();

                recording = true;
            //  myButton1.setText("STOP Recording");
            //  btnplay.setImageResource(android.R.drawable.ic_media_pause);

                btnplay.setImageResource(R.drawable.stoprec);
                t.start();
            }

        }};

    private Camera getCameraInstance(){

        Camera c = null;
        try {
            c = Camera.open(); 
        }
        catch (Exception e){

        }
        return c; 
    }

    private void filename()
    {
        AlertDialog.Builder alert = new AlertDialog.Builder(this);

        alert.setTitle("Save Video");
        alert.setMessage("Enter File Name");

        final EditText input = new EditText(this);
        alert.setView(input);

        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            if(input.getText().length()>=1)
            {
                filename = input.getText().toString();
                File sdcard = new File(Environment.getExternalStorageDirectory() + "/VideoRecord");

                File from = new File(sdcard,"null.mp4");
                File to = new File(sdcard,filename+".mp4");
                from.renameTo(to);
                SharedPreferences sp = videorecord.this.getSharedPreferences("data", MODE_WORLD_WRITEABLE);
                pre = sp.edit();
                pre.clear();
                pre.commit();
                pre.putString("lastvideo", filename+".mp4");
                pre.commit();
                //btnplay.setImageResource(android.R.drawable.ic_media_play);
                btnplay.setImageResource(R.drawable.startrec);
            //  Intent intent = new Intent(videorecord.this,StopVidoWatch_Activity.class);
            //  startActivity(intent);

                Intent myIntent = new Intent(getApplicationContext(), StopVidoWatch_Activity.class).setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(myIntent);

            }
            else
            {
                filename();
            }

          }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton) {

             // Intent intent = new Intent(videorecord.this,StopVidoWatch_Activity.class);
            //  startActivity(intent);
              File file = new File(Environment.getExternalStorageDirectory() + "/VideoRecord/null.mp4");
              //boolean deleted = file.delete();
              file.delete();
              finish();
          }
        });

        alert.show();
    }
    private boolean prepareMediaRecorder(){
        myCamera = getCameraInstance();
        mediaRecorder = new MediaRecorder();

        myCamera.unlock();
        mediaRecorder.setCamera(myCamera);

        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));

        File folder = new File(Environment.getExternalStorageDirectory() + "/VideoRecord");

        boolean success = false;
        if (!folder.exists()) {
            success = folder.mkdir();
        }
        if (!success) {

        } else {

        }

        mediaRecorder.setOutputFile("/sdcard/VideoRecord/"+filename+".mp4");

        mediaRecorder.setMaxDuration(60000); 
        mediaRecorder.setMaxFileSize(5000000); 

        Display display = getWindowManager().getDefaultDisplay();

        int width = display.getHeight();
        int height = display.getWidth();

        String s = new String();
        s= s.valueOf(width);

        String s1 = new String();
        s1= s1.valueOf(height);

      //  Toast.makeText(videorecord.this, "Width : " + s , Toast.LENGTH_LONG).show();
      //  Toast.makeText(videorecord.this, "Height : " +  s1 , Toast.LENGTH_LONG).show();

        mediaRecorder.setVideoSize(height, width);

        mediaRecorder.setPreviewDisplay(myCameraSurfaceView.getHolder().getSurface());

        try {
            mediaRecorder.prepare();
        } catch (IllegalStateException e) {
            releaseMediaRecorder();
            return false;
        } catch (IOException e) {
            releaseMediaRecorder();
            return false;
        }
        return true;

    }

    @Override
    protected void onPause() {
        super.onPause();
        releaseMediaRecorder();    
        releaseCamera();           
    }

    private void releaseMediaRecorder()
    {
        if (mediaRecorder != null) {
            mediaRecorder.reset();   
            mediaRecorder.release(); 
            mediaRecorder = null;
            myCamera.lock();           
        }
    }

    private void releaseCamera(){
        if (myCamera != null){
            myCamera.release();      
            myCamera = null;
        }
    }

    public class MyCameraSurfaceView extends SurfaceView implements SurfaceHolder.Callback{

        private SurfaceHolder mHolder;
        private Camera mCamera;

        public MyCameraSurfaceView(Context context, Camera camera) {
            super(context);
            mCamera = camera;

            mHolder = getHolder();
            mHolder.addCallback(this);

            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int weight,
                int height) {

            if (mHolder.getSurface() == null){

              return;
            }

            try {
                mCamera.stopPreview();
            } catch (Exception e){

            }

            try {
                mCamera.setPreviewDisplay(mHolder);
                mCamera.startPreview();

            } catch (Exception e){
            }
        }

        public void surfaceCreated(SurfaceHolder holder) {
               try {
                mCamera.setPreviewDisplay(holder);
                mCamera.startPreview();
            } catch (IOException e) {
            }
        }

        public void surfaceDestroyed(SurfaceHolder holder) {

        }
    }
} 
```

录像文件.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    >

    <FrameLayout android:layout_width="fill_parent" 
    android:layout_height="fill_parent" >

    <FrameLayout 
    android:id="@+id/videoview" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"></FrameLayout>

    <LinearLayout 

       android:id="@+id/mybutton" 
     android:layout_width="fill_parent" 
     android:layout_marginBottom="0dip" 
    android:layout_height="wrap_content" android:orientation="horizontal"
     android:layout_weight="0" >

<!-- 
    <TextView  
       android:text="START Recording"
        android:id="@+id/mybutton1"
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content"
        style="@style/savestyle"
         android:layout_weight="1"
        android:gravity="left"

         >
         </TextView>
     -->
    <ImageView   android:layout_height="wrap_content" android:id="@+id/btnplay"
    android:padding="5dip"
     android:background="#A0000000"
        android:textColor="#ffffffff"
        android:layout_width="wrap_content" android:src="@drawable/startrec" />
     </LinearLayout>
     <TextView 
    android:text="00:00:00"

    android:id="@+id/txtcounter"

          android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 

        android:layout_gravity="right|bottom"

        android:padding="5dip"

        android:background="#A0000000"
        android:textColor="#ffffffff"

     />
    </FrameLayout>

    <RelativeLayout android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:background="@color/bgcolor" >

<LinearLayout android:layout_above="@+id/mybutton"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

</LinearLayout>
</RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:13:54.370

这可能对你有帮助，我最近正在研究它并且可以工作，但我在这里使用 Intent，这里从相机获取视频并将其写入 sdcard 文件夹并使用该视频播放的路径。跳它有助于完整

```
private final int VIDEO_RESULT = 1;

Button btnOk = (Button) popUpView.findViewById(R.id.btn_take_photo);
    btnOk.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // mpopup.dismiss(); //dismissing the popup
            mpopup.dismiss();
            PackageManager pm = getPackageManager();
            if (pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {

                try{
                    Intent i = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
                    //i.putExtra(MediaStore.EXTRA_OUTPUT,MyFileContentProviderVideo.CONTENT_URI);
                    startActivityForResult(i, VIDEO_RESULT);

                }catch(Exception e){

                }                   
            } else {
                Toast.makeText(getBaseContext(), "Camera is not available",Toast.LENGTH_LONG).show();
            }

        }
    });

public void onActivityResult(int requestCode, int resultCode, Intent data) {

    selectedVideos = new ArrayList<String>();       

    if (resultCode == RESULT_OK && requestCode == VIDEO_RESULT) {
        try {           

            uriVideo = data.getData();
            //Toast.makeText(ProfileVideo.this,uriVideo.getPath(), Toast.LENGTH_LONG).show();

            selectedImagePath = uriVideo.getPath();
            //selectedImages = new ArrayList<String>();

            byte[] ba = getCapturedVideoStream(ProfileVideo.this, data);
            MyWrite(ba);

            //selectedImagePath = Base64.encodeBytes(ba);           
            selectedVideos.add(selectedImagePath);

    }       

}

public void MyWrite(byte[] buffer)
    {       
        File sdCard = Environment.getExternalStorageDirectory();
        File directory = new File (sdCard.getAbsolutePath() + "/MyFiles");
        directory.mkdirs();
        //Now create the file in the above directory and write the contents into it
        File file = new File(directory, "sample.mp4");      
        selectedImagePath = file.getAbsolutePath();     
        FileOutputStream fOut = null;
        try {
            fOut = new FileOutputStream(file);
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        BufferedOutputStream osw = new BufferedOutputStream(fOut);
        try {
            //osw.write(path);
            osw.write(buffer);
            //osw.write(buffer, offset, length);            
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            osw.flush();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            osw.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }       
    }

public static byte[] getCapturedVideoStream(Context ctx, Intent data)
{       
    try 
    {
        AssetFileDescriptor videoAsset = ctx.getContentResolver().openAssetFileDescriptor(data.getData(), "r");
        FileInputStream fis = videoAsset.createInputStream();
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte[] buf = new byte[1024];
        try 
        {
            for (int readNum; (readNum = fis.read(buf)) != -1;)                
                bos.write(buf, 0, readNum);
        } 
        catch (IOException e) 
        {
           // CommonFunctions.writeLOG(CacheImagesManager.class.getClass().toString(), e.toString());
        }
        byte[] bytes = bos.toByteArray();
        return bytes;
    } 
    catch (IOException e) 
    {
        //CommonFunctions.writeLOG(CacheImagesManager.class.getClass().toString(), e.toString());
        return null;
    }       
} 
```

# iphone - iOS6 的 NSDateFormatter 问题？

> ID：12890486
> 
> 赞同：2
> 
> 时间：2012-10-15T06:40:33.010
> 
> 标签：iphone, ios6, nsdate, nsdateformatter

我有一个日期字符串，例如 2012/10/11 21:46:31 +0000

而且我已经尝试了几乎最大数量的组合，但每次我将 NSDate 设为空。

```
NSDateFormatter *fmt = [[NSDateFormatter alloc] init];
[fmt setDateFormat:@"yyyy/MM/dd HH:mm:ss"];
NSDate *fromDate = [fmt dateFromString:fromDateString]; 
```

我正在使用 iOS6

在哪里`fromDateString= 2012/10/11 21:46:31 +0000`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T06:45:37.763

尝试以下操作（包括时区字符串）：

```
NSDateFormatter *fmt = [[NSDateFormatter alloc] init];
[fmt setDateFormat:@"yyyy/MM/dd HH:mm:ss Z"];
NSDate *fromDate = [fmt dateFromString:@"2012/10/11 21:46:31 +0000"]; 
```

# sql - 用于在不同年份的两周之间进行搜索的 SQL 查询

> ID：12890487
> 
> 赞同：1
> 
> 时间：2012-10-15T06:40:49.253
> 
> 标签：sql

我有一个带有周数的列和一个带有年份数的列。我想在数据库中搜索一个时间间隔，例如：

如果我想在今年的一周和明年的一周之间进行搜索，我应该使用什么查询？

如果年份相同，那将很容易，我的查询将如下所示：

```
Select *
From mytable
Where (Finish_Week BETWEEN @Finish_Week1 AND @Finish_Week2) 
       AND (Finish_Year = @Finish_Year) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:54:43.827

简单的回答：

```
SELECT * 
FROM   MYTABLE 
WHERE  ( FINISH_WEEK >= @Finish_Week1 
         AND FINISH_YEAR = @Finish_Year - 1 ) 
        OR ( FINISH_WEEK <= @Finish_Week2 
             AND FINISH_YEAR = @Finish_Year ) 
```

此解决方案假定 @Finish_Year 是第二年。

简短说明：

*   第一个条件 - 如果年份是第一年 (@Finish_Year - 1) 并且周大于或等于第一年的周。
*   第二个条件 - 如果年份是第二年 (@Finish_Year) 并且该周在第二年之前或等于该周。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:49:49.337

该解决方案适用于任何年份，它们不必像其他答案那样相隔一年。它将年+周规范化为可以直接比较的线性格式。

```
SELECT * 
FROM mytable
WHERE Finish_Year*53+Finish_Week BETWEEN @Finish_Year1*53+@Finish_Week1 AND @Finish_Year2*53+@Finish_Week2 
```

如果这太慢（因为表中有很多行）并且您在 Finish_Year 上有一个索引，请添加以下内容：

```
AND Finish_Year BETWEEN @Finish_Year1 AND @Finish_Year2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:56:50.613

我认为如果您在 Finish_Week、Finish_Year 上有索引，那么最好的方法是写

```
select *
from mytable
where 
   (
       Finish_Year = @Finish_Year and Finish_Week >= @Finish_Week1 or
       Finish_Year = @Finish_Year + 1 and Finish_Week <= @Finish_Week2
   ) 
```

如果您没有索引，您可以考虑将周和年转换为日期，然后比较日期。

# c# - 如何为应用程序清单设置图标？C＃

> ID：12890488
> 
> 赞同：1
> 
> 时间：2012-10-15T06:40:54.197
> 
> 标签：c#, icons, publish

我有一个已发布的应用程序。我已经在项目的属性中设置了一个图标。但我注意到应用程序清单仍然显示默认图标。我想将该图标更改为我制作的图标。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T06:48:45.600

右键单击项目=>单击属性，在属性窗口中选择应用程序选项卡，然后选择“图标和清单”选项按钮现在为您的项目选择图标。

# c# - 任务计划程序无法正确运行控制台 .net 程序

> ID：12890489
> 
> 赞同：0
> 
> 时间：2012-10-15T06:40:55.047
> 
> 标签：c#, .net, excel, scheduled-tasks

我的机器：Win7 32bit，.net 4

我有一个基于 .net 4 的控制台程序，它生成 3 个 excel 文件并通过 SMTP 服务器一一发送。

当我双击 exe 或在 cmd 中运行时，它可以正常运行并使用这 3 个 excel 文件发送 3 封电子邮件。

但是当我把exe放在任务计划程序中，然后单击“运行”。仅发送了第一封电子邮件，而其他两封电子邮件不知何故无法发送。

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T06:37:17.103

要真正了解任务计划程序运行程序时发生了什么，您可以将 Trace 语句放在代码中的重要步骤中，例如：

```
Trace.WriteLine("Start creating mail object"); 
```

和

```
Trace.WriteLine(string.Format("Exception occured: {0}\r\n{1}", ex.Message, ex.StackTrace); 
```

不要忘记`Trace.WriteLine`在您的异常处理程序中放置一个，以便您知道是否出现问题。

您可以通过在 .config 文件中配置侦听器来控制这些语句的写入位置。

下面的示例添加一个`EventLogTraceListener`名为`myListener`Trace.Listeners 集合的对象。该`initializeData`参数指定要传递给`EventLogTraceListener(String)`构造函数的事件日志源的名称。

```
<configuration>
  <system.diagnostics>
    <trace autoflush="false" indentsize="4">
      <listeners>
        <add name="myListener"
          type="System.Diagnostics.EventLogTraceListener"
          initializeData="TraceListenerLog" />
      </listeners>
    </trace>
  </system.diagnostics>
</configuration> 
```

您可以通过转到`Start`>打开 EventViewer`eventvwr`

希望这可以帮助您找出问题所在，因为此时任何人都在猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T12:03:47.890

问题：编写一个 .net C# 控制台应用程序以将文档从共享驱动器上传到 SharePoint 文档库。以服务帐户登录时，执行时未发现问题，文件传输到 SP 文档库时没有问题。但是，通过任务计划程序执行时遇到“system.io.directorynotfoundexception ....”错误。另请注意，使用个人帐户在服务器上登录或通过任务计划程序使用我的个人帐户执行 .exe 时执行代码没有问题。

分析：当服务帐户。登录到代码中的映射驱动器是可访问的。但是任务调度程序无法读取映射的驱动器（即 s:\xxxxx Reports\）。

解决方法：注意到访问的文件来自 EMC VNX Windows 文件共享。将引用文档位置的控制台应用程序代码更改为以下路径 \server.com\vnxcifs01\Saved_xxxx_Report_Outputs\xxxxxxxxxxx Scheduled Reports。在此更改之后重建了 exe，任务计划程序就像一个魅力一样工作。

我希望这可以帮助一些在类似环境中工作的人。

# node.js - 改进 express.js 模块的使用

> ID：12890494
> 
> 赞同：1
> 
> 时间：2012-10-15T06:41:39.703
> 
> 标签：node.js, express, node-modules

有一些小东西，但它让我很烦。当您想使用节点模块时，您必须手动安装它，需要它并将其添加到 package.json 中。如果你不想使用它，倒过来也是一样的。

是否有一个工具可以在需要模块后自动安装/删除到 node_modules 并从 package.json 添加/删除。

如果现在以后不存在，那么它必须存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:05:13.107

这是一个相当有趣的问题。我找不到解决方案，所以我自己写了一个小脚本。想象一下，您的主文件包含以下内容。

index.js：

```
var colors = require('colors');
console.log('this comes from my main file'); 
```

如果您没有`colors`安装并运行`node index.js`，您将收到错误消息`Error: Cannot find module 'colors'`。

为了使这项工作创建另一个`module.js`文件，您将运行该文件而不是您的`index.js`文件。

模块.js：

```
var exec = require('child_process').exec;

try {
  // require your main file here
  require('./index');
} catch(e) {
  if (e.code === 'MODULE_NOT_FOUND') {
    var message = e.message;
    console.log(message);
    var module = message.match(/\'([a-z]+)\'/)[1];
    console.log('Installing ' + module + ' ...');
    exec('npm install ' + module + ' --save', function(error, stdout, stderr) {
      if (error) console.log(error);
      console.log(JSON.stringify(stdout).replace(/\\n/g, "") + ' successfully installed');
    });
  }
} 
```

现在运行`node module.js`，你会得到以下

```
Cannot find module 'colors'
Installing colors ...
"colors@0.6.0-1 node_modules/colors" successfully installed 
```

如果你`node module.js`再次运行，你会得到

```
this comes from my main file // this is what you want 
```

并`colors`添加到您的`package.json`文件中。您可以`module.js`在每个项目中重复使用，只需更改`require`函数即可获得正确的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:00:20.727

我不知道有任何工具会在您修改源代码时自动安装包。如果你真的想要的话，应该不会那么难做:)

正如凯尔所说，`--save`可以为你想要的。还有`npm shrinkwrap`一个会为您拍摄快照`node_modules`并更新它为您管理的文件。只需将该文件检入 git，然后如果您部署到 Heroku（或其他任何`npm install`使用`package.json`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T07:08:07.297

npm 可以使用`--save`flag:`npm install [package] --save`或`npm install [package] --save-dev`用于 devDependencies 来完成。查看 npm 安装文档：[https ://npmjs.org/doc/install.html](https://npmjs.org/doc/install.html)

# java - 如何在 GXT 中禁用 DualListField 的“添加选定”按钮？

> ID：12890497
> 
> 赞同：0
> 
> 时间：2012-10-15T06:41:48.247
> 
> 标签：java, gwt, gxt

我在 Java 6 项目中使用 GWT 2.0.0。我正在处理的功能允许用户在 DualListField 中选择项目，但只允许一定数量的项目。因此，我要求一旦达到某个限制（即只能选择 x 个项目），就禁用 DualListField 按钮栏中的“添加所选”和“全部添加”按钮。有没有人尝试过这个？除了自定义 DualListField 之外，还有更简单的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:03:07.117

创建一个从 DualListField 扩展的新 XY 类。在这个 XY 类中定义如下内容：

```
public clas XY <D extends ModelData> extends DualListField<D>{
    public static final int leftButton = 0x1;
    public static final int rightButton = 0x2;
    public static final int allLeftButton = 0x3;
    public static final int allRightButton = 0x4;
    public static final int upButton = 0x5;
    public static final int downButton = 0x6;

List<Integer> buttonsToRemoveList;

public CustomDualListField(List<Integer> buttonsToRemoveList){
    super();
    this.buttonsToRemoveList = buttonsToRemoveList;
}

    @Override
    protected void onRender(Element target, int index) {
        super.onRender(target, index);

        if(buttonsToRemoveList != null){
            for(Integer val:buttonsToRemoveList){
                switch(val.intValue()){
                    case leftButton:{
                        buttonBar.remove(left);
                        break;
                    }
                    case rightButton:{
                        buttonBar.remove(right);
                        break;
                    }
                    case allLeftButton:{
                        buttonBar.remove(allLeft);
                        break;
                    }
                    case allRightButton:{
                        buttonBar.remove(allRight);
                        break;
                    }
                    case upButton:{
                        buttonBar.remove(up);
                        break;
                    }
                    case downButton:{
                        buttonBar.remove(down);
                        break;
                    }
                }
            }
        }
    }
} 
```

使用这种方法，您可以配置将显示的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:13:27.827

通过自定义 DualListField 和设置，我有点能够实现这一点：

```
super.buttonBar.getWidget(0).setVisible(false) 
```

# java - 如何使用 Apache Commons Compress 将文件附加到 .tar 存档？

> ID：12890508
> 
> 赞同：5
> 
> 时间：2012-10-15T06:42:50.823
> 
> 标签：java, compression, archive, tar, apache-commons-compress

我阅读[了如何将文件附加到 java 中的 tar 存档？](https://stackoverflow.com/questions/9770492/how-do-i-append-files-to-a-tar-archive-in-java)，[将文件附加到档案而不读取/重写整个档案](https://stackoverflow.com/questions/2993847/append-files-to-an-archive-without-reading-rewriting-the-whole-archive?rq=1)，并将[条目添加到 tar 文件而不覆盖其现有内容](https://stackoverflow.com/questions/10006781/add-an-entry-to-a-tar-file-without-overwriting-its-existing-contents)，但没有给出好的答案。此外，我没有足够的声誉发表评论。所以我在这里创建了一个新问题。

有没有办法在 tar 存档中附加文件？如果文件已经存在，我想替换它。

我已经开始编写以下方法，但是当添加文件时，它会删除存档内容。[我在apache compress 网站](http://commons.apache.org/compress/examples.html)上没有找到任何示例。

```
 static final Logger LOG = Logger.getLogger(ShellClient.class);

public void appendFileInTarArchive(String tarPath, String tarFileName, String file2WriteName, String file2WriteContent) throws IOException {
    if (tarPath == null || tarFileName == null || tarFileName.isEmpty()) {
        LOG.warn("The path or the name of the tar archive is null or empty.");
        return;
    }
    final File tarFile = new File(tarPath, tarFileName);
    final File fileToAdd = new File(tarPath, file2WriteName);
    FileUtils.write(fileToAdd, file2WriteContent);

    if (file2WriteName == null || file2WriteName.isEmpty()) {
        LOG.warn("The name of the file to append in the archive is null or empty.");
        return;
    }

    TarArchiveOutputStream aos = null;
    OutputStream out = null;

    try {
        out = new FileOutputStream(tarFile);

        aos = (TarArchiveOutputStream) new ArchiveStreamFactory().createArchiveOutputStream(ArchiveStreamFactory.TAR, out);

        // create a new entry
        final TarArchiveEntry entry = new TarArchiveEntry(fileToAdd);
        entry.setSize(fileToAdd.length());

        // add the entry to the archive
        aos.putArchiveEntry(entry);
        InputStream is = new FileInputStream(fileToAdd);
        final int byteCopied = IOUtils.copy(is, aos);
        if (LOG.isDebugEnabled()) {
            LOG.debug(byteCopied+" bytes inserted in the tar archive from "+fileToAdd);
        }
        is.close();
        aos.closeArchiveEntry();
        aos.finish();
        aos.flush();
        aos.close();
        out.flush();
        out.close();

    } catch (ArchiveException e) {
        LOG.error(e.getMessage(), e);
    } catch (IOException e) {
        LOG.error(e.getMessage(), e);
    } finally {
        IOUtils.closeQuietly(aos);
        IOUtils.closeQuietly(out);
        FileUtils.deleteQuietly(fileToAdd);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T07:00:16.293

最后我成功地使用[了这篇文章](https://stackoverflow.com/a/10008232/902025)。

我创建了 tar 存档的副本并将其全部内容复制到其中。然后我删除旧的 tar 存档。

```
public void appendFileInTarArchive(String tarPath, String tarFileName, String file2WriteName, String file2WriteContent) throws AuthenticationException, IOException {
    if (tarPath == null || tarFileName == null || tarFileName.isEmpty()) {
        LOG.warn("The path or the name of the tar archive is null or empty.");
        return;
    }
    final File tarFile = new File(tarPath, tarFileName);
    final File fileToAdd = new File(tarPath, file2WriteName);
    FileUtils.write(fileToAdd, file2WriteContent);

    if (file2WriteName == null || file2WriteName.isEmpty()) {
        LOG.warn("The name of the file to append in the archive is null or empty.");
        return;
    }

    ArchiveStreamFactory asf = new ArchiveStreamFactory();

    File tempFile = new File(tarPath, "tmpTar.tar");
    tempFile.createNewFile();

    try {
        FileInputStream fis = new FileInputStream(tarFile);
        ArchiveInputStream ais = asf.createArchiveInputStream(ArchiveStreamFactory.TAR, fis);

        FileOutputStream fos = new FileOutputStream(tempFile);
        ArchiveOutputStream aos = asf.createArchiveOutputStream(ArchiveStreamFactory.TAR, fos);

        // copy the existing entries    
        ArchiveEntry nextEntry;
        while ((nextEntry = ais.getNextEntry()) != null) {
            aos.putArchiveEntry(nextEntry);
            IOUtils.copy(ais, aos);
            aos.closeArchiveEntry();
        }

        // create the new entry
        TarArchiveEntry entry = new TarArchiveEntry(file2WriteName);
        entry.setSize(fileToAdd.length());
        aos.putArchiveEntry(entry);
        IOUtils.copy(new FileInputStream(fileToAdd), aos);
        aos.closeArchiveEntry();

        aos.finish();

        ais.close();
        aos.close();

        // copies the new file over the old
        tarFile.delete();
        tempFile.renameTo(tarFile);

    } catch (ArchiveException e) {
        LOG.error(e.getMessage(), e);
    } catch (IOException e) {
        LOG.error(e.getMessage(), e);
    } finally {
        FileUtils.deleteQuietly(fileToAdd);
    }
} 
```

# image - 扫描图像，从内容创建链接（希望是 php）

> ID：12890512
> 
> 赞同：2
> 
> 时间：2012-10-15T06:43:06.450
> 
> 标签：image, hyperlink, overlay, scanning

我不确定这是否可行，但我在地图顶部的一个小框内有带有# 的地图图片，以显示位置。请参阅我的图像示例：

![http://i.stack.imgur.com/jf1p3.png](../Images/4a3c45e947e0b9a3a38154df1c4663a0.png)

我希望找到一个脚本来“扫描”图像并从数字位置创建链接（并将这些链接覆盖在框所在的位置）

在图像示例中，所有框都有一个 3，但在其他地图上，它们可能从 1 变为 400。所以我希望能够在发送到另一个图像的框上获得链接覆盖。`http://www.example.com/images/image3.jpg`即，地图框#3 会在鼠标悬停时创建一个链接。（只要我能把盒子里的#号塞进盒子里的链接里。

# mongodb - 版本 2 中 Mongoid Criteria 的 Map/Reduce 操作

> ID：12890522
> 
> 赞同：2
> 
> 时间：2012-10-15T06:43:25.250
> 
> 标签：mongodb, mapreduce, mongoid

MongoDB map/reduce 功能在 MongoId 版本 2+ 的 Mongoid Criteria 上不可用，我是否正确

谁能证实这一点我有一个标准

这是我的查询

```
class PerformerSource
  scope :active_performers,where(:active => true).only([:performer_id, :sort_order,:stage_name, :photo, :large_photo, :status, :current_performance_type,:current_sign_in_at])
end 
```

`PerformerSource.active_performers.order_by([:sort_order,:desc])`

我想对其应用 map/reduce 功能

像这样的东西

```
PerformerSource.active_performers.order_by([:sort_order,:desc]).map_reduce(PerformerSource.map,PerformerSource.reduce) 
```

但是每当我这样做时，它都会返回错误

**NoMethodError：未定义的方法“map_reduce”用于#**

检查 map/reduce 是否可用

```
PerformerSource.active_performers.order_by([:sort_order,:desc]).respond_to?(:map_reduce)
=> false

PerformerSource.respond_to?(:map_reduce)
=> false 
```

所以我相信我是正确的，因为我看到 Mongoid-3 在[这里](http://mongoid.org/en/mongoid/docs/querying.html#map_reduce)提供了在 Mongoid-criteria 中添加 map/reduce 的规定，但在 mongoid 2 中找不到相同的

我可以升级 mongoid（我希望可以），因为应用程序在 Ruby-1.8.7 上运行并且 mongoid 3 需要 ruby​​-1.9+

因此，如果地图/归约不能按照标准运行地图/归约，那么可以让我考虑如何运行地图/归约，然后考虑其他条件，即 `active_performers.order_by([:sort_order,:desc])`

注意：我只是为了清楚起见没有添加**map**和**reduce**功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:41:13.857

我制作了以下猴子补丁，我在生产中使用它：

```
 module Mongoid

  module Criterion #:nodoc:
    module MapReduce
      def map_reduce(map, reduce, options = {})
        opts = {:out => {:inline => 1}, :raw => true, :query => selector}.merge(options)
        klass.collection.map_reduce(map, reduce, opts)
      end
      alias :mapreduce :map_reduce
    end
  end

end 

```

这样我可以在一个标准上执行 map-reduce。如果你想在*all*上执行它，那么要么使用 .all 要么 .scoped （我更喜欢），比如 PerformerSource.scoped.map_reduce(..)

# jsf - primefaces PieChartModel 的数据展示

> ID：12890533
> 
> 赞同：2
> 
> 时间：2012-10-15T06:44:31.713
> 
> 标签：jsf, primefaces

我是 primefaces 的新手。当我使用 PieChartModel 时，它会以百分比显示数据。
例如，我的数据是**labors=4**和**administrator=6**。它将显示一个饼图`60%`，`40%`而我希望它在图表上显示 6 和 4。
有没有办法让我们这样做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T06:56:14.093

> dataFormat ：定义荧光笔或切片上的数据信息类型。默认为百分比。

只需设置`dataFormat="value"`

像这样

```
<p:pieChart dataFormat="value" ... 
```

# oracle - 如何在 oracle 中创建函数，这个函数的结果我们可以在任何地方使用

> ID：12890535
> 
> 赞同：3
> 
> 时间：2012-10-15T06:44:43.300
> 
> 标签：oracle

```
CREATE TABLE TEMP 
(
  ID VARCHAR2(20 CHAR) 
, TXT CLOB 
) 

create or replace FUNCTION get_field_keys (field CLOB)
  RETURN  type_array_of_varchar2
IS
  return_value  type_array_of_varchar2;
BEGIN
  //do some split operations(already done)
  //return_value[] = 'a';
  //return_value[] = 'b';
  //return_value[] = 'c';
  //..
  return return_value;
END; 
```

这个函数必须返回值，我们可以这样做

```
select * from TEMP where 'a' = ANY(get_field_keys(TXT)) 
```

函数 get_field_keys 的返回值必须设置为 varchar2，我尝试了 vararray，但“ANY”不能通过这种方式工作。它必须是记录或其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:48:51.173

由于您的函数似乎返回 a `TABLE`or`VARRAY`类型，您可以在非嵌套表达式中使用它：

```
SELECT * FROM temp WHERE 'a' IN (SELECT * FROM TABLE(get_field_keys(TXT)) 
```

我不确定这是否也适用于`ANY`量词，但它对你的目标并不重要，无论你使用`ANY`还是`IN`

# windows - 检查与服务器应用程序的连接

> ID：12890537
> 
> 赞同：1
> 
> 时间：2012-10-15T06:44:46.827
> 
> 标签：windows, tcp, network-programming, client-server, telnet

我有一个应用程序应该等待来自另一个程序的连接请求。为此，我从编写服务器应用程序的人那里收到了一个 API。当我从客户端应用程序使用 API 时，我收到一条连接失败消息。在与负责服务器和 API 的人员交谈之前，我想检查一下它周围的一切。我可以访问服务器正在运行的电脑，但我无权访问服务器代码。

这是我到目前为止检查的内容：

1.  在服务器 pc 上使用“netstat -aonb”命令，我看到服务器进程正在侦听我尝试连接的端口。
2.  在服务器 ip 和端口上使用 telnet 我看到有一个连接（得到一个空白屏幕）

我还能做些什么吗？，服务器端有没有办法查看请求是否在无法访问代码的情况下到达/处理？

我在服务器上有 Windows XP，在客户端有 Windows 7

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:28:42.367

这里有一些更适合检查和尝试不同配置的建议。

1.  两台机器，如果您使用主机名而不是 IP 地址，请检查您的 DNS 或驱动程序/etc/hosts 文件。确保 IP 正确。

2.  您的服务器程序是否记录任何连接请求或失败？您错过了任何服务器程序特定配置吗？

3.  如果您有权访问，请在服务器上运行您的客户端程序并连接到 localhost。如果它有效，这可能是服务器程序中的错误，或网络相关问题或一些解决问题。

4.  在服务器框上，检查任务管理器和事件查看器，看看它是否是系统/资源/内存问题而不是连接问题

5.  如果以上都失败了，也许您可​​以尝试在两台机器上禁用 Windows 防火墙和防病毒软件。

这就是我能想到的。希望这些帮助。

# php - Zend_Controller_Plugin_ActionStack 的工作

> ID：12890541
> 
> 赞同：0
> 
> 时间：2012-10-15T06:45:25.430
> 
> 标签：php, zend-framework

我目前正在阅读“Keith Pope”撰写的“Zend Framework 1.8 Web Application Development”。他告诉我们使用“ActionStack”，以便在每次请求时都会调用类别顶级菜单的控制器。该插件的源代码是：

```
class SF_Plugin_Action extends Zend_Controller_Plugin_Abstract 
{
    protected $_stack;

    public function dispatchLoopStartup(Zend_Controller_Request_Abstract $request) 
    {
      $stack = $this->getStack();

      // category menu
      $categoryRequest = new Zend_Controller_Request_Simple();
      $categoryRequest->setControllerName('category')
                      ->setActionName('index')
                      ->setParam(
                          'responseSegment', 
                          'categoryMain'
                      );

      // push requests into the stack
      $stack->pushStack($categoryRequest);
    }

    public function getStack()
    {
      if (null === $this->_stack) {
        $front = Zend_Controller_Front::getInstance();

        if (!$front->hasPlugin(
          'Zend_Controller_Plugin_ActionStack'
        )) {
           $stack = new Zend_Controller_Plugin_ActionStack();
           $front->registerPlugin($stack);
        } else {
           $stack = $front->getPlugin('ActionStack');
        }

        $this->_stack = $stack;
    }

    return $this->_stack;
  }
} 
```

我已经阅读了“ActionStack”插件的代码。在“postDispatch”函数中，它保存当前请求，然后在“转发”函数中，它更改当前请求的控制器、操作并设置参数。那么当前请求会发生什么？它将如何执行？

我还听说[ActionStack 是邪恶的](http://www.rmauger.co.uk/2009/03/why-the-zend-framework-actionstack-is-evil/)。由于我是新手，我大部分都不懂，因为他没有解释（对于新手）。为什么 ActionStack 是邪恶的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:17:29.387

ActionStack 是邪恶的，因为它提倡一种不好的做法：将视图相关的逻辑绑定到控制器。此外，它对性能有巨大的负面影响。

通常，ActionStack 用于开发“widgetized”站点。您设置所需的小部件列表，并将它们映射到各个控制器操作，然后循环遍历堆栈。这样做的设计缺陷是您现在正在执行 N 个不同的控制器——实际上，您应该只使用一个控制器。每个单独的控制器都应该能够将传入的请求映射到必要的视图和模型。相反，您现在基本上只是为了取回一些内容而执行 MVC 三元组。

性能影响来自这样一个事实，即您现在必须将以前的结果存储在内存中，然后重新分派——这意味着再次运行所有前/后分派插件，可能会出现状态冲突等等。

更好的方法是拥有模型感知视图助手。您可以使用动作助手来编组适当的模型并注入助手，然后在您的视图脚本和/或布局中，您只需调用它们。这尊重了适当的关注点分离，并且没有相同的性能影响。

（在 ZF2 中，这种编组要容易得多，因为您可以为各个帮助程序定义工厂——因此，您可以简单地在视图脚本中*使用*它们，而无需在控制器中执行任何特殊操作即可交付小部件内容。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:38:34.500

这是我第一个问题的答案。由于动作堆栈将最后执行（在 post dispatch 中），当前响应对象将保存为用户发出的请求而呈现的所有内容，并且动作堆栈会将数据附加到它。因此，用户将获得他要求的内容+由于操作堆栈而呈现的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T05:14:10.750

在你的例子中。前端控制器将开始执行当前请求并触发 routeStartup、routeShutdown 和 dispatchLoopStartup 事件。dispatchLoopStartup 事件将调用您的插件，并且您的插件会将请求对象添加到操作堆栈。

现在前端控制器将分发当前请求，将当前请求的 isDispatched 标志设置为 true 并触发 postDispatch 事件。现在将调用动作堆栈插件。前端控制器将当前请求对象作为参数传递给动作堆栈插件，动作堆栈插件将更新当前请求对象的控制器、模块、动作属性并将其 isDispatched 标志设置为 false（转发方法）。

现在前端控制器将检查当前请求对象的 isDispatched 标志，并且由于它被 Action Stack 插件重置，因此再次启动调度过程。现在您的新请求将被执行。

简而言之，前端控制器调度当前请求，动作堆栈插件重置当前请求的值，调度循环再次启动。

# iphone - 带定时器的录音

> ID：12890546
> 
> 赞同：-1
> 
> 时间：2012-10-15T06:46:07.137
> 
> 标签：iphone

我想拍照，一旦我这样做了，音频应该会自动开始录制，比如 3 秒。

这 3 秒应在拍摄照片后由出现在屏幕左侧的**计时器倒计时。**

所以，然后我必须**将图像和音频组合在一起**并将其保存在**私有目录**中。

有人可以告诉我如何使用**AVFoundation**和**Audio Toolbox**框架来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:48:06.233

我通常不使用，`AVFoundation`所以我不知道确切的方法/类名（我自己填写），但解决方法是`NSTimer`在录制最初开始时重复开始。像这样的东西：

```
@interface
int rec_time;
NSTimer *timer;
Recorder *recorder;
@end

@implementation 
-(void)beginRecording {
    [recorder startRecording];
    timer = [NSTimer scheduledTimerWithTimeInterval:1.0
    target:self
    selector:@selector(recordingTime)
    userInfo:nil
    repeats:YES];
}

-(int)recordingTime {
    if (rec_time >= 10) {
        [recorder endRecording];
        [timer invalidate];
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"You recorded for too long!";
        return;
    }

    rec_time = rec_time + 1;

}
@end 
```

还

AVAudioRecorder 有以下方法：

```
- (BOOL)recordForDuration:(NSTimeInterval)duration 
```

我认为这会成功！

[http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioRecorder_ClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008238](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioRecorder_ClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008238)

# ruby - 不使用 Rails 的 Ruby ActiveRecord 不保存

> ID：12890547
> 
> 赞同：2
> 
> 时间：2012-10-15T06:46:07.870
> 
> 标签：ruby, activerecord

我有一个 Pinterest Ruby 爬虫（不在 Rails 中），我将数据写入 JSON 文件。我为 Pins 创建了一个 ActiveRecord。我还创建了一个将数据从文件加载到 mysql 的方法。但是我的 load_pins 方法不会将任何数据加载到数据库中，但它会为它们创建空行。我什至放了一个调试器并尝试手动将一些数据加载到我的引脚表中，例如

```
pin = Pin.first
pin.field_id = 1
pin.user_id = 1
pin.save! 
```

它甚至返回 true，当我这样做时`pin.user_id`它返回 1 但在数据库中没有保存任何内容，或者如果我只是尝试打印 pin 它显示所有内容为空。

引脚型号：

```
require_relative '../database_configuration'

class Pin < ActiveRecord::Base 
  attr_accessor :field_id, :user_id, :board_id, :img_url, :is_repin, :is_video, :source, :link, :description, :user_name
  attr_accessible :field_id, :user_id, :board_id, :img_url, :is_repin, :is_video, :source, :link, :description, :user_name

  def to_json
    {
      field_id: field_id,
      user_id: user_id,
      user_name: user_name,
      board_id: board_id,
      img_url: img_url,
      is_repin: is_repin,
      is_video: is_video,
      source: source,
      link: link,
      description: description,
    }
  end
end 
```

我的 Load_pins 方法

```
def load_pins
  pins = JSON.parse(File.read('pins.json'))
  Pin.create!(pins)
end 
```

mysql

```
mysql> select * from pins;
+----+----------+---------+----------+---------+----------+----------+--------+------+-------------+-----------+
| id | field_id | user_id | board_id | img_url | is_repin | is_video | source | link | description | user_name |
+----+----------+---------+----------+---------+----------+----------+--------+------+-------------+-----------+
|  1 |     NULL |    NULL |     NULL | NULL    |        0 |        0 | NULL   | NULL | NULL        | NULL      |
|  2 |     NULL |    NULL |     NULL | NULL    |        0 |        0 | NULL   | NULL | NULL        | NULL      | 
```

知道为什么会这样吗？在 Rails 之外使用 ActiveRecord 时我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:44:07.277

从表`attr_accessor`中的所有字段中删除`pins`。

如果添加验证，您将看到没有设置任何 AR 字段，因为`attr_accessor`它覆盖了 AR 使用的“字段”。AR 不查看由 定义的实例变量中的值`attr_accessor`，例如`@field_id`.

我在上面说“字段”，因为 AR 实际上将所有字段值存储在`attributes`哈希中。然后，AR 定义了从该哈希中读取/写入的方法。因此，`field_id`可以作为方法访问`attributes[:field_id]`，也可以作为方法访问`field_id`。

# php - Facebook isFan 总是为喜欢的用户返回 false？

> ID：12890548
> 
> 赞同：0
> 
> 时间：2012-10-15T06:46:09.220
> 
> 标签：php, facebook

我想检查用户是否喜欢我的页面或不使用 isFan() API PHP。

[https://developers.facebook.com/docs/reference/rest/pages.isFan/](https://developers.facebook.com/docs/reference/rest/pages.isFan/)

但是，尽管用户以前喜欢过页面，但它总是返回 false。我进行了搜索，但没有找到解决此问题的好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:29:46.967

我尝试了另一种方法给你喜欢的页面 id 和检查计数，如下面的代码中提到的，在代码中我给了 cocacola Facebook 页面 id

```
$page_liked = $facebook->api('/me/likes/40796308305/');
count($page_liked['data']); 
```

如果 count 为 0 则页面不被喜欢，如果 1 表示页面被用户喜欢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:52:35.677

再次阅读文档，**pages.isFan**即将弃用，您可以尝试使用 Graph API 方法**/USER_ID/likes/PAGE_ID** .. 希望对您有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:35:16.420

IIRC，您需要请求 user_likes 权限才能使其正常工作。

# javascript - 多步表单 - 由 jquery 填充的字段的奇怪行为

> ID：12890553
> 
> 赞同：0
> 
> 时间：2012-10-15T06:46:31.887
> 
> 标签：javascript, jquery

当一个值小于 4 时，我对填充字段的脚本有问题。`input`当值小于 4 时，脚本填充字段但值不是`selected`，所以当我要进行下一步时，我在这个字段中没有值。当值大于 4 时，一切正常（该值也由 jquery 填充）。

这是我的代码：

```
function compute() {
      if( parseInt($("#finish_day").val()) < 4 ) {  
            $('#return_car').children('#return_car option[value=' + $('#get_car').val() + ']').attr('selected', true).siblings().attr('disabled', true);

            if ($('#return_car').val()) $('#return_car').change();
        }
        else {
            $('#get_car > option, #return_car > option').prop('disabled', false);
            $('#three_day').hide(2000, function () {
                $(this).remove();
            });
        }

    }
$('select#get_car').change(compute);
$('input#finish_day').change(compute); 
```

HTML 代码：

```
<form>    
<fieldset>    
<div class="type-select">   
    <label for="get_car">Miasto wynajmu: *</label>
    <select id="get_car" name="rent-a-car-next[get_car]" class="select">
        <option value="">---</option>
        <option value="Katowice">Katowice</option>
        <option value="Kraków">Kraków</option>
        <option value="Warszawa">Warszawa</option>
        <option value="Wrocław">Wrocław</option>
        <option value="Gdańsk">Gdańsk</option>
    </select>   
</div>

<div class="type-select">   
    <label for="return_car">Miasto zwrotu: </label>
    <select id="return_car" name="rent-a-car-next[return_car]" class="select">
        <option value="">---</option>
        <option value="Katowice">Katowice</option>
        <option value="Kraków">Kraków</option>
        <option value="Warszawa">Warszawa</option>
        <option value="Wrocław">Wrocław</option>
        <option value="Gdańsk">Gdańsk</option>
    </select>   
</div>

<div class="type-text">
  <label for="finish_day">Ilość dni wynajmu: </label>
  <input type="text" size="20" id="finish_day" name="rent-a-car-next[finish_day]" value="" readonly="readonly" />
</div>

<div class="type-button">
  <input type="submit" name="rent-a-car-next[step-2-next]" class="button submit" value="Kolejny krok" />
</div>

</fieldset>
</form> 
```

问题出在哪里？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:04:12.870

问题已解决：

```
$('#return_car').children('option[value=' + $('#get_car').val() + ']').prop('disabled', false).attr('selected', true).siblings().prop('disabled', true); 
```

问候

# c# - 如何使用 item 在列表中查找项目

> ID：12890557
> 
> 赞同：-1
> 
> 时间：2012-10-15T06:46:42.953
> 
> 标签：c#, list

我有使用以下项目的列表

```
ID 类别名称

1 CinemaGallery,CinemaEvents,Cinema

2 电影新闻、电影、电影预告片

3 TamilCinemaNews, TamilCinema, Tamil

```

现在我必须拆分每个类别名称，并且必须找到包含每个类别的列表。例如，我必须找到具有 Categoryname only`Cinema`或 only`CinemaEvents`或 only的列表`TamilCinema`。

我使用了 Contains 方法，但它返回每个字符串中包含 Cinema 的所有列表。

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:51:35.823

然后你只需要使用`==`而不是`IndexOf`or `Contains`：

```
var cinema = list.First(i => i.Name == "Cinema"); 
```

或使用`List.Find`：

```
var cinema = list.Find(i => i.Name == "Cinema"); 
```

您可以使用`Enumerable.Where`或[`List.FindAll`](http://msdn.microsoft.com/en-us/library/fh1w7y8z.aspx)查找所有匹配的元素：

```
var cinemas = list.FindAll(i => i.Name == "Cinema");
cinemas = list.Where(i => i.Name == "Cinema").ToList(); 
```

**编辑**（考虑您的最后一次编辑）：

```
var allCinemasOnly = list
        .Where(l => l.All(cat => cat.CategoryName == "Cinema"))
        .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:50:53.007

尝试这样的事情：

```
foreach (string s in myList)
{
    if (s.Contains("Cinema") && !s.Contains("Cinema "))
    {
        //do comething with 's'
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:52:36.777

尝试这个：

```
List<string> yourNewList = yourList.Select(x => x = "Cinema").ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T06:52:53.007

```
You can do like this ..

var itm = list.Find(a =>
        {
            var s = a.Split(Convert.ToChar(",")).ToList();
            return s.Exists(b => b == "Cinema");
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T06:59:59.763

尝试这个

```
var list = yourlist.Where(a => a == "Cinema").ToArray(); 
```

# iphone - 如果我在 Objective-C 中有索引号，如何从数组中检索对象名称？

> ID：12890562
> 
> 赞同：1
> 
> 时间：2012-10-15T06:47:38.620
> 
> 标签：iphone, objective-c, xcode

我有一个由所有对象组成的数组。我不知道哪个索引包含哪个对象。当我使用这个数组时，我只使用索引号。如何在该索引处查找对象的名称？

```
NSString *extension = @"png";
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSArray *contents = [fileManager contentsOfDirectoryAtPath:documentsDirectory error:nil];  
    NSMutableArray *pngFiles = [NSMutableArray arrayWithCapacity: [contents count]];

NSString *filename;
for (filename in contents)

{
    if ([[filename pathExtension] isEqualToString:extension]) 
    {
        [pngFiles addObject:[UIImage imageWithContentsOfFile:[documentsDirectory stringByAppendingPathComponent:filename]]];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:21:06.573

不要使用数组，而是使用字典。这样您就可以保存该图像名称和图像

```
[pngFiles setObject:[UIImage imageWithContentsOfFile:[documentsDirectory stringByAppendingPathComponent:filename]] forKey:filename]; 
```

# iphone - 获取坐标时数组仍然为空

> ID：12890569
> 
> 赞同：0
> 
> 时间：2012-10-15T06:48:10.970
> 
> 标签：iphone, objective-c

我有一系列国家名称，我想获取它们的坐标并存储到另一个数组中。在这个函数之后，我的经度和纬度数组**仍然是空**的。你知道这里有什么问题吗？我无法理解。

我的代码是：

```
 - (void)geocode {
    NSString *strcountry=[[NSString alloc]init];
    countryLati=[[NSMutableArray alloc]init];
    countryLongi=[[NSMutableArray alloc]init];
    countryName =[NSMutableArray arrayWithObjects:@"Bahrain",@"Bangladesh",@"Bhutan",@"China",@"Georgia",@"Hong Kong",nil ];
    int count=[countryName count];

    for(int i=0;i<count;i++)
    {
        strcountry=[countryName objectAtIndex:i];

    [SVGeocoder geocode:strcountry
             completion:^(NSArray *placemarks, NSHTTPURLResponse *urlResponse, NSError *error) {

                 //NSLog(@"placemarks = %@", placemarks);

                 CLPlacemark *place = [placemarks objectAtIndex:0];
                 CLLocation *location = place.location;
                 CLLocationCoordinate2D coord = location.coordinate;

                 NSString *tempLati=[[NSString alloc]initWithFormat:@"%g",coord.latitude];
                 NSString *tempLongi=[[NSString alloc]initWithFormat:@"%g",coord.longitude];
                 NSLog(@"-------------------------");
                 NSLog(@"Country : %@",strcountry);
                 NSLog(@"Latitude : %@ ",tempLati);
                 NSLog(@"Longitude : %@ ",tempLongi);

                 [countryLati addObject:tempLati];
                 [countryLongi addObject:tempLongi];

             }];

    }

    NSLog(@"%d",[countryName count]);
    NSLog(@"%d ",[countryLati count]);
    NSLog(@"%d ",[countryLongi count]);      

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:23:37.407

我认为当你想改变块中的局部变量时，你需要将它声明为块，如下所示：

```
 NSArray *stringsArray = @[ @"string 1",

                              @"String 21", 

                              @"string 12",

                              @"String 11",

                              @"Strîng 21", 

                              @"Striñg 21", 

                              @"String 02" ];

    NSLocale *currentLocale = [NSLocale currentLocale];

    __block NSUInteger orderedSameCount = 0;

     NSArray *diacriticInsensitiveSortArray = [stringsArray sortedArrayUsingComparator:^(id string1, id string2) {
      NSRange string1Range = NSMakeRange(0, [string1 length]);

    NSComparisonResult comparisonResult = [string1 compare:string2 options:NSDiacriticInsensitiveSearch range:string1Range locale:currentLocale];

   if (comparisonResult == NSOrderedSame) {
       orderedSameCount++;
   }
    return comparisonResult;
}];

NSLog(@"diacriticInsensitiveSortArray: %@", diacriticInsensitiveSortArray);

NSLog(@"orderedSameCount: %d", orderedSameCount); 
```

编辑：来自参考的声明。

> 块的一个强大特性是它们可以在相同的词法范围内修改变量。您表示块可以使用 __block 存储类型修饰符修改变量。

所以你应该将 countryLati 和 countryLongi 声明为块存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:36:05.127

我接受 Nuzhat Zari 解决方案。下面是不使用块和 3rd 方库的代码。它只是一个建议，向您展示了另一种获取位置详细信息的方法。

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

这个 URL 有一个很好的 Google API 文档。

```
- (void)geocode 
{
NSString *strcountry=[[NSString alloc]init];
countryLati=[[NSMutableArray alloc]init];
countryLongi=[[NSMutableArray alloc]init];
countryName =[NSMutableArray arrayWithObjects:@"Bahrain",@"Bangladesh",@"Bhutan",@"China",@"Georgia",@"Hong Kong",nil ];
int count=[countryName count];

for(int i=0;i<count;i++)
{
    strcountry=[countryName objectAtIndex:i];

    NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv", strCountry];
    NSString* webStringURL = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSURL *url = [NSURL URLWithString:webStringURL];
    NSString *locationString = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];
    NSLog(@"Location String = %@", locationString);
    NSArray *receivedGoogleData = [[NSArray alloc] initWithArray:[locationString componentsSeparatedByString:@","]];
    searchTermLocation = [[CLLocation alloc] initWithLatitude:[[receivedGoogleData objectAtIndex:2] doubleValue] longitude:[[receivedGoogleData objectAtIndex:3] doubleValue]];

    [countryLati addObject:[[receivedGoogleData objectAtIndex:2] doubleValue]];
    [countryLongi addObject:[[receivedGoogleData objectAtIndex:3] doubleValue]];

}

NSLog(@"%d",[countryName count]);
NSLog(@"%d ",[countryLati count]);
NSLog(@"%d ",[countryLongi count]);      
} 
```

@Mahesh Dhapa：试试这个，从我的角度来看，我觉得这比你的 SVGeoCoder 方式简单，因为不需要额外导入 SVGeocoder 类。顺便说一句，SVGeocoder 很简单。但是，这也很简单，无需使用 3rd 方库。

你从谷歌得到这样的回应 200,1,23.8954,34.5478

其中，200 - 成功 1 - 准确度 23.8954 - 位置纬度 34.5478 - 位置经度

您也可以使用 JSON 和 XML 格式获取此信息，并提供更清晰的信息，但您需要将它们从 JSON 和 XML 格式解码为 Dictionary 才能使用它们。

**示例 JSON 格式：**

```
{
  "name": "Bahrain",
  "Status": {
    "code": 200,
    "request": "geocode"
  },
  "Placemark": [ {
    "id": "p1",
    "address": "Bahrain",
    "AddressDetails": {
   "Accuracy" : 1,
   "Country" : {
      "CountryName" : "Bahrain",
      "CountryNameCode" : "BH"
  }
},
    "ExtendedData": {
      "LatLonBox": {
        "north": 26.3240565,
        "south": 25.5798401,
        "east": 50.8228639,
        "west": 50.3781509
      }
    },
    "Point": {
      "coordinates": [ 50.5577000, 26.0667000, 0 ]
    }
  } ]
} 
```

**示例 XML 响应：**

```
<kml xmlns="http://earth.google.com/kml/2.0">
<Response>
<name>Bahrain</name>
<Status>
<code>200</code>
<request>geocode</request>
</Status>
<Placemark id="p1">
<address>Bahrain</address>
<AddressDetails xmlns="urn:oasis:names:tc:ciq:xsdschema:xAL:2.0" Accuracy="1">
<Country>
<CountryNameCode>BH</CountryNameCode>
<CountryName>Bahrain</CountryName>
</Country>
</AddressDetails>
<ExtendedData>
<LatLonBox north="26.3240565" south="25.5798401" east="50.8228639" west="50.3781509"/>
</ExtendedData>
<Point>
<coordinates>50.5577000,26.0667000,0</coordinates>
</Point>
</Placemark>
</Response>
</kml> 
```

# ubuntu - Symfony2 在 Ubuntu 虚拟机上运行缓慢

> ID：12890571
> 
> 赞同：1
> 
> 时间：2012-10-15T06:48:28.483
> 
> 标签：ubuntu, symfony, virtualbox

出于某种原因，我的 Symfony2 安装在开发模式下（app_dev.php）的 VirtualBox 上运行 Ubuntu 12.04 的 VM 提供时非常慢。在生产模式下它很快（这里没问题）。

当使用 MAMP 在 VM 外部提供应用程序时，我在分析器中得到以下时间：

总时间：337 毫秒

初始化时间：158 毫秒

从 VM 提供应用程序时，我得到以下时间：

总时间：2069 毫秒

初始化时间：1908 毫秒

Xdebug 在 MAMP 中启用，但在 VM 上禁用（启用 xdebug 时速度是原来的两倍）。

知道为什么它在开发模式下的 VM 上要慢得多吗？

**更新：**

现在处理一个请求需要超过 40 秒。它从 2 秒开始，然后每次花费的时间越来越长。最终，VM 锁定并冻结。我在终端看到一条消息说 apache 内存不足（apache，而不是 php）。目前，VM 有 1gb 的可用内存（IMO 绰绰有余）。

我没有使用任何类型的共享文件夹。

**更新：**

出于某种原因，它又开始正常工作了。我什至能够将它缩小到 1 个 CPU，并且它工作得很好。我再次启用了 xdebug，它的加载时间从 200 毫秒变为 800 毫秒（在开发 IMO 中可接受）。我现在的问题是，“为什么会发生这样的事情？” 我没有做任何事情使开始变慢，然后突然又变快了。我的 Mac 可能有问题吗？我正在运行 Ubuntu 服务器 12.04（64 位）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:11:29.170

1.  如果代码在 Windows 上并且它是共享给 Ubuntu 的 samba，它会非常慢
2.  当我在 Amazon EC2 上托管 Symfony2 时，它需要是 c1-medium-highcpu，因为在正常情况下它有点慢并且 CPU 阻塞。给你的虚拟机另一个 CPU 内核和更多内存。

亚马逊中高CPU规格

> 1.7 GB 内存 5 个 EC2 计算单元（2 个虚拟内核，每个内核有 2.5 个 EC2 计算单元） 350 GB 实例存储 32 位或 64 位平台 I/O 性能：中等 EBS 优化可用：无 API 名称：c1.medium

1.  打开 APC Cache 并在内存缓存中使用。如果 symfony 类缓存在 HDD 上，它会很慢。
2.  如果以上所有 3 没有逐行比较 php.ini。

# java - Android：连接到本地主机上的服务器时设备上的连接超时

> ID：12890578
> 
> 赞同：1
> 
> 时间：2012-10-15T06:48:58.000
> 
> 标签：java, php, android, http, android-networking

我不知道为什么会这样。我正在使用 PHP 服务器并将数据从 Android 应用程序发布到服务器。当我使用模拟器时，一切正常，但是当我使用我的 Android 设备进行测试时，我收到连接超时错误。我正在使用与我的服务器在 android 设备上相同的网络。我在这里粘贴我的控制台日志，以便您对此有一个清晰的了解：

```
10-15 12:09:25.593: W/System.err(24334): org.apache.http.conn.ConnectTimeoutException: Connect to /10.0.2.2:80 timed out
10-15 12:09:25.609: W/System.err(24334):    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121)
10-15 12:09:25.609: W/System.err(24334):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:156)
10-15 12:09:25.609: W/System.err(24334):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10-15 12:09:25.609: W/System.err(24334):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
10-15 12:09:25.609: W/System.err(24334):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
10-15 12:09:25.609: W/System.err(24334):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
10-15 12:09:25.609: W/System.err(24334):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
10-15 12:09:25.609: W/System.err(24334):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
10-15 12:09:25.609: W/System.err(24334):    at com.example.insertuserdetails.MainActivity$1.onClick(MainActivity.java:78)
10-15 12:09:25.609: W/System.err(24334):    at android.view.View.performClick(View.java:2538)
10-15 12:09:25.609: W/System.err(24334):    at android.view.View$PerformClick.run(View.java:9152)
10-15 12:09:25.609: W/System.err(24334):    at android.os.Handler.handleCallback(Handler.java:587)
10-15 12:09:25.609: W/System.err(24334):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-15 12:09:25.609: W/System.err(24334):    at android.os.Looper.loop(Looper.java:130)
10-15 12:09:25.617: W/System.err(24334):    at android.app.ActivityThread.main(ActivityThread.java:3689)
10-15 12:09:25.617: W/System.err(24334):    at java.lang.reflect.Method.invokeNative(Native Method)
10-15 12:09:25.617: W/System.err(24334):    at java.lang.reflect.Method.invoke(Method.java:507)
10-15 12:09:25.617: W/System.err(24334):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
10-15 12:09:25.617: W/System.err(24334):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
10-15 12:09:25.617: W/System.err(24334):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 JSON 代码：

```
String url = "http://10.0.2.2/insert_user_details.php";
                HttpClient client = new DefaultHttpClient();
                HttpParams params = client.getParams();
                HttpConnectionParams.setConnectionTimeout(params, 15000);
                HttpPost httpPost = new HttpPost(url);
                httpPost.setHeader("json", jsonObject.toString());
                StringEntity se = null;
                se = new StringEntity(jsonObject.toString());
                se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                        "application/json"));
                httpPost.setEntity(se);
                HttpResponse response = client.execute(httpPost);
                int i = response.getStatusLine().getStatusCode();
                Toast.makeText(getBaseContext(), "Status: " + i,
                        Toast.LENGTH_LONG).show(); 
```

请帮助我克服这种奇怪的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:56:19.047

尝试增加连接超时...

```
HttpParameters = new BasicHttpParams();
HttpConnectionParams.setSoTimeout(httpParameters, timeoutConnection  + 10000 );
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
httpclient = new DefaultHttpClient(httpParameters); 
```

**您的代码：**

```
 String url = "http://10.0.2.2/insert_user_details.php";
            HttpPost httpPost = new HttpPost(url);
            HttpParams params = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(params, 15000);
            HttpClient client = new DefaultHttpClient(params);
            httpPost.setHeader("json", jsonObject.toString());
            StringEntity se = null;
            se = new StringEntity(jsonObject.toString());
            se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
            httpPost.setEntity(se);
            HttpResponse response = client.execute(httpPost);
            int i = response.getStatusLine().getStatusCode();
            Toast.makeText(getBaseContext(), "Status: " + i, Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T06:57:42.107

首先，您应该了解如何在您的 android 设备上打开本地主机。因为在您的 android 设备上，您无法正常访问本地主机。

# c - 带有结构黑客的结构数组

> ID：12890579
> 
> 赞同：1
> 
> 时间：2012-10-15T06:48:59.617
> 
> 标签：c

假设我在 C 中有这样的结构

```
struct A {  
int len;  
char s[1];  
} 
```

我想要一个上述结构的数组，但`char s[1]`结构 A 的成员可以是可变长度的。我们应该怎么做？甚至 C99 中的 struct hack 技巧在这里似乎也不起作用。一种解决方案是`char *`作为最后一个成员并进行动态内存分配，但我希望所有数据都`struct`位于连续位置，因为我的实现需要缓存无意识。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T06:55:25.820

你不能有一个可变大小的对象数组，所以你不能有一个使用 struct hack 的结构数组。数组中的所有对象的大小必须相同。如果它们的大小都相同，则结构必须隐含大小，因此您毕竟不会使用 struct hack；在你的结构中数组的维度中会有一个不是 1 的大小`s`（除非 1 对所有东西都足够大）。原因是`a[i]`（其中`a`是数组的名称并且`i`是数组的索引）的存储位置必须可以计算为“`a`加号的字节地址（`i`乘以数组中一个对象的大小）”。因此，数组中对象（在本例中为结构）的大小必须是已知且固定的。

作为替代方案，您可以拥有一个指向可变大小对象的指针数组；您只需安排以适当的大小分别分配每个对象，并将指向该对象的指针保存在数组中。

请注意，C99 取消了“struct hack”（虽然在实践中它从未正式可移植），而是引入了“灵活数组成员”：

```
struct A {  
    int  len;  
    char data[];  
}; 
```

但是，上面的建议仍然适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T06:57:03.317

如果“s”有最大尺寸，您可以使用它来代替 [1]。这使一切保持连续。

如果你**真的**不想使用动态内存，那么你不能用数组来做。您需要自己的“经理”，它将单独对每个成员使用 struct hack 技巧 - 但这意味着您不能进行索引查找 - 您必须查看每个元素以查看它有多大并跳转正确的字节数到下一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T08:12:49.677

在 C 中，数组索引涉及将基地址乘以单个元素的编译时常数大小。出于这个原因，您不能直接将内置数组支持与“struct hack”一起使用，因为每个`s`元素都将被准确分配您请求的 1 个字节，并且结构之外的索引将访问`S`数组中的以下元素（或关闭完全结束，可能会崩溃）。

如果你*真的*需要连续的数据来提高缓存访问速度，你可以自己打包，你可以用间接解决这个问题（像大多数事情一样）......有一个连续的数组`S*`，然后手动将数据打包到另一个连续的缓冲区（`malloc()`或堆栈为所有`S`对象分配足够的内存，包括所有成员的实际数据大小`s[]`）。`int len`如果元素未针对您的架构进行最佳（正确）对齐，您的性能可能会受到影响（或您的操作系统崩溃） ，因此您可能需要在`S`实例之间手动填充。

```
S* index[100]               char data[10000];
(S*)(data)  --------------> S with 14-byte s[] using data[0]..[17]
(S*)(data + 20) -----\      2 byte padding so next S is 4-byte aligned
(S*)(data + 32) --\   \---> S with 7-byte s[] using data[20]..[30]
                   \        1 byte padding...
                    \-----> ... 
```

不幸的是，这是一个相当不灵活的数据布局——你不能只增加元素`s`成员中的数据量而不将所有其他数据排除在外并修补索引，但这对于数组来说是正常的，所以如果你已经在考虑那么使用它们也许这会适合你。另一个麻烦是预先计算`S`结构的总大小（包括`s[]`任何填充）......

# objective-c - 平台无关目标 C

> ID：12890581
> 
> 赞同：0
> 
> 时间：2012-10-15T06:49:33.123
> 
> 标签：objective-c

我正在寻找构建可以在 Mac OS X 和 Linux 上运行的 Objective C 软件组件。据我了解，Cocoa 软件组件只能在 Mac OS X 平台上运行。有没有人对可以在 Mac OS X 和 Linux 上运行的平台无关版本的 Objective C 有很好的推荐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:54:06.453

GNUStep 可能是一个选项。这个 SO 问题的答案中提到的来源： [Compiling Objective-C app for Linux (API coverage)](https://stackoverflow.com/questions/9664855/compiling-objective-c-app-for-linux-api-coverage)

# ruby - 如何在 ruby 中更改 optparse 的默认错误消息？

> ID：12890583
> 
> 赞同：0
> 
> 时间：2012-10-15T06:49:50.843
> 
> 标签：ruby

```
require 'optparse'
params = ARGV.getopts("a:", "AA") 
```

`ruby a.rb -a`显示：

```
a.rb:3:in `<main>': missing argument: -a (OptionParser::MissingArgument) 
```

`ruby a.rb -b`显示：

```
a.rb:3:in `<main>': invalid option: -b (OptionParser::InvalidOption) 
```

我想显示我的帮助信息，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:19:12.487

实际上，您可以在 OptionParser.new 的块中使用**on_tail**。

但是由于您只是尝试使用 ARGV.getopts，因此显示您自己的帮助消息的技巧将拯救异常：

```
require 'optparse'

help_msg = <<EOM
This is help message:
Hello buddy, you may do something wrong
...
EOM

begin
  params = ARGV.getopts("a:", "AA")
rescue => e
  puts e.message
  puts '=' * 80
  puts help_msg
end 
```

输出：

```
ruby a.rb -a
#=>
missing argument: -a
================================================================================
This is help message:
Hello buddy, you may do something wrong
...

ruby a.rb -b
#=>
invalid option: -b
================================================================================
This is help message:
Hello buddy, you may do something wrong
... 
```

# java - 增加锁数量的最佳方法是什么？

> ID：12890586
> 
> 赞同：0
> 
> 时间：2012-10-15T06:50:16.377
> 
> 标签：java, concurrency, locks

此问题基于[Synchronizing on an Integer results in NullPointerException](https://stackoverflow.com/questions/12890214/synchronizing-on-an-integer-results-in-nullpointerexception)并源自此问题[Synchronizing on an Integer value](https://stackoverflow.com/questions/659915/synchronizing-on-an-integer-value)

我想知道在 Java 中增加锁数量的最佳方法是什么。除了`ConcurrentHashMap`在即基于固定数组并通过计算键的哈希来引用数组的索引来实现之外？

以下是预期的。如果`doMoreThing()`一个对象正在处理中，那么`doAnotherThing()`如果它从不同的线程调用，我不应该为同一个对象做。

```
public void doSomething(int i) {
    doAnotherThing(i);// some checks here based on it it will call to
                        // doMoreThing
    doMoreThing(i);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T07:01:48.830

Java 中的每一个`Object`都有一个关联的锁。如果你想要一个新的锁，你可以创建一个新的`Object`. 引用的问题没有说明您为什么要尝试增加锁的数量，或者您的意思是什么。也许你可以提供更多细节。

**更新以下更改的问题**

我想我看到了你的目标：实际上，你想要一个正在通过的`synchronized`障碍。有两种相对简单的方法来做你所追求的：`int``doSomething`

a)多个线程能够同时调用*不同*的 s*真的很重要吗？*如果没有，您可以将两个电话都放在一个`doSomething` *`int``synchronized(this)`*

 *b) `int`s 不是`Object`s。如果您更改`doSomething`为 take`Integer`并且还将调用`doSomething`的任何内容（以及调用该调用的内容等）更改为也使用`Integer`s，您可以在`Integer`. 这里重要的是要确保每个调用者都将使用相同的`Integer`对象 - 可能有多个`Integer`具有相同`int`值的 s，但在不同的 s 上同步`Integer`不会提供您正在寻找的保护。*

# javascript - KnockoutJs 计算数组未正确计算

> ID：12890601
> 
> 赞同：2
> 
> 时间：2012-10-15T06:51:43.267
> 
> 标签：javascript, mvvm, knockout.js

代码如下： EmployeeModel 是viewModel，问题是当我改变一个项目的属性时——employees （obs 数组）中的deletedFlag，deletedItems 没有更新。

我怎样才能解决这个问题？

```
 function Employee(data) {
    this.employeid = ko.observable(data.employeid);
    this.name = ko.observable(data.name);
    this.isactive = ko.observable(data.isactive);
    this.deletedFlag = ko.observable(false);
}

var EmployeeModel = function () {
    var self = this;
    self.employees = ko.observableArray([]);

    self.deletedItems = ko.computed(function () {
        return ko.utils.arrayFilter(self.employees(), function (item) {
            return item.deletedFlag == true;
        });
    }, this);
} 
```

编辑：以下代码将数组中的一项标记为删除

```
self.removeEmployee = function (employee) {
        employee.deletedFlag(true);
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:22:38.830

该属性`deletedFlag`是可观察的，因此您需要通过将其作为函数调用来检索其当前值（您不能直接将其与任何值进行比较）：

```
self.deletedItems = ko.computed(function () {
    return ko.utils.arrayFilter(self.employees(), function (item) {
        return item.deletedFlag() == true; // <===
    });
}, this); 
```

# android - 如何在android的后台触发代码？

> ID：12890609
> 
> 赞同：0
> 
> 时间：2012-10-15T06:52:52.477
> 
> 标签：android, alarmmanager, alarm, android-alarms

我想在每天上午 10 点触发特定的代码片段，而应用程序将最小化请帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:55:11.590

您需要使用警报管理器类。

[你可以在这里](http://justcallmebrian.com/?p=129)找到合适的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:56:57.537

实现这一点的最简单方法是设置一个[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)，它会在您设置它时触发您的意图。在您的意图中，您可以执行任何您想要的代码。否则设置后台服务可能是一个不错的选择，即使是艰难的选择多一点编码

# android - 如何在 sql server 中编写一个跳跳虎向安卓手机发送推送通知（GCM）？

> ID：12890612
> 
> 赞同：1
> 
> 时间：2012-10-15T06:52:55.053
> 
> 标签：android, sql-server, triggers, google-cloud-messaging

我已经将 GCM 的演示代码应用于 appache 服务器上的服务器端和 android 设备上的客户端，并且运行良好；但我需要在我的应用程序中激活此服务，如下所示：我在 SqlServer 上有一个数据库，并且需要在某些数据被修改时自动向 android 手机发送推送通知，我认为我应该使用更新后和插入后触发器这样做，但我不知道该怎么做。任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:26:41.527

您不应该从触发器中执行此操作。将 GCM 推送的延迟添加到每个表更新将很快将性能降低到无法忍受的低点。您必须将触发器与 GCM 调用分离，实现它的最佳方法是通过队列。

*   您可以[将表用作队列](http://rusanu.com/2010/03/26/using-tables-as-queues/)，并让外部进程监视队列并处理 GCM 调用。
*   您可以使用[Service Broker并从](http://msdn.microsoft.com/en-us/library/bb522893.aspx)[内部激活过程](http://msdn.microsoft.com/en-us/library/ms171617%28v=sql.105%29.aspx)或从监视队列的外部进程传递 GCM 调用
*   您可以使用[MSMQ](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx)并从外部进程监视 NT 队列。

我的建议是使用第一个选项，因为它是最简单的，并且具有简单的内在稳健性。阅读链接文章以了解将表格用作队列的要求，并且不要偷工减料。

所有选项仍然依赖触发器将通知入队，但它将是本地入队，而不是 GCM 调用。

我相信有人会想到使用 SQLCLR 从触发器本身调用 GCM 的幼稚解决方案：不要这样做。

# python - 连接两个文件夹名称

> ID：12890613
> 
> 赞同：5
> 
> 时间：2012-10-15T06:52:58.650
> 
> 标签：python, concatenation, directory

这应该很容易，但我坚持得太多了。

如何连接两个文件夹名称？

例如：

```
ws = r'C:\Temp' 
folder = "Test" 
```

我想得到一个结果，`c:\Temp\Test`但我所做的一切都会导致`c:\TempTest`.

我不能使用`+ "\"`，因为它是无效的操作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T06:58:59.160

用于[`os.path.join`](http://docs.python.org/library/os.path.html?highlight=path#os.path.join)此。

```
os.path.join(r'C:\Temp', 'Test') 
```

# sql - 在数据库中使用序列的原因是什么？

> ID：12890615
> 
> 赞同：3
> 
> 时间：2012-10-15T06:53:39.403
> 
> 标签：sql, database, hibernate, relational-database

我是 DB/Hibernate 的新手并找到了代码：

```
@SequenceGenerator(name = "entSeq", allocationSize = 5, sequenceName = "CODE_SEQ")
...
    @ID
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "entSeq")

```

为主键设置顺序。

为什么序列用于主键的值？解决了哪些目标：

*   提高性能
*   添加约束，一些检查
*   限制ID整数值的可能取值范围，为什么要这样做？
*   为什么要从1开始数？

我在以下内容中阅读了有关语法和用法的信息：

*   [http://msdn.microsoft.com/en-us/library/ff878091.aspx](http://msdn.microsoft.com/en-us/library/ff878091.aspx)
*   [http://www.techonthenet.com/oracle/sequences.php](http://www.techonthenet.com/oracle/sequences.php)

但没有找到我的问题的答案。

**更新：**

我喜欢阅读：

*   [http://www.oracle.com/technetwork/products/rdb/0307-sequences-130053.pdf](http://www.oracle.com/technetwork/products/rdb/0307-sequences-130053.pdf) 使用 SQL 指南：序列号生成器

其中表明数据库理论存在问题，如何获取主键的唯一 ID。这意味着我可以在不为我自己的主键提供值的情况下**插入表：**

```
    插入供应商
    （供应商 ID，供应商名称）
    价值观
    （supplier_seq.nextval，“卡夫食品”）；

```

但我希望此功能必须存在于所有数据库中，而不会强迫我提供主键值......

我觉得对吗？

**更新2：**

回答为什么使用**START WITH**：

*在将序列添加到现有数据库时，此子句很有用。当应用程序正在使用较旧的方案并且已经消耗了合法范围内的一些值时，此子句可用于跳过那些消耗的值。MINVALUE 和 MAXVALUE 用于指定合法范围，但 START WITH 将在该范围内启动序列使用，以便以前生成的值不会再次出现。*

**UPDATE3:** **序列** 提供[http://en.wikipedia.org/wiki/Surrogate_key](http://en.wikipedia.org/wiki/Surrogate_key)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:06:50.740

从历史上看，有两个主要原因。

*   避免在大表中使用 ON UPDATE CASCADE 出现性能问题。
*   避免在广泛的自然键上连接时出现性能问题。

Oracle 甚至不支持 ON UPDATE CASCADE，因此更新用于外键引用的值比在其他平台上更麻烦。

考虑到相同大小的表格，如今这些性能“问题”比 20 年前要严重得多。（硬件现在快了很多。）但我们现在处理的表似乎比 20 年前要大得多。

这种性能调整有一些不良的副作用。

*   与精心选择的自然键和 ON UPDATE CASCADE 相比，您通常需要更多的连接。您可能需要如此多的连接，以至于连接比磁盘读取成本更高。
*   当您有 20 或 30 个连接时，更容易迷失在连接中。
*   行更难快速理解。（读作 {1, 7, 13, 255, 438} 的行比读作 {1, library, checkout, 255, 'A book is your friend'} 的行更难理解。）
*   通常，数据库设计者指定一个 ID 号作为主键，但不设置任何其他 UNIQUE 约束。这使得 ID 号成为行标识符，而不是行所代表的真实事物的标识符。这可能是个*大*问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:58:24.993

您*不能*依赖所有数据库的自动生成的密钥。与大多数其他数据库不同，Oracle 不提供可用于生成顺序主键值的自动递增数据类型。
但是，使用序列和触发器可以实现相同的效果。

# c - 如何编写递归打印程序

> ID：12890621
> 
> 赞同：-4
> 
> 时间：2012-10-15T06:54:12.580
> 
> 标签：c, recursion

大师们，

我想知道如何编写一个打印的递归函数

1
12
123
1234
...
......

例如： display(4) 应该打印

1
12
123
1234

## 代码

```
#include <stdio.h>

void print(int n)
{
        if(n != 0)
        {
                print(n-1);
                printf("\n");
                print(n-1);
                printf("%d",n);
        }
}
int main()
{
        print(3);
} 
```

输出
1

12

1

123

## 问题

我想编写一个**纯递归** *（没有任何循环）*函数，但无法过滤不需要的打印。希望有人能帮帮我！！！

## 更新

谢谢大家的回答。从给出的所有评论看来，我们似乎可以只用递归编写一个，并且需要一个循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T07:00:00.840

要定义递归函数，您必须做三件事：

1.  **定义函数的作用。**在这种情况下，它打印从 1 到*n*的数字。
2.  **定义递归调用是什么。**下一次会发生什么？最简单的方法是自下而上地思考；在这种情况下，在前面的每一行上，它打印的数字最多比前一行少一个。因此，每次再次调用该函数时，都希望以比前一个数字小一的方式调用它。
3.  **定义您的停止条件。**我应该什么时候停止递归？在这种情况下，一旦你达到数字 1，这将是你的最后一次迭代。这意味着，我们想要调用递归函数*，直到*达到这个停止条件——或者换句话说，*当*n 大于 1 时。

因此，我们最终得到以下算法：

```
function display(n):
    if(n > 1):
        display(n-1);

    print 1..n; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T06:59:34.740

编辑：好的，我根据@lc 的指导改进了我的答案。

```
void print_recursive(unsigned int num) {
    if (num > 1) {
        print_recursive(num - 1);
    }
    for (unsigned int i = 0; i < num; i++) {
        printf("%d ", (i + 1));
    }
    printf("\n");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-23T00:18:42.847

这个问题已经很老了，但**没有一个答案能回答实际问题**，即。仅使用递归解决 C 中的问题，无需显式循环。

这是通过修复原始代码中存在的误解（“打印”的两个可能功能之间的混淆）而获得的简单解决方案。没有显式循环。

```
#include <stdio.h>

void countto(int n)
{
        if(n != 0)
        {
        countto(n-1);
        printf("%d",n);
        }
}

void triang(int n)
{
        if(n != 0)
        {
                triang(n-1);
                printf("\n");
                countto(n);
        }
}

int main()
{
        triang(4);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T07:22:42.543

我们继续使用参数 1 递归调用 PrintIt()，直到 x < 1。然后，当 x < 1 时，每个调用都将以相反的顺序返回。在每次返回时，我们打印从 1 到 x 的行。

```
#include "stdio.h"

void PrintIt( int x )
{
    int i;
    if( x > 1 )
    {
        PrintIt( x - 1 );
        printf("\n");
    }

    for( i = 1; i < x+1; i++)
    {
        printf("%d", i);
    }

    return;
}

int main(int argc, char *argv[])
{
    PrintIt( 4 );
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T07:27:39.380

这里使用的递归函数是func(int)。最初，该值是从 main() 程序传递的。递归一直发生，直到我们达到退出条件，在这种情况下为 val=0。一旦我们达到那个水平，我们将倒数第二帧移动一个打印“1”。遵循相同的模式以获得序列“1 2”。. . “1 2 3”。. . “1 2 3 4”

```
int func(int val){

        int temp,i;

        if( val == 0 )
        {
                val++;
                return val;
        }
        else
        {
                val--;
                temp=func( val );

                for (i=1;i<=temp;i++)
                {
                        printf("%d",i);
                }
                printf("\n");

                temp++;
                return temp;
        }
}

int main(){

        int value=4, result;

        result=func(value);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-29T22:48:11.640

只是为了好玩，这是一个纯粹的递归解决方案。它在 python 中，无论如何它实际上是伪代码。（为了清楚起见，非pythonic换行符）。

```
def loop(max, row=1, col=1):
    if col <= row:
        print col,
        loop(max, row, col+1)
    elif row < max:
        print "\n",
        loop(max, row+1, 1)
    else:
        print "\n", 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-21T10:26:16.010

```
#include<stdio.h>
void print_num(int x);
int n;
void main(){
printf("Enter number of lines: ");
scanf("%d",&n);
print_num(1);
}
void print_num(int x){
int i;
for(i=1;i<=x;i++){
printf("%d",i);
 }
if(x<n){
printf("\n");
x++;
print_num(x);
 }
} 
```

这很简单，对吧？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-29T15:45:14.810

```
void display(int k)
    {
         if (k < 1) { return; }
         display(k-1);
         for (int i = 1; i <= k; i++)
         {
         cout << i;
         }
         cout << endl;

    }

    int main()
    {
        int a = 4;
        display(a);
        return 0;
    } 
```

# android - 检索 json 数据并将其绑定到 listview

> ID：12890622
> 
> 赞同：-6
> 
> 时间：2012-10-15T06:54:21.900
> 
> 标签：android, web-services

> **可能重复：**
> [JSON 对象到 listView](https://stackoverflow.com/questions/8473561/json-object-to-listview)

我在服务器上有一个 json 数据，想检索它并在我的 android listview 中显示它..对不起，如果这是重复的问题，请给我一些建议，从 stratch 开始

答案将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:58:54.500

这可能会帮助你..

你的 Actmain 课程

Actmain.java

```
public class Actmain extends Activity {

// url to make request
private static String url = "http://api.androidhive.info/contacts/";

// JSON Node names
private static final String TAG_CONTACTS = "contacts";
private static final String TAG_ID = "id";
private static final String TAG_NAME = "name";
private static final String TAG_EMAIL = "email";
private static final String TAG_ADDRESS = "address";
private static final String TAG_GENDER = "gender";
private static final String TAG_PHONE = "phone";
private static final String TAG_PHONE_MOBILE = "mobile";
private static final String TAG_PHONE_HOME = "home";
private static final String TAG_PHONE_OFFICE = "office";
private ArrayList<HashMap<String, String>> _alistHashmap; 
private Clsgetjson getjson;

// contacts JSONArray
private JSONArray Jarray = null;
private JSONObject jobj;
private Listview lv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

// Creating JSON Parser instance
getjson = new Clsgetjson();

 _alistHashmap = new ArrayList<HashMap<String, String>>();

lv=(listview)findviewbyid(R.id.lv);

 jobj= getjson.getJSONFromUrl(url);

  try {
        // Getting Array of Contacts
        Jarray = json.getJSONArray(TAG_CONTACTS);

        // looping through All Contacts
        for(int i = 0; i < contacts.length(); i++){
            JSONObject jobject = Jarray.getJSONObject(i);

            // Storing each json item in variable
            String id = jobject.getString(TAG_ID);
            String name = jobject.getString(TAG_NAME);
            String email = jobject.getString(TAG_EMAIL);
            String address = jobject.getString(TAG_ADDRESS);
            String gender = jobject.getString(TAG_GENDER);

            // Phone number is agin JSON Object
            JSONObject phone = jobject.getJSONObject(TAG_PHONE);
            String mobile = phone.getString(TAG_PHONE_MOBILE);
            String home = phone.getString(TAG_PHONE_HOME);
            String office = phone.getString(TAG_PHONE_OFFICE);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_NAME, name);
            map.put(TAG_EMAIL, email);
            map.put(TAG_PHONE_MOBILE, mobile);

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    //now set your adapter to listview (you can do this under buttons onclick event)

String[] from=new String[] { TAG_NAME, TAG_EMAIL, TAG_PHONE_MOBILE };
int[] to= new int[] {R.id.name, R.id.email, R.id.mobile }

SimpleAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.raw_lv,from,to);

lv.setAdapter(adapter); 
```

现在 Clsgetjson.java

```
public class Clsgetjson {

static JSONObject jObj = null;
static String strjson = "";

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();

strjson=EntityUtility.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    // try parse the string to a JSON object
    try {

        jObj = new JSONObject(strjson);

    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

或带参数

```
 List<NameValuePair> nvp = new ArrayList<NameValuePair>(2);
    nvp.add(new BasicNameValuePair("function", "login"));
    nvp.add(new BasicNameValuePair("uname", username));
    nvp.add(new BasicNameValuePair("pwd", pass))); 
```

在请求中添加这个

```
 if(nvp!=null)

        hpost.setEntity(new UrlEncodedFormEntity(nvp)); 
```

其他都和上面一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:06:00.303

首先，您将要获取您的 JSON

```
import java.io.IOException; 
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import android.util.Log;
public class WebServiceConnector
{

/**
 * Makes the HTTP GET request to the provided REST url 
 * @param requestUrl the URL to request
 * @return The string of the response from the HTTP request
 */
public String callWebService(String requestUrl)
{
    String deviceId                    = "Android Device";

    HttpClient httpclient            = new DefaultHttpClient();  
    HttpGet request                    = new HttpGet(requestUrl);  
    request.addHeader("deviceId", deviceId);  

    ResponseHandler handler    = new BasicResponseHandler();  
    String result                    = "";  

    try
    {  
        result = httpclient.execute(request, handler);  
    }
    catch (ClientProtocolException e)
    {  
        e.printStackTrace();
        Log.e(TAG, "ClientProtocolException in callWebService(). " + e.getMessage());
    }
    catch (IOException e)
    {  
        e.printStackTrace();
        Log.e(TAG, "IOException in callWebService(). " + e.getMessage());
    }

    httpclient.getConnectionManager().shutdown(); 
    Log.i(TAG, "**callWebService() successful. Result: **");
    Log.i(TAG, result);
    Log.i(TAG, "*****************************************");

    return result;
}
} 
```

然后你需要解析那个json。有几个 JSON 解析器，JAXB，Jackson ......如果它是简单的结构，最简单的可能是使用 org.json 类（已经包含在 Android 中）像 org.json.JSONArray，org.json 自己解析它。 JSONObject 和 org.json.JSONException。从 json 生成您的数组/项目列表，然后像往常一样使用 ArrayAdapter 将其连接到列表视图。快乐编码！

# c++ - C ++：同一对象的基指针与派生指针比较

> ID：12890624
> 
> 赞同：11
> 
> 时间：2012-10-15T06:54:41.100
> 
> 标签：c++, pointers, multiple-inheritance

例子：

```
class A{
    int x;
};
class B{};
class C : public A, public B {};

C c;
A* a = &c;
B* b = &c; 
```

当我检查 &c 和 b 的值时，它们是不同的，因为 b 在内存中的 a 之后，但是当我评估 &c==b 时，它们是相同的，为什么会这样？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T07:08:52.663

在表达式`&c == b`中，两个操作数必须被强制为相同的类型。在这种情况下`&c`， (a `C*`) 可以转换为`B*`as`B`的可访问基类`C`。这与发生的转换完全相同，`B* b = &c`因此结果值相同并且比较返回 true。

# c# - Windows 8 - 在代码隐藏中动画自定义属性

> ID：12890627
> 
> 赞同：7
> 
> 时间：2012-10-15T06:54:47.293
> 
> 标签：c#, wpf, windows-8

基本上，我想制作一堆形状并让它们动画化。所以我想出了以下自定义类：

```
public class FunkyShape : DependencyObject
{
    public double Animator
    {
        get { return (double)GetValue(AnimatorProperty); }
        set { SetValue(AnimatorProperty, value); }
    }

    public static readonly DependencyProperty AnimatorProperty =
        DependencyProperty.Register("Animator", typeof(double), typeof(FunkyShape), 
        new PropertyMetadata(0, new PropertyChangedCallback(Animator_Changed)));

    private static void Animator_Changed(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        double delta = (double)e.NewValue - (double)e.OldValue;

        ((FunkyShape)d).ProcessDelta((double)e.NewValue, delta);
    }

    private void ProcessDelta(double val, double delta)
    {
        Holder.Width = val;
        Holder.Height = val;

        // Keep shape centered
        HolderPosition.X = delta / 2;
        HolderPosition.Y = delta / 2;
    }

    private Shape Holder;
    public TranslateTransform HolderPosition
    {
        get { return (TranslateTransform)Holder.RenderTransform; }
    }

    public FunkyShape(Canvas playground, Shape shapeToInit)
    {
        Holder = shapeToInit;

        Holder.Width = 10;
        Holder.Height = 10;
        Holder.Fill = new SolidColorBrush(Colors.Blue);
        Holder.HorizontalAlignment = Windows.UI.Xaml.HorizontalAlignment.Center;
        Holder.RenderTransform = new TranslateTransform()
        {
            X = 500,
            Y = 500
        };
        Holder.RenderTransformOrigin = new Point(0.5, 0.5);

        // init done
        playground.Children.Add(Holder);

        Animate();
    }

    public void Animate()
    {
        DoubleAnimation g1 = GrowAnimation();

        Storyboard sb = new Storyboard();
        Storyboard.SetTarget(g1, this);

        // CAN'T FIND ANIMATOR PROPERTY
        Storyboard.SetTargetProperty(g1, "Animator");

        sb.Children.Add(g1);

        sb.Begin(); // THROWS EXCEPTION
    }

    private static DoubleAnimation GrowAnimation()
    {
        DoubleAnimation growAnimation = new DoubleAnimation();
        growAnimation.Duration = TimeSpan.FromMilliseconds(3000);
        growAnimation.From = 0;
        growAnimation.To = 100;
        growAnimation.AutoReverse = true;
        growAnimation.EnableDependentAnimation = true;
        growAnimation.RepeatBehavior = new RepeatBehavior(5);
        return growAnimation;
    }
} 
```

但是，当我尝试创建该类的实例并将其添加到画布时，我得到 Exception - Storyboard.Being() 抛出它并告诉我它找不到 Animator 属性。

那么 - 我做错了什么？

**编辑：** 3 次代码更改后 - 它仍然无法正常工作；我收到“无法解析指定对象上的 TargetProperty Animator”错误。因此，如果有人知道答案 - 请通过修改代码来提供帮助。谢谢！

**编辑：**好的，在将头撞到墙上 24 小时后，有一些进展 - 如果我通过 XAML 添加形状，它会动画，但如果我通过后面的代码（Canvas.Children.Add）添加它，它就不起作用。让我看看我是否能找出原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T22:18:19.730

好的，

我已经找到了解决框架中显然是一个错误的解决方法（尽管我确信一些 MS 员工会发布回复并说这是一个功能/它是设计的）。需要做几件事：

1.  添加默认/无参数构造函数
2.  将 FunkyShape 的基类更改为 UserControl。
3.  打开要在其中添加形状的 Page 类的 XAML 视图
4.  在 Canvas XAML 中添加一个 FunkyShape 实例作为子项（例如 <tm:FunkyShape />）。**没有这个就行不通。**
5.  在代码隐藏中创建一个 FunkyShape 实例，将其添加到画布，启动动画并享受它的工作原理
6.  切换到错误更少的技术。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T17:15:22.300

在 Windows 8 中，如果不将 enabledependentanimation 属性设置为 true，则无法为自定义属性设置动画。这是因为默认情况下禁用了非确定性动画。

> 参考：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.animation.pointanimation.enabledependentanimation.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.animation.pointanimation.enabledependentanimation.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T07:03:11.713

是的，您必须将此属性定义为依赖属性，而不仅仅是常规的 CLR 属性。这涉及相当多的简单样板代码。有关完整示例，请参见博客文章：

[http://timheuer.com/blog/archive/2012/03/07/creating-custom-controls-for-metro-style-apps.aspx](http://timheuer.com/blog/archive/2012/03/07/creating-custom-controls-for-metro-style-apps.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-06T21:54:29.267

好的，我也有这个问题，但是我不想在我的类中包含一个公共的无参数构造函数，所以我找到了另一种方法。

基本上，问题在于 WinRT 是一个原生平台，它不能对 .NET 代码进行反射。这就是 WinRT 应用程序的生成过程生成有关 XAML 中使用的类型的元数据的原因（您可以在 中找到相关代码`obj/(Debug|Release)/XamlTypeInfo.g.cs`）。

如果在 XAML 中从未使用过某个类型，则不会生成有关此类型的元数据，这意味着（除其他外）您无法为该类型的属性设置动画。

如果您正在编写一个类库，您可以只包含一个 XAML 资源字典并声明该类型的一个虚拟实例；它将导致生成元数据。但是，它要求该类型有一个公共的无参数构造函数，这可能是不可取的。

所以还有另一种解决方案：自己提供元数据。有几个接口要实现，并且它们有很多成员，因此手动执行可能会非常乏味。幸运的是，您不必这样做！以下是您可以执行的操作：

*   向类添加公共无参数构造函数（临时）
*   创建一个 XAML`ResourceDictionary`并在其中声明一个类的实例（如上所述）
*   将文件复制`XamlTypeInfo.g.cs`到您的项目中（我将其重命名为`XamlTypeInfo.cs`）
*   将对构造函数的调用替换为`throw new NotImplementedException()`
*   删除`ResourceDictionary`文件
*   删除公共无参数构造函数

大功告成，动画现在可以正常工作了。

这个过程仍然很繁琐，所以有一个工具来为我们完成工作会很好......

* * *

编辑：*更*简单的解决方案：将[`[Bindable]`](http://msdn.microsoft.com/EN-US/library/windows/apps/windows.ui.xaml.data.bindableattribute.aspx)属性应用于类。它使元数据生成器将类型考虑在内，即使它未在 XAML 中使用。（忽略文档说它适用于 C++ 类型的事实；它也适用于 C# 类）

# checkbox - 自定义 NSIS 安装程序的完成页面

> ID：12890628
> 
> 赞同：1
> 
> 时间：2012-10-15T06:54:50.887
> 
> 标签：checkbox, installation, nsis

我想在安装程序的完成页面中添加一个复选框。我在完成页上已经有两个复选框，一个用于显示自述文件，另一个用于打开另一个链接。现在我想添加第三个复选框来打开我的应用程序的主页。

我正在遵循这个问题中给出的步骤，因为这正是我想要实现 的目标[自定义现有的 NSIS MUI2 页面](https://stackoverflow.com/questions/6531115/customizing-an-exsisting-nsis-mui2-page)

但第三个复选框没有出现在完成页面上。我正在使用 MUI2。

这是我的代码

```
 ```
!include "MUI2.nsh" 

var newCheckBox
Function showNewCheckbox
${NSD_CreateCheckbox} 50u 60u 100% 10u "&Launch Google"
Pop $newCheckBox
FunctionEnd

Function launchNewLink
${NSD_GetState} $newCheckBox $0
${If} $0 <> 0
    ExecShell "open" "http://google.com"
${EndIf}
FunctionEnd

Function LaunchLink
  ExecShell "open" "http://yahoo.com"
FunctionEnd

!define MUI_FINISHPAGE_NOAUTOCLOSE
!define MUI_FINISHPAGE_RUN
!define MUI_FINISHPAGE_RUN_NOTCHECKED
!define MUI_FINISHPAGE_RUN_TEXT "Open yahoo"
!define MUI_FINISHPAGE_RUN_FUNCTION "LaunchLink"
!define MUI_FINISHPAGE_SHOWREADME_NOTCHECKED
!define MUI_FINISHPAGE_SHOWREADME "${README_FILE}"
!define MUI_PAGE_CUSTOMFUNCTION_SHOW showNewCheckbox
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE launchNewLink
!insertmacro MUI_PAGE_FINISH 
``` 我错过了什么吗？

            回答 #1

赞同：1

时间：2012-10-15T07:45:31.867

如果`$newCheckBox`是数字！= 0 表示控件已创建，也许它就在左侧图像的后面？尝试 120u 175u 作为前两个数字。

如果您不需要复选框，则可以使用以下链接：

```
!define MUI_FINISHPAGE_LINK "My website"
!define MUI_FINISHPAGE_LINK_LOCATION "http://example.com"
!insertmacro MUI_PAGE_FINISH 
```

```

# c++ - 使用索引技巧进行多维数组初始化

> ID：12890632
> 
> 赞同：2
> 
> 时间：2012-10-15T06:55:07.620
> 
> 标签：c++, templates, c++11

我的问题是指我之前针对一维数组提出的问题：

[for 循环消除](https://stackoverflow.com/questions/12794114/for-loop-elimination)

有人可以帮我将索引技巧的使用扩展到多维数组，例如在这个例子中：

```
template<unsigned...> struct indices
{
};

template<unsigned M, unsigned... Is> struct indices_gen
  : indices_gen<M - 1, M - 1, Is...>
{
};

template<unsigned... Is> struct indices_gen<0, Is...> : indices<Is...>
{
};

template <typename T>
struct example
{
  template<typename ...U, typename
    = typename std::enable_if<all_of<std::is_same<U, T>...>::value>::type>
  example(U... args)
  {
    static_assert(3 * 2 == sizeof...(U),
      "wrong number of arguments in assignment");
    assign(indices_gen<M * N>(), args...);
  }

  template<size_type... Is, class... U>
  void assign(indices<Is...>, U... args)
  {
    [](...){}(((&array[0][0])[Is] = args)...);
  }

  T array[3][2];
};

int main()
{
  example<int> ex(1, 2, 3, 4, 5, 6);
  return 0;
} 
```

目前我取决于要求，即数组是连续的，但我想`array`使用成对的索引进行分配，而不仅仅是一个索引（这样我就可以支持数组以外的类型，特别是覆盖的类型`operator[]`）。如果我使用 2 个参数包进行赋值，我将只在索引 (0, 0)、(1, 1)、... 处进行赋值，当`array`不同（如示例中所示）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:50:03.413

通过更改代码以访问数组，而不是索引生成，这可以变得更容易。您基本上想要的是一维到二维的访问映射。

通常，当人们根据 1D 数组^(†</sup> 实现 2D 数组时，他们需要相反的方式（2D 到 1D）：)

```
template<class T, unsigned M, unsigned N>
struct md_array{
  T elems[M * N]; // same layout as 'T elems[M][N];'
}; 
```

`i`那么从 2D 索引得到 1D 索引的公式`(x,y)`是`i == x * N + y`。如果我们`elems`将上面的 1D 想象为 2D 数组（使用`M == 2`and `N == 3`），我们可以解释这一点：

```
 0, 1, 2, 3, 4, 5 // indices (i)
[a, b, c, d, e, f]
v // we want them as M (2) packs of N (3) elements
 0, 1, 2   0, 1, 2 // element indices (y)
[a, b, c] [d, e, f]
\___0___/ \___1___/ // pack indices (x)
v // fusing the packs back together, we can see that we have
  // a constant offset for the packs, which is the N (3) times x
0*3+0, 0*3+1, 0*3+2, 1*3+0, 1*3+1, 1*3+2
[ a,     b,     c,     d,     e,     f ] 
```

因此，我们得到`i == x * N + y`。我们现在需要解决这个公式，不是 for`i`而是 for`x`和`y`。对于`x`，这很容易（使用数学符号）：

```
i = x * N + y | -y
i - y = x * N | *(1/N)
i - y
----- = x
  N 
```

所以`x == (i - y) / N`。现在，可悲的是，我不知道如何`y`使用纯数学来解决这个问题，但我们不需要那个。查看元素索引，我们可以看到它们环绕`N`，并且可以使用模运算符轻松完成。因此，`y == i % N`.

现在我们可以实现一个方法，该方法采用线性索引`i`并从中返回已解决的元素`(x, y)`：

```
template<unsigned I>
T& get(){ constexpr auto y = I % 3; return array[(I-y)/3][y]; } 
```

并概括为：

```
template<unsigned I>
T& get(){ constexpr auto y = I % N, x = (I-y)/N; return array[x][y]; } 
```

用于`constexpr`确保所有计算在编译时完成。现在你可以简单地写`assign`如下：

```
template<unsigned... Is, class... U>
void assign(indices<Is...>, U... args)
{
  [](...){}((get<Is>() = args)...);
} 
```

QED（[现场示例。](http://liveworkspace.org/code/665f082a4270f863fb3bb22bc68df9e9)）

* * *

† 现在，您可以通过将 2D 数组实际实现为 1D 数组来简化此操作。:) 这样，您可以直接使用`(array[Is] = args)...`并在其他情况下使用执行映射的简单访问函数：

```
T& get(unsigned x, unsigned y){ return array[x * N + y]; } 
```

[活生生的例子。](http://liveworkspace.org/code/26ca3bdd660887bab31bdd471451a378)

# java - 使用正则表达式从预定义的句子中提取某些单词

> ID：12890638
> 
> 赞同：0
> 
> 时间：2012-10-15T06:55:34.077
> 
> 标签：java, regex

我有看似简单的任务，但我没有使用正则表达式的经验。
我必须使用预定义的消息文本解析 SMS 正文，以获取某些信息。
这是一个例子：

> 名字！{FirstName} {LastName} isikukoodiga {PersonCode} on sõlminud EMT Reisikindlustuse lepingu numbriga {PolicyNumber}，mis kehtib alates {CoverStartDate} kell {CoverStartTime} kuni {CoverEndDate} kell {CoverEndTime} (Eesti aja järgi)。Hind：{PremiumEur} 欧元。Tutvu tingimustega ({Terms}) [http://emt.ee/kindlustus](http://emt.ee/kindlustus)。Kahjukäsitluse 号码 +3727330700。

我必须解析出花括号中的所有内容。

我在Java中想出了这样的东西：

```
public static final String REGEX_CONFIRMATION = "Täname! (.*) (.*) isikukoodiga (.*) on sõlminud EMT Reisikindlustuse lepingu numbriga (.*), mis kehtib alates (.*) kell (.*) kuni (.*) kell (.*) \\(Eesti aja järgi\\). Hind: (.*) eurot. Tutvu tingimustega \\((.*)\\) http://emt.ee/kindlustus. Kahjukäsitluse number \\+3727330700."; 
```

但它只解析出以下组：

> {MARIS}、{PLOTS}、{17204046521}、{22414152}、{01.10.2002}、{13:07}、{02.10.2002}、{23:59}。

如您所见`{Terms}`，缺少。而且我似乎无法弄清楚问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:57:07.077

使用这种模式怎么样？

```
\{.*?\} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:57:18.113

简单地使用不是更有意义吗

```
\{[^{}]*\} 
```

作为你的正则表达式？在字符串中，您需要将其写为

```
"\\{[^{}]*\\}" 
```

**解释：**

```
\{      # Match an opening brace
[^{}]*  # Match any number of characters except braces
\}      # Match a closing brace 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:20:57.277

对我来说似乎是正确的。使用 DOTALL（在其他情况下可能是 MULTILINE）选项。DOTALL 可以添加为`"(?s)Täname!..."`. 然后`".*"`还映射换行符。

由于找到了先前的匹配项，因此可能就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T07:32:06.913

当您在 {TERMS} 部分中包含括号时，它是否有效？代替：

```
String regex = "...Tutvu tingimustega \\((.*)\\) http://emt.ee/kindlustus. ..."; 
```

你可以试试：

```
String regex = "...Tutvu tingimustega (.*) http://emt.ee/kindlustus. ..."; 
```

或者取决于您在 {TERMS} 字符串中的内容，您可以将 _ **.*** _ 更改为 _ **[^)]*** _ 这样您会发现零到 N 个不结束括号的字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T07:09:58.780

[http://www.java2s.com/Code/Java/Regular-Expressions/Findallmatches.htm](http://www.java2s.com/Code/Java/Regular-Expressions/Findallmatches.htm)

连同以下正则表达式

```
\{(.*?)\} 
```

# ruby - 在模块化 Sinatra 应用程序中访问 irb

> ID：12890641
> 
> 赞同：1
> 
> 时间：2012-10-15T06:55:53.423
> 
> 标签：ruby, sinatra, irb

我正在构建一个像这样子类化 Sinatra 的应用程序：

```
require 'rubygems'
require 'sinatra/base'
require 'sinatra/assetpack'

class App < Sinatra::Base
  ...

  run!
end 
```

我怎样才能访问irb？以这种方式执行 sinatra 时不解析选项，如何以编程方式打开 irb shell？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-19T09:59:35.437

只需键入如下（在 shell 提示符下）：

```
irb -r ./my_app.rb 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-31T19:43:01.617

我有点困惑你是想从你的应用程序中打开一个 IRB 会话（？）还是使用 IRB 来调试你的 Sinatra 项目？

对于调试基于 Rack 的应用程序（例如 Sinatra），我喜欢使用[**racksh gem**](http://rubygems.org/gems/racksh)，它“*就像 Rails 中的脚本/控制台*”用于 Rack 应用程序。与 IRB 相比，它的主要优点是 racksh 将整个应用程序环境加载到 shell 中，使调试变得轻而易举。

来自 racksh 的[**Github 页面**](https://github.com/sickill/racksh)：“它的目的是让开发人员能够自省他的应用程序和/或进行一些初始设置。例如，您可以运行 DataMapper.auto_migrate！或向 /users/666 发出请求并检查响应详细信息。它的主要目的是在没有类似控制台组件的应用程序中（即使用 Sinatra 构建的应用程序），但所有框架都可以从交互式 Rack 堆栈和请求自省中受益。”

但是，racksh 要求您的应用程序有一个`config.ru`文件，因此您必须重新编写您的应用程序：

```
# in config.ru
require 'rubygems'
require 'sinatra/base'
require 'sinatra/assetpack'
require 'app.rb'

# in app.rb
class App < Sinatra::Base
  ...

  run!
end 
```

然后在您的应用程序文件夹中（config.ru 所在的位置）：

```
$ gem install racksh # or add gem 'racksh' to your Gemfile and run bundle
$ racksh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:18:37.697

[使用Sinatra](http://en.wikipedia.org/wiki/Sinatra_%28software%29)和`binger`gem检查这个简单的 Microsoft 必应搜索界面。如果您按照那里的说明进行操作，您会更好地理解。

首先，创建一个 Gemfile 并添加：

```
source "https://rubygems.org"

gem 'sinatra'
gem 'binger' 
```

然后运行`bundle`将生成的命令`Gemfile.lock`。然后创建一个`config.ru`文件，并通过示例添加：

```
require 'rubygems'
require 'bundler'

Bundler.require

require './app.rb'

run MyApp 
```

你`app.rb`可能看起来像这样：

```
class MyApp < Sinatra::Base

  get '/' do

      @title = "Index" 

      erb:index

  end
end 
```

您必须有一个名为 的文件夹`views`。创建`index.erb`并添加：

```
< % = @title % > 
```

最后，运行`rackup`。

来源：[https ://github.com/thinkphp/sinatra-bing](https://github.com/thinkphp/sinatra-bing)

演示：[http ://sinatra-bing.herokuapp.com/](http://sinatra-bing.herokuapp.com/)

# asp.net-mvc - MVC的ValidateRequest可以在代码中触发吗？

> ID：12890642
> 
> 赞同：0
> 
> 时间：2012-10-15T06:55:54.310
> 
> 标签：asp.net-mvc, actionresult

> **可能重复：**
> [在 ASP.NET MVC 中自己处理验证失败](https://stackoverflow.com/questions/9983322/handle-validation-failures-myself-in-asp-net-mvc)

我有一个接受 HTML 输入的操作方法（可能）。

```
[ValidateInput(false)]
[HttpPost]
public ActionResult Cms(string pageContent)
{
   CmsData = pageContent;
   return Redirect("/home/cms");
} 
```

所以我不希望可怕的“潜在危险请求......”错误导致 POST 崩溃。所以我在`ValidateInput = false`上面设置。

但是，我想在代码中执行相同的检查并对它做出反应（比如发布一条消息说 HTML 是不允许的）而不是崩溃。

我知道我可以运行某种代码黑名单检查，但我宁愿不这样做。我宁愿让 MVC 告诉我，但不要让页面完全崩溃并让我处理错误消息。

简单的？可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:50:34.327

我想问题是关于动态调用`RequestValidator`以了解该值是否不包含任何 html。这不简单！原因是检查的方法是`IsValidRequestString`受**保护的内部虚拟**方法，因此您不能只在外部调用它，而是通过创建自定义方法可以实现这一点（您可能必须创建一个调用受保护方法的公共方法）。`RequestValidator`**[`RequestValidator`](http://jefferytay.wordpress.com/2010/04/15/creating-your-own-custom-request-validation/)**

# android - 仅Android 4.1，Bitmap自动回收

> ID：12890649
> 
> 赞同：5
> 
> 时间：2012-10-15T06:56:20.010
> 
> 标签：android, bitmap, drawable, android-4.2-jelly-bean, recycle

我有一个非常关键的问题。只有Android 4.1，Bitmap会自动回收！我没有在我的代码中调用 recycle() ！我的项目在任何分辨率的其他操作系统版本（〜4.0.3）中都可以正常工作。其他项目也有同样的问题。

所有图像文件都在 drawable-nodpi 文件夹中。我总是调整它们的大小以适应任何设备的分辨率。

```
public Bitmap GetBitmap(int resource){

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inDither = true;
    options.inPurgeable = true;

    Bitmap tmp = null;

    try{
        tmp = BitmapFactory.decodeResource(mResources, resource, options);
    }catch(OutOfMemoryError e){
        options.inSampleSize = 2;
        tmp = BitmapFactory.decodeResource(mResources, resource, options);
    }

    return tmp;
}

public Bitmap GetScaledBitmap(int resource, int width, int height, boolean filter){

    Bitmap tmp = GetBitmap(resource);

    Bitmap img = Bitmap.createScaledBitmap(tmp, width, height, filter);

    tmp.recycle();
    tmp = null;

    return img;
} 
```

* * *

在我的测试中，

*   相同的位图实例，但根据调整值的大小会出现问题。

例如）int 宽度 = **100**；

位图 imgStar = MyResourceManager.getInstance().GetScaledBitmap(R.drawable.star, width, width, true); -> 返回回收的实例。

宽度 = **200** ;

imgStar = MyResourceManager.getInstance().GetScaledBitmap(R.drawable.star, width, width, true); -> 返回普通实例。

*   在不同的分辨率下，imgStar 工作正常，但问题出现在其他位图实例中。同样，当我更改调整大小时，它工作正常。

*   在相同的分辨率下，如果我更改图像文件文件夹的名称，问题会出现在其他位图实例中。可绘制-nodpi -> 可绘制-> 可绘制-ldpi，...，可绘制-xdpi。

*   相同的大小调整值，如果我输入其他资源 ID，它可以正常工作。前任）

整数宽度 = 100；

位图 imgStar = MyResourceManager.getInstance().GetScaledBitmap(R.drawable.star **,** width, width , true); -> 返回回收的实例。

imgStar = MyResourceManager.getInstance().GetScaledBitmap(R.drawable.diamond **,** width, width, true); -> 返回普通实例。

请问……我该怎么办？！T^T

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T01:34:22.807

您从不同大小获得不同结果的原因可能是因为 createScaledBitmap 将返回原始对象，如果它与您缩放到的大小相同。

我有同样的问题，做和你一样的事情。我能够以这种方式修复它：

```
public Bitmap GetScaledBitmap(int resource, int width, int height, boolean filter) {

    Bitmap tmp = GetBitmap(resource);
    Bitmap img = Bitmap.createScaledBitmap(tmp, width, height, filter);
    //copy the image to be sure you are not using the same object as the tmp bitmap
    img=img.copy (Bitmap.Config.RGB_565,false);
    tmp.recycle();
    tmp = null;
    return img;
} 
```

在这里，我复制了位图以确保在回收 tmp 位图之前它不仅仅是对 tmp 位图对象的引用。当然，您可以使用您需要的任何位图配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-07T18:56:42.247

我相信 XdebugX 在他的发现中是正确的，尽管您不需要创建副本。只需检查调整大小的位图和原始位图之间的内存位置是否相同。

```
public Bitmap GetScaledBitmap(int resource, int width, int height, boolean filter){

    Bitmap tmp = GetBitmap(resource);
    if (tmp == null) {
        return null;
    }

    Bitmap img = Bitmap.createScaledBitmap(tmp, width, height, filter);

    /***
     * Bitmap#createScaledBitmap will return the original object
     * if it is the same size you are scaling to.
     */
    if (tmp != img) {
        Log.d(TAG, "Full size image recycled");
        tmp.recycle();
    } else {
        Log.w(TAG, "Resized bitmap was the same as the fullsize bitmap");
    }

    return img;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:58:36.280

我宁愿建议在回收之前尝试检查位图是否已经回收：

```
if (!tmp.isRecycled()) tmp.recycle(); 
```

# php - zend framework 1.9中检查上传文件正确性的实践

> ID：12890650
> 
> 赞同：0
> 
> 时间：2012-10-15T06:56:20.917
> 
> 标签：php, zend-framework

我目前正在尝试在 php 应用程序（与 zend 框架 1.9 结合）中启动并运行上传屏幕。

我知道如何自己上传，也知道如何对文件进行一些基本验证。

我想知道的是，确保文件已正确上传的常用方法是什么。

我查看了验证器示例（尤其是 MD5 示例）。例子：

```
$upload = new Zend_File_Transfer();
$upload->addValidator('Md5', false, '3b3652f336522365223'); 
```

但是根据我的理解，您已经需要知道 MD5 应该是什么结果。因此，用户必须将该信息放入上传屏幕，以便它可以与文件一起传输（但可能是我弄错了）。

所以我的问题是：在 zend-framework 中有没有什么方法可以验证文件而不需要用户的额外输入（除了文件本身）？或者那里使用的做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:56:07.623

在我看来，没有必要这样做。这是[TCP 协议](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)、Web 浏览器和 PHP 引擎的职责。

TCP 保证服务器收到的数据包与客户端发送的数据包相同。测试 Web 浏览器以确保正确处理 HTTP 上传以正确上传文件，类似地测试 PHP 以确保 HTTP 文件上传以与上传的相同内容保存到服务器。

做这样的事情只是额外的工作，可能永远不会导致错误。要做到这一点，您可能必须使用允许 Javascript 读取本地文件的新 HTML5 功能，然后在 JS 中实现一些哈希函数，因此客户端必须拥有支持文件 API 和支持 HTML5 的浏览器。

# python - 在python中检查数据是否为json格式

> ID：12890652
> 
> 赞同：1
> 
> 时间：2012-10-15T06:56:37.303
> 
> 标签：python, regex, json, unit-testing

> 这是我的测试类，我正在尝试对我的方法进行单元测试，即 createaccount()

```
class CreateAccountTest1(unittest.TestCase):
    def testCreateAccount_1(self,data):
        text = "{'user_id':'abc123','action':'add','names':['hello','world']}"
        regex = !(/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(text.replace(/"(\\.|   [^"\\])*"/ g, ''))) && eval('(' + text + ')')
        self.assertRegexpMatches(text, reg, 'my msg') 
```

> createaccount() 方法是

```
class CreateAccountClass():
    def CreateAccount(self,data): 
```

现在我必须检查参数是否`createaccount()`为 json 格式。

如果我通过`data=`

```
 { "_id" : "user@gmail.com", "H_id" : "smsg0", "name" : "vish", "passwrd" : "xj45cd" } 
```

它应该检查它是否是 json，我确信这是 json 格式。现在在我的方法中`createaccount()`，它应该检查是否`data`是 json 格式，如果不是，它应该打印错误消息，如果它适用于`regex`？或任何建议，谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T07:02:20.443

```
import json
try:
  json.loads(data)
except ValueError:
  print("data was not valid JSON") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:05:41.800

看看[这个答案](https://stackoverflow.com/questions/2583472/regex-to-validate-json)。另外，我建议不要使用正则表达式执行此检查，只需使用标准解析器并使用[json.load检查错误](http://docs.python.org/library/json.html#json.JSONDecoder)

# java - 从 HTTP 输入流构建时 Javax xml 解析器卡住

> ID：12890653
> 
> 赞同：1
> 
> 时间：2012-10-15T06:56:38.623
> 
> 标签：java, html, xml, parsing, well-formed

我正在尝试打开与网站的 HTTP 连接并将 html 解析为一个`org.w3c.dom.Document`类。我可以打开 HTTP 连接并将网页输出到控制台就好了，但是如果我将 InputStream 对象传递给 XML 解析器，它会挂起一分钟并输出错误

```
[Fatal Error] :108:55: Open quote is expected for attribute "{1}" associated with an  element type  "onload". 
```

代码：

```
private static Document getInputStream(String url) throws IOException, SAXException, ParserConfigurationException
{
  System.out.println(url);
  URL webUrl = new URL(url);
  URLConnection connection = webUrl.openConnection();
  connection.setConnectTimeout(60 * 1000);
  connection.setReadTimeout(60 * 1000);

  InputStream stream = connection.getInputStream();

  DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
  domFactory.setNamespaceAware(true);
  DocumentBuilder builder = domFactory.newDocumentBuilder();
  Document doc = builder.parse(stream); // This line is hanging
  return doc;
} 
```

暂停时的堆栈跟踪：

```
Thread [main] (Suspended)   
    SocketInputStream.socketRead0(FileDescriptor, byte[], int, int, int) line: not available [native method]    
    SocketInputStream.read(byte[], int, int) line: not available    
    BufferedInputStream.fill() line: not available  
    BufferedInputStream.read1(byte[], int, int) line: not available 
    BufferedInputStream.read(byte[], int, int) line: not available  
    HttpClient.parseHTTPHeader(MessageHeader, ProgressSource, HttpURLConnection) line: not available    
    HttpClient.parseHTTP(MessageHeader, ProgressSource, HttpURLConnection) line: not available  
    HttpURLConnection.getInputStream() line: not available  
    XMLEntityManager.setupCurrentEntity(String, XMLInputSource, boolean, boolean) line: not available   
    XMLEntityManager.startEntity(String, XMLInputSource, boolean, boolean) line: not available  
    XMLEntityManager.startDTDEntity(XMLInputSource) line: not available 
    XMLDTDScannerImpl.setInputSource(XMLInputSource) line: not available    
    XMLDocumentScannerImpl$DTDDriver.dispatch(boolean) line: not available  
    XMLDocumentScannerImpl$DTDDriver.next() line: not available 
    XMLDocumentScannerImpl$PrologDriver.next() line: not available  
    XMLNSDocumentScannerImpl(XMLDocumentScannerImpl).next() line: not available 
    XMLNSDocumentScannerImpl.next() line: not available 
    XMLNSDocumentScannerImpl(XMLDocumentFragmentScannerImpl).scanDocument(boolean) line: not available  
    XIncludeAwareParserConfiguration(XML11Configuration).parse(boolean) line: not available 
    XIncludeAwareParserConfiguration(XML11Configuration).parse(XMLInputSource) line: not available  
    DOMParser(XMLParser).parse(XMLInputSource) line: not available  
    DOMParser.parse(InputSource) line: not available    
    DocumentBuilderImpl.parse(InputSource) line: not available  
    DocumentBuilderImpl(DocumentBuilder).parse(InputStream) line: not available 
    MSCommunicator.getInputStream(String) line: 45  
    MSCommunicator.getGamePageFromForum(int, int, int) line: 70 
    MSCommunicator.getGamePageFromForum(int, int) line: 57  
    Game.<init>(int, int) line: 21  
    MSCommunicator.main(String[]) line: 26 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:00:59.150

即使您获得的 HTML 页面是正确且格式正确的 HTML，它也可能不是格式正确的 XML。例如，这在 HTML4 中有效：

```
<p class=myclass>Paragraph<br>Next line</p> 
```

而在 XML (XHTML) 中，这被认为是有效的：

```
<p class="myclass">Paragraph<br/>Next line</p> 
```

注意封闭`<br/>`标签和围绕类属性的引号`p`。

此外，互联网是一个狂野的地方，所以内容不太可能是格式良好的，这就是为什么您需要“对所有内容持保留态度” - 甚至是格式良好，因此您必须使用 HTML 整理器，像[jTidy](http://jtidy.sourceforge.net/)或[nekoHTML](http://nekohtml.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:53:31.053

您不能只期望将 HTML 解析为 XML DOM 树。它不一定是有效的 XML。你可能需要先清理它。查看这个问题的答案：

[使用 Java 将 HTML 文件读取到 DOM 树](https://stackoverflow.com/questions/457684/reading-html-file-to-dom-tree-using-java)

# c++ - 从注册表中删除键和子键：代码抛出未处理的异常

> ID：12890654
> 
> 赞同：0
> 
> 时间：2012-10-15T06:56:40.470
> 
> 标签：c++, visual-c++, access-violation

我想删除注册表项和所有子项。我正在使用[此处](http://msdn.microsoft.com/en-us/library/ms724235%28VS.85%29.aspx)的代码。

代码编译正常，但在调试代码时

```
"Unhandled exception at 0x00416d14 in deletedemo.exe: 0xC0000005: Access violation writing location 0x0041ff01." 
```

异常发生在行

```
// Check for an ending slash and add one if it is missing.

    lpEnd = lpSubKey + lstrlen(lpSubKey);

    if (*(lpEnd - 1) != TEXT('\\')) 
    {
        *lpEnd =  TEXT('\\'); //Here exception occur.
        lpEnd++;
        *lpEnd =  TEXT('\0');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:04:59.247

前段时间我写了一个代码来递归地删除注册表项及其子项。代码是这样的::

```
static BOOL RcrsvRegDel( HKEY hKey, LPTSTR lpszSub, DWORD dwOpenFlags )
{
BOOL    bRet = TRUE ;
LONG    lRet ;
DWORD   dwSize = MAX_PATH ;
TCHAR   szName[MAX_PATH] ;
HKEY    hKeySub = NULL ;
HRESULT hr = NULL ;
HANDLE  hProcess = NULL ;
HANDLE  hToken = NULL ;

do{
    lRet = RegOpenKeyEx( hKey, lpszSub, 0, dwOpenFlags, &hKeySub ) ;
    if( lRet != ERROR_SUCCESS )
    {
        bRet = FALSE ;
        break ;
    }

    while( ERROR_NO_MORE_ITEMS != (lRet = RegEnumKeyEx(hKeySub, 0, szName, &dwSize, NULL, 
        NULL, NULL, NULL)) )
        if( !RcrsvRegDel(hKeySub, szName, dwOpenFlags) ) 
        {
            bRet = FALSE ;
            break ;
        }

    lRet = RegDeleteKey( hKey, lpszSub ) ;
    printf("RegDelKey:: %S :: lRet = %ld\n", lpszSub, lRet) ;
    if( lRet != ERROR_SUCCESS )
    {
        bRet = FALSE ;
        break ;
    }

    if( hKeySub != NULL )
    {
        RegCloseKey(hKeySub) ;
        hKeySub = NULL ;
    }
}while(0) ;
return bRet ;
} 
```

dwOpenFlags = 要传递给 RegOpenKeyEx 或 RegDeleteKey 的标志。

**编辑**:: 如果您不想自己递归地删除整个树，MSDN 有两个功能可以做到这一点。您始终可以使用它们，即[RegDeleteTree](http://msdn.microsoft.com/en-us/library/aa379776%28v=vs.85%29.aspx)和[SHDeleteKey](http://msdn.microsoft.com/en-us/library/bb773486%28v=vs.85%29.aspx)。

# javascript - Javascript 日增量（以秒为单位）在下午 5:00 翻转

> ID：12890657
> 
> 赞同：0
> 
> 时间：2012-10-15T06:56:55.513
> 
> 标签：javascript, date, days, seconds

我正在尝试跟踪自我的程序在纪元诞生以来的日子。所以，我给我的程序：

epochProgram = 15622 // 这个程序诞生的纪元天数。

然后我得到当前时间并除以 1000 得到秒。然后我将其除以每天的秒数 86400 以将其转换为自纪元以来的今天天数。然后我从今天的纪元数中减去程序纪元生日数，以查看自程序诞生以来已经过去了多少天。

```
dateObj = new Date();   
 var biz = parseInt(dateObj.getTime()/1000));
  biz = biz/86400-epochProgram; 
```

可以说几天过去了，biz = 6.30。我的问题是：上午 12:00 是 6.30，下午 5:00 biz=7.0，晚上 11:00，biz=7.2。

为什么十分之一 .# 数字会起作用，因为 .3 是说的开始，而 .2 是一天的结束？我能做些什么来解决这个问题，以便我可以有一个正确的天增量？

PS：这是当地太平洋时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:01:27.390

减去时区偏移量：

```
var biz = (dateObj.getTime() - dateObj.getTimezoneOffset() * 6e4) / 1000 >>> 0; 
```

# java - 扫描仪的 Java 问题

> ID：12890661
> 
> 赞同：1
> 
> 时间：2012-10-15T06:57:03.727
> 
> 标签：java, java.util.scanner

我有一个方法应该扫描 3 个大写或小写字母中的一个并返回该字母的小写版本。如果输入了不正确的字母，则警告用户并重新要求输入字母。我有两个问题，1：只要运行该方法，我就会得到带有错误消息的输出行，该错误消息告诉用户输入无效，而无需等待输入！（所以我`High, low or sevens (H/L/S):Invalid entry. Please try again using H/L/S!`在输入任何内容之前看到第二次运行该方法，然后再次调用该方法，并且除了我的下一个问题外，所有工作正常） 2：从扫描仪获取的条目永远不会通过我的任何 if 语句，即使它应该。

我的代码：

```
private static char getHighLow(Scanner inScanner) {
    System.out.print("High, low or sevens (H/L/S):");
    String entered = inScanner.nextLine();
    System.out.print(entered);
    if(entered.equals("H") || entered.equals("h")){
        return 'h';
    }
    else if (entered.equals("L") || entered.equals("l")){
        return 'l';
    }
    else if(entered.equals("S") || entered.equals("s")){
        return 's';
    }

        char result = 0;
        while(result != 'l' || result != 'h' || result != 's'){
        System.out.println("Invalid entry. Please try again using H/L/S!");
        result=getHighLow(inScanner);
    }
        return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:59:17.283

您可以简单地使用`equalsIgnoreCase`和修剪输入的字符串。并添加一个`while`循环 util 满足您的条件。

```
 Scanner scanner = new Scanner(System.in);
    boolean loop = true;
    String choice = null;
    while (loop) {
        System.out.print("High, low or sevens (H/L/S):");
        choice = scanner.nextLine();
        if ("H".equalsIgnoreCase(choice.trim())
                || "L".equalsIgnoreCase(choice.trim())
                || "S".equalsIgnoreCase(choice.trim())) {
            System.out.println("Correct Choice");
            loop = false;
        }
        else
        {
            System.out.println("Wrong Choice");
        }
    }
    System.out.print(choice); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T07:15:05.800

您可以像这样使用“else”，而不是使用 while() -

```
private static char getHighLow(Scanner inScanner) {
    System.out.print("High, low or sevens (H/L/S):");
    String entered = inScanner.nextLine();
    System.out.print(entered);
    if(entered.equals("H") || entered.equals("h")){
        return 'h';
    }
    else if (entered.equals("L") || entered.equals("l")){
        return 'l';
    }
    else if(entered.equals("S") || entered.equals("s")){
        return 's';
    }
    else {
        System.out.println("Invalid entry. Please try again using H/L/S!");
        return getHighLow(inScanner);
    }   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T07:04:50.840

```
char result; 
while(true){
    System.out.print("High, low or sevens (H/L/S):");
    String entered = inScanner.nextLine();
    System.out.print(entered);
    if(entered.equals("H") || entered.equals("h")){
        result = 'h';break;
    }
    else if (entered.equals("L") || entered.equals("l")){
        result = 'l';break;
    }
    else if(entered.equals("S") || entered.equals("s")){
        result = 's';break;
    }else{
        System.out.println("Invalid entry. Please try again using H/L/S!");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T07:11:58.950

嘿，你根本没有跳出 while 循环。你看到了吗 ？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T07:38:27.523

这就是你想要的。这是迭代字符串中字符的程序。如果它们是 H、L 或 S，则将它们转换为小写字母。

```
package testproj;

import java.util.Scanner;

public class TestProj {

    public static void main(String[] args) {
        Scanner scanner = new Scanner("HLs");
        String result = getHighLow(scanner);
        System.out.println("Result :"+result);
    }

    private static String getHighLow(Scanner inScanner) {
        System.out.println("High, low or sevens (H/L/S):");

        String entered;
        String result = "";
        boolean isCharFound = false;
        String temp = "";
        while (inScanner.hasNext()) {
            temp = inScanner.next();

            System.out.println(temp);

            for (int index = 0; index < temp.length(); index++) {
                entered =new Character(temp.charAt(index)).toString() ;

                if (entered.equals("H") || entered.equals("h")) {
                    result = result + 'h';
                    isCharFound = true;
                } else if (entered.equals("L") || entered.equals("l")) {
                    result = result + 'l';
                    isCharFound = true;
                } else if (entered.equals("S") || entered.equals("s")) {
                    result = result + 's';
                    isCharFound = true;
                }

                if (!isCharFound) {
                    System.out.println("Invalid entry. Please try again using H/L/S!");
                }

                isCharFound = false;
            }

        }

        return result;
    }
} 
```

# jquery - jquery提交表单

> ID：12890663
> 
> 赞同：0
> 
> 时间：2012-10-15T06:57:07.537
> 
> 标签：jquery, submit

**感谢大家的回复。找到的解决方案：我使用 DIV 而不是 FORM 并序列化其中的每个 INPUT。**

**当前小提琴代码：http:** [//jsfiddle.net/MyBZC/](http://jsfiddle.net/MyBZC/)

表格：

```
<form id="sfn" name="sfn">
       <input name="datasource" type="hidden" value="TDA">
       <input name="staticfields" type="hidden" value="">
       <input name="returnfield" type="hidden" value="Complaintinformation_ID">
       <input  name="returnid" type="hidden" value="Complaintinformation_ID">
    eCI ID:<input  class="nostyle" type="text" name="id" id="Complaintinformation_ID" style="width:150px;"/> 
    Complaint number: <input  class="nostyle" type="text" name="ecin" id="ecin" style="width:150px;"/>
</form> 
```

jQuery：

```
var ds= $("#sfn").serializeArray();
alert(ds); 
```

**alerting ds 给了我一个空的警告框。可能是因为这个 html 表单实际上在另一个表单标签内，所以 serializeArray() 不起作用？**

未经编辑的真实（更长）html输出是这样的：

```
 <form id="searchform_srcSupplier" name="searchform_srcSupplier">
        <input name="datasource" type="hidden" value="DEACSQL10_BPCS_DATA">
        <input name="from" type="hidden" value="BPCS_AVM">
        <input name="where" type="hidden" value="Partner_ID='122'">
        <input name="componentname" type="hidden" value="srcSupplier">
        <input name="staticstrings" type="hidden" value="Supplier address">
        <input name="staticfields" type="hidden" value="LTRIM(RTRIM(VNDAD1))+'<br>'+LTRIM(RTRIM(VNDAD2))+'<br>'+LTRIM(RTRIM(VCITY))+'<br>'+LTRIM(RTRIM(VPOST))+' '+LTRIM(RTRIM(VSTATE))">

        <input class="nostyle" name="returnfield" type="hidden" value="VNDNAM">
        <input class="nostyle" name="returnid" type="hidden" value="VENDOR_id">
        <table ><tr>

            <td>
                Supplier ID: 
            </td>
            <td>
                <input  class="nostyle" type="text" name="VENDOR" id="VENDOR" style="width:150px;"/>
            </td>

            <td>
                Supplier name: 
            </td>
            <td>
                <input  class="nostyle" type="text" name="VNDNAM" id="VNDNAM" style="width:150px;"/>
            </td>

                </tr><tr>

    </tr>
    </table>
    </form> 
```

（我已经尝试从表格中删除表格）

**当前小提琴代码：http:** [//jsfiddle.net/MyBZC/](http://jsfiddle.net/MyBZC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:03:55.253

试试这个：**工作演示** [http://jsfiddle.net/tFSdq/](http://jsfiddle.net/tFSdq/) **或** [http://jsfiddle.net/bnTLR/](http://jsfiddle.net/bnTLR/)

您需要序列化容器内的输入。不是容器本身

希望这符合需要`:)`

PS 不要忘记单击按钮以在第二个演示中使用和`click me man`获取警报。`serialize``.serializeArray`

**代码**

```
var ds= $("#sfn input").serializeArray();
alert(ds);​ 
```

**进一步请参阅下面的 3 张图片，**其中显示了这 2 个警报在输入的值上显示的内容。 ![在此处输入图像描述](../Images/fdff5c1bd1b27a82f6a6832935f25254.png)

**图 2**

![在此处输入图像描述](../Images/ea9f1d59485f7331c1e68ee6d0c8fca5.png)

**图 3**

![在此处输入图像描述](../Images/590b216854b4ad209d58f249dd1d74ac.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T06:57:58.230

`#id`像这样 添加

```
var ds= $("#sfn").serializeArray();
alert(ds); 
```

`serializeArray()`两者`serialize()`都为我工作请检查[myfiddle](http://jsfiddle.net/pintu31/FYVvq/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T07:07:03.227

就像您已经发现的那样，`serializeArray()`它不适用于嵌套表单，因为它是[jQuery 文档](http://docs.jquery.com/Ajax/serializeArray)中所述的*非法*HTML ：

> 请注意，**serializeArray()**仅适用于表单元素，在另一个元素上使用此方法将不起作用。此外，此方法不会在嵌套表单上给出任何结果，这在 HTML 中是非法的。

您可能需要按照`serialize()`jhonraymos 的说明使用或使用 Tas_innit 的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T07:07:22.693

看看这个： [http ://docs.jquery.com/Ajax/serializeArray](http://docs.jquery.com/Ajax/serializeArray)

它写在这里......“这个方法不会在嵌套表单上给出任何结果，无论如何这在 HTML 中是非法的”

# c# - 在类中获取/传递文件名？

> ID：12890665
> 
> 赞同：0
> 
> 时间：2012-10-15T06:57:12.203
> 
> 标签：c#

我有录音功能和创建缩略图功能。`doRecording()`类创建一个名称为 dateTime 格式的 avi 文件。然后，我有另一个类，`generateThumbnail()`我想做的是将缩略图名称与`doRecording()`函数中的视频文件名相同。

```
private void doRecording()
{
     string ImagePath = Server.MapPath("~\\Videos\\liveRecording2\\");
     string SavingPath = Server.MapPath("~\\Videos\\liveRecording2\\"); //recorded video path
     string VideoName = "ICS-" + String.Format("{0:yyyyMMdd_hhmmss}", DateTime.Now) + ".avi";
     writer.Open(SavingPath + VideoName, 640, 480); //create an AVI file and open it for images adding

     // create frame image
     Bitmap image = new Bitmap(320, 240);
     string[] files = Directory.GetFiles(ImagePath);
     writer.FrameRate = 25;
     int index = 0;
     int failed = 0;
     foreach (var item in files)
     {
        index++;
        try
        {
            image = Image.FromFile(item) as Bitmap;
            //image = cubit.Apply(image);

            for (int i = 0; i < 5; i++)
            {
                writer.AddFrame(image);
            }
         }
         catch
         {
            failed++;
         }
         //this.Text = index + " of " + files.Length + ". Failed: " + failed;
     }
     writer.Close();
     writer.Dispose();
     this.Label1.Text = "status: Video was successfully created";
     DeleteImage();
}

private void generateThumbnail()
{
    string fileName = "5.jpg";
    string ThumbFolderPath = "~\\Videos\\liveRecording2\\";
    string OriginalFolderPath = "~\\Videos\\liveRecording2\\";
    //Get The Image From File
    System.Drawing.Image OriginalImage = System.Drawing.Image.FromFile(HttpContext.Current.Server.MapPath(OriginalFolderPath + fileName));
    //Create ITs Thumbnail
    System.Drawing.Image ThumbImage = OriginalImage.GetThumbnailImage(60, 30, null, new System.IntPtr());
    //Store It in Thumbnail Folder
    ThumbImage.Save(HttpContext.Current.Server.MapPath(ThumbFolderPath + "thumb_" + thumbName + ".jpeg"));
    OriginalImage.Dispose();
} 
```

完整的代码可以从这个线程中查看：[如何解锁图像文件并将其从特定文件夹中删除？](https://stackoverflow.com/questions/12889188/how-to-unlock-image-files-and-delete-it-from-specific-folder)
我添加了另一个功能，即`generateThumbnail`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:19:09.867

拆分你的代码，它做的太多了。

```
private string CreateVideoAndThumbNail()
{
  string fileName = GetFileName();
  GenerateVideo(fileName + ".avi";
  GenerateThumbnail(fileName + ".jpg");
}

private string GetFileName()
{

}

private string GetThumbNail(string path)
{

}

private string GetVideo(string path)
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:30:34.063

AFAIK，一个静态变量似乎足以满足目的。

# c# - 如何在 c# winform 应用程序中释放对象？

> ID：12890668
> 
> 赞同：0
> 
> 时间：2012-10-15T06:57:24.433
> 
> 标签：c#, winforms, object, memory-management

> **可能重复：**
> [如何在 C# 中释放对象](https://stackoverflow.com/questions/2406794/how-do-i-free-objects-in-c-sharp)

我的问题是我正在使用..

```
 video = new Video(vpath[a]);
 video1 = new Video(vpath[a + 1]);
 video2 = new Video(vpath[a - 1]); 
```

在一个winform上同时显示3个视频..这在一个由按钮事件调用的函数中......但它消耗了大量内存......

我做了这个

```
 video = null;
 video1 = null;
 video2 = null; 
```

但它仍然没有帮助我......我怎样才能减少这 3 个对象的内存消耗？

我的问题将被标记为可能重复

```
https://stackoverflow.com/questions/2406794/how-do-i-free-objects-in-c-sharp 
```

但我仍然想克服这件事，因为我没有得到帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:00:17.450

将 object 设置为 null 并不意味着在垃圾回收发生之前它不会留在内存中。您可以显式调用垃圾回收 ( `GC.Collect()`)，但除非您别无选择，否则这是不可取的。

您可以使用`dispose`而不是强制垃圾收集。

```
class Video : IDisposable
{
    public void Dispose()
    {
        //Close managed resources and etc. 
    }
} 
```

并使用带有`using`语句的类实例。[这](https://stackoverflow.com/a/898867/1283847)是如何使用 IDisposable 模式的好答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:31:05.017

你需要释放资源

```
 using (Video video = new Video(vpath[a]))
   {
    .....
   } 
```

最后，您可以使用 SetProcessWorkingSetSize 来修剪它使用的内存，请参阅此处的答案：[webbrowser control with memory increase issue](https://stackoverflow.com/questions/2199071/webbrowser-control-with-memory-increasing-problem)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:42:56.063

您可以改用 WMP 来显示您的视频，这样 WMP 会礼貌地处理您的视频流，而不是一次将其全部加载到内存中。

[如何：在表单中嵌入 Windows Media Player](http://msdn.microsoft.com/en-us/library/bb383953%28v=vs.90%29.aspx)

然后，您只需使用：

```
var video1 = new Uri("c:\\somefolder\\myVideo1.avi");
axWindowsMediaPlayer1.URL = video1.AbsoluteUri;

var video2 = new Uri("c:\\somefolder\\myVideo2.avi");
axWindowsMediaPlayer2.URL = video2.AbsoluteUri;

// and so on... 
```

# java - 如何在java中读取生物识别扫描仪设备输入

> ID：12890671
> 
> 赞同：3
> 
> 时间：2012-10-15T06:57:31.803
> 
> 标签：java, biometrics

我是生物识别扫描仪设备工作协议的新手，我正在从事生物识别项目，因为我必须阅读应用程序中连接的生物识别扫描仪正在获取的生物识别信息，但我不知道我们如何在 java 中检测这些设备， & 动态读取输入 & 验证是否存在于 out CIDR 中。请任何人帮助我，如何读取生物识别扫描仪输入以及如何在我们的 java 类中检测这些输入？

# jsdoc - JSDoc - 将一些代码标记为不被解析但保留文档？

> ID：12890682
> 
> 赞同：5
> 
> 时间：2012-10-15T06:58:32.253
> 
> 标签：jsdoc

我正在尝试使用 JSDoc(3) 记录一个 Javascript 文件，如下所示：

```
/** 1 if gnome-bluetooth is available, 0 otherwise                              
 * @type {boolean}                                                              
 * @const                                                                                                                                           
 */                                                                             
const HAVE_BLUETOOTH = @HAVE_BLUETOOTH@; 
```

现在文件（称为`config.js.in`）本身不是有效的 Javascript；该文件通过 Makefile 运行，该文件用适当的值替换`@HAVE_BLUETOOTH@`.

当我尝试对此运行 JSdoc 时，它（可以理解）由于文件中的语法错误而犹豫不决。

**有没有办法告诉 JSDoc 忽略这个文件中的*所有*代码，而只考虑注释**？（我可能必须`@name`为每个 doclet 添加标签以将文档与代码完全分开；这很好）。

就像是：

```
/** 1 if gnome-bluetooth is available, 0 otherwise                              
 * @name HAVE_BLUETOOTH
 * @type {boolean}                                                              
 * @const                                                                 
 */                    
/** @ignore */  // somehow ignore from here onwards
const HAVE_BLUETOOTH = @HAVE_BLUETOOTH@; 
/** !@ignore */ // somehow don't ignore from here onwards (although I'd be happy
                // to ignore the entire file) 
```

如果可能的话，我不想修改文件的代码部分（我正在向现有项目添加文档）。例如，我可能会绕过它

```
const HAVE_BLUETOOTH = parseInt('@HAVE_BLUETOOTH@', 10); 
```

这将使文件再次具有有效的 JS 语法，以便解析器不会抱怨，但这也意味着我正在修改我想要避免的原始文件的代码（我更喜欢*只*添加文档）。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-04T15:41:44.820

我的情况类似，因为我使用 JSDoc 来评论我的`.less`和`.css`文件。当我在一组文件上运行 JSDoc 时，我遇到了同样的问题。

`commentsOnly`所以，我用JSDoc 插件解决了我的问题（使用 JSDoc 3.3.3）

*   [https://github.com/jsdoc3/jsdoc/blob/master/plugins/commentsOnly.js](https://github.com/jsdoc3/jsdoc/blob/master/plugins/commentsOnly.js)

我已经创建了这个`config.json`：

```
{
    "source": {
        "includePattern": ".+\\.(css|less)?$"
    },
    "plugins": [
        "plugin/commentsOnly"
    ]
} 
```

将`commentsOnly.js`文件放入一个`plugin/`目录（考虑`plugin/`并`config.json`在同一个文件夹中）并在此文件夹中执行以下 CLI 命令：

```
jsdoc -c ./config.json ./assets/stylesheets/common.less 
```

这是工作！没有理由这不适用于您的文件。

希望我能帮助你；）

# php - 如何知道用户是在网站上仍然在线还是离线

> ID：12890699
> 
> 赞同：1
> 
> 时间：2012-10-15T07:00:12.177
> 
> 标签：php, mysql, database

> **可能重复：**
> [检查用户是否离线](https://stackoverflow.com/questions/5634156/check-if-user-is-offline)

我正在建立一个社区网站。用户将照常登录和注销。我使用属性 status online/offline 来设置用户的状态。但是，如果用户只是单击 X 按钮或以其他方式断开连接而不退出呢？它显示登录状态。我如何知道用户当前是否在线？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T07:03:18.563

你有三个选择：

1.  如果用户在特定时间段（例如 10 分钟）内没有加载新页面，您可以假设用户处于离线状态。这将通过为服务器上的每个用户保留“最后一页加载时间”来完成。

2.  你可以在你的页面上有一个脚本，每隔一段时间就会触发一个 AJAX 调用来告诉服务器“我还在这里”——这将使用与 #1 相同的逻辑，但会更可靠一些。

3.  您可以使用页面卸载 AJAX 调用来告诉服务器浏览器何时卸载页面，并将用户标记为离线，直到他们加载另一个页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:04:41.280

我会使用 ajax 更新用户表（每 5 分钟一次），如果最后一次更新最多 4 分钟他在线，10 分钟前他刚刚离开，大于 15 离线。或者这里有一个关于 Node js 的[关于为网站实现“存在”的建议？](https://stackoverflow.com/questions/8661758/advice-on-implementing-presence-for-a-web-site/8662707#8662707)

# jquery - 如何在另一个视图codeigniter中调用一个视图的jquery函数

> ID：12890706
> 
> 赞同：0
> 
> 时间：2012-10-15T07:00:51.593
> 
> 标签：jquery, codeigniter

我有一个在每个视图中加载的标题视图。我在标题视图中有一个 jquery 函数，并想在另一个视图 jquery 函数中使用该 jquery 函数。

标题查看jquery函数：

```
$('#myAccount').click( function() {
                loadPopupBox();
               $('.login_pop_right').fadeTo('slow',1);
                $("#mdhemadd").attr('disabled',false);
                $("#mdhpass").attr('disabled',false);
           }); 
```

我想访问它的另一个视图 jquery 函数：

```
 $('#shortlist').click(function(){
    var userid = $('#userid').val();
    var dealid = $('#dealid').val();
    if(userid!=''){
        $.ajax({  

            type: "POST",
            url:  "/packagedetails/shortlistdeal",

            data: "userid=" +  userid+"&dealid="+dealid,

            //   data: form_data,
            success: function(data) {
                var obj = jQuery.parseJSON(data);
                if(obj==true)
                {
   loadShortlistPopupBox();
   $('#shortlistmsg').empty();
    var html='<span class="messageicon"></span><p>Deal shortlisted sucessfullly.</p>';
    $('#shortlistmsg').append(html);
                  //  alert("Deal shortlisted sucessfullly");
                }
                else
                {
  loadShortlistPopupBox();
  $('#shortlistmsg').empty();
    var html='<span class="messageicon"></span><p>This deal cannot be shortlisted.Please check your account for your <a href="/myaccount">shortlisted deals</a>.</p>';
    $('#shortlistmsg').append(html);
              //      alert("This deal cannot be shortlisted.Please check your account for your shortlisted deals.");
                }
            }
        });

    }
    else
    {
    alert("sd");
     $('#myAccount').click();
    }
}); 
```

怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:50:57.367

使用 script.js 创建一个文件，在其中添加此代码。然后将其包含在每个页面中。所以它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:18:29.957

如果在每个页面中都加载了标题视图，则单击事件已经注册了每次单击。不要在 else 语句中创建新的点击事件，而是将点击事件中的代码打包到一个函数中。

```
 $('#myAccount').click( function() {
    byClick();
 });

 function byClick()
 {
    loadPopupBox();
    $('.login_pop_right').fadeTo('slow',1);
    $("#mdhemadd").attr('disabled',false);
    $("#mdhpass").attr('disabled',false);
 } 
```

在 else 语句中：

```
 else{
    byClick();
 } 
```

# html - Django 模板在超链接时转到相对 url

> ID：12890709
> 
> 赞同：0
> 
> 时间：2012-10-15T07:01:00.403
> 
> 标签：html, django-templates

嗨，我有一个如下所示的 Django 模型

```
class Staff(models.Model):

    name = models.CharField(max_length = 200)
    url = models.CharField(max_length = 200) 
```

URL 是从另一个网站生成的，它们就像在数据库中一样

```
www.foo.com/xxx-yyy

www.foo.com/xxx-zzz 
```

当我使用像下面这样的 django 模板时，链接会转到一个相关的 url，比如我当前 URL 的扩展

```
{% extends "index.html" %}
{% load markup %}
{% block right %}
<h1>Names</h1>
{% for i in persons %}
<p><a href="http://{{i.url}}">{{i.name}}</a></p>
{% endfor %}
{% endblock %} 
```

它转到**mycurrent.url.com/www.foo.com/xxx-yyy**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:06:36.283

好的，可以通过在 like 之前添加 http:// 来解决；

```
{% extends "index.html" %}
{% load markup %}
{% block right %}
<h1>Names</h1>
{% for i in persons %}
<p><a href="http://{{i.url}}">{{i.name}}</a></p>
{% endfor %}
{% endblock %} 
```

# javascript - 带有 Mozilla/Firefox 的 javascript

> ID：12890712
> 
> 赞同：0
> 
> 时间：2012-10-15T07:01:40.323
> 
> 标签：javascript

我有一个内容流，它从服务器抓取所有图像并显示，这个内容流能够在 Chrome 上显示图像，但不能在 Mozilla/Firefox 中显示。

我在 js 文件中有这段代码。

```
 this.Opera=window.opera?true:false;
    this.IE=document.all&&!this.Opera?true:false;
    this.IE6=this.IE&&typeof (window.XMLHttpRequest)=="undefined"?true:false;
    this.IE8=this.IE&&typeof(document.querySelectorAll)!="undefined"?true:false;
    this.IE7=this.IE&&!this.IE6&&!this.IE8?true:false;
    this.WebKit=/WebKit/i.test(navigator.userAgent)?true:false,this.iPhone=/iPhone|iPod/i.test(navigator.userAgent)?true:false;
    this.Chrome=/Chrome/i.test(navigator.userAgent)?true:false;
    this.Mozilla= /Mozilla/i.test(navigator.userAgent) ? true : false;
    this.Safari=/Safari/i.test(navigator.userAgent)&&!this.Chrome?true:false; 
```

# eclipse-rcp - 如何在主复合材料上添加 2 个具有不同布局的不同复合材料？

> ID：12890713
> 
> 赞同：2
> 
> 时间：2012-10-15T07:01:39.740
> 
> 标签：eclipse-rcp, rcp

我想显示包含 2`Tree Viewers`和 one的视图`Table Viewer`。
它看起来如下，

* * *

# 树浏览器1 | 树浏览器2

# -------------TableViewer------------

* * *

（抱歉，由于某些限制，我无法从我的机器上传图像，但上述控件必须填满视图的整个区域）

为此，我创建了一个`mainComposite`，它将包含所有控件并且具有`RowLayout`样式`SWT.VERTICAL`。
之后，我创建了将容纳`TreeViewer`1 和`TreeViewer`2 的顶部复合材料，并且具有`Grid layout`2 列。（每列将包含一个`TreeViewer`相应的位置。）
之后，我创建了将容纳 TableViewer 的底部复合材料，以及再次具有 1 列的网格布局。

`mainComposite`持有顶部和底部复合材料。顶部和底部组合需要平均共享 mainComposite 高度，并且两个组合都需要获取 mainComposite 的整个宽度。

当我运行程序时，我的控件按我想要的顺序排列。但它们并没有获得复合材料的整个宽度。（即它们进入左角）。
我尝试使用不同类型的布局，但没有帮助。

我尝试使用帖子 [http://www.programcreek.com/2012/03/eclipse-rcp-tutorial-5-how-to-layout-your-view-gridlayout-example/](http://www.programcreek.com/2012/03/eclipse-rcp-tutorial-5-how-to-layout-your-view-gridlayout-example/)
但对我不起作用，因为我我有表格查看器而不是文本。

任何帮助表示赞赏。

问候，
曼达尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:50:45.733

在所有复合材料中使用 FillLayout。[这](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/SWTFillLayoutSample.htm)是一个如何使用它的小例子。重要的是设置 SWT.VERTICAL/SWT.HORIZONTAL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:16:47.863

`GridLayouts`您可以通过使用一组对齐设置为`SWT.FILL`并将两个`grabExcess*Space`参数设置为 true 来获得我认为您正在寻找的行为（树以及使用所有可用空间的表） 。

试试这个：

```
@Override
public void createPartControl(Composite parent) {
    Composite container = new Composite(parent, SWT.NONE);
    GridLayout gl_container = new GridLayout(1, false);
    gl_container.horizontalSpacing = 15;
    container.setLayout(gl_container);

    Composite mainComposite = new Composite(container, SWT.NONE);
    mainComposite.setLayout(new GridLayout(1, false));
    mainComposite.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));

    Composite treesComposite = new Composite(mainComposite, SWT.NONE);
    treesComposite.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));
    treesComposite.setLayout(new GridLayout(2, false));

    TreeViewer leftTreeViewer = new TreeViewer(treesComposite, SWT.BORDER);
    Tree leftTree = leftTreeViewer.getTree();
    leftTree.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));

    TreeViewer rightTreeViewer = new TreeViewer(treesComposite, SWT.BORDER);
    Tree rightTree = rightTreeViewer.getTree();
    rightTree.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));

    TableViewer bottomTableViewer = new TableViewer(mainComposite, SWT.BORDER | SWT.FULL_SELECTION);
    bottomTable = bottomTableViewer.getTable();
    bottomTable.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));
} 
```

或者，您可以尝试使用`FormLayouts`.

在这里，我使用“分子/偏移”方法指定事物的位置。在您看到**0/50/100 之**类的数字时，这些数字本质上是可用空间的百分比。**像5/-5**这样较小的数字是从这些百分比描述的位置的偏移量，以像素为单位；它们在组件之间提供了很小的余量。

```
@Override
public void createPartControl(Composite parent) {
    Composite container = new Composite(parent, SWT.NONE);
    GridLayout gl_container = new GridLayout(1, false);
    gl_container.horizontalSpacing = 15;
    container.setLayout(gl_container);

    Composite mainComposite = new Composite(container, SWT.NONE);
    mainComposite.setLayout(new FormLayout());
    mainComposite.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));

    Composite treesComposite = new Composite(mainComposite, SWT.NONE);
    FormData fd_treesComposite = new FormData();
    fd_treesComposite.bottom = new FormAttachment(50);
    fd_treesComposite.right = new FormAttachment(100);
    fd_treesComposite.top = new FormAttachment(0);
    fd_treesComposite.left = new FormAttachment(0);
    treesComposite.setLayoutData(fd_treesComposite);
    treesComposite.setLayout(new FormLayout());

    TreeViewer leftTreeViewer = new TreeViewer(treesComposite, SWT.BORDER);
    Tree leftTree = leftTreeViewer.getTree();
    FormData fd_leftTree = new FormData();
    fd_leftTree.bottom = new FormAttachment(100);
    fd_leftTree.right = new FormAttachment(50, -2);
    fd_leftTree.top = new FormAttachment(0, 5);
    fd_leftTree.left = new FormAttachment(0, 5);
    leftTree.setLayoutData(fd_leftTree);

    TreeViewer rightTreeViewer = new TreeViewer(treesComposite, SWT.BORDER);
    Tree rightTree = rightTreeViewer.getTree();
    FormData fd_rightTree = new FormData();
    fd_rightTree.bottom = new FormAttachment(100);
    fd_rightTree.right = new FormAttachment(100, -5);
    fd_rightTree.top = new FormAttachment(0, 5);
    fd_rightTree.left = new FormAttachment(50, 3);
    rightTree.setLayoutData(fd_rightTree);

    TableViewer bottomTableViewer = new TableViewer(mainComposite, SWT.BORDER | SWT.FULL_SELECTION);
    bottomTable = bottomTableViewer.getTable();
    FormData fd_bottomTable = new FormData();
    fd_bottomTable.bottom = new FormAttachment(100, -5);
    fd_bottomTable.right = new FormAttachment(100, -5);
    fd_bottomTable.top = new FormAttachment(50, 5);
    fd_bottomTable.left = new FormAttachment(0, 5);
    bottomTable.setLayoutData(fd_bottomTable);
} 
```

# css - CSS left:25% 跨浏览器的效果不一样？

> ID：12890714
> 
> 赞同：0
> 
> 时间：2012-10-15T07:01:40.797
> 
> 标签：css

[我在主页](http://www.stonevillachester.co.uk)上有一个滑块图像

出于某种原因，在 Firefox 和 Safari 中，图像显示在右侧。在 Chrome 中，它应该显示在中心。

我相信这取决于定位，但是我尝试过的改变似乎有很大帮助。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:14:13.123

将您的 CSS 更改为：

```
#slider-container{ 

width:960px;
position: relative;
overflow:hidden;
height:300px;
z-index:100;
border-bottom:1px solid #2b292d; padding-bottom:20px;
text-align: center;
margin: 0px auto;
}

#content-wrapper{ position:relative; z-index:200; bottom:-50px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:08:27.700

.....................

您好，现在定义您的**幻灯片 ID** `left 50%`并授予`margin-left: - half``slider width`

**像这样。**

```
#slider-container{
left:50%;
margin-left:-480px;  // total width of 980px half
} 
```

结果是[http://i.imgur.com/b4a0X.jpg](http://i.imgur.com/b4a0X.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:10:26.257

将元素的 margin 属性设置为`0 auto`，然后将父元素的`text-align`属性设置为`center`

# jquery - 使用 jeditable 选择宽度

> ID：12890723
> 
> 赞同：1
> 
> 时间：2012-10-15T07:02:23.637
> 
> 标签：jquery, select, jeditable, jsfiddle

我用[Jeditable](http://www.appelsiini.net/projects/jeditable)插件创建了一个选择选项。

[这](http://jsfiddle.net/william/mT4XV/)与我的情况完全相同。

我需要增加选择选项的宽度。

我怎样才能做到这一点？

这是我的代码

```
 $('.editable_select').editable(function(value, settings) { 
     console.log(this);
     console.log(value);
     console.log(settings);
     return(value);
  }, {
     data   : "{'example1':'example1','example2':'example2','example3':'example3'}", 
     type    : 'select',
     submit  : 'OK',
     style  : "inherit",
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:04:08.683

为什么不使用 jquery 的宽度方法？

[http://api.jquery.com/width/](http://api.jquery.com/width/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:03:38.123

您可以添加以下样式：

```
#editable select​ { width: 200px }​ 
```

[演示](http://jsfiddle.net/mT4XV/45/)

# youtube-api - youtube 搜索过滤器格式=5 但仍无法嵌入到浏览器

> ID：12890724
> 
> 赞同：0
> 
> 时间：2012-10-15T07:02:36.780
> 
> 标签：youtube-api

我有一个简单的 youtube 搜索，如下所示： [http](http://gdata.youtube.com/feeds/api/videos?q=) : //gdata.youtube.com/feeds/api/videos?q='some-value'&v=2&format=5&start-index=1&max-results=10&alt=jsonc&callback='some -function'&orderby=viewCounts&sortorder=descending);

我想我可以使用 format=5 来获取允许嵌入的视频。但是，我仍然收到说“某些网站的回报受到限制”的视频。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:26:28.303

您获得的视频可嵌入某些网站，而不能嵌入其他网站。有关嵌入限制的更多信息，请访问

[http://apiblog.youtube.com/2011/12/understanding-playback-restrictions.html](http://apiblog.youtube.com/2011/12/understanding-playback-restrictions.html)

# c# - 写入受保护的文件

> ID：12890734
> 
> 赞同：0
> 
> 时间：2012-10-15T07:04:00.887
> 
> 标签：c#, service

我希望写入受保护的文本文件注意此内容很重要。我可以写入文件以保护它吗？我将使用加密，但不希望任何人读取文件的内容。我试过使用 File.WriteText？但问题是文件被写入然后未使用，因此任何人都可以读取内容。

保护例如。像 SAM 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-26T12:29:34.583

在 Microsoft Dotnet 框架中， C# 中提供的[TextFile 属性](https://msdn.microsoft.com/en-us/library/system.io.fileattributes%28v=vs.110%29.aspx)将使您能够保持文件加密和只读。可以使用[FileIOPermissionAccesss](https://msdn.microsoft.com/en-us/library/system.security.permissions.fileiopermissionaccess%28v=vs.110%29.aspx)完成写保护 如果当前用户是管理员，那么他将能够为特定的文件提供保护和删除权限。下面是添加权限的示例代码。

```
var permissionSet = new PermissionSet(PermissionState.None);    
var writePermission = new FileIOPermission(FileIOPermissionAccess.Write, filename);
permissionSet.AddPermission(writePermission);

if (permissionSet.IsSubsetOf(AppDomain.CurrentDomain.PermissionSet))
{
    using (FileStream fstream = new FileStream(filename, FileMode.Create))
    using (TextWriter writer = new StreamWriter(fstream))
    {
        // try catch block for write permissions 
        writer.WriteLine("sometext");

    }
}
else
{
    //perform some recovery action here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T10:41:14.507

I too faced similar problem, instead in my case the problem was the data in my file should be visible to anyone even to the admin user, and for every time the application runs the previous data should be replaced by the new one.

Here's my code

```
 string pathfile = @"C:\Users\Public\Documents\Filepath.txt";  
  if    (File.Exists(pathfile)) 
   {

                     File.Delete(pathfile);

                 }
                 if (!File.Exists(pathfile))
                 {

                     using (FileStream fs = File.Create(pathfile))

                     {
                         Byte[] info = new UTF8Encoding(true).GetBytes("Your Text Here");

                         fs.Write(info, 0, info.Length);

                         FileSecurity fsec = File.GetAccessControl(pathfile);
                         fsec.AddAccessRule(new FileSystemAccessRule("Everyone",
                         FileSystemRights.FullControl, AccessControlType.Deny));
                         File.SetAccessControl(pathfile, fsec);

                     }

                     } 
```

# github - github存储库是否可以将文件从一个存储库合并到另一个存储库

> ID：12890737
> 
> 赞同：1
> 
> 时间：2012-10-15T07:04:19.870
> 
> 标签：github, github-for-windows

一开始我有两个 github 存储库来管理同一个项目。然后我在一个存储库文件中进行了一些更改。如何对另一个存储库进行更改？

两个仓库是相互独立的，不是master和branch的关系

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:06:52.353

一种解决方案（对于 GitHub 存储库或任何两个存储库）是将您的更改隔离在一个补丁中，并应用于您的第二个 GitHub 存储库的第二个本地克隆。

看一个例子：

*   “[如何将 git 补丁从一个存储库应用到另一个存储库？](https://stackoverflow.com/questions/931882/how-to-apply-a-git-patch-from-one-repository-to-another) ”。
*   “ [git: 将提交在一个仓库中引入的更改应用到另一个仓库](https://stackoverflow.com/a/3816292/6309)”

# php - Symfony2 包含 PHPQRGenerator

> ID：12890740
> 
> 赞同：0
> 
> 时间：2012-10-15T07:04:49.043
> 
> 标签：php, symfony, qr-code

我正在使用 Symfony2，我想使用 PHPQRGenerator 库（[http://phpqrcode.sourceforge.net/](http://phpqrcode.sourceforge.net/)）来生成 QR 码并将它们显示在页面上。

我不知道应该把 PHP QR 库放在哪里，我尝试按照本教程[here](http://www.kiwwito.com/article/add-third-party-libraries-to-symfony-2)进行操作，但这似乎不起作用。

一直说

```
"PHPQRGenerator_PHPQRGenerator" not found in Class/../../ on line 48. 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T13:23:54.153

也许您在此期间找到了解决方案。

我使用来自 aferrandini [https://github.com/aferrandini/PHPQRCode](https://github.com/aferrandini/PHPQRCode)的 qrCode 包生成了我的 qrCode 。它导入（原始）phpqrcode-Library。

在您的 Symfony2 项目中，您现在可以使用例如

```
\PHPQRCode\QRcode::png("Test", "/tmp/qrcode.png", 'L', 4, 2); 
```

创建您的二维码。

# asp.net - 在实体框架中读取相关数据

> ID：12890743
> 
> 赞同：0
> 
> 时间：2012-10-15T07:05:03.603
> 
> 标签：asp.net, entity-framework

我有两个名为 StaticPages 和 StaticPagesContents 的表，这两个表与来自 StaticPages 的 StaticSn 和来自 StaticPagesContents 的 StaticID 一起关联。我需要从 StaticPagesContents 中读取一个名为 PageContent 的字段，并在我的一个控件上显示此数据，因此我使用以下代码：

```
if (DropDownList1.SelectedIndex > -1)
        {
            using (shahedWSEntities myEntity = new shahedWSEntities())
            {
                var content = (from s in myEntity.StaticPages
                               where s.StaticSn == Convert.ToInt32(DropDownList1.SelectedValue)
                               select s);
                if (!object.ReferenceEquals(content, null))
                { 
                    CKEditorControl1.Text=...
                }
            }
        } 
```

但我无法访问 StaticPageContents 的 PageContent 字段。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:33:59.493

尝试这样做

```
var content = (from contents in myEntity.StaticPagesContents
                join sp in myEntity.StaticPages
                on contents.StaticID equals sp.StaticSn 
                           where sp.StaticSn == Convert.ToInt32(DropDownList1.SelectedValue)
                           select contents); 
```

我可能使用了错误的 ID 列，但我认为这对你有用

# visual-studio - 使用 VS 2012 和 TFS 2008 获取命令挂起（TFS 错误 TF400307）

> ID：12890744
> 
> 赞同：11
> 
> 时间：2012-10-15T07:05:13.533
> 
> 标签：visual-studio, version-control, tfs, visual-studio-2012

今天，突然间，我发现我无法在我们的 TFS 上成功完成任何类型的 get 命令。该过程一直在某个时间点挂起，当前处理的文件的进度条和状态消息永远保持不变，不会抛出任何错误。每次使用 IDE 和命令行实用程序时，迟早都会在不同的文件上发生这种情况。

我将 Visual Studio Premium 2012 与 TFS 2008 一起使用。

我以前从未遇到过类似的问题，昨天一切正常。从那以后，我不知道有任何配置更改，而且我是公司中唯一遇到此问题的人。

我不认为为什么会发生这种情况有直接的答案，但是有人可以提供有关如何进行调试和解决此类问题的任何指示吗？

到目前为止，我已经尝试了各种运行 get 命令的方法——最新版本、特定版本、地图 + 获取最新版本，无论是在 VS IDE 内部还是通过命令行。此外，许多其他 TFS 命令似乎运行良好。

**编辑：**

经过一些试验和错误，让这个过程持续了一个小时左右，我终于在源代码控制输出窗口中偶然发现了错误消息。这些最初是不可见的，因为当进程挂起时，它会使整个 IDE 无响应。消息都是一样的：

> [文件路径]：TF400307：等待服务器响应599秒后下载操作超时。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T13:25:48.170

我在 TFS 上遇到了同样的问题，它会挂起并变得无响应。

我通过使用以下配置值更新 tf.exe.config 或 devenv.exe.config 文件找到了解决方案：

```
<system.net>
    <connectionManagement>
        <add address="*" maxconnection="1000"/>
    </connectionManagement>
</system.net> 
```

我将限制设置为 1000，因为我仔细观察了资源监视器中的值，尽管说实话我从来没有超过 600 个并发连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T06:16:36.920

所以发生的情况是 VS 2012 中的 TFS 客户端存在一个错误，导致它在对大量文件运行 get 命令时，在进入进程一段时间后开始对所有文件*超时*。

正如下面的 MS Connect 票证中所述，目前的解决方法是使用较旧的 TFS 客户端来运行超时命令。我成功地使用 VS 2010 命令行 TFS 客户端来完成项目。

*   [Microsoft Connect - Visual Studio：获取最新版本失败并超时](http://connect.microsoft.com/VisualStudio/feedback/details/748576/get-latest-version-fails-with-timeout)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T14:19:07.413

从 TFS 2008 获取 VS 2012 的最新版本时面临同样的问题。使用调试器和 Fiddler 工具，我能够捕捉到 VS 挂起的那一刻。当 VS 2012 收到一些压缩的 TFS 服务器 HTTP 响应时，看起来有些问题，它无法解压缩它们并挂起。在我关闭 TFS HTTP 流量的压缩后，VS 不再挂起。希望它可以帮助别人。

要关闭 TFS 压缩创建注册表值并重新启动 VS：

HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\TeamFoundation\RequestSettings EnableCompression(REG_SZ)=”false”</p>

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-19T10:57:29.450

我遇到了类似的问题。更改工作区对我有用，即我删除了旧工作区并创建了一个新工作区，在其中我再次映射了所需的项目，它就像一个魅力！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T19:17:47.630

在这里也一样，你很有耐心！在我取消获取最新进程并等待很长时间后，我还从源代码管理资源管理器中收到“TF400324：无法从服务器 xyz 获得 Team Foundation 服务。技术信息（针对管理员）：操作超时”错误。可能不是文件数量，而是数据量？它在传输大约 2GB 数据后挂起，这正是 32 位有符号整数溢出的时候，但这只是一个怀疑。门票：[https ://connect.microsoft.com/VisualStudio/feedback/details/776506/source-control-explorer-getlatest-hangs-after-certain-amount-of-data-transferred-might-be-integer-overflow#标签](https://connect.microsoft.com/VisualStudio/feedback/details/776506/source-control-explorer-getlatest-hangs-after-certain-amount-of-data-transferred-might-be-integer-overflow#tabs)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-01T19:45:49.393

我注意到，当我使用新的 WorkFolders 映射作为参数调用 CreateWorkspace 方法时，它开始将所有文件（映射到 $/）下拉到本地，这将解释较长的处理时间 - 更改为 CreateWorkspace，WorkFolders 为 null，而不是添加下一步似乎做把戏

# jquery-mobile - jQuery Mobile 底部导航栏

> ID：12890751
> 
> 赞同：2
> 
> 时间：2012-10-15T07:05:59.823
> 
> 标签：jquery-mobile

是否有适用于 iPhone/Mobile Safari 底部导航栏的 jQuery Mobile 示例代码？

我曾尝试用谷歌搜索并自己编写代码，但我从未真正让它适用于 iPhone/Mobile Safari。其他浏览器似乎还不错，例如 Desktop Safari、Desktop Chrome、Android 浏览器。

我尝试过的代码（它只是不适用于 Mobile Safari .. doh）

```
<div data-role="footer" data-position="fixed" data-tap-toggle="false">
  <div data-role="navbar">
    <ul>
      <li><a href="#one" data-icon="custom">Entry</a></li>
      <li><a href="#two" data-icon="custom">Winner</a></li>
      <li><a href="#three" data-icon="custom">Gallery</a></li>
    </ul>
  </div><!-- /navbar -->
</div> 
```

任何帮助表示赞赏:)

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T07:31:28.977

尝试以下工作示例，使用自定义图标（使用 jQuery Mobile 1.2.0）：

创建一个 css 文件`mycss.css`并在其中包含以下内容：

```
.ui-icon-custom {
    background: url("../img/run.png") no-repeat rgba(0, 0, 0, 0.4) !important;
} 
```

`run.png`您的自定义图标的名称在哪里。

然后，在您的 html 文件中，包括以下内容：

```
<!DOCTYPE html>
<html>
<head>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

    <!-- LOAD YOUR CSS FILE WHILE PAYING ATTENTION TO ITS PATH! -->
    <link rel="stylesheet" type="text/css" href="./css/mycss.css"/>

</head>    

<body>

    <div data-role="page">      

        <div data-role="content">
            <h1>This is my content</h1>
        </div>

        <div data-role="footer" data-position="fixed" data-tap-toggle="false">
            <div data-role="navbar">
                <ul>
                    <li><a href="#one" data-icon="custom">Entry</a></li>
                    <li><a href="#two" data-icon="custom">Winner</a></li>
                    <li><a href="#three" data-icon="custom">Gallery</a></li>
                </ul>
            </div><!-- /navbar -->                             
        </div> 

    </div>

</body>
</html> 
```

**截图（iPhone 5）：**

![截屏](../Images/35ae9fd5f9bd21c66c22b5fddf1f8571.png)

**PS：**注意你的css/png文件的路径！

让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:45:44.060

我认为你正在寻找这样的东西：

```
<div data-role="footer" data-id="foo1" data-position="fixed">
    <div data-role="navbar">
        <ul>
            <li><a href="a.html">Info</a></li>
            <li><a href="b.html">Friends</a></li>
            <li><a href="c.html">Albums</a></li>
            <li><a href="d.html">Emails</a></li>
        </ul>
    </div><!-- /navbar -->
</div><!-- /footer --> 
```

直接来自[jQuery Mobile Docs](http://jquerymobile.com/demos/1.2.0/docs/toolbars/footer-persist-a.html)

如果它不适合您，我会查看您页面其余部分的标记，因为某些内容可能没有正确编码。另外，请确保您使用的是最新的稳定版本的 jQuery Mobile (1.2.0) 和 jQuery (1.8.2)

[这是jsFiddle](http://jsfiddle.net/uQhGA/)的一个基本示例。

# matplotlib - 调整双轴上的刻度标签大小

> ID：12890752
> 
> 赞同：7
> 
> 时间：2012-10-15T07:06:01.363
> 
> 标签：matplotlib, axes

我无法更改带有双轴的绘图上的刻度标签属性。我希望文本很小，并且字体与默认字体不同。在我尝试使用 twiny() 之前，我找到了一种运行良好的方法。如图所示，第二个轴不响应刻度格式指令。我错过了一些重要的东西还是 matplotlib 中存在错误？

Ubuntu 12.04、Python 2.7.3、matplotlib 1.1.1rc

```
#!/usr/bin/env python
# coding: utf-8

from matplotlib import pyplot as p
from numpy import sin, cos, arange

x = arange(0, 10, .01)

for plotnum in range(1,5):
    p.subplot(2, 2, plotnum)
    ax1 = p.gca()
    p.plot(sin(x),x)
    ax2 = p.twiny()
    p.plot(cos(x)+plotnum,x, 'g--')

    # Set size all tick labels
    # Works for first axes (lower x-ticks) and can also change font
    for tickset in [ax1.xaxis.get_major_ticks()]:
        [(tick.label.set_fontsize(plotnum*4), tick.label.set_fontname('ubuntu mono')) for tick in tickset]

    # Does not work for second axes (upper x-ticks)
    for tickset in [ax2.xaxis.get_major_ticks()]:
        [(tick.label.set_fontsize(plotnum*2), tick.label.set_fontname('ubuntu mono')) for tick in tickset]

    # This works, but doesn't allow changing font
    #ax2.tick_params(axis='both', which='major', labelsize=plotnum*2) 
```

这是一张图片：

![这里的图像是](../Images/a6c50e6005c455815b038799577ab3a6.png)

***编辑：***修正了刻度线的不正确缩进

***编辑：***插入图像（Thriveth）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T09:14:56.140

根据 Tick 类文档，Ticks 可以有两个标签（`label1`和）：`label2`

*   1 指的是 xticks 的图的底部，yticks 的左侧
*   2 指的是 xticks 的绘图顶部和 yticks 的右侧

该`label`属性始终引用`label1`.

您可以通过将 ax2 行更改为：

```
for tickset in [ax2.xaxis.get_major_ticks()]:
    [(tick.label2.set_fontsize(plotnum*2), tick.label2.set_fontname('ubuntu mono')) 
```

如果您需要或简化您的脚本，这些`get_majorticklabels`功能将发挥作用：`label1``label2`

```
from matplotlib import pyplot as p
from numpy import sin, cos, arange

x = arange(0, 10, .01)

for plotnum in range(1,5):
    p.subplot(2, 2, plotnum)
    ax1 = p.gca()
    p.plot(sin(x),x)
    ax2 = p.twiny()
    p.plot(cos(x)+plotnum,x, 'g--')
    for label in ax1.xaxis.get_majorticklabels():
        label.set_fontsize(plotnum * 4)
        label.set_fontname('courier')
    for label in ax2.xaxis.get_majorticklabels():
        label.set_fontsize(plotnum * 4)
        label.set_fontname('verdana') 
```

请注意，我将标签更改例程放在循环中！ ![绘制刻度标签](../Images/4e1c9dddf184e2ead90a814c1caf6395.png)

# c# - 从另一个表单调用方法

> ID：12890754
> 
> 赞同：4
> 
> 时间：2012-10-15T07:06:10.633
> 
> 标签：c#, winforms

我尝试从另一种形式调用方法。我的尝试：

```
public partial class newLedPopUp : Form
{
    Form1 back = new Form1();
    back.output();
    Close();
} 
```

和

```
public partial class Form1 : Form
{
    newLedPopUp popup = new newLedPopUp();

    public void output()
    {
        button3_Click(null, null);
    }
} 
```

有人可以帮助我吗？我真的找不到我的错误，我已经找了很长时间了。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-15T07:09:06.370

您可能需要一个已打开表单的实例并从那里调用该方法，而不是创建一个新表单的实例。你可以试试：

```
if (System.Windows.Forms.Application.OpenForms["yourForm"] != null)
    {
        (System.Windows.Forms.Application.OpenForms["yourForm"] as Form1).Output();
    } 
```

另外，您可以通过将事件代码放在单独的方法中，然后针对您的按钮单击事件或公共输出方法调用该方法来替换`button3_Click(null,null)`在您的方法中调用`Output`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T07:28:04.853

您`Form1`在调用`output`方法后立即关闭。因此，我假设您在那里有一些与业务相关的或数据访问逻辑。尝试将在`button3_Click`事件处理程序上执行的代码移动到分离对象

```
public class Foo
{
    public void Output()
    {
       // move here button3_Click code
    }
} 
```

然后创建 Foo 并将其传递给两个表单（或者您可以在没有依赖注入的情况下在表单中实例化它）

```
Foo foo = new Foo();
Form1 form1 = new Form1(foo);
LedPopUp form2 = new LedPopUp(foo); 
```

并像这样使用它：

```
public partial class Form1 : Form
{
     private Foo _foo;
     // without dependency injection: private Foo _foo = new Foo();         

     public Form1(Foo foo)
     {
         _foo = foo;
     }

     protected void button3_Click(object sender, EventArgs e)
     {
         _foo.Output();
     }
} 
```

# .net - 版本控制时将 Git 与 .NET 结合的最佳方式

> ID：12890755
> 
> 赞同：22
> 
> 时间：2012-10-15T07:06:29.373
> 
> 标签：.net, git, versioning

我目前正在开发一个项目（只有我自己），并且我已经知道如何处理它的版本控制。我用的是经典的`<major>.<minor>.<build or patch>`。

我遇到的问题是我想在我的一些*提交中包含指向相应版本的**标签*，但我不想手动执行。

 *现在我正在做：

*   如果我要发布`v0.2.13`，我会更改`AssemblyInfo.cs`并设置该版本
*   在 Git 上提交更改
*   在 Git 上添加标签`v0.2.13`（手动）
*   构建项目
*   创建一个`.zip`文件（不是所有时间）并将其命名为`ProjectName v0.2.13`

**我做错了吗？**

我可以轻松地创建一个脚本来自动执行最后一步，但我想知道是否有关于自动化另一部分的好习惯？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T16:03:29.000

我在 MSBuild 中有一个构建脚本，它会自动检索当前签出的 git 提交，然后在构建时将这样的属性添加到程序集：

```
[assembly: AssemblyInformationalVersion("0.2.13+e3a6f2c1")]
[assembly: AssemblyVersion("0.2")]
[assembly: AssemblyFileVersion("0.2.13")] 
```

版本的数字部分来自我的构建脚本读取的 version.txt 文件。

程序集版本缺少第 3 个八位字节，因为它在您增加内部版本号时避免了绑定重定向要求。AssemblyFileVersion 包含该属性允许的所有数据，AssemblyInformationVersion 可以是您想要的任何字符串，因此使用[语义版本控制](http://semver.org)来包含 git commit id 允许您准确指示构建此项目的源版本。

然后在构建成功后，您可以根据需要添加 v0.2.13 标签。就个人而言，一旦我构建了最终版本，我就会增加 version.txt 文件，以便所有后续构建都具有下一个更高的版本号。之后的每个构建都将具有该版本，直到我发布该版本，标记提交，再次增加 version.txt 文件并重复。

顺便说一句，该`AssemblyInformationalVersion`字符串出现在 Windows 资源管理器的文件属性中，因此这提供了一种从任意构建的二进制文件到匹配的原始源代码的有保证的方法。此外，不幸的是，这种方法会导致 csc.exe 报告 AL???? 构建警告，因为语义版本格式不符合 xyz 语法。但这并不意味着任何东西都被破坏了，我只是忽略了警告。

我从不明确压缩源代码，因为这与源代码控制的责任是多余的。至少如果您的源代码是由某些在线服务托管的（甚至是在您的私有 Intranet 上），大多数 git 主机已经为给定的提交 ID 提供了即时下载为 zip 的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:06:22.530

提交后，我对所有内容都使用[Makefiles](http://en.wikipedia.org/wiki/Make_%28software%29)。

根据您的构建系统的工作方式，您可能能够添加一个目标“发布”，它标记当前分支并推送此标记。您还将添加一个依赖于“构建”和“发布”目标的“包”目标。

如果这不起作用，只需创建自己的 Makefile。您可能需要也可能不需要以不同的方式命名您的“Makefile”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T15:55:55.820

如果您没有使用构建服务器的能力，那可能是最好的手动方式。但是，如果您有时间，我强烈建议您安装某种类型的构建服务器。我们在[TeamCity](http://www.jetbrains.com/teamcity/)方面取得了很大的成功。如果您将其设置为跟踪您的存储库，则有多种方法可以进行[程序集信息修补](http://confluence.jetbrains.net/display/TCD65/AssemblyInfo+Patcher)、[标记](http://confluence.jetbrains.net/display/TCD7/Git+%28JetBrains%29)和构建后部署（有很多可能的链接，我建议您只需点击[文档](http://confluence.jetbrains.net/display/TCD7/TeamCity+Documentation)即可）。

在设置我们的版本控制时，我发现[这篇文章很有帮助；](http://rationalgeek.com/blog/version-parity-dotnet-teamcity-and-nuget/)你几乎可以排除 NuGet 位，它应该有一些不错的信息。就设置 TeamCity 而言，只需快速搜索“TeamCity 设置教程”，您就会拥有大量资源。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T22:43:38.637

我已成功使用以下步骤来完成类似的事情：

*   将新提交推送到共享的 git 存储库
*   TeamCity 服务器签出代码、运行测试并构建项目
*   如果成功，TeamCity 还会移动/删除/打包部署包的文件
*   然后它将 zip FTP 到部署暂存区域，可以手动部署它（这可以完全自动化，但我们的设置很奇怪）

您可以使用提交后挂钩来标记您的分支并推送到您的 TeamCity 服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T15:49:32.273

南特满足您的需求！检查这个：[NAnt任务参考](http://nant.sourceforge.net/release/latest/help/tasks/)

它易于使用并与 git 存储库结合 :-)*

# c++ - 在 Active Directory 属性中执行放入字节数组

> ID：12890758
> 
> 赞同：0
> 
> 时间：2012-10-15T07:06:46.433
> 
> 标签：c++, com, active-directory

我正在尝试对目录条目的属性执行 a [`Put`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746352%28v=vs.85%29.aspx)，`Octet String`我正在尝试加载一个字节数组（实际上它是一个[`DATA_BLOB`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381414%28v=vs.85%29.aspx)如果它有所作为）。然而，我看到的任何关于执行的示例`Put`都只显示了如何加载字符串或单个值（如 int 或 bool），我找不到任何关于如何将字节数组加载到目录条目的内容。

到目前为止我做了什么：

```
DATA_BLOB secureBlob = //...

VARIANT var;
VariantInit(&var);

V_ARRAY(&var) = //??????
V_VT(&var) = VT_ARRAY;

userObject->Put(CComBSTR("vwSecureBlob"), var);

VariantClear(&var);
LocalFree(secureBlob.pbData); 
```

我可以分配`secureBlob.pbData`给`V_ARRAY(&var)`但我如何告诉变量数组的大小？

* * *

我听说过关于使用 a 的事情，[`SAFEARRAY`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221482%28v=vs.85%29.aspx)但我还没有看到任何我能理解的如何使用它的例子。

# python - 如何检查文件是否不是python中的符号链接

> ID：12890762
> 
> 赞同：2
> 
> 时间：2012-10-15T07:06:59.633
> 
> 标签：python, filesystems

当前运行代码是：

```
for y in checkdirlist:
    if (y in no_exec or y.endswith(".ebuild")) and \
        stat.S_IMODE(os.stat(os.path.join(checkdir, y)).st_mode) & 0o111: 
```

并且 stat 因符号链接文件而失败。

我想添加一些检查 y 是否是符号链接。

`lstat`解决了系统错误的问题，但总的来说还没有结束

```
Traceback (most recent call last):
  File "/usr/bin/repoman", line 1385, in <module>
    myaux = dict(zip(allvars, portdb.aux_get(cpv, allvars)))
  File "/usr/lib/portage/pym/portage/dbapi/porttree.py", line 435, in aux_get
    myebuild, mylocation = self.findname2(mycpv, mytree)
  File "/usr/lib/portage/pym/portage/dbapi/porttree.py", line 308, in findname2
    raise InvalidPackageName(mycpv)
portage.exception.InvalidPackageName: dev-haskell/.#hakyll-9999 
```

我想过滤这些文件，所以我需要知道哪些是符号链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:04:46.370

从文档中，您可能需要[os.path.islink](http://docs.python.org/library/os.path.html#os.path.islink)：

> os.path.islink(路径)
> 
> ```
> Return True if path refers to a directory entry that is a symbolic link. 
> Always False if symbolic links are not supported. 
> ```

# php - 如何从表格底部选择

> ID：12890765
> 
> 赞同：0
> 
> 时间：2012-10-15T07:07:02.657
> 
> 标签：php, mysql

我从 3 个不同的表中选择一些值，例如，

```
$result=mysql_query("select a.party_name, a.app_date, a.receive_date, a.case_type, c.order_date from party_details a, case_decision b, assign_advocate c where MONTHNAME(b.date)='$month' and YEAR(b.date)='$year' and a.partyid=b.party_id and a.partyid=c.party_id and c.status='1'"); 
```

但我只想从底部选择 1 个值，或者按表 c 的降序排列（case_decision）。

我怎样才能做到这一点。请告诉我。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:10:18.250

```
 SELECT * FROM table_list ORDER BY col_name DESC LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:16:29.887

您必须`<column>`在下面的查询中替换为您希望订单所基于的列的引用。

```
select a.party_name, a.app_date, a.receive_date, a.case_type, c.order_date
from party_details a, case_decision b, assign_advocate c
where MONTHNAME(b.date)='$month' and YEAR(b.date)='$year'
and a.partyid=b.party_id and a.partyid=c.party_id and c.status='1'
order by <column> desc
limit 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:08:51.337

'order by' 将根据列 'desc' 降序排序

`$result=mysql_query("select a.party_name, a.app_date, a.receive_date, a.case_type, c.order_date from party_details a, case_decision b, assign_advocate c where MONTHNAME(b.date)='$month' and YEAR(b.date)='$year' and a.partyid=b.party_id and a.partyid=c.party_id and c.status='1' order by a.party_name desc");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T07:09:35.193

`limit 1`之后使用`order by your_column_name desc`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T07:11:15.300

使用[orderby](http://www.w3schools.com/sql/sql_orderby.asp)子句

示例（语法）：

```
SELECT * FROM YOUR_TABLE_NAME ORDER BY YOUR_COL_NAME DESC LIMIT 1; 
```

在您的情况下，您应该这样做：

```
$result=mysql_query("select a.party_name, a.app_date, a.receive_date, a.case_type, 
c.order_date from party_details a, case_decision b, assign_advocate c where 
MONTHNAME(b.date)='$month' and YEAR(b.date)='$year' and a.partyid=b.party_id and 
a.partyid=c.party_id and c.status='1' **ORDER BY YOUR_COLOUM_NAME  DESC LIMIT 1** "); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T07:11:38.060

```
Please replce column name as per table design below statement : 
```

$result=mysql_query("select a.party_name, a.app_date, a.receive_date, a.case_type, c.order_date from party_details a, case_decision b, assign_advocate c where MONTHNAME(b.date)='$month' and YEAR( b.date)='$year' and a.partyid=b.party_id and a.partyid=c.party_id and c.status='1' order by col_name desc limit 1");

# android - RoboGuice2.0 ArrayIndexOutOfBoundsException

> ID：12890769
> 
> 赞同：1
> 
> 时间：2012-10-15T07:07:27.547
> 
> 标签：android, roboguice

当我使用 RoboGuice2.0 注入一些模块时，我得到一个像这样的 ArrayIndexOutOfBoundsException

```
Caused by: java.lang.ArrayIndexOutOfBoundsException
at java.util.ArrayList.add(ArrayList.java:129)
at com.google.inject.internal.ap.a(Unknown Source)
at com.google.inject.internal.da.b(Unknown Source)
at com.google.inject.internal.da.a(Unknown Source)
at com.google.inject.internal.da.a(Unknown Source)
at com.google.inject.internal.da.a(Unknown Source)
at com.google.inject.internal.da.a(Unknown Source)
at com.google.inject.internal.bn.a(Unknown Source)
at com.google.inject.internal.InternalInjectorCreator.build(Unknown Source)
at com.google.inject.Guice.createInjector(Unknown Source)
at com.google.inject.Guice.createInjector(Unknown Source)
at roboguice.RoboGuice.setBaseApplicationInjector(Unknown Source)
at com.sankuai.movie.MovieApplication.onCreate(Unknown Source)
at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:984)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3825) 
```

我像这样使用了 setBaseApplicationInjector。

```
List<Module> modules = new ArrayList<Module>();
    modules.add(new DefaultNetModule(Consts.BASE_URL));
    modules.add(new DefaultLocationModule(this, false, null, 30000, 5000,
            10000));
    modules.add(new UpdateDownloadModule(this, "movie",
            BaseConfig.sChannel, BaseConfig.sVersionCode,
            BaseConfig.sVersionName, null));
    modules.add(new MovieModule());
    modules.add(new AccountModules(getApplicationContext()));
RoboGuice.setBaseApplicationInjector(this, Stage.DEVELOPMENT, Modules
            .override(RoboGuice.newDefaultRoboModule(this)).with(modules)); 
```

很可能是 RoboGuice2.0 源代码中我在 List 中添加内容时发生的。但是在使用 list.add 方法时似乎不可能抛出 ArrayIndexOutOfBoundsException。我想知道我的用法是否正确以及解决此问题的方法。

# objective-c - 使用新的文字语法将对象推送到数组的末尾

> ID：12890772
> 
> 赞同：7
> 
> 时间：2012-10-15T07:07:46.213
> 
> 标签：objective-c, nsmutablearray, objective-c-literals

PHP 有：

```
arr[] = 'Push this onto my array'; 
```

字符串将添加到数组末尾的位置。

在新的 Objective-C 文字语法中是否有任何等价物？我能想到的最简洁的方法是：

```
arr[arr.count] = @"Add me"; 
```

但也许那里有更好的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T07:21:08.717

查看[新文字语法的文档](http://clang.llvm.org/docs/ObjectiveCLiterals.html)。当您使用下标分配给数组时，调用将转换为`setObject:atIndexedSubscript:`方法调用：

```
NSMutableArray *foo = …;
foo[0] = @"bar"; // => [foo setObject:@"bar" atIndexedSubscript:0]; 
```

如果您有自己的可变数组实现，则可以`setObject:atIndexedSubscript:`在分配超过数组大小时向该方法添加一个特殊情况以增加数组。~~我非常怀疑默认`NSMutableArray`实现是否会做任何类似的事情，很可能你只会得到一个关于索引超出范围的异常。~~这确实是什么`NSMutableArray`，请参阅[参考文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)：

> 如果索引等于计数，则将元素添加到数组的末尾，从而增加数组。

谢谢马丁的提醒！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:46:45.633

我实际上不建议这样做，但 Objective-C*确实*可以`setObject:atIndexedSubscript:`使用您自己的代码扩展该方法。该过程称为“方法调配”，并在此处解释：http: [//darkdust.net/writings/objective-c/method-swizzling](http://darkdust.net/writings/objective-c/method-swizzling)

这是一些演示该过程的实际工作代码。很酷的一点是`main()`，我可以在其中使用`fib[-1] = ...`而不是`fib[fib.count] = ...`. 当然，这里没有很大的优势；代码不再高效，当然也更难阅读。`fib`但我确实省去了两次写出“ ”的麻烦。

这种方法的一个*主要*缺点是，Objective-C 并没有关于加载类别的顺序的任何规则，因此如果其他人提供了具有类似功能的类别，那么最后加载的类别将是一个折腾. （如果他们碰巧为他们的类别选择了相同的*名称*，那将是一个被加载的折腾，我认为。）

所以，最重要的是，不要这样做：但这是*可能的。*

```
#import <Foundation/Foundation.h>
#import <objc/runtime.h>

@interface NSMutableArray (NegativeOne)
+(void)load;
-(void)swizzled_setObject:(id)obj atIndexedSubscript:(NSUInteger)idx;
@end

@implementation NSMutableArray (NegativeOne)

+(void)load
{
    Method original = class_getInstanceMethod(self, @selector(setObject:atIndexedSubscript:));
    Method swizzled = class_getInstanceMethod(self, @selector(swizzled_setObject:atIndexedSubscript:));
    method_exchangeImplementations(original, swizzled);
}

-(void)swizzled_setObject:(id)obj atIndexedSubscript:(NSUInteger)idx
{
    if (idx == -1)  idx = [self count];
    [self swizzled_setObject:obj atIndexedSubscript:idx];  // go use the old method: not a typo!
}

@end

int main()
{
    int x = 0, y = 1;
    NSMutableArray *fib = [NSMutableArray new];

    for (int i=0; i < 10; ++i) {
        fib[-1] = @(x);  // wowie zowie!
        int temp = x+y;  x = y;  y = temp;
    }
    NSLog(@"%@", fib);
    return 0;
} 
```

# c# - .NET 套接字中的错误？

> ID：12890774
> 
> 赞同：-2
> 
> 时间：2012-10-15T07:07:57.157
> 
> 标签：c#, .net, sockets, wireshark

我一直在为我的程序中很少发生的这个错误而烦恼，现在我终于把它归结为与我的代码无关的东西，或者至少我是这么认为的。

```
byte[] dataBuffer = new byte[512];
IPEndPoint f = new IPEndPoint(IPAddress.Parse(packet.ipAddres), SNMP_PORT);
socket.SendTo(packet.GetBytes(), f);
IPEndPoint sender = new IPEndPoint(IPAddress.Parse(packet.ipAddres), 0);
EndPoint senderRemote = (EndPoint)sender;
socket.ReceiveFrom(dataBuffer, ref senderRemote); 
```

Wireshark 数据包转储和变量“dataBuffer”的 Visual Studio 转储不匹配，[屏幕截图](http://i.stack.imgur.com/bODg0.png)

Wireshark 给了我预期的回应。Visual Studio 或我的代码没有。那么这怎么可能呢？我是否错误地使用了 .NET 套接字对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:19:15.780

我相信是一样的。Wireshark 中的第一个选定字节对应于 Visual Studio 中的索引 [27]。如果将 Visual Studio 切换为以十六进制格式显示数字会更明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:27:33.723

我找到了问题，交换机上的远程 SNMP 软件。当我向交换机发送 1 个 GetNextRequestPDU 时，它应该向您发送 1 个响应数据包。但有时这个特定的交换机会向我发送 10 次相同的响应数据包。这导致套接字必须处理 10 次相同的数据包才能真正看到“正确”的数据包。这在wireshark 转储中不可见，因为重复的响应发生在wireshark 中的可见数据包之前。

# asp.net-mvc - 用于设置配置 ASP.NET MVC 的全局变量

> ID：12890776
> 
> 赞同：0
> 
> 时间：2012-10-15T07:07:58.840
> 
> 标签：asp.net-mvc, global-variables, code-reuse

我想在 ASP.NET MVC 项目中定义一个全局变量，该变量将具有静态配置详细信息。像上下文名称，项目名称等。实际上我正在开发可重用的组件，您可以为其设置所有这些变量并将它们包含在项目中以便它们工作。举个例子

```
using PROJECT_NAME.Models;
using PROJECT_NAME.BizLogic;
PROJECT_CONTEXT db= new PROJECT_CONTEXT;
and rest of the code follows 
```

这样，如果我对组件进行编码，我想我可以在任何项目中使用它们，我需要做的就是设置这些全局变量（或者更确切地说是引用）。请帮助我解决以下问题 1\. 我们如何设置这样的全局变量 2\. 有没有更好的方法来做到这一点。

在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:33:36.317

一个答案在这里： [https ://stackoverflow.com/a/5119154/538387](https://stackoverflow.com/a/5119154/538387)

但最好和最专业的方法是实现线程安全的单音模式：

[http://cshapindepth.com/Articles/General/Singleton.aspx](http://csharpindepth.com/Articles/General/Singleton.aspx)

# php - 无法在使用 ajax 的按钮单击时将表单数据插入数据库

> ID：12890778
> 
> 赞同：1
> 
> 时间：2012-10-15T07:08:01.953
> 
> 标签：php, mysql, ajax

我第一次使用ajax，无法解决这个问题这里是代码fr.php

```
<script type="text/javascript">

    function register(){

        $.ajax({

            type: "POST",
            url: "submit_data.php",
            data:     "username=" + document.getElementById("username").value + 
                    "&email=" + document.getElementById("email").value,
            success: function(html){
                $("#response").html(html);
            }
        });
        }

    </script> 
```

我的问题是它也没有在按钮点击时进入函数内部

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:21:06.517

您没有以正确的方式发送数据。

以下是您修改后的代码

```
<script type="text/javascript">
function register(){
    $.ajax({
        type: "POST",
        url: "submit_data.php",
        data: { "username": document.getElementById("username").value, "email": document.getElementById("email").value },
        success: function(html){
            $("#response").html(html);
        }
    });
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:13:37.993

您以错误的方式发送数据。使用此代码正确发送数据

```
data: { "username": document.getElementById("username").value, "email": document.getElementById("username").value }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:19:16.017

另外同意 Yogesh Suthar 如果您使用的是 jQuery，您的代码最好如下所示：

```
<script type="text/javascript">

    function register(){

        $.ajax({
            type: "POST",
            url: "submit_data.php",
            data: { username: $("#username").val(), email: $("#email").val() },
            success: function(html){
                $("#response").html(html);
            }
        });
    }

</script> 
```

# ios - 从应用商店更新后应用崩溃。问题可能与核心数据有关？

> ID：12890783
> 
> 赞同：3
> 
> 时间：2012-10-15T07:08:22.943
> 
> 标签：ios, ipad, core-data, app-store

我最近在应用商店中用新版本更新了我的应用程序。我的用户在更新应用程序后遇到了崩溃。如果用户删除旧应用程序并将应用程序作为新应用程序从商店下载，则应用程序可以正常工作。

与旧版本相比，我所做的更改是在我的核心数据文件中包含一个新实体，该实体位于沙箱的文档目录中。当应用程序从应用商店更新时，核心数据文件将更新为新的实体和属性？

在模拟器中，如果我包含一个新实体并在不删除构建的情况下运行应用程序，则应用程序崩溃并且如果我删除构建并再次运行它，崩溃就会得到解决。

我希望这个（新的核心数据实体）是从商店更新时崩溃的原因。有人可以建议如何克服这个问题。当用户更新应用程序时，核心数据文件也应该更新..我该如何实现这请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T07:13:30.480

如果跨版本更改数据库结构，则必须在代码中添加数据库迁移逻辑。您不能只期望应用程序自动跨不同的数据库版本工作。

阅读[这篇](https://stackoverflow.com/questions/1262352/steps-to-migrate-core-data-databases-for-shipped-iphone-apps)stackoverflow 帖子，它为您提供了一些有用的信息。

Apple 关于该主题的文档在[此处](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html)。一个很好的教程[在这里](http://mipostel.com/index.php/home/70-core-data-migration-standard-migration-part-2)。

# .net - 在.Net 中设计一个没有长寿命对象的服务器应用程序？

> ID：12890790
> 
> 赞同：2
> 
> 时间：2012-10-15T07:09:15.690
> 
> 标签：.net, caching

我有一个使用 .Net 4.0 的游戏服务器项目。我正在使用 MemoryCache 类并缓存许多可以​​由多个用户同时修改的对象，以实现快速 i/o 和同步。最近游戏发布后，我发现我的设计有问题。因为这些缓存对象是长生命周期的对象，它们都进入 GC gen 2，并且很难被释放，所以 gen 2 堆变得非常大（5 天后大约 8 GB）并且对于完整的 GC 来说花费的时间太长。

经过几天的谷歌搜索，我认为这也许是不使用长寿命对象来避免大 gen 2 堆的最佳方法。但我不知道该怎么办。这些对象是从db加载，根据用户请求修改，然后保存回db，序列化到byte[]太复杂，无法保存到memcached，甚至可以序列化，（从memcached读取->修改->写入back) 也不是线程安全的操作。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:56:37.120

该服务器必须在内存中本地缓存所有内容是否有原因？如果您从服务器连接到数据库，我可以理解您为什么会遇到此类问题以及为什么将它们缓存在内存中。然而，有很多缓存框架可以跨多个应用程序实例工作，例如 Memcached。

当然，它不会像在内存中那样快，但是在检索对象方面实际上是否存在性能问题，或者您是否只是先发制人地出现了速度问题并进行了预优化？就好像你有然后你可能会发现，如果你水平扩展你的应用程序并停止在内存中缓存并将责任推到另一个系统，你可能会让每个服务器实例稍微慢一些，但扩展起来会更容易和更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:27:36.700

我能想到几个建议

*   首先，您是否尝试过使用[服务器 GC](http://blogs.msdn.com/b/clyon/archive/2004/09/08/226981.aspx)这将堆分成多个堆（每个处理器一个），这些堆被并行收集，以提高多处理器机器上的吞吐量。这可能有助于彻底解决您的问题。
*   如果这没有帮助并且您的第 2 代堆仍然需要很长时间才能收集，那么您应该考虑使用某种外部缓存框架（如 Memcached）。在不知道更多细节的情况下，这可能是我的首选方法。
*   或者，您可以考虑使用[对象池](http://en.wikipedia.org/wiki/Object_pool_pattern)并重新利用现有对象，而不是分配和释放新对象。

我能想到的唯一其他解决方案[是在即将发生完整 GC 时重定向到另一个服务器服务器](http://blogs.msdn.com/b/tess/archive/2009/05/29/background-garbage-collection-in-clr-4-0.aspx)（关于何时将发生完整 GC 的通知是 .Net 3.5 SP1 功能）但是这可能更多比上面的第二个选项复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:11:53.670

为什么不为缓存对象配置生命周期？可能没有必要存储这么多 N 小时/天未使用的对象。

当它没有帮助时，您需要更改缓存机制。此外，当您需要存储如此大量的对象和如此长的时间时，您需要不止一台服务器。您可以使用本地托管或云，两者都有称为分布式缓存的缓存机制。在 .NET 的前提下，它可以是 AppFabric 缓存，在云中使用 Windows Azure - 也非常类似于 AppFabric。

因此，当生命周期无济于事时，我对您的建议是在云（Windows Azure、Amazon AWS）或本地（AppFabric）中使用分布式缓存

# php - 在服务器上发布 JSON 时未获取时区

> ID：12890792
> 
> 赞同：0
> 
> 时间：2012-10-15T07:09:29.793
> 
> 标签：php, json

我对 JSON 帖子有疑问。下面是我的json格式。

```
{
  "wakeuptime_activity":
   [{
    "sActivity":"Asdfdsa",
    "dDateTime":"2012-10-12",
    "nWakeupDuration":"1",
    "sWakeupTime":"2012-10-12 11:59:00 PM+0530"
   }]
} 
```

当我在服务器上发布这个 json 并使用 php 函数 json_decode() 解码这个 json 时，我得到的 sWakeupTime 字段值为“2012-10-12 11:59:00 PM 0530”，没有“+”

如果有人告诉我我在 json 字符串中做错了什么，那就太好了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:21:18.527

你必须逃脱你的字符串。

使用`encodeURIComponent`功能：

```
...
sWakeupTime: encodeURIComponent(sWakeupTime)
... 
```

# ios - 在 Titanium Studio (Iphone) 中调整大小选择器

> ID：12890794
> 
> 赞同：0
> 
> 时间：2012-10-15T07:09:35.567
> 
> 标签：ios, resize, titanium-mobile, picker

我是 Titanium Studio 移动开发的新手。我想创建一个尺寸更小的选择器。我尝试设置 Height 和 Width 属性，但没有用。我遇到了以下链接：

[更改选取器的高度](http://developer.appcelerator.com/question/6851/change-height-of-the-picker)

但我看到它可以缩放整个选择器，包括其中的内容。我想减小选取器的大小而不减小其内容的大小。任何自定义选择器的想法（例如更改背景颜色）都会更有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:50:54.897

不要尝试修改选择器。如果您在 Apple 的 UI 控件中进行任何转换，您将收到 Apple 的拒绝，因为这是 Apple 特定的 UI 元素，因此任何严重的调整大小都将违反人机界面指南。一般规则是不要对任何原生 UI 元素使用缩放变换，Apple 非常注重统一的外观和感觉，所以很多评论者会为此而嘲笑你。

请参考以下链接

[IOS 人机界面指南](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006556-CH1-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:31:17.203

设置选择器的高度或宽度实际上设置了选择器的行/条目的高度或宽度。同样，如果您使用的是多选择器，它将影响选择器的 Colmms 的宽度。

我会建议你使用模型窗口并添加背景颜色/图像，然后将选择器添加到 thad 窗口。您可以在模型窗口的打开和关闭上应用动画。您也可以通过这种方式指定选择器的位置。希望这将帮助您实现您正在尝试的目标

# javascript - javascript从当前日期设置功能日期

> ID：12890796
> 
> 赞同：0
> 
> 时间：2012-10-15T07:09:35.293
> 
> 标签：javascript, date

如何使用 javascript 从当前日期设置功能日期的日期对象。

例如，

需要设置“下个月10号”

这是正确的方式，如果我使用

```
var d = new Date(); 
d = d.setDate(10); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:12:33.603

```
var date = new Date();
date.setMonth(date.getMonth()+1);
date.setDate(10); 
```

# python - numpy recfromcsv 和 genfromtxt 跳过数据文件的第一行

> ID：12890797
> 
> 赞同：2
> 
> 时间：2012-10-15T07:09:45.270
> 
> 标签：python, numpy, io, scipy

numpy 的 recfromcsv 跳过了我的数据的第一行。（对于 genfromtxt 也是一样）

```
import numpy as np

filename = 'data.csv'
writer = open(filename,mode='w')
writer.write('0,1.1,1.2\n1,2.1,2.2\n2,3.1,3.2')
writer.close()

data = np.recfromcsv(filename)
print data 
```

这是一个错误，或者我怎样才能在不丢失第一行的情况下加载数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T21:41:51.060

您可以添加`skiprow=0`以防止 recfromcsv 跳过第一行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T07:40:52.167

csv 文件的默认第一行包含字段名称。函数`recfromcsv`调用时默认`genfromtxt`使用参数。`names=True`这意味着它读取数据的第一行作为标题。

定义： [http ://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)

你应该把它写在数组之前。

```
import numpy as np

filename = 'data.csv'
writer = open(filename,mode='w')
writer.write('first column,second column,third column\n')
writer.write('0,1.1,1.2\n1,2.1,2.2\n2,3.1,3.2')
writer.close()

data = np.recfromcsv(filename)
print data 
```

或使用`recfromtxt`代替`recfromcsv`.

或将默认名称覆盖为

```
recfromcsv(filename, names=['a','a','a']) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T07:39:41.430

的默认行为`recfromcsv`是读取标题行，这就是它跳过第一行的原因。它适用于我`genfromtxt`（如果我通过`delimiter=','`）。你能提供显示如何`genfromtxt`失败的输出吗？

不幸的是，Numpy 中似乎存在一个错误，不允许您在其中指定 dtype `recfromcsv`（请参阅[https://github.com/numpy/numpy/issues/311](https://github.com/numpy/numpy/issues/311)），所以我看不到如何阅读它指定的列名，我认为您需要这样做以避免阅读标题行。但是您可以使用 读取数据`genfromtxt`。

编辑：看起来你可以通过传入一个名称列表来阅读它：

```
np.recfromcsv(filename, delimiter=',', names=['a', 'b', 'c']) 
```

（它对我不起作用的原因是我已经完成了`from __future__ import unicode_literals`，它显然不喜欢 dtypes 中的 unicode。）

# mysql - 为什么使用 ssh 将备份文件转储到另一台服务器时会出现 `tcgetattr` 错误？

> ID：12890798
> 
> 赞同：6
> 
> 时间：2012-10-15T07:09:51.510
> 
> 标签：mysql, ssh, mysqldump, database-backups

我想在另一台服务器上转储表备份，我正在使用 ssh 来做这件事。当我运行下面的命令时，它给出了一个错误，但是转储文件被复制到了目的地。

```
mysqldump -u username -ppassword dbname tablename | ssh -t -t servers_username@domain_name 'cat > /tmp/bckp.sql'; 
```

> tcgetattr：无效参数

如果我按`CTRL`+`c`然后它会附加错误消息`Killed by signal 2.`

为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T16:20:20.263

我在使用`ssh -t -t`or强制伪终端分配时看到了这个错误`ssh -tt`。

该`tcgetattr`函数用于查找由文件描述符表示的伪终端的属性；它需要一个文件描述符和一个指向 termios 结构的指针来存储终端元数据。从[glibc](https://github.com/rbdixon/glibc/blob/master/termios/tcgetattr.c)中的存根代码来看，这个错误表示该结构的空指针`termios`。我不确定这些相同的错误处理语义是否适用于特定于平台的`tcgetattr`.

如果要抑制此错误，请`ssh`像这样调用：

```
ssh 2>/dev/null 
```

这会将 STDERR 重定向到`/dev/null`; 使用此重定向调用时您不会看到错误。请注意，这将掩盖其他错误`ssh`; 您可能需要将其删除以进行调试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-04T23:45:08.453

就我而言，在两级 ssh 调用的外部 ssh 上强制分配 pty 解决了这个问题。

细节：

当您为 ssh 提供运行命令（例如 ssh some_server "do_some_command" ）时，ssh 假定您不需要交互式会话，并且在提交您要求的“do_some_command”作业时它不会分配 pty。

但是，如果您有两层 ssh，事情就会变得有趣（例如，假设您想先 ssh 进入“网关”机器，然后从那里 ssh 进入“内部”机器并运行一些“inner_command”）。

问题是，对于两层 ssh 作业，从外部 ssh 的角度来看，您要求外部 ssh 运行非交互式命令，因此外部 ssh 不会分配 tty。

如果您在内部 ssh 中运行的命令是交互式的，它可能会想要查询 tty 属性，并且它会（正确地）抱怨它没有在 tty 上运行。

在我的情况下，解决方案是使用 -t 参数强制外部 ssh 分配一个 pty。所以它看起来像这样：

ssh -t <gateway_machine> "ssh <inner_machine> \"<inner_interactive_command>\" "

问候系统管理员

# c++ - 像 istream::getline() 但带有替代分隔符的东西？

> ID：12890805
> 
> 赞同：5
> 
> 时间：2012-10-15T07:10:18.793
> 
> 标签：c++, getline, text-parsing, istream

获得效果的最干净的方法是`istream::getline(string, 256, '\n' OR ';')`什么？

我知道编写循环非常简单，但我觉得我可能会遗漏一些东西。我是吗？

我用了什么：

```
while ((is.peek() != '\n') && (is.peek() != ';'))
    stringstream.put(is.get()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T07:23:51.460

有[std::getline](http://en.cppreference.com/w/cpp/string/basic_string/getline)。对于更复杂的场景，可以尝试使用[boost split](http://www.boost.org/doc/libs/1_51_0/doc/html/string_algo/reference.html#header.boost.algorithm.string.split_hpp)或[regex_iterator拆分](http://www.boost.org/doc/libs/1_51_0/libs/regex/doc/html/boost_regex/ref/regex_iterator.html)[istream_iterator](http://en.cppreference.com/w/cpp/iterator/istream_iterator)或[istreambuf_iterator](http://en.cppreference.com/w/cpp/iterator/istreambuf_iterator)（[这里是使用流迭代器的示例](https://stackoverflow.com/questions/4761529/efficient-way-of-reading-a-file-into-an-stdvectorchar/4761779#4761779)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T07:47:52.340

不幸的是，没有办法有多个“行尾”。您可以做的是用 eg 读取该行并将`std::getline`其放入 an`std::istringstream`并在.`std::getline``';'``istringstream`

尽管您可以查看[Boost iostreams](http://www.boost.org/doc/libs/1_51_0/libs/iostreams/doc/index.html)库来查看它是否具有相应的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-26T20:54:45.543

这是一个有效的实现：

```
enum class cascade { yes, no };
std::istream& getline(std::istream& stream, std::string& line, const std::string& delim, cascade c = cascade::yes){
    line.clear();
    std::string::value_type ch;
    bool stream_altered = false;
    while(stream.get(ch) && (stream_altered = true)){
        if(delim.find(ch) == std::string::npos)
            line += ch;
        else if(c == cascade::yes && line.empty())
            continue;
        else break;
    }
    if(stream.eof() && stream_altered) stream.clear(std::ios_base::eofbit);
    return stream;
} 
```

该`cascade::yes`选项折叠找到的连续分隔符。使用`cascade::no`，它将为找到的第二个连续分隔符返回一个空字符串。

用法：

```
const std::string punctuation = ",.';:?";
std::string words;
while(getline(istream_object, words, punctuation))
    std::cout << word << std::endl; 
```

查看它的用法`[**Live on Coliru**](http://coliru.stacked-crooked.com/a/9dc8a457964e727d)`

一个更通用的版本将是[这个](http://coliru.stacked-crooked.com/a/a1457f0cb360ea9f)

# ios - 错误：NsIvalidArgumentException [_NSCFConstantString ObjectAtIndex:]：

> ID：12890806
> 
> 赞同：1
> 
> 时间：2012-10-15T07:10:21.150
> 
> 标签：ios, ios5, uitableview, core-bluetooth

我在视图控制器中使用表格视图。tableviewcell 仅在行中显示相同的数据。我在视图控制器中有操作按钮。如果我按下一个按钮，tableviewcell 中显示的输出就是概念。我不知道如何将字符串分配为数组。我正在使用设备作为 nsarray

```
- (void)viewDidLoad{
 [super viewDidLoad];
 self.label.text = @"";
 device=[[NSString alloc]init];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {   
 return 2;
 }
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier=@"Cell";
//cell = [tableView dequeueReusableCellWithIdentifier:cellID];
//if (!cell)
    //cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:cellID] autorelease];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell==nil)
{
    cell =[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

}

   cell.textLabel.text=[NSString stringWithFormat:@"%@",device];
   cell.accessoryType=UITableViewCellAccessoryDetailDisclosureButton;
    return cell;
 }

-(void)peripheralManagerDidConnectPeripheral:(PeripheralManager *)manager
{
device = [NSString stringWithFormat:@" %@", manager.deviceName];
[self.deviceTable reloadData];
} 
```

# download - 避免文件的直接下载链接

> ID：12890810
> 
> 赞同：1
> 
> 时间：2012-10-15T07:10:38.650
> 
> 标签：download, wordpress, easy-digital-downloads

我正在使用 Wordpress 和 Easy Digital Download 插件来销售数字文件。

我有以下*操作方法*问题：

1.  如何避免用户看到或使用直接下载链接？
2.  如何创建一个像会话一样过期的下载链接？
3.  如何保护 wp-contents/uploads 文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T21:35:37.483

不，不，不...很容易更新您的插件，并检查您的设置...

第 2 步。您将在插件设置中看到，它在转发的电子邮件中有 24 小时到期日期下载链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:13:54.970

您可能对此感兴趣： [deny direct access to a folder and file by htaccess](https://stackoverflow.com/questions/9282124/deny-direct-access-to-a-folder-and-file-by-htaccess)

只需在文件夹中放置一个内容为“全部拒绝”的 .htaccess 文件。然后，只有来自您网络空间的脚本才能从那里读取文件。

这应该是第一步。您需要一个提供数据的 php 文件，而不是直接访问这些文件。例如像这样：[http ://www.kavoir.com/2009/05/php-hide-the-real-file-url-and-provide-download-via-a-php-script.html](http://www.kavoir.com/2009/05/php-hide-the-real-file-url-and-provide-download-via-a-php-script.html)

（因为我不知道 wordpress 插件，也许只是谷歌他们，这解释了如何在 php 中编写这些 - 如果你不能这样做，你几乎坚持使用 wordpress 插件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T19:18:21.263

“WP Secure Links”是 codecanyon 的 WordPress 插件，可让您创建可下载文件的安全链接。

[http://codecanyon.net/item/wp-secure-links/4418678](http://codecanyon.net/item/wp-secure-links/4418678)

[http://sixthlife.net/product/wp-secure-links/](http://sixthlife.net/product/wp-secure-links/)

为了保护上传文件夹需要一些好的 .htaccess 工作检查这个的评论部分，它的解释

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-06T12:47:47.977

在 2020 年仍然相关，所以我编写了一个小插件，可以在 Wordpress 中实现安全和临时下载：

[WP调度员](https://wordpress.org/plugins/wp-dispatcher/#description)

它是免费且简单的。一探究竟 ：）

# javascript - Wordpress：入队脚本将垃圾添加到脚本源

> ID：12890811
> 
> 赞同：0
> 
> 时间：2012-10-15T07:10:39.950
> 
> 标签：javascript, wordpress, firebug

将脚本添加到主题 Wordpress 时，将此文本添加到脚本源的开头：

```
<div style="display:none"><b></b>
</div> 
```

和脚本中断，Firebug 说：

```
SyntaxError: missing ; before statement 
```

有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:42:33.047

您缺少分号 - ; 在那个代码中。这就是语法错误的含义。粗体也不是`<b></b>`……它是强- `<strong></strong>`。这在几年前已被弃用。

正确的代码是：

`<div style="display:none;"><strong></strong></div>`

# python - 如何根据文件名将文件移动到python中的特定目录？

> ID：12890812
> 
> 赞同：-1
> 
> 时间：2012-10-15T07:10:39.207
> 
> 标签：python, transfer

我有一个名为的目录，`/user/local/`里面有几个表单文件，`jenjar.dat_1`并且`jenmis.dat_1`. 还有一个目录`/user/data`，里面有两个表单的子目录，`jenjar`和`jenmis`. 我需要一个Python代码`jenjar.dat_1`，它可以将.`jenjar``/user/data``jenmis.dat_1``jenmis``'/user/data`

我猜这个`os`模块可以工作，但我很困惑。这里的大多数问题都没有显示 Pythonic 的方式来做到这一点。

编辑：我找到了解决方案

```
destination = '/user/local'
target = '/user/data'
destination_list = os.listdir(destination)
data_dir_list = os.listdir(target)
for fileName in destination_list:
   if not os.path.isdir(os.path.join(destination, fileName)):
       for prefix in data_dir_list:
           if fileName.startswith(prefix):
               shutil.copy(os.path.join(destination, fileName), os.path.join(target, prefix, fileName)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T07:15:32.833

这应该可以解决问题

```
srcDir = '/user/local'
targetDir = '/user/data'
for fname in os.listdir(srcDir):
    if not os.path.isdir(os.path.join(srcDir, fname)):
        for prefix in ['jenjar.dat', 'jenmis.dat']:
            if fname.startswith(prefix):
                if not os.path.isdir(os.path.join(targetDir, prefix)):
                    os.mkdir(os.path.join(targetDir, prefix))
                shutil.move(os.path.join(srcDir, fnmae), targetDir) 
```

# ms-access - Access 2007 中的 DCount 然后 OpenForm 查询太慢

> ID：12890815
> 
> 赞同：1
> 
> 时间：2012-10-15T07:11:08.970
> 
> 标签：ms-access, vba, ms-access-2007

我在表单上有许多按钮，它们向用户提供附加信息，每个按钮都使用 DCount 来查看是否有任何信息要显示，如果有，则打开一个弹出表单来显示它。一切都运行良好，但现在对于一个特定的按钮，打开弹出表单需要 30 秒到 1 分钟之间的任何时间，这显然是不可接受的。无法理解为什么它最初运行良好，但现在变得如此缓慢。所有其他按钮仍会在一秒钟内打开它们的表单。VBA是：

```
Private Sub btnNotes_Click()
  'open the popup notes for the current record, if there are associated records
  If DCount("ID","qlkpIDForNotes") = 0 Then
    MsgBox "There are no notes for this patient", vbOKOnly, "No information"
  Else
    DoCmd.OpenForm "fsubNotes",,,"ID = " & Me.displayID
  End If
End Sub 
```

被查询的表大约有 40,000 行，其中检查其他按钮的最大表大约有 12,000 行。已尝试直接在表上而不是通过查询执行 DCount，但没有任何区别。还尝试从原始表中取出一部分数据，将大约 1100 行复制到一个新表中并对其进行测试。打开仍然需要12秒。任何想法，任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:25:24.497

使用`DCount()`只是找出表或查询中是否有*任何*行可能相当低效，因为`DCount()`必须运行整个查询并遍历所有记录以返回总计数，以便您可以将其与`0`.

根据该查询的复杂性和其中的联接，以及联接是否使用具有索引的字段，运行该查询的成本可能与基础表中的记录数成指数比例。

要解决您的问题，请尝试以下操作：

1.  确保查询中基础表的`ID`字段有索引，并且or子句`qlkpIDForNotes`中使用的所有字段也有索引。`JOIN``WHERE`

2.  检查您是否可以使用主基础表或使用简化查询来测试是否有可能返回的记录，`qlkpIDForNotes`简而言之，您可能不需要完整运行该查询来确定它是否有一些记录.

3.  使用单独的函数，`HasAny()`如下所示，而不是`DCount()`只需要找出查询是否返回任何结果：

```
'-------------------------------------------------------------------------'
' Returns whether the given query returned any result at all.             '
' Returns true if at least one record was returned.                       '
' To call:                                                                '
'   InUse = HasAny("SELECT TOP 1 ID FROM Product WHERE PartID=" & partID) '
'-------------------------------------------------------------------------'
Public Function HasAny(ByVal selectquery As String) As Boolean
    Dim db As DAO.database
    Dim rs As DAO.RecordSet
    Set db = CurrentDb
    Set rs = db.OpenRecordset(selectquery, dbOpenForwardOnly)
    HasAny = (rs.RecordCount > 0)
    rs.Close
    Set rs = Nothing
    Set db = Nothing
End Function 
```

有了这个，您可以简单地将代码重写为：

```
Private Sub btnNotes_Click()
  'open the popup notes for the current record, if there are associated records '
  If Not HasAny("qlkpIDForNotes") Then
    MsgBox "There are no notes for this patient", vbOKOnly, "No information"
  Else
    DoCmd.OpenForm "fsubNotes",,,"ID = " & Me.displayID
  End If
End Sub 
```

# qt-mobility - QtMobility - 找不到服务 - “com.nokia.qt.mediaplayer

> ID：12890817
> 
> 赞同：1
> 
> 时间：2012-10-15T07:11:10.717
> 
> 标签：qt-mobility

我已经成功安装了 QtMobility，但是当我运行我的程序时，UI 出现了，但媒体（音频和视频）没有播放。这是我通过命令提示符和 QtCreator 得到的错误：

> defaultServiceProvider::requestService(): 找不到服务 - “com.nokia.qt.mediaplayer”

使用 QtSDK 4.8.1 和 4.7.2 时出现同样的错误

我的平台是 Ubuntu 10.04，我的平台上也安装了 gstreamer 0.10.6

我已经在几个论坛上发布了这个问题，但没有得到任何回应。请提出解决方案并帮助解决问题。

这些是我的 QtSDK->plugin->mediaservice 文件夹中的文件：

*   `libqtmedia_audioengine.so`
*   `libqtmedia_v4lengine.so`

错误是否与此处的任何`.so`文件有关？

# .net - 应用程序无法重写由 Windows 服务保存的文件

> ID：12890820
> 
> 赞同：0
> 
> 时间：2012-10-15T07:11:23.803
> 
> 标签：.net, windows-services, unauthorizedaccessexcepti, programdata

问题是，我的 .NET Windows 服务（在 下运行`NT AUTHORITY\SYSTEM`）在里面的文件夹中创建一个文件，如果它试图覆盖它`ProgramData`，Windows 应用程序会得到一个。`System.UnauthorizedAccessException`当前登录的用户有一个管理员帐户，但应用程序没有启动提升（我想避免它）。

如果服务在应用程序之后启动，则该文件由 UI 应用程序创建，并且可以正常工作。是否可以让 .NET Windows 服务创建一个可以被 Windows 应用程序覆盖的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:15:44.847

它只是关于文件权限。您需要为希望能够运行应用程序的用户添加写入条目。请参阅这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/system.io.file.setaccesscontrol.aspx)了解如何设置它。

关键部分：

```
// Get a FileSecurity object that represents the 
// current security settings.
FileSecurity fSecurity = File.GetAccessControl(fileName);

// Add the FileSystemAccessRule to the security settings.
fSecurity.AddAccessRule(new FileSystemAccessRule(account,
                rights, controlType));

// Set the new access settings.
File.SetAccessControl(fileName, fSecurity); 
```

# java - 如何识别当前活动来自哪个活动？

> ID：12890821
> 
> 赞同：-2
> 
> 时间：2012-10-15T07:11:23.527
> 
> 标签：java, android

在android app中，包含ABC&D四个activity，我们可以通过B和C两种方式进入D Activity。而我在D Activity如何识别我来自B还是C的Activity？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:13:41.103

不，对不起。没有内置机制，您可以在 Intent 的 Extras 中设置布尔值来验证调用者活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:55:55.410

尝试这个

```
 Intent intent = getIntent();
    intent.getComponent().getClassName()); 
```

看看有没有帮助

# wpf-controls - 为什么 Visual Studio 2012 wpf 设计器是空白的？

> ID：12890822
> 
> 赞同：2
> 
> 时间：2012-10-15T07:11:27.713
> 
> 标签：wpf-controls

为什么 Visual Studio 2012 wpf 设计器在设计时空白但在运行时工作正常？

在 Visual Studio 2010 中，它在运行时和设计时都能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:18:35.470

我认为您的问题是不合理的，因为 Visual Studio 2010 和 2012 中的 Windows 都主要是白色（空白），并且它们都可以在设计和运行时工作。

# python - 我可以得到setdefault设置的默认值吗

> ID：12890827
> 
> 赞同：1
> 
> 时间：2012-10-15T07:11:46.777
> 
> 标签：python

如果我在字典上设置默认值，是否可以在覆盖后恢复默认值？

像这样：

```
dd = {}
dd.setdefault('beverage':'A nice cup of tea')
...
dd['beverage'] = 'Yellow urine'
...
if dd['beverage'] not in list_of_valid_beverages:
    # If the beverage has been contaminated revert to default.
    # Something like any of the following?
    dd['beverage'] = dd.getdefault('beverage')
    dd['beverage'].clear()
    del dd['beverage']
...
print dd['beverage'] 
```

我的猜测是，这对于普通的 dict 是不可能的。那些声明

> dd['饮料'] = '黄色尿液'

被处决，茶就永远消失了。但这将是一个不错的功能:-)

有对此有更深入了解的人吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T07:13:09.107

不，这是不可能的。所做的一切`setdefault`都是以下逻辑：

```
if key not in the_dict:
    the_dict[key] = value
return the_dict[key] 
```

它不会特别处理“默认”值，并且不会将其存储在您要覆盖的位置以外的任何地方。

如果你想要一组持久的默认值，你最好只保留一个单独`dict`的默认值。

# youtube - 如何从 youtube api 获取频道相关数据

> ID：12890828
> 
> 赞同：6
> 
> 时间：2012-10-15T07:11:49.637
> 
> 标签：youtube, youtube-api, channel

我需要从 youtube.com 获取视频/播放列表/节目数据。

例子 ：

*   [http://www.youtube.com/channel/SWMb9NxQL9I6c](http://www.youtube.com/channel/SWMb9NxQL9I6c)
*   [http://www.youtube.com/show/mtvroadies9/featured](http://www.youtube.com/show/mtvroadies9/featured)

有没有办法可以使用 youtube API 获取上述 URL 的视频详细信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T03:47:58.500

是的，使用：

[https://developers.google.com/youtube/v3/docs/channels](https://developers.google.com/youtube/v3/docs/channels)

例如

[https://www.googleapis.com/youtube/v3/channels?part=snippet&id=SWMb9NxQL9I6c&key=](https://www.googleapis.com/youtube/v3/channels?part=snippet&id=SWMb9NxQL9I6c&key=) {YOUR_API_KEY}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T10:22:05.067

您需要查看[`YouTube Data API`](https://developers.google.com/youtube/v3/). 您将在那里找到有关如何访问 API 的文档。您还可以找到[客户端库](https://developers.google.com/youtube/v3/libraries)。

您也可以自己提出请求。以下是从频道检索最新视频的示例 URL：

```
https://www.googleapis.com/youtube/v3/search?key={your_key_here}&channelId={channel_id_here}&part=snippet,id&order=date&maxResults=20" 
```

# common-lisp - 如何在粘液中获取 shell 函数的输出？

> ID：12890833
> 
> 赞同：-1
> 
> 时间：2012-10-15T07:12:19.530
> 
> 标签：common-lisp, clisp

在 REPL 中，我们可以正常得到它的输出：

```
(shell "head -3 ~/misc.lisp")
(asdf:make-build 'stumpwm :type :program :monolithic t
             :move-here "."
             :name-suffix "" 
```

然而，我们从`(shell "head -3 ~/misc.lisp")`粘液中得到零。

真挚地！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:37:50.813

我不知道您使用的是哪个 Lisp 实现，但通常您应该需要一个包来运行 shell 命令，例如：

*   [琐碎的外壳](http://common-lisp.net/project/trivial-shell/)
*   [劣壳](http://www.cliki.net/inferior-shell)
*   [clesh](https://github.com/Neronus/clesh) (建立在 trivial-shell 之上)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:52:13.700

使用 #'run-shell-command 代替 shell：

```
(let ((str (ext:run-shell-command cmd :output :stream)))
    (loop  for line = (read-line str  nil)
        until (null line)
        do (print line))) 
```

现在可以了。

# dart - pubspec.yaml 不推荐使用的布局

> ID：12890834
> 
> 赞同：1
> 
> 时间：2012-10-15T07:12:22.633
> 
> 标签：dart

这是我的`pubspec.yaml`。

```
name: oct
version: 0.1.0
description: >
  Ojus Chemistry Toolkit (OCT) is an open-source toolkit for solving a
  variety of cheminformatics problems.  It is developed in Dart, mostly.
dependencies:
  args:
    sdk: args 
```

当我运行时`pub install`，我收到如下警告。

```
Warning: Package "oct" is using a deprecated layout. 
```

阅读`pub`'s package layout details，我还没有理解是什么触发了上述警告。请求帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:23:47.800

很可能，您在预定义目录之外有一些 .dart 文件：

```
lib
web
test 
```

如果出现此问题，新 SDK 会提供一个有用的链接：[http ://www.dartlang.org/docs/pub-package-manager/package-layout.html](http://www.dartlang.org/docs/pub-package-manager/package-layout.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:17:50.927

Lesiak 基本上是对的。如果 pub`.dart`在包的根目录中找到任何文件，您将收到此警告。在旧布局中，您可以在此处放置可公开导入的文件。

在新布局中，那些应该在`lib`.

# html - 使用 5 条弧线创建具有星形效果的圆（图片）

> ID：12890840
> 
> 赞同：1
> 
> 时间：2012-10-15T07:12:53.130
> 
> 标签：html, css

我有 5 张图片，我想像这样对齐这 5 张图片

![在此处输入图像描述](../Images/8ed47008eebe33b198e1be7fc5a3a5b2.png)

![在此处输入图像描述](../Images/eed06978ca6ec2af4c7e00a7d668935b.png)

![在此处输入图像描述](../Images/75a2174456b9e997e70640545eee8f86.png)

![在此处输入图像描述](../Images/79e7e10f9f1ae35a8db7246f26a270e5.png)

![在此处输入图像描述](../Images/c20acdeb421837ecbebbf9c557b132b0.png)

![在此处输入图像描述](../Images/3cb7001309a74ae6e6fd2f1ae33197c0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:24:34.783

你当然可以建立星星和圆圈

[http://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)

结合这些技术，应该很容易将一颗星放在一个圆圈内。

棘手的一点是将其与图像结合起来。您需要将圆圈用作容器`overflow: hidden`，然后将图像排列在里面，并用星星覆盖中心。img4 在那里有点问题，因为它与 img3 和 img5 发生冲突。我现在想不出解决办法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:15:08.400

使用 CSS3，您可以旋转。

[http://www.w3schools.com/cssref/css3_pr_rotation.asp](http://www.w3schools.com/cssref/css3_pr_rotation.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:17:56.717

您应该使用[css 转换](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transforms)来完成此操作。这是取自 css-tricks[网站的](http://css-tricks.com/examples/ShapesOfCSS/)[示例](http://jsfiddle.net/d3W6T/1/)。

# c++ - 不能将 create_async() 与 WRL WinRT 组件一起使用

> ID：12890841
> 
> 赞同：1
> 
> 时间：2012-10-15T07:12:55.217
> 
> 标签：c++, microsoft-metro, windows-runtime, wrl

我想使用 WRL 编写一个支持异步的 WinRT 组件，但我发现`create_async()`即使我包含了`ppltask.h`以及`using namespace concurrency` 如何使用 WRL 模式创建后台任务？

我的功能是这样的：

```
HRESULT GetStreamAsync([out, retval] IAsyncOperation<IRRandomAccessStream*>** operation); 
```

我也尝试使用`IThreadPoolStatics->RunAsync()`，但似乎只能在有`IAsyncAction`和没有返回值的情况下使用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:36:01.353

[`concurrency::create_async`](http://msdn.microsoft.com/en-us/library/hh750102.aspx)只能在 C++/CX 中使用（这可能在文档中没有明确说明，但是所有可能的返回类型都是帽子类型，表明它只能在 C++/CX 中使用）。

WRL 包括[`Microsoft::WRL::AsyncBase`](http://msdn.microsoft.com/en-us/library/br244878.aspx)基类模板，您可以从中派生以使用 C++ 和 WRL 实现异步操作。

我不知道包装[`std::future`](http://msdn.microsoft.com/en-us/library/hh920539.aspx)or的规范实现，但您可以在 Boost 许可的[CxxReflect 库](http://msdn.microsoft.com/en-us/library/hh920539.aspx)[`concurrency::task`](http://msdn.microsoft.com/en-us/library/hh750113.aspx)中找到一个实现示例（搜索and ）。`async_operation_base``task_based_async_operation`

# python - 与 python doc 中的 format() 混淆

> ID：12890844
> 
> 赞同：2
> 
> 时间：2012-10-15T07:13:01.317
> 
> 标签：python

我不确定python doc：

[**格式（值 [，格式规格]）**](http://docs.python.org/py3k/library/functions.html#format)

```
A call to format(value, format_spec) is translated to
type(value).__format__(format_spec) which bypasses the
instance dictionary when searching for the value’s 
__format__() method. 
```

是错字吗？我觉得应该翻译成：

```
type(value).__format__(value, format_spec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:18:58.230

是的，你是对的。以下代码...

```
format(foo, "bar") 
```

调用...

```
type(foo).format(foo, "bar") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T07:19:10.927

是的; [`__format__`特殊方法](http://docs.python.org/py3k/reference/datamodel.html#object.__format__)的文档有签名：

```
object.__format__(self, format_spec) 
```

# design-patterns - 是否有配置功能覆盖模式的模式？

> ID：12890849
> 
> 赞同：0
> 
> 时间：2012-10-15T07:13:15.410
> 
> 标签：design-patterns

一个接口定义了一系列函数func1到func20。有许多派生类只实现了这 20 个函数的一部分。func的实现有自己的模式，例如：f1的实现有2种，f2的实现有3种。派生类将实现接口中定义的大约 3 到 5 个数字 func，并且所有这些实现都是在定义的种类中选择的。派生类中的大多数 func 为空意味着当外部模型通过引用接口调用它时什么都不做。是否有一种模式可以对对象进行固定实现并使用它们来配置派生类？例如：派生类 D1 需要实现 f2 & f10，f2 使用从所有 3 种中选择的第一种实现。f10 使用从所有 2 种中选择的第二种实现。

我现在的解决方案很简单：只从接口派生并覆盖它需要的函数，但问题是：func实现的增加比派生类慢得多，因为派生类是由不同的func组合构造的。我必须将 func 实现代码的代码硬拷贝到派生类中，这不好。很难维护。

我想通过原始 func 代码使派生类可配置，这可能吗？

==================================================== ====================

我澄清了我的问题，装饰者确实可以解决这个问题。

```
interface A {
    f1();
    f2();
    ...
    f20();
} 
```

f1-20 的实现不是任意的，它们有固定的模式。f1() 有 3 种实现，例如 {1a}、{1b}、{1c}。f2() 有 2 种：{2a}，{2b}。实现 A 的派生类只需要覆盖 3-5 左右的少量函数。如您所见，可能的派生类定义（随机选择一些 fn() 来覆盖并从每个 fn() 中选择一种实现）是一个组合，数量巨大。结果是固定 fn 的实现将被复制到每个地方。

装饰器通过将每个 fn 的实现（例如 {1a}）放入接口 A 的装饰器来解决这个问题。因此，如果我们希望派生类仅通过 {1a}{2b} 覆盖 f1 和 f2，则组合 {1a}{2b} 装饰器到一个对象。关键是定义一个抽象类装饰器基础：

```
abstract class DecoratorBase : A {
    A a;
    DecoratorBase(A a){this.a=a;}
    f1(){a.f1();}
    f2(){a.f2();};
    ...
    f20(){a.f20();};
} 
```

并在base A中定义一些默认进程（如果没有默认的公共进程可以省略）

```
class BaseA {
    f1(){} // no default code, do nothing
    f5(){/*default code*/}
} 
```

f1() 的第一种实现：

```
class F1A : DecoratorBase  {
    F1A(A a){super(a);}
    f1(){super.f1();/*1a*/}
} 
```

f2() 的第二种实现：

```
class F2B : DecoratorBase  {
    F2B(A a){super(a);}
    f2(){super.f2();/*2b*/}
} 
```

最后，将它们组合起来：

```
new F1A(new F2B(BaseA())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:24:27.800

嗯，装饰器模式似乎合适？

[http://en.wikipedia.org/wiki/Decorator_pattern](http://en.wikipedia.org/wiki/Decorator_pattern)

可能与 Factory 和/或 Builder 模式结合使用。

# postgresql - 在表达式中使用来自同一个表的两个不同的行

> ID：12890851
> 
> 赞同：1
> 
> 时间：2012-10-15T07:13:16.353
> 
> 标签：postgresql, postgis

我正在使用 PostgreSQL + PostGIS。

在表中，我在同一张表的同一列中的不同行中有一个点和线几何。要获得我运行的线路：

```
SELECT the_geom
FROM filedata
WHERE id=3 
```

如果我想采取行动，我会运行：

```
SELECT the_geom
FROM filedata
WHERE id=4 
```

我想把点和线放在一起，就像它们在这个 WITH 表达式中显示的那样，但是使用对表的真实查询来代替：

```
WITH data AS (
SELECT 'LINESTRING (50 40, 40 60, 50 90, 30 140)'::geometry AS road,
       'POINT (60 110)'::geometry AS poi)

SELECT ST_AsText(
ST_Line_Interpolate_Point(road, ST_Line_Locate_Point(road, poi))) AS projected_poi

FROM data; 
```

您在此示例中看到数据来自手动创建的 WITH 表达式。我想把它从我的`filedata`桌子上拿走。我的问题是我不知道如何同时处理来自一张表的两个不同行的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T07:43:53.617

一种可能的方法：
从不同行检索另一个值的子查询。

```
SELECT ST_AsText(
          ST_Line_Interpolate_Point(
             the_geom
            ,ST_Line_Locate_Point(
                the_geom
               ,(SELECT the_geom FROM filedata WHERE id = 4)
             )
          )
       ) AS projected_poi
FROM   filedata
WHERE  id = 3; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T07:34:33.667

使用自联接：

```
SELECT ST_AsText(
  ST_Line_Interpolate_Point(fd_road.the_geom, ST_Line_Locate_Point(
      fd_road.the_geom,
      fd_poi.the_geom
  )) AS projected_poi
FROM filedata fd_road, filedata fd_poi
WHERE fd_road.id = 3 AND fd_poi.id = 4; 
```

正如 Erwin 所指出的，交替使用子查询来获取另一行。

在单个表达式中使用一个表中的多行的主要选项是：

*   如上所示，使用两个不同的别名自连接表，然后过滤行；
*   正如 Erwin 的回答所示，使用子查询表达式获取除一行之外的所有行的值；
*   使用类似and的[窗口函数](http://www.postgresql.org/docs/current/static/functions-window.html)在查询结果中获取相对于当前行的行；或者`lag()``lead()`
*   `JOIN`在返回表的子查询上

后两个是更高级的选项，可以解决使用更简单的自联接或子查询表达式难以解决或效率低下的问题。

# c# - 调整大小时的列表视图列文本操作

> ID：12890867
> 
> 赞同：3
> 
> 时间：2012-10-15T07:14:34.900
> 
> 标签：c#

我有一个列表视图，并且有多个具有长文本值的列，例如具有目标文件路径的列，它的值`c:\users\kavya\new\coding\img1000.jpg` 非常大。

当用户使用滚动条时，我想根据列的大小调整文本：宽度很大，所有数据`c:\users\kavya\new\coding\img1000.jpg` 都应该可见，当他将列标题滚动到很小时，只有`c:\img1000.jpg`必须查看但内存应该有整个路径，实际上我们看到类似`c:\users\kavya…..`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:40:50.603

通过执行 Windows API 调用 PathCompactPathEx，

```
[DllImport("shlwapi.dll", CharSet = CharSet.Auto)]
 static extern bool PathCompactPathEx([Out] StringBuilder pszOut, string szPath, int cchMax, int dwFlags);

static string PathShortener(string path, int length)
 {
     StringBuilder sb = new StringBuilder();
     PathCompactPathEx(sb, path, length, 0);
     return sb.ToString();
 } 
```

**或者**你可以这样尝试：

```
string PathShortener(string path)
 {
     const string pattern = @"^(\w+:|\\)(\\[^\\]+\\[^\\]+\\).*(\\[^\\]+\\[^\\]+)$";
     const string replacement = "$1$2...$3";
     if (Regex.IsMatch(path, pattern))
     {
         return Regex.Replace(path, pattern, replacement);
     }
     else
     {
         return path;
     }          
 } 
```

**或者**你可以像下面这样使用：

```
string ellipsisedPath = OriginalPath + '\0'; 
```

访问：[在没有 Win32 API 调用的情况下将省略号添加到 WinForms 程序中的路径（重新访问）](https://stackoverflow.com/questions/2640410/add-ellipsis-to-a-path-in-a-winforms-program-without-win32-api-call-revisited)

# javascript - extjs4 中的工具栏

> ID：12890869
> 
> 赞同：0
> 
> 时间：2012-10-15T07:14:56.890
> 
> 标签：javascript, extjs, extjs4

我的 exts 4 窗口中有一些工具栏

```
this.tbar = {
            xtype: 'toolbar',
            items: [

                {
                    id: "btnClearFilter",
                    itemId: "btnClearFilter",
                    action: 'delFilter',
                    disabled: true,
                    handler: function (btn, e) {
                        btn.setDisabled(true);
                    }
                },
                '-',
                {
                    text: 'Export',
                    tooltip: 'Export',
                    disabled: false,
                    menu : {
                        items: [{
                            text: 'Export 1'
                            , icon: 'Content/Resources/images/Excel-16.png'
                            , action: 'export'
                        }]
                    }
                }
            ]
        }; 
```

从控制器我可以像这样导致动作 delFilter

```
'ns-main-win > toolbar button[action=delFilter]': {
                click: this.delFilter
            }, 
```

如何从菜单项中获取操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:24:08.330

我不明白你的意思，你想触发 delFilter 的动作吗？

```
Ext.getCmp('btnClearFilter').click() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:22:39.270

您是否尝试过给菜单项一个 id，然后使用它进行搜索

```
 '#export'{
        click:this.export 
        } 
```

# python - 在用户输入 gtk.TextBuffer 时获取文本

> ID：12890871
> 
> 赞同：1
> 
> 时间：2012-10-15T07:15:03.453
> 
> 标签：python, gtk, gtk-textbuffer

我想知道是否有一种方法可以`TextBuffer`在用户输入时打印输入。我曾尝试使用该`insert_text`信号，但它似乎正在打印出输入后面的一个字符。

到目前为止我有

```
self.__buffer.connect('insert_text', self.__inserted)
def __inserted(self, widget, iter, string, length):
    print self.__buffer.get_text(self.__buffer.get_start_iter(),self.__buffer.get_end_iter()) 
```

上面的代码在实际输入的内容后面打印出缓冲区 1 字符。

我想要的功能是这样的：

如果用户输入“你好”

输出应该是

```
h              #after h typed
he             #after he typed 
hel            #etc
hell
hello 
```

目前正在打印

```
#after h typed
h             #after he typed
he            #etc
hel
hell 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:01:46.753

`__inserted`您可能会发现在传递给您的方法的参数中找到了丢失的数据。`GtkTextBuffer`对象的信号默认处理程序似乎`insert_text`负责将文本插入缓冲区，并且您的信号处理程序事先运行。

解决此问题的两种可能方法是：

1.  用于`connect_after`连接您的信号处理程序。这将在默认处理程序之后运行。

2.  如果您只想在每次更改后访问整个缓冲区的数据，请考虑改用`changed`信号。这在下一个文本插入缓冲区后发出，并且还会通知您删除。

# ssrs-2008 - SSRS - 检索选定数据之外的第一个字段的前一个

> ID：12890877
> 
> 赞同：0
> 
> 时间：2012-10-15T07:15:29.807
> 
> 标签：ssrs-2008, reporting-services, ssrs-grouping

我有一个包含 4 列的 SQL 表

1) ID 2) EquipmentID 3) 日期 4) 小时，例如 10000

我有一个显示此表内容的 SSRS 报告

从和到日期参数用于选择记录的日期范围

该表按设备分组

在设备组中，我在下面添加了一行，在小时列中使用以下表达式

Last(Fields!Hours.Value) - First(Fields!Hours.Value) = "实际使用的总小时数" 例如 10000 - 9500 = 500

这不会返回正确的“使用的总实际小时数”

表达式不正确

其实应该...

Last(Fields!Hours.Value) - PREVIOUS(First(Fields!Hours.Value)) = "实际使用的总小时数" 例如 10000 - 9450 = 550

我的问题是如何获得 PREVIOUS(First(Fields!Hours.Value)？

通过选择参数日期范围，我不检索 PREVIOUS(First(Fields!Hours.Value)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:51:23.580

感谢您的提示 Aftab

SQL 已按日期排序

也许该表的示例可以让您更好地理解我为什么需要 PREVIOUS(First(Fields!Hours.Value)

* * *

日期：2012-09-01 Hours = 9500 **（这是一天结束时记录的总小时数，用作第二天的开始小时数）**

...

日期：2012-09-30 小时 = 10000

* * *

因此，如果我使用表达式...

Last(Fields!Hours.Value) - First(Fields!Hours.Value) = "实际使用的总小时数" 例如 10000 - 9500 = 500

这将返回从 2012 年 9 月 2 日到 2012 年 9 月 30 日 500 的“实际使用总小时数”

我需要 PREVIOUS(First(Fields!Hours.Value) 来计算从 2012-09-01 到 2012-09-30 的正确“实际使用总小时数”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:31:59.037

要获得报告表达式的预期结果，即 Last(Fields!Hours.Value) - First(Fields!Hours.Value)，应在 T-Sql/SP 中实现适当的**Order BY FieldName子句。**

# javascript - 来自 livepipe 的模态弹出窗口

> ID：12890881
> 
> 赞同：3
> 
> 时间：2012-10-15T07:15:48.233
> 
> 标签：javascript, popup

我需要使用 livepipe（原型插件）的“模态窗口”在我的应用程序中创建一个弹出窗口。

其网站上的演示`triggering`通过单击`<a>`标签显示弹出窗口。

现在我需要制作页面，以便在加载页面时它会自动抛出弹出窗口，我在 javascript 上非常绿色，有人可以说明如何做到这一点吗？

`<a>`我将通过下面的标签发布如何执行此操作的脚本：

```
<body>
<div id = "zhao" >
<iframe src='http://www.netease.com' width='500px' height='500'></iframe>
</div>
<a id="modal" href="#zhao">Modal Window</a>
</body>    

<script type='text/javascript' src='http://livepipe.net/javascripts/all.js?1256410438'></script> 

<script type= 'text/javascript'>
//Modal Window 
document.observe('dom:loaded',function(){ 

var modal = new Control.Modal($('modal'),{  
    overlayOpacity: 0.75,  
    className: 'modal',  
    fade: true  
});  

});
</script> 
```

我想我需要`<a>`通过javascript以某种方式模拟及其href属性，对吗？对我来说最困难的是如何通过javascript模拟“单击链接”的动作，以便在页面加载时触发动作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T23:47:50.433

如果您只想在页面加载时显示弹出窗口，为什么不直接在您的`modal`对象上调用 .open() 呢？您不必模拟点击`<a>`

```
<script type= 'text/javascript'>
//Modal Window 
document.observe('dom:loaded',function(){ 

var modal = new Control.Modal($('modal'),{  
    overlayOpacity: 0.75,  
    className: 'modal',  
    fade: true  
});  

modal.open();

});
</script> 
```

接口： http: [//livepipe.net/control/window](http://livepipe.net/control/window)

# html - 标签与跨度：HTML

> ID：12890882
> 
> 赞同：43
> 
> 时间：2012-10-15T07:15:56.640
> 
> 标签：html

我对使用什么来渲染数据有点困惑。我的情况是我必须渲染计数，但我不确定是否使用`span`or `label`。

```
<span id="spnCount"></span> 
```

或者

```
<label id="lblCount"></label> 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-15T07:18:35.127

`label`当您有表单或输入元素时使用A -`label`与`input`元素相关联。Span 是任何内联内容的通用容器。我想你想要一个`span`在这种情况下

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-10-15T07:22:58.060

# [跨度](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/span)

标签用于对文档中的`<span>`内联元素进行分组。

标签本身不提供`<span>`视觉变化。

标签提供了一种方法来将`<span>`钩子添加到文本的一部分或文档的一部分。

# [标签](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label)

标签定义元素的`<label>`标签。

该`<label>`元素不会为用户呈现任何特殊的东西。但是，它为鼠标用户提供了可用性改进，因为如果用户单击`<label>`元素内的文本，它会切换控件。

标签的 for 属性`<label>`应该等于相关元素的 id 属性才能将它们绑定在一起。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2017-01-15T07:53:15.857

每个“回答”的人只需复制粘贴描述预期用例的文档即可。然而，没有人解释这些差异，或者*为什么*你*应该*使用其中一种。

现实情况是，任何一个在技术上都可以工作，所以老实说，这甚至都无关紧要。您可以使用任意数量的其他类似标签，包括`<i>`标签（使用类正确设置样式）。为它分配一个唯一的 id，使用`document.getElementById()`或使用节点等，做你想做的事。唯一关心的是语义纯粹主义者。

标签“can”和“should”与表单输入元素一起使用，true。但它不能*或*不得*以*任何其他方式使用它是*不正确的。*这意味着它可以**并且**可以**以**其他方式使用。

 ******首先，请注意如何`<label>`简单地将其用作“元素”的标签。它没有说元素的*类型*。它并没有说它必须是输入元素或表单元素。实际上，非表单元素可以具有与之关联的控件以提供用户体验，这些控件可能使用 CSS 等操作对象，并且标签可以简单地将文本连接到任何此类事物。表单可以在页面上不可见地存在。谁知道。

为什么使用独立标签可能是个坏主意？如果您的文档可能存在很长时间，通过多个浏览器版本和 HTML 标准更新，定义`<label>`可能会更改为更严格地强制与表单输入元素关联，那么您可能会遇到问题。但是对于我们仅仅依赖于呈现页面的许多规范中的任何其他方面，几乎都是如此。

发生这种变化可能是非常罕见的情况，而且您甚至可能不在同一家公司或同一项目团队工作，所以老实说，除了纯粹主义者之外，谁真正在乎呢？

好吧，也许任何有视力障碍的人，如果他们依赖某种处理`<label>`不同于`<span>`的技术，这可能会使技术或用户或两者混淆。我对此类无障碍设备没有任何经验，但这可能是一个更好的理由***WHY***。

另一个有效的原因是`<span>`比`<label>`.

另一个原因可能是搜索引擎在使用`<label>`vs时对您的页面进行排名或引用内容的方式存在细微差异`<span>`。这有点牵强，因为此类算法通常不公开，但这是可能的。一个引擎可能以一种方式产生更好的结果，另一个引擎可能更喜欢另一种方式，另一个引擎可能不关心任何一种方式。

说了这么多，如果没有任何进一步的上下文知识，我可能会选择它，`<span>`因为它似乎是*最通用*和*最少争议*的做事方式。但我觉得这个问题缺乏一个彻底的**答案**，因为答案通常涉及对**原因**的​​理解。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T07:32:39.880

如果您的数据是计算结果，那么[`output`](http://www.w3.org/TR/html5/forms.html#the-output-element)HTML5 元素可能最适合您的目的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T07:18:23.193

标签定义元素的标签。如果您不使用输入元素，则可以使用 span。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T07:18:31.947

标签与表单输入元素结合使用。在某些浏览器中，可以单击标签来激活输入元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T07:18:56.140

`label`用于标记 html 中的表单控件。它还具有`for`属性，您可以在其中设置与此标签相关的控件的 ID。`span`用于需要显示一些文字数据的情况。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-10-15T07:18:24.357

“`<label>`标签定义了`<input>`元素的标签。” [http://www.w3schools.com/tags/tag_label.asp](http://www.w3schools.com/tags/tag_label.asp)******

# sql - 如何在plsql函数中调用函数

> ID：12890883
> 
> 赞同：6
> 
> 时间：2012-10-15T07:16:15.487
> 
> 标签：sql, oracle, plsql

我有一个 plsql 函数，我想从我的函数中调用另一个函数。我怎样才能做到这一点？

```
FUNCTION ortak_icra_job(prm_dosya_id             dosya.id%TYPE,
                     prm_aciklama             icra_hareket.aciklama%TYPE,
                     prm_kullanici_id         kullanici.id%TYPE,
                     prm_ask_ind_kayit_sayisi OUT NUMBER,
                     prm_hata_metni           OUT VARCHAR2,
                     prm_hata_kodu            OUT hata_mesaji.id%TYPE) 
BEGIN

askidan_indir(prm_dosya_id ,
               prm_aciklama ,
               prm_kullanici_id ,
               prm_ask_ind_kayit_sayisi ,
               prm_hata_metni ,
               prm_hata_kodu )

END; 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T07:20:16.640

[这](http://www.techonthenet.com/oracle/questions/exec_function.php)是一个如何运行函数的示例。有两种方法可以做到这一点。

1.  尝试添加结果值：

    ```
    result := askidan_indir(prm_dosya_id,
               prm_aciklama,
               prm_kullanici_id,
               prm_ask_ind_kayit_sayisi,
               prm_hata_metni,
               prm_hata_kodu ) 
    ```

2.  您还可以在以下位置使用您的功能`select statement`：

    ```
    select askidan_indir(prm_dosya_id,
                     prm_aciklama,
                     prm_kullanici_id,
                     prm_ask_ind_kayit_sayisi,
                     prm_hata_metni,
                     prm_hata_kodu) 
    into result  
    from dual; 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T07:20:52.007

[函数](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions001.htm)必须返回一个值，否则你应该有一个函数的赋值目标。

```
FUNCTION ortak_icra_job(prm_dosya_id             dosya.id%TYPE,
                     prm_aciklama             icra_hareket.aciklama%TYPE,
                     prm_kullanici_id         kullanici.id%TYPE,
                     prm_ask_ind_kayit_sayisi OUT NUMBER,
                     prm_hata_metni           OUT VARCHAR2,
                     prm_hata_kodu            OUT hata_mesaji.id%TYPE) 
  RETURNS VARCHAR2 IS
v_result varchar2(200);
BEGIN

v_result := askidan_indir(prm_dosya_id ,
               prm_aciklama ,
               prm_kullanici_id ,
               prm_ask_ind_kayit_sayisi ,
               prm_hata_metni ,
               prm_hata_kodu );
RETURN v_result;
END; 
```

# sip - 星号拨号方案上下文说明

> ID：12890884
> 
> 赞同：0
> 
> 时间：2012-10-15T07:16:25.977
> 
> 标签：sip, asterisk, sip-server

我一直在学习星号拨号方案，并创建了一个非常简单的 IVR 菜单。我希望有人验证我创建的内容是否正确。我想创建一个非常简单的 IVR，它有 2 个菜单级别和一个退出选项。

```
[incoming]
exten => 123,1,Answer()
exten => 123,n,Background(main-menu)

exten => 1,1,Playback(digits/1)
exten => 1,n,Goto(incoming,123,1)

exten => 2,1,Playback(digits/2)
exten => 2,n,Goto(incoming,123,1)

exten => 9,1,Hangup()

[main-menu]
exten => 456,1,Answer()
exten => 456,n,Background(main-menu)

exten => 3,1,Playback(digits/3)
exten => 3,n,Goto(incoming,456,1)

exten => 4,1,Playback(digits/4)
exten => 4,n,Goto(incoming,456,1)

exten => 9,1,Hangup() 
```

我在上面创建了 2 个上下文

[incoming] - 处理来电 [main-menu] - 一个菜单选项。

在传入的上下文中。当扩展名为“123”时，我调用 Answer() 应用程序然后它执行后台（主菜单）。

```
if the user presses '1' it plays '1' and goes back to 123 priority '1'

if the user presses '2' it plays '2' and goes back to 123 priority '1'

if the user presses '9' it hangs up. 
```

同样在 [主菜单]

在这种情况下我还需要一个 answer() 吗？

我刚刚开始了解拨号方案，现在我有点困惑。

所以根据你的建议，我更新的拨号方案看起来像这样。

```
[incoming]
exten => 123,1,Answer()
 same => n(menuprompt),Background(main-menu)

exten => 1,1,Playback(digits/1)
 same => n,Goto(menuprompt)

exten => 2,1,Playback(digits/2)
 same => n,Goto(menuprompt)

exten => 9,1,Hangup()

[main-menu]
exten => n(menuprompt),Background(main-menu)

exten => 3,1,Playback(digits/3)
 same => n,Goto(menuprompt)

exten => 4,1,Playback(digits/4)
 same => n,Goto(menuprompt)

exten => 9,1,Hangup() 
```

感谢您的建议和解释。但我有一个问题。

1）传递给背景的“主菜单”显然是声音文件。在[传入]的情况下，我想说这样的话

```
 "press 1 to play 1"
 "press 2 to play 2"
 "press 9 to hangup" 
```

在 [main-menu] 的情况下，我希望它说类似

```
 "press 3 to play 3"
  "press 4 to play 4"
  "press 9 to hangup" 
```

我必须记录那个文件吗？这是如何运作的？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:51:01.207

您的 [传入] 上下文完全按照您的想法执行。
在开始向客户发送声音之前，您只需要 Answer() 一次。因此，如果您之前没有这样做，您只需要在 [主菜单] 中回答（）。

这是对 [incoming] 的轻微重写，在可读性和防错方面会有点“更好”。

```
[incoming]
exten => 123,1,Answer()
 same => n(menuprompt),Background(main-menu)

exten => 1,1,Playback(digits/1)
 same => n,Goto(menuprompt)

exten => 2,1,Playback(digits/2)
 same => n,Goto(menuprompt)

exten => 9,1,Hangup() 
```

“Same”完全符合听起来的样子；“使用与上述行相同的扩展名”。如果您正在执行大型拨号计划，并且在不同部分（例如 IVR）之间进行一些剪切粘贴调整，则使用“相同”可以避免分机号码出错。

“（菜单提示）”称为标签，您可以在同一上下文中转到标签，这样您就不必计算“n”来确定要使用的优先级编号。

进一步阅读：[https ://wiki.asterisk.org/wiki/display/AST/Contexts,+Extensions,+and+Priorities](https://wiki.asterisk.org/wiki/display/AST/Contexts,+Extensions,+and+Priorities)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:17:18.407

你很接近，但不完全。

将上下文视为物理盒子。你不能穿过盒子里的墙壁。因此，“标签”和扩展名仅适用于该特定框/上下文中的内容。

在您更新的拨号方案中，您需要专门转到上下文/扩展名/优先级以从一个上下文获取另一个上下文。这样，拨号计划就知道您不是在尝试引用它已经在其中运行的上下文中的某些内容。

关于您正在播放的消息提示，是的，您需要记录这些提示。从用户的角度来看，MP3 格式是最容易使用的，但它会给 PBX 带来更多的负担。在这个多核千兆赫 CPU 的时代，我很少担心这一点。

如果这将是一个面向公众的系统，请考虑您的菜单记录是您系统中最重要的部分，来自客户 POV。质量差、音量低、口音难听等的消息会“说服”您的客户，您的 IVR “工作量太大”无法使用。

# database - 语句影响性能的情况。

> ID：12890887
> 
> 赞同：2
> 
> 时间：2012-10-15T07:16:33.143
> 
> 标签：database, oracle, sybase

1- 在 Where 条件内部或外部影响性能时执行案例，影响单个查询的查询计划，影响单个查询使用的索引的选取。

2- 最好编写 2 个或多个查询，每个查询处理一个 Case when 值的选项，而不是编写一个具有 case when 语句的单个查询。

例子：

```
 Select  Acc ,
 Case 
 when  Calculation_type  = 'M' then Min_value 
 when  Calculation_type  = 'E' then Ending_value
 Else 
 Average_BLC
 END
From Table 
```

**选择**

```
Select Acc ,    Min_value 
From Table 
where   Calculation_type  = 'M'
union all 
Select  Acc , Ending_value        
From Table 
where  Calculation_type  = 'E'
union all 
Select   Acc , Average_BLC       
From Table 
where Calculation_type  = 'A' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:25:56.727

在这种情况下，第一个选项几乎肯定会更有效，因为它只需要您点击表（和/或表上的索引）一次，而不是点击它们三次（我假设您打算进行第一个查询以`WHERE calculation_type IN ('A', 'E', 'M')`使结果与第二个查询匹配）。

我想如果你有三个不同的覆盖索引，一个用于你`UNION ALL`在一起的每个查询，并且优化器使用这些索引是有意义的，那么可能差别不大。

但是，假设您必须为其中一些列访问表，您可能希望能够读取表行一次并获取所有列值，而不是为三个不同的子查询读取块三个不同的时间。

# c# - 如何用空行填充数据网格

> ID：12890890
> 
> 赞同：4
> 
> 时间：2012-10-15T07:17:07.373
> 
> 标签：c#, .net, wpf, datagrid

我有一个绑定到可观察集合的数据网格。

我想用我的 Datagrid 实现[这篇文章](https://stackoverflow.com/questions/8254736/fill-up-datagrid-with-empty-rows)中显示的类似事情，但还有其他注意事项：

1.  用户可以调整 Datagrid 的大小。用一些固定数量的行填充数据表不适用于我的目的。
2.  滚动行为应该可以正常工作。

基本上，我正在尝试制作一个类似于 Visual Studio 中的错误列表窗口。

我会很感激任何指导方针。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T13:40:33.823

这是一个棘手的问题。我的想法是创建一个装饰器，负责绘制您需要的不同线条。我不喜欢创建不必要的行对象。

这是一个开始的例子（仍然有一些小故障，需要调整，但我认为这是一个好的开始。）

**XAML**

```
<Window x:Class="WpfApplication11.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:local="clr-namespace:WpfApplication11"
    Title="MainWindow" Height="350" Width="525">

<local:MyDataGrid HeadersVisibility="Column">
    <local:MyDataGrid.Columns>
        <DataGridTextColumn Header="Column 123" Binding="{Binding}" />
        <DataGridTextColumn Header="Column 2" Binding="{Binding}" />
        <DataGridTextColumn Header="Column 33333333333333333333333" Binding="{Binding}" />
    </local:MyDataGrid.Columns>
    <sys:String>Row</sys:String>
    <sys:String>Row</sys:String>
</local:MyDataGrid>

</Window> 
```

**控制代码**

```
public static class Visual_ExtensionMethods
{
    public static T FindDescendant<T>(this Visual @this, Predicate<T> predicate = null) where T : Visual
    {
        return @this.FindDescendant(v => v is T && (predicate == null || predicate((T)v))) as T;
    }

    public static Visual FindDescendant(this Visual @this, Predicate<Visual> predicate)
    {
        if (@this == null)
            return null;

        var frameworkElement = @this as FrameworkElement;
        if (frameworkElement != null)
        {
            frameworkElement.ApplyTemplate();
        }

        Visual child = null;
        for (int i = 0, count = VisualTreeHelper.GetChildrenCount(@this); i < count; i++)
        {
            child = VisualTreeHelper.GetChild(@this, i) as Visual;
            if (predicate(child))
                return child;

            child = child.FindDescendant(predicate);
            if (child != null)
                return child;

        }
        return child;
    }
}

public class GridAdorner : Adorner
{
    public GridAdorner(MyDataGrid dataGrid)
        : base(dataGrid)
    {
        dataGrid.LayoutUpdated += new EventHandler(dataGrid_LayoutUpdated);
    }

    void dataGrid_LayoutUpdated(object sender, EventArgs e)
    {
        InvalidateVisual();
    }

    protected override void OnRender(DrawingContext drawingContext)
    {
        base.OnRender(drawingContext);

        var myDataGrid = AdornedElement as MyDataGrid;
        if (myDataGrid == null)
            throw new InvalidOperationException();

        // Draw Horizontal lines
        var lastRowBottomOffset = myDataGrid.LastRowBottomOffset;
        var remainingSpace = myDataGrid.RenderSize.Height - lastRowBottomOffset;
        var placeHolderRowHeight = myDataGrid.PlaceHolderRowHeight;
        var lineNumber = (int)(Math.Floor(remainingSpace / placeHolderRowHeight));

        for (int i = 1; i <= lineNumber; i++)
        {
            Rect rectangle = new Rect(new Size(base.RenderSize.Width, 1)) { Y = lastRowBottomOffset + (i * placeHolderRowHeight) };
            drawingContext.DrawRectangle(Brushes.Black, null, rectangle);
        }

        // Draw vertical lines
        var reorderedColumns = myDataGrid.Columns.OrderBy(c => c.DisplayIndex);
        double verticalLineOffset = - myDataGrid.ScrollViewer.HorizontalOffset;
        foreach (var column in reorderedColumns)
        {
            verticalLineOffset += column.ActualWidth;

            Rect rectangle = new Rect(new Size(1, Math.Max(0, remainingSpace))) { X = verticalLineOffset, Y = lastRowBottomOffset };
            drawingContext.DrawRectangle(Brushes.Black, null, rectangle);
        }
    }
}

public class MyDataGrid : DataGrid
{
    public MyDataGrid()
    {
        Background = Brushes.White;
        Loaded += new RoutedEventHandler(MyDataGrid_Loaded);
        PlaceHolderRowHeight = 20.0D; // random value, can be changed
    }

    protected override void OnRender(DrawingContext drawingContext)
    {
        base.OnRender(drawingContext);
    }

    private static void MyDataGrid_Loaded(object sender, RoutedEventArgs e)
    {
        var dataGrid = sender as MyDataGrid;
        if (dataGrid == null)
            throw new InvalidOperationException();

        // Add the adorner that will be responsible for drawing grid lines
        var adornerLayer = AdornerLayer.GetAdornerLayer(dataGrid);
        if (adornerLayer != null)
        {
            adornerLayer.Add(new GridAdorner(dataGrid));
        }

        // Find DataGridRowsPresenter and set alignment to top to easily retrieve last row vertical offset
        dataGrid.DataGridRowsPresenter.VerticalAlignment = System.Windows.VerticalAlignment.Top;
    }

    public double PlaceHolderRowHeight
    {
        get;
        set;
    }

    public double LastRowBottomOffset
    {
        get
        {
            return DataGridColumnHeadersPresenter.RenderSize.Height + DataGridRowsPresenter.RenderSize.Height;
        }
    }

    public DataGridColumnHeadersPresenter DataGridColumnHeadersPresenter
    {
        get
        {
            if (dataGridColumnHeadersPresenter == null)
            {
                dataGridColumnHeadersPresenter = this.FindDescendant<DataGridColumnHeadersPresenter>();
                if (dataGridColumnHeadersPresenter == null)
                    throw new InvalidOperationException();
            }
            return dataGridColumnHeadersPresenter;
        }
    }

    public DataGridRowsPresenter DataGridRowsPresenter
    {
        get
        {
            if (dataGridRowsPresenter == null)
            {
                dataGridRowsPresenter = this.FindDescendant<DataGridRowsPresenter>();
                if (dataGridRowsPresenter == null)
                    throw new InvalidOperationException();
            }
            return dataGridRowsPresenter;
        }
    }

    public ScrollViewer ScrollViewer
    {
        get
        {
            if (scrollViewer == null)
            {
                scrollViewer = this.FindDescendant<ScrollViewer>();
                if (scrollViewer == null)
                    throw new InvalidOperationException();
            }
            return scrollViewer;
        }
    }

    private DataGridRowsPresenter dataGridRowsPresenter;
    private DataGridColumnHeadersPresenter dataGridColumnHeadersPresenter;
    private ScrollViewer scrollViewer;
} 
```

这段特定的代码

```
void dataGrid_LayoutUpdated(object sender, EventArgs e)
{
    InvalidateVisual();
} 
```

你真的不想要。这是在必要时调用 OnRender 的最简单但最丑陋的方法。您应该只强制在列重新排序和列大小更改时调用 OnRender。祝你好运 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:03:09.987

我将创建一个带有 DockPanel 的 UserControl，其中包含两个 GridView，其中第一个停靠在“顶部”，第二个（带有空白行）将使用剩余空间（如果有剩余空间，取决于第一个 GridView 中的行数）。还需要一个 ScrollViewer 来实现两个 GridView 之间的滚动。

您也可以使用 DataGrid，但是您需要将列宽绑定到一些公共数据源，因为 DataGrid 没有在 Columns 上实现 INotifyPropertyChanged（但 GridView 可以）。

下面的代码是一个关于如何实现的示例（注意，为了获得更好的 GridLines 需要额外的样式） 测试当您将新对象添加到 ObjectList 时会发生什么。在您的 UserControl 上使用不同的固定大小进行测试。空白将通过“魔法”在没有滚动条的情况下被清除，但在剩余足够空间时可见。

* * *

```
<Window.Resources>
<x:Array x:Key="ObjectList" Type="{x:Type local:MyDataStructure}">
    <local:MyDataStructure Description="John" Value="13" />
    <local:MyDataStructure Description="Tom" Value="12" />
    <local:MyDataStructure Description="John" Value="13" />
    <local:MyDataStructure Description="Tom" Value="12" />
    <local:MyDataStructure Description="John" Value="13" />
    <local:MyDataStructure Description="Tom" Value="12" />
</x:Array>

<x:Array x:Key="Blanks" Type="{x:Type local:MyDataStructure}">
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
    <local:MyDataStructure Description="" Value="{x:Null}" />
</x:Array>

<GridViewColumnCollection x:Key="columns">
    <GridViewColumn Header="Description" DisplayMemberBinding="{Binding Description}" Width="100" />
    <GridViewColumn Header="Value" DisplayMemberBinding="{Binding Value}" Width="50" />
</GridViewColumnCollection>

<DataTemplate x:Key="RowTemplate">
    <Border BorderBrush="Gray" BorderThickness="1">
    <GridViewRowPresenter Content="{Binding}" Columns="{StaticResource columns}" />
    </Border>
</DataTemplate>
</Window.Resources>

<DockPanel>
<ScrollViewer VerticalScrollBarVisibility="Auto" DockPanel.Dock="Top">
    <ItemsControl DockPanel.Dock="Top">
    <GridViewHeaderRowPresenter Columns="{StaticResource columns}" DockPanel.Dock="Top" />
    <ItemsControl ItemsSource="{StaticResource ObjectList}" ItemTemplate="{StaticResource RowTemplate}" DockPanel.Dock="Top"></ItemsControl>
    </ItemsControl>
</ScrollViewer>
<ItemsControl ItemsSource="{StaticResource Blanks}" ItemTemplate="{StaticResource RowTemplate}"></ItemsControl>
</DockPanel> 
```

* * *

```
 public class MyDataStructure
  {
    public string Description { get; set; }

    public int? Value { get; set; }
  } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-18T20:58:24.990

用集合中的空对象填充它，然后在添加到网格时覆盖它们。进行某种循环检查以确定最新的“空”行在哪里。您甚至可以抓取每个非空对象，并对它们进行排序，然后重新插入它们。

不需要使用任何自定义模块，只需使用一些好的老式逻辑和 for/foreach 循环。

# jakarta-ee - CreateNamedQuery 中的 java.lang.NullPointerException

> ID：12890891
> 
> 赞同：1
> 
> 时间：2012-10-15T07:17:23.883
> 
> 标签：jakarta-ee, nullpointerexception, ejb, resultset

我有以下代码导致`java.lang.NullPointerException`：

```
List results = em.createNamedQuery("User.findByUserName").setParameter("userName", username).getResultList(); 
```

User 是实体 bean，它包含：

```
@NamedQuery(name = "User.findByUserName", query = "SELECT u FROM User u WHERE u.userName = :userName"), 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:28:10.830

一个方法`getResultList()`不会抛出`NullPointerException`（如果没有匹配，它会返回空列表），所以我猜它应该是以下之一：

*   你没有注入/初始化`EntityManager em`（你忘记 `@PersistenceContext`注释了吗？）
*   字符串`username`为空

如果 EntityManager 为 null，请检查您是否有 persistence.xml 文件（这是强制性的！）。它应该看起来像：

```
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="OEMSPU" transaction-type="JTA">
    <provider>oracle.toplink.essentials.PersistenceProvider</provider>
    <jta-data-source>ADD JNDI NAME OF YOUR DATASOURCE, e.g. jdbc/sample</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties/>
  </persistence-unit>
</persistence> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T09:10:27.823

尝试通过在公共类上方添加 @Stateless 注释使其成为无状态 Bean。为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-09T21:31:19.167

当您的 psql 引用实体属性名称时，可能会出现这种情况。我在我的 psql 中做类似的事情`:param.user = x.user`，但是试图从参数中获取属性“用户”（在 createQuery 运行时尚未传入）给了我 NPE。我希望这种事情是可能的，虽然..

# wso2 - wso2 esb重新部署自定义中介

> ID：12890895
> 
> 赞同：4
> 
> 时间：2012-10-15T07:17:49.650
> 
> 标签：wso2, esb, wso2esb

我们正在调查是否可以使用 WSO2 - ESB 作为我们的新平台。

使用我们当前的 esb，我们通过 JMS、FTP、JDBC 等不同的通道将外部系统相互连接。大多数接口是相互独立的。我们现在拥有的接口数量约为 300 个。

每个接口中的处理包括： - 连接到外部系统 - 记录输入 + 传出消息 - 将传入消息转换为传出消息。

消息的转换是用java编程的。

由于接口是相互独立的，所以当我们需要部署新的（或修改现有的）接口时，停止其他接口不是我们的选择。

我从 WSO2 esb 了解到的是，当使用自定义中介进行转换时，当自定义中介的实现发生更改时，我必须重新启动 WSO2 - ESB 服务器。这不是我们想要的，除非它是这个 esb 服务器上运行的唯一接口。

考虑到这些限制，我有什么选择：

*   现有接口的更新不应对其他接口产生任何影响。
*   消息的转换是用 Java 编程的。
*   接口数量约为 300 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:02:32.637

通常 WSO2 ESB 有[丰富的中介](http://docs.wso2.org/wiki/display/ESB450/Mediators)来处理转换和执行中介，看起来你需要的不止这些。您可以使用基于 Eclipse 的 IDE Developer Studio 添加自定义中介，而无需重新启动服务器。请参阅[此](https://stackoverflow.com/questions/12316034/wso2-carbon-studio-uploading-a-class-mediator-to-esb)以获取更多详细信息。

# python - 从 Ruby 到 Python：爬虫

> ID：12890897
> 
> 赞同：2
> 
> 时间：2012-10-15T07:18:13.367
> 
> 标签：python, ruby, web-crawler

这两天我开始学习python。我想知道在python中编写爬虫的等效方法。

所以在红宝石中我使用：

1.  `nokogiri`用于爬取 html 并通过 css 标签获取内容
2.  `Net::HTTP`并`Net::HTTP::Get.new(uri.request_uri).body`从 url 获取 JSON 数据

这些在 python 中的等价物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T07:40:33.410

1.  在lxml和美汤之间，lxml更相当于nokogiri，因为它基于libxml2，并且支持xpath/css。
2.  net/http 的等价物是 urllib2

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T07:41:32.520

好

主要是你必须将'scraper'/crawler 与将从网络服务器下载文件/数据的python lib/程序/函数和将读取此数据并解释数据的解析器分开。就我而言，我不得不废弃并获取一些“开放”但不适合下载/数据的政府信息。对于这个项目，我使用了 scrapy[1]。

主要是我设置了'starter_urls'，它们是我的机器人将抓取/获取的url，并且在我使用函数'parser'来检索/解析这些数据之后。

对于解析/检索，您将需要一些 html、lxml 提取器，因为 90% 的数据就是这样。

现在专注于您的问题：

用于数据爬取

1.  刮擦
2.  请求 [2]
3.  网址库 [3]

用于解析数据

1.  Scrapy/lxml 或 scrapy+other
2.  lxml[4]
3.  美丽的汤 [5]

请记住，“抓取”和报废不仅适用于网络，也适用于电子邮件。你可以在这里查看另一个问题 [6]

[1] = [http://scrapy.org/](http://scrapy.org/)

[2] - [http://docs.python-requests.org/en/latest/](http://docs.python-requests.org/en/latest/)

[3] - [http://docs.python.org/library/urllib.html](http://docs.python.org/library/urllib.html)

[4] - [http://lxml.de/](http://lxml.de/)

[5] - [http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/)

[6] - [Python读取我的outlook邮箱并解析邮件](https://stackoverflow.com/questions/12291294/python-read-my-outlook-email-mailbox-and-parse-messages/12342273#12342273)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T07:29:02.193

Python 中事实上的真实世界 HTML 解析器是[美丽的汤](http://www.crummy.com/software/BeautifulSoup/)。Python [requests](http://docs.python-requests.org/en/latest/index.html)库如今对于 HTTP 很流行（尽管标准库具有类似的功能，但 API 相当繁琐）。

斗志昂扬和收割机项目是真实世界的爬虫，专门为爬行而定制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T07:42:06.903

我也使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)，它是解析 HTML 的非常简单的方法。当我抓取一些网页时，我也使用[ElementTree XML API](http://docs.python.org/library/xml.etree.elementtree.html)。就个人而言，我真的很喜欢 ElementTree 库（它易于解析 XML）。

# c# - 在 STARTTLS 之后，如果 smtp 客户端发送 EHLO 命令，它不会返回任何内容

> ID：12890905
> 
> 赞同：1
> 
> 时间：2012-10-15T07:18:34.547
> 
> 标签：c#, smtp

我正在编写自己的`SMTP`客户端`c#`（用于紧凑型框架）。尝试使用`smtp.gmail.com`服务器

如果客户端发送空`，则在成功`STARTTLS`命令后。`smtp``EHLO Command response from server is`

```
message = "EHLO 10.192.4.223\r\n";
      Write(message);
      response = Response();
      if (response.Substring(0, 3) != "250")
      {
        throw new SmtpException(response);
      }
      message = "STARTTLS\r\n";
      Write(message);
      response = Response();
      if (response.Substring(0, 3) != "220")
      {
        throw new SmtpException(response);
      }

      message = "EHLO 10.192.4.223\r\n";
      Write(message);
      response = Response();
      if (response.Substring(0, 3) != "250") //empty response
      {
        throw new SmtpException(response);
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:24:35.480

因为在`STARTTLS`您不再应该发送纯文本命令之后。相反，您应该在相同的现有 TCP 套接字/连接上切换到 TLS 安全通信。

查看[RFC 2487 - 用于通过 TLS 的安全 SMTP 的 SMTP 服务扩展是](http://www.ietf.org/rfc/rfc2487.txt)怎么说的：

> 在收到对 STARTTLS 命令的 220 响应后，客户端应该在给出任何其他 SMTP 命令
> 之前启动 TLS 协商。

和

> 5.2 STARTTLS 命令的结果
> 
> TLS 握手完成后，SMTP 协议被重置为初始状态（服务器发出 220
> 服务就绪问候语后 SMTP 中的状态）。服务器必须丢弃
> 从客户端获得的任何知识，例如 EHLO 命令的参数，
> 这些信息不是从 TLS 协商本身获得的。客户端
> 必须丢弃从服务器获得的任何知识，例如 SMTP 服务扩展列表，这些信息不是从 TLS
> 协商本身获得的。客户端应该发送一个 EHLO 命令作为
> TLS 协商成功后的第一个命令。

# wpf - 在 wpf 的一个打印作业队列中打印多个文档

> ID：12890908
> 
> 赞同：1
> 
> 时间：2012-10-15T07:18:39.013
> 
> 标签：wpf

我有多个 PDF 文档我想通过单击打印按钮打印所有文档以及如何在单个作业队列中添加所有文档

# php - 用于 getCollection 的 MODX Revo 自定义排序顺序

> ID：12890912
> 
> 赞同：2
> 
> 时间：2012-10-15T07:18:51.850
> 
> 标签：php, modx, modx-revolution

我有一个带有 id 的数组：

```
$ids = array(240, 12, 400); 
```

我想按顺序获取这些对象`$modx->getCollection('modResource');`

我怎样才能做到这一点？

如果我这样做：

```
$res = $modx->getCollection('modResource', array(
    'id:IN' => $ids
)); 
```

这些盒子按 ASC 顺序排列，但我希望它们按以下顺序排列：240、12 400...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:32:08.723

试试这个：

```
$criteria = $modx->newQuery('modResource');
$criteria->sortby('FIELD(modResource.id, '.implode(',',$ids).' )', 'DESC');
$criteria->where(array(
    'id:IN' => $ids
));
$res = $modx->getCollection('modResource', $criteria); 
```

# django - 基于 Django 类的视图和表单集

> ID：12890919
> 
> 赞同：0
> 
> 时间：2012-10-15T07:19:14.707
> 
> 标签：django

我有一个名为的基于类的视图`OrganizationsCreateView`，它包括一个附加到模型表单的表单集作为该表单的实例变量。当用户输入数据时，这很好用——一个新的对象被创建得很好。当用户想要向表单集添加额外的行时，我有一个提交按钮，它在 CreateView 的 post 方法中触发条件：

```
def post(self,request,*args,**kwargs):
    if 'add_email' in request.POST:

        cp = request.POST.copy()
        cp['emails-TOTAL_FORMS'] = int(request.POST['emails-TOTAL_FORMS']) + 1
        self.initial_emails = cp

    return super(OrganizationsCreateView,self).post(request,*args,**kwargs) 
```

这可以很好地添加行，但不幸的是，每次用户添加新行时它也会添加一个新对象。我应该如何/在哪里短路这个对象添加行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:33:13.413

在研究了 Django 基于类的视图的响应流之后，这是我使用的 post 方法，效果很好：

```
def post(self,request,*args,**kwargs):
    if 'add_email' in request.POST:
        # Set the object like BaseCreateView would normally do
        self.object = None

        # Copy the form data so that we retain it after adding a new row
        cp = request.POST.copy()
        cp['emails-TOTAL_FORMS'] = int(request.POST['emails-TOTAL_FORMS']) + 1
        self.initial_emails = cp

        # Perform steps similar to ProcessFormView
        form_class = self.get_form_class()
        form = self.get_form(form_class)

        # Render a response identical to what would be rendered if the form was invalid
        return self.render_to_response(self.get_context_data(form=form))

    return super(OrganizationsCreateView,self).post(request,*args,**kwargs) 
```

另一个重要的部分是`get_form_kwargs`方法：

```
def get_form_kwargs(self):
    kwargs = super(OrganizationsCreateView,self).get_form_kwargs()
    kwargs['initial_emails'] = self.initial_emails
    return kwargs 
```

# android - 创建动态文本视图

> ID：12890925
> 
> 赞同：0
> 
> 时间：2012-10-15T07:19:29.730
> 
> 标签：android, textview, android-linearlayout

我正在尝试在 android 中创建一系列数字，例如帕斯卡三角形。我必须在android中执行。我有 tio 动态创建 textViews 并为其分配行和列值。在这里发布我的代码。

```
 btnShow.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            LinearLayout linearLayout=new LinearLayout(getApplicationContext());
            Log.d("outside","for");

            List<TextView> Rows = new ArrayList<TextView>(row);
            List<TextView> OuterColumns= new ArrayList<TextView>(col);
            List<TextView> InnerColumns = new ArrayList<TextView>(col);

            int nor=Integer.parseInt(IEdit.getText().toString());

            for(row=1;row<=nor;row++)
            {
                Log.d("before","text");
                /*LayoutParams lp = new LayoutParams(
                           LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);*/

                text_rows = new TextView(getApplicationContext());
                text_rows.setText(String.valueOf(row));
                Log.d("Inside","rows");
                Log.i("EditText","Number"+nor);

                for(col=1;col<row-1;col++)
                Log.d("Inside","col");
                text_cols=new TextView(getApplicationContext());
                text_cols.setText(String.valueOf(col));

                for(col=row-1;col>=row;col--)
                text_cols2=new TextView(getApplicationContext());
                text_cols2.setText(String.valueOf(col));

                linearLayout.addView(text_rows);
                linearLayout.addView(text_cols);
                linearLayout.addView(text_cols2);

                Rows.add(text_rows);
                OuterColumns.add(text_cols);
                InnerColumns.add(text_cols2);

            } 
```

程序在打印 inside rows 语句后给出空指针异常而崩溃。我尝试了多种方式来创建 textViews 数组，在 for 循环中独立创建它们并添加它们。但在所有上下文中，我都得到了 nullPointerException。作为android的新手，我无法弄清楚为什么会这样？请帮帮我..提前谢谢

我什至在发布我的 logcat：

```
10-15 12:57:18.199: W/dalvikvm(1209): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-15 12:57:18.219: E/AndroidRuntime(1209): FATAL EXCEPTION: main
10-15 12:57:18.219: E/AndroidRuntime(1209): java.lang.NullPointerException
10-15 12:57:18.219: E/AndroidRuntime(1209):     at com.example.pyramid_of_numbers.MainActivity$1.onClick(MainActivity.java:66)
10-15 12:57:18.219: E/AndroidRuntime(1209):     at android.view.View.performClick(View.java:2408)
10-15 12:57:18.219: E/AndroidRuntime(1209):     at android.view.View$PerformClick.run(View.java:8816)
10-15 12:57:18.219: E/AndroidRuntime(1209):     at android.os.Handler.handleCallback(Handler.java:587)
10-15 12:57:18.219: E/AndroidRuntime(1209):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-15 12:57:18.219: E/AndroidRuntime(1209):     at android.os.Looper.loop(Looper.java:123)
10-15 12:57:18.219: E/AndroidRuntime(1209):     at android.app.ActivityThread.main(ActivityThread.java:4627)
10-15 12:57:18.219: E/AndroidRuntime(1209):     at java.lang.reflect.Method.invokeNative(Native Method)
10-15 12:57:18.219: E/AndroidRuntime(1209):     at java.lang.reflect.Method.invoke(Method.java:521)
10-15 12:57:18.219: E/AndroidRuntime(1209):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-15 12:57:18.219: E/AndroidRuntime(1209):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-15 12:57:18.219: E/AndroidRuntime(1209):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T14:28:28.847

我认为您应该取消注释 LayoutParams 并使用它。

# android - 运行时修改字体

> ID：12890927
> 
> 赞同：0
> 
> 时间：2012-10-15T07:19:48.447
> 
> 标签：android, fonts

有没有办法在运行时为android修改字体或组合两个字体文件。我需要为字体添加更多字符支持。

因为，如果字体文件中不存在字符，设备会为该字符显示一个正方形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:40:54.470

如果您知道哪些字符会给您带来麻烦，那么您可能想试试这个：

1.  找到这些字符的位置，让它们是 i、j、k（等等），让 N 是完整字​​符串的大小。
2.  然后做类似的事情：

    ```
    String yourString = "Some Text Here"; // this is you string
    Spannable spannable = new SpannableString(yourString);
    // you can also iterate, instead of next few steps
    // typeface1 and typeface2 are your two different font styles
    spannable.setSpan(typeface1, 0, i-1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    spannable.setSpan(typeface2, i, i+1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    spannable.setSpan(typeface1, i+1, j-1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    spannable.setSpan(typeface2, j, j+1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    spannable.setSpan(typeface1, j+1, k-1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
    spannable.setSpan(typeface2, k, k+1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); // and so on
    spannable.setSpan(typeface1, k+1, N, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
    textview1.setText(spannable); // this is your textview and setting of font 
    ```

或者您可以创建您的自定义字体并将其应用于您想要的视图。因为您可以为所有字符应用第一个字体，除了它无法处理的字符。对于那些，你可以申请第二个。我不知道这有多可行。我会试一试，让你知道。

看看这个有没有用。

# iphone - 呈现 UIActivityViewController 时隐藏的 UIToolbar 的 UIBarButtonItems

> ID：12890930
> 
> 赞同：1
> 
> 时间：2012-10-15T07:20:12.350
> 
> 标签：iphone, ios, uibarbuttonitem, uitoolbar, uiactivityviewcontroller

![隐藏按钮](../Images/5ee4b02c365bfe66825d88b93fb2abbe.png)这对我来说似乎是一个错误，但也许有人可以想到一个解决方法？

基本上，如果您有一个 custom `UIToolbar`，它的按钮项会在您呈现 a 时自动隐藏`UIActivityViewController`，并在您关闭它时重新出现。这只是 iPhone 上的情况。由于 UIActivityViewController 不会隐藏整个屏幕，因此按钮消失在变暗的屏幕后面看起来很奇怪。

要复制，只需启动单个视图项目并在视图控制器上使用以下代码：

```
- (void)viewDidLoad {
    UIToolbar *toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, 40)];
    UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(didTapAction)];
    toolbar.items = [NSArray arrayWithObject:button];
    [self.view addSubview:toolbar];
}

- (void)didTapAction {
    NSArray *items = [NSArray arrayWithObjects:@"Text", nil];
    UIActivityViewController *sharing = [[UIActivityViewController alloc] initWithActivityItems:items applicationActivities:nil];
    [self presentViewController:sharing animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:30:06.203

找到了解决方法。只需在演示之前删除所有项目，然后立即将它们添加回来。

```
- (void)didTapAction {
    NSArray *items = [NSArray arrayWithObjects:@"Text", nil];
    UIActivityViewController *sharing = [[UIActivityViewController alloc] initWithActivityItems:items applicationActivities:nil];
    NSArray *barItems = toolbar.items;
    toolbar.items = nil;
    [self.navigationController presentViewController:sharing animated:YES completion:nil];
    toolbar.items = barItems;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T16:40:47.630

知道这是一个很老的线程，但是那些在这个页面上寻找解决方案的人，给你：

使用 iOS7，您可以使用这种方法来显示/隐藏您的工具栏按钮：

```
if(// your code Condition) 
```

{ self.toolbarBtn1.enabled = 是；self.toolbarBtn1.tintColor = nil; } 其他 { self.toolbarBtn1.enabled = NO; self.toolbarBtn1.tintColor = [UIColor clearColor]; }

# ruby - 自动重新运行失败的 rspec 测试

> ID：12890931
> 
> 赞同：1
> 
> 时间：2012-10-15T07:20:13.750
> 
> 标签：ruby, rspec

我的测试中有一些代码可以与一些外部服务一起使用。该服务不是很稳定，因此有时会无缘无故崩溃。但在 80% 的运行中，它运行良好。

所以我想要一种方法来自动重新运行所有失败的 rspecs 几次（例如 2 或 3 次）。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:14:25.537

很多人会说您的测试实际上不应该影响外部服务，这就是这样做的原因之一。您的测试不应失败，因为某些外部服务已关闭。

TL;DR 使用模拟和存根或替换那些外部服务调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:40:19.360

与其重新运行失败的规范，你不能只运行访问服务的方法一定次数并运行结果的逻辑 OR 的期望吗？

所以而不是：

```
it "returns expected value for some args" do
   unstable_external_service(<some args>).should == <expected return value>
end 
```

做这样的事情：

```
def run_x_times(times, args)
  return nil if times == 0
  unstable_external_service(args) || run_x_times(times-1)
end

it "returns expected value for some args" do
  run_x_times(10, <some args>).should == <expected return value>
end 
```

您可以在任何时候访问服务时在整个测试中使用相同的包装方法。我在这里假设您的服务`nil`在失败时返回，但如果不是，您可以更改它以适合您的特定情况 - 您会得到一般的想法。

# sql - 将 SQL 写入关系代数

> ID：12890933
> 
> 赞同：1
> 
> 时间：2012-10-15T07:20:17.387
> 
> 标签：sql, relational-algebra

如何将此 SQL 查询写入关系代数？

```
Select Distinct S.Name
From Student S, Transcript T1, Transcript T2
WHERE T1.StudId = S.Id AND T2.StudId = S.Id And
(T1.Semester =’S1997’ AND T2.Semester = ’F1998’) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:59:57.543

当我无法测试它并且我不知道您的关系模式时，很难说出确切的表达方式，但是像这样尝试

```
\project_{Name}
{
    {
        Student \join_{Id = StudId} \select_{Semester='S1997'} Transcript
    } \join_{Id = StudId}
    {
       \select_{Semester='F1998'} Transcript
    }
} 
```

# java - Delphi Web 服务中的复杂类型

> ID：12890934
> 
> 赞同：4
> 
> 时间：2012-10-15T07:20:25.500
> 
> 标签：java, web-services, delphi, soap, complextype

如何在 Delphi Web 服务中创建复杂类型，特别是 soapenc:Array，在与使用它的类型定义相同的命名空间中可用。目前，如果我尝试从 Delphi 应用程序生成的 wsdl 在 Java 中创建一个新的 Web 服务，Java 会给出以下错误：

```
Error resolving component 'soapenc:Array'. It was detected that 'soapenc:Array' is in namespace 'http://schemas.xmlsoap.org/soap/encoding/', but components from this namespace are not referenceable from schema document........... 
```

如果我分析 wsdl，我所有的方法和类型都使用 namepsace 'targetNamespace="urn:WebserviceIntf"' 但使用 soapenc:Array 的类型定义如下：

```
<xs:complexType name="ArrayOfClientDetailAcc">
<xs:complexContent>
<xs:restriction base="soapenc:Array">
<xs:sequence/>
<xs:attribute xmlns:n1="http://schemas.xmlsoap.org/wsdl/" ref="soapenc:arrayType" n1:arrayType="ns2:TClientDetailAccArray[]"/>
</xs:restriction>
</xs:complexContent>
</xs:complexType> 
```

如果无法更改这一点，我将不胜感激就在 Java 中复制我的 Delphi Web 服务而不更改接口的最佳方法提出建议，这会破坏我们连接到它的客户端。

感谢您的帮助！

我已经尝试按照建议的链接使用 Axis，但这也给出了错误：

```
C:\axis>java org.apache.axis.wsdl.WSDL2Java http://mywebservice?wsdl
- Unable to find required classes (javax.activation.DataHandler and javax.mail.i
nternet.MimeMultipart). Attachment support is disabled.
WSDLException (at /definitions/binding/operation[1]/input): faultCode=INVALID_WS
DL: Element '{http://schemas.xmlsoap.org/wsdl/}input' contained unexpected attri
butes: 'message':
        at com.ibm.wsdl.util.xml.DOMUtils.throwWSDLException(Unknown Source)
        at com.ibm.wsdl.xml.WSDLReaderImpl.parseBindingInput(Unknown Source)
        at com.ibm.wsdl.xml.WSDLReaderImpl.parseBindingOperation(Unknown Source)

        at com.ibm.wsdl.xml.WSDLReaderImpl.parseBinding(Unknown Source)
        at com.ibm.wsdl.xml.WSDLReaderImpl.parseDefinitions(Unknown Source)
        at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
        at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
        at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
        at org.apache.axis.wsdl.symbolTable.SymbolTable.populate(SymbolTable.jav
a:516)
        at org.apache.axis.wsdl.symbolTable.SymbolTable.populate(SymbolTable.jav
a:495)
        at org.apache.axis.wsdl.gen.Parser$WSDLRunnable.run(Parser.java:361)
        at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:06:31.627

抱歉 - 根据您的评论（“在 Netbeans 中，使用“来自 WSDL 的新 Web 服务””），很明显您不想创建 Java Web 服务客户端而是创建 Web 服务服务器。所以我的回答当然没有帮助。

* * *

另请参阅：[Delphi SOAP 服务器 - 文档/文字 - 可能吗？](https://stackoverflow.com/questions/4308343/delphi-soap-server-document-literal-possible)

为了解决这个问题，一种解决方案是：

*   使用 C# (WCF) 或 Java (JAX-WS) 实现新的 Web 服务服务器

接着

*   在现有的 Delphi 应用程序和 Web 服务之间构建一个简单的消息传递层

或者

*   使用 Free Pascal [Web 服务工具包](http://wiki.freepascal.org/Web_Service_Toolkit)

然而，这两种方式都会使您的新服务与旧的 Delphi 客户端不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-14T11:22:37.843

在 Maven 中也一样`axistools:1.4`。此异常由旧的`wsdl4j`<= 1.5.3 引发。至少升级到`1.6.1`或等待更新的netbeans。

# django - 如何翻译应用程序模板

> ID：12890935
> 
> 赞同：3
> 
> 时间：2012-10-15T07:20:29.663
> 
> 标签：django, django-templates, django-multilingual

我想在我的应用程序中使用多种语言，为此我遵循了这个[文档](http://devdoodles.wordpress.com/2009/02/14/multi-language-support-in-a-django-project/)

在 locale 文件夹中创建 django.po 后，我打开了它，因为这个文件包含“#”，它告诉你可以翻译哪一行。但是这个文件只包含管理部分，它没有我的应用程序模板，即我的应用程序的 HTML 文件。

那么我如何翻译这些 HTML 文件，或者我应该怎么做才能使 django.po 文件也可以包含我的应用程序模板。

我只关注了这个[文档](http://devdoodles.wordpress.com/2009/02/14/multi-language-support-in-a-django-project/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:48:50.360

在运行之前，您需要在 html 文件中使用`{% trans %}`或模板标签`{% blocktrans %}`

```
python manage.py makemessages -l <locale> 
```

如果你已经这样做了，并且你的 HTML 模板在你的源代码树中，那么 makemessages 应该会选择它们。如果您没有使用这些模板标签，那么您将不会在 .po 文件中看到它们的任何输出。

# python - 使用字典显示值以及它们出现的次数

> ID：12890936
> 
> 赞同：0
> 
> 时间：2012-10-15T07:20:29.667
> 
> 标签：python

我被告知

> 通过使用字典（或您对第 4 部分的解决方案），编写一个方法 at_least(a, n)，它接受一个列表 a 和一个整数 n 作为参数，并返回一个仅包含 a 中出现在至少n次。对于完整的标记，列表应按元素在 a 中的首次出现顺序包含元素。

我能够在不使用字典的情况下弄清楚这一点，

```
def at_least2(a, n):
    return [x for x in a if a.count(x) is n] 
```

我想知道如何使用字典来写这个？

输入是：

```
a = [-6, 8, 7, 3, 2, -9, 1, -3, 2, -4, 4, -8, 7, 8, 2, -2, -7, 0, 1, 
     -9, -3, -7, -3, -5, 6, -3, 6, -3, -10, -8]

def at_least(a, 2): 
```

和输出：

```
[8, 7, 2, -9, 1, -3, 2, -8, 7, 8, 2, -7, 1, -9, -3, -7, -3, 6, -3, 6, -3, -8] 
```

*编辑*：

我不明白如何使用字典，但输出不是字典形式？我的理解是字典对每个对象都有值。我不确定我是否使用了正确的术语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:44:56.977

这里最好的选择是 `collections.Counter()`：

```
from collections import Counter
def atleast(a,n):
    c=Counter(a)
    return [x for x in c if c[x]>=2]

a = [-6, 8, 7, 3, 2, -9, 1, -3, 2, -4, 4, -8, 7, 8, 2, -2, -7, 0, 1, -9, -3, -7, -3, -5, 6, -3, 6, -3, -10, -8]
print atleast(a,2) 
```

**输出：**

```
[1, 2, 6, 7, 8, -9, -8, -7, -3] 
```

或者您也可以使用`setdefault()`：

```
>>> a = [-6, 8, 7, 3, 2, -9, 1, -3, 2, -4, 4, -8, 7, 8, 2, -2, -7, 0, 1, -9, -3, -7, -3, -5, 6, -3, 6, -3, -10, -8]
>>> dic={}
>>> for x in a:
...   dic[x]=dic.setdefault(x,0)+1
... 
>>> dic
{0: 1, 1: 2, 2: 3, 3: 1, 4: 1, 6: 2, 7: 2, 8: 2, -10: 1, -9: 2, -8: 2, -7: 2, -6: 1, -5: 1, -4: 1, -3: 5, -2: 1} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:33:08.860

我对此的看法，仅使用 a`dict`而不是`collections`等...

对于 中的每个元素`mylist`，创建一个 value->list 查找，所以我们知道它`value`是唯一的，那`len(value)`就是出现的次数，并且`value[0]`是第一次出现的索引。

```
mylist = [-6, 8, 7, 3, 2, -9, 1, -3, 2, -4, 4, -8, 7, 8, 2, -2, -7, 0, 1, -9, -3, -7, -3, -5, 6, -3, 6, -3, -10, -8]
mydict = {}
for idx, val in enumerate(mylist):
    mydict.setdefault(val, []).append(idx) 
```

这使得`mydict`：

> {0: [17], 1: [6, 18], 2: [4, 8, 14], 3: [3], 4: [10], 6: [24, 26], 7: [2, 12], 8: [1, 13], -10: [28], -9: [5, 19], -8: [11, 29], -7: [16, 21], -6: [0 ], -5: [23], -4: [9], -3: [7, 20, 22, 25, 27], -2: [15]}

我们可以获得多次出现的元素（这使用列表推导）：

```
something = [k for k, v in mydict.iteritems() if len(v) > 1]
print something
# [1, 2, 6, 7, 8, -9, -8, -7, -3] 
```

但是，为了获得额外的信用，我们可以使用以下命令对其进行排序以返回原始订单：

```
something.sort(key=mydict.get)
print something
# [8, 7, 2, -9, 1, -3, -8, -7, 6] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:12:03.780

```
def atLeast(a,n):
    A = {}
    for i in a:
        if i not in A:
            A[i] = 0
        A[i] += 1 

    new_a = []
    for i in a: 
        if A[i] >= n:
            new_a.append(i)
    return new_a 
```

完整标记：

```
def atLeast(a,n):
    A = {}
    for i in a:
        if i not in A:
            A[i] = 0
        A[i] += 1 

    new_a = []
    Appended = {} 
    for i in a: 
        if i in Appended:
            continue 
        Appended[i] = 0 
        if A[i] >= n:
            new_a.append(i)
    return new_a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T07:23:02.750

使用默认字典：

```
In [7]: l=[1,2,34,436,1,2,3,4,12,3,2,1]

In [8]: import collections
   ...: d = collections.defaultdict(int)
   ...: for x in l: d[x] += 1
   ...: 

In [9]: d
Out[9]: defaultdict(<type 'int'>, {1: 3, 2: 3, 3: 2, 4: 1, 12: 1, 34: 1, 436: 1}) 
```

只是一个字典：

```
d = {}
[d.__setitem__(item,1+d.get(item,0)) for item in l]
print d

{1: 3, 2: 3, 3: 2, 4: 1, 12: 1, 34: 1, 436: 1} 
```

或使用计数：

```
d=dict( [ (i, l.count(i)) for i in set(l) ] ) 
```

将多次出现的项目作为列表获取：

```
In [17]: [x for x in set(l) if d[x] > 1]
Out[17]: [1, 2, 3] 
```

将多次出现的项目作为字典获取：

```
In [21]: dict( [ (i, l.count(i)) for i in set(l) if l.count(i) > 1 ] )
Out[21]: {1: 3, 2: 3, 3: 2} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T07:31:16.723

试试下面的代码： -

```
>>> l=[1,2,34,436,1,2,3,4,12,3,2,1]
>>> dic = {}

>>> for x in l:
        if x in dic:
            dic[x] += 1
        else:
            dic[x] = 1

>>> dic
{1: 3, 2: 3, 3: 2, 4: 1, 12: 1, 34: 1, 436: 1}

# Get list of (key, value) tuple, for key occuring more than once.
>>> list_new = [(key, value) for key, value in dic.iteritems() if dic[key] > 1] 
>>> list_new
[(1, 3), (2, 3), (3, 2)]

# Create dictionary out of list
>>> dic2 = dict(list_new)
>>> dic2
{1: 3, 2: 3, 3: 2} 
```

# php - PHP - 上传、重命名和替换

> ID：12890937
> 
> 赞同：0
> 
> 时间：2012-10-15T07:20:41.650
> 
> 标签：php, image, upload, replace, rename

我一直在寻找一种上传图片的方法。好吧，我可以上传图片，但我无法让它执行以下操作。

首先，我希望它仅限于 PNG 图像，然后我希望将其重命名为 pic.png，最后它将替换上传器脚本上方目录中名为 pic.png 的另一个文件。

我在互联网上尝试了许多不同的脚本，但找不到一个可以工作的脚本。这是我当前的上传者代码。

```
<?php
    $allowedExts = array("png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "image/png"))
    && ($_FILES["file"]["size"] < 2000000)
    && in_array($extension, $allowedExts)) {
        if ($_FILES["file"]["error"] > 0) {
            echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
        } else {
            echo "Upload: " . $_FILES["file"]["name"] . "<br />";
            echo "Type: " . $_FILES["file"]["type"] . "<br />";
            echo "Size: " . ($_FILES["file"]["size"] / 2000) . " Kb<br />";
            echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";\
            if (file_exists("upload/" . $_FILES["file"]["name"])) {
                echo $_FILES["file"]["name"] . " already exists. ";
            } else {
                move_uploaded_file($_FILES["file"]["tmp_name"],
                "../" . $_FILES["file"]["name"]);
                echo "Stored in: " . "../" . $_FILES["file"]["name"];
            }
        }
    } else {
        echo "Invalid file";
    }
?> 
```

感谢大量互联网！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:27:06.640

替换它：

```
 if (file_exists("upload/" . $_FILES["file"]["name"])) {
        echo $_FILES["file"]["name"] . " already exists. ";
    } else {
        move_uploaded_file($_FILES["file"]["tmp_name"],
        "../" . $_FILES["file"]["name"]);
        echo "Stored in: " . "../" . $_FILES["file"]["name"];
    } 
```

有了这个：

```
 move_uploaded_file($_FILES["file"]["tmp_name"],"../pic.png"); 
```

# jquery - 在 iPhone 中使用 Jquery 更改背景颜色的延迟

> ID：12890941
> 
> 赞同：1
> 
> 时间：2012-10-15T07:20:55.120
> 
> 标签：jquery

我有以下代码在单击时更改链接的背景颜色。

```
function showSelectEffect(obj) {
        $(obj).css("background-color", "#d7d7d7");
            } 
```

该方法称为链接的onclick，如下所示

```
<a onclick="showSelectEffect(this);" href="test.html">sample text</a> 
```

问题是突出显示在延迟几秒钟后发生，并且在单击时不会立即发生。我尝试在 onmousedown 事件上调用 showSelectEffect 函数，但它仍然相同。请让我知道如何提高性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:28:46.833

```
<a class="showSelectEffect" href="test.html">sample text1</a>
<a class="showSelectEffect" href="test.html">sample text2</a>
<a class="showSelectEffect" href="test.html">sample text3</a>
<a class="showSelectEffect" href="test.html">sample text4</a>​

$('.showSelectEffect').on('click',function(){
  event.preventDefault();
  $(this).css("background-color", "#d7d7d7");
});​ 
```

[***在此处尝试演示***](http://jsfiddle.net/VKLXM/)

您可以尝试使用 css 而不是使用 jquery，这会更快一些。

```
a:active {
   background-color:#d7d7d7; //this line should go in your stylesheet
} 
```

尽量保持 JS 代码和 HTML 分开。这是一个很好的做法。

另一种选择是在样式表中定义 css 类，如下所示。

```
a.showSelectEffectColor {
   background-color:#d7d7d7; //this line should go in your stylesheet
}

 $('.showSelectEffect').on('click',function(){
      event.preventDefault();
      $(this).addClass('showSelectEffectColor');
    });​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:26:38.620

为什么不使用`:active`css 属性？

```
/* CSS */
a:active {
   background-color:#d7d7d7;
}

/* HTML */
<a href="test.html">test</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:31:03.547

你也可以使用`addClass`函数

```
.changeBackground{
   background-color:#d7d7d7;
}

$(body).addClass('changeBackground'); 
```

# java - 声纳成功执行，未报告代码覆盖率

> ID：12890945
> 
> 赞同：0
> 
> 时间：2012-10-15T07:21:03.613
> 
> 标签：java, ant, build, build-automation, sonarqube

我有一个 java 项目，我希望对使用 Sonar 进行一些分析。

我有一个 build.xml 文件，其目标名为 sonar，它只是指出我的 sonar-ant-task.jar-file 所在的位置，剩下的就是：

```
<sonar:sonar workDir="${source.path}" key="${ant.project.name}" version="${version}" xmlns:sonar="antlib:org.sonar.ant"> 
```

当我运行它时，我得到了这个：

声纳：

```
[sonar:sonar] Apache Ant(TM) version 1.8.2 compiled on December 20 2010
[sonar:sonar] Sonar Ant Task version: 1.0
[sonar:sonar] Sonar work directory: PATH/src
[sonar:sonar] Sonar server: http://localhost:9000
[sonar:sonar] Sonar version: 3.0.1
[sonar:sonar] 09:16:47.958 INFO      o.s.c.p.Database - Create JDBC datasource
[sonar:sonar] 09:16:48.672 INFO  actDatabaseConnector - Initializing Hibernate
[sonar:sonar] 09:16:50.700 INFO  .s.b.b.ProjectModule - -------------  Analyzing package
[sonar:sonar] 09:16:51.407 INFO  .s.b.ProfileProvider - Selected quality profile : [name=Sonar way with Findbugs,language=java]
[sonar:sonar] 09:16:51.426 INFO  nPluginsConfigurator - Configure maven plugins...
[sonar:sonar] 09:16:51.549 INFO        org.sonar.INFO - Compare to previous analysis (2012-10-15)
[sonar:sonar] 09:16:51.588 INFO        org.sonar.INFO - Compare over 5 days (2012-10-10, analysis of 2012-10-15 09:09:26.826)
[sonar:sonar] 09:16:51.621 INFO        org.sonar.INFO - Compare over 30 days (2012-09-15, analysis of 2012-10-15 09:09:26.826)
[sonar:sonar] 09:16:51.664 INFO  .b.p.SensorsExecutor - Initializer ProjectFileSystemLogger...
[sonar:sonar] 09:16:51.668 INFO  .b.p.SensorsExecutor - Initializer ProjectFileSystemLogger done: 4 ms
[sonar:sonar] 09:16:51.679 INFO  p.PhasesTimeProfiler - Sensor JavaSourceImporter...
[sonar:sonar] 09:16:51.713 INFO  p.PhasesTimeProfiler - Sensor JavaSourceImporter done: 34 ms
[sonar:sonar] 09:16:51.713 INFO  p.PhasesTimeProfiler - Sensor SquidSensor...
[sonar:sonar] 09:16:51.745 INFO  .s.p.s.SquidExecutor - Java Squid scan...
[sonar:sonar] 09:16:51.749 INFO  .s.p.s.SquidExecutor - Java Squid scan done: 4 ms
[sonar:sonar] 09:16:51.749 INFO  p.PhasesTimeProfiler - Sensor SquidSensor done: 36 ms
[sonar:sonar] 09:16:51.750 INFO  p.PhasesTimeProfiler - Sensor SurefireSensor...
[sonar:sonar] 09:16:51.751 INFO  s.p.s.SurefireSensor - parsing PATH\src\target\surefire-reports
[sonar:sonar] 09:16:51.757 INFO  p.PhasesTimeProfiler - Sensor SurefireSensor done: 7 ms
[sonar:sonar] 09:16:51.757 INFO  p.PhasesTimeProfiler - Sensor CpdSensor...
[sonar:sonar] 09:16:51.757 INFO        org.sonar.INFO - SonarEngine is used
[sonar:sonar] 09:16:51.758 INFO  p.PhasesTimeProfiler - Sensor CpdSensor done: 0 ms
[sonar:sonar] 09:16:51.758 INFO  p.PhasesTimeProfiler - Sensor ProfileSensor...
[sonar:sonar] 09:16:52.403 INFO  p.PhasesTimeProfiler - Sensor ProfileSensor done: 645 ms
[sonar:sonar] 09:16:52.404 INFO  p.PhasesTimeProfiler - Sensor ProfileEventsSensor...
[sonar:sonar] 09:16:52.435 INFO  p.PhasesTimeProfiler - Sensor ProfileEventsSensor done: 31 ms
[sonar:sonar] 09:16:52.436 INFO  p.PhasesTimeProfiler - Sensor VersionEventsSensor...
[sonar:sonar] 09:16:52.465 INFO  p.PhasesTimeProfiler - Sensor VersionEventsSensor done: 29 ms
[sonar:sonar] 09:16:52.750 INFO  p.PhasesTimeProfiler - Execute decorators...
[sonar:sonar] 09:16:52.910 INFO  .b.p.UpdateStatusJob - ANALYSIS SUCCESSFUL, you can browse http://localhost:9000
[sonar:sonar] 09:16:52.911 INFO  b.p.PostJobsExecutor - Executing post-job class org.sonar.plugins.core.batch.IndexProjectPostJob
[sonar:sonar] 09:16:52.969 INFO  b.p.PostJobsExecutor - Executing post-job class org.sonar.plugins.dbcleaner.ProjectPurgePostJob
[sonar:sonar] 09:16:52.982 INFO  .p.d.p.KeepOneFilter - -> Keep one snapshot per day between 2012-09-17 and 2012-10-15
[sonar:sonar] 09:16:52.984 INFO  DefaultPeriodCleaner - <- Delete snapshot: 2012-10-15T09:11:13+0200 [463]
[sonar:sonar] 09:16:53.006 INFO  .p.d.p.KeepOneFilter - -> Keep one snapshot per week between 2011-10-17 and 2012-09-17
[sonar:sonar] 09:16:53.006 INFO  .p.d.p.KeepOneFilter - -> Keep one snapshot per month between 2007-10-22 and 2011-10-17
[sonar:sonar] 09:16:53.007 INFO  .d.p.DeleteAllFilter - -> Delete data prior to: 2007-10-22
[sonar:sonar] 09:16:53.011 INFO  o.s.c.purge.PurgeDao - -> Clean package [id=404]
BUILD SUCCESSFUL
Total time: 7 seconds 
```

当我浏览到`http://localhost:9000`我可以看到带有我的项目的 Sonar 仪表板但没有分析任何行时，它都是空的，并且代码覆盖率显示为“-”。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:35:38.803

sonar:sonar 标签下的 build.xml 中是否有任何配置选项？

看来您使用的是 Sonar Ant 任务 v1.0。在这种情况下，您必须根据[此 wiki 页面](http://docs.codehaus.org/display/SONAR/Analyse+with+Ant+Task+1.0)定义源代码的位置。

如果您是 Sonar 的新手，也许您应该尝试[Sonar Ant 任务 v2.0](http://docs.codehaus.org/display/SONAR/Analyzing+with+Sonar+Ant+Task)。

# sql-loader - 使用 sql loader 加载的日期格式

> ID：12890953
> 
> 赞同：0
> 
> 时间：2012-10-15T07:21:48.827
> 
> 标签：sql-loader

我有 03-JUN-2012 16:06:54 格式。如何使用 SQl 加载程序执行此操作。在控制文件中使用它时，我使用了开始日期“dd-mmm-yy HH:MM:SS”，但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:56:32.820

您应该在控制文件中使用以下内容

开始日期“dd-mmm-yy hh24:mi:ss”

# python - 如何使用基于 django 类的视图和装饰器将数据附加到视图方法？

> ID：12890955
> 
> 赞同：1
> 
> 时间：2012-10-15T07:21:56.873
> 
> 标签：python, django, django-views, django-class-based-views

我有以下装饰器：

```
def my_decorator(setting_value):

    def actual_decorator(func):
        func.my_setting = setting_value
        return func

    return actual_decorator 
```

我正在尝试`my_setting`在这样的上下文处理器中阅读：

```
# Resolve the url
try:
    page_resolve = resolve(request.path_info)
except Resolver404:
    return {}

# Get the page view function
page_view = page_resolve.func

if (page_view.my_setting):
    return extra_context_data
else
    return {} 
```

当使用 CBV 时，整个方案就崩溃了。如何使装饰器与 FBV 和 CBV 兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:36:53.223

将装饰器应用于`dispatch`功能：

```
class MyView(View):
    @my_decorator
    def dispatch(self, *args, **kwargs):
        return super(MyView, self).dispatch(*args, **kwargs) 
```

# android - 非活动类中的警报对话框

> ID：12890957
> 
> 赞同：0
> 
> 时间：2012-10-15T07:22:06.477
> 
> 标签：android

我有一个代码可以检查一些数据并在非活动类中显示警报。但是在运行应用程序时崩溃并且不显示警报对话框。我用下面的代码...

```
if( str.isEmpty() || strPort.isEmpty()){
        new AlertDialog.Builder(Mtx.getContext())
                    .setMessage("Please provide a valid String")
        .setTitle("HAT Alert !!!")
        .setCancelable(true)
        .setPositiveButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton){
                return;
            }
        }).show(); 
```

Mtx.getContent() 方法的代码

```
public class Mtx extends Application {
public static Context context;

@Override
public void onCreate(){
   super.onCreate();
   Mtx.context = getApplicationContext();
}

public static Context getContext(){
       return Mtx.context;
}
} 
```

日志猫中显示的错误消息

```
10-15 12:50:33.708: E/global(329): Deprecated Thread methods are not supported.
10-15 12:50:33.708: E/global(329): java.lang.UnsupportedOperationException
10-15 12:50:33.708: E/global(329):  at java.lang.VMThread.stop(VMThread.java:85)
10-15 12:50:33.708: E/global(329):  at java.lang.Thread.stop(Thread.java:1280)
10-15 12:50:33.708: E/global(329):  at java.lang.Thread.stop(Thread.java:1247)
10-15 12:50:33.708: E/global(329):  at mediatronix.HAT.Splash$1.run(Splash.java:36) 
```

请纠正我

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:38:10.980

你确定，对话框是问题吗？您`Splash.java`文件的第 36 行是什么？因为根据堆栈跟踪，存在问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T07:43:00.437

您根本**无法**显示`AlertDialog`使用应用程序的上下文。对话框应该使用其上下文附加到活动的窗口并在其生命周期内保持活动状态。因此，您只需要提供一个活动的上下文，然后您就可以显示一个对话框。

作为替代方案，我建议您在**AndroidManifest.xml**`Activity`中使用以对话框形式显示主题。这将用于操作对话框，但实际上它将是一个活动。作为一个优势，只要您可以访问应用程序的上下文，您就可以在代码中的任何位置启动您的活动。`android:theme="@android:style/Theme.Dialog"`

 **有关更多信息，请阅读[此](https://stackoverflow.com/questions/10347184/difference-and-when-to-use-getapplication-getapplicationcontext-getbasecon/10347346#10347346)答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T07:49:18.010

在 Activity 中创建 Non Activity 类时，将上下文传递给它的构造函数：

```
NonActivityClass nonActivityClass = new  NonActivityClass(this); 
```

非活动构造函数：

```
Context mContext;
public NonActivityClass(Context context){
    mContext = context;
} 
```

然后使用：

`new AlertDialog.Builder(mContext)...`在非活动类

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T07:33:34.580

我的猜测是你的上下文是空的......

您不能在开始检查数据之前将上下文发送到“检查某些数据的代码”，而不是尝试获取不存在的上下文吗？

否则，请创建一个创建警报对话框的活动，然后从您的“服务”类启动该活动。**

# php - 给定开始日期和天数，计算下一个非周末（周六、周日）

> ID：12890959
> 
> 赞同：0
> 
> 时间：2012-10-15T07:22:25.870
> 
> 标签：php, function, date, count

所以，我有这个功能：

```
function calculateNextDate($startDate, $days)
{
    $dateTime = new DateTime($startDate);

        while($days) {
            $dateTime->add(new DateInterval('P1D'));    

            if ($dateTime->format('N') < 6) {
                $days--;
            }
        }

    return $dateTime->format('Y-m-d');
} 
```

如果我像这样运行我的函数：

```
echo calculateNextDate('2012-10-01', '10'); 
```

这将导致：

```
2012-10-15 
```

这是正确的，但是我希望它算作`$startDate`一个计数日，所以它会像这样计数：

```
1\. 2012-10-01
2\. 2012-10-02
3\. 2012-10-03
4\. 2012-10-04
5\. 2012-10-05
6\. 2012-10-08
7\. 2012-10-09
8\. 2012-10-10
9\. 2012-10-11
10\. 2012-10-12 
```

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:49:25.873

先减去一天

```
function calculateNextDate($startDate, $days)
{
  $oneDay = new DateInterval('P1D');
  $dateTime = new DateTime($startDate);
  $dateTime->sub($oneDay);

  while($days) {
    $dateTime->add($oneDay);
    if ($dateTime->format('N') < 6) {
      $days--;
    }
  }

  return $dateTime->format('Y-m-d');
}

echo calculateNextDate('2012-10-01', 10);
// results in 2012-10-12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:47:07.460

```
<?
function calculateNextDate($startDate, $days)
{
    $dateTime = new DateTime($startDate);
        while($days > 0) {
            $weekend = date('w', strtotime($dateTime->format('Y-m-d')));
            if($weekend != '6' && $weekend != '0'){
                $new_date[] = $dateTime->format('Y-m-d');
                $days--;
            }
            $dateTime->add(new DateInterval('P1D'));    
        }
    return $new_date;
}

echo "<pre>";
print_r(calculateNextDate('2012-10-11', '10'));
?> 
```

结果将是：

```
Array
(
    [0] => 2012-10-11
    [1] => 2012-10-12
    [2] => 2012-10-15
    [3] => 2012-10-16
    [4] => 2012-10-17
    [5] => 2012-10-18
    [6] => 2012-10-19
    [7] => 2012-10-22
    [8] => 2012-10-23
    [9] => 2012-10-24
) 
```

您可以通过循环数组来回显日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:33:08.950

嗯，非常复杂的方法，只需添加开始日期的天数

我会这样做

```
$resultingDate = date('Y-m-d', strtotime("+$days days", $startDate)); 
```

# android - 在 Android 的 Mono 上单击 TextView 时显示键盘

> ID：12890960
> 
> 赞同：4
> 
> 时间：2012-10-15T07:22:30.587
> 
> 标签：android, keyboard, textview, xamarin.android

当有人点击 TextView 字段时，如何让键盘显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T08:30:11.197

```
void button_Click(object sender, EventArgs e)
{
    InputMethodManager imm = (InputMethodManager)GetSystemService(InputMethodService);
    imm.ToggleSoftInput(ShowSoftInputFlags.Forced,HideSoftInputFlags.None );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T07:27:24.860

在textview上使用它点击

```
InputMethodManager imm=(InputMethodManager)getSystemService(yourActivity.this.INPUT_METHOD_SERVICE);
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
```

# r - CreditMetrics 的 cm.quantile 产生 NaN

> ID：12890964
> 
> 赞同：0
> 
> 时间：2012-10-15T07:22:42.203
> 
> 标签：r

请在 R 中放入以下结构：

```
M <- structure(c(0.861, 0.02115, 0.01031, 0.00218, 0.00062, 0.00075, 
0.00047, 0.00028, 0.00049, 0.00046, 0.00025, 0, 0, 0.00028, 0, 
0, 0, 0, 0, 0, 0, 0, 0.05806, 0.74127, 0.04621, 0.01426, 0.00119, 
0.00036, 0.00054, 0.00041, 0.00069, 0.00011, 2e-05, 0, 0.00018, 
0.00013, 0, 5e-05, 0.00036, 0, 0, 0, 0, 0, 0.02818, 0.08446, 
0.73325, 0.04292, 0.01296, 0.00212, 0.00136, 0.00082, 4e-04, 
0.00035, 0.00027, 0.00026, 0.00011, 0.00015, 7e-05, 0.00037, 
0, 0, 0, 0, 0, 0, 0.00544, 0.06172, 0.09626, 0.74319, 0.05289, 
0.0108, 0.00233, 0.00153, 0.00079, 0.00043, 0.00048, 0, 0.00027, 
8e-05, 8e-05, 0, 0, 0, 0, 0, 0, 0, 0.00326, 0.01558, 0.03482, 
0.08853, 0.74873, 0.05157, 0.01757, 0.00257, 0.00169, 0.00121, 
0.00171, 0.00026, 0.00021, 0.00038, 0.00018, 8e-05, 0, 0, 0, 
0, 0, 0, 0.00124, 0.00656, 0.01336, 0.03007, 0.08159, 0.75361, 
0.06561, 0.01745, 0.0068, 0.00239, 0.00146, 0.00076, 0.00144, 
8e-04, 0, 0.00019, 0.00029, 0.00011, 0, 0, 0, 0, 0.00014, 0.00125, 
0.00436, 0.00979, 0.02872, 0.07991, 0.73237, 0.06614, 0.0248, 
0.00557, 0.00342, 0.00063, 0.00127, 0.00088, 0.00037, 0.00064, 
0, 0, 0, 0, 0, 0, 0.00012, 0.0016, 0.00099, 0.0028, 0.0071, 0.0285, 
0.06673, 0.72947, 0.05849, 0.02627, 0.00567, 0.00293, 0.00147, 
0.00063, 0.00091, 0.00041, 0.00058, 0.00011, 0, 0, 0, 0, 0, 0.00029, 
0.00113, 0.00235, 0.00401, 0.00852, 0.03129, 0.07254, 0.73812, 
0.08704, 0.02916, 0.00736, 0.003, 0.00127, 9e-04, 0.00053, 0, 
0.00056, 0, 0, 0, 0, 0, 6e-05, 2e-05, 0.00079, 0.00171, 0.00407, 
0.01094, 0.02855, 0.06595, 0.70365, 0.09882, 0.03277, 0.00725, 
0.00273, 0.00133, 0.00093, 4e-05, 0.00214, 0, 0, 0, 0, 0.00016, 
6e-05, 3e-04, 0.00022, 0.0022, 0.0019, 0.00471, 0.00774, 0.01578, 
0.04864, 0.63246, 0.08694, 0.0249, 0.00447, 0.00286, 0.00076, 
0.00058, 0.00096, 0.00126, 0.00065, 0, 0, 0.00016, 0, 6e-05, 
0.00028, 0.00141, 0.00121, 0.00177, 0.00433, 0.00612, 0.02536, 
0.04685, 0.62721, 0.06413, 0.02543, 0.00599, 0.00224, 4e-04, 
0.00079, 0.00095, 0.00146, 0, 0, 0, 3e-05, 0, 0.00024, 0.00047, 
0.0012, 0.00191, 0.00286, 0.00555, 0.01114, 0.03758, 0.06879, 
0.63721, 0.06643, 0.01916, 0.00552, 0.00248, 0.00406, 0, 0.00195, 
0, 0, 2e-05, 0, 0.00016, 0.00024, 0.00078, 0.00051, 0.00097, 
0.00354, 0.00468, 0.0081, 0.01457, 0.02812, 0.05973, 0.63797, 
0.0695, 0.02281, 0.00754, 0.00682, 0.00158, 0.00211, 0, 0, 0, 
0, 8e-05, 0, 0.00024, 0.00036, 0.00049, 0.00074, 0.00239, 0.00355, 
0.0105, 0.02154, 0.0443, 0.06606, 0.61553, 0.06689, 0.02387, 
0.01201, 0.00443, 0.00552, 0, 0, 0, 0, 6e-05, 0, 1e-04, 0.00012, 
0.00022, 0.00042, 0.00104, 0.00262, 0.00677, 0.00992, 0.02098, 
0.03936, 0.079, 0.59103, 0.09278, 0.03765, 0.01549, 0.01576, 
0, 0, 0, 0, 0, 3e-05, 0, 0.00033, 3e-05, 0.00053, 0.00121, 0.00182, 
0.00138, 0.00213, 0.00489, 0.01213, 0.03251, 0.06436, 0.5217, 
0.07683, 0.02941, 0.01836, 0, 0, 2e-05, 0, 0.00024, 0, 7e-05, 
0.00032, 4e-05, 0.00029, 0.00017, 9e-04, 0.00185, 0.00202, 0.00339, 
0.00545, 0.01572, 0.03769, 0.08199, 0.46362, 0.07383, 0.03559, 
0, 0, 0, 0, 0, 0, 0, 6e-05, 7e-05, 7e-05, 0.00027, 0.00104, 0.00044, 
8e-04, 0.00068, 0.00253, 0.00483, 0.01156, 0.04023, 0.05112, 
0.3796, 0.04176, 0, 0, 0, 0, 4e-05, 0, 0, 0, 0.00014, 2e-04, 
1e-04, 0.00042, 0.00054, 0.00106, 0.00114, 0.00362, 0.0057, 0.01098, 
0.02518, 0.04904, 0.07889, 0.35197, 0, 0, 0.0422, 0.065969, 0.058349, 
0.06165, 0.05443, 0.05312, 0.05984, 0.05811, 0.06283, 0.06596, 
0.09949, 0.09921, 0.10674, 0.10623, 0.10933, 0.11679, 0.11731, 
0.12062, 0.14814, 0.16705, 1, 0, 0, 1.00000000002876e-06, 9.99999999917733e-07, 
0.000460000000000127, 0.000780000000000114, 0.000659999999999883, 
0.000600000000000045, 0.00141000000000013, 0.00163999999999986, 
0.00296999999999981, 0.00631000000000004, 0.00729000000000002, 
0.01671, 0.0229900000000003, 0.0360299999999999, 0.0661700000000001, 
0.0846699999999999, 0.17356, 0.26642, 0.35782, 0, 1), .Dim = c(22L, 
22L), .Dimnames = list(c("Aaa", "Aa1", "Aa2", "Aa3", "A1", "A2", 
"A3", "Baa1", "Baa2", "Baa3", "Ba1", "Ba2", "Ba3", "B1", "B2", 
"B3", "Caa1", "Caa2", "Caa3", "Ca-C", "WR", "Default"), c("Aaa", 
"Aa1", "Aa2", "Aa3", "A1", "A2", "A3", "Baa1", "Baa2", "Baa3", 
"Ba1", "Ba2", "Ba3", "B1", "B2", "B3", "Caa1", "Caa2", "Caa3", 
"Ca-C", "WR", "Default"))) 
```

现在输入以下代码：

```
library(CreditMetrics) # donwloadable from CRAN repository
cm.quantile(M) 
```

在我的系统上，这将返回一个矩阵，其最后一列 named`Aaa`包含`NaN`s; 这些`NaN`s 在我进一步的代码开发中是一个大问题。

为什么会`NaN`发生这些，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:23:06.790

NAN 和 Inf 是数据计算的结果，包括除以零或取负数的对数。

您可以检查对象中是否存在 NaN：

```
 is.nan(object) 
```

您可以检查对象中是否存在 Inf：

```
 is.infinite(object) 
```

如果你想删除 NaNs 和 Infs，你可以试试这个：

```
 object = M
    M[is.nan(M)] <- NA   # assign NA, commonly referred as missing values, to NaN values
    M[is.infinite(M)] <- NA # assign NA to Inf values 
```

然后，您可以在分析期间保留 NA，也可以根据需要删除它。

```
 M <- data.frame(M)
    M <- na.omit(M) 
```

要检查是否存在 NA，您可以尝试：

```
 is.na(M) 
```

将提供一个逻辑数据结构，其中“TRUE”表示存在 NA，而 False 表示不存在 NA。您可以将其用作下标来摆脱数据结构中的所有 NA。

注意：据我所知，R 中的统计模型为您提供了在模型构建期间删除 NA 的选项。

```
 na.rm = TRUE / FALSE 
```

只要 R 中的统计方法允许您这样做，您就可以使用此选项。甚至像 ggplot2 这样的图形包也提供了在绘制图形时删除 NA 的选项，这基本上表明您可以将 NA 保留在数据中，并可以在分析的适当时间删除它们。

！

# sql - 显示两个日期之间的所有日期数据；如果特定日期不存在行，则在所有列中显示零

> ID：12890967
> 
> 赞同：5
> 
> 时间：2012-10-15T07:23:00.023
> 
> 标签：sql, sql-server, tsql

当缺少任何日期数据时，我想显示两个日期之间的所有日期，然后它应该在 val 列中显示为零。

```
declare @temp table (
id int identity(1,1) not null,
CDate smalldatetime ,
val int
) 
```

插入声明以检查数据

```
insert into @temp select '10/2/2012',1
insert into @temp select '10/3/2012',1
insert into @temp select '10/5/2012',1
insert into @temp select '10/7/2012',2
insert into @temp select '10/9/2012',2
insert into @temp select '10/10/2012',2
insert into @temp select '10/13/2012',2
insert into @temp select '10/15/2012',2 
```

检索每月第一天到今天之间的记录

```
select * from @temp where CDate between '10/01/2012' AND '10/15/2012' 
```

当我运行此查询时，它会显示这两个日期之间的所有数据，但我还想包括缺少的日期`val=0`

[带有示例数据的 SQL FIDDLE](http://www.sqlfiddle.com/#!3/268dc/1)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T07:32:40.043

```
;with d(date) as (
  select cast('10/01/2012' as datetime)
  union all
  select date+1
  from d
  where date < '10/15/2012'
  )
select t.ID, d.date CDate, isnull(t.val, 0) val
from d
left join temp t
       on t.CDate = d.date
order by d.date
OPTION (MAXRECURSION 0) -- use this if your dates are >99 days apart 
```

您需要弥补日期，所以我在这里使用了递归公用表表达式。 [SQL小提琴](http://www.sqlfiddle.com/#!3/268dc/19/0)

> MAXRECURSION 数
> 
> 指定此查询允许的最大递归数。number 是介于 0 和 32767 之间的非负整数。指定 0 时，不应用限制。如果未指定此选项，则服务器的默认限制为 100。
> 
> 在查询执行期间达到指定的或默认的 MAXRECURSION 限制数时，查询将结束并返回错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T08:23:07.603

只要从开始日期到结束日期之间的间隔少于 2047 天，这将起作用

```
declare @from smalldatetime = '10/01/2012'
declare @to smalldatetime = '10/15/2012'

select t.id, dateadd(day, number,@from), isnull(val, 0) val from @temp t
right join master..spt_values s
on dateadd(d, s.number, @from) = t.CDate
where
datediff(day, @from, @to ) > s.number
and s.type = 'P' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T07:34:59.307

我认为最好的方法是创建自己的带有日期的表（您也可以使用 master.dbo.spt_values，但我个人不喜欢这种解决方案）

```
declare @Temp_Dates table (CDate datetime)
declare @Date datetime
select @Date = (select min(CDate) from temp)

while @Date <= (select max(CDate) from temp)
begin
    insert into @Temp_Dates (CDate)
    select @Date

    select @Date = dateadd(dd, 1, @Date)
end

select D.CDate, isnull(T.id, 0) as id
from @Temp_Dates as D
    left outer join temp as T on T.CDate = D.CDate 
```

您还可以将递归解决方案与 CTE 一起使用

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T07:36:45.747

```
DECLARE @min DATETIME, 
        @max DATETIME, 
        @val INT 

SELECT @min = Min(CDATE), 
       @max = Max(CDATE) 
FROM   TEMP 

DECLARE @temp TABLE 
  ( 
     CDATE SMALLDATETIME, 
     VAL   INT 
  ) 

WHILE @min < @max 
  BEGIN 
      SELECT @val = VAL 
      FROM   TEMP 
      WHERE  CDATE = @min 

      INSERT @temp 
      VALUES (@min, 
              @val) 

      SET @min = Dateadd(D, 1, @min) 
      SET @val = 0 
  END 

SELECT * 
FROM   @temp 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T08:42:11.360

```
Declare @temp Table(id int identity(1,1) not null,CDate smalldatetime ,val int)
insert into @temp select '10/2/2012',1
insert into @temp select '10/3/2012',1
insert into @temp select '10/5/2012',1
insert into @temp select '10/7/2012',2
insert into @temp select '10/9/2012',2
insert into @temp select '10/10/2012',2
insert into @temp select '10/13/2012',2
insert into @temp select '10/15/2012',2

DECLARE @startDate DATE= '10/01/2012'
DECLARE @endDate DATE= '10/15/2012'

SELECT t.Id, X.[Date],Val = COALESCE(t.val,0)
FROM 
    (SELECT [Date] = DATEADD(Day,Number,@startDate)  
    FROM  master..spt_values  
    WHERE Type='P' 
    AND DATEADD(day,Number,@startDate) <= @endDate)X
LEFT JOIN  @temp t 
ON X.[Date] = t.CDate 
```

![在此处输入图像描述](../Images/584c8f20c3fe42ee9dbdad2640a8342e.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-11T13:48:35.860

使用具有 min 和 max 的递归 cte

```
declare @T table (id int identity(1,1) primary key, dt date not null, val int not null);
insert into @T (dt, val) values 
       ('10/2/2012',1)
     , ('10/3/2012',1)
     , ('10/5/2012',1)
     , ('10/7/2012',2)
     , ('10/9/2012',2)
     , ('10/10/2012',2)
     , ('10/13/2012',2)
     , ('10/15/2012',2);
--select * from @T;
with cte as 
( select min(dt) as dt, max(dt) as mx 
  from @T 
  union all 
  select dateadd(dd, 1, dt), mx 
  from CTE 
  where dt < mx
)
select c.dt, isnull(t.val, 0) as val 
from cte c
left join @T t
on c.dt = t.dt
order by c.dt
option (maxrecursion 0);

dt         val
---------- -----------
2012-10-02 1
2012-10-03 1
2012-10-04 0
2012-10-05 1
2012-10-06 0
2012-10-07 2
2012-10-08 0
2012-10-09 2
2012-10-10 2
2012-10-11 0
2012-10-12 0
2012-10-13 2
2012-10-14 0
2012-10-15 2 
```

# azure-web-app-service - 如何访问 Azure 网站的数据库

> ID：12890968
> 
> 赞同：1
> 
> 时间：2012-10-15T07:23:01.400
> 
> 标签：azure-web-app-service

我在 Azure 中创建了一个 Wordpress 网站。无论如何可以访问与其一起设置的数据库吗？（所以我可以回来/或者如果我将来想迁移）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T07:53:12.670

如果您转到网站仪表板选项卡，您将看到一个名为“查看连接字符串”的链接。如果单击它，您将看到包含数据库和服务器名称、用户名和密码等的连接字符串。您应该能够使用这些工具使用[http://dev.mysql.com等工具登录到您的 MySql 数据库/downloads/gui-tools/5.0.html](http://dev.mysql.com/downloads/gui-tools/5.0.html)

# javascript - 无法使用 .hide() 隐藏图像

> ID：12890970
> 
> 赞同：0
> 
> 时间：2012-10-15T07:23:08.963
> 
> 标签：javascript, jquery

我在我的 asp.net mvc 中有以下视图，它显示了一个 ajax 加载图像，我在启动 jquery 函数后试图隐藏它，如下所示： -

```
<div id= "geturl" data-url="@Url.Action("ListPackages", "Home")">
<h1>All Processes</h1>
    <img id="tobehide" src="~/Content/ajax-loading2.gif" />
<ul id="products">
</ul> 
```

然后是以下 JavaScript 文件：-

```
$(document).ready(function () {
    $.ajax({
        url: $('#geturl').data('url'),
        type: 'GET',
        cache: false,
        success: function (result) {
            $('#tobehide').hide();
            $.each(result.data, function (key, val) {
                var str = val.packageName;
                $('<li/>', { text: str })
                    .appendTo($('#products'));
            });
        }
    });
}); 
```

目前数据将被填充但加载图像不会被隐藏。所以当java脚本开始执行时我如何强制图像隐藏？此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:27:08.007

您的代码是正确的，应该可以正常工作！
尝试使用 FireBug 或 Chrome 开发人员工具来查看您从 ajax 调用返回的 javascript 错误是什么。
如果这仍然没有帮助，并且无论如何您都希望隐藏图像，那么在您正在使用的 jquery ajax 调用上使用“完成”回调。

```
$(document).ready(function () {
    $.ajax({
        url: $('#geturl').data('url'),
        type: 'GET',
        cache: false,
        complete: function (result) {
            $('#tobehide').hide();
            $.each(result.data, function (key, val) {
                var str = val.packageName;
                $('<li/>', { text: str })
                    .appendTo($('#products'));
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:47:46.297

它应该可以正常工作。大哥你的代码没有错误。

尝试添加异步选项。将其设置为假。然后再试一次

# ios - 如何在 iOS 6 上播放视频-音频？

> ID：12890971
> 
> 赞同：0
> 
> 时间：2012-10-15T07:23:20.557
> 
> 标签：ios, mpmovieplayercontroller, avaudioplayer, mpmusicplayercontroller

我在我的 iOS 应用程序中播放视频和音频，使用**AVAudioPlayer**播放音频文件（.mp3 文件）和**MPMoviePlayerViewController**播放视频文件（.mp4 文件）。

它在 iOS 5 及更低版本上运行良好。

但在我的 iPad（iOS 6）中它不起作用。它播放没有音频的视频。当然，它根本不播放音频。

请帮我解决这个问题。提前致谢 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:00:28.527

由于 iOS 6 静音开关也会使应用程序静音，您是否检查过静音开关是否已关闭。

要在设备静音时强制播放，您可以执行以下操作：

```
NSError *error= nil;
if ([[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error:&error]) {
    NSLog(@"Error setting audio session: %@", error);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:41:13.577

```
NSError *setCategoryErr = nil;
NSError *activationErr  = nil;
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:&setCategoryErr];
[[AVAudioSession sharedInstance] setActive:YES error:&activationErr];

if(setCategoryErr || activationErr)
{
    NSLog(@"%@ Error: Could not activate silence mode. %@ %@", self, setCategoryErr, activationErr);
} 
```

# android - 将文本从 EditText 转换为 html 并返回会丢失格式

> ID：12890975
> 
> 赞同：1
> 
> 时间：2012-10-15T07:23:40.240
> 
> 标签：android, android-edittext

我有一个名为`content`. 里面是一些格式化的文本。然后我想通过执行以下操作在查看格式化文本和 html 之间切换：

```
if(!showHtml)
    content.setText(Html.fromHtml(content.getText().toString()), BufferType.SPANNABLE);
else
    content.setText(Html.toHtml(content.getText())); 
```

如果格式化的文本是“test **test** ”，那么 html 会`<p>test <b>test </b></p>`很好，但是当返回时，格式会丢失，我会得到“test test”。

如果格式化的文本是“ **test** test”，则 html 输出为`<p><b>test</b> test</p>`，这又是正确的。但是，返回时得到的文本是“ **test test** ”。

所以看起来是第一个单词的格式应用于文本的其余部分（我已经在更长的字符串上进行了测试）。

有没有人遇到过这个问题，我该如何解决这个问题？

**编辑 1**似乎使用 EditText.setText()，它会自动使用 Editable 标志并完全忽略我对 Spannable 的请求。这可能是问题的根源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:56:06.910

我是个傻瓜。我完全忘记了我有一个`TextWatcher`修改了应用的样式。我需要做的就是设置一个标志，告诉它在从 html 转换之后不要修改样式。

# visual-c++ - 错误 C2440：“static_cast”：无法从“long”转换为“LRESULT”

> ID：12890976
> 
> 赞同：3
> 
> 时间：2012-10-15T07:23:47.557
> 
> 标签：visual-c++

我正在将我的项目从 32 位版本转换为 64 位版本，在以 64 位编译项目时，出现以下错误。

```
Error   2   error C2440: 'static_cast' : cannot convert from 'long (__cdecl BrnDefDlgClass::* )(UINT,long)' to 'LRESULT (__cdecl CWnd::* )(WPARAM,LPARAM)'  C:\Program Files (x86)\...\CXX\TEST.CXX 854 1   cfg 
```

这个错误将我指向下面的代码行。

```
ON_MESSAGE        (WM_USER_AFTERCBNSELCHANGE,   OnAfterCBSelectMsg) 
```

请咨询为什么会发生此错误。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T08:14:56.433

我建议您查看`OnAfterCBSelectMsg`并修改它的定义以`LRESULT`用作返回类型和`WPARAM`参数`LPARAM`（就像您的错误消息中的第二个签名一样）。

`LRESULT`定义为`LONG_PTR`，并且无论何时`PTR`出现在名称中，您都应该期望它大到足以容纳一个指针。指针在 32 位上是 4 个字节，在 64 位上是 8 个字节，因此如果您编译为 64 位，则`LRESULT`a 将不适合`long`（即 4 个字节）。

使用`WPARAM`和`LPARAM`作为参数类型也很重要，因为它们的大小也会根据平台而变化。有关更多信息，请参阅此问题的答案： [LPARAM 和 WPARAM 的定义是什么？](https://stackoverflow.com/q/2515261/93652)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T08:15:36.510

`WPARAM`定义为`unsigned __int64`，`LRESULT`并且`LPARAM`在`__int64`64 位 Windows 中。

您必须相应地更改签名`BrnDefDlgClass`。如果使用 WinAPI 提供的 typedef 而不是内置类型，则它可以在 32 位和 64 位平台上编译。

# c# - 为包含多个表的数据集编写 XML

> ID：12890981
> 
> 赞同：0
> 
> 时间：2012-10-15T07:24:24.067
> 
> 标签：c#, asp.net, xml

我的数据集中有 2 个表。

我需要将我的 XML 构造为：

```
<MyRoot>
    <Settings>
        <Param1>value1</Param1>
        <Param2>value2</Param2>
        <Param3>value3</Param3>
    </Settings>
    <Books>
      <Book>
          <BookId>1000</BookId>
          <BookName>Book1</BookName>
      </Book>
      <Book>
          <BookId>2000</BookId>
          <BookName>Book2</BookName>
      </Book>
    </Books>
</MyRoot> 
```

但是当我使用 datSet.WriteXML(); 我得到的 XML 为：

```
<MyRoot>
    <Settings>
        <Param1>value1</Param1>
        <Param2>value2</Param2>
        <Param3>value3</Param3>
    </Settings>
    <Book>
       <BookId>1000</BookId>
       <BookName>Book1</BookName>
    </Book>
    <Book>
       <BookId>2000</BookId>
       <BookName>Book2</BookName>
    </Book>
</MyRoot> 
```

因此，我无法将单独的数据集名称作为“Books”添加到第二个表（dataSet.Tables[1]）。有什么办法可以做到吗？

我尝试了以下代码：

```
dataSet = GetList();
dataSet.DataSetName = "MyRoot"; 
dataSet.Tables[0].TableName = "Settings"; 
dataSet.Tables[1].TableName = "Books"; 
StringWriter swriter = new StringWriter(); 
dataSet.WriteXml(swriter); 
string dsResult = swriter.ToString(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:07:42.193

我不知道`DataSet.WriteXml`直接告诉以您想要的方式编写 XML 的方法，因此您有两个大选择：

*   让我们`DataSet.WriteXml`编写 XML 并在之后对其进行修改。
*   自己写序列化代码。

对于这两种方式，您有不同的选择。在第一种情况下，您可以

*   将创建的 XML 加载到`XDocument`or`XmlDocument`中并通过代码对其进行重组。
*   Transform your XML via XSLT (I would prefer that over the code solution)

The options in the second case should be obvious. If you create your own `XmlWriter` and use `DataTable.WriteXml` to write to it, you should be able to define your own format in a few lines of code.

To choose the right solution for your use case is up to you. I would probably go for the XSTL solution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:36:43.113

您可以通过如下代码覆盖原始 XML。

```
string filename = "XmlDoc.xml";
System.IO.FileStream stream = new System.IO.FileStream (filename, System.IO.FileMode.Create);
ds.WriteXml(stream); 
XmlDocument xmldoc = new XmlDocument("XmlDoc.xml");
XmlNode node1 = xmldoc.CreateNode("Books","Books");

foreach(XmlNode nd in xmldoc.Nodes) {
  if(node.value =="Book")   
    node1.AppendChild(nd);
}

xmldoc.Nodes.Add(node1);
xmldoc.SaveAs("newXmlDoc.Xml"); 
```

# orchardcms - 通过命令行删除 Orchard CMS 内容类型

> ID：12890992
> 
> 赞同：0
> 
> 时间：2012-10-15T07:25:16.730
> 
> 标签：orchardcms

有没有办法通过命令行删除内容类型？我创造了一个似乎正在轰炸的。实际上错误是：传入字典的模型项是“Contrib.DateTimeField.Settings.DateTimeFieldSettings”类型的，但是这个字典需要一个“Orchard.Fields.Settings.DateTimeFieldSettings”类型的模型项。

我只想删除它并创建另一个内容类型。我可以通过命令行执行此操作吗？我无法通过管理页面真正做到这一点，因为当我尝试编辑内容类型时出现上述错误。

# mysql - 如何在 Rails 3.2 中使用 OUT 参数调用存储过程 - 已更新

> ID：12890999
> 
> 赞同：0
> 
> 时间：2012-10-15T07:25:54.840
> 
> 标签：mysql, ruby-on-rails

我在 MYSQL 中创建了以下 SP

```
CREATE PROCEDURE usp_BookDetailsCount(OUT bookCount INT)
BEGIN
       SELECT count(*) INTO bookCount 

       FROM books;

       SELECT bookCount;
END $$ 
```

我正在尝试使用 rails 3.2.8 获取 SP 输出参数值。

我在模型中的代码

```
count = 0 
 r = ActiveRecord::Base.connection.select_value("CALL usp_BookDetailsCount(OUT count)")   
 return count 
```

我在浏览器中收到以下错误

```
Mysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OUT count)' at line 1: CALL usp_BookDetailsCount(OUT count) 
```

但是我可以在没有 OUT 参数的情况下获取存储过程值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:54:01.037

恐怕没有用于与存储过程交互的特定 AR API 方法。尝试#执行：

[http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-execute](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-execute)