# StackOverflow 问答 12510000-12510999

# c# - MVC 框架如何使用 DataAnnotations 验证代码优先 POCO？

> ID：12510001
> 
> 赞同：4
> 
> 时间：2012-09-20T09:44:11.497
> 
> 标签：c#, asp.net-mvc, unit-testing, code-first

在我的单元测试中，我想强制验证具有 DataAnnotations 的代码优先 POCO。

MVC框架一定是在幕后做的，基本上我想知道怎么做，所以我希望可以利用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T09:56:21.447

> MVC 框架在幕后进行，基本上我想知道如何，所以我希望可以利用它。

它是默认的模型绑定器，一旦它从请求值绑定模型，它就负责调用模型的验证。

您可以使用`ValidationContext`.

假设您有一个模型：

```
public class Foo
{
    [Required(ErrorMessage = "the Bar is absolutely required")]
    public string Bar { get; set; }
} 
```

然后你可以对它进行单元测试：

```
[TestMethod]
public void The_Bar_Is_Required()
{
    // arrange
    var foo = new Foo();
    var results = new List<ValidationResult>();
    var context = new ValidationContext(foo, null, null);

    // act
    var actual = Validator.TryValidateObject(foo, context, results);

    // assert
    Assert.IsFalse(actual);
} 
```

除了使用 DataAnnotations，您还可以使用[FluentValidation.NET](http://fluentvalidation.codeplex.com/)对您的视图模型执行验证。它[与 ASP.NET MVC 很好地集成](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)，它允许您以非常优雅的方式[对验证器进行单元测试。](http://fluentvalidation.codeplex.com/wikipage?title=Testing&referringTitle=Documentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T09:21:45.907

我刚刚[回答了一个类似的问题](https://stackoverflow.com/questions/2110286/how-to-unit-test-the-dataannotationsmodelbinder-in-asp-net-mvc-2/17231644#17231644)。

我通常通过直接调用 System.ComponentModel.DataAnnotations.Validator 的外观方法来对我的模型验证设置进行单元测试。

我写了一篇关于这个主题的文章[http://timoch.com/blog/2013/06/unit-testing-model-validation-with-mvcs-dataannotations/](http://timoch.com/blog/2013/06/unit-testing-model-validation-with-mvcs-dataannotations/)

我最终得到了这样的代码（这篇文章展示了一个用于模型验证的更简洁且可重用的单元测试基类）

```
[Test]
[TestCaseSource("ValidationRule_Source")]
public void ValidationRule(ValidateRuleSpec spec) {
    // Arrange
    var model = CreateValidPersonModel();
    // Apply bad valud
    model.GetType().GetProperty(spec.MemberName).SetValue(model, spec.BadValue);

    // Act
    var validationResults = new List<ValidationResult>();
    var success = Validator.TryValidateObject(model, new ValidationContext(model), validationResults, true);

    // Assert
    Expect(success, False);
    Expect(validationResults.Count, EqualTo(1));
    Expect(validationResults.SingleOrDefault(r => r.MemberNames.Contains(spec.MemberName)), Not.Null);
}

public IEnumerable<ValidateRuleSpec> ValidationRule_Source() {
    yield return new ValidateRuleSpec() {
        BadValue = null,
        MemberName = "FirstName"
    };
    yield return new ValidateRuleSpec() {
        BadValue = string.Empty,
        MemberName = "FirstName"
    };
    yield return new ValidateRuleSpec() {
        BadValue = null,
        MemberName = "LastName"
    };
    /* ... */
} 
```

我不喜欢相信代码可以正常工作，所以我系统地为我的模型验证代码编写单元测试。但是，我确实信任框架/模型绑定器来执行验证。这个单元测试允许我编写信任验证正常的控制器。

# python - 对数正态分布变量，找到可能性

> ID：12510004
> 
> 赞同：1
> 
> 时间：2012-09-20T09:44:22.050
> 
> 标签：python, statistics, scipy

使用 scipy，我想衡量我的对数正态分布生成随机变量的可能性有多大。

为此，我考虑查看它与 PDF 最大值的距离。

到目前为止，我的方法是这样的：如果变量是`r = 1.5`，并且分布 σ=0.5，则从 PDF 中找到值`lognorm.pdf(r, 0.5, loc=0)`。鉴于结果，（`0.38286..`），然后我想查找下面的 PDF 区域`0.38286..`。

最后一步如何实施？这甚至是解决这个问题的正确方法吗？

举一个更一般的问题示例。假设有人告诉我他们在推特上有 126 个关注者。我知道 Twitter 关注者是对数正态分布，我有该分布的 PDF。鉴于这种分布，我是否可以确定这个追随者数量的可信度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:53:23.283

PDF 下的区域是[CDF](http://en.wikipedia.org/wiki/Cumulative_distribution_function)（方便地是[lognorm](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.lognorm.html)中的一种方法）：

```
lognorm.cdf(r, 0.5, loc=0) 
```

.

您可以使用它来计算的一件事是折叠累积分布（[此处](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.lognorm.html)提到），也称为“山图”：

```
FCD = 0.5 - abs(lognorm.cdf(r, 0.5, loc=0) - 0.5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:53:38.793

与海登的结果相同

对于非对称分布的统计检验，我们通过取两个尾概率中的最小值来获得 pvalue

```
>>> r = 1.5
>>> 0.5 - abs(lognorm.cdf(r, 0.5, loc=0) - 0.5) 
0.20870287338447135
>>> min((lognorm.cdf(r, 0.5), lognorm.sf(r, 0.5)))
0.20870287338447135 
```

这通常加倍以获得双边 p 值，但最近有一些论文提出了加倍的替代方案。

# php - 使用 php 函数和 jquery ajax 验证表单字段

> ID：12510005
> 
> 赞同：1
> 
> 时间：2012-09-20T09:44:23.943
> 
> 标签：php, forms, validation, jquery

我正在使用 wordpress，我有一个需要验证的表单。我有一个输入字段要检查以确保它是有效的 youtube 网址。我发现这个漂亮的小方法使用 jquery ..

```
 $("input#video_url").change(function (){
    var matches = $(this).val().match(/^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/);
    if (matches) {
      $(".video-validation").append("<span>Valid</span>");
     } else {
      $(".video-validation").append("<span>This is not a valid youtube url</span>");
     }
  }); 
```

但后来我读到这样的验证需要用 php 完成，这样就不能在客户端进行更改。

我一直在寻找某种类型的明确教程，但找不到。所以我的问题是：

如何在我的 functions.php 中将 url 的验证转换为 php 函数，然后在处理表单之前将其与 jquery 结合使用来进行 ajax 验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:00:09.143

这是教程的链接 - [http://www.krio.me/how-to-validate-a-url-php/](http://www.krio.me/how-to-validate-a-url-php/)

您还可以使用 filter_var() 函数 - filter_var('test.com', FILTER_VALIDATE_URL)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:49:01.060

只需使用链接做一个 ajax 帖子：

```
$.post('validate.php', function(data) {
  $('.result').html(data);
}); 
```

在你的**validate.php**文件中做同样的想法，如下所示：

`validate.php`

```
$result = preg_match(/^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/);
if ( $result ) {
  die( '<span>Valid</span>' );
} else {
  die( '<span>This is not a valid youtube url</span>');
} 
```

您结束的代码可能如下所示：

```
$("input#video_url").change(function (){
  $.post('validate.php', function(data) {
    $('.video-validation').html(data);
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:49:08.630

享受这个小正则表达式：

```
if (!preg_match('/^(http:\/\/){0,1}(www\.){0,1}youtube\.com\/watch\?v=([a-z0-9\-_\|]{11})/i', $gyoutube, $matches))
{
    $error = "This ain't a Youtube video";
} 
```

此外，PHP 验证是在**之后**完成的，而不是在提交表单之前。

# sql - SQL union all 不包含零值

> ID：12510008
> 
> 赞同：0
> 
> 时间：2012-09-20T09:44:38.897
> 
> 标签：sql, sql-server, zero, union-all

我正在使用 union all 来联合多个查询，但 union all 并没有为这些零值插入一个空行。我查看了该站点，根据这个问题，它应该包括它们：

[具有 NULL 字段的 mysql 联合](https://stackoverflow.com/questions/5440311/mysql-union-with-null-fields)

这些是我的疑问：

```
select [SMTH] from [H].[D].[T]
where Date = (SELECT MAX(DATE) from [H].[D].[T] where Data = 1 and SMTH > 0 )  
union all
select [SMTH] from [H].[D].[T]
where Date = (SELECT MAX(DATE) from [H].[D].[T] where Data = 2 and SMTH > 0 )  
union all
select [SMTH] from [H].[D].[T]
where Date = (SELECT MAX(DATE) from [H].[D].[T] where Data = 3 and SMTH > 0 )  
union all
select [SMTH] from [H].[D].[T]
where Date = (SELECT MAX(DATE) from [H].[D].[T] where Data = 4 and SMTH > 0 ) 
```

结果：

```
10068
3967
895 
```

四个独立查询：

```
select [SMTH] from [H].[D].[T]
where Date = (SELECT MAX(DATE) from [H].[D].[T] where Data = 1 and SMTH > 0 )  

select [SMTH] from [H].[D].[T]
where Date = (SELECT MAX(DATE) from [H].[D].[T] where Data = 2 and SMTH > 0 )  

select [SMTH] from [H].[D].[T]
where Date = (SELECT MAX(DATE) from [H].[D].[T] where Data = 3 and SMTH > 0 )  

select [SMTH] from [H].[D].[T]
where Date = (SELECT MAX(DATE) from [H].[D].[T] where Data = 4 and SMTH > 0 ) 
```

结果：

```
10068
3967
0
895 
```

所以基本上因为我认为上一个问题的答案是正确的，我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:49:03.287

哪一列是空的？您确定，由于您的 where 子句，没有删除空值吗？请记住，使用 null 的操作总是会导致 null（使用 IS NULL 进行测试除外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:12:08.207

第三个查询返回 0。为什么你认为它是 null？无论如何，这个查询都比`union`：

如果表有主键（此查询中的 id）：

```
select SMTH, Data, [date]
from 
    H.D.T
    inner join (
        select id, Data, max([date]) as [date]
        from H.D.T
        where Data in (1, 2, 3, 4) and SMTH > 0
        group by id, Data
    ) s on s.id = H.D.T.id
order by Data 
```

# ios - iOS 6 上对 safari mobile 的 CSS 样式滚动条支持消失了吗？

> ID：12510013
> 
> 赞同：7
> 
> 时间：2012-09-20T09:44:55.403
> 
> 标签：ios, css, mobile-safari, ios6

我遇到了问题，可能是因为 Apple，我找不到有关它的信息。

昨天我使用 webkit css 属性（-webkit-scrollbar、-webkit-scrollbar-track、-webkit-scrollbar-thumb）为网站的滚动条蒙皮，因此它可以在 iPad 上很好地显示。一切都很好看，并以本机行为滚动。

今天早上突然，在将我的 iPad 更新到 iOS6 后，我的自定义滚动条消失了。

这对我来说是一个很大的麻烦，当然苹果的开发者网站上没有关于这方面的信息。

有人遇到过同样的问题吗？你能确认问题吗？

是一些新的规格来了还是苹果只是停止支持这个？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:14:49.493

由于未发布 (AFAIK) 的原因，Apple 删除了一些以 webkit 为前缀的 CSS 属性。这包括 -webkit-scrollbar 组。

# jsf-2 - JSF页面在构造函数之前加载数据

> ID：12510014
> 
> 赞同：1
> 
> 时间：2012-09-20T09:44:56.433
> 
> 标签：jsf-2, managed-bean

我做了一个NotificationHandler类，这个类包含一个静态List。为了允许访问这个列表，我制作了一个带有 getter 的 SessionScopped bean，它返回这个列表。

**我的问题如下：**

我在页面 A，我在列表中放了一个通知，页面 A 重新生成，正在显示通知。

然后我点击页面 A 中的链接将我发送到页面 B。

在页面 B 中有一个构造函数来破坏列表。但是，JSF 页面会在调用构造函数之前显示通知。

我最终在页面 B 上收到页面 A 的通知

通知处理程序：

```
package com.cog.util;

import java.util.ArrayList;
import java.util.List;

public class NotificationHandler {

private static List<Notification2> listeDeNotification = new ArrayList<Notification2>();

public static void flushNotification(){
    listeDeNotification.clear();
}

public static void raiseNotification(NotificationColor color, String code){
    listeDeNotification.add(new Notification2(color.toString(), code));
}

public static void raiseNotification(NotificationColor color, String code, String additionalMessage){
    listeDeNotification.add(new Notification2(color.toString(), code, additionalMessage));
}

public static void addAdditionalMessage(String code, String additionalMessage){
    for(Notification2 n : listeDeNotification){
        if (n.getCode().equals(code)){
            n.setAdditionalMessage(additionalMessage);
        }
    }
}

public static Integer getNotificationNumber(){
    return listeDeNotification.size();
}

public static List<Notification2> getListeDeNotification(){
    return listeDeNotification;
} 
```

}

通知打印机.xhtml

```
<composite:interface>
    <composite:attribute name="liste" />
    <composite:attribute name="locale" />
</composite:interface>

<composite:implementation>
    <ui:repeat value="#{cc.attrs.liste}" varStatus="status" var="l">
        <h:panelGrid width="100%" columns="1">
            <div id="alert" class="alert #{l.color}">
                <button class="close" data-dismiss="alert" type="button">×</button>
                <span class="rt">#{cc.attrs.locale[l.code]} #{l.additionalMessage}</span>
            </div>
        </h:panelGrid>
    </ui:repeat>
</composite:implementation> 
```

访问器Bean

```
package com.cog.web.beans.util;

import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import com.cog.util.Notification2;
import com.cog.util.NotificationHandler;

@ManagedBean(name = "notificationAccessor")
@SessionScoped
public class NotificationAccessorBean {

    public List<Notification2> getNotificationList(){
        return NotificationHandler.getListeDeNotification();
    }

} 
```

这就是我放入 jsf 的内容

问题是我只想在某些页面之间刷新通知列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:26:48.653

由于您使用的是 JSF，因此您可以利用它的优点 ( `h:commandLink for example`)，您也可以`preRenderView`尝试将它放在您的页面中并使用它`listener`来刷新列表

看看下面的解释/示例[JSF 2 PreRenderViewEvent 示例](http://mkyong.com/jsf2/jsf-2-prerenderviewevent-example)

# c# - ServiceStack Rest - 复杂的 uri 层次结构

> ID：12510017
> 
> 赞同：1
> 
> 时间：2012-09-20T09:44:58.960
> 
> 标签：c#, rest, servicestack

我正在使用 c# 框架“servicestack”（http://www.servicestack.net/）创建一个休息网络服务，但在试图弄清楚如何支持更复杂的休息层次结构时遇到了问题

而且我正在配置各种路线，而且效果很好

```
Routes
    .Add<MerchantDto>("/merchants")
    .Add<MerchantDto>("/merchants/{id}")
    .Add<MerchantDto>("/merchantGroups/{merchantGroupId}/merchants")
    .Add<MerchantDto>("/merchantGroups/{merchantGroupId}/merchants/{id}")

    .Add<StoreDto>("/stores")
    .Add<StoreDto>("/stores/{id}")
    .Add<StoreDto>("/merchants/{merchantId}/stores")
    .Add<StoreDto>("/merchants/{merchantId}/stores/{id}"); 
```

这一切都很好。这个问题就是这样做的......

```
 .Add<StoreDto>("/merchantGroups/{merchantGroupId}/merchants/{merchantId}/stores/{id} 
```

这里的问题是 StoreDto 对象只包含 MerchantId，它不包含 MerchantGroupId，所以这不起作用。

一种解决方案是将 MerchantGroupId 添加到 DTO，但问题是我正在与其他一些 WCF 服务共享 DTO，如果我在 StoreDto 中有一个在检索操作期间从未填充的 MerchantGroupId 属性，这可能会令人困惑。

另外，我认为这会在不同的地方出现，所以我希望有更好的方法来做到这一点。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:13:40.277

就像@myth 说的那样，我只是通过尝试生成类似 MVC 的 url 路径来使事情变得复杂。

我坚持按原样使用 uri 路径。

# tridion - SmartTarget FredHopper 日期/触发器配置

> ID：12510023
> 
> 赞同：6
> 
> 时间：2012-09-20T09:45:20.113
> 
> 标签：tridion, smarttarget, fredhopper

我想根据我们提供的日期创建 SmartTarget 促销活动。

如果提供的日期早于 4 周（提供的日期 <= 今天 - 4 周），则应显示促销。

我看不到在 SmartTarget 中配置它的方法，我想知道这是否可能？

失败了，我正在考虑构建诸如“DateIsOlderThan4Weeks”之类的变量并将其配置为布尔值。

在我这样做之前，我认为最好检查是否有更优雅的解决方案，因为客户可能会决定根据其他经过的时间段来实现类似的逻辑，如果他们不需要询问就好了开发人员每次都添加一些逻辑。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T11:20:52.080

我不相信目前有一种方法可以对日期基类型的触发器执行计算。您只需获得开始/结束/计划选项。

与其提供布尔触发器，从而（正如您所提到的）限制促销经理更改日期差异的能力，为什么不计算天/周/月的差异并将其作为基于数字的触发器提供，即 SuppliedDateWeekDifference < 4 ? 这将允许管理促销活动的人改变价值观。

# html - 如何创建指向网页子部分的深层链接？

> ID：12510027
> 
> 赞同：4
> 
> 时间：2012-09-20T09:45:25.010
> 
> 标签：html, hyperlink, deep-linking

有谁知道我如何创建指向单个网页子部分的深层链接？

Wiki 似乎已破解，但我似乎无法在网络上的任何地方找到答案。

PS：保持简单！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T14:18:19.177

仅当目标包含构成“目标锚”的标记时，才能链接到页面上的特定位置或元素，您可以在`#`链接中的片段标识符（以 开头）中使用该标记。以下创建此类锚点：

*   一个`id`属性（在任何元素上）
*   元素上的`name`属性`a`

前者是现代的、更可取的方式，让您可以引用一个元素，而不仅仅是一个位置（点）或一个内联元素。例如，如果目标页面[http://www.example.com/stuff.html](http://www.example.com/stuff.html)包含

```
<div class="section" id="sec7">
<h2>Foo bar</h2>
<p>Some text.</p>
Any other content
</div> 
```

那么你可以使用像这样的链接

```
<a href="http://www.example.com/stuff.html#sec7">Foo bar</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:53:06.263

假设您想以一个目录开始一个文档，该目录将人们链接到文档中稍后出现的文本。您的索引将包括以下内容：

```
<a href="#pt1">Part I</a> <a href="#pt2">Part II</a> 
```

在文档的后面部分，您将包含以下标签：

```
<a name=pt1></a> and <a name=pt2></a> 
```

参考：[链接和锚点](http://cti.itc.virginia.edu/~bcr/Labs/links.html)

**编辑：**

无论您想在哪里插入链接，请写下：

```
<a href="http://yourpage.com#pt1">Part I</a> 
```

此处`http://yourpage.com`将替换为您页面的实际网址。现在在您的页面代码中，在您希望链接指向的位置插入一个标签。

```
<a name=pt1></a> 
```

# shell - 批处理脚本到 Shell 脚本

> ID：12510029
> 
> 赞同：0
> 
> 时间：2012-09-20T09:45:31.657
> 
> 标签：shell, batch-file

我编写了一个小**批量脚本**，它从一个文件夹中复制文件并粘贴到另一个文件夹中，延迟时间为 10 秒。我想将它转换为 shell 脚本，但没有办法做到这一点。请帮我。以下是我使用的批处理脚本：

```
@echo off & setLocal EnableDELAYedExpansion

pushd "C:\Users\abc\Desktop\Test"
for /f "tokens=*" %%a in ('dir /b/a-d "leaderboard*.txt"') do (
copy "%%a" "C:\Users\abc\Desktop\Test\final\leaderboard.txt"
timeout 10
) 
popd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:01:26.683

将 sourcedir 和 targetdir 设置为您想要的（不是根据您始终复制到同一个文件 leaderboard.txt 上的代码，如果您想保留原始名称，只需删除“leaderboard.txt”并仅保留“$targetdir”

```
sourcedir=<SOURCEDIR>
targetdir=<TARGETDIR>

for a in "$sourcedir"/leaderboard*.txt; do
    cp "$a" "$targetdir"/leaderboard.txt
    sleep 10
done 
```

注意：如果要复制的文件名中有空格，则此解决方案不起作用

# c++ - 使用 + 和空格将字符串与文字连接起来

> ID：12510033
> 
> 赞同：-3
> 
> 时间：2012-09-20T09:45:51.020
> 
> 标签：c++

> **可能重复：**
> [两个字符串文字的连接](https://stackoverflow.com/questions/12120944/concatenation-of-two-string-literals)

**案例 1** `"hello" "world"`（无错误）

**案例 2** `"hello"+"world"`（错误）

我知道`+`运算符必须至少将其操作数之一设为`string type`,not `string literal`。

问题是，这两种情况都没有意义，因为我们可以将它包含在`single literal`!

那么为什么允许案例1！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T09:48:17.387

情况 1 是允许的，因为 C++ 基本上认为相邻的文字是相同的文字，即代码在解析的早期就`"hello" "world"`被转换为。`"helloworld"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:50:05.290

Case 1, as you call it, is a convenient way to let string constants span several lines or be broken up into easily identified parts.

It's there to make your life easier.

Assuming that `+` should have the same semantics when used with string constants is a mistake. Especially in C, where `string` isn't an available type.

# solr - Solr 4.0 Beta 教程

> ID：12510034
> 
> 赞同：1
> 
> 时间：2012-09-20T09:45:51.250
> 
> 标签：solr, lucene, solrj

您好，我想了解 Solr 4.0 Beta 与之前版本相比的新功能和优势。有没有可用的文档或教程？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:33:46.620

您可以查看[http://svn.apache.org/repos/asf/lucene/dev/trunk/solr/CHANGES.txt](http://svn.apache.org/repos/asf/lucene/dev/trunk/solr/CHANGES.txt)以了解 Solr 版本之间的变化。

4.0.0 下的更改意味着这些更改在 4.0-BETA 中不可用，但将在最终版本中可用。

# php - 如何将空表单字段保存为空？

> ID：12510036
> 
> 赞同：1
> 
> 时间：2012-09-20T09:45:52.390
> 
> 标签：php

我有一个将 POST 数据发送到 php 文件的 html 表单。在 php 中，我正在查询 mysql 数据库。在数据库中，我有接受 null 的 int 列。

问题是当网络表单字段为空时，我想将 null 保存到数据库。我试图在构建查询之前进行检查

```
if (empty($licence))
        $sql_query.="null,r1=";
    else $sql_query.="'".$_POST["licence"]."',r1="; 
```

它正在工作。但是如果用户在表单字段中写0，在数据库中将被保存为空，这是错误的。如果用户输入 0，我想保存 0，但如果该字段为空，我想保存 null。如何解决这个问题？问题是如果字段为空，0 将作为发布数据发送...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:46:49.457

尝试

```
$sql_query.=($_POST["licence"]?"'".$_POST["licence"]."'":NULL).",r1="; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:54:51.357

[empty()](http://php.net/manual/en/function.empty.php)函数（PHP 手册）

如果 var 存在并且具有非空、非零值，则返回 FALSE。否则返回 TRUE。

以下内容被认为是空的：

```
"" (an empty string)
0 (0 as an integer)
0.0 (0 as a float)
"0" (0 as a string)
NULL
FALSE
array() (an empty array)
$var; (a variable declared, but without a value) 
```

在您的情况下，请使用：

```
if (!strlen($licence))
    $sql_query.="null,r1=";
else $sql_query.="'".$_POST["licence"]."',r1="; 
```

反而

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:17:14.600

我认为您可能在数据库表中将许可字段默认值设为 0。因此，当该字段为空时，将记录保存到数据库时取0。

将默认值设为 NULL。它将清除问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T09:54:09.353

如果你检查空（0）你会得到假（如手册中所述）

```
if (isset($licence) && empty($licence)) {
    // it is empty or 0
} elseif(isset($licence)) {
    // it is something 
} 
```

# assembly - 这个程序是如何工作的，以及这个跳转是如何工作的

> ID：12510037
> 
> 赞同：0
> 
> 时间：2012-09-20T09:45:53.237
> 
> 标签：assembly, nasm

```
function:  mov eax,ebx   
           and ebx,1
           shl ebx,2
           jmp [ebx+Tab]
Tab:       dd F1
           dd F2
           dd F3
           dd F4
F4:        sub eax,eax
F3:        add eax,eax
F2:        sub eax,eax
F1:        ret 
```

当 ebx = Number--> 应该在 eax 中返回 Number，否则为 0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:58:59.850

它将 eax 的副本放入 ebx，取最右边的数字 (AND) => 0 或 1，将其四倍 (SHL) => 0 或 4，通过跳转表跳转到计算地址 => F1 或 F4，如果F1（ebx 为 0，eax 为偶数）返回原始 eax，如果 F2（ebx 为 4，eax 为偶数）返回 0（eax-eax）。

F3 和 F4 未使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T10:01:06.203

`and ebx,1` 按位与运算，结果为 0（如果 ebx 为偶数）或 1（否则）

`shl ebx,2` 左移 2 位（相当于乘以 4）。ebx 现在是 0 或 4。

`jmp [ebx+Tab]`从 Tab + ebx 获取地址并跳转到它。Tab 是四字节指针数组，ebx 为 0 或 4，因此它指向第一个 (F1) 或第二个 (F2) 元素。如果偶数跳转到 F1（返回原始值），否则跳转到 F2（其中 eax 被清除并返回零）。

# android - Android WebView 应用程序在强制关闭/重启时清除 HTML5 缓存数据

> ID：12510038
> 
> 赞同：3
> 
> 时间：2012-09-20T09:45:53.687
> 
> 标签：android, html, android-webview, html5-appcache

我有一个`WebView`支持 html5 功能的示例应用程序，我有一个存储离线数据和检索离线存储数据的网站，但是每当我**强制关闭**应用程序时，它都会丢失所有保存的数据。

我应该做些什么来处理**强制关闭**？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T07:39:38.633

我也有这个问题，发现 Activity 和 WebView 这种奇怪的行为：

如果您在布局 xml 中声明了超过 1 个 Web 视图，则强制关闭/重启将不会保留缓存的离线数据。

所以解决这个问题，我在布局 xml 中只保留了 1 个 web 视图，而我动态添加到视图组中的其他 web 视图。这可以防止离线数据丢失。希望这可以帮助。

# android - 将自定义适配器列表视图中的所有元素设置为可见/不可见

> ID：12510039
> 
> 赞同：0
> 
> 时间：2012-09-20T09:46:00.843
> 
> 标签：android, android-listview, visibility, custom-adapter

我正在尝试使 Button 更改我所有 Listview 元素中单个 ImageButton 的可见性。我遇到的问题是找到要访问的正确元素，因为我没有简单的方法来访问自定义适配器中的特定元素（我认为）

相关代码部分：

```
 public View getView(final int position, final View convertView, final ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
    {
        vi = inflater.inflate(R.layout.custom_row_view, null);
    }

/*
 other non important view stuff
*/
if(deleteButton != null){
        deleteButton.setVisibility(View.INVISIBLE);
        deleteButton.setTag(position);
        deleteButton.setOnClickListener(deleteListener);
    }

    return vi;
}

public void setVisibility()
{
    if(deleteButton.getVisibility() == View.INVISIBLE){
        deleteButton.setVisibility(View.VISIBLE); //Here i  want to access all elements
        Log.i("setVisibility", "Changing to "+ deleteButton.getVisibility() + " element: " + deleteButton.getTag()); 
//Logcat output: Changing to 0 element: 2

    } else if(deleteButton.getVisibility() == View.VISIBLE){
        deleteButton.setVisibility(View.INVISIBLE); 
        Log.i("setVisibility", "Changing to "+ deleteButton.getVisibility() + " element: " + deleteButton.getTag());
//Logcat output: Changing to 4 element: 2

    }
} 
```

我在主要活动中使用的东西：

```
CustomAdapter listAdapter;
ListView listViewLeft;
ListView listViewRight;

OnCreate:
listAdapter=new CustomAdapter(this, link, names, names2, buttonText,context, plistArray); 
listViewLeft.setAdapter(listAdapter);
listViewRight.setAdapter(listAdapter); 
```

我只需使用以下方法调用该方法：

```
OnClickListener editListener = new OnClickListener() {
    public void onClick(View view) {
        listAdapter.setVisibility();
       }
 } 
```

如果有人有任何想法，我会非常感激，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:19:49.337

这是一个非常简单的修复。我忘记打电话了：

```
listAdapter.notifiDataSetChanged(); 
```

但是每次调用那个方法都会调用getView方法，所以我只是在自定义适配器getView中添加了这个

```
if(deleteButton != null){
        if(deleteButton.getVisibility() == View.INVISIBLE){
            deleteButton.setVisibility(View.VISIBLE);
        } else if(deleteButton.getVisibility() == View.VISIBLE){
            deleteButton.setVisibility(View.INVISIBLE); 
            }
        deleteButton.setTag(position);
        deleteButton.setOnClickListener(deleteListener);
    } 
```

并将 XML 中的默认设置为可见。我不确定这是否是最有效的方法，但它至少可以按预期工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:57:06.547

您需要在适配器中存储带有不可见按钮或可见性值的项目索引，并在`getView()`. 它与 ListView 端的视图重用有关。
请参阅[我的回答](https://stackoverflow.com/questions/12459507/change-the-background-of-select-click-listview-item-android/12470571#12470571)以了解如何修复它，并参阅[此 Romain Guy Google I/O talk](http://www.youtube.com/watch?v=wDBM6wVEO70)以了解有关 ListView 的更多详细信息

# objective-c - 如何以编程方式更改标签的字体？

> ID：12510040
> 
> 赞同：8
> 
> 时间：2012-09-20T09:46:03.607
> 
> 标签：objective-c, cocoa-touch, fonts, uilabel

> **可能重复：**
> [通过代码设置 UILabel - 字体 - 生成错误 - iPhone](https://stackoverflow.com/questions/1380490/setting-uilabel-font-through-code-generates-error-iphone)

我想知道有没有办法以编程方式设置标签的字体，因为当条件设置为真时，我需要更改应用程序中的字体。如何使用 Apple 的各种字体来做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-20T09:49:26.693

让自己列出可用字体：

```
for( NSString *strFamilyName in [UIFont familyNames] ) {
  for( NSString *strFontName in [UIFont fontNamesForFamilyName:strFamilyName] ) {
    NSLog(@"%@", strFontName);
  }
} 
```

现在`set Font` `like`这个：

```
 [yourLabel setFont:[UIFont fontWithName:@"your font name here" size:fontsizehere]]; 
```

**编辑**：

例如像这样：

```
 [yourLabel setFont:[UIFont fontWithName:@"Arial" size:15]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:49:12.857

这里使用这个代码。

```
[labelname setFont:[UIFont fontWithName:@"American Typewriter" size:18]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:51:25.500

像这样设置

```
UIFont *font = [UIFont fontWithName:@"MyFont" size:20];
    [label setFont:font]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T09:55:31.507

//设置标签

```
label.font = [UIFont fontWithName:@"Calibri" size:15]; 
```

//设置标签颜色

```
label.textColor = [UIColor redColor]; 
```

//如果你有RGB值，设置标签colr

```
label.textColor = [UIColor colorWithRed:180.0/255.0 green:6.0/255.0 blue:47.0/255.0 alpha:1.0]; 
```

# cordova - 动态变化的主题

> ID：12510043
> 
> 赞同：0
> 
> 时间：2012-09-20T09:46:16.757
> 
> 标签：cordova, jquery-mobile

我正在使用 jQuery Mobile 和 PhoneGap 制作一个应用程序。我想动态地改变主题，所以我做了这样的事情：

```
function theme()
{
    Array.prototype.forEach.call(document.getElementsByTagName("*"), function (el) {
    el.setAttribute("data-theme", "e");
});
} 
```

问题是主题只有在元素上滚动鼠标或例如“点击”事件后才会改变。

如何在不重新加载页面的情况下修复它？我想设置一个主题，并在我所有的网站开始时将其放在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:51:44.803

你不能以你正在尝试的方式。当 jQuery mobile 在页面显示**之前**`data-theme`查看属性时，它会为您发挥神奇的作用。也就是说，它会根据所选主题更改应用的 CSS 规则。因此，如果您不想重新加载页面，则必须更改 css 规则而不是属性。像这样的东西：**`data-theme`**

 **```
$('#button1').css(....); 
```**

# sql-server-2005 - 在 SQL Server 身份验证下登录数据库时如何使用 sql 查询获取 NT_Username

> ID：12510050
> 
> 赞同：0
> 
> 时间：2012-09-20T09:46:26.147
> 
> 标签：sql-server-2005

我已经使用 SQL Server 身份验证登录，我想使用 SQL 查询检索 Windows 用户名。

我尝试使用 SYSTEM_USER 和 SUSER_NAME() 它返回登录用户名的 sql 而不是 windows NT_Username。

有没有办法获得 windows NT_username ？

谢谢。

# jquery - jquery使用鼠标坐标来偏移'tooltip'风格的悬停功能

> ID：12510063
> 
> 赞同：6
> 
> 时间：2012-09-20T09:47:01.627
> 
> 标签：jquery, html, hover, mouseevent, coordinates

我正在尝试创建一个小 div，它在特定元素悬停时出现。我还想使用随着客户端移动鼠标而变化的鼠标坐标来偏移 div 的位置。

我的猜测是，计算这个并返回 div 的新值是昂贵的，并且随着 div 的移动交错而耗尽资源。

有谁知道如何使这种方法更有效？

我使用了[工具提示插件](http://jquery.bassistance.de/tooltip/demo/)，它具有很好的跟踪功能，并且可以非常流畅地移动元素。

我的js；

```
 $(document).ready(function(){
        $('#utilities').mouseover(function(event) { 
            var left = event.pageX - $(this).offset().left + 100;
            var top = event.pageY - $(this).offset().top + 130;
            $('#gas-electric-hover').css({top: top,left: left}).show();
            //console.log (left, top);
        });
        $('#utilities').mouseout(function() {
            $('#gas-electric-hover').hide();
        });
    }); 
```

我还创建了这个[jsfiddle](http://jsfiddle.net/lharby/wKEx8/)。事实上，在本地，这段代码是惊人的，但 jsfiddle 似乎只在鼠标进入和离开目标 div 时更新坐标。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-20T09:54:02.287

我想你想要 mousemove 喜欢

```
 $(document).ready(function(){
    $('#utilities').mousemove(function(event) { 
        var left = event.pageX - $(this).offset().left + 100;
        var top = event.pageY - $(this).offset().top + 130;
        $('#gas-electric-hover').css({top: top,left: left}).show();
        //console.log (left, top);
    });
    $('#utilities').mouseout(function() {
        $('#gas-electric-hover').hide();
    });
}); 
```

检查这个更新**[的 jsFiddle](http://jsfiddle.net/wKEx8/3/)**

# c++ - 不能在 Metro 风格项目（WINRT）中使用 opencl

> ID：12510065
> 
> 赞同：4
> 
> 时间：2012-09-20T09:47:04.993
> 
> 标签：c++, windows-runtime, opencl

我正在 WIN8（Metro 风格的应用程序）下编写代码，并且在使用 OpenCL 时遇到问题。

当我将它编译为 WIN8 桌面应用程序并将其运行时，我的项目运行得非常好。但是当我把它改成 Win store app（Metro 风格）时，我就不能再使用 OpenCL 了。

```
//get platform id
error = clGetPlatformIDs(1, &platformID, &numPlatforms);

if(error != CL_SUCCESS)
    return; 
```

clGetPlatformIDs 返回错误代码`-1001`。

我不能在 Metro 风格应用程序中使用 OpenCL 吗？有人请帮我解决这个问题。我是WIN8新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:43:17.860

错误代码 -1001 通常意味着您的驱动程序已正确安装，但 opencl 运行时未正确配置/安装。

你可以尝试各种东西...

1）确保您安装了更新的驱动程序并且没有过时（如果您发现最新驱动程序有问题，您也可以使用以前的版本重试）？

2) 完全删除当前驱动程序并重新安装。

# php - Yii CSRF Token 无法验证

> ID：12510066
> 
> 赞同：0
> 
> 时间：2012-09-20T09:47:11.297
> 
> 标签：php, ajax, post, yii, csrf

我的脚本中有一个由 ajax 提交的表单，如下所示：

```
jQuery.ajax({
        url:jQuery('form',modal).attr('action'),
        contentType: "application/json; charset=utf-8",
        dataType: 'json',
        type:'post',
        data: {
            email:jQuery('input[name="email"]',modal).val(),
            something:jQuery('input[name="something"]',modal).val(),
            level:jQuery('select[name="level"]',modal).val(),
            YII_CSRF_TOKEN: jQuery('input[name="csrf"]').val()
        },
        success: function(data){
            jQuery('.message',modal).html(data.message).slideDown();
            if (!data.success){
                jQuery('input[name="email"]',modal).addClass('error');
            } else {
                jQuery('input[name="email"]',modal).removeClass('error');
            }
        }
    }); 
```

一切都很好。然后今天我正在编写用于从数据库中删除项目的新函数。所以我编写了我的 php 函数（没有什么特别复杂的），并通过单击链接向它添加了 jQuery ajax 调用：

```
// ajax request
    jQuery.ajax({
        url:jQuery(this).attr('href'),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        type:'post',
        data: {
            something:jQuery(this).attr('alt'),
            YII_CSRF_TOKEN:jQuery('input[name="csrf"]').val()
        },
        success: function(data){

        }
    }); 
```

链接和表单都在同一个视图中。但是在添加了删除一切的新功能之后，一切都崩溃了。我无法向服务器发出任何 POST 请求，只是出现“错误：无法验证 CSRF 令牌”。当我通过 CSRF 时，我看不到问题所在。萤火虫日志显示：

```
YII_CSRF_TOKEN  bf6d9bf62ee96f32e34a74244baca7f2f1bdd569
something   4 
```

我可能理解新功能由于任何原因都不起作用，但是为什么其他功能也发生故障，我无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:08:26.750

我已经弄清楚了问题所在，并认为我会与您分享。当然，这是非常微不足道的。

在 PHP 函数（操作）中，流程正在进行，每次遇到问题/非预期结果（记录不存在等）时，它都会返回如下内容：

```
if (empty($user)){
    echo json_encode(array('success'=>0,'message'=>'User does not exist'));
    return false;
} 
```

我想你们中的一些人已经看到了我的错误。问题是一旦你

```
return false; 
```

Yii 自动返回消息“Invalid Request”。因此，无论您是否在服务器端一切都做得很好，您必须始终返回 true。所以

```
if (empty($user)){
    echo json_encode(array('success'=>0,'message'=>'User does not exist'));
    return true;
} 
```

按预期工作。

对于消息“错误：无法验证 CSRF 令牌”的问题。我仍然不明白问题是什么，但也找到了解决方案。我已经意识到这条消息是在第一个实例中返回的，我对 $_POST 变量执行任何操作。因此，我在行动开始时所做的是：

```
$post = $_POST; 
```

可能不是完美的解决方案，但它确实有效。

# android - Android：图像阵列不断变化的垂直图像滚动

> ID：12510072
> 
> 赞同：1
> 
> 时间：2012-09-20T09:47:36.833
> 
> 标签：android, bitmap, scrollview, vertical-scrolling, scroll-position

我有一组在代码中生成的位图（不是取自资产、卡片、网络等），并且大约有 50 个（这个数字不是常数）位图需要在该数组中。起初我试图一次创建所有位图，这显然导致了 outOfMemory 错误。因为图像必须根据 id 一个接一个地按照精确的顺序排列，所以我创建了变量 bitmapID，当创建一个位图时该变量会增加，并且仅在需要根据该 bitmapID 变量显示在屏幕上时才创建图像。

所以第一个解决方案（有效）是用 ImageView（s）填充 ScrollView 内部的 LinearLayout。内部活动 onCreate() 调用方法 fillScreen(int how_many_times) 它将用图像填充屏幕的次数与变量 how_many_times 预期的一样多。在我的演示应用程序中，我将平板电脑屏幕填满了 3 次。fillScreen(int how_many_times) 正在处理调用 loadBitmap(int bitmapID) 的循环，该循环负责根据给定的 id 创建单个位图。创建的位图保存在 imageHolder 对象的数组中。除了 bitmap 和 id 之外的 imageHolder 对象还有 scroll_start 和 scroll_end 参数来指示它们的滚动位置。例如，第一个 imageHolder 的 scroll_start = 0 和 scroll_end = 500，而第二个 imageHolder 的 scroll_start = 500 和 scroll_end = 800。Activity 实现了 onScrollChanged(scrollView, int x, int y, int oldx, int oldy) 以响应滚动并在屏幕底部添加图像并从顶部删除。所以实现工作就像这样：

```
if (y > arrayOfImageHolders.get(1).getScroll_end() && removeEnabled) 
{
//removes one image view from beginning of LinearLayout
removeFromBegining();
scrollView.scrollTo(0, arrayOfImageHolders.get(1).getScroll_start());
}

if (y > arrayOfImageHolders.get(arrayOfImageHolders.size() - 1).getScroll_start() && fillEnabled) 
{

//Adds image views at the end of LinearLayout                   
fillScreenEnd(1);

} 
```

有了这个实现，滚动是平滑的，当添加或删除图像时我几乎没有滚动跳跃。在所有 imageHolder 对象上添加或删除图像后，总是会更新 scroll_start 和 scroll_end 值。所以这个实现适用于向前滚动，但我也需要它以相同的方式向后滚动。因此，我添加了如果案例对向后滚动做出反应，并且在我的脑海中它必须像向前滚动一样完美地工作。如果情况向后滚动：

```
if (y > arrayOfImageHolders.get(arrayOfImageHolders.size() - 1).getScroll_start() && fillEnabled) 
{

//Adds image views at the end of LinearLayout                   
fillScreenEnd(1);

}
else if(y < arrayOfImageHolders.get(1).getScroll_start()) && fillEnabled && y < oldy)
{
//Add image views at the beginning of LinearLayout
fillScreenStart(1);

}

if (y > arrayOfImageHolders.get(1).getScroll_end() && removeEnabled) 
{
//removes one image view from beginning of LinearLayout
removeFromBegining();
scrollView.scrollTo(0, arrayOfImageHolders.get(1).getScroll_start());
}
else if(y < arrayOfImageHolders.get(arrayOfImageHolders.size()-2).getScroll_start() && removeEnabled && y < oldy)
{
//removes one image view from end of LinearLayout
removeFromEnd();

} 
```

我尝试在不同的地方包含 scrollTo() ，但它在任何地方都不起作用。当在开头添加或从结尾删除某些内容时，滚动只会继续移动。无论 scrollView 变大还是变小，我都想保持滚动位置不变。关于如何实现它的任何想法？或者关于如何实现这种滚动视图的任何其他想法？

我还尝试了使用自定义适配器的 ListView 和 onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) 的实现，并尝试通过删除和添加项目并调用 notifyDataSetChange() 来更改 arrayOfImageHolders，但无法获得稳定的屏幕位置删除或添加时。

为了让这个案例和问题更清楚，试着想象一下赌场老虎机。有一个图像列表一直保持有序，但屏幕上只显示一个。而且您可以双向滚动滚轮，即使您在滚轮上添加一些图像或删除一些图像，您在屏幕上看到的图像仍然保持不变。

对我来说，这看起来像是一个复杂的问题，所以任何想法（不仅仅是具体的解决方案）都会受到赞赏。

# rotation - 第二次调用时 CGAffineTransformMakeRotation 不起作用

> ID：12510074
> 
> 赞同：2
> 
> 时间：2012-09-20T09:47:40.640
> 
> 标签：rotation, transform, cgaffinetransform

我有这个功能可以将 UIButtons 旋转 45 度。但是一旦旋转，调用相同的方法不会再旋转，并且按钮在第一次旋转后卡在其旋转位置。有任何想法吗？

```
- (void)rotateImage:(UIButton *)image duration:(NSTimeInterval)duration 
              curve:(int)curve degrees:(CGFloat)degrees
{
    // Setup the animation
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:duration];
    [UIView setAnimationCurve:curve];
    [UIView setAnimationBeginsFromCurrentState:YES];

    // The transform matrix
    CGAffineTransform transform = 
    CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(degrees));
    image.transform = transform;

    // Commit the changes
    [UIView commitAnimations];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:18:34.367

`transform`财产是绝对的。如果您想从当前位置进行相对旋转，您需要跟踪按钮的绝对旋转并使用现有方法（可能会更快），或者将新旋转连接到现有旋转中。下面是连接旋转矩阵的代码。

我没有使用我的 Obj-C（我使用 MonoTouch），但它在 C 中可能看起来像这样：

```
image.transform = image.transform.Rotate(DEGREES_TO_RADIANS(degrees)); 
```

或这个：

```
image.transform = CGAffineTransformationConcat( 
    image.transform, 
    CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(degrees));
) 
```

随意编辑这篇文章以使其成为正确的 Obj-C。

# html - Three.js Hello World 和包含文件

> ID：12510082
> 
> 赞同：2
> 
> 时间：2012-09-20T09:48:25.197
> 
> 标签：html, three.js

我开始学习 html5 和 WebGl。我从这个[例子](http://aerotwist.com/tutorials/getting-started-with-three-js/)开始。

我已经 `build.three.js`加入了`<script src="../build/three.min.js"></script>`

然后在另一个脚本中添加[示例](http://aerotwist.com/tutorials/getting-started-with-three-js/)中的内容，但我无法使其工作。

有人知道如何包含`JQuery`脚本吗？我在 three.js 的源代码中找不到它

我错过了什么？有谁能给我提供一个three.js hello world 的html 源代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:31:34.047

将此添加到您的页面：

`<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>`

同样的例子在这里[http://jsfiddle.net/jZxfZ/](http://jsfiddle.net/jZxfZ/)

# lisp - Lisp 代码 - 如何运行这个例子

> ID：12510086
> 
> 赞同：0
> 
> 时间：2012-09-20T09:48:37.100
> 
> 标签：lisp

这是来自系统管理员职位的面试。

在测试过程中，我发现了一个 cookie。它包含一条经过 base64 编码的消息，接下来是 uuencoded，接下来是 bzip，最后是 gzip。经过所有的解压缩，它包含以下代码：

```
(let* ((x '((1 2 (3 4 5) 6) 7 8 (9 10))))
  ;; use car/caaa..r/cd..r here to get 4 from x
  ) 
```

我认为是 Lisp。我现在正试图找出这应该做什么。
我对Lisp一无所知，所以有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:18:54.457

一个非常简单（也许是最容易理解）的代码：

```
(car (cdr (car (cdr (cdr (car x)))))) 
```

**(car l)**给你列表**l的第一个元素**

**(cdr l)为您提供列表****l**的剩余元素（在列表本身中）

分别尝试每个呼叫以查看发生了什么。

它确实是 Lisp。如果您想了解更多信息并为未来的面试做好更好的准备，您可以尝试在 Lisp教程中[施法。](http://www.lisperati.com/casting.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T14:20:57.937

```
(let* ((x '((1 2 (3 4 5) 6) 7 8 (9 10))))

 ; use car/caaa..r/cd..r here to get 4 from x

) 
```

因此，您应该编写代码以`4`从嵌套列表中访问`((1 2 (3 4 5) 6) 7 8 (9 10))`。

Common Lisp Hyperspec 为您提供了可用的访问器函数：[Accessor CAR、CDR、](http://www.lispworks.com/documentation/HyperSpec/Body/f_car_c.htm) ...。

```
> (CADR (CADDAR '((1 2 (3 4 5) 6) 7 8 (9 10))))
4 
```

所以代码是：

```
(let* ((x '((1 2 (3 4 5) 6) 7 8 (9 10))))
   (cadr (caddar x))) 
```

# php - SQL 从两个表中获取值

> ID：12510091
> 
> 赞同：0
> 
> 时间：2012-09-20T09:48:46.037
> 
> 标签：php, mysql, sql

嗨，如果对如何构建我的 sql 语句有疑问，我将不胜感激有关我应该如何正确处理的任何帮助。我想要实现的是显示来自**tbl_adviser的所有****顾问**，同时还显示教师从**tbl_section分配的班级****section_id**。这就是我到目前为止所提出的。

 ******```
 $qry_display = "SELECT a.section_id,b.*
     from tbl_section As a LEFT OUTER JOIN tbl_adviser AS b ON a.section_id
                                 = b.adviser_id Where bname='$branch'"; 
```

**我对 $branch 的想法是，如果用户具有相同的bname**，则他们只能查看相同的数据

 **这是我的数据库结构：

tbl_section：

```
section_id
section_name
sy
adviser_id
level
bname 
```

tbl_adviser：

```
adviser_id
lname_a
fname_a
address
bname
photo
cnumber 
```

这就是我想展示的方式：

```
 while (@$get_display = mysql_fetch_object(@$sql_display))
            {

            ?><tbody>
            <tr>
<td  class="text"><a href="adviser_view.php?&id=
<?php echo $get_display->adviser_id ?>">
            <?php echo @$get_display->adviser_id; ?></a></td>
                <td  class="text"><?php echo @$get_display->lname_a ?></td>
                <td  class="text"><?php echo @$get_display->fname_a ?></td>
                <td  class="text"><?php echo @$get_display->section_id ?></td>

            </tr>
            </tbody> 
```

编辑：吐出的错误是“on 子句中的列'bname'不明确”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:53:39.853

你`ON`对我的看法是不正确的：

```
ON a.section_id = b.adviser_id 
```

应该是：

```
ON a.adviser_id = b.adviser_id 
```

您还需要消除该`bname`列 - SQL 不知道它应该来自`WHERE`子句中的哪个表：

```
Where bname='$branch' 
```

可：

```
Where a.bname='$branch' 
```

或者：

```
Where b.bname='$branch' 
```********

# numpy - 在 numpy 掩码数组上执行乘法时出现溢出警告

> ID：12510098
> 
> 赞同：5
> 
> 时间：2012-09-20T09:49:05.187
> 
> 标签：numpy

我有一个应用程序从 netcdf 文件中读取 32 位浮点数据，其中使用了默认的 netcdf 填充值，即 9.96920996839e+36。在应用程序中的特定点，对从输入数据创建的 float32 类型掩码数组执行基本缩放（乘法）操作，因此：

```
x = marr * scale   # or, equivalently, x = ma.multiply(marr,scale) 
```

此操作会引发“在乘法中遇到溢出”警告，可能是因为填充值和比例的乘积超过了 32 位浮点数的最大值。已知掩码数组中的其他值很小。那么问题是，为什么 numpy 甚至计算输入数组中被屏蔽元素的乘积？当然，这些都应该被忽略，对吧？

碰巧的是，可以忽略警告，因为输出数组中的相应值仍被标记为已屏蔽。但是知道这是 numpy 中的错误还是“按设计工作”会很有趣。

下面的代码片段说明了这种行为。

```
import numpy as np
import numpy.ma as ma
arr = [9.96920996839e+36, 1.123, 2.345, 9.96920996839e+36]
marr = ma.masked_values(np.array(arr, dtype='float32'), 9.96920996839e+36)
x = marr * 128.0 
```

正如预期的那样，如果掩码数组的类型为 float64，则不会出现溢出警告（尽管如果比例因子足够大，可能会出现）。同样，如果在 float32 情况下使用较小的填充值（例如 -1.0e20），警告就会消失。

从表面上看，当使用较大的填充值（非常接近 32 位 fp 值的最大值）时，numpy 似乎无法识别掩码值。

TIA，
菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:13:50.547

可能是一个错误。上一行有：

```
np.seterr(divide='ignore', invalid='ignore') 
```

这表明它旨在处理 0 或 NaN 的掩码，但不是非常大的值。它应该是： 

```
np.seterr(divide='ignore', invalid='ignore', over='ignore') 
```

也可以处理大的掩码值。

请注意，`numpy.ma`操作通常对数组中的所有值进行操作，包括掩码值；这大概是因为效率和广播问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:21:02.817

> 那么问题是，为什么 numpy 甚至计算输入数组中被屏蔽元素的乘积？当然，这些都应该被忽略，对吧？

唉，没有。**在当前实现中，对整个**数组应用任何操作，然后重新应用掩码。

我知道这听起来适得其反，但与其他方法相比，它是更强大且效率更低的替代方案。最初，仅在适当的域上应用该操作会很好，但该域的计算可能会变得非常棘手（存在一些巨大的问题`pow`）。而且，额外的测试会使已经很可怜的性能崩溃。

最近引入了一种新方法，其中 numpy 函数接受一个可选参数`where`，这可能会有所帮助......但也有讨论直接在 C 级别引入对缺失/忽略值的支持，这可能是要走的路.

# google-maps - 通过 iframe url 编辑谷歌地图的信息窗口

> ID：12510104
> 
> 赞同：0
> 
> 时间：2012-09-20T09:49:44.073
> 
> 标签：google-maps

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:09:38.910

`InfoWindow`不，您勾选的 的部分看起来不能更改。

`iwloc`, `iwd`,`iwstate1`是似乎可以控制`InfoWindow`. 但是这些参数似乎并不能控制您在图像中突出显示的元素。这些参数不再公开记录。第三方链接[在这里](http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters)。

[但是，如果您使用的是动态谷歌地图APIv3](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)，则可以在检测到[标记](https://developers.google.com/maps/documentation/javascript/reference#Marker)上的单击事件时自己定制信息窗口。

但是，如果您使用动态 API 创建地图视图，您就会知道这一点。

这是 Google Maps Dynamic API 页面的链接：[https ://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)

# apache - Solr 中的词干

> ID：12510111
> 
> 赞同：1
> 
> 时间：2012-09-20T09:50:29.827
> 
> 标签：apache, solr, solrj, stemming

我正在将 EnglishPorterFilterFactory 用于我目前在 solr 中构建的应用程序。事情进展顺利。我尝试使用 EnglishMinimalStemFilterFactory，因为我想选择一个不那么激进的。但我无法分析 solr 结果的巨大差异。两者有什么区别？您还可以向我推荐一个不那么激进的过滤器工厂来进行多元化词干处理。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:35:52.393

我会选择 HunspellStemFilterFactory。鉴于它基于字典而不是算法，我希望它不那么激进。

# python - Python / Minidom：在 NodeList 上迭代

> ID：12510112
> 
> 赞同：4
> 
> 时间：2012-09-20T09:50:34.117
> 
> 标签：python, xml, minidom

我正在制作一个解析 XML 文件的 Python 程序。我需要遍历 NodeList，但我在使用“for node in NodeList”语法时遇到了问题。

这是一个代码示例：

```
docToInclude = parse(node.getAttribute("file"))

print ("childNode count : " , len(docToInclude.documentElement.childNodes))
print ("childNodes : " , docToInclude.documentElement.childNodes)
print("")

for i in range(0, len(docToInclude.documentElement.childNodes)):
    print ("i  = ", i , "nodeName = " + docToInclude.documentElement.childNodes[i].nodeName)

print("")

for elementNode in docToInclude.documentElement.childNodes :
    print ("node name : " ,  elementNode.nodeName)
    node.parentNode.insertBefore(elementNode, insertPosition) 
```

这是输出：

```
childNode count :  3
childNodes :  [<DOM Text node "'\n\n\t'">, <DOM Element: messageList at 0x3a4e570>, <DOM Text node "'\n\n'">]

i  =  0 nodeName = #text
i  =  1 nodeName = messageList
i  =  2 nodeName = #text

node name :  #text
node name :  #text 
```

如果我在 NodeList 语法中使用 for 节点进行迭代，则会跳过一个元素。你知道这个问题的根源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:01:02.150

`childNodes`在迭代它们时，您正在将元素移出。这将*更改*`childNodes`列表：

```
>>> lst = [1, 2, 3]
>>> for i, elem in enumerate(lst):
...    print i, elem
...    del lst[i]
...    
0 1
1 3 
```

您将不得不迭代列表的*副本*；`[:]`在这里，我使用切片表示法创建列表的副本：

```
for elementNode in docToInclude.documentElement.childNodes[:]:
    print ("node name : " ,  elementNode.nodeName)
    node.parentNode.insertBefore(elementNode, insertPosition) 
```

不过，请帮自己一个大忙，改用[ElementTree API](http://docs.python.org/library/xml.etree.elementtree.html)；该 API 远比 XML DOM API 更 Pythononic 且更易于使用：

```
from xml.etree import ElementTree as ET

etree = ET.fromstring(data)
for element in etree.findall('messageList'):
    print element 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:38:18.387

appendChild() 将执行以下操作： ![在此处输入图像描述](../Images/51cba18954c57471b88479898301c630.png)

我只是从代码中学习它，使用 tuple() 可以解决问题。

# objective-c - 如何像 iTunes 排序一样对 NSString 进行排序？

> ID：12510116
> 
> 赞同：1
> 
> 时间：2012-09-20T09:50:43.397
> 
> 标签：objective-c, ios, nsstring

我想使用 iTunes 排序规则对 NSString 数组进行排序。该规则忽略诸如“a, an, The”之类的主要冠词。还有一些其他的规则。苹果已经发布了一篇关于它的文章。 [iTunes 7.3：音乐排序顺序的变化](http://support.apple.com/kb/HT2642?viewlocale=en_US&locale=en_US)

任何人都知道 iOS 5.0 或更高版本中可以解决此问题的任何 API？

干杯，费德里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:45:27.517

首先，遍历 NSString 并检查第一个单词是否是您不想使用的单词`hasPrefix:`，然后您可以将它们替换为`stringByReplacingOccurrencesOfString:withString:`

然后你可以像这样对字符串进行排序：

```
sortedArray = [stringArray sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

或者您可以创建自己的方法来比较 2 个字符串，而不是使用`localizedCaseInsensitiveCompare:`

# php - 使用fpdf修改php中已有的pdf

> ID：12510117
> 
> 赞同：10
> 
> 时间：2012-09-20T09:50:53.153
> 
> 标签：php, pdf, fpdf

我的服务器上有一堆 pdf，下载时需要将文本附加到每一页。我正在使用 fpdf 尝试打开文件，将文本附加到每个页面，关闭文件并提供给浏览器。

```
$pdf = new FPDI();

$pdf->setSourceFile($filename); 
// import page 1 
$tplIdx = $pdf->importPage(1); 
//use the imported page and place it at point 0,0; calculate width and height
//automaticallay and ajust the page size to the size of the imported page 
$pdf->useTemplate($tplIdx, 0, 0, 0, 0, true); 

// now write some text above the imported page 
$pdf->SetFont('Arial', '', '13'); 
$pdf->SetTextColor(0,0,0);
//set position in pdf document
$pdf->SetXY(20, 20);
//first parameter defines the line height
$pdf->Write(0, 'gift code');
//force the browser to download the output
$pdf->Output('gift_coupon_generated.pdf', 'D');

header("location: ".$filename); 
```

此刻，这只是尝试将一些文本放在pdf上的任何位置并保存，但我得到了错误

```
FPDF error: You have to add a page first! 
```

如果我能做到这一点，那么我需要它将文本附加到文档中的每一页，而不仅仅是 1，不知道如何在阅读文档后执行此操作

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T10:03:57.127

尝试关注

```
require_once('fpdf.php');
require_once('fpdi.php');

$pdf =& new FPDI();
$pdf->AddPage(); 
```

使用这个页面作为模板，然后

```
$pdf->setSourceFile($filename); 
// import page 1 
$tplIdx = $pdf->importPage(1); 
//use the imported page and place it at point 0,0; calculate width and height
//automaticallay and ajust the page size to the size of the imported page 
$pdf->useTemplate($tplIdx, 0, 0, 0, 0, true); 
```

如果您有任何错误，请告诉我

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-29T12:54:07.827

由于您希望所有页面都包含文本，因此一种方法是将代码放入循环中。

像这样：

```
// Get total of the pages
$pages_count = $pdf->setSourceFile('your_file.pdf'); 

for($i = 1; $i <= $pages_count; $i++)
{
    $pdf->AddPage(); 

    $tplIdx = $pdf->importPage($i);

    $pdf->useTemplate($tplIdx, 0, 0); 

    $pdf->SetFont('Arial'); 
    $pdf->SetTextColor(255,0,0); 
    $pdf->SetXY(25, 25); 
    $pdf->Write(0, "This is just a simple text"); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-01T08:55:25.677

您可以使用 Dhek 图形工具设计 JSON 格式的模板，定义稍后要在现有 PDF 上添加的区域（边界、名称、...）（使用 FPDF 和动态数据）。[请参阅https://github.com/cchantep/dhek/blob/master/README.md#php-integration](https://github.com/cchantep/dhek/blob/master/README.md#php-integration)上的文档。

# jquery - struts 2 datepicker在jquery post函数后未加载

> ID：12510119
> 
> 赞同：0
> 
> 时间：2012-09-20T09:51:08.410
> 
> 标签：jquery, struts2

在发布操作“addEmployeeFromTree”后，我正在使用 struts 2 jquery，input_employee.jsp 表单已加载，但仅显示 dateandtimepicker 的标签而不显示日历

```
<ul id="myPost" class="contextMenu">
    <li class="copy separator"><a href="#add">Add Employee</a></li>
</ul>

function(action, el, pos) {
    if(action == 'add'){                            
        $.post("addEmployeeFromTree","positionId="+ $(el).attr('id').substring(5),function(data){
            $("#result").html(data);
        });
    }
} 
```

映射文件

```
<action name="addEmployeeFromTree" class="hris.employee.action.EmployeeAction" method="getPost1">
    <result>/jsp/employee/input_employee.jsp</result>
</action> 
```

input_employee.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib prefix="s" uri="/struts-tags" %>
<%@ taglib prefix="sx" uri="/struts-dojo-tags"%>
<html>
    <table>
        <tr>
            <td align="left">
                <sx:datetimepicker name="passportExpirationDate" value="% {employee.passportExpirationDate}"  displayFormat="%{#application.dateFormat}" />
            </td>
        </tr>
    </table>
</html> 
```

# objective-c - idleTimerDisabled 不起作用（阻止 iPad 屏幕进入睡眠状态）

> ID：12510130
> 
> 赞同：0
> 
> 时间：2012-09-20T09:52:04.477
> 
> 标签：objective-c, ios, ipad

我必须在 iPad 上下载一个非常大的文件。（iOS5、iOS6）

为了防止 iPad 屏幕进入睡眠状态，我使用：

```
[UIApplication sharedApplication].idleTimerDisabled = YES; 
```

但它不起作用。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T09:58:23.390

尝试做：

```
[UIApplication sharedApplication].idleTimerDisabled = NO;
[UIApplication sharedApplication].idleTimerDisabled = YES; 
```

[有关更多信息，请参阅此答案。](https://stackoverflow.com/questions/1058717/idletimerdisabled-not-working-since-iphone-3-0)

# sql - SQL 在表中显示重复值

> ID：12510131
> 
> 赞同：1
> 
> 时间：2012-09-20T09:52:10.953
> 
> 标签：sql, sql-server, sql-server-2008

我需要获取一个查询，该查询将显示具有相同银行详细信息的人员的详细信息，这些信息已被错误捕获。

然后，我需要显示这些人的正确详细信息和错误详细信息。例如：

```
1stName 1stAccNo 1stItemSold 2ndName 2ndAccNo 2ndItemSold
阿尔伯特 2231432 项目 1 约翰 2231432 项目 3
罗伯特 6321009 项目 11 彼得 6321009 项目 3

```

Name 和 AccNo 在一个表上，而 ItemSold 在另一个表上。

我有以下查询：

```
select p1.Name As 1stName, p1.AccNo AS 1stAccNo, I.ItemSold AS 1stItemSold, p2.Name AS 2ndName, p2.AccNo AS 2ndAccNo, I.ItemSold As 2ndItemSold
FROM Persons p1 JOIN Persons p2 ON p1.AccNo = p2.AccNo 
INNER JOIN Items I on p.ItemID = I.ItemID 
```

问题是 2nd ItemSold 不正确，因为它与 1stItemSold 相同。我该怎么做才能更改我的查询，以便获得正确的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:10:32.493

您应该将 Items 作为第二个表加入。此外，如果您需要不同的人，则必须包括`where p1.id<>p2.id`其中 ID 是 PERSONS 表中的主键

```
select 
p1.Name As 1stName, p1.AccNo AS 1stAccNo, I1.ItemSold AS 1stItemSold, 
p2.Name AS 2ndName, p2.AccNo AS 2ndAccNo, I2.ItemSold As 2ndItemSold
FROM Persons p1 JOIN Persons p2 ON p1.AccNo = p2.AccNo 
INNER JOIN Items I1 on p1.ItemID = I1.ItemID
INNER JOIN Items I2 on p2.ItemID = I2.ItemID
where p1.id<>p2.id 
```

PS：根据评论。返回最后一个 ItemSold 以避免重复：

```
select 
p1.Name As 1stName, p1.AccNo AS 1stAccNo, I1.ItemSold AS 1stItemSold, 
p2.Name AS 2ndName, p2.AccNo AS 2ndAccNo, I2.ItemSold As 2ndItemSold
FROM Persons p1 JOIN Persons p2 ON p1.AccNo = p2.AccNo 
left JOIN 
   (select ItemID,ItemSold, 
           row_number() over (PARTITION BY ItemID order by DATE_SOLD DESC) as rn 
    from Items) I1 
         on (p1.ItemID = I1.ItemID) and (rn=1)
left JOIN 
   (select ItemID,ItemSold, 
           row_number() over (PARTITION BY ItemID order by DATE_SOLD DESC) as rn 
    from Items) I2 
         on (p2.ItemID = I2.ItemID) and (rn=1)

where p1.id<>p2.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:57:59.583

我可能会误解您的要求，但听起来您可以使用该[`UNPIVOT/PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能来获得所需的结果。

如果您知道要转换的列数，那么您可以硬编码它的静态版本。

```
select *
from
(
  select AccNo,
    val,
    col + cast(rn as varchar(10)) Col_Name
  from
  (
    select p1.accno,
      p1.name,
      p1.itemid,
      i1.id,
      i1.i_name,
      row_number() over(partition by accno order by name) rn
    from persons p1
    left join items i1
      on p1.itemid = i1.id
  ) x
  unpivot
  (
    val
    for col in (name, i_name)
  ) u
) x1
pivot
(
  max(val)
  for col_name in ([name1], [i_name1], [name2], [i_name2])
) p 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/77cfe/9)

但听起来您将有未知数量的项目转换为列，因此您可以使用动态 SQL 并创建一个动态版本：

```
DECLARE @colsUnPivot AS NVARCHAR(MAX),
    @colsPivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

SET @colsUnPivot = stuff((select ','+C.name
         from sys.columns as C
         where (C.object_id = object_id('persons') 
                  or C.object_id = object_id('items'))
            and C.name like '%name%'
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name 
                         + cast(p.rn as varchar(10)))
                    from
                    (
                      select row_number() over(partition by accno order by name) rn
                      from persons
                    ) p
                     cross apply 
                      sys.columns as C
                   where (C.object_id = object_id('persons') 
                            or C.object_id = object_id('items'))
                      and C.name like '%name%'
                   group by c.name, p.rn
                   order by p.rn, c.name desc
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
          select AccNo,
            val,
            col + cast(rn as varchar(10)) Col_Name
        from 
        (
          select p1.accno,
            p1.name,
            p1.itemid,
            i1.id,
            i1.i_name,
            row_number() over(partition by accno order by name) rn
          from persons p1
          left join items i1
            on p1.itemid = i1.id
        ) x
        unpivot
        (
          val
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        max(val)
        for col_name in ('+ @colsPivot + ')
      )p'

exec(@query) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/77cfe/28)

# apache - 如何使用 Apache 中的 redirectmap 重定向带有查询字符串的源 URL

> ID：12510132
> 
> 赞同：1
> 
> 时间：2012-09-20T09:52:15.910
> 
> 标签：apache, mod-rewrite

我需要将我的旧站点 URL（以 .aspx/asp 结尾，有几百个）迁移到新站点（以 .jsp/servlets 结尾）。我们选择在 Apache 中使用`RedirectMap`并`RedirectRule`实现此迁移。纯 URLS 工作正常。但是源 URL 中区分大小写会导致重定向到 PAGENOTFOUND（例如，**/magazine/Magazine.aspx?Id=4**正在重定向到`PAGENOTFOUND`而不是**http://mydomain.com/advice/beauty**）。

另一个问题是它无法使用查询字符串重定向源 URL（例如，**/Help/Help.aspx?HelpID=6**正在重定向到`PAGENOTFOUND`而不是**http://mydomain.com/services/essential-info**） .

请在下面找到示例重定向映射文本文件。

```
/100001/Product.aspx    http://mydomain.com/urlredirect/p100003
/100002/Product.aspx    http://mydomain.com/urlredirect/p100005
/Help/Help.aspx?HelpID=6    http://mydomain.com/services/essential-info
/Help/Help.aspx?HelpID=11   http://mydomain.com/services/info-about-delivery-methods
/Magazine/Feature.asp?Id=816    http://mydomain.com/advice/all-about-you.asp
/Magazine/Magazine.aspx?Id=4    http://mydomain.com/advice/beauty
/Advive/all-about-you.asp   http://mydomain.com/advice/beauty-in-you 
```

用 Apache 编写的重定向代码

```
RewriteEngine on
RewriteMap text2id txt:/opt/webserver/apache/conf/redirectmap.txt
RewriteRule ^(.*\.(aspx|asp)) ${text2id:$1} [NC,R=301,L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T14:57:15.520

Jon Lin 的回答帮助我在地图中搜索正确的重定向。我们更新了如下代码。

下面是实现的重定向代码。

```
RewriteEngine on
RewriteMap text2id txt:/opt/webserver/apache/conf/redirectmap.txt
# Base URL Does have a QS 
RewriteCond %{REQUEST_URI} ^(.*\.(aspx|asp).*)
RewriteCond ${text2id:%1?%{QUERY_STRING}} ^(.*\?.*)$
RewriteRule ^.*$ %1 [R=301,L]

# Base URL exists in the map
RewriteCond %{REQUEST_URI} ^(.*\.(aspx|asp).*)
RewriteRule ^.*$ ${text2id:%1|PAGENOTFOUND} [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:27:01.410

您将无法匹配这样的查询字符串。

在你的规则中：

```
RewriteRule ^(.*\.(aspx|asp)) ${text2id:$1} [NC,R=301,L] 
```

唯一发送到重写映射的是 URI 路径，而不是查询字符串。您还需要将查询字符串传递到重写映射中：

```
RewriteRule ^(.*\.(aspx|asp)) ${text2id:$1?%{QUERY_STRING}} [NC,R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-17T21:52:08.763

如果它不适合您，**请在您的 QUERY_STRING 前面尝试双倍百分比**...

作为附加信息，我和我的同事在一天的大部分时间里都在努力匹配重定向映射文件中的 QUERY_STRING。我们在 Windows 上运行 Helicon，所以不确定这是否与我们的解决方案与上述解决方案略有不同有关，但认为它可能会在我们的情况下帮助其他人......

我们的问题是上面的 RewriteRule 没有在我们的环境中正确解析 QUERY_STRING。生成的 URL 带有 URL 编码字符和单词 QUERY_STRING（如 %7bQUERY_STRING%7d）。

对于重写映射查找字符串中对 QUERY_STRING 的任何引用，我们最终不得不双重转义查询字符串环境变量。例如，在我们的 httpd.conf 文件中，上面的答案（顺便感谢您的回答）最终看起来像这样：

```
RewriteRule ^(.*\.(aspx|asp)) ${text2id:$1?%%{QUERY_STRING}} [NC,R=301,L] 
```

请注意，QUERY_STRING 环境变量前面有双百分号 (%%)，而不是单个百分号。这是我们可以让引擎解析嵌套在重写映射查找引用中的查询字符串的唯一方法。这对于我们环境中的**RewriteCond也是如此。**

这可能不适用于所有人，但如果您看到您的重定向 URL 包含类似 %7bQUERY_STRING%7d 的内容，那么您可能想尝试一下。它可以为您节省数小时的痛苦。

最好的，布兰登

# python - 使用 CLI 脚本共享 Pyramid 配置

> ID：12510133
> 
> 赞同：3
> 
> 时间：2012-09-20T09:52:18.603
> 
> 标签：python, pyramid

我有一个独立的 python CLI 脚本（通常我使用 crontab 运行），我想将它集成到我的`Pyramid`应用程序中，以访问`Pyramid`应用程序配置和加载环境。

当我使用 Django 时，可以这样做：

```
from django.core.management import setup_environ
from myapp import settings

setup_environ(settings) 
```

用 Pyramid 做同样的事情的最佳实践是什么？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:25:21.540

Pyramid 提供了`bootstrap`执行此操作的 api。下面附上的文件。

[http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/commandline.html#writing-a-script](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/commandline.html#writing-a-script)

```
from pyramid.paster import bootstrap
env = bootstrap('/path/to/my/development.ini#another') 
```

# php - PHP：将 YYYY-MMM-DD 转换为 YYYY-MM-DD

> ID：12510134
> 
> 赞同：0
> 
> 时间：2012-09-20T09:52:18.667
> 
> 标签：php, string, date, converter

我需要将日期字符串转换为数字：

```
2012-Sep-01 to 2012-09-01 
```

任何想法？问候，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T09:57:51.663

尝试使用 DateTime PHP 类：

```
$date = "2012-Sep-01";
$result = DateTime::createFromFormat("Y-M-d", $date)->format("Y-m-d"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T09:53:58.423

这可能对您有用：

```
echo date("Y-m-d", strtotime($yourCurrentDateVat))' 
```

PHP 网站目前已关闭，但[这里有一些](http://www.w3schools.com/php/php_date.asp)关于日期功能的额外信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T09:54:09.230

使用`strtotime()`：

```
echo date('Y-m-d', strtotime('2012-Sep-01')); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-20T09:56:50.633

```
$date = DateTime::createFromFormat('Y-M-j', '2012-Sep-01');
echo $date->format('Y-m-d'); 
```

实际上是从手册中偷来的：http: [//us.php.net/manual/en/datetime.createfromformat.php](http://us.php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T09:54:49.190

你应该使用`strtotime()`. 更多信息在[这里](http://php.net/manual/en/function.strtotime.php)。然后`date()`创建一个新字符串。更多信息在[这里](http://php.net/manual/en/function.date.php)。

```
$date = '2012-Sep-01'; //Sets your date string
$time_epoch = strtotime($date); //Converts the string into an epoch time
$new_date = date('Y-m-d', $time_epoch); //Creates a new string 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-20T09:55:05.097

```
$timestamp = strtotime('22-09-2008');
$new_date = date("y-m-d", $timestamp); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-10T10:54:48.087

嗨，尝试在 PHP 中使用它，你肯定会得到你想要的，我正在寻找相同的但没有找到但后来发现我在某处使用了日期时间公式并对其进行了修改以获得它。

`$getdatetime=date_create('2020-May-21'); $dateconverted=date_format($getdatetime,'Y-m-d'); echo $dateconverted;`

# mysql - SQL 查询优化 - 耗时太长

> ID：12510141
> 
> 赞同：0
> 
> 时间：2012-09-20T09:52:54.900
> 
> 标签：mysql, sql, query-optimization

想知道是否有人可以帮助我更好地优化这个查询，因为它需要大约 4 秒来执行。

```
SELECT discount.*, retailer.name AS retailer_name, 
sub_category.type AS subcategory_type 
FROM discount 
  JOIN retailer ON retailer.id = discount.retailer 
  JOIN sub_category ON sub_category.id = discount.sub_category 
WHERE discount.start_date <= 1348133607 
AND retailer.closed = 0  
AND ( discount.only_for = 'PROC' OR discount.only_for = '' ) 
ORDER BY discount.updated_on DESC LIMIT 25 
```

我有以下索引：

*   折扣零售商
*   折扣.sub_category
*   折扣.start_date
*   零售商关闭
*   discount.only_for

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:03:11.667

你应该有三个索引：

```
CREATE INDEX discount_ndx ON discount (only_for, start_date, retailer, sub_category);
CREATE INDEX retailer_ndx ON retailer (id, closed, name);
CREATE INDEX sub_category_ndx ON sub_category(id, type); 
```

第一个索引允许`WHERE`基于`only_for`和的立即匹配`date`（您可以尝试反转索引中的这两个键；这取决于数据分布。我需要输出`EXPLAIN`来决定）。该`retailer`值允许在完全`JOIN`无需检索`discount`数据的情况下完成。

从表中，`retailer`您只需要`id`（直接连接）和`closed`; `WHERE`并且也可能值得存储`name`在索引中。最后，该`subcategory`表仅提供`type`，因此在其上设置索引是有意义的，*除非* `subcategory`是一个非常薄的表，其中仅包含`id`和`type`。

让我知道它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:33:40.340

有一次我遇到了问题。我有一个像这样的查询`select * from ViewName v where v.column1 = 'ABCD'`

“ABCD”是一个字符。在解释计划中，我看到 Oracle 将 FAST FULL SCAN INDEX 放在我的脚本上，这是一个糟糕的索引（它的成本是 105）。

然后，我编写了一个返回相同值的函数，并替换为`select * from ViewName v where v.column1 = FUNCTIONX`

有趣的是，我看到 Oracle 使用了 FULL SCAN INDEX（成本为 32）并且我的执行时间显着提高。

我不擅长优化，但我认为这可能会有所帮助

# wpf - 确定需要什么应用程序程序集

> ID：12510146
> 
> 赞同：2
> 
> 时间：2012-09-20T09:53:07.410
> 
> 标签：wpf, vb.net, reference, .net-assembly

有2个项目。两者都是 WPF 应用程序。 ![应用程序错误](../Images/652dfd365534fb55ddd7be01607653c5.png)

**应用1**：只提供与外部**硬件**的互通。为此，Application 根类中有一些公共共享类：

```
Public Shared Log As New clsLog
Public Shared NavigationObjectContainer As New Dictionary(Of String, Object) 
```

第二**个项目**主要是**GUI**，也在Application根类中使用了一些公共共享类：

```
Public Shared Nav As New clsNavigationHelper 
```

现在，第二个项目（GUI）引用了项目 1（硬件）并显示以下错误：

> Der Typeninitialisierer für "TB_HyperTerminal.Application" hat eine Ausnahme verursacht。它是德语，但这意味着 1 类（硬件）中的应用程序对象无法找到所有共享类（如 clsLog 和 NavigationObjectContainer）。

内部异常

> {"Das Objekt des Typs "FSCANT3.Application" kann nicht in Typ "TB_HyperTerminal.Application" umgewandelt werden."}

我的问题是如何解决这个问题以获得每个项目的正确程序**集**和正确的**应用程序**对象。

在寻找原因时，我已将项目 2（硬件）的类重命名为 TBHApplication，而项目 1 仍称为 Application。不，我们可以看到为什么无法进行投射： ![应用程序铸造](../Images/d2b70bfd9e8bd69908b1b31889bdf798.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:15:05.307

是否有任何应用程序 1 的依赖程序集您没有复制到第二个项目的输出目录？

在下面的评论中讨论后更新。

据我了解您的问题，您希望 app1 能够使用 app2 中的方法。为此，您需要在 2 个应用程序之间建立一个通用接口。创建第三个项目（类型为“类库”），其中包含一个接口，该接口定义了应用程序 1 所需并由应用程序 2 实现的所有方法。app1 和 app2 都将引用这个新的 DLL。您可以在您的 app2 应用程序对象中实现此接口，然后 app1 可以将当前应用程序对象转换为此接口类型并调用方法。但是，我不确定我是否了解 app1 如何在独立模式下工作（这需要吗？如果不需要，app1 也不应该是类库吗？）。

请注意，使用应用程序类进行这种通信有点特殊。通常的方法是使用 IoC 容器或只是 app1 中的一个属性，其中 app2 可以设置接口的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:11:06.373

```
Dim AppInfo As Global.Microsoft.VisualBasic.ApplicationServices.AssemblyInfo = GetApplicationInfo()

    Private Function GetApplicationInfo() As Global.Microsoft.VisualBasic.ApplicationServices.AssemblyInfo
        Dim ret As Global.Microsoft.VisualBasic.ApplicationServices.AssemblyInfo = Nothing
        Try
            Dim asm As System.Reflection.Assembly = System.Reflection.Assembly.GetEntryAssembly
            ret = New Global.Microsoft.VisualBasic.ApplicationServices.AssemblyInfo(Global.System.Reflection.Assembly.GetExecutingAssembly())
        Catch ex As Exception
        End Try
        Return ret
    End Function

 Private Function GetApplication() As Global.System.Windows.Application
        Dim ret As Global.System.Windows.Application = Nothing
        Try
            ret = CType(Global.System.Windows.Application.Current, Global.System.Windows.Application)
        Catch ex As Exception
        End Try
        Return ret
    End Function 
```

# asp.net - asp.net UpdatePanel 不更新

> ID：12510148
> 
> 赞同：0
> 
> 时间：2012-09-20T09:53:17.780
> 
> 标签：asp.net, updatepanel

我有一个 asp.net 网站，其中包含一个从 WCF 服务获取一些数据的线程。该线程在无限循环中运行，每次运行等待 1 秒。现在我想在一个标签中显示它从 WCF 服务获得的东西。我将该标签添加到 UpdatePanel 并调用 .Update() 方法。我没有得到任何例外，但是，标签根本没有更新。这是我的代码（简化）：

```
t = new Thread(new ThreadStart(() =>
{
   while (true)
   {
      Label1.Text = GetFromWCF() + " " + DateTime.Now.ToString();
      updatePanel.Update();
      Thread.Sleep(1000);
   }
}
));

t.IsBackground = true;
t.Start(); 
```

此代码在页面的 OnInit 方法中。更新面板如下所示：

```
<asp:ScriptManager runat="server" ID="scriptManager" EnablePartialRendering="true"/>
<asp:UpdatePanel runat="server" ID="updatePanel" UpdateMode="Conditional">
   <ContentTemplate>
      <asp:Label ID="Label1" runat="server" />
   </ContentTemplate>
</asp:UpdatePanel> 
```

我错过了什么吗？也许我还应该告诉你，我对 asp.net 很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T14:47:09.320

晚了一点，但您可以通过在 UpdatePanel 中实现一个 Timer 对象来解决此问题，然后使用计时器“OnTick”事件来更新标签。然后，您可以通过将所需的值输出到全局变量和/或使用静态实现来重新设计您的 Thread 函数。

```
<asp:UpdatePanel ID="MyPanel" UpdateMode="Conditional" runat="server">
    <ContentTemplate>
    <asp:Timer ID="MyTimer" OnTick="timer_tick" Interval="1000" runat="server" />
    <asp:Label ID="UpdateTextBox" Text="start" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel>

protected void timer_tick(object sender, EventArgs e)
{
    UpdateTextBox.Text = Convert.ToString(myThreadClass.counter);
    MyPanel.Update();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T10:04:12.417

您还没有完全理解 Ajax 和 UpdatePanel 的工作方式。

实际上，UpdatePanel，从客户端，通过发布请求从服务器请求数据，然后等待获取它们，在获取数据之后更新客户端。浏览器必须发出请求以获取数据 - 服务器不能向浏览器发送任何数据，而无需首先浏览器请求它们。

该命令`updatePanel.Update();`的含义是在发布后的代码上通知 UpdatePanel 有更新 - 并且不像您想象的那样工作，并不是因为您调用它而将数据发送到 UpdatePanel。

即使您在发布后进行这样的关闭循环，UpdatePanel 也会等待连接完全完成并关闭以显示数据，因此这样的线程中的循环无法建立连接以发送数据。

为了让你的想法奏效，以太在客户端创建一个计时器，每隔一段时间询问一次数据，以太的彗星技术：[Reverse AJAX with IIS/ASP.NET](https://stackoverflow.com/questions/4555462/reverse-ajax-with-iis-asp-net)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T10:04:18.427

尝试使用触发器。

```
<asp:UpdatePanel runat="server" ID="update" UpdateMode="Conditional">
     <ContentTemplate>
         <asp:Label runat="server" ID="uiTime" />
         <asp:Button runat="server" ID="uiInternalButton" Text="Click" />
     </ContentTemplate>
     <Triggers>
         <asp:AsyncPostBackTrigger ControlID="uiAsynch" EventName="click" />
         <asp:PostBackTrigger ControlID="uiInternalButton" />
     </Triggers>
</asp:UpdatePanel>
<asp:Button runat="server" ID="uiPostback" Text="Click" /> 
```

# sql-server - 使用 Visual Studio 2010 部署 ssis 2012

> ID：12510152
> 
> 赞同：2
> 
> 时间：2012-09-20T09:53:36.470
> 
> 标签：sql-server, ssis, etl

我在 Visual Studio 2010 中创建了一个新的 SSIS 包，并开始将该包部署到远程服务器上的 SQL 2012 数据库。

我可以连接到数据库并查看 SSISDB 文件夹，但是当我部署包时出现以下错误：

“找不到‘ISServerExec.exe’的路径。操作现在将退出。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:56:41.400

你确定你在那台机器上安装了 SSIS 2012 吗？并且服务正在运行？（检查 SQL Server 配置管理器）

这看起来就像您在没有运行 SSIS 服务的 SQL Server 计算机上创建了一个 SSIS 目录（或者 SQL 无法看到正在运行的 SSIS 的正确版本）。您将能够看到目录，甚至可以通过 Visual Studio 完成部署向导，但在完成部署时会收到上述错误消息。

# android - 如何在 Android 中更改键盘？

> ID：12510154
> 
> 赞同：1
> 
> 时间：2012-09-20T09:53:36.203
> 
> 标签：android, android-layout, keyboard

我正在考虑开发一个可以替换现有键盘的 Android 键盘。作为一个例子，我可能会设计一个圆形键盘，考虑人机工程学因素和语言中的字母用法。

我的问题是，

1.  如果手机没有root，是否可以更换键盘？
2.  如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:55:34.023

您可以安装几个应用程序，这些应用程序将用作替代键盘，如果您随后进入键盘设置，您可以将默认键盘更改为您喜欢的任何键盘。

我使用智能键盘专业版，但试用版也非常好。

# sql - OpenQuery 使用“IN”子句引发错误

> ID：12510156
> 
> 赞同：1
> 
> 时间：2012-09-20T09:53:50.667
> 
> 标签：sql, ldap

我无法使用 IN 子句执行打开的查询，相同的查询是使用 equal(=) 运算符执行的。以下是我的查询-

```
DECLARE @SapNO as nvarchar(1000)
SET @SapNO = '''''00116795'''''     
DECLARE @str nvarchar(1000)

SET @str = 'SELECT top 100 Name,employeeid FROM OPENQUERY(ADSI,
''select Name,employeeid  FROM ''''LDAP://ABC.com'''' 
WHERE objectCategory = ''''Person'''' 
AND objectClass = ''''user''''   
AND  employeeid in (' + @SapNO + ')   
'')'

exec sp_executesql @str 
```

上面的查询抛出错误消息-

> 准备查询“select Name,employeeid FROM 'LDAP://ABC.com' WHERE objectCategory = 'Person' AND objectClass = 'user' AND employeeid in ('00116795')”以针对 OLE DB 提供程序执行时出错链接服务器“ADSI”的 ADsDSOObject”。

如果我`IN`用相等运算符替换子句，它工作正常。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:01:58.133

LDAP 不支持`IN`.

[http://msdn.microsoft.com/en-us/library/aa746494(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa746494(VS.85).aspx)

# java - 需要帮助：如何处理“清除数据”

> ID：12510162
> 
> 赞同：-2
> 
> 时间：2012-09-20T09:54:06.483
> 
> 标签：java, android

我构建应用程序 android....当用户在管理应用程序中单击“清除数据”时我想备份我的数据库...因为数据丢失...某些数据对于我的应用程序中的进程非常重要...如何我能解决这个吗？？？请帮我 .....

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:59:56.013

> 当用户单击“清除数据”时，我想备份我的数据库

您无法覆盖用户删除数据的愿望。也许他只是不使用您的应用程序并且需要空间。

当您的应用程序在此之后启动时，它的行为就像刚从市场上刚安装的一样。这就是它的意图，你不应该试图解决这个问题。

# jquery - 从 jquery 弹出窗口中读取文本框值

> ID：12510165
> 
> 赞同：0
> 
> 时间：2012-09-20T09:54:14.603
> 
> 标签：jquery, jquery-ui

我正在尝试在我的页面中构建一个弹出框，询问用户名并提醒该用户.. 这是我的 html 代码..

```
<a class="pop-up-link" href="#" title="View Pop Up" onClick="popUp()">Click Here</a>

    <div class='popup'> <a href='#' title="Close" class='close'><img src='close.png' alt='close' height="20" width="20" /></a>
        <div class="pop-heading">
            <h3>Pop Up</h3>
        </div>
        <div class="pop-info">
        </div>
    </div> 
```

然后我有像

```
function popUp()
{
    var htmlString = "";
    var height = $(document).height();
    var width = $(document).width();
    var spanHeight = $('.popup').height();
    var spanWidth = 500;

    $('.pop-up-link').click(function() { 
        $(this).next()
            .css({ "top" :  height/2 - spanHeight/2 })
            .css({ "left" : width/2 - spanWidth/2 })
            .fadeIn(100);
    });

    $(".close").click(function () {
        $('.pop-up-link').next().fadeOut(100);
    });

    htmlString+='<input type="text" id="User" name="User"/>';
    htmlString+='<input type="button" value="Login" onclick="userLogin()">';
    $(".pop-info").html(htmlString);
}

function userLogin()
{
 alert($('#User').val());
} 
```

但是警报框没有任何价值。然后我试图输入一些值（以检查它的工作），比如`$('#User').val('hello');`在 userLogin 函数中。但它也不起作用。我认为该输入字段不可访问。任何人都可以描述我如何获取该`User`文本框中的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:08:33.567

# .net - 如何从包含程序集的字节数组中获取程序集名称？

> ID：12510169
> 
> 赞同：4
> 
> 时间：2012-09-20T09:54:24.037
> 
> 标签：.net

我收到包含汇编数据的字节数组。我如何从这些数据中获取程序集名称而不在 appdomain 中加载程序集？

```
var assemblyName = GetAssemblyName(byte[] asmData);//doesn't load assembly to appDomain. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T10:38:07.563

要获取程序集名称而不将其加载到当前应用程序域中，请创建一个新的 AppDomain，使用[AppDomain.Load](http://msdn.microsoft.com/en-us/library/7hcs6az6.aspx)然后调用 FullName 属性。例如：

```
byte[] asmData;  // Contains the assembly data

AppDomain appDomain = AppDomain.CreateDomain("MyDomain");
Assembly assembly = appDomain.Load(asmData);
string name = assembly.FullName;
AppDomain.Unload(appDomain); 
```

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms173101%28v=vs.110%29.aspx)，假设没有其他域已加载该程序集，则应将其卸载而不加载到当前应用程序域中。

如果您不想将其加载到任何应用程序域，请将字节保存到文件并使用[AssemblyName.GetAssemblyName](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyname.getassemblyname.aspx)方法。

# c# - 在设定的时间启动 Windows 服务

> ID：12510180
> 
> 赞同：0
> 
> 时间：2012-09-20T09:55:03.287
> 
> 标签：c#, visual-studio-2010

我最近从 vb.net 迁移到 C#，但在启动我创建的 Windows 服务时遇到问题。我希望每天从我的 app.config 文件中读取该服务。在 vb.net 中，我使用了一个 Timer 并调用了一个方法：

```
Private WithEvents Alarm As Timer = New Timer(30000)
Public Sub OnTimedEvent(ByVal source As Object, ByVal e As ElapsedEventArgs) Handles Alarm.Elapsed 
```

这是我到目前为止的 C# 代码：

```
namespace MyWindowsService
{
class Program : ServiceBase
{
  Timer alarm = new Timer(30000);
  public string str_dbserver;
  public string str_year;
  public string str_time;
  public string str_dbConnection;
  bool service_running;

static void Main(string[] args)
{
    ServiceBase.Run(new Program());
}

public Program()
{
  this.ServiceName = "MyWindowsService";
}

public void OnTimedEvent(object source, ElapsedEventArgs e)
{      
    service_running = false;

    //declare variables and get info from config file
    DateTime dtNow;
    dtNow = DateTime.Now;
    System.Configuration.AppSettingsReader configurationAppSettings = new System.Configuration.AppSettingsReader();
    str_dbserver = Convert.ToString(configurationAppSettings.GetValue("dbServer", typeof(System.String)));
    str_year = Convert.ToString(configurationAppSettings.GetValue("sYear", typeof(System.String)));
    str_time = Convert.ToString(configurationAppSettings.GetValue("stime", typeof(System.String)));

    //split time from config to get hour, minute, second
    string[] str_atime = str_time.Split(new string[] { ":" }, StringSplitOptions.None);

    //check that service is not currently running and time matches config file
    if (DateTime.Now.Hour == Convert.ToInt32(str_atime[0]) && DateTime.Now.Minute == Convert.ToInt32(str_atime[1]) && service_running == false)
    {
        //service now running so write to log and send email notification
        service_running = true;

        try
        {
            //call functions containing service code here
            Function1();
            Function2();
        }
        catch (Exception ex)
        {

        } //end try/catch

        //service now finished, sleep for 60 seconds
        service_running = false;
    } //end if 
} //end OnTimedEvent 
```

我需要我的代码每 30 秒调用一次 OnTimedEvent 以检查配置文件中的时间，然后运行我的代码。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:17:53.353

转储计时器，启动线程，使用 Sleep(30000) 循环。

编辑：更好的是，获取 RTC 值并计算直到下一次运行时间还剩多少毫秒。该间隔除以 2 和 Sleep()。继续这样做，直到间隔小于 100 毫秒，然后再运行函数 Sleep() 1000，（以确保现在的 RTC 时间晚于从读取的 RTC 时间配置文件），然后循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:20:52.380

你为什么要轮询时间？尽管每 30 秒轮询一次，但在严重的负载/线程池不足的情况下，定时器有可能（尽管极不可能）不会在所需的分钟槽内触发。

为什么不弄清楚 TimeSpan 直到到期时间并将计时器设置为在那个时候触发？

目前尚不清楚您使用的是哪个计时器，但我不会将 System.Threading.Timer 以外的任何东西用于 Windows 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:44:13.917

感谢“Oded”和“Martin James”为我指明了正确的方向。我的解决方案中缺少的是这个。我必须将以下代码添加到构造函数类中，以便它能够识别计时器已过：

```
//call onTimedEvent when timer reaches 60 seconds
alarm.Elapsed += new ElapsedEventHandler(OnTimedEvent);
// Set the Interval to 60 second.
alarm.Interval = 60000; 
```

然后我使用以下内容导入 kernel32 dll：

```
using System.Runtime.InteropServices;

//import kernel32 so application can use sleep method
  [DllImport("kernel32.dll")]
  static extern void Sleep(uint dwMilliseconds); 
```

通过导入这个 dll，我可以在我的代码完成执行后使用 Sleep(60000)。感谢大家的帮助

# php - 表格不在内容页面 Wordpress 中的 div 中

> ID：12510183
> 
> 赞同：1
> 
> 时间：2012-09-20T09:55:08.470
> 
> 标签：php, html, css, wordpress, blogs

我在主页上有一个，我调用了一个包含表格的内容页面，当我在另一个使用单独模板的内容页面中`div`做完全相同的事情时，它可以完美地工作并重新调整大小并整齐地适合它`div`不起作用。

如果我给你看，它最简单.. 主页，左下角写着“当前排名”limerrickfc.hailstormcommerce.com/cms

现在的页面，[http](http://limerickfc.hailstormcommerce.com/cms/?page_id=110) ://limerickfc.hailstormcommerce.com/cms/?page_id=110 如果您在当前排名中向左看，表格显然远远超出了 div。我不认为它是完美的，因为它们是不同宽度的 div，但我什至尝试使用宽度并使其与主页相同，但它仍然不起作用。

这里是否有一些我需要摆脱的规则？

另外，这里是调用内容的代码

```
$post_id = 989;
$queried_post = get_post($post_id);
$title = $queried_post->post_title;
echo $title;
echo apply_filters('the_content',$queried_post->post_content);
?> 
```

我也尝试`display:table`过 div 但没有运气。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:06:01.950

编辑 style.css 并执行以下操作：

第 133 行 - 删除`width: 20px;`

第 109 行 - 删除`padding: 2px 5px;`

第 1627 行 - 删除`text-indent: 15px;`

仅针对左侧边栏修复此问题，以免影响其他表格。

# tridion - 无法加载文件或程序集“Tridion.ContentDelivery.WebControls”

> ID：12510184
> 
> 赞同：1
> 
> 时间：2012-09-20T09:55:08.877
> 
> 标签：tridion, tridion-2011

我们从 Tridion 5.3 升级到了 Tridion 2011 SP1。在升级的 Content Delivery Server 上，我们复制了现有的网站文件夹（来自现有的 Tridion 5.3）。当我们尝试点击 Login.aspx 页面时，我们收到错误“名称空间 'Tridion.ContentDelivery' 中不存在类型或名称空间名称 'Broker'。为了解决这个问题，我们更改了从 'Tridion.ContentDelivery.Broker' 的导入”到'Tridion.ContentDelivery.Meta'，这解决了问题。现在我们收到新的错误消息“无法加载文件或程序集'Tridion.ContentDelivery.WebControls'或其依赖项之一”。可以做些什么来解决这个问题.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T10:36:59.183

一些 .NET CD API 类在 Tridion 2009 中移动了命名空间，现在只有一个核心 Content Delivery .NET DLL：Tridion.ContentDelivery.dll。

这意味着在升级时，您需要重构您的 Web 应用程序代码（正如您正在使用的那样`Tridion.ContentDelivery.Meta`）并进行相应的配置。此错误很可能来自在 web.config 中注册的 Web 控件。查找 CD Web 控件的注册位置，这对于 2009+ 应为：

```
<controls>
    <add tagPrefix="tridion" namespace="Tridion.ContentDelivery.Web.UI"
           assembly="Tridion.ContentDelivery" />
</controls> 
```

# java - 向 NOT NULL 表添加空值，org.hibernate.exception.ConstraintViolationException

> ID：12510186
> 
> 赞同：0
> 
> 时间：2012-09-20T09:55:19.000
> 
> 标签：java, hibernate

使用**休眠**进行数据访问。

我在数据库中有一个列：

```
varchar(40), default value is set to 0, NOT NULL 
```

我有一个案例，该用户发送空值，并收到错误：

```
Error: org.hibernate.exception.ConstraintViolationException: Cannot insert the value
    NULL into column 'foo', table 'MyTable'; column does not allow nulls. INSERT fails. 
```

hibernate 中的列定义如下：

```
@Column(name = "foo")
private String foo; 
```

问题可能出在哪里？我必须在休眠注释或smthing中定义默认值吗？如何？还是有其他建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:03:37.587

尝试插入列时，您期望会发生`NULL`什么`NOT NULL`？要么你想强制执行一个`NOT NULL`约束，然后你需要拒绝用户输入，要么你想接受`NULL`值并且需要指定该列可以为空，当然，`@Column(nullable = true)`.

* * *

因为当用户不提供该字段时，您实际上需要列中的默认值，并且您的代码明确设置字段值，即使它为空（或空，例如，对于 Oracle 也是如此），我建议场上更聪明的二传手：

```
private String foo = "0";

public String getFoo() {
    return foo;
}

public void setFoo(String foo) {
    if (foo != null && !foo.isEmpty()) { // Or StringUtils.isNotBlank(foo)
        this.foo = foo;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:05:30.673

的默认值为`foo`null，因为它是类字段。

因为您要保存的默认值为 0。`foo`如果可能，请制作原始类型，即`int`. **如果`foo`必须是字符串，那么您可以删除非空约束，因为即使您不为 赋值`foo`，也有默认值 0。**

建议：考虑使用 Hibernate-Tools 自动生成 POJO 类。这将从现有数据库自动生成您的 POJO 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:06:48.363

If you table do not allow null value you sould respect that and adopt your model.

As you are using @Column annotation you should first set the property nullable to false, to support the default value you should also use the column definition.

```
@Column(name = "foo", nullable = false, columnDefinition = “varchar(40) default 0″) 
```

# javascript - CSS-mediaqueries.js 不会触发

> ID：12510189
> 
> 赞同：0
> 
> 时间：2012-09-20T09:55:40.837
> 
> 标签：javascript, internet-explorer-8, cross-browser, responsive-design, media-queries

我们正在使用 css3-mediaqueries.js ( [http://code.google.com/p/css3-mediaqueries-js/](http://code.google.com/p/css3-mediaqueries-js/) ) 使这个响应式网站 ( [http://webdesigndordrecht.elephantlabs.nl/](http://webdesigndordrecht.elephantlabs.nl/) ) 在 IE8 和降低。但是，它似乎不起作用。

该文件已正确链接并触发（我们在库中实现了一个警报以进行检查），但是在调整 IE8 及更低版本的大小时，它不会触发。我们使用完全相同的文件，就像我们为我们制作的其他一些响应式网站所做的那样......

还检查了 HTML 和 CSS 验证，由于某些供应商标签，CSS 无法验证，但我无法想象这是问题所在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:49:13.850

找到了——这个也可能对从事此工作的人派上用场：

CSS3-mediaqueries.js**仅适用于直接包含的 CSS 链接**——我们在导入的样式表中进行了媒体查询（通过 @import）。

# php - 通过带有扩展令牌的 php (fb sdk) 以管理员身份发布到我的 facebook 页面（粉丝网站）

> ID：12510192
> 
> 赞同：2
> 
> 时间：2012-09-20T09:55:44.923
> 
> 标签：php, facebook, access-token

**完成以下任务的最简单方法是什么？**

我有一个网站，用户可以在其中上传某种帖子。我需要一个新功能：当有人发布帖子时，即使我处于离线状态，它也会作为来自页面管理员的 facebook 帖子出现在我网站的粉丝页面中（也就是页面名称）。要创建这个新功能，我想使用 FB PHP SDK 3.x 和长期令牌。

我发现的所有解决方案都已过时（使用 offline_access 权限），使用没有 FB SDK 的 curl 并且不包含如何以编程方式扩展短期访问令牌的答案，或将帖子发布到其他人的墙上等。

# c - 如何在此 malloc 包装器上遵循 TDD 测试失败？

> ID：12510195
> 
> 赞同：2
> 
> 时间：2012-09-20T09:56:18.487
> 
> 标签：c, testing, tdd, malloc

我正在试验 TDD 和 C。我想按照 TDD 方法编写一个简单的 malloc 包装器。我正在尝试遵循 Bob Martin 的 TDD 三大定律

1.  不要编写生产代码，除非它是为了使失败的单元测试通过。
2.  不要编写超过足以导致失败的单元测试，构建失败就是失败。
3.  不要编写超过足以通过一个失败的单元测试的生产代码。

到目前为止，这是我的代码：

```
 J_STATUS MemAlloc(long Size, void **OutPtr) {
        J_STATUS ReturnStatus;
        void *Ptr;

        Ptr = NULL;

        if (Size >= 0) {
            Ptr = malloc(Size);
            *OutPtr = Ptr;
            ReturnStatus = SUCCESS;
            //TODO controllare malloc error
        } else {
            ReturnStatus = ERROR;
        }
        return ReturnStatus;
    } 
```

这些是我的测试（我正在使用 Unity 测试框架）：

```
 #include "../unity/unity.h"
    #include "../src/jMem.h"
    #include "stdlib.h"

    static int *ptr;
    static J_STATUS Result;
    static long Size;
    static long Count;

    void setUp() {
        ptr = NULL;
        Size = 10;
        Count = 5;
    }

    void tearDown() {
        if (ptr != NULL) {
            free(ptr);
        }
    }

    void test_MemAllocShouldAllocateMemoryAndReturnSuccess(void) {
        Result = MemAlloc(Size, (void **) &ptr);
        TEST_ASSERT_EQUAL(SUCCESS, Result);
        TEST_ASSERT_NOT_NULL(ptr);

    }

    void test_MemAllocShouldReturnErrorIfSizeIsNegative(void) {
        Size = -4;

        Result = MemAlloc(Size, (void **) &ptr);

        TEST_ASSERT_EQUAL(ERROR, Result);
    } 
```

现在如何为失败的 malloc 编写测试？我知道我可以链接不同版本的 malloc，或者我可以编写一个宏来使 malloc 失败，但这应该只适用于这个测试，而在另一个我想使用真正的 malloc。

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T00:53:41.053

也许这是您不需要测试的边缘情况。只写代码。:-)

另一方面，由于我们都喜欢练习良好的 TDD，另一种选择是将您的 malloc 调用提升为函数参数。作为函数指针，您可以传递`malloc`一个测试中的正则地址和`malloc_that_errors`错误测试用例中的地址。

请注意，它弄脏了包装器的界面，我个人不喜欢。它打破了你想要的抽象，我不想`malloc`到处传递。鉴于此，我会回去不测试它。:-D

希望有帮助！

布兰登

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T02:35:27.583

作为替代`malloc()`，您可以使用如下函数指针：

```
void* (*pMalloc)(size_t size) 
```

然后你使用`pMalloc(some size)`而不是`malloc(some size)`.

如果您将指针设置为指向`malloc()`，如在 中`pMalloc = &malloc;`，您将使用真正的`malloc()`. 如果您将其设置为指向您自己的功能，您将使用您的该功能。

在您的函数中，您可以通过返回来模拟`malloc()`失败`NULL`。`malloc()`如果测试需要，您也可以从中调用。

同样，您可以替换自己的`free()`.

在这些替代函数中，您可以记录正在发生的事情。

例如，如果你传递`LONG_MAX`给你的包装函数（我假设它仍然将大小作为`long`参数），你的假货`malloc()`可以记录它实际收到的大小。在测试中，您可以注意到`LONG_MAX`已经从包装器传播到`malloc()`as `(size_t)LONG_MAX`，并且如果`size_t`比`long`（就位数而言）短，您可以通过比较值 ( `LONG_MAX != (size_t)LONG_MAX`) 来检测差异。

您还可以记录您的假`malloc()`返回的指针值（从自身内部）并将其与包装器返回的值进行比较，看看它们是否不同。

您可以进一步阐述这个想法以提出更多测试（例如，包装器返回一个非 NULL 值，但`malloc()`根本不调用假的（因此真正的））。

在执行所有这些操作时，您不必登录到文件或`stdout`. 您可以为此目的专用一个数据结构，然后对其进行检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:11:45.227

`long`您的 malloc 包装器在使用而不是`size_t`size 参数时不是很有说服力。

您应该能够通过分配非常大量的内存来使其失败，使用`size_t`并找到最大值。大多数 real `malloc()`s 不会成功分配它，因此它们会失败。

当然，这仍然是让它失败的一种相当虚假的方法，我想唯一合适的方法是提供钩子，以便您可以替换不同的`malloc()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-07T06:08:13.247

老问题，但我觉得，根据您的编译器，缺少一个答案。GNU LD 有一个`--wrap symbol`选项可以让您在链接时覆盖某些功能。

```
void *
__wrap_malloc (int c)
{
  printf ("malloc called with %ld\n", c);
  return __real_malloc (c);
} 
```

与此代码一样，每次调用`malloc`都将替换为调用`__wrap_malloc`，如果您想调用真正的 malloc，它可以通过`__real_malloc`.

我不知道其他链接器也可能提供此功能，但对于 GCC，这是一个不错的选择。

# javascript - 未捕获的类型错误：无法读取 null 的属性“tagName”

> ID：12510198
> 
> 赞同：5
> 
> 时间：2012-09-20T09:56:35.560
> 
> 标签：javascript, android

在过去的几个月里，我们一直在我们的网络应用程序中看到这个错误：

```
Uncaught TypeError: Cannot read property 'tagName' of null 
```

首先我注意到它只发生在 4.0.X 的安卓手机上，没有其他操作系统或版本。

为了调试它，我首先删除了代码和标记，试图找出罪魁祸首。
我这样做直到我完全清空了所有文件并且问题仍然存在。

唯一的线索是之前的控制台行：

```
Reader :: Recognize :: INFO - Script is evaluating. recognizeArticle Start 
```

有没有人知道为什么会这样？
问题是我们会收到有关错误的通知，我们不能忽略这一点，因为它每次都发生在随机的行和页面上。

* * *

我可以补充一点，这发生在我们所有的网络应用程序上。

* * *

澄清一下，这不是我们的网络应用程序的问题，问题在于 android。
我已经删除了我们所有的代码和标记，问题仍然存在，android 正在做一些导致这个错误的事情。

我测试过的手机是 Galaxy S3。

* * *

因为当我说来源是空的时人们似乎不相信我：

```
(develop✗) $ curl -v localhost:3000/us/app
* About to connect() to localhost port 3000 (#0)
*   Trying 127.0.0.1...
* connected
* Connected to localhost (127.0.0.1) port 3000 (#0)
> GET /us/app HTTP/1.1
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: localhost:3000
> Accept: */*
> 
< HTTP/1.1 200 OK
< Content-Type: text/html; charset=utf-8
< X-UA-Compatible: IE=Edge
< Cache-Control: no-cache
< X-Request-Id: c7d96d6898017b5efa7659028008a8b8
< X-Runtime: 0.011019
< Vary: Accept-Encoding
< Content-Length: 0
< Connection: keep-alive
< Server: thin 1.3.1 codename Triple Espresso
< 
* Connection #0 to host localhost left intact
* Closing connection #0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:09:25.110

我发现在 Android 4.0.X 上，任何没有包含至少 10 个字符的 div 的页面都会引发 JavaScript 错误。RSS 阅读器显然假设页面将在 div 中包含一些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T04:18:55.023

I have this error on Chrome for Linux and it was caused by the ImageBlocker extension. Since this "error" occurs for you when you launch a blank page, it reasons that you don't need to fix it. It is a bug with the browser or an extension.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T13:04:04.260

您的问题与您的评论相结合**没有**意义：
听起来您正在打开**不包含 HTML 或 JavaScript的****空白**页面，它会生成错误？？？

 **您的页面中某处有一些 JavaScript 函数正在运行，并且**1**
) 尝试从您的 DOM 获取一些对象
2) 失败 1) 但不**处理**将对象引用变量设置为 NULL 的错误
3) 尝试使用上述对象变量来获取它的`tagName`属性。

如果上述情况不正确，那么您将**不会**有任何错误要问。**

# vb.net - 将具有多张工作表的工作簿写入单个文本文件

> ID：12510200
> 
> 赞同：0
> 
> 时间：2012-09-20T09:56:40.553
> 
> 标签：vb.net, excel-2007, excel-interop

我正在尝试将以下代码拆分为多个线程（工作簿中的每个工作表一个线程）。有超过 400,000 行需要共同处理，这在 1 个线程上需要相当长的时间，我希望如果我拆分它，这会加快速度。

自从我使用 Excel Interop 已经有一段时间了，但我很确定下面的代码应该可以工作。我希望它在每个线程上运行：

```
 Dim CurrentRow As String = Nothing

        For i As Integer = 1 To sheet.Rows.Count

            If Not String.IsNullOrEmpty(sheet.Range("A" & i).ToString) Then
                CurrentRow = _
                    sheet.Range("H" & i).Value.ToString.Trim & "," & _
                    sheet.Range("A" & i).Value.ToString.Trim & "," & _
                    sheet.Range("B" & i).Value.ToString.Trim & "," & _
                    sheet.Range("C" & i).Value.ToString.Trim & "," & _
                    sheet.Range("D" & i).Value.ToString.Trim & "," & _
                    sheet.Range("E" & i).Value.ToString.Trim & "," & _
                    sheet.Range("F" & i).Value.ToString.Trim & "," & _
                    sheet.Range("G" & i).Value.ToString.Trim & "," & _
                    sheet.Range("I" & i).Value.ToString.Trim & "," & _
                    sheet.Range("J" & i).Value.ToString.Trim & "," & _
                    sheet.Range("K" & i).Value.ToString.Trim & ","

                My.Computer.FileSystem.WriteAllText("D:\Lists\" & sheet.Name & ".txt", _
                CurrentRow & vbCrLf, True)

                ItemCount = ItemCount + 1

                ElapsedTime = Now().Subtract(StartTime)
                Me.Invoke(Me.AddItemDelegate, New Object() {sheet.Name, ElapsedTime})

            Else
                ItemCount = 0
                Exit For
            End If 
```

不幸的是，我在 if 语句中收到以下错误：

> System.Runtime.InteropServices.ComException (0x800401A8)：Microsoft.Office.Interop.Excel._Worksheet.get_Range (Object Cell1, Object Cell2) 的 HRESULT 0x800401A8 异常

不知道我在这里做错了什么，有人可以帮忙吗？

谢谢！

** 编辑 **
循环似乎有效，但仅通过一次迭代。当它想要进入下一次运行时，它会抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:08:01.840

在您的 IF 语句`... sheet.Range("A" & i) ...`中缺少第二个参数。
我怀疑您打算访问单个单元格（而**不是**单元格范围）-我不确定确切的 VB 语法-您必须自己查找。
同样的问题也会出现在你的赋值语句中。

# android - 强制布局为正方形

> ID：12510203
> 
> 赞同：1
> 
> 时间：2012-09-20T09:56:49.150
> 
> 标签：android, android-linearlayout

我有一个包含七个孩子的水平线性布局。（这是日历）

这些孩子都具有相同的宽度，具体取决于屏幕尺寸。这很容易实现。

最难实现的部分是强迫孩子们的身高等于他们的宽度（我想像 Windows Phone Metro 风格）

我以编程方式填充我的 LinearLayout。有没有办法固定高度使其等于宽度？

编辑：这是我正在使用的代码。

```
public View createWeekView(final Calendar moving)
    {
        final LinearLayout weekView = (LinearLayout) inflater.inflate(
                R.layout.calendar_week, null);
        final LayoutParams params = new LayoutParams(LayoutParams.MATCH_PARENT,
                LayoutParams.WRAP_CONTENT, 1.0F);

        for (int i = 0; i < 7; i++)
        {
            weekView.addView(this.createDayView(moving), params);
            moving.add(Calendar.DAY_OF_MONTH, 1);
        }
        return weekView;
    } 
```

# c# - 动态 lambda 选择表达式

> ID：12510206
> 
> 赞同：1
> 
> 时间：2012-09-20T09:56:53.033
> 
> 标签：c#, .net, reflection, lambda, expression-trees

我有一个无法弄清楚的 lambda 表达式树问题。我正在尝试制作动态 linq Select 语句。

我在这里创建了一个动态存储库：

```
private static dynamic GetRepository(Type type)
{
    dynamic repository = typeof(IFactory).GetMethod("Create").MakeGenericMethod(typeof(IRepository<>).MakeGenericType(type)).Invoke(ObjectFactory.Instance, new object[] { });
    return repository;
} 
```

有了这个，我只需要调用它，我在编译时不知道 x 和 SomeProperty 。我有带有 SomeProperty 名称的 PropertyInfo propertyInfo 和带有 x 类型的 Type objectType。它在目标 1 处失败，但有以下例外：

> GetMethod（字符串名称）处的 System.Reflection.AmbiguousMatchException

编码：

```
private SomeObject CreateSomeObject (PropertyInfo propertyInfo, Type objectType)
{
    var param = Expression.Parameter(objectType, "x");
    MemberExpression expression = Expression.PropertyOrField(param, propertyInfo.Name);

    //Goal 1: var selectExpression = Expression.Lambda<Func<objectType, object>>(expression, param);
    var selectExpression = typeof(Expression).GetMethod("Lambda").MakeGenericMethod(typeof(Func<,>)
    .MakeGenericType(objectType, typeof(object)))
    .Invoke((object)null, new object[] { expression, param });

    // Goal 2: List<object> list = GetRepository(objectType).FindAllQuery().Select(x => x.SomeProperty).ToList();
    List<object> list = GetRepository(objectType).FindAll().Select(selectExpression);
} 
```

如何解决这个问题？

**更新1：**

我改变了选择 Lambda 方法的方式，打包“param”参数的方式，并添加了一个对象转换器到“表达式”。

```
private SomeObject CreateSomeObject (PropertyInfo propertyInfo, Type objectType)
{
    var param = Expression.Parameter(objectType, "x");
    Expression expression = Expression.Convert(Expression.PropertyOrField(param, propertyInfo.Name), typeof(object));

    //Goal 1: var selectExpression = Expression.Lambda<Func<objectType, object>>(expression, param);
    var selectExpression = typeof(Expression).GetMethods().First(m => m.Name == "Lambda" && m.IsGenericMethod)
    .MakeGenericMethod(typeof(Func<,>)
    .MakeGenericType(objectType, typeof(object)))
    .Invoke((object)null, new object[] { expression, new [] { param }});

    // Goal 2: List<object> list = GetRepository(objectType).FindAllQuery().Select(x => x.SomeProperty).ToList();
    List<object> list = GetRepository(objectType).FindAll().Select(selectExpression);
} 
```

但是我知道我在目标 2（Microsoft.CSharp.RuntimeBinder.RuntimeBinderException）中得到了这个异常：

> “System.Collections.Generic.List”不包含“Select”的定义

这部分是正确的，因为它是在 System.Linq 中定义的，并且它是一种扩展方法。我如何让这个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:18:55.237

抛出异常的代码是

```
typeof(Expression).GetMethod("Lambda") 
```

因为`Lambda`在类型上定义了18 个方法`Expression`（因此是`AmbiguousMatchException`）。

`GetMethod(string methodName)`当没有过载时是合适的。在这种情况下，我会使用`GetMethods()`然后过滤掉我需要的那个。

在您的情况下，正确的重载是

```
Expression.Lambda<TDelegate>(Expression body, params ParameterExpression[] parameters) 
```

您可以编写一个函数，通过检查参数的数量及其类型来验证正确的重载，但我找到了一个更简单的替代方法：通过`.ToString()`表示过滤方法，在我们的例子中是：

```
System.Linq.Expressions.Expression`1[TDelegate] Lambda[TDelegate](System.Linq.Expressions.Expression, System.Linq.Expressions.ParameterExpression[]) 
```

`new object[] { expression, param }`传递参数（ ）的方式也有问题。第二个参数不是类型`ParameterExpression`，而是`ParameterExpression[]`（数组），因此你应该传递`new[]{param}`而不是仅仅传递`param`。在常规代码中调用它时，它的工作原理是这样的，因为它被定义为`params ParameterExpression[]`.

总之，以下代码应该适用于您的情况：

```
const string methodSignature = 
    "System.Linq.Expressions.Expression`1[TDelegate] Lambda[TDelegate]" +
    "(System.Linq.Expressions.Expression, System.Linq.Expressions.ParameterExpression[])";

var lambdaMethod = typeof (Expression).GetMethods()
    .Single(mi => mi.ToString() == methodSignature);

var funcType = typeof (Func<,>).MakeGenericType(objectType, typeof (object));

var genericLambda = lambdaMethod.MakeGenericMethod(funcType);

var selectExpression = genericLambda.Invoke(null, new object[] { expression, new[] { param } }); 
```

# php - 解析器或网络爬虫

> ID：12510208
> 
> 赞同：1
> 
> 时间：2012-09-20T09:57:07.993
> 
> 标签：php, html-parsing, web-scraping, web-crawler

我想从 ehow.com 中提取有关不同主题的数据以存储在我的数据库中。问题是我必须筛选多个网页才能从该网站获取信息。为了浏览大量网页并提取我需要的数据，我会使用像 SimpleHTMLDOM 这样的抓取工具还是需要使用网络爬虫？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:03:06.693

首先考虑是否允许您在 eHow.com 上这样做。我想你不能按照你在这里解释的方式做到这一点。

无论如何，关于你的问题：

`Crawler`从页面移动到页面和/或网站到网站，`Parser`并将解析页面内容并将它们以可重用的方式存储以满足您的需求。为此，您需要两者，或者您需要手动为您的 Parser 提供 URL。

**更新：**

关于有用的链接`Crawler`：

[PHP 爬虫](http://astellar.com/php-crawler/)

[PHP抓取](http://phpcrawl.cuab.de/)

[简单的 PHP 爬虫示例](http://webdevwonders.com/simple-php-crawler-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:00:38.663

网络爬虫只是解析器（如 SimpleHTMLDOM）的包装器，用于通过跟踪链接自动获取页面。

你需要这样做吗？

在任何一种情况下，eHow[的条款和条件](http://www.ehow.com/terms-of-use.html)都禁止使用自动方式访问该站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:06:55.320

您可以相对轻松地构建自己的爬虫......

例如，在 PHP 中，您可以使用...

```
<?php

$lines = file('http://www.example.com/');

// i think here you either implode or explode the $lines by "" cannot remember which

// Loop through our array, show HTML source as HTML source; and line numbers too.
foreach ($lines as $line_num => $line) {
    echo "Line #<b>{$line_num}</b> : " . htmlspecialchars($line) . "<br />\n";
}

preg_match_all("/<h2>(.*)<\/h2>/i",$lines,$array_of_contents);

$page_title = $array_of_contents[0][1];

if($page_title == "Technology"){

// run a function here to do something with links found on this page...

}

?> 
```

最好使用 CURL 而不是 file()，尽管您可能需要在 PHP.ini 中启用它。我以前在另一个网站上做过这个，效果很好。当找到您感兴趣的链接时，将它们添加到数据库并继续爬行，直到找到所有您想要的链接，然后使用另一个类等来处理/抓取收集的 url 处的数据......

# silverlight - WP Silverlight：如何以编程方式将 ItemTemplate 分配给 PanoramaItem？

> ID：12510213
> 
> 赞同：0
> 
> 时间：2012-09-20T09:57:17.877
> 
> 标签：silverlight, windows-phone-7, itemtemplate

**情况：**
我有一个带有 2 个全景项目的全景控件。第一项包含选项列表，如果我选择其中一个，全景控制应该切换到第二项。如您所知，第二项的内容应每次动态更新。此外，每个选项的 ItemTemplate 应该不同。
**我的解决方案：**
我决定每次需要切换时都创建全景控件（因为以编程方式切换全景项目的唯一方法是更改​​需要重新加载页面的 DefaultItem 属性或隐藏它并显示另一个控件）。此解决方案有效，但现在我需要为每个全景项目分配不同的 ItemTemplate。（模板在 xaml 中。我只需要分配它）。
**问题：**
我的解决方案正确吗？以及如何在后面的代码中分配 ItemTemplate？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:47:25.077

*我如何在后面的代码中分配 ItemTemplate？*

解决方案如下所示：

```
public void constructUI()
{

Panorama panoramactrl = new Panorama();

PanoramaItem panoramaItem = new PanoramaItem();
panoramaItem.Header = "main";
PanoramaItem panoramaItem1 = new PanoramaItem();
panoramaItem1.Header = "not main";

ListBox listBox = new ListBox();
listBox.ItemsSource = CreatePanoramaItems();

DataTemplate itemTmp = (DataTemplate)XamlReader.Load(

    @"<DataTemplate xmlns=""http://schemas.microsoft.com/client/2007"">
    <StackPanel Tag=""{Binding id}"">
    <TextBlock Text=""{Binding FirstRaw}"" Foreground=""Red"" FontSize=""40"" />
    <TextBlock Text=""{Binding SecondRaw}"" Foreground=""Orange"" FontSize=""30"" Margin=""10,0,0,0"" />
    </StackPanel>
    </DataTemplate>");

listBox.ItemTemplate = itemTmp;
panoramaItem.Content = listBox;
panoramactrl.Items.Add(panoramaItem);
panoramactrl.Items.Add(panoramaItem1);
this.LayoutRoot.Children.Add(panoramactrl); 
```

}

```
private List<Data> CreatePanoramaItems()
{
    List<Data> Panoramaitems = null;
    Panoramaitems = new List<Data> 
    { 
    new Data("123", "456", "1"),
    new Data("234", "567", "2"),
    new Data("345", "678", "3")
    };
    return Panoramaitems;
} 
```

希望这对某人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:13:23.843

我不认为你的解决方案是好的。正如您在[WP7 指南](http://blogs.msdn.com/b/silverlight_sdk/archive/2011/01/07/windows-phone-7-design-guidelines-cheat-sheet.aspx)中看到的：

*   不要将枢轴控件用于基于任务的导航，例如在向导应用程序中。

全景图也是如此。当用户选择一个项目时，您最好导航到另一个页面。

请参阅人脉中心。您选择一个人，手机会显示您的个人详细信息页面。

# magento - 如何在单独的窗口中为 Magento 中的自定义链接打开 pdf？

> ID：12510215
> 
> 赞同：0
> 
> 时间：2012-09-20T09:57:44.590
> 
> 标签：magento, pdf

我需要设置一个静态页面和链接列表，然后单击该链接，该链接的 pdf 文件应在新窗口中打开。

每个链接都包含它自己的 pdf 文件

我试图搜索无法找到任何相关结果

所以请任何人帮助我做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:01:56.853

1) 使用 Magento CMS，您可以创建静态页面。

2）创建链接时，在href标签中添加属性“target”为“_blank”。

前任：`<a href="LINK_TO_THE_FILE" target="_blank"> LINK TEXT </a>`

# wpf - 在我的项目中集成 .chm

> ID：12510217
> 
> 赞同：0
> 
> 时间：2012-09-20T09:57:47.820
> 
> 标签：wpf, chm

我的项目中有帮助文件。我试图通过这种方式在本地打开它并且它有效：

```
System.Diagnostics.Process.Start(@"C:\Users\Sheamus\Documents\myCHM.chm"); 
```

我必须将它集成到应用程序中，所以我已将 .chm 作为资源放在我的项目中，但我无法通过这种方式打开它，VS 告诉我它找不到文件：

```
System.Diagnostics.Process.Start(@"pack://application:,,,/MyLibrary;component/Help/myCHM.chm"); 
```

你有想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:12:43.650

第一种方法对我来说似乎很好。将您的 chm 作为现有文件包含在您的项目中，并确保您已将*Build*属性设置为 Context，并将*Copy to Output Directory*设置为 Always，或者 Copy if Newer。然后在运行时，您可以使用类似

```
System.IO.Path.Combine(Application.StartupPath, "Help.chm") 
```

如果你想要一些比启动文件更复杂的东西，你可以试试[Easy Help](http://peteohanlon.wordpress.com/2009/05/01/easy-help-with-wpf/)

# javascript - Tab Select Next Element

> ID：12510221
> 
> 赞同：0
> 
> 时间：2012-09-20T09:58:07.637
> 
> 标签：javascript, html, css

I have an accordion setup on my page with input form fields in the contents. When I cycle through the input fields and reach the end of the accordion section i Want the tab to select the header of hte next accordion section. but it just goes to the end to the submit button. how do I fix it? Let me share some code:
**HTML**

```
 <input type="radio" class="radioBoxHide " name="byemail" id="byemail" value="byemail" data-panel="pageDetails" />
<h2 class="radioBoxInActive radioBoxActive">Page Details</h2>

<div class="tab-content" id="pageDetails">
    <form name="pageDetails" action="" method="">
            <div class="moduleRow" >
                <label class="reqd" for="prCategory">Primary Category</label>
                <select id="prCategory">
                    <option value="value1">Value 1</option>
                    <option value="value2">Value 2</option>
                </select>
            </div>
     </form>
</div>

<input type="radio" class="radioBoxHide " name="byemail" id="byemail" value="byemail" data-panel="productDetails" />
<h2 class="radioBoxInActive">Product Details</h2>
<div class="tab-content" id="productDetails">
    <form name="productDetails" action="" method="">
            <div class="moduleRow" >
                <label for="displayName">Display Name</label>
                <input type="text" name="displayName" id="displayName" value="" />
            </div>
            <div class="moduleRow" >
                <label for="shortTitle">Short Title</label>
                <input type="text" name="shortTitle" id="shortTitle" value="" />
            </div>
     </form>
</div> 
```

and the **javascript**:

```
$(function () {
    var app = this;
    $("#siteLabel, #pageLabel, #articlelabel, #productlabel").hide();

    $(".tabs-control label").click(function () {
        input = $(this).prev("span, input");
        $(".selected", app.element).removeClass("selected").hide();
        $(".radioBoxActive", app.element).removeClass("radioBoxActive");
        $("#" + input.attr("data-panel")).show().addClass("selected");
        $(this).addClass("radioBoxActive");
    });

    $("select").change(function () {
        var str = "";
        $("select option:selected").each(function () {
            $(".selecteddd", app.element).removeClass("selecteddd").hide();
            str += $(this).attr("data-panel") + " ";
            $("#" + $(this).attr("data-panel")).show().addClass("selecteddd");
        });
    }).change();

    if ($(".tabs-control").hasClass('newProduct')) {
        $("#pageDetails, #productDetails, #imageFields, #addInfo, #nutriInfo").hide();
    }

    var selected = $(".radioBoxActive");
    input = selected.prev("input");
    $("#" + input.attr("data-panel")).show().addClass("selected");

    $("h2.radioBoxInActive").click(function () {
        input = $(this).prev("span, input");
        $(".selected", app.element).removeClass("selected").slideUp();
        $(".radioBoxActive", app.element).removeClass("radioBoxActive");
        $("#" + input.attr("data-panel")).slideDown().addClass("selected");
        $(this).addClass("radioBoxActive");
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:55:23.187

It sounds like you are looking for TabIndex. It's hard to tell how it would work in context of your accordian without an example (hint: use a service like JS Fiddle), but in modern browsers you can add "tab into" functionality using HTML's tabindex property.

```
<h2 class="radioBoxInActive" tabindex="0">Product Details</h2> 
```

For more information check out [this page](http://snook.ca/archives/accessibility_and_usability/elements_focusable_with_tabindex):

> *   If given a value of "-1", the element can't be tabbed to but focus can be given to the element programmatically (using element.focus()).
> *   If given a value of 0, the element can be focused via the keyboard and falls into the tabbing flow of the document.
> *   Values greater than 0 create a priority level with 1 being the most important.

Of course, if you want anything special to happen when the header is selected you will need to add functionality. Assuming your $ is jQuery, you can add this using [$(sel).focus(fn)](http://api.jquery.com/focus/).

# java - 可调整大小的数字金字塔面板与摆动

> ID：12510222
> 
> 赞同：0
> 
> 时间：2012-09-20T09:58:10.103
> 
> 标签：java, swing, jpanel, stringbuilder

我正在尝试使用 Swing 和 AWT 组件创建一个可调整大小的窗口，该窗口根据框架的大小以金字塔方式显示数字，但我不知道从哪里开始。我不确定我是否应该使用 JLabel 或 StringBuilder。如果可以在不使用动作侦听器的情况下完成，那将是首选。我需要一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T10:27:49.853

我只需创建一个专用面板并覆盖方法paintComponent。然后使用 FontMetrics 和该面板的大小，我将迭代并用金字塔填充面板。

这是我提到的一个例子（虽然当位数增加时仍然存在问题，但我会让你解决这个问题）：

```
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestPyramid {

    private static class PyramidPanel extends JPanel {
        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setFont(new Font("Courier", Font.PLAIN, 11));
            FontMetrics fm = g.getFontMetrics();
            fm.getHeight();
            int i = 0;
            int y = 0;
            int n = 1;
            while (y + fm.getHeight() < getHeight()) {
                int x = getWidth() / 2;
                StringBuilder sb = new StringBuilder();
                for (int j = 0; j < 2 * i + 1; j++) {
                    String v = String.valueOf(n++);
                    sb.append(v);
                    for (int fill = 0; fill < 4 - v.length(); fill++)
                        sb.append(" ");
                }
                String text = sb.toString();
                int stringWidth = fm.stringWidth(text);
                if (stringWidth > getWidth()) {
                    break;
                }
                x -= stringWidth / 2;
                y += fm.getHeight();
                g.drawString(text, x, y);
                i++;
            }
        }
    }

    protected void initUI() {
        JFrame frame = new JFrame(TestPyramid.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new PyramidPanel());
        frame.setSize(400, 200);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestPyramid().initUI();
            }
        });
    }
} 
```

# telerik - 自定义和访问控件 onItemCommand

> ID：12510235
> 
> 赞同：1
> 
> 时间：2012-09-20T09:58:57.813
> 
> 标签：telerik, radgrid

这是我的代码

```
<EditFormSettings PopUpSettings-Width="500" EditFormType="Template">
 <FormTemplate>
 <asp:DropDownList ID="Status" DataSourceID="TerminalStatusDTS" DataValueField="STATUS_ID" DataTextField="STATUS_NAME"  runat="server"  Width="175px"  ></asp:DropDownList>
 </FormTemplate> 
```

我的问题是我怎样才能`Status`在`e.commandName=RadGrid.InitInsertCommandName onItemCommand`活动中变得不可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:07:00.223

RadGrid 的每一行的EditForm 都不同。首先，您必须获取正在编辑的行的行索引并获取对 Edit 表单的引用。然后你可以在编辑表单中找到Control。示例代码可能如下：

```
if (e.CommandName == RadGrid.InitInsertCommandName)
{
    RadGrid radgrid = (RadGrid)sender;
    int rowindex = e.Item.RowIndex;
    GridEditFormItem item = radgrid.MasterTableView.GetItems(GridItemType.EditFormItem)[rowindex] as GridEditFormItem;
    DropDownList statusDropDownList = (DropDownList)item.FindControl("Status");
    statusDropDownList.Visible = false;
} 
```

但是，这可能不是您所需要的。我的意思是当页面在 ItemCommand 上进行回发时，状态下拉列表将可见，我认为您只需要在单击插入命令时隐藏控件（更新和插入的不同行为）。

因此，您可以访问 DropDownList 并将其隐藏在 ItemCreated 事件或 ItemDataBound 事件中。

例如：

```
void rad_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridEditFormInsertItem)
    {
        DropDownList statusDropDownList = (DropDownList)e.Item.FindControl("Status");
        statusDropDownList.Visible = false;
    }
} 
```

# c# - 如何将 MODI 组件引用到虚拟主机？

> ID：12510236
> 
> 赞同：0
> 
> 时间：2012-09-20T09:58:58.713
> 
> 标签：c#, .net, modi

我使用 MODI 组件构建了一个 Web 应用程序来进行 OCR。在我的本地主机中，我安装了 Microsoft Office，它运行良好。但是当我将我的项目上传到虚拟主机时，它显示了错误消息：

**无法从程序集“Thumbnailer，版本=1.0.0.0，文化=中性，PublicKeyToken=null”加载类型“MODI.IDocument”。该类型被标记为符合类型等效条件，但包含的程序集未加载为完全受信任的。**

我尝试将 MDIVWCTL.dll 放入“bin”文件夹，但没有成功。有什么方法可以在不安装 Microsoft Office 的情况下引用 MODI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T10:27:06.237

我自己找到了解决方案。转到项目引用中的 MODI 组件属性并将“复制本地”更改为 true。

# git - 更新Git索引失败，LF会被CRLF代替？

> ID：12510238
> 
> 赞同：8
> 
> 时间：2012-09-20T09:58:59.827
> 
> 标签：git, github, git-gui

我正在使用 git-gui 进行版本控制并将它们推送到远程位置。当我尝试重新扫描文件以进行更改时，我收到了这条消息，但我不确定这意味着什么。请帮帮我。

![在此处输入图像描述](../Images/fb4c94ee251cd677f8366dd3e978e391.png)

```
Updating the Git index failed.  A rescan will be automatically started to resynchronize git-gui.

warning: LF will be replaced by CRLF in bin/jarlist.cache.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in gen/com/click4tab/pustakalpha/BuildConfig.java.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in proguard-project.txt.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in project.properties.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in res/layout/start_test.xml.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in res/menu/start_test.xml.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in src/com/click4tab/pustakalpha/StartTestActivity.java.
The file will have its original line endings in your working directory. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-20T02:37:19.160

解决方案是接受这种行为。你在 Windows 上，所以你*应该*有. 它在那里，所以 Git 内部记录中的行尾是一致的。那里有警告，因此您可以查看在提交期间是否会意外损坏二进制文件。`autocrlf``true`

单击**继续**。如果您想防止这些文件再次发生这种情况，您需要取消暂存这些文件，然后更正行尾并再次暂存它们。通过在编辑器中将文件的行尾更改为 CRLF/Windows 来执行此操作，或者将[这些命令行工具](http://dos2unix.sourceforge.net/)放到您的`system32`目录中，以便您可以`unix2dos some_file.java`在任何命令提示符下对此类文件进行操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-28T15:35:45.700

我遇到了类似的问题，并决定仔细查看我的配置。

**Windows / Linux / MAC 上的换行符：**

1.  X 之前的 MAC OS：**\r** = CR（回车）
2.  MAC OS X / UNIX：**\n** = LF（换行）
3.  窗口：**\r\n** = CR + LF

不要恐慌。Git 可以为您处理平台之间的转换。

Git 应该将以 LF 结尾的行存储在 repo 中。

设置为；

**TRUE - 如果您在 Windows 上**：

```
git config --global core.autocrlf true 
```

当您签出代码时，这会将 LF 结尾转换为 CRLF。

**输入 - 如果您在 MAC/LINUX 上**：

你不需要转换任何东西，Git 使用 LF，而你的 MAC 使用 LF。

但是，如果一个通过，你可以告诉 git 转换任何 CRLF：

```
git config --global core.autocrlf input 
```

**错误 - 不推荐**

我不推荐这个，但只是为了这个解释：

如果你是一个只在 windows 机器上工作的 windows 开发人员，并且你 100% 确定你永远不会在 MAC 上与人一起工作：

```
git config --global core.autocrlf false 
```

**更新：**

正如下面评论的那样，我没有提到可以为项目默认这些设置的 .gitattributes。

如果你有时间，这里是文档：[http ://git-scm.com/docs/gitattributes](http://git-scm.com/docs/gitattributes)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-27T12:30:44.563

在 Unix 系统中，行尾用换行符 (LF) 表示。在windows中，一行用回车符（CR）和换行符（LF）表示（CRLF）。当您从 git 获取从 unix 系统上传的代码时，它们将只有一个 LF。

如果要关闭此警告，请在 git 命令行中键入

```
git config core.autocrlf true 
```

如果您想做出明智的决定 git 应该如何处理，请阅读文档

这是一个片段

格式和空白

格式和空白问题是许多开发人员在协作时遇到的一些更令人沮丧和微妙的问题，尤其是跨平台。补丁或其他协作工作很容易引入细微的空白更改，因为编辑器会默默地引入它们，并且如果您的文件曾经触及 Windows 系统，它们的行尾可能会被替换。Git 有一些配置选项可以帮助解决这些问题。

```
core.autocrlf 
```

如果您在 Windows 上编程并与非 Windows 的人一起工作（反之亦然），您可能会在某些时候遇到行尾问题。这是因为 Windows 对其文件中的换行符同时使用回车符和换行符，而 Mac 和 Linux 系统仅使用换行符。这是跨平台工作的一个微妙但令人难以置信的事实；Windows 上的许多编辑器会默默地用 CRLF 替换现有的 LF 样式的行尾，或者在用户按下回车键时插入两个行尾字符。

当您将文件添加到索引时，Git 可以通过将 CRLF 行结尾自动转换为 LF 来处理这个问题，反之亦然，当它检出代码到您的文件系统时，反之亦然。您可以使用 core.autocrlf 设置打开此功能。如果您使用的是 Windows 机器，请将其设置为 true - 当您签出代码时，这会将 LF 结尾转换为 CRLF：

```
$ git config --global core.autocrlf true 
```

如果您在使用 LF 行结尾的 Linux 或 Mac 系统上，那么您不希望 Git 在您检出文件时自动转换它们；但是，如果意外引入了带有 CRLF 结尾的文件，那么您可能希望 Git 修复它。您可以通过将 core.autocrlf 设置为输入来告诉 Git 在提交时将 CRLF 转换为 LF，但不能反过来：

```
$ git config --global core.autocrlf input 
```

此设置应在 Windows 结帐中为您提供 CRLF 结尾，但在 Mac 和 Linux 系统以及存储库中为 LF 结尾。

如果你是一个 Windows 程序员，正在做一个仅限 Windows 的项目，那么你可以关闭这个功能，通过将配置值设置为 false 来记录存储库中的回车：

```
$ git config --global core.autocrlf false 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-15T11:39:42.233

这行代码应防止出现此警告：

```
git config core.autocrlf false 
```

如果您想要更详细的答案，如输入该行代码的方式和位置，请查看此处： [https ://stackoverflow.com/questions/3841140/git-how-to-get-rid-of-the-annoying-crlf -message-on-msysgit-windows](https://stackoverflow.com/questions/3841140/git-how-to-get-rid-of-the-annoying-crlf-message-on-msysgit-windows "摆脱烦人的 crlf 消息")

# qnap - 如何使用密码保护 twonky 媒体服务器

> ID：12510239
> 
> 赞同：2
> 
> 时间：2012-09-20T09:59:02.563
> 
> 标签：qnap

我有一个运行 Twonky 媒体服务器（版本 6）的 QNAP NAS TS 209 SII。我已经对公开管理页面的 Web 服务器进行了密码保护。我还有一个在端口 9000 上运行的 Twonky 媒体服务器，它使用自己的 Web 服务器，而不是 apache 的。

有人知道如何用密码保护对 Twonky 的访问吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:04:14.100

一种选择是关闭 Twonky 端口的端口转发，而是通过也在 QNAP 上运行的 Apache 服务器设置基于 mod_proxy 的反向代理。

ApacheTutor站点有一个很好的[页面来](http://www.apachetutor.org/admin/reverseproxies)[说明](http://www.apachetutor.org/admin/reverseproxies)如何做到这一点：

但总而言之，请确保您已加载 mod_proxy 模块。最低限度：

```
LoadModule  proxy_module         modules/mod_proxy.so
LoadModule  proxy_http_module    modules/mod_proxy_http.so
LoadModule  proxy_html_module    modules/mod_proxy_html.so 
```

然后设置适当的 ProxyPass 行：

`ProxyPass /twonky/ http://localhost:9000/`

最后设置适当的线路以确保对该位置的访问始终受密码保护。这可能类似于以下内容：

```
<Location /twonky>
AuthType Basic
AuthName "Twonky Restricted Access"
AuthUserFile /home/secure/apache.passwd
Require user twonkyuser
</Location> 
```

这应该通过[http://your.external.address/twonky 在外部公开twonky](http://your.external.address/twonky)

# c# - Grid 或 ListView 中的不同对象类型

> ID：12510240
> 
> 赞同：2
> 
> 时间：2012-09-20T09:59:06.267
> 
> 标签：c#, xaml, gridview, grid, microsoft-metro

我目前正在尝试弄清楚如何在 GridView 中显示不同类型的对象，例如看这张图片：

![](../Images/30110dae39f6353b5a086b41abb70dc7.png)

右侧的最后一个元素与其他元素不同，所以如果我将一个 observablecollection 绑定到 GridView，我怎么能说最后一个元素显示在另一个布局中。

目前我正在使用这个 XAML 代码

```
<GridView x:Name="startView" ItemsSource="{Binding}" Grid.Column="1" Grid.Row="2" SelectionMode="None" Width="Auto">
                <GridView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock x:Name="DetailTitle" Height="74" Text="{Binding Title}" />
                            <Image x:Name="Image" Height="Auto" Width="Auto" Margin="0" Stretch="None" Source="{Binding LocalCoverUrl}" Visibility="Collapsed" />
                        </StackPanel>
                    </DataTemplate>
                </GridView.ItemTemplate>
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapGrid Orientation="Horizontal" MaximumRowsOrColumns="2" />
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>
            </GridView> 
```

后面的代码：

```
ObservableCollection<Movie> recentlyStarted = await Api.RecentlyStarted(3);
startView.DataContext = recentlyStarted; 
```

但我目前不知道如何让最后一个元素以不同的样式显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:15:13.540

简单的方法是将这两种类型的对象作为不同的类（例如 MoviePicStyle + MoviePlainStyle。然后将您的 DataTemplate 移出 GridView，以便按类型选择每个对象，例如

```
<Window.Resources>
  <DataTemplate DataType="{x:Type ViewModel:MoviePicStyle}">
    <StackPanel>
       <TextBlock x:Name="DetailTitle" Height="74" Text="{Binding Title}" />
       <Image x:Name="Image" Height="Auto" Width="Auto" Margin="0" Stretch="None" Source="{Binding LocalCoverUrl}" Visibility="Collapsed" />
    </StackPanel> 
  <DataTemplate DataType="{x:Type ViewModel:MoviePlainStyle}">
      ...Different View...
  </DataTemplate>
</Window.Resources>
<GridView... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T11:42:36.580

使用 gridview 的模板选择器属性，并根据对象的类型选择模板。我在我的项目中做了同样的事情。您需要编写自己的 DataTemplateSelector。

我在下面提到了链接

[http://babaandthepigman.wordpress.com/2012/02/08/datatemplateselector-winrt/](http://babaandthepigman.wordpress.com/2012/02/08/datatemplateselector-winrt/)

# php - Composer - 如何将自己的包添加到列表中

> ID：12510242
> 
> 赞同：10
> 
> 时间：2012-09-20T09:59:16.060
> 
> 标签：php, symfony, composer-php

使用 composer 时如何解析包以及如何添加自定义包？

一个例子是我有一个自定义应用程序，我希望人们能够使用 composer 来获取我的包。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T10:08:28.160

[Packagist](http://packagist.org/)是 Composer 的主要存储库。您可以将您的包裹提交给[Packagist。](http://packagist.org/)然后你可以要求其他想要使用你的包的人，将你的包添加到他们的`composer.json`文件中。

[您可以在About Packagist 页面](http://packagist.org/about)上找到有关如何创建包的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-22T02:34:23.173

供进一步参考：

如[Composer Documentation > VCS Repository](https://getcomposer.org/doc/05-repositories.md#vcs)中所述，在您的项目中添加引用您的 fork 的存储库，它将使用您的存储库而不是 packagist 之一：

```
{
    "name": "acme/my-app",
    "repositories": [
        {
            "type": "vcs",
            "url": "https://github.com/yourusername/project-name"
        }
    ],
    "require": {
        "repo/project-name": "dev-master"
    }
} 
```

# sql-server-2008 - SQL Server Management Studio - 为别名分配颜色/格式

> ID：12510247
> 
> 赞同：1
> 
> 时间：2012-09-20T09:59:29.353
> 
> 标签：sql-server-2008, colors, formatting, alias

我目前正在使用 SQL Server 2008，我想知道是否有任何方法可以在服务器管理工​​作室窗口中格式化别名，以便它们从其他文本（例如粗体或彩色）中脱颖而出。我们有一个由三人组成的团队，他们有很多疑问，所以任何帮助我们理解其他人所写内容的方法都将不胜感激！

提前致谢！

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:11:42.167

有`Tools/Options/Enviroment/Fonts and Colors`很多选择可以改变。但我不记得“别名”作为单个项目包含在内。根据[这个 MSDN 链接](http://msdn.microsoft.com/en-us/library/ms173443.aspx)，没有选项只能更改别名。也许使用外部工具？我使用`SMSS Tools`and`Poor's Man formatter`来格式化我的查询，但他们都做不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-13T13:59:24.473

我使用 RedGate SQLPrompt 自动将我的列格式化为 'ALIAS' = column_name。如果您将别名放在单引号中，那么它会脱颖而出，因为它被着色为字符串。效果很好，但我知道 Azure 中已弃用此语法。

# php - php 抓取器 - 提交脚本

> ID：12510248
> 
> 赞同：0
> 
> 时间：2012-09-20T09:59:40.327
> 
> 标签：php, form-submit

我正在编程 php 抓取器。我想抓取一些文本，然后将抓取的内容与上次扫描时存储在我的数据库中的内容进行比较。一切正常。但我想扫描“过滤器”表单所在的 url，以便它发布一些数据，因此我看不到要扫描的确切 url。有什么办法吗，我的脚本会提交带有我想要的数据的表单，这样它就会显示我想要的脚本内容，然后我可以抓取内容？

它就像

```
$url = 'myurl'; 
$data=get_data($url);
$grabbed=strip_tags(get_match('some regex',$data);

function get_data($url){
    $ch = curl_init();
    $timeout = 5;
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}
function get_match($regex,$content)
{
    preg_match($regex,$content,$matches);
    return $matches[1];
} 
```

这很好用，但我需要该 url 上的表单提交脚本，这将使我的内容可访问。那可能吗？

非常感谢，

马丁。

# 更新 ：

```
 <?php
//url
$url = "http://data.skga.sk/Tournaments.aspx";

//get the page content
$content = get_data($url);
echo $content;

//gets the match content
function get_match($regex,$content)
{
    preg_match($regex,$content,$matches);
    return $matches[1];
}

//gets the data from a URL
function get_data($url)
{
    $ch = curl_init();
    $timeout = 5;
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, "ctl00%24RightContentPlaceholder%24dpTo=20.10.2012");
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}
?> 
```

那是我现在的代码。但我仍然不知道如何解决它。当我在浏览器中执行[http://data.skga.sk/Tournaments.aspx?ctl00%24RightContentPlaceholder%24dpTo=20.10.2012](http://data.skga.sk/Tournaments.aspx?ctl00%24RightContentPlaceholder%24dpTo=20.10.2012)很好。但是当我运行这个 php 时，我可以看到默认页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:12:06.503

如果您使用 curl，您可能希望用于`curl_setopt($ch, CURLOPT_POST, 1)`切换到 POST 请求并`curl_setopt($ch, CURLOPT_POSTFIELDS, $post_fields)`携带您需要包含在请求中的任何发布数据。[curl_setopt 文档](http://php.net/manual/en/function.curl-setopt.php)中有关 Curl 选项的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:11:14.720

您可以像这样处理发布请求：

```
curl_setopt($curl_handler, CURLOPT_POST, true);
curl_setopt($curl_handler, CURLOPT_POSTFIELDS, $postdata);
curl_setopt($curl_handler, CURLOPT_URL, $url); 
```

... 其中 $url 是来自的 url `<form action="[url]" [...]`，$postdata 是一个 urlencoded 字符串，例如 'para1=val1¶2=val2&...'。

另见： http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

示例：您要提交如下表单：

```
<form action="http://example.com/login.php" method="post">
    <input type="text" name="name" />
    <input type="password" name="password" />
    <input type="submit" />
</form> 
```

这就是你要做的：

```
<?php
$curl_handler = curl_init();

curl_setopt($curl_handler, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_handler, CURLOPT_POST, true);
curl_setopt($curl_handler, CURLOPT_POSTFIELDS, "name=admin&password=secret");
curl_setopt($curl_handler, CURLOPT_URL, "http://example.com/login.php");

$data = curl_exec($curl_handler);
curl_close($curl_handler);
?> 
```

# php - urldecode() 和 rawurldecode() 在本地工作，但不在实时服务器上

> ID：12510253
> 
> 赞同：0
> 
> 时间：2012-09-20T10:00:06.440
> 
> 标签：php

在对照我的数据库检查 URL 之前，我有以下代码行来检索和解码 URL：

```
$urls = url_split(url_current());    

$url_page = (string)rawurldecode($url[0]); 
```

使用以下函数将 URL 拆分并放入数组中：

```
function url_current () 
{
    // Check for HTTPS
    $http = 'http';

    if (isset($_SERVER["HTTPS"]) && $_SERVER["HTTPS"] == "on") $http .= 's';

    $http .= '://';

    // Return URL
    return $http . $_SERVER['HTTP_HOST'] . $_SERVER["REQUEST_URI"];
}

function url_split ($url)
{    
    // Retrieve URLs - Remove URL and split into array
    $url = explode('/', str_replace('http://www.siteurl.com', '', $url));

    // Build new array, remove blanks
    $urls = array();

    for ($i = 0; $i < sizeof($url); $i++)
    {
        if ($url[$i] != '') $urls[] = $url[$i];
    }

    // Return array
    return $urls;
} 
```

这适用于我的本地服务器（使用 Zend），但它不适用于我的实时服务器。这不应该是 $_SEVER 变量的问题，因为它们都返回了正确的数据。我不知道为什么与我的实时服务器相比，这在我的本地服务器上的表现会有所不同。php ini 中是否有任何设置可能导致这种情况？

在我的本地服务器上**yrj%C3%B6laitinen**产生**yrjölaitinen**但在我的实时服务器上产生**yrjölaitinen**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:56:24.393

好的问题解决了。恐怕这与我的 PDO 数据库连接有关。我没有更新代码来强制使用 UTF-8：

```
// Connect to database
$db = new PDO("mysql:host=" . DB_HOST . ";dbname=" . DB_NAME . ";charset=utf8", DB_USER, DB_PASS, array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'utf8'"));

// Injection prevention
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

为浪费任何人的时间看这个道歉。这是我自己愚蠢的错！

# c# - 如何在 .NET 3.5 中创建 Outlook MailItem？

> ID：12510255
> 
> 赞同：1
> 
> 时间：2012-09-20T10:00:10.280
> 
> 标签：c#, outlook, office-interop

我有以下在 .Net 4.0 中构建的代码，它工作正常，但我现在必须在 .Net 3.5 中构建项目，并且在创建 MailItem 时出现错误。错误信息是：-

> “'不能将类型'object'隐式转换为'microsoft.office.interop.outlook.olmailitem'”

```
 Outlook.Application application = new Outlook.Application();

    Outlook.Folder folder = 

        application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderDrafts) 
                        as Outlook.Folder;

    Outlook.MailItem mail =
                    application.CreateItem(Outlook.OlItemType.olMailItem);

    foreach (string name in addlist)
                {
                    mail.Recipients.Add(name);
                }

    mail.BodyFormat = Outlook.OlBodyFormat.olFormatHTML;
                mail.HTMLBody = msg;
                mail.Subject = textBox1.Text;
                mail.Save(); 
```

任何人都可以帮忙吗？我正在努力解决语法问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:07:35.787

Outlook.Application.CreateItem 返回一个对象（准确地说是动态的），您必须将其显式转换为 Outlook.MailItem，如下所示：

```
Outlook.MailItem mail = 
                application.CreateItem(Outlook.OlItemType.olMailItem) as Outlook.MailItem; 
```

# python - 我可以运行一个名称由列表生成的 cmd python 命令吗？

> ID：12510257
> 
> 赞同：-1
> 
> 时间：2012-09-20T10:00:17.430
> 
> 标签：python

假设我有一个清单：

```
my_list = ['first', 'second', 'third'] 
```

现在我要做的是运行一个 cmd 命令来定义这个列表的名称，但同时给它编号。我知道这听起来令人困惑，所以这就是它的样子：

```
for i in range (0, 4):
      localdevice = cmd("some command create name ARRAY_456_" + i + "") 
```

现在我不需要我已经拥有的命令本身，我需要知道我的 for 循环是否可以工作并创建`ARRAY_456_1`then ？`ARRAY_456_2``ARRAY_456_3`

还是有其他方法可以在末尾添加数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:04:05.323

应该可以，但会这样写

```
for i in range (0, 4):
      localdevice = cmd("some command create name ARRAY_456_%d" % i) 
```

使用字符串连接并不是那么干净。使用格式替换字符串中的参数更加灵活

这是一个更完整的示例：

```
cmd = 'some command create name'
for i in range(4):
    name = 'ARRAY_456_%d' % i # will create ARRAY_456_0, ...
    localdevice = cmd('%(cmd)s %(name)s' % dict(cmd=cmd, name=name)) # will merge the command with the name using keywords 
```

如果这不是你要找的东西。我不确定是否理解这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:05:33.713

也许您正在寻找[enumerate()](http://docs.python.org/library/functions.html#enumerate)。

```
cmd_list = ["first", "second", "third"]
for rank, ze_cmd in enumerate(cmd_list, start=1):
      localdevice = cmd("%s ARRAY_456_%d"%(ze_cmd, rank)) 
```

这将生成以下 cmds ：

```
first ARRAY_456_1
second ARRAY_456_2
third ARRAY_456_3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:03:36.953

```
my_list = ["first", "second", "third"] 
```

现在您可以附加更多项目：

```
my_list.append("fourth") 
```

这会将字符串附加`"fourth"`到末尾。我想这就是你想要的，但我不确定。

您当然可以在附加之前格式化字符串：

```
for i in xrange(4):
    my_list.append("array_456_%u" % i) 
```

# javascript - 等待后设置 window.location

> ID：12510259
> 
> 赞同：0
> 
> 时间：2012-09-20T10:00:21.683
> 
> 标签：javascript, jquery, ajax, internet-explorer

我有一个改变的回调函数

```
window.location.href = url; 
```

但是，在检查图像是否存在于不同页面（和不同域）中后调用此回调。我的问题是 IE9 不允许我执行以下操作：

```
 $(testImage)
            .bind("load readystatechange", function (e) {
                if (this.complete || (this.readyState === 'complete' && e.type === 'readystatechange')) {
                    callbackFunction(true);
                }
            })
            .bind("error abort", function () {
                abort();
            })
            .attr("src", testUrl); 
```

但是，IE9 将允许我这样做：

```
callbackFunction(true); 
```

但是因为我想等待并看到我的图像存在，所以我需要上面的工作。（我不想更改 IE 设置）当然，在 Chrome 中一切正常。

有人有什么想法吗？

编辑：我想我应该澄清一下：“当我说 ie9 不会让我这样做时。”我的意思是 ie9 执行回调但里面的代码（更改 url）不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:04:03.230

IE 还支持`load`图像事件，除非您有其他未提及的原因，否则您不必**明确**检查属性。`.readyState`

所以这绝对足够了

```
$( testImage ).on('load', function( e ) {
    callbackFunction( true );
}); 
```

# algorithm - 如何在同一像素组中找到距离另一个像素最远的像素

> ID：12510263
> 
> 赞同：6
> 
> 时间：2012-09-20T10:00:33.733
> 
> 标签：algorithm, pixel, distance, point

“组”是指一组像素，使得每个像素在同一组中至少有一个相邻的像素，该图显示了组的示例。

![组的一个例子](../Images/87d9cfc33c8e2ae9e05956fc6141e3dd.png)

我想找到与指定像素（例如绿色像素）具有最大直线距离的像素。并且连接两个像素的直线（红线）不能离开该组。

我的解决方案是循环遍历度数并模拟从带有度数的绿色像素开始的线条的进度，并查看哪条线行进的距离最远。

```
longestDist = 0
bestDegree = -1
farthestX = -1
farthestY = -1
FOR EACH degree from 0 to 360
    dx=longestDist * cos(degree);
    dy=longestDist * sin(degree);
    IF Point(x+dx , y+dy) does not belong to the group
        Continue with next degree
        //Because it must not be the longest line, so skip it
    END IF
    (farthestX , farthestY) = simulate(x,y,degree)
    d = findDistance(x , y , farthestX , farthestY)
    IF d > longestDist
        longestDist = d
        bestDegree = degree
    END IF
END FOR 
```

这显然不是最好的算法。因此，我在这里寻求帮助。

谢谢你，对我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:13:24.070

我不会使用角度。但我很确定最大的距离总是在集合边缘的两个像素之间，因此我会追踪轮廓：从集合中的任何像素到任何方向，直到到达集合的边缘。然后沿边缘顺时针移动（向外）。以任何像素为起点执行此操作，您将能够找到最大距离。它仍然很贪婪，但我认为它可能会给你一个可供改进的替代起点。

编辑：我刚想到什么：当你有一个 start pixel`s`和 end pixel `e`。在第一次迭代中使用`s`相应的`e`将是相邻的（下一个沿顺时针方向的边缘）。`s`当您沿边缘迭代时，可能会发生这种情况，即和之间的集合没有直线`e`。在这种情况下，这条线会碰到设置边缘的另一部分（像素`p`）。您可以在该像素处继续迭代边缘 ( `e = p`)

编辑2：如果你击中 a`p`你会知道和之间不再有距离`s`，`e`所以在下一次迭代中`s`你可以跳过边缘的整个部分（在`s`和之间`p`）并重新开始`p`。

Edit3：使用上面的方法找到第一个`p`. 将其`p`作为下一步`s`并继续。重复直到你`p`再次达到你的第一个。最大距离将在其中两个之间，`p`除非集合的边缘是凸的，在这种情况下你不会找到`p`.

免责声明：这是未经测试的，只是我头脑中的想法，没有绘制任何图纸来证实我的主张，一切都可能是错误的（即在实施之前自己考虑一下；D）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:11:52.510

搜索像素，而不是坡度。伪代码。

```
bestLength = 0
for each pixel in pixels
  currentLength = findDistance(x, y, pixel.x, pixel.y)
  if currentLength > bestLength
    if goodLine(x, y, pixel.x, pixel.y)
      bestLength = currentLength
      bestX = pixel.x
      bestY = pixel.y
    end
  end
end 
```

您可能希望按 |dx| 降序排列像素。+ |dy| 在那之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:05:24.573

首先，请注意算法中的角度离散化可能取决于网格的大小。如果步长太大，您可能会错过某些单元格，如果太小，您最终会一次又一次地访问同一个单元格。

我建议您枚举该区域中的单元格并单独测试每个单元格的条件。枚举可以使用广度优先或深度优先搜索来完成（我认为后者会更好，因为它可以让人们快速建立下限并进行一些修剪）。

可以保持迄今为止发现的最远点 X，并且对于该区域中的每个新点，检查 (a) 该点是否比目前发现的点更远，以及 (b) 它是否通过穿过的直线连接到原点仅该区域的单元格。如果两个条件都满足，则更新 X，否则继续搜索。如果不满足条件（a），则不必检查条件（b）。

该解决方案的复杂性是`O(N*M)`，其中`N`是区域中的单元数，是区域`M`的较大维度 ( `max(width,height)`)。如果性能至关重要，则可以应用更复杂的启发式方法，但对于合理大小的网格，这应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T18:32:18.747

Treat your region as a polygon instead of a collection of pixels. From this you can get a list of line segments (the edges of your polygon).

Draw a line from your start pixel to each pixel you are checking. The longest line that does not intersect any of the line segments of your polygon indicates your most distant pixel that is reachable by a straight line from your pixel.

There are various optimizations you can make to this and a few edges cases to check, but let me know if you understand the idea before i post those... in particular, do you understand what I mean by treating as a polygon instead of a collection of pixels?

To add, this approach will be significantly faster than any angle based approach or approach that requires "walking" for all but the smallest collections of pixels. You can further optimize because your problem is equivalent to finding the most distant endpoint of a polygon edge that can be reached via an unintersected straight line from your start point. This can be done in O(N^2), where N is the number of edges. Note that N will be much much smaller than the number of pixels, and many of the algorithms proposed that use angles an/or pixel iteration are be going to instead depend on the number of pixels.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T10:49:12.307

使用双重数据结构：

*   一个包含按角度排序的像素。
*   第二个按距离排序（为了快速访问，这还应该包含第一个数据结构的“指针”）。

遍历排序为 1 的角度，并检查线在该区域内的每个像素。一些像素将具有相同的角度，因此您可以从原点沿着线走，直到您离开该区域。您可以消除超出该点的所有像素。此外，如果最大距离增加，则删除所有距离较短的像素。

# objective-c - 如何在Objective C中编写setAutoresizingMask之类的代码

> ID：12510265
> 
> 赞同：1
> 
> 时间：2012-09-20T10:00:45.987
> 
> 标签：objective-c, bitwise-operators, autoresizingmask

当谈到按位操作时，我很天真，所以想知道如何编写 UIView 类的 setAutoresizingMask 方法之类的代码。

我希望能够创建一种方法，允许我传入用 | 分隔的枚举。（管道？）字符。

# sql - 在 CONNECT BY PRIOR 提取信息

> ID：12510271
> 
> 赞同：0
> 
> 时间：2012-09-20T10:01:03.507
> 
> 标签：sql, plsql

我有分层结构的表（n，n_parent，data）：

例如：

*   目录 1 (1,0,null)
    *   子目录 1 (44,1,null)
        *   项目 1 (83,44,a)
        *   项目 2 (98,44,b)
    *   子目录 2 (46,1,null)
        *   第 1 项 (8,46,c)
        *   项目 2 (9,46,d)
*   目录 2 (4,0,null)
    *   子目录 1 (54,4,null)
        *   项目 1 (43,54,e)
        *   项目 2 (48,54,f)
    *   子目录 2 (101,4,null)
        *   项目 1 (19,101,g)
        *   项目 2 (314,101,h)

如果我有 id，我用这个 id 构建项目并且它是父母：例如我有 id：83、98、48、9：

`SELECT distinct name, n, n_parent FROM portalmdo.zre_filter a START WITH N in (83, 98, 48, 9) CONNECT BY PRIOR N_PARENT = N`

```
Directory 1 (1,0,null)    
Subdirectory 1 (44,1,null)  
Item 1 (83,44,a)  
Item 2 (98,44,b)    
Subdirectory 2 (46,1,null)    
Item 2 (9,46,d)    
Directory 2 (4,0,null)    
Subdirectory 1 (54,4,null)    
Item 2 (48,54,f) 
```

（顺序不是重要问题）

我希望将现场数据传输给父母：例如：

```
Directory 1 (1,0,a)    
Subdirectory 1 (44,1,a)  
Item 1 (83,44,a)  
Directory 1 (1,0,b)    
Subdirectory 1 (44,1,b) 
Item 2 (98,44,b)    
Directory 1 (1,0,d)  
Subdirectory 2 (46,1,d)    
Item 2 (9,46,d)    
Directory 2 (4,0,f)    
Subdirectory 1 (54,4,f)    
Item 2 (48,54,f) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:15:50.577

您可以使用[CONNECT_BY_ROOT](http://docs.oracle.com/cd/E11882_01/server.112/e26088/operators004.htm#SQLRF0031) (10g+)：

```
SQL> WITH data AS (
  2     SELECT 'Directory 1' name, 1 n,0 n_p,null dat FROM DUAL
  3     UNION ALL SELECT 'Subdirectory 1', 44,1,null FROM DUAL
  4     UNION ALL SELECT 'Item 1', 83,44,'a' FROM DUAL
  5     UNION ALL SELECT 'Item 2', 98,44,'b' FROM DUAL
  6     UNION ALL SELECT 'Subdirectory 2', 46,1,null FROM DUAL
  7     UNION ALL SELECT 'Item 1', 8,46,'c' FROM DUAL
  8     UNION ALL SELECT 'Item 2', 9,46,'d' FROM DUAL
  9     UNION ALL SELECT 'Directory 2', 4,0,null FROM DUAL
 10     UNION ALL SELECT 'Subdirectory 1', 54,4,null FROM DUAL
 11     UNION ALL SELECT 'Item 1', 43,54,'e' FROM DUAL
 12     UNION ALL SELECT 'Item 2', 48,54,'f' FROM DUAL
 13     UNION ALL SELECT 'Subdirectory 2', 101,4,null FROM DUAL
 14     UNION ALL SELECT 'Item 1', 19,101,'g' FROM DUAL
 15     UNION ALL SELECT 'Item 2', 314,101,'h' FROM DUAL
 16  )
 17  SELECT DISTINCT name, n, n_p, connect_by_root(dat) dat
 18    FROM data a
 19  START WITH N IN (83, 98, 48, 9)
 20  CONNECT BY PRIOR N_P = N;

NAME                    N    N_P DAT
---------------------- -- ------ -------
Item 2                 48     54 f
Item 1                 83     44 a
Item 2                 98     44 b
Subdirectory 1         44      1 b
Subdirectory 1         44      1 a
Item 2                  9     46 d
Directory 1             1      0 b
Subdirectory 2         46      1 d
Directory 1             1      0 d
Directory 2             4      0 f
Subdirectory 1         54      4 f
Directory 1             1      0 a 
```

# css - 我可以在包含背景图像的 html 表格后面放置一个 html img 标签吗？

> ID：12510273
> 
> 赞同：0
> 
> 时间：2012-09-20T10:01:07.880
> 
> 标签：css

正如标题所暗示的，是否可以在包含背景图像的表格后面放置一个 img 标签？

**[这](http://www.hydrocell.co/layout.html)**是一个示例，也是页面源

该表包含背景图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:13:56.597

只需添加`position: relative;`到您的表中，您将获得所需的结果

作为：

```
<table width="100%" border="1" style="position: relative;z-index:2; margin-top:-170px;">
....
</table> 
```

**注意：**使用内联 CSS 不是一个好主意尝试[外部样式表](http://www.w3.org/TR/html4/present/styles.html)

# maxima - Maxima 给出了integrated(exp(x^2)) 的疯狂答案

> ID：12510274
> 
> 赞同：3
> 
> 时间：2012-09-20T10:01:15.887
> 
> 标签：maxima

我正在尝试学习如何使用 Maxima。集成出现问题：

```
(%i) integrate(exp(x^3),x,1,2);
(%o) (gamma_incomplete(1/3,-8)-gamma_incomplete(1/3,-1))/3
(%i) float(%);
(%o) .3333333333333333 (- 715.7985328824436 %i - 413.26647564521807)
(%i) expand(%);
(%o) - 238.59951096081454 %i - 137.75549188173935 
```

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:24:22.503

将 Maxima 的结果与 Wolfram Alpha 进行比较，看起来 Maxima 假设 -x/((-x^3)^(1/3)) = 1。在调试了一段时间后，我无法判断该术语是否最初是结果，它被简化了，或者如果它从未存在过。有了这个术语，并使用立方根的主分支，我得到 275.510983 + (epsilon)*%i 与数值结果一致，即 quad_qags(exp(x^3), x, 1, 2) = > 275.510983。

作为记录，这个积分在函数 INTEGRATE-EXP-SPECIAL 中被处理为 maxima/src/sin.lisp 中的“类型 1a”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:43:02.427

从数学上讲，我认为指数积分的复杂答案没有任何根本性的错误。一般来说，如果你整合 e^(x^n) 你会遇到奇怪的函数，比如不完整的 gamma 函数等，因为答案在常规函数中是不可表达的，所以没有常规的真正解析解。

但是，我认为这里肯定存在一些不准确之处。Mathematica 给出了一个不同的答案，更接近于真实的答案，并且当我要求更准确时，实部似乎趋于零，正如您所期望的那样。

如果您想进行数字积分（听起来像您这样做），您可以使用不同的函数。`integrate`用于分析集成，这就是为什么它给你一个公式而不是一个数字。查找`quad_qags`一些非常聪明的数值积分函数及其朋友。

# visual-studio-2010 - 从 MS 测试中心远程执行测试时部署测试数据

> ID：12510277
> 
> 赞同：0
> 
> 时间：2012-09-20T10:01:21.980
> 
> 标签：visual-studio-2010, automated-tests, microsoft-test-manager

我正在 Visual Studio 2010 (Ultimate) 中开发自动化测试。我可以通过 VS 在本地执行我的测试，并通过 MS 测试中心在测试代理上远程执行我的测试。一切正常。

我现在的问题是我想用我的测试部署测试数据。该测试数据是我正在测试的应用程序要处理的普通图像文件。只要我在本地运行测试，部署这些文件就可以正常工作。我可以在我的 Local.testsettings 文件中使用“部署”部分，也可以在我的代码中使用 DeploymentItems 属性。当然 - 我要部署的文件包含在我的项目文件中。

但是，当我通过测试代理执行测试时 - 它不会部署任何文件。正如我所说，测试本身在本地和远程都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:01:37.150

我最近也面临同样的问题。

听起来你有这样的 DeploymentTest 属性：

`<DeploymentItem @"MyProject.Tests\TestDataSubfolder>\", "OutputDir">`

只需将其更改为：

`<DeploymentItem @"TestDataSubfolder>\", "OutputDir">`

（这意味着删除项目文件夹，因为项目文件夹不会在远程计算机上退出）。

# c - 如何阻止 Eclipse CDT 由于 gcc 特定语法而发出错误？

> ID：12510281
> 
> 赞同：8
> 
> 时间：2012-09-20T10:01:33.220
> 
> 标签：c, eclipse, gcc, eclipse-cdt, gcc-extensions

我正在编写一些使用计算 goto 的代码。`goto *ptr`语法检查器将和的每个实例标记`&&label`为语法错误。有没有办法阻止这一切？

**alk 加法：**

计算的 goto 示例（gcc 扩展）：

```
...

void * pLbl = NULL;

if (<some expression>)
  pLbl = &&lbl1;  /* gcc extension: no, '&&' is not a typo */
else if (<some other expression>)
  pLbl = &&lbl2;  /* gcc extension: no, '&&' is not a typo */

if (pLbl)
  goto * pLbl;  /* gcc extension: goes/jumps to either 'lbl1' or 'lbl2' */

goto lbl0;

lbl1:
  <do some stuff>
goto lbl0;

lbl2:
  <do some other stuff>
goto lbl0;

lbl0:

... 
```

（`eclipse`看到这段代码变黄了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T00:19:55.260

[除了向CDT bugtracker](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=CDT)提交错误之外，别无他法，最好使用解析器的补丁。

# jquery - 使用 jquerymobile 添加内容后出现“刷新”页面的问题

> ID：12510284
> 
> 赞同：0
> 
> 时间：2012-09-20T10:01:52.573
> 
> 标签：jquery, jquery-mobile, jquery-templates

我在将 jQuery Mobile V1.1.0 与 jQuery 模板结合使用时遇到问题，尽管我认为 jQuery 模板集成不会导致任何其他问题，除非是动态添加内容。

jsfiddle 上的页面片段：http: [//jsfiddle.net/4ztwS/10/](http://jsfiddle.net/4ztwS/10/)

如果在上面的链接上，您选择了一个数量，它会通过一个 jQuery 模板填充一个 div。第一个是“成人”，我使用纯 HTML，希望可以通过 jQuery Mobile “构建”。对于第二个“儿童”，我使用了一些 HTML 作为 jQuery Mobile 生成选择框时的外观。第一个问题是它看起来不应该。第二个选项看起来应该，但选择框似乎没有绑定到它周围的元素。所以你可以改变选择，但它不显示。

jQuery Mobile 有一个列表视图的“刷新”选项，但在这种情况下，我只想重建屏幕的一部分（您会看到“Cabana - Sleeps 2”）。

如何让这个页面看起来像我想要的那样？

ps 内容必须通过 AJAX 加载，因此无法预先填充数据然后显示/隐藏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:19:01.057

好吧，好像我找到了解决方案。我读过的所有文章都写了关于`$('select').selectmenu('refresh', true);`，但我真正需要的是`$('select').selectmenu();`没有参数。看起来这个解决方案适用于任何对象。

# pdf - 从 Salesforce 中的触发器/未来类生成 PDF

> ID：12510287
> 
> 赞同：1
> 
> 时间：2012-09-20T10:02:01.217
> 
> 标签：pdf, triggers, pdf-generation, salesforce, apex-code

我必须在批准时生成一份报价单的 PDF。所以，我必须通过触发器来做到这一点。

但是，我无法从触发器访问 VF 页面，因为我正在使用 VF 页面和`renderas="PDF"`页面中格式化内容。

所以，我尝试使用未来的课程来做同样的事情。`pagereference.getContent()`但是，关于or方法的使用还有另一个问题`pagereference.getContentAsPDF()`：这些方法不应该在未来的类中使用。

那么，任何人都可以建议我一些想法来生成pdf并将其附加到报价中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:55:25.360

对我来说，这似乎是解决这个问题的最简单方法。

1.  调用触发器你的 XXPDFGenerator 类添加需要记录
2.  创建一个类 XXPDFGenerator
3.  添加 generatePDF 和 attachPDF 方法
4.  将 html 生成到 generatePDF 方法中
5.  转换为 PDF 并插入附件作为此示例

    ```
    Attachment attachmentPDF = new Attachment();
    attachmentPDF.parentId = record.Id;
    attachmentPDF.Name = record.Name + '.pdf';
    attachmentPDF.body = Blob.toPDF(pdfContent); //This creates the PDF content
    insert attachmentPDF; 
    ```

[关于Cory Cowgill 博客](http://corycowgill.blogspot.com.ar/2012/02/generating-pdf-in-apex-trigger.html)的完整信息

# c# - 将数据添加到数据集中的行？

> ID：12510291
> 
> 赞同：0
> 
> 时间：2012-09-20T10:02:44.633
> 
> 标签：c#, dataset, row

我正在尝试将数据添加到数据集中的一行，但数据总是在新行上？

我需要将数据填充在其列下。`I need something like Ds.Tables[0].Rows[1].add("Item")`

![在此处输入图像描述](../Images/5836cfe5e710b3463cc81f4998a55e02.png)

这就是我插入数据的方式：

```
DataSet ds = new DataSet();
            ds.Tables.Add("Properties");
            //GPS
            ds.Tables[0].Columns.Add(ArrayProperties[0].FormMobiField);
            ds.Tables[0].Rows.Add(ArrayProperties[0].Value);
            //Street Num and Name
            ds.Tables[0].Columns.Add(ArrayProperties[3].FormMobiField);      
            ds.Tables[0].Rows.Add(ArrayProperties[3].Value);
            //Suburb
            ds.Tables[0].Columns.Add(ArrayProperties[6].FormMobiField);
            ds.Tables[0].Rows.Add(ArrayProperties[6].Value);
            //City
            ds.Tables[0].Columns.Add(ArrayProperties[7].FormMobiField);
            ds.Tables[0].Rows.Add(ArrayProperties[7].Value);
            //Province
            ds.Tables[0].Columns.Add(ArrayProperties[8].FormMobiField);
            ds.Tables[0].Rows.Add(ArrayProperties[8].Value);
            //Locality Map
            ds.Tables[0].Columns.Add(ArrayProperties[9].FormMobiField);
            ds.Tables[0].Rows.Add(ArrayProperties[9].Value);
            //Property Type
            ds.Tables[0].Columns.Add(ArrayProperties[10].FormMobiField);
            ds.Tables[0].Rows.Add(ArrayProperties[10].Value); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T10:05:09.247

只需从 DataTable 中获取一个新行，然后将该行添加到表中，使用[DataTable.NewRow](http://msdn.microsoft.com/en-us/library/system.data.datatable.newrow.aspx)方法

```
DataRow dr = ds.Tables[0].NewRow();
dr["Column1"] = "value";
dr["Column2"] = "value";
dr["Column3"] = "value";

ds.Tables[0].Rows.Add(dr); 
```

您在添加每一列之后添加行，您可以首先通过添加所有列来创建数据表的结构，然后您可以使用获取新行，然后您可以将该行`DataTable.NewRow()`添加到您的数据表中。添加所有列后，您还可以尝试：

```
ds.Tables[0].Rows.Add(ArrayProperties[0].Value,ArrayProperties[1].Value,ArrayProperties[2].Value,ArrayProperties[3].Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:11:59.677

Datatable 的列集合与表结构有关。在您的代码中，您混合添加列和填充文件。

您应该首先创建结构（未经测试，可能会出现语法错误）：

```
Dataset ds = new Dataset();
Datatable dt = new Datatable();

dt.columns.add(new Column.add(...));
...
dt.columns.add(new Column.add(...));

ds.Tables.add(dt); 
```

进而：

```
Datarow r = ds.tables[0].NewRow();
r["column1"] = value1;
...
r["columnX"] = valueX;

ds.Tables[0].rows.add(r); 
```

有关详细信息，请参阅此[msdn 文章。](http://msdn.microsoft.com/en-us/library/system.data.datatable.newrow.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:13:45.693

在添加时添加列。要填充行，请执行以下操作。

```
foreach (DataRow row in ds.Tables[0]) // Loop over the rows.
        {
               row[ArrayProperties[i].FormMobiField]=ArrayProperties[0].Value;
               i++;
            } 
```

如果它不起作用，请告诉我，

# objective-c - componentsSeparatedByString 内存泄漏，你能帮帮我吗？

> ID：12510292
> 
> 赞同：-1
> 
> 时间：2012-09-20T10:02:57.953
> 
> 标签：objective-c, crash, memory-leaks

资源创建者：

```
(void)parseNodeAsMap:(XMPPElement*)message
{
 NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

if ([[message name] isEqualToString:@"presence"]) {
   // NSLog(@"presence--%@--%@",[message attributeStringValueForName:@"type"],[message from].resource);
    if ([[message attributeStringValueForName:@"type"] isEqualToString:@"unavailable"]) {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"VedioChatUserStatusNoti" object:[message from].resource userInfo:[NSDictionary dictionaryWithObject:@"0" forKey:@"key"]];
    }else {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"VedioChatUserStatusNoti" object:[message from].resource userInfo:nil];
    }

}else if([[message name] isEqualToString:@"message"]) {

    if ([[message elementForName:@"body"] stringValue].length<1) {

        [[NSNotificationCenter defaultCenter] postNotificationName:@"VedioChatMsgNoti" object:@"...." userInfo:nil];
    }else {
     //   NSLog(@"message--%@",[[message elementForName:@"body"] stringValue]);
        [[NSNotificationCenter defaultCenter] postNotificationName:@"VedioChatMsgNoti" object:[[message elementForName:@"body"] stringValue] userInfo:nil];
    }

}else {

}
message = nil;
[pool drain];
} 
```

并在此使用：`#pragma mark NOTI

```
(void)getChatUserStatus:(NSNotification*)noti{

NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
NSArray *user = [[noti object]componentsSeparatedByString:@"@userid"];
if (user.count<2)
{
    RoomUser _ru = {_ru.p_id = userId,_ru.nickName = [[user objectAtIndex:0] copy],_ru.role = @"0"};
    [_listDic setObject:[NSValue valueWithBytes:&_ru objCType:@encode(RoomUser)] forKey:userId];

    int insertIndex = 0;
    ...
    [_listKeys insertObject:userId atIndex:insertIndex];

    onlineUserNum++;
}else {
    RoomUser _ru = {_ru.p_id = [[user objectAtIndex:1] copy],_ru.nickName = [[user objectAtIndex:0] copy],_ru.role = [[user objectAtIndex:2] copy]};

    if (![noti userInfo]) {
        [_listDic setObject:[NSValue valueWithBytes:&_ru objCType:@encode(RoomUser)] forKey:[user objectAtIndex:1]];

        int insertIndex = 0;
        ...
        [_listKeys insertObject:_ru.p_id atIndex:insertIndex];

        onlineUserNum++;

    }else {

        [_listKeys removeObject:_ru.p_id];
        [_listDic removeObjectForKey:_ru.p_id];
        onlineUserNum--;
    }
}

//设置第一个标题的 内容
[(UIButton*)[titlesView viewWithTag:1] setTitle:[NSString stringWithFormat:@"%@ %d",[_titles objectAtIndex:0],onlineUserNum] forState:UIControlStateNormal];
user = nil;
[pool drain];     

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:31:33.867

您正在泄漏`NSString`对象，`componentsSeparatedByString:`因为您复制了它们：`[[user objectAtIndex:0] copy]`.

当从字典中删除盒装的 RoomUser 时，您必须确保`NSString`正确释放实例。

更好的方法是不要携带 C 结构`RoomUser`，而是将数据放在字典或适当的 Objective-C 对象中。

# c# - 使用 Dapper 将 DateTime 获取为 UTC

> ID：12510299
> 
> 赞同：62
> 
> 时间：2012-09-20T10:03:24.263
> 
> 标签：c#, .net, orm, utc, dapper

我正在使用 Dapper 将我的实体映射到 SQL Server CE。如果我保存一个`DateTime`with `Kind=Utc`，当我读回它时，我会得到一个`DateTime`with `Kind=Unspecified`，这会导致各种问题。

例子：

```
var f = new Foo { Id = 42, ModificationDate = DateTime.UtcNow };
Console.WriteLine("{0} ({1})", f.ModificationDate, f.ModificationDate.Kind);
connection.Execute("insert into Foo(Id, ModificationDate) values(@Id, @ModificationDate)", f);
var f2 = connection.Query<Foo>("select * from Foo where Id = @Id", f).Single();
Console.WriteLine("{0} ({1})", f2.ModificationDate, f2.ModificationDate.Kind); 
```

此代码提供以下输出：

```
20/09/2012 10:04:16 (Utc)
20/09/2012 10:04:16 (Unspecified) 
```

我知道我应该使用`DateTimeOffset`，但不幸的是 SQL CE 不支持这种类型。

有解决方法吗？我可以告诉 Dapper 假设所有日期都有`DateTimeKind.Utc`吗？更一般地说，我有哪些自定义映射的选项？

* * *

编辑：我目前的解决方法是在 Dapper 实现结果之后修补日期，但它有点味道......

```
var results = _connection.Query<Foo>(sql, param).Select(PatchDate);

...

static Foo PatchDate(Foo f)
{
    if (f.ModificationDate.Kind == DateTimeKind.Unspecified)
        f.ModificationDate = DateTime.SpecifyKind(f.ModificationDate, DateTimeKind.Utc);
    return f;
} 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2016-09-27T16:52:06.047

为其他寻求简单修复的人添加此答案。现在可以通过在 Dapper 中添加 SqlMapper.TypeHandler 来实现。

添加此类以将值从 db 转换为类型指定为 UTC 的日期时间。

```
public class DateTimeHandler : SqlMapper.TypeHandler<DateTime>
{
    public override void SetValue(IDbDataParameter parameter, DateTime value)
    {
        parameter.Value = value;
    }

    public override DateTime Parse(object value)
    {
        return DateTime.SpecifyKind((DateTime)value, DateTimeKind.Utc);
    }
} 
```

然后在我的 Web API 的 Global.asax 文件中，我将类型处理程序添加到 dapper。

```
SqlMapper.AddTypeHandler(new DateTimeHandler()); 
```

如果您需要确保始终将日期插入为 UTC，那么您可以在 SetValue 方法中使用：

```
parameter.Value = DateTime.SpecifyKind(value, DateTimeKind.Utc); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-06-13T17:08:48.523

查看了 Dapper 代码。除非我的已经过时，否则对于像 datetime（映射到 DbType.DateTime）这样的值类型，dapper 只是从 IDataReader 对象进行简单的转换。

伪：yield return (DateTime)IDataReader.GetValue(0);

这是一堆通用代码和 lambdas 中 Datetime 的特定情况。

AFAIK，SQL 日期时间从不存储偏移量/时区，因此在您存储和获取的任何日期时间中，这种类型总是会说“未指定”。

所以，为了*干净利落*，你可以触摸精致的内部结构：

这很痛苦，因为您必须接触一个大的 IL 生成方法（DataRow Deserializer）并为 DateTime 放入 if 案例。

或者

只需在 UTC 存在问题的 DateTime 道具上放置一个设置器（这有点反对 POCO，但相对理智）：

```
class Foo
{
    private DateTime _modificationDate;
    public DateTime ModificationDate
    {
        get { return _modificationDate; }
        set { _modificationDate = DateTime.SpecifyKind(value, DateTimeKind.Utc); }
    }
    //Ifs optional? since it's always going to be a UTC date, and any DB call will return unspecified anyways
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-11T16:53:22.363

只是想将我的完整解决方案放在这里，以便将`DateTimeOffset`/`DateTimeOffset?`字段/属性与 MySQL 5.7 数据库（不支持`DbType.DateTimeOffset`）无缝集成 - 基于上面的@matt-jenkins 回答：

```
public static class DapperExtensions
{
    class DateTimeOffsetTypeHandler : SqlMapper.TypeHandler<DateTimeOffset>
    {
        public override void SetValue(IDbDataParameter parameter, DateTimeOffset value)
        {
            switch (parameter.DbType)
            {
                case DbType.DateTime:
                case DbType.DateTime2:
                case DbType.AnsiString: // Seems to be some MySQL type mapping here
                    parameter.Value = value.UtcDateTime;
                    break;
                case DbType.DateTimeOffset:
                    parameter.Value = value;
                    break;
                default:
                    throw new InvalidOperationException("DateTimeOffset must be assigned to a DbType.DateTime SQL field.");
            }
        }

        public override DateTimeOffset Parse(object value)
        {
            switch (value)
            {
                case DateTime time:
                    return new DateTimeOffset(DateTime.SpecifyKind(time, DateTimeKind.Utc), TimeSpan.Zero);
                case DateTimeOffset dto:
                    return dto;
                default:
                    throw new InvalidOperationException("Must be DateTime or DateTimeOffset object to be mapped.");
            }
        }
    }

    private static int DateTimeOffsetMapperInstalled = 0;

    public static void InstallDateTimeOffsetMapper()
    {
        // Assumes SqlMapper.ResetTypeHandlers() is never called.
        if (Interlocked.CompareExchange(ref DateTimeOffsetMapperInstalled, 1, 0) == 0)
        {
            // First remove the default type map between typeof(DateTimeOffset) => DbType.DateTimeOffset (not valid for MySQL)
            SqlMapper.RemoveTypeMap(typeof(DateTimeOffset));
            SqlMapper.RemoveTypeMap(typeof(DateTimeOffset?));

            // This handles nullable value types automatically e.g. DateTimeOffset?
            SqlMapper.AddTypeHandler(typeof(DateTimeOffset), new DateTimeOffsetTypeHandler());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T21:42:03.147

如果您使用源代码（不是 nuget）的 Dapper，您可以调整代码以始终强制使用 UTC 的 DateTimeKind。一个更可配置的选项可能是为 DateTime 属性值创建一个新属性，允许您指定日期时间类型作为 dapper 的提示。Dapper 可以使用此属性查找 DateTime 属性，并在找到时使用它在 ORM 映射期间指定 DateTime 类型。这对于核心 dapper 来说可能是一个不错的功能，因为您不是唯一遇到此问题的人 :)

# javascript - 我应该如何使用图像来触发 Javascript？

> ID：12510301
> 
> 赞同：1
> 
> 时间：2012-09-20T10:03:26.863
> 
> 标签：javascript, html, css, anchor, image

要拥有充当 javascript 触发器的图像，有很多选项：

（**编辑**：使用内联 css 和 javascript 来简化问题）

锚标记中的图像：

```
<a href="#" onclick="myFunc();"><img src="pic.jpg" /></a> 
```

带有属性的 Img 标签：

```
<img style="cursor:pointer" onclick="myFunc();" /> 
```

具有属性的锚标记：

```
<a href="#" onclick="myFunc();" style="background:url('pic.jpg');"></a> 
```

可能还有其他人。有没有（惯例|最佳实践|广泛接受|万无一失）的方式来继续这个？

我想要一个小图像作为一个按钮来运行某些 Javascript 或 AJAX。

顺便说一句，我见过[这个](http://css-tricks.com/examples/ImageReplacement/)，但这不是我要找的，他谈论的是标题元素，而不是链接。

相关：[我应该为 JavaScript 链接使用哪个“href”值，“#”还是“javascript:void(0)”？](https://stackoverflow.com/questions/134845/href-attribute-for-javascript-links-or-javascriptvoid0)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:08:32.190

没有关于如何使用`onclick`事件的约定。

但是你不应该使用内联 javascript。就像我们在 2012 年一样，许多 javascript 框架让您的生活更轻松。

如果您迁移到 javascript 库（例如[jQuery](http://www.jquery.com)），最适合您：

```
<img src="pic.jpg" id="myPicture" />
<script type="text/javascript">
    $(document).ready(function(){
        $('#myPicture').on('click', function(){
            alert('image clicked');
        });
    });
</script> 
```

或纯javascript：

```
<img src="pic.jpg" id="myPicture" />
<script type="text/javascript">
    window.onload = function(){
        document.getElementById('myPicture').onclick = function(){
            alert('image clicked');
        };
    };
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:11:57.407

如果我是你，我会坚持你的第一选择，但会做一些改变

`<a href="javascript:void(0);" onclick="myFunc();"><img src="pic.jpg" border="0" /></a>`

原因如下

*   如果您的 myFunc 失败，href="#" 仍然允许点击
*   javascript:void(0) 不允许点击
*   javascript:void(0) 是跨浏览器
*   javascript:void(0) 仍然允许基本的隐含锚标记行为
*   大多数浏览器都可以识别图像标签上的属性/属性，但某些旧版本的 IE 可能不喜欢它
*   如果您想使用由您决定的背景图像，但这意味着需要额外的 CSS 来控制高度/宽度

此外，如果您使用 jQuery 或其他一些库，那么我建议您通过

`$(document).on('ready, function() { $('#myAnchorId').on('click', myFunc); });`

而不是通过 HTML 道具......以防万一用户关闭了 JavaScript

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T10:06:29.440

如果您只想将图像用作触发器，请使用第二个选项...

如果您要为同一件事使用更多内容，则可以使用跨度...

```
<span onclick="myFunc();" >
    <img src="pic.jpg" style="cursor:pointer" />
    if you click the image, or this text, the javascript function will be triggerd....
</span> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T10:11:06.563

也许与 jQuery ？你的 HTML ：

```
<img id="pic" src="pic.jpg" /> 
```

有了这个 jQuery ：

```
$('#pic').click(function() {
    // Your stuff here
}); 
```

而这个 CSS ：

```
#pic {
    cursor: pointer;
} 
```

内联 css 和 js 从来都不是最好的方法。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T10:10:34.813

使用一个类来识别您的触发对象（无论是锚点还是图像），然后对该对象执行点击处理：

说类名是“clickTrigger”，然后是你的 HTML：

```
<a href="#" style="background:url('pic.jpg');" class="clickTrigger"></a> 
```

或者

```
<a href="#" class="clickTrigger"><img src="pic.jpg" /></a> 
```

或者

```
<img style="cursor:pointer" class="clickTrigger" /> 
```

然后用 javascript/jQuery 附加到点击事件：

Javascript：

```
var element = this.getElementsByClassName('clickTrigger')[0];
element.onclick = function (event) {
    // handler
} 
```

jQuery：

```
$('.clickTrigger').click(function (event) {
    // Handler
}); 
```

# java - Tomcat 6.0 - 错误 404 请求的资源不可用

> ID：12510304
> 
> 赞同：0
> 
> 时间：2012-09-20T10:03:39.847
> 
> 标签：java, servlets, tomcat6

我正在使用 Tomcat Servlet Engine（6.0 版）开发一个 Servlet

我是这个东西的新手，所以我正在网上阅读一些东西。现在我在下面创建我的 servlet 文件夹：

> /var/lib/tomcat6/webapps/ROOT/myapp

在此我创建 WEB-INF 文件夹和类之一。所以我有这个层次结构：

> /var/lib/tomcat6/webapps/ROOT/myapp/WEB-INF/classes

我正在尝试执行这个简单的 servlet：

```
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class TestServlet extends HttpServlet{

    public void doGe(HttpServletRequest request, HttpServletResponse response)
    throws IOException {
        PrintWriter out = response.getWriter();
        out.println("<html>");
        out.println("<body>");
        out.println("<h1>Hello Servlet!</h1>");
        out.println("</body>");
        out.println("</html>"); 
    }
} 
```

编译后我把.class文件，当然在classes目录下，然后我在WEB-INF目录下创建了web.xml文件，这里不是内容：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
 Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<web-app xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   version="2.5"> 

    <description>
      Servlet and JSP Examples.
    </description>
    <display-name>Servlet and JSP Examples</display-name>

    <servlet>
        <servlet-name>TestServlet</servlet-name>
        <servlet-class>TestServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>TestServlet</servlet-name>
        <url-pattern>/test</url-pattern>
    </servlet-mapping>
</web-app> 
```

然后我简单地去：

```
 http://localhost:8080/myapp/test 
```

但我收到 404 错误。

我能做些什么？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:07:08.387

将文件夹从ROOT移动到webapp，文件夹结构应该是

```
/var/lib/tomcat6/webapps/myapp 
```

[文档](http://tomcat.apache.org/tomcat-6.0-doc/appdev/deployment.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:09:44.650

您无需移动 Root 文件夹下的 Web 应用程序项目。保持为：

```
/var/lib/tomcat6/webapps/myapp 
```

另外，对方法签名进行更正`doGet(HttpServletRequest request, HttpServletResponse response) {}`

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
    throws IOException {
        PrintWriter out = response.getWriter();
        out.println("<html>");
        out.println("<body>");
        out.println("<h1>Hello Servlet!</h1>");
        out.println("</body>");
        out.println("</html>"); 
    } 
```

就是这样，它现在应该可以工作了！

# c# - 为什么委托类型的属性不起作用？

> ID：12510307
> 
> 赞同：0
> 
> 时间：2012-09-20T10:03:53.820
> 
> 标签：c#, .net, properties, delegates

有人可以解释为什么这段代码不起作用吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        public delegate void Something(string s);

        public class TestDelegate
        {
            public Something something
            {
                set
                {
                    Console.WriteLine("Registering delegate: {0}", something);
                    something = value;
                    Console.WriteLine("Delegate registered: {0}", something);
                }

                get
                {
                   Console.WriteLine("Get delegate");
                   return something;
                }
            }

            public void doSomething(string s)
            {
                something(s);
            }
        }

        static void Main(string[] args)
        {
            TestDelegate td = new TestDelegate();
            td.something = (string s) => Console.WriteLine(s);
            td.doSomething("test");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T10:08:10.337

您的问题与代表无关。您的财产只是一个无限递归的例子。该属性在访问器中访问自身而不是支持字段。
像这样更改它，它应该可以工作：

```
private Something _something;
public Something something
{
    set
    {
        Console.WriteLine("Registering delegate: {0}", value);
        _something = value;
        Console.WriteLine("Delegate registered: {0}", something);
    }

    get
    {
       Console.WriteLine("Get delegate");
       return _something;
    }
} 
```

# html - 如果页面不活动，html5 通知是否应该工作？

> ID：12510314
> 
> 赞同：0
> 
> 时间：2012-09-20T10:04:14.240
> 
> 标签：html, google-chrome, webkit, notifications

我使用 html5 通知创建了一个小应用程序，但似乎这些通知在某些情况下不起作用：

**案例1**：我留在页面上。通知工作。

**案例 2**：我切换到另一个应用程序（alt+tab）。Chrome 中的 Lst 活动页面是我的应用程序。通知工作。

**案例 3**：我切换到 Chrome 中的另一个选项卡，但没有关闭我的应用程序。在我切换回应用程序之前，不会显示任何通知。

这是正常行为还是我遇到了某种错误？我找不到太多关于它的文档。

PS：在 Centos 6 上运行 Chrome 仅供参考

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:24:32.200

The [Chromium API Specification](http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification) reads that

> If the page which generates a notification was generated is closed, the notification itself will not be closed, but events will not be delivered, as the script execution context is no longer present.

If that doesn't cover it, [this page](http://www.chromium.org/developers/design-documents/desktop-notifications) has more technical detail about how it is implemented in Chromium

# plone - 使用 TAL 语言在 Plone 中按用户查找信息

> ID：12510316
> 
> 赞同：2
> 
> 时间：2012-09-20T10:04:18.843
> 
> 标签：plone, zope

我已经安装了collective.portlet.tal。我的目标是通过这个 portlet 在他自己的文件夹中为每个用户显示他的信息。现在我想展示 Fox 示例：用户名和电子邮件。

默认情况下，我有这个 portlet，它没有显示任何特殊内容：

```
<dl class="portlet portlet${portlet_type_name}"
tal:define="portal_state context/@@plone_portal_state;
            context_state context/@@plone_context_state;">

<dt class="portletHeader">
    <span class="portletTopLeft"></span>
    <span>
       Header
    </span>
    <span class="portletTopRight"></span>
</dt>

<dd class="portletItem odd">
    Body text
</dd>

<dd class="portletFooter">
    <span class="portletBotomLeft"></span>
    <span>
       Footer
    </span>
    <span class="portletBottomRight"></span>
</dd> 
```

我在正文中插入了这一行以获取文件夹的用户名，但它返回访问者的姓名。如果我是管理员，它会显示“admin”，或者如果我是会员，它会显示会员的名字......等等。

```
<p tal:content="user/getUserName"></p> 
```

如何显示该文件夹的创建者？怎么可能获得该文件夹的该用户的电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:17:26.897

您正在寻找`Creator`您的文件夹：

```
<p tal:define="creator context/Creator;
               mtool context/@@plone_tools/membership;
               author python:mtool.getMemberInfo(creator)"
   tal:content="python:author and author['fullname'] or creator">Author name</p> 
```

上面的代码片段查找创建者用户 ID（默认为内容对象的所有者），并使用成员资格工具查找该用户的成员信息对象。然后我们显示用户的全名，或者如果创建者不是 Plone 用户，则只显示用户 ID。

# php - 动态设置 jcrop 的选择（非固定选择）

> ID：12510317
> 
> 赞同：1
> 
> 时间：2012-09-20T10:04:23.353
> 
> 标签：php, jquery, crop, jcrop

我正在使用 jcrop 现在我想做类似这里的事情

```
 jQuery(function(){
            jQuery(".image_container .a-center h2").html("Upload another picture")
            var api;
            jQuery('#cropbox').Jcrop({
            bgOpacity: 0.5,
            bgColor: 'black',
            addClass: 'jcrop-dark',
            aspectRatio: 320/180,
            setSelect:[320,320,180,180],
            onSelect: updateCoords,
            onChange: updateCoords
          },function(){
            api = this;
            api.setOptions({ bgFade: true });
            api.ui.selection.addClass('jcrop-selection');
          });
        }); 
```

它在选择时给出了这种输出![在此处输入图像描述](../Images/485ae534363fc8aee5e7dc574caa90c2.png)

我想要这种选择 ![在此处输入图像描述](../Images/c747eb0182f2888af59271544ea3893d.png)

我应该怎么做才能获得最大的宽度选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-11T11:53:22.347

```
var ratio = 1.2222222;
var jcrop_api = $.Jcrop('#modal-file-crop-image');
jcrop_api.setOptions({ aspectRatio: ratio });
var dim = jcrop_api.getBounds(); 
```

dim 应该保存图像大小的数组

就像 [380,180]

我使用以下内容根据纵横比将裁剪区域居中

```
var $img = $("#modal-file-crop-image");
var w = $img.width();
var h = $img.height();

$img.css({"width": w, "height": h})

var ratio = 1.2222222;
var jcrop_api = $.Jcrop('#modal-file-crop-image');
jcrop_api.setOptions({ aspectRatio: ratio });
var dim = jcrop_api.getBounds();
var x = 0, y = 0, x_ = dim[0], y_ = dim[1];

var x_r = (x_ / ratio) - y_;
var y_r = (y_ / ratio) - x_;

if (x_r > 0) {
    x = x_r / 2;
}
if (y_r > 0) {
    y = y_r / 2;
}

jcrop_api.setSelect([x, y, dim[0], dim[1]]); 
```

在您的情况下，您可能会一直将 y 设置为 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:39:06.323

你不能。

看起来您的主图像文件的尺寸更大，为 320x180。您选择的区域为 320 x 180，比您的实际图像小。

所以在这里你可以做的是。

1.  计算面积并在您的代码中进行设置。为此，根据图像的高度和宽度计算新高度/宽度；以其他参数为主。（例如，对于您的图像，主参数是**宽度**，您可以找到一个基于纵横比和主参数的新高度。）
2.  设置区域坐标。

我认为这将解决您的问题。

# cakephp - CakePHP 抛出未知异常

> ID：12510318
> 
> 赞同：0
> 
> 时间：2012-09-20T10:04:31.730
> 
> 标签：cakephp, exception, cakephp-2.1

在本地成功测试我的应用程序后，我已将其推送到远程服务器以进行进一步测试。但是在那里，在每一页上，我都会收到以下致命错误：`Fatal error: Exception thrown without a stack frame in Unknown on line 0`. 这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:05:08.143

如果代码有错误，那么 apache 的日志中一定有一个条目。此外，如果设置了调试级别，它肯定会给出错误，除非您定义了自己的自定义异常处理程序。那么毕竟它可能是空格吗？

**除非您在下面有其他脚本，否则在 php 页面中没有强制关闭 php 标记。**我曾经为此挣扎了好几天。如果它出现在每个页面中，您可以在默认布局上检查一次，您也可以通过注释默认布局中的每个包含来进行测试，以查看问题是否由应用程序常见的其他脚本引起。

# makefile - 并行化外部 Makefile

> ID：12510320
> 
> 赞同：0
> 
> 时间：2012-09-20T10:04:39.083
> 
> 标签：makefile, multiple-makefiles

我有这个 Makefile

```
framework:
    @$(MAKE) -C $(HIGGSBASESELECTOR) 
    @$(MAKE) -C $(MATRIX4)
    @$(MAKE) -C $(SUBSELECTOR)
    @$(MAKE) -C $(MCSUBSELECTOR)
    @$(MAKE) -C $(MATRIXSUBSELECTOR)
    @$(MAKE) -C $(CHECKSUBSELECTOR)
    ... 
```

如果我跑

```
 make -j framework 
```

它只使用一个进程。重构此 Makfile 以使编译并行化的最佳（和快速）方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:55:06.150

*您的规则按顺序*执行`$(MAKE)`命令，因此您一次只能看到一个进程也就不足为奇了。

 *一种快速而肮脏的方法（如果没有等待这些调用的结果）是

```
framework:
    @$(MAKE) -C $(HIGGSBASESELECTOR) &
    @$(MAKE) -C $(MATRIX4) &
    @$(MAKE) -C $(SUBSELECTOR) &
    @$(MAKE) -C $(MCSUBSELECTOR) &
    @$(MAKE) -C $(MATRIXSUBSELECTOR) &
    @$(MAKE) -C $(CHECKSUBSELECTOR) & 
```

如果这使您的血液变冷（并且应该），您可以这样做：

```
framework: $(HIGGSBASESELECTOR) $(MATRIX4) $(SUBSELECTOR) ...
    do things after the calls

.PHONY: $(HIGGSBASESELECTOR) $(MATRIX4) $(SUBSELECTOR) ...
$(HIGGSBASESELECTOR) $(MATRIX4) $(SUBSELECTOR) ...:
    @$(MAKE) -C $@ 
```*

# c# - 使用 C# 获取 Excel 中的用户定义函数列表

> ID：12510322
> 
> 赞同：2
> 
> 时间：2012-09-20T10:04:51.353
> 
> 标签：c#, excel, vsto

我正在使用 C# 在 VSTO 中编写一个带有一些 UDF 的 Excel 插件。工作簿中安装了其他插件，它们公开了自己的 UDF。我想找出所有用户定义函数的列表，而不是 Excel 附带的那些。有什么办法可以做到吗？

# jquery - Jquery - 在动画结束之前删除悬停

> ID：12510323
> 
> 赞同：0
> 
> 时间：2012-09-20T10:04:52.477
> 
> 标签：jquery, jquery-animate, tipsy

这是代码：

```
 $('.rightside').click(function(){
    if($('#clickForm').is(":visible")) {
       $('#clickForm').hide("slide", { direction: "left" }, 500);
       $('.left_slider').animate({left:"0"}, 500).css('background-image','url(images/leftPanel/gear.png)').attr('title','Open');

       $("#blackbg").hide();
    }
    else
    {
       $('#clickForm').show("slide", { direction: "left" }, 500);
       $('.left_slider').animate({left:"314px"}, 500).css('background-image','url(images/leftPanel/close.png)').attr('title','Close');
        $("#blackbg").show();
    }
 }); 
```

问题是这样的。这是动画前的图片

![动画前](../Images/30de39393d5375aa7cc51f4e508184b3.png)

和动画之后

![后](../Images/aeebd6181a82f394258b4c3e33cc6c38.png)

在我将鼠标至少移动 1px 或单击之前，它会一直保持这种状态。对于工具提示，我正在使用 Tipsy。如果有帮助，我可以自己做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:16:03.963

对于悬停，使用 .animate() 回调在动画后删除悬停事件

jQuery 文档：[http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

例子：

```
$('.left_slider').animate({left:"0"}, 500, function(){
    $(this).css('background-image','url(images/leftPanel/gear.png)').attr('title','Open');
    //Remove your hover events here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:15:27.060

如果其他人遇到同样的问题，请回答我自己的问题：

我所要做的就是添加

$(".tipsy").remove();

就在点击功能之后。

因此，如果您正在使用 jquery 动画并且遇到提示问题，只需添加上面的代码。

关于悬停，我用 jquery 做到了。也许有更简单，更“正确”的方法来做到这一点，但在那之前，这将是：

```
 $('.rightside').click(function(){
    $(".tipsy").remove();
    if($('#clickForm').is(":visible")) {
       $('#clickForm').hide("slide", { direction: "left" }, 500);

       $('.left_slider').animate({left:"0"}, 500).css({'background-image':'url(images/leftPanel/gear.png)',
                     'background-color':'#fff'}).attr('title','Open');

       $("#blackbg").hide();
    }
    else
    {
       $('#clickForm').show("slide", { direction: "left" }, 500);
        $('.left_slider').animate({left:"314px"}, 500).css({'background-image':'url(images/leftPanel/close.png)',
                     'background-color':'#fff'}).attr('title','Close');

       $("#blackbg").show();
    }
 }); 
```

# wordpress - xmlrpc.php?rsd 显示在 google 扩展结果中

> ID：12510329
> 
> 赞同：0
> 
> 时间：2012-09-20T10:05:17.337
> 
> 标签：wordpress, search

我有一个基于 wordpress 的网站，新的 google 显示了这个网页的扩展结果（希望你知道我所说的扩展结果是什么意思）所以有些页面应该像“联系人”、“服务”或“信息”一样存在，但是还有一个不应该出现在结果中：“domain.xx/xmlrpc.php?rsd”。它在结果中显示为“wordpress http://...”，这非常难看。

大约一周前，我试图“降级”（对不起，不知道确切的英文翻译）谷歌网站管理员工具中的页面，但没有效果。实际上，从那时起，它出现在结果中的第二个链接。在它是最后一个之前..

有什么提示可以摆脱这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:23:00.347

第一种（也是推荐的方法）：在 Google 网站管理员工具中，转到`Configuration->Sitelinks`并降级您的 xmlrpc URL。

第二种方式：转到`Optimization`并`Remove URL`在那里输入您的 xmlrpc.php URL。删除 URL 需要一些时间。

第三种方式：通过 robots.txt 文件阻止 Google 访问 xmlrpc URL。

第四种方法：通过 .htaccess 文件阻止 Google 访问 xmlrpc URL。

# .htaccess - .htaccess 使用查询字符串组合保护 url

> ID：12510335
> 
> 赞同：0
> 
> 时间：2012-09-20T10:05:43.077
> 
> 标签：.htaccess, mod-rewrite, apache2

我需要使用 htaccess 保护 Joomla CMS 中的“单一逻辑”url。我在这里找到[.htaccess 代码来保护单个 URL？](https://stackoverflow.com/questions/2670535/htaccess-code-to-protect-a-single-url)

此解决方案适用于特定的 url：

```
RewriteEngine On
RewriteCond %{REQUEST_URI}  ^/index\.php$
RewriteCond %{QUERY_STRING} ^option=com_content&task=view&id=76$
RewriteRule ^(.*)$ /secure.htm 
```

但是，如何确保 url 部分不能被交换或修改，从而绕过安全访问。例如我不想允许访问

```
option=com_content&task=view&id=76&dummy=1 
option=com_content&id=76&task=view 
```

任何一个。

我试过这个，这似乎不起作用：

```
RewriteEngine On
RewriteCond %{REQUEST_URI}  ^/index\.php$
RewriteCond %{QUERY_STRING} option=com_content
RewriteCond %{QUERY_STRING} task=view
RewriteCond %{QUERY_STRING} id=76
RewriteRule ^(.*)$ /secure.htm 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:15:46.827

当我访问以下任何 URL 时，您的规则对我很有效：

*   `http://localhost/index.php?blah=blah&option=com_content&task=view&id=76`
*   `http://localhost/index.php?option=com_content&task=view&id=76&dummy=1`
*   `http://localhost/index.php?option=com_content&id=76&task=view`

我收到的内容是`/secure.htm`

但是，您可以向查询字符串规则添加声音边界：

```
RewriteCond %{QUERY_STRING} (^|&)option=com_content(&|$)
RewriteCond %{QUERY_STRING} (^|&)task=view(&|$)
RewriteCond %{QUERY_STRING} (^|&)id=76(&|$) 
```

这样你就不会匹配到类似的东西`id=761`

# windows - 是否可以使用 Visual Studio 11 模拟器的多个实例来调试多人 Metro 应用程序？

> ID：12510337
> 
> 赞同：2
> 
> 时间：2012-09-20T10:05:44.300
> 
> 标签：windows, microsoft-metro, visual-studio-debugging, multiplayer

我知道为 Windows 手机应用程序执行此操作的解决方案。但在我看来，这必须以其他方式完成。如果有人在这里有任何见解，我会很高兴..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:23:50.570

不可能。您可以想象使用 hyper-v 解决方案并在您的机器上运行多个操作系统，使用远程调试工具连接到它们？

# c# - 将 TIFF 调色板从 8 位更改为 32 位

> ID：12510340
> 
> 赞同：2
> 
> 时间：2012-09-20T10:06:00.267
> 
> 标签：c#, image, tiff

我有一些 TIFF 文件（8 位调色板）。我需要将位深度更改为 32 位。我尝试了下面的代码，但得到一个错误，参数不正确......你能帮我解决它吗？或者也许 some1 能够为我的问题提出一些不同的解决方案。

```
public static class TiffConverter
{
    public static void Convert8To32Bit(string fileName)
    {
        BitmapSource bitmapSource;
        using (Stream imageStreamSource = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read))
        {
            TiffBitmapDecoder decoder = new TiffBitmapDecoder(imageStreamSource, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.Default);
            bitmapSource = decoder.Frames[0];
        }

        using (FileStream stream = new FileStream(fileName, FileMode.OpenOrCreate))
        {
            ImageCodecInfo tiffCodec = ImageCodecInfo.GetImageEncoders().FirstOrDefault(codec => codec.FormatID.Equals(ImageFormat.Tiff.Guid));
            if (tiffCodec != null)
            {
                Image image = BitmapFromSource(bitmapSource);
                EncoderParameters parameters = new EncoderParameters();
                parameters.Param[0] = new EncoderParameter(Encoder.ColorDepth, 32);
                image.Save(stream, tiffCodec, parameters);
            }
        }
    }

    private static Bitmap BitmapFromSource(BitmapSource bitmapSource)
    {
        Bitmap bitmap;
        using (MemoryStream outStream = new MemoryStream())
        {
            BitmapEncoder enc = new BmpBitmapEncoder();
            enc.Frames.Add(BitmapFrame.Create(bitmapSource));
            enc.Save(outStream);
            bitmap = new Bitmap(outStream);
        }
        return bitmap;
    }
} 
```

提前致谢！

**[编辑]**

我注意到错误出现在这一行：

```
image.Save(stream, tiffCodec, parameters); 
```

`ArgumentException occured: Parameter is not valid.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:40:20.760

如果您遇到的错误在线：

```
parameters.Param[0] = new EncoderParameter(Encoder.ColorDepth, 32); 
```

那么问题是编译器无法知道您是指`System.Text.Encoder`还是`System.Drawing.Imaging.Encoder`...

您的代码应如下所示以避免任何歧义：

```
parameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.ColorDepth, 32); 
```

* * *

**编辑：**

这是做同样事情的另一种方法（并且经过测试:)）：

```
Image inputImg = Image.FromFile("input.tif");

var outputImg = new Bitmap(inputImg.Width, inputImg.Height, System.Drawing.Imaging.PixelFormat.Format32bppArgb);
using (var gr = Graphics.FromImage(outputImg))
    gr.DrawImage(inputImg, new Rectangle(0, 0, inputImg.Width, inputImg.Height));

outputImg.Save("output.tif", ImageFormat.Tiff); 
```

# jquery - jquery中的任何水平可折叠拆分器？

> ID：12510344
> 
> 赞同：0
> 
> 时间：2012-09-20T10:06:11.607
> 
> 标签：jquery, jquery-ui, jquery-plugins

是否有任何可折叠的拆分器插件或 UI 小部件是开源的。我可以在这里找到与 jqwidgets 类似的东西吗？

[http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxsplitter/index.htm#demos/jqxsplitter/defaultfunctionality.htm](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxsplitter/index.htm#demos/jqxsplitter/defaultfunctionality.htm)

但可悲的是，它是付费许可证。有什么类似的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:02:36.543

看到那个： http: [//methvin.com/splitter/](http://methvin.com/splitter/)

# java - Java5 FileInputStream 在我获得文件锁定之前失败

> ID：12510348
> 
> 赞同：1
> 
> 时间：2012-09-20T10:06:27.677
> 
> 标签：java, nio, file-locking

我的应用程序（Java5）分布在几个 JVM 中，这些 JVM 从共享存储读取/写入文件（存储由 Windows 管理）。我想使用独占/共享锁进行文件写入/读取，如下所示：

```
 FileOutputStream fos = null;
    FileLock lock = null;
    ObjectOutputStream oos = null;
    try {
        fos = new FileOutputStream(new File("//share/test.dat"));  // HERE IT MAY THROW FileNotFoundException...
        lock = fos.getChannel().lock(); // ... and I won't acquire a lock.
        oos = new ObjectOutputStream(fos);
        oos.writeObject(value);
        return true;
    } catch (Exception e) {
        // Log it.
    } finally {
        // Close locks and I/O streams.
    } 
```

问题：如果 JVM1 当前正在读取文件 test.dat 并且 JVM2 正在尝试写入同一个文件，则 FileNotFoundException（*“该进程无法访问该文件，因为它正在被另一个进程使用”*）将在 JVM2 上抛出“ new FileOutputStream(new File("//share/test.dat"))" 行。似乎是 Catch22 的情况：一方面我想获取锁来获取 I/O 流；另一方面，我需要一个 I/O 流来获取锁。正如我所看到的，与 RandomAccessFile 的情况相同。

有任何想法吗？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:11:04.663

正如您从错误消息中看到的那样，Windows 不会让您做您想做的事情。如果您考虑一下，您可以将 Windows 错误本身视为锁定条件。无论如何，由于打开和锁定之间的时间窗口，您在这里会遇到一个同源问题。Windows 在某种程度上在这里帮了你一个忙。一次。

# mysql - 从 mySql 中的两个列创建日期

> ID：12510351
> 
> 赞同：3
> 
> 时间：2012-09-20T10:06:43.277
> 
> 标签：mysql, sql, date

我的数据库中有一个包含两列的表：月（1-12）和年（yyyy）。

例如，我需要选择两个日期之间的记录

```
select * from Calendar a where SOMEDATE between STARTDATE and ENDDATE. 
```

所以问题是：如何从我拥有的这两列中创建 STARTDATE 和 ENDDATE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:30:10.037

```
...where SOMEDATE between 
STR_TO_DATE(CONCAT_WS('-',STARTYEAR,STARTMONTH,1),'%Y-%m-%d')
and
DATE_SUB(
    STR_TO_DATE(CONCAT_WS('-',ENDYEAR,ENDMONTH + 1,1),'%Y-%m-%d')
    , INTERVAL DAY 1
) 
```

请注意，我们将这两个部分都转换为日期类型，并用于`date_sub`从 中减去一天`ENDMONTH + 1`，因为我们不知道相关月份有多少天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:20:20.420

您可以使用此解决方案从`year`和`month`字段中生成日期-

```
SELECT MAKEDATE(year, 1) + INTERVAL month - 1 MONTH FROM calendar; 
```

将此应用于 WHERE 条件，例如 -

```
SELECT * FROM Calendar a
WHERE
  MAKEDATE(year, 1) + INTERVAL month - 1 MONTH BETWEEN
    @STARDATE - INTERVAL EXTRACT(DAY FROM @STARDATE) - 1 DAY
    AND
    @ENDDATE 
```

但我必须向您询问 STARTDATE 和 ENDDATE 标准。如果 STARTDATE 是 '2012-09-20' 怎么办？查询是否应该返回月份 = 9 的记录？

# php - 从解析的 HTML 中操作和删除 DOM 元素

> ID：12510359
> 
> 赞同：0
> 
> 时间：2012-09-20T10:07:34.347
> 
> 标签：php, html, dom

我是 HTML 和 PHP 的新手。我正在尝试从已解析的 HTML 字符串中删除多个 DOM 元素。

例如：

```
<tbody>
    <tr>
        <td>I'd like to find and remove this text</td>
        <td>&amp; possibly this too</td>
        <td>can you help?</td>
    </tr>
 </tbody> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:11:31.560

`DOMDocument`处理 DOM 操作要好得多（`SimpleXML`仅用于解析）：

```
$dom = new DOMDocument;
$dom->loadHTML($html);
$xpath = new DOMXPath($dom);
$textNodes = $xpath->query('//text()');
foreach ($textNodes as $node) {
   $node->parentNode->removeChild($node);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T10:32:39.107

非常简单，如果我要从 PHP 中的字符串中删除很多东西，我会创建一个要删除的部分数组，遍历它们并从大字符串中一次删除一个。

像

```
$html = "Loads of html blah blah blah blah......";

$array = array(
        "Remove me",
        "and me",
        "remove me too"
        );

foreach($array as $string){
    str_replace($string, '', $html);
} 
```

有关 str_replace 的更多信息，请参见[http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

# android - 如何让我的活动是开始活动？

> ID：12510364
> 
> 赞同：0
> 
> 时间：2012-09-20T10:08:11.903
> 
> 标签：android, android-manifest, zxing

我下载了 zxing 项目，并用一个按钮创建了一个简单的活动。这个简单的活动应该在按下按钮时启动 zxing 项目。现在我的问题是：我希望这个带有按钮的简单活动成为开始活动，我在清单文件中创建了以下标签，如下所示：

开始活动：

并且下载的 zxing 项目有一个总是在开始时启动的活动，它有以下清单文件：

```
<activity android:name=".CaptureActivity"
          android:screenOrientation="landscape"
          android:configChanges="orientation|keyboardHidden"
          android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
          android:windowSoftInputMode="stateAlwaysHidden">
  <intent-filter>
    <action android:name="android.intent.action.MAIN"/>
    <category android:name="android.intent.category.LAUNCHER"/>
  </intent-filter>
  <intent-filter>
    <action android:name="com.google.zxing.client.android.SCAN"/>
    <category android:name="android.intent.category.DEFAULT"/>
  </intent-filter>
  <!-- Allow web apps to launch Barcode Scanner by linking to http://zxing.appspot.com/scan. -->
  <intent-filter>
    <action android:name="android.intent.action.VIEW"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.BROWSABLE"/>
    <data android:scheme="http" android:host="zxing.appspot.com" android:path="/scan"/>
  </intent-filter>
  <!-- We also support a Google Product Search URL. -->
  <intent-filter>
    <action android:name="android.intent.action.VIEW"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.BROWSABLE"/>
    <data android:scheme="http" android:host="www.google.com" android:path="/m/products
    /scan"/>
  </intent-filter>
  <!-- And the UK version. -->
  <intent-filter>
    <action android:name="android.intent.action.VIEW"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.BROWSABLE"/>
    <data android:scheme="http" android:host="www.google.co.uk" android:path="/m
    /products/scan"/>
  </intent-filter>
</activity> 
```

将我的活动更改为启动器后的 Logcat 输出：

```
09-20 12:39:57.527: E/AndroidRuntime(22519): FATAL EXCEPTION: main
09-20 12:39:57.527: E/AndroidRuntime(22519): java.lang.RuntimeException: Unable to 
resume activity 
{com.google.zxing.client.android/com.google.zxing.client.android.Test}: 
java.lang.NullPointerException
09-20 12:39:57.527: E/AndroidRuntime(22519):    at     
android.app.ActivityThread.performResumeActivity(ActivityThread.java:2456)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at 
android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2484)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at 
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1998)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at 
android.app.ActivityThread.access$600(ActivityThread.java:127)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at 
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at 
android.os.Handler.dispatchMessage(Handler.java:99)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at 
android.os.Looper.loop(Looper.java:137)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at 
android.app.ActivityThread.main(ActivityThread.java:4507)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at 
java.lang.reflect.Method.invokeNative(Native Method)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at  
java.lang.reflect.Method.invoke(Method.java:511)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at   
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at 
dalvik.system.NativeStart.main(Native Method)
09-20 12:39:57.527: E/AndroidRuntime(22519): Caused by: java.lang.NullPointerException
09-20 12:39:57.527: E/AndroidRuntime(22519):    at   
com.google.zxing.client.android.CaptureActivity.onResume(CaptureActivity.java:178)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at   
android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1157)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at  
android.app.Activity.performResume(Activity.java:4539)
09-20 12:39:57.527: E/AndroidRuntime(22519):    at   
android.app.ActivityThread.performResumeActivity(ActivityThread.java:2446) 
```

我只想知道如何使我创建的简单活动成为开始活动。也就是说，简单activity的标签在zxing项目的manifest文件中应该放在哪里呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:13:40.897

你所要做的就是改变：

```
<activity android:name="Leeder" 
```

到：

```
<activity android:name="LeederTitleScreen" 
```

如果您希望您的标题屏幕通过 startActivity() 启动游戏，您还需要在清单中声明您的 Leeder 活动。

编辑：是的，您需要该部分。它告诉系统您的活动将响应哪些隐式意图。所以在你的清单中，意图过滤器告诉系统它将响应 android.intent.category.LAUNCHER 意图，这是 Android 在启动应用程序时调度的内容（即它告诉 Android 在应用程序启动时启动 Activity ）。

这是简要说明：http: [//developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:16:08.107

你的问题很简单。

您只需要从清单文件中的捕获活动中删除意图过滤器，并将其放入您的活动中，就像您已经在做的那样。因为启动器活动应该是一个项目，所以如果你想用你的活动启动应用程序，那么你应该将你的类作为带有意图过滤器的清单文件中的启动器活动。

然后它将从您的活动开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:20:57.820

像这样简单使用 LAUNCHER

```
 <activity
            android:name=".YourActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />    
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T10:22:29.060

我想你应该删除

```
<intent-filter>
    <action android:name="android.intent.action.MAIN"/>
    <category android:name="android.intent.category.LAUNCHER"/>
  </intent-filter> 
```

从`CaptureActivity`清单文件中。并简单地添加

```
<activity
        android:name=".Test"
        android:screenOrientation="portrait"
        android:configChanges = "keyboardHidden|orientation"
        android:label="@string/app_name01" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

在您显示的代码部分之后。我没试过。让我知道它是否有效？

# unit-testing - 如何为 NUnit C++/CLI 测试设置类别属性？

> ID：12510366
> 
> 赞同：1
> 
> 时间：2012-09-20T10:08:16.537
> 
> 标签：unit-testing, c++-cli, nunit, categories

我正在尝试设置一个类别，以便我可以在我们的构建服务器上排除硬件测试：

```
namespace MyNamespace
{
    using namespace NUnit::Framework;

    [TestFixture]
    [Category("RequiresHardware")]
    public ref class UnitTest_SomeHardwareTests
    {
        ...
    };
} 
```

...但是当我尝试使用类别时出现错误：

```
1>c:\projects\testing\UnitTest_MainSystem.h(14) : error C2872: 'CategoryAttribute' : ambiguous symbol
1>        could be 'c:\program files (x86)\nunit 2.5.9\bin\net-2.0\framework\nunit.framework.dll : NUnit::Framework::CategoryAttribute'
1>        or       'c:\windows\microsoft.net\framework\v2.0.50727\system.dll : System::ComponentModel::CategoryAttribute' 
```

我如何告诉它使用 NUnit？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:57:14.200

以下两种方法对我有用：

或者，在属性规范中明确指出完全限定的属性名称，即

```
[NUnit::Framework::Category("RequiresHardware")] 
```

或者，添加一个`using`声明以准确指明`CategoryAttribute`您打算使用哪个：

```
using NUnit::Framework::CategoryAttribute; 
```

# c# - 如何在 SQL Server 2008 中存储和检索 .pdf、.exe 文件

> ID：12510368
> 
> 赞同：2
> 
> 时间：2012-09-20T10:08:26.300
> 
> 标签：c#, sql-server, database, visual-studio-2010

我目前正在开发一个 Windows Forms 应用程序（C#，VS 2010），我需要创建功能，使用户能够将文件上传`.pdf`到`.exe`SQL Server 2008 数据库并下载回来。

我遇到的问题是从数据库下载的文件总是损坏（`.txt`文件除外），即使它们大小相同。并且我已经使用`varbinary(MAX)`文件类型来将数据存储在数据库中。

谁能给我看一些如何做到这一点的示例代码？

PS：我研究了一个多星期，但仍然找不到解决我的问题的方法，有人可以帮忙吗？任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:37:31.363

在下面的示例中，做了一些假设：

1.  我正在使用[Dapper](https://code.google.com/p/dapper-dot-net/)进行数据库访问。它扩展了**任何** `IDbConnection`对象。
2.  我在数据库中有一个这样定义的表`CREATE TABLE Data (Id INT IDENTITY(1, 1) PRIMARY KEY, Data VARBINARY(MAX))`。
3.  [这](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)是文档`ReadAllBytes`

因此，很明显，由于您没有提供围绕表结构的任何内容，您将不得不更改此代码以满足您的需求，但这会让您开始。

## 写它

```
this.connection.Open();

try
{
    var parameters = new
        {
            Data = File.ReadAllBytes(...);
        };
    return connection.Execute("INSERT INTO Data (Data) VALUES (@Data)", parameters);
}
finally
{
    this.connection.Close();
} 
```

## 阅读它

```
this.connection.Open();

try
{
    var parameters = new { Id = 1 };
    return connection.Query(
        "SELECT Data FROM dbo.Data WHERE Id = @Id", parameters)
        .Select(q => q.Data as byte[])
        .Single();
}
finally
{
    this.connection.Close();
} 
```

# php - Soap 将 PDO 对象作为 stdClass 对象返回

> ID：12510370
> 
> 赞同：0
> 
> 时间：2012-09-20T10:08:30.883
> 
> 标签：php, soap, pdo, wsdl

我正在使用 Web 服务（使用 SOAP 和 WSDL）连接到数据库（PDO 连接）和运行查询。我希望 PDO 对象在整个应用程序中保持全局以执行查询。但是在数据库连接后发送 PDO 对象时，我得到的 SOAP 响应是 stdClass 对象而不是 PDO 对象。如何获取 PDO 对象作为肥皂响应？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:13:04.167

您不能将肥皂对象作为 PDO 对象。SOAP 是一种基于 XML 的协议，当 PHP 解析 XML 时，它会创建 stdClass。

如果要将 stdClass '转换'为 PDO 对象，则必须编写自己的代码。

# java - 获取 - 不创建 - 一个已经用 java 编写的 Excel 可写工作簿

> ID：12510374
> 
> 赞同：1
> 
> 时间：2012-09-20T10:08:36.677
> 
> 标签：java, excel, jxl

我使用创建了一个新的 Excel 工作簿

```
WritableWorkbook workbook = Workbook.createWorkbook(file); 
```

然后我写了它并关闭了。现在我想通过文件名获取该工作簿以**写入**- 而不是只读 - 一些新数据。我发现我可以通过

```
Workbook workbook     = Workbook.getWorkbook(file). 
```

但它是只读的。我想要的是得到——而不是创造——一个已经写好的可写工作簿。

# node.js - node.js 中的 httpServer 服务于三个.js

> ID：12510375
> 
> 赞同：3
> 
> 时间：2012-09-20T10:08:47.910
> 
> 标签：node.js, three.js

[https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally](https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally)建议本地服务器提供three.js 示例。python SimpleHTTPServer 对我来说很好，除了我需要在 three.js 存储库克隆中的**示例目录上方的目录中运行它。**

现在我尝试在 node.js 中使用 httpServer 提供相同的示例。我可以使用 SimpleHTTPServer 的节点版本之一，但我需要一个 httpServer 对象来通过 socket.io 将数据从服务器传递到 webgl 浏览器示例。所以我拿了 socket.io 的例子，并尝试使用上面**示例**目录中的节点运行以下**server.js**。

 **```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(8080);

function handler (req, res) {
  fs.readFile(__dirname + '/examples/webgl_interactive_voxelpainter.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

Net 是在 127.0.0.1:8080 和节点上，我看不到three.js 示例。即使我删除了对 socket.io 的所有引用，该代码也不起作用，这表明它与 html 有关。

1.  我错过了什么？正在正确读取 html 文件，因为我没有收到回调错误。

2.  我注意到 python 服务器将目录列为浏览器中的 html 链接。我单击**示例**以查看 html 文件，然后单击 html 文件，它工作正常。所以我尝试运行'node server.js'一个目录级别，几乎所有正斜杠和反斜杠的组合，根目录引用，......无济于事。

3.  我没有挂断纯httpServer。如果 express 或其他东西适用于 socket.io 和 three.js，我会登上那列火车。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:14:13.310

使用连接框架，让您的工作更轻松。

```
var connect = require('connect');

var app = connect()
   .use(connect.static('<your directory>'))
   .use(function(req, res){
     res.end();
   })
   .listen(8080); 
```

[http://www.senchalabs.org/connect/](http://www.senchalabs.org/connect/)

[https://github.com/senchalabs/connect](https://github.com/senchalabs/connect)**

# iphone - 播放电影停止 avcapturesession 录制

> ID：12510376
> 
> 赞同：1
> 
> 时间：2012-09-20T10:08:47.837
> 
> 标签：iphone, ios, mpmovieplayercontroller, avcapturesession

我有一个 iOS 应用程序，可以在后台录制来自前置摄像头的视频，并且运行良好。但现在我正在尝试同时播放一个短的 mp4，并且使用 MPMoviePlayerController 的播放会停止捕获会话。

我尝试了 AVPlayer，但结果相同。我还设置了 [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:nil]; 仍然没有运气。有没有人遇到并解决了同样的问题。感谢您的任何建议。

使用 ios5 SDK。

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UIButton *recButton=[[UIButton alloc] initWithFrame:CGRectMake(10,200, 200,40)] ;
    recButton.backgroundColor = [UIColor blackColor];
    [recButton addTarget:self action:@selector(startRecording) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:recButton];
    isRecording=NO;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

-(void) viewWillAppear:(BOOL)animated
{
    self.navigationController.navigationBarHidden = YES;
}

-(void) viewWillDisappear:(BOOL)animated
{
        self.navigationController.navigationBarHidden = NO;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation == UIInterfaceOrientationPortrait);
    } else {
        return YES;
    }
}

#pragma mark video playing
-(void) startRecording
{
    if (isRecording) {
        [self stopVideoRecording];
        isRecording=NO;
    }
    else
    {
        [self initCaptureSession];
        [self startVideoRecording];
        isRecording=YES;
    }

    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                         pathForResource:@"new"
                                         ofType:@"mov"]];
    [self playMovieAtURL:url];
}

-(void) playMovieAtURL: (NSURL*) theURL {

    player =
    [[MPMoviePlayerController alloc] initWithContentURL: theURL ];
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:nil];

    player.scalingMode = MPMovieScalingModeAspectFill;
    player.controlStyle = MPMovieControlStyleNone;
    [player prepareToPlay];
    // Register for the playback finished notification
    [[NSNotificationCenter defaultCenter]
     addObserver: self
     selector: @selector(myMovieFinishedCallback:)
     name: MPMoviePlayerPlaybackDidFinishNotification
     object: player];
    [player.view setFrame: self.view.bounds];
    [self.view addSubview:player.view];
    // Movie playback is asynchronous, so this method returns immediately.
    [player play];
}

// When the movie is done, release the controller.
-(void) myMovieFinishedCallback: (NSNotification*) aNotification
{
    MPMoviePlayerController* theMovie = [aNotification object];

    [[NSNotificationCenter defaultCenter]
     removeObserver: self
     name: MPMoviePlayerPlaybackDidFinishNotification
     object: theMovie];
    [player.view removeFromSuperview];
    [self stopVideoRecording];
}

#pragma mark -

#pragma mark recording

-(void) initCaptureSession
{
    NSLog(@"Setting up capture session");
    captureSession = [[AVCaptureSession alloc] init];
    //----- ADD INPUTS -----
    NSLog(@"Adding video input");

    //ADD VIDEO INPUT
    AVCaptureDevice *VideoDevice =  [self frontFacingCameraIfAvailable ];

    //[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    if (VideoDevice)
    {
        NSError *error;
        videoInputDevice = [AVCaptureDeviceInput deviceInputWithDevice:VideoDevice error:&error];
        if (!error)
        {
            if ([captureSession canAddInput:videoInputDevice])
                [captureSession addInput:videoInputDevice];
            else
                NSLog(@"Couldn't add video input");
        }
        else
        {
            NSLog(@"Couldn't create video input");
        }
    }
    else
    {
        NSLog(@"Couldn't create video capture device");
    }

    //ADD AUDIO INPUT
    NSLog(@"Adding audio input");
    AVCaptureDevice *audioCaptureDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];
    NSError *error = nil;
    AVCaptureDeviceInput *audioInput = [AVCaptureDeviceInput deviceInputWithDevice:audioCaptureDevice error:&error];
    if (audioInput)
    {

        [captureSession addInput:audioInput];
    }

    //----- ADD OUTPUTS ---
    //ADD MOVIE FILE OUTPUT
    NSLog(@"Adding movie file output");
    movieFileOutput = [[AVCaptureMovieFileOutput alloc] init];

//  Float64 TotalSeconds = 60;          //Total seconds
//  int32_t preferredTimeScale = 30;    //Frames per second
//  CMTime maxDuration = CMTimeMakeWithSeconds(TotalSeconds, preferredTimeScale);   //<<SET MAX DURATION
//  movieFileOutput.maxRecordedDuration = maxDuration;

    movieFileOutput.minFreeDiskSpaceLimit = 1024 * 1024;    //<<SET MIN FREE SPACE IN BYTES FOR RECORDING TO CONTINUE ON A VOLUME

    if ([captureSession canAddOutput:movieFileOutput])
        [captureSession addOutput:movieFileOutput];

    //SET THE CONNECTION PROPERTIES (output properties)
    [self CameraSetOutputProperties];           //(We call a method as it also has to be done after changing camera)

    //----- SET THE IMAGE QUALITY / RESOLUTION -----
    //Options:
    //  AVCaptureSessionPresetHigh - Highest recording quality (varies per device)
    //  AVCaptureSessionPresetMedium - Suitable for WiFi sharing (actual values may change)
    //  AVCaptureSessionPresetLow - Suitable for 3G sharing (actual values may change)
    //  AVCaptureSessionPreset640x480 - 640x480 VGA (check its supported before setting it)
    //  AVCaptureSessionPreset1280x720 - 1280x720 720p HD (check its supported before setting it)
    //  AVCaptureSessionPresetPhoto - Full photo resolution (not supported for video output)
    NSLog(@"Setting image quality");
    [captureSession setSessionPreset:AVCaptureSessionPresetMedium];
    if ([captureSession canSetSessionPreset:AVCaptureSessionPreset640x480])     //Check size based configs are supported before setting them
        [captureSession setSessionPreset:AVCaptureSessionPreset640x480];
    //----- START THE CAPTURE SESSION RUNNING -----
    [captureSession startRunning];
}

//********** CAMERA SET OUTPUT PROPERTIES **********
- (void) CameraSetOutputProperties
{
    AVCaptureConnection *CaptureConnection=nil;
    //SET THE CONNECTION PROPERTIES (output properties)
    NSComparisonResult order = [[UIDevice currentDevice].systemVersion compare: @"5.0.0" options: NSNumericSearch];
    if (order == NSOrderedSame || order == NSOrderedDescending) {
        // OS version >= 5.0.0
        CaptureConnection = [movieFileOutput connectionWithMediaType:AVMediaTypeVideo];
//        if (CaptureConnection.supportsVideoMinFrameDuration)
//            CaptureConnection.videoMinFrameDuration = CMTimeMake(1, CAPTURE_FRAMES_PER_SECOND);
//        if (CaptureConnection.supportsVideoMaxFrameDuration)
//            CaptureConnection.videoMaxFrameDuration = CMTimeMake(1, CAPTURE_FRAMES_PER_SECOND);
//        if (CaptureConnection.supportsVideoMinFrameDuration)
//        {
//           // CMTimeShow(CaptureConnection.videoMinFrameDuration);
//           // CMTimeShow(CaptureConnection.videoMaxFrameDuration);
//        }
    } else {
        // OS version < 5.0.0
        CaptureConnection = [self connectionWithMediaType:AVMediaTypeVideo fromConnections:[movieFileOutput connections]];

    }

    //Set landscape (if required)
    if ([CaptureConnection isVideoOrientationSupported])
    {
        AVCaptureVideoOrientation orientation =  AVCaptureVideoOrientationPortrait;// AVCaptureVideoOrientationLandscapeRight;      //<<<<<SET VIDEO ORIENTATION IF LANDSCAPE
        [CaptureConnection setVideoOrientation:orientation];
    }

    //Set frame rate (if requried)
    //CMTimeShow(CaptureConnection.videoMinFrameDuration);
    //CMTimeShow(CaptureConnection.videoMaxFrameDuration);

}
- (void) startVideoRecording
{
        //Create temporary URL to record to
        NSString *outputPath = [[NSString alloc] initWithFormat:@"%@%@", NSTemporaryDirectory(), @"output.mov"];
        NSURL *outputURL = [[NSURL alloc] initFileURLWithPath:outputPath];
        NSFileManager *fileManager = [NSFileManager defaultManager];
        if ([fileManager fileExistsAtPath:outputPath])
        {
            NSError *error;
            if ([fileManager removeItemAtPath:outputPath error:&error] == NO)
            {
                //Error - handle if requried
                NSLog(@"file remove error");
            }
        }
        //Start recording
        [movieFileOutput startRecordingToOutputFileURL:outputURL recordingDelegate:self];

}

-(void) stopVideoRecording
{
    [movieFileOutput stopRecording];

}
//********** DID FINISH RECORDING TO OUTPUT FILE AT URL **********/
- (void)captureOutput:(AVCaptureFileOutput *)captureOutput
didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL
      fromConnections:(NSArray *)connections
                error:(NSError *)error
{

    NSLog(@"didFinishRecordingToOutputFileAtURL - enter");

    BOOL RecordedSuccessfully = YES;
    if ([error code] != noErr)
    {
        // A problem occurred: Find out if the recording was successful.
        id value = [[error userInfo] objectForKey:AVErrorRecordingSuccessfullyFinishedKey];
        if (value)
        {
            RecordedSuccessfully = [value boolValue];
        }
    }
    if (RecordedSuccessfully)
    {
        //----- RECORDED SUCESSFULLY -----
        NSLog(@"didFinishRecordingToOutputFileAtURL - success");
        ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
        if ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:outputFileURL])
        {
            [library writeVideoAtPathToSavedPhotosAlbum:outputFileURL
                                        completionBlock:^(NSURL *assetURL, NSError *error)
             {
                 if (error)
                 {
                     NSLog(@"File save error");
                 }
                 else
                 {
                     recordedVideoURL=assetURL;
                 }
             }];
        }
        else {

            NSString *assetURL=[self copyFileToDocuments:outputFileURL];
            if(assetURL!=nil)
            {
                recordedVideoURL=[NSURL URLWithString:assetURL];
            }
        }
    }
}

- (NSString*) copyFileToDocuments:(NSURL *)fileURL
{
    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy-MM-dd_HH-mm-ss"];
    NSString *destinationPath = [documentsDirectory stringByAppendingFormat:@"/output_%@.mov", [dateFormatter stringFromDate:[NSDate date]]];
    NSError *error;
    if (![[NSFileManager defaultManager] copyItemAtURL:fileURL toURL:[NSURL fileURLWithPath:destinationPath] error:&error]) {
        NSLog(@"File save error %@", [error localizedDescription]);
        return nil;

    }
    return destinationPath;
}

- (AVCaptureConnection *)connectionWithMediaType:(NSString *)mediaType fromConnections:(NSArray *)connections
{
    for ( AVCaptureConnection *connection in connections ) {
        for ( AVCaptureInputPort *port in [connection inputPorts] ) {
            if ( [[port mediaType] isEqual:mediaType] ) {
                return connection;
            }
        }
    }
    return nil;
}

- (AVCaptureDevice *)frontFacingCameraIfAvailable
{
    //  look at all the video devices and get the first one that's on the front
    NSArray *videoDevices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
    AVCaptureDevice *captureDevice = nil;
    for (AVCaptureDevice *device in videoDevices)
    {
        if (device.position == AVCaptureDevicePositionFront)
        {
            captureDevice = device;
            break;
        }
    }

    //  couldn't find one on the front, so just get the default video device.
    if ( ! captureDevice)
    {
        captureDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    }

    return captureDevice;
}
#pragma mark -

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:39:11.767

我也有这个问题，不知道怎么解决，但是我知道问题出在这里：

```
[captureSession addInput:audioInput]; 
```

如果你删除这行代码，它会正常工作，我认为这是音频混合或一些音频问题。

我还在寻找答案。

我在这里找到了答案：[答案](https://stackoverflow.com/a/11041542/1297795)，它有效！

但你记得添加`AudioToolbox.framework`，也许对你有帮助。

# android - Android评论不可见？

> ID：12510377
> 
> 赞同：3
> 
> 时间：2012-09-20T10:08:52.060
> 
> 标签：android, google-play

我收到了 2 条评论，只能在开发者控制台中看到它们。相应的评分在 Google Play 中可见，但评论不可见。我浏览了网页底部下拉菜单中提供的所有语言，但找不到它们。为什么是这样？

# google-app-engine - 如何在 Google App Engine 中部署 frascati 应用程序？

> ID：12510379
> 
> 赞同：0
> 
> 时间：2012-09-20T10:09:09.943
> 
> 标签：google-app-engine, war

我已经在 frascati platfrom 上完成了 hello-world，并从 cmd 运行它。

我还为 Google App Engine 完成了 hello-world，部署并运行了它。

但是如何在 GAE 中部署 frascati 应用程序？

如何将整个 frascati 平台与应用程序打包为 WAR？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:48:00.303

也许这个？

[http://websvn.ow2.org/filedetails.php?repname=frascati&path=%2Ftrunk%2Fexamples%2Ffrascati-in-the-cloud%2FGoogle+App+Engine%2FREADME.txt](http://websvn.ow2.org/filedetails.php?repname=frascati&path=%2Ftrunk%2Fexamples%2Ffrascati-in-the-cloud%2FGoogle+App+Engine%2FREADME.txt)

$ mvn 全新安装

$ cp jars/* 目标/frascati-gae-1.5-SNAPSHOT/WEB-INF/lib/

$ /appengine-java-sdk-1.5.4/bin/appcfg.sh 更新目标/frascati-gae-1.5-SNAPSHOT

# c - 将结构传递给函数，是否使用指针

> ID：12510381
> 
> 赞同：1
> 
> 时间：2012-09-20T10:09:16.630
> 
> 标签：c, pointers, struct

我试图在 c 中实现一个简单的 BigNumber 包，它可以执行算术运算。但是，我卡住了。我在 c 方面相当新，所以我不确定我是否正确使用指针和引用。

到目前为止，这是我的代码：

```
#define MAXPARTS 60

struct BigNumber
{
    int parts[MAXPARTS];
};

typedef struct BigNumber BigNumber;

BigNumber newBigNumber()
{
    BigNumber bi;
    int i;
    for(i = 0; i < MAXPARTS; i++)
    {
        bi.parts[i] = 0;
    }
    return bi;
}

void setPartTo(BigNumber *bigNumber, int i, int value)
{
    (*bigNumber).parts[i] = value;
}

int getPart(BigNumber bigNumber, int i, int value)
{
    return bigNumber.parts[i];
}

BigNumber add(BigNumber a, BigNumber b)
{
    int carrier = 0;
    BigNumber *result = &newBigNumber();
    int i;
    for(i = 0; i < MAXPARTS; i++)
    {
        setPartTo(result, i, getPart(a, i)+getPart(b, i)+carrier);
    }
    return result;
} 
```

我在 add 函数的 setPartTo 行收到错误。它说它需要一个 struct BigNumber * 但得到一个 BigNumber。我一直在尝试更改结果之前的内容，在看起来合理的地方添加 & 和删除 *，但到目前为止，我还没有让这件事起作用。有人能指出它有什么问题吗？据我所知，我传递了一个指向函数 setPartTo() 的指针，但也许我没有。我还认为不将指向结构 BigNumber 的指针传递给函数 getPart 是有意义的，因为它不会更改对象，但也许这也是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:22:39.203

这个：

```
setPartTo(result, i, getPart(a, i)+getPart(b, i)+carrier); 
```

不正确，因为只有两个参数被传递给`getPart()`，它需要三个参数：

```
int getPart(BigNumber bigNumber, int i, int value) 
```

除了问题中发布的错误之外，编译器还会发出其他错误。

此外，正如[Graham Borland](https://stackoverflow.com/users/385478/graham-borland)已经提到的，您需要存储的返回值`newBigNumber()`：

```
BigNumber result = newBigNumber(); 
```

然后将结果的地址 , 传递`&result`给`setPartTo()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:16:37.473

你的代码：

```
void setPartTo(BigNumber *bigNumber, int i, int value)
{
   (*bigNumber).parts[i] = value;
} 
```

这需要一个指向 a 的指针`BigNumber`，这可能会使其难以使用，因为您倾向于使用按值传递。你可以写一个这样的版本，而不是：

```
BigNumber setPartTo(BigNumber bigNumber, int i, int value)
{
  bigNumber.parts[i] = value;
  return bigNumber;
} 
```

您可能会发现在性能方面，最好避免按值传递大型结构。另一方面，您的编译器也可能会发现并为您优化它。如果您完全担心这方面，您当然应该阅读生成的代码，并分析/测量性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T10:19:17.530

问题在这里：

```
BigNumber *result = &newBigNumber(); 
```

`newBigNumber()`按值生成结构，你不能这样取它的地址。您需要将结构分配给一个变量，然后在需要时获取它的地址。

```
BigNumber result = newBigNumber(); 
```

然后通过`&result`而不是`result`在您调用时传递`setPartTo()`。

# jsf - 查看 /page.jsf 无法恢复

> ID：12510383
> 
> 赞同：7
> 
> 时间：2012-09-20T10:09:22.090
> 
> 标签：jsf, jsf-2, session-timeout

我有我无法解决的问题。当我在页面空闲例如 10 分钟后刷新打开的 JSF 页面时，我收到以下错误消息：

```
serverError: class javax.faces.application.ViewExpiredException viewId:/page.jsf - View /page.jsf could not be restored. 
```

如何增加 JSF 查看时间？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-20T10:42:04.547

您可以像这样在 web.xml 中将会话超时参数设置为 45 分钟

```
<session-config> 
   <session-timeout>45</session-timeout> 
</session-config> 
```

您还可以通过将以下代码添加到 web.xml 来轻松地在单独的页面中处理此异常

```
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/exception/sessionexpired.xhtml</location>
</error-page> 
```

# php - mysql_fetch_assoc() 错误

> ID：12510384
> 
> 赞同：-1
> 
> 时间：2012-09-20T10:09:22.737
> 
> 标签：php, mysql

> **可能重复：**
> [在 PHP 中使用 mysql_fetch_assoc 时出现警告](https://stackoverflow.com/questions/169520/warning-when-using-mysql-fetch-assoc-in-php)

我在使用以下代码时遇到问题，我是遇到此错误的新手这里是代码

```
session_start();
$uname=$_SESSION['login'];

$host="localhost";
$username="root";
$password="";
$db_name="sampledb";
$tbl_name="tblsched";
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$sql = "SELECT * FROM tblteacher WHERE teacherName=$uname";
$result=mysql_query($sql);
$row = mysql_fetch_assoc($result);

$teacherid  = $row['teacherID']; 
```

它给了我一个“mysql_fetch_assoc() 期望参数 1 是资源，布尔值”错误，我该如何处理这个错误？我已经在其他文件中使用过这个代码几次，它工作得很好，除了现在，我检查了行的名称，它是正确的

我已经尝试过使用其他命令，例如 mysql_fetch_array、mysql_result、mysql_fetch_row，它给出了同样的错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T10:10:21.293

您似乎正在使用一个字符串变量，您需要将其封装在引号中：

```
SELECT * FROM tblteacher WHERE teacherName='$uname' 
```

在那张纸条上，我看到它来自 Session 变量，我认为它已经被清理以确保其中没有可能的注入攻击 - 是吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T10:10:31.887

尝试

```
$sql = "SELECT * FROM tblteacher WHERE teacherName='$uname'"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T10:13:30.613

问题出在这一行

```
$sql = "SELECT * FROM tblteacher WHERE teacherName=$uname"; 
```

改成

```
$sql = "SELECT * FROM tblteacher WHERE teacherName='$uname'"; 
```

is 字符串，`uname`它应该使用单引号或双引号引起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:28:18.127

```
Try This // user index no 

session_start();
$uname=$_SESSION['login'];

$host="localhost";
$username="root";
$password="";
$db_name="sampledb";
$tbl_name="tblsched";
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$sql = "SELECT * FROM tblteacher WHERE teacherName=$uname";
$result=mysql_query($sql);
$row = mysql_fetch_assoc($result);

**$teacherid  = $row[0];** 
```

# c# - Scope_Identity 有什么问题？

> ID：12510385
> 
> 赞同：0
> 
> 时间：2012-09-20T10:09:31.940
> 
> 标签：c#, asp.net, sql-server

我尝试了数百万种方法来使范围标识起作用。它只是返回 __Page ！！

```
Query = "INSERT INTO seekers(name,sname,lname,status,gender,dob,major,experince,email,password,phone,valid,city) values(@name,@sname,@lname,@status,@gender,@dob,@major,@exp,@email,@password,@phone,0,@city);SELECT SCOPE_IDENTITY();";

// setting up command definition
Command = new SqlCommand(Query, Connection);

// setting up command parameters
Command.Parameters.AddWithValue("email", txt_email.Text);
Command.Parameters.AddWithValue("gender", lst_gender.SelectedValue);
Command.Parameters.AddWithValue("status", lst_status.SelectedValue);
Command.Parameters.AddWithValue("phone", long.Parse("968" + txt_phone.Text));
Command.Parameters.AddWithValue("password", txt_password.Text);
Command.Parameters.AddWithValue("exp", lst_exp.SelectedValue);
Command.Parameters.AddWithValue("city", lst_exp.SelectedValue);
Command.Parameters.AddWithValue("major", lst_major.SelectedValue);
Command.Parameters.AddWithValue("name", txt_name.Text);
Command.Parameters.AddWithValue("sname", txt_sname.Text);
Command.Parameters.AddWithValue("lname", txt_lname.Text);
Command.Parameters.AddWithValue("dob", cld_birth.SelectedDate);

int ID = (int)Command.ExecuteScalar(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:55:17.967

使用 set nocount off 并尝试

由于第一个执行语句是插入返回值是影响的记录数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:23:51.883

SCOPE_IDENTITY will return a decimal, try:

```
int ID = (int) (decimal) Command.ExecuteScalar(); 
```

It's not very clear what you mean by:

> It is just returns __Page !!

Presumably the posted code is throwing an exception, and that's resulting in some higher level code doing whatever it is you mean by "... returns __Page".

If you look at the exception details, you'll find more about what happened: which I suspect is an `InvalidCastException` because you're trying to cast the object returned by Command.ExecuteScalar (a boxed decimal) to an int.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:21:02.903

试用参数如下...

```
Query = "INSERT INTO seekers(name,sname,lname,status,gender,dob,major,experince,email,password,phone,valid,city) values(@name,@sname,@lname,@status,@gender,@dob,@major,@exp,@email,@password,@phone,0,@city);SET @ID=SCOPE_IDENTITY();"

//Your Parameters..
SqlParameter ID=new SqlParameter();
ID.Name="@ID";
ID.Direction=ParameterDirection.Output;
Command.Parameters.Add(ID);
Command.ExecuteNonQuery();
int id=(int)ID.Value; 
```

或 Tryb 转换输出如下...

```
 Query = "INSERT INTO seekers(name,sname,lname,status,gender,dob,major,experince,email,password,phone,valid,city) values(@name,@sname,@lname,@status,@gender,@dob,@major,@exp,@email,@password,@phone,0,@city);SELECT CAST(scope_identity() AS int);"

 int id= (Int32)Command.ExecuteScalar(); 
```

# ruby-on-rails - 由于 kgio_ext (LoadError)，无法通过 unicorn 启动 rails 应用程序

> ID：12510386
> 
> 赞同：9
> 
> 时间：2012-09-20T10:09:36.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, ruby-on-rails-3.2, unicorn

我正在尝试通过运行 rails 应用程序

```
unicorn -c config/environments/<env>/unicorn.rb -e <env> 
```

但我不断收到此错误。

```
<app_root>/vendor/bundle/ruby/1.9.1/gems/kgio-2.7.4/lib/kgio.rb:21:in `require': cannot load such file -- kgio_ext (LoadError) 
```

有任何想法吗？

我在 rails (3.2.3) 应用程序中使用 kgio (2.7.4) 运行独角兽 (4.3.1)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T19:02:43.620

你是在 Mac 上运行 Lion 还是 Mountain Lion？如果是这样，请确保您安装了整个 xcode，而不仅仅是命令行工具。KGIO 需要这个。之后，请务必运行捆绑安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:59:11.863

就我而言，问题是我更新了 rvm 并且独角兽找不到这样的文件。我删除了 gemset 并创建了一个新的，并且在 bundle install 之后一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:37:21.613

I had the same issue and it seems that Bundler with RVM is not integrating well with gems that use native extensions. I've changed to Thin and hit a similar issue with eventmachine. My question for unicorn [here](https://stackoverflow.com/questions/14602951/failing-deploy-with-rvm-unicorn) and Thin [here](https://stackoverflow.com/questions/14610091/thin-eventmachine-fails-to-start/14623644#14623644)

I've worked around the problem with the solution in my Thin question.

Regards, Nuno Valente.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T13:34:31.600

看起来您使用的是 Ruby 1.9.1，可能不兼容。尝试切换 Ruby 版本。

# cocoa - 沙盒应用程序中的 NSAppleScript 执行失败

> ID：12510391
> 
> 赞同：2
> 
> 时间：2012-09-20T10:09:50.390
> 
> 标签：cocoa, applescript, sandbox

我有一个针对 Mac OS X 10.7 的沙盒应用程序，并且想要执行这个 AppleScript：

`tell application "Safari" to add reading list item "http://www.apple.com"`

我已经在 AppleScript 编辑器中测试了这个脚本，它可以正确执行。

在 Cocoa 应用程序中，我设置了适当的临时权利，并使用以下脚本对其进行了测试，该脚本正确执行：

`tell application "Safari" to activate`

但是当我在我的 Cocoa 应用程序中插入第一个脚本时，我得到了一个错误。这是我正在使用的代码

```
 NSString *url = [post.url absoluteString];
    NSString *source = [NSString stringWithFormat:@"tell application \"Safari\" to add reading list item \"%@\"", url];

    NSDictionary *errorDictionary;
    NSAppleScript *script = [[NSAppleScript alloc] initWithSource:source];

    if ( ![script executeAndReturnError:&errorDictionary] ) {
        NSLog(@"Error while saving to Safari Reading List: %@", errorDictionary);
    } 
```

错误是

```
2012-09-20 10:30:29.370 Cream[2752:303] Error while saving to Safari Reading List: {
NSAppleScriptErrorBriefMessage = "A identifier can\U2019t go after this identifier.";
NSAppleScriptErrorMessage = "A identifier can\U2019t go after this identifier.";
NSAppleScriptErrorNumber = "-2740";
NSAppleScriptErrorRange = "NSRange: {29, 11}";
} 
```

该错误似乎与“阅读”一词有关。就好像它没有加载 Safari 脚本字典，并且不理解“阅读列表项”的含义。

如果我在禁用沙盒的情况下运行该应用程序，它可以完美地使用完全相同的脚本。

有人知道会发生什么吗？我需要在沙箱的某个地方再打一个洞吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:18:46.200

沙盒应用程序无法将 AppleEvents 发送给其他应用程序，因此它们无法使用 AppleScript 与其他应用程序进行通信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T11:11:54.993

原来问题是在权利中使用捆绑 ID com.apple.Safari，而不是 com.apple.safari。

# java - Boxing+Varargs 优于 Boxing+Widening

> ID：12510396
> 
> 赞同：0
> 
> 时间：2012-09-20T10:10:00.140
> 
> 标签：java, overloading

如果我错了，请纠正我。Boxing+Varargs 是否优于 Boxing+Widening？

我在一个[网站上](http://studiofreya.com/blog/java/java-conversions-and-golden-rules-of-widening-boxing-varargs/)发现它是另一种方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:24:23.233

What method is called when several could qualify is defined in the [JLS #15.2.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2):

> The first phase (§15.12.2.2) performs overload resolution without permitting boxing or unboxing conversion, or the use of variable arity method invocation. If no applicable method is found during this phase then processing continues to the second phase.
> 
> The second phase (§15.12.2.3) performs overload resolution while allowing boxing and unboxing, but still precludes the use of variable arity method invocation. If no applicable method is found during this phase then processing continues to the third phase.
> 
> The third phase (§15.12.2.4) allows overloading to be combined with variable arity methods, boxing, and unboxing.

So in summary: widening > boxing&unboxing > varargs

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:16:36.617

Boxing+Widening 优于 Boxing+Varargs。一个简单的测试将证实这一点。

```
public static void main(String[] args) {
    int i = 2;
    doX(2);
}

static void doX(Object i){
    System.out.println("object...");
}
static void doX(Integer... i){
    System.out.println("int...");
} 
```

印刷：

```
object... 
```

编辑：对不起，我的错。我已经更正了代码。没有注意到我输入了“对象...”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:22:11.543

`Boxing + Widening`优于`Boxing + Varargs`. 我更改了@John 的示例以显示这一点：

```
public static void main(String[] args) {
    int i = 2;
    doX(i);
}

static void doX(Object i) {
    System.out.println("Object");
}

static void doX(Integer... i) {
    System.out.println("Integer...");
} 
```

印刷

```
Object 
```

# javascript - 我真的需要调用 getElementById() 吗？

> ID：12510399
> 
> 赞同：13
> 
> 时间：2012-09-20T10:10:13.463
> 
> 标签：javascript

> **可能重复：**
> [IE/Chrome：这里是 DOM 树元素全局变量吗？](https://stackoverflow.com/questions/3434278/ie-chrome-are-dom-tree-elements-global-variables-here)

我刚刚在浏览器中偶然发现了一个意想不到但有用的行为：它为我的 html 代码中具有 ID 的每个元素创建了一个变量。所以当我有：

```
<div id="ohlala"> ... </div> 
```

浏览器似乎在幕后运行此代码：

```
var ohlala = document.getElementById("ohlala"); 
```

所以我可以通过以下方式轻松更改该元素的文本：

```
ohlala.innerHTML="test" 
```

在线尝试：http: [//jsfiddle.net/Facby/](http://jsfiddle.net/Facby/) 问题是：为什么我需要自己编写`document.getElementById()`代码？该代码的可移植性如何？我在 Opera、FireFox 和 Chrome 中尝试过，它可以工作！我可以依赖这个功能吗？浏览器是否总是为每个具有 id 的元素创建变量？在这种情况下，我必须更加小心我的 javascript 代码中使用的名称，以免与 HTML 中的类似 id 冲突，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T10:16:57.340

当创建带有 ID 的元素时，“window”对象接收特定属性，这就是为什么您可以直接使用变量的原因，这种行为已被弃用，通常这样写：`window.ohlala.innerHTML = "..."`，浏览器保留了这种行为以与一些旧代码兼容网站，但不建议在现代网站中使用它，始终使用 .getElementById() 方法，该方法是 W3C 标准的一部分，您可以在所有现代浏览器中使用它，在一些非常旧的浏览器版本和 < IE7不起作用。在此处了解有关 DOM（文档对象模型）的更多信息：[https ://developer.mozilla.org/en-US/docs/DOM](https://developer.mozilla.org/en-US/docs/DOM)

# android - 使用 getItemPosition(Object object) 对 FragmentStatePagerAdapter 中的页面重新排序

> ID：12510404
> 
> 赞同：24
> 
> 时间：2012-09-20T10:10:27.667
> 
> 标签：android, android-viewpager, fragmentpageradapter

我相信 FragmentStatePagerAdapter 在`getItemPosition(Object object)`以重新排序页面为目的进行覆盖时行为不正确。

下面是一个简单的例子。在初始状态下，页面的顺序是{A, B, C}。调用 后`toggleState()`，页面顺序变为 {A, C, B}。通过覆盖`getItemPosition(Object object)`，我们确保正在查看的当前页面（A、B 或 C）不会改变。

```
public static class TestPagerAdapter extends FragmentStatePagerAdapter {
    private boolean mState = true;

    public TestPagerAdapter(FragmentManager fragmentManager) {
        super(fragmentManager);
    }

    @Override
    public int getCount() {
        return 3;
    }

    private void toggleState() {
        mState = !mState;
        notifyDataSetChanged();
    }

    private String getLabel(int position) {
        switch (position) {
            case 0:
                return "A";
            case 1:
                return mState ? "B" : "C";
            default:
                return mState ? "C" : "B";
        }
    }

    @Override
    public int getItemPosition(Object object) {
        String label = ((TestFragment) object).getLabel();
        if (label.equals("A")) {
            return 0;
        } else if (label.equals("B")) {
            return mState ? 1 : 2;
        } else {
            return mState ? 2 : 1;
        }
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return getLabel(position);
    }

    @Override
    public Fragment getItem(int position) {
        return TestFragment.newInstance(getLabel(position));
    }
} 
```

我遇到了两种似乎不正确的单独行为。

1.  如果我立即调用`toggleState()`（在查看页面 A 时，在滑动到任何其他页面之前），应用程序就会崩溃。

    ```
    java.lang.IndexOutOfBoundsException: Invalid index 2, size is 2
      at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
      at java.util.ArrayList.set(ArrayList.java:477)
      at android.support.v4.app.FragmentStatePagerAdapter.destroyItem(FragmentStatePagerAdapter.java:136)
      at android.support.v4.view.ViewPager.populate(ViewPager.java:867)
      at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:469)
      at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:441)
      at android.support.v4.view.ViewPager.dataSetChanged(ViewPager.java:766)
      at android.support.v4.view.ViewPager$PagerObserver.onChanged(ViewPager.java:2519)
      at android.database.DataSetObservable.notifyChanged(DataSetObservable.java:37)
      at android.support.v4.view.PagerAdapter.notifyDataSetChanged(PagerAdapter.java:276)
      at com.ugglynoodle.test.testfragmentstatepageradapter.MainActivity$TestPagerAdapter.toggleState(MainActivity.java:55)
      ... 
    ```

    查看 的来源`FragmentStatePagerAdapter`，这将通过在调用第 136 行`mFragments`之前首先检查的大小（如第 113-115 行）来解决。`set()`

2.  如果我首先滑动到页面 B，然后`getItem(2)`调用，页面 C 被创建，并且`mFragments`现在的大小为 3（这将防止上述崩溃立即发生）。然后我滑回页面 A，页面 C 被破坏，因为它应该是（因为它是 2 页，并且我使用默认的屏幕外页面限制 1）。现在，我打电话给`toggleState()`. 页面 B 现已销毁。但是，不会重新创建页面 C！这意味着，当我现在向右滑动时，我得到一个空白页面。

首先，很高兴知道我是否正确并且这些实际上是错误，或者我是否做错了什么。如果它们是错误，任何人都可以提出解决方法（除了自己调试和重建支持库）吗？肯定有人已经`getItemPosition(Object object)`成功覆盖（除了将所有内容设置为`POSITION_NONE`）？

我正在使用支持库的当前版本 (10)。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-29T08:16:05.167

查看 FragmentStatePagerAdapter 的来源，我确切地知道出了什么问题。`mFragments`FragmentStatePagerAdapter 在 ArrayLists:和中缓存片段和保存的状态`mSavedState`。但是当片段被重新排序时，没有重新排序`mFragments`and元素的机制`mSavedState`。因此，适配器会向寻呼机提供错误的片段。

我为此提交[了一个问题](http://code.google.com/p/android/issues/detail?id=37990)，并将一个固定的实现（NewFragmentStatePagerAdapter.java）附加到该问题上。在修复中，我`getItemId()`向 FragmentStatePagerAdapter 添加了一个函数。（这反映了 FragmentPagerAdapter 中的重新排序实现。）始终按适配器位置存储 itemId 的数组。然后，在 中`notifyDataSetChanged()`，适配器检查 itemIds 数组是否已更改。如果有，则相应`mFragments`地`mSavedState`重新排序。进一步的修改可以在`destroyItem()`和`saveState()`中找到`restoreState()`。

要使用这个类，`getItemPosition()`并且`getItemId()`必须与`getItem()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-11T20:27:56.083

[对我来说是一个问题](http://code.google.com/p/android/issues/detail?id=37990)的答案之一。答案 #20 #21。链接到解决方案[https://gist.github.com/ypresto/8c13cb88a0973d071a64](https://gist.github.com/ypresto/8c13cb88a0973d071a64)。最佳解决方案，适用于更新页面和重新排序。只有在此解决方案中，适配器在销毁项目时（在方法 destroyItem 中）没有抛出 IndexOutOfBoundsExeption，这是其他解决方案的已知错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-12T04:14:58.133

我在 Kotlin 中重新实现了[现有的解决方案](https://gist.github.com/ypresto/8c13cb88a0973d071a64)，以便它允许您返回 a`String`而不是 a`long`作为项目 ID。您可以在[此处](https://gist.github.com/SUPERCILEX/1e7fd5f50d38bfccaeffdf0eccda426a)或下方找到它：

```
import android.annotation.SuppressLint
import android.os.Bundle
import android.os.Parcelable
import android.support.v4.app.Fragment
import android.support.v4.app.FragmentManager
import android.support.v4.app.FragmentTransaction
import android.view.View
import android.view.ViewGroup
import java.util.HashSet
import java.util.LinkedHashMap

/**
 * A PagerAdapter that can withstand item reordering. See
 * https://issuetracker.google.com/issues/36956111.
 *
 * @see android.support.v4.app.FragmentStatePagerAdapter
 */
abstract class MovableFragmentStatePagerAdapter(
        private val manager: FragmentManager
) : NullablePagerAdapter() {
    private var currentTransaction: FragmentTransaction? = null
    private var currentPrimaryItem: Fragment? = null

    private val savedStates = LinkedHashMap<String, Fragment.SavedState>()
    private val fragmentsToItemIds = LinkedHashMap<Fragment, String>()
    private val itemIdsToFragments = LinkedHashMap<String, Fragment>()
    private val unusedRestoredFragments = HashSet<Fragment>()

    /** @see android.support.v4.app.FragmentStatePagerAdapter.getItem */
    abstract fun getItem(position: Int): Fragment

    /**
     * @return a unique identifier for the item at the given position.
     */
    abstract fun getItemId(position: Int): String

    /** @see android.support.v4.app.FragmentStatePagerAdapter.startUpdate */
    override fun startUpdate(container: ViewGroup) {
        check(container.id != View.NO_ID) {
            "ViewPager with adapter $this requires a view id."
        }
    }

    /** @see android.support.v4.app.FragmentStatePagerAdapter.instantiateItem */
    override fun instantiateItem(container: ViewGroup, position: Int): Any {
        val itemId = getItemId(position)

        val f = itemIdsToFragments[itemId]
        if (f != null) {
            unusedRestoredFragments.remove(f)
            return f
        }

        if (currentTransaction == null) {
            // We commit the transaction later
            @SuppressLint("CommitTransaction")
            currentTransaction = manager.beginTransaction()
        }

        val fragment = getItem(position)
        fragmentsToItemIds.put(fragment, itemId)
        itemIdsToFragments.put(itemId, fragment)

        val fss = savedStates[itemId]
        if (fss != null) {
            fragment.setInitialSavedState(fss)
        }
        fragment.setMenuVisibility(false)
        fragment.userVisibleHint = false

        currentTransaction!!.add(container.id, fragment)

        return fragment
    }

    /** @see android.support.v4.app.FragmentStatePagerAdapter.destroyItem */
    override fun destroyItem(container: ViewGroup, position: Int, fragment: Any) {
        (fragment as Fragment).destroy()
    }

    /** @see android.support.v4.app.FragmentStatePagerAdapter.setPrimaryItem */
    override fun setPrimaryItem(container: ViewGroup, position: Int, fragment: Any?) {
        fragment as Fragment?
        if (fragment !== currentPrimaryItem) {
            currentPrimaryItem?.let {
                it.setMenuVisibility(false)
                it.userVisibleHint = false
            }

            fragment?.setMenuVisibility(true)
            fragment?.userVisibleHint = true
            currentPrimaryItem = fragment
        }
    }

    /** @see android.support.v4.app.FragmentStatePagerAdapter.finishUpdate */
    override fun finishUpdate(container: ViewGroup) {
        if (!unusedRestoredFragments.isEmpty()) {
            for (fragment in unusedRestoredFragments) fragment.destroy()
            unusedRestoredFragments.clear()
        }

        currentTransaction?.let {
            it.commitAllowingStateLoss()
            currentTransaction = null
            manager.executePendingTransactions()
        }
    }

    /** @see android.support.v4.app.FragmentStatePagerAdapter.isViewFromObject */
    override fun isViewFromObject(view: View, fragment: Any): Boolean =
            (fragment as Fragment).view === view

    /** @see android.support.v4.app.FragmentStatePagerAdapter.saveState */
    override fun saveState(): Parcelable? = Bundle().apply {
        putStringArrayList(KEY_FRAGMENT_IDS, ArrayList<String>(savedStates.keys))
        putParcelableArrayList(
                KEY_FRAGMENT_STATES,
                ArrayList<Fragment.SavedState>(savedStates.values)
        )

        for ((f, id) in fragmentsToItemIds.entries) {
            if (f.isAdded) {
                manager.putFragment(this, "$KEY_FRAGMENT_STATE$id", f)
            }
        }
    }

    /** @see android.support.v4.app.FragmentStatePagerAdapter.restoreState */
    override fun restoreState(state: Parcelable?, loader: ClassLoader?) {
        if ((state as Bundle?)?.apply { classLoader = loader }?.isEmpty == false) {
            state!!

            fragmentsToItemIds.clear()
            itemIdsToFragments.clear()
            unusedRestoredFragments.clear()
            savedStates.clear()

            val fragmentIds: List<String> = state.getStringArrayList(KEY_FRAGMENT_IDS)
            val fragmentStates: List<Fragment.SavedState> =
                    state.getParcelableArrayList(KEY_FRAGMENT_STATES)

            for ((index, id) in fragmentIds.withIndex()) {
                savedStates.put(id, fragmentStates[index])
            }

            for (key: String in state.keySet()) {
                if (key.startsWith(KEY_FRAGMENT_STATE)) {
                    val itemId = key.substring(KEY_FRAGMENT_STATE.length)

                    manager.getFragment(state, key)?.let {
                        it.setMenuVisibility(false)
                        fragmentsToItemIds.put(it, itemId)
                        itemIdsToFragments.put(itemId, it)
                    }
                }
            }

            unusedRestoredFragments.addAll(fragmentsToItemIds.keys)
        }
    }

    private fun Fragment.destroy() {
        if (currentTransaction == null) {
            // We commit the transaction later
            @SuppressLint("CommitTransaction")
            currentTransaction = manager.beginTransaction()
        }

        val itemId = fragmentsToItemIds.remove(this)
        itemIdsToFragments.remove(itemId)
        if (itemId != null) {
            savedStates.put(itemId, manager.saveFragmentInstanceState(this))
        }

        currentTransaction!!.remove(this)
    }

    private companion object {
        const val KEY_FRAGMENT_IDS = "fragment_keys_"
        const val KEY_FRAGMENT_STATES = "fragment_states_"
        const val KEY_FRAGMENT_STATE = "fragment_state_"
    }
} 
```

还有 Java 部分：

```
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.support.v4.view.PagerAdapter;
import android.view.ViewGroup;

/**
 * A PagerAdapter whose {@link #setPrimaryItem} is overridden with proper nullability annotations.
 */
public abstract class NullablePagerAdapter extends PagerAdapter {
    @Override
    public void setPrimaryItem(@NonNull ViewGroup container,
                               int position,
                               @Nullable Object object) {
        // `object` is actually nullable. It's even in the dang source code which is hilariously
        // ridiculous:
        // `mAdapter.setPrimaryItem(this, mCurItem, curItem != null ? curItem.object : null);`
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-24T09:51:44.113

好的，我找到了解决方案。这修复了 viewpager 片段的重新排序问题，以防您动态创建/修改新选项卡。

使用此类代替 FragmentStatePagerAdapter.java

```
package android.support.v4.app;
import android.os.Bundle;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;

import java.util.ArrayList;

public abstract class NewFragmentStatePagerAdapter extends PagerAdapter {
    private static final String TAG = "FragmentStatePagerAdapt";
    private static final boolean DEBUG = false;

    private final FragmentManager mFragmentManager;
    private FragmentTransaction mCurTransaction = null;

    private ArrayList<Fragment.SavedState> mSavedState = new ArrayList<Fragment.SavedState>();
    private ArrayList<Fragment> mFragments = new ArrayList<Fragment>();
    private Fragment mCurrentPrimaryItem = null;

    public NewFragmentStatePagerAdapter(FragmentManager fm) {
        mFragmentManager = fm;
    }

    /**
     * Return the Fragment associated with a specified position.
     */
    public abstract Fragment getItem(int position);

    @Override
    public void startUpdate(ViewGroup container) {
        if (container.getId() == View.NO_ID) {
            throw new IllegalStateException("ViewPager with adapter " + this
                    + " requires a view id");
        }
    }
    public void destroyItemState(int position) {
        mFragments.remove(position);
        mSavedState.remove(position);
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        // If we already have this item instantiated, there is nothing
        // to do.  This can happen when we are restoring the entire pager
        // from its saved state, where the fragment manager has already
        // taken care of restoring the fragments we previously had instantiated.
        if (mFragments.size() > position) {
            Fragment f = mFragments.get(position);
            if (f != null) {
                return f;
            }
        }

        if (mCurTransaction == null) {
            mCurTransaction = mFragmentManager.beginTransaction();
        }

        Fragment fragment = getItem(position);
        if (DEBUG) Log.v(TAG, "Adding item #" + position + ": f=" + fragment);
        if (mSavedState.size() > position) {
            Fragment.SavedState fss = mSavedState.get(position);
            if (fss != null) {
                fragment.setInitialSavedState(fss);
            }
        }
        while (mFragments.size() <= position) {
            mFragments.add(null);
        }
        fragment.setMenuVisibility(false);
        fragment.setUserVisibleHint(false);
        mFragments.set(position, fragment);
        mCurTransaction.add(container.getId(), fragment);

        return fragment;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        Fragment fragment = (Fragment) object;

        if (mCurTransaction == null) {
            mCurTransaction = mFragmentManager.beginTransaction();
        }
        if (DEBUG) Log.v(TAG, "Removing item #" + position + ": f=" + object
                + " v=" + ((Fragment)object).getView());
        while (mSavedState.size() <= position) {
            mSavedState.add(null);
        }
        mSavedState.set(position, fragment.isAdded()
                ? mFragmentManager.saveFragmentInstanceState(fragment) : null);
        mFragments.set(position, null);

        mCurTransaction.remove(fragment);
    }

    @Override
    @SuppressWarnings("ReferenceEquality")
    public void setPrimaryItem(ViewGroup container, int position, Object object) {
        Fragment fragment = (Fragment)object;
        if (fragment != mCurrentPrimaryItem) {
            if (mCurrentPrimaryItem != null) {
                mCurrentPrimaryItem.setMenuVisibility(false);
                mCurrentPrimaryItem.setUserVisibleHint(false);
            }
            if (fragment != null) {
                fragment.setMenuVisibility(true);
                fragment.setUserVisibleHint(true);
            }
            mCurrentPrimaryItem = fragment;
        }
    }

    @Override
    public void finishUpdate(ViewGroup container) {
        if (mCurTransaction != null) {
            mCurTransaction.commitNowAllowingStateLoss();
            mCurTransaction = null;
        }
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return ((Fragment)object).getView() == view;
    }

    @Override
    public Parcelable saveState() {
        Bundle state = null;
        if (mSavedState.size() > 0) {
            state = new Bundle();
            Fragment.SavedState[] fss = new Fragment.SavedState[mSavedState.size()];
            mSavedState.toArray(fss);
            state.putParcelableArray("states", fss);
        }
        for (int i=0; i<mFragments.size(); i++) {
            Fragment f = mFragments.get(i);
            if (f != null && f.isAdded()) {
                if (state == null) {
                    state = new Bundle();
                }
                String key = "f" + i;
                mFragmentManager.putFragment(state, key, f);
            }
        }
        return state;
    }

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {
        if (state != null) {
            Bundle bundle = (Bundle)state;
            bundle.setClassLoader(loader);
            Parcelable[] fss = bundle.getParcelableArray("states");
            mSavedState.clear();
            mFragments.clear();
            if (fss != null) {
                for (int i=0; i<fss.length; i++) {
                    mSavedState.add((Fragment.SavedState)fss[i]);
                }
            }
            Iterable<String> keys = bundle.keySet();
            for (String key: keys) {
                if (key.startsWith("f")) {
                    int index = Integer.parseInt(key.substring(1));
                    Fragment f = mFragmentManager.getFragment(bundle, key);
                    if (f != null) {
                        while (mFragments.size() <= index) {
                            mFragments.add(null);
                        }
                        f.setMenuVisibility(false);
                        mFragments.set(index, f);
                    } else {
                        Log.w(TAG, "Bad fragment at key " + key);
                    }
                }
            }
        }
    }
}
```

并使用它来覆盖该方法

```
 @Override
        public void destroyItem(ViewGroup container, int position, Object object) {
            super.destroyItem(container, position, object);
            if (getItemPosition(object) == POSITION_NONE) {
                destroyItemState(position);
            }
        }
```

来源：[https ://issuetracker.google.com/issues/36956111](https://issuetracker.google.com/issues/36956111)

# c# - 编写可由 3rd 方应用程序使用的自定义事件

> ID：12510409
> 
> 赞同：1
> 
> 时间：2012-09-20T10:10:38.627
> 
> 标签：c#, events

是否可以编写可由 3rd 方应用程序处理的自定义事件？

我们有一个现有的应用程序，我们发现许多使用该应用程序的人正在使用 sql 触发器来自定义编写他们自己的功能，当事情发生在我们的应用程序中时。

这导致某些情况下，我们自己的流程由于劣质的 3rd 方触发器阻止了我们的应用程序而变慢。

我在想，如果我们可以引发他们可以在自己的服务或应用程序中处理的事件，而不必使用触发器，我们可以让第三方开发人员更容易做到这一点。

这样我们就会失去阻塞，因为我们可以触发事件并继续。他们的缓慢/潜在的崩溃也会发生在我们的流程之外。

**A）这是一个合理的方法吗？**

**B）这可能吗？我可以将事件范围超出我的应用范围吗？**

**编辑**

从那以后，我发现其他相关的问题很有趣：

1.  [wcf 跨应用程序通信](https://stackoverflow.com/questions/5070941/cross-application-communication-c)
2.  [没有网络依赖的进程间发布订阅](https://stackoverflow.com/questions/2232047/interprocess-pubsub-without-network-dependency)
3.  [监听另一个应用程序中的事件](https://stackoverflow.com/questions/17878/listen-for-events-in-another-application)（这似乎非常接近我所追求的）

我想我正在寻找最简单的方法，但如果我们想在公司内的许多其他应用程序中采用这种方法，我们将面临一些进一步的挑战：

我们在 vb6 和 delphi 中有一些较旧的应用程序 - 我只是希望能够在我的（或第 3 方）较新的 C# 应用程序或服务中监听它们的事件。

现在，我将看看： [Managed Spy](http://msdn.microsoft.com/en-us/magazine/cc163617.aspx)和[http://pubsub.codeplex.com](http://pubsub.codeplex.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:08:23.223

不，事件只能由加载到您自己的进程中的代码使用。如果你现在不信任这些人，你真的不想让自己暴露在你自己的进程中加载​​的伪劣代码，并抛出未处理的异常来终止你的应用程序。你会接到电话，而不是他们。此外，他们将使用这样的事件来运行降低应用程序速度的代码。

通常，您对 dbase 所做的任何事情都将以完全不可预测的开销运行。不仅仅是因为其他人添加的触发器，dbase 服务器可能会简单地被其他工作拖累，并且随着时间的推移自然会变慢，因为它存储了越来越多的数据。确保这不会使您的应用程序难以使用或使用起来不愉快，dbase 操作通常必须在工作线程上运行或使用 BeginExecuteXxxx() 等异步完成。并在您的 UI 中清楚地表明进度是由 dbase 服务器停止的，而不是您编写的任何代码。使您不必进行大量解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T23:00:19.620

您要做的基本上是将消息发送到其他进程。为此，您需要某种[IPC](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx "我假设您的目标是 Windows 环境")机制。由于听起来每条消息都会有多个侦听器，因此[邮槽](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365576%28v=vs.85%29.aspx)可能是最好的方法。不幸的是，.NET 没有对邮槽的内置支持，因此您必须使用[P/Invoke](http://www.codeproject.com/Articles/19231/Fully-functional-Asynchronous-Mailslot-Control-in)。

如果您正在寻找内置解决方案，则可以使用命名管道、WCF、.NET Remoting 或裸 TCP 或 UDP。但是，对于其中任何一个，您都必须遍历所有侦听器，并一次将消息发送给每个侦听器，这没什么大不了的，但是保持单独的连接更多的是麻烦。

请注意，使用 WCF 和 .NET Remoting，您几乎也限制了您的客户端使用 .NET。如果您的客户端可能是本机或其他平台，那么邮槽、命名管道和 TCP/IP 是您最好的选择。

# java - 为什么 String.contains() 不能接受正则表达式作为参数？

> ID：12510410
> 
> 赞同：2
> 
> 时间：2012-09-20T10:10:42.573
> 
> 标签：java

任何想法来实现这个？

这是最好的方法吗？

```
boolean contains=string.split(regex,2).length==2; 
```

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:13:00.640

你通常会使用类似的东西：

```
boolean contains = pattern.matcher(text).find(); 
```

`pattern`的实例在哪里`java.util.regex.Pattern`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:14:23.103

我会用

```
boolean contains = Pattern.compile(regex).matcher(string).find(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T10:13:39.470

这很容易实现`Matcher.find()`：

```
public static boolean containsRegex(String input, String regex) {
  return Pattern.compile(regex).matcher(input).find();
} 
```

但是，很少有必要，因为您可以简单地保留`matches`，稍微扩展您的正则表达式以开始和结束`.*`。

# python - Python unittest：将异常报告为失败

> ID：12510412
> 
> 赞同：2
> 
> 时间：2012-09-20T10:10:48.440
> 
> 标签：python, unit-testing

我想检查 Python unittest 中的异常，具有以下要求：

*   需要报告为失败，而不是错误
*   绝不能吞下原来的异常

我见过很多形式的解决方案：

```
try:
    something()
except:
    self.fail("It failed") 
```

不幸的是，这些解决方案吞下了最初的例外。有什么办法可以保留原始异常？

我最终使用了 Pierre GM 答案的变体：

```
try:
   something()
except:
    self.fail("Failed with %s" % traceback.format_exc()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:17:44.787

如建议的那样，您可以使用通用异常的上下文：

```
except Exception, error:
    self.fail("Failed with %s" % error) 
```

您还可以通过以下方式检索与异常相关的信息[`sys.exc_info()`](http://docs.python.org/library/sys.html)

```
try:
    1./0
except:
    (etype, evalue, etrace) = sys.exc_info()
    self.fail("Failed with %s" % evalue) 
```

元组`(etype, evalue, etrace)`在这里`(<type 'exceptions.ZeroDivisionError'>, ZeroDivisionError('float division',), <traceback object at 0x7f6f2c02fa70>)`

# c# - 如何在c#中从html中解析出文本

> ID：12510418
> 
> 赞同：3
> 
> 时间：2012-09-20T10:11:07.177
> 
> 标签：c#, html, xml, parsing

我有一个这样的 html 表达式：

```
 "This is <h4>Some</h4> Text" + Environment.NewLine +
 "This is some more <h5>text</h5> 
```

我只想提取文本。所以结果应该是

```
"This is Some Text" + Environment.NewLine +
 "This is some more text" 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T10:13:33.993

使用[HtmlAgilityPack](http://html-agility-pack.net/?z=codeplex)

```
string html = @"This is <h4>Some</h4> Text" + Environment.NewLine +
                "This is some more <h5>text</h5>";

HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);
var str = doc.DocumentNode.InnerText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:14:04.257

使用正则表达式简单：`Regex.Replace(source, "<.*?>", string.Empty);`

# ios - 如何使用 NSPredicate 过滤数组以组合单词

> ID：12510419
> 
> 赞同：4
> 
> 时间：2012-09-20T10:11:12.560
> 
> 标签：ios, nspredicate

```
[filteredArray filterUsingPredicate:
   [NSPredicate predicateWithFormat:@"self BEGINSWITH[cd] %@", searchText]]; 
```

`filteredArray`包含简单的 NSStrings。[你好，我的，起来，起​​来，七等……]；

它将给出所有以 . 开头的字符串`searchText`。

但如果字符串是“我的名字是”和`searchText = name`. `NSPredicate`实现这一目标会是什么样子？

更新：如果我想得到结果`searchText = name`，但不是，那该`searchText = ame`怎么办？也许是这样的：

```
 [filteredArray filterUsingPredicate:
       [NSPredicate predicateWithFormat:
        @"self BEGINSWITH[cd] %@ or self CONTENTS[cd] %@", 
        searchText, searchText]]; 
```

但它应该首先显示以`searchText`包含`searchText`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T10:16:39.533

```
[NSPredicate predicateWithFormat:@"self CONTAINS[cd] %@", searchText]; 
```

**扩展问题后编辑**

```
NSArray *beginMatch = [filteredArray filteredArrayUsingPredicate:
  [NSPredicate predicateWithFormat:
    @"self BEGINSWITH[cd] %@", searchText]];
NSArray *anyMatch = [filteredArray filteredArrayUsingPredicate:
  [NSPredicate predicateWithFormat:
    @"self CONTAINS[cd] %@", searchText]];

NSMutableArray *allResults = [NSMutableArray arrayWithArray:beginMatch];
for (id obj in anyMatch) {
   if (![allResults containsObject:obj]) {
      [allResults addObject:obj];
   }
}
filteredArray = allResults; 
```

这将按所需顺序获得结果，而不会出现重复条目​​。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:20:25.177

**编辑** 实际上开始检查从字符串开始到搜索字符串长度。如果找到完全匹配，则对其进行过滤

```
if u have name game tame lame
search Text : ame
filtered text would be: none 
```

还包含从字符串开头到搜索字符串长度的检查，但如果找到开头、中间或结尾的精确搜索字符串，则将其过滤。

```
if u have name game tame lame
search Text : ame
filtered text would be: name game tame lame because all has ame 
```

* * *

```
[NSPredicate predicateWithFormat:@"self CONTAINS '%@'", searchText]; 
```

# ssh - OSX 10.8 (Mountain Lion) 的 SSHFS

> ID：12510421
> 
> 赞同：82
> 
> 时间：2012-09-20T10:11:15.133
> 
> 标签：ssh, sftp, osx-mountain-lion

过去我使用 SSHFS 来安装驱动器，因此我可以使用我机器上的软件轻松地在远程机器上工作。然而，当我在 MacFUSE 项目页面时，我注意到 SSHFS 早已被弃用。

人们使用 Mountain Lion 来安装驱动器是什么？它是 OSX 内置的，还是有其他项目完全取代了 SSHFS 给我们带来的功能？

非常感谢任何建议。

编辑：过去我使用“SSHFS GUI”来安装驱动器。`Finder >> Go >> Connect to server...`它看起来与界面非常相似。

+1 -> m01 - 我目前正在使用您的解决方案，但如果有人知道 GUI，我很想听听。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-03T13:22:53.437

OSXFUSE 似乎工作。[我刚刚从http://osxfuse.github.com](http://osxfuse.github.com)下载了两个 OSXFUSE 和 SSHFS 包（链接在右侧），然后运行：

```
sshfs user@host:/dir /mnt/somelocaldirectory 
```

编辑：如果你想要一个 GUI，你可能想尝试[sshfs-gui](http://code.google.com/p/sshfs-gui/)，尽管我自己没有尝试过。

就个人而言，我会使用[Cyber​​duck](http://cyberduck.ch/)，尽管它在技术上与 SSHFS 的作用不同，但对于您的目的来说可能已经足够了。它可以让您浏览可以通过 ssh 连接访问的文件，并且似乎也有编辑它们的选项。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T08:10:09.890

根据[OSXFuse wiki](https://github.com/osxfuse/osxfuse/wiki/SSHFS)，您可以通过简单的调整来使用[Macfusion](http://macfusionapp.org)，例如移动旧的 sshfs-static 并通过 OSXFuse 将其链接到新的，如下所示。我已经这样做了，而且效果很好。

```
cd /Applications/Macfusion.app/Contents/PlugIns/sshfs.mfplugin/Contents/Resources
mv sshfs-static sshfs-static.orig
ln -s /usr/local/bin/sshfs sshfs-static 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-15T18:00:08.297

早在 Leopard 时代，我也使用 SSHFS，而且它工作得很好，只要你不要太用力（大文件或参差不齐的网络覆盖）。

我刚刚在我的新 Retina MBP 上设置[了 Expandrive ，它运行良好。](https://www.expandrive.com)（唤醒时自动重新连接，没有打嗝）。我所要做的就是`ssh-add -K`为私钥注册我的 SSH 代理，到目前为止一切顺利。

我在 Lion 和 Mountain Lion 上都试过了，它似乎工作得很好。40美元，对我来说完全值得。

# javascript - 在 javascript/jQuery 中定义函数

> ID：12510422
> 
> 赞同：-1
> 
> 时间：2012-09-20T10:11:14.960
> 
> 标签：javascript, jquery, html

所以我有了[这个](http://jsfiddle.net/TAnzA/5/)，它正在工作，一切都很好。然后我尝试对此进行更改[，](http://jsfiddle.net/Hxnv5/4/)但一切都出错了。我是否以错误的方式定义功能？抱歉，我是 JS 和 jQ 的新手（虽然我假设这只是基本的 javascript 而不是任何与 jQuery 相关的东西）

编辑：另外， MAILTO: href 不起作用吗？我试过了，但没有收到电子邮件......无论如何，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T10:13:41.947

你应该改变这些：

```
$("#name").focusout(checkName()); 
```

至

```
$("#name").focusout(checkName); 
```

您想将*函数本身*分配为`focusout`处理程序，但您将*函数返回的任何*内容分配为处理程序。

此外，`mailto:`URL 方案不发送电子邮件。它在访问者的机器上打开任何本地邮件客户端被定义为该方案的处理程序，并开始编写发往 URL 中地址的新消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:13:57.080

传递函数名，而不是函数执行的结果。

```
$("#name").focusout(checkName);
$("#pass").focusout(checkPass);
$("#pass2").focusout(checkPass2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T10:15:36.747

`var`在你的函数名前面添加（不是完全必要的，但可以阻止它们是全局的）：

```
var checkName = function(){ 
```

然后将它们传递给没有 () 的事件绑定函数，因为它正在运行函数并传递结果，而不是传递实际函数本身：

```
$("#name").focusout(checkName); 
```

这应该可以解决问题。

[http://jsfiddle.net/infernalbadger/Hxnv5/6/](http://jsfiddle.net/infernalbadger/Hxnv5/6/)

此外，mailto: 链接工作正常。它应该打开您的默认电子邮件客户端。

# rest - 在soapui 或soapui pro 中的DataGen？

> ID：12510426
> 
> 赞同：1
> 
> 时间：2012-09-20T10:11:25.693
> 
> 标签：rest, testing, soapui, data-generation

我想在 SoapUI 中测试 Restful Web 服务。为此，我需要从 Excel 中读取值并将其传递给请求。

我在网上搜索，我发现可以通过[DataGen TestStep](https://www.soapui.org/docs/data-driven-tests/datagen-teststep.html)。我有 SoapUI，但我找不到那个选项。

有人可以告诉 SoapUI-4.5.1 或 SoapUI Pro 中是否提供 DataGen TestStep。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:24:14.807

我 99% 确定数据源等仅在 SoapUI pro 中。不过，您可以在 groovy 脚本中完成同样的事情，但与电子表格相比，从文本文件中读取可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-02T12:52:32.910

该步骤仅在 Soap UI Pro 中可用（Ready API）

在免费版本的 Soap UI 中，您可以使用 POI 方式通过 groovy 脚本读取 excel 文件，并在输入请求中传递这些值。

```
import org.apache.poi.xssf.usermodel.*
import org.apache.poi.ss.usermodel.DataFormatter;

def fs = new FileInputStream("F:\\Gaurav\\soapui\\readFile.xlsx")
def wb = new XSSFWorkbook(fs)
def ws = wb.getSheet("Sheet1")
def r = ws.getPhysicalNumberOfRows()

for(def i =0 ; i < r ; i++)
{
def row = ws.getRow(i);
def c=row.getPhysicalNumberOfCells()

for(def j=0; j <c ; j++)
{
def cell= row.getCell(j)

// to convert everything to a String format
DataFormatter formatter = new DataFormatter()
def cellValue=formatter.formatCellValue(cell)

log.info cellValue

}
} 
```

// 以上是从excel中读取的代码。读取值后，您可以 // 将值存储在属性中

```
testRunner.testCase.setPropertyValue(tcprop,"cellValue") 
```

然后在您的请求中，您可以像下面这样扩展它

```
${#TestCase#tcprop} 
```

这样您就可以在 Soap UI 免费版 4.5 中实现相同的 DataGen 功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T20:30:20.017

因此，SoapUI 设置脚本中有一个选项可以提前运行您可以将 Excel 转换为 csv 或文本文件并从那里处理日期。

我已经使用 REST 服务进行了一些测试，仅使用从文本文件功能中读取。像这样的代码：

```
//Load the text file
 def inputFile = new File("C://Temp//whatever");

//Create an empty list...
 def mega_List = [];

//...and then populate it with the contents
 // of the text file.
 addSomeThingToList = {mega_List.add(it)};
 inputFile.eachLine(addSomeThingToList);

//...and assign its value to the Test Case Property
 def tc = testRunner.testCase;

//Randomly pick an item from the list...
def index = context.expand( '${#TestCase#index}' ).toInteger()

 if ( index <  mega_List.size() ) { 
def id = mega_List.get(index);
 index++
tc.setPropertyValue("id", id);
tc.setPropertyValue("index", index.toString());

 }
else {
tc.setPropertyValue("index", "0");
tc.setPropertyValue("id", "0");
testrunner.cancel( "time to go home" )
} 
```

# windows - 在 Windows 上设置共享的远程 git 存储库的最快和最简单的方法是什么？

> ID：12510428
> 
> 赞同：1
> 
> 时间：2012-09-20T10:11:26.247
> 
> 标签：windows, git

我刚刚加入了一个由两人组成的团队，如果我不能很快建立一个 git repo，我就有被要求使用 SourceSafe 的危险。我想避免任何网络服务器等设置，只使用一个共享文件夹，但是沿着这条线的建议不是很清楚，也没有奏效。

首先，我在共享文件夹中尝试了“git init --bare”，这似乎有效，但我无法将此存储库克隆到本地存储库，因为我被告知那里不存在存储库。

如果有人能给我明确的指导如何实现这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:14:52.480

以这种方式共享存储库应该不会导致任何问题，这就是我们在这里的确切设置。

确保在提供 repo 位置时指定斜杠，并且在资源管理器中访问共享以防需要身份验证。

```
git clone //server/share/path/to/repo.git 
```

# .net - 这是.net DateTime.Compare 函数中的错误吗？

> ID：12510436
> 
> 赞同：3
> 
> 时间：2012-09-20T10:11:49.377
> 
> 标签：.net, vb.net

我有一个带有两个 DateTimePicker 控件的表单

如果它们具有相同的值，DateTime.Compare 应该返回 0，但它认为它们不一样：

```
?DateTime.Compare(DatePicker.dtpFrom.Value, DatePicker.dtpTo.Value)
1

?datepicker.dtpFrom.Value
#9/20/2012 7:00:46 PM#

?DatePicker.dtpTo.Value
#9/20/2012 7:00:46 PM# 
```

我是不是想的不太清楚？当然，这不是 .NET Framework 中的一些错误。

**更新** 确定我检查了毫秒值，它们关闭（非常轻微）。古怪！我想这与构造控件并设置其默认值时的一些细微延迟有关。

```
?DatePicker.dtpTo.value.ToString("fff")
"616"
?datepicker.dtpFrom.Value.ToString("fff")
"619" 
```

我只关心日期部分，所以我解决了它：

```
If DateTime.Compare(DatePicker.dtpFrom.Value.Date, DatePicker.dtpTo.Value.Date) > 0 Then
                MsgBox("From_Date cannot be after To_Date", MsgBoxStyle.OkOnly, "Data validation error") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:17:29.553

您想查看[有关 DateTime.Compare 的 .Net 文档](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)，值为 1 表示 dtpFrom.Value 大于 dtpTo。

我还建议日期之间存在一到两毫秒的差异，因为即使到秒，它们也可能不一样。

我建议比较 .ToString("yyyy MM dd HH:mm:ss") 值来解决毫秒差异

**更新**

除了评论，这里有一个更好的剥离毫秒的建议

`dateTime.AddTicks( - (dateTime.Ticks % TimeSpan.TicksPerSecond));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:14:48.720

比较多个 DateTimePicker 控件时要小心。其值的毫秒部分的微小差异可能会导致意外的比较结果，即使没有用户编辑其默认值也是如此。

例如，假设您的表单上有两个 DateTimePicker 控件：FromDate 和 ToDate，用于为报表建立日期范围。

如上面的问题所示，比较两个值以确保 FromDate 不大于 ToDate，可能会导致意外结果。

如果您只关心这些控件的 Date 部分，则可以在进行比较时通过读取 Value 属性上的 Date 属性来删除时间值。

```
If DateTime.Compare(dtpFrom.Value.Date), DateValue(dtpTo.Value.Date) > 0 Then
{invalid range error message} 
```

# c# - 使用 System.IO.Packaging C# 打开 ODS 文件

> ID：12510437
> 
> 赞同：1
> 
> 时间：2012-09-20T10:11:49.280
> 
> 标签：c#, .net, compression

我想在 *.ods 中获取 content.xml。我知道这可以通过使用 DotNetZip 的 API 来实现。相反，我想通过使用微软的 System.IO.Package 来做到这一点。

尝试了下面的代码，但无法获取其中的文件。

```
using (Package package = ZipPackage.Open(@"C:\Book1.ods", System.IO.FileMode.Open))
{
     // get files?
} 
```

希望您能够帮助我。谢谢！

# iphone - 是否有任何 API 可以为 iphone 实现 way2sms 应用程序..？

> ID：12510440
> 
> 赞同：0
> 
> 时间：2012-09-20T10:11:53.463
> 
> 标签：iphone, objective-c, ios5, networking

嗨，是否有一个 API 来实现 way2sms 应用程序以向印度发送短信。该应用程序已经存在于 Android 中。我也想在 iphone 中实现相同的功能。任何想法开始这个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:33:54.980

应用商店中已经有一个应用可以向印度发送免费短信 [https://itunes.apple.com/us/app/smsglobal/id570193291?ls=1&mt=8](https://itunes.apple.com/us/app/smsglobal/id570193291?ls=1&mt=8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:34:14.343

我对此不太确定。只需在谷歌上点击它。可能这会帮助你！

[https://www.mashape.com/blaazetech/way2sms](https://www.mashape.com/blaazetech/way2sms)

并且在这个站点中明确提到，没有way2sms的API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:37:25.583

我认为您应该尝试从 .apk android 应用程序获取代码并从中获取 api

# java - RCP 开放编辑器并行

> ID：12510449
> 
> 赞同：0
> 
> 时间：2012-09-20T10:12:22.570
> 
> 标签：java, eclipse-rcp

我在 RCP 应用程序中打开多个编辑器时遇到问题。据我所知，只有一个`UI-Thread`绘制 GUI。

在我的用例中，我必须同时打开大约 50 个编辑器，这需要一些时间，因为在打开所有编辑器之前会阻塞 UI 线程。在我的编辑器中加载数据是通过 Jobs 完成的。

我尝试搜索是否有某种机制可以使开口平行化以不阻塞 UI 线程，但没有找到任何东西。有没有可能做到这一点？如果每个编辑器都在自己的 UI 线程中打开/绘制，这将非常有帮助，以便用户已经可以使用打开的编辑器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:50:44.530

我想您已经回答了您的问题 - Eclipse-RCP 应用程序中只有一个 UI 线程。您可能想重新考虑您的应用程序设计并尽可能使用延迟加载机制（组合框、查看器等），或者尝试找到一些数据加载需要更多时间并且可以优化的地方，但编辑器的可视化初始化仍然需要一些时间时间，尤其是当您同时打开多个编辑器时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:50:03.770

您可以做的一件事是`org.eclipse.ui.ide.IDE.openEditors(IWorkbenchPage, IFile[])`在 IDE 产品中使用或在 RCP 产品中使用 'org.eclipse.ui.IWorkbenchPage.openEditors(IEditorInput[], String[], int)' 来推迟打开编辑器的成本。从 Eclipse 3.5 开始，这两种方法都可用。

它根据要求为编辑器创建所有选项卡，但它只实现最终处于活动状态的编辑器。它提供了与用户关闭并重新打开 Eclipse 并打开许多编辑器（仅实现可见编辑器）相同的行为。

有关更多信息，请参阅 IWorkbenchPage 的 javadoc， http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fui%2FIWorkbenchPage [。 html](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fui%2FIWorkbenchPage.html)

私服

# c++ - 检查整数是否是 8 的倍数

> ID：12510454
> 
> 赞同：8
> 
> 时间：2012-09-20T10:12:42.340
> 
> 标签：c++

嗨，我是 C++ 新手，所以我不确定这是否是一个非常愚蠢的问题。基本上我正在使用 c++ 自定义操作项目与我的 MSI 安装程序进行交互。我得到一个我的用户将输入的属性，它是一个整数。我需要确保这是 8 的倍数，我不知道该怎么做。显然，如果它可以除以 8，它是一个倍数，但我不确定如果有余数如何捕捉。任何帮助将不胜感激，甚至可以为我指明正确的方向。谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-20T10:14:14.227

使用“模”运算符，它给出除法的余数：

```
if (n % 8 == 0) {
    // n is a multiple of 8
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T10:14:33.587

使用“模”或“整数余数运算符” `%`：

```
int a = ....;
if (a % 8 == 0 ) {
  // a is amultiple of 8
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T10:17:03.557

使用运算符 %

```
if ( num % 8 == 0 )
{
    // num is multple of 8
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-03T18:04:59.343

只检查`3`数字的最后一位就可以了。
即使您以 a 的形式给出了一个巨大的数字，`string`其中`%`操作没有用，您也可以检查是否只有最后 3 位数字可以被 8 整除，那么整个数字是否可以被 整除`8`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-02-21T04:39:57.330

对于无符号整数，三个最低有效位对于 8 的倍数始终为零，因此这些位上的按位 & 应该为假。对于有符号（二进制补码），这仅在整数为正时才成立，因此请注意您的输入是否存储为有符号（您是否希望接受负数作为输入）。另请注意，零本身的三个最低有效位为零，因此请考虑当有人输入零时您是否希望您的检查为真。从您的问题来看，您的代码似乎不需要优化，所以只需使用模数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-04T19:10:45.637

我看到有人在使用位操作

```
bool f( int x){
return !(x & 7);
} 
```

据说这种方法有一些问题，但我不太确定。

# python - 在 Django 中序列化为 JSON 的两个查询集

> ID：12510458
> 
> 赞同：3
> 
> 时间：2012-09-20T10:12:51.417
> 
> 标签：python, django, json, serialization

我的 Django 项目中的两个查询集类型对象的 JSON 序列化存在一些问题。例如我有：

```
collectionA = A.objects.all()
collectionB = B.objects.all() 
```

当我尝试仅序列化一个集合时：

```
json = serializers.serialize('json', collectionA) 
```

那么一切正常，但是我怎样才能将这两个集合序列化为一个 json 对象呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T10:23:28.457

```
from itertools import chain
combined = list(chain(collectionA, collectionB))

json = serializers.serialize('json', combined) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T10:23:35.367

您不能组合两个查询集来序列化它们。如果你序列化一个查询集，它实际上会被执行并且查询集数据在那一刻被填写。如果您只想要集合中的数据，只需获取集合，加入它们，然后序列化加入的集合。某种形式的东西：

```
from django.core import serializers

collectionA = list(A.objects.all())
collectionB = list(B.objects.all())
joined_collection = collectionA + collectionB
json = serializers.serialize('json', joined_collection) 
```

试试看，这应该可以。

# c# - 设计用于 N 层应用程序的数据库

> ID：12510459
> 
> 赞同：5
> 
> 时间：2012-09-20T10:12:53.213
> 
> 标签：c#, design-patterns, database-design

我正在使用 .NET（C#、SQL Server）开发一个 N 层应用程序。我从设计数据库开始，因为我相信从底部开始会是一个好主意。现在我需要您在构建数据库时提出非常灵活的建议。知道应用程序旨在构建为一组插件。

该应用程序是用于许多不同硬件设备（汽车、发动机等）的远程控制应用程序。这是数据库表的片段。

1.  设备表
2.  人事表
3.  用户表
4.  角色表

正如您所看到的，设备表是一个表示我们正在控制的设备的表，并且由于每个设备可能具有比其他设备更多或更少的属性，我想将每个设备链接到它的属性，这些属性可能在另一个表中，即尽可能优雅。人员表适用于负责设备的人员，例如：汽车司机（每辆汽车可能有多个司机）、发动机操作员等。

用户是应用程序用户，如您所见，我已将用户和角色分成两个不同的表。

我正在寻找一种将设备链接到它们的属性的方法。另外，在应用程序中，每个设备都是可连接设备的一个实例。这意味着我可以将一个名为 say: SIM 卡的设备连接到一个名为 Vehicle 的设备上。此外，有没有关于这个主题的设计模式？

在此先感谢，如果我不清楚，请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:51:55.363

根据您将如何处理*数据*层，此数据库设计可能是一个有争议的问题。如果您将 EntityFramework 与代码优先方法一起使用，您可以使用它创建逻辑实体并从您的模型生成数据库。

大多数基于 ORM 的解决方案都提供了一些从对象关系创建数据库的方法，但是尽管您可以快速轻松地启动并运行数据库，这将完全满足您的需求，但如果您想开始使用您可能会遇到的模式麻烦，虽然你可以做很多推断来帮助它在幕后按照你想要的方式制作数据库。

如果这是一个新建项目，并且您不需要容纳任何遗留数据库系统，我将暂时停止担心您的数据库，只需编写逻辑模型并定义它们的关系，并让数据存储问题自行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:35:10.247

这里真正的设计决策是围绕您的设备和属性表。其他都很标准。

对于一个可以选择与一个或多个属性关联的设备，您真正需要的只是属性表中的一个可为空的外键。但这提出了一个非常重要的问题：某些设备是否有必要具有一组非常特定的属性？您的应用程序是否会期望您的“汽车”设备具有“模型”属性？ **我们如何通过这种设计确保数据库的完整性？**

您可以通过数据库定义的约束来做到这一点。但是您怎么知道“汽车”设备需要“模型”属性？也许您需要为每个设备定义一个模板：DeviceType 和 PropertyType 表。这样，您的约束将始终知道在更新/插入记录时需要哪些属性。此外，这将使处理应用程序中的数据变得容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:18:56.573

没有任何理想的数据库设计。它可以根据您正在操作的信息快速更改。

一种简单的方法是列出设计中的所有类，然后将这些类分解到尽可能低的级别，而不需要任何重复数据。

即使每个设备都有不同的属性，您可以将设备分类到它们各自的组中，并且一个组将具有大部分相似的属性。您可以构建一个包含该组所有属性的属性表。正如您所说，您可以使用 deviceID 和 propertyID 将它们连接到不同的表中。人和设备也是如此。您可以根据您拥有的属性将人员表分成更小的部分。

如果大量表在数据提取方面形成一个集群，您可以考虑为您的解决方案采用星型模式，其中一个事实表（实数）位于中心，相关数据围绕它。

祝你好运！

# java - 尝试使用 Zxing 二维码阅读器 API 导致强制关闭

> ID：12510461
> 
> 赞同：1
> 
> 时间：2012-09-20T10:12:53.463
> 
> 标签：java, android

我已经集成了 Zxing API 并使用了以下代码：

```
Intent data = new Intent("com.google.zxing.client.android.SCAN"); 
```

并使用此代码获得结果：

```
String contents = data.getStringExtra("SCAN_RESULT");
String format = data.getStringExtra("SCAN_RESULT_FORMAT"); 
```

但是当我运行这段代码时，应用程序会要求强制关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-10T22:37:25.203

向startActivity [() 发送 Intent 时](https://developer.android.com/guide/components/intents-filters.html#ExampleSend)，您必须始终检查用户是否有*任何*可以处理该 Intent 的应用程序：

> 警告：用户可能没有任何应用程序来处理您发送到的隐式意图[`startActivity()`](https://developer.android.com/reference/android/content/Context.html#startActivity(android.content.Intent))。如果发生这种情况，调用将失败，您的应用程序将崩溃。要验证 Activity 是否会接收 Intent，请调用[`resolveActivity()`](https://developer.android.com/reference/android/content/Intent.html#resolveActivity(android.content.pm.PackageManager))您的 Intent 对象。如果结果不为空，则至少有一个应用程序可以处理该意图并且可以安全地调用`startActivity()`. 如果结果为 null，则不应使用该意图，并且如果可能，您应该禁用发出该意图的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:17:06.240

通过[这个](https://stackoverflow.com/questions/8708705/how-to-use-zxing-in-android/8708784#8708784)。应用程序崩溃，因为 Zxing 应用程序未安装在移动设备中。我在同一个链接中给出了详细的答案。

# android - 如何在android中使用带有body的http post url发送请求和响应？

> ID：12510462
> 
> 赞同：0
> 
> 时间：2012-09-20T10:12:58.393
> 
> 标签：android, http, http-post

如何在android中发送`HTTP POST`请求`URL`并`Body`获得响应？`HTTP POST`

例如 ![在此处输入图像描述](../Images/de7c9cbd4705718a3474a2fdbd65dd41.png)

![在此处输入图像描述](../Images/b5fe04d0f61c5785e3c29d82f66e2594.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:30:38.773

它取决于您是否需要进行身份验证才能查看网页。

无论是否需要身份验证，您都必须在您的清单中添加以下权限才能访问该网页：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

在进行访问的活动或课程中，您可以执行以下操作：

```
import android.net.ConnectivityManager;
import android.os.Handler;
import android.os.Message;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.HTTP;

public class YourClass  
{
    BufferedReader intro=null;
    String url="Your Site URL?Your request body";
    DefaultHttpClient cliente=new DefaultHttpClient();
    HttpPost post=new HttpPost(url);
    List<NameValuePair> nvps = new ArrayList <NameValuePair>();
    nvps.add(new BasicNameValuePair("username","Your username"));
    nvps.add(new BasicNameValuePair("password","your password"));
    try
    {
        post.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));
        HttpResponse response = cliente.execute(post);
        if(response.getStatusLine().getStatusCode()==200)//this means that you got the page
        {
            HttpEntity entity=response.getEntity();
            intro=new BufferedReader(new InputStreamReader(entity.getContent()));
            intro.readLine();
            intro.close();
        }
    } 
    catch (UnsupportedEncodingException ex)
    {

    }
    catch(IOException e)
    {

    }
} 
```

最后，考虑到这一点：

- 如果您正在进行身份验证，请考虑“用户名”和“密码”字段（在 BasicNameValuePair 中）可能有另一个名称，这取决于网页

- 使用 BufferedReader 的 intro.readLine，您正在阅读网页，就好像您正在阅读文件一样，因此您可能需要解析以避免显示 html 代码

# iphone - 我可以在 iphone 应用程序中显示来自远程目标的 html 吗？

> ID：12510466
> 
> 赞同：0
> 
> 时间：2012-09-20T10:13:09.420
> 
> 标签：iphone, html

我可以在 iphone 应用程序中显示来自远程目标的 html 内容吗？例如，是否可以从远程源加载 iframe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:17:54.917

假设这是一个原生应用程序，您可以使用[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)嵌入 Web 内容。

# facebook - 为“谁可以看到此应用在您的 Facebook 时间线上为您发布的帖子”设置默认值

> ID：12510471
> 
> 赞同：0
> 
> 时间：2012-09-20T10:13:26.613
> 
> 标签：facebook, facebook-graph-api, facebook-apps, privacy, facebook-app-requests

如何在我的应用安装对话框中将“谁可以看到此应用在您的 Facebook 时间线上为您发布的帖子”的默认值设置为“只有我”？有没有办法阻止它，使他们的用户无法将其更改为“朋友”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:21:09.160

如果您使用的是 ios sdk，则可以使用它来初始化会话：

```
- (id)initWithAppID:(NSString*)appID
    permissions:(NSArray*)permissions
    defaultAudience:(FBSessionDefaultAudience)defaultAudience
    urlSchemeSuffix:(NSString*)urlSchemeSuffix
    tokenCacheStrategy:(FBSessionTokenCachingStrategy*)tokenCachingStrategy; 
```

defaultAudience 设置帖子的受众。如果您查看 SDK 代码，您可以看到 FBSessionDefaultAudience 值。它在 FBSession.h 中。我正在使用 3.1 SDK。

# c++ - 来自 shared_ptr 的类型转换错误

> ID：12510476
> 
> 赞同：0
> 
> 时间：2012-09-20T10:13:38.357
> 
> 标签：c++, shared-ptr

我有以下代码：

```
namespace {
    class CatBondEvent
    {
    public:
        CatBondEvent(Date date) : date(date){}
        virtual ~CatBondEvent(){}
        Date date;

        bool operator< (CatBondEvent &other) { return date<other.date;}
    };

    class CatEvent : CatBondEvent
    {
    public:
        Real loss;
        CatEvent(Date date, Real loss) : CatBondEvent(date), loss(loss) {}
    };

    class CollateralCoupon : CatBondEvent
    {
    public:
        Real unitAmount;
        CollateralCoupon(Date date, Real unitAmount) : CatBondEvent(date), unitAmount(unitAmount) {}
    };

    class CatBondCoupon : CatBondEvent
    {
    public:
        CatBondCoupon(Date date) : CatBondEvent(date) {}
    };

    void fillEvents(std::vector<boost::shared_ptr<CatBondEvent> > &events, 
                    Date startDate,
                    Date endDate,
                    boost::shared_ptr<std::vector<std::pair<Date, Real> > > catastrophes, 
                    boost::shared_ptr<Bond> collateral,
                    boost::shared_ptr<std::vector<Date> > couponDates)
    {
        for(int i=0; i<catastrophes->size(); ++i) 
        {
            events.push_back(boost::shared_ptr<CatBondEvent>(new CatEvent((*catastrophes)[i].first, (*catastrophes)[i].second)));
        }
        const Leg& cashflows = collateral->cashflows();
        for(int i=0; i<cashflows.size() && cashflows[i]->date()<=endDate; ++i) 
        {
            boost::shared_ptr<CashFlow> cashflow = cashflows[i];
            if(cashflow->date() >= startDate)
            {
                events.push_back(boost::shared_ptr<CatBondEvent>(new CollateralCoupon(cashflow->date(), cashflow->amount())));
            }
        }
        for(int i=0; i<couponDates->size(); ++i) 
        {
            Date couponDate = (*couponDates)[i];
            if(couponDate >= startDate)
            {
                events.push_back(boost::shared_ptr<CatBondEvent>(new CatBondCoupon(couponDate)));
            }
        }
    }
} 
```

我得到以下编译错误：

```
Error   37  error C2243: 'type cast' : conversion from '`anonymous-namespace'::CollateralCoupon *' to '`anonymous-namespace'::CatBondEvent *' exists, but is inaccessible   c:\boost\boost_1_49_0\boost\smart_ptr\shared_ptr.hpp    184
Error   36  error C2243: 'type cast' : conversion from '`anonymous-namespace'::CatEvent *' to '`anonymous-namespace'::CatBondEvent *' exists, but is inaccessible   c:\boost\boost_1_49_0\boost\smart_ptr\shared_ptr.hpp    184
Error   38  error C2243: 'type cast' : conversion from '`anonymous-namespace'::CatBondCoupon *' to '`anonymous-namespace'::CatBondEvent *' exists, but is inaccessible  c:\boost\boost_1_49_0\boost\smart_ptr\shared_ptr.hpp    184 
```

知道出了什么问题以及如何解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T10:17:38.427

您的继承是私有的，这会阻止从派生类的指针到其基类的指针的转换。您可能想要公共继承：

```
class CatEvent : public CatBondEvent
                 ^^^^^^ 
```

除非另有说明，否则对成员和基类的访问在使用`class`关键字定义的类中是私有的，而在使用`struct`.

# javascript - 检测画布文本 API 支持 (Opera Mini)

> ID：12510482
> 
> 赞同：4
> 
> 时间：2012-09-20T10:13:44.227
> 
> 标签：javascript, html, canvas, opera-mini, opera-presto

尽管 Opera Mini 不显示画布文本，但典型的测试表明它具有文本 API 函数的实现。是否有替代技术来检查支持？

当前方法：

```
var context = document.createElement("canvas").getContext("2d");
var canvasTextSupport = typeof context.fillText == "function"; // true in Opera Mini 
```

您可以使用一个示例来查看是否显示文本：[tutorialspoint](http://www.tutorialspoint.com/cgi-bin/practice.cgi?file=html5-41.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:39:58.480

正如@kangax 所建议的那样，您可以通过在画布上绘制文本然后确保已绘制像素来进行测试。

```
var canvasTextSupported = function() {
  var canvas = document.createElement("canvas");  
  var context = canvas.getContext("2d");

  context.fillText("X", 5, 5);     
  var imageData = context.getImageData(0, 0, 10, 10);

  for(var i = 0, l = imageData.data.length; i < l; i++) {
    if(imageData.data[i] !== 0)
      return true;
  }
  return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:47:15.280

您可以使用 Modernizr 库的自定义构建来做到这一点！

[http://modernizr.com/](http://modernizr.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-03T06:23:47.347

当我`canvas`用来检测字体时，抛出错误，我发现一个更紧凑的替代方案是：

```
var canvasTextSupported = function() {
  var cvs = document.createElement("canvas");  
  var ctx = cvs.getContext("2d");
  return 'measureText' in ctx && ctx.measureText("") !== undefined;
} 
```

Firefox 3.0.x 没有`measureText`. 在 Opera Mini measureText() 中返回`undefined`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-16T06:31:42.210

您可以使用[canisuse.js](https://github.com/btomashvili/caniuse)脚本来检测您的浏览器是否支持画布文本 API

```
caniuse.canvasTextApi(); 
```

# excel - 过滤公式中的列

> ID：12510486
> 
> 赞同：0
> 
> 时间：2012-09-20T10:13:48.033
> 
> 标签：excel, csv, sqlconnection

我正在从数据库中的表中获取数据，并在 excel 中创建了一个连接。我允许用户在 C3 字段中输入一个 ID，表格将按此数字过滤所有 ID。我知道我可以通过 ID 手动过滤数据，但是我不知道如何通过单元格中的数字进行过滤 - 我试图创建一个自定义过滤器，但它不允许我引用单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:46:13.337

嗯，你当然可以用这样的公式添加一列

```
=A1=$C$3 
```

然后在 result = true 时将您的过滤器应用于此列和过滤器

# eclipse-rcp - Eclipse 4 应用程序/窗口生命周期

> ID：12510487
> 
> 赞同：1
> 
> 时间：2012-09-20T10:13:48.343
> 
> 标签：eclipse-rcp, rcp

如何挂钩应用程序或窗口生命周期事件？至少我需要处理可以关闭应用程序的时刻，并在必要时取消此尝试。我没有找到为应用程序或窗口输入 URI 的可能性，例如部件的 URI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:49:54.130

对于应用程序生命周期，请查看[Eclipse 4 RCP 教程 - 生命周期挂钩](http://www.vogella.com/articles/EclipseRCP/article.html#lifecycle)。

窗口生命周期事件还不能直接访问，已为此提交了[Bug392903 。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=392903)

# javascript - 带有换行符和双引号的 C++ 字符串编码为 XML CDATA

> ID：12510491
> 
> 赞同：0
> 
> 时间：2012-09-20T10:13:53.980
> 
> 标签：javascript, c++, mysql, xml, xerces-c

我有一个带有双引号和换行符的字符串（代表一些 Javascript 代码），例如：

```
<script src="mytest.js"></script>
<script>
   (function() { 
      var u = 'http://myserver.com/myapp.js';
      document.write('script src="' + u + '"></scr'+'ipt'>);
   })();
</script> 
```

该字符串存储在 MySQL 数据库中，我正在使用 libzdb 将其读入内存中的 C++ 字符串。

现在，我将整个脚本字符串读入 C++ std::string 变量。结果，双引号被转义，换行符用 \r\n 字符表示。所以内存中的字符串看起来像：

```
<script src=\"mytest.js\"></script>\r\n<script>(function() {\r\n var u =       'http://myserver.com/myapp.js';\r\n document.write('script scr=\"' + u + '\"></scr'+'ipt'>);\r\n})();\r\n</script> 
```

接下来，我使用 XERCES C++ 库将此内存中的字符串放入 CDATA 部分。并且当 XML 数据进一步序列化为字符串时，编码后的字符串（带有转义引号和换行符）出现在 XML 数据中。

如何确保 XML 中的 CDATA 部分没有转义引号和换行符？

非常感谢！

# readline - 屏蔽用户输入和编码

> ID：12510506
> 
> 赞同：0
> 
> 时间：2012-09-20T10:14:31.060
> 
> 标签：readline, bash

由于这组特定功能所需的选项和开关的数量，我希望创建一个简单的 bash 别名。这是背景信息，而不是问题。

要执行有问题的命令需要一个密码短语（通常在多个位置），我想最小化它并同时提供其他用户的一些隐私。

这是别名示例...

```
alias test="read -sp 'Enter passphrase: ' pass; gpg --batch --passphrase $pass --symmetric --cipher-algo aes256 -o file.ext.gpg file.ext" 
```

别名工作正常，提示用户输入密码并将其应用于解密过程。

这是问题：如果我加密文件并输入密码（不使用上面示例中所示的 read -sp utlity）加密文件密码与我使用“读取”二进制文件来屏蔽输入不同。

如果我显示使用 read -sp 捕获的 $pass 的内容，它会在我输入时显示，没有任何额外的行尾等。

有人经历过吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:19:10.650

你不应该引用`$pass`吗？如果它包含空格等。此外，您需要`$`在设置别名时转义以使其不扩展。

所以：

```
alias test="read -sp 'Enter pp: ' pass; gpg --passphrase \"\$pass\" --batch --symmetric --cipher-algo aes256 -o file.ext.gpg file.ext" 
```

除此之外，您可能希望使用`--passphrase-fd`这样的密码短语不会在`ps`输出中结束：

```
alias test="read -sp 'pp: ' pass; gpg --passphrase-fd 3 --etc-etc 3<<< \$pass" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:42:19.303

shell 函数会更简单，因为您消除了引用级别，并且如果需要将函数推广到其他文件，则允许参数。

```
# There is already a standard command called 'test'; use a different name
pass_encrypt () {
  in=$1
  out=$in.gpg
  read -rsp 'Enter passphrase: ' pass
  gpg --batch --passphrase-fd 3 --symmetric \
      --cipher-algo aes256 -o "$out" "$in" 3<<<$pass
} 
```

（与 mvds 的使用建议`--passphrase-fd`）

# javascript - 灯箱有效，但上传到服务器时无效

> ID：12510508
> 
> 赞同：0
> 
> 时间：2012-09-20T10:14:34.910
> 
> 标签：javascript, prototypejs, lightbox

我已经很好地查看了以前的问题/答案，但我是新手。已经下载了Firebug——不是特别明白。

[http://www.deccardy.com/portfolio-field-house.html](http://www.deccardy.com/portfolio-field-house.html)

是我试图用 Lightbox 整理的页面。

任何帮助都感激不尽。

此外，如果您知道灯箱排序图像的方式，例如 #1 - #5 - #2 - #6 而不是按顺序排列，那就太好了！

非常感谢，

科迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:24:02.227

The below mentioned files are not publicly accessible. Upload both the JS Files.

```
http://www.deccardy.com/effects.js
http://www.deccardy.com/builder.js 
```

Get them from [here](http://lokeshdhakar.com/projects/lightbox2/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:21:43.600

您在页面上有 404 错误，这就是脚本失败的原因。

```
404 Not Found:
http://www.deccardy.com/effects.js
http://www.deccardy.com/builder.js 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:22:59.957

你也需要加载**`lightbox.css`**。灯箱在脚本端工作（当您滚动到页面底部时会看到它），但没有 css 文件，它不是所需的结果。

但是：我建议更新当前版本（使用 jQuery）。

# android - 如何在 Android 中将多个单页 PDF 文件合并为一个 PDF 文档

> ID：12510511
> 
> 赞同：1
> 
> 时间：2012-09-20T10:14:43.977
> 
> 标签：android, pdf, merge, pdf-generation

我的 SD 卡中有单页的几个 PDF 文件。现在我需要以编程方式将这些单页 PDF 文件合并到一个 PDF 文档中。我已经使用[Android PDF Writer](http://coderesearchlabs.com/androidpdfwriter/)库来创建这些单个 PDF 文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:15:00.003

iText 库可以合并 PDF 文件，据说有一个适用于 Android 的 iText 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T12:43:44.527

您可以将 Android 上的多个 PDF 文件与最新的[Apache PdfBox Release](https://pdfbox.apache.org)结合起来。

只需将此依赖项添加到您的 build.gradle 中：

```
compile 'org.apache.pdfbox:pdfbox:2.0.2' 
```

在异步任务中执行以下操作：

```
private File downloadAndCombinePDFs(InputStream streamToPdf1, InputStream streamToPdf2, InputStream streamToPdf3 ) throws IOException {

    PDFMergerUtility ut = new PDFMergerUtility();
    ut.addSource(streamToPdf1);
    ut.addSource(streamToPdf2);
    ut.addSource(streamToPdf3);

    final File file = new File(getContext().getExternalCacheDir(), System.currentTimeMillis() + ".pdf");

    final FileOutputStream fileOutputStream = new FileOutputStream(file);
    try {
        ut.setDestinationStream(fileOutputStream);
        ut.mergeDocuments(MemoryUsageSetting.setupTempFileOnly());

    } finally {
        fileOutputStream.close();
    }
    return file;
} 
```

# iphone - 将视图控制器与 UITableView 链接的 Xcode 错误

> ID：12510517
> 
> 赞同：0
> 
> 时间：2012-09-20T10:14:54.587
> 
> 标签：iphone, ios, xcode, uitableview

我`Tabbed Bar`在 Xcode 中做了一个应用程序，第一个选项卡是装饰。我问了一个关于将 XIB 项目集成到 StoryBoard 选项卡式项目中的问题。

我已经成功地集成了这个，它可以工作，但是当我推动其中一个 Deocrs 或表格单元时，我得到以下错误：

`Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "SelectedCellViewController" nib but the view outlet was not set.`

如果我将原始警报放入我的项目中，则单元格链接将再次开始工作。

下面是我的项目的图片、链接和代码，所以你可以看到它是如何工作的

[故事板项目](http://studio.netnrg.co.za/dev/rnd/blake.loizides/xcode/storyboard.zip)

[XIB项目](http://studio.netnrg.co.za/dev/rnd/blake.loizides/xcode/xib.zip)

![在此处输入图像描述](../Images/34492feda956532383b403b5db60df86.png)

![在此处输入图像描述](../Images/c22f5e8a04b0458bd12805702d909fb2.png)

**DecorsViewController_iPhone.h**

```
#import <UIKit/UIKit.h>

@interface DecorsViewController_iPhone : UIViewController

{
IBOutlet UITableView *tableViewDecors;
NSArray *sitesArray;
NSArray *imagesArray;
}

@property (nonatomic, retain) UITableView *tableViewDecors;
@property (nonatomic, retain) NSArray *sitesArray;
@property (nonatomic, retain) NSArray *imagesArray;

@end 
```

**DecorsViewController_iPhone.m**

```
 #import "DecorsViewController_iPhone.h"
 #import "SelectedCellViewController.h"

@interface DecorsViewController_iPhone ()

@end

@implementation DecorsViewController_iPhone

@synthesize tableViewDecors;
@synthesize sitesArray;
@synthesize imagesArray;

 #pragma mark - View lifecycle

 // Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
  - (void)viewDidLoad {

// Load up the sitesArray with a dummy array : sites
NSArray *sites = [[NSArray alloc] initWithObjects:@"a", @"b", @"c", @"d", @"e", @"f", @"g", @"h", nil];
self.sitesArray = sites;
//[sites release];

UIImage *active = [UIImage imageNamed:@"a.png"];
UIImage *ae = [UIImage imageNamed:@"b.png"];
UIImage *audio = [UIImage imageNamed:@"c.png"];
UIImage *mobile = [UIImage imageNamed:@"d.png"];
UIImage *net = [UIImage imageNamed:@"e.png"];
UIImage *photo = [UIImage imageNamed:@"f.png"];
UIImage *psd = [UIImage imageNamed:@"g.png"];
UIImage *vector = [UIImage imageNamed:@"h.png"];

NSArray *images = [[NSArray alloc] initWithObjects: active, ae, audio, mobile, net, photo, psd, vector, nil];
self.imagesArray = images;
//[images release];

[super viewDidLoad];
}

#pragma mark - Table View datasource methods

// Required Methods

// Return the number of rows in a section
- (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section {
return [sitesArray count];
}

// Returns cell to render for each row
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"CellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

// Configure cell

NSUInteger row = [indexPath row];

// Sets the text for the cell
//cell.textLabel.text = [sitesArray objectAtIndex:row];

// Sets the imageview for the cell
cell.imageView.image = [imagesArray objectAtIndex:row];

// Sets the accessory for the cell
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

// Sets the detailtext for the cell (subtitle)
//cell.detailTextLabel.text = [NSString stringWithFormat:@"This is row: %i", row + 1];

return cell;
 }

// Optional

// Returns the number of section in a table view
-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView {
return 1;
}

#pragma mark -
#pragma mark Table View delegate methods

// Return the height for each cell
-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
return 78;
}

// Sets the title for header in the tableview
-(NSString *) tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section     {
return @"Decors";
 }

// Sets the title for footer
-(NSString *) tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section     {
return @"Decors";
}

// Sets the indentation for rows
-(NSInteger) tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath {
return 0;
}

// Method that gets called from the "Done" button (From the @selector in the line - [viewControllerToShow.navigationItem setRightBarButtonItem:[[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissView)] autorelease]];)
- (void)dismissView {
[self dismissViewControllerAnimated:YES completion:NULL];
}

// This method is run when the user taps the row in the tableview
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
[tableView deselectRowAtIndexPath:indexPath animated:YES];

SelectedCellViewController *viewControllerToShow = [[SelectedCellViewController alloc] initWithNibName:@"SelectedCellViewController" bundle:[NSBundle mainBundle]];
[viewControllerToShow setLabelText:[NSString stringWithFormat:@"You selected cell: %d - %@", indexPath.row, [sitesArray objectAtIndex:indexPath.row]]];
[viewControllerToShow setImage:(UIImage *)[imagesArray objectAtIndex:indexPath.row]];

[viewControllerToShow setModalPresentationStyle:UIModalPresentationFormSheet];
[viewControllerToShow setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
[viewControllerToShow.navigationItem setRightBarButtonItem:[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissView)]];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewControllerToShow];
viewControllerToShow = nil;

    [self presentViewController:navController animated:YES completion:NULL];
navController = nil;

    //  UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Tapped row!"
//                                            message:[NSString stringWithFormat:@"You tapped: %@", [sitesArray objectAtIndex:indexPath.row]]
//                                            delegate:nil
//                                            cancelButtonTitle:@"Yes, I did!"
//                                            otherButtonTitles:nil];
//  [alert show];
//  [alert release];

}

#pragma mark - Memory management

- (void)didReceiveMemoryWarning {
NSLog(@"Memory Warning!");
[super didReceiveMemoryWarning];
}

- (void)viewDidUnload {
self.sitesArray = nil;
self.imagesArray = nil;
[super viewDidUnload];
 }

 //- (void)dealloc {
 //[sitesArray release];
//[imagesArray release];
//  [super dealloc];
//}

@end 
```

**SelectedCellViewController.h**

```
@interface SelectedCellViewController : UIViewController {
NSString *labelText;
UIImage *image;

IBOutlet UILabel *label;
IBOutlet UIImageView *imageView;
}

@property (nonatomic, copy) NSString *labelText;
@property (nonatomic, retain) UIImage *image;

@end 
```

**viewControllerToShow.m**

```
#import "SelectedCellViewController.h"

@implementation SelectedCellViewController

@synthesize labelText;
@synthesize image;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
if ((self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])) {
}
return self;
}

- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
}

#pragma mark - View lifecycle

 - (void)viewDidLoad {
[super viewDidLoad];
[label setText:self.labelText];
[imageView setImage:self.image];
}

- (void)viewDidUnload {
self.labelText = nil;
self.image = nil;
//[label release];
// [imageView release];
[super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

 @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:22:31.173

在身份检查器中检查“单击时要显示的控制器”继承的类。XIB。看来你没有为“要显示”的XIB和同一个XIB的视图出口设置类。

# wpf - WPF 应用程序：将图像保存在数据库或文件系统上更好吗？

> ID：12510521
> 
> 赞同：1
> 
> 时间：2012-09-20T10:15:13.353
> 
> 标签：wpf, sqlite, sql-server-ce, blob

我必须构建一个 WPF 单用户应用程序，该应用程序需要为每条记录（>10000 条记录）处理图像（大约 200-500 kb。）。

我最好在数据库中使用 blob 字段还是将 imgs 保存在文件系统中更好？

我试图了解是否使用 Sqlite 或 SqlCE 作为数据库引擎，但我已经阅读了这两个引擎的限制和性能问题，所以我认为将图像保存在文件系统中，即使只备份数据库会更好文件以保存所有内容。这是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:24:04.190

如果 Blob 字段中有所有图像，则每次备份都需要备份整个数据库文件。使用文件系统中的图像，您可以进行增量备份。

根据您需要对图像执行的操作，您可能无论如何都必须将一些图像导出到文件中。

# python - SocketServer ThreadingTCPServer & Asyncore Dispatcher

> ID：12510522
> 
> 赞同：2
> 
> 时间：2012-09-20T10:15:23.137
> 
> 标签：python, sockets, asyncsocket, socketserver, asyncore

我想为使用 SocketServer 模块的服务器的请求处理程序中的单个连接添加超时。

首先让我说这是我第一次尝试使用 Python 进行网络编程。我对 SocketServer.BaseRequestHandler 和 SocketServer.ThreadingTCPServer 和 SocketServer.TCPServer 进行了子类化，并设法创建了两个具有一些基本线程 TCP 功能的类。

但是我希望我的传入连接超时。试图覆盖任何内置的 SocketServer 超时值和方法都不起作用，因为文档说这仅适用于分叉服务器。我设法创建了一个在 X 秒后触发的计时器线程，但是由于 Handler 线程中阻塞 recv 调用的性质，这没有用，因为我将被迫杀死它，这是我真正的想避免。

所以我的理解是我需要一个异步实现，在那里我得到通知并读取一定数量的数据。如果在 5 秒内没有发送任何数据，可以说，我想关闭该连接（我知道如何干净地做到这一点）。我发现了一些将 asyncore 与套接字一起使用的示例，但没有一个使用 SocketServer。那么，我该如何实现 asyncore 和 threadingTCPserver 呢？是否可以？有人做过吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:21:07.000

您还可以设置`recv`通话超时，如下所示：

```
sock.settimeout(1.0) 
```

既然你使用`SocketServer`了，你就必须`socket`在`SocketServer`. 请注意，这`SocketServer`将为您创建套接字，因此您无需自己创建。

您可能已经定义了一个`RequestHandler`与您的`SocketServer`. 它应该看起来像这样：

```
class RequestHandler(SocketServer.BaseRequestHandler):
    def setup(self):
         # the socket is called request in the request handler
         self.request.settimeout(1.0)

    def handle(self):
         while True:
             try: 
                 data = self.request.recv(1024)
                 if not data:
                      break # connection is closed
                 else:
                      pass  # do your thing
             except socket.timeout:
                 pass # handle timeout 
```

# ant - 2 个不匹配的字符串对象的断言/比较被记录为错误而不是失败

> ID：12510523
> 
> 赞同：2
> 
> 时间：2012-09-20T10:15:25.657
> 
> 标签：ant, junit, junit4

我执行了一个简单的测试用例（在 jobss-ejb 环境中），它比较/断言 2 个字符串。
不幸的是，这些字符串彼此不匹配（有一个错误）。 **但问题是，当我从eclipse**

执行测试用例时，它会将结果记录为**失败**，这是正确的，因为预期对象和实际对象之间存在不匹配； **而当我从ant**执行相同的测试用例时，结果被记录为**error**。 这真的很奇怪和令人惊讶，并且添加更多，这种行为仅在**junit 4 版本**上被注意到，当我在 junit 3.8 上执行测试用例时，ant 和 eclipse 都将结果记录为失败。 **********关于可能出现问题的任何建议或指示？
提前致谢 ：）**********

 ******Ant 版本：1.6.1 Junit 版本：4.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:43:19.297

好的，我进一步挖掘，发现这与任何特定的应用程序服务器无关。它可以在**任何应用服务器**上复制。
只需创建一个示例（junit4）测试用例，如下所述：

```
@Test
public void stringTest() {
    org.junit.Assert.assertEquals("Comparing 2 string:", "abc", "xyz");
} 
```

现在，从 Eclipse 运行它；您将看到结果为 1 次失败。**使用ant（或 maven）目标**通过某个应用服务器运行相同的操作，您将得到错误结果。

浏览日志后，我认为这一定是因为 junit4 org.junit.Assert.assertEquals(String message, Object expected,Object actual) 方法抛出了**ComparisonFailure**而不是**AssertionError**。我对此的分析是junit4 assert() 方法(org.junit.Assert.assertEquals(String, Object, Object)) 只对String 实例抛出ComparisonFailure。以下是 org.junit.Assert.assertEquals 的代码（**junit4** assert 方法）：

```
static public void assertEquals(String message, Object expected, Object actual) {
    if (expected == null && actual == null)
        return;
    if (expected != null && isEquals(expected, actual))
        return;
    else if (expected instanceof String && actual instanceof String) {
        String cleanMessage= message == null ? "" : message;
        throw new ComparisonFailure(cleanMessage, (String) expected,
                (String) actual);
    } else
        failNotEquals(message, expected, actual);
} 
```

这是 junit.framework.Assert.assertEquals(String, Object, Object) 的代码（即**junit3** assert 方法）

```
static public void assertEquals(String message, Object expected, Object actual) {
    if (expected == null && actual == null)
        return;
    if (expected != null && expected.equals(actual))
        return;
    failNotEquals(message, expected, actual);
} 
```

可以观察到，在**junit4 assertEquals()**中，为不相等的 String 实例添加了一个额外的检查，这会为两个不相等的字符串抛出**ComparisonFailure**。对于所有其他不相等的对象，即 Integer、Long 等。调用将调用**failNotEquals()**方法，该方法会引发**AssertionError**。

谁能帮我理解在junit4的org.junit.Assert.assertEquals()方法中添加String实例检查的**设计意义**。为什么它真的被添加了，为什么只用于字符串？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:46:54.580

问题中提到的测试结果行为的差异是因为**ant 版本问题**。对于较低版本的 ant，您会得到这种类型的行为（可能是因为较低的 ant 版本将**比较**失败视为错误而不是失败）。**我在ant 版本 1.7.1**（及更低版本）中发现了这种行为。但是这个**问题**在最新的**ant jar**即**1.8.4**中得到了解决。当我在最新的 ant 版本上执行上述测试用例时，**结果**被记录为**failure**而**不是 error**。因此，如果您遇到这样的问题**，只需将您的 ant jar 更新到 1.8.4**或其他可用的最新版本。******

# zend-framework - 通过 Composer 安装的 Zend Framework 包的大小

> ID：12510524
> 
> 赞同：2
> 
> 时间：2012-09-20T10:15:26.390
> 
> 标签：zend-framework, composer-php

我只是想知道为什么 Composer 上的包“zendframework/zendframework1”这么大：

```
[root@server-VM-001:vendor #] du -sh zendframework/
558M    zendframework/ 
```

有人可以解释吗？

顺便问一下，是否可以通过 Composer 获取 Zend Framework 最小包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:40:34.417

如果您安装 dev-master 或其他 dev- 版本，composer 默认情况下会“从源代码”安装它，这意味着它会执行 git clone。鉴于 ZF 规模庞大且历史悠久，完整的存储库非常庞大。

现在的解决方案是只安装以 dist 形式下载的标记版本（composer lingo 中的 zip 存档）。在不远的将来，还应该有一个`--prefer-dist`可以传递给 composer install 的标志，这将强制 dists 甚至用于开发包。

# google-apps-script - 在电子表格中的可视化之前验证 html

> ID：12510529
> 
> 赞同：0
> 
> 时间：2012-09-20T10:15:41.293
> 
> 标签：google-apps-script

我在电子表格中显示 email-html 正文期间收到该错误。

脚本或内容 HTML 无效：HtmlOutput:11+28 - 45: 格式错误的 url 电话:02-64484862 HtmlOutput:60+14 - 32: 格式错误的 url 电话:051%20256011 HtmlOutput:60+102 - 120: 格式错误的 url 电话:051 %20256041 HtmlOutput:93+14 - 43: 格式错误的 url 电话:%2B%2B39%20051%20256011 HtmlOutput:94+13 - 42: 格式错误的 url 电话:%2B%2B39%20051%20256041。（第 12 行）

在我的电子表格中，有一些单元格的评论是电子邮件的正文，我想在电子表格中可视化电子邮件正文。

这是我使用的代码。

var indiceRigaPerCuiVisualizzareEmail=SpreadsheetApp.getActiveSheet().getActiveCell().getRowIndex();

SpreadsheetApp.getActiveSpreadsheet().show(HtmlService.createHtmlOutput(SpreadsheetApp.getActiveSheet().getRange(indiceRigaPerCuiVisualizzareEmail, 4).getComment()));

我认为问题是 Caja 进行的消毒。那么我如何处理电子邮件包含用于 Caja 清理的无效/不安全内容的情况？如果邮件的原始内容无法可视化，有没有办法只可视化邮件中没有html标签的简单文本？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:06:22.487

利用

```
HtmlService.createHtmlOutput().appendUntrusted(yourContent) 
```

第一次可视化。然后，您应该看到哪些标签需要更正。

# php - 显示post-wordpress中类别页面的子类别列表

> ID：12510532
> 
> 赞同：0
> 
> 时间：2012-09-20T10:15:51.700
> 
> 标签：php, html, wordpress

这是我网站的结构：

类别（菜单中的页面）> 子类别（侧边栏上的列表）> 发布

它是一个菜单项的类别，当我输入它时，它会显示在子类别列表中，我可以从该列表中输入帖子。问题在于，当我在帖子中时，我无法再次列出子类别，因为如果我使用：

```
<ul class="sub-menu">
    <?php the_category();?>
</ul> 
```

它将显示一个列表，其中仅包含帖子的当前类别，没有属于全局类别页面的类似子类别。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:46:09.763

听起来您正在寻找的是[wp_list_categories()](http://codex.wordpress.org/Function_Reference/wp_list_categories "文件")。

the_category() 仅在循环中起作用，它仅返回当前帖子对象所属的类别。wp_list_categories() 可用于列出整个站点的类别，或者通过更改函数的参数来列出属于特定父类别或您需要的几乎任何类别列表的类别，以几乎任何顺序排序。查看参数的文档以确定您需要使用哪种组合。它将类别作为指向这些类别的 HTML 格式链接返回。如果您想要没有 HTML 格式的相同信息，请尝试使用[get_categories()](http://codex.wordpress.org/Function_Reference/get_categories "文件")代替。

# domain-driven-design - 命令和事件的命名约定

> ID：12510535
> 
> 赞同：14
> 
> 时间：2012-09-20T10:15:59.600
> 
> 标签：domain-driven-design, cqrs, dddd

我刚刚进入事件驱动架构，想知道命名命令和事件的约定是什么。我知道很多：命令应该采用 DoSomething 的形式，而事件应该采用SomethingHappened 的形式。我需要澄清的是，如果我需要将“命令”一词附加到我的命令中，并将“事件”附加到我的事件中，例如 DoSomethingCommand 而不是 DoSomething 和SomethingHappenedEvent 而不是只是SomethingHappened。我还想知道社区首选公约背后的基本原理是什么。谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T02:41:17.423

`Command`和后缀是可选的`Event`并且是一个偏好问题。我更喜欢省略它们，并尝试仅从名称中使意图明显。命名命令和事件的最重要方面是确保它们更多地反映业务领域而不是技术领域。很多时候，诸如创建、更新、添加、更改之类的术语过于技术化，在业务领域中意义不大。例如，`UpdateCustomerAddress`您可以说`RelocateCustomer`哪个可能有更大的业务背景，而不是说。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-20T10:26:33.417

我的约定取决于命名空间，我的意思是我从不使用后缀事件或命令。

我还根据它们要影响的聚合类型将命令和事件组织到单独的命名空间中。

例子：

```
// Commands
MyApp.Messages.Commands.Customers.Create
MyApp.Messages.Commands.Orders.Create
MyApp.Messages.Commands.Orders.AddProduct

// Events
MyApp.Messages.Events.Customers.Created
MyApp.Messages.Events.Orders.Created
MyApp.Messages.Events.Orders.ProductAdded 
```

根据您的要求，您可能希望将事件放入单独的程序集中。这样做的原因是如果您需要将事件分发到下游系统。在这种情况下，您可能不希望下游系统不得不为您的命令而烦恼（因为它们不应该）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-24T14:07:38.103

我经常看到并使用自己的约定是事件应该是过去时并描述发生的事情：

*   用户注册
*   帐户激活
*   回复已发布

命令是你想做的事情。因此，请创建说明以下内容的名称：

*   创建用户
*   升级用户帐户

至于组织，我通常将它们与它们所针对的根聚合放在一起。它使您可以更轻松地查看您可以做什么以及生成了哪些类型的事件。

也就是说，我为每个根聚合创建一个命名空间，并将所有内容（存储库定义、事件、命令）放在其下。

*   MyApp.Core.Users
*   MyApp.Core.Posts

等等

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-21T06:18:11.340

如果您的命令/事件被正确命名，附加命令和事件将是多余的信息。这将是使您的代码可读性降低的噪音。还记得匈牙利符号吗？大多数程序员（据我所知）不再使用它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-24T02:44:45.073

命令和事件为您的应用程序形成一种*语言*……一种 API。使用诸如“命令”和“事件”之类的术语可能对系统级定义有用，其中技术术语有意义地混合到实体的目的中，但如果您正在处理域行为的定义，则删除系统/技术术语并青睐商务人士。它将使您的代码更自然地阅读并减少打字。我从“命令”/“事件”附件开始，但意识到这是浪费时间，并把我从 DDD 普及的无处不在的语言中拉了出来。HTH，迈克

# html - 当用户在 Metro 应用程序中点击/点击时，弹出窗口不应隐藏

> ID：12510537
> 
> 赞同：1
> 
> 时间：2012-09-20T10:16:03.023
> 
> 标签：html, windows-8, winjs

在我的 Metro 风格应用程序（Windows 8）中，我创建了一个页面叠加层和一个显示消息的弹出窗口。当用户单击页面时，弹出消息将隐藏。但我希望即使用户点击覆盖页面时也能保留弹出窗口。我正在使用 HTML5 和 WinJS。无论如何我可以使用其他控件实现上述场景，或者我可以阻止页面在用户点击/单击屏幕时停止对事件做出反应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T16:09:33.520

这并不是真正支持的——Flyout 本身没有持久/粘性/模态的概念。如果您查看 base.js 中的代码，您会发现它没有公开任何代码来利用 appbar 中使用的内置粘性行为（事实证明，这有点浮出水面。

您可以做几件事：

*   将“ `_sticky: true`”传递给弹出的构造函数。例如`<div data-win-control="WinJS.UI.Flyout" data-win-options="{ _sticky: true}">`
*   将点击处理程序附加到文档的顶部，如果它在浮出控件创建的点击吃 div 上，则取消事件
*   通过简单地向 body 添加一个新的 div 并对其进行绝对定位来创建您自己的 UI。

# asp.net - 如何从我的 .net 网页创建 .PDF？

> ID：12510538
> 
> 赞同：2
> 
> 时间：2012-09-20T10:16:02.837
> 
> 标签：asp.net, .net, visual-studio-2010, pdf-generation

我使用 Visual Studio 2010 (VB) 为我的客户建立一个网站。他们有一个简单的网络表格，填写该表格以电子方式记录会议记录。他们希望在完成后将此 Web 表单转换为 .PDF 文件并通过电子邮件发送给用户列表。

任何人都可以向我指出任何能够帮助将网页中的数据转换为 .PDF 的工具的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:21:11.067

您可以使用众多库之一从您的页面生成 PDF。这里有一个[演练](http://www.4guysfromrolla.com/articles/030911-1.aspx)（它使用[iTextSharp](http://sourceforge.net/projects/itextsharp/)，但其他可用 - 有一个谷歌）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:21:54.853

我建议使用 PDFSharp 之类的库手动创建 PDF，其中包含您需要的数据。

[http://www.pdfsharp.com/](http://www.pdfsharp.com/)

尝试将 html 和 css 转换为 PDF 通常是非常不稳定的，我想说最好的选择是使用 PDF 库（阅读 PDFSharp）单独创建文档并给用户。

Vb.net 的演示代码：

[http://www.pdfsharp.net/wiki/HelloWorld-sample-VB.ashx?AspxAutoDetectCookieSupport=1](http://www.pdfsharp.net/wiki/HelloWorld-sample-VB.ashx?AspxAutoDetectCookieSupport=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T10:42:33.003

您可以使用 Syncfusion Essential PDF。

产品链接
[http://www.syncfusion.com/products/reporting-edition/pdf](http://www.syncfusion.com/products/reporting-edition/pdf)

在线演示链接： [http ://asp.syncfusion.com/demos/reporting/pdf/Import%20and%20Export/HtmlToPdf/CS/Default.aspx](http://asp.syncfusion.com/demos/reporting/pdf/Import%20and%20Export/HtmlToPdf/CS/Default.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T10:33:07.857

如果您有某种模板（我认为您有，因为您应该从单个 Web 表单生成 pdf），您可以使用 Crystal Reports 并将其导出到 pdf 文件。我的 pdf-doc 需要更具吸引力的设计，所以我使用[ABCPdf](http://www.websupergoo.com/abcpdf-1.htm) + HtmlAgilityPack + GeckoEngine。它允许我从 html 文件生成 pdf。请注意，ABCPdf 不是免费的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T12:12:15.863

如果您没有任何精美的图表等，您可以使用免费的 pdf 转换器生成 pdf。但是，如果您想要图表等并想使用它们，请选择“www.pdftrond.com”或使用 HiQPdf 工具。

HiQPdf 工具具有启动许可价格：单个应用程序上的单个机器 $395.00

PDFTron 大约 800 美元

# proxy - 录制期间无法让 JMeter 对站点进行身份验证

> ID：12510543
> 
> 赞同：4
> 
> 时间：2012-09-20T10:16:26.140
> 
> 标签：proxy, jmeter, ntlm, intranet

我是 Jmeter 新手，遇到以下问题。到目前为止，它已经浪费了我几天的时间，我真的希望有人能提供帮助：

当我去记录网站的登录页面（IIS 托管，Windoes 身份验证）时，我最终收到了未经授权的 401。输入详细信息后，登录弹出窗口再次显示。在不使用 Jmeter 浏览网站时，这些相同的细节可以正常工作。

情况：内网代理 > JMeter 代理 > 站点

我已经使用 Intranet Proxy 详细信息启动了 JMeter：

> jmeter -H -P 8080 -u -a -N 本地主机

我在 JMeter 的 WorkBench 中创建了一个 HTTP 代理服务器

> HTTP 采样器设置 = HttpClient 3.1 / 重定向 / 关注并保持活动状态

我在线程组中添加了一个 HTTP 授权管理器，提供了我的详细信息

我在 jmeter.properties 文件中取消了 httpclient.parameters.file=httpclient.parameters 的注释

如果 HTTPClient 采样器在同一文件中需要，我已取消注释 http.proxyDomain=NTLM 域

我在 httpclient.parameters 文件中取消了 http.authentication.preemptive$Boolean=true 的注释

我相信 NTLM 凭据在此过程中会丢失，但我现在不知道该去哪里。

让我知道是否有任何其他信息有用。

提前感谢，Eoin。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:07:25.663

如果您在需要身份验证的代理后面，请确保设置：

```
 -H PROXY_HOST -P PROXY_PORT -u PROXY_USERNAME -a PROXY_PASSWORD -N localhost 
```

第二次检查您的 JMeter 代理配置[JMETER PROXY SETUP STEP BY STEP](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)

最后，如果您有 NTLM，则不确定它是否可以工作，至少在录制期间不确定，这还取决于您的 NTLM 版本，请参见：

*   [http://jmeter.512774.n5.nabble.com/JMeter-NTLM-authentication-td514319.html](http://jmeter.512774.n5.nabble.com/JMeter-NTLM-authentication-td514319.html)

看到这个：

*   [带有 Windows 身份验证的 JMeter？](https://stackoverflow.com/questions/1793649/jmeter-with-windows-authentication)

最后尝试在 jmeter 用户邮件列表上询问这个问题，一旦你没有得到答案，我建议你将 JMeter 置于 DEBUG 模式（jmeter.properties）并将你的日志附加到你将打开的 BugZilla 问题（我会看看尽快）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-10T12:13:25.980

`HTTP(S) Test Script Recorder`如果我设置-> `HTTP Sampler settings`-> `Type`=在 Firefox 40 和带有 Kerberos 身份验证的 IIS 中为我​​工作`Java`。需要多次输入认证，然后当我取消Firefox认证时，我可以记录网站没有问题。

# java - 如何在 JSP/Servlet 中重用数据库连接？

> ID：12510551
> 
> 赞同：1
> 
> 时间：2012-09-20T10:16:46.207
> 
> 标签：java, jsp, servlets, jdbc

目前，我在每个 JSP/Servlet 中一次又一次地创建数据库连接。我想在我的 JSP/Servlet 项目中重用我的数据库连接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T10:20:36.477

做到这一点的“正确”方法是使用[连接池](http://en.wikipedia.org/wiki/Connection_pool)。这样就减少了创建/关闭连接的开销。

除此之外，您做事的方式没有任何问题。长时间保持打开的连接通常不是一个好主意。

为了减少麻烦 - 您可以创建一个实用程序类，它从池中返回一个连接，并且同样具有将连接返回到池的方法。

# java - 将不使用 JAXB 的 @XmlRootElement 编组为字符串

> ID：12510557
> 
> 赞同：3
> 
> 时间：2012-09-20T10:17:07.753
> 
> 标签：java, maven, jaxb, wsdl2java, jaxb2-maven-plugin

我需要将一个`JAXB`生成的对象编组为`String`. 问题是它没有`@XmlRootElement`注释。它不是根元素。中的元素`XSD`如下所示：

```
 <xs:complexType name="CompletedAssessmentInstance">
    <xs:complexContent mixed="false">
      <xs:extension base="tns:AssessmentInstance">
        <xs:sequence>
          <xs:element minOccurs="0" name="CompletionDate" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="CustomResultsXML" nillable="true" type="xs:string"/>
          <xs:element minOccurs="0" name="NormedScores" nillable="true" type="tns:NormedScores"/>
          <xs:element minOccurs="0" name="RawScore" type="xs:decimal"/>
          <xs:element minOccurs="0" name="TimeTaken" type="xs:int"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:element name="CompletedAssessmentInstance" nillable="true" type="tns:CompletedAssessmentInstance"/> 
```

`tns`前缀指向这个命名空间：x`mlns:tns="http://www.cubiksonline.com/2009/08/AssessmentProvider"`

我发现我可以这样做来编组不是`XML`根元素`JAXB`：

```
public static String completedAssessmentInstanceToString(CompletedAssessmentInstance assessmentInstance)
        throws AssessmentException {
    try {
        Marshaller marshaller = jc.createMarshaller();

        StringWriter writer = new StringWriter();

        QName qname = new QName(
                "http://www.cubiksonline.com/2009/08/AssessmentProvider",
                "CompletedAssessmentInstance");

        JAXBElement<CompletedAssessmentInstance> rootElement = new JAXBElement<CompletedAssessmentInstance>(
                qname,
                CompletedAssessmentInstance.class,
                assessmentInstance);

        marshaller.marshal(rootElement, writer);

        return writer.toString();
    } catch (JAXBException ex) {
        LOGGER.error("JAXB Exception occurred.", ex);
        throw new AssessmentException(RequestStatusValue.InvalidProjectConfiguration,
                "Unable to marshal the CompletedAssessmentInstance data: " + assessmentInstance, ex);
    }
} 
```

我正在`JAXB`像这样初始化我的上下文：

```
private static JAXBContext jc = createJaxbContext();

private static JAXBContext createJaxbContext() {
    try {
        ClassLoader cl = com.cubiksonline._2009._08.assessmentprovider.ObjectFactory.class.getClassLoader();
        return JAXBContext.newInstance("com.cubiksonline._2009._08.assessmentprovider", cl);
    } catch (JAXBException ex) {
        LOGGER.error("Failed to create JAXB context: ", ex);
        return null;
    }
} 
```

这个包：`com.cubiksonline._2009._08.assessmentprovider`是包含所有`JAXB`生成类的包，包括 和`CompletedAssessmentInstance`。问题是当`marshaller.marshal(rootElement, writer);`被调用时我得到以下异常：

```
Caused by: javax.xml.bind.MarshalException
 - with linked exception:
[javax.xml.bind.JAXBException: com.cubiksonline._2009._08.assessmentprovider.CompletedAssessmentInstance is not known to this context]
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:318)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:244)
    at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:95)
    at com.groupgti.esb.assessments.cubiks.CubiksFactory.completedAssessmentInstanceToString(CubiksFactory.java:272)[647:com.groupgti.esb.online.tests.cubiks:1.2.0.SNAPSHOT]
    ... 40 more
Caused by: javax.xml.bind.JAXBException: com.cubiksonline._2009._08.assessmentprovider.CompletedAssessmentInstance is not known to this context
    at com.sun.xml.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:246)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:261)
    at com.sun.xml.bind.v2.runtime.ElementBeanInfoImpl$1.serializeBody(ElementBeanInfoImpl.java:144)
    at com.sun.xml.bind.v2.runtime.ElementBeanInfoImpl$1.serializeBody(ElementBeanInfoImpl.java:189)
    at com.sun.xml.bind.v2.runtime.ElementBeanInfoImpl.serializeBody(ElementBeanInfoImpl.java:316)
    at com.sun.xml.bind.v2.runtime.ElementBeanInfoImpl.serializeRoot(ElementBeanInfoImpl.java:323)
    at com.sun.xml.bind.v2.runtime.ElementBeanInfoImpl.serializeRoot(ElementBeanInfoImpl.java:72)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:494)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:315)
    ... 43 more
Caused by: javax.xml.bind.JAXBException: com.cubiksonline._2009._08.assessmentprovider.CompletedAssessmentInstance is not known to this context
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:625)
    at com.sun.xml.bind.v2.runtime.ElementBeanInfoImpl$1.serializeBody(ElementBeanInfoImpl.java:141)
    ... 49 more 
```

有谁知道问题可能出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:11:03.420

我找到了解决此问题的方法。我必须`JAXBContext`像这样为特定的类创建：

```
private static JAXBContext createJaxbContext() {
    try {
        return JAXBContext.newInstance(CompletedAssessmentInstance.class);
    } catch (JAXBException ex) {
        LOGGER.error("Failed to create JAXB context: ", ex);
        return null;
    }
} 
```

这并不能解决问题，它只是一种解决方法。我`cxf-codegen-plugin:2.6.0`习惯从文件生成类`WSDL`，我注意到如果我将版本更改为`cxf-codegen-plugin:2.4.2`使用类加载器一切正常。如果我能找到问题，我会在这里发布解决方案。

# asp.net-mvc - Jstree，get_checked，传值给 div onselect 事件

> ID：12510567
> 
> 赞同：0
> 
> 时间：2012-09-20T10:18:05.583
> 
> 标签：asp.net-mvc, json, checkbox, jstree

我正在使用带有 Jstree 的 MVC c# asp.net 4.0 项目，但我有一个小问题，我有一个填充了 JSON 数组的 jstree。

我的问题是当在我的视图中检查到 div 时，我需要捕获 jstree 中复选框的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:32:00.737

好的，我终于得到了这个工作这是我希望它帮助某人的解决方案:)

首先你必须绑定：

```
 .bind('check_node.jstree', function (e, data) {
        $("#listSelectedActives").html(BuildList());
    })
   .bind('uncheck_node.jstree', function (e, data) {
       $("#listSelectedActives").html(BuildList()); 
```

然后使用此功能：

```
function BuildList() {
    var checked = $("#demoTree").jstree("get_checked", null, true);
    var output = "";

    $(checked).each(function (i, node) {
        var id = $(node).attr("ID");
        var text = $(node).attr("NodeText");

        output += "<p>ID: " + id + " TEXT: " + text + "</p>";
    })

    return output;
} 
```

如果这太令人困惑，请告诉我:)

# php - 简单的方法来检查一个字符串是否“喜欢”另一个与小丑

> ID：12510569
> 
> 赞同：0
> 
> 时间：2012-09-20T10:18:19.060
> 
> 标签：php, regex

我正在寻找一个与 SQL LIKE 语句相同的函数：

```
$match = match('abcdefg', 'a_c*fg'); 
```

其中“_”代表一个字符，“*”代表多个字符。

我需要用正则表达式部分替换这些字符，如“.+”代表“*”，但在它转义正则表达式字符之前，我应该用 preg_quote 转义这两个“_”和“*”。

有简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:20:24.757

看看[fnmatch](http://it.php.net/fnmatch)函数

或者

```
like('goo*','google.com');      -->  strpos('goo','google.com') === 0 
```

下一个，你可以使用strpos：

```
like('*gl*','google.com');      -->  strpos('gl', 'google.com') !== false; 
```

接下来你可以使用equals：

```
like('google.com','google.com') -->  'google.com' == 'google.com' 
```

当然，您可以对所有这些都使用正则表达式：

```
like('goo*','google.com');      -->  preg_match('#^goo.*$#','google.com') 
like('*gl*','google.com');      -->  preg_match('#^.*gl.*$#', 'google.com');
like('google.com','google.com') -->  preg_match('#^google\.com$#', 'google.com') 
```

要将您的模式转换为正则表达式，请在开头放置一个 ^，在末尾放置一个 $，然后将 * 替换为 .* 并转义 .s。

# php - 在变量中包含图像

> ID：12510570
> 
> 赞同：0
> 
> 时间：2012-09-20T10:18:20.907
> 
> 标签：php, image, variables, add

我希望这是一个愚蠢的问题，但在 php 方面我不是最好的。我想在下面的变量中添加一个图像，我需要做什么？

```
$usermessage = 

"
Thank you for joining our mailing list

We hope to see you very soon!
\n
Address 1
Address 2
<img src="images/wbf-logo.png" />

"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:19:47.877

使用单引号'

```
$usermessage = "
Thank you for joining our mailing list

We hope to see you very soon!
\n
Address 1
Address 2
<img src='images/wbf-logo.png' />

"; 
```

或添加反斜杠

```
$usermessage = "
Thank you for joining our mailing list

We hope to see you very soon!
\n
Address 1
Address 2
<img src=\"images/wbf-logo.png\" />

"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:20:47.820

试试这个，转义图像标签中的双引号

```
"
Thank you for joining our mailing list

We hope to see you very soon!
\n
Address 1
Address 2
<img src=\"images/wbf-logo.png\" />

"; 
```

或者

```
"
Thank you for joining our mailing list

We hope to see you very soon!
\n
Address 1
Address 2
<img src='images/wbf-logo.png' />

"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:18:47.947

尝试如下

```
"
Thank you for joining our mailing list

We hope to see you very soon!
\n
Address 1
Address 2
<img src=\"images/wbf-logo.png\" />

"; 
```

或者

```
'
Thank you for joining our mailing list

We hope to see you very soon!
\n
Address 1
Address 2
<img src="images/wbf-logo.png" />

'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T10:20:47.110

魔法斩击。我用 \n 替换了`<br />`.

```
$usermessage = "Thank you for joining our mailing list

We hope to see you very soon!
<br />
Address 1
Address 2
<img src=\"images/wbf-logo.png\" />

"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T10:21:10.487

```
$usermessage = '
Thank you for joining our mailing list <br />
We hope to see you very soon!
<br />
Address 1
Address 2
<img src="images/wbf-logo.png" />'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T10:21:26.883

只需添加反斜杠来保护双引号，如下所示：

```
$usermessage = "Thank you for joining our mailing list

We hope to see you very soon!
\n
Address 1
Address 2
<img src=\"images/wbf-logo.png\" />"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T10:23:21.850

您只需要在此处添加反斜杠：

例子：

```
<img src=\"images/wbf-logo.png\" />; 
```

# android - 在使用 if else 时遇到一种奇怪的情况

> ID：12510571
> 
> 赞同：0
> 
> 时间：2012-09-20T10:18:28.210
> 
> 标签：android, api, if-statement

我正在为 android 创建一个应用程序，其中我正在使用微调器检索 sms 网关的名称。我已经使用 api 发送短信，但我的主要 api 不支持其他 api 支持的一个网站，所以如果用户选择主要 api 不支持的网站，我实施了**如果其他**验证以使用第二个 api。我附上问题的屏幕截图。看看红框中的代码和日志猫。正如您在图像中看到的问题是，即使 IF CONDITION 为 TRUE，它也会击中 ELSE 部分。是什么导致了这样的问题？

![在此处输入图像描述](../Images/720c9e5fe7fb302bdef1f9a22586fce2.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T10:19:27.880

用于`.equals()`比较 java 中的字符串。

`==`比较字符串引用（内存位置）

`.equals()`比较字符串值。

**解决方案：：**

```
if(gateway_name.equals("ultoo")){

} 
```

*   [看这里](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

# git - 为什么签入文件称为“提交”？

> ID：12510574
> 
> 赞同：13
> 
> 时间：2012-09-20T10:18:29.233
> 
> 标签：git, svn, mercurial

在 git、mercurial 或 svn 等源代码控制存储库中签入文件的行为称为*提交*。有谁知道将其称为*提交*而不是*签入*的原因？

英语不是我的母语，所以可能是一些我不太了解她的语言，但我真正承诺的是什么？（希望我没有犯罪，但你永远不会知道。）

是“托运保存”的意思吗？它是否与事务有关（在事务结束时提交）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T10:22:15.650

“提交”一词也可以表示确保某些东西以供将来使用或保存。例如，“他将密码提交给记忆”。当您“提交”您的更改时，您将它们锁定为现在它们以供将来保存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T10:36:52.187

还要考虑版本控制存储库是参考，就像数据库是参考一样。
术语[提交](http://en.wikipedia.org/wiki/Commit_%28data_management%29)来自**数据管理**，使一组试探性的更改永久化。
（请注意，这对 git 很有意义，您可以在其中使用 向索引添加临时更改`git add`，然后使用 将它们记录在 repo 中`git commit`）

> 在这些版本控制系统的上下文中，提交是指**将源代码的最新更改提交到存储库**，并将这些更改作为存储库的主要修订的一部分。
> 因此，当其他用户从存储库执行操作时`UPDATE`，`checkout`他们将收到最新提交的版本，除非他们指定他们希望检索存储库中源代码的先前版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T12:21:20.643

从我的macs lex中盲目复制，3没有充分解释吗？

```
commit |kəˈmɪt|
verb ( commits, committing, committed ) [ with obj. ]
1 ...
3 (commit something to) transfer something to (a state or place where it can be kept or preserved): he composed a letter but didn't commit it to paper | she committed each tiny feature to memory.
• consign (someone) officially to prison, especially on remand: he was committed to prison for contempt of court.
• send (a person or case) for trial in a higher court: the magistrate decided to commit him for trial .
• send (someone) to be confined in a psychiatric hospital.
• refer (a parliamentary or legislative bill) to a committee. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-28T05:31:07.227

“签入”、“签出”术语至少可以追溯到 1980 年代初期的 UNIX RCS（修订控制系统），其命令字面意思是`ci`和`co`. 在这个和其他旧系统中，一个文件一次只能由一个用户编辑，因此“签出”类似于从图书馆签出一本书。在重新签入之前，您拥有编辑文件的专有权利。

当 CVS（并发版本控制系统）出现时，它保留了这个术语，即使该系统是为并发编辑而设计的，而且文件很少需要锁定。

但是对于像 GIT 这样的系统，您可以将整个目录树作为一个集合来处理，每个人都有自己的存储库，并且在这里或那里发送提交（更改）方面具有极大的灵活性。您可以选择将一台服务器设置为中央存储库，但您不必这样做。因此，签出或签入文件不再有意义。更重要的是，git 的作者选择为他们的系统放弃该术语。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-09-20T15:36:03.293

它主要是为了区分像 Subversion 这样的集中式 VCS 与分布式 VCS 之间的区别。集中式系统使用“签出”和“签入”术语。这些术语有助于表明存在一些控制这些操作的中央集线器或代理。它具有可以打开然后关闭的“保险箱”的内涵。当文件涉及锁定时尤其如此，就像在 Subversion / TFS 等上一样。

DVCS 更喜欢“提交”和“更新”等更不可知的术语，因为它说明这些操作中不涉及中央代理。

“签入”某些东西也会令人困惑，但仍然必须将其“推送”到远程服务器。“签入”具有，尤其是在 VCS 中，它的含义是它是一个端到端的过程。这在 DVCS 中当然不是真的。

您可以在您的 DVCS 中创建一个名为“签入”的命令别名，该别名执行提交和推送。例如。

# c++ - 高阶 voronoi 图

> ID：12510575
> 
> 赞同：2
> 
> 时间：2012-09-20T10:18:32.063
> 
> 标签：c++, c, computational-geometry, cgal, voronoi

是否有任何用于构建高阶 voronoi 图的 C/C++ 库？AFAIK，CGAL 仅支持普通的 voronoi 图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:00:52.490

从 Delaunay 三角剖分中检索 Voronoi 单元格应该适用于任何维度，因此 CGAL 的 Delaunay_d 类可能是一个解决方案。但是在更高维度上计算时间会显着增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:54:11.077

从 CGAL 4.1 开始，仍然没有用于*k*阶 Voronoi 图的 API。但是，[CGAL Ipelets 包](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/CGAL_ipelets/Chapter_main.html)中有一个演示，用于计算双*k*阶 Delaunay 三角剖分。作为起点，您可能会发现它很有用。

在 CGAL 发行版中，在 目录下`demo/CGAL_ipelets`，查找文件`multi_delaunay.cpp`和`include/CGAL_ipelets/k_delaunay.h`.

# android - 关于将实时视频流式传输到 android/ios/pc 的建议

> ID：12510576
> 
> 赞同：2
> 
> 时间：2012-09-20T10:18:33.103
> 
> 标签：android, ios, video-streaming

我想要一些关于将唯一视频直播流从服务器流式传输到的最佳方式的建议：

*   安卓（>4.0 还可以）
*   带有网络浏览器的 PC
*   iOS

我想保持低至 1/2 秒的延迟。

我可以用：

*   flash：适用于 PC，但没有 iOS 和 Android（仅适用于某些平板电脑）
*   HLS：因为延迟不好
*   专有库：它应该可以工作，但我必须在任何地方实现它
*   RTSP：仅适用于 Android

还有什么办法吗？专有库是要走的路吗？我在 Linux 上工作，但我主要对“使用这种技术”而不是“使用这种代码”感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:38:03.107

不确定，但您可以尝试使用 Web 服务器对 MP4/3gp 格式进行 HTTP 流式传输。Android 和 iOS 都支持 HTTP 流。但是您需要实现渐进式下载。

请指定您要在哪个操作系统上实现您的服务器。

对于 Windows - 您可以使用以下二进制文件将 moov 原子重新定位到媒体文件的开头，以使它们能够进行渐进式下载 [http://notboring.org/devblog/2009/07/qt-faststartexe-binary-for-windows/](http://notboring.org/devblog/2009/07/qt-faststartexe-binary-for-windows/)

让我们知道您的进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:39:14.223

Rtsp 可能是要走的路，但是 1/2 秒的延迟可能很难获得。我猜只适用于视频，如果你根本不缓冲，这可能适用于 ios

[https://github.com/mooncatventures-group/FFPlayer-tests](https://github.com/mooncatventures-group/FFPlayer-tests)

Android 支持 rtsp ，但不是很好。

您可以为 android 编译 ffmpeg 并使用 OpenGL 编写一个简单的播放器。我不能分享代码，因为我们是为客户做的，但这并不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:21:06.960

您可以实现 FFmpeg Server 进行直播。它为您提供各种选择。从位于 /etc/ffserver.conf 的配置文件中启用/禁用选项

[您可以在http://ffmpeg.org/ffserver.html](http://ffmpeg.org/ffserver.html)获取详细文档

# matlab - 如何关闭带有图形的窗口？

> ID：12510579
> 
> 赞同：-2
> 
> 时间：2012-09-20T10:18:44.653
> 
> 标签：matlab, plot, matlab-figure

我在matlab中有这段代码。如何关闭带有图形的窗口？我使用这个代码，但它不起作用，为什么？

```
plot(fig1);%Show chart
hold on;
if button == 1
    close(fig1);
    delete(fig1);
    break;
end; 
```

* * *

好的，我更改了代码。但它不起作用。为什么？

```
fig1 = plot(fig0);
hold on;
if button == 1
    close(fig1);
    break;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:23:36.553

`close` command should work.

For instance:

```
 fig1 = figure();
   close(fig1); 
```

The mistake is probably somewhere else:

1.  `fig1` is not a figure handle.
2.  `button` is not equal to 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:24:37.970

You're confusing `plot` with `figure`; the latter is for opening a figure, the first is to actually draw something on a figure.

```
fig_handle = figure;
plot(1:10);
if button==1
    close(fig_handle);
    delete(fig_handle);
    break;
end 
```

But this is likely not going to work, it seems as you want to press a button and then close the previously opened figure. Matlab code is run sequentially, so here the variable `button` is immediately checked after opening the figure. I think you're looking for a function callback linked to a button.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:23:49.563

You plot the data, which is in fig1\. You can not close the data, you need to close the figure

```
f=figure;
plot(1:10); % example
close(f); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:51:06.407

我想知道您是否需要在图形本身上使用属性。我以前遇到过完全相同的问题，但是您的代码看起来有点可疑。

首先，找出每个变量中的内容：

```
disp(class(fig1))
disp(ishandle(fig1))
disp(class(fig0))
disp(ishandle(fig0)) 
```

如果是句柄，那么据我所知`fig0`你不能打电话。`plot(fig0)`如果`fig0`是一组数据，那么你就是黄金。

顺便说一句，当你调用它时，调用可以由另一段代码设置`close()`的图形。如果所有变量都检查正常，`CloseRequestFcn`您可能想尝试。`close force`顺便说一句，我不确定所有反对票的用途，但您可能需要解释更多背景信息。这对我来说很好，但我想不是每个人都这么宽容。:-)

# iphone - iphone facebook状态更新第二次失败

> ID：12510583
> 
> 赞同：0
> 
> 时间：2012-09-20T10:18:52.853
> 
> 标签：iphone, ios, facebook

尝试从 iPhone 应用程序更新 facebook 状态，它第一次更新状态，但第二次失败给出错误消息

```
(com.facebook.sdk error5.)
 Error: HTTP status code: 400 
```

我正在使用他们的示例代码，这里是

```
 NSString *message = [NSString stringWithFormat:@"Check Out location at my App"];

    [FBSession openActiveSessionWithPermissions:[NSArray arrayWithObject:@"publish_actions"] allowLoginUI:YES
                              completionHandler:^(FBSession *session,
                                                  FBSessionState status,
                                                  NSError *errr) 
     {
         [ FBSession setActiveSession:session];
         // session might now be open.
         if (FBSession.activeSession.isOpen) {

           [FBRequestConnection startForPostStatusUpdate:message
                                    completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                        [self showAlert:message result:result error:error];
                                             }];

                         }
     }]; 
```

当我尝试重新更新状态时，它会出现上面提到的错误，我正在为 iOS 5 开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:49:57.820

如果您再次上传相同的状态，那么可能会被 Facebook 屏蔽

**尝试不同的状态。您不能再次更新相同的状态两次。**

# android-edittext - 点击键盘替换editText的文本（虚拟键盘）

> ID：12510588
> 
> 赞同：0
> 
> 时间：2012-09-20T10:19:05.053
> 
> 标签：android-edittext

我的editText的默认值为“000”。当我点击任何数字假设5时，我的editText应该显示“005”。然后我再次点击6它现在应该显示“056”。这些效果将发生在单击我的键盘上的数字（虚拟）而不是单击该键盘上的完成按钮。我该如何进行。请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T05:32:47.040

使用以下内容（假设您的布局中已经定义了 editText1）

```
 import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnKeyListener;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.Toast;
import android.widget.EditText;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final EditText editText1 = (EditText) findViewById(R.id.editText1);

    editText1.setOnKeyListener(new OnKeyListener()
    {
        public boolean onKey(View v, int keyCode, KeyEvent event)
        {     
        editText1.setText(keyCode);
        return true; // return true if you handled the keypress 
        }
    });
}
} 
```

# php - 使用 php selenium 报告页面加载时间

> ID：12510590
> 
> 赞同：0
> 
> 时间：2012-09-20T10:19:07.617
> 
> 标签：php, selenium, phpunit

我想测试我的 php web 应用程序中每个页面的加载速度，所以我想我应该使用 selenium 测试。我已经构建了这个测试来登录我的应用程序并访问两个页面

```
<?php
class Example extends PHPUnit_Extensions_Selenium2TestCase
{

  protected function setUp()
  {
    $this->setBrowser("firefox");
    $this->setBrowserUrl("xxxx");
  }

  public function testMyTestCase()
  {
    $this->open("/user/login");
    $this->type("id=username", "xxxx");
    $this->type("name=password", "xxxx");
    $this->click("name=submit");
    $this->waitForPageToLoad("30000");
    $this->open("xxxxxx");
    $this->waitForPageToLoad("30000");
    $this->open("xxxxx");
    $this->waitForPageToLoad("30000");
    $this->click("link=logout");
    $this->waitForPageToLoad("30000");
  }
}
?> 
```

现在我想要某种报告来输出这个测试访问的每个页面的加载时间。我正在考虑使用 php microtime 但这只会输出脚本渲染时间，但我想知道全部时间（脚本渲染、图像/css/js 加载以及是否有 ajax 调用）

是否有任何可能的方法来访问请求对象以获取请求的开始和结束时间？或某种插件来获取此信息？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:28:36.847

如果您在开发人员工具中使用 chrome，您可以在网络选项中查看图像、css、js 文件和 ajax 调用的加载时间

# jquery - 如何使用jquery获取表格行的属性值？

> ID：12510593
> 
> 赞同：2
> 
> 时间：2012-09-20T10:19:16.570
> 
> 标签：jquery, attributes

我有一个以下剃须刀来创建一个表。

```
@model IEnumerable<iBoxV5.Model.Common.AdvancedSearch>
<table id="SearchFieldsTable">
  <thead>
    <tr>
    <th>
        ColumnName
    </th>
    <th>
        FilterValues
    </th>
    <th>Updated Before</th>
    </tr>
</thead>
<tbody>
@foreach (var item in Model)
{
<tr ColumnName=@item.ColumnName DatabaseColumn=@item.DatabaseColumn DisplayName=@item.DisplayName Datatype=@item.Datatype id=@(index++)>
    <td>
        @Html.DisplayFor(modelItem => item.ColumnName)
    </td>
    <td>
        @Html.TextBoxFor(modelItem => item.FilterValue, new { @class = "FrmTextBox advSearch" });

        @Html.TextBoxFor(modelItem => item.FilterValue, new { @class = "FrmTextBox advSearch" });
    </td>
    <td>
        @Html.TextBoxFor(modelItem => item.FilterValueTo, new { @class = "FrmTextBox advSearch" });
    </td>
</tr>
}
</tbody>
</table> 
```

在上面，我为 ColumnName 添加了一些属性。

我想为表的每一行构建一个 JSON。

我尝试使用以下 jquery Snippet。

```
var SearchFieldsTable = $("#SearchFieldsTable tbody");

var trows = SearchFieldsTable[0].rows;

$.each(trows, function (index, row) {
    var ColumnName=$(row).attr("ColumnName");
}); 
```

但是上面没有返回我期望的 ColumnName 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-07T21:23:08.650

试试这个;

```
$("#trowId").attr("attrbuteName"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:21:11.767

您可以通过类或 id 来获取值

```
var ColumnName=$(row).attr(".ColumnName").val(); 
```

或者

```
var ColumnName=$(row).attr("#ColumnName").val(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T10:32:09.700

可能这会有所帮助。

```
var SearchFieldsTable = $("#SearchFieldsTable tbody");

var trows = SearchFieldsTable.children("tr");

$.each(trows, function (index, row) {
    var ColumnName=$(row).attr("ColumnName");
    // .... Your codes here 
}); 
```

**仅供参考：** “tbody”没有“行”。以下是错误的

```
SearchFieldsTable[0].rows 
```

您可以使用下面的代码来代替上面的代码。

```
var SearchFieldsTable = $("#SearchFieldsTable"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T10:21:48.490

您在每次迭代中定义一个局部变量，现在您的 ColumnName 变量只存储最后一行的属性。也不`ColumnName`是有效的属性。您可以使用[`data-*`](http://dev.w3.org/html5/spec/global-attributes.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)属性和`map`方法。

```
var columnName = $("#SearchFieldsTable tbody tr").map(function(){
                      return $(this).data('ColumnName')
                 }) 
```

现在 columnName 是一个列名数组。

*   [地图（）](http://api.jquery.com/map/)
*   [数据（）](http://api.jquery.com/data/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T10:23:03.150

一些浏览器不支持自定义属性。因此，您可以更好地使用`data()`.

```
var ColumnName = $(row).data("ColumnName"); 
```

在该行中，将其定义为：

```
<tr data-ColumnName=@item.ColumnName ... 
```

# struts2 - 如何使用显示标签在列表中显示集合

> ID：12510598
> 
> 赞同：1
> 
> 时间：2012-09-20T10:19:48.007
> 
> 标签：struts2, jsp-tags

好的，这是我有两个 pojo 类的场景，它们如下

```
public class CodeSetting {

    private long codeSettingId;
    private String code;    
    private String codeDescription;
    private CodeType codeType;
    private Collection<Company> company = new ArrayList<Company>();

    }
public class Company
{
      private String comapny Name;  
} 
```

现在我想使用显示标签代码设置来显示代码设置，并且公司有很多对多的关系。

所以使用显示标签我可以通过使用代码设置对象列表来显示代码设置的属性。

但是显示公司时出现问题

由于它也是一个集合，它还需要为每个代码设置对象进行迭代，但不可能使用显示标签尝试使用 struts2 的迭代器标签，但仍然没有用

我希望我的显示器是这样的

代码 代码类型 公司

M 婚姻 abc,bca

如果有人遇到这种情况并解决了问题，请指导我完成它会非常有帮助。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:33:12.163

终于得到了答案需要在显示标签中使用嵌套列唯一的问题是在导出时，因为我们正在使用嵌套子列表

```
<display:table id="parent"  name="codesettingList" cellpadding="7" cellspacing="5" pagesize="5" requestURI="/viewCodeSetting" >

                <display:column property="codeSettingId"  title="Code Setting ID" href="viewCodeSettingSelected" paramId="codeSettingId"/>
                <display:column property="code" title="Code"/>
                <display:column property="codeDescription" title="Code Description"/>
                <display:column property="codeType.codeType" title="Code Type" />

                <c:set var="nestedName" value="codesettingList[${parent_rowNum -1}].company" />

                <display:column title="Company">

                    <display:table  name="${nestedName}" id="child${parent_rowNum}" class="simple sublist">
                        <display:column property="companyName" ></display:column>
                    </display:table>

                </display:column> 

                <display:setProperty name="paging.banner.placement" value="bottom" />

            </display:table> 
```

# javascript - 减少使用 FileAPI 读取图像的内存和 CPU 使用率

> ID：12510599
> 
> 赞同：0
> 
> 时间：2012-09-20T10:19:51.353
> 
> 标签：javascript, canvas, fileapi

所以我使用这个函数从用户硬盘读取图像并将它们显示为缩略图，如果他们有一个能够使用 FileAPI 的浏览器：

```
// loop over them sequentially to prevent hogging memory
function load(i) {
    reader.onload = (function(file) {
        return function(e) {
            var loadNext = function(i) {
                if (data[i + 1] !== undefined) {
                    setTimeout(function() {
                        load(i + 1);
                    }, 100);
                }
            };

            if (e.target.result.match(/^data\:image\/.*$/) === null) {
                loadNext(i);
                return;
            }

            // output file name
            placeholders[i].custom.children.title.html(file.name);

            // the server has returned an error, don't load the image
            if (placeholders[i].custom.error === true) {
                placeholders[i].custom.update({loaded: true});
                loadNext(i);
                return;
            }

            // create new image
            var $image = $('<img />')
                .attr('alt', '')
                .attr('src', e.target.result)
                .attr('title', file.name);

            // setup remove link
            placeholders[i].custom.children.remove
                .click(function(event) {event.preventDefault();})
                .attr('data-file-name', file.name);

            // once finished loading
            $image.load(function() {
                if (placeholders[i].custom.error !== true) {
                    placeholders[i].addClass('success').attr('id', 'preview-' + file.name)
                    placeholders[i].custom.children.content.html($image);
                }
                placeholders[i].custom.update({loaded: true});

                loadNext(i);
            });
            return;
        }
    })(data[i]);

    reader.readAsDataURL(data[i]);
}
load(0); 
```

问题是，如果他们上传特别大的文件或大量文件，那么 CPU 使用率（铬）和内存使用率（火狐）往往会飙升。

不久前我正在解决这个问题（我不得不停止这个项目并返回它）并且我设法通过确保文件（来自一个`<input type="file" multiple="multiple" />`元素）按顺序加载来解决一些问题。不幸的是，这仍然不够，所以我开始着手以块的形式加载数据，并在读取每个块（slice 和 readAsArrayBuffer）时添加一个短暂的延迟，这在很大程度上解决了读取问题。

如何将数组缓冲区中的数据输出到画布？我上次展示了一些东西，但它被打乱得面目全非。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:19:09.633

[http://jsfiddle.net/8A3tP/1/](http://jsfiddle.net/8A3tP/1/)

这就是我最终如何做到的。我使用`window.btoa()`将二进制数据（使用 readAsBinaryString 而不是 readAsArrayBuffer）转换为 base64 字符串。从那里我可以创建一个图像对象`var image = document.createElement('img'); image.src = result;`并使用它来填充画布 Canvas2DContext.drawImage(image, 0, 0);

# .net - 在 VB 上从不同的形式更改变量

> ID：12510600
> 
> 赞同：0
> 
> 时间：2012-09-20T10:19:55.703
> 
> 标签：.net, vb.net

我一直在为学校作业在 VB 上创建游戏，但在创建难度设置时遇到了麻烦。我的标题屏幕上有四个按钮，您可以在其中选择难度。当您单击其中一个按钮时，它应该添加到主游戏的“速度”变量中。我已经尝试了一些方法，但它似乎仍然不起作用。

这是我正在使用的代码。

**主要游戏变量：**

```
Public speed As Single = 5
Dim xVel As Single = Math.Cos(speed) * speed
Dim yVel As Single = Math.Sin(speed) * speed 
```

**标题画面代码（难选）：**

```
Private Sub btnPlay_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnPlay.Click
    gameMain.Show()

    If btnEasy.Enabled = False Then
        gameMain.speed = 5
    End If

    If btnMedium.Enabled = False Then
        gameMain.speed = gameMain.speed + 2
    End If

    If btnHard.Enabled = False Then
        gameMain.speed = gameMain.speed + 5
    End If

    If btnInsane.Enabled = False Then
        gameMain.speed = gameMain.speed + 10
    End If

End Sub 
```

因此，当您单击按钮时，它会被禁用并更改颜色。当你开始游戏时，如果其中一个按钮被禁用，它应该将相应的数量添加到“速度”变量中。

我也尝试在主游戏表单上放置类似的代码，但也没有用。我试图使代码尽可能简单，因为我仍然是 VB 的业余爱好者。

任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:57:33.323

您的代码仅更改“速度”字段，不会重新计算 xVel 和 yVel 的值。

*您可以通过将速度作为属性*而不是字段来解决此问题。属性设置器可以调整速度矢量：

```
Private _speed As Single
Private xVel As Single
Private yVel As Single
Private angle As Single

Public Sub New()
    InitializeComponent()
    Speed = 5
End Sub

Public Property Speed() As Single
    Get
        Return _speed
    End Get
    Set(ByVal value As Single)
        _speed = value
        xVel = _speed * Math.Cos(angle)
        yVel = _speed * Math.Sin(angle)
    End Set
End Property 
```

接下来你需要继续工作`angle`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:29:58.453

正如@AYK 所建议的那样，我在上面发布我的评论作为答案，这样我们就可以结束这个问题了......

它有点小技巧，但是您可以将速度变量移动到全局模块中，使其成为全局静态变量并查看是否有效吗？

# android - 如何为多个权限使用一个 SyncAdapter 类？

> ID：12510603
> 
> 赞同：9
> 
> 时间：2012-09-20T10:20:10.080
> 
> 标签：android, synchronization

我想为多个权限重用我的 SyncAdapter。该方法 `onPerformSync(Account account, Bundle extras, String authority, ContentProviderClient provider, SyncResult syncResult)`将权限作为参数传递。但是我怎样才能以这种方式注册呢？

我从 AndroidManifest.xml 中的以下内容开始：

```
<service
    android:name=".sync.SyncService" >
    <intent-filter>
        <action android:name="android.content.SyncAdapter" />
    </intent-filter>

    <meta-data
        android:name="android.content.SyncAdapter"
        android:resource="@xml/syncadapter1" />
</service> 
```

我尝试了不同的注册方式，`@xml/syncadapter2`但没有成功。在没有为每个权限派生的 SyncAdapter 类的情况下实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T22:31:43.950

这个问题是几个月前提出的，但我还是想回答......

`onPerformSync()`在启动新的 SyncThread 以执行同步操作时调用。每个 SyncAdapter 都会启动一个 SyncThread，该 SyncThread 绑定到 中定义的权限`sync-adapter.xml`，并且在这个 xml 文件中不能定义多个权限。

AbstractThreadedSyncAdapter（SyncAdapter 超类）根本不是为了处理多个权限而编写的。它包含一个`ISyncAdapterImpl`作为 Singleton 实现的最终类，因此每次`startSync()`调用时，都会使用相同的权限进行同步。

或者，您最初是否尝试`@xml/syncadapter2`在 SyncService 中添加额外的元数据？这相当于将多个 SyncAdapter 注册到单个 SyncService。它在技术上是可行的（因为您可以在服务标签中定义多个元数据标签）但是操作系统本身是在`service.onBind(Intent intent)`运行同步时调用您的服务的罪魁祸首，并且您无法轻松控制它传递的意图。如果您可以控制它，您可以在意图的包中放置一个键，该键将确定要绑定哪些已注册的同步适配器。即便如此，这似乎也很艰难。

综上所述，为每个权限实现不同的 SyncAdapter（也使用他们自己的服务），并将类似的操作抽象到一个在`onPerformSync()`. 无论如何，从长远来看，这种策略更易于维护，因为如果需要删除其中一个 ContentProvider，则删除其对应的 SyncAdapter 和 SyncService 会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T04:18:51.690

我不确定这是一个正确的答案。

1.  `onBind`与同步适配器关联的权限无关。它只应该返回一个接口，调用者将使用该接口与服务进行通信。
2.  服务实现（提供接口）负责了解什么是要同步的权限。这是在通话中完成的`onPerformSync`。
3.  派生自 的实现`AbstractThreadedSyncAdapter`必须是线程安全的，因为每次同步都可能调用它。

因此，这不是关于“不可能”，而是关于服务的正确实施。在一个服务中实现多个同步适配器相当于注册多个适配器，只需通过权限切换内部实现即可。

# excel - 在 vlookup 函数中使用超链接

> ID：12510611
> 
> 赞同：2
> 
> 时间：2012-09-20T10:20:45.560
> 
> 标签：excel, excel-formula, vlookup

对此非常新，只管理了 vlookup，无论如何，我有一个包含两个工作表的工作簿。在 Sheet1 上，我有以下公式`(=VLOOKUP(CZ54,Sheet2!$A$1:$Y$176,3,FALSE))`，它显示来自 Sheet2 的 ID 号。这可以正常工作，但是我如何才能显示为超链接，所以一旦单击它就会转到它从 Sheet2 上的 vloopkup 获得的特定单元格？

我已经尝试过`=HYPERLINK(VLOOKUP(CZ54,Sheet2!$A$1:$Y$176,3,FALSE`）但我收到错误“无法获取指定的文件”。

如果有人能指出我正确的方向，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:26:45.960

这是丹尼尔公式的更紧凑版本。

使用`Hyperlink`链接到同一工作簿中的另一个工作表，您可以将工作簿名称的引用替换为`#`.

例如`=HYPERLINK("#Sheet2!$C$10","Click Here")`

所以，应用这个你得到

```
=HYPERLINK("#"&ADDRESS(MATCH(E21,Sheet2!$A$1:$A$176),3,,,"sheet2"),VLOOKUP(E21,Sheet2!$A$1:$Y$176,3,FALSE)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T12:44:14.057

好吧……这看起来很疯狂。这应该适合你。我在我的机器上对其进行了测试，它可以工作：

```
=HYPERLINK(MID(CELL("filename"),SEARCH("[",CELL("filename")), SEARCH("]",CELL("filename"))-SEARCH("[",CELL("filename"))+1) & ADDRESS(MATCH(CZ54,Sheet2!$A$1:$A$176),3,,,"sheet2"),VLOOKUP(CZ54,Sheet2!$A$1:$Y$176,3,FALSE)) 
```

让我们稍微分解一下，以解释一些部分：

```
MID(CELL("filename"),SEARCH("[",CELL("filename")), SEARCH("]",CELL("filename"))-SEARCH("[",CELL("filename"))+1) 
```

返回一个字符串 [currentFileName]，它是工作簿中超链接所需的格式。

```
MATCH(CZ54,Sheet2!$A$1:$A$176),3,,,"sheet2") 
```

返回 VLookup 范围第一列中 CZ54 值的行号。

```
ADDRESS(MATCH(CZ54,Sheet2!$A$1:$A$176),3,,,"sheet2") 
```

返回找到的行的地址，以及 sheet2 中的列（3，来自您的 vlookup）。

如此结合：

```
MID(CELL("filename"),SEARCH("[",CELL("filename")), SEARCH("]",CELL("filename"))-SEARCH("[",CELL("filename"))+1) & ADDRESS(MATCH(CZ54,Sheet2!$A$1:$A$176),3,,,"sheet2") 
```

返回超链接的实际地址，即`HYPERLINK`公式的第一个参数。

第二个参数是您提供的 Vlookup，瞧。

编辑：如果有人尝试将其用于类似问题，则会发出警告，如果 Match 或 Vlookup 中使用的 lookup_array 不是分别从第 1 行或第 1 列开始，您将需要用 +( 起始行偏移发送到 ADDRESS 的值或列 - 1)。示例：`Match(CZ54,$A$2:$A$176)+1`而不是`MATCH(CZ54,Sheet2!$A$1:$A$176)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:02:28.560

HYPERLINK 正在寻找文本，所以如果你要做类似的事情

```
=HYPERLINK(left(VLOOKUP(CZ54,Sheet2!$A$1:$Y$176,3,FALSE),255)) 
```

它应该返回一个可用的超链接

# php - 主站点从文件服务器获取文件，然后将其提供给用户。如何设置主站点以生成直接下载链接

> ID：12510614
> 
> 赞同：0
> 
> 时间：2012-09-20T10:20:48.507
> 
> 标签：php

抱歉打扰你。我有下载脚本。它是从远程服务器下载到本地服务器，然后发送给用户下载。主站点从文件服务器获取文件，然后将其提供给用户。我希望主站点从远程服务器传递直接链接。

我不知道如何将其直接发送给用户。现在它在我的网站上造成负载和带宽问题。任何想法，如何做到这一点。

```
public function download()
    {

        // remove session
        if (isset($_SESSION['showDownload']))
        {
            // reset session variable for next time
            $_SESSION['showDownload'] = null;
            unset($_SESSION['showDownload']);
            session_write_close();
        }

        // php script timeout for long downloads (2 days!)
        set_time_limit(60 * 60 * 24 * 2);

        // load the server the file is on
        $storageType         = 'local';
        $storageLocation     = _CONFIG_FILE_STORAGE_PATH;
        $uploadServerDetails = $this->loadServer();
        if ($uploadServerDetails != false)
        {
            $storageLocation = $uploadServerDetails['storagePath'];
            $storageType     = $uploadServerDetails['serverType'];

            // if no storage path set & local, use system default
            if ((strlen($storageLocation) == 0) && ($storageType == 'local'))
            {
                $storageLocation = _CONFIG_FILE_STORAGE_PATH;
            }
        }

        // get file path
        $fullPath = $this->getFullFilePath($storageLocation);

        // open file - via ftp
        if ($storageType == 'remote')
        {
            // connect via ftp
            $conn_id = ftp_connect($uploadServerDetails['ipAddress'], $uploadServerDetails['ftpPort'], 30);
            if ($conn_id === false)
            {
                $this->errorMsg = 'Could not connect to ' . $uploadServerDetails['ipAddress'] . ' to upload file.';
                return false;
            }

            // authenticate
            $login_result = ftp_login($conn_id, $uploadServerDetails['ftpUsername'], $uploadServerDetails['ftpPassword']);
            if ($login_result === false)
            {
                $this->errorMsg = 'Could not login to ' . $uploadServerDetails['ipAddress'] . ' with supplied credentials.';
                return false;
            }

            // prepare the stream of data
            $pipes = stream_socket_pair(STREAM_PF_UNIX, STREAM_SOCK_STREAM, STREAM_IPPROTO_IP);
            if ($pipes === false)
            {
                $this->errorMsg = 'Could not create stream to download file on ' . $uploadServerDetails['ipAddress'];
                return false;
            }

            stream_set_write_buffer($pipes[0], 10000);
            stream_set_timeout($pipes[1], 10);
            stream_set_blocking($pipes[1], 0);

            $fail = false;
            $ret  = ftp_nb_fget($conn_id, $pipes[0], $fullPath, FTP_BINARY, FTP_AUTORESUME);
        }
        // open file - locally
        else
        {
            $handle = @fopen($fullPath, "r");
            if (!$handle)
            {
                $this->errorMsg = 'Could not open file for reading.';
                return false;
            }
        }

        // download speed
        $speed = 0;

        // if free/non user
        $Auth = Auth::getAuth();
        if (($Auth->loggedIn == false) || ($Auth->level == 'free user'))
        {
            $speed = (int) SITE_CONFIG_FREE_USER_MAX_DOWNLOAD_SPEED;
        }
        else
        {
            $speed = (int) SITE_CONFIG_PREMIUM_USER_MAX_DOWNLOAD_SPEED;
        }

        // do we need to throttle the speed?
        if ($speed > 0)
        {
            // create new throttle config
            $config = new ThrottleConfig();

            // set standard transfer rate (in bytes/second)
            $config->burstLimit = $speed;
            $config->rateLimit = $speed;

            // enable module (this is a default value)
            $config->enabled = true;

            // start throttling
            $x = new Throttle($config);
        }

        // output some headers
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Content-type: " . $this->fileType);
        header("Pragma: public");
        header("Content-Disposition: attachment; filename=\"" . str_replace("\"", "", $this->originalFilename) . "\"");
        header("Content-Description: File Transfer");
        header("Content-Length: " . $this->fileSize);

        // output file - via ftp
        if ($storageType == 'remote')
        {
            while ($ret == FTP_MOREDATA)
            {
                $contents = stream_get_contents($pipes[1]);
                if ($contents !== false)
                {
                    echo $contents;
                    flush();
                }

                $ret = ftp_nb_continue($conn_id);
            }

            /*
              $contents = stream_get_contents($pipes[1]);
              if($contents !== false)
              {
              echo $contents;
              flush();
              }
             */

            fclose($pipes[0]);
            fclose($pipes[1]);
        }
        // output file - local
        else
        {
            while (($buffer = fgets($handle, 4096)) !== false)
            {
                echo $buffer;
            }
            fclose($handle);
        }
        exit();
    }

    public function loadServer()
    {
        // load the server the file is on
        if ((int) $this->serverId)
        {
            // load from the db
            $db                  = Database::getDatabase(true);
            $uploadServerDetails = $db->getRow('SELECT * FROM file_server WHERE id = ' . $db->quote((int) $this->serverId));
            $db->close();
            if (!$uploadServerDetails)
            {
                return false;
            }

            return $uploadServerDetails;
        }

        return false;
    } 
```

提前感谢您的宝贵时间。

说明：

我没有任何文件的直接链接。up函数是生成链接，远程服务器上的文件名不同（Handel由上述函数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:25:33.463

If the FTP server is accessible to the general public - via the Internet - and doesn't need a username or password (looks like it may not), then you can provide the following link:

```
<a href="ftp://path.to.server:port/path/to/file">Download via FTP</a> 
```

# c# - 通过 SqlBulkCopy 导入 Excel 文件时出现不同的错误

> ID：12510619
> 
> 赞同：2
> 
> 时间：2012-09-20T10:21:00.143
> 
> 标签：c#, sql, excel

我正在使用将 Excel 文件导入 SQL Server`SqlBulkCopy`

但每次我得到不同的错误，比如

> *无法更新。数据库或对象是只读的。*

或者

> *找不到可安装的 ISAM。*

或者

> *Microsoft Jet 数据库引擎找不到该对象。确保对象存在并且正确拼写其名称和路径名。*

在下面检查我的代码...

```
String strConnection = ConfigurationManager.ConnectionStrings["MyConnection"].ConnectionString;
string excelConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source="+filepath+";Extended Properties=Excel 8.0;HDR=YES;";

//Create Connection to Excel work book
OleDbConnection excelConnection = new OleDbConnection(excelConnectionString);

//Create OleDbCommand to fetch data from Excel
OleDbCommand cmd = new OleDbCommand
("Select * from [Sheet1$]",
excelConnection);
MessageBox.Show("ss");
excelConnection.Open();
MessageBox.Show("ss2");
OleDbDataReader dReader;
dReader = cmd.ExecuteReader();
MessageBox.Show("ss1");
SqlBulkCopy sqlBulk = new SqlBulkCopy(strConnection);
sqlBulk.DestinationTableName = "RecExcelTable";
//sqlBulk.ColumnMappings.Add("ID", "ID");
//sqlBulk.ColumnMappings.Add("Name", "Name");
sqlBulk.WriteToServer(dReader); 
```

我还需要为任何版本的 Excel 兼容此代码。

我该如何做到这一点并解决我的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:44:03.307

我有类似的问题。检查文件路径是否正确

喜欢

```
C:\\file.xls 
```

作为测试。

并检查版本是否正确。8.0 已经很老了，我认为这就像 Office 2000，不是吗？

# jquery - 在 jPlayer 播放列表中显示时长和剩余时间

> ID：12510623
> 
> 赞同：2
> 
> 时间：2012-09-20T10:21:08.907
> 
> 标签：jquery, jplayer

我想知道是否可以在 jPlayer 播放列表中显示持续时间和剩余时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-16T15:39:36.237

我知道已经很晚了，但您也可以像我一样手动显示您想要播放列表中任何歌曲的任何信息：

1.打开 jplayer.playlist.js 并在`listItem += "</div></li>";`添加您的自定义 html 元素之前（稍后将在每首歌曲中可见），例如：

```
listItem += "<div class='custom-duration'>" + media.customduration + "</div>"; 
```

2.在您的 jPlayerPlaylist js 代码中，在每首歌曲上添加一个新行，这将定义您的 customduration 元素，它看起来像这样：

```
{
      title:"Cro Magnon Man",
      mp3:"http://www.jplayer.org/audio/mp3/TSP-01-Cro_magnon_man.mp3",
      customduration: "3:22"
    }, 
```

此方法很有用，例如，您将键入一首 30 秒歌曲的链接，但在该自定义字段中，它将显示完整的持续时间（您为每首歌曲键入的持续时间）。这样，该预览的实际持续时间就不会干扰您输入的信息。

# android - 如何将Android后置摄像头切换到前置摄像头？

> ID：12510627
> 
> 赞同：0
> 
> 时间：2012-09-20T10:21:11.877
> 
> 标签：android

> **可能重复：**
> [如何在android平台上打开“前置摄像头”？](https://stackoverflow.com/questions/2779002/how-to-open-front-camera-on-android-platform)

相机的默认设置又回来了。
我添加了一个按钮。
当用户点击它时，它将变为前置摄像头。
我应该执行哪些步骤？
由于后置摄像头正在预览，我应该先停止预览并且camera = null然后更改为前置摄像头吗？
我对此感到困惑。
请帮忙。谢谢。

# iphone - 应用程序在图像捕获时崩溃

> ID：12510630
> 
> 赞同：1
> 
> 时间：2012-09-20T10:21:23.123
> 
> 标签：iphone, ios, uiimage, uiimagepickercontroller

我正在通过相机拍摄图像。然后我移动到下一个控制器，在其中显示捕获的图像。我回去捕捉图像屏幕，这个循环持续 10 到 15 次。在此之后，当我尝试捕获图像时，应用程序会通过发出“内存不足警告”而崩溃。这是代码：

```
- (IBAction) takePhoto:(id) sender
{
    /*
    tempControl *intermediate=[[tempControl alloc] initWithNibName:@"tempControl" bundle:nil];
    [self.navigationController pushViewController:intermediate animated:YES];
    [intermediate release];
     */
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]){
        imagePickerController= [[UIImagePickerController alloc] init];
        [imagePickerController setMediaTypes:[NSArray arrayWithObjects:(NSString *)kUTTypeImage, nil]];
        imagePickerController.delegate = self;
        imagePickerController.sourceType =  UIImagePickerControllerSourceTypeCamera;

        [self presentModalViewController:imagePickerController animated:YES];
    }
    else{
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Camera Alert" message:@"Device Lacks Camera" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
            [alert release];
            alert = nil;
    }
}

- (void)imagePickerController:(UIImagePickerController *)picker 
        didFinishPickingImage:(UIImage *)image
                  editingInfo:(NSDictionary *)editingInfo{

    [picker dismissModalViewControllerAnimated:NO];
    [picker release];
    picker =nil;
    /*
    cropReciept *recieptToCrop=[[cropReciept alloc] initWithNibName:@"cropReciept" bundle:nil];
    [recieptToCrop setReciept:image];
    [self.navigationController pushViewController:recieptToCrop animated:YES];
    [recieptToCrop release];
     */
    OCRDemoViewController *recieptToCrop=[[OCRDemoViewController alloc] initWithNibName:@"CropTestViewController" bundle:nil];
    [recieptToCrop setImageToCrop:image];
    if ([self.selectedTicketType isEqualToString:@"MAXI QuickPick"]) {
        recieptToCrop.selectedValueOfTicket=50;
        recieptToCrop.drawNumber=self.selectedDrawNumber;
    }
    else if ([self.selectedTicketType isEqualToString:@"JUMBO QuickPick"]) {
        recieptToCrop.selectedValueOfTicket=36;
        recieptToCrop.drawNumber=self.selectedDrawNumber;
    }
    else if ([self.selectedTicketType isEqualToString:@"MEGA QuickPick"]) {
        recieptToCrop.selectedValueOfTicket=24;
        recieptToCrop.drawNumber=self.selectedDrawNumber;
    }
    else if ([self.selectedTicketType isEqualToString:@"REGULAR QuickPick"]) {
        recieptToCrop.selectedValueOfTicket=12;
        recieptToCrop.drawNumber=self.selectedDrawNumber;
    }
    else if ([self.selectedTicketType isEqualToString:@"SUPER QuickPick"]) {
        recieptToCrop.selectedValueOfTicket=18;
        recieptToCrop.drawNumber=self.selectedDrawNumber;
    }

    [self.navigationController pushViewController:recieptToCrop animated:YES];
    [recieptToCrop release];
    recieptToCrop=nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:32:15.107

不要在委托回调中释放选择器，而是在下一个运行循环中分派一个块来执行它（您也可以使用 performSelector after:0）。

还可以使用 Instruments ObjectAlloc 和 Leaks 来查看未释放的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:17:53.857

您需要调整图像大小然后使用它。从相机点击的图像约为。超过 2 mb。尝试调整从相机捕获的图像大小，然后使用它。你需要做：-

```
- (void)imagePickerController:(UIImagePickerController *)picker 
        didFinishPickingImage:(UIImage *)image
                  editingInfo:(NSDictionary *)editingInfo{
UIGraphicsBeginImageContext(size);//640*920 or what ever you think appropriate 
    [image drawInRect:CGRectMake(0, 0, size.width, size.height)];
    UIImage *finalImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();
    [picker dismissModalViewControllerAnimated:NO];
    [picker release];
    picker =nil;
}
And now use finalImage instead of image 
```

# magento - Magento 1.7.0.2 卡在导入数据检查上

> ID：12510631
> 
> 赞同：1
> 
> 时间：2012-09-20T10:21:23.980
> 
> 标签：magento, import, magento-1.7

我们最近安装了 magento 1.7.0.2 并建立了一个商店，我们已经进口了 6000 多种产品，没有任何问题。

现在我们在该安装中添加了另外 2 个网站，之后我们遇到了无法再导入的问题。当我们上传 csv 它挂在检查数据上

执行时间限制已更改为 300

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:08:09.770

您应该将 mysql cvs 大小更改为最高值。问题将得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:06:23.860

您是否使用了良好的专用服务器？因为 3 个商店的 6000 种产品可能会在一些产品表中添加多达 18K 行。

您打算将多少产品导入您的商店？

# doctrine-orm - 如何使用教义2 zf2在视图助手中获取实体管理器

> ID：12510636
> 
> 赞同：3
> 
> 时间：2012-09-20T10:21:42.947
> 
> 标签：doctrine-orm, zend-framework2

以下代码在 AbstractPlugin 中运行良好，但我需要在视图助手中访问实体管理器。如何在视图助手中获取实体管理器？

有没有办法将 entityManager 实例保存在注册表中的某个位置，以便我可以随时随地访问它？那会是一个好习惯吗？

```
use Zend\View\Helper\AbstractHelper;
use Doctrine\ORM\EntityManager;
use Zend\ServiceManager\ServiceManagerAwareInterface;
use Zend\ServiceManager\ServiceManager;

class IsAuthz extends AbstractHelper implements ServiceManagerAwareInterface 
{

    /*
     * @var Doctrine\ORM\EntityManager
    */
    protected $em;
    protected $sm;    

    public function __construct($e) {
        $app = $e->getParam('application');
        $em = $this->getEntityManager();        
    }

    public function __invoke()
    {     
        return $this;

    }

/**
     * @return Doctrine\ORM\EntityManager
     */
    public function getEntityManager() 
    {

        if (null === $this->em) {
            $this->em = $this->sm->getServiceLocator()->get('doctrine.entitymanager.orm_default');
        }
        return $this->em;
    }

    /**
     * 
     * @param \Doctrine\ORM\EntityManager $em
     */
    public function setEntityManager(EntityManager $em) 
    {
        $this->em = $em;
    }

    /**
     * Retrieve service manager instance
     *
     * @return ServiceManager
     */
    public function getServiceManager() 
    {
        return $this->sm->getServiceLocator();
    }

    /**
     * Set service manager instance
     *
     * @param ServiceManager $locator
     * @return void
     */
    public function setServiceManager(ServiceManager $serviceManager) 
    {
        $this->sm = $serviceManager;
    }

} 
```

错误：

```
Fatal error: Call to a member function getServiceLocator() on a non-object in XXX/XXX/src/XXX/View/Helper/IsAuthz.php on line 41 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:25:33.317

正如“Daniel M”所说，最好使用服务来保持数据逻辑分离。但是有人仍然想在视图助手中使用数据逻辑，他可以这样做。我已将上述代码更改如下。

```
public function __construct($e, $sm) {
        $app = $e->getParam('application');
        $this->sm = $sm;
        $em = $this->getEntityManager();        
    } 
```

然后我使用 module.php 注入 $sm 对象

```
 public function onBootstrap($e)
    {
      $serviceManager->get('viewhelpermanager')->setFactory('IsAuthz', function ($sm) use ($e) {
           return new \xxx\View\Helper\IsAuthz($e, $sm); 
        });
} 
```

更好的方法是为此目的[使用 zend 框架 2 中的服务。](https://stackoverflow.com/questions/12562538/zf2-creation-of-simple-service-and-access-it-through-viewhelper)

# .net - 如何在 PowerBuilder 12.5 调试器中查看数据缓冲区？

> ID：12510641
> 
> 赞同：0
> 
> 时间：2012-09-20T10:22:08.037
> 
> 标签：.net, debugging, powerbuilder, datastore, watch

由于此选项应该是 PowerBuilder 12.5 .NET 中的新功能，但在 Debugger 中我看不到 DataStore 对象中的任何数据。Debugger中显示的对象信息只有“base”、“DataObject”和“FlowDirection”，仅此而已。调试时如何查看 DataStore 对象中的数据？

在以前的 PowerBuilder 版本中，我可以通过调用 Watch 中的 SaveAs() 方法来做到这一点，并且 DataStore 数据保存在本地文件中。但是现在，此选项不起作用（仅在源代码中）它返回“）预期”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:10:49.380

当您说 PB12.5 中提供该功能时，您让我对此感到好奇，因为我认为这是不可能的。

经过反复试验，我了解到新的数据窗口功能仅在某些 PowerBuilder 12.5 目标中可用。简而言之，该功能仅限于新设计的 WPF 数据窗口。下图显示了新功能的外观。您可以展开每个缓冲区部分以查看该缓冲区中的行，您可以展开一行以查看该行的所有列。

![在此处输入图像描述](../Images/b523c69e8ea402052603d97b31212383.png)

我创建了一篇博文，展示了使用新功能的示例，包括在主缓冲区和过滤缓冲区中显示数据。可以通过此链接找到博客文章：[新的 PowerBuilder 12.5.NET DataWindow 缓冲区调试功能](http://www.displacedguy.com/tech/powerbuilder-12-5-net-datawindow-buffer-view-edit-in-debugger)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:53:56.697

我的建议是对**您的 DataWindows 进行单元测试**。您可以在 DataWindow Painter 中手动测试它们，也可以在 PowerUnit 中编写单元测试。**当您在 Debugger 中时，您不应该对 DataWindow 中的数据感到疑惑**。如果您正在调试的代码正在访问数据，您将看到它正在获取的值、检索参数等。如果代码不访问数据，您为什么要关心它是什么？碰巧的是，由于架构更改，我刚刚在大约 30 个 DataWindows 中修改了 SELECT，并且我正在对它们进行单元测试，因为之前没有人为它们编写过测试。此外，编写代码以便更容易调试。例如，将返回值放入变量中，而不是直接使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T04:20:33.440

在 2012 年 11 月 2 日添加了附加段落 - 我在调试时遇到了一种非常酷的方式来查看缓冲区数据，这对数据存储最有用，但对数据窗口应该可以正常工作。查看此站点部分[Save DataStore from Debugger](http://zuskin.com/pb_tricks.htm)。

我通常使用的一种解决方法是将代码添加到数据窗口**控件****的单击事件**（祖先甚至更好），并使用keydown 函数来确定是否按下了预定义且晦涩的组合键。如果有，**则应将数据保存到文件**中。

 ****我喜欢为最常见的类型创建**隐藏的复活节彩蛋功能**，包括一种提示用户输入文件类型和名称的通用类型。

ctl+alt+ **e** for Excel！

ctl+alt+ **t**表示文本！

用于 CSV 的ctl+alt+ **c ！**

ctrl+alt+ **a** for Any（使用 SaveAs 对话框提示）

因此，如果用户按住**ctrl+alt+e**并**单击数据对象上的任意位置，**则会触发以下代码，导致数据写入 excel，并自动打开 excel 文件。我经常将此功能保留在生产应用程序中（有时我会根据数据的敏感程度过滤我的用户 ID），因为它是一个**很棒的生产支持工具**。我们的**QA 部门也喜欢该功能**，因为他们可以轻松记录数据，并且可以查看所有列，即使是未显示的列。

```
long ll_handle
string ls_filename, ls_null, ls_dir

if keydown(KeyControl!) and keydown(KeyAlt!) then

    // set work variables to be used in save 
    SetNull(ls_null)

    // grab handle to MDI frame window for the ShellExecute function
    ll_handle = Handle(gwMdi)

    // construct the filename using dataobject and datetime  
    ls_dir = "c:\temp"
    ls_filename = ls_dir + '\debug_dataobject_' + this.dataobject + '_date_' + string(Today(),'mmddyyhhmmss') 

    // determine if we are saving excel, text, csv, or prompting for filetype
    if keydown(keye!) then
       ls_filename =+ '.xls'
       dw_1.SaveAs(ls_filename, Excel!,True!)
    elseif keydown(keyt!) then
       ls_filename =+ '.txt'
       dw_1.SaveAs(ls_filename, Text!,True!)
    elseif keydown(keyc!) then
       ls_filename =+ '.txt'
       dw_1.SaveAs(ls_filename, Csv!,True!)
    elseif keydown(keya!) then
       ls_filename =+ ''
       // empty string forces dialog open
       dw_1.SaveAs(ls_filename)
    end if

   // now automatically open the file using default program 
   // for the file type via Windows API function
   if fileexists(ls_filename) then
      gwMdi.ShellExecute(ll_handle, 'open', ls_filename, ls_null, ls_dir, 3)
   end if
end if

// Define ShellExcecute as Local External Function 
// somewhere in your application or as Global External Function:
Function Long ShellExecute (Long hWnd, String lpOperation, String lpFile, String lpParameters, String lpDirectory, Long nShowCmd) Library "shell32.dll" Alias For "ShellExecuteA" 
```

这不是您想要的，但它确实有效！

高温高压****

# python - 在 gevent 中，如何转储所有正在运行的 greenlets 的堆栈跟踪？

> ID：12510648
> 
> 赞同：14
> 
> 时间：2012-09-20T10:22:35.267
> 
> 标签：python, gevent

出于调试目的，我想遍历所有 greenlet 并获取它们的跟踪痕迹——我怎样才能用 gevent 做到这一点？

基本上，我想做与 gevent 等效的[this](https://stackoverflow.com/questions/1032813/dump-stacktraces-of-all-active-threads)。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-23T16:09:35.807

您可以使用该`gc`模块遍历堆上的所有对象并搜索greenlets。Greenlets 将堆栈跟踪存储为属性`gr_frame`。

```
import gc
import traceback
from greenlet import greenlet

for ob in gc.get_objects():
    if not isinstance(ob, greenlet):
        continue
    if not ob:
        continue
    log.error(''.join(traceback.format_stack(ob.gr_frame))) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-04-27T14:06:54.103

Gevent 的内置“print_run_info”函数将打印所有 greenlets 的堆栈，包括它们产生的堆栈：

```
import gevent
gevent.util.print_run_info() 
```

文档：[http ://www.gevent.org/api/gevent.util.html#gevent.util.print_run_info](http://www.gevent.org/api/gevent.util.html#gevent.util.print_run_info)

# sql - PostgreSql 删除时间超出

> ID：12510652
> 
> 赞同：0
> 
> 时间：2012-09-20T10:22:47.303
> 
> 标签：sql, postgresql

我有一个简单的 PostgreSQL 表，其中包含一个名为 id 的主键和大约 20 个条目。

以下执行需要 60 到 70 秒。

```
DELETE FROM user WHERE id = '20' 
```

简单`SELECT`的查询在不到 10 毫升的时间内执行，这很好。

运行查询时`EXPLAIN`，`DELETE`这是输出：

```
"Seq Scan on user  (cost=0.00..1.26 rows=1 width=6)"
"  Filter: ((id)::text = '20'::text)" 
```

对于那些需要这么长时间的删除查询，我找不到任何解释。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:11:02.497

一个可能的原因是您有一个引用该表的外键，该表在外键表达式上没有可用索引。因为你说主键的类型不规则，可能是外键的类型和主键的类型不匹配。

编辑：起初我没有注意到您的表太小以至于顺序扫描是正常的。

# javascript - jQuery ajax 在 Chrome 和 Safari 中发布大数据很慢

> ID：12510654
> 
> 赞同：14
> 
> 时间：2012-09-20T10:22:48.573
> 
> 标签：javascript, jquery, google-chrome, safari

我必须使用 javascript 和 php 进行带宽测试，我使用 jQuery，并尝试所有浏览器，但是：

*   火狐 - UP：7-8 Mbps
*   Explorer 9 - UP：7-8 Mbps
*   歌剧 - UP：7-8 Mbps
*   Safari - UP：有时 800-900 kbps
*   Chrome - UP：100-200 kbps 或无数据

您有什么想法可以提高这些浏览器的性能或其他衡量速度的好技术吗？

```
sendFile: function (s, d, m){ // size, data, metric
    m++; // how many times I tried to post data
    console.log('m: '+m);
    time = new Date(); 
    endTime3=time.getTime(); // execute time start
    if(s<=65536){
        $.ajax({
            type : 'POST',
            url : '/vegpont/savszelesseg/',
            timeout: 30000,
            dataType: 'text',
            cache: false,
            data: {
                index : 3,
                text: d // large data, min 512 KB to 
            },
            success : function(data){
                console.log('kB: '+s);
                time = new Date(); 
                endTime4=time.getTime(); // execute time end
                console.log('sec: '+(endTime4-endTime3)/1000);
                if(((endTime4-endTime3)/1000)<sec){ // sec now equals 4
                    speedTest.createFile(s*2, m); // create a data which is 's' (aka size) large then call this sendfile method
                }else{
                    var delta=(endTime4-endTime3)/1000;
                    var res=Math.round(s/delta);
                    $('div#speedResult3').html('<b>UP:</b><br/>kB: '+s+', '+
                    'sec: '+delta+'<br/>' +
                    '<b>~ '+res*8+' kbps</b>');
                    $('div#speedResult3').slideDown(1000);
                    $('div.buttonContainer').unblock();
                }

            },
            error : function(XMLHttpRequest, textStatus, errorThrown) {
                if(textStatus=='timeout'){
                    if(m>10){
                        $('div#speedResult3').html('<b>UP:</b><br/>sikertelen mérés');
                        $('div#speedResult3').slideDown(1000);
                        $('div.buttonContainer').unblock();
                    }
                    else{
                        speedTest.createFile(s, m); // create a data which is 's' (aka size) large then call this sendfile method
                    }
                }
            }
        });
    }else{ ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:14:37.383

根据我的个人经验，JQuery（和大多数 webkits）臃肿并导致许多问题，因为他们更关心重新发明轮子来制作自己的跨浏览器版本的功能，而不是提供检测到的优化扩展失踪。为此，出于多种原因，这些 webkits（又名 javascript api）会产生很多额外的开销。

我建议您尝试纯 JavaScript 原生 AJAX 调用，看看性能如何。

链接如何使用纯 javascript 完成此操作：

[http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml](http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml)

[http://www.openjs.com/articles/ajax_xmlhttp_using_post.php](http://www.openjs.com/articles/ajax_xmlhttp_using_post.php)

# java - 静态导入的工作

> ID：12510655
> 
> 赞同：2
> 
> 时间：2012-09-20T10:22:50.253
> 
> 标签：java, static, import, overloading

我所拥有的是两个这样的课程。

```
public class Class1 {

    public static void staticMethod1(){}

    public static void staticMethod2(){}

    public static void commonStaticMethod(){}

} 
```

和第 2 类作为

```
import static Class1.*;

public class Class2 {

    public static void commonStaticMethod(){}

} 
```

令我惊讶的是，它编译时没有任何错误甚至警告。那么静态导入如何避免重载呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:27:28.233

静态导入不会重载。它们只是语法糖，可以更短地使用其他类的静态方法。

也就是说，当调用在当前上下文中不可用的方法时，它会检查静态导入以查看是否存在匹配的静态方法。

所以`staticMethod()`会扩展到`SomeOtherClass.staticMethod()`

在您的特定情况下，没有冲突，因为您不尝试调用`commonStaticMethod`. 如果你这样做，编译器要么抱怨歧义，要么默认使用当前类中的静态方法（我不确定哪个——我不在静态导入中使用 *）。但这是您可以轻松检查的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:29:01.493

您对静态导入的作用感到困惑。B.* 的类 A 中的静态导入只允许在 A 的代码中调用 B 的静态方法，而无需预先`B.`调用静态方法。它与覆盖无关，也不会将 B 中的方法添加到 A 类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:25:14.760

我不明白你在这里期待什么。您始终可以覆盖封闭范围或另一个范围的名称，`import`所做的只是打开其他范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T10:28:15.650

`commonStaticMethod`您刚刚在 Class2 中隐藏了Class1 的。

如果您对具有相同方法的 2 个类进行静态导入并尝试在您的类中使用该方法，您会得到预期的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T10:29:16.770

没有重载，因为`Class2`不扩展`Class1`。隐藏在其中，因为`Class2`具有与导入的方法名称相同的方法名称，因此对该方法名称的任何非限定引用都将假定为本地实例。要使用导入的方法，您必须使用`Class1.commonStaticMethod`

# yii-extensions - 如何使用 WHERE 闭包从表中选择一列数据并显示

> ID：12510657
> 
> 赞同：1
> 
> 时间：2012-09-20T10:23:00.243
> 
> 标签：yii-extensions, yii, yii-components

如何从带有**WHERE闭包的表中****选择**一列数据并在 yii 中作为组合框列出？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:47:32.057

查看 CHtml 方法[dropDownList()](http://www.yiiframework.com/doc/api/1.1/CHtml#activeDropDownList-detail)和[activeDropDownList()](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail)。

例如，您可以将插入下拉列表的数据设置为活动记录查询的结果；

```
echo CHtml::dropDownList('myDropdown', '1',  CHtml::listData(myModel::model()->findAllByAttributes(array('myField'=>1)),'id','name')); 
```

上面的命令将从`myModel`模型中选择所有结果`myField = 1`（使用它们的“id”作为值，使用它们的“名称”作为显示的文本）并将它们插入到名称为“myDropdown”的下拉列表中，初始选择值为 1 .

如果您在表单中使用它，例如由 gii 创建，那么您可以使用 $form 创建下拉列表。这实际上使用了activeDropDownList()，所以语法有点不同，这里有一个例子：

```
 echo $form->dropDownList($model,'myOtherField', CHtml::listData(myModel::model()->findAllByAttributes(array('myField'=>1)),'id','name')); 
```

实际使用来自活动记录查询的数据填充下拉列表的位是[CHtml::listData()](http://www.yiiframework.com/doc/api/1.1/CHtml#listData-detail)方法，该方法从活动记录查询中获取结果集并将其格式化为一个数组，该数组将被接受到`$data`dropDownList 中的参数中() 或 activeDropDownList()。**

# python - 使用 pyparsing 正确扫描评论

> ID：12510659
> 
> 赞同：4
> 
> 时间：2012-09-20T10:23:06.307
> 
> 标签：python, pyparsing

我正在使用 pyparsing 在“CREATE TABLE”之后添加分号（“;”）。如果我有这个输入：

```
CREATE TABLE A ( B VARCHAR(255) ) 
```

该程序将给出下一个输出：

```
CREATE TABLE A ( B VARCHAR(255) ); 
```

当周围有评论时就会出现问题，如下所示：

```
CREATE TABLE A ( B VARCHAR(255) )
--Comment 
```

程序提供的地方：

```
CREATE TABLE A ( B VARCHAR(255) )
--Comment
; 
```

这是代码：

```
import pyparsing as par

alphanumsword = par.Word(par.alphanums + "_")
element = "(" + alphanumsword + ")" | alphanumsword
row = par.OneOrMore(element)
rows = row + par.OneOrMore("," + row) | row

semicolon = par.Literal(";")
comment1 = par.Literal("--") + par.restOfLine + par.LineEnd()

createtable = par.CaselessLiteral("create") + par.CaselessLiteral("table") 
              + alphanumsword + "("     + rows + ")" + ~semicolon

createtable.ignore(comment1)
createtable.ignore(par.cStyleComment)

text = \
"""
CREATE TABLE  PERSON
(
    /* Comment */
    /*
       Comment
    */
   ID VARCHAR(255),
   NAME VARCHAR(255), -- Comment
   --- Comment
   ADDRESS VARCHAR(255) NULL, -- Comment
   CONSTRAINT PK_PERSON PRIMARY KEY (ID)
)

-- Comment

CREATE TABLE A ( B VARCHAR(255) )
"""

text_list = list(text)
offset = 0

for t,s,e in createtable.scanString(text):
    print "(", t, ",", s, ",", e, ")"

    print "||", text[s:e], "||"

    text_list.insert(e + offset, ';')
    offset += 1

print "".join(text_list) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:07:48.903

使用`~( semicolon | comment1 )`而不是`~( semicolon )`.

```
import pyparsing as par

alphanumsword = par.Word(par.alphanums + "_")

element = "(" + alphanumsword + ")" | alphanumsword
#element = alphanumsword + "(" + alphanumsword + ")" | alphanumsword

row = par.OneOrMore(element)

rows = row + par.OneOrMore("," + row) | row

semicolon = par.Literal(";")

comment1 = par.Literal("--") + par.restOfLine + par.LineEnd()

createtable = par.CaselessLiteral("create") + par.CaselessLiteral("table")  \
              + alphanumsword + "("     + rows + ")" + ~( semicolon | comment1 )

createtable.ignore(comment1)
createtable.ignore(par.cStyleComment)

text = \
"""
--- this is comment

CREATE TABLE  PERSON
(
    /* Comment */
    /*
       Comment
    */
   ID VARCHAR(255),
   NAME VARCHAR(255), -- Comment
   --- Comment
   ADDRESS VARCHAR(255) NULL, -- Comment
   CONSTRAINT PK_PERSON PRIMARY KEY (ID)
)

-- Comment

CREATE TABLE A ( B VARCHAR(255) ) --comment
CREATE TABLE A ( B VARCHAR(255) );
CREATE TABLE A ( B VARCHAR(255) )
CREATE TABLE A ( B VARCHAR(255) );

--Commentasfkjaskfj
"""

text_list = list(text)
offset = 0

for t,s,e in createtable.scanString(text):
    print "(***", t, ",", s, ",", e, "**)"

    print "||\n", text[s:e], "\n||"
    print "s: %d, e: %d" % (s, e)

    text_list.insert(e + offset , ';')
    offset += 1

    print "******************************"

print "".join(text_list) 
```

**输出**：

```
(*** ['create', 'table', 'PERSON', '(', 'ID', 'VARCHAR', '(', '255', ')', ',', 'NAME', 'VARCHAR', '(', '255', ')', ',', 'ADDRESS', 'VARCHAR', '(', '255', ')', 'NULL', ',', 'CONSTRAINT', 'PK_PERSON', 'PRIMARY', 'KEY', '(', 'ID', ')', ')'] , 22 , 243 **)
||
CREATE TABLE  PERSON
(
    /* Comment */
    /*
       Comment
    */
   ID VARCHAR(255),
   NAME VARCHAR(255), -- Comment
   --- Comment
   ADDRESS VARCHAR(255) NULL, -- Comment
   CONSTRAINT PK_PERSON PRIMARY KEY (ID)
) 
||
s: 22, e: 243
******************************
(*** ['create', 'table', 'A', '(', 'B', 'VARCHAR', '(', '255', ')', ')'] , 257 , 290 **)
||
CREATE TABLE A ( B VARCHAR(255) ) 
||
s: 257, e: 290
******************************
(*** ['create', 'table', 'A', '(', 'B', 'VARCHAR', '(', '255', ')', ')'] , 336 , 369 **)
||
CREATE TABLE A ( B VARCHAR(255) ) 
||
s: 336, e: 369
******************************

--- this is comment

CREATE TABLE  PERSON
(
    /* Comment */
    /*
       Comment
    */
   ID VARCHAR(255),
   NAME VARCHAR(255), -- Comment
   --- Comment
   ADDRESS VARCHAR(255) NULL, -- Comment
   CONSTRAINT PK_PERSON PRIMARY KEY (ID)
);

-- Comment

CREATE TABLE A ( B VARCHAR(255) ); --comment
CREATE TABLE A ( B VARCHAR(255) );
CREATE TABLE A ( B VARCHAR(255) );
CREATE TABLE A ( B VARCHAR(255) );

--Commentasfkjaskfj 
```

# java - Java/Android 有偏数生成器

> ID：12510663
> 
> 赞同：1
> 
> 时间：2012-09-20T10:23:24.813
> 
> 标签：java, android, random

我的任务是创建一个 Android 应用程序，用户在其中选择四个数字（1-6），然后我将它与四个随机生成的数字进行比较，然后告诉他们有多少数字是正确的。

我的问题是，每当我生成任何数字时，显示的前三个**总是**相同的，除了最后一个数字。

```
 Random a1 = new Random();
    random1 = new ArrayList<Integer>();

    for (int index = 0; index < 6; index++)
    {
        random1.add(a1.nextInt(5)+ 1);
    }

    Random a2 = new Random();
    random2 = new ArrayList<Integer>();

    for (int index = 0; index < 6; index++)
    {
        random2.add(a2.nextInt(5)+ 1);
    } 
```

这是我用于随机数生成的代码，每个数字都使用完全相同的代码，这使得它更加混乱，如果它们都相同，我可以理解因为它是相同的代码它生成相同的数字或其他东西这些行，但最后一行总是不同的，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:30:03.073

检查以下代码是否适合您。代码取自[http://www.javapractices.com/topic/TopicAction.do?Id=62](http://www.javapractices.com/topic/TopicAction.do?Id=62)。根据您的要求进行修改。

```
public final class RandomRange {

public static final void main(String... aArgs) {

    int START = 1;
    int END = 6;
    Random random = new Random();
    List<Integer> first = new ArrayList<Integer>();
    List<Integer> second = new ArrayList<Integer>();
    for (int idx = 1; idx <= END; ++idx) {
        first.add(showRandomInteger(START, END, random));
        second.add(showRandomInteger(START, END, random));
    }
    System.out.println(first);
    System.out.println(second);
    first.retainAll(second);//Find common
    System.out.println(first);

}

private static int showRandomInteger(int aStart, int aEnd, Random aRandom) {
    if (aStart > aEnd) {
        throw new IllegalArgumentException("Start cannot exceed End.");
    }
    // get the range, casting to long to avoid overflow problems
    long range = (long) aEnd - (long) aStart + 1;
    // compute a fraction of the range, 0 <= frac < range
    long fraction = (long) (range * aRandom.nextDouble());
    int randomNumber = (int) (fraction + aStart);
    return randomNumber;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:27:03.573

尽量不要创建两个 Random 实例，而是重用单个实例。可能是两个种子相近的随机数产生相近的输出。

# couchdb - CouchDB 不复制设计文档

> ID：12510665
> 
> 赞同：9
> 
> 时间：2012-09-20T10:23:28.597
> 
> 标签：couchdb, replication

我的笔记本电脑上有一个 CouchDB 1.2.0 实例，我想将一个名为“soup”的本地数据库复制到运行 CouchDB 1.1.1 实例的远程机器上。我从被褥发出复制，我可以看到请求没问题：

```
Request URL:http://127.0.0.1:5984/_replicate
Request Method:POST
Request Payload: {"source":"soup","target":"http://projects.blurrcat.com/couchdb/soup"} 
```

但是，当复制完成时，**除了设计文档之外的**所有文档都将被复制。谁能告诉我为什么？是因为版本不同吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T15:49:45.087

只有当您在目标上被认证为管理员或数据库管理员时，设计文档才会复制。尝试将目标设置为

```
http://admin:password@projects.blurrcat.com/couchdb/soup 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-02-12T07:36:16.730

正如另一个答案所说，进行复制的用户必须是目标数据库的管理员，但还有更多。

复制到本地数据库时，还要仔细检查`user_ctx`复制文档中是否定义了角色`_admin`。否则 CouchDB 将不会复制设计文档。请参阅[复制器委托的文档](https://docs.couchdb.org/en/stable/replication/replicator.html#delegations)。

如果您的 CouchDB 实例隐藏在 Nginx 或 Apache 后面，请确保您的设计文档不超过 http 请求的最大允许大小。我的做到了，没有明显的错误消息（在 Nginx 中设置了更大的 client_max_body_size）。

# android - About flashing boot image of Android

> ID：12510673
> 
> 赞同：1
> 
> 时间：2012-09-20T10:24:03.223
> 
> 标签：android, kernel

I am not familiar with a Android kernel compile process. But I encountered a problem recently, and it troubled me so much.

Here is the problem descrition: Based on Android, I build customed images including boot.img, system.img and so on. Then I need to flash those images to physical device in order to boot to Android Home Screen. Before compiling those images files, I have set a new kernel command line:

```
CONFIG_CMDLINE="root=/dev/mtdblock2 rw init=/init console=ttyS0, 115200 mem=128M uard_dma android" 
```

After compiling those images, I opened boot.img in vim and saw the following string in it:

```
"root=/dev/mtdblock2 rw init=/init console=ttyS0, 115200 mem=128M uard_dma android" 
```

But when I flashed the boot.img into device, I got the different output like this:

```
**Kernel command line: console=ttyO2,115200n8 earlyprintk** 
```

In other word, I set the kernel command line value, and it was wrote into boot.img, but when flash boot.img into device, I got a different kernel command line value.

Has anybody ever encountered this problem and got it fixed?
Really appreciating your help.
Thanks advanced!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:15:43.800

引导加载程序会将命令行传递给内核。
例如，如果使用**u-boot** bootloader，
它将包含在 u-boot 变量**bootargs**

这可以在引导加载程序提示符下进行验证。
例如，如果设备正在使用 u-boot 引导加载程序。

1.  通过串行提示将设备连接到您的 PC。

2.  在您的 PC 上启动串行仿真器（minicom、teraterm、超级终端）。

3.  开启设备。

4.  按任意键在引导加载程序阶段本身停止设备引导。

5.  现在在 u-boot 提示符下输入以下命令：

    **u-boot#** printenv

6.  这将列出所有 uboot 变量。注意变量**bootargs**的值。

7.  这可以通过使用以下命令进行修改：

    **u-boot#** setenv bootargs ''

8.  要在重新启动后保存此值，请使用以下命令：

    **u-boot#** saveenv

其他引导加载程序也提供类似的功能。

# iphone - 如何在 cocos2d 中的帧 spritesheet 之间放置动画？

> ID：12510677
> 
> 赞同：0
> 
> 时间：2012-09-20T10:24:12.920
> 
> 标签：iphone, cocos2d-iphone

我是 cocos2d 的新手。谁能建议我一种方法来为一帧到另一帧之间的过渡提供动画。这是我获取帧并仅显示的代码

[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"spritesheet.plist"];

```
 // Create a sprite sheet with the Happy Bear images
    CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"spritesheet.png"];
    [self addChild:spriteSheet];

    // Load up the frames of our animation
    walkAnimFrames = [NSMutableArray array];
    for(int i = 1; i <=7; ++i) {
        [walkAnimFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"sprite%d.png", i]]];
    }
    CCAnimation *walkAnim = [CCAnimation animationWithFrames:walkAnimFrames delay:0.1f];

    // Create a sprite for our bear
    CGSize winSize = [CCDirector sharedDirector].winSize;
    self.sprite = [CCSprite spriteWithSpriteFrameName:@"sprite.png"];
    self.sprite.position=ccp(320,480);
    self.sprite.anchorPoint=ccp(1,1);
    self.walkAction = [CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO]; 
```

如何为帧之间的过渡做动画

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:47:56.063

如果这就是你的意思，你不能在两帧（图像）之间“过渡”（变形）。

在我看来，您想要一些称为[关键帧插值](http://en.wikipedia.org/wiki/Key_frame#As_applied_to_motion)的东西，它通常用于 3D 动画。2D 动画一帧接一帧地显示。您不能以图形方式在两个帧之间插入（变形），您只能插入位置等属性。

# facebook - Like button stripping URL GET parameters

> ID：12510687
> 
> 赞同：1
> 
> 时间：2012-09-20T10:24:55.563
> 
> 标签：facebook, facebook-like, url-parameters

I am trying to set up a like button to like a specific element so the site responds accordingly when a user follows the link.

I am trying to use XFBML method but have tried the others too - none have worked.

This is an example of what I have been trying.

```
<fb:like href="http://www.example.com/dir/shared.php?user=4244&action=t39s&fb=1" send="false" layout="button_count" width="450" show_faces="false"></fb:like> 
```

I have tried it both urlencoded and unencoded.

I'm sure it's something simple that I'm missing but I've been unable to work it out after loads of investigation.

# mysql - 数据库中的codeigniter德语字符

> ID：12510689
> 
> 赞同：2
> 
> 时间：2012-09-20T10:25:05.600
> 
> 标签：mysql, codeigniter

我在 database.php 和数据库中设置了这个排序规则： $db['default']['dbcollat​​'] = 'latin1_german2_ci';

当我插入一个德语字符时，它在数据库中保存为：

```
Three Burials - Die drei Begr?bnisse des Melquiades Estrada 
```

但它应该是：

```
Three Burials - Die drei Begräbnisse des Melquiades Estrada 
```

我的查询：

```
$this->db->insert('table',array('title' => $this->input->post('title'))); 
```

我该如何解决这个问题？感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:26:14.947

将排序规则设置为`utf8`，`utf8_general_ci`以及您的页面编码和字符集。

除了疯狂地优化存储效率之外，几乎没有理由使用其他任何东西。

# android - How save texture as bitmap in opengl es

> ID：12510690
> 
> 赞同：1
> 
> 时间：2012-09-20T10:25:05.780
> 
> 标签：android, opengl-es, opengl-es-2.0

Im using rendering-to-texture to render an image, Im modifying the texture and I want to save the texture as a bitmap. Currently Im using the method GLES20.glReadPixels storing the data in a ByteBuffer and creating the bitmap from that data. However as Im rendering to a texture I already have the "renderText[0]" texture attached to the FBO so I suppose its a simpler way to get that texture into a bitmap ... is it?

This is my current code :

public void saveChanges() {

```
 int width = currentBitmapWidth;
    int height = currentBitmapHeight;

    int size = width * height;
    ByteBuffer buf = ByteBuffer.allocateDirect(size * 4);
    buf.order(ByteOrder.nativeOrder());
    GLES20.glReadPixels(0, 0, width, height, GL10.GL_RGBA, GL10.GL_UNSIGNED_BYTE, buf);

    int data[] = new int[size];
    buf.asIntBuffer().get(data);
    buf = null;
    Bitmap createdBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
    createdBitmap.setPixels(data, size-width, -width, 0, 0, width, height);
    data = null;

    short sdata[] = new short[size];
    ShortBuffer sbuf = ShortBuffer.wrap(sdata);
    createdBitmap.copyPixelsToBuffer(sbuf);
    for (int i = 0; i < size; ++i) {
        //BGR-565 to RGB-565
        short v = sdata[i];
        sdata[i] = (short) (((v&0x1f) << 11) | (v&0x7e0) | ((v&0xf800) >> 11));
    }

    sbuf.rewind();
    createdBitmap.copyPixelsFromBuffer(sbuf);

    try {

        if(true)
        {
            Matrix flip = new Matrix();
            flip.postScale(1f, -1f);

            temp = Bitmap.createBitmap(createdBitmap, 0, 0, createdBitmap.getWidth(), createdBitmap.getHeight(), null, true);
            System.out.println("In save changes the temp width = "+temp.getWidth() + " height = "+temp.getHeight());
            oldBitmap = createdBitmap;

            oldBitmap = Bitmap.createBitmap(oldBitmap, 0, 0, oldBitmap.getWidth(), oldBitmap.getHeight(), flip, true);

            //currentImage = bmp;
            mOldTextureId = TextureHelper.loadTexture(context, oldBitmap);

            currentTextureModified = true;
            //drawOld = true;

            createdBitmap.recycle();
            createdBitmap = null;

        }

    } catch (Exception e) {
        // handle
        System.out.println("SAVE IMAGE ERRORRRRRR !!!!");
        System.out.println("Exception description !!! "+e.getMessage());

    }finally
    {
        saving = false;
    }

} 
```

# android - find max values hashmap and unify the others

> ID：12510691
> 
> 赞同：0
> 
> 时间：2012-09-20T10:25:07.327
> 
> 标签：android, hashmap

I want to find 10 max values of a hashmap and i want others to be united into a single value called "Altri", in english it means others.

How can I do this?

I tried with `Collections.max(collection)` after defining `Collection collection=map.values()` but it doesn't work. When I debug it, I see it takes one value that it isn't the higher.

Can anyone help me? Thank's in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:31:26.993

```
Map<T, T> map = new TreeMap<T, T>(yourMap); 
```

它会给你排序的数据。（自然排序1,2,3....100）

然后从地图中读取**最后 10 个值。**

您将获得 10 个 MAX 值

或使用

```
SortedMap<T,T> instead of Map 
```

它将返回排序后的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:33:31.283

为此，您必须像这样遍历哈希图：

```
Map.Entry<Foo, Bar> maxEntry = null;

    for (Map.Entry<Foo, Bar> entry : map.entrySet())
    {
        if (maxEntry == null || entry.getValue().compareTo(maxEntry.getValue()) > 0)
        {
            maxEntry = entry;
        }
    } 
```

# java - Hibernate 连接到错误的数据库

> ID：12510692
> 
> 赞同：3
> 
> 时间：2012-09-20T10:25:07.927
> 
> 标签：java, sql-server, hibernate, jtds

```
 <property name="hibernate.connection.driver_class">net.sourceforge.jtds.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:jtds:sqlserver://host/:port/db_name;instance=smth</property>
    <property name="hibernate.connection.username">XXX</property>
    <property name="hibernate.connection.password">YYY</property>
    <property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property> 
```

通过这种配置，hibernate 将我的程序连接到“master”数据库而不是“db_name”。我怎么解决这个问题？

编辑：jtds 1.2.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:08:52.660

问题已解决 - SQL Server 的配置方式使我们无法使用名称实例。jdbc:jtds:sqlserver://host:port/db_name（不带 ;instance=smth）工作正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:34:50.987

您的网址对我来说看起来不正确。我不知道这是否是一个错字，但它应该是这样的：

```
jdbc:jtds:sqlserver://host:port/db_name;instance=smth 
```

主机和端口之间不应有斜线。

[http://jtds.sourceforge.net/faq.html#urlFormat](http://jtds.sourceforge.net/faq.html#urlFormat)

# magento - Magento: Login to frontend with admin credentials

> ID：12510693
> 
> 赞同：0
> 
> 时间：2012-09-20T10:25:10.220
> 
> 标签：magento

Is there any way provided by Magento to login to frontend with admin credentials. I I've tried many tutorials and forums but in vain.

Is there any extension available for this? Can we achieve this by custom coding? If yes, How?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T08:59:12.350

您可以参考这个分析器，关于以前端用户身份登录（它为您的客户创建了一个方便的快捷方式来完成同样的事情）：[Magento, login as customer from admin](https://stackoverflow.com/questions/7413110/magento-login-as-customer-from-admin)

或者

您可以使用此免费扩展： http: [//www.magentocommerce.com/magento-connect/login-as-customer-9893.html](http://www.magentocommerce.com/magento-connect/login-as-customer-9893.html)

它的作用描述：

> 功能列表：
> 
> *   管理员用户可以从管理员的“客户视图”页面以客户身份登录
>     
>     
> *   在管理员的“订单视图”页面上有一个选项允许以客户身份登录
>     
>     
> *   有一个访问控制选项。管理员可以为特定角色分配角色用户是否可以作为客户登录。
>     
>     
> *   不需要设置客户通用密码，因为密码不太安全。

或者，您可以下载它，查看代码中使用的方法并进行调整:)

# c# - 如何在我的 Div 区域中使用 CSS 实现 ListView 悬停效果

> ID：12510695
> 
> 赞同：0
> 
> 时间：2012-09-20T10:25:16.280
> 
> 标签：c#, jquery, asp.net, listview, hover

我使用一个 jquery 对话框，我想对 div 区域使用 CSS。我将 ListView 与 LinkBut​​tons 一起使用，我想要悬停效果我尝试使用它，但它不起作用。

**aspx: (div 区域)**

```
<div id="dialog" title="Liste">
            <asp:TextBox ID="txtBox" runat="server" ></asp:TextBox>
            <asp:ImageButton ID="imageSearch" runat="server" 
                ImageUrl="~/Theme/Pictures/lupe.jpg" Height="24px" Width="25px" 
                onclick="imageSearch_Click" />
            <asp:Button ID="btnEdit" runat="server" Text="Zu Vertreter hinzufügen" 
                onclick="btnEdit_Click" Width="246px"/>                
                <hr />                 
            <asp:ListView runat="server" ID="myListView">                           
                          <LayoutTemplate>
                                 <table id="UserTable" runat="server" border="0" width="100%" cellpadding="0" cellspacing="0">
                                        <tr style="background-color:#ccdaeb" class="TableClass">
                                            <th align="left" id="th4" runat="server"><asp:LinkButton ID="lnkNachname" runat="server" CssClass="MyLink">Name</asp:LinkButton> </th>
                                            <th align="left" id="th6" runat="server"><asp:LinkButton ID="lnkAbteilung" CssClass="MyLink" runat="server">Abteilung</asp:LinkButton></th>    
                                        </tr>
                                        <tr runat="server" id="ItemPlaceholder"></tr> 
                                 </table>    
                         </LayoutTemplate>

                         <ItemTemplate>       
                                      <tr class="TableClass"> 
                                          <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="lblDisplayName" Text='<%# Eval("DisplayName") %>' runat="server"  /></td>
                                          <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="abteilung" CommandArgument='<%# Container.DataItemIndex %>' ID="lblAbteilung" Text='<%# Eval("Abteilung") %>' runat="server"  /></td>
                                      </tr>            
                         </ItemTemplate>

                         <EmptyDataTemplate>
                                           <div><h4>Es wurden keine Einträge gefunden</h4></div>
                         </EmptyDataTemplate>

                         <AlternatingItemTemplate>                
                                      <tr class="TableClass"> 
                                          <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="lblDisplayName" Text='<%# Eval("DisplayName") %>' runat="server"  /></td>
                                          <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="abteilung" CommandArgument='<%# Container.DataItemIndex %>' ID="lblAbteilung" Text='<%# Eval("Abteilung") %>' runat="server"  /></td>
                                      </tr>            
                         </AlternatingItemTemplate>    
            </asp:ListView>

</div> 
```

**我的 CSS 文件：**

```
#UserTable
{
    background-color:#ccdaeb;        
}

.MyLink 
{
    color:Black;
    text-decoration:none; 
}   

.MyLink:hover
{
    text-decoration:underline; 
} 

#TableClass
{
    background-color:#ccdaeb;
}  

.TableClass:hover
{
    background-color:#E5EDF5;
} 
```

我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:57:58.980

`#TableClass`- 它看起来像错误，应该是`.TableClass`。也`.TableClass`适用于 tr。不知道为什么，但我注意到背景颜色不适用于 TR。

尝试将您的CSS更改为

```
.TableClass td
{
    background-color:#ccdaeb;
}  

.TableClass:hover td
{
    background-color:#E5EDF5;
} 
```

另外，我看到了这段代码：`id="UserTable" runat="server"`

因为该表的 runat=server id 将被更改，所以下面的 css 将不起作用

```
#UserTable
{
    background-color:#ccdaeb;        
} 
```

你可以这样解决它： `<table id="UserTable" runat="server" class="UserTable" ...` 和css：

```
 .UserTable
    {
        background-color:#ccdaeb;        
    } 
```

# neo4j - neo4j：有没有办法/如何选择随机节点？

> ID：12510696
> 
> 赞同：20
> 
> 时间：2012-09-20T10:25:18.313
> 
> 标签：neo4j, cypher

我想检索特定数量的随机节点。该图由 3 000 000 个节点组成，其中一些是源，一些是目标，一些是两者。

目的是检索随机源，由于我不知道如何选择随机源，因此程序会生成从 1 到 3 000 000 的 k 个随机数，它们代表节点 ID，然后丢弃所有随机选择的非源节点。由于这个过程很耗时，我想知道是否可以使用密码查询直接选择随机源。

如果选择所有来源，查询将如下

```
START t=node(*) MATCH (a)-[:LEADS_TO]->(t) RETURN a 
```

有谁知道如何直接使用密码选择有限数量的随机节点，或者如果不可能，建议任何解决方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-12-24T13:16:08.637

您可以使用这样的结构：

```
MATCH (a)-[:LEADS_TO]->(t) 
RETURN a, rand() as r
ORDER BY r 
```

它应该返回你随机的对象集。

使用 Neo4j 2.1.3 测试

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-20T17:41:59.757

您可以使用跳过/限制来限制您的查询，这样您就可以做到

```
START t=node(*) 
MATCH (a)-[:LEADS_TO]->(t) 
RETURN a
SKIP {randomoffset} LIMIT {randomcount} 
```

否则，您还可以创建一组随机节点 ID，并将它们作为参数传递给 cypher 语句。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-26T14:43:44.707

这里建议的另一种方式，如果您想要一个具有所有连接的随机 Start 节点是：

```
MATCH (a)-[:LEADS_TO]->[]
WITH a,rand() AS rand
ORDER BY rand LIMIT {YourLimit}
MATCH (a)-[l:LEADS_TO]->(t)
RETURN a,l,t 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-06-21T09:18:52.463

```
MATCH (n:Label)
WITH n, rand() AS r
ORDER BY r
RETURN n LIMIT <no. of random nodes> 
```

# c# - How to use SSL for System.DirectoryServices.ActiveDirectory?

> ID：12510697
> 
> 赞同：0
> 
> 时间：2012-09-20T10:25:26.577
> 
> 标签：c#, .net

I managed to set up an windows 2003 Active Directory for SSL, both StartTLS and LDAPS, this I have verified using the Ldp.exe from Windows Resource Toolkit. I am also able to query the contents of the directory using LdapConnection object in C# .NET.

I would like to proceed to use SSL for my Active Directory queries, for example:

[Domain.GetDomain](http://msdn.microsoft.com/en-us/library/system.directoryservices.activedirectory.domain.getdomain.aspx)

I have tried using

```
domain = Domain.GetDomain(new DirectoryContext(DirectoryContextType.DirectoryServer, mydomain + ":636", username, password)); 
```

But it seems to not be talking LDAPS to the port 636, I get the following Exception

```
System.DirectoryServices.ActiveDirectory.ActiveDirectoryObjectNotFoundException: Domain controller "ad.rambutan.com:636" does not exist or cannot be contacted. 
```

The same goes for Forest.GetForest.

Is there a way to get Domain.GetDomain to work over SSL? Either StartTLS or LDAPS would be fine.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:45:14.883

您似乎无法使用 Domain.GetDomain 执行此操作，但您可以通过将[AuthenticationType](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.authenticationtype.aspx)属性设置为[SecureSocketsLayer来使用](http://msdn.microsoft.com/en-us/library/system.directoryservices.authenticationtypes.aspx)[DirectoryEntry](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.aspx)类执行此操作。有关示例，请参阅[DirectorySearcher not working for Windows 7 64 bit or 32 bit over network](https://stackoverflow.com/questions/7339977/directorysearcher-not-working-for-windows-7-64-bit-or-32-bit-over-network)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:36:56.850

[DirectoryContextType](http://msdn.microsoft.com/en-us/library/system.directoryservices.activedirectory.directorycontext.aspx)的文档没有提到 LDAPS，所以我认为您不能使用它。

# javascript - JQuery 按字段排序列表并添加到分隔符 div

> ID：12510698
> 
> 赞同：0
> 
> 时间：2012-09-20T10:25:26.990
> 
> 标签：javascript, jquery

我正在尝试通过一个名为 letter 的字段来组织列表。

所以字段是：

身份证，姓名，字母。

例如：

## 身份证姓名字母

1 清单 1 2 清单 2 3 清单 3 乙

在 id="a" 之后添加 list1 和 list2，在 id="b" 之后添加 list3

这是一个 json 数据示例：

```
{"id":[{"id":"1","name":"list1","letter":"a"},{"id":"2","name":"list2","letter":"b"}]} 
```

下面的代码将内容添加到列表视图，但我需要更进一步，然后添加到他们自己的位置。

例如，所有带有字母“a”的列表都添加在 A 等之后

这是代码：

```
$.getJSON("list.json", function(data){
    var output = '';

    $.each(data.id, function(index, value){

        output += '<li><h1>' + value.name + '</h1></li>';

    });

    $('#listview').html(output).listview('refresh');

    }).error(function(args) {
console.log(args);

});

<ul id="listview">
<li id="a">A</li>
<!--Listings with letter A go here-->
<li id="b">B</li>
<!--Listings with letter B go here-->
<li id="c">C</li>
<!--Listings with letter C go here-->
</ul> 
```

如何将列表添加到其位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:40:03.723

```
$.each(data.id, function(index, value){ 

    $('<li><h1>' + value.name + '</h1></li>').insertAfter('#' + value.letter);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:06:55.677

```
​var startstring = value.name.substring(0,1);

var outputA,outputB,outputC;
$.each(data.id, function(index, value){
    var startstring = value.name.substring(0,1);
    if(startstring == 'A'){

        outputA += '<li><h1>' + value.name + '</h1></li>';
    }
    if(startstring == 'B')
        outputB += '<li><h1>' + value.name + '</h1></li>';
    if(startstring == 'C')
        outputC += '<li><h1>' + value.name + '</h1></li>';

    });
$('#listview').append(outputA);
$('#listview').append(outputB);
$('#listview').append(outputC); 
```

# php - 使用事件调度器在 symfony 中创建项目日志（历史）模块

> ID：12510699
> 
> 赞同：1
> 
> 时间：2012-09-20T10:25:27.983
> 
> 标签：php, symfony1, propel

我正在 Symfony 中开发一个项目管理工具，现在我正在创建一个模块来记录日志，即捕获每个事件，如新项目创建、任务创建、任务状态更改、项目和任务的删除等。

我有一个日志表，我计划在发生上述任何事件时插入新行。但是为此，我需要进入每个控制器并调用日志模型来执行插入查询。几乎就像我要再次处理控制器中的所有操作以附加此代码。是否有任何其他方法可以仅使用 Symfony 中的一些事件调度程序（如类）调用模型一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T14:04:43.497

很高兴您使用 Propel，有一堆插件和/或行为可以跟踪您的对象发生了什么。我会给你一个我发现的清单：

*   [pmPropelObjectLogBehaviorPlugin](http://www.symfony-project.org/plugins/pmPropelObjectLogBehaviorPlugin)：维护类更改日志（每个实例的更改）。
*   [AuditableBehavior](http://carpe-hora.github.com/AuditableBehavior/)：添加记录推进对象活动的能力
*   [propel-listener-behavior](https://github.com/gossi/propel-listener-behavior)：让您附加侦听器来推动生成的对象，这些对象会通知您有关这些对象的更新。
*   [ncPropelChangeLogBehaviorPlugin](https://github.com/CraftyShadow/ncPropelChangeLogBehaviorPlugin)：Propel 对象的行为，允许您跟踪对它们所做的任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:46:43.483

[JMSAOPBundle](https://github.com/schmittjoh/JMSAopBundle/blob/master/Resources/doc/index.rst)正是这样做的。

如果我可以建议的话，我认为最好为每个操作添加自定义事件，这样您就可以在不失去控制的情况下使用更多侦听器扩展您的应用程序。如果您使用原则，您也可以使用[原则事件系统](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/events.html)

# android - Find binder object in parcel

> ID：12510700
> 
> 赞同：2
> 
> 时间：2012-09-20T10:25:29.433
> 
> 标签：android, marshalling, parcel, android-binder

How can i find binder object in a android parcel? i want to marshall a parcel which has got a bitmap but i got Runtime exception says that the parcel has got binder object.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T10:48:37.640

Sadly, you can't. A `Parcel` is unfortunately sometimes more than just a stream of bytes. Occasionally it contains an intelligent object, called a Binder. These objects can be passed around using IPC and have methods called by different processes in different parts of the Android system.

That's what's happening in this case. When you called `Bitmap.writeToParcel()` it's putting some intelligent object in there, which needs to be queried by other parts of the OS. That means that this Parcel simply can't be reduced to a stream of bytes.

(Specifically I think what's happening is this - but I could be wrong. I believe that this code: [http://androidxref.com/4.1.1/xref/frameworks/native/libs/binder/Parcel.cpp#736](http://androidxref.com/4.1.1/xref/frameworks/native/libs/binder/Parcel.cpp#736) is writing the bitmap data to an area of shared memory, and putting a reference to that shared memory area into the parcel. This means that the data doesn't need to be copied so often, which is great when you're passing the Parcel to another process using IPC, but not so good if you're just using it to serialize data.)

Using `Parcel.marshall` sometimes suggests bad design... as the comment says,

> The data you retrieve here must not be placed in any kind of persistent storage (on local disk, across a network, etc). For that, you should use standard serialization or another kind of general serialization mechanism. The Parcel marshalled representation is highly optimized for local IPC, and as such does not attempt to maintain compatibility with data created in different versions of the platform.

If you are using it for local IPC, then you shouldn't need to call `Parcel.marshall` - because normally it would be part of an AIDL interface where these things are handled automatically.

Sorry there's no immediate solution! If you're using it for IPC, then use AIDL. If you're using it for something else, then don't use `Parcel.marshall` - instead you'll have to go to more effort to write the bitmap bytes to your own data format.

# javascript - Unable to add event on Google map Infobox

> ID：12510702
> 
> 赞同：7
> 
> 时间：2012-09-20T10:25:34.353
> 
> 标签：javascript, google-maps-api-3, dom-events, sencha-touch-2, infobox

I am using Infobox with Google Map V3 (attached image). While clicking on Infobox, I want to go to a details page. But I am not able to add a click listener on the infobox. Here is the code I am using:

![enter image description here](../Images/c16e5af3dd421524a28358a9cf5f521c.png)

This is my infobox config:

```
 var ib = new InfoBox({
        alignBottom : true,
        disableAutoPan: false,
        maxWidth: 0,
        pixelOffset: new google.maps.Size(-125, -50),
        zIndex: null,
        closeBoxURL: "",
        infoBoxClearance: new google.maps.Size(1, 1),
        isHidden: false,
        pane: "floatPane",
        enableEventPropagation:false
    }); 
```

And I added listener to this infobox like this:

```
 google.maps.event.addListener(ib, 'domready', function() {
        if(Ext.get(ib.div_)){
            Ext.get(ib.div_).on('click', function(){
                console.log('test on click')
            }, this);

            Ext.get(ib.div_).on('mousedown', function(){
                console.log('test on click')
            }, this);
        }
    }); 
```

While `enableEventPropagation = false`, the event doesn't propagate to MAP but no event is working on the infobox.

While `enableEventPropagation = true`, the events (click, mousedown) works but clicking on other part of the infobox, it takes me to map or another marker.

Any idea how to solve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-16T22:44:03.623

您需要将`domready`事件添加到信息框的 eventListener 而不是谷歌地图的事件。只有在 infobox 的 html 出现在屏幕上后，您才能绑定事件。为防止多事件绑定，请在加载新信息框之前关闭其他信息框。

```
infobox= new InfoBox();
google.maps.event.addListener(marker, 'click', function() {
  infobox.close();
  infobox= new InfoBox({ ... });
  infobox.open(map, this);
  infobox.addListener("domready", function() {
    $("#target").on("click", function(e) { /* do something */ });
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T14:46:28.097

您可以将侦听器附加到 InfoBox 的任何内容。

```
var boxText = document.createElement('div'); 
var myOptions = {
  content: boxText,
   ... 
}
var ib = new InfoBox(myOptions);
ib.open(theMap, marker);
boxText.setAttribute('onclick', 'alert("InfoBox clicked")'); 
```

这对你有用吗？

# c# - WPF Changing ContentControl Template via Button from another control

> ID：12510703
> 
> 赞同：0
> 
> 时间：2012-09-20T10:25:34.620
> 
> 标签：c#, wpf, xaml, controltemplate

I have the following controls/views:

*   **myControl** containing a *ContentControl* and *two ControlTemplates* in the `UserControl.Resources`
*   **Main application (Window)** with an *instance* of *myControl* and a *ToggleButton*

* * *

I want to switch between my two ControlTemplates via the ToggleButton in the main application.

This should be very easy ... but I cannot find a proper way :S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:55:15.027

一个更简单的解决方案是绑定到内容控件的内容属性并为每种类型的内容定义数据模板。

```
<Window.Resources>

    <DataTemplate DataType="{x:Type local:MyType1}">
        <Border Background="Red" />
    </DataTemplate>

    <DataTemplate DataType="{x:Type local:MyType2}">
        <Border Background="Green" />
    </DataTemplate>

</Window.Resources> 
```

* * *

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="24" />
    </Grid.RowDefinitions>
    <ContentControl Content="{Binding MyContent}" />
    <ToggleButton Grid.Row="1"
                  Content="Toggle"
                  IsChecked="{Binding IsChecked}" />
</Grid> 
```

* * *

```
//DataContext
public bool IsChecked
{
  get { return isChecked_; }

  set 
  { 
    isChecked_ = value;
    NotifyPropertyChanged_("IsChecked");

    if (value)
      MyContent = new MyType1();
    else
      MyContent = new MyType2();
  }
}

public object MyContent
{
    get { return myContent_; }
    set 
    {
       myContent = value;
       NotifyPropertyChange_("MyContent");
    }

} 
```

# objective-c - 使用自动布局自定义纵横比

> ID：12510705
> 
> 赞同：40
> 
> 时间：2012-09-20T10:25:40.920
> 
> 标签：objective-c, uiview, uikit, ios6, autolayout

假设我有一个 UIView，其中包含一个必须为 4:3 的子 UIView。我想在代码中使用 AutoLayout 来解决这个问题。

我一直在努力使用 AutoLayout，但我还没有弄清楚如何做到这一点。

你知道如何解决这个问题吗？

非常感谢。

我附上一张图片来更好地解释我的意思。 [http://d.pr/i/d0Oc](http://d.pr/i/d0Oc)

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-09-21T08:11:44.093

我想通了。

```
//Given a childView... 
NSLayoutConstraint *constraint =[NSLayoutConstraint
                           constraintWithItem:childView
                           attribute:NSLayoutAttributeWidth
                           relatedBy:NSLayoutRelationEqual
                           toItem:childView
                           attribute:NSLayoutAttributeHeight
                           multiplier:4.0/3.0 //Aspect ratio: 4*height = 3*width
                           constant:0.0f];
            [childView addConstraint:constraint]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-19T16:02:47.903

这是 Swift 3 的语法：

```
NSLayoutConstraint(
  item: item,
  attribute: .width,
  relatedBy: .equal,
  toItem: item,
  attribute: .height,
  multiplier: width / height,
  constant: 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-25T08:48:20.310

我已经尝试了上面的所有答案，但没有奏效，这是我使用 swift 3 的解决方案：

```
let newConstraint = NSLayoutConstraint(item: yourView, attribute: .width, relatedBy: .equal, toItem: yourView, attribute: .height, multiplier: 560.0/315.0, constant: 0)
yourView.addConstraint(newConstraint)
NSLayoutConstraint.activate([newConstraint])  
NSLayoutConstraint.deactivate(yourView.constraints)
yourView.layoutIfNeeded() 
```

# jquery - jQuery "on" 和 Coffeescript

> ID：12510707
> 
> 赞同：11
> 
> 时间：2012-09-20T10:26:03.587
> 
> 标签：jquery, coffeescript

在 JS 我有

```
$("#index").on({
  click : function() { // do something useful with $(this)....}
},"li.superclass"); 
```

我如何用 CoffeeScript 来描述这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T10:33:46.010

这几乎是一样的：

```
$("#index").on click: ->
  alert ("hi")
, "li.superclass" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T14:18:08.947

我的这就是你想要的：

```
$("#index").on 
    click:->
        alert "hi"
    "li.superclass" 
```

但我认为这更清楚：

```
events = 
    "click":->
        alert "hi"
$("#index").on events, "li.superclass" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-25T23:21:06.867

如果您需要在处理程序中使用`this`/ `@`，我认为您正在寻找类似 CoffeeScript 的胖箭头之类的东西，它会`this`为您重新绑定......

```
$('#index').on 'click', => alert(@) 
```

请注意，您需要使用`off`删除处理程序，否则它可能不会被垃圾收集。Backbone 0.9 引入[了一个`listenTo`功能](http://backbonejs.org/#Events-listenTo)，使管理事件处理程序更加理智。

# ios - 用户 iTunes 商店的正确附属链接（美国、英国、德国、...）

> ID：12510708
> 
> 赞同：2
> 
> 时间：2012-09-20T10:26:06.227
> 
> 标签：ios, app-store, locale

我想在 iPhone 应用程序中使用 TradeDoubler（欧洲）和 LinkShare（美国、加拿大）并链接到应用程序商店。我已经知道我总是会被带到正确的商店。但是每个国家/地区/计划的附属链接的构建方式不同。因此，在构建 URL 之前，我需要知道它将带我去哪个商店。

用户语言环境似乎不是执行此操作的正确方法。例如：我在德国，有一台设置了美国 iTunes 帐户的 iPad。语言设置为英语。语言环境给了我DE。但我需要搜索美国商店并使用 LinkShare 而不是 TradeDoubler 链接。

有人知道如何找出用户在设备上登录的 iTunes 商店吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:25:04.693

如果您不想手动执行此操作，您可以使用[Afflr](http://www.afflr.com)，它会自动执行您想要的操作，您只需为其提供指向您的应用程序的链接以及您的 Linkshare 和 Tradedoubler 程序的 ID。

# ios - 路由 KVO 更改

> ID：12510710
> 
> 赞同：0
> 
> 时间：2012-09-20T10:26:15.193
> 
> 标签：ios, key-value-observing

我不喜欢 KVO 将所有更改路由到相同的 observeValueForKeyPath:ofObject:change:context: 方法。目前，我有一棵大树，其中包含将这些“观察”发送到不同方法的 if 语句。

是否已经有一种方法可以为每个 addObserver: 调用指定不同的选择器？

否则，我正在考虑创建一个“观察”类，它的每个实例都将使用一个选择器进行初始化，然后充当 KVO 观察者。

# powershell - 在控制台中运行 CVS 通过更改输出编码来扰乱 BZR

> ID：12510713
> 
> 赞同：0
> 
> 时间：2012-09-20T10:26:35.690
> 
> 标签：powershell, character-encoding, cvs, bazaar

我同时使用 cvs 和 bzr 进行版本控制，并且更喜欢在 powershell 控制台中运行它们。但是当我运行 cvs 时，它会更改控制台编码，这会使 bzr 抛出错误消息。我尝试在我的 PSProfile 中将 $OutputEncoding 设置为 UTF-8，然后 bzr 似乎很高兴......直到我运行 cvs，然后 bzr 再次开始抱怨 - 即使 $OutputEncoding 是相同的！？

有没有办法让两者在同一个控制台中工作？

```
Windows PowerShell
Copyright (C) 2009 Microsoft Corporation. All rights reserved.

Visual Studio 2010 Command Prompt variables set.
PS W:\> [Console]::OutputEncoding.EncodingName
Western European (DOS)
PS W:\> bzr st
bzr: ERROR: Not a branch: "W:/".
PS W:\> [Console]::OutputEncoding.EncodingName
Western European (DOS)
PS W:\> cvs up
cvs update: No CVSROOT specified!  Please use the `-d' option
cvs [update aborted]: or set the CVSROOT environment variable.
PS W:\> [Console]::OutputEncoding.EncodingName
Unicode (UTF-8)
PS W:\> bzr st
bzr: warning: unknown terminal encoding cp65001.
  Using encoding cp1252 instead.
bzr: warning: unknown terminal encoding cp65001.
  Using encoding cp1252 instead.
bzr: ERROR: Not a branch: "W:/".
PS W:\> 
```

在 PSProfile 中强制 OutputEncoding 为 UTF8 的示例。

```
Windows PowerShell
Copyright (C) 2009 Microsoft Corporation. All rights reserved.

Visual Studio 2010 Command Prompt variables set.
PS W:\> $OutputEncoding

BodyName          : utf-8
EncodingName      : Unicode (UTF-8)
HeaderName        : utf-8
WebName           : utf-8
WindowsCodePage   : 1200
IsBrowserDisplay  : True
IsBrowserSave     : True
IsMailNewsDisplay : True
IsMailNewsSave    : True
IsSingleByte      : False
EncoderFallback   : System.Text.EncoderReplacementFallback
DecoderFallback   : System.Text.DecoderReplacementFallback
IsReadOnly        : True
CodePage          : 65001

PS W:\> bzr st
bzr: ERROR: Not a branch: "W:/".
PS W:\> cvs up
cvs update: No CVSROOT specified!  Please use the `-d' option
cvs [update aborted]: or set the CVSROOT environment variable.
PS W:\> $OutputEncoding

BodyName          : utf-8
EncodingName      : Unicode (UTF-8)
HeaderName        : utf-8
WebName           : utf-8
WindowsCodePage   : 1200
IsBrowserDisplay  : True
IsBrowserSave     : True
IsMailNewsDisplay : True
IsMailNewsSave    : True
IsSingleByte      : False
EncoderFallback   : System.Text.EncoderReplacementFallback
DecoderFallback   : System.Text.DecoderReplacementFallback
IsReadOnly        : True
CodePage          : 65001

PS W:\> bzr st
bzr: warning: unknown terminal encoding cp65001.
  Using encoding cp1252 instead.
bzr: warning: unknown terminal encoding cp65001.
  Using encoding cp1252 instead.
bzr: ERROR: Not a branch: "W:/".
PS W:\> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:43:39.150

一种解决方案是在 bazaar.conf中提供[输出编码选项。](http://doc.bazaar.canonical.com/bzr.dev/en/user-reference/configuration-help.html#output-encoding)

cp65001 已添加到 python 3.3（[错误](http://bugs.python.org/issue13216)。）因此，如果 bzr 端口到 py3k，这将得到修复（我希望......）

# c# - 提高 C# 中 GetPixel 函数的速度

> ID：12510714
> 
> 赞同：0
> 
> 时间：2012-09-20T10:26:36.380
> 
> 标签：c#, image, getpixel

我需要快速读取 bmp 的 getpixel，但我使用的 LockBits 非常低

```
 private void LockUnlockBitsExample(Bitmap bmp)
    {

        Rectangle rect = new Rectangle(0, 0, bmp.Width, bmp.Height);
        System.Drawing.Imaging.BitmapData bmpData =
            bmp.LockBits(rect, System.Drawing.Imaging.ImageLockMode.ReadWrite,
            bmp.PixelFormat);
        IntPtr ptr = bmpData.Scan0;

        int bytes  = Math.Abs(bmpData.Stride) * bmp.Height;
        rgbValues = new byte[bytes];

        System.Runtime.InteropServices.Marshal.Copy(ptr, rgbValues, 0, bytes);
        bmp.UnlockBits(bmpData);
    } 
```

和这个功能

```
 private Color GetMyPixel(byte[] rgbValues,Bitmap bmp, int x,int y )
    {

        int index= (bmp.Width*y+x)*3;
        Color MyColor = Color.FromArgb(rgbValues[index], rgbValues[index + 1], rgbValues[index + 2]);
        return MyColor;
    } 
```

但我的函数的输出与原始 getpixel 不同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:37:03.563

在这一行：

`int index= (bmp.Width*y+x)*3;`

我相信`bmp.Stride`必须用 . 代替`bmp.Width`. `PixelFormat`还要检查每像素 24 位的假设。

另一件事是颜色索引：首先是蓝色 ( `index`)，然后是绿色 ( `index+1`)，然后是红色 ( `index + 2`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:38:05.090

出于某种原因，我在 VB 中有代码与您几乎完全相同，所以我希望这会有所帮助。您可以尝试对 GetMyPixel 进行以下修改：

在对 FromArgb 的调用中使用 Stride 而不是 Width 并反转字节顺序。

```
private Color GetMyPixel(byte[] rgbValues,Bitmap bmp, int x,int y )
{
   int index= (bmp.Stride*y+x*3);        
   if (index > rgbValues.Length - 3)
   index = rgbValues.Length - 3;
   Color MyColor = Color.FromArgb(rgbValues[index+2], rgbValues[index + 1], rgbValues[index]);         
    return MyColor;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T10:40:15.133

您应该查看这篇文章：[使用锁定位](http://www.codeproject.com/Tips/240428/Work-with-bitmap-faster-with-Csharp)

当我做类似的事情时，它帮助了我很多

# python - 没有名为 gtk 的模块

> ID：12510716
> 
> 赞同：3
> 
> 时间：2012-09-20T10:26:49.373
> 
> 标签：python, gtk, pygtk, homebrew

为什么我用自制软件安装 gtk & pygtk，但 python 仍然找不到它：

```
brew test -v pygtk
Testing pygtk
==> chmod +x test.py
chmod +x test.py 
==> ./test.py
./test.py 
Traceback (most recent call last):
  File "./test.py", line 2, in <module>
    import pygtk
ImportError: No module named pygtk
Error: pygtk: failed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:31:01.567

检查模块是否在您的 python 路径中。检查您安装软件包的位置并将其添加到您的 bashrc 中，

```
#.bashrc        
PATH=$PATH:$HOME/bin:/opt/lib/python2.4/site-packages/psycopg2/:path_to_module
export PATH 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T22:42:22.423

这些库不在 PYTHONPATH 中。我会尝试：

```
$ export PYTHONPATH=/usr/local/lib/python2.7/site-packages 
```

# db2 - 带字段长度的 DB2 右填充

> ID：12510721
> 
> 赞同：0
> 
> 时间：2012-09-20T10:27:10.813
> 
> 标签：db2

我们有不同长度的字段，并希望用空格将它们右填充到模式中定义的字段长度。

以下语句有效：

```
SELECT RPAD(field, LENGTH(field), ' ') AS field FROM schema.table; 
```

这会产生带有 SQLState 42703 的 SQL 错误 206：在使用它的上下文中无效。

```
// Our application resolves the prepared statement's ? - this is working fine
INSERT INTO schema.table (field) VALUES (RPAD(?, LENGTH(field), ' ')); 
```

同样的情况发生在：

```
INSERT INTO schema.table (field) VALUES (RPAD(?, LENGTH(schema.table.field), ' ')); 
```

是否有可能避免对字段长度进行硬编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:13:10.580

您的问题是标量函数对行进行操作；`LENGTH(field)`仅适用于返回行的语句，例如 select 语句。要理解为什么，想象一下用其他函数代替`LENGTH()`. `LCASE(field)`，例如，采用特定行中字符串的小写字母。一般应用于列是没有意义的。在某些情况下，甚至`LENGTH()`可以逐行改变：如果列是 type `VARCHAR`，则`LENGTH()`返回实际字符​​串的长度。

解决方案是选择任意行，`LENGTH()`对字段执行操作，并将结果存储在变量中：

```
CREATE OR REPLACE VARIABLE field_length INTEGER;
SET field_length = (
    SELECT LENGTH(field) FROM schema.table 
        WHERE field IS NOT NULL
        FETCH FIRST ROW ONLY
); 
```

您只需在代码中执行一次。然后，每当您需要使用长度时：

```
INSERT INTO schema.table (field) VALUES (RPAD(?, field_length, ' ')); 
```

请注意，此解决方案取决于`field`被定义为 a`CHAR(x)`而不是 a `VARCHAR(x)`。如果您必须使用 a 执行此操作，您可以从系统表中`VARCHAR`找出字段的长度。`syscat.columns`

编辑：添加了对 null 值的处理，因为`LENGTH()`如果 in 的值为 null，则可能返回`field`null。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T17:08:29.157

如果您想要一个固定长度的列，为什么要使用`VARCHAR`？使用`CHAR`- DB2 将自动为您填充这些值。

# c# - wp7中的饼图

> ID：12510722
> 
> 赞同：0
> 
> 时间：2012-09-20T10:27:12.497
> 
> 标签：c#

有什么方法可以在 WP7 中绘制饼图？

如果没有，有没有办法根据用户价值绘制一个具有扇区的椭圆？

我看过一些第三方工具来绘制饼图，但我对此并不满意..

请提供任何代码或任何其他方式来获取饼图

我尝试了以下方法，但它不起作用：

```
 EllipseGeometry OuterEllipse = new EllipseGeometry();
        EllipseGeometry InnerEllipse = new EllipseGeometry();
        OuterEllipse.Center = new Point(100, 100);
        OuterEllipse.RadiusX = 100;
        OuterEllipse.RadiusY = 100;

        InnerEllipse.Center = new Point(100, 100);
        InnerEllipse.RadiusX = 90;
        InnerEllipse.RadiusY = 90;

        System.Windows.Shapes.Path path = new System.Windows.Shapes.Path();
        System.Windows.Shapes.Path path1 = new System.Windows.Shapes.Path();

        SolidColorBrush solidbrush = new SolidColorBrush(Colors.Blue);
        path.Fill = solidbrush;
        path.Data = OuterEllipse;

        SolidColorBrush solidbrush1 = new SolidColorBrush(Colors.Yellow);
        path1.Fill = solidbrush1;
        path1.Data = InnerEllipse;

        Chart_stackPanel.Children.Add(path);
        Chart_stackPanel.Children.Add(path1);` 
```

任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:23:03.007

这是一个示例，您可以使用它来绘制带有两个分区的饼图.....在 windows phone7 中使用 xaml 代码......

```
 <TextBlock Height="31" HorizontalAlignment="Left" Margin="165,9,0,0" Name="Dashboard_Head_Block" Text="dashboard" Foreground="GreenYellow" FontFamily="Times New Roman" FontSize="26" VerticalAlignment="Top" Width="124" />
        <TextBlock Height="30" FontWeight="Bold" HorizontalAlignment="Left" Margin="12,48,0,0" Name="storageDetails_textBlock" Text="mystorage details" VerticalAlignment="Top" Width="175" />
        <Border Name="ChartBorder" BorderBrush="GreenYellow" CornerRadius="20" BorderThickness="1" Margin="6,82,8,363">
             <StackPanel Background="Black" x:Name="DashBoardOuter_Panel" Loaded="DashBoardOuter_Panel_Loaded" Margin="3,6,7,6">
                <Border Name="PieBorder" BorderBrush="BlueViolet" BorderThickness="5" HorizontalAlignment="Right" Height="214" Margin="0,50,8,0" Width="150">
                    <StackPanel Margin="3,2,3,3">
                        <Rectangle Name="UsedRect"  Height="36" Margin="0,30,81,0" StrokeStartLineCap="Round" Stroke="Green" StrokeThickness="5" StrokeMiterLimit="50" StrokeLineJoin="Round" Width="37" >
                            <Rectangle.Fill>
                                <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                                    <GradientStop Color="Black" Offset="0"/>
                                    <GradientStop Color="#FF092F7A" Offset="0.613"/>
                                    <GradientStop Color="#FF444AA3" Offset="0.335"/>
                                    <GradientStop Color="#FF4F55C0"/>
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>
                        <TextBlock Name="Used_TextBlock"  Margin="45,-35,0,0" Height="34" TextWrapping="Wrap" Text="Used" Width="69" />
                        <Rectangle Name="UnusedRect" Height="34" Margin="-80,60,0,0" StrokeStartLineCap="Round" Stroke="Green" StrokeThickness="5" StrokeMiterLimit="50" StrokeLineJoin="Round" Width="40">
                            <Rectangle.Fill>
                                <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                                    <GradientStop Color="Black" Offset="0"/>
                                    <GradientStop Color="#FF84DE2F" Offset="1"/>
                                    <GradientStop Color="#FF345812" Offset="0.017"/>
                                    <GradientStop Color="#FF2B4E09" Offset="0.487"/>
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>
                        <TextBlock Name="Unused_TextBlock" Height="31" Margin="51,-35,8,0" TextWrapping="Wrap" Text="Unused" Width="71" />
                    </StackPanel>
                </Border>
             </StackPanel>
          </Border>
            <StackPanel Background="Black" Height="291" HorizontalAlignment="Left" x:Name="Dashboard_Panel" VerticalAlignment="Top" Width="279" Margin="12,93,0,0" RenderTransformOrigin="0.57,0.581">
                <StackPanel.Projection>
                    <PlaneProjection x:Name="DStack_Plane"></PlaneProjection>
                </StackPanel.Projection>
                <StackPanel.Resources>
                    <Storyboard x:Name="DOuter_Panel">
                        <DoubleAnimation Storyboard.TargetName="DStack_Plane"
                         Storyboard.TargetProperty="RotationX"
                         From="0" To="360" Duration="0:0:1" />
                    </Storyboard>
                </StackPanel.Resources>
                <Ellipse Height="291" Margin="8,0" StrokeStartLineCap="Round" Stroke="Green" StrokeThickness="5" StrokeMiterLimit="50" StrokeLineJoin="Round">
                    <Ellipse.Fill>
                        <RadialGradientBrush>
                            <GradientStop Color="Black" Offset="0"/>
                            <GradientStop Color="#FF113987" Offset="1"/>
                            <GradientStop Color="#FF444AA3" Offset="0.683"/>
                            <GradientStop Color="#FF252B99"/>
                        </RadialGradientBrush>
                    </Ellipse.Fill>
                </Ellipse>
                <es:Arc ArcThickness="1" ArcThicknessUnit="Percent" EndAngle="360" Height="288" Margin="10,-290,8,0" StrokeStartLineCap="Round" Stretch="None" Stroke="Green" StrokeThickness="5" StrokeMiterLimit="50" StrokeLineJoin="Round" StartAngle="95" UseLayoutRounding="False">
                    <es:Arc.Fill>
                        <RadialGradientBrush>
                            <GradientStop Color="#FF3AAF22" Offset="0.652"/>
                            <GradientStop Color="#FF1B700C" Offset="0.996"/>
                            <GradientStop Color="#FF258914"/>
                        </RadialGradientBrush>
                    </es:Arc.Fill>
                </es:Arc>
            </StackPanel>
            <Ellipse HorizontalAlignment="Left" Height="36" Margin="145,215,0,0" StrokeStartLineCap="Round" Stroke="#FF252B99" StrokeThickness="5" StrokeMiterLimit="50" StrokeLineJoin="Round" VerticalAlignment="Top" Width="35" RenderTransformOrigin="0.871,1.653">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#FF6162B4" Offset="0.165"/>
                        <GradientStop Color="#FF161760" Offset="0.457"/>
                        <GradientStop Color="#FF5455AD" Offset="0.761"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse> 
```

# objective-c - NSMutableURLRequest iphone

> ID：12510726
> 
> 赞同：0
> 
> 时间：2012-09-20T10:27:31.903
> 
> 标签：objective-c, nsmutableurlrequest

我的问题似乎很基本，但我找不到！

```
 NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://miip.com"]]; 
```

我得到这个错误：

```
 Expected expression 
```

我找不到！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:42:10.017

上面的行是有效的。这听起来像是这条线之外的编码错误。也许你错过了一个; 在之前的行中或类似的东西。

# ruby - 动态扩展现有方法或覆盖 ruby 中的发送方法

> ID：12510729
> 
> 赞同：6
> 
> 时间：2012-09-20T10:27:42.863
> 
> 标签：ruby, metaprogramming

假设我们有 A、B、C 类。

```
A
 def self.inherited(sub)
   # meta programming goes here
   # take class that has just inherited class A
   # and for foo classes inject prepare_foo() as 
   # first line of method then run rest of the code
 end

 def prepare_foo
   # => prepare_foo() needed here
   # some code
 end

end

B < A
  def foo
    # some code
  end
end

C < A
  def foo
    # => prepare_foo() needed here
    # some code
  end
end 
```

如您所见，我正在尝试`foo_prepare()`对每个`foo()`方法注入调用。

怎么可能呢？

此外，我一直在考虑以我会运行的方式覆盖`send`类，而不是让(super) 来执行其余的方法。`class A``foo_prepare``send`

你们怎么看，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T10:37:47.320

这是给你的解决方案。尽管它基于模块包含而不是从类继承，但我希望您仍然会发现它很有用。

```
module Parent
  def self.included(child)
    child.class_eval do
      def prepare_for_work
        puts "preparing to do some work"
      end

      # back up method's name
      alias_method :old_work, :work

      # replace the old method with a new version, which has 'prepare' injected
      def work
        prepare_for_work
        old_work
      end
    end
  end
end

class FirstChild
  def work
    puts "doing some work"
  end

  include Parent # include in the end of class, so that work method is already defined.
end

fc = FirstChild.new
fc.work
# >> preparing to do some work
# >> doing some work 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T10:57:09.480

我推荐[Sergio 的](https://stackoverflow.com/users/125816/sergio-tulentsev)解决方案（已接受）。这是我所做的符合我的需求。

```
class A
  def send(symbol,*args)
    # use array in case you want to extend method covrage
    prepare_foo() if [:foo].include? symbol
    __send__(symbol,*args)
  end
end 
```

或者

```
class A
  alias_method :super_send, :send           

  def send(symbol,*args)
    prepare_foo() if [:foo].include? symbol
    super_send(symbol,*args)
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-27T14:55:49.500

从 Ruby 2.0 开始，您可以使用 'prepend' 来简化 Sergio 的解决方案：

```
module Parent
  def work
    puts "preparing to do some work"
    super
  end
end

class FirstChild
  prepend Parent

  def work
    puts "doing some work"
  end
end

fc = FirstChild.new
fc.work 
```

这允许模块在不需要 alias_method 的情况下覆盖类的方法。

# javascript - 使用 jQuery 定位子 UL

> ID：12510732
> 
> 赞同：0
> 
> 时间：2012-09-20T10:27:47.217
> 
> 标签：javascript, jquery

我的页面上有一个无序列表，其中包含每个 LI 中的列表。

目前它们都设置为不显示，但单击时我想切换显示设置。

我只写了以下内容，但我似乎无法让它工作，有人知道我哪里出错了吗？

```
//Product range expander
$('.product-range ul li a').click(function() {
  $(this).find('.product-range ul li ul').slideDown('slow');
  //$('.product-range ul li a').next('ul').toggle();
  return false;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:29:33.210

*   用于`$(this)`选择被点击的元素（即锚元素）。
*   用于`.parents("li")`查找锚的第一个匹配父级。这样我们就可以找到与.`ul`相同`li`的`a`.
*   用于`.find("ul")`查找`ul`元素内的`li`元素。

* * *

```
$('.product-range ul li a').click(function() {
  $(this).parents("li").find("ul").slideDown('slow')
  return false;
}); 
```

* * *

或者，您可以使用`siblings`：

```
$('.product-range ul li a').click(function() {
  $(this).siblings("ul").slideDown('slow')
  return false;
}); 
```

但是我更喜欢找到共同的父级，然后找到元素，以防标记发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:30:22.043

在您的代码`this`中指的是*使用 jQuery 找到的锚点*。在它下面你没有我假设的 UL > LI 结构。为了找到正确的元素，将其更改为：

```
//Product range expander
$('.product-range ul li a').click(function() {
    $('.product-range ul li ul').slideDown('slow');
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:29:03.987

```
 $(this).find('ul').slideDown('slow'); 
```

应该足以显示嵌套列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T10:34:25.433

请试试这个。

```
$(this).children().find('ul').slideDown('slow'); 
```

# c++ - opengl 在屏幕上渲染之前旋转对象以设置其正确的面

> ID：12510734
> 
> 赞同：0
> 
> 时间：2012-09-20T10:27:50.497
> 
> 标签：c++, opengl, rotation, glm-math

我正在使用 GLM 库通过 opengl 中的 obj 文件加载对象，但它在屏幕上颠倒显示。我还为用户提供了一种功能，因此他也可以通过鼠标相应地旋转所有对象。例如放大和放大并随 y 轴旋转。

问题是我不知道如何首先旋转对象以根据我的需要制作它的脸。之后我想绘制这个对象，然后鼠标可以发挥它的作用来旋转它。

我的绘图函数包含以下代码

```
glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glPushMatrix();
glTranslatef(m_fPosX, m_fPosY,-m_fZoom);
glRotatef(m_fRotX, 1.0f, 0.0f, 0.0f);//these two for mouse movement
glRotatef(m_fRotY, 0.0f, 1.0f, 0.0f);
glRotated(180,0.0f, 0.0f, -1.0f);

glDisable(GL_TEXTURE_2D);
glColor3f(0.90f,0.90f,0.90f);
glmDraw(m_p3dModel,GLM_SMOOTH | GLM_MATERIAL); 

glPopMatrix(); 
```

这里的旋转功能都依赖于鼠标的移动，但是如果它被颠倒加载，我不知道如何首先让我的对象面向正确的方向，然后在这个绘图函数中允许它......这意味着我需要在调用它之前设置它的面绘图功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:33:15.487

```
glRotatef(m_fRotY, 1.0f, 0.0f, 0.0f); 
```

应该

```
glRotatef(m_fRotY, 0.0f, 1.0f, 0.0f); 
```

复制/粘贴是万恶之母 :o)

对于转换/投影/模型视图教程：检查[链接](http://www.songho.ca/opengl/gl_transform.html)

# c# - DotNetOpenAuth 版本错误

> ID：12510738
> 
> 赞同：0
> 
> 时间：2012-09-20T10:28:05.553
> 
> 标签：c#, oauth-2.0, dotnetopenauth

`DotNetOpenAuth.AspNet`v4.1 使用`DotNetOpenAuth.Core`v4.1 - 我不知道`DotNetOpenAuth.Core`v4.1 在哪里？

AspNet 库是在 NuGet 上并最近上传的，这让我发疯了 - 为什么上传一个版本的库，它的依赖项仅在较低版本号中可用。

我选择 v4.1 的原因是直到最近我才开始使用 v4.0，当我开始遇到 Facebook Connect 问题时，我想看看 v4.1 是否解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T00:34:20.113

使用 NuGet 安装 DotNetOpenAuth.AspNet，其所有依赖项将自动安装。

# mysql - 将 json 存储在字段中或使用单独的表进行规范化？

> ID：12510739
> 
> 赞同：2
> 
> 时间：2012-09-20T10:28:09.493
> 
> 标签：mysql, database, json, normalization

将json数据存储在一个`affiliate_phone_id`字段中或使用单独的表对其进行规范化更好？

例如：

```
mysql> select * from phone;
+----+----------+-------------+-------------------------------------------------------------------------------------------+
| id | name     | description | affiliate_phone_id                                                                        |
+----+----------+-------------+-------------------------------------------------------------------------------------------+
| 32 | iPhone 5 | faster CPU  | [{"affiliate_id":2,"affiliate_phone_id":123},{"affiliate_id":3,"affiliate_phone_id":222}] |
+----+----------+-------------+-------------------------------------------------------------------------------------------+ 
```

上面的数据显示每个零售商都有自己的电话号码，例如：

公司 2 (affiliate_id = 2)，他们的电话 ID 是 123

还是做这样的单独表格会更好：

```
mysql> select * from phone_affiliate;
+----+----------+--------------+--------------------+
| id | phone_id | affiliate_id | affiliate_phone_id |
+----+----------+--------------+--------------------+
|  1 |       32 |            2 | 123                |
|  2 |       32 |            3 | 222                |
+----+----------+--------------+--------------------+ 
```

还是有其他更好的建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T10:42:44.383

规范化表。

也许，您不需要 phone_affiliate 表中的“id”字段。您可以设置主键（phone_id，affiliate_id）或（phone_id，affiliate_id，affiliate_phone_id），这取决于数据之间的关系。

```
mysql> select * from phone_affiliate;
+----------+--------------+--------------------+
| phone_id | affiliate_id | affiliate_phone_id |
+----+----------+--------------+---------------+
|       32 |            2 | 123                |
|       32 |            3 | 222                |
+----+----------+--------------+---------------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:34:35.467

只需使用规范化表，如果您必须以 JSON 以外的其他格式访问数据，这将有所帮助。

# asp.net - Asp.net 文件上传控制

> ID：12510743
> 
> 赞同：-1
> 
> 时间：2012-09-20T10:28:34.790
> 
> 标签：asp.net

我有一个文件上传控件，我希望该文件仅在低于某个内存限制 (8 Mb) 时才附加。我使用 Ajax 获取文件大小并在 onchange 事件中调用它。但我无法限制文件的附件。谁能帮我 ？

这是示例代码

```
function a(obj) {
    if ($(obj).val() != '') {
        var request;
        var flag = false;
        request = $.ajax({
            type: "POST",
            url: 'CheckFileSize.aspx',
            data: "search=" + $(obj).val(),
            success: function (size) {
                if (parseFloat(size) < 8192) {
                    flag = true;
                }
                if (!flag) {
                    alert('File size is greater then 8 MB. The size of the file is ' + (parseFloat(size)) / 1024 + ' MB'); 
```

//做一些限制用户上传的事情在这里输入代码 $(obj).val(null); } 返回标志；} }); } 返回假；}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:38:45.063

在处理上传文件的服务器端方法中，添加以下代码：

```
 if (myFileUploadControl.HasFile)
        {
                int maxSize = Convert.ToInt32(ConfigurationManager.AppSettings.Get("MaxImageSize"));     //MaxImageSize specified in web.config file to make it easy to change.

                int imageSize = myFileUploadControl.PostedFile.ContentLength;
                if (imageSize > maxSize)
                {
                    string uploadImageError = "The selected file exceeds the maximum allowed size (" + maxSize / 1000 + "k)";  // Message to display to user.
                }
                else
                {
// Code to process the file here.
                }
        } 
```

将以下内容添加到 web.config 文件的 system.web 部分也将防止接受过大的上传。

```
<!-- set max upload to 25 MB -->
<httpRuntime executionTimeout="300" maxRequestLength="25000"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:31:15.597

您应该能够清除输入的值 - 在 jQuery 中它看起来像

`$('#fileInputId').val('')`

# mysql - MySQL中的大搜索和替换

> ID：12510747
> 
> 赞同：0
> 
> 时间：2012-09-20T10:28:50.777
> 
> 标签：mysql, sql

我有一个名为*news*的表，其列*内容*类型为*text*。该表包含超过 50000 条记录。

*内容*列的文本可能包含几个看起来像[http://www.domain.com/news/voir/ID/title](http://www.domain.com/news/voir/ID/title)的链接我想用**newdomain.com**替换所有这些链接中的**domain.com**

 **最有效的解决方案是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:37:38.727

我会推荐

```
UPDATE news SET content = REPLACE(content, 'http://www.domain.com/', 'http://www.newdomain.com/'); 
```

为了避免可能出现大量的flase positives ...想想一篇新闻文章说“今天中断了domain.com，作为ISP blah blah”......你不会想要替换它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:31:06.333

试试这个...

```
UPDATE news
SET content = replace(content,'domain.com','newdomain.com'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:31:18.813

mysql replace() 来救援！

`UPDATE news SET content = REPLACE(content, 'domain.com', 'newdomain.com');`**

# ios - iOS UITableView AutoSizing Cell with Section Index

> ID：12510750
> 
> 赞同：2
> 
> 时间：2012-09-20T10:28:53.337
> 
> 标签：ios, uitableview, indexing, cell, autoresize

我有一个应用程序，我在表格视图中加载一个大的 plist 文件。这个 plist 文件就像一本书。它包含章节和行。每行都有不同的长度，具体取决于行长，因此我需要自动调整单元格的大小。

我正在使用情节提要和标准表格视图和单元格。单元格样式=基本，单元格标签设置为 text=plain lines=0 linebreaks=wordwrap

到那里为止，将单元格高度调整到适当的大小没有问题。由于单元格高度是在文本插入标签之前定义的，我们必须通过众所周知的使用 CGsize 的方法来完成它，我这样做（它工作正常）

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:
      (NSIndexPath*)indexPath
{
    NSUInteger section = [indexPath section];
    NSString *key = [chapters objectAtIndex:section];
    NSArray *linesSection = [lines objectForKey:key];
    NSString* theText =  [linesSection objectAtIndex:indexPath.row];

    int labelWidth = LW_CHAPTERINDEX_10;
    if (chapters.count < 100){
        if (chapters.count < NB_MIN_CHAP){
            labelWidth = LABELWIDTH;
        } else {
            labelWidth = LW_CHAPTERINDEX_10;
        }
    }

    CGSize textSize = [theText sizeWithFont:[UIFont systemFontOfSize:14]
        constrainedToSize:CGSizeMake(labelWidth, MAXFLOAT) 
        lineBreakMode:UILineBreakModeWordWrap];

    return textSize.height;
} 
```

问题是取决于索引的硬编码。现在我有3个可能性。

*   无索引
*   数字低于 10 的索引
*   数字低于 100 的索引

在代码中这部分

```
int labelWidth = LW_CHAPTERINDEX_10;
if (chapters.count < 100){
    if (chapters.count < NB_MIN_CHAP){
        labelWidth = LABELWIDTH;
    } else {
        labelWidth = LW_CHAPTERINDEX_10;
    }
} 
```

是取决于 3 种可能性的硬编码。

我觉得这很奇怪，特别是如果苹果将开始提供更多不同的屏幕尺寸。

**问题**

如何在运行时获取索引宽度以确定我的标签宽度？

例如，我想编写类似 screen.width - index-width 来获取标签宽度。

或者任何其他应该允许它是动态的并且不再是静态硬编码的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:54:09.373

不幸的是，没有（标准）方法可以直接访问部分索引子视图。但是，您可以使用计算`CGSize`文本的方法来动态确定节索引的宽度。

您可以预先确定要返回的所有可能的字符串`sectionIndexTitlesForTableView:`并计算必要的大小，也许左右填充一些额外的像素。也许有必要做一些实验来确定正确的字体和大小。

现在你的方法`screenSize.width - textSize.width - 2*PADDING`应该是可行的。现在唯一硬编码的东西是填充，当引入新的屏幕尺寸时它不应该破坏东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:39:04.813

好的，为了节省其他人几个小时的工作......我费力地测试了各种字体、大小和边距，将它们与带有索引的实际表视图的 UIView 层次结构转储进行比较，以达到这个方法，它将返回表格索引的宽度，以便表格视图单元格内容的边界可以计算为 table_width - index_width。我要指出的是，通常还有另外 20 像素的右侧留给附件视图。

我还发现 cell.contentView.bounds 直到在 cellForRowAtIndexPath 和 willDisplayCell 方法被调用之后才正确设置，因此在这些调用期间尝试获取值注定会失败。它在调用 viewDidAppear 时正确设置。

如果设备语言设置为非英文字母，我不知道如何计算索引宽度。

```
- (CGFloat) getMaxIndexViewWidth
{
    CGFloat indexMargin = 21.0;   
    NSArray *sectionTitles = [self sectionIndexTitlesForTableView:nil];  //NOTE -- if multiple tables, pass real one in

    CGFloat maxWidth11 = CGFLOAT_MIN;

    for(NSString *title in sectionTitles)
    {
        CGFloat titleWidth11 = [title sizeWithFont:[UIFont  fontWithName:@"Helvetica-Bold" size:11.0f]].width;
        maxWidth11 = MAX(maxWidth11, titleWidth11);     
    }
    return maxWidth11+indexMargin;
} 
```

# java - 在不同的浏览器中加载相同的jsp？

> ID：12510756
> 
> 赞同：0
> 
> 时间：2012-09-20T10:29:08.243
> 
> 标签：java, spring, spring-security

```
<sec:authorize ifAnyGranted="<%=dRoles%>">
    <meta http-equiv="REFRESH" content="0;url=public/First.jsp">
</sec:authorize>

<sec:authorize ifAnyGranted="<%=aRoles%>">      
      <meta http-equiv="REFRESH" content="0;url=public/Second.jsp">
</sec:authorize>

<sec:authorize ifAnyGranted="<%=bRoles%>">  
    <meta http-equiv="REFRESH" content="0;url=public/Third.jsp">
</sec:authorize> 
```

我正在使用弹簧安全。登录成功后，将加载 Startup.jsp ( **default-target-url="/Startup.jsp** )。我的 Startup.jsp 中有上述代码。我正在使用 spring 安全标签。考虑用户可以访问以上 3 个 jsps .**问题是，在IE7中，加载了First.jsp，但在其他浏览器中加载了Third.jsp**。如何在两个浏览器中显示相同的jsp？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:38:00.313

我猜您的情况是，用户在 中`dRoles`和 中都有角色`bRoles`，因此您的代码会向浏览器发送两个不同的元刷新。

首先，不要使用元刷新，而是使用真正的重定向或转发（这不应该在 JSP 中完成，而是在控制器、过滤器或 servlet 中完成）。

如果您真的想继续使用 JSP 解决方案，我想这样的事情应该可行：

```
<c:set var="refreshSent" value="${false}"/>

<sec:authorize ifAnyGranted="<%=dRoles%>">
    <meta http-equiv="REFRESH" content="0;url=public/First.jsp">
    <c:set var="refreshSent" value="${true}"/>
</sec:authorize>

<sec:authorize ifAnyGranted="<%=aRoles%>">
    <c:if test="${!refreshSent}">      
        <meta http-equiv="REFRESH" content="0;url=public/Second.jsp">
        <c:set var="refreshSent" value="${true}"/>
    </c:if>
</sec:authorize>

<sec:authorize ifAnyGranted="<%=bRoles%>">  
    <c:if test="${!refreshSent}">
        <meta http-equiv="REFRESH" content="0;url=public/Third.jsp">
        <c:set var="refreshSent" value="${true}"/>
    </c:if>
</sec:authorize> 
```

# wpf - Telerik GridView中的闪烁行

> ID：12510759
> 
> 赞同：1
> 
> 时间：2012-09-20T10:29:26.427
> 
> 标签：wpf, gridview

我是 Telerik 控件的新手，我正在使用 GridView 做一个应用程序，我想让一些行闪烁或闪烁。

我找到了通过 StyleSelector 完成的样式，但是当我尝试使用 styleSelectors 更改行背景颜色时，滚动无法正常工作。

有人知道是否有简单的方法吗？希望有人能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:37:37.333

所以解决这个问题的方法是应用一个行样式选择器并将其定位在 Telerik:GridViewRow 的 TargetType 上。

```
<Behaviours:FlashingRowStyleSelector x:Key="resultsGridStyle">
        <Behaviours:FlashingRowStyleSelector.SucceededStyle>
            <Style TargetType="telerik:GridViewRow">
                <Style.Triggers>
                    <Trigger Property="Visibility" Value="Visible">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard >
                                <ColorAnimation Storyboard.TargetProperty="Background.Color"
                                          Duration="0:0:0.2"  From="White" To="Red" RepeatBehavior="Forever" AutoReverse="True"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                </Trigger>
            </Style.Triggers>
       </Style>

        </Behaviours:FlashingRowStyleSelector.SucceededStyle> 
```

然后在你有这个属性集

RowStyleSelector="{StaticResource resultsGridStyle}"

然后控制它 - 您必须编写一个继承自 StyleSelector 的类，该类根据填充网格中任何行项目的值来决定选择哪种样式。所以这样的事情应该可以解决问题

```
public class FlashingRowStyleSelector : StyleSelector
{
    #region Properties

    /// <summary>
    /// Gets or sets the succeeded style.
    /// </summary>
    public Style SucceededStyle { get; set; }

/// <summary>
    /// Gets or sets the succeeded style.
    /// </summary>
    public Style NormalStyle{ get; set; }

    #endregion

    #region Public Methods

    /// <summary>
    /// The select style.
    /// </summary>
    /// <param name="item">
    /// The item.
    /// </param>
    /// <param name="container">
    /// The container.
    /// </param>
    /// <returns>
    /// The <see cref="Style"/>.
    /// </returns>
    public override Style SelectStyle(object item, DependencyObject container)
    {
        var info = item as RowObject
        if (info != null)
        {
            if (info.SomeProperty == "1")
            {
                return this.SucceededStyle;
            }

        }

        return this.NormalStyle;
    }

    #endregion
} 
```

基本上所有这一切都是根据设置的属性 1 设置样式...因此，如果网格中的一行满足此条件，那么它将在所需的持续时间内从白色变为红色进行动画处理。

# css - CSS悬停停止动画

> ID：12510761
> 
> 赞同：3
> 
> 时间：2012-09-20T10:29:34.703
> 
> 标签：css

我有一个`<span>`包含一些文字的内容，当你将鼠标悬停在它上面时，一个图像会从页面上滑下来。到目前为止，一切都很好。但是，当您的鼠标意外悬停在图像上时，动画将停止。我不要那个。

```
.coffee {
    -webkit-transition: color 0.2s linear;
    -moz-transition: color 0.2s linear;
    -o-transition: color 0.2s linear;
    -ms-transition: color 0.2s linear;
    transition: color 0.2s linear;
    z-index: 10;
}
.coffee:hover {
    color: #B88A00;
}
.coffee img {
    position: absolute;
    display: block;
    height: 100px;
    width: 100px;
    z-index: 1;
    left: 280px;
    top: 50px;
    opacity: 0;
    -webkit-transition: top 0.4s ease-in-out, opacity 0.6s ease-in-out;
    -moz-transition: top 0.4s ease-in-out, opacity 0.6s ease-in-out;
    -o-transition: top 0.4s ease-in-out, opacity 0.6s ease-in-out;
    -ms-transition: top 0.4s ease-in-out, opacity 0.6s ease-in-out;
    transition: top 0.4s ease-in-out, opacity 0.6s ease-in-out;
}
.coffee:hover img {
    top: 150px;
    opacity: 1;
} 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:41:19.413

据我了解，这可能是你想要的。像这样写：

**HTML**

```
<span class="coffee"><u>coffee</u></span>!
<img src="image.jpg" alt="Coffee!"/> 
```

**CSS**

```
.coffee:hover + img{
    top: 150px;
    opacity: 1;
} 
```

检查这个[http://jsfiddle.net/quLKb/2/](http://jsfiddle.net/quLKb/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:57:50.630

您可以使用指针事件属性。如果将其设置为 none，则在应用了该 css 规则的元素上将省略鼠标事件。

```
.coffee img {
  pointer-events: none;
} 
```

这是修改后的示例：http: [//jsfiddle.net/kFd9g/](http://jsfiddle.net/kFd9g/)

# jquery - 制作一个需要自动完成的 jQuery 字段

> ID：12510764
> 
> 赞同：1
> 
> 时间：2012-09-20T10:29:40.760
> 
> 标签：jquery, autocomplete

嗨，我有一个 jQuery autcomplete 问题，我有一个用户输入名称的字段，它工作得很好。

我如何使它成为**必需**的？我的意思是我希望用户必须使用自动完成字段添加至少一个用户。

我也使用[白色模板标签](http://revaxarts-themes.com/whitelabel/form.html)

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:35:20.393

由于您使用 jquery，您可以使用所需的方法[http://docs.jquery.com/Plugins/Validation/Methods/required](http://docs.jquery.com/Plugins/Validation/Methods/required) 并使该字段为必填项，以便用户输入至少一个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-19T17:17:03.203

如果您碰巧只在支持 HTML5 的现代浏览器中需要此功能。一个更简单的解决方案可能是新的“必需”属性：[W3Schools Required Attr](http://www.w3schools.com/tags/att_input_required.asp)

# assembly - 为什么 word[label+num] 会改变 eax？

> ID：12510765
> 
> 赞同：-1
> 
> 时间：2012-09-20T10:29:44.810
> 
> 标签：assembly, nasm

```
section .data
fun:
   add word[L+2],0x203
L: mov eax,0x1020304 ; this instruction including operand stored in 5 byte in memory
   ret 
```

“有趣”的功能是做什么的？为什么eax会有一个新值0x1040604

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:53:54.557

好的，您有一个`mov eax, 0x1020304`, 具有 5 字节编码（也有 6 字节编码，但我们忽略它）。所以它看起来像这样（记住 - 小端）：

```
B8 04 03 02 01 
```

其中 L 指的是 B8，L+2 指的是 03。现在，如果您将 0x0203 添加到它（记住 - 小端序），03 将添加到 03 并且 02 将添加到 02，因此您会得到：

```
B8 04 06 04 01 
```

这是：

```
mov eax, 0x01040604 
```

# cron - Quartz.Net 的 Cron Maker

> ID：12510772
> 
> 赞同：0
> 
> 时间：2012-09-20T10:30:35.050
> 
> 标签：cron, cronexpression

我试图在我的项目中使用 CRON Maker。我需要使用 CRON Makers 进行基于 UI 的调度。示例站点[单击此处](http://www.cronmaker.com/)。在我的 UI 中，有一些时间表可供用户选择任何类型。以下是一些可能性。

1.  一次（开始日期，时间）

2.  每天（开始日期和时间，每 --- 天重复一次（例如：-5- 天）

3.  每周（开始日期和时间，每周重复一次 --- 周日、周一、周二的周数（例如：-2 周）。

4.  每月（开始日期和时间、日期 (1-31)、月份 (1-12)。

    我已经完成了每月计划的 CRON 表达式。我不知道如何为其他情况制作 CRON 表达式。请帮助我。

    谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-15T16:31:50.770

您可以在 CRON 表达式生成器下面：

[https://github.com/onterumahendra/CronScheduler](https://github.com/onterumahendra/CronScheduler)

[https://github.com/onterumahendra/CronScheduler-Foundation](https://github.com/onterumahendra/CronScheduler-Foundation)

如果您在后端使用 Quartz Scheduler，这些非常适合。它生成 CRON 表达式并在 UI 中填充 CRON 表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:40:20.180

Cron 语法不支持周（或任何类似的构造，例如一年中的某一天）。有一个月中的一天字段，可以用它来近似 n 周的行为。

对于 days 指令，您可以使用第二个字段（星期几）。

另见[http://en.wikipedia.org/wiki/Cron#Format](http://en.wikipedia.org/wiki/Cron#Format)

# scala - 设置 sbt scalafx 项目

> ID：12510779
> 
> 赞同：7
> 
> 时间：2012-09-20T10:30:56.370
> 
> 标签：scala, javafx-2, sbt

javafx 现在在 oracle-jdk 中。

scalafx 在其存储库中提供了很好的示例

我无法回答的主要问题是“如何开始使用 scalafx”？

如何在我的 sbt 项目中添加 scalafx 库依赖项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:52:47.560

ScalaFX 即将达到稳定的发布状态。在我写这篇文章时，您可以在[maven 中央存储库上找到 1.0.0-M2 版本的已发布工件](http://search.maven.org/#search%7Cga%7C1%7Cscalafx)

将依赖项添加到您的 sbt 构建中就足够了

```
libraryDependencies += "org.scalafx" %% "scalafx" % "1.0.0-M2" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T11:45:44.120

我是通过以下方式完成的：我克隆了 scalafx 存储库，使用 构建 jar `sbt package`，然后将生成的 jar 复制到`lib/`我的项目目录中。确保也引用您的 ${JAVAFX_HOME}/lib/jfxrt.jar。

如果您想使用本地 maven，只需`sbt publish-local`在您的 scalafx 目录中运行，然后将以下依赖项添加到您的项目中：

```
"org.scalafx" % "scalafx" % "1.0-SNAPSHOT" 
```

（在 scalafx build.sbt 中查找该版本，我粘贴了我的版本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:27:57.073

@ayvango 我创建了一个 giter8 scalafx 项目模板。只需使用

```
 g8 jugchennai/scalafx.g8 
```

你只需要一个新版本的 JDK、Giter8 和 SBT。javafx、scala、scalafx 的依赖设置是预定义的！IDE 支持也可用。

网址：[https ://github.com/jugchennai/scalafx.g8](https://github.com/jugchennai/scalafx.g8)

# opencv - 如何解释校准结果（OpenCV）

> ID：12510781
> 
> 赞同：1
> 
> 时间：2012-09-20T10:30:57.447
> 
> 标签：opencv, camera-calibration, calibration

我用棋盘进行了校准（我以毫米为单位定义了角的大小）。现在，校准（矩阵旋转平移）的结果是否以 mm 为单位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:56:56.577

简短而冗长的答案：是的。

您基本上在定义棋盘正方形大小时设置单位，因此由于您以 mm 定义它，因此您的结果将以 mm 为单位。

**编辑：**请记住，尽管重投影误差以像素为单位，而不是以毫米为单位。

# delphi - Delphi：在dll中调用过程后访问冲突

> ID：12510783
> 
> 赞同：5
> 
> 时间：2012-09-20T10:31:01.960
> 
> 标签：delphi, delphi-7

我在 dll 中创建了一个过程，该过程打开一个表单，然后打印一个报告。此过程可通过 exe 完美运行。我已将包含此过程和表单的单元包装在一个 dll 中，并按如下方式导出该过程：

```
{$R *.res}

Procedure PrintTopSellers; stdcall;
begin
  Form1 := TForm1.create(nil);
  GetMonth := TGetMonth.create(nil);
  Form1.PrintTopSellers;
end;

exports PrintTopSellers;

begin
end. 
```

现在我从一个 exe 调用这个过程 PrintTopSellers，如下所示：

```
procedure TForm1.Button5Click(Sender: TObject);
type
  TRead_iButton = function :integer;
var
    DLL_Handle: THandle;
    Read_iButton: TRead_iButton;
Begin
    DLL_Handle := LoadLibrary('c:\Catalog.dll');
    if DLL_Handle <> 0 then
    begin
       @Read_iButton:= GetProcAddress(DLL_Handle, 'PrintTopSellers');
        Read_iButton;
    end;
    application.ProcessMessages;
    FreeLibrary(DLL_Handle);

end; 
```

对该过程的调用完美无缺。但是，在我关闭调用 exe 后，我得到一个访问冲突 - “地址 00BAC89C 的访问冲突。读取地址 00BAC89C。”

感谢任何帮助。我正在使用 Delphi 7。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T10:42:57.057

您正在`Form1`DLL 中创建一个窗口控件。但你永远不会破坏它。然后，您卸载 DLL，该 DLL 卸载实现由 DLL 创建的所有窗口的窗口过程的代码。大概当进程关闭时，窗口过程被调用，但那里不再有代码了。

通过销毁 DLL 创建的所有对象来解决此问题。在我看来，最好的方法是在`PrintTopSellers`终止时这样做。

```
Procedure PrintTopSellers; stdcall;
begin
  Form1 := TForm1.create(nil);
  try
    GetMonth := TGetMonth.create(nil);
    try
      Form1.PrintTopSellers;
    finally
      GetMonth.Free;
    end;
  finally
    Form1.Free;
  end;
end; 
```

在加载 DLL 的代码中，`TRead_iButton`声明不正确。它应该是

```
TRead_iButton = procedure; stdcall; 
```

但这实际上并不能解释这里的问题，因为签名不匹配对于无参数过程是良性的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T10:43:20.320

“TRead_iButton = 函数：整数；寄存器；”

“程序 PrintTopSellers；标准调用；”

完全不同的约定/类型，不是吗？

使它们相同。并且更好地抛弃 DLL 并使用包（BPL），然后编译器将使您免受此类错误的影响

* * *

我们也看不到 Form1.PrintTopSellers 和 TGetMonth 中的代码。所有这些都可以在主机 exe 中留下一些悬空指针，这些指针会在 DLL 卸载后获得访问权限。

* * *

准确显示导致 AV 的函数调用链 - 它称为堆栈跟踪。调试信息 + 一些 excaption 中断，如 Jedi CodeLibrary（由 Delphi IDE 使用）madExcept、EurekaLog、概要日志和许多其他存在。

[在 Delphi Win32 应用程序中显示调用堆栈](https://stackoverflow.com/questions/258727)

* * *

DLL 或 EXE 是否使用运行时包？

# android - 将 iScroll 与 Jquery Mobile 一起使用。

> ID：12510785
> 
> 赞同：1
> 
> 时间：2012-09-20T10:31:11.323
> 
> 标签：android, html, cordova, jquery-mobile, iscroll4

我有一个使用 html5 和 Jquery Mobile 创建的简单对话框。如下：

```
<div data-role="dialog" id="page2" data-theme="a">

            <div data-role="header" class="header">

                <h1>Door Styles</h1>

            </div><!-- /header -->

            <div data-role="content" data-theme="a">

            <div id="wrapper">

                <div id="scroller" class="scroll">  

                    <ul data-role="listview" id="mylist">

                    </ul>

                    </div>

                </div>

            </div><!-- /content -->

            <div data-role="footer" class="footermodal">

                <h1>↕ Please Scroll ↕&lt;/h1>

            </div><!-- /footer -->

        </div> 
```

我实现 iScroll 的原因是因为在 Android 2.2.2 中对话框不可滚动。但是，当我实现它时，它几乎将我的页眉和页脚移出屏幕。当你滚动时，只要你放开它，它就会弹回顶部。我使用以下代码实现它：

```
 <script type="text/javascript">

var myScroll;
function loaded() {
    myScroll = new iScroll('wrapper');
}

    window.addEventListener('load', setTimeout(function () { loaded(); }, 200), false); 

            </script> 
```

这似乎是 Jquery 样式和 iScroll 样式之间的冲突。有没有其他人有这个问题？或者知道如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:42:34.943

您需要在创建元素后安装它。

```
newElement =  function () {$ ("body"). append ('<div id='wrapper'> content </ div> ");loaded(); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T08:40:53.440

`#wrapper { position: absolute; top: 0px; bottom: 0px; }`

我刚刚遇到了这个问题并修复了它，确保你的包装 div 的位置是绝对的或固定的，并且定义了顶部和底部。

# shell - 这个shell脚本会做什么？

> ID：12510789
> 
> 赞同：-1
> 
> 时间：2012-09-20T10:31:16.253
> 
> 标签：shell, unix

```
claProductVersion=`head -l ${amSqlCre}` 
claProductVersion=`expr "${claProductVersion}" : 'Create Table \([^ ]*\) ('` 
```

1.  为什么我们在这里使用“ **：** ”？
2.  ([^ ]*) 在做什么？
3.  head -l 在做什么？因为我在头手册页中没有找到任何“ **l ”选项。**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-20T10:41:36.883

1`man expr`会告诉你`STRING : REGEXP`，这意味着`anchored pattern match of REGEXP in STRING`

2 正则表达式`\([^ ]*\)`将匹配字符串，如`xxx`. `[^ ]`表示除空格以外的任何字符。并且`*`意味着重复任何时间，包括零。`\(`and`\)`表示显示匹配的字符串。没有它们，结果将是正则表达式匹配的位置。

3 我还是觉得有些不对劲。`l`在这里没有意义。它应该是一个`1`.

# gfortran - 用于防止在 gfortran 中消除部分冗余的编译器标志

> ID：12510795
> 
> 赞同：1
> 
> 时间：2012-09-20T10:31:52.330
> 
> 标签：gfortran

我正在尝试从我正在使用的大型 Fortran 程序中获得更快的速度。我（还）不太熟悉代码，所以我认为编译器优化将是一个很好的第一站。使用 gfortran 的`-O1`选项很好，但会以意外 NaN`-O2`的`-O3`形式产生运行时错误。通过分解`-O2`其组成标志，我确定这`-ftree-pre`是问题所在，其他一切正常。

有没有办法只压制`-ftree-pre`旗帜？这样我就可以用 编译`-O3 -no-ftree-pre`，如果这有意义的话。

我已经确定了代码的哪一部分产生了错误，所以我的长期计划是消除错误。但这将构成目前的快速解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:41:40.107

如 GCC 手册页中所述：

> 许多选项具有以`-f`或开头的长名称`-W`- 例如，`-fmove-loop-invariants`等等`-Wformat`。其中大部分既有正面形式也有负面形式；的否定形式`-ffoo`是`-fno-foo`. 本手册仅记录这两种形式中的一种，以非默认形式为准。

在您的情况下，为了否定 enable 的效果`-O3`，您应该在标志**之后**`-ftree-pre`附加。`-fno-tree-pre` **`-O3`**

# jquery - 将 TokenInput 和 razor 代码绑定到同一个模型？

> ID：12510797
> 
> 赞同：2
> 
> 时间：2012-09-20T10:31:59.210
> 
> 标签：jquery, asp.net-mvc-3

在 HTML 表单中，如何绑定 jquery 控件（例如 tokeninput），就像绑定普通原始类型到模型一样？我正在努力寻找方法来做到这一点，我知道你可以使用自定义模板等，但是 jquery 插件没有任何东西。

具体来说，我使用的是 tokenInput，请参见此处（[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)）。这是我针对标准 HTML 文本输入应用的 jQuery 代码。对于每个按键，它都会转到控制器以返回作者列表。您还可以预填充作者，我使用 HTML5 中的数据标签来预填充控件。

```
 $("#AUTHORs").tokenInput('/author/getauthors/', {
        hintText: "Enter surname",
        searchingText: "Searching...",
        preventDuplicates: true,
        allowCustomEntry: true,
        highlightDuplicates: false,
        tokenDelimiter: "*",
        resultsLimit: 10,
        theme: "facebook",
        prePopulate: $('#AUTHORs').data('AUTHORs')
    }); 
```

我从我的角度发布了一些代码，只是为了向您准确展示我试图绑定到模型的内容。

```
@model myModels.BOOK

@{
    ViewBag.Title = "Edit";
}

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Basic</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.TITLE)
        </div>
        <div class="editor-field" >
            @Html.EditorFor(model => model.TITLE)
            @Html.ValidationMessageFor(model => model.TITLE)
        </div>
    <div class="authors">
            <div class="editor-field">
                <input type="text" id="authors" name="authors" data-val="true"  data-val-required="You must enter at least one author" data-authors="@Json.Encode(Model.AUTHORs.Select(a => new { id = a.AUTHOR_ID, name = a.FULL_NAME }))"/>
                <span class="field-validation-valid" data-valmsg-for="authors" data-valmsg-replace="true"></span>
            </div>
        </div>
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

这是我在表单上尝试更新模型（按“保存”后）时使用的代码：

```
 [HttpPost]
        public ActionResult Edit(BOOK book)
        {
             if (ModelState.IsValid)
            {
                db.Entry(book).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Details", new { id = book.REF_ID });
            }
            ViewBag.REF_ID = new SelectList(db.REFERENCEs, "REF_ID", "REF_ID", book.REF_ID);
            return View(book);
        } 
```

* * *

当您查看 HTML 中的代码时，它已经从 tokeninput 元素中格式化了作者，看起来像这样，而且我认为这种格式似乎有一个真正的问题：

```
<input type="text" id="AUTHORs" name="AUTHORs" data-val="true" data-val-required="You must enter at least one author" data-authors="

[{&quot;id&quot;:156787,&quot;name&quot;:&quot;Faure,M.&quot;},

{&quot;id&quot;:177433,&quot;name&quot;:&quot;Wang,D.Z.&quot;},

{&quot;id&quot;:177434,&quot;name&quot;:&quot;Shu,L.Sh&quot;},

{&quot;id&quot;:177435,&quot;name&quot;:&quot;Sheng,W.Z.&quot;}]"

style="display: none; "> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T10:57:52.517

看来您正在使用[tokeninput 插件](http://loopj.com/jquery-tokeninput/)。让我们通过一个分步示例来说明如何使用 ASP.NET MVC 实现这一点：

模型：

```
public class Book
{
    public string Title { get; set; }
    public IEnumerable<Author> Authors { get; set; }
}

public class Author
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    // fake a database. Obviously that in your actual application
    // this information will be coming from a database or something
    public readonly static Dictionary<int, string> Authors = new Dictionary<int, string>
    {
        { 1, "foo" },
        { 2, "bar" },
        { 3, "baz" },
        { 4, "bazinga" },
    };

    public ActionResult Index()
    {
        // preinitialize the model with some values => obviously in your
        // real application those will be coming from a database or something
        var model = new Book
        {
            Title = "some title",
            Authors = new[] 
            {
                new Author { Id = 2, Name = "bar" }
            }
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(Book book)
    {
        return Content(string.Format("thanks for selecting authors: {0}", string.Join(" ", book.Authors.Select(x => x.Name))));
    }

    public ActionResult GetAuthors(string q)
    {
        var authors = Authors.Select(x => new
        {
            id = x.Key,
            name = x.Value
        });
        return Json(authors, JsonRequestBehavior.AllowGet);
    }
} 
```

看法：

```
@model Book
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(x => x.Title)
        @Html.EditorFor(x => x.Title)
    </div>
    <div>
        @Html.TextBoxFor(
            x => x.Authors, 
            new { 
                id = "authors", 
                data_url = Url.Action("GetAuthors", "Home"), 
                data_authors = Json.Encode(
                    Model.Authors.Select(
                        x => new { id = x.Id, name = x.Name }
                    )
                ) 
            }
        )
    </div>
    <button type="submit">OK</button>
}

<script type="text/javascript" src="@Url.Content("~/scripts/jquery.tokeninput.js")"></script>
<script type="text/javascript">
    var authors = $('#authors');
    authors.tokenInput(authors.data('url'), {
        hintText: 'Enter surname',
        searchingText: 'Searching...',
        preventDuplicates: true,
        allowCustomEntry: true,
        highlightDuplicates: false,
        tokenDelimiter: '*',
        resultsLimit: 10,
        theme: 'facebook',
        prePopulate: authors.data('authors')
    });
</script> 
```

最后一步是编写一个自定义模型绑定器，它将从 id 中检索作者：

```
public class AuthorModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var values = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        if (values != null)
        {
            // We have specified asterisk (*) as a token delimiter. So
            // the ids will be separated by *. For example "2*3*5"
            var ids = values.AttemptedValue.Split('*').Select(int.Parse);

            // Now that we have the selected ids we could fetch the corresponding
            // authors from our datasource
            var authors = HomeController.Authors.Where(x => ids.Contains(x.Key)).Select(x => new Author
            {
                Id = x.Key,
                Name = x.Value
            }).ToList();
            return authors;
        }
        return Enumerable.Empty<Author>();
    }
} 
```

将在 Application_Start 中注册：

```
ModelBinders.Binders.Add(typeof(IEnumerable<Author>), new AuthorModelBinder()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:06:16.433

我做了一个小测试-似乎这种属性文本不是错误，并且浏览器将其识别为 JSON 对象是正确的

尝试 `$("#authorlist").data("authors")`在浏览器中添加要观看的表达式（按 F12）或在控制台中执行它 - 对我来说，它返回有效的 javascript 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:54:19.273

`data-authors="@Json.Encode(Model.AUTHORs.Select(a => new { id = a.AUTHOR_ID, name = a.FULL_NAME }))`"

我认为这应该是：

```
data-authors="@Html.Raw(Json.Encode(Model.AUTHORs.Select(a => new { id = a.AUTHOR_ID, name = a.FULL_NAME })))" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T10:39:45.897

您可以使用[序列化](http://api.jquery.com/serialize/)

```
$("form").on('submit', function(event){
    event.preventDefault();
    var form = $(this);

    $.ajax({
       url: form.attr('action'),
       type: form.attr('method'),
       data: form.serialize(),
       success: function(r) { }
    });
}); 
```

# javascript - jQueryUI Sortable Change 事件在单个更改时触发多次

> ID：12510798
> 
> 赞同：1
> 
> 时间：2012-09-20T10:32:00.113
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

链接到 jsFiddle： http: [//jsfiddle.net/k8wYF/1/](http://jsfiddle.net/k8wYF/1/) （工作）

```
var count;
$("#sortable").sortable({
    start : function(){
               count = 0;
            },
    change : function(){
                 count++;                
            },
    stop : function(){
                 alert(count);          
            }
});
$("#sortable").disableSelection();​ 
```

单次更改

```
count : 1 
```

但是，我想在 sortableStart 上刷新可排序

链接到 jsFiddle： http: [//jsfiddle.net/k8wYF/](http://jsfiddle.net/k8wYF/) （不工作）

```
var count;
$("#sortable").sortable({
    start : function(){
               $("#sortable").sortable("refresh");       //refresh sortable
               count = 0;
            },
    change : function(){
                 count++;                
            },
    stop : function(){
                 alert(count);          
            }
});
$("#sortable").disableSelection();​ 
```

然后，单次更改

```
count : 16  (multiple times) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T10:46:08.533

从[**文档**](http://jqueryui.com/demos/sortable/)

**改变**

> 此事件在排序期间触发，但仅在 DOM 位置发生更改时触发。

**刷新**

> 刷新可排序的项目。自定义触发所有可排序项目的重新加载，从而识别新项目。

你所经历的是正常的。刷新时，所有项目都移动到预期的位置，改变了 DOM，因此每次都会触发 changed 事件。

如果要向更改事件添加代码，请确保它是您要在每次更改时执行的代码。

如果要添加仅在排序完成时执行的代码，请将其添加到`stop`或`update`。

**更新**

> 当用户停止排序并且 DOM 位置发生变化时触发此事件。

**停止**

> 当排序停止时触发此事件。

根据您的代码将执行的操作，请确保将其添加到适当的事件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:42:55.687

每次元素更改时似乎都会触发更改，因此列表中每个移动的 li 都会增加一个增量。我将它切换为更新并取出刷新，它似乎给出了正确的计数。

```
var count = 0;

$("#sortable").sortable({
    stop : function(){
                 alert(count);          
    },
    update : function(){
                 count++;  
    }
});

$("#sortable").disableSelection(); 
```

您也可以重新进行刷新，只是不要每次都将计数重置为 0，而且它似乎可以很好地跟踪。虽然，如果没有更多关于你想要什么的信息，我真的无能为力。

# java - SVN结帐不创建包 - java

> ID：12510803
> 
> 赞同：1
> 
> 时间：2012-09-20T10:32:20.567
> 
> 标签：java, eclipse, svn, packages

我正在尝试查看 svn 存储库。到目前为止一切顺利，结帐成功，但没有包裹。有没有办法在 Eclipse 中获得正确的软件包？

我所拥有的所有给定数据都是这样的：

```
svn co https://jensembl.svn.sourceforge.net/svnroot/jensembl jensembl 
```

此外，我将添加我想要开始工作的程序的链接。 [链接到 JEnsembl](http://jensembl.sourceforge.net/svn.html)

/edit 添加了一个指向当前项目链接的资源管理器视图的 [链接](http://oi49.tinypic.com/x6d7n.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:54:17.860

您可以作为 Maven 项目导入，我觉得这也是更好的方法

我已经通过你提到的回购。

在日食中

1.  文件--> 导入--> 从 SCM 签出 Maven 项目

选择 svn 并使用这个 url

```
http://jensembl.svn.sourceforge.net/viewvc/jensembl/trunk/ 
```

或任何包含 pom.xml 的子目录

并且看到你可以继续进行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:55:09.933

在您的硬盘上，一个包是一个普通文件夹。如果您在 Eclipse 中有项目，它必须知道哪些文件夹是源文件夹。Eclipse 会将源文件夹中的所有文件夹显示为包，并将分类识别为项目的一部分。打开项目的属性。首先，您必须转到类别`Project Facets`并启用 Java。之后，您可以转到类别并在选项卡`Java Build Path`中添加所有源文件夹。`Source`

此外，您还检查了似乎包含一些项目/模块的整个 SVN 存储库。[您想从trunk 文件夹](https://jensembl.svn.sourceforge.net/svnroot/jensembl/trunk/)中单独检出它们（或至少将它们导入 Eclipse）。我还看到您的项目是一个 Maven 项目，因此您可能想阅读有关 Maven 以及如何在 Eclipse 中签出项目的信息。这是一个简短[的操作方法](http://eureka.ykyuen.info/2009/11/19/check-out-a-maven-project-from-svn-in-eclipse/)。同样，您只需要主干文件夹。如果你想知道那是什么，你可以在[这里](https://stackoverflow.com/questions/698313/what-is-trunk-branch-and-tag-in-subversion)阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:49:00.213

您需要使用 Maven 生成 eclipse 项目文件。

见[http://maven.apache.org/guides/mini/guide-ide-eclipse.html](http://maven.apache.org/guides/mini/guide-ide-eclipse.html)

基本上：

```
$ mvn install
$ mvn -Declipse.workspace=<path-to-eclipse-workspace> eclipse:add-maven-repo
$ mvn eclipse:eclipse 
```

# c# - Windows phone 中的电子邮件验证错误

> ID：12510805
> 
> 赞同：0
> 
> 时间：2012-09-20T10:32:32.330
> 
> 标签：c#, silverlight, windows-phone, email-validation

在我的应用程序中，我正在使用电子邮件验证。我正在使用[它](http://msdn.microsoft.com/en-us/library/01escwtf%28v=vs.95%29.aspx)进行电子邮件验证。它仅检查输入的文本是否为正常的电子邮件格式。当我输入这样的电子邮件时，`example@example.comfg`它返回true。如何检查电子邮件中的此类错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:45:13.550

如果问题是您认为这`comfg`是错误的并且它应该是最多 3 个字符，就像 in 一样`com`，只需像这样更改正则表达式：

```
Regex.IsMatch(strIn, 
              @"^(?("")(""[^""]+?""@)|(([0-9a-zA-Z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-zA-Z])@))" + 
              @"(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,3}))$"); 
```

# linux - Unix管道过滤器的彩色控制台输出

> ID：12510807
> 
> 赞同：1
> 
> 时间：2012-09-20T10:32:34.553
> 
> 标签：linux, unix, colors, pipe, console-output

在检查不同软件的控制台输出和日志消息时，有时很难保持概览。使输出变得丰富多彩并突出显示当前重要的文本短语会容易得多。

是否有一个 Linux/UNIX shell 程序可以用作过滤器，通过使用 unix 管道根据预定义的模式和颜色使控制台输出丰富多彩？

p.ex. 模式定义：

```
INFO=green
WARN=yellow
ERROR=red
\d+=lightgreen 
```

突出显示消息的严重性以及数字。

用法：

```
$ chatty_software | color_filter
11:41:21.000 [green:INFO]  runtime.busevents - SensorA state updated to [lightgreen:17]
11:41:21.004 [green:INFO]  runtime.busevents - SensorB state updated to [lightgreen:20] 
```

原始输出：

```
11:41:21.000 INFO  runtime.busevents - SensorA state updated to 17
11:41:21.004 INFO  runtime.busevents - SensorB state updated to 20 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:47:48.327

我们使用 sed 脚本如下：

```
s/.* error .*/^[[31m&^[[0m/
t done
s/.* warning .*/^[[33m&^[[0m/
t done

:done 
```

并通过调用它

```
sed -f log_color.sed 
```

我想你可以做类似的事情吗？

# php - Magento 将现有评论添加到订单电子邮件

> ID：12510808
> 
> 赞同：2
> 
> 时间：2012-09-20T10:32:34.797
> 
> 标签：php, mysql, magento

我已经安装了[**iwd_onepagecheckout 扩展**](http://www.magentocommerce.com/magento-connect/iwd-free-one-page-step-checkout-6454.html)。

客户可以在他们的订单中添加评论。

现在我想将此“评论”添加到订单电子邮件中。评论将保存在 Table`sales_flat_order_status_history`中，其中包含以下列：

> entity_id、parent_id、is_customer_notified、is_visible_on_front、评论、状态、created_at、entity_name

我已经搜索了论坛，但找不到如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:32:50.037

我解决了！

在 onepagecheckout 扩展的observer.php 中：

```
public function addHistoryComment($data)
{
$comment    = Mage::getSingleton('customer/session')->getOrderCustomerComment();
$comment    = trim($comment); 
    if (!empty($comment))
    {
    $data['order']->addStatusHistoryComment($comment)->setIsVisibleOnFront(true)->setIsCustomerNotified(false);
    $order = $data->getEvent()->getOrder(); 
    $order->setCustomerComment($comment);
    $order->setCustomerNoteNotify(true);
    $order->setCustomerNote($comment);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T23:05:44.017

上面的答案是正确的。但是，它会复制管理面板中的评论。您有一次评论没有通知客户，第二次通知客户。

您需要评论或删除该行`$data['order']->addStatusHistoryComment($comment)->setIsVisibleOnFront(true)->setIsCustomerNotified(false);`，因为这会将评论添加到管理端的订单页面，但它不会通知客户。

所以最终的脚本应该是：

```
public function addHistoryComment($data)
{
    $comment    = Mage::getSingleton('customer/session')->getOrderCustomerComment();
    $comment    = trim($comment); 
    if (!empty($comment))
    {
        $order = $data->getEvent()->getOrder(); 
        $order->setCustomerComment($comment);
        $order->setCustomerNoteNotify(true);
        $order->setCustomerNote($comment);
    }
} 
```

# javascript - 如何在 MVC 3 的 HTML 表格中使用滑动切换？

> ID：12510810
> 
> 赞同：1
> 
> 时间：2012-09-20T10:32:43.423
> 
> 标签：javascript, asp.net-mvc-3

我正在开发 MVC 3 应用程序并使用剃刀语法。

在这个应用程序中，我提供评论功能。

我添加了一个局部视图，它从数据库加载评论/记录。

现在，我在 Grid/Table 的每一行中添加了 Comment 链接。当用户单击该评论链接时，它会加载包含用于添加评论的控件组的局部视图。

检查下面的屏幕。

![在此处输入图像描述](../Images/a2eeafd9ad9e038d3ac11ce8ec4d512c.png)

现在的问题是，当用户点击评论链接时，每行评论的部分视图都会打开......

请检查下面的屏幕。

![在此处输入图像描述](../Images/db36c6fa11e4bbc17049cbd643e1cd4a.png)

我只想打开用户单击的行的一个部分视图...

我该怎么办 ？

我有以下代码....

```
 @model PagedList.IPagedList <CRMEntities.Location>

@{
    ViewBag.Title = "Index";
}

<div id="LocationListPageWise">
<table>
    <tr>
        <th>
            Name
        </th>
        <th>
            Remark
        </th>
        <th>
            State
        </th>
        <th>
            Region
        </th>
        <th>
            PinCode
        </th>
        <th>
            Country
        </th>
        <th>
            City
        </th>
        <th>
            Owner
        </th>
        <th>

        </th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Remark)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.State)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Region)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PinCode)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Country)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.City)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Owner.FirstName)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })

            <span>@Ajax.ActionLink("Comments", null, null, null, new { id = item.Id, @class = "AddComments" })</span>   

            <div class="CommentBox"></div>
            <span class="CommentAdd"></span>

            <span class="LinkSeparator"></span>
        </td>
        <td>
          <span id="flagMenus">
            @Html.Action("ShowFlag", "Flagging", new { entityId=item.Id, entityType="Location"})
         </span>
        </td>
    </tr>
}

</table>
</div> 

<div class="PagingBox">
        @Html.Action("CreateLinks", "Pager", new { hasPreviousPage = Model.HasPreviousPage, hasNextPage = Model.HasNextPage, pageNumber = Model.PageNumber, pageCount = Model.PageCount })

 </div>

<div style="float:left;width:100%;margin-top:30px;">
<div style="font-weight:bold;">All location Customers with open opportunities</div>
@Html.Action("AllLocationCustomersWithOpenOpprtunity", "Customer")
</div>

 <script type="text/javascript">

     $(document).ready(function () {

         $("a.pagenumber").click(function () {

             var page = 0;
             page = parseInt($(this).attr("id"));

             $.ajax({
                 url: '@Url.Action("GetPagedLocations")',
                 data: { "page": page },
                 success: function (data) 
                 { 
                 $("#LocationListPageWise").html(data);
                 }

             });
             return false;
         });

           $(document).ready(function () {

        $('.CommentBox').hide();

        $('a.AddComments').click(function () {

            var url="@Html.Raw(Url.Action("ShowCommentBox", "Comment", new { Id = "idValue", EntityType = "Location" }))";

            url=url.replace("idValue",event.target.id);
            $('.CommentBox').load(url);

            $(this).closest('div').find('div.CommentBox').slideToggle();
            return false;
        });
     });

     });   

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:37:05.800

不要从根元素搜索您的评论框，因为您的搜索匹配所有此类元素。从点击点开始搜索，如下所示：

```
$(document).ready(function () {

        $('.CommentBox').hide();

        $('a.AddComments').click(function () {

            var url="@Html.Raw(Url.Action("ShowCommentBox", "Comment", new { Id = "idValue", EntityType = "Location" }))";

            url=url.replace("idValue",event.target.id);
            $('.CommentBox').load(url);

            $(this).closest('td').find('div.CommentBox').slideToggle();
            return false;
        });
}); 
```

# c# - 打印质量winform

> ID：12510811
> 
> 赞同：13
> 
> 时间：2012-09-20T10:32:48.977
> 
> 标签：c#, winforms, printing

尝试从 WinForms 应用程序打印时遇到 2 个问题。无论我尝试什么，第一个都是非常非常糟糕的质量。第二个是我的左上角页边距很大，winform正在切割。有任何想法吗？这是我的代码：

```
Bitmap MemoryImage;
    public void GetPrintArea(Panel pnl)
    {
        MemoryImage = new Bitmap(pnl.Width, pnl.Height);
        Rectangle rect = new Rectangle(0, 0, pnl.Width, pnl.Height);
        pnl.DrawToBitmap(MemoryImage, new Rectangle(0, 0, pnl.Width, pnl.Height));
    }
    protected override void OnPaint(PaintEventArgs e)
    {
        if (MemoryImage != null)
        {
            e.Graphics.DrawImage(MemoryImage, 0, 0);
            base.OnPaint(e);
        }
    }
    void printdoc1_PrintPage(object sender, PrintPageEventArgs e)
    {
        e.Graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
        e.Graphics.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBilinear;
        e.Graphics.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.HighQuality;
        Rectangle pagearea = e.PageBounds;
        e.Graphics.DrawImage(MemoryImage, (pagearea.Width / 2) - (this.panel1.Width / 2), this.panel1.Location.Y);

    }
    public void Print(Panel pnl)
    {
        panel1 = pnl;
        GetPrintArea(pnl);
        printPreviewDialog1.Document = printdoc1;
        printPreviewDialog1.ShowDialog();
    }
    private void button2_Click(object sender, EventArgs e)
    {
        Print(this.panel1);
    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-02T17:12:38.850

这一次又一次地出现。只是没有神奇的解决方案，尽管最终问题可能会消失。“视网膜”显示器的出现至关重要。

核心问题是显示器的分辨率比打印机差得多*。*典型的打印机具有每英寸 600 点的分辨率。这使得它能够在一张纸上打印 6600 x 5100 的单个像素。比显示器所能显示的*要*多得多，全高清显示器的最高像素为 1920 x 1080 像素。大约差 5 倍，给予或接受。

当您将显示器上显示的内容打印在一张纸上并尝试保持其大小相同时，这种方法效果不佳。不可避免的是，由于显示器上缺少像素，显示器上的每个像素都会在纸上打印为 5x5 的斑点。如果您尝试保持像素映射一对一，您*将*在纸上获得非常清晰的副本。但它已经变成了一张邮票。

不可避免地，由于这些像素斑点，打印输出看起来非常粗糙。看起来特别差的是*文本*。操作系统使用许多技巧来使文本在分辨率较差的显示器上看起来不错。抗锯齿是标准的，像 ClearType 这样的技巧旨在利用可以帮助提高感知分辨率的监视器物理特性。这在打印文本时不再起作用，那些抗锯齿像素变成斑点并变得非常明显，完全破坏了效果。对于彩色打印机上的 ClearType 文本尤其不利，现在可以清楚地看到红色和蓝色条纹。

唯一体面的方法是使用实​​际分辨率而不是显示器分辨率渲染到打印机。就像在 .NET 中使用 PrintDocument 类一样。使用报告生成器可以帮助避免为它编写代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-02T18:19:34.323

您应该在 PrintDocument 打印时获得的 Graphics 对象上绘制自己。这为您提供了所需的所有控制。汉斯·帕桑特所说的一切仍然适用于这里......请记住，这是最简单的实现，只是演示可以实现的，我并不是说这是最简单/最好/最有效的方式......我的代码不占用多个页面、包含在容器中的控件或不是 Label 和 PictureBox 类型的控件。

[我使用了来自System.Drawing.Graphics](http://msdn.microsoft.com/en-us/library/system.drawing.graphics_methods.aspx)的 Draw... 方法

稍微改编自上面的代码以使其正常工作：

```
public void GetPrintArea(Panel pnl, Graphics gr)
{
    // scale to fit on width of page...
    if (pnl.Width > 0)
    {
      gr.PageScale = gr.VisibleClipBounds.Width/pnl.Width;
    }
    // this should recurse...
    // just for demo so kept it simple
    foreach (var ctl in pnl.Controls)
    {
        // for every control type
        // come up with a way to Draw its
        // contents
        if (ctl is Label)
        {
            var lbl = (Label)ctl;
            gr.DrawString(
                lbl.Text,
                lbl.Font,
                new SolidBrush(lbl.ForeColor),
                lbl.Location.X,  // simple based on the position in the panel
                lbl.Location.Y);
        }
        if (ctl is PictureBox)
        {
            var pic = (PictureBox)ctl;
            gr.DrawImageUnscaledAndClipped(
                pic.Image,
                new Rectangle(
                    pic.Location.X,
                    pic.Location.Y,
                    pic.Width,
                    pic.Height));
        }
    }
}

void printdoc1_PrintPage(object sender, PrintPageEventArgs e)
{
    e.Graphics.SmoothingMode = Drawing2D.SmoothingMode.HighQuality;
    e.Graphics.InterpolationMode =Drawing2D.InterpolationMode.HighQualityBilinear;
    e.Graphics.PixelOffsetMode = Drawing2D.PixelOffsetMode.HighQuality;
    GetPrintArea(panel1, e.Graphics);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-08T07:36:33.510

实际上，您可以通过在“矢量”级别而不是位图级别上对它们应用缩放来打印更清晰的控件。

此快照显示了以下技术的结果（请不要介意我的 Win2000-ish UI :-)）：

![合成的](../Images/d55c3a823a39de2f207fcc8021f031e8.png)

我们所做的是以与*rene*在他的回答中显示`ControlCollection`的非常相似的方式遍历控件。

 *但是 - 此外，在我们将其位图绘制为预设大小的位图之前，我们将比例应用于控件本身的位置、大小和字体，在这种情况下，该位图大 5 倍（4 倍表示大约 300 DPI，这是*有效*的打印分辨率大多数打印机）。

这样做的原因是在打印时保持控件上的细线清晰，或者我们可以缩放位图本身，这不会给我们带来任何分辨率方面的好处。通过缩放字体，我们减少了抗锯齿效果并可以提供更好的打印质量。

为此，您可以首先在按钮的单击事件中设置以下内容：

```
//this will produce 5x "sharper" print
MemoryImage = new Bitmap((Panel1.Width * 5), (Panel1.Height * 5));

Using Graphics g = Graphics.FromImage(MemoryImage) {
    ScaleControls(Panel1, g, 5);
};

PrintPreviewDialog1.Document = printdoc1;
PrintPreviewDialog1.ShowDialog(); 
```

现在在`ScaleControls`递归函数中，我们缩放位置、大小和字体，以便在将每个控件绘制到位图之前使每个控件本身具有更高的分辨率：

```
private void ScaleControls(Control c, ref Graphics g, double s)
{
    //To detach controls for panels, groupboxes etc.
    List<Control> hold = null;

    foreach (Control ctrl in c.Controls) {
        if (ctrl is GroupBox || ctrl is Panel) {
            //backup reference to controls
            hold = new List<Control>();
            foreach (Control gctrl in ctrl.Controls) {
                hold.Add(gctrl);
            }
            ctrl.Controls.Clear();
        }

        //backup old location, size and font (see explanation)
        Point oldLoc = ctrl.Location;
        Size oldSize = ctrl.Size;
        Font oldFont = ctrl.Font;

        //calc scaled location, size and font
        ctrl.Location = new Point(ctrl.Location.X * s, ctrl.Location.Y * s);
        ctrl.Size = new Size(ctrl.Size.Width * s, ctrl.Height * s);
        ctrl.Font = new Font(ctrl.Font.FontFamily, ctrl.Font.Size * 5,
                             ctrl.Font.Style, ctrl.Font.Unit);

        //draw this scaled control to hi-res bitmap
        using (Bitmap bmp = new Bitmap(ctrl.Size.Width, ctrl.Size.Height)) {
            ctrl.DrawToBitmap(bmp, ctrl.ClientRectangle);
            g.DrawImage(bmp, ctrl.Location);
        }

        //restore control's geo
        ctrl.Location = oldLoc;
        ctrl.Size = oldSize;
        ctrl.Font = oldFont;

        //recursive for panel, groupbox and other controls
        if (ctrl is GroupBox || ctrl is Panel) {
            foreach (Control gctrl in hold) {
                ctrl.Controls.Add(gctrl);
            }

            ScaleControls(ctrl, g, s);
        }
    }
} 
```

最后在打印的事件处理程序中：

```
double scale = MemoryImage.Width / e.PageBounds.Width;

e.Graphics.DrawImage(MemoryImage, 0, 0,
          Convert.ToInt32(MemoryImage.Width / scale),
          Convert.ToInt32(MemoryImage.Height / scale)); 
```

现在，在此示例中，我们就地缩放控件。当然，这并不理想，因为在我们进行打印预览时，它们似乎过着自己的生活。

理想情况下，我们会在迭代时*克隆*每个控件，并在绘制位图后丢弃它。这也将消除备份几何图形的需要。但是对于原则的例子，我保持原样。我会把它留给你克隆等。

分离控件的原因是，如果我们不这样做（就像现在的代码一样 - 这肯定可以通过提供另一种迭代方法来改变，即预缩放克隆控件）在 f.ex 中未缩放。`GroupBox`控件将首先打印，然后缩放的控件将在迭代时显示在它们之上。这是因为我们`DrawToBitmap`在`GroupBox`缩放它的控件之前。这是我留给你处理的事情。

我们正在处理的位图不一定适合用户通过设置打印对话框最终获得的打印分辨率，但是我们可以获得更高的分辨率来使用它反过来产生比糟糕的屏幕位图更好的结果我们最初的决议。

您当然需要添加对其他控件的特殊情况的支持，而不是`Panel`可以`GroupBox`容纳其他控件、图像控件等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-06T20:11:30.350

我花了几天时间寻找一种方法来打印高质量的面板及其内容。这没有用，我尝试了其他人的代码，它们要么都是错误的，要么就是质量很差，直到我发现：

[http://rkinfopedia.blogspot.com/2008/07/printing-contents-of-panel-control.html](http://rkinfopedia.blogspot.com/2008/07/printing-contents-of-panel-control.html)

只需将事件处理程序放在打印按钮单击事件处理程序中，并将打印方法也包含在其中，如下所示：

```
private void button3_Click(object sender, EventArgs e)
{
    printdoc1.PrintPage += new PrintPageEventHandler(printdoc1_PrintPage);
    Print(panel1);
} 
```

并在 override OnPaint 方法中放置一个 if 语句，如下所示：

```
protected override void OnPaint(PaintEventArgs e)
{
    if (MemoryImage != null)
    {
        e.Graphics.DrawImage(MemoryImage, 0, 0);
        base.OnPaint(e);
    }
} 
```

休息就好了，你最终会得到近乎完美的打印质量

只是想分享这个宝石，欢迎互联网陌生人！

谢谢拉克什先生！*

# android - 使用 2 个调整大小的视图创建 Android 布局

> ID：12510814
> 
> 赞同：0
> 
> 时间：2012-09-20T10:32:58.493
> 
> 标签：android, android-layout

在我的布局中，我需要一个页眉、一个列表视图和一个带有`TextView`. `TextView`需要将大小调整为最多 5 行。想想 facebook 聊天，你有一个带有朋友名字的蓝色标题，中间的内容窗格和下面的文本框，随着你输入内容而增长：

```
[header]     a fragment that takes up about 50dp
[content]
[content]
[content]
[content]    something like a ViewGroup with a ListView in it
[content]
[content]
[content]
[footer]     a ViewGroup that contains an EditText and Buttons 
```

我尝试了各种不同的布局设置，但无法正确设置。要么页脚占据所有空间，要么内容覆盖页脚。

这是我到目前为止所拥有的：

```
<LinearLayout ...>

    <!-- Slot to put Header fragment in -->
    <FrameLayout
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <!-- Here's where the content goes. This is supposed to be a ListView
         inserted as a fragment -->
    <FrameLayout
        android:id="@+id/content"
        ... />

    <include
        android:id="@+id/footer"
        ... />

</LinearLayout> 
```

我将`layout_width`and`layout_height`值留空，因为我不知道将它们设置为什么。

**更新** 最初，我认为问题是因为 my`EditText`设置为`maxLines=5`and `TextMultiline`，但我尝试删除除一个具有硬编码高度的按钮之外的所有内容，并且插入仍然覆盖了所有内容。我也尝试过设置`<footer below="content">`，但后来`content`就被覆盖了`footer`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:09:28.723

问题是`footer`包含的布局是另一个`RelativeLayout`. `footer`布局包含 set的元素`layout_alignParentBottom="true"`，这使得页脚布局占据了整个屏幕。我不知道它为什么会那样做，但这就是发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:46:50.363

检查这个...我希望它有帮助。目前，我在 Values 文件夹中定义了一个 array.xml，其中包含一些 ListView 的空条目。您将不得不使用代码来处理它。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <TextView 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="HEADER" />    

        <ListView 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:entries="@array/chats"
            android:layout_weight="1">

        </ListView>

        <EditText 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:lines="5"
            android:inputType="textMultiLine"
            android:hint=" Please enter your Chat" />  

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:40:17.510

要创建这样的 UI，请创建一个布局

header.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

<TextView

            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="5dp"
            android:text="xyz"
            android:textSize="10dp" />
</LinearLayout> 
```

对于页脚：

页脚.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

<EditText

            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="5dp"
            android:text="xyz"
            android:textSize="10dp" />
</LinearLayout> 
```

如您所说，创建另一个包含 listView 的布局：main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="center"
android:gravity="center"
android:orientation="vertical" >
 **<include layout="@layout/header.xml" android:layout_alignParentTop="true"/>**   
<ListView
        android:id="@+id/listview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="true"
        >
    </ListView>
 **<include layout="@layout/footer.xml" android:layout_below="@+id/listview" android:layout_alignParentBottom="true"/>**   
</RelativeLayout> 
```

# jar - jar 中的 log4j 配置被另一个已经使用 log4j 的应用程序使用

> ID：12510819
> 
> 赞同：1
> 
> 时间：2012-09-20T10:33:10.770
> 
> 标签：jar, log4j, propertyconfigurator

我的问题是我正在尝试设置 log4j 以从我的 jar 登录到文件。此 jar 由已使用 log4j 的应用程序使用。我的 jar 是作为 log4j 附带的 maven 包制作的。我正在尝试从属性文件初始化 log4j，如下所示：

“log4j.properties”

```
log4j.appender.FileAppender=org.apache.log4j.RollingFileAppender
log4j.appender.FileAppender.File=${user.home}/.myproject/myproject.log
log4j.appender.FileAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.FileAppender.layout.ConversionPattern=%d{yy-MM-dd HH:MM:ss,SSS} [%t] %-5p     %c %x - %m%n
log4j.appender.FileAppender.MaxFileSize=5MB

#myproject is full package name

log4j.logger.myproject=,FileAppender 
```

我已将此属性文件包含在我的 jar 资源中。我正在用代码加载它：

```
try {

            InputStream inputStream = this.getClass().getClassLoader()
                    .getResourceAsStream("log4j.properties");
            Properties properties = new Properties();
            properties.load(inputStream);
            inputStream.close();
            PropertyConfigurator.configure(properties);

        } catch (NullPointerException e) {
            BasicConfigurator.configure();
            throw new MyprojectException("log4j.properties not found", e);
        } catch (IOException e) {
            throw new MyprojectException("log4j.properties could not be loaded", e);
        } 
```

当使用 log4j 的应用程序不使用我的 jar 时，此代码可以完美运行。但它是，我得到一个空的日志文件，或者在某些应用程序的某些情况下，根本没有创建日志文件。

我尝试手动添加附加程序，而不是像这样使用 propertyconfigurator：

```
static org.apache.log4j.Logger logger = org.apache.log4j.Logger.getLogger(Myproject.class); 
SimpleLayout layout = new SimpleLayout();    
FileAppender appender = new FileAppender(layout,"C:/out.log",true); 

logger.addAppender(appender);
logger.setLevel(Level.DEBUG); 
```

这似乎工作正常，但我真的想从属性文件配置 log4j。

我已经阅读了很多关于 log4j 如何处理多个实例的线程。我发现一旦由一个应用程序完成，我就无法更改属性加载的 log4j 配置。有些人建议我将发布我自己的 log4j jar 和配置并使用 propertyconfigurator 进行配置，这就是我尝试过的，你可以看到它没有用。我很好奇为什么我的第二个例子有效而第一个无效。我怎么解决这个问题？

注意：
我不想更改使用我的 jar 文件的应用程序的 log4jconfigs。我还发现可以使用 -Dlog4j.configuration 系统属性，但是我的 jar 不是可执行的 jar 文件，它由 Class.forName 加载

任何帮助表示赞赏，

提前致谢

# c# - 明确指定字符串转换中的文化

> ID：12510822
> 
> 赞同：8
> 
> 时间：2012-09-20T10:33:28.123
> 
> 标签：c#, c#-4.0, resharper

我有一个循环，我在其中调用`ToString()`int 变量`i`。

```
for (int i = 1; i <= n; i++)
{
    @Html.ActionLink(@i.ToString(), "Index")
} 
```

Resharper 告诉我，我应该：

> 明确指定字符串转换中的文化。

为什么是这样？

有多少种方法可以将 int 转换为字符串？

我本来以为只有1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T10:39:52.753

有不同的符号分组方法，例如 1000；1 000 和 1 000。此外，不同国家的数字使用不同的数字 [中文数字](http://en.wikipedia.org/wiki/Chinese_numerals)

您可以在控制面板 -> 区域和语言 -> 格式 -> 附加设置 -> 标准数字中看到不同的数字。（赢 7）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:19:08.617

通常，始终明确指定是要使用当前文化还是要处理的数据是文化不变的，这是一个很好的做法。问题是，如果您处理的数据仅由您的软件处理，而不以任何方式呈现给用户（例如数据库标识符），那么如果不同机器上的数据不同，您可能会遇到问题。

例如，数据库标识符可能在具有某种文化的机器上被序列化，而在具有不同文化的机器上被反序列化，在这种情况下它可能会有所不同！如果您明确指定您正在处理的字符串是文化不变的，那么无论机器上设置了什么文化，它都将始终相同。

您可以在 MSDN 代码分析文档中阅读有关此主题的更多信息：

[CA1305：指定 IFormatProvider](http://msdn.microsoft.com/en-us/library/ms182190.aspx)

# php - 在 PHP 的 create_function() 代码中嵌入数组

> ID：12510825
> 
> 赞同：1
> 
> 时间：2012-09-20T10:33:38.030
> 
> 标签：php, arrays, syntax, eval, create-function

为了在 的代码中传递一个数组`create_function()`，将其传递给参数是可行的，

```
$array = array('a', 'b', 'c');

$func = create_function('$arr', '
            foreach($arr as $var) echo "$var<br />";
        ');

$func($array); 
```

但我想直接在代码中嵌入一个数组，就像`eval()`功能一样。像这样，

```
$array = array('a', 'b', 'c');
eval( 'foreach($array as $var) echo "$var<br />";'); 
```

但是，这不起作用。

```
$array = array('a', 'b', 'c');

$func = create_function('', '
            foreach(' . $array . ' as $var) echo "$var<br />";
        ');

$func(); 
```

那么我该怎么做呢？感谢您的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:37:37.337

如果您坚持使用 create_function 而不是[lambda 函数](http://docs.php.net/manual/en/functions.anonymous.php)

```
$func = create_function('', '
  foreach(' . var_export($array, true) . ' as $var) echo "$var<br />";
'); 
```

您需要 php 解析器的数组的（有效）字符串表示形式。[var_export](http://docs.php.net/var_export)提供了这一点。
但[Berry Langerak 的答案](https://stackoverflow.com/a/12510882/4833)是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:37:14.053

当使用 PHP >= 5.3 时，您可以使用匿名函数来代替 create_function。匿名函数可以“使用”外部范围的变量。

```
<?php
$array = array('a', 'b', 'c');

$func = function( ) use( $array ) {
    foreach( $array as $value ) {
        echo $value;
    }
};

$func( ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:37:55.097

使用闭包：

```
$function = function($array){

    foreach($array as $var){

        // do your stuff

    }

};

$function($yourArray); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T10:38:55.657

我仅出于教育目的发布此内容（这是非常糟糕的做法）：

```
<?php

$array = array('a', 'b', 'c');

$func = create_function('', '
            global $array;
            foreach($array as $var) echo "$var<br />";
        ');

$func(); 
```

为什么这么惨？

*   全局变量
*   创建函数的丑陋方式

如果您的 PHP 版本至少为 5.3，则使用 lambda 函数。见@Berry Langerak 回答

# c# - 带有标量结果的 LINQ 是否会触发延迟加载

> ID：12510826
> 
> 赞同：7
> 
> 时间：2012-09-20T10:33:38.727
> 
> 标签：c#, .net, linq, entity-framework, lazy-loading

我阅读了团队的[加载相关实体](http://msdn.microsoft.com/en-US/data/jj574232)帖子，`Entity Framework`对最后一段感到有些困惑：

> 有时，知道有多少实体与数据库中的另一个实体相关而不实际产生加载所有这些实体的成本是很有用的。可以使用带有 LINQ Count 方法的 Query 方法来执行此操作。例如：

```
using (var context = new BloggingContext())
{
    var blog = context.Blogs.Find(1);

    // Count how many posts the blog has 
    var postCount = context.Entry(blog)
                          .Collection(b => b.Posts)
                          .Query()
                          .Count();
} 
```

为什么这里需要`Query`+`Count`方法？
我们不能简单地使用 LINQ 的`COUNT`方法吗？

```
var blog = context.Blogs.Find(1);
var postCount = blog.Posts.Count(); 
```

这会触发延迟加载并且所有集合都将被加载到内存中，然后我会得到我想要的标量值吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T10:42:38.120

您将在机器人案例中获得所需的标量值。但是考虑一下正在发生的事情的不同。

随着`.Query().Count()`您在表单的数据库上运行查询`SELECT COUNT(*) FROM Posts`并将该值分配给您的整数变量。

使用`.Posts.Count`，您可以在数据库上运行（类似的东西）`SELECT * FROM Posts`（已经贵得多）。然后，在枚举集合以查找您的计数时，结果的每一行逐个字段映射到您的 C# 对象类型。通过以这种方式请求计数，您将强制加载所有数据，以便 C# 可以计算有多少。

希望很明显，向数据库询问行数（实际上不返回所有这些行）效率更高！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T12:38:56.443

第一种方法没有加载所有行，因为该`Count`方法是从 an 调用的，`IQueryable`但第二种方法是加载所有行，因为它是从 an 调用的`ICollection`。

我做了一些测试来验证它。我用 Table1 和 Table2 对其进行了测试，其中 Table1 具有 PK“Id”，而 Table2 具有 FK“Id1”（1：N）。[我从这里http://efprof.com/](http://efprof.com/)使用了 EF 分析器。

第一种方法：

```
var t1 = context.Table1.Find(1);

var count1 = context.Entry(t1)
                        .Collection(t => t.Table2)
                        .Query()
                        .Count(); 
```

否`Select * From Table2`：

```
SELECT TOP (2) [Extent1].[Id] AS [Id]
FROM   [dbo].[Table1] AS [Extent1]
WHERE  [Extent1].[Id] = 1 /* @p0 */

SELECT [GroupBy1].[A1] AS [C1]
FROM   (SELECT COUNT(1) AS [A1]
        FROM   [dbo].[Table2] AS [Extent1]
        WHERE  [Extent1].[Id1] = 1 /* @EntityKeyValue1 */) AS [GroupBy1] 
```

第二种方法：

```
var t1 = context.Table1.Find(1);
var count2 = t1.Table2.Count(); 
```

表2被加载到内存中：

```
SELECT TOP (2) [Extent1].[Id] AS [Id]
FROM   [dbo].[Table1] AS [Extent1]
WHERE  [Extent1].[Id] = 1 /* @p0 */

SELECT [Extent1].[Id]  AS [Id],
       [Extent1].[Id1] AS [Id1]
FROM   [dbo].[Table2] AS [Extent1]
WHERE  [Extent1].[Id1] = 1 /* @EntityKeyValue1 */ 
```

为什么会这样？

的结果`Collection(t => t.Table2)`是一个实现`ICollection`但它没有加载所有行并且有一个名为 的属性的类`IsLoaded`。该`Query`方法的结果是一个`IQueryable`，这允许`Count`在不预加载行的情况下调用。

的结果`t1.Table2`是一个`ICollection`，它正在加载所有行以获取计数。顺便说一句，即使您只使用`t1.Table2`而不询问计数，行也会加载到内存中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:15:32.030

第一个解决方案不会触发延迟加载，因为它很可能永远不会直接访问集合属性。该`Collection`方法接受`Expression`，而不仅仅是委托。它仅用于获取属性的名称，然后用于访问映射信息和构建正确的查询。

即使它会访问集合属性，它也可以使用与 EF 的其他内部部分（例如验证）相同的策略，即在访问导航属性之前暂时关闭延迟加载以避免意外的延迟加载。

顺便提一句。与构建查询需要访问导航属性的 ObjectContext API 相比，这是一个巨大的改进，因此它可能会触发延迟加载。

这两种方法之间还有一个区别：

*   第一个总是对数据库执行查询并返回数据库中的项目数
*   第二个只对数据库执行一次查询以加载所有项目，然后返回应用程序中的项目计数而不检查数据库中的状态

作为第三个非常有趣的选项，您可以使用额外的加载。[Arthur Vickers 的实现](http://blog.oneunicorn.com/2011/03/28/extra-lazy-collection-count-with-ef-4-1-part-1/)展示了如何使用导航属性从数据库中获取计数，而无需延迟加载项目。

# c - 这个来自 K 和 R 的例子是如何工作的

> ID：12510827
> 
> 赞同：1
> 
> 时间：2012-09-20T10:33:38.073
> 
> 标签：c

> **可能重复：**
> [“while(*s++ = *t++)”是如何工作的？](https://stackoverflow.com/questions/810129/how-does-whiles-t-work)

我试图理解以下示例。我有点困惑这实际上是如何工作的。

```
void strcpy(char *s, char *t)
{
while (*s++ = *t++)
;
} 
```

任何帮助都很棒。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:35:50.143

请记住，C 中的*字符串*只是指向字符列表的指针，以 . 结尾`\0`。

还要记住`\0`（空字节）是*falsy*，也就是说，如果它处于某个条件中，那么该条件将为 false。

此函数获取指向源字符串开头的指针和指向目标字符串开头的指针。

然后循环遍历源字符串中的每个字符，将字符复制到目标字符串。评估条件时，后增量`++`将使指针前移一个字节。

据我所知，这个实现也有一个问题。如果源字符串的长度不完全相同，则末尾不会有空终止符。为了安全起见，您应该`\0`在目标字符串的末尾添加 a。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:38:17.900

的值`*s++ = *t++`是赋值右侧的值，`*t`。所以循环将在*t 为0 时终止，即在t 指向的字符串的末尾。在将 指向的字符分配给 指向的字符之后，该条件还会增加`t`(and ) 的值。循环体中没有任何内容，条件本身进行复制。`s``t``s`

# linux - 识别 Linux 上正在运行的 syslog 守护程序的最佳方法是什么？

> ID：12510829
> 
> 赞同：5
> 
> 时间：2012-09-20T10:33:41.353
> 
> 标签：linux, bash, shell, sh, csh

我正在编写 Linux shell 脚本（sh、bash 或 csh）来识别正在运行的 syslog 守护进程。最好的方法是什么？由于我只考虑基于 RHEL 和 rpm 的分发，因此可以忽略 Debian 及其衍生产品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:58:28.890

据我所知，*syslog-ng*和*rsyslog*（默认）是 RHEL 上唯一可用的。您可以探测进程空间，查看当前哪个进程保持`/var/log/syslog`打开状态，或者简单地检查安装了哪个 syslog 守护程序（不过，可以同时安装它们）。

```
$ lsof /var/log/messages /var/log/syslog 2>&1 | grep syslog
$ rpm -q rsyslog syslog-ng
$ pgrep -u root syslog | xargs ps -p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:48:26.743

可以解析 lsof 的输出以查看哪些进程打开了 /var/log/syslog 文件，一个非常粗略的示例是：

```
sudo lsof | grep /var/log/syslog | cut -f1 -d' ' 
```

如果您使用的是单一发行版，则可能有更优雅的检查方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T07:45:43.397

在基于 debian 的系统上，运行以下脚本以查看已安装的内容：

```
dpkg-query -l '*syslog*' | grep ii 
```

这将为您提供类似于以下内容的输出

```
ii  rsyslog  7.4.4-1ubuntu2.3  i386  reliable system and kernel logging daemon 
```

这样你就不必 grep 文件等。希望它可以帮助你。

# node.js - NodeJS的标准输出刷新？

> ID：12510835
> 
> 赞同：44
> 
> 时间：2012-09-20T10:34:13.430
> 
> 标签：node.js

nodejs 是否有任何标准输出刷新，就像 python 或其他语言一样？

```
sys.stdout.write('some data')

sys.stdout.flush() 
```

现在我只看到`process.stdout.write()`了nodejs。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-20T10:40:35.413

`process.stdout`是一个`WritableStream`对象，并且该方法会`WritableStream.write()`自动刷新流（除非它被明确地塞住）。但是，如果刷新成功，它将返回 true，如果内核缓冲区已满且无法写入，则返回 false。如果你需要连续写几次，你应该处理`drain`事件。

请[参阅`write`](https://nodejs.org/api/stream.html#stream_writable_write_chunk_encoding_callback).

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-20T23:33:47.583

在较新的 NodeJS 版本中，您可以将回调传递给`.write()`，一旦刷新数据就会调用该回调：

```
sys.stdout.write('some data', () => {
  console.log('The data has been flushed');
}); 
```

`.write()`这与检查结果并注册到`drain`事件完全相同：

```
let write = sys.stdout.write('some data');
if (!write) {
  sys.stdout.once('drain', () => {
    console.log('The data has been flushed');
  });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T10:40:16.367

`true`如果数据已被刷新，则[write](http://nodejs.org/api/stream.html#stream_stream_write_string_encoding_fd)返回。如果它返回`false`，您可以等待 'drain' 事件。

我认为没有`flush`，因为那将是一个阻塞操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-23T09:15:41.910

还有另一个功能`stdout`可以清除终端的最后输出，这有点像`flush`

```
function flush() {
    process.stdout.clearLine();
    process.stdout.cursorTo(0);
}

var total = 5000;
var current = 0;
var percent = 0;
var waitingTime = 500;
setInterval(function() {
    current += waitingTime;
    percent = Math.floor((current / total) * 100);
    flush();
    process.stdout.write(`downloading ... ${percent}%`);
    if (current >= total) {
        console.log("\nDone.");
        clearInterval(this);
    }
}, waitingTime); 
```

`cursorTo`将光标移动到`0`作为起点的位置

使用`flush`之前的功能，`stdout.write`因为它会清除屏幕，如果你把你不会看到任何输出

# ruby-on-rails - 如何捕获浏览按钮的文件名？

> ID：12510839
> 
> 赞同：0
> 
> 时间：2012-09-20T10:34:25.300
> 
> 标签：ruby-on-rails, ruby, file-upload

我是 ROR 的新手。我想在选择带有扩展名的文件后捕获浏览按钮的文件名。我想将文件名存储到数据库的 File_name 列中。请帮我这样做。是否可以获得存储在 File_name 列中的文件的完整路径而不仅仅是文件名？请建议我这样做。我不想上传文件。只是我想要一个文件名来存储。

```
View(New)
--------------
<div class="pro-data-imports">
  <%= form_for @pro_data_import do %>

  <div class="field">
    Browse the file to upload:<br />
    <%= file_field_tag :File_name %>
  </div>

  <div class="actions">
    <%= submit_tag 'Import File' %>
  </div>
<% end %>
</div>

Controller
----------

class Pro::DataImportsController < ApplicationController
  before_filter :authenticate_user!
  layout "layouts/enr/energy_master"

  def index
    @pro_data_imports = Pro::DataImport.all
  end

  def new
    @pro_data_import = Pro::DataImport.new
    @pro_data_import.updated_by = current_user
  end

  def create
    @pro_data_import = Pro::DataImport.new(params[:pro_data_import])
    @pro_data_import.updated_by = current_user

  end 
end

Model
-------
I have File_name, File_validate, :updated_by Columns 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:55:01.010

我不知道你那是什么意思。在您提到的评论中，您想知道如何使用两个参数调用存储过程。如果您的数据库是 SQL，请尝试以下操作并根据您的规范更改您的字段名称。

在您的模型中，创建一个方法

```
def update
  parameters = [self.File_Name, File_Location]
  parameters.map!{|p| ActiveRecord::Base.connection.quote p}
  sql = "your store procedure name"(#{parameters.join(',')})"
  ActiveRecord::Base.connection.execute(sql)
end 
```

在您的控制器中，

在您的 create 方法中，调用 update 方法。

```
def create
  @update = Pro::DataImport.new(params[:pro_data_import])
  @pro_data_import.updated_by = current_user
  @update.update
  .........
  ...
end 
```

我希望它会有所帮助。这只是一个可以效仿的例子。不要复制和粘贴.. :)

# razor - 为什么我不能在 App_Code 文件夹中的剃刀助手视图文件中使用 Html.RenderPartial？

> ID：12510840
> 
> 赞同：8
> 
> 时间：2012-09-20T10:34:33.500
> 
> 标签：razor, html-helper, renderpartial, app-code

App_Code 文件夹中的简单 Razor 助手：

MyHelper.cshtml

```
@using System.Web.Mvc

@helper SimpleHelper(string inputFor){
    <span>@inputFor</span>
    Html.RenderPartial("Partial");
} 
```

视图/共享文件夹中的简单视图：

我的视图.cshtml

```
<html>
    <head

    </head>
    <body>
        @WFRazorHelper.SimpleHelper("test")
    </body>
</html> 
```

视图/共享文件夹中的简单局部视图：

部分.cshtml

```
<h1>Me is Partial</h1> 
```

编译器抛出错误：

> CS1061: 'System.Web.WebPages.Html.HtmlHelper' enthält keine Definition für 'RenderPartial', und es konnte keine Erweiterungsmethode 'RenderPartial' gefunden werden, die ein erstes Argument vom Typ 'System.Web.WebPages.Html.HtmlHelper' akzeptiert （Fehlt eine Using-Direktive oder ein Assemblyverweis？）。

但是，如果我在 MyView.cshtml 中调用 Html.RenderPartial 一切正常。

我想我必须更改一些 web.configs，因为 MyView 中的 HtmlHelper 取自 System.Web.Mvc，而 MyHelper.cshtml 中的 HtmlHelper 取自 System.Web.WebPages。

我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T10:37:16.137

`Html`是 WebPage 的一个属性，因此您只能在视图内部访问它。App_Code 文件夹中的自定义助手无权访问它。

所以`HtmlHelper`如果你需要在里面使用它，你需要传递 as 参数：

```
@using System.Web.Mvc.Html

@helper SimpleHelper(System.Web.Mvc.HtmlHelper html, string inputFor)
{
    <span>@inputFor</span>
    html.RenderPartial("Partial");
} 
```

然后通过从视图中传递 HtmlHelper 实例来调用自定义助手：

```
<html>
    <head>

    </head>
    <body>
        @WFRazorHelper.SimpleHelper(Html, "test")
    </body>
</html> 
```

# java - 用eclipse升级软件后出错

> ID：12510842
> 
> 赞同：1
> 
> 时间：2012-09-20T10:34:36.063
> 
> 标签：java, eclipse, ubuntu

我最近更新了 eclipse (3.7) 的一些插件。为此，我使用 sudo 启动了 eclipse（因为不这样做会导致早期安装新软件时出现一些错误）。现在，当我在不使用 sudo 的情况下启动 eclipse 时，在启动画面出现之前，我立即收到一个错误：

```
!ENTRY org.eclipse.equinox.launcher 4 0 2012-09-20 12:27:48.447
!MESSAGE Exception launching the Eclipse Platform:
!STACK
java.lang.ClassNotFoundException: org.eclipse.core.runtime.adaptor.EclipseStarter
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:619)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

当我使用“sudo eclipse”启动 eclipse 时，我没有收到此错误。有关如何解决此问题的任何建议？我正在使用 Ubuntu 11.04。

干杯内布维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:18:35.703

当您“sudo”时，您可能已经更改了文件的所有权，因此您无法再像您一样阅读它们。在命令窗口 cd 中安装并键入：

```
ls -al 
```

如果所有者是 root，那么您需要将其改回给您。要做到这一点，你真的需要了解你的团队。它可能是您的用户名、单词“staff”、“user”等。要确定，只需在您的主目录中执行相同的 ls 命令即可。如果您需要更改所有者，请键入：

```
sudo chown -R yourUserName.yourUserGroup  * 
```

在某些 unix 系统上，它是“yourUserName:yourUserGroup”。然后尝试日食。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:45:09.883

一个疯狂的猜测。这可能是权限问题。

您是否以 sudo 的身份授予文件夹权限。请右键单击并查看文件的属性`org.eclipse.core.runtime.adaptor.EclipseStarter`

并赋予读取和执行权限并尝试。希望这可能会有所帮助。

# spring - Mule 3.3 TCP 自定义协议和 Spring 注入 @Autowired 不起作用

> ID：12510843
> 
> 赞同：1
> 
> 时间：2012-09-20T10:34:41.587
> 
> 标签：spring, mule

当我使用自定义 tcp 协议时，我在 Mule 中遇到问题，并且在自定义协议内部有一个使用 @Autowired 注释的弹簧依赖注入。

自定义协议.java

```
public class ContentLengthProtocol extends AbstractByteProtocol{
  @Autowired
  private Adapter adapter;

  @Lookup("atm-inbound")
  private ImmutableEndpoint inboundEndpoint;

  public ContentLengthProtocol(){
      super(true);
  }

  public Object read(InputStream is) throws IOException{
    // do some reading
  }
} 
```

骡子配置片段

```
<spring:beans>
    <spring:bean id="adapter" class="id.company.dao.Adapter"/>
    <spring:bean id="contentLengthProtocol" class="id.company.protocol.ContentLengthProtocol"/>
</spring:beans>
<tcp:connector name="TCPConnector" validateConnections="true" sendBufferSize="0" receiveBufferSize="1024" receiveBacklog="50" reuseAddress="true" keepAlive="true" clientSoTimeout="0" serverSoTimeout="0" socketSoLinger="0" doc:name="TCPConnector">
    <tcp:custom-protocol ref="contentLengthProtocol"/>
</tcp:connector>
<tcp:endpoint name="tcp-inbound" address="tcp://localhost:1234" connector-ref="TCPConnector" doc:name="TCP"/>
<flow name="AdapterFlow" doc:name="AdapterFlow">
    <tcp:inbound-endpoint ref="tcp-inbound" doc:name="Inbound TCP"/>
    <echo-component doc:name="Echo"/>
</flow> 
```

当在 ContentLengthProtocol 上流读取输入和处理读取方法时，适配器始终为 null。但奇怪的是，如果我只定义 ContentLengthProtocol bean，但没有将 TCP 连接器内的 bean 引用为自定义协议，那么 spring 注入照常工作并且适配器不为空。

有人可以告诉我这里发生的事情吗？任何帮助都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:51:11.880

Mule 和 Spring 注释之间可能存在注入冲突。[根据 doc](http://www.mulesoft.org/documentation/display/MULE3USER/Lookup+Annotation)，我认为 using`@Inject`也无济于事。

所以最好进行常规的 Spring 注入：

```
<spring:bean id="contentLengthProtocol"
             class="id.company.protocol.ContentLengthProtocol"
             p:adapter-ref="adapter"
             p:inboundEndpoint-ref="atm-inbound" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:34:46.773

我发现了改变过程的确切问题`@Autowired`。有一些细节我没有告知，Adapter 类实际上是一个拥有MyBatis 映射器的服务。具体来说，MyBatis 映射器是使用 spring-mybatis 集成配置的`org.mybatis.spring.mapper.MapperScannerConfigurer`。此类（bean）扫描某些要代理的包。不知何故，如果我将此 bean 与 spring bean 和 mule 结合使用，@Autowired 不起作用，即使`<property>`用于手动注入对象`ContentLengthProtocol`也无法正常工作（注入了 Adapter bean，但不是 Adapter bean 中的 MyBatis 映射器类） . 作为一种解决方法，我设法使用古老而乏味的方式使其工作，即`org.mybatis.spring.mapper.MapperFactoryBean`bean。基本上，必须为我拥有的每个映射器声明这个 bean。

# windows - 适用于 Windows 的 Node.js x86 和 x64 安装程序有什么区别？

> ID：12510844
> 
> 赞同：11
> 
> 时间：2012-09-20T10:34:43.687
> 
> 标签：windows, node.js

他们都将 node.exe 安装到 C:\Program Files **(x86)** ...所以我想知道实际的区别是什么。我知道有一些是因为`node-sqlserver`模块在我们的机器上失败了，而且对于 x86 和 x64 版本的 Node.js，它以不同的方式失败。

有人可以为我解释一下区别吗？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-21T00:14:53.690

x64 安装程序安装 64 位版本的节点，它是针对 64 位版本的 V8 编译的。node-sqlserver 包是一个原生模块，这意味着它需要针对匹配的 node 版本进行编译。IE：如果您使用预编译的 32 位版本的模块来对抗 64 位版本的节点，它将失败。

除了 32 位和 64 位应用程序之间的典型差异（更大的地址空间，地址使用 8 字节而不是 4 字节）之外，节点在两个版本之间没有区别。

# vba - 将两个数字转换为范围

> ID：12510845
> 
> 赞同：-1
> 
> 时间：2012-09-20T10:34:44.147
> 
> 标签：vba, excel

我将创建一个宏来将两个数字转换为一个范围，例如

在 excel 单元格`A1`和`A2`上，我分别输入整数`1`和`5`。输出将如下所示：

```
A3 1
A4 2
A5 3
A6 4
A7 5 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:18:36.907

您甚至可以在不使用宏的情况下完成此操作:)

1.  输入`A3`您的第一个数字。
2.  在`Home`选项卡上转到`Editing`部分 > `Fill`>`Series...` ![在此处输入图像描述](../Images/adc354e519098b0848a57b004f9ea9f3.png)
3.  选择将您的系列填充到`Columns`. 选择 20（或其他）的停止值 ![在此处输入图像描述](../Images/b14f7802ea4d134aee2fe055e3245450.png)
4.  点击确定

现在您将有一系列数字 1-20 从 Cell 开始向下`A3`。

您可以更改步长值，使每个数字增加 1、2 或 3 或其他值。您还可以填写行而不是列。

如果您需要它比这*更*自动化，只需在录制宏时执行所有这些操作并查看它的作用，然后更改 VBA 以满足您更具体的需求/返回此处提供一些代码以获得建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:03:10.343

下面的代码将从 A1 和 A2 读取内容。根据范围，它将仅在 A 系列中显示结果。

```
enter code here

For i = Cells(1, 1) To Cells(1, 2)
 Cells(1, i + 2) = i
Next i 
```

# xcode - 自动@property 合成不适用于 NSManagedObject 子类

> ID：12510849
> 
> 赞同：25
> 
> 时间：2012-09-20T10:34:56.743
> 
> 标签：xcode, properties, ios6, synthesize

昨晚更新到适用于 iOS6 的 Xcode 4.5 的最新版本后，我收到这样的警告和错误

> 属性 'mapAnnotation' 需要定义方法 'mapAnnotation' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

因为缺少@synthesize 语句，如果我使用它们，甚至会出现关于未知 iVar 的错误。

问题是，我认为自从上一次 Xcode 更新到 4.5 后，我认为没有必要编写这些 @synthesize 语句，它与 Mountain Lion 一起出现，并且在我昨晚更新 Xcode 之前，我所有的项目都在没有它们的情况下工作（我已经删除了当时我的文件中有一大堆@synthesize 语句）它甚至还在发行说明中：

> • Objective-C @synthesize 命令在使用属性时默认生成。

所以我很困惑，我是否错过了一个新的项目设置来打开自动@synthesize 生成？

但是当我创建一个新项目并尝试它时它甚至都不起作用

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-22T14:33:51.773

我遇到了同样的问题并找到了原因和解决方案。

如果您查看 iOS 6 SDK 中 NSManagedObject 的头文件，您会看到“NS_REQUIRES_PROPERTY_DEFINITIONS”，它强制类为属性指定@dynamic 或@synthesize。

（您可以在 iOS 5.1 和 iOS 6.0 之间的 API 差异中看到 NS_REQUIRES_PROPERTY_DEFINITIONS。）

这是因为编译器必须知道您是否希望属性是动态的或综合的，尤其是在 NSManagedObject 类的子类的实现中。

I could solve this problem simply by adding the @synthesize lines explicitly for the properties other than @dynamic in NSManagedObject subclasses.

# c# - c#中的十六进制数运算

> ID：12510852
> 
> 赞同：1
> 
> 时间：2012-09-20T10:35:15.830
> 
> 标签：c#, visual-studio-2010, binary, hex

我正在用 C# 制作一个应用程序，并且我有十六进制数字，例如`0x0FF8,0xFFFA`等。

在这里，我只想`12 bit`从右到左。假设我有一个数字`0x0FF8`。所以我只想对 进行操作`FF8.(12 bits)`，这是有符号的数字。

它是十进制数`-8`。在我的应用程序中，我必须首先确定数字是否为负？在那之后它的价值。

我没有得到如何在 C# 中有效地做到这一点，因为我必须非常快地做到这一点。数字表示`0x0FF8= -8`请参见链接[http://www.swarthmore.edu/NatSci/echeeve1/Ref/BinaryMath/NumSys.html](http://www.swarthmore.edu/NatSci/echeeve1/Ref/BinaryMath/NumSys.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T10:38:33.453

嗯，

要得到正确的 12 位，只有你能做到，

```
var right12 = 0x0FFF & yourNumber; 
```

要找出它是消极的还是积极的，

```
var positive = yourNumber >= 0;
var absoluteValue = Math.Abs(yourNumber); // Assuming yourNumber is Int32
var low12 = 0xFFF & absoluteValue; 
```

* * *

这对您要保留的 12 位执行[按位和针对位掩码。](http://msdn.microsoft.com/en-us/library/sbf85k1c%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T00:50:15.267

要检查有符号整数值是否为负，您必须检查其最左边的位。如果设置了该位，则值为负。

但是，您只有 12 位，而 int 有 32 位。因此，当您将 12 位放入 int 时，20 位将重置为零（也称为未设置）。所以最左边的位（#31）没有设置，int 值不被视为负值。

如果设置了第 11 位，则必须检查第 11 位并设置其他 20 位：

```
int Value = 0x0FF8;

// Check bit #11
if ((Value & 0x0800) != 0)
{
    // Set the 20 other bits to make the int value a negative one
    Value |= 0xFFFFF000;
} 
```

您也可以使用 short 而不是 int 来做同样的事情。一个短的只有 16 位，所以：

```
short Value = 0x0FF8;

// Check bit #11
if ((Value & 0x0800) != 0)
{
    // Set the 4 other bits to make the short value a negative one
    Value |= 0xF000;
} 
```

int 版本可能是避免代码强制转换的最佳版本。

# python - 标准输入从管道循环过程中读取 python

> ID：12510855
> 
> 赞同：3
> 
> 时间：2012-09-20T10:35:22.983
> 
> 标签：python, background-process

如何在 python 中生成或打开一个子进程并实时处理其输出？子进程根据其他系统事件随机打印输出。

这个“例子”挂起：

`$./print.sh | ./echo.py`挂起。

## `print.sh`

```
#!/bin/bash

while [ 1 ]; do
echo 'A'
sleep 1
done 
```

## `echo.py`

```
#!/usr/bin/python
import sys

for line in sys.stdin:
  print line 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:49:05.330

它不挂。`echo`/shell 决定，因为它正在写入管道，它将以块缓冲而不是行缓冲模式执行 I/O。如果您等待足够长的时间，或者`sleep 1`从 shell 脚本中删除 ，您会看到来自的输出`A`确实通过了。

有两种可能的解决方案：

1.  修改子进程的程序，以便在写入足够多的输出供 Python 程序处理时刷新其缓冲区。
2.  使用伪终端 (PTY) 而不是管道。[`pexpect`](http://www.noah.org/wiki/pexpect)这样做，对您隐藏了大部分复杂性。不过，它不是 的替代品`subprocess`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:37:46.207

检查此编码片段是否有效。

猫 ech.sh

```
#!/bin/bash

while [ 1 ]; do
echo -n 'A'
sleep 1
done 
```

cat in_read.py

```
#!/usr/bin/python
import sys
import os

while True:
  print os.read(0,1) 
```

# javafx-2 - TitledPane - 事件

> ID：12510858
> 
> 赞同：2
> 
> 时间：2012-09-20T10:35:38.123
> 
> 标签：javafx-2

我有两个不同的组件：表格旁边的 TableView 和 TitledPane。我要做的是重新调整表格视图的尺寸，但仅在标题窗格展开或折叠时。当 titledpane 折叠时，tableview 会变大，而当它展开时，tableview 会变小。我不知道我应该采取什么行动。有人知道解决方案吗？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:26:40.140

查看下面的示例代码：

```
import javafx.application.Application;
import javafx.beans.property.SimpleStringProperty;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.scene.Scene;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.TitledPane;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.layout.HBox;
import javafx.scene.text.Text;
import javafx.stage.Stage;

public class MyDemo extends Application {

    private TableView<Person> tableview = new TableView<Person>();

    // Suppose your preferred height values for those 2 component are as follows:
    private double TABLE_MIN_HEIGHT = 30.0;
    private double TABLE_MAX_HEIGHT = 500.0;
    private double TITLED_PANE_HEIGHT; // will be determined

    private final ObservableList<Person> data =
            FXCollections.observableArrayList(
            new Person("Jacob", "Smith", "jacob.smith@example.com"),
            new Person("Isabella", "Johnson", "isabella.johnson@example.com"),
            new Person("Ethan", "Williams", "ethan.williams@example.com"),
            new Person("Emma", "Jones", "emma.jones@example.com"),
            new Person("Michael", "Brown", "michael.brown@example.com"));

    public static void main(String[] args) {
        Application.launch(args);
    }

    @Override
    public void start(Stage stage) {
        TableColumn firstNameCol = new TableColumn("First Name");
        firstNameCol.setMinWidth(100);
        firstNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("firstName"));

        TableColumn lastNameCol = new TableColumn("Last Name");
        lastNameCol.setMinWidth(100);
        lastNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("lastName"));

        TableColumn emailCol = new TableColumn("Email");
        emailCol.setMinWidth(200);
        emailCol.setCellValueFactory(new PropertyValueFactory<Person, String>("email"));

        tableview.setItems(data);
        tableview.getColumns().addAll(firstNameCol, lastNameCol, emailCol);

        final TitledPane titledPane = new TitledPane("TitledPane", new Text("Content\n\n\n\n"));
        titledPane.setAnimated(false); // we need to temporarily disable
        // animation to get the titledpanes computed height correctly.

        // Force to min height of table view
        tableview.setMaxHeight(TABLE_MIN_HEIGHT);
        tableview.setMinHeight(TABLE_MIN_HEIGHT);

        // Here you have 2 options
        int option = 2;

        if (option == 1) {
            // 1st simply force the table view height to its preferred max value
            // when the titled pane's expanded property changed:
            titledPane.expandedProperty().addListener(new ChangeListener<Boolean>() {
                @Override
                public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
                    tableview.setMaxHeight(newValue ? TABLE_MIN_HEIGHT : TABLE_MAX_HEIGHT);
                    tableview.setMinHeight(newValue ? TABLE_MIN_HEIGHT : TABLE_MAX_HEIGHT);
                }
            });
        } else if (option == 2) {
            // 2nd. Similar to first but with "animation". Here observe height changes of titled pane:
            titledPane.heightProperty().addListener(new ChangeListener<Number>() {
                @Override
                public void changed(ObservableValue<? extends Number> observable, Number oldValue, Number newValue) {
                    tableview.setMaxHeight(TABLE_MAX_HEIGHT - (TABLE_MAX_HEIGHT * (newValue.doubleValue() / TITLED_PANE_HEIGHT)));
                    tableview.setMinHeight(TABLE_MAX_HEIGHT - (TABLE_MAX_HEIGHT * (newValue.doubleValue() / TITLED_PANE_HEIGHT)));
                }
            });
        }

        HBox hBox = new HBox(10);
        hBox.getChildren().addAll(tableview, titledPane);

        Scene scene = new Scene(hBox);
        stage.setTitle("Table View Sample");
        stage.setWidth(650);
        stage.setHeight(700);
        stage.setScene(scene);

        TITLED_PANE_HEIGHT = titledPane.getHeight();
        System.out.println("TITLED_PANE_HEIGHT = " + TITLED_PANE_HEIGHT);

        stage.show();

        // Determine the titledPane computed height value after stage has been shown.
        TITLED_PANE_HEIGHT = titledPane.getHeight();
        System.out.println("TITLED_PANE_HEIGHT = " + TITLED_PANE_HEIGHT);
        // .. then enable animation
        titledPane.setAnimated(true);
    }

    public static class Person {

        private final SimpleStringProperty firstName;
        private final SimpleStringProperty lastName;
        private final SimpleStringProperty email;

        private Person(String fName, String lName, String email) {
            this.firstName = new SimpleStringProperty(fName);
            this.lastName = new SimpleStringProperty(lName);
            this.email = new SimpleStringProperty(email);
        }

        public String getFirstName() {
            return firstName.get();
        }

        public void setFirstName(String fName) {
            firstName.set(fName);
        }

        public String getLastName() {
            return lastName.get();
        }

        public void setLastName(String fName) {
            lastName.set(fName);
        }

        public String getEmail() {
            return email.get();
        }

        public void setEmail(String fName) {
            email.set(fName);
        }
    }
} 
```

它是演示，根据您的需要进行改进。也许还有其他方法。HTH。

# php - 排序时间数组并保持唯一值

> ID：12510859
> 
> 赞同：1
> 
> 时间：2012-09-20T10:35:41.773
> 
> 标签：php, arrays

我有一个 $times 数组，其中包含：

```
 array(8) {
  [0]=>
  string(5) "10:00"
  [1]=>
  string(5) "13:00"
  [2]=>
  string(5) "10:00"
  [3]=>
  string(5) "11:00"
  [4]=>
  string(5) "12:00"
  [5]=>
  string(5) "13:00"
  [6]=>
  string(5) "14:00"
  [7]=>
  string(5) "15:00"
} 
```

我如何 a) 对其进行排序，使其以最低值开始 b) 每次只有一个条目？（没有重复，目前有两个 10:00 和 13:00 等）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T10:39:07.663

为什么不直接使用 PHP 的内置函数：

```
$input = array_unique($input);
sort($input);
print_r($input); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:39:21.470

好吧，您总是可以对数组使用 php 提供的标准函数：

[数组唯一](http://www.w3schools.com/php/func_array_unique.asp)

和[排序（）](http://www.w3schools.com/php/func_array_sort.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T10:39:42.620

```
$array = array_unique(sort($a)); 
```

# java - 在不更改默认打印机的情况下打印 word 文档

> ID：12510863
> 
> 赞同：4
> 
> 时间：2012-09-20T10:35:52.953
> 
> 标签：java, printing, awt, rtf

我必须在不更改默认打印机的情况下打印使用 MS Office Word 创建的 RTF 文档。我找到了 Jacob 的代码，但它使用了更改默认打印机的“ActivePrinter”。

如何在不更改默认打印机的情况下打印word文档？

# entity-framework-4 - EF 代码先 DropCreateDatabaseIfModelChanges 部署

> ID：12510864
> 
> 赞同：0
> 
> 时间：2012-09-20T10:35:59.997
> 
> 标签：entity-framework-4, ef-code-first, code-first

EF Code first DropCreateDatabaseIfModelChanges 是一个非常适合开发的功能，但如果我想将我的应用程序分发给客户怎么办？

未来可能会对数据库设计进行更改。

使用 ClickOnce 部署代码优先应用程序的最佳方法是什么？

我使用的数据库是 SQLSERVER CE 或 SQLITE。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:46:30.903

当部署应用程序以在具有自己数据库的用户 PC 上运行时，升级数据库很有用，而不是仅仅炸毁它并重新启动（这对我们的开发人员来说更容易）。

幸运的是，EF 提供了一种称为迁移的升级机制。见[http://msdn.microsoft.com/en-US/data/jj591621](http://msdn.microsoft.com/en-US/data/jj591621)

这在 EF 4.3+ 中可用

# javascript - javascript：在点击事件被调度之前执行代码

> ID：12510867
> 
> 赞同：1
> 
> 时间：2012-09-20T10:36:17.480
> 
> 标签：javascript, jquery-mobile, backbone.js

我正在使用 jQuery Mobile +backbone.js 来构建一个单页应用程序。

Backbone.js 用于处理路由和模板（实际上是 underscore.js 处理的），jQuery mobile 用于提供样式，并支持一些移动事件（pageshow、pagebeforeshow 等）

该应用程序完全离线工作，旨在用于平板电脑移动设备。(安卓 2.3+)

当我单击一个元素时，我使用backbone.js 路由器来获取所涉及的资源（例如/product/:id 意味着我必须显示有关具有指定id 的产品的数据）我从localStorage 获取数据（以前保存过），过滤数据，将其发送到模板以生成 html，并修改 DOM 以更新视图。

当应用程序在移动设备中运行时，在单击元素和实际反映新状态的页面之间会有一小段延迟。这不是一个可怕的问题，但我需要向用户提供一些反馈，所以我试图在用户单击某些元素时显示“页面加载”指示器，然后再更改视图状态。就在我撞墙的时候...

**问题** 如果我为所涉及的“单击”元素注册事件处理程序，则页面加载永远不会显示，因为在完成事件处理程序代码后，单击处理程序的默认操作发生并且视图不会重绘。使用 setTimeout 也无济于事，因为在这种情况下，计算开始并在完成后显示指标，即当页面实际上处于新状态时，因此指标要么甚至不显示，要么只是在之前短暂显示被解雇。

我已经尝试了几乎所有我能想到的解决方案：

*   在 click/mousedown/tapdown 事件中显示指示器 -> 试过这个，但由于某种原因，有时不会触发 click 事件

路由工作正常，但是，当我添加这样的代码时：

```
 $(document).bind('click', function(element) {
    $.mobile.showPageLoadingMsg();
  }); 
```

然后它开始删除点击事件：显示加载指示器，但路由甚至发生。如果我不使用该代码，一切正常。

*   使用“fastclick”代码（https://github.com/cargomedia/jquery.touchToClick）拦截点击事件并显示指标，然后手动触发元素中的点击事件：同样，有时手动触发的点击事件只是没有出现:(

有任何想法吗？我肯定错过了什么 ：（

# ios - TBXML 不更新文件

> ID：12510868
> 
> 赞同：1
> 
> 时间：2012-09-20T10:36:20.323
> 
> 标签：ios, xml, updates, tbxml

我使用 TBXML 从网上下载一个 .xml 文件。我正确地解析了文件，我得到了我想要的所有数据。

我的问题是我更新了服务器上的文件，但它没有在应用程序中更新。它仅在我删除并重新安装该应用程序时才更新文件。

是否有某种缓存或其他东西？

这就是我订购 fetch 的方式：

```
-(void)getXML {

    NSLog(@"Updating ATC data !");

    // Create a success block to be called when the async request completes
    TBXMLSuccessBlock successBlock = ^(TBXML *tbxmlDocument) {

        // If TBXML found a root node, process element and iterate all children
        if (tbxmlDocument.rootXMLElement)
            [self traverseElement:tbxmlDocument.rootXMLElement];
    };

    // Create a failure block that gets called if something goes wrong
    TBXMLFailureBlock failureBlock = ^(TBXML *tbxmlDocument, NSError * error) {
        NSLog(@"Error! %@ %@", [error localizedDescription], [error userInfo]);
    };

    // Initialize TBXML with the URL of an XML doc. TBXML asynchronously loads and parses the file.
    TBXML *tbxml = [[TBXML alloc] initWithURL: [NSURL URLWithString:@"http://www.mysite.com/myFile.xml"] 
                                      success: successBlock 
                                      failure: failureBlock];

} 
```

这就是我在后台调用它的方式：

```
[self performSelectorInBackground:@selector(getXML) withObject:Nil]; 
```

由于 TBXML 是异步工作的，因此在后台调用它可能没有用，如果有人可以确认我会将它拿走。另外，我认为我的`traverseElement:`方法的代码在这里没有用，因为文件被正确解析。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:38:21.213

似乎问题消失了。它工作正常，但我不知道为什么它一开始就不起作用。

# jquery - 使用 F5 刷新页面时页面布局中断

> ID：12510869
> 
> 赞同：9
> 
> 时间：2012-09-20T10:36:22.627
> 
> 标签：jquery, asp.net, ajax, vb.net

我`jQuery Wookmark`在我的网站上使用...一切正常...但是当我刷新页面时，页面布局会中断....为什么？

**正确布局**

![在此处输入图像描述](../Images/445bd9c77f2d2a5a85263b8849d5de1b.png)

**使用页面刷新后布局错误`F5`**

![在此处输入图像描述](../Images/8c2ac6f50494e5e9aec98068c2a1b0e7.png)

为什么会这样？？页面重新加载后会发生这种情况......知道为什么吗？

**JS**

```
 <script type="text/javascript" src="js/jquery.wookmark.js"></script>

    <!-- Once the page is loaded, initalize the plug-in. -->

    <script type="text/javascript">
        var handler = null;
        var pageIndex = 1;
        var pageCount;
        var isLoading = false;
        var apiURL = 'Haggler.asmx/GetCategories'

        // Prepare layout options.
        var options = {
            autoResize: true, // This will auto-update the layout when the browser window is resized.
            container: $('#tiles'), // Optional, used for some extra CSS styling
            offset: 17, // Optional, the distance between grid items
            itemWidth: 190 // Optional, the width of a grid item
        };

        /**
        * When scrolled all the way to the bottom, add more tiles.
        */
        function onScroll(event) {
            // Only check when we're not still waiting for data.
            if (!isLoading) {
                // Check if we're within 100 pixels of the bottom edge of the broser window.
                var closeToBottom = ($(window).scrollTop() + $(window).height() > $(document).height() - 100);
                if (closeToBottom) {
                    loadData();
                }
            }
        };

        /**
        * Refreshes the layout.
        */
        function applyLayout() {
            // Clear our previous layout handler.
            if (handler) handler.wookmarkClear();

            // Create a new layout handler.
            handler = $('#tiles li');
            handler.wookmark(options);
        };

        /*
        * Loads data from the API.
        */
        function loadData() {
            isLoading = true;

            if (pageIndex == 1 || pageIndex <= pageCount) {
                $('#loaderCircle').show();

                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: apiURL,
                    dataType: 'json',
                    data: '{pageIndex:' + pageIndex + '}', // Page parameter to make sure we load new data
                    success: function(data) {
                        //alert("SSS");
                        isLoading = false;
                        $('#loaderCircle').hide();

                        // Increment page index for future calls.
                        pageIndex++;

                        // Create HTML for the images.
                        var html = '';
                        pageCount = data.d[1].PageCount;
                        var i = 0, length = data.d.length, image;
                        //alert(JSON.stringify(data.d));
                        //                      image = data.d[1];
                        //                      alert(image.height);
                        for (; i < length; i++) {

                            image = data.d[i];
                            //alert(image.height);
                            html += '<li class="polaroid"><div class="optionbg"></div><div class="optionback"><span>' + data.d[i].NodeName + '</span></div><div class="options"><span class="favs">14</span><span class="fav">like it!</span></div><a href="http://www.google.co.in"><img src="' + image.image + '" width="180" height="' + Math.round(image.height / image.width * 180) + '"></a></li>';

                        }
                        // Add image HTML to the page.
                        $('#tiles').append(html);

                        // Apply layout.
                        applyLayout();
                    },
                    error: function(result) {
                        //alert(JSON.stringify(result));
                    }
                });

            }

        };

        /**
        * Receives data from the API, creates HTML for images and updates the layout
        */

        $(document).ready(new function() {
            // Capture scroll event.
            $(document).bind('scroll', onScroll);

            // Load first data from the API.
            loadData();
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:08:59.870

把你的代码包装在里面

```
$(document).ready(function () {
//your code
} 
```

每次重新加载页面时，它都会调用您的代码。希望能帮助到你。

# javascript - WinJS加载本地json文件

> ID：12510870
> 
> 赞同：5
> 
> 时间：2012-09-20T10:36:24.610
> 
> 标签：javascript, json, file, windows-8, winjs

我正在用头撞这个。

我找不到从 WinJS 应用程序中的子文件夹打开简单 json 文件的方法。

我试过 Ajax 和 WinJS.xhr，都无济于事。

我还研究过使用.NET中的File.Open之类的“老式”方式打开文件，但除了WinJS.Application.local.readText之外我找不到任何东西，我尝试了绝对和相对小路。

我已经走到尽头了，有人可以分享一个工作片段吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T12:55:23.517

您可以使用以下形式的 URL 引用应用程序包中的文件：

```
ms-appx:///data/data.json 
```

（注意有三个`/`字符——如果你错过了第三个字符，你会遇到问题）

要读取和解析包含 JSON 对象的文件，您可以使用`Windows.Storage`命名空间中的对象。共有三个步骤 - 获取指向文件的 StorageFile 对象，读取文件的内容，然后解析 JSON 数据。这是我用来执行此操作的代码：

```
var url = new Windows.Foundation.Uri("ms-appx:///data/data.json");
Windows.Storage.StorageFile.getFileFromApplicationUriAsync(url).then(function (file) {
    Windows.Storage.FileIO.readTextAsync(file).then(function (text) {
        var parsedObject = JSON.parse(text);
        // do something with object
    });
}); 
```

从文件中读取数据的方法有很多，但我发现`FileIO`对象最方便。上面的代码假定文件中有一个 JSON 对象描述。如果您有一个每行包含一个对象的文件，那么您将需要这个：

```
var url = new Windows.Foundation.Uri("ms-appx:///data/data.json");
Windows.Storage.StorageFile.getFileFromApplicationUriAsync(url).then(function (file) {
    Windows.Storage.FileIO.readLinesAsync(file).then(function (lines) {
        lines.forEach(function (line) {
            var parsedObject = JSON.parse(line);
            // do something with object
        });
    });
}); 
```

这是一个细微的变化，它使用该`FileIO.readLinesAsync`方法创建一个字符串数组，每个字符串都被解析为一个 JSON 对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T12:09:40.937

如果数据是您项目的一部分，并且您已将项目类型标记为内容，则

```
WinJS.xhr({ url: "data/mydata.txt" }).then(...) 
```

为我工作。在此示例中假设 mydata.txt 位于项目中名为 data 的文件夹中

# php - 在php中的两个站点之间传输数据

> ID：12510872
> 
> 赞同：0
> 
> 时间：2012-09-20T10:36:28.493
> 
> 标签：php, data-transfer

我想使用 PHP 在两个站点之间传输变量中的一些数据。在我的 Javascript 中，当一个按钮单击时，它会转到一个保存图像的 php 文件，然后我想重定向到其他站点并将图像名称发送给它。我在变量中有图像名称，我想发送它。

那么我怎样才能在 PHP 中安全地做到这一点呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:43:14.363

有很多方法可以做这样的事情。

*   如果您认为有必要，您的第一个 PHP 应用程序可以通过 SSL 并使用额外的加密连接到第二个站点本身，并将路径发送到图像。然后，第二个 PHP 应用程序可以解密并存储图像路径。
*   您可以加密图像路径并将其作为查询字符串的一部分用于重定向到第二个站点。然后第二个站点可以解密它。
*   第一个 PHP 应用程序可以将图像路径存储在两个站点共享的数据库表中 - 然后第二个站点读取路径。

两个站点都在同一台服务器上吗？他们共享一个数据库吗？您为什么要担心安全性——您是希望用户不知道图像路径还是担心其他人在窥探？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:44:14.587

在 PHP 中发送 HTTP 重定向并使用 get 变量在 get 变量中传递图像名称

`header("Location: http://otherwebsite.com/foo?img_path=pathtoimage");`

# javascript - 使用 javascript 解析 XML 文件时出现问题（限制结果）

> ID：12510873
> 
> 赞同：2
> 
> 时间：2012-09-20T10:36:29.693
> 
> 标签：javascript, xml, parsing, limit

我在底部列出了从 XML 文件解析信息并正确运行的脚本。如果我想显示最大限制结果（例如 5），我无法做到。我认为“切片”功能是我需要的。在简单的文本数组（“Mango”、“Banana”、“Kiwi”、“Peach”）中使用相同的函数没有问题。有什么建议吗？提前致谢。

```
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET","cd_catalog.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 
x=xmlDoc.getElementsByTagName("CD");

function displayCDInfo(i)
{
  artist=(x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue);
  title=(x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue);
  year=(x[i].getElementsByTagName("YEAR")[0].childNodes[0].nodeValue);
  country=(x[i].getElementsByTagName("COUNTRY")[0].childNodes[0].nodeValue);
  company=(x[i].getElementsByTagName("COMPANY")[0].childNodes[0].nodeValue);
  price=(x[i].getElementsByTagName("PRICE")[0].childNodes[0].nodeValue);
  txt="Artist: "+artist+"<br />Title: "+title+"<br />Year: "+year+"<br />Country: "+country+"<br />Company: "+company+"<br />Price: "+price  ;
  document.getElementById("showCD").innerHTML=txt;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:58:57.563

目前尚不清楚您真正想要什么，但我认为您在某处调用此函数，而您的 var x 是一个数组。尝试这个 。

```
for(var i=0;i<5;i++){
    displayCDInfo(i)
    } 
```

# c - 如何检查目录是否存在？

> ID：12510874
> 
> 赞同：74
> 
> 时间：2012-09-20T10:36:38.537
> 
> 标签：c, linux, directory

如何在 C 中检查 Linux 上是否存在目录？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-09-20T10:38:31.520

您可以使用[`opendir()`](http://linux.die.net/man/3/opendir)并检查是否`ENOENT == errno`失败：

```
#include <dirent.h>
#include <errno.h>

DIR* dir = opendir("mydir");
if (dir) {
    /* Directory exists. */
    closedir(dir);
} else if (ENOENT == errno) {
    /* Directory does not exist. */
} else {
    /* opendir() failed for some other reason. */
} 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2014-07-03T02:44:45.227

使用以下代码检查文件夹是否存在。它适用于 Windows 和 Linux 平台。

```
#include <stdio.h>
#include <sys/stat.h>

int main(int argc, char* argv[])
{
    const char* folder;
    //folder = "C:\\Users\\SaMaN\\Desktop\\Ppln";
    folder = "/tmp";
    struct stat sb;

    if (stat(folder, &sb) == 0 && S_ISDIR(sb.st_mode)) {
        printf("YES\n");
    } else {
        printf("NO\n");
    }
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-20T10:44:13.567

您可以使用`stat()`并将 a 的地址传递给它`struct stat`，然后检查其成员`st_mode`是否已`S_IFDIR`设置。

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>

...

char d[] = "mydir";

struct stat s = {0};

if (!stat(d, &s))
  printf("'%s' is %sa directory.\n", d, (s.st_mode & S_IFDIR)  : "" ? "not ");
  // (s.st_mode & S_IFDIR) can be replaced with S_ISDIR(s.st_mode)
else
  perror("stat()"); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-09-20T10:38:23.767

最好的方法可能是尝试打开它，`[opendir()](http://linux.die.net/man/3/opendir)`例如使用。

请注意，最好尝试*使用*文件系统资源，并处理由于它不存在而发生的任何错误，而不是先检查然后再尝试。后一种方法存在明显的竞争条件。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-15T22:45:24.180

根据[man(2)stat](http://linux.die.net/man/2/stat)您可以在 st_mode 字段上使用 S_ISDIR 宏：

```
bool isdir = S_ISDIR(st.st_mode); 
```

旁注，如果您的软件可以在其他操作系统上运行，我建议使用 Boost 和/或 Qt4 来简化跨平台支持。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-07-03T03:33:16.163

您还可以`access`结合使用`opendir`来确定目录是否存在，以及，如果名称存在，但不是目录。例如：

```
#include <sys/stat.h>
#include <dirent.h>
#include <unistd.h>

/* test that dir exists (1 success, -1 does not exist, -2 not dir) */
int
xis_dir (const char *d)
{
    DIR *dirptr;

    if (access ( d, F_OK ) != -1 ) {
        // file exists
        if ((dirptr = opendir (d)) != NULL) {
            closedir (dirptr); /* d exists and is a directory */
        } else {
            return -2; /* d exists but is not a directory */
        }
    } else {
        return -1;     /* d does not exist */
    }

    return 1;
} 
```

# c# - ListBoxItems 引起的 Xaml 解析异常

> ID：12510878
> 
> 赞同：0
> 
> 时间：2012-09-20T10:37:04.513
> 
> 标签：c#, xaml, xamlparseexception

基本上，这是 XAML 的一部分，它使解析器抛出 XamlParseException：

```
<StackPanel Orientation="Horizontal" Margin="0,0,0,17">
  <Rectangle Name="settingsRectYourCity" Height="100" Width="100" 
             Fill="{StaticResource PhoneAccentBrush}" Margin="12,0,9,0" 
             MouseLeftButtonUp="settingsRectYourCity_MouseLeftButtonUp" />
  <StackPanel Width="311">
    <TextBlock Text="Your city" TextWrapping="Wrap"
                 Style="{StaticResource PhoneTextExtraLargeStyle}"/>
    <TextBlock Text="Two" TextWrapping="Wrap" Margin="12,-6,12,0" 
               Style="{StaticResource PhoneTextSubtleStyle}"/>
    <ListBox Name="settingsCityListbox" Visibility="Collapsed" 
             HorizontalAlignment="Center" FontSize="36" Margin="0,10,0,20"
             SelectionMode="Single">
      <ListBoxItem>One</ListBoxItem>
      <ListBoxItem>Two</ListBoxItem>
      <ListBoxItem>Three</ListBoxItem>
    </ListBox>
  </StackPanel>
</StackPanel> 
```

更具体地说，当我删除 ListBox 内容时，所有 ListBoxItems 都没有例外。我究竟做错了什么？

**编辑：** 我采用了一种解决方法（或上述唯一良好的构造）。我在每个 TextBlock 中关闭了 ListBoxItems 的纯文本。我仍然不知道并且很好奇原因，但解析器不允许纯文本存在。也许是为 WP7 解析 xaml 的问题。

# iphone - iphone5 和其他 iphone 的 6 个不同的故事板

> ID：12510881
> 
> 赞同：3
> 
> 时间：2012-09-20T10:37:06.237
> 
> 标签：iphone, uistoryboard, iphone-5

我一直在为 iOs5 开发应用程序。既然新 iPhone 就在这里（使用 iOs 6），我在模拟器（iPhone 4 - 英寸视网膜）中运行了该应用程序，并且大部分视图都无法正确显示......最好的行动方案是什么？是否可以为 4 英寸显示器创建另一个故事板？或者设置支柱和弹簧会自动调整视图以更好地适应新显示器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:05:23.447

在我自己测试之后，看起来支柱和弹簧将在很大程度上解决这个问题。但是，如果您以编程方式创建视图，则很可能必须在放置静态宽度和高度时进行一些更改。我遇到了一个这样的实例，我`UIWebViews`被填充在 a 中`UiScrollView`并且它没有填满屏幕，因为我将高度静态设置为 323。这是调整的内容：

> CGRect 矩形 = webView.frame;
> rect.size.height = myScrollView.bounds.size.height; （这曾经是 323）
> rect.size.width = myScrollView.bounds.size.width;

这能够修复高度设置，因为`myScrollview`它被设置为填充整个显示器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:42:24.877

您应该在尺寸检查器中为我们的视图设置弹簧或支柱，以便它们根据场景正确调整大小。画布右下角有一个按钮，用于拉伸或压缩 iPhone 5 和 iPhone 5 之前尺寸之间的所有顶级全屏视图。您可以使用它来验证您的弹簧和支柱是否设置正确。

如果您的最低部署目标是 iOS 6.0+，您可以使用自动布局而不是 springs 和 struts。这将使您对界面大小的调整方式进行更精细的控制。

# php - 代码组织

> ID：12510887
> 
> 赞同：0
> 
> 时间：2012-09-20T10:37:44.160
> 
> 标签：php

到目前为止，根据我的经验，在登录脚本中，我必须意识到登录表单应该与验证功能/代码在同一个脚本中。

我的意思是表单的表单操作和验证将在同一个脚本中。但是当用户也检查了“记住我”选项时呢？

您认为应该将用户重定向到不同的页面（会员页面）吗？

或者，在一页中？我的意思是第一个场景中的一页，第二个场景中的两页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:45:30.973

在登录脚本中对表单进行编码被认为是不好的做法。考虑设计师和开发人员一起重新设计网站的场景。他们不能同时处理同一个文件。您应该将代码（业务逻辑）与演示文稿（html）分开。您应该有一个脚本 php，它在单独的文件中处理身份验证过程和 html 表单。

关于“记住我”功能，如果用户已使用登录表单登录，并勾选了“记住我”复选框，则下次访问该站点时，应自动进行身份验证并重定向到会员页面

# java - 通过 JSCh 将密码传递给 shell 脚本

> ID：12510888
> 
> 赞同：2
> 
> 时间：2012-09-20T10:37:44.320
> 
> 标签：java, ssh, jsch

我想登录到远程机器并执行一个 shell 脚本。该脚本将在运行时提示输入用户 ID 和密码。

JSch可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:10:21.087

这里有很多点需要考虑：

*   要连接到服务器，您将使用 JSch 会话，然后使用`exec`通道（即[ChannelExec](http://epaul.github.com/jsch-documentation/simple.javadoc/index.html?com/jcraft/jsch/ChannelExec.html)），将脚本名称作为命令。

*   然后脚本将尝试读取密码。您必须在通道的输出流上传递它，该输出流连接到脚本的输入流。

*   该脚本可能会尝试不从标准输入读取，而是从终端读取。如果是这样，您需要启用“伪终端”，使用方法`setPty(true)`，甚至可能使用其他方法设置终端类型。当然，这也取决于支持它的 SSH 服务器，但是如果您可以使用其他 SSH 程序来执行此操作，它应该可以工作。

# android - libgdx box2d 背景图片

> ID：12510889
> 
> 赞同：1
> 
> 时间：2012-09-20T10:37:46.100
> 
> 标签：android, box2d, libgdx

我需要在我的 libgdx 游戏中应用一些纹理。其中包括空气曲棍球桌的背景图像。它是 800x480 像素。我像这样加载它：

```
backgroundTexture = new Texture(Gdx.files.internal("images/background.png")); 
```

我的 box2d 世界每米分频器为 100。

当我在渲染方法中这样做时，我得到了我需要的东西：

```
debugRenderer.batch.begin();
debugRenderer.batch.draw(backgroundTexture, 0, 0);
debugRenderer.batch.end();
debugRenderer.render(world, camera.combined); 
// camera with viewport 8.0x4.8 - 100 times smaller
// than actual window 
```

问题是，在那之后，身体开始以 100 倍的速度移动。我究竟做错了什么？

**更新：**
我使用的是 VirtualBox 和 Android x86。事实证明，它没有硬件 OpenGL 支持，所以当我应用纹理时，渲染速度下降到 2-3 FPS。现在我正在使用带有 x86 系统映像、KVM 和 GPU 加速的模拟器，所以感觉就像真正的设备。
问题是物理世界的更新速度比渲染速度快。

# playframework-2.0 - 在启动时设置类列表属性的目的是什么？

> ID：12510892
> 
> 赞同：0
> 
> 时间：2012-09-20T10:37:56.863
> 
> 标签：playframework-2.0, playorm

在启动时设置类列表属性的目的是什么？查看代码，它似乎用于检查是否需要重新扫描。是什么原因？

如果这个列表是强制性的，看起来是因为我们几乎在所有地方都在执行未经检查的 list.get(0)，为什么不在启动时进行强制性检查。也许当我了解列表的用途时，我将能够实际输入一些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:55:10.487

您永远不需要使用重新扫描。这主要是针对像playframework这样的框架。在 playframework 中，您永远不会重新启动服务器的原因是它会重新编译您的类并将它们放入“新”类加载器中，这意味着如果这些新重新加载的类没有“重新扫描”，您的控制器将会遇到问题。此重新扫描方法仅适用于 playframework 中的开发模式。实际上，rescan 可能不应该在 api 中，而应该被移到 impl 中。现在它由 NoSql 使用，它在 playframework 中用于获取 EntityManager，就像 NoSql.em();

NoSql.java 中的以下代码使用了 rescan(注意：如果 newClass == testClass is testing 是某个实体 Car.class == Car.class 的测试，如果两个 Car.class 不相等，我们知道playframework 重新加载了它的类，我们需要重新扫描那些新的类）......他们为休眠做同样的事情，因为他们也必须重新扫描休眠实体。

```
@SuppressWarnings("rawtypes")
private static void testForRescan() {
    List<Class> classesToScan = playCallback.getClassesToScan();
    Class newClass = classesToScan.get(0);
    if(newClass == testClass)
        return;

    //otherwise, we need a rescan of all the new classes
    ClassLoader cl = playCallback.getClassLoader();
    factory.rescan(classesToScan, cl);
    testClass = newClass;
} 
```

在我们开发 playframework 插件之前，如果您使用 playframework，您需要实现 PlayCallback 接口（应该重命名为 WebFrameworkCallback）

```
private static class OurPlayCallback implements PlayCallback {
    @Override
    public List<Class> getClassesToScan() {
        return Play.classloader.getAnnotatedClasses(NoSqlEntity.class);
    }

    @Override
    public ClassLoader getClassLoader() {
        return Play.classloader;
    }

    @Override
    public Object getCurrentRequest() {
        return Http.Request.current.get();
    }
} 
```

所以基本上，直到我们做了一个playframework插件，在启动时，你可以用上面的实现初始化playOrm，然后调用它来初始化NoSql.java类（只在启动时调用一次！！！！！！）

```
 NoSql.initialize(new OurPlayCallback(), db, builder); 
```

# xcode - 如何获取 JSON 字符串中的 BYTE 值？

> ID：12510900
> 
> 赞同：0
> 
> 时间：2012-09-20T10:38:24.393
> 
> 标签：xcode, nsdictionary

我从 JSON 获取数据时遇到问题。

我从服务器获取 JSON 数据并将其更改为 NSDictionary，因此我可以访问该值。

这是字典数据。

```
{
"msgData" : [     49     ]
} 
```

49 是 ASCII 码，所以我可以得到“1”，但我不知道如何将值转换为“1”。

我试过这个但没有用。

```
 short a;
 NSMutableData * data = [[NSMutableData alloc]init];
 data = [dictionary objectForKey:@"msgData"];
 [data appendBytes:&a length:sizeof(short)];
 [data getBytes:&a];
 NSLog(@"msgData : %d",a); 
```

有谁知道我错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:14:26.833

这可能会有所帮助

```
 NSArray *numbersArray = [dictionary objectForKey:@"msgData"];
    For (NSNumber *number in numbersArray) {
      NSString *string = [NSString stringWithFormat:@"%c", [number intValue];
      NSLog(@"%@", string);
    } 
```

# android - android中的高效gps服务

> ID：12510902
> 
> 赞同：3
> 
> 时间：2012-09-20T10:38:26.960
> 
> 标签：android, android-service, android-location

我在这里搜索了构建在后台服务中运行的有效位置搜索的想法。我找到了这个链接[节能 GPS 跟踪](https://stackoverflow.com/questions/10920904/energy-efficient-gps-tracking)，但这不是我想要的。我正在寻找一个简单的解决方案，以米为单位检查距离，然后知道用户是靠近还是远离目标位置，然后节省电池寿命。我不希望时间维度在该算法中仅对距离有效。

注意：我拥有所有正确的权限。这是我的代码（在服务中运行）：

```
public class LocationService extends Service{

    private static final int SLEEP = 250;
    private static final int VIBRATE = 500;

    private double targetLat;
    private double targetLng;
    private LocationManager manager;
    private boolean alarm;
    private String ring;
    private Uri soundUri;
    private long [] pattern;        
    private float minDistance;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @SuppressWarnings("static-access")
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(this);
        targetLat = Double.parseDouble(settings.getString("lat", "0"));
        targetLng = Double.parseDouble(settings.getString("lng", "0"));
        targetLat = targetLat / 1E6;
        targetLng = targetLng / 1E6;
        alarm = settings.getBoolean("alarm", true);
        ring = settings.getString("ringDet", "");
        if(ring != ""){
            soundUri = Uri.parse(ring);         
        }

        manager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        manager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, minDistance, location);
        manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, minDistance, location);

        pattern = new long[200];
        pattern[0] = 0;
        for(int i = 1; i < pattern.length; i++){
            if(i % 2 != 0){
                pattern[i] = SLEEP;
            }
            else{
                pattern[i] = VIBRATE;
            }
        }

        //return super.onStartCommand(intent, flags, startId);
        return super.START_STICKY;
    }   

    LocationListener location = new LocationListener() {

        public void onStatusChanged(String provider, int status, Bundle extras) {}
        public void onProviderEnabled(String provider) {}       
        public void onProviderDisabled(String provider) {}

        @SuppressWarnings("deprecation")
        public void onLocationChanged(Location location) {
            float [] results = new float [3];

            Location.distanceBetween(targetLat, targetLng, location.getLatitude(), location.getLongitude(), results);

            float distance = results[0];

            if(distance > 20000){
                minDistance = 15000;
                toaster(">20000");
                manager.removeUpdates(this);
            }
            else if(distance > 10000){
                minDistance = 5000;
                toaster(">10000");
                manager.removeUpdates(this);
            }
            else if(distance > 5000){
                minDistance = 2500;
                toaster(">5000");
                manager.removeUpdates(this);
            }
            else if(distance > 2500){
                minDistance = 1000;
                toaster(">2500");
                manager.removeUpdates(this);
            }
            else if(distance > 1000){
                minDistance = 0;
                toaster(">1000");               
            }

            if(distance < 800 && alarm){                
                Notification notification = new Notification(R.drawable.ic_launcher, "WakeApp", System.currentTimeMillis());
                Intent notificationIntent = new Intent(getApplicationContext(),MainActivity.class);

                PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(), 0, notificationIntent, 0);
                notification.setLatestEventInfo(getApplicationContext(), getApplicationContext().getResources().getString(R.string.notification_message), "", contentIntent);

                NotificationManager notificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);

                //notification.defaults |= Notification.DEFAULT_VIBRATE;
                notification.defaults |= Notification.DEFAULT_LIGHTS;       
                notification.icon = R.drawable.ic_launcher;         

                if(soundUri != null){
                    notification.sound = soundUri;
                }
                else if(soundUri == null){
                    soundUri = RingtoneManager.getActualDefaultRingtoneUri(getApplicationContext(), RingtoneManager.TYPE_ALARM);
                    notification.sound = soundUri;
                }                                                                                   

                notification.vibrate = pattern;

                alarm = false;
                notificationManager.notify(1, notification);                
                manager.removeUpdates(this);
                stopSelf();
            }
        }
    };

    private void toaster(String text){
        Toast.makeText(this, text, Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:55:04.130

您可以使用以下方法计算两个 gps 位置之间的距离，以米为单位。

```
public static float distFrom (float lat1, float lng1, float lat2, float lng2 ) 
{
    double earthRadius = 3958.75;
    double dLat = Math.toRadians(lat2-lat1);
    double dLng = Math.toRadians(lng2-lng1);
    double a = Math.sin(dLat/2) * Math.sin(dLat/2) +
    Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
    Math.sin(dLng/2) * Math.sin(dLng/2);
    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    double dist = earthRadius * c;

    int meterConversion = 1609;

    return new Float(dist * meterConversion).floatValue();
} 
```

原始来源是我的[答案](https://stackoverflow.com/a/8926162/996493)。

对于 GPS Co-Ordinate，我创建了一个库代码，如下所示，

```
public class LocListener implements LocationListener
{
    private static double lat =0.0;
    private static double lon = 0.0;
    private static double alt = 0.0; 
    private static double speed = 0.0;
    private static long dateTime;

    public static double getLat()
    {
        return lat;
    }

    public static double getLon() 
    {
        return lon;
    }

    public static double getAlt()
    {
        return alt;
    }

    public static double getSpeed()
    {
        return speed;
    }

    // Added By Kalpen Vaghela on 17 09 2012
    public static long getDateTime()
    {
        return dateTime;
    }

    @Override
    public void onLocationChanged(Location location) 
    {
        lat = location.getLatitude();
        lon = location.getLongitude();
        alt = location.getAltitude();
        speed = location.getSpeed(); 
        dateTime = location.getTime();
    }

    @Override
    public void onProviderDisabled(String provider) {}
    @Override
    public void onProviderEnabled(String provider) {}
    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {}
} 
```

# php - 通过 ajax 卸载 IE9 PHP 和 session_destroy - 在刷新页面上触发

> ID：12510908
> 
> 赞同：1
> 
> 时间：2012-09-20T10:38:41.657
> 
> 标签：php, ajax, session, internet-explorer-9

我在使用 IE9 时遇到了这个奇怪的问题（没有在任何其他 IE 中对其进行测试）——当我登录网站时，每当我刷新页面时，都会触发以下代码：

```
jQuery(window).bind("beforeunload", function() {
    $.get('session_destroy.php', function() {
    //  alert('done');
    });
}); 
```

有趣的是，当我调用开发人员工具 F12 - 然后刷新时，我可以看到对 session_destroy.php 的快速调用 - 但它不会让我在刷新时注销！

这是我的文档定义：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> //- note this i need because on intranet sites IE gt 8 force compatibility mode of IE7 - this makes all jquery sucks..
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

不知道这是否相关，但有时我必须登录两次，因为它从第一次开始就没有这样做......我也使用ajax登录：

```
$(document).ready(function(){

    $("#submit").click(function(){
        username = $("#username").val();
        password = $("#password").val();
        $.ajax({
            type: "POST",
            url: "login_db.php",
            data: "username="+username+"&password="+password,
            success: function(html){
                if(html.length>0)
                {
                    switch(html)
                    {
                        case "1": tab = "Production";
                        break;
                        case "2": tab = "Recordings";
                        break;
                        default: tab = "Summary";
                    }
                    window.location.hash = '';
                    var url=window.location;

                    window.location.href= url+tab;
                    location.reload();
                }
                else
                {
                    $("#add_err").html("Wrong username or password");
                }
            }
        });
        return false;
    });
}); 
```

在 Firefox 和 Chrome 中一切正常

# python - Tastypie：根据请求方法定向覆盖的 url

> ID：12510918
> 
> 赞同：0
> 
> 时间：2012-09-20T10:39:16.630
> 
> 标签：python, django, tastypie

我正在处理一个有问题的 URL，我们称之为`/user/{id}/buckets/`

我想要一个 GET`/user/{id}/buckets/`来重定向到`dispatch_list`但一个`POST`重定向到我自己的视图`(process_buckets)`进行处理。

我知道 urlconfs 不支持任何方式来检查请求方法，那么我应该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:06:15.753

你可以简单地覆盖资源的调度方法来做任何你想做的事情

```
class FooResource(ModelResource):
    class Meta:
        # The usual stuff

    def dispatch(self, request_type, request, **kwargs):
        # Do whatever 
```

# android - 低于 4 xml 响应不显示

> ID：12510919
> 
> 赞同：1
> 
> 时间：2012-09-20T10:39:20.813
> 
> 标签：android

我有一个这段代码，如果 xml 响应高于 4 但不打印标签 No Recent Transection 如果值低于或等于 4 这行是获取字符串长度的正确格式？xmlResponse.length<=4？

```
xmlResponse = www.xyz.xml

 if(xmlResponse.length<=4)
         {

             lblTMSNoRecentTransaction = (TextView) 
   findViewById(R.id.lblTMSNoRecentTransaction);
             lblTMSNoRecentTransaction.setText("No Recent 
     Transactions" );

         }

         else
         {
        //     for (int x=1;x<=xmlResponse.length;)
                {
                 lblTMSCustomTransactionDate = (TextView) 
   findViewById(R.id.lblTMSCustomTransactionDate);
                 lblTMSCustomTransactionDate.setText("Transaction Date :   
  "     + xmlResponse[5][1] );

                 lblTMSCustomAmount = (TextView) 
   findViewById(R.id.lblTMSCustomAmount);
                 lblTMSCustomAmount.setText("Amount : " +   
   xmlResponse[6][1] );

                 lblTMSCustomTransactionDate2 = (TextView)  
   findViewById(R.id.lblTMSCustomTransactionDate2);
                 lblTMSCustomTransactionDate2.setText("Transaction Date : " + xmlResponse[8][1] );

                 lblTMSCustomAmount2 = (TextView) 
    findViewById(R.id.lblTMSCustomAmount2);
                 lblTMSCustomAmount2.setText("Amount : " + 
    xmlResponse[9][1] );

                 lblTMSCustomTransactionDate3 = (TextView)  
  findViewById(R.id.lblTMSCustomTransactionDate3);
                 lblTMSCustomTransactionDate3.setText("Transaction Date : " + xmlResponse[11][1] );

                 lblTMSCustomAmount3 = (TextView)    
 findViewById(R.id.lblTMSCustomAmount3);
                 lblTMSCustomAmount3.setText("Amount : " + 
 xmlResponse[12][1] );

                }

                     } 
```

# php - MongoDB/PHP ..如何编写选择查询？

> ID：12510922
> 
> 赞同：5
> 
> 时间：2012-09-20T10:39:26.977
> 
> 标签：php, mysql, mongodb, select

如何在 mongo db 中编写查找查询以选择某些值。例如

```
IN MYSQL - SELECT * from things where id=3;
IN Mongo - thingscollection->find(array("_id" => $id)) 
```

假设如果 MYSQL 查询看起来像这样，

```
SELECT name,age from things where id=3; 
```

我想知道如何在 PHP/MongoDB 中编写查找查询来选择特定值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T10:46:02.457

```
MySQL: SELECT name,age from things where id=3;  
Mongo: $db->things->find(array("id" => 3), array("name" => 1, "age" => 1)); 
```

您可能想要使用 mongo`_id`而不是自己创建的`id`字段。

有关 php 驱动程序的更多信息：[http](http://php.net/manual/en/mongo.sqltomongo.php) ://php.net/manual/en/mongo.sqltomongo.php 另一个仅用于 SQL 到 Mongo 的好链接是[http://rickosborne.org/download/SQL-to- MongoDB.pdf](http://rickosborne.org/download/SQL-to-MongoDB.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:43:39.830

在 Mongo 语句中编写查询时，使用[SQL 到 Mongo](http://in.php.net/manual/en/mongo.sqltomongo.php)作为参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T10:59:48.223

您可能会发现 PHP 在线手册中的[SQL 到 Mongo 映射图](http://www.php.net/manual/en/mongo.sqltomongo.php)很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T04:22:30.503

Yogesh 建议`using the mongo _id`，但这实际上比文档中的常规字段更复杂。

实现：

```
IN MYSQL - SELECT * from things where id=3; 
```

使用 MongoDB 的 PHP 驱动程序，执行以下操作：

```
$m = new MongoClient();
$db = $m->selectDB('stuff');
$collection = new MongoCollection($db, 'things');
$collection->find(array('_id', new MongoID('3')); 
```

如果您没有使用“_id”字段保存您的文档，那么 Mongo 会自动添加此字段，并且 BSON 值具有非常高的唯一性。它通常类似于“512ba941e0b975fe00000000”。

如果您尝试`$collection->find(array('_id' => '512ba941e0b975fe00000000'));`结果为空并且没有生成错误，这在调试时可能会非常令人沮丧。它很容易忘记使用`new MongoID()`，而不仅仅是 string `_id`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-17T12:20:15.923

```
$mongo_url = 'mongodb://127.0.0.1/';
$client = new \MongoDB\Client($mongo_url);
$db_name = 'your_db_name';
$db = $client->$db_name;
$collection = $db->your_collection_name;

$where = array(
    'user_id' => 3
);
$select_fields = array(
    'name' => 1,
    'age' => 1,
);
$options = array(
    'projection' => $select_fields
);
$cursor = $collection->find($where, $options);   //This is the main line
$docs = $cursor->toArray();

print_r($docs); 
```

# javascript - 在 JavaScript 中获取第一个对象成员名称

> ID：12510923
> 
> 赞同：0
> 
> 时间：2012-09-20T10:39:30.260
> 
> 标签：javascript

> **可能重复：**
> [访问对象的第一个属性](https://stackoverflow.com/questions/983267/access-the-first-property-of-an-object)

我只想知道是否有更好的方法来获取对象中的第一个成员名称，例如：

```
var x={a:1};
func(x);//will return 'a' 
```

我编写了一个小功能但我不满意，我认为有更好的方法

我所做的是：

```
var get_member = function(obj){for (i in obj){if (obj.hasOwnProperty(i)) return i;}}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:41:22.630

**假设您的“第一个成员”由添加顺序定义：**

javascript 对象属性中没有保证顺序，因此即使它目前在大多数浏览器上都可以使用，您也不应该这样做。

查看这个相关问题：[“for (... in ...)”循环中的元素顺序](https://stackoverflow.com/questions/280713/elements-order-in-a-for-in-loop)

因此，第一个添加的成员的正确的 ECMAScript 兼容实现不存在。

**假设您有一个基于键（或值）的内在“第一个成员”定义：**

如果您想要的是基于给定的顺序，例如按字母顺序，您可以这样做：

```
var keys = [];
for (k in x) {
   keys.push(k);   
}
keys.sort();
return keys[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:45:16.483

对象没有“第一”属性，它们没有顺序。您只能通过使用获得“一些”属性

```
function func(obj) {
    if (Object(obj) !== obj)
        throw new Error("not an object");
    for (var prop in obj)
        return prop;
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:02:49.687

我认为这是从对象中获取第一个键的更好方法。

变量 x= {a:1};

```
for (var key in x) break; 
```

控制台.log（键）；

# c# - 如何最好地监视和输出 C# .net 文件中的实时文本数据

> ID：12510929
> 
> 赞同：0
> 
> 时间：2012-09-20T10:39:45.913
> 
> 标签：c#, .net, text

基本上，我的任务是编译实时文本诊断文件，对它们进行连接和排序，然后将它们输出到单个 GUI。输出应该清楚地表明每行来自哪个文件。

这是一些示例数据：

```
14-Apr-11 15:10:27.691 CAL Report Terminate
14-Apr-11 15:25:18.723 DIAG_RESTART ******************* P r o c e s s   R e s t a r t e d  
14-Apr-11 15:25:18.733 IIF_II INITIALISING
14-Apr-11 15:25:18.733 IIF_II DISABLED
14-Apr-11 15:25:19.013 IIF_II ENABLED 
```

每行都以日期/时间开头，然后是一些文本。我已经可以对文件进行排序和输出，但我不确定如何使该过程生效，而不仅仅是刷新输出。

我目前正在将文本转换为如下定义的数据结构：

```
List<Tuple<DateTime, String, ConsoleColor>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:46:38.243

将[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)与`OnChanged`事件一起使用

# javascript - 如何调试 Javascript 代码和 IOS 应用程序代码？

> ID：12510931
> 
> 赞同：1
> 
> 时间：2012-09-20T10:39:52.550
> 
> 标签：javascript, iphone, xcode4.2

在我的 iPhone 应用程序中，我的 JavaScript (.js) 文件很少，并且使用 JavaScript 函数我正在加载 UIWebview 内容。

如何在调试用 Objective C 编写的 iPhone 应用程序代码时调试 JavaScript 文件的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:46:21.777

查看 Weinre 项目，看看它是否满足您的需求： http: [//people.apache.org/~pmuellr/weinre/docs/latest/](http://people.apache.org/~pmuellr/weinre/docs/latest/)

我已经在 iOS 项目中成功使用了它。您不一定会获得断点式调试，但您可以检查记录到控制台的 javascript 对象，查看文档标记（通过 webkit 开发工具）等等。这非常有帮助。

# python - 为什么 django-nose 运行测试两次？

> ID：12510934
> 
> 赞同：2
> 
> 时间：2012-09-20T10:40:06.607
> 
> 标签：python, django-models, nose, django-testing, django-nose

我有以下**型号**：

```
class Poll(models.Model):

    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField(auto_now_add=True)

    def __unicode__(self):
             return self.question 
```

和以下**测试**

```
from polls.models import Poll
from django.test import TestCase
from django.utils import timezone

class PollModelTest(TestCase):

    def test_poll_save(self):
        q = "What is the best OS?"
        pd = timezone.now()
        p = Poll(question=q,
                 pub_date=pd)
        p.save()
        polls = Poll.objects.all()
        self.assertEquals(polls.count(), 1)
        self.assertEquals(polls[0].question, q) 
```

和以下**设置**：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
     'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'polls',
    'django_nose',

)

TEST_RUNNER = 'django_nose.NoseTestSuiteRunner'
NOSE_ARGS = [
    '--with-coverage',
    '--cover-package=polls',
    '--with-progressive',
    '--verbosity=0',
    '--with-fixture-bundling',
] 
```

当我尝试`python manage.py test polls`测试*运行两次*。以下是输出：

```
Creating test database for alias 'default'...
Name           Stmts   Miss  Cover   Missing
--------------------------------------------
polls              0      0   100%   
polls.models       6      0   100%   
--------------------------------------------
TOTAL              6      0   100%   

OK!  2 tests, 0 failures, 0 errors in 0.0s
Destroying test database for alias 'default'... 
```

但是，当我尝试不使用时`TEST_RUNNER = 'django_nose.NoseTestSuiteRunner'`，测试*只运行一次*。以下是输出：

```
Creating test database for alias 'default'...
.
----------------------------------------------------------------------
Ran 1 test in 0.002s

OK
Destroying test database for alias 'default'... 
```

请告诉我有什么问题吗？**为什么 django-nose 运行测试两次？**

**OT：对于相同的模型，django_nose 比 unittest 花费更多的时间。**

**编辑：**

这是文件夹结构：

```
├── database.sqlite
├── manage.py
├── mysite
│   ├── __init__.py
│   ├── settings.py
│   ├── templates
│   │   ├── 404.html
│   │   ├── 500.html
│   │   └── base.html
│   ├── urls.py
│   └── wsgi.py
└── polls
    ├── __init__.py
    ├── models.py
    ├── tests
    │   ├── __init__.py
    │   └── test_models.py
    ├── urls.py
    └── views.py 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:05:49.110

可能您的测试已导入两次。你没有显示你的文件结构，但也许你有这个测试在单独的文件中，而不是你`import`在 test.py 中，或者类似的东西。

# java - 我如何从 Struts 逻辑中获取价值：在变量中迭代标记

> ID：12510940
> 
> 赞同：0
> 
> 时间：2012-09-20T10:40:18.307
> 
> 标签：java, jsp, struts, struts-html

我正在使用 struts 标记在 Jsp 中迭代 Vo，在其中我得到一个整数值

```
<struts_logic:iterate id="usersVO" indexId="index" name="data" type="utils.vo.UsersVO">

<td class="tabletext"><struts_bean:write name="usersVO" property="userType"/></td> 
```

这里 userType 是一个 int 值。我怎样才能得到这个值

```
<%
  int x = **here**
%> 
```

所以我可以处理它以供显示。

或者是否有任何其他方式可以显示 String 值取决于即将到来的 int 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:03:31.603

听起来你应该这样做`<c:choose>`。例如：

```
<c:choose>
    <c:when test="${usersVO.userType==1}">
        <p>User type is 1</p>
    </c:when>
    <c:when test="${usersVO.userType==2}">
        <p>etc</p>
    </c:when>
   <c:otherwise>
       <p>User type is unknown</p>
   </c:otherwise>
</c:choose> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:19:40.027

我使用 struts logic:equal 标签来做到这一点，它对我来说很好用

```
<struts_logic:equal name="usersVO" property="userType" value="0">
   <struts_bean:message key ="usermanagement.NotAuthorization"/>                    
</struts_logic:equal>
<struts_logic:equal name="usersVO" property="userType" value="1">
   <struts_html:link page="/anzeige.do" paramId="authorization" paramName="usersVO" paramProperty="userName" style="text-decoration: none;">
      <struts_bean:message key ="usermanagement.Authorization" />
   </struts_html:link>
</struts_logic:equal> 
```

# google-maps - KML 自定义图标有时不显示

> ID：12510943
> 
> 赞同：1
> 
> 时间：2012-09-20T10:40:27.773
> 
> 标签：google-maps, google-maps-api-3

我在 Google 地图上使用 KML 已经有很长时间了，并且我有几个应用程序绘制静态和动态（由 Postgis 数据库上的 PHP 服务生成）KMLS。

一切正常，结果令人惊叹，但有时自定义图标是用蓝色水滴默认图标绘制的。

我认为这是一个网络问题。我已经检查了两个客户端（在不同的网络中），其中一个自定义图标显示正常，而另一个则没有。此外，有时会针对某些缩放值显示自定义图标。

它从一开始就发生了，我没有对应用程序进行任何更改，突然一切正常。

我应该在 KML 中嵌入图标的图像吗？它解决了问题吗？

您可以看到只有一层处于活动状态的此问题的屏幕截图：

[https://dl.dropbox.com/u/15451865/kmlrenderissue.png](https://dl.dropbox.com/u/15451865/kmlrenderissue.png)

当我做这个截图时，突然问题消失了，每个图标看起来都很好......

这是发生此问题的应用程序[http://mapadesevilla.geographica.gs](http://mapadesevilla.geographica.gs)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:55:38.357

尝试收听您的`status_changed`事件`KmlLayer`并输出该`getStatus()`方法的结果。这可能会给您一些关于问题所在的指示。

但是，看起来其他人也有类似的问题：[http ://www.alexstanhope.com/blog/technology/203/google-maps-tile-display-bug-kml-layers](http://www.alexstanhope.com/blog/technology/203/google-maps-tile-display-bug-kml-layers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:46:34.190

你的数据目前是什么格式的？Google Maps API 出现问题，显示超过 25 个 kml 文件（请参阅[http://code.google.com/p/gmaps-api-issues/issues/detail?id=2384](http://code.google.com/p/gmaps-api-issues/issues/detail?id=2384)）所以我不会推荐使用 kml/kmz。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:10:03.737

这是该问题的一个真实示例（取自 mapadesevilla.geographica.gs），当缩放下降时，点的图标会发生变化：

*   缩放 13（点 A 和点 B 显示自定义图标）：

![放大 13 的问题](../Images/87c1136b2bc416a5d9fcfeb410aa2d0a.png)

*   缩放 14（点 A - 自定义图标，点 B 是混合）

![放大 14 的问题](../Images/e5bc263add04a8fac7cc74c0e2517ec4.png)

*   缩放 15（点 A - 默认图标，点 B 自定义图标）

![放大 15 倍的问题](../Images/234137e41acabab977c88d44db1ec7ba.png)

# grails - 具有多对多属性的 Grails GORM

> ID：12510944
> 
> 赞同：0
> 
> 时间：2012-09-20T10:40:32.660
> 
> 标签：grails, grails-orm

我有两个域类：

```
class A {
    int id
    static hasMany = [bs: B]
}

class B {
    int id
} 
```

我可以使用 GORM 查找与具有给定 id 的 B 实例相关的所有 A 实例吗？
我试过：

```
A.findAllByBs(B.get(bid)) 
```

但我收到以下错误：

```
Class: java.sql.SQLException
Message: No value specified for parameter 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:38:20.923

来自 Gorm 文档

**查询关联**

可以通过具有与属性名称匹配的节点来查询关联。例如说 Account 类有很多 Transaction 对象：

```
class Account {
   …
   static hasMany = [transactions: Transaction]
   …
} 
```

我们可以通过使用属性名称事务作为构建器节点来查询此关联：

```
def c = Account.createCriteria()
def now = new Date()
def results = c.list {
    transactions {
        between('date', now - 10, now)
    }
} 
```

上面的代码将找到过去 10 天内执行过交易的所有 Account 实例。您还可以将此类关联查询嵌套在逻辑块中：

```
def c = Account.createCriteria()
def now = new Date()
def results = c.list {
    or {
        between('created', now - 10, now)
        transactions {
            between('date', now - 10, now)
        }
    }
} 
```

**所以这应该工作：**

```
def c = A.createCriteria()
def results = c.list {
    bs {
        // Conditions...
    }
} 
```

希望它有所帮助或提供任何提示如何遵循。

# iscroll4 - iScroll 粘在另一个 iScroll 内

> ID：12510947
> 
> 赞同：0
> 
> 时间：2012-09-20T10:40:42.127
> 
> 标签：iscroll4, iscroll

我的问题类似于[Have carousel iScroll inside an existing vertical iScroll](https://stackoverflow.com/questions/9157289/have-carousel-iscroll-inside-an-existing-vertical-iscroll)，只有一个例外：我也需要垂直 iScroll 的快速滚动模式。但是当第一次从右向左拖动任何水平滚动条时，它会粘住。有什么办法可以避免这种情况吗？

此处的示例：http: [//jsfiddle.net/t5Fjg/ （来自](http://jsfiddle.net/t5Fjg/)[http://jsfiddle.net/manseuk/r9VL2/2/](http://jsfiddle.net/manseuk/r9VL2/2/)的编辑代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:24:11.247

我编写了一个库[Motus.js](https://bitbucket.org/rcafolla/motus.js)，它可能会满足您的需求。

# php - 添加一个键=> 值对，比较一个数组的**键**和另一个数组的**值**

> ID：12510949
> 
> 赞同：1
> 
> 时间：2012-09-20T10:40:58.040
> 
> 标签：php, associative-array, array-difference

我有一个关联数组（名称 = $holidays），如下所示。每个键可能指向一个值，也可能不指向一个值。如果一个键指向一个值，则该值是一个数组，如下所示。（键 [4] 指向具有键=> 值对 [override] => 1 的数组）

```
Array
(
    [1] =>                       
    [2] =>                       
    [3] =>                       
    [4] => Array                 
                        (
                           [override] => 1
                        )

    [5] =>                       
    [6] =>                
    [7] =>
) 
```

我有另一个 2D 关联数组（名称 = $days），如下所示。

```
Array
(
    [0] => Array
        (
            [a] => 1
            [b] => 20120903
            [c] => 1
            [d] => Mon
            [e] => 3
            [f] => September
            [g] => Sep
            [h] => 9
            [i] => 1
            [j] => 1
        )

    [1] => Array
        (
            [a] => 2
            [b] => 20120904
            [c] => 1
            [d] => Tue
            [e] => 4
            [f] => September
            [g] => Sep
            [h] => 9
            [i] => 
            [j] => 
        )

    [2] => Array
        (
            [a] => 3
            [b] => 20120905
            [c] => 1
            [d] => Wed
            [e] => 5
            [f] => September
            [g] => Sep
            [h] => 9
            [i] => 
            [j] => 
        )

    [3] => Array
        (
            [a] => 4
            [b] => 20120906
            [c] => 1
            [d] => Thu
            [e] => 6
            [f] => September
            [g] => Sep
            [h] => 9
            [i] => 
            [j] => 
        )

    [4] => Array
        (
            [a] => 5
            [b] => 20120907
            [c] => 1
            [d] => Fri
            [e] => 7
            [f] => September
            [g] => Sep
            [h] => 9
            [i] => 
            [j] => 
        )

    [5] => Array
        (
            [a] => 6
            [b] => 20120908
            [c] => 1
            [d] => Sat
            [e] => 8
            [f] => September
            [g] => Sep
            [h] => 9
            [i] => 
            [j] => 
        )

    [6] => Array
        (
            [a] => 7
            [b] => 20120909
            [c] => 1
            [d] => Sun
            [e] => 9
            [f] => September
            [g] => Sep
            [h] => 9
            [i] => 
            [j] => 
        )

) 
```

我基本上需要像这样在 2 个数组之间进行比较：获取 $holidays 数组的第一个**键****（**我们将其命名为 $val1）
然后转到 $days 数组，访问第一个子数组，获取该子数组的键 [a]（我们将其命名为 $val2），然后检查

 **> ($val1 和 $val2) 是否相同以及
> 数组 $holiday 的键是否包含值（正如我在上面提到的 $holiday 数组的键可能不指向任何值），

如果这两个条件都为真，
则将新的 key=>value 对添加到 $days 数组的相关子数组中。
然后移动到数组的下一个元素，依此类推。

因此，鉴于上面的 2 个数组，我希望下面的数组返回。

```
Array
    (
        [0] => Array
            (
                [a] => 1346610600
                [b] => 20120903
                [c] => 1
                [d] => Mon
                [e] => 3
                [f] => September
                [g] => Sep
                [h] => 9
                [i] => 1
                [j] => 1
            )

        [1] => Array
            (
                [a] => 1346697000
                [b] => 20120904
                [c] => 1
                [d] => Tue
                [e] => 4
                [f] => September
                [g] => Sep
                [h] => 9
                [i] => 
                [j] => 
            )

        [2] => Array
            (
                [a] => 1346783400
                [b] => 20120905
                [c] => 1
                [d] => Wed
                [e] => 5
                [f] => September
                [g] => Sep
                [h] => 9
                [i] => 
                [j] => 
            )

        [3] => Array
            (
                [a] => 1346869800
                [b] => 20120906
                [c] => 1
                [d] => Thu
                [e] => 6
                [f] => September
                [g] => Sep
                [h] => 9
                [i] => 
                [j] =>
                [k] => 1 <<---------------- This is the new key value pair

            )

        [4] => Array
            (
                [a] => 1346956200
                [b] => 20120907
                [c] => 1
                [d] => Fri
                [e] => 7
                [f] => September
                [g] => Sep
                [h] => 9
                [i] => 
                [j] => 
            )

        [5] => Array
            (
                [a] => 1347042600
                [b] => 20120908
                [c] => 1
                [d] => Sat
                [e] => 8
                [f] => September
                [g] => Sep
                [h] => 9
                [i] => 
                [j] => 
            )

        [6] => Array
            (
                [a] => 1347129000
                [b] => 20120909
                [c] => 1
                [d] => Sun
                [e] => 9
                [f] => September
                [g] => Sep
                [h] => 9
                [i] => 
                [j] => 
            )

    ) 
```

希望很清楚。任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:49:18.727

```
foreach($holidays as $key => $value) {
    if(!is_array($value))
        continue;

    foreach($days as $dKey => $dValue) {
        if($key != $dValue['a'])
            continue;
        if(isset($dValue['k']) && $dValue['k'] == $value['override'])
            continue;

        end($dValue);
        $lastKey = key($dValue);

        $dValue[$lastKey++] = $value['override'];
        break;
    }
}

print_r($days); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:59:15.790

```
<?php 
    foreach($holidays AS $hkey=>$hval){
        if(empty($hval))
            continue;
        foreach ($days as $day) {
            if($day['a'] != $hkey)
                continue;
            if(!is_array($hval))
                continue;

            end($day);
            $lastKey = key($day);
            $newLastKey = chr(ord($lastKey)+1);
            $day[$newLastKey] = $hval['override'];
            break;
        }

    } 
```

此代码未经测试....尝试如果您有问题然后让我知道我会尝试**

# c# - <%=Html.Button%> 参数

> ID：12510950
> 
> 赞同：0
> 
> 时间：2012-09-20T10:41:00.367
> 
> 标签：c#, html, button

我有一个**Html 按钮**，如下所示：

```
<%=Html.Button("javascript:onSave();", CommonResource.Save, "SaveButton")%> 
```

在哪里：

```
parameter1 - action  
parameter2 - name   
parameter3 - id 
```

如何为**CSS 类**添加参数？我试过这样做：

```
<%=Html.Button("javascript:onSave();", CommonResource.Save, "SaveButton",new { @class="save" })%> 
```

但这不起作用。我只得到外观但没有执行任何操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:43:04.673

这看起来像 ASP.NET MVC。如果是这样，请适当地标记您的问题。标准 MVC 库中没有`Button`助手，所以我猜这是您正在使用的一些自定义或第三方助手。如果没有允许您传递 htmlAttributes 的重载，则无法完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:57:55.073

您需要查看您的实现，`Html.Button`因为它不是标准的 HtmlHelper。

它可能没有 htmlAttributes 的参数，在这种情况下，您可以使用这个实现，确实如此！

```
public static class HtmlButtonExtension 
{
  public static MvcHtmlString Button(this HtmlHelper helper, string text,
                                 IDictionary<string, object> htmlAttributes)
  {
      var builder = new TagBuilder("button");
      builder.InnerHtml = text;
      builder.MergeAttributes(htmlAttributes);
      return MvcHtmlString.Create(builder.ToString());
  }
} 
```

# c++ - 将继承的受保护成员之一设为私有

> ID：12510953
> 
> 赞同：5
> 
> 时间：2012-09-20T10:41:27.983
> 
> 标签：c++, inheritance

```
class A
{
protected:
    int m_a;
    int m_b;
};

class B: public A
{
}; 
```

在 B 类中，我想将其设为`m_a`私有。以下是正确的方法吗

```
class B:public A
{    
private:
    int m_a;
}; 
```

这不会导致 2 个副本`m_a`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T10:46:12.647

调整成员访问控制的正确方法是[`using`声明](https://stackoverflow.com/questions/2084801/c-using-declaration-scope-and-access-control)：

```
class B: public A {    
private:
    using A::m_a;
} 
```

仅仅写入`int m_a;`确实会产生两个副本`m_a`，并且派生类将能够通过写入访问`A`的副本。`m_a``A::m_a`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:43:20.500

的**阴影**中。`m_a`_ 它是一个不同的数据成员，因此B 类实际上有三个:和 。获得私人访问in的方法是“使用”私人 in ：`class B` **`class A``ints``A::m_a``A::m_b``B::m_a``m_a``B``A::m_a``class B`**

 **```
class A {
  int m_a;
};

class B:  public A {    
    using A::m_a;
};

class C : public B {
  void foo() { 
    m_a++; // ERROR!
  }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:46:22.100

此代码在 B 类中创建三个 int 存储。

m_a 的声明创建了一个新变量 - 这里在 c++ 中没有重新声明问题，因为声明在不同的范围内，更具体地说，A::m_a 与 B::m_a 不同。**

# iphone - ios：为什么self.navigationItem.title不显示标题，怎么改标题？

> ID：12510954
> 
> 赞同：1
> 
> 时间：2012-09-20T10:41:32.090
> 
> 标签：iphone, uinavigationbar, uinavigationitem

我遇到了一个奇怪的问题

代码 ：

```
- (void) viewDidLoad 
{
    [super viewDidLoad];
    self.navigationItem.title = @"Hello title";
} 
```

并且在xib文件中有一个导航栏。导航栏在加载后显示在视图中。但是，导航栏中不会显示“Hello title”。

那么如何更改导航栏标题？

多谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-10T11:40:11.110

试试这段代码：

```
 self.navigationController.navigationBar.topItem.title = @"The Title"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:55:46.767

在视图 didload 上键入此内容，您在其中查看“导航” `self.title = @"Hello title";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:43:10.090

尝试这个

```
self.title = @"Hello title"; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-20T12:47:28.833

尝试在方法中编写 tis `viewDidLoad`：

```
self.navigationItem.titleView=[self navigationItemTile:@"Hello Title"]; 
```

或尝试以下`initWithNibname`方法：

```
[self setTitle:@"Hello title"]; 
```

# c# - 当它们已经存储在其他地方时，是否不需要对默认配置进行硬编码？

> ID：12510956
> 
> 赞同：3
> 
> 时间：2012-09-20T10:41:34.900
> 
> 标签：c#, wcf, config

我目前正在参与一个包含数十个 WCF 服务的 SOA 项目。服务的业务逻辑配置存储在数据库中，特定服务负责检索配置。并且每个服务的默认配置也被硬编码在相应的服务中，以防配置服务关闭或发生其他一些异常。

我的问题：硬编码配置是否不必要且丑陋？我们是否应该完全信任配置服务，而不是在代码中备份默认设置？更一般地说，当默认配置已经存储在数据库等中时，您是否对它们进行硬编码？

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:45:05.873

IMO，硬编码配置不合适，也不容易维护。如果您不能信任您的配置服务，那么您可以将配置存储在备份 XML 文档中并从那里读取，而不是将它们作为硬编码元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:55:04.007

应用程序交付后配置经常发生变化，因此硬编码是需要频繁重建的秘诀。同样，不建议将它们存储在数据库中，因为它需要操作员访问或修改数据库，这破坏了“最小权限”，并将它们与数据库访问凭据分开，使得备份和审查更加困难。

您通常信任您的运营商。这些人监控系统并对其持续运行负责。您还希望开发人员和操作员之间的“职责分离”和硬编码打破了这一点。

# java - sql 或 sqlite 查询并在列表中获取结果

> ID：12510959
> 
> 赞同：2
> 
> 时间：2012-09-20T10:41:43.170
> 
> 标签：java, android, sql, sqlite

我是 sql 新手，在我的应用程序中，我使用的是 sqlite DB，但在创建查询时遇到了麻烦。

我有一个列名的数据库：

```
Name1  Name2  Score1  Score2 Winner  Aces1  Aces2 
```

想象一下，这些是单个游戏的统计数据，因此相同的名称可以在名称 1 中或名称 2 中的不同行中。

我想要以下内容：

a) 在列表中返回具有 A 数递减的玩家姓名。

例如想象这些行：

```
Nick George 39  35  Nick  2   4
Joe  Nick   17  39  Nick  1   0
George Jorge  11  39  Jorge  3  1 
```

应该在列表中给我以下内容：//数字或ace

```
George 7
Nick 2
Joe 1
Jorge 1 
```

b）我想要相同的获胜次数。

c）和相同的平均点。

请问可以给我查询吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T10:44:08.783

您的问题是以非规范化形式存储数据的结果。如果您阅读了[数据规范化](http://en.wikipedia.org/wiki/Database_normalization)，那么您将以更易于生成这些查询的形式存储数据。

```
select Winner, COUNT(*) from yourtable group by Winner order by COUNT(*) desc 
```

和

```
select name, SUM(aces)
from
(
select Name1 as Name, Score1 as Score, Aces1 as Aces from yourtable
union all
select Name2 as Name, Score2 as Score, Aces2 as Aces from yourtable
) v
group by Name
order by SUM(aces) desc 
```

平均分留给读者作为练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:03:43.990

select name, SUM(aces) from ( select Name1 as Name, Score1 as Score, Aces1 as Aces from yourtable union all select Name2 as Name, Score2 as Score, Aces2 as Aces from yourtable ) v group by Name order by SUM(aces)描述

# html - 使用 extjs 的 IE7 tbar 行分隔符中的问题

> ID：12510960
> 
> 赞同：2
> 
> 时间：2012-09-20T10:41:45.547
> 
> 标签：html, internet-explorer, extjs, internet-explorer-7, extjs3

我需要一个位于顶栏下一行的组件。我这样编码，

```
tbar: [{
    xtype: 'textfield'
    id:'fname'
},'-',{
    xtype: 'textfield'
    ,id: 'lname'
},'<row>',{
    xtype: 'textfield'
    ,id:'mob'
}] 
```

这在 chrome、firefox 和 ie7+ 浏览器中运行良好，但在 ie7 中不起作用。有人可以更正我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:22:00.297

一个非常原始的方法呢？

```
tbar : {
    layout : 'auto', // im not sure why 'vbox' does not work here
    width: 200,
    items : [{
        xtype: 'container',
        layout: 'hbox',
        items : [{
            xtype: 'textfield',
            id:'fname'
        }, {
            xtype: 'container',
            html: '-',
            width: 5
        }, {
            xtype: 'textfield',
            id: 'lname'
        }]
    }, {
        xtype: 'textfield',
        id : 'mob'
    }]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:51:12.247

你的 xtype 后面没有逗号：'textfield'。

IE7 在 JavaScript 中对逗号非常敏感。

```
tbar: [{
    xtype: 'textfield'
    ,id:'fname'
},'-',{
    xtype: 'textfield'
    ,id: 'lname'
},'<row>',{
    xtype: 'textfield'
    ,id:'mob'
}] 
```

编辑：我做了这个小提琴，它适用于所有浏览器：

[http://jsfiddle.net/MG3fS/3/](http://jsfiddle.net/MG3fS/3/)

# android - 如何在 Android 中创建多级 ListView

> ID：12510964
> 
> 赞同：4
> 
> 时间：2012-09-20T10:41:51.510
> 
> 标签：android, listview, treeview, android-listview, multi-level

我需要创建一个多级列表。喜欢这张图片

![多级列表](../Images/5ad0b7fb516c19fc6b840a5f893c71ea.png)

我试试[这个](http://code.google.com/p/tree-view-list-android/)，[这个](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/widget/ExpandableListView.java?av=f)和[这个](http://developer.android.com/reference/android/widget/ExpandableListView.html)

但不知道如何实现多级列表视图。

我尝试像这样创建自己的

**main1.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:scrollbars="none"
android:background="#ffffff"
>

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#ffffff"
android:id="@+id/add"
android:orientation="vertical"
/>

</ScrollView> 
```

**树节点数据库.java**

```
 package com.android.treenode;

import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteStatement;
import android.util.Log;

public class TreenodeDatabase {

private static final String DB_NAME1 = "treenode.sqlite3";
private static final int databse_version=1;
private  Context         m_contextObj       =  null ;
private  SQLiteDatabase  db   =  null ;
private SQLiteStatement insertstmt;
int totalcolms;
public TreenodeDatabase(Context ctx)
 {
         m_contextObj = ctx;
         OpenHelper  oh=new OpenHelper (m_contextObj);
         this.db=oh.getWritableDatabase();
 }

  public void CloseDB()
  {
      try
        {
            db.close();

        }
        catch(Exception ex)
        {
        }
        finally{

            db=null;
            //return nt;
        }

  } 

  public void getContinentData(){

        Cursor mCursor = null;
        String SqlQuery = null;
        int numRows;

        SqlQuery = "Select * from Continent";
        Log.d("Query ------>",SqlQuery);
        try{
            ArrayListClass.continent.clear();
        }catch (Exception e) {
            // TODO: handle exception
        }

        try
        {
            mCursor = db.rawQuery(SqlQuery, null);          
            if(mCursor != null)
            {
                numRows = mCursor.getCount();
                Log.e("1","");

                mCursor.moveToFirst();
                for (int i = 0; i < numRows; ++i) 
                {

                    ObjectClass obj = new ObjectClass();
                    obj.continent_id = mCursor.getString(0).toString().replace('$',' ').trim().toString();
                    obj.continent = mCursor.getString(1).toString().replace('$',' ').trim().toString();

                    ArrayListClass.continent.add(obj);
                    mCursor.moveToNext();

                }

            }
        } 
        catch (SQLException e) 
        {

        }
        finally{
            try{

            mCursor.close();
            mCursor=null;
            }catch (Exception e) {
                // TODO: handle exception
            }
        }

  }
  public void getCountryData(String continent_id){

        Cursor mCursor = null;
        String SqlQuery = null;
        int numRows;

        SqlQuery = "Select * from Country where Rid=" + continent_id;
        Log.d("Query ------>",SqlQuery);
        try{
            ArrayListClass.country.clear();
        }catch (Exception e) {
            // TODO: handle exception
        }

        try
        {
            mCursor = db.rawQuery(SqlQuery, null);          
            if(mCursor != null)
            {
                numRows = mCursor.getCount();
                Log.e("1","");

                mCursor.moveToFirst();
                for (int i = 0; i < numRows; ++i) 
                {

                    ObjectClass obj = new ObjectClass();
                    obj.country_id = mCursor.getString(0).toString().replace('$',' ').trim().toString();
                    obj.country = mCursor.getString(1).toString().replace('$',' ').trim().toString();
                    obj.country_ref_id =        mCursor.getString(2).toString().replace('$',' ').trim().toString();

                    ArrayListClass.country.add(obj);
                    mCursor.moveToNext();

                }

            }
        } 
        catch (SQLException e) 
        {

        }
        finally{

            try{

            }catch (Exception e) {
                // TODO: handle exception
            }

            try{

            mCursor.close();
            mCursor=null;
            }catch (Exception e) {
                // TODO: handle exception
            }
        }

  }
  public void getStateData(String country_id){

        Cursor mCursor = null;
        String SqlQuery = null;
        int numRows;

        SqlQuery = "Select * from State where Rid=" + country_id;
        Log.d("Query ------>",SqlQuery);
        try{
            ArrayListClass.state.clear();
        }catch (Exception e) {
            // TODO: handle exception
        }

        try
        {
            mCursor = db.rawQuery(SqlQuery, null);          
            if(mCursor != null)
            {
                numRows = mCursor.getCount();
                Log.e("1","");

                mCursor.moveToFirst();
                for (int i = 0; i < numRows; ++i) 
                {

                    ObjectClass obj = new ObjectClass();
                    obj.state_id = mCursor.getString(0).toString().replace('$',' ').trim().toString();
                    obj.state = mCursor.getString(1).toString().replace('$',' ').trim().toString();
                    obj.state_ref_id = mCursor.getString(2).toString().replace('$',' ').trim().toString();

                    ArrayListClass.state.add(obj);
                    mCursor.moveToNext();

                }

            }
        } 
        catch (SQLException e) 
        {

        }
        finally{
            try{

            mCursor.close();
            mCursor=null;
            }catch (Exception e) {
                // TODO: handle exception
            }
        }

  }
  public void getRegionData(String state_id){

        Cursor mCursor = null;
        String SqlQuery = null;
        int numRows;

        SqlQuery = "Select * from Region where Rid=" + state_id;
        Log.d("Query ------>",SqlQuery);
        try{
            ArrayListClass.region.clear();
        }catch (Exception e) {
            // TODO: handle exception
        }

        try
        {
            mCursor = db.rawQuery(SqlQuery, null);          
            if(mCursor != null)
            {
                numRows = mCursor.getCount();
                Log.e("1","");

                mCursor.moveToFirst();
                for (int i = 0; i < numRows; ++i) 
                {

                    ObjectClass obj = new ObjectClass();
                    obj.region_id = mCursor.getString(0).toString().replace('$',' ').trim().toString();
                    obj.region = mCursor.getString(1).toString().replace('$',' ').trim().toString();
                    obj.region_ref_id = mCursor.getString(2).toString().replace('$',' ').trim().toString();

                    ArrayListClass.region.add(obj);
                    mCursor.moveToNext();

                }

            }
        } 
        catch (SQLException e) 
        {

        }
        finally{
            try{

            mCursor.close();
            mCursor=null;
            }catch (Exception e) {
                // TODO: handle exception
            }
        }

  }
  public void getAreaData(String region_id){

        Cursor mCursor = null;
        String SqlQuery = null;
        int numRows;

        SqlQuery = "Select * from Area where Rid=" + region_id;
        Log.d("Query ------>",SqlQuery);
        try{
            ArrayListClass.area.clear();
        }catch (Exception e) {
            // TODO: handle exception
        }

        try
        {
            mCursor = db.rawQuery(SqlQuery, null);          
            if(mCursor != null)
            {
                numRows = mCursor.getCount();
                Log.e("1","");

                mCursor.moveToFirst();
                for (int i = 0; i < numRows; ++i) 
                {

                    ObjectClass obj = new ObjectClass();
                    obj.area_id = mCursor.getString(0).toString().replace('$',' ').trim().toString();
                    obj.area = mCursor.getString(1).toString().replace('$',' ').trim().toString();
                    obj.area_ref_id = mCursor.getString(2).toString().replace('$',' ').trim().toString();

                    ArrayListClass.area.add(obj);
                    mCursor.moveToNext();

                }

            }
        } 
        catch (SQLException e) 
        {

        }
        finally{
            try{

            mCursor.close();
            mCursor=null;
            }catch (Exception e) {
                // TODO: handle exception
            }
        }

  }

  public long insert(String values){
        Log.e("DbHelper : ", "Insert function called    " + values);
        this.insertstmt=this.db.compileStatement(values);
        Log.e("DbHelper :", "Executing insert query here ");
        return this.insertstmt.executeInsert();
    }

  private static class OpenHelper extends SQLiteOpenHelper {
        OpenHelper(Context context){
             super(context, DB_NAME1, null, databse_version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub

            db.execSQL("CREATE TABLE "+"Continent"+"(Id INTEGER PRIMARY KEY AUTOINCREMENT,Name TXT)");
            db.execSQL("CREATE TABLE "+"Country"+"(Id INTEGER PRIMARY KEY AUTOINCREMENT,Name TXT,Rid TXT)");
            db.execSQL("CREATE TABLE "+"State"+"(Id INTEGER PRIMARY KEY AUTOINCREMENT,Name TXT,Rid TXT)");
            db.execSQL("CREATE TABLE "+"Region"+"(Id INTEGER PRIMARY KEY AUTOINCREMENT,Name TXT,Rid TXT)");
            db.execSQL("CREATE TABLE "+"Area"+"(Id INTEGER PRIMARY KEY AUTOINCREMENT,Name TXT,Rid TXT)");

        }

        @Override
        public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
            // TODO Auto-generated method stub

        }
}

} 
```

**对象类.java**

```
package com.android.treenode;

public class ObjectClass{

String continent = "";
String country = "";
String state = "";
String region = "";
String area = "";

String continent_id = "";
String country_id = "";
String state_id = "";
String region_id = "";
String area_id = "";

String country_ref_id = "";
String state_ref_id = "";
String region_ref_id = "";
String area_ref_id = "";

public static boolean [] showcountry = null;
public static boolean [] showstate = null;
public static boolean [] showregion = null;
public static boolean [] showarea = null;

//public static Bitmap b;

} 
```

**ArrayListClass.java**

```
package com.android.treenode;

import java.util.ArrayList;

public class ArrayListClass{

public static ArrayList<ObjectClass> continent = new ArrayList<ObjectClass>();
public static ArrayList<ObjectClass> country = new ArrayList<ObjectClass>();
public static ArrayList<ObjectClass> state = new ArrayList<ObjectClass>();
public static ArrayList<ObjectClass> region = new ArrayList<ObjectClass>();
public static ArrayList<ObjectClass> area = new ArrayList<ObjectClass>();

//public static ArrayList<ObjectClass,ArrayList<ObjectCl> area1 = new ArrayList<ObjectClass,area>();

} 
```

**树节点活动.java**

```
package com.android.treenode;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.Gravity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;
import android.widget.TextView;
import android.widget.Toast;

public class TreenodeActivity extends Activity {

TreenodeDatabase tnd;

LinearLayout llAdd;

int count = 0;
float size = 24f;

int items = 3;

int padding = 50;

boolean showcountry;
boolean showstate = true,showregion = true,showarea = true;

//*//** Called when the activity is first created. *//*
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    insertMethod();

    try{
        tnd = new TreenodeDatabase(this);
        tnd.getContinentData();
        tnd.CloseDB();
    }catch (Exception e) {
        // TODO: handle exception
    }

    llAdd = (LinearLayout)findViewById(R.id.add);

    //showcountry = new boolean[ArrayListClass.continent.size()];

    for(int i=0; i<ArrayListClass.continent.size(); i++){
        final int a = i;
        final LinearLayout ll = new LinearLayout(this);
        ll.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        ll.setGravity(Gravity.LEFT|Gravity.CENTER);
        ll.setBackgroundColor(Color.WHITE);
        ll.setOrientation(LinearLayout.VERTICAL);

        final TextView tv = new TextView(this);
        tv.setText(ArrayListClass.continent.get(i).continent + "");
        tv.setTextSize(size);
        tv.setTextColor(Color.BLACK);
        tv.setGravity(Gravity.LEFT|Gravity.CENTER);
        tv.setBackgroundColor(Color.WHITE);
        tv.setOnClickListener(new OnClickListener() {               
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                try{
                    tnd = new TreenodeDatabase(getBaseContext());
                    tnd.getCountryData(ArrayListClass.continent.get(a).continent_id);
                    tnd.CloseDB();
                }catch (Exception e) {
                    // TODO: handle exception
                }

                if(showcountry){

                    if(ArrayListClass.country.size()>0){

                        for(int i = 0; i<ArrayListClass.country.size(); i++){
                            final int b = i;
                            final LinearLayout ll1 = new LinearLayout(getBaseContext());

                            if(i==0){
                                try{
                                    ll1.removeAllViews();
                                }catch (Exception e) {
                                    // TODO: handle exception
                                    e.printStackTrace();
                                }
                            }

                            ll1.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
                            ll1.setGravity(Gravity.LEFT|Gravity.CENTER);
                            ll1.setBackgroundColor(Color.WHITE);
                            ll1.setOrientation(LinearLayout.VERTICAL);                  
                            ll1.setPadding(50, 1, 1, 1);

                            final TextView tv1 = new TextView(getBaseContext());
                            tv1.setText(ArrayListClass.country.get(i).country + "");
                            tv1.setTextSize(size);
                            tv1.setTextColor(Color.BLACK);
                            tv1.setGravity(Gravity.LEFT|Gravity.CENTER);
                            tv1.setBackgroundColor(Color.WHITE);
                            tv1.setOnClickListener(new OnClickListener() {                              
                                @Override
                                public void onClick(View v) {
                                    // TODO Auto-generated method stub

                                    try{
                                        tnd = new TreenodeDatabase(getBaseContext());
                                        tnd.getStateData(ArrayListClass.country.get(b).country_id);
                                        tnd.CloseDB();
                                    }catch (Exception e) {
                                        // TODO: handle exception
                                    }

                                    if(showstate){

                                        if(ArrayListClass.state.size()>0){

                                            for(int i = 0; i<ArrayListClass.state.size(); i++){

                                                final LinearLayout ll2 = new LinearLayout(getBaseContext());
                                                ll2.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
                                                ll2.setGravity(Gravity.LEFT|Gravity.CENTER);
                                                ll2.setBackgroundColor(Color.WHITE);
                                                ll2.setOrientation(LinearLayout.VERTICAL);                  
                                                ll2.setPadding(50, 1, 1, 1);

                                                final TextView tv2 = new TextView(getBaseContext());
                                                tv2.setText(ArrayListClass.state.get(i).state + "");
                                                tv2.setTextSize(size);
                                                tv2.setTextColor(Color.BLACK);
                                                tv2.setGravity(Gravity.LEFT|Gravity.CENTER);
                                                tv2.setBackgroundColor(Color.WHITE);
                                                tv2.setOnClickListener(new OnClickListener() {                              
                                                    @Override
                                                    public void onClick(View v) {
                                                        // TODO Auto-generated method stub

                                                        try{
                                                            tnd = new TreenodeDatabase(getBaseContext());
                                                            tnd.getRegionData(ArrayListClass.state.get(b).state_id);
                                                            tnd.CloseDB();
                                                        }catch (Exception e) {
                                                            // TODO: handle exception
                                                        }

                                                        if(showregion){

                                                            if(ArrayListClass.region.size()>0){

                                                                for(int i = 0; i<ArrayListClass.region.size(); i++){

                                                                    final LinearLayout ll3 = new LinearLayout(getBaseContext());
                                                                    ll3.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
                                                                    ll3.setGravity(Gravity.LEFT|Gravity.CENTER);
                                                                    ll3.setBackgroundColor(Color.WHITE);
                                                                    ll3.setOrientation(LinearLayout.VERTICAL);                  
                                                                    ll3.setPadding(50, 1, 1, 1);

                                                                    final TextView tv3 = new TextView(getBaseContext());
                                                                    tv3.setText(ArrayListClass.region.get(i).region + "");
                                                                    tv3.setTextSize(size);
                                                                    tv3.setTextColor(Color.BLACK);
                                                                    tv3.setGravity(Gravity.LEFT|Gravity.CENTER);
                                                                    tv3.setBackgroundColor(Color.WHITE);
                                                                    tv3.setOnClickListener(new OnClickListener() {                              
                                                                        @Override
                                                                        public void onClick(View v) {
                                                                            // TODO Auto-generated method stub

                                                                            try{
                                                                                tnd = new TreenodeDatabase(getBaseContext());
                                                                                tnd.getAreaData(ArrayListClass.region.get(b).region_id);
                                                                                tnd.CloseDB();
                                                                            }catch (Exception e) {
                                                                                // TODO: handle exception
                                                                            }

                                                                            if(showarea){

                                                                                if(ArrayListClass.area.size()>0){

                                                                                    for(int i = 0; i<ArrayListClass.area.size(); i++){

                                                                                        LinearLayout ll4 = new LinearLayout(getBaseContext());
                                                                                        ll4.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
                                                                                        ll4.setGravity(Gravity.LEFT|Gravity.CENTER);
                                                                                        ll4.setBackgroundColor(Color.WHITE);
                                                                                        ll4.setOrientation(LinearLayout.VERTICAL);                  
                                                                                        ll4.setPadding(50, 1, 1, 1);

                                                                                        final TextView tv4 = new TextView(getBaseContext());
                                                                                        tv4.setText(ArrayListClass.area.get(i).area+ "");
                                                                                        tv4.setTextSize(size);
                                                                                        tv4.setTextColor(Color.BLACK);
                                                                                        tv4.setGravity(Gravity.LEFT|Gravity.CENTER);
                                                                                        tv4.setBackgroundColor(Color.WHITE);                                                                           
                                                                                        tv4.setOnClickListener(new OnClickListener() {                                                                              
                                                                                            @Override
                                                                                            public void onClick(View v) {
                                                                                                // TODO Auto-generated method stub  

                                                                                                Log.e("Log","clicked" + tv4.getText().toString());

                                                                                            Toast.makeText(getBaseContext(), tv4.getText().toString(), Toast.LENGTH_SHORT).show();

                                                                                            }
                                                                                        });

                                                                                        ll4.addView(tv4);
                                                                                        ll3.addView(ll4);

                                                                                    }

                                                                                }

                                                                                showarea = false;

                                                                            }else{
                                                                                ArrayListClass.area.clear();

                                                                                ll3.removeAllViews();

                                                                                ll3.addView(tv3);

                                                                                showarea = true;
                                                                            }

                                                                            //tv3.setClickable(false);
                                                                        }
                                                                    });

                                                                    ll3.addView(tv3);
                                                                    ll2.addView(ll3);
                                                                    //tv3.setClickable(false);
                                                                }

                                                            }

                                                            showregion = false;

                                                        }else{

                                                            ArrayListClass.region.clear();
                                                            ArrayListClass.area.clear();

                                                            ll2.removeAllViews();

                                                            ll2.addView(tv2);

                                                            showregion = true;
                                                        }

                                                        //tv2.setClickable(false);

                                                    }
                                                });

                                                ll2.addView(tv2);
                                                ll1.addView(ll2);
                                                //tv2.setClickable(false);
                                            }

                                        }

                                        showstate = false;

                                    }else{

                                        ArrayListClass.state.clear();
                                        ArrayListClass.region.clear();
                                        ArrayListClass.area.clear();

                                        ll1.removeAllViews();

                                        ll1.addView(tv1);

                                        showstate = true;

                                    }

                                    //tv1.setClickable(false);

                                }
                            });

                            ll1.addView(tv1);
                            ll.addView(ll1);
                            //tv1.setClickable(false);
                        }

                    }

                    showcountry = false;

                }else{

                    ArrayListClass.state.clear();
                    ArrayListClass.region.clear();
                    ArrayListClass.area.clear();
                    ArrayListClass.country.clear();

                    ll.removeAllViews();

                    ll.addView(tv);

                    showcountry = true;
                }

                //tv.setClickable(false);

            }
        });

        ll.addView(tv);

        llAdd.addView(ll);
    }

    Log.e("Log","Check");

}

public void insertMethod(){

    tnd = new TreenodeDatabase(this);

    StringBuilder st = new StringBuilder();
    st.append("insert into Continent(Name) values('" + "Continent1" + "');") ;
    tnd.insert(st.toString());

    tnd.CloseDB();
    tnd = new TreenodeDatabase(this);
    StringBuilder st1 = new StringBuilder();
    st1.append("insert into Continent(Name) values('" + "Continent2" + "');") ;
    tnd.insert(st1.toString());

    tnd.CloseDB();
    tnd = new TreenodeDatabase(this);
    StringBuilder st2 = new StringBuilder();

    st2.append("insert into Country(Name,Rid) values('" + "Country1A" + "','" + "1" + "');") ;
    tnd.insert(st2.toString());

    tnd.CloseDB();
    tnd = new TreenodeDatabase(this);
    StringBuilder st3 = new StringBuilder();

    st3.append("insert into Country(Name,Rid) values('" + "Country1B" + "','" + "1" + "');") ;
    tnd.insert(st3.toString());

    tnd.CloseDB();
    tnd = new TreenodeDatabase(this);
    StringBuilder st4 = new StringBuilder();

    st4.append("insert into Country(Name,Rid) values('" + "Country2A" + "','" + "2" + "');") ;
    tnd.insert(st4.toString());

    tnd.CloseDB();
    tnd = new TreenodeDatabase(this);
    StringBuilder st5 = new StringBuilder();

    st5.append("insert into Country(Name,Rid) values('" + "Country2B" + "','" + "2" + "');") ;
    tnd.insert(st5.toString());

    tnd.CloseDB();
    tnd = new TreenodeDatabase(this);
    StringBuilder st6 = new StringBuilder();

    st6.append("insert into State(Name,Rid) values('" + "State1" + "','" + "1" + "');") ;
    tnd.insert(st6.toString());

    tnd.CloseDB();
    tnd = new TreenodeDatabase(this);
    StringBuilder st7 = new StringBuilder();

    st7.append("insert into State(Name,Rid) values('" + "State2" + "','" + "1" + "');") ;
    tnd.insert(st7.toString());

    tnd.CloseDB();
    tnd = new TreenodeDatabase(this);
    StringBuilder st8 = new StringBuilder();

    st8.append("insert into Region(Name,Rid) values('" + "Region1" + "','" + "1" + "');") ;
    tnd.insert(st8.toString());

    tnd.CloseDB();
    tnd = new TreenodeDatabase(this);
    StringBuilder st9 = new StringBuilder();

    st9.append("insert into Area(Name,Rid) values('" + "Area1" + "','" + "1" + "');") ;
    tnd.insert(st9.toString());

    tnd.CloseDB();

   }  

} 
```

请帮助我，我想我已经接近成功了..这不太好。我错过了什么。

**编辑**

**定位输出**

> 09-20 16:27:52.254: E/Database(5598): close() 从未在数据库'/data/data/com.android.treenode/databases/treenode.sqlite3' 09-20 16:27 上显式调用： 52.254: E/Database(5598): android.database.sqlite.DatabaseObjectNotClosedException: 应用程序没有关闭在此处打开的游标或数据库对象 09-20 16:27:52.254: E/Database(5598): at android.database .sqlite.SQLiteDatabase.(SQLiteDatabase.java:1960) 09-20 16:27:52.254: E/Database(5598): 在 android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:906) 09-20 16: 27:52.254: E/Database(5598): 在 android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:940) 09-20 16:27:52.254: E/Database(5598): 在 android.database.sqlite .SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:933) 09-20 16:27:52.254: E/Database(5598): 在 android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:614) 09-20 16:27:52.254: E/Database(5598): 在 android.database.sqlite.SQLiteOpenHelper.getWritableDatabase (SQLiteOpenHelper.java:118) 09-20 16:27:52.254: E/Database(5598): at com.android.treenode.TreenodeDatabase.(TreenodeDatabase.java:23) 09-20 16:27:52.254: E/数据库（5598）：在 com.android.treenode.TreenodeActivity$1$1$1.onClick（TreenodeActivity.java:810）09-20 16:27:52.254：E/数据库（5598）：在 android.view.View.performClick（ View.java:2533) 09-20 16:27:52.254: E/Database(5598): 在 android.view.View$PerformClick.run(View.java:9320) 09-20 16:27:52.254: E/数据库（5598）：在 android.os.Handler.handleCallback（Handler.java:587）09-20 16:27:52.254：E/数据库（5598）：在 android.os.Handler。dispatchMessage(Handler.java:92) 09-20 16:27:52.254: E/Database(5598): 在 android.os.Looper.loop(Looper.java:150) 09-20 16:27:52.254: E/数据库（5598）：在 android.app.ActivityThread.main（ActivityThread.java:4385）09-20 16:27:52.254：E/数据库（5598）：在 java.lang.reflect.Method.invokeNative（本机方法） 09-20 16:27:52.254: E/Database(5598): at java.lang.reflect.Method.invoke(Method.java:507) 09-20 16:27:52.254: E/Database(5598): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 09-20 16:27:52.254: E/Database(5598): at com.android.internal.os.ZygoteInit.main(ZygoteInit .java:607) 09-20 16:27:52.254: E/Database(5598): at dalvik.system.NativeStart.main(Native Method)150) 09-20 16:27:52.254: E/Database(5598): 在 android.app.ActivityThread.main(ActivityThread.java:4385) 09-20 16:27:52.254: E/Database(5598): 在java.lang.reflect.Method.invokeNative(Native Method) 09-20 16:27:52.254: E/Database(5598): at java.lang.reflect.Method.invoke(Method.java:507) 09-20 16 :27:52.254: E/Database(5598): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 09-20 16:27:52.254: E/Database(5598): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) 09-20 16:27:52.254: E/Database(5598): at dalvik.system.NativeStart.main(Native Method)150) 09-20 16:27:52.254: E/Database(5598): 在 android.app.ActivityThread.main(ActivityThread.java:4385) 09-20 16:27:52.254: E/Database(5598): 在java.lang.reflect.Method.invokeNative(Native Method) 09-20 16:27:52.254: E/Database(5598): at java.lang.reflect.Method.invoke(Method.java:507) 09-20 16 :27:52.254: E/Database(5598): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 09-20 16:27:52.254: E/Database(5598): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) 09-20 16:27:52.254: E/Database(5598): at dalvik.system.NativeStart.main(Native Method)52.254: E/Database(5598): at java.lang.reflect.Method.invoke(Method.java:507) 09-20 16:27:52.254: E/Database(5598): at com.android.internal.os .ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 09-20 16:27:52.254: E/Database(5598): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) 09- 20 16:27:52.254：E/数据库（5598）：在 dalvik.system.NativeStart.main（本机方法）52.254: E/Database(5598): at java.lang.reflect.Method.invoke(Method.java:507) 09-20 16:27:52.254: E/Database(5598): at com.android.internal.os .ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 09-20 16:27:52.254: E/Database(5598): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) 09- 20 16:27:52.254：E/数据库（5598）：在 dalvik.system.NativeStart.main（本机方法）

我认为这是由于数据库没有正确关闭。（我处理这个）

但是代码有时无法正常工作，有时会显示子级别，但有时不能。有时它会显示双倍值。

# android - android - 没有得到电话号码

> ID：12510965
> 
> 赞同：1
> 
> 时间：2012-09-20T10:41:56.470
> 
> 标签：android, telephony

我正在尝试使用以下代码获取电话号码，

```
TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
phoneImei = tm.getDeviceId();
phoneNo = tm.getLine1Number(); 
```

但是，它返回空值。当我检查设置时，电话号码是未知的。我正在使用银河系。知道我该如何解决这个问题。？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T11:08:33.990

试试这个 ：

```
 import android.app.Activity;  
  import android.content.Context;  
  import android.os.Bundle;  
  import android.telephony.TelephonyManager;  
  import android.util.Log;  
  import android.widget.Toast;  

  public class GetMyPhoneNoActivity extends Activity {  
   /** Called when the activity is first created. */  
   @Override  
   public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    setContentView(R.layout.main);          

    String number =getMyPhoneNO();  
    Toast.makeText(getApplicationContext(), "My Phone No is: "  
    +number, Toast.LENGTH_SHORT).show();  
    Log.v("Debug", number);          
   }  

private String getMyPhoneNO(){  
    TelephonyManager mTelephonyMgr;    
   mTelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);     

    String yourNumber = mTelephonyMgr.getLine1Number();  
 //return yourNumber;   
} 
```

}

在您的清单中：

```
 <uses-permission android:name="android.permission.READ_PHONE_STATE">  
    </uses-permission> 
```

这会很好地工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T11:54:59.723

使用 SIM 卡序列号代替电话号码，该序列号始终存在并且始终是有效值。

```
 telephonyManager.getSimSerialNumber(); 
```

SIM 序列号至少在运营商内部是唯一的。所以结合

```
 telephonyManager.getNetworkOperator(); 
```

您将拥有一个国家/地区内订阅者的唯一标识符。这与

```
 telephonyManager.getNetworkCountryIso(); 
```

您将拥有订阅者的全球唯一标识符。

希望这会有所帮助。

干杯。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T10:56:00.937

这是我的代码：

```
 import java.lang.reflect.Method;

 import android.app.NotificationManager;
 import android.content.BroadcastReceiver;
 import android.content.Context;
 import android.content.Intent;
 import android.content.SharedPreferences;
 import android.database.Cursor;
 import android.media.AudioManager;
 import android.os.Bundle;
 import android.telephony.TelephonyManager;

 import com.android.internal.telephony.ITelephony;

  public class BlockBlackListIncomingNumber extends BroadcastReceiver {
 private Context cont;
 private Transactions transactions;
 private ITelephony itelephony;;

 int i = 1;

    /* When any incoming calls come to our cellphone number */
@Override
public void onReceive(Context context, Intent intent)
            {
    transactions = new Transactions(context); 
                // Create an object of transaction class.
    this.cont = context; 
                 // Refer to current object of Context.
    Bundle extras = intent.getExtras(); 
                 // Getting Bundles in extras.
    String iNumber = extras.getString(TelephonyManager.EXTRA_INCOMING_NUMBER); 
                 // Getting Incoming Number by which call comes that’s why we used TelephoyManager.EXTRA_INCOMING_NUMBER. 
```

iNumber 将是传入号码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T10:45:22.443

您需要在 AndroidManifest.xml 文件中添加以下权限

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T11:45:15.353

尝试使用 AIDL 实现 ITelephony 接口

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-05T13:22:33.680

在某些国家/地区，您不会使用您的代码获得电话号码

TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE); phoneImei = tm.getDeviceId(); phoneNo = tm.getLine1Number();

您必须从用户那里获得输入。但是，要验证该号码，您需要在清单文件中包含发送 SMS 和接收 SMS 权限。

使用发送者和接收者的号码以及加密消息（您编写/编码）进行验证，您可以验证用户的电话号码。Whatsapp 就是这样做的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-19T06:15:00.410

> 如果您没有获得行号，您可以使用此代码

```
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                    List<SubscriptionInfo> _sb = SubscriptionManager.from(getApplicationContext()).getActiveSubscriptionInfoList();
                    for (int i = 1; i < _sb.size(); i++) {
                        SubscriptionInfo info = _sb.get(i);
                        Log.d("phone", "Mobile_number " + info.getNumber());

                    }
                } 
```

# iphone - AVAudioPlayer：第二个播放器停止背景声音

> ID：12510971
> 
> 赞同：0
> 
> 时间：2012-09-20T10:42:17.037
> 
> 标签：iphone, ios, avaudioplayer

在我的应用程序中，只要应用程序开始播放无限循环的背景声音，我就会启动 AVAudioPlayer。此背景声音应在应用程序打开的整个过程中播放。

当我打开应用程序时，背景声音正确启动，但是当我创建另一个播放器并启动另一个声音（例如当我触摸显示屏时）时，第二个声音开始播放并且背景声音由于某种原因停止。

```
// This should start the background sound. _audioPlayer is declared in the header file.
_audioPlayer = [[AudioPlayer alloc] init];
[_audioPlayer soundPlay:@"/rainforestambience.wav" withLoops:-1];

// Starts another sound later.
AudioPlayer *monkeyPlayer = [[AudioPlayer alloc] init];
[monkeyPlayer soundPlay:@"/jungle1.wav" withLoops:1];

// Play function in my AudioPlayer class.
AVAudioPlayer *player;
- (void) soundPlay:(NSString *)filePath withLoops: (int)loops
{
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:filePath];
    NSLog(@"Path to play: %@", resourcePath);
    NSError* err;

    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
          [NSURL fileURLWithPath:resourcePath] error:&err];

    player.numberOfLoops = loops;
    [player prepareToPlay];

    if(err) {
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    } else {
        [player play];
    }
} 
```

编辑：通过更改我的 AudioPlayer 类中的一行来修复它。

而不是拥有

```
AVAudioPlayer *player; 
```

在 AudioPlayer.m 文件中，我将变量移动到声明空间的头文件中。现在它可以按预期完美运行。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:32:11.470

我猜你应该通过 performSelectorOnMainThread 在不同的线程中调用另一个玩家。

两个 AVAudioPlayer 实例可能会给您带来此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:39:53.837

> 好吧，你说，有 2 个 AVAudioPlayers。
> 
> 我认为第一个玩家是 _audioPlayer 广告第二个玩家是 monkeyPlayer
> 
> _audioPlayer 正在播放背景。当您调用第二个声音（monkeyPlayer）时，只需停止 _audioPlaer
> 
> IE，

```
[_audioPlayer stopPlay];
 [monkeyPlayer Play]; 
```

它将停止背景音乐。

# mongodb - 了解 mongo db 解释

> ID：12510974
> 
> 赞同：28
> 
> 时间：2012-09-20T10:42:43.510
> 
> 标签：mongodb, mongodb-query, nosql

我发出了一个查询并试图在 mongo 控制台上解释它并得到

```
"isMultiKey" : true,
"n" : 8,
"nscannedObjects" : 17272,
"nscanned" : 17272,
"nscannedObjectsAllPlans" : 21836,
"nscannedAllPlans" : 21836,
"scanAndOrder" : true,
"indexOnly" : false,
"nYields" : 0,
"nChunkSkips" : 0,
"millis" : 184, 
```

大多数事情都在[http://www.mongodb.org/display/DOCS/Explain](http://www.mongodb.org/display/DOCS/Explain)中进行了解释，但我不明白 nscannedObjectsAllPlans, nscannedAllPlans 是什么意思。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-20T12:48:53.567

`nscanned`并`nscannedObjects`报告获胜[查询计划](https://docs.mongodb.com/manual/core/query-plans/)的结果。

`nscannedAllPlans`并`nscannedObjectsAllPlans`报告所有计划的结果。

[文档](https://docs.mongodb.com/manual/reference/explain-results/index.html#explain.executionStats.totalKeysExamined)

> 扫描的索引条目数。`totalKeysExamined`对应于MongoDB 早期版本中`nscanned`返回的字段。`cursor.explain()`

例如：

```
t = db.jstests_explainb;
t.drop();

t.ensureIndex( { a:1, b:1 } );
t.ensureIndex( { b:1, a:1 } );

t.save( { a:0, b:1 } );
t.save( { a:1, b:0 } );

// Older mongodb (< 3.0? )
t.find( { a:{ $gte:0 }, b:{ $gte:0 } } ).explain( true );
    {
      "isMultiKey": false,
      "n": 2,
      "nscannedObjects": 2,
      "nscanned": 2,
      "nscannedObjectsAllPlans": 6,
      "nscannedAllPlans": 6,
      "scanAndOrder": false,
      "indexOnly": false,
      "nYields": 0,
      "nChunkSkips": 0,
      "millis": 2,
    ...
    }

// MongoDB 4.4
t.find( { a:{ $gte:0 }, b:{ $gte:0 } } ).explain( true );
{
    "queryPlanner" : {
        "plannerVersion" : 1,
        "namespace" : "test.jstests_explainb",
        ...
        "queryHash" : "CB67518C",
        "planCacheKey" : "5E76CDD1",
        "winningPlan" : {
            "stage" : "FETCH",
            "inputStage" : {
                "stage" : "IXSCAN",
                "keyPattern" : {
                    "a" : 1,
                    "b" : 1
                },
                "indexName" : "a_1_b_1",
            }
        },
        "rejectedPlans" : [
            {
                "stage" : "FETCH",
                "inputStage" : {
                    "stage" : "IXSCAN",
                    "keyPattern" : {
                        "b" : 1,
                        "a" : 1
                    },
                    "indexName" : "b_1_a_1",
                }
            }
        ],
        ...
    },
    "executionStats" : {
        "executionSuccess" : true,
        "nReturned" : 2,
        "executionTimeMillis" : 0,
        "totalKeysExamined" : 2, // <-- same as `nscanned`
        "totalDocsExamined" : 2, // <--
        "executionStages" : { ... }
        "allPlansExecution" : [
            {...},
            {...}
        ]
    } 
```

# .htaccess - 使用 htaccess 重定向规则

> ID：12510978
> 
> 赞同：2
> 
> 时间：2012-09-20T10:42:55.827
> 
> 标签：.htaccess, redirect

我正在寻找重定向的方法

`/threads/2486-dell-inspiron-545-grafikkarte-austauschen/3page`到

```
threads/2486-dell-inspiron-545-grafikkarte-austauschen/page3 
```

我一直在开始写规则，但我不确定这样做是否正确

```
RewriteRule ^threads/([0-9]+)-([a-zA-Z0-9_-]+)/$page  /threads/$1-$2/page$3 [R,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:20:34.363

你非常接近，你只需要修改你的正则表达式。

使用 mod_alias：

```
RedirectMatch 301 ^/threads/([0-9]+)-([a-zA-Z0-9_-]+)/([0-9]+)page$ /threads/$1-$2/page$3 
```

或使用 mod_rewrite：

```
RewriteRule ^/?threads/([0-9]+)-([a-zA-Z0-9_-]+)/([0-9]+)page$ /threads/$1-$2/page$3 [L,R=301] 
```

请注意，您需要将重写规则置于 htaccess 文件中可能拥有的任何其他路由规则之上，因为您希望在处理或路由 URI 之前应用此规则。此外，如果您混合使用 mod_alias 重定向和 mod_rewrite 路由，您可能只想坚持使用 mod_rewrite。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:45:14.523

尝试

```
Redirect 301 /threads/2486-dell-inspiron-545-grafikkarte-austauschen/3page /threads/2486-dell-inspiron-545-grafikkarte-austauschen/page3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:46:59.607

您没有创建第三组，请尝试以下操作：

```
RewriteRule ^/threads/([0-9]+)-([a-zA-Z0-9_-]+)/([0-9]+)page  /threads/$1-$2/page$3 [R,L] 
```

试图更广泛

```
RewriteRule ^(.+?)/threads/([0-9]+)-([a-zA-Z0-9_-]+)/([0-9]+)page  $1/threads/$2-$3/page$4 [R,L] 
```

[此处](http://rubular.com/r/T8QtAV6kG5)正则表达式正在工作，请注意`/`已转义。

# flash - 开发实时图形编辑器

> ID：12510983
> 
> 赞同：0
> 
> 时间：2012-09-20T10:43:10.157
> 
> 标签：flash, web-applications, graphics, drawing

我需要在我的 Flash Web 应用程序中嵌入*矢量*图形编辑器。图形编辑器应该能够执行以下操作：

*   画线（画笔工具）
*   擦除
*   比例图
*   创建文本块
*   使用图像作为绘图的背景（上传图像并将其用作背景）。

用户所做的更改应发送到其他活动客户端。我试图找到以下问题的答案。

1.  画线应该如何实现？我的意思是：用户在屏幕上移动鼠标（鼠标左键向下），我应该如何处理 MOUSE_MOVE 事件？请注意，在绘制之后，用户可能希望缩放绘图。
2.  擦除应该如何实现？请注意，我无法将擦除实现为绘制白线（因为我可以有背景）。
3.  存放拉丝翼的最佳方法是什么？序列化一组命令？
4.  最后，如何通知其他客户有关更改的信息？

将感谢任何关于如何创建类似于描述的图形编辑器的文章或教程（无论在什么平台或编程语言上）。

请不要害羞 :) 任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:40:08.440

我会尝试回答一些问题，因为我从来没有做过所有的事情。

1.  取决于工具，最简单的实现是仅绘制直线的铅笔工具。更复杂的工具，比如铅笔，应该跟随你可以移动的锚点，实际上并没有那么不同，事实上，很容易，因为你需要简单地使用从用户那里收到的锚点参数。最复杂的工具是跟随画笔，因为它在画布上任意移动。您需要为矢量形状实现“联合”操作。这并不容易，需要一些数学才能找到交点。必须有专门的文献来描述如何做到这一点。您需要创建更小的形状，以离散间隔对鼠标指针的位置进行采样，然后将它们“联合”在一起。

2.  擦除与上述画笔工具非常相似。

3.  我会写 SWF 格式，最坏的情况 - SVG。SWF 的优点是很容易在同一程序/环境中使用图纸。SVG 的优点是即使在没有 Flash 的情况下也可以使用它。

也许一个很好的起点可能是查看 Inkscape 源代码（可能是最流行的开源矢量图形编辑器）。坦率地说......这是一个有缺陷/不稳定的程序，但至少其中一些应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:50:54.193

这听起来很难。这是一种起初看起来很容易的项目，但实际上要获得与真正的矢量编辑器相当的任何东西真的很复杂。

I would try to find an existing library to embed rather than doing it myself. I tried a few searches but couldn't find a functional vector editor in Flash. On the other hand, there are plenty in HTML5/Javascript like [svg-edit](http://code.google.com/p/svg-edit/). Maybe you can figure out a way to launch the Javascript editor and funnel the results back into Flash?

# jboss - JBoss远程调试问题

> ID：12510991
> 
> 赞同：0
> 
> 时间：2012-09-20T10:43:40.797
> 
> 标签：jboss, remote-debugging

我将以下行添加到激活远程调试的 run.sh 文件中：

设置 JAVA_OPTS=-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y %JAVA_OPTS%

但是，它会导致服务器无法重新启动！我什至没有遇到异常，因为 server.log 文件根本没有更新！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:58:46.557

您在 *nix OS 的 shell 脚本中使用 Windows 语法。您需要在 run.sh 中添加类似这样的内容：

```
JAVA_OPTS="$JAVA_OPTS -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=n"
export JAVA_OPTS 
```

# android - 具有相同代码库的android项目中的不同常量（库项目）

> ID：12510992
> 
> 赞同：0
> 
> 时间：2012-09-20T10:43:41.257
> 
> 标签：android

我有一个 android 库项目。两个项目 A 和 B 正在使用该库项目代码。

我在共享 android 库项目 RequestAdFromAdmob(constantAdId) 中有这段代码

我希望为项目 A 和项目 B 使用不同的广告 ID，那么最佳做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:19:50.723

将您的类/项目的散列名称传递给库

# python - procname.so的创建和使用

> ID：12510993
> 
> 赞同：0
> 
> 时间：2012-09-20T10:44:00.350
> 
> 标签：python, import, makefile

我想通过使用[http://code.google.com/p/procname/来编辑我的 python 脚本的进程名称](http://code.google.com/p/procname/)

我下载了 procname 的源文件，将内容提取到我的脚本目录中，并将 makefile 更改为：

```
PYTHON?=python3
TESTFLAGS=-p -v
TESTOPTS=
SETUPFLAGS=
GCC=gcc
VER=3.1
DESTDIR=. 
```

然后我做了`make`并`procname.so`在我的脚本所在的同一目录中创建。在我添加的脚本`import procname`中，并尝试通过`procname.setprocname('test_name.py')`.

现在我得到一个错误：

```
import procname  
ImportError: /path/to/script_directory/procname.so: undefined symbol: Py_InitModule3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:44:08.610

`procname`扩展模块在 Python 3 中不起作用。 使用`procnamemodule.c`Python `Py_InitModule3`3 中不再存在。

# asp.net-mvc-3 - MVC 3 - 如何知道查询是否返回 0 行

> ID：12510996
> 
> 赞同：0
> 
> 时间：2012-09-20T10:44:11.600
> 
> 标签：asp.net-mvc-3

可能很容易，但我无法解决它。如果数据库中不存在请求的 id，我想将用户重定向到错误页面。我的代码：

```
public ActionResult Details(int id)
    {

        DetailsAdViewModel DAVM = new DetailsAdViewModel();
        DAVM.Ad = db.Ads.Include("Images").Where(a => a.AdId == id).First();
        DAVM.FirstImage = db.Images.Where(a => a.AdId == id).OrderBy(a => a.ImageId).Take(1);

        // make sure the ad isn't deleted or that it really exists
        if (DAVM.Ad == null)
        {
            return RedirectToAction("ShowError", "Error", new { errorCode = "adDeleted" });
        }

        return View(DAVM);
    } 
```

这不起作用，如果我输入错误的 ID，则会出现服务器错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:45:24.063

使用`.FirstOrDefault()`而不是`.First()`. 如果没有找到记录，这将返回 null 而不是抛出异常：

```
DAVM.Ad = db.Ads.Include("Images").FirstOrDefault(a => a.AdId == id); 
```

现在您可以检查是否`DAVM.Ad`为空：

```
if (DAVM.Ad == null)
{
    return RedirectToAction("ShowError", "Error", new { errorCode = "adDeleted" });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:50:18.467

找到了解决方案：

公共动作结果详细信息（int id）{

```
 if (db.Ads.Any(a => a.AdId == id))
        {
            DetailsAdViewModel DAVM = new DetailsAdViewModel();
            DAVM.Ad = db.Ads.Include("Images").Where(a => a.AdId == id).First();
            DAVM.FirstImage = db.Images.Where(a => a.AdId == id).OrderBy(a => a.ImageId).Take(1);

            return View(DAVM);
        }
        else
        {
            return RedirectToAction("ShowError", "Error", new { errorCode = "adDeleted" });
        }
    } 
```