# StackOverflow 问答 16170000-16170999

# php - 从 csv 转换为包含 url 的 HTML 表

> ID：16170000
> 
> 赞同：0
> 
> 时间：2013-04-23T12:59:31.563
> 
> 标签：php, html, csv

下面的代码将 .csv 表转换为 html：每个单元格的内容都按原样显示，纯文本。但是我需要在 HTML 中显示链接文本，我该怎么做？

例如，我的 csv 文件有 4 列，如下所示：

```
_________________________________________________________________________
|  SITENAME  |          URL        |      PAGENAME    |       URL2       |
--------------------------------------------------------------------------
|  mysite    |http://www.mysite.com|    mynicepage    | http://www.pg.com|
--------------------------------------------------------------------------
|  hersite   |http://www.site.com  |    hernicepage   | http://www.ab.com|
-------------------------------------------------------------------------- 
```

生成的 HTML 表应该有 2 列：SITENAME 和 PAGENAME。这两列的每个元素都应打开右侧出现的相应链接（在新页面中）。怎么做？

提前致谢。

```
<?php
$row = 1;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
 while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $num = count($data);
    if ($row == 1) {
        echo '<tr>';
    }else{
        echo '<tr>';
    }

    for ($c=0; $c < $num; $c++) {

        if(empty($data[$c])) {
           $value = "&nbsp;";
        }else{
           $value = $data[$c];
        }
        if ($row == 1) {
// ------------- head
            echo '<td style="border-top: 1px solid rgb(111,180,224); border-left: 1px solid rgb(111,180,224); border-bottom: 1px solid rgb(111,180,224);"  align="left" bgcolor="#0066cc" height="36" valign="middle" ><b><font color="#ffffff" size="2">&nbsp;&nbsp;'.$value.'&nbsp;&nbsp;</font></b></td>';
        }else{

// ------------- body
            echo '<td style=" border-bottom: 1px solid rgb(111,180,224);" sdval="9" sdnum="1040;" align="left" bgcolor="#ffffff" height="25"  valign="middle"><font color="#000000" size="2">&nbsp;&nbsp;'.$value.'&nbsp;&nbsp;</font></td>';
        }
    }

    if ($row == 1) {
        echo '</tr>';
    }else{
        echo '</tr>';
    }
    $row++;
}

echo '</tbody></table>';
echo '</center>';   
fclose($handle);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:02:52.230

检查*当前*值是否为 URL 并用`A HREF`标签包装：

```
<a href='$value'>$value</a> 
```

# python - 如何更新存储在 django 缓存中的字典？

> ID：16170002
> 
> 赞同：4
> 
> 时间：2013-04-23T12:59:33.210
> 
> 标签：python, django, memcached, youtube-api

所以我将登录用户上传的 youtube 视频元数据存储在 django 的缓存中。元数据看起来像这样：

```
{'user': {'channels': [{'id': 1, 'etag': '2', 'videos': [{'id': '1', 'etag': '2'},]},]} 
```

每个不同的用户都有自己的元数据。现在我想更新存储在缓存中的这些数据（例如更新一些频道视频）。我可以做类似的事情吗？

```
cache.set('user', channels[0]['videos']=[new list], 30)? 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:24:44.600

鉴于 Django 的缓存框架支持多种后端，我怀疑是否可以直接在缓存中操作 Python 对象的内部，因为它需要后端来理解 Python 对象。你能得到的最接近的是......

```
value = cache.get('user')
value['channels'][0]['videos'] = <new list>
cache.set('user', value) 
```

如果您需要更精细的更新粒度，则必须为每个用户使用多个密钥，例如...

```
username = 'user'
videos_key_name = '%s/videos' % username
channels_key_name = '%s/channels' % username
cache.set(videos_key_name) = whatever
cache.set(channels_key_name) = whatever 
```

...尽管这将需要更改结构的设计。

# sql - 如何安装 RMySQL 包

> ID：16170005
> 
> 赞同：1
> 
> 时间：2013-04-23T12:59:35.260
> 
> 标签：sql, r, rmysql

我需要安装 RMySQL 包，但我在安装包菜单上找不到它，甚至选择不同的镜像它也不起作用……我该怎么办？

```
> install.packages("RMySQL")
Installing package(s) into ‘C:/Users/admin/Documents/R/win-library/2.15’
(as ‘lib’ is unspecified)

   package ‘RMySQL’ is available as a source package but not as a binary

Warning message:
package ‘RMySQL’ is not available (for R version 2.15.2) 
```

# .htaccess - .htaccess 使用 codeigniter rewrite 重写到子文件夹

> ID：16170006
> 
> 赞同：0
> 
> 时间：2013-04-23T12:59:36.173
> 
> 标签：.htaccess, codeigniter, mod-rewrite, codeigniter-2

我有一个需要存在于子文件夹中的网站

```
example.com/site 
```

但我正在尝试使用 .htaccess 删除任何包含 www 的链接（以确保 codeigniter csrf 不会引发错误），所以我添加了

```
RewriteCond %{HTTP_HOST} ^(www\.example\.com)?$
RewriteRule ^(.*)$ http://example.com/site/$1 [R=301,L] 
```

当指定了页面标识符时，这很有效，所以

```
www.example.com/site/book rewrites to example.com/site/book 
```

但是当没有指定页面标识符时，我得到一个 404

```
www.example.com/site rewrites to example.com/site//usr/local/pem/vhosts/103480/webspace/httpdocs/new 
```

我想知道是否有人可以指出我正确的方向？

这是我的完整 .htaccess

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.example\.com)?$
RewriteRule ^(.*)$ http://example.com/site/$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:27:24.473

你可以试试这个：

```
RewriteCond %{HTTP_HOST} ^www\.    [NC]
RewriteCond %{REQUEST_URI} ^/(.*)  [NC]
RewriteRule .*  http://example.com/%1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:59:13.063

也许，你只是缺少一个[`RewriteBase`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)

根据`.htaccess`文件的位置，尝试

```
RewriteBase / 
```

或者

```
RewriteBase /site 
```

*永远不要*在启用的情况下进行测试，有关详细信息`301`，请参阅此答案 [提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542) 。

# sql-server - 从 Windows XP 访问 SQL Server 2012

> ID：16170009
> 
> 赞同：1
> 
> 时间：2013-04-23T12:59:45.357
> 
> 标签：sql-server, windows-xp, sql-server-2012, compatibility

是否存在会阻止在 Windows XP 下运行的程序访问在同一域上的 Windows 2008 服务器上运行的 SQL Server 2012 Standard 实例的兼容性问题？

这可能是一个愚蠢的问题；*我知道在 XP 上安装*SQL Server 2012是不可能的，但我想不出它不允许程序访问的原因。

所以这只是在黑暗中刺伤。暂时只想知道*原则上*是否有问题；如果没有，我将尝试为我的特定设置提出一个最小的错误案例并提出一个单独的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:00:28.530

我刚刚确认，使用 ADO 和“Microsoft OLEDB provider for SQL Server”用 VB6 编写的应用程序可以连接到 SQL Server 2012 数据库。连接字符串如下所示：

```
Provider=SQLOLEDB.1;
Password=PasswordHere;
Persist Security Info=False;
User ID=SomeUserName;
Initial Catalog=SomeDatabase;
Data Source=SQL2012Instance 
```

操作系统是 Microsoft Windows XP Service Pack 3。

托管 SQL 数据库的操作系统是 Win-7。

数据库引擎是 Microsoft SQL Server 2012 - 11.0.2100.60 (x64)

# html - 仅使用 css 和 html 对隐藏内容的键盘可访问性

> ID：16170010
> 
> 赞同：7
> 
> 时间：2013-04-23T12:59:45.757
> 
> 标签：html, css, accessibility, keyboard-navigation

我怎样才能使这个片段可以访问？

```
<div tabindex="0">
    Show More
    <ul>
        <li><a href="#">Hidden Content</a></li>
        <li><a href="#">Hidden Content</a></li>
        <li><a href="#">Hidden Content</a></li>
    </ul>
</div> 
```

CSS：

```
div > ul
    {display:none;}
div:hover > ul, div:focus > ul
    {display:block;} 
```

我想知道是否可以`<ul>`在关注其内容的同时使用键盘导航使其可见

[http://jsfiddle.net/pJs2U/](http://jsfiddle.net/pJs2U/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T23:05:26.300

**2015 年更新**（感谢 @ [JayMee](https://stackoverflow.com/users/1017882/jaymee)）：当前 (2015-05-29)[编辑草稿](http://dev.w3.org/csswg/selectors-4/)不再包含此语法/功能。（最新的工作草案[仍然如此](http://www.w3.org/TR/2013/WD-selectors4-20130502/#subject)，但[它来自 2013-05-02](http://www.w3.org/TR/2013/WD-selectors4-20130502/)。）

* * *

为未来：

在[**Selectors Level 4**](http://www.w3.org/TR/selectors4/)[的工作草案中，](http://www.w3.org/TR/selectors4/)**有一种方法可以[指定](http://www.w3.org/TR/2012/WD-selectors4-20120823/#subject)选择器的主题（分别[在 Editor's Draft 中](http://dev.w3.org/csswg/selectors4/#subject)）。**

 **我猜当浏览器实现它时，以下内容应该可以工作（并且如果语法不会改变）：

```
!div a:focus
  {display:block;} 
```

它选择一个具有焦点元素作为子元素的`div`元素（注意选择器中的 ）。`!``a`

* * *

[对于 JQuery，有一个 polyfill](https://github.com/Idered/cssParentSelector)（但它使用旧语法，其中`!`用作后缀，而不是前缀）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:58:09.817

`<ul>`仅使用 HTML 和 CSS 无法更改子元素具有焦点时的 CSS 属性。

[您所描述的内容需要父选择器，但出于性能原因](http://snook.ca/archives/html_and_css/css-parent-selectors)，CSS3 不支持父选择器。

*注意*：您可能会考虑使用 javascript 解决方案。绝大多数屏幕阅读器用户[都启用了 javascript](http://webaim.org/projects/screenreadersurvey3/#javascript)。在 jQuery 中，它可能看起来像：

```
$('a').on('focus blur', function(e) {
  $(this).parents('ul').toggle();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:04:02.627

javascript解决方案是最好的。您不能依靠父母的焦点来显示孩子。一旦你移动焦点，这就会分崩离析。

从父级添加和删除一个类可以让您拥有更多的控制权。Dirk Ginader 将此称为可访问性的第五层[http://www.slideshare.net/ginader/the-5-layers-of-web-accessibility](http://www.slideshare.net/ginader/the-5-layers-of-web-accessibility)**

# plsql - 多条件查询

> ID：16170012
> 
> 赞同：1
> 
> 时间：2013-04-23T12:59:46.043
> 
> 标签：plsql, oracle10g

我的公司常驻 pl/sql 大师这周外出度假，我想我会在这里与大师一起讨论我的问题。我喜欢认为我的 SQL 处于中等水平，但是，我是新的 Oracle。

我有一个包含 3 列的表：Id[Numeric(9,2)]、FirstName[VarChar2(20)]、LastName[VarChar2(25)]

我正在尝试编写 1 个可以支持并返回以下内容的 sql 查询：

1.  如果 FirstName、LastName 和 Id 匹配 = 'Enrolled'
2.  如果 ID 缺失或不匹配 = '未注册'
3.  如果 Id & LastName 匹配，但 FirstName 不匹配 = 'FirstName 不匹配'
4.  如果 Id & FirstName 匹配，但 LastName 不匹配 = 'LastName 不匹配'
5.  如果 ID 匹配，但名字和姓氏不匹配 = '名字和姓氏不匹配'

我可以通过多个查询来做到这一点，但这有什么好玩的。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:17:08.907

使用联合返回单个结果集

或者

如果满足给定条件，则使用函数返回字符串：

StringIf（条件，valueToReturnIfTrue，valueToReturnIfFalse）

并在选择中使用它：

SELECT StringIf(t.fname = t.lname, 'true', 'false') as samenames, StringIf(..) as same2,

喜欢就点个赞吧：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:25:26.487

假设您有另一个`cmpTable ( cmpId, cmpFirstName, cmpLastName )`具有等效列定义的表和 cmpID PK 来存储候选集，

```
 select cmpId
         CASE 4 * eqID + 2 * eqFN + eqLN
             WHEN 7 THEN 'Enrolled'
             WHEN 5 THEN 'FirstName Does Not Match'
             WHEN 6 THEN 'LastName Does Not Match'
             WHEN 4 THEN 'FirstName & LastName Does Not Match'
             ELSE 'Not Enrolled'
         END
    from (
              select cmpId
                   , CASE ID        WHEN cmpID          THEN 1 ELSE 0 END    eqID
                   , CASE FirstName WHEN cmpFirstName   THEN 1 ELSE 0 END    eqFN
                   , CASE LastName  WHEN cmpLastName    THEN 1 ELSE 0 END    eqLN
                from table      t1
                join cmpTable   ct ON ( ct.cmpID = t1.ID )
               union
              select cmpId
                   , 0      eqID
                   , 0      eqFN
                   , 0      eqLN
                from cmpTable
               where not exists (
                        select 1 
                          from table t2
                         where t2.ID = cmpID
                     )
         ) 
       ; 
```

# ios - UITextField - 带有表情符号的最大字符长度

> ID：16170018
> 
> 赞同：1
> 
> 时间：2013-04-23T13:00:01.067
> 
> 标签：ios, objective-c, uitextfield

目前我正在使用这种方法

```
(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
     NSUInteger newLength = [textField.text length] + [string length] - range.length;
     if(newLength <= 25) {
         self.charsLeft.text = [NSString stringWithFormat:@"%d", 25 - newLength];
     }
     return (newLength > 25) ? NO : YES;
} 
```

`charsLeft`用户界面中显示的标签在哪里。

问题出现了`emoji`。如果用户输入`emoji`符号然后删除它，`newLength`将等于 1。所以用户会看到他只剩下 24 个字符。

我知道表情符号是代理对，但我不明白为什么如果你删除它而`range.length`不是

```
(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

将等于 1 而不是 2。

如何修复用户界面中的错误号码？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T17:50:19.817

我也遇到了这个问题，我找到了以下两种解决方案来解决这个问题尝试

```
- (void)textViewDidChange:(UITextView *)textView
{
    numberWordLabel.text = [NSString stringWithFormat:@"%d/25",textView.text.length];
} 
```

或者

使用 NSNotificationCenter （来自[UITextView 的 Text 属性上的 Key Value Observing Work 吗？](https://stackoverflow.com/questions/6333600/does-key-value-observing-work-on-uitextviews-text-property)）

```
- (id)init
{
    [super init];
    if (self)
    {
        NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
        [nc addObserver:self 
               selector:@selector(textDidChange:) 
                   name:UITextViewTextDidChangeNotification
                 object:nil];
    }
    return self;
}

- (void)dealloc 
{
    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
    [nc removeObserver:self];
}

- (void)textDidChange:(NSNotification *)note
{
    NSLog(@"Observation...");
} 
```

# javascript - Ajax 加载的数据不会更新布局

> ID：16170019
> 
> 赞同：0
> 
> 时间：2013-04-23T13:00:01.667
> 
> 标签：javascript, jquery, jquery-mobile, knockout.js

我使用 ajax 加载数据并使用 Knockout 填充我的页面。这一切都很好，当我将页面更改为`#contacts`它看起来不错时。但是，当#contacts 页面是我加载的初始页面时，我遇到了问题。例如，如果我加载`www.mydomain.com/#contacts`，加载的初始页面是列表页面，因此`ko.bindinghandlers.listview`没有任何影响。我尝试重新创建页面，但这也不能完全正常工作，并非所有样式都按应有的方式应用。我的列表视图不仅仅是一个列表视图，它还包含一个控件组，用于制作带有复选框的列表视图。

```
$("#contacts").page('destroy').page();

$('#contacts').bind('pageinit', function() {
    $('ul').listview();
}); 
```

如何使用 Ajax 加载数据，将其（使用 ko）附加到我`ul`并正确呈现。

`#contacts`如果不是初始页面加载 ，这就是它的外观：![正确的](https://i.stack.imgur.com/JDYv4.png)

这是我设法得到的最好结果，当`#contacts`初始页面加载时： ![不正确](https://i.stack.imgur.com/VJCvJ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:03:17.133

`refresh`每当您使用 JavaScript 更新列表视图时，您都需要调用它。

`$('.selector').listview('refresh');`

更多关于[文档](http://jquerymobile.com/demos/1.2.1/docs/lists/lists-methods.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:21:13.787

pageinit() 第一次加载时可能不会被调用。在那里添加一个 console.info 以确保......如果这是问题所在，那么只需确保它在 load() 或任何你喜欢的时候被调用。是吗？

# ruby-on-rails - 当资产通过亚马逊 CDN 提供服务时，推特引导图标未显示

> ID：16170020
> 
> 赞同：1
> 
> 时间：2013-04-23T13:00:05.660
> 
> 标签：ruby-on-rails, amazon-cloudfront, twitter-bootstrap-rails

我正在研究 RoR。使用 twitter bootstarp 进行我的网站前端设计。并计划使用亚马逊cdn作为资产托管。我将所有静态文件推送到亚马逊。我使用 amazon-s3 作为 cdn 来源。将精灵图像**glyphicons-halflings**和**glyphicons-halflings-white**推入 cdn 并将其导入**bootstrap_and_overrides.css.less**

```
@iconSpritePath: asset-path("icons/glyphicons-halflings");
@iconWhiteSpritePath: asset-path("icons/glyphicons-halflings-white"); 
```

但它不起作用。然后我为每个图像分别创建了一个单独的**icon.css.less创建样式。**

但是图标仍然没有生效。其他样式全部生效，只有图标有问题。任何人都可以提出任何建议。我完全坚持这一点。

谢谢问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:13:46.493

在你的 bootstrap.less 文件中确保你有这一行

```
@import "sprites.less"; 
```

这个less文件提供了类“icon”来使用这些图标。然后你可以这样使用它：

```
<i class="icon icon-file"></i> 
```

# php - PHP在睡眠功能之前回显，不起作用

> ID：16170028
> 
> 赞同：4
> 
> 时间：2013-04-23T13:00:20.183
> 
> 标签：php, sleep

我希望在执行睡眠功能之前（每次）在浏览器中输出回显。

以下代码不起作用

```
 set_time_limit(0);
    ob_implicit_flush(1);
    ob_start();
    echo "Start<Br>";
    ob_flush();

    for($i=0;$i<10;$i++){
        $randSlp=rand(1,3);
        //echo str_repeat(" ", 1024);
        echo "Sleeping for ".$randSlp." second. ";
        ob_flush();

        sleep($randSlp);
    }
    ob_end_flush(); 
```

如果取消注释`str_repeat`功能比在浏览器中
第一次：开始睡眠 1 秒。睡了 3 秒。
第二次：睡2秒。睡2秒。

并继续...

如果没有 str_repeat() 函数，可能会一一回显，为什么每次都不会显示输出。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T07:53:30.857

尝试以下代码及其工作。

```
header( 'Content-type: text/html; charset=utf-8' );
header("Cache-Control: no-cache, must-revalidate");
header ("Pragma: no-cache");
set_time_limit(0);
ob_implicit_flush(1);
//apache_setenv('no-gzip', 1);
//ini_set('zlib.output_compression', 0);
//ini_set('implicit_flush', 1);
for ($i = 0; $i < 10; $i++) { 
    $randSlp=rand(1,3);
    echo "Sleeping for ".$randSlp." second. ";;
    sleep(1);
    if(ob_get_level()>0)
       ob_end_flush(); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:03:02.337

即使是输出缓冲区（ob_* 函数）也不一定直接将输出提供给浏览器。

首先尝试调用`flush()`before 或 after `ob_flush()`。

其次，例如查看 mod_gzip 或 zlib.output_compression 是否打开。这也将缓冲所有输出。

如果使用 IIS 服务器而不是 Apache，则可能还有 IIS 中的设置需要检查。

# django - Django 使用 runserver 提供静态文件，但不使用 foreman

> ID：16170030
> 
> 赞同：7
> 
> 时间：2013-04-23T13:00:21.957
> 
> 标签：django, heroku, foreman

我有与[这个问题中描述的问题相反的问题](https://stackoverflow.com/questions/15934859/django-and-heroku-static-files-work-with-foreman-start-but-not-manage-py-r)。

我的 Django 站点在服务器启动时正常工作，`manage.py runserver`但在服务器启动时不提供静态文件`foreman start`。

我的目录结构：

```
project_name/
  project/
    settings.py
    ...
  app/
    ...
  venv/
    ...
  public/
    static/
      # static files go here #
    media/
      ...
  Procfile
  requirements.txt
  manage.py 
```

Procfile（如[Heroku 上的 Django 入门](https://devcenter.heroku.com/articles/django#start-a-django-app-inside-a-virtualenv)教程中所述）：

```
web: gunicorn project.wsgi 
```

设置.py：

```
import os
SITE_ROOT = os.path.dirname(os.path.realpath(__file__))
UP_ROOT = os.path.abspath(os.path.join(SITE_ROOT, '..'))
...
MEDIA_ROOT = UP_ROOT + '/public/media/'
...
STATIC_ROOT = UP_ROOT + '/public/static'
...
STATIC_URL = '/static/'
...
STATICFILES_DIRS = (
UP_ROOT + '/public',
UP_ROOT + '/public/static',
) 
```

就像我说的那样，所有这些都可以`runserver`在我的本地机器上正常工作，但不能在`foreman start`.

如果需要，将发布更多信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-02T16:17:25.317

## runserver 和 foreman 的区别：

Django 的 runserver 命令提供静态文件，因为 django.contrib.staticfiles 会自动为您搜索项目的静态文件夹（假设[这里](https://docs.djangoproject.com/en/1.7/howto/static-files/)有一些先决条件）并在静态请求时返回它们。

然而，Foreman 是一个独立于 Django 的实用程序，并且对 Django 的内部结构一无所知。所以，你需要一些额外的帮助。两个不错的选择是[**dj-static**](https://github.com/kennethreitz/dj-static)或[**whitenoise**](https://github.com/evansd/whitenoise)。两者都可以使用 pip 安装。您将需要对您的 wsgi.py 文件进行少量修改，如您选择的设置说明中所述（请参阅链接）。

dj-static 和 whitenoise 都在您的 settings.py 文件中的 STATIC_ROOT 中查找静态文件。这与 Django 的 runserver 不同，后者会自动遍历项目中的各种静态文件夹。这意味着您需要在 dj-static 或 whitenoise 找到它们之前运行 manage.py collectstatic（它将您的静态文件收集到 STATIC_ROOT）。

## 这是一组示例步骤（用于白噪声）：

跑：

```
pip install whitenoise 
```

将 wsgi.py 修改为如下所示：

```
from django.core.wsgi import get_wsgi_application
from whitenoise.django import DjangoWhiteNoise

application = DjangoWhiteNoise(get_wsgi_application()) 
```

然后静态文件将起作用：

```
# Run collectstatic before foreman whenever you've changed static files
python manage.py collectstatic
foreman start 
```

Foreman 比 runserver 需要更多的努力。但是，foreman 可以非常接近地模拟生产环境，而 runserver 不会（*希望它不会*）。在许多情况下，在生产中使用 dj-static 或 whitenoise 是一个不错的选择。因此，使用带有 dj-static 或 whitenoise 的工头进行开发可以让您放心，当您的网站投入生产时，重大问题不会让您感到惊讶。您无法从其他一些选项中得到保证（例如，将 'django.views.static.serve' 添加到 urls.py）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-28T10:10:51.697

这有点小技巧，但我通过将这条路由添加到 url 来让它工作：

```
# serve static
(r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}), 
```

# jquery - jQuery Fade - 在第二次迭代后中断

> ID：16170032
> 
> 赞同：0
> 
> 时间：2013-04-23T13:00:25.397
> 
> 标签：jquery

我正在组装的淡入淡出动画有一个小问题。
它通过动画两次正常运行，并且包括一个正常运行的包装。

在第二个包裹上，它会捕捉到第一张照片，而不是淡入淡出。
我看了一点延迟，但是第一次正常工作，我不太确定从这里去哪里。

有人可以帮忙吗？
感谢大家。

链接到 JSFiddle：http: [//jsfiddle.net/REbuy/1/](http://jsfiddle.net/REbuy/1/)

代码示例如下

jQuery：

```
var speed = 2000;
function switcher(){
$('.next').animate({opacity:1}, speed, 'linear', function()
    {
        $('.current').removeClass('current');
        $(this).addClass('current');
        $('.next+li').addClass('next');
        $(this).removeClass('next');
        $('.next').css('opacity',0);
        checker();
    });
}

function checker(){
        if($('.w-slides li:last').hasClass('current'))
        {
            $('.w-slides li:first').addClass('next');
        }
        else if($('.w-slides li:first').hasClass('next') && $('.w-slides li:last').hasClass('current'))
        {

            $('.w-slides li:first').addClass('current');        
            $('.w-slides li.current+li').addClass('next');
            $('.w-slides li:first').removeClass('next');
        }
    switcher();
    }
switcher(); 
```

HTML：

```
<div>
    <div class="w-fader">
        <ul class="w-slides">
            <li class="current"><img src="fader-img-1.png" /></li>
            <li class="next"><img src="fader-img-2.png" /></li>
            <li><img src="fader-img-3.png" /></li>      
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:27:16.840

您的问题是当您包装时，您没有将第一项的不透明度设置回零。

我将您的`checker`功能更改为：

```
function checker(){
if($('.w-slides li:last').hasClass('current'))
    {
        $('.w-slides li:first').addClass('next').css('opacity',0);
    }
} 
```

它似乎[工作](http://jsfiddle.net/REbuy/6/)

我想或者，您可以将呼叫移至`checker`切换器中设置不透明度的行之前。

# javascript - IE10 中文本框的动态对齐不起作用

> ID：16170034
> 
> 赞同：0
> 
> 时间：2013-04-23T13:00:37.603
> 
> 标签：javascript, internet-explorer-10

我正在尝试动态更改文本框的对齐方式，但它不起作用。但是，如果我放弃加载工作正常的小部件。

代码; HTML

```
 <input type="text" id="text1" style="text-align:center;width:80px" value="abc">
 <input type='button' id="btn" value="click"> 
```

JavaScript：

```
 document.getElementById('btn').onclick = function(){
    console.log(document.getElementById('text1').style.textAlign);
    document.getElementById('text1').style['text-align'] = "left";   
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:11:13.790

您可以使用`::-ms-value`伪元素修复此错误。您需要添加一些填充以触发重绘。由于它是伪元素而不是您添加填充的实际元素，因此看起来它不会改变输入的实际宽度。它还具有不适用于非 IE 浏览器的优点。

CSS：

```
.update::-ms-value {
    padding-right: 1px;    
} 
```

JS：

```
document.getElementById('text1').className += "update"; 
```

[http://jsfiddle.net/yHnLK/22/](http://jsfiddle.net/yHnLK/22/)

当然，您希望将 text1 元素存储在一个变量中，这样您就不必每次都调用 getElementById。添加`text-align: left;`via CSS 也会更好，而不是直接调整样式对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-12T09:22:40.170

试试这个代码。希望它可以帮助您找到一个好的解决方案。我将宽度设置为零值，然后使用计时器将宽度设置为前一个值以使其再次渲染。

HTML：

```
<div>
<textarea name="text">WANDER LUST</textarea>
</div>
<div>
<button class="btn-text-align" data-rule="textAlign" data-value="left">Left</button>
<button class="btn-text-align" data-rule="textAlign" data-value="center">Center</button>
<button class="btn-text-align" data-rule="textAlign" data-value="right">Right</button>
</div> 
```

Javascript：

```
 (function($) {
    $('.btn-text-align').on('click', function(){
        $obj= $(this);
        rule= $obj.attr('data-rule');
        ruleValue= $obj.attr('data-value');
        textElement= $(':input[name="text"]')[0];
        textElement.style[rule]= ruleValue;
        width= textElement.style['width'];
        textElement.style['width']= '0px';
        timerElement = setInterval(function () {
            textElement.style['width']= width;
            clearInterval(timerElement);
        }, 10);
    })
})(jQuery); 

```

[http://jsfiddle.net/zLwq140x/](http://jsfiddle.net/zLwq140x/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-18T08:21:33.270

试试这段代码，它适用于 IE：

Javascript：

```
document.getElementById('btn').onclick = function(){
    console.log(document.getElementById('text1').style.textAlign);
    document.getElementById('text1').style.textAlign = "left";
 }

```

[MDN CSS 属性参考](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Properties_Reference)

# continuous-integration - 在团队城市中创建发布分支构建

> ID：16170035
> 
> 赞同：1
> 
> 时间：2013-04-23T13:00:39.417
> 
> 标签：continuous-integration, teamcity, teamcity-7.0

我正在与 Team City for .net 合作，并将其用于持续集成 - 效果很好。我让它跑出了我的主要分支。

我现在有一个发布分支 - 我如何配置以在团队城市中设置发布分支。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:16:39.210

我之前所做的是复制我的主干构建的构建配置，然后创建一个指向另一个分支的新 VCS 根并在新配置中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T21:21:45.563

您可以使用 VCS 根的分支规范字段跟踪多个分支。为您的分支指定通配符，例如

```
+:refs/heads/release_*   (for release branches) or
+:refs/heads/*   (for all branches) 
```

[文档](http://confluence.jetbrains.com/display/TCD7/Working+with+Feature+Branches)中的更多详细信息。

一些注意事项：

1.  运行构建按钮为默认分支运行它。单击省略号 -> 更改选项卡以选择特定分支。
2.  现在您不能对特定分支使用工件依赖项。此类依赖项将始终使用默认分支。

关于工件依赖项的问题，从特定于分支的工件创建部署配置并不容易。在这种情况下，我会为每个分支使用单独的配置。否则，您应该依赖 API 和/或一些工件路径名解析逻辑。

如果您不需要每个分支部署，则完全可以使用分支规范方法。

# sql - SQL：按分组计算重复记录的数量

> ID：16170037
> 
> 赞同：1
> 
> 时间：2013-04-23T13:00:45.397
> 
> 标签：sql

我有一个大表，其中包含有关哪些项目（以及数量）属于哪个订单号的信息。

现在，此表的特殊之处在于它记录了在链接到订单号的项目中所做的所有更改。有点像这样：

```
OrderNumber | ItemNumber | ItemAmnt 
125           ITM1         2
125           ITM1         -2
125           ITM1         1
125           ITM2         5
125           ITM2         -5
125           ITM2         3
125           ITM3         1
125           ITM4         2 
```

为了使问题更加困难，它还插入了看似随机数量的重复记录。让它看起来像这样：

```
OrderNumber | ItemNumber | ItemAmnt   |  Count
125           ITM1         2             5
125           ITM1         -2            4
125           ITM1         1             7
125           ITM2         5             3
125           ITM2         -5            4
125           ITM2         3             2
125           ITM3         1             3
125           ITM4         2             3 
```

我想要实现的是汇总每个 ItemNumber 的 ItemAmnt 忽略重复的数量（又名 Count 列）。例如：对于 ITM1，这将是“2 - 2 + 1 = 1”，对于 ITM2，它将是“5 - 5 + 3 = 3”。

我希望我在这里说清楚，我很乐意详细说明。

当前实现上表的SQL代码：

```
select ordernumber, itemnumber, itemamnt, count(*) From item2order Where ordernumber='125' group by itemnumber, itemamnt 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:04:20.060

如果我明白，你已经完成了一半的工作。
使用您编写的查询作为查询的子`SUM`查询，如下所示：

```
SELECT ordernumber, itemnumber, SUM(itemamnt)
FROM
(
    SELECT DISTINCT ordernumber, itemnumber, itemamnt
    FROM item2order
    WHERE ordernumber='125' 
) AS SubQ
GROUP BY ordernumber, itemnumber 
```

我已替换`GROUP BY`为`DISTINCT`，但结果相同。可读性更好，`DISTINCT`因为它完全符合您的要求，在求和之前消除重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:10:07.390

试试这个查询

```
SELECT 
   ordernumber, 
   itemnumber, 
   sum(itemamt) AS TotalAmt
FROM 
   item2order
GROUP BY 
   ordernumber, 
   itemnumber 
```

如果你想为特定的记录添加根据`where`条款

# asp.net - 我想制作他们在 Windows 8 中制作的瓷砖

> ID：16170038
> 
> 赞同：-3
> 
> 时间：2013-04-23T13:00:47.853
> 
> 标签：asp.net, css

我如何制作 Windows 8 中的磁贴，然后在尚未托管的网站中使用它？我所做的所有搜索只带我了解如何在 Windows 8 电脑上制作瓷砖，这不是我想要做的任何建议或帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:42:04.637

该网站有几个链接，您可以点击以获取在网站中执行此操作的样式： [http ://www.noupe.com/css/metro-ui-css-own-tiled-website-71225.html](http://www.noupe.com/css/metro-ui-css-own-tiled-website-71225.html)

# mysql - 为什么一个索引有效而另一个无效？

> ID：16170039
> 
> 赞同：2
> 
> 时间：2013-04-23T13:00:48.297
> 
> 标签：mysql

如果这是一个非常愚蠢的问题，请原谅，但我是 MySQL 新手。我有一个相当大的数据库（70 GB），结构简单（只有一个表），我打算用它来快速检索记录。可以想象，grep 一个 70GB 的平面文件并不好玩。

在我的第一次尝试中，我创建了一个表（没什么花哨的，1 个 ENUM，4 个无符号 INT 和 2 个 FLOAT）。由于没有索引的数据检索速度很慢，因此我在表中填充了数据后创建了一个索引，方法是使用类似

```
create index myid_index on mytable (myid) using btree; 
```

之后，一切正常。检索速度对我来说还可以。然后我注意到我对导入的数据做错了，所以我重新开始。这一次，我在实际填充表之前用索引定义了表。这就是我理解应该做的事情的方式。该命令类似于

```
create table mytable ( ... , myid INTEGER unsigned, ..., index USING BTREE (myid)) 
```

当我这样做时，创建了一个索引，但它似乎不起作用，即检索速度很慢。显然没有使用索引。

两个过程的索引大小相同，并且在“explain mytable”视图中的显示完全相同。唯一的区别是只有在导入所有数据后才定义索引才对我有效。

我究竟做错了什么 ？当我们在这里的时候，第二个问题：当我用'create index'命令定义索引时，我必须给它一个名字。这个名字是干什么用的？我不必在查询期间指定它，是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:17:10.573

*tl; dr：由于以下内容未解决该问题，因此欢迎提供更多答案*

实际上，最好先大量导入数据，然后创建索引。通过在导入之前创建索引，您强制 MySQL 在插入每一行后重新计算索引（这实际上并不*完全正确*，但在概念上很接近）。反之，如果在导入后创建索引，则索引只需构建一次。

由于在数据导入过程中多次更新索引，可能会出现碎片，从而降低性能。我建议[`OPTIMIZE TABLE [the_table]`](http://dev.mysql.com/doc/refman/5.5/en/optimize-table.html)您在大量插入后发出一个。

至于您的第二个问题，为索引指定名称是可选的。如果省略该子句，MySQL 默认会创建一个。我建议明确指定它，它使检索更容易（例如，您需要在[DROP INDEX](http://dev.mysql.com/doc/refman/5.5/en/drop-index.html)语句中指定索引名称）。

# css - 带有 css 转换的三级菜单

> ID：16170042
> 
> 赞同：-2
> 
> 时间：2013-04-23T13:00:57.840
> 
> 标签：css, menu, css-transitions

我有这个三层菜单：[http ://codepen.io/anon/pen/EKmBD](http://codepen.io/anon/pen/EKmBD)

我想向它添加不透明度过渡，以便当您将鼠标悬停在级别 1 上时，级别 2 会出现过渡。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:04:48.760

您使用的是 SCSS，但我是用纯 CSS 制作的，您可以相应地翻译它

[**演示**](http://codepen.io/anon/pen/pAgBx)

只需将其添加到您的 CSS

```
ul li ul {
  opacity: 0;
  transition: opacity 1s;
}

ul li:hover ul {
  opacity: 1;
} 
```

另外，如果您需要更多级别，只需在 ul li ul 之后按顺序添加元素，/* 其他声明在这里 */

# jquery-mobile - jquery mobile - 通过单击“ALL”选项选择，取消选择所有选择菜单选项

> ID：16170044
> 
> 赞同：0
> 
> 时间：2013-04-23T13:01:13.930
> 
> 标签：jquery-mobile, select-menu, jquery-ui-selectmenu

这是我的问题：我使用 Jquery mobile 来设置一些表单元素的样式。表单元素之一是多选菜单。我希望这个选择菜单具有这种行为[http://jsfiddle.net/LynCV/](http://jsfiddle.net/LynCV/)（这个 jsfiddle 示例不是我的，我在互联网上找到了它）。我可以在本机选择菜单样式上实现此行为，但它不适用于自定义菜单样式。

这是不符合我要求的代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>select-deselect all</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
    /* this jquery script is from the jsfiddle and it is working on native styling but not on a custom styling.*/
    <script>
        $(document).ready(function(){
            $('select').change(function(){
                if (this.selectedIndex == 0){
                    $('option:gt(0)', this).prop('selected',false);
                }else{
                    $('option:first', this).prop('selected',false);
                }
            });
        });
    </script>
</head>

<body>
    <label for="selectBox">Choose one or more</label>
    <select id="selectBox" multiple="multiple" data-native-menu="false">//select element in note a native menu but custom you can see it by data-native-menu="false"
        <option value="all">all</option>
        <option value="one">one</option>
        <option value="tow">tow</option>
        <option value="three">three</option>
    </select>
</body>
</html> 
```

同样，我想要的是：选择“所有”选项以取消选择所有其他选项，并且不允许在不取消选择“所有”选项的情况下选择其他选项。当取消选择“全部”选项时，允许选择一个或多个选项。

edit1：阅读 jquery 移动 API。我在这里播种[http://api.jquerymobile.com/select/#method-refresh](http://api.jquerymobile.com/select/#method-refresh)来实现我想要的我必须使用 refresh() 方法。但我无法理解如何使用它。

edit2：我在这里的问题可能被认为是重复的，但我搜索了答案，但我不明白如何使用我找到的解决方案来解决我的问题。所以我要求对我的问题有一个具体的答案。

编辑2：如您所见，我是所有这一切的初学者。

感谢您的时间和可能的答案。如果可能的话，请给我一些代码示例。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T13:51:40.843

在您的情况下，只需致电

```
$("#selectBox").selectmenu("refresh"); 
```

更改“选定”属性后。

```
 $(document).ready(function(){
        $('select').change(function(){
            if (this.selectedIndex == 0){
                $('option:gt(0)', this).prop('selected',false);
            }else{
                $('option:first', this).prop('selected',false);
            }
            $("#selectBox").selectmenu("refresh");
        });
    }); 
```

# jira - 如何在 Jql 中使用 was 子句

> ID：16170047
> 
> 赞同：0
> 
> 时间：2013-04-23T13:01:26.390
> 
> 标签：jira

我正在为 jira 开发报告插件，我需要在给定的持续时间内获得受让人。它可能与给定持续时间内的当前受让人不同。

现在我正在报告中构建我的查询，如下所示。

JqlQueryBuilder queryBuilder = JqlQueryBuilder.newBuilder();

query = queryBuilder.where().updatedBetween(stdate,endDate).and().assignee() in(status_val).buildQuery();

```
 return searchProvider.searchCount(query, remoteUser); 
```

我想在给定的时间内获得先前分配的问题的计数。

请让我知道如何将 Was 子句与受让人一起使用并在日期之间更新。

问候，图西夫·谢赫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T07:48:59.163

尝试阅读[此答案](https://answers.atlassian.com/questions/83591/how-can-i-use-advanced-search-text-in-jqlquerybuilder-java-api)。简而言之，您需要定义一个新子句并在查询中使用它，如下所示：

```
JqlQueryBuilder builder = JqlQueryBuilder.newBuilder();
WasClauseImpl wasClause = new WasClauseImpl("status", Operator.WAS, new SingleValueOperand("Resolved"), new TerminalHistoryPredicate(Operator.AFTER, new SingleValueOperand(3500000L)));
JqlClauseBuilder clauseBuilder = JqlQueryBuilder.newClauseBuilder(wasClause);
Query query = clauseBuilder.buildQuery(); 
```

# ruby - 使用规范在 Sinatra 应用程序中测试对双打的期望

> ID：16170050
> 
> 赞同：0
> 
> 时间：2013-04-23T13:01:32.907
> 
> 标签：ruby, rspec, sinatra

我想验证是否在我想使用 rspec 注入 Sinatra 应用程序的服务上调用了一个方法，但我找不到如何完成此操作的示例。这是我的规格...

```
RSpec.configure do |config|
  config.include Rack::Test::Methods
end

def app
  App
end

describe 'Login' do
  context 'when the user is logged out' do
    describe 'POST on /signup' do
      it 'invokes signup on the user service with the correct parameters' do
        service = double('user_service').as_null_object
        service.should_receive(:signup).with(:username => 'RobA2345')
        post '/signup'
      end
    end
  end
end 
```

这里的应用程序是一个模块化的 Sinatra 应用程序。我来自 .NET 背景，我会在这里使用构造函数注入来解决这个问题，但我知道这不是 ruby​​ 方法。

一如既往，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:24:54.410

假设您希望在 的新实例上接收消息 `UserService`，有几种方法可以做到这一点。如果您使用的是最新版本的 rspec，这应该可以：

```
it 'invokes signup on the user service with the correct parameters' do
  UserService.any_instance.should_receive(:signup).with(:username => 'RobA2345')
  post '/signup'
end 
```

或者，这应该适用于几乎任何版本的 rspec：

```
it 'invokes signup on the user service with the correct parameters' do
  service = double('user_service').as_null_object
  UserService.stub(:new).and_return(service)
  service.should_receive(:signup).with(:username => 'RobA2345')
  post '/signup'
end 
```

# c++ - 字符串向量的排序比较和删除

> ID：16170051
> 
> 赞同：0
> 
> 时间：2013-04-23T13:01:41.787
> 
> 标签：c++, sorting, vector, compare

在 C++ 中我有

```
vector < vector <string> > Kblist; 
```

里面`Kblist`有很多子句，`clauses=kblist.size();`side里面的每一个子句的个数`Kblist`都是一个字符串型的向量，句子里面的每一个词都在里面分割`Kblist[i]`。

什么是最快的方法是在相同的单词中找到句子，如一个 in`"I love you"`和另一个 in`"you love i"`并从中删除这两个句子`Kblist`，我的代码可能正在运行，但我认为它太慢了，因为很多循环。所以我想知道有没有更好的解决方案，就像使用排序`clause1==clause2`或其他方法一样快。

```
 for (int a=0; a<KBlist.size(); a++){
                for (int b=a+1; b<KBlist.size(); b++){
                    int checksize=0;
                    if (KBlist[a].size()==KBlist[b].size()) {
                        for (int c=0; c<KBlist[a].size(); c++){ 
                            for (int d=0; d<KBlist[b].size(); d++){
                                if (KBlist[a][b]==KBlist[c][d]&&KBlist[a][b+1]==KBlist[c][d]) {
                                    checksize=checksize+1; 
                                    break;
                                }
                            }
                        }
                       if (checksize==c.size()) {
                                        inset=1;
                                        break;
                                    }
                    }
                }
            }
        }while (duplicate==0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:08:11.943

您可以遍历每个`std::vector`并使用标准库的算法。有[`std::find`](http://www.cplusplus.com/reference/algorithm/find/)

```
// find example
#include <iostream>     // std::cout
#include <algorithm>    // std::find
#include <vector>       // std::vector

int main () {
  int myints[] = { 10, 20, 30 ,40 };
  int * p;

  // pointer to array element:
  p = std::find (myints,myints+4,30);
  ++p;
  std::cout << "The element following 30 is " << *p << '\n';

  std::vector<int> myvector (myints,myints+4);
  std::vector<int>::iterator it;

  // iterator to vector element:
  it = find (myvector.begin(), myvector.end(), 30);
  ++it;
  std::cout << "The element following 30 is " << *it << '\n';

  return 0;
} 
```

有[`std::find_if`](http://www.cplusplus.com/reference/algorithm/find_if/)

```
// find_if example
#include <iostream>     // std::cout
#include <algorithm>    // std::find_if
#include <vector>       // std::vector

bool IsOdd (int i) {
  return ((i%2)==1);
}

int main () {
  std::vector<int> myvector;

  myvector.push_back(10);
  myvector.push_back(25);
  myvector.push_back(40);
  myvector.push_back(55);

  std::vector<int>::iterator it = std::find_if (myvector.begin(), myvector.end(), IsOdd);
  std::cout << "The first odd value is " << *it << '\n';

  return 0;
} 
```

因为你正在处理`std::string`这不应该是一个大问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:16:04.710

在您的场景中，最好使用`std::multiset< vector <string> >`比较器`std::vector<string>`以您需要的方式进行比较。这将为您提供具有相邻重复值和廉价插入/擦除的排序容器。

# android - 当我的手机处于锁定状态时如何检测抖动事件

> ID：16170053
> 
> 赞同：3
> 
> 时间：2013-04-23T13:01:52.210
> 
> 标签：android, service, shake

我在 android文章中读到[了当我的手机屏幕关闭时无法检测到抖动事件。](https://stackoverflow.com/questions/9372367/unable-to-detect-shake-event-when-my-phones-screen-is-off-in-android)但这个问题与此不同。

我创建了一个应用程序，当我摇动设备时它会说话（使用 TextToSpeach API）时间。为此，我创建了一个“服务”，其中注册了“ShakeListener”。当我摇动设备时，它会说出当前时间。

但这在我的设备“开启”时工作正常。当我锁定我的设备时，它会停止工作。谁能详细说明背后的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:00:56.870

我认为这里的问题是，当您锁定设备时，它会进入睡眠模式。并且您的 ShakeListener 不会收到抖动事件。实现您想要的最佳方法是注册广播接收器以接收抖动事件。但据我所知，android 不提供这样的广播。另一种解决方案是获取部分 WakeLock。它会阻止android睡眠。但当然它会导致电池问题。也看看这个线程：[Android accelerometer not working when screen is closed](https://stackoverflow.com/questions/9982433/android-accelerometer-not-working-when-screen-is-turned-off)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T17:58:41.843

在您修补某些内核实现之前，您可能无法收到此通知。Android 不会广播此类通知。

# c# - 传递给套接字侦听器的无效参数

> ID：16170058
> 
> 赞同：2
> 
> 时间：2013-04-23T13:02:03.780
> 
> 标签：c#, sockets

我一直在收到这个错误，我相信我将问题缩小到我在 64 位机器上[使用 32 位侦听器。](http://inthehand.com/forums/t/5313.aspx)有没有办法让它在 64 位系统上运行？

![](https://i.stack.imgur.com/hhTAg.png)

```
18      Socket sListener;
...
34          permission = new SocketPermission(NetworkAccess.Accept, TransportType.Tcp, "", SocketPermission.AllPorts);

36          //Listening Socket object
37          sListener = null;

39          //Ensure the code has permission to access the Socket
40          permission.Demand();

42          IPHostEntry ipHost = Dns.GetHostEntry("");
43          IPAddress ipAddress = ipHost.AddressList[2];
44          ipEndPoint = new IPEndPoint(ipAddress, 4510);

46          sListener = new Socket(ipAddress.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
...
71      sListener.Listen(10);
72
73      //Begins an asynchronous operation to accept an attempt
74      AsyncCallback aCallback = new AsyncCallback(AcceptCallback);
75      sListener.BeginAccept(aCallback, sListener); 
```

我试图遵循这个[相关](https://stackoverflow.com/questions/5543718/trouble-getting-sockets-to-connect-in-windows7-64bit)问题中的代码，但它给了我错误：

> 运算符“==”不能应用于“System.Net.Sockets.AddressFamily”和“字符串”类型的操作数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:09:50.560

我认为您在 Socket 可以[侦听](http://msdn.microsoft.com/en-IN/library/system.net.sockets.socket.listen.aspx)端口之前缺少[Socket Binding 。](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.bind.aspx)

根据 MSDN：

> 如果您需要使用特定的本地端点，请使用 Bind 方法。您必须先调用 Bind，然后才能调用 Listen 方法。除非您需要使用特定的本地端点，否则您无需在使用 Connect 方法之前调用 Bind。您可以在无连接和面向连接的协议上使用 Bind 方法。
> 
> 在调用 Bind 之前，您必须首先创建要从中通信数据的本地 IPEndPoint。如果您不关心分配哪个本地地址，您可以使用 IPAddress.Any 作为地址参数创建一个 IPEndPoint，底层服务提供商将分配最合适的网络地址。如果您有多个网络接口，这可能有助于简化您的应用程序。如果您不关心使用哪个本地端口，您可以使用 0 作为端口号创建一个 IPEndPoint。在这种情况下，服务提供商将分配一个介于 1024 和 5000 之间的可用端口号。

```
70:    sListen.Bind(your IP end point)
71:    sListener.Listen(10); 
```

* * *

PS：监听端口总是使用大于 4000 的值！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:28:10.343

也许以下示例也会对您有所帮助。

```
Socket clientSocket;
System.Net.IPEndPoint clientEndPoint;
System.Net.Sockets.NetworkStream networkStream;
IAsyncResult beginAcceptAsyncResult;
System.Threading.WaitHandle []waitHandleArray;
int waitHandleSignalled;

System.Net.IPEndPoint listenEndpoint = new System.Net.IPEndPoint("127.0.0.1", 45000); //make sure port is free (check with cmd: netstat -an)
System.Net.Sockets.TcpListener listener = new System.Net.Sockets.TcpListener(listenEndpoint);

waitHandleArray = new System.Threading.WaitHandle[1];

listener.Start();

do
{
    try
    beginAcceptAsyncResult = listener.BeginAcceptSocket(null, null);
    waitHandleArray[0] = beginAcceptAsyncResult.AsyncWaitHandle;
    waitHandleSignalled = System.Threading.WaitHandle.WaitAny(waitHandleArray);

    if (waitHandleSignalled != 0)
    {
        clientSocket = _TCPListener.EndAcceptSocket(BeginAcceptAsyncResult);

        clientEndPoint = clientSocket.RemoteEndPoint as System.Net.IPEndPoint;

        networkStream = new System.Net.Sockets.NetworkStream(clientSocket, true);

        //do more with NetworkStream...
    }
}
//...
//... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:09:38.343

您是否[按照文档](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.listen.aspx)`MaxConnections`中的说明检查了该属性？

该文档还描述了如何查看`ErrorCode`更多详细信息。也许您应该探索该选项。

# html - 从另一个页面调用 Href

> ID：16170065
> 
> 赞同：0
> 
> 时间：2013-04-23T13:02:17.200
> 
> 标签：html, events, hyperlink, call, article

这是我第一次在这里发帖。

我的网站有一个用 HTML5 编写的投资组合页面。在页面上，我有多个指向不同画廊的 HTML 链接。

`<a href="#II">`

大概叫

`<article class="col2 pad_left1 tab-content" id="II"> <ul class="gallery">`

如何从另一个页面的 HTML 链接直接调用每个画廊？

谢谢，

格雷森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:05:28.957

通过将其他页面的 url 附加到 href 值：

```
<a href="http://foo/other-page#middle">Foo</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:09:26.790

您像以前一样在链接中添加了一个 href。网址看起来像：www.example.com#hrefYouPut。在准备好文档时，您可以执行 if 子句：

```
var hash = window.location.hash;
    if (hash == "#hrefYouPut") {
        //my gallery pops up in here
    } 
```

# sql - RAISERROR() 的语法含义是什么

> ID：16170073
> 
> 赞同：60
> 
> 时间：2013-04-23T13:02:41.510
> 
> 标签：sql, sql-server, database, sql-server-2008, sql-server-2008-r2

我刚刚创建了一个相反的触发器，其语法如下：

```
Create trigger tgrInsteadTrigger on copytableto
Instead of Insert as 
    Declare @store_name varchar(30);
    declare @sales int;
    declare @date datetime;

    select @store_name = i.store_name from inserted i
    select @sales = i.sales from inserted i
    select @date = i.Date from inserted i
begin
    if (@sales > 1000)
        begin
        RAISERROR('Cannot Insert where salary > 1000',16,1); ROLLBACK;
        end
    else
        begin
        insert into copytablefrom(store_name, sales, date) values (@store_name, @sales, @date);
        Print 'Instead After Trigger Executed';
        end
End 
```

在上面我使用过的语法中`RAISERROR('Cannot Insert where salary > 1000',16,1)`

但是当我写`RAISERROR('Cannot Insert where salary > 1000')`它时，它在同一行给出了错误“')'附近的语法错误”。

谁能在这里解释一下 (16,1) 的用法。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-23T13:04:59.250

它是 的严重性级别`error`。级别从 11 到 20 会引发错误`SQL`。级别越高，级别越严重，`transaction`应该中止。

执行此操作时会出现语法错误：

```
RAISERROR('Cannot Insert where salary > 1000'). 
```

因为您没有指定正确的`parameters`（`severity level`或`state`）。

如果您希望发出警告而不是`exception`，请使用级别 0 - 10。

来自 MSDN：

> 严重性
> 
> 是与此消息关联的用户定义的严重性级别。使用 msg_id 引发使用 sp_addmessage 创建的用户定义消息时，在 RAISERROR 上指定的严重性将覆盖在 sp_addmessage 中指定的严重性。任何用户都可以指定从 0 到 18 的严重级别。从 19 到 25 的严重级别只能由 sysadmin 固定服务器角色的成员或具有 ALTER TRACE 权限的用户指定。对于从 19 到 25 的严重级别，需要 WITH LOG 选项。
> 
> 状态
> 
> 是从 0 到 255 的整数。负值或大于 255 的值会生成错误。如果在多个位置引发相同的用户定义错误，则为每个位置使用唯一的状态编号可以帮助找出引发错误的代码部分。[在此处](http://support.microsoft.com/kb/321903)进行详细说明

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-23T13:07:28.660

16 是严重性，1 是状态，更具体地说，以下示例可能会为您提供有关语法和用法的更多详细信息：

```
BEGIN TRY
    -- RAISERROR with severity 11-19 will cause execution to 
    -- jump to the CATCH block.
    RAISERROR ('Error raised in TRY block.', -- Message text.
               16, -- Severity.
               1 -- State.
               );
END TRY
BEGIN CATCH
    DECLARE @ErrorMessage NVARCHAR(4000);
    DECLARE @ErrorSeverity INT;
    DECLARE @ErrorState INT;

    SELECT 
        @ErrorMessage = ERROR_MESSAGE(),
        @ErrorSeverity = ERROR_SEVERITY(),
        @ErrorState = ERROR_STATE();

    -- Use RAISERROR inside the CATCH block to return error
    -- information about the original error that caused
    -- execution to jump to the CATCH block.
    RAISERROR (@ErrorMessage, -- Message text.
               @ErrorSeverity, -- Severity.
               @ErrorState -- State.
               );
END CATCH; 
```

[您可以从http://msdn.microsoft.com/en-us/library/ms178592.aspx](http://msdn.microsoft.com/en-us/library/ms178592.aspx)关注并尝试更多示例

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-23T13:06:19.573

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms178592.aspx)

```
RAISERROR ( { msg_id | msg_str | @local_variable }
    { ,severity ,state }
    [ ,argument [ ,...n ] ] )
    [ WITH option [ ,...n ] ] 
```

`16`将是严重性。
`1`将是国家。

您得到的错误是因为您没有正确提供`RAISEERROR`函数所需的参数。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-23T13:15:39.383

示例代码中的严重级别 16 通常用于用户定义（用户检测到的）错误。SQL Server DBMS 本身会针对它检测到的问题发出[严重级别](http://msdn.microsoft.com/en-us/library/ms164086.aspx)（和错误消息），无论是更严重（数字较高）还是不太严重（数字较低）。

状态应该是 0 到 255 之间的整数（负值会出错），但选择基本上是程序员的。如果用户定义错误的相同错误消息将在不同位置出现，则放置不同的状态值很有用，例如，如果通过额外指示错误发生的位置来帮助调试/故障排除问题。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-06-01T20:40:16.937

作为从[Microsoft 的 MSDN](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/raiserror-transact-sql?view=sql-server-ver15)中获取的示例，发布到这个问题的答案很好，但是如果它不是来自 TRY 块，它并不能直接说明错误的来源。我更喜欢这个示例，它对 CATCH 块中的 RAISERROR 消息进行了非常小的更新，说明错误来自 CATCH 块。我也在 gif 中演示了这一点。

```
BEGIN TRY
    /* RAISERROR with severity 11-19 will cause execution
     |  to jump to the CATCH block.
    */
    RAISERROR ('Error raised in TRY block.', -- Message text.
               5, -- Severity. /* Severity Levels Less Than 11 do not jump to the CATCH block */
               1 -- State.
               );
END TRY

BEGIN CATCH
    DECLARE @ErrorMessage  NVARCHAR(4000);
    DECLARE @ErrorSeverity INT;
    DECLARE @ErrorState    INT;

    SELECT 
        @ErrorMessage  = ERROR_MESSAGE(),
        @ErrorSeverity = ERROR_SEVERITY(),
        @ErrorState    = ERROR_STATE();

    /* Use RAISERROR inside the CATCH block to return error
     | information about the original error that caused
     | execution to jump to the CATCH block
    */
    RAISERROR ('Caught Error in Catch', --@ErrorMessage, /* Message text */
               @ErrorSeverity,                           /* Severity     */
               @ErrorState                               /* State        */
               );
END CATCH; 
```

[![RAISERROR 演示 Gif](https://i.stack.imgur.com/kIVGC.gif)](https://i.stack.imgur.com/kIVGC.gif)

# mysql - 将 Table 与监控点进行比较 - mysql

> ID：16170075
> 
> 赞同：0
> 
> 时间：2013-04-23T13:03:01.710
> 
> 标签：mysql, compare

我有一个包含产品数据和价格的表格。该表每 5 到 10 分钟更新一次。现在我有一个通过复制表来创建监控点的 cronjob。所以我每天早上都会得到一份数据副本。

现在我想通过将它们与监视器表进行比较来检查我晚上的价格。

我的查询如何获得这两个价格。查询应该显示价格不同的产品。

```
Table a
[id] - [product_no] [product_desc] [product_price] - [product_stock]

Table b (from cronjob]
[id] - [product_no] [product_desc] [product_price] - [product_stock] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:22:56.693

您要求在两个表之间进行基本连接。以下是如何执行连接：

```
SELECT TableA.product_no
     , TableA.product_price AS TableAPrice
     , TableB.product_price AS TableBPrice
FROM TableA
    INNER JOIN TableB
        ON TableA.id = TableB.id
WHERE TableA.product_price != TableB.product_price 
```

尝试了解连接的一般工作方式，这是在使用数据库时要知道的非常重要的事情。

# cairo - 用开罗绘制的画布填充自定义形状的杂波 Actor

> ID：16170085
> 
> 赞同：2
> 
> 时间：2013-04-23T13:03:37.463
> 
> 标签：cairo, vala, clutter, cogl

**Clutter 1.12
Cogl 1.10
Vala 或 C 或 Python。**

我在这里可能有一个根本的误解——

我认为“演员”是 3D 多边形的东西。我将它们的颜色视为顶点颜色或纹理映射。鉴于此，我一直在尝试绘制一个自定义 Actor 并用通过 Cairo 绘制的内容填充它。我哪儿也去不了。

代码包含在下面（在 Vala 中）。任何人都可以让我正确了解 Clutter 的基础知识（文档只是没有删减它），或者，如果我很接近，请帮助我使该代码正常工作。

我希望看到一个带有笑脸的圆角矩形。我看到的是覆盖*脸部的 Cogl 路径填充。我*认为*paint() 是在drawme() 之后完成的

*如果您在方法paint() 中将Clutter.Color 设置为“#0001”，您会看到这一点。

```
/*

Clutter Actor with custom paint() and filled with a Cairo-drawn texture.
(NOT yet working.)

Compile with:

    valac \
  --pkg clutter-1.0 \
  --pkg cogl-1.0 \
    somename.vala

*/

public class SmileyRect : Clutter.Actor {

  //private vars
  private Clutter.Canvas _canvas;
  private bool _flip = false;
  private int _w = 300;
  private int _h = 300;

  //Constructor
  construct {
    _canvas = new Clutter.Canvas();
    _canvas.set_size( this._w, this._h );

    this.set_size( this._w, this._h );
    this.set_content( _canvas );

    //Connect to the draw signal - this is as-per Clutter docs.
    _canvas.draw.connect( drawme );

    //Make it reactive and connect to the button-press-event
    this.set_reactive( true );
    this.button_press_event.connect( button_press );
  }

  /*
    Button press signal handler.
    Changes the colour of what will be painted on the canvas.
  */
  private bool button_press ( Clutter.ButtonEvent evt ) {
    this._flip = !this._flip; //Jiggle a value.
    this.redraw(); // Forces re-run of the drawme() method.
    return true; //all done with this signal.
  }

  //Common function to draw Cogl stuff - used in paint and pick.
  private void draw_rr( Clutter.Color? color ) {
    if (color != null ) { Cogl.set_source_color4ub(color.red,color.green,color.blue,color.alpha); }
    Cogl.Path.round_rectangle( 0, 0, this._w, this._h, 15, 0.3f );
    Cogl.Path.close();

    // When from paint(): 
    // Is there some way to fill this Cogl path with the contents
    // of this._canvas? Or some other paradigm?
    if (color != null ) { Cogl.Path.fill(); }
  }

  /* Some kind of freaky, this magic paint() thing.
     Took me ages to get it running.
     I want to draw a rounded rectangle as the basic shape
     of this actor. 
  */
  public override void paint() {
    stdout.printf("paint runs.\n");
    // I did try a transparent color #0000 - just to see. No go.
    // #000f - draws a black rounded rect *OVER* the Cairo canvas. It covers
    // the smiley face.
    this.draw_rr( Clutter.Color.from_string("#0000") );
  }

  /* I followed paint() example, but the argument was tricky.
     I eventually found it from some PyClutter source code. 
  */
  public override void pick(Clutter.Color color) {
    stdout.printf("pick runs.\n");
    this.draw_rr( color );
  }

  /*
    Draws the Cairo art to the canvas.
    I want this art to be the bitmap/pixmap that *fills* the
    basic rounded rectangle shape of this actor.
    i.e I want the smile face cairo rectangle to be *within* the
    polygon that is draw via Cogl in paint() method.

    Does this even make sense?
  */
  private bool drawme( Cairo.Context ctx, int width, int height) {
    //Draw a rectangle
    double[] col;
    if (this._flip) {
      col = {1f,0f,0f};
      } 
    else {
      col = {0f,1f,0f};
    }

    ctx.set_source_rgb( col[0], col[1], col[2] );
    ctx.rectangle( 0, 0, width, height );
    ctx.fill();

    //Draw a smiley face.

    // Aside: Been trying to avoid all the weird casting of the floats/doubles used below
    // (see the generated c source.) Not at all sure what's going on there.
    // Also not sure about that 'f' on the numbers. Where/when do I have to use it?

    double pi = 3.14f;
    double w = (double) width;
    double h = (double) height;

    ctx.set_line_width( 6f );

    ctx.set_source_rgb( 0f, 0f, 0.8f );

    //eyes
    ctx.move_to( w/3f, h/3f );
    ctx.rel_line_to( 0f, h/6f );
    ctx.move_to(  2*(w/3f), h/3f );
    ctx.rel_line_to( 0f, h/6f );
    ctx.stroke();

    ctx.set_source_rgb( 1f, 1f, 0f );

    double rad = (w > h) ? h : w;
    //face
    ctx.arc( w/2f, h/2f, (rad/2f) - 20f,0f,2f * pi );
    ctx.stroke();
    //smile
    ctx.arc( w/2f, h/2f, (rad/3f) -10f, pi/3f, 2f * (pi/3f) );
    ctx.stroke();

    return true;
  }

  //Redraw - forces invalidate which trips the draw event
  public void redraw() {
    this._canvas.invalidate();
  }
} //end SmileyRect class

void main( string[] args ) {
  Clutter.init(ref args);

  var stage = new Clutter.Stage();
  stage.set_size(400,400);

  var rs = new SmileyRect();
  stage.add_child(rs);
  rs.redraw();

  stage.destroy.connect(Clutter.main_quit);
  stage.show();
  Clutter.main();

} 
```

# php - 从查询/视图字段中查找基础字段

> ID：16170088
> 
> 赞同：0
> 
> 时间：2013-04-23T13:03:48.223
> 
> 标签：php, mysql, sql, innodb

为什么？我正在尝试动态查找外键指向的位置。为此，我在 information_schema.KEY_COLUMN_USAGE 中进行搜索。它适用于表格，但不适用于视图。

在 information_schema.VIEWS 中引用了视图，view_definition 字段公开了查询。我认为这是我唯一可以找到有关视图字段来自何处的信息的地方，对吧？

然后，我会在 SELECT 和 FROM 之间搜索我的字段名。如果是别名，获取表字段名和表名（如果是别名则解析表）。

最后一个复杂点，视图可以引用另一个视图，那么代码将不得不是递归的。

举个例子（视图名是vw_mandates_articles）：

```
select ma.*, a.id_articles_unit, a.id_articles_category from mandates_articles ma
left join articles a on ma.id_article = a.id 
```

它在 VIEWS 表中的存储方式是：

```
select `ma`.`id` AS `id`,
  `ma`.`id_mandate` AS `id_mandate`,
  `ma`.`id_article` AS `id_article`,
  `ma`.`unit_price` AS `unit_price`,
  `ma`.`description` AS `description`,
  `a`.`id_articles_unit` AS `id_articles_unit`,
  `a`.`id_articles_category` AS `id_articles_category`
from (`ste`.`mandates_articles` `ma`
  left join `ste`.`articles` `a` on((`ma`.`id_article` = `a`.`id`))) 
```

我的输入是：

*   视图名称 (vw_mandates_articles)
*   字段名称（id_articles_category）

预期输出：

*   字段表 (ste.articles)
*   字段名称（id_articles_category）//可以与输入相同但不一定

我不是要别人为我写它，我只是想在挖掘之前验证该方法。

有什么想法吗？好/坏的方法，替代方案？

提前感谢您的灯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:12:04.617

是的。视图仅具有存储在 information_schema.VIEWS 表中的查询中的字段。

* * *

不，没有比在查询中爆炸等更好的方法了......

* * *

我不建议制作递归视图。可以肯定的是它会很慢（mysql必须***将***临时结果存储在硬盘上，这实际上并没有提高性能）。

即使这不是最佳实践，我也倾向于增加冗余并通过使用单个查询（最多 1 个子选择）来获取数据。

# html - 如何检查DIV中的内容是否已经加载？

> ID：16170092
> 
> 赞同：0
> 
> 时间：2013-04-23T13:04:00.627
> 
> 标签：html, ajax, web-applications

在同一页面上按下按钮后加载 DIV 中的内容。该按钮向服务器发送一个请求，一个 python 文件，这些文件返回一些文本，这些文本`div`使用 Ajax 在页面的一部分中加载。

我实际上想要一个“加载图像”直到`div`内容没有加载。

```
<form id="f1">
    <textarea name="textcontent" id="styled" cols="40" rows="4"></textarea>
    <br>
    <input onclick='JavaScript:xmlhttpPost("/cgi-bin/test.py")' type="button" value="Show" class="blue"/>
    <br>
    <div id="qList"></div>
</form> 
```

服务器返回的文本将被加载到`div`其 id 为“qList”。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:05:46.627

```
<div id="qList"><!-- insert loading image code here --></div> 
```

完成`xmlhttpPost("/cgi-bin/test.py")`后，它可以用它想要的内容替换加载图像。

# javascript - 增强表单中的名称属性

> ID：16170097
> 
> 赞同：0
> 
> 时间：2013-04-23T13:04:10.857
> 
> 标签：javascript, jquery, django-forms

我有一个表单，并向其中添加动态字段。添加字段后，我想通过以下方式增强名称属性：

```
<form id="workshops" action="" method="post">
  <input type="hidden" value="1" name="form-0-Workshops">
  <input type="hidden" value="morning" name="form-0-Day">
  <input type="hidden" value="3" name="form-0-Workshops">
  <input type="hidden" value="evening" name="form-0-Day">
  <input type="hidden" value="3" name="form-0-Workshops">
  <input type="hidden" value="morning" name="form-0-Day">
</form> 
```

变成：

```
<form id="workshops" action="" method="post">
  <input type="hidden" value="1" name="form-0-Workshops">
  <input type="hidden" value="morning" name="form-0-Day">
  <input type="hidden" value="3" name="form-1-Workshops">
  <input type="hidden" value="evening" name="form-1-Day">
  <input type="hidden" value="3" name="form-2-Workshops">
  <input type="hidden" value="morning" name="form-2-Day">
</form> 
```

我有这个开始，但我没有取得任何进展......

```
var forms = $('form#workshops input[name$="Workshops"]');

for (var i=0, formCount=forms.length; i<formCount; i++){
    $('form#workshops input[name$="Workshops"]').each(function() {
        //$(this) seems to be empty    
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:07:51.133

尝试使用这个：

```
// Get all the forms inputs
var $forms = $('form#workshops input[name$="Workshops"]');

// Loop through each form inputs
$forms.each(function () {
    console.log($(this));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:09:16.113

也许只是尝试：

```
$('#workshops input[name$="Workshops"]').each(function() { /*...*/ }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:20:56.573

您的代码不断在循环内重新选择事物。没有意义。

充分利用每个优势，它为您提供索引，因此无需执行 for 循环。.

```
function rename (i) {
    var parts = this.name.split("-");
    parts[1] = i;
    this.name = parts.join("-");
}

var form = $("#workshops");
form.find('input[name$="Workshops"]').each(rename);
form.find('input[name$="Day"]').each(rename); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:31:45.260

请尝试以下代码：

```
var forms_input = $('form#workshops input[name *="Workshops"]');

forms_input.each(function() {
    console.log($(this))
}); 
```

# c++ - 无法通过从 C++ 中的另一个文件读取文件名来打开文件

> ID：16170104
> 
> 赞同：1
> 
> 时间：2013-04-23T13:04:28.457
> 
> 标签：c++, stdin, freopen

您好我正在尝试从另一个文件中读取文件名，然后读取它。但我只能读取第一个文件，其中包含我要打开的第二个文件的名称。这就是我的做法..

```
int main()
{
freopen("input1.txt","r",stdin);
while(cin>>fileName>>source>>destination)
{
    //reads perfectly
    char file[100];

    for(int i=0;i<(int)fileName.size();i++)
        file[i] = fileName[i];

    file[(int)fileName.size()] = NULL;        

    freopen(file,"r",stdin);

    mp.clear();
    mp1.clear();

    for(int i=0;i<cityNumber;i++)
        adj[i].clear();
    cityNumber = 0;

    while(cin>>city1>>city2>>distanc)
    {
       //doesn't read
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:17:11.800

您的代码使用了过于复杂的结构。为什么不直接用 C++ 的方式来做：

```
#include <fstream>

int main()
{
std::ifstream input1("input1.txt");
while(input1 >> fileName >> source >> destination)
{
    std::ifstream file(fileName.c_str());

    mp.clear();
    mp1.clear();

    for(int i=0;i<cityNumber;i++)
        adj[i].clear();
    cityNumber = 0;

    while(file >> city1 >> city2 >> distanc)
    {
       //work with values
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:11:25.353

手册页`freopen`说：

> 该`freopen()`函数打开文件名是指向的字符串，`path`并将流指向的流与它相关联。原始流（如果存在）已关闭。

因此，

```
freopen("input1.txt","r",stdin); 
```

关闭`stdin`流，并且

```
freopen(file,"r",stdin); 
```

找不到要关联的打开流`file`。

您可能应该简单`fopen`地读取文件`input.txt`并从中读取以离开`stdin`最终目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T13:28:57.497

有几点需要考虑：

*   不要在 C++ 中使用 freopen/fopen 文件系列（除非它是一个非常特殊的情况）

*   不要将 std::iostreams 与 fopen 文件系列混合（此处不应使用 freopen）

    这两点将解决您的特定错误（正如@Angew 指出的那样）

*   如果读取超过 100 个字符（我相信您不会检查错误），这可以避免缓冲区溢出`std::string`，并简化您的代码。`std::getline``char file[100];`

*   更喜欢迭代器而不是按索引迭代。

这意味着而不是：

```
for(int i=0;i < cityNumber;i++)
    adj[i].clear(); 
```

你可以/应该写：

```
// C++11
for(auto& city: adj)
    city.clear();

// C++98
for(<type of adj>::iterator city = adj.begin(); city != adj.end(); ++city)
    city->clear(); 
```

# ios - 如何在没有内存警告的情况下在 UITableview 中加载大量数据？

> ID：16170105
> 
> 赞同：-1
> 
> 时间：2013-04-23T13:04:30.650
> 
> 标签：ios, uitableview, uiscrollview

我正在尝试创建一个可以显示大量数据的自定义视图，类似于 UITableView 能够显示多行数据的方式。现在我在 UIScrollView 中显示数据，但是在我重新加载数据几次后，我的应用程序开始收到内存警告。

设计自定义视图以显示大量数据的正确方法是什么，如何避免这些内存警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:08:00.067

它没有。UITableView 只加载尽可能多的行，因为它可以在屏幕上显示。当它需要更多行时，它会向数据源询问它们。这给出了表包含所有数据的外观，而没有一次复制所有内容的所有开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:14:15.270

当您的`tableView`单元格太重时，它具有`imageView`多个文本标签，可以更好地通过子类化来创建自定义单元格`UITableView`。

确保在自定义单元格中，子视图应该只添加一次并重复用于单元格。只需要发送 imageview 的图像或标签的文本。即使表格视图中有这么多单元格，性能也会很好。

并且还要确保如果您从服务器加载图像，则不要在每次为单元格设置图像时都获取图像。使用图像缓存。

以下链接可能对从服务器加载数据到表视图有用。

[http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

# .net - 更改数据库时重新加载缓存

> ID：16170109
> 
> 赞同：1
> 
> 时间：2013-04-23T13:04:34.530
> 
> 标签：.net, sql, caching, sqldependency, invalidation

我正在开发一个.net 客户端应用程序，它使用实体框架来访问数据库。它是一个多用户应用程序，其中（有时）数小时或数天没有变化，有时一次有数百个变化。

我需要缓存很多数据，因为需要进行一些检查并显示给用户。我解决了当一个应用程序实例发生变化时一个缓存更新其他缓存的问题。但是，当更改发生在应用程序的其他实例中时，我不确定最好的方法是什么。

我试图用它`SqlDependency`来使我的缓存无效，但这会迫使我在只有一位发生变化时重新加载大量数据。对性能不是很好。`SqlDependecy`此外，当使用更改的应用程序对数据进行更改时，它也会触发，因此一次更改会使缓存更新两次。

因为我从来没有开发过这么多缓存的东西，所以我不知道如何最好地进行。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:57:18.550

一个位仍然不会强制您重新加载所有数据。
您可以读取读取数据并仅更新已更改的数据。

或者您可以在 SQL 上实现一个触发器来写出更改，因此您只需检查该表。
如果多个客户端正在从触发器表同步，则可能有另一个 FK 表，客户端可以指示他们拾取了什么。
并像每晚一样清理掉东西。

# php - Apache2.2 - PHP5.3 - MySQL5.5 - MantisBT

> ID：16170111
> 
> 赞同：0
> 
> 时间：2013-04-23T13:04:52.823
> 
> 标签：php, mysql, apache, mantis

在这里使用 Apache 2.2 & PHP 5.3 & MySQL 5.5 有点麻烦，似乎 PHP 看到了 MySQL 模块，相关部分已添加或取消注释，并且 DLL 文件确实存在于 c:\php\ 文件夹中，但是当我去设置 Mantis 并运行设置，我收到以下错误。

人们在这方面遇到过任何明显的问题吗？如果需要，我可以添加我的 php.ini 或 httpd.conf，但是我看不到要添加到它们的配置比我在下面的附件中显示的要多。

提前喝彩

KS

![在此处输入图像描述](https://i.stack.imgur.com/2YyXF.jpg)

* * *

这应该使主题更加清晰（来自 Apache error.log）：-

> PHP 警告： **PHP 启动：mysql：无法初始化模块\n使用 build ID=API20090626,NTS,VC9 编译的模块\n使用 build ID=API20090626,TS,VC9 编译的**PHP\n这些选项需要在第 0 行 PHP 的 Unknown 中匹配\n警告： **PHP 启动：mysqli：无法初始化模块\n使用 build ID=API20090626,NTS,VC9
> 编译的模块\n使用 build ID=API20090626,TS,VC9 编译的 PHP** \n这些选项需要在第 0 行 [星期三2013 年 4 月 24 日 11:07:21] [通知] Apache/2.2.22 (Win32) PHP/5.3.23 已配置 -- 恢复正常操作...

我在用着：

PHP v5.3.23

阿普切 v2.2.22

MySQL v5.5.30

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:23:54.540

**排序！**

不知道如何或为什么，但是当我第一次安装 PHP 时，我使用了这个*php-5.3.23-nts-Win32-VC9-x86.msi*安装程序并收到了上述错误。我下载了这个 zip *php-5.3.23-Win32-VC9-x86.zip*并使用了 zips /ext 文件夹中的 mysql.dll 和 mysqli.dll 并替换了已安装的 c:\php\ext 文件夹中的 DLL。然后重新启动 Apache 和 - 宾果游戏！工作！

zip 中的 DLL 的大小和日期与 MSI 安装中的略有不同，因此必须有细微的差异。

呼——而且*他们*说 PHP 使用起来很简单，随时给我的 JSP 页面！

# asp.net - MaskedEditExtender 掩码未显示

> ID：16170113
> 
> 赞同：1
> 
> 时间：2013-04-23T13:04:58.543
> 
> 标签：asp.net, ajaxcontroltoolkit

我在玩 ASP.NET AjaxControlToolkit 并尝试将 a 添加`MaskedEditExtender`到`asp:TextBox`

这是我的代码：

```
<ajaxToolkit:MaskedEditExtender
                                        ID="meDOB1"
                                        TargetControlID="txtDOB1" 
                                        Mask="99/LLL/9999"
                                        MaskType="None"
                                        InputDirection="LeftToRight"
                                        OnFocusCssClass="MaskedEditFocus" 
                                        runat="server" PromptCharacter="_"     UserDateFormat="DayMonthYear"/> 
```

我期待`TextBox`有一个看起来像`__/___/____`但没有出现在`TextBox`. 这里完全没有头绪！

# sql - 对 ID 字段使用无符号值？

> ID：16170117
> 
> 赞同：0
> 
> 时间：2013-04-23T13:05:11.343
> 
> 标签：sql, int

我刚刚意识到，我见过的没有人在数据库中对 ID 字段使用无符号？

对 ID 使用无符号值不是合乎逻辑吗？由于 ID 字段为 1+ 并且自动递增？

`SMALLINT`例如，使用带符号的 -32767 到 32767。而 0 到 65535？

这有什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:08:31.297

首先，在大多数情况下，这并不重要。许多数据库不会达到 20 亿行，当然也不会达到 40 亿行（假设是 32 位整数；我还没有看到任何人使用`smallint`ID）。

还有一些数据库需要全局唯一 ID，`int`除了 GUID 之外根本不使用。显然，签名在那里的问题更小。

# windows - 用于drupal自动化的Windows azure上的Drush（或同等产品）？

> ID：16170120
> 
> 赞同：1
> 
> 时间：2013-04-23T13:05:16.833
> 
> 标签：windows, azure, drupal-7, drush

我在 windows-azure ( *webrole/cloud service* ) 上设置了一个 drupal 多站点环境。[**Drush**](http://www.drush.org/)是一个很棒的命令行工具，是一次维护多个多站点所必需的。

Drupal 的 Windows Azure 集成非常好，但我还没有发现任何关于 Windows azure 上命令行界面自动化的信息。

有没有人有经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T15:05:03.557

好吧，在 Azure 上设置 Drush 非常容易。您只需将 Drush 文件和文件夹放在 Web 角色的资源文件夹中并运行启动任务以将“drush”注册到 PATH 变量。

# linux - 在 Linux 中进行 diff 时忽略 asterix(*)

> ID：16170121
> 
> 赞同：5
> 
> 时间：2013-04-23T13:05:18.530
> 
> 标签：linux, diff

我正在尝试使用Linux中的标准diff命令来查找2个文件的差异。文件内容如下：

文件 1

```
Jim
Jack
Tracy*
Michelle 
```

文件2

```
Jim
Jack
Tracy
Michael 
```

diff File1 File2 给了我以下信息：

```
< Tracy*
< Michelle
---
> Tracy
> Michael 
```

但是，我希望 diff 忽略 asterix(*) 并给出以下输出：

```
< Michelle
---
> Michael 
```

有可能这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:09:05.920

尝试

```
diff -I '*$' FILE1 FILE2 
```

> -I RE --ignore-matching-lines=RE
> 
> 忽略行都匹配 RE 的更改

注意：这仅适用于行尾星号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:28:50.697

使用 ShinTakezou 的方法，但这次使用`sed`：

```
diff <(sed 's/\*$//' file1) <(sed 's/\*$//' file2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:14:02.890

如果您使用没有该`-I`选项的 diff，您可以将包含星号的行 grep 到临时文件中，然后对临时文件进行 diff。如果你使用 bash，你可以使用“两个管道”，但如果你有它，你可能也有带有`-I`选项的 diff。无论如何都会

```
sed 's/*$//' file1 >file1.temp
sed 's/*$//' file2 >file2.temp
diff file1.temp file2.temp 
```

或者

```
diff <(sed 's/*$//' file1) <(sed 's/*$//' file2) 
```

（未经测试，但它也可以在其他 shell 中工作）

**请注意** ，“星”已被删除，从差异的角度来看，它从未存在过。

# sql - 具有（模拟）多态关联的表上的 PK

> ID：16170123
> 
> 赞同：1
> 
> 时间：2013-04-23T13:05:19.037
> 
> 标签：sql, ms-access, primary-key, polymorphic-associations

我正在尝试在我刚刚创建的包含 4 个“多态关联”和一个 PK 的表上设置正确的索引`ID`。这 4 个关联使我不必将要添加到数据库的表数增加四倍，并且不应在此讨论中进行修改。我的问题是我应该如何设置索引以获得最佳性能（速度，空间不是那么多）？4 把钥匙都不是 PK 的候选者。更具体地说，所有 4 个都是但一次只有一个。我添加了一个 PK“ID”，因为我读过添加一个 PK，即使不使用，也比不添加一个 PK 要好。然而，我越来越质疑这种说法。

有关该表的更多信息：应该使用 4 个 FK 中的一个的逻辑由 Access 表单强制执行。非开发人员没有人可以直接访问这些表。只要这个数据库还在使用，我预计每个月不会超过几百个条目。假设我们再使用它 10 年并且平均每月 500 个条目（这可能比实际多一点），我们在 10 年内应该有不超过 60k 个条目。基本上，这不是一个人口众多的表格。

数据库和表单在 Access 2003 上运行（是的，我知道......）。

我希望这是足够的信息来帮助我。在下图中，您可以看到现在的表结构。4 个 FK 是`NoDemandeAmendementTransit`, `NoDemandeAmendementRubrique`, `NoAmendementTransit`, `NoAmendementRubrique`.

非常感谢。

![在此处输入图像描述](https://i.stack.imgur.com/FNfgg.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:45:45.163

一个更实用的设计是为您引用的所有四个子类型创建一个单一的超类型表。然后使用单个外键而不是四个单独的 FK 来引用超类型表。这是您可以在大多数关于数据库设计的好书中找到的设计模式，它比拥有多个“可选”外键更简单、更有效。它还将为您提供更有用的主键。

# jquery - 创建圆形仪表，背景颜色会产生问题

> ID：16170124
> 
> 赞同：1
> 
> 时间：2013-04-23T13:05:24.870
> 
> 标签：jquery, html, css

我正在尝试创建一个圆形仪表，它将根据值进行更新。问题是外圈有一个红色边框......有没有一个好的方法来删除它......这是我的[小提琴](http://jsfiddle.net/iiison/aAeSk/)

这是 HTML 代码：

```
<div class="outer">
    <div class="left-cov"></div>
    <div class="right-cov"></div>
    <div class="inner">
        <p class="fy-rate">1.5</p>
    </div>
</div> 
```

以下是为此的CSS代码：

```
* {
    float:left;
    margin:0px;
    padding:0px;
}
.outer {
    border-radius:50%;
    background-color:red;
    width:220px;
    height:220px;
    position:relative;
    margin:20px;
    overflow:hidden
}
.inner {
    border-radius: 50%;
    background-color:yellow;
    width:180px;
    height:180px;
    position:relative;
    top:20px;
    left:20px;
}
.left-cov {
    height:100%;
    width:50%;
    position:absolute;
    top:0px;
    left:0px;
    background-color:grey
}
.right-cov {
    height:100%;
    width:50%;
    background-color:grey;
    position:absolute;
    bottom:0px;
    right:0px;
}
.fy-rate {
    font-size:52px;
    width:100%;
    text-align:center;
    margin-top:45px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:24:04.397

我认为这是一个抗锯齿问题。

你唯一能做的就是添加一个盒子阴影来稍微改进：

```
.left-cov {
  ...
  box-shadow: -1px -1px 0 gray;
} 
```

（JS-小提琴：http: [//jsfiddle.net/aAeSk/2/](http://jsfiddle.net/aAeSk/2/)）

或者在具有更多设计控制可能性的 HTML5 画布中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:28:21.183

从这个答案复制粘贴：[Border Radius = Background Bleed](https://stackoverflow.com/questions/4401442/border-radius-background-bleed) by user [mingos](https://stackoverflow.com/users/244727/mingos)，2010 年 12 月 9 日 18:10 回答：

> 这不是你在等待的，我知道，但我必须这样说： **使用图像**。这不仅是因为可以消除所有浏览器上的出血。与 Chrome 无情地屠杀按钮的外观相比，您在 Firefox 上的出血问题根本算不上什么……检查它并开始哭泣 :(.-moz-background-clip: padding; [...](https://stackoverflow.com/questions/4401442/border-radius-background-bleed)

# requirejs - 使用 RequireJS 加载 packery.js

> ID：16170134
> 
> 赞同：2
> 
> 时间：2013-04-23T13:05:47.640
> 
> 标签：requirejs, amd

我正在努力用 require.js 加载 packery.js。脚本已加载，但我在控制台中收到以下错误，即使页面上未初始化 packery。

**未捕获的类型错误：无法读取未定义的属性“原型”：packery.pkgd.js:486**

第 486 行是这样的：

```
 var EventEmitter = window.EventEmitter;
    for ( var prop in EventEmitter.prototype ) {
    Uncaught TypeError: Cannot read property 'prototype' of undefined
      docReady[ prop ] = EventEmitter.prototype[ prop ];
    } 
```

那是我刚刚从github下载的最新版本的packery。有人遇到同样的问题吗？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T07:19:05.440

这是一种加载方式：

1）定义脚本的路径：

```
require.config({
    paths: {
    .....
    "jquery" : "path/to/jquery.js"
    "packery" : "path/to/packery.js"
    .....
} 
```

2) 在 shim 部分定义依赖项

```
shim:{
    "packery" : ["jquery"] 
} 
```

3) 在模块依赖数组中包含库并在回调中使用它

```
define(
    [
        "jquery",
        "packery"
    ],
    function($){
        $('.some').packery
    }
); 
```

# sql - 从 PostgreSQL 表中查找具有最新日期的条目

> ID：16170139
> 
> 赞同：0
> 
> 时间：2013-04-23T13:05:57.463
> 
> 标签：sql, postgresql, select

以下 PostgreSQL SELECT 查询总是返回一个结果，因为该`performance.query_plan`表有几个具有不同`TIMESTAMP`值的条目：

```
SELECT * FROM
  performance.query q,
  performance.query_plan AS qp
WHERE
  q.idx = qp.queryidx
  AND q.newplanneeded > qp.ts
LIMIT 1; 
```

在表中的这几个条目中，`performance.query_plan`我只对具有最新时间戳值（存储在`q.newplanneeded`列中）的条目感兴趣。我如何表达`qp.ts`WHERE 条件应该等于`performance.query_plan`表中最新添加的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:12:12.857

```
SELECT  (q).*, (qp).*
FROM    (
        SELECT  q,
                (
                SELECT  qp
                FROM    query_plan qp
                WHERE   qp.queryidx = q.idx
                ORDER BY
                        ts DESC
                LIMIT   1
                ) qp
        FROM    query q
        ) qv
WHERE   (q).newplanneeded > (qp).ts
ORDER BY
        (q).idx
LIMIT   1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:12:49.667

您的查询需要一个`order by`：

```
select * from
  performance.query q,
  performance.query_plan qp
WHERE
  q.idx = qp.queryidx
  AND q.newplanneeded < qp.ts
order by ts desc
limit 1; 
```

我只是颠倒了比较的方向。

如果所有`ts`都比 q.newplanneeded 更早，则查询不返回任何内容。

如果有些较旧，有些较新，则返回最新值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T15:34:26.930

```
select distinct on (q.idx) *
from
  performance.query q,
  performance.query_plan qp
WHERE
  q.idx = qp.queryidx
order by q.idx, qp.ts desc 
```

# .net - 从 VB.NET 执行 dos 命令

> ID：16170141
> 
> 赞同：1
> 
> 时间：2013-04-23T13:06:04.597
> 
> 标签：.net, vb.net, dos

我需要从 VB.NET 应用程序执行一个外部进程，通常我从命令提示符运行这个进程：

```
c:\> net.exe use \\192.168.0.5\ipc$ 
```

执行此命令时，它会显示一个字符串，如“连接成功”或“访问被拒绝”或任何其他相关消息。

**我需要从 vb.net 执行这个命令，并且我可以捕获输出字符串吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:13:14.760

试试下面的代码，它将把你的命令作为参数并在文本框中打印输出。

```
Imports System.Diagnostics

Public Class frmConsoleDemo

Friend WithEvents txtConsoleOut As System.Windows.Forms.TextBox
Friend WithEvents txtConsoleIn As System.Windows.Forms.TextBox

Private psi As ProcessStartInfo
Private cmd As Process
Private Delegate Sub InvokeWithString(ByVal text As String)

Private Sub frmConsoleDemo_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    psi = New ProcessStartInfo("cmd.exe")

    Dim systemencoding As System.Text.Encoding = _
        System.Text.Encoding.GetEncoding(Globalization.CultureInfo.CurrentUICulture.TextInfo.OEMCodePage)

    With psi
        .UseShellExecute = False  ' Required for redirection
        .RedirectStandardError = True
        .RedirectStandardOutput = True
        .RedirectStandardInput = True
        .CreateNoWindow = True
        .StandardOutputEncoding = systemencoding  ' Use OEM encoding for console applications
        .StandardErrorEncoding = systemencoding
    End With

    ' EnableraisingEvents is required for Exited event
    cmd = New Process With {.StartInfo = psi, .EnableRaisingEvents = True}

    AddHandler cmd.ErrorDataReceived, AddressOf Async_Data_Received
    AddHandler cmd.OutputDataReceived, AddressOf Async_Data_Received
    AddHandler cmd.Exited, AddressOf CMD_Exited

    cmd.Start()
    ' Start async reading of the redirected streams
    ' Without these calls the events won't fire
    cmd.BeginOutputReadLine()
    cmd.BeginErrorReadLine()

    Me.txtConsoleIn.Select()
End Sub

Private Sub CMD_Exited(ByVal sender As Object, ByVal e As EventArgs)
    Me.Close()
End Sub

' This sub gets called in a different thread so invokation is required
Private Sub Async_Data_Received(ByVal sender As Object, ByVal e As DataReceivedEventArgs)
    Me.Invoke(New InvokeWithString(AddressOf Sync_Output), e.Data)
End Sub

Private Sub Sync_Output(ByVal text As String)
    txtConsoleOut.AppendText(text & Environment.NewLine)
    txtConsoleOut.ScrollToCaret()
End Sub

' Sending console commands here
Private Sub txtConsoleIn_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles txtConsoleIn.KeyPress
    If e.KeyChar = ControlChars.Cr Then
        cmd.StandardInput.WriteLine(txtConsoleIn.Text)
        txtConsoleIn.Clear()
    End If
End Sub

' Two text boxes called txtConsoleOut and txtConsoleIn
Public Sub New()
    Me.txtConsoleOut = New System.Windows.Forms.TextBox()
    Me.txtConsoleIn = New System.Windows.Forms.TextBox()
    Me.SuspendLayout()
    '
    'txtConsoleOut
    '
    Me.txtConsoleOut.Anchor = CType((((System.Windows.Forms.AnchorStyles.Top Or System.Windows.Forms.AnchorStyles.Bottom) _
                Or System.Windows.Forms.AnchorStyles.Left) _
                Or System.Windows.Forms.AnchorStyles.Right), System.Windows.Forms.AnchorStyles)
    Me.txtConsoleOut.Location = New System.Drawing.Point(12, 12)
    Me.txtConsoleOut.Multiline = True
    Me.txtConsoleOut.Name = "txtConsoleOut"
    Me.txtConsoleOut.ReadOnly = True
    Me.txtConsoleOut.ScrollBars = System.Windows.Forms.ScrollBars.Both
    Me.txtConsoleOut.Size = New System.Drawing.Size(665, 494)
    Me.txtConsoleOut.TabIndex = 0
    '
    'txtConsoleIn
    '
    Me.txtConsoleIn.Anchor = CType(((System.Windows.Forms.AnchorStyles.Bottom Or System.Windows.Forms.AnchorStyles.Left) _
                Or System.Windows.Forms.AnchorStyles.Right), System.Windows.Forms.AnchorStyles)
    Me.txtConsoleIn.Location = New System.Drawing.Point(10, 512)
    Me.txtConsoleIn.Name = "txtConsoleIn"
    Me.txtConsoleIn.Size = New System.Drawing.Size(667, 20)
    Me.txtConsoleIn.TabIndex = 1
    '
    'frmConsoleDemo
    '
    Me.AutoScaleDimensions = New System.Drawing.SizeF(6.0!, 13.0!)
    Me.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font
    Me.ClientSize = New System.Drawing.Size(689, 544)
    Me.Controls.Add(Me.txtConsoleIn)
    Me.Controls.Add(Me.txtConsoleOut)
    Me.Name = "frmConsoleDemo"
    Me.Text = "Console redirect demo"
    Me.ResumeLayout(False)
    Me.PerformLayout()

End Sub

End Class 
```

希望能帮助到你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:09:46.523

您可以使用[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类以这种方式启动外部进程。

要捕获其输出，请读取`Process.StandardOutput`和/或`Process.StandardError`流。

# post - 通过 HTTPS 发布数据是否足够安全？

> ID：16170144
> 
> 赞同：1
> 
> 时间：2013-04-23T13:06:11.483
> 
> 标签：post, ssl, https

我有一个页面，我需要通过帖子发送参数（比如 param1），并且网站通过 HTTPS 运行，任何人都可以破解这些信息是否安全，通过 https 发送信息的正确解决方案是什么？

下面是 JSP 页面，确实信息是通过 HTTPS 发送的，但用户可以查看源代码以查看 param1 和 param2 的值，我们是否会使用一些加密标准或 jsp taglib 以便用户无法查看源代码读取 param1 和 param2 值。

## 测试页面.jsp

```
This is a parent page , in this a second jsp is included

<form id="myForm" target="iframe" method="post"   action="http://www.abc.com/jsp/dGrid.jsp">
    <input type="hidden" name="param1" value="77"/>
    <input type="hidden" name="param2" value="SS"/>
</form>

<iframe name="iframe" width="1500px" scrolling="no" height="1170px" frameborder="0"   allowtransparency="">
</iframe>

<script type="text/javascript">
 document.getElementById('myForm').submit();
</script> 
```

# wpf - 使用分层数据模板时禁用树视图根节点

> ID：16170145
> 
> 赞同：0
> 
> 时间：2013-04-23T13:06:11.767
> 
> 标签：wpf, mvvm, treeview, hierarchicaldatatemplate

我使用 WPF/MVVM 来玩弄树视图控件

```
<TreeView HorizontalAlignment="Left" 
                  Height="319" 
                  VerticalAlignment="Top" 
                  Width="517"
                  ItemsSource="{Binding Tree}"
                  >
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                    <StackPanel Orientation="Horizontal">
                        <Button Width="100" Height="20" IsEnabled="{Binding IsEnabled}" Content="{Binding Name}" />
                    </StackPanel>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView> 
```

这是我的节点类视图模型

```
public partial class MainWindow : Window
    {
        class TreeNode
        {
            public string Name { get; set; }
            public bool IsEnabled { get; set; }
            public List<TreeNode> Children { get; set; }
            public TreeNode()
            {
                Children = new List<TreeNode>();
                IsEnabled = true;
            }
        }

        class ViewModel
        {
            public List<TreeNode> Tree { get; private set; }
            public ViewModel()
            {
                Tree = new List<TreeNode>();
            }
        }

        public MainWindow()
        {
            InitializeComponent();

            var viewModel = new ViewModel
                {
                    Tree =
                        {
                            new TreeNode
                                {
                                    Name = "Root 1",
                                    IsEnabled = false,
                                    Children = {
                                        new TreeNode { Name = "Child 1" },
                                        new TreeNode { Name = "Child 2" },
                                        new TreeNode { Name = "Child 3", 
                                            Children =
                                                {
                                                    new TreeNode { Name = "Child 3-1" },
                                                    new TreeNode { Name = "Child 3-2" },
                                                    new TreeNode { Name = "Child 3-3" }, 
                                                }
                                        },
                                    }
                                }
                        }
                };

            DataContext = viewModel;
        }
    } 
```

如您所见，我将属性“IsEnabled”绑定到按钮，这一切都很好，但我实际上想将“IsEnabled”属性绑定到实际的根节点元素，而不是节点内的对象。

我需要做什么来根据这个属性值禁用整个根节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:17:24.313

为此，您实际上需要影响`ItemContainerStyle`. 这会设置为树的每个节点生成`TreeView`的 ItemContainer ( ) 的样式。`TreeViewItem`

```
<TreeView HorizontalAlignment="Left" Height="319" VerticalAlignment="Top" Width="517" ItemsSource="{Binding Tree}">
    <TreeView.ItemTemplate>
        <!-- Leave this the same, except for the IsEnabled binding on the button -->
    </TreeView.ItemTemplate>
    <TreeView.ItemContainerStyle>
        <Style TargetType="{x:Type TreeViewItem}">
            <Setter Property="IsEnabled" Value="{Binding IsEnabled}"/>
        </Style>
    </TreeView.ItemContainerStyle>
</TreeView> 
```

# html - Z-index 在子导航中不起作用

> ID：16170153
> 
> 赞同：0
> 
> 时间：2013-04-23T13:06:21.997
> 
> 标签：html, css, navigation, positioning, z-index

我有一个问题，我的 z-index 无法启动，我真的不明白为什么。我无法重新定位 DOM 中的元素，我需要一个纯粹基于 CSS 的解决方案，而无需任何更大的黑客攻击

我有以下导航：

```
<nav>
    <div class="wrapper">
        <ul>
            <li>Test</li>
            <li>Test
                <ul>
                    <li>Sub test</li>
                    <li>Sub test</li>
                </ul>
            </li>
        </ul>
    </div>
</nav> 
```

[http://jsfiddle.net/S3XBD/1/](http://jsfiddle.net/S3XBD/1/)

我将它与 CSS 一起打包以展示我的问题

我的目标是以与小提琴中演示的完全相同的方式**获取绿色框（顶级导航）下的****蓝色框**（子导航）

 **有什么方法可以修复我的 z-indexes 或者有人可以指出我的错误吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:10:49.897

只需从 .wrapper 元素中删除 z-index 并将第二个 ul 的 z-index 更改为 -1

```
nav .wrapper {
    width: 100%;
    max-width: 400px;
    background: green;
    margin: 0px auto;
    position: relative;
}

...

nav ul ul {
    display: none;
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    background: blue;
    z-index: -1;
} 
```

[http://jsfiddle.net/S3XBD/2/](http://jsfiddle.net/S3XBD/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:18:17.470

我已经更新了你的 CSS 并删除了悬停，因为这很容易解决：但我相信你遇到的问题只是你的定位

```
 nav {
    width: 100%;
    background: red;
}

nav .wrapper {
    width: 100%;
    max-width: 400px;
    background: green;
    margin: 0px auto;
    position: relative;
    z-index: 50 ;
}

nav ul {
    list-style: none;
}

nav ul ul {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    background: blue;
    z-index: 100 !important;
}

nav ul li {
    display: inline-block;
}

nav ul li ul {
    display: block;

} 
```

还有一件事：用户 firebug 找出它当前的风格，你可以在运行时在那里修改它。它还支持悬停**

# jquery - 应用 k-state-disabled 时，具有 k-button 样式的锚标记仍可点击

> ID：16170155
> 
> 赞同：3
> 
> 时间：2013-04-23T13:06:29.410
> 
> 标签：jquery, kendo-ui

我正在使用 Kendo UI，我需要在单击按钮后禁用它。

我在点击事件中应用了“k-state-disabled”类。

该按钮在视觉上被禁用（它已经淡出并且看起来被禁用），但是当我将鼠标光标放在它上面时，我得到了按钮的悬停状态，如果我点击，我实际上在我的点击事件中得到了点击。

**按钮标记**

```
<a class="submitButton k-button" >Submit</a> 
```

**脚本**

```
$('.submitButton').live('click', function () {
    $('.submitButton').addClass("k-state-disabled");
    console.log("here");
}); 
```

![多次单击按钮后，我得到了这个](https://i.stack.imgur.com/P2c35.png)

为了完全禁用这个锚，我还需要做些什么吗？我似乎记得在以前版本的剑道中禁用的按钮只能使用这个，但现在我不太确定......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:10:25.453

它总是会被禁用，即使是`k-state-disabled`类，这只是一个类，而不是删除实际事件或禁用标记。

看起来您正在做一个只能点击一次的链接，请将您的代码更改为：

```
$(document).one('click', '.submitButton', function () { // jquery .one will only fire the event once
    $(this).addClass("k-state-disabled");
    console.log("here");
}); 
```

# asp.net - 添加 Linq-to-Sql 类会破坏简单的 ASP.NET Web 应用程序

> ID：16170156
> 
> 赞同：0
> 
> 时间：2013-04-23T13:06:32.293
> 
> 标签：asp.net, linq-to-sql, objectdatasource

使用 VS2012，应用了最新的 SP/更新。

试图让 ObjectDataSource 工作时，我感到非常沮丧。请参阅[http://bit.ly/XTpdvN](http://bit.ly/XTpdvN)和[http://bit.ly/XTpsHi](http://bit.ly/XTpsHi)。

我开始了一个新的 Web 应用程序项目，在每个步骤之后编译和运行，试图使步骤尽可能细化。

1) 创建新的空 Web 应用程序。
2) 添加WebForm1.aspx。
3) 清理、重建、运行（在浏览器或调试器中查看）。
4) 将新类添加到 App_Code。
5) 重复#3。
5) 将现有的 .mdf 添加到 App_Data。
6) 重复#3。
7) 将 Linq-to-Sql 类添加到 App_Code (Items.dbml)。留空。
8）清理，重建，在调试器中运行：

> 编译器错误消息：CS0234：命名空间“System.Data”中不存在类型或命名空间名称“Linq”（您是否缺少程序集引用？）
> 源错误：
> 
> 第 12 行：命名空间 ODS_Restart.App_Code 第 13 行：{ 第 14 行：使用 System.Data.Linq; 第 15 行：使用 System.Data.Linq.Mapping；第 16 行：使用 System.Data；

据我所知，App_Code 中的代码中没有任何内容需要 Linq：

```
namespace ODS_Restart.App_Code  
{   
    public class BAL  
    {  
        public static List<string> GetCountries()  
        {  
            return new List<string>() { "USA", "Aus", "NZ"};  
        }  
    }  
} 
```

正如我所说，非常令人沮丧。任何有关如何解决此问题的见解都将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T15:14:30.773

对 linq to sql 程序使用一个向导：

步骤 1\. 将新项目作为 windows 窗体应用程序。step 2\. 从工具箱中拖出一个按钮和DataGridView就可以了。步骤 2\. 转到解决方案资源管理器。将数据库（.mdf）文件添加到我们采用的 Windows 窗体应用程序项目中。第 3 步。同样的方法，通过右键单击我们采用的 Windows 窗体应用程序项目，将 linq 添加到 sql 类（.dbml）文件。第 4 步。转到服务器资源管理器，在第 3 步中采用的数据库中添加表。将数据添加到该表。步骤 5\. 从解决方案资源管理器中打开该 .dbml 文件，并将从服务器资源管理器创建的表拖到其上。第 6 步。打开第 2 步中创建的表单。双击该按钮并添加以下代码：

```
DataClasses1DataContext obj1 = new DataClasses1DataContext();
        List<pp> obj2 = obj.pps.ToList();
        dataGridView1.DataSource = obj1; 
```

DataClasses1 是步骤 3 中添加的 .dbml 文件。pp 是步骤 4 中添加的表名。obj1 和 obj2 是创建的对象。pps 代表表名（pp）。

# jquery - 隐藏在 ASP.net 中覆盖层后面的模态 jQuery 对话框

> ID：16170157
> 
> 赞同：13
> 
> 时间：2013-04-23T13:06:33.373
> 
> 标签：jquery, asp.net, jquery-ui, modal-dialog, jquery-ui-dialog

我正在开发一些 Jquery 对话框，发现当我设置 Modal: true 时对话框被隐藏了。设置 Modal: false 时，我发现一切都按预期工作。希望可以有人帮帮我。

```
<asp:Button ID="btnOpendialog" runat="server" Text="Button" ClientIDMode="Static" />

<div id="dialog">

<h1>Test</h1>
    <asp:Button ID="btnClickfromDialog" runat="server" Text="Button" />

</div>

$(function () {
    $("#btnOpendialog").click(function (e) {
        $("#dialog").dialog("open");
        return false;
    });

    $("#dialog").dialog({
        height: 200,
        modal: true,
        autoOpen: false,
        open: function () {
            $(this).parent().appendTo($("form:first"));
        }                              
    });
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-24T08:22:35.393

我修好了它。抱怨这个问题的人并不多。只有我吗？无论如何，这就是我修复它的方法。当你知道怎么做时很简单。

```
.ui-widget-overlay
{
        z-index: 0;   
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-15T15:50:23.197

我尝试了接受的答案，它似乎在某些情况下有效，但在其他情况下无效。使用相同的想法，这是我想出的代码...

`.ui-dialog { z-index: 9999 !important; }`

...这是基于 z-index 的`.ui-widget-overlay`事实`9998`。

此外，为了解决叠加层没有覆盖整个页面高度的问题（因为`.ui-widget-overlay`只有高度`1000%`），我想出了这个：

`.ui-widget-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; }`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-24T15:09:54.157

您需要停止像这样使用 appendTo 并使用新的对话框选项“appendTo”

像这样：

```
$( ".selector" ).dialog({ appendTo: "#someElem" }); 
```

取自 jquery-ui 文档 [http://api.jqueryui.com/dialog/#option-appendTo](http://api.jqueryui.com/dialog/#option-appendTo)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-15T14:40:40.570

我需要的所有内容都`z-index:1`应用于`ui-dialog`. 没有`z-index`我可以申请来`ui-widget-overlay`完成这项工作。

我在 Wordpress 中执行此操作，包括“jquery”、“jquery-ui-core”、“jquery-ui-dialog”脚本。这是我的相关CSS：

```
.ui-widget-overlay {    
    position: absolute; 
    top: 0; 
    left: 0; 
    width:100%;
    height:100%;
    background: #aaaaaa;
    opacity: 0.3;  
}    

.ui-dialog {    
    background-color: #FFFFFF;    
    overflow: hidden;   
    z-index:1;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-23T16:54:42.413

您可以创建一个 jsFiddle 在您的环境之外重新创建此问题吗？如果没有，这里有一些想法来自我的脑海：

将您的 javascript 放在文档就绪块中，如下所示：

```
$(document).ready(function() {
// Your javascript here...
}); 
```

将 btnOpendialog 更改为非 ASP.NET 服务器控件。由于它所做的只是打开 jquery 对话框，因此它不需要成为服务器控件。将其更改为：

```
<input type="button" id="btnOpendialog" value="Button" /> 
```

# java - install4j - file with update placed in my local directory

> ID：16170159
> 
> 赞同：2
> 
> 时间：2013-04-23T13:06:38.770
> 
> 标签：java, auto-update, install4j

Could you please help me with next problem. I have stanalone GUI application and in the local directory I have file with update. How I can configure my install4j updater, that it do not download update file via http, but only launch update file from my local directory? Thanks and please sorry if this question has been asked before.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:36:18.313

它更新程序模板执行“检查更新”操作。它的“更新描述符 URL”属性定义了 updates.xml 文件的下载位置。该文件由每个 install4j 构建生成，默认情况下该属性设置为 ${compiler:sys.updatesUrl}。该编译器变量的值来自 Installer->Auto-Update Options 选项卡上的“URL for updates.xml”文本字段。

如果您想从本地目录下载该文件，我建议将“检查更新”操作的“更新描述符 URL”属性更改为安装程序变量，例如 ${installer:myUpdatesUrl}。

您使用字符串值 ${compiler:sys.updatesUrl} 预定义安装程序变量“myUpdatesUrl”。这是通过在安装程序->屏幕和操作上选择更新程序应用程序，切换到右侧的“安装程序变量”选项卡并单击“配置预定义的安装程序变量”来完成的。

现在你可以传递参数

```
-VmyUpdatesUrl=file:///C:/path/to/updates.xml 
```

到安装程序以更改 updates.xml 文件的 URL（注意协议后的 3 个斜杠）。

更新安装程序的媒体文件应与 updates.xml 位于同一目录中

# php - Facebook iframe 类似问题

> ID：16170160
> 
> 赞同：0
> 
> 时间：2013-04-23T13:06:38.890
> 
> 标签：php, facebook-like

我在使用 iframe 之类的 Facebook 时遇到问题。我希望能够喜欢每个 id。问题是当我把这段代码放在我的网站上时，点击一个帖子，所有帖子都被点赞。

```
 $sql = "SELECT * FROM $tbl_name ORDER BY id DESC LIMIT $start, $limit";
if(isset($_GET['id']))
    {
    $id=intval($_GET['id']);
    $sql = "SELECT * FROM $tbl_name WHERE id=$id";
    }
$result = mysql_query($sql);

        while($row = mysql_fetch_array($result))
    {
    echo "<center><a href ='single_joke.php?id=".$row['id']."'>" .$row['Title']."</a></center>";
    echo "<br>";
    echo nl2br($row["VicText"]);
    ?>
    <iframe src="https://www.facebook.com/plugins/like.php?href=http://www.keevik.com/vicevi.php?id=<?php echo $row['id']; ?>"
    scrolling="no" frameborder="0"
    style="border:none; width:450px; height:80px"></iframe>
    <?php
    echo "<hr>";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:54:15.800

但是，您需要`urlencode()`您的 URL，因为如果您在 URL 中添加第二个参数，http 服务器会将第二个参数解释为 facebook URL 的参数，而不是您的 ;)

# java - unable to process the URL in eclips juno

> ID：16170161
> 
> 赞同：0
> 
> 时间：2013-04-23T13:06:40.587
> 
> 标签：java, jsp, jakarta-ee

```
<html>
<head>
<style type="text/css">

body {background-image:url("../images/liza.jpg");}      //---- this line

</style>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body >
...
...
... 
```

in this code i dont know why i am unable to include this image in my jsp page ....

this is a jsp page designed in eclips juno

the directory structure is
--> myweblib
-->---- webcontent
-->--------- images
--> --------------liza.jpg
-->build

url while running this page in eclips

```
http://localhost:8081/MyWebLibrary/books.jsp 
```

my jsp file is directly in side the webcontent folder ie: "webcontent/books.jpg" and my image is inside: "webcontent/images/liza.jpg"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:20:18.810

删除 ../ 您的图像部署在上下文中，而不是在主机根目录上

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:37:54.470

去除 ”

CSS 不需要它们

# jquery - 在文档准备好时多次调用插件功能？

> ID：16170166
> 
> 赞同：1
> 
> 时间：2013-04-23T13:07:05.570
> 
> 标签：jquery, function, document-ready

我制作了 jquery 插件，将所需元素的样式设置为时尚的窗口。

我需要在文档就绪时调用插件函数，以便可以对所需元素进行样式化和隐藏，等待触发器显示它们。

问题是，当我第一次调用 ondocument.ready 函数来设置元素样式时，它不会运行多次，这意味着我只能在 document.ready 上设置和隐藏一个元素。我仍然可以通过其他事件触发两次来手动完成。

我认为插件脚本中存在一个问题，不允许同时多次触发该功能！

这是代码，第一次调用将使用插件，第二次不会在文档准备好。任何帮助，将不胜感激！

```
$(document).ready(function() {  

    $("#addAdmin").flexWin();
    $("#msg").flexWin();

}); 
```

和插件脚本：

```
 (function($){$.fn.extend({ 
    flexWin: function(options) {
        $(window).resize(function() {
            resizer()
        });

        var defaults = {
            background:'#000',
            width: '400px',
            height:'400px',
            defTab: 0,
            closeX: "block", 
            show: 0,
            zindex: 0,
        };

        if (options==null) {                

        }

        var settings = $.extend(defaults, options);

        var n = $("#menu > li").size();         
        var o =settings;
        var objID = $(this).attr('id');
        var obj = $('#'+objID);
        var finalWidth 
        var finalHeight         
        //CSS Adjustments
        if (o.width.indexOf("%") >= 0){
            finalWidth = $(window).width() * (parseFloat(o.width)/100)+"px"
        }
        else{
            finalWidth = o.width
        }               
        if (o.height.indexOf("%") >= 0){
            finalHeight = $(window).width() * (parseFloat(o.width)/100)+"px"
        }
        else{
            finalHeight = o.height
        }

        if (!$('#header',obj).length) {

            obj.css({'width':finalWidth,'height':finalHeight,'overflow': 'hidden', 'border':'solid 2px #0173ff',
            'border-radius': '20px', '-webkit-border-radius': '20px', '-moz-border-radius': '20px'});

            //center window
            obj.css("position","absolute");
            obj.css("top", Math.max(0, (($(window).height() - obj.outerHeight()) / 2) + $(window).scrollTop()) + "px");
            obj.css("left", Math.max(0, (($(window).width() - obj.outerWidth()) / 2) + $(window).scrollLeft()) + "px"); 

            //Transparent background
            copystyle ={
                'background':'#ffffff',
                'opacity':'0.7',
                '-moz-opacity':'0.7',
                'filter':'alpha(opacity=70)',
                'position':'absolute',
                'z-index':'-1',
                'height':'100%',
                'width':'100%',
                'border-radius':'20px', 
                '-webkit-border-radius': '20px', 
                '-moz-border-radius': '20px',
            };
            obj.append('<div id="'+objID+'TransBG"></div><div id="header"></div><div id="close">&#10005</div>');    

            //$('<div id="'+objID+'TransBG"></div>').insertBefore(obj);
            $('#'+objID+'TransBG').css(copystyle);

            //objWB = $('#'+objID+'TransBG') //id of main element With Backgroud                    

            obj.hide();     
            //Transparent background____________

            //Shape objects

            if(n==0){
                var title = obj.attr("title");
                $('#header',obj).append('<div id="title"></div>');
                $('#title',obj).css({'font-size':'20px','color':'#0173ff','text-align':'center','line-height':'30px','width':'100%','height':'34px'});  
                $('#title',obj).text(title);
            }

            $('#header',obj).css({
                'position':'absolute', 'top':'0px','left':'0px','margin':'0px','padding':'0px', 'z-index':-1,
                'width':'100%','height':'35px',
                'border-radius': '15px 15px 0 0',
                '-webkit-border-radius': '15px 15px 0 0',
                '-moz-border-radius':'15px 15px 0 0',

                'background': '#ffffff',
                'background':'-moz-linear-gradient(top,  #ffffff 0%, #f1f1f1 60%, #e1e1e1 84%, #f6f6f6 94%, #0173ff 100%)', 
                'background': '-webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(60%,#f1f1f1), color-stop(84%,#e1e1e1), color-stop(94%,#f6f6f6),color-stop(100%,#0173ff))',
                'background': '-o-linear-gradient(top,  #ffffff 0%,#f1f1f1 60%,#e1e1e1 84%,#f6f6f6 94%, #0173ff 100%)',                 
                'background': '-ms-linear-gradient(top,  #ffffff 0%,#f1f1f1 60%,#e1e1e1 84%,#f6f6f6 94%, #0173ff 100%)',
                'background': 'linear-gradient(to bottom,  #ffffff 0%,#f1f1f1 60%,#e1e1e1 84%,#f6f6f6 94%, #0173ff 100%)',
                'background-image': '-webkit-linear-gradient(top,  #ffffff 0%,#f1f1f1 60%,#e1e1e1 84%,#f6f6f6 94%, #0173ff 100%)',              
                'filter': 'progid:DXImageTransform.Microsoft.gradient( startColorstr="#ffffff", endColorstr="#f6f6f6",GradientType=0 )',                            
            });
            $('#close',obj).click(function(){obj.flexWin()}).css({
                'position':'absolute', 'top':'6px','right':'6px','margin':'0px','padding':'0px',
                'width':'20px','height':'20px','color': '#0173ff','text-align':'center','line-height':'20px','font-size': '14px',   
                'cursor': 'hand','cursor': 'pointer', 'display': o.closeX,              
            });
            if ( o.show==1) {
                obj.show();                 
            }
            else{
                obj.hide();
            }
            if ( $.browser.msie ) {
                $('#header',obj).css({'border-bottom':'solid 2px #1E55B0'});
            }

            //$(obj).delay(300).slideToggle("fast");
        }
        else if ($('#header',obj).length&&options==null) {
             obj.slideToggle("fast");   
        } 
        else if (($('#header',obj).length&&options!=null&&obj.css('display')=='none')) {
             obj.slideToggle("fast");   
             resizer();
        }
        else if ($('#header',obj).length&&options!=null&&obj.css('display')!='none') {
             resizer();
        } 
        //______________________

        if (obj.length > 0) {

        }

        //window style to class objects
        $('.styleIT',obj).css({
                'border-radius': '15px 15px 0 0',
                '-webkit-border-radius': '15px 15px 0 0',
                '-moz-border-radius':'15px 15px 0 0',

                'background': '#ffffff',
                'background':'-moz-linear-gradient(top,  #ffffff 0%, #f1f1f1 60%, #e1e1e1 84%, #f6f6f6 94%, #0173ff 100%)', 
                'background': '-webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(60%,#f1f1f1), color-stop(84%,#e1e1e1), color-stop(94%,#f6f6f6),color-stop(100%,#0173ff))',
                'background': '-o-linear-gradient(top,  #ffffff 0%,#f1f1f1 60%,#e1e1e1 84%,#f6f6f6 94%, #0173ff 100%)',                 
                'background': '-ms-linear-gradient(top,  #ffffff 0%,#f1f1f1 60%,#e1e1e1 84%,#f6f6f6 94%, #0173ff 100%)',
                'background': 'linear-gradient(to bottom,  #ffffff 0%,#f1f1f1 60%,#e1e1e1 84%,#f6f6f6 94%, #0173ff 100%)',
                'background-image': '-webkit-linear-gradient(top,  #ffffff 0%,#f1f1f1 60%,#e1e1e1 84%,#f6f6f6 94%, #0173ff 100%)',              
                'filter': 'progid:DXImageTransform.Microsoft.gradient( startColorstr="#ffffff", endColorstr="#f6f6f6",GradientType=0 )',                            
        });

        //Control window size and position on browser window resize
        function resizer() {
            if (o.width.indexOf("%") >= 0){
                finalWidth = $(window).width() * (parseFloat(o.width)/100)+"px"
            }
            else{
                finalWidth = o.width                    
            }
            if (o.height.indexOf("%") >= 0){
                finalHeight = $(window).height() * (parseFloat(o.height)/100)+"px"
            }
            else{
                finalHeight = o.height
            }   
            obj.stop().animate({
                'left':Math.max(0, (($(window).width() - parseFloat(finalWidth)) / 2) + $(window).scrollLeft()) +'px',
                'top':Math.max(0, (($(window).height() - parseFloat(finalHeight)) / 2) + $(window).scrollTop()) +'px',
                'width':finalWidth,
                'height':finalHeight,
            }, "fast");
            objWB.stop().animate({
                'left':Math.max(0, (($(window).width() - parseFloat(finalWidth)) / 2) + $(window).scrollLeft()) +'px',
                'top':Math.max(0, (($(window).height() - parseFloat(finalHeight)) / 2) + $(window).scrollTop()) +'px',
                'width':finalWidth,
                'height':finalHeight,
            }, "fast");
            tabSpace = parseFloat(finalWidth)-35;
            tabWidth = tabSpace/tabCount
            $("li>h1", obj).css({'width':tabWidth+'px'});
            $("span").text(tabWidth); 
            return false;
        };                  

        var tabSpace = parseFloat(finalWidth)-35;
        var tabCount = $("li", obj).length;
        var tabWidth = tabSpace/tabCount

        return this.each(function() {

            var items = $("li>h1", obj);  
            $("li>h1", obj).css({
                'font-size':'11px', 'z-index':10, 'color':'#2D2D2D','margin':'0px','padding':'0px','text-align':'center','line-height':'30px','overflow':'hidden',
                'width':tabWidth+'px','height':'34px','float':'left',
                'border-radius': '15px 15px 0 0','border-right':'solid 1px #2D2D2D',
                '-webkit-border-radius': '15px 15px 0 0',
                '-moz-border-radius':'15px 15px 0 0',

                'background': '#232020',
                'background':'-moz-linear-gradient(top,  #232020 0%, #000000 68%, #262626 94%, #333333 100%)',  
                'background': '-webkit-gradient(linear, left top, left bottom, color-stop(0%,#232020), color-stop(68%,#000000), color-stop(94%,#262626), color-stop(100%,#333333))',
                'background': '-o-linear-gradient(top,  #232020 0%,#000000 68%,#262626 94%,#333333 100%)',                  
                'background': '-ms-linear-gradient(top,  #232020 0%,#000000 68%,#262626 94%,#333333 100%)',
                'background': 'linear-gradient(to bottom,  #232020 0%,#000000 68%,#262626 94%,#333333 100%)',
                'background-image': '-webkit-linear-gradient(top,  #232020 0%,#000000 68%,#262626 94%,#333333 100%)',               
                'filter': 'progid:DXImageTransform.Microsoft.gradient( startColorstr="#45484d", endColorstr="#000000",GradientType=0 )',    
            });  
            //$("li:not(:eq(2))>h1",this).css("color","red");  
            items.mouseover(function() {
                //$("span").text($(this).parent().index());
                if($(this).parent().index()!=o.defTab){
                    $(this).css({
                        'color':'#fff','border-right':'solid 1px #fff','border-bottom':'solid 1px #fff',
                    })
                }                   
            }).mouseout(function() {
                $("span").text("0"); 
                if($(this).parent().index()!=o.defTab){ 
                    $(this).css({
                        'color':'#2D2D2D','border-right':'solid 1px #2D2D2D','border-bottom':'none',
                    }) 
                }
            }).click(function() {
                o.defTab = $(this).parent().index()
                $("li:eq("+o.defTab+")>h1",obj).css({
                    'color':'#0173ff','border-right':'solid 1px #0173ff','border-left':'solid 1px #0173ff','border-bottom':'none',
                    'background': '#232020',
                    'background':'-moz-linear-gradient(top,  #232020 0%, #000000 68%, #262626 94%, #0173ff 100%)',  
                    'background': '-webkit-gradient(linear, left top, left bottom, color-stop(0%,#232020), color-stop(68%,#000000), color-stop(94%,#262626), color-stop(100%,#0173ff))',
                    'background': '-o-linear-gradient(top,  #232020 0%,#000000 68%,#262626 94%,#0173ff 100%)',                  
                    'background': '-ms-linear-gradient(top,  #232020 0%,#000000 68%,#262626 94%,#0173ff 100%)',
                    'background': 'linear-gradient(to bottom,  #232020 0%,#000000 68%,#262626 94%,#0173ff 100%)',
                    'background-image': '-webkit-linear-gradient(top,  #232020 0%,#000000 68%,#262626 94%,#0173ff 100%)',               
                    'filter': 'progid:DXImageTransform.Microsoft.gradient( startColorstr="#45484d", endColorstr="#000000",GradientType=0 )',
                });
                $("li:not(:eq("+o.defTab+"))>h1",obj).css({
                    'color':'#2D2D2D','border-right':'solid 1px #2D2D2D','border-left':'solid 1px #2D2D2D',
                    'background': '#232020',
                    'background':'-moz-linear-gradient(top,  #232020 0%, #000000 68%, #262626 94%, #333333 100%)',  
                    'background': '-webkit-gradient(linear, left top, left bottom, color-stop(0%,#232020), color-stop(68%,#000000), color-stop(94%,#262626), color-stop(100%,#333333))',
                    'background': '-o-linear-gradient(top,  #232020 0%,#000000 68%,#262626 94%,#333333 100%)',                  
                    'background': '-ms-linear-gradient(top,  #232020 0%,#000000 68%,#262626 94%,#333333 100%)',
                    'background': 'linear-gradient(to bottom,  #232020 0%,#000000 68%,#262626 94%,#333333 100%)',
                    'background-image': '-webkit-linear-gradient(top,  #232020 0%,#000000 68%,#262626 94%,#333333 100%)',               
                    'filter': 'progid:DXImageTransform.Microsoft.gradient( startColorstr="#45484d", endColorstr="#000000",GradientType=0 )',    
                });                      
            });
            $("li:eq("+o.defTab+")>h1",obj).css({
                'color':'#0173ff','border-right':'solid 1px #0173ff','border-left':'solid 1px #0173ff',
                'background': '#232020',
                'background':'-moz-linear-gradient(top,  #232020 0%, #000000 68%, #262626 94%, #0173ff 100%)',  
                'background': '-webkit-gradient(linear, left top, left bottom, color-stop(0%,#232020), color-stop(68%,#000000), color-stop(94%,#262626), color-stop(100%,#0173ff))',
                'background': '-o-linear-gradient(top,  #232020 0%,#000000 68%,#262626 94%,#0173ff 100%)',                  
                'background': '-ms-linear-gradient(top,  #232020 0%,#000000 68%,#262626 94%,#0173ff 100%)',
                'background': 'linear-gradient(to bottom,  #232020 0%,#000000 68%,#262626 94%,#0173ff 100%)',
                'background-image': '-webkit-linear-gradient(top,  #232020 0%,#000000 68%,#262626 94%,#0173ff 100%)',               
                'filter': 'progid:DXImageTransform.Microsoft.gradient( startColorstr="#45484d", endColorstr="#000000",GradientType=0 )',
            });  
        });
    }
});
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:27:41.253

那里有很多代码，但我认为您在这里遗漏了一个关键点。您的插件不必能够应用于多个元素，例如

```
$("#addAdmin,#msg").flexWin(); 
```

这可能是因为您没有为此类插件遵循正确的 jQuery 插件模式。您需要在插件内有一个类/函数来完成插件的所有繁重工作，并且可以在插件内的参数元素上调用，如下所示

```
/* ... some plugin code .. */
this.each(function(){ /*the heavy work here */})
/* ... some plugin code .. */ 
```

在这种情况下`this`，应用插件的元素列表在哪里。`"#addAdmin,#msg"`我发现[这个 jquery 插件样板](http://css-tricks.com/snippets/jquery/jquery-plugin-template/)对您的情况很有帮助。

我希望它有所帮助。

## 更新

*向插件内的答案正文添加有用的注释*
`var n = $("#menu > li").size()`会创建对页面标记结构的依赖。这将影响插件的*插件行为*IMO

# r - 将 kdb+ 数据加载到 R 中

> ID：16170170
> 
> 赞同：2
> 
> 时间：2013-04-23T13:07:16.220
> 
> 标签：r, kdb

我正在尝试从[kdb Cookbook](https://github.com/KxSystems/cookbook/tree/master/r)编译 l64_qserver但我缺少几个文件：

```
# make
/usr/local/R/lib64/R/bin/R CMD gcc -g -O -fPIC -m64   -shared -D KXVER=3 -I. -I/usr/local/R/lib64/R/include base.c c.o -lpthread -L/usr
/local/R/lib64/R/lib -lR -o qserver.so
gcc: c.o: No such file or directory
base.c:11:15: error: k.h: No such file or directory 
```

我在哪里可以找到这些 kh 和 co 文件？在Makefile中的R二进制命令之后'CMD'做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:30:39.647

您丢失的文件位于如下所示的位置

```
https://github.com/KxSystems/kdb/blob/master/c/c/k.h
https://github.com/KxSystems/kdb/blob/master/l64/c.o 
```

# ios - UIPanGestureRecognizer 不能顺利移动 UIImages 并出现渲染？

> ID：16170180
> 
> 赞同：2
> 
> 时间：2013-04-23T13:07:38.430
> 
> 标签：ios, uipangesturerecognizer

我在我的项目中遇到问题我的项目目的是`UIImages`在开始时添加许多图像，这些图像应该可以拖放，因为我使用`UIPanGestureRecognizer`但仍然遇到问题请帮助我提前谢谢。

这段代码在我的`viewdidload`方法中

```
 UIView *holderView = [[UIView alloc]init];

for (int i = 0; i<=4; i+=1) {

    NSMutableArray * images = [[NSMutableArray alloc]initWithObjects:@"iphone-status-bar.png",@"uiswitch.png",@"NavigationBar.png",@"barbutton.png",@"ios-back-button.png", nil];

    NSString * image_name= [NSString stringWithFormat:@"%@",[images objectAtIndex:i]];

//  NSLog(@"%@",image_name);

    UIImage *image = [UIImage imageNamed:image_name];

    holderView = [[UIView alloc] initWithFrame:CGRectMake(2, i*30, image.size.width, image.size.height)];

    UIImageView *imageview = [[UIImageView alloc] initWithFrame:[holderView frame]];

    imageview.userInteractionEnabled = YES;

    [imageview setImage:image];

    [holderView addSubview:imageview];

    UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];

    [panRecognizer setMinimumNumberOfTouches:1];

    [panRecognizer setMaximumNumberOfTouches:1];

    [panRecognizer setDelegate:self];

     [holderView addGestureRecognizer:panRecognizer];

     [self.view addSubview:holderView];
} 
```

手势处理程序是：

```
-(void)move:(id)sender {

    [self.view bringSubviewToFront:[(UIPanGestureRecognizer*)sender view]];
    CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self.view];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {

        firstX = [[sender view] center].x;
        firstY = [[sender view] center].y;
    }

    translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);

    [[sender view] setCenter:translatedPoint];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {

        CGFloat finalX = translatedPoint.x + (.01*[(UIPanGestureRecognizer*)sender velocityInView:self.view].x);
        CGFloat finalY = translatedPoint.y + (.01*[(UIPanGestureRecognizer*)sender velocityInView:self.view].y);

        if(UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation])) {

            if(finalX < 0) {

                finalX = 0;
            }

            else if(finalX > 768) {

                finalX = 768;
            }

            if(finalY < 0) {

                finalY = 0;
            }

            else if(finalY > 1024) {

                finalY = 1024;
            }
        }

        else {

            if(finalX < 0) {

                finalX = 0;
            }

            else if(finalX > 1024) {

                finalX = 768;
            }

            if(finalY < 0) {

                finalY = 0;
            }

            else if(finalY > 768) {

                finalY = 1024;
            }
        }

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:.35];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
        [[sender view] setCenter:CGPointMake(finalX, finalY)];
        [UIView commitAnimations];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:27:29.203

我个人怀疑`holderView`逻辑。您正在使用 的垂直偏移量添加到控制器的顶级视图，`holderView`但是`i * 30`当您将！更糟糕的是，因为您的手势识别器位于而不是，当您尝试通过点击图像来抓取 时，您通常不会超过您认为的那样，而是针对其他图像之一！`imageView``holderView``holderView``i * 30``frame``holderView``y``holderView``imageView``imageView``holderView`

假设您喜欢现在的图像布局方式（实际上相距 60.0 分），那么我建议您将其更改`i*30`为`i*60.0`：

*   `frame`将for 的设置更改`imageView`为`[holderView bounds]`; 或者，甚至更好，

*   完全摆脱`holderView`视图，因为（至少根据您迄今为止共享的内容）它没有增加任何价值，只会使代码复杂化。

顺便说一句，还有一些其他的观察：

*   该`images`数组不需要是可变的，并且您不应该在`for`循环内重新初始化它。

*   您可能应该在循环中引用`[images count]`而不是硬编码。`4``for`

通过这些更改，`viewDidLoad`代码如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSArray *images = [[NSArray alloc]initWithObjects:@"iphone-status-bar.png",@"uiswitch.png",@"NavigationBar.png",@"barbutton.png",@"ios-back-button.png", nil];

    // if you're using a recent version of the compiler, you could simplify that further to just
    //
    // NSArray *images = @[@"iphone-status-bar.png",@"uiswitch.png",@"NavigationBar.png",@"barbutton.png",@"ios-back-button.png"];

    for (int i = 0; i < [images count]; i++) {

        NSString *imageName = [images objectAtIndex:i]; // or you could say `NSString *imageName = images[i];`
        UIImage *image = [UIImage imageNamed:imageName];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        imageView.frame = CGRectMake(2.0, i * 60.0, image.size.width, image.size.height);
        imageView.userInteractionEnabled = YES;
        [self.view addSubview:imageView];

        UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
        panRecognizer.minimumNumberOfTouches = 1;
        panRecognizer.maximumNumberOfTouches = 1;

        [imageView addGestureRecognizer:panRecognizer];
    }
} 
```

`move`你也可以稍微简化你的日常工作：

```
-(void)move:(UIPanGestureRecognizer *)gesture {

    static CGPoint originalCenter; // or make this a class ivar; but don't make this a global!

    if (gesture.state == UIGestureRecognizerStateBegan) {

        [gesture.view.superview bringSubviewToFront:gesture.view];
        originalCenter = gesture.view.center;
    }

    CGPoint translation = [gesture translationInView:self.view];
    CGPoint translatedPoint = CGPointMake(originalCenter.x+translation.x, originalCenter.y+translation.y);

    gesture.view.center = translatedPoint;

    if(gesture.state == UIGestureRecognizerStateEnded) {
        CGPoint velocity = [gesture velocityInView:gesture.view];
        translatedPoint.x = MAX(translatedPoint.x + .01 * velocity.x, 0.0);
        translatedPoint.y = MAX(translatedPoint.y + .01 * velocity.y, 0.0);

        if(UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation])) {

            translatedPoint.x = MIN(translatedPoint.x, 768.0);
            translatedPoint.y = MIN(translatedPoint.y, 1024.0);
        }
        else {

            translatedPoint.x = MIN(translatedPoint.x, 1024.0);
            translatedPoint.y = MIN(translatedPoint.y, 768.0);
        }

        [UIView animateWithDuration:0.35
                              delay:0.0
                            options:UIViewAnimationOptionCurveEaseOut
                         animations:^{
                             gesture.view.center = translatedPoint;
                         }
                         completion:nil];
    }
} 
```

就个人而言，我讨厌看到硬编码的坐标，所以我可能会进一步将`UIGestureRecognizerStateEnded`代码简化为：

```
if(gesture.state == UIGestureRecognizerStateEnded) {
    CGPoint velocity = [gesture velocityInView:gesture.view];
    translatedPoint.x = MAX(translatedPoint.x + .01 * velocity.x, 0.0);
    translatedPoint.y = MAX(translatedPoint.y + .01 * velocity.y, 0.0);
    translatedPoint.x = MIN(translatedPoint.x, gesture.view.superview.bounds.size.width);
    translatedPoint.y = MIN(translatedPoint.y, gesture.view.superview.bounds.size.height);

    [UIView animateWithDuration:0.35
                          delay:0.0
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^{
                         gesture.view.center = translatedPoint;
                     }
                     completion:nil];
} 
```

# wso2esb - 从浏览器调用 REST API

> ID：16170185
> 
> 赞同：0
> 
> 时间：2013-04-23T13:07:46.347
> 
> 标签：wso2esb

我根据本教程创建了 REST API：http: [//docs.wso2.org/wiki/display/ESB460/Using+the+REST+API](http://docs.wso2.org/wiki/display/ESB460/Using+the+REST+API)

当我使用 Curl 调用此服务时，输出是我所期望的。

如果我使用浏览器（在本例中为 Firefox）调用 REST 服务，则会打开数据类型为“application/soap+xml”的“另存为”窗口。

如何更改内容类型（到应用程序/xml）以便在浏览器中看到结果？我正在使用 WSO2 ESB 版本 4.6.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:11:46.880

要测试您的 REST API 并指定您选择的标头和其他信息，您可以使用扩展程序，例如[RESTClient](https://addons.mozilla.org/en-US/firefox/addon/restclient) (Firefox) 或[Postman](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm) (Chrome)

# .net - 将 aximp WrapperTool 与 COM 库一起使用

> ID：16170194
> 
> 赞同：1
> 
> 时间：2013-04-23T13:08:10.120
> 
> 标签：.net, visual-studio-2012, com, reference, ocx

我有一个名为**Cyber​​Sc.ocx**的 OCX 库。

运行以下命令会在我的添加引用对话框的 COM 选项卡中添加一个条目：

```
regsvr32 CyberSc.ocx 
```

![我的参考经理](https://i.stack.imgur.com/nUNbo.png)

当我添加到我的项目时，我得到了这个：

![添加](https://i.stack.imgur.com/sv36r.png)

我的同事在他的 COM 选项卡上有两个条目，都称为**Cyber​​Sc ActiveX Control Module**，当他添加一个条目时，他得到第一个条目对**Interop.CYBERSCLib.dll**的 COM 引用和第二个对**AxInterop.CYBERSCLib.dll**的 COM 引用入口。

我能够添加的 COM 库（Interop 库）出现在我的 *.proj 文件中，如下所示：

```
<COMReference Include="CYBERSCLib">
  <Guid>{5C31C2B3-955D-11D4-B3BB-00D0B77FDB6E}</Guid>
  <VersionMajor>1</VersionMajor>
  <VersionMinor>0</VersionMinor>
  <Lcid>0</Lcid>
  <WrapperTool>tlbimp</WrapperTool>
  <Isolated>False</Isolated>
  <EmbedInteropTypes>True</EmbedInteropTypes>
</COMReference> 
```

我的同事也能够添加第二个库（AxInterop 之一），在 *.proj 文件中有这个供参考：

```
<COMReference Include="AxCYBERSCLib">
  <Guid>{5C31C2B3-955D-11D4-B3BB-00D0B77FDB6E}</Guid>
  <VersionMajor>1</VersionMajor>
  <VersionMinor>0</VersionMinor>
  <Lcid>0</Lcid>
  <WrapperTool>aximp</WrapperTool>
  <Isolated>False</Isolated>
</COMReference> 
```

我们两台机器上的 GUID 相同，而且在两个引用上也是如此，这让我认为他们都使用一个 COM 库，只是使用了两个不同的包装器。这是正确的吗？

我认为我的计算机包含**tlbimp**包装器工具是否正确，所以我可以将它与 COM 库**5C31C2B3-955D-11D4-B3BB-00D0B77FDB6E 一起使用**，但我的计算机不包含**aximp**包装器工具，所以我不能使用它使用相同的库，但是我同事的计算机包含两个包装工具？如果是这样，如何将**aximp**包装器工具添加到我的计算机？

我们在任何一个系统上都只能找到一个 *.OCX 文件。任何人都可以阐明这里发生了什么吗？如何仅从一个 *.ocx 文件将 Interop 和 AxInterop COM 库添加到 Visual Studio 项目的引用管理器的 COM 选项卡？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:20:54.207

万一将来有人偶然发现这个问题，答案很简单。

*   如上所述，您需要使用 regsvr32 将 OCX 文件注册为 COM 库
*   将这个 COM 库添加到您的项目中（从 COM 选项卡）
*   将 Windows 窗体添加到您的项目
*   在设计器中，在工具箱内右键单击，然后单击**选择项目...**
*   单击**COM 组件**选项卡
*   勾选您的 COM 库名称旁边的框
*   在工具箱中找到 OCX 控件并将其拖到 WinForm 设计器上
*   现在 AxInterop COM 库会自动添加到您的项目中，您可以构建

# mobile - 为什么 View.getShowingView() 不返回当前视图？

> ID：16170197
> 
> 赞同：0
> 
> 时间：2013-04-23T13:08:11.777
> 
> 标签：mobile, view, dojo

启动我的应用程序后，有一个命令：

```
var currentView = dojox.mobile.View.getShowingView(); 
```

我“需要”dojox.mobile.View 但 currentView 从不显示 currentView，它在上述命令处停止。我正在使用道场 1.8.3。出了什么问题或我如何才能获得当前视图？

问候汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T15:34:58.937

您必须引用页面中的视图并调用该视图上的方法。

例如：我知道我的视图 ID 之一是“mainView”。

```
 registry.byId("mainView").getShowingView().performTransition("mainView", -1, "slide"); 
```

registry.byId 将搜索主视图。在该视图上，您​​可以执行 .getShowingView()。这会在同级视图中搜索当前可见的视图。

例如，在该视图上，您​​可以向 mainView 添加过渡，例如“返回首页”功能。

# css - 用 Chrome 和铬打印的空输出

> ID：16170201
> 
> 赞同：0
> 
> 时间：2013-04-23T13:08:26.047
> 
> 标签：css, google-chrome, printing

我有一个 css 文件，我定义了屏幕和打印的所有规则（使用`@media print`）。这是一些代码：

```
/* more css rules above */

@media print
{
    body * {
        visibility:hidden;
    }

    #preview, #preview * { 
        visibility:visible; 
    }
} 
```

在 IE 和 Firefox 中一切正常，但在 chrome 和 chromium 中我得到一个空白页面（没有打印任何内容）这些浏览器是否需要任何特殊的考虑？

**编辑：** 我为 Chrome 和 Chromium 下载[了这个插件](http://chrispederick.com/work/web-developer/installed/chrome/04/)，它允许我调试打印样式表，令我惊讶的是，该插件向我显示与 Firefox 和 IE 完全相同。

# jquery - 如何使用 Jquery 添加/删除字段集 - 更好的示例

> ID：16170206
> 
> 赞同：1
> 
> 时间：2013-04-23T13:08:35.637
> 
> 标签：jquery

我们希望允许我们的用户根据他们的需要添加/删除字段集。

这是我想出的代码：

jquery部分：

```
$("#inputRow1").hide();
$("#inputRow2").hide();
$("#remove-last").hide();

$("#add-more").click(function(){

    //count how many *direct children* elements are hidden.
    var hiddenElements = $('#members >:hidden').length;

    $("#remove-last").show();    

    if (hiddenElements === 2) {
        $("#inputRow1").show();
    } else if(hiddenElements === 1) {
        $("#inputRow2").show();
        $(this).hide();
    }
});

$("#remove-last").click(function(){

    //count how many *direct children* elements are hidden.
    var hiddenElements = $('#members >:hidden').length;
    $("#add-more").show();    

    if (hiddenElements === 0) {
        $("#inputRow"+2).hide();
    } else if (hiddenElements === 1) {
         $("#inputRow"+hiddenElements).hide();
        $(this).hide();
    }

}); 
```

HTML 部分（服务器端生成）：

```
<div id="members">
    <div id="inputRow0">
        <input id="input0_0" class="input" type="text" /><br/>
        <input id="input0_1" class="input" type="text" /><br/>
        <input id="input0_2" class="input" type="text" />
    </div>
    <div id="inputRow1">
        <input id="input1_0" class="input" type="text" /><br/>
        <input id="input1_1" class="input" type="text" /><br/>
        <input id="input1_2" class="input" type="text" />
    </div>
    <div id="inputRow2">
        <input id="input2_0" class="input" type="text" /><br/>
        <input id="input2_1" class="input" type="text" /><br/>
        <input id="input2_2" class="input" type="text" />
    </div>
</div>  
<br /><a id="add-more" href="#">add-more</a> <a id="remove-last" href="#">remove-last</> 
```

链接：http: [//jsfiddle.net/URkuW/](http://jsfiddle.net/URkuW/)

我知道他的代码在运行时非常天真。

没有*更好*/*更短*/*更全面*/*更可重用*/的方式吗？:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:48:16.727

这是我的尝试：http: [//jsfiddle.net/URkuW/7/](http://jsfiddle.net/URkuW/7/)

`inputRow`我在你的“行”中添加了一个类

```
function updateVisibility(){
    var cnt = $('#members .inputRow:visible').length;
    $('#add-more').toggle(cnt < 3);
    $('#remove-last').toggle(cnt > 1);
}

$("#inputRow1").hide();
$("#inputRow2").hide();
updateVisibility();

$("#add-more").click(function(){
    $('#members .inputRow:hidden').first().show();
    updateVisibility();
});

$("#remove-last").click(function(){
    $('#members .inputRow:visible').last().hide();
    updateVisibility();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:41:41.970

我已经修改了您的*JQuery 代码*，如下所示，试试看，

**小提琴演示：http:** [//jsfiddle.net/URkuW/5/](http://jsfiddle.net/URkuW/5/)

**CSS：**

```
.divShow
{
    display: block;
}
.divHide
{
    display: none;
} 
```

**HTML：**

```
<div id="members">
    <div id="inputRow0" class="divShow">
        <input id="input0_0" class="input" type="text" /><br/>
        <input id="input0_1" class="input" type="text" /><br/>
        <input id="input0_2" class="input" type="text" />
    </div>
    <div id="inputRow1" class="divHide">
        <input id="input1_0" class="input" type="text" /><br/>
        <input id="input1_1" class="input" type="text" /><br/>
        <input id="input1_2" class="input" type="text" />
    </div>
    <div id="inputRow2" class="divHide">
        <input id="input2_0" class="input" type="text" /><br/>
        <input id="input2_1" class="input" type="text" /><br/>
        <input id="input2_2" class="input" type="text" />
    </div>
</div>  
<br /><a id="add-more" href="#">add-more</a> <a id="remove-last" href="#" class="divHide">remove-last</> 
```

**查询：**

```
$(document).ready(function() {
var tot = $('div[id^="inputRow"]').length;
$("#add-more").click(function() {        
    $('div[id^="inputRow"]:hidden:first').show();    
    ShowHide();
});
$("#remove-last").click(function() {
    $('div[id^="inputRow"]:visible:last').hide();
    ShowHide();;
});
function ShowHide()
{
    var vislen = $('div[id^="inputRow"]:visible').length;
    if(vislen>1)
        $("#remove-last").show();
    else
        $("#remove-last").hide();
    if(vislen == tot)
        $("#add-more").hide();
    else
        $("#add-more").show();
}
}); 
```

# c# - C# 简单文件版本控制

> ID：16170209
> 
> 赞同：0
> 
> 时间：2013-04-23T13:08:57.447
> 
> 标签：c#, file, filesystems, version

是否有 .NET 支持的方式以编程方式对文件系统中的基本文本、excel、word 等文件进行版本控制？

更具体地说，当客户端请求运行报表时，我试图将文件版本属性添加到从服务器流式传输到客户端的 Crystal Reports 文件中。`FileVersionInfo`只支持读取文件版本，`File.GetAttributes`只获取`Hidden`,`Readonly`等内容。

编辑：请注意，我不需要在客户端上保留这些文件的旧版本。我可以删除它们并用较新版本的报告文件替换它们。我只需要一种在客户端持久保存文件版本的方法。

```
string path = @"C:\myReport.rpt";

FileVersionInfo myFileVersionInfo = FileVersionInfo.GetVersionInfo(path);

Console.WriteLine("File: " + myFileVersionInfo.FileDescription + 
                  '\n' + "Version: " + myFileVersionInfo.FileVersion);

if(File.Exists(path))
{
    var fileAttributes = File.GetAttributes(path);
}
Console.ReadKey(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:00:57.590

普通文件没有这些属性。您将不得不在外部实施它们。这个问题也在[这里问](https://stackoverflow.com/questions/5290179/net-write-a-file-with-file-version-information-attached)

根据 MSDN：

> 版本资源通常在 Win32 资源文件或程序集属性中指定。例如，IsDebug 属性反映文件的 VS_FIXEDFILEINFO 块中的 VS_FF_DEBUG 标志值，该块是从 Win32 资源文件中的 VERSIONINFO 资源构建的。有关在 Win32 资源文件中指定版本资源的详细信息，请参阅 Platform SDK 中的“关于资源文件”和“VERSIONINFO 资源”。有关在 .NET 模块中指定版本资源的详细信息，请参阅设置程序集属性主题。 [MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.aspx)

因此，有一些本地方法可以将每个文件的属性存储在单独的“资源”文件中，但它将包括一些本地方法调用和一个 .net warper 类。

# jquery - Jquery内联日期选择器选择多个日期

> ID：16170210
> 
> 赞同：1
> 
> 时间：2013-04-23T13:09:01.653
> 
> 标签：jquery, datepicker

我是 javascript 和 Jquery 的初学者。我正在为 Jquery datepicker 使用[这个插件](http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/)。我使用了内联日期选择器，其中我使用了更改月份和年份等功能。我想在该内联日期选择器中一次选择多个日期。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T13:15:34.493

以前从来没有使用过这个插件，但是如果你看这个页面：[启用多选的 DatePicker](http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerMultiple.html)你需要传递以下参数：

```
selectMultiple:true 
```

所以你可以用类似的东西初始化你的控件：

```
$('.date-pick')
        .datePicker(
            {
                createButton:false,
                displayClose:true,
                closeOnSelect:false,
                selectMultiple:true
            }
        ); 
```

# php - 在 PHP 中获取 MP3 的节拍率

> ID：16170211
> 
> 赞同：1
> 
> 时间：2013-04-23T13:09:02.567
> 
> 标签：php, mp3

有没有可能我可以通过 PHP 获得放置在我的服务器上的音频文件的节拍率（每分钟节拍或每秒节拍）。主要情况是我在服务器上的某个位置有一些音频文件（mp3、wav 等），我必须根据它们的节拍率对它们进行分类。

* * *

我得到了这个： http: [//pear.php.net/reference/MP3_IDv2-0.1.4/__filesource/fsource_MP3_IDv2__MP3_IDv2-0.1.4IDv2FrameTBPM.php.html](http://pear.php.net/reference/MP3_IDv2-0.1.4/__filesource/fsource_MP3_IDv2__MP3_IDv2-0.1.4IDv2FrameTBPM.php.html)

谁能解释一下如何使用函数 getBPM()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-09T08:07:29.567

我为音频文件中的 BPM 检测编写了一个简单的 php 类。它使用 soundtouch 和 ffmpeg 来获取 BPM。你可以在这里得到它 - [php-bpm-detect](https://github.com/deseven/php-bpm-detect)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:23:27.327

您可以尝试在服务器上安装 SoundTouch 音频处理库后从 php 调用它。

常见问题解答指出它可以检测 BPM。我不知道它是否可以处理 mp3 文件，但是您可以使用 ffmpeg 将它们转换为 wav，然后运行 ​​bpm 检测。

请检查链接以获取更多信息。

[SoundStretch 音频处理实用程序](http://www.surina.net/soundtouch/README.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:17:31.830

可以通过多种方式计算节拍率 (BPM)。首先，您需要找到如何检测只有局部声能峰值的节拍。假设您要分析 WAV 文件，最好逐个样本搜索整个文件并找到连续样本之间的高差异。差异有多大？很难说，您将不得不尝试使用不同的值（不同的检测阈值）。MP3 检测更难，因为它也是经过压缩的。

这里有一些其他的想法：

[如何在php中检测歌曲的BPM](https://stackoverflow.com/questions/657073/how-to-detect-bpm-of-the-song-by-programming)

BTW：您确定要使用 PHP 进行 BPM 检测吗？如果您有服务器，您可能还可以使用其他语言，例如作为 cgi 脚本启动的 C/C++。它会更有效地使用内存和 CPU。

祝你的项目好运！

**编辑**：尝试使用 Google 查找不同的项目，但涵盖相同的主题（wav 分析），例如[http://www.ixwebhosting.mobi/2011/09/20/3445.html](http://www.ixwebhosting.mobi/2011/09/20/3445.html) - 从 WAV 文件和将其保存为 PNG。如果它绘制波形，你就领先一步——现在你必须实现算法，而不是绘制样本值，而是分析它们以找到节拍。

# android - Android 设备无法在 Jelly Bean 4.2.2 上捕获低质量视频

> ID：16170218
> 
> 赞同：2
> 
> 时间：2013-04-23T13:09:36.347
> 
> 标签：android, video-capture

似乎即使我将录像机配置文件设置为低，视频质量也是最高的。

这是我的代码：

```
 camera.setDisplayOrientation(90);
        camera.unlock();
        recorder.reset();
        recorder.setCamera(camera);
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        recorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_LOW));

 //when removing these comments I get an exception on my 4.2.2 device when calling start() on the recorder.
/*      recorder.setVideoFrameRate(24);
        recorder.setVideoSize(480, 360);

*/      
        recorder.setOrientationHint(90);
        file = FileUtils.getFileName(FileTypes.VIDEO);
        if (!file.exists()) {
            try {
                file.createNewFile();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        recorder.setOutputFile(FileUtils.getFileName(FileTypes.VIDEO).toString());
        recorder.setMaxDuration(45000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:35:14.560

尝试这个。尽管这看起来与您的代码相同，但它适用于我。为 CamcorderProfile 创建一个单独的实例并将记录器配置文件设置为此实例。

```
 CamcorderProfile cprofileLow = CamcorderProfile
            .get(CamcorderProfile.QUALITY_LOW);
    recorder.setProfile(cprofileLow);
    recorder.setOutputFile("/sdcard/videocapture_example.mp4");
    recorder.setMaxDuration(50000); // 50 seconds
    recorder.setMaxFileSize(3000000); // Approximately 3 megabytes 
```

请注意您有一个高端设备（因为您的设备是 4.2.2），您可能会得到一个比较好的分辨率，它是您设备中可能的最低分辨率。

# .htaccess - OpenCart 子域 .htaccess 问题

> ID：16170227
> 
> 赞同：0
> 
> 时间：2013-04-23T13:10:01.910
> 
> 标签：.htaccess, mod-rewrite, subdomain, opencart

我已经在我公司的子域上安装了 opencart，如下所示：[http://store.example.in](http://store.example.in)，也就是说，通过在主域下面创建一个子域，因为我不想打扰主站点。不幸的是，即使通过管理面板（系统 | 设置 | 服务器 | 使用 SEO URL -> 是）启用它们，我也无法获得干净的 SEO 友好 URL。我也将`.htaccess`文件添加到安装根目录，部分内容如下：

```
# SEO URL Settings
RewriteEngine On
# If your opencart installation does not run on the main web folder make sure you folder it does run in ie. / becomes /shop/ 

RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteRule ^download/(.*) /index.php?route=error/not_found [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?route=$1 [L,QSA] 
```

我试着把`RewriteBase /`东西改成`RewriteBase /store.example.in/`甚至 `RewriteBase /store/example.in/`但也不去那里。

我尝试寻找答案，发现解决方案的链接很少，其中还包括以下内容：[Opencart .htaccess issue](https://stackoverflow.com/questions/4862691/opencart-htaccess-issue) 这也没有多大帮助。

# r - 使用 R 删除低于四分位数阈值的数据

> ID：16170236
> 
> 赞同：1
> 
> 时间：2013-04-23T13:10:30.250
> 
> 标签：r, correlation

我正在使用 R 创建相关性，代码如下：

```
Values<-read.csv(inputFile, header = TRUE)
O<-Values$Abundance_O
S<-Values$Abundance_S
cor(O,S)
pear_cor<-round(cor(O,S),4)
outfile<-paste(inputFile, ".jpg", sep = "")
jpeg(filename = outfile, width = 15, height = 10, units = "in", pointsize = 10, quality = 75, bg = "white", res = 300, restoreConsole = TRUE)
rx<-range(0,20000000)
ry<-range(0,200000)
plot(rx,ry, ylab="S", xlab="O", main="O vs S", type="n")
points(O,S, col="black", pch=3, lwd=1)
mtext(sprintf("%s %.4f", "pearson: ", pear_cor), adj=1, padj=0, side = 1, line = 4)
dev.off()
pear_cor 
```

我现在需要找到每组数据的下四分位数并排除下四分位数内的数据。然后，我想重写没有这些值的数据，并在相关分析中使用新的数据列（因为我想通过下四分位数对数据进行阈值处理）。如果有一种方法我可以编写它，以便通过应用来自 Java 的参数（就像我对输入文件名一样）轻松更改阈值，那就更好了！

太感谢了。

我现在已经暗示了下面的答案，这是有效的，但是我需要将数据对保持在一起以进行相关性。这是我的数据示例（来自 csv）：

```
Abundance_O Abundance_S
3635900.752 1390.883073
463299.4622 1470.92626
359101.0482 989.1609251
284966.6421 3248.832403
415283.663  2492.231265
2076456.856 10175.48946
620286.6206 5074.268802
3709754.717 269.6856808
803321.0892 118.2935093
411553.0203 4772.499758
50626.83554 17.29893001
337428.8939 203.3536852
42046.61549 152.1321255
1372013.047 5436.783169
939106.3275 7080.770535
96618.01393 1967.834701
229045.6983 948.3087208
4419414.018 23735.19352 
```

因此，如果一个值不符合我的四分位数阈值（0.25 四分位数），我需要排除行中的两个值。因此，如果 O 的四分位数为 45000，则将删除“42046.61549,152.1321255”行。这可能吗？如果我将两列都作为数据框读取，我可以分别搜索每一列吗？或者找到四分位数，然后将该值输入到代码中以删除相应的行？

再次感谢，并对问题的演变感到抱歉！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T13:23:05.357

请尝试提供一个可重现的示例，但如果您在 data.frame 中有数据，您可以使用该`quantile`函数作为逻辑测试对其进行子集化。例如，在以下数据中，我们只想从数据框中选择测量变量“Val”的值高于底部四分位数的行：

```
# set.seed so you can reproduce these values exactly on your system
set.seed(39856)
df <- data.frame( ID = 1:10 , Val = runif(10) )
df
   ID        Val
1   1 0.76487516
2   2 0.59755578
3   3 0.94584374
4   4 0.72179297
5   5 0.04513418
6   6 0.95772248
7   7 0.14566118
8   8 0.84898704
9   9 0.07246594
10 10 0.14136138

# Now to select only rows where the value of our measured variable 'Val' is above the bottom 25% quartile
df[ df$Val > quantile(df$Val , 0.25 ) , ]
  ID       Val
1  1 0.7648752
2  2 0.5975558
3  3 0.9458437
4  4 0.7217930
6  6 0.9577225
7  7 0.1456612
8  8 0.8489870

# And check the value of the bottom 25% quantile...
quantile(df$Val , 0.25 )
      25% 
0.1424363 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-26T12:37:33.590

虽然这是一个老问题，但我在自己的研究中遇到了这个问题，我得出了一个可能有人感兴趣的解决方案。

我首先定义了一个函数，它将数值向量转换为其分位数组。参数 n 确定分位数长度（四分位数 n = 4，十分位数 n = 10）。

```
qgroup = function(numvec, n = 4){

  qtile = quantile(numvec, probs = seq(0, 1, 1/n))
  out = sapply(numvec, function(x) sum(x >= qtile[-(n+1)]))

  return(out)
} 
```

函数示例：

```
v = rep(1:20)

> qgroup(v)
[1] 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3 4 4 4 4 4 
```

现在考虑以下数据：

```
dt = data.table(
  A0 = runif(100),
  A1 = runif(100)
) 
```

我们对数据应用*qgroup()*以获得两个四分位组列：

```
cols = colnames(dt)
qcols = c('Q0', 'Q1')

dt[, (qcols) := lapply(.SD, qgroup), .SDcols = cols]

head(dt)

>   A0           A1        Q0 Q1
1:  0.72121846   0.1908863  3  1
2:  0.70373594   0.4389152  3  2
3:  0.04604934   0.5301261  1  3
4:  0.10476643   0.1108709  1  1
5:  0.76907762   0.4913463  4  2
6:  0.38265848   0.9291649  2  4 
```

最后，我们只包括两个四分位数组都高于第一个四分位数的行：

```
dt = dt[Q0 + Q1 > 2] 
```

# c# - 在 WCF REST 中使用 ContentType“text/xml”和预定义 XML 时出现错误请求

> ID：16170237
> 
> 赞同：1
> 
> 时间：2013-04-23T13:10:30.753
> 
> 标签：c#, xml, wcf, rest

我需要编写一个接受来自客户端应用程序的 XML 文档的 REST 服务。我无权访问客户端应用程序，也无法更改。

它使用内容类型为 text/xml 的 HTTP POST 发送文档；字符集=“UTF-8”。

我尝试了两种不同的操作合同，它们都有不同的问题......

首先我的主机代码：

```
 private static WebServiceHost _host;

    public static void ConnectToHost()
    {
        string url = ConfigHelper.GetValue("WebService.config", "WebServiceURL");
        Uri baseAddress = new Uri(url);
        Type instanceType = typeof(CXMLService);
        _host = new WebServiceHost(instanceType, baseAddress);
        Type contractType = typeof(ICXMLService);

        ServiceEndpoint endpoint = _host.AddServiceEndpoint(contractType, new WebHttpBinding(), "Web");            
        endpoint.Behaviors.Add(new WebHttpBehavior());            
        _host.Open();
    } 
```

如果我用这个...

```
 [OperationContract]
    [WebInvoke(UriTemplate = "SendText")]
    Stream SendText(Stream s); 
```

我可以使用“text/plain”的内容类型接收 XML 文件，但如果我将其切换到客户端将发送的“text/xml”，我会收到 400 错误请求。

如果我用这个...

```
 [OperationContract]
    [WebInvoke(UriTemplate = "SendXML", Method = "POST",
        BodyStyle = WebMessageBodyStyle.Bare, 
        RequestFormat = WebMessageFormat.Xml, 
        ResponseFormat = WebMessageFormat.Xml)]
    XElement SendXML(XElement xml); 
```

然后它与“text/xml”一起工作，但由于 XML 在根之外有一个 DOCTYPE 元素而失败并出现 400 错误请求。我无法更改此 XML 文件。这是文件的示例...

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE cXML SYSTEM "http://xml.cXML.org/schemas/cXML/1.2.024/cXML.dtd">
<cXML payloadID="32232995@ariba.acme.com"
      timestamp="2000-10-12T18:39:09-08:00" xml:lang="en-US">
    <Header>
         /// data here
    </Header>
    <Request deploymentMode="test">
       // data here
    </Request>
</cXML> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T18:00:55.440

这是将 xml 文档流式传输到 WCF 服务的基本方法。

合同：

```
[OperationContract]
    [WebInvoke(Method = "POST",
        BodyStyle = WebMessageBodyStyle.Bare,
        RequestFormat = WebMessageFormat.Xml,
        ResponseFormat = WebMessageFormat.Xml,
        UriTemplate = "ProfileRequest")]
    Stream ProfileRequest(Stream value); 
```

服务：

```
 public Stream ProfileRequest(Stream value)
    {
        StreamReader reader = new StreamReader(value);
        string text = reader.ReadToEnd();

        XDocument post = XDocument.Parse(text);
        XDocument response = ProfileRequest(post);

        return new MemoryStream(Encoding.UTF8.GetBytes(response.ToString()));
    } 
```

测试控制台：

```
 string filePath = "C:\someFile.xml";

            XDocument testDoc = XDocument.Load(filePath);

            XmlDocument xDoc = new XmlDocument();
            xDoc.Load(filePath);
            string newDoc = xDoc.InnerXml.ToString();

            ASCIIEncoding encoding = new ASCIIEncoding();
            byte[] data = encoding.GetBytes(testDoc.ToString());

            string localProfile = "http://localhost/WcfService/Service1.svc/ProfileRequest";

            HttpWebRequest webrequest = (HttpWebRequest)WebRequest.Create(localProfile);
            webrequest.Method = "POST";
            webrequest.ContentType = "text/xml";
            webrequest.ContentLength = data.Length;
            Stream newStream = webrequest.GetRequestStream();
            newStream.Write(data, 0, data.Length);
            newStream.Close();

            HttpWebResponse webresponse = (HttpWebResponse)webrequest.GetResponse();
            string strResult = string.Empty;
            Encoding enc = System.Text.Encoding.GetEncoding("UTF-8");
            StreamReader loResponseStream = new StreamReader(webresponse.GetResponseStream(), enc);
            strResult = loResponseStream.ReadToEnd();
            loResponseStream.Close();
            webresponse.Close();

            Console.Write(strResult); 
```

# php - 在 CSS 伪类的“内容”内动态生成文本

> ID：16170246
> 
> 赞同：4
> 
> 时间：2013-04-23T13:10:55.283
> 
> 标签：php, html, css, reusability, css-content

我想以正确的方式在 CSS 伪类的“内容”中动态生成文本。到目前为止，我已经用我的例子填充了一个**[工作 jsfiddle 。](http://jsfiddle.net/P4wwc/)**这张图片更好地展示了我想如何实现这一点：

![我想要实现的示例](https://i.stack.imgur.com/VbWWS.png)

这是相关的代码（它也在小提琴中）：

[部分] index.php：

```
<div class="checkbutton">
  <input type="checkbox" value="None" id="slideThree" name="check"/>
  <label for="slideThree"></label>
</div> 
```

[部分] style.css：

```
.checkbutton:before
  {
  content: 'Hombre';
  float: left;
  width: 60px;
  text-align: center;

  /* 28 es la altura total */
  font: 12px/28px Arial, sans-serif;
  color: CornflowerBlue;
  z-index: 0;
  font-weight: bold;
  } 
```

我希望能够出于两个目的重用该代码：

1.  用 PHP 动态地和内部地翻译它。
2.  具有相似样式的不同按钮。

这意味着，我希望能够创建一个类似但名称不同的按钮，或者只是翻译它而不需要额外的标记。我不知道如何正确地做到这一点。原因如下：

*   CSS 位于一个独特的 .css 文件中，与内容分开。显然，这不会执行 php.ini。
*   [内联样式中不可能有 CSS 伪元素](https://stackoverflow.com/q/5293280/938236)
*   没有 JavaScript。虽然这可以通过 javascript 实现，但我更愿意尽可能避免使用它。

我怎样才能实现它？我觉得很奇怪我需要使用 CSS

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T13:56:31.553

只要你有能力将你想要的内容设置为一个属性，你就可以利用这个`attr()`函数来抽象你的样式：

[http://tinker.io/bda2e](http://tinker.io/bda2e)

```
.checkbutton:before {
  content: attr(data-checked);
}

<div class="checkbutton" data-checked="Hombre" data-unchecked="Mujer">
  <input type="checkbox" value="None" id="slideThree" name="check"/>
  <label for="slideThree"></label>
</div> 
```

带有前缀的自定义属性`data-`是 HTML5 的一部分： [使用 data-* 属性嵌入自定义不可见数据](http://www.w3.org/html/wg/drafts/html/master/dom.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:10:55.283

在写完问题以及我找到解决方案花了多少麻烦之后，我发布它以防有人发现它有用。它在**[这个小提琴](http://jsfiddle.net/YBN6x/)**和相关代码中：

[部分] index.php：

```
<div class="checkbutton">
  <input type="checkbox" value="None" id="slideThree" name="check" checked />
  <label for="slideThree"></label>
  <!-- Now this can be generated with PHP -->
  <span class = "leftcheck"><?= "Hombre"; ?></span>
  <span class = "rightcheck"><?= "Mujer"; ?></span>
</div> 
```

[部分] style.css：

```
.checkbutton .leftcheck
  {
  position: absolute;
  left: 0px;
   width: 50%;
  text-align: center;
  line-height: 28px;
  color: CornflowerBlue;
  } 
```

当然，如果您有更好的方法，请将其写为答案。

# c - 检查信号量值时是什么阻止了竞态条件？

> ID：16170249
> 
> 赞同：3
> 
> 时间：2013-04-23T13:10:58.617
> 
> 标签：c, multithreading, computer-science, semaphore, mutual-exclusion

我正在研究多线程并试图理解**信号量**和**互斥**的概念。我在网上找到的大多数示例都使用某种库（例如`pthread`）来实现信号量或互斥量，但我更感兴趣的是实现一个建立临界区的简单信号量——不超过一个线程访问特定内存区域。

对于这项任务，我相信我需要一个互斥锁（如果我正确理解术语，也就是二进制信号量）。我可以看到信号量如何通过将代码段“锁定”到单个线程来防止竞争条件，但是是什么阻止了信号量本身发生竞争条件？

我想象一个二进制信号量来保存一个**int**值来跟踪锁：

```
Semaphore
---------
int lock = 1;

unsigned P(void){
    if(lock > 0){
        lock--;
        return 0; /* success */
    }
    return 1; /* fail */
}

void V(void){
    lock++;
} 
```

假设两个线程同时调用该`P`函数，它们都同时到达`if(lock > 0)`检查并将条件评估为**真**——这将创建一个竞争条件，其中两个线程都被授予同时访问同一内存区域的权限。

那么是什么阻止了这种竞争条件在现实世界的信号量实现中发生呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:16:08.797

锁定和释放`semaphores`和/或`mutexes`作为`atomic`操作发生，这意味着 CPU 不能从当前进程中退出。这确保了一旦启动互斥锁（它由单个或几个 CPU 指令（微代码）组成），该进程就会保持 CPU 直到锁定/释放完成。
实现线程也有不同的方法，可以是 CPU（内核空间）的直接支持，也可以是用户空间中的库（例如`pthreads`）。

* * *

来自[OSDev.org](http://wiki.osdev.org/Atomic_operation)

原子操作是始终执行的操作，没有任何其他进程能够读取或更改在操作期间读取或更改的状态。它作为一个步骤有效地执行，并且在处理多个独立进程的许多算法中是一个重要的质量，无论是在同步还是在不需要同步的情况下更新共享数据的算法中。

* * *

[这](http://sergworks.wordpress.com/2010/08/28/understanding-threads-atomic-operations-and-memory-ordering/)也是一篇关于原子性的好文章（尽管在 Delphi 中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T13:29:03.127

实现大多数锁定原语的最常见（尽管绝对不是唯一）方法是比较和设置指令。正常的移动指令只会将内存位置的值设置为您要求的任何值，而比较和设置指令确实“仅当内存位置的值为 Y 时，才会自动将此内存位置设置为值 X，然后如果操作成功与否，设置一些标志”。关键字“原子”是 CPU 可以在硬件中确保没有其他任何东西可以干扰该操作。

使用比较和交换指令，您的示例`P`可以实现为：

```
int oldlock;
retry:
oldlock = lock;
if (oldlock > 0) {
    if (compare_and_swap(&lock, oldlock, oldlock - 1))
        goto retry;
    return 0;
}
return 1; 
```

当然现实比这复杂得多，但是比较和设置很容易理解和解释，并且具有可以实现（几乎？）所有其他锁定原语的好特性。

[这是维基百科的文章](http://en.wikipedia.org/wiki/Compare-and-swap)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-30T21:48:43.210

`semaphore`a （或 a `mutex`）和“正常”之间的区别并`variable`没有那么大。那些为您提供此功能的库只是确保`semaphore`只能通过**原子操作**访问。有多种方法可以实现：

*   保证原子访问的特殊汇编指令，例如：[`TSL`](https://en.wikipedia.org/wiki/Test-and-set)或`XCHG`.

*   在访问变量之前关闭调度程序`interrupts`，然后再次打开它们。因此调度程序无法从 CPU 中删除您的进程。但是您必须知道，这只适用于单 CPU 系统。

*   使用特定于语言的功能，例如 Java 的`synchronise`关键字。

* * *

如何使用`TSL`指令的示例：

```
enter_region:        ; A "jump to" tag; function entry point.

  tsl reg, flag      ; Test and Set Lock; flag is the
                     ; shared variable; it is copied
                     ; into the register reg and flag
                     ; then atomically set to 1.

  cmp reg, #0        ; Was flag zero on entry_region?

  jnz enter_region   ; Jump to enter_region if
                     ; reg is non-zero; i.e.,
                     ; flag was non-zero on entry.

  ret                ; Exit; i.e., flag was zero on
                     ; entry. If we get here, tsl
                     ; will have set it non-zero; thus,
                     ; we have claimed the resource
                     ; associated with flag.

leave_region:
  move flag, #0      ; store 0 in flag
  ret                ; return to caller 
```

* * *

顺便说一句，正如您已经正确指出的那样， a`mutex`只是一种特殊的 a `semaphore`，仅允许`FALSE`（`0`在 C 中表示为）和`TRUE`（由`1`或任何其他值表示`!= 0`）作为它的内部`int`变量。从而使其成为所谓的`binary semaphore`.

# fft - 使用 EMGU/OpenCV 进行 DFT - 我做错了什么

> ID：16170250
> 
> 赞同：1
> 
> 时间：2013-04-23T13:11:02.733
> 
> 标签：fft, emgucv

我正在尝试在此图像上以 4x4 块运行 DFT（仔细观察，它很小）![在此处输入图像描述](https://i.stack.imgur.com/3likh.png)它可能有点太小而无法看到，但它是一个 4x12 像素的图像。第一个 4x4 正方形是棋盘图案，每个正方形有一个像素，第二个 4x4 正方形是相同的图案，每个正方形有两个像素，最后一个 4x4 正方形是黑色正方形。

我遇到的问题是我得到的频率分量根本不是我所期望的。例如，对于第一个正方形，我希望矩阵中有一个直流分量，但它不存在。我想我一定做错了什么，但我是 EMGU 的新手，所以我不确定是什么。下面是我的代码。

```
using (Image<Bgr, byte> image = new Image<Bgr, byte>(Openfile.FileName))                
using (Image<Gray, float> gray = image.Convert<Gray, float>())
{
    int numRectanglesPerRow = image.Width / WIDTH;
    int numRectanglesPerColumn = image.Height / HEIGHT;

    for (int i = 0; i < numRectanglesPerColumn; i++)
    {
        for (int j = 0; j < numRectanglesPerRow; j++)
        {
            Rectangle rectangle = new Rectangle(WIDTH * j, HEIGHT * i, WIDTH, HEIGHT);

            Image<Gray, float> subImage = gray.Copy(rectangle);

            Matrix<float> dft = new Matrix<float>(subImage.Rows, subImage.Cols, 2);
            CvInvoke.cvDFT(subImage, dft, Emgu.CV.CvEnum.CV_DXT.CV_DXT_FORWARD, -1);

            //The Real part of the Fourier Transform
            Matrix<float> outReal = new Matrix<float>(subImage.Size);
            //The imaginary part of the Fourier Transform
            Matrix<float> outIm = new Matrix<float>(subImage.Size);
            CvInvoke.cvSplit(dft, outReal, outIm, IntPtr.Zero, IntPtr.Zero);
        }
    }
} 
```

# javascript - 如何解码这个javascript？

> ID：16170256
> 
> 赞同：0
> 
> 时间：2013-04-23T13:11:23.520
> 
> 标签：javascript

我的问题是如何解码这个 JavaScript 以及如何编码（使用哪个程序或在线工具）。

这是我要解码的 JavaScript：http: [//pastebin.com/hZvKySjj](http://pastebin.com/hZvKySjj)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T13:27:11.010

每个混淆脚本都需要某种`eval`. 在这里，线条

```
_L = 'constr\x75\x63\x74\x6F\x72';
[][_L][_L](_Z[_h._t4](_F))(); 
```

正在这样做。`_L`是字符串`"constructor"`，`[].constructor.constructor` 是`Function`构造函数。它将使用解码后的脚本调用，并调用生成的函数。我们可以用 替换它`alert`，将脚本粘贴到控制台*，然后等待结果——我们甚至不需要了解解码是如何工作的。在您的情况下，结果是（是的，包括所有评论和换行符）：

```
var alarm ="0";
var content = document;

if ((content.getElementById("wrapper") != null))
{
    document.getElementById('wrapper').style.display = 'block';
}

function a ()
{
    if ((content.getElementById("links") != null))
    {
        var temp = content.getElementById("links").innerHTML;
        if ((temp.indexOf('nofollow')+1) > 0)  alarm = "1";
        else if ((temp.indexOf('noindex')+1) > 0)  alarm = "1";
    }
    else alarm = "1";
}

function b ()
{
    if ((content.getElementById("aa") != null) && (content.getElementById("ab") != null))
    {
        temp = document.getElementById("aa").href;
        if ("http://uc-portaller.ru/" != temp) alarm = "1";

        temp = document.getElementById("ab").innerHTML;
        if ("скрипты для ucoz" != temp) alarm = "1";
    }
    else alarm = "1";
}

function c ()
{
    if ((content.getElementById("ba") != null) && (content.getElementById("bb") != null))
    {

        temp = content.getElementById("ba").href;
        if ("http://austere.ru/" != temp) alarm = "1";

        temp = content.getElementById("bb").innerHTML;
        if ("доска объявлений" != temp) alarm = "1";
    }
    else alarm = "1";
}

function d ()
{
    if ((content.getElementById("ca") != null) && (content.getElementById("cb") != null))
    {

        temp = content.getElementById("ca").href;
        if ("http://www.for-creative.com/" != temp) alarm = "1";

        temp = content.getElementById("cb").innerHTML;
        if ("темы для ucoz" != temp) alarm = "1";
    }
    else alarm = "1";
}

a ();

if (alarm == "0") b ();
if (alarm == "0") c ();
if (alarm == "0") d ();

if (alarm == "1") prompt('Нарушены условия использования, по всем вопросам обращайтесь в ICQ:', '376880395');

$(document).ready(function(){

    //When you click on a link with class of poplight and the href starts with a # 
    $('a.poplight[href^=#]').click(function() {
        var popID = $(this).attr('rel'); //Get Popup Name
        var popURL = $(this).attr('href'); //Get Popup href to define size

        //Pull Query & Variables from href URL
        var query= popURL.split('?');
        var dim= query[1].split('&');
        var popWidth = dim[0].split('=')[1]; //Gets the first query string value

        //Fade in the Popup and add close button
        $('#' + popID).fadeIn().css({ 'width': Number( popWidth ) }).prepend('');

        //Define margin for center alignment (vertical + horizontal) - we add 80 to the height/width to accomodate for the padding + border width defined in the css
        var popMargTop = ($('#' + popID).height() + 80) / 2;
        var popMargLeft = ($('#' + popID).width() + 80) / 2;

        //Apply Margin to Popup
        $('#' + popID).css({ 
            'margin-top' : -popMargTop,
            'margin-left' : -popMargLeft
        });

        //Fade in Background
        $('body').append('<div id="fade"></div>'); //Add the fade layer to bottom of the body tag.
        $('#fade').css({'filter' : 'alpha(opacity=0)'}).fadeIn(); //Fade in the fade layer 

        return false;
    });

    //Close Popups and Fade Layer
    $('a.close, #fade').live('click', function() { //When clicking on the close or fade layer...
        $('#fade , .popup_block').fadeOut(function() {
            $('#fade, a.close').remove();  
    }); //fade them both out

        return false;
    });

});

        $.fn.tabs = function () {
            return this.each(function () {
               var $tabwrapper = $(this); 

               var $panels = $tabwrapper.find('> div');
               var $tabs = $tabwrapper.find('> ul a');

               $tabs.click(function () {  
                   $tabs.removeClass('selected');
                   $(this).addClass('selected');

                   $panels
                    .hide() // hide ALL the panels
                    .filter(this.hash) // filter down to 'this.hash'
                        .show(); // show only this one

                   return false;
               }).filter(window.location.hash ? '[hash=' + window.location.hash + ']' : ':first').click();
            });
        };

        $(document).ready(function () {
            // console.log(window.location.hash);

            $('div.tabs').tabs();
        }); 
```

[*) 当然，您需要确定自己在做什么。它总是存在一个恶意脚本的小风险，并且您可能没有找到所有`eval`s. @jfriend00 关于逐行执行解码片段的提示是一种更安全的方法。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:23:11.500

我知道了解此代码的作用的唯一方法是找到一个安全的环境（以防代码具有恶意意图）并在调试器中逐行执行它并观察它在对自身进行去混淆以自行转换时所做的事情进入普通的javascript。变量名通常会保持模糊，但 _O 中的巨大字符串会被解码为某种东西（可能是 javascript 代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:33:54.490

看看：[http ://www.labnol.org/software/deobfuscate-javascript/19815/](http://www.labnol.org/software/deobfuscate-javascript/19815/)

他们向您展示了如何做这样的事情，这基本上是使用 chrome 调试器来“美化”代码并使其更易于阅读的问题。

某些版本的 chrome 在上下文菜单中没有该命令，只需查找命令“Pretty print”（具有 -> **{}**之类的图标）

完成此操作后，您可以使用 JavaScript 控制台评估小段代码以对其进行逆向工程。例如。表达式（在代码的开头）

```
1) (s\u0065lf + ([] * 0) * 1)
2) '\x5B'
3) ((s\u0065lf + ([] * 0) * 1)[0 ^ 0] == '\x5B') 
```

在我的浏览器上返回这个字符串

```
1) "[object Window]0"
2) "["
3) true 
```

只需找到起点并从那里开始。混淆代码遵循与正常代码相同的规则，只是一团糟。

# asp.net - 下拉列表 SelectedIndexChanged 未在 aspx 页面上触发

> ID：16170262
> 
> 赞同：0
> 
> 时间：2013-04-23T13:11:41.163
> 
> 标签：asp.net, html-select

每当用户从下拉列表中选择一个值时，我想自动单击搜索按钮。

代码片段：

在中添加了事件处理程序`InitializeComponent()`：

```
this.ddltrim.SelectedIndexChanged += new     System.EventHandler(this.ddltrim_SelectedIndexChanged); 
```

代码：

```
private void ddltrim_SelectedIndexChanged(object sender, System.EventArgs e)
            {
        if(ddlStores.Items.Count ==1)
            btnSearch_Click("Search", null);
    } 
```

在设计师：

```
<asp:dropdownlist id=ddltrim width="100%" Runat="server" AutoPostBack="True" EnableViewState="True">    
<asp:ListItem Value="Select Submodel" Selected="True">
      Select SubModel
      </asp:ListItem></asp:dropdownlist> 
```

但是当我从 ddl 中选择任何值时，selectIndexChanged 不会触发。必须手动点击按钮搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:13:58.513

尝试

```
<asp:dropdownlist id=ddltrim width="100%" Runat="server" AutoPostBack="True" EnableViewState="True" onselectedindexchanged="ddltrim_SelectedIndexChanged">
<asp:ListItem Value="Select Submodel" Selected="True">Select SubModel</asp:ListItem> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:27:14.003

尝试在 Page_PreInit 方法中设置您的添加事件代码

```
protected void Page_PreInit(object sender, EventArgs e)
{
    this.ddltrim.SelectedIndexChanged += new System.EventHandler(this.ddltrim_SelectedIndexChanged);
} 
```

# android - android：listview 长按和上下文弹出导致stackoverflowerror（可能是由于actionbarsherlock？）

> ID：16170264
> 
> 赞同：-1
> 
> 时间：2013-04-23T13:11:42.243
> 
> 标签：android, listview, actionbarsherlock, onlongclicklistener

我一生都无法弄清楚为什么会这样。我已经查看了 ABS 示例代码（它适用于非列表视图），我已经在网上搜索并正确按照说明进行操作，但我仍然有一些奇怪的错误。

在我的 onCreate() 期间，我调用此代码：

```
lv.setOnItemLongClickListener(new OnItemLongClickListener() {
    @Override
    public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
        registerForContextMenu(view);
        openContextMenu(view);
        return true;
    }
}); 
```

长按该项目时，由于某种原因，它不断从：

*   （第 6 行）`openContextMenu()`
*   `View.showContextMenu()`
*   `AbsListView.showContextMenuForChild()`
*   回到（第 6 行）`openContextMenu()`

我确实有一个点击监听器集，但它不应该影响任何东西，因为如果点击它会打开一个新活动。

为了完整起见，这里是上下文菜单的创建。

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
    if (v.getId() == R.id.lvFines) {
        menu.add("One");
        menu.add("Two");
        menu.add("Three");
        menu.add("Four");
    }
} 
```

我是否使用了来自 ActionBarSherlock 的错误“支持”功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:35:49.900

好吧，我现在觉得很傻，因为我在发布问题后这么快就修复了它。

问题是`onItemLongClick()`方法，**不要将它**用于上下文菜单。

相反，为上下文菜单注册 LISTVIEW。

这是来源。

对于 onCreate()：

```
registerForContextMenu(lv); 
```

并在长按期间访问所选项目：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
    if (v.getId() == R.id.lv) {
        ListView lv = (ListView) v;
        AdapterView.AdapterContextMenuInfo acmi = (AdapterContextMenuInfo) menuInfo;
        YourObject obj = (YourObject) lv.getItemAtPosition(acmi.position);

        menu.add("One");
        menu.add("Two");
        menu.add("Three");
        menu.add(obj.name);
    }
} 
```

这就是所有的人！

# javascript - Javascript 交换 2 个图像

> ID：16170267
> 
> 赞同：0
> 
> 时间：2013-04-23T13:11:43.833
> 
> 标签：javascript, jquery, image, swap

我正忙于一个项目，但我知道我在某个时候被困住了。我想要做的是，当有人按下主页按钮时，它会改变它的颜色。我想做的是**从图像 1（白色）到图像 2（蓝色）的交换**。所以这个人可以看到他/她在哪个页面上。但是当我将此代码放入网站时，它不会显示任何内容。当我按 2 次时，它将显示蓝色图像。当我多次按下时，您会看到白色和蓝色图像交换。但它不会站在白色图像上，只会出现在蓝色图像上

这是我使用的代码。-->

```
<a href='' "<?php echo $this->createUrl("/admin/survey/sa/index"); ?>" onclick="edit()"><img id="img1" onclick="imageChange(this)"'<?php echo $sImageURL;?>home.png' alt='<?php $clang->eT("Default administration page");?>' />
<script type="text/javascript">
{
  var img1 = "/LimeSurvey/styles/scanyours/images/home.png";
  var img2 = "/LimeSurvey/styles/scanyours/images/home1.png";
}
{
  var imageChoice = 1;
}
function imageChange(element) 
{
  if (imageChoice == 1)
  {
    element.src = img2;
    imageChoice = 2;
  }
  else if (imageChoice == 2) 
  {
    element.src = img1;
    imageChoice = 1;
  }
}
</script></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:19:01.407

~~尽量不要将 img 标签嵌入到锚标签中。也许这两个 onclick 事件会互相干扰。~~

顺便说一句：您应该缩进代码以获得更好的清晰度。

**编辑：**

我不知道你网站的确切结构，但如果 index.php 只显示主页，你可以试试这个：

```
if ($_SERVER['PHP_SELF'] == 'index.php') {
  echo 'Show logo for homepage';
} else {
  echo 'Show logo for other pages';
} 
```

当它工作时，你可以用你的 element.src 函数交换回声。当它不起作用时，检查 $_SERVER['PHP_SELF'] 中存储的内容（当您在主页上和在其他站点上时）并调整 if 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:22:22.640

如果您将图像标签放在锚标签内，那么即使您的图像替换有效，您也会立即被重定向到您的锚链接到的任何位置。

这是预期的行为吗？

```
Here is a working example if you didn't have the anchor tag 
```

[http://jsfiddle.net/6LZpL/](http://jsfiddle.net/6LZpL/)

# python-2.7 - 如何从我制作的模块执行 python 脚本

> ID：16170268
> 
> 赞同：2
> 
> 时间：2013-04-23T13:11:45.700
> 
> 标签：python-2.7, module

我编写了一个 python27 模块并使用`python setup.py install`.

该模块的一部分有一个脚本，我在安装它之前将它放在模块内的 bin 文件夹中。我认为该模块已正确安装并且可以正常工作（已添加到站点包和脚本中）。我已经构建了一个简单的脚本“test.py”，它只运行模块中的函数和脚本。这些功能工作正常（预期的输出打印到控制台），但脚本没有。

我在 test.py 中尝试过`from [module_name] import [script_name]`，但没有成功。

如何从命令行在模块的 bin 中运行脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:47:59.627

你是用`distutils`还是`setuptools`？

我现在测试了，如果是distutils，有就够了

`scripts=['bin/script_name']`

在您的`setup()`通话中

相反，如果您使用的是 setuptools，则可以避免在 bin/ 中完全包含脚本，并通过添加来定义您的入口点

`entry_points={'console_scripts': ['script_name = module_name:main']}`

在您的`setup()`通话中（假设您在`main`里面有一个函数`module_name`）

你确定 bin/script_name 被标记为可执行文件吗？

尝试运行脚本时遇到的确切错误是什么？你的 setup.py 的内容是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:42:02.507

请检查您安装的模块是否使用条件来检查全局变量的状态`__name__`。我是说：

```
if __name__ == "__main__": 
```

全局变量`__name__`更改为“ `__main__`”字符串以防万一，然后您从命令行手动启动脚本（例如 python sample.py）。如果您使用此条件，并将所有代码放在此条件下，那么当您尝试从另一个脚本导入已安装的模块时，它将起作用。例如（模块中的代码将不会运行，当您导入它时）：

测试导入.py：

```
import sample
...another code here... 
```

示例.py：

```
if __name__ == "__main__":
    print "You will never see this message, except of case, when you start this module manually from command line" 
```

# teradata - 将 1=1 添加到 WHERE 子句是否会降低性能？

> ID：16170272
> 
> 赞同：1
> 
> 时间：2013-04-23T13:11:50.590
> 
> 标签：teradata

考虑以下 SQL：

```
select * from dbname.tablename
where
    field1 = 'a' and
    field2 = 'b' and
    field3 = 'c' and
    1=1 
```

您可能想知道为什么我会`1=1`在 WHERE 子句的末尾添加。对于临时查询，我这样做是为了可以注释掉任何条件组合，而无需修改 SQL。使用此 SQL，我可以注释掉，`field1 = 'a' and`并且由于尾随`1=1`条件，SQL 将起作用。考虑这个没有这个小技巧的 SQL：

```
 field1 = 'a' and
    field2 = 'b' and
    field3 = 'c' 
```

注释掉`field3 = 'c'`会破坏 SQL，因为它会`field2 = 'b' and`被视为最终条件，它会向你咆哮，“还有什么？？”

我问这个的原因是因为我知道在`1=1`将 SQL 粘贴到生产查询之前忘记从 WHERE 子句中删除。我想知道这是否会影响性能。 `1=1`是一个恒定的条件，所以即使记录集包含 10,000 行，这里是否真的进行了艰苦的计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:16:22.617

用甜美简单的话来说，**NO**。

请参考**[答案](https://stackoverflow.com/questions/1049512/t-sql-1-1-performance-hit/1049519#1049519)**

# javascript - 奇怪的匿名javascript函数调用

> ID：16170273
> 
> 赞同：5
> 
> 时间：2013-04-23T13:11:52.397
> 
> 标签：javascript

我正在看[这个](http://cssdeck.com/labs/wr9k8z4x)非常酷的片段，我在 js 中遇到了这个奇怪的行并删除了阻止函数被调用的行

```
!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!
function(d, w){
   ...
}(document, window); 
```

，我用 ( ) 包装了函数，它应该是这样的，它按预期工作。

```
(function(d, w){
    ...
})(document, window); 
```

所以我的问题是那条奇怪的线是什么，为什么它会起作用？我的狂野客人是，它是某种 IIFE ......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T13:20:29.073

你是对的，它是一个[立即调用函数表达式 (IIFE)](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

你可以重写

```
!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!+-+-+!
function(d, w){
   ...
}(document, window); 
```

到

```
!function() {
    ...
}() 
```

它仍然有效。这是因为`!`是一元运算符（就像`+`,`-`和`~`-- 参见[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators)）。在一元运算符之后需要一个表达式（并评估！）。表达式可以是函数调用。

然而

```
!function() {
    ...
}() 
```

只是另一个表达式，所以你可以在它前面放另一个一元运算符：

```
+!function() {
    ...
}() 
```

您可以根据需要继续此模式。

**注意：**以这种方式调用匿名函数会忽略函数的返回值。因此，如果您对返回值不感兴趣，请仅使用它。

**编辑：**添加了对Daff 在回答中提到的[http://benalman.com/news/2010/11/immediately-invoked-function-expression/](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)的出色参考。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T13:18:37.767

诀窍实际上是`!`那里的单个运算符（整个第一行实际上做同样的事情）。这也可以：

```
!function(d, w){
   ...
}(document, window); 
```

一如既往，我可以推荐 Ben Almans 关于[立即调用函数表达式的精彩文章](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

# java - POI HSSFCell 类的 getRichStringCellValue() 和 getStringCellValue() 方法有什么区别？

> ID：16170275
> 
> 赞同：5
> 
> 时间：2013-04-23T13:11:58.240
> 
> 标签：java, excel, apache-poi

我正在尝试使用 Java POI 读取存储在 Excel 工作表中的数据。我对这两种方法感到困惑，因为这两种方法都会返回存储在单元格中的字符串值。谁能解释这两种方法之间的区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T13:40:38.703

重要的线索是查看@[文档](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFCell.html)并注意不同的返回类型。

getRichStringCellValue() 返回 XSSFRichTextString 的类型，而 getStringCellValue() 返回一个普通的旧 java 字符串。

您可能只想使用 getStringCellValue()，除非您正在执行诸如复制电子表格之类的操作并希望保留任何格式。如果是这种情况，getRichStringCellValue() 返回的 XSSRichTextString 对象将包含任何格式信息，例如**粗体**或*斜体*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T13:15:40.637

来自[Apache 的文档](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFCell.html)：

**getRichStringCellValue():**

> 将单元格的值作为字符串获取 - 对于数字单元格，我们会抛出异常。对于空白单元格，我们返回一个空字符串。对于不是字符串公式的公式单元格，我们会抛出异常。

**获取字符串细胞值（）：**

> 将单元格的值作为字符串获取 - 对于数字单元格，我们会抛出异常。

# c# - MarshalByValueComponent 是否仍在使用或有用？

> ID：16170280
> 
> 赞同：4
> 
> 时间：2013-04-23T13:12:07.170
> 
> 标签：c#, .net, .net-4.0, .net-remoting, system.componentmodel

我一直在探索重新发明`DataTable`，我想知道它的用途是什么`MarshalByValueComponent`。我相信它用于 .NET Remoting（可能是 WinForms 和 WebForms），但它已被 WCF 取代~~。~~我在 GitHub 或 Google 上找不到它的任何显着用途。`MarshalByValueComponent`还在用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T19:47:42.780

这很难回答。想要远程组件的整个概念是一个神秘的概念。这些设计决策是在 13 多年前做出的，显然他们对远程处理的实用性有着截然不同的想法。效果不太好，在 .NET 3.0 中进行了大量重新设计

只是在不知道其背后的想法的情况下对此进行了思考。MarshalByValueComponent 作为 Component 的对立面存在。它继承自 MarshalByRefObject。到目前为止，大多数组件和控件都不是可序列化的，它们有太多与之相关的运行时状态，在另一个运行时环境中永远无法正确反序列化。以 OpenFileDialog 为例，它在另一台机器上的逐字副本可以正确运行的几率是 zilch。再次不得不暂停你为什么要这样做的奇迹。*任何*控件都一样，它有几十个属性，其值取决于操作系统状态。

但是 MBRO 并不是那么理想，许多往返都会受到网络延迟的严重影响。有一些组件没有运行时状态，但在远程处理场景中仍然有意义。它们是一个组件本身就是一个怪癖，自从我在表单上删除数据集以来已经有很长时间了。但他们因此继承了 MBVC。忽略这个，不实用。

# sql - oracle 添加，然后 avg 为 null

> ID：16170281
> 
> 赞同：2
> 
> 时间：2013-04-23T13:12:08.247
> 
> 标签：sql, oracle

我有像这样的sql：

```
select avg(decode(type, 'A', value, null) + decode(type, 'B', value, null)) from table; 
```

这样做的问题是其中一些类型可以为 null，因此添加部分将导致 null，因为向 null 添加任何内容都会使其为 null。因此，您可能认为我可以将解码从 null 更改为 0，但这似乎使 avg() 将其计为平均值的一部分，但它不应该/我不希望它计为平均值的一部分。

理想情况下，添加只会忽略空值，而不是尝试将它们添加到其余值中。

所以假设我的数字是：

```
5 + 6 + 5
3 + 2 + 1
4 + null + 2 
```

它们总共 28，我想除以 8（忽略 null），但是如果我在解码中将 null 更改为 0，则 avg 将除以 9，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:22:48.063

如所写，您的代码应始终返回`null`，因为如果第一个`decode`返回`value`，则第二个`decode`必须始终返回`null`。我将假设您在泛化代码时犯了一个错误，而您真正的意思是：

```
avg(decode(type1, 'A', value1, null) + decode(type2, 'B', value2, null)) 
```

（或者，而不是`type1`，它可能是`a.type`。关键是两个解码中的字段应该是单独的字段）

* * *

在这种情况下，我认为最简单的做法是首先检查空值：

```
avg(case when type1 is null and type2 is null then null
    else case type1 when 'A' then value1 else 0 end
       + case type2 when 'B' then value2 else 0 end
    end) 
```

（我替换`decode`为`case`因为我发现它更容易阅读，但是在这种情况下`decode`也可以。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:14:39.377

一个简单的解决方法是自己计算平均值：

```
select 
    -- The sum of all values with type 'A' or 'B'
    sum(decode(type, 'A', value, 'B', value, 0)) /
    -- ... divided by the "count" of all values with type 'A' or 'B'
    sum(decode(type, 'A', 1, 'B', 1, 0))
from table; 
```

SQLFiddle[示例](http://www.sqlfiddle.com/#!4/d41d8/10260)

但是这种方式`AVG()`可行，如果您只是删除添加并将所有内容放在一个单一的，它可能就足够了`DECODE()`

```
select avg(decode(type, 'A', value, 'B', value, null)) from table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:15:21.820

在这里做一个总和过于复杂。Juste 用 CASE 输出值，你就完成了。

```
SELECT AVG(
    CASE WHEN type = 'A' OR type = 'B' 
    THEN value
    ELSE null
    END
) 
FROM table 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:23:52.193

这里的逻辑有点复杂：

```
select avg((case when type = 'A' then value else 0 end) + (case when type = 'B' then value else 0 end))
from table
where type in ('A', 'B') 
```

该`where`条款保证您至少有一个“A”或“B”。当您没有“A”或“B”的示例时，就会出现问题。

# c - Pacman 的搜索算法

> ID：16170285
> 
> 赞同：1
> 
> 时间：2013-04-23T13:12:23.890
> 
> 标签：c, assembly, path-finding, pacman

我需要在矩阵表示的图中找到成本较低的路径。我对 Dijkstra 算法进行了一些研究，但我需要一个向量，其中包含最短路径中的节点序列，而不是距离本身。该游戏正在为 Assembly 制作，但如果有人知道 C 中的实现，至少会有很大帮助。我将用它来计算鬼魂的路线，匹配启发式算法来创建游戏的非常困难模式。我也尝试了 A* 的一些东西，但是我发现的实现使用了 struct，这不适用于这种情况。从现在开始非常感谢。^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:22:26.360

这个问题是[edx AI课程](https://www.edx.org/courses/BerkeleyX/CS188.1x/2013_Spring/about)的基础。我已经设法在这里用 C 语言编写了[广度优先搜索](http://www.rdaemon.com/home/breadth-first-search)代码。据我所知，广度优先搜索保证找到最短路径（如果存在）。我认为在那里添加启发式算法也不会太难，edx 链接上应该有注释可以帮助解决这个问题。

# c# - C# 对浮点数的 Int32 文字的性能损失

> ID：16170290
> 
> 赞同：3
> 
> 时间：2013-04-23T13:12:38.977
> 
> 标签：c#, .net, performance, compiler-construction

在 c# 中，您可以将数字文字定义为 int 或 double

```
 Double var1 = 56.1;
    int var2 = 51; 
```

这些是分配给文字的默认类型。然而，我正在开发的游戏引擎使用浮点数来表示位置、旋转等。当浮点数被分配一个文字双精度时，即`float varFloat = 75.4;`编译器会抛出一个错误，指出双精度文字需要是一个浮点数，这是正确的。因此，需要将双字面值转换为浮点数，即。`float varFloat = 75.4f;`. 但是，当给定一个 int 文字时，该 int 会隐式转换为浮点数。IE，

```
 float varFloat = 44; // This is fine. 
```

我的问题是编译器是否足够聪明，可以意识到 44 应该是浮点文字？如果不是，这意味着每次访问文字时，它也在执行转换。在大多数情况下，这真的无关紧要。但是对于高性能代码，如果在所有地方都使用整数而不是浮点数，它可能会成为一个问题（即使它是一个小问题）。据我所知，在不经过源代码行的情况下，无法将这些文字更改为浮点数，这根本不值得花时间。

那么，编译器是否将 int 文字转换为 float 文字？如果不是，除了试图避免这种处理能力的浪费，还能做些什么呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T13:15:11.570

答案是肯定的。知道这一点很聪明。

这是一个具有此类任务的简单程序的反汇编 IL（由[ILSpy提供）。](http://ilspy.net/)[从 ldc.r4 指令](http://msdn.microsoft.com/library/system.reflection.emit.opcodes.ldc_r4.aspx)中可以看出，没有发生转换：

```
.method private hidebysig static 
    void Main (
        string[] args
    ) cil managed 
{
    // Method begins at RVA 0x2050
    // Code size 8 (0x8)
    .maxstack 1
    .entrypoint
    .locals init (
        [0] float32 x
    )

    IL_0000: nop
    IL_0001: ldc.r4 44
    IL_0006: stloc.0
    IL_0007: ret
} // end of method Program::Main 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T13:18:02.967

float 比 double “小”

当您尝试将 float 转换为 double 时，您可能会失去精度

看到这个：[C：将双精度转换为浮点，保留小数点精度](https://stackoverflow.com/questions/3498192/c-convert-double-to-float-preserving-decimal-point-precision)

C#也是如此

当你写 float x = 5; 编译器将在编译时将其转换为 float x = 5.0;

没有性能问题

# javascript - 在构造mailto链接时编码URIcomponent

> ID：16170298
> 
> 赞同：1
> 
> 时间：2013-04-23T13:13:08.593
> 
> 标签：javascript, mailto, encodeuricomponent

当我使用 encodeURIComponent 如下所示对正文进行编码时，如果正文中有空格，则生成的链接将断开并显示如下：

[http://www.sample.com/sample/explore?itemId=123&type=sample&name=name](http://www.sample.com/sample/explore?itemId=123&type=sample&name=name)带空格

```
body = "http://www.sample.com/sample/explore?itemId=123&type=sample&name=name with space"

var newLink = "mailto:?subject=" + encodeURIComponent(subject) + "&body=" + encodeURIComponent(body);

window.location = newLin 
```

我怎样才能修复它并创建一个有效的网址？

console.log 正确显示编码的 url，但在 Outlook 中链接已损坏。它应该显示为正确的超链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-16T16:01:35.157

您是否尝试在变量中`space`替换为？`%20``body`

```
body = "http://www.sample.com/sample/explore?itemId=123&type=sample&name=name%20with%20space" 
```

我建议您使用[此](https://www.w3schools.com/tags/ref_urlencode.asp)工具将*纯文本*编码为*querystring*。例如，如果您需要传递*换行符*( `\n`)，请使用`%0A`for newline`\n` 和`%0D`for 回车`\r`。看[这张](https://www.asciitable.com/)ASCII表就明白编码了：第二列（Hx=十六进制ASCII表示），加上a`%`作为前缀，对应第五列报的红色字符（Chr=字符），即例如：

**空格**字符（表中的第五列，Chr）= `%20`（表中的第二列，Hx）≅ `+`（阅读[此](https://stackoverflow.com/a/1634293/2149425)答案）

# android - Android 上的唯一字符串应用内购买

> ID：16170301
> 
> 赞同：2
> 
> 时间：2013-04-23T13:13:26.857
> 
> 标签：android, in-app-purchase

在[Android 文档](http://developer.android.com/training/in-app-billing/purchase-iab-products.html#Purchase)中有这样的建议：

> **安全建议**：最好传入一个字符串，以帮助您的应用程序识别进行购买的用户，以便您以后可以验证这是该用户的合法购买。对于消耗品，您可以使用随机生成的字符串，但对于非消耗品，您应该使用唯一标识用户的字符串。

生成此字符串的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:23:28.027

当应用程序独立时，最好的方法是

*   使用经过混淆的 Google Play LVL 用户 ID，并在分隔符之后
*   添加一个安全的随机信息（又名随机数），并根据您的需要，
*   您可以添加其他信息来识别例如时间点

这样，您可以

*   关联 LVL 和 IAB 信息和
*   IAB 服务响应比没有随机数时更安全

仍然存在以下漏洞：

*   [让您的应用程序检查 LVL/IAB 通常是不安全的，](http://android-developers.blogspot.de/2010/09/securing-android-lvl-applications.html)因为原则上可以在逆向工程之后覆盖检查。
*   *由于在创建购买意图*时设置了 IAB 随机数（而不是根据有效性请求本身），因此无法验证您获得的响应不是来自重放攻击。
*   [IAB V3 信息缓存在 Android 设备上的 IAB 服务中](https://stackoverflow.com/a/14830007/1856738)，因此甚至不能保证您会得到最新信息；如果设备离线或服务决定缓存信息的有效性现在不需要重新验证，服务将静默地将缓存信息传递给应用程序。

进一步提高安全性的唯一方法是[使用基于服务器的方法进行 LVL/IAB 验证。](https://stackoverflow.com/a/16030386/1856738)

# windows-8 - 不同语言的不同应用程序徽标

> ID：16170306
> 
> 赞同：1
> 
> 时间：2013-04-23T13:13:36.017
> 
> 标签：windows-8, internationalization, app-store

有人可以告诉我是否可以在 Win 8 中为不同的语言设置不同的徽标？

如果是-> 怎么做？

我需要国际化一个 win 8 应用程序，但我可以在应用程序清单中设置这些图像

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T13:39:46.857

没试过。。。不过。。。

在您的应用布局中，在每种语言的图像（或资产）下都有不同的文件夹。将清单指向图像时，请不要使用语言。

例如：assets\en-US\Logo.png assets\fr-fr\Logo.png

在清单中：assets/Logo.png

[http://msdn.microsoft.com/en-us/library/windows/apps/Hh831183.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh831183.aspx)

# perl - 如何在制表符上拆分 Perl 中的变量？

> ID：16170309
> 
> 赞同：2
> 
> 时间：2013-04-23T13:13:41.527
> 
> 标签：perl

我有一个`$results`由以下`foreach`循环生成的变量

```
my $result = "";
foreach $c1(sort {$a<=>$b} keys %info ) {
    $result .= $c1 . "\t" .
      join(',',@{$info{$c1}->{var1}}) . "\t" . 
      join(',',@{$info{$c1}->{var2}}) . "\n";
} 
```

如果我打印结果，它看起来像这样

```
a    b    c
c    d    e
f    g    h 
```

所以三列由 分隔，`\t`行由 分隔`\n`。我现在想`$results`按选项卡拆分这个变量，最终得到 3 列。我试图用一个while循环来做到这一点，但它不起作用

```
while($result){
    my @columns = split("\t"); 
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T13:22:11.743

没有参数，`split`拆分 的值`$_`。你要`split(/\t/, $result);`

另外，`while`外观不对。也许你想要

```
for my $r (split (/\n/, $result)) {
    @columns = split (/\t/, $r);
    : 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T13:21:08.607

你所写的将产生一个无限循环，因为`while ($result) { ... }`只要`$result`是一个真正的价值，它就会继续下去，你的就是。此外，如果您确实按照自己的意愿拆分它，您会得到

```
("a", "b", "c\nd", "e", "f\ng", "h", "i") 
```

我认为这不是你想要的。

您不应该将所有数据与选项卡连接在一起，然后再次拆分。将其作为单独的项目保存。就像是

```
my @results;

foreach my $c1 (sort { $a <=> $b } keys %info ) {
  push @results, [
    $c1,
    join ',', @{ $info{$c1}{var1} },
    join ',', @{ $info{$c1}{var2} }
  ];
} 
```

然后，您将拥有与最初打印的数据相对应的数组数组。[`Data::Dump`](https://metacpan.org/module/Data%3a%3aDump)如果您愿意，您可以将其打印出来用于诊断目的。

* * *

**更新**

由于您想保留第一列的值，它们是 has 的排序键，您最好在循环之前单独保存它们。也许这个代码更适合你？

```
my @keys = sort { $a <=> $b } keys %info;
my @results;

foreach my $c1 ( @keys ) {
  push @results, [
    $c1,
    join ',', @{ $info{$c1}{var1} },
    join ',', @{ $info{$c1}{var2} }
  ];
} 
```

现在`@keys`是您想要的值列表。

# maven - Ivy 依赖解析器是否与 Maven 依赖解析器相同？

> ID：16170310
> 
> 赞同：1
> 
> 时间：2013-04-23T13:13:42.050
> 
> 标签：maven, build-process, ivy, dependency-management

**我在Maven**和**Ivy**中阅读了有关依赖解析的官方手册：

*   [http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)
*   [http://ant.apache.org/ivy/history/2.1.0/ivyfile/dependency.html](http://ant.apache.org/ivy/history/2.1.0/ivyfile/dependency.html)

但找不到与 docs 的任何区别（主要是因为我对**Ivy**没有经验）。

Ivy 依赖解析器是否与 Maven 依赖解析器相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T21:09:43.287

Ivy 的一些特性使其与 Maven 不同：

*   一个 Ivy 模块可以包含多个工件。因此，在简单的情况下，对 Ivy 模块的依赖意味着对它包含的所有 jar 的依赖。
*   Ivy 允许将依赖声明为不可传递的。
*   Ivy 有所谓的“配置”（Maven 分类器的通用版本）。您可以在声明依赖项时指定配置，它将影响您将依赖的模块的工件和传递依赖项。[在教程](http://ant.apache.org/ivy/history/2.1.0/tutorial/conf.html)中阅读更多内容。
*   Ivy 的依赖解析机制是[可定制](http://ant.apache.org/ivy/history/2.1.0/extend.html)的。可以插件版本比较机制、冲突解决机制等。

# c# - 通用方法，使用 where T : base。为什么在调用其他方法时不认为 T 是具体类型？

> ID：16170314
> 
> 赞同：3
> 
> 时间：2013-04-23T13:13:49.243
> 
> 标签：c#, generics

我想知道我在这里缺少什么。调试时，我将 e 视为 SpecificException 的实例，但方法调用与带有基本异常的签名匹配。怎么来的？我可以在不检查我的 LogException 方法中的类型的情况下解决这个问题吗？

```
public string LogException<T>(T e)
        where T : Exception
{
    string errorMsg = e.ToString();
    errorMsg += Details(e);
    return errorMsg;
}

public string Details(Exception exception)
{
     return "foo";
}

public string Details(SpecificException exception)
{
     return "bar";
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T13:17:02.817

重载解决发生在*编译时*。*在编译时，编译*`e`器不可能知道. 它只知道那`e`将是类型`Exception`或派生自它的类型。
它不知道具体类型，所以唯一正确使用的重载是 for `Exception`。

为了能够实现您的目标，您可以通过`dynamic`关键字使用 DLR：

```
errorMsg += Details((dynamic)e); 
```

这会将重载决议移动到运行时，并且在那个时间点，实际类型`e`是已知的，因此它可以选择最匹配它的重载。

# android - 所有原始资源的 Uri 和 Filepath android

> ID：16170322
> 
> 赞同：0
> 
> 时间：2013-04-23T13:14:08.500
> 
> 标签：android, uri, filepath, android-resources

我的应用程序的原始文件夹中的文件很少，我需要同时拥有原始文件夹中存在的那些/所有文件的 Uri 和文件路径

到目前为止，我能够打印原始文件夹中的所有文件名（从[这里](https://stackoverflow.com/a/6540269/1225413)），但无法获取 Uri 和它们的文件路径

```
public void listRaw()
{
    Field[] fields=R.raw.class.getFields();
    for(int count=0; count < fields.length; count++)
    {
        Log.i("Raw Asset: ", fields[count].getName());
    }
} 
```

1.  我不需要这些文件的输入流
2.  我需要这些文件的文件路径和 uri
3.  我是否需要将所有文件放在资产中以获取 Uri 和文件路径

# rtf - 如何使用 BI 发布者获取 rtf 模板中元素的属性值

> ID：16170323
> 
> 赞同：0
> 
> 时间：2013-04-23T13:14:11.297
> 
> 标签：rtf, bi-publisher

我有像这样的xml：

```
<row rownumber="1">
 <A.MONETARY_AMOUNT>-8657435577410.93</A.MONETARY_AMOUNT> 
 <A.RECEIPT_NBR>164005044842</A.RECEIPT_NBR> 
 <A.GL_CODE>A.GL_CODE sample data</A.GL_CODE> 
 <A.DESCR1>A.DESCR1 sample data</A.DESCR1> 
 <A.CAMP_RECEIPT_NBR>A.CAMP_REC</A.CAMP_RECEIPT_NBR> 
 <EXPR6_6>2013-04-23</EXPR6_6> 
 <EXPR7_7>2013-04-23</EXPR7_7> 
 <A.EMPLID>A.EMPLID sa</A.EMPLID> 
</row> 
```

我想使用 BI Publisher 在 rtf 模板中获取 rownumber="1" 的值。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T03:07:29.917

BI Publisher 扩展了一组 XSL 函数以在 RTF 模板中使用。所以你可以试试这个：

```
<xsl:value-of select="/row/@rownumber"/> 
```

检查[此链接](http://docs.oracle.com/cd/E10415_01/doc/bi.1013/e12187/T421739T481158.htm)以获取更多信息。

# c++ - 派生类中的搜索函数，循环条件

> ID：16170324
> 
> 赞同：0
> 
> 时间：2013-04-23T13:14:13.140
> 
> 标签：c++, null, while-loop, linked-list

阅读 DS Malik 的“使用 C++ 的数据结构”一书。我对以下搜索功能有点困惑，（对于链表）

根据 Malik 的说法，“如果搜索项是列表中的第*i*个项，则 while 循环将执行 i 次。以下是书中的确切代码（不含注释）。

```
template <class Type>
bool unorderedLinkList<Type>::search(const Type& searchItem) const
{
    nodeType<Type> *current; 
    bool found = false; 
    current = first; 

    while (current != NULL && !found)
        if (current->info == searchItem) 
            found = true;
        else
            current = current->link; 
    return found;
} 
```

一旦找到该项目，这个循环真的会停止吗？

```
while (current != NULL && !found) 
```

我的直觉告诉我它将继续使用那些 && 运算符，但我可能错了。这只是书中的错字，还是我遗漏了什么？

另一个问题是我的编译器抱怨的以下行。

```
current = first; //error 'first' was not declared in this scope 
```

所以要修复它，我将其替换为

```
current = searchItem.first; 
```

编译器不再抱怨，但它是否从父类访问了正确的受保护成员？（unorderedLinkList 继承自linkedListType 父类，具有受保护的`nodeType<Type> *first`成员）

编辑：更多代码：D

```
template <class Type>
struct nodeType
{
    Type info;
    nodeType<Type> *link;
};

template <class Type>
class linkedListType
{ 
public: //some removed for space
        virtual bool search(const Type& searchItem) const = 0;

protected: 
    int count; 
    nodeType<Type> *first; 
    nodeType<Type> *last; 

private:
    void copyList(const linkedListType<Type>& otherList);
    //function to make a copy of otherlist and assign to this list
}; 
```

编辑：派生类

```
template <class Type>
class unorderedLinkedList: public linkedListType<Type>
{
public:
    bool search(const Type& searchItem) const;
} 
```

编辑：VS Express 编译我的代码，但这个站点不会。请帮忙？T_T [http://ideone.com/SN2R99](http://ideone.com/SN2R99)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:28:41.090

`while (current != NULL && !found)`很好。

用文字来说 - “虽然我们不在列表的末尾（这`current != NULL`意味着什么）**并且**该项目尚未找到”。因此，如果我们位于列表的末尾或已找到该项目，则条件将不再为真。

您也可以将其翻译为`while (!(current == NULL || found))`（使用[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)），大致意思是“当我们在列表末尾或找到该项目时停止”。要理解“何时停止”的逻辑，请考虑以下琐碎案例：

*   `while (!true)`, 即`while (false)`, 粗略的意思是“当真时停止”（因此立即停止）
*   `while (!false)`, 即`while (true)`, 大致意思是“假时停止”（因此永远不会）

`first`没有定义，因为......好吧，我不太确定，它在某个地方的标准中（我不是专家），C++ 有时很奇怪。[相关问题](https://stackoverflow.com/questions/13252192/template-inheritance-and-member-access)。解决方法：

*   加入`using linkedListType<Type>::first`你的班级
*   替换`first`为`this->first`
*   替换`first`为`linkedListType<Type>::first`

# codeigniter - 在 Codeigniter 上找不到 404

> ID：16170328
> 
> 赞同：1
> 
> 时间：2013-04-23T13:14:26.860
> 
> 标签：codeigniter, access-denied

我正在尝试访问我的页面“登录”，并且正在使用 Codeingiter。

我也在使用 TAL php，用于模板。

我刚刚定义了这样的路线：

```
$route['default_controller'] = "site";
$route['404_override']       = '';

$route['login']   = 'login';
$route['signup']  = 'login';
$route['success'] = 'login'; 
```

这是我的“登录”控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Login extends CI_controller{

public function __construct(){

    parent::__construct();
    $this->tal->setOutputMode(PHPTAL::HTML5);
        if($this->session->userdata('loggedIn') == true){
            $this->tal->template = 'admin';
            $this->tal->login = true;   
        }else{
            $this->tal->template = 'main';
            $this->tal->login = false;              
        }
    $this->load->model('membership_model');
}

public function index(){

    $requestPage = $this->uri->segment(1);

    switch($requestPage){
        case 'login':
            $this->tal->title = 'Connexion';
            $this->tal->display('login.php');

        break;
        case 'signup':
            $this->tal->title = 'Inscription';
            $this->tal->display('signup.php');
            $this->createMember();  
        break;
        case 'success':
            $this->tal->title = 'Inscription validée!';
            $this->tal->display('messagePage/signupSuccess.php');
        break;
    }
}

function validateCredentials(){

    $query = $this->membership_model->validate();
        if($query){
            $userdata = array(
                'username' => $this->input->post('username'),
                'password' => md5($this->input->post('password')),
                'loggedIn' => true
            );
            $this->session->set_userdata($userdata);
            redirect('backoffice/profile/#');       
        }
    $this->index();
}

function createMember(){

    $this->load->library('form_validation');
    $this->form_validation->set_rules('name', 'Nom', 'trim|required');
    $this->form_validation->set_rules('forename', 'Prénom', 'trim|required');
    $this->form_validation->set_rules('email', 'Email', 'trim|required|valid_email');
    $this->form_validation->set_rules('adress', 'Adresse', 'trim|required');
    $this->form_validation->set_rules('zipcode', 'Code Postal', 'trim|is_natural|required');
    $this->form_validation->set_rules('city', 'Ville', 'trim|required');
    $this->form_validation->set_rules('country', 'Pays', 'trim|required');
    $this->form_validation->set_rules('username', 'Pseudo', 'trim|required|callback_usernameCheck');
    $this->form_validation->set_rules('password', 'Mot de passe', 'trim|required|min_length[4]|max_length[32]');
    $this->form_validation->set_rules('password2', 'Confirmation du mot de passe', 'trim|required|matches[password]');
    $this->form_validation->set_rules('captcha', 'Captcha');

    $data = array(
        'firstname'      => $this->input->post('name'),
        'forename'       => $this->input->post('forename'),
        'username'       => $this->input->post('username'),
        'email'          => $this->input->post('email'),
        'adress'         => $this->input->post('adress'),
        'zipcode'        => $this->input->post('zipcode'),
        'city'           => $this->input->post('city'),
        'country'        => $this->input->post('country'),
        'password'       => $this->input->post('password'),
        'passwordHashed' => md5($this->input->post('password'))
    );

    if($this->form_validation->run() == false){}
    else{
        $result = $this->membership_model->usernameCheck();
        var_dump($result);
        switch($result){
            case false:echo 'false';
                $this->form_validation->set_message('', 'Désolé mais ce nom d\'utilisateur et / ou cet email sont déjà pris');
            break;
            case true:echo 'true';
                $this->membership_model->createMember($data);
                redirect('success');
            break;
        }
    }
}

function logout(){  
    $this->session->sess_destroy();  
    redirect('/'); 
}

}//this ends class 
```

我的本地网址是：`http://localhost/dist.`

当我尝试使用 URL 访问它时`http://localhost/dist/login`，我只会得到“404 Page Not Found：找不到您请求的页面。”

我不明白为什么。一切准备就绪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:26:41.703

尝试访问 url `http://localhost/dist/index.php/login`。您似乎没有删除`index.php`配置文件中的 。[下面是如何做到这一点](https://stackoverflow.com/a/1445432/1260593)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:19:14.893

你试过调试它吗？
如果您没有定义任何路由，您还会收到 404 错误吗？
我敢打赌，这个问题是因为你正在路由一条到自己的路径，但我不确定。

取出所有路线并确保路径有效。然后，一次添加一个，直到它停止工作。

# javascript - YDN-DB - 如何通过 id 更新记录？

> ID：16170333
> 
> 赞同：3
> 
> 时间：2013-04-23T13:14:39.880
> 
> 标签：javascript, indexeddb, ydn-db

我使用 YDN-DB 作为我的 indexeddb 包装器；我已经阅读了用户指南和 api，但完全不知道如何通过 id 更新记录（主键 [自动递增]）。

有没有人熟悉这个/有任何想法？

[http://dev.yathit.com/ydn-db/getting-started.html](http://dev.yathit.com/ydn-db/getting-started.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:12:38.953

想通了（终于）-感谢伟大的图书馆 Kyaw！

以下代码有效：

```
record = {id: 1, "setting": "test", "value": "value"};
req = db.put({name: 'tblSettings', keyPath: 'id'}, record);
req.done(function(key) {
  console.log(key);
});
req.fail(function(e) {
  throw e;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:38:05.020

您可以使用`put`通过其主键标识记录的方法来更新记录的值。

对于使用自动生成键（autoIncrement）的存储，当您通过`add`or`put`方法插入记录时，主键在回调中是已知的。可以查询或规范构造主键。例如，一个联系人对象可以使用其电子邮件地址作为主键。您可以通过方法获取商店中的所有主键`keys`。

# jsf-2 - JSF 支持 bean 将属性设置为 null

> ID：16170334
> 
> 赞同：1
> 
> 时间：2013-04-23T13:14:46.320
> 
> 标签：jsf-2

我正在尝试通过控制器 bean 访问表单支持 bean 数据。表单中的值在 bean 中设置，但是当我尝试从控制器 bean 访问它时，值变为 null。null 值在 createTicket 方法中：---> ticketData.getSummary());

```
/*from data bean everything sets here*/
    import java.io.Serializable;
     import java.util.Date;
    import java.util.List;
     @SuppressWarnings("PMD")
    @ManagedBean(name = "createTicketModelData")
    @SessionScoped
    public class CreateTicketModelData implements CreateTicketData, Serializable {

    private static final long serialVersionUID = 1L;

    protected String incidentType;

    private TicketId ticketId;

    protected UserId receiverId;

    protected String summary;
    private String description;
    private String asset;
    private Date dateTime;
    protected Date reported;
    private Date dateChangeNeeded;
    private String priority;
    protected List<Attachment> attachments;

    public void setAttachments(final List<Attachment> attachments) {
        this.attachments = attachments;
    }

    protected String orgUnit;
    protected String location;

    protected String costCenter;
    private Type type = Type.INCIDENT;
    private String severity;

    @Override
    public String getAsset() {
        return asset;
    }

    @Override
    public List<Attachment> getAttachments() {
        return attachments;
    }

    public String getCostCenter() {
        return costCenter;
    }
.....//getter seters
----------------------------------------------------------------------

    /*this is the controller bean where i am not able to get the form data values*/

   @ManagedBean(name = "createTicketBaseBean")
    @SessionScoped
        public class CreateTicketBaseBean implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final transient Logger LOGGER =    LoggerFactory.getLogger(CreateTicketBaseBean.class);

    @ManagedProperty(value = "#{ticketData}")
    private transient CreateTicketModelData ticketData;

    @ManagedProperty(value = "#{ticketingService}")
    transient TicketingService dispatcher;

    @PostConstruct
    protected void init() {
        this.workplaceBean = JSFUtils.findBean("selectWorkplaceComponentBean");
        this.selectUserBean = JSFUtils.findBean("selectUserBean");

    }

    public void createTicket(final ActionEvent event) {
        Response response = null;

        System.out.println("ticket summary------------" + ticketData.getSummary());
        setTicketData();
        LOGGER.info("Incident type in ticketdatabean---->" + incidentType);
        try {
            response = dispatcher.createTicket(ticketData);
        } catch (Exception e) {
            LOGGER.error(e);
            FacesMessageUtil.addGlobalUnexpectedErrorMessage();
        }

        LOGGER.info("Response is---->" + response.getTicketId());
        ticketId = response.getTicketId();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:31:53.773

尝试更改注释 @ManagedProperty(value = "#{ticketData}") 中的值，以使用您使用“createTicketModelData”注释它的 bean 名称。

# c - IoCreateSymbolicLink 何时返回 STATUS_OBJECT_NAME_COLLISION

> ID：16170336
> 
> 赞同：3
> 
> 时间：2013-04-23T13:15:01.053
> 
> 标签：c, windows, device-driver

当我调用 IoCreateSymbolicLink 以状态 STATUS_OBJECT_NAME_COLLISION 失败时。我的驱动程序中有代码，我试图在 NT 和 DOS 之间创建符号链接名称。

**通常这个错误会在什么时候引起？**

```
 RtlInitUnicodeString(

  &deviceName,

  L"\\Device\\StreamEitor"

  );

 RtlInitUnicodeString(

  &symbolicLinkName,

  L"\\DosDevices\\StreamEitor"

  );

   status = IoCreateDevice(

 driverObject, 

           0, 

           &deviceName, 

           FILE_DEVICE_NETWORK, 

           0, 

           FALSE, 

           &gDeviceObject

           );

   if (!NT_SUCCESS(status))

   {
  goto Exit;

   }

status = IoCreateSymbolicLink( &symbolicLinkName, &deviceName );

if ( !NT_SUCCESS( status )) {

    //IoDeleteDevice(ControlDeviceObject);

    DbgPrint("IoCreateSymbolicLink failed %x\n", status);

    goto Exit;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:18:19.077

I think you forgot destroy symbolic link using `IoDeleteSymbolicLink`.

# oracle-apex - APEX 4.2 应用程序登录

> ID：16170337
> 
> 赞同：0
> 
> 时间：2013-04-23T13:15:06.693
> 
> 标签：oracle-apex

我在 APEX 4.2（包）中制作了一个自定义身份验证例程。我输入的用户名由 APEX 转换为大写。

1.  我怎样才能防止这种情况？

2.  如何自定义错误消息，即“无效凭据”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:22:45.693

1.

```
 APEX_AUTHENTICATION.LOGIN 
  ( 
    p_username IN VARCHAR2, 
    p_password IN VARCHAR2, 
    p_uppercase_username IN BOOLEAN DEFAULT TRUE  --If TRUE then p_username is converted to uppercase.
  ); 
```

来源 [1]：[http ://docs.oracle.com/cd/E37097_01/doc/doc.42/e35127/apex_authentication.htm](http://docs.oracle.com/cd/E37097_01/doc/doc.42/e35127/apex_authentication.htm)

1.  atm 不知道，但我正在调查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T01:08:58.057

有一个参数来控制用户名的大小写。看：

[https://docs.oracle.com/cd/E37097_01/doc.42/e35127/apex_authentication.htm#AEAPI29157](https://docs.oracle.com/cd/E37097_01/doc.42/e35127/apex_authentication.htm#AEAPI29157)

这可能适用于 apex 4.2。在应用程序的登录页面上，使用以下代码创建一个“Before Header”进程：

```
if  apex_application.g_notification ='Invalid Login Credentials' then 
         apex_application.g_notification :='Your Altered Failed Login Message Here';
end if; 
```

# ruby-on-rails-3 - 如何通过rails控制台加载openssl？

> ID：16170348
> 
> 赞同：2
> 
> 时间：2013-04-23T13:15:38.020
> 
> 标签：ruby-on-rails-3, openssl

我使用Radulescu 编写的[解决方案来安装带有 ruby​​ 1.9.3-p194 的 openssl。](https://stackoverflow.com/questions/10775640/omniauth-facebook-error-faradayerrorconnectionfailed)然后，我试图要求 openssl，但我得到了错误的回报。为什么？

```
bla git:(master) rails c
Loading development environment (Rails 3.2.6)
[1] pry(main)> require 'openssl'
=> false 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:24:30.900

这仅仅意味着库已经被加载。如果您尝试键入`OpenSSL`，您会看到它在您的命名空间中。

相比之下，如果你尝试加载一个不存在的库，你会得到一个异常：

```
1.9.3p327 :003 > require 'does-not-exist'
LoadError: cannot load such file -- does-not-exist 
```

# javascript - 对孩子们来说，div 上的内存清理是自动的吗？

> ID：16170349
> 
> 赞同：1
> 
> 时间：2013-04-23T13:15:39.037
> 
> 标签：javascript, html, memory

我有一个 html div，它下面有大约 6 个 div。当我在该 div 上删除 Child 时，其他 div 是否会被取消分配，或者我必须先删除它们？div 是动态创建的。

```
 var window = document.createElement( 'div' ); 
```

然后我向它添加更多元素。稍后在某些时候，我想删除这些 div，并且我使用顶级 div 上的 removeElement 这样做。这会导致浏览器出现内存问题吗？如果是这样，我认为我必须首先删除每个孩子是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:53:40.783

非常简短的答案是......是的（因为您不必手动执行）和否（因为它不一定按照您假设的方式完成），但不要担心。

到目前为止，您的 html 代码从实际的内存管理中抽象出来，这甚至不是一个有效的问题。

当元素从 DOM 中移除时，它们的所有子节点也会被移除。添加元素不会直接分配内存块 - 它会向 DOM 添加单个节点，然后由渲染过程使用。节点的大小通常很小。

当一个节点被删除时，浏览器可能不会释放内存，因为 DOM 本身仍然处于活动状态，但您不必担心。您唯一真正关心的是同时渲染/操作的元素数量。

# php - PHP E_WARNING 超出输入变量不显示

> ID：16170354
> 
> 赞同：3
> 
> 时间：2013-04-23T13:15:45.443
> 
> 标签：php, post, warnings

我的 PHP 5.3.24 有问题。我的 PHP 没有在我的脚本中显示 E_WARNING 消息。

我想出现以下错误：

> 警告：未知：输入变量超过 1000

在我的设置中，这个错误在它应该出现的时候没有出现。这是我的 php.ini 文件： http: [//pastebin.com/iC7yQ2bm](http://pastebin.com/iC7yQ2bm)

遵循以下讨论：[将 PHP 5.3.8 更新到 PHP 5.3.24 后无法发布隐藏输入](https://stackoverflow.com/questions/16165713/cannot-post-hidden-input-after-update-php-5-3-8-to-php-5-3-24)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:20:51.243

[http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-startup-errors](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-startup-errors)

在你的 php.ini / htaccess

```
display_startup_errors = On 
```

或者您可能需要更多...

```
error_reporting = -1
display_errors = On
display_startup_errors = On 
```

可悲的是，您只能打印或不打印它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:35:52.983

把它放在你的 php 文件的第一行

```
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL); 
```

如果它没有显示错误，则表示没有错误。

此外，检查 - > [http://php.net/manual/en/errorfunc.configuration.php](http://php.net/manual/en/errorfunc.configuration.php) [http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)

# scala - FP 或类型级工具在嵌套数据的深叶上分组？

> ID：16170359
> 
> 赞同：2
> 
> 时间：2013-04-23T13:16:01.003
> 
> 标签：scala, group-by, nested, scalaz, shapeless

我得到了一个深度嵌套的数据结构：

```
Seq[Seq[(String, Seq[(String, Seq[(String, Try[Boolean])])], Long)]] 
```

在 Try.isFailure 上进行分组是否有一种*很好的功能方式？*

使用 Shapeless，可以在任意嵌套数据结构中进行搜索，如此处[所示](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/deepsearch.scala)。但发现只是我问题的一部分。我看到了拉链和镜片，它们很好，但它们不是这里的正确工具。

对于信息，数据代表一些测试代码的结果。这些层是：配置排列 => 测试组件 => 数据突变 => 测试代码。字符串是描述，long 是完成每个组件测试所花费的时间。我想创建两个列表，一个包含所有失败的所有信息，保留它们发生的时间和地点的所有信息，将异常保存为信息，一个对应的一个用于成功。

已经有解决方案了吗？

注意：对于该特定情况，最明智的方法是重新设计我的测试代码，以便从一开始就创建两个列表，一个失败列表和一个成功列表。但是，我还是想知道。这种问题似乎并不少见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:44:53.217

它可能不是最有创意的解决方案，但您可以`partition`将最外层的 Seq 如下：

```
val partitioned = seq.partition{ s =>
  val flat = s.map(_._2).flatten.map(_._2).flatten
  flat.find(tup => tup._2.isFailure).isDefined
} 
```

在此示例中，`partition`正文中的第一行将嵌套结构展平，因此您只剩下最里面的`Seq`. 然后，从那里，返回`partition`调用的谓词条件是通过查看最内层是否`Seq`包含至少一个而得出的`Failure`。剩下的是一个元组，其中第一个`Seq`是在其嵌套结构中有“失败”的最外层项目，第二个是没有发生失败的项目。

这可能不是性能最好的解决方案，但就代码行而言，它很简洁。实际上，您甚至可以在一行中执行以下操作：

```
val partitioned = seq.partition(_.map(_._2).flatten.map(_._2).flatten.find(_._2.isFailure).isDefined) 
```

# c# - 以 64 位将 delphi dll 中的字符串返回给 C# 调用者

> ID：16170360
> 
> 赞同：6
> 
> 时间：2013-04-23T13:16:04.293
> 
> 标签：c#, delphi, pinvoke

我有一个 C# 应用程序，它使用以下代码调用本机 Delphi dll：

**C＃**

```
[DllImport("NativeDLL.dll", CharSet = CharSet.Unicode, CallingConvention = CallingConvention.StdCall)]
public static extern int GetString(string out str); 
```

**德尔福**

```
function GetString(out a: PChar): Integer; stdcall;
begin
  a := PChar('abc');
  Result := 1;
end; 
```

这在 32 位应用程序中运行良好。但是当我为 64 位编译 C# exe 和 Delphi dll 时，我遇到了一个奇怪的问题。在 Delphi 调试器中调用 GetString 后，我可以看到在 .NET 代码中的某处引发了异常，并且以下字符串出现在“调试器输出”窗口中：**“检测到严重错误 c0000374”**。谷歌表示此错误与堆损坏有关。我尝试使用 ref/var 参数修饰符而不是 out/out。仍然没有运气。为什么我会收到此错误？我应该为 64 位使用不同的调用约定吗？

顺便提一句。以下组合工作正常：

**C＃**

```
[DllImport("NativeDLL.dll", CharSet = CharSet.Unicode, CallingConvention = CallingConvention.StdCall)]
public static extern string GetString(string a); 
```

**德尔福**

```
function GetString(a: PChar): PChar; stdcall;
var
  inp: string;
begin
  inp := a;
  Result := PChar('test ' + inp);
end; 
```

工作正常。但我确实需要返回一个字符串作为输出参数。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-23T13:22:16.590

您不能以这种方式从本机管理传递字符串。您的代码在 32 位中也是错误的，您只是碰巧侥幸逃脱。第二个版本的代码也是错误的。它似乎只工作。

您需要：

1.  从共享堆中分配，以便托管代码可以从该堆中释放。p/invoke 的共享堆是 COM 堆。
2.  在托管端分配内存，并将内容复制到本机端的缓冲区中。

选项 2 始终是可取的。它看起来像这样：

```
[DllImport("NativeDLL.dll", CharSet = CharSet.Unicode)]
public static extern int GetString(StringBuilder str, int len); 
```

在本机方面，您将拥有

```
function GetString(str: PChar; len: Integer): Integer; stdcall;
begin
  StrLCopy(str, 'abc', len);
  Result := 1; // real code would have real error handling
end; 
```

然后像这样调用它：

```
StringBuilder str = new StringBuilder(256);
int retval = GetString(str, str.Capacity); 
```

如果您想尝试选项 1，它在托管端看起来像这样：

```
[DllImport("NativeDLL.dll", CharSet = CharSet.Unicode)]
public static extern int GetString(out string str); 
```

和这个本地人一样：

```
function GetString(out str: PChar): Integer; stdcall;
begin
  str = CoTaskMemAlloc(SizeOf(Char)*(Length('abc')+1));
  StrCopy(str, 'abc');
  Result := 1; // real code would have real error handling
end; 
```

当托管代码将 的内容复制`str`到字符串值时，它会调用`CoTaskMemFree`您返回的指针。

这很容易调用：

```
string str;
int retval = GetString(out str); 
```

# python - 使用 openpyxl 对列进行排序

> ID：16170364
> 
> 赞同：3
> 
> 时间：2013-04-23T13:16:09.390
> 
> 标签：python, excel, openpyxl

我已经创建了 Excel 表并将数据写入 Excel 文件。

我们有使用排序列的任何功能`openpyxl`吗？我无法附加 Excel 工作表并删除一行 Excel 工作表：

```
0   -269.9  99.97   0   -25.58  0   0.0006901   -269.9  127 0   26.23   0   810 -269.9 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-01T14:22:42.030

我很确定在[openpyxl](http://pythonhosted.org/openpyxl/)或[xlwt](http://www.python-excel.org/)甚至[xlsxwriter](https://github.com/jmcnamara/XlsxWriter)中没有这样的东西（但如果你在 Windows 上，你可以[通过](https://stackoverflow.com/questions/12311345/manipulating-excel-2007-files-using-python)win32com 和 来完成`Excel.Application`）。

通常，您应该只从 excel 文件中读取数据，在 python 中对其进行排序并将数据写回。

查看类似问题：

*   [如何对 xls 文件列进行排序并使用 python 将其写入具有整行的另一个文件？](https://stackoverflow.com/questions/9125465/how-to-sort-xls-file-column-wise-and-write-it-to-another-file-with-entire-row-us)
*   [xlrd / xlutils 重新排序电子表格行](https://stackoverflow.com/questions/12632858/xlrd-xlutils-reordering-spreadsheet-rows?lq=1)

# windows-7 - 在删除 .metadata 文件夹之前，Aptana 在 Windows 7 上崩溃

> ID：16170372
> 
> 赞同：2
> 
> 时间：2013-04-23T13:16:31.790
> 
> 标签：windows-7, aptana

我在 Linux 上使用 Eclipse 和 Apatana 多年，但最近切换到 Windows 7 以与我的业务合作伙伴兼容。我已经安装了 Aptana 的“Aptana Studio 3.4.0 Microsoft Windows, x86”独立版本，安装后它运行良好，直到我关闭它。当我尝试重新打开它时，它挂起（“没有响应”消息），除了删除 aptana 工作区中的 .metadata 目录之外，我没有找到任何解决问题的方法，这当然会删除我所有的项目引用，部署设置，以及我对应用程序所做的任何其他调整，每次重新启动应用程序时都设置备份是浪费我的时间。任何人都可以识别问题吗？我在以下位置有一个日志的 pastebin：

[http://pastebin.com/2J0AWTNR](http://pastebin.com/2J0AWTNR)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-10T10:21:23.357

`.metadata`您可以尝试删除`.markers`任何打开项目的文件，而不是删除整个文件：

在这个文件夹中：

```
...\.metadata\.plugins\org.eclipse.core.resources\.projects\[myProject] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T16:37:42.873

删除（如果存在），然后`.metadata`在项目目录中添加一个空文件夹。

我在 Windows 7 上遇到了同样的问题，Aptana 在启动时永远挂起。在像这样的帖子之后，我`.metadata`在项目目录中查找了该文件夹，但在那里没有看到任何内容。我尝试在项目目录中创建一个空`.metadata`文件夹，然后 Aptana 启动了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T14:10:36.173

我最初使用此修复程序，然后在一段时间后遇到了更多问题。程序中的侧边栏和其他对象不起作用，因此程序停止响应。我终于在这里找到了修复[http://youtu.be/RYobTLq_hms?list=UUtL_0WLPWmHZE_HcX48F96w](http://youtu.be/RYobTLq_hms?list=UUtL_0WLPWmHZE_HcX48F96w)，我希望这对所有人都有帮助！我们终于可以回去工作了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-21T10:48:14.620

有同样的问题，我已经重新安装了，没有什么区别。所以我删除了 .metadata/.plugins/org.eclipse.core.resources/.projects 文件夹并修复它并且没有设置/数据等丢失惊人:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-10T14:10:54.733

我不会将以下内容称为修复程序，但它对我有所帮助，所以就这样：

我的 Aptana 没有启动。它只会挂起，当您单击空白屏幕中的任意位置时，Windows 会说程序没有响应...

这就是为我“修复”它的原因：

1.  导航到：C:\Users\YOURNAME\Aptana Studio 3 Workspace\
2.  创建一个新目录并将“.metadata”目录移动到其中。
3.  启动 Aptana

Aptana 现在将运行，但您的所有项目都将消失。

4.  删除 Aptana 刚刚在启动时创建的新“.metadata”目录。
5.  将“.metadata”文件夹从您刚刚创建的文件夹中移回其原始位置。
6.  现在再次运行 Aptana。

这解决了我的问题。

# c# - SignalR - 从集线器外部通过另一个项目中的集线器广播

> ID：16170373
> 
> 赞同：10
> 
> 时间：2013-04-23T13:16:38.497
> 
> 标签：c#, signalr, signalr-hub

我的解决方案中有两个项目：

> 项目 1：“SignalRChat”（MVC） - 工作正常
> 项目 2：“DatabaseWatcherService” Windows 服务 - 工作正常

我正在尝试从我的 Windows 服务调用 SignalRChat Hub，但它似乎无法正常工作。

这是我从 Windows 服务调用集线器的地方（[https://github.com/SignalR/SignalR/wiki/Hubs#broadcasting-over-a-hub-from-outside-of-a-hub](https://github.com/SignalR/SignalR/wiki/Hubs#broadcasting-over-a-hub-from-outside-of-a-hub)）：

```
void PerformTimerOperation(object sender, EventArgs e)
    {
        eventLog1.WriteEntry("Timer ticked...");

        var message = "test";

        var context = GlobalHost.ConnectionManager.GetHubContext<SignalRChat.ChatHub>();
        context.Clients.All.addNewMessageToPage(message);
    } 
```

尝试连接时出现以下错误：

> Message=远程服务器返回错误：(500) 内部服务器错误。

我正在尝试通过连接`var connection = new HubConnection("http://localhost:2129");`

端口 2129 是我的 MVC 项目正在运行的端口。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-23T13:44:26.913

据我所知，这仅在您从 Web 应用程序中调用集线器时才有效。

为了从 Web 应用程序外部（例如从 Windows 服务）与集线器进行交互，您需要查看[SignalR 客户端集线器文档](https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs)

1.  将以下 NuGet 包添加到您的项目中：`Microsoft.AspNet.SignalR.Client`

2.  将以下语句添加到页面顶部：`using Microsoft.AspNet.SignalR.Client;`

3.  您需要创建与集线器的连接，然后启动连接。

* * *

```
var connection = new HubConnection("http://mysite/");
IHubProxy myHub = connection.CreateHubProxy("MyHub");

connection.Start().Wait(); // not sure if you need this if you are simply posting to the hub

myHub.Invoke("addNewMessageToPage", "Hello World"); 
```

然后，在您的集线器中，您需要有一个`AddNewMessageToPage`接受 hello world 字符串并从这里调用的方法`Clients.All.addNewMessageTopage(message)`

# node.js - 除了在测试中，NodeJS 不会产生子进程

> ID：16170375
> 
> 赞同：0
> 
> 时间：2013-04-23T13:16:41.477
> 
> 标签：node.js, spawn, nodeunit

我有以下 NodeJS 代码：

```
var spawn = require('child_process').spawn;

var Unzipper = {
  unzip: function(src, dest, callback) {
    var self = this;

    if (!fs.existsSync(dest)) {
      fs.mkdir(dest);
    }

    var unzip = spawn('unzip', [ src, '-d', dest ]);

    unzip.stdout.on('data', function (data) {
      self.stdout(data);
    });

    unzip.stderr.on('data', function (data) {
      self.stderr(data);

      callback({message: "There was an error executing an unzip process"});
    });

    unzip.on('close', function() {
      callback();
    });
  }
}; 
```

我有一个成功执行的 NodeUnit 测试。使用 phpStorm 调试测试 var *unzip*被正确分配

![phpStorm调试测试截图](https://i.stack.imgur.com/vOkO1.png)

但是，如果我将相同的代码作为 Web 服务的一部分运行，则*spawn*调用不会正确返回，并且服务器会在尝试将*on处理程序附加到**unzip* var的不存在的*stdout*属性时崩溃。

 *![在此处输入图像描述](https://i.stack.imgur.com/ly6sq.png)

我曾尝试在 phpStorm 之外运行该程序，但是出于同样的原因，它也会在命令行上崩溃。我怀疑这是测试不必处理的权限问题。Web 服务器生成过程可能会导致生产环境中的混乱，因此可能需要一些额外的权限，但我无法找到（或者我错过了）支持我的假设的文档。

我在 OSX Snow Leopard（通过 MacPorts）上运行 v0.10.3。

为什么我不能正确生成子进程？

**更新**

对于@jonathan-wiepert

我正在使用[原型继承](http://howtonode.org/prototypical-inheritance)，所以当我创建 Unzipper 的“实例”时，我设置了标准输出和标准错误，即：

```
var unzipper = Unzipper.spawn({
  stdout: function(data) { util.puts(data); },
  stderr: function(data) { util.puts(data); }
}); 
```

这类似于“构造函数注入”的概念。至于你的其他观点，谢谢你的提示。

我得到的错误是：

```
project/src/Unzipper.js:15
    unzip.stdout.on('data', function (data) {
                 ^
TypeError: Cannot call method 'on' of undefined 
```

根据我的调试屏幕截图，从*spawn*调用返回的对象在不同情况下是不同的。我的测试通过（它检查 ZIP 是否可以正确解压缩），因此在将此代码作为 Web 服务运行时会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:58:57.727

问题是在 Object 原型上创建的 spawn 方法（请参阅[有关 Protypical 继承](http://howtonode.org/prototypical-inheritance)的这篇文章）导致 child_process.spawn 函数被替换，因此调用了错误的函数。

在它被破坏之前，我将 child_process.spawn 保存到 Unzipper“类”的一个属性中，并改用该属性。*

# c# - 在 Apache Thrift C# 中将流作为属性发送

> ID：16170377
> 
> 赞同：3
> 
> 时间：2013-04-23T13:16:44.273
> 
> 标签：c#, streaming, thrift

我想在 thrift 服务中使用流，例如，在服务方法中使用流或类似的东西作为方法的参数（例如，能够将 IDataReader 的结果序列化为流，然后反序列化对另一服务器端数据的引用）。

我不认为这是明确可能的，但我想知道是否有另一种方法可以实现类似的目标。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:24:52.383

Apache thrift 不支持发送流。你能得到的最接近的是发送一个字节数组。

要使用 thrift 实现类似流的体验，您可以创建一个接口，以字节数组的形式返回流的下一部分。

在 C# 语法中，它看起来像

```
interface MyService
{     
   int OpenStream(string path);

   byte[] ReadNextBlock(int openedStreamId, long maxBlockSize);

} 
```

OpenStream 返回在每次调用时传递给 ReadNextBlock 的“流 id”。在您的服务器端，您可能拥有一个 Dictionary(key - openStreamID, value - Stream) ，它将用于保持源流打开并从中读取下一个块。

您还可以在客户端创建一个辅助类，它将是 Stream 的后代，并将使用 OpenStream 和 ReadNextBlock 来获取实际数据。

# resharper - 工具提示死亡 - stylecop/resharper/intellisense - 如何让智能提示工具提示显示？

> ID：16170378
> 
> 赞同：3
> 
> 时间：2013-04-23T13:16:48.237
> 
> 标签：resharper, intellisense, stylecop

烦人的废话。我正在使用 VS 2012；我安装了 ReSharper 和 StyleCop (SC)。如果在一行代码上启用了 StyleCop 警告，除非我修复它，否则我无法摆脱它。我想稍后处理 SC 警告并查看定义的类引用之一上的智能感知工具提示。我该怎么做？我不想暂时禁用 SC，我只想告诉它“闭嘴”一秒钟，这样我就可以查看智能感知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T15:14:26.723

使用 Resharper，您可以使用以下键盘快捷键快速禁用对当前文件的分析（包括 StyleCop 分析）

`Ctrl`+ `Shift`+ `Alt`+`8`

检查智能感知工具提示，然后使用相同的快捷方式再次重新激活分析。

# ruby-on-rails-3 - 在 mac osx 10.8 上的 rails 上安装 ruby 时出错

> ID：16170380
> 
> 赞同：0
> 
> 时间：2013-04-23T13:17:01.260
> 
> 标签：ruby-on-rails-3, macos

我第一次在 Mac OSX 10.8 机器上安装 Ruby on Rails，它产生以下错误：-

> 运行错误 './configure --prefix=/Users/tcs/.rvm/rubies/ruby-1.9.3-p392 --with-opt-dir=/usr/local/opt/libyaml:/usr/local/opt /readline:/usr/local/opt/libxml2:/usr/local/opt/libxslt:/usr/local/opt/libksba:/usr/local/opt/openssl:/usr/local/opt/sqlite --disable -install-doc --without-tcl --without-tk --enable-shared'，请阅读/Users/tcs/.rvm/log/ruby-1.9.3-p392/1366722478_configure.log 出现错误运行配置。停止安装。

我已经阅读了很多博客和文章，但是每次我尝试安装 RoR 时都会出现这个错误。

我在 Mac 上安装了 Xcode 4.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:08:15.913

如果 c 编译器无法创建可执行文件，您可能只需要安装 Xcode 命令行工具。

# standards - 索马里兰国家缩写

> ID：16170385
> 
> 赞同：8
> 
> 时间：2013-04-23T13:17:11.013
> 
> 标签：standards, abbreviation

我找不到[索马里兰](http://en.wikipedia.org/wiki/Somaliland)的两个字母的国家缩写，可能是因为它不是一个国家，而是正如维基百科所说：“一个未被承认的、自我宣布的事实上的主权国家，被国际承认为索马里的一个自治区”。尽管如此，它仍然会占用地图上的空间。

这似乎不是一个编程问题，但确实如此。我正在使用[jvectormap](http://jvectormap.com/) jQuery 插件，它解释了这个区域并为其分配了缩写“_3”来代替两个字母的缩写。问题是，为了使 jvector map 正确使用我的代码，我需要将索马里兰输入到我们的数据库中，但我不想使用“_3”作为它的缩写，我也不想只是做点什么向上。

首先，索马里兰有官方的两个字母缩写吗？

尽管这个问题听起来微不足道，但它在我的脑海中制造了一个悖论，并导致我的大脑融化。如果不存在官方缩写，如何“正确”处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-08-07T15:53:38.067

**索马里**的两个字母国家代码是**SO**。ISO 在 2013 年 7 月收到“联合国全名通知”后将其添加到 ISO 3166 中。参见[ISO 在线浏览平台中的索马里](https://www.iso.org/obp/ui/#iso:code:3166:SO)。

在[国家代码集合](https://www.iso.org/obp/ui/#iso:pub:PUB500001:en)中，SO 有一个绿色代码表示“官方分配的代码元素”。

ISO 国家代码集合没有针对**索马里兰**的条目。维基百科文章[ISO 3166-2:SO](https://en.wikipedia.org/wiki/ISO_3166-2:SO)（即索马里的国家代码）指出 - 没有引用来源 -

> [索马里兰](https://en.wikipedia.org/wiki/Somaliland)和[邦特兰](https://en.wikipedia.org/wiki/Puntland)自治区（前者声称独立但不被任何国家承认）各自跨越多个地区，没有单独的代码。

根据 ISO 注册表，这似乎是正确的。[jVectorMap](http://jvectormap.com/maps/world/africa/)为索马里兰提供代码**XS**；在 ISO 注册表定义中，以 X 开头的两个字母代码是“用户分配的代码元素”。在 jVectorMap 的上下文中使用**XS** for Somaliland 似乎是安全的，但不能保证其他库或程序将使用相同的两个字母代码。

索马里兰也未列入[国家在线项目](https://www.nationsonline.org/oneworld/country_code_list.htm)。

访问索马里兰后，记者 Joshua Keating 在[2018 年 7 月 20 日](https://www.theguardian.com/news/2018/jul/20/when-is-a-nation-not-a-nation-somalilands-dream-of-independence)[*的《卫报》*](https://www.theguardian.com/news/2018/jul/20/when-is-a-nation-not-a-nation-somalilands-dream-of-independence)上写道：

> (...) 根据美国国务院、联合国、非洲联盟和地球上所有其他政府的说法，我不在索马里兰，这是一个贫穷但稳定且大部分功能正常的非洲之角国家。我在索马里。(...)
> 
> 正如索马里人经常提醒你的那样，它过去是一个独立的国家，得到包括联合国在内的国际社会的充分承认。但这个平静的时期持续了不到一周。1960年6月26日，前索马里兰保护国完全独立于英国统治，其独立性得到包括美国在内的全球35个国家的承认。第二天，它的新立法机构通过了一项法律，批准与南方结盟。7 月 1 日，索马里脱离意大利独立，两国合并。这是索马里兰几乎从那以后就后悔的决定。

也可以看看

*   25 年过去了，2016 年 8 月，索马里兰努力争取德国之声[的认可。](https://www.dw.com/en/25-years-on-somaliland-struggles-for-recognition/a-19488683)
*   [为什么索马里兰不是](https://www.economist.com/the-economist-explains/2015/11/01/why-somaliland-is-not-a-recognised-state)*经济学人*认可的国家，2015 年 11 月。
*   [索马里兰自己的认可运动](http://recognition.somalilandgov.com/)。

# javascript - JS更改页面高度时不重绘正文背景CSS渐变

> ID：16170387
> 
> 赞同：0
> 
> 时间：2013-04-23T13:17:12.593
> 
> 标签：javascript, css, gradient

我使用 100% 垂直 CSS 渐变作为 body 元素的背景，如下：

```
body {
    background: -moz-linear-gradient(top,  rgba(0,101,189,0.5) 0%, rgba(255,255,255,1) 100%);
    background: -webkit-linear-gradient(top,  rgba(0,101,189,0.5) 0px,rgba(255,255,255,1) 600px);
    background: -o-linear-gradient(top,  rgba(0,101,189,0.5) 0%,rgba(255,255,255,1) 100%);
    background: -ms-linear-gradient(top,  rgba(0,101,189,0.5) 0%,rgba(255,255,255,1) 100%);
    background: linear-gradient(to bottom,  rgba(0,101,189,0.5) 0%,rgba(255,255,255,1) 100%);
    min-height: 100%;} 
```

然而，当 JS（在我的例子中是 bootstrap.js）动态改变页面的高度时，会发生奇怪的事情——例如，当用户打开折叠的内容部分时，但在其他情况下也是如此。主体背景渐变未正确重绘并出现“损坏”。看到这个截图：http: [//imgur.com/wf5G8Qn](http://imgur.com/wf5G8Qn)

有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T07:04:56.823

有一个关于强制 Webkit 浏览器重新应用 CSS 样式的讨论：[如何强制 WebKit 重绘/重绘以传播样式更改？](https://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes)

`<style>`对我有用的解决方案是在更改页面高度后添加和删除空元素：

```
$('<style></style>').appendTo($(document.body)).remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:30:26.240

这并不是解决您问题的真正答案。但是我在使用渐变的各个地方多次遇到这个问题（我主要使用 Chrome）。我认为这更多取决于浏览器以及它如何实现渐变。似乎很难根据需要重新绘制它。您可以将渐变放在一个类中，例如 .gradient ，然后在完成过渡后删除并添加该类（从碎片版本到新版本会有轻微的可见闪光）。这可能会迫使浏览器重新绘制渐变，但我还没有测试过。这并不完美，但这是我所拥有的。

# php - Twilio - 如何拨打第三方号码并将他添加到会议中？

> ID：16170388
> 
> 赞同：4
> 
> 时间：2013-04-23T13:17:14.807
> 
> 标签：php, api, twilio, phone-call, twilio-twiml

我在使用 Twilio 会议时遇到了一个小问题。

我的 API 接到来电并将呼叫者置于新的空会议室：

```
<Response>
    <Dial>
        <Conference waitUrl="http://twimlets.com/holdmusic?Bucket=com.twilio.music.ambient">Conf 1</Conference>
    </Dial>
</Response> 
```

所以我让来电者在空荡荡的会议室里等着听音乐。
我想拨打其他号码并将其添加到会议室。
这个数字是非 twilio。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T13:49:59.730

您可以使用 Twilio REST API 进行出站呼叫，并将该呼叫定向到您的会议室。在 PHP 中可以这样做：

（这是来自[twilio-php 帮助库](https://www.twilio.com/docs/php/install)）

```
require('/path/to/twilio-php/Services/Twilio.php');

$client = new Services_Twilio($sid, $token);
$call = $client->account->calls->create(
  'some-twilio-number', // From a valid Twilio number
  'other-number-to-call', // Number to call
  'http://example.com/some_twiml'
); 
```

您在此处使用的 URL 应该为 TwiML 提供服务，该 TwiML 将呼叫者置于与您的原始呼叫相同的房间（与您的问题完全相同）。实际上，一个人打电话给你，然后你打电话给另一个人，把他们放在同一个房间里。

（为了充分披露，我在 Twilio 工作。）

# c++ - 我应该如何为 USSD 应用程序安装 LeibICT？

> ID：16170391
> 
> 赞同：2
> 
> 时间：2013-04-23T13:17:16.853
> 
> 标签：c++, api, ussd

我正在寻找一个用于 USSD 应用程序编程的 API，我找到了 Leibcit，但他们没有解释如何安装它。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T12:26:50.640

LeibICT 不是基于开源的公司，您应该购买 USSD GW Lincence 以获得详细信息和 7x24 支持。

请访问 www.leibict.com 了解更多详情。

# php - 使用 jQuery-File-Upload 上传文件的最大大小是多少，我可以使用 jQuery-File-Upload 上传超过 5 gb 的文件大小吗？

> ID：16170393
> 
> 赞同：0
> 
> 时间：2013-04-23T13:17:20.360
> 
> 标签：php, file-upload, jquery-file-upload, max-size

我的服务器上运行着 jQuery-File-Upload。问题是，上次我尝试上传无法上传的 4gb 文件。我怎样才能突破最大文件大小的限制？我认为在 2gb 文件上传下没有问题。服务器是共享的，并且安装了 php 32bit 版本。在服务器 php.ini 设置是：

```
memory_limit = 128M
upload_max_filesize = 10240M
post_max_size = 10240M
max_execution_time 120
max_input_time 60 
```

请任何人帮我解决这个问题。我正在寻找从 2 天起解决问题的方法，但没有运气。而且我不想去java小程序解决方案。如果我可以使用文件分块、html5 技术等来解决这个问题会更好。如果我的任何朋友有任何使用 jQuery-File-Upload 解决此类问题的经验，请分享。任何形式的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:25:12.197

是的，您最多可以上传 5 GB，在您的 PHP 代码中添加以下内容

```
ini_set('set_memory_limit', -1); 
```

如果你这样做，你也可以在你的 PHP 代码中设置其他。

# php - 来自 jpgraph 的图像会永远加载

> ID：16170398
> 
> 赞同：0
> 
> 时间：2013-04-23T13:17:32.840
> 
> 标签：php, jpgraph

我正在使用 jpgraph.php 并且我有以下代码：

```
require_once(dirname(__FILE__).'/../libs/jpgraph/jpgraph.php');
require_once(dirname(__FILE__).'/../libs/jpgraph/jpgraph_pie.php');
$data = array(239,175,62,52,31,441);
$graph = new PieGraph(500,500,'auto');
$graph->SetColor('#008CBE');

[...more code here...]

$graph->Add($p1);
$graph->Stroke(); 
```

从浏览器打开 php 脚本后，它会正确输出图像，但页面会继续加载。大约 1 分钟后，浏览器返回“加载资源失败”，并且图像从有效的 PNG 图像变为损坏的图像。

这是一个链接： http: [//www.standartnews.com/index2.php](http://www.standartnews.com/index2.php)

你有什么想法可能是错的。在我的本地机器上一切正常。

谢谢你。

# wpf - 使用 WPF/XAML 向表单添加动态控件

> ID：16170399
> 
> 赞同：1
> 
> 时间：2013-04-23T13:17:35.693
> 
> 标签：wpf, vb.net, xaml

我是 XAML/Wpf 表单的新手，所以这个项目可能有点超出我的能力。我想制作一个调度程序，它基本上将一堆“工作”添加到表单中，每个都有自己的能力，如点击事件等，但在大多数情况下，它们是具有背景和设定大小的标签。

这就像我在 Winforms 中所做的（删除数据）一样，但添加到表单中非常慢。我希望 xaml 的某种数据绑定和用户控件能帮助我。

![我希望调度程序如何工作](https://i.stack.imgur.com/54SGs.png)

会有大量这样的工作，理想情况下我认为每一行可能是它自己的用户控件或每个部分（这里标记为装配单元）。

我有一些代码可以将作业放置到窗口上，但是没有用户控件，也没有行或节标签。在 xaml 中看起来像这样：

```
<Window.Resources>
    <DataTemplate x:Key="Job">
            <Label Content="{Binding}" Height ="100" Width="100" BorderThickness="1" BorderBrush="Black"/>
        </DataTemplate>
    <DataTemplate x:Key="wrkCenterPanel">
        <ItemsControl ItemsSource="{Binding}" ItemTemplate="{DynamicResource job}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Vertical" Width="Auto" Height="Auto" >

                    </StackPanel>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </DataTemplate>
</Window.Resources>

...

    <Label Grid.Row="0" Grid.Column="0" Content="Production Scheduler" Width="Auto" Height="Auto" FontSize="40" FontWeight="Bold" HorizontalAlignment="Center" />
    <ScrollViewer Grid.Row="1" Grid.Column="0" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto">
        <ItemsControl x:Name="sched" ItemTemplate="{DynamicResource wrkCenterPanel}" />
    </ScrollViewer> 
```

在代码中，我只有一个 List(Of List(Of String)) 并且我将每一行添加为一个新的字符串列表，然后将其绑定到 sched。这甚至是正确的前进方向吗？任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:31:28.850

您似乎正朝着正确的方向前进，但是我建议您在继续之前阅读 MVVM，以便您能够真正了解`DataBinding`WPF 模板系统如何以及如何从中受益。 [关于 MVVM 的 Prism 文档](http://msdn.microsoft.com/en-us/library/gg405484%28v=pandp.40%29.aspx)是一个很好的起点，但是通过简单的搜索，还有无数其他地方可以了解 MVVM。

它的要点是你`DataTemplates`是一个好的开始，但你可以走得更远。`DataTemplates`您可以使用 CLR 对象（MVVM 术语中的 ViewModel），然后定义（视图）以直观地表示这些 CLR 对象，而不仅仅是使用字符串和字符串列表。

结果是您的 XAML 看起来像这样（不完整，但具有示范性）：

```
<Window>
    <Window.Resources>
        <DataTemplate DataType="{x:Type vms:JobViewModel}">
            <Label Content="{Binding Name}" Height ="100" Width="100" BorderThickness="1" BorderBrush="Black"/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type WorkCenterViewModel}">
            <ItemsControl ItemsSource="{Binding Jobs}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Vertical" Width="Auto" Height="Auto" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </DataTemplate>
    </Window.Resources>

    <ContentPresenter Content="{Binding WorkCenter}"/>

</Window> 
```

您的 CLR 对象将如下所示：

```
public class JobViewModel : ViewModel
{
    private string _name;

    public string Name
    {
       get { return _name; }
       set
       {
           _name = value;
           RaisePropertyChanged("Name");
       }
    }
}

public class WorkCenterViewModel : ViewModel
{
    private ObservableCollection<JobViewModel> _jobs;

    public ObservableCollection<JobViewModel> Jobs
    {
       get { return _jobs; }
    }
} 
```

当您定义您的`DataTemplates`没有`x:Key`属性但使用`DataType`属性时，它将自动应用于它找到的该类型的任何实例。

# highcharts - 堆叠条形图的 Highcharts 提示

> ID：16170401
> 
> 赞同：4
> 
> 时间：2013-04-23T13:17:43.120
> 
> 标签：highcharts

我有每个元素的 3 个堆叠条形图是否有任何选项可以显示工具提示以显示每个堆叠条的单独共享的顶部提示。

例如：如果每个元素有 3 个堆叠条形图，显示条形图 1 (A,B,C,D)(堆叠) 条形图 2 (E,F,G,H)(堆叠) 条形图 3 (I)(普通条形图)

我想为每个条显示一个顶部提示，例如在 Bar1 的鼠标悬停上显示 (A,B,C,D) 并在鼠标悬停在 Bar 2 上显示 (E,F,G,H) 并在鼠标悬停在 Bar 上显示 (I) 3 与他们的系列名称。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:54:23.720

您可以将共享参数用于工具提示

[http://jsfiddle.net/nAkWg/](http://jsfiddle.net/nAkWg/)

```
tooltip: {
            shared:true
        }, 
```

[http://api.highcharts.com/highcharts#tooltip.shared](http://api.highcharts.com/highcharts#tooltip.shared)

# c# - 高度和宽度的绝对值

> ID：16170405
> 
> 赞同：0
> 
> 时间：2013-04-23T13:17:56.507
> 
> 标签：c#, .net, wpf, xaml, screen

我有一个 Wpf 应用程序，我希望所有的窗口都是全屏并居中。我在每个构造函数中添加了这条指令：

```
WindowStartupLocation = System.Windows.WindowStartupLocation.CenterScreen; 
```

在我自己的电脑上它是有效的。但在其他情况下，它不是因为固定值。

```
<Window x:Class="IHM.Authentification"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     Title="" Height="803" Width="1380px" ResizeMode="NoResize" Background="#FFE8EEF3" WindowState="Maximized" WindowStyle="None"> 
```

我希望高度和宽度的值是动态的，并且与 PC 屏幕的尺寸无关。

那么我该如何解决这个错误呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:19:45.113

只需删除固定值并添加

```
WindowStartupLocation="CenterScreen" 
```

删除构造函数

```
<Window x:Class="IHM.Authentification"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 Title="" ResizeMode="NoResize" Background="#FFE8EEF3" WindowState="Maximized" WindowStyle="None"
 WindowStartupLocation="CenterScreen"
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:39:39.783

只有 WindowState="Maximized" 会做

# rdf - 寻找创建紧凑表的 SPARQL 查询

> ID：16170408
> 
> 赞同：1
> 
> 时间：2013-04-23T13:18:03.543
> 
> 标签：rdf, sparql

我有一些使用新的[Data Cube 词汇](http://www.w3.org/TR/2013/WD-vocab-data-cube-20130312/)的 RDF 数据。对于可视化，我需要将数据作为一个扁平且紧凑的表格。但我无法找到执行此操作的正确 SPARQL 查询。

我将尝试举一个最小的例子......

给定以下 RDF 数据：

```
o1
 :year "2007";
 :fruit :apples;
 :harvest "200";
 .
o2
 :year "2007";
 :fruit :pears;
 :harvest "180";
 . 
o3
 :year "2008";
 :fruit :apples;
 :harvest "205";
.
o4
 :year "2008";
 :fruit :pears;
 :harvest "176";
. 
```

是否有可以将数据返回为下表的 SPARQL 查询？

```
Year | Apples | Pears
2007 | 200    | 180
2008 | 205    | 176 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:05:34.180

尝试：

```
select ?year (sample(?num_apples) as ?apples) (sample(?num_pears) as ?pears)
where
{
    { ?s :year ?year ; :fruit :apples; :harvest ?num_apples }
    union
    { ?s :year ?year ; :fruit :pears; :harvest ?num_pears }
}
group by ?year 
```

您可以使用`sum()`or`avg()`而不是`sample()`，如果您有多个收获数字，这将更有意义。

（警告：您的值是字符串而不是数字！）

# highcharts - 在高图表上的某些点上禁用标记

> ID：16170409
> 
> 赞同：1
> 
> 时间：2013-04-23T13:18:04.380
> 
> 标签：highcharts

嗨，我的解决方案是：

```
data:{
     series:[
         {
            x: 1234,
            y: 45678,
           marker: {
               enabled: false,
               states:{
                  hover:{
                     enabled: false,
                  },
                  select:{
                     enabled: false,
                  }
               }
             }
        },
        .... //other data
  ] 
```

}

但是对于状态悬停仍然出现...... :(

演示：http: [//jsfiddle.net/favio41/ertzq/](http://jsfiddle.net/favio41/ertzq/)

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:04:58.063

这是已知的错误，在这里报告：[https ://github.com/highslide-software/highcharts.com/issues/1610](https://github.com/highslide-software/highcharts.com/issues/1610)

**更新：**该错误现已修复。确保您使用的是最新版本的 Highcharts 库。

# c++ - OpenGL渲染错误

> ID：16170410
> 
> 赞同：0
> 
> 时间：2013-04-23T13:18:04.867
> 
> 标签：c++, opengl, render

我目前正在使用 glut 等进行分配，并且我从 3ds max 的 obj 文件中导入所有顶点我目前正在使用一个立方体，但它使一切变得很奇怪，很难解释，但它没有呈现为立方体，我看起来更多像一个三角形：

[![图像](https://imgur.com/BaIo1hf.jpg)](https://imgur.com/BaIo1hf.jpg)

```
#include <windows.h>
#include <GL/gl.h>
#include <GL/glu.h>
#include "glut.h"
#include <istream>
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <vector>

using namespace std;

// structs for arrays
struct point3D
{
float x;
float y;
float z;
};
//camera structs
struct camera 
{
point3D pos;
point3D lookAt;
point3D up;

};

//global variables
camera cam = {0, 0, 5, 0, 0, 0, 0, 1, 0};

int mousex = 0;
int mousey = 0;
bool mouseDown=false;

point3D v[8] = {};
point3D vn[6] = {};
point3D vt[4] = {};
point3D f[12][3] = {};

void init()
{
glClearColor(0.5, 0.7, 0.0, 1.0);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glFrustum(-1.0, 1.0, -1.0, 1.0, 1.0, 1000);
glEnable(GL_CULL_FACE);
glCullFace(GL_BACK);

}

void display() 
{
    glClear(GL_COLOR_BUFFER_BIT );
glMatrixMode(GL_MODELVIEW); 
glLoadIdentity(); // reset the matrix

gluLookAt(cam.pos.x, cam.pos.y, cam.pos.z,
  cam.lookAt.x, cam.lookAt.y, cam.lookAt.z, 
  cam.up.x, cam.up.y, cam.up.z); // sets camera position.

glColor3f(1.0, 0.0, 0.0);
    glTranslatef(0.0f, 0.0f, -15.0f);

for(int i = 0; i < 8; i++)//reads coords for verts from global arrays.
{
    glBegin(GL_TRIANGLES);
        int one = f[i][0].x;
        int two = f[i][1].x;
        int three = f[i][2].x;

        glVertex3fv(&(v[one].x));
        glVertex3fv(&(v[two].x));
        glVertex3fv(&(v[three].x));
    glEnd();
}

glFlush();
}

void drawAxes() {
glBegin(GL_LINES);
    glVertex3f(0, 0, 0);
    glVertex3f(10, 0, 0);
    glVertex3f(0, 0, 0);
    glVertex3f(0, 10, 0);
    glVertex3f(0, 0, 0);
    glVertex3f(0, 0, 10);
glEnd();// draws a axis to show scene
}

void passiveMouseFunc(int x, int y )
{
if (mouseDown == true)
{
if (x > mousex)
cam.lookAt.x+= 0.5;
if (x < mousex)
cam.lookAt.x-= 0.5;
if (y > mousey)
cam.lookAt.y-= 0.5;
if (y < mousey)
cam.lookAt.y+= 0.5;

mousex = x;
mousey = y;
glutPostRedisplay();
}
else
{
if (x > mousex)
cam.lookAt.x+= 0.0;
if (x < mousex)
cam.lookAt.x-= 0.0;
if (y > mousey)
cam.lookAt.y-= 0.0;
if (y < mousey)
cam.lookAt.y+= 0.0;

mousex = x;
mousey = y;
glutPostRedisplay(); //redraws scene

}
}
void glutMouseFunc(int button, int state, int x, int y)
{
switch (button)
{
case GLUT_LEFT_BUTTON: //makes it so i have to click to move cam
     mouseDown = true;
     break;
case GLUT_RIGHT_BUTTON:
    mouseDown = false;
    break;
}
}

void specialKeyboard(int key, int x, int y) // methods used for moving cam
{
   switch (key)
   {
     case GLUT_KEY_RIGHT:
    cam.pos.x+=0.2;
    break;
    case GLUT_KEY_LEFT:
     cam.pos.x-=0.2;
    break;
   case GLUT_KEY_UP:
   cam.pos.y+=0.2;
  break;
  case GLUT_KEY_DOWN:
   cam.pos.y-=0.2;
   break;
  case GLUT_KEY_PAGE_UP:
   cam.pos.z+=0.2;
    break;
  case GLUT_KEY_PAGE_DOWN:
   cam.pos.z-=0.2;
    break;
}

   glutPostRedisplay();

}

void ObjloaderSpaceship () // loads a cube from .obj file
{
int numVert = 0;
int numNormals= 0;
int numcoords = 0;
int numFaces = 0;
int ammount = 0;
string test;
ifstream inputFile;
inputFile.open("cube.obj");

if (!inputFile.good())
    cout << "Problem with Input File";
else
{
    while(!inputFile.eof())
    {

        inputFile >> test;

        if (test == "v")
        {
            inputFile >> v[numVert].x;
            inputFile >> v[numVert].y;
            inputFile >> v[numVert].z;
            numVert++;
        }

        else if(test == "vn")
        {

            inputFile >> vn[numNormals].x;
            inputFile >> vn[numNormals].y;
            inputFile >> vn[numNormals].z;
            numNormals++;
        }
        else if(test == "vt")
        {
            inputFile >> vt[numcoords].x;
            inputFile >> vt[numcoords].y;
            inputFile >> vt[numcoords].z;
            numcoords++;
        }
        else if(test == "f")
        {

            string temp;

            for(int count = 0; count < 3; count++)
            {   

                inputFile >> temp;
                stringstream stream(temp);

                f[numFaces][count].x -= 1;

                getline(stream, temp, '/'); 
                f[numFaces][count].x = atof(temp.c_str());
                getline(stream, temp, '/'); 
                f[numFaces][count].y = atof(temp.c_str());
                getline(stream, temp, '/'); 
                f[numFaces][count].z = atof(temp.c_str());
            }

            numFaces++;
        }

    }

}
}

//void normalKeyboard(unsigned char key, int x, int y) {
//   switch (key)
//   {

//   case 'w' :
//     cam.lookAt.y+=0.5;
//     break;
//   case 'a' :
//     cam.lookAt.y-=0.5;
//     break;
//   case 's' :
//     cam.lookAt.x-=0.5;
//     break;
//   case 'd' :
//     cam.lookAt.x+=0.5;
//     break;
//   }
    //  
//   glutPostRedisplay();

//}

int main(int argc, char* argv[]) 
{

    glutInit(&argc, argv);
    glutCreateWindow("C++ Assignment");
    drawAxes();
    glutMouseFunc(glutMouseFunc);
    glutPassiveMotionFunc(passiveMouseFunc);
    ObjloaderSpaceship();
    glutDisplayFunc(display);
    glutSpecialFunc(specialKeyboard);
//  glutKeyboardFunc(normalKeyboard);

    init();
    glutMainLoop();

} 
```

这是obj文件。

```
# 3ds Max Wavefront OBJ Exporter v0.97b - (c)2007 guruware
# File Created: 23.04.2013 13:50:59

mtllib cube.mtl

#
# object Box001
#

v  2.2289 0.0000 -1.5936
v  2.2289 0.0000 -30.3830
v  31.1072 0.0000 -30.3830
v  31.1072 0.0000 -1.5936
v  2.2289 29.4346 -1.5936
v  31.1072 29.4346 -1.5936
v  31.1072 29.4346 -30.3830
v  2.2289 29.4346 -30.3830
# 8 vertices

vn 0.0000 -1.0000 -0.0000
vn 0.0000 1.0000 -0.0000
vn 0.0000 0.0000 1.0000
vn 1.0000 0.0000 -0.0000
vn 0.0000 0.0000 -1.0000
vn -1.0000 0.0000 -0.0000
# 6 vertex normals

vt 1.0000 0.0000 0.0000
vt 1.0000 1.0000 0.0000
vt 0.0000 1.0000 0.0000
vt 0.0000 0.0000 0.0000
# 4 texture coords

g Box001
usemtl wire_006135006
f 1/1/1 2/2/1 3/3/1 
f 3/3/1 4/4/1 1/1/1 
f 5/4/2 6/1/2 7/2/2 
f 7/2/2 8/3/2 5/4/2 
f 1/4/3 4/1/3 6/2/3 
f 6/2/3 5/3/3 1/4/3 
f 4/4/4 3/1/4 7/2/4 
f 7/2/4 6/3/4 4/4/4 
f 3/4/5 2/1/5 8/2/5 
f 8/2/5 7/3/5 3/4/5 
f 2/4/6 1/1/6 5/2/6 
f 5/2/6 8/3/6 2/4/6 
# 12 faces 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:15:14.153

该代码很粗糙，并且基于对输入数据的假设存在许多缺陷。但这是你要解决的问题，而不是问题的一部分。

您可能错过的重要信息是 OBJ 格式指定基于 1 的索引的任何内容。但在 C/C++ 中，索引是基于 0 的。您可以在读取例程或渲染例程中修复它。（我会去阅读，因为这使您可以阅读其他格式而不更改渲染代码。）

因此，在第 219 行，您将代码更改为：

```
 else if(test == "f")
    {
        string temp;
        for(int count = 0; count < 3; count++)
        {   
            inputFile >> temp;
            stringstream stream(temp);

            getline(stream, temp, '/'); 
            f[numFaces][count].x = atoi(temp.c_str()) - 1;
            getline(stream, temp, '/'); 
            f[numFaces][count].y = atoi(temp.c_str()) - 1;
            getline(stream, temp, '/'); 
            f[numFaces][count].z = atoi(temp.c_str()) - 1;
        }

        numFaces++;
    } 
```

您还**绝对**希望将您的面部格式更改为整数而不是浮点数。我完全可以想象价值观会漂移。

您还需要捕获以下情况：

*   只有一个顶点 (1)
*   一个顶点和一个纹理线（1/1）
*   一个顶点和法线 (1//1)
*   面不是三角形（超过3个顶点）

# apache-flex - 将带有表单的文件从 Flex Air 上传到 Java Servlet 3.0

> ID：16170413
> 
> 赞同：1
> 
> 时间：2013-04-23T13:18:06.457
> 
> 标签：apache-flex, post, air, flex4, servlet-3.0

我已经搜索了好几天...我有一个 Flex Air 应用程序，需要将表单上传到 java servlet。表格非常基本：

> 名字：
> 姓氏：
> 图片：

这是最基本的应用程序......我一直在尝试在客户端使用它：

> [http://blog.inspirit.ru/?p=139](http://blog.inspirit.ru/?p=139)

```
import flash.utils.ByteArray;
import ru.inspirit.net.MultipartURLLoader;

var data1:ByteArray = new ByteArray();
data1.writeUTFBytes("This is a test 1");
data1.position = 0;

var data2:ByteArray = new ByteArray();
data2.writeUTFBytes("This is a test 2");
data2.position = 0;

var ml:MultipartURLLoader = new MultipartURLLoader();
ml.addEventListener(Event.COMPLETE, onReady);

function onReady(e:Event):void
{
    // Upload Complete
}

// simple string data
ml.addVariable('test', 'test variable');

// file data: ByteArray, File name, Name of the file field, content MIME type (default application/octet-stream)
// use [] if you need identical file field name
// specify MIME type for your file part
ml.addFile(data1, 'test1.txt', 'Filedata[]');
ml.addFile(data2, 'test2.txt', 'Filedata[]', 'text/plain');

ml.load('test.php'); 
```

在服务器端，我要做的就是将 pic.jpg 保存为 ac:/uploads/ 中的 lastname.jpg

有人可以告诉我air和java servlet 3.0之间最基本的工作示例吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:36:48.533

这可能有些过时，但它有效 - 可能会给你一个开始：

```
public function buildForm() : void
{
    var requestObj : Object = new Object();
    requestObj.javavalue0 = value0;
    requestObj.javavalue1 = value1;
    flexform.request = requestObj;

    flexform.send();
}

<mx:HTTPService id="flexform" url="https://someurl.org/Form/servletPage" 
    method="POST" result="resultHandlerSubmitForm(event)" 
    fault="faultHandler(event)" /> 
```

* * *

在 java 方面：用于`request.getParameter`获取 POST 值。

```
public class servletPage extends HttpServlet
{

/**
 * Processes requests for both HTTP <code>GET</code> and <code>POST</code> methods.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException
{
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try
    {
        String str_javavalue0 = request.getParameter( "javavalue0" ); 
```

等等....

# python - 显示结果的 SQL 查询比 Python 表中存储的结果多或 - 30 分钟

> ID：16170414
> 
> 赞同：0
> 
> 时间：2013-04-23T13:18:07.860
> 
> 标签：python, mysql, mysql-python

我是新手，正在`Python`使用`MySqldb`，需要一些帮助。我在 python 脚本中有以下代码来搜索我的数据库中的表以查找具有今天日期的任何会议 ID。目前这工作正常。然而，在我的数据库中，“开始时间”字段有`yyyy-mm-dd hh-mm-ss`，我想做的不仅仅是提取所有具有今天日期的会议 ID，而且只有当它们有今天并且开始时间是 + 或 - 30 分钟到存储在桌子。这可能吗？感谢您提前提供任何帮助

```
cur.execute("SELECT id FROM meeting WHERE DATE(starttime) = DATE(NOW()) AND id=%s", (meetingid,))
if cur.rowcount: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:20:39.143

```
SELECT 
    id 
FROM 
    meeting 
WHERE 
    starttime >= NOW() - INTERVAL 30 MINUTE
AND starttime <= NOW() + INTERVAL 30 MINUTE
AND id=%s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:20:51.680

这是您可以在开始时间使用的条件：

```
starttime BETWEEN NOW() - INTERVAL 30 MINUTE AND NOW() + INTERVAL 30 MINUTE 
```

# sql - AND 语句中的 CASE 或 IF

> ID：16170416
> 
> 赞同：0
> 
> 时间：2013-04-23T13:18:21.590
> 
> 标签：sql, if-statement, parameters, case

我有一个带有一堆 AND 语句的查询。现在，当设置变量时，我想使用特定的 AND 语句。但是当它为空或 NULL 时，我不想要那个声明。我用 IF 和 CASE 找到了一些东西，但我无法完成:(

我想要这样的东西

```
SELECT *
FROM table
WHERE [Statement1]

IF @Location IS NOT NULL OR <> ''
BEGIN
    AND [SBC Live 2$Sales Shipment Line].[Location _ Sector No_] = @Location
END 
```

也许有人可以帮助我？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:22:18.587

这应该适合你：

```
SELECT *
FROM table
WHERE [Statement1] AND (ISNULL(@Location,'') = '' OR [SBC Live 2$Sales Shipment Line].[Location _ Sector No_] = @Location) 
```

所以最后，要么@Location 为空/空白，要么匹配[SBC Live 2$Sales Shipment Line]。[Location _ Sector No_]

注意：在您的伪代码中，您在 IF 检查中有 OR，但根据您之前编写的内容，我假设您正在那里寻找 AND。

# hadoop - 如何为 Amazon ec2 机器分配静态主机名或 IP 地址？

> ID：16170422
> 
> 赞同：0
> 
> 时间：2013-04-23T13:18:46.077
> 
> 标签：hadoop, amazon-ec2

我正在使用 Amazon EC2 Machine，我正在使用 Hadoop 和其他一些大数据工具（如 hive、hbase、pig）在其上运行 HDP。

我使用 ec2.1.1.1compute-1.amazonaws.com 之类的机器名称作为主机名，但是当我重新启动机器时，它的 IP 地址会更改，因此需要更改主机名。

那么，即使我的 IP 被更改，我如何使用简单的静态名称来解析机器的 IP 地址。

#############

########

## #

#########

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:53:41.630

您可以安装 ddclient 并使用[动态 DNS](https://help.ubuntu.com/community/DynamicDNS)动态分配主机名。根据您选择的提供商，引导和通过 DNS 传播名称之间可能存在延迟。有许多免费服务可供使用。

虽然 EC2 实例可以免费关联一个弹性 IP，但[在不使用时名义上会向您收费](http://aws.amazon.com/ec2/pricing/#elastic-ip)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:54:57.890

我认为您将需要使用亚马逊所谓的弹性 IP 地址。这些是您可以分配给正在运行的 EC2 实例的固定 IP 地址。上次我检查了使用弹性 IP 会收取少量费用，并且每个帐户限制为 5 个弹性 IP，因此请谨慎使用。

您可能需要编写一个小脚本来自动分配您的弹性 IP，在您启动 EC2 实例时将其作为“用户数据”执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:15:41.897

您只需为其分配一个弹性 IP。此 IP 将保持与实例关联，直到实例终止。

# jquery - 创建复选框而不是使用 jquery 选择

> ID：16170423
> 
> 赞同：0
> 
> 时间：2013-04-23T13:18:49.850
> 
> 标签：jquery, checkbox, selected

嗨，

我有以下情况。我有一个表格，我从数据库值中读取并将它们放在这样的选择中

**HTML 代码：**

```
<select id="model" name="model">
    <option value="0">choose...</option>
</select> 
```

**Javascript代码：**

```
var nrcrt = $("input#type option:selected").attr('value');
    $.post("select_model.php", {nrcrt:nrcrt}, function(data){
    $("select#model").removeAttr("disabled");
    $("select#model").html(data);
}); 
```

在 nrcrt 中，我有一个来自先前选择的值，我在 select_model.php 中使用它来对 mysql 进行查询。

问题是：任何人都可以帮助我将其从选择列表转换为复选框列表吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:30:22.647

尚未对其进行测试，但这可能会满足您的要求：

```
var html = "";
    $("#model>option").each(function(){
     html+="<input type='checkbox' name='model[]' value='" + $(this).attr("value") + "'/>" + $(this).text() + "<br/>";
    });
    $("#model").after(html);
    $("#model").remove(); 
```

# c++ - 创建自定义 tk 画布小部件

> ID：16170425
> 
> 赞同：0
> 
> 时间：2013-04-23T13:18:53.813
> 
> 标签：c++, canvas, tcl, tk, xlib

我需要创建自定义 tk 画布小部件（绘图）。如何做到这一点描述了[http://www.tcl.tk/man/tcl8.0/TkLib/CrtItemType.htm](http://www.tcl.tk/man/tcl8.0/TkLib/CrtItemType.htm)。

它是画布需要显示绘图时调用的显示函数。

```
void
PlotItem::DisplayPlot( Tk_Canvas canvas, Tk_Item *itemPtr, Display *display, Drawable drawable, int x, int y, int width, int height) {
    PlotItem *plotPtr = (PlotItem *) itemPtr;
    GC gc = XCreateGC(display, drawable, 0, 0);
    XFillRectangle(display, drawable, gc, 100, 100, 50, 50);
} 
```

主文件

```
int main() {
    Tcl_Interp *interp = Tcl_CreateInterp(); 
    if (Tcl_Init(interp) == TCL_ERROR) {
        return TCL_ERROR;
    } 
    if (Tk_Init(interp) == TCL_ERROR) {
        return TCL_ERROR;
    } 

    Tk_CreateItemType(&tkPlotType); 
    int result = Tcl_Eval(interp, "source main.tcl");

    std::cout << result << std::endl;
    std::cout << interp->result << '\n';

    Tk_MainLoop(); 
    return 0;
} 
```

主要的.tcl

```
wm title . program_tk
wm minsize . 628 628

canvas .vp -background white -width 310 -height 224
canvas .hp -background white -width 310 -height 224

pack .vp 
pack .hp 

set verticalPlot [eval .vp create plot 1 1 ]
set horizontalPlot [eval .hp create plot 1 1 ] 
```

它创建了两个不同的画布小部件，都包含绘图小部件。仅显示显示功能的代码，因为其他功能不执行任何操作。我只需要简单的功能（显示情节）。而不是这里的情节是打印矩形。问题是黑色矩形只显示在第一个图上，第二个是空的。这怎么可能发生？

# java - 从 javascript 调用 java web 服务

> ID：16170429
> 
> 赞同：2
> 
> 时间：2013-04-23T13:19:13.330
> 
> 标签：java, javascript, ajax, web-services

我想从纯 java 脚本代码中调用我的 web 服务方法。并且该代码应该可以在 Mozilla 浏览器上运行。

这是我的网络服务代码：

```
package com.example.core;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebService;
import javax.xml.ws.Endpoint;

@WebService
public class Area {

@WebMethod
public double square(@WebParam(name="side") double side)
{
return side * side;
}

@WebMethod
public double rectangle(@WebParam(name="length") double length,@WebParam(name="breadth") double breadth)
{
 return length * breadth;
 }

 public static void main(String[] args) {
 Area area = new Area();
String url = "http://localhost:8090/area"; // end point of webservice.
 System.out.println(url+"?wsdl");
 Endpoint.publish(url, area);  // publishing the webservice
}
} 
```

这是我的 HTML 文件：

```
<html>
<head>
<meta content="utf-8" http-equiv="encoding">
<meta content="text/xml;charset=utf-8" http-equiv="Content-Type">
<script language="javascript">

function call()
{
var side = sideid.value;
var side1 = sideid1.value;
var req = "<?xml version=\"1.0\" encoding=\"utf-8\"?>"+"<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:web=\"http://core.codon.com/\"><soapenv:Body><web:rectangle><length>" + side+ "</length><breadth>" + side1+ "</breadth></web:rectangle></soapenv:Body></soapenv:Envelope>";
 //var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
 //var reqXML = xmlDoc.loadXML(req);
 var xmlDoc=document.implementation.createDocument("", "", null);
 xmlDoc.async=false;
 xmlDoc.onload = req; 
 //var reqXML = xmlDoc.load(req);
var xmlhttp;
if(window.XMLHttpRequest){
  xmlhttp=new XMLHttpRequest();
 }
 xmlhttp.onreadystatechange=function()
 {
 if (xmlhttp.readyState==4)
 {
  var response = xmlhttp.responseXML;

  alert(response.selectSingleNode(".//return").text);
   alert("======"+response);
  }
}
 var soapaction = "http://core.example.com/rectangle";
 xmlhttp.open("POST","http://localhost:8090/area?wsdl",true);
 xmlhttp.setRequestHeader("Content-Type", "text/xml; charset=utf-8");
 xmlhttp.setRequestHeader("SOAPAction", soapaction);
 xmlhttp.send(req);
}
</script>
</head>
<body>
 Side Length: <input type="text" id="sideid"></input>
 Length: <input type="text" id="sideid1"></input>
 <button onclick="call();">area of square</button>
 </body>
 </html> 
```

使用上面的代码，我得到的响应为空。相同的代码在 IE 上工作，但在 mozilla 中没有......

我的网络服务端收到以下错误

```
 com.sun.xml.internal.ws.transport.http.server.WSHttpHandler handleExchange
 WARNING: Cannot handle HTTP method: OPTIONS 
```

请帮帮我..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:14:32.630

我会使用 SOAP UI，生成 Web 服务客户端，生成示例请求，所以我不需要从头开始创建 SOAP 信封。然后我会使用 jQuery 在生成的 SOAP 信封的帮助下生成 AJAX 请求。

另一种方法是使用[http://cxf.apache.org/docs/javascript-clients.html](http://cxf.apache.org/docs/javascript-clients.html) - 您将通过这种方式生成完整的 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T07:04:55.487

您正在将 web 服务作为独立应用程序运行在端口说“x”上，并且客户端可能在另一个端口上说“y”当您通过 y 对 x 进行发布调用时，该方法将始终自动更改为选项。我猜，互联网标准不允许在不同服务器之间“发布”。您将不得不找到另一种解决方法。

# java - 如何在手风琴中显示行

> ID：16170433
> 
> 赞同：0
> 
> 时间：2013-04-23T13:19:24.723
> 
> 标签：java, javafx-2, javafx

我有这个显示图像的 JavaFX 手风琴：

公共类导航{

```
private static final Image BLUE_FISH = new Image("/Blue-Fish-icon.png");
private static final Image RED_FISH = new Image("/Red-Fish-icon.png");
private static final Image YELLOW_FISH = new Image("/Yellow-Fish-icon.png");
private static final Image GREEN_FISH = new Image("/Green-Fish-icon.png");

public void initNavigation(Stage primaryStage, Group root, Scene scene) {

    VBox stackedTitledPanes = createStackedTitledPanes();

    ScrollPane scroll = makeScrollable(stackedTitledPanes);
    scroll.getStyleClass().add("stacked-titled-panes-scroll-pane");
    scroll.setPrefSize(395, 580);
    scroll.setLayoutX(5);
    scroll.setLayoutY(32);

    //scene = new Scene(scroll);
    root.getChildren().add(scroll);

}

private VBox createStackedTitledPanes() {
    final VBox stackedTitledPanes = new VBox();
    stackedTitledPanes.getChildren().setAll(
            createTitledPane("Connections", GREEN_FISH),
            createTitledPane("Tables", YELLOW_FISH),
            createTitledPane("Description", RED_FISH),
            createTitledPane("Blue Fish", BLUE_FISH));
    ((TitledPane) stackedTitledPanes.getChildren().get(0)).setExpanded(true);
    stackedTitledPanes.getStyleClass().add("stacked-titled-panes");

    return stackedTitledPanes;
}

public TitledPane createTitledPane(String title, Image... images) {
    FlowPane content = new FlowPane();
    for (Image image : images) {
        ImageView imageView = new ImageView(image);
        content.getChildren().add(imageView);

        FlowPane.setMargin(imageView, new Insets(10));
    }
    content.setAlignment(Pos.TOP_CENTER);

    TitledPane pane = new TitledPane(title, content);
    pane.getStyleClass().add("stacked-titled-pane");
    pane.setExpanded(false);

    return pane;
}

private ScrollPane makeScrollable(final VBox node) {
    final ScrollPane scroll = new ScrollPane();
    scroll.setContent(node);
    scroll.viewportBoundsProperty().addListener(new ChangeListener<Bounds>() {
        @Override
        public void changed(ObservableValue<? extends Bounds> ov, Bounds oldBounds, Bounds bounds) {
            node.setPrefWidth(bounds.getWidth());
        }
    });
    return scroll;
} 
```

}

我感兴趣的是可以在放置图像的位置显示数据行。像这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/PUTwy.png)

PS案例示例。我有一个将用作列表的 java 对象：

```
public List<dataObj> list = new ArrayList<>();

    public class dataObj {

        private int connectionId;
        private String conenctionname;
        private String connectionDescription;

        public dataObj() {
        }

        ....................
    } 
```

当我在 Java Array 列表中插入一些数据时，我想根据上述要求将其显示到手风琴中。

PS 2 在我的情况下，将文本插入 FlowPane 的正确方法是什么？我测试了这个：

```
public TitledPane createTitledPane(String title, Image... images) {
        FlowPane content = new FlowPane();
        for (Image image : images) {
            ImageView imageView = new ImageView(image);
            content.getChildren().add(imageView);

            FlowPane.setMargin(imageView, new Insets(10));
        }
        content.setAlignment(Pos.TOP_CENTER);
        content.setText("This part will be the first line.\n This part the second.");

        TitledPane pane = new TitledPane(title, content);
        pane.getStyleClass().add("stacked-titled-pane");
        pane.setExpanded(false);

        return pane;
    } 
```

我收到插入文本使用`setText`不正确的错误。什么是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:22:51.250

如果使用`"\n"`输出 String 将被分隔成多行文本。例如：

```
component.setText("This part will be the first line.\n This part the second."); 
```

从您的更新中，假设您有`getters`并且`setters`：

```
component.setText(String.valueOf(dataObj.getConnectionId()) + "\n" + dataObj.getConnectionname() + "\n" + dataObj.getConnectionDescription()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:14:09.993

您可以简单地使用 ListView：

```
private void hello() {
    ListView<Object> lv = new ListView<>();
    // yourList is you List<Object> list
    lv.itemsProperty().set(yourList);
    lv.setCellFactory(new Callback<ListView<Object>, ListCell<Object>>() {
        @Override
        public ListCell<Object> call(ListView<Object> p) {
            return new youCellFactory();
        }
    });
    AnchorPane content = new AnchorPane();
    content.getChildren().add(lv);
    // add to TitelPane
    TitledPane pane = new TitledPane(title, content);
}
static class youCellFactory extends ListCell<Object> {
    @Override
    public void updateItem(Object item, boolean empty) {
        super.updateItem(item, empty);
        if (item != null) {
            setText(item.getConenctionname());
        }
    }
} 
```

我没有测试过这段代码，但它应该可以工作。

这也是一个不错的示例，但没有对象：
[ListViewSample.java](http://docs.oracle.com/javafx/2/ui_controls/ListViewSample.java.html)

# xamarin.ios - Parse.com .NET SDK：官方绑定和 monotouch-bindings 之间的区别

> ID：16170434
> 
> 赞同：3
> 
> 时间：2013-04-23T13:19:28.737
> 
> 标签：xamarin.ios

我最近注意到 Parse.com 发布了他们的 Xamarin.iOS SDK。到目前为止，选项是使用开源绑定[https://github.com/mono/monotouch-bindings/tree/master/Parse](https://github.com/mono/monotouch-bindings/tree/master/Parse)

2实施之间有什么区别？mt-bindings 中的那个是否被认为已弃用？

据我所知，官方 Parse sdk：

*   是完整的c#（没有绑定）
*   支持异步/等待
*   但只提供 ParseObject API（没有额外的，比如 loginview，......）

# java - 如何仅根据特定模块的不同模块的更改来编译增量构建？

> ID：16170435
> 
> 赞同：0
> 
> 时间：2013-04-23T13:19:32.537
> 
> 标签：java, maven, build

我有一棵巨大的模块树，它们以不同的方式相互依赖。有许多代码模块我在其中进行更改，还有一些打包模块将不同的实现模块打包在 jars/ears/wars 等中。

当我只更改一个模块中的代码时，我只能`mvn install -amd -pl <changed module(s)>`用来构建依赖于修改后的模块的模块。但是我只对其中一个生成的模块感兴趣，并且不需要也将构建的所有其他打包模块。我可以使用`mvn install -am -pl <desired module(s)>`，但这也会构建没有更改的模块，并且构建时间会比我的其他解决方案更长。

我需要的是一种结合每个参数的`-amd`不同*项目*列表的方法。类似的东西。它只会构建依赖于我更改的模块但也在所需打包模块的依赖树中的模块。`-am`*`mvn install -amd <changed module(s)> -am <desired module(s)>`*

# textarea - 动态制作 textarea ckeditor

> ID：16170441
> 
> 赞同：0
> 
> 时间：2013-04-23T13:19:43.417
> 
> 标签：textarea, ckeditor, undefined

当我尝试将这些动态生成的文本区域放入 CEditor 字段时，我收到错误：TypeError: b is undefined

我的代码：

```
 var input = $("<textarea>").addClass("textAreaClassTest");
    //input.setAttribute("id", "como");
    //input.setIdAttribute("id", "como");
    //input.ID = 'como';
    CKEDITOR.replace('como');
    item.append(input);
    //CKEDITOR.replace('como');

    return item; 
```

我似乎无法给 textarea 一个 id - 任何 id 的 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:50:18.227

我假设您使用的是 jQuery，并且一次只能处理 1 个或多个文本区域。因此，您可以获取文本区域并为其分配 id 并按如下方式使用它们。

```
//select all text areas
var input = $("textarea");
var list = new Array();
var count = 0;

input.each(function () {
    count++;
    $this = $(this);
    $this.attr("id", "como" + count);
    console.log('id is "' + $this.attr("id") + '" and text is "' + $this.text() + '"');
    CKEDITOR.replace($this.attr("id"));
    list.push($this.attr("id"));
});
//return the list of replaced text area ids
return list; 
```

# wcf - WCF UriTemplate UrlEncode

> ID：16170442
> 
> 赞同：2
> 
> 时间：2013-04-23T13:19:44.887
> 
> 标签：wcf, rest, urlencode, uritemplate

想象一下，我想使用 WCF 调用外部（意味着我无法控制合同）REST 服务。我有以下合同

```
[ServiceContract]
public interface ISomeRestApi
{
    [OperationContract]
    [WebInvoke(Method = "PUT", UriTemplate = "blablabla/{parameter1}/{parameter2}")]
    void PutSomething(string parameter1, string parameter2);
} 
```

假设我的参数之一是正斜杠 (/)

```
public class Test{

    [Fact]
    public void TestPutSomething()
    {
        ISomeRestApi api = CreateApi();

        //this results in the url: http://server/blablabla///someotherparam
        api.PutSomething("/", "someotherparam");

        //this also results in the url: http://server/blablabla///someotherparam
        api.PutSomething(HttpUtility.UrlEncode("/"), "someotherparam");

        //but i want: http://server/blablabla/%2F/someotherparam
    }
} 
```

如何强制 WCF 对我的 UriTemplate 路径参数进行 UrlEncode？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:21:35.880

经过大量的反复试验，我找到了一个非常丑陋且完全不合逻辑的解决方案来解决我的问题。但是仍然......也许这篇文章可以帮助将来的人。请注意，此“解决方案”在 .NET 4.5 中适用于我。我不保证它会为你工作。

问题归结为：

*   在 .NET 中的 Uri 中放置转义的正斜杠是不可能的（AFAIK）
*   为了与外部服务（RabbitMQ）通信，我真的需要能够在我的请求 URL 中放入 %2f（即正斜杠）

以下帖子让我朝着“正确”的方向前进：[如何停止 System.Uri 取消转义正斜杠字符](http://mikehadlow.blogspot.be/2011/08/how-to-stop-systemuri-un-escaping.html)

我尝试了帖子中提出的解决方案，但是...无济于事

然后经过大量的诅咒，谷歌搜索，逆向工程等等，我想出了以下代码：

```
/// <summary>
/// Client enpoint behavior that enables the use of a escaped forward slash between 2 forward slashes in a url
/// </summary>
public class EncodeForwardSlashBehavior:IEndpointBehavior
{
    public void Validate(ServiceEndpoint endpoint)
    {

    }

    public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
    {

    }

    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
    {

    }

    public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    {
        clientRuntime.ClientMessageInspectors.Add(new ForwardSlashUrlInspector());
    }
}

/// <summary>
/// Inspector that modifies a an Url replacing /// with /%2f/
/// </summary>
public class ForwardSlashUrlInspector:IClientMessageInspector
{
    public object BeforeSendRequest(ref Message request, IClientChannel channel)
    {
        string uriString = request.Headers.To.ToString().Replace("///", "/%2f/");
        request.Headers.To = new Uri(uriString);
        AddAllowAnyOtherHostFlagToHttpUriParser();

        return null;
    }

    /// <summary>
    /// This is one of the weirdest hacks I ever had to do, so no guarantees can be given to this working all possible scenarios
    /// What this does is, it adds the AllowAnyOtherHost flag to the private field m_Flag on the UriParser for the http scheme.
    /// Replacing /// with /%2f/ in the request.Headers.To uri BEFORE calling this method will make sure %2f remains unescaped in your Uri
    /// Why does this work, I don't know!
    /// </summary>
    private void AddAllowAnyOtherHostFlagToHttpUriParser()
    {
        var getSyntaxMethod =
            typeof(UriParser).GetMethod("GetSyntax", BindingFlags.Static | BindingFlags.NonPublic);
        if (getSyntaxMethod == null)
        {
            throw new MissingMethodException("UriParser", "GetSyntax");
        }
        var uriParser = getSyntaxMethod.Invoke(null, new object[] { "http" });

        var flagsField =
            uriParser.GetType().BaseType.GetField("m_Flags", BindingFlags.Instance|BindingFlags.NonPublic);
        if (flagsField == null)
        {
            throw new MissingFieldException("UriParser", "m_Flags");
        }
        int oldValue = (int)flagsField.GetValue(uriParser);
        oldValue += 4096;
        flagsField.SetValue(uriParser, oldValue);
    }

    public void AfterReceiveReply(ref Message reply, object correlationState)
    {

    }
} 
```

所以基本上我正在创建一个自定义 EndpointBehavior，它使用反射将枚举标志添加到 UriParser 内的私有变量。这显然可以防止我的 request.Headers.To uri 中的转义正斜杠被转义。

# javascript - 将javascript注入android WebView

> ID：16170445
> 
> 赞同：1
> 
> 时间：2013-04-23T13:19:47.033
> 
> 标签：javascript, android, webview

晚上好。我想在 WebView 中点击 JS 按钮。此代码适用于 chrome 控制台

```
document.getElementsByTagName('button')[1].click(); 
```

所以，我正在尝试在 android 中做同样的事情

```
WebView webView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_web_view);

    Intent webIntent = getIntent();
    String url = webIntent.getStringExtra("url");

    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setJavaScriptEnabled(true);

    webView.setWebViewClient(new WebViewClient() {

        @Override
        public void onPageFinished(WebView view, String url) {
            webView.loadUrl("javascript:(function() { document.getElementsByTagName('button')[1].click(); })()");
        }

    });

    webView.loadUrl(url);

} 
```

我有一个未知的铬错误：LogCat 中的 -324。有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T18:38:03.887

> 尝试这个：

```
webView.loadUrl("javascript:"+
                    "document.getElementsByTagName('button')[1].click();"); 
```

# primefaces - 在 tabview 内的对话框中，overlaypanel primefaces 无法正常工作

> ID：16170446
> 
> 赞同：0
> 
> 时间：2013-04-23T13:19:49.903
> 
> 标签：primefaces, overlay, panel

`p:tab`我像这样在一个内部使用primefaces的动态overlayPanel `p:dialog`：

```
 <p:dialog id="dialog" modal="true" header="Nouveau Article"
            widgetVar="dlg">

            <h:form prependId="false" enctype="multipart/form-data">

     <p:tabView id="monpanel">  

                    <p:tab id="tab1" title="Informations">
                    ....
                    </p:tab>
                    <p:tab id="tab2" title="Prix">
                    ....
                    </p:tab>
     <p:tab id="tab3" title="Stock et fournisseurs">

                        <h:outputLabel value="" /><h:outputLabel value="" /><h:outputLabel value="" />

                        <p:commandButton id="carBtn" value="Selectionner Fournisseurs" type="button" />

                        <p:overlayPanel  appendToBody="true" my="left top" id="carPanel" for="carBtn" hideEffect="fade"
                            dynamic="true">
                            <p:dataTable id="table" var="car" rowKey="#{car.fournisseurId}" 
                             value="#{articlesMB.listfournisseurs}"  selection="#{articlesMB.selectedFournisseurs}"
                                rows="10" paginator="true" >
                                <p:column  selectionMode="multiple" style="width:20px" />
                                <p:column headerText="Id">
                                    <h:outputText value="#{car.fournisseurId}" />
                                </p:column>

                                <p:column headerText="Nom">
                                    <h:outputText value="#{car.personne.nom}" />
                                </p:column>

                            </p:dataTable>
                        </p:overlayPanel>

                        </p:tab>
                         </p:tabView>
<p:commandButton id="article-ajouter"
                    update=":messages monpanel :articlesdata"
                    action="#{articlesMB.ajouter}" value="add" />
                         </h:form>
                         </p:dialog> 
```

在第一次它工作正常，但是当我点击添加按钮并且验证失败（出于任何原因）并且我点击覆盖面板的动态按钮时，它会出现但是当我选中或取消选中其中一行数据表时它消失了，我不知道原因

你知道如何解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:47:28.050

您的 cammandButton 应该使用 'process' 属性，您指定要提交信息的组件（不指定覆盖）。

例如：

```
<p:inputText id="txttest" required="true" value="" />
<p:commandButton process="txttest" id="article-ajouter"
                    update=":messages monpanel :articlesdata"
                    action="#{articlesMB.ajouter}" value="add" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-20T13:26:25.500

您的覆盖面板只能工作一次的原因是因为您更新了包含`overlayPanel`附加到的命令按钮的面板。这是 PF 5 之后出现的一个错误`overlayPanel`。您可以在不诉诸进程属性的情况下修复此问题，我认为这样的解决方案会降低代码的可读性。

如果您在命令按钮的情况下定义一个`widgetVar`to `overlayPanel`，say`'carPanelWDG'`和 call`PF('carPanelWDG').loadContents()`函数，一切都会正常工作。`onComplete`即使没有评论解释你这样做的原因，任何人都可以轻松解释这一点。

# java - 基本 Java 条纹示例 Hello World

> ID：16170448
> 
> 赞同：0
> 
> 时间：2013-04-23T13:19:58.130
> 
> 标签：java, jsp, web, frameworks, stripes

所以我正在尝试使用 Java 的 Stripes 框架来运行一个 hello world 应用程序。在此处使用维基百科上的示例： [http ://en.wikipedia.org/wiki/Stripes_%28framework%29#Example](http://en.wikipedia.org/wiki/Stripes_%28framework%29#Example)

因此，使用我的 tomcat 服务器中的 jsp 文件和 java 文件，我尝试运行 jsp 文件，它只提供：

你好

再试一次

这是 jsp 文件中的内容，但似乎没有使用 java 文件。

还有其他我应该拥有的东西还是我试图以错误的方式访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:43:32.833

查看 Stripes UrlBinding 的官方网页

[http://stripes.sourceforge.net/docs/current/javadoc/net/sourceforge/stripes/action/UrlBinding.html](http://stripes.sourceforge.net/docs/current/javadoc/net/sourceforge/stripes/action/UrlBinding.html)

我可以看到代码应该可以正常工作，但正如 Dave 所问，你在调用什么 Url？

```
http://localhost:8080/hello-/Paul.html 
```

应该可以工作，但您也可以简单地使用 UrlBinding - 根据提供的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:33:29.767

不确定，但我知道你的二传手

```
public void setContext(ActionBeanContext context) {
    this.context = context;
} 
```

应该**在**你的吸气剂之前，

```
public ActionBeanContext getContext() {
    return context;
} 
```

不是之后。

# android - W/IInputConnectionWrapper(1066)：非活动 InputConnection 上的 showStatusIcon

> ID：16170449
> 
> 赞同：42
> 
> 时间：2013-04-23T13:20:03.847
> 
> 标签：android

这是我的课：

```
public class Insert extends Activity 
{

    EditText name,surname,age;
    Button insert;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
     {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.insert);
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy);
        name =(EditText)findViewById(R.id.name);
        surname =(EditText)findViewById(R.id.surname);
        age =(EditText)findViewById(R.id.age);
        insert=(Button)findViewById(R.id.click);
        insert.setOnClickListener(new OnClickListener()
        {
              public void onClick(View arg0)
            {
                // TODO Auto-generated method stub
                String nm = name.getText().toString();
                String ct = surname.getText().toString();
                String emailid = age.getText().toString();
                 insertRecords(nm, ct, emailid);
              }
            private void insertRecords(String nm,String ct,String emailid)
            {
                 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
                    nameValuePairs.add(new BasicNameValuePair("name", nm));
                    nameValuePairs.add(new BasicNameValuePair("surname",ct));
                    nameValuePairs.add(new BasicNameValuePair("age",emailid));
                    sendData(nameValuePairs);
            }
            private void sendData(ArrayList<NameValuePair> data)
            {
                try 
                {
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost("http://10.0.2.2:81/new/insert.php");
                    httppost.setEntity(new UrlEncodedFormEntity(data));
                    HttpResponse response = httpclient.execute(httppost);

                }
                catch (Exception e) {
                    // TODO: handle exception
                    Log.e("log_tag", "Error:  "+e.toString());
                }
            }
        });
    }
    ...
} 
```

在 LogCat 中

```
04-23 12:12:10.263: W/IInputConnectionWrapper(1066): showStatusIcon on inactive InputConnection 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-11T14:11:38.537

当上一页（或类）中的输入连接尚未关闭时，就会出现此类问题。检查你是否关闭了上一个类中的输入连接（通过提供 connection.close()）。

当您离开活动并保持 HTTP 连接打开时，就会出现此问题。为防止这种情况，您可以尝试致电

```
httpClient.getConnectionManager().closeIdleConnections(); 
```

[您可以在此处](https://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/HttpConnectionManager.html#closeIdleConnections(long))阅读此方法的文档。

# .htaccess - 将子域重定向到动态生成的文件夹并屏蔽 URL

> ID：16170456
> 
> 赞同：1
> 
> 时间：2013-04-23T13:20:27.357
> 
> 标签：.htaccess, mod-rewrite, redirect, mask, subdomain

我目前有一个博客设置作为主站点的子文件夹`mydomain.com.au/blog/`，但是它`/blog`是通过 PHP 动态生成的，实际上并不存在。

我创建了一个子域`blog.mydomain.com.au`，我试图让它显示所有内容，`mydomain.com.au/blog/`但屏蔽 url 以便它显示`blog.mydomain.com.au`。

我已经使用 htaccess 进行了几次尝试并接近了几次，但总是有问题。以下是使我最接近预期结果的 2 次尝试：

**第一次尝试**

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^blog\.mydomain\.com\.au$
RewriteRule ^.*$ http://www.mydomain.com.au/blog%{REQUEST_URI} [R=301,L]
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

这将`blog.mydomain.com.au`重定向到`www.mydomain.com.au/blog/`，但不会屏蔽 URL（地址栏将显示`www.mydomain.com.au/blog/`）。

**第二次尝试**

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.com\.au$ [NC]
RewriteRule blog/(.*) http://blog.mydomain.com.au/$1 [R=301,L]
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

这让我最接近。它以我希望它为所有页面的方式重定向和屏蔽 URL `/blog/`（例如**blog.mydomain.com.au/whatever/**重定向到**www.mydomain.com.au/blog/whatever/**但将 URL 屏蔽为**博客。 mydomain.com.au/whatever/**），但它不这样做`blog.mydomain.com.au`，它被重定向到`www.mydomain.com.au`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:47:49.897

您在这里有两个不同的要求。第一个是重写，如果请求是`blog.mydomain.com.au`并且您删除了域部分和[`R`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)规则替换中的标志，它将起作用

```
RewriteCond %{HTTP_HOST} ^blog\.mydomain\.com\.au$ [NC]
RewriteRule !^blog/ /blog%{REQUEST_URI} [L] 
```

第二个是实际的*重定向*，如果请求是`www.mydomain.com.au/blog/`

```
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.com\.au$ [NC]
RewriteRule blog/(.*) http://blog.mydomain.com.au/$1 [R,L] 
```

当一切按预期工作时，您可以更改`R`为`R=301`.

*永远不要*在启用的情况下进行测试，有关详细信息`301`，请参阅此答案 [提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542) 。

# ios - 什么更有效，覆盖 drawRect 或使用 viewWillAppear

> ID：16170458
> 
> 赞同：0
> 
> 时间：2013-04-23T13:20:29.410
> 
> 标签：ios, objective-c, cocoa-touch, uitextview

我有几个`UITextView`s中的几个`ViewController`s。过去，当我有几个需要为 a`TextView`或`Label`等自定义绘图的实例时，我只会在`viewWillAppear`拥有 UI 对象的 VC 中调整绘图。这一次，我将需要几个实例来定制。

`UITextView`仅创建一个子类并包含绘图代码`drawRect`与将相同的绘图代码分布在多个 VC中会更合适吗？我主要担心性能。不过，代码可维护性是次要问题。

需要明确的是，这就是我将在 drawRect 中使用的：

```
- (void)drawRect:(CGRect)rect {
    self.layer.cornerRadius = 10;
    self.clipsToBounds = YES;
} 
```

因此，经过进一步测试，`initWithFrame`不会被调用，而是会调用`initWithCoder`。我还发现`initWithCoder`被称为一次，所以是`drawRect`。在我的用例中（`StaticCellTableView`在`UITextView`一个单元格中，有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:24:19.583

您可以在子类 UITextView 的 init 或 initWithCoder（如果它是 xib 或情节提要）方法中包含这两行。基本上，这只是对象的属性 - 每次 UIView 需要刷新时都不需要运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:25:16.890

创建一个 ViewController 基类，然后将其用作所有其他 VC 的超类。然后，您可以将这个和其他方便的方法添加到它并分享财富。

在这种特殊情况下，将它放在 viewDidLoad 的末尾将是一个好地方，因为它只发送一次消息，而 viewWillAppear 可能会被多次调用。如果您使用 viewdidLoad 代码将被执行一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:28:25.680

我不会将这些行放在视图的 drawRect 中，因为每次刷新都会调用它。我建议您将 UITextView 子类化并将这些行添加到自定义 init 方法中。

# java - 通过 Google Contacts API 3.0 版将 vCard 或 CSV 导入 Google 联系人

> ID：16170461
> 
> 赞同：0
> 
> 时间：2013-04-23T13:20:32.840
> 
> 标签：java, gdata-api, google-contacts-api

有没有办法将 vcard 或 csv 文件导入 Google 通讯录？

好吧，使用 Java Api ( [https://developers.google.com/google-apps/contacts/v3/](https://developers.google.com/google-apps/contacts/v3/) ) 我可以添加单个联系人，但是整个文件？

Google 通讯录的 GUI 支持此类导入功能。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T13:09:02.437

我猜他们不允许这样做，因为他们有付费服务来同步 Outlook 和谷歌之间的联系人。如果您可以使用 API 导入和导出电子名片，那么程序员就可以轻松编写此同步程序。

我也在寻找解决方案，因为这正是我想要做的，但我不想为同步联系人付费。

# java - some questions/mystery about browser session and session Id?

> ID：16170470
> 
> 赞同：3
> 
> 时间：2013-04-23T13:21:03.450
> 
> 标签：java, session, session-cookies, session-management

As per my understanding same session is shared among different tabs of same browser window. And for different browser window , different session is created. Now some questions on my understanding:-

1)When i hit my web application in two different browser window, i see same jsession id on firefox console. How same session session is shared among two different browser window. As by default session is maintained through cookies with the help of jsessionId which is created by webserver. Other way of maintaining the session thru URLRewriting where we maintain session by passing jsessionId in each url request. I can see using org.tuckey.web.filters.urlrewrite.UrlRewriteFilter in project but this class document does not seem to do any magic much session maintenance. I am not getting how come same session is attached with two different browser window and techinical approach to do it

2)similary when i hit two different application under two different tabs of same browser window probably google and some other website say yahoo, i dont see same jsessionId in firefox console for these two website. Is the website doing some special stuff here to generate new session for each Tab? In fact for some website(probably for google) i do not see jsessionId at all under firefox window. How its possible. My understanding it is generated automatically by webserver and is passed either by cookies or URLReWriting?

It would be helpful if somebody can answer inline to my question as its important to understand each point posted here for session management

**UPDATE:-** Let me put my questions with different scenarios:-

1)Hit two different URL(say google.com and stackoverflow.com) in two different tab of same browser window.

> My Understanding:- Two session will be created as two cookies will be created for two different domain/port

2)Hit two same URL(say stackoverflow.com) in two different tab of same browser window.

> My Understanding:- Onesession will be created as same cookies will be reused

3)Hit two same URL(say stackoverflow.com) in two totally different window of browser (firefox).

> My Understanding:- how many session will be created in this case?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T15:15:39.493

Your first assumption is not correct. If you use session management with cookies (default for Java servlet containers) then your session is visible in all windows of the same browser instance.

If you configure your Java servlet server to use URL rewrite only for sessions, then you can have one session per tab.

Usually two different Java web applications will always create two different session cookies only valid for its own application scope. The cookies are bound to the domain and path.

Other web frameworks like PHP can handle this totally different.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T15:28:39.947

The cookie jsession_id is created by the server, which sends it to the browser in return for a request through a HTTP header Set-Cookie . The cookie is stored on the client by the browser. Henceforth, the browser will resend that cookie for every subsequent request on the same domain (the cookie can be restrained with secure and path [https://en.wikipedia.org/wiki/HTTP_cookie#Terminology](https://en.wikipedia.org/wiki/HTTP_cookie#Terminology) but it is irrelevant here).

The browser has access to that cookie from all tabs (basic rights and security) and it is a design choice if it separates sessions (same cookies on all tabs) or merges them (same cookies on all tabs, therefore same session on all tabs within the same domain). As far as I know, all browsers choose to share cookies on tabs but I am no expert.

So in order to maintain session on multiple instances of the same java program, you need to do the same and store your jsession_id cookie (and reuse it if relevant) outside of the memory of each instance (for example on file). This might not be trivial if security is important.

As to point 2, it is important to understand that even though both cookies are jsession_id, they are related to different domains (and have been set by each server) so there is no reason for them to be equal.

# matlab - 将 Matlab GUI 转换为指南 GUI

> ID：16170475
> 
> 赞同：4
> 
> 时间：2013-04-23T13:21:17.747
> 
> 标签：matlab, user-interface, matlab-guide

我继承了一堆 Matlab 脚本，这些脚本使用对 uicontrol、uimenu 等的调用手动构建 GUI。多年来，我们需要向 GUI 中删除和添加元素，并且由于所有位置都是在脚本中手动指定的，因此布局并没有真正改变以容纳缺失的元素，所以它真的开始看起来像一堆垃圾。

有没有办法自动将我的 matlab 脚本 gui 转换为我可以与指南一起使用的东西？我宁愿不必重新开始...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T13:31:18.323

使用 GUIDE 生成的 GUI 并不比手动编写的 GUI 好多少（我认为在可维护性方面不差的话）。

可悲的事实是 MATLAB 中没有内置的布局管理器（FEX 上有用户贡献的布局管理器，如[边框布局](http://www.mathworks.com/matlabcentral/fileexchange/18577)、[网格包布局](http://www.mathworks.com/matlabcentral/fileexchange/22968)等）。如果您正在重构代码，请考虑使用某种 GUI 布局管理器。

要回答您的问题，afaik 没有用于此类转换的自动工具。

* * *

确切地说，MATLAB 有一些*未记录*的布局管理器：`uiflowcontainer`和`uigridcontainer`. 请参阅Yair Altman 的这篇[文章](http://undocumentedmatlab.com/blog/matlab-layout-managers-uicontainer-and-relatives/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T14:47:00.513

好吧，没有自动转换实用程序，但您不需要使用 GUIDE 从头开始​​创建所有内容。

执行您的 GUI 以显示图形窗口并将其保存为 fig 文件。然后可以使用指南编辑此文件。但是，这需要在您的代码中进行手动调整。特别是如果您需要访问句柄并且我也不确定回调函数。

然而，正如 Amro 已经指出的那样，GUIDE 并不是一个完美的解决方案。

# python - 尝试在类中创建一个方法来计算python中人员列表的平均年龄

> ID：16170476
> 
> 赞同：0
> 
> 时间：2013-04-23T13:21:17.667
> 
> 标签：python, class, methods, mean

我正在尝试在类中创建一个方法来计算 python 中列表的平均年龄。基本上，假设我有一个名为 peoplelist 的不同人员列表，peoplelist 中的每个人都有一个格式（身高，年龄，性别），例如 person1 = 1.77, 27, m。我需要获取列表中每个人年龄的总和，然后将其除以列表的长度并返回结果。到目前为止，我有：

```
def __len__(self):
    return len(self.peoplelist)

def __age__(self):
    agesum = 0
    for value in self.peoplelist:
        agesum = agesum + value.age
        print(agesum)
    return agesum/len(self.peoplelist) 
```

然而，这似乎不起作用，任何帮助或解释为什么这不起作用将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:35:41.083

如果您的 self.peoplelist 如下所示：

```
[(1.77, 27, 'm'), ...] 
```

然后以下应该工作：

```
def __len__(self):
    return len(self.peoplelist)

def __age__(self):
    agesum = 0
    for value in self.peoplelist:
        agesum = agesum + value[1]
        print(agesum)
    return agesum/len(self.peoplelist) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:29:50.343

假设`value.age`返回正确的值，以下应该工作......

```
def __age__(self):
    agesum = 0
    for value in self.peoplelist:
        agesum = agesum + value.age
    return agesum / len(self.peoplelist) 
```

如果没有，您必须在原始问题中包含有关如何调用该函数的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:33:22.223

您可以使用以下`sum()`功能：

```
def age(self):
    return sum(p.age for p in self.peoplelist) / float(len(self.peoplelist)) 
```

注意`float()`; 在 Python 2 中，整数除法默认为您提供*地板*除法（向下舍入）。或者，`from __future__ import division`在 python 代码的顶部添加以启用浮点除法。

请注意，我将方法命名为`.age()`；仅对[特殊方法名称](http://docs.python.org/2/reference/datamodel.html#specialnames)使用双下划线名称（“dunder”） 。

# c# - 检测何时跳出循环

> ID：16170480
> 
> 赞同：4
> 
> 时间：2013-04-23T13:21:36.467
> 
> 标签：c#, .net

任何人都可以帮忙，因为我在这里遇到了一堵墙，我如何检测我何时因无效值而跳出循环。

例如，如果有人为孩子输入年龄 3 5 6 7 9 就可以了，如果输入 o 3 5 6 7 这将在我的代码中返回 -1 并退出循环。

我如何检测到并返回消息

```
public static int IntIsValid(string p)
        {
            int pn;
            bool isNum = int.TryParse(p, out pn);
            int pnIsvalid = isNum ? pn : -1;
            return pnIsvalid;
        }

string addDash  = Regex.Replace(agesOfChildren, " ", "_");
            string[] splitNumberOfChildren  = addDash.Split('_');
            string splitChildrensAge        = string.Empty;
            int checkAgeOfChildren          = 0;
            string problem = string.Empty;
            foreach (var splitAgeOfChild in splitNumberOfChildren)
            {
                splitChildrensAge           = splitAgeOfChild;
                checkAgeOfChildren          = RemoveInvalidInput.IntIsValid(splitChildrensAge);
                if (checkAgeOfChildren == -1)
                {
                    problem = "problem with age, stop checking";
                    break;
                }
            } 
```

所以我想做一些像

```
if(error with loop == true)
{
ViewBag.Message = problem;
} 
```

希望有人可以提供帮助，因为我已经空白了

乔治

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T13:23:53.397

很简单，你已经自己给出了答案：

```
boolean error_with_loop = false;
foreach (var splitAgeOfChild in splitNumberOfChildren) {
      splitChildrensAge           = splitAgeOfChild;
      checkAgeOfChildren          = RemoveInvalidInput.IntIsValid(splitChildrensAge);
      if (checkAgeOfChildren == -1)
      {
           error_with_loop = true;
           problem = "problem with age, stop checking";
           break;
      }
}

if (error_with_loop) {
    ViewBag.Message = problem;
} 
```

或者你抛出一个`Exception`：

```
try {
    foreach (var splitAgeOfChild in splitNumberOfChildren) {
          splitChildrensAge           = splitAgeOfChild;
          checkAgeOfChildren          = RemoveInvalidInput.IntIsValid(splitChildrensAge);
          if (checkAgeOfChildren == -1)
          {
                // note: no need to break
                throw new ErrorWithLoopException();
          }
    }
} catch (ErrorWithLoopException e) {
    ViewBag.Message = problem;
} 
```

事实上，您似乎使用了某种整数验证。该`Int32`课程涵盖了例外情况：http: [//msdn.microsoft.com/en-us/library/system.int32.parse%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.int32.parse%28v=vs.71%29.aspx)您的代码实际上会更短（不知道如果适用，因为我不知道您的验证代码有什么额外功能）：

```
try {
    foreach (var splitAgeOfChild in splitNumberOfChildren) {
          splitChildrensAge           = splitAgeOfChild;
          checkAgeOfChildren          = Int32.Parse(splitChildrensAge);
    }
} catch (FormatException e) {
    ViewBag.Message = problem;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:24:02.593

您可以抛出异常（取决于您的程序设计），也可以设置一个标志。

```
bool success = true;

foreach (var splitAgeOfChild in splitNumberOfChildren)
{
      splitChildrensAge = splitAgeOfChild;
      checkAgeOfChildren = RemoveInvalidInput.IntIsValid(splitChildrensAge);
      if (checkAgeOfChildren == -1)
      {
           problem = "problem with age, stop checking";
           success = false; // change the flag
           break;
      }
} 
```

或者使用异常（我在这里使用了[ArgumentOutOfRangeException](http://msdn.microsoft.com/en-gb/library/system.argumentoutofrangeexception.aspx)但您可以创建自己的）：

```
foreach (var splitAgeOfChild in splitNumberOfChildren)
{
      splitChildrensAge = splitAgeOfChild;
      checkAgeOfChildren = RemoveInvalidInput.IntIsValid(splitChildrensAge);
      if (checkAgeOfChildren == -1)
      {
           problem = "problem with age, stop checking";
           throw new ArgumentOutOfRangeException("Age", problem);
      }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T13:25:07.817

你为什么不检查`string.Empty`最后？仅当您有错误时才会设置它：

```
if (!string.IsNullOrEmpty(problem))
{
     ViewBag.Message = problem;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T13:25:10.693

只需这样做：

```
if (checkAgeOfChildren == -1)
{
  problem = "problem with age, stop checking";
  break;
}

if (!string.IsNullOrEmpty(problem)) {
   ViewBag.Message = problem;
} 
```

你也可以抛出异常：

```
try { 
   if (checkAgeOfChildren == -1)
   {
      throw new ArgumentException("Invalid Argument");
   }  catch (ArgumentException e) 
   {
       ViewBag.Message = e.Message;
   }
} 
```

`ArgumentException`可以替换为更合适或自定义的异常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T13:28:58.343

为什么不在循环内这样：

```
 if (checkAgeOfChildren == -1)
                {
                    ViewBag.Message  = "problem with age, stop checking";
                    break;
                } 
```

# java - IDL corba 中的数组和对象错误

> ID：16170484
> 
> 赞同：0
> 
> 时间：2013-04-23T13:21:47.907
> 
> 标签：java, arrays, object, corba, idl

我在 IDL corba 中遇到了数组和对象的问题这是我的代码：

```
 interface ISinhVien
{
    SinhVien[] DocFile(in String filename);
    void GhiFile(in SinhVien[] sv,in String filename);
}; 
```

编译时出错：

```
CORBA_SinhVien>idlj -fall SinhVienIDL.idl
SinhVienIDL.idl (line 3):  SinhVien is an undeclared type.
        SinhVien[] DocFile(in String filename);
         ^
SinhVienIDL.idl (line 3):  Expected `<identifier>'; encountered `['.
        SinhVien[] DocFile(in String filename);
         ^
SinhVienIDL.idl (line 3):  WARNING: Identifier `String' collides with a keyword;
 use an escaped identifier to ensure future compatibility.
        SinhVien[] DocFile(in String filename);
                       ^
SinhVienIDL.idl (line 4):  SinhVien is an undeclared type.
        void GhiFile(in SinhVien[] sv,in String filename);
                         ^
SinhVienIDL.idl (line 4):  Expected `<identifier>'; encountered `['.
        void GhiFile(in SinhVien[] sv,in String filename);
                         ^
SinhVienIDL.idl (line 4):  WARNING: Identifier `String' collides with a keyword;
 use an escaped identifier to ensure future compatibility.
        void GhiFile(in SinhVien[] sv,in String filename); 
```

有人帮帮我，拜托！！！！！！！！！！！！！！！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:17:58.907

[CORBA 语言规范](https://www.google.ie/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CDsQFjAC&url=http://www.omg.org/cgi-bin/doc?formal/08-01-04.pdf&ei=UZZ2UbnJGIHRhAfYp4DoBA&usg=AFQjCNFtXyZcuskjs3-SW4TnKWeZjizzDA&sig2=uQZIi7ebDxFRVSpfmmUL6A&bvm=bv.45512109,d.ZG4)不允许返回任何类型的数组，除非它们首先是*typedefed*。

此处有 2 个选项可用 - 固定数组或`sequences`- 后者更灵活，允许由实现代码设置数组大小。

```
interface SinhVien {
  boolean someOperation(in long id);
  // more operations
};

typedef sequence<SinhVien> sinhviens;

interface ISinhVien
{
    sinhviens docFile(in string filename);
    void ghiFile(in sinhviens sv, in string filename);
}; 
```

旁白：注意不要将 Java 语法与 IDL 语法混用：`string`全部*小写*。

# objective-c - AFNetworking 简单的 HTTP 请求

> ID：16170487
> 
> 赞同：2
> 
> 时间：2013-04-23T13:21:58.653
> 
> 标签：objective-c, xcode, afnetworking

我在我的项目中使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)，我只需要检查一个 URL 是否成功（状态 2xx）。

我试过了

```
NSURLRequest *request = [NSURLRequest requestWithURL:url2check];
AFJSONRequestOperation *operation = [AFJSONRequestOperation
    JSONRequestOperationWithRequest:request
    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        if (response.status == 200) {
            NSLog(@"Ok %@", JSON);
        }
    }
    failure:nil
];
[operation start]; 
```

但由于我不是特别在等待 JSON，我期待使用类似的东西

```
AFHTTPRequestOperation *operation = [AFHTTPRequestOperation
    HTTPRequestOperationWithRequest: success: failure:]; 
```

但这不存在（我不知道为什么），所以我使用了

```
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]
    initWithRequest:request];
[operation setCompletionBlockWithSuccess:...] 
```

没有更简单的吗？

您将如何使用 AFNetworking 进行这个简单的 URL 检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:16:46.217

这是我最终得到的

```
NSURLRequest *request = [NSURLRequest requestWithURL:url2check];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]
                                     initWithRequest:request];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation
                                           , id responseObject) {
        // code
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        // code
    }
];
[operation start]; 
```

随意添加一个更简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:17:58.047

您只需使用基本 URL 实例化一个 AFHTTPClient 对象并调用`getPath:parameters:success:failure:`它。

[来自文档：](http://engineering.gowalla.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/getPath%3aparameters%3asuccess%3afailure%3a)

> 使用 GET 请求创建 AFHTTPRequestOperation，并将其排入 HTTP 客户端的操作队列。

# winforms - 我有一个鼠标单击事件处理程序，它在我第一次选择时起作用但是..？

> ID：16170489
> 
> 赞同：1
> 
> 时间：2013-04-23T13:22:08.407
> 
> 标签：winforms, ms-access, vba

我有一个`DataGridView`与我的 Access 数据库连接的 C# 语言。我看到了我所有的书`DataGridView`。我创建了一个鼠标单击事件处理程序来选择一行，然后我可以保存该行，如下所示：

```
private void Mouse_Click(object sender, MouseEventArgs e)
{
    try
    {
        temp = dataGridView1.SelectedRows[0].Index.ToSt… 

        //This one is selecting the row. To do that select panel>event> on MouseClick write name and double click:

        MessageBox.Show("You have selected the row " + temp);
    }
    catch
    {
    }
} 
```

当我打开表单时它可以工作。但是，在将所选行保存到另一个数据库后，鼠标单击事件处理程序停止工作。换句话说，在保存第一个选定行后，当我回来选择另一行并保存到数据库时，鼠标单击事件处理程序不起作用。消息说行超出范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:57:03.583

您没有提供与连接类型、事件处理程序以及更重要的是保存/更新记录的方式相关的太多信息，所以我只是在这里猜测：您不是不小心覆盖了网格的 DataSource 吗？对于这种行为，这是我唯一能想象的（“行超出范围”——这也假设事件仍然按预期工作，但函数中的代码再也看不到数据了）。

# java - java IO流中的几个文件

> ID：16170490
> 
> 赞同：0
> 
> 时间：2013-04-23T13:22:09.220
> 
> 标签：java, io

服务器通过单个输出流发送多个文件，当客户端收到 byte[] 时，它如何提取文件？字节中是否有任何标记？例如，EOF？'\r\n'，否则？看来java基本IO，连NIO都做不到。我认为通过单个 IO 通道发送多个文件，我们应该插入一些特殊字符来划分字节。供参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T19:42:56.630

如果您将流包装在多部分或 zip（不压缩是一个选项）流中，您将看到一个低级函数，您不必重新实现标记。

# struts - Apache NetUI 和 Struts 有什么区别？

> ID：16170493
> 
> 赞同：0
> 
> 时间：2013-04-23T13:22:14.310
> 
> 标签：struts, netui

JPF (Apache netUI) 和 Struts 有什么区别？什么时候应该在 Web 应用程序中使用 JPF？JPF 的优缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-15T14:31:28.130

**Apache Struts**是一个开源框架，为 网页的[模型-视图-控制器实现提供支持。](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)它的目标是将项目的这三个部分分开：**模型** *（与数据库交互的应用程序逻辑）*与**视图** *（呈现给客户端的 HTML 页面）*和**控制器** *（在视图和模型之间传递信息的实例）*。它有一个标签库，可以简化带有服务器页面的基于表单的应用程序的生产。

**NetUI**也是一个 MVC 框架，它是[Beehive 项目](http://beehive.apache.org/)的一部分，旨在通过使用[JSR-175](http://jcp.org/en/jsr/detail?id=175) [java 注释](http://en.wikipedia.org/wiki/Java_annotation)来减少 J2EE 项目的必要代码。 **NetUI 是在 Struts 之上构建的**，它提供了一个*页面流控制器*类[，将导航控制与 web 项目的呈现分开](http://beehive.apache.org/docs/1.0/netui/overview.html) ，保持干净的 JSP 代码并启用导航/流逻辑的重用（此外，它提供了一组 JSP 标记用于呈现 HTML/XHTML）。

* * *

现在，关于您关于何时使用 JPF 的其他问题：页面流控制 Web 应用程序的所有主要功能：用户如何在页面之间导航、用户请求以及对 Web 应用程序后端资源的访问。当您的应用程序需要这种控制时，您应该使用它们。

例如，对于普通的 HTML 页面，每个页面都直接链接到其他页面。

```
page > page > page > page 
```

使用页面流时，页面和操作是透明地交织在一起的。

```
page > action > page > action > page > action > page 
```

这是一张图片来说明这种情况。方块是静态页面，而`.jsp`其他的是 JPF 控制器。

![JPF 控制器使用示例](https://i.stack.imgur.com/Mm45H.png)

[您可以在apache beehive 文档](http://beehive.apache.org/)中阅读有关所有这些的更多信息，我在其中获得了大部分这些信息。

# c# - 使用 WKHTMLTOPDF 以 HTML 格式而不是 PDF 格式显示图像

> ID：16170499
> 
> 赞同：5
> 
> 时间：2013-04-23T13:22:22.967
> 
> 标签：c#, asp.net, c#-4.0, wkhtmltopdf

您好我正在使用 Wkhtmltopdf 使用 c#、Asp.net 从 Html 页面创建 PDF。PDF 可以顺利创建，但是当我将图像添加到 HTML 时，它不会显示在 PDF 上。

```
 public static string HtmlToPdf(string pdfOutputLocation, string outputFilenamePrefix, string[] urls,
        string[] options = null,
        // string pdfHtmlToPdfExePath = "C:\\Program Files (x86)\\wkhtmltopdf\\wkhtmltopdf.exe")

       string pdfHtmlToPdfExePath = "C:\\Program Files\\wkhtmltopdf\\wkhtmltopdf.exe")
    {
        string urlsSeparatedBySpaces = string.Empty;
        try
        {
            //Determine inputs
            if ((urls == null) || (urls.Length == 0))
                throw new Exception("No input URLs provided for HtmlToPdf");
            else
                urlsSeparatedBySpaces = String.Join(" ", urls); //Concatenate URLs

            string outputFolder = pdfOutputLocation;
            string outputFilename = outputFilenamePrefix + "_" + DateTime.Now.ToString("yyyy-MM-dd-hh-mm-ss-fff") + ".PDF"; // assemble destination PDF file name

            var p = new System.Diagnostics.Process()
            {
                StartInfo =
                {
                    FileName = pdfHtmlToPdfExePath,
                    Arguments = ((options == null) ? "" : String.Join(" ", options)) + " " + urlsSeparatedBySpaces + " " + outputFilename,
                    UseShellExecute = false, // needs to be false in order to redirect output
                    RedirectStandardOutput = true,
                    RedirectStandardError = true,
                    RedirectStandardInput = true, // redirect all 3, as it should be all 3 or none
                    WorkingDirectory = HttpContext.Current.Server.MapPath(outputFolder),
                    CreateNoWindow = true
                }
            };

            p.Start();

            // read the output here...
            var output = p.StandardOutput.ReadToEnd();
            var errorOutput = p.StandardError.ReadToEnd();

            // ...then wait n milliseconds for exit (as after exit, it can't read the output)
            p.WaitForExit(60000);

            // read the exit code, close process
            int returnCode = p.ExitCode;
            p.Close();

            // if 0 or 2, it worked so return path of pdf
            if ((returnCode == 0) || (returnCode == 2))
                return outputFolder + outputFilename;
            else
                throw new Exception(errorOutput);
        }
        catch (Exception exc)
        {
            throw new Exception("Problem generating PDF from HTML, URLs: " + urlsSeparatedBySpaces + ", outputFilename: " + outputFilenamePrefix, exc);
        }
    } 
```

这是我显示图像的 HTML 代码区域。

```
<div id="Image" class="right" style="background:#333;height:15%;width:25%;">

  <img id="LogoImage" runat="server" width="100%" height="100%" src="../TempLogo/chafa.jpg" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:50:13.763

尝试为图像 src 添加完整路径。这通常是由于“../TempLogo/chafa.jpg”实际上不是 wkhtmltopdf 工作目录的正确相对 URL。

因此，不要尝试“../TempLogo/chafa.jpg”，而是尝试“C:/yourpath/TempLogo/chafa.jpg”或“file:///C:/yourpath/TempLogo/chafa.jpg”，看看是否有帮助. 如果是这样，那么您的相对路径就是问题所在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-19T13:07:33.840

我遇到了这个问题，对我来说，“修复”是删除高度属性。

代替

`<img id="Logo" runat="server" width="100%" height="100%" src="../TempLogo/chafa.jpg" />`

尝试

`<img id="Logo" runat="server" width="100%" src="../TempLogo/chafa.jpg" />`

我没有对此行为的解释，这可能是一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-04T05:35:11.890

将 pdfkit 与 ruby​​ 一起使用，我发现如果我将带有 STDIN 上的图像的 html 文件发送到 wkhtmltopdf，则图像不会呈现。（即 wkhtmltopdf - toto.pdf ：没有图像）

如果我通过手动传递一个 html 文件 (wkhtmltopdf toto.html toto.html) 执行完全相同的命令，这将有效。

不知道为什么，但是，我只是写了一个小包装器来这样称呼它，就是这样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-27T04:48:58.480

我使用视图来存储我想要的每个 pdf 模板的 HTML 标记，我将模型传递给视图。使用 Server.MapPath() 将为您提供图像的完整路径。

```
<img src="@Server.MapPath("~/path/to/your/image.jpg")" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-08T10:21:17.960

我最近看到一个 jpeg 文件转换失败 - 问题是图像是灰度图像。

请注意，所有灰度图像不一定都是灰度图像 - 如果是这种情况，请使用 irfanview 之类的程序进行检查。

# html - 使用 css 定位 HTML textarea

> ID：16170504
> 
> 赞同：1
> 
> 时间：2013-04-23T13:22:31.827
> 
> 标签：html, css, textarea

我目前正在尝试使用 CSS 定位 textarea 并使其看起来不错。但是它不起作用。

相关CSS：

```
#BoardInput {
padding:0px;
width:100%;
height:100%;
}
#BoardSmiley {
min-width:100px;
width:20%;
padding:10px;
border-right:thin solid #4E6011;
border-bottom:thin solid #4E6011;
background-color:#C6E466;
}
#BoardCode {
 border:thin solid #4E6011;
background-color:#C6E466;
padding:3px;
} 
```

相关HTML：

```
<div id="BoardCode">
    <button onclick="addBBCode('[FETT]','[/FETT]');">Fett</button>
    <button onclick="addBBCode('[KURSIV]','[/KURSIV]');">Kursiv</button>
    <button onclick="addBBCode('[UNTERSTRICHEN]','[/UNTERSTRICHEN]');">Unterstrichen</button>
    <button onclick="addLink();">Link</button>
    <button onclick="addImage();">Bild</button>
</div>
<form action="index.php?s=board&action=addedit&where=<?=$Result['Overview']['PostID']?>" method="POST">
<table id="Board">
    <tr>
        <td>
              <textarea id="BoardInput" name="Text"></textarea>
            <input type="hidden" name="ThreadID" value="<?=$Result['Overview']['ThreadID']?>" />
        </td>
        <td id="BoardSmiley">
        <?php
        $BoardTemplate->showSmileys();
        ?>
        </td>
    </tr>
    <tr colspan="2">
         <td><input type="submit" value="OK" />
    </tr>
</table>
</form> 
```

问题是我想要顶部的“代码”框，右侧的笑脸框和左侧的文本区域。我希望他们能完全适应彼此。然而，textarea 比上面的代码框更靠近右侧 1px，比右侧的笑脸框更靠近顶部 2px。

我在这里做错了什么？

编辑：

jsFiddle：[jsfiddle.net/SSxSN](http://jsfiddle.net/SSxSN)和图像：

![在此处输入图像描述](https://i.stack.imgur.com/CqOEh.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-24T06:36:17.113

利用：

```
resize:none; 
```

在 textarea 中的 CSS 代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:38:42.097

为左侧和底部添加负边距，如下所示：

```
#BoardInput {
    padding:0px;
    width:100%;
    height:100%;
    margin: 0 0 -8px -1px;
} 
```

[http://jsfiddle.net/SSxSN/1/](http://jsfiddle.net/SSxSN/1/)

# javascript - onKeyDown 处理函数只工作一次

> ID：16170505
> 
> 赞同：-9
> 
> 时间：2013-04-23T13:22:32.553
> 
> 标签：javascript, html5-canvas, user-input

我创建了一个`chack`键盘点击函数，而不是一直声明事件监听器。

当你调用它一次它工作但当我有两个或更多实例时，只有最后一个工作正常。

```
var left = y_input_s.chack (y_key.left);
var right =  y_input_s.chack (y_key.right); 
```

只有“正确”有效。

这是功能：

```
y_input.prototype.chack = function (key) 
{

//38 up |40 down| 39 left | right 37 | space 32 | 

//insert key code to array dinamicly

//if its unudetfid so the key wasent pressed yet so its false
if(y_input.prototype.key_down_cack[key] == undefined)
{
    y_input.prototype.key_down_cack[key] = false;   
}

//if the key is down change its place in array to true
document.onkeydown = function(event)
{

    if(event.keyCode == key){y_input.prototype.key_down_cack[key] = true;}

}

//if the key is up change its place in array to false
document.onkeyup = function(event)
{
    if(event.keyCode == key){y_input.prototype.key_down_cack[key] = false;}
}

//return the key state from array

return y_input.prototype.key_down_cack[key] ;
    }//end chack 
```

我测试了函数内部的东西，“key”的值很好，但是当我在里面破解“key”时。

```
document.onkeydown = function(event)
{ 
```

它返回`chack`参数中传递的最后一个函数键值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:30:57.033

它失败的原因是你一直在写 keyup 事件。

```
document.onkeyup = function(event) 
```

了解[addEventListener](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)

# ajax - @Ajax.Actionlink 渲染局部视图

> ID：16170507
> 
> 赞同：1
> 
> 时间：2013-04-23T13:22:37.063
> 
> 标签：ajax, asp.net-mvc, actionlink

我正在尝试使用 Ajax.Actionlink 来呈现部分视图。但它只会将我重定向到部分视图。我还添加了：`<add key="UnobtrusiveJavaScriptEnabled" value="true" />`到 webconfig. 任何人？

**我的 layout.cshtml** Scripts.render 和脚本在 head 标签中。Ajax.actionlink 和 div 在正文中

```
@Styles.Render("~/Content/css")
@Scripts.Render("~/bundles/modernizr")
@Scripts.Render("~/Scripts/jqueries")
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>

@Ajax.ActionLink("Ajax Click", "Document","Home", new AjaxOptions { UpdateTargetId = "result", InsertionMode = InsertionMode.Replace })

<div id="result">

</div> 
```

**家庭控制器：**

```
public PartialViewResult Document()
     {

                return PartialView("Document", om);
     } 
```

**我的文档.cshtml**

```
@model mymodel

@foreach (var item in Model)
{ 
            <li>@Html.ActionLink(item.something, "Controller", "Action")</li>
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T12:37:57.757

你的 jquery 和 unobtrusive-ajax 应该在页面的底部，像这样

```
</footer>
@Scripts.Render("~/bundles/jquery")
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
@RenderSection("scripts", required: false)
</body>
</html> 
```

信息为什么可以在这里找到 [http://developer.yahoo.com/performance/rules.html/](http://developer.yahoo.com/performance/rules.html/) 把它放在错误的地方，会导致错误

# android - 在后台保持永久连接（同一个 LAN），不使用 GCM

> ID：16170509
> 
> 赞同：0
> 
> 时间：2013-04-23T13:22:39.563
> 
> 标签：android, google-cloud-messaging, httpurlconnection

即使应用程序未运行，我也需要在后台保持打开的连接。无法使用 GCM，因为连接将在与服务器相同的 LAN 中，并且设备可能没有有效的 Internet 连接。连接将是某种本地推送，因此设备将不时获得一些简短的相关数据（除了保持活动消息）。

我的用例非常具体，所以我可以认为电池不是问题。我可能会显示一个巨大的红色警告，说明启用该功能会耗尽电池电量，或者如果设备未充电，则将其禁用。

另一方面，具有连接的进程不会被Android“随机”杀死，这一点非常重要。

我考虑过通过服务来实现这一点，但我想听听其他人的意见。考虑到前面提到的限制，也许有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:00:09.227

> “即使应用程序没有运行”

这意味着您的应用程序没有运行，并且它没有进程。如果不使用唤醒您的应用程序的第三方应用程序（例如 GCM 服务），您将无法获得任何信息。

但是，您可以让服务保持活动状态并保持与服务器（例如，XMPP 服务器）的连接，以接收通知并唤醒这个或那个活动。

您也可以在单独的应用程序中执行此操作。

例如，您可以使用警报管理器启动的常规看门狗来增加稳健性。

# mysql - MySQL查询在检查列后添加连接

> ID：16170511
> 
> 赞同：0
> 
> 时间：2013-04-23T13:22:40.700
> 
> 标签：mysql, database, join

我用下表创建了数据库。

```
booking (id, user_id, user_table, date);
user (id, fname, lname);
tmp_user (id, fname, lname); 
```

预订表同时`user_id`引用`user`表 id 和`tmp_user`表 id。我使用`user_table`列来保持用户表类型。

我想编写一个查询来获取包含用户详细信息的预订详细信息。所以我应该`user_table`在加入用户表之前检查列值。

可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:40:37.053

您可以通过加入并使用优先级来执行这种类型的查询：

```
select b.*,
       (case when u.id is not null then u.fname else tu.fname end) as fname,
       (case when u.id is not null then u.lname else tu.lname end) as lname
from booking b left outer join
     user u
     on b.user_id = u.id left outer join
     tmp_user tu
     on b.user_id = tu.id 
```

您还可以将条件添加`and u.uid is null`到第二个联接。我不知道这是否有助于或妨碍性能。

哦，如果你想要用户表的值，那么这只是对逻辑的一个小修改：

```
select b.*,
       (case when b.user_table = 'user' then u.fname else tu.fname end) as fname,
       (case when b.user_table = 'tmp_user' then u.lname else tu.lname end) as lname
from booking b left outer join
     user u
     on b.user_id = u.id left outer join
     tmp_user tu
     on b.user_id = tu.id; 
```

# c# - 在另一个中继器内动态绑定中继器？

> ID：16170514
> 
> 赞同：2
> 
> 时间：2013-04-23T13:22:54.950
> 
> 标签：c#, data-binding, repeater

我有这个代码：

```
<asp:Repeater id="repeaterCategories" runat="server">
    <ItemTemplate>
        <div class="categorie-item">
            ...

            <asp:Repeater id="repeaterSubCategories" runat="server">
                <ItemTemplate>
                    ...
                </ItemTemplate>
            </asp:Repeater>
        </div>                    
    </ItemTemplate>
</asp:Repeater> 
```

并且`repeaterSubCategories`必须是`repeaterCategories.SubCategories`，对于每个`repeaterCategories`。所以我必须动态绑定（对于每个第一次转发器迭代）子类别列表。

我可以做吗？如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T13:28:27.323

如果您有这样的嵌套中继器：

```
<asp:Repeater ID="Repeater1" runat="server" OnItemDataBound="Repeater1_ItemDataBound">
    <ItemTemplate>
        <asp:Repeater ID="Repeater2" runat="server"></asp:Repeater>
    </ItemTemplate>
</asp:Repeater> 
```

您可以使用它来绑定它：

```
protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    var data = ((MyClass)e.Item.DataItem).Subcategories;
    var repeater2 = (Repeater)e.Item.FindControl("Repeater2");
    repeater2.DataSource = data;
    repeater2.DataBind();
} 
```

# java - 您如何使用哈希表创建平衡树（比如说 AVL 树）来查找节点？

> ID：16170517
> 
> 赞同：0
> 
> 时间：2013-04-23T13:22:58.443
> 
> 标签：java

这是考试问题中某些问题的解决方案。所以我应该制作一个带有哈希表的 AVL 树，以便快速查找树中的节点。我该怎么做？更具体地说，如何将哈希表中的指针指向树中的节点？

我更喜欢 Java 实现，因为我熟悉 Java。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:27:22.883

平衡在这里主要是一个红鲱鱼。平衡时，您只在节点周围移动，因此您不需要更新哈希表。您只需要在从树中插入和删除节点时更新哈希表。

只需将节点插入哈希表中。Java 使用对象的引用，因此哈希表将始终指向该节点。

# jsf-2 - 带有动态 src ... 完全疯狂

> ID：16170519
> 
> 赞同：10
> 
> 时间：2013-04-23T13:23:08.003
> 
> 标签：jsf-2

我在 JSF 中完成一项极其简单的任务时遇到了很大的问题。问题：我有对象，它们具有聚合属性，这些属性的类型可能因对象而异。根据属性的类型，我想使用一组不同的输入字段。

子类型组件驻留在框架中并按需加载。为此，我使用以下代码：

```
<h:panelGroup id="zusatzdaten">
    <fieldset class="clear">
    <legend>#{tickerUI.ticker.tickerDescription.label}
          (#{tickerUI.ticker.tickerDescId})
    </legend>
    <h:panelGroup rendered="#{tickerUI.editComponentName != null}">
        <ui:include src="#{tickerUI.editComponentName}"/>
    </h:panelGroup>
    </fieldset>
</h:panelGroup> 
```

组件的名称来自于 @SessionScope 的 TickerUI。现在令人眼花缭乱的一点：当它第一次加载时，会显示正确的子组件。但是，当在导航中使用链接时，会导致包含不同的组件，内容不会更新！这会导致错误，因为数据现在是不同的子类型，但表单组件仍然来自前一个。

从错误返回并再次单击链接时，将显示正确的组件。我记录了 editComponentName 的值并返回了正确的值。这非常令人困惑。为什么当 getter 将正确的组件名称返回到 src 属性时包含错误的内容？

非常感谢帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T15:27:48.240

实际上，您的问题是经典视图构建与视图渲染时间问题/误解。更具体地说，视图*建立*在每个新请求上，并从以前保存的回发状态*重建。*稍后*渲染*视图以生成 HTML 内容。

现在，作为`<ui:include>`标签*处理程序*，或者官方术语是*视图构建时间标签*，当您第一次请求页面时，它的`value`属性被评估，并且包含的​​页面进入视图。在回发时，与您可能期望的相反，包含的内容已经存在于重建视图中。因此，您将呈现视图的确切部分，这是一种预期的行为。

至于解决方案，您可以简单地包含一个详尽的静态包含列表，这些静态包含包含在有条件呈现的`<ui:fragment>`JSF 组件中。为简单起见，所有内容都可以放在一个容器中，这样`<h:panelGroup>`总是呈现以方便 AJAX 更新。代码可以按如下方式组装：

```
<h:panelGroup id="ui">
    <ui:fragment rendered="#{bean.condition1}">
        <ui:include src="/path/to/file1.xhtml"/>
    </ui:fragment>
    ...
    <ui:fragment rendered="#{bean.condition_n}">
        <ui:include src="/path/to/file_n.xhtml"/>
    </ui:fragment>
</h:panelGroup> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T15:46:59.787

似乎是一个经典的困境。[BalusC 的博客](http://balusc.blogspot.de/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers)以 web.xml 中的配置参数的形式为我的案例提供了解决方案：

```
<context-param> 
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name> 
    <param-value>false</param-value>
</context-param> 
```

# wordpress - Woocommerce 过滤器钩子

> ID：16170521
> 
> 赞同：0
> 
> 时间：2013-04-23T13:23:12.297
> 
> 标签：wordpress, woocommerce, woothemes

我希望能在 Woocommerce 中使用过滤器。我的主要问题是，我在模板文件中寻找什么？或者可以使用过滤器定位哪些变量？如果我们查看过滤器列表，我会看到过滤器名称和文件。使用这个过滤器

single_product_small_thumbnail_size

文件 - product-thumbnail.php 和 woocommerce-template.php

我在那些可以定位和更改的文件中寻找什么？你能给我一个简单的例子吗？也许像改变缩略图大小？

```
add_filter('filter_name', 'your_function_name');

function your_function_name( $variable ) {
// Your code
return $variable;
} 
```

我了解函数和过滤器的每个部分是什么，但我不确定要为“您的代码”编写什么代码。我从文件中获取什么变量？如何应用更改？我无法完全解决这个问题。任何帮助将不胜感激。

谢谢，~MK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:34:53.950

正如您在例如中看到的，`woocommerce-template.php`您可以过滤`shop_catalog`字符串：

```
$small_thumbnail_size  = apply_filters( 'single_product_small_thumbnail_size', 'shop_catalog' ); 
```

该字符串在后续代码中用于确定要使用的图像大小：

```
$image = wp_get_attachment_image_src( $thumbnail_id, $small_thumbnail_size  ); 
```

因此，如果您想使用其他图像大小，可以过滤字符串，例如：

```
add_filter( 'single_product_small_thumbnail_size', 'my_single_product_small_thumbnail_size', 25, 1 );
function my_single_product_small_thumbnail_size( $size ) {
    $size = 'large';
    return $size;
} 
```

# php - 将表单操作结果页面加载到 不提神

> ID：16170527
> 
> 赞同：0
> 
> 时间：2013-04-23T13:23:39.400
> 
> 标签：php, jquery, forms, action

我想`(add_cart.php?action=add&id=".$item[$i]['id'].")."`将此选择表单的结果加载到 div 中，但仍将变量传递给页面将`add_cart.php`页面加载`add_cart.php?action=add&id=".$item[$i]['id']."`到 div 中而不刷新但让页面执行操作。

编码：

```
print("<div id='add_cart'></div>
    <form action='/add_cart.php?action=add&id=".$item[$i]['id']."' method='post'>
        <select name='id' class='select'>
            <option selected='selected' value='".$sku[$s]['id']."'>".$sku[$s]['id']."</option>
            <option value='".$sku[$s]['id']."'>".$sku[$s]['id']."</option>
        </select>
        <input type='submit' class='add_cart' value='".$lang['add_cart']."'>
    </form>
"); 
```

add_cart 代码：

```
 session_start();
    if(isset($_POST['id'])) {
$id = $_POST['id'];
}else{
$id = $_GET['id'];
}
$id_user = $_GET['id_user'];

    $cart = $_SESSION['cart_order'];
    $action = $_GET['action'];

    switch ($action) {
case 'add':
    if ($cart) {
        $cart .= ','.$id;
    } else {
        $cart = $id;
    }
    break;
case 'delete':
    if ($cart) {
        $items = explode(',',$cart);
        $newcart = '';
        foreach ($items as $item) {
            if ($id != $item) {
                if ($newcart != '') {
                    $newcart .= ','.$item;
                } else {
                    $newcart = $item;
                }
            }
        }
        $cart = $newcart;
    }
    break;
case 'update':
if ($cart) {
    $newcart = '';
    foreach ($_POST as $key=>$value) {
        if (stristr($key,'qty')) {
            $id = str_replace('qty','',$key);
            $items = ($newcart != '') ? explode(',',$newcart) :        explode(',',$cart);
            $newcart = '';
            foreach ($items as $item) {
                if ($id != $item) {
                    if ($newcart != '') {
                        $newcart .= ','.$item;
                    } else {
                        $newcart = $item;
                    }
                }
            }
            for ($i=1;$i<=$value;$i++) {
                if ($newcart != '') {
                    $newcart .= ','.$id;
                } else {
                    $newcart = $id;
                }
            }
        }
    }
}
$cart = $newcart;
break; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:59:15.923

您应该搜索 Ajax。它让您“无需重新加载整个页面”即可实现这一目标并使您的生活更轻松，您可以在某些框架（jQuery、Prototype、Mootools、Dojo、Yui）中进行中继，这是一些最受欢迎的，我的建议是使用 jQuery，因为是最受欢迎的，我认为它很容易使用。

你也可以看看这个教程[http://www.php4every1.com/tutorials/jquery-ajax-tutorial/](http://jsfiddle.net/nQBjW/)

发现只是在谷歌上打字`php and ajax tutorial`。

[http://jsfiddle.net/nQBjW/](http://jsfiddle.net/nQBjW/)

HTML

```
<select name='id' class='select'>
    <option value="some value">some value</option>
</select>
<div id='add_cart' style='background:#f60; color:#fff; font-family:arial; max-width:120px; text-align:center; display:block; padding:5px; border-radius:5px; cursor:pointer'>agregar al carro</div> 
```

JAVASCRIPT

```
var makeAjax = function () {
    $.ajax({
        url: "/echo/json/", //'/add_cart.php?action=add&id=".$item[$i]['id ']."' replace with you url on your server
        type: "POST",
        data: {
            some: "data"
        }
    }).done(function (resp) {
        alert(resp);
    });
};

$("#add_cart").on("click", function (event) {
    makeAjax();   
}); 
```

# django - Haystack：多个模型的一个搜索索引

> ID：16170537
> 
> 赞同：2
> 
> 时间：2013-04-23T13:24:06.553
> 
> 标签：django, elasticsearch, django-haystack

在 Haystack 的[入门页面](https://django-haystack.readthedocs.org/en/latest/tutorial.html)上，它描述了将一个 SearchIndex 用于多个模型的可能性：

> 您通常为您希望索引的每种类型的模型创建一个唯一的 SearchIndex，但如果您注意这样做并且您的字段名称非常标准化，您可以在不同的模型之间重用相同的 SearchIndex。

但是，我还没有找到有关如何执行此操作的任何信息。其背后的原因是少数 Heroku 搜索引擎应用程序提供的索引数量有限，所以我认为保持索引数量较少是个好主意。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T17:09:09.193

除非您在 setting.py 中指定，否则没有索引只会是一个。多个 search_index.py 文件并不意味着多个索引。

# google-apps-script - 重复出现的 Google Apps 脚本 Web 应用错误

> ID：16170538
> 
> 赞同：3
> 
> 时间：2013-04-23T13:24:08.897
> 
> 标签：google-apps-script

希望你一切都好。

我创建了两个 Google Apps 脚本项目。

主要脚本和主要使用的库。它使用触发器。

我已将此脚本嵌入 Google 站点并对其进行授权。

由于某些原因，我无法理解，以下错误已通过电子邮件发送到将脚本嵌入其 Google 站点的帐户。

“很抱歉，我们无法获取授权凭据。请稍候，然后重试。”

错误电子邮件偶尔会出现。每次之间没有固定的时间。

难以诊断。是的，我已经删除并阅读了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:26:44.703

好吧，似乎我已经通过执行以下操作阻止了错误的发生。

1.  撤销所有脚本权限

    ```
    Google Account > Security > Manage access > Revoke Access 
    ```

2.  制作了我的 Google Apps Web App 脚本的副本

    ```
    Apps Script Editor > File > Make a Copy 
    ```

3.  从我的云端硬盘文件夹和垃圾箱中删除了原始脚本文件
4.  删除了嵌入 Apps 脚本小工具的 Google 站点。仅删除 Apps 脚本小工具并没有帮助。

    ```
    Google Sites > More > Manage Site > General > Delete this Site 
    ```

5.  从 Google 协作平台中删除了该站点已删除的项目

    ```
    Google Sites > More > Manage Site > General > Deleted items > Delete Permanently 
    ```

6.  从脚本应用程序中删除了所有触发器

    ```
    Apps Script Editor > Resources > All your triggers 
    ```

7.  触发器调用的重命名函数

# c# - 提交后 IEnumerable 属性为空

> ID：16170539
> 
> 赞同：4
> 
> 时间：2013-04-23T13:24:10.033
> 
> 标签：c#, asp.net-mvc, entity-framework, razor, asp.net-mvc-4

我是 MVC 的新手，理解这一点有一些困难。

为简单起见，我有一个“Person”对象，该对象有一个名为“EmailaddressList”的 IEnumerable 属性。

我通过 Visual Studio 2012 生成了一个编辑页面。主要对象属性是在编辑页面上生成的，带有名称和姓氏等文本框。

但是，在我看来，IEnumerable 子对象列表中的电子邮件地址列表不会自动生成。没关系，我已经为每种类型的电子邮件地址使用选项卡手动编写了该代码。

到现在为止还挺好。

**问题：** 当我在 HTTP-Post 方法中收到模型（人对象）时，EmailAddressList 为空。为什么会这样，我发送到视图时它不为空。I 列出电子邮件地址的选项卡在部分视图中。谁能给我一些提示，这是我在这里缺少的东西吗？ *

**查看代码**

```
<div id="tabs">
<ul>
    @foreach (var item in Model.EmailAddressList)
    {
        <li><a href="#@item.AddressType">@Html.Label(item.AddressType)</a></li>
    }
</ul>
@foreach (var item in Model.EmailAddressList)
{
    <div id="@item.AddressType">
        <p>
            @Html.TextBoxFor(s => item.EmailAddress, new { @class = "input-xxlarge" })
        </p>
    </div>
}
</div> 
```

**控制器（接收方法）** 这里 person.EmailAddressList 为 null

```
 [HttpPost]
    public ActionResult Create(Person person)
    {
        if (ModelState.IsValid) 
        {
            personRepository.InsertOrUpdate(person);
            personRepository.Save(); 
            return RedirectToAction("Index");
        } 
        else 
        {
            return View();
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T14:22:52.203

那是因为为了正确索引您的字段（以便模型绑定器可以完成它的工作），您必须使用`for`循环。

首先，将 your 更改`IEnumerable`为 a `List`（这样我们就可以在视图中使用索引器）。

然后将您更改`foreach`为以下`for`循环：

```
@for (int i = 0; i < Model.EmailAddressList.Count; i++)
{
    <div id="@Model.EmailAddressList[i].AddressType">
        <p>
            @Html.TextBoxFor(m => m.EmailAddressList[i].EmailAddress, new { @class = "input-xxlarge" })
        </p>
    </div>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:44:15.453

根据您的更新，这不起作用的原因是默认模型绑定器仅依赖于*简单*数据集合的顺序。当涉及到复杂类型时，您需要为每个项目提供相关索引，否则它不知道您指的是哪个项目属性，例如

```
@for (int i = 0; i < Model.EmailAddressList.Count; i++) {
    Html.TextBoxFor(m => m.EmailAddressList[i].EmailAddress) %>
} 
```

请参阅 Phil Haack 关于[模型绑定到列表](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:14:04.640

这是由于您的元素没有被标识为 MVC 在回帖中提取它们的正确方法，您需要的是：

```
@Html.EditorFor(model => model.EmailAddressList); 
```

然后，请参阅我位于[此处](https://stackoverflow.com/questions/16035759/asp-net-mvc-partial-control/16036361#16036361)的帖子，了解如何使其看起来像您想要的那样。

# java - 布局更改可见性

> ID：16170540
> 
> 赞同：0
> 
> 时间：2013-04-23T13:24:10.377
> 
> 标签：java, android, android-layout, layout, augmented-reality

我正在尝试使用 Metaio 为 Android 开发增强现实应用程序。但实际上我有一个问题。我想在应用程序识别标记时出现一个小菜单。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

 <ImageButton
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:background="@android:color/transparent"
    android:onClick="onButtonClick"
    android:contentDescription="@null"
    android:src="@drawable/cancel" />

<LinearLayout
    android:id="@+id/buttonBar123"
    style="@android:style/ButtonBar"
    android:layout_width="300dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="10dp"
    android:visibility="invisible"
    android:orientation="horizontal"
    android:gravity="center">

    <Button
        android:id="@+id/TextoButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onTextoButtonClick"
        android:text="Texto" />

    <Button
        android:id="@+id/ImageButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onImagemButtonClick"
        android:text="Imagem" />

</LinearLayout>

</RelativeLayout> 
```

我的布局在视图上，我不知道如何将 ButtonBar123 更改为在 Java 代码中可见。你能帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:27:42.383

你只需要参考你的`Layout`

```
LinearLayout buttonBar = (LinearLayout) findViewById(R.id.buttonBar123); 
```

然后设置`visibility`

```
buttonBar.setVisibility(View.VISIBLE); 
```

[能见度](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:27:22.853

```
LinearLayout buttonBar = (LinearLayout)findViewById(R.id.buttonBar123);
buttonBar.setVisibility(View.VISIBLE); 
```

# c# - Kendo DropDownList 不会触发级联事件

> ID：16170542
> 
> 赞同：0
> 
> 时间：2013-04-23T13:24:12.710
> 
> 标签：c#, telerik, kendo-ui, kendo-asp.net-mvc

我有 3 个`DropDownList`。当我从第一个中选择值时，第二个完美运行，Kendo 自动启用第二个并执行 AJAX 查询。但是当我从第二个中选择值时，第三个 DropDownList 仍然被禁用。

编码：

```
<script>
    function filterSchemas() {
        return { formGroupId: $("#FormGroupName").val() };
    }

    function filterRootElements() {
        return { shemaId: $("#Schemas").val() };
    }
</script>

<div class="editor-label">
    @Html.LabelFor(e => e.FormGroupName, "Form group")
</div>
<div class="editor-field">
    @(Html.Kendo().DropDownListFor(e => e.FormGroupName)
          .Name("FormGroupName")
          .OptionLabel("Select form group...")
          .DataValueField("Id")
          .DataTextField("Name")
          .Template("#= data.Name # (#= data.Version #)")
          .DataSource(dataSource =>
              {
                  dataSource.Read(read => read.Route(RouteConfig.GetFormGroupNames.Name)).ServerFiltering(true);
              })
    )
</div>

<div class="editor-label">
    @Html.LabelFor(e => e.Schema, "Schema")
</div>
<div class="editor-field">
    @(Html.Kendo().DropDownListFor(m => m.Schema)
          .Name("Schema")
          .OptionLabel("Select schema...")
          .DataValueField("SchemaId")
          .DataTextField("ShemaName")
          .DataSource(dataSource =>
              {
                  dataSource.Read(read => read.Route(RouteConfig.FilterFormSchemas.Name).Data("filterSchemas")).ServerFiltering(true);
              })
          .AutoBind(false)
          .Enable(false)
          .CascadeFrom("FormGroupName")
          )     
</div>

<div class="editor-label">
    @Html.LabelFor(e => e.Root, "Root element")
</div>
<div class="editor-field">
    @(Html.Kendo().DropDownListFor(m => m.Root)
          .Name("Root")
          .OptionLabel("Select root...")
          .DataValueField("RootId")
          .DataTextField("RootName")
          .DataSource(dataSource =>
              {
                  dataSource.Read(read => read.Route(RouteConfig.FilterFormRootElements.Name).Data("filterRootElements")).ServerFiltering(true);
              })
          .AutoBind(false)
          .Enable(false)
          .CascadeFrom("Schema")
          )     
</div> 
```

有什么建议么？

# c - 如何使用按位运算返回 0？

> ID：16170545
> 
> 赞同：1
> 
> 时间：2013-04-23T13:24:21.710
> 
> 标签：c, bit-manipulation

我有以下功能

```
int sign(int x) {

  int sign = (x >> 31);
  sign = sign | 1;
  return sign;

} 
```

我希望有以下几点：

*   为负数返回 -1（第一行）
*   返回 1 为正数（第二行）
*   返回 0 表示零

我被困在最后一项上。如果 x 为零，如何仅使用按位运算符返回零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:07:02.753

不错的小拼图。假设您有 32 位整数：

```
int sign( int x )
{
   // if any bit is on, all bits are on. else zero.
   int lowBit = x;
   lowBit |= lowBit >> 16;
   lowBit |= lowBit >> 8;
   lowBit |= lowBit >> 4;
   lowBit |= lowBit >> 2;
   lowBit |= lowBit >> 1;
   lowBit &= 1;

   int signBit = x & 0x80000000;
   signBit |= signBit >> 16;
   signBit |= signBit >> 8;
   signBit |= signBit >> 4;
   signBit |= signBit >> 2;
   signBit |= signBit >> 1;
   signBit &= 0xFFFFFFFE;

   return signBit | lowBit;
} 
```

下面是它的工作原理。我将用 4 位数字进行解释，但解释是泛化的。您必须从三类位模式进行映射：

```
0000    -> 0000
0xxx    -> 0001
1yyy    -> 1111 
```

其中 x 可以是除 000 以外的任何值，而 yyy 可以是任何值。

因此，如果寄存器中的任何位为 1，则首先您需要一个为 1 的位，否则为 0。所以我们“涂抹”寄存器，这样如果任何位为高，所有位都为高，并且我们保留该位作为结果中低位的值。

然后我们“涂抹”符号位。最后我们'或'他们在一起。

读者练习：如果您有 32 位整数，但有 64 位寄存器，则可以将操作次数减少一半。

更新：总是可以做得更好（未经测试）：

```
int sign( int x )
{
   int lowBit = !!x;  // double ! operator, wtf? yes...

   int signBit = x & 0x80000000;
   signBit |= signBit >> 16;
   signBit |= signBit >> 8;
   signBit |= signBit >> 4;
   signBit |= signBit >> 2;
   signBit |= signBit >> 1;
   signBit &= 0xFFFFFFFE;

   return signBit | lowBit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:12:44.970

用这个

```
int sign(int x) {

  int sign = (x >> 31);
  sign = sign | (~(1<<((x|(x>>5)|(x>>10)|(x>>15)|(x>>20)|(x>>25)|(x>>30))&0x1F))&0x1);
  return sign;

} 
```

`1`这个想法是左移`x`计数。

所以如果`x==0`那么第一位将被保留`1`

如果`x!=0`然后第一位将更改为`0`

然后`sign = sign | (~(First bit))`

相当于

```
sign = sign | (~(1<<x) & 0x1); 
```

但是当我们用 左移时我们必须小心`1`，`x`因为`x`可能 >= 到类型格式 (32) 的大小并且`x`可能是 negatif 并且对于这两种情况它都是未定义的行为。

所以为了避免上述问题，我将我们的 32 位 (the `x`) 拆分为 7 个块，每个块包含 5 个位，除了最后一个包含 2 个位，然后我`|`为所有块做了一个

```
y=(bloc1|bloc2|bloc3|bloc4|bloc5|bloc6|bloc7) 
```

所以如果`x!= 0`那时`y!=0`

如果`x==0`那时`y==0`

我们只需要取`y`( `&0x1F`) 的前 5 位。在这里，我确定这`y`不是否定的，并且`y<32`

然后`x`我可以换位而不是换位`y`以避免未定义的行为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:51:26.380

你也可以使用这个。它与我之前的答案具有相同的逻辑

```
int sign(int x) {
  int y = x;
  y |= y >> 16;
  y |= y >> 8;
  y |= y >> 4;
  y &= 0xF;

  int sign = (x >> 31);
  sign = sign | (~(1<<y) & 0x1);
  return sign;
} 
```

# javascript - 如何从黑色背景更改背景颜色？

> ID：16170546
> 
> 赞同：1
> 
> 时间：2013-04-23T13:24:24.447
> 
> 标签：javascript

我发现了很多关于改变背景颜色的脚本，例如这个：

```
function changeBGC(color){
    document.bgColor = color;
} 
```

我当前的 HTML 是：

```
<a href="#" onMouseOver="javascript:changeBGC('#000099')">Mouseover Blue</a> 
```

似乎它在一开始只能使用白色背景，因为如果我使用 CSS 设置一些颜色，例如：

```
body { 
    background-color: #000000;
} 
```

然后它不再工作了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:28:03.010

如果要更改 body 的背景颜色，请使用以下代码：

```
function changeBGC(color){
   document.body.style.backgroundColor = color;
} 
```

这将改变背景的颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:26:22.953

更改`background-color`样式而不是使用过时的`bgColor`：

```
function changeBGC(color) {
    document.body.style.backgroundColor = color;
} 
```

注意：`document`没有样式属性 - 请参阅用户 Kolink 的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:30:13.900

```
<a id="test" ...> ... </a> 
```

使用jQuery：

```
$("#test").hover(function(){
    $(this).css("background","color");
},function(){
    $(this).css("background","#000");
}); 
```

# java - Object.isArray() 很慢，有没有快速的方法呢？

> ID：16170548
> 
> 赞同：19
> 
> 时间：2013-04-23T13:24:27.283
> 
> 标签：java, performance

在我的应用程序`obj.getClass().isArray()`中调用非常频繁，成为应用程序的瓶颈。
如果对象是数组，我想在运行时有效地检查。原始数组和对象数组应返回 true。
我能想象的方式是`instanceof`所有原始数组，但不能处理像 int[][] 这样的类型。并且该应用程序用作 lib，因此我无法列出所有类型。
有什么线索吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T13:32:18.983

`isArray()`是在运行时检查对象是否为数组实例的最有效方法。如果性能有问题，您可以使用以下方法之一来解决它：

*   重构您的代码，以便分别处理数组对象和非数组对象，以便`isArray()`在编译时知道结果。
*   使用局部变量和/或参数来缓存`isArray()`操作期间的值，因此只需要调用一次。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-23T13:57:14.673

我刚刚做的一个基准测试给出了以下结果：

```
{s instanceof Object[]} spends 44ms
{s.getClass().getName().charAt(0) == '['} spends 58ms
{s.getClass().isArray()} spends 303ms 
```

基准测试是使用[Benchmark.java完成的，用](http://pastebin.com/pskJ1tSy)[Main.java](http://pastebin.com/KbptdWaB)调用。

* * *

`final`在上述基准测试中讨论了变量的使用之后，使用本地变量查看新结果：

```
{s instanceof Object[]} spends 83ms
{s.getClass().getName().charAt(0) == '['} spends 93ms
{s.getClass().isArray()} spends 354ms 
```

即使持续时间有点长（顺便说一句很有趣），它们的顺序也被保留了。

然后使用这个新的[Main.java](http://pastebin.com/nisMGtnP)调用 Benchmark.java 。

* * *

并使用与其他[Main.java](http://pastebin.com/n5q8ZCyj)一起调用的原始数组：

```
{a instanceof int[]} spends 71ms
{a.getClass().getName().charAt(0) == '['} spends 82ms
{a.getClass().isArray()} spends 340ms 
```

仍然是相同的结果顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T13:52:08.957

从您的评论中，我得出结论，您在调查分析结果时可能会遇到解释错误。您的分析器的方法级检测可能会严重削弱`getClass()`和`isArray()`调用，同时对`instanceof`表达式不感兴趣。换句话说，您可能正在这里测量分析器的测量开销。

此外，在快速基准测试中，我无法支持您的主张。我已经运行了以下非常愚蠢的测试：

```
public class Test {
    public static void main(String[] args) {
        final int rep = 10000000;
        Object[] o = {
            null,
            1,
            "x",
            new Object[0],
            new Object[0][],
            new int[0],
            new int[0][]
        };

        // "Warmup" to avoid potential JVM startup overhead
        long x = 0;
        for (int i = 0; i < rep; i++) {
            x+=checkInstanceOf(o);
        }

        for (int i = 0; i < rep; i++) {
            x+=checkIsArray(o);
        }

        for (int i = 0; i < rep; i++) {
            x+=checkClassName(o);
        }

        // Actual test
        long t1 = System.nanoTime();
        for (int i = 0; i < rep; i++) {
            x+=checkInstanceOf(o);
        }

        long t2 = System.nanoTime();
        for (int i = 0; i < rep; i++) {
            x+=checkIsArray(o);
        }

        long t3 = System.nanoTime();
        for (int i = 0; i < rep; i++) {
            x+=checkClassName(o);
        }

        long t4 = System.nanoTime();

        System.out.println(t2 - t1);
        System.out.println(t3 - t2);
        System.out.println(t4 - t3);
    }

    private static int checkInstanceOf(Object[] o) {
        int i = 0;
        for (Object x : o) {
            if (x instanceof Object[]) i++;       // Perform some logic
            else if (x instanceof boolean[]) i++; // to keep the compiler or
            else if (x instanceof byte[]) i++;    // the JVM from optimising
            else if (x instanceof short[]) i++;   // this code away
            else if (x instanceof int[]) i++;
            else if (x instanceof long[]) i++;
            else if (x instanceof float[]) i++;
            else if (x instanceof double[]) i++;
            else if (x instanceof char[]) i++;
        }
        return i;
    }

    private static int checkIsArray(Object[] o) {
        int i = 0;
        for (Object x : o) {
            if (x != null && x.getClass().isArray()) i++;
        }
        return i;
    }

    private static int checkClassName(Object[] o) {
        int i = 0;
        for (Object x : o) {
            if (x != null && x.getClass().getName().charAt(0) == '[') i++;
        }
        return i;
    }
} 
```

我越来越：

```
394433000 // instanceof
110655000 // getClass().isArray()
396039000 // getClass().getName().charAt(0) == '[' 
```

*因此，您通常*不能声称`getClass().isArray()`比一组彻底的`instanceof`检查要慢。当然，有很多不同的方法可以重写我的测试，但你明白了。

# php - 在 include_once 函数中使用查询字符串

> ID：16170549
> 
> 赞同：0
> 
> 时间：2013-04-23T13:24:29.997
> 
> 标签：php, phpmyadmin

我们如何在 include_once 函数中使用查询字符串

像这样：

**include_once 'model/edit.php?id=$inf';**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:25:44.497

你不能。参数保留给 URL。但是您可以模拟向 URL 添加参数的效果：

```
$_GET["id"] = $inf;
include_once 'model/edit.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:44:08.980

If you use include_once 'model/edit.php' then after this code you can use variables that are available in your script

edit.php

```
<?php echo $x; ?> 
```

main.php

```
 <?php $x = "it works"; include_once 'edit.php'; ?> 
```

check this code and you will understand. This code prints "it works".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:46:18.030

$inf = '1';

include_once '模型/edit.php;

在 include_once 函数中添加查询字符串没有意义。如果你在函数之前声明变量，那么你仍然可以直接访问包含文件中的 $inf。

# delphi - Delphi 使用 AnimateWindow 创建最大化的 MDI 子级

> ID：16170552
> 
> 赞同：-1
> 
> 时间：2013-04-23T13:24:43.980
> 
> 标签：delphi, mdi

我有一个带有 MDI 表单的应用程序，并且我一直在尝试使用`Animatewindow()`.

我的问题是，我所有的 MDI 表单都带有`Windowstate=wsMaximized`，并且不知道如何在不显示默认经典窗口调整大小和动画的情况下创建表单...

这就是我正在尝试的：

```
procedure FORMCREATOR(t_form:tformclass);
var form:tform;
begin
    frmain.sPanel5.Hide;
    frmain.LockClientWindowUpdate;    
    form:=t_form.Create(frmain); 
```

// 顺便说一句，如果我执行“t_form.Create(application)”而不是“t_form.Create(frmain);” 它给出了一个错误..并且使用“....（frmain）”我无法在此过程之外访问像“form.button1.caption：='test'”这样的表单，访问冲突！..帮助plox！

```
 frmain.UnlockClientWindowUpdate;  

    AnimateWindow(form.Handle,500,AW_CENTER or AW_SLIDE or AW_VER_POSITIVE); 
end; 
```

所以，当我调用它时，它只是创建了没有任何效果的表单`Animatewindow()`......它只显示为最大化而没有效果:( ..

小伙伴们请帮我一把！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:05:42.840

与@bummi 的想法..

我改成这样：

```
procedure tfrmain.FORMCREATOR(t_form:tformclass);
var form:tform;
nome_form:string;
begin
    frmain.sPanel5.Hide;       

    frmain.lockClientWindowUpdate;

    With t_form.Create(frmain) do
    begin
         visible := false;
         Formstyle := fsNormal;   //Now i'll make all my forms as fsnormal  
         Parent := self;

         Width := frmain.sPanel5.width; 
         Height := frmain.sPanel5.height;       
         left:=frmain.sPanel5.left;
         top:=frmain.sPanel5.Top; 
```

//这个 Spanel5 是假定的客户区，那里将是 MDI 孩子，这就是为什么我在程序开始时隐藏它

```
 frmain.UnlockClientWindowUpdate;

         AnimateWindow(handle,1000, AW_CENTER or AW_SLIDE or AW_HOR_NEGATIVE );

         frmain.lockClientWindowUpdate;

         Parent := frmain;
         FormStyle := fsMDIChild;
         windowstate:=wsmaximized;

         frmain.unlockClientWindowUpdate;
    end;    
end; 
```

是的 ！它工作得很好，没有图像闪烁之类的东西！;） 非常感谢！

# c# - 单元测试代码覆盖率问题

> ID：16170555
> 
> 赞同：1
> 
> 时间：2013-04-23T13:24:49.057
> 
> 标签：c#, visual-studio-2010, unit-testing

我试图找出为什么我对以下给定代码的单元测试在 vs2010 中没有显示完整的代码覆盖率。这是我用来获取记录的方法。

```
public Records GetTestRecords(HttpWebRequest request)
{
    var Records = new Records();

    try
    {
        if (null != request)
        {
            var response = (HttpWebResponse)request.GetResponse();

            using (var sr = new StreamReader(response.GetResponseStream()))
            {
                jsonResult = sr.ReadToEnd();
            }

            Records = myHelper.Deserialize<Records>(jsonResult);
        }
    }
    catch (Exception exception)
    {

        throw (exception);
    }

    return Records;
} 
```

这是我对上述方法的单元测试

```
[TestMethod()]
    public void GetRecordsTest()
    {
        string mockjsonResult = "{\"recordId\":\"8cccf2deb-4dde-450c-97cd-a6ec\",\"billingAccountId\":\"fake\",\"userid\":81233,\"Checkid\":2533004436741,\"partName\":\"redcredetest\",\"Description\":\"not yet pulling- test\",\"productId\":\"rr43556-23re\",\"created\":\"2013-04-12T21:09:54.4890986Z\",\"enddate\":null,\"autoRenewal\":true,\"changeLog\":{\"reason\":\"dummy.\",\"state\":1,\"time\":\"2013-04-12T21:09:54.48126Z\",\"extensions\":null,\"transactionId\":null}}";

        var mocrequest = HttpWebRequest.Create("http://social.stackoverflowtest.com/Forums/getfile/2234");
        myProvider target = new myProvider (); 
        HttpWebRequest request = (HttpWebRequest)mocrequest;
        request.Method = "GET";
        request.ContentType = "application/json"; 
        Records records = GetMockRecords();
        string jsonResult = string.Empty;

        var mockWebResponse = request.GetResponse();
        var response = (HttpWebResponse)request.GetResponse();
        using (var sr = new StreamReader(response.GetResponseStream()))
        {
            jsonResult = sr.ReadToEnd();
        }

        records = MyHelper.Deserialize<Records>(mockdjsonResult);
        Assert.IsNotNull(records.ProductId);
    } 
```

我无法通过此单元测试获得完整的代码覆盖率。我在这里的单元测试做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:28:42.170

好吧，您没有测试方法的捕获路径。

编写另一个引发异常的单元测试。

我会使用`ExpectedException`属性：

```
[ExpectedException(typeof(Exception), "No exception was thrown.")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:36:50.030

以您的代码为基础，以确保增加代码覆盖率，您仍然缺少更多案例：

1.  用于测试用例的单元测试 `request == null`

2.  单元测试以确保正确抛出异常。

希望这有帮助。

# jquery - jquery 1.9 live() 到 on() 对象

> ID：16170559
> 
> 赞同：0
> 
> 时间：2013-04-23T13:24:59.653
> 
> 标签：jquery

如何更改这样的功能以支持新的 jquery 1.9？

```
$.fn.message = function (options) {
    var $obj = this;
    var customErrorMsg = 'Error occurred. Please try again or contact administrator';
    var opts = $.extend({ customErrorMsg: customErrorMsg }, options);
    handleAjaxMessages(this,opts);
    $obj.live('click',function () {
        $obj.fadeOut(500, function () {
            $obj.empty();
        });
    });
}; 
```

特别是**$obj.live() line => on()**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:06:13.250

一般从`.live()`to转换`.on()`比较简单；这样做的确切过程记录[在`.live()`](http://api.jquery.com/live/).

using 的语法`.live()`具有稍微误导的一般形式`$(selector).live(event, handler)`，因为它给人的印象是发生了一些模糊的奇妙事情，并且它恰好知道何时将匹配的元素添加到 DOM。实际上，正如大多数人所知，它实际上是将事件处理程序委托给文档。

考虑到这一点，很容易看出它是如何转换为`.on()`of:的一般形式的`$(document).on(event, selector, handler)`。

但是，这种转换取决于知道是什么`selector`。如果像问题中的示例一样，您使用任意 jQuery 对象并调用`.live()`它，您将如何转换为 using `.on()`？

答案是您需要某种方式来确定`selector`应该是什么。幸运的是，jQuery 已经为您完成了这项工作，并将其存储在`selector`结果对象的属性中。

因此，使用我们的任意 jQuery 对象`$obj`，而不是：

```
$obj.live(event, handler); 
```

我们会改为：

```
$(document).on(event, $obj.selector, handler); 
```

该属性有一些限制`selector`，主要是在链接函数以修改匹配元素集时。举个例子，下面的代码：

```
var $obj = $('#foo');
console.log($obj.selector); // #foo
console.log($obj.find('a').selector); // #foo a
console.log($obj.children('a').selector); // (an empty string) 
```

正确使用`.find()`更新选择器。但是，使用`.children()`不会，而是完全删除它（为什么不给`#foo > a`...？）。

因此，对于“简单”的 jQuery 对象（即那些仅使用选择器构建的对象），上述方法可以工作。

如果您不知道选择器，那么您可以尝试自己模拟事件委托：

```
$(document).on(event, function(event) {
    if($obj.filter($(event.target).parents().andSelf()).length) {
        // do your actions here
    }
}); 
```

这实质上检查事件的初始目标或其任何祖先是否在您的`$obj`jQuery 对象的匹配元素集中，并且仅在这种情况下执行任何操作。

*注意：该`selector`属性的存在可能记录在 API 中的某处，但我不记得曾经见过它。*

# c# - 具有 Ms 访问权限的 C# Windows 窗体应用程序无法插入数据

> ID：16170560
> 
> 赞同：1
> 
> 时间：2013-04-23T13:25:00.327
> 
> 标签：c#, sql, winforms, ms-access, oledb

我知道这个话题已经讨论了很多次，但我仍然没有解决我的问题..

好的，我有一个表格可以将注册数据插入 MS Access 数据库（2007），但是我的代码没有将数据插入数据库，并且没有错误，这里是代码：

```
OleDbConnection cn = new OleDbConnection("Provider = Microsoft.Jet.OLEDB.4.0; Data Source = Data/db_klinik.mdb");
OleDbCommand cmd = new OleDbCommand();
OleDbDataAdapter adapter = new OleDbDataAdapter(); 

 private void btnSave_Click(object sender, EventArgs e)
        {

string idCard = this.txtID.Text;
string name = this.txtName.Text;
DateTime dateBirth = this.dateEdit1.DateTime;

cn.Open();
cmd.CommandText = "Insert into tb_reg (id, name, dateBirth, blood_type) Values(@id,@name,@dateBirth)";

                    cmd.Parameters.AddWithValue("@id", idCard);
                    cmd.Parameters.AddWithValue("@name", name);                    
                    cmd.Parameters.AddWithValue("@dateBirth", dateBirth.ToString());

adapter.InsertCommand = cmd;
                    int result = cmd.ExecuteNonQuery();

                    if (result > 0)
                        MessageBox.Show("Succesfully added");
                    else
                        MessageBox.Show("try again");
                    cn.Close();
         } 
```

消息框总是显示“成功添加”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:55:53.020

我的一个项目中有这样的东西。也许它对你有用：

```
string insertString = string.Format(CultureInfo.InvariantCulture, "INSERT INTO tb_reg VALUES ('{0}', '{1}', '{2}', {3})", idCard, name, dateBirth, blood_type); 
OleDbCommand cmd = new OleDbCommand(insertString, new OleDbConnection("Provider = Microsoft.Jet.OLEDB.4.0; Data Source = Data/db_klinik.mdb"));
cmd.Connection.Open();

int numberAdded = cmd.ExecuteNonQuery();

if (numberAdded < 1)
{
     //do something, the data was not added
}
else
{
     //be happy :)
}
cmd.Connection.Close(); 
```

正如我所说，这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:05:24.733

OleDB 提供程序不支持命名参数。将您的 SQL 更改为

```
cmd.CommandText = @"Insert into tb_reg (id, name, dateBirth, blood_type)
                    Values(?,?,?,?)"; 
```

您可以在创建参数时为其命名，但它会`?`按照将它们添加到命令中的顺序将它们分配给占位符。

另请注意，您缺少`blood_type`.

无论您做什么，都不要更改为使用字符串连接。[它为SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击打开了大门。

# mysql - Symfony2 / 学说关系映射

> ID：16170566
> 
> 赞同：0
> 
> 时间：2013-04-23T13:25:14.070
> 
> 标签：mysql, symfony, doctrine, entity-relationship

我正在使用 syfmony2 框架构建我的第一个应用程序。现在我坚持一点关于如何从我的数据库中获取数据。

首先是我的表格（仅重要字段）

**＃ 顾客**

客户 ID | 情报 | 人工智能 | PK

**＃ 文章**

article_id | 情报 | 人工智能 | PK

号码 | VARCHAR

**# customer_article**（两个字段都构建 PK）

客户 ID | 情报 | PK

article_id | 情报 | PK

现在我想执行一个简单的查询，如下所示：

```
SELECT 
   ca.article_id, a.number 
FROM 
   customer_article AS ca
LEFT JOIN 
   article AS a ON a.article_id = ca.article_id
WHERE 
   ca.customer_id = {customer_id} 
```

据我了解文档最好的方法是在我的实体 php 文件中进行关系映射。

客户.php

文章.php

CustomerArticle.php

但我很困惑该做什么以及朝哪个方向。（[http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html)）

在我看来，这一定是正确的关系

客户到客户文章是一对多（单向）关系

CustomerArticle 到 Customer 是多对一（单向）关系

文章到客户文章是一对多（单向）关系

CustomerArticle to Article 是多对一（单向）关系

在这一点上是对的吗？

现在是否有必要在每个实体文件中进行 (4) 关系映射？还是我只需要一种方式，例如客户到客户文章（一对多 - 单向）和文章到客户文章（一对多 - 单向）

不幸的是，“一到五月，单向”是唯一一个在教义参考页面上没有适当示例的。

他们写道：“从 Doctrine 的角度来看，它被简单地映射为单向多对多，其中一个连接列上的唯一约束强制执行一对多基数”

这是否意味着我只需要像页面的“单向多对多”部分那样进行映射？

很抱歉有很多问题。

我在文档中阅读了很多内容，但我无法自己回答这些问题。

谢谢你的帮助。

**更新 26.04.2013**

不幸的是，即使在 Lighthart 的帮助和阅读 Doctrine 文档的帮助下，我也无法让它工作。

我认为向您提供有关我的表格和代码的更多详细信息会很有帮助。也许有人可以给我基本的答案，所以我最终理解了它背后的概念。

**我的表格和一些示例条目**

```
Table: customer (PK: customer_id)
+-------------+--------+----------+-------------------+------+-----------+
| customer_id | number | password | email             | salt | is_active |
+-------------+--------+----------+-------------------+------+-----------+
| 1           | CU0001 | 43t9wef  | test@example.com  | test | 1         |
| 2           | CU0002 | 32rk329  | test2@example.com | test | 1         |
+-------------+--------+----------+-------------------+------+-----------+

Table: article (PK: article_id)
+-------------+---------+
| article_id  | number  |
+-------------+---------+
| 1           | TEST-01 |
| 2           | TEST-02 |
| 3           | TEST-03 |
| 4           | TEST-04 |
| 5           | TEST-05 |
+-------------+---------+ 
```

**自从我第一次发帖以来我做了什么？**

*   删除 CustomerArticle.php
*   删除 customer_article 表
*   向客户（和文章）实体添加多对多关系

**这就是实体文件此时的样子（没有方法）**

客户.php

```
<?php
namespace Test\ExampleBundle\Entity;

use Symfony\Component\Security\Core\User\UserInterface;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="customer")
 */
class Customer implements UserInterface
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $customer_id;

/**
 * @ORM\ManyToMany(targetEntity="Article", inversedBy="customers")
 * @ORM\JoinTable(name="customer_article",
 *  joinColumns={ @ORM\JoinColumn(name="customer_id", referencedColumnName="customer_id" ) }
 * )
 */
private $articles;

/**
 * @ORM\Column(type="string", length=255, nullable=false, unique=true)
 */
protected $number;

/**
 * @ORM\Column(type="string", length=255, nullable=false)
 */
protected $password;

/**
 * @ORM\Column(type="string", length=255, nullable=true)
 */
protected $email;

/**
 * @ORM\Column(type="string", length=255)
 */
protected  $salt;

/**
 * @ORM\Column(name="is_active", type="boolean")
 *
 */
protected  $isActive;

// ... methods
} 
```

文章.php

```
<?php
namespace Test\ExampleBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="article")
 */
class Article
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $article_id;

/**
 * @ORM\ManyToMany(targetEntity="Customer", mappedBy="articles")
 */
private $customers;

/**
 * @ORM\Column(type="string", length=255, nullable=false, unique=true)
 */
protected $number;

// ... methods
} 
```

当我尝试执行时：

```
php app/console doctrine:schema:update --force 
```

我收到以下消息

```
[Doctrine\ORM\ORMException]
Column name `id` referenced for relation from    Test\ExampleBundleBundle\Entity\Customer towards Test\ExampleBundleBundle\Entity\Article does not exist. 
```

我不知道为什么学说要使用列名“id”。我阅读了有关此错误的内容并添加了“JoinColumns”-Code，但没有帮助。

**我的目标是什么？**

我将一些 csv 文件中的数据导入到表中：“customer”、“article”以及当前不存在的表“customer_article”。

在我的应用程序中，每个客户都有几篇参考他的文章。所以表格看起来像这样

```
customer_article
+-------------+------------+
| customer_id | article_id |
+-------------+------------+
| 1           | 1          |
| 1           | 2          |
| 1           | 5          |
| 2           | 2          |
| 2           | 5          |
+-------------+------------+ 
```

这不是商店或类似的东西。这很难解释，所以首先只需要知道每个客户都有未定义数量的相关文章。

现在我必须能够使用 tthe customer_id 获取与一位客户相关的所有文章。（看我上面开始帖子中的示例 sql 语句）

我希望你能帮助我。

非常感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:52:56.837

这看起来真的像客户和文章的双向多对多。您将构建的实体是 Customer.php 和 Article.php，您可以通过注释在这些文件中指定多对多，或者根据您的偏好在教义.orm.yml 中指定。

Doctrine 将为您制作中间表（customer_article）并进行管理。

您将使用 DQL：

```
$query = $em->createQuery("SELECT a FROM Article a JOIN a.customer c");
$users = $query->getResult(); 
```

然后，您将文章作为实体处理，并调用 article.getCustomer() 以获取与文章关联的客户列表。

这是一个与 SQL 完全不同的范例，需要一些时间来适应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T17:52:40.520

你的映射很糟糕。您指定可连接但不指定反向连接列。尝试：

```
 /**
  * @ManyToMany(targetEntity="Article")
  * @JoinTable(name="customer_article",
  *      joinColumns={@JoinColumn(name="Customer_id", referencedColumnName="cusomter_id")},
  *      inverseJoinColumns={@JoinColumn(name="Article_id", referencedColumnName="article_id")}
  *      )
  */ 
```

顺便说一句，将主键映射到“id”以外的东西有点不寻常。

# java - 无法在 Spring MVC 控制器测试中模拟服务类

> ID：16170572
> 
> 赞同：54
> 
> 时间：2013-04-23T13:25:41.313
> 
> 标签：java, spring, spring-mvc, mocking, mockito

我有一个 Spring 3.2 MVC 应用程序，并且正在使用 Spring MVC 测试框架来测试我的控制器操作的 GET 和 POST 请求。我正在使用 Mockito 来模拟服务，但发现模拟被忽略了，并且正在使用我的实际服务层（因此，数据库被命中）。

我的控制器测试中的代码：

```
package name.hines.steven.medical_claims_tracker.controllers;

import static org.mockito.Matchers.isA;
import static org.mockito.Mockito.when;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.model;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.redirectedUrl;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.view;
import name.hines.steven.medical_claims_tracker.domain.Policy;
import name.hines.steven.medical_claims_tracker.services.PolicyService;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.web.WebAppConfiguration;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.setup.MockMvcBuilders;
import org.springframework.web.context.WebApplicationContext;

@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration({ "classpath:/applicationContext.xml", "classpath:/tests_persistence-applicationContext.xml" })
public class PolicyControllerTest {

    @Mock
    PolicyService service;

    @Autowired
    private WebApplicationContext wac;

    private MockMvc mockMvc;

    @Before
    public void setup() {
        this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();

        // this must be called for the @Mock annotations above to be processed.
        MockitoAnnotations.initMocks(this);
    }

    @Test
    public void createOrUpdateFailsWhenInvalidDataPostedAndSendsUserBackToForm() throws Exception {
        // Post no parameters in this request to force errors
        mockMvc.perform(post("/policies/persist")).andExpect(status().isOk())
            .andExpect(model().attributeHasErrors("policy"))
            .andExpect(view().name("createOrUpdatePolicy"));
    }

    @Test
    public void createOrUpdateSuccessful() throws Exception {

        // Mock the service method to force a known response
        when(service.save(isA(Policy.class))).thenReturn(new Policy());

        mockMvc.perform(
                post("/policies/persist").param("companyName", "Company Name")
                .param("name", "Name").param("effectiveDate", "2001-01-01"))
                .andExpect(status().isMovedTemporarily()).andExpect(model().hasNoErrors())
                .andExpect(redirectedUrl("list"));
    }
} 
```

你会注意到我有两个上下文配置文件；这是一个 hack，因为如果我无法阻止控制器测试到达实际的服务层，那么该服务层可能会将其存储库指向测试数据库。我还没有到无法再摆脱这种黑客攻击并且需要能够正确模拟我的服务层的地步。

为什么`when(service.save(isA(Policy.class))).thenReturn(new Policy());`没有在 PolicyService 中启动和模拟 save 方法？我在某处错过了一些模拟配置吗？我需要在 Spring 配置中添加什么吗？到目前为止，我的研究仅限于谷歌搜索“spring mvc test mockito not working”，但这并没有给我太多的继续。

谢谢。

* * *

### 更新 1

你是对的@tom-verelst，我指的`PolicyService service;`是我的测试中的那一行，所以里面的服务`MockMvc`当然是由 Spring 注入的。

我做了一些研究，发现[一篇博客文章](http://www.jayway.com/2012/02/25/mockito-and-dependency-injection/)很好地解释了`@InjectMocks`它的用途。

然后我尝试使用注释`private MockMvc mockMvc`，`@InjectMocks`但仍然遇到同样的问题（即，里面的服务*没有*像我预期的那样`MockMvc`被嘲笑）。我在调试过程中调用了 save 方法时添加了堆栈跟踪（与模拟服务中对 save 方法的期望调用相反）。*`PolicyServiceImpl`*

 *```
Thread [main] (Suspended (breakpoint at line 29 in DomainEntityServiceImpl) PolicyServiceImpl(DomainEntityServiceImpl<T>).save(T) line: 29

NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
Method.invoke(Object, Object...) line: 597  
AopUtils.invokeJoinpointUsingReflection(Object, Method, Object[]) line: 317
ReflectiveMethodInvocation.invokeJoinpoint() line: 183  
ReflectiveMethodInvocation.proceed() line: 150  
TransactionInterceptor$1.proceedWithInvocation() line: 96
TransactionInterceptor(TransactionAspectSupport).invokeWithinTransaction(Method, Class, TransactionAspectSupport$InvocationCallback) line: 260  
TransactionInterceptor.invoke(MethodInvocation) line: 94
ReflectiveMethodInvocation.proceed() line: 172  
JdkDynamicAopProxy.invoke(Object, Method, Object[]) line: 204
$Proxy44.save(DomainEntity) line: not available 
PolicyController.createOrUpdate(Policy, BindingResult) line: 64
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
Method.invoke(Object, Object...) line: 597  
ServletInvocableHandlerMethod(InvocableHandlerMethod).invoke(Object...) line: 219
ServletInvocableHandlerMethod(InvocableHandlerMethod).invokeForRequest(NativeWebRequest, ModelAndViewContainer, Object...) line: 132    
ServletInvocableHandlerMethod.invokeAndHandle(ServletWebRequest, ModelAndViewContainer, Object...) line: 104    
RequestMappingHandlerAdapter.invokeHandleMethod(HttpServletRequest, HttpServletResponse, HandlerMethod) line: 746   
RequestMappingHandlerAdapter.handleInternal(HttpServletRequest, HttpServletResponse, HandlerMethod) line: 687   
RequestMappingHandlerAdapter(AbstractHandlerMethodAdapter).handle(HttpServletRequest, HttpServletResponse, Object) line: 80 
TestDispatcherServlet(DispatcherServlet).doDispatch(HttpServletRequest, HttpServletResponse) line: 925  
TestDispatcherServlet(DispatcherServlet).doService(HttpServletRequest, HttpServletResponse) line: 856   
TestDispatcherServlet(FrameworkServlet).processRequest(HttpServletRequest, HttpServletResponse) line: 915   
TestDispatcherServlet(FrameworkServlet).doPost(HttpServletRequest, HttpServletResponse) line: 822
TestDispatcherServlet(HttpServlet).service(HttpServletRequest, HttpServletResponse) line: 727
TestDispatcherServlet(FrameworkServlet).service(HttpServletRequest, HttpServletResponse) line: 796
TestDispatcherServlet.service(HttpServletRequest, HttpServletResponse) line: 66
TestDispatcherServlet(HttpServlet).service(ServletRequest, ServletResponse) line: 820
MockFilterChain$ServletFilterProxy.doFilter(ServletRequest, ServletResponse, FilterChain) line: 168
MockFilterChain.doFilter(ServletRequest, ServletResponse) line: 136
MockMvc.perform(RequestBuilder) line: 134   
PolicyControllerTest.createOrUpdateSuccessful() line: 67
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
Method.invoke(Object, Object...) line: 597  
FrameworkMethod$1.runReflectiveCall() line: 44  
FrameworkMethod$1(ReflectiveCallable).run() line: 15    
FrameworkMethod.invokeExplosively(Object, Object...) line: 41
InvokeMethod.evaluate() line: 20    
RunBefores.evaluate() line: 28  
RunBeforeTestMethodCallbacks.evaluate() line: 74    
RunAfterTestMethodCallbacks.evaluate() line: 83 
SpringRepeat.evaluate() line: 72    
SpringJUnit4ClassRunner.runChild(FrameworkMethod, RunNotifier) line: 231
SpringJUnit4ClassRunner.runChild(Object, RunNotifier) line: 88
ParentRunner$3.run() line: 193  
ParentRunner$1.schedule(Runnable) line: 52  
SpringJUnit4ClassRunner(ParentRunner<T>).runChildren(RunNotifier) line: 191
ParentRunner<T>.access$000(ParentRunner, RunNotifier) line: 42
ParentRunner$2.evaluate() line: 184 
RunBeforeTestClassCallbacks.evaluate() line: 61 
RunAfterTestClassCallbacks.evaluate() line: 71  
SpringJUnit4ClassRunner(ParentRunner<T>).run(RunNotifier) line: 236
SpringJUnit4ClassRunner.run(RunNotifier) line: 174  
JUnit4TestMethodReference(JUnit4TestReference).run(TestExecution) line: 50
TestExecution.run(ITestReference[]) line: 38    
RemoteTestRunner.runTests(String[], String, TestExecution) line: 467
RemoteTestRunner.runTests(TestExecution) line: 683  
RemoteTestRunner.run() line: 390    
RemoteTestRunner.main(String[]) line: 197 
```

更多研究（[Mockito Injecting Null values into a Spring bean when using @Mock?](https://stackoverflow.com/questions/16062842/mockito-injecting-null-values-into-a-spring-bean-when-using-mock)）`@InjectMocks`建议将`PolicyController`对此一无所知。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-04-25T05:33:12.930

感谢@J Andy 的思路，我意识到我在这方面走错了路。在更新 1 中，我试图将模拟服务注入到，`MockMvc`但后退一步后，我意识到这不是`MockMvc`正在测试的，而是`PolicyController`我想要测试的。

为了提供一些背景知识，我想避免在我的 Spring MVC 应用程序中对 @Controllers 进行传统的单元测试，因为我想测试仅通过在 Spring 本身中运行控制器提供的东西（例如，对控制器操作的 RESTful 调用）。这可以通过使用[Spring MVC 测试框架](http://blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/)来实现，该框架允许您在 Spring 中运行测试。

您将从我最初的问题中的代码中看到，我在`WebApplicationContext` (ie `this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();` ) 中运行 Spring MVC 测试，而我*应该*做的是独立运行。独立运行允许我直接注入我想要测试的控制器，因此可以控制如何将服务注入控制器（即强制使用模拟服务）。

这在代码中更容易解释。所以对于以下控制器：

```
import javax.validation.Valid;

import name.hines.steven.medical_claims_tracker.domain.Benefit;
import name.hines.steven.medical_claims_tracker.domain.Policy;
import name.hines.steven.medical_claims_tracker.services.DomainEntityService;
import name.hines.steven.medical_claims_tracker.services.PolicyService;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

@Controller
@RequestMapping("/policies")
public class PolicyController extends DomainEntityController<Policy> {

    @Autowired
    private PolicyService service;

    @RequestMapping(value = "persist", method = RequestMethod.POST)
    public String createOrUpdate(@Valid @ModelAttribute("policy") Policy policy, BindingResult result) {
        if (result.hasErrors()) {
            return "createOrUpdatePolicyForm";
        }
        service.save(policy);
        return "redirect:list";
    }
} 
```

我现在有以下测试类，其中成功模拟了服务并且我的测试数据库不再被命中：

```
package name.hines.steven.medical_claims_tracker.controllers;

import static org.mockito.Matchers.isA;
import static org.mockito.Mockito.when;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.model;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.redirectedUrl;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.view;
import name.hines.steven.medical_claims_tracker.domain.Policy;
import name.hines.steven.medical_claims_tracker.services.PolicyService;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.setup.MockMvcBuilders;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "classpath:/applicationContext.xml" })
public class PolicyControllerTest {

    @Mock
    PolicyService policyService;

    @InjectMocks
    PolicyController controllerUnderTest;

    private MockMvc mockMvc;

    @Before
    public void setup() {

        // this must be called for the @Mock annotations above to be processed
        // and for the mock service to be injected into the controller under
        // test.
        MockitoAnnotations.initMocks(this);

        this.mockMvc = MockMvcBuilders.standaloneSetup(controllerUnderTest).build();

    }

    @Test
    public void createOrUpdateFailsWhenInvalidDataPostedAndSendsUserBackToForm() throws Exception {
        // POST no data to the form (i.e. an invalid POST)
        mockMvc.perform(post("/policies/persist")).andExpect(status().isOk())
        .andExpect(model().attributeHasErrors("policy"))
        .andExpect(view().name("createOrUpdatePolicy"));
    }

    @Test
    public void createOrUpdateSuccessful() throws Exception {

        when(policyService.save(isA(Policy.class))).thenReturn(new Policy());

        mockMvc.perform(
                post("/policies/persist").param("companyName", "Company Name")
                .param("name", "Name").param("effectiveDate", "2001-01-01"))
                .andExpect(status().isMovedTemporarily()).andExpect(model().hasNoErrors())
                .andExpect(redirectedUrl("list"));
    }
} 
```

关于 Spring，我仍然在学习很多东西，因此欢迎任何可以改进我的解释的评论。[这篇博](http://blog.trifork.com/2012/12/11/properly-testing-spring-mvc-controllers/)文对我提出这个解决方案很有帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-10-22T06:41:53.317

我更喜欢 Mockmvc 的独立服务

提到我的工作

```
public class AccessControllerTest {

    private MockMvc mockMvc;

    @Mock
    private AccessControlService accessControlService;

    @InjectMocks
    private AccessController accessController;

    @Before
    public void setup() {
        MockitoAnnotations.initMocks(this);
        this.mockMvc =  MockMvcBuilders.standaloneSetup(accessController).build();
    }

    @Test
    public void validAccessControlRequest() throws Exception {
        Bundle bundle = new Bundle();
        bundle.setAuthorized(false);
        Mockito.when(accessControlService.retrievePatient(any(String.class)))
         .thenReturn(bundle);

        mockMvc.perform(get("/access/user?user=3")).andExpect(status().isOk());
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-06T17:27:58.303

这部分，11.3.6 Spring MVC 测试框架，在 Spring 文档[11 中。测试](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html)谈到它，但不知何故不清楚。

让我们继续文档中的示例进行解释。示例测试类如下所示

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration("test-servlet-context.xml")
public class AccountTests {

    @Autowired
    private WebApplicationContext wac;

    private MockMvc mockMvc;

    @Autowired
    private AccountService accountService;

    // ...

} 
```

假设您有 org.example.AppController 作为控制器。在 test-servlet-context.xml 中，您需要拥有

```
<bean class="org.example.AppController">
    <property name="accountService" ref="accountService" />
</bean>

<bean id="accountService" class="org.mockito.Mockito" factory-method="mock">
    <constructor-arg value="org.example.AccountService"/>
</bean> 
```

该文档缺少控制器的接线部分。如果您使用字段注入，则需要更改 accountService 的 setter 注入。另外，请注意，constructor-arg 的值（此处为 org.example.AccountService）是一个接口，而不是一个类。

在 AccountTests 的设置方法中，您将拥有

```
@Before
public void setup() {
    this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();

    // You may stub with return values here
    when(accountService.findById(1)).thenReturn(...);
} 
```

测试方法可能看起来像

```
@Test
public void testAccountId(){
    this.mockMvc.perform(...)
    .andDo(print())
    .andExpect(...);  
} 
```

andDo(print()) 很方便，做“import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-04-01T08:50:37.120

如果在 SpringBoot 上使用 Springs 自己的[@MockBean](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/MockBean.html)。- 正如码头所说：

> 在上下文中定义的任何现有的相同类型的单个 bean 都将被模拟替换。如果没有定义现有的 bean，将添加一个新的。

```
 @RunWith(SpringRunner.class)
 public class ExampleTests {

     @MockBean
     private ExampleService service; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-24T15:46:49.690

这可能是 Spring 和 Mockito 都尝试注入 bean 的问题。我能想到的避免这些问题的一种方法是使用 Spring [ReflectionTestUtils](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/test/util/ReflectionTestUtils.html)手动注入服务模拟。

在这种情况下，您的**setup()**方法看起来像这样

```
@Before
public void setup() {
    this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();

    // this must be called for the @Mock annotations above to be processed.
    MockitoAnnotations.initMocks(this);

    // TODO: Make sure to set the field name in UUT correctly
    ReflectionTestUtils.setField( mockMvc, "service", service );
} 
```

PS 您的命名约定有点偏离恕我直言，我假设 mockMvc 是您要测试的类（UUT）。我会改用以下名称

```
@Mock PolicyService mockPolicyService;
@InjectMocks Mvc mvc; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-24T14:22:02.883

使用@WebMvcTest 的最新春季版本还有另一种解决方案。下面的例子。

```
@RunWith(SpringRunner.class)
@WebMvcTest(CategoryAPI.class)
public class CategoryAPITest {

@Autowired
private MockMvc mvc;

@MockBean
CategoryAPIService categoryAPIService;

@SpyBean
Utility utility;

PcmResponseBean responseBean;

@Before
public void before() {
    PcmResponseBean responseBean = new PcmResponseBean("123", "200", null, null);
    BDDMockito.given(categoryAPIService.saveCategory(anyString())).willReturn(responseBean);
}

@Test
public void saveCategoryTest() throws Exception {
    String category = "{}";
    mvc.perform(post("/api/category/").content(category).contentType(MediaType.APPLICATION_JSON))
            .andExpect(status().isOk()).andExpect(jsonPath("messageId", Matchers.is("123")))
            .andExpect(jsonPath("status", Matchers.is("200")));
  }

} 
```

这里我们只加载 CategoryAPI 类，它是一个 Spring REST 控制器类，其余都是模拟的。Spring 有自己的注解版本，例如 @MockBean 和 @SpyBean，类似于 mockito @Mock 和 @Spy。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-23T13:42:16.293

你正在为 创造一个模拟，但据我所知`PolicyService`，你并没有将它注入你的。`MockMvc`这意味着`PolicyService`将调用 Spring 配置中定义的而不是模拟。

通过设置将模拟注入`PolicyService`到您的模拟中`MockMvc`，或者查看[Springockito](http://www.springockito.org/)以注入模拟。*

# wcf - WCF Web 服务连接测试实用程序

> ID：16170578
> 
> 赞同：0
> 
> 时间：2013-04-23T13:26:15.733
> 
> 标签：wcf, c#-4.0, authentication

我正在创建一个可用于更改 Web 服务配置的配置实用程序。我这样做是因为我的应用程序有很多 exes 并且包含很多配置文件。

这也用于更改 Web 服务的配置，因为有很多服务，我需要一种简单的方法来通过实用程序更改连接字符串中的服务器和虚拟目录。

所以我想要做的是使用服务 url 并尝试连接到它以检查是否可以建立连接而无需创建代理。

到目前为止，这就是我正在做的事情：

```
string url = "http://localhost/VirtualDirectory/Service.svc";
HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;

request.Credentials = new NetworkCredential("UserName", "Password");

using(HttpWebResponse response = request.GetResponse() as HttpWebResponse)
{
    if (response.StatusCode == HttpStatusCode.OK)
    { MessageBox.Show("Connection successful!"); }
    else
    { MessageBox.Show("Connection failed!!!"); }
} 
```

但我收到**“远程服务器返回错误：（401）未经授权。”** 异常状态为**“System.Net.WebExceptionStatus.ProtocolError”**

但是，当我尝试使用浏览器中的这些凭据连接到 Web 服务时，我能够连接并查看服务 xml。

我不确定这是否是我做错了，或者 IIS 方面是否有任何问题（IIS 7.5）。我看到对于该服务，在 IIS 中启用了匿名身份验证并禁用了 rest。

我无法从另一个 SO 问题中得到解决方案。但它可能是重复的。在这种情况下，请提供链接。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T10:27:17.250

我也想出了问题和解决方案。我没有意识到该服务需要一个我没有提供的“授权”自定义标头，因为我没有注意到它。我的错。

以下是对我有用的代码：

```
string url = @"http://" + ServerName + @"/" + VirtualDirectoryName
    + @"/Service.svc";
HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;

NetworkCredential nc = new NetworkCredential("Username", "Password");
request.Credentials = nc;
string credentials = "Username:Password";
request.Headers.Add("Authorization", "Basic " 
    + Convert.ToBase64String(Encoding.Default.GetBytes(credentials)));
CredentialCache cache = new CredentialCache();
cache.Add(new Uri(url), "Basic", nc);
request.Credentials = cache;
request.PreAuthenticate = true;

bool pingSuccess = false;
var ping = new Ping();
PingReply reply;
try
{
    reply = ping.Send(ServerName);
    if (reply.Status == IPStatus.Success)
        pingSuccess = true;
}
catch
{
    string msg = "Connection to the server failed.\nCheck server name.";
    MessageBox.Show(msg, _error, MessageBoxButtons.OK, MessageBoxIcon.Error);
    return;
}
using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
{
    if (response.StatusCode == HttpStatusCode.OK)
    {
        MessageBox.Show("Server connection successful!", 
            _info, 
            MessageBoxButtons.OK, 
            MessageBoxIcon.Information);
    }
    else
    {
        if (pingSuccess)
        {
            string msg = "Server is Available but connection failed." 
                + "\nCheck virtual directory name.";
            MessageBox.Show(msg, 
                _error, 
                MessageBoxButtons.OK, 
                MessageBoxIcon.Error);
        }
    }
} 
```

# c# - 指南的对称映射

> ID：16170582
> 
> 赞同：-1
> 
> 时间：2013-04-23T13:26:23.730
> 
> 标签：c#, algorithm, encryption-symmetric

是否有现有的安全实现来实现以下目标：

```
 Guid original = Guid.NewGuid();

Guid inverted = MysteryImplementation(original, salt); // salt is some sort of input

Guid shouldBeOriginal = MysteryImplementation(inverted, salt);

Assert.AreEqual(original, shouldBeOriginal, "MysteryImplementation did no work"); 

```

编辑：

由于这被否决（尽管我有点不确定为什么），我认为需要更多背景：

在很远的地方，有一个应用程序，其中主键存储为 GUID。在此应用程序中，这些 GUID 向 Web 客户端公开。

在我追求改善现状的过程中，我想到了将这些 GUID 与用户会话数据进行映射，以降低主键意外/恶意泄漏的风险。映射这些 GUID 具有额外的好处，它还可以更轻松地为这些 GUID 引用的对象实现工作副本。

这就是我决定开始寻找“安全”方式来映射 GUID 的原因。

回答评论：

- 与所有其他 GUID 相比，映射应该保持全局​​唯一性（我不希望那些映射的 GUID 与现有的 GUID 发生冲突）。

- 在这种情况下，“安全”意味着在不知道密钥的情况下应该不可能找出原始 GUID（一个典型的加密请求，我认为这意味着映射的 GUID 应该具有标准化分布）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T13:46:14.010

您可以轻松地做到这一点：

```
Guid original = Guid.NewGuid();
byte[] encrypted = Encrypt(original, key);
Guid decrypted = Decrypt(encrypted, key); 
```

从 ROT13 开始，任何对称编码算法都可以。然而，这不是你要求的。您要求的是一种具有两个属性的算法：

*   加密和解密算法完全相同。
*   GUID 的加密形式*也是一个有效的全局唯一标识符*。

有很多算法的加密和解密过程是不同的，但实际上它们完全相同的地方并不多。加密和解密相同的最简单算法是：

*   生成与明文长度相同的加密强度随机一次性填充。
*   将明文与 pad 进行异或以产生密文。
*   要解密，请将密文与 pad 进行异或。

但是**，该算法不一定保持密文是有效 GUID 的属性**。

您能解释一下为什么需要密文成为有效的 GUID 吗？GUID 必须具有的属性是它必须是*全局唯一的*；您打算如何保证全球唯一性？是什么阻止了您将自己生成的一个 GUID 加密*为其他人在您不知情的情况下生成的另一个 GUID？*

更一般地说，您能解释*一下您首先要解决的问题吗？*在我看到有人试图使用密码学的十次中，有九次是他们将其用于错误的目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T13:27:58.333

是的。那些神秘的算法被称为[对称密码](http://en.wikipedia.org/wiki/Symmetric-key_algorithm)。你所说的*盐*只是算法的关键。

但是，从中获取 GUID 可能会有点困难，因为加密算法通常在数据流或数据块上运行，并且通过修改 GUID 会损害它的 GU 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:29:41.967

任何对称加密都可以

[http://msdn.microsoft.com/en-us/library/as0w18af(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/as0w18af(v=vs.110).aspx)

# java - 将数组从选择列表传递到动作类

> ID：16170587
> 
> 赞同：0
> 
> 时间：2013-04-23T13:26:39.580
> 
> 标签：java, javascript, html, struts, selectlist

我有一个动态创建的多选列表，它从另一个选择列表中填充。

```
 <select multiple size=6 width=150 style="width:150px" id="ToLB" name="ToLB" >
  </select> 
```

我将选择列表的值保存为

```
 function arraycreated()
            {               
                var x=document.getElementById("ToLB"); 
                var arraylists = new Array();
                for (i=0;i<x.length;i++) 
                { 
                    arraylists.push(x.options[i].text);
                }   
arraylists.toString();
<% String[] arraylist = request.getParameterValues("arraylists"); %> 
```

甚至我正在设置一个隐藏的输入字段

```
 <input type="hidden" name="arraylist" value="<%request.getParameterValues("arraylists"); %>" /> 
```

有一个我称之为数组的表格

```
private String[] arraylist;
public String[] getArraylist() {
    return arraylist;
}

public void setArraylist(String[] arraylist) {
    this.arraylist = arraylist;
} 
```

最后在行动课上把它召回

```
String[] arraylist = createForm.getArraylist();
int arraylength = arraylist.length;
System.out.println("Array -->"+ arraylength); 
```

但它根本没有通过数组。我做错了什么。谢谢 ////

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:32:41.593

看起来它缺少 html 中的 ID 标签

# javascript - PHP代码点火器

> ID：16170590
> 
> 赞同：0
> 
> 时间：2013-04-23T13:26:49.047
> 
> 标签：javascript, codeigniter

我无法从我的视图 php 页面调用我的外部 js 文件。js文件保存在根文件夹的“resources”文件夹中，即“root/resources/scripts/myfile.js”，就像“root/application”和“root/system”文件夹一样。

所以在我的视图文件夹中的一个 php 文件中，我正在使用以下代码：

```
<script type="text/javascript" 
        src="<?php echo base_url();?>resources/scripts/welcome.js"> 
```

这个 php 文件位于“root/application/views/welcome.php”中，但我的页面仍然无法与 java 脚本链接，所以我被卡住了。

问候 k..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:38:54.797

尝试这个：

```
<script src="<?= base_url('resources/scripts/myfile.js')?>"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:18:51.717

查看您的问题和问题下方的评论，您似乎在一个示例中使用“资源”，在另一个示例中使用“资源”。

修复后，查看页面源代码（我使用 FireFox，因为它使链接可点击），搜索“welcome.js”。找到后，单击该文件的链接。如果您看到 javascript，则表示已找到该文件，或者您将看到 404 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-13T09:06:20.203

首先检查资源文件夹是否可用，

java脚本文件可用，文件命名相同小写或大写，服务器对文件和文件夹有公共权限。

顺便说一句，您的代码缺少结束标记

```
</script> 
```

# java - 如何使用 java 覆盖 jsessionid cookie 值

> ID：16170591
> 
> 赞同：2
> 
> 时间：2013-04-23T05:22:32.593
> 
> 标签：java

在我的应用程序中，我想将`jsessionid`值更新`sessionid`为**退出**或`null`。我正在执行以下操作来做这件事，但它不能正常工作。

```
Cookie cookie = new Cookie("JSESSIONID","quit");
cookie.setDomain(domain);
cookie.setPath("/"+path);
cookie.setMaxAge(0);
reponse.addCookie(cookie); 
```

并尝试在标题中使用 set-cookie 。我无法更改 cookie 值。暂时，我用 javascript 覆盖，但如果我们将 cookie 启用为 httpOnly，它将不起作用；还有一个问题，如果 jsessionid 被标记为安全，我是否可以更改它的值。

我有多个应用程序，因此创建了多个 jsessionid，我尝试通过添加上面的代码来响应更新来设置/更新这些值。

当我在 Firefox 中观察到时，`jsessionid`它仍然存在并继续下一个请求周期。我怎样才能`jsessionid`通过java更改值。我可以使用 javascript 进行更新，但使用 HttpOnly 标志启用 cookie 为 true。

# javascript - 除非清除缓存，否则 drgrid 不会渲染

> ID：16170592
> 
> 赞同：0
> 
> 时间：2013-04-23T13:26:53.287
> 
> 标签：javascript, dojo, dgrid

我有一个相当大的 dojo 项目，我在其中使用 dgrid 显示来自本地存储的数据。*除非首先清除浏览器缓存，否则某些*drgid 不会呈现。这体现在 IE10 和 Chrome 中，但不是 Safari。没有 JS 错误。有人遇到过这个吗？

这是它不工作时的样子 ![在此处输入图像描述](https://i.stack.imgur.com/LD5pV.png)

这是它工作的时候 ![在此处输入图像描述](https://i.stack.imgur.com/wEwg0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T21:10:20.357

我想到了。我并没有等待确定 DOM 已经准备好。所以有时它有效，有时它没有。腼腆的笑容。

# qt - 如何在 QTableWidget 中保持垂直滚动位置

> ID：16170595
> 
> 赞同：0
> 
> 时间：2013-04-23T13:27:11.957
> 
> 标签：qt, scrollbar

这是一个非常简单的问题，我找不到解决方案：

这是我的代码：

```
qint32 pos = ui->twShow->verticalScrollBar()->value();
ui->twShow->blockSignals(true);    

//Code for updating the contents QTableWidget twShow, this is done by erasing all cells and adding them again, in case it matters.

ui->twShow->blockSignals(false);
if (pos > 0){
    ui->twShow->verticalScrollBar()->setValue(pos);
} 
```

我想要完成的只是保持垂直滚动位置。但是 setValue 函数忽略值 pos （我通过在指令之前和之后打印值以及两次它的 cero 来检查）。

我也试过： QScrollBar *bar = ui->twShow->verticalScrollBar(); // 和之前一样的代码 ui->twShow->setVerticalScrollBar(bar); //这一行使程序崩溃

但是最后一行使程序崩溃（我已经通过评论检查过它，它工作正常）。

任何建议将不胜感激...

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:57:54.510

```
 QTableWidget * tw;
 int            desiredRow;

 // before update

 desiredRow = tw->row(tw->itemAt(1,1));

 ...
 // update code
 ...

 tw->scrollToItem( tw->item( desiredRow, 0), 
  QAbstractItemView::EnsureVisible | QAbstractItemView::PositionAtTop ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T06:35:17.917

QAbstractItemView::EnsureVisible = 0。“或”标志将结果转换为不允许作为 scrollToItem 方法的参数的整数。另一方面，枚举不打算用作组合标志。

# java - jsp页面报错怎么解决？

> ID：16170597
> 
> 赞同：1
> 
> 时间：2013-04-23T13:27:15.827
> 
> 标签：java, eclipse, jsp, liferay

我在**java**文件中有字符串类型方法，它包含字符串数组，当我尝试调用**jsp**时，它给了我一个错误。

```
public String[] ordering(ActionRequest actionRequest,ActionResponse actionResponse)  
    throws IOException,PortletException 
```

JSP：

```
<% 
  TestiPortlet obj=new TestiPortlet();
  String str[]=obj.ordering(actionRequest,actionResponse);
  out.println(str[0]);
%> 
```

错误：

```
Multiple annotations found at this line:- actionResponse cannot be resolved to a     variabl-actionRequest cannot be resolved to a variable

    Stacktrace:
    javax.portlet.PortletException: org.apache.jasper.JasperException: An exception occurred processing JSP page /html/testi/list.jsp at line 8

    5: 
    6: <% 
    7:   TestiPortlet obj=new TestiPortlet();
    8:   String str[]=obj.ordering(actionRequest,actionResponse);
    9:   out.println(str[0]);
    10: %>
    11: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T05:03:58.513

错误说明了一切，您的 jsp 没有找到`actionRequest`和`actionResponse`反对。

这些对象需要通过在 JSP 的顶部包含以下代码来包含在 JSP 中：

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet"%>

<portlet:defineObjects /> 
```

正如@RasabihariKumar 正确提到的那样，这不是`Portlet`应该如何使用类的方式。对于测试或学习，这可能很好，但对于实际项目，我认为这不是一个好的做法，因为这些是昂贵的对象，而且使用 Portlet 作为实用程序类来处理这样的数据似乎并不正确，它打破了[凝聚力](http://www.ehow.com/info_8717133_cohesion-software-engineering.html)的原则。

Portlet 类应该用于发送请求（通过使用`renderURL`or`actionURL`或`resourceURL`）并获得响应，就像我们对 servlet 所做的那样。

### [在他的评论](https://stackoverflow.com/questions/16170597/how-to-solve-error-of-jsp-page/16183736?noredirect=1#comment23135838_16183736)后编辑：

您可以通过[liferay](/questions/tagged/liferay "显示标记为“liferay”的问题") wiki 获得有用的学习资源链接，我会推荐开发人员指南和书籍`Liferay in Action`，以及`Portlet in Action`在 liferay 中开发 portlet 的最佳方式。

目前，最简单的方法是在您的 portlet 的方法中编写代码，`doView`当您的 portlet JSP 页面被渲染时，该方法将被调用，只需从您的数据库中检索列表`doView`并作为请求属性输入：

```
renderRequest.setAttribute("listAttr", listFromDatabase) 
```

然后`listAttr`在 JSP 中使用它作为：

```
String[] str = (String[]) renderRequest.getAttribute("listAttr"); 
```

浏览由 liferay 开发的[示例 portlet](https://github.com/liferay/liferay-plugins/tree/master/portlets "Liferay 上的示例 portlet 的源代码")的源代码也可能会有所帮助。

# c - 使用指定的初始化器时避免空初始化的空洞

> ID：16170600
> 
> 赞同：1
> 
> 时间：2013-04-23T13:27:19.383
> 
> 标签：c, gcc

我有一个这样的枚举：

```
enum {
  ID_FOO = 0,
  ID_BAR,
  ID_BAZ
} 
```

以及使用指定初始化器（如 hat）的常量数组：

```
char* arr[] = {
  [ID_FOO] = "foo stuff",
  [ID_BAR] = "bar stuff",
  [ID_BAZ] = "baz stuff",
  0
} 
```

现在，当我向枚举添加一个值时，例如在`ID_FOO`但忘记将其添加到数组之后，我会得到一个~~未初始化~~数组中的空初始化“洞”。有什么办法可以防止这种情况发生，或者至少从编译器那里得到警告？

非便携式 GCC-only 解决方案很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T13:36:25.477

一种方法是向您的枚举添加一个标记最大值，您可以使用它来验证该最大值是否与数组中的元素数相同。

```
enum {
    ID_FOO = 0,
    ID_BAR,
    ID_BAZ,
    // insert new values here

    ID_MAX
}

assert(ID_MAX == (sizeof(arr)/sizeof(arr[0]) - 1)); 
```

这是运行时检查；看看[C 编译器断言 - 如何实现？](https://stackoverflow.com/questions/807244/c-compiler-asserts-how-to-implement)有关如何获取编译时错误的想法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T13:40:45.447

您可以使用[X-Macros](http://en.wikipedia.org/wiki/X_Macro)使它们保持同步，尽管有些人可能会争论生成的代码是否漂亮。

我们的想法是获取两个结构所需的所有信息并将其放入一个宏中：

### 条目.inc

```
ENTRY(ID_FOO, "foo stuff")
ENTRY(ID_BAR, "bar stuff")
ENTRY(ID_BAZ, "baz stuff") 
```

稍后，重新定义您的宏，以便对于您需要构建的每个结构，您从数据中提取适当的部分：

### foo.c

```
/* here define what entry should be for your enums */
#define ENTRY(id, name) id,

enum {
#include "entries.inc"
};

/* and then redefine for the char array and include again */
#undef  ENTRY
#define ENTRY(id, name) [id] = name,

char* arr[] = {
  #include "entries.inc"
  0
};

int main(int argc, char* argv[]) {
  /* whatever */
} 
```

# javascript - 如何确保选定的文本不包含特定的标签/类

> ID：16170604
> 
> 赞同：3
> 
> 时间：2013-04-23T13:27:28.903
> 
> 标签：javascript

我有以下功能来添加带有选定文本的跨度标签。

```
 function Add() {
    var selObj = window.getSelection();
    var selRange = selObj.getRangeAt(0);
    var newElement = document.createElement("span");
    newElement.setAttribute("class", "cls1");
    var documentFragment = selRange.extractContents();
    newElement.appendChild(documentFragment);
    selRange.insertNode(newElement);
    selObj.removeAllRanges();
} 
```

它工作正常。但我想防止在另一个跨度中添加新的跨度。

```
 <a href="#" onclick="Add()">Add Span</a>
    <div id="content">
        Lorem ipsum dolor sit amet, <span class="cls1">consectetur adipisicing</span> elit,
    </div> 
```

如果用户选择“adipisicing elit”，我不想创建一个新跨度，因为“adipisicing”在另一个跨度内。**那么我如何知道所选文本是否包含其他跨度的任何部分？**

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:00:50.633

这是一种方法，用于测试当前选择是否*直接*属于`<span class="cls1">`. 您可以在函数的第一行之后添加它，因为它`selObj`用作起点。

```
if ("cls1"!==selObj.anchorNode.parentNode.className) { 
```

如果它必须是一个跨度：

```
if ("span"!==selObj.anchorNode.parentNode.tagName.toLowerCase()) { 
```

要确保选择的两端都在跨度之外，请同时使用`focusNode`：

```
if ("span"!==selObj.anchorNode.parentNode.tagName.toLowerCase() &&
   ("span"!==selObj.focusNode.parentNode.tagName.toLowerCase()) { 
```

结合一切：

```
if ("cls1"!==selObj.anchorNode.parentNode.className &&
    "span"!==selObj.anchorNode.parentNode.tagName.toLowerCase() && 
    "cls1"!==selObj.focusNode.parentNode.className &&
    "span"!==selObj.focusNode.parentNode.tagName.toLowerCase()) { 
```

[http://jsfiddle.net/mblase75/Zg5LW/](http://jsfiddle.net/mblase75/Zg5LW/)

[https://developer.mozilla.org/en-US/docs/DOM/Selection/anchorNode](https://developer.mozilla.org/en-US/docs/DOM/Selection/anchorNode)

[https://developer.mozilla.org/en-US/docs/DOM/Selection/focusNode](https://developer.mozilla.org/en-US/docs/DOM/Selection/focusNode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T19:06:54.747

最后我想出了如何实现这一点。总结一下，我需要检查：
1\. 选择是否在特定的类（“cls1”）元素内。
2\. 选择是否包含一个或多个特定类（“cls1”）元素。
3\. 选择是否包含特定类（“cls1”）元素的某些部分。

感谢@Blazemonger 的代码，我可以实现 1\. 和 3\. 项：

```
 if ("cls1" == selObj.anchorNode.parentNode.className || "cls1" ==                selObj.focusNode.parentNode.className)
            { return true; } 
```

还有两个我添加了以下检查 2\. 和 3\. 项目的部分：

```
 var docFrag = selRange.cloneContents();
              var childNodes = docFrag.childNodes;
              for (var i = 0; i < childNodes.length; i++) {
                 var nodee = childNodes[i];
                 if ($(nodee).hasClass("cls1") || $(nodee).find(".cls1").length > 0)
                  {  return true; }
} 
```

所以我写了一个结合两者的检查函数：

```
function ContainsDiv(selRange)
{

           var docFrag = selRange.cloneContents();
           var childNodes = docFrag.childNodes;
           for (var i = 0; i < childNodes.length; i++) {
              var nodee = childNodes[i];
              if ($(nodee).hasClass("cls1") || $(nodee).find(".cls1").length > 0)
                {  return true; }

              if ("cls1" == selObj.anchorNode.parentNode.className || "cls1" ==                selObj.focusNode.parentNode.className)
                { return true; }

} 
```

我在 Add() 中使用了这个函数：

```
function Add() {
                var selObj = window.getSelection();
                var selRng = selObj.getRangeAt(0);
                if (ContainsDiv(selRng)) {
                    return;
                }
                var newElement = document.createElement("span");
                newElement.setAttribute("class", "cls1");
                var documentFragment = selRng.extractContents();
                newElement.appendChild(documentFragment);
                selRng.insertNode(newElement);
                selObj.removeAllRanges();
            } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T13:56:14.847

```
var parentNode = selObj.parentNode;
if (parentNode.nodeName == "SPAN")
{
  //don't add
} 
```

# shell - 为什么 [ a -gt b ]（不是 [ "$a" -gt "$b" ]）似乎有效？

> ID：16170605
> 
> 赞同：2
> 
> 时间：2013-04-23T13:27:29.993
> 
> 标签：shell, unix, sh

我在 unix shell 脚本中遇到了一个问题。让我用一个非常简单的例子问你。

假设，我正在获取用户输入并比较两个数字。

```
echo "Enter the first number"
read a
echo "Enter the second number"
read b
if [ a -gt b ]---------------------->I have not used $ before variable name.
then
    echo "a is greater"
else
    echo "b is greater"
fi 
```

在这个例子中，我应该使用 $ 来获取变量的值。一不小心，我忘记了。不过，它给了我正确的结果，如何以及为什么？

我尝试使用 sh -x 文件名进行调试。但是，它在比较时没有显示任何值（因为我没有使用 $ 符号）。

shell如何决定哪个更大，反之亦然？它在内部如何运作？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T13:31:04.887

值得注意的是，如果您在数字上下文中进行比较，则可以在没有 a 的情况下*使用*它。`$`

在 bash 中：

```
if (( a > b )); then
  echo "a is greater"
else
  echo "b is greater"
fi 
```

...应该是正确的，因为`(( ))`(double parens) 进入了一个数字上下文，在该上下文中所有文本字符串都被视为变量并自动取消引用（并且在其中的操作符中，例如`>`and`<`具有其典型的算术含义，而不是执行重定向）。

你现在所做的很大程度上依赖于实现。`[ a '>' b ]`将是字母`a`和之间的字典比较`b`。`[ a -gt b ]`是算术测试。

许多 shell 根本不允许这样做。例如：

```
$ a=2; b=3; [ a -gt b ]; echo $?
-bash: [: a: integer expression expected
2 
```

值得注意的是，这在 bash 的测试上下文内部是不同的`[[ ]]`（它不带有 POSIX 语义`[ ]`）。在那里，您所做的实际上*确实*`(( ))`有效，尽管它比表格更难阅读：

```
$ a=2; b=3; [[ a -gt b ]]; echo $?
1
$ a=3; b=2; [[ a -gt b ]]; echo $?
0 
```

如果您仅限于 POSIX sh，则没有`(( ))`，但*确实*有`$(( ))`，您可以使用几乎相同的方式：

```
$ a=2; b=3; result=$(( a > b ? 1 : 0 )); echo "$result"
0
$ a=3; b=2; result=$(( a > b ? 1 : 0 )); echo "$result"
1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:53:09.007

有一个简单的解释为什么您的测试似乎有效：它盲目地执行该`else`子句。

内置没有办法向调用者报告错误，`[ ... ]`除非以非零退出状态退出。顺便说一句，非零退出状态也用于指示“假”。这意味着`if`无法区分对其条件的错误评估和错误评估，这就是为什么您的比较总是更喜欢`else`分支并因此似乎有效。您可以通过还原参数轻松地对其进行测试：

```
$ if [ b -gt a ]
then
    echo "b is greater"
else
    echo "a is greater"
fi
dash: 11: [: Illegal number: b
a is greater 
```

请注意，就`if`语句而言，打印到标准错误的错误消息仅仅是测试命令的副作用，并且完全被忽略。

# javascript - 绝对位置元素，因此它们的行为就像它们是浮动的

> ID：16170607
> 
> 赞同：0
> 
> 时间：2013-04-23T13:27:37.723
> 
> 标签：javascript, css

我想让所有这些盒子表现得像浮动一样。但是，它们不能，它们需要绝对定位才能让我与这个定位的数字进行交互。

这是我的尝试：

```
var $item = $('#wrapper div'),
    len = $item.length,
    itemWidth = $item.innerWidth(),
    winWidth = $('#wrapper').innerWidth(),
    cols = Math.floor(winWidth / itemWidth),
    moveX = itemWidth + 10;

function absPos() {
    for (var i = 0; i < len; i += 1) {
        $('.item-' + i).css({
            'position' : 'absolute',
            'left' : moveX * i
        });
    }
} 
```

我只是不知道如何包装它们以适应，以及在调整窗口大小时重新定位。

这是一个演示。[http://jsfiddle.net/Fgcqs/3/](http://jsfiddle.net/Fgcqs/3/)。如果您取消注释 absPos() 函数，您将看到我的开始。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:56:10.147

我已经编辑了你的 jsfiddle 来移动项目，就像它们是浮动的一样。它假设您的边距和宽度对于包装器中的每个 div 都是相同的，并且如果您的 css 发生变化，它将自动计算出间距的宽度和高度

```
var wrapper =  $('#wrapper'),
    items = wrapper.children('div'),
    len = items.length,
    itemWidth = items.innerWidth() + parseInt(items.css('margin-left')) + parseInt(items.css('margin-right')),
    itemHeight = items.innerHeight() + parseInt(items.css('margin-top')) + parseInt(items.css('margin-bottom'));

items.css('float', 'none');

function absPos() {
    var cols = Math.floor(wrapper.width() / itemWidth);
    items.each(function() {

        var left = ($(this).index() % cols) * itemWidth; //the bit in brackets calculates which column the div should be in (the remainder of the current index of your item divided by the number of columns per row), then you times that by item width as worked out above, you use the index as this will allow you to start at left:0

        var height = Math.floor($(this).index() / cols) * itemHeight //the bit in brackets calculates which row the div should be in, then you times that by item height as worked out above, you use the Math.floor as this will allow you to start at top:0\.  Should have really called this top!

        $(this).css({
            'position' : 'absolute', 
            'top': height,
            'left': left
        });
    });

    wrapper.height((Math.ceil(len / cols)) * itemHeight);
}

$(window).resize(function() {
    absPos();
});
absPos(); 
```

[http://jsfiddle.net/Fgcqs/12/](http://jsfiddle.net/Fgcqs/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:47:42.027

您必须同时跟踪`column index`和`row index`：一旦`column index * item width`超过`window width`，重置`column index`和增量`row index`以模拟下一行。这是这种方法的简单示例：

```
function absPos() {
    var colIndex = 0;
    var rowIndex = 0;
    for (var i = 0; i < len; i += 1) {
        if (moveX * colIndex + itemWidth > winWidth) {
            colIndex = 0;
            rowIndex++;
            top += itemHeight + 10;
        }
        var left = moveX * colIndex; 
        var top = moveY * rowIndex;
        $('.item-' + i).css({
            'position' : 'absolute',
            'left' : left,
            'top' : top
        });
        colIndex++;
    }
} 
```

[http://jsfiddle.net/N4S4L/1/](http://jsfiddle.net/N4S4L/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:51:35.530

您应该检查您的*左侧*值加上项目的宽度是否超​​过了容器的宽度，在这种情况下，请引入一个*顶部值并将**左侧*重置为 0 以开始构建新行。

# oracle - 在 Oracle 上使用 JOIN 优化 SELECT 中的计数

> ID：16170613
> 
> 赞同：5
> 
> 时间：2013-04-23T13:27:43.180
> 
> 标签：oracle, join, indexing, oracle10g

大家好 :) 我有两个表，每个表大约有 3000 万行，我正在寻求在执行计数时提高性能。

这是查询：

```
SELECT count(*)
FROM VEHICULE v
JOIN CLIENT c ON c.CL_ID = v.VE_CL_ID
WHERE v.VE_BRAND = 'MITSUBISHI'
  AND c.CL_COUNTRY = 'SPAIN'; 
```

外键在 VEHICULE 表中声明

```
CONSTRAINT "VEHICULE_CLIENT_FK" FOREIGN KEY ("VE_CL_ID")
    REFERENCES "MY_SCHEMA"."CLIENT" ("CL_ID") ENABLE 
```

外键上有一个索引：

```
CREATE INDEX "MY_SCHEMA"."VEHICULE_INDEX_CLIENT" ON "MY_SCHEMA"."VEHICULE" ("CL_ID") 
```

用于搜索条件的列上也有索引。

请求最多可能需要 40 秒。我已经查看了位图连接索引，但我不知道它是否会有所帮助，因为位图连接应该[用于具有低基数的列](http://docs.oracle.com/cd/B28359_01/server.111/b28313/indexes.htm)。这是连接的唯一索引类型吗？我完全不知道如何提高性能。

编辑：

这是 SQL 开发人员的 SQL 调优顾问显示的内容（执行计划） 此查询的 sql 没有`AND c.CL_COUNTRY = 'SPAIN'`

```
GENERAL INFORMATION SECTION
-------------------------------------------------------------------------------
Tuning Task Name   : staName9168
Tuning Task Owner  : USER
Tuning Task ID     : 12125
Scope              : COMPREHENSIVE
Time Limit(seconds): 1800
Completion Status  : COMPLETED
Started at         : 04/23/2013 15:44:35
Completed at       : 04/23/2013 15:44:36

-------------------------------------------------------------------------------
There are no recommendations to improve the statement.

-------------------------------------------------------------------------------
EXPLAIN PLANS SECTION
-------------------------------------------------------------------------------

1- Original
-----------
Plan hash value: 3808155432

------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                           | Name                  | Rows  | Bytes | Cost (%CPU)| Time     |    TQ  |IN-OUT| PQ Distrib |
------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                    |                       |     1 |    21 | 54011   (1)| 00:10:49 |        |      |            |
|   1 |  SORT AGGREGATE                     |                       |     1 |    21 |            |          |        |      |            |
|   2 |   PX COORDINATOR                    |                       |       |       |            |          |        |      |            |
|   3 |    PX SEND QC (RANDOM)              | :TQ10001              |     1 |    21 |            |          |  Q1,01 | P->S | QC (RAND)  |
|   4 |     SORT AGGREGATE                  |                       |     1 |    21 |            |          |  Q1,01 | PCWP |            |
|*  5 |      HASH JOIN                      |                       |   475K|  9745K| 54011   (1)| 00:10:49 |  Q1,01 | PCWP |            |
|   6 |       BUFFER SORT                   |                       |       |       |            |          |  Q1,01 | PCWC |            |
|   7 |        PX RECEIVE                   |                       |   475K|  6497K| 32813   (1)| 00:06:34 |  Q1,01 | PCWP |            |
|   8 |         PX SEND BROADCAST           | :TQ10000              |   475K|  6497K| 32813   (1)| 00:06:34 |        | S->P | BROADCAST  |
|*  9 |          TABLE ACCESS BY INDEX ROWID| VEHICULE              |   475K|  6497K| 32813   (1)| 00:06:34 |        |      |            |
|* 10 |           INDEX RANGE SCAN          | VEHICULE_INDEX_BRAND  |   616K|       |  1621   (2)| 00:00:20 |        |      |            |
|  11 |       PX BLOCK ITERATOR             |                       |    20M|   138M| 21146   (1)| 00:04:14 |  Q1,01 | PCWC |            |
|  12 |        TABLE ACCESS FULL            | CLIENT                |    20M|   138M| 21146   (1)| 00:04:14 |  Q1,01 | PCWP |            |
------------------------------------------------------------------------------------------------------------------------------------------

Query Block Name / Object Alias (identified by operation id):
-------------------------------------------------------------

   1 - SEL$58A6D7F6
   9 - SEL$58A6D7F6 / VEHICULE@SEL$1
  10 - SEL$58A6D7F6 / VEHICULE@SEL$1
  12 - SEL$58A6D7F6 / CLIENT@SEL$1

Predicate Information (identified by operation id):
---------------------------------------------------

   5 - access("VE_CL_ID"="CL_ID")
   9 - filter("VE_CL_ID" IS NOT NULL)
  10 - access("VEHICULE"."VE_BRAND"='MITSUBISHI')

Column Projection Information (identified by operation id):
-----------------------------------------------------------

   1 - (#keys=0) COUNT()[22]
   2 - SYS_OP_MSR()[10]
   3 - (#keys=0) SYS_OP_MSR()[10]
   4 - (#keys=0) SYS_OP_MSR()[10]
   5 - (#keys=1) 
   6 - (#keys=0) "VE_CL_ID"[NUMBER,22]
   7 - "VE_CL_ID"[NUMBER,22]
   8 - (#keys=0) "VE_CL_ID"[NUMBER,22]
   9 - "VE_CL_ID"[NUMBER,22]
  10 - "VEHICULE".ROWID[ROWID,10]
  11 - "CL_ID"[NUMBER,22]
  12 - "CL_ID"[NUMBER,22]

------------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:02:50.880

`client (cl_country, cl_id)`在and上创建复合索引`vehicule (ve_brand, ve_cl_id)`（均按此顺序）。

这样你就可以摆脱两个表上的表访问。

如果您只有几个国家和品牌，您还可以按国家和品牌划分索引，以便`INDEX FAST FULL SCAN`可以使用而不是`INDEX RANGE SCAN`.

您还可以考虑创建一个集群，在`client.id`该集群上将车辆和客户端数据存储在相同或附近的数据块中，从而改善 I/O。

# c# - Windows 应用商店 - 从 URL 加载图像 - 性能不佳

> ID：16170618
> 
> 赞同：0
> 
> 时间：2013-04-23T13:28:01.913
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps

我正在`GridView`使用大约 40 个在线图像填充一个。我的 Grid 有一个 DataTemplate，其中`Image.Source`绑定到 URL（例如“ [http://foo.jpg](http://foo.jpg) ”），如下所示：

```
<Image Source="{Binding imgUrl}" > 
```

问题是，这种方法非常慢，因为必须首先通过互联网下载所有图像（图像的实际大小可以是 500x500，尽管在应用程序中我只需要大约 250x200 的大小）。这会导致 40 个图像弹出，`GridView`这需要一些时间。你怎么能改善这个？

将它们预先下载到本地存储？缩放图像？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:35:51.213

我认为您自己已经回答了这个问题。如果源 url 很慢，你几乎别无选择，只能预先下载它们。除非您控制源，否则就像您说的那样，如果质量可以，肯定会缩放和/或转换为像 gif 这样不占用太多空间的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:39:58.040

如果您可以预先下载它们，可以考虑使用[WebClient 的](http://msdn.microsoft.com/en-us/library/tt0f69eh.aspx) [DownloadDataAsync](http://msdn.microsoft.com/en-us/library/ms144190.aspx)。随着下载完成事件的触发，您可以更新您的图像集合。

# django - Django模板：同时循环查询集和字典（或组合它们）？

> ID：16170620
> 
> 赞同：0
> 
> 时间：2013-04-23T13:28:02.587
> 
> 标签：django, django-templates, django-views, django-queryset

如果我有一个名为 Fruit 的查询集，其模型类似于：

```
class Fruit(model.Models)
    name = models.CharField()
    producer = models.ForeignKey(Producer) 
```

在我看来，我有一个动态创建的字典，名为 Fruit_Quality，其中包含类似`{'Orange' : 'ripe', 'Apple' : 'overripe', etc.}`

我希望能够将 query_set 和字典都传递给模板，并遍历 query_set 实例，以输出如下所示的行：

```
{{ Fruit.name Fruit.producer.name Fruit.producer.location Fruit_Quality[Fruit.name] }} 
```

后者引用字典中水果的语法当然不是有效的模板语法。有有效的语法吗？我找不到任何东西。

如果没有有效的语法，有没有办法同时遍历 query_set 和字典？

注意：不幸的是，我无法将“Fruit_Quality”字段添加到模型中，因为 Fruit_Quality 是动态创建的，并不意味着存储。所以这不是一个解决方案。

另外，我希望将 Fruit 作为查询集传递给模板，以便可以引用模型中的外键字段，例如生产者。如果我没有这个限制，可以将查询集转换为视图中的字典列表，并将 Fruit_Qualtiy 附加到每个字典中。但是这些外键使我无法轻松地将查询集转换为字典（也无需将所有外键字段都添加到字典中）。

感谢您的任何建议。

# resize - KineticJS 不会在初始 onResize 调用时更新对象的位置

> ID：16170622
> 
> 赞同：0
> 
> 时间：2013-04-23T13:28:03.390
> 
> 标签：resize, kineticjs

这是 KineticJS 的一个实验，它的目标是在调整窗口大小时简单地将对象保持在屏幕中心。

它工作正常，只是它不会在初始调整大小事件处理程序调用时使对象（一个圆圈）居中。当我开始调整大小 - 并继续这样做 - 圆圈居中。但最初，圆圈从屏幕的左上角 (0,0) 开始。

```
$(document).ready( function(){      
    $(window).resize(onResize);

    var stage = new Kinetic.Stage({
          container: 'container',
          width: $(container).width(),  
          height: $(container).height()
     });

    var layer = new Kinetic.Layer();
    var circle = new Kinetic.Circle({ radius: 70, fill: 'red' });

    layer.add(circle);
    stage.add(layer);

    function onResize(){ 
        $(container).css('height', window.innerHeight - 20);

        stage.setWidth($(container).width());
        stage.setHeight($(container).height());
        updatePosition();
    }

    function updatePosition(){
        circle.setPosition(stage.getWidth() / 2, stage.getHeight() / 2);
    }   

    // initial call
    onResize();
}); 
```

关于为什么会发生这种情况的任何线索？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:28:00.747

[http://jsfiddle.net/ME2cX/2](http://jsfiddle.net/ME2cX/2)

是的，在调用 onResize 函数后，您错过了绘制舞台的调用。
您的事件顺序是在舞台上添加东西，然后将圆圈放在中心，但需要再次绘制舞台（或图层）以说明圆圈的新位置。

在 jsfiddle 中，我放置了 3 个绘制函数，我推荐你选择其中一个

```
layer.draw() 
```

功能而不是

```
stage.draw(); 
```

# ios - UIDatePicker 更改语言环境

> ID：16170626
> 
> 赞同：4
> 
> 时间：2013-04-23T13:28:11.703
> 
> 标签：ios, objective-c, uidatepicker

我正在尝试像这样更改 UIDatePicker 的语言环境：

```
 picker.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]; 
```

它正在工作，但在设置区域设置后，选择器不符合时间格式的系统设置。我的意思是 24 小时/（上午/下午）。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-27T11:45:52.663

在 xCode 中：- 在本地部分中，您可以设置它；

[![在此处输入图像描述](https://i.stack.imgur.com/aFW0g.png)](https://i.stack.imgur.com/aFW0g.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:40:04.520

你没有做错任何事。日期/时间格式由语言环境决定。en_US 使用 12 小时 AM/PM 格式：[http ://demo.icu-project.org/icu-bin/locexp?_=en_US](http://demo.icu-project.org/icu-bin/locexp?_=en_US)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-12T17:36:32.717

如果您想支持用户所需的时间格式，则标记的答案并不完全正确。

如果您将选择器区域设置为默认值（设备的区域），则选择器将使用该特定区域设置的 12/24 小时格式。在美国，这将是 12 小时，而在英国，例如，这将是 24 小时。

但是，如果用户手动将其设备更改为 12/24，您的选择器将不会使用此样式。

如果您的选择器仅使用时间而不是日期+时间，您可以使用以下几种方法解决此问题：

1.  手动检测设备是否为 12/24，然后选择 locale en_US 为 12hr 和 en_GB 为 24hr。
2.  不要设置语言环境，只需将 timeStyle 设置为 NSDateFormatterShortStyle，这将自动选择从设备设置中选择的时间格式。

如果您使用的是日期+时间，那么您需要将区域设置设置为设备的区域设置，以便以正确的语言和格式获取日期，但这将忽略设备上设置的时间格式。

# php - 将数组除以相同的元素值

> ID：16170627
> 
> 赞同：0
> 
> 时间：2013-04-23T13:28:13.273
> 
> 标签：php, arrays, matrix

我有这个问题：我有一个这样的矩阵

```
$mainarray['one']=>(
    $array['name']='name';
    $array['lastname']='lastname';
    $array['register']='some number'//integer),
$mainarray['one']=>(
    $array['name']='name';
    $array['lastname']='lastname';
    $array['register']='some number'//integer) 
```

等等。我想显示这个分组`$array['register']`。像这样的东西：

```
echo $array['register']; 
```

然后显示所有具有 this 的元素，`$array['register']`等等。我怎样才能做到这一点？

解决方案：这就是我解决它的方法：

```
foreach ($mainarray as $elem)
{
$project_id=$elem['register'];
isset($ordered[$project_id]) ? $ordered[$project_id][] = $elem : 
$ordered[$project_id] = array($elem);  
} 
```

这就是我解决它的方法。希望这会帮助有同样问题的人！:)

# node.js - Node.js 在 2 分钟内处理 6 个 http 请求

> ID：16170628
> 
> 赞同：2
> 
> 时间：2013-04-23T13:28:14.203
> 
> 标签：node.js

我有一个简单的 Node.js 脚本，它在端口 1337 上启动一个 HTTP 服务器并处理 GET 请求。我向`localhost:1337/?number=(number from 1 to 10)`. 该脚本处理前 6 个请求，然后休息 2 分钟，然后处理剩余的 4 个请求。

我需要在发送 HTTP GET 请求时立即处理它们。我该怎么做？

这是我的代码：

```
var url = require('url'),
   http = require('http'),
     qs = require('querystring');

var server = http.createServer(function (request, response) {
  if (request.method == 'GET') {
    var url_params = url.parse(request.url, true);
    var number     = url_params.query.number;

    console.log(number);
  }               
});

server.listen(1337); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:35:15.283

这很可能是因为您从不关闭连接。尝试添加`res.end()`通话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:37:54.543

尝试在请求处理程序的末尾添加以下行：

```
res.writeHead(200);
res.end(); 
```

# c - 在c中实现通用堆栈

> ID：16170638
> 
> 赞同：2
> 
> 时间：2013-04-23T13:28:34.940
> 
> 标签：c, generics, stack

```
typedef struct Stack_t* Stack;
typedef void* Element;
typedef Element (*CopyFunction)(Element);
typedef void (*FreeFunction)(Element); 
```

你能解释一下第三行的含义吗？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:31:21.717

这是一个`function pointer`你可以寻址一个函数，它接受一个`Element`并返回一个`Element`，比如

```
Element ReturnElem(Element el){ } //define function

CopyFunction = ReturnElem;  //assign to function pointer

Element el = ....;
Element el2 =  CopyFunction(el); //call function using function-pointer 
```

有关函数指针，请参见[此处](http://www.newty.de/fpt/fpt.html#callconv)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:44:11.397

一个类似性质的例子来帮助你理解函数指针的 typedef。

```
typedef int (*intfunctionpointer_t) (int); 
```

所以我们在这里说的是，intfunctionpointer_t 是一种函数指针，其中函数有一个 int 类型的参数，并返回一个整数。

假设你有两个功能说，

```
int foo (int);
int bar (int); 
```

然后，

```
intfunctionpointer_t function = foo;    
function(5); 
```

调用 function(5)，最终会调用 foo(5)；

您还可以通过将相同的函数指针分配给具有相同签名的另一个函数来扩展 this 。

```
function = bar;
function(7); 
```

现在调用 function(7)，最终会调用 bar(7)；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T13:30:28.160

这个：

```
typedef Element (*CopyFunction)(Element); 
```

定义了一个为函数指针类型调用的别名`CopyFunction`，该函数返回一个 an 的实例，`Element`并且有一个`Element`.

人为的例子：

```
/* Function declaration. */
Element f1(Element e);
Element f2(Element e);

Element e = { /* ... */ };
CopyFunction cf = f1;
cf(e); /* Invokes f1(). */

cf = f2;
cf(e); /* Invokes f2(). */ 
```

函数指针使用的其他示例：

*   [`qsort()`](http://en.cppreference.com/w/c/algorithm/qsort)
*   [`bsearch()`](http://en.cppreference.com/w/c/algorithm/bsearch)

# android - Android Notification.Builder：显示没有图标的通知

> ID：16170648
> 
> 赞同：13
> 
> 时间：2013-04-23T13:29:05.140
> 
> 标签：android, android-notifications

```
 String ns = Context.NOTIFICATION_SERVICE;
 NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

 int icon = R.drawable.ic_notification_icon;
 android.app.Notification.Builder nbuilder = new Notification.Builder(this);

 nbuilder.setContentTitle(getString(R.string.notifcation_title,mProfile.mName));
 nbuilder.setContentText(msg);
 nbuilder.setOnlyAlertOnce(true);
 nbuilder.setOngoing(true);
 nbuilder.setSmallIcon(icon,level.level); 
```

如何隐藏或完全删除 smallIcon？我尝试不使用nbuilder.setSmallIcon，但结果是根本没有显示通知！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-24T13:20:49.047

在 Jelly Bean 及更高版本上，您可以使用`nbuilder.setPriority(Notification.PRIORITY_MIN)`; 此优先级的确切解释由系统 UI 决定，但在 AOSP 中，这会导致通知图标被隐藏。

这适用于不需要引起用户注意的“环境”或“背景”信息，但如果用户碰巧在通知面板周围闲逛，她可能会感兴趣。有关如何最好地使用通知优先级的更多信息，请参阅[Android 设计网站的通知部分。](http://developer.android.com/design/patterns/notifications.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-26T16:29:31.903

**更新：不要在 Android 7 上使用它，它会崩溃**

* * *

使用反射，这是在 Lollipop（模拟器和 Moto G 设备）和 Marshmallow（模拟器）中工作的东西

```
Notification notification = NotificationCompat.Builder.blabla().build();
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
  int smallIconViewId = context.getResources().getIdentifier("right_icon", "id", android.R.class.getPackage().getName());

  if (smallIconViewId != 0) {
    if (notification.contentView != null)
      notification.contentView.setViewVisibility(smallIconViewId, View.INVISIBLE);

    if (notification.headsUpContentView != null)
      notification.headsUpContentView.setViewVisibility(smallIconViewId, View.INVISIBLE);

    if (notification.bigContentView != null)
      notification.bigContentView.setViewVisibility(smallIconViewId, View.INVISIBLE);
  }
} 
```

我找不到更好的方法。

当他们更改视图的 id 或更改 Notification 中的任何 RemoteViews 字段时，这可能会停止工作，因此使用风险自负。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T13:35:43.703

你不能那样做......没有`setSmallIcon(icon,level.level);`通知不显示......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-16T21:08:48.957

尝试在您的通知生成器中添加此行
`.setPriority(Notification.PRIORITY_MIN)`
，这样您的通知将是这样的：
`Notification notification = new Notification.Builder(this) .setSmallIcon(R.drawable.stat_notify_chat) .setContentTitle("my app") .setContentText("my app ") .setPriority(Notification.PRIORITY_MIN) .setContentIntent(pendingIntent).build();`
所以在这种情况下，您可以在通知栏中看到您的图标，并且它隐藏在状态栏中。希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-19T04:44:11.027

您可以设置自己的无图标布局：

`RemoteViews notificationView = new RemoteViews( context.getPackageName(), R.layout.notify ); NotificationCompat.Builder builder = new NotificationCompat.Builder(context) .setContent(notificationView)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-16T21:26:24.297

我之前遇到过这个问题并像这样解决了它：

```
private int getNotificationIcon() {
    boolean useWhiteIcon = (android.os.Build.VERSION.SDK_INT>=android.os.Build.VERSION_CODES.LOLLIPOP);
    // LOLLIPOP or Marshmellew>>>>>>>>>>>>>>>>>>>>> KitKat or Less
    return useWhiteIcon ? R.drawable.logo_new : R.drawable.logo;
} 
```

只需调用这个函数`setSmallIcon()`

```
nbuilder.setSmallIcon(getNotificationIcon()); 
```

# ios - AVQueuePlayer 音量未更改

> ID：16170649
> 
> 赞同：0
> 
> 时间：2013-04-23T13:29:07.657
> 
> 标签：ios, objective-c, avqueueplayer

我想用`UISlider`.

我`currentItem`在里面用过`AVQueuePlayer`。 `ps0`是一个`AVQueuePlayer`。

当我使用我的时，我没有错误和相同的声级`UISlider`：

```
- (IBAction)volumeSliderMoved:(UISlider *)sender
{
    AVMutableAudioMixInputParameters *audioInputParams = [AVMutableAudioMixInputParameters audioMixInputParameters];

    AVPlayerItem *av = [ps0 currentItem];
    CMTime currentTime = [av currentTime];
    float volume = [sender value];

    [audioInputParams setVolume:volume atTime:currentTime];
    AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
    audioMix.inputParameters = [NSArray arrayWithObject:audioInputParams];
    av.audioMix = audioMix;

    [ps0 replaceCurrentItemWithPlayerItem: av];
} 
```

**已编辑：** 我尝试了 Apple 的另一种[解决方案](http://developer.apple.com/library/ios/#qa/qa1716/_index.html)来更改音量设置。

正如您在此解决方案中看到的，它创建了一个新的`playerItem`和一个新的播放器。

但我`playerItem`是当前的副本，因为我只想更改声音（而不是项目）。它会自动与旧播放器相关联。

当我尝试使用他们的解决方案时。我有一条错误消息说：

> 一个 AVPlayerItem 不能与多个 AVPlayer 实例关联

有什么建议吗？

**再次编辑**

使用 AVQueuePlayer 更改播放

我有一个包含每个 mp3 名称“textMissingTab”的数组</p>

我有一个带有 AVPlayerItem “soundItems”的数组</p>

**创作：**

```
textMissingTab = [[NSArray alloc] initWithObjects:@"cat",@"mouse",@"dog",@"shark",@"dolphin", @"eagle", @"fish", @"wolf", @"rabbit", @"person", @"bird", nil];

for (NSString *text in textMissingTab)
{
    NSURL *soundFileURL = [[NSURL alloc] initFileURLWithPath: [[NSBundle mainBundle] pathForResource:text ofType:@"mp3"]];
    AVPlayerItem *item = [AVPlayerItem playerItemWithURL:soundFileURL];
    [soundItems addObject:item];
} 
```

**在里面 ：**

```
NSURL *soundFileURL = [[NSURL alloc] initFileURLWithPath: [[NSBundle mainBundle] pathForResource:@"dog" ofType:@"mp3"]];
ps0 = [[AVQueuePlayer alloc] initWithURL:soundFileURL]; 
```

**更改 playItem ：**文本为 NSString

```
int index = [textMissingTab indexOfObject:text];
[ps0 setActionAtItemEnd:AVPlayerActionAtItemEndNone];
CMTime newTime = CMTimeMake(0, 1);
[ps0 seekToTime:newTime];
[ps0 setRate:1.0f];
[ps0 replaceCurrentItemWithPlayerItem:[soundItems objectAtIndex:(index)]];
[ps0 play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:14:10.603

我在使用 AVQueuePlayer 和更改播放参数时遇到了几个问题。如果您的目标是使用滑块进行音量调整，我会在情节提要中将 UISlider 替换为空白 UIView，然后在该视图中实例化 MPVolumeView。这对我来说很可靠。请注意，MPVolumeView 不会显示在模拟器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:26:01.397

我认为你是对的。MPVolumeView 是管理声级的最佳方式。

本教程对此进行了解释：[http ://www.littlereddoor.co.uk/ios/controlling-system-output-volume-by-adding-an-mpvolumeview-object-to-an-ios-application/](http://www.littlereddoor.co.uk/ios/controlling-system-output-volume-by-adding-an-mpvolumeview-object-to-an-ios-application/)

“一切都完全按照我们的预期工作，直到用户遇到由设备上设置的当前铃声音量创建的绊脚石。AVAudioPlayer 属性的最大值为 1.0，其中 1.0 等于当前铃声音量设置设备的。简单地说，如果设备铃声音量设置为 50% 音量，那么 100% 的 AVAudioPlayer 音量仍然只相当于已经设置的 50% 铃声。使用这种方法的局限性不言而喻。

我再次编辑了我的帖子，以展示我如何使用 AVQueuePlayer 管理一些歌曲。这部分代码正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T08:26:11.753

```
AVAsset *asset;
NSArray *playerTracks;
NSMutableArray *playerParams;
AVMutableAudioMix *muteAudioMix;
for (int k=0; k<[[audio items] count]; k++)
    {
        //disable audio (this is the version when you have more than one video in the playlist: i write this version so it should be more useful)
        asset = [AVURLAsset URLAssetWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:[soundfile objectAtIndex:k+([soundfile count]-[[audio items] count])] ofType:@"mp3"]] options:nil];

        playerTracks = [asset tracksWithMediaType:AVMediaTypeAudio];
        playerParams = [NSMutableArray array];
        for (AVAssetTrack *track in playerTracks) {
            AVMutableAudioMixInputParameters *audioInputParams =    [AVMutableAudioMixInputParameters audioMixInputParameters];
            [audioInputParams setVolume:1.0 atTime:kCMTimeZero];
            [audioInputParams setTrackID:[track trackID]];
            [playerParams addObject:audioInputParams];
        }
        muteAudioMix = [AVMutableAudioMix audioMix];
        [muteAudioMix setInputParameters:playerParams];

        [[[audio items] objectAtIndex:k] setAudioMix:muteAudioMix];
    } 
```

# batch-file - 如何在远程服务器上运行批处理文件

> ID：16170652
> 
> 赞同：0
> 
> 时间：2013-04-23T13:29:29.687
> 
> 标签：batch-file, remote-desktop

我们有一个名为 hyperion 的远程 Windows 服务器。它有一个批处理文件可以杀死所有任务并将其关闭，例如 abc.exe。我想编写一个脚本，从我的 VM 运行这个 abc.exe。注意：我必须提供用户名和密码才能登录到 hyperion 服务器。

将 PSEXEC/ 帮助。如果是的话，有人可以给我确切的脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:07:57.397

您可以使用 PsExec 或 WMI 来执行此操作。这是一个使用 WMI 的 VBScript。

```
 strComputer = "RemoteServ"
    Set objShell = CreateObject("Wscript.Shell")
    Set objWMIService = GetObject _
    ("winmgmts:\\" & strComputer & "\root\cimv2:Win32_Process")
    intReturn = objWMIService.Create("Executable.exe", Null, Null, intProcessID)
    if intReturn = 0 then
        wscript.echo "Program successfully launched"
    else 
        wscript.echo "There was a problem launching program"
    end if
    wscript.quit 
```

# vb.net - 列表框中不显示水平滚动条

> ID：16170655
> 
> 赞同：0
> 
> 时间：2013-04-23T13:29:31.880
> 
> 标签：vb.net, listbox, horizontal-scrolling

我有一个包含列表框 (listbox1) 的用户控件。

水平滚动条设置设置为 TRUE。

另一个列表框 (selectionchanged) 上还有一个处理程序，用于设置 listbox1 的值（以防这可能导致问题）。

我将此用户控件添加到选项卡控件中的选项卡页。

我面临的问题是，即使 listbox1 中显示的项目大于宽度，也不会显示水平滚动条。

任何人都知道我该如何解决这个问题？

谢谢

- 编辑 - 尽可能多的代码，我可以显示

```
dim tabpage as new Tabpage
dim dict as new dictionary(of String, list(of MyObject))
'fill dict
tabpage.add(usercontrol(dict))
tabcontrol1.tabpages.add(tabpage) 
```

用户控制：

```
class UserControl  
 public sub new(dict)
  Dim bs As BindingSource = New BindingSource(dict, Nothing)
    ListBox1.DataSource = bs
    ListBox1.DisplayMember = "Key"
 end sub  

 Private Sub ListBox1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ListBox1.SelectedIndexChanged
    ListBox2.DataSource = New BindingSource(CType(ListBox1.SelectedItem, KeyValuePair(Of String, List(Of MyObject))).Value, Nothing)
        End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:00:15.683

我已经弄清楚为什么它不起作用了。只是我忽略的一个小设置。我在这里发布这个，因为它可能会帮助其他人。

如果列表框的**multiColumn**设置为**True**，则水平滚动条将不会按您（我）的意愿显示。

关闭多列（不需要时）或修复列宽将解决此问题。

主题可以关闭。

# javascript - 使用原型的方法中的 Jquery 插件访问 var

> ID：16170656
> 
> 赞同：0
> 
> 时间：2013-04-23T13:29:33.500
> 
> 标签：javascript, jquery, plugins, prototype

我有以下使用[http://fr.jqueryboilerplate.com/的 javascript 代码](http://fr.jqueryboilerplate.com/)

```
;(function ($, window, document, undefined) {
  var pluginName = "PluginName",
    defaults = {
      overlay: {
        BgColor: "#000",
        opacity: "0.6"
      }
    };
  function Plugin(element, options) {
    this.element = $(element);
    this.options = $.extend({}, defaults, options);
    this._defaults = defaults;
    this._name = pluginName;
    this.init();
  }
  Plugin.prototype = {
    init: function () {
      console.log("init");
      var overlay = jQuery("<div/>", {
        id: "ModalOverlay",
        click: function () {
          Plugin.prototype.Mymethod();
        }
      });
    },
    Mymethod: function () {}
  }; 
```

任何人都可以教我如何访问变量，这些变量是

```
function Plugin(){} 
```

从

```
Mymethod: function() {} 
```

也许是这样的：

添加商店对象

```
Plugin.prototype = {
  store: {
    _overlay: null
  } 
```

进入初始化函数

```
Plugin.prototype.store._overlay = overlay; 
```

然后像这样访问它：

```
Mymethod: function () {
  console.log(Plugin.prototype.store._overlay);
}, 
```

我很确定这是有效的，但我认为这很脏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:55:11.317

试试这个代码，我没有测试过。但值得一试。如果不起作用，请告诉我，我将删除。

```
Plugin.prototype = {
init: function () {
  var myThis=this;
  console.log("init");
  var overlay = jQuery("<div/>", {
    id: "ModalOverlay",
    click: function () {
      myThis.Mymethod();
    }
  });
},
Mymethod: function () {
     alert(this._name);     
     alert(this.options);
     alert(this.options.overlay);
     console.log(this.options.overlay);

}
}; 
```

# c# - Windows RT 中的自定义触摸键盘

> ID：16170659
> 
> 赞同：2
> 
> 时间：2013-04-23T13:29:39.663
> 
> 标签：c#, windows-8, windows-runtime

是否可以在 Windows RT 中更改触摸键盘中的某些内容？例如，我的应用程序是一个海量数据条目。许多字段是字母数字 ID。从数字（123 键）到字母键盘一直更改是一团糟。

有没有办法定义包含或排除哪些键？

我使用了 InputScope，但它非常有限，无法将数字和字母放在同一个屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:36:23.647

对不起，在 WinRT 中无法更换 Modern UI 上的触摸键盘，而不会破解。

[Microsoft Windows RT 论坛硬件](http://answers.microsoft.com/en-us/windows/forum/windows_rt-hardware/msklc-custom-keyboard-layouts-on-windows-rt/48e89275-988c-41e0-994a-7588dfb0d432)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:09:14.010

设置`InputScope`您的`TextBox`控件以指示您希望该文本框使用哪种类型的键盘。这是你能做的最好的。没有在应用程序中定义自定义键盘布局的工具。（键盘布局被认为是一种语言功能，而不是应用程序功能。）

# key-value-store - 使用 GWAN 的键/值存储可以为一个实体创建多个索引吗？

> ID：16170664
> 
> 赞同：1
> 
> 时间：2013-04-23T13:29:51.507
> 
> 标签：key-value-store, g-wan

对于 GWAN 的键值存储，我可以为给定的单一类型实体创建多个索引吗？如果我索引年龄和身高，我还可以一次查询多个索引，例如查找年龄 > 5 和高度 > 100 的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:54:17.413

> 我可以为给定的单一类型的实体创建多个索引吗？

如果您的意思是，一条记录中的多个字段有多个索引（一个键有多个值），那么是的，您可以。只需看 kv.c 示例：[http](http://gwan.ch/source/kv.c) ://gwan.ch/source/kv.c （由于任何原因，没有显示 Stackoverflow 文本格式菜单，所以我将链接写在文本中而不是嵌入 - 还有，如果有人可以请停止我必须输入以回答每个问题的验证码，那就太好了）。

> 如果我索引年龄和身高，我可以一次查询多个索引，例如查找年龄 > 5 和身高 > 100 的项目吗？

您可以轻松地编写一个函数来执行此操作，并在第一个索引的第一次搜索和第二个索引的第二次搜索中找到出现的记录。

这是非常快的，因为结果是按排序返回的。

# eclipse - 将 Maven 与 GWT 插件一起用于依赖项？

> ID：16170665
> 
> 赞同：-2
> 
> 时间：2013-04-23T13:29:53.507
> 
> 标签：eclipse, google-app-engine, maven, gwt, google-eclipse-plugin

到目前为止，我还没有将 maven 用于`GWT`项目。当我将它部署到`GAE`Google App Engine 时，我只需右键单击 > Google > 部署到 App Engine。然后`war`自动生成文件夹，一切运行正常。

如果我将项目更改为`maven`结构，菜单点会`project settings > Google > Web Application`告诉我：`Launch and deploy from this directory (disabled because Maven)`.

结果，在部署时，没有生成/更新war文件夹！

那么：如何使用 maven 进行依赖管理，并且仍然使用 GWT/GAE`Eclipse Plugin`来部署和启动我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T22:14:43.500

您可能想在 maven 中完成这个介绍性练习：[http ://maven.apache.org/guides/getting-started/maven-in-five-minutes.html](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)

您所描述的内容是可能的，但需要一些工作和对 Maven 的理解才能完成。如果您想将您的项目转换为 maven，则可能需要比在 eclipse 中将项目更改为 maven 结构更多的工作。App Engine 的示例 maven 项目在这里：[https](https://github.com/GoogleCloudPlatform/appengine-guestbook-java) ://github.com/GoogleCloudPlatform/appengine-guestbook-java 。Maven 上的一些 App Engine 特定文档在这里：[https ://developers.google.com/appengine/docs/java/tools/maven](https://developers.google.com/appengine/docs/java/tools/maven)

# sql - Sql Select - 返回的总行数

> ID：16170666
> 
> 赞同：2
> 
> 时间：2013-04-23T13:29:59.097
> 
> 标签：sql, go

使用 Postgres 和 Mysql 的 database/sql 包和驱动程序，我想实现以下目标。我希望能够选择一行并知道有零行、一行或多行。QueryRow 函数没有实现这一点，因为据我所知，无论是否有超过一行，它都会返回一行而不会出错。对于我的情况，不止一行可能是一个错误，我想知道它。我想创建一个通用函数来做到这一点。

我查看了创建一个使用 Query 函数的函数，但如果有多行，我不知道如何返回第一行。我想返回多行的事实，但我也想返回第一行。要确定有多行，我必须执行 Next，它会覆盖第一行。显然我可以在不创建通用函数的情况下实现这一点，但我想要一个函数来做到这一点，因为我需要在很多地方这样做

。有人可以向我解释如何实现这一点。IE。在成功完成 Next 或 Next 不返回任何内容时从函数返回第一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:13:19.087

我同时使用`database/sql`&`MySQLDriver`来实现这一点。您可以`MySQLDriver`在[https://github.com/go-sql-driver/](https://github.com/go-sql-driver/)下载。

我自己编写了`execQuery`函数来从数据库中获取一行或多行。它基于 MySQL，但我认为它也可以用于具有类似实现的 Postgres。

假设您有一个名为 的数据库表`test`，并且有名为`id`, `name`,的行`age`。

代码：

```
var db *sql.DB // it should be initialized by "sql.Open()"

func execQuery(SQL string, args ...interface{}) (rows *sql.Rows, is_succeed bool) {
  rows, err := db.Query(SQL, args...)
  var ret bool
  if err == nil && rows != nil { // if DB query error rows will be nil, it will return false
    ret = true
  } else {
    ret = false
  }

  return rows, ret
} 
```

用法：

```
var name, age string
rows, is_succeed = execQuery("SELECT `name`, `age` FROM `test` WHERE `id` = ?", "123")
if !is_succeed {
  // error
  return 
}
for rows.Next() { // if have zero result rows, this for route won't execute
  err := rows.Scan(&name, &age)
  // check if has error & do something
} 
```

如果你想知道返回了多少行，只需在`for`路由中添加一个计数器，使用 SQL 也可以实现。

`sql.Rows`喜欢列表结构，`rows *sql.Rows`指向返回行的第一行。用于`rows.Next()`遍历每一行。我想这就是你问的。

如果您真的想经常知道行数**，**那么使用缓存机制`memcacheDB`或`Redis`自己实现一个简单的计数器可以帮助您解决问题。

# android - Activity A启动Activity B，如何关闭Activity A

> ID：16170676
> 
> 赞同：-2
> 
> 时间：2013-04-23T13:30:33.017
> 
> 标签：android, android-intent, android-activity

我好像来了很多次！！

我知道这个问题已经在这里和其他地方被问过，我已经尝试实施发布的答案，但它对我不起作用

我有一个活动， ( `Activity A`) 基于 if 语句，它开始`Activity B`。我的问题是`Activity A`一直在运行，并且在`Activity A`我播放警报和振动手机时，两者都继续运行，并且在`Activity B`启动和运行时（我可以在 logcat 中看到）它永远不会因此而出现在前面。

这是我的 if 语句代码

```
 if (dynamicActivation > threshold) {

                    alarmHandler.post(new Runnable() {
                        public void run() {
                            int duration = Toast.LENGTH_SHORT;
                            CharSequence text = "YOUR CHILD HAS TRAVELLED OUTSIDE PROXIMITY";
                            Context context = getApplicationContext();
                            proximityAlert = Toast.makeText(context, text,
                                    duration);
                            proximityAlert.show();
                            alarmSound.start();
                            //v.vibrate(3000);

                            try {
                                Thread.sleep(5000);
                                openMaps();

                            } catch (InterruptedException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
                    });
                } 
```

这是`openMaps()`函数的代码

```
public void openMaps() {

    Class track = ParentReal.class;
    Intent PRealIntent = new Intent(this, track);

    PRealIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  
    startActivity(PRealIntent);

    ANN.this.finish();

} 
```

如果它引起问题，我应该补充一点，即有另一个活动，一个菜单，一旦单击一个按钮，它就会打开`Activity A`......一旦我开始，我是否应该关闭菜单活动`Activity A`？

提前致谢！

**编辑**

我不确定为什么要投反对票，但我会尝试解释我的问题，我有三个活动 A、B、C。A 是我的菜单，单击按钮后它会启动活动 B，在活动 B 中，基于if 语句的结果 活动 C 开始。

问题是C运行，进程可以在logcat中看到但没有打开。B 继续播放闹钟和振动，然后手机停止，闹钟和振动继续。我有上面 if 语句的代码和 openMaps() 函数的代码，这是根据 if 的结果调用的，在其中我尝试打开 Activity C 并关闭 B

我希望这更清楚;）

**另一个编辑**

好的，我知道问题是什么，我只是不知道如何解决它。我有一个线程，在该线程内部是一个无限的while循环，在这个无限的while循环中，我检查两个坐标之间的距离（我希望它们不断更新）。

问题是，我全局声明的变量是在循环中初始化的，所以我必须在其中运行我的 if 语句，以访问那些......我尝试使用布尔“测试”，如果它是真的执行 if 语句然后设置测试为假，但恐怕这不起作用。

这是我的代码

```
Thread dist = new Thread(new Runnable() {
        public void run() {

            while (true) {

                child = new Location("point A");

                child.setLatitude(Clatitude);
                child.setLongitude(Clongitude);

                parent = new Location("point B");

                parent.setLatitude(Platitude);
                parent.setLongitude(Plongitude);

                distance = child.distanceTo(parent);
                DisRound = 550;
                dynamicActivation = DisRound * weight;                          

                try {
                    Thread.sleep(1000);

                    if (test)
                    {
                        if(dynamicActivation > threshold)
                        {
                            finish();
                            new Timer().schedule(new MapsTimer(), 5000);
                            test = false;                               
                        }   
                        Log.d("ACTIVATION", Boolean.toString(test));
                    }
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    });
    dist.start(); 
```

这是 MapsTimer 任务

```
private class MapsTimer extends TimerTask {
    @Override
    public void run() {
        runOnUiThread(new Runnable() {

            public void run() {
                int duration = Toast.LENGTH_SHORT;
                CharSequence text = "YOUR CHILD HAS TRAVELLED OUTSIDE PROXIMITY";
                Context context = getApplicationContext();
                proximityAlert = Toast.makeText(context, text, duration);
                proximityAlert.show();
                alarmSound.start();                 

                openMaps();
            }
        });
    }
} 
```

我在 if 语句中调用完成。我已经在这里呆了 10 个小时了，我的脑袋都快融化了，我敢肯定这很简单，但只有当你知道怎么做的时候！！

问候，加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:39:51.353

您的问题和代码尚不清楚，但通常在将您切换到活动 B 的代码之后，您应该调用完成活动 A 的 finish()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:04:09.087

谢谢大家的帮助，我自己整理的。我只是在 while 循环中插入了一个中断。如下：

```
Thread dist = new Thread(new Runnable() {
        public void run() {

            while (true) {

                child = new Location("point A");

                child.setLatitude(Clatitude);
                child.setLongitude(Clongitude);

                parent = new Location("point B");

                parent.setLatitude(Platitude);
                parent.setLongitude(Plongitude);

                distance = child.distanceTo(parent);

                // DisRound = Math.round(distance * 100.0) / 100.0;
                DisRound = 550;

                dynamicActivation = DisRound * weight;                          

                try {
                    Thread.sleep(1000);

                        if(dynamicActivation > threshold)
                        {   
                            proximityAlert.show();
                            alarmSound.start(); 
                            new Timer().schedule(new MapsTimer(), 5000);
                            break;                          
                        }   
                        Log.d("ACTIVATION", Boolean.toString(test));

                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            finish();
        }
    });
    dist.start(); 
```

因此，一旦显示警报，播放警报并调用 mapsTimer，它就会跳出无限循环，不再需要它，然后我调用 finish();

# html - 滚动父级溢出时的水平滚动：隐藏

> ID：16170677
> 
> 赞同：0
> 
> 时间：2013-04-23T13:30:35.143
> 
> 标签：html, css

我的页面上有一个元素，它是一个固定容器的子元素，该容器也有`overflow:hidden`.

我想做的是让孩子水平滚动。尽管似乎没有任何效果，但我尝试过什么，这是我的代码。

```
<div class="container service-overview">
            <h1 class="section-header">Our Services<span>Whatever your needs, we have the experts on hand.</span></h1>
            <hr class="dashed" />
            <div class="scrollArea">
                <div class="quad">
                    <h3>Personal Injury</h3>
                    <img src="<?php echo get_bloginfo('template_url'); ?>/_/img/services-thumb.jpg" />
                    <hr class="dashed"/>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                    incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, 
                    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. 
                    Duis aute irure dolor in reprehenderit in voluptate velit</p>
                    <div class="more">
                        <a href="<?php echo get_permalink(152); ?>" class="user-button">More</a>
                    </div>
                </div>
                <div class="quad">
                    <h3>Employment</h3>
                    <img src="<?php echo get_bloginfo('template_url'); ?>/_/img/services-thumb.jpg" />
                    <hr class="dashed"/>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                    incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, 
                    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. 
                    Duis aute irure dolor in reprehenderit in voluptate velit</p>
                    <div class="more">
                        <a href="<?php echo get_permalink(154); ?>" class="user-button">More</a>
                    </div>
                </div>
                <div class="quad">
                    <h3>Wills &amp; Probate</h3>
                    <img src="<?php echo get_bloginfo('template_url'); ?>/_/img/services-thumb.jpg" />
                    <hr class="dashed" />
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                    incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, 
                    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. 
                    Duis aute irure dolor in reprehenderit in voluptate velit</p>
                    <div class="more">
                        <a href="<?php echo get_permalink(158); ?>" class="user-button">More</a>
                    </div>
                </div>
                <div class="quad">
                    <h3>Company Law</h3>
                    <img src="<?php echo get_bloginfo('template_url'); ?>/_/img/services-thumb.jpg" />
                    <hr class="dashed" />
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                    incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, 
                    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. 
                    Duis aute irure dolor in reprehenderit in voluptate velit</p>
                    <div class="more">
                        <a href="<?php echo get_permalink(156); ?>" class="user-button">More</a>
                    </div>
                </div>
            </div>
        </div> 
```

**CSS**

```
 .container, .wrapper, .condense {
width: 100%;
overflow: hidden;
}

.service-overview {
font-size: 15px;
font-size: .9375rem;
line-height: 133%;
padding: 0 0 124px;
}

service-overview .quad {
display: inline-block;
width: 50%;
position: relative;
border-bottom: 0 none;
float: left;
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:38:02.420

如果我说得对，您正在尝试滚动（使用鼠标滚轮）并且您想要水平移动可滚动区域。

水平滚动不能用鼠标滚轮所指的垂直滚动来完成。您必须编写一些js来拦截滚动（jquery scroll/）然后您需要根据滚动动作滚动到水平位置（jquery scrollLeft）

这是我找到的一个例子=> [http://css-tricks.com/snippets/jquery/horz-scroll-with-mouse-wheel/](http://css-tricks.com/snippets/jquery/horz-scroll-with-mouse-wheel/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:35:42.947

您可以在元素上尝试固定高度。每当文本数量不符合参数（高度）时，元素应该自动增长滚动条。请参阅此链接。我想它可以回答你的问题。

[http://www.quackit.com/html/codes/html_scroll_box.cfm](http://www.quackit.com/html/codes/html_scroll_box.cfm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T21:30:13.807

让我在这里引用：

> 答案是：你不能。要么父母有溢出：隐藏然后所有子元素都将被剪裁，或者你有溢出：其他隐藏。

你有几个选择：

1）删除`overflow:hidden`为什么你首先需要这个？
2）取出`div.scrollArea`容器`div.container service-overview`并使其成为容器的兄弟，如下面的伪代码：

```
<parent>    
   <original-container style="overflow:hidden">
      <elements to be clipped>
   </container>

   <scrollarea style="overflow:visible">
      <elements to be shown>
   </container>
</parent> 
```

除此之外，恐怕没有办法解决这个问题。

参考：[覆盖溢出：隐藏](https://stackoverflow.com/questions/10584020/overriding-overflow-hidden)

# google-chrome-extension - chrome扩展：获取存储值并传递给另一个函数

> ID：16170680
> 
> 赞同：0
> 
> 时间：2013-04-23T13:30:44.647
> 
> 标签：google-chrome-extension

我使用 chrome.storage.local.get() 从 Chrome 存储中获取值。我需要能够在函数中使用这个值。

我真正想做的是在 get 函数之外访问 the_userid ，但这不起作用：

```
function my_f(userid){
  alert("I'm called");
}

var the_userid;
chrome.storage.local.get('userid', function (result) {
    the_userid = userid.result;
 }

my_f(the_user_id); 
```

所以我认为传递函数 my_f 会起作用：

```
function my_f(userid){
  alert("I'm called");
}

chrome.storage.local.get('userid', function (result, my_f) {
    var the_userid = userid.result;
    my_f(the_user_id);
 } 
```

但是 my_f 没有被调用。

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:35:58.493

在您的第二次尝试中，您几乎做到了。您将调用移动到`my_f`回调函数内部是正确的。

*但是*，您已经声明了一个在回调中调用的参数，该参数从外部范围`my_f`“遮蔽”了原始内容。`my_f`由于`chrome.storage.local.get`只将一个参数传递给其回调（您已将其命名为`result`），因此为其他参数分配了 value `undefined`。因此，您的回调中的变量`my_f`在`undefined`.

相反，只需删除`my_f`参数：

```
chrome.storage.local.get('userid', function (result) {
    var the_userid = userid.result;
    my_f(the_user_id);
} 
```

然后`my_f`回调中的变量将引用`my_f`外部范围中定义的函数。

# node.js - 页面包含 iframe 登录后获取新的 cookie

> ID：16170689
> 
> 赞同：5
> 
> 时间：2013-04-23T13:31:15.057
> 
> 标签：node.js, session, cookies, express, appfog

我正在使用 express 编写一个网络应用程序。该应用程序在我的本地主机上运行良好。但是当我将它上传到appfog时，它有这样的问题：

在登录页面登录后，我打开一个带有 iframe 的页面（iframe 是同一个域），浏览器（chrome）给它一个新的 cookie！

如果我在登录后首先打开 iframed(child) 页面，然后打开父页面，它可以使用相同的 cookie 正常工作。

我使用这个关于会话的代码：

```
var memstore = express.session.MemoryStore;

app.configure(function(){
  app.use(express.cookieParser('your secret here'));
  app.use(express.session({cookie: {maxAge: 2000000}, store: memstore({
    reapInterval: 60000 * 10
  }), secret: 'your secret here'}));
}); 
```

我用它来破坏会话：

```
req.session.destroy(); 
```

注销页面也在 iframe 中。

# ksh - 数组分配失败，数据中有连字符/破折号

> ID：16170695
> 
> 赞同：0
> 
> 时间：2013-04-23T13:31:24.303
> 
> 标签：ksh

我有一个命令，其输出是：

```
"-1/2"
"-B"
"A"
"C" 
```

但是，当我想将命令的输出分配给数组时，例如：

```
temp=`command`
eval set -A array $temp 
```

它告诉我：

```
./test.ksh[6]: -1/2: 0403-010 A specified flag is not valid for this command. 
```

但是，如果我删除前两行输入中的连字符（在 的帮助下`sed`），则可以毫无问题地分配数组。这是什么原因？有什么方法可以保留连字符数据并将它们也分配到数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:20:56.060

当我在 ksh93 中尝试这个时，我看到了

```
$ out='"-1/2"
"-B"
"A"
"C"'
$ echo "$out"
"-1/2"
"-B"
"A"
"C"
$ set -A ary $out 
$ echo "${ary[@]}"
"-1/2" "-B" "A" "C"
$ set -o vi
$ unset ary
$ eval set -A ary $out
ksh: eval[1]: set: -1: unknown option
ksh: eval[1]: set: -/: unknown option
ksh: eval[1]: set: -2: unknown option
Usage: set [-sabefhkmnprtuvxBCGH] [-A name] [-o[option]] [arg ...]
$ eval set -A ary -- $out
$ echo "${ary[@]}"       
-1/2 -B A C 
```

错误信息表明在 之后放置更多选项是有效的`-A name`，因此您必须使用`--`标记选项的结尾。

我仍然认为 using`eval`是一种删除引号的可怕方法。

# magento - 在所有 URL 的产品 URL 中使用类别 - Magento

> ID：16170696
> 
> 赞同：0
> 
> 时间：2013-04-23T13:31:25.680
> 
> 标签：magento, url, categories

Systeam 为一种产品创建两个 URL：

[http://www.website.com/shirt/white-collar-shirt](http://www.website.com/shirt/white-collar-shirt)

[http://www.website.com/white-collar-shirt](http://www.website.com/white-collar-shirt)

我只想要一个带有类别的 URL....

在我们的商店中，我们的产品不多 - 30 左右。使用 .htaccess 重定向是个好主意吗？

**重定向301“/white-collar-shirt” website.co.uk//shirts/white-collar-shirt**

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:44:48.893

使用 .htaccess 是个坏主意，因为每次更改产品的 url 键或添加新键时都必须对其进行更改。

这不是一项简单的任务，实现它的一种方法是创建自定义扩展，它将为产品创建 url 重写为带有类别的 url。

另一种适合您的方式是在配置“目录 > 搜索引擎优化 > 对产品使用规范链接元标记”中进行设置，搜索引擎会将该产品的 url 存储为两个 url 的一个，但它将是没有类别的 url。它更容易开发。

# actionscript - 1151: 与命名空间内部中的定义 i 存在冲突

> ID：16170698
> 
> 赞同：0
> 
> 时间：2013-04-23T13:31:37.850
> 
> 标签：actionscript, flash-cs3

我是动作脚本和 Flash 的新手，我需要一些有关此代码的帮助，我找不到它有什么问题，它给出了此错误：1151：与内部命名空间中的定义 i 存在冲突。（var i:Number = 0;）

```
 stop();

menu_item_group.menu_item._visible = false;
var spacing:Number = 5;
var total:Number = menu_label.length;
var distance_y:Number = menu_item_group.menu_item._height + spacing;
var i:Number = 0;

for( ; i < total; i++ )
{
    menu_item_group.menu_item.duplicateMovieClip("menu_item"+i, i);
    menu_item_group["menu_item"+i]._x = menu_item._x;
    menu_item_group["menu_item"+i]._y = i * distance_y;
    menu_item_group["menu_item"+i].over = true;
    menu_item_group["menu_item"+i].item_text.text = menu_label[i];
    menu_item_group["menu_item"+i].item_url = menu_url[i];

    menu_item_group["menu_item"+i].onRollOver = function() 
    {
        this.over = false;
    }
    menu_item_group["menu_item"+i].onRollOut = menu_item_group["menu_item"+i].onDragOut = function() 
    {
        this.over = true;
    }
    menu_item_group["menu_item"+i].onRelease = function() 
    {
        getURL(this.item_url);
    }
    menu_item_group["menu_item"+i].onEnterFrame = function() 
    {
        if( this.over == true ) this.prevFrame();
        else this.nextFrame();
    }
} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:08:55.140

检查你的代码。该变量`i`已在代码中声明。

# java - JFrame 无法正确显示

> ID：16170703
> 
> 赞同：1
> 
> 时间：2013-04-23T13:32:17.030
> 
> 标签：java, sql, swing, jdbc, jframe

我的程序有设计问题。

首先显示一个带有组合框的 Jframe。组合框中充满了您选择的城镇名称并点击搜索。

然后程序会显示一个 jtable，其中包含表中的值。它生成 Jtable 和信息，但 jframe 本身显示为好像没有设置大小参数，导致不显示任何内容，直到您通过将其拖动到右下角手动增加大小。

这是Jtable的代码

```
public class Display_All extends JFrame
{
    public Display_All(Object town)
    {
        Vector columnNames = new Vector();
        Vector data = new Vector();

        try
        {
            //  Connect to an Access Database

            String driver = "com.mysql.jdbc.Driver";
            String url ="jdbc:mysql://localhost:3306/ire";
            String userid = "root";
            String password = "password";

            Class.forName( driver );
            Connection connection = DriverManager.getConnection( url, userid, password );

            //  Read data from a table

            String sql = "(SELECT Activities_Name,       Activities_Email,Activities_Address_1,   Town, Activities_Phone ,Activities_Mobile, Activities_Web_Address, Activities_Owner FROM activities WHERE Town ='"+town+"')"
                    + "UNION ALL ( SELECT Attraction_Name, Attraction_Email, Attraction_Address_1, Town, Attraction_Phone, Attraction_Mobile, Attraction_Web_Address, Attraction_Owner FROM attractions WHERE Town = '"+town+"')"
                    + "UNION ALL ( SELECT BB_Name, BB_Email, BB_Address_1 ,Town, BB_Phone, BB_Mobile, BB_Web_Address, BB_Owner FROM bb WHERE Town = '"+town+"')"
                    + "UNION ALL ( SELECT Hotel_Name ,Hotel_Email ,Hotel_Address_1, Town, Hotel_Phone, Hotel_Mobile, Hotel_Web_Address, Hotel_Owner FROM hotels WHERE Town = '"+town+"')"
                    + "UNION ALL ( SELECT Pub_Name, Pub_Email ,Pub_Address_1, Town, Pub_Phone ,Pub_Mobile, Pub_Web_Address, Pub_Owner FROM pubs WHERE Town = '"+town+"')"
                    + "UNION ALL ( SELECT Restaurant_Name, Restaurant_Email, Restaurant_Address_1, Town, Restaurant_Phone, Restaurant_Mobile, Restaurant_Web_Address, Restaurant_Owner FROM restaurant WHERE Town = '"+town+"')"
                    + "UNION ALL ( SELECT Self_Catering_Name, Self_Catering_Email, Self_Catering_Address_1, Town, Self_Catering_Phone, Self_Catering_Mobile, Self_Catering_Web_Address, Self_Catering_Owner FROM self_catering WHERE Town = '"+town+"')";

            Statement stmt = connection.createStatement();
            ResultSet rs = stmt.executeQuery( sql );
            ResultSetMetaData md = rs.getMetaData();
            int columns = md.getColumnCount();

            //  Get column names

            columnNames.addElement( "Business Name" );
            columnNames.addElement( "Email" );
            columnNames.addElement( "Address 1" );
            columnNames.addElement( "Town" );
            columnNames.addElement( "Phone" );
            columnNames.addElement( "Mobile" );
            columnNames.addElement( "Web Address" );
            columnNames.addElement( "Owner" );

            //  Get row data

            while (rs.next())
            {
                Vector row = new Vector(columns);

                for (int i = 1; i <= columns; i++)
                {
                    row.addElement( rs.getObject(i) );
                }

                data.addElement( row );
            }

            rs.close();
            stmt.close();
            connection.close();
        }
        catch(Exception e)
        {
            System.out.println( e );
        }

        //  Create table with database data

        JTable table = new JTable(data, columnNames )
        {
            public Class getColumnClass(int column)
            {
                for (int row = 0; row < getRowCount(); row++)
                {
                    Object o = getValueAt(row, column);

                    if (o != null)
                    {
                        return o.getClass();
                    }
                }

                return Object.class;
            }
        };

        JScrollPane scrollPane = new JScrollPane( table );
        getContentPane().add( scrollPane );

    //        JPanel buttonPanel = new JPanel();
    //        getContentPane().add( buttonPanel, BorderLayout.SOUTH );
    }

    public static void main(String[] args)
    {
        Display_All frame = new Display_All("town");
        frame.setDefaultCloseOperation( DISPOSE_ON_CLOSE );
        frame.setPreferredSize(new Dimension(400, 300));
        frame.setVisible(true);
    }

     public void run() {
        new Display_All("town").setVisible(true);
     }
    } 
```

谁能阐明我做错了什么？

我已经尝试了很多不同的方法来了解这一点，但是该程序似乎没有响应我放入其中的任何内容？

很难解释我会展示图片，但我的声誉太低了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:39:46.287

您必须设置 JFrame 的大小，或者打包 JFrame。

此外，您需要将 Swing 组件放在事件调度线程 (EDT) 上。

```
public static void main(String[] args)
{
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            Display_All frame = new Display_All("town");
            frame.setDefaultCloseOperation( DISPOSE_ON_CLOSE );

            frame.setSize(new Dimension(400, 300));  // or
            frame.pack();

            frame.setVisible(true);
        }       
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:51:31.410

1.  GUI 和数据库的拆分逻辑，列名可以在 -- 块之前定义`try`，`catch`因为`finally`似乎`ResultSetMetaData`（从不）没有使用

2.  `rs.close();`并且`stmt.close();`应该`connection.close();`关闭`finally block`

3.  [`JTable`,`XxxTableModel`是基于二维数组](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data), 那么`Vector data = new Vector();`应该是`Vector<Vector<Object>> data = new Vector<Vector<Object>>();`

4.  定义为局部变量 ( `JFrame`, `JTable`, `JScrollpane`)，在整个应用程序期间，所有存在的对象在您的 GUI 中仍然可见

5.  见[InitialThread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)，否则`JFrame.pack()`并且`JFrame.setVisible(true)`应该被包裹到`invokeLater()`

6.  `JTable`in`JScrollPane`不返回正确的`Dimension`，需要覆盖`getPreferredScrollableViewportSize(new Dimension(x, y));`然后`JFrame.pack()`为任何`JComponent`包裹的返回正确的坐标`JScrollPane`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:24:55.107

这个主要方法将使您能够看到 JFrame 并将其设置为系统的外观。即 Windows 操作系统，这意味着 JFrame 看起来像一个 Windows 对话框。

```
public static void main(String[] args) 
{
    try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (Exception ignored) {}
    MainWindow mainWindow = new MainWindow();
    mainWindow.setDefaultCloseOperation(EXIT_ON_CLOSE);
    mainWindow.setLocationRelativeTo(null);
    mainWindow.setVisible(true);
    mainWindow.setSize(500,300);
} 
```

# numpy - 在 3D numpy 网格中绘制/采样球体

> ID：16170705
> 
> 赞同：4
> 
> 时间：2013-04-23T13:32:21.077
> 
> 标签：numpy, geometry, drawing, sampling

我想对球形物体进行基于体素的测量，以 numpy 数组表示。由于采样，这些球体被表示为一组立方体（因为它们是在数组中采样的）。我想通过这个网格限制来模拟引入的错误。有没有办法在一个 numpy 网格中绘制一个 3D 球体来运行我的模拟？（所以基本上，单位长度为 1 的球体将是数组中的一个点）

还是有另一种计算采样引入的误差的方法？

在二维中，这似乎很容易......![2D 采样](https://i.stack.imgur.com/RO9GV.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T13:45:26.457

最直接的方法是创建一个边界框数组，在每个点保存到球体中心的距离：

```
>>> radius = 3
>>> r2 = np.arange(-radius, radius+1)**2
>>> dist2 = r2[:, None, None] + r2[:, None] + r2
>>> volume = np.sum(dist2 <= radius**2)
>>> volume
123 
```

2D 案例更容易可视化：

```
>>> dist2 = r2[:, None] + r2
>>> (dist2 <= radius**2).astype(np.int)
array([[0, 0, 0, 1, 0, 0, 0],
       [0, 1, 1, 1, 1, 1, 0],
       [0, 1, 1, 1, 1, 1, 0],
       [1, 1, 1, 1, 1, 1, 1],
       [0, 1, 1, 1, 1, 1, 0],
       [0, 1, 1, 1, 1, 1, 0],
       [0, 0, 0, 1, 0, 0, 0]])
>>> np.sum(dist2 <= radius**2)
29 
```

# java - Spring MVC 控制器以错误的 UTC 偏移量接收日历

> ID：16170706
> 
> 赞同：0
> 
> 时间：2013-04-23T13:32:23.123
> 
> 标签：java, spring, date, model-view-controller, calendar

我对 Spring MVC 如何处理日期有点困惑。

我制作了一个接收日历对象的控制器。

```
@RequestParam(value = "startdate", required = false) 
@DateTimeFormat(pattern="yyyy-MM-dd'T'HH:mm:ss.SSSZ") Calendar startDate 
```

然后我编写了一个单元测试，发送以下日期**2012-01-10T11:00:00.000+00:00**但是当我查看到达服务器端的内容并调用

```
int i = startDate.get(Calendar.HOUR_OF_DAY); 
```

我最终得到 i = 12，而不是预期的 11。这是正常行为吗？另外，如果这是我想念的东西，以及将其实际到达 11:00:00 的最佳方法是什么？提及我目前处于 UTC+1 时区并且服务器在我的机器上本地运行可能会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:22:19.737

我相信已经找到了答案。它似乎与运行 JVM 的时区有关。我基本上将其添加到我的启动方法中

```
 System.setProperty("user.timezone", "UTC");
    TimeZone.setDefault(TimeZone.getTimeZone("UTC")); 
```

这修复了行为，尽管我希望我没有破坏运行日期的应用程序中的任何其他内容。单元测试仍然是绿色的，但希望它们中没有误报

# c# - 通过给定的第一个索引获取二维数组的元素计数

> ID：16170707
> 
> 赞同：0
> 
> 时间：2013-04-23T13:32:27.647
> 
> 标签：c#, multidimensional-array

我有这样定义的数组：

```
List<DocumentFields>[,] dummyArray = new List<DocumentFields>[8,8]; 
```

它从数据库中获取记录。我需要准备这个数组以在 asp.net mvc3 视图中显示，所以我以标准方式对其进行迭代：

```
 for (int i = 0; i < ViewBag.Header.GetLength(0); i++)
              {
                    for (int j = 0; j < ViewBag.Header.GetLength(1); j++)
                    { 
```

但我意识到，实际上对于第二次迭代，我不需要 Length 而是需要实际存在的元素的数量。所以`ViewBag.Header.GetLength(1)`我不需要这个：

```
ViewBag.Header.Get_Count_Of_The_Elements_For_The_Second_Index 
```

我找不到可以立即执行此操作的属性。也许是某种使用方式`Length`或什么的……不知道……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:37:20.477

您的 dummyArray 是一个二维列表数组。要获得列表大小，您可以`dummyArray[i,j].Count`在内部循环中使用。

# android - 将 RoboSpice 与 Roboguice 一起使用

> ID：16170708
> 
> 赞同：1
> 
> 时间：2013-04-23T13:32:30.463
> 
> 标签：android, roboguice, robospice

是否有任何示例说明我们如何将 SpringAndroidSpiceRequest 对象类注入到我们的活动中。这是我的课

```
public class GenericService<E> extends  SpringAndroidSpiceRequest<E> {

    public GenericService(Class<E> clazz) {
        super(clazz);

    }

    @Override
    public E loadDataFromNetwork() throws Exception {
        return null;
    }

} 
```

现在我不能为这个类提供一个无参数的构造函数，因为由于设计的限制，我不能在构造函数中简单地说 E.class。我能做的就是说

```
class MyService extends GenericService<Login.Response>{

    public MyService() {
        super(Login.Response.class);

    }

} 
```

然后将 MyService 的值注入到我的活动中。但是这种方法意味着必须为我的每个请求对象创建一个专门的类 [大约有 32 个 :( ]。谁能告诉我如何实现我想要做的事情？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T15:44:56.993

在我们的真实应用程序中，我们确实为每个请求提供了一个专门的请求类。这就是robospice的模型。继承有时可以帮助泛化请求，但您通常最终会为每个休息服务创建一个请求。

# java - 文件开头的奇怪字符？

> ID：16170715
> 
> 赞同：1
> 
> 时间：2013-04-23T13:32:52.753
> 
> 标签：java, file-io

从文件读取时，我读取的第一行有一个奇怪的字符（使用 BufferedReader）。如何删除这个角色？我知道我可以手动完成，但我想以正确的方式完成。

![在此处输入图像描述](https://i.stack.imgur.com/DtwvJ.png) 图片（NetBeans 输出）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T21:58:34.897

使用 OP 提供的链接中的相关代码，这里是对按预期工作的问题的答案。

```
import java.io.*;

public class UTF8ToAnsiUtils {

    // FEFF because this is the Unicode char represented by the UTF-8 byte order mark (EF BB BF).
    public static final String UTF8_BOM = "\uFEFF";

    public static void main(String args[]) {
        try {
            if (args.length != 2) {
                System.out
                        .println("Usage : java UTF8ToAnsiUtils utf8file ansifile");
                System.exit(1);
            }

            boolean firstLine = true;
            FileInputStream fis = new FileInputStream(args[0]);
            BufferedReader r = new BufferedReader(new InputStreamReader(fis,
                    "UTF8"));
            FileOutputStream fos = new FileOutputStream(args[1]);
            Writer w = new BufferedWriter(new OutputStreamWriter(fos, "Cp1252"));
            for (String s = ""; (s = r.readLine()) != null;) {
                if (firstLine) {
                    s = UTF8ToAnsiUtils.removeUTF8BOM(s);
                    firstLine = false;
                }
                w.write(s + System.getProperty("line.separator"));
                w.flush();
            }

            w.close();
            r.close();
            System.exit(0);
        }

        catch (Exception e) {
            e.printStackTrace();
            System.exit(1);
        }
    }

    private static String removeUTF8BOM(String s) {
        if (s.startsWith(UTF8_BOM)) {
            s = s.substring(1);
        }
        return s;
    }
} 
```

# batch-file - 返回错误级别 Batch

> ID：16170716
> 
> 赞同：0
> 
> 时间：2013-04-23T13:32:59.033
> 
> 标签：batch-file, registry, errorlevel

我有这个脚本，脚本工作正常。除了一部分。我试图在每次查询后返回错误级别以确定我的错误级别。我知道我的语法错误，请帮忙。

```
@echo off
    setlocal enabledelayedexpansion
set "ports=HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Ports"

rem get only the first token of each line of "reg query"
for /f %%I in (
    'reg query "%ports%"'
) do (
IF !errorlevel!==0  echo(%%I | findstr /i "c:\\convertdoc\\output\\silentprinttemp\\.*\.ps" >NUL && (
        rem (if "findstr" didn't exit with an abnormal error code)
        echo Deleting item %%I
        ECHO [PW-MOD] reg delete "%ports%" /v "%%I" /f
    )
) 
```

[`Dk 68 61 63 6b`根据评论编辑] [重新编辑 PW 以加入断线并禁用可能具有破坏性的指令`'reg delete'`]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:35:19.517

在 中查找延迟扩展`help set`。它准确地解释了你的问题。

要解决它使用

```
setlocal enabledelayedexpansion 
```

然后`!errorlevel!`代替`%errorlevel%`.

另一种选择是使用

```
if not errorlevel 1 
```

（语义略有不同，可能与您的情况无关）。

# ruby-on-rails - 如何在委托字段上使用 ransack

> ID：16170717
> 
> 赞同：8
> 
> 时间：2013-04-23T13:33:00.580
> 
> 标签：ruby-on-rails, ransack

我有以下型号

```
class Position < ActiveRecord::Base

  belongs_to :position_name
  delegate :name, to: :position_name 
```

而这个搜索表格

```
 = search_form_for @search, url: '#', method: 'GET', html: {id: nil, class: "term_search_form"}  do |f|
      = f.text_field :name_cont, class: 'search-query', id: nil, placeholder: t('search') 
```

我仍然收到此错误消息：

```
undefined method `name_cont' for #<Ransack::Search:0x007f97187c5b80> 
```

我认为这是因为委托方法名称。

如何在委托方法上使用 ransack？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-25T15:04:01.083

这是一个迟到的答案，但也许它会帮助别人。所以，我有一个类似的问题。

我有 3 个模型：面积、建筑物和产品，其中面积`has_many :buildings`、建筑物`has_many :products`。在我使用的产品模型中`delegate :area_id, to: :building`。

我使用 ransack 按名称、区域、建筑物等字段搜索产品。在我的控制器的操作中，@search 变量包含关联的 Buiding 模型，如下所示：

`@search = Product.includes(:building).search(params[:q])`

所以我的 search_form 就像

```
= search_form_for @search, url: user_products_path do |f|
  %td
  %td= f.text_field :name_cont, class: "form-control", placeholder: t('.name')
  %td= f.select :building_area_id_eq, options_for_select(Area.data_for_select(true), q_param(:building_area_id_eq))
  %td= f.select :building_id_eq, options_for_select(Building.data_for_select(true), q_param(:building_id_eq)) 
```

也就是说，如果在您的控制器中包含关联的模型：position_name，那么您应该在视图中使用`= f.text_field :position_name_name_cont`

# reflection - 根据数据类信息自动创建 TableView 列

> ID：16170718
> 
> 赞同：3
> 
> 时间：2013-04-23T13:33:03.720
> 
> 标签：reflection, javafx-2

我有这个可编辑的 JavaFX 表来编辑数据：

```
public class DataTable {

    public void initTable(Stage primaryStage, Group root, Scene scene) {

        tableView.setEditable(true);
        Callback<TableColumn, TableCell> cellFactory =
                new Callback<TableColumn, TableCell>() {
            @Override
            public TableCell call(TableColumn p) {
                return new EditingCell();
            }
        };

        TableColumn columnMonth = new TableColumn("Month");
        columnMonth.setCellValueFactory(
                new PropertyValueFactory<Record, String>("fieldMonth"));

        TableColumn columnValue = new TableColumn("Value");
        columnValue.setCellValueFactory(
                new PropertyValueFactory<Record, Double>("fieldValue"));

        //--- Add for Editable Cell of Value field, in Double
        columnValue.setCellFactory(cellFactory);
        columnValue.setOnEditCommit(
                new EventHandler<TableColumn.CellEditEvent<Record, Double>>() {
            @Override
            public void handle(TableColumn.CellEditEvent<Record, Double> t) {
                ((Record) t.getTableView().getItems().get(
                        t.getTablePosition().getRow())).setFieldValue(t.getNewValue());
            }
        });
        //---

        tableView.setItems(dataList);
        tableView.getColumns().addAll(columnMonth, columnValue);

        VBox vBox = new VBox();
        vBox.setSpacing(10);
        vBox.getChildren().add(tableView);
        vBox.setLayoutX(410);
        vBox.setLayoutY(34);

        root.getChildren().add(vBox);

    }

    public class Record {

        private SimpleStringProperty fieldMonth;
        private SimpleDoubleProperty fieldValue;

        Record(String fMonth, double fValue) {
            this.fieldMonth = new SimpleStringProperty(fMonth);
            this.fieldValue = new SimpleDoubleProperty(fValue);
        }

        public String getFieldMonth() {
            return fieldMonth.get();
        }

        public double getFieldValue() {
            return fieldValue.get();
        }

        public void setFieldMonth(String fMonth) {
            fieldMonth.set(fMonth);
        }

        public void setFieldValue(Double fValue) {
            fieldValue.set(fValue);
        }
    }
    private TableView<Record> tableView = new TableView<>();
    private ObservableList<Record> dataList =
            FXCollections.observableArrayList(
            new Record("January", 100),
            new Record("February", 200),
            new Record("March", 50),
            new Record("April", 75),
            new Record("May", 110),
            new Record("June", 300),
            new Record("July", 111),
            new Record("August", 30),
            new Record("September", 75),
            new Record("October", 55),
            new Record("November", 225),
            new Record("December", 99));

    class EditingCell extends TableCell<Record, Double> {

        private TextField textField;

        public EditingCell() {
        }

        @Override
        public void startEdit() {
            super.startEdit();

            if (textField == null) {
                createTextField();
            }

            setGraphic(textField);
            setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
            textField.selectAll();
        }

        @Override
        public void cancelEdit() {
            super.cancelEdit();

            setText(String.valueOf(getItem()));
            setContentDisplay(ContentDisplay.TEXT_ONLY);
        }

        @Override
        public void updateItem(Double item, boolean empty) {
            super.updateItem(item, empty);

            if (empty) {
                setText(null);
                setGraphic(null);
            } else {
                if (isEditing()) {
                    if (textField != null) {
                        textField.setText(getString());
                    }
                    setGraphic(textField);
                    setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
                } else {
                    setText(getString());
                    setContentDisplay(ContentDisplay.TEXT_ONLY);
                }
            }
        }

        private void createTextField() {
            textField = new TextField(getString());
            textField.setMinWidth(this.getWidth() - this.getGraphicTextGap() * 2);
            textField.setOnKeyPressed(new EventHandler<KeyEvent>() {
                @Override
                public void handle(KeyEvent t) {
                    if (t.getCode() == KeyCode.ENTER) {
                        commitEdit(Double.parseDouble(textField.getText()));
                    } else if (t.getCode() == KeyCode.ESCAPE) {
                        cancelEdit();
                    }
                }
            });
        }

        private String getString() {
            return getItem() == null ? "" : getItem().toString();
        }
    }
} 
```

我必须创建可以显示数据库表中的数据并编辑表的小程序。当我单击一个表时，我遇到了这个问题，我必须从 JPA 对象生成动态表视图，所以我每次都有一个表但有不同的列。我可以以某种方式使用来自 JPA 的数据生成每个时间表并根据案例自动更新列吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T10:01:43.397

您可以使用反射来实现这一点。例如，解析数据类的方法并为每个以 结尾的方法创建列`Property`：

```
public class SmartTableView extends Application {

    private void populateColumns(Class clazz, TableView table) {
        for (Method method : clazz.getMethods()) {
            String name = method.getName();
            if (name.endsWith("Property")) {
              String propName = name.replace("Property", "");

              TableColumn column = new TableColumn(propName);
              column.setCellValueFactory(new PropertyValueFactory<>(propName));
              table.getColumns().add(column);
            }
        }
    }

    @Override
    public void start(Stage primaryStage) {
        final ObservableList<Person> data = FXCollections.observableArrayList(
                new Person("Jacob", "Smith", "jacob.smith@example.com"),
                new Person("Isabella", "Dow", "isabella.dow@example.com"),
                new Person("Ethan", "Williams", "ethan.williams@example.com"),
                new Person("Emma", "Jones", "emma.jones@example.com"),
                new Person("Michael", "Brown", "michael.brown@example.com"));

        TableView table = new TableView(data);
        populateColumns(Person.class, table);

        Scene scene = new Scene(table, 300, 250);
        primaryStage.setTitle("Hello");
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }

    public static class Person {

        private final SimpleStringProperty firstName;
        private final SimpleStringProperty lastName;
        private final SimpleStringProperty email;

        private Person(String fName, String lName, String email) {
            this.firstName = new SimpleStringProperty(fName);
            this.lastName = new SimpleStringProperty(lName);
            this.email = new SimpleStringProperty(email);
        }

        public String getFirstName() {
            return firstName.get();
        }

        public void setFirstName(String fName) {
            firstName.set(fName);
        }

        public StringProperty firstNameProperty() {
            return firstName;
        }

        public String getLastName() {
            return lastName.get();
        }

        public void setLastName(String fName) {
            lastName.set(fName);
        }

        public StringProperty lastNameProperty() {
            return lastName;
        }

        public String getEmail() {
            return email.get();
        }

        public void setEmail(String fName) {
            email.set(fName);
        }

        public StringProperty emailProperty() {
            return lastName;
        }
    }
} 
```

# svg - 如何定义一个变换 ?

> ID：16170719
> 
> 赞同：1
> 
> 时间：2013-04-23T13:33:04.927
> 
> 标签：svg, transform

我想将变换应用于 SVG 中的独立对象，然后为该变换设置动画。

我可以这样做：

```
<rect (...) transform="rotate(30)" />
<circle (...) transform="rotate(30)" />
(...)
<path (...) transform="rotate(30)" /> 
```

但是我必须分别为每个元素设置动画。

我想做的是：

```
<defs>
  <transform id="rotation">
    <rotate angle="30" />
  </transform>
</defs>
<rect (...) transform="url(#rotation)" />
<circle (...) transform="url(#rotation)" />
(...)
<path (...) transform="url(#rotation)" /> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:53:14.440

将元素包装在`<g>`容器中并旋转它，例如

```
<g transform="rotate(30)">
<rect (...)  />
<circle (...)  />
(...)
<path (...) />
</g> 
```

当您为`<g>`变换属性设置动画时，所有子项都将旋转

# java - 如何在 java 中使用 selenium webdriver 查找图像标签以及如何检查它是否已正确显示？

> ID：16170720
> 
> 赞同：1
> 
> 时间：2013-04-23T13:33:11.843
> 
> 标签：java, selenium, selenium-webdriver, webautomation

我需要检查所有图像的网页，并使用 selenium webdriver 获取它们的属性，如 src 和 width 等。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:49:55.530

我会给你一些想法：

第一个我会从`findElements`返回所有元素的方法开始：

```
 List<WebElement> allImages = driver.findElements(By.ByTagName("img"));
 List<String> widthofImage = new ArrayList<String>;
 List<String> heighthOfImage = new ArrayList<String>; 
```

然后你将不得不遍历列表

```
 for (WebElement imageFromList: allImages){
   widthOfImage.add(imageFromList.getAttribute("width"));
   heighthOfImage.add(imageFromList.getAttribute("height"));
   //.. etc

 } 
```

然后您将这些值存储起来:) 然后您可以使用与上述相同的方式遍历它们...

**注意**我是从头顶写的。所以请仔细检查代码

顺便说一句，该`driver`变量被假定为健康且有生命的实例`WebDriver`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T04:04:17.593

## 通过标签查找元素并获取其属性

正如 Pavel Janicek 所说，您必须找到与标签“img”匹配的所有 WebElement。但是我经常创建抽象 WebElement 对象的对象（这可能是也可能不是一件好事）。

例如，以下对象可以将 Image 抽象为一种 WebElement（如果您愿意，可以扩展 WebElement）：

```
public class BasicElement {
    protected WebElement element;

    public BasicElement(WebElement element) {
        this.element = element;
    }
}

public class Image extends BasicElement {

    private String width;
    private String height;
    private String src;

    public Image(WebElement element) {
        super(element);

        assignWidth();
        assignHeight();
        assignHeight();
    }

    private void assignWidth() {
        width = element.getAttribute("width");
    }

    private void assignHeight() {
        height = element.getAttribute("height");
    }

    private void assignSrc() {
        src = element.getAttribute("src");
    }

    // various getters, setters and image related functionality

} 
```

然后您将遍历 WebElements 作为 Image 对象并分配它们的属性，如下所示：

```
List<Image> images;
List<WebElement> imageElements = driver.findElements(By.ByTagName("img"));
for (WebElement imageElement : imageElements) {
    images.add(new Image(imageElement));
} 
```

如果您扩展 WebElement，这可能会缩短。

## 确定元素的可见性

如果你想知道一个元素是否可见，那么我建议你实现一个等待：

```
public WebElement waitForElementVisible(WebDriver driver, final By selector, int timeOutInSeconds) {
    WebElement element;
    try{
        WebDriverWait wait = new WebDriverWait(driver, timeOutInSeconds);
        element = wait.until(ExpectedConditions.visibilityOfElementLocated(selector));

        return element;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

或者，如果您想知道元素是否存在：

```
public static WebElement waitForElementPresent(WebDriver driver, final By selector, int timeOutInSeconds) {
    WebElement element;
    try{
        WebDriverWait wait = new WebDriverWait(driver, timeOutInSeconds);
        element = wait.until(ExpectedConditions.presenceOfElementLocated(selector));

        return element;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

# mysql - 下一行的 MySQL 条件查询

> ID：16170727
> 
> 赞同：1
> 
> 时间：2013-04-23T13:33:28.043
> 
> 标签：mysql, select

我在 MySQL 中有一个名为 Session 的表，如下所示：

```
+-----+---------------------+---------------------+--------------------+
| id  | start               | finish              | name               |
+-----+---------------------+---------------------+--------------------+
| -12 | 2013-04-27 09:00:00 | 2013-04-27 13:00:00 | Saturday Setup 1   |
| -11 | 2013-04-27 13:00:00 | 2013-04-27 18:00:00 | Saturday Setup 2   |
| -10 | 2013-04-27 23:00:00 | 2013-04-28 08:00:00 | Saturday Night     |
|  -3 | 2013-04-28 08:00:00 | 2013-04-28 13:00:00 | Sunday Setup 1     |
|  -2 | 2013-04-28 13:00:00 | 2013-04-28 18:00:00 | Sunday Setup 2     |
|  -1 | 2013-04-28 23:00:00 | 2013-04-29 08:00:00 | Sunday Night       |
|   1 | 2013-04-29 09:00:00 | 2013-04-29 13:00:00 | Monday Setup 1     |
|   2 | 2013-04-29 13:00:00 | 2013-04-29 17:00:00 | Monday Setup 2     |
|   3 | 2013-04-29 17:00:00 | 2013-04-29 21:00:00 | Monday Setup 3     |
|   4 | 2013-04-29 23:00:00 | 2013-04-30 08:00:00 | Monday Night       |
|  10 | 2013-04-30 09:00:00 | 2013-04-30 13:00:00 | Tuesday Setup 1    |
|  11 | 2013-04-30 13:00:00 | 2013-04-30 17:00:00 | Tuesday Setup 2    |
|  12 | 2013-04-30 23:00:00 | 2013-05-01 08:00:00 | Tuesday Night      |
more rows etc... 
```

我想创建一个查询，它将选择表中的所有列，并在按 Start 排序时在同一天（如果有）显示下一个 id 的附加列。

结果将如下所示：

```
+-----+--------+---------------------+---------------------+--------------------+
| id  | nextid | start               | finish              | name               |
+-----+--------+---------------------+---------------------+--------------------+
| -12 |    -11 | 2013-04-27 09:00:00 | 2013-04-27 13:00:00 | Saturday Setup 1   |
| -11 |    -10 | 2013-04-27 13:00:00 | 2013-04-27 18:00:00 | Saturday Setup 2   |
| -10 |        | 2013-04-27 23:00:00 | 2013-04-28 08:00:00 | Saturday Night     |
|  -3 |     -2 | 2013-04-28 08:00:00 | 2013-04-28 13:00:00 | Sunday Setup 1     |
|  -2 |     -1 | 2013-04-28 13:00:00 | 2013-04-28 18:00:00 | Sunday Setup 2     |
|  -1 |        | 2013-04-28 23:00:00 | 2013-04-29 08:00:00 | Sunday Night       |
|   1 |      2 | 2013-04-29 09:00:00 | 2013-04-29 13:00:00 | Monday Setup 1     |
|   2 |      3 | 2013-04-29 13:00:00 | 2013-04-29 17:00:00 | Monday Setup 2     |
|   3 |      4 | 2013-04-29 17:00:00 | 2013-04-29 21:00:00 | Monday Setup 3     |
|   4 |        | 2013-04-29 23:00:00 | 2013-04-30 08:00:00 | Monday Night       |
|  10 |     11 | 2013-04-30 09:00:00 | 2013-04-30 13:00:00 | Tuesday Setup 1    |
|  11 |     12 | 2013-04-30 13:00:00 | 2013-04-30 17:00:00 | Tuesday Setup 2    |
|  12 |        | 2013-04-30 23:00:00 | 2013-05-01 08:00:00 | Tuesday Night      |
more rows etc... 
```

任何建议，将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:50:31.903

我不确定，但你可以试试这个

1.  为会话表名称创建一个视图 seesion_view 您可以选择在同一天显示下一个 id 的附加列
2.  然后您可以从表和 seesion_view 中选择您不会选择的数据。
3.  我不确定使用 join 是否可以，但您也可以尝试使用它

最后你的 MySql 应该是 5.4+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:46:21.680

它不会非常有效，因为索引不能用于评估自连接标准`DATE(..) = DATE(..)`，但您实际上是在尝试获得[分组最小值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：

```
SELECT cur.id, nxt.id nextid, cur.start, cur.finish, cur.name
FROM (
  SELECT      s1.*, MIN(s2.start) next
  FROM        Session s1
    LEFT JOIN Session s2
           ON DATE(s1.start) = DATE(s2.start)
          AND s1.start < s2.start
  GROUP BY    s1.start
) cur LEFT JOIN Session nxt ON cur.next = nxt.start 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/f406c/1/0)上查看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T14:13:13.117

这是我认为相关子查询有用的地方：

```
select id,
       (select id from session s2 where date(s.start) = date(s2.start) order by start desc limit 1
       ) as nextId
       start, finish, name
from session s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:44:22.423

Using the start date to decide if the days match, something like this should do it. A subselect to get the min id which is larger than another id for the same day. Not tested I'm afraid.

```
SELECT a.id, Sub1.MinId AS nextid, a.start, a.finish, a.name  
FROM SomeTable a
LEFT OUTER JOIN (SELECT a.id, MIN(b.id) AS MinId
FROM SomeTable a
INNER JOIN SomeTable b
ON DATE(a.start) = DATE(b.start)
AND a.id < b.id
GROUP BY a.id) Sub1
ON a.id = Sub1.id 
```

Or is id is not in start order

```
SELECT a.id, c.id AS nextid, a.start, a.finish, a.name  
FROM SomeTable a
LEFT OUTER JOIN (SELECT a.id, MIN(b.start) AS MinStart
FROM SomeTable a
INNER JOIN SomeTable b
ON DATE(a.start) = DATE(b.start)
AND a.id < b.id
GROUP BY a.id) Sub1
ON a.id = Sub1.id
LEFT OUTER JOIN SomeTable c
ON Sub1.MinStart = c.start 
```

# delphi - Delphi TClientDataSet、TStringStream 和 TWideStringField 异常

> ID：16170735
> 
> 赞同：0
> 
> 时间：2013-04-23T13:33:46.177
> 
> 标签：delphi, unicode, delphi-xe2, stringstream, tclientdataset

当我尝试将 Stream 加载到 ClientDataSet 时，出现以下异常：

> 数据包不匹配

ClientDataSet 有几个 WideStringfields，所以我在`TStringStream.Create`. 如果我离开编码，我会得到一个例外：

> 字段 XXZ 的类型不匹配；假定：TWideString，实际：String

以下是我的代码：

```
 importStream := TMemoryStream.Create;
  zipImport.ExtractToStream(importName, importStream);
  importStream.Position := 0;

  data := TStringList.Create;
  data.LoadFromStream(importStream);

  importStream.Free;

  Encoding := TEncoding.Unicode;
  ccpStream := TStringStream.Create(Format(FTemplate.Text, [data.Text]), Encoding);

  try
    try

      cdsCCP_Head.LoadFromStream(ccpStream);
... 
```

在我将 ClientDataSet 转换为它之前，`TWideStringField`它工作得很好。谁能告诉我我能做些什么来阅读文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:09:38.310

问题是来自`ClientDataSet`.
要创建新模板：

1.  转到设计模式并选择`ClientDataSet`.
2.  右键单击并“创建数据集”。
3.  选择“保存到 MyBase Xml UTF8 表...”并保存新生成的 xml。

使用新生成的 Xml，可以正确识别字段，并且正如 @ArnaudBouchez 已经提到的，无需解码流。

# python - 两个日期之间python的整数差

> ID：16170737
> 
> 赞同：21
> 
> 时间：2013-04-23T13:33:51.853
> 
> 标签：python, date, datetime

我已经阅读了 RTFM 并在此处阅读了许多关于此的问题和答案，并且昨天很高兴使用 strftime 和 strptime，所以我发誓这应该可以工作，但它不是....

我只想要一个整数。不是“timedelta 对象”。不是“有意识但可散列的对象”（参见 I RTFM）。不是一个元组。不是字典。只是一个简单的整数，所以我可以使用 if 语句和分支并感到高兴。请带着你的智慧之光对此表示感谢。

这就是我所拥有的

```
...
import datetime
mdate = "2010-10-05"
rdate = "2010-10-05"
mdate1 = datetime.strptime(mdate, "%Y-%m-%d")
rdate1 = datetime.strptime(rdate, "%Y-%m-%d")
delta =  datetime.timedelta.days(mdate1 - rdate1) 
```

这是我得到的：

```
pmain.py:4: AttributeError: 'module' object has no attribute 'strptime'
(error hits in the 'mdate1..." line above) 
```

而且，这并不意味着我的增量线会起作用——请也看看那个。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-23T13:36:40.707

您想获取*classmethod* `datetime.datetime.strptime()`，然后从生成的 timedelta中获取`.days` **属性：**

```
import datetime

mdate = "2010-10-05"
rdate = "2010-10-05"
mdate1 = datetime.datetime.strptime(mdate, "%Y-%m-%d").date()
rdate1 = datetime.datetime.strptime(rdate, "%Y-%m-%d").date()
delta =  (mdate1 - rdate1).days 
```

所以你有一个`datetime`模块，它有一个`datetime.datetime`类，而它又有一个`datetime.datetime.strptime()`方法。*我还添加了仅*`.date()`提取日期部分的调用（结果是一个实例）；这使得处理差异略小于 24 小时的倍数的时间戳变得更容易。*`datetime.date`*

 *演示：

```
>>> import datetime
>>> mdate = "2010-10-05"
>>> rdate = "2010-10-05"
>>> mdate1 = datetime.datetime.strptime(mdate, "%Y-%m-%d").date()
>>> rdate1 = datetime.datetime.strptime(rdate, "%Y-%m-%d").date()
>>> delta =  (mdate1 - rdate1).days
>>> print delta
0
>>> type(delta)
<type 'int'> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-06T10:45:26.870

```
sign1['days'] = sign1['diff'] / np.timedelta64(1, 'D') 
```

我遇到了同样的问题，并通过使用上述语句解决了。我希望它有所帮助。*

# javascript - 如何使用 Javascript Prototype 从多个选择框中删除选定的选项？

> ID：16170741
> 
> 赞同：4
> 
> 时间：2013-04-23T13:34:01.503
> 
> 标签：javascript, prototypejs

我已经搜索了很多这个问题的答案，但没有找到令人满意的结果。

我有这个代码：

```
<select name="items[]" size="0" id="feed-items-list" style="width:100%;" multiple="">
<option value="a">a</option>
<option value="b">b</option>
<option value="c">c</option>
</select> 
```

如何删除所有选定的选项？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T13:37:39.473

我知道你标记`prototypejs`了 ，但我以前从未使用过它，而且使用 vanilla JS 很容易。以下是如何遍历`<option>`s 并查看它们是否被选中：

```
var select_element = document.getElementById("feed-items-list");
var options = select_element.options;
var i = options.length;
while (i--) {
    var current = options[i];
    if (current.selected) {
        // Do something with the selected option
    }
} 
```

**演示：http:** [//jsfiddle.net/tFhBb/](http://jsfiddle.net/tFhBb/)

如果您想从页面中物理删除该选项，请使用：

```
current.parentNode.removeChild(current); 
```

如果要取消选择它们，请使用：

```
current.selected = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:18:17.140

用 PrototypeJS 做到这一点（正如你标记的问题）

```
$('feed-items-list').select('option:selected').invoke('remove'); 
```

这将使用 CSS 选择器`option:selected`在`feed-items-list`. 然后调用该`remove`元素上的特定方法。

如果您只想取消选择 Ian 提到的选项

```
$('feed-items-list').select('option:selected').each(function(i){
    i.selected = false;
}); 
```

# c - C 程序 - 在 linux 中工作；Windows 中的运行时失败

> ID：16170746
> 
> 赞同：-2
> 
> 时间：2013-04-23T13:34:11.850
> 
> 标签：c, linux, windows

我用**C 语言完成了一个***电话簿*程序（带有动态结构等）。

 **它在 linux 下完美运行，但是当我尝试在 Windows 中运行它（在**devc++**中编译之后）它启动正常，但是在我将一些数据添加到列表后它只是停止并退出。只有在电话簿中*添加新数据才会*发生这种情况。当我使用其他功能时，没有中断等等。

在模块的开头，我附加了`windows.h`and `conio.h`for `getch()`and `systen("cls")`。也许我使用了一些 Windows 中不允许的功能或类似的东西。

那是我的第一个c-project，通常我在linux下工作，那么我应该注意什么？

```
/*SCREEN*/
#ifdef __WIN32__                                           /*for Windows*/
#include<windows.h>
#define GETCH printf("press ENTER...\n");getch() 
#define CLEAR system("cls")
#endif
#ifdef __unix__                                             /*for unix*/
#include<unistd.h> 
#define GETCH printf("\n\npress ENTER...");getchar()
#define CLEAR system("clear")
#endif 
```

我也以同样的方式添加 name 和 pnonenumber

```
printf("++ ADD DATA: ++\n");
         /*LASTNAME*/
                 printf(">> add lastname :  ");
                 fgets(buf,128,stdin);
                 lastname = malloc(strlen(buf));     /*allocate memory for lastdane*/ 
                 if( lastname != NULL)               /*successful allocation*/
                 {
                   strcpy( lastname, buf );          /*copy data from buf to lastname variable*/
                   lastname[strlen(lastname)-1]='\0';/*get the number of elements and add '\0' at the end*/
                 }
                 else                                /*allocation failed*/
                 {
                   printf("Memory Allocation Error!");
                 }
                 memset(buf,0,128); 
```

* * *

```
void AddDATAsorted( char* lastname, char* firstname, char* telnumber )
{
  tDATA* pDATA;

  if( pTELBOOK )
  {
      pDATA = malloc( sizeof( tDATA ));         /*allocate memory for new item*/

      pDATA->lastname   = lastname;    
      pDATA->firstname  = firstname;
      pDATA->telnumber  = telnumber;

      addItemToList( pTELBOOK, pDATA, fcmp );   /*add a new item sorted - see list.c*/
  }
} /*END 6*/ 
```

它在另一个模块中。

* * *

```
int fcmp( void* pItemList, void* pItemNew )
{
  tDATA* pDATA_list;
  tDATA* pDATA_new;
  int diff;

  if( pItemList != NULL ) 
  {
      pDATA_list = ( tDATA* ) pItemList;          /*because void-pointer  */
      pDATA_new  = ( tDATA* ) pItemNew;

      diff = strcmp( pDATA_list->lastname, pDATA_new->lastname );
      if( diff != 0 ) return diff;
      else                                        /*if items have the same lastname*/                                    
      {
          diff = strcmp( pDATA_list->firstname, pDATA_new->firstname );
          if( diff != 0 ) return diff;
          else                                    /*if items have also the same firstname*/
          {
              diff = strcmp( pDATA_list->telnumber, pDATA_new->telnumber );
              if( diff != 0 ) return diff;
              else  return FAIL;                  /*if items - equal*/
          }
      }
  }
  else return OK; 
```

调试器总是在这里显示错误...

/* 2 * 功能：删除数据*/

```
int RemoveDATA( void )
{
  tDATA* pDATA = NULL;
  if( pTELBOOK == NULL ) return FAIL;       
  else                                      /*if pTELBOOK's current element - not empty - free allocated memory*/
  {
     if( pTELBOOK->pCurr != NULL )
     { 
           pDATA = pTELBOOK->pCurr->pItem;
           free( pDATA->lastname );
           free( pDATA->firstname );
           free( pDATA->telnumber );
           free( pTELBOOK->pCurr->pItem );
           RemoveItem( pTELBOOK );            /*and remove element from the list*/
           return OK;                        
     }
  }
} /*END 2*/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T13:55:51.813

```
 lastname = malloc(strlen(buf)); /* problem */ 
             if( lastname != NULL)
             {
               strcpy( lastname, buf);
               lastname[strlen(lastname)-1]='\0';
             } 
```

使用**strdup**。lastname 的长度比需要的短一。这可能是一个问题：

```
 lastname = strdup(buf); 
```

此外，您不应该使用 128 或其他任何内容。使用`sizeof buf`or`sizeof (buf)`代替，或者也许是一个定义：

```
 #define BUF_SIZE   128 
```

其余的我没有检查。**

# vba - 确定 ListParagraph 元素出现在 Word VBA 中的哪个表

> ID：16170751
> 
> 赞同：1
> 
> 时间：2013-04-23T13:34:29.183
> 
> 标签：vba, ms-word

我正在扫描一个包含表格内外列表元素的 word 文档。找到列表元素后，我会将其层次结构编号和与之关联的文本导出到 Excel。我的扫描是基于列表元素而不是具体的表格。

在某些情况下，列表元素将出现在表格的第一列中，与之关联的文本将出现在该表格的任意数量的后续列中。在某些表格中有合并的单元格，因此我需要确定表格当前行中的列数。

我不断收到运行时错误'438'：对象不支持此属性或方法就行了`tCol = oLI.Range.Tables(1).Rows(oCurrentRow).Columns.Count`，我不知道为什么。

```
Set xlApp = CreateObject("Excel.Application")
xlApp.Visible = True
Set xlWB = xlApp.Workbooks.Add ' create a new workbook
With xlWB.Worksheets(1)
    For Each oList In ActiveDocument.Lists
        For Each oLI In oList.ListParagraphs
            .Cells(i, 1) = oLI.Range.ListFormat.ListString
            If oLI.Range.Information(wdWithInTable) = True Then
                '#DETERMINE WHICH TABLE TO LOOK IN
                oCurrentRow = oLI.Range.Cells(1).RowIndex
                    'Determine which Row in the Table to look in
                tCol = oLI.Range.Tables(1).Rows(oCurrentRow).Columns.Count
                    'Determine how many Columns the Table contains
                Debug.Print tCol
                For j = 2 To tCol
                    .Cells(i, j) = oLI.Range.Tables(1).Cell(oCurrentRow, j)
                Next j
            Else
                .Cells(i, 2) = oLI.Range.Text
            End If
            i = i + 1
        Next oLI
    Next oList
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:20:41.777

没有对象`Columns`。`Row`您可以使用

```
...Rows(oCurrentRow).Cells.Count 
```

获取行中的单元格数。或者，更好的是，您可以使用 For Each 循环遍历单元格，而无需费心计算它们。

```
Sub LoopCells()

    Dim tbl As Table
    Dim tCell As Cell

    Set tbl = ThisDocument.Tables(1)

    For Each tCell In tbl.Rows(1).Cells
        Debug.Print tCell.Range.Text
    Next tCell

End Sub 
```

# unity-container - 注册同一合约的多个实现：一个在 Chilcontainer 中，一个在父级中

> ID：16170754
> 
> 赞同：0
> 
> 时间：2013-04-23T13:34:35.733
> 
> 标签：unity-container, ioc-container

我正在尝试注册相同接口的多个实现，如下所示：-

```
**DLL A: Module.cs**
_container.RegisterType<IFoo, Foo1>("Foo1"); 
```

* * *

```
**DLL B: Module.cs**
var childContainer = _container.CreateChildContainer(); //childcontainer
childContainer.RegisterType<IFoo, Foo2>("Foo2"); 
```

* * *

```
**DLL A: Resolve IFoo for Foo2** (But, resolving IFoo for Foo1 is fine)
var foo2 = container.Resolve<IFoo>("Foo2"); //Error 
```

*注意：我在这里收到的容器是“childcontainer”。已检查哈希码。*

**错误：**

> Microsoft.Practices.Unity.dll 中出现了“System.InvalidOperationException”类型的第一次机会异常
> 
> 附加信息：当前类型 IFoo 是一个接口，无法构造。您是否缺少类型映射？

* * *

**但是**，如果我在 Foo1 之后在 DLL A 中注册 Foo2 ，它就可以工作，就像这样：

```
_container.RegisterType<IFoo, Foo1>("Foo1");
_container.RegisterType<IFoo, Foo2>("Foo2"); 
```

`Registration (Register) and Resolution (Resolve)`取决于范围和装配？我想要第一种工作方法。任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:22:56.740

我尝试了下一个示例并且正在为我工​​作。请注意程序集引用和命名空间包含。

```
**Dll A

Public  Interface Ifoo

 End Interface 
```

* * *

```
**Dll B

 Public Class Class1

        Public Shared function registerOtherType(container AS IUnityContainer) As IUnityContainer
            Dim c As IUnityContainer = container.CreateChildContainer
            c.RegisterType(of Ifoo, foo2)("2")
            Return c
     End Function

    End Class

    Public Class foo2
        Implements Ifoo

    End Class 
```

* * *

```
**Dll C

    Public Class foo
        Implements Ifoo

 End Class

    Sub Main()
        'init()
        'Dim manager As IClasificationManagement = ServiceLocator.Current.GetInstance(Of IClasificationManagement)()
        'manager.SwapDescrition("1", "2")
        'Console.WriteLine("Operacion Realizada")
        'Console.Read()
        Dim container As IUnityContainer = New UnityContainer()
        container.RegisterType(Of Ifoo, foo )("1")
        dim child As IUnityContainer = Class1.registerOtherType(container)
        child.Resolve(of Ifoo)("2")

    End Sub 
```

# iphone - 无法同时显示2个GLKViewController

> ID：16170755
> 
> 赞同：1
> 
> 时间：2013-04-23T13:34:46.257
> 
> 标签：iphone, ios, opengl-es

我正在构建一个应用程序，它需要显示到 opengl 视图，一个全屏，另一个更小作为覆盖。这两个视图代表 2 个完全不同的应用程序。

现在看来我不能同时显示两个 EAGLContext/Framebuffers；我总是以“无法制作完整的帧缓冲区对象 8cd6”错误消息告终。

我需要使用两种不同的实现来实现 2 gl 视图：

**1- 在同一屏幕上同时使用 2 个 GLKViewControllers**

嗨，我已经阅读了这个问题的一些解决方案，大多数人说你只需要使用视图控制器包含，但我没有运气。通过我的设置，每个 glview 都有一个 EAGLContext ...我还尝试为两者使用一个上下文。这是我对第一个 GLKViewController 的 viewDidLoad() 方法的设置：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

    if (!self.context) {
        NSLog(@"Failed to create ES context");
    }

    GLKView *view = (GLKView *)self.view;
    view.context = self.context;
    view.drawableDepthFormat = GLKViewDrawableDepthFormat24;

    [self setupGL];

    // Add the sub glkviewcontroller
    subViewController = [[SubGLControllerViewController alloc] init];

    [self addChildViewController:subViewController];
    [self.view addSubview:subViewController.view];
    [subViewController didMoveToParentViewController:self];
} 
```

我对 SubGLControllerViewController 有基本相同的代码，但没有添加子视图控制器......

**2- 在我的第二个实现中，我需要手动创建帧缓冲区，而不使用这样的 glkviewcontroller：**

```
// Create the MAIN FBO.
glGenFramebuffers(1, &mainFramebuffer);
glBindFramebuffer(GL_FRAMEBUFFER, mainFramebuffer);

glGenRenderbuffers(1, &mainColorRenderbuffer);
glBindRenderbuffer(GL_RENDERBUFFER, mainColorRenderbuffer);

[mainContext renderbufferStorage:GL_RENDERBUFFER fromDrawable:layer];

glFramebufferRenderbuffer(GL_FRAMEBUFFER, 
                             GL_COLOR_ATTACHMENT0,
                             GL_RENDERBUFFER,
                             mainColorRenderbuffer);

// Create the secondary FBO
glGenFramebuffers(1, &secondaryFramebuffer);
glBindFramebuffer(GL_FRAMEBUFFER, secondaryFramebuffer);

glGenRenderbuffers(1, &secondaryColorRenderbuffer);
glBindRenderbuffer(GL_RENDERBUFFER, secondaryColorRenderbuffer);

[secondaryContext renderbufferStorage:GL_RENDERBUFFER fromDrawable:layer];

glFramebufferRenderbuffer(GL_FRAMEBUFFER, 
                             GL_COLOR_ATTACHMENT0,
                             GL_RENDERBUFFER,
                             secondaryColorRenderbuffer);

// This status will fail at this point...if i remove either the main or secondary        //framebuffer, the status is valid
GLenum status = glCheckFramebufferStatus(GL_FRAMEBUFFER); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:58:01.897

至于第一次尝试，我什至不指望它能够工作。

第二个虽然只有一个问题：你使用同一层两次。正如您所说，您需要 2 个带有 openGL 的视图，因此创建 2 个视图并使用每个视图的图层。

至于上下文，我建议你只使用 1 并且严格在单个线程上完成所有 GL 工作，例如在视图控制器中创建一个 NSTimer ，它将“着火”调用两个视图的绘图方法并记住你每次切换要绘制的视图时都需要绑定帧缓冲区。

请注意，一般来说，最好避免使用 openGL 的多个视图。没有什么是你不能用 1 个视图处理的，在大多数情况下，要实现 2 个窗口，你需要做的就是调用另一个窗口`glViewport`来绘制视图的另一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-06T02:23:06.283

我[在 GitHub 上有一个示例应用程序](https://github.com/kconner/KMCMultipleGLKViewControllerTest)。

该应用程序有一个 root `GLKViewController`。`GLKViewController`它可以模态地呈现一个容器视图控制器，它使用子视图控制器机制嵌入了另外两个。当显示模态视图时，两个嵌入`GLKViewController`的 s 同时动画。

每个`GLKViewController`都有自己的`EAGLContext`. 我没有尝试让 GL 视图在 iOS 上共享上下文，所以在这个方案中，每个视图都必须加载它自己的每个资源的副本。

# javascript - Rails 3 - 未找到一些必需的 JS

> ID：16170764
> 
> 赞同：1
> 
> 时间：2013-04-23T13:35:26.220
> 
> 标签：javascript, ruby-on-rails-3, prototypejs

我将一个 Rails 2.2.2 站点移到 Rails 3 并一直在修复它。我现在进入网站的 JS 部分，当我点击包含 JS 的页面时看到以下内容：

![在此处输入图像描述](https://i.stack.imgur.com/UoF7R.png)

这可能是级联问题吗？- 在 effects.js 之前加载了 controls.js 我认为 Rails 会以某种方式处理这个问题？

这是加载 JS 的顺序：

```
Started GET "/assets/jquery.js?body=1"
Served asset /jquery.js - 200 OK (0ms)

Started GET "/assets/jquery-ui.js?body=1"
Served asset /jquery-ui.js - 200 OK (0ms)

Started GET "/assets/jquery.alerts.js?body=1"
Served asset /jquery.alerts.js - 200 OK (0ms)

Started GET "/assets/jquery_ujs.js?body=1"
Served asset /jquery_ujs.js - 200 OK (0ms)

Started GET "/assets/admin.js?body=1"
Served asset /admin.js - 200 OK (0ms)

Started GET "/assets/controls.js?body=1"
Served asset /controls.js - 200 OK (0ms)

Started GET "/assets/dragdrop.js?body=1"
Served asset /dragdrop.js - 200 OK (0ms)

Started GET "/assets/effects.js?body=1"
Served asset /effects.js - 200 OK (0ms)

Started GET "/assets/jquery.validate.min.js?body=1"
Served asset /jquery.validate.min.js - 200 OK (0ms)

Started GET "/assets/prototype.js?body=1"
Served asset /prototype.js - 200 OK (0ms)

Started GET "/assets/application.js?body=1"
Served asset /application.js - 200 OK (3ms)

Started GET "/assets/jquery-ui.css?body=1"
Served asset /jquery-ui.css - 200 OK (0ms)

Started GET "/assets/jquery.alerts.css?body=1"
Served asset /jquery.alerts.css - 200 OK (0ms)

Started GET "/assets/default.css?body=1"
Served asset /default.css - 200 OK (0ms)

Started GET "/assets/jquery.js?body=1"
Served asset /jquery.js - 200 OK (0ms)

Started GET "/assets/jquery-ui.js?body=1"
Served asset /jquery-ui.js - 200 OK (0ms) 
```

文件**application.js**如下所示：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

我怎样才能解决这个问题？

非常感谢！

**/应用程序/资产/javascript**

![在此处输入图像描述](https://i.stack.imgur.com/Ngul3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:43:26.587

您需要在 application.js 中指定加载顺序：

```
//= require jquery
//= require jquery_ujs
//= require prototype/prototype
//= require prototype/effects
//= require prototype/dragdrop
//= require prototype/controls
//= require_tree . 
```

# java - 访问 MyBatis 中的私有超类字段

> ID：16170773
> 
> 赞同：0
> 
> 时间：2013-04-23T13:35:50.297
> 
> 标签：java, exception, mybatis

考虑以下 POJO，它们将用于保存将传递给查询的参数。

```
public class RegionKey {

        private BigDecimal rgnId;
        private Country country;

        //setters and getters.    

        }

public class Country {

        private BigDecimal cntryId;

        //setters and getters.   

        }

 public class Region extends RegionKey {

        private String rgnNm;
        private String desc;

        //setters and getters

    }

  public class Customer {
            private BigDecimal custId;
            private Region rgn;

        } 
```

考虑 MyBatis 的 CustomerMapper 接口

```
public interface CustomerMapper {

        int deleteByPrimaryKey(@Param("custRecord") Customer key);
    } 
```

考虑来自 CustomerMapper.xml 文件的片段 (QUery 1)

```
 <delete id="deleteByPrimaryKey">
            delete from CUSTOMER
            where CUST_ID = #{custRecord.custId,jdbcType=DECIMAL} 
            and RGN_ID =
            cast(#{custRecord.rgn.rgnId,jdbcType=CHAR} as char(10))
    </delete> 
```

上面的查询工作得很好。使用以下 if-test 修改上述查询也可以正常工作（查询 2）

```
 <delete id="deleteByPrimaryKey">
                        delete from CUSTOMER
                        where CUST_ID = #{custRecord.custId,jdbcType=DECIMAL} 
                        <if test="custRecord.rgn.rgnId != null">
                    and RGN_ID = cast(#{custRecord.rgn.rgnId,jdbcType=CHAR} as
                    char(10))
                        </if>                   

                </delete> 
```

如下修改查询会导致运行时异常（查询 3）

```
<delete id="deleteByPrimaryKey">
                    delete from CUSTOMER
                    where CUST_ID = #{custRecord.custId,jdbcType=DECIMAL} 
                    <if test="custRecord.rgn.country.cntryId != null">
                and CNTRY_ID =
                cast(#{custRecord.rgn.country.cntryId,jdbcType=CHAR} as
                char(10))
                    </if>

            </delete> 
```

对于查询号 3，我在运行时收到 org.apache.ibatis.ognl.NoSuchPropertyException。我无法理解为什么会发生这种情况。如果我可以从查询 2 中的 custRecord.rgn 访问 rgnId 字段，从技术上讲，我应该能够从查询 3 中的 custRecord.rgn.country 访问 cntryId 字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:08:21.233

MyBatis 期望（就像大多数框架一样）“属性”遵循[Java Bean 规范](https://stackoverflow.com/a/8969525/277304)，以便将属性`foo`映射到 getter`getFoo()`和（可选）setter `setFoo()`（私有字段的名称可以不同 - 它甚至可以不存在！ - 但通常它与属性相同）。

所以，在你的例子中，你应该有

```
public class RegionKey {
      private Country country;
      ...
      public Country getCountry() {
      ...
      }
} 
```

等等。Java IDE（例如Eclipse）理解这个约定，并允许您为您生成这些getter/setter，因此您不必键入它们。

# ios - iOS 中的作用域和线程

> ID：16170779
> 
> 赞同：0
> 
> 时间：2013-04-23T13:36:00.423
> 
> 标签：ios, objective-c, json, nsarray, nsdictionary

我对 iOS 中的 Web 服务调用和线程有点陌生。我的`ViewController`应用中有一个包含 tableview 控件的应用程序。我正在使用通过 JSON Web 服务获得的数据填充表。JSON Web 服务在其自己的线程上调用，在此期间我填充一个`NSArray`and `NSDictionary`.

我的数组和字典似乎超出了范围，因为我的`NSLog`语句为数组计数返回零，即使在`fetchedData`数组中已完全填充。

有人可以解释为什么我的数组和字典对象在线程之外是空的吗？

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *serviceEndpoint = [NSString stringWithFormat:
                                 @"http://10.0.1.12:8888/platform/services/_login.php?un=%@&pw=%@&ref=%@",
                                 [self incomingUsername], [self incomingPassword], @"cons"];
    NSURL *url = [NSURL URLWithString:serviceEndpoint];
    dispatch_async(kBgAdsQueue, ^{
        NSData *data = [NSData dataWithContentsOfURL:url];
        [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
    });

    NSLog(@"ARRAY COUNT: %d\n", [jsonArray count]);
}

-(void)fetchedData:(NSData*)responseData{
    NSError *error;
    jsonDict = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];
    jsonArray = [[jsonDict allKeys]sortedArrayUsingSelector:@selector(compare:)];
    for(NSString *s in jsonArray){
        NSLog(@"%@ = %@\n", s, [jsonDict objectForKey:s]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:45:11.567

当您使用`dispatch_async`时，那段代码不会阻塞。这意味着您的数组计数日志语句在调用之前触发`fetchedData`，因此您的字典和数组仍然为空。查看日志语句的顺序 - 您应该在记录字典之前看到数组计数。

```
// Executes on another thread. ViewDidLoad will continue to run.
dispatch_async(kBgAdsQueue, ^{
    NSData *data = [NSData dataWithContentsOfURL:url];
    [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
});

// Executes before the other thread has finished fetching the data. Objects are empty.
NSLog(@"ARRAY COUNT: %d\n", [jsonArray count]); 
```

您需要`TableView`在数据返回后完成填充（即在 中`FetchData:`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:45:37.223

viewDidLoad 中的日志语句应该报告该数组是空的，因为当时它还没有被填充。调用 dispatch_async 会导致该代码块异步运行，并允许 viewDidLoad 函数在该块之前完成。这就是为什么在 viewDidLoad 结束时数组中没有任何内容的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:47:25.387

您正在尝试在填充之前打印 jsonArray 元素的计数。这是发生的事情：

1.  你准备网址
2.  您创建新线程来获取某个日期。该线程的执行可能需要一些时间（取决于连接速度和数据量）。
3.  您正在访问 jsonArray 而线程正在执行和 fetchedData: was not called

另外，建议：不要使用 dataWithContentsOfURL: 方法。最好看看一些网络框架，比如 AFNetworking。

# firefox - itextsharp firefox 黑色背景

> ID：16170780
> 
> 赞同：1
> 
> 时间：2013-04-23T13:36:00.560
> 
> 标签：firefox, pdf, pdf.js

第一次在stackoverflow :)

让我解释一下发生了什么。我正在尝试使用 iTextSharp 创建 PDF。它在 chrome 和 IE9 中完美显示，但在 Firefox 中，背景是黑色的。

火狐版 ![在此处输入图像描述](https://i.stack.imgur.com/gRLec.jpg)

镀铬版 ![在此处输入图像描述](https://i.stack.imgur.com/wCl9M.jpg)

最好的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:05:31.717

如果您使用 Adob​​e Acrobat 检查 PDF 是否存在语法错误，则报告可能为空白。问题有 99% 的可能性是由 pdf.js 引起的，而不是由 iText(Sharp) 引起的。出于某种原因（问 Mozilla，不要问我），使用 pdf.js 现在是在 Firefox 中查看 PDF 的标准方式。不幸的是，pdf.js 远不是一个成熟的 PDF 查看器。它不支持表单，不支持签名，不支持许多图形对象，......它缺少 ISO-32000-1 中描述的许多 PDF 功能。

我更改了 Firefox 中的设置，现在它可以在 Adob​​e Reader 中打开 PDF，但我没有像过去那样在 Firefox 中使用 Adob​​e Reader 作为插件。所有这一切都非常令人沮丧。

# mysql - 我们可以为 myisam 引擎删除 mysql 的实时 ibdata1 文件吗

> ID：16170784
> 
> 赞同：0
> 
> 时间：2013-04-23T13:36:19.637
> 
> 标签：mysql

我们可以在不停机的情况下为 myisam 引擎删除 mysql 的 ibdata1 文件吗？
实际上它的大小超过 200 GB。
它会影响实时的mysql服务器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:41:33.063

您不能删除正在运行的数据库上的 ibdata。

如果你想要最少的停机时间，你应该检查：[http ://erikimh.com/how-to-shrink-an-ibdata1-file-with-minimal-mysql-downtime/](http://erikimh.com/how-to-shrink-an-ibdata1-file-with-minimal-mysql-downtime/)

# php - 除了cron作业方法之外，如何在PHP Web应用程序中安排失败的电子邮件？

> ID：16170788
> 
> 赞同：1
> 
> 时间：2013-04-23T13:36:35.223
> 
> 标签：php

我正在开发需要在预定时间发送电子邮件的网络应用程序。正确的场景是：如果邮件功能因任何原因失败，重试应在特定时间段后进行，直到邮件成功。所以这里的问题是，如果我在某处记录了邮件详细信息（这里是mysql db表），重试机制是如何实现的。这可以在不使用 cronjobs 的情况下实现吗？如果是，怎么做？？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:40:47.100

You'll need some kind of cron system anyway, but it could simply be a third party service calling a specific page on your site. Why don't you want to use cronjobs in the first place ?

Then your process would only be to log any failed attempt in a queue and treat the queue (= send mails) each x hours. You could also consider having a max number of retry or something like this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:56:27.183

您可以尝试创建一个包含无限循环的页面。这是完全未经测试的，我以前从未实施过这样的事情 - 这只是一个建议：

```
$hourToSend = 17; //this is the specified time to send (e.g. an hour, day, week..)

while(1)
{
    start:
    if(emailNotSent() == true && date('H') == $hourToSend) //boolean (function or variable) set after the email script has executed. could even be an array of email IDs.
    {
        resendEmail();
    }
    else
    {
        sleep(3600); //set an interval to check for failed emails, default = every hour
        goto start;
    }
} 
```

这假设您可以访问具有良好正常运行时间的服务器，这不会受到始终打开一个浏览器窗口的影响（可能有利于监控、报告、日志记录等）。

+1 有趣的问题，欢迎提出意见和建议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:44:27.330

If you have to use a scheduled time I would definitely use a cronjob. To make sure that e-mails are send just use a true/false loop which checks if its send or not.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T14:08:24.293

对于电子邮件，您首先不应该使用 cron。*任何*有能力的[MTA](http://en.wikipedia.org/wiki/Message_transfer_agent)都应该能够对它无法发送的消息进行排队——这是一项*要求*。

# jquery - Wordpress JS 冲突 (?) - PrettyPhoto, jQuery

> ID：16170797
> 
> 赞同：0
> 
> 时间：2013-04-23T13:36:50.747
> 
> 标签：jquery, prettyphoto

我整个下午都在发疯，试图解决这个问题，但我想我只是不知道足够的 Javascript 来看看该怎么做。阅读很多很多帖子，包括这里，但我仍然不知道该怎么做。

我目前正在使用从设计师那里购买的 Wordpress 主题，从那以后他就消失了，并且没有回复任何有关该主题的消息。

在这个主题上，我已经使用了一年多简单优雅的“PrettyPhoto”灯箱插件（[http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)）。

以前一切正常，但今天我突然发现“灯箱”效果现在被取消了：现在每张照片都在主页下方打开，而不是在浮动窗口中弹出 - 它看起来非常非常难看（见这里的例子）。

据我了解，这可能是我的主题中发生的一种 javascript 冲突，但我无法解决。我的 JS 目录中有一个 jQuery 1.8.2 文件，但是用 1.9.1 版本替换它并没有带来任何乐趣。

Firebug 给了我以下 JS 错误：

```
 TypeError: $ is not a function      $('#navigation ul.menu').supersubs({          -   seso.js (line 2)
Error: Permission denied to access property 'toString'
TypeError: $ is not a function      $('#navigation ul.menu').supersubs({              - seso.js (line 2) 
```

'Seso.js' 是我的主题自带的一个文件（名为“Seso”），其代码如下：

```
jQuery(document).ready(function() {
    $('#navigation ul.menu').supersubs({ 
            minWidth:    15,
            maxWidth:    30,
            extraWidth:  1     
        }).superfish({ hoverClass: "sfHover", speed: 'slow', dropShadows: false, delay: 0, animation: {height:'show'}});
    $('.up a[href$="top"]').click( function() {
        $.scrollTo( $('#top'), {speed:1200} );
    })
    $('#navigation ul.menu>li>ul>li, #navigation ul.menu>li>ul>li>ul>li').hover(function() { //mouse in
        $(this).stop().animate({ paddingLeft: '5px' }, 300);
    }, function() { //mouse out
    $(this).stop().animate({ paddingLeft: 0 }, 300);
    });
    $(".socialtip").tipTip();
    jQuery(".toggle_body").hide(); 

    jQuery("h4.toggle").toggle(function(){
        jQuery(this).addClass("toggle_active");
        }, function () {
        jQuery(this).removeClass("toggle_active");
    });

    jQuery("h4.toggle").click(function(){
        jQuery(this).next(".toggle_body").slideToggle();

    });
    $("a[rel^='prettyPhoto']").prettyPhoto({animationSpeed:'slow',theme:'facebook',slideshow:5000});
    var enable_image_hover = function(image){
        if(image.is(".portfolio")){
            if (jQuery.browser.msie && parseInt(jQuery.browser.version, 10) < 7) {} else {
                if (jQuery.browser.msie && parseInt(jQuery.browser.version, 10) < 9) {
                    image.hover(function(){
                        jQuery(".image_overlay",this).css("visibility", "visible");
                    },function(){
                        jQuery(".image_overlay",this).css("visibility", "hidden");
                    }).children('img').after('<span class="image_overlay"></span>');
                }else{
                    image.hover(function(){
                        jQuery(".image_overlay",this).animate({
                            opacity: '1'
                        },"fast");
                    },function(){
                        jQuery(".image_overlay",this).animate({
                            opacity: '0'
                        },"fast");
                    }).children('img').after(jQuery('<span class="image_overlay"></span>').css({opacity: '0',visibility:'visible'}));
                }
            }
        }       
    }

    $('.portfolio').preloader({
        delay:200,
        imgSelector:'.imgbg img',
        beforeShow:function(){
            $(this).closest('.image_frame').addClass('preloading');
        },
        afterShow:function(){
            var image = jQuery(this).closest('.image_frame').removeClass('preloading').children("a");
            enable_image_hover(image);
        }
    });
    $('.post').preloader({
        delay:100,
        imgSelector:'.postimage img',
        beforeShow:function(){
            $(this).closest('.postimage').addClass('preloading');
        },
        afterShow:function(){
            var image = jQuery(this).closest('.postimage').removeClass('preloading');
        }
    });
});
(function($) {

    $.fn.preloader = function(options) {
        var settings = $.extend({}, $.fn.preloader.defaults, options);

        return this.each(function() {
            settings.beforeShowAll.call(this);
            var imageHolder = $(this);

            var images = imageHolder.find(settings.imgSelector).css({opacity:0, visibility:'hidden'});  
            var count = images.length;
            var showImage = function(image,imageHolder){
                if(image.data.source != undefined){
                    imageHolder = image.data.holder;
                    image = image.data.source;  
                };

                count --;
                if(settings.delay <= 0){
                    image.css('visibility','visible').animate({opacity:1}, settings.animSpeed, function(){settings.afterShow.call(this)});
                }
                if(count == 0){
                    imageHolder.removeData('count');
                    if(settings.delay <= 0){
                        settings.afterShowAll.call(this);
                    }else{
                        if(settings.gradualDelay){
                            images.each(function(i,e){
                                var image = $(this);
                                setTimeout(function(){
                                    image.css('visibility','visible').animate({opacity:1}, settings.animSpeed, function(){settings.afterShow.call(this)});
                                },settings.delay*(i+1));
                            });
                            setTimeout(function(){settings.afterShowAll.call(imageHolder[0])}, settings.delay*images.length+settings.animSpeed);
                        }else{
                            setTimeout(function(){
                                images.each(function(i,e){
                                    $(this).css('visibility','visible').animate({opacity:1}, settings.animSpeed, function(){settings.afterShow.call(this)});
                                });
                                setTimeout(function(){settings.afterShowAll.call(imageHolder[0])}, settings.animSpeed);
                            }, settings.delay);
                        }
                    }
                }
            };

            images.each(function(i){
                settings.beforeShow.call(this);

                image = $(this);

                if(this.complete==true){
                    showImage(image,imageHolder);
                }else{
                    image.bind('error load',{source:image,holder:imageHolder}, showImage);
                    if($.browser.opera){
                        image.trigger("load");//for hidden image
                    }
                }
            });
        });
    };

    //Default settings
    $.fn.preloader.defaults = {
        delay:1000,
        gradualDelay:true,
        imgSelector:'img',
        animSpeed:500,
        beforeShowAll: function(){},
        beforeShow: function(){},
        afterShow: function(){},
        afterShowAll: function(){}
    };
})(jQuery); 
```

我没有构建这个 JS 文件，所以我不知道它的所有功能到底是干什么用的。我很确定我不需要其中的 90%。

为了完整起见，这里是我当前的 WP header.php 头标签的内容：

```
<head>
<meta http-equiv="Content-Type" content="<?php bloginfo('html_type') ?>; charset=<?php bloginfo('charset') ?>" />
<title><?php if (is_front_page()) { ?><?php bloginfo('name'); ?> - <?php bloginfo('description'); ?><?php } else { ?><?php wp_title($sep = ''); ?> - <?php bloginfo('name'); ?><?php } ?></title>

<link rel="stylesheet" href="<?php echo $themePath ?>/css/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="<?php bloginfo('template_directory'); ?>/css/prettyPhoto.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="<?php echo $themePath ?>/css/imageflow.css" type="text/css" media="screen" />
<link rel="stylesheet" href="<?php echo $themePath ?>/css/options.php" type="text/css" media="screen" />
<?php if(get_option_tree ('customcss', '')){ ?>
<style type="text/css">
<?php echo  get_option_tree ('customcss', ''); ?>
</style>
<?php } ?>
<?php wp_head(); ?>
<script src="<?php bloginfo('template_directory'); ?>/js/jquery.prettyPhoto.js"></script>
<script type="text/javascript">   
jQuery(document).ready(function($) {
   $("a[href$='.jpg'], a[href$='.jpeg'], a[href$='.gif'], a[href$='.png']").prettyPhoto({
    animationSpeed: 'normal', /* fast/slow/normal */
    padding: 40, /* padding for each side of the picture */
    opacity: 0.35, /* Value betwee 0 and 1 */
    showTitle: true, /* true/false */
    theme: 'pp_default' /* light_rounded / dark_rounded / light_square / dark_square / facebook */      
    }); 

})

</script>
</head> 
```

我试过使用其他灯箱插件，但结果是一样的。

最奇怪的是 PrettyPhoto 确实可以在我的本地服务器上运行——我网站的本地版本和在线版本之间的主要区别在于后者是 Wordpress 的更新版本......

我的主题中有一些深层的 JS 冲突，但我找不到它的来源。如果有人有线索，所有帮助将不胜感激！

干杯，D-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:40:47.047

# backbone.js - Backbone EventAggregator 问题和问题

> ID：16170798
> 
> 赞同：3
> 
> 时间：2013-04-23T13:37:04.397
> 
> 标签：backbone.js, requirejs, marionette, eventaggregator

我正在构建一个 Backbone 应用程序，使用 require.js 进行模块化加载，并使用 Marionette 来帮助我的应用程序结构和功能。我已经为事件聚合器设置了一个 require 模块，如下所示：-

```
define(['backbone', 'marionette'],function(Backbone, Marionette){
    var ea = new Backbone.Wreqr.EventAggregator();
    ea.on('all', function (e) { console.log("[EventAggregator] event: "+e);});
    return ea;
}); 
```

我希望将它传递到我的其他 require 模块中，并让它充当中央事件处理和消息传递组件，我在这方面取得了一些成功。我可以将通风口作为依赖项传递给其他模块，而不会出现这样的问题：-

```
define(['marionette', 'text!templates/nav.html', 'shell/vent'], function (Marionette, text, vent) {
    return SplashView = Marionette.ItemView.extend({
        template : text,
        events : {
            'click #splashContinueButton': 'onButtonClick'
        },
        onButtonClick : function(evt) {
            vent.trigger('onSplashContinueClick'); 
        }
    });
}); 
```

我遇到的问题是，尽管所有事件都在我的应用程序的不同位置触发（我可以在控制台日志中看到），但我无法在我的应用程序的某些部分收听它们。例如，我有一个 Marionette 模块（在运行时作为 require 模块加载），它试图获取一些这样的事件：-

```
var SplashModule = shellApp.module("SplashModule");
SplashModule.addInitializer(function(){
    vent.on("onSplashModelLoaded", this.onSplashModelLoaded);
    vent.on("onSplashContinueClick", this.onSplashContinueClick);
} 
```

我什么也没得到，即使我从这个地方记录通风口，我也可以将它视为一个对象。在日志中，它包含一个事件数组，实际上只包含根级应用程序正在侦听的事件，而不是应用程序其他部分正在侦听的任何其他事件。这就是我的理解分崩离析的地方：我认为我可以将事件聚合器用作跨应用程序结构的全局通信和消息传递系统。任何人都可以对可能发生的事情有所了解吗？

非常感谢，

山姆

*******更新/编辑/解决方案*********

 **您好，好吧，我现在可以正常工作了（发布上述内容后仅 5 分钟-doh！）。基本上，在模块的初始化事件中添加我的监听器为时过早（据我所知）。我将它们沿着功能链进一步移动，现在一切都按预期运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:38:16.170

为了让它正常工作，我必须做出的改变是我必须在模块中进一步删除通风口监听器“onSplashContinueClick”。在此更改之前，它位于初始化函数中，但现在它更进一步：-

```
define(["backbone", "marionette", "shell/vent", "shell/shellapp", "shell/splash/splashmodel", "shell/splash/splashview"], function(Backbone, Marionette, vent, shellApp, SplashModel, SplashView){

var SplashModule = shellApp.module("SplashModule");

SplashModule.addInitializer(function(){
    trace("SplashModule.addInitializer()");
    SplashModule.model = SplashModel;
    SplashModule.model.fetch({
        success:function(){
            //trace("splashModel.fetch success")
            SplashModule.onSplashModelLoaded();
        },
        error:function() {
            //trace("splashModel.fetch error")
        }
    });

});
SplashModule.addFinalizer(function(){

});
SplashModule.initView = function () {
    //trace("SplashModule.initView()");
    SplashModule.mainView = new SplashView({model: SplashModel});
    shellApp.mainRegion.show(SplashModule.mainView);
    vent.on("onSplashContinueClick", this.onSplashContinueClick);

};
SplashModule.end = function () {
    trace("SplashModule.end()");
    shellApp.mainRegion.close();
    vent.trigger("onSplashModuleComplete");
};

// events
SplashModule.onSplashModelLoaded = function () {
    trace("SplashModule.onSplashModelLoaded");
    SplashModule.initView();
};
SplashModule.onSplashContinueClick = function () {
    trace("SplashModule.onSplashContinueClick()");
    SplashModule.end();
};

return SplashModule;
}); 
```

我猜这个问题与依赖项何时可用和/或准备就绪的顺序有关。我相信在初始化方法期间，通风口还没有为侦听器准备好。这很可能与我`Marionette`在 require 模块中对模块的使用有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-26T15:23:46.423

使用**RequireJS**还涉及一些干净的模块... **Backbone.Wreqr.EventAggregator**是**Marionette.js**的一部分的模块（为了记录，Derrick Bailey 只是将这个由其他人制作的模块放入他的库中，**Backbone也是如此.BabySitter** ) 使用 RequireJS，您只能看到库导出的内容，在这种情况下 Marionette 我认为最好的方法是将 marionette 拆分为 3 个模块，它实际上包含backbone.babysitter、backbone.wreqr 和 marionette。然后你必须为每个模块创建一个 shim

我用这个

```
require.config({    
    baseUrl: "/Scripts/",        
    paths: {
     "json2": "vendor/JSON2",
     "backbone": "vendor/backbone/backbone.1.1.0",
     "localStorage": "vendor/backbone/backbone.localStorage.1.1.9",
     "marionette": "vendor/backbone/backbone.marionette.1.8.6",
     "bootstrap": "vendor/bootstrap/bootstrap.3.1.1",
     "jquery": "vendor/jquery/jquery.1.8.3",
     "text": "vendor/Require/text.0.27.0",
     "underscore": "vendor/underscore/underscore.1.5.2",
     "wreqr": "vendor/backbone/backbone.wreqr",
     "babysitter": "vendor/backbone/backbone.babysitter",
  },
  shim: {
     "json2": {
         exports: "JSON"
     },
     "jquery": {
        exports: "$"
     },
     "underscore": {
        exports: "_"
     },
     "bootstrap": {
        deps: ["jquery"]
     },
    "backbone": {
        deps: ["underscore", "jquery"],
        exports: "Backbone"
     },
     "validation": {
        deps: ["backbone"],
        exports: "Backbone.Validation"
     },
     "wreqr": {
        deps: ["backbone", "underscore"],
        exports: "Backbone.Wreqr"
     },
     "marionette": {
        deps: ["backbone", "babysitter", "wreqr"],
        exports: "Backbone.Marionette"
     },
     "localStorage": {
        deps: ["backbone"],
        exports: "Backbone.LocalStorage"
     }
 }
}); 
```

一旦你有了这个，你就可以使用 wreqr 你的脚本中有另一个技巧，你写的事实 `define(['backbone', 'marionette'],function(Backbone, Marionette){` 有点令人不安，因为你永远不会知道在你的实现中使用 Backbone 或 Marionette 是否是故意的。我的意思是，与骨干和木偶相关的命名空间是骨干和木偶；我建议您将 Backbone 别名为骨干，将 Marionette 别名为 Marionette，如下所示： `define(['backbone', 'marionette'],function(backbone, marionette){`. 这样做，您将能够检查您的模块是否已被 RequireJS 按需下载。

然后一旦创建了垫片，你的第一个块代码应该是这样的

```
define(["wreqr"],function(wreqr){
    var ea = new wreqr.EventAggregator();
    ea.on('all', function (e) { console.log("[EventAggregator] event: "+e);});
    return ea;
}); 
```**

# kinect - 考虑参与

> ID：16170801
> 
> 赞同：0
> 
> 时间：2013-04-23T13:37:12.480
> 
> 标签：kinect, usability, kinect-sdk

我刚刚阅读了 Kinect SDK 1.7 人机界面指南，并且对他们考虑用户参与的事实印象深刻（第 86 页）。

我想知道我们应该如何实现这一点。我在 SDK 文档中找不到任何让我感到困惑的东西。我们应该手动完成这一切吗？

由于 1.7 是相当新的版本，我不希望其他许多人对此有太多经验，但也许有人偶然发现了一些有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:02:46.150

[Kinect for Windows Human Interface Guidelines](http://download.microsoft.com/download/B/0/7/B070724E-52B4-4B1A-BD1B-05CC28D07899/Human_Interface_Guidelines_v1.7.0.pdf)的第 93 页描述了实施参与理念的示例。它所指的示例应用程序是“Control Basics-WPF”和“Interaction Gallery-WPF”（SDK 1.7）；或较旧的“[基本交互](http://kinectforwindows.codeplex.com/)”示例（SDK 1.6）。您可以运行示例以查看它们的实际效果并检查代码以了解其实现方式。

> 我们应该手动完成这一切吗？

微软提供 then `EngagementStateManager`in `Microsoft.Samples.Kinect.InteractionGallery.Utilities`，在“Interaction Gallery-WPF”示例中进行了演示。它将为您提供 Microsoft 定义的参与逻辑。如果您希望拥有不同的参与模式，则需要编写自己的参与模式。

# php - 没有 xsi:type 的 php 肥皂调用

> ID：16170802
> 
> 赞同：1
> 
> 时间：2013-04-23T13:37:13.557
> 
> 标签：php, soap-client, xsitype

我正在使用 php soap 调用 Web 服务，但服务的运营商希望我们切换到非 wsdl 模式，因此它不需要暴露。我收到了错误的请求，查看生成的请求，我注意到发出的请求之间存在一个主要区别。

```
<ns1:userpwd>password</ns1:userpwd> 
```

对比

```
<ns1:userpwd xsi:type="xsd:string">password</ns1:userpwd> 
```

所有参数都有这个额外的 xsi:type="xsd:string" 目前我正在使用

```
new SoapParam($password, "ns1:userPWD"); 
```

生成参数。对于最终发出的调用，我需要做些什么来从 xml 中省略 xsi:type 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:00:33.550

再一次仔细思考这个问题，把它写出来指向一个答案：

new SoapVar("$password", XSD_ANYXML); 在请求中产生所需的结果

# java - 代码未按预期工作（回文检查器）

> ID：16170803
> 
> 赞同：-1
> 
> 时间：2013-04-23T13:37:15.110
> 
> 标签：java, char, palindrome

我正在尝试检查一个字符串是否是回文，但它似乎不起作用，因为当我发送一个我知道不是回文的字符串时，它返回它是一个回文，有人可以帮忙吗？它也不会添加到变量*counter*中。

```
package UnaryStack.RubCol1183;

public class CheckPalindrome {

static int counter = 0;

/** Decides whether the parentheses, brackets, and braces
in a string occur in left/right pairs.
@param expression a string to be checked
@return true if the delimiters are paired correctly */
public static boolean checkBalance(String expression)
{
    StackInterface<Character> temporaryStack = new LinkedStack<Character>();
    StackInterface<Character> reverseStack = new LinkedStack<Character>();
    StackInterface<Character> originalStack = new LinkedStack<Character>();

    int characterCount = expression.length();
    boolean isBalanced = true;
    int index = 0;
    char nextCharacter = ' ';

    for (;(index < characterCount); index++)
    {
        nextCharacter = expression.charAt(index);
        switch (nextCharacter)
        {
        case '.': case '?': case '!': case '\'': case ' ': case ',':
            break;
        default: 
        {
            {
                reverseStack.push(nextCharacter);
                temporaryStack.push(nextCharacter);
                originalStack.push(temporaryStack.pop());
            }

            {
                char letter1 = Character.toLowerCase(originalStack.pop());
                char letter2 = Character.toLowerCase(reverseStack.pop());
                isBalanced = isPaired(letter1, letter2);
                if(isBalanced == false){
                    counter++;
                }
            }

            break;
        }
        } // end switch
    } // end for
    return isBalanced;
} // end checkBalance

// Returns true if the given characters, open and close, form a pair
// of parentheses, brackets, or braces.
private static boolean isPaired(char open, char close)
{
    return (open == close);
} // end isPaired

public static int counter(){
    return counter;
}

}//end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:49:02.397

您的实现似乎比需要的复杂得多。

```
//Check for invalid characters first if needed.
StackInterface<Character> stack = new LinkedStack<Character>();

for (char ch: expression.toCharArray()) {
    Character curr = new Character(ch);
    Character peek = (Character)(stack.peek());
    if(!stack.isEmpty() && peek.equals(curr)) {
        stack.pop();
    } else {
        stack.push(curr)
    }
}
return stack.isEmpty(); 
```

* * *

老实说，在这里使用堆栈已经过时了。我会使用以下方法。

```
int i = 0;
int j = expression.length() - 1;
while(j > i) {
    if(expression.charAt(i++) != expression.charAt(j--)) return false;
}
return true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:48:26.443

您在 reverseStack 和 originalStack 中放置了完全相同的元素，因为您推入temporaryStack 的所有内容都将立即推入originalStack。这根本不符合逻辑。

```
reverseStack.push(nextCharacter);
temporaryStack.push(nextCharacter);
originalStack.push(temporaryStack.pop()); 
```

因此表达式

```
isBalanced = isPaired(letter1, letter2); 
```

将始终返回 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:46:52.693

我发现了在方法 checkBalace() 中发现的逻辑错误，并将代码完成为完整的工作代码。这是我完成的代码的样子：

```
public class CheckPalindrome {

static int counter;

/** Decides whether the parentheses, brackets, and braces
in a string occur in left/right pairs.
@param expression a string to be checked
@return true if the delimiters are paired correctly */
public static boolean checkBalance(String expression)
{
    counter = 0;
     StackInterface<Character> temporaryStack = new LinkedStack<Character>();
     StackInterface<Character> reverseStack = new LinkedStack<Character>();
     StackInterface<Character> originalStack = new LinkedStack<Character>();

     boolean isBalanced = true;

    int characterCount = expression.length();

    int index = 0;
    char nextCharacter = ' ';

    for (;(index < characterCount); index++)
    {
        nextCharacter = expression.charAt(index);
        switch (nextCharacter)
        {
        case '.': case '?': case '!': case '\'': case ' ': case ',':
            break;
        default: 
        {
            {
                reverseStack.push(nextCharacter);
                temporaryStack.push(nextCharacter);

            }

            break;
        }
        } // end switch

} // end for

while(!temporaryStack.isEmpty()){
    originalStack.push(temporaryStack.pop());
}

while(!originalStack.isEmpty()){
    char letter1 = Character.toLowerCase(originalStack.pop());
    char letter2 = Character.toLowerCase(reverseStack.pop());
    isBalanced = isPaired(letter1, letter2);
    if(isBalanced == false){
        counter++;
    }
}

    return isBalanced;
} // end checkBalance

// Returns true if the given characters, open and close, form a pair
// of parentheses, brackets, or braces.
private static boolean isPaired(char open, char close)
{
    return (open == close);
} // end isPaired

public static int counter(){
    return counter;
}

} 
```

*我在for*之外使用了 2 while 方法，从而修复了指出的逻辑错误。我还在方法内部将值 0 分配给*counter*以解决我遇到的一个小问题。如果我仍然有错误，请随时修改代码，但我认为我没有出错，再说一遍，我是初学者。

# ios - 获取有序数组中的 IndexPath

> ID：16170805
> 
> 赞同：1
> 
> 时间：2013-04-23T13:37:18.837
> 
> 标签：ios, objective-c, uitableview, nsarray, plist

我正在获取从 plist 排序的值并将它们显示在`tableview`. 我提供了输入将写入 plist 的自定义类别的功能。但我希望按字母顺序插入。有人可以建议我如何获取`indexpath`必须插入的行。我使用了以下代码，其中自定义条目将插入到 0 位置

```
NSInteger section = 0;
NSInteger row = 0;
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:row inSection:section];

NSDictionary *categoryDictionary = [NSMutableDictionary dictionary];
[categoryDictionary setValue:newCategoryName forKey:@"name" ];
[categoryDictionary setValue:@"custom.png" forKey:@"image"];

[[self categoriesArray]insertObject:categoryDictionary atIndex:row];
[[self categoriesArray] writeToFile:[self dataFilePath] atomically:YES];

NSArray *indexPathsToInsert = [NSArray arrayWithObject:indexPath];
[[self tableView]insertRowsAtIndexPaths:indexPathsToInsert withRowAnimation:UITableViewRowAnimationRight];
[self.categoriesArray writeToFile:[self dataFilePath] atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:44:07.437

尝试

```
NSMutableDictionary *categoryDictionary = [NSMutableDictionary dictionary];
[categoryDictionary setObject:newCategoryName forKey:@"name" ];
[categoryDictionary setObject:@"custom.png" forKey:@"image"];

//Add new category to array
[self.categoriesArray addObject:categoryDictionary];

//Sort Array
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
[self.categoriesArray sortUsingDescriptors:@[sortDescriptor]];

//Write array to plist
[self.categoriesArray  writeToFile:[self dataFilePath] atomically:YES];

NSInteger section = 0;
//Get the index of saved Category item
NSInteger row = [self.categoriesArray indexOfObject:categoryDictionary];
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:row inSection:section];

[self.tableView insertRowsAtIndexPaths:@[indexPath]
                       withRowAnimation:UITableViewRowAnimationRight]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:57:37.740

在您的表格中，您将使用以下内容获得部分和行

```
NSInteger section = indexPath.section;
NSInteger row = indexPath.row; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:00:00.457

如果您有一组可排序的项目，则可以使用此代码段作为帮助：

```
 NSArray *sortedArray = @[@"a" , @"b", @"d", @"c", @"f"];
    sortedArray = [sortedArray sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];
    NSLog(@"%@", sortedArray);

    int c = [sortedArray indexOfObject:@"c"];
    NSLog(@"%d", c); 
```

日志->

```
(
    a,
    b,
    c,
    d,
    f
)
2 
```

所以你首先将你的对象插入到“toSort”数组中，然后获取它的索引；）

# c# - 是否可以通过蓝牙将 Win RT 应用程序与 PC 连接？

> ID：16170807
> 
> 赞同：0
> 
> 时间：2013-04-23T13:37:24.910
> 
> 标签：c#, bluetooth, microsoft-metro, windows-store-apps

我正在尝试查找将 Win RT 应用程序与其他蓝牙设备（例如 PC）连接的示例。这是一个基本的东西，但似乎 WinRT 不支持它。

在一个[线程](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/9db327e1-afe4-443b-8856-343492645083/)中，一位微软员工说

> .... 除了呼叫控制示例，商店应用程序没有可用的蓝牙堆栈...

在阅读了其他类似的主题之后，在我看来，目前这是不可能的。我是对的还是有什么方法可以通过蓝牙将 Win RT 应用程序与其他设备（例如 PC 上的桌面应用程序）连接起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T09:01:11.763

After reading many questions and articles (some links are below) on different forums I have reached to conclusion that communication between a Metro Style App and a PC is not possible via Bluetooth. One option is to go with is WiFi.

Some useful links which supports this conclusion are below

[http://social.msdn.microsoft.com/Forums/en-US/tailoringappsfordevices/thread/6634240b-c042-4e76-a3b0-1f1103ea0ddf](http://social.msdn.microsoft.com/Forums/en-US/tailoringappsfordevices/thread/6634240b-c042-4e76-a3b0-1f1103ea0ddf)

[http://social.msdn.microsoft.com/Forums/en-US/tailoringappsfordevices/thread/0cb2a6c1-d1f1-4872-aa32-709acd90b94d](http://social.msdn.microsoft.com/Forums/en-US/tailoringappsfordevices/thread/0cb2a6c1-d1f1-4872-aa32-709acd90b94d)

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/9db327e1-afe4-443b-8856-343492645083/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/9db327e1-afe4-443b-8856-343492645083/)

[http://social.msdn.microsoft.com/Forums/en-US/tailoringappsfordevices/thread/172061f4-56ff-4fd2-987d-687d4703506d](http://social.msdn.microsoft.com/Forums/en-US/tailoringappsfordevices/thread/172061f4-56ff-4fd2-987d-687d4703506d)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-02T19:18:10.130

WinRT 8.1 蓝牙堆栈为与具有类似功能的设备进行临时蓝牙通信提供了必要的服务。更具体地说，支持对等发现和对等通信。

# perforce - 如何在 perforce 中下载存档的分支

> ID：16170810
> 
> 赞同：0
> 
> 时间：2013-04-23T13:37:28.637
> 
> 标签：perforce, archive

在我们的 perforce 服务器中存档了一个分支，但我不知道如何下载这些文件。即使获取这些文件的唯一方法是取消归档它也很好（我可以取消归档分支），但我什至不知道该怎么做。

如何从存档分支下载文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:54:25.630

您的意思是像“p4 存档”那样存档吗？

如果是这样，请参阅“p4 restore”以使文件再次可用。

# javascript - Firebase 移除奇怪的行为

> ID：16170811
> 
> 赞同：0
> 
> 时间：2013-04-23T13:37:31.683
> 
> 标签：javascript, firebase

我的应用程序中有以下代码

```
this.obsRef.remove(function(error) {
      self.firebaseRef.child('users/'+self.user.name+'/invite')
               .remove(function(error) {
                    self.enterLobby();
                });
            }); 
```

代码应该做的是从firebase中删除obsRef，然后删除'users/$user/invite'上的位置。删除所有内容后，将调用 enterLobby。

现在问题出在 enterLobby() 上，我得到了以下代码：

```
this.userListRef.child(this.user.name).child('invite')
             .on('child_added', function(snapshot) {
           console.log("INVITE");
        }); 
```

并且 enterLobby() 里面的代码每次都会执行。我遗漏了一些东西，或者 .remove() 的回调没有按预期工作？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:53:48.587

处理程序将`.on('child_added')`确保每次添加孩子时都会调用提供的回调。这就是您看到代码执行多次的原因。您可能想`.once('value')`改用：

```
this.userListRef.child(this.user.name).child('invite').
  once('value', function(snapshot) { console.log("INVITE"); }); 
```

# matlab - MatLab - 用不会被重视的东西填充数组？

> ID：16170819
> 
> 赞同：0
> 
> 时间：2013-04-23T13:37:45.787
> 
> 标签：matlab, nan, pad

我正在比较不同大小的数组以找到匹配项

```
Results = (DistancesB >= DistancesA * 0.1 & DistancesB < DistancesA * 1.5); % anything in this thres is matched 
```

数组需要具有相同的大小，因此`padarray`使用`0`. 但是现在正在比较和匹配 0...我应该做一个循环只使用结果 > 0 吗？或者还有什么我可以垫的吗？也许`NaN`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:03:49.233

我总是建议阅读文档。例如，[`padarray()`](http://www.mathworks.co.uk/help/images/ref/padarray.html)可以填充`NaN`：

```
padarray(1:3,[1,1],NaN,'post')
ans =
     1     2     3   NaN
   NaN   NaN   NaN   NaN 
```

有关更多详细信息，请查看文档链接中对*padval的描述。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:51:28.000

用填充数组`NaN`

首先创建`NaN`与最长向量一样长的向量：

```
PaddedA = NaN(max(length(A), length(B)), 1);
PaddedB = NaN(max(length(A), length(B)), 1); 
```

然后用数据填充这些。现在将`NaN`在末尾填充较短的向量：

```
PaddedA(1:length(A)) = A;
PaddedB(1:length(B)) = B; 
```

# android - java.lang.NullPointerException：println 需要一条带有 FTP 下载的消息

> ID：16170822
> 
> 赞同：-1
> 
> 时间：2013-04-23T13:37:54.003
> 
> 标签：android, nullpointerexception

我正在从 FTP 服务器下载文件，但我得到一个`NullPointerException`. 我究竟做错了什么？

```
public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    setContentView(R.layout.main);  

    ftpConnect("domain","username", "password", portnum);  

    try  
    {  
         String s = Environment.getExternalStorageDirectory().toString();  
         File f = new File(s+"/???/item");  
         f.mkdirs();  
         ftpDownload("ftp://user@portalftp.?????.com/rooms.txt", f);  
    }  
    catch(Exception e)  
    {  
         Toast toast = Toast.makeText(getApplicationContext(), "Download error: "+e.getMessage(), Toast.LENGTH_SHORT);  
         toast.show();  
    }  

    ftpDisconnect();  
}  

public boolean ftpDownload(String srcFilePath, File desFilePath)  
{  
    boolean status = false;  
    try {  
        FileOutputStream desFileStream = new FileOutputStream(desFilePath);  

        status = mFTPClient.retrieveFile(srcFilePath, desFileStream);  
        desFileStream.close();  
        Toast toast = Toast.makeText(getApplicationContext(), "Downloaded", Toast.LENGTH_SHORT);  
        toast.show();  

        return status;  
        } catch (Exception e) {  
        Toast toast = Toast.makeText(getApplicationContext(), "Download error"+e.getMessage(), Toast.LENGTH_SHORT);  
        toast.show();  
    }  

    return status;  
}  

 public boolean ftpConnect(String host, String username,  
        String password, int port)  
{  
    try{  
        mFTPClient = new FTPClient();  
        // connecting to the host  

            mFTPClient.connect(host, port);  

        // now check the reply code, if positive mean connection success  
        if (FTPReply.isPositiveCompletion(mFTPClient.getReplyCode())) {  
            // login using username & password  
            boolean status = mFTPClient.login(username, password);  

            /* Set File Transfer Mode 
             * 
             * To avoid corruption issue you must specified a correct 
             * transfer mode, such as ASCII_FILE_TYPE, BINARY_FILE_TYPE, 
             * EBCDIC_FILE_TYPE .etc. Here, I use BINARY_FILE_TYPE 
             * for transferring text, image, and compressed files. 
             */  

            mFTPClient.setFileType(FTP.BINARY_FILE_TYPE);  
            mFTPClient.enterLocalPassiveMode();  

            return status;  
        }  
    } catch(Exception e) {  
        Log.e("ERROR", e.getMessage());  
    }  
    return false;  
 }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:51:26.970

尝试使用这个：

```
Log.e("ERROR", String.valueOf(e.getMessage())); 
```

这样，如果消息为空，您将得到“ERROR”、“null”的输出。

此外，你最好听听那些建议你在主线程上做你的网络相关工作的人。

# jquery - 动态重新加载 jQuery 选项卡的内容

> ID：16170826
> 
> 赞同：1
> 
> 时间：2013-04-23T13:38:05.473
> 
> 标签：jquery

在我的 jQuery 选项卡中，我必须实现分页功能，所以我使用代码动态重新加载选项卡的内容：

```
$('#articles_tabs').tabs('url', index, url).tabs('load', index); 
```

但由于 1.9.0`url`方法已被弃用，并且上面的代码不再起作用......

有人知道如何重写吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:49:43.927

从 jQuery[网站](http://api.jqueryui.com/tabs/)：

> 每个选项卡面板的内容可以在页面中定义，也可以通过 Ajax 加载；两者都是根据与选项卡关联的锚点的 href 自动处理的。

换句话说，只需将您的内容位置放在`href`属性中。您可以通过调用强制加载`$('#articles_tabs').tabs( "load", 1 );`

# java - 如何将用户输入从 HTML 文件传递 到 Java servlet？

> ID：16170827
> 
> 赞同：0
> 
> 时间：2013-04-23T13:38:08.230
> 
> 标签：java, javascript, html, servlets

我有 1 个 html 文件被调用`page2.html`，我正在使用 twitter 引导工具包。我正在开发一个开发考试自动座位安排的项目，我正在尝试开发一个界面，允许管理员“选择”学生可以坐的位置。

我正在使用 JavaScript 更改占用座位的颜色。现在的问题是，如何将 Occupied Seat 的值发送到 Servlet？由于我在这里只更改颜色，因此它不是典型的输入值。正如代码所解释的，我只使用`<div>`标签来绘制点击时的“座位”，它会被“占用”。

示例图片：我会发布一个示例图片，但它不会让我没有 10 声望。

代码如下：

```
<div class="alert alert-success hide" id="alert1">
                        <h4>Select the seating arrangement for <i>Floor 1</i>.</h4>
                    </div>
                    <form class="hide" id="seat-select1" method="get" action="Seat1">
                        <div class="btn" style="position:absolute; top:300px; left:210px" onclick="col(0,1)" >Toggle</div>
                            <span style="position:absolute; top:340px; left:190px; ">
                                <span style="position:relative; top:0px; left:0px;">
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="100" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="101" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="102" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="103" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="104" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="105" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                </span>
                            </span>
                        <div class="btn" style="position:absolute; top:300px; left:314px" onclick="col (1,1)" >Toggle</div>
                            <span style="position:absolute; top:340px; left:294px;">
                                <span style="position:relative; top:0px; left:0px;">
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="110" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="111" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="112" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="113" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="114" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="115" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                </span>
                            </span>
                        <div class="btn" style="position:absolute; top:300px; left:510px" onclick="col (2,1)" >Toggle</div>
                            <span style="position:absolute; top:340px; left:490px;">
                                <span style="position:relative; top:0px; left:0px;">
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="120" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="121" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="122" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="123" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="124" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="125" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                </span>
                            </span>
                        <div class="btn" style="position:absolute; top:300px; left:614px" onclick="col (3,1)" >Toggle</div>
                            <span style="position:absolute; top:340px; left:594px;">
                                <span style="position:relative; top:0px; left:0px;">
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="130" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="131" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="132" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="133" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="134" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="135" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                </span>
                            </span>
                        <div class="btn" style="position:absolute; top:300px; left:718px" onclick="col (4,1)" >Toggle</div>
                            <span style="position:absolute; top:340px; left:698px;">
                                <span style="position:relative; top:0px; left:0px;">
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="140" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="141" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="142" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="143" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="144" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="145" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                </span>
                            </span>

                        <div class="btn" style="position:absolute; top:300px; left:918px" onclick="col (5,1)" >Toggle</div>
                            <span style="position:absolute; top:340px; left:898px;">
                                <span style="position:relative; top:0px; left:0px;">
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="150" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="151" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="152" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="153" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="154" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="155" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                </span>
                            </span>

                        <div class="btn" style="position:absolute; top:300px; left:1022px" onclick="col (6,1)" >Toggle</div>
                            <span style="position:absolute; top:340px; left:1002px;">
                                <span style="position:relative; top:0px; left:0px;">
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="160" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="161" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="162" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="163" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="164" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                    <div style="width:100px;height:40px;border:1px solid #000; background-color:#FFF8DC;" id="165" onclick="this.style.backgroundColor='#90EE90'">..</div>
                                </span>
                            </span>
                        <input type="sumbit" class="btn btn-success" value="Submit" style="position:absolute; top:600px; left:566px" onclick="processseat1()" />    
                        <input type="button" class="btn btn-danger" value="Reset" style="position:absolute; top:600px; left:666px" onclick="Reset(1)" />
                    </form> 

//JavaScript Code for the Seat Selection.
var seat= false;
        function col(col_num,floor) {
            var q=10;
            floor=floor*100;
            col_num=(col_num*q)+floor;
            if(!seat) {
                for(var row=0; row<6; row++) {
                    var cr=col_num+row;
                    document.getElementById(cr).style.backgroundColor='#90EE90';
                    seat= true;
                }
            }
            else {
                for(var row=0; row<6; row++) {
                    var cr=col_num+row;
                    document.getElementById(cr).style.backgroundColor='#FFF8DC';
                    seat= false;
                }
            }
        }
        function Reset (floor) {
            var q=10;
            floor=floor*100;
            for(var col_num=0;col_num<7;col_num++){
                col_n=(col_num*q)+floor;
                for(var row=0; row<6; row++) {
                    var cr=col_n+row;
                    document.getElementById(cr).style.backgroundColor='#FFF8DC';
                }
            }
        } 
```

# javascript - jQuery将选中复选框的值获取到数组中

> ID：16170828
> 
> 赞同：140
> 
> 时间：2013-04-23T13:38:21.217
> 
> 标签：javascript, jquery

我正在尝试获取当前选中的所有复选框的值并将它们存储到一个数组中。到目前为止，这是我的代码：

```
 $("#merge_button").click(function(event){
    event.preventDefault();
    var searchIDs = $("#find-table input:checkbox:checked").map(function(){
      return $(this).val();
    });
    console.log(searchIDs);
  }); 
```

但是，这比我需要的输出更多。我不仅得到了价值观，还得到了一些我不想要的东西。

> [“51729b62c9f2673e4c000004”，“517299e7c9f26782a7000003”，“51729975c9f267f3b5000002”，prevObject：jQuery.fn.jQuery.init[3]，上下文：文档，jquery：“1.9.1”，构造函数：函数，初始化：函数...]

我只想要 ID（在这种情况下为前 3 个项目）。

通过使用`$.each`值并将值推送到数组中，我得到了所需的输出：

```
$("#find-table input:checkbox:checked").each(function(){ myArray.push($(this).val()); }) 
```

> [“51729b62c9f2673e4c000004”、“517299e7c9f26782a7000003”、“51729975c9f267f3b5000002”]

但是我想使用`$.map`，因为它为我节省了一行代码并且更漂亮。

谢谢

* * *

## 回答 #1

> 赞同：289
> 
> 时间：2013-04-23T13:52:37.637

在最后调用`.get()`以将生成的 jQuery 对象转换为真正的数组。

```
$("#merge_button").click(function(event){
    event.preventDefault();
    var searchIDs = $("#find-table input:checkbox:checked").map(function(){
      return $(this).val();
    }).get(); // <----
    console.log(searchIDs);
}); 
```

根据[文档](http://api.jquery.com/map/)：

> 由于返回值是一个 jQuery 对象，其中包含一个数组，**因此在结果上调用 .get() 以使用基本数组是很常见的。**

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-23T13:54:33.160

演示：http: [//jsfiddle.net/PBhHK/](http://jsfiddle.net/PBhHK/)

```
$(document).ready(function(){

    var searchIDs = $('input:checked').map(function(){

      return $(this).val();

    });
    console.log(searchIDs.get());

}); 
```

只需调用 get() ，您将拥有规范中所写的数组：http: [//api.jquery.com/map/](http://api.jquery.com/map/)

```
$(':checkbox').map(function() {
      return this.id;
    }).get().join(); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-23T13:50:18.267

您需要添加到函数`.toArray()`的末尾`.map()`

```
$("#merge_button").click(function(event){
    event.preventDefault();
    var searchIDs = $("#find-table input:checkbox:checked").map(function(){
        return $(this).val();
    }).toArray();
    console.log(searchIDs);
}); 
```

演示：http: [//jsfiddle.net/sZQtL/](http://jsfiddle.net/sZQtL/)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-04-23T13:53:32.357

我稍微重构了您的代码，并相信我提供了您正在寻找的解决方案。基本上而不是设置`searchIDs`为`.map()`我只是将值推入数组的结果。

```
$("#merge_button").click(function(event){
  event.preventDefault();

  var searchIDs = [];

  $("#find-table input:checkbox:checked").map(function(){
    searchIDs.push($(this).val());
  });

  console.log(searchIDs);
}); 
```

我创建了一个运行代码的[小提琴。](http://jsfiddle.net/nuclearghost/XNjBd/)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-05-17T20:23:56.350

```
 var ids = [];

$('input[id="find-table"]:checked').each(function() {
   ids.push(this.value); 
}); 
```

这个对我有用！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-03-26T12:18:09.057

```
var idsArr = [];

$('#tableID').find('input[type=checkbox]:checked').each(function() {
    idsArr .push(this.value);
});

console.log(idsArr); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-05T00:41:16.737

需要将 HTML 中命名为数组的表单元素作为 javascript 对象中的数组，就好像表单实际提交一样。

如果有一个带有多个复选框的表单，例如：

```
<input name='breath[0]' type='checkbox' value='presence0'/>
<input name='breath[1]' type='checkbox' value='presence1'/>
<input name='breath[2]' type='checkbox' value='presence2'/>
<input name='serenity'  type='text' value='Is within the breath.'/>
... 
```

结果是一个对象：

```
data = {
   'breath':['presence0','presence1','presence2'],
   'serenity':'Is within the breath.'
}

var $form = $(this),
    data  = {};

$form.find("input").map(function()
{
    var $el  = $(this),
        name = $el.attr("name");

    if (/radio|checkbox/i.test($el.attr('type')) && !$el.prop('checked'))return;

    if(name.indexOf('[') > -1)
    {
        var name_ar = name.split(']').join('').split('['),
            name    = name_ar[0],
            index   = name_ar[1];

        data[name]  = data[name] || [];
        data[name][index] = $el.val();
    }
    else data[name] = $el.val();
}); 
```

这里有很多答案有助于改进我的代码，但它们要么太复杂，要么不完全符合我的要求：[Convert form data to JavaScript object with jQuery](https://stackoverflow.com/questions/1184624/convert-form-data-to-javascript-object-with-jquery)

有效但可以改进：仅适用于一维数组，结果索引可能不是顺序的。数组的长度属性返回下一个索引号作为数组的长度，而不是实际长度。

希望这有帮助。合十！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-20T10:01:23.273

不要使用“每个”。它用于同一元素的操作和更改。使用“map”从元素主体中提取数据并在其他地方使用它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-16T06:59:42.387

> 这里允许是页面上的复选框类，var 允许将它们收集在一个数组中，您可以在 for 循环中检查检查是否为真，然后单独执行所需的操作。在这里，我设置了自定义有效性。我认为它会解决你的问题。

```
 $(".allows").click(function(){
   var allows = document.getElementsByClassName('allows');
   var chkd   = 0;  
   for(var i=0;i<allows.length;i++)
   {
       if(allows[i].checked===true)
       {
           chkd = 1;
       }else
       {

       }
   }

   if(chkd===0)
   {
       $(".allows").prop("required",true);
       for(var i=0;i<allows.length;i++)
        {
        allows[i].setCustomValidity("Please select atleast one option");
        }

   }else
   {
       $(".allows").prop("required",false);
       for(var i=0;i<allows.length;i++)
        {
        allows[i].setCustomValidity("");
        }
   }

}); 
```

# c# - C# 是否可以将包含 .rtf 文档的字节转换为包含 pdf 的字节

> ID：16170829
> 
> 赞同：0
> 
> 时间：2013-04-23T13:38:28.357
> 
> 标签：c#, pdf, rtf

我正在尝试发送电子邮件，其中内容是数据库中的 rtf 文档（BLOB 列）。

所以，我从我的数据库中获取字节类型的文档，但是我不知道如何将 rtf 内容转换为电子邮件的可读文本。

```
byte[] text = itm.Doc;

body= "<html><body>";

using (var file = new MemoryStream(text))
using (var reader = new StreamReader(file))
{
    reader.BaseStream.Seek(0, SeekOrigin.Begin);
    while (!reader.EndOfStream)
    {
        body+= reader.ReadLine();
    }
} 
```

但这当然要给我一个 rtf 文本，作为 'byte[] text' 的实际内容。

我可以将包含 rtf 的字节转换为包含 pdf 的字节吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:40:28.880

这是将 rtf 转换为纯文本的指南：http:
[//msdn.microsoft.com/en-us/library/vstudio/cc488002.aspx](http://msdn.microsoft.com/en-us/library/vstudio/cc488002.aspx)

更新：
试试`StreamReader.ReadToEnd()`这样：

```
using (var reader = new StreamReader(file))
{
  reader.BaseStream.Seek(0, SeekOrigin.Begin);
  body += reader.ReadToEnd();
}

rtBox.Rtf = body;
string[] lines = rtBox.Lines;

mail.Body = "<html><body>" + string.Join("<br/>", lines) + "</body></html>"; 
```

# c# - 将对象转换为二进制代码，反之亦然

> ID：16170830
> 
> 赞同：0
> 
> 时间：2013-04-23T13:38:41.220
> 
> 标签：c#, wpf, object, binary, converter

我想在我的 中保存一个对象`MS Database`，但如果不转换就无法保存它。所以我在这里问，如果我可以转换`object`成`binary code`，反之亦然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:40:13.887

是的，这称为序列化对象。看看这个例子： http: [//www.codeproject.com/Articles/1789/Object-Serialization-using-C](http://www.codeproject.com/Articles/1789/Object-Serialization-using-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:51:14.797

尝试 Google [protobuf-net 序列化](http://code.google.com/p/protobuf-net/)

# requirejs - TypeScript：扩展已通过 require 加载的类

> ID：16170831
> 
> 赞同：2
> 
> 时间：2013-04-23T13:38:41.427
> 
> 标签：requirejs, typescript, amd

# 语境

我们将当前项目（TypeScript + RequireJS）拆分为单独的模块（core、widget1、...）。我们正在运行 TypeScript 0.8.1.1 版。

每个模块都构建为单个文件，并且最初将加载核心。小部件将被延迟加载，仅在需要它们的情况下，但我想确保小部件可以引用我的核心模块（但**不**包括在其输出中的模块）。

* * *

**为了澄清**将 TypeScript 编译为 AMD 模块时，`import`语句将被编译到模块`define`函数的依赖数组中。例子：

打字稿

```
import coreModule = module("core"); 
```

JavaScript 输出（带有 AMD 标志）

```
define(['require', 'exports', 'core'], function(require, exports, __CoreModule__){
    var coreModule = __CoreModule__;
}); 
```

这正是我想要避免的。

因此，我计划用一个替换所有`import someCoreModule = module("core/...");`语句`var someCoreModule = require("core/...");`。

# 问题

我面临的问题是其中一些核心模块正在返回可以由小部件扩展的基类。由于 TypeScript 中的命名空间，这意味着我需要将它们扩展如下：

```
import baseClass = module("core/SomeBaseClass");
class Child extends baseClass.Base {
} 
```

当然，当用一个语句替换`import`语句时，我仍然需要相同的语法`require`：

```
var baseClass = require("core/SomeBaseClass");
class Child extends baseClass.Base {
} 
```

这显然会导致关于缺少类型（Base）的错误。我目前计划通过提供基类的存根实现来规避这个错误。如下：

```
declare module baseClass {
    class Base {
    }
}

var baseClass = require("core/SomeBaseClass");
class Child extends baseClass.Base {
} 
```

虽然这可行，但我觉得这看起来相当难看。我需要能够扩展类，因为我需要调用`super`. 这意味着我不能使用接口来键入*所需*的模块。

有谁知道更好的解决方案，还是我被迫以这种方式解决我的问题？

与往常一样，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:59:35.627

恐怕没有办法让编译器不在定义调用中生成附加要求。

使用 vanilla require 语句时，您可以尝试使用 --declaration 编译器标志从 ts 文件为您生成一个 .d.ts（这样您就不需要添加该存根）。希望这可以帮助。

听起来也像是编译器中的一个很好的功能（我想是一个简单的实现），所以你可能想在这里请求：[https](https://typescript.codeplex.com/workitem/list/basic) ://typescript.codeplex.com/workitem/list/basic （发送链接在评论中，我一定会投赞成票）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:46:39.293

**错误的答案。留给上下文。**

您要解决的问题：*我想确保小部件可以引用我的核心模块，但不会将它们包含在它们的输出文件中。*

当你这样做：

```
import baseClass = module("core/SomeBaseClass"); 
```

并使用`--module 'amd'`它创建的编译器标志进行编译，`define`并`require`调用与您尝试实现的相同。它不会把它拉进去。你可以看到我在这里创建的一个示例：[https ://github.com/basarat/TypeScriptEditor/tree/gh-pages/scripts](https://github.com/basarat/TypeScriptEditor/tree/gh-pages/scripts)

# javascript - 其他操作完成后执行操作

> ID：16170833
> 
> 赞同：0
> 
> 时间：2013-04-23T13:38:44.473
> 
> 标签：javascript, jquery

我正在淡出一个元素，如下所示：

```
$(div.Panel).fadeOut(800); 
```

我只需要在 fadeOut 完成后显示 $(div.Info) 。

如何仅在另一个动作完成后才执行一个动作？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:41:28.203

你可以使用回调

```
$(div.Panel).fadeOut(800,function(){
    $(div.info).show()
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:43:05.000

它使用回调函数。所有函数或方法 jQuery 都可以接收一个附加参数，该参数带有必须在第一次处理结束后执行的函数的名称。例子：

myFunction("函数参数", funcionCallback);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T13:41:16.533

You need to define a custom event in your fadeout and attach a listener to it. Something like [jquery fadeout event listener](https://stackoverflow.com/questions/10598089/jquery-fadeout-event-listener)

# sql-server-2008 - 不同架构 SQL Server 2008 中的外键

> ID：16170835
> 
> 赞同：1
> 
> 时间：2013-04-23T13:38:51.577
> 
> 标签：sql-server-2008

我从一个表 cnfg.Account 到另一个表 dict.Types 创建了一个外键，架构不同，没问题，创建 FK 后，我可以在 Management Studio 中浏览表，转到 Keys 和我的新 FK在那里，但是如果右键单击表格并单击“设计”，然后右键单击以查看关系...我的新 FK 不存在。是因为架构不同吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:48:37.763

我没有在[Connect](http://connect.microsoft.com/sql)上找到关于此的特定错误，但这并不意味着它不存在或 Microsoft 不知道它。但是，由于您不太可能看到这个向后移植到旧版本的修复程序（大多数剩余的错误已经关闭，因为在过去一两年内不会修复），我强烈建议迁移到 SQL Server 2012 版本管理工作室。我已经验证那里不会出现这个问题（[点击放大](https://i.stack.imgur.com/qZTfS.png)）：

![在此处输入图像描述](https://i.stack.imgur.com/qZTfS.png)

（这些表是`x.a`和`y.b`，UI 只是有一种有趣的方式来显示它。）

您仍然可以管理所有 SQL Server 2005、2008 和 2008 R2。如果您还没有许可证，那也没关系！[从SQL Server 2012 SP1](http://www.microsoft.com/en-us/download/details.aspx?id=35579)开始，您不再需要它。

停止使用他们不会修复的旧工具。和/或学习 DDL 而不是依赖视觉设计师。每次发布它们都会稍微好一些，但它们不是您想要依赖的拐杖。

# wordpress - 当请求特定图像来自 ie8 时服务器返回 404

> ID：16170836
> 
> 赞同：1
> 
> 时间：2013-04-23T13:38:53.030
> 
> 标签：wordpress, http, cross-browser, http-status-code-404

我有一个在每个浏览器中都能正常工作的图像的链接，但 ie8。非常奇怪的行为...

如果你在ie8中点击这个链接，你会得到一个404，否则图片会加载...

```
http://www.manateenewjobsnow.com/wp-content/uploads/2013/04/EDATE_Map.jpg 
```

导致链接到 404 的 ie8 和 ie9 之间可能有什么不同？

只是在这里寻找线索，对同一资源的 http 请求如何在浏览器之间给出不同的响应？浏览器如何成为服务器响应的一个因素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:24:36.417

That image uses CMYK color model, ,maybe IE8 does not support that. Try changing it to RGB.

# apache - query_string 的 mod_rewrite 问题

> ID：16170838
> 
> 赞同：0
> 
> 时间：2013-04-23T13:38:55.460
> 
> 标签：apache, mod-rewrite

我正在尝试将具有特定关键字的 url 请求重写为 https。我遇到了`QUERY_STRING`.

```
RewriteRule "^.*dev" "/so/me/path/redirect.jsp?dest=/so/me/path/orig.21.10.shtml?my_name=launch&my_class=english_20&my_take=net-thing_1100" [QSA,PT] 
```

问题是每当 mod_rewrite interupt 我得到重写规则最多的 `"/so/me/path/redirect.jsp?dest=/so/me/path/orig.21.10.shtml?my_name=launch"`时候。`Query_String`在提到 QSA 参数后，它甚至会跳过。

阿鲁蒙

# php - ruby 服务器未收到 PHP curl 帖子

> ID：16170839
> 
> 赞同：0
> 
> 时间：2013-04-23T13:38:59.140
> 
> 标签：php, ruby, post, httprequest, tcpserver

我有一个用 TCPServer 实现的简单 ruby​​ 服务器，我需要通过来自运行 PHP 的不同服务器的 POST 请求来调用它。当我在终端中执行 cURL 或在浏览器中访问它时，ruby 服务器会回复，但当我从 PHP 服务器通过 cURL 调用时不会。我也试过打电话 fopen / stream_get_contents 也没有奏效。此外，cURL 在 PHP 服务器上与其他应用程序一起工作正常......

这是我的 PHP 函数：

```
<?php
$curl_handle = curl_init();
curl_setopt($curl_handle, CURLOPT_URL, 'RUBY_SERVER_IP:RUBY_SERVER_PORT');
curl_setopt($curl_handle, CURLOPT_POST, true);
curl_setopt($curl_handle, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($curl_handle, CURLOPT_POSTFIELDS, 'test=test');
curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, true);

$updates = curl_exec($curl_handle);
$output = curl_getinfo($curl_handle);
print_r($output);

curl_close($curl_handle);
?> 
```

这是 Ruby 服务器：

```
require "socket"

server = TCPServer.new(80)

loop {
    client = server.accept
    response = "<html>Got it</html>"
    headers = ["HTTP/1.1 200 OK",
             "Server: Ruby",
             "Content-Type: text/html; charset=iso-8859-1",
             "Content-Length: #{response.length}\r\n\r\n"].join("\r\n")
    client.puts headers
    client.puts response
    client.close
} 
```

任何想法为什么它不起作用？非常感谢！

# mysql - mysql错误#1064

> ID：16170841
> 
> 赞同：-2
> 
> 时间：2013-04-23T13:39:05.937
> 
> 标签：mysql, sql

错误

SQL查询：

```
CREATE TABLE RscCompView(
RscCompViewID int( 11 ) NOT NULL AUTO_INCREMENT ,
RscCompID int( 11 ) DEFAULT '0' NOT NULL ,
req_dateTIMESTAMP( 14 ) ,
PRIMARY KEY ( RscCompViewID ) ,
KEY req_date( req_date ) ,
KEY RscCompID( RscCompID )
); 
```

MySQL 说：文档

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 '(14), PRIMARY KEY (RscCompViewID), KEY req_date (req_date), KEY RscCompID ' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:40:19.007

`Timestamp`数据类型不能有长度，应该删除长度并且它会起作用，

```
CREATE TABLE RscCompView
(
    RscCompViewID int(11) NOT NULL AUTO_INCREMENT ,
    RscCompID int(11) DEFAULT '0' NOT NULL ,
    req_date TIMESTAMP,
    PRIMARY KEY (RscCompViewID) ,
    KEY req_date (req_date) ,
    KEY RscCompID (RscCompID)
); 
```

有关其他信息，数据类型`INT(11)`并不意味着整数的长度为 11，而是如果`ZEROFILL`还指定了整数值将在左侧填充零的方式。*有符号整数*的取值范围为`-2147483648 to 2147483647`，*无符号整数*为`0 to 4294967295`。

考虑以下示例，

```
INT(3)      INT(3) ZEROFILL
1           001
10          010
100         100 
```

# c# - 为什么 CreateFile 需要永远？

> ID：16170842
> 
> 赞同：1
> 
> 时间：2013-04-23T13:39:07.757
> 
> 标签：c#, windows, winapi

我的程序中有一个线程试图`CreateFile`锁定 USB 设备，但是，有时它不会失败，而是需要永远。有没有其他人遇到过这个问题？有什么办法可以为这个功能设置超时吗？代码是这样的：

```
string file = @"\\.\" + DriveLetter[0] + ":";
handle = CreateFile(filename, GENERIC_READ, FILE_SHARE_WRITE, IntPtr.Zero, 0x3, 0, IntPtr.Zero); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:30:00.480

您想锁定它以使其无法访问 - 作为设备 - 或“阻止”分离它（例如它是一支笔）？
编辑：对不起，我不允许添加评论：S
无论如何。如果锁定很重要，您可以使用 devcon 轻松完成：http: [//support.microsoft.com/kb/311272](http://support.microsoft.com/kb/311272)
和示例代码： http:
[//www.programmersheaven.com/mb/dotnet/337951/337951/ programatically-enable--disable-usb-port-using-cnet/](http://www.programmersheaven.com/mb/dotnet/337951/337951/programatically-enable--disable-usb-port-using-cnet/)
，以防您不想一直使用带参数的 exe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T21:44:16.220

永远的占用似乎与主窗体线程发生了某种冲突。

最终，我将包含`CreateFile`操作的锁定函数移到了一个单独的线程，它不会与 UI 线程竞争，现在它工作正常。

# javascript - 从基本对象中提取数据

> ID：16170844
> 
> 赞同：0
> 
> 时间：2013-04-23T13:39:15.147
> 
> 标签：javascript, jquery, object

我正在使用输出以下对象的 API：

```
Object {percentage: 100, status: "Loading Resources", uploading_file: "", event: "progress"} 
```

我需要提取百分比键的值并将其分配给 DOM 中的元素，如下所示：

```
$("#percentage").text(percentage); 
```

产生这个对象的完整代码是：

```
CL3VER.onScriptEvent('progress', function(percentage, status, filename){
    console.log(percentage);
    // $("#percentage").text(percentage);
}); 
```

如何将百分比数据提取到变量中，以便可以使用 JQuery 更改 DOM 元素的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:46:33.197

什么变量保存你的对象？

如果是，`percentage`您可以像访问[任何对象一样访问属性](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)

```
percentage.percentage
// 100

var yourObj = {percentage: 100, status: "Loading Resources", uploading_file: "", event: "progress"}
yourObj.percentage
// or 
yourObj['percentage'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:48:37.440

如果我明白你有这样的对象

```
var object = {percentage: 100, status: "Loading Resources", uploading_file: "", event: "progress"} 
```

你可以做类似的事情

```
var per = object.percentage; 
```

或者

```
var per = object["percentage"]; 
```

那么你可以轻松地做类似的事情`$("someselector").text(per);`

# php - PHP：正则表达式匹配所有外部链接的 URL

> ID：16170848
> 
> 赞同：0
> 
> 时间：2013-04-23T13:39:20.210
> 
> 标签：php, regex

到目前为止，我一直在使用这个正则表达式代码来获取 YouTube 视频的 ID

```
"/https?:\/\/w*.?(?:youtube.com|youtu.be)\/watch\/\?v=([A-Za-z0-9\-_]+)/i" 
```

我尝试扩展它，所以它会忽略 HTML 链接中 YouTube 视频的 ID (href="..")

```
"/[?:(^href=\")]https?:\/\/w*.?(?:youtube.com|youtu.be)\/watch\/\?v=([A-Za-z0-9\-_]+)/i" 
```

不幸的是，那不是这样做的。事实上，完整的代码会产生相反的结果。

```
$input = array(
    'http://youtube.com/watch/?v=oKay1',
    'http://youtu.be/watch/?v=oKay2',
    'href="http://youtube.com/watch/?v=NICHToKay"', //this shouldn't be found
    '[url="http://youtube.com/watch/?v=oKay3]'
    );

$pattern = "/[?:(^href=\")]https?:\/\/w*.?(?:youtube.com|youtu.be)\/watch\/\?v=([A-Za-z0-9\-_]+)/i";

foreach($input as $v) {
    $match = preg_match_all($pattern, $v, $result);
    print "$v => $match\n";
    if ($match == 1)
        var_dump($result);
} 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:44:41.797

try this (based on your 4 given values in the arrays):

```
/^(\[url\="){0,1}http[s]{0,1}\:\/\/(www\.){0,1}(youtube\.com|youtu\.be)\/watch\/\?v\=(.+)(\]){0,1}/ims 
```

you will get your ID in 3rd array of results

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:48:19.477

试试这个，我是从这个网站上的另一个链接得到的

```
preg_match('#<object[^>]+>.+?http://www.youtube.com/v/([A-Za-z0-9\-_]+).+?</object>#s', $markup, $matches);

var_dump($matches[1]); 
```

来源：[使用 PHP 从 html 代码中获取 Youtube 视频 ID](https://stackoverflow.com/questions/1773822/get-youtube-video-id-from-html-code-with-php)

# javascript - 隐藏值不会在我的 javascript 中触发

> ID：16170849
> 
> 赞同：0
> 
> 时间：2013-04-23T13:39:23.100
> 
> 标签：javascript, jquery

我有一个隐藏的字段值会发生变化。在我的 javascript 中，我希望检测到这种变化并将值传递给我的 php 脚本。

我已阅读需要触发隐藏字段值更改事件。因为这个值总是在改变我如何去做。

下面是我试过的代码：

```
 $('#supp').val().trigger('change');

 $('#supp').change(function ()
{
    populate();
}) 
```

这给了我一个控制台错误

```
Uncaught TypeError: Object has no method trigger. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:40:32.670

```
$('#supp').trigger('change'); 
```

不要`val()`在手之前使用，因为它返回一个字符串、数字或数组。

但是，如果您正在设置一个值，我假设您是，则`val()`返回`jQuery`.

```
$('#supp').val('newValue').trigger('change'); 
```

此外，您需要`change()`在尝试触发它之前绑定您的处理程序。

# python - 从 SQL 查询中获取错误消息返回到 Python

> ID：16170850
> 
> 赞同：-1
> 
> 时间：2013-04-23T13:39:31.607
> 
> 标签：python, sql, subprocess, sqlcmd

我需要能够判断由 Python 启动的 SQL 查询是否失败。到目前为止，我有：

```
import subprocess
p = subprocess.Popen(['sqlcmd', '-E -m-1 -S 1070854A\AISP -i NewStructures.sql >>process.log'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
out, err = p.communicate()
print out
print err 
```

但它不喜欢 SQLCMD 参数。输出说

```
Sqlcmd: '-E -S 1070854A\AISP -i NewStructures.sql': Unknown Option. Enter '-?' for help. 
```

这些参数在将它们键入命令行时起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:44:34.600

`'-E -m-1 -S 1070854A\AISP -i NewStructures.sql >>process.log'` is interpreted as one single argument, that's why you get this error. You need to split the arguments to make this work.

Seen as you're trying to use a redirection in your shell command, you could use something like this:

```
import subprocess
with open('process.log', 'ab') as logfile:
    logfile.seek(0, 2)
    p = subprocess.Popen(['sqlcmd', '-E', '-m-1', '-S', '1070854A\AISP', '-i', 'NewStructures.sql'], stdout=logfile, stderr=subprocess.PIPE)
    out, err = p.communicate() 
```

`out` will be emty anyway, as stdout is redirected to a file.

Redirection using `>` or `>>` only works with `shell=True`.

# sql - SQL - 如何计算一列中多次出现的值

> ID：16170852
> 
> 赞同：3
> 
> 时间：2013-04-23T13:39:39.283
> 
> 标签：sql, sql-server-2008

我有一个表，其中有一`StatusID`列有许多不同的可能值，我想做的是生成一个以下格式的报告，该报告能够生成各种标准的计数。

**期望的输出：**

```
Notes | Total | Valid | Invalid | Consults Booked | 
```

Total 是返回的所有行的计数 - 已经在下面的查询中

Valid 是任何`StatusID`不是`5`,`7`或`42`

的计数无效`5`，`7`并且`42`

已预订的咨询次数是`4`

（无效 + 有效应该等于总计）

到目前为止，我只能设法得到`Total`，我不知道如何使用`IF`或其他任何值来确定其他值。

**查询至今**

```
select notes, tLeadStatus.Status, tLeadStatus.StatusID,
       count(*) as Total from LeadManagement.dbo.tLead with (NOLOCK)
left join LeadManagement.dbo.tInternetLead on tLead.Leadid = tinternetlead.leadid
left join LeadManagement..tLeadStatus on tLeadStatus.StatusID = tLead.Status
where (CampaignID = '12327')
  and (registerdate >= '2013-03-01' and registerdate < '2013-04-01')
group by notes,tLeadStatus.StatusID,tLeadStatus.Status 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T13:43:29.907

```
SUM(CASE WHEN StatusID NOT IN (5, 7, 42) THEN 1 ELSE 0 END) AS Valid,
SUM(CASE WHEN StatusID IN (5, 7, 42) THEN 1 ELSE 0 END) AS Invalid,
SUM(CASE WHEN StatusId = 4 THEN 1 ELSE 0 END) AS 'Consults Booked' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:44:32.820

You can use an aggregate function with a CASE to get the other columns:

```
select notes, 
  count(*) as Total,
  sum(case when tLeadStatus.StatusID not in (5, 7, 42) then 1 else 0 end) Valid,
  sum(case when tLeadStatus.StatusID  in (5, 7, 42) then 1 else 0 end) Invalid,
  sum(case when tLeadStatus.StatusID= 4 then 1 else 0 end) ConsultsBooked
from LeadManagement.dbo.tLead with (NOLOCK)
left join LeadManagement.dbo.tInternetLead 
  on   tLead.Leadid = tinternetlead.leadid
left join LeadManagement..tLeadStatus 
  on tLeadStatus.StatusID = tLead.Status
where (CampaignID = '12327')
  and (registerdate >= '2013-03-01' and registerdate < '2013-04-01')
group by notes 
```

# bash - 获取 FFMPEG 转码的友好输出状态

> ID：16170854
> 
> 赞同：0
> 
> 时间：2013-04-23T13:39:45.040
> 
> 标签：bash, unix, ffmpeg

当我使用转码文件时

```
ffmpeg -i input.avi  -vcodec libx264 output.mp4 
```

`ffmpeg`程序将逐位显示正在转码的文件的状态。它会填满屏幕，如果我使用 for 循环对多个文件进行转码，一段时间后我不知道它是哪个文件。

有没有办法在转码时只更新 bash 屏幕上的最后一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:34:23.747

当然，将 ffmpeg 输出重定向到某处（到 /dev/null 或文件）并仅打印出当前正在转码的文件的名称。

例如：

```
for input in file1 file2 file3
 do
  echo "Transcoding $input"
  ffmpeg -i $input  -vcodec libx264 transcoded_$input > /dev/null
 done 
```

# javascript - 使用传输与 kineticjs 绘制线

> ID：16170855
> 
> 赞同：0
> 
> 时间：2013-04-23T13:39:45.143
> 
> 标签：javascript, html, kineticjs

我想用 kineticJS 画线，然后使用传输。

```
line = new Kinetic.Line({
    points: [0, 0, 50, 50],
    stroke: "red"
}); 
```

问题是我不能使用传输点。

任何解决方法？像绘制看起来像线的多边形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:18:48.310

目前没有解决方法或很好的方法来做到这一点，但您基本上必须停止动画，修改点，然后再次启动动画。

```
//Pseudo-code:
  trans = line.transitionTo({
    // configuration being transitioned
  });

  trans.stop();
  //add points or change points.
  trans.start(); 
```

# svn - 尝试在 ubuntu netbeans 7.3 和 subversion 上提交更改时出错

> ID：16170859
> 
> 赞同：1
> 
> 时间：2013-04-23T13:39:57.107
> 
> 标签：svn, ubuntu, netbeans, ubuntu-12.04

当我将文件移动到新机器并尝试提交更改时，我得到以下窗口，没有可供选择的选项：

![在此处输入图像描述](https://i.stack.imgur.com/ZdDY6.png)

有任何想法吗？

# php - 确定课程时间是否冲突

> ID：16170866
> 
> 赞同：0
> 
> 时间：2013-04-23T13:40:14.473
> 
> 标签：php, database, database-design

我必须将课程时间存储到数据库中，格式是这样的`3CD5G`或`4EFG`.......等等。我想知道如何将它存储到我可以检索它以确定所选课程是否冲突的数据库中，因为是可变长度，我无法找到更好的存储方法，有什么建议吗？以及如何为课程 ID 精心生成唯一编号？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:18:55.667

将课程存储为开始时间和最后时间（+1 秒），例如零小时课程= [0..3600[ ，并确保您的时间格式可以使用 mysql 和 php 比较运算符进行比较。这应该确保您充分利用数据库。

# html - 如何将图像向左浮动，其他不低于它？

> ID：16170868
> 
> 赞同：1
> 
> 时间：2013-04-23T13:40:17.297
> 
> 标签：html, css

**[演示](http://jsfiddle.net/BYnLd/1/)**

我可以在不接触 html 的情况下完成此操作吗？

html...

```
 <div>
    <img src="http://i50.tinypic.com/1zey0j8.gif" alt="" />WALLPAPER
     <span>some paragraph here 
some paragraph here          /*this should not go below the image*/
some paragraph here 
some paragraph here
</span>
    </div> 
```

css...

```
div{width: 200px;}
img{float: left; width: 50px; height: 50px;}
span{display: block;} 
```

**编辑**

**Kaloyan Ivanov**给了我一个最好的答案。但我想知道溢出隐藏是如何做到的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:42:44.390

添加`overflow: hidden;`到跨度。

[http://jsfiddle.net/BYnLd/2/](http://jsfiddle.net/BYnLd/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:51:29.343

因为您可能不知道图像下方的高度。所以使用`margin-bottom: 100%;`你的形象

**[看到这个小提琴](http://jsfiddle.net/BYnLd/6/)**

**编辑**

作为已编辑的问题，我为您提供了一个链接

[CSS 'overflow:hidden' 如何强制一个元素（包含浮动元素）环绕浮动元素？](https://stackoverflow.com/questions/3400749/how-does-css-overflowhidden-work-to-force-an-element-containing-floated-elem)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T13:43:20.250

给你的图像一个下边距，如：

```
img {
    float: left;
    width: 50px;
    height: 50px;
    margin-bottom: 200px;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/BYnLd/3/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:44:36.237

You should float the span element also to the left. And make sure that it has a maximum width of 150px.

CSS should look something like this:

```
div{width:200px;}
img{float:left; width:50px;height:50px;}
span{display:block; width:140px; padding-left:10px;} 
```

# windows - 使用 MASM32 随机化装配中的数字

> ID：16170871
> 
> 赞同：-2
> 
> 时间：2013-04-23T13:40:21.443
> 
> 标签：windows, assembly, random, masm, masm32

如何使用带有 Masm32 的 Assembly 随机化一个数字？我可以使用什么来创建随机数生成器？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-13T12:45:18.537

## 使用 MASM32 获取随机数

[MASM32 SDK](http://www.masm32.com/)附带了一些实现随机生成器的示例。将它们用于自己的目的并不是最糟糕的主意。以下示例只是示例，其中缺少错误处理。这些示例在 [0..11] 范围内生成并生成 30 个随机数。

具有 a=134775813 和 b=c的[线性同余生成器](https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use)（如 Delphi）位于*\masm32\examples\exampl03\lcd\lcd.asm*中。

```
.686
.MODEL flat, STDCALL

INCLUDE kernel32.inc        ; GetStdHandle, WriteFile, ExitProcess
INCLUDELIB kernel32.lib

INCLUDE user32.inc          ; wsprintf
INCLUDELIB user32.lib

NumberOfNumbers = 30        ; Number of random numbers to be generated and shown
RangeOfNumbers = 12         ; Range of the random numbers (0..RangeOfNumbers-1)

.DATA
    RandSeed    dd  ?

.CODE
PseudoRandom PROC                       ; Deliver EAX: Range (0..EAX-1)
      push  edx                         ; Preserve EDX
      imul  edx,RandSeed,08088405H      ; EDX = RandSeed * 0x08088405 (decimal 134775813)
      inc   edx
      mov   RandSeed, edx               ; New RandSeed
      mul   edx                         ; EDX:EAX = EAX * EDX
      mov   eax, edx                    ; Return the EDX from the multiplication
      pop   edx                         ; Restore EDX
      ret
ret
PseudoRandom ENDP                       ; Return EAX: Random number in range

main PROC
    rdtsc
    mov RandSeed, eax                   ; Initialize random generator

    mov ecx, NumberOfNumbers            ; Loop counter - show ECX random numbers
    LL1:
    push ecx                            ; Preserve loop counter

    mov eax, RangeOfNumbers             ; Range (0..RangeOfNumbers-1)
    call PseudoRandom

    call write_number                   ; printf ("%u ", EAX)

    pop ecx                             ; Restore loop counter
    loop LL1

    invoke ExitProcess, 0
main ENDP

write_number PROC STDCALL USES ebx      ; printf ("%u ", EAX)
LOCAL numstring[12]:BYTE, NumberOfBytesWritten:DWORD
.CONST
    fmt db "%u ",0
.CODE
    invoke wsprintf, ADDR numstring, ADDR fmt, eax
    mov ebx, eax                        ; Preserve result - count of written bytes
    invoke GetStdHandle, -11            ; Get STD_OUTPUT_HANDLE
    mov edx, eax                        ; EAX will be used by the following INVOKE
    invoke WriteFile, edx, ADDR numstring, ebx, ADDR NumberOfBytesWritten, 0
    ret
write_number ENDP

END main 
```

XORshifter可以在\ [masm32](https://en.wikipedia.org/wiki/Xorshift) *\examples\exampl04\pascal\pascal.asm*中找到。

```
.686
.MODEL flat, STDCALL

INCLUDE kernel32.inc        ; GetStdHandle, WriteFile, ExitProcess
INCLUDELIB kernel32.lib

INCLUDE user32.inc          ; wsprintf
INCLUDELIB user32.lib

NumberOfNumbers = 30        ; Number of random numbers to be generated and shown
RangeOfNumbers = 12         ; Range of the random numbers (0..RangeOfNumbers-1)

.CODE
Rnd3Bit Proc        ; This procedure generates up to 20 random bits (EAX=0..20).
.DATA
    RndInit dd 0A2F59C2Eh
.CODE
    mov edx,RndInit
rl: rol edx, 1
    jnc rs
    xor edx, 0Ah
rs: dec eax
    jne rl
    mov eax, edx
    rcr edx, 1
    mov RndInit, edx
ret
Rnd3Bit EndP

main PROC
    rdtsc                           ; Any number for the first seed
    test eax, eax                   ; EAX == 0?
    setz dl                         ; DL=1 if EAX==0, DL=0 if EAX>0
    or eax, edx                     ; Not 0 under any circumstances
    mov RndInit, eax                ; Reinitialize random generator

    mov ecx, NumberOfNumbers        ; Loop counter - show ECX random numbers
    LL1:
    push ecx                        ; Preserve loop counter

    mov eax, 20                     ; Amount of bits
    call Rnd3Bit
    and eax, 11111111111111111111b  ; 20 bits set = 1048575

    mov ecx, RangeOfNumbers         ; Range (0..RangeOfNumbers-1)
    xor edx, edx                    ; Needed for DIV
    div ecx                         ; EDX:EAX/ECX -> EAX remainder EDX
    mov eax, edx                    ; Get the remainder

    call write_number               ; printf ("%u ", EAX)
    pop ecx                         ; Restore loop counter
    loop LL1

    invoke ExitProcess, 0
main ENDP

write_number PROC STDCALL USES ebx  ; printf ("%u ", EAX)
LOCAL numstring[12]:BYTE, NumberOfBytesWritten:DWORD
.CONST
    fmt db "%u ",0
.CODE
    invoke wsprintf, ADDR numstring, ADDR fmt, eax
    mov ebx, eax                    ; Preserve count of written bytes
    invoke GetStdHandle, -11        ; Get STD_OUTPUT_HANDLE
    mov edx, eax                    ; EAX will be used by the following INVOKE
    invoke WriteFile, edx, ADDR numstring, ebx, ADDR NumberOfBytesWritten, 0
    ret
write_number ENDP

END main 
```

[Park-Miller-Algorithm](https://books.google.de/books?id=vEN-ckcdtCwC&pg=PA43#v=onepage&q&f=false)用于\masm32\examples\ exampl05 *\rpg\rpg.asm*

```
.686
.MODEL flat, STDCALL

INCLUDE kernel32.inc        ; GetStdHandle, WriteFile, ExitProcess
INCLUDELIB kernel32.lib

INCLUDE user32.inc          ; wsprintf
INCLUDELIB user32.lib

NumberOfNumbers = 30        ; Number of random numbers to be generated and shown
RangeOfNumbers = 12         ; Range of the random numbers (0..RangeOfNumbers-1)

.DATA
rseed dd 0
range dd 0

.CODE

nrandom PROC
; ------------------
; NaN's nrandom algo (Park Miller random algorithm)
; ------------------
  lpstart:
    mov eax, rseed
    test eax, 80000000h
    jz  @F
    add eax, 7FFFFFFFh
  @@:
    xor edx, edx
    mov ecx, 127773
    div ecx
    mov ecx, eax
    mov eax, 16807
    mul edx
    mov edx, ecx
    mov ecx, eax
    mov eax, 2836
    mul edx
    sub ecx, eax
    xor edx, edx
    mov eax, ecx
    mov rseed, ecx
    div range

    mov eax, edx                        ; Write DWORD result to return register
    add rseed, 1                        ; New value to rseed

    ret
nrandom ENDP

main PROC
    rdtsc
    mov rseed, eax                      ; Reinitialize random generator

    mov ecx, NumberOfNumbers            ; Loop counter - show ECX random numbers

    LL1:
    push ecx                            ; Preserve loop counter

    mov range, RangeOfNumbers           ; Range (0..RangeOfNumbers-1)
    call nrandom

    call write_number                   ; printf ("%u ", EAX)

    pop ecx                             ; Restore loop counter
    loop LL1

    invoke ExitProcess, 0
main ENDP

write_number PROC STDCALL USES ebx      ; printf ("%u ", EAX)
LOCAL numstring[12]:BYTE, NumberOfBytesWritten:DWORD
.CONST
    fmt db "%u ",0
.CODE
    invoke wsprintf, ADDR numstring, ADDR fmt, eax
    mov ebx, eax                        ; Preserve count of written bytes
    invoke GetStdHandle, -11            ; Get STD_OUTPUT_HANDLE
    mov edx, eax                        ; EAX will be used by the following INVOKE
    invoke WriteFile, edx, ADDR numstring, ebx, ADDR NumberOfBytesWritten, 0
    ret
write_number ENDP

END main 
```

*\masm32\examples\exampl07\shuflarr\sa.asm*使用内置的 MASM32 `nrandom`。源代码位于*\masm32\m32lib\nrand.asm 中*。它与上面的 Park-Miller 算法相同。

```
.686
.MODEL flat, STDCALL
OPTION casemap:none

INCLUDE kernel32.inc        ; GetStdHandle, WriteFile, ExitProcess
INCLUDELIB kernel32.lib

INCLUDE user32.inc          ; wsprintf
INCLUDELIB user32.lib

INCLUDE masm32.inc          ; nseed, nrandom
INCLUDELIB masm32.lib

NumberOfNumbers = 30        ; Number of random numbers to be generated and shown
RangeOfNumbers = 12         ; Range of the random numbers (0..RangeOfNumbers-1)

.CODE
main PROC
    rdtsc
    invoke nseed, eax                   ; Initialize nrandom_seed

    mov ecx, NumberOfNumbers            ; Loop counter - show ECX random numbers
    LL1:
    push ecx                            ; Preserve loop counter

    invoke nrandom, RangeOfNumbers      ; Range (0..RangeOfNumbers-1)

    call write_number                   ; printf ("%u ", EAX)

    pop ecx                             ; Restore loop counter
    loop LL1

    invoke ExitProcess, 0
main ENDP

write_number PROC STDCALL USES ebx      ; printf ("%u ", EAX)
LOCAL numstring[12]:BYTE, NumberOfBytesWritten:DWORD
.CONST
    fmt db "%u ",0
.CODE
    invoke wsprintf, ADDR numstring, ADDR fmt, eax
    mov ebx, eax                        ; Preserve result - count of written bytes
    invoke GetStdHandle, -11            ; Get STD_OUTPUT_HANDLE
    mov edx, eax                        ; EAX will be used by the following INVOKE
    invoke WriteFile, edx, ADDR numstring, ebx, ADDR NumberOfBytesWritten, 0
    ret
write_number ENDP

END main 
```

有很多`.lib`文件可以访问 Windows 系统。微软建议使用`CryptGenRandom`：

```
.686
.MODEL flat, STDCALL
OPTION casemap:none

INCLUDE kernel32.inc        ; GetStdHandle, WriteFile, ExitProcess
INCLUDELIB kernel32.lib

INCLUDE user32.inc          ; wsprintf
INCLUDELIB user32.lib

INCLUDE advapi32.inc        ; CryptAcquireContext, CryptGenRandom, CryptReleaseContext
INCLUDELIB advapi32.lib

NumberOfNumbers = 30        ; Number of random numbers to be generated and shown
RangeOfNumbers = 12         ; Range of the random numbers (0..RangeOfNumbers-1)

.DATA
    random_bytes dd 30 DUP (?)
    hProvider dd ?

.CODE
main PROC
    ; https://msdn.microsoft.com/library/windows/desktop/aa379886.aspx
    CRYPT_VERIFYCONTEXT = 0F0000000h
    PROV_RSA_FULL = 1
    invoke CryptAcquireContext, ADDR hProvider, 0, 0, PROV_RSA_FULL,CRYPT_VERIFYCONTEXT

    ; https://msdn.microsoft.com/library/windows/desktop/aa379942.aspx
    invoke CryptGenRandom, hProvider, 30*4, ADDR random_bytes       ; Generate 30 random DWORD (30*4)

    ; https://msdn.microsoft.com/library/windows/desktop/aa380268.aspx
    invoke CryptReleaseContext, hProvider, 0

    lea esi, random_bytes
    mov ecx, NumberOfNumbers            ; Loop counter - show ECX random numbers
    @@:
    push ecx                            ; Preserve loop counter

    lodsd                               ; [ESI] -> EAX, ADD ESI, 4

    ; Adjust EAX to the range
    mov ecx, RangeOfNumbers             ; Range (0..RangeOfNumbers-1)
    xor edx, edx                        ; Needed for DIV
    div ecx                             ; EDX:EAX/ECX -> EAX remainder EDX
    mov eax, edx                        ; Get the remainder

    call write_number                   ; printf ("%u ", EAX)

    pop ecx                             ; Restore loop counter
    loop @B                             ; Loop the next @@ above

    invoke ExitProcess, 0               ; Exit (0) = return 0
main ENDP

write_number PROC STDCALL USES ebx      ; printf ("%u ", EAX)
LOCAL numstring[12]:BYTE, NumberOfBytesWritten:DWORD
.CONST
    fmt db "%u ",0
.CODE
    invoke wsprintf, ADDR numstring, ADDR fmt, eax
    mov ebx, eax                        ; Preserve result - count of written bytes
    invoke GetStdHandle, -11            ; Get STD_OUTPUT_HANDLE
    mov edx, eax                        ; EAX will be used by the following INVOKE
    invoke WriteFile, edx, ADDR numstring, ebx, ADDR NumberOfBytesWritten, 0
    ret
write_number ENDP

END main 
```

我`Dns_GetRandomXid`在`dnsapi.lib`. 它`CryptGenRandom`有时使用 C 函数`rand()`，并且似乎是线程安全的。

```
.686
.MODEL flat, STDCALL
OPTION casemap:none

INCLUDE kernel32.inc        ; GetStdHandle, WriteFile, ExitProcess
INCLUDELIB kernel32.lib

INCLUDE user32.inc          ; wsprintf
INCLUDELIB user32.lib

INCLUDE dnsapi.inc          ; Dns_GetRandomXid
INCLUDELIB dnsapi.lib

NumberOfNumbers = 30        ; Number of random numbers to be generated and shown
RangeOfNumbers = 12         ; Range of the random numbers (0..RangeOfNumbers-1)

.CODE
main PROC
    mov ecx, NumberOfNumbers            ; Loop counter - show ECX random numbers
    LL1:
    push ecx                            ; Preserve loop counter

    invoke Dns_GetRandomXid, 0          ; Argument not used -> AX = random WORD

    mov ecx, RangeOfNumbers             ; Range (0..RangeOfNumbers-1)
    xor edx, edx                        ; Needed for DIV
    div ecx                             ; EDX:EAX/ECX -> EAX remainder EDX
    mov eax, edx                        ; Get the remainder

    call write_number                   ; printf ("%u ", EAX)

    pop ecx                             ; Restore loop counter
    loop LL1

    invoke ExitProcess, 0
main ENDP

write_number PROC STDCALL USES ebx      ; printf ("%u ", EAX)
LOCAL numstring[12]:BYTE, NumberOfBytesWritten:DWORD
.CONST
    fmt db "%u ",0
.CODE
    invoke wsprintf, ADDR numstring, ADDR fmt, eax
    mov ebx, eax                        ; Preserve result - count of written bytes
    invoke GetStdHandle, -11            ; Get STD_OUTPUT_HANDLE
    mov edx, eax                        ; EAX will be used by the following INVOKE
    invoke WriteFile, edx, ADDR numstring, ebx, ADDR NumberOfBytesWritten, 0
    ret
write_number ENDP

END main 
```

另一个未记录的功能`CDGenerateRandomBits`在`cryptdll.lib`.

```
.686
.MODEL flat, STDCALL
OPTION casemap:none

INCLUDE kernel32.inc        ; GetStdHandle, WriteFile, ExitProcess
INCLUDELIB kernel32.lib

INCLUDE user32.inc          ; wsprintf
INCLUDELIB user32.lib

INCLUDE cryptdll.inc        ; CDGenerateRandomBits
INCLUDELIB cryptdll.lib

NumberOfNumbers = 30        ; Number of random numbers to be generated and shown
RangeOfNumbers = 12         ; Range of the random numbers (0..RangeOfNumbers-1)

.DATA
    random_bytes dd 30 DUP (?)

.CODE
main PROC
    invoke CDGenerateRandomBits, Addr random_bytes, (NumberOfNumbers*4)     ; Generate 120 random bytes (30 DWORD à 4 BYTE)

    lea esi, random_bytes
    mov ecx, 30                         ; Show 30 random numbers
    LL1:
    push ecx                            ; Preserve loop counter

    lodsd                               ; [ESI] -> EAX; ESI += 4

    ; Adjust EAX to range
    mov ecx, RangeOfNumbers             ; Range (0..RangeOfNumbers-1)
    xor edx, edx                        ; Needed for DIV
    div ecx                             ; EDX:EAX/ECX -> EAX remainder EDX
    mov eax, edx                        ; Get the remainder

    call write_number                   ; printf ("%u ", EAX)

    pop ecx                             ; Restore loop counter
    loop LL1

    invoke ExitProcess, 0
main ENDP

write_number PROC STDCALL USES ebx      ; printf ("%u ", EAX)
LOCAL numstring[12]:BYTE, NumberOfBytesWritten:DWORD
.CONST
    fmt db "%u ",0
.CODE
    invoke wsprintf, ADDR numstring, ADDR fmt, eax
    mov ebx, eax                        ; Preserve result - count of written bytes
    invoke GetStdHandle, -11            ; Get STD_OUTPUT_HANDLE
    mov edx, eax                        ; EAX will be used by the follwing INVOKE
    invoke WriteFile, edx, ADDR numstring, ebx, ADDR NumberOfBytesWritten, 0
    ret
write_number ENDP

END main 
```

`rand()`不应该缺少 C 库中的旧版本。

```
.686
.MODEL flat, C

INCLUDE msvcrt.inc          ; crt_time, crt_srand, crt_rand, crt_printf,crt_exit
INCLUDELIB msvcrt.lib

NumberOfNumbers = 30        ; Number of random numbers to be generated and shown
RangeOfNumbers = 12         ; Range of the random numbers (0..RangeOfNumbers-1)

.DATA
    fmt db "%u ", 0

.CODE
main PROC
    sub esp, 8                          ; Reserve place for the C arguments

    ;  srand( time (NULL) )
    mov DWORD PTR [esp], 0
    call crt_time                       ; EAX = time(0)
    mov [esp], eax
    call crt_srand                      ; srand (EAX)

    mov ebx, NumberOfNumbers            ; Loop counter - show ECX random numbers
    LL1:

    call crt_rand                       ; EAX = rand()

    ; Adjust EAX to the range
    mov ecx, RangeOfNumbers             ; Range (0..RangeOfNumbers-1)
    xor edx, edx                        ; Needed for DIV
    div ecx                             ; EDX:EAX/ECX -> EAX remainder EDX
    mov eax, edx                        ; Get the remainder

    ; printf ("%d\n", EAX )
    mov [esp], OFFSET fmt
    mov [esp+4], eax
    call crt_printf                     ; printf (fmt,eax)

    dec ebx
    jne LL1

    ; exit (0) = return 0
    mov DWORD PTR [esp], 0
    call crt_exit                       ; exit (0) = return 0
main ENDP

END main 
```

在现代处理器（至少[Ivy Bridge](https://en.wikipedia.org/wiki/Ivy_Bridge_(microarchitecture)) - 自 2012 年以来）上实现了指令[`RDRAND`](https://en.wikipedia.org/wiki/RdRand)。它符合[NIST SP 800-90A 标准](https://en.wikipedia.org/wiki/NIST_SP_800-90A)。MASM32 SDK 中的 MASM 汇编器无法汇编该指令。一种解决方法是将指令作为一系列十六进制字节插入代码中。MASM 将按给定的方式存储它，处理器将根据需要执行它。

```
.686
.MODEL flat, STDCALL

INCLUDE kernel32.inc        ; GetStdHandle, WriteFile, ExitProcess
INCLUDELIB kernel32.lib

INCLUDE user32.inc          ; wsprintf
INCLUDELIB user32.lib

NumberOfNumbers = 30        ; Number of random numbers to be generated and shown
RangeOfNumbers = 12         ; Range of the random numbers (0..RangeOfNumbers-1)

.CONST
    err_text db "ERR: RDRAND not supported.",10,0

.CODE
main PROC
    mov eax, 01h                        ; Check for availability (EAX=1) -> ECX.30
    cpuid
    bt ecx, 30                          ; CPUID.01H:ECX.RDRAND[bit 30] = 1 ?
    jnc err_exit                        ; No (RDRAND not supported) -> err_exit

    mov ecx, NumberOfNumbers            ; Loop counter - generate and show ECX random numbers
    LL1:
    push ecx                            ; Preserve loop counter

    @@:
    db 0Fh, 0C7h, 0F0h                  ; rdrand eax
    jnc @B                              ; Invalid number - try again

    ; Adjust EAX to the range
    mov ecx, RangeOfNumbers             ; Range (0..RangeOfNumbers-1)
    xor edx, edx                        ; Needed for DIV
    div ecx                             ; EDX:EAX/ECX -> EAX remainder EDX
    mov eax, edx                        ; Get the remainder

    call write_number

    pop ecx                             ; Restore loop counter
    loop LL1

    invoke ExitProcess, 0               ; Returncode = 0

    err_exit:
    invoke GetStdHandle, -11            ; Get STD_OUTPUT_HANDLE
    push eax                            ; Place for WriteFile.NumberOfBytesWritten
    invoke WriteFile, eax, ADDR err_text, LENGTHOF err_text, esp, 0
    invoke ExitProcess, 1               ; Returncode = 1
main ENDP

write_number PROC STDCALL USES ebx                  ; printf ("%u ", EAX)
LOCAL numstring[20]:BYTE, NumberOfBytesWritten:DWORD
.CONST
    fmt db "%u ",0
.CODE
    invoke wsprintf, ADDR numstring, ADDR fmt, eax
    mov ebx, eax                        ; Preserve count of written bytes
    invoke GetStdHandle, -11            ; Get STD_OUTPUT_HANDLE
    mov edx, eax                        ; EAX will be used by the following INVOKE
    invoke WriteFile, edx, ADDR numstring, ebx, ADDR NumberOfBytesWritten, 0
    ret
write_number ENDP

END main 
```

“全新”是处理器指令`RDSEED`（至少是[Broadwell](https://en.wikipedia.org/wiki/Broadwell_(microarchitecture)) - 自 2014 年以来）。它符合 NIST SP 800-90B/C 标准。

```
.686
.MODEL flat, STDCALL

INCLUDE kernel32.inc        ; GetStdHandle, WriteFile, ExitProcess
INCLUDELIB kernel32.lib

INCLUDE user32.inc          ; wsprintf
INCLUDELIB user32.lib

NumberOfNumbers = 30        ; Number of random numbers to be generated and shown
RangeOfNumbers = 12         ; Range of the random numbers (0..RangeOfNumbers-1)

.CONST
    err_text db "ERR: RDSEED not supported.",10,0

.CODE
main PROC
    mov eax, 07h                        ; Check for availability (EAX=7, ECX=0) -> EBX.18
    xor ecx, ecx
    cpuid
    bt ebx, 18                          ; CPUID (EAX=07H, ECX=0H):EBX.RDSEED[bit 18] = 1 ?
    jnc err_exit                        ; No (RDSEED not supported) -> err_exit

    mov ecx, NumberOfNumbers            ; Loop counter - generate and show ECX random numbers
    LL1:
    push ecx                            ; Preserve loop counter

    @@:
    db 0Fh, 0C7h, 0F8h                  ; rdseed eax
    jnc @B                              ; Invalid number - try again

    ; Adjust EAX to the range
    mov ecx, RangeOfNumbers             ; Range (0..RangeOfNumbers-1)
    xor edx, edx                        ; Needed for DIV
    div ecx                             ; EDX:EAX/ECX -> EAX remainder EDX
    mov eax, edx                        ; Get the remainder

    call write_number

    pop ecx                             ; Restore loop counter
    loop LL1

    invoke ExitProcess, 0               ; Returncode = 0

    err_exit:
    invoke GetStdHandle, -11            ; Get STD_OUTPUT_HANDLE
    push eax                            ; Place for WriteFile.NumberOfBytesWritten
    invoke WriteFile, eax, ADDR err_text, LENGTHOF err_text, esp, 0
    invoke ExitProcess, 1               ; Returncode = 1
main ENDP

write_number PROC STDCALL USES ebx      ; printf ("%u ", EAX)
LOCAL numstring[20]:BYTE, NumberOfBytesWritten:DWORD
.CONST
    fmt db "%u ",0
.CODE
    invoke wsprintf, ADDR numstring, ADDR fmt, eax
    mov ebx, eax                        ; Preserve count of written bytes
    invoke GetStdHandle, -11            ; Get STD_OUTPUT_HANDLE
    mov edx, eax                        ; EAX will be used by the following INVOKE
    invoke WriteFile, edx, ADDR numstring, ebx, ADDR NumberOfBytesWritten, 0
    ret
write_number ENDP

END main 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:43:06.417

您需要实现一个[Pseudorandom number generator](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)，就像在这个答案中一样：

[汇编语言中的伪随机生成器](https://stackoverflow.com/questions/90184/pseudorandom-generator-in-assembly-language)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:35:00.840

如果你想在 Assembly 中获取随机数，我猜有两种方法：

*   如果允许您在 Assembly 中调用 C 函数，则可以使用 [rand()](http://www.cplusplus.com/reference/cstdlib/rand/)。
*   我们在大学使用了[NASM](http://www.drpaulcarter.com/pcasm/) ，NASM中有一个命令 ( [rdtsc](http://en.wikibooks.org/wiki/X86_Assembly/Other_Instructions#Misc_Instructions) ) 可以读取 CPU 时钟并将其放入寄存器中。你可以把这个数除以得到一个随机数。

我不了解 MASM，但 Paul Carter 的[NASM 教程](http://www.drpaulcarter.com/pcasm/)很棒。

# css - 水平对齐div

> ID：16170873
> 
> 赞同：-4
> 
> 时间：2013-04-23T13:40:24.777
> 
> 标签：css, wordpress, html, header

试图让它与我的网站一起使用，查看了一些也遇到此问题的人，但由于某种原因，我无法使其正常工作。这段代码正确吗？我应该开始在其他地方寻找问题，因为当我把它放在一个实际的表中时它可以工作。

通过这样做让它工作=

```
 .headerout
{    
  width 100%;
  text-align: center;
}

.headerin
{    
  display: inline-block;
} 
```

不告诉这些 div 水平对齐？

```
<div class="headerout">
<div class="headerin"><div class="phone" style="white-space: nowrap;"> Call Toll Free: 888-674-4044</div>
    <div class="phone" ><img src="http://www.mphclub.com/wp-content/uploads/2013/04/quote.png" width="40" height="23"></div>
   <div class="phone" ><img src="http://www.mphclub.com/wp-content/uploads/2013/04/reservation1.png" width="40" height="23"></div>
</div></div> 
```

不漂亮，但对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:43:39.737

第二个 div 中的图像的宽度设置为 100% ，因此 div 的宽度为 100% ，因此同一行上没有其他 div 的位置...

但无论如何，你的 HTML 有很多问题：你不应该放那样的样式，你不应该使用字体标签，等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:45:57.413

CSS真的没有意义。*边距：0 自动；*一个元素在另一个元素中水平居中，如果这是您想要实现的，它不会将其子元素居中。

此外 - 你的代码真的很糟糕。不要使用内联样式、字体标签和对齐参数。

# actionscript-3 - 更改动态对象的分层

> ID：16170884
> 
> 赞同：0
> 
> 时间：2013-04-23T13:41:09.460
> 
> 标签：actionscript-3, flash

我正在制作一个 Flash 游戏，并快速查询动态添加到舞台的对象的分层/顺序。我将鼠标光标替换为十字准线，敌舰在屏幕上飞行，但我遇到的问题是敌舰出现在十字准线上方，因此当我去“瞄准”一艘船时，十字准线不可见它在船底。我怎样才能改变这个？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:51:10.923

setChildIndex() - [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#setChildIndex%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#setChildIndex%28%29)

或者

swapChildren() - [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#swapChildren%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#swapChildren%28%29)

取决于你想做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:38:15.927

虽然公认的答案确实有效，但有时最好采用一种设计方法来解决问题并使其不那么令人头疼。

例如，您可以创建一个名为enemyLayer 的层：

```
var enemyLayer:Sprite = new Sprite; 
```

然后，您首先将您的敌人层添加到舞台上，然后是您的十字准线：

```
stage.addChild(enemyLayer);
stage.addChild(crosshair); 
```

每当您添加敌人时，您都会将其添加到enemyLayer 中：

```
enemyLayer.addChild(enemy); 
```

使用这样的设计方法，您无需担心不断操纵您的十字准线以确保它位于顶部。十字准线将始终位于顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:53:28.713

您可以使用方法添加每个宇宙飞船，`addChildAt(spaceship, 0);`其中零是索引，该索引应小于或等于十字准线的索引。您还可以为您的宇宙飞船创建单独的 Sprite。并在添加十字准线之前将其添加到舞台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T15:53:31.997

这可能对你有用。我在以下函数中添加了额外的代码行：

```
function sendEnemy(e:Event)
{
    var enemy = new EnemyShip();
    stage.addChild(enemy);
    stage.addChild(crosshair);//brings crosshair to topmost level on stage
}

function sendEnemyMed(e:Event)
{
    var enemymed = new EnemyShipMed();
    stage.addChild(enemymed);
    stage.addChild(crosshair);//brings crosshair to topmost level on stage
}

function sendEnemySmall(e:Event)
{
    var enemysmall = new EnemyShipSmall();
    stage.addChild(enemysmall);
    stage.addChild(crosshair);//brings crosshair to topmost level on stage
} 
```

在舞台上添加任何内容后，您只需要通过调用“stage.addChild(crosshair)”来更新十字准线的 z-index，这会将十字准线再次带到最顶层。

# css - Primefaces FileUpload - 简单的引导样式？

> ID：16170887
> 
> 赞同：6
> 
> 时间：2013-04-23T13:41:15.813
> 
> 标签：css, file-upload, primefaces, styling

我已经在我的 *.xhtml + PF 3.5 页面上实现了文件上传控制器：

```
 <div class="control-group">
        <h:form enctype="multipart/form-data">

            <p:messages showDetail="true" />

            <p:fileUpload value="#{fileUploadController.file}" mode="simple" />

            <p:commandButton value="Submit" ajax="false"
                actionListener="#{fileUploadController.upload}" />

        </h:form>
    </div> 
```

我没有在上传器上使用任何样式，但是，目前它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/ODL4h.png)

我想让它看起来像在 PF 页面上：

[文件上传器](http://www.primefaces.org/showcase/ui/fileUploadSimple.jsf)

我必须改变什么？真的很感谢你的回答！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T14:50:39.777

`<p:fileUpload mode="simple"/>`如果要自定义 filupload 按钮，我不建议使用。提供类似或其他的 css 属性`background-color`会产生奇怪的外观和感觉。

代替它，您可以使用 `<p:fileUpload mode="advance"/>`和修改它的任何内容，`.ui-fileupload .fileinput-button`类提供更改按钮的 css，`.fileupload-content`使操作内容的 css 变得容易。例如：

```
.fileupload-buttonbar {
    background: transparent none;
    border: none;
}

.fileupload-content {
    display: none;
}

.ui-fileupload .fileinput-button {
    background-color: rgba(142, 103, 64, 0.98);
} 
```

生成这样一个文件上传按钮：

![在此处输入图像描述](https://i.stack.imgur.com/WCApy.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-10T12:54:51.150

Ömer Faruk Almalı为找到此线程的谷歌同事更新了**primefaces 5的答案：**

```
.ui-fileupload-buttonbar {
    background: transparent none;
    border: none;
}

.ui-fileupload-content {
    display: none;
}

.ui-fileupload-buttonbar .ui-fileupload-choose {
    background-color: rgba(142, 103, 64, 0.98);
} 
```

# java - 将 JButton 作为单元格添加到 JTable

> ID：16170889
> 
> 赞同：-2
> 
> 时间：2013-04-23T13:41:17.327
> 
> 标签：java, swing, jtable, jbutton

我正在处理从数据库中获取数据的表单。现在我想`JButton`为每个获取的记录添加打开，即稍后的按钮将打开记录。但是我遇到了按钮未显示在表格中的问题。我想将按钮作为列添加到表中的每条记录中。提前致谢。

包添加面板；

```
import java.sql.*;
import javax.swing.*;
import javax.swing.table.*;

public class panelShowData extends JPanel 
{
    Connection connection = null;
    Statement statement = null;
    ResultSet resultSet = null;

    String url = "jdbc:mysql://localhost:3306/records";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "root";
    String password = "";

    JScrollPane scrollPane;
    JTable table;
    DefaultTableModel tableModel;

    String nameSearch="";

    public panelShowData()
    {

         this.setLayout(null);
         setVisible(true);
         setBounds(0, 200, 500, 450);
    }

    public void searchData( String nameSearch)
    {

         tableModel = new DefaultTableModel();

            try 
            {           
                Class.forName( driver ).newInstance(  );
                connection = DriverManager.getConnection( url, userName, password );

                statement = connection.createStatement( ResultSet.TYPE_SCROLL_SENSITIVE,
                                                        ResultSet.CONCUR_UPDATABLE );

                resultSet = statement.executeQuery( "select * from registration where firstname ='"
                                                        + nameSearch
                                                        + "'or lastname ='"
                                                        + nameSearch + "'" );
                System.out.println( "Query executed" );
                System.out.println( "nameSearch="+nameSearch );

                String firstName;
                String lastName;
                int id;

                //JButton add=new JButton("ADD");

                    while ( resultSet.next(  ) )
                    {                                                   
                        System.out.print( resultSet.getString( 2 ) + "\t" );
                        System.out.print( resultSet.getString( 4 ) + "\n" );

                        firstName = resultSet.getString( 2 );
                        lastName = resultSet.getString( 4 );
                        id = resultSet.getInt(1);

                        String[ ] columnName = { "Id","First Name", "Last Name","" };
                        Object[ ] data = { id, ""+firstName, "" + lastName, "add" };

                        System.out.println("Names is:"+firstName);
                        tableModel.setColumnIdentifiers( columnName );
                        tableModel.addRow( data );
                        tableModel.fireTableDataChanged();
                    }

                table = new JTable( tableModel );
                table.setEnabled(false);
                scrollPane = new JScrollPane( table );
                scrollPane.setBounds( 20, 20, 350, 100 );
                scrollPane.revalidate();
                scrollPane.repaint();

                add( scrollPane );
                connection.close(  );   
            }
            catch (Exception e)
            {
                e.printStackTrace();
                JOptionPane.showMessageDialog(  null, "Record Not Found",
                                                      "Sorry", JOptionPane.ERROR_MESSAGE );
            }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:12:18.627

看起来您正试图将`JButton`实例放入`TableModel`. 相反，您需要一个`TableCellEditor`, 在[此处](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)讨论。[*Table Button Column*](https://stackoverflow.com/a/5556631/230513)提供了很好的解释，这个[相关示例](https://stackoverflow.com/a/5559747/230513)可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-19T06:45:48.553

这对我有用。使用名称为“”的列并将其设置为 JButton。

制作您自己的表格模型，如下所示：

```
public class TableElementModel extends DefaultTableModel{

    String[ ] columnName = { "Id","First Name", "Last Name","" };
    @Override
        public int getColumnCount() {
            return columnName.size();
        }
        @Override
        public Class<?> getColumnClass(int columnIndex) {
            switch (columnIndex) {
                case 4:
                    return JButton.class;
                default:
                    return super.getColumnClass(columnIndex);
            }
        }
 } 
```

然后更改该列的渲染器

```
 Table.getColumn("").setCellRenderer((table, value, isSelected, hasFocus, row, column) -> {
    return (JButton)value;
    }); 
```

# java - 我的方法 loadLeague() NoSuchElementException

> ID：16170890
> 
> 赞同：0
> 
> 时间：2013-04-23T13:41:17.460
> 
> 标签：java, runtime-error

我是Java新手，所以提前感谢。我被要求编写一个名为 loadLeague() 的方法，该方法使用构造函数创建一个新的 League 对象，并用其详细信息包含在文本文件中的团队填充它。该方法应首先选择一个文件，然后读取文件的第一行并使用它创建一个 League 对象，该对象具有联赛名称和新对象的 teams 数组的正确大小。然后应该用新的 Team 对象填充团队引用的数组，并根据文件中的数据设置它们的实例变量我的方法编译但我得到 noSuchElementException。我的代码也没有填充数组。请任何人都可以帮助并指出正确的方向吗？谢谢

```
import ou.*;
import java.io.*;
import java.util.*;

/**  
* Class League - An instance of this class represents the teams in a
* football (or similar) league. It provides a class method for creating
* a new instance of League by reading the data for the teams from a CSV
* file.
* 
* @author 
* @version 1.0
 */

public class League
{
/* instance variables */
private String name;  // The name of the league
private Team[] teams; // An array to hold the teams in the league

/**
 * Constructor for objects of class League. It sets the name of the league
* to the String object provided as the first argument and initialises teams
* to an array of the size provided as the second argument. This constructor 
* is private as it is intended for use only by the class method loadLeague().
*/
private League(String aName, int size)
{
  super();
  this.name = aName;
  this.teams = new Team[size];
}

/* class method */
/**
 * This method creates a new League object by reading the required details from
 * a CSV file. The file must be organised as follows:
 *     name(String), number of teams (int)
 *     team name(String), won(int), drawn(int), lost(int), for(int), against(int)
 *        and so on for each team
 * Having created the new League object the method should create all the Team 
 * objects (using the data in the file to set their attributes) and add them 
 * to the teams array.
 */
public static League loadLeague()
{
  League theLeague = null;
  String pathname = OUFileChooser.getFilename();
  File aFile = new File(pathname);
  Scanner bufferedScanner = null;

  try
  {
     String leagueName;
     int numberOfTeams;

     String teamName;
     int won;
     int drawn;
     int lost;
     int goalsFor;
     int goalsAgainst;
     Scanner lineScanner;
     String currentLine;
     bufferedScanner = new Scanner(new BufferedReader(new FileReader(aFile)));

     while (bufferedScanner.hasNextLine())
     {
        currentLine = bufferedScanner.nextLine();
        lineScanner = new Scanner(currentLine);
        lineScanner.useDelimiter(",");

        leagueName = lineScanner.next();
        numberOfTeams = lineScanner.nextInt();

        theLeague = new League(leagueName,numberOfTeams);

        Team aTeam = new Team(lineScanner.next());
        aTeam.setWon(lineScanner.nextInt());
        aTeam.setDrawn(lineScanner.nextInt());
        aTeam.setLost(lineScanner.nextInt());
        aTeam.setGoalsFor(lineScanner.nextInt());
        aTeam.setGoalsAgainst(lineScanner.nextInt());

        Team[] teams = new Team[numberOfTeams];
        teams[numberOfTeams] = aTeam;
        numberOfTeams++;
     }

  }
  catch (Exception anException)
  {
     System.out.println("Error: " + anException);
  }
  finally
  {
     try
     {
        bufferedScanner.close();
     }
     catch (Exception anException)
     {
        System.out.println("Error: " + anException);
     }
  }
  return theLeague;
 }
 /* instance methods */
 /**
 * Displays the league table in tabular format to the standard output
 */
 public void display()
 {
  System.out.println(this.name);
  System.out.format("%20s %2s %2s %2s %2s %2s %2s %2s\n","","P","W","L","D","F","A","Pt");
  for (Team eachTeam : this.teams)
  {
     System.out.format("%20s %2d %2d %2d %2d %2d %2d %2d\n",
        eachTeam.getName(), eachTeam.getPlayed(), 
        eachTeam.getWon(), eachTeam.getDrawn(), 
        eachTeam.getLost(),eachTeam.getGoalsFor(), 
        eachTeam.getGoalsAgainst(), eachTeam.getPoints());        
  }
} 
```

要使用的文件：

```
Scottish League Division 1,10
Airdrie United ,3,2,11,14,25
Clyde          ,5,7,4,21,17
Dundee         ,7,2,7,21,18
Gretna         ,10,3,3,43,20
Hamilton Acas  ,7,5,4,19,20
Livingstone    ,6,6,4,21,15
Partick Thistle,8,4,4,25,29
Queen of South ,3,3,10,11,31
Ross County    ,4,4,8,14,24
St Johnstone   ,6,6,4,26,16 
```

Team 类的代码

```
 public class Team 
 {
  /* instance variables */
  private String name;
  private int won; // the number of games won
  private int drawn; // the number of games drawn
  private int lost; // the number of games lost
  private int goalsFor; // the number of goals scored by the team
  private int goalsAgainst; // the number of goals scored against the team   

 /**
 * Constructor for objects of class Team. It sets the name of the team
 * to that provided by the argument.
 */
 public Team(String aName)
 {
  super();
  this.name = aName;
 }      

 /* instance methods */

 /**
 * Set the number of games won
 */
 public void setWon(int aWon)
 {
  this.won = aWon;      
 }

 /**
 * Set the number of games drawn
 */  
 public void setDrawn(int aDrawn)
 {
  this.drawn = aDrawn;
 }

 /**
 * Set the number of games lost
 */
 public void setLost(int aLost)
 {
  this.lost = aLost;      
 }

 /**
 * Set the number of goals scored by the team
 */
 public void setGoalsFor(int aGoalsFor)
 {
  this.goalsFor = aGoalsFor;      
 }

 /**
 * Set the number of games scored against the team
 */
 public void setGoalsAgainst(int aGoalsAgainst)
 {
  this.goalsAgainst = aGoalsAgainst;      
 }

 /**
 * Return the name of the team
 */
 public String getName()
 {
  return this.name;
 }

 /**
 * Return the number of games won
 */
 public int getWon()
 {
  return this.won;
 }

 /**
 * Return the number of games drawn
 */
 public int getDrawn()
 {
  return this.drawn;
 }

 /**
 * Return the number of games lost
 */
 public int getLost()
 {
  return this.lost;
 }

 /**
 * Return the number of goals scored by the team
 */
 public int getGoalsFor()
 {
  return this.goalsFor;
 }

 /**
 * Return the number of goals scored against the team
 */
 public int getGoalsAgainst()
 {
  return this.goalsAgainst;
 }

 /**
 * Return the number of games played
 */
 public int getPlayed()
 {
  return this.getWon() + this.getDrawn() + this.getLost();
 }

 /**
 * Return the goal difference
 */
 public int getGoalDifference()
 {
  return this.getGoalsFor() - this.getGoalsAgainst();
 }

  /**
  * Return the number of points gained
  */
 public int getPoints()
 {
  return this.getWon() * 3 + this.getDrawn();
 } 
```

# url - 获取Requests_ids后如何从画布页面url获取（提取）values数据参数

> ID：16170891
> 
> 赞同：1
> 
> 时间：2013-04-23T13:41:18.843
> 
> 标签：url, facebook-javascript-sdk, facebook-canvas

我可以通过以下方式获取 Requests_ids 的值 `$requestid=$_GET['request_ids'];`。

但是我无法像以下方式一样获取传递给 url 的数据变量的值

```
FB.ui({method: 'apprequests',
        message: ms,
        max_recipients: 1,

        title: 'loveeeeeeeeee',
        new_style_message: true,           

        data: "Any value passed here" //I am passing few values to canvas page URL. 
    }, requestCallback); 
```

我怎样才能得到这个数据值？请帮助我或建议任何其他方法将变量传递给画布页面 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T22:00:29.870

在您的处理程序中，您必须像这样回调 facebook 图形 API：

```
https://graph.facebook.com/<request_id>?access_token=<app_token> 
```

该调用采用在 http 查询中传递的 request_id 之一，以及一个访问令牌。返回的 json 文档包含您为数据参数传递的值。

这个问题类似于[这里](https://stackoverflow.com/q/10310915/497357)的这个问题，我[在这里](https://stackoverflow.com/a/22416355/497357)用一些代码回答可能会有所帮助。

# c# - 在 C# 中实现具有“bars”子集的“foos”集

> ID：16170893
> 
> 赞同：3
> 
> 时间：2013-04-23T13:41:23.937
> 
> 标签：c#, oop, casting, object-oriented-analysis

我正在编写一个服务器来处理从客户端到主机的不同类型的消息。消息具有不同的内容和长度，并且将在前面有一个标识符，以标识消息的类型。一些消息（例如类型 A、B 和 C）应该只在机器之间转发。其他（例如 D、E 和 F 类型）需要来自服务器的特定操作：即。他们不只是转发。

（注意：两端的客户端需要区分 A、B 和 C，但服务器只需要知道转发这些消息。服务器和客户端都需要能够区分 D、E 和 F。 )

我试图找到的是一个很好的面向对象范式，用于表示消息是什么“类型”的概念。因此，为了澄清，假设服务器接收到标记为“B 型”的消息，它需要简单地将其转发给适当的客户端。但是，如果它收到标记为“F 型”的消息，它将采取不同的、具体的行动。那么我怎么能在我的代码中表示“类型”呢？

我想要实现的理想解决方案是这样的；和枚举“类型”，其中命令的某个子集属于“可转发”类型。显然这是不可能的，所以我想到了一个静态类 Forwardable，它继承自静态基类 Type。再次，不可能。接口是可能的，但我真的宁愿不必为了解释类型而实例化实例。

让服务器解析消息的最直接的方式是这样的：

```
byte[] payload = GetPayload((byte[])rawMessage);
Type message = GetMessageType((byte[])rawMessage);
if(message is Forwardable)
{
  ForwardMessage(payload);
}
else
{
  switch(message)
   case 1:
     //
     break;
   case 2:
     //
     break;
} 
```

最后，什么是表示一组类型的正确 OO 方式，其中这些类型的子集是子类型？

编辑：在某种程度上，我觉得这应该通过定义一个“类型”的静态类并定义另一个从“类型”继承的名为“Forwardable”的静态类来完成。然后我可以将我的服务器接收到的内容转换为“类型”并说 if(header is Forwardable)。但不幸的是，您不能从静态类继承。. .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:10:27.500

这是一个将事情包装起来的想法，以便您可以将它们传递给其他人。您可以定义一个 MessageType 来包装整个消息的加载和识别，PayloadType 来包装各种有效负载和子类 - ForwardMessage、ArchiveMessage - 来识别不同类型的有效负载。

*   Message 负责获取您的原始流输入，

*   PayloadType 负责加载其子类和公共
    字段，包括 MessageType

*   ForwardMessage、ArchiveMessage 负责任何业务逻辑，它们不必知道从流中加载自身的任何事情。为不同类型的有效负载实施更多这些。

使用示例代码：

```
Message msg = Message.FromStream(stream);
PayloadType payload = msg.GetPayload();
payload.Process(); 
```

这是示例代码：

```
public class Message{
      public int Prefix {get; private set;}
      public byte[] RawPayload {get;private set;}

      public PayloadType GetPayload(){
        PayloadType result = null;
        switch (Prefix){ // you can also convert that to enum and use "if" for more complicated identification
          case 1: 
            result = PayloadType.FromRaw<ForwardMessage>(RawPayload);
            break;
          case 2: 
            result = PayloadType.FromRaw<ArchiveMessage>(RawPayload);
            break;
          default:
            break;
        }
      }

      public static Message FromStream(Stream s){
        Prefix = ReadTwoBytes(s);
        RawPayload = ReadToEnd(s);
      }
    }

    public abstract class PayloadType{
      public abstract MessageType MessageType {get;} // enum goes better here
      public abstract Process();

      public static T FromRaw(byte[] raw) where T: PayloadType{
        // deserialize this as you wish
        // such as:
        using (MemoryStream s = new MemoryStream(raw)){
          XmlSerializer xser = new XmlSerializer(typeof(T));
          return xser.Deserialize(s) as T; 
        }
      }
    }

    public ForwardMessage : PayloadType{
      public override MessageType MessageType {return MessageType.Forward;}
      public override Process(){
          // send this message elsewhere
      }
    }

    public ArchiveMessage: PayloadType{
      public override MessageType MessageType {return MessageType.Archive;}
      public override Process(){
           // store this message somehow
      }
    }

    public enum MessageType{
        Unknown, Formward, Archive,
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:08:03.767

考虑到您的问题，我将执行以下操作：

*   对每条消息使用对象表示
*   使用诸如[责任链之](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)类的模式来根据消息的类型来处理消息。

这种架构的优点是您可以分离每种消息类型的处理逻辑。这允许您快速扩展它（添加新的消息处理程序或新的消息类型），而不会影响系统的其余部分。此外，您可以使用多态性来允许单个处理程序处理多种消息类型（在您的情况下为 ForwardHandler）。

这是一个简单的实现示例。

首先，消息类型：

```
public abstract class BaseMessage { ... } // base class inherited by every message
public abstract class ForwardableMessage : BaseMessage { ... } // base class for message that should only be forwarded
public class MessageOfTypeA : BaseMessage { ... } // a message of type A (which is not forwardable)
public class MessageOfTypeB : ForwardableMessage { ... } // a message of type B (which is forwardable)
public class MessageOfTypeC : ForwardableMessage { ... } // a message of type C (which is forwardable) 
```

（请注意，在这种情况下，使用可转发消息的接口可能会更灵活，我会对人们对此事的看法感兴趣）。

其次，定义您的处理程序：

```
public abstract class BaseMessageHandler {

    public abstract bool CanHandle(BaseMessage msgToHandle)
    public abstract void Handle(BaseMessage msgToHandle);

}

public class MessageForwarderHandler : BaseMessageHandler {

    public bool CanHandle(BaseMessage msgToHandle)
    {
        return msgToHandle is ForwardableMessage;
    }

    public void Handle(BaseMessage msgToHandle)
    {
        // do the forwarding logic here
    }

}

public class MessageOfTypeAHandler : BaseMessageHandler {

    public bool CanHandle(BaseMessage msgToHandle)
    {
        return msgToHandle is MessageOfTypeA;
    }

    public void Handle(BaseMessage msgToHandle)
    {
        // do the logic specific to messages of type A
    }

} 
```

最后，您必须实现一个维护不同处理程序列表的对象。

```
public static class MessageHandlersProvider
{
    IEnumerable<MessageHandler> handlers = new List<MessageHandler>()
    {
        new MessageOfTypeAHandler(),
        new MessageForwarderHandler()
    }

    public static void HandleMessage(BaseMessage msg)
    {
        foreach (MessageHandler handler in handlers)
        {
            if (handler.CanHandle(msg))
            {
                handler.Handle(msg);
                // you may stop once you have found a handler that can handle or you might consider that multiple handlers can be applied to the same message
            }
        }
    }
} 
```

这个解决方案确实需要为每条消息创建一个对象实例，但在我看来，它要优雅得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:28:41.623

```
public abstract class MsgType
{
  public bool IsForwardable { get; }
}

public class A : MsgType
{
  public override bool IsForwardable
  {
    get { return true; }
  }
}

public class F : MsgType
{
  public override bool IsForwardable
  {
    get { return false; }
  }
} 
```

或第二种解决方案：

```
public interface Forwardable
{ }

public class A : Forwardable
{ }

public class F
{ } 
```

或第三种解决方案

```
byte[] payload = GetPayload((byte[])rawMessage);
Type message = GetMessageType((byte[])rawMessage);
if(IsForwardable((byte[])rawMessage))
{
  ForwardMessage(payload);
}
else
{
  TakeAppropriateAction(message, payload);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:55:32.460

这行得通吗？

```
enum ActionType
{
    Forwardable, ....
}

class Message //could be abstract, then make classes A : Message, B: Message etc with appropriate fields
{
    private Byte[] payload;

    public ActionType CurrentActionType {get;private set;}

    public Message(byte[] rawmessage)
    {
        //parse message's header to determine ActionType
        //parse rest of message and save to payload or other variables in inherited classes
    }
}

Message msg = new Message((byte[])rawMessage);
switch(msg.CurrentActionType)
{
    case ActionType.Forwardable :
        ForwardMessage(msg); break;
    case...
    case...
} 
```

**编辑**：`ShouldForward`评论中讨论的功能：

```
private Boolean ShouldForward(Message msg)
{
    switch(msg.CurrentActionType)
    {
        case ActionType.A:
        case ActionType.B:
        case ActionType.C:
            return true;
        default:
            return false;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T17:03:01.987

如何为每种处理类型（转发、删除等）创建一个类，然后用自定义 .NET 属性装饰它们 + 实现已知接口

```
[MessageProcessor("TypeB")]
public class TypeBMessageProcessor : IMessageProcessor
{
  void IMessageProcessor.Process(byte[] message)
  {
     ....
  }
} 
```

然后，您可以在应用程序启动时扫描您的程序集，找到用您的自定义 MessageProcessorAttribute 修饰的类，然后将类型存储在由属性上的“TypeB”参数键入的字典中......由某种 MessageProcessorFactory 类持有。

然后，您可以在消息进入处理时创建该类型的实例。

```
var processor = MessageProcessorFactory.GetProcessor("TheTypeCodePrecedingTheData");
processor.Process(messageData); 
```

# php - 如何在 PHP 中匹配字符串模式，例如（第 1 卷，第 2 册，第 8 卷：）

> ID：16170894
> 
> 赞同：-1
> 
> 时间：2013-04-23T13:41:24.560
> 
> 标签：php, regex, preg-match

**字符串第 1 卷第 2 卷第 8 号**字符串的 preg_match() 函数中使用的正则表达式是什么：整数 1,2,8 将随着该字符串的多次出现而改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:46:09.587

```
/Volume (\d+), Book (\d+), Number (\d+)/ 
```

最大的好处是那些 () 将这些标记为您以后可以检索的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:03:56.227

就像正则表达式的替代品一样：

```
list($volume, $book, $number) = sscanf($string, "Volume %d, Book %d, Number %d"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:49:57.790

如果要将这些数字限制为一位数：`Volume \d, Book \d, Number \d:`

如果您想容纳更大的数字：`Volume \d+, Book \d+, Number \d+:`

发生了什么：`\d`是匹配任何单个数字的正则表达式代码。`+`表示前一个字符应该出现 1 次或多次。因此，`\d+`将匹配一位或多位数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:45:52.310

使用`[0-9]`正则表达式检查数字时使用。

如果您的数字介于 0 和 9 之间，请使用

```
preg_match("Volume [0-9], Book [0-9], Number [0-9]", $string) 
```

# python - 导入 BeautifulSoup 时出错 - 与 Python 版本冲突

> ID：16170902
> 
> 赞同：1
> 
> 时间：2013-04-23T13:41:38.267
> 
> 标签：python, beautifulsoup, pip, easy-install

我使用以下命令安装了 BeautifulSoup：

```
sudo easy_install BeautifulSoup4 
```

我收到消息：

```
Searching for BeautifulSoup4
Best match: beautifulsoup4 4.1.3
Processing beautifulsoup4-4.1.3-py2.6.egg
beautifulsoup4 4.1.3 is already the active version in easy-install.pth

Using /Library/Python/2.6/site-packages/beautifulsoup4-4.1.3-py2.6.egg
Processing dependencies for BeautifulSoup4
Finished processing dependencies for BeautifulSoup4 
```

我正在尝试导入 BeautifulSoup 库。

```
>>> from BeautifulSoup import BeautifulSoup
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named BeautifulSoup 
```

或者：

```
>>> from bs4 import BeautifulSoup
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named bs4 
```

我的 Python 版本是：

```
python --version
Python 2.7.3 
```

**编辑**

我明白那个：

```
Using /Library/Python/2.6/site-packages/beautifulsoup4-4.1.3-py2.6.egg 
```

可能意味着 Python 的版本之间存在冲突

我怎样才能注册这个模块？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:23:25.870

它应该是，

```
from bs4 import BeautifulSoup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:51:45.940

做这个：

*   `easy_install pip`
*   完成后，重新启动并输入`pip install beautifulsoup4`. 那应该行得通。

确保你将它作为一个带有 的模块`pip list`，如果你看到 Beautiful Soup 作为输出，那么是的，你让它工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T23:46:31.847

经过一番研究，我发现这解决了这个问题：

```
pip uninstall BeautifulSoup4 
```

将卸载位于：

```
/Library/Python/2.6/site-packages/ 
```

和：

```
easy_install-2.7 BeautifulSoup4 
```

将成功安装软件包：

```
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ 
```

我还检查了其他一些具有相同问题的软件包的过程并且它有效。

# r - R中使用lme的混合效果模型

> ID：16170903
> 
> 赞同：1
> 
> 时间：2013-04-23T13:41:38.700
> 
> 标签：r, nlme

我正在为一项关于鳟鱼生长的观察性研究分析数据。所以数据框中有很多 NA。此外，不同的处理具有不同数量的观察值。所以我认为这可以称为不平衡设计？

```
Year    Site    FishID  Size    Cover   AGE L1
2010    LT1 10_LT1 _ 11 Large   Heavy   2   5.88
2010    LT3 10_LT3 _ 14 Large   Heavy   2   5.228571429
2010    SO4 10_SO4 _ 8  Small   Open    0   NA
2010    SO5 10_SO5 _ 22 Small   Open    0   NA
2011    LT1 11_LT1 _ 14 Large   Heavy   1   6.44
2011    LT1 11_LT1 _ 15 Large   Heavy   1   6.25
2011    LT1 11_LT1 _ 16 Large   Heavy   1   6.421052632
2011    LT1 11_LT1 _ 18 Large   Heavy   1   7.74
2011    SO5 11_SO5 _ 6  Small   Open    1   7.7625
2011    SO5 11_SO5 _ 8  Small   Open    1   6.914285714
2011    SO5 11_SO5 _ 13 Small   Open    1   6.5
2011    SO5 11_SO5 _ 16 Small   Open    1   7.2
2011    ST1 11_ST1 _ 21 Small   Heavy   0   NA
2011    ST2 11_ST2 _ 10 Small   Heavy   0   NA
2011    ST2 11_ST2 _ 5  Small   Heavy   0   NA
2011    ST3 11_ST3 _ 20 Small   Heavy   0   NA
2011    ST4 11_ST4 _ 5  Small   Heavy   0   NA
2011    ST1 11_ST1 _ 9  Small   Heavy   1   7.521428571
2011    ST1 11_ST1 _ 17 Small   Heavy   1   8.169230769
2011    ST1 11_ST1 _ 20 Small   Heavy   1   7.03125 
```

我的固定效果是流大小：2 级流覆盖：2 级，年份：2 级和年龄：3 级。

我还随机选择了一堆站点来检查流大小和流覆盖效果。所以我认为网站被归类为随机效应？

`L1`是增长率的代表。

在这个阶段，我的最大模型如下所示：

```
m1=lme(L1~Year*Age*Size*Cover, random=~1|Site ,data=Trout_Growth,method="ML",na.action=na.exclude)

qqnorm(residuals(m1))
qqline(residuals(m1)) # Normality OK

plot(density(residuals(m1),na.rm=T))   ***## heteroscedasticity present (lme should handle this??) ##***

summary(m1)
anova(m1,test=T,type="marginal")    ***## marginal used because of unbalanced design?? ##*** 
```

我当然已经很好地查看了这个很棒的网站，但我仍然不确定包含随机因素网站的正确符号。（lme 和 lmer 似乎使用不同的符号。这是正确的吗？）

我想我在问这是否是完善我的模型的正确起点。我开始真正喜欢 R，但没有经常对 R 代码竖起大拇指，我很想回到舒适的基于 Windows 的统计软件。

任何意见或建议将不胜感激。

迪尔姆

# javascript - jQuery Galleryview 在鼠标移出时开始自动播放

> ID：16170904
> 
> 赞同：1
> 
> 时间：2013-04-23T13:41:40.223
> 
> 标签：javascript, jquery, galleryview

我目前正在使用 GalleryView 插件（[http://spaceforaname.com/galleryview/](http://spaceforaname.com/galleryview/)）开发一个网站。一切都很好，除了没有“鼠标悬停时开始自动播放”选项（相当于悬停时停止），所以我正在尝试自己实现一个。当我查看 javascript 代码时，我可以看到有一个“showNext”方法，我想在用户没有将鼠标悬停在图库上一段时间后调用它。这是我正在使用的代码的简短版本（不起作用）：

```
$j(function(){
 sliderr = $j('#productGallery').galleryView({
    transition_speed: 600,
    autoplay: false 
    }); 
```

});

```
$j('.gallery-wrapper').mouseout(function(){

    if (timer == null) {
       timer = setInterval( function(){
          if (counter > 5000) {
             sliderr.galleryView("showNext");
             counter = 0;
          } else
             counter += 1000;
       }, 1000);
    } 
}); 
```

有人知道这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:15:10.257

通过查看他们的演示，我怀疑有更好的方法来做到这一点。在演示中，它们有一个暂停/播放按钮，可以使用它们的`startSlideshow()`和`stopSlideShow()`功能。我怀疑您会想要使用该功能，因此您会想要使用`setTimeout()`call 而不是`setInterval()`. 像这样的东西：

```
$j('.gallery-wrapper').mouseout(function(){
    timer = setTimeout( function(){
          //note: I'm not sure this is a function of the galleryView object
          //      it might be off of another part of the overall structure
          //      like sliderr.startSlideshow() or something.
          sliderr.galleryView.startSlideshow(); 
    }, 5000); 
}); 
```

你可能需要一个对应`mouseover`的来清除超时：

```
$j('.gallery-wrapper').mouseover(function(){
    clearTimeout(timer);
}); 
```

# jquery - struts2-Jquery 的本地化

> ID：16170907
> 
> 赞同：1
> 
> 时间：2013-04-23T13:41:41.947
> 
> 标签：jquery, jakarta-ee, struts2-jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T22:02:23.030

这是为了指定 jquery 插件使用的默认语言环境。

为此，您需要`ar`在 struts.xml 中配置属性文件

```
<constant name="struts.custom.i18n.resources" value="global"/> 
```

然后你必须有一个`global_ar.properties`在类路径中命名的文件才能工作。

# c# - 在 ForEach 循环中删除 Azure 表实体的最佳实践

> ID：16170915
> 
> 赞同：5
> 
> 时间：2013-04-23T13:42:12.763
> 
> 标签：c#, azure-table-storage

当删除发生在“foreach”循环中时，删除 Azure 表中的实体时，我没有得到一致的结果。PartitionKey 是唯一的。

是否有人们可以推荐的最佳实践？

为简洁起见，我省略了 Try..Catch 语句。

假设：

```
var context = new FooContext(_storageAccount);

        var query = (from e in context.TableBar
                                where e.RowKey == rowKey
                                select e).AsTableServiceQuery(); 
```

方法#1

```
 foreach (var entity in query.Execute())
            {
                    // delete each entity
                    context.DeleteObject(entity);
                    context.SaveChanges();
            } 
```

方法#2

```
 foreach (var entity in query.Execute())
            {
                    // delete each entity
                    context.DeleteObject(entity);
            }
            context.SaveChanges(); 
```

方法#3

```
 var bars = query.Execute();
            foreach (var bar in bars)
                context.DeleteObject(bar);
            context.SaveChanges(); 
```

方法 #1 似乎删除了大多数实体，但通常最后一个实体不会删除。这是一个有效的实体。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-23T15:56:20.810

如果您已经知道实体的 PartitionKey 和 RowKey，则不必先加载它。最快的方法是直接使用 CloudTable 和这样的[DynamicTableEntity](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.table.dynamictableentity.aspx)：

```
var cloudTable = cloudTableClient.GetTableReference("TheTable");

var entity = new DynamicTableEntity(partitionKey, rowKey) { ETag = "*" };

cloudTable.Execute(TableOperation.Delete(entity)); 
```

如果要删除不知道 RowKeys 的实体集合，则需要先加载实体并使用[批处理操作](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/#header-8)来删除实体。此外，您不需要加载实体的所有属性，我们只需要知道 RowKey，这样我们就可以再次使用与上述相同的技术。为此，我们使用[投影查询](http://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-how-to-use-tables/#query-a-subset-of-entity-properties)

```
var batchOperation = new TableBatchOperation();

// We need to pass at least one property to project or else 
// all properties will be fetch in the operation
var projectionQuery = new TableQuery<DynamicTableEntity>()
    .Where(TableQuery.GenerateFilterCondition("PartitionKey", 
        QueryComparisons.Equal, "ThePartitionKey"))
    .Select(new string[] { "RowKey" });

foreach (var e in table.ExecuteQuery(projectionQuery))
    batchOperation.Delete(e);

table.ExecuteBatch(batchOperation); 
```

**提醒一句**：*批处理操作*最多允许批处理中的 100 个实体，它们必须共享相同的 PartitionKey，因此您可能需要将实体拆分为适当的批处理才能工作。

# c# - 我不知道如何导航到上一页

> ID：16170917
> 
> 赞同：0
> 
> 时间：2013-04-23T13:42:25.190
> 
> 标签：c#, asp.net-mvc, navigationcontroller

我有两种方法可以导航到我正在使用的表单。但是，一旦提交了此表单，我想返回到上一页。是否有特定的 url 路径可以根据我之前所在的页面导航到？

我只使用标准形式和 mvc 架构。

这是我的这个表单的控制器：

```
 [HttpPost]
    public ActionResult Create(CreateConversationViewModel model)
    {
        try
        {
            _ConversationManager.Create(model.Message, model.GetReceivers(), model.SenderId);
            return RedirectToAction("Me", "People");
        }
        catch (ValidationException ex)
        {
            ex.AddToModelState(ViewData.ModelState);
        }

        return View(model);
    } 
```

当我返回到 People/Me 页面时，它只会重定向到其中一个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:39:12.143

您可以使用[Request.UrlReferrer](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)属性。请注意，in 很容易被欺骗。最好的方法是将前一个页面存储在当前用户的会话中，或者您可以在 ViewModel 中隐藏前一个 URL，如此[处](https://stackoverflow.com/questions/9772947/asp-net-mvc-return-to-previous-page)所述。

我希望这会有所帮助，祝你好运！

# cakephp - 查找前两篇文章

> ID：16170918
> 
> 赞同：-2
> 
> 时间：2013-04-23T13:42:26.037
> 
> 标签：cakephp

我需要找到之前的两篇文章。可以说，我从数据库中获得了一篇文章：

```
 Array
(
    [0] => Array
        (
            [Pressroom] => Array
                (
                    [id] => 44
                    [created] => 2013-04-17 07:38:20
                    [date] => 2013-04-17
                    [modified] => 2013-04-23 07:58:25
                )

        ) 
```

而且我还需要找到两个 previos 记录（假设 id 为 43 和 42）。有什么建议吗？我完全不知道。

我尝试在我的模型中使用此代码：

```
$this->find('all',
            array(
                'order' => array(
                    'Pressroom.date' => 'DESC',
                    'Pressroom.created' => 'DESC'
                ),
                'limit' => 2,
                'conditions' => array('Pressroom.date <' => $data['Pressroom']['date']))); 
```

但它会找到 id 为 1 和 2 的两条记录，而不是 43 和 42

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:52:56.807

你的问题有点不清楚，但这样的工作吗？

```
$articles = $this->Pressroom->find('all', array(
    'conditions' => array('id <=' => 44),
    'order' => array('id' => 'desc'),
    'limit' => 3
)); 
```

# javascript - 使用 javascript 检查表单字段的值

> ID：16170924
> 
> 赞同：2
> 
> 时间：2013-04-23T13:42:47.550
> 
> 标签：javascript, html, web

我想检查表单的值是否为空？在像 jquery.ketchup.0.3.2 这样的许多验证器让我失败（或者我让他们失败）之后，我正在尝试编写自己的验证器，但我无法让这个功能正常工作。

```
function validate() {
    alert("hmmm");
    var inputs = document.forms["register"].getElementsByTagName("input");
    for (var item in inputs) {
        if(item.value.trim() == "")
            alert("nullField");
    }
} 
```

你能告诉我上面的功能有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:44:43.907

如果您要使用 jQuery，请*使用 jQuery*。

```
validate(){
  var $inputs = $('input', 'form[name="register"]');
  $inputs.each(function(){
    var val = $.trim(this.value);
    if(!val.length){
       // Not valid
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T13:44:54.317

我想知道这是否是`for`您使用的循环。要遍历集合（数组），请使用普通`for`循环，而不是`for in`. 也许这可以解决它：

```
function validate() {
    alert("hmmm");
    var inputs = document.forms["register"].getElementsByTagName("input");
    for (var i = 0; i < inputs.length; i++) {
        if(inputs[i].value.trim() == "")
            alert("nullField");
    }
} 
```

请注意，`.trim()`并非在所有浏览器中都可用：http: [//kangax.github.io/es5-compat-table/#String.prototype.trim](http://kangax.github.io/es5-compat-table/#String.prototype.trim)

一个 jQuery 替代方案，可能是首选，是使用类似的东西：

```
$('form[name="register"]').find('input[type="text"]').each(function () {
    var $this = $(this);
    if (!$.trim($this.val())) {
        // Left empty
    }
}); 
```

参考：

*   `.find()`：[http ://api.jquery.com/find/](http://api.jquery.com/find/)
*   `.each()`：[http ://api.jquery.com/each/](http://api.jquery.com/each/)
*   `.trim()`：[http ://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:57:28.743

如果您只想使用 javascript：

首先确保定义了修剪功能：

```
if(!String.prototype.trim) {
  String.prototype.trim = function () {
    return this.replace(/^\s+|\s+$/g,'');
  };
} 
```

现在为实际功能：

```
 function validate() {
    var inputs = document.forms["register"].getElementsByTagName("input");
    for (var i = 0, len = inputs.length; i < len ; i++) {
        if(inputs[ i ].value.trim() == ""){
            // Validation failed
        }
    }
    // Validation successful
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-23T13:58:50.683

我强烈（我的意思是强烈）建议不要编写自己的验证。尽管如此，您的代码仍有一些问题。

1.  for..var..in 构造遍历对象的所有属性。所以一个对象`foo = { bar: '0', baz: '1'}`会遍历`bar`和`baz`（属性，而不是值）。如果你想得到你需要通过做来表示的值 `for(var i in foo){ console.log(foo[i]);}`，或者在你的例子中：`inputs[item].value`。
2.  `getElementsByTagName`返回 a `NodeList`（请参见此处[）](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)。`NodeList`s 在列表中的元素旁边有其他属性。

如果您使用的是 jQuery，那么您只需`$("#register input").val()`获取相关值的数组，您就可以使用该`$.map`函数为每个值做一些事情。

# c# - 如何将 ID 分配给中继器中的复选框？

> ID：16170927
> 
> 赞同：1
> 
> 时间：2013-04-23T13:42:57.990
> 
> 标签：c#, checkbox, user-controls, webforms, repeater

我在中继器上有这些复选框：

```
<asp:Repeater id="repeaterCategories" runat="server">
    <ItemTemplate>
        ...

        <asp:CheckBox ID="chbCategoria" Text="My Label" runat="server" />

        ...
    </ItemTemplate>
</asp:Repeater> 
```

每个复选框都必须与从数据库中获取的页面 ID 一致（每个 repeaterCategories 项都有其唯一的 ID，因此只有一个）。

我该如何设置？因此，在回发时，我检查了哪些 CheckBox 控件被选中并获得了 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:59:28.970

你能尝试像这样添加自定义属性吗

```
protected void repeaterCategories_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        CheckBox chk = e.Item.FindControl("chbCategoria") as CheckBox ;
        chk.Attributes.Add("PageID", DataBinder.Eval(e.Item.DataItem, "DB_FIELD").ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:49:29.057

用户控制页面：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="WebUserControl.ascx.cs" Inherits="WebUserControl" %>
<asp:CheckBox id ="MyCheckBox" runat="server"/> 
```

后面的代码：

```
using System;

public partial class WebUserControl : System.Web.UI.UserControl
{
    private string _myProperty;
    public string MyProperty 
    {
        get { return this._myProperty; }
        set { this._myProperty = value; }
    }

    public bool IsChecked
    {
        get 
        {
            return this.MyCheckBox.Checked;
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

在您的转发器页面：

```
<%@ Register Src="~/WebUserControl.ascx" TagPrefix="uc1" TagName="WebUserControl" %> 
```

中继器内部：

```
<asp:Repeater id="repeaterCategories" runat="server">
    <ItemTemplate>
        ...

        <uc1:WebUserControl runat="server" ID="WebUserControl" MyProperty="My_ID_Value" />

        ...
    </ItemTemplate>
</asp:Repeater> 
```

您可以在 Web 用户控件上添加任意数量的属性。

# php - 需要创建一个可打印的表格来组织由 JavaScript 函数处理的结果

> ID：16170930
> 
> 赞同：0
> 
> 时间：2013-04-23T13:43:10.760
> 
> 标签：php, javascript, html, printing

我使用 HTML 和 JavaScript 编写了一个程序，用于计算金属屋顶公司网站的推拉门价格。当用户输入高度和宽度等值时，这些数字会通过脚本运行，并输出价格和所需工具数量等结果。我想创建一个页面来整齐地显示这些结果并且可以由用户打印。我尝试过使用 PHP，但事实证明这很困难。使这项工作最简单的方法是什么？

```
<tr>
 <td>Track</td>
 <td>' .$trackResult. '&acute;<br />' .$trackResultOne. '&acute;<br />' .$trackResultTwo. '&acute;</td>
</tr> 
```

这是我遇到麻烦的地方，这个表正在一个 PHP 页面中回显。有时 $trackResultOne 和 Two 没有值，我不希望它们回显。现在表格只是这样显示......

轨道 - 1 - 10' <

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:10:16.807

```
 <tr>
     <td>Track</td>
     <td>' .$trackResult. '&acute';

    if ($trackResultOne != NULL) {

    <br /> .$trackResultOne. '&acute;'

    }

if ($trackResultOne != NULL) {

    <br />.$trackResultTwo. '&acute;'

    }

    </td>
    </tr> 
```

我猜是这样的。检查值是否不为 NULL，然后打印

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:10:23.213

如果我说得对，您想在另一个页面上回显用户输入。这很容易使用表单和 PHP 完成。

表单.html

```
<html>
<body>
<form name="formname" action="script.php" method="post">
<input type="text" name="trackResult" /><br/>
<input type="text" name="trackResultOne" /><br/>
<input type="text" name="trackResultTwo" /><br/>
.
.
.
<input type="submit" value="Submit" />
</form>
</body>
</html> 
```

脚本.php

```
<?php
$trackResult = $_POST['trackResult'];
$trackResultOne = $_POST['trackResultOne'];
$trackResultTwo = $_POST['trackResultTwo'];
.
.
.
?>
<html>
<body>
<table>
<tr>
<td>Track</td>
<td><?php echo $trackResult."&acute;<br/>";
    if($trackResultOne != NULL){ echo $trackResultOne."&acute;<br/>";
    if($trackResultTwo != NULL){ echo $trackResultTwo."&acute;";
    ?>
</td>
</tr>
</table>
</body>
</html> 
```

如果您在`input`HTML 中添加更多字段，请确保在 PHP 中为这些字段设置变量。

# vb.net - 在 LINQ 查询中调用用户定义的函数

> ID：16170931
> 
> 赞同：1
> 
> 时间：2013-04-23T13:43:16.380
> 
> 标签：vb.net, linq

我已经在网上看到了一些关于此的页面，但不幸的是示例代码是 C# 中的。我无法理解其中的大部分内容（和/或通过代码翻译器运行它），但我仍然需要帮助使其在 VB 中工作。

我的自定义功能是：

```
Public Shared Function GetFriendlyTitle(Title As String) As String
    Dim ConvertedTitle As String = ""
    Try
        Dim oRE As Regex = New Regex("[^a-zA-Z0-9\s]")
        ConvertedTitle = Trim(oRE.Replace(Title, "")).Replace(" ", "_")
    Catch ex As Exception
        LogError(ex)
    End Try
    Return ConvertedTitle
End Function 
```

这是我调用返回产品的函数：

```
Public Shared Function GetProductByTypeAndTitle(URLFriendlyTitle As String, ProductType As ProductType)
    Try
        'don't know why, but the server threw errors if I went c.Type=Type
        Dim pt As Integer = CInt([Enum].Parse(GetType(ProductType), [Enum].GetName(GetType(ProductType), ProductType)))

        Dim context As LionsSharePressEntities = New LionsSharePressModel.LionsSharePressEntities
        return From p In context.Products Where GetFriendlyTitle(p.Title) = URLFriendlyTitle AndAlso p.Type = pt
    Catch ex As Exception
        LogError(ex)
        Return nothing
    End Try
End Function 
```

它编译得很好，但是当我运行它时挂起。正是这条返回线做到了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:57:32.640

尝试添加[Select](http://msdn.microsoft.com/en-us/vstudio/bb737914#selsimp1)语句：

```
return From p In context.Products 
           Where GetFriendlyTitle(p.Title) = URLFriendlyTitle 
           AndAlso p.Type = pt 
           Select p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T21:55:28.550

这个问题有点老了，似乎已经解决了。但我仍然发布此消息，希望它可能会帮助某人解决对我有用的替代解决方案。

另请注意，我无法在我的 LINQ 查询“共享”中调用我的函数，这使我的情况略有不同。我认为更有理由发布替代答案。

```
Public Function GetFriendlyTitle(Title As String) As String
    Dim ConvertedTitle As String = ""
    Try
        Dim oRE As Regex = New Regex("[^a-zA-Z0-9\s]")
        ConvertedTitle = Trim(oRE.Replace(Title, "")).Replace(" ", "_")
    Catch ex As Exception
        LogError(ex)
    End Try
    Return ConvertedTitle
End Function 
```

当我遇到从 LINQ 查询中调用非共享用户定义函数的问题时，这就是我使用 OPs 代码片段作为示例解决它的方法。

```
Public Shared Function GetProductByTypeAndTitle(URLFriendlyTitle As String, _
                                                ProductType As ProductType)
    Try
        'don't know why, but the server threw errors if I went c.Type=Type
        Dim pt As Integer = _
                CInt([Enum].Parse(GetType(ProductType), _ 
                     [Enum].GetName(GetType(ProductType), ProductType)))
        Dim context As New LionsSharePressModel.LionsSharePressEntities

        '// Here is the lambda that will call your GetFriendlyTitle function
        Dim callUserFunc As Func(Of String, String) = _
                Function(title As String)
                    Return GetFriendlyTitle(title)
                End Function

        '// Now call Invoke on the lambda and pass in the needed param(s) from within your LINQ query
        return From p In context.Products _
               Where callUserFunc.Invoke(p.Title) = URLFriendlyTitle AndAlso p.Type = pt

        '//return From p In context.Products Where GetFriendlyTitle(p.Title) = URLFriendlyTitle AndAlso p.Type = pt

    Catch ex As Exception

        LogError(ex)
        Return nothing

    End Try
End Function 
```

# xsl-fo - 如何在 XSL-FO 中创建书签？

> ID：16170937
> 
> 赞同：1
> 
> 时间：2013-04-23T13:43:34.043
> 
> 标签：xsl-fo

我有带章节的 XML，一章内可以有任意数量的章节。如何为其创建书签。：

```
 1\. Chapter 1
       1.1 chapter 1.1
         1.1.1 Chapter 1.1.1
       1.2 Chapter 1.2

      2.Chapter 2
        2.1 Chapter 2.1
        2.2 Chapter 2.2 
```

我尝试使用：

```
<fo:bookmark-tree>
    <fo:bookmark
        internal-destination="toc">
        <fo:bookmark-title>  
         Table Of Contents
        </fo:bookmark-title>
        <fo:bookmark
           internal-destination="CHAPTER/LONG-NAME"
           starting-state="show">
           <fo:bookmark-title>
           <xsl:for-each select="//CHAPTER">
            <xsl:number format="1\. " count="CHAPTER" level=""multiple/>
           <xsl:value-of select="LONG-NAME"/>
           </xsl:for-each>
        <xsl:apply-templates
            select="CHAPTER/LONG-NAME"/>
            </fo:bookmark-title>`
            </fo:bookmark>
    </fo:bookmark>
    </fo:bookmark-tree> 
```

但我能够实现两个子书签：一个以目录为标题，第二个以“所有章节的长名称”为标题。

如何为每一章重复 fo:bookmark 标签？

# symfony - Symfony2，克隆 EntityManager 或如何创建它的新实例

> ID：16170941
> 
> 赞同：1
> 
> 时间：2013-04-23T13:43:58.200
> 
> 标签：symfony, entitymanager

当然我们可以这样做：

```
public function __construct (EntityManager $em)
{
    $this->em = $em;
} 
```

并使用我们想要的 EntityManager 。但是...我需要在自定义类\服务中创建独立的 EntityManager，我们可以通过这种方式获得它

```
public function __construct (EntityManager $em)
{
    $this->em = clone $em;
} 
```

但这不是一个好的选择，因为在此调用将“复制”到 $this->em 之前，所有数据都已输入\添加\调用，我们不想要它......

所以问题是，如何在 class\service 中创建独立的 EntityManager 而不是通过参数（在 services.yml 中）？

我需要这样的东西：

```
public function __construct()
{
    $this->em = new EntityManager()
} 
```

**更新：**

所以我找到了我需要的解决方案。但是我如何将它应用于 EntityManager 或其他“内置”服务？

[http://symfony.com/doc/current/cookbook/service_container/scopes.html](http://symfony.com/doc/current/cookbook/service_container/scopes.html)

# java - ThreadFactory 和 newThread(Runnable r) 如果是 Thread，如何访问 r 的属性？

> ID：16170947
> 
> 赞同：1
> 
> 时间：2013-04-23T13:44:11.790
> 
> 标签：java, multithreading, casting, runnable, executorservice

对于我的论文，我正在研究离散事件系统模拟器。模拟包含一组，`SimulatorThread extends Thread`其动作在于`Event`将 s 调度到`Simulator`. 每一个都通过 与`SimulatorThread`交互。`Simulator``SimulatorInterface`

```
public abstract class SimulatorThread extends Thread {
    private SimulatorInterface si;

    public SimulatorThread(SimulatorInterface si) {
        this.si = si;
    }
    ...
}

public final class Simulator {
    private ExecutorService exec;
    ...

    public void assignThread(SimulatorThread... stList) {
        ...
    }
} 
```

在模拟开始之前，每个都`SimulatorThread`被分配给`Simulator`，然后`Simulator`将通过 执行每个线程`exec.execute(simulatorThread)`。我的问题是，在代码的某些部分中，我需要获取对当前正在运行的引用`SimulatorThread`，但是该指令`(SimulatorThread) Thread.currentThread()`给出了强制转换执行。事实上的输出`System.out.print(Thread.currentThread().getClass())`是`class java.lang.Thread`，但我希望输出是`class SimulatorThread`可以通过使用指令`simulatorThread.start()`而不是使用执行程序运行线程来获得的。所以我认为问题在于编写*一个* `ThreadFactory`返回`SimulatorThread`.

事实上，我尝试使用琐碎的`SimulatorThreadFactory extends ThreadFactory`：

```
public class SimulatorThreadFactory implements ThreadFactory {

    @Override
    public Thread newThread(Runnable r) {
        return new SimulatorThread(new SimulatorInterface());
    }
} 
```

有了这个，我获得了前面引用的输出“类 SimulatorThread”。问题是当我调用'exec.execute（simulatorThread）'时，参数有一个我需要访问的属性'SimulatorInterface'，但我不能因为方法'newThread'的参数是'Runnable '。我在这里公开了一个错误的代码，我希望它比我用文字解释的方式更好地表达了我的意思：

```
public class SimulatorThreadFactory implements ThreadFactory {

    @Override
    public Thread newThread(Runnable r) {
        SimulatorInterface si = r.getSimulatorInterface(); // this is what
                                                           // I would like
                                                           // the thread factory
                                                           // to do
        return new SimulatorThread(si);
    }
} 
```

那么，如果它的参数是 a ，我如何访问方法内的“SimulatorThread”的属性“SimulatorInterface”`newThread`以创建a ？`SimulatorThread``Runnable`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:49:25.553

如果我了解您的需求，那么正确的做法是*不*扩展`Thread`而是实施`Runnable`. 然后可以享受您自己的类层次结构的所有好处：

```
public abstract class SimulatorRunnable extends Runnable {
     protected SimulatorInterface si;
     public SimulatorRunnable(SimulatorInterface si) {
         this.si = si;
     }
}

public final class Simulator extends SimulatorRunnable {
     public Simulator(SimulatorInterface si) {
         super(si);
     }
     public void run() {
         // here you can use the si
         si.simulate(...);
     }
} 
```

然后你将你的模拟器提交到你的线程池：

```
 Simulator simulator = new Simulator(si);
 ...
 exec.submit(simulator); 
```

> 我的问题是，在代码的某些部分中，我需要获取对当前正在运行的 SimulatorThread 的引用，但是指令 (SimulatorThread) Thread.currentThread() 给出了强制转换执行

您不应该将 a 传递`Thread`给`ExecutorService`. 它只是将它用作`Runnable`（因为`Thread`implements `Runnable`）并且线程池启动它自己的线程并且永远不会调用`start()`你的`SimulatorThread`. 如果您正在扩展，`Thread`那么您需要`thread.start()`直接调用而*不是*将其提交给`ExecutorService`. 上面的`implements Runnable`with an模式`ExecutorService`更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:23:55.537

@Gray's answer is correct, pointing out that the ExecutorService is designed to use its own threads to execute your Runnables, and sometimes created threads will even be reused to run different Runnables.

Trying to get information from `(SimulatorThread) Thread.currentThread()` smells like a 'global variable' anti-pattern. Better to pass the 'si' variable along in method calls.

If you really want global variables that are thread-safe, use ThreadLocals:

```
public final class Simulator extends SimulatorRunnable {
    public static final ThreadLocal<SimulatorInterface> currentSim = new ThreadLocal<>();
    public Simulator(SimulatorInterface si) {
     super(si);
    }
    public void run() {
       currentSim.set(si)
       try{
          doStuff();
       }
       finally{
           currentSim.unset();     
       }
   }
   private void doStuff()
   {
      SimulatorInterface si = Simulator.currentSim.get();
      //.... 
   }
 } 
```

# python - 全局名称错误

> ID：16170948
> 
> 赞同：0
> 
> 时间：2013-04-23T13:44:12.370
> 
> 标签：python, variables, global-variables, ttk

我对 Python 还是很陌生，所以如果我的问题是微不足道的甚至是愚蠢的，我很抱歉。我正在尝试构建一个对 Button 回调（不在代码中）做出反应的小模块。回调在 main() 函数中模拟。现在我的问题是我无法弄清楚如何摆脱全局名称错误。它说drink0_ingred 没有定义为全局名称。我需要它作为名为 self.l0 的标签的文本。这是我到目前为止所拥有的：

```
import tkinter
from tkinter import ttk

def main():
    root = tkinter.Tk()
    callback = callbackkb0()
    drink0 = Drink0(root)
    root.mainloop()

def callbackkb0():
    with open(file="drink0_ingred.txt") as ingred0:
        drink0_ingred = ingred0.read()
    print(drink0_ingred)
    return drink0_ingred

class Drink0(ttk.Frame):
    def __init__(self, root):
        ttk.Frame.__init__(self, root)
        self.grid()
        self.widgets_create()

    def widgets_create(self):
        self.l0 = ttk.Label(self, text=drink0_ingred)
        self.l0.grid()

main() 
```

如何将drink0_ingred 定义为全局名称并使其可用于其他功能？谢谢你帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:47:34.660

你可以做两件事：

全球化`drink0_ingred`：

```
with open(file="drink0_ingred.txt") as ingred0:
    global drink0_ingred
    drink0_ingred = ingred0.read() 
```

调用函数而不是调用变量：

```
self.l0 = ttk.Label(self, text=callbackkb0()) # Notice how I called the function 
                                              # because it returned drink0_ingred 
```

# asp.net - fileupload not working on window.showModalDialog

> ID：16170951
> 
> 赞同：1
> 
> 时间：2013-04-23T13:44:14.580
> 
> 标签：asp.net, file-upload, modal-dialog

I am looking to open a aspx page to act an an image uploader.. this is the code I use to open the page:

```
$("#btnUpload").on("click", function (s) {
    s.preventDefault();
    var id = $('#hdnId').val();
    var response = window.showModalDialog("/imageUpload.aspx/", id);
    alert(response);
}); 
```

the page opens fine and looks like this:

```
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <label>Choose New Image:</label>
            <br/>

            <asp:FileUpload ID="imageUploader" runat="server"></asp:FileUpload>

            <asp:Button id="UploadButton" OnClick="UploadButton_Click" Text="Upload file" runat="server"></asp:Button>     
        </div>
    </form>
</body>
</html> 
```

The fileupload renders ok on the page - but the choose file button doesn't work at all! ive watched in chrome & there are no jquery errors on page load or on click of the choose file button.

I've done a bit of googling and found that ajax and update panels are dodge with the fileuploader - But i'm not using either :-/

anyone know whats occurring here?? many thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T09:05:46.737

我在 Chrome 模态对话框中遇到了同样的问题。这是一个 Chrome v26 问题。您可以查看以下 url 以了解 chrome 错误跟踪器的详细信息。

[https://code.google.com/p/chromium/issues/detail?id=225365](https://code.google.com/p/chromium/issues/detail?id=225365)

然而，他们已经修复了该缺陷，但据他们称，将修复包含到发布中需要长达 6 周的时间。您可以获取 Chrome 金丝雀版本进行验证。

[https://www.google.com/intl/en/chrome/browser/canary.html](https://www.google.com/intl/en/chrome/browser/canary.html)

# eclipse-plugin - terminate button in console of my eclipse plugin

> ID：16170957
> 
> 赞同：3
> 
> 时间：2013-04-23T13:44:33.573
> 
> 标签：eclipse-plugin

I have developed an eclipse plugin in xtext and I need to write some messages in console. To do that, I have seen this site [http://wiki.eclipse.org/FAQ_How_do_I_write_to_the_console_from_a_plug-in%3F](http://wiki.eclipse.org/FAQ_How_do_I_write_to_the_console_from_a_plug-in%3F) and then I have implemented this code:

```
private static MessageConsole findConsole(String name) {

    if (ConsolePlugin.getDefault() == null)
        return null;
    ConsolePlugin plugin = ConsolePlugin.getDefault();
    IConsoleManager conMan = plugin.getConsoleManager();
    IConsole[] existing = conMan.getConsoles();
    for (int i = 0; i < existing.length; i++)
        if (name.equals(existing[i].getName())) {
            conMan.showConsoleView(existing[i]);
            return (MessageConsole) existing[i];
        }
    // no console found, so create a new one
    MessageConsole myConsole = new MessageConsole(name, null);
    conMan.addConsoles(new IConsole[] { myConsole });
    return myConsole;
}

public MessageConsoleStream getMessageStream() {
    MessageConsole myConsole = findConsole("console");
    if (myConsole != null) {

        IWorkbench wb = PlatformUI.getWorkbench();
        IWorkbenchWindow win = wb.getActiveWorkbenchWindow();
        IWorkbenchPage page = win.getActivePage();
        String id = IConsoleConstants.ID_CONSOLE_VIEW;
        IConsoleView view;
        try {

            view = (IConsoleView) page.showView(id);
            view.display(myConsole);

            return myConsole.newMessageStream();
        } catch (PartInitException e) {
            e.printStackTrace();
        }
    }
    return null;
} 
```

I have added org.eclipse.ui.console to plugin.xml > dependencies > required plugins.

When I want to print some message: MessageConsoleStream out = getMessageStream(); out.println(...);

And it is working. But I need a "terminate button" in my console and it seems that this code isn't enough. How can I do that? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:56:42.203

这与控制台完全无关。您想创建一个[viewContribution](http://www.eclipse.org/articles/Article-action-contribution/index.html#example4)，它只是将一个按钮添加到现有视图的工具栏区域。[在 stackoverflow 上](https://stackoverflow.com/questions/2773184/how-to-add-a-pulldown-button-in-a-views-toolbar)也有一个例子。或者您可能想查阅[关于该主题的 Eclipse 帮助](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_basicext_viewActions.htm)。

# javascript - Extjs 4.1 分页工具栏默认页面

> ID：16170959
> 
> 赞同：2
> 
> 时间：2013-04-23T13:44:35.430
> 
> 标签：javascript, extjs, extjs4.1

我想在没有记录的情况下将分页工具栏的默认页面更改为 1 of 1 而不是 0 of 0 根据我的要求，用户可以使用显示第 1 页的分页工具栏手动将行添加到网格中，当行超过 10 时，它会移动到第 2 页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T01:12:13.037

在 Ext 中，可以使用您自己的自定义版本重载像 Ext.toolbar.Paging 这样的组件。只需在您的定义中指定一个别名，您就可以像使用“本机控件”一样使用它。

为了确保该方法可行，我用一个简单的数据源设置了一个测试项目，并实现了足够多的替换定义，我可以看到在我的自定义定义中触发了“Ext.toolbar.Paging”.getPagingItems 方法。

从那时起，您可以替换原始方法定义中的代码，以允许自定义最小值，此外还有机会重载“updateInfo”方法，以确保在数据重新加载期间您不会进行自定义。

除了这两件事之外，您应该（通过相对较少的努力）能够在控件之上实现以支持根据网格的内容动态更改其值。

如果您查看 ux.data.PagingStore 的文档，您应该能够找出使用远程提供的存储与本地提供数据的存储的差异。

希望这对您有所帮助。

代码示例：

```
Ext.define(
    "Test.view.testview.TvPageBar",
    {
        extend: "Ext.toolbar.Paging",
        alias: "widget.tvpagebar",
        title: "Bob",
        strictInit: function () {
            "use strict";
            console.log("TvPageBar init");
        },
        getPagingItems: function () {
            console.log("getPagingItems", this);
            this.callParent(arguments);
        },
        initComponent: function () {
            this.strictInit();
            this.callParent(arguments);
        }
    }
); 
```

# android - Android 中的基本选项卡设置不起作用

> ID：16170963
> 
> 赞同：-2
> 
> 时间：2013-04-23T13:44:42.597
> 
> 标签：android, android-layout, android-widget

我正在学习Android开发。目前，我正在尝试进行基本的选项卡屏幕设置。为了尝试做到这一点，我创建了以下 axml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:background="#fff"
  android:layout_height="fill_parent">
  <RelativeLayout
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:background="#2D2D2D"
    android:layout_height="50dip"
    android:minHeight="50dip">
      <LinearLayout
        android:orientation="horizontal"
        android:minWidth="25px"
        android:minHeight="25px"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:id="@+id/linearLayout1">
    <TextView
          android:text="@string/my"
          android:textAppearance="?android:attr/textAppearanceSmall"
          android:layout_weight="1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:id="@+id/textView1"
          android:layout_marginRight="0.0dp"
          android:textColor="#ffefc6"
          android:textSize="22dip"
          android:editable="false"
          android:focusable="false" />
    <TextView
          android:text="@string/app"
          android:textAppearance="?android:attr/textAppearanceSmall"
          android:layout_weight="1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:id="@+id/textView2"
          android:textColor="#FFFFFF"
          android:textSize="22dip"
          android:editable="false"
          android:focusable="false" />
      </LinearLayout>
  </RelativeLayout>

  <TabHost android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/tabHost">
    <RelativeLayout android:orientation="vertical"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:padding="3dp">
      <TabWidget android:layout_width="fill_parent"
        android:layout_height="wrap_content"
    android:id="@android:id/tabs"
    android:layout_alignParentBottom="true" />

        <FrameLayout android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:id="@android:id/tabcontent"
      android:layout_alignParentTop="true">

          <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tab1"
        android:orientation="vertical">
            <TextView android:layout_width="fill_parent"
          android:layout_height="100px"
          android:text="This is tab1"
          android:id="@+id/txt1"/>
      </LinearLayout>

      <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tab2"
        android:orientation="vertical">

        <TextView android:layout_width="fill_parent"
          android:layout_height="100px"
          android:text="This is tab2"
          android:id="@+id/txt2"/>
          </LinearLayout>

      <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tab3"
        android:orientation="vertical">
            <TextView android:layout_width="fill_parent"
          android:layout_height="100px"
          android:text="This is tab3"
          android:id="@+id/txt3"/>
      </LinearLayout>
    </FrameLayout>
  </RelativeLayout>
    </TabHost>  
</LinearLayout> 
```

当我尝试运行加载此布局的活动时，我收到一条错误消息：“应用程序已意外停止。请重试。”。这段代码有什么问题？它必须是简单的。此时我已经盯着它看了5个小时。现在我想我离问题太近了，看不到它。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:39:21.903

我不知道这有什么问题，但你也可以通过编码来尝试，

```
TabHost tabHost = getTabHost();

TabSpec Spec1 = tabHost.newTabSpec("Tab 1");
Spec1.setIndicator("Name of Tab 1");
Intent IntentTab1 = new Intent(this, tab1.class);
Spec1.setContent(IntentTab1);

TabSpec Spec2 = tabHost.newTabSpec("Tab 2");
Spec2.setIndicator("Name of Tab 2");
Intent IntentTab2 = new Intent(this, tab2.class);
Spec2.setContent(IntentTab2);

TabSpec Spec3 = tabHost.newTabSpec("Tab 3");
Spec3.setIndicator("Name of Tab 3");
Intent IntentTab3 = new Intent(this, tab3.class);
Spec3.setContent(IntentTab3);

tabHost.addTab(Spec1);
tabHost.addTab(Spec2);
tabHost.addTab(Spec3); 
```

# python - How to create a non-instantiable class?

> ID：16170968
> 
> 赞同：5
> 
> 时间：2013-04-23T13:44:57.657
> 
> 标签：python, instantiation, objectinstantiation

For one of the project I am currently working I was thinking of creating a class that could not be instantiate by a client and only be supplied an instance of through a particular interface i.e. the client would not be able create further instance out of it by some hackery such as:

```
>>> try:
...     raise WindowsError
... except:
...     foo = sys.exc_info()
... 
>>> foo
(<type 'exceptions.WindowsError'>, WindowsError(), <traceback object at 0x0000000005503A48>)
>>> type(foo[2])()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: cannot create 'traceback' instances 
```

once he has one.

I was successfully able to create a class that couldn't be instantiated. i.e.

```
>>> class Foo():
...     def __init__(self):
...         raise TypeError("cannot create 'Foo' instances")
... 
>>> bar = Foo()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in __init__
TypeError: cannot create 'Foo' instances
>>> bar
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'bar' is not defined 
```

But how could I use this every same definition to create an instance of the class?

Of course I could do something like this:

```
>>> class Foo():
...     def __init__(self, instantiate = False):
...         if not instantiate:
...               raise TypeError("cannot create 'Foo' instances") 
```

but I don't find it elegant enough nor does it completely prevent the client from further instantiating it. And no I aint going down the road of building a C++ module for it.

Any suggestions on how to achieve such a thing? `import abc`?

**A brief rational to answer Martijn's [question](https://stackoverflow.com/questions/16170968/how-to-create-a-non-instantiable-class?noredirect=1#comment23112504_16170968) and for completeness:**

Actual you could consider the instance of the particular, and related, classes, in question, as nodes in a tree and that both the parent and the children to remain connected, dependent on and cognizant of each other and have a single unique root throughout any instance of python(insured by the use `package`). Any state changes in a particular node would cause others to update themselves and the *database* to which they are connect, accordingly. Apart from that I was being curious to know how such a thing could be put in place (the `traceback` class was teasing me).

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T13:54:58.597

你正在做的是一个坏主意，你不应该这样做。我敢肯定还有其他更好的解决方案。如果您确实决定按照自己的方式行事（您不应该这样做），那么您可以在不使用的情况下创建对象`__init__()`：

* * *

python中的对象是使用该`__new__()`方法创建的。该方法`__init__()`仅编辑由`__new__()`. 例如，`__init__()`通常为对象初始化一些属性。

当声明类似`x = Foo()`发生的事情时：

1.  `x = object.__new__(Foo)`首先被调用并创建对象。
2.  `Foo.__init__(x)`第二个被调用，它只是将一些属性等初始化为已经存在的对象。

这意味着您不需要调用`Foo()`（因此，`__init__()`也调用）。相反，您可以直接调用`__new__()`：

```
class Foo(object):
    def __init__(self):
        raise TypeError("Cannot create 'Foo' instances.")

>>> x = object.__new__(Foo)
>>> x
<__main__.Foo object at 0x02B074F0> 
```

我们`x`现在是 的一个实例`Foo`，没有任何属性，它可以使用`Foo`类中定义的任何方法。

如果需要，您可以创建自己的`__init__`用于初始化属性的替换函数：

```
def init_foo(foo, name):
    foo.name = name

>>> init_foo(x, "Mike")
>>> x.name
'Mike' 
```

这当然也可以是`Foo`'s 实例方法：

```
class Foo(object):
    def __init__(self):
        raise TypeError("Cannot create 'Foo' instances.")

    def init(self, name):
        self.name = name

>>> x = object.__new__(Foo)
>>> x.init("Mike")
>>> x.name
'Mike' 
```

更进一步，您甚至可以使用 a`classmethod`来创建对象，只需一次调用：

```
class Foo(object):
    def __init__(self):
        raise TypeError("Cannot create 'Foo' instances.")

    @classmethod
    def new(cls, name):
        obj = object.__new__(cls)
        obj.name = name
        return obj

>>> x = Foo.new("Mike")
>>> x.name
'Mike' 
```

# c# - 单元测试 IValueConverter

> ID：16170972
> 
> 赞同：0
> 
> 时间：2013-04-23T13:45:05.173
> 
> 标签：c#, unit-testing, windows-phone-7

我有自定义转换器，我想运行单元测试。我有[像这样](http://smartypantscoding.com/a-cheat-sheet-for-unit-testing-silverlight-apps-on-windows-phone-7)的基本测试项目，所以我想知道，我应该如何为 IValueConverter 进行最简单的单元测试。

我已经有 2 个测试项目：一个用于集成测试（在手机上运行），第二个用于单元测试（在控制台中运行）。是否可以将 Converter 作为控制台应用程序进行测试？

我已将转换器添加为单元测试项目的链接，进行了测试，但我面临几个程序集引用问题。尝试解决它们有什么意义吗？

测试：

```
[TestClass]
public class UnitTest1
{
    [TestMethod]
    public void TestMethod1()
    {
        var conv = new DoubleToHPConverter();

        var result = conv.Convert(1500, typeof(string), null, null);

        Assert.AreEqual(result, "1.5K");
    }
} 
```

错误：

> 错误 1 ​​名称空间“System”中不存在类型或名称空间名称“Windows”（您是否缺少程序集引用？）
> 错误 2 找不到类型或名称空间名称“IValueConverter”（您是否缺少 using 指令或装配参考？）

# google-app-engine - GuiceServletConfig 错误

> ID：16170975
> 
> 赞同：0
> 
> 时间：2013-04-23T13:45:12.670
> 
> 标签：google-app-engine, gwt, guice

使用的技术是 GWT 2.5.1、GWTP 1-RC4、GAE 1.7.7.1、Eclipse Juno

# 1 - 我有以下错误：

2013 年 4 月 23 日下午 1:35:34 com.google.apphosting.utils.jetty.JettyLogger 警告 Avertissement：**无法实例化侦听器 com.MS.server.guice.GuiceServletConfig** java.lang。**ClassNotFoundException**：com.MS.server.guice.GuiceServletConfig at java.net.URLClassLoader$1.run(URLClassLoader.java:366) at java.net.URLClassLoader$1.run(URLClassLoader.java:355) at java.security.AccessController。 doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:354) at java.lang.ClassLoader.loadClass(ClassLoader.java:423) 等等......

# 2 - 我也不知道我是否应该在我的项目的类路径中包含 appengine-tool-api.jar ？

谢邀，

# iphone - 快速将 Facebook 好友图片保存到文档

> ID：16170976
> 
> 赞同：1
> 
> 时间：2013-04-23T13:45:17.000
> 
> 标签：iphone, facebook, profile, image, friend

我没有任何线索，因此我将它交给可以帮助我以适当方式的人。实际上，我已经使用 FQL 查询检索了 Facebook 朋友的详细信息，其中个人资料图片是该字段之一，给我们带来的不便，图片是以url的形式检索的。早期阶段，我尝试使用graph api（object）获取朋友的详细信息，它访问服务器的次数与朋友数一样多。因为它需要很长时间为了让 FB 朋友同步，我转向 FQL，这也让我很烦恼。即使我在一个查询中拥有所有朋友的图片，我也无法将它们转换为图像并快速保存到文档文件夹。

我有一个 Facebook 同步按钮，在该按钮操作中，我将朋友详细信息保存/更新到数据库中，同时将朋友图片保存到文档中。这再次导致我遇到类似问题，即需要更多时间来同步。这里是我理解的实现代码：

```
-(void)saveUpdateFriendDetails
{
    for (int index = 0; index<[friendsDetailsArray count]; index++)  
    {
       //Save or update friends details to db

       //Fetch friends picture url,convert to image and save to documents folder
       NSString *friendPictureString = [[self.friendsDetailsArray valueForKey:kPicture]objectAtIndex:index];
       NSURL *friendPhotoUrl = [NSURL URLWithString:friendPictureString];
       NSData *data = [NSData dataWithContentsOfURL:friendPhotoUrl];
       UIImage *friendProfilePicture = [UIImage imageWithData:data];

       NSString *filename = [facebookID stringByAppendingString:kPNG];

       //  Get the path of the app documents directory
       NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
       NSString *documentsDirectory = [paths objectAtIndex:0];

       //  Append the filename and get the full image path
       NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:filename];

       //  Now convert the image to PNG and write it to the image path
        NSData *imageData = UIImagePNGRepresentation(friendProfilePicture);
        [imageData writeToFile:savedImagePath atomically:NO];
} 
```

我尝试使用 GCD 和 AsyncImageView 在后台运行该进程，但即使那样它也需要相同的时间，因为进程保持不变（最终我们在后台运行，这是唯一的区别）。

那么有什么方法可以快速将朋友的图片网址转换为照片并保存到文档文件夹中，这样就不会影响我的 Facebook 同步过程。

**注意：在不将图片保存到文档的情况下，同步 800 位好友大约需要 20-30 秒，保存图片也需要 2-3 分钟。**

有人可以指导我。

提前感谢每一位 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:40:12.403

哎呀，我找到了解决我自己问题的方法

只需忽略将图像保存到文档文件夹，这将提高我们的同步速度。

稍后在使用图像显示详细信息时，只需使用图形 api 检索朋友图像，即一行：

```
NSString *profilePicURL = [NSString stringWithFormat:@"http://graph.facebook.com/%@/picture",friendID]; 
```

我们可以在后台使用 GCD 模型进行异步加载，这不会让性能下降。

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,  0ul);
        dispatch_async(queue, ^{
NSString *profilePicURL = [NSString stringWithFormat:@"http://graph.facebook.com/%@/picture",friendID];
NSURL *profilePhotoURL = [NSURL URLWithString:profilePicURL];
NSData *photoData = [NSData dataWithContentsOfURL:profilePhotoURL];
dispatch_sync(dispatch_get_main_queue(), ^{
//assign the image to cell here
image = [UIImage imageWithData:photoData];
cell.imageView = image;
 });
}); 
```

谢谢，希望这对某人有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:57:48.063

您是否考虑过**Image Caching**，您只需要存储 URL（或通过 userID 构造它）并仅在需要时加载它。

一旦图像加载一次，您就不需要再次加载它（因为它会存储在手机上）。

有一个很好的库[SDWebImage](https://github.com/rs/SDWebImage)可以做到这一点。

# jquery - JQuery 可拖动取消

> ID：16170978
> 
> 赞同：1
> 
> 时间：2013-04-23T13:45:35.070
> 
> 标签：jquery, jquery-ui, draggable

我正在尝试取消 1 个运行良好的 css 类，同时取消 2 个输入。但我只能取消css课程..

如何解决这个问题？

```
$("#move").mousedown(function () {
    $( "#draggable").draggable({cancel : '.scroll',
                                cancel : 'input'
    });     
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:59:25.607

试试下面的方法。

取消：'.scroll，输入'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:00:23.073

您的代码有 2 个问题：

1.  `{cancel : '.scroll',cancel : 'input'}`不是有效的[javascript 对象文字](http://www.dyn-web.com/tutorials/obj_lit.php)，因为您使用了 2 个同名的属性。
2.  您在每次 mousedown 时初始化您的可拖动元素，但您只需要在代码开始时执行此操作。

尝试使用[多个选择器](http://api.jquery.com/multiple-selector/)：

```
$("#draggable").draggable({cancel : '.scroll,input'}); 
```

# php - PHP 会话 - 无法在 Firefox 或 chrome 中检索会话

> ID：16170979
> 
> 赞同：0
> 
> 时间：2013-04-23T13:45:35.970
> 
> 标签：php, session, browser

我的 HTML 表单被发送到 PHP 页面进行处理。我需要在表单中添加验证码，但无法将 HTML 页面更改为 PHP，因此在 capcha.php 页面中为显示的验证码设置了一个会话，该页面作为 HTML 表单中的图像输出。当页面加载时，会话变量已设置，但我无法在进程 PHP 页面中检索此会话。我遇到这个问题的地方只是 Firefox 或 chrome。它适用于 IE。

在 capcha.php 中设置会话的代码：

```
session_start(); // start a session
$image = imagecreate(50, 20); //create blank image (width, height)
$bgcolor = imagecolorallocate($image, 0, 0, 0); //add background color with RGB.
$textcolor = imagecolorallocate($image, 255, 255, 255); //add text/code color with RGB.
$code = rand(1000, 9999); //create a random number between 1000 and 9999
$_SESSION['code'] = $code; //add the random number to session 'code'
imagestring($image, 10, 8, 3, $_SESSION['code'], $textcolor); //create image with all the settings above.
header ("Content-type: image/png"); // define image type
imagepng($image); //display image as PNG 
```

PHP进程页面：

```
session_start();

print_r($_SESSION['code']); 
```

有人可以帮忙吗？

***编辑******** 我认为这与在 capcha.php 中设置的会话有关，该会话作为图像添加到我的 HTML 表单中。如果我在浏览器中转到 capcha.php 然后到 process_email.php 会话已设置。因此，当作为图像包含时，它没有设置。有谁知道解决这个问题的方法？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:14:55.163

这看起来是一个有趣的问题。让我尝试更详细地解释这一点。

*   当您正常启动 PHP 会话时，您会将 cookie 发送给用户。当用户在您的站点上打开其他页面时，您会`PHPSESSID`在 HTTP 请求标头中找到 cookie，并从 cookie 中获取会话 ID。然后，您在服务器上找到此 ID 的会话并加载会话数据。
*   通常您在主 HTML 文档中设置 cookie。但是你不要因为这是一些你不能改变的静态文件。
*   您在 HTML 中包含的图像中设置 cookie。我以前从未这样做过，我应该承认我不知道浏览器在这种情况下应该如何表现。完美的 cookie 应该从图像中提取，然后在所有页面上使用。

我为此做了一个测试。以下是我的结果。我在 Chrome 中做了所有事情。简而言之，我可以在处理 PHP 文件的表单中获取 cookie。

打开 HTML 页面。我们可以看到此页面上没有 cookie。 ![首次打开的 HTML 页面没有 cookie](https://i.stack.imgur.com/8Jafj.png)

在此页面上，我们加载图像并且图像 HTTP 响应已指定 cookie。

![指定 PHP 会话的带有 cookie 的图像文件](https://i.stack.imgur.com/Jn1fP.png)

当我提交表单时，我得到了 HTTP 请求中定义的 cookie。看一看： ![提交的表单和定义的 cookie](https://i.stack.imgur.com/0ZSxx.png)

正如预期的那样，这在 Google Chrome 中对我有用。

我建议检查域。包含表单、图像和提交 URL 的 HTML 页面的完整 URL 是什么？他们有完全相同的域吗？

我又做了一项测试并从不同的域加载了图像，然后是 HTTP 页面。但这不仅在 Chrome 中有效，在 IE 9 中也无效。这就是为什么我猜不出你在做什么。

我建议使用 Chrome 中的开发工具并检查所有 cookie 和页面加载请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:28:53.080

不要忘记在注销文件中添加 session_destroy() 和类似的条件

```
if (!isset($_SESSION['session_value'])) {
} 
```

是一种更好的编程方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:56:04.877

尝试先取消设置该会话，然后再为其分配值。

# ruby-on-rails - 错误安装 pg gem

> ID：16170981
> 
> 赞同：0
> 
> 时间：2013-04-23T13:45:37.300
> 
> 标签：ruby-on-rails, postgresql, gem, pg

尝试安装“pg”时出现以下错误有什么想法吗？我对rails很陌生，所以我不确定如何解决这个问题。

```
Davids-MacBook-Air:~ DavidStevenson$ install pg
usage: install [-bCcpSsv] [-B suffix] [-f flags] [-g group] [-m mode]
               [-o owner] file1 file2
       install [-bCcpSsv] [-B suffix] [-f flags] [-g group] [-m mode]
               [-o owner] file1 ... fileN directory
       install -d [-v] [-g group] [-m mode] [-o owner] directory ...
Davids-MacBook-Air:~ DavidStevenson$ gem install pg
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

    /usr/local/rvm/rubies/ruby-1.9.3-p392/bin/ruby extconf.rb

make
compiling gvl_wrappers.c
compiling pg.c
pg.c: In function ‘Init_pg_ext’:
pg.c:384: error: ‘PQPING_OK’ undeclared (first use in this function)
pg.c:384: error: (Each undeclared identifier is reported only once
pg.c:384: error: for each function it appears in.)
pg.c:386: error: ‘PQPING_REJECT’ undeclared (first use in this function)
pg.c:388: error: ‘PQPING_NO_RESPONSE’ undeclared (first use in this function)
pg.c:390: error: ‘PQPING_NO_ATTEMPT’ undeclared (first use in this function)
make: *** [pg.o] Error 1

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p392/gems/pg-0.15.1     for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p392/gems/pg-0.15.1/ext/gem_make.out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:53:05.523

请尝试以下链接在 Mac 上安装 postgres：

[如何为 mac os x 安装 postgresql](https://stackoverflow.com/questions/8278814/how-to-install-postgresql-for-mac-os-x)

[在 Mac Lion 上安装 Postgresql](https://stackoverflow.com/questions/10891144/installing-postgresql-on-mac-lion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:49:41.357

您可能需要首先使用（homebrew、macports、fink）之一安装 postgresql 开发库。我个人仍然喜欢 macports，但 homebrew 似乎越来越受欢迎。如果这仍然不起作用，您可能需要将一些标志传递给“gem install”命令，以告诉它在哪里可以找到这些库。

# java - Play 2 - Zentask Java 教程 - jUnit ebean 测试失败

> ID：16170983
> 
> 赞同：1
> 
> 时间：2013-04-23T13:45:37.780
> 
> 标签：java, testing, playframework, playframework-2.0, junit4

> > **解决方法：不需要IDE进行测试，在控制台运行“play test”即可**

晚上好！我刚开始接触 Play Framework，之前使用过 jUnit，也曾在 rails 和 lift 中使用过测试。但是在这里我认为ebean有问题，我只是不明白为什么会这样。我使用 eclipse 和正确的 java 版本，所有库都很好，代码没有错误，我只是按照教程进行操作。诸如将 ebean 添加到 VM 中的解决方案不起作用，因为它在 eclipse 上说“无法加载 VM”。

有错误信息

```
[[31merror[0m] c.a.e.s.d.BeanDescriptorManager - Error in deployment
javax.persistence.PersistenceException: java.lang.IllegalStateException: Class [class play.db.ebean.Model] is enhanced and [class models.User] is not - (you can not mix!!)
at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.setEntityBeanClass(BeanDescriptorManager.java:1475) ~[avaje-ebeanorm-server.jar:na]
at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.createByteCode(BeanDescriptorManager.java:1138) ~[avaje-ebeanorm-server.jar:na]
at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.readDeployAssociations(BeanDescriptorManager.java:1058) ~[avaje-ebeanorm-server.jar:na]
at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.readEntityDeploymentAssociations(BeanDescriptorManager.java:565) ~[avaje-ebeanorm-server.jar:na]
at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.deploy(BeanDescriptorManager.java:252) ~[avaje-ebeanorm-server.jar:na]
at com.avaje.ebeaninternal.server.core.InternalConfiguration.<init>(InternalConfiguration.java:124) [avaje-ebeanorm-server.jar:na]
Caused by: java.lang.IllegalStateException: Class [class play.db.ebean.Model] is enhanced and [class models.User] is not - (you can not mix!!)
at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.checkInheritedClasses(BeanDescriptorManager.java:1528) ~[avaje-ebeanorm-server.jar:na]
at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.checkSubclass(BeanDescriptorManager.java:1491) ~[avaje-ebeanorm-server.jar:na]
at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.setEntityBeanClass(BeanDescriptorManager.java:1450) ~[avaje-ebeanorm-server.jar:na]
at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.createByteCode(BeanDescriptorManager.java:1138) ~[avaje-ebeanorm-server.jar:na]
at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.readDeployAssociations(BeanDescriptorManager.java:1058) ~[avaje-ebeanorm-server.jar:na]
at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.readEntityDeploymentAssociations(BeanDescriptorManager.java:565) ~[avaje-ebeanorm-server.jar:na] 
```

我认为这是主要的错误信息：

```
Caused by: java.lang.IllegalStateException: Class [class play.db.ebean.Model] is enhanced and [class models.User] is not - (you can not mix!!) 
```

我希望你们能尽快帮助我！干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:26:51.960

这与eclipse ide有关，只需按照我的问题中的说明进行操作即可：

[播放框架 2.1 junit 测试在 Eclipse 中不起作用](https://stackoverflow.com/questions/14913627/play-framework-2-1-junit-test-not-working-from-eclipse)

干杯

# visual-studio-2010 - 在开发人员计算机上的证书存储中安装 VeriSign 证书时出现问题

> ID：16170984
> 
> 赞同：0
> 
> 时间：2013-04-23T13:45:38.367
> 
> 标签：visual-studio-2010, dll, certificate, verisign

我有一个最初在 Visual Studio 2008 中创建的 Visual Studio 2010 VSTO Outlook Add In 项目。VSTO dll 项目使用 VeriSign 证书（Pfx 文件）进行签名。在 VS 2008 下创建项目时，在新的开发人员机器上构建它没有问题。现在，在 VS 2010 下，我们收到以下构建错误：

> “无法导入以下密钥文件：Blah.pfx。密钥文件可能受密码保护。要更正此问题，请尝试再次导入证书或手动将证书安装到具有以下密钥容器名称的强名称 CSP：VS_KEY_blahblahblahblah”

有一段时间我可以使用 sn.exe -i 手动将证书安装到强名称 CSP 中，正如错误所暗示的那样，一切都很好。现在，当我尝试使用 sn.exe -i 安装证书时，我收到以下神秘错误消息：

> “无法解析 blah.pfx 中的 PKCS#12 blob - 发生内部错误”

有谁知道导致此故障的原因以及如何解决？我看过几篇关于在 Microsoft/Crypto/RSA 下的 MachineKeys 文件夹上设置权限的帖子，我已经尝试过了，但仍然收到相同的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T15:44:03.940

我最终针对此问题打开了 Microsoft Premier Support 事件，结果证明我们的证书已损坏。解决方案是用新证书替换它。

# python - Matplotlib：删除有关 matplotlib.use() 的警告

> ID：16170989
> 
> 赞同：8
> 
> 时间：2013-04-23T13:45:54.060
> 
> 标签：python, matplotlib, warnings

在我使用的 Python 模块中`matplotlib`，我想确保它在我通过`ssh`. 所以我这样做：

```
import matplotlib
matplotlib.use('Agg')
from matplotlib.backends.backend_pdf import PdfPages
import matplotlib.mlab as mlab
import matplotlib.pyplot as plt
import numpy as np
import pylab
import scipy.stats
import scipy.stats.mstats 
```

有用。太糟糕了，当我**直接**在机器上运行它（**不是远程**机器！）时，它给了我以下警告：

> 对 matplotlib.use() 的调用无效，因为已经选择了后端；matplotlib.use() 必须在 首次导入 pylab、matplotlib.pyplot 或 matplotlib.backends*之前调用。*

如何删除此消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:11:40.753

虽然我无法测试这个 Ipython 告诉我“可以设置 warn=False 来支持警告。”

资源：

```
matplotlib.use?

Type:       function
String Form:<function use at 0x98da02c>
File:       /usr/lib/pymodules/python2.7/matplotlib/__init__.py
Definition: matplotlib.use(arg, warn=True)
Docstring:
Set the matplotlib backend to one of the known backends.

The argument is case-insensitive.  For the Cairo backend,
the argument can have an extension to indicate the type of
output.  Example:

    use('cairo.pdf')

will specify a default of pdf output generated by Cairo.

.. note::

    This function must be called *before* importing pyplot for
    the first time; or, if you are not using pyplot, it must be called
    before importing matplotlib.backends.  If warn is True, a warning
    is issued if you try and call this after pylab or pyplot have been
    loaded.  In certain black magic use cases, e.g.
    :func:`pyplot.switch_backends`, we are doing the reloading necessary to
    make the backend switch work (in some cases, e.g. pure image
    backends) so one can set warn=False to supporess the warnings.

To find out which backend is currently set, see
:func:`matplotlib.get_backend`. 
```

在文档中找到错字总是很有趣。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-01-15T20:39:26.470

警告信息通常很重要，我建议不要忽略。我在寻找使用 sphinx 构建文档的解决方案时发现了您的问题。我收到了类似的消息，以及警告的一些附加上下文：

```
UserWarning:
This call to matplotlib.use() has no effect because the backend has already
been chosen; matplotlib.use() must be called before pylab, matplotlib.pyplot,
or matplotlib.backends is imported for the first time.

The backend was originally set to 'Qt5Agg' by the following code:
File "setup.py", line 131, in <module>
'psql' : ['psycopg2>=2.7.1'], 
```

[然后我在https://github.com/conchoecia/pauvre/issues/18](https://github.com/conchoecia/pauvre/issues/18)找到了解决方案。导入顺序如下：

```
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt 
```

在修复之前，我只对模块进行了以下导入

```
from mymod.utils import plotutils
import mymod.plots as plots
import matplotlib.pyplot as plt 
```

我认为这个问题的导入顺序导致了警告消息。但是，我无法针对所提供的信息重新创建您的警告。如果能从该警告中再看到几行，那就太好了。

在与其他开发人员进行了更多讨论之后，很明显我的 pyplot 导入在文件中，而它属于我需要使用 plt.

了解渲染很重要，您可以在 [https://matplotlib.org/faq/usage_faq.html#what-is-a-backend](https://matplotlib.org/faq/usage_faq.html#what-is-a-backend) 和 [https://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib 获得更多信息。](https://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.use) 请记住其他处理代码可能会更改或默认后端名称[。](https://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.use)

# php - 在 Symfony2 表单中，我有两个表，用户 ------------------- id | 姓名 | city_id -------------------- 1 | 美国广播公司 | 1 2 | xyz | 3 3 | 香港站 | 3 -------------------- 和城市 --------- id | 姓名 --------- 1 | BN 2 | 韩币 3 | OP 4 | 高清我正在使用 Symfony2 表单创建一个表单。我想知道如何将所有城市作为 <sel

> ID：16170992
> 
> 赞同：0
> 
> 时间：2013-04-23T13:45:58.530
> 
> 标签：php, forms, symfony, symfony-forms

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:43:07.310

您可以在那里查看：[http](http://symfony.com/doc/2.0/reference/forms/types/entity.html) ://symfony.com/doc/2.0/reference/forms/types/entity.html 来编写类似的代码：

```
 ->add('city', 'entity', 
          array('required'   => true,
                'label'      => 'label',
                'class'    => 'YourBundle:TheClass',
                'query_builder' => function(YourClassRepository $er) {
                       return $er->createQueryBuilder('e')->orderBy('e.name', 'ASC');
                }
 )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:05:19.733

如果 city 是一个实体，那么它可以很简单 ->add('city')。如果你想要一个默认值，你可以在 $options 中提供实体，比如 'data' => $defaultEntity。此外，您的城市实体必须有一个 __toString 方法。但是，如果您在 city 上没有实体，则可以使用类似的东西

```
$builder->add('gender', 'choice', array(
    'choices'   => array('m' => 'Male', 'f' => 'Female'),
    'required'  => false,
)); 
```

> 此字段可能会呈现为几个不同的 HTML 字段之一，具体取决于扩展选项和多个选项：
> 
> *   元素类型-（扩展/多个）
> *   选择标签-（假/假）
> *   选择标签多个-（假/真）
> *   单选按钮-（真/假）
> *   复选框-（真/真）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T16:59:13.830

您只需要指定“属性”字段。

```
->add('city', 'entity', 
         array('required'   => true,
               'label'      => 'label',
               'class'      => 'YourBundle:TheClass',
               'property'   => 'name'
)) 
```

如果您希望查询构建器仅限于某些选择，则 Sandeepraju 的答案适用。

阅读更多：[http ://symfony.com/doc/current/reference/forms/types/entity.html#property](http://symfony.com/doc/current/reference/forms/types/entity.html#property)

# sharepoint - Sharepoint 2013 - 结果类型优先级

> ID：16170994
> 
> 赞同：1
> 
> 时间：2013-04-23T13:45:59.213
> 
> 标签：sharepoint, sharepoint-2013, resulttype

我成功地使用两个自定义显示模板创建了两个自定义结果类型。

我以这种方式配置了结果类型，如果结果项的标题包含“String 1”，则使用 *Item_Case1*，如果标题包含“String 2”，则使用 *Item_Case2*。

现在我试着玩弄优先级。如果标题是“ **String 1** blablabla **String 2** ”，我希望它使用“Item_Case1”。

```
我希望它是一个小示意图：
（搜索词 --> 显示模板）

 - "字符串 1 bla bla" --> "Item_Case1"
 - “字符串 2 bla bla”--> “Item_Case2”
 - “字符串 1 blabla 字符串 2”--> “Item_Case1”

```

根据[该站点](http://www.learningsharepoint.com/2012/10/13/sharepoint-2013-the-concept-of-result-types-in-search/)，将使用哪个显示模板的优先级由结果类型列表中的位置定义。

但无论我怎么尝试，它都行不通。我发现的唯一（丑陋的）解决方法是通过首先将 searchTerm 从“String 1”更改为“String 1bla”来停用模板，然后按照我需要的顺序激活它们。

那么，这是一个已知的错误还是我做错了什么？

# c++ - notify_all 导致分段错误

> ID：16170995
> 
> 赞同：0
> 
> 时间：2013-04-23T13:45:59.933
> 
> 标签：c++, multithreading, boost, boost-thread

我正在使用 boost 线程，在析构函数中调用 notify_all() 时，我看到了分段错误。这是堆栈：

```
(gdb) where
#0  0x00007ffff752de84 in pthread_mutex_lock ()
   from /lib/x86_64-linux-gnu/libpthread.so.0
#1  0x00007fffe85ab22e in        boost::pthread::pthread_mutex_scoped_lock::pthread_mutex_scoped_lock (this=0x7fffffffdba0, m_=0x0)
    at /usr/include/boost/thread/pthread/pthread_mutex_scoped_lock.hpp:26
#2  0x00007fffe85abb5d in boost::condition_variable::notify_one (this=0x0)
    at /usr/include/boost/thread/pthread/condition_variable.hpp:88
#3  0x00007fffe8690864 in CampaignFrequency::stopFlushThread (this=0x6ad590)
    at /home/git/gitRTB/infinityplus/src/common/shm/CampaignFrequency.cpp:197
#4  0x00007fffe868ffd7 in CampaignFrequency::~CampaignFrequency (
    this=0x6ad590, __in_chrg=<optimised out>)
    at /home/git/gitRTB/infinityplus/src/common/shm/CampaignFrequency.cpp:81
#5  0x00007fffe85bdc37 in rtb_child_init (s=0x7ffff7fc3238)
    at /home/git/gitRTB/infinityplus/src/bidder/mod_rtb.cpp:265
#6  0x000000000044784c in ap_run_child_init ()
#7  0x000000000042817c in ?? ()
#8  0x0000000000463594 in ?? ()
#9  0x00000000004635f4 in ?? ()
#10 0x00000000004643fd in ?? ()
#11 0x000000000042f026 in ap_run_mpm ()
#12 0x0000000000428d74 in main () 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:54:02.403

在没有实际看到代码的情况下，这主要是推测。

从您的调试中：

```
#2  0x00007fffe85abb5d in boost::condition_variable::notify_one (this=0x0)
    at /usr/include/boost/thread/pthread/condition_variable.hpp:88 
```

就是说 this（在条件变量中）是`nullptr`. 看来您正在调用`cv->notify_all()`cv 所在的位置`nullptr`（又名`0`）。您是否有可能在尝试使用条件变量之前删除它？