# StackOverflow 问答 15363000-15363999

# php - 获取所选单选按钮的值并插入数据

> ID：15363001
> 
> 赞同：0
> 
> 时间：2013-03-12T13:47:44.000
> 
> 标签：php, radio-button

我的 PHP/PostgreSQL 编码有问题。这一切都与投票系统有关。代码如下：

```
$queryCandidates = pg_query("Select * From candidate as can, positions as pos, partylist as par, election_date as elpe, course as cou Where pos.position_id = can.position_id And par.partylist_id = can.partylist_id And elpe.election_date_id = can.election_date_id And cou.course_id = can.course_id AND elpe.status = 'Started' ORDER BY pos.position_id ASC");
while($result = pg_fetch_array($queryCandidates, NULL, PGSQL_ASSOC))
{
echo '<tr><td class="positionTD">'.$result['position_name']. '</td><td><label><input type="radio" name="'.$result['position_name'].'" value="'.$result['candidate_id'].'"/> '.$result['firstname']. ' '. $result['lastname']. '<td>' .$result['candidate_id'].'</td></label></td></tr>';
            }
            echo '<tr><td colspan="2"><input type="submit" value="Submit Votes" name="Submit"/></td></tr>'; 
```

然后这将显示投票表格：

![图 1](../Images/e2dff7f2ab7f01773619fcb80baee26a.png)

在投票系统中，每个职位只能选择一名候选人。但我的**问题**是，当用户单击“提交投票”按钮时，未选中的单选按钮被添加到数据库中。所以这里是插入选票的代码。

![图 2](../Images/61939828ecb7ab1476733babc2064416.png)

```
$queryVotes = pg_query("Select * From candidate");
while($result = pg_fetch_array($queryVotes, NULL, PGSQL_ASSOC))
{
$getVotes = pg_query("INSERT INTO vote (vote_id, candidate_id, voter_id) VALUES (default, '".$result['candidate_id']."', '".$_SESSION['voter_id']."')");
} 
```

注意：您在姓名旁边看到的数字是候选人的主键。

如您所见，我没有选择数字“5”。但是在PostgreSQL数据库中，即使我没有检查它，它也被插入了。

# ruby - 亚马逊 AWS，上限部署：检查失败

> ID：15363003
> 
> 赞同：0
> 
> 时间：2013-03-12T13:47:49.427
> 
> 标签：ruby, amazon-ec2, capistrano

我正在尝试使用 capistrano 设置部署到 AWS EC2 实例。为了测试，我正在使用

```
cap testing deploy:check 
```

但 Capistrano 失败了：

```
 triggering load callbacks
  * 2013-03-12 15:41:27 executing `testing'
    triggering start callbacks for `deploy:check'
  * 2013-03-12 15:41:27 executing `multistage:ensure'
  * 2013-03-12 15:41:27 executing `deploy:check'
  * executing "test -d /......./releases"
    servers: ["ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com"]
    connection failed for: ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com
    (NoMethodError: undefined method `each' for "publickey":String) 
```

我正在使用我的 .pem 文件进行连接，deploy.rb 脚本如下所示：

```
set :stages, %w(production testing)
set :default_stage, 'testing'
require 'capistrano/ext/multistage'

set :application, 'app_name'
set :user, 'the_user'
set :group, 'the_group'

set :scm, :git
set :repository,  "git@github.com:......./#{application}.git"
set :deploy_to, '/......./'
set :deploy_via, :remote_cache

# Authentication setup
default_run_options[:pty] = true
ssh_options[:forward_agent] = true
ssh_options[:auth_methods] = 'publickey'
ssh_options[:keys] = ['~/........pem'] 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:00:21.310

尝试将您的公钥放在服务器上。

并删除

ssh_options[:auth_methods] = 'publickey'

ssh_options[:keys] = ['~/........pem']

它应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:59:24.377

我最近升级了一个开发服务器并看到了同样的行为。错误消息看起来好像 Capistrano 期待一个可迭代的，并且分配`publicKey`没有这样定义它。

尽管听起来微不足道，但请尝试更改：

```
ssh_options[:auth_methods] = 'publickey'
ssh_options[:keys] = ['~/........pem'] 
```

到：

```
set :ssh_options, {:auth_methods => "publickey"}
set :ssh_options, {:keys => ["~/......pem"]} 
```

您可能需要对身份验证设置中的其他项目执行相同的操作。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T05:41:25.330

删除线

```
ssh_options[:auth_methods] = 'publickey' 
```

# r - 高级错误处理

> ID：15363004
> 
> 赞同：15
> 
> 时间：2013-03-12T13:47:50.087
> 
> 标签：r, error-handling, conditional-statements, application-restart

我最近提出[了这个问题](https://stackoverflow.com/questions/15295004/disregarding-simple-warnings-errors-in-trycatch?noredirect=1#comment21587644_15295004)，幸好有人指出`withRestarts()`这对我来说似乎非常棒和强大:-) 现在我渴望更详细地了解 R 的错误处理能力。

## 实际问题

1.  的推荐用法是`simpleCondition()`什么？以前从未使用过它，但我认为它可能对设计实际上是“真实”条件的自定义错误和警告很有用。它可以用来建立一个特定条件的数据库，哪些特定的处理程序可用？
2.  有没有办法“冻结”**整个**R 工作空间的某个状态并返回到它以在某个点重新开始计算？我知道`save.image()`，但是 AFAIU，这不存储搜索路径（`search()`或`searchpaths()`）的“状态”。

* * *

# 对于那些有兴趣的人

两个代码示例

1.  我目前`withRestarts`依赖于这篇[博文的使用说明](http://www.win-vector.com/blog/2012/10/error-handling-in-r/?utm_source=rss&utm_medium=rss&utm_campaign=error-handling-in-r)
2.  尝试定义“自定义条件”

我很感激任何关于如何做得更好的评论/建议；-)

## 示例 1

```
require("forecast")
autoArimaFailsafe <- function(
    x,
    warning=function(w, ...) {
        message("autoArimaFailsafe> warning:")
        message(w)
        invokeRestart("donothing")},
    error=function(e, ...) {
        message("autoArimaFailsafe> error:")
        message(e)
        invokeRestart("abort")}
) {
    withRestarts(
        out <- tryCatch(
           {
                expr <- expression(auto.arima(x=x))
                return(eval(expr))
           },
           warning=warning,
           error=error 
        ),
        donothing=function(...) {
            return(eval(expr))
        },
        abort=function(...) {
            message("aborting")
            return(NULL)
        }
    )    
}
data(AirPassengers)
autoArimaFailsafe(x=AirPassengers)
autoArimaFailsafe(x="a") 
```

## 示例 2

```
require("forecast")
autoArimaFailsafe <- function(
    x,
    warning=function(w, ...) {
        message("autoArimaFailsafe> warning")
        invokeRestart("donothing")},
    error=function(e, ...) {
        message("autoArimaFailsafe> error")
        invokeRestart("abort")},
    condition=function(cond, ...) {
        out <- NULL
        message(cond)
        condmsg     <- conditionMessage(c=cond)
        condclass   <- class(cond)
        if (any(class(cond) == "simpleWarning")) {
            out <- warning(w=cond)
        } else if (any(class(cond) == "simpleError")) {
            out <- error(e=cond)
        } else if (any(class(cond) == "simpleCondition")) {
            if (condmsg == "invalid class: character") {
                out <- invokeRestart("forcedefault")
            }
        }
        return(out)
    }
) {
    withRestarts(
        out <- tryCatch(
           {
                expr <- expression(auto.arima(x=x))
                if (class(x) == "character") {
                    expr <- signalCondition(
                        simpleCondition("invalid class: character", 
                            call=as.call(expr))
                    )
                }
                return(eval(expr))
           },
           condition=condition
        ),
        donothing=function(...) {return(eval(expr))},
        abort=function(...) {
            message("aborting")
            return(NULL)
        },
        forcedefault=function(...) {
            data(AirPassengers)
            expr <- expression(auto.arima(x=AirPassengers))
            return(eval(expr))
        } 
    )
}
autoArimaFailsafe(x=AirPassengers)
autoArimaFailsafe(x=NULL)
autoArimaFailsafe(x="a") 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T21:02:05.287

[这篇](https://stat.ethz.ch/pipermail/r-help//2013-February/347056.html)文章引用了 R 条件处理的灵感。

对于 1.，我认为`simpleCondition`可以说明如何构建自定义条件，例如。

```
 myCondition <-
    function(message, call=NULL, type=c("overflow", "underflow", "zero"))
{
    type <- match.arg(type)             # only allowed types past here
    class <- c(type, "my", "condition")
    structure(list(message = as.character(message), call = call), 
        class = class)
} 
```

是用于制作自定义条件的构造函数

```
> myCondition("oops")
<overflow: oops>
> myCondition("oops", type="underflow")
<underflow: oops> 
```

这些条件可用于`tryCatch`或`withCallingHandlers`

```
xx <- tryCatch({
    signalCondition(myCondition("oops", type="underflow"))
}, underflow=function(e) {
    message("underflow: ", conditionMessage(e))
    NA # return value, assigned to xx
}) 
```

这些是 S3 类，因此可以具有线性层次结构——`bad`并且`worse`都是`error`.

```
myError <-
    function(message, call=NULL, type=c("bad", "worse"))
{
    type <- match.arg(type)
    class <- c(type, "error", "condition")
    structure(list(message=as.character(message), call=call),
              class=class)
} 
```

也可能会创建一个错误，将“simpleError”S3 类扩展为`cond <- simpleError("oops"); class(cond) = c("myerr", class(cond)`

我们只需`tryCatch`访问单个处理程序，第一个（在 ?tryCatch 中描述的意义上）匹配条件类

```
tryCatch({
    stop(myError("oops", type="worse"))
}, bad = function(e) {
    message("bad error: ", conditionMessage(e))
}, worse = function(e) {
    message("worse error: ", conditionMessage(e))  # here's where we end up
}, error=function(e) {
    message("error: ", conditionMessage(e))
}) 
```

只要`withCallingHandlers`我们不调用重新启动，我们就有机会点击多个处理程序

```
withCallingHandlers({
    stop(myError("oops", type="bad"))
}, bad = function(e) {                             # here...
    message("bad error: ", conditionMessage(e))
}, worse = function(e) {
    message("worse error: ", conditionMessage(e))
}, error=function(e) {                             # ...and here...
    message("error: ", conditionMessage(e))
})                                                 # ...and top-level 'error'

withCallingHandlers({
    x <- 1
    warning(myError("oops", type="bad"))
    "OK"
}, bad = function(e) {                     # here, but continue at the restart
    message("bad warning: ", conditionMessage(e))
    invokeRestart("muffleWarning")
}, worse = function(e) {
    message("worse warning: ", conditionMessage(e))
}) 
```

我不太确定你的问题2；我认为这是调用处理程序旨在解决的情况——一旦您调用重新启动，调用条件的整个帧都准备好等待继续。

# ajax - 移动应用 - 跨域 AJAX

> ID：15363005
> 
> 赞同：2
> 
> 时间：2013-03-12T13:47:57.530
> 
> 标签：ajax, cordova, mobile, sencha-touch, cross-domain

我正在尝试设计一些要*在私人移动设备*（Android、iOS 等）上分发的软件。

我想用 HTML/CSS/JavaScript 编写软件，并使用[Sencha Touch](http://www.sencha.com/products/touch)、[PhoneGap](http://phonegap.com/)或类似的东西。

该软件需要写入设备上的本地数据库，当它获得连接时，将数据（安全地）发布到Web 服务器上*的远程数据库。*

我相信我的问题是将数据发布到服务器。据我所知，AJAX 可以使用 JSONP 跨域请求数据，但不能发送数据（至少不能使用 POST 方法）。

**这可以使用 JavaScript 完成吗？也许 Sencha Touch、PhoneGap 或其他移动应用程序编译解决方案具有原生存储和跨域发布方法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:24:35.197

JSONP 在技术上是一个 hack。[如果您可以控制 Web 服务， CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)是实现跨域调用的正确方法。 [这](http://blogs.msdn.com/b/carlosfigueira/archive/2012/07/02/cors-support-in-asp-net-web-api-rc-version.aspx)是一篇很棒的文章，解释了如何在 Web API 中启用 CORS 支持。如果您使用其他一些技术来开发您的 Web 服务，您可以从 Internet 获得大量关于如何启用 CORS 的信息。

# asp.net - 使用 psexec 通过 aspnet_regiis -config+ 启用 asp.net 远程访问：找不到文件？

> ID：15363008
> 
> 赞同：0
> 
> 时间：2013-03-12T13:48:24.317
> 
> 标签：asp.net, configuration, psexec

我需要以编程方式启用对未启用远程访问的各种服务器的远程配置访问。

我需要启用远程访问，读取 machine.config，然后再次禁用它。

我正在尝试按照此问题的答案中所述使用 psexec：[如何在远程计算机中执行命令？](https://stackoverflow.com/questions/428276/how-to-execute-a-command-in-a-remote-computer)

但是该`aspreg_iis -config+`命令返回一个文件未找到错误：

> psexec \\server "c:\...Net 4 路径...\aspnet_regiis -config+"
> 
> 该系统找不到指定的文件。

谁能指出我在这里做错了什么？

如果不支持，还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:29:47.303

好吧，这非常简单：只需省略引号：

> psexec \server c:...Net 4 路径...\aspnet_regiis -config+

它工作正常。

# wpf - 如何使用来自 XAML 的 order by

> ID：15363010
> 
> 赞同：0
> 
> 时间：2013-03-12T13:48:28.640
> 
> 标签：wpf, xaml, charts, wpf-controls

我创建了一个饼图来显示我的 RAM 利用率（usedRam 和 availableRam）。我曾经`System.Windows.Controls.DataVisualization.Charting`创建饼图。`usedRam`和的值`availableRam`被填充到我的名为 的数据库表中`RamUsage`。

我想在我的饼图上`usedRam`显示最新值。`availableRam`如何在 XAML 中实现这一点？我现在不能触摸后面的代码，因为我已经使用 EntityFramework 拖放将饼图放在我的视图上。

饼图的 XAML：

```
<dvc:Chart Background="White" Foreground="Black" Name="chart3">
<dvc:PieSeries DependentValueBinding="{Binding Path=Available}"
  IndependentValueBinding="{Binding Path=Used}" 
  ItemsSource="{Binding Source={StaticResource serverRamUsagesViewSource}}" />
</dvc:Chart> 
```

输出是

![输出](../Images/2a4168c6ffd7b597c422f9aa2ff9222a.png)

**编辑**

我想显示来自 XAML 的 RamUsage 的最新值。

例如

```
select top 1 [RamID],[Used],[Available] from dbo.RamUsage order by [RamID] desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:58:38.140

我已将 DependentValueBinding、IndependentValueBinding 更改为 DependentValuePath 和 IndependentValuePath。还要确保绑定是否正确发生。如果您的绑定没有数据，那么您将看不到结果

```
<dvc:PieSeries DependentValuePath="Available" 
        IndependentValuePath="Used" ItemsSource="{Binding Source={StaticResource serverRamUsagesViewSource}}"  /> 
```

# c# - Spring 表达式和可为空的值

> ID：15363011
> 
> 赞同：1
> 
> 时间：2013-03-12T13:48:33.340
> 
> 标签：c#, .net, spring.net

我将 Spring.Core dll 与 [ExpressionEvaluator](http://www.springframework.net/doc-latest/reference/html/expressions.html)一起使用。

我的简单代码：

```
public void ComputedFields()
{
  var finance = new Finance();
  ExpressionEvaluator
    .SetValue(
      finance, 
      "FieldToBeSet", 
      ExpressionEvaluator
        .GetValue(
          finance, 
          "SomeNullableFinanceField.GetValueOrDefault(1)"));

  Assert.AreEqual(finance.FieldToBeSet, 1);
} 
```

引发以下异常：

> 具有指定数量和类型的参数的方法`GetValueOrDefault`不存在。

`Finance`是一个简单的 poco`SomeNullableFinanceField`字段的类型`decimal?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:41:12.097

Spring.net ExpressionEvaluator 不知道 .net Nullable 类型，因此它不会尝试查找和调用 GetValueOrDefault 方法，因为 SomeNullableFinanceField 为 null。

如果 SomeNullableFinanceField 不为 null，它会尝试在 SomeNullableFinanceField 值（十进制）上调用 GetValueOrDefault。

你应该修改你的表达：

```
ExpressionEvaluator
    .GetValue(
      finance, 
      "SomeNullableFinanceField != null ? SomeNullableFinanceField : 1"); 
```

或者

```
ExpressionEvaluator
    .GetValue(
      finance, 
      "{SomeNullableFinanceField, 1}.nonNull()[0]"); 
```

# php - 在 For 循环中对对象数组进行排序

> ID：15363012
> 
> 赞同：-2
> 
> 时间：2013-03-12T13:48:33.850
> 
> 标签：php, arrays, sorting, foreach, usort

大家好，我有一个多个数组。我正在使用这样的代码。

它在没有循环的情况下进行测试时会工作一段时间。当我在循环中调用它时，它会在 ajax 调用中显示一个内部服务器。并且没有给我任何回应。

```
 function sortarraybykey_returns($oldarray)
                   {

  if (count($oldarray) > 1)
    {

        function cmpreturns($a, $b)
        {
            if ($a->staff_distance_value < $b->staff_distance_value)
            {
                return -1;
            } elseif ($a->staff_distance_value == $b->staff_distance_value)
            {
                return 0;
            } else
            {
                return 1;
            }
        }

        usort($oldarray, "cmpreturns");
    }

    return $oldarray;
}

 Array
(
    [0] => stdClass Object
        (
            [ID] => 1
            [name] => Mary Jane
            [count] => 420
        )

    [1] => stdClass Object
        (
            [ID] => 2
            [name] => Johnny
            [count] => 234
        )

    [2] => stdClass Object
        (
            [ID] => 3
            [name] => Kathy
            [count] => 4354
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:53:54.573

您已经在函数中定义了一个函数。由于一个函数只能定义一次，`sortarraybykey_returns`第二次调用将导致致命错误（`Fatal error: Cannot redeclare cmpreturns()`）。这很可能是您遇到的问题。尝试`cmpreturns`在`sortarraybykey_returns`.

```
function cmpreturns($a, $b)
{

  if ($a->staff_distance_value < $b->staff_distance_value)
  {
      return -1;
  }

  elseif ($a->staff_distance_value == $b->staff_distance_value)
  {
      return 0;
  }

  else
  {
      return 1;
  }

}

function sortarraybykey_returns($oldarray)
{

  if (count($oldarray) > 1)
  {
    usort($oldarray, "cmpreturns");
  }

  return $oldarray;

} 
```

# c# - 普通 Web 服务和 REST Web 服务的 GET 操作差异

> ID：15363016
> 
> 赞同：0
> 
> 时间：2013-03-12T13:48:52.820
> 
> 标签：c#, asp.net, web-services, rest

我对正常和 REST Web 服务的 GET 操作有疑问。我了解 REST 服务基于 HTTP VERBS。因此，对于一个实体，如果有几个 GET 方法，它将如何区分。

下面是基本服务的例子

```
public class CustomerService
{
  public List<Customer> GetCustomers()
  {
     //returns all customers
  }

  public List<Customer> GetCustomersWhoHaveOrdersAndOtherFilterCriteria(int orderid,string name)
  {
     //returns filtered customers
  }
} 
```

如果是普通的 Web 服务，可以通过 CustomerService/GetCustomers 或 CustomerService/GetCustomersWhoHaveOrdersAndOtherFilterCriteria/23 调用，但是 REST Web 服务怎么样，我假设应该有一个 GET 操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:00:29.513

1）在“普通”网络服务中——如果你指的是 SOAP，你永远不会使用 GET——所有请求都包含在 POST 中

2) REST Url 应包含对资源的引用 - 例如，客户不要操作，因此结果 url 可能`CustomerService/Customers`用于 http 方法 GET

3) 对于 orderid 和 name 参数有更多选项：

```
CustomerService/Customers/orderid/123/name/MyName001
CustomerService/Customers?orderid=123&name=MyName001 
```

和更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:59:02.700

你说得对`Rest services are based on HTTP verbs`。但是还有一件事是`Rest services are basically Resource based and Resources are nothing but the Url.`
所以你可以做的是你可以创建不同的 uri 模板来访问不同的服务

```
CustomerApi/Customer --  HTTP GET -- GET All Customers
CustomerApi/Customer/FilterID -- HTTP GET -- Get filter customer 
```

# javascript - dojo 中 this.own() 方法的使用

> ID：15363019
> 
> 赞同：18
> 
> 时间：2013-03-12T13:49:03.397
> 
> 标签：javascript, dojo

我想知道 dojo 小部件中“this.own()”方法的意图。Dojo Api 1.8 文档中提到了此方法，例如在 diijit/form/button 下。我在谷歌上没有找到任何对我有意义的东西。这就是提到该方法的方式：

> **连接（对象，事件，方法）**
> 
> 已弃用，将在 2.0 中删除，请改用 this.own(on(...)) 或 this.own(aspect.after(...)) 。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-12T14:28:23.863

该`own`函数在 中定义`dijit/Destroyable`，它是`dijit/_WidgetBase`大多数小部件的基础。

> dijit/Destroyable 用于跟踪实例的句柄，然后在实例被销毁时销毁它们。应用程序必须在实例上调用 destroy() 才能释放句柄

[http://dojotoolkit.org/reference-guide/1.8/dijit/Destroyable.html](http://dojotoolkit.org/reference-guide/1.8/dijit/Destroyable.html)

[http://dojotoolkit.org/reference-guide/1.8/dojo/Evented.html](http://dojotoolkit.org/reference-guide/1.8/dojo/Evented.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-27T15:52:31.743

简短的回答是：`.own()`一旦小部件本身被销毁，您在内部定义的大部分内容都会被正确删除。使用`.own()`可防止应用程序中的内存泄漏。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-05T10:21:02.923

> 要从页面中删除小部件，您可以在小部件上调用destroy 或destroyRecursively。
> 
> 当您这样做时，您使用 this.own 添加的任何内容（dojo/on、dojo/aspect、dojo/topic、dojo/router、相关 DOM 节点或小部件的创建等）都将被删除和/或取消注册自动地。这是通过 dijit/Destroyable 接口实现的。

[理解-WidgetBase-own-td4002453.html](http://dojo-toolkit.33424.n3.nabble.com/Understanding-WidgetBase-own-td4002453.html)
[相关教程](http://dojotoolkit.org/documentation/tutorials/1.8/understanding_widgetbase/)

# php - 如何在php中拆分从右到左的字符串

> ID：15363020
> 
> 赞同：1
> 
> 时间：2013-03-12T13:49:05.060
> 
> 标签：php, right-to-left

在我的 php 代码中，我需要拆分一个阿拉伯字符串。但是，当我复制字符串时，它会从左到右方向写入，并且 split 函数会反向拆分字符串。php中有没有办法说使字符串在rtl方向上正确拆分？

```
$text="انا احمد.";

$mysplit = mb_split(' ',$text); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:01:36.287

虽然你的问题有点模糊。似乎[array_reverse](http://php.net/manual/en/function.array-reverse.php)是您正在寻找的。

```
$text="انا احمد.";
$mysplit = mb_split(' ',$text);
$mysplit = array_reverse($mysplit); 
```

[CodeViper 演示。](http://codepad.viper-7.com/Ak75Y2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:10:12.897

实际上`\u200e`在字符串前面添加，将其标记为从左到右。那么你也许可以在不需要反转数组的情况下拆分它。

对于从右到左标记的字符是`\u200f`

# java - Spring中用户依赖的bean定义

> ID：15363023
> 
> 赞同：1
> 
> 时间：2013-03-12T13:49:09.723
> 
> 标签：java, spring, integration-testing

我正在创建一个基于 Spring 的 Web 应用程序，在其中我使用 Spring 将服务的实现添加到定义的接口。到目前为止，如此标准。工作正常。

我想允许用户在运行时为他的会话覆盖应用程序行为。为此，我希望 spring 根据用户会话更改接口背后的实现。

一个用例是在 INT 上运行的自动测试用例，应该测试系统创建的电子邮件的输出。在 INT 上，配置了一个电子邮件服务，将电子邮件发送到我们的邮件服务器。我不希望测试用例必须使用邮件协议检查邮件。我希望如果自动测试用例正在运行以更改电子邮件实现以将电子邮件作为对 HTML 的注释写入，因此我的测试可以轻松检查结果。因此还有更多这样的情况，在特殊情况下更改实现 bean 会很好。

春天是否有一个概念可以帮助我实现这样的功能，还是我必须自己创建？

附加信息：这都是关于自动化验收测试的。这些测试在我们与手动测试人员共享的系统上运行。=> 手动测试人员希望为他们的测试收到一封真实的电子邮件 => 自动测试通过不接收电子邮件来降低复杂性，只需检查具有较少依赖性的电子邮件内容。没有问题，如果我们有两个系统，一个为人类需求配置，一个为自动化测试需求配置。但事实并非如此，所以我需要一种方法来改变运行时的系统行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:11:05.427

它通常通过以下方式完成：

1.  使用 spring-test 模块设置测试，该模块允许您创建用于测试的 spring 上下文并将 bean 注入测试类，
2.  使用与生产相同的上下文文件进行测试，除了创建一个单独的弹簧配置文件，其中默认邮件服务实现被模拟替换，
3.  编写一个测试用例，在其中模拟用户以编程方式完成的步骤，最后断言类似`assertEquals("<expected_email_text>", mailServiceMock.getLastEmail())`.

从您的问题来看，尚不清楚您为什么会偏离上述标准方法。如果您解释了您的原因，也许会更容易提出适当的答案。

# c# - 如何更改 ListView 中 TextBlock 中选定的文本颜色？

> ID：15363026
> 
> 赞同：5
> 
> 时间：2013-03-12T13:49:14.170
> 
> 标签：c#, xaml, windows-8, visual-studio-2012, .net-4.5

我正在构建一个 Windows 8 商店应用程序，但无法更改 ListView 中 TextBlock 的突出显示/选定颜色 a。

这是我创建 ListView 的方式：

```
<ListView x:Name="zonesList" HorizontalAlignment="Left" Height="516" Margin="50,175,0,0" ItemTemplate="{StaticResource LocalizationCellSample}" VerticalAlignment="Top" Width="355" DataContext="{Binding}" SelectionChanged="zonesList_SelectionChanged"/> 
```

我的数据绑定：

```
<DataTemplate x:Key="LocalizationCellSample">
  <Grid HorizontalAlignment="Left">
    <TextBlock Style="{StaticResource ListBoxTextStyle}" TextWrapping="Wrap" Width="200" MaxHeight="20" VerticalAlignment="Center" Text="{Binding name}" HorizontalAlignment="Left" Margin="20,5,0,0" FontFamily="Global User Interface"/>
  </Grid>
</DataTemplate> 
```

最简单的方法是什么？

编辑：

这是 ListBoxTextStyle

```
<Style x:Key="ListBoxTextStyle" TargetType="TextBlock">
  <Setter Property="FontFamily" Value="Segoe UI Light" />
  <Setter Property="FontSize" Value="16" />
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-10T10:48:04.657

[![将 ItemContainerStyle 添加到 ListView](../Images/777dcd68b3ad3aa1587b23a991166986.png)](https://i.stack.imgur.com/wQJjU.png)

在 Visual Studio 的“DocumentOutline”面板中添加`ItemContainerStyle`如图所示的内容。然后编辑`VisualState`如下：

```
<VisualState x:Name="Selected">
    <Storyboard>
        <ColorAnimation Duration="0" To="Red" Storyboard.TargetProperty="(ContentPresenter.Foreground).(SolidColorBrush.Color)"
                        Storyboard.TargetName="contentPresenter" />
    </Storyboard>
</VisualState>
<VisualState x:Name="SelectedUnfocused">
    <Storyboard>
        <ColorAnimation Duration="0" To="Red" Storyboard.TargetProperty="(ContentPresenter.Foreground).(SolidColorBrush.Color)" 
                        Storyboard.TargetName="contentPresenter" />
    </Storyboard>
</VisualState> 
```

通常，默认情况下`"contentPresenter"`会添加`ItemContainerStyle`。的变化，文本的颜色会改变`Foreground`。`"contentPresenter"`

至于`Background`选中`ListViewItem`的，和上面差不多。

顺便说一句，它`WP8.1`至少适用于 。如果你这样做`Blend`，它会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:44:55.840

您可以尝试将其添加到 Common 文件夹中的 standardstyles.xaml 文件中：

```
<SolidColorBrush x:Key="ListViewItemSelectedBackgroundThemeBrush" Color="#009ACD"></SolidColorBrush>
        <SolidColorBrush x:Key="ListViewItemPointerOverBackgroundThemeBrush" Color="#CCC"></SolidColorBrush>
        <SolidColorBrush x:Key="ListViewItemSelectedPointerOverBackgroundThemeBrush" Color="#00688B"></SolidColorBrush>
        <SolidColorBrush x:Key="ListViewItemSelectedPointerOverBorderThemeBrush" Color="Black" Opacity="0"></SolidColorBrush> 
```

在您的资源字典标签内

所以它看起来像这样：

```
<ResourceDictionary.ThemeDictionaries>
    <ResourceDictionary x:Key="Default">

        <SolidColorBrush x:Key="ListViewItemSelectedBackgroundThemeBrush" Color="#009ACD"></SolidColorBrush>
        <SolidColorBrush x:Key="ListViewItemPointerOverBackgroundThemeBrush" Color="#CCC"></SolidColorBrush>
        <SolidColorBrush x:Key="ListViewItemSelectedPointerOverBackgroundThemeBrush" Color="#00688B"></SolidColorBrush>
        <SolidColorBrush x:Key="ListViewItemSelectedPointerOverBorderThemeBrush" Color="Black" Opacity="0"></SolidColorBrush>

    </ResourceDictionary>

</ResourceDictionary.ThemeDictionaries> 
```

这样，列表视图中的所有项目在被选中时都会获得某种颜色等

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-26T09:26:13.797

在您的 StandardStyles.xaml 文件中添加下面提到的代码并更改您想要的颜色：

```
 <SolidColorBrush x:Key="ListViewItemSelectedForegroundThemeBrush" Color="Red" /> 
```

# ios - 我的应用程序委托可以用作 UIViewControllers (MVC) 的控制器吗

> ID：15363027
> 
> 赞同：1
> 
> 时间：2013-03-12T13:49:17.110
> 
> 标签：ios, objective-c, model-view-controller, design-patterns, uinavigationcontroller

**应用程序委托可以充当整个应用程序的所有 UIViewController 之间的粘合剂吗？**

我正在创建一个邮件客户端，其导航结构非常类似于[sparrow](http://www.sparrowmailapp.com/)（和 fb 等）。第一个屏幕将是一个登录屏幕......然后将导致一个`UITableViewController`具有[著名](https://stackoverflow.com/questions/14602989/multiple-layered-split-view-like-sparrow-app)的左侧菜单按钮，如果单击它会显示下面的其他 VC。

长话短说，现在是我的应用程序代表在运行这个节目。它决定是否在第一次访问时显示登录屏幕，或者默认邮箱及其[子视图](https://github.com/pyro2927/JPStackedViewController)。如果我从一个子视图中获取信息，它将将该信息传递给应用程序委托，该委托又将其传递给其他视图控制器。

从 MVC 的角度来看，这是正确的吗？我知道应用程序代表是第一个联系点，它启动了应用程序，但我还没有看到它广泛使用它。我只是想确定我是否在这里遵循 iOS MVC 最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:00:02.400

不建议这样做，但这样做是完全合法的。我通常使用主视图控制器类并在其中完成大部分繁重的工作。请记住，如果您使用 Core Data，XCode 会将大部分自动生成的代码转储到应用程序委托中，因此如果您使用 Core Data，导航可能会有些困难。不过，这实际上只是个人喜好。如果是我，我仍然会让应用程序委托执行登录屏幕与主屏幕逻辑，但将大部分应用程序逻辑放在主屏幕控制器中。

# linq - ASP.Net MVC 将 Sql 转换为 Linq

> ID：15363031
> 
> 赞同：3
> 
> 时间：2013-03-12T13:49:19.680
> 
> 标签：linq, entity-framework

我正在更新一个旧应用程序，以使用 EF 和 Linq。我在使用其中一个查询时遇到问题 - 在 SQL 中它是：

```
SELECT    id, type_id, rule_name, rule_start, rule_end, rule_min
FROM      Rules
WHERE     (rule_min > 0) 
          AND (rule_active = 1) 
          AND (rule_fri = 1) 
          AND ('2012-01-01' BETWEEN rule_start AND rule_end) 
          AND (id IN
                      (SELECT      rule_id
                        FROM       RulesApply
                        WHERE      (type_id = 3059)))
ORDER BY pri 
```

到目前为止，我有：

```
 var rules = db.Rules.Include("RulesApply")
                .Where(t => (t.rule_active == 1)
                    && (t.rule_min > 0)
                    && (dteFrom >= t.rule_start && dteFrom <= t.rule_end)
                    && (this is where I'm stuck)
                    )
                    .OrderBy(r => r.pri); 
```

这是我坚持添加到上面的 LINQ 中的最后一个子查询：

```
AND (id IN
(SELECT      rule_id
FROM       RulesApply
WHERE      (type_id = 3059))) 
```

型号有：

```
public class Rule
{
    [Key]
    public Int64 id { get; set; }
    public Int64 hotel_id { get; set; }
    public byte rule_active { get; set; }
    public DateTime rule_start { get; set; }
    public DateTime rule_end { get; set; }
    public int rule_min { get; set; }
    public int pri { get; set; }
    public virtual ICollection<RuleApply> RulesApply { get; set; }
}

public class RuleApply
{

    [Key, Column(Order = 0)]
    public Int64 type_id { get; set; }
    [Key, Column(Order = 1)]
    public Int64 rule_id { get; set; }
    [ForeignKey("rule_id")]
    public virtual Rule Rule { get; set; }
} 
```

谁能帮我完成这个查询？

谢谢，

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:16:35.613

尝试这样做：

```
var rules = db.Rules.Include("RulesApply")
                .Where(t => (t.rule_active == 1)
                    && (t.rule_min > 0)
                    && (dteFrom >= t.rule_start && dteFrom <= t.rule_end)
                    && t.RulesApply.Any(a => a.type_id == 3059)
                    .OrderBy(r => r.pri); 
```

如果`t.RulesApply`是非法的（即无法编译），则将其替换为对`Rules`指向该`RulesApply`对象的对象上的导航属性的正确引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T15:01:22.777

如果您在实体之间设置了导航属性，则可以从一个导航到另一个：

```
//This gets the RulesApply object
var rulesapply = db.RulesApply.Single(x=> x.type_id == 3059);

//This gets all Rules connected to the rulesapply object through its navigational property
var rules = rulesapply.Rules;

//You can use LINQ to further refine what you want
rules = rules.Where( x=> /* and so on...*/ ); 
```

您可以将这些语句堆叠在一行中，我只是为了便于阅读而将它们分开 :)

# r - ggplot2：如何为由不同颜色的线连接的点指定多种填充颜色

> ID：15363035
> 
> 赞同：8
> 
> 时间：2013-03-12T13:49:25.873
> 
> 标签：r, colors, plot, ggplot2

我是新手`ggplot2`。我想创建一个线图，上面有点，这些点用与线不同的颜色填充（见下图）。 ![在此处输入图像描述](../Images/8d99f4d020edcb78b7d28db6950e1e6e.png) 假设我正在使用的数据集是以下数据集：

```
set.seed(100)
data<-data.frame(dv=c(rnorm(30), rnorm(30, mean=1), rnorm(30, mean=2)), 
                 iv=rep(1:30, 3), 
                 group=rep(letters[1:3], each=30)) 
```

我尝试了以下代码：

```
p<-ggplot(data, aes(x=iv, y=dv, group=group,  pch=group)) + geom_line() + geom_point()

p + scale_color_manual(values=rep("black",3))+ scale_shape(c(19,20,21)) + 
scale_fill_manual(values=c("blue", "red","gray"))

p +  scale_shape(c(19,20,21)) + scale_fill_manual(values=c("blue", "red","gray")) 
```

但我没有得到我想要的。我希望有人能指出我正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T13:54:46.507

`scale_fill_manual()`,`scale_shape_manual()`并且`scale_colour_manual()`只有当你有设置时才能使用`fill=`，`shape=`或者`colour=`在`aes()`.

要仅为您应该在调用`colour=group`内部添加的点更改颜色。`geom_point()`

```
 ggplot(data, aes(x=iv, y=dv, group=group,shape=group)) + 
    geom_line() + geom_point(aes(colour=group)) +
    scale_shape_manual(values=c(19,20,21))+
    scale_colour_manual(values=c("blue", "red","gray")) 
```

![在此处输入图像描述](../Images/52a4df0a33c26aca330bfbb0b16945cd.png)

# jquery-datatables - 数据表排序 varchar

> ID：15363042
> 
> 赞同：0
> 
> 时间：2013-03-12T13:49:40.930
> 
> 标签：jquery-datatables

当我在 MSSQL Studio 中尝试查询时，我有一个 SQL 查询正在拉回正确排序的结果。

我正在使用来自 Datatables.net 的数据表，除了排序问题之外，一切都很好。我在第一列中有一些属性，我想像这样订购这些：

```
1
1a
1b
2
3
4a
5
etc 
```

然而回来的是这样的：

```
1
10
100
11
11a 
```

我看过各种帖子，但似乎没有任何效果，我相信这一定是我应该从数据表插件触发但找不到任何东西。

有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:13:13.793

您的数据包含数字和字符，因此默认情况下它们将被排序为字符串。您应该编写自己的插件来对数据类型进行排序。查看[此处](http://www.datatables.net/plug-ins/sorting)和[此处](http://www.datatables.net/development/sorting) ，了解如何编写插件以及如何将其与您的表一起使用。

编辑：今天有时间处理数据表的东西。如果您仍然需要解决方案，请执行以下操作：

```
//Sorting plug-in
jQuery.extend( jQuery.fn.dataTableExt.oSort, {
    //pre-processing
    "numchar-pre": function(str){
        var patt = /^([0-9]+)([a-zA-Z]+)$/;    //match data like 1a, 2b, 1ab, 100k etc.
        var matches = patt.exec($.trim(str));
        var number = parseInt(matches[1]);     //extract the number part
        var str = matches[2].toLowerCase();    //extract the "character" part and make it case-insensitive
        var dec = 0;
        for (i=0; i<str.length; i++)
        {
         dec += (str.charCodeAt(i)-96)*Math.pow(26, -(i+1));  //deal with the character as a base-26 number
        }
        return number + dec;       //combine the two parts
    },

    //sort ascending
    "numchar-asc": function(a, b){
        return a-b;
    },

    //sort descending
    "numchar-desc": function(a, b){
        return b-a;
    }
});

//Automatic type detection plug-in  
jQuery.fn.dataTableExt.aTypes.unshift(
   function(sData)
   {
        var patt = /^([0-9]+)([a-zA-Z]+)$/;
        var trimmed = $.trim(sData);
        if (patt.test(trimmed))
        {
            return 'numchar';
        }
        return null;
    }
 ); 
```

可以使用自动类型检测功能让自动检测数据类型也可以设置列的数据类型

`"aoColumns": [{"sType": "numchar"}]`

# delphi - Indy 10 + SSL = 适用于 Windows 7，不适用于 XP

> ID：15363043
> 
> 赞同：3
> 
> 时间：2013-03-12T13:49:43.607
> 
> 标签：delphi, openssl, jetty, indy, indy10

我正在使用 Indy 10 Http Client（最新的 SVN 构建）和 SSL 处理程序（Delphi 7）来获取[https://www.webtide.com/choose/jetty.jsp](https://www.webtide.com/choose/jetty.jsp)网站的内容。

它在 Windows 7 x64（在两个系统上测试）上运行良好，但在 WindowsXP x86（在 3 个系统上测试）上，测试应用程序只是挂在 TIdHTTP.Get() 上而没有恢复的可能性（意味着甚至在工作程序中断开连接/thread 不起作用！）。测试应用无法恢复，必须使用任务管理器关闭。

SSL 库（32 位 x86！）来自这里：[http](http://slproweb.com/products/Win32OpenSSL.html) ://slproweb.com/products/Win32OpenSSL.html 但我尝试了来自不同站点的 5 个其他版本，结果相同。

这是一个包含源代码、编译后的可执行文件和 SSL 库的 zip 包：

[https://www.dropbox.com/s/pd5soxon0qbnnl0/IndyTest.zip](https://www.dropbox.com/s/pd5soxon0qbnnl0/IndyTest.zip)

这是源代码（表单有一个按钮和两个备忘录）：

```
 procedure TForm1.Button1Click(Sender: TObject);
 var IdHTTP1: TIdHTTP;
     sl : TStringList;
     SSL1: TIdSSLIOHandlerSocketOpenSSL;
 begin
   try
    try
      IdHTTP1 := TIdHTTP.Create(nil);
      sl := TStringList.Create;

      SSL1 := TIdSSLIOHandlerSocketOpenSSL.Create(nil);
      SSL1.SSLOptions.Method := sslvSSLv23;

      with IdHTTP1 do
      begin
           ConnectTimeout := 10 * 1000;
           ReadTimeout := 10 * 1000;
           IOHandler := SSL1;

           Request.UserAgent := 'Mozilla/5.0 (X11; U; Linux i586; en-US; rv:1.7.3) Gecko/20040924 Epiphany/1.4.4 (Ubuntu)';
           Memo2.Text := 'connecting...';
           Application.ProcessMessages;
           Memo1.Text := Get('https://www.webtide.com/choose/jetty.jsp');
           Memo1.Lines.Add ('response: '+ResponseText);
           Memo2.Text := 'connected or timeout...';
      end;
    except
      On e: Exception do
           Memo2.Text := 'Exception: '+e.Message;
    end;
   finally
      IdHTTP1.Free;
      SSL1.Free;
      sl.Free;
   end;
 end; 
```

为什么它在 WindowsXP 上崩溃/挂起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:02:32.380

Indy 的`ConnectTimeout`属性只适用于`connect()`建立底层 TCP/IP 连接时的套接字 API 函数。 `SSL_connect()`稍后调用以启动 SSL 握手，这是应用程序数据，因此不受`ConnectTimeout`.

Indy 确实使用其`ReadTimeout`属性在 OpenSSL 连接上分配套接字级别的读/写超时，但仅在 Vista+ 上作为 OpenSSL 错误的解决方法。在 XP 和更早版本上，应用默认的套接字读/写超时。唯一告诉 Indy在`ReadTimeout`读取数据时要等待多长时间，但它并不应用于套接字本身。如果你想这样做，你可以通过`TIdSocketHandle.SetSockOpt()`在建立 TCP/IP 连接之后但在开始 SSL 握手之前调用方法来手动完成，例如：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  IdHTTP1: TIdHTTP;
  SSL1: TIdSSLIOHandlerSocketOpenSSL;
begin
  try
    IdHTTP1 := TIdHTTP.Create(nil);
    try
      SSL1 := TIdSSLIOHandlerSocketOpenSSL.Create(IdHTTP1);
      SSL1.SSLOptions.Method := sslvSSLv23;

      with IdHTTP1 do
      begin
        ConnectTimeout := 10 * 1000;
        ReadTimeout := 10 * 1000;
        IOHandler := SSL1;

        OnConnected := IdHTTPConnected;
        OnStatus := IdHTTPStatus;

        Request.UserAgent := 'Mozilla/5.0 (X11; U; Linux i586; en-US; rv:1.7.3) Gecko/20040924 Epiphany/1.4.4 (Ubuntu)';

        Memo1.Text := Get('https://www.webtide.com/choose/jetty.jsp');
        Memo1.Lines.Add('response: '+ ResponseText);

        Memo2.Text := 'finished...';
      end;
    finally
      IdHTTP1.Free;
    end;
  except
    on e: Exception do
      Memo2.Text := 'Exception: ' + e.Message;
  end;
end;

procedure TForm1.IdHTTPStatus(ASender: TObject; const AStatus: TIdStatus; const AStatusText: string);
begin
  case AStatus of
    hsResolving: Memo2.Text := 'resolving...';
    hsConnecting: Memo2.Text := 'connecting...';
    hsConnected: Memo2.Text := 'connected...';
    hsDisconnecting: Memo2.Text := 'disconnecting...';
    hsDisconnected: Memo2.Text := 'disconnected...';
  end;
  Update;
end;

procedure TForm1.IdHTTPConnected(Sender: TObject);
begin
  with TIdHTTP(Sender).Socket.Binding do
  begin
    SetSockOpt(Id_SOL_SOCKET, Id_SO_RCVTIMEO, 10 * 1000);
    SetSockOpt(Id_SOL_SOCKET, Id_SO_SNDTIMEO, 10 * 1000);
  end;
end; 
```

# shell - 如何用shell替换/替换二进制文件中的字节

> ID：15363044
> 
> 赞同：1
> 
> 时间：2013-03-12T13:49:48.670
> 
> 标签：shell, byte, block, dd, substitution

是否可以在循环中使用**dd将二进制文件****myfile**中的字节从一个特定位置替换为另一个位置，还是使用另一个命令更舒服？

 **这个想法是在循环**中用****位置**1的块**A**替换位置2的块**B。**

 ********伪代码**

```
 @ l = 0

  while (l <= bytelength of myfile)
      copy myfile (from position1 to A+position1)  myfile from (position2 to B+position2)
      @ position1 = position1+steplength
      @ position2 = position2+steplength
      @ l = l+steplength

  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:44:35.530

文本文件中的以下代码行将大致完成您所要求的（我认为）：将文件从一个位置复制到另一个位置，但将一个位置的字节块替换为另一个位置的块；它`dd`按要求使用。但是，它确实创建了一个单独的输出文件——这对于确保没有冲突是必要的，无论“输入”块是否出现在“替换”块之前或之后。请注意，如果 A 和 B 之间的距离小于要替换的块的大小，它将不会执行任何操作 - 这将导致重叠，并且不清楚您是否希望重叠区域中的字节为“结束A”或“A 副本的开始”。

将其保存在一个名为 的文件中`blockcpy.sh`，并将权限更改为包含`execute`（例如`chmod 755 blockcpy.sh`）。运行它

```
./blockcpy.sh inputFile outputFile from to length 
```

请注意，“from”和“to”偏移量的基数为零：因此，如果要复制从文件开头开始的字节，则`from`参数为 0

这是文件内容：

```
#!/bin/bash
# blockcpy file1 file2 from to length
# copy contents of file1 to file2
# replacing a block of bytes at "to" with block at "from"
# length of replaced block is "length"
blockdif=$(($3 - $4))
absdif=${blockdif#-}
#echo 'block dif: ' $blockdif '; abs dif: ' $absdif
if [ $absdif -ge $5 ]
  then
    # copy bytes up to "to":
    dd if=$1 of=$2 bs=$4 count=1 status=noxfer 2>0
    # copy "length" bytes from "from":
    dd bs=1 if=$1 skip=$3 count=$5 status=noxfer 2>0 >> $2
    # copy the rest of the file:
    rest=$((`cat $1 | wc -c` - $4 - $5))
    skip=$(($4 + $5))
    dd bs=1 if=$1 skip=$skip count=$rest status=noxfer 2>0 >> $2
    echo 'file "'$2'" created successfully!'
  else
    echo 'blocks A and B overlap!'
fi 
```

“ `2>0`'nix 魔法”抑制来自 stderr 的输出，否则会显示在输出中（类型：“ `16+0 records in`”）。********

# android - 内容适配器和异步回调

> ID：15363045
> 
> 赞同：1
> 
> 时间：2013-03-12T13:49:49.450
> 
> 标签：android, android-asynctask, kinvey

我正在使用第三方云服务 (Kinvey) 为我的应用获取数据。所有服务的 Kinvey 方法都包装在异步类中。我目前在下面收到错误日志，我明白为什么会收到它。我只是不知道如何解决这个问题。

**错误 ：**

```
03-12 13:41:03.449: E/AndroidRuntime(18375): FATAL EXCEPTION: main

03-12 13:41:03.449: E/AndroidRuntime(18375): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2130968661, class android.widget.ListView) with Adapter(class com.example.chartviewer.LazyAdapter)] 
```

这是我在异步方法中删除内容后通知适配器的代码段：

```
mKinveyClient.appData("artistdata", ArtistData.class).delete(artistID, new KinveyDeleteCallback() {

       @Override
        public void onSuccess(KinveyDeleteResponse result) {

              Log.e("DELEET", "Data Deleted sucessfully");
              Toast.makeText(getBaseContext(),
                      "Artist Deleted", Toast.LENGTH_SHORT).show();

                //refreshes list 
            adapter.notifyDataSetChanged(); 

           //displays dialog box if no artists left 
           displayNoArtist();

        }
        @Override
        public void onFailure(Throwable error) {
             Log.e("DELETE", "AppData.delete Failure", error);
        }
    }); 
```

更新适配器：

```
mKinveyClient.appData("artistdata", ArtistData.class).get(myQuery, new 
KinveyListCallback<ArtistData>() {
         @Override
         public void onSuccess(ArtistData[] result) {

              Log.e("FETCHING", "Data fetched sucessfully");
             for (ArtistData data : result) {

                 String name= data.getArtistname();
                 String imageurl = data.getArtisturl();

                 String id = data.getArtistid();

                 artistIds.add(id);

                  HashMap<String, String> hashMap = new HashMap<String, String>();

                  hashMap.put(TAG_NAME, name);
                  hashMap.put(TAG_IMAGEURL, imageurl);

                  addMyArtists(hashMap);

             }

             displayData();

         }

         @Override
         public void onFailure(Throwable error) {

             Log.e("FETCHING", "AppData.get by Query Failure", error);

         }
     }); 
```

适配器创建者代码：

```
 list = (ListView)findViewById(R.id.artistlist);
      adapter = new LazyAdapter(MyArtistsActivity.this,"artists", artistItemList);
      list.setAdapter(adapter);
      registerForContextMenu(list); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:04:26.640

免责声明：我是 Kinvey 工程团队的成员。

问题是您在从 Kinvey 后端删除之前从 artistItemList 中删除，然后在回调之前不调用 adapter.notifyDatasetChanged。这会导致您在等待来自后端 Kinvey 删除调用的回调时注意到底层数据集发生变化的延迟。您需要将这两个调用组合在一起，并以以下两种方式之一进行：

1.  使您传递给 delete 方法的艺术家 ID 成为最终的，并在 onSuccess 中，在调用 adapter.notifyDatasetChanged 之前从 artistItemList 中删除该项目。
2.  在调用 kinveyClient.appData().delete() 方法之前调用adapter.notifyDatasetChanged，在从artistItemList 中删除项目之后立即调用。如果在 Kinvey 后端删除失败，此选项可能会导致问题。

# performance - 如何让 Selenium WebDriver 运行数小时（CHO）而不导致崩溃/OutOfMemory 问题？

> ID：15363050
> 
> 赞同：5
> 
> 时间：2013-03-12T13:50:08.460
> 
> 标签：performance, testing, selenium, selenium-webdriver, webautomation

我正在使用 selenium-2.30.0 运行一个运行多个小时（约 8 小时）的单个测试（在 Windows 上）。我使用的是 FF 驱动程序，但它在 45 分钟或更短的时间内耗尽了内存，并且测试执行挂起。我无法使用 HTMLUnitDriver（我认为纯 Java 解决方案是答案）以与 FF 驱动程序相同的方式运行（因为它需要等待页面加载并且我绝对不想在我的代码中放置随机线程休眠或通过扩展 HTMLUnitDriver 来实现任何新功能）。

*   我不能将测试用例分解为多个较小的单元。
*   当我看到大量内存使用时，我无法重新加载驱动程序

有什么办法可以让这个工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:47:13.693

我找到了这个链接：[creating-firefox-profile-for-your-selenium-rc-tests](http://girliemangalo.wordpress.com/2009/02/05/creating-firefox-profile-for-your-selenium-rc-tests/)，& 很有帮助。使用绝对最低设置创建了一个新的 Firefox 配置文件，并且测试在过去 4 小时内一直运行没有问题。非常感谢你们的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:55:14.093

你在做什么样的测试？Selenium 主要用于验收测试。听起来您尝试做的更像是对系统的浸泡测试。

如果是这样的话，看看[JMeter](http://jmeter.apache.org/)，它更适合这种类型的工作。然而，这两种技术之间的一个相当显着的区别是 JMeter 在协议（HTTP 请求）级别上工作，而不是 Selenium 使用呈现的 HTML。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T20:24:25.427

什么会崩溃，您的 Java 测试代码或 Firefox 本身？如果是 Java 测试代码，那么您确定您没有泄漏内存吗？或者内存泄漏可能在服务器端？

# android - 使用 android.net.Uri 进行自定义 URI 解析

> ID：15363053
> 
> 赞同：0
> 
> 时间：2013-03-12T13:50:10.790
> 
> 标签：android, uri

假设我有一个自定义 URI 格式，例如`aaa:<ID>`ID 是一个整数。

我想用`android.net.Uri.parse(String)`方法在我的android应用程序中解析它：

```
Uri uri = Uri.parse("aaa:12345"); 
```

正如预期的那样`aaa`，可以通过`uri.getScheme()`.

但是我找不到任何方法来访问该`12345`部分，尽管我希望它由`uri.getPath()`or `uri.getAuthority()`（两者都返回`null`）返回。

URI 似乎符合[RFC 2396](http://www.ietf.org/rfc/rfc2396.txt)，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:02:56.880

该`12345`部分可以通过`uri.getSchemeSpecificPart()`

# java - Java 内置类到接口

> ID：15363063
> 
> 赞同：2
> 
> 时间：2013-03-12T13:50:41.213
> 
> 标签：java, class, interface, built-in

你能创建一个继承java内置类所有功能的接口吗？

我正在尝试做的事情：

我有很多扩展 Fragment 的类，在这些类中有一些属性（get、set）和一些函数。在制作了不同类的对象后，我将它们放在一个通用的片段列表中。

但是我想介绍多态性：1个接口类和所有其他类都实现了它，因此它们可以覆盖函数。

但问题是，如果我想使用多态性，我需要一个接口，并且接口应该是一个 Fragment，所以我仍然可以将这些 Fragment 放入一个列表中，那么我可以从 Fragment 类创建一个接口还是该接口可以继承从碎片？

在图像上你可以看到当前的情况

![当前的](../Images/4ffa94c435e8a88c4d05f4b9d0e4c017.png)

## 更新

这是一些代码来显示我想要实现的目标：

所以我有我的主要功能，它是一个 xmlSAXParser，当我遇到一个标签时，我创建了一个正确类的对象：

```
case template:
        switch (typeObjecten.toType(atType)) {
        case NOVALUE:
            break;
        case chapter:
            chapter = new ChapterFragment();
            typeObject = "chapter";
            break;
        case execute:
            execute = new ExecuteFragment();
            typeObject = "execute";
            break;
        case first:
            first = new FirstFragment();
            typeObject = "first";
            break; 
                              ... 
```

当我找到结束标记时，我将正确的对象添加到列表中：

```
case template:
        switch (typeObjecten.toType(typeObject)) {

        case NOVALUE:
            break;
        case chapter:
            fragments.add(ownFrag);
            break;
        case execute:
            fragments.add(execute);
            break;
        case first:
            fragments.add(first);
            break;
        case navigation:
            fragments.add(navigation);
            break;
        case story:
            fragments.add(story);
            break;
                          .... 
```

也有可能在每个类中背景都可能改变，现在我必须检查对象是哪个类来调用正确的函数：

```
case background:

        if (typeObject.equalsIgnoreCase("navigation")) {
            navigation.setBackgroundColor("#" + text);
        } else if (typeObject.equalsIgnoreCase("chapter")) {
            //chapter.setBackgroundColor("#" + text);
        } else if (typeObject.equalsIgnoreCase("first")) {
            ownFrag.setBackgroundColor("#" + text);
            first.setBackgroundColor("#" + text);
        } else if (typeObject.equalsIgnoreCase("execute")) {
            execute.setBackgroundColor("#" + text);
        } else if (typeObject.equalsIgnoreCase("story")) {
            story.setBackgroundColor("#" + text);
        } else if (typeObject.equalsIgnoreCase("intro")) {
            intro.setBackgroundColor("#" + text);
        } else if (typeObject.equalsIgnoreCase("mission")) {
            mission.setBackgroundColor("#" + text);
        } else if (typeObject.equalsIgnoreCase("question")) {
            question.setBackgroundColor("#" + text);
        } else if (typeObject.equalsIgnoreCase("info")) {
            info.setBackgroundColor("#" + text);
        }
        break;
                   ... 
```

因此，如果我可以制作一个“全局”片段然后程序自己找出它必须从哪个类调用哪个函数（多态性？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:00:13.743

另一种选择是使 Fragment 抽象并让您的类扩展它。然后，如果可能，您还可以添加一些共享功能。

根据您的评论，片段是内置类且不可编辑，似乎有几个选项。您可以引用一般扩展片段的对象 <? extends Fragment> 或通过在 Fragment 上创建一个包装类来保存和维护它的实例。这会给你更多的控制权。

一个简单的示例可能如下所示。

```
class CannotModify{
    public void doSomething(){}
}

public interface AddThisIfYouWant{
    public void doSomething();
}

public class Wrap extends CannotModify, implements AddThisIfYouWant{
    private final CannotModify yourInstance;

    public Wrap(){
        this.yourInstance=new CannotModify();
    }

    @Override
    public void doSomething(){
        super.doSomething();
    }

} 
```

如果您只需要在片段级别引用您的对象，您也可以扩展片段。例如：

```
public class AnotherFragment extends Fragment{...}

...
public void somethingWithFragments(List<? extends Fragment> fragments){
    for(Fragment fragment:fragments){
        ...
    }
}
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:14:04.307

**根据 Fragment 是内置类的信息进行了编辑。**

您的基本问题的答案是：不，在 Java 中，您不能扩展具有新行为的预定义类（例如，使其实现另一个接口）。例如，您可以在 Objective-C 中做到这一点。但在您的情况下，您似乎不需要它。

定义一个 Fragment 的子类，它具有您需要的行为，并实现您需要它实现的接口，并从该子类派生您的其他类。

**老答案：**

你自己已经给出了答案：

> 但问题是，如果我想使用多态性，我需要一个接口，并且接口应该是一个 Fragment

正如您现在绘制的类图，Fragment 类没有数据，也没有默认行为，因此根本没有理由将其作为所有其他类的基类。只需将 Fragment 定义为一个接口（使用您需要的方法声明），并为它们实现该接口的其他类指定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:54:16.173

您应该为 Fragment 创建一个接口并让所有类扩展该接口

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:59:42.717

首先。没有接口不能扩展类，这会破坏接口的语义（仅签名）。

你可以做的是让“片段”简单地实现新创建的接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T13:59:49.110

您可以制作一个通用`FragmentInterface`接口和其他扩展它的接口`FragmentInterface`。

当您可以制作基本接口时，为什么只需要一个接口，以及扩展该基本接口的其他接口？

顺便说一句，一个类也可以实现多个`interfaces`.

# bash - bash，比较命令的输出

> ID：15363064
> 
> 赞同：5
> 
> 时间：2013-03-12T13:50:42.553
> 
> 标签：bash, comparison, arguments

我正在尝试做这样的事情：

```
 if [ $(wc -l $f) -lt 2 ] 
```

其中 $f 是一个文件。当我运行它时，我收到错误消息：

```
 [: too many arguments 
```

有人知道如何在我的命令中修复此行吗？

完整的脚本是：

```
for f in *.csv
do
  if [ $(wc -l $f) -lt 2 ]
      then
      echo $f
      fi
done 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T13:56:48.663

至少在我的情况下`wc -l filename`输出`32 filename`是 32 行数。所以你必须在行数之后去掉文件名。你可以改变你的代码

```
if [ $(wc -l $f) -lt 2 ] 
```

到

```
if [ $(wc -l $f | cut -f1 -d' ') -lt 2 ] 
```

或者

```
if [ $(wc -l < $f) -lt 2 ] 
```

如果不能解决您的问题，请将输出添加`wc -l filename`到您的问题或作为评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:56:29.400

试试这个 ：

```
 if (( $(wc -l < "$f") < 2 )) 
```

或者如果你想保持你的语法：

```
 if [ $(wc -l < "$f") -lt 2 ] 
```

## 笔记

`((...))`是一个算术命令，如果表达式非零，则返回退出状态 0，如果表达式为零，则返回 1。如果需要副作用（分配），也用作“让”的同义词。见[http://mywiki.wooledge.org/ArithmeticExpression](http://mywiki.wooledge.org/ArithmeticExpression)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:52:36.963

你需要的可能是

```
if [ `cat $f | wc -l` -lt 2 ] 
```

代替

```
if [ $(wc -l $f) -lt 2 ] 
```

# java - 代理不在 jar 中工作，但在 netbeans 中编译时工作

> ID：15363065
> 
> 赞同：1
> 
> 时间：2013-03-12T13:50:45.520
> 
> 标签：java, jar, proxy

任何人都可以帮我代理吗？

我用

```
System.getProperties().put("proxySet", "true");
System.getProperties().put("http.proxyHost", "proxy.avp.ru");
System.getProperties().put("http.proxyPort", "8080");
System.getProperties().put("http.proxyUser", "proxyUser");
System.getProperties().put("http.proxyPassword", "proxyPassword"); 
```

并在 Netbeans 中运行一切正常，但是当我使用 jar 文件创建分发包时，由于代理，应用程序无法正常工作。为什么会这样？

谢谢

# r - gzfile（文件，“wb”）中的错误：无法打开连接或压缩文件

> ID：15363076
> 
> 赞同：27
> 
> 时间：2013-03-12T13:51:13.480
> 
> 标签：r, statistics, gzip

我正在尝试运行两件事：首先，我正在创建一个 4x5 的 PDF，以 dev.off() 结尾，然后尝试创建一个新图形。但是，在开始第二个情节后，我得到：

```
Error in gzfile(file, "wb") : cannot open the connection
In addition: Warning message:
In gzfile(file, "wb") :
  cannot open compressed file '/var/folders/n9/pw_dz8d13j3gb2xgqb6rfnz00000gn/T/RtmpTfm1Ur/rs-graphics-822a1c83-b3fd-46c3-8028-4e0778f91d0c/4db4b438-ac35-403b-b791-e781baba152c.snapshot', probable reason 'No such file or directory'
Graphics error: Error in gzfile(file, "wb") : cannot open the connection 
```

这是什么错误？工作目录是我具有读/写访问权限的目录，而我的硬盘驱动器未满。

另外，我正在使用 RStudio。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-05-02T18:53:02.960

这有点晚了，但是对于任何来这里寻求帮助的人来说，当我尝试从 RStudio 写入文件并且我的目标文件路径很长时，我遇到了这个错误。我意识到这可能是一个问题，因为当我将文件写入另一个名称较短的位置并尝试将其复制到我的原始目的地时，Windows 给我一个错误，提示“文件路径太长”。您可能需要将原始文件保存到具有较短绝对路径的另一个位置。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-12-11T16:59:30.573

也许你应该看看[这里](https://stat.ethz.ch/R-manual/R-devel/library/base/html/save.html)。最后它说

> 注意：最常见的失败原因是当前目录没有写权限。对于 save.image 和在会话结束时保存，这将通过如下消息显示

```
Error in gzfile(file, "wb") : unable to open connection
In addition: Warning message:
In gzfile(file, "wb") :
  cannot open compressed file '.RDataTmp',
  probable reason 'Permission denied' 
```

如此迅速，如果您尝试`getwd()`，请查看您的工作目录设置在哪里。如果您尝试将文档保存在不在当前工作目录中的位置，则会引发此错误。

在您的错误消息末尾，它说`probable reason 'No such file or directory' Graphics error: Error in gzfile(file, "wb") : cannot open the connection` 我的诊断只是它试图将您的项目保存在错误的位置，而 RStudio 无法找到正确的位置。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-11T15:39:08.350

这烧伤了我，所以希望可以为其他人节省一些劳力。问题是分类器在 OS X 上加载得很好，但在 Linux 部署系统上，它们会因问题中列出的错误而失败。问题是磁盘上的文件有扩展名`abc.RData`但代码`modelAbc <- readRDS(file="abc.Rdata")`。vs扩展中大小写的差异在`D`Linux上会失败。这不是很明显，但请检查您的扩展是否有大小写。`.RData``.Rdata`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-26T10:35:18.207

您可能没有在目录中保存文件的权限。在 RStudio 上，通过`getwd()`. 然后，进入 linux 中的目录并通过 . 观察其所有者`ls -l`。现在您可以通过 更改目录的所有者`chown -R username directoryname`。但是你必须是root。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-25T14:10:39.203

我最近遇到了这个问题。尝试关闭您的防病毒软件并构建软件包，它可能会有所帮助。它对我有用。通常防病毒软件会阻止权限，您可以通过在构建软件包之前禁用一段时间来避免它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-13T02:11:27.907

我试图将 RDS 文件保存到我的本地 Dropbox 文件夹，以便它与我的 Dropbox 同步。我发现我遇到了同样的错误，因为我试图创建一个新文件夹并且看起来 saveRDS 无法创建新文件夹，但它可以将文件添加到现有文件夹。因此，我更改了将文件添加到现有文件夹中的路径，并且成功了！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-03T01:32:47.767

就我而言，是 Windows Defender 阻止了 Rstudio 在硬盘驱动器上写入任何文件。您需要`Controlled Folder Access`关闭或在排除列表中添加 Rstudio。[![在此处输入图像描述](../Images/38f636451da57971536a8ffb1037a64a.png)](https://i.stack.imgur.com/S5UG4.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-30T21:00:10.803

通过指定完整文件路径解决的问题：

```
saveRDS(df,'C:\\users\\matt\\desktop\\code\\df.Rdata') 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-08-29T00:41:00.947

在使用 RStudio 和 R Markdown 时，我也遇到了这个问题。我收到了这个错误消息，并且有很多令人讨厌的致命错误导致 RStudio 关闭。我的问题是我正在使用网络驱动器并且名称太长，如上面的@AHedge 或我的网络防火墙给我带来了麻烦。目前，我已将工作文件移至桌面，一切似乎都运行良好。随着时间的推移，不确定这对我的文件管理意味着什么。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-17T22:01:12.370

我有同样的问题。对我来说，这是由于安装 R studio 的驱动器上没有足够的磁盘空间造成的。释放空间工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-24T11:56:22.570

错误原因是你的***用户名是中文***。请在用户目录下新建一个英文用户文件夹。例如，你可以将文件夹命名为“DavidSmith”。那么，你需要创建三个文件夹("AppData"," Local","Temp").文件目录***C:\Users\DavidSmith\AppData\Local\Temp***。在将修改环境变量 TMP 和 TEMP ***C:\Users\DavidSmith\AppData\Local\Temp***的高级系统设置中。保存它们。修改后打开RStudio再试一次。

> 注意：在 USER VARIABLE 中修改了 TMP 和 TEMP。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-20T09:13:58.427

我在更改系统区域设置后遇到了这个问题。使用 . 检查您的语言环境`Sys.getlocale()`。使用将其更改为适当的一种`Sys.setLocale("LC_ALL","ENG")`（将“ENG”替换为适当的一种）

我不能肯定地说哪种语言环境是合适的，但它似乎与默认操作系统一致。

希望这可以帮助！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-08-30T16:21:23.223

我遇到此错误是因为用于保存文件的文件名中的字符无效，在我的情况下为“/”（有许多此类字符不能在文件名中使用）。我删除了角色并解决了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-11-20T11:38:30.607

只是想为 M Beausoleil 提到的内容增加更多的清晰度（我的经验中的场景）。

当您使用共享工作目录并尝试重写已存在于其他用户编写的工作目录中的 RDS 文件时，您会收到此错误。

正如一些人已经引用的那样，删除现有的 RDS 文件或更改工作目录是可行的。这不是魔法。它之所以有效，是因为您正在编写一个新的 RDS 文件，而不是尝试重写旧文件。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-03-28T17:30:10.073

就我而言，当我尝试在 Anaconda Prompt 中退出 R 并保存工作区图像时，我收到错误“gzfile(file, "wb") 中的错误：无法打开连接”。我正在使用 Windows 10 和 R-3.5.2。要修复它，我必须转到 Program Files 文件夹，右键单击 R 文件夹，然后选择 Properties。选择安全选项卡，然后在组或用户名框中选择用户，然后单击编辑。在用户权限中，我检查了完全控制和修改并保存了更改。然后我能够保存工作区图像。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-01-10T18:39:39.860

我有另一个这个错误的实例，它似乎是新的（或者至少没有在此处或[此处](https://inneka.com/programming/r/error-in-gzfilefile-wb-cannot-open-the-connection-or-compressed-file/)列出：显然用 name 保存文件是不行的`aux.RData`。我猜这是一个保留的文件名。

```
x <- rnorm(9000)
save(x, file = "aux.RData") 
```

```
Error in gzfile(file, "wb") : no se puede abrir la conexión
Also: Warning message:
In gzfile(file, "wb") :
  cannot open compressed file 'aux.RData', probable reason 'No such file or directory' 
```

但是当我更改文件名时保存没有问题：

```
save(x, file = "aux_file.RData") 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-06-06T00:28:30.683

在其他答案中没有看到这种情况：如果这似乎一直发生，并且在发生时要非常持久，请检查文件处理软件连接中的默认目录。
在我的情况下，FileZilla 以“root”身份登录到我的 DigitalOcean droplet，每当我使用 FileZilla 创建目录时，它都会将写入权限设置为“root”，而我在同一个 droplet 上的 RStudio 读取/写入为“My_Name”。每当我在 FZ 中设置某些内容（例如，导入的大文件、重命名或复制）时，权限都会切换，我会收到此错误。
如果这是导致频繁错误消息的原因，则可以立即解决`chown -R My_Name directoryname`但从长远来看，如果您打算使用文件处理程序来定义和创建大量目录，那么创建一个默认名称与您用于 RStudio 的名称相同的连接将是值得的。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-06-26T02:17:53.123

就我而言，几个月前第一次发生时，[这里](https://stackoverflow.com/a/48593081/8939181)的解决方案奏效了。

但是最近，它又回来了，不断地……这次解决的是换了杀毒软件。我不仅有 Windows 防御者，还有第二个防病毒软件，两次都一样。我最终卸载了它并安装了另一个防病毒软件......在此之后，问题没有再次发生......

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-09-02T11:23:56.817

在我尝试解决同样的错误或问题几天后（Windows 10 和 R），我尝试将我的文件（file.RData）保存在 D 盘而不是 C 盘中（我一直在工作并且我已经安装了 R ) 很好，没有问题，我的文件保存在 D:/Users 中。当我多次尝试将其保存在 C 盘中时，总是给我权限被拒绝。

> 保存（我的文件，文件=“D:/Users/Myfile.RData”）

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2022-01-12T13:22:23.697

重新安装新版本的 RStudio 后，我遇到了同样的问题。我使用旧版本的 RStudio 创建的 Rmarkdown 文件显示了同样的问题。

当我使用 ggplot() 绘制图片时，错误代码如下：

```
Warning in gzfile(file, "wb") :
  cannot open compressed file 'I:/Rlearning/.Rproj.user/shared/notebooks/58A1385C-PCA作图/1/2C15461A183AC56C/cco192gb0pow1_t\_rs_rdf_32004888ecb.rdf', probable reason 'No such file or directory'
Error in gzfile(file, "wb") : cannot open the connection 
```

解决方案：

1.  创建一个新的 Rmarkdown 文件
2.  删除所有代码
3.  将旧的 Rmarkdown 代码复制到其中。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2019-12-31T21:19:32.077

就我而言，这个错误是因为我想重写的文件是只读的（无论出于何种原因，我自己都没有这样做）。我只需右键单击文件夹中的文件名并取消选中只读属性。之后它起作用了。

# nginx - Nginx 重写到服务器上的另一个路径

> ID：15363083
> 
> 赞同：0
> 
> 时间：2013-03-12T13:51:24.317
> 
> 标签：nginx, rewrite

是否可以在 nginx 中执行重写规则以重写到当前帐户之外的服务器上的另一个位置？

例如，我想重写`image123.jpg`到服务器上的位置`/dev/shm/123.jpg`。这可能吗？

我可以用 PHP 脚本抓取图像并重写，但我希望它更有效地完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:50:33.027

是的，有可能：看看[alias](http://nginx.org/en/docs/http/ngx_http_core_module.html#alias) -directive

# android - Android 按钮 onClick 显示一个 AlertDialog 应用程序崩溃

> ID：15363086
> 
> 赞同：0
> 
> 时间：2013-03-12T13:51:36.173
> 
> 标签：android, fonts, dialog, message, alert

当我按下提交按钮时，我试图显示一个 AlertDialog。

```
Button submit = (Button) findViewById(R.id.submitButton);
            submit.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view) {
                    AlertDialog.Builder builder = new AlertDialog.Builder(Application1GoodExample.this);
                    builder.setMessage("Your form has been successfully submitted");
                    TextView textView = (TextView) findViewById(android.R.id.message);
                    textView.setTextSize(40);
                    builder.setNegativeButton("Exit", new DialogInterface.OnClickListener() {
                          public void onClick(DialogInterface dialog, int which) {
                              dialog.cancel();           
                        } });

                    builder.show();

                }

            }); 
```

我相信这与它试图访问有关`findViewById(android.R.id.message)`

我在我的 XML 文件中定义了 TextView，如下所示：

```
 <TextView android:id="@+id/message" 
        android:layout_width="285dp"
        android:layout_height="78dp" 
        android:textColor="#000000" 
        android:textSize="45sp" 
        android:gravity="center"
        /> 
```

我只想更改默认的 AlertDialog 消息“您的表单已成功提交”字体大小，但是当我按下提交按钮时我的程序崩溃了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T13:57:01.903

您正在尝试访问 android.R，只需删除“android”，它应该可以工作（您的资源在 com.yourproject.R，而不是 android.R）。

```
findViewById(android.R.id.message) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:59:15.003

首先，如果要在 XML 中为 TextView 设置文本大小，则 MainActivity 中的 setContentView() 中的布局必须包含对它的引用。其次，您应该将 android.R.id.message 替换为 R.id.message。

# autocomplete - Salesforce 中的自动完成查找字段

> ID：15363091
> 
> 赞同：0
> 
> 时间：2013-03-12T13:51:45.083
> 
> 标签：autocomplete, salesforce

我想在 Salesforce 中自动完成查找字段。

我的情况：

如果我添加一个新机会，我需要填写一个帐户名称。我添加了一个需要自动填写的顾问字段，方法是从我在“帐户名称”填写的帐户中查找默认顾问。

所以：填写账户名称 -> 自动检查账户的默认顾问 -> 在“顾问”处填写名称。

这可能吗，如果是，我该怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:59:21.977

似乎您想使用查找过滤器而不是查找自动完成。在任何一种情况下，您仍然需要手动输入值。唯一的事情是您可以在输入或单击查找图标时过滤所需的值。

对于查找自动完成，请进入设置 --> 搜索设置 --> 查找自动完成 --> 选择要启用查找自动完成的对象。

对于查找过滤器 --> 转到您要过滤的查找字段 --> 根据其他查找字段添加过滤器。

# sammy.js - Sammy.js 尾部斜杠

> ID：15363092
> 
> 赞同：1
> 
> 时间：2013-03-12T13:51:45.327
> 
> 标签：sammy.js

我有这条路线：

```
this.get('/#week/:week', function() {...}) 
```

适用于`/#week/4`但不适用于`/#week/4/`

关于如何在 Sammy.js 中保留斜杠可选的任何好主意？我现在正在尝试接近这个的正则表达式：

```
this.get(/#week\/:week\/?/, function() {...}) 
```

但没有任何成功。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T04:13:24.143

我遇到了同样的问题。可能为时已晚，但请尝试将 :week 替换为以下内容：

```
([^\/]*) 
```

然后使用

```
this.params['splat'] 
```

请参阅[http://sammyjs.org/docs/routes](http://sammyjs.org/docs/routes)，搜索 Regexp。所以你的路线是：

```
this.get(/#week\/([^\/]*)\/?/, function() {
console.log(this.params['splat']);
}) 
```

不确定如果您有多个 id，您将如何管理...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T13:00:23.240

最好的解决方案是添加`/?`，使您的

`route:this.get('/#week/:week/?', function() {...})`

# asp.net - 我可以在 ASP.NET 中使用任何 XMPP 客户端吗？

> ID：15363094
> 
> 赞同：1
> 
> 时间：2013-03-12T13:51:49.977
> 
> 标签：asp.net, azure, amazon-ec2, xmpp

是否可以或推荐使用 any`XMPP Clients`来通过 ASP.NET 发送和接收消息？我有一个 AWS EC2 微型实例、Azure Webrole 小型实例和另一个为网站保留的小型实例。我试图通过`ASP.NET & Jabber-Net`但无法实现这一目标。我不想在任何 JS 客户端上收到消息；我想处理服务器本身的消息。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:59:38.637

这没有问题。我们以前做过类似的事情。您可以代表用户创建任意数量的持久 XMPP 会话，以发送和接收 xmpp 节。我们看到的唯一问题是许多 Web 主机上的 IIS 安全限制，它们不允许您创建套接字。

另见： http: [//msdn.microsoft.com/en-us/library/330a99hc (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/330a99hc(v=vs.100).aspx) [http://msdn.microsoft.com/en-us/library/ff649312.aspx](http://msdn.microsoft.com/en-us/library/ff649312.aspx)

# php - 如何将数组拆分为可用数据，以便对其进行计数和操作

> ID：15363095
> 
> 赞同：-1
> 
> 时间：2013-03-12T13:51:54.303
> 
> 标签：php, mysql

我有这个查询：

```
SELECT carID FROM reservations WHERE startDate < '".$sqlretdate."' AND endDate > '".$sqlcoldate."' OR startDate = '".$sqlcoldate."' OR endDate = '".$sqlretdate."'" 
```

使用循环：

```
while($presentid = mysql_fetch_array($checkreservations)) { 
```

这将返回一个数据数组，例如：

```
echo "<---space-->";
print_r($presentid['carID']); 
```

会显示：

```
<---space-->11<---space-->10<---space-->2<---space-->8<---space-->9<---space-->7 
```

这是一个 id 列表，我需要对它们中的每一个做一些事情。

我可以爆炸它：

```
print_r(explode(" ", $presentid['carID'])); 
```

这将使它像这样打印：

```
Array ( [0] => 11 ) Array ( [0] => 10 ) Array ( [0] => 2 ) Array ( [0] => 8 ) Array ( [0] => 9 ) Array ( [0] => 7 ) 
```

我如何完全拆分每个 id 并将其存储到一个变量中，以便我可以使用它们来做其他事情？

在这种情况下，每个 ID 对于汽车来说都是唯一的，并且有一个与之关联的型号名称，所以我想使用该 ID 找出与其相关的型号名称，计算数据库中该型号名称的数量，然后然后检查返回的 id 有多少与该模型相关，因此还剩下多少。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:59:13.293

你不能把它存入一个基本变量而不覆盖它，除非你想保留很多变量，最好通过循环，将值存储到一个数组中，然后你可以在while循环结束后遍历数组结束了，除非你能马上对他们做点什么。

“我如何完全拆分每个 id 并将其存储到变量中”

```
while($presentid = mysql_fetch_array($checkreservations))
{
    $carId = $presentid['carID'];
    $array[] = array('id' => $carId );
} 
```

因此，一旦结束，您就可以解析数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:04:47.963

在您的`while`循环中，`$presentid`代表结果集中的每一行。 `$presentid['carID']` 不是*数组*！这是一个`carID`值。您根本*不需要*在这里使用`explode`。

```
while($presentid = mysql_fetch_array($checkreservations)) {
    // This *is* each car ID!  Do with it what you want.
    $carID = $presentid['carID'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:05:27.513

```
$ids = array();
$count = 0;
while($presentid = mysql_fetch_array($checkreservations)) {
    $ids['car_' . $count++] = $presentid['carID'];
}
extract($ids); 
```

这将为您提供自变量：

```
$car_0 = 11;
$car_1 = 12;
$car_2 = 2; 
```

..ETC

# c# - 为什么这个交叉连接在 Linq 中这么慢？

> ID：15363097
> 
> 赞同：12
> 
> 时间：2013-03-12T13:51:56.380
> 
> 标签：c#, .net, linq, cross-join

我编写了这段 Linq 来处理 CROSS Join，就像数据库在多个列表之间一样。

但是由于某种原因，当任何列表超过 3000 时，它会非常慢。我要等 30 秒？这些列表的数量可能非常大。

此查询针对与来自**ColumnDataIndex**的其他列表数据的每个关系进行循环。

有什么建议吗？

****更新** - 数据被插入到预先从配置的源构建的普通列表中。目前这一切都在记忆中。****

 **```
RunningResult[parameter.Uid] = (from source_row in RunningResult[parameter.Uid]
                            from target_row in ColumnDataIndex[dest_key]
                            where GetColumnFromUID(source_row, rel.SourceColumn) == GetColumnFromUID(target_row, rel.TargetColumn)
                            select new Row()
                            {
                                Columns = MergeColumns(source_row.Columns, target_row.Columns)

                            }).ToList(); 
```

2个额外功能：

**MergeColumns**：从 2 个项目中获取列并将它们合并到一个数组中。

```
public static Columnn[] MergeColumns(Column[] source_columns, Column[] target_columns)
{
      Provider.Data.BucketColumn[] new_column = new Provider.Data.BucketColumn[source_columns.Length + target_columns.Length];
      source_columns.CopyTo(new_column, 0);
      target_columns.CopyTo(new_column, source_columns.Length);
      return new_column;
  } 
```

**GetColumnFromUID**：返回与给定列 uid 匹配的 Item 中的列的值。

```
private static String GetColumnFromUID(Row row, String column_uid)
  {
       if (row != null)
       {
           var dest_col = row.Columns.FirstOrDefault(col => col.ColumnUid == column_uid);
           return dest_col == null ? "" + row.RowId : dest_col.Value.ToString().ToLower();
       }
       else return String.Empty;

  } 
```

更新：

**最终将数据和查询移动到数据库。这将速度降低到了毫秒数。本来可以写一个优化的循环函数，但这对我来说是最快的出路。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:41:46.527

您实际上不需要执行交叉连接。 *交叉连接本质上是昂贵的操作。* 你不应该这样做，除非你真的需要它。在您的情况下，您真正​​需要的只是内部连接。您正在执行交叉连接，这会产生大量您根本不需要的值，然后您将过滤掉这些值中的很大一部分，只留下您需要的少数值。如果您只是从一开始就进行了内部连接，那么您只会计算您需要的值。这将使您无需创建大量行，而不仅仅是将它们丢弃。

LINQ 有自己的内连接操作，`Join`所以你甚至不需要自己写：

```
RunningResult[parameter.Uid] = (from source_row in RunningResult[parameter.Uid]
                                join target_row in ColumnDataIndex[dest_key]
                                on GetColumnFromUID(source_row, rel.SourceColumn) equals
                                    GetColumnFromUID(target_row, rel.TargetColumn)
                                select new Row()
                                {
                                    Columns = MergeColumns(source_row.Columns, target_row.Columns)

                                }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:22:13.507

您不是在进行交叉连接，而是使用 ON 子句进行内部连接，仅在您的情况下，是 where 谓词中的 ON 子句。

内连接通常使用两个哈希集/表完成，因此您可以根据行 Y 中的值快速找到集合 X 中的行。

所以'weston's answer是可以的，但是你需要使用字典/哈希表来让它变得非常快。请注意，每个键可能有更多行。您可以使用像这样的多值哈希表/字典： [https ://github.com/SolutionsDesign/Algorithmia/blob/master/SD.Tools.Algorithmia/GeneralDataStructures/MultiValueDictionary.cs](https://github.com/SolutionsDesign/Algorithmia/blob/master/SD.Tools.Algorithmia/GeneralDataStructures/MultiValueDictionary.cs)**

# php - 如何使用 php 读取特定的 XML 节点

> ID：15363098
> 
> 赞同：-1
> 
> 时间：2013-03-12T13:51:57.230
> 
> 标签：php, xml

如何使用 php 5 从下面的 xml 中读取所有 int 值？

我正在尝试使用 simplexml_load_string 但无法获得确切的值。

我的php代码。

```
$xml = simplexml_load_string($result);
echo $xml->params[0]->param[0]->value[0]->array[0]->data[0]->value[0]->array[0]->data[0]->value[0]->int; 
```

XML

```
<?xml version='1.0'?>
<methodResponse>
    <params>
        <param>
            <value><array><data>
                <value><array><data>
                    <value><int>51838</int></value>
                    <value><double>57.83089533672552</double></value>
                </data></array></value>
                <value><array><data>
                    <value><int>20820</int></value>
                    <value><double>56.58239590002292</double></value>
                </data></array></value>
                <value><array><data>
                    <value><int>49286</int></value>
                    <value><double>55.950788550857176</double></value>
                </data></array></value>
                <value><array><data>
                    <value><int>51843</int></value>
                    <value><double>55.09419216830168</double></value>
                </data></array></value>
            </data></array></value>
        </param>
    </params>
</methodResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:01:49.420

```
$domObj= new DOMDocument(); 
$domObj->load("test.xml");
$value= $domObj->getElementsByTagName("value");
foreach( $value as $val) 
{ 

 $ints = $val->getElementsByTagName("int"); 
 $intVal  = $ints->item(0)->nodeValue; 

 echo "$intVal"; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:22:38.040

不会评论您的 XML 中发生的过深的嵌套。我假设你这样做是有原因的。

```
$doc = new SimpleXMLElement($xml);
$valueList = $doc->xpath('/methodResponse/params/param/value/array/data/value');
while(list(, $node) = each($valueList)) {
    $intElement = $node->xpath('array/data/value/int');
    echo $intElement[0] . PHP_EOL;
} 
```

将导致：

```
51838
20820
49286
51843 
```

`$valueList`分配了所有`value`节点的列表。第二个 xpath 查询获取`int`每个节点中的 。阅读[SimpleXMLElement](http://www.php.net/manual/en/class.simplexmlelement.php)和[xpath](http://www.php.net/manual/en/simplexmlelement.xpath.php)。

# desire2learn - 将 html 保存到“管理文件”

> ID：15363101
> 
> 赞同：0
> 
> 时间：2013-03-12T13:52:08.090
> 
> 标签：desire2learn

我在目录中链接了一个外部可编辑的 html 文件（使用 contentEditable="true" 块）。使用 Valence，我可以将该文件的编辑内容保存到该课程的“管理文件”部分吗？开始阅读 Valence 文档，但我想我会先在这里问一下，然后再在那里浪费太多时间。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:33:42.377

我不太确定你的意思到底是什么。目前，您必须通过 Valence 学习框架 API 直接访问课程内容是通过课程内容模块 - 主题结构。与上传的主题文件关联的 URL 属性将其置于“管理文件”树中，您可以使用此属性从结构中获取主题的内容。

没有 API 调用就地更新主题文件的内容；要更新它，您必须获取它，删除主题，然后将更新的文件内容重新上传到新的主题节点。这可能会留下以前的主题文件，从内容结构中取消链接。

当前的课程内容 API 设计从粗略为新课程内容的框架设计的用户场景出发，并且不一定随着时间的推移维护或更改该课程内容。增强课程内容 API 以更舒适地适应其他用例已在路线图中，但目前尚未完全安排和充实。

# mysql - 我的索引什么时候应该有活动列？

> ID：15363113
> 
> 赞同：4
> 
> 时间：2013-03-12T13:52:24.953
> 
> 标签：mysql, performance, indexing

我有几个表，我想知道我的复合索引是否有用。我正在使用`MySQL 5+`，但我想这将适用于任何数据库（或不适用？）。

无论如何，说我下表：

```
username           active
-----------------------------------
Moe.Howard              1
Larry.Fine              0
Shemp.Howard            1 
```

所以我通常选择像：

```
select * from users where username = 'shemp.howard' and active = 1; 
```

我们的`active=1`许多表格中都使用了。通常，我的索引将在`username`列上，但我正在考虑添加活动标志（到同一个索引）。

我的逻辑是，当查询引擎扫描索引时，它会扫描索引，例如：

```
moe.howard,1
shemp.howard,1
larry.fine,0 
```

并`Shemp`在它击中非活动用户（Larry）之前找到它。

现在，我们的`active`列通常是`TINYINTS`和`Unsigned`。但我担心索引可能会落后！

```
larry.fine,0
moe.howard,1
shemp.howard,1 
```

我应该如何最好地处理这个问题并确保我的索引是正确的？我不应该将活动列添加到与用户名相同的索引吗？或者我应该为活动创建一个单独的索引并使其降序？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:59:12.840

如果将复合索引中的这两个字段与`active`标志结合起来作为键的第二部分，那么索引顺序将仅在（iff）两行或多行的名称字段相同时（这在这种情况基于一个假设，即希望系统中的用户名是唯一的）。复合索引中的第一个键将定义键的顺序，只要它们不同。换句话说，如果用户名是唯一的，那么将活动标志添加为复合索引的第二段不会改变索引的顺序。

另外，请注意，对于示例查询，数据库不会“扫描”索引来查找值。相反，它将寻找第一个匹配条目，在给出的示例中，该条目由单个匹配项组成。如果多个条目通过 WHERE 子句，则会发生“扫描”。

话虽如此，除非在很多情况下您有重复的名称，否则我最初的反应是不创建复合键。如果名称“通常”是唯一的，那么您不会使用复合键节省大量成本。另一方面，如果通常有很多具有不同`active`标志值的重复名称，它可能会有所帮助。那时，您可能只需要进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:59:34.993

实际上，我们只能猜测查询优化器会尝试和做什么，但是通常建议如果索引的选择性超过 20%，那么全表扫描比索引访问更可取。这意味着即使您索引活跃，索引也很可能实际上不会被使用，因为您的活跃用户比非活跃用户多得多。

MySQL 只能按顺序使用索引，所以如果你创建一个复合索引`username,active`是完全没有意义的，因为你不会有多个用户具有相同的用户名。

您确实需要分析您的查询需求，然后您可以设计一个索引计划来适应它们。分析每个查询，不要尝试过度优化所有内容，因为这可能会产生负面结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:01:46.643

只有当您希望它帮助您过滤入/出的值在统计上具有代表性时，才应添加索引。

这意味着什么？

如果说，WHERE 子句中的过滤器，在您要索引的列上，正在帮助您检索 20% 的行，您应该在其中添加一个索引。这个百分比数字取决于您的特殊情况，应该尝试一下，但这就是想法。

在您的情况下，仅凭名称，您将获得 100% 的排除。在活动列上添加索引将无用，因为它无助于减少最终记录集（除非您可能有 n 次相同的名称但只有一个活动？）

如果您决定只过滤活跃用户，而不关心名称，情况会有所不同。

# haskell - 如何使用 yesod 在 html 页面上显示 curl 结果？

> ID：15363126
> 
> 赞同：1
> 
> 时间：2013-03-12T13:49:31.227
> 
> 标签：haskell, curl, yesod

我想使用haskell中的yesod框架在html页面中发布curl命令的结果。这是我到目前为止的代码：

```
{-# LANGUAGE TypeFamilies, QuasiQuotes, MultiParamTypeClasses,
         TemplateHaskell, OverloadedStrings #-}
import Yesod
import Network.Curl
import Text.Blaze hiding (toMarkup)

data HelloWorld = HelloWorld

mkYesod "HelloWorld" [parseRoutes|
/ HomeR GET
|]

url = "http://www.google.com/"
opts = [CurlFollowLocation True]

res=withCurlDo $ do
            curlGet url opts
            return ()

instance ToMarkup (IO a) where
toMarkup a = a

instance Yesod HelloWorld

getHomeR :: Handler RepHtml
getHomeR = defaultLayout [whamlet|#{toMarkup res}|]

main :: IO ()
main = warpDebug 3000 HelloWorld 
```

此代码启动带有警告的服务器

```
Warning: No explicit method nor default method for `Text.Blaze.toMarkup'
In the instance declaration for `ToMarkup (IO a)' 
```

并将网络浏览器指向

```
http://localhost:3000 
```

它在上述警告消息中以 HTML 页面的形式给出“内部服务器错误”。

我对 Haskell 和 Yesod 还很陌生……有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:53:21.887

您的缩进是错误的`toMarkup`（应该缩进）。但是类型仍然是错误的。`toMarkup`应该返回一个`Markup`实例并将`curlGet`输出转储到标准输出，而您想要捕获它并重新渲染它。

尝试这样的事情：

```
{-# LANGUAGE TypeFamilies, QuasiQuotes, MultiParamTypeClasses, TemplateHaskell, OverloadedStrings #-}
import Yesod
import Network.Curl

data HelloWorld = HelloWorld

mkYesod "HelloWorld" [parseRoutes|
      / HomeR GET
    |]

url = "http://www.google.com/"
opts = [CurlFollowLocation True]

instance Yesod HelloWorld

getHomeR = do
    (code, res) <- liftIO $ curlGetString url opts        
    -- This doesn't work since Yesod HTML-escapes the content in the template
    -- defaultLayout [whamlet|#{res}|]
    return $ RepHtml $ toContent res

main :: IO ()
main = warpDebug 3000 HelloWorld 
```

作为 curl 的替代方案，您还可以使用[*http-conduit*包](http://www.yesodweb.com/book/http-conduit)。导入`Net.HTTP.Conduit`，你可以写成`getHomeR`：

```
getHomeR = fmap (RepHtml . toContent) . liftIO $ simpleHttp "http://www.google.com" 
```

# iframe - 使用 getElementById 刷新 iframe 父页面

> ID：15363128
> 
> 赞同：2
> 
> 时间：2013-03-12T13:52:59.150
> 
> 标签：iframe, get

当 iframe 包含指定的 div id 时，是否可以只刷新一次 iframe 父页面？

我在父页面上试过这个但没有用：

```
if document.frames('myiframe').(document.getElementById("iframedivID") !== null) { window.location.href = "mysite.com"; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:00:59.253

加载内部文档需要时间。所以我们必须等到内部文档被加载，一旦加载，就可以访问内部 div。这是我的示例 HTML 和 javascript 代码。因此，第一次，您可能会在警报中获得**null 。**希望这可以帮助。

**测试.html**

```
<iframe id="iframedivID" src="Test1.html"></iframe> 
```

**测试1.html**

```
<div id='myDiv'>My name is ravindra</div>
<script type="text/javascript">
    if (window.parent.window.location.href.toString().indexOf("?refresh") == -1){
        window.parent.window.location.href="Test.html?refresh";
    }
</script> 
```

# nagios - Nagios 时间段和通知期

> ID：15363130
> 
> 赞同：7
> 
> 时间：2013-03-12T13:53:11.660
> 
> 标签：nagios

我无法让 Nagios 在预定义的时间段内遵守 notification_period 设置。

我的时间段定义称为“睡眠”，如在午夜和早上 7 点之间不要通知我。它看起来像这样：

```
 define timeperiod{
    timeperiod_name sleep
    alias           Not Middle of Night
    sunday          07:00-23:59
    monday          07:00-23:59
    tuesday         07:00-23:59
    wednesday       07:00-23:59
    thursday        07:00-23:59
    friday          07:00-23:59
    saturday        07:00-23:59
    } 
```

我为主机输入了如下指令：

```
define host{
    use             linux-server,host-pnp
    host_name       server.domain.com
    alias           server.domain.com
    address         xxx.33.xxx.243
    notification_period     sleep
    } 
```

今天早上我期待看到警告通知，但只是在早上 7 点之后。相反，我在昨晚 23:59 到今天早上 7 点之间的整个晚上都看到了他们。

我对配置的理解是，在这段时间里我不应该收到任何电子邮件。

我忽略了什么吗？我希望它会这么简单，但它没有按预期工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T17:43:43.587

由于对 Nagios 的配置方式缺乏了解，我已经解决了这个问题。简而言之，如果需要，自定义服务检查需要自定义 notification_period 指令。

问题在这里被提出并正确回答：

[Nagios 论坛：notification_period 在主机配置上不被尊重？](http://support.nagios.com/forum/viewtopic.php?f=7&t=9680)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:15:45.383

只是一个提示。请检查 Nagios 服务器上的时间和时区设置。您的配置对我来说看起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T02:35:36.587

而不是将其添加到您的所有服务检查中。您可以将其添加到您的联系人或联系人组中，其中包含在此期间应通知的电子邮件地址。我对两个不同的组基本上做同样的事情，因为我们是 24X7 的。美国组在 EST 白天收到通知，亚洲组在晚上收到通知。为每个人节省了大量不必要的警报垃圾邮件。

# ruby-on-rails - 从 Rails 日志中删除 ping 或可用性监视器 - Heroku

> ID：15363136
> 
> 赞同：0
> 
> 时间：2013-03-12T13:53:24.650
> 
> 标签：ruby-on-rails, logging, heroku, ping, newrelic

如何从运行在 Heroku 上的 Rails 应用程序的日志中轻松删除或过滤来自 New Relic 可用性监视器的请求？

由于他们每 30 秒左右 ping 一次应用程序，因此我的日志数据被 ping 严重污染。我想将它们从日志中排除，只检查 New Relic 报告的可用性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:09:41.733

这个 Rack::Middleware 可以提供帮助。它将使您配置的任何 URL 静音：[https ://github.com/spagalloco/silencer](https://github.com/spagalloco/silencer)

# python - for循环中python变量的范围

> ID：15363138
> 
> 赞同：50
> 
> 时间：2013-03-12T13:53:29.437
> 
> 标签：python, for-loop, scope

这是我遇到问题的 Python 代码：

```
for i in range (0,10):
    if i==5:
        i+=3
    print i 
```

我预计输出是：

```
0
1
2
3
4
8
9 
```

然而，解释器吐出：

```
0
1
2
3
4
8
6
7
8
9 
```

我知道`for`循环为 C 中的变量创建了一个新范围，但不知道 Python。为什么Python`i`中循环中的值不变，有`for`什么补救措施来获得预期的输出？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-12T13:56:44.103

for 循环遍历 中的所有数字`range(10)`，即`[0,1,2,3,4,5,6,7,8,9]`。
您更改 的*当前*值`i`对范围内的下一个值没有影响。

您可以使用 while 循环获得所需的行为。

```
i = 0
while i < 10:
    # do stuff and manipulate `i` as much as you like       
    if i==5:
        i+=3

    print i

    # don't forget to increment `i` manually
    i += 1 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-12T14:11:13.583

# 类比 C 代码

你想象你`for-loop`在 python 中的代码就像这个 C 代码：

```
for (int i = 0; i < 10; i++)
    if (i == 5)
        i += 3; 
```

它更像是这个 C 代码：

```
int r[] = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
for (int j = 0; j < sizeof(r)/sizeof(r[0]); j++) {
    int i = r[j];
    if (i == 5)
        i += 3;
} 
```

所以`i`在循环中修改并没有你期望的效果。

# 反汇编示例

你可以看一下[python代码的反汇编](http://docs.python.org/2/library/dis.html)来看看这个：

```
>>> from dis import dis
>>> def foo():
...     for i in range (0,10):
...         if i==5:
...             i+=3
...         print i
... 
>>> dis(foo)
  2           0 SETUP_LOOP              53 (to 56)
              3 LOAD_GLOBAL              0 (range)
              6 LOAD_CONST               1 (0)
              9 LOAD_CONST               2 (10)
             12 CALL_FUNCTION            2
             15 GET_ITER            
        >>   16 FOR_ITER                36 (to 55)
             19 STORE_FAST               0 (i)

  3          22 LOAD_FAST                0 (i)
             25 LOAD_CONST               3 (5)
             28 COMPARE_OP               2 (==)
             31 POP_JUMP_IF_FALSE       47

  4          34 LOAD_FAST                0 (i)
             37 LOAD_CONST               4 (3)
             40 INPLACE_ADD         
             41 STORE_FAST               0 (i)
             44 JUMP_FORWARD             0 (to 47)

  5     >>   47 LOAD_FAST                0 (i)
             50 PRINT_ITEM          
             51 PRINT_NEWLINE       
             52 JUMP_ABSOLUTE           16
        >>   55 POP_BLOCK           
        >>   56 LOAD_CONST               0 (None)
             59 RETURN_VALUE        
>>> 
```

这部分[创建一个 0 到 10 之间的范围](http://docs.python.org/2/library/dis.html#opcode-CALL_FUNCTION)并实现它：

```
 3 LOAD_GLOBAL              0 (range)
          6 LOAD_CONST               1 (0)
          9 LOAD_CONST               2 (10)
         12 CALL_FUNCTION            2 
```

此时，堆栈的顶部包含范围。

这[会在堆栈顶部的对象上获得一个迭代器](http://docs.python.org/2/library/dis.html#opcode-GET_ITER)，即范围：

```
 15 GET_ITER 
```

此时，堆栈顶部包含已实现范围的迭代器。

FOR_ITER使用堆栈顶部的迭代器[开始迭代循环：](http://docs.python.org/2/library/dis.html#opcode-FOR_ITER)

```
 >>   16 FOR_ITER                36 (to 55) 
```

此时，栈顶包含迭代器的下一个值。

在这里您可以看到[堆栈的顶部被弹出并分配给`i`](http://docs.python.org/2/library/dis.html#opcode-STORE_FAST)：

```
 19 STORE_FAST               0 (i) 
```

所以`i`无论你在循环中做什么都会被覆盖。

如果您以前没有见过，这里是[堆栈机器的概述。](http://en.wikipedia.org/wiki/Stack_machine)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-12T13:57:19.757

Python 中的 for 循环实际上是一个 for-each 循环。在每个循环开始时，`i`设置为迭代器中的下一个元素（`range(0, 10)`在您的情况下）。的值`i`在每个循环开始时重新设置，因此在循环体中更改它不会更改其下一次迭代的值。

也就是说，`for`您编写的循环等效于以下 while 循环：

```
_numbers = range(0, 10) #the list [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
_iter = iter(_numbers)
while True:
    try:
        i = _iter.next()
    except StopIteration:
        break

    #--YOUR CODE HERE:--
    if i==5:
        i+=3
    print i 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-12T14:05:08.980

如果由于某种原因您确实想将 add 3 更改为`i`等于`5`，并跳过下一个元素（这是在 C 3 元素中推进指针的一种），那么您可以使用迭代器并从中消耗一些位：

```
from collections import deque
from itertools import islice

x = iter(range(10)) # create iterator over list, so we can skip unnecessary bits
for i in x:
    if i == 5:             
        deque(islice(x, 3), 0) # "swallow up" next 3 items
        i += 3 # modify current i to be 8
    print i

0
1
2
3
4
8
9 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-02-23T11:19:46.270

在 python 2.7 range 函数中创建一个列表，而在 python 3.x 版本中它创建一个“范围”类对象，它只能迭代而不是列表，类似于 python 2.7 中的 xrange。

不是当您迭代 range(1, 10) 时，最终您是从列表类型对象中读取数据，并且每次到达 for 循环时 i 都会采用新值。

这类似于：

```
for i in [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]:
    if i==5:
        i+=3
    print(i) 
```

更改值不会更改列表中的迭代顺序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T13:56:33.357

我每次迭代都会重置，所以你在循环中对它做了什么并不重要。它做任何事情的唯一时间是当 i 为 5 时，然后它加 3。一旦它循环回来，它就会将 i 设置回列表中的下一个数字。您可能想在`while`这里使用 a 。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-12T13:56:40.593

Python 的`for`循环只是循环提供的值序列——将其视为“foreach”。因此，修改变量对循环执行没有影响。

[这在教程](http://docs.python.org/2/tutorial/controlflow.html#for-statements)中有很好的描述。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-12T16:27:16.440

```
it = iter(xrange (0,10))
for i in it:
    if i==4: all(it.next() for a in xrange(3))
    print i 
```

或者

```
it = iter(xrange (0,10))
itn = it.next
for i in it:
    if i==4: all(itn() for a in xrange(3))
    print i 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-02-23T11:04:33.063

您可以对`for`循环进行以下修改：

```
for i in range (0,10):
    if i in [5, 6, 7]:
        continue
    print(i) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-07T03:46:26.217

在我看来，类似的代码不是 while 循环，而是一个 for 循环，您可以在运行时在其中编辑列表：

```
originalLoopRange = 5
loopList = list(range(originalLoopRange))
timesThroughLoop = 0
for loopIndex in loopList:
    print(timesThroughLoop, "count")
    if loopIndex == 2:
        loopList.pop(3)
        print(loopList)
    print(loopIndex)
    timesThroughLoop += 1 
```

# c# - 如何在对象列表中收集单个属性？

> ID：15363140
> 
> 赞同：6
> 
> 时间：2013-03-12T13:53:32.700
> 
> 标签：c#, .net, oop, reflection, code-generation

是否可以创建扩展方法来返回对象列表中的单个属性或字段？

目前我有很多功能，如下所示。

```
public static List<int> GetSpeeds(this List<ObjectMotion> motions) {
    List<int> speeds = new List<int>();
    foreach (ObjectMotion motion in motions) {
        speeds.Add(motion.Speed);
    }
    return speeds;
} 
```

这是“硬编码”的，并且仅在单个对象类型中提供单个属性。它很乏味，我确信有一种方法可以使用 LINQ/Reflection 创建一个扩展方法，该方法可以以通用且可重用的方式执行此操作。像这样的东西：

```
public static List<TProp> GetProperties<T, TProp>(this List<T> objects, Property prop){
    List<TProp> props = new List<TProp>();
    foreach (ObjectMotion obj in objects) {
        props.Add(obj.prop??);
    }
    return props;
} 
```

除了使用 LINQ 的最简单方法外，我还在寻找最快的方法。是否可以在运行时使用代码生成（和 Lambda 表达式树）来创建这样的方法？我相信这会比使用反射更快。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T13:56:09.347

是的，不需要反思：

```
List<int> values = motions.Select(m=>m.Speed).ToList(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T13:59:16.537

你可以这样做：

```
public static List<TProp> GetProperties<T, TProp>(this IEnumerable<T> seq, Func<T, TProp> selector)
{
    return seq.Select(selector).ToList();
} 
```

并像这样使用它：

```
List<int> speeds = motions.GetProperties(m => m.Speed); 
```

值得怀疑的是，这种方法是否比直接使用`Select`and更好`ToList`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:00:15.913

我认为 for 循环是最快的，紧随其后的是 linq （如果你不使用闭包，开销最小）。我无法想象任何其他机制会比这更好。

您可以将 替换为`List<int>`a`int[]`或使用特定容量初始化列表。这可能比其他任何事情都更能加快您的代码速度（尽管仍然不多）。

# xcode4.5 - 替换整个项目文件中的 NSLog

> ID：15363142
> 
> 赞同：1
> 
> 时间：2013-03-12T13:53:35.807
> 
> 标签：xcode4.5

与所有 iOS 项目一样，我的项目有大量`NSLogs`. 我想切换到，`DLog`因为我将宏用于调试模式。如何`NSLogs`在整个项目中替换为`DLog`？Xcode中是否有任何快捷方式可以做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:56:29.110

`perl`从命令行（Terminal.app）使用：

```
$ cd /path/to/project/source
$ perl -pi -e 's/NSLog/DLog/' *.m *.mm 
```

# ios - 当应用程序进入前台时，如何从 uiwebview 中打开的 html 页面调用 javascript 函数？

> ID：15363146
> 
> 赞同：0
> 
> 时间：2013-03-12T13:53:44.593
> 
> 标签：ios, uiwebview

我`uiwebview`在我的应用程序中使用在应用程序中显示 html 页面。`javascript`当应用程序从后台进入前台时，我想在 html 页面中调用函数。我试过使用`stringByEvaluatingJavaScriptFromString`没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:59:00.203

如果您遇到一些问题，最好显示您的代码，并且如果您正确使用 webview 及其委托，那么它应该正确调用方法，这就是我调用 jscript 方法的方式，它一直有效

```
[ self.myWebView stringByEvaluatingJavaScriptFromString: @"callJsMethod();" ]; 
```

或向 jscript 方法发送值

```
 [self.myWebView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"callJScriptMethod('%d')", argInteger]]; 
```

# windows-phone-8 - 尝试从代码访问情节提要资源时出错

> ID：15363148
> 
> 赞同：1
> 
> 时间：2013-03-12T13:53:51.193
> 
> 标签：windows-phone-8

我团队中的一位开发人员对我们在 WinPhone 8 中使用的控件进行了一些重构，该控件表示可以翻转的卡片。

我们使用名为`FrontToBackFlip`and的故事板创建了两个动画`BackToFrontFlip`，声明如下：`<Storyboard x:Name="FrontToBackFlip">`

当`Tap`收到 a 时，我们调用

```
this.FrontToBackFlip.Begin() 
```

或者

```
this.BackToFrontFlip.Begin() 
```

重构代码之前有效，但现在我们收到以下错误：

> “Views.CardCarousel.IssuerCardControl”不包含“FrontToBackFlip”的定义，并且没有扩展方法“FrontToBackFlip”接受“Views.CardCarousel.IssuerCardControl”类型的第一个参数（您是否缺少 using 指令或程序集引用?)

请注意，智能感知可以找到并完成对情节提要的引用，因此命名空间和类型名称在 XAML 和代码隐藏中似乎都是正确的。只是编译器无法解决这些问题。

有什么建议可以追踪这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:21:12.277

我们能够通过简单地向项目中添加一个新的用户控件、从未构建的控件复制并粘贴代码来解决此问题。

# fortran - 对 n 字节整数实现按位运算的最佳方法

> ID：15363152
> 
> 赞同：0
> 
> 时间：2013-03-12T13:53:59.273
> 
> 标签：fortran, bit-manipulation, bitwise-operators

我想为大整数的按位运算实现一个高效的库。我编写了以下覆盖的函数`BTEST`：

```
FUNCTION testb_i2b(n,i)
  INTEGER(I8B), DIMENSION(0:), INTENT(IN) :: n
  INTEGER(I2B), INTENT(IN) :: i
  INTEGER(I2B) :: j
  LOGICAL :: testb_i2b
  j = ISHFT(i,-6)
  IF ( j .LE. UBOUND(n,1) ) THEN
    testb_i2b = BTEST(n(j),i-ISHFT(j,6))
  ELSE
    testb_i2b = .FALSE.
  END IF
END FUNCTION testb_i2b 
```

该数组`n`包含`64*(SIZE(n)-1)`我的大整数的位。有没有更有效的方法来获得相同的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:18:01.740

我不知道这是否比你的版本更快，我会让你测试一下，但它涉及的操作更少，并且没有明确的 if 语句，所以可能是这样。对于我运行的几个测试，它给出的结果与您的代码相同。我已经将 bignum 中整数的大小固定为 64 位，如果您愿意，可以将其设为参数。

```
 LOGICAL FUNCTION btest_bignum(bn,ix)
    IMPLICIT NONE
    INTEGER(int64), DIMENSION(0:), INTENT(in) :: bn
    INTEGER(int16), INTENT(in) :: ix
    INTEGER :: array_ix
    array_ix = ix/64
    btest_bignum = BTEST(bn(array_ix), ix-(array_ix*64))
  END FUNCTION btest_bignum 
```

请注意，我使用了现在标准的种类声明`int64`和`int16`

# jquery - jqgrid - 我如何在重新加载网格时坚持高级多重搜索

> ID：15363164
> 
> 赞同：0
> 
> 时间：2013-03-12T13:54:30.613
> 
> 标签：jquery, jqgrid

我有一个 jqgrid，它会在设定的时间间隔内重新加载并使用多重搜索选项。一切都很好，除非重新加载发生时，我丢失了之前输入的任何过滤/搜索并且所有数据都显示。

重新加载后如何保留任何过滤/搜索。代码如下。任何建议表示赞赏：

```
jQuery(document).ready(function () {
        jQuery("#list").jqGrid({
            datatype: 'json',
            url: 'GetWorkItems.ashx?view=MyActiveItems',
            height: "100%",
            scrollOffset: 0,
            jsonReader: {
                root: "rows",
                page: "page",
                total: "total",
                records: "records",
                repeatitems: false,
                cell: "cell",
                id: "Id",
                userdata: "userdata",
                subgrid: {
                    root: "rows",
                    repeatitems: true,
                    cell: "cell"
                }
            },
            colNames: ['', 'ID', 'TopParentID', 'Title', 'Assigned To', 'Status', 'Priority', 'Classification', 'Affected User', 'Support Group', 'Last Modified'],
            colModel: [
                  { name: 'Icon', index: 'Icon', align: 'right', width: 18, sortable: false, formatter: iconFormatter, search: false },
                  { name: 'Id', index: 'Id', width: 45, sorttype: 'int', firstsortorder: 'desc' },
                  { name: 'TopParentId', index: 'TopParentId', width: 65, align: 'center', sorttype: 'int', hidden: true },
                  { name: 'Title', index: 'Title', width: 180 },
                  { name: 'AssignedUser', index: 'AssignedUser', width: 100, align: 'center' },
                  { name: 'Status', index: 'Status', width: 60, align: 'center' },
                  { name: 'Priority', index: 'Priority', width: 50, align: 'center' },
                  { name: 'Category', index: 'Category', width: 120, align: 'center' },
                  { name: 'AffectedUser', index: 'AffectedUser', width: 100, align: 'center' },
                  { name: 'Tier', index: 'Tier', width: 100, align: 'center' },
                  { name: 'LastModified', index: 'LastModified', width: 120, align: 'center', formatter: 'date', formatoptions: { srcformat: 'Y-m-d H:i:s0', newformat: 'm/d/Y h:i A' }
                  }],
            pager: '#pager',
            rowNum: 15,
            width: 980,
            sortname: 'Id',
            sortorder: 'asc',
            viewrecords: true,
            autowidth: true,
            gridview: true,
            loadonce: true,
            ignoreCase: true,
            caption: 'All Active Work Items Assigned To Me',
            onSelectRow: function (id) {
                //doing a redirect here
            }
        });

        $.extend($.jgrid.search, { multipleSearch: true, multipleGroup: true, recreateFilter: true, overlay: 0 });
        jQuery("#list").jqGrid('navGrid', '#pager', { add: false, edit: false, del: false });

        function iconFormatter(cellvalue, options, rowObject) {
            return '<img src="./images/' + cellvalue + '" alt="workitem" />';
        };

        var interval = parseInt($("#<%=hidRefreshInterval.ClientID %>").val());
        window.setTimeout(refreshGrid, interval);

        function refreshGrid() {
            jQuery("#list").jqGrid('setGridParam', { datatype: 'json' }).trigger('reloadGrid');
            window.setTimeout(refreshGrid, interval);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:27:54.720

正如我们发现`'setGridParam', { datatype: 'json' })`不需要的，所以应该删除。

# neo4j - java.lang.NoClassDefFoundError: org/neo4j/cypherdsl/grammar/Execute

> ID：15363166
> 
> 赞同：0
> 
> 时间：2013-03-12T13:54:45.263
> 
> 标签：neo4j, spring-data-neo4j

我有一个使用 spring mvc 和 neo4j 的项目。升级依赖项后，我现在收到错误“java.lang.NoClassDefFoundError: org/neo4j/cypherdsl/grammar/Execute”。我想看看我是否一起使用了不兼容的包。

我将软件包更改为以下内容：
neo4j-kernel：1.8.2
neo4j-cypher ：1.8.2 neo4j-
cypher-dsl：1.7
spring-data-neo4j：2.1.0.RELEASE
spring-data-neo4j-rest：2.1.0 。释放

浏览 neo4j-cypher-dsl-1.7 时，我没有看到语法子包。我想知道这是否是问题所在，或者我可能遗漏了什么。

希望这是足够的信息，如果没有，请告诉我要包含的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:17:24.657

您正在混合 1.7 和 1.8 版本。请改用以下内容：

```
<dependency>
    <groupId>org.neo4j</groupId>
    <artifactId>neo4j-cypher-dsl</artifactId>
    <version>1.8</version>
</dependency> 
```

在 1.7 中，Execute 类位于“org.neo4j.cypherdsl”包中。

# python - 选择 def 返回的列表

> ID：15363174
> 
> 赞同：-1
> 
> 时间：2013-03-12T13:55:06.233
> 
> 标签：python, user-defined-functions

我有一个定义来分隔特定属性的一些坐标。对于这种分离，我使用 1 个定义，在定义中我有 9 个列表（不同的标准）。现在对于输出，我只想要我定义的列表。否则我不能用它来绘图。

```
def sorteerCord(cord):
    tweestijging=[]
    stijginggelijk=[]
    stijgingdaling=[]
    tweedaling=[]
    dalinggelijk=[]
    dalingstijging=[]
    tweegelijk=[]
    gelijkstijging=[]
    gelijkdaling=[]

    y=0
    while y<len(cord):
        lijst=cord[y]
        if (lijst[1]-lijst[0])>0.5:
            if (lijst[2]-lijst[1])>0.5:
                tweestijging.append(y)
            if (lijst[2]-lijst[1])<=0.5 and (lijst[2]-lijst[1])>=-0.5:
                stijginggelijk.append(y)
            if (lijst[2]-lijst[1])<-0.5:
                stijgingdaling.append(y)

        if (lijst[1]-lijst[0])<-0.5:
            if (lijst[2]-lijst[1])>0.5:
                dalingstijging.append(y)
            if (lijst[2]-lijst[1])<=0.5 and (lijst[2]-lijst[1])>=-0.5:
                dalinggelijk.append(y)
            if (lijst[2]-lijst[1])<-0.5:
                tweedaling.append(y)

        if (lijst[1]-lijst[0])<=0.5 and (lijst[1]-lijst[0])>=-0.5:
            if (lijst[2]-lijst[1])>0.5:
                gelijkstijging.append(y)
            if (lijst[2]-lijst[1])<=0.5 and (lijst[2]-lijst[1])>=-0.5:
                tweegelijk.append(y)
            if (lijst[2]-lijst[1])<-0.5:
                gelijkdaling.append(y)

        y=y+1       
    print raw_input()
    return raw_input() 
```

他们是一种在我的 def 中定义输出文件的方式吗（def sorteerdCord(cord,outpu=tweestijging)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:05:02.277

我猜在最后两行中，您希望用户输入要使用的输出列表，但不太确定。您可以使用字典将输入字符串映射到变量。

就像是：

```
def sorteerCord(cord, output):
    # all of your separation code
    outputmap = { 'tweestijging': tweestijging,
                  'gelijkstijging' : gelijkstijging,
                   # and more of those
                 }
    return outputmap[ output ] 
```

然后调用：

```
sorteerCord(cord, 'gelijkstijging') 
```

您当然也可以选择返回所有列表或将它们保存在字典中：

```
output = { 'tweestijging': [],
       'gelijkstijging': [],
        # etc
        }

 # code to manipulate lists goes here

return output 
```

然后使用相同的技术选择一个。

# java - 输入 ENTER 键不捕获

> ID：15363181
> 
> 赞同：1
> 
> 时间：2013-03-12T13:55:19.870
> 
> 标签：java, swing, keyboard-events, key-bindings

在我的应用程序中，我有一个 JTable，我在其中映射了一个 Key 事件。来源：

```
 getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "selectNextColumnCell");
    getActionMap().put("selectNextColumnCell", new AbstractAction() {

        @Override
        public void actionPerformed(ActionEvent e) {
            //DO SOMETHING
        }
    });

} 
```

但是只有当我按下回车键并且不释放它时才会调用这个动作。但是每次用户输入回车键时我都需要调用这个动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:11:24.950

请参阅我的语法`put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER....`

例如

```
import java.awt.Dimension;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class FullScreen {

    private static final long serialVersionUID = 1L;
    private GraphicsDevice device;
    private JButton button = new JButton("Close Meeee");
    private JPanel myPanel = new JPanel();
    private JFrame frame = new JFrame();

    public FullScreen() {
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        myPanel.setFocusable(true);
        myPanel.add(button);
        frame.add(myPanel);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setUndecorated(true);
        frame.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(
                KeyStroke.getKeyStroke("ENTER"), "clickENTER");
        frame.getRootPane().getActionMap().put("clickENTER", new AbstractAction() {
            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                exitFullScreen();
            }
        });
        enterFullScreen();
        frame.setVisible(true);

        // code line for @MOD 
        // from http://stackoverflow.com/questions/15152297/how-to-get-extendedstate-width-of-jframe

        Runnable doRun = new Runnable() {
            @Override
            public void run() {
                System.out.println(frame.getBounds());
            }
        };
        SwingUtilities.invokeLater(doRun);
    }

    private void enterFullScreen() {
        GraphicsEnvironment graphicsEnvironment = GraphicsEnvironment.getLocalGraphicsEnvironment();
        device = graphicsEnvironment.getDefaultScreenDevice();
        if (device.isFullScreenSupported()) {
            device.setFullScreenWindow(frame);
            frame.validate();
        }
    }

    private void exitFullScreen() {
        device.setFullScreenWindow(null);
        myPanel.setPreferredSize(new Dimension(400, 300));
        frame.pack();
    }

    public static void main(String[] args) {
        Runnable doRun = new Runnable() {
            @Override
            public void run() {
                FullScreen fullScreen = new FullScreen();
            }
        };
        SwingUtilities.invokeLater(doRun);
    }
} 
```

# javascript - Casperjs 1.1 不生成 XUnit xml 文件

> ID：15363182
> 
> 赞同：1
> 
> 时间：2013-03-12T13:55:36.433
> 
> 标签：javascript, xml, casperjs, xunit

我正在运行 CasperJS 测试。我试图在输出渲染中生成 xUnit xml 文件。但是，当发生单个 FAILure 时，这将失败。实际上，当发生单个 FAIL 时，执行就停止了。

这是我正在处理的脚本

```
casper.test.begin('Site login', '', function suite(test) {
   casper.start(mysite, function () {    
      test.assertExists('form#index', "Login Form found"); //Pass
      test.assertExists('form#index1', "Login Form found"); //Fail
   });

   casper.run(function (){
      test.done();
      test.renderResults(true, 0, 'test1.xml');
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T16:40:13.627

尝试使用[`casperjs test`](http://docs.casperjs.org/en/latest/testing.html)该`--xunit=<filename>`选项。

# xpages - xe:dialog 不会在编辑模式下打开视图选项列表 OpenNTF 控件

> ID：15363187
> 
> 赞同：1
> 
> 时间：2013-03-12T13:56:00.833
> 
> 标签：xpages, xpages-extlib, xpages-ssjs

我正在使用扩展库和 XPages 来构建基于 Web 的工作流应用程序。一个功能是在转发之前提示一个对话框并选择下一个批准者。

对于新文档，会出现对话框，并且在阅读模式下也会出现。它永远不会为已保存的文档打开。我需要它在 SSJS 中工作，尽管对话框确实在 CSJS 中打开。这是一些代码：

`xpMain.xsp`包含两个自定义控件：`ccButtons`和`ccWFloDialogs`.

ccButtons“提交”按钮：

```
getComponent('dlgNextOwner').show(); 
```

ccWFloDialogs“dlgNextOwner”对话框：

```
<xe:dialog id="dlgNextOwner" title="Select Supervisor">
    <xe:formTable id="ftDlgNextOwner" formTitle="Select Supervisor"
        formDescription="You may select a different supervisor."
        disableErrorSummary="true">
        <xp:this.facets>
            <xe:formRow id="formRow1" xp:key="footer" for="txtWFloNextOwner"
                labelWidth="125px">
                <xp:inputText id="txtWFloNextOwner" style="width:200px"
                    value="#{viewScope.nextOwner}">
                </xp:inputText>
                <xe:namePicker id="npNextOwner" dialogTitle="Select Supervisor"
                    for="txtWFloNextOwner">
                    <xe:this.dataProvider>
                        <xe:dominoNABNamePicker addressBookSel="all-public"></xe:dominoNABNamePicker>
                    </xe:this.dataProvider>
                </xe:namePicker>
            </xe:formRow>
        </xp:this.facets>
    </xe:formTable>
</xe:dialog> 
```

在 CSJS 中，我可以使用以下代码并成功打开对话框：

```
XSP.openDialog("#{id:dlgNextOwner}"); 
```

我还使用了扩展库中[Mark Hughes 的选择列表](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=View%20Picklist%20Custom%20Control)，如果我删除了包含控件和数据源的面板，对话框就会出现在 SSJS 中！代码在自定义控件中，但如果直接在 XPage 中，问题也是一样的。这是面板的代码：

```
<xp:panel
        id="vendorDiv">
        <xp:this.data>
            <xp:dominoView
                var="nvVend"
                viewName="V_Vend"
                ignoreRequestParams="true"
                databaseName="other/lookupdb.nsf"
                startKeys="#{javascript:viewScope.srchVend}">
            </xp:dominoView>
        </xp:this.data>
        <xe:formTable
            id="ftGetVendor"
            disableErrorSummary="true"
            labelPosition="above">
            <xe:formRow
                id="frVendor"
                for="cfVendorName"
                label="Name of the Vendor:">
                <xp:text
                    escape="true"
                    id="cfVendorName"
                    value="#{currentDocument.VendorName}"
                    style="width:200px">
                </xp:text>
                <xc:viewpicklist
                    rowsPerPage="15"
                    buttonImage="./add.png"
                    tableClass="tablecellgreen"
                    headerClass="headerclass"
                    rowClass="odd, even"
                    searchBar="false"
                    searchButtonText="Search"
                    searchButtonClass="button2"
                    searchBarClass="headerclass"
                    pagerStyleFirst="navbutton1"
                    pagerStylePrevious="navbutton2"
                    pagerStyleCurrent="navbutton4"
                    pagerStyleNext="navbutton2"
                    pagerStyleLast="navbutton3"
                    typeAheadBar="true"
                    select="Column"
                    onReturn="Set Scope Value"
                    bottomBarClass="bottomround headerclass"
                    cancelButtonText="Cancel"
                    cancelButtonClass="button2 floatthisright"
                    type="Single Value"
                    finishButtonText="Finish"
                    finishButtonClass="button2 floatthisright"
                    multiSelectButtonAddImg="./add.png"
                    multiSelectButtonRemoveImg="./delete.png"
                    picklistButtonClass="button"
                    openDialogWith="Link"
                    picklistLinkImg="./add.png"
                    multiSelectLinkAddImg="./add.png"
                    multiSelectLinkRemoveImg="./delete.png"
                    selectWith="Link"
                    clearSearchImg="./cross.png"
                    SelectCellWidth="30px"
                    dialogID="dlgVend"
                    dialogTitle="Select a Vendor"
                    dialogWidth="80%"
                    refreshID="vendorDiv"
                    ssjsSelectFunction="getVendorInfo"
                    varName="viewScope.vendorInfo"
                    datasrc="nvVend"
                    selectColumn="4"
                    linkImg="./add.png"
                    typeAheadVar="viewScope.srchVend">
                    <xc:this.viewColumn>
                        <xp:value>0</xp:value>
                        <xp:value>1</xp:value>
                        <xp:value>2</xp:value>
                        <xp:value>3</xp:value>
                    </xc:this.viewColumn>
                </xc:viewpicklist>
            </xe:formRow>
            <xe:formRow
                id="frVendorStatus"
                for="cfVendorStatus"
                label="Vendor Registration Status:">
                <xp:text
                    escape="true"
                    id="cfVendorStatus"
                    value="#{currentDocument.VendorStatus}">
                </xp:text>
            </xe:formRow>
            <xe:formRow
                id="frVendorCountry"
                for="cfVendorCountry"
                label="Country Name:">
                <xp:text
                    escape="true"
                    id="cfVendorCountry"
                    value="#{currentDocument.VendorCountry}">
                </xp:text>
            </xe:formRow>
        </xe:formTable>
    </xp:panel> 
```

请求的供应商信息填充字段，没有任何问题或错误。但是，这里的某些东西似乎阻止了使用 SSJS 打开对话框。

谁能看到我遗漏的任何明显的东西？数据源在面板中，ignoreRequestParams 为真（否则不起作用）。

主要数据源位于整个 XPage 上下文中。我尝试在主面板之外添加ccWFloDialog自定义控件，并将数据源更改为面板，但没有奏效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:21:57.073

暂时忘记对话框。这可能与数据源有关。建议你先让它在 xpage 上工作。带有可见字段。然后可能使用渲染属性使其在 xpage 上工作，类似于对话框的显示方式。一旦你有了这个工作，那么你应该很好地申请对话。这个想法是首先将对话框从等式中取出，以确保它正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:11:31.367

相反，我决定使用 CSJS 而不是 SSJS 打开对话框。我已经改变了一些逻辑，并且还需要做更多的事情来完成项目的这一部分。谢谢大家！

# c# - Rhino 3d 插件，用于打开 .3dm 文件

> ID：15363188
> 
> 赞同：0
> 
> 时间：2013-03-12T13:56:00.473
> 
> 标签：c#, rhino3d

我是为 rhino 3d 编写插件的新手。我在这里浏览了文档和示例代码： [http ://wiki.mcneel.com/developer/dotnetplugins](http://wiki.mcneel.com/developer/dotnetplugins)

但无法弄清楚如何从插件打开 .3dm 文件。

有人能帮我吗？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T02:41:18.717

这在一定程度上取决于您正在尝试做什么以及您正在运行哪个版本的 Rhino。

如果您正在运行 Rhino 4 并使用 Rhino_DotNet SDK，那么您需要让您的命令类派生自 MRhinoScriptCommand 并调用 RhinoApp().RunScript(@"-_Open C:\path_to_model.3dm")

如果您正在运行 Rhino 5 并使用 RhinoCommon SDK（推荐），那么您应该按照 Brian 上面建议的方式调用 RunScript。您还需要使用 ScriptRunner 的 Rhino.Commands.Style 属性标记您的命令类

前任。

```
using Rhino.Commands;

[CommandStyle(ScriptRunner)]
class MyCommand : Rhino.Commands.Command
{
  public override string EnglishName { get { return "MyCommand"; } }

  protected override Result RunCommand(RhinoDoc doc, RunMode mode)
  {
    RhinoApp.RunScript(@"-_Open C:\model.3dm");
  }
} 
```

这将打开 3dm 文件并使其成为活动文档。

另一方面，如果您只想将 3dm 文件读入内存并检查其内容，我建议您使用 RhinoCommon 中的 Rhino.FileIO.File3dm 类。您可以使用该类上的静态读取函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T04:32:00.063

您可以使用以下方法从插件内部编写 Open 命令脚本：

Rhino.RhinoApp.RunScript() 为打开命令编写脚本。例如：

Rhino.RhinoApp.RunScript(@"-_Open C:\model.3dm");

# java - Java JSF 关于自定义验证

> ID：15363189
> 
> 赞同：0
> 
> 时间：2013-03-12T13:56:04.310
> 
> 标签：java, web-applications, jsf-2

我在自定义验证中使用这种方式如果我假设我有这种形式，如果这种方式正确与否，我会有点困惑：

```
<h:form id="myForm>
 <h:outputText value="user name" />
 <h:inputText value="#userBean.userName" id="userName" />

 <h:outputText value="Password" />
 <h:inputText value="#userBean.Password" id="passwd" />
</h:form> 
```

我有它的托管豆：

```
@ManagedBean(name="userBean")
@SessionScoped
public class UserBeanData{
   private String userName;
   private String password;
   // with setters and getters........
   //
} 
```

以及用于验证托管 Bean 字段和实施的自定义验证器，例如：

```
@Override
public validate(FacesContext context, UIComponent component, Object value) throws ValidatorException{
Map<String, String> params = context.getExternalContext().getRequestParametersMap();

String username = params.get("myForm:username");
String pass = params.get("myForm:passwd");

// validate : if fields are not null check if the user exists if the result is empty , throws a validation Message Error
} 
```

我的问题是：像这样检索托管 bean 值是真的还是假的？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:36:33.460

您基本上是在寻找错误方向的解决方案。验证仅适用于单个提交的值，例如最小/最大长度、非空/空、正则表达式模式等。但是您想根据所有提交的值调用业务操作：登录用户。这不完全是输入验证。

只需添加`required="true"`到两个输入组件并在操作方法中执行工作。

例如

```
<h:form id="myForm>
    <h:outputText value="user name" />
    <h:inputText value="#{userBean.userName}" id="userName" />
    <h:message for="userName" />

    <h:outputText value="Password" />
    <h:inputSecret value="#{userBean.password}" id="passwd" />
    <h:message for="passwd" />

    <h:commandButton value="Login" action="#{userBean.login}" />
    <h:messages globalOnly="true" />
</h:form> 
```

和

```
@ManagedBean
@RequestScoped
public class UserBean {

    private String userName;
    private String password;

    @EJB
    private UserService service;

    public String login() {
        User user = service.find(userName, password);

        if (user != null) {
            FacesContext.getCurrentInstance().getExternalContext().getSessionMap("user", user);
            return "home?faces-redirect=true";
        } else {
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("Unknown login"));
            return null;
        }
    }

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:31:24.697

注意`validate`方法的牢固性。它有一个`UIComponent`参数，该参数是由该方法验证的组件。这`UIComponent`既有当前值 ( `getValue()`) 也有用户提交的值 ( `getSubmittedValue()`)。

您可能必须将其`UIComponent`转换为您正在验证的特定类型的组件（在这种情况下，它是一个`UIInput`）。

现在，如果您要在登录之前验证用户名和密码，有几种方法可以做到这一点。在您的情况下，使用密码字段验证用户名字段作为添加的参数就足够了。您可以通过执行以下操作来实现：

```
<h:outputText value="user name" />
<h:inputText value="#userBean.userName" id="userName" validator="#{yourBean.validateLogin}">
    <f:attribute name="pass" value="#{passwordField}" />
</h:inputText>

<h:outputText value="Password" />
<h:inputText value="#userBean.Password" id="passwd" binding="#{passwordField}"/> 
```

请注意，`binding`密码中的`<h:inputText/>`与嵌套在您的. 使用此设置，您可以像这样执行验证：`pass``<f:attribute/>``username` `<h:inputText/>`

```
public void validateLogin(FacesContext context, UIComponent component, Object value) throws ValidatorException {
    //I suppose it's a typo, but your validate method lacks the return type.
    String username = (String) value;
    UIInput passwordInput = component.getAttributes().containsKey("pass") ? 
        (UIInput) component.getAttributes().get("pass") : null;
    if(passwordInput != null) {
        //Just to be sure the input was added as a parameter successfuly
        String submittedPassword = passwordInput.getSubmittedValue();
        //Now, do your validations based on the strings "username"
        //and "password".
    }
} 
```

由于所有这些都是在验证阶段完成的，因此尚未在托管 bean 中设置值，这就是为什么您必须对提交的值进行一些调整。

# jquery - preventDefault() 不适用于委托目标？

> ID：15363192
> 
> 赞同：1
> 
> 时间：2013-03-12T13:56:16.603
> 
> 标签：jquery

我有一个提交表单的按钮

该按钮已经在页面上。

所以如果我想阻止提交，我可以这样做：

`$(".myBtn").on('click',function (e){ e.preventDefault();.....});`

但是如果将来要注入按钮，我可以这样做：

`$("body").on('click',".myBtn",function (e){ e.preventDefault();.....});`

但它不起作用并且表单提交。

在处理程序未直接附加到元素本身而是附加到委托目标的情况下，如何实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:05:19.090

您永远不应将单击处理程序附加到提交按钮以防止提交表单。总是绑定表单的“提交”事件——如果用户按下输入而不是点击来提交表单怎么办？

```
$(document).on('submit','#your-form',function(e) {
 e.preventDefault();
}); 
```

至于回答您的直接问题，您的代码应该可以正常工作。确保您的按钮具有正确的类名，并确保在您单击可能导致 e.preventDefault() 被忽略的按钮之前或之后，页面上没有发生 JS 错误。

# c# - 在基函数中设置属性并在子函数继承中调用函数

> ID：15363193
> 
> 赞同：1
> 
> 时间：2013-03-12T13:56:18.307
> 
> 标签：c#, function, inheritance, properties, refactoring

我正在尝试重构一些旧代码并希望创建更多逻辑继承。

我们有 struct Custom Class，我们将其分为 (3) 个级别：

AccountView > 详细信息 > 完整的继承。我们根据需要设置每个属性。

在查看了设置器之后，我们想将它们组合成一个带有设置属性的方法的类“SetAccountProp”。

我们有“CustomerBaseView”，我们在其中传递有效的模型账户数据。

现在为 CustomerDetailView 传递相同的模型 ACCOUNT 数据，但我们想使用函数“CustomerBaseView”填充“CustomerBaseView”的属性，然后填写详细信息。

此外，对于 CustomerFullView，传递模型帐户数据，然后填写“CustomerBaseView”的属性，然后填写“CustomerBaseView”，然后填写 CustomerFullView 的其余字段。

如何在“CustomerDetailView”函数中调用和填写“CustomerBaseView”？我是否初始化 new AccountsView(); 在每个功能中？

不确定如何在不重复的情况下完成重构：

```
// -- CustomView  <--- replace with func?
view.Email = data.Email; 
view.Active = data.Active; 
view.FirstName = data.FirstName; 
view.LastName = data.LastName; 
```

在详细信息和完整功能中。

**代码**

```
namespace BLL.Presenters
{
    public class AccountsView
    {
        public string Email { get; set; }
        public bool Active { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }

    public class Details : AccountsView
    {
        public bool Administrator { get; set; }
        public DateTime? LastLogin { get; set; }
    }

    public class Full : Details
    {
        public Guid ID { get; set; }
        public DateTime Created { get; set; }
        public DateTime Modified { get; set; }
        public string FullName { get; set; }
    }

    public class SetAccountProp
    {
        public static AccountsView CustomerBaseView(Account data)
        {
            var view = new AccountsView();
            view.Email = data.Email;
            view.Active = data.Active;
            view.FirstName = data.FirstName;
            view.LastName = data.LastName;
            return view;
        }

        public static Details CustomerDetailView(Account data)
        {
            var view = new Details();

            // -- CustomView  <--- replace with func?
            view.Email = data.Email;
            view.Active = data.Active;
            view.FirstName = data.FirstName;
            view.LastName = data.LastName;

            // -- Details
            view.Administrator = data.Administrator;
            view.LastLogin = data.LastLogin;

            return view;
        }

        public static Full CustomerFullView(Account data)
        {
            var view = new Full();

            // -- CustomView <--- replace with func?
            view.Email = data.Email;
            view.Active = data.Active;
            view.FirstName = data.FirstName;
            view.LastName = data.LastName;

            // -- Details <--- replace with func?
            view.Administrator = data.Administrator;
            view.LastLogin = data.LastLogin;

            // -- Full
            view.ID = data.ID;
            view.Created = data.Created;
            view.Modified = data.Modified;
            view.FullName = data.LastName + ", " + data.FirstName;

            return view;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:26:28.293

使用构造函数链，你可以有这样的东西：

每个构造函数首先调用它的基类构造函数，因此您不必重复代码。

```
 namespace BLL.Presenters
  {
    using System;

    public class Account // dummy to make it compile
    {
      public string Email;
      public bool Active;
      public string FirstName;
      public string LastName;
      public bool Administrator;
      public DateTime? LastLogin;
      public Guid ID;
      public DateTime Created;
      public DateTime Modified;
    }

    public class AccountsView
    {
      public string Email { get; set; }
      public bool Active { get; set; }
      public string FirstName { get; set; }
      public string LastName { get; set; }

      public AccountsView(Account data)
      {
        this.Email = data.Email;
        this.Active = data.Active;
        this.FirstName = data.FirstName;
        this.LastName = data.LastName;
      }
    }

    public class Details : AccountsView
    {
      public bool Administrator { get; set; }
      public DateTime? LastLogin { get; set; }

      public Details(Account data) : base(data)
      {
        this.Administrator = data.Administrator;
        this.LastLogin = data.LastLogin;
      }
    }

    public class Full : Details
    {
      public Guid ID { get; set; }
      public DateTime Created { get; set; }
      public DateTime Modified { get; set; }
      public string FullName { get; set; }

      public Full(Account data) : base(data)
      {
        this.ID = data.ID;
        this.Created = data.Created;
        this.Modified = data.Modified;
        this.FullName = data.LastName + ", " + data.FirstName;
      }
    }

    class Program
    {
      static void Main()
      {
        Console.WriteLine();
        Console.ReadLine();
      }
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:11:19.577

为什么不这样：

```
public class CustomerBase
{
    public string Email { get; private set; }
    public bool Active { get; private set; }
    public string FirstName { get; private set; }
    public string LastName { get; private set; }

    protected void SetAccountInfo(Account account)
    {
        this.Email = account.Email;
        this.Active = account.Active;
        this.FirstName = account.FirstName;
        this.LastName = account.LastName;
    }
}

public class CustomerA : CustomerBase
{
    public string IsAdmin { get; private set; }
    public DateTime? LastLogin { get; private set; }

    public void SetAccountInfo(Account account)
    {
        base.SetAccountInfo(account);
        this.IsAdmin = account.IsAdmin;
        this.LastLogin = account.LastLogin;
    }

}

 public class Account
{
     //your properties
    public string Email { get; set; }
    public bool Active { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string IsAdmin { get; set; }
    public DateTime? LastLogin { get; set; }
} 
```

或者让 SetAccountInfo() 返回`this`

```
public CustomerA SetAccountInfo(Account account)
    {
        base.SetAccountInfo(account);
        this.IsAdmin = account.IsAdmin;
        this.LastLogin = account.LastLogin;
        return this;
    } 
```

# bash - 批量重命名文件以更改数字

> ID：15363196
> 
> 赞同：1
> 
> 时间：2013-03-12T13:56:25.840
> 
> 标签：bash

我有一个包含多个文件的目录。每个文件可以有不同的前缀和后缀，但都包含一个六位数字。我想批量重命名文件，以便更改一个数字（特别是第二个）。

所以，例如

```
*?2????* -> *?5????* 
```

所有文件的第二个数字始终相同，但其他所有内容都可以不同。更复杂的是，一些文件有两个六位数字。如果两个号码都需要更新，

例如

```
*?2????*?2????* -> *?5????*?5????* 
```

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:03:53.270

尝试这个 ：

```
for file in *?2????*; do
    if [[ $file =~ [0-9]{6} ]]; then
        echo mv "$file" "$(sed 's/2/5/g' <<< "$file")"
    else
        echo mv "$file" "$(sed 's/[0-9]/5/2' <<< "$file")"
    fi
done 
```

该`sed`命令会将第二次出现的数字替换为 5。

如果这符合您的需要，只需`echo`从我的代码段中删除命令。

# sql - 可以更有效地重写此查询吗？

> ID：15363200
> 
> 赞同：-4
> 
> 时间：2013-03-12T13:56:32.440
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

我有一个这样的 SQL 查询：

```
select * 
from orders 
where order_session_id IN ( 
   select id order_status 
   from order_sessions 
   where order_status IN (
      select id 
      from order_status_types 
      where order_status != "Paid"
   )
) 
```

这返回了一个哈希。我用 ruby​​ 编写了它，但我觉得它可以优化。

```
@orders = []
paid_order_status_id = OrderStatusType.find_by_order_status("Paid").id
OrderSession.where('order_status != ?',paid_order_status_id).each { |unpaid_order|
  @orders << Order.find(unpaid_order.id)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:41:21.900

假设您有以下关联

```
OrderSession belongs_to Order
Order has_one OrderSession 
```

你试试

```
@orders = Order.joins(:order_session).where('order_sessions.order_status != ?', paid_order_status_id) 
```

# objective-c - CAEmitterLayer 在我的视图控制器中不可见

> ID：15363202
> 
> 赞同：1
> 
> 时间：2013-03-12T13:56:33.960
> 
> 标签：objective-c, core-animation, calayer, particles, quartz-core

`UIViewController`我正在尝试向我的一个实例添加一个简单的粒子效果叠加。我已经按照我找到的几个教程进行操作，但它们都没有处理视图控制器，而且它们的故事板只是一个没有控制器的视图，这令人困惑。

这是我的代码，我只是想弄清楚为什么我看不到粒子效果。我错过了什么？视图本身肯定存在并添加（如果我更改它的颜色或我可以看到它），它只是空的，并且没有显示任何粒子效果。引用的图像文件肯定在项目和目标中，那么我这里还做错了什么？我需要以某种方式添加`CAEmitterLayer`到吗？`rainView`教程在这部分没有提供任何帮助！

**RainfallOverlay.h**

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface RainfallOverlay : UIView {
    CAEmitterLayer *rainEmitter;
}

@end 
```

**RainfallOverlay.m**

```
#import "RainfallOverlay.h"

@implementation RainfallOverlay

- (void) awakeFromNib
{
    rainEmitter = (CAEmitterLayer *) self.layer;
    rainEmitter.emitterPosition = CGPointMake(160, 100);
    rainEmitter.emitterSize = CGSizeMake(10, 10);
    rainEmitter.renderMode = kCAEmitterLayerAdditive;

    CAEmitterCell *rain = [CAEmitterCell emitterCell];
    rain.birthRate = 200;
    rain.lifetime = 2.0;
    rain.lifetimeRange = 1.5;
    rain.color = [[UIColor colorWithRed: 0.2 green: 0.4 blue: 0.8 alpha: 0.1] CGColor];
    rain.contents = (id) [[UIImage imageNamed: @"Particles_rain.png"] CGImage];
    rain.name = @"rain";
    rain.velocity = 150;
    rain.velocityRange = 100;
    rain.emissionRange = M_PI_2;
    rain.emissionLongitude = 0.025 * 180 / M_PI;
    rain.scaleSpeed = 0;
    rain.spin = 0.5;

    rainEmitter.emitterCells = [NSArray arrayWithObject: rain];
}

@end 
```

**ViewController.m viewDidLoad**

```
RainfallOverlay *rainView = [[RainfallOverlay alloc] initWithFrame: CGRectMake(0, 0, 320, 250)];
[rainView setUserInteractionEnabled: NO];
[self.view bringSubviewToFront: rainView];
[self.view addSubview: rainView]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:20:26.993

有2个问题：

*   `awakeFromNib`只有从 nib 文件加载视图时才会调用。在您的情况下，您必须实施`initWithFrame`.
*   你必须重写`layerClass`它`self.layer`返回一个`CAEmitterLayer`. 只是将图层转换为`CAEmitterLayer`不起作用。

所以你的**RainfallOverlay**实现应该是这样的：

```
+ (Class)layerClass
{
    return [CAEmitterLayer class];
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        rainEmitter = (CAEmitterLayer *) self.layer;

        // ... remaining setup
    }
    return self;
} 
```

# asp-classic - 发生经典 ASP 未知错误

> ID：15363207
> 
> 赞同：0
> 
> 时间：2013-03-12T13:56:42.060
> 
> 标签：asp-classic

我写了以下代码：

```
strConnection ="Provider=SQLOLEDB;Server=PC-101\SQLEXPRESSR2;Database=LDS;Integrated Security=true"

Set rs = Server.CreateObject("ADODB.Recordset")

select_SQL = "select * from tblMonthlySales order by store_id"

On Error Resume Next

rs.open(strConnection , select_SQL)

If Err.Number <> 0 Then
   response.Write(Err)
On Error Goto 0 ' But don't let other errors hide!
' Code to cope with the error here
End If
On Error Goto 0 ' Reset error handling. 
```

我正在为我的数据库使用 SQL Server 2008。

而且我无法捕捉到错误并收到此消息

> *处理 URL 时服务器发生错误。请联系系统管理员。如果您是系统管理员，请单击此处了解有关此错误的更多信息。*

我的连接字符串错了吗？

我也试过这个连接字符串：

```
strConnection ="Provider=SQLNCLI10;Server=PC-101\SQLEXPRESSR2;Database=LDS;Integrated Security=SSPI;DataTypeCompatibility=80;" 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:01:21.187

您能否启用您的配置以获取错误详细信息？这可能会起作用：[未显示 asp 错误](https://stackoverflow.com/questions/524625/asp-errors-not-displayed)

# php - $write_result->errors 在没有错误时抛出“未定义的属性”

> ID：15363213
> 
> 赞同：0
> 
> 时间：2013-03-12T13:56:52.033
> 
> 标签：php, soap-client, bronto

使用来自 Bronto 的预先编写的代码，它构建了一个肥皂客户端，在其上调用一个函数，然后解析结果。解析代码如下所示：

```
if ($write_result->errors) {
    print "There was a problem adding or updating the contact:\n";
    print_r($write_result->results);
    exit;
 } elseif ($write_result->results[0]->isNew == true) {
    print "The contact has been added.  Id: " . $write_result->results[0]->id . "\n";
 } else {
    print "The contact's information has been updated.  Id: " . $write_result->results[0]->id . "\n";
 } 
```

每当出现错误时，它们就会被第一个 if 语句捕获并打印出来。但是当没有错误时，控制台会打印出“注意：未定义的属性：stdClass::$errors”消息。这是正确的吗？有没有办法关闭通知？它不会引起任何问题，但我可以看到它会如何混淆阅读输出日志的非技术人员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:59:48.407

检查属性是否存在而不是直接访问它：

```
if (isset($write_result->errors)) 
```

或者检查它是否存在*并且*一次不为空（只是为了确保 API 发生变化并在没有发生错误的情况下提供一个实际的空数组或空字符串）：

```
if (!empty($write_result->errors)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:59:28.970

首先检查该属性是否存在：

```
if (property_exists($write_result, 'errors') && $write_result->errors)
{
  // ...
} 
```

见：[`property_exists`](http://php.net/manual/en/function.property-exists.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:59:31.377

您可以先检查该[属性是否存在](http://php.net/manual/en/function.property-exists.php)：

```
if (property_exists($write_result, 'errors')) 
```

# jquery - 暂停和播放谷歌地图标记动画

> ID：15363217
> 
> 赞同：1
> 
> 时间：2013-03-12T13:57:01.527
> 
> 标签：jquery, asp.net, google-maps-api-3, jquery-gmap3

javascript maps / Gmap3有点新......我正在尝试使用google map DROP动画在地图上一一显示标记。动画工作正常。这是我的 JS

```
var ll = [];
var JSONData;
var pathData = [];

var tick = 10;

$(document).ready(function() {
$('#ctl00_ContentPlaceHolder1_rewind').button();
$('#ctl00_ContentPlaceHolder1_play').button();
$('#ctl00_ContentPlaceHolder1_stop').button();
$('#ctl00_ContentPlaceHolder1_forward').button();

});
function pageLoad(sender, args) {
     $('#ctl00_ContentPlaceHolder1_rewind').button();
     $('#ctl00_ContentPlaceHolder1_play').button();
     $('#ctl00_ContentPlaceHolder1_stop').button();
     $('#ctl00_ContentPlaceHolder1_forward').button();
}
function showEmptyMap() {
    $('#mapDiv').gmap3({
    map: {
        options: {
            mapTypeId: google.maps.MapTypeId.TERRAIN,
            mapTypeControl: true,
            mapTypeControlOptions: {
                style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
            },
            navigationControl: true,
            scrollwheel: true,
            streetViewControl: true
        }

    },
    clear: {}
    });
    $('#mapDiv').gmap3();
}
function designMap(JSONData) {

for (var i = 0; i < JSONData.length; i++) {
    //        ll[i] = '{latLng:\'[' + data[i].lastlatitude + ',' + data[i].lastlongitude + ']\',data:\'' + data[i].lastaddress + '\'}';
    ll[i] = { latLng: [JSONData[i].latitude, JSONData[i].longitude], data: JSONData[i].data, options: { icon: JSONData[i].iconImage} };
    pathData[i] = [JSONData[i].latitude, JSONData[i].longitude];
}

$('#mapDiv').gmap3({ clear: {} });

$('#mapDiv').gmap3({
    map: {
        options: {
            mapTypeId: google.maps.MapTypeId.TERRAIN,
            mapTypeControl: true,
            mapTypeControlOptions: {
                style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
            },
            navigationControl: true,
            scrollwheel: true,
            streetViewControl: true
        }

    },
    polyline: {
        options: {
            strokeColor: "#FF0000",
            strokeOpacity: 1.0,
            strokeWeight: 2,
            path: [pathData]

        }
    },
    autofit: {}

});

plotPoint(JSONData);
}

function plotPoint(JSONPassed) {
     for (var k = JSONPassed.length - 1; k >= 0; k--) {
         var m = new google.maps.LatLng(JSONPassed[k].latitude, JSONPassed[k].longitude);

    (function(n) {
        var image = JSONPassed[k].iconImage;
        var HTML = JSONPassed[k].data;
        setTimeout(function() {
        alert(image);
            addMarker(n, image,HTML);
        }, k * 500);
    } (m));
   }
}
function addMarker(m, image,data) {
var map = $('#mapDiv').gmap3('get');
var marker = new google.maps.Marker({
    position: m,
    map: map,
    draggable: false,
    animation: google.maps.Animation.DROP,
    icon: image,
    clickable: true
});
marker.info = new google.maps.InfoWindow({
    content: data
});

 google.maps.event.addListener(marker, 'click', function() {
    marker.info.open(map, marker);
 });

} 
```

我想创建一个暂停按钮，地图动画应该在该按钮上停止，再次单击它应该恢复。我该如何进行。？？？:(

我尝试将间隔设置为一个巨大的值，但它没有按预期工作...... :(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:00:23.067

好的，我设法对其进行了编程。我编写了自己的代码，因此其他用户也可以更简单地使用/理解它：尝试将此代码复制粘贴到新文件中并使用浏览器对其进行测试：

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Marker gmap3 demo</title>
  <style type='text/css'>
    #mapCanvas{
        width:500px;
        height:300px;
    }
  </style>

</head>
<body>

<div id="mapCanvas"></div>

<br />
<a href="#" id="startAnimate">Start animation</a>
<br />
<a href="#" id="pauseAnimate">Pause animation</a>

</body>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://redirect.docinsider.net/feeds/gmap3.min.js"></script>
<script type='text/javascript'>

var map;
var positions = [];
var markers = [];
var maxMarkers = 10;
var animatedMarkers = 0;
var animateTimer;

$(function(){

    // Click events
    $('#startAnimate').click(function(){
        playAnimate();
    });

    $('#pauseAnimate').click(function(){
        pauseAnimate();
    });

    $("#mapCanvas").gmap3({
    map: {
        options: {
            mapTypeId: google.maps.MapTypeId.TERRAIN,
            mapTypeControl: true,
            mapTypeControlOptions: {
                style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
            },
            navigationControl: true,
            scrollwheel: true,
            streetViewControl: true
        }

    },
    autofit: {}
    });

    // getting map
    map = $('#mapCanvas').gmap3('get');

    // init marker positions
    initPositions();

    /**
     * Positions for markers
     */
    function initPositions() {

        // creating some positions
        for(var i=0; i < maxMarkers; i++) {

            positions.push({
                'lat' : 37.4419 * Math.random(),
                'lng' : -122.1419 * Math.random()
            });

        }

    }

    /**
     * Animating...
     */
    function playAnimate() {

        if(animatedMarkers < maxMarkers) {

            // Adding new marker
            addMarker(animatedMarkers);

            // Adding new one?
            animateTimer = setTimeout(playAnimate, 500);    

        } else {

            alert('all animated already!');
            window.clearTimeout(animateTimer);
            return;

        }

    }

    /**
     * Pausing...
     */
    function pauseAnimate() {

        window.clearTimeout(animateTimer);

    }

    /**
     * Add single marker
     */
    function addMarker(markerNumber) {

        // Keeping a stack of markers
        markers.push(
            new google.maps.Marker({
                position: new google.maps.LatLng(positions[markerNumber].lat, positions[markerNumber].lng),
                map: map,
                draggable: false,
                animation: google.maps.Animation.DROP,
                clickable: true
            })
        );

        google.maps.event.addListener(markers[markerNumber], 'click', function() {
            console.log("outs, you are hurting me!");
        });

        // Increasing count..
        animatedMarkers++;

    }

});

</script>

</html> 
```

但基本上我所做的是以与动画发生位置不同的方法生成实际位置，并使用诸如`animatedMarkers = 0;`保持参考我们添加了多少标记的值，并在我们之间暂停时继续执行。我还在数组中添加了标记，因此当您以后开始在它们之上添加更多功能时，它会在很多方面为您带来好处。干杯。

# iphone - MapView 注释在触摸时会更改其图层顺序

> ID：15363222
> 
> 赞同：0
> 
> 时间：2013-03-12T13:57:12.620
> 
> 标签：iphone, xcode

小问题，我在地图视图上有一些注释。有时当它们彼此非常靠近时它们往往会重叠，这没关系，但是当我触摸它们时，它们会切换它们的图层位置。那些在后面的现在在前面，反之亦然。

所以我检查了我的 didSelectAnnotation 函数，但该函数中实际上没有代码，所以它不可能是它。

我想不出还有什么可能导致它。

你知道如何修复它，这样它就不会改变图层位置？

这是我的 viewForAnnotation 代码：

```
annImg = [[szAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"current"];

        szPointAnnotation *pointAnnotation = annotation;
        if (appDelegate.homePage || ([pointAnnotation.tag intValue] >= 10000))
        {
            annImg.canShowCallout = NO;
            annImg.backgroundColor = [UIColor clearColor];
            annImg.frame = CGRectMake(0, /*0*/-78, 70, /*78*/156);

            UIImageView *currentUserPictureView = [[UIImageView alloc] initWithFrame:CGRectMake(5, 5, 60, 60)];

            int newTag = [pointAnnotation.tag intValue]-10000;
            UIImage *currentUserPicture;
            if ([pointAnnotation.tag intValue] >= 10000) {
                currentUserPicture = [UIImage imageWithData:[usersData getKeyForIndexWithKey:@"UserImageData" forIndex:newTag]];
            }else{
                currentUserPicture = [UIImage imageWithData:[usersData getKeyForIndexWithKey:@"UserImageData" forIndex:[pointAnnotation.tag intValue]]];
            }

            currentUserPictureView.image = currentUserPicture;
            userLocationButton = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 70, 78)];
            [userLocationButton setBackgroundImage:[UIImage imageNamed:@"pin.png"] forState:UIControlStateNormal];
            [userLocationButton addTarget:self action:@selector(centerOnUser:) forControlEvents:UIControlEventTouchUpInside];

            if ([pointAnnotation.tag intValue] >= 10000) {
                userLocationButton.tag = newTag;
            }else{
                userLocationButton.tag = [pointAnnotation.tag intValue];
            }

            [userLocationButton setBackgroundColor:[UIColor clearColor]];
            [annImg addSubview:userLocationButton];
            [userLocationButton addSubview:currentUserPictureView];

            [userLocationButton release];
            [currentUserPictureView release];
            [currentUserPicture release];
        } 
```

# javascript - D3 拖动行为和 onclick 事件 - 第一次点击被忽略

> ID：15363223
> 
> 赞同：0
> 
> 时间：2013-03-12T13:57:14.310
> 
> 标签：javascript, html, d3.js

我`svg`在屏幕中间有一个区域，通过使用 D3 拖动行为，我在其中移动了一些 SVG 元素。在下面`svg`，我有一些选项，`div`如下所示：

```
<div id="gui-options">
    <div onclick="sortCards()">
        <span>Sort cards</span>
    </div>
    ...
</div> 
```

当我在 svg 中拖动一些元素时，我必须单击两次才能触发`sortCards()`. 第一次点击未注册。执行`sortCards()`对于这个问题并不重要。

我试图在 DOM 准备好后添加点击处理程序，但这没有任何区别。

禁用拖动功能时我没有这个问题。如果我在一个选项上单击两次，我只需单击一次即可切换其他选项。但是，如果我拖动一些元素，则需要单击两次才能“更改焦点”。

您对解决方案可能隐藏的地方有什么建议吗？

# shell - 将 () 存储在 unix shell 脚本的变量中

> ID：15363225
> 
> 赞同：0
> 
> 时间：2013-03-12T13:57:16.230
> 
> 标签：shell, unix, sh

知道如何将特殊字符打开和关闭大括号 () 存储在 unix shell 脚本中使用的变量中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:59:16.617

确保在括号周围使用引号：

```
$ x='()' 

$ echo $x
() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:00:26.990

这对我有用

```
#!/bin/sh
asdf="()"
echo $asdf 
```

# blogs - 我的 在“最小宽度”“最大宽度”之间选择最大宽度

> ID：15363230
> 
> 赞同：0
> 
> 时间：2013-03-12T13:57:24.883
> 
> 标签：blogs, blogger, css

我有一个博客，我想每行有 2 个帖子。为此，我已经尝试过：

`.post { float:left; width:45%;}`

很好，我有 2 个帖子向左浮动，它们在同一行。

但是，当我输入帖子时，我希望帖子的宽度更大，但它的宽度与以前相同，这是我现在不想要的。所以我想做类似的事情：

`.post { float:left; min-width:45%; max-width:90%; width:auto ;}`

但现在对于宽度转向总是选择`max-width`.

`min-width`只有在有足够空间的情况下，我将如何优先考虑`max-width`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:02:07.563

您也许应该将 post 元素放入一个持有的 div 中，并给该潜水一个特定的大小。持有 div 将始终是最大尺寸。

# jquery - jQuery DatePicker 年份问题

> ID：15363232
> 
> 赞同：0
> 
> 时间：2013-03-12T13:57:25.620
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

这是我的`datepicker`设置：

```
 $('#game_datepicker').datepicker({
    yearRange: "-3:+0",
    changeMonth: true,
    changeYear: true,
    dateFormat: 'M/dd/yy',
    onSelect: function(dateText, object) {
        console.log(dateText);
      object.input.parent().find('label').hide();
    }
  }); 
```

所以年份的下拉菜单是 2010-2013，但是当我实际选择一个日期时，设置的年份是 1990。当我检查日历网格中的日期时，`data-year`设置为 1990。还有其他人遇到这个问题吗？我似乎无法让它正常工作

# c# - 将远程事务性 MSMQ 与 WCF 一起使用

> ID：15363233
> 
> 赞同：0
> 
> 时间：2013-03-12T13:57:29.953
> 
> 标签：c#, wcf, transactions, msmq

我在 Windows Server 2008 上的远程事务队列中使用 WCF 中的 MSMQ `NetMsmqBinding`。写入正常，但当`ExactlyOne`属性设置为 true 时无法读取。我希望队列在异常失败时重试。

1.  如何在私有远程队列中读取消息？
2.  失败时如何使队列重试？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-16T09:14:16.850

我知道我迟到了 3 年，但我遇到了同样的问题，下面的 MSDN 文档帮助我解决了这个问题：[https ://msdn.microsoft.com/en-us/library/ms700128(v=vs.85 ).aspx](https://msdn.microsoft.com/en-us/library/ms700128(v=vs.85).aspx)

分布式事务协调器应配置为允许两台服务器上的入站/出站连接。

# jasper-reports - 动态改变元素的宽度

> ID：15363236
> 
> 赞同：1
> 
> 时间：2013-03-12T13:57:31.433
> 
> 标签：jasper-reports

我需要在 JasperReports 中创建目录。我已经实现了这一点，但不能对 TOC 中的行做任何事情。

目前它们有一个静态宽度：

```
Chapter 1          ........ 2
Long Chapter Name  ........ 3
End                ........ 4 
```

我想将虚线拉伸到章节名称的宽度。像这儿：

```
Chapter 1 ................. 2
Long Chapter Name ......... 3
End ....................... 4 
```

我怎样才能做到这一点？JR 中是否有一些“填充”功能，或者我应该为此任务创建脚本？谢谢！

PS 我正在使用 jasper 报告 5.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:30:59.707

这不是一个非常整洁的方法，但我会在您的文本框中绘制许多点并使用框架隐藏结尾以允许写入页码。

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="table of content" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="df5894b6-0e62-4082-bdb8-3f0a1b26a2f4">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <queryString>
        <![CDATA[SELECT
     1 AS page,
     'test' AS title
FROM
     "account" account
Union
SELECT
     4 AS page,
     'chapter 2' AS title
FROM
     "account" account
Union
SELECT
     20 AS page,
     'chapter 3: hello' AS title
FROM
     "account" account]]>
    </queryString>
    <field name="page" class="java.lang.Integer"/>
    <field name="title" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="20" splitType="Stretch">
            <staticText>
                <reportElement uuid="2e81fd32-3b8d-4b98-b96d-6409afb8d16f" x="0" y="0" width="555" height="20"/>
                <textElement>
                    <font isBold="true" isStrikeThrough="false"/>
                </textElement>
                <text><![CDATA[Table of content]]></text>
            </staticText>
        </band>
    </title>
    <columnHeader>
        <band splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement uuid="c8707508-946a-48ae-ae75-61810003e1db" x="0" y="0" width="555" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{title}+"  .............................................................................................................................."]]></textFieldExpression>
            </textField>
            <frame>
                <reportElement uuid="4040d203-6b49-4da2-8bcf-f3d6d48c7fd7" mode="Opaque" x="341" y="0" width="214" height="20"/>
            </frame>
            <textField>
                <reportElement uuid="472f8f95-fdea-4cd9-b3a5-a1b9b66a8c44" mode="Opaque" x="321" y="0" width="20" height="20"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA[$F{page}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

# mysql - 根据可变期间分组日期

> ID：15363239
> 
> 赞同：2
> 
> 时间：2013-03-12T13:57:54.993
> 
> 标签：mysql, sql

我有两张表如下------

**表格1**

```
CalenderType  periodNumber periodstartdate
1             1            01-01-2013
1             2            11-01-2013
1             3            15-01-2013
1             4            25-01-2013
2             1            01-01-2013
2             2            15-01-2013
2             3            20-01-2013
2             4            25-01-2013 
```

**表2**

```
Incidents  Date
xyz        02-01-2013
xxyyzz     03-01-2013
ccvvb      12-01-2013
vvfg       16-01-2013
x3         17-01-2013
x5         24-01-2013 
```

现在我想找出给定时间段内发生的事件数量（日历类型可能会在运行时发生变化）查询应该看起来像这样

```
select ....... 
from ......
where CalendarType=1 
```

应该返回

```
CalendarType PeriodNumber Incidents
1            1            2
1            2            1
1            3            3
1            4            0 
```

有人可以建议我一种方法或任何方法如何实现这一点。

注意：每个`period`都是可变的，`size.peroid1`可能有 10 天`period2`可能有 5 天等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:16:55.857

我认为这可以满足您的要求，尽管我不明白您是如何得出示例输出的：

```
select t.CalenderType, t.periodNumber, count(*) as Incidents
from Table1 t
inner join (
  select t2.Date, t2.Incidents, max(t1.periodstartdate) as PeriodStartDate
  from Table2 t2
  inner join Table1 t1 on t2.Date >= t1.periodstartdate
  where CalenderType = 1
  group by t2.Date, t2.Incidents
) a on t.periodstartdate = a.PeriodStartDate
where CalenderType=1
group by t.CalenderType, t.periodNumber 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/a25af/67)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:16:20.337

试试这个，一个更通用的解决方案，[SQLFiddle](http://sqlfiddle.com/#!2/a25af/73/0)（感谢 RedFilter 的模式）：

```
SELECT t1.CalenderType,  t1.periodNumber, count(Incidents)
FROM Table1 t1, Table1 t11, Table2 
WHERE 
(
  (
    t1.CalenderType = t11.CalenderType 
    AND t1.periodNumber = t11.periodNumber - 1
    AND Date BETWEEN t1.periodstartdate AND t11.periodstartdate 
  ) 
  OR
  (
    t1.periodNumber = (SELECT MAX(periodNumber) FROM Table1 WHERE t1.CalenderType = CalenderType)
    AND Date > t1.periodstartdate
  )

) 
GROUP BY  t1.CalenderType,  t1.periodNumber
ORDER BY  t1.CalenderType,  t1.periodNumber 
```

# java - 向 JList 添加一行

> ID：15363240
> 
> 赞同：0
> 
> 时间：2013-03-12T13:57:58.303
> 
> 标签：java, mysql, row, jlist

我正在尝试向 JList 添加一行，但它没有发生。我正在使用 Java + MySQL。但是在使用时`System.out.println()`，它可以工作。

下面是接收数据的代码：

```
public void writeResultSet(ResultSet resultSet) throws SQLException {

    while (resultSet.next()) {

        String student_firstname = resultSet.getString("student_firstname");
        String student_middlename = resultSet.getString("student_middlename");
        String student_lastname = resultSet.getString("student_lastname");

        DefaultListModel listModel = new DefaultListModel();
        listModel.addElement("" + student_firstname + " " + student_middlename + " " + student_lastname);
        jList1.setModel(listModel);

    }
} 
```

此外，如果我尝试添加 listmodel`private void jButton3ActionPerformed(java.awt.event.ActionEvent evt)`但使用定义的字符串，它可以工作，但我需要将它插入此方法中，以便我可以从 MySQL 获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:12:13.220

正如所指出的，您正在`ListModel`为结果集中的每条记录重新实例化并将其设置为 JList，这意味着您将看到的唯一内容是结果集中的最后一条记录。相反，您应该这样做：

```
public void writeResultSet(ResultSet resultSet) throws SQLException {

    DefaultListModel listModel = new DefaultListModel();

    while (resultSet.next()) {

        String student_firstname = resultSet.getString("student_firstname");
        String student_middlename = resultSet.getString("student_middlename");
        String student_lastname = resultSet.getString("student_lastname");

        listModel.addElement("" + student_firstname + " " + student_middlename + " " + student_lastname);

    }

jList1.setModel(listModel);

} 
```

# java - JAVA中的长轮询Jquery？

> ID：15363241
> 
> 赞同：2
> 
> 时间：2013-03-12T13:58:03.590
> 
> 标签：java, jquery, servlets, long-polling

这是我的问题`Java Chat application`。

当我的应用程序启动时，我将`pingAction()`在我的外部 Jquery 中调用。

将`Jquery pingAction`是，

```
function pingAction(){

    $.ajax(
            {
                type: "post",
                url: "PingAction",
                async:     false,
                data : "userId="+encodeURIComponent(userId)+"&secureKey="+encodeURIComponent(secureKey)+"&sid="+Math.random() ,
                cache:false,
                complete: pingAction,
                timeout: 5000 ,
                contentType: "application/x-www-form-urlencoded; charset=utf-8",
                scriptCharset: "utf-8" ,
                dataType: "html",

                error: function (xhr, ajaxOptions, thrownError) {
                alert("xhr.status : "+xhr.status);

                if(xhr.status == 12029 || xhr.status == 0){
                    //alert("XMLHttp status : "+xhr.status);
                    $("#serverMsg").css("backgroundColor" , "yellow");
                    $("#serverMsg").text("Your Network connection is failed !");
                    $("#serverMsg").show();
                }
                //setTimeout('pingAction()', 5000);
                xhr.abort();
            },

            success: function( responseData , status){
                if($("#serverMsg").text() == "" || $("#serverMsg").text() == "Your Network connection is failed !"){
                    disableServerMessage();
                }

                if(responseData != "null" && responseData.length != 0  && responseData != null){

                    var stringToArray = new Array;
                    stringToArray = responseData.split("<//br//>");
                    var len = stringToArray.length;
                    for(var i=0;i<len-1;i++){
                        getText(stringToArray[i]);

                    }
                }

                //setTimeout('pingAction()', 5000);
            } 

            }                           
    );

} 
```

我的`PingAction Servlet`意志是

```
public class PingAction extends HttpServlet {
    private static final long serialVersionUID = 1L;

    private String secureKey;
    private String userId;
    private int fromPosition ;
    private FlexChatProtocol protocol = null;
    private Ping ping = null;

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        response.setCharacterEncoding("UTF-8");
        response.setContentType("UTF-8");
        PrintWriter out = response.getWriter();

        request.setCharacterEncoding("UTF-8");

        secureKey = request.getParameter("secureKey");
        userId = request.getParameter("userId");
        CustomerInfo customer = ApplicationInfo.customerDetails.get(userId);
        if(customer != null){
            fromPosition = customer.getFromPosition();
        }

        if(ApplicationInfo.flexProtocol != null ){

            protocol = ApplicationInfo.flexProtocol;

            ping = new Ping();
            ping.sendPing(secureKey, userId, fromPosition+1, protocol, serverMessage);

            if(customer != null){
            message = customer.getFullMessage();
            }

            out.println(message);
        }
    }

} 
```

在使用 之前`Long Poling`，我将调用`pingAction() in javaScript`for`5 seconds`来`setTimeInterval()`刷新连接并获取服务器消息。

现在我需要`LONG POLLING concept`在聊天应用程序中使用。所以我修改`Jquery pinAction()`了你在上面看到的内容。

我怎样才能实现`LONG POLLING`使用`JQUERY`？

希望我们的堆栈成员能帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:47:16.617

```
private ChatContext context = ChatContext.getInstance();

 protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter out = response.getWriter();
    Long lastmessage = // just put this somewhere

    List<String> messages = context.getMessagesIHaventGotYet(lastmessage); // blocking call
    Object formatedMessages = formatmessages(messages);
    out.write(formatedMessages);

 } 
```

context.getMessagesIHaventGotYet(); 应该是一个阻塞操作，所以它会一直等待直到新消息到达，然后它才会开始行动。或类似的规定。

基本上长轮询意味着服务器“挂起”，直到从某个地方检索到它需要的信息，然后将其写入其输出缓冲区并关闭连接，客户端再次实例化连接以开始另一个长轮询。

# c# - 实体框架新事务不允许，因为会话中有其他线程在运行，多线程保存

> ID：15363242
> 
> 赞同：13
> 
> 时间：2013-03-12T13:58:10.750
> 
> 标签：c#, multithreading, entity-framework-4, savechanges

我正在尝试将多线程进程的日志保存在数据库中，但出现以下错误：不允许新事务，因为会话中正在运行其他线程。

在每个胎面我都有这个功能：

```
 internal bool WriteTrace(IResult result, string message, byte type)
    {
        SPC_SENDING_TRACE trace = new SPC_SENDING_TRACE(
                        message,
                        Parent.currentLine.CD_LINE,
                        type,
                        Parent.currentUser.FULLNAME,
                        Parent.guid);
        Context.SPC_SENDING_TRACE.AddObject(trace);
        if (Context.SaveChanges(result) == false)
            return false;
        return true;

    } 
```

每个线程的上下文不同，但与数据库的连接始终相同。

有没有办法解决这个问题？

谢谢安德里亚

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-12T14:29:13.077

您应该为每个事务创建一个上下文，然后将其处理掉，您可以这样做：

```
using(var ctx = new MyContext()) {
    //do transaction here
} 
```

在封闭的括号之后，上下文被处理。

为了更好地理解，请参阅[这篇文章](https://stackoverflow.com/questions/9415955/c-sharp-working-with-entity-framework-in-a-multi-threaded-server)，您可以在[ken2k](https://stackoverflow.com/users/870604/ken2k)中找到一个很好的答案。希望你能解决你的问题:)

**更新：**

您还应该尝试添加`.ToList()`到您拥有的每个 LINQ 查询中。迭代 LINQ 结果时，在迭代完成之前不能进行任何更改。检查您是否有类似的东西或共享更多代码，即您调用的代码段`WriteTrace`。希望这一次这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T00:07:07.707

我在多线程环境中使用实体框架，其中任何线程、ui 和后台（STA 和 MTA）都可以同时更新同一个数据库。我通过在任何新的后台线程上开始使用时从头开始重新创建实体连接来解决这个问题。检查实体连接实例 ConnectionString 显示了一个阅读器 guid，我假设它用于链接常见的连接实例。通过从头开始重新创建实体连接，每个线程的 guid 值都不同，并且似乎不会发生冲突。

```
// Build the connection string.

  var sqlBuilder = new SqlConnectionStringBuilder();
  sqlBuilder.DataSource = serverName;
  sqlBuilder.InitialCatalog = databaseName;
  sqlBuilder.MultipleActiveResultSets = true;
  ...
  var providerString = sqlBuilder.ToString();
  var sqlConnection = new SqlConnection(providerString);

// Build the emtity connection.

  Assembly metadataAssembly = Assembly.GetExecutingAssembly();
  Assembly[] metadataAssemblies = { metadataAssembly };
  var metadataBase = @"res://*/{0}.csdl|res://*/{0}.ssdl|res://*/{0}.msl";
  var dbModelMetadata = String.Format(metadataBase, objectContextTypeModelName);
  // eg: "res://*/Models.MyDatabaseModel.csdl|res://*/Models.MyDatabaseModel.ssdl|res://*/Models.MyDatabaseModel.msl"
  var modelMetadataPaths = modelMetadata.Split('|');
  var metadataWorkspace = new MetadataWorkspace(modelMetadataPaths, metadataAssemblies);
  var entityDbConnection = new EntityConnection(metadataWorkspace, sqlConnection);
  return entityDbConnection; 
```

# c# - 获取类和命名空间中的全局变量列表

> ID：15363243
> 
> 赞同：-4
> 
> 时间：2013-03-12T13:58:18.130
> 
> 标签：c#, regex, pattern-matching

我有以下课程。

```
 namespace Automate
{
    class Class1
    {
        private bool global1;
        private bool global2;
        public void Method(bool param1)
        {
            bool flag = false;
        }
    }
    class Class2
    {
        private bool global1;
        private bool global2;
        public void Method(bool param1)
        {
            bool flag = false;
        }
    }
} 
```

现在我想要 1 类和 2 类的所有全局变量，但不想要局部变量。

例如

```
Class1 : Global1,Global2
Class2 : Global1,Global2 
```

输出不应包含

```
`flag & param1` 
```

我该如何编写正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:15:11.477

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;

namespace ConsoleApplication21
{
    class Program
    {
        static void Main(string[] args)
        {
            class1 c1 = new class1();
            FieldInfo[] fields = c1.GetType().GetFields(
                         BindingFlags.NonPublic |
                         BindingFlags.Instance);
            Console.WriteLine("class1");
            foreach (FieldInfo fi in fields)
            {
                Console.WriteLine(fi.Name);
            }

            class2 c2 = new class2();
            fields = c2.GetType().GetFields(
                         BindingFlags.NonPublic |
                         BindingFlags.Instance);

            Console.WriteLine("class2");
            foreach (FieldInfo fi in fields)
            {
                Console.WriteLine(fi.Name);
            }

            Console.ReadKey();
        }
    }

    public class class1
    {
        private string field1;
        private string field2;

        private void a(string hello)
        {

        }
    }

    public class class2
    {
        private string field3;
        private string field4;

        private void a(string hello)
        {

        }
    }
} 
```

对不起，我很快就把它放在一起了。还要重新阅读你想要一种方法来使用正则表达式而不是不确定你的意思的问题，但我上面的例子会让你得到你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:18:03.853

我假设您将问题中的代码作为文本文件，并且您想从它们中“grep”每个类的字段。

如果您假设每个字段都在一行上声明并在其前面有一个访问修饰符，那么这很容易。你只需 grep

```
(public|internal|protected|private)[^(){}]*; 
```

该`[^(){}]`部分确保我们不会获得属性或方法。

但是，也可以在没有访问修饰符的情况下声明字段：

```
class Class3 
{
    bool someBool;
    public void Method() {
        bool someBool;
    }
} 
```

如您所见，声明字段的代码和声明变量的代码`Method`完全相同。因此，不可能使用正则表达式仅检索字段。

解决此问题的一种方法是查找`class`关键字，然后计算大括号的数量。如果你遇到了一个`{`，你就在类范围内，你可以 grep 查找字段。如果你遇到了两个`{`，你可能是在一个方法中。当然你也得考虑`}`到，因为字段可能不会在类的顶部声明。

当代码在字符串文字中有大括号时，这会出现问题，因为这样您的大括号不再匹配。要真正真正解决这个问题，您需要一个[C# 解析器](https://stackoverflow.com/questions/81406/parser-for-c-sharp)或[C# 编译器](http://www.mono-project.com/Main_Page)。

# java - JavaCard 的数学库？

> ID：15363244
> 
> 赞同：1
> 
> 时间：2013-03-12T13:58:26.133
> 
> 标签：java, math, javacard

我目前正在开发一个 JavaCard 项目（v.2.2.2），我需要使用平方根、对数等来计算值......

我知道`Math`该类在 JavaCard API 中不可用，并且想知道是否存在另一个提供此类操作的库？

而且我不能使用`double`值，但我需要。有没有办法`double`在 JavaCard API 中表示一个值并执行操作（例如 log、sqrt 等）？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T11:19:29.323

javacard 2.2.2 仅支持 boolean、byte、short 和可选的 int。如果您真的需要执行数学，那么您需要使用棘手的方法创建自己的课程，当然结果并不精确。

最佳实践是卡只存储数据并进行简单的计算/加密，服务器/终端端计算复杂的东西。在卡中存储双精度的解决方法是使用字节数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-05T09:03:29.377

自 2.2.2 以来，JavaCard API 中有[javacardx.framework.math](https://docs.oracle.com/javacard/3.0.5/api/javacardx/framework/math/package-summary.html)包，但功能有限（仅加、减、乘）。但是，物理卡经常不支持，即使支持，它也可能[只有 8 个字节长](https://stackoverflow.com/questions/35962501/biginteger-subtraction-in-javacard)。

[JCAlgTest](https://www.fi.muni.cz/~xsvenda/jcalgtest/table.html#package_support)现在还提供所有 JavaCard 包的结果，包括数据库中卡片支持的所有版本（包括 javacardx.framework.math）。

或者，您可以考虑尝试[JCMathLib library](https://github.com/OpenCryptoProject/JCMathLib)。该库仅使用公共 JC API 调用来为 BigInteger 提供任意长度（以及 ECPoint 操作），并且是旧版[BigNat 库](https://www.sos.cs.ru.nl/ovchip/)的改进版本。它将消耗大约 1KB 的 RAM，并且需要支持 ECC 的卡（如果您喜欢使用 ECPoint，仅 BigInteger 不需要它）。该实现仅部分在硬件中完成（使用 RSA 和 ECC 协处理器），部分在软件中完成，因此对侧信道和故障诱导攻击的抵抗力较差。

# popup - WP8：没有可用的弹出窗口？

> ID：15363245
> 
> 赞同：2
> 
> 时间：2013-03-12T13:58:29.080
> 
> 标签：popup, windows-phone-8

我想编写一个小弹出窗口来获取一些用户输入（一个文本区域、一个输入字段和两个按钮）。什么组件可以承载这些组件？好像没有`Popup`课？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:15:14.137

这是一个基本的弹出窗口

```
<Popup  Name="m_Popup"  IsOpen="False" Opened="OnPoputOpen" Closed="OnPopupClose" >
        <Grid >
            <Grid.RowDefinitions>
                <RowDefinition Height ="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>                                
            </Grid.RowDefinitions> 

            <TextBox Name="m_TextBox" Grid.Row="0"/>
            <Button Name="m_Button1" Grid.Row="1"/>
            <Button Name="m_Button2" Grid.Row="2"/>
        </Grid>
    </Popup> 
```

您可以使用 控制可见性`IsOpen`。这是[弹出类的链接](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup%28v=vs.95%29.aspx)

祝你好运 （：

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-03-12T14:03:23.913

不，SDK 中未提供此功能。您必须自己构建它。

# coffeescript - 如何将 CoffeeScript 与 Google Closure 一起使用

> ID：15363246
> 
> 赞同：7
> 
> 时间：2013-03-12T13:58:30.800
> 
> 标签：coffeescript, google-closure

最近我开始使用[Google Closure Tools](https://developers.google.com/closure/)进行 javascript 开发。到目前为止，我一直使用 CoffeeScript 编写代码[，但是，](http://coffeescript.org/) [CoffeeScript](http://coffeescript.org/)生成的 javascript似乎与 Google Closure Compiler 的高级模式不兼容。

CoffeeScript 编译器是否有任何扩展添加 Google Closure 支持？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T13:58:30.800

有多种工具旨在使[CoffeeScript](http://coffeescript.org/ "咖啡脚本")可与[Google Closure Tools](https://developers.google.com/closure/ "谷歌关闭工具")一起使用。我将描述其中三个：

## Bolinfest 的 CoffeeScript 分支

特征：

*   修复了函数绑定、循环、理解、`in`运算符和其他各种不兼容问题
*   修复了 Google Closure 的类语法
*   自动生成`@constructor`和`@extends`注释
*   `goog.provide`为每个声明的类自动插入语句
*   Python 的类似`include namespace as alias`支持翻译为`goog.require`和`goog.scope`

缺点：

*   构造函数必须是类中的第一个语句
*   不能为类内的类使用短别名（即`My.Long.Named.Car`，不能`Car`像纯 CoffeeScript 允许的那样在类定义中引用类）
*   用户编写的 JsDoc 注释不会与编译器生成的注释合并
*   缺少`provide`等效项`include`
*   不支持类型转换，这只能通过在反引号“`”中插入纯javascript代码来完成
*   基于过时的 CoffeeScript 1.0

[在http://bolinfest.com/coffee/](http://bolinfest.com/coffee/)阅读更多信息

## 我的 CoffeeScript 分支

**免责声明：我是此解决方案的作者**

该解决方案受到 Bolinfest 工作的启发，并通过以下方式对其进行了扩展：

*   构造函数可以放置在类内的任何位置
*   类的短别名使用`goog.scope`
*   用户编写的 JsDoc 注释与编译器生成的合并，用户编写`@constructor`的`@extends`注释被生成的替换
*   每个命名空间大多只提供或包含一次，所提供的命名空间从不包括在内。您可以通过关键字提供命名空间`provide`
*   支持使用`cast<typeToCastTo>(valueToBeCast)`语法进行类型转换
*   基于 CoffeeScript 1.6

[在https://github.com/hleumas/coffee-script/wiki](https://github.com/hleumas/coffee-script/wiki)阅读更多内容

## Steida的Coffee2Closure

与上述两种解决方案不同，Steida 的 Coffee2Closure 是上游非调整 CoffeeScript 生成的 javascript 代码的后处理器。这种方法有一个主要优势，即随着 CoffeeScript 的持续开发，它不需要或只需要轻微的更新，并且仍然是实际的。但是，由于这种方法的本质，某些功能无法交付。目前它只修复了类和绑定、循环、`in`运算符和其他一些不兼容问题。它不支持自动注释生成、类型转换或自定义关键字。

[https://github.com/Steida/coffee2closure](https://github.com/Steida/coffee2closure)

# angularjs - $watch 未在数组更改时触发

> ID：15363259
> 
> 赞同：57
> 
> 时间：2013-03-12T13:58:57.663
> 
> 标签：angularjs, angularjs-scope

我试图弄清楚为什么我`$watch`的没有被触发。这是来自相关控制器的片段：

```
$scope.$watch('tasks', function (newValue, oldValue) {
    //do some stuff
    //only enters here once
    //newValue and oldValue are equal at that point
});

$scope.tasks = tasksService.tasks();

$scope.addTask = function (taskCreationString) {
    tasksService.addTask(taskCreationString);//modifies tasks array
}; 
```

在我看来，`tasks`显然正在正确更新，因为我的长度限制如下：

```
<span>There are {{tasks.length}} total tasks</span> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-03-12T14:20:28.617

尝试`$watch('tasks.length', ...)`或`$watch('tasks', function(...) { ... }, true)`。

默认情况下，[$watch](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)不检查对象是否相等，而只是作为参考。因此，`$watch('tasks', ...)`将始终简单地返回相同的数组引用，它不会改变。

**更新：** Angular v1.1.4 添加了一个[$watchCollection()](http://code.angularjs.org/1.1.4/docs/api/ng.%24rootScope.Scope#%24watchCollection)方法来处理这种情况：

> Shallow 监视对象的属性并在任何属性更改时触发（对于数组，这意味着监视数组项，对于对象映射，这意味着监视属性）。如果检测到更改，`listener`则触发回调。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-12T17:08:30.207

@Mark 的回答非常好。除了他的回答之外，`$watch`您还应该注意功能的一项重要功能。

函数声明如下`$watch`：

```
$watch(watch_expression, listener, objectEquality) 
```

仅当当前*监视表达式*（在您的情况下为）中的值与先前对*监视表达式*的调用不相等时，才调用`$watch` *侦听器函数。*Angular 会保存对象的值以供以后比较。因此，观看复杂的选项将对内存和性能产生不利影响。基本上，*手表表达式*值越简单越好。*`'tasks'`*

 **** * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-08T05:05:17.003

我建议尝试

```
$scope.$watch('tasks | json', ...) 
```

这将捕获对数组的所有更改`tasks`，因为它将序列化的数组作为字符串进行比较。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-03T10:29:10.640

对于一维数组，您可以使用[$watchCollection](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#methods_$watchcollection)

```
$scope.names = ['igor', 'matias', 'misko', 'james'];
$scope.dataCount = 4;

$scope.$watchCollection('names', function(newNames, oldNames) {
  $scope.dataCount = newNames.length;
}); 
```***

# mysql - phpmyadmin 的管理员权限丢失

> ID：15363263
> 
> 赞同：2
> 
> 时间：2013-03-12T13:59:02.030
> 
> 标签：mysql, phpmyadmin

我想`phpmyadmin`使用`mysql`数据库更改密码->`users`表..我更改了密码用户root，一旦我重新启动`phpmyadmin`所有数据库都消失了，就像我不再是管理员一样，现在我只有2个默认数据库 `information_schema`和`test` ![在此处输入图像描述](../Images/709d703d7e142c3ca2aba108b83b61d0.png)

这个问题的原因是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:02:29.610

您必须明确创建用户和密码。由于 mySQL 不支持自动创建用户名。

我相信这个问题之前已经回答过......

[mysql phpmyadmin 数据库用户密码](https://stackoverflow.com/questions/3266524/mysql-phpmyadmin-user-password-for-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T09:09:20.673

请遵循以下程序。

1.转到地址栏，然后输入 localhost (127.0.0.1) 的 IP 地址。2.在出现的窗口中输入用户名root，密码留空，然后按回车继续。

# mysql - MySQL重复查询

> ID：15363264
> 
> 赞同：1
> 
> 时间：2013-03-12T13:59:02.793
> 
> 标签：mysql, sql, relational-division

如果表中列出了两种类型的产品，我正在尝试列出查询。这是我的数据库中的内容：

**表格1**

```
productID    
productDescription   
productYear 
```

**表2**

```
porductID2
productDescription
productID (foreign Key from table1) 
```

表 1 有：

```
01, Ball, 2001
02, Cone, 2002
03, Cube, 2010 
```

表2有

```
01, BallBaring, 01
02, LittleBall, 01 
03, BallBaring, 02
04, LittleBall, 02
05, BallBaring, 03 
```

我试图只显示包含 BallBaring 和 LittleBall 的结果。因此，当我搜索结果时，它只显示包含 BallBaring 和 LittleBall 的结果：我有以下搜索：

```
SELECT table2.productDescription, table1.productDescription, table2.productID2 
FROM table1, table2 
WHERE table1.productID = table2.productID2 
  AND (table2.productDescription = 'LittleBall' 
       OR table2.productDescription = 'BallBaring'); 
```

但这会带回所有具有 BallBaring 或 LittleBall 的产品，而不仅仅是那些同时具有 BallBaring 和 LittleBall 的产品，如果我使用 AND 而不是 OR，它什么也不会带回来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:27:52.253

这个问题被称为`Relational Division`您正在搜索与所有条件匹配的特定值。

```
SELECT  a.*
FROM    table1 a
        INNER JOIN
        (
            SELECT  productID
            FROM    table2
            WHERE   productDescription IN ('BallBaring', 'LittleBall')
            GROUP   BY productID
            HAVING  COUNT(*) = 2
        ) b ON a.productID = b.productID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b50b5/1)
*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

输出

```
╔═══════════╦════════════════════╦═════════════╗
║ PRODUCTID ║ PRODUCTDESCRIPTION ║ PRODUCTYEAR ║
╠═══════════╬════════════════════╬═════════════╣
║         1 ║ Ball               ║        2001 ║
║         2 ║ Cone               ║        2002 ║
╚═══════════╩════════════════════╩═════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:01:06.737

看起来您正在加入`productID2`而不是外键 ( `productID`)。这应该有效：

```
SELECT b.productDescription, a.productDescription, b.productID2
FROM table1 a
JOIN table2 b ON b.productID = a.productID
WHERE b.productDescription IN ('LittleBall', 'BallBearing') 
```

**结果**

```
| 产品描述 | 产品描述 | 产品ID2 |
-------------------------------------------------- --------
| 小球 | 球 | 2 |
| 小球 | 锥体 | 4 |
```

[查看演示](http://sqlfiddle.com/#!2/98416/3)

# hibernate - 由于达到 maxPoolSize，应用程序冻结

> ID：15363266
> 
> 赞同：0
> 
> 时间：2013-03-12T13:59:11.830
> 
> 标签：hibernate, connection-pooling, c3p0

我的 Web 应用程序冻结时遇到问题。使用 JConsole 监控工具，我看到应用程序达到了 maxPoolSize。这导致应用程序冻结。

系统上有大约 20 个用户，每个用户可以有多个 Web 会话。

这是应用程序中的 HttpServlet 示例。

```
public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
    Session sess = null;
    Transaction tx = null;
    try {
        sess = RuntimeContext.getCurrentSession();
        tx = sess.beginTransaction();
        doingStuffWithSession(req, res, sess);
        if (!tx.wasCommitted()) {
            tx.commit();
        }
    } catch (Exception e) {
        handleException(e, req, sess);
    } finally {
        if (sess != null && sess.isOpen() && tx != null && tx.isActive()) {
              tx.rollback();
        }
    }
} 
```

这是我在 c3p0 中的休眠属性：

```
<properties>
    <property name="hibernate.dialect" value="org.hibernate.dialect.SQLServerDialect"/>
    <property name="hibernate.archive.autodetection" value="class, hbm"/>
    <property name="hibernate.c3p0.min_size" value="20" />
    <property name="hibernate.c3p0.max_size" value="200" />
    <property name="hibernate.c3p0.timeout" value="300" />
    <property name="hibernate.c3p0.max_statements" value="50" />
    <property name="hibernate.c3p0.idle_test_period" value="3000" />
</properties> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:37:48.097

看起来您正在打开会话（在您的 RuntimeContext 中），而不是在每次使用时打开和关闭（）它们。会话包装连接；如果您不关闭会话，您将耗尽池。提交或回滚事务是不够的。

您应该为每个客户端打开一个新会话，并在客户端完成后立即关闭它。参见例如这里介绍的成语：[http ://www.tutorialspoint.com/hibernate/hibernate_sessions.htm](http://www.tutorialspoint.com/hibernate/hibernate_sessions.htm)

# jquery - 在调整窗口大小之前，无法正确读取 Jquery

> ID：15363269
> 
> 赞同：0
> 
> 时间：2013-03-12T13:59:14.573
> 
> 标签：jquery, resize, window, margins

所以我有一个函数可以获取内容的大小（固定宽度）以及边距和边框，并调整容器的大小以始终保持内容居中，但是当页面加载时，所有内容始终只出现在一列中，直到我调整窗口大小（变小或变大都可以）。这是指向我托管它的站点的链接以及该功能的代码...知道为什么会发生这种情况以及如何解决此问题吗？

[http://testingmycode.tumblr.com/](http://testingmycode.tumblr.com/)

```
function resizeContainer(size, distance) {
var postWidth = size * 2;
var postApart = distance * 3;
return postWidth + postApart + 12;
};
$(document).ready(function(){
var width = Number($('#entry').width());
var margin = Number($('#entry').css('margin-left').replace('px',''));
$('#posts').width(resizeContainer(width,margin));
$('#topbar').width(resizeContainer(width,margin));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:34:04.900

尝试在窗口就绪而不是文档就绪时启动脚本：

```
function resizeContainer(size, distance) {
var postWidth = size * 2;
var postApart = distance * 3;
return postWidth + postApart + 12;
};
$(window).ready(function(){
var width = Number($('#entry').width());
var margin = Number($('#entry').css('margin-left').replace('px',''));
$('#posts').width(resizeContainer(width,margin));
$('#topbar').width(resizeContainer(width,margin));
}); 
```

# visual-studio-2012 - 如何避免 CR13 更改我的 VS2012 项目的文件编码？

> ID：15363270
> 
> 赞同：0
> 
> 时间：2013-03-12T13:59:15.583
> 
> 标签：visual-studio-2012, crystal-reports

上周我将一个大型项目从 Visual Studio 2005 升级到 Visual Studio 2012，一切正常，甚至是使用 Crystal Reports 10（VS2005 附带的开发版）制作的报告。

我刚刚安装了 RC13，所以我可以在 VS2012 中编辑 RPT 文件，但是我第一次打开项目时收到一条消息，告诉我应该将我的项目“升级”到当前版本的 CR，所以我做到了。

问题是它“触及”了每个单独的代码文件（所有 X.vb 文件），现在如果这些文件的变量名带有“ñ”（ASCII 164），则无法编译：我有很多变量，例如`TamañoPagina`和`FechaMañana`（我说西班牙语），我无法通过 1500 个文件更改变量名。

我可以使用我在 CR 升级之前所做的备份，但我每次打开它时都会问我。

我的问题是：如何防止 CR13 更改 VS2012 项目中文件的文件编码（我想）？还是每次打开项目时都避免该消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:35:13.137

看起来我找到了导致问题的原因：问题不在 *.vb 文件中，而是在 web.config 中进行了一次更改。CR13 改变了这一点：

```
<globalization culture="en-US"/> 
```

对此：

```
<globalization culture="en-US" fileEncoding="utf-8"/> 
```

这个新属性（不知何故）是编译器无法识别变量名中的“ñ”字符的罪魁祸首。

因此，程序是将项目升级到 RC13（在打开项目时询问），然后删除`FileEncoding`添加的属性。

# jquery - jQuery访问html5数据元素中的JSON数据在访问键时返回未定义

> ID：15363274
> 
> 赞同：0
> 
> 时间：2013-03-12T13:59:22.390
> 
> 标签：jquery, google-maps-api-3, undefined, html5-data

嗨，我正在尝试在单击图形时让一些图钉显示在谷歌地图上。我将我需要的所有数据存储在跨度标签上的数据位置元素中：

```
<span class="showOnMap" data-location="{"lat":"51.4894805","lng":"-0.2942533000000367","name":"Brentford Towers","addr":"Green Dragon Lane\r\nBrentford TW8 0DF","pinType":"loc"}">    <img width="32" height="32" src="/images/Icons/map-icon.png">
</span> 
```

我的点击功能是：

```
$('.showOnMap').click(function(){
            //alert('click');
            var myData = $(this).data('location');
            console.log(myData);
            createMarkerWithInfo(myData);
            //addToPanel(panelData);
    }) 
```

创建标记的功能给我带来了一个问题，当我提醒它或尝试使用它来创建标记时，传递给它的数据显示为未定义，但它确实显示在控制台中，但从我一直以来不应该信任读取控制台，因为它会显示当前状态的数据，即在实际调用控制台时可能没有定义它，

我不明白为什么它未定义为 json 数据在 dom 中（它实际上由 php 生成）所以在 dom 中定义，我可以理解如果我正在执行 Ajax 调用，为什么它可能会出现未定义。

```
function createMarkerWithInfo(myData){
        //console.log(myData);
        //coords = myData.latlng.split(','); 
        alert(myData + 'pinType: '+ myData.pinType + ' lat: '+ myData.lat + ' lng: ' +myData.lng);
        myLatLng = new google.maps.LatLng(myData.lat, myData.lng);  
        if(myData.pinType == 'loc'){
            var marker = new google.maps.Marker({
                position: myLatLng,
                map: map,
                title: myData.name,     
                icon: locimage,
                shadow: locshadow,
                shape: locshape
            });
        }
        if(myData.pinType == 'ub'){
            var marker = new google.maps.Marker({
                position: myLatLng,
                map: map,
                title: myData.name,     
                icon: ubimage,
                shadow: ubshadow,
                shape: locshape
            });
        }
        //alert('lat: '+myData.lat+','+'lng: '+myData.lng);
        // Wrapping the event listener inside an anonymous function
        // that we immediately invoke and passes the variable i to.
        (function(myData, marker) {
            // Creating the event listener. It now has access to the values of
            // myData and marker as they were during its creation
            google.maps.event.addListener(marker, 'click', function() {
                //create thecontent for the infowindow
                var content = createContent(myData);
                infowindow.setContent(content);
                infowindow.open(map, marker);
            });

        })(myData, marker);     
        markersArray.push(marker);
        markersPosArray.push(myLatLng);
        bounds.extend(myLatLng);
        map.fitBounds(bounds);
        zoomMarkers();
    } 
```

[http://2012.reelfilmlocations.co.uk/Modules/builder_areaLocs.php](http://2012.reelfilmlocations.co.uk/Modules/builder_areaLocs.php) 是我正在处理的页面，奇怪的是我有一个类似的页面（使用 php 包含而不是独立页面），它具有相同的功能并且它作品，我看了两者，也看不出差异是什么导致它未定义） [http://2012.reelfilmlocations.co.uk/locations-london-west/](http://2012.reelfilmlocations.co.uk/locations-london-west/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:52:05.767

由于某种原因，json 被包装在`[ ]`标签中。

`alert(myData + 'pinType: '+ myData[0].pinType + ' lat: '+ myData[0].lat + ' lng: ' +myData[0].lng);`

输出正确的值。

# android - Google PlayStore 如何处理应用权限更改？

> ID：15363277
> 
> 赞同：1
> 
> 时间：2013-03-12T13:59:27.003
> 
> 标签：android, google-play

Google Play 商店将应用分为三个不同的类别：

*   更新
*   手动更新
*   最新

应用商店将如何处理以下场景？

1.  发布具有**android.permission.INTERNET权限的应用程序（版本 1）**
2.  **使用权限android.permission.INTERNET**和**android.permission.READ_PHONE_STATE**发布更新（第 2 版） -->由于权限已更改，
    该应用现在已进入*手动更新。*
3.  发布另一个更新（版本 3）删除**android.permission.READ_PHONE_STATE**（因此权限被重置为状态*1*）

***问题一：***

如果用户在此期间**没有**更新应用程序（仍然是版本 1），应用程序会保留在*手动更新*组中还是会被放回*更新*（因为权限已重置为初始状态）？

***问题2：***

如果用户已经使用第 2 版，该应用程序是否会列在“*更新*”或*“手动更新”*下（权限已更改，但比以前少了一个权限）？

测试这些场景真的很难。所以我希望有人以前经历过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T22:09:51.463

好的，我刚刚使用测试应用重新创建了这两个场景，并得到了以下结果：

**场景 1：**
应用程序将从*手动更新*部分移回*（自动）更新*部分。

**场景二：**
无论权限数量增加还是减少，应用都会一直列在*Manual Updates*下，用户必须手动接受权限变更。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:34:57.163

***问题 1：*** 我相信该应用程序将在*更新*中，而不是在*手动更新*类别中，但我不能 100% 确定。

***问题 2：*** 我知道即使删除权限，该应用程序也将属于*手动更新*类别。它以前发生在我身上。

# mysql - UI 自动完成：为城市中的位置列表发出多个 ajax 请求或一次加载所有数据？

> ID：15363286
> 
> 赞同：1
> 
> 时间：2013-03-12T13:59:41.763
> 
> 标签：mysql, ajax, performance, autocomplete

我的应用程序中有一个文本框，允许用户在 UI 自动完成的帮助下选择一个位置。大约有**10,000 个**有效位置，用户**必须**从中选择一个。自动完成功能有两种实现：

1.  首次加载页面时获取位置列表并遍历数组以在 javascript 中的每次击键上查找匹配项
2.  每次击键时都发出 ajax 请求，因为在 MySQL（正在使用的数据库）中搜索要快得多？

性能方面，哪个更好？

初步测试表明，从性能的角度来看，一次加载数据是更好的方法。但是，此测试是在 JavaScipt 处理速度非常快的 MBP 上完成的。我不确定这种技术是否更适合低端安卓手机、旧系统等处理能力较低的机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:19:00.023

如果每次查询后端都没有优势，就不要这样做。

一直查询后端有什么好处？如果初始调用的返回数据量很大（带宽、准备它的 javascript 处理时间、时间），那么每次部分请求可能是更明智的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:23:07.833

您的问题围绕着哪个更快，在浏览器中处理超过 10,000 行，或者向远程服务器发送请求以返回较小的结果集。一个有趣的问题，它取决于运行时的上下文和环境。发送到远程服务器主要会导致网络延迟，服务器开销很小。

所以你在性能方程中有两个变量，客户端的处理速度和网络延迟。还有第三个变量，数据量，但在你的问题中这是恒定的 10k。

如果客户端浏览器和网络都很快，请使用您喜欢的任何内容。

如果网络速度较快，请使用远程服务器方法，但请注意不要让服务器因数千个小请求而过载。

如果客户端速度更快，可能会使用本地方法。（见下文）

如果两者都很慢，那么您可能需要选择其中一个，或者花费大量时间和精力来优化它。

两个客户端都很慢很容易发生，我在 3G 上的手机浏览器属于这一类，随机 Ajax 请求的网络延迟约为 200 毫秒，并且对于某些 JavaScript 也表现不佳。

由于用户认为性能是最重要的，您可以在初始页面加载中将每个字母的前 N ​​个值作为变量预加载，然后将这些用于第一次击键结果，这可以为您购买几毫秒。

如果您使用服务器方法，您始终可以为下一次击键发送请求的结果和一些值。这与用户看到的内容重叠，并使其在慢速网络上显得更加敏捷。例如

```
Client --> request 'ch'
Server responds with a few result for each potential next letter
    'cha' = ...
    'chb' = ...
    Etc 
```

This of course requires some specialized javascript to alternate between Ajax requests and using cached results from previous requests to prefill the selection.

If you are going with the local client searching through all 10k records, then make sure the server returns the records in sorted order. If your autocomplete scanning is able to use 'starting with' selection rather than 'contains' (eg typing RO will match Rotorua but not Paeroa) then you can greatly reduce processing time by using [http://en.wikipedia.org/wiki/Binary_search_algorithm](http://en.wikipedia.org/wiki/Binary_search_algorithm) techniques, and I'm sure there are lots of SO answers on this area.

# codeigniter - codeigniter 提交到未知表单

> ID：15363295
> 
> 赞同：0
> 
> 时间：2013-03-12T13:59:58.097
> 
> 标签：codeigniter, codeigniter-2

我有这个表格：

```
<html>
<head>
<title>التسجيل</title>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
</head>
<body dir="rtl">

<?php echo validation_errors(); ?>

<?php echo form_open('form'); ?>

<h5>الإسم الكامل:</h5>
<input type="text" name="fullname" value="" size="50" />

<h5>الجوال:</h5>
<input type="text" name="mobile" value="" size="50" />

<h5>هاتف المنزل:</h5>
<input type="text" name="home" value="" size="50" />

<h5>اسم المستخدم:</h5>
<input type="text" name="username" value="" size="50" />

<h5>كلمة السر:</h5>
<input type="text" name="password" value="" size="50" />

<h5>اعادة كلمة السر:</h5>
<input type="text" name="cpassword" value="" size="50" />

<h5>الايميل:</h5>
<input type="text" name="email" value="" size="50" />
 <br><br>
<div><input type="submit" value="التسجيل" /></div>

</form>

</body>
</html> 
```

请不要介意阿拉伯文字。控制器如下：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Membership extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->helper(array('form', 'url'));
        $this->load->library('form_validation');        
    }

    public function index()
    {
        //Loads the login page which has a registration option
        $this->load->view('login');
    }

    public function register()
    {
        $post = $this->input->post();
        if($post)
        {
            //handle posted data
            $fullname = $this->input->post('fullname');
            $email = $this->input->post('email');
            $mobile = $this->input->post('mobile');
            $home = $this->input->post('home');
            $username = $this->input->post('username');
            $password = $this->input->post('password');
            $confirmPassword = $this->input->post('cpassword');
            $memberType = 'silver';

            if ($this->form_validation->run() == FALSE)
            {
                $this->load->view('register');
            }
            else
            {
                $this->load->view('welcome_message');
            }

        }else{
            $this->load->view('register');
        }
    }

} 
```

现在，当我单击表单上的提交按钮时，它显示 404 并且地址栏中的链接是： [http ://domain.com/index.php/form](http://domain.com/index.php/form)

为什么会这样？它应该检查是否已发布，然后加载 x。如果不加载 y。

我是codeigniter的初学者，所以很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:04:12.900

正如您从 CI 用户指南中复制代码一样：

```
 form_open('form'); // here is a form action which is form class index function 
```

只需将其更改为：

```
 form_open('membership/register'); 
```

意思是 ：

```
 form_open('location/to/sumbit/to'); 
```

就是这样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:06:36.237

改变

```
<?php echo form_open('form'); ?> 
```

到

```
<?php echo form_open('membership/register'); ?> // class/function 
```

# c# - 如何将非托管 C++ dll 添加到 Silverlight 5 项目中

> ID：15363297
> 
> 赞同：4
> 
> 时间：2013-03-12T14:00:03.903
> 
> 标签：c#, c++, silverlight-5.0

我需要在 Silverlight 5 项目中使用我自己的非托管 C++ dll。

因为我可以使用 dllImport 来使用它，即

```
 [DllImport(@"D:\myLib\Debug\myLib.dll")]
    static extern int add(IntPtr ptr); 
```

它工作正常，因为我在 DllImport 中提到了一条绝对路径。但我的问题是，我想使用相对路径。

因为我需要在我的 silverlight 5 项目中添加非托管 C++ dll 并从那里指定路径。我从过去两天开始进行调查，但没有找到任何解决此问题的方法。

只有我找到了下面提到的一个相关链接，但它也无济于事。

[http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.dllimportattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.dllimportattribute.aspx)

正如它建议如何将非托管 dll 嵌入到托管程序集中。我尝试了这种方法，但我得到了“BadImageException”。

请建议结束这个问题，因为这对我来说真的很紧急。

谢谢，

维平

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:49:31.537

当 Silverlight 5 Release Candidate 公开时，我创建了一些支持方法来处理将非托管非系统 DLL:s 与 Silverlight 5 RC 应用程序捆绑在一起的问题。该解决方案仍然有效，因为 Microsoft 没有添加任何支持来处理 Silverlight 5 RTM 中的捆绑问题。

我所做的基本上是将非托管 DLL 捆绑为资源文件。通过手动调用的辅助方法，例如在应用程序启动事件处理程序中，资源被复制到磁盘上的预定义位置。然后在执行期间此位置也包含在系统 PATH 中。

提高信任是必需的（当然）。

有关此解决方案的更多详细信息，请参阅[此](http://cureos.blogspot.com/2011/09/pinvoke-bundling-native-dlls-in.html)博客文章。

与此解决方案相关的所有代码，包括示例测试，都可以在[Github](https://github.com/cureos/nativedll)上找到。

**更新**

正如 Simon Mourier 在下面的评论中指出的那样，一种选择也是在DLL 从资源中解压缩后，通过调用*Kernel32* [LoadLibrary函数将非托管 DLL 加载到内存中（并在应用程序退出时释放）。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)[此](http://thebytekitchen.com/2012/03/15/pinvoking-directx-from-silverlight/)博客文章中更详细地描述了 Silverlight 的这种方法。

# android - 加载 rss 提要流时出错 null

> ID：15363298
> 
> 赞同：0
> 
> 时间：2013-03-12T14:00:04.883
> 
> 标签：android, xml-parsing, rss

我在我的 android 应用程序中创建了一个 rss 提要。但是，我不断发生此错误。

这是我的 logcat 错误...

```
03-12 14:04:04.025: E/RSS ERROR(4808): Error loading RSS Feed Stream >> null //android.os.NetworkOnMainThreadException
03-12 14:04:04.285: I/dalvikvm(4808): threadid=3: reacting to signal 3
03-12 14:04:04.305: I/dalvikvm(4808): Wrote stack traces to '/data/anr/traces.txt'
03-12 14:04:04.335: D/ViewRootImpl(4808): pckname = com.tmm.android.rssreader
03-12 14:04:04.485: D/libEGL(4808): loaded /system/lib/egl/libEGL_mali.so
03-12 14:04:04.525: D/libEGL(4808): loaded /system/lib/egl/libGLESv1_CM_mali.so
03-12 14:04:04.535: D/libEGL(4808): loaded /system/lib/egl/libGLESv2_mali.so
03-12 14:04:04.575: D/OpenGLRenderer(4808): Enabling debug mode 0 
```

任何人都可以帮忙吗？我是 RSS 提要的新手

我不确定代码的哪一部分出现错误，有什么建议吗？

```
package com.tmm.android.rssreader.util;

import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;

import android.util.Log;

public class RSSHandler extends DefaultHandler {

    // Feed and Article objects to use for temporary storage
    private Article currentArticle = new Article();
    private List<Article> articleList = new ArrayList<Article>();

    // Number of articles added so far
    private int articlesAdded = 0;

    // Number of articles to download
    private static final int ARTICLES_LIMIT = 15;

    //Current characters being accumulated
    StringBuffer chars = new StringBuffer();

    /* 
     * This method is called everytime a start element is found (an opening XML marker)
     * here we always reset the characters StringBuffer as we are only currently interested
     * in the the text values stored at leaf nodes
     * 
     * (non-Javadoc)
     * @see org.xml.sax.helpers.DefaultHandler#startElement(java.lang.String, java.lang.String, java.lang.String, org.xml.sax.Attributes)
     */
    public void startElement(String uri, String localName, String qName, Attributes atts) {
        chars = new StringBuffer();
    }

    /* 
     * This method is called everytime an end element is found (a closing XML marker)
     * here we check what element is being closed, if it is a relevant leaf node that we are
     * checking, such as Title, then we get the characters we have accumulated in the StringBuffer
     * and set the current Article's title to the value
     * 
     * If this is closing the "Item", it means it is the end of the article, so we add that to the list
     * and then reset our Article object for the next one on the stream
     * 
     * 
     * (non-Javadoc)
     * @see org.xml.sax.helpers.DefaultHandler#endElement(java.lang.String, java.lang.String, java.lang.String)
     */
    public void endElement(String uri, String localName, String qName) throws SAXException {

        if (localName.equalsIgnoreCase("title"))
        {
            Log.d("LOGGING RSS XML", "Setting article title: " + chars.toString());
            currentArticle.setTitle(chars.toString());

        }
        else if (localName.equalsIgnoreCase("description"))
        {
            Log.d("LOGGING RSS XML", "Setting article description: " + chars.toString());
            currentArticle.setDescription(chars.toString());
        }
        else if (localName.equalsIgnoreCase("pubDate"))
        {
            Log.d("LOGGING RSS XML", "Setting article published date: " + chars.toString());
            currentArticle.setPubDate(chars.toString());
        }
        else if (localName.equalsIgnoreCase("encoded"))
        {
            Log.d("LOGGING RSS XML", "Setting article content: " + chars.toString());
            currentArticle.setEncodedContent(chars.toString());
        }
        else if (localName.equalsIgnoreCase("item"))
        {

        }
        else if (localName.equalsIgnoreCase("link"))
        {
            try {
                Log.d("LOGGING RSS XML", "Setting article link url: " + chars.toString());
                currentArticle.setUrl(new URL(chars.toString()));
            } catch (MalformedURLException e) {
                Log.e("RSA Error", e.getMessage());
            }

        }

        // Check if looking for article, and if article is complete
        if (localName.equalsIgnoreCase("item")) {

            articleList.add(currentArticle);

            currentArticle = new Article();

            // Lets check if we've hit our limit on number of articles
            articlesAdded++;
            if (articlesAdded >= ARTICLES_LIMIT)
            {
                throw new SAXException();
            }
        }
    }

    /* 
     * This method is called when characters are found in between XML markers, however, there is no
     * guarante that this will be called at the end of the node, or that it will be called only once
     * , so we just accumulate these and then deal with them in endElement() to be sure we have all the
     * text
     * 
     * (non-Javadoc)
     * @see org.xml.sax.helpers.DefaultHandler#characters(char[], int, int)
     */
    public void characters(char ch[], int start, int length) {
        chars.append(new String(ch, start, length));
    }

    /**
     * This is the entry point to the parser and creates the feed to be parsed
     * 
     * @param feedUrl
     * @return
     */
    public List<Article> getLatestArticles(String feedUrl) {
        URL url = null;
        try {

            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();

            url = new URL(feedUrl);

            xr.setContentHandler(this);
            xr.parse(new InputSource(url.openStream()));

        } catch (IOException e) {
            Log.e("RSS Handler IO", e.getMessage() + " >> " + e.toString());
        } catch (SAXException e) {
            Log.e("RSS Handler SAX", e.toString());
        } catch (ParserConfigurationException e) {
            Log.e("RSS Handler Parser Config", e.toString());
        }

        return articleList;
    }

} 
```

* * *

用于重新编码的 RSS 阅读器的新 LOGCAT 日志

```
03-12 16:01:13.882: W/System.err(5792): java.net.UnknownHostException: Unable to resolve host "www.cnn.com": No address associated with hostname
03-12 16:01:13.882: W/System.err(5792):     at java.net.InetAddress.lookupHostByName(InetAddress.java:426)
03-12 16:01:13.912: W/System.err(5792):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
03-12 16:01:13.912: W/System.err(5792):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
03-12 16:01:13.912: W/System.err(5792):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
03-12 16:01:13.912: W/System.err(5792):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
03-12 16:01:13.912: W/System.err(5792):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
03-12 16:01:13.912: W/System.err(5792):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
03-12 16:01:13.912: W/System.err(5792):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
03-12 16:01:13.912: W/System.err(5792):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
03-12 16:01:13.912: W/System.err(5792):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
03-12 16:01:13.912: W/System.err(5792):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
03-12 16:01:13.912: W/System.err(5792):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
03-12 16:01:13.912: W/System.err(5792):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
03-12 16:01:13.912: W/System.err(5792):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
03-12 16:01:13.922: W/System.err(5792):     at java.net.URL.openStream(URL.java:462)
03-12 16:01:13.922: W/System.err(5792):     at com.exercise.AndroidRssReader.AndroidRssReader$MyTask.doInBackground(AndroidRssReader.java:43)
03-12 16:01:13.922: W/System.err(5792):     at com.exercise.AndroidRssReader.AndroidRssReader$MyTask.doInBackground(AndroidRssReader.java:1)
03-12 16:01:13.922: W/System.err(5792):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
03-12 16:01:13.922: W/System.err(5792):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-12 16:01:13.922: W/System.err(5792):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-12 16:01:13.932: W/System.err(5792):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-12 16:01:13.932: W/System.err(5792):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-12 16:01:13.932: W/System.err(5792):     at java.lang.Thread.run(Thread.java:856)
03-12 16:01:13.932: W/System.err(5792): Caused by: libcore.io.GaiException: getaddrinfo failed: EAI_NODATA (No address associated with hostname)
03-12 16:01:13.952: W/System.err(5792):     at libcore.io.Posix.getaddrinfo(Native Method)
03-12 16:01:13.952: W/System.err(5792):     at libcore.io.ForwardingOs.getaddrinfo(ForwardingOs.java:55)
03-12 16:01:13.952: W/System.err(5792):     at java.net.InetAddress.lookupHostByName(InetAddress.java:411)
03-12 16:01:13.962: W/System.err(5792):     ... 22 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:22:45.677

```
Error loading RSS Feed Stream >> null //android.os.NetworkOnMainThreadException 
```

这意味着您在 UI 线程中调用您的 xml 解析。xml 解析本身通过`url.openStream()`in获取数据`getLatestArticles()`。使用 AsyncTask 解析您的 xml 并在完成后发布结果。

# c# - 更新查询出错-Visual Studio 2010-Oracle 11g Express 版

> ID：15363303
> 
> 赞同：2
> 
> 时间：2013-03-12T14:00:11.093
> 
> 标签：c#, visual-studio-2010, oracle11g

我正在尝试在 Visual Studio 2010 Ultimate 中执行更新操作，其中 Windows 窗体作为前端，Oracle 11g express 作为后端。我正在使用 C# 对此进行编码。

```
private void update_student(string STUDENT_ID, string STUDENT_NAME, string      STUDENT_ADDRESS)
{
      con.Open();

      String sql = "UPDATE STUDENT SET STUDENT_NAME = :STUDENT_NAME, STUDENT_ADDRESS= :STUDENT_ADDRESS WHERE STUDENT_ID= :STUDENT_ID";

      OracleCommand query = new OracleCommand(sql, con);

      OracleParameter[] updatestud = new OracleParameter[3];

      updatestud[0] = query.Parameters.Add("STUDENT_ID", OracleDbType.Varchar2, STUDENT_ID, ParameterDirection.Input);
      updatestud[1] = query.Parameters.Add("STUDENT_NAME", OracleDbType.Varchar2, STUDENT_NAME, ParameterDirection.Input);
      updatestud[2] = query.Parameters.Add("STUDENT_ADDRESS", OracleDbType.Varchar2, STUDENT_ADDRESS, ParameterDirection.Input);

      query.ExecuteNonQuery();

      MessageBox.Show("Row Updated");

      con.Close();

} 
```

执行插入和检索操作后，我现在正在尝试更新查询。

我无法理解我在应用程序中使用的以下代码的参数和值流。我在该行中收到以下错误`query.ExecuteNonQuery();`：

> ORA-01722: 无效号码

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:05:54.753

从[`ORA-01722`](http://ora-01722.ora-code.com/)

> 尝试将字符串转换为数字失败 **，因为字符串不是有效的数字文字**。在算术函数或表达式中只能使用数字字段或包含数字数据的字符字段。只有数字字段可以添加到日期或从日期中减去。

此错误可能会导致您尝试将您的定义`STUDENT_ID`为`OracleDbType.Varchar2`.

我不确定你的时间`STUDENT_ID`，但你可以使用`OracleDbType.Int32`而不是。

像;

```
updatestud[0] = query.Parameters.Add("STUDENT_ID", OracleDbType.Int32 , STUDENT_ID, ParameterDirection.Input); 
```

查看[`OracleType`](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracletype.aspx)枚举以获取更多详细信息。

> 指定在 OracleParameter 中使用的字段或属性的数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:10:01.110

我在想 STUDENT_ID 可能是整数。您将其用作 Varchar2，这似乎是错误的原因。

ORA-01722：无效数字原因：尝试将字符串转换为数字失败，因为字符串不是有效的数字文字。在算术函数或表达式中只能使用数字字段或包含数字数据的字符字段。只有数字字段可以添加到日期或从日期中减去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T17:19:07.543

大家好 :) 我自己找到了答案。就是想和大家分享一下。

有 2 种方法可以做到这一点。

方法一：

```
 OracleParameter[] updatestud = new OracleParameter[3];
        updatestud[0] = query.Parameters.Add(":STUDENT_NAME", OracleDbType.Varchar2, STUDENT_NAME, ParameterDirection.Input);
        updatestud[1] = query.Parameters.Add(":STUDENT_ADDRESS", OracleDbType.Varchar2, STUDENT_ADDRESS, ParameterDirection.Input);
        updatestud[2] = query.Parameters.Add("STUDENT_ID", OracleDbType.Int32, STUDENT_ID, ParameterDirection.Input); 
```

方法二：

```
 String sql = "UPDATE STUDENT SET STUDENT_NAME = :STUDENT_NAME, STUDENT_ADDRESS= :STUDENT_ADDRESS WHERE STUDENT_ID= :STUDENT_ID";
        OracleCommand query = new OracleCommand(sql, con);

        OracleParameter p_studid = new OracleParameter();
        OracleParameter p_studname = new OracleParameter();
        OracleParameter p_studaddr = new OracleParameter();

        p_studname.OracleDbType = OracleDbType.Varchar2;
        p_studname.Value = TxtName.Text;
        query.Parameters.Add(p_studname);

        p_studaddr.OracleDbType = OracleDbType.Varchar2;
        p_studaddr.Value = TxtAddress.Text;
        query.Parameters.Add(p_studaddr);

        p_studid.OracleDbType = OracleDbType.Int32;
        p_studid.Value = TxtId.Text;
        query.Parameters.Add(p_studid); 
```

您可以使用这些方法中的任何一种，只需记住一件事……参数应始终按 sql 的顺序添加。当然，还必须注意 OracleDBType。

如果您有疑问，也请参阅 dis 页面 - [http://docs.oracle.com/cd/E17781_01/appdev.112/e18751/building_odp.htm](http://docs.oracle.com/cd/E17781_01/appdev.112/e18751/building_odp.htm)

谢谢大家的建议！:)

# r - 新的 R 用户有回归问题

> ID：15363307
> 
> 赞同：1
> 
> 时间：2013-03-12T14:00:15.147
> 
> 标签：r, regression, xlsx, stripchart

我是 R 新手，正在尝试进行回归分析。我用 c() 函数构造了任意向量来学习绘图、lm、拟合、abline 和汇总函数。这工作正常，但在尝试回归导入的数据时，我收到以下错误消息。我不知道是什么导致了错误或如何解决它。任何想法？谢谢。

```
library(xlsx)  
Loading required package: xlsxjars   
Loading required package: rJava    
x <- "~/Desktop/x.xlsx"    
y <- "~/Desktop/y.xlsx"   
X <- read.xlsx(x,1)  
Y <- read.xlsx(y,1)  
dim(X)  
[1] 149   1  
dim(Y)  
[1] 149   1  
plot(X,Y)  
Error in stripchart.default(x1, ...) : invalid plotting method  
plot(X)  
plot(Y) 
```

另外，我认为我不理解 read.xlsx 函数中接受的所有参数。例如，如果 sheetindex 旨在为工作表编制索引，那么在此示例中，x 不是 1，y 不是 2？但是之后：

```
X <- read.xlsx(x,1)  
Y <- read.xlsx(y,2)   
Error in sheets[[sheetIndex]] : subscript out of bounds 
```

此外，尺寸不正确。.xlsx 文件有 1 列、150 行，并且没有标题。

```
dim(X)   
[1] 149   1 
```

当转换为 .csv 文件时，我并不特别想对我拥有的 .xlsx 文件总数进行 b/c 处理，我仍然有相同的绘图错误，但尺寸似乎是正确的。在此示例中，行数和列数分别保持不变，分别为 1 和 150，但有一个标题。

```
x <- "~/Desktop/x.csv"   
y <- "~/Desktop/y.csv"   
X <- read.table(x, header = T)    
Y <- read.table(y, header = T)    
plot(X,Y)    
Error in stripchart.default(x1, ...) : invalid plotting method    
dim(X)   
[1] 150   1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:18:43.093

问题是 X 和 Y 是称为数据帧（`?data.frame`详细信息）的对象，而不是向量。plot 函数实际上是一系列其他特定于对象的绘图函数的包装器，在这种情况下，它试图使用 绘图`stripchart()`，这导致了问题。这会重现问题并修复它：

```
X=data.frame(x=1:100)
Y=data.frame(y=rnorm(100,mean=1:100,sd=5))
plot(X,Y)
names(X)
names(Y)
plot(X$x, Y$y) 
```

假设您的数据始终只包含一列，您可以通过将 data.frame 转换为 numeric 类型的对象（即与 相同类型的对象`X=c(1,2,3,5)`）来修复上面的代码，这可以通过多种方式完成

```
X <- unlist(read.xlsx(x,1))
Y <- unlist(read.xlsx(y,1)) 
```

或者，或者，最好只是 havie read.xlsx() 返回一个列表而不是 data.frame

```
X <- read.xlsx(x,1, as.data.frame=FALSE)
Y <- read.xlsx(y,1, as.data.frame=FALSE) 
```

或者您可以在调用时访问 data.frame 的第一列`plot`

```
plot(X[,1], Y[,1]) 
```

请参阅帮助文件了解所有这些函数返回的内容（例如`?as.numeric`、`?unlist`、`?names`等），另请参阅和`?class`查询对象属性。`?mode``?typeof`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:08:59.863

`Furthermore, the dimension is incorrect. The .xlsx file has 1 column, 150 rows, and no header.`

Header 默认为 TRUE，因此您应该在 read.xlsx 调用中指定它。

```
X <- read.xlsx(x,1, header = TRUE) 
```

关于情节错误：

```
plot(X,Y)  
Error in stripchart.default(x1, ...) : invalid plotting method 
```

read.xlsx 返回 data.frames，这就是错误出现的原因。这是一个例子：

```
X <- data.frame(rnorm(150))
Y <- data.frame(rnorm(150))
plot(X, Y)

# Error in stripchart.default(x1, ...) : invalid plotting method 
```

请仔细阅读 read.xlsx 文档和 R 对象类型。

# iphone - UIGestureRecognizerStateBegan 在 iOS 6 中调用两次

> ID：15363311
> 
> 赞同：0
> 
> 时间：2013-03-12T14:00:22.200
> 
> 标签：iphone, ios, retina-display

提前致谢，我想分享`UILongPressGestureRecognizer`.

```
UIView *v = [UIView alloc] initWithFrame:CGRectMake(0,0,20,20)];
UILongPressGestureRecognizer *longpressGesture1 = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
[v addGestureRecognizer:longpressGesture1]; 
```

这里是处理手势识别器的代表。

```
-(IBAction)tapped:(UILongPressGestureRecognizer *) gesture

{ 
    switch ([gesture state]) {
        case UIGestureRecognizerStateBegan:
        {

            NSLog(@"Long Tap detacted.");  

        }
            break;
        case UIGestureRecognizerStateChanged:
        {
            NSLog(@"UIGestureRecognizerStateChanged");

        }
            break;
        case UIGestureRecognizerStateEnded:
        {
            NSLog(@"Long Tap ended.");

        }
            break;

    }

} 
```

这段代码在 iOS 4 和 5 中按预期完美运行，但在具有视网膜显示的 ios 6 中，当我们执行长按时，`UIGestureRecognizerStateBegan`一次长按会被调用两次，从而导致应用程序崩溃。非常欢迎任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:15:37.667

**UILongPressGestureRecognizer 是一个连续事件识别器。您必须查看状态，看看这是事件的开始、中间还是结束，并采取相应的行动。**

它调用了两次，因为您正在按下和移开手指。

第一次通话表示您检测到长按，即`UIGestureRecognizerStateBegan` 第二次通话表示您已结束该轻按，即`UIGestureRecognizerStateBegan`

水龙头有三种状态

1.  `UIGestureRecognizerStateBegan`
2.  `UIGestureRecognizerStateChanged`
3.  `UIGestureRecognizerStateEnded`

如果你拖动你的手指，那么它会调用多次，这表明它的状态有一些变化。

关注[UILongPressGestureRecognizer 类参考](https://developer.apple.com/library/ios/#documentation/uikit/reference/UILongPressGestureRecognizer_Class/Reference/Reference.html)了解更多

# c++ - 从组合中的另一个类覆盖 C++ 方法

> ID：15363318
> 
> 赞同：1
> 
> 时间：2013-03-12T14:00:31.770
> 
> 标签：c++

如何覆盖另一个类的方法？情况如下：

```
class foot:
{
    void kick() { clumsyKick(); };
}

class person: /* Person has Foot */
{
    foot *personsFoot;
}

class soccerPlayer: /* SoccerPlayer has Foot too, but his foot is better */
{
    foot *soccerPlayerFoot;
} 
```

现在我想只使用以下方法覆盖 footballPlayer 类的脚类 Kick() 方法（我理解下面的语法不正确）：

```
soccerPlayer::foot::Kick() { expertKick(); } 
```

在 C++ 中可能吗？**这种情况的最佳解决方法是什么？**

ps：我负担不起为 foot::Kick(); 的每个实现创建派生类；

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:02:42.933

直接的答案是您不能覆盖组合类的方法。只有继承才有可能覆盖。

在这种情况下，您可以使用其他设计模式，例如委托。C++ 本身不提供委托，但您可以模拟它们或使用提供实现的框架。您可以使`foot`该类接受一个委托来实现`kick`并在该类中提供一个替代委托`soccerPlayer`。

您可以使用函数指针或使用单个方法抽象类来模拟委托。例如，您可以创建

```
class IKick{
    public:
    virtual void kick() = 0;
} 
```

`IKick`然后，您可以拥有由扩展的类提供的专门实现`person`。

当然，为了使 kick 方法做任何有用的事情，您可能希望更改签名以具有一些将状态传递给调用者并形成调用者的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:12:14.600

我可以看到您正在尝试做什么，但是 Miky Dinescu 是正确的，您不能按照您所描述的方式执行此操作。

您可以通过继承来做到这一点，也就是说，拥有一个带有 Kick 方法的通用 Person 对象，并让一个子类 (SoccerPlayer) 覆盖该方法：

```
class person: /* Person has Foot */
{
    virtual void kick() { clumsyKick(); }
}

class soccerPlayer: /* SoccerPlayer has Foot too, but his foot is better */
{
    virtual void kick() { expertKick(); }
} 
```

但是，您似乎试图通过组合而不是继承来做到这一点。这个怎么样：

```
class foot
{
    virtual void Kick() { clumsyKick(); }
}

class soccerFoot: foot
{
    virtual void Kick() { expertKick(); }
}

class person: /* Person has Foot */
{
    private foot *personsFoot;
    person(foot* theFoot)
    {
        personsFoot = theFoot;
    }
}

void main()
{
    person soccerPlayer = new person(new soccerFoot());
    person.Kick(); //output of expertKick();
} 
```

这只是一个建议-但是有很多方法可以覆盖*行为，*这似乎是您正在尝试做的事情，但是您不能在没有继承的情况下覆盖另一个类的实际方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:18:53.483

我认为大卫罗德里格斯指出了处理这种情况的正确方法：

```
class foot:
{
    /* Foot internals */
}

class person: /* Person has Foot and uses it to kick */
{
    foot *personsFoot;
    void kick() { clumsyKick(foot); };
}

class soccerPlayer: /* SoccerPlayer has Foot too, but his KICK is better */
{
    foot *soccerPlayerFoot;
    void kick() { expertKick(foot); };
} 
```

# java - 独立桌面应用程序中的 Objective C + Java

> ID：15363319
> 
> 赞同：1
> 
> 时间：2013-03-12T14:00:33.077
> 
> 标签：java, objective-c

有人有经验吗，或者有人知道是否有可能在 Mac 上运行的一个应用程序中使用 Objective C 和 Java？例如，是否可以在 Objective C 中编写 GUI 层，在 Java 中编写业务层？

我的情况是我不想将所有业务层从java重写为objective c，但是我的gui层在使用swing的新视网膜显示器上看起来不太好。

所以在最好的情况下，我只想从 Objective C gui 代码中调用 Java API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:04:00.997

是的; 例如，您可以通过 Java 中的 Web 服务导出业务层，并在 Objective C 中为这些 Web 服务创建客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:04:57.870

**你绝对可以做到这一点。**

您只能使用 Mac OSX 来显示输出和接受用户输入，并通过 xml/json/soap 等将所有响应/请求发送到基于 Java 的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:05:22.837

您可以将您的应用程序转换为某种服务器/客户端模型，并使用 IPC 将两个应用程序连接在一起。

# android - 类转换异常：android.widget.textview

> ID：15363325
> 
> 赞同：0
> 
> 时间：2013-03-12T14:00:53.103
> 
> 标签：android

我想要一个帮助。我认为这是一个愚蠢的问题。但我确实知道答案。我的xml代码是：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="25dp"
    android:background="@drawable/bule_top" >

    <TextView
        android:id="@+id/Popuphead"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:text="Expense"
        android:textColor="#ffffff"
        android:textSize="17dp"
        android:textStyle="bold" />

    <Button
        android:id="@+id/close"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:background="@drawable/closed" />
</LinearLayout>

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:orientation="vertical"
        android:padding="5dp" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="3dp"
                android:text="Transaction Date "
                android:textColor="#ffffff" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:padding="3dp"
                android:text=" : "
                android:textColor="#ffffff" />

            <TextView
                android:id="@+id/textView3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:padding="3dp"
                android:text="TextView"
                android:textColor="#ffffff" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="3dp"
                android:text="Description"
                android:textColor="#ffffff" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:padding="3dp"
                android:text=" : "
                android:textColor="#ffffff" />

            <TextView
                android:id="@+id/textView4"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:padding="3dp"
                android:text="TextView"
                android:textColor="#ffffff" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left"
                android:padding="3dp"
                android:text="Previous Balance "
                android:textColor="#ffffff" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:padding="3dp"
                android:text=" : "
                android:textColor="#ffffff" />

            <TextView
                android:id="@+id/textView5"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:padding="3dp"
                android:text="TextView"
                android:textColor="#ffffff" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left"
                android:padding="3dp"
                android:text="Amount "
                android:textColor="#ffffff" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:padding="3dp"
                android:text=" : "
                android:textColor="#ffffff" />

            <TextView
                android:id="@+id/textView6"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:padding="3dp"
                android:text="TextView"
                android:textColor="#ffffff" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left"
                android:padding="3dp"
                android:text="Current Balance "
                android:textColor="#ffffff" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:padding="3dp"
                android:text=" : "
                android:textColor="#ffffff" />

            <TextView
                android:id="@+id/textView7"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:padding="3dp"
                android:text="TextView"
                android:textColor="#ffffff" />
        </LinearLayout>

    </LinearLayout>
</ScrollView> 
```

在这个 xml 中只有错误的朋友。堆栈跟踪是。

```
03-12 19:27:14.975: E/AndroidRuntime(2200): FATAL EXCEPTION: main
03-12 19:27:14.975: E/AndroidRuntime(2200): java.lang.ClassCastException: android.widget.TextView
03-12 19:27:14.975: E/AndroidRuntime(2200):     at com.elintsys.pocket.account.DailyReportActivity$9.onItemClick(DailyReportActivity.java:355)
03-12 19:27:14.975: E/AndroidRuntime(2200):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
03-12 19:27:14.975: E/AndroidRuntime(2200):     at android.widget.ListView.performItemClick(ListView.java:3382)
03-12 19:27:14.975: E/AndroidRuntime(2200):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
03-12 19:27:14.975: E/AndroidRuntime(2200):     at android.os.Handler.handleCallback(Handler.java:587)
03-12 19:27:14.975: E/AndroidRuntime(2200):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 19:27:14.975: E/AndroidRuntime(2200):     at android.os.Looper.loop(Looper.java:123)
03-12 19:27:14.975: E/AndroidRuntime(2200):     at android.app.ActivityThread.main(ActivityThread.java:4627)
03-12 19:27:14.975: E/AndroidRuntime(2200):     at java.lang.reflect.Method.invokeNative(Native Method)
03-12 19:27:14.975: E/AndroidRuntime(2200):     at java.lang.reflect.Method.invoke(Method.java:521)
03-12 19:27:14.975: E/AndroidRuntime(2200):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-12 19:27:14.975: E/AndroidRuntime(2200):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-12 19:27:14.975: E/AndroidRuntime(2200):     at dalvik.system.NativeStart.main(Native Method) 
```

但是如果我像下面这样重新排列xml

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="25dp"
    android:background="@drawable/bule_top" >

    <TextView
        android:id="@+id/Popuphead"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:text="Expense"
        android:textColor="#ffffff"
        android:textSize="17dp"
        android:textStyle="bold" />

</LinearLayout>

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:orientation="vertical"
        android:padding="5dp" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="3dp"
                android:text="Transaction Date "
                android:textColor="#ffffff" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:padding="3dp"
                android:text=" : "
                android:textColor="#ffffff" />

            <TextView
                android:id="@+id/textView3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:padding="3dp"
                android:text="TextView"
                android:textColor="#ffffff" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="3dp"
                android:text="Description"
                android:textColor="#ffffff" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:padding="3dp"
                android:text=" : "
                android:textColor="#ffffff" />

            <TextView
                android:id="@+id/textView4"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:padding="3dp"
                android:text="TextView"
                android:textColor="#ffffff" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left"
                android:padding="3dp"
                android:text="Previous Balance "
                android:textColor="#ffffff" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:padding="3dp"
                android:text=" : "
                android:textColor="#ffffff" />

            <TextView
                android:id="@+id/textView5"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:padding="3dp"
                android:text="TextView"
                android:textColor="#ffffff" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left"
                android:padding="3dp"
                android:text="Amount "
                android:textColor="#ffffff" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:padding="3dp"
                android:text=" : "
                android:textColor="#ffffff" />

            <TextView
                android:id="@+id/textView6"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:padding="3dp"
                android:text="TextView"
                android:textColor="#ffffff" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="left"
                android:padding="3dp"
                android:text="Current Balance "
                android:textColor="#ffffff" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:padding="3dp"
                android:text=" : "
                android:textColor="#ffffff" />

            <TextView
                android:id="@+id/textView7"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:padding="3dp"
                android:text="TextView"
                android:textColor="#ffffff" />
        </LinearLayout>

    <Button
        android:id="@+id/close"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:background="@drawable/closed" />
    </LinearLayout>
</ScrollView> 
```

它工作得很好朋友。我只是重新排列按钮的位置。我只想要布局顶部的那个按钮。但它没有用。不知道是什么原因朋友。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:31:22.767

有时，当您编辑 XML 文件时，eclipse 无法正确重新编译。尝试在文件菜单中使用`Project`->清理您的项目。`Clean...`

# ruby-on-rails - find_or_initialize_by 不适用于 2 列

> ID：15363329
> 
> 赞同：12
> 
> 时间：2013-03-12T14:01:02.450
> 
> 标签：ruby-on-rails, ruby

我正在尝试使用 ActiveRecord 在我的数据库中插入数据。

当我使用`pdays = MyModel.new`初始化而不是下面`find_or_initialize_by`的时，脚本运行良好。但它只运行一次。我需要它每天运行以执行更新。当我第二次尝试使用 运行脚本时`pdays = MyModel.new`，不会引发重复的键约束。

因此，我正在尝试使用 2 个参数执行以下 find_or_initialize_by ，但这会产生错误：

> 未定义的方法`find_or_initialize_by'

2 列共同构成唯一记录：

```
vertica_traffic.each do |vdays|

  pdays = MyModel.find_or_initialize_by([:local_dt], vdays[:community_id])

  pdays[:local_date]       = vdays_traffic[:local_d]
  pdays[:community_id]     = vdays_traffic[:community_id]
  pdays[:uniquesters]      = vdays_traffic[:uniques]

  pdays.save

end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T14:35:27.613

如果您使用的是 rails 3.2.1 及更高版本，则该方法的新名称为`first_or_initialize`. 它与 结合使用`where`。在您的情况下，由于您正在调用 save，因此您应该使用`first_or_create`，但如果您想手动调用`save`，只需替换该方法并在之后调用 save

```
MyModel.where(local_date: vdays_traffic[:local_date], community_id: vdays_traffic[:community_id]).first_or_create do |record|
  record.uniquesters = vdays_traffic[:uniques]
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-19T23:08:34.417

[我在这里读到 Rails 4](https://stackoverflow.com/questions/22472584/rails4-deprecation-warning-for-find-or-initialize-by-method)，这是正确的语法：

```
Progress.find_or_initialize_by(chore_id: chore.id, period: period[chore.frequency], account_id: chore.account_id) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-12T14:08:12.077

你可以试试：

```
MyModel.find_or_initialize_by_local_dt_and_comunity_id([:local_dt], vdays[:community_id]) 
```

附加列名`_and_`

# ember.js - 使用 Rails+active_model_serializers 在 EmberJS 中侧加载具有非标准类名的对象

> ID：15363333
> 
> 赞同：7
> 
> 时间：2013-03-12T14:01:08.390
> 
> 标签：ember.js, ember-data, active-model-serializers

我在 Rails 中有一些看起来像这样的模型：

```
class Issue < ActiveRecord::Base
  belongs_to :reporter, class_name: 'User'
  belongs_to :assignee, class_name: 'User'
  has_many :comments
end

class User < ActiveRecord::Base
end

class Comment < ActiveRecord::Base
end 
```

使用这样的序列化程序：

```
class IssueSerializer < ActiveModel::Serializer
  attributes :id
  embed :ids, include: true

  has_one :reporter, :embed => :ids
  has_one :assignee, :embed => :ids
end

class UserSerializer < ActiveModel::Serializer
  attributes :id, :name
end

class CommentSerializer < ActiveModel::Serializer
  attributes :id, :body
end 
```

这会生成类似于以下内容的 JSON：

```
{
  "issues": [
    {
      "id": 6,
      "reporter_id": 1,
      "assignee_id": 2,
      "comment_ids": [
        3
      ]
    },
  ],
  "comments": [
    {
      "id": 3
      "body": "Great comment"
    }
  ],
  "reporters": [
    {
      "id": 1
      "name": "Ben Burton"
    }
  ],
  "assignees": [
    {
      "id": 2
      "name": "Jono Mallanyk"
    }
  ]
} 
```

问题是 Ember 无法将侧面加载的报告者和受让人 JSON 对象识别为用户对象，并且我看到以下错误：

```
Uncaught Error: assertion failed: Your server returned a hash with the key reporters but you have no mapping for it 
```

我不想删除

```
embed :ids, include: true 
```

来自我的 IssueSerializer，因为这样评论就不会被序列化。

我考虑过一些潜在的方法来解决这个问题：

*   如果 ActiveModel::Serializer 的 embed 方法在其 include 选项中接受了模型列表，则可以过滤 JSON 响应以仅包含侧面加载的注释。
*   Ember 数据的模型可以配置为从“用户”、“记者”和“受让人”侧加载用户......但据我所知，它似乎只支持 sideloadAs 的一个键。
*   不知何故忽略/禁用未知键的侧面加载错误（可能是最不理智的方法）。

我在这里缺少另一个选择吗？我想我可能需要编写一个修复程序并向 rails-api/active_model_serializers、emberjs/data 或两者提交一个拉取请求。

**编辑**：我的临时解决方法是将 IssueSerializer 更改为仅序列化记者和受让人的 id：

```
class IssueSerializer < ActiveModel::Serializer
  attributes :id, :reporter_id, :assignee_id
  embed :ids, include: true

  has_many :comments, :embed => :ids
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:00:57.020

我有类似的问题，并在[ActiveModel::Serializers readme](https://github.com/rails-api/active_model_serializers#embedding-associations)找到了解决方案。您可以使用`:root`选项。为问题序列化程序尝试这样的事情：

```
class IssueSerializer < ActiveModel::Serializer
  attributes :id
  embed :ids, include: true

  has_one :reporter, :root => "users"
  has_one :assignee, :root => "users"
  has_many :comments
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:55:42.270

你应该阅读[这个](https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md#revision-12)页面。修订版 12 的部分解释了相同类型数据的旁加载：

> 现在， homeAddress 和 workAddress 将作为地址一起被侧载，因为它们是相同的类型。此外，默认的根命名约定（下划线和小写）现在也将应用于旁加载的根名称。

你的模型应该是这样的：

```
App.Issue  = DS.Model.extend({
  reporter: DS.belongsTo('App.User'),
  assignee: DS.belongsTo('App.User'),
  comments: DS.hasMany('App.Comment')
}); 
```

JSON 结果应该有一个供用户使用的密钥：

```
{
  "issues": [
    {
      "id": 6,
      "reporter_id": 1,
      "assignee_id": 2,
      "comment_ids": [
        3
      ]
    },
  ],
  "comments": [
    {
      "id": 3
      "body": "Great comment"
    }
  ],
  "users": [
    {
      "id": 1
      "name": "Ben Burton"
    },{
      "id": 2
      "name": "Jono Mallanyk"
    }
  ]
} 
```

因为您在模型中配置了`reporter`type `User`，所以 Ember 在结果中搜索用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-08T16:19:26.250

我遇到了同样的问题，添加`include: false`关联对我有用。

```
 embed :ids, include: true
    attributes :id, :title

    has_many :domains, key: :domains, include: false
    has_many :sessions, key: :sessions 
```

# r - 从 rle() 类对象列表中绘制多个直方图

> ID：15363334
> 
> 赞同：3
> 
> 时间：2013-03-12T14:01:18.670
> 
> 标签：r, plot

我有为数据集中的每个单独 ID 创建的 rle() 类对象，现在我想将它们绘制在单独的直方图中，以显示各种长度类的频率，以便了解它们的分布，但我可以' t似乎弄清楚如何做到这一点。

我使用以下代码通过对具有各种 ID 的数据运行 rle() 函数来获得 rle() 类对象的列表：

```
list.runs<-dlply(data.1, .(ID), function(x) rle(x$flights)) 
```

但这使得无法将数据传输到数据帧中，因为 rle() 对象无法强制转换为数据帧。因此我对它们进行了分类：

```
list.runs<-dlply(data.1, .(ID), function(x) unclass(rle(x$flights))) 
```

但我不能把这些数据放在数据框中，因为列表的长度不同。

```
runs<-ldply(do.call(data.frame,list.runs))

Error in function (..., row.names = NULL, check.rows = FALSE, check.names = TRUE,  : 
arguments imply differing number of rows: 14, 13 
```

**问题：如何绘制每个单独 ID 的长度值的直方图？**

数据（简化）：

```
> dput(data.1)
structure(list(ID = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L), flights = c(1, 1, 1, 
1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 
0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 
1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 
1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 
1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1)), .Names = c("ID", "flights"
), row.names = c(NA, -100L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:14:22.737

我不知道你想做什么，但我会在这里展示如何：

```
require(plyr)
list.runs <- ddply(data.1, .(ID), function(x) {
    rr <- rle(x$flights)
    data.frame(freq=rr$lengths, xvar=seq_along(rr$lengths))
})

require(ggplot2)
ggplot(data = list.runs, aes(x = factor(xvar), y = freq)) + 
        geom_bar(stat = "identity", aes(fill=factor(ID))) + 
          facet_wrap( ~ ID, ncol=2) 
```

给你：

![在此处输入图像描述](../Images/2e8fc690af29708d5e7b4ff34a5da759.png)

**编辑：**遵循 OP 的评论：您也可以直接从这些数据中获取。事实上，您不必为您的要求生成“xvar”。来自`list.runs`：

```
ggplot(data = list.runs, aes(x = factor(freq))) + 
     geom_bar(aes(weights = ..count.., fill=factor(ID))) + 
     facet_wrap( ~ ID, ncol=2) 
```

给出：

![在此处输入图像描述](../Images/8c5b26e3b9ddaa4d974f1f237a265695.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:20:24.003

I think @Arun's method of going straight to the data.frame in a `ddply` call is the way to go, but just to show one way of how you could go from your `list.runs` object to a useful data.frame:

```
df.summary <- ldply(list.runs,function(x,...) do.call(data.frame,x))

library(ggplot2)
ggplot(df.summary, aes(factor(lengths),values)) + 
  geom_bar(stat = "identity", aes(fill=factor(ID))) + 
  facet_grid( ~ ID, ncol=2) 
```

![enter image description here](../Images/7a4781ecbfc48d3e06bf179f41d9680e.png)

# c# - 实体框架 5.0。我的查询有什么问题？

> ID：15363337
> 
> 赞同：5
> 
> 时间：2013-03-12T14:01:21.827
> 
> 标签：c#, linq, entity-framework

这是我的代码：

```
public DateTime GibSomeStartDate(IEnumerable<int> partnerNumbers, DateTime startTime)
{
     var contractsStartDate = from contract in this.databaseContext.Contract
                              where partnerNumbers.Contains(contract.Pnr) 
                                 && contract.SomeDateTime >= startTime
                              select contract.SomeDateTime;
} 
```

如果我调用`contractsStartDate.Min()`异常发生：

```
Unable to create a null constant value of type 'System.Collections.Generic.IEnumerable`1'. Only entity types, enumeration types or primitive types are supported in this context. 
```

我的查询有什么问题？

*   是`contractsStartDate`类型 `System.Data.Entity.Infrastructure.DbQuery`

*   英孚 5.0

*   `databaseContext`是的孩子`System.Data.Entity.DbContext`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:05:39.417

我知道这个错误。只要确保`partnerNumbers`不为空。您为此参数传递了一个空值，但 Linq-to-entities 无法将该值转换为任何有意义的值。

```
if (partnerNumbers == null)
{
    throw new ArgumentNullException("partnerNumbers");
} 
```

额外的奖励建议：

如果`SomeDateTime`是`not nullable`并且您的枚举中没有条目，那么您将在调用`Min()`. 转换`SomeDateTime`为`nullable`查询中的类型将起作用，然后在没有条目时获得 null 。

# eclipse - 如何测试在 Eclipse 内部浏览器视图中打开的网页。

> ID：15363341
> 
> 赞同：0
> 
> 时间：2013-03-12T14:01:38.403
> 
> 标签：eclipse, testing, browser

我们正在开发一个 Eclipse 插件，它使用 Eclipse Web 浏览器（通常是 Windows 上的 IE）在视图中打开网页。

是否有任何测试工具支持 Eclipse（使用 Eclipse/RCP 驱动部件）并且还能够驱动 Web 浏览器视图。

至少我希望能够通过 ID 或 xpath 获取元素，并将点击事件发送到浏览器中的元素。

我们知道 Quick Test Pro 不会这样做，并且看不到任何明确支持 Eclipse Web 浏览器视图的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:28:47.167

您可以使用[QFS](http://www.qfs.de/)进行检查，我们将此工具用于 SWT/JFace UI 自动化，并且此工具还支持 Web。您可以检查这是否支持您的测试用例。

# c++ - 你如何从一个更大的函数中创建一个更小的函数？

> ID：15363346
> 
> 赞同：1
> 
> 时间：2013-03-12T14:01:54.770
> 
> 标签：c++, function, pointers

假设我有一个函数`int func(int x, int y, int z)`，我需要在另一个函数中调用它 10 次，即`int runge(int, ... , int func(int a, int b))`. 我知道我可以创建 10 个函数，即

```
 int runge1(int a, int b) {return func(1, a, b);} 
```

但是，我想要一个更简单的方法来做到这一点。基本上我想这样创建一个函数指针：

```
for(int i=0; i<10; i++)
    {
    //func would have two variables input into it, variable1, variable2
    int (*func)=func(i, variable1, variable2);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:06:24.763

您正在寻找[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)：

```
std::function<int(int,int)> f = std::bind(&func, i, std::placeholders::_1, std::placeholders::_2); 
```

这将绑定`i`到的第一个参数，`func`并使剩余的参数保持未绑定。然后你可以这样调用`f`：

```
f(1, 2); 
```

如果您愿意，您可以将所有新绑定的函数推送到 a 中`std::vector`：

```
using namespace std::placeholders;
std::vector<std::function<int(int,int)>> funcs;
for (int i = 0; i < 10; i++) {
  funcs.push_back(std::bind(&func, i, _1, _2));
} 
```

如果您没有 C++11，则有[`boost::bind`](http://www.boost.org/libs/bind)对应的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:06:05.840

根据您的描述，我不能 100% 确定，但看起来您正在寻找 curry 函数。

在 C++ 中，这是一个很好的例子：[如何在 C++ 中进行柯里化？](https://stackoverflow.com/questions/152005/how-can-currying-be-done-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:12:05.643

我很确定您想知道`std::function`Lambdas，也许还有`std::bind`：

```
int func(int x, int y, int z);

typedef std::function<int(int,int)> FuncT;
std::array<FuncT, 10> functions; //or whatever container suits your needs
for (int i = 0; i < 10; ++i)
{
  functions[i] = [=](int a, int b) { return func(i,a,b); }; //with lambdas
  functions[i] = std::bind(func, i, std::placeholders::_1, std::placeholders::_2); //with bind
} 
```

（我更喜欢 lambdas，但这是一个口味问题......）

# django - 2 个 Django 1 个服务器

> ID：15363347
> 
> 赞同：0
> 
> 时间：2013-03-12T14:01:59.483
> 
> 标签：django, apache

我已经将我的几个项目部署到我的新服务器上。似乎正在发生的事情是我可以很好地查看一个项目，但是一旦我进入下一个项目，前一个项目的设置仍在使用中。

例如，jacobvalenta.net 和 dev.pawndaddy.org 都是服务器上的项目，在两者之间切换可能会导致设置混淆。

```
SGIPythonPath /home/projects/pawndaddy:/home/projects/jacobvalenta:/home/projects/sailcast:/home/projects/tryfecta:/home/projects/midiscribe

NameVirtualHost *:80

<VirtualHost *:80>
        ServerName jacobvalenta.net
        ServerAlias *.jacobvalenta.net

        DocumentRoot /home/projects/jacobvalenta
        WSGIScriptAlias / /home/projects/jacobvalenta/jacobvalenta/wsgi.py

        <Directory /home/projects/jacobvalenta/jacobvalenta>
                <Files wsgi.py>
                        Order deny,allow
                        Allow from all
                </Files>
        </Directory>
</VirtualHost>

<VirtualHost *:80>
        ServerName sailcast.org
        ServerAlias *.sailcast.org

        DocumentRoot /home/projects/sailcast
        WSGIScriptAlias / /home/projects/sailcast/sailcast/wsgi.py

        <Directory /home/projects/sailcast/sailcast>
                <Files wsgi.py>
                        Order deny,allow
                        Allow from all
                </Files>
        </Directory>
</VirtualHost>

<VirtualHost *:80>
        ServerName pawndaddy.org
        ServerAlias *.pawndaddy.org

        DocumentRoot /home/projects/pawndaddy/
        WSGIScriptAlias / /home/projects/pawndaddy/pawndaddy/wsgi.py

        <Directory /home/projects/pawndaddy/pawndaddy>
                <Files wsgi.py>
                        Order deny,allow
                        Allow from all
                </Files>
        </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:54:37.960

我应该多读一点文件！

在 wsgi.py 中，评论说：

```
# We defer to a DJANGO_SETTINGS_MODULE already in the environment. This breaks
# if running multiple sites in the same mod_wsgi process. To fix this, use
# mod_wsgi daemon mode with each site in its own daemon process, or use
# os.environ["DJANGO_SETTINGS_MODULE"] = "project.settings" 
```

所以只需删除有关设置默认环境的行，一切都应该很好。

# javascript - JQuery 将 id 动态分配给动态生成的 div，在 contenteditable div 内

> ID：15363349
> 
> 赞同：2
> 
> 时间：2013-03-12T14:02:00.433
> 
> 标签：javascript, jquery, html, contenteditable, attr

```
<div class="pad" id="test" contenteditable="true" spellcheck="false">
    <div id="a0" class="lines" > text1</div>
</div> 
```

我有一个内容可编辑的 div，其中有许多子 div，当用户按下 ENTER 键（使用 jQuery）转到下一行时，这些子 div 会动态生成。子 div 的示例是上面的**id='a0'**。

**目标：**动态生成唯一的 id 并将其分配给这些动态生成的子 div。

**下面是我用来完成此任务的 jQuery。**

```
function getSelectedNode() 
```

这是返回用户当前正在输入的行（即子 div）的**“id”的函数。**

```
var lineCount=0; 
```

**lineCount**变量的值等于生成的子 div 的总数。

```
 $(currentLine).next().attr('id','a'+(++lineCount)); 
```

这里`currentLine`包含用户当前正在输入的行的**id**。按下 ENTER 键后，新 div 会在当前 div 之后自动生成，我尝试访问 using`.next()`并尝试使用 为其分配新 id `.attr('id','a'+(++lineCount))`。

***如果我在 jQuery 的选择器子句中传递绝对值，则分配新 id 的过程效果很好，即：***

> $('#a0').next().attr('id','a'+(++lineCount));

代替

> $(currentLine).next().attr('id','a'+(++lineCount));

```
var lineCount = 0;
var currentLine = "#a0";

function getSelectedNode() {
    if (document.selection) 
        return document.selection.createRange().parentElement();
    else {
        var selection = window.getSelection();

        if (selection.rangeCount > 0) 
          return selection.getRangeAt(0).startContainer.parentNode;
    }
}

$('.pad').keypress(function (event) {

    var keycode = (event.keyCode ? event.keyCode : event.which);

    if (keycode == '13') {
        var sn = getSelectedNode();
        currentLine = "#" + sn.getAttribute('id');

        $(currentLine).next().attr('id', 'a' + (++lineCount));
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:09:21.407

Javascript是单线程的，所以你可以为此使用一个int ...

```
var indexer = 0;
function getUniqueId(){
   indexer++;
   return indexer.toString();
} 
```

警告：我不建议在大多数 Web 应用程序中在文档级别声明函数和属性。一旦你有了这个方法，它就很容易实现......

```
$("<div id='myDiv" + getUniqueId() + "' />"); 
```

# php - imagecreatefromstring 对某些 PNG 图像文件返回 false

> ID：15363354
> 
> 赞同：0
> 
> 时间：2013-03-12T14:02:22.917
> 
> 标签：php, image-processing, return-value, image-gallery, false-positive

我有一个图片库，用户可以上传图片，上传图片后，PHP 脚本会创建两个副本 - 一个用于缩略图，另一个用于以较大尺寸显示在图库中。

该应用程序工作正常，除了，上传一些PNG图片时，声明

```
 if($image=@imagecreatefromstring($filedata)) 
```

返回假。

下面是脚本。请帮忙。

```
 <!---------------Processing uploaded image----------------->
<?php
if (isset($_FILES['file1']))
    {
        if($fgmembersite->CheckLogin()) 
            {
            if($_FILES['file1']['error']>0)
                {
                echo "file upload error".$_FILES['file1']['error'];
                }
            else
                {       
                $allowedtype=array('image/jpg','image/jpeg','image/pjpeg','image/gif','image/png');
                $maxsize=10*1024*1024;
                $filename= mysql_real_escape_string($_FILES['file1']['name']);
                $tmp_name=$_FILES['file1']['tmp_name'];
                $size=$_FILES['file1']['size'];
                $type=$_FILES['file1']['type'];
                $ext=$filename;
                if (!in_array($type,$allowedtype))
                    {
                    die ('Invalid file type');
                    }
                if ($size>$maxsize)
                    {
                    die ('error- file size must be less than'.($maxsize/1024/1024).'MB');
                    }
                filedata=file_get_contents($tmp_name);
                if($image=@imagecreatefromstring($filedata))
                    {   
                    $width=imagesx($image);
                    $height=imagesy($image);

                    //creating images
                    $large=imagecreatetruecolor(445,380);   
                    imagecopyresampled($large,$image,0,0,0,0,445,380,$width,$height);
                    $largepath = 'image/large/' . uniqid('img',true) . '.jpg' ; //assigning file location and path
                    $thumb=imagecreatetruecolor(54,54);
                    imagecopyresampled($thumb,$image,0,0,0,0,54,54,$width,$height); 
                    $thumbpath = 'image/thumb/' . uniqid('thumb',true) . '.jpg' ;
                    if (imagejpeg($thumb,$thumbpath) && imagejpeg($large,$largepath))
                        {
                        $con = connect();
                        query("INSERT INTO gallery (caption,thumbpath,largepath) values ('$caption','$thumbpath','$largepath')");
                        }
                    header('location:'.$_SERVER["PHP_SELF"]);
                    }
                else
                    echo "failed";
                }
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:03:52.383

检查[imagejpeg](http://php.net/manual/en/function.imagejpeg.php)上的手册，它需要一个可选的第三个参数，即质量（0 - 100）：

```
if (imagejpeg($thumb,$thumbpath, 92) && imagejpeg($large,$largepath, 96)) 
```

# c# - 连接字符串 C# 和 Visual Studio 中的问题

> ID：15363355
> 
> 赞同：-5
> 
> 时间：2013-03-12T14:02:23.680
> 
> 标签：c#, visual-studio-2010, sql-server-2008, connection-string

我正在尝试在 Visual 2010 中使用 C# 连接到 SQL Server 2008。我遇到了一个问题

![在此处输入图像描述][1]

任何人都可以识别该问题并帮助我解决该问题吗？

```
SqlConnection con = new SqlConnection();
con.ConnectionString="Data Source=localhost;"+"Intial Catalog=company; Integrated Security=SSPI";
try
{
    con.open();
}
catch(Exception e)
{
    Messagebox.show("exception is thrown for db connection");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:10:26.450

根据这些信息，我们无法直接告诉您哪里出了问题，但可以给出间接答案以提供信息以找出问题所在。这个建议是不要吞下你的例外。

也就是说，当它出错时你会发现它，但忽略会告诉你为什么出错的参数值，`e`. 在这种情况下，不要使用通用消息，而是使用那个东西：

```
 Messagebox.show(e.Message); 
```

# xml - XML 将单个字符串 XML 转换为格式良好的文件以进行编辑？

> ID：15363360
> 
> 赞同：3
> 
> 时间：2013-03-12T14:02:35.163
> 
> 标签：xml, string

在数据库中，有一个 XML 格式的 +10000 个字符的字符串。XML 格式不正确，我需要修复它。我必须将字符串（其中没有 CRLF）转换为我可以合理编辑并更正标签的文件。

我能够将字符串提取到编辑器中，但转换为多行缩进 XML 是很棘手的。有关如何解决此类任务的任何帮助？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:15:14.017

一个好的解决方案是运行：

```
xmllint --format file.xml 
```

`xmllint`是`libxml2-utils`debian 的一部分，请参阅[http://www.xmlsoft.org/](http://www.xmlsoft.org/)（也适用于 windows）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:04:14.460

使用这个在线工具：[http](http://www.freeformatter.com/xml-formatter.html) ://www.freeformatter.com/xml-formatter.html 。

我每天都使用它，它工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:25:29.360

同事找到了它——Visual Studio 有一个 Edit.Advanced.FormatDocument 选项，可以在格式化废弃的 XML 时进行尝试。它终于让我走了。

感谢大家的贡献。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-07T10:33:25.057

在 Atom 文本编辑器中使用“Xml formatter”包。 [https://atom.io/packages/xml-formatter](https://atom.io/packages/xml-formatter)

它离线，您不会冒数据隐私的风险

# android - 如何使用 IF 检查 TextView 的可见性

> ID：15363364
> 
> 赞同：10
> 
> 时间：2013-03-12T14:03:04.520
> 
> 标签：android

我有一个 onCheckChangedListener 来显示一个 textView，具体取决于选择了哪个单选按钮。我有 1 个问题和 1 个问题，我想知道是否有人可以帮助我。

问题：您可以将单选组默认检查值设置为 NO 单选按钮，以便一开始就没有检查吗？

问题：如何使用 IF 语句来确定文本视图是否已经“可见”，如果将其设置为“已消失”，我将包含我当前的代码。

代码：

```
 @Override
public void onCheckedChanged(RadioGroup arg0, int arg1) {
    switch(arg1){
    case R.id.rfolk1:
        Folk1.start();
        TvFolk1.setVisibility(View.VISIBLE);

        TvFolk2.setVisibility(View.GONE);

        Play.setVisibility(View.VISIBLE);
        Pause.setVisibility(View.VISIBLE);
        Stop.setVisibility(View.VISIBLE);

        Play2.setVisibility(View.GONE);
        Pause2.setVisibility(View.GONE);
        Stop2.setVisibility(View.GONE);
        break;
    case R.id.rfolk2:
        Folk2.start();
        TvFolk2.setVisibility(View.VISIBLE);
        TvFolk1.setVisibility(View.GONE);

        Play2.setVisibility(View.VISIBLE);
        Pause2.setVisibility(View.VISIBLE);
        Stop2.setVisibility(View.VISIBLE);

        Play.setVisibility(View.GONE);
        Pause.setVisibility(View.GONE);
        Stop.setVisibility(View.GONE);
        break;
    } 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-12T14:07:30.923

该类`View`包括一个[`getVisibility()`](http://developer.android.com/reference/android/view/View.html#getVisibility%28%29)方法。比较一下：

例如：

```
if (TvFolk1.getVisibility() == View.VISIBLE)
  TvFolk2.setVisibility(View.GONE); 
```

为了缩短代码，您还可以制作一个方法：

```
public static void goneIfVisible (View v)
{
  if (v.getVisibility() == View.VISIBLE)
      v.setVisibility(View.GONE);
} 
```

请记住，在 Java 中，变量是小写的，类名只能使用大写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:12:39.090

// 如果 TextView 已经显示并且您想隐藏它。

```
if (TvFolk1.isShown()) {
    TvFolk2.setVisibility(View.INVISIBLE);
} 
```

// 取消选中单选按钮组中的所有单选按钮

```
RadioGroup rgButton = (RadioGroup)findViewById(R.id.radiobuttongroup);
rgButton.clearCheck(); 
```

# javascript - jsTree复选框check_node不起作用

> ID：15363367
> 
> 赞同：1
> 
> 时间：2013-03-12T14:03:09.153
> 
> 标签：javascript, jquery, jstree

jstree v1.0

我刚刚对复选框示例进行了修改：http: [//www.jstree.com/documentation/checkbox](http://www.jstree.com/documentation/checkbox)

我的目标：在检查任何节点时，我希望检查所有父节点（默认行为不行，因为这是部分选择的东西，对我不利）

根据提示和文档，我扩展了原始示例，但我发现该`check_node`方法不起作用。我没有注意到任何影响。

欢迎任何提示或建议。

```
<div id="demo1" class="demo">
    <ul>
        <li id="phtml_1">
            <a href="#">Root node 1</a>
            <ul>
                <li id="phtml_2" >
                    <a href="#">Child node 1</a>
                </li>
                <li id="phtml_3">
                    <a href="#">A Child node 2</a>
                </li>
            </ul>
        </li>
        <li id="phtml_4">
            <a href="#">Root node 2</a>
        </li>
        <li id="phtml_5">
            <a href="#">Root node 1</a>
            <ul>
                <li id="phtml_51">
                    <a href="#">Child node 1</a>
                </li>
                <li id="phtml_52">
                    <a href="#">A Child node 2</a>
                </li>
            </ul>
        </li>
        <li id="phtml_6">
            <a href="#">Root node 1</a>
            <ul>
                <li id="phtml_61">
                    <a href="#">Child node 1</a>
                </li>
                <li id="phtml_62">
                    <a href="#">A Child node 2</a>
                </li>
            </ul>
        </li>
    </ul>
</div>
<script type="text/javascript" class="source">
$(function () {
    var x = $("#demo1");
    $(x).jstree({
        "checkbox" :{
            real_checkboxes:false,
            override_ui:true,
            two_state:false,    
        },
        "plugins" : [ "themes", "html_data", "checkbox", "ui" ]
    }).bind('check_node.jstree', function (e, data) { 
        console.log('check_node.jstree ----------------------------------------------');
        console.log(e);
        var all_selected = $(x).jstree('get_checked')
        console.log('all_selected='+all_selected);
        for(var i=0;i<all_selected.length;i++){
            var paths = $(x).jstree('get_path', all_selected[i], true);
            console.log('  paths='+paths);
            for(var j=0; j< paths.length;j++){
                console.log('    checking node (not working)='+paths[j]);
                $(x).jstree('check_node',paths[j]);
            }
        }
    });
    console.log('programaticcaly checking last parent node (not working)')
    //$(x).jstree('check_node',$('li#phtml_6'));
    $.jstree._reference("#demo1").check_node('li#phtml_6');
});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-06T12:06:51.343

以下代码对我有用...

```
var contact_list = $('#compose_contact_list');

    联系人列表.jstree（{
        “复选框”：{
            “keep_selected_style”：假，
            “tie_selection”：假
        },
        “插件”：[“复选框”]
    });

    contact_list.on("check_node.jstree", function(event, data){
        警报（data.node.text）；
    });

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T06:28:28.110

尝试这个，

```
.bind('check_node.jstree', function(e, data) {
    var currentNode = data.rslt.obj.attr("id");
    var parentNode = data.inst._get_parent(data.rslt.obj).attr("id");
   jQuery.jstree._reference($("#tree")).check_node('#'+parentNode);
 }); 
```

如果你想参考这个[http://jsfiddle.net/bwTrP/3/](http://jsfiddle.net/bwTrP/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-28T03:34:11.127

jstree-3.2.1

```
/**
 * check tree node
 * treeid：tree id
 * nodeids：node id, id or id array
 */
function checkTreeNodes (treeid, nodeids) {
    // Tree
    var tree = $("#" + treeid);
    // IE
    tree.jstree(true).check_node(nodeids);
    // Chrome or Firefox
    tree.on("loaded.jstree", function (e, data) {
        tree.jstree(true).check_node(nodeids);
    }).jstree();
} 
```

[https://github.com/vakata/jstree/issues/1266](https://github.com/vakata/jstree/issues/1266)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T21:21:17.150

只需包含一个简单的`click`函数，如下所示。

```
$(x).on("click", function () {
    $(x).jstree("select_all");
}); 
```

# jquery - 地图覆盖圈，谷歌文档中缺少拖动事件

> ID：15363370
> 
> 赞同：1
> 
> 时间：2013-03-12T14:03:19.047
> 
> 标签：jquery, google-maps, google-maps-api-3, jquery-gmap3

我有一个带有圆圈的谷歌地图，一旦我改变半径，我就会提交一个带有新参数的表格，

这`editable:true`和`radius_changed`-event配合得很好

因为当您完成调整大小移动时会触发 radius_changed 事件。

我想对 center_changed-event 做同样的事情，但是当我“放下”圆圈时，它不会触发，它会在中心改变时触发，

我在文档中找不到任何圆圈的拖动事件，

问题是，只要我将圆圈移动 px，我的表单就会立即提交。

这是我的 gmap3 代码片段

```
 circle:{
options:{
  center: destination,
  radius : distance,
  fillColor : "white",
  fillOpacity:0.3,
  strokeColor : "#c9311b",
  editable:true,
  draggable:true
},
events:{
  click: function(circle){
    circle.setOptions({
      fillColor : "white",
      fillOpacity:0.1,
      strokeColor : "#FF512F"  
    });
  },
  radius_changed: function(circle){
    var radius =circle.getRadius() ;
    var newradius = parseInt(radius) / 1000;
    alert(parseInt(newradius,10));
    $('#seldistance').val(parseInt(newradius,10));
    $('.sucheen').submit();

  },
  center_changed: function(circle){   //
    var center = circle.getCenter();  // Here´s the center change event,
    console.log(center);              //it really spams the console when you drag
  }                                   //
},
callback: function(circle){
    if(distance != '0'){
        if ( distance < '1000'){
            $(this).gmap3('get').setZoom(15);
            console.log('radius ='+distance);
        }
        else if ( distance < '5000'){
            $(this).gmap3('get').setZoom(13);
            console.log('radius ='+distance);
        }
        else if ( distance < '10000'){
            $(this).gmap3('get').setZoom(12);
            console.log('radius ='+distance);
        }
        else if ( distance < '20000'){
            $(this).gmap3('get').setZoom(11);
            console.log('radius ='+distance);
        }
        else if ( distance < '35000'){
            $(this).gmap3('get').setZoom(10);
            console.log('radius ='+distance);
        }
        else{
        $(this).gmap3('get').setZoom(10);   
        }
    }
    else {
    //Clear circle if no radius is set
    $(this).gmap3({
      clear: {
        name:["circle"],
        last: true
      }
    });
    $(this).gmap3('get').setZoom(12);
    }
}
},//close circle 
```

任何人都知道如何触发 dragend 事件？=

好的，我意识到我想要的功能带有可编辑：true 但只有当我使用小中心点拖动时，我很想将整个圆圈拖动到任何地方提前感谢***任何***提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:11:05.643

# hibernate - Hibernate 4.1 - 任何对象的 get() 函数

> ID：15363372
> 
> 赞同：1
> 
> 时间：2013-03-12T14:03:22.463
> 
> 标签：hibernate, get

使用 Hibernate 从数据库中获取数据的示例：

```
Cat cat = session.get( Cat.class, catId ); 
```

我问自己，是否有可能生成一个允许从会话中获取任何对象的静态函数（例如在 HibernateUtil.java 中）。像这样的东西：

```
public static Object getObjectfromDatabase(Class class, long id) {
    ...
    return session.get( class, id );
} 
```

当然，“Class class”不是有效的表达方式，但是在这种情况下如何识别对象呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:10:18.270

虽然`Class class`无效，但您可以使用`Class<?> class`. 通过此更改，通用查询方法应该可以工作。如果您不知道该类，请从实体本身获取它：

```
MyEntity entity = (MyEntity) getObjectfromDatabase(MyEntity.class, entity.getId()); 
```

# php - 如何从字符串中获取特定单词

> ID：15363374
> 
> 赞同：-3
> 
> 时间：2013-03-12T14:03:24.913
> 
> 标签：php

我正在尝试根据特定字符获取字符串的最后一个元素，即

```
$a='-test-hello'; 
```

输出应该是`hello`.

现在我想根据字符提取 hello `-`。我尝试`strstr`在 PHP 中使用函数。

但它没有用。如果有人可以分享如何实现这一点的任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T14:04:28.243

试试这个：

```
$a = '-test-hello';
$p = explode('-', $a);
echo end($p); 
```

# mongodb - 将 CSV 文件作为参数传递给 Web 服务

> ID：15363376
> 
> 赞同：0
> 
> 时间：2013-03-12T14:03:30.640
> 
> 标签：mongodb, csv, soaplib

如何将**CSV 文件**内容作为参数传递给python 中的**Web 服务**。现在我只将 5 个值传递给 Web 服务并将其插入到 mongodb 数据库。我正在使用soaplib web 服务和mongodb 数据库，使用soaplib 加载数据到数据库。如何将 CSV 文件内容传递给 Web 服务并将其插入 mongodb 数据库？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:53:33.977

尝试以下步骤：

1.  首先找到 CSV 文件位置，它可以通过 Python 以编程方式访问。将其视为`path`
2.  浏览此**[链接](http://www.tutorialspoint.com/python/python_files_io.htm)**，阅读与链接文章中引用的示例类似的文件。

    **例子：**

    ```
    fo = open(path + "yourfile.csv", "r+")
    str = fo.read(10); 
    ```

3.  **[使用您的mongo-python-driver](https://github.com/mongodb/mongo-python-driver)**打开与 MongoDB 的连接

    **例子：**

    ```
    import pymongo
    client = pymongo.MongoClient("localhost", 27017) 
    ```

4.  然后最终传递您在步骤中读取的文件内容

    **示例**：`db.my_collection.save({"CSV_FileContent": Obj_CSV_File})`

## 要将文件内容从 python 程序传递到 Web 服务，您可以尝试以下操作：

*   XML 可以，但根本不是最好的方法（因为如果 XML 中包含不必要的元数据）[Web 服务中的大型 XML 数据](http://www.coderanch.com/t/224691/Web-Services/java/Design-Large-XML-Data-Web)。

*   [消息传输优化机制](http://en.wikipedia.org/wiki/MTOM)是最好考虑的。

# objective-c - 同时在 CoreData 中工作

> ID：15363377
> 
> 赞同：0
> 
> 时间：2013-03-12T14:03:34.627
> 
> 标签：objective-c, xcode, core-data, nsmanagedobjectcontext

首先，对不起，如果我的英语不完美，我不是一个以英语为母语的人 ;) ！

我正在开发一个从 iCal 检索 EKEvent 并将它们添加到我的应用程序的应用程序。

该应用程序的目的是日历，因此：

用户从他想要的日历中检索 iCal 的 EKEvent。

EKEvent 被保存到一个名为“Event”的实体中。

用户可以从应用程序中编辑、添加、删除事件 - EKEvent 关联也将在 iCal 中进行修改。

问题：当用户在 iCal 中修改某些内容时，必须将其修改到我的应用程序中，所以我发现的唯一方法是从 iCal 检索所有 EKEvent - 当应用程序变为活动时 - 并将其复制到名为“EventBackup”的备份实体中。当 iCal 中的所有 EKEvent 都被很好地检索并保存到“EventBackup”实体中时，我将该实体复制到我的主实体“Event”中。

我在异步中成功地做到了

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, (unsigned long)NULL), ^(void) { }); 
```

但是我必须继续使用我的应用程序 - 所以从 CoreData 检索 Event * - 而我正在执行 EventBackup ...如果我正在处理 CoreData，我的应用程序崩溃问题。

你能帮忙吗，或者向我提出一些与我正在做的不同的事情。

非常感谢你帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:18:32.690

你应该看看 NSManagedObjectContext 的 performBlock: 方法。具体来说，您应该创建一个子上下文，在后台线程中对其进行更改，然后侦听保存通知以将其合并到父上下文中。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(managedObjectContextDidSave:) name:NSManagedObjectContextDidSaveNotification object:nil];

NSManagedObjectContext *childContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
[childContext setParentContext:self.managedObjectContext];
[childContext performBlock:^{

    //Do everything here...

    NSError *error = nil;
    [context save:&error];
    if (error) {
        NSLog(@"Error saving child context:%@", error.localizedDescription);
    }

 }]; 
```

监听要保存的子上下文，然后保存主上下文。

```
 - (void)managedObjectContextDidSave:(NSNotification *)notification
 {
    if ([notification object] != self.managedObjectContext) {
       dispatch_sync(dispatch_get_main_queue(), ^{
         [self.managedObjectContext save:nil];
      });
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:03:13.620

为了更清楚我在做什么 - 使用你的代码。

块中的方法正在处理`childContext`NSManagedObjectContext

我在 AppDelegate 中，那

```
- (void)methodToBeCalledEveryTimeTheAppBecomeActive
{

    NSManagedObjectContext *contextParent = [[LavigneCoreData defaultManager] managedObjectContext];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(managedObjectContextDidSave:) name:NSManagedObjectContextDidSaveNotification object:nil];

    childContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    [childContext setParentContext:contextParent];
    [childContext performBlock:^{

        [self copySpecialsEvents];
        [self clearBackUpEntity];
        [self getCalendarWhichHasBeenSelected];
        [self copyNotesIntoBackUpEntity];
        [self clearEntityEvent];
        [self deepCopyFromBackUpEntityToEntity];

        NSError *error = nil;
        [contextParent save:&error];
        if (error) {
            NSLog(@"Error saving child context:%@", error.localizedDescription);
        }
    }];
} 
```

我在线上遇到错误： `[childContext setParentContext:contextParent];`

`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Parent NSManagedObjectContext must use either NSPrivateQueueConcurrencyType or NSMainQueueConcurrencyType.'`

***编辑 ：***

我通过更改修复了这个错误

```
_managedObjectContext = [[NSManagedObjectContext alloc] init]; 
```

和

```
_managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType]; 
```

# android - Android：检测软键盘何时显示？

> ID：15363388
> 
> 赞同：0
> 
> 时间：2013-03-12T14:04:11.697
> 
> 标签：android, keyboard, android-edittext, android-softkeyboard

有没有办法检测键盘何时将出现在 Android 中？

我的问题是我有一个带有 EditTexts 的 ListView。当键盘即将出现时，它们经常被重新绘制，导致刚刚被点击的 EditText 失去焦点并需要额外的点击。

我提出的解决方案是监视键盘何时显示，检查当前哪个视图具有焦点，然后在键盘显示完成后，将焦点恢复到该视图。

但是，我不知道如何在 Android 中检测键盘何时“即将显示”。我该怎么做？

（我也将接受解决我的实际问题的替代答案：EditText 失去焦点时显示键盘）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:22:16.077

你可以用另一种方式来做，创建一个独特的 OnFocusChangedListener myListener 并将它设置为你的所有 EditTexts 并在里面放置一个开关并存储这是最后一个获得/失去焦点的视图

# listview - 将文档库 Web 部件添加到共享点页面时出现问题

> ID：15363392
> 
> 赞同：0
> 
> 时间：2013-03-12T14:04:14.783
> 
> 标签：listview, sharepoint, web-parts, documents

我有以编程方式创建发布网站的代码。它工作正常，除了一件事。我必须将开箱即用的文档列表视图 Web 部件添加到 default.aspx 页面。它添加了 Web 部件，但底部没有添加文档链接，就像您手动添加文档 Web 部件时看到的那样。奇怪的是，如果我编辑 Web 部件，会有列表视图、外观、布局和高级部分。我单击“确定”而不进行更改，如果我返回并编辑 Web 部件，则会添加 2 个部分。AJAX 选项和杂项。如果我再次单击确定而不进行更改，则会显示添加文档链接。

```
string pageURL = "default.aspx";

SPFile destFile = newWeb.GetFile(pageURL);
if (destFile.Exists)
{
  if (destFile.CheckOutType == SPFile.SPCheckOutType.None)
    destFile.CheckOut();
}
else
{
    pageURL = "pages/default.aspx";
    destFile = newWeb.GetFile(pageURL);
    if (destFile.CheckOutType == SPFile.SPCheckOutType.None)
        destFile.CheckOut();
}

SPLimitedWebPartManager mgr = 
    newWeb.GetLimitedWebPartManager(pageURL, PersonalizationScope.Shared);

// add the document library
SPList docLib;

if (!bHasDocuments)
{
    // create the document library
    Guid docLibGuid = newWeb.Lists.Add(
        "Documents", 
        "", 
        SPListTemplateType.DocumentLibrary);

    docLib = newWeb.Lists[docLibGuid];
}
else
{
    docLib = newWeb.Lists["Documents"];
}

docLib.OnQuickLaunch = true;
docLib.Update();

SPDocumentLibrary spDocLib = (SPDocumentLibrary)docLib;
spDocLib.EnableVersioning = true;
spDocLib.EnableMinorVersions = false;

// add the doc lib to the home page
ListViewWebPart wpDoc = new ListViewWebPart();
wpDoc.ZoneID = "TopZone";
wpDoc.ListName = docLib.ID.ToString("B").ToUpper();
wpDoc.ViewGuid = docLib.DefaultView.ID.ToString("B").ToUpper();

// Add the web part
mgr.AddWebPart(wpDoc, wpDoc.ZoneID, 20); 
```

任何想法如何让 Web 部件包含“添加文档”链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:21:00.677

尝试使用 XsltListViewWebPart wpDoc = new XsltListViewWebPart();

代替 ListViewWebPart wpDoc = new ListViewWebPart();

它在 SP2013 中对我有用。

# javascript - 使地图的每个州（区域）都可以点击

> ID：15363394
> 
> 赞同：-6
> 
> 时间：2013-03-12T14:04:20.497
> 
> 标签：javascript, jquery, css, html

请帮助 ![地图](../Images/eb3dd47114b6cf3c8b0258822bd91c75.png) 我希望这张地图的每个部分都可以点击从左到右顶部和底部的终点我将非常感谢问候 Akmal Rasool

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:07:20.167

这称为图像映射。[这](http://www.image-maps.com/)是一个可以为您完成的网站。或者谷歌搜索

或者使用 Dreamweaver（更好）

# sql - 来自 2 个表的 SQL 条件 SELECT

> ID：15363396
> 
> 赞同：-1
> 
> 时间：2013-03-12T14:04:28.643
> 
> 标签：sql, select, conditional

我是 SQL 新手，希望能在以下查询中获得一些帮助。

我有 3 张桌子：

*   学生（姓名，学生ID）；
*   考试成绩（模块代码，学生ID，成绩）；
*   项目（module_code，student_id，grade）。

我想选择学生姓名、年级和模块代码，但是有些模块既有考试又有与之相关的项目。因此，如果是这种情况，我想评分为项目和考试的平均分，否则只是考试的评分。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:08:53.813

```
SELECT s.student_id, s.name, m.module_code, avg(m.grade) as grade from students s 
inner join 
(select module_code, student_id, grade from exam_results 
union all select module_code, student_id, grade from projects) as exam_module m 
on s.student_id = m.student_id
group by s.student_id, s.name, m.module_code 
```

# javascript - 从objective c + sencha touch调用javascript函数

> ID：15363399
> 
> 赞同：1
> 
> 时间：2013-03-12T14:04:31.460
> 
> 标签：javascript, objective-c, sencha-touch, appdelegate

我正在移动设备中创建 1 个应用程序。

从appdelegate（iphone），我想调用驻留在我的sencha touch控制器中的javascript。有人可以帮我吗？

我真的被困住了。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:20:34.970

尝试使用自定义 URL 方案。

Sencha API Docs 将告诉您将以下代码添加到您的应用程序::

```
Ext.application({
name: 'Sencha',
requires: ['Ext.device.Device'],
launch: function() {
    if (Ext.device.Device.scheme) {
        // the application was opened via another application. Do something:
        alert('Applicaton pened via another application: ' + Ext.device.Device.scheme.url);
    }

    // Listen for future changes
    Ext.device.Device.on('schemeupdate', function(device, scheme) {
        // the application was launched, closed, and then launched another from another application
        // this means onReady will not be called again (because the application is already running in the 
        // background) - but this event will be fired
        alert('Applicated reopened via another application: ' + scheme.url);
    }, this);
}
}); 
```

为确保此操作有效，请在 packager.json 文件中添加您在打包应用程序时要使用的自定义 URL，如下所示：

```
{
...
"rawConfig": "<key>CFBundleURLTypes</key><array><dict><key>CFBundleURLSchemes</key><array><string>sencha</string></array><key>CFBundleURLName</key><string>com.sencha.example</string></dict></array>"
...
} 
```

编辑 :: 目前仅适用于 Sencha Native Packager，不适用于 Phonegap。

# rest - RESTlet 客户端尝试通过 @GET 从 JAX-RS 服务获取对象的 ArrayList 时出现代码 406

> ID：15363400
> 
> 赞同：0
> 
> 时间：2013-03-12T14:04:34.210
> 
> 标签：rest, jax-rs, restlet

刚刚开始 java 开发并尝试构建一个简单的客户端-服务器应用程序。我在服务器端使用 JAX-RS，在客户端使用 RESTlet。我想调用服务器端的 @GET 方法并取回 Customer 对象的列表

这是一些代码：

服务器

```
@GET
@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
public ArrayList<Customer> showAllCustomers() {
    ArrayList<Customer> list = DBAccess.getInstance().getAllCustomers();
    return list;
} 
```

客户

```
package RESTlet;

import java.util.ArrayList;
import org.restlet.resource.Delete;
import org.restlet.resource.Get;
import org.restlet.resource.Put;

import customer.model.Customer;

public interface CustomerResource {

@Get
public ArrayList<Customer> retrieve();

@Put
public void store(Customer contact);

@Delete
public void remove();
} 
```

我尝试在主类中接收列表

```
public class MainApplication {

public static void main(String[] args) {

    ClientResource cr = new ClientResource("http://localhost:8080/CustomerRESTServicex/rest/customer");
    // Get the Contact object
    CustomerResource resource = cr.wrap(CustomerResource.class);
    ArrayList <Customer> customerList = resource.retrieve();
    for (Customer customer : customerList) {
        System.out.println(customer.getFirstname() + " " + customer.getLastname() + ", " + customer.getStreet() + " " + customer.getStreetnr());
    }
}
} 
```

这是我得到的例外

```
Exception in thread "main" Not Acceptable (406) - Not Acceptable 
```

我期待着您的来信。

# php - 在 symfony 上安装预生产时出现缓存访问问题

> ID：15363406
> 
> 赞同：2
> 
> 时间：2013-03-12T14:04:58.713
> 
> 标签：php, caching, symfony, require

我目前正在尝试在我的专用服务器上安装预生产分支。

`/web/preprod`我在我的 symfony 生产项目的directoty 中安装了一个 Symfony 版本。我设法正确链接了前端控制器和路由，现在我在 preprod 分支中调用了一个操作。

我收到此错误消息：

> 警告：require_once（/var/www/vhosts/ns21206.ovh.net/citydom/web/preprod/app/cache/prod_new/jms_diextra/proxies/CityDom-APIBundle-Controller-GangController.php）：无法打开流：否第 13 行 /var/www/vhosts/ns21206.ovh.net/citydom/web/preprod/app/cache/prod/jms_diextra/controller_injectors/CityDomAPIBundleControllerGangController.php 中的此类文件或目录
> 
> 致命错误：require_once()：无法打开所需的“/var/www/vhosts/ns21206.ovh.net/citydom/web/preprod/app/cache/prod_new/jms_diextra/proxies/CityDom-APIBundle-Controller-GangController.php” (include_path='.:/usr/share/pear:/usr/share/php') 在 /var/www/vhosts/ns21206.ovh.net/citydom/web/preprod/app/cache/prod/jms_diextra/controller_injectors /CityDomAPIBundleControllerGangController.php 第 13 行

preprod 缓存文件夹的权限为 777。

并非所有操作都不起作用，但这一个不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:13:53.153

请参阅[本节](http://symfony.com/doc/master/book/installation.html#configuration-and-setup)中的*设置权限*。跟着命令走。`setfacl`

# java - 将 SQLite 数据库中的数据显示到 Android 中的 ListView 中

> ID：15363411
> 
> 赞同：3
> 
> 时间：2013-03-12T14:05:10.180
> 
> 标签：java, android, sqlite

虽然这个问题在这里被问过很多次，但我只是找不到适合我的代码的正确答案。我意识到这可能是一件小事，但我似乎无法找到问题所在，因为我只是对此很陌生。

这是我在**DatabaseHelper**类中的代码**getClientNames ：**

 **```
public Cursor getSitesByClientname(String id) {
    String[] args={id};

Cursor myCursor = db.rawQuery("SELECT client_sitename FROM " + CLIENT_SITES_TABLE + " WHERE client_id=?", args);
        String results = "";
        /*int count = myCursor.getCount();
        String[] results = new String[count + 1];
        int i = 0;*/

         if (myCursor != null) {           
                if(myCursor.getCount() > 0)
                {   
                    for (myCursor.moveToFirst(); !myCursor.isAfterLast(); myCursor.moveToNext())
                    {
                        results = results + myCursor.getString(myCursor.getColumnIndex("client_sitename")); 
                    }
                }
            }
            return results;
} 
```

一个问题是我正在向“光标”返回一个“字符串”，但我不确定解决这个问题的最佳方法是什么，因为我认为我应该返回一个光标。

这是我要显示数据的**ClientSites类：**

```
public class ClientSites extends Activity {

//public final static String ID_EXTRA="com.example.loginfromlocal._ID";

        private DBUserAdapter dbHelper = null;
    private Cursor ourCursor = null;
    private Adapter adapter=null;

    @SuppressWarnings("deprecation")
    @SuppressLint("NewApi")
    public void onCreate(Bundle savedInstanceState) {
        try
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.client_sites);

            Intent i = getIntent();
            String uID = String.valueOf(i.getIntExtra("userID", 0));

            ListView myListView = (ListView)findViewById(R.id.myListView);

            dbHelper = new DBUserAdapter(this);

            //dbHelper.createDatabase();

            dbHelper.openDataBase();

            ourCursor = dbHelper.getSitesByClientname(uID);
            Log.e("ALERT", uID.toString());

            startManagingCursor(ourCursor);
            Log.e("ERROR", "After start manage cursor: ");

            //@SuppressWarnings("deprecation") 
            //SimpleCursorAdapter adapter = new SimpleCursorAdapter(getBaseContext(), R.id.myListView, null, null, null);
            CursorAdapter adapter = new SimpleCursorAdapter(this, R.id.myListView, null, null, null, 0);
            adapter = new Adapter(ourCursor);

            //Toast.makeText(ClientSites.this, "Booo!!!", Toast.LENGTH_LONG).show();

            myListView.setAdapter(adapter);

            myListView.setOnItemClickListener(onListClick);

        }
        catch (Exception e)
        {
            Log.e("ERROR", "XXERROR IN CODE: " + e.toString());
            e.printStackTrace();
        } 

    }

    private AdapterView.OnItemClickListener onListClick=new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent,
                                View view, int position,
                                long id) 
        {
            Intent i=new Intent(ClientSites.this, InspectionPoints.class);

            i.putExtra(ID_EXTRA, String.valueOf(id));
            startActivity(i);

        }
    };

    class Adapter extends CursorAdapter {
        @SuppressWarnings("deprecation")
        Adapter(Cursor c) {
          super(ClientSites.this, c);
        }

        //@Override
        public void bindView(View row, Context ctxt,
                           Cursor c) {
            Holder holder=(Holder)row.getTag();
            holder.populateFrom(c, dbHelper);
        }
        @Override
        public View newView(Context ctxt, Cursor c,
                           ViewGroup parent) {
          LayoutInflater inflater=getLayoutInflater();
          View row = inflater.inflate(R.layout.row, parent, false);
          Holder holder=new Holder(row);
          row.setTag(holder);
          return(row);
        }
      }

    static class Holder {
        private TextView name=null;

        Holder(View row) {
            name=(TextView)row.findViewById(R.id.ingredientText);
        }

        void populateFrom(Cursor c, DBUserAdapter r) {
            name.setText(r.getName(c));
        }
    }
} 
```

这是我现在用来尝试在 Listview 中显示数据的代码。我从最初的尝试中对其进行了一些更改，但仍然不确定我做错了什么。

```
public void onCreate(Bundle savedInstanceState) {
        try
        {
            super.onCreate(savedInstanceState);
            //setContentView(R.layout.client_sites);

            Intent i = getIntent();
            String uID = String.valueOf(i.getIntExtra("userID", 0));
            //int uID = i.getIntExtra("userID", 0);

            //ListView myListView = (ListView)findViewById(R.id.myListView);

            dbHelper = new DBUserAdapter(this);

            dbHelper.createDatabase();

            dbHelper.openDataBase();

            String[] results = dbHelper.getSitesByClientname(uID);

            //setListAdapter(new ArrayAdapter<String>(ClientSites.this, R.id.myListView, results));
            //adapter = new ArrayAdapter<String>(ClientSites.this, R.id.myListView, results);
            setListAdapter(new ArrayAdapter<String>(ClientSites.this, R.layout.client_sites, results));

            //ListView myListView = (ListView)findViewById(R.id.myListView);
            ListView listView = getListView();
            listView.setTextFilterEnabled(true);

            //ourCursor = dbHelper.getSitesByClientname(uID);
            //Log.e("ALERT", uID.toString());

            //startManagingCursor(ourCursor);
            //Log.e("ERROR", "After start manage cursor: ");

            //@SuppressWarnings("deprecation") 
            //SimpleCursorAdapter adapter = new SimpleCursorAdapter(getBaseContext(), R.id.myListView, null, null, null); // LOOK AT THIS IN THE MORNING!!!!!!!!!!! 
            //CursorAdapter adapter = new SimpleCursorAdapter(this, R.id.myListView, null, null, null, 0);
            //adapter = new Adapter(ourCursor);

            //Toast.makeText(ClientSites.this, "Booo!!!", Toast.LENGTH_LONG).show();

            //myListView.setAdapter(adapter);

            //myListView.setOnItemClickListener(onListClick); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:24:54.643

我从数据库创建了一个 Listview。这是我用于我的应用程序的代码

这是数据库处理程序的一部分。它将为我的列表视图返回一个类别列表。如果这是您需要的，它可以返回一个字符串列表。

```
public List<Category> getAllCategorys() {
        ArrayList<Category> categoryList = new ArrayList<Category>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_CATEGORY;
        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        // looping through all rows and adding to list
        try{
            if (cursor.moveToFirst()) {
                do {
                    Category category = new Category();
                    category.setID(Integer.parseInt(cursor.getString(0)));
                    category.setCategory(cursor.getString(1));
                    // Adding category to list
                    categoryList.add(category);
                } while (cursor.moveToNext());
            }   
        }finally{
            cursor.close();
        }   
        db.close();
        // return category list
        return categoryList; 
```

这是我通过调用数据库填充 ListView 的方法。

```
int size = db.getCategoryCount();
List<Category> categoryList = db.getAllCategorys();

category_data = new String[size-1];
int i=0;
for(Category cn : categoryList)
{   
    category_data[i] = cn.getCategory(); // get the name of the category and add it to array
    i++;   
} 

listAdapter = new ArrayAdapter<String>(this, R.layout.categoryrow, category_data);
listViw.setAdapter(listAdapter); 
```

编辑：这是应该为你工作的东西

```
public List<String> getSitesByClientname(String id) {
    String[] args={id};
    ArrayList<String> result = new ArrayList<String>();
    SQLiteDatabase db = this.getWritableDatabase();

    Cursor myCursor = db.rawQuery("SELECT client_sitename FROM " + CLIENT_SITES_TABLE +      " WHERE client_id=?", args);

    try{
       if (myCursor.moveToFirst()){
           do{
              result.add(myCursor.getString(myCusor.getString(myCursor.getColumnIndex("client_sitename"));
           }while(myCursor.moveToNext());
        }
    }finally{
         myCursor.close();
    }
    db.close();
    return result;
} 
```

像这样使用它

```
List<String> sites_data = dbHelper.getSitesByClientname(uID);

result_data = new String[sites_data.size()];
int i=0;
for(String s : sites_data)
{   
    result_data[i] = s; // get the name of the category and add it to array
    i++;   
} 

listAdapter = new ArrayAdapter<String>(this, R.layout.client_sites, result_data);
listViw.setAdapter(listAdapter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:30:58.883

如果你想从 dbHelper 返回游标，你可以做这样的事情......

```
public Cursor getSitesByClientname(String id) {
    String[] args={id};

return db.rawQuery("SELECT client_sitename FROM " + CLIENT_SITES_TABLE + " WHERE client_id=?", args);
} 
```

我还需要一些时间阅读[listview 教程](http://developer.android.com/guide/topics/ui/layout/listview.html "列表视图教程")**

# c++ - 实现多个函数调用是不好的做法吗？

> ID：15363412
> 
> 赞同：1
> 
> 时间：2013-03-12T14:05:10.337
> 
> 标签：c++, overloading

做这些事情不好吗？：

“只为调用其他函数而制作函数是不是很糟糕？”

```
void pyRunScript(&o_Log, &o_Dict, ModuleName, *pDictArgs = NULL)
{
    pyRunScript(o_Log, o_Dict, ModuleName, "run", pDictArgs);
}

void pyRunScript(&o_Log, &o_Dict, ModuleName, FuncName, *pDictArgs = NULL)
{ ... } 
```

注意：由于stackoverflow中的框宽度有限而省略了数据类型
&o_意味着该变量仅用于输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:07:57.587

有一个函数只调用另一个函数并提供更多信息是不是很糟糕？一点也不，如果它消除了重复，这是实现这一目标的简单方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:08:01.490

不，一般来说，制作只调用其他函数的函数也不错，例如“呼叫中心函数”，请参阅 Steve McConnell，Code Complete。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:08:46.647

拥有一个只使用默认值调用不同函数的函数并不是一个坏习惯。但是如果不添加最后一个参数，则特别使用相同的名称是一种不好的做法。`pDictArgs`如果假设是 char* ，它不仅会让用户感到困惑，也会让编译器感到困惑

我只想给函数名称一个“扭曲”以使其更容易区分：

```
void pyRunNamedScript(&o_Log, &o_Dict, ModuleName, FuncName, *pDictArgs = NULL)
{ ... } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T14:09:12.873

这种事情实际上是一种很好的代码复用方式，不同的功能之间只有很小的区别。

非常好。

编辑：大多数现代编译器将内联这些类型的“包装函数”，这样它就不会增加任何开销。出于这个原因，将包装函数放在带有内联的头文件中通常是有意义的，以便编译器能够做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T14:09:42.330

让一个函数只调用另一个函数也不错。但是在这种情况下，我可能会这样做：

```
void pyRunScript(&o_Log, &o_Dict, ModuleName, FuncName = "run", *pDictArgs = NULL) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T14:51:45.370

不是非法的，但总是会提供一些额外的开销：这是调用函数的成本，如果合适的话，最好通过尝试内联函数来避免这种情况

# c# - 为什么从 Async CTP / Release 中删除“SwitchTo”？

> ID：15363413
> 
> 赞同：16
> 
> 时间：2013-03-12T14:05:15.223
> 
> 标签：c#, asynchronous, async-ctp, async-await

今天尝试使用SwitchTo方法切换到GUI线程，发现我举出来的例子不起作用，只是因为方法不存在。

[然后我在这里](http://social.msdn.microsoft.com/Forums/en-US/async/thread/078c7e77-5b16-4130-bbf5-c8e6ac82effa)找到了这个简介：

> 我们摆脱它的原因是因为它太危险了。另一种方法是将您的代码捆绑在 TaskEx.Run 中...

我的问题很简单：*为什么*它很危险？使用它会导致哪些具体危险？

请注意，我*确实*阅读了该帖子的其余部分，因此我明白这里存在​​技术限制。我的问题仍然是，如果我知道这一点，为什么它很*危险*？

我正在考虑重新实现辅助方法以赋予我指定的功能，但如果有一些根本性的问题，除了有人认为它很危险之外，我不会这样做。

具体来说，非常天真地，这是我考虑实现所需方法的方式：

```
public static class ContextSwitcher
{
    public static ThreadPoolContextSwitcher SwitchToThreadPool()
    {
        return new ThreadPoolContextSwitcher();
    }

    public static SynchronizationContextSwitcher SwitchTo(this SynchronizationContext synchronizationContext)
    {
        return new SynchronizationContextSwitcher(synchronizationContext);
    }
}

public class SynchronizationContextSwitcher : INotifyCompletion
{
    private readonly SynchronizationContext _SynchronizationContext;

    public SynchronizationContextSwitcher(SynchronizationContext synchronizationContext)
    {
        _SynchronizationContext = synchronizationContext;
    }

    public SynchronizationContextSwitcher GetAwaiter()
    {
        return this;
    }

    public bool IsCompleted
    {
        get
        {
            return false;
        }
    }

    public void OnCompleted(Action action)
    {
        _SynchronizationContext.Post(_ => action(), null);
    }

    public void GetResult()
    {
    }
}

public class ThreadPoolContextSwitcher : INotifyCompletion
{
    public ThreadPoolContextSwitcher GetAwaiter()
    {
        return this;
    }

    public bool IsCompleted
    {
        get
        {
            return false;
        }
    }

    public void OnCompleted(Action action)
    {
        ThreadPool.QueueUserWorkItem(_ => action(), null);
    }

    public void GetResult()
    {
    }
} 
```

这将允许我编写如下代码：

```
public async void Test()
{
    await ContextSwitcher.SwitchToThreadPool(); // ensure we're not bogging down the UI thread
    // do some heavy processing
    await _UIContext.SwitchTo(); // presumably saved from the main thread
    // update UI with new data
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T14:56:58.443

Stephen Toub 在[这个线程](http://social.msdn.microsoft.com/Forums/en-US/async/thread/642ffef6-d3ce-4010-978d-bc5d8b65c00f)中有一些关于推理的更多信息。

总而言之，这不是一个好主意，原因有两个：

1.  它促进了非结构化代码。如果您有需要做的“繁重处理”，则应将其放在`Task.Run`. 更好的是，将您的业务逻辑与您的 UI 逻辑分开。
2.  错误处理和（某些）延续在未知上下文中运行。`catch`/`finally`块`Test`需要处理在线程池*或*UI 上下文中运行（如果它们在线程池上下文中运行，则它们不能用于`SwitchTo`跳转到 UI 上下文）。此外，只要你`await`返回`Task`你应该没问题（`await`如果需要，将更正继续上下文），但如果你有明确的`ContinueWith`继续使用，那么它们将遇到与/块`ExecuteSynchronously`相同的问题。`catch``finally`

简而言之，没有`SwitchTo`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-06T22:38:54.260

ConfigureAwait 实际上比 SwitchTo 更危险。精神上跟踪当前上下文和最后一次 SwitchTo 调用并不比跟踪最后分配变量的位置更难。另一方面，当且仅当调用实际异步运行时，ConfigureAwait 才会切换上下文。如果任务已经完成，则保留上下文。你无法控制这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-28T08:23:05.983

[根据本期 GitHub 问题](https://github.com/dotnet/runtime/issues/20025)中的 David Fowler 和 Stephen Toub 的说法，现在是 2020 年，看起来`SwitchTo`很快就会回到 CLR，因为inside /没有更多限制了。`await``try``catch`

IMO，使用类似`await TaskScheduler.Default.SwitchTo()`明确的东西比依赖`ConfigureAwait(false)`第三方库代码更好，特别是如果我们想确保代码不会在任何自定义同步上下文上执行。我有一篇博[文，其中包含](https://gist.github.com/noseratio/5d2d5f2a0cbb71b7880ce731c3958e62)[更多详细信息](https://dev.to/noseratio/why-i-no-longer-use-configureawait-false-3pne)，包括.[`SwitchTo`](https://gist.github.com/noseratio/5d2d5f2a0cbb71b7880ce731c3958e62)

简而言之，我相信下面的第一个选项清楚地表明了意图，并使用最少的样板代码：

```
// switch to the thread pool explicitly for the rest of the async method
await TaskScheduler.Default.SwitchTo();
await RunOneWorkflowAsync();
await RunAnotherWorkflowAsync(); 
```

```
// execute RunOneWorkflowAsync on the thread pool 
// and stay there for the rest of the async method
await Task.Run(RunOneWorkflowAsync).ConfigureAwait(false);
await RunAnotherWorkflowAsync(); 
```

```
await Task.Run(async () => 
{
  // start on the thread pool
  await RunOneWorkflowAsync();
  await RunAnotherWorkflowAsync();
}).ConfigureAwait(false);
// continue on the thread pool for the rest of the async method 
```

```
// start on whatever the current synchronization context is
await RunOneWorkflowAsync().ConfigureAwait(false);
// continue on the thread pool for the rest of the async method,
// unless everything inside `RunOneWorkflowAsync` has completed synchronously
await RunAnotherWorkflowAsync(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-27T00:10:50.237

[Microsoft.VisualStudio.Threading](https://www.nuget.org/packages/Microsoft.VisualStudio.Threading/)包中提供了[`SwitchTo`](https://docs.microsoft.com/en-us/dotnet/api/microsoft.visualstudio.threading.awaitextensions.switchto)扩展方法。这是此方法的签名：

```
public static
    Microsoft.VisualStudio.Threading.AwaitExtensions.TaskSchedulerAwaitable
    SwitchTo(this System.Threading.Tasks.TaskScheduler scheduler,
    bool alwaysYield = false); 
```

这是一个如何使用它的示例：

```
using Microsoft.VisualStudio.Threading;

private async void Button_Click(object sender, EventArgs e) 
{
    var ui = TaskScheduler.FromCurrentSynchronizationContext(); // Capture the UI thread

    // Do something on the UI thread

    await TaskScheduler.Default.SwitchTo(); // Switch to the ThreadPool

    // Do something on the ThreadPool

    await ui.SwitchTo(); // Switch back to the UI thread

    // Do something on the UI thread
} 
```

# javascript - Javascript setTimeout、循环和闭包

> ID：15363417
> 
> 赞同：1
> 
> 时间：2013-03-12T14:05:24.407
> 
> 标签：javascript, settimeout

以下代码让我感到困惑。我的目标是在一段时间内将 HTML 元素从一个不透明度级别淡化到另一个级别。下面是我的 dimScreen() 方法，用于创建一个变暗的叠加层并将其淡入。

```
var overlay;

function dimScreen()
{
   if(!overlay)
   {
      overlay = document.createElement('div');
      overlay.setAttribute('id', 'overlay');
      overlay.style.width = '100%';
      overlay.style.height = '100%';
      overlay.style.zindex = '1000';
      overlay.style.background = '#000013';
      overlay.style.position = 'fixed';
      overlay.style.left = '0';
      overlay.style.top = '0';
      overlay.style.opacity = '.0';

      document.body.appendChild(overlay);
      fade('overlay', 0, 75, 200);
   }
} 
```

这是我的工作淡入淡出功能：

```
function fade(eID, startOpacity, stopOpacity, duration)
{
   var speed = Math.round(duration / 100);
   var timer = 0;
   if (startOpacity < stopOpacity)
   {     // fade in
      for (var i=startOpacity; i<=stopOpacity; i++)
      {
         setTimeout("setOpacity('"+eID+"',"+i+")", timer * speed);
         timer++;
      } return;
   }
   for (var i=startOpacity; i>=stopOpacity; i--)
   {     // fade out
      setTimeout("setOpacity('"+eID+"',"+i+")", timer * speed);
      timer++;
   }
} 
```

还有我的工作 setOpacity：

```
function setOpacity(eID, opacityLevel)
{
   var eStyle = document.getElementById(eID).style;
   eStyle.opacity = opacityLevel / 100;
   eStyle.filter = 'alpha(opacity='+opacityLevel+')';
} 
```

但是，我想将我的 fade() 函数更改为使用以下形式的闭包：

```
setTimeout(function(){setOpacity(eID,i)}, timer * speed); 
```

然后我可以传入实际的覆盖 div，而不是 id 'overlay'。然而，当我这样做时，而不是动画覆盖 div 的逐渐淡入，它只是直接到最后一个不透明度值，没有过渡。为什么会这样？

我有一种感觉，这是我想念的简单的东西，因为我已经看了很长时间了。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:42:36.130

It's too late and still too hot to think much here right now. (2.30am, 28°C) Forgive me if my explanation falls short of expectations.

Basically, because you construct text strings to pass to setTimeout, each call gets the correct value for i. Since to pass an actual element, you can't use the string trick, you end up using the same value of i for each call to setOpacity.

As your question title indicates you understand, you need to use closures to get it to work right. I can't find(only followed 2 or 3 links) a good tute/S.O question that explains it in a way that seems relevant and clear.

Hope the code will be of use.

```
var overlay;
function dimScreen()
{
   if(!overlay)
   {
      overlay = document.createElement('div');
      overlay.setAttribute('id', 'overlay');
      overlay.style.width = '100%';
      overlay.style.height = '100%';
      overlay.style.zindex = '1000';
      overlay.style.background = '#000013';
      overlay.style.position = 'fixed';
      overlay.style.left = '0';
      overlay.style.top = '0';
      overlay.style.opacity = '.0';

      document.body.appendChild(overlay);
      myFade(overlay, 0, 75, 2000);
   }
}
function myFade(element, startOpacity, stopOpacity, duration)
{
   var speed = Math.round(duration / 100);
   var timer = 0;
   if (startOpacity < stopOpacity)
   {     // fade in
      for (var i=startOpacity; i<=stopOpacity; i++)
      {
        (
            function()
            {
                var myI = i;
                setTimeout(function(){mySetOpacity(element,myI)}, timer * speed);
            }
        )()
         timer++;
      }
   }

   else
   for (var i=startOpacity; i>=stopOpacity; i--)
   {     // fade out
      for (var i=startOpacity; i<=stopOpacity; i++)
      {
        (
            function()
            {
                var myI = i;
                setTimeout(function(){mySetOpacity(element,myI)}, timer * speed);
            }
        )()
         timer++;
      }
   }
}

function mySetOpacity(el, opacityLevel)
{
   var eStyle = el.style;
   eStyle.opacity = opacityLevel / 100;
   eStyle.filter = 'alpha(opacity='+opacityLevel+')';
} 
```

# python - 在 Python 中跨两个列表/数组查找最近的项目

> ID：15363419
> 
> 赞同：10
> 
> 时间：2013-03-12T14:05:27.767
> 
> 标签：python, numpy, scipy, pandas

我有两个 numpy 数组`x`并`y`包含浮点值。对于 中的每个值`x`，我想在 中找到最接近的元素`y`，而不重用 中的元素`y`。输出应该是从 x 到 y 的元素索引的 1-1 映射。这是一种依赖排序的坏方法。它从列表中删除每个配对的元素。如果不排序，这会很糟糕，因为配对将取决于原始输入数组的顺序。

```
def min_i(values):
    min_index, min_value = min(enumerate(values),
                               key=operator.itemgetter(1))
    return min_index, min_value

# unsorted elements
unsorted_x = randn(10)*10
unsorted_y = randn(10)*10

# sort lists
x = sort(unsorted_x)
y = sort(unsorted_y)

pairs = []
indx_to_search = range(len(y))

for x_indx, x_item in enumerate(x):
    if len(indx_to_search) == 0:
        print "ran out of items to match..."
        break
    # until match is found look for closest item
    possible_values = y[indx_to_search]
    nearest_indx, nearest_item = min_i(possible_values)
    orig_indx = indx_to_search[nearest_indx]
    # remove it
    indx_to_search.remove(orig_indx)
    pairs.append((x_indx, orig_indx))
print "paired items: "
for k,v in pairs:
    print x[k], " paired with ", y[v] 
```

我更喜欢不先对元素进行排序，但如果它们已排序，那么我想获取原始未排序列表中的索引`unsorted_x`，`unsorted_y`. 在 numpy/scipy/Python 或使用 pandas 中执行此操作的最佳方法是什么？谢谢。

**编辑**：澄清我不是试图找到所有元素的最佳拟合（例如，不是最小化距离的总和），而是每个元素的最佳拟合，如果有时以牺牲其他元素为代价也没关系。我假设它`y`通常比上面的例子要大得多`x`，所以通常对于`x`in的每个值都有很多非常好的拟合`y`，我只想有效地找到那个。

有人可以为此展示一个 scipy kdtrees 的例子吗？文档非常稀疏

```
kdtree = scipy.spatial.cKDTree([x,y])
kdtree.query([-3]*10) # ?? unsure about what query takes as arg 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T16:08:55.023

**编辑 2**`KDTree`如果您可以选择多个邻居来保证您的数组中的每个项目都有一个唯一的邻居，那么使用的解决方案可以执行得非常好。使用以下代码：

```
def nearest_neighbors_kd_tree(x, y, k) :
    x, y = map(np.asarray, (x, y))
    tree =scipy.spatial.cKDTree(y[:, None])    
    ordered_neighbors = tree.query(x[:, None], k)[1]
    nearest_neighbor = np.empty((len(x),), dtype=np.intp)
    nearest_neighbor.fill(-1)
    used_y = set()
    for j, neigh_j in enumerate(ordered_neighbors) :
        for k in neigh_j :
            if k not in used_y :
                nearest_neighbor[j] = k
                used_y.add(k)
                break
    return nearest_neighbor 
```

和一个`n=1000`点样本，我得到：

```
In [9]: np.any(nearest_neighbors_kd_tree(x, y, 12) == -1)
Out[9]: True

In [10]: np.any(nearest_neighbors_kd_tree(x, y, 13) == -1)
Out[10]: False 
```

所以最优值是`k=13`，然后时间是：

```
In [11]: %timeit nearest_neighbors_kd_tree(x, y, 13)
100 loops, best of 3: 9.26 ms per loop 
```

但在最坏的情况下，您可能需要`k=1000`, 然后：

```
In [12]: %timeit nearest_neighbors_kd_tree(x, y, 1000)
1 loops, best of 3: 424 ms per loop 
```

这比其他选项慢：

```
In [13]: %timeit nearest_neighbors(x, y)
10 loops, best of 3: 60 ms per loop

In [14]: %timeit nearest_neighbors_sorted(x, y)
10 loops, best of 3: 47.4 ms per loop 
```

* * *

**编辑**在搜索之前对数组进行排序可以获得超过 1000 个项目的数组：

```
def nearest_neighbors_sorted(x, y) :
    x, y = map(np.asarray, (x, y))
    y_idx = np.argsort(y)
    y = y[y_idx]
    nearest_neighbor = np.empty((len(x),), dtype=np.intp)
    for j, xj in enumerate(x) :
        idx = np.searchsorted(y, xj)
        if idx == len(y) or idx != 0 and y[idx] - xj > xj - y[idx-1] :
            idx -= 1
        nearest_neighbor[j] = y_idx[idx]
        y = np.delete(y, idx)
        y_idx = np.delete(y_idx, idx)
    return nearest_neighbor 
```

使用 10000 个元素的长数组：

```
In [2]: %timeit nearest_neighbors_sorted(x, y)
1 loops, best of 3: 557 ms per loop

In [3]: %timeit nearest_neighbors(x, y)
1 loops, best of 3: 1.53 s per loop 
```

对于较小的阵列，它的性能稍差。

* * *

如果只是为了丢弃重复项，您将不得不遍历所有项目以实现您的[贪婪最近邻算法。](http://en.wikipedia.org/wiki/Greedy_algorithm)考虑到这一点，这是我能想到的最快的：

```
def nearest_neighbors(x, y) :
    x, y = map(np.asarray, (x, y))
    y = y.copy()
    y_idx = np.arange(len(y))
    nearest_neighbor = np.empty((len(x),), dtype=np.intp)
    for j, xj in enumerate(x) :
        idx = np.argmin(np.abs(y - xj))
        nearest_neighbor[j] = y_idx[idx]
        y = np.delete(y, idx)
        y_idx = np.delete(y_idx, idx)

    return nearest_neighbor 
```

现在有了：

```
n = 1000
x = np.random.rand(n)
y = np.random.rand(2*n) 
```

我得到：

```
In [11]: %timeit nearest_neighbors(x, y)
10 loops, best of 3: 52.4 ms per loop 
```

# android - Android：将 make 与外部 java 库一起使用

> ID：15363422
> 
> 赞同：0
> 
> 时间：2013-03-12T14:05:36.483
> 
> 标签：android

我已经使用 Eclipse 将常用组件拆分为库。一切都很好。我在图书馆有资源/等。但是，我需要使用 make 而不是 Eclipse 来实现相同的功能。每次制作 APK 时，我都需要重新编译这些库。

完全是一个菜鸟问题，但我发现的一切都是为了让它在 Eclipse 中工作或创建一个 Jar 文件并将其插入到项目中。

谢谢 - 基思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:13:24.513

创建jar文件：

您可以使用`Export->Java->Runnable`Jar 创建一个包含其依赖项的 jar

检查本[教程](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)，还有这个类似的[问题](https://stackoverflow.com/questions/10871378/create-java-library-file)

# java - Java jvm 选项覆盖属性文件中的属性

> ID：15363424
> 
> 赞同：4
> 
> 时间：2013-03-12T14:05:38.780
> 
> 标签：java, properties, jvm, overriding

我正在使用带有spring的java。

我有具有属性文件的独立应用程序包含数据库连接 url。

由于某种原因，如果我想覆盖一个属性，我会看到一些我们可以通过传递属性来覆盖属性，并通过将其作为 jvm 选项传递它的值来覆盖它。

```
java -Dcom.abc.project.model.jdbc.ConnectionUrl=jdbc:jtds:sqlserver://abc-al01.abc.com/model_QA [executeablejar] myjavafile 
```

有人可以解释它是如何工作的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:29:41.973

因此，您想从属性文件中加载一些与 db 相关的数据，但您想实现一个用系统属性数据覆盖该数据的功能，为什么不能这样做呢？

```
Properties prop = new Properties();

try {
    prop.load(new FileInputStream("config.properties"));

    String connUrl = prop.getProperty("com.abc.project.model.jdbc.ConnectionUrl");
    String theOtherConnUrl = System.getProperty("com.abc.project.model.jdbc.ConnectionUrl");

    if(theOtherConnUrl!=null){
        connUrl = theOtherConnUrl;
           ... 
```

我相信覆盖行为将取决于您实现将从属性文件和系统属性中检索此数据的代码的方式，为什么不将所有与数据库相关的数据留在单个属性文件中（具有多个连接数据由不同的参数名称分隔，例如 jdbc.sqlserver.host 和 jdbc.oracle.host）并使用标志来标识您要使用的数据（您可以将此标志放在系统属性中，例如 -Dcom.abc。 project.model.jdbc.db=sqlserver)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-01T15:46:10.150

在 1 行中： String connUrl = System.getProperty("com.abc.project.model.jdbc.ConnectionUrl", prop.getProperty("com.abc.project.model.jdbc.ConnectionUrl"));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:36:48.550

这是一个基本示例

上下文.xml

```
<context:property-placeholder location="/test.properties" system-properties-mode="OVERRIDE"/> 
<bean class="Test">
    <property name="xxx" value="${xxx}" />
</bean> 
```

测试属性

```
xxx=1 
```

测试.java

```
public class Test {

    public void setXxx(String xxx) {
        System.out.println(xxx);
    }

    public static void main(String[] args) throws Exception {
        new ClassPathXmlApplicationContext("context.xml");
    }
} 
```

最初 Test 打印来自 test.properties - 的值`1`。但是，如果您使用 -Dxxx=2 运行测试，它会打印`2`. 那就是系统属性覆盖文件中的属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T06:19:19.220

看到这个..它解决了spring config本身的问题..无需更改代码

[Spring占位符格式](https://stackoverflow.com/questions/14567083/spring-placeholder-format)

# c# - 在不使用转换器的情况下将单选按钮绑定到它们的枚举值

> ID：15363426
> 
> 赞同：0
> 
> 时间：2013-03-12T14:05:41.837
> 
> 标签：c#, wpf, mvvm, radio-button

我在列表视图中有一个单选按钮组。此列表视图的行（其中包含单选按钮 grp 等）是一个可观察的集合。

我写的代码是这样的：

Xaml：

```
 <RadioButton Content="EnumValueName1"
             GroupName="RadButGrp1"
             IsChecked="{Binding propertyName,Mode=TwoWay,Converter={StaticResource EnumToBoolConverter},ConverterParameter=EnumValueName1}" >
 </RadioButton>
 <RadioButton Content="EnumValueName2" 
              GroupName="RadButGrp1"
              IsChecked="{Binding propertyName,Mode=TwoWay,Converter={StaticResource EnumToBoolConverter},ConverterParameter=EnumValueName2}">
 </RadioButton>
<RadioButton Content="EnumValueName3" 
              GroupName="RadButGrp1"
              IsChecked="{Binding propertyName,Mode=TwoWay,Converter={StaticResource EnumToBoolConverter},ConverterParameter=EnumValueName3}">
 </RadioButton> 
```

我正在尝试直接绑定到我的数据结构中名为 propertyName 的数据字段，该数据结构定义了包含这些值的表。对于这个视图，我的 ViewModel 类中没有这个字段。我这样做是为了避免跟踪我当前正在填充的集合的索引。（或者我想这么想！）

转换器：

```
 public class EnumBooleanConverter : IValueConverter
 {
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string parameterString = parameter as string;
        if (parameterString == null)
            return DependencyProperty.UnsetValue;

        if (value == null || Enum.IsDefined(value.GetType(), value) == false)
            return DependencyProperty.UnsetValue;

        object parameterValue = Enum.Parse(value.GetType(), parameterString);

        return parameterValue.Equals(value);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string parameterString = parameter as string;
        if (parameterString == null || value.Equals(false))
            return DependencyProperty.UnsetValue;

        return Enum.Parse(targetType, parameterString);
    }
 } 
```

问题是在 Enum.Parse 行的 ConvertBack 函数中，出现以下 Argument 异常：

> > 提供的类型必须是枚举。参数名称：枚举类型

有没有办法将枚举类型返回到绑定？如何告诉单选按钮它代表哪个枚举值？如何编写一个将适当的枚举值返回给绑定的函数？

希望各位大神帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:00:40.417

试试这个，这是我的版本`EnumToBoolConverter`：

```
public class EnumToBoolConverter : BaseConverterMarkupExtension<object, bool>
{
    public override bool Convert(object value, Type targetType, object parameter)
    {
        if (value == null)
            return false;

        return value.Equals(Enum.Parse(value.GetType(), (string)parameter, true));
    }

    public override object ConvertBack(bool value, Type targetType, object parameter)
    {
        return value.Equals(false) ? DependencyProperty.UnsetValue : parameter;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:36:24.037

好的，一旦我得到了正确的概念，解决方案就相对简单了。我做了以下部分解决了我的问题。

```
 <RadioButton Content="EnumValueName1" 
              GroupName="RadBtnGrp1"
              IsChecked="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ParentControl}},
                                  Path=DataContext.propName,
                                  Mode=TwoWay,
                                  Converter={StaticResource EnumToBoolConverter},ConverterParameter=EnumValueName1}">

 </RadioButton> 
```

我的 ConvertBack 函数中的 targetType 现在是正确的枚举类型。希望这可以帮助！

现在我必须弄清楚如何使单选按钮在列表视图的多行中保留选择。目前，他们在第一行中的选择会从其余行中取消选择同一组。

感谢您到目前为止的帮助。如果有人可以为我指出新问题的解决方案，那将是非常棒的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-05T08:34:49.897

建议您动态创建单选按钮，`ListBox`可以帮助我们做到这一点，无需转换器。此方法的**优点**如下：如果有一天您的枚举类发生更改，则无需更新 GUI（XAML 文件）。

该方法的步骤如下：
创建一个ListBox，并将列表框的ItemsSource设置为枚举，并将ListBox的SelectedItem绑定到selected属性。然后将创建每个 ListBoxItem 的单选按钮。

*   **第 1 步**：重新定义您的枚举。

```
public enum EnumValueNames
{ 
   EnumValueName1, 
   EnumValueName2, 
   EnumValueName3
} 
```

然后将以下属性添加到您的 DataContext（或 MVVM 的 ViewModel）中，该属性记录了选中的选定项目。

```
public EnumValueNames SelectedEnumValueName { get; set; } 
```

*   **第 2 步**：将枚举添加到 Window、UserControl 或 Grid 等的静态资源中。

```
 <Window.Resources>
        <ObjectDataProvider MethodName="GetValues"
                            ObjectType="{x:Type system:Enum}"
                            x:Key="EnumValueNames">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="local:EnumValueNames" />
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    </Window.Resources> 
```

*   **第 3 步**：使用列表框并将其中`Control Template`的每个项目填充为单选按钮

```
 <ListBox ItemsSource="{Binding Source={StaticResource EnumValueNames}}" SelectedItem="{Binding SelectedEnumValueName, Mode=TwoWay}" >
        <ListBox.Resources>
            <Style TargetType="{x:Type ListBoxItem}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <RadioButton
                                Content="{TemplateBinding ContentPresenter.Content}"
                                IsChecked="{Binding Path=IsSelected,
                                RelativeSource={RelativeSource TemplatedParent},
                                Mode=TwoWay}" />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ListBox.Resources>
    </ListBox> 
```

**参考资料：** [https ://www.codeproject.com/Articles/130137/Binding-TextBlock-ListBox-RadioButtons-to-Enums](https://www.codeproject.com/Articles/130137/Binding-TextBlock-ListBox-RadioButtons-to-Enums)

# visual-studio - 是否可以从 beforebuild/afterbuild 目标捕获控制台输出并显示为 Visual Studio 输出？

> ID：15363427
> 
> 赞同：0
> 
> 时间：2013-03-12T14:05:43.397
> 
> 标签：visual-studio, msbuild

通过 BeforeBuild 和 AfterBuild MSBuild 目标指定它们，我创建了作为 Visual Studio 构建的一部分运行的预处理器和构建后程序。他们将错误消息写入控制台和日志文件。

有什么方法可以让 Visual Studio 捕获此输出并将其显示在“输出”窗口中？

正在构建的项目是 C# 项目（.csproj），但我猜这与问题无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:43:18.497

如果您的程序打印到控制台，则消息应出现在输出窗口中。

# d3.js - 将 ag 元素的多个部分连接到 d3 中的相同数据

> ID：15363435
> 
> 赞同：2
> 
> 时间：2013-03-12T14:06:06.433
> 
> 标签：d3.js, transitions

我试图弄清楚如何在 ag 元素中转换绑定到相同数据的路径和文本。

[这个要点](http://bl.ocks.org/AndrewStaroscik/5139366)显示了我想要的行为。当您单击更改按钮时，路径和文本位置会平滑过渡。问题是我通过将路径和文本元素分别加入数据来实现这一点。 [我不是唯一一个以这种方式使用 join 的人](http://blog.stephenboak.com/2011/08/07/easy-as-a-pie.html)，但我认为它违反了使用 d3 维护元素和数据之间的一对一映射的目标。

有没有办法模仿

```
var path = svg.selectAll("path")
     .data(dataset);

path
    .enter().append("path")
    .attr("d", function(d) { return line(d.values) + "Z"; })
    .style("fill", function(d, i) { return color(i); });

path
    .transition().duration(500)
    .attr("d", function(d) { return line(d.values) + "Z"; });

path
    .exit().remove(); 
```

链接到ag元素中相同数据的元素的模式？

[这是我失败的尝试之一](http://bl.ocks.org/AndrewStaroscik/5139474)。更改按钮不会更新路径和文本，而是会导致添加新的 g 元素。

编辑时添加：更正 explunit 发现的错字后，失败的尝试现在有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:22:51.803

您在加入时的班级名称中有错字。这段代码：

```
var g = svg.selectAll(".shapes")
    .data(dataset); 
```

应该是这样的：

```
var g = svg.selectAll(".shape")
    .data(dataset); 
```

当我按上述方式更改它时，它对我来说很好。

# java - 休眠。优化 sqlRestriction

> ID：15363436
> 
> 赞同：1
> 
> 时间：2013-03-12T14:06:07.800
> 
> 标签：java, mysql, hibernate, query-optimization

如何在没有 sqlRestriction 的情况下优化以下内容：

```
public List<SomeEntity> getEntityByYearMonthAndDay(Calendar cal) {
        Criteria criteria = helper.createCriteria();
        criteria.add(sqlRestriction("(DATE(date_column) = ?)", cal.getTime(), org.hibernate.type.StandardBasicTypes.DATE));
        return criteria.list();
} 
```

SomeEntity 看起来像：

```
 @Entity
    @Table(name="some_table")
    public class SomeEntity extends Identifiable {

        @Column(name = "date_column")
        private Calendar dateColumn;

//Getters and setters 
    } 
```

在数据库中，我有这样的表示：date_column => datetime (YYYY-MM-DD HH:mm:ss)。

很明显，逻辑只比较日期截断时间值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:12:21.173

是的，伙计们 :) 所以如果你不想使用内置的 MySQL DATE(...) 函数而只使用 JPA：

```
public List<SomeEntity> getEntityByYearMonthAndDay(Calendar cal) {
    Criteria criteria = helper.createCriteria();
    Calendar leftBorder = Calendar.getInstance();
    leftBorder.setTime(cal.getTime());
    Calendar rightBorder = Calendar.getInstance();
    rightBorder.setTime(cal.getTime());
    rightBorder.add(Calendar.DATE, 1);
    Conjunction dateConjunction = Restrictions.conjunction();
    dateConjunction.add(Restrictions.eq("dateColumn", leftBorder));
    dateConjunction.add(Restrictions.lt("dateColumn", rightBorder));
    criteria.add(dateConjunction);
    return criteria.list();
} 
```

# selenium - Selenium IDE - 验证 Cookie 的内容

> ID：15363437
> 
> 赞同：1
> 
> 时间：2013-03-12T14:06:20.427
> 
> 标签：selenium

有谁知道我将如何验证 cookie 值是否包含 Selenium IDE 中的文本子字符串？

例如，如果我有一个名为“MyCookie”的 cookie，其内容为“这是我的值”，并且我想断言该 cookie 包含子字符串“值”，这可以使用 IDE 吗？

**更新**

解决方法如下

```
storeCookieByName | MyCookie | variable1

storeEval | storedVars['variable1'].indexOf('value') > 0 ? true: false|result;

verifyExpression | $(result) | true 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T11:40:22.397

在 selenium ide `storeCookieByName`(name, variableName) 函数中返回 cookie 的值，在此函数中，您仅在目标列中提供 cookie 名称并在值列中写入任何变量

```
 Command       |    Target   |  value
   storeCookieByName | mf_user     | test
      echo           | ${test} 
```

name - cookie 的名称。

storeCookieByName 函数 返回：cookie 的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:09:51.730

在 IDE 中，使用 storeCookieByName 函数提供 cookie 名称和您希望将 cookie 存储到其中的值的变量名称。

# php - 新手制作新窗口重定向确认加分

> ID：15363441
> 
> 赞同：-1
> 
> 时间：2013-03-12T14:06:29.863
> 
> 标签：php, javascript, html

```
<a href="index.php?module=voteforpoints&action=vote&sid=<?php echo $site->site_id; ?>" target="_blank">Get 1 Point</a> 
```

我拥有一个游戏服务器，我们通过投票获得排名。

这是一个脚本，只要玩家点击它，就会添加一个投票点。但大多数时候，玩家只是点击链接而不是“投票”，因为他们仍然在积累积分。

我的问题是，如何使该脚本重定向到新窗口，并且该新窗口将具有链接，当玩家单击它时，将添加投票点。

谢谢，我是 HTML 和 PHP 新手，但我擅长 CSS :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:02:27.957

根据我的理解，访问“index.php?module=voteforpoints&action=vote&sid=...”给出了一分

尝试创建一个新页面，比如 vote.php，包含实际的投票链接：`<a href="index.php?module=voteforpoints&action=vote&sid=<?php echo $site->site_id; ?>" >Get 1 Point</a>`- 没有“目标”

现在将旧链接替换为：`<a href="vote.php" target"_blank" >Get 1 Point</a>`

# iphone - 如何获取 UITable 视图可见路径和更多行

> ID：15363442
> 
> 赞同：0
> 
> 时间：2013-03-12T14:06:34.507
> 
> 标签：iphone, ios, uitableview

现在我正在获取可见 tableview 单元格的索引路径。但是我想从可见行中获取 3 个索引路径，我该怎么做？

```
NSArray *visiblePaths = [tblView indexPathsForVisibleRows]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:25:36.813

假设只有一个部分，您可以创建它们，注意该部分的最大行数：

```
NSMutableArray *visiblePaths = [tblView indexPathsForVisibleRows] mutableCopy];
NSInteger lastIndexPath = [visiblePaths lastObject];
NSInteger lastRow = lastIndexPath.row;
NSInteger extraRows = 3;
NSInteger maxRow = MIN(lastRow+extraRows, [self tableView:tblView numberOfRowsInSection:0] - 1);

for (int i = lastRow+1; i < maxRow; i++) {
    NSIndexPath *newPath = [NSIndexPath indexPathForRow:i inSection:0];
    [visiblePaths addObject:newPath];
} 
```

它也适用于更多部分（和/或第一个可见之前的行）。希望很清楚如何扩展它以涵盖这些要求。

# python - Python MongoDB：“光标”对象没有属性“名称”

> ID：15363444
> 
> 赞同：1
> 
> 时间：2013-03-12T14:06:37.547
> 
> 标签：python, django, mongodb

刚开始使用 mongo db 。

```
context = {}
if request.method == 'POST':
    context['name']  = request.POST['name']
    context['username']  = request.POST['username']
    context['mobile']  = request.POST['mobile']
    get = db.messages.find( { 'name' : request.POST['name'] } )
    if get is not None:
        print get.name 
```

我的数据库中有两条记录。

```
> db.messages.find()
{ "_id" : ObjectId("513f2cf1ae4cb53c1374b4f6"), "username" : "hello@gmail.com", "mobile" : "78978555", "name" : "rohit" }
{ "_id" : ObjectId("513f2cfeae4cb53c1374b4f7"), "username" : "hi@gmail.com", "mobile" : "8528522", "name" : "Rohti" } 
```

当我发布名为 rohit 的表格时。我收到上述错误。

请告诉我我在这里做错了什么。

我知道我在 mongo db 中查询错误。请帮助我回到正轨。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T14:09:44.913

get 作为 pymongo 中的游标返回。

尝试：

```
for record in get:
    print record['name'] 
```

此外，get 不是变量的好名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:10:15.803

您必须使用光标进行迭代：

```
for element in get:
    print(element.name) 
```

现在您正在访问游标，它只是元素的生成器，不直接包含名称。有关完整说明，请参见[此处](http://api.mongodb.org/python/2.0/tutorial.html%5d)。

# jquery - 多次引用同一事件时的 jQuery 处理器使用情况

> ID：15363446
> 
> 赞同：0
> 
> 时间：2013-03-12T14:06:42.997
> 
> 标签：jquery, performance

使用以下代码有什么好处：

```
$(window).scroll(function () {
  var scrollPos = parseInt( $(document).scrollTop() );
  $(".div1").css({"background-position-y":scrollPos});
  $(".div2").css({"background-position-y":scrollPos});
}); 
```

而不是将其拆分为两个函数，如下所示：

```
$(window).scroll(function () {
  var scrollPos = parseInt( $(document).scrollTop() );
  $(".div1").css({"background-position-y":scrollPos});
});

$(window).scroll(function () {
  var scrollPos = parseInt( $(document).scrollTop() );
  $(".div2").css({"background-position-y":scrollPos});
}); 
```

自然，第二个选项会略微增加处理器的使用率，因为它必须不止一次地为同一个变量计算新值。但是，假设一台相对现代的机器，选择第一个比第二个例子有什么优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:12:16.873

如果您没有从代码行中获得报酬，那么任何比这个更长的版本都只会增加维护成本：

```
$(window).scroll(function () {
  $(".div1,.div2").css({"background-position-y": $(document).scrollTop()});
}); 
```

并且速度较慢，但​​这与当今的浏览器速度无关。

以防万一您没有通知此更改，我还删除了`parseInt`as`scrollTop`返回一个整数。

# paypal-sandbox - 新的 PayPal 开发人员问题

> ID：15363447
> 
> 赞同：1
> 
> 时间：2013-03-12T14:06:43.910
> 
> 标签：paypal-sandbox

我们正在尝试在开发环境中测试 PayPal 功能，但最近几天它发生了变化，我们的“开发”登录不再有效。

看起来我们现在必须从实际注册的企业帐户中创建沙盒帐户。虽然这本身不是问题（很烦人，因为我们必须到处找人为我们设置它），但真正的问题是，如果没有先登录到 PayPal，就无法登录沙盒来下测试订单具有我们公司业务帐户的开发人员。

这是绝对不能接受的……作为开发人员，我们无权访问公司的业务帐户。

我们还尝试将用户添加到企业帐户（具有锁定权限），但它不允许我们使用它登录到开发人员。

有人可以澄清一下新流程以及我们如何进行 a) 设置沙盒帐户和 b) 通过 PayPal 的沙盒下达测试订单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:31:57.290

您必须创建一个实时 PayPal 帐户才能使用您的开发人员帐户登录。使用 PayPal 帐户登录后，您会看到一个选项，可以从“应用程序”选项卡中导入您以前的开发者帐户信息。如果与您合作的企业不想授予您登录权限，则您必须使用自己的真实账户进行测试。

导入沙盒帐户信息后，您应该可以登录任何测试帐户进行测试购买。

# javascript - OpenLayers JS - 如何区分用户和编程视图更改？

> ID：15363448
> 
> 赞同：1
> 
> 时间：2013-03-12T14:06:49.173
> 
> 标签：javascript, openlayers

我在 OpenLayers 地图上建立了一个“moveend”侦听器。我可以平移或缩放地图，听者按预期触发。我还需要在这个应用程序中以编程方式更改缩放和中心位置，但是，当我执行“moveend”监听器时。是否可以在 OpenLayers 中区分用户驱动的视图更改和程序化视图更改？

我正在使用 JavaScript OpenLayers 2.12 版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:39:27.800

我认为没有办法区分。但这是你可以做的。当您以编程方式缩放或更改中心位置时，您可以暂时取消注册 moveend 事件，然后再重新注册：

map.events.unregister("moveend", map, function); . . 以编程方式缩放。. map.events.register("moveend", map, function);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:29:33.053

此外，当以编程方式缩放或移动地图时，您可以将一些变量设置为 true。

在侦听器中，检查该变量。如果为真，则 map 以编程方式移动。检查后，将其设置回false。

# ruby-on-rails - Rails - Twitter Bootstrap i18n - 验证

> ID：15363452
> 
> 赞同：2
> 
> 时间：2013-03-12T14:07:01.430
> 
> 标签：ruby-on-rails, validation, twitter-bootstrap, internationalization

Twitter Bootstrap 中有哪些属性，我如何更改弹出的消息？

示例：表单验证，

而不是“请填写此字段”。我想要另一个翻译。这是否以某种方式连接到原始活动记录错误消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:26:45.417

显示的消息`Please fill out this field`是 HTML5 验证。[您可以使用http://www.html5rocks.com/en/tutorials/forms/html5forms/#toc-constraint-validation](http://www.html5rocks.com/en/tutorials/forms/html5forms/#toc-constraint-validation)自定义此消息`setCustomValidity()`

您还可以在消息中添加一些自定义文本，如[http://jsfiddle.net/kaleb/nfgfP/8/中所示](http://jsfiddle.net/kaleb/nfgfP/8/)

要在 JavaScript 中使用 I18n，您可以查看 i18n-js gem [https://github.com/fnando/i18n-js](https://github.com/fnando/i18n-js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T10:24:11.283

```
var elements = document.getElementsByTagName("INPUT");
for (var i = 0; i < elements.length; i++) {
    elements[i].oninvalid = function(e) {
        e.target.setCustomValidity("");
        e.target.checkValidity();
        e.target.setCustomValidity(__Msg(e.target.validationMessage));
    };
}

// translate messages
function __Msg(str){
    switch(str){
        case 'Please fill out this field.': return 'fill out plz.';break;
        case 'Please enter an email address.': return 'enter email plz.';break;

    }
    return str; // skip not translated messages
} 
```

# php - php上传/管理希腊文件名

> ID：15363453
> 
> 赞同：0
> 
> 时间：2013-03-12T14:07:07.710
> 
> 标签：php, file-upload, file-management, file-manager

我正在尝试在 Xammp 上使用 php 和 mySql 构建 Intranet 应用程序。我的主要目标是管理位于 Windows 服务器上的巨大文件目录/子目录。所有文件名都包含希腊语和混合希腊语/英语单词。似乎无论我使用哪个文件管理器（elFinder、eXtplorer 等）都有相同的问题。他们无法处理希腊文件名。这意味着在上传时，它们会使用“UTF8”编码对它们进行转写，从而在 Windows 上产生不可读的文件名。我知道 Windows 默认编码是“iso-8859-7”。所以，我的问题是，Xammp 上的 mySql 可以处理这个任务，或者我应该转移到例如 ASP.NET。

# jquery - 在Jquery中动态添加字段的总和

> ID：15363457
> 
> 赞同：0
> 
> 时间：2013-03-12T14:07:27.837
> 
> 标签：jquery, dynamic, sum

我想使用表格中的 jquery 添加一周中的小时总和，当文本字段更改 div total_amount 中的总计时，应该更新，但它似乎不起作用。

```
$(function() {
$("[id$=day]").change(function() {

var total = 0;
$('table input[id$=day]').each(function() {
    var sum_id = this.id;
    total[this.value] += parseInt($('#' + sum_id).val(), 10);
});

    $('div.total_amount').html(total);
});
}); 
```

html在这里

```
<td class="timesheet2"><input type="text" name="daymon" id="monday">
</td>

<td class="timesheet2"><input type="text" name="daytue" id="tuesday">
</td>

<td class="timesheet2"><input type="text" name="daywed" id="wednesday">
</td>

<td class="timesheet2"><input type="text" name="daythurs" id="thursday">
</td>

<td class="timesheet2"><input type="text" name="dayfri" id="friday">
</td>

<td class="timesheet2"><input type="text" name="daysat" id="saturday">
</td>

<td class="timesheet2"><input type="text" name="daysun" id="sunday">
</td>

<td class="timesheet"><div id="total_amount"></div>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:16:52.307

我认为这可能会更好。

```
var sum = 0;
    $('.timesheet2').each(function() {
        sum += Number($(this).val());
    });

    $('#total_amount').html(sum);
});​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:18:17.817

您在显示最终值时遇到问题。当您需要 ID 时，您正在使用类选择器。

[http://jsfiddle.net/YE5vF/2/](http://jsfiddle.net/YE5vF/2/)

**HTML**

```
<table>
<tr>
<td class="timesheet2"><input type="text" name="daymon" id="monday"></td>
<td class="timesheet2"><input type="text" name="daytue" id="tuesday"></td>
<td class="timesheet2"><input type="text" name="daywed" id="wednesday"></td>
<td class="timesheet2"><input type="text" name="daythurs" id="thursday"></td>
<td class="timesheet2"><input type="text" name="dayfri" id="friday"></td>
<td class="timesheet2"><input type="text" name="daysat" id="saturday"></td>
<td class="timesheet2"><input type="text" name="daysun" id="sunday"></td>
<td class="timesheet"><div id="total_amount"></div></td>
</tr>
</table> 
```

**JS**

```
$("[id$=day]").change(function() {
    var total = 0;     
    $('.timesheet2 input').each(function() {
        total = total + Number( $(this).val() );
    });
    $('div#total_amount').html(total); 
}); 
```

# ios - 如何在 splitterView 中为 rootview 控制器制作自定义标题栏

> ID：15363458
> 
> 赞同：0
> 
> 时间：2013-03-12T14:07:28.300
> 
> 标签：ios, xcode, ipad

我想在我的 splitterView 中为 iPad 应用程序自定义根视图控制器的标题栏。标题栏需要是透明的，并且具有自定义的字体和大小。

我自己尝试过，但找不到任何类似的方法，并且在一些谷歌链接上没有成功。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:50:42.287

检查下面的链接，它有帮助

[http://www.raywenderlich.com/2079/core-graphics-101-shadows-and-gloss](http://www.raywenderlich.com/2079/core-graphics-101-shadows-and-gloss)

# opencv - 使用 Opencv 将视频嵌入到另一个视频中

> ID：15363461
> 
> 赞同：0
> 
> 时间：2013-03-12T14:07:35.187
> 
> 标签：opencv, video-processing

我希望在主视频的窗口中播放另一个视频。这是它的尝试代码：

```
#include <cv.h>
#include <highgui.h>
#include <iostream>

using namespace std;

void OverlayImage(IplImage* src, IplImage* overlay, CvScalar S, CvScalar D) {

CvPoint location;
//location.x = (0.5*(src->width))-50;
//location.y = src->height-110;
//cout << location.x << " " << location.y << endl;

location.x = 100;
location.y = 100;

for (int i = location.y; i < (location.y + overlay->height); i++) {
    for (int j = location.x; j < (location.x + overlay->width); j++) {
        CvScalar source = cvGet2D(src, i, j);
        CvScalar over   = cvGet2D(overlay, i-location.y, j-location.x);
        CvScalar merged;

        for(int i = 0; i < 4; i++)
            merged.val[i] = (S.val[i] * source.val[i] + D.val[i] * over.val[i]);

        cvSet2D(src, i + location.y, j + location.x, merged);
    }
}
}

int main (int argc, char* argv[]) {
CvCapture* capture = NULL;
CvCapture* ad      = NULL;
capture = cvCaptureFromAVI("Cricketc11.avi");
ad      = cvCaptureFromAVI("Cricketc1.avi");
assert(ad);
assert(capture);
cvNamedWindow("Video", 0);

int fps          = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FPS );
int noOfFrames   = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FRAME_COUNT );
int height       = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FRAME_HEIGHT );
int width        = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FRAME_WIDTH );
cout << height << " " << width << endl;

int fpsad        = ( int )cvGetCaptureProperty( ad, CV_CAP_PROP_FPS );
int noOfFramesad = ( int )cvGetCaptureProperty( ad, CV_CAP_PROP_FRAME_COUNT );
int heightad     = ( int )cvGetCaptureProperty( ad, CV_CAP_PROP_FRAME_HEIGHT );
int widthad      = ( int )cvGetCaptureProperty( ad, CV_CAP_PROP_FRAME_WIDTH );

IplImage* tempimg = NULL;
IplImage* tempad  = NULL;

while(capture) {
    tempimg = cvQueryFrame(capture);
    assert(tempimg);
    if (ad) {
        tempad  = cvQueryFrame(ad);
        assert(tempad);
        IplImage* newimg = cvCreateImage(cvSize(100,100), IPL_DEPTH_8U, tempad->nChannels);
        cvResize(tempad, newimg, 1);
        OverlayImage(tempimg, newimg, cvScalar(0,0,0,0), cvScalar(1,1,1,1));
    }
    else
        cvReleaseCapture(&ad);
    cvWaitKey(1000/fps);
    cvShowImage("Video", tempimg);
}
cvReleaseCapture(&capture);
cvDestroyAllWindows();
return 0;
} 
```

仅当输入视频相同时，此代码才能正常运行。如果视频的长度或 fps 不同，则在嵌入视频完成后会出错。

如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:24:57.317

**发生什么了**

每次调用`cvQueryFrame(source)`源的内部帧计数器都会递增。这就是为什么你的第二部电影应该和主要电影一样长（以帧为单位）。

作为一种解决方法，我建议您使用帧数（长度 * fps）等于主电影的整数比率的广告电影，并使用临时图像缓冲区来保存您需要的数据。

一个理想的解决方案是首先将最短的（以帧为单位）电影插入到最长的大小，然后像你一样合并它们，但如果你不愿意使用最近邻或线性插值，时间上采样可能很难实现.

**如果广告视频较小**

您可以在多种解决方案中进行选择：

*   检测到您已到达终点并停止发送图像
*   检测到您已到达结尾并从头重新打开广告影片
*   使用临时图像始终将广告电影中的最后一个有效帧保存在内存中，如果没有新图像，则发送此图像
*   等等

# java - ComponentInfo GridLayout 错误仅在模拟器中

> ID：15363463
> 
> 赞同：0
> 
> 时间：2013-03-12T14:07:37.203
> 
> 标签：java, android, gridview, layout-inflater

我制作了一个 Android 应用程序，并在我测试过的**每台硬件设备上****运行**. 这从 2.1.x 到 4.2。但现在我想确保它在每个屏幕尺寸上看起来都不错，所以我在不同的模拟器中尝试了这个应用程序。

没有单一的模拟器配置可以运行这个应用程序，我不明白为什么。我总是收到这个错误

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{*class*}: android.view.InflateException: Binary XML file line #325: Error inflating class android.widget.GridLayout 
```

我认为大多数错误代码都不需要发布，但是有 5 行这样的

```
E/AndroidRuntime(425):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:724) 
```

我会理解一个只在模拟器中运行的应用程序（我曾经遇到过这个问题，直到我用“真实”设备进行 USB 调试），但一个只与真实设备相处的应用程序对我来说似乎有点奇怪。有人有想法吗？

**编辑**

很多人因为 RAM 问题而出现此错误，但我的应用程序使用不超过 5 MB

# google-api-dotnet-client - 如何签出旧版本的 google-api-dotnet-client

> ID：15363467
> 
> 赞同：0
> 
> 时间：2013-03-12T14:07:44.907
> 
> 标签：google-api-dotnet-client

[我刚刚从 url ( http://code.google.com/p/google-api-dotnet-client/](http://code.google.com/p/google-api-dotnet-client/) )下载了 google-api-dotnet-client 的最新副本，它显示版本 1.2.4819.34602 。

我正在使用从 URL [http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Drive_API](http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Drive_API)下载的 google Drive .net API 库。这个谷歌驱动库引用了版本为 1.2.4737.25316 的谷歌 API 库。当我尝试引用最新的 API 时，它会引发许多错误，例如

```
 Error > The type or namespace name 'ServiceRequest' could not be found 
 (are you missing a using directive or an assembly reference? 
```

我需要更改 GOOGLE DRIVE 引用的 google-api-dotnet-client 的源文件中的一些代码行。所以要做到这一点，我需要检查 google-api-dotnet-client 的旧版本，即版本 1.2.4737.25316 。我怎样才能做到这一点？

谢谢苏吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:31:01.643

我们对库进行了一些更改（仍在开发中，将在下周发布）。新代码不适用于您尝试下载的生成 API。

我对您的建议是克隆我们的存储库，然后将其更新为 API 的状态（1.2.4737）：hg update 20121220-1.2.4737-beta

然后，您将能够编译并进行所需的更改。

祝你好运

我只是好奇，你想做什么？库中是否缺少我们应该在下一个版本中添加的内容？

# java - gzuncompress 由 java.util.zip.InflaterInputStream 压缩的数据

> ID：15363468
> 
> 赞同：1
> 
> 时间：2013-03-12T14:07:46.317
> 
> 标签：java, php, compression

因此，我无法解压缩最初由 java.util.zip.InflaterInputStream 方法压缩的数字数组。

我知道我做错了，因为解压后的输出与此类似（但要长得多）：

```
string '�������?�����!�A��������������������' 
```

在阅读有关此事的[gzuncompress](http://www.php.net/manual/en/function.gzuncompress.php) PHP 文档时，我看到它说：

> “此函数解压缩压缩字符串。”

我完全误解了这个功能的使用？或者它可以用来解压缩不仅仅是一个字符串？我真的很感激这方面的一些帮助，因为在对这个主题进行了相当深入的搜索之后，我觉得我没有得到任何帮助。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:43:19.880

我认为你肯定是误解*了一些东西*：

`java.util.zip.InflaterInputStream`是一个类而不是一个方法，它是一个解压缩器而不是一个压缩器。[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/zip/InflaterInputStream.html)说：

> “*这个类实现了一个流过滤器，用于以**“deflate”压缩格式****解压缩**数据。* **“**

 **如果要`gzuncompress`在 PHP 端使用 using 解压，则需要`java.util.zip.GZIPOutputStream`在 Java 端使用 using 进行压缩。

* * *

如果你打算`java.util.zip.InflaterOutputStream`在 Java 端使用压缩，我认为你需要`zlib.inflate`在 PHP 端使用来解压它 - 见[http://php.net/manual/en/filters.compression.php](http://php.net/manual/en/filters.compression.php)**

# path - Paypal 直接付款路径错误

> ID：15363469
> 
> 赞同：0
> 
> 时间：2013-03-12T14:07:46.667
> 
> 标签：path, paypal

我正在使用 Paypal 的 Classic API 在我的网站上进行直接付款。

在 DoDirectPayment.php 上的 DirectPayment 示例的开头有这一行：

```
require_once('../PPBootStrap.php'); 
```

它给了我这个错误：

```
Fatal error: require(): Failed opening required 'PPAutoloader.php' (include_path='.:/Applications/MAMP/bin/php/php5.4.4/lib/php') in /Users/jasonburton/Sites/georgetown/wp-content/themes/georgetown/paypal_direct_payment/samples/PPBootStrap.php on line 12 
```

现在，该 PPAutoloader.php 调用是引导程序中的一个包含。这不仅仅发生在引导程序中，它发生在我尝试包含的所有文件中。路径不正确，我不知道该怎么办。我已经在终端呼应了我的路径，它只是给了我：

```
/Applications/MAMP/bin/php/php5.4.4/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin 
```

关于如何解决此问题的任何提示？我知道我在这里没有提供太多信息，但这就是我目前所拥有的全部信息。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:27:53.943

你运行 Composer 了吗？我们使用 Composer 进行依赖管理。

[https://getcomposer.org/](https://getcomposer.org/)

SDK自述文件中也有说明：[https ://github.com/paypal/merchant-sdk-php/blob/master/README.md](https://github.com/paypal/merchant-sdk-php/blob/master/README.md)

# java - 在类中创建类的对象

> ID：15363472
> 
> 赞同：2
> 
> 时间：2013-03-12T14:07:54.400
> 
> 标签：java, string, forms, oop, class

关于以下代码的快速问题：

```
public class Test {

    public final static Test t1 = new Test("test 1");
    public final static Test t2 = new Test("test 2");
    public final static Test t3 = new Test("test 3");

    private String s;

    private Test (string s1) {
        s = s1;
    }
} 
```

我对这段代码是否会创建自己的*无限实例*感到困惑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:10:03.043

不，VM 不会：`"create unlimited instances of itself."`

您的静态字段（`t1`和`t2`）`t3`将在级别上创建一次（每个）`Class`，而不是在`Instance`级别上。您的 3 个字段将在所有实例之间共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:10:04.510

**由于声明与声明中的****赋值**相结合，代码不会创建自身的无限实例，因为变量`t1`是静态**初始化**`t2`的（意味着在类被加载时初始化一次，而不是每个实例一次）。`t3`****`static`****

 ****您可能想了解究竟是做什么`static`的。

**有用的说明：**

另一方面，下面的示例在使用`static`变量时会导致它在创建实例时被初始化（因为**构造函数中的赋值**），因此会导致**StackOverflowError**：

```
public class Test {
   static Test t1;
   Test () {
      t1 = new Test();
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:10:46.257

静态成员不是创建对象的一部分。所以不会有无限的`Test`对象创造。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T14:12:05.517

你问它是因为静态（t1、t2 和 t3）声明给你的印象是每个实例都有自己的这些变量的副本。

实际上，这不会发生。静态变量不是按实例创建的。它们中只有一个实例存在于 JVM 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T14:13:30.203

如果它会是这样的

```
public class Test {
   // no static so these are created for each instance of A or each time constructor is called
   public final Test t1 = new Test("test 1");
   public final Test t2 = new Test("test 2");
   public final Test t3 = new Test("test 3");

   private String s;

   private Test (string s1){
      s = s1
   }

} 
```

然后它会创建无限的实例`t1`，`t2`并且`t3`是*实例级变量*。

但在您的情况下，它们是`static`在*类加载时*创建实例而不是每个实例，因此**没有无限实例**。****

# c# - 读取目录子文件夹中的所有文件

> ID：15363478
> 
> 赞同：3
> 
> 时间：2013-03-12T14:08:14.190
> 
> 标签：c#, directory, subdirectory

我有一个文件夹 - “C:\scripts”

在“脚本”中，我有几个子文件夹，例如 - “C:\scripts\subfolder1”“C:\scripts\subfolder2”等，其中包含`html`文件。

我正在尝试使用以下代码 -

```
 foreach (string file in Directory.EnumerateFiles(@"C:\scripts","*.html"))
        {
            string contents = File.ReadAllText(file);
        } 
```

`html`但是，由于文件位于子文件夹中，这不起作用。

如何访问子文件夹中的 html 文件，而无需手动放入每个子文件夹的路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:12:46.493

从 DirectoryInfo使用[这个重载](http://msdn.microsoft.com/en-us/library/dd413343.aspx)

```
var dir = new DirectoryInfo(@"c:\scripts");
foreach(var file in dir.EnumerateFiles("*.html",SearchOption.AllDirectories))
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:13:12.323

```
Directory.EnumerateFiles(@"C:\scripts","*.html",SearchOption.AllDirectories) 
```

对我来说似乎是正确的解决方案试试:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:13:31.687

也许这行得通？

```
foreach (string file in Directory.GetFiles("C:\\Scripts\\", "*.html", SearchOption.AllDirectories))
{
    string contents = File.ReadAllText(file);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T14:14:14.727

从[`SearchOption.AllDirectories`](http://msdn.microsoft.com/en-us/library/ms143448.aspx)

> 在搜索操作中包括当前目录及其所有子目录。此选项包括重新分析点，例如搜索中的已安装驱动器和符号链接。

试试这样；

```
var d = new DirectoryInfo(@"c:\scripts");
foreach(var fin d.EnumerateFiles("*.html", SearchOption.AllDirectories))
{

} 
```

# jquery - 多过滤器列表不组合 2 个对象

> ID：15363481
> 
> 赞同：1
> 
> 时间：2013-03-12T14:08:25.373
> 
> 标签：jquery, html

所以我正在尝试在 jquery 中创建一个过滤器功能。但我无法让它正常工作。所以这就是我想要做的

1.  我有一个 HTML 列表
2.  我有一个输入
3.  此输入实时过滤列表（在 keyup 上过滤列表）
4.  当按钮添加单击时，应保存当前过滤器
5.  这些保存的过滤器充当 OR 过滤器，因此它会过滤掉不在列表或输入中的所有内容

[为粉丝准备的小提琴](http://jsfiddle.net/S9NzU/2/)

HTML

```
<div id="filter">
    <div id="filters"></div>
    <input id="search" type="text" value="" /> <a id="addFilter">ADD</a>

</div>
<ul>
    <li class="log">Test 1</li>
    <li class="log">Test 2</li>
    <li class="log">Test 3</li>
    <li class="log">Bla 1</li>
    <li class="log">Blab 2</li>
    <li class="log">Siawq 3</li>
</ul> 
```

jQuery：

```
//case insencitive :contains()
$.expr[":"].contains = $.expr.createPseudo(function (arg) {
    return function (elem) {
        return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
    };
});

//OnClick of add button, add filter to list, clear field
$("#addFilter").click(function () {
    if($('input#search').val() != ""){
        //filters.push();
        $("#filters").append("<div>"+$('input#search').val()+"</div>");
        $('input#search').val("");
    }
});

//On Click of filter list item to remove filter
$("#filters").on('click',"div",function() {    
    $(this).remove();
    $("input#search").change();
});

//Filter event on change and keyup
$("input#search").change(function () {
    var filter = $(this).val();
    if (filter) {
        var matches = $("ul").find('li.log:Contains(' + filter + ')');

        var obj = $('#filters > div');
        var arr = $.makeArray(obj);
        for(var i = 0;i<arr.length;i++){
            var add = $("ul").find('li.log:Contains(' + arr[i].innerText + ')');
            matches = $.extend(matches,add);
        }
        $("li.log").not(matches).slideUp();
        matches.slideDown();
    } else {
        $("ul").find("li.log").slideDown();
    }
    return false;
})
    .keyup(function () {
    $(this).change();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:29:12.307

好吧，又一个小时的摆弄，我找到了答案。

[为粉丝准备的小提琴](http://jsfiddle.net/Burnacid/hHAbK/1/)

```
if (filter) {
        var matches = $("ul").find('li.log:Contains(' + filter + ')');

        var obj = $('#filters > div');
        var arr = $.makeArray(obj);
        for(var i = 0;i<arr.length;i++){
            var add = $("ul").find('li.log:Contains(' + arr[i].innerText + ')');
            matches = $.extend(matches,add);
        }
        $("li.log").not(matches).slideUp();
        matches.slideDown();
} 
```

应该：

```
if (filter || arr.length != 0) {
    if (filter) {
        var matches = $("ul").find('li.log:Contains(' + filter + ')');
    } else {
        var matches = $();
    }

    for (var i = 0; i < arr.length; i++) {
        matches = matches.add('ul li.log:Contains(' + arr[i].innerText + ')');
    }
    $("li.log").not(matches).slideUp();
    matches.slideDown();
} 
```

# javascript - JQuery，隐藏和切换 DIV，常见问题页面

> ID：15363485
> 
> 赞同：0
> 
> 时间：2013-03-12T14:08:31.897
> 
> 标签：javascript, jquery, html

我有一个从 XML 读取的 XSL 页面，它显示了一个问题和答案，如下所示：

```
<div class="faqs">
    <xsl:for-each select ="TSPRoot/FAQS/FAQ">
<div class="flip">
    <xsl:value-of select ="Question"/>
</div>
<div class="panel">
    <xsl:value-of  select ="Answer" disable-output-escaping ="yes"/>
</div>
    </xsl:for-each >
</div> 
```

我有这个 Jquery：

```
<script>
  $(document).ready(function(){
      $(".flip").click(function(){
          $(".panel").hide("fast");
          $(this).next().slideToggle("slow");
      });
  });
</script> 
```

要求的是，当我单击任何问题时，其他答案会很好地隐藏，并且只会出现单击问题的答案，这一切都很好......我的问题是问题保持可点击状态，当您单击它时会调用再次使用该功能，它会重复隐藏和显示

除非您单击另一个问题，否则我需要使其不可点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:11:32.283

从此更改切换

```
$(this).next().slideToggle("slow"); 
```

到

```
 $(document).ready(function(){

      $(".flip").click(function(){
          $('.selected').removeClass('selected');
          $(this).next().slideDown(5000).addClass('selected');
          $(".panel").not('.selected').hide("fast");         
       });
   }); 
```

# javascript - 使用 RegEx 和 .replace 将文本替换为用户输入？

> ID：15363486
> 
> 赞同：1
> 
> 时间：2013-03-12T14:08:32.420
> 
> 标签：javascript, jquery, regex, replace, jsfiddle

我是 jQuery 新手，偶然发现了 RegEx 的概念，使用 .replace 进行漂亮的文本替换。

在我的表单中，我有一些复选框可以触发文本出现在文本区域中。还有一些用户输入区域作为字段。

如何使用此 jQuery 将*某些*复选框中的部分文本替换为用户输入，而不是其他部分？我认为使用 if/else 参数来触发 RegEx 并替换是关键，但我不知道如何合并其余部分？

这是我的表格的模型：

> ```
> <div style="width: 500px;"><br>
> Static options:<br>
> <label id="_comLine100"><input id="comLine100" name="comLines" type="checkbox"> OPTION1 </label> <br>
> <label id="_comLine101"><input id="comLine101" name="comLines" type="checkbox"> OPTION2 </label> <br>
> Options which can be modified by user text:<br>
> <label id="_comLine102"><input id="comLine102" name="comLines" type="checkbox"> OPTION3 </label> <br>
> <label id="_comLine103"><input id="comLine103" name="comLines" type="checkbox"> OPTION4</label>  <br>
> </div>
> <br>
> <input id="usrinput1" size="50" placeholder="Enter something to replace the word Text">
> <br><br>
> <form>
> <input onclick="javascript:this.form.outPut2.focus();this.form.outPut2.select();" 
> ```
> 
> value="全选" type="按钮">

**编辑**这是我的新脚本，基于以下建议：

```
 $(document).ready(function(){
var comLines = {
comLine100: 'Text for option1 \n',
comLine101: 'Text for option2 \n',
comLine102: 'Text for option3 \n',
comLine103: 'Text for option4 \n'
};

var mytextbox = document.getElementById('outPut2');
var chosenComm = null;

var Inputs = document.getElementsByName("comLines");
for (var i = 0; i < Inputs.length; i++) {
    Inputs[i].onchange = function() {
        chosenComm = this;
        printComment();        
    };
    }

function printComment(){
    if(chosenComm !== null){
        var chxbox=chosenComm.id;
        var uinput = document.getElementById('usrinput1');
            if(uinput.value!=="" && (chxbox=="comLine102" || chxbox=="comLine103")){
                mytextbox.value += comLines[chosenComm.id].replace(/Text/, $('#usrinput1').val()) + "\n";
                // resets the radio box values after output is displayed
                chosenComm.checked = false;
                // resets these variables to the null state
                chosenComm = null;
            }
            else {
                mytextbox.value += comLines[chosenComm.id] + "\n";
                // resets the radio box values after output is displayed
                chosenComm.checked = false;
                // resets these variables to the null state
                chosenComm = null;
            }
    }
}

}); 
```

请参阅我的 JSfiddle：http: [//jsfiddle.net/bENAY/2/](http://jsfiddle.net/bENAY/2/)

现在按我的意愿工作。感谢 Eric S 的解释和指导！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:39:44.473

简单的答案是替换：

```
mytextbox.value += comLines[chosenComm.id] + "\n"; 
```

和

```
mytextbox.value += comLines[chosenComm.id].replace(/Text/, $('#usrinput1').val()) + "\n"; 
```

该`replace`调用在斜杠中查找正则表达式，并将匹配项替换为逗号后面的值。

`$('#usrinput1').val()`正在使用 jQuery 查找 ID 为的 dom 元素，`usrinput1`然后获取它的值（因为它是输入，所以它会获取用户输入的任何内容）。

* * *

更完整的答案会提到你可能应该更多地接受 jQuery：

*   `window.onload`用通话代替`$(document).ready(function(){...})`通话。
*   考虑`document.getElementById`用`$('#outPut2')`
*   考虑将所有这些项目替换为`document.getElementsByName`或`$(input[name=commLines])`添加一个类`comm-lines`并使用`$(.comm-lines)`
*   考虑使用 jQuery 的`on`函数为内联按钮处理程序（使用传入函数`on`调用）和 Inputs[i].onchange 调用绑定事件处理程序。

抱歉，如果这听起来过于主观，只是想提出一个更标准且不易出错的解决方案。

仍然需要一些调整，但大致如下：

```
$('.comm-lines').on('change', printComment); 
```

* * *

此外，我确信这只是您尝试完成的一个简化示例，但您可能会考虑使用链接或按钮而不是复选框。您对复选框的使用并没有真正遵循用户在网络上使用复选框时所获得的预期体验。链接更接近大多数用户所知道的体验，因此给他们带来的惊喜更少。（更少的惊喜意味着更快乐的用户，更少的学习和更多的使用。）

# c# - XNA 2D 相机不保持精灵居中

> ID：15363488
> 
> 赞同：0
> 
> 时间：2013-03-12T14:08:35.487
> 
> 标签：c#, xna, 2d, xna-4.0

我一直在开发一种宇宙飞船游戏，在这个游戏中，你乘坐着陆器并从地面起飞，然后尽可能高地飞行，直到坠毁。我遇到的问题是我尝试实现的相机没有将着陆器保持在中心，着陆器最终变得比相机更快并离开屏幕。我不明白为什么，我已经尽一切努力让它发挥作用。我创建了一个测试用例，其中我在一个简单的程序中使用了相机，其中一个精灵在四个方向上移动。那个工作正常，但是当我在我的主游戏中实现相机时，它不能正常工作。任何帮助，将不胜感激。

这是相机类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;

namespace WindowsGame4.Main
{
  class Camera
  {
    public Matrix transform;
    Viewport view;
    Vector2 centre;

    public Camera(Viewport newView)
    {
        view = newView;
    }

    public void Update(GameTime gameTime, Game1 lander, Lander _lander)
    {
        centre = new Vector2(_lander.Position.X + (lander.lander.Width / 2) - 455, _lander.Position.Y + (lander.lander.Height/2)-910);
        transform = Matrix.CreateTranslation(new Vector3(-centre.X - _lander.Velocity.X, -centre.Y - _lander.Velocity.Y, 0));
    }
    }
    } 
```

这是Game1中的主要更新方法：

```
 // Creates the handler to allow the use of the keyboard inputs
            KeyboardState keyboard = Keyboard.GetState(); 
            // Sets up the launch position to allow for scoring and height determining
            startPos = 700f;                
            // Mainly for debug, allows for leaving the game whenever desired
            if (keyboard.IsKeyDown(Keys.Escape))
            {
                Exit();
            }

       // The logic for the thruster, checks for if the space key is down and if 
       // the lander has any fuel remaining.  If there is no fuel the thrusters
       // will not work.
        if (keyboard.IsKeyDown(Keys.Space) && !empty)
        {
            _lander.Accelerate(_thruster.GetAcceleration(), gameTime.ElapsedGameTime);               
            // Turns on the thruster
            _thruster.Active = true; 
            // Tells the program that the lander has taken off, allowing the gravity to kick in
            landed = false;
            // Keeps track of the amount of fuel you have
            if (_lander.Fuel > 0)
            {
                // Subtracts 1 from the fuel for every second that the 'SPACE' key is down
                _lander.Fuel--;
            }
            else if (_lander.Fuel <= 0)
            {
                empty = true;
                endPos = _lander.Position.Y;
            }
        }
        if (keyboard.IsKeyUp(Keys.Space) || empty)
        {
            // Turns off the thruster as long as the player is not pressing 'SPACE'
            _thruster.Active = false; 
        }

        // This is the logic structure for the landing portion of the game, it sets up a 
        // level area in which the player can land on, which in turn then checks the Position.X value
        // to see how many points to give based on their close proximity to the landing site.  
        // ** Could possibly add depth or different levels based on location, like landing on a mountain
        // ** Or landing in the bottom of a crater
        if (_lander.Position.Y >= 800)
        {
            landed = true;
            // If you have died or Failed a mission 3 times then the game is over
            if (_lander.Lives == 1)
            {
                currentGameState = GameState.GameOver;                    
            }
            // As long as you have a life left the game will continue
            // This logic also is only applied if the player has landed on the ground
            // ** Add a rotational fixer as to make the lander stand straight up as opposed to the way its oriented
            // ** Upon landing
            else if (_lander.Lives > 0)
            {                   
                    // Sets the landers position to the current position that its landed at, thus stopping the gravity
                    // Resets the velocity, thus making sure it doesnt continue to fall
                    _lander.Position = new Vector2(_lander.Position.X, _lander.Position.Y);
                    _lander.Velocity = new Vector2();

                    // Sets up the first landing site, this particular one is the highset value landing site is almost right 
                    // On top of the flag that is placed to indicate where to land.
                    // *** Will Not Use In Final Version, Will Substitue With Logic For Height And Cash Gained ***
                    if ((_lander.Position.X >= 600 && _lander.Position.X <= 650) || (_lander.Position.X <= 600 && _lander.Position.X >= 550))
                    {   
                        // *** Will be implemented to display a "YOU HAVE FAILED THE MISSION" screen. ***
                        failure = false;
                        // This is for debugging purposes only, will change to be automatic once all functions are complete
                        if (keyboard.IsKeyDown(Keys.Enter))
                        {
                            // (1) -- Resets the position of the lander back to its original position and Velocity
                            // (2) -- Add 150 points to the score based on the location that the lander set down at
                            // (3) -- Continues on to the next level

                            _lander.Position = new Vector2(graphics.PreferredBackBufferWidth / 2, 100); // (1)
                            _lander.Velocity = new Vector2(); // (1)
                            _lander.Score += 150; // (2)
                            currentGameState = GameState.Level2; // (3) 
                        }
                    }
                    // Sets up the second landing site, this particular one is the second highest value landing site that is 
                    // A large circle surrounding the landing site above
                    else if ((_lander.Position.X >= 651 && _lander.Position.X <= 750 ) || (_lander.Position.X <= 549 && _lander.Position.X >= 450))
                    {
                        // *** Will be implemented to display a "YOU HAVE FAILED THE MISSION" screen. ***
                        failure = false;
                        // This is for debugging purposes only, will change to be automatic once all functions are complete
                        if (keyboard.IsKeyDown(Keys.Enter))
                        {
                            // (1) -- Resets the position of the lander back to its original position and Velocity
                            // (2) -- Add 50 points to the score based on the location that the lander set down at
                            // (3) -- Continues on to the next level

                            _lander.Position = new Vector2(graphics.PreferredBackBufferWidth / 2, 100); // (1)
                            _lander.Velocity = new Vector2(); // (1)
                            _lander.Score += 50; // (2)
                            currentGameState = GameState.Level2; // (3)
                        }                            
                    }
                    // Sets up the final landing site, this particular one is the failing portion of the map that is 
                    // A large area that encompasses the rest of the map.
                    else if ((_lander.Position.X >= 751 && _lander.Position.X <= 850) || (_lander.Position.X <= 449 && _lander.Position.X >= 0))
                    {
                        // You get no points so it does not only need to done once, it can be done as many times as needed
                        // And it will not change the data
                        _lander.Score = 0;
                        // *** Will be implemented to display a "YOU HAVE FAILED THE MISSION" screen. ***
                        failure = true;
                        // This is for debugging purposes only, will change to be automatic once all functions are complete
                        if (keyboard.IsKeyDown(Keys.Enter))
                        {
                            // (1) -- Resets the position of the lander back to its original position and Velocity
                            // (2) -- Takes away one of your lives as a result of the players failure to land correctly

                            _lander.Position = new Vector2(graphics.PreferredBackBufferWidth / 2, 100); // (1)
                            _lander.Velocity = new Vector2(); // (1)
                            _lander.Lives--; // (2)
                        }                              

                    }
                    // This is just a loop that gives a visual representation of refueling before the next level begins.
                    for (double i = _lander.Fuel; i < 500; i++)
                    {
                        _lander.Fuel += .05;                            
                    }
                }
            }
        // A very simple call to the Gravity and Lander classes that simulates gravity as long as the 
        // lander has not landed            
        else if (!landed)
        {
           _lander.Accelerate(_gravity.GetAcceleration(), gameTime.ElapsedGameTime);               
        }

        // Moves the lander according to gravity calculated by the lander class
        _lander.DoMovement(gameTime.ElapsedGameTime);

        // Calculates the height achieved based off of starting height and ending height
        height = startPos - endPos;
        // This will rotate the lander when the keys are pressed down
        // They will also check to make sure if it is landed or not
        // If it's landed then it will not allow the lander to rotate.
        if (keyboard.IsKeyDown(Keys.Left) && landed == false)
        {
            // (1) -- This will also change the angle of rotation for the thruster as to all for movement in 
            // That specific direction. 
            // Example: if you rotate to the left and turn on the thrusters you will starting moving
            // to the left

            rotation -= 0.1f;
            _lander.Rotation = rotation;
            _thruster.Rotation = rotation; // (1)
        }
        if (keyboard.IsKeyDown(Keys.Right) && landed == false)
        {
            // (1) -- This will also change the angle of rotation for the thruster as to all for movement in that specific direction.
            // (2) -- This will also change the angle of rotation for the lander as to all for movement in that specific direction.
            // Example: if you rotate to the right and turn on the thrusters you will starting moving
            // to the right

            rotation += 0.1f;
            _lander.Rotation = rotation; // (2)
            _thruster.Rotation = rotation;   // (1)
        }

        // Calls the camera class to allow the screen to move with the player
        camera.Update(gameTime, this, _lander); 
```

如果你们需要更多代码，我可以上传你们需要的任何其他内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T12:30:18.803

我不同意@Sarkilas，我认为使用转换会简化你的代码，不需要每次都指定相机。

您可以将此代码用作位置、原点、缩放和旋转的基础。

```
return Matrix.CreateTranslation(new Vector3(-Position, 0.0f)) *
       Matrix.CreateTranslation(new Vector3(-Origin, 0.0f)) *
       Matrix.CreateRotationZ(Rotation) *
       Matrix.CreateScale(Zoom, Zoom, 1) *
       Matrix.CreateTranslation(new Vector3(Origin, 0.0f)); 
```

问题是着陆器不是你的原点，它应该是你的位置，而原点应该是你的视口大小的一半，就像这样

```
Position = lander.Position;
Origin = new Vector2(view.Width / 2, view.Height / 2); 
```

如果看起来有点偏离，您可能必须将着陆器位置的一半添加回原点或位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T12:21:24.387

为什么需要为 2D 相机使用平移？对于可以简单得多的事情来说，这是一种非常复杂的方式。我认为 2D 相机应该只是对应于相机视口左上角的矢量。然后只需从任何精灵位置减去相机矢量，它将与相机一起移动。

因此，在您的情况下，只需将相机矢量设置为中心点减去屏幕宽度和高度的一半：

```
Camera = SpriteCenter - new Vector2(GraphicsDevice.Viewport.Width / 2, GraphicsDevice.Viewport.Height / 2); 
```

对于每个绘图调用，从精灵的实际位置中减去相机向量。就这样，你的精灵将永远居中。

如果您正在做一些不允许它起作用的特殊事情，那么我无法理解您的实际问题。我希望这有帮助。

# hadoop - 级联 HBase Tap

> ID：15363490
> 
> 赞同：4
> 
> 时间：2013-03-12T14:08:39.533
> 
> 标签：hadoop, hbase, cascading, scalding

我正在尝试编写必须连接到 HBase 的[烫伤](https://github.com/twitter/scalding)作业，但我在使用 HBase 水龙头时遇到了麻烦。我已经尝试使用[Twitter Maple](https://github.com/Cascading/maple)提供的水龙头，遵循[这个示例项目](https://github.com/kianwilcox/hbase-scalding)，但我使用的 Hadoop/HBase 版本与 Twitter 用作客户端的版本之间似乎存在一些不兼容。

我的集群使用 HBase 0.92 和 Hadoop 2.0.0-cdh4.1.3运行[Cloudera CDH4。](https://ccp.cloudera.com/display/CDH4DOC/CDH4+Documentation)每当我启动连接到 HBase 的 Scalding 作业时，都会出现异常

```
java.lang.NoSuchMethodError: org.apache.hadoop.net.NetUtils.getInputStream(Ljava/net/Socket;)Ljava/io/InputStream;
    at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.setupIOstreams(HBaseClient.java:363)
    at org.apache.hadoop.hbase.ipc.HBaseClient.getConnection(HBaseClient.java:1046)
... 
```

Twitter Maple 使用的 HBase 客户端似乎期望`NetUtils`在我的集群上部署的 Hadoop 版本上不存在某些方法。

> 我如何追踪到底是什么不匹配——HBase 客户端期望什么版本等等？一般来说，有没有办法缓解这些问题？

在我看来，客户端库通常是用硬编码版本的 Hadoop 依赖项编译的，很难使它们与部署的实际版本相匹配。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T00:46:42.057

该方法确实存在，但已更改其签名。基本上，它归结为在您的客户端和服务器上拥有不同版本的 Hadoop 库。如果您的服务器运行 Cloudera，您应该使用 Cloudera 的 HBase 和 Hadoop 库。如果您使用的是 Maven，则可以使用[Cloudera 的 Maven 存储库](http://www.cloudera.com/content/cloudera/en/documentation/cdh4/latest/CDH-Version-and-Packaging-Information/cdhvd_topic_8.html)。

似乎库依赖项是在 Build.scala 中处理的。我还没有使用过 Scala，所以我不完全确定如何在那里修复它。

破坏兼容性的更改是作为[HADOOP-8350](https://issues.apache.org/jira/browse/HADOOP-8350)的一部分提交的。看看 Ted Yu 的评论和回复。他在 HBase 上工作并且遇到了同样的问题。根据他的评论，更高版本的 HBase 库应该会自动处理这个问题。

# php - 如何使用 Javascript 或 PHP 将 Web 表单导出为 PDF

> ID：15363498
> 
> 赞同：0
> 
> 时间：2013-03-12T14:09:09.040
> 
> 标签：php, javascript, jquery, forms, pdf

如果我错过了一个类似的问题，我真的很抱歉 - 我已经做了我认为在这个主题上进行了相当多的挖掘并且空手而归。

是否可以（或实际）执行以下操作之一：

**1)**使用 Web 表单中的数据填充 PDF 中的字段？

或**2)**只需上传 PDF 并允许用户在线完成并提交？

除了最实用的解决方案之外，我不一定在两者之间有偏好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:11:43.440

mPDF 是一个 PHP 类，它从 UTF-8 编码的 HTML 生成 PDF 文件。它基于 FPDF 和 HTML2FPDF，具有许多增强功能。

看看[MPDF1](http://www.mpdf1.com/mpdf/)

# c# - 使用带有时间戳的新创建文件夹

> ID：15363504
> 
> 赞同：0
> 
> 时间：2013-03-12T14:09:20.633
> 
> 标签：c#

我是 c# 的新手，我创建了一个函数，每次运行控制台时都会创建一个带有时间戳的新文件夹。

```
string newfolder = @"d:\Denby_Screenshots" + DateTime.Now.ToString(" yyyy-MM-dd-HH-mm-ss-fff");
        if (!Directory.Exists(newfolder))
        {
            Directory.CreateDirectory(newfolder);
            Console.WriteLine("Screenshot folder has been created");
        } 
```

然后，我希望将其关闭以允许将屏幕截图保存到这个新创建的文件中。

```
static private Test_Criteria Block_Two(IWebDriver driver, Screenshot screenshot, string newfolder)
    {
        {
        screenshot = ((ITakesScreenshot)driver).GetScreenshot();
      screenshot.SaveAsFile("d:\\ScreenShot.png",System.Drawing.Imaging.ImageFormat.Png); 
```

但是对于我的生活，我不确定如何做到这一点，任何人都可以提供建议或有任何好的屏幕截图供我使用。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:20:48.397

Like so:

```
screenshot.SaveAsFile(Path.Combine(newFolder,"screenshot.png", ImageFormat.Png); 
```

And reconsider your folder structure, it would be extremely annoying to have a zillion folders in your root folder with just one file in each.

A better approach would be

```
newFolder = Path.Combine(Environment.SpecialFolder.MyPictures, "Screenshots",DateTime.Now.ToString("yyyyMMdd")); 
```

And the target file name:

```
Path.Combine(newFolder, "Screenshot "+DateTime.Now.ToString("HH-mm-ss-fff")+".png"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:13:48.650

如果您在一个控制台上下文中执行这两个步骤。然后简单地将新创建的文件夹名称返回给调用函数。并使用该文件夹名称（作为字符串）将文件保存到其中。

像这样的东西：

`SaveAsFile(Path.Combine(returnedFolderName, suggestedFileName).....`

# c++ - 使用指针嵌套 std::map

> ID：15363505
> 
> 赞同：2
> 
> 时间：2013-03-12T14:09:21.087
> 
> 标签：c++, stl, stdmap

我在地图中使用地图，并希望访问第二个地图中的特定成员。

```
std::map<int, std::map<DWORD,IDLL::CClass*>*> MyMap 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:13:10.673

尝试

```
auto outerIt = MyMap.find(someInt);
if(outerIt != MyMap.end()) {
  auto innerIt = (*outerIt)->find(someDWord);
  if(innerIt != (*outerIt)->end()) {
    auto yourElement = *innerIt;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:06:11.753

您可以`std::map::find`分两步使用：首先在外部映射中找到与键关联的值，然后对内部映射重复。

以下可编译代码似乎适用于 VS2010 SP1 (VC10)：

```
#include <iostream>
#include <map>

typedef unsigned int DWORD;    

namespace IDLL 
{

struct CClass
{
    CClass() : n(0) {}
    explicit CClass(int nn) : n(nn) {}

    int n;
};

} // namespace IDLL

int main()
{
    //
    // Prepare maps for testing
    //

    std::map<int, std::map<DWORD,IDLL::CClass*>*> MyMap;

    IDLL::CClass c1(10);
    IDLL::CClass c2(20);

    std::map<DWORD, IDLL::CClass*> m1;
    m1[10] = &c1;
    m1[20] = &c2;

    MyMap[30] = &m1;

    //
    // Testing code for maps access
    //

    const int keyOuter = 30;
    auto itOuter = MyMap.find(keyOuter);
    if (itOuter != MyMap.end())
    {
        // Key present in outer map.
        // Repeat find in inner map.

        auto innerMapPtr = itOuter->second;
        const DWORD keyInner = 20;
        auto itInner = innerMapPtr->find(keyInner);
        if (itInner !=  innerMapPtr->end())
        {
            IDLL::CClass * classPtr = itInner->second;

            std::cout << classPtr->n << '\n';
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:17:07.287

如果您确定密钥存在，您也可以尝试：

```
IDLL::CClass* x = (*MyMap[key1])[key2]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T14:33:15.697

如果您不确定密钥是否存在：

```
std::map<DWORD,IDLL::CClass*>* inner = MyMap[key1];
IDLL::CClass* x = 0;
if(inner)
  x = (*inner)[key2];
if(x)
  std::cout << "Winner! " << *x << "\n";
else
  std::cout << "Loser.\n"; 
```

# javascript - 您如何找到主干提取产生的错误

> ID：15363509
> 
> 赞同：5
> 
> 时间：2013-03-12T14:09:29.387
> 
> 标签：javascript, rest, backbone.js

我是骨干新手，但我已经编写了一个基本模型，并且在尝试为我的模型获取数据时。我知道服务器正在返回数据，但 fetch 正在调用错误回调。

很好，但我不知道如何找到正在生成的错误。

以下是相关代码：

```
 mUser = Backbone.Model.extend({
    urlRoot: CURRENT_URL+'user',
    defaults: {
        name: '',
        age: 22,
        email: ''
    },
    initialize: function(){

    }
  });

  user = new mUser({'id':1});

  var x = user.fetch({
    error:   function(model, xhr, options){
       alert('Error on fetch')
       console.log(xhr.responseText);
    },
    success: function(model, response, options) {
        alert(user.toJSON());
    }
  })
  console.log('x email',x.email) 
```

正如我所提到的，responseText 确实有我希望从服务器看到的数据，即：

{'id':'1','name':'joe','age':'25','email':'joe@example.com'}

也许我应该提一下，我正在将其作为 PhoneGap android 应用程序的一部分。我认为这对我遇到的问题并不重要，但它确实限制了我的调试选项。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T20:47:21.613

`parsererror`当 jQuery 尝试解析来自服务器的 JSON 响应时，您可能会遇到这种情况。要检查您是否收到 a `parsererror`，请添加`complete`回调并检查`textStatus`参数。例如

```
user.fetch({
  complete: function(xhr, textStatus) {
    console.log(textStatus);
  }
}); 
```

# javascript - mailto div 内容展望

> ID：15363513
> 
> 赞同：0
> 
> 时间：2013-03-12T14:09:32.357
> 
> 标签：javascript, outlook, mailto

```
$("#mail").click(function() {
location.href = "mailto:?subject=test&body="+$("#mailbody").html();
}); 
```

我正在尝试将邮件正文添加到#mailbody div 的内容（5 个表）中。但 Outlook 将其作为文本获取。喜欢`<table><tr>..`

是关于 Outlook 设置还是我不能用 javascript 做这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:13:25.953

不，你不能。

这是定义 mailto URL 方案的 RFC：

[https://www.rfc-editor.org/rfc/rfc2368](https://www.rfc-editor.org/rfc/rfc2368)

看看它对特殊字符的编码。

# entity-framework - 实体框架：以 unsigned int 作为主键的异常

> ID：15363519
> 
> 赞同：0
> 
> 时间：2013-03-12T14:09:42.507
> 
> 标签：entity-framework

我正在使用 EF 迈出第一步。只要表中没有无符号整数列作为主键，我就可以创建模型并显示一些数据。

数据库中定义为 UInt32 的所有列都映射到模型中的 Int64。程序编译没有任何错误但抛出异常“InvalidOperationException：键字段xx的类型应为System.Int64，但提供的值实际上是System.UInt32类型”

数据库是 Sybase SQL Anywhere 11，Build 2913 Visual Studio 2010 with .NET 4，但与 VS 2012 和 .NET 4 相同

我能做些什么？

谢谢

迈克尔

* * *

```
using (var f = new FritscheContext())
  {
    var s = f.CG_AUFTRAEGE;

    foreach (var det in s)
    {
     // ID_AUFTRAG_CG is an unsigned int as primary key
     Console.WriteLine("{0} {1}", det.ID_AUFTRAG_CG, det.AUFTRAG_CG); 
    }

    Console.WriteLine("fertig. Taste drücken");
    Console.ReadKey(true);
  } 
```

* * *

# ruby-on-rails - 具有多个类别的 Rails 嵌套路由

> ID：15363520
> 
> 赞同：0
> 
> 时间：2013-03-12T14:09:43.947
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ancestry

我试图弄清楚如何获得这样的嵌套路由：

```
match '/:category_id/:subcategory_id/:id', via: 'get', controller: 'categories', action: 'index', as: 'category' 
```

子类别和 id 不应该是必需的。应该可以得到：

*   类别索引
*   子类索引
*   身份证显示

类别和子类别应使用相同的控制器操作。类别和子类别当然使用相同的祖先/树模型。

我对这个有点迷失了。任何提示都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:21:41.130

It sounds like nested resources would get you most of what you want:

```
resources :category do 
  resources :subcategory 
end 
```

Have you considered/tried this?

For more on nested resources, including some insight into how to restrict what routes are exposed: [http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)

# ruby - 使用帐户和用户设计身份验证

> ID：15363522
> 
> 赞同：0
> 
> 时间：2013-03-12T14:09:47.043
> 
> 标签：ruby, ruby-on-rails-3, authentication, devise

我正在实施一个拥有许多用户的顶级帐户。

我正在解决这个问题： [Use both Account and User tables with Devise](https://stackoverflow.com/questions/8305120/use-both-account-and-user-tables-with-devise)

什么有效：

用户提交注册表（如下）后，将根据需要创建用户和帐户。

什么不起作用：

用户未在 redirect_to accounts_path 之前进行身份验证。为了进行身份验证，用户必须单击登录并输入他们刚刚注册的凭据。相反，我需要在重定向之前对用户进行身份验证。

我已经为此工作了几个小时，尝试了几种方法，但似乎没有任何效果。

成功创建用户/帐户后，有人可以帮助我使用代码对用户进行身份验证。谢谢！

**楷模**

```
class Account < ActiveRecord::Base
  has_many :users, :inverse_of => :account, :dependent => :destroy
  accepts_nested_attributes_for :users
  attr_accessible :name, :users_attributes
end

class User < ActiveRecord::Base
  belongs_to :account, :inverse_of => :users
  validates :account, :presence => true
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable,
         :confirmable, :lockable, :timeoutable
  attr_accessible :email, :password, :password_confirmation, :remember_me
end 
```

**路线**

```
resources :accounts, :only => [:index, :new, :create, :destroy]
controllers/accounts_controller.rb 
```

**控制器**

```
class AccountsController < ApplicationController

  def new
    @account = Account.new
    @account.users.build # build a blank user or the child form won't display
  end

  def create
    @account = Account.new(params[:account])
    if @account.save
      flash[:success] = "Account created"
      redirect_to accounts_path
    else
      render 'new'
    end
  end

end 
```

**视图/帐户/new.html.erb 视图**

```
<h2>Create Account</h2>

<%= form_for(@account) do |f| %>
  <%= render 'shared/error_messages', :object => f.object %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>

  <%= f.fields_for :users do |user_form| %>
    <div class="field"><%= user_form.label :email %><br />
    <%= user_form.email_field :email %></div>
    <div class="field"><%= user_form.label :password %><br />
    <%= user_form.password_field :password %></div>
    <div class="field"><%= user_form.label :password_confirmation %><br />
    <%= user_form.password_field :password_confirmation %></div>
  <% end %>

  <div class="actions">
    <%= f.submit "Create account" %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:10:43.507

您需要手动登录用户。在帐户控制器中，您需要一个，您要登录的实际模型记录`sign_in(user)`在哪里。`user``User`

问题在于您有一个帐户与多个用户的关系。因此，您需要以某种方式访问​​单个用户，例如：

```
 def create
    @account = Account.new(params[:account])
    if @account.save
      sign_in(@account.users.first)
      flash[:success] = "Account created"
      redirect_to accounts_path
    else
      render 'new'
    end
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:19:34.143

您需要添加

```
 before_filter :authenticate_user!, :except => [:new,:create] 
```

到帐户控制器，以便为其余操作提供身份验证

# java - 将 ArrayList 与 JOptionPane.showInputDialog 一起使用

> ID：15363524
> 
> 赞同：4
> 
> 时间：2013-03-12T14:09:53.027
> 
> 标签：java, swing, joptionpane

我目前遇到的情况是，我需要为我的应用程序的用户提供一个对话框，其中包含许多可供选择的选项。例子：

```
Object[] possibilities = {"ham", "spam", "yam"};
String s = (String)JOptionPane.showInputDialog(
                    frame,
                    "Complete the sentence:\n"
                    + "\"Green eggs and...\"",
                    "Customized Dialog",
                    JOptionPane.PLAIN_MESSAGE,
                    icon,
                    possibilities,
                    "ham"); 
```

似乎 JOptionPane.showInputDialog 可以做到这一点。但是，它似乎只能使用对象数组来选择选项，但在我的情况下，列表不是静态的，所以我无法定义数组，因为我有一个可变大小的 ArrayList。第二点是当我调用它时它不会给我选择的索引，但我需要这个，因为我在后台有另一个复杂的列表，其中包含由所选选项的索引定义的值。是否可以将动态列表推送到此对话框，或者是否有其他更优雅和灵活的方式来做我需要的事情？

提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:44:01.570

您可以使用`indexOf()`您的`List`来确定基于什么`JOptionPane`返回的索引。下面的示例演示了这一点，并且可以扩展以使用更大的选项列表。

```
List<String> optionList = new ArrayList<String>();
optionList.add("Ham");
optionList.add("Eggs");
optionList.add("Bacon");
Object[] options = optionList.toArray();
Object value = JOptionPane.showInputDialog(null, 
                                           "Favorite Food", 
                                           "Food", 
                                            JOptionPane.QUESTION_MESSAGE, 
                                            null,
                                            options, 
                                            options[0]);

int index = optionList.indexOf(value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:14:27.177

*   `Object[] possibilities = {"ham", "spam", "yam"};`应该是`Items`为了`JComboBox`

*   [对于类似的问题，请参阅](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/DialogDemoProject/src/components/CustomDialog.java)有关[如何制作对话框的 Oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#input)

# iphone - TableView 内容导致大量滚动并增加活动字节

> ID：15363530
> 
> 赞同：0
> 
> 时间：2013-03-12T14:10:04.337
> 
> 标签：iphone, ios, objective-c, uitableview

我在分页中从服务中提取数据并尝试在表格视图上显示。

一些内容/行使用不同的语言，它们会导致大量滚动并增加活动字节。

有没有办法处理这个问题？

实时字节正在增加，但没有泄漏。

问候，

雷诺琼斯

# javascript - 使用输入类获取名称，然后传递给 JS

> ID：15363533
> 
> 赞同：0
> 
> 时间：2013-03-12T14:10:04.900
> 
> 标签：javascript, jquery, asp.net, html

使用中继器显示列表。在此列表中是评论框并提交 btn。我希望用户输入数据并点击相应的提交btn。错误：JavaScript 运行时错误：Sys.Net.WebServiceFailedException：服务器方法“CommentBox”失败并出现以下错误：System.InvalidOperationException-- 无效的 Web 服务调用，缺少参数值：“CommentBoxContents”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:13:24.440

改变

```
var commentBoxData = $('.' + CommentBoxId).val(); 
```

至

```
var commentBoxData = $('#' + CommentBoxId).val(); 
```

您正在选择带有`class`CommentBoxId 的元素。改为使用`#`id 。

# c# - 将 HttpClient 设置为太短的超时会导致进程崩溃

> ID：15363536
> 
> 赞同：34
> 
> 时间：2013-03-12T14:10:14.773
> 
> 标签：c#, dotnet-httpclient

我注意到，当我使用`System.Net.HttpClient`短暂的超时时，它有时可能会使进程崩溃，即使它被包装在 try-catch 块中。这是一个重现这一点的简短程序。

```
public static void Main(string[] args)
{
    var tasks = new List<Task>();
    for (int i = 0; i < 1000; i++)
    {
        tasks.Add(MakeHttpClientRequest());
    }
    Task.WaitAll(tasks.ToArray());

}

private async static Task MakeHttpClientRequest()
{            
    var httpClient = new HttpClient { Timeout = TimeSpan.FromMilliseconds(1) };
    var request = "whatever";
    try
    {
        HttpResponseMessage result =
            await httpClient.PostAsync("http://www.flickr.com/services/rest/?method=flickr.test.echo&format=json&api_key=766c0ac7802d55314fa980727f747710",
                                 new StringContent(request));             
        await result.Content.ReadAsStringAsync();                
    }
    catch (Exception x)
    {
        Console.WriteLine("Error occurred but it is swallowed: " + x);
    }
} 
```

运行此程序将使进程崩溃，但出现以下异常：

```
Unhandled Exception: System.AggregateException: One or more errors occurred. ---> System.Net.WebException: The request was canceled
   at System.Net.ServicePointManager.FindServicePoint(Uri address, IWebProxy proxy, ProxyChain& chain, HttpAbortDelegate& abortDelegate, Int32& abortState)
   at System.Net.HttpWebRequest.FindServicePoint(Boolean forceFind)
   at System.Net.HttpWebRequest.get_ServicePoint()
   at System.Net.AuthenticationState.PrepareState(HttpWebRequest httpWebRequest)
   at System.Net.AuthenticationState.ClearSession(HttpWebRequest httpWebRequest)
   at System.Net.HttpWebRequest.ClearAuthenticatedConnectionResources()
   at System.Net.HttpWebRequest.Abort(Exception exception, Int32 abortState)
   at System.Net.HttpWebRequest.Abort()
   at System.Net.Http.HttpClientHandler.OnCancel(Object state)
   at System.Threading.CancellationCallbackInfo.ExecutionContextCallback(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.CancellationCallbackInfo.ExecuteCallback()
   at System.Threading.CancellationTokenSource.CancellationCallbackCoreWork(CancellationCallbackCoreWorkArguments args)
   at System.Threading.CancellationTokenSource.ExecuteCallbackHandlers(Boolean throwOnFirstException)
   --- End of inner exception stack trace ---
   at System.Threading.CancellationTokenSource.ExecuteCallbackHandlers(Boolean throwOnFirstException)
   at System.Threading.CancellationTokenSource.NotifyCancellation(Boolean throwOnFirstException)
   at System.Threading.CancellationTokenSource.TimerCallbackLogic(Object obj)
   at System.Threading.TimerQueueTimer.CallCallbackInContext(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.TimerQueueTimer.CallCallback()
   at System.Threading.TimerQueueTimer.Fire()
   at System.Threading.TimerQueue.FireNextTimers()
   at System.Threading.TimerQueue.AppDomainTimerCallback() 
```

稍微深入一点，似乎在创建`HttpClient`相关项之前中止请求时`ServicePoint`，`HttpWebRequest`尝试创建`ServicePoint`, via `ServicePointManager.FindServicePoint`，这会引发 RequestCanceled。由于这个异常是在试图取消请求的线程中抛出的，所以它没有被捕获，并且进程死亡。

我错过了什么吗？你遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-18T17:45:05.357

`HttpWebRequest.Abort()`在后台/计时器线程上引发异常。这与 HttpClient 的 Task 管理无关。

`HttpWebRequest.Abort()`.NET 4.5 GDR1 中应修复 来自的异常。[http://support.microsoft.com/kb/2750149](http://support.microsoft.com/kb/2750149) [http://support.microsoft.com/kb/2750147](http://support.microsoft.com/kb/2750147)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T17:15:32.370

看起来这是 HttpClient 的异步处理程序如何管理任务的某种错误。我能够并行启动这些项目，但同步运行它们并且它可以工作。我不确定您是否只想防止未处理的错误。这运行了并行任务，但是自从我将其关闭后，它们实际上并不是异步的。在我的电脑上，我总是打到 5 轮，然后它就会崩溃。即使我在一秒钟后将其设置为超时，这就像线程中的崩溃如果它们是异步的仍然会爆炸。

我认为这是一个错误，我无法想象这是预期的行为。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net.Http;

namespace TestCrash
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                Parallel.ForEach(Enumerable.Range(1, 1000).ToList(), i =>
                {
                    Console.WriteLine(i);
                    using (var c = new HttpClient { Timeout = TimeSpan.FromMilliseconds(1) })
                    {
                        var t = c.GetAsync("http://microsoft.com");
                        t.RunSynchronously(); //<--comment this line and it crashes
                        Console.WriteLine(t.Result);
                    }
                });
            }
            catch (Exception x)
            {
                Console.WriteLine(x.Message);
            }
            Console.ReadKey();
        }
    }
} 
```

# ruby-on-rails - 正则表达式提取子字符串 ruby

> ID：15363540
> 
> 赞同：0
> 
> 时间：2013-03-12T14:10:27.083
> 
> 标签：ruby-on-rails, regex

```
"{\"status\":1,\"redirect\":\"/some/uri/uri2/index.html?post_login=80607979823520\",\"security_token\":\"/cpsess8233434446\"}" 
```

我以字符串形式收到此响应，我需要提取 security_token 值。我试图通过 eval 方法将字符串转换为 Hash。似乎不起作用，我需要进行正则表达式匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:12:56.687

你可以这样做：

```
require 'json'
a =  JSON.load "{\"status\":1,\"redirect\":\"/some/uri/uri2/index.html?post_login=80607979823520\",\"security_token\":\"/cpsess8233434446\"}"
p a["security_token"]  #=> "/cpsess8233434446" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:13:32.740

您需要解析 JSON 数据..

```
result = "{\"status\":1,\"redirect\":\"/some/uri/uri2/index.html?post_login=80607979823520\",\"security_token\":\"/cpsess8233434446\"}" 
h = JSON.parse(result)
h['security_token']      # => "/cpsess8233434446" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:14:44.297

您可以 JSON.load 数据并过滤 ['security_token'] 或使用 .match(/security_token/) 样式的正则表达式。

我建议先于未来的可读性和代码维护。

# php - php中的卷曲响应

> ID：15363542
> 
> 赞同：-1
> 
> 时间：2013-03-12T14:10:39.747
> 
> 标签：php, curl

我正在使用 Curl 使用网关发送短信，a，当一切正常时收到 200，如果现在不发送，则收到 400，我应该从网关获取其他信息，例如电话号码和其他信息，所以我错过了什么吗？

```
// if the Form is submited 
//if (isset($_POST['PhoneNumber'])) {
if ($_SERVER['REQUEST_METHOD'] == "POST"){

// Fetch Phone Number and escape it for security 
$Phone = mysql_real_escape_string($_POST['PhoneNumber']);

// Fetch Text and escape it for security 
$Text = mysql_real_escape_string($_POST['Text']);

// Structure the URl
$url = "http://xxxxxxxxxxx:xxxx?PhoneNumber=".urlencode($Phone)."&Text=".urlencode($Text)."&User=xxx&Password=xxx";

// Handeling the Curl
$handle = curl_init($url);

curl_setopt($handle,  CURLOPT_RETURNTRANSFER, TRUE);

/* Get the HTML or whatever is linked in $url. */
$response = curl_exec($handle);

/* Check for 404 (file not found). */
$httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE);

if ($httpCode=="200"){

  // if everything is okey , the gateway returns 200 which means OK
  echo "Massage Was Sent , Thank you ";

} elseif ($httpCode=="400"){
  // if there was an error , the form returns a 400 which means that the sms Failed 
  echo "Massage was not sent , Please Try Again";

}

// Cloase the Curl Connection
curl_close($handle); 
```

谢谢您最好的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:51:48.610

$response 应该包含响应，尝试： `echo '<pre>'; print_r($response); echo '</pre>';` 显示其内容

# asp.net-mvc - 如何以声明的方式对复杂的 MVC 模型进行 Knockout 验证？

> ID：15363545
> 
> 赞同：1
> 
> 时间：2013-03-12T14:10:40.920
> 
> 标签：asp.net-mvc, knockout.js, viewmodel, knockout-validation, knockout-mvc

从技术上讲，我已经得到了这个问题的答案，但不幸的是不是我正在寻找的答案。我不得不接受它，因为那个人一直和我一起工作，付出了很多努力。在这里，我要求同一个 qn 专门获得我所追求的答案：

我所追求的是一种在 Knockout 视图模型上表达模型字段验证的*声明性方式：*

拥有这个 MVC 视图模型：

```
public class Email
{
  public string Selected { get; set; }
  public string Name { get; set; }
}

public class User
{
  public string UserName { get; set; }
  public IList<Email> Emails { get; set; }
} 
```

并有这个淘汰赛`viewModel`：

```
var viewModel = {
  UserName: ko.observable("@Model.UserName"),
  Emails: ko.observableArray(@Html.Json(@Model.Emails) || []),

  // How to express these: ???
  // Email.Selected: ko.observable().extend({ required: true })
  // Email.Name: ko.observable().extend({ required: true, email: true })

} 
```

我需要在 Knockout 中进行哪些更改才能`viewModel`以*声明*方式表达这一点。本质上，它归结为`viewModel`以与 MVC 类似的方式表达 Knockout，但在该模型的字段上使用Knockout[验证](http://ericmbarnard.github.com/Knockout-Validation/)（而不是[MVC 数据注释](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.aspx)）。

在你回答之前，请阅读到最后，它的文字不多，但我在这里寻找一些具体的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:30:10.633

我会有一个电子邮件视图模型，

```
var Email = 
{
    Selected: ko.observable().extend({ required: true }),
    Name: ko.observable().extend({ required: true, email: true })
} 
```

然后使用[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)自动为您填充它：

```
var viewModel = function()
{
    var self = this;
    self.UserName: ko.observable("@Model.UserName");
    var mapping = {
    'Emails': {
        create: function(options) {
            return new Email(options.data);
        }
     }
     self.Emails= ko.mapping.fromJSON(@Html.Json(@Model.Emails), mapping);
} 
```

请注意，我认为您需要使您的视图模型成为一个函数而不是一个直接的 JS 对象，因为我认为它不会起作用。

# c# - 是否可以仅使用 C# XmlReader 构建 dom 树？

> ID：15363551
> 
> 赞同：0
> 
> 时间：2013-03-12T14:11:03.057
> 
> 标签：c#, xml, xmlreader

我想用 XmlReader 在**任何**有效的 xml 字符串上构建一个 dom 树，**而不**使用类**XmlDocument**或类**XDocument**。而且我很难确定元素是否是 element`<tank>`的子节点`<plane>`。因为 Element`<plane>`没有结束标签。如果这个困难解决了，那么我就可以生成Dom树了。有谁知道如何解决这个问题，或者有谁知道如何使用 XmlReader 动态构建 DOM 树？

**xml内容：**

```
<?xml version="1.0" encoding="utf-8" ?>
<root>
    <plane visible="false" />
    <tank>
        <weapon name="cannon">equipped</weapon>
    </tank>
    <ship>
        <weapon name="cannon">equipped</weapon>
    </ship>
</root> 
```

**显示详细信息的脚本**

```
XmlReader xr = XmlReader.Create(xmlContent);
while (xr.Read())
{
    Logger.Log(string.Concat("[", xr.NodeType, "][", xr.ValueType, "]", xr.Name, ",(",xr.HasValue,")" + xr.Value));
} 
```

**细节**

```
[XmlDeclaration]    [System.String] xml,(True)version="1.0" encoding="utf-8"
[Element]           [System.String] root,(False)
[Element]           [System.String] plane,(False)
[Element]           [System.String] tank,(False)
[Element]           [System.String] weapon,(False)
[Text]              [System.String] ,(True)equipped
[EndElement]        [System.String] weapon,(False)
[EndElement]        [System.String] tank,(False)
[Element]           [System.String] ship,(False)
[Element]           [System.String] weapon,(False)
[Text]              [System.String] ,(True)equipped
[EndElement]        [System.String] weapon,(False)
[EndElement]        [System.String] ship,(False)
[EndElement]        [System.String] root,(False) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:03:44.360

这里的问题是`<plane>`标签*不是*标签的父级`<tank>`- 它是它的兄弟。如果`<plane>`标签需要成为标签的父元素`<tank>`，则需要将其包装在xml中。

如果您无法更改 xml，您可以使用`xr.IsEmptyElement`来确定标签是否是自关闭的，并使用自定义逻辑来相应地解决该问题。

# magento - 从 Onepage 结帐的送货地址部分获取“使用帐单地址”

> ID：15363554
> 
> 赞同：1
> 
> 时间：2013-03-12T14:11:06.943
> 
> 标签：magento

我试图让礼品选项消息仅在客户运送到与 Onepage 结帐流程中的帐单地址不同的地址时显示。我可以从账单部分获取“运送到相同/不同地址”

```
$this->getQuote()->getShippingAddress()->getData('same_as_billing') 
```

而且效果很好。但是，如果客户将其设为送货方式，并回击更改送货地址，则该字段似乎不会更新。我试着检查

```
$this->getQuote()->getShippingAddress()->getData('use_billing_address') 
```

但该数据不存在。事实上，当我在additional.phtml中有这两行时：

```
Mage::log("Same as billing: ".$this->getQuote()->getShippingAddress()->getData('same_as_billing'));
Mage::log("Use billing: ".$this->getQuote()->getShippingAddress()->getData('use_billing_address')); 
```

当我从送货地址转到送货方式时，它不会触发。任何人都可以在这里给我一些指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:25:42.010

我最终使用了 javascript 函数而不是 PHP，因为它不会重新加载页面以访问每个部分。

在 template/giftmessage/inline.phtml 中，我添加了以下内容：

```
 function _showHideGift() {
        var flag=document.getElementById('shipping:same_as_billing').checked;
        if(!flag){
            document.getElementById('gift-messages').style.display="block";
        }else{
            document.getElementById('gift-messages').style.display="none";
    }} 
```

然后使用togleVisilibityOnObjects 调用CDATA 内部块下面的函数。

# sql-server-2008 - SQL Server 2008 存储过程计算时间差

> ID：15363555
> 
> 赞同：-2
> 
> 时间：2013-03-12T14:11:06.983
> 
> 标签：sql-server-2008, stored-procedures

我有一个有两列的表`TotalTime`，`ElapsedTime`每个类型`varchar(8)`和列中的数据看起来是这样的：

```
7:00:00, 6:12:30 
```

（意思是*天：小时：分钟*）

我想创建一个名为的存储过程`SubtractTime`，它将计算`TotalTime - ElapsedTime`（例如`7:00:00 - 6:12:30 = 00:11:30`）。

这种函数的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:15:58.000

调查[`DATEDIFF()`](http://msdn.microsoft.com/en-us/library/ms189794%28SQL.105%29.aspx)。当然，您必须将这些 varchar 转换为 datetime。

# c# - 在 WCF 中使用自定义 Http 标头

> ID：15363558
> 
> 赞同：1
> 
> 时间：2013-03-12T14:11:11.570
> 
> 标签：c#, wcf, http-headers

我尝试使用 SOA 服务。我从 wsdl 生成一个服务引用，然后用我的绑定配置实例化一个客户端对象，它是一个 basicHttpBinding。

然后我实现了一个自定义行为和一个消息检查器，并在那里添加了我的自定义标头属性，如下所示...

```
 public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)
    {
        request.Properties.Add("CONTENT-TYPE", "text/xml;charset=UTF-8");
        request.Properties.Add("PropertyOne", "One");
        request.Properties.Add("PropertyTwo", "Two");

        return null;
    } 
```

然后，当我尝试使用该服务时，我总是收到错误消息

> （502错误的网关。

使用提琴手，我查看发送到服务的原始 http 数据，自定义属性不在标题中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T15:28:19.567

要将自定义 HTTP 标头添加到消息中，您需要将它们添加到`HttpRequestMessageProperty`消息属性包的实例中：

```
public object BeforeSendRequest(ref Message request, IClientChannel channel)
{
    HttpRequestMessageProperty prop;
    if (request.Properties.ContainsKey(HttpRequestMessageProperty.Name))
    {
        prop = (HttpRequestMessageProperty)request.Properties[HttpRequestMessageProperty.Name];
    }
    else
    {
        prop = new HttpRequestMessageProperty();
        request.Properties.Add(HttpRequestMessageProperty.Name, prop);
    }

    prop.Headers["Content-Type"] = "text/xml; charset=UTF-8";
    prop.Headers["PropertyOne"] = "One";
    prop.Headers["PropertyTwo"] = "Two";

    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-28T23:01:37.573

我也想做类似的事情，并且幸运地使用了 WeboperationContext

WebOperationContext.Current.OutgoingResponse.StatusCode = HttpStatusCode.Accepted; WebOperationContext.Current.OutgoingResponse.Headers.Add("HeaderName", "HeaderValue");

它就像一个魅力

# asp.net - 防止asp.net中的sql注入

> ID：15363561
> 
> 赞同：0
> 
> 时间：2013-03-12T14:11:14.100
> 
> 标签：asp.net, sql-injection, parameterized-query

我有以下身份验证方法：

```
protected void Button1_Click(object sender, EventArgs e)
        {            
            string s;
            s = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
            SqlConnection con = new SqlConnection(s);
            con.Open();
            string sqlCmd;
            sqlCmd = "SELECT Username, UserPassword FROM Benutzer WHERE Username = @Username AND UserPassword =@Password";
            SqlCommand cmd = new SqlCommand(sqlCmd, con);
            String username = tbUsername.Text.Replace("'", "''");
            String password = tbPassword.Text.Replace("'", "''");
            cmd.Parameters.AddWithValue("Username", username);
            cmd.Parameters.AddWithValue("Password", password);
            string CurrentName;
            CurrentName = (string)cmd.ExecuteScalar();
            if (CurrentName != null)
            {
                Session["UserAuthentication"] = cmd.Parameters[0].ToString();
                Session.Timeout = 1;
                Response.Redirect("Default.aspx");
            }
            else
            {
                lblStatus.ForeColor = System.Drawing.Color.Red;
                lblStatus.Text = "Benuztername/Password ungültig!";
            }
        } 
```

这足以防止sql注入吗？我以前只是将用户名和密码直接输入到命令中，如下所示：

```
sqlCmd = "SELECT Username, UserPassword FROM Benutzer WHERE Username ='" + username + "' AND UserPassword ='" + pwd + "'"; 
```

其中 username 和 pwd 仅在其中存储用户名和密码文本框内容的字符串变量...

# 编辑：

好的，我已经编辑了我的代码，现在看起来像这样：

```
protected void Button1_Click(object sender, EventArgs e)
        {
            SqlConnection objcon = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ToString());
            SqlDataAdapter objda = new SqlDataAdapter("[MembershipPruefen]", objcon);
            objda.SelectCommand.CommandType = CommandType.StoredProcedure;
            objda.SelectCommand.Parameters.Add("@Username", SqlDbType.VarChar).Value = tbUsername.Text;
            objda.SelectCommand.Parameters.Add("@UserPassword", SqlDbType.VarChar).Value = tbPassword.Text;
            objcon.Open();
            string CurrentName;
            CurrentName = (string)objda.SelectCommand.ExecuteScalar();
            if (CurrentName != null)
            {
                Session["UserAuthentication"] = tbUsername.Text;
                Session.Timeout = 1;
                Response.Redirect("Default.aspx");
            }
            else
            {
                lblStatus.ForeColor = System.Drawing.Color.Red;
                lblStatus.Text = "Benuztername/Password ungültig!";
            }
            objcon.Close();            
        } 
```

这是我的存储过程：

```
CREATE PROCEDURE MembershipPruefen (@Username VARCHAR(50), @UserPassword VARCHAR(50))  
AS 

SELECT Username, UserPassword FROM Benutzer WHERE Username LIKE @Username AND UserPassword LIKE @UserPassword; 
```

这足够了吗？我的 Web 应用程序会不会受到 sql 感染的影响，或者还有什么事情要做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:15:54.520

使用存储过程并且只返回一个值来表示它存在于数据库中（即行计数），或者如果您需要将用户名用于会话数据等，则只需返回用户名。

这向用户显示的数据库数据更少:)

有关存储过程的信息：http: [//support.microsoft.com/kb/306574](http://support.microsoft.com/kb/306574)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T15:12:35.540

我会创建一个专用的 sql server 用户来连接到数据库（我猜你现在正在连接 ths 'sa'？）。

这意味着您向数据库添加了一个完全没有权限的新用户，当您第一次运行应用程序时，您会得到一个 sql 异常，如预期的那样，您没有读取权限。您为新创建的用户授予对“Benutzer”表的 SELECT 权限，依此类推。

当您这样做时，即使您的连接受到威胁，攻击者也无法执行系统存储过程等。

一件额外的事情：建议您对密码进行哈希处理，因此您的密码永远不会被真实文本读取。这是一篇很大的文章，我看到你没有太多时间，但我强烈建议你实现散列密码。 [http://crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)

编辑：我`LIKE`在您的存储过程中看到一个，我会说`=`，用户必须输入正确的密码！

我看到您从 sql 语句更改为存储过程：在前面的文本中，将表的 SELECT 权限更改为存储过程的 EXECUTE 权限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T14:18:39.537

使用参数化查询（SqlCommand 和 SqlParameter）并将用户输入放入参数中。不要根据未经检查的用户输入构建 SQL 字符串。不要假设您可以构建一个可以检查用户输入的各种格式错误的清理程序。边缘情况很容易被遗忘。检查数字输入可能很简单，可以保证您的安全，但对于字符串输入，只需使用参数。检查二级漏洞 - 如果这些值包含用户输入，则不要从 SQL 表值构建 SQL 查询字符串。使用存储过程来封装数据库操作。

或者使用准备好的语句，这将通过使用 ORM 形成，如 Linq to SQL 或 NHibernate，它们在内部使用准备好的语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T14:12:55.477

使用准备好的语句：

`SqlCommand.Prepare`

[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.prepare%28v=vs.71%29.aspx)

# jquery - JQM：更改按钮文本（a href）

> ID：15363562
> 
> 赞同：1
> 
> 时间：2013-03-12T14:11:15.900
> 
> 标签：jquery, jquery-mobile

我遇到了一个看似简单的问题。我想以编程方式更改/更新按钮的按钮文本。但是，在查看了这里关于 SO 的几个不同的类似问题之后，我仍然没有更接近。

我正在使用带有 jQ​​uery 1.9 和 JQM 1.3 Final 的 Chrome。

**HTML** *（此块位于属于页脚的网格内）*

```
<div class="ui-block-b">
    <div class="ui-bar ui-bar-e" style="height:40px"> 
       <a href="#" class="footerWishOption footerDeleteWish" data-role="button" data-icon="trash">Slett ønske</a>
    </div>
</div> 
```

**JS**

*[changeButtonText 是在这里](https://stackoverflow.com/a/7279843/400284)找到的插件。*

```
// 1\. Does not work
$('.footerDeleteWish').changeButtonText("Gjenopprett
ønske"); 

// 2\. Does not work                                                          
$('.footerDeleteWish .ui-btn-text').text("Gjenopprett ønske");
$('.footerDeleteWish').refresh();

// 3\. Does not work
$('.footerDeleteWish').text("Gjenopprett ønske").refresh(); 
```

**更新/解决方案：**

正如下面答案中的评论所述，问题在于页脚的可见性。即使页脚是在 DOM 中创建的，选择器也没有找到它，因为它被隐藏了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:13:27.930

常见的方式有以下三种：

## 经典解决方案：

```
$(document).on('pagebeforeshow', '#index', function(){       
    $('#custom-btn span span').text('This is a new text');
}); 
```

现场示例：http: [//jsfiddle.net/Gajotres/EjVfz/](http://jsfiddle.net/Gajotres/EjVfz/)

该解决方案预计未来的按钮实现不会发生任何变化，并且一切都将保持不变。

## 谨慎的解决方案：

```
$(document).on('pagebeforeshow', '#index', function(){       
    $('#custom-btn').find('.ui-btn-text').text('This is a new text');
}); 
```

现场示例：http: [//jsfiddle.net/Gajotres/QHg3w/](http://jsfiddle.net/Gajotres/QHg3w/)

此解决方案是一个安全的解决方案，无论使用哪个按钮示例（a、按钮、输入），按钮文本都将始终位于 .ui-btn-text 类中。

## 更改按钮文本插件

```
$(document).on('pagebeforeshow', '#index', function(){       
    $('#custom-btn').changeButtonText('This is a new text');
});

(function($) {
    /*
     * Changes the displayed text for a jquery mobile button.
     * Encapsulates the idiosyncracies of how jquery re-arranges the DOM
     * to display a button for either an <a> link or <input type="button">
     */
    $.fn.changeButtonText = function(newText) {
        return this.each(function() {
            $this = $(this);
            if( $this.is('a') ) {
                $('span.ui-btn-text',$this).text(newText);
                return;
            }
            if( $this.is('input') ) {
                $this.val(newText);
                // go up the tree
                var ctx = $this.closest('.ui-btn');
                $('span.ui-btn-text',ctx).text(newText);
                return;
            }
        });
    };
})(jQuery); 
```

现场示例：http: [//jsfiddle.net/Gajotres/mwB22/](http://jsfiddle.net/Gajotres/mwB22/)

# c# - 如何从叶子中获取二级文本？

> ID：15363564
> 
> 赞同：1
> 
> 时间：2013-03-12T14:11:22.293
> 
> 标签：c#, asp.net, linq, telerik, treeview

如果我的位置是叶子，如何获得第二个父亲。

例如 ：

> 1---->2---->3
> 
> 或者
> 
> 1---->2---->3---->4
> 
> 或者
> 
> 1---->2---->3---->4---->5

如果我在最后一个节点（`3 or 4 or 5`）

如何获取节点（2）的文本？

* * *

```
 foreach (RadTreeNode node in nodeCollection)
    {
        if (node.Nodes.Count == 0)//leaf
        {
            if (!node.Value.TrimEnd().Contains('#'))
            {
                GroupDetails grp_d = new GroupDetails();

                grp_d.Boss_code = 0;
                grp_d.Boss_name = string.Empty;
                if (node.Value.TrimEnd().Split('_').Count() > 2)
                {
                    grp_d.Boss_code = int.Parse(node.Value.TrimEnd().Split('_')[2]);
                    grp_d.Boss_name = node.Value.TrimEnd().Split('_')[3];
                }
                grp_d.Dep_code = int.Parse(node.Value.TrimEnd().Split('_')[0]);
                grp_d.Dep_name = node.Text.TrimEnd() //Here i want to get the second parent text to concatenate  
                grp_d.Dep_year = int.Parse(node.Value.TrimEnd().Split('_')[1]);
                grp_d.Group_id = res;
                grp_det.Add(grp_d);

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:19:07.970

```
while( node.parent != null )
 node = node.parent;

return node.child; 
```

假设你只有一个孩子（即节点（2））

只是建议一种遍历树的合乎逻辑的方式。实施取决于您和您的系统设计！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:39:40.943

```
RadTreeNode node_tmp = new RadTreeNode();
      node_tmp = node;
          while (node_tmp.ParentNode != null)
                {
                   p_txt = node_tmp.Text.TrimEnd();
                   node_tmp = node_tmp.ParentNode;

                } 
```

# ios - Xib 用于自定义 UIView 或 UIView，类设置为此自定义 UIView

> ID：15363565
> 
> 赞同：0
> 
> 时间：2013-03-12T14:11:22.470
> 
> 标签：ios, objective-c, uiview, storyboard

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我已经创建了一个自定义`UIView`，我需要添加一些控件`UIView`。我也在使用`storyboards`，我必须添加`UIView`它。

我怀疑我是否必须为此自定义创建一个 xib，`UIView`或者最好添加一个`UIView`并将`storyboard`其类型更改为我的自定义`UIView`。

而且我必须访问那些我将从 custom 添加到 xib 的控件`UIView`。

**你怎么看？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:33:18.027

我做了什么/做了什么

*   创建一个自定义类作为 UIView 的子类
*   一切都以编程方式完成，变量的初始化是通过`-awakefromNib`
*   在情节提要中添加 UIView
*   将其自定义类更改为我的自定义类名。
*   执行

当然，您可以为视图创建一个笔尖并添加控件并为其设置连接，并且可以从笔尖名称加载

# assembly - 如何在汇编中打印笑脸字符？

> ID：15363566
> 
> 赞同：2
> 
> 时间：2013-03-12T14:11:22.797
> 
> 标签：assembly, character-encoding, x86, dos, tasm

在汇编（TASM）中输出笑脸字符的代码行是什么？

我知道为了打印一个点，它需要：

```
MOV AH, 2
DL, '.'
INT 21h 
```

为了打印退格，

```
MOV AH, 6
MOV DL, 8
INT 21H 
```

笑脸怎么样？我知道它存在是因为它出现在有垃圾值时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:23:49.410

在 DOS[代码页 437](http://en.wikipedia.org/wiki/CP437)（和大多数其他代码页）中，白色笑脸是代码 #1，黑色笑脸是代码 #2。所以这些是你需要放入的值`DL`。

```
MOV AH, 6
MOV DL, 1; print ☺
INT 21H 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:34:22.343

你可能想看看这里[http://spike.scu.edu.au/~barry/interrupts.html](http://spike.scu.edu.au/~barry/interrupts.html) 他们对中断的作用给出了足够好的解释。

这里要注意的重要一点是，通过在 AH 上加载一个值，您实际上是在选择运行的函数。所以 MOV AH,2 MOV AH,6 和 MOV AH,9 都在有效地选择不同的功能。在您的情况下，AH,2 或 AH,6 应该是好的。

现在 DL 是您传递给函数的参数。在这种情况下，函数需要一个包含它将打印的 ASCII 值的参数。

因此，MOV DL,1 用于笑脸。

# android - android 活动/服务仅在手机连接到 pc 时才有效

> ID：15363567
> 
> 赞同：0
> 
> 时间：2013-03-12T14:11:23.040
> 
> 标签：android, service, android-activity

我知道这听起来很奇怪，但我创建了一个简单的计时器，带有一个`activity`和一个`service`（启动和绑定）。

在活动中，我还实施`onStart`并`onStop`仅记录一条消息（Log.d（TAG，“活动开始/停止”）。

事实是，如果手机连接到电脑，一切似乎都可以正常工作。我可以启动计时器，暂停它，修改并重新启动它。打开其他应用程序，它会继续在后台运行。我记得它，我看到实际的倒计时正在下降。如果它完成，我可以从通知中召回活动并停止响铃。等等等等

如果手机与电脑分离，它就像根本没有服务一样工作。所以活动运行，如果我按下主页按钮，它会在后台运行并继续工作几分钟而不是停止。

**我可以在正在运行的应用程序**中看到该进程，如果我回忆起该活动，它会从它暂停的点重新启动。也就是说，我设置了 10 分钟，我点击开始，然后点击主页按钮。2-3 分钟后它停止工作，如果我记得活动，它会继续从 8-7 分钟倒计时......

任何想法？

活动：

```
package com.sleone.cookingtimer;

import com.sleone.cookingtimer.TimerService.LocalBinder;

import android.os.Bundle;
import android.os.IBinder;
import android.app.Activity;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

import kankan.wheel.widget.WheelView;
import kankan.wheel.widget.adapters.NumericWheelAdapter;
import android.util.Log;

public class TimerMainActivity extends Activity {
    // private CookingTimer timer;
    // suppressWarnings because is initialized binding to the service

    private TimerService timerService;
    private Intent timerServiceIntent;
    private final String TAG = "TimerMainActivity";

    private WheelView hoursWheel ;
    private WheelView minutesWheel;
    private WheelView secondsWheel;

    /*
     * Initialize the activity
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_timer_main);

        timerServiceIntent = new Intent(this, TimerService.class);
        startTimerService();

        // init the gui
        hoursWheel = (WheelView) findViewById(R.id.hoursWheelView);
        minutesWheel = (WheelView) findViewById(R.id.minutesWheelView);
        secondsWheel = (WheelView) findViewById(R.id.secondsWheelView);
        hoursWheel.setViewAdapter(new NumericWheelAdapter(this, 0, 6));
        minutesWheel.setViewAdapter(new NumericWheelAdapter(this, 0, 59));
        secondsWheel.setViewAdapter(new NumericWheelAdapter(this, 0, 59));
    }

    @Override
    protected void onStop(){
        super.onStop();
        Log.d(TAG, "TimerMainActivity stopped");
    }

    @Override
    protected void onStart(){
        super.onStart();
        Log.d(TAG, "TimerMainActivity started");
    }

    private void startTimerService() {
        // connect to the service
        // leave the service in background
        Log.d(TAG, "Starting the TimerService");
        startService(timerServiceIntent);
        // interact with the service
        Log.d(TAG, "Binding to the TimerService");
        bindService(timerServiceIntent, mConnection, Context.BIND_AUTO_CREATE);
    }

    private void stopTimerService() {
        unbindService(mConnection);
        stopService(timerServiceIntent);
    }

    /*
     * Disconnect from the service
     */
    @Override
    protected void onDestroy() {
        Log.d(TAG, "Stopping TimerService");
        super.onStop();
        stopTimerService();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.timer_main, menu);
        return true;
    }

    public void controlTimer(View view) {
        Button controlButton = (Button) findViewById(R.id.controlTimerButton);

        if (controlButton.getText().equals(
                getResources().getText(R.string.startTimer))) {
            if ((hoursWheel.getCurrentItem() == 0)
                    && (minutesWheel.getCurrentItem() == 0)
                    && (secondsWheel.getCurrentItem() == 0)) {
                return;
            }
            controlButton.setText(R.string.stopTimer);
            timerService.startTimer();
        } else {
            controlButton.setText(R.string.startTimer);
            timerService.stopTimer();
        }

    }

    /* Defines callbacks for service binding, passed to bindService() */
    private ServiceConnection mConnection = new ServiceConnection() {

        @Override
        public void onServiceConnected(ComponentName className, IBinder service) {
            // We've bound to LocalService, cast the IBinder and get
            // LocalService instance
            LocalBinder binder = (LocalBinder) service;
            timerService = binder.getService();
            binder.createCookingTimer(TimerMainActivity.this);

            Log.d(TAG, "onServiceConnected() finished");
        }

        @Override
        public void onServiceDisconnected(ComponentName arg0) {
            Log.e(TAG, "TimerService unexpectedly disconnected!!");
        }
    };
} 
```

服务：

```
package com.sleone.cookingtimer;

import android.app.Service;
import android.content.Intent;
import android.os.Binder;
import android.os.IBinder;

public class TimerService extends Service{
    // Binder given to clients
    private final IBinder mBinder = new LocalBinder();
    private CookingTimer timer;
    //private int timerServiceId;

    public class LocalBinder extends Binder {
        public TimerService getService() {
            // Return this instance of LocalService so clients can call public methods

            return TimerService.this;
        }

        // when the client connects to the service  instantiate the CookingImer
        public void createCookingTimer(TimerMainActivity timerMainActivity){
            timer = new CookingTimer(timerMainActivity);    
        }  
    }

    public void startTimer(){
        timer.startTimer();
    }

    public void stopTimer(){
        timer.stopTimer();
    }

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return mBinder;
    }
} 
```

我认为您不需要计时器本身。它只是一个`CountDownTimer`它`onTick`更新小时/分钟/秒轮并`onFinish`播放声音并创建一个`notification`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:33:34.213

好吧，我想我想通了。

基本上我不明白当cpu进入睡眠状态时服务也可以暂停。

所以，我的猜测是，在模拟器上或连接电缆时，cpu 永远不会进入睡眠状态，因为没有电池消耗。

为了从 CPU 睡眠中唤醒应用程序，我使用了带有 AlarmManager.RTC_WAKEUP 标志的 AlarmManger。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:26:15.597

您可能会遇到某种竞争条件，即当连接到 PC 时，执行速度会慢一些，但是当未连接时，时间会有所不同，并且执行顺序会发生变化。没有代码很难说。

# java - 如何使用 java jsoup 连接到站点并检索数据？

> ID：15363569
> 
> 赞同：4
> 
> 时间：2013-03-12T14:11:24.463
> 
> 标签：java, jsoup

我知道那里有很多信息，但我找不到适合我的问题的任何信息。我想从需要登录的页面收集数据。这是我正在尝试做的事情：

我收集饼干做：

```
Connection.Response res = Jsoup
      .connect("http://website.com/login?event=doLogin")
      .execute();
Map <String,String> cookies = res.cookies(); 
```

然后读取隐藏值的 html：

```
 Document doc = Jsoup
      .connect("http://website.com/login?event=doLogin")
      .cookies(cookies)
      .get();

        html = doc.toString();
        length = html.length();
        counter = 0;

        for (int i = 0; i < length; i++) {
            if (html.startsWith("document.write", i)){
                name[counter] = html.substring(i + 41, i + 144);
                value[counter] = "Login";
                counter++;
            }
            if (html.startsWith("hidden", i)) {
                name[counter] = html.substring(i + 13, i + 81);
                value[counter] = html.substring(i + 90, i + 123);
                counter++;
            }
        } 
```

最后，我想使用此信息使用 Cookie 和隐藏值登录：

```
 Document doc2 = Jsoup
      .connect("http://website.com/login?event=doLogin")
      .cookies(cookies)
      .data("email", "my@email")
      .data("pass", "mypass")
      .data(name[0], value[0])
      .data(name[1], value[1])
      .data(name[2], value[2])
      .method(Connection.Method.POST)
      .get();
 System.out.println(doc2); 
```

但我得到的只是登录页面。恐怕当我尝试时，这些隐藏的值会被改变：

```
Document doc2 = Jsoup.connect 
```

我做对了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T18:49:00.893

当您将方法设置为 POST 然后调用 GET 请求时，这是一种混合上下文。尝试这个：

```
Connection.Response res = Jsoup.connect("http://website.com/login?event=doLogin")
                               .execute();

...

Document doc = Jsoup.connect("http://website.com/login?event=doLogin")
                    .cookies(res.cookies())
                    .data("email", "my@email")
                    .data("pass", "mypass")
                    .data(name[0], value[0])
                    .data(name[1], value[1])
                    .data(name[2], value[2])
                    .post(); 
```

# php - 如何传递期望 varargs 字符串的 PHP 函数？

> ID：15363571
> 
> 赞同：3
> 
> 时间：2013-03-12T14:11:25.980
> 
> 标签：php, variadic-functions

我有一个 PHP 函数，它接受可变数量的参数。

```
function foo() {
     $numargs = func_num_args(); 
     if ($numargs < 3) {
         die("expected number of args is 3, not " . $numargs);
     }  
... 
```

如果我这样称呼它：

```
 foo(1, 12, 17, 3, 5); 
```

没关系，但如果我这样称呼它：

```
 $str = "1, 12, 17, 3, 5"; 
   foo($str); 
```

它失败了，因为它说我只传递了一个论点。如果我不想更改函数本身，只更改调用约定，我需要进行哪些更改。

--更新：为了保存explode调用，我简单地构建了一个数组。而且因为该函数是一个成员函数，所以调用约定有点不同。所以代码最终是

```
$list = array(); 
$list[] = 1;
$list[] = 12;
$list[] = 17;
// etc. 
call_user_func_array(array($this, 'foo'), $list); 
```

认为这可能对其他人有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:14:12.810

这应该可以解决问题：

```
$str = "1, 12, 17, 3, 5"; 
$params = explode(', ', $str );
call_user_func_array ( 'foo', $params ); 
```

`call_user_func_array()`允许您调用函数并传递存储在数组中的参数。因此，索引 0 处的数组项成为函数的第一个参数，依此类推。

[http://www.php.net/manual/en/function.call-user-func-array.php](http://www.php.net/manual/en/function.call-user-func-array.php)

update: you will have to do some additional processing on the `$params` array if you wish that the arguments will be integers (they are passed as strings if you use the above snippet).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T14:14:09.960

```
$str = "1, 12, 17, 3, 5"; 
call_user_func_array('foo',explode(',',$str)); 
```

# c# - 将docx转换为pdf

> ID：15363573
> 
> 赞同：0
> 
> 时间：2013-03-12T14:11:26.503
> 
> 标签：c#, pdf, docx

我的文档存储在我想发送带有附件的邮件的数据库中。

我想将存储的 docx 转换为 pdf。

```
var result = from c in valinor.documents
             select new
             {
                 c.document_name,
                 c.document_size,
                 c.document_content
             };

var kk = result.ToList();
for (int i = 0; i<kk.Count; i++)
{
    MemoryStream stream = new MemoryStream(kk[i].document_content);
    Attachment attachment = new Attachment(stream, kk[i].document_name + ".pdf", "application/pdf");
    mail.Attachments.Add(attachment);
} 
```

我怎样才能转换`document_content`成pdf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-19T04:41:36.713

您需要`Microsoft.Office.Interop.Word`在 MIcrosoft office 中使用 dll。

*   添加对您的项目的引用`Microsoft.Office.Interop.Word`
*   检查我的代码示例。

这很好，很容易。100% 为我工作。

```
Microsoft.Office.Interop.Word.Application word = new Microsoft.Office.Interop.Word.Application();   
wordDocument = word.Documents.Open(savedFileName, ReadOnly: true);
wordDocument.ExportAsFixedFormat(attahcmentPath + "/pdf" + attachment.BetAttachmentCode + ".pdf", Microsoft.Office.Interop.Word.WdExportFormat.wdExportFormatPDF);
word.Quit(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:15:03.400

您将需要在机器上安装第三方组件，例如 ABCpdf 和（可能）Word，并使用该组件将 docx 转换为 pdf。

# javascript - 允许在 url 末尾使用通配符以用于 javascript 条件 css 样式

> ID：15363575
> 
> 赞同：0
> 
> 时间：2013-03-12T14:11:36.127
> 
> 标签：javascript, css, url, conditional, wildcard

我有一个脚本可以根据 url 切换样式表。

必须这样做，因为该站点使用 smarty 模板，我不想更改核心文件或核心 css。

现在我必须添加每个单独页面的 URL 路径名。页面越多，这就越不切实际。

例如，而不是`/ojs/index.php/index/user/register`and`/ojs/index.php/index/user/profile`我想调用`/ojs/index.php/index/user/*`so 那么下面的所有页面`/user/`都将应用样式表。

做这个的最好方式是什么？我看过几个类似的帖子，但不完全是我需要的。

```
var loc = window.location;
var currentURL = loc.pathname;

if (currentURL=='/ojs/index.php/index' || currentURL=='/ojs/' ||  currentURL=='/ojs/index.php/index/about' || currentURL=='/ojs/index.php/index/user/register' || currentURL=='/ojs/index.php/index/user/profile' || currentURL=='/ojs/index.php/index/admin/' || currentURL=='/ojs/index.php/index/admin/auth')

loadjscssfile("/ojs/plugins/themes/main-theme/main-theme.css", "css") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:33:13.777

您可以使用[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)。

```
// unless you were using loc for something else, there is no need to store it,
// just chain to get the pathname
var currentURL = window.location.pathname,
    // create a regular expression that will match all pages under user
    usersPattern = new RegExp('^/ojs/index\.php/index/user/.*');

if (usersPattern.test(currentURL)) {
    loadjscssfile("/ojs/plugins/themes/main-theme/main-theme.css", "css")
} 
```

与正则表达式一样，您需要小心您正在做的事情以使其正确。以下是此表达式如何工作的简短说明：

*   `^`告诉它仅在字符串以`/ojs/`等开头时才匹配
*   中间`\.`转义 the `.`，告诉它`.`in`index.php`是一个字面点
*   最后`.`的将匹配任何字符
*   以下`*`将`.`匹配前一个字符的 0 个或多个实例（在这种情况下为任何字符）

我使用构造函数创建了这个正则表达式`RegExp`，但也可以使用正则表达式文字来完成。一般来说，使用文字是一个更好的主意，但在这种情况下，我使用了构造函数，因为因为它需要一个字符串作为参数，所以我不必转义`/`模式中的字符。如果我们用文字来做，而不是这样：

```
usersPattern = new RegExp('^/ojs/index\.php/index/user/.*'); 
```

它看起来像这样：

```
usersPattern = /^\/ojs\/index\.php\/index\/user\/.*/; 
```

不需要逃避那些`/`使它更具可读性。

# javascript - HTML标签事件顺序

> ID：15363578
> 
> 赞同：2
> 
> 时间：2013-03-12T14:11:55.207
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:14:23.380

`doSomething()`先去..如果它返回`false`或被阻止，则不调用锚链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:14:54.543

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:14:00.223

JavaScript 将首先执行。

# jquery - 我如何在 div 中移动输入，但使用背景颜色在 css 中的对象周围扩展 div 选择框

> ID：15363579
> 
> 赞同：0
> 
> 时间：2013-03-12T14:11:58.017
> 
> 标签：jquery, css

我有一个包含一些输入的**div 。**div 的内容是可变的，但是使用背景颜色检查，我如何扩展周围 div 的高度和宽度以包围输入。

我的样本位于：http: [//jsfiddle.net/fallenreaper/pL6Ua/](http://jsfiddle.net/fallenreaper/pL6Ua/)

目标是如果宽度调整，那么所有的框都会向下移动。

我试过这样的事情：

```
position: relative; 
```

但它并没有完全包裹周围的 div。我错过了什么？

**编辑：** javascript 用于我正在开发的扩展工具。屏幕上显示的项目是：

```
$alt_item 
```

**Edit2：** div 的内容是动态的，所以我需要能够将所有内容向下推以适应。从本质上讲，它看起来应该类似于：如果将 *$("#dtr_list > div")* 高度设置为 80px。

我正在考虑使用 Javascript 作为选项，找到所有孩子中最大的（高度 + 顶部），然后将高度 = 设置为那个。

**编辑3：**

```
var maxH = 0;
$($("#dtr_list > div")[0]).children().each(function(){
    $("#altdata").append("Top: "+$(this).position().top + " Height: "+ $(this).height()+ "<br />");
    if(($(this).position().top + $(this).height()- $(this).parent().position().top+5) > maxH)
    {
        maxH = $(this).position().top + $(this).height() - $(this).parent().position().top + 5;
    }
});
$("#altdata").append("maxH: "+maxH);
$("#dtr_list > div").css("height", maxH); 
```

这个 javascript 将解决它，但我不喜欢我需要以编程方式完成它。我添加的*+5*是因为边距，但您可以将 +5 作为硬编码数字替换为：

```
Number($(this).parent().css("margin").match(/^\d/)) 
```

# c# - MailSystem.Net 中使用字符串的参数过多

> ID：15363586
> 
> 赞同：3
> 
> 时间：2013-03-12T14:12:14.480
> 
> 标签：c#, imap

我正在尝试使用 MailSystem.Net 连接到 IMAP 服务器。一切似乎都很好，直到我尝试使用包含多个单词的密码（使用此代码访问我将使用它的任何实际非测试电子邮件的要求）。那时我收到登录命令的“参数太多”错误。

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

using CommandLine.Utility;
using ActiveUp.Net.Mail;
using PT.MailIntegration.IMAP; // not using this, could be removed

namespace MailP
{
    class Program
    {
        static void Main(string[] args)
        {
            string user = null;
            string password = null;
            string server = null;
            string path = null;

            // this sends the args string into the CommdandLine class and dumps any values into a hashtable
            Arguments CommandLine = new Arguments(args);

            // sets the user
            if (CommandLine["u"] != null)
            {
                user = CommandLine["u"];
            }

            // sets the password
            if (CommandLine["p"] != null)
            {
                password = CommandLine["p"];
            }

            // sets the server
            if (CommandLine["s"] != null)
            {
                server = CommandLine["s"];
            }

            // sets the path
            if (CommandLine["d"] != null)
            {
                @path = CommandLine["d"];
            }

            // program only moves forward as long as it has these 4 arguments
            if ((user != null) &
                (password != null) &
                (server != null) &
                (path != null))
            {
                Imap4Client client = new Imap4Client();
                Console.WriteLine(" " + user + " " + password + " " + server + " " + path);
                client.ConnectSsl(server, 993);
                client.Login(user, password);  //this is where the error pops up
                // this print out means we got in!
                Console.WriteLine("Connection Successful!");

                Mailbox box = client.Mailboxes["inbox"];
                Fetch fetch = box.Fetch;
                int messagesLeft = box.MessageCount;
                int msgIndex = 0;

                while (messagesLeft > 0)
                {
                    msgIndex++;
                    messagesLeft--;
                    Message email = fetch.MessageObject(msgIndex);

                    // if the email has attachments
                    if (email.Attachments.Count > 0)
                    {
                        foreach (MimePart attachment in email.Attachments)
                        {
                            email.Attachments.StoreToFolder(@path);
                            Console.WriteLine("Downloaded!");
                        }
                    }

                    // delete the message using it's UID and position in the mailbox
                    box.UidDeleteMessage(fetch.Uid(msgIndex), true);
                    msgIndex--;
                }

            }
            // this means the user did not enter the expected arguments
            else
            {
                Console.WriteLine("You did not enter the expected data!\n");
                Console.WriteLine("Format should be: ");
                Console.WriteLine("MailP.exe -u <user> -p <password> -s <IMAP SERVER> -d <path>");

                Console.WriteLine("\r\n" + "Press any key to continue...");
                Console.ReadKey(true);

            }
        }
    }
} 
```

对于输入：

> mailP.exe -u "用户名" -password "这是我的密码" -s "imap.server.com" -d "c:\downloads"

我得到错误：

> {"Command \"login username this is my password \" failed : 130312093815354 BAD Unexpected extra arguments to LOGIN\r\n"}

我尝试在登录调用中将密码字符串转换为字符串。我还尝试让登录成为另一个函数的一部分，该函数接受两个字符串作为参数。我猜在登录功能中可能没有正确解析引号？如果是因为我无法在网上找到另一个有类似问题的人。即使对密码进行硬编码也会产生同样的问题。我在这里完全不知所措。我希望将整个字符串作为密码的参数传入。我知道这一定是我错过了一些愚蠢的事情，但我已经倒过这段代码并且错过了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:18:44.620

由于密码包含空格，我打赌您只需用引号将其括起来。

```
client.Login(user, "\"" + password + "\""); 
```

# tomcat - NginX SSL Offload $scheme 没有效果

> ID：15363594
> 
> 赞同：0
> 
> 时间：2013-03-12T14:12:29.410
> 
> 标签：tomcat, nginx

我正在尝试使用 Nginx 和 Tomcat 进行 ssh 卸载。我的设置是：浏览器 -(HTTPS)-> nginx -> (http/https) -> tomcat

我已经设置 nginx 在 x-forwarded-proto 标头中转发请求方案。

```
 proxy_pass http://default_upstream;
                    add_header Set-Cookie "SRVGROUP=$group; path=/";
                    proxy_next_upstream error;
                    proxy_set_header Host $host;
                    proxy_set_header X-Real-IP $remote_addr;
                    proxy_set_header X-Host $http_host;
                    proxy_set_header X-Forwarded-For $http_x_forwarded_for;
                    proxy_set_header X-URI $uri;
                    proxy_set_header X-ARGS $args;
                    proxy_set_header X-Forwarded-Proto $scheme;
                    proxy_set_header X-Scheme $scheme;
                    proxy_set_header Refer $http_refer;
                    proxy_redirect http:// $scheme://;
                    proxy_set_header Strict-Transport-Security "max-age=7200"; 
```

在 tomcat 上，我打印 X-Forwarded-Proto 标头，我总是得到 http。如果我更换

```
proxy_set_header X-Forwarded-Proto $scheme; 
```

和

```
proxy_set_header X-Forwarded-Proto https; 
```

一切正常。但我想使用 $scheme，因为并非我的所有页面都通过 https 提供。

寻找解决方案，或者是否有人以前遇到过同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-20T03:37:10.153

请试试：

方法1：

```
proxy_set_header X-Forwarded-Proto $http_x_forwarded_proto; 
```

方法2：

```
nginx.conf
proxy_set_header X-Forwarded-Proto $http_x_forwarded_proto;

server.xml:

<Valve className="org.apache.catalina.valves.RemoteIpValve"
       remoteIpHeader="x-forwarded-for"
       remoteIpProxiesHeader="x-forwarded-by"
       protocolHeader="X-Forwarded-Proto"
       httpsServerPort="443"
    /> 
```

如果还是有问题，建议你tcpdump nginx和tomcat之间的数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:49:53.550

我找到了。在我的 ssl nginx 配置中，有人留下了这个：

```
proxy_pass http://127.0.0.1; 
```

它几乎再次重定向到 nginx，但在端口 80 上。我将其注释掉，现在一切正常。

感谢大家的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:09:39.893

proxy_set_header X-Forwarded-Proto https；对于 SSL 卸载是正确的。您似乎期待的是 Nginx 代理 http 连接。这也是可行的，但是您需要将其单独设置为端口 80 的侦听器，然后代理与上游服务器的连接。

基本上，您需要为端口 443 和端口 80 提供单独的服务器配置块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T03:04:20.980

在我的 devbox 中尝试了您的配置，并进行了一些小的更改。我的上游脚本在从 https 访问时看到“https”，在从 http 访问时看到“http”。所以你的配置有效。

我更改的唯一行是发送到上游的 Host 标头。从

```
proxy_set_header Host $host; 
```

到

```
proxy_set_header Host my_upstream_domain_name; 
```

我将两个站点（上游/下游）托管在同一个 devbox 上。因此，如果主机头指向当前域名，而不是上游的域名，我的测试将不起作用。

如果您的上游托管在不同的服务器上，上述更改可能与您的测试无关。

# c++ - C++奇怪的类声明

> ID：15363595
> 
> 赞同：1
> 
> 时间：2013-03-12T14:12:34.883
> 
> 标签：c++

我正在练习 ACM 问题以成为一名更好的程序员，但我对 c++ 还很陌生，而且我在解释我正在阅读的一些法官代码时遇到了麻烦。一堂课的开头是

```
public:
   State(int n) : _n(n), _p(2*n+1)
   { 
```

然后它被初始化为

```
State s(n);
s(0,0) = 1; 
```

我正在尝试阅读代码，但我无法理解。State 类似乎只传递了 1 个参数，但程序员在初始化时传递了 2 个参数。另外，究竟是什么设置= 1？据我所知，= 运算符并没有被重载，但以防万一我错过了一些东西，我在下面包含了完整的代码。

任何帮助将不胜感激。

提前致谢

```
 /*
    * D - Maximum Random Walk solution
     * ICPC 2012 Greater NY Regional
     * Solution by Adam Florence
     * Problem by Adam Florence
     */

    #include <cstdio> // for printf
    #include <cstdlib> // for exit
    #include <algorithm> // for max
    #include <iostream>
    #include <vector>

    using namespace std;

    class State
    {
    public:
       State(int n) : _n(n), _p(2*n+1)
          {
          if (n < 1)
             {
             cout << "Ctor error, n = " << n << endl;
             exit(1);
             }
          for (int i = -n; i <= n; ++i)
             _p.at(i+_n) = vector<double>(n+1, 0.0);
          }

       void zero(const int n)
          {
          for (int i = -n; i < n; ++i)
             for (int m = 0; m <= n; ++m)
                _p[i+_n][m] = 0;
          }

       double operator()(int i, int m) const
          {
    #ifdef DEBUG
          if ((i < -_n) || (i > _n))
             {
             cout << "Out of range error, i = " << i << ", n = " << _n << endl;
             exit(1);
             }
          if ((m < 0) || (m > _n))
             {
             cout << "Out of range error, m = " << m << ", n = " << _n << endl;
             exit(1);
             }
    #endif
          return _p[i+_n][m];
          }

       double& operator()(int i, int m)
          {
    #ifdef DEBUG
          if ((i < -_n) || (i > _n))
             {
             cout << "Out of range error, i = " << i << ", n = " << _n << endl;
             exit(1);
             }
          if ((m < 0) || (m > _n))
             {
             cout << "Out of range error, m = " << m << ", n = " << _n << endl;
             exit(1);
             }
    #endif
          return _p[i+_n][m];
          }

       static int min(int x, int y)
       {
           return(x < y ? x : y);
       }
       static int max(int x, int y)
       {
           return(x > y ? x : y);
       }

    private:
       int _n;

       // First index is the current position, from -n to n.
       // Second index is the maximum position so far, from 0 to n.
       // Value is probability.
       vector< vector<double> > _p;
    };

    void go(int ds)
       {
       // Read n, l, r
       int n, nds;
       double l, r;
       cin >> nds >> n >> l >> r;
       const double c = 1 - l - r;

       if(nds != ds){
           cout << "Dataset number " << nds << " does not match " << ds << endl;
           return;
       }

       // Initialize state, probability 1 at (0,0)
       State s(n);
       s(0,0) = 1;

       State t(n);

       State* p1 = &s;
       State* p2 = &t;

       for (int k = 1; k <= n; ++k)
          {
          // Compute probabilities at step k

          p2->zero(k);

          // At step k, the farthest from the origin you can be is k
          for (int i = -k; i <= k; ++i)
             {
              const int mm = State::min( State::max(0, i+k), k);
             for (int m = 0; m <= mm; ++m)
                {
                // At step k-1, p = probability of (i,m)
                const double p = p1->operator()(i,m);
                if (p > 0)
                   {
                   // Step left
                   p2->operator()(i-1, m) += p*l;
                   // Step right
                   p2->operator()(i+1, State::max(i+1,m)) += p*r;
                   // Stay put
                   p2->operator()(i, m) += p*c;
                   }
                }
             }
          swap(p1, p2);
          }

       // Compute expected maximum position
       double p = 0;
       for (int i = -n; i <= n; ++i)
          for (int m = 0; m <= n; ++m)
             p += m * p1->operator()(i,m);

       printf("%d %0.4f\n", ds, p);
       }

    int main(int argc, char* argv[])
       {
       // Read number of data sets to process
       int num;
       cin >> num;

       // Process each data set identically
       for (int i = 1; i <= num; ++i)
          go(i);

       // We're done
       return 0;
       } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:14:10.343

您将调用`state::operator()(int, int)`与初始化混淆了。该运算符调用允许您设置类实例的元素的值。

```
State s(n);  // this is the only initialization
s(0,0) = 1;  // this calls operator()(int, int) on instance s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:15:16.587

在这一行：

```
s(0,0) = 1; 
```

它叫这个：

```
 double& operator()(int i, int m) 
```

并且因为它返回对双精度的引用，所以您可以分配给它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:18:03.227

第二行不再初始化。构造函数在第 1 行调用，第二行调用

> 双&运算符（）（int i，int m）

n=0 和 m=0 并将 1 写入返回的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T14:20:01.623

这部分：

```
State(int n) : _n(n), _p(2*n+1) 
```

...是一个成员初始化列表。这有点类似于如果你写了这样的结构：

```
state(int n) { _n = n; _p = 2*n+1; } 
```

...除了它初始化`_n`而`_p`不是从它们初始化开始，然后为它们分配值。在这种特定情况下，可能没有太大区别，但是当您拥有只能初始化（未分配）的引用之类的东西时，它变得至关重要。

`s(0,0) = 1`外观`s`旨在表现得有点像二维数组，并且它们已经重载以`operator()`充当该数组的下标运算符。[我在上一个答案](https://stackoverflow.com/a/2216055/179910)中发布了一个可以做到这一点的课程。

# r - 为什么比例为零方差列返回 NaN？

> ID：15363610
> 
> 赞同：4
> 
> 时间：2013-03-12T14:13:04.230
> 
> 标签：r

考虑以下矩阵：

```
x <- matrix(c(1,1,1,3),2)
x
     [,1] [,2]
[1,]    1    1
[2,]    1    3 
```

`scale`使用此调用时，`NaN`将返回第一列的值，该列的方差为零：

```
scale(x)
     [,1]       [,2]
[1,]  NaN -0.7071068
[2,]  NaN  0.7071068
attr(,"scaled:center")
[1] 1 2
attr(,"scaled:scale")
[1] 0.000000 1.414214 
```

但是，我希望它会返回`0`。这是一个错误还是我误解了这是什么并且应该返回？

我想要的解决方法是：

```
y <- scale(x)
y[is.nan(y)] <- 0 
```

但这涉及到额外变量的使用，有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T14:24:38.520

因为`scale`除以方差，它必须这样做。

连续变量真的不应该有联系，更不用说零方差，也不适合缩放离散或分类变量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T14:42:38.317

您可以使用以下解决方法：

```
apply(x, 2, function(y) (y - mean(y)) / sd(y) ^ as.logical(sd(y)))

     [,1]       [,2]
[1,]    0 -0.7071068
[2,]    0  0.7071068 
```

# javascript - Highcharts 条件数据标签

> ID：15363611
> 
> 赞同：0
> 
> 时间：2013-03-12T14:13:07.117
> 
> 标签：javascript, highcharts

我正在根据一些用户输入创建一个 Highcharts 折线图。用户可以选择 1 个或多个分组和日期范围，我为每个组创建一个系列。这很好用，除了当他们选择超过 3 个组时，图表看起来很糟糕，因为数据标签太多。

我只想在图表上少于 4 个系列的情况下有条件地启用数据标签。我怎样才能做到这一点？我正在尝试这样，但我似乎无法让它工作。

```
plotOptions: {
    line: {
        dataLabels: {
            enabled: function() {
                return !!(chart.series.length > 3);
            },
            color: '#000000',
            formatter: function() {
                return Highcharts.numberFormat(this.y, 2);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T15:47:21.633

创建系列时，请跟踪您创建的数量。还有一个 javascript 变量“showDataLabels=true”。如果在创建系列时系列数超过 4，请设置 showDataLabels=false;

```
var showDataLabels = true;
// start creating the series. 
```

如果 num series > 4 showDataLabels = false;

准备好生成图表后，请使用：

```
plotOptions: {
            line: {
                dataLabels: {
                    enabled:showDataLabels,
                    color: '#000000',
                    formatter: function() {
                        return Highcharts.numberFormat(this.y, 2);
                    }
                }
            }
        }, 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-03T10:48:52.567

在 dataLables 中使用 Formatter 功能

```
formatter: function ()  {
    if(this.y!=0)
        return this.y;
    else`enter code here`
        return "";
} 
```

# c# - 如何通过覆盖 Seed 方法将数据库与 EF 模型同步？

> ID：15363612
> 
> 赞同：0
> 
> 时间：2013-03-12T14:13:07.593
> 
> 标签：c#, entity-framework, code-first

我是 EF Code First 方法的新手，有一个问题。我使用上述方法创建了一个示例 SQL 数据库。它按预期工作。我的问题是如何在模型更改时更新我的​​表？我已经为此阅读并上网，最后找到了以下解决方案： 1\. DropCreateDatabaseIfModelChanges 2\. DropCreateDatabaseAlways 3\. CreateDatabaseIfNotExists 4\. 在 PM 控制台中使用 Enable-Migrations 不幸地处理了很多语法错误！我知道我需要重写可以从 DropCreateDatabaseAlways 继承的 Seed 方法。而且我知道我必须在这个方法中创建对象并将它们添加到上下文中。但是...如果我的客户表包含 100 条记录怎么办？我是否必须获取它们并使用循环将它们添加到上下文中？我不知道，但这对我来说似乎不合理！

我很感激任何人都可以提供一个很好的解决方案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:16:44.967

我不得不说我个人认为最简单的方法是使用迁移。我使用此处提到的方法，在“您的第一次自动迁移”标题下：

[http://weblogs.asp.net/fredriknormen/archive/2012/02/15/using-entity-framework-4-3-database-migration-for-any-project.aspx](http://weblogs.asp.net/fredriknormen/archive/2012/02/15/using-entity-framework-4-3-database-migration-for-any-project.aspx)

（我用的是EF 5.0 就算文章说的是4.3，也没什么区别）

# ruby-on-rails - Moped::Errors::OperationFailure 失败，错误为“没有这样的 cmd

> ID：15363613
> 
> 赞同：8
> 
> 时间：2013-03-12T14:13:07.647
> 
> 标签：ruby-on-rails, mongodb, ruby-on-rails-3.2, mongoid, moped

我最近从 mongoid 2.0.2 升级到带有 rails 3.2.12 和 ruby​​ 1.9.3 的 mongoid 3。

```
Following issue comes when save command excutes => @new_node.save

  Moped::Errors::OperationFailure (The operation: #<Moped::Protocol::Command
      @length=366
      @request_id=30
      @response_to=0
      @op_code=2004
      @flags=[:slave_ok]
      @full_collection_name="campus_dev.$cmd"
      @skip=0
      @limit=-1
      @selector={:aggregate=>"nodes", :pipeline=>[{"$match"=>{"parent_id"=>"51382df8851d1912b7000009", "_id"=>{"$ne"=>"513f24952f1feda4bc000002"}, "position"=>{"$nin"=>[nil]}}}, {"$group"=>{"_id"=>"position", "count"=>{"$sum"=>1}, "max"=>{"$max"=>"$position"}, "min"=>{"$min"=>"$position"}, "sum"=>{"$sum"=>"$position"}, "avg"=>{"$avg"=>"$position"}}}]}
      @fields=nil>
    failed with error "no such cmd"):
      app/controllers/nodes_controller.rb:37:in `create' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-09T23:03:13.450

您没有提到将 MongoDB 版本升级到最新版本（当时）。

如果您指向一个无法识别“聚合”命令的旧 MongoDB 服务器，那么您会得到这个错误。

所有类似错误的实例似乎都指向较旧的`mongod`进程。

# php - 如何设置 $_SESSION 变量以在 sql 查询中使用？

> ID：15363617
> 
> 赞同：0
> 
> 时间：2013-03-12T14:13:13.177
> 
> 标签：php, mysql, sql

我不确定我是否做对了，但我可以帮助我指出正确的方向。

基本上我有一张桌子叫`ptb_stats`. 该表的布局如下所示：

```
user_id  |  user_postcode

   1             m3 4
   2             m3 4
   3             kt1 3
   4             sm2 7 
```

我正在尝试生成一个 mysql 查询，该查询将显示所有具有匹配邮政编码的用户。因此，例如，如果`user 1 / user_id 1`已登录，那么他们将看到`user 2`谁与他们具有相同的邮政编码（以 m3 4 开头）

例如，这大致告诉用户，用户 1 和用户 2 彼此相距 5 英里。

我有一个有效的查询是这样的：

```
function get_local_users() {
            global $connection;
            $query = "
            SELECT *
            From ptb_stats, ptb_users
            WHERE ptb_stats.user_id=ptb_users.id
            AND ptb_stats.user_postcode='m3 4'
            AND ptb_users.id!=".$_SESSION['user_id']."";
            $local_set = mysql_query($query, $connection);
            confirm_query($local_set);
            return $local_set;  

        } 
```

目前我必须手动将邮政编码输入到查询中才能正常工作。我的问题是我需要分配一个会话变量，我相信它会告诉查询将具有相同邮政编码的用户与登录的用户匹配。

目前我已将 $_SESSION['user_id'] 设置为变量，但之前有人设置了此变量，我正在尝试修复他们的所有工作，但无法与执行此操作的人取得联系。所以我不明白会话变量。我以为我可以将 $_SESSION['user_id'] 更改为 $_SESSION['user_postcode'] 并且它会起作用，但基本上我需要做的是如何让查询说：

如果登录用户`user_postcode`是（无论值）并且他们是匹配的其他用户，`user_postcodes`则显示这些。

有人可以告诉我我需要做什么才能让它工作。我真的很感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:15:20.487

```
SELECT  a.*
FROM
        tableName a
        INNER JOIN
        (
            SELECT  user_postcode
            FROM    tableName
            GROUP   BY user_postcode
            HAVING  COUNT(*) > 1
        ) b ON a.user_postcode = b.user_postcode 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/45e1a/1)
*   [SQLFiddle 演示（*带过滤器*）](http://www.sqlfiddle.com/#!2/45e1a/2)

* * *

**更新 1**

```
function get_local_users() 
{ 
    global $connection; 
    $query = "  SELECT  a.* 
                FROM    ptb_stats a 
                        INNER JOIN 
                        ( 
                            SELECT user_postcode 
                            FROM ptb_stats 
                            GROUP BY user_postcode 
                            HAVING COUNT(DISTINCT user_id  ) > 1 
                        ) b ON a.user_postcode = b.user_postcode 
                WHERE a.user_id <> " . $_SESSION['user_id']; 
    $local_set = mysql_query($query, $connection); 
    confirm_query($local_set); 
    return $local_set; 
} 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# excel - Excel将两行合并为一行

> ID：15363618
> 
> 赞同：0
> 
> 时间：2013-03-12T14:13:22.177
> 
> 标签：excel

我可以知道如何将两个数据合并到一个单元格中吗？例如：

A1 - 100100
A2 - 110000

进入

A3 - 100100
       110000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:18:08.747

`char(10)`只需像往常一样将它们连接起来，并在中间添加一个换行符 ( )：

```
=A1 & CHAR(10) & B1 
```

确保为单元格 A3 设置了“自动换行”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:26:55.260

或者：

```
=CONCATENATE(A1; CHAR(10);A2) 
```

您仍然需要启用自动换行。

很好的页面来了解更多关于这样的 excel 功能

> [http://www.excelfunctions.net/excel-string-concatenation.html](http://www.excelfunctions.net/excel-string-concatenation.html)

# jquery - 表单重置后JQuery验证不起作用

> ID：15363619
> 
> 赞同：1
> 
> 时间：2013-03-12T14:13:22.360
> 
> 标签：jquery, asp.net

我使用以下方法重置表单后遇到问题：

```
$(".cancel").click(function () {
        validator.resetForm();
        $(':input', '#MyForm')
            .not(':button, :submit, :reset, :hidden')
            .val('')
            .removeAttr('checked')
            .removeAttr('selected');
        //OR
        document.getElementById('MyForm').reset();
}); 
```

当我再次点击保存时，不再需要必填字段并且表单会发回。即使在重置后，如何让表单重新验证？

这是一个简单的例子，因为我只是重置验证和表单，但在其他页面上我必须手动操作某些字段，所以我需要这种重置表单的方式才能工作。

这是一个 MVC 创建的表单，如果这有什么不同的话

有什么建议么？

**编辑：**经过反复试验，问题似乎不应该出在直接的 resetForm 代码上，而应该出在其他问题上。

在控制台中，我收到以下 javascript 错误：

```
SyntaxError: invalid label 
```

和警告

```
Use of attributes' specified attribute is deprecated. It always returns true. 
```

不确定它们是否与我的问题有关，但不确定此时还能做什么。

至于我正在使用的脚本：

```
@Scripts.Render("~/bundles/modernizr")
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/Scripts/jquery-1.8.3.min.js")
@*@Scripts.Render("~/Scripts/jquery-1.9.1.min.js")*@
@Scripts.Render("~/Scripts/jquery-ui-1.9.2.js")
@Scripts.Render("~/Scripts/jquery.validate.js")
@Scripts.Render("~/Scripts/jquery-validate-messages.js")
@Scripts.Render("~/Scripts/jquery.validate.unobtrusive.min.js")
@Scripts.Render("~/Scripts/DataTables-1.9.4/media/js/jquery.dataTables.js")
@Scripts.Render("~/Scripts/jquery.jeditable.mini.js")
@Scripts.Render("~/Scripts/DataTables-1.9.4/media/js/jquery.dataTables.editable.js")
@Scripts.Render("~/Scripts/DataTables-1.9.4/extras/TableTools/media/js/TableTools.js")
@Scripts.Render("~/Scripts/Countdown.js")
@Styles.Render("~/Scripts/DataTables-1.9.4/media/css/jquery.dataTables.css")
@RenderSection("scripts", required: false) 
```

1.9.1 被注释掉了，因为它在第一次 JQuery 调用时中断了。这有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:29:21.593

尝试使用以下方法再次设置验证：

```
$j.validator.unobtrusive.parse('#MyForm'); 
```

**编辑**

您可以尝试使用重置按钮重置表单，将其放在您的表单中：

```
<button class="reset-button" type="reset">Reset form</button> 
```

并禁用您的事件处理程序`.cancel`。或将其更改为：

```
$('.cancel').click(function () {
    $('.reset-button').click();
}); 
```

如果您不想显示重置按钮，请隐藏它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:47:45.020

找到了一种强制它在提交时重新验证的方法：

```
$(".cancel").click(function () {
        $('#FormId')[0].reset();
        validator.resetForm();
    });

    $("#submitForm").click(function () {
        if ($("#FormId").valid()) {
            $("#FormId").submit();
        }
    }); 
```

现在我不再依赖表单的提交功能来触发验证，而是我自己来触发它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:36:10.387

我不知道您为什么以这种方式重置表单，但只需使用重置即可正常工作。Jquery 有一个本机重置

```
 $(".cancel").click(function () {
        $('#FormId')[0].reset();
     }); 
```

和验证保持工作顺利

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T14:38:07.253

尝试以下操作：

```
var validator = $("#FormId").validate();

$(".cancel").click(function () {
    $('#FormId')[0].reset();
    validator.resetForm();
}); 
```

示例[小提琴](http://jsfiddle.net/7vm4a/1/)

# php - php跳过空数组

> ID：15363628
> 
> 赞同：0
> 
> 时间：2013-03-12T14:13:33.543
> 
> 标签：php, arrays, checkbox, email-attachments

当用户选择复选框 1 时，我有一个带有 2 个复选框的表单（page2），第 3 页上的脚本会将指令 1 发送到电子邮件地址。选择CHKBOX 2时，它会发送指令2。

这是有效的，但是当只检查 1 个 chkbox 时，我也会收到类似文件名不能为空的错误。

这是第 2 页的代码

```
 <form name="form" method="POST" action="instructies_verzenden2.php"> 
    <p></p>
    <input type="checkbox" name="i_allinonewebsolution" value="file_1.txt"><span       class="info-image information">All-in-One Websolution</span>
    <input type="checkbox" name="i_custommade" value="file_2.txt"><span class="info-image information">Custom Made</span>
    <input type="hidden" name="keyfield" value="<?php echo $domeinnaam?>"><input type="hidden" name="emailadres" value="<?php echo $data2[emailadres]?>"><input type="submit"  class="sub-small sub-opslaan green" value="Update gegevens">
    <p></p>
    </form> 
```

这是第 3 页的代码

```
 // array with filenames to be sent as attachment
    $i_allinonewebsolution=$_POST['i_allinonewebsolution'];
    $i_custommade=$_POST['i_custommade'];
    $files = array("$i_allinonewebsolution","$i_custommade");

    // preparing attachments
    for($x=0;$x<count($files);$x++){
    $file = fopen($files[$x],"rb");
    $data = fread($file,filesize($files[$x]));
    fclose($file);
    $data = chunk_split(base64_encode($data));
    $message .= "Content-Type: {\"application/octet-stream\"};\n" . " name=\"$files[$x]\"\n" . 
"Content-Disposition: attachment;\n" . " filename=\"$files[$x]\"\n" . 
"Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
    $message .= "--{$mime_boundary}\n";
    } 
```

我认为问题出在这里：

```
 // array with filenames to be sent as attachment
    $i_allinonewebsolution=$_POST['i_allinonewebsolution'];
    $i_custommade=$_POST['i_custommade'];
    $files = array("$i_allinonewebsolution","$i_custommade"); 
```

我曾尝试使用 implode 和 array_filter 但我猜我做错了。谢谢你的帮助。

# 更新

我已将表单页面添加到 jsfiddle。第一个jsfiddle中有3个页面链接

[http://jsfiddle.net/BNDfg/3/](http://jsfiddle.net/BNDfg/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:16:21.733

尝试这样的事情

```
$files = array();
if(isset($_POST['i_allinonewebsolution'])) {
   array_push($files, $_POST['i_allinonewebsolution']);
}
if(isset($_POST['i_custommade'])) {
   array_push($files, $_POST['i_custommade']);
} 
```

如果你想扩展它并有更多的复选框，你可以把它们放在一个数组中，比如

```
$checkboxes = array('i_allinonewebsolution',
                    'i_custommade',
                    'i_checkbox3',
                    'i_checkbox4');

$files = array();

foreach($checkboxes as $checkbox){
    if(isset($_POST[$checkbox])) {
       array_push($files, $_POST[$checkbox]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:18:19.473

当我对 DB 查询执行类似的操作时（其中结果通常在 Select 查询中为 NULL），我会进行测试以查看变量是否已设置。

使用 isset 测试数据是否实际发布。

例如

```
if(isset($var))
//Do Action 
```

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:23:46.580

确保 POST 值不为空，在进入第 2 页的实际逻辑之前尝试一个简单的 if 条件，例如 if(empty($_POST['i_allinone']) && empty($_POST['custommade']))

您还可以使用**null**、**is_set**等来检查**POST**或**REQUEST**值是否为空

```
 $i_allinonewebsolution=$_POST['i_allinonewebsolution'];
$i_custommade=$_POST['i_custommade'];
if(!empty($i_allinonewebsolution))
{
$files = array("$i_allinonewebsolution");
}
if(!empty($i_custommade))
{
$files = array("$i_custommade");
}
if(!empty($i_allinonewebsolution) && !empty($i_custommade))
{
$files = array("$i_allinonewebsolution","$i_custommade");
} 
```

试一试！对不起扩展代码。

# html - background-size 包含，但不放大

> ID：15363632
> 
> 赞同：37
> 
> 时间：2013-03-12T14:13:40.213
> 
> 标签：html, css, background

我将背景图片设置为`contain`：

```
.el {
    background: url(path/to/img.jpg) no-repeat center center;
    background-size: contain;
} 
```

但这会放大图像。我希望图像永远不会大于其原始尺寸，并且仅在它不适合其原始分辨率时按比例缩小。

这是一个演示：http: [//jsfiddle.net/6W3yh/](http://jsfiddle.net/6W3yh/)

* * *

**我正在寻找仅在 CSS 中的解决方案。
请不要使用 JavaScript。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:51:23.540

不幸的是，您想要做的事情在 CSS 中是不可能的。

最好的办法是使用 Javascript 设置背景大小。但是，如果您希望在容器小于它的情况下缩小图像，则必须能够检索图像的自然高度。

```
if ($('.el').height() < imageHeight) {
  $('.el').css('background-size', 'contain');
}
else {
  $('.el').css('background-size', 'auto');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T23:37:43.797

为此，您可以使用[戴夫叔叔的 Ol' Padded Box 技术](http://daverupert.com/2012/04/uncle-daves-ol-padded-box/)。这是[一个在行动中展示它的小提琴](http://jsfiddle.net/6W3yh/1/)。

```
div {
    background: url(http://cdn4.iconfinder.com/data/icons/silent_night_icons/128/santa.png) no-repeat center center;
    background-size: 100%;

    width: 100%;
    max-width: 128px;
    height: 0;
    padding-bottom: 100%; /* (Image Height / Image Width) * 100%; */
} 
```

唯一的问题是您需要知道图像的宽度才能使其正常工作。如果您使用像 Compass 这样的 CSS 预处理器，您可以将这项工作卸载到处理器上，而不是手动执行。[在此处查找有关该信息的信息](http://compass-style.org/reference/compass/helpers/image-dimensions/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-06T21:58:01.947

你可以使用这个 JQuery 修复：

```
$('.target').each(function() {
        if ($(this).css('background-size') == 'contain') {
            var img = new Image;
            var currObj = $(this);
            img.src = currObj.css('background-image').replace(/url\(|\)$/ig, "").replace(/"/g, "").replace(/'/g, "");
            img.onload = function(){
                if (img.width < currObj.width() && img.height < currObj.height()) {
                    currObj.css('background-size', 'auto auto');
                }
            }
        }
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T14:55:27.697

要获得自然的宽度/高度，您可以将背景图像放在 html 中并将其隐藏，然后使用脚本获取图像的宽度/高度。

HTML：

```
<div></div>
<img id="background" style="display: none" src="http://cdn4.iconfinder.com/data/icons/silent_night_icons/128/santa.png" /> 
```

JS：

```
var backgroundSize = $('#background').css('width'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-11T15:28:29.660

我使用两种方法：

## 1 - 对象拟合

这有很好的浏览器支持：[https ://caniuse.com/#feat=object-fit](https://caniuse.com/#feat=object-fit)

```
.container {
  position: relative;
  width: 200px;
  height: 200px;
  /* Just for style */
  display: inline-block;
  background: rgba(0,0,0,0.2);
  margin: 10px;
}
.container img {
  width: 100%;
  height: 100%;
  object-fit: scale-down;
}
```

```
<div class="container">
  <img src="https://picsum.photos/300/200">
</div>

<div class="container">
  <img src="https://picsum.photos/200/300">
</div>

<div class="container">
  <img src="https://picsum.photos/100/100">
</div>
```

## 2 - 定位和变换

当您需要针对较旧的浏览器时，这同样适用，无需更改您的标记

```
.container {
  position: relative;
  width: 200px;
  height: 200px;
  /* Just for style */
  display: inline-block;
  background: rgba(0,0,0,0.2);
  margin: 10px;
}
.container img {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  max-width: 100%;
  max-height: 100%;
}
```

```
<div class="container">
  <img src="https://picsum.photos/300/200">
</div>

<div class="container">
  <img src="https://picsum.photos/200/300">
</div>

<div class="container">
  <img src="https://picsum.photos/100/100">
</div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-13T13:10:49.187

**CSS 解决方案**：您需要知道图像的高度和宽度。

```
@media screen and (max-width: 640px) and (max-height: 480px) {
    div {
        background-size: contain !important;
    }
} 

div {
    background: #000 url('https://i.imgur.com/someimage.jpg') no-repeat center center;
    background-size: 640px 480px;
} 
```

图片网址在哪里，图片`https://i.imgur.com/someimage.jpg`的宽度和高度分别是`640px`和`480px`。

# javascript - 使用 HTML 5/JavaScript/可能是 Flash 的音频操作？

> ID：15363633
> 
> 赞同：1
> 
> 时间：2013-03-12T14:13:41.087
> 
> 标签：javascript, html, flash, audio

是否有任何库允许您将音频作为输入并允许您在客户端（浏览器）上操作声音？

我们正在探索在本地或远程播放音频的想法，用户可以操纵源，即音高、速度等

理想情况下寻找 HTML 5 / JavaScript 库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:46:15.327

如果我理解正确的话，这应该可以通过 HTML5 Audio API 实现。

看看这个： [http ://www.html5rocks.com/en/tutorials/webaudio/intro/?redirect_from_locale=de](http://www.html5rocks.com/en/tutorials/webaudio/intro/?redirect_from_locale=de)

[https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)

希望能帮助到你！:)

# memory-management - 改进我的红黑树实现

> ID：15363640
> 
> 赞同：1
> 
> 时间：2013-03-12T14:13:49.803
> 
> 标签：memory-management, insert, red-black-tree

我写了一个 rb-tree 实现。使用 malloc 分配节点。在开始时分配一个大表并使用该空间来分配节点并在每次表即将溢出时将大小加倍是否是一个好主意。假设分配的时间很重要，我不确定，这将使插入操作更快一些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:25:05.620

分配一个大块（并自行拆分）与分配许多小项目是否更好的问题适用于许多情况。并且没有一个万能的答案。不过，一般来说，分配大块*可能*会快一点。但是加速（如果有的话）可能不会很大。以我的经验，在大量使用动态分配的高并发系统中，进行单个大型分配通常值得付出努力和复杂性。如果你有一个单线程应用程序，我的猜测是每个节点的分配占插入操作的成本非常小。

一些一般性的想法/评论：

*   分配一个大块（并根据需要增加它）通常会使用更少的内存。典型的通用分配器（例如，C 中的 malloc/free）在每次分配时都有开销。因此，例如，一个 100 字节的小分配请求可能会导致使用 128 字节。
*   在具有大量内存碎片的内存受限系统中，可能无法分配大块内存并将其分割，而多个小块分配仍可能成功。
*   尽管分配大块减少了分配器级别的同步争用（例如，在 malloc 中），但在从您自己的托管列表/块中获取节点时（假设是多线程系统），仍然需要提供您自己的同步。但是可能必须有一些与节点本身的插入相关的同步，因此它可以在相同的操作中处理。

最终，您需要对其进行测试并测量差异。您可以做的一件简单的事情就是编写一个简单的“一次性”测试，分配您希望处理的节点数量以及需要多长时间（然后也可能是释放它们的时间）。这可能会给你某种分配成本的大致估计。

# asp.net - 针对特定版本的 .NET Framework 编译您 的网站

> ID：15363644
> 
> 赞同：0
> 
> 时间：2013-03-12T14:13:55.510
> 
> 标签：asp.net, visual-studio-2010

我无权访问 IIS 服务器，但我被告知该站点已配置为使用 .NET Framework 1.1 版运行。当我使用 Telerik JustDecompile 时，我看到以下内容。

![在此处输入图像描述](../Images/0b2ac1ba2e8ca4213b454b5be1f63196.png)

“NET 1”似乎表明这 2 个 dll 是针对 FW 的 1.1 版编译的。网站 dll“GLSS”旁边的“ANY”是否表明该站点可以针对安装在 Web 服务器上的任何版本的 .NET FW 运行？

在为升级到 2.0 做准备时，我已经要求 Web 管理员将站点配置更改为固件的 2.0 版本，令我惊讶的是，我认为运行 1.1 代码的站点仍然可以运行。我应该感到惊讶吗？

这只是向后兼容的一个简单示例，并且站点可以配置为使用框架的任何版本，只要它等于或高于编译代码使用的版本吗？

当我查看解决方案中项目的属性页时，令我惊讶的是，仅对于网站项目，我无法找到设置要编译的固件版本的位置。我能够为引用的项目找到它。

您能否帮助我更好地了解配置站点的固件版本与编译程序集的版本之间的关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:20:41.597

You should not be surprised, .NET was always backward compatible in a sense that assemblies compiled against a version of the runtime are supposed to run against a newer version of the runtime.

There are of course subtle issues where things are not backward compatible, starting from subtle semantic differences and ending with changes at the object contract level (where the expected method/class just does not exists anymore) but in general these problems depend on the complexity of your application. It is safe to assume that simple applications should just work with no issues.

The number of the runtime the assembly has been complied against is a part of the assembly's metadata, it can be read with reflection. Thus, at runtime, you have at least two possible versions of the runtime - the one the assembly has been compiled against and the current version of the runtime which executes your code.

# r - 作为函数参数提供时获取列表变量的名称

> ID：15363651
> 
> 赞同：2
> 
> 时间：2013-03-12T14:14:07.253
> 
> 标签：r

假设我有一个函数接受始终是列表一部分的变量。

```
myfun <- function(x$name,y$name) { 
 # stuff 
} 
```

我想做的是使用名称。

```
alist <- list(Hello=1,Goodbye=2)

myfun(alist$Hello, alist$Goodbye) { 
 # I want to be able to work with the characters "Hello" and "Goodby" in here
} 
```

因此，在我的函数中，我将如何获得字符“Hello”和“Goodbye”。给定`alist$Hello`和`alist$Goodbye`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T14:22:25.243

我记得这样`plot.default`做是`deparse(substitute(`：

```
a <- list(a="hello",b=c(1,2,3))
f <- function(x,y) { print(deparse(substitute(x))); print(deparse(substitute(y))) }
f(a$a,a$b)
#[1] "a$a"
#[1] "a$b" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T14:22:42.437

像这样的东西，也许：

```
myfun <- function(x) { print(substitute(x))}
myfun(iris$Sepal.Length)
## iris$Sepal.Length 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T14:24:49.207

我将使用列表参数创建函数：

```
myfun <- function(l) {
    print(names(alist))
}
myfun(alist)
# [1] "Hello"   "Goodbye" 
```

# gwt - 我的 GWT 服务器端代码上的 http 代理

> ID：15363652
> 
> 赞同：1
> 
> 时间：2013-03-12T14:14:09.290
> 
> 标签：gwt

我有一个 REST 服务器作为后端，它提供了一组服务，而且它使用 **基本的身份验证**方法进行访问。

现在我需要创建一个 GWT 前端，因此，我需要从 GWT 前端对 REST 后端执行 http 调用

经过一番研究，我发现 HttpBuilder 可以处理对后端的 http 请求，但是在尝试执行跨站点请求时似乎很痛苦，而且它带有一些与 Safari 浏览器相关的限制。

然后我找到了这篇[https://developers.google.com/web-toolkit/doc/latest/tutorial/Xsite](https://developers.google.com/web-toolkit/doc/latest/tutorial/Xsite)文章，其中讨论了“您自己的服务器上的代理”，所以它看起来是我正在寻找的解决方案对于，但我没有找到更多的信息，或者一个例子。它说我可以创建**服务器端**代码来从远程服务器（后端）下载数据，所以，我应该在**服务器端**代码上创建一个像 apache 客户端这样的**http 客户**端，并实现一组使用它来制作的服务吗？向后端请求？如果是，如何处理用户身份验证和会话？如果没有，请给我一盏灯。

 **谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:37:31.590

```
 it seem to be a pain when trying to perform cross-site requests, 
```

实际上，如果我们可以在 Servlet 响应标头中设置，您可以从 GWT RequestBuilder 发出跨站点请求

Response.setHeader("Access-Control-Allow-Origin"," [http://yourrestserviceur.com/url](http://yourrestserviceur.com/url) ");

```
should I create a http client like the apache client on server-side code, and implement 
a set of services that use it to make request to the backend? 
```

不，这不是必需的。利用`RequestBuilder`

**RequestBuilder 示例：**

```
 RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, url);

        try {
          Request request = builder.sendRequest(null, new RequestCallback() {
            public void onError(Request request, Throwable exception) {
              displayError("Couldn't retrieve JSON");
            }

            public void onResponseReceived(Request request, Response response) {
              if (200 == response.getStatusCode()) {
                updateTable(asArrayOfStockData(response.getText()));
              } else {
                displayError("Couldn't retrieve JSON (" + response.getStatusText()
                    + ")");
              }
            }
          });
        } catch (RequestException e) {
          displayError("Couldn't retrieve JSON");
    } 
```**

# javascript - Javascript regex 没有在我的网站上得到验证，但它在验证器上得到验证

> ID：15363664
> 
> 赞同：1
> 
> 时间：2013-03-12T14:14:33.123
> 
> 标签：javascript, regex

我真的把头撞在墙上了。我有这个正则表达式模式

```
(?:youtu\.be\/|youtube.com\/(?:watch\?.*\bv=|embed\/|v\/)|ytimg\.com\/vi\/)(.+?)(?:[^-a-zA-Z0-9]|$) 
```

它提取了 youtube 视频的 id。我在这里试过

[http://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)

对于任何主题字符串，假设[http://youtube.com/watch?v=21312321](http://youtube.com/watch?v=21312321)并且它有效。

但是在我的网站上，我有以下输入字段

```
<input type="text" name="status" id="status" placeholder="Post a youtube video link"> 
```

和下面的jQuery代码

```
$('#status').keyup(function(event){
    var value = $(this).val();
    var pattern = "(?:youtu\.be\/|youtube.com\/(?:watch\?.*\bv=|embed\/|v\/)|ytimg\.com\/vi\/)(.+?)(?:[^-a-zA-Z0-9]|$)";
    var re = new RegExp(pattern);
      if (value.match(re)) {
        console.log("Successful match");
      } else {
        console.log("No match");
      }     
}); 
```

通过使用与上面相同的视频，结果是“不匹配”。这怎么可能，请告诉我这里出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:15:52.627

改用正则表达式文字：

```
var re = /(?:youtu\.be\/|youtube.com\/(?:watch\?.*\bv=|embed\/|v\/)|ytimg\.com\/vi\/)(.+?)(?:[^-a-zA-Z0-9]|$)/; 
```

发生的事情是一个字符串已经“评估”了转义，所以你的`\.`和`\b`正在变成`.`退格字符。`new RegExp`大多数时候使用的函数是错误的，只有当你有一个动态正则表达式时才真正有用（这在大多数时候也是错误的）——正则表达式文字更有效，更容易阅读，因此更不容易出错.

（另外，`youtube.com`应该是`youtube\.com`。）

# c++ - 将变量分配给 null (C++) 时的信号 6 (SIGABRT)

> ID：15363666
> 
> 赞同：0
> 
> 时间：2013-03-12T14:14:33.450
> 
> 标签：c++, gdb

在分析 SIGABRT 后转储的核心时，gdb 说我执行的最后一行代码（在进入库代码之前）是`NULL`对指针的赋值`char`，如下所示：

数据库：

```
(gdb) bt full
#0  0x006337a2 in _dl_sysinfo_int80 () from /lib/ld-linux.so.2
No symbol table info available.
#1  0x00674815 in raise () from /lib/tls/libc.so.6
No symbol table info available.
#2  0x00676279 in abort () from /lib/tls/libc.so.6
No symbol table info available.
#3  0x006a8cca in __libc_message () from /lib/tls/libc.so.6
No symbol table info available.
#4  0x006af55f in _int_free () from /lib/tls/libc.so.6
No symbol table info available.
#5  0x006af93a in free () from /lib/tls/libc.so.6
No symbol table info available.
#6  0x00d0b14e in __builtin_delete () from /usr/lib/libstdc++-libc6.1-1.so.2
No symbol table info available.
#7  0x0808181c in MyObject::~MyObject (this=0x84f4db0, __in_chrg=3) at ./MyObject.cpp:16
    this = (MyObject *) 0x84f4db0 
```

MyObject.cpp:16 清单：

```
12: ...
13: MyObject::~MyObject() {
14:   if (this->string != NULL) {
15:     delete this->string;
16:     this->string = NULL;
17:   }
18: }
19: ... 
```

首先，我不明白为什么第 16 行会导致调用堆栈。如果它是第 15 行的执行结果会更有意义，即带有`delete`运算符的行（除非“第 16 行”表示在析构函数代码*之后*执行的代码以释放为该对象分配的内存；只是在这里猜测）。

除此之外，任何人都可以指出正确调试该内核的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:21:04.717

有什么类型`this->string`？它是一个字符数组吗？那么你应该使用`delete [] this->string`. 它是指向对象的指针吗？然后该对象要么已被删除且指针未为空，要么该对象从未被创建且指针未初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:27:29.113

实际的崩溃发生在这一行：

```
15:     delete this->string; 
```

坠机是由于对`abort`内部的调用而发生的`__libc_message`。最后一个例程向您的标准错误打印一条消息，该消息看起来像

```
*** glbc detected: double free or heap corruption at ...  *** 
```

使用[Valgrind](http://valgrind.org)或[AddressSanitizer](https://code.google.com/p/address-sanitizer/)：他们会直接指出问题所在。

> 我不明白为什么第 16 行会导致调用堆栈。

当您查看导致`raise`系统调用的调用堆栈时，您需要了解该`CALL`指令将**下**一条要执行的指令的地址放在堆栈上，然后再将控制权转移到被调用的过程，并且正是下一条指令GDB 向您展示`backtrace`（所有调试器都这样做）。下一条指令可能在当前行、下一行或向下 20 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:18:02.823

它指向即将执行的下一行，*在*您的情况下是第 16 行，最后执行的语句/表达式是第 15 行，它在该行崩溃。

不过，很难从您的帖子中看出这里有什么问题。

# symfony - symfony 2：通过防火墙在非安全页面上获取当前登录用户

> ID：15363674
> 
> 赞同：4
> 
> 时间：2013-03-12T14:14:47.557
> 
> 标签：symfony, firewall

如何在非安全页面上获取当前登录用户？

我只有一个通过防火墙保护的 /account/ 页面，而其他页面不受保护。

我的全局导航具有以下模板（简化）：

```
{% if app.user %}
  <a href="/account/data">...
  <a href="/logout>...
{% else %}
  <a href="/account/login">....
{% endif %} 
```

问题：在不安全的页面上也应该可以访问带有注销链接的导航，但是没有 UsernamePasswordToken...并且 symfony 显示登录链接，而不是 /logout 和 /account/data 链接。我使用匿名侦听器配置了所有其他页面，但它无法正常工作。

有解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T14:20:54.157

您无法在非防火墙页面上获取用户。为整个应用启用防火墙，允许匿名访问，并通过以下方式保护应用的特定部分`access_control`：

```
security:
    firewalls:
        main:
            pattern: ^/
            anonymous: ~

    access_control:
        - { path: ^/protected, roles: ROLE_SOME } 
```

# vb.net - 表单不能通过共享调用的默认实例引用自身

> ID：15363675
> 
> 赞同：6
> 
> 时间：2013-03-12T14:14:49.913
> 
> 标签：vb.net, visual-studio-2010

考虑以下代码，在一个全新的 WinForms .NET 4.0 应用程序中，使用默认设置：

```
Public Class Form1
  Private Sub AAA()
    Form1.AAA(Nothing) 'cannot refer to itself through its default instance; use 'Me' instead.
  End Sub

  Private Shared Sub AAA(str As String)
  End Sub
End Class 
```

我收到此错误：

> {FORM_CLASS_NAME} 不能通过其默认实例引用自己；改用“我”。

我也在同一行收到此警告：

> 通过实例访问共享成员、常量成员、枚举成员或嵌套类型；将不评估限定表达式。

假设这里是*默认*实例，它会以无限循环结束 - VS 建议更改`Me.AAA()`为`Form1.AAA()`，然后返回。`AAA()`两者都适用。

**转换`Private Sub AAA()`为`Shared`解决错误。**从微软的角度来看，所有的重载都必须共享，如果至少有一个是的话。或者你得到这个默认实例混淆。**为什么？**

为了澄清，我*不想*在这里使用默认实例，只是做一个共享调用。

如果有人遇到同样的情况，请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:29:46.050

创建一个与 Form 类的类型同名的变量别名无疑是 VB.NET 中最严重的一个问题。但是有必要给 VB6 开发人员一个转向 VB.NET 的战斗机会。

解决方法是停止尝试明确说明您要调用的方法。这编译得很好并且是明确的，至少在你的代码片段中：

```
 Private Sub AAA()
       AAA(Nothing)       '' fine
  End Sub 
```

如果那真的很痛，那么只需交换这两种方法即可消除歧义：

```
Private Shared Sub AAA(str As String)
End Sub

Private Sub AAA()
    Form1.AAA(Nothing)    '' fine
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:53:23.517

你能摆脱这个吗？您的用法将`Form1.AAA()`与. 非常相似`code.AAA()`。

```
Public Class Form1

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        code.AAA()
    End Sub

    Private Class code
        Public Shared Sub AAA()
        End Sub
    End Class

End Class 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:08:32.880

**编辑**

鉴于 OP 中的新信息 - 您的问题的另一个解决方案可能是使用可选参数 - 即：

```
Private Shared Sub AAA(Optional ByVal str As String = Nothing) 
```

此外 - 如果您只是更改声明的顺序，则解决方案以“正确”的方式进行 - 这避免了编译器错误：

```
Private Shared Sub AAA(ByVal str As String)
End Sub

Private Sub AAA()
    Form1.AAA(Nothing)
End Sub 
```

## --

*将其保留在下方，因为它在其他情况下可能会有所帮助*

也许您的大型应用程序做了这样的事情 - VB 充满了这样的混乱，您可以让自己陷入其中。这将编译但会崩溃：

```
Public Class Form1

    Private Shared Sub AAA()
        Form1.Text = "this"
    End Sub

    Private Sub Label1_TextChanged(sender As System.Object,  _
                                             e As System.EventArgs) _
                                             Handles Label1.TextChanged
        Form1.AAA()
    End Sub

End Class 
```

同样，这实际上是“好的”（我用这个词很松散）......

```
Public Class Form1
    Private Shared dont As Boolean = True

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) _
                                                      Handles MyBase.Load
        dont = False
    End Sub

    Private Shared Sub AAA()
        If Not dont Then Form1.Text = "this"
    End Sub

    Private Sub Label1_TextChanged(sender As System.Object, _
                                               e As System.EventArgs) _
                                               Handles Label1.TextChanged
        Form1.AAA()
    End Sub

End Class 
```

这是因为文本更改处理程序将在 Form1 完成加载之前触发（即：期间`InitializeComponent()`！）并将引用尚未完成创建的默认实例 - 因此 VB 尝试为您创建一个新实例，以便您可以调用共享方法使您陷入无限循环。

奇怪的是，`Load`处理程序“很好”（再次，松散地）调用`Form1.AAA()`- 就像在您的开始代码中一样 - 因为默认实例（类`Form1`的实例`Form1`）此时已完成创建，并且不会创建另一个以满足称呼。然而，任何其他代码路径，从共享调用开始并最终触及任何实例数据，无论路径多么曲折，都会循环并崩溃。

另请参阅：[为什么在 VB.Net 中每个表单都有一个默认实例，但在 C# 中却没有？](https://stackoverflow.com/q/4698538/327083)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T21:25:11.010

不清楚您要整体完成什么。在 OP Form1.AAA 中应该只是 AAA。

```
Private Sub AAA()
    AAA(Nothing)
End Sub
Private Sub AAA(str As String)
    If str IsNot Nothing Then MsgBox(str) ' else ???
End Sub
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    AAA()
    AAA("hello")
End Sub 
```

# java - BigInteger 量级的最小性

> ID：15363678
> 
> 赞同：3
> 
> 时间：2013-03-12T14:14:56.190
> 
> 标签：java, biginteger, bits

BigInteger 类的[源代码对于 BigInteger](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/math/BigInteger.java#BigInteger)大小的表示必须这么说：

> 此 BigInteger 的大小，按大端顺序排列：此数组的第零个元素是大小中最重要的 int。幅度必须是“最小的”，因为最重要的 int (mag[0]) 必须非零。这对于确保每个 BigInteger 值只有一个表示形式是必要的。请注意，这意味着 BigInteger 零具有长度为零的 mag 数组。

在这种情况下，量级的*最小*化是什么意思？*此外，如何*使最重要的 int 非零确保每个`BigInteger`值的一个表示形式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T14:19:13.560

粗略翻译，这就是说 BigIntegers 在表示中不应该有前导零。使用“最小”一词是因为以这种方式表示的 BigInteger 用最小长度的数组表示（因为除了前导零之外相同的数组将表示相同的 BigInteger，因此不会有“每个大整数值”）。

编辑添加：当然，值 0 可以用长度为 0 的数组表示，从而确保不违反“最重要的 int 不能为零”的要求。

# .net - Crystal Reports 数据集问题

> ID：15363680
> 
> 赞同：0
> 
> 时间：2013-03-12T14:14:58.833
> 
> 标签：.net, crystal-reports, dataset

我在 Visual Studio 2005 中有一个数据集，它使用存储过程作为其数据源。我可以通过右键单击数据集来预览数据，并看到预期的数据。在我的 Crystal Report 中，它使用相同的数据集作为其数据源，我已经重新验证了数据库，我看到新列显示为我在报表中使用的一个选项。我将这个新字段拖到详细信息部分，当我运行报告时，我看不到该特定新列的任何数据。

任何想法为什么？

# xsd - XSD 内部结构相同的两个元素

> ID：15363683
> 
> 赞同：1
> 
> 时间：2013-03-12T14:15:01.963
> 
> 标签：xsd, xml-serialization, xml-deserialization

我正在使用 xsd，试图让它验证 xml。

xml 用于创建对象。列表中的元素可以创建两种类型的对象：SC 和 SMSC。SMSC 是一个 SC，并对其进行了扩展。

SMSC 不包含任何新属性。从 xml 的角度来看，SMSC 在各方面都与 SC 相同，只是定义其属性的元素是用`<SMSC>`标签而不是`<SC>`标签包装的。

我们的 XSD 如下所示：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name='Definitions'>
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element maxOccurs="unbounded" name="SC">
          <!--SNIP properties of SC and SMSC -->
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

除了复制 SMSC 元素中的所有属性定义之外，有没有办法改变它以允许 SC 或 SMSC 作为元素？我们不想将文档的长度加倍并复制所有的属性定义。

就目前而言，我们在 XML 中唯一的验证错误是我们有一个 SMSC 元素。如果在不复制所有属性定义的情况下无法解决此问题，我们将保持原样，但如果可行，我们显然更愿意消除此引发的警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:54:26.873

虽然令人困惑`by tags instead of tags`，但我认为以下内容要么回答您的问题，要么引出更好的解释。

所以，你看到的是避免重复；你实际上并不需要额外的**SMSC**类型（参见**Definitions2**），但我把它放在以防万一（**Definitions**）。使**SC类型的****SMSC**元素的工作方式完全相同。

 ****定义**/**定义**2和**定义**3 之间的区别在于使用替换组而不是选择。我个人更喜欢替代组而不是选择，但遇到与替代组相关的问题并不少见（即它们在这里和那里都没有得到很好的支持）。

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" xmlns="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:complexType name="SC">
        <xsd:sequence>
            <!-- Stuff goes here -->
        </xsd:sequence>
    </xsd:complexType>
    <xsd:complexType name="SMSC">
        <xsd:complexContent>
            <xsd:extension base="SC"/>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="Definitions">
        <xsd:complexType>
            <xsd:choice maxOccurs="unbounded">
                <xsd:element name="SC" type="SC"/>
                <xsd:element name="SMSC" type="SMSC"/>
            </xsd:choice>
        </xsd:complexType>
    </xsd:element>
    <!-- Another way -->
    <xsd:element name="Definitions2">
        <xsd:complexType>
            <xsd:choice maxOccurs="unbounded">
                <xsd:element name="SC" type="SC"/>
                <xsd:element name="SMSC" type="SC"/>
            </xsd:choice>
        </xsd:complexType>
    </xsd:element>
    <xsd:element name="Definitions3">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="SC" maxOccurs="unbounded"/>               
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
    <xsd:element name="SC" type="SC" />                 
    <xsd:element name="SMSC" type="SMSC" substitutionGroup="SC" />              
</xsd:schema> 
```**

# database - JSP 下拉菜单，缩短结果

> ID：15363685
> 
> 赞同：0
> 
> 时间：2013-03-12T14:15:03.543
> 
> 标签：database, forms, jsp, model-view-controller

所以我试图用来自特定数据库的条目填充下拉列表。没错，它可以工作，但是它会放入具有 10 多个属性的 ENTIRE 条目，而我只需要其中的几个。有没有办法指定哪些列被传回并显示在下拉列表中？

```
<tr>
<TD><span class="required">*</span> CMS Group ID:</TD>
<td><form:select path="cmsGroupId">
<form:options items="${list}" itemValue="id" /> 
</form:select>
</td>
<td><form:errors path="cmsGroupId" cssClass="required" /></td>
</tr> 
```

理想情况下，我只想从这里获取前 4 列。（ID、版本、名称、实体 ID）但真的不知道如何使其工作。我在做 ac:foreach 循环时发现了一些东西，但也没有让它正常工作......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:18:52.357

在 Java 端而不是在 JSP 中构建适当的显示值。

不要尝试在视图层中执行此操作 - IMO 它不是此类逻辑的正确位置。

# android - android html 应用程序中的 Youtube 电影

> ID：15363690
> 
> 赞同：1
> 
> 时间：2013-03-12T14:15:16.200
> 
> 标签：android, html, youtube

我正在开发一个带有 html、css 和 javascript 的应用程序，我通过 Phonegap 移植它以在 Android 平板电脑上播放。（android 2.3.1 Gingerbread）一切正常，除了 Youtube 嵌入。

如果我将 iframe 嵌入到我的页面上，我的 youtubescreen 上方没有播放按钮，因此用户不知道他必须按下它。但如果你按下它，电影就会加载到外部安卓视频播放应用程序中。

但这是第二个问题；当电影结束时，外部 android 播放器关闭并返回到我的应用程序，但是我的 youtube 视频屏幕是黑色的 en 有外部播放器的这些丑陋的 android 视频控件。

但我不能用它做任何事情......所以用户不能按电影再次观看。

有人知道如何将 youtube 视频正确地实现到基于 HTML 的 android 应用程序中吗？

它是 HTML，所以 webviews、videoview、intents 和其他东西都不起作用……

我尝试过的事情：

*   iframe 嵌入
*   对象嵌入
*   html5视频嵌入
*   在线嵌入外部页面

但在每次尝试中，那些丑陋的视频控件在视频结束后不断弹出。我也尝试了另一个播放器，但结果相同......任何想法？:-)

# emacs - Emacs - 如何安装和使用dired+？

> ID：15363695
> 
> 赞同：2
> 
> 时间：2013-03-12T14:15:37.390
> 
> 标签：emacs, windows-7, dired

我在 Windows 7 上使用 GNU Emacs 24.2.1。我想使用这些`dired+`功能，但我无法正确加载它们。

文件 dired+.el 存在于我的 lisp 路径中。

我在 Emacs 启动期间加载的配置文件中添加了该行`(require 'dired+)`。

但是当我输入时`C-x d`，在我看来，加载了“正常”的 dired，而不是 dired+。

*   如何判断我使用的是 dired+ 还是 dired？
    它看起来像这样：
    ![在此处输入图像描述](../Images/946c5893225a9fb036d475b08090b47e.png)
*   但是，我*可以*使用以`diredp-`例如（如 dired+ wiki 中所述：[http](http://www.emacswiki.org/emacs/DiredPlus) ://www.emacswiki.org/emacs/DiredPlus ）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:04:30.153

从 dired+.el 标题中的注释来看，dired+ 不会增加通常的 dired 模式显示，而是您必须使用 dired+ 特定的入口点才能进入 dired+ 缓冲区。

```
;;  Additional suggested key bindings:
;;
;; (define-key ctl-x-map   "d" 'diredp-dired-files)
;; (define-key ctl-x-4-map "d" 'diredp-dired-files-other-window) 
```

因此，您将使用一个 for 覆盖通常的`C-x d`键绑定 ( `dired`) `diredp-dired-files`。

# android - 是否可以在 android 的单个页面上同时使用 View 和 Activity？

> ID：15363697
> 
> 赞同：0
> 
> 时间：2013-03-12T14:15:40.660
> 
> 标签：android

我必须设计一个页面，页面的顶部应该有按钮，textview 等。页面的第二部分有一个视图，可以让一些动画球在点击上部按钮时四处移动。

它是我应该使用的相对布局吗？还是表面视图？

我不知道如何继续..有人可以帮忙吗..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:41:00.573

最好的办法是用两个子视图定义布局，一个是自实现的`SurfaceView`类，另一个是`RelativeLayout`or `LinearLayout`，以更适合您的需要为准。查看下面的这个小示例，了解如何创建一个`RelativeLayout`底部附有 a`SurfaceView`且顶部附有 a 的布局。

```
public void setupContentView() {
    RelativeLayout layout = new RelativeLayout(this);

    MySurfaceView mySurfaceView = new MySurfaceView(this);
    RelativeLayout xmlLayout = (Relativelayout) View.inflate(this, 
        R.layout.my_xml_file, null);

    int xmlId = 0x1234;
    xmlLayout.setId(xmlId);

    RelativeLayout.LayoutParams xmlParams= new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.MATCH_PARENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    xmlParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    xmlParams.addRule(RelativeLayout.CENTER_HORIZONTAL);

    RelativeLayout.LayoutParams surfaceViewParams= new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    surfaceViewParams.addRule(RelativeLayout.BELOW, xmlId);
    surfaceViewParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);

    layout.addView(xmlLayout, xmlParams);
    layout.addView(mySurfaceView, surfaceViewParams);

    setContentView(layout);
} 
```

这会创建一个从名为的 xml 文件扩展的布局`my_xml_file`，名称为`xmlLayout`. 它还创建了一个自我实现的`SurfaceView`类`MySurfaceView`，它调用它`mySurfaceView`。然后，它将使用该类的参数设置`RelativeLayout.LayoutParams`为两种布局。它将`mySurfaceView`下面的`xmlLayout`和两个高度都设置为，如果 xml 高度 = 0 `WRAP_CONTENT`，这将使`mySurfaceView`整个屏幕占据整个屏幕，反之亦然。然后，您可以在`MySurfaceView`课堂上以通常的方式进行绘制，并且可以根据需要设置 xml 文件。

祝你好运！很想听到任何成功的消息。

# objective-c - 更改分配给数组中 UIImageView 的 UIImage

> ID：15363700
> 
> 赞同：0
> 
> 时间：2013-03-12T14:15:43.540
> 
> 标签：objective-c, algorithm, nsmutablearray

我有一个 NSMutableArray，我用这样的 UIImageViews 填充：

```
NSMutableArray *digitArray;

spaces = [[NSMutableArray alloc] initWithCapacity:16];

[spaces addObject:space1];
[spaces addObject:space2];
[spaces addObject:space3];
[spaces addObject:space4];
[spaces addObject:space5];
[spaces addObject:space6];
[spaces addObject:space7];
[spaces addObject:space8];
[spaces addObject:space9];
[spaces addObject:space10];
[spaces addObject:space11];
[spaces addObject:space12];
[spaces addObject:space13];
[spaces addObject:space14];
[spaces addObject:space15];
[spaces addObject:space16]; 
```

然后我为每个 UIImageViews 分配一个图像，如下所示：

```
[(UIImageView *)spaces[0] setImage:one];
[(UIImageView *)spaces[1] setImage:two];
[(UIImageView *)spaces[2] setImage:three];
[(UIImageView *)spaces[3] setImage:four];
[(UIImageView *)spaces[4] setImage:five];
[(UIImageView *)spaces[5] setImage:six];
[(UIImageView *)spaces[6] setImage:seven];
[(UIImageView *)spaces[7] setImage:eight];
[(UIImageView *)spaces[8] setImage:nine];
[(UIImageView *)spaces[9] setImage:ten];
[(UIImageView *)spaces[10] setImage:eleven];
[(UIImageView *)spaces[11] setImage:twelve];
[(UIImageView *)spaces[12] setImage:thirteen];
[(UIImageView *)spaces[13] setImage:fourteen];
[(UIImageView *)spaces[14] setImage:fifteen];
[(UIImageView *)spaces[15] setImage:sixteen]; 
```

因此，将此作为我的默认组合，然后我希望能够随机更改分配给哪个 UIImageVIew 的图像。任何人都可以建议这样做的方法吗？

提前致谢！

乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:22:36.213

认为这应该这样做

```
NSMutableArray *temp = [[NSMutableArray alloc] init];
while(space.count > 0){

    int index = arc4random_uniform(space.count);
    [temp addObject:[spaces objectAt:index]];
    [space removeObjectAtIndex:index];
}

spaces = temp; 
```

havnt 测试了代码，但它从空间中获取 1 个随机 ImageView 并将其放入一个临时数组中，然后一旦将空间中的所有对象放入 temp 中，它就会将其分配回空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:54:27.283

`numbers`对于任何感兴趣的人，我通过创建第二个数组并用图像填充它来实现我想要的。然后我随机化了第二个数组：

```
 for (int i = 0; i < 16; i++) {
    int j = arc4random() % 16;
    [numbers exchangeObjectAtIndex:i withObjectAtIndex:j];
} 
```

然后我将第一个数组中各种 UIImageViews 的图像分配为第二个数组的图像

```
 [(UIImageView *)spaces[0] setImage:numbers[0]];
     [(UIImageView *)spaces[1] setImage:numbers[1]];
     .... etc 
```

由于数字数组的混淆，等的内容`numbers[0]`每次`numbers[1]`都会有所不同。

不过还是谢谢大家的回答！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:57:31.670

```
UIImageView *firstImage = [spaces objectAtIndex:arc4random_uniform(16)];

UIImageView *secondImage = [spaces objectAtIndex:arc4random_uniform(16)];

UIImageView *tempImage = firstImage;

firstImage.image = secondImage.image;

secondImage.image = tempImage.image; 
```

不过可能有更短的方法。但这应该可以解决问题。随机意味着，两个图像可能相同。这并没有什么坏处，但实际上什么都不会改变。

# coldfusion - cfmodule 与 firefox 的错误结果

> ID：15363701
> 
> 赞同：-1
> 
> 时间：2013-03-12T14:15:52.157
> 
> 标签：coldfusion, fckeditor

在coldfusion 8中，我使用下面的代码来查看数据库表中的“UserDesc”字段数据，该数据在IE和chrome上运行良好，但在Firefox上不运行。在 Firefox 上，它不会显示在 fckeditor 上，而是显示在 textarea 上。请建议对代码进行任何更改。

```
<cfmodule
                template="fckeditor/fckeditor.cfm"
                basePath="../views/fckeditor/"
                instanceName="Question"
                value='#UrlDecode(UserDesc)#'
                width="530"
                height="260"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:31:51.473

在 Coldfusion 中使用 ckeditor 有一些更新的方法。您可以只使用以下内容（这可能只是 cf9+，我不确定）：

```
 <cftextarea name="Question" id="Question" 
        richtext="yes" 
        value="#UrlDecode(UserDesc)#">
    </cftextarea> 
```

或者你可以只使用这里演示的javascript（这应该适用于任何版本的coldfusion）：[http](http://ckeditor.com/demo) ://ckeditor.com/demo你只需将你的值放在开始和结束文本区域标签之间.

# java - 如何在 Java Swing 中编写这个 GUI

> ID：15363706
> 
> 赞同：4
> 
> 时间：2013-03-12T14:15:57.737
> 
> 标签：java, swing, user-interface, layout-manager

我目前正在开发一个带有以下 GUI 的小实用程序：

![示例 GUI](../Images/5ce1a0c2c09f0b0822d6e01e86395b97.png)

现在我有一个带有 BorderLayout 布局的容器（JPanel），它可以将所有东西都放在适当的位置。我在 BorderLayout.NORTH 和 BorderLayout.SOUTH 上分别放置了另外 2 个 JPanel，每个都有 GridLayout（2 列乘 1 行）。该表位于放置在其中心的主容器上。

你认为这是最好的方法吗？我在处理组件和框架边框之间的间距时遇到了困难。

现在我有这个代码：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import javax.swing.JTable;
import javax.swing.SwingUtilities;

public class GUI extends JFrame {

    private JButton loadFileBtn = new JButton("Load File");
    private JButton generateReportBtn = new JButton("Generate Report");
    private JButton exitBtn = new JButton("Exit");
    private JLabel fileNameLbl = new JLabel("File Name Here");
    private JMenuBar menuBar = new JMenuBar();
    private JMenu fileMI = new JMenu("File");
    private JMenuItem openFileMenu = new JMenuItem("Open File");
    private JSeparator separator = new JSeparator();
    private JMenuItem exitMenu = new JMenuItem("Exit");
    private JMenu reportMI = new JMenu("Report");
    private JMenuItem generateReportMenu = new JMenuItem("Generate Report");
    private JMenu helpMI = new JMenu("Help");
    private JMenuItem aboutMenu = new JMenuItem("About");
    private JTable table = new JTable(5, 2);
    private JPanel mainPanel = new JPanel(new BorderLayout(10, 10));
    private JPanel panel1 = new JPanel(new BorderLayout());
    private JPanel panel2 = new JPanel(new GridLayout(1, 2));
    private JPanel panel3 = new JPanel(new GridLayout(1, 2));

    public GUI() {

        super("Sample GUI");

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(new Dimension(300, 300));
        setResizable(false);

        setLayout(new BorderLayout(10, 10));

        fileMI.add(openFileMenu);
        fileMI.add(separator);
        fileMI.add(exitMenu);

        reportMI.add(generateReportMenu);

        helpMI.add(aboutMenu);

        menuBar.add(fileMI);
        menuBar.add(reportMI);
        menuBar.add(helpMI);

        setJMenuBar(menuBar);

        panel1.add(table, BorderLayout.CENTER);

        panel2.add(fileNameLbl);
        panel2.add(loadFileBtn);

        panel3.add(generateReportBtn);
        panel3.add(exitBtn);

        mainPanel.add(panel2, BorderLayout.NORTH);
        mainPanel.add(panel1, BorderLayout.CENTER);
        mainPanel.add(panel3, BorderLayout.SOUTH);

        add(mainPanel);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                GUI app = new GUI();
                app.setVisible(true);
            }
        });
    }
} 
```

您认为最好的方法是什么？

任何帮助，将不胜感激。谢谢。

**更新：**

现在，我有以下 GUI

![在此处输入图像描述](../Images/502bb774272855b6f42fb4a4daeb8282.png)

我希望组件均匀地远离边界，就像在模型中一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:18:58.383

过去，我发现使用[MigLayout](http://www.miglayout.com/)可以解决我所有的问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T14:36:40.673

您可以使用 2 件事来实现这一点：

1.  采用`BorderFactory.createEmptyBorder(int, int, int, int)`
2.  使用 4-args 构造函数`GridLayout`

还有其他 LayoutManager 可以带来相同的功能（例如`GridBagLayout`，或使用嵌套`BorderLayout`），但是如果您对当前的 感到满意`LayoutManager`，则无需更改这些。你的做法也是可以接受的。

![在此处输入图像描述](../Images/14dc3aafed502379dde53cacebfbe33b.png)

您可能会考虑将表格包装在 a`JScrollPane`中以使其更好，如果需要，可以使用标题和滚动条。

小示例代码：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import javax.swing.JTable;
import javax.swing.SwingUtilities;

public class GUI extends JFrame {

    private JButton loadFileBtn = new JButton("Load File");
    private JButton generateReportBtn = new JButton("Generate Report");
    private JButton exitBtn = new JButton("Exit");
    private JLabel fileNameLbl = new JLabel("File Name Here");
    private JMenuBar menuBar = new JMenuBar();
    private JMenu fileMI = new JMenu("File");
    private JMenuItem openFileMenu = new JMenuItem("Open File");
    private JSeparator separator = new JSeparator();
    private JMenuItem exitMenu = new JMenuItem("Exit");
    private JMenu reportMI = new JMenu("Report");
    private JMenuItem generateReportMenu = new JMenuItem("Generate Report");
    private JMenu helpMI = new JMenu("Help");
    private JMenuItem aboutMenu = new JMenuItem("About");
    private JTable table = new JTable(5, 2);
    private JPanel mainPanel = new JPanel(new BorderLayout(10, 10));
    private JPanel panel1 = new JPanel(new BorderLayout());
    private JPanel panel2 = new JPanel(new GridLayout(1, 2, 10, 10));
    private JPanel panel3 = new JPanel(new GridLayout(1, 2, 10, 10));

    public GUI() {

        super("Sample GUI");

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(new Dimension(300, 300));
        setResizable(false);

        setLayout(new BorderLayout(10, 10));

        fileMI.add(openFileMenu);
        fileMI.add(separator);
        fileMI.add(exitMenu);

        reportMI.add(generateReportMenu);

        helpMI.add(aboutMenu);

        menuBar.add(fileMI);
        menuBar.add(reportMI);
        menuBar.add(helpMI);

        setJMenuBar(menuBar);

        panel1.add(table, BorderLayout.CENTER);

        panel2.add(fileNameLbl);
        panel2.add(loadFileBtn);

        panel3.add(generateReportBtn);
        panel3.add(exitBtn);

        mainPanel.add(panel2, BorderLayout.NORTH);
        mainPanel.add(panel1, BorderLayout.CENTER);
        mainPanel.add(panel3, BorderLayout.SOUTH);
        mainPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        add(mainPanel);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                GUI app = new GUI();
                app.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T14:36:23.307

以下是我将如何安排您的 GUI。这只是一种方式。这不是唯一的方法。

*   进入`JTable`一个`JScrollPane`.

*   `Button2`并`Button3`进入一个`JPanel`带有`FlowLayout`.

*   `Label`并`Button1`进入`JPanel`带有`FlowLayout`.

*   文件、报告和帮助`JMenuItem`位于`JMenuBar`.

*   主要`JPanel`有`BoxLayout`一个 Y_AXIS 方向。

*   将 label `JPanel`、 the`JScrollPane`和 button添加`JPanel`到 main `JPanel`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T14:20:24.163

创建 GUI 的最佳方式是以您和其他人都能理解的方式编写代码。看看这份[布局管理器指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。您可以为不同的组件使用不同的布局管理器。这将帮助您设置正确的间距。

如果您的问题只是组件周围的间距，请设置它的[Insets](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Insets.html)。

# mongodb - 流星MongoDB数据库在哪里？

> ID：15363710
> 
> 赞同：12
> 
> 时间：2013-03-12T14:16:11.240
> 
> 标签：mongodb, meteor

当我创建一个流星应用程序时，数据库在哪里？

我有一个名为排行榜的应用程序，但是当我运行 mongo shell 时，`show dbs`我只看到`local (empty)`，`test`但测试没有与我的排行榜应用程序具有相同的内容。流星在哪里创建 Mongo 数据库以及如何从 mongo shell 访问它（以便我可以将一些数据加载到其中）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T19:13:03.853

您需要在一个会话中使用 meteor run 命令运行应用程序，此时您可以在同一台机器上的另一个会话中运行 mongo meteor ，其中包括类似

```
[kfullert@shotgun ]$ meteor mongo
MongoDB shell version: 2.2.1
connecting to: 127.0.0.1:3002/meteor 
```

此时，您可以将“连接到”行中的 URL 与标准 mongo 工具一起使用（警告 - 您需要同时使用流星运行项目，因为“流星运行”是启动 mongo 服务器的原因为您的项目

```
[kfullert@shotgun ]$ mongo 127.0.0.1:3002/meteor
MongoDB shell version: 2.2.3
connecting to: 127.0.0.1:3002/meteor
> 
```

对于 mongoimport，您可能需要以下内容：

```
[kfullert@shotgun ]$ mongoimport -h 127.0.0.1 --port 3002 -d meteor 
```

此外，通过使用项目根目录中的以下开关（未经测试，请注意），可以在不运行流星的情况下运行 mongoimport

```
mongoimport --dbpath .meteor/local/db -d meteor 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-03-23T05:13:45.983

对于运行本地数据库服务器的应用程序，APPDIR/.meteor/local/db

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-12T14:28:13.887

您可以连接到您的应用程序的 mongodb，[`meteor mongo`](http://docs.meteor.com/#meteormongo)然后我们`show collections`列出`Meteor.Collection`您创建的 s。

# jquery-ui - 如何使 jQuery UI droppable hoverClass 仅适用于可拖动对象？

> ID：15363717
> 
> 赞同：2
> 
> 时间：2013-03-12T14:16:42.407
> 
> 标签：jquery-ui, hover, draggable, jquery-ui-sortable, droppable

我有一个可排序和可放置的列表，还有一组单独的可拖动列表：

```
ul.sortable
    li.droppable
    li.droppable
    li.droppable
/ul
ul
    li.draggable
    li.draggable
    li.draggable
/ul 
```

我在 droppables 上应用了一个悬停类：

```
$(".droppable").droppable({ hoverClass: "hover" }); 
```

悬停应该是用户的视觉提示，告诉他可以将可拖动对象拖放到可放置对象上。

问题是悬停类也适用于可放置元素也被可排序元素悬停时。在这种情况下，视觉提示是完全错误的。

这是一个说明问题的小提琴（将可拖动对象拖到可排序对象上，重新排序可排序对象）：http: [//jsfiddle.net/TWXeH/](http://jsfiddle.net/TWXeH/)

我如何使悬停类仅在可拖放对象上有可拖动而不是可排序时才起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T23:04:06.583

您正在寻找接受选项

```
$(".droppable").droppable({
    hoverClass: "hover",
    accept: ".draggable"
}); 
```

# c# - 使用 ASP.NET MVC 4 ActionFilter 审核日志记录

> ID：15363721
> 
> 赞同：1
> 
> 时间：2013-03-12T14:16:52.047
> 
> 标签：c#, entity-framework, asp.net-mvc-4, audit-logging

我正在使用 ASP.NET MVC 4 构建一个 Web 应用程序，数据存储由 T-SQL 数据库通过实体框架提供。我正在集成审计日志，我想提供一个很好的人类可读的操作摘要，以便我可以提供一个友好的日志视图，其中包含清晰的语句，如“用户 Bob 已登录”、“用户 Alice更新文章'Foo'”等。

审计记录目前包括：

*   图形用户界面
*   时间戳
*   用户身份
*   动作类别（控制器名称）
*   动作（动作方法名称）
*   IsError（布尔值；true 表示这是错误记录，或者此操作未成功完成）
*   序列化细节的blob

目前，我的日志记录使用实现的自定义属性`IActionFIlter`；该`OnActionExecuting()`方法记录尝试的操作（将 URL、参数等内容序列化到详细信息 blob），`OnActionExecuted()`如果没有错误，该方法返回并将 IsError 设置为 true，并将返回的结果或异常附加错误消息和堆栈跟踪等到细节。我想为描述字符串添加另一列，但我看不到一个整洁的方法。

我得到的最远的是将一个字符串传递给属性，例如“用户$用户登录”，然后让日志方法扫描字符串中的 $ 字符并用参数字典中键值匹配的任何内容替换该单词单词（减去 $ 字符）。这有点有限；例如，如果文章是按 ID 号存储的，那么您可以管理的最好是“用户 18 编辑文章 37”。没有真正的方法可以获取用户名或文章标题；您不能将实例数据传递给属性，因为它是在编译时烘焙的，而且我真的不希望我的日志记录方法进行各种数据库调用来获取那种数据，尤其是因为它变得不可能（或至少是真正的痛苦）拥有一个通用的日志记录方法。

所有这一切的替代方法是拥有一个静态审计日志记录类并`AuditRecord.WriteLog(foo);`在各处调用类似的东西，也许使用某种描述符类我可以使用（或继承自）来描述不同类型的操作，存储所有参数并生成根据需要提供描述字符串，但对我来说似乎不太优雅；我真的很喜欢能够标记`[AuditLog]`一个方法并知道它会被记录下来。

我想避免大量的条件逻辑，比如在一些大的 switch 语句中使用控制器和动作名称来选择正确的字符串模板。如果我可以在日志记录方法中获取诸如文章标题之类的东西，那就没问题了。有没有一种简洁、简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:12:02.977

我们最近在工作中就日志审计历史和在我们的新 MVC 项目中应用更复杂的安全规则进行了类似的讨论。

最后，我们提出的最“优雅”的解决方案是在控制器操作中调用方法（您的替代方法）。

例如：

```
[HttpPost]
public ActionResult CreateItem(Item item)
{
    //Simplified
    CheckSecurity(SecurityTypes.ItemCreation);
    LogActivity("Created an item");

    //Rest of action code

} 
```

这使我们能够灵活地考虑所有可能的用例，并使我们能够将逻辑包装成简单易用的方法以减少代码重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-10T21:29:09.550

回答可能为时已晚，但我认为有一个很好的选择来继续使用操作过滤器属性并能够访问每个请求的生命周期对象。

正如*anaximander*上面指出的那样，根本问题是属性由 CLR 解决，因此它们的生命周期无法控制，并且它们不能与 IoC 容器很好地混合（使它们成为瞬态的，每个请求实例等）。

通常，在 .NET**中，每次通过反射**（`GetCustomAttribute`方法）解析属性时都会创建一个新的属性实例。

此外，**在 MVC/webapi 的情况下，动作过滤器属性是缓存的**，因此它们通常只创建一次。

**结论是属性被设计为仅用于注释，换句话说，它们应该只包含元数据**（它们是 DTO）。不幸的是，我的理解是 MVC 和 WebApi 框架不是这样设计的。为了将动作过滤器属性限制为简单的 DTO，并能够管理它们周围逻辑部分的生命周期，必须采取特殊的方法。

我认为您的用例非常适合 Steven van Deursen 的[精彩文章](https://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=98)中提供的解决方案。它演示了如何从逻辑中分离属性数据，它基于全局注册的动作过滤器，即所谓的“调度程序”，以 ioc 容器作为依赖项。 **容器不是静态解析的**. 它是在应用程序初始化时注册的全局过滤器的构造函数中提供的。因此，每次执行时，它都会查找正在执行的操作上的任何属性标记，并解析一个通用接口，其中属性是通用参数。您最终会使用两个类，而不是使用合并数据和行为的操作过滤器属性：一个普通的旧属性 - 标记 - 以及其逻辑对应物的通用接口的相应实现。容器用于解析通用接口。如果您的过滤器依赖于每个请求的组件，您可以使用您需要的服务创建通用接口的实现。如果它不依赖于其他服务，但您需要每个请求的生命周期（例如测量动作开始和结束之间的时间），它也可以完成这项工作，这要归功于使用容器来解决泛型界面。上述文章包含 WebApi、MVC 和 ASP.NET 5 的代码示例。

此外，Mark Seemann 也发表[了一篇](http://blog.ploeh.dk/2014/06/13/passive-attributes/)关于相同方法的文章。

我认为它不能为所有情况提供一个好的解决方案，比如授权过滤器和异常过滤器，但对我来说，它是许多操作过滤器最优雅的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-10T21:51:09.883

更好的方法是在查看这些数据时对其进行格式化，而不是在记录过程中构建这些内容。

如果操作是“登录”，并且记录的用户可用（您应该这样做），那么您在查看器中构建该消息。

因此，您记录所有原始事件，然后根据这些更具描述性的数据构建“视图模型”或“读取模型”。如果您想更改其描述，这甚至可以让您重新解析所有原始数据。您可以记录大量尚未使用的数据，以便稍后在描述中实现它。

IMO，以这种方式在动作中喷洒方法似乎不是一个好主意，控制器或基本控制器上的动作过滤器更干净。如果你想这样做，你可以使用 AOP（面向方面​​编程）框架来避免横切......

# plone - 如何在层次结构中查找特定对象

> ID：15363727
> 
> 赞同：2
> 
> 时间：2013-03-12T14:17:04.420
> 
> 标签：plone

我正在尝试获取层次结构上的特定对象来设置自定义索引。我通常使用 request.PARENTS 获取对象

```
def getHierarchyObject(obj):
    cparents = obj.request.get('PARENTS')
    for cparent in cparents:
        if cparent.Type() == u'SpecificType':
            return cparent
    return false 
```

但是设置索引不起作用，父母的请求是空的。我在此链接之后创建了索引：http: [//plone.org/products/dexterity/documentation/manual/developer-manual/advanced/catalog](http://plone.org/products/dexterity/documentation/manual/developer-manual/advanced/catalog)

我需要爬上所有级别`aq_parent()`才能找到对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:28:37.030

`PARENTS`在请求中是遍历以获取已发布对象的对象序列。

如果您需要索引您的对象，则不能依赖该值，因为它们不会被发布。

而是使用他们的获取链：

```
from Acquisition import aq_inner, aq_chain

def getParentObject(obj, type):
    for parent in aq_chain(aq_inner(obj)):
        if parent.Type() == type:
            return parent 
```

# apache - 使用 htaccess 将所有子页面重定向到另一个子页面

> ID：15363731
> 
> 赞同：3
> 
> 时间：2013-03-12T14:17:14.747
> 
> 标签：apache, .htaccess

我有一个在 Apache Server 中运行的旧站点，该站点已在 Google 中编入索引。我希望将所有这些索引链接重定向到我的新站点（因为旧页面不再存在。）

所以我希望将我所有的子页面重定向到我的新根页面

我有如下页面

```
http://itdost.com/answer-now/Aerobics
http://itdost.com/answer-now/HTML
http://itdost.com/answer-now/Culture 
```

我为每个使用以下重定向代码

```
Redirect 301 /answer-now/Engineering http://www.itdost.com/questions/
Redirect 301 /answer-now/Food http://www.itdost.com/questions/
Redirect 301 /answer-now/ASP http://www.itdost.com/questions/ 
```

但是由于站点结构很大，我希望在一行中完成，而不是为每个重定向写一行

像下面这样的东西。

```
Redirect 301 /answer-now/% http://www.itdost.com/questions/ 
```

但是上面的代码似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:29:15.210

试试这个：

```
RedirectMatch 301 ^/answer-now/ http://www.itdost.com/questions/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:46:00.203

为了更好地使用正则表达式，请使用比 mod_alias 更强大的 mod_rewrite。

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^answer-now(/.*|)$ http://www.itdost.com/questions/? [L,NC,R=301] 
```

# java - 如何从 JSON 对象数组创建目录结构

> ID：15363734
> 
> 赞同：2
> 
> 时间：2013-03-12T14:17:27.733
> 
> 标签：java, json

我有一个 JSONObjects(org.json.JSONObject) 的 JSONArray(org.json.JSONArray) 像

```
[
    {"id":"abc", "parent_id":""},
    {"id":"def", "parent_id":"abc"},
    {"id":"ghi", "parent_id":""},
    {"id":"jkl", "parent_id":"abc"},
    {"id":"mno", "parent_id":"ghi"},
    {"id":"mno", "parent_id":"def"},
] 
```

这里“id”字段代表对象的唯一id，“parent_id”代表它的父对象的id。我必须将此 JSONArray 转换为另一个 JSONArray，在其中我可以将元素嵌套在其父级（类似结构的目录）中，例如

```
[
    {"id":"abc", "parent_id":"","children":[
        {"id":"def", "parent_id":"abc","children":[
            {"id":"mno", "parent_id":"def","children":[]}
        ]},
        {"id":"jkl", "parent_id":"abc","children":[]}
    ]},
    {"id":"ghi", "parent_id":"","children":[
        {"id":"mno", "parent_id":"ghi","children":[]}
    ]},
] 
```

任何人都可以在这里帮助我，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:26:27.427

你会有这样的东西（伪代码）

```
// Element is { id, children }
Dictionary<String, Element> elements;

for (JSONObject obj : arr) {
    if (elements.hasKey(obj.id)) {
        // Maybe you need to update your element or something here
    } else {
        // Create your element
        elements[obj.id] = new Element(obj.id);
    }

    // if the parent does not exist, create a shadow of the parent
    // (it'll get filled in with more info above if encountered later)
    if (!elements.hasKey(obj.parent)) {
        elements[obj.parent] = new Element(obj.parent);
    }

    // Add yourself to children
    elements[obj.parent].children.push(elements[obj.id]);
}

// TODO: iterate your dictionary and put it into an array, this should be straightforward
// Or if you want the root of your tree return elements[""] 
```

我提前道歉，因为没有更具体，但这应该适用于你想做的任何事情。它也不是 Java，但很容易转换。

# java - 编译时，我收到错误：“无法访问的语句”。我该如何解决这个问题？

> ID：15363735
> 
> 赞同：0
> 
> 时间：2013-03-12T14:17:31.150
> 
> 标签：java, object, methods

```
public double Convertir(double Number) {
    Number = nombre;
    while ((Number - 365) >= 0) {
        annee += 1;   //this calculates the number of years    
    }
    return annee;
    double nombreSemaine = Number - (annee * 365);
    while ((nombreSemaine - 7) >= 0) {
        semaine = semaine + 1;
    }//this calculates the number of weeks
    return semaine;
    double nombreJour = Number - (annee * 365) - (semaine * 7);
    nombreJour = jour;
    return jour;
} 
```

使用此代码，我试图将用户编写的数字（天数）转换为它所产生的年数、周数和天数。例如，数字 365 应返回 1 年 0 周 0 天。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T14:20:16.923

`return annee;` returns `annee` so anything after this expression in the method won't get executed.

Perhaps you could return an `Array` instead:

```
public double[] Convertir(double Number) {
    Number = nombre;
    double[] all = new double[3];
    while ((Number - 365) >= 0) {
        annee += 1;   //this calculates the number of years    
    }
    all[0] = annee;
    double nombreSemaine = Number - (annee * 365);
    while ((nombreSemaine - 7) >= 0) {
        semaine = semaine + 1;
    }//this calculates the number of weeks
    all[1] = semaine;
    double nombreJour = Number - (annee * 365) - (semaine * 7);
    nombreJour = jour;
    all[2] = jour;

    return all
} 
```

or something similar. An `ArrayList` would probably be better...but it's the same general concept.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T14:21:08.757

The code below `return annee;` won't be executed.

It looks like you want to return 3 values. You can only return 1 value, a `double` in this case.

**Solution 1 (Global variables):**

```
int annee, semaine, jour; //global variables

public void Convertir(int Number) { //I guess number should be an Int too, unless it's possible to pass 567.28 days...
    //Number = nombre; Useless since this is a parameter
    annee = (int)(Number/365);
    semaine = (int)((Number - annee * 365)/7);
    jour = Number - annee * 365 - semaine * 7;
} 
```

**Solution 2 (return an array):**

```
public int[] Convertir(int Number) { //I guess number should be an Int too, unless it's possible to pass 567.28 days...
    //Number = nombre; Useless since this is a parameter
    int[] anneeSemaineJour = new int[3];
    anneeSemaineJour[0] = (int)(Number/365);
    anneeSemaineJour[1] = (int)((Number - anneeSemaineJour[0] * 365)/7);
    anneeSemaineJour[2] = Number - anneeSemaineJour[0] * 365 - anneeSemaineJour[1] * 7;

    return anneeSemaineJour;
} 
```

**You will then use it like this (Solution 2):**

```
int[] resultat = convertir(822); // convertir(nombre) in your case I guess
System.out.println("Annee = " + resultat[0] + " Semaine = " + resultat[1] + " Jour = " + resultat[2]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-12T14:20:36.057

The problem is you have code (including another `return`) after a `return` statement. A `return` statement stops the function at that place and returns the value. Anything after that is unreachable.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T14:28:08.050

您的代码存在许多问题。

除了其他人所说的（**下面的所有内容都`return`不会被执行**）你应该小心你的`while`循环，它们是无限循环：

```
while ((Number - 365) >= 0) {
        annee += 1;   //this calculates the number of years    
} 
```

如果`Number - 365 >= 0`那时你在里面`while`并且你正在添加`1`到`annee`，这不会停止循环，因为`Number - 365 >= 0`会继续得到满足。

你的第二个循环也是如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T14:27:38.707

“return”退出该方法。如果您想返回所有这些（年、月、日），您可以使用数组。您的代码通常有很多错误，并且多次对 nombre（或您拥有的 Number）进行了类似的操作。我试图使代码可运行。

```
public double[] Convertir(double nombre) {
    double[] yearsWeeksAndDays = new double[3];
    double annee = 0;
    double semaine = 0;
    while (nombre >= 365) {
        annee += 1;   //this calculates the number of years
        nombre -= 365;    
    }
    yearsWeeksAndDays[0] = annee;
    while (nombre >= 7) {
        semaine = semaine + 1;
        nombre -= 7;
    }//this calculates the number of weeks
    yearsWeeksAndDays[1] = semaine;
    yearsWeeksAndDays[2] = nombre;
    return yearsWeeksAndDays;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T14:29:23.977

您需要将 3 个返回值包装成 a`class`并返回它。像这样的东西应该可以工作：

```
public static void main(String[] args) {
    System.out.println(convertir(365));
    System.out.println(convertir(366.5));
    System.out.println(convertir(456));

}

static class Duration {

    int years;
    int weeks;
    double days;

    @Override
    public String toString() {
        return years + " years, " + weeks + " weeks and " + days + " days.";
    }
}

public static Duration convertir(double total) {
    final Duration duration = new Duration();
    duration.years = (int) (total / 365);
    total = total % 365;
    duration.weeks = (int) (total / 7);
    total = total % 7;
    duration.days = total;
    return duration;
} 
```

输出：

```
1 years, 0 weeks and 0.0 days.
1 years, 0 weeks and 1.5 days.
1 years, 13 weeks and 0.0 days. 
```

显然它需要一点翻译，但法语不是我的强项。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-12T14:33:42.920

它抛出无法访问的代码，因为编译器知道当控件到达该返回语句时，它会返回并且不会执行更多代码。要解决这个问题，您可以做的是，将返回语句放在条件块中，就像我有如下所示，但同样，这个程序不会返回你想要的结果。它只会返回一年。如果你想要整个结果，即。年数 + 周数 + 天数 我建议您对单个字符串做出整个答案并返回。

```
public double Convertir(double Number) {
        // Number = nombre;
        double annee = 0;
        double semaine = 0;
        double jour = 0;
        while ((Number - 365) >= 0) {
            annee += 1; // this calculates the number of years
        }
        if (annee > 0) {
            return annee;
        }
        double nombreSemaine = Number - (annee * 365);
        while ((nombreSemaine - 7) >= 0) {
            semaine = semaine + 1;
        }// this calculates the number of weeks
        if (semaine > 0)
            return semaine;

        double nombreJour = Number - (annee * 365) - (semaine * 7);
        nombreJour = jour;
        return jour;
    } 
```

# c - 如何在纯 C 中使用 precomposedStringWithCanonicalMapping 和 CFStringref

> ID：15363736
> 
> 赞同：0
> 
> 时间：2013-03-12T14:17:31.907
> 
> 标签：c, macos, cocoa, nsstring, cfstring

我需要在 Mac Os X 中解析最近文件的默认数据库。这是通过 sed 完成的。需要注意的是，文件名存储在里面的分解的 utf-16 中。

所以，我想，（在被指向 NSString 函数之后）“我为什么不做一个小工具来处理它”。

该工具应该基本上像 cat 一样工作，它从输入中获取行，它将每一行转换为 CFStringref 对象，在**希望**将 CFStringref转换为预先组合的 UTF-16 之前，我将其转换回 UTF-8，并打印它。

我讨厌这么说，但我不知道这种“免费桥接”是否有效，我无意为此使用 Cocoa 和 Objective C，我只想使用 CFStringref 直接解决，也就是说，如果这样的解决方案存在！

谢谢！

这是我到目前为止所得到的：

```
#define BUFFERSIZE 512                
static void 
precomposedOutput( char *fn )
{
  char buffer[BUFFERSIZE] ;
  CFStringRef str ;
    char *outbuf;
    char *bytes ;
  FILE *fd = stdin ;
  if (fn) {
      fd = fopen(fn,"r");
   }
  while ( fgets(buffer, sizeof(buffer),fd ) ) {
      bytes = savestr(buffer) ;
      str = CFStringCreateWithCStringNoCopy(NULL, bytes,kCFStringEncodingUTF8, NULL);
      /* CONVERSION INTO PRECOMPOSED IS SUPPOSED TO HAPPEN HERE */
      outbuf = Copy_CFStringRefToCString(str) ;
      CFRelease(str) ; 
     fputs(outbuf,stdout) ;
     free(outbuf) ;         
  }
} 
```

到目前为止，这似乎在来回转换方面有效（而不是在其上运行**泄漏**。）我需要帮助的是将 CFString 转换为预先组合的 UTF-16。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:30:42.893

也许我错了，但我通过阅读“免费桥接”的文档发现并非 NSString 的所有方法都可以在 CFString 中使用。

所以我转向了 Cocoa/Objective-C，这就是我最终的结果。

```
static void 
precomposedOutput( char *fn )
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    char buffer[BUFFERSIZE] ;
    char *outbuf;
    FILE *fd = stdin ;
    if (fn) {
        fd = fopen(fn,"r");
    }
    while ( fgets(buffer, sizeof(buffer),fd ) ) {
        NSString *str = [[NSString alloc] initWithUTF8String:buffer];
        NSString *str_precomp = [[NSString alloc ] initWithString:[str precomposedStringWithCanonicalMapping]] ;
        outbuf = (char *)[str_precomp UTF8String] ;
        [str release ] ; 
        [str_precomp release ] ;
        fputs(outbuf,stdout) ;
    }
    [pool drain];
} 
```

好吧，它有效，但我的基本问题是，由于字符串已经通过管道，分解的字符存储在多个字节中，前面有像“\\U”这样的文字字符串。与此同时，编写了 Applescript 中的例程，这比使用“工具”来完成这项工作要简单得多。（[http://macscripter.net/viewtopic.php?pid=161135#p161135](http://macscripter.net/viewtopic.php?pid=161135#p161135)）

结案。

# ios - 如何在 UITextfiled 中显示逗号分隔值和小数值？

> ID：15363743
> 
> 赞同：-4
> 
> 时间：2013-03-12T14:17:50.137
> 
> 标签：ios, uitextfield, nsnumberformatter

当用户以下面提到的所需格式输入文本时，我需要格式化文本。

1）当用户输入**0**作为第一个字符时，文本字段应显示文本为**0.00**

2）当用户输入**1**作为第二个字符时，文本字段应显示为**0.01**

3）当用户输入**2**作为第三个字符时，文本字段应显示为**0.12**

4）当用户输入**3**作为第四个字符时，文本字段应显示为**1.23**

5）当用户输入**4**作为第五个字符时，文本字段应显示为**12.34**

这应该一直持续到**7 个**整数位。最高值应为**99,99,999.00**

我曾尝试使用数字格式化程序，但无法做到这一点。如果有任何解决方案会非常有帮助吗？

除此之外，我还需要在文本和逗号分隔**符之前添加一个 $ 符号。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:08:37.897

由于您希望 UITextField 最多具有 7 个整数位，因此您需要验证每个修改，并防止任何导致大于 7 个整数位的数字。我知道的最简单的方法是 UITextFieldDelegate 方法`shouldChangeCharactersInRange`：

```
- (BOOL) textField:(UITextField*)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString*)string {

    NSString* modifiedFieldText = [textField.text stringByReplacingCharactersInRange:range withString:string] ;
    // Remove all characters except for the digits 0 - 9.
    NSString* filteredToDigits = [modifiedFieldText stringByFilteringCharactersInSet:[NSCharacterSet decimalDigitCharacterSet]] ;
    // Change textField's text only if the result is <= 9 digits  (7 integer digits and 2 fraction digits).
    if ( filteredToDigits.length <= 9 ) {
        // If you'd rather this method didn't change textField's text and only determined whether or not the change should proceed, you can move this code block into a method triggered by textField's Editing Changed, replacing this block with "return YES".  You'll need to once again filter textField's text to only the characters 0 - 9.
        NSNumberFormatter* numberFormatter = [NSNumberFormatter new] ;
        numberFormatter.numberStyle = NSNumberFormatterCurrencyStyle ;

        NSNumber* asNumber = @( filteredToDigits.doubleValue / 100.0 ) ;
        textField.text = [numberFormatter stringFromNumber:asNumber] ;
    }
    // This method just changed textField's text based on the user's input, so iOS should not also change textField's text.
    return NO ;
} 
```

我使用 NSString 类别将 @"$12,345.67" 更改为 @"1234567"。

## NSString+过滤器.m

```
- (NSString*) stringByRemovingCharactersInSet:(NSCharacterSet*)charactersToRemove {
    return [[self componentsSeparatedByCharactersInSet:charactersToRemove] componentsJoinedByString:@""] ;
}
- (NSString*) stringByFilteringCharactersInSet:(NSCharacterSet*)charactersToKeep {
    NSCharacterSet* charactersToRemove = [charactersToKeep invertedSet] ;
    return [self stringByRemovingCharactersInSet:charactersToRemove] ;
} 
```

# c# - 如何在 Visual Studio 中编写 C# 单元测试？

> ID：15363744
> 
> 赞同：4
> 
> 时间：2013-03-12T14:17:54.073
> 
> 标签：c#, asp.net-mvc, unit-testing

这是我的第一个单元测试，希望得到一些帮助，以消除我对编写单元测试过程的想法。

我想编写一个测试方法来添加一个新用户——在我的库类中使用我的 AddUser 方法。

```
Document doc = new Document();

[TestMethod]
public string AddUser()
{
    string name = doc.AddUser("Testing User");
    Assert.IsNotNull(name);
} 
```

我在构建时遇到的错误：

> 无法将类型隐式转换`void`为`string`

这是我的`AddUser`方法：

```
public void AddUser(string newUserName)
{
    using (var db = new DataContext())
    {
        User user = new User()
        {
            FullName = newUserName,
            ID = Guid.NewGuid()
        };

        db.Users.InsertOnSubmit(user);
        db.SubmitChanges();
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T14:19:39.270

您的方法没有返回值：

```
public void AddUser
       ^^^^ no return value 
```

所以你不能将它存储到一个字符串中：

```
string name = doc.AddUser("Testing User");
^^^^^^^^^^^ AddUser has no return value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:21:43.810

Make sure you return the name from from your `AddUser(string newUserName)` method.

Replace your method like

```
public String AddUser(string newUserName)
{
    using (var db = new DataContext())
    {
        User user = new User()
        {
            FullName = newUserName,
            ID = Guid.NewGuid()
        };
        db.Users.InsertOnSubmit(user);
        db.SubmitChanges();
    }
    return newUserName;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:27:36.563

简单地说，您不能将 void 分配给字符串。

要使其工作，您可以通过 2 种方式进行：制作您的方法`AddUser` `return` `string`类型或添加额外`parameter`的内容`method`并`keyword` `out`用于此`parameter`

希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T14:21:02.603

`AddUser` is written as a method, not a class. Your test attempts to call it like a method, but the method is void, which does not return a value.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T14:19:10.063

`AddUser`不返回任何东西。

# php - 为不同的 SQL 查询提供唯一的缓存键标识符。md5的替代品？

> ID：15363745
> 
> 赞同：2
> 
> 时间：2013-03-12T14:17:59.433
> 
> 标签：php, mysql, caching

我有这样的功能：

```
function query($query)
{
    /* If query result is in cache already, pull it */
    if $cache->has(md5($query))
       return $cache->get(md5($query));

    /* Do the actual query here. mysqli_query() etc, whatever u imagine. */

    /* Set the cache with 10 minute expiration */
    $cache->set(md5($query), $queryOutput, array(10)); 
} 
```

所以基本上，如果我查询`SELECT * FROM USERS`，它会自动缓存 10 分钟。

我不知道 md5 是否可以安全依赖。这一次，它创建了 32 个字符的字符串，这听起来有点矫枉过正。其次，已知 md5 在某些输入上给出与输出相同的字符串。是否有任何替代 md5 来识别唯一缓存键的方法？几乎没有机会，两个完全不同的 SQL 查询可能会获得相同的 md5 输出并破坏网站的某些页面，但我现在应该预测并相应地编码仍然是一个机会。

还有一件事是，我觉得这样使用函数被认为是不好的做法。`USERS table`在我的缓存之后可能会插入一个新用户，但`SELECT * FROM USERS`仍会获得相同的 md5 输出，因此，忽略新插入的用户。他们可能会在 10 分钟内多次使用相同的昵称注册。

我应该将第二个参数传递给我的敏感查询，例如`query($query, 'IGNORECACHE')`？对我来说这听起来不合逻辑。会有太多的事情要记住。各位大佬是怎么处理这样的问题的？

如果您能回答我关于这种情况下的 md5 替代方案的第一个问题，我将不胜感激，并且在我的第二个问题上对良好使用 SQL 缓存的简短解释将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:26:28.317

如果您担心遇到哈希冲突（即两个查询具有相同的 md5），只需将查询本身用作键：

```
if $cache->has($query)
    return $cache->get($query);
$cache->set($query, $queryOutput, array(10)); 
```

或者，您可以使用[sha1](http://php.net/manual/en/function.sha1.php)。它返回更长的字符串，因此发生冲突的机会更低。

不要担心存储 32 或 40 字节作为缓存键，这不会显着影响 Web 应用程序的性能。

MySQL 也有[自己的查询缓存](http://dev.mysql.com/doc/refman/5.5/en/query-cache.html)。如果您再次执行相同的查询，MySQL 将从其缓存中获取它。如果您将用户插入到 users 表中，MySQL 将识别出它不能再使用缓存，但您的缓存类并非如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:27:40.643

您可以稍微安全地使用 md5，因为碰撞的几率非常低。另一个可以满足您需求的解决方案是按您的查询类型命名缓存键并使用适当的分隔符附加参数：

```
$result = $cache->get('userdata_'.$userId); 
```

如果使用不小心，当数据库中的数据发生更改但旧数据仍在缓存中时，缓存会给您带来很多意想不到的问题。确保您有办法使缓存无效，并在添加/修改/删除数据时对所有相关缓存执行此操作。

# java - 开发eclipse插件解析java程序的程序

> ID：15363754
> 
> 赞同：0
> 
> 时间：2013-03-12T14:18:22.367
> 
> 标签：java, eclipse, plugins

我是一名 Java 开发人员，我使用 Eclipse 作为 IDE。我倾向于在 Java 程序中编写几种方法，但是对于记录器，我不添加任何方法。有什么办法可以为 Eclipse 开发一个插件，它可以解析整个 Java 类并识别方法的开始和结束，然后添加入口记录器和出口记录器？除了使用文本解析之外，还有什么方法可以识别方法的开头和结尾吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:25:38.483

您可以使用[面向方面的](http://www.javacodegeeks.com/2011/01/aspect-oriented-programming-spring-aop.html)方法来完成此操作。那篇文章中有一个登录示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:29:36.613

如果您使用 Spring 或面向方面的编程，一个更好的解决方案是编织一个日志方面。

# cocoa-touch - 在 iOS 设备上运行的 SSL/TLS 服务器

> ID：15363756
> 
> 赞同：2
> 
> 时间：2013-03-12T14:18:36.993
> 
> 标签：cocoa-touch, encryption, ssl, cocoaasyncsocket

是否可以构建在 iOS 设备上运行的 SSL/TLS 服务器？如果是，如何？

我的疑问与这些问题有关：在设备上，我可以即时创建自签名证书以供以后使用吗？或者我可以告诉 SSL/TLS 不要使用证书吗？

在我的 iOS 应用程序中，我使用的是[AsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)。该应用程序同时是客户端和服务器。

**客户端**是这样实现的：

```
- (void)onSocket:(AsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port {
    // Don't even validate the certificate chain
    NSDictionary *settings = @{(NSString *)kCFStreamSSLValidatesCertificateChain : (id)kCFBooleanFalse};

    [sock startTLS:settings];
}

- (void)onSocketDidSecure:(AsyncSocket *)sock {
    // omitted: send the message...
} 
```

**服务器端**（在另一个 iOS 设备上运行）以这种方式实现：

```
- (void)onSocket:(AsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port {
    // Don't even validate the certificate chain
    NSDictionary *settings = @{(NSString *)kCFStreamSSLValidatesCertificateChain : (id)kCFBooleanFalse,
                            (NSString *)kCFStreamSSLIsServer : (id)kCFBooleanTrue};

    [sock startTLS:settings];
}

- (void)onSocketDidSecure:(AsyncSocket *)sock {
    // omitted: read the message...
} 
```

但是，当客户端尝试连接到服务器时，`onSocket:willDisconnectWithError:`会调用委托的方法，并出现错误`Domain=kCFStreamErrorDomainSSL Code=-9848`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:17:10.813

**是否可以构建在 iOS 设备上运行的 SSL/TLS 服务器？如果是，如何？**

绝对地。我在模拟器和设备上都使用了带有 SSL/TLS 的[CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer)来进行测试。要使用客户端证书，您需要进行一些修改，其中大部分都在其 GitHub 问题列表中的[补丁中。](https://github.com/robbiehanson/CocoaHTTPServer/pull/26)

您可以在 iOS 上即时创建证书吗？从来没听说过。

你能告诉 SSL 不使用证书吗？嗯。即使可以，使用 SSL 又有什么意义呢？证书是“保护”传输的东西。SSL 是一种信任模型，链路两端的各方评估另一方的信任。如果您正在动态创建证书，或者试图不使用证书期限，那么您就是在使该信任模型无效 - 您并没有保护任何东西。

# c++ - 在 cv::Mat 中将浮点数转换为 uchar 的偏移量

> ID：15363762
> 
> 赞同：0
> 
> 时间：2013-03-12T14:18:50.040
> 
> 标签：c++, opencv

在加快某些进程的过程中（无法命名，抱歉），我试图创建一个

```
cv::Mat_<uchar> discretization; 
```

现在，当我在浮点数中获得深度图时

```
cv::Mat_<float> depth_map;
discretization = depth_map / resolution_mtr; 
```

其中 resolution_mtr 是一个浮点数。目前它的值为0.1。当我这样做时，对于深度图中的 0.48 值，我得到离散化值 5。我的理解是它应该是 4 。我想它是四舍五入到最近的 uchar。有没有办法在不进入 for 循环的情况下解决这个问题？基本上我想在离散化中使用底值而不是四舍五入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:36:22.237

为什么不定义一个继承的类 CvNoRoundMat 并覆盖它的 operator+ 呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:12:01.050

您可以从结果中减去 0.5。

这段代码

```
float resolution_mtr = 0.1;
float vals[] = {0.48, 0.4, 0.38, 0.31};
cv::Mat_<float> depth_map(1,4,vals);
cv::Mat_<uchar> discretization( depth_map  / resolution_mtr - 0.5);

std::cout << "depth_map: " << depth_map << std::endl;
std::cout << "discretization: " << discretization << std::endl; 
```

会给你以下结果：

```
depth_map: [0.47999999, 0.40000001, 0.38, 0.31]
discretization: [4, 4, 3, 3] 
```

# theorem-proving - 有限有界量词的消除规则

> ID：15363765
> 
> 赞同：2
> 
> 时间：2013-03-12T14:18:53.813
> 
> 标签：theorem-proving, quantifiers, isabelle

我有以下目标：

```
∀x ∈ {0,1,2,3,4,5}. P x 
```

我想将此目标分解为六个子目标`P 0`，`P 1`，`P 2`，`P 3`和。这很容易做到。但是用于执行此操作的相关规则是什么？我问是因为我的实际目标看起来更像这样：`P 4``P 5``apply auto``auto`

```
∀x ∈ {0..<6}. P x 
```

并且`apply auto`不会以同样的方式打破这个目标（它给了我

```
⋀x. 0 ≤ x ⟹ x < 6 ⟹ P x 
```

反而）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:03:17.670

正在使用的规则`auto`是`ballI`（限制所有介绍）。这转变`∀x ∈ S. P x`为`x ∈ S ==> P x`.

转化`x ∈ {0,1,2,3,4,5}`为 6 个独立子目标的问题是一个独立的子目标。基本上，`auto`将显式枚举转换为析取，然后将其拆分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T23:12:18.967

您可以使用如下引理来拆分单个目标：

```
lemma expand_ballI: "⟦ (n :: nat) > 0; ∀x ∈ {0..< (n - 1)}. P x; P (n - 1) ⟧ ⟹ ∀x ∈ {0..< n}. P x"
  by (induct n, auto simp: less_Suc_eq) 
```

然后可以将其重复应用于您的规则，如下所示：

```
lemma "∀x ∈ {0..< 6 :: nat}. P x"
  apply (rule expand_ballI, fastforce)+
  apply simp_all 
```

导致目标拆分如下：

```
goal (6 subgoals):
 1\. P 0
 2\. P (Suc 0)
 3\. P 2
 4\. P 3
 5\. P 4
 6\. P 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:52:52.647

使用`[simp]`引理将集合转换为更方便的集合版本非常方便。例如`{0..<6} = {0,1,2,3,4,5}`

# c# - c#浮点常量超出了'decimal'类型的范围

> ID：15363770
> 
> 赞同：0
> 
> 时间：2013-03-12T14:19:09.227
> 
> 标签：c#

我在 google calc 中添加了一些数字，它给了我 8.5070592e+37

```
decimal uhoh = 8.5070592e+37M; 
```

> 浮点常数超出“十进制”类型的范围

我该如何解析这个？我尝试使用`IntXLib`，但我看不到如何通过这种格式，我也听说过`BigInteger`，请建议如何解决问题。

编辑：

9,223,372,036,854,775,807 * 9,223,372,036,854,775,807 =8.5070592e+37

如何获取完整号码，例如号码

> 328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425328574893257893425893783934534253285748932578934258937839345342532857489325789342589378393453425

或实际上等于什么？

# sql-server - SQL Server - displaying data "downward"

> ID：15363775
> 
> 赞同：1
> 
> 时间：2013-03-12T14:19:28.567
> 
> 标签：sql-server, sql-server-2012

I have a table like so:

```
CREATE TABLE #Categories (CategoryText VARCHAR(50), CategoryUrl VARCHAR(50), SubCategoryText VARCHAR(50), SubCategoryUrl VARCHAR(50))
INSERT INTO #Categories SELECT 'Lighting', 'http://lighting.com', 'Chandeliers', 'http://chandeliers.com' 
INSERT INTO #Categories SELECT 'Lighting', 'http://lighting.com', 'Lamps', 'http://lamps.com' 
INSERT INTO #Categories SELECT 'Hardware', 'http://hardware.com', 'Hooks', 'http://hooks.com' 
INSERT INTO #Categories SELECT 'Hardware', 'http://hardware.com', 'Hinges', 'http://hinges.com' 
```

which looks like:

```
CategoryText                                       CategoryUrl                                        SubCategoryText                                    SubCategoryUrl
-------------------------------------------------- -------------------------------------------------- -------------------------------------------------- --------------------------------------------------
Lighting                                           http://lighting.com                                Chandeliers                                        http://chandeliers.com
Lighting                                           http://lighting.com                                Lamps                                              http://lamps.com
Hardware                                           http://hardware.com                                Hooks                                              http://hooks.com
Hardware                                           http://hardware.com                                Hinges                                             http://hinges.com 
```

How would I dynamically display the data as follows:

```
Type        Text                                               Url
----------- -------------------------------------------------- --------------------------------------------------
Category    Lighting                                           http://lighting.com
SubCategory Chandeliers                                        http://chandeliers.com
SubCategory Lamps                                              http://lamps.com
Category    Hardware                                           http://hardware.com
SubCategory Hinges                                             http://hinges.com
SubCategory Hooks                                              http://hooks.com 
```

I also need to retain the correct order of categories *and* subcategories.

UNPIVOT came to mind, but I don't see how I can apply it here as the data structure/requirements are different than most examples out there.

Any help is appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:30:02.790

Try this:

```
select distinct
  Type = 'Category',
  Parent = CategoryText,
  Text = CategoryText,
  Url = CategoryUrl
from #Categories
union all
select 
  Type = 'SubCategory',
  Parent = CategoryText,
  Text = SubCategoryText,
  Url = SubCatgoryUrl
from  #Categories
order by Parent,Type,Text 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:33:26.260

This should work for you...using a UNION with a ranking function...

```
select CASE WHEN SubCategoryText IS NULL THEN 'Category' ELSE 'SubCategory' END as Type,
        CASE WHEN SubCategoryText IS NULL THEN CategoryText ELSE SubCategoryText END as Type,
        CategoryUrl
from (      
select *, RANK() OVER (ORDER BY CategoryText, SubCategoryText) AS Rank
from (
select CategoryText, null as SubCategoryText, CategoryUrl
from #Categories
union 
select CategoryText, SubCategoryText, SubCategoryUrl
from #Categories
)a)b
order by Rank 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:40:40.153

```
 ;WITH Main as
    (
        SELECT 'Category' AS [Type], CategoryText AS ordering, CategoryText, CategoryUrl
        FROM #Categories
    ),
        Sub AS 
    (
        SELECT 'SubCategory' AS [Type], CategoryText AS ordering, SubCategoryText, SubCategoryUrl
        FROM #Categories    
    )   
    SELECT DISTINCT Type, CategoryText, CategoryUrl, ordering
    FROM Main
    UNION ALL
    SELECT Type, SubCategoryText, SubCategoryUrl,ordering
    FROM Sub
    ORDER BY ordering, [Type], categorytext 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:18:18.573

I was able to get this working, with retaining the order of categories and subcategories.

I used @SliverNinja's CASE statement to get the correct type and text.

For the sorting, I added 2 columns CategorySortOrder and SubCategorySortOrder. I combined the category and subcategory sortorder to create a new single SortOrder column. I then grouped and ordered by that column to get my final result.

```
CREATE TABLE #Categories (CategoryText VARCHAR(50), CategoryUrl VARCHAR(50), CategorySortOrder INT,SubCategoryText VARCHAR(50), SubCategoryUrl VARCHAR(50), SubCategorySortOrder INT)
INSERT INTO #Categories SELECT 'Lighting', 'http://lighting.com', 1, 'Chandeliers', 'http://chandeliers.com',1
INSERT INTO #Categories SELECT 'Lighting', 'http://lighting.com', 1, 'Lamps', 'http://lamps.com' , 2
INSERT INTO #Categories SELECT 'Hardware', 'http://hardware.com', 2 ,'Hooks', 'http://hooks.com' ,1
INSERT INTO #Categories SELECT 'Hardware', 'http://hardware.com', 2,'Hinges', 'http://hinges.com' ,2

SELECT
    Type
    , Text
    , Url
    , MIN(SortOrder)[SortOrder]
INTO 
    #cats
FROM
    (
    SELECT 
        CASE WHEN SubCategoryText IS NULL THEN 'Category' ELSE 'SubCategory' END [Type]
        , CASE WHEN SubCategoryText IS NULL THEN CategoryText ELSE SubCategoryText END [Text]
        , [Url]
        , CASE WHEN SubCategoryText IS NULL THEN CAST(CAST(CategorySortOrder AS VARCHAR) + CAST(SubCategorySortOrder AS VARCHAR) AS NUMERIC)  ELSE CAST(CAST(CategorySortOrder AS VARCHAR) + CAST(SubCategorySortOrder AS VARCHAR) AS NUMERIC) + 1 END[SortOrder]
    FROM
        (
            SELECT
                CategoryText
                , NULL [SubCategoryText]
                , CategoryUrl [Url]
                , CategorySortOrder
                , SubCategorySortOrder
            FROM
                #Categories
            UNION ALL
            SELECT
                CategoryText
                , SubCategoryText
                , SubCategoryUrl
                , CategorySortOrder
                , SubCategorySortOrder
            FROM
                #Categories
        )t
    )t
GROUP BY
    Type
    , Text
    , Url
ORDER BY
    SortOrder 

SELECT 
    Type
    , Text
    , Url
FROM
    #Cats 
```

# java - 在 AWS Java SDK 1.4.0 中向 com.amazonaws.regions.Region.createClient() 提供凭证

> ID：15363776
> 
> 赞同：1
> 
> 时间：2013-03-12T14:19:34.000
> 
> 标签：java, sdk, amazon-web-services

[亚马逊今天发布了适用于 AWS 的 Java 开发工具包 1.4.0 版](http://aws.amazon.com/releasenotes/2425068307485737)，并添加了非常受欢迎的 com.amazonaws.regions.Region，它描述了可用的区域及其服务。

此类还为所有客户端类（子类 com.amazonaws.AmazonWebServiceClient）提供 createClient() 工厂方法。

我不明白如何将自定义 AWSCredentialProvider 传递给此方法，因为第二个预期参数是 org.apache.http.client.CredentialsProvider。我什至不明白该方法是如何工作的，因为它使用 Java 反射来尝试使用不存在的 org.apache.http.client.CredentialsProvider 第二个参数为客户端类查找构造函数。

在我看来，这是 SDK 代码中的错误，仅使用 DefaultAWSCredentialsProviderChain 进行了测试。

我是否错误地使用了这个类，或者我可以期待这个错误很快得到修复？

顺便说一句，[最新的 Javadoc](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html)还没有包含 com.amazonaws.regions 包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:46:23.067

很高兴听到您对新的区域代码感到兴奋。它应该使在不同 AWS 区域中使用服务变得更容易一些。

您是正确的，Region.java 中的 import 语句正在导入错误的 CredentialsProvider。我们将尽快修复该问题并在下一版本的适用于 Java 的 AWS 开发工具包中发布。

我正在向我们的站点推出一个新的 Javadoc 版本，其中将包含 com.amazonaws.regions 命名空间。期待今天下午晚些时候发布。

感谢您报告这一问题！希望您喜欢新的地区代码。如果您有任何其他反馈、建议或问题，请告诉我们。我们总是喜欢听取客户的意见。

# javascript - 无法获取元素的索引

> ID：15363778
> 
> 赞同：2
> 
> 时间：2013-03-12T14:19:40.397
> 
> 标签：javascript, jquery

我正在尝试获取当前项目的索引，`<p>`但我什么都没有。我只得到第一个元素的索引 [http://jsfiddle.net/T4uVG/7/](http://jsfiddle.net/T4uVG/7/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:22:30.817

元素的索引`<p>`应与：

```
$(this).parent().index(); 
```

因为`this`是指子`<span>`元素。

**演示：http:** [//jsfiddle.net/T4uVG/8/](http://jsfiddle.net/T4uVG/8/)

# javascript - 在 YUI 中更改锚的 href

> ID：15363780
> 
> 赞同：0
> 
> 时间：2013-03-12T14:19:46.167
> 
> 标签：javascript, jquery, html, yui

我知道 jQuery，尽管我需要使用 YUI 来更改具有类名的锚的 href（这就是为什么我不能直接使用 JavaScript）。

这就是我在 jQuery 中所拥有的，在 YUI 中的等价物是什么？

```
$("a.magic-link").prop("href", "http://www.magic.com"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:34:58.463

使用 setAttribute()。有关参考文档，请参阅[http://yuilibrary.com/yui/docs/api/classes/Node.html#method_setAttribute](http://yuilibrary.com/yui/docs/api/classes/Node.html#method_setAttribute)。

如果您在 YUI 中使用 DOM 节点，您绝对应该阅读 Node 用户指南，它有很多示例可以帮助您了解 API 的一般工作原理：http: [//yuilibrary.com/yui/docs/node/](http://yuilibrary.com/yui/docs/node/)

编辑：谢谢，胡安！另请参阅[http://jsrosettastone.com](http://jsrosettastone.com)，它将 jQuery 方法映射到 YUI 方法。DOM API 在概念上非常相似，只是它们的名称不同。

# maven - 从 jslint 目标中排除供应商 js 文件，但不排除 yuicompressor-maven-plugin 中的 compress 目标

> ID：15363781
> 
> 赞同：2
> 
> 时间：2013-03-12T14:19:46.927
> 
> 标签：maven, maven-3, yui-compressor

我的项目中有一些第三方 js 文件，我想在部署期间缩小这些文件，但我不想看到这些特定 js 文件上的 jslint 警告。我将如何实现这一目标？

当我列出两个目标并在配置中排除 js 时，即使 compress 目标也如预期的那样将它们排除在外。

```
<plugin>
   <groupId>net.alchim31.maven</groupId>
   <artifactId>yuicompressor-maven-plugin</artifactId>
   <executions>
     <execution>
       <goals>
         <goal>compress</goal>
         <goal>jslint</goal>
       </goals>
     </execution>
   </executions>
   <configuration>
     <nosuffix>true</nosuffix>
     <webappDirectory>${project.build.directory}/min</webappDirectory>
     <excludes>
       <exclude>**/*min.js</exclude>
       <exclude>**/*min.css</exclude>
       <exclude>**/ZeroClipboard.js</exclude>
       <exclude>**/TableTools.js</exclude>
       <exclude>**/jquery.dataTables.rowGrouping.js</exclude>
     </excludes>
   </configuration>
 </plugin> 
```

但即使我将配置放入单独的执行中，jslint 仍然会向我显示排除的 js 文件中的错误。

```
 <plugin>
      <groupId>net.alchim31.maven</groupId>
      <artifactId>yuicompressor-maven-plugin</artifactId>
      <executions>
        <execution>
          <id>minify</id>
          <phase>package</phase>
          <goals>
            <goal>compress</goal>                    
          </goals>                  
          <configuration>
            <excludes>
              <exclude>**/*.min.js</exclude>
              <exclude>**/*.min.css</exclude>                      
            </excludes>
          </configuration>
        </execution>
        <execution>
          <id>jslint</id>
          <phase>package</phase>
          <goals>
            <goal>jslint</goal>
          </goals>
          <configuration>
            <excludes>
          <exclude>**/ZeroClipboard.js</exclude>
          <exclude>**/TableTools.js</exclude>
          <exclude>**/jquery.dataTables.rowGrouping.js</exclude>
          <exclude>**/*.min.js</exclude>
          <exclude>**/*.min.css</exclude>
        </excludes>
          </configuration>
        </execution>
      </executions>
      <configuration>
        <nosuffix>true</nosuffix>
      </configuration>
    </plugin> 
```

上面的插件配置仍然显示 3 个列出的 js 文件中的 jslint 错误。我该如何避免呢？由于他们是第 3 方，我对修复他们的 jslint 错误/警告不感兴趣，但我仍然希望将它们缩小以用于我的部署目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T15:09:11.413

在这里找到它：http: [//alchim.sourceforge.net/yuicompressor-maven-plugin/usage_jslint.html](http://alchim.sourceforge.net/yuicompressor-maven-plugin/usage_jslint.html)

我可以使它在 <plugin> 下的 <configuration> 不在 <execution> 内工作

# javascript - 如何更改 JSON 结构

> ID：15363782
> 
> 赞同：1
> 
> 时间：2013-03-12T14:19:48.137
> 
> 标签：javascript, json

我有这样的 JSON 数据

```
{
    "nodes": [
        {
            "node": {
                "title": "Kieu Oanh",
                "Image": "",
                "view_node": "view",
                "link": "drupal_dev/content/kieu-oanh"
            }
        },
        {
            "node": {
                "title": "Kieu Oanh",
                "Image": "",
                "view_node": "view",
                "link": "drupal_dev/content/kieu-oanh"
            }
        },

    ]
} 
```

现在我想将其转换为

```
var rel_data = [{
    "title": "asa",
    "Image": "sasa",
    "view_node": "sajsjla"
}, {
    "title": "asa",
    "Image": "sasa",
    "view_node": "sajsjla"
}] 
```

这是我将数据转换为 rel_data 的代码

```
data = data.nodes;
for (d in data) {
    rel_data[d].title = data[d].node.title;
    rel_data[d].image = data[d].node.Image;
}
for (d in rel_data) {
    alert(rel_data[d].title);
} 
```

但它似乎不起作用，我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:27:14.183

您正在尝试编辑尚不存在的对象。

您要做的第一件事是`rel_data`在还没有的时候访问`rel_data`。您要做的第二件事是更改不存在的数组元素的属性。

您的代码应该如下工作：

```
 data = data.nodes;
 rel_data = new Array(); // Create rel_data
 for(d in data) {
        rel_data[d] = new Object(); // Create array element
        rel_data[d].title= data[d].node.title;
        rel_data[d].image= data[d].node.Image;
 }

 for(d in rel_data) {
        alert(rel_data[d].title);
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:38:27.733

您也可以使用`map`而不是`for`循环（为了生成新数组，您需要一个用于`alert()`）

```
var rel_Data = data.nodes.map(function(item) { 
    return { 
       "title": item.node.title, 
       "Image": item.node.Image, 
       "view_node": item.node.view_node 
    }; 
}); 
```

# regex - 用notepad++搜索和替换多个单词（文本使用管道分隔单词）

> ID：15363785
> 
> 赞同：0
> 
> 时间：2013-03-12T14:19:55.490
> 
> 标签：regex, notepad++, replace

我有一个包含数千行的文件，我需要找到两个始终在同一行的术语，但在这个文件中会有几行。

一、文件本身使用管道| 分离数据，如下所示：

`|C485|01|2,50||0,0000|||0,00|1052|62103|`

我需要找到的是包含以下内容的行：

`|C481|01| and |0,0000|`

并将第一个单词替换为：

`|C481|04|`

我找到了这个问题的答案，但是当我选择执行以下操作时，它不起作用。

使用正则表达式： `(|C481|01|)|(|0,0000|)`

和

`|C481|01|.*|0,0000|`

我不太了解正则表达式，如何找到使用的两个术语`|`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:27:06.260

`|`是一个正则表达式特殊字符，你必须使用`\|`.

在您的情况下，替换`\|C485\|01\|(.*\|0,0000\|)`为`|C481|04|$1`应该适合您的需要。

# dojo - Dgrid Horizo ntall Scroll在Safari中不起作用

> ID：15363786
> 
> 赞同：1
> 
> 时间：2013-03-12T14:19:57.283
> 
> 标签：dojo, dgrid

在 ipad 或 MAC 上测试 dgrid 时，我遇到的问题很少。1) dgrid 不采用百分比宽度 2) 水平滚动条未显示，因为我在 .dgrid-scroller 中具有绝对位置。我犯了什么错误？

我有一个示例，其中水平滚动不起作用 [http://dojofoundation.org/packages/dgrid/demos/gantt/](http://dojofoundation.org/packages/dgrid/demos/gantt/)

# php - 将多个文本框中的值作为数组提交

> ID：15363787
> 
> 赞同：1
> 
> 时间：2013-03-12T14:19:58.927
> 
> 标签：php, html

基本上我希望我的程序做的是询问用户他们想输入多少个数字。提交值后，程序将获取该值并创建此数量的文本框。每个文本框都会接受一个数字，一旦提交，它应该接受所有数字（不包括初始文本框）并将其存储到数组或其他东西中，以便计算平均值。

我已经能够创建 x 数量的文本框，但找不到提交这些值的方法。

```
<html>
<body>

<form action="means.php" method = "get">
Enter sample size: <input type = "number" name = "size" <br>
<input type = "submit">

<?php 
if ( isset($_GET["size"] ) )
{
$size = $_GET["size"];
$count = 1;
while ($count <= $size)
    {
    echo '<br><input type=\"text\"  name=\"textbox".$count."\" />';
    $count++;

    }
}
?>
</form>

</html>
</body> 
```

我认为问题在于创建的文本框正在被回显，因此名称为“textbox.$count”。不能用于获取数字？

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:23:43.860

只需对表单字段名称使用 PHP 的数组表示法：

```
<input type="text" name="textbox[]" />
                                ^^---force array mode 
```

这将在 中生成一个数组`$_POST['textbox']`，每个以名称提交的文本框都有一个元素`textbox[]`。

例如：

```
<input type="text" name="textbox[]" value="1" />
<input type="text" name="textbox[]" value="foo" />
<input type="text" name="textbox[]" value="banana" /> 
```

生产

```
$_POST = array(
   'textbox' => array )
         0 => 1,
         1 => 'foo',
         2 = > 'banana'
   )
) 
```

您的问题是您使用的是单引号字符串 ( `'`)，这意味着

```
$var = 'foo';
echo '$var'  // outputs $, v, a, r
echo "$var"  // outputs f, o ,o 
```

# c# - TFS 和库在 nuget 中不可用

> ID：15363788
> 
> 赞同：1
> 
> 时间：2013-03-12T14:19:59.860
> 
> 标签：c#, asp.net-mvc, tfs, nuget

所以我们有一个 ASP.net MVC 4 解决方案，它由 3 个项目 BusinessLibrary.UI、BusinessLbrary.Domain、BusinessLibrary.Tests 组成

我们使用 nuget 来管理我们所有的库，如 json.net、实体等。但我们也添加了一些私有库。管理我们拥有的私人图书馆的最佳方式是什么。我希望能够有一个新的开发人员在他们开始时获得与这个项目相关的所有 DLL。

我读过我可以创建一个库或 lib 文件夹，然后将 DLL 引用到那里。但是那应该用项目的源代码控制检查吗？我只想复制非nuget私人图书馆吗？这是最好的方法吗？

这种情况的标准做法是什么，我应该如何存储我的私人图书馆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:22:50.417

就个人而言，我在解决方案级别创建了一个依赖项文件夹。我把我引用的所有非 NuGet 库放在那里。当我添加引用时，我肯定会从依赖项文件夹中引用程序集。确保将依赖项文件夹添加到源代码管理。

这样，任何从源代码管理中提取解决方案的开发人员都将自动拥有所有依赖项的正确版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:25:24.497

或者，您可以安装自己的[NuGet 服务器](http://nuget.org/packages/NuGet.Server/)，并在成功构建这些库的服务器后将您的库放在那里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:23:03.780

我们创建一个库目录，在其中添加程序集并使用相对路径来引用它们。我们还签入此目录，因此每个团队成员都会立即拥有最新的程序集。

另一种选择是设置私有 NuGet 源（例如 MyGet）并将您的程序集作为包发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T14:23:39.737

在我们的项目中，我们为私有 dll 创建了 lib 文件夹，并将其与源代码一起签入到 TFS。NuGet 包会自动添加到 TFS。

# codeigniter - CodeIgniter 自定义验证功能不起作用

> ID：15363794
> 
> 赞同：1
> 
> 时间：2013-03-12T14:20:03.763
> 
> 标签：codeigniter, validation, codeigniter-2

我正在使用 CodeIgniter 2.3.1 并在其中创建了一个`form_validation.php`文件，`config`内容如下。

```
<?php
  $config = array(
array(
    'field' => 'firstname',
    'label' => 'First Name',
    'rules' => 'required'
),
array(
    'field' => 'lastname',
    'label' => 'Last Name',
    'rules' => 'required'
),
array(
    'field' => 'email',
    'label' => 'Email',
    'rules' => 'required|valid_email|callback_unique_email'
),
array(
    'field' => 'password',
    'label' => 'Password',
    'rules' => 'required|matches[confirm_password]'
),
array(
    'field' => 'confirm_password',
    'label' => 'Confirm Password',
    'rules' => 'required'
)
 );

function unique_email($email) {
if($email == 'm@gmail.com') {
    $this->form_validation->set_message('unique_email', 'Hello World !');
    return false;
}
 }

?> 
```

并检查控制器的`form_validation`输入`register`功能。`user`代码如下。

```
public function register() {
    $this->load->helper('form');
    $data['message'] = '';
    if($this->input->post('submit')) {
        $this->load->library('form_validation');
        if($this->form_validation->run() == FALSE) {
            $data['message'] = 'User could not be saved.';
        } else {
            $user_data['firstname'] = $this->input->post('firstname');
            $user_data['lastname'] = $this->input->post('lastname');
            $user_data['email'] = $this->input->post('email');
            $user_data['password'] = md5($this->input->post('password'));
            if($this->user_model->insert($user_data)) {
                if($this->user_model->login($user_data)) {
                    $this->session->set_flashdata('message', 'User saved successfully.');
                    redirect('/user', 'refresh');
                }
            }
        }
    } 

    $this->load->view('user/register', $data);
} 
```

但我没有收到自定义方法的验证消息。请建议我怎么做？作品更受赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T15:53:59.547

查看以下文档：[http ://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)

正如您在文档中看到的那样，自定义验证功能实际上属于控制器，而不是配置文件。通过将验证函数移动到控制器，回调函数应该开始被调用。

另一个有趣的事实是，人们可以通过 url 访问这个 unique_email 函数（即[http://yoursite.com/index.php/user/unique_email](http://yoursite.com/index.php/user/unique_email)）。为了避免这种情况，我们可以将函数编写为私有函数，只需在函数开头放置一个下划线，如下所示：

```
function _unique_email($email) {
    ...
} 
```

然后，您可以使用配置中的新函数名称在验证中调用该函数（注意回调中的额外下划线：

```
array(
    'field' => 'email',
    'label' => 'Email',
    'rules' => 'required|valid_email|callback__unique_email'
) 
```

最后，您的控制器应类似于以下内容：

```
class User extends CI_Controller {

    public function register() {
        $this->load->helper('form');
        $data['message'] = '';
        if($this->input->post('submit')) {
            $this->load->library('form_validation');
            if($this->form_validation->run() == FALSE) {
                $data['message'] = 'User could not be saved.';
            } else {
                $user_data['firstname'] = $this->input->post('firstname');
                $user_data['lastname'] = $this->input->post('lastname');
                $user_data['email'] = $this->input->post('email');
                $user_data['password'] = md5($this->input->post('password'));
                if($this->user_model->insert($user_data)) {
                    if($this->user_model->login($user_data)) {
                        $this->session->set_flashdata('message', 'User saved successfully.');
                        redirect('/user', 'refresh');
                    }
                }
            }
        } 

        $this->load->view('user/register', $data);
    }

    function _unique_email($email) {
        if($email == 'm@gmail.com') {
            $this->form_validation->set_message('unique_email', 'Hello World !');
            return false;
        }
    }

} 
```

您的配置将类似于以下内容：

```
$config = array(
    array(
        'field' => 'firstname',
        'label' => 'First Name',
        'rules' => 'required'
    ),
    array(
        'field' => 'lastname',
        'label' => 'Last Name',
        'rules' => 'required'
    ),
    array(
        'field' => 'email',
        'label' => 'Email',
        'rules' => 'required|valid_email|callback__unique_email'
    ),
    array(
        'field' => 'password',
        'label' => 'Password',
        'rules' => 'required|matches[confirm_password]'
    ),
    array(
        'field' => 'confirm_password',
        'label' => 'Confirm Password',
        'rules' => 'required'
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:47:51.330

我使用了这个答案并得到了错误：

无法访问与您的字段名称对应的错误消息。

在函数 _unique_email 中改为 set_message('unique_email', 'Hello World !'); 应该是 set_message('_unique_email', 'Hello World !'); 像这样：

```
function _unique_email($email) {
    if($email == 'm@gmail.com') {
        $this->form_validation->set_message('_unique_email', 'Hello World !');
        return false;
    }
} 
```

# zurb-foundation - Foundation 4 - 自定义 Orbit

> ID：15363796
> 
> 赞同：2
> 
> 时间：2013-03-12T14:20:08.980
> 
> 标签：zurb-foundation

我从最新的 Foundation 定制 Orbit 时遇到问题。从[文档](http://foundation.zurb.com/docs/components/orbit.html)：

*轨道选项此时只能在初始化时传入。*

```
{
  timer_speed: 10000,
  animation_speed: 500,
  bullets: true,
  stack_on_small: true,
  container_class: 'orbit-container',
  stack_on_small_class: 'orbit-stack-on-small',
  next_class: 'orbit-next',
  prev_class: 'orbit-prev',
  timer_container_class: 'orbit-timer',
  timer_paused_class: 'paused',
  timer_progress_class: 'orbit-progress',
  slides_container_class: 'orbit-slides-container',
  bullets_container_class: 'orbit-bullets',
  bullets_active_class: 'active',
  slide_number_class: 'orbit-slide-number',
  caption_class: 'orbit-caption',
  active_slide_class: 'active',
  orbit_transition_class: 'orbit-transitioning'
} 
```

嗯，太好了。但是如何应用呢？我试过了

```
$('#slider').orbit({...});
---

$(document).foundation().orbit({...}); 
```

但没有任何效果。我知道这很愚蠢，但是怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T09:17:28.677

“从 4.0.7 开始，您还可以使用 data-options 属性将配置设置传递给 Orbit。” 来源：[foundation.zurb.com/docs/components/orbit.html](http://foundation.zurb.com/docs/components/orbit.html)

将其视为样式属性：

```
<ul data-orbit data-options="timer_speed:2500; bullets:false;">
  ...
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:45:37.653

```
$(document).foundation('orbit', {bullets:false}); 
```

# c - Low level description of input assignments to a function

> ID：15363797
> 
> 赞同：-2
> 
> 时间：2013-03-12T14:20:13.483
> 
> 标签：c

I want to understand at low level how an input is given to a function. What exactly happens once a function runs? For example, consider the following:

```
int foo(int t1, int t2)
{  
  Function defintion goes here  
} 
```

Then later in the code

```
main()
{
  .
  .
  int a= foo(23, 24);
  . 
  .
 } 
```

Suppose the code is compiled successfully and we get a binary file, i.e an .exe file corresponding to our high level source code. I want to understand at what level the inputs are given to functions internally and what exactly happens when we double click on this .exe file. What softwares/hardwares come into play after clicking the .exe? I will appreciate if some can give me a brief description.

**As requested**

O.S: Windows CPU: Intel Core2Duo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:26:11.800

就函数调用而言，首先，文字`23`和`24`被加载到 CPU 中的特定寄存器（用于函数参数的寄存器）。然后，您的代码会在找到该函数时跳转到某个部分`foo`。

`foo`从上面提到的寄存器中读取以访问`t1`and `t2`，计算返回值，并将该值存储在另一个寄存器中。然后， foo 跳回到它在 main 中被调用的地方。

Main 然后从存储 foo 的返回值的寄存器中读取，并将该值放入变量`x`中。

这是对函数调用所发生情况的高级描述。更详细的解释可能无法从堆栈溢出帖子中获得（但也许不是）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:54:32.983

您需要更具体地了解您为其编写代码的平台。不同的硬件和软件平台使用不同的ABI，即调用之间传递参数的方式。

此外，它可能取决于您使用的编译器版本和语言方言。

[http://en.wikipedia.org/wiki/X86_calling_conventions](http://en.wikipedia.org/wiki/X86_calling_conventions) [http://en.wikipedia.org/wiki/Application_binary_interface](http://en.wikipedia.org/wiki/Application_binary_interface)

要获得答案，您需要指定：硬件平台、操作系统版本、要使用的编译器和编写此东西的语言（C/C++）或仅使用调用约定。

差异示例： 在 ARM 上，一些参数可以通过寄存器传递，而一些参数可以通过堆栈传递。在 x86 上，大多数参数在堆栈上传递（C++ 方法除外），参数的顺序由使用的语言和约定定义，对齐是标准问题，或者在 M-soft 的情况下，商业规范.

# mobile - 哪些移动浏览器具有 HTML5 Canvas 的 GPU 加速功能？

> ID：15363798
> 
> 赞同：0
> 
> 时间：2013-03-12T14:20:14.480
> 
> 标签：mobile, cross-browser, html5-canvas

我在互联网上搜索了很长时间关于支持 HTML5 Canvas 的 GPU 加速的浏览器。我知道 Android 上的 Chrome 可以（它不是 Android 的标准浏览器）。所以我想知道：

*   Iphone/Ipad的标准浏览器是否支持Canvas的GPU加速？
*   同样适用于标准浏览器 Android。
*   Windows Phone 同上。

如果是的话，它是从哪个版本开始实施的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:28:05.560

据我所知，以下构建支持 GPU 加速：

*   iOS5 与 Nitro Javascript
*   Android4+ 上的 Android 版 Chrome（默认浏览器）
*   带有 IE9 的 Windows Phone 7

几篇文章证实了这一点，[这里有一篇](http://buildnewgames.com/mobile-game-primer/)。

# jquery - Adding Jquery Mobile Panel at run time

> ID：15363802
> 
> 赞同：0
> 
> 时间：2013-03-12T14:20:17.167
> 
> 标签：jquery, jquery-mobile, jquery-plugins

I am trying to use jquery mobile panels for navigation menu in my app, this menu appears when you click on the menu button on pages, from the doc, I understand that I should add this menu panel to every page.

Since my pages are also added at run time, I need someway to inject the menu panel into the page when it is created, I'm using following code which is not working:

```
var $menuElement = $("#menu");
if ($activePage.find($menuElement).length <= 0) {
    console.log("Adding menu");
    $menuElement.show().css({height:$(".fb-menu").find("li").size() * 5 + "px"});
    $menuElement.prependTo($activePage);
    $activePage.trigger('create');
    $activePage.trigger('update');
} 
```

anyone has an idea how should I add my menu panel to a page which is added dynamically?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:28:12.543

看看我关于这个解决方案的其他答案：[https ://stackoverflow.com/a/15223926/1848600](https://stackoverflow.com/a/15223926/1848600)

这是您可以动态添加它的方式：

```
$(document).on('pagebeforeshow', '[data-role="page"]', function(){                
    $('<div>').attr({'id':'mypanel','data-role':'panel'}).appendTo($(this));
    $('<a>').attr({'id':'test-btn','data-role':'button'}).html('Click me').appendTo('mypanel');
    $.mobile.activePage.find('#mypanel').panel();
    $(document).on('click', '#open-panel', function(){   
         $.mobile.activePage.find('#mypanel').panel("open");       
    });    
}); 
```

现场示例：http: [//jsfiddle.net/Gajotres/pZzrk/](http://jsfiddle.net/Gajotres/pZzrk/)

# java - Strange behaviour of the Hotspot loop condition optimizer

> ID：15363809
> 
> 赞同：13
> 
> 时间：2013-03-12T14:20:27.560
> 
> 标签：java, jvm-hotspot, optimization

Based on the discussions around an answer to [this](https://stackoverflow.com/questions/15339510/java-optimization-by-compiler-or-jit) question, I discovered a really strange behaviour of the Java Hotspot optimizer. The observed behaviour can at least be seen in the Oracle VM 1.7.0_17, but seem to occur in older Java 6 versions as well.

First of all, I was already aware of the optimizer obviously being aware that some methods in the standard API are invariant and have no side effects. When executing a loop like `double x=0.5; for(double d = 0; d < Math.sin(x); d += 0.001);`, the expression `Math.sin(x)` is not evaluated for each iteration, but the optimizer is aware that the method `Math.sin` has no relevant side effects and that the result is invariant, as long as `x` is not modified in the loop.

Now I noticed, that simply changing `x` from 0.5 to 1.0 disabled this optimization. Further tests indicate that the optimization is only enabled if abs(x) < asin(1/sqrt(2)). Is there a good reason for that, which I don't see, or is that an unnecessary limitation to the optimizing conditions?

Edit: The optimization seem to be implemented in hotspot/src/share/vm/opto/subnode.cpp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T21:46:21.100

I think your question about specifically Oracle JVM, because implementation of Math is implementation-dependent. Here is good answer about Dalvik implementation for example: [native code for Java Math class](https://stackoverflow.com/questions/14970750/native-code-for-java-math-class)

Generally

1.  sin(a) * sin(a) + cos(a) * cos(a) = 1
2.  sin(pi/2 - a) = cos(a)
3.  sin(-a) = -sin(a)
4.  cos(-a) = cos(a)

so we don't need sin/cos functions implementation for x < 0 or x > pi/4.

I suppose this is the answer ([http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5005861](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5005861)):

> We are aware of the almabench results and and osnews article on trigonometric performance. However, the HotSpot implementation of sin/cos on x86 for years has used and continues to use fsin/fcos x87 instructions in a range where those instructions meet the quality of implementation requirements, basically [-pi/4, pi/4]. Outside of that range, the results of fsin/fcos can be anywhere in the range [-1, 1] with little relation to the true sine/cosine of the argument. For example, fsin(Math.PI) only gets about half the digits of the result correct. The reason for this is that the fsin/fcos instruction implementations use a less than ideal algorithm for *argument reduction*; the argument reduction process is explained in bug 4857011.

Conclusion: you have seen results of argument reduction algorithm in action, not the limitation of optimization.

# string - Need to cut a string(Table Name) from Query in c#

> ID：15363812
> 
> 赞同：-2
> 
> 时间：2013-03-12T14:20:29.307
> 
> 标签：string, cut

My String/Query looks like this

1.  `insert into Employee Values(1,2,'xxx');`
2.  `update Employee2 set col1='xxx' where col2='yyy';`
3.  `select * from Employee3;`

I need to take/have `TableName` alone. Table name won't be constant it will be differed(Employee,Employee2,Employee3) according to DB. I'm new to `C#` please help me. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:26:20.420

要从查询中获取表的名称（或者在本例中为名为 'sql' 的字符串），请尝试以下操作：

```
 string sql = "select * from table ";
        int index1 = 0;
        int index2 = 0;
        int currentIndex = 0;
        int numSpaces = 0;
        char[] chArray = sql.ToCharArray();
        foreach (char c in chArray)
        {
            if (c == ' ')
            {
                numSpaces++;
                if (numSpaces == 3)
                    index1 = currentIndex;
                if (numSpaces == 4)
                {
                    index2 = currentIndex;
                    break;
                }
            }
            currentIndex++;
        }
        int length = index2 - index1;
        string tableName = sql.Substring(index1, length);
        MessageBox.Show(tableName); 
```

警告 - 此解决方案基于查找第 3 和第 4 个空格字符之间的单词。这限制了您拥有一个非常可预测的查询结构 - 更复杂的查询可能不适用于此解决方案。您的查询结构需要是：

```
"select column_name1,column_name2,column_name3 from table " 
```

您的查询在列之间不能有空格，并且最后也必须有空格。抱歉有限制，但这是我能想到的最好的；）

# c# - 使用访问令牌 - 调用 YouTube 数据 API C#

> ID：15363813
> 
> 赞同：0
> 
> 时间：2013-03-12T14:20:30.793
> 
> 标签：c#, youtube-api, access-token

我不清楚如何执行 API 请求来检索 YouTube API 的数据。

我使用此代码（[http://zavitax.wordpress.com/2012/12/17/logging-in-with-google-service-account-in-c-jwt/](http://zavitax.wordpress.com/2012/12/17/logging-in-with-google-service-account-in-c-jwt/)）获取访问令牌。下一步是：[https](https://developers.google.com/youtube/v3/guides/authentication?hl=en#OAuth2_Calling_a_Google_API) ://developers.google.com/youtube/v3/guides/authentication?hl=en#OAuth2_Calling_a_Google_API 。我不知道如何在我的应用程序中使用 www.googleapis.com/youtube/v3/video?access_token=ACCESS_TOKEN 来检索数据。如何使用我的访问令牌从 API 请求数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:36:20.843

建议使用[适用于 .NET 的 Google API 客户端库](https://code.google.com/p/google-api-dotnet-client/)。正如客户端库的网页所述，它仍在积极开发中，还不如其他一些语言的客户端库。不过，它仍然应该可以使用。

[YouTube Analytics API](https://code.google.com/p/google-api-dotnet-client/wiki/APIs#YouTube_Analytics_API)和[YouTube Data API v3](https://code.google.com/p/google-api-dotnet-client/wiki/APIs#YouTube_Data_API)可以使用特定的生成类。你需要下载那些

遗憾的是，我们的 C# 示例代码很少，但有一个[视频搜索](https://code.google.com/p/youtube-api-samples/source/browse/samples/dotnet/search.cs)示例。希望这足以让你开始。

要使用 Analytics API 执行任何操作，以及使用 Data API 执行任何写入操作，您需要使用 OAuth 2 进行身份验证。[客户端库文档](https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)中有关于如何执行此操作的说明。

客户端库由 Google 内部的一个团队维护，但不是 YouTube API 团队，因此，如果您发现任何问题，最好的方式是与维护者联系，是使用[公共问题跟踪器](https://code.google.com/p/google-api-dotnet-client/issues/list)。

# c# - Setting focus in WPF with MVVM

> ID：15363814
> 
> 赞同：6
> 
> 时间：2013-03-12T14:20:34.590
> 
> 标签：c#, wpf, data-binding, mvvm, focusmanager

I have Grid with multiple Textboxes. Depending on actions the user might take focus should be changed to one of the textboxes. My current solution uses a string property in the ViewModel and a data trigger in xaml to change focus. It works nicely but it seems a rather roundabout way to achieve this so I was wondering if it could be done in a clearner way?

```
 <Grid.Style>
        <Style TargetType="Grid">
            <Style.Triggers>
                <DataTrigger Binding="{Binding FocusedItem}" Value="number">
                    <Setter Property="FocusManager.FocusedElement" Value="{Binding ElementName=number}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding FocusedItem}" Value="name">
                    <Setter Property="FocusManager.FocusedElement" Value="{Binding ElementName=name}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding FocusedItem}" Value="id">
                    <Setter Property="FocusManager.FocusedElement" Value="{Binding ElementName=id}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Grid.Style> 
```

As you can see the value of the property and the name of the element is the same so I would like to do this i a single trigger instead of having one trigger per element.

Maybe someone can come up with a cleaner way?

Thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T00:38:33.733

我在我的一个项目中处理设置焦点的方式是使用焦点扩展（我很抱歉我不记得我在哪里看到了原始帖子）。

```
 public static class FocusExtension
    {
        public static bool GetIsFocused(DependencyObject obj)
        {
           return (bool)obj.GetValue(IsFocusedProperty);
        }

        public static void SetIsFocused(DependencyObject obj, bool value)
        {
            obj.SetValue(IsFocusedProperty, value);
        }

        public static readonly DependencyProperty IsFocusedProperty =
                DependencyProperty.RegisterAttached(
                 "IsFocused", typeof(bool), typeof(FocusExtension),
                 new UIPropertyMetadata(false, OnIsFocusedPropertyChanged));

        private static void OnIsFocusedPropertyChanged(DependencyObject d,
                DependencyPropertyChangedEventArgs e)
        {
            var uie = (UIElement)d;
            if ((bool)e.NewValue)
            {
                uie.Focus();
            }
        }
    } 
```

然后在 xaml 文件中，我将其用作依赖属性：

```
<TextBox Uid="TB1" FontSize="13" localExtensions:FocusExtension.IsFocused="{Binding Path=TB1Focus}" Height="24" HorizontalAlignment="Left" Margin="113,56,0,0" Name="TB_UserName" VerticalAlignment="Top" Width="165" Text="{Binding Path=TB1Value, UpdateSourceTrigger=PropertyChanged}" /> 
```

然后，您可以使用绑定来设置焦点。

# jquery - Display scroll bar in a mobile emulator

> ID：15363819
> 
> 赞同：1
> 
> 时间：2013-03-12T14:20:45.953
> 
> 标签：jquery, jquery-mobile, scrollbar, mobile-website

The following Jquery code produces a `scroll bar` in a opera mini mobile emulator browser.

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />

        <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
        Remove this if you use the .htaccess -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        <title>buttons_create_avoid</title>
        <meta name="description" content="" />
        <meta name="author" content="siddarth" />

        <meta name="viewport" content="width=device-width; initial-scale=1.0" />

        <link rel="stylesheet" href="./Jquery library/themes2/jquery.mobile-1.0.min.css" />
        <script type="text/javascript" src="./Jquery library/jquery-1.6.4.min.js"></script>
        <script type="text/javascript" src="./Jquery library/jquery.mobile-1.0.1.min.js"></script>

    </head>

    <body>

        <div data-role = "page" data-theme = "b">

            <div data-role = "header">
                <h1>This is Buttons Page</h1>
            </div>

            <div data-role = "content">
                <button>Button</button>
                <input type="submit" value="submit" data-corners = "false" /> <!-- If data-corners is false then square button -->
                <input type="reset" value="reset" data-icon = "home"/> <!-- A pic is inserted in the button -->
                <input type = "submit" value = "This button fits to the length of the word" data-inline />
                <input type="submit" value = "submit" data-shadow = "false" /> <!-- Now this button has no shadow like other -->
                <p>Now The standard Jquery buttons will not be created, cos of: data-role = "none"</p>

                <input type = "submit" value="submit" data-role = "none" />
            </div>
        </div>
    </body>

</html> 
```

Most of the jQuery mobile pages produces that annoying vertical navigation or the scroll bar, when I open this page in the mobile emulator.

What is the reason for this.?

![The emulator](/home/siddarth/Pictures/Screenshot from 2013-03-12 20:18:42.png)

# c# - how this statement getting compared in VB.net

> ID：15363820
> 
> 赞同：0
> 
> 时间：2013-03-12T14:20:47.353
> 
> 标签：c#, vb.net

In below code if statement is between integers, that I am not getting how its comparing ? I want it to replicate in C#.net

```
Public Function QSBarcodeCheckLicenseVersion(ByRef eVersionToCheck As enmBC_LIC_Version) As Boolean
    Dim lLicense As Integer

    lLicense = 8

    **If lLicense And eVersionToCheck Then**
        QSBarcodeCheckLicenseVersion = True
    Else
        QSBarcodeCheckLicenseVersion = False
    End If

End Function

Public Enum enmBC_LIC_Version
    BC_LIC_DEMO = &H1
    BC_LIC_LINEAR = &H2
    BC_LIC_PDF417 = &H4
    BC_LIC_DATAM = &H8
End Enum 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:26:25.697

你需要一个位`and`：

```
if ((ILicence & (int)eVersionToCheck) != 0) 
```

实际的实现将是：

```
public bool QSBarcodeCheckLicenseVersion(enmBC_LIC_Version eVersionToCheck)
{ 
   Int32 lLicense = 8;

   return ((lLicense & (int)eVersionToCheck) != 0);            
} 
```

**笔记**

但是，您可以重写该方法以仅使用枚举值，如@SwDevMan81 在他的回答中所示。就使用枚举而言，这可能是更好的形式！

[在这里演示](http://rextester.com/live/KILUM26639)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:27:32.883

它进行按位比较。在 C# 中，您可以使用“&”。

```
// Pseudo code
QSBarcodeCheckLicenseVersion = (lLicense & eVersionToCheck); 
```

实际版本：

```
void Main()
{
    enmBC_LIC_Version v = enmBC_LIC_Version.BC_LIC_LINEAR /*| enmBC_LIC_Version.BC_LIC_DATAM*/;
    bool outp = QSBarcodeCheckLicenseVersionFunc(v);
    Console.WriteLine(outp);
}

public bool QSBarcodeCheckLicenseVersionFunc(enmBC_LIC_Version eVersionToCheck)
{
    enmBC_LIC_Version lLicense = enmBC_LIC_Version.BC_LIC_DATAM;
    return ((lLicense & eVersionToCheck) == lLicense);
}

// Define other methods and classes here
[Flags]
public enum enmBC_LIC_Version
{
    BC_LIC_DEMO = 0x01,
    BC_LIC_LINEAR = 0x02,
    BC_LIC_PDF417 = 0x04,
    BC_LIC_DATAM = 0x08
} 
```

在 .NET 4.0 及更高版本中，您可以使用[HasFlag](http://msdn.microsoft.com/en-us/library/system.enum.hasflag.aspx)

```
return eVersionToCheck.HasFlag(lLicense); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T14:27:46.517

```
Public bool QSBarcodeCheckLicenseVersion(enmBC_LIC_Version eVersionToCheck)
{
    int lLicense = 8;

    if ((lLicense & eVersionToCheck) != 0)
        return true;
    else
        return false;
}

Public enum enmBC_LIC_Version
{
    BC_LIC_DEMO = 1,
    BC_LIC_LINEAR = 2,
    BC_LIC_PDF417 = 4,
    BC_LIC_DATAM = 8
} 
```

显然Servy是对的。我可以发誓 int 在 0==false 的基础上直接评估为 bool。不知道哪种语言有效。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-12T14:24:50.753

`enmBC_LIC_Version`，作为一个枚举，只是幕后的一个整数，具有不同文字值的花哨名称。代码对该数字与数字执行按位与`8`。由于 8 是有效枚举之一，因此如果枚举不是 ，则结果将为 0 `BC_LIC_DATAM`。简而言之，它正在查看枚举是否设置为`BC_LIC_DATAM`.

在 C# 中，您将使用`&`按位 AND，因此函数将如下所示：

```
return (enmBC_LIC_Version.BC_LIC_DATAM & eVersionToCheck) != 0; 
```

（注意我使用`enmBC_LIC_Version.BC_LIC_DATAM`了而不是`8`因为它使代码*更*容易阅读。）

# c# - 网站经常超时，但无法确定原因

> ID：15363822
> 
> 赞同：0
> 
> 时间：2013-03-12T14:20:49.680
> 
> 标签：c#, asp.net, iis, windows-server-2008

我在这里寻求一些一般性建议。我们在 Windows Server 2008 R2 和 IIS 7.5 以及 SQL Server 2008 上有一个 ASP.net 4 Web 表单应用程序。我们遇到了网站超时问题，似乎是随机的。当人们注意到网站开始超时时，我们已经收到了关于人们在网站上做什么的报告，并且这些报告之间没有一致性。我们还尝试了用户报告他们正在做的所有事情，并且不乐意让网站崩溃。我们在站点上有静态 html 页面（尽管使用 .net4 友好的 URL），这些页面会在站点超时时显示。

起初我们认为这是一次网络攻击，所以花时间确保所有端口都已关闭，远程访问仅可用于选择 IP，并通过外部垃圾邮件过滤器路由邮件（允许我们关闭端口 25）。我们还进行了病毒和恶意软件扫描，但没有发现任何结果。

在这些问题开始出现时，我们已经对网站进行了更新，但是为时已晚，网站上发生了太多事情，我们可以回滚更改而不会遇到比现在更头痛的问题。

我是一名开发人员，而不是支持/托管/硬件专家，所以对服务器设置了解不多，但我花了很长时间查看错误日志以寻找一些积极的迹象。当我查看站点关闭时的错误日志时，很少出现错误 - 有时会出现警告，但看起来没有任何结论（但这可能是我的服务器经验不足的问题）。顺便说一句，我不排除存在多个问题。

我设置了 IIS 调试工具，因为我昨天注意到 w3wp.exe 错误（类似于：[w3wp.exe 中发生未处理的 win32 异常](https://stackoverflow.com/questions/10589029/an-unhandled-win32-exception-occurred-in-w3wp-exe)），但该站点今天继续关闭，调试器中没有任何新内容。我已经通过 VS2010 在本地调试了该站点，并且无法重新创建任何问题。

所以真的，我已经没有想法了，几乎没有头发可以拔出来。任何人都可以在这方面有所了解，给我一些建议或要尝试的事情清单，以便准确指出这里发生了什么以及导致它挂起的原因吗？任何帮助感激不尽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:06:20.500

我们发现`TableAdapters`站点中有一些是静态的并且是为班级共享的。删除它们后，问题就停止了。无论如何，感谢您的帮助

# iphone - 重新排列 UIAlertView 的按钮布局

> ID：15363827
> 
> 赞同：0
> 
> 时间：2013-03-12T14:21:03.320
> 
> 标签：iphone, ios, objective-c, uialertview

只是一个快速的问题。是否可以更改 UIAlertView 按钮的布局？其中两个看起来不错 ![两个按钮](../Images/2c4a01fca9c0784514dc7bf55f2302eb.png)

但是三个按钮和更多的按钮浪费了这么多空间，有没有办法重新排列它们？所以它们像两个按钮一样是水平顺序的？

默认布局为：

![三个按钮](../Images/6353bd171988e997131d879dbdf6e705.png)

我唯一想到的是创建视图，在该视图上添加按钮并将其作为子视图添加到 UIAlertView ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:25:26.710

恐怕您必须创建自己的自定义 AlertView：

> **子类化注释**
> 
> UIAlertView 类旨在按原样使用，不支持子类化。
> 
> 此类的视图层次结构是私有的，不得修改。-[苹果](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html)

关于自定义 UIAlertViews，以下链接可能是您所追求的 - [https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:25:20.547

`UIAlertView`以下是您想要的自定义的最佳链接。

[https://github.com/stavash/UIBAlertView](https://github.com/stavash/UIBAlertView)

[https://github.com/TomSwift/TSAlertView](https://github.com/TomSwift/TSAlertView)

[更多获取自定义 UIAlertView 这是任何自定义控件的最佳站点。](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=UIalertView)

选择链接上方的任何一种表格并将其添加到您的要求中。

# tsql - SSRS/TSQL 日期格式

> ID：15363830
> 
> 赞同：1
> 
> 时间：2013-03-12T14:21:07.010
> 
> 标签：tsql, ssrs-2008, reporting, reporting-services

在 SSRS 中使用以下示例查询将返回月份作为单个数字 (1-12)。我想要将日期显示为 2000 年 1 月之类的日期。我将如何更改我的代码以便能够从单个数字月份格式化为 MMM YYYY 格式？我在 Visual Studio 本身中尝试了格式化，但它目前返回为 MMM YYYY。

```
select distinct count(*) as Count,
    con.STATE,
    month(con.sub_Date) as Month,
    year(con.sub_Date) as Year
    from contract con

    group by con.STATE,month(con.sub_date),year(con.sub_date) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:42:06.597

您可以将以下内容添加到查询中，以将预先格式化的月/年作为报表数据集的一部分返回 - 可能比尝试在报表级别重建它更容易：

```
select distinct count(*) as Count,
  con.STATE,
  month(con.sub_Date) as Month,
  year(con.sub_Date) as Year,
  left(datename(mm, sub_Date), 3) + ' ' + cast(year(sub_Date) as char(4)) as MonthYear
from contract con
group by con.STATE,
  month(con.sub_date),
  year(con.sub_date),
  left(datename(mm, sub_Date), 3) + ' ' + cast(year(sub_Date) as char(4)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T15:13:30.437

我通常更喜欢使用 CONVERT 来获取部分日期，尽管我没有看到任何 CONVERT 日期格式可以让您干净地获得 MON YYYY 输出。但是，格式 106 可以帮助您完成大部分工作。因此，将其与 RIGHT() 结合起来，将为您提供所需格式的日期。

```
SELECT  DISTINCT
        COUNT(*) AS Count ,
        [con].[STATE] ,
        MONTH([con].[sub_Date]) AS Month ,
        YEAR([con].[sub_Date]) AS Year ,
        RIGHT(CONVERT(CHAR(11), [con].[sub_Date], 106), 8) AS MonthYear
FROM    [dbo].[contract] AS con
GROUP BY [con].[STATE] ,
        MONTH([con].[sub_Date]) ,
        YEAR([con].[sub_Date]) ,
        RIGHT(CONVERT(CHAR(11), [con].[sub_Date], 106), 8) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T16:09:18.433

我强烈建议您在报告级别执行日期格式。

从查询中返回日期作为所需时间段的第一个日期，然后设置占位符/文本框的格式字符串。

这样做的原因是，当报表导出到 Excel 时，排序和数据操作可以按预期工作。

所以我会使用一个查询：

```
SELECT DISTINCT
    COUNT(*) AS Count ,
    con.STATE ,
    DATEADD(MONTH, DATEDIFF(MONTH, 0, con.sub_Date), 0) AS FirstOfMonth
FROM
    contract con
GROUP BY
    con.STATE ,
    DATEADD(MONTH, DATEDIFF(MONTH, 0, con.sub_Date), 0) 
```

然后在报告中使用格式代码（例如`MMM, YYYY`用于显示和分隔日期），`=Month(fields!FirstOfMonth.Value)`如果您需要组件进行分组。这将允许用户在需要时适当地旋转数据。

日期的格式是表示逻辑，如果可能的话，应该远离 SQL。

# reference - 为什么带有引用程序集的 VS2012 项目不能自动定位 4.0

> ID：15363832
> 
> 赞同：4
> 
> 时间：2013-03-12T14:21:16.143
> 
> 标签：reference, visual-studio-2012, target-framework

在 Visual Studio 2012 C# 控制台应用程序中，我将“.NET Framework Target”从 4.5 降级到 4.0。安装了两个框架的 Win 7 Pro。

然后我引用了一个程序集，该程序集通过警告抱怨以下内容：

`The primary reference "System.Threading.Tasks.Dataflow, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL" could not be resolved because it has an indirect dependency on the framework assembly "System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" which could not be resolved in the currently targeted framework. ".NETFramework,Version=v4.0". To resolve this problem, either remove the reference "System.Threading.Tasks.Dataflow, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL" or retarget your application to a framework version which contains "System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a".`

如果我此时尝试编译，则会出错，因为引用程序集的类型和名称空间不可用，就好像根本没有引用程序集一样。

“添加引用”对话框没有**任何**System.Runtime 选项，但如果我手动浏览到 C:\Windows\Microsoft.NET\Framework\v4.0.30319\ 并引用在那里找到的 System.Runtime 程序集，警告就会消失我能够编译。

问题：

1.  System.Runtime 版本的这种强制是否是未来的潜在问题（部署）。

2.  如果 VS 项目属性设置为针对 Framework 4.0（这与针对 4.0 SystemRuntime/CLR 无关），为什么引用的 DLL 没有选择它，为什么手动添加对我的项目的引用可以解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:57:23.557

即使该库`System.Runtime`位于`C:\Windows\Microsoft.NET\Framework\v4.0.30319\`目录中，它也不是 .NET 4.0 框架的一部分。.NET 4.5 是 4.0 的就地更新，安装在具有相同版本号的同一文件夹中。

这是一个屏幕截图，证明该库在 play .NET 4.0 安装中不存在：

![普通 4.0 安装](../Images/7360cdc4595cabb8e33dbc96f39993c7.png)

您还可以通过浏览`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework`找到所有已安装框架版本的原始程序集的目录来验证这一点。您会发现和子目录的`System.Runtime.dll`一部分。`.NETCore\v4.5``.NETPortable\v4.5`

可以将库添加到项目的原因是运行时在 4.0 和 4.5 之间没有更改，因此 Visual Studio 不知道甚至不关心您手动添加的库是由 4.5 安装的。在这种情况下，Visual Studio 中的目标只是一个过滤器，可避免您意外将 4.5 程序集添加到目标 4.0 的项目中。

**附加信息：**

Rick Strahl 有一篇关于该主题的非常好的博客文章，其中进行了更详细的分析：

[http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40](http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T20:15:29.363

> System.Runtime 版本的这种强制是一个潜在的问题吗

是的，这行不通。它可以在您的机器上运行，因为您安装了 4.5。您的程序将在只有 4.0.0 的客户端计算机上崩溃并烧毁。 **永远不要**从 Framework 目录添加引用。令人遗憾的是，他们仍然存在，他们让[太多的程序员陷入困境](https://stackoverflow.com/a/13750130/17034)，但向后兼容是神圣的。

构建系统只能告诉您在使用参考程序集时遇到了问题。Add Reference 对话框中显示的那些，它们存储在 c:\program files\reference 程序集中，**与**运行时程序集不同。你知道这行得通，你确实得到了警告。其中，以一种有点笨拙的方式告诉您，您的程序将无法在具有 4.0.0 的机器上运行。不要忽略该警告，您确实必须以 4.5 为目标才能使用该程序集。你无法避免的硬性要求。

> 为什么引用的 DLL 没有选择它

因为它拒绝构建一个无法运行的程序。功能，而不是错误。

# python - Synchronize local array with (SQLite) table

> ID：15363835
> 
> 赞同：0
> 
> 时间：2013-03-12T14:21:28.647
> 
> 标签：python, sql, sqlite, python-3.3

I have an object that has three methods:

*   `load()`: Loads database table's contents into a local object-attribute-list
*   `add()`: adds an element to the list
*   `remove()`: removes an element from the list
*   `save()`: Synchronizes the list with the database (this is where my question lies, details follow)

The first three methods are straight forward. But to synchronize the data back to the database-table, I want

*   those elements that have changed to be `UPDATE`d/`REPLACE`d
*   those that are new in the list and don't exist in the db table to be `INSERT`ed
*   those that are removed from the list but still exist in the db-table to be `DELETE`d

Is there a way to do all that magic in *one* incredibly-elegant SQL command or would I need to do it in two steps, such as

*   `INSERT OR REPLACE...` first, then
*   `DELETE FROM ... WHERE ...`?

Any ideas or suggestions would be much appreciated. Please excuse me if there is an obvious solution to this that I have missed.

# xslt - 在生成的输出中保留缩进

> ID：15363840
> 
> 赞同：2
> 
> 时间：2013-03-12T14:21:44.057
> 
> 标签：xslt

使用 XSLT 生成一些代码时，我无法正确对齐缩进。

在**生成的代码**中，您会注意到第一个`public Builder name...`与预期的方式对齐。但是该方法的其余部分未正确对齐，然后所有其他方法未正确对齐。我打算让它们缩进以遵循其余代码的缩进。

如何解决此对齐问题？

**不用担心生成代码的正确性，只是尝试展示一个示例。**

* * *

**XSLT**

```
<?xml version="1.0"?>
<xsl:stylesheet version="2.0"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:fn="http://www.w3.org/2005/xpath-functions">

    <xsl:output method="text" name="text" />
    <xsl:strip-space elements="*" />

    <xsl:template match="..." mode="builder">public Builder <xsl:value-of select="fu:lowercaseFirstLetter(@name)"/>(final String value) {
        this.dao.getMy<xsl:value-of select="fu:capitalizeFirstLetter(../@name)"/>().set<xsl:value-of select="fu:capitalizeFirstLetter(@name)"/>(value);
        return this;
    }
    </xsl:template>

    <xsl:template match... >
        <xsl:result-document href="..." format="text">
public class <xsl:value-of select="..."/> implements Parent {

    public boolean test(Object o) {

        <xsl:apply-templates mode="builder"/>

        return true;

    }

}

        </xsl:result-document>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

**生成的代码**

```
public class ATest implements Parent {

    public boolean test(Object o) {

        public Builder name(final String value) {
        dao.getMyATest().set_valid(value);
        return this;
    }
    public Builder name(final String value) {
        dao.getMyATest().set_valid(value);
        return this;
    }
    public Builder name(final String value) {
        dao.getMyATest().set_valid(value);
        return this;
    }
    public Builder name(final String value) {
        dao.getMyATest().set_valid(value);
        return this;
    }

        return true;

    }

} 
```

* * *

**预期结果**

```
public class ATest implements Parent {

    public boolean test(Object o) {

        public Builder name(final String value) {
            dao.getMyATest().set_valid(value);
            return this;
        }
        public Builder name(final String value) {
            dao.getMyATest().set_valid(value);
            return this;
        }
        public Builder name(final String value) {
            dao.getMyATest().set_valid(value);
            return this;
        }
        public Builder name(final String value) {
            dao.getMyATest().set_valid(value);
            return this;
        }

        return true;

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:46:36.103

解决方案1：不用担心生成的Java缩进，通过格式化程序作为后处理阶段。

解决方案 2：非常注意空格的产生。始终使用 xsl:text 将任何文字文本输出包含到结果中，包括空格，以区分您要输出的空格和用于使样式表可读的空格。在所有模板规则上都有一个“缩进”参数，给出当前缩进级别，并在调用 apply-templates 时添加 X

```
<xsl:apply-templates>
  <xsl:with-param name="indent" select="$indent + 2"/>
</xsl:apply-templates> 
```

有一个函数或命名模板来生成缩进空格：

```
<xsl:call-template name="do-indent">
  <xsl:with-param name="indent" select="$indent + 2"/>
</xsl:call-templates> 
```

# vb.net - VB.NET System.NullReferenceException

> ID：15363845
> 
> 赞同：3
> 
> 时间：2013-03-12T14:21:56.013
> 
> 标签：vb.net, dataset, nullreferenceexception

我有一个 VB.NET 程序，它从 10 个不同的数据库构建多个数据集。

我得到这个例外：

```
System.NullReferenceException: Object referenced not set to an 
instance of an object: 
```

此错误发生在以下几行：

```
Me.OverTableAdapter.Adapter.SelectCommand.CommandTimeout = 60000
Me.OverTableAdapter.Fill(Me.Dataset.Over, TodayDt, TodayEnd) 
```

这个异常是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T14:25:11.010

好吧，如果它在这条线上失败：

```
Me.OverTableAdapter.Adapter.SelectCommand.CommandTimeout = 60000 
```

然后：

*   `Me.OverTableAdapter`是`Nothing`
*   `Me.OverTableAdapter.Adapter`是`Nothing`
*   `Me.OverTableAdapter.SelectCommand`是`Nothing`

（您向我们展示的第二行无关紧要，因为您还没有走那么远。）

根据您向我们展示的内容，我们无法判断，但您应该能够在调试器中或通过添加诊断日志来找出答案。

一旦你弄清楚它失败的*原因*，修复它应该很容易 - 几乎可以肯定只是正确初始化它的问题。将此适配器的初始化与其他适配器的初始化进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:32:35.227

出现此异常的原因是`SelectCommand`will 是`TableAdapter.Fill`从而不是之前初始化的。`Timeout`因此，当您尝试更改`NullReferenceException`.

您可以`TableAdapter`通过在与`designer.vb/designer.cs`.

```
Namespace DataSet1TableAdapters

    Partial Public Class OverTableAdapter
        Public Property CommandTimeout As System.Int32
            Get
                If Me.CommandCollection Is Nothing OrElse Me.CommandCollection.Length = 0 Then
                    Return -1
                Else
                    Return Me.CommandCollection(0).CommandTimeout
                End If
            End Get
            Set(value As System.Int32)
                If Not Me.CommandCollection Is Nothing Then
                    For Each cmd In Me.CommandCollection
                        cmd.CommandTimeout = value
                    Next
                End If
            End Set
        End Property
    End Class

End Namespace 
```

现在，您可以在创建适配器实例后使用此属性。

# ios - Tumblr API：OAuth 问题。允许/拒绝按钮和其他提示

> ID：15363848
> 
> 赞同：0
> 
> 时间：2013-03-12T14:22:03.163
> 
> 标签：ios, oauth, tumblr

关于 OAuth 的问题：

当我尝试部署 OAuth 时，Tumblr 让我眼前一亮。

好的，现在我这样做。（我想，我知道，不确定）。

关于 Tumblr 的问题：

1.  我是对的，在 ACCESS_TOKEN POST-ed 之后，Tumblr 只发回 token 和 token_secret 吗？
2.  如果我“拒绝”应用程序，tumblr 使用 url: =">http://example.com/callback# *=* ?
3.  如果我“允许”应用程序，tumblr 使用带有参数“oauth_token”和“oauth_verifier”的示例网址？
4.  如果我“允许”应用程序，tumblr 想要重定向到回调 url？
5.  如果我两次“拒绝”或“允许”应用程序（我阻止 tumblr 重定向到 callback_url），tumblr 开始加载：[http](http://www.tumblr.com/dashboard) ://www.tumblr.com/dashboard ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:06:45.680

好的，我找到了我的问题的答案。

1.  是的，这是真的。Access_token POST-ed 和服务器将其发回给我
2.  是的，如果我“拒绝”应用程序，tumblr 使用 url: CALLBACK_URL with oauth_token 和 oauth_verifier with zero-values (NULL values)
3.  是的，如果我“允许”申请，tumblr 将 oauth_token 和 oauth_verifier 发回给我（您必须使用它们来获取 Access_token）
4.  如果我“允许”应用程序，tumblr REDIRECT 到 CALLBACK_URL（所以，抓住它）。
5.  如果我“拒绝”或“允许”应用程序两次，tumblr 开始加载：[http](http://www.tumblr.com/dashboard) ://www.tumblr.com/dashboard 。

PS：

如果我需要重新登录用户，我需要使用以下 URL 从 tumblr 注销：

[http://www.tumblr.com/logout](http://www.tumblr.com/logout)

# jenkins - Jenkins 和 Bitbucket：建立在链接上

> ID：15363849
> 
> 赞同：1
> 
> 时间：2013-03-12T14:22:04.060
> 
> 标签：jenkins, build-automation, bitbucket

我正在尝试调出 bitbucket -> jenkins 链接。但我没有改变，在不同的设置下尝试过（见图片）

如果我打电话，它会起作用

```
http://URL/jenkins/job/PROJECTNAME/build?token=buildfromjenkins 
```

可以知道问题出在哪里吗？

Jenkins Config（工作） ![詹金斯配置](../Images/9291cfe1603c043d9c4837da80c02d5f.png) 配置链接 ![配置链接](../Images/d6458f6faf817e97a982740c4bfe6148.png)

配置了一个服务 ![配置服务](../Images/8c9d1c0ea28969d6fb017bb2f4e4a65e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T08:55:48.273

不要在端点中添加令牌参数。删除端点 URL 中的参数并将您的令牌添加到令牌框中。然后它将起作用。

![在此处输入图像描述](../Images/d6c6aa2adc71980f9c394d9b4e72c478.png)

# android - Java 运行时 illegastateexception。指定的孩子已经有父母

> ID：15363850
> 
> 赞同：0
> 
> 时间：2013-03-12T14:22:07.963
> 
> 标签：android, android-view

我正在尝试播放画廊中的视频。单击按钮时，它应该开始在 videoView 中播放视频。但是我得到了指定的孩子已经有父母的例外。以下是我的代码：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button bt= (Button) findViewById(R.id.button1);
    final String filename = "/sdcard/myvideo.mp4";  
    Log.e("Video Error", "Problem Below");
     final VideoView videoView1 = (VideoView)findViewById(R.id.videoview);
        Log.e("Video Error", "Problem Above");
     setContentView(videoView1);
     videoView1.setVideoPath(filename);
    // videoView1.setMediaController(MainActivity.this);
     videoView1.requestFocus();
     bt.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
              //String fileName = "android.resource://" + getPackageName() + "/" + R.raw.sample;

                Toast.makeText(getApplicationContext(), "Hey Baby", 5000);
              //videoView1.start();
              //Exit after saved
             // finish();

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}
} 
```

当我尝试初始化我的 VideoView 时，它给出了以下异常：

```
:12:11.838: E/AndroidRuntime(1124): FATAL EXCEPTION: main
03-12 19:12:11.838: E/AndroidRuntime(1124): java.lang.RuntimeException: Unable to start      activity ComponentInfo{com.et.getimages/com.et.getimages.MainActivity}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:26:13.567

我怀疑是因为你打`setContentView()`了两次电话。第一次创建 VideoView 然后当`setContentView(videoView1);`

但是，如果没有完整的堆栈跟踪，则无法分辨。

ps 你需要添加`show()`到你的 toast 以使其显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:30:35.380

您在此语句中设置内容视图：

`setContentView(R.layout.activity_main);`

然后您从`layout/activity_main.xml`另一个视图中定义的视图中获取：

`(VideoView)findViewById(R.id.videoview);`

这实际上是`layout/activity_main.xml`

然后你再次尝试设置内容视图：

`setContentView(videoView1);`

但`videoView1`已经有父级，因为它是其中的一部分，`layout/activity_main.xml`因此您不能在其中使用此视图，`setContentView()`因为此方法正在为参数中给出的视图设置根目录。

# algorithm - ELKI COPAC 实施

> ID：15363851
> 
> 赞同：1
> 
> 时间：2013-03-12T14:22:09.330
> 
> 标签：algorithm, data-mining, cluster-analysis, elki

我尝试在官方网站 (mouse.csv) 上提供的示例数据集上运行 COPAC ELKI 实现，但我得到一个 NullPointerException，这让我认为我忽略了一些细节（我感到羞耻）。

例外情况如下：

> de.lmu.ifi.dbs.elki.database.ids.integer.DoubleDistanceIntegerDBIDPair.compareByDistance(Unknown Source) at de.lmu.ifi.dbs.elki.distance.distanceresultlist.AbstractKNNHeap$Comp 的任务失败 java.lang.NullPointerException。在 de.lmu.ifi.dbs.elki.utilities.datastructures.heap.TopBoundedHeap.add(未知来源）在 de.lmu.ifi.dbs.elki.database.query.knn.LinearScanRawDoubleDistanceKNNQuery.getKNNForObjectBenchmarked（未知来源）在 de.lmu.ifi.dbs.elki.database.query.knn.LinearScanRawDoubleDistanceKNNQuery.getKNNForObject（未知来源） ) 在 de.lmu.ifi.dbs.elki.index.preprocessed 的 de.lmu.ifi.dbs.elki.database.query.knn.LinearScanRawDoubleDistanceKNNQuery.getKNNForDBID(Unknown Source)。localpca.KNNQueryFilteredPCAIndex.objectsForPCA(Unknown Source) at de.lmu.ifi.dbs.elki.index.preprocessed.localpca.KNNQueryFilteredPCAIndex.objectsForPCA(Unknown Source) at de.lmu.ifi.dbs.elki.index.preprocessed.localpca。 AbstractFilteredPCAIndex.preprocess(Unknown Source) at de.lmu.ifi.dbs.elki.index.preprocessed.localpca.AbstractFilteredPCAIndex.getLocalProjection(Unknown Source) at de.lmu.ifi.dbs.elki.index.preprocessed.localpca.AbstractFilteredPCAIndex。 getLocalProjection(Unknown Source) at de.lmu.ifi.dbs.elki.algorithm.clustering.correlation.COPAC.run(Unknown Source) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke( NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 de.lmu.ifi.dbs.elki.algorithm.AbstractAlgorithm.run(Unknown Source) 在 de.lmu.ifi.dbs.elki 的 java.lang.reflect.Method.invoke(Method.java:616)。 workflow.AlgorithmStep.runAlgorithms(Unknown Source) at [...]

这是我使用的参数设置：

-dbc.in [路径省略]/mouse.csv

-算法clustering.correlation.COPAC

-copac.preprocessor localpca.KNNQueryFilteredPCAIndex

-copac.partitionAlgorithm gdbscan.GeneralizedDBSCAN

-dbscan.epsilon 0.00400000

-dbscan.minpts 3

谁能给我一些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:38:14.773

您**必须**`k`为 kNN Local PCA指定参数：

```
-localpca.k 10 
```

在上一个 ELKI 版本中有一个小错误，其中参数被错误地标记为可选。这不是可选的。请注意，k 应显着大于数据维度，以提供稳定的 PCA 结果。

请注意，在鼠标示例等低维数据集上使用 COPAC 是没有意义的。

# javascript - Backbonejs - 防止路由器监听哈希变化

> ID：15363854
> 
> 赞同：-1
> 
> 时间：2013-03-12T14:22:16.557
> 
> 标签：javascript, backbone.js, marionette

好的，这很奇怪，但我希望能得到一些想法。有没有办法防止 Backbone.Router 监听哈希变化？

我想使用路由器的声明性功能——能够声明路由和处理程序的映射——但我不希望路由器在哈希更改时触发处理程序，而是在我专门用路由表达式调用它时。

我发现调用路由器的唯一方法是使用：

```
router.navigate(route, {trigger:true}); 
```

但这实际上改变了 URL，这是我不想要的。

或者，Backbone 或 Marionette 中是否有其他对象可以为我提供这种声明性功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:32:02.550

尝试使用

```
router.navigate(route, { trigger:false}); 
```

我在我的应用程序中做了一个测试，一旦我做出这个改变，我通过这个调用发送的路由就不再起作用了。如果我在 url 中输入路线并点击条目，我仍然可以在应用程序中导航。

# oscommerce - oscommerce xml 提要

> ID：15363857
> 
> 赞同：0
> 
> 时间：2013-03-12T14:22:24.067
> 
> 标签：oscommerce

我以前从未使用过 oscommerce，但我以前使用过的自定义（在 Wordpress 和纯 PHP 上）要求我将 XML 提要添加到他的 oscommerce 网站。

请您指导我：1）是否有任何现有的插件/模块可供使用？或 2）我应该自己做 xml 提要吗？

我需要网站从以下 xml 中获取日期：http: [//www.atsdistribution.co.uk/feeds/Xml_All_Products.aspx](http://www.atsdistribution.co.uk/feeds/Xml_All_Products.aspx) 和 [http://www.atsdistribution.co.uk/feeds/Xml_All_Stock.aspx](http://www.atsdistribution.co.uk/feeds/Xml_All_Stock.aspx)

并自动更新产品。

我正在研究谷歌，但我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:05:53.353

据我所知，没有插件会采用 XML 提要并填充产品或库存。您必须执行以下操作：

1.  使用 CURL 或其他方式首先在您的站点服务器上获取此 XML 文件。
2.  然后从此 XML 创建一个 csv。
3.  调用 easy populate（AN 插件）来填充您的产品。

这将节省您在第 3 步的努力。

# php - Magento - 如何在管理员的同一标签下添加多个模块？

> ID：15363859
> 
> 赞同：0
> 
> 时间：2013-03-12T14:22:26.733
> 
> 标签：php, xml, magento

我创建了三个模块，它们都可以通过管理面板配置进行配置。我怎样才能为所有这些模块设置一个标签？我认为这是一个 system.xml 设置：

第一个模块：

```
<?xml version="1.0"?>
<config>
<tabs>
    <addthis translate="label" module="share">
        <label>Label</label>
        <sort_order>100</sort_order>
    </addthis>
</tabs>
<sections>
... 
```

第二个：

```
<?xml version="1.0"?>
<config>
<tabs>
    <slider translate="label">
        <label>Label</label>
        <sort_order>100</sort_order>
    </slider>
</tabs>
<sections>
... 
```

第三个：

```
<?xml version="1.0"?>
<config>
<tabs>
    <store translate="label">
        <label>Label</label>
        <sort_order>100</sort_order>
    </store>
</tabs>
<sections>
... 
```

期待感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:47:51.870

解决方案是为所有模块设置相同的选项卡：

```
<?xml version="1.0"?>
<config>
<tabs>
<name translate="label" module="share">
    <label>Label</label>
    <sort_order>100</sort_order>
</name>
</tabs>
...
<tab>name</tab> 
```

所有模块的选项卡名称都是“名称”，每个模块的标签可以不同。

感谢[fab](https://stackoverflow.com/users/664108/fab)找到解决方案。

# php - 用于解析和发送电子邮件的 PHP 类

> ID：15363865
> 
> 赞同：0
> 
> 时间：2013-03-12T14:22:43.390
> 
> 标签：php, piping, exim4, email-parsing

我有 Exim4 将传入的电子邮件传送到我的 PHP 脚本。

这个 PHP 脚本应该解析它，修改一些标题并可能添加一些信息，例如：

> 此电子邮件由 example.com 服务发送。

（纯文本和 html 版本）。

我正在寻找的是一个 PHP 类，它可以从原始电子邮件（标题+内容+附件）创建要使用的对象。电子邮件可以是普通的 || html，单部分 || 多部分，类似gmail的等。

完成操作后，我应该能够发送修改后的电子邮件。

你能给我一些建议吗？谢谢！

我已经尝试过 Zend_Mail，但它不适用于此类任务。

我不想自己写解析器，我很确定它会是另一辆自行车。

我宁愿不使用任何扩展，并避免在服务器上进行任何不必要的配置更改。

# mono - Mono for android - 如何连接到 pc 以复制文件

> ID：15363870
> 
> 赞同：0
> 
> 时间：2013-03-12T14:22:56.790
> 
> 标签：mono, xamarin.android

我希望我的应用程序连接到 pc 并将文件（我们知道 pc 中的路径）复制到平板电脑。但我知道使用套接字将应用程序平板电脑连接到应用程序 PC，但我不想使用套接字，因为 pc 不能听。

有可能的 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:09:52.127

您将需要在您的 PC 上安装一个服务器，该服务器将允许您访问其上的文件系统。即使您与 PC 连接的设备处于主机模式，PC 也不知道该怎么做，因为它本身处于主机模式。

所以你有几个选择：

1.  使用 Dropbox、FTP 等现有服务在手机和 PC 之间同步文件。
2.  编写您自己的服务以从手机中提取文件。在这里，我想您可以使用它[`adb`](http://developer.android.com/tools/help/adb.html)来进行实际的文件传输。
3.  在您的 PC 上创建 Windows/SMB/CIFS 共享文件夹并通过网络访问文件，也许[UNC 路径](http://en.wikipedia.org/wiki/Path_%28computing%29#UNC_in_Windows)可以工作？
4.  黑色巫毒魔法。

# c# - 在表单加载事件中加载保存的 XML 文件

> ID：15363875
> 
> 赞同：0
> 
> 时间：2013-03-12T14:23:12.470
> 
> 标签：c#, xml, load

我创建了一个 XML 文件，它保存得很好。不幸的是，保存的文件不会在我的表单加载事件中加载。我试图弄清楚出了什么问题，但我仍然不知道如何加载它。你能帮助我吗？

这是我的表单加载事件

```
string path = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);

if (!Directory.Exists(path + "\\iproject"))
{
    Directory.CreateDirectory(path + "\\iproject");
}

if (!File.Exists(path + "\\iproject\\address.xml"))
{
    File.Create(path + "\\iproject\\address.xml");
}

XmlTextWriter xw = new XmlTextWriter(path + "\\iproject\\address.xml", Encoding.UTF8);
xw.WriteStartElement("people");
xw.WriteEndElement();
xw.Close();

// load items wen form load event
XmlDocument xdoc = new XmlDocument();
xdoc.Load(path + "\\iproject\\address.xml");
foreach (XmlNode xnode in xdoc.SelectNodes("people/person"))
{
    person p = new person();
    p.name = xnode.SelectSingleNode("name").InnerText;
    p.ipaddress = xnode.SelectSingleNode("ipaddress").InnerText;
    people.Add(p);
    listBox1.Items.Add(p.name);
} 
```

这是我的保存事件

```
XmlDocument xdoc = new XmlDocument(); // saving listview data to xml file
string path = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
xdoc.Load(path + "\\iproject\\address.xml");
XmlNode xnode = xdoc.SelectSingleNode("people");
xnode.RemoveAll();

foreach (person p in people)
{
    XmlNode xTop = xdoc.CreateElement("person");
    XmlNode xname = xdoc.CreateElement("name");
    XmlNode xipaddress = xdoc.CreateElement("ipaddress");

    xname.InnerText = p.name;
    xipaddress.InnerText = p.ipaddress;

    xTop.AppendChild(xname);
    xTop.AppendChild(xipaddress);
    xdoc.DocumentElement.AppendChild(xTop);
}

xdoc.Save(path + "\\iproject\\address.xml"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:32:53.500

有关该错误的更多信息会有所帮助。

但是，在我看来，我会说您在加载时总是在编写另一个“人”元素，即使文档已经存在。

您的负载中的第二个 If 语句应该是。

```
 if (!File.Exists(path + "\\iproject\\address.xml"))
    {
        File.Create((path + "\\iproject\\address.xml"));

        XmlTextWriter xw = new XmlTextWriter(path + "\\iproject\\address.xml", Encoding.UTF8);
        xw.WriteStartElement("people");
        xw.WriteEndElement();
        xw.Close();
    } 
```

# java - 使用 Java SSH API 时 sqlplus 缺少输出

> ID：15363876
> 
> 赞同：1
> 
> 时间：2013-03-12T14:23:19.943
> 
> 标签：java, bash, ssh, sshj

我有一个执行 sqlplus 命令的 shell 脚本 (bash)，当我从终端（或 PuTTY 或 Xshell 等 SSH 客户端）运行它时，它运行良好，这意味着我可以读取它的输出。现在我创建了一个 Web 界面，用户可以在其中启动此脚本，但执行失败，因为似乎没有执行相同的 sqlplus。看看我创建的以下简化示例：

*测试外壳脚本（test.sh）：*

```
echo 1
sqlplus -s SIEBEL/SIEBEL@SBLQA02 @select.sql
echo 2 
```

*选择.sql：*

```
select 'a' from dual;
exit; 
```

*在终端中生成的输出：*

```
1

'
-
a

2 
```

*在 Web 客户端上生成的输出（到目前为止，我尝试将 Ganymed SSH-2 用于 Java 和 sshj，产生相同的结果）：*

```
1
2 
```

如您所见，只有简单的 echo 命令生成了输出。sqlplus 输出发生了什么？有什么遗漏吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:48:29.833

万一它对某人有帮助：sqlplus不在SSH API在应用程序服务器中创建的会话的路径中，所以找不到sqlplus命令，显然没有生成标准输出。在调用 shell 脚本之前导出 sqlplus 路径可以解决该问题。

# c# - 将我的多窗口 WPF 应用程序转换为一个窗口？

> ID：15363877
> 
> 赞同：3
> 
> 时间：2013-03-12T14:23:22.063
> 
> 标签：c#, wpf, window

我制作了一个 WPF 应用程序，它可以根据用户交互打开连续的窗口。例如，第一个 winodw 询问用户想要在哪个模块上工作，当做出选择并按下按钮时，会打开一个新窗口，显示一些供应商和摘要计数。选择其中一个供应商并按下“编辑”按钮会打开另一个窗口，显示该供应商的详细信息。单击详细信息，然后单击按钮打开另一个窗口，用户可以在其中更改一些数字等。然后用户关闭该窗口，选择不同的项目并进行编辑，或关闭该窗口并选择不同的供应商等。每个窗口都有自己的当前查看模型。我想摆脱所有层的窗户。选项卡控件似乎不是一个好的选择，因为用户必须通过正确的序列等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T15:13:15.757

就我个人而言，我更喜欢将 a`<ContentControl />`用于我的内容区域，并根据用户当前的“窗口”换出活动内容

我的博客上有[一个示例](http://rachel53461.wordpress.com/2011/12/18/navigation-with-mvvm-2/)，您可以查看，但基本组件如下所示：

视图模型：

```
ObservableCollection<IViewModel> AvailableScreens;
IViewModel ActiveScreen;

ICommand SetActiveScreenCommand; 
```

使用一些看起来像这样的 XAML：

```
<ContentControl Content="{Binding ActiveScreen}" /> 
```

我通常`DataTemplates`用来告诉 WPF 如何绘制每个 ViewModel

```
<Window.Resources>
    <DataTemplate DataType="{x:Type local:ModulesViewModel}">
        <local:ModulesView />
    </DataTemplate>

    <DataTemplate DataType="{x:Type local:VendorsViewModel}">
        <local:VendorView />
    </DataTemplate>

    <DataTemplate DataType="{x:Type local:EditVendorViewModel}">
        <local:EditVendorView />
    </DataTemplate>
</Window.Resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:24:42.063

您可以使用模仿 Visual Studio 行为的停靠框架，例如[AvalonDock 。](http://avalondock.codeplex.com)

# php - 打印类的实例化会暴露私有变量

> ID：15363884
> 
> 赞同：1
> 
> 时间：2013-03-12T14:23:46.027
> 
> 标签：php, security, oop

在 PHP 中，我创建了一个包含私有声明变量的类。

```
class testClass {
   private $_db_name = 'test_db';
   private $_db_user = 'test_user';
   private $_db_pass = 'test_pass';
} 
```

意外的是，在实例化类之后，我在`print_r`我设置的变量上运行了 a 并将这些私有变量打印到屏幕上。

```
$test = new testClass();
print_r($test); 
```

回报：

```
testClass Object
(
    [_db_name:testClass:private] => test_db
    [_db_user:testClass:private] => test_user
    [_db_pass:testClass:private] => test_pass
) 
```

这对我来说有点担心。如果我在我的服务器上打包了一个包含敏感信息的类，以供其他人包含和使用，而无需访问密码等，他们可以简单地转储这些。我是否在这里遗漏了一些重要的东西来防止这种行为发生？有没有更好的方法来处理对象中的敏感信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:38:36.340

将成员设置为私有并不意味着您查看它的方式的安全性（即隐藏敏感数据）。它只是针对使用扩展类或整个应用程序中的成员的其他人（开发人员）的安全性。

这**并不是**为了保护数据不与不应该看到它的人共享。如果您不希望其他人能够看到它，请不要将其包含在其他人正在使用的代码中。

长话短说。可见性只是为了防止初级开发人员搞砸或弄乱你的代码。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:29:39.580

如果他们可以访问 PHP 代码，他们就可以访问其中的所有内容。`print_r`您可以通过不将它们声明为变量而是将其处理来防止它出现在函数中`final public function __get($prop)`

```
final public function __get($prop) {
  switch ($prop) {
    case "_db_name":
     return 'test_db';

  }

  return $this->$prop; //this also works on all private vars, so you might want some extra checking.
} 
```

但是话又说回来，如果我可以添加您的包裹，`require('your/package/file.php')`那么是什么阻止我`echo implode('', file('your/package/file.php'));`看到它？

# mysql - 如何在 mysql 中同时使用 NOT LIKE 和 JOIN？

> ID：15363890
> 
> 赞同：0
> 
> 时间：2013-03-12T14:23:55.640
> 
> 标签：mysql, join, sql-like

我需要从查询中排除一些记录，其中日期名称设置在排除值“excl_days”中。

简单的功能正在工作：

```
SELECT post_id, start, end, excl_days FROM `mytable_events` 
WHERE `excl_days` NOT LIKE '%".$today_name."%' 
ORDER BY DATE(start) DESC 
```

但是使用 JOIN 和 GROUP 在添加 NOT LIKE 后我的结果为空。没有 NOT LIKE 一切正常。

```
SELECT o1.post_id, o1.start, o1.end, o1.excl_days 
FROM `mytable_events` o1 
JOIN `mytable_posts` o2 ON o1.post_id = o2.ID 
WHERE `o1.excl_days` NOT LIKE '%".$today_name."%'
GROUP BY o1.post_id ORDER BY DATE(o1.start) DESC 
```

完整的查询是：

```
SELECT o1.post_id, o1.start, o1.end, o1.excl_days 
FROM `mytable_events` o1 
JOIN `mytable_posts` o2 ON o1.post_id = o2.ID 
WHERE DATE(o1.start) <= '".$today."' AND DATE(o1.end) >= '".$today."'
AND o2.post_type = 'events' AND o2.post_status = 'publish' 
AND `o1.excl_days` NOT LIKE '%".$today_name."%'
GROUP BY o1.post_id ORDER BY DATE(o1.start) DESC 
```

如何使它工作？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:29:25.317

试试这个：

```
 SELECT o1.post_id, o1.start, o1.end, o1.excl_days 
  FROM `mytable_events` o1 
  JOIN `mytable_posts` o2 ON (o1.post_id = o2.ID 
  AND o1.excl_days NOT LIKE '%".$today_name."%')
  GROUP BY o1.post_id ORDER BY DATE(o1.start) DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:27:59.127

尝试去掉 where 子句中的反引号。它们是不必要的，也没有正确形成。

```
SELECT o1.post_id, o1.start, o1.end, o1.excl_days 
FROM `honchar_events` o1 
JOIN `honchar_posts` o2 ON o1.post_id = o2.ID 
WHERE o1.excl_days NOT LIKE '%".$today_name."%'
GROUP BY o1.post_id ORDER BY DATE(o1.start) DESC 
```

# mysql - SQL。多列计数的性能

> ID：15363891
> 
> 赞同：0
> 
> 时间：2013-03-12T14:24:02.190
> 
> 标签：mysql, sql

我需要获取表中每一列的不同值的数量。所以，我想知道，如果使用像这样的查询

```
select count(col1), count(col2),.., count(colN) from table; 
```

将扫描整个表 N 次以获得所有这些计数？那么使用具体 DBMS 必须创建数组 1..N 的对象/过程会更好吗？每个列的值数量和通过循环表记录和递增数组元素来计算值？
我知道这完全依赖于 DBMS 的实现，所以我想专门为 MySQL 了解它（但有关其他流行系统的信息也很有趣）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:35:25.030

你需要做：

```
select count(distinct col1),
       count(distinct col2),
       ...
from   table; 
```

并且数据库应该只进行一次全表扫描来计算这一点。

# c# - 如何使用 Fluent 或 LinqToNHibernate 映射 MainValue 属性？

> ID：15363892
> 
> 赞同：0
> 
> 时间：2013-03-12T14:24:06.820
> 
> 标签：c#, nhibernate, fluent-nhibernate

我的产品和图像实体之间存在一对多关系。我想要实现的是使用 Fluent 映射或 LinqToNHibernate 在产品实体中映射主图像。

我的课程：

```
public class Product {
    public virtual int Id { get; set; }
    public virtual IList<Image> images { get; set; }
}

public class Image {
    public virtual int Id { get; set; }
    public virtual Product Product { get; set; }
    public virtual bool IsMain { get; set; }
} 
```

我的映射：

```
public class ProductMap : ClassMap<Product> {
    public ProductMap() {
        Id(x => x.Id);
        HasMany(x => x.images).KeyColumn("id_product");
    }
}

public class ImageClassMap : ClassMap<Image> {
    public ImageClassMap() {
        Table("product_image");
        Id(x => x.Id);
        References(x => x.Product, "id_product");
        Map(x => x.IsMain).Column("is_main");
    }
} 
```

我能够使用 QueryOver 实现这一点，如下所示：

```
Image imageAlias = null;
var product = session.QueryOver<Product>()
    .Where(x => x.Id == 2)
    .Left.JoinQueryOver(x => x.images, () => imageAlias, x => x.IsMain)
    .SingleOrDefault(); 
```

是否可以使用 Fluent 映射或 LinqToNHibernate`MainImage`在`Product`类中拥有 IsMain 属性为 true 的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:28:31.970

是的，你可以试试

```
public class Product {
    ...
    public Image MainImage { get; set; }
} 
```

然后是映射，

```
public ProductMap() {
    ...
    HasOne(product => product.MainImage).KeyColumn("main_image_id");
} 
```

# sql - where 子句中的 SQL 数学运算符

> ID：15363896
> 
> 赞同：0
> 
> 时间：2013-03-12T14:24:14.543
> 
> 标签：sql, math, operators, where

我想知道是否可以在`WHERE`子句中使用数学运算符。

示例：我有一个带有`dataType`字段名称的表。这个长度可以不同。1527 或 152710 或 15271712...

我可以用吗：

```
SELECT * FROM table WHERE CONVERT(INT, (dataType / 10000)) = 1527 LIMIT 10 
```

PD：现在我正在使用：

```
... WHERE dataType BETWEEN (15270000 and 15279999) 
```

用零填充数据条目，但它并没有真正优化。我是说：

```
... BETWEEN (15000000 and 15999999) 
```

它将比较 1.000.000 个 regs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:29:53.887

为此，您可以使用MySql 中可用的[数学函数。](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html)`FLOOR`应该适用于您的情况：

```
.... WHERE FLOOR(dataType / 10000.0) = 1527 
```

# iphone - 在 iOS 设备的日历中操作事件时出现一些奇怪的错误

> ID：15363897
> 
> 赞同：1
> 
> 时间：2013-03-12T14:24:20.423
> 
> 标签：iphone, objective-c, xcode, ios5, eventkit

我在日历中添加了一些事件并将它们的 eventIdentifier 保存到文件中。当我想删除我的所有事件时，我从该文件中读取 eventIdentifier 到一个数组并删除每个事件及其事件 ID。以下是将事件添加到日历并将其事件 ID 保存到文件的代码：

```
 - (void) addEventToCalendar: (id)object
    { 
        @autoreleasepool {    
            int i = 0;
            NSString *string_to_file = @"";
            eventStore=[[EKEventStore alloc] init];
            for(Schedule *sche in scheduleArray){ 

                EKEvent *addEvent=[EKEvent eventWithEventStore:eventStore];
                addEvent.title=sche.course_Name;
                addEvent.startDate = [self stringToDate:sche.from_Date];
                addEvent.endDate = [self stringToDate:sche.thru_Date];
                NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults]; 
                [addEvent setCalendar:[eventStore defaultCalendarForNewEvents]];
                NSDate *date_alarm = [addEvent.startDate dateByAddingTimeInterval:-(10*60)];  
                addEvent.alarms=[NSArray arrayWithObject:[EKAlarm alarmWithAbsoluteDate:date_alarm]]; 
                NSError *err;
                // do save event to calendar
                [eventStore saveEvent:addEvent span:EKSpanThisEvent error:&err];
                if (err == nil) {
                    NSString* str = [[NSString alloc] initWithFormat:@"%@", addEvent.eventIdentifier]; 
                    string_to_file = [string_to_file stringByAppendingString:str];
                    string_to_file = [string_to_file stringByAppendingString:@"\n"];
                    NSLog(@"String %d: %@",i, str);
                }
                else {
                    NSLog(@"Error %@",err);
                }
                i++;
            } 
            // create file to save
            [[NSFileManager defaultManager] createFileAtPath:filePath contents:nil attributes:nil]; 
            inFile = [NSFileHandle fileHandleForWritingAtPath: filePath]; 
            NSData *data = [string_to_file dataUsingEncoding:NSUTF16StringEncoding]; 
            [inFile writeData:data];
        } 
    } 
```

下面的代码删除我添加到日历中的所有事件

```
- (void) deleteEventInCalender { 
    filemgr = [NSFileManager defaultManager]; 
    NSString *filePath = [self getFilePath:@"saveeventid.txt"];
    NSFileHandle *inFile; 
    inFile = [NSFileHandle fileHandleForReadingAtPath:filePath];
    NSData *dataFile; 
    dataFile = [inFile readDataToEndOfFile];  
    NSString *tmp =  @"";
    NSString *temp =  @"";
    tmp = [NSString stringWithCharacters:[dataFile bytes] length:[dataFile length]/sizeof(unichar)];
    if(![tmp isEqualToString:@""]){ 
        tmp = [tmp substringFromIndex:1]; 
        event_idArray = [[NSMutableArray alloc] init];
        int j = 0;
        while (![tmp isEqualToString:@""]){ 
            int index_find_string = [tmp rangeOfString:@"\n"].location;
            temp = [tmp substringWithRange:NSMakeRange(0, index_find_string)];  
            [event_idArray addObject:temp]; 
            tmp = [tmp substringFromIndex:index_find_string + 1]; 
        }

        EKEventStore* store = [[EKEventStore alloc] init];
        j = 0;
        for(NSString *eventid in event_idArray){

            EKEvent* event2 = [store eventWithIdentifier:eventid];
            if (event2 != nil) {
                 NSLog(@"log: %d log id: %@", j, eventid);
                NSError* error = nil;
                // remove event
                [store removeEvent:event2 span:EKSpanThisEvent error:&error];
            }
            j++;
        } 
        [filemgr removeItemAtPath:filePath error:nil]; 
    }
} 
```

当我使用 calendar.sqlitedb 在 iOS 模拟器上进行测试时，上面的所有代码都运行良好。但是当我在 iPad 设备 5.0 上运行时会出现一些奇怪的错误。那是有时日历没有删除事件，或者当所有事件都被删除时，几分钟后所有事件再次出现......我不明白，我不知道为什么，我很困惑。有没有人和我有同样的问题？请分享您的解决方案！

添加了另一个问题：日历数据库存储在 iOS 5.0 设备中的位置。

# arrays - 在 ColdFusion 中从 Struct/Array 访问和设置变量

> ID：15363900
> 
> 赞同：4
> 
> 时间：2013-03-12T14:24:26.087
> 
> 标签：arrays, data-structures, coldfusion, struct

我有以下结构，我想做的是为其中的不同键（personaID、personaName、userClubList）设置变量，然后为 userClubList 数组中的值设置变量，但不知道如何工作向下遍历结构，找出它有哪些键，然后它们的键值是什么。

[![CF 结构](../Images/d0466b5a7ffba59cc3543751250b9286.png)](https://i.stack.imgur.com/E4Nyh.jpg) ！

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:57:36.953

实际上，您已经能够使用此结构，并且不需要任何映射到其他变量。通过使用点符号`userAccountInfo.personas`或方括号来访问结构`userAccountInfo["personas"]`。您可以通过链接访问来访问任何结构深度`userAccountInfo.personas[1].userClubList[1].clubAbbr`。`structKeyExists(userAccountInfo, "personas")`通常你会想通过使用or来检查所有这些结构成员的存在，尤其是数组`isDefined("userAccountInfo.personas")`（虽然不推荐使用 isDefined，因为它处理范围的方式松懈）。您也可以通过在每次检查中传递下一个成员来链接这些`structKeyExists(userAccountInfo.personas[1], "userClubList")`，然后`structKeyExists(userAccountInfo.personas[1].userClubList[1], "clubAbbr")`依此类推。

无论如何，为了指导您更多，这是我对您的结构的理解：

```
<!--- test data (the one in your screenshot) --->
<cfset userAccountInfo = {}>
<cfset userAccountInfo.personas = []>
<cfset userAccountInfo.personas[1] = {}>
<cfset userAccountInfo.personas[1].personaId = "850074729">
<cfset userAccountInfo.personas[1].personaName = "IcedTube3">
<cfset userAccountInfo.personas[1].userClubList = []>
<cfset userAccountInfo.personas[1].userClubList[1] = {}>
<cfset userAccountInfo.personas[1].userClubList[1].clubAbbr = "Bel">
<cfset userAccountInfo.personas[1].userClubList[1].clubName = "Bell Ville FC">
<cfset userAccountInfo.personas[1].userClubList[1].established = "1363092161">
<cfset userAccountInfo.personas[1].userClubList[1].lastAccessTime = "1363092161">
<cfset userAccountInfo.personas[1].userClubList[1].platform = "360">
<cfset userAccountInfo.personas[1].userClubList[1].year = "2013">

<!--- let's make sure personas exists and is an array --->
<cfif structKeyExists(userAccountInfo, "personas") and isArray(userAccountInfo.personas)> 

    <cfset myPersonas = userAccountInfo.personas> <!--- myPersonas will be an array --->
    <cfloop array="#myPersonas#" index="persona"> <!--- persona is supposed to be a struct --->

        <!--- let's make sure each item in the array is really a struct --->
        <cfif isStruct(persona)>

            <cfoutput>Start reading persona.<br />====================<br /><br /></cfoutput>

            <!--- read personaId --->
            <cfif structKeyExists(persona, "personaId")>
                <cfoutput>personaId: #persona.personaId#<br /></cfoutput>
            <cfelse>
                <cfoutput>personaId: [none]<br /></cfoutput>
            </cfif>

            <!--- read personaName --->
            <cfif structKeyExists(persona, "personaName")>
                <cfoutput>personaName: #persona.personaName#<br /></cfoutput>
            <cfelse>
                <cfoutput>personaName: [none]<br /></cfoutput>
            </cfif>

            <!--- read userClubList (let's make sure userClubList exists in persona and is an array) --->
            <cfif structKeyExists(persona, "userClubList") and isArray(persona.userClubList) and not arrayIsEmpty(persona.userClubList)>

                <cfset myUserClubList = persona.userClubList>
                <cfloop array="#myUserClubList#" index="club"> <!--- club is supposed to be a struct --->

                    <!--- let's make sure each item in the array is really a struct --->
                    <cfif isStruct(club)>

                        <cfoutput><br />Start reading club.<br />--------------------<br /><br /></cfoutput>

                        <!--- read clubAbbr --->
                        <cfif structKeyExists(club, "clubAbbr")>
                            <cfoutput>clubAbbr: #club.clubAbbr#<br /></cfoutput>
                        <cfelse>
                            <cfoutput>clubAbbr: [none]<br /></cfoutput>
                        </cfif>

                        <!--- and so on... --->

                        <cfoutput><br />--------------------<br />Done reading club.<br /><br /></cfoutput>

                    </cfif>

                </cfloop>

            <cfelse>
                <cfoutput>userClubList: [none]<br /></cfoutput>
            </cfif>

            <cfoutput><br />====================<br />Done reading persona.<br /><br /></cfoutput>

        </cfif>

    </cfloop>

</cfif> 
```

结果是...

```
Start reading persona.
====================

personaId: 850074729
personaName: IcedTube3

Start reading club.
--------------------

clubAbbr: Bel

--------------------
Done reading club.

====================
Done reading persona. 
```

希望这可以帮助。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T01:27:16.450

真的，这一切都取决于你的最终目标是什么。查看您在上面的结构中显示的数据模型，您正在为单个用户帐户构建单个记录，该帐户可以具有可以属于多个 userClubLists 的多个角色。下面的代码显示了如何填充它。

注意：此格式适用于 CF8+。

```
<cfscript>
 userAccountInfo = {
    userAccountInfo = {
    personas = [ 
            {
            personaID = "850074729",
            personaName = "IcedTube3",
            userClubList =  [
                                {
                                clubAbbr = "Bel",
                                clubName = "Bel Ville FC",
                                established = "1361354191",
                                lastAccessTime = "1363092161",
                                platform = "360",
                                year = "2013"
                                },
                                {
                                clubAbbr = "New",
                                clubName = "New Club",
                                established = "1362139200",
                                lastAccessTime = "1363092161",
                                platform = "720",
                                year = "2012"
                                },
                                {
                                clubAbbr = "Old",
                                clubName = "Old Club",
                                established = "1261255543",
                                lastAccessTime = "1267444800",
                                platform = "180",
                                year = "2005"
                                }
                            ]
            },
            {
            personaID = "499137600",
            personaName = "Marty",
            userClubList =  [
                                {
                                clubAbbr = "Biff",
                                clubName = "BiffCo Casino",
                                established = "307588800",
                                lastAccessTime = "1445390400",
                                platform = "1955a",
                                year = "1985"
                                }
                            ]
            }
        ]
    }
    } ;
</cfscript>

<cfdump var="#userAccountInfo#" label="UserAccountInfo" /> 
```

# php - 在 php 中解析非常大的 XML 文件

> ID：15363901
> 
> 赞同：8
> 
> 时间：2013-03-12T14:24:36.487
> 
> 标签：php, mysql, xml, xml-parsing, large-files

我需要解析 40GB 大小的 XML 文件，然后进行规范化，然后插入到 MySQL 数据库中。我不清楚需要在数据库中存储多少文件，也不知道 XML 结构。

我应该使用哪个解析器，你会怎么做呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T23:16:15.240

[`XMLReader`^(*在 PHP 中，您可以使用Docs*)](http://php.net/XMLReader)读取超大型 XML 文件：

```
$reader = new XMLReader();
$reader->open($xmlfile); 
```

超大型 XML 文件应以压缩格式存储在磁盘上。至少这是有道理的，因为 XML 文件具有很高的压缩率。例如像 gzip 一样`large.xml.gz`。

`XMLReader`PHP通过[压缩包装器^(*Docs*)](http://php.net/manual/en/wrappers.compression.php)很好地支持了这一点：

```
$xmlfile = 'compress.zlib://path/to/large.xml.gz';

$reader = new XMLReader();
$reader->open($xmlfile); 
```

允许您“`XMLReader`仅”对当前元素进行操作。这意味着它是仅向前的。如果您需要保持解析器状态，您需要自己构建它。

我经常发现将基本动作包装到一组迭代器中很有帮助，这些迭代器知道如何操作，`XMLReader`比如只迭代元素或子元素。您可以在[Parse XML with PHP and XMLReader](https://stackoverflow.com/a/15351723/367456)中找到这一点。

另见：

*   [PHP打开gzip压缩的XML](https://stackoverflow.com/q/1190906/367456)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:40:46.470

很高兴知道您实际上打算用 XML 做什么。您解析它的方式很大程度上取决于您需要执行的处理以及大小。

如果这是一次性的任务，那么我过去是通过在做任何其他事情之前发现 XML 结构来开始的。我的 DTDGenerator（参见 saxon.sf.net）很久以前就是为此目的而编写的，并且仍然可以完成这项工作，现在还有其他可用的工具，但我不知道它们是否进行流式处理，这是这里的先决条件。

您可以编写一个使用拉或推流解析器（SAX 或 StAX）处理数据的应用程序。这有多容易取决于您必须进行多少处理以及您必须维护多少状态，而您没有告诉我们。或者，您可以尝试在 Saxon-EE 中提供的流式 XSLT 处理。

# scala - Scala 2.10 中的手动 AST 生成

> ID：15363912
> 
> 赞同：2
> 
> 时间：2013-03-12T14:25:02.033
> 
> 标签：scala, reflection, scala-2.10, toolbox

回应： [从字符串生成一个类并在 Scala 2.10 中实例化它](https://stackoverflow.com/questions/12122939/generating-a-class-from-string-and-instantiating-it-in-scala-2-10?rq=1)

@EugeneBurmako 声明：“该示例使用手动 AST 汇编，但可以编写一个函数来解析字符串，找出未绑定的标识符，在某些映射中查找它们的值，然后创建相应的自由术语。Scala 中没有这样的函数虽然是 2.10.0。”

哪些 API 调用可能有助于找到未绑定的标识符？

# javascript - 从数组中绘制图像

> ID：15363917
> 
> 赞同：2
> 
> 时间：2013-03-12T14:25:18.453
> 
> 标签：javascript, html, canvas, map

我目前正在使用一组加载到数组的图像来绘制瓷砖地图。

我已经将 tile 定义为这样的对象：

```
function tile(gfx){
this.tile = gfx;

this.drawSelf = function(x,y)
this.tile.x = x;
this.tile.y = y;
} 
```

然后我用几个平铺对象填充了一个数组，这些平铺对象通过调试器正确显示。

现在，当我开始使用此代码绘制图像时：

```
for (var x = 0; x < mapArray.length; x++){
xN = 183 + (50*x);
mapArray[x].drawSelf(xN, 134);
gameStage.addChild(mapArray[x].tile);
mapArray[x].tile.visible = true;
} 
```

问题是数组中的所有“对象”都接收相同的 x 和 y 坐标。所以我怀疑数组中的每个对象都相互引用。

我想要做的是创建一个 20x10 的瓷砖地图。而且我需要能够将每个图块称为单个对象。

如果我没有道理，请大声喊叫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:29:08.330

如果您像这样创建所有图块：

```
var gfx = new ...
for (...) {
    mapArray[x].tile = new tile(gfx);
} 
```

然后它们都共享同一个`gfx`对象。

你应该像这样改变你的初始化：

```
for (...) {
    var gfx = new ...
    mapArray[x].tile = new tile(gfx);
} 
```

# python - 在 Python TKinter 中创建弹出窗口时禁用底层窗口

> ID：15363923
> 
> 赞同：29
> 
> 时间：2013-03-12T14:25:27.287
> 
> 标签：python, tkinter

我有一个主框架（称之为`a`）和一个弹出顶层（称之为`b`）。如何确保用户在“活着”时无法点击任何`a`内容`b`？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-12T14:28:27.473

如果您不想隐藏根目录，而只是确保用户只能与弹出窗口交互，则可以使用[`grab_set()`](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.grab_set-method)and [`grab_release()`](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.grab_release-method)。

```
b.grab_set() # when you show the popup
# do stuff ...
b.grab_release() # to return to normal 
```

**或者**，您可以`withdraw()`根使其不可见：

```
a.withdraw() 
```

将使根活着，但仅`b`可见。

如果你需要它，你可以做

```
a.deiconify() 
```

# django - Django：密码格式无效或哈希算法未知

> ID：15363925
> 
> 赞同：5
> 
> 时间：2013-03-12T14:25:31.250
> 
> 标签：django, django-admin, django-users

当我想使用简单的 CreateView 创建新用户时遇到问题。一切正常，我可以创建用户，但是当我想用新创建的用户登录时，我做不到。

## 我在管理员中获得了这种类型的密码：

**无效的密码格式或未知的散列算法。**

未存储原始密码，因此无法查看此用户的密码，但您可以使用此表单更改密码。

这是我的代码：

**模型.py**

```
from django.db import models
from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth.models import AbstractUser, UserManager

    class CustomUser(AbstractUser):
        """app setting of user"""
        url = models.URLField(u'Site URL', max_length=100, null=True, unique=True)

    admin.site.register(CustomUser, UserAdmin) 
```

**网址.py**

```
from django.conf.urls.defaults import *
from models import CustomUser
from django.views.generic import CreateView
from django.contrib.auth.decorators import login_required
from django.core.urlresolvers import reverse

    urlpatterns = patterns('',
                   url(r'^create_user/$',(CreateView.as_view(model=CustomUser,       get_success_url =lambda: reverse('create_user'),
                                                                             template_name="create_user.html")), name='create_user'),
                   ) 
```

**create_user.html**

```
<div title="Create Form " id="/create_user">
        <p> <b>Create account:</b> </p>            
        {{ form.errors }}
    <form action="" method="post" id="id_create_user" >
        {% csrf_token %}
        {{ form.as_p }}
        <div>
            <input type="submit" value="Create account" style="">
        </div>

    </form>
</div> 
```

创建用户后，我必须以管理员身份登录并更改此密码，之后一切都会好起来的。![我的问题示例](../Images/202251fd93fc5bf3dd81e3b340e4eec2.png)

我应该怎么做才能解决问题？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T14:34:57.597

问题是 CreateView 会根据模型自动生成一个表单，这意味着它直接写入密码字段，而不是使用正确的 API 来创建用户。

请尝试使用此表单，它会为您处理：

`from django.contrib.auth.forms import UserCreationForm`

```
urlpatterns = patterns('',
   url(r'^create_user/$',(CreateView.as_view(model=CustomUser, get_success_url =lambda: reverse('create_user'), form_class=UserCreationForm, template_name="create_user.html")), name='create_user'),
) 
```

这些表单本质上与您在管理员中看到的相同，这是一个很好的起点，如果您使用的是自定义用户模型，您可能需要做一些额外的工作来进行自定义。

这是提供的 UserCreationForm 的源代码：[https ://github.com/django/django/blob/stable/1.5.x/django/contrib/auth/forms.py#L61-L110](https://github.com/django/django/blob/stable/1.5.x/django/contrib/auth/forms.py#L61-L110)

您可以自己将其重新实现为普通的 ModelForm，您必须包含的关键`user.set_password`是调用的 save 方法。

# ruby-on-rails - Backbone.js、Rails 3 和 ActiveRecord 关系

> ID：15363929
> 
> 赞同：0
> 
> 时间：2013-03-12T14:25:38.613
> 
> 标签：ruby-on-rails, activerecord, backbone.js

在开始之前，请原谅我问了这么一个基本的问题，但我真的没有找到任何合适的信息。

所以，我有两个 ActiveRecord 模型，经理和订单：

```
class Manager < ActiveRecord::Base
    attr_accessible ...
    has_many :orders
class Order < ActiveRecord::Base
    belongs_to :manager 
```

我有一个骨干收藏，可以完美地吸引经理。但我不明白如何得到我经理的命令。有解决方案还是我应该手动处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:37:41.337

如果你想获取经理列表，每个经理都有一个 JSON 格式的订单列表，我强烈推荐 rabl gem。它使设置变得非常容易，并且如果需要自定义 JSON 中包含的内容，无论您是在前端使用 Backbone、KnockoutJS 还是其他东西。

# php - jQuery PHP session_destroy

> ID：15363932
> 
> 赞同：1
> 
> 时间：2013-03-12T14:25:48.087
> 
> 标签：php, jquery, session

我正在尝试调用一个破坏会话并在其后重新加载页面的 php 脚本。

```
$(document).bind("active.idleTimer", function(){
  $.post("data.php?data=active");
  location.reload();
}); 
```

数据.php

```
if($_GET['data'] == 'active') {
  session_destroy();
} 
```

它不会破坏会话，只有当我手动打开 url data.php?data=active 时它才会这样做，这是为什么呢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:30:36.547

问题是您发送请求的脚本正在使用它自己的会话。所以，用户有一个会话，它不同于你发送“刷新空闲状态”请求的会话。

一种解决方案是使用 javascript 启动一个计时器，当计时器用完时，只需刷新页面。

这就是为什么它只在您实际访问 data.php 页面时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:36:00.950

如果要使用存储在`$_SESSION`数组中的数据，则需要使用 启动或恢复现有会话`session_start()`。在你的 data.php 中，试试这个：

```
if($_GET['data'] == 'active') {
  session_start();
  session_destroy();
} 
```

请在向客户端发送任何输出**之前**`session_start()`考虑应该使用的内容。

 **希望能帮助到你！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T14:28:13.463

修改的：

```
$.post("data.php", {data: active}, function(whatever){} 
```

并在您的 php 文件中使用：

```
$_POST['data']; 
```**

# jquery - jQuery $.Deferreds 和 $.each

> ID：15363933
> 
> 赞同：0
> 
> 时间：2013-03-12T14:25:51.620
> 
> 标签：jquery, each, jquery-deferred

尝试使用 $.Deferreds 代替我之前使用的 setTimeOut。我遇到了一个问题，因为 writer() 实际上并没有完成，因为 $.each 在调用 printer() 时仍在循环。

我还没有看到带有循环的 $.Deferreds 的示例。显然，以下内容是错误的，我打赌这与决心有关 - 任何帮助将不胜感激。

```
$.when( writer() ).done(function() {
    printer();
});

function writer(){
    var deferred = new $.Deferred();
    if(x){
        $("a").each(function () {...});
    }
    if(y){
        $("img").each(function () {...});
    }
    if(z){
        $("div").each(function () {...});
    }
    deferred.resolve();
    return deferred.promise();

}

function printer(){...} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:28:48.147

假设`...`内部`.each`正在执行一个异步事件，您将需要所有这些异步事件来返回一个延迟对象，您可以将其传递给 a`$.when`以触发您的解析。

此外，在代码的顶部，您不需要`$.when`单个回调，只需执行`writer().done(function(){...})`

# ruby - Ruby（不是 Rails）属性验证，保存记录和输出

> ID：15363938
> 
> 赞同：1
> 
> 时间：2013-03-12T14:25:55.760
> 
> 标签：ruby

我正在**用 Ruby 实现生命游戏，**这是我目前所拥有的：

```
class Cell

  attr_accessor :world, :x, :y

  def initialize(world=World.new, x=0, y=0)
    @world = world
    @world.cells << self
    @x = x
    @y = y
  end

  def neighbours
    @neighbours = []
    world.cells.each do |cell|

      # Detects neighbour to the north
      if self.x == cell.x && self.y == cell.y - 1
        @neighbours << cell
      end
      # Detects neighbour to the north-east
      if self.x == cell.x - 1 && self.y == cell.y - 1
        @neighbours << cell
      end
      # Detects neighbour to the east
      if self.x == cell.x - 1 && self.y == cell.y
        @neighbours << cell
      end
      # Detects neighbour to the south-east
      if self.x == cell.x - 1 && self.y == cell.y + 1
        @neighbours << cell
      end
      # Detects neighbour to the south
      if self.x == cell.x && self.y == cell.y + 1
        @neighbours << cell
      end
      # Detects neighbour to the south-west
      if self.x == cell.x + 1 && self.y == cell.y + 1
        @neighbours << cell
      end
      # Detects neighbour to the west
      if self.x == cell.x + 1 && self.y == cell.y
        @neighbours << cell
      end
      # Detects neighbour to the north-west
      if self.x == cell.x + 1 && self.y == cell.y - 1
        @neighbours << cell
      end

    end
    @neighbours
  end

  def alive?
    self.world.cells.include?(self)
  end

  def dead?
    !self.world.cells.include?(self)
  end

  def die!
    self.world.cells.delete(self)
  end

  def revive!
    self.world.cells << self
  end

end

class World
  attr_accessor :cells

  def initialize
    @cells = []
  end

  def tick!
    self.cells.each do |cell|
      # Rule 1
      if cell.neighbours.count < 2
        cell.die!
      end
    end
  end

end 
```

我在 Rails 中编码已经有一段时间了，但**我对如何做以下事情感到困惑：**

1.  验证并确保在 World 的一个字段上只能存在一个 Cell 对象？
2.  如何将东西保存到数据库（例如 postgresql）？在这种情况下我是否必须这样做，或者我可以保留它并在内存中运行它吗？
3.  如何使我的生命游戏的图形输出看起来像这样？

![人生游戏.gif](../Images/8af6013ff07e67290565148b00948c35.png)

我感到困惑的原因是因为 Rails 开箱即用，现在我只需要了解 Ruby 是如何做到这一点的帮助。

编辑：

我已经用验证方法更新了 Cell 类，但我只能在初始化对象后运行它。有没有办法在初始化时运行它？这是代码：

```
 5   def initialize(world=World.new, x=0, y=0)                                                           | 53       neighbour_cell = Cell.new(subject.world, -1, 0)                                                 
  6     @world = world                                                                                    | 54       subject.neighbours.count.should == 1                                                            
  7     @world.cells << self # if self.valid? < this after if doesn't work                                         | 55     end                                                                                               
  8     @x = x                                                                                            | 56                                                                                                       
  9     @y = y                                                                                            | 57     it 'Detects cell to the north-west' do                                                            
 10   end                                                                                                 | 58       neighbour_cell = Cell.new(subject.world, -1, 1)                                                 
 11                                                                                                       | 59       subject.neighbours.count.should == 1                                                            
 12   def valid?                                                                                          | 60     end                                                                                               
 13     @valid = true                                                                                     | 61                                                                                                       
 14     self.world.cells.each do |cell|                                                                   | 62     it 'Creates a live cell' do                                                                       
 15       if self.x == cell.x && self.y == cell.y                                                         | 63       cell.should be_alive                                                                            
 16         @valid = false                                                                                | 64     end                                                                                               
 17         self.world.cells.delete(self)                                                                 | 65                                                                                                       
 18       end                                                                                             | 66     it 'Kills a cell' do                                                                              
 19     end                                                                                               | 67       cell.die!                                                                                       
 20     @valid                                                                                            | 68       cell.should be_dead                                                                             
 21   end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:57:44.777

脱离 Rails 并尝试不同的东西是件好事，尤其是像 Game of Life 这样的经典挑战。

至于您的问题，它们都取决于您选择的系统设计。但是对于一个简单的实现，这里有一些指针。

1.  使用`Set`类怎么样？这是一个不允许重复的对象数组。
2.  如果您想在应用程序的单独运行之间维护状态，您只需要一个 DB。如果您不需要它，请将其全部保存在内存中。
3.  这是一个太大的问题，无法在这里回答，但您有很多选择。极端情况是：
    *   管理屏幕更新自己的像素渲染，在单元格更改时将字符打印到终端
    *   使用类似[ruby​​game](http://rubygame.org/)的东西，它有精灵、GUI 和绘图的概念

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:11:53.803

你在这里问了一些大的、一般的问题，每个问题都有很多答案。我将给出我的初步看法：

**1：验证**- 看起来（来自 Rails）你想要某种[`valid?`](http://guides.rubyonrails.org/active_record_validations_callbacks.html#valid-and-invalid)可以调用对象的方法。但是，在纯 ruby​​ 中，您必须明确定义“有效”对象到底是什么。您还必须决定应该在哪里进行验证，即*哪个对象正在执行验证以及哪个对象正在被验证*。

从上面提供的代码中，我建议您至少需要一个类，`Game`例如调用它，它控制世界和其中的所有单元格。目前，您已经在类中加载了很多逻辑`Cell`，您可能想查看[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，看看这是否是一个有效的（哈哈）设计选择。

**2\. 持久性**——没有什么能阻止你在纯红宝石中使用 ActiveRecord 作为你的 ORM。您可以查看这个 SO 问题以获取示例实现：[how-to-use-active-record-without-rails](https://stackoverflow.com/questions/11111733/how-to-use-active-record-without-rails)。

**3\. 图形**- 有许多用于 ruby​​ 的[游戏库](https://www.ruby-toolbox.com/categories/game_libraries)，它们具有适用于您所在平台的内置图形 API。我个人与他们合作的不多，但[gosu](https://github.com/jlnr/gosu)似乎是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:45:03.930

我已经做了！但不是这里采用的方法。下面是我的代码，剩下要做的就是实现一些图形输出。此外，[这是 Github 上的完整代码](https://github.com/ofcan/game-of-life-ruby)，请查看并评论并帮助我改进它和其他东西。谢谢你们俩帮助我:)

我可以重构这个 'live_neighbours_around_cell(cell)' 方法，但不知道如何。你能帮忙吗？此外，将 'Cell.new' 立即添加到 'cells' 数组会很有用，而不是像我现在这样做的那样，我有单独的函数。

```
class Game
  attr_accessor :world

  def initialize(world=World.new, seeds=[[1, 1]])
    @world = world
    seeds.each do |seed|
      world.cell_board[seed[0]][seed[1]].alive = true
    end
  end

  def tick!
    next_round_live_cells = []
    next_round_dead_cells = []

    world.cells.each do |cell|
      # Rule 1: 
      # Any live cell with fewer than two live neighbours dies
      if world.live_neighbours_around_cell(cell).count < 2
        next_round_dead_cells << cell
      end
      # Rule 2:
      # Any live cell with two or three live neighbours lives on to the next generation
      if cell.alive? && world.live_neighbours_around_cell(cell).count == (2 || 3)
        next_round_live_cells << cell
      end
      # Rule 3:
      # Any live cell with more than three live neighbours dies
      if cell.alive? && world.live_neighbours_around_cell(cell).count > 3
        next_round_dead_cells << cell
      end
      # Rule 4:
      # Any dead cell with exactly three live neighbours becomes a live cell
      if cell.dead? && world.live_neighbours_around_cell(cell).count == 3
        next_round_live_cells << cell
      end
    end

    next_round_live_cells.each do |cell|
      cell.revive!
    end
    next_round_dead_cells.each do |cell|
      cell.die!
    end
  end
end

class World
  attr_accessor :rows, :cols, :cell_board, :cells

  # Scheme of default initialized world matrix
  #------------------------
  #     0     1     2
  # 0 [ dead, dead, dead ]
  # 1 [ dead, alive, dead ]
  # 2 [ dead, dead, dead ]
  #-----------------------

  def initialize(rows=3, cols=3)
    @rows = rows
    @cols = cols
    @cells = []

    @cell_board = Array.new(rows) do |row|
      Array.new(cols) do |col|
        Cell.new(row, col)
      end
    end

    cell_board.each do |row|
      row.each do |element|
        if element.is_a?(Cell)
          cells << element
        end
      end
    end
  end

  def live_cells
    cells.select { |cell| cell.alive }
  end

  def live_neighbours_around_cell(cell)
    live_neighbours = []
    live_cells.each do |live_cell|
      # Neighbour to the North
      if live_cell.x == cell.x - 1 && live_cell.y == cell.y
        live_neighbours << live_cell
      end
      # Neighbour to the North-East
      if live_cell.x == cell.x - 1 && live_cell.y == cell.y + 1
        live_neighbours << live_cell
      end
      # Neighbour to the East
      if live_cell.x == cell.x && live_cell.y == cell.y + 1
        live_neighbours << live_cell
      end
      # Neighbour to the South-East
      if live_cell.x == cell.x + 1 && live_cell.y == cell.y + 1
        live_neighbours << live_cell
      end
      # Neighbour to the South
      if live_cell.x == cell.x + 1 && live_cell.y == cell.y
        live_neighbours << live_cell
      end
      # Neighbour to the South-West
      if live_cell.x == cell.x + 1 && live_cell.y == cell.y - 1
        live_neighbours << live_cell
      end
      # Neighbour to the West
      if live_cell.x == cell.x && live_cell.y == cell.y - 1
        live_neighbours << live_cell
      end
      # Neighbour to the North-West
      if live_cell.x == cell.x - 1 && live_cell.y == cell.y - 1
        live_neighbours << live_cell
      end
    end
    live_neighbours
  end

end

class Cell
  attr_accessor :x, :y, :alive

  def initialize(x=0, y=0)
    @x = x
    @y = y
    @alive = false
  end

  def alive?
    alive
  end

  def dead?
    !alive
  end

  def die!
    @alive = false
  end

  def revive!
    @alive = true # same as > self.alive = true
  end
end 
```

# xml - 如何在 SSRS 2008 R2 中的 XML 查询中获取多个值

> ID：15363939
> 
> 赞同：1
> 
> 时间：2013-03-12T14:25:58.817
> 
> 标签：xml, reporting-services, xml-parsing, ssrs-2008

我一直在关注[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms365158%28v=sql.105%29.aspx)。我已经能够得到以下结果。

当我使用这个查询时：

```
page{}/workgroups{}/workgroup{name,agents,queue{agentsloggedin,agentsavailable,callswaiting}} 
```

这是结果：

```
name    | agents  | agentsloggedin  | ageentsavailable  | callswaiting
--------|---------|-----------------|-------------------|-------------
Sales   | 7       | 4               | 0                 | 3
Support | 5       | 5               | 2                 | 0
Admin   | 2       | 1               | 0                 | 1 
```

因此，您会看到它为 each获取了`name`和数量，然后它进入每个元素的元素以获取其余数据。`agents``workgroup``queue``workgroup`

并且可以像这样更深一步：

```
page{}/workgroups{}/workgroup{name,queue{agentsavailable,agentsloggedin,callsanswered,callswaiting,currentshift{averagetalktime,averagewaittime,numberanswered,numberofcalls}}} 
```

并获取`currentshift`数据。

现在，我能够做到这一切，因为我从 ( `queue`, `currentshift`) 获取数据的每一级只有 1 个实例。但是当我想获得这样一个元素的多个实例时：

```
page{}/workgroups{}/workgroup{name,queue{currentshift{servicelevels{}/servicelevel{key,value}}}} 
```

其中我想为每个元素（总共有 7 个）获取`key`和，它给了我一个语法错误，说它**在字符 70 处需要一个 '}' ，**这是之前的。`value``servicelevel``Sales``Support``Admin`**`/``servicelevel`**

 **让我感到困惑的是，我正在尝试像以前一样做同样的事情，`workgroups{}/workgroup`而且效果很好。

这是 XML 树的屏幕截图。

![在此处输入图像描述](../Images/6ec2038462e410315853c4c84a4c5c10.png)

注意：这似乎也是[这个 StackOverflow 问题](https://stackoverflow.com/questions/11108741/ssrs-xml-data-source-how-do-i-query-xml-with-multiple-parent-child-hierarchy)中的问题。**

# android - 在android生态系统中，对端设备的WiFi连接关闭时会触发什么事件？

> ID：15363940
> 
> 赞同：0
> 
> 时间：2013-03-12T14:25:59.533
> 
> 标签：android, android-networking

对端设备关闭 WiFi 连接时触发的事件是什么。主机设备是否有任何方式获得回调，例如 onConnectionStateChange() 或类似的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:35:30.630

[这个例子](http://silverballsoftware.com/android-monitor-wifi-state-with-broadcastreceiver)适合你的需要。

您正在寻找的是呼叫广播接收器。基本上，您创建一个自定义广播接收器，它将接收有关某些操作的消息。您在意图过滤器中定义这些操作：

```
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION); 
```

然后在此意图过滤器上注册您的接收器：

```
registerReceiver(wifiWatcher, intentFilter); 
```

并且您的接收器将实现 onReceive 方法：

```
public void onReceive( Context context, Intent intent ) 
```

您必须使用以下方法检查此 onReceive 方法的连接性：

```
ConnectivityManager conMngr = (ConnectivityManager)this.getSystemService(this.CONNECTIVITY_SERVICE);
android.net.NetworkInfo wifi = conMngr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
android.net.NetworkInfo mobile = conMngr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE); 
```

为此，您需要在清单中添加这些权限：

```
<user-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<user-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:34:03.307

系统触发广播：

```
 "android.net.wifi.WIFI_STATE_CHANGED"
 "android.net.wifi.STATE_CHANGE" 
```

查看这个答案，看看如何使用广播接收器捕获它： [当 wifi 或 3g 网络状态发生变化时广播接收器](https://stackoverflow.com/questions/10733121/broadcastreceiver-when-wifi-or-3g-network-state-changed)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:37:57.783

您需要注册一个 Broadcast Reciever 参见示例项目[NetworkUsage Sample](http://developer.android.com/training/basics/network-ops/managing.html)`com.example.android.networkusage;`

# .net - 我应该为 KR403 Zebra 打印机使用哪个 SDK

> ID：15363941
> 
> 赞同：2
> 
> 时间：2013-03-12T14:25:59.597
> 
> 标签：.net, c#-4.0, printing, zebra-printers

我正在使用 C# 为 Windows 7 64 位平台编写一个 .Net WPF 应用程序。我的应用程序需要与通过 USB 连接的 Zebra KR403 打印机进行通信。我的问题可能非常基本，但我希望这篇文章能帮助那些不熟悉在 .Net 中使用这台打印机的其他人。

1\. 我应该使用哪个 SDK？是否像在我的项目中添加 .dll 并使用它一样简单？我曾尝试使用 Windows CE SDK，但是当 ZSDK_API.dll 尝试加载 ZebraUsb.dll 时，我得到了 BadImageFormatException。这通常意味着 dll 是为不同的平台编译的。

2\. 我应该使用 SDK 打印还是应该使用普通的 .Net 打印库？两种选择的优势是什么？例如，如果我使用 .Net 库进行打印，我还必须使用 ZBI（用于与打印机通信的语言）吗？

3\. 如何获取打印机的状态（缺纸、未装入介质等）？我找到了一个指南（必须删除链接；声誉不足以发布超过 2 个链接），它解释了如何在 Windows CE 或 Mobile 中执行此操作，但我找不到 Windows 7（普通桌面版本）的等效项。

如果有人可以帮助我解决这些问题，我将不胜感激，我将在此处发布我的最终解决方案（或执行上述操作所需的核心代码）供其他人使用。

预先感谢您的任何帮助。

**更新：**

我在这里找到了一些允许我通过 USB 直接与打印机通信的代码：http: [//danielezanoli.blogspot.com/2010/06/usb-communications-with-zebra-printers.html](http://danielezanoli.blogspot.com/2010/06/usb-communications-with-zebra-printers.html)

我还找到了 KR403 打印机的硬件集成商指南，它在此处解释了 ~HQES 命令的结果：https: [//support.zebra.com/cpws/docs/crawl/UG_Kiosk/KR403_UG.pdf#xml=https :// km.zebra.com/kb/index?page=answeropen&type=open&searchid=1363543831914&answerid=16777218&iqaction=6&url=https%3A%2F%2Fsupport.zebra.com%2Fcpws%2Fdocs%2Fcrawl%2FUG_Kiosk%2FKR403_UG.pdf&highlightinfo=12583129,8815, 8825](https://support.zebra.com/cpws/docs/crawl/UG_Kiosk/KR403_UG.pdf#xml=https://km.zebra.com/kb/index?page=answeropen&type=open&searchid=1363543831914&answerid=16777218&iqaction=6&url=https%3A%2F%2Fsupport.zebra.com%2Fcpws%2Fdocs%2Fcrawl%2FUG_Kiosk%2FKR403_UG.pdf&highlightinfo=12583129,8815,8825)

我现在可以使用上述库通过 USB 或使用 .Net 中的 SerialPort 类通过串行端口将 ~HQES 命令发送到打印机。然后我可以使用上面的硬件集成商指南解释结果并检查打印机的状态。由于这很容易做到，我现在不打算尝试移植 SDK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T08:21:54.490

我在这里找到了一些允许我通过 USB 直接与打印机通信的代码：http: [//danielezanoli.blogspot.com/2010/06/usb-communications-with-zebra-printers.html](http://danielezanoli.blogspot.com/2010/06/usb-communications-with-zebra-printers.html)

我还找到了 KR403 打印机的硬件集成商指南，它在此处解释了 ~HQES 命令的结果：https: [//support.zebra.com/cpws/docs/crawl/UG_Kiosk/KR403_UG.pdf#xml=https :// km.zebra.com/kb/index?page=answeropen&type=open&searchid=1363543831914&answerid=16777218&iqaction=6&url=https%3A%2F%2Fsupport.zebra.com%2Fcpws%2Fdocs%2Fcrawl%2FUG_Kiosk%2FKR403_UG.pdf&highlightinfo=12583129,8815, 8825](https://support.zebra.com/cpws/docs/crawl/UG_Kiosk/KR403_UG.pdf#xml=https://km.zebra.com/kb/index?page=answeropen&type=open&searchid=1363543831914&answerid=16777218&iqaction=6&url=https%3A%2F%2Fsupport.zebra.com%2Fcpws%2Fdocs%2Fcrawl%2FUG_Kiosk%2FKR403_UG.pdf&highlightinfo=12583129,8815,8825)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:32:15.453

几年前我玩过 Zebra 打印机。要使用 Zebra 的 SDK，您需要做的就是在项目中包含对 dll 的引用（右键单击 Visual Studio 中的引用并单击“添加引用”，然后导航到 dll）。注意：这是假设他们现在有 .NET 程序集。他们没有回到过去，但添加互操作代码并不难。

我记得，SDK 的主要优势（以及我使用它的原因）是它具有一些用于标签打印的内置功能，包括条形码等。因此，您可以找到一个单独的库来生成条形码，但 Zebra SDK 让您只需发送一个字符串（或数字）并让它为您编码并打印条形码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:49:55.130

Zebra 目前不提供桌面版 .NET SDK。如您所见，Zebra .NET SDK 适用于较旧的 Windows CE/Windows Mobile 平台。

Zebra 确实提供了基于 Java 的 SDK。它没有声称支持 KR403，但可能值得进行 20 分钟的测试，看看您是否可以将它与您的项目集成：[http ://www.zebra.com/us/en/products-services/software/链接-os/链接-os-sdk.html](http://www.zebra.com/us/en/products-services/software/link-os/link-os-sdk.html)。

正如其他人所提到的，Zebra 的 SDK 允许您可靠地检查状态，并利用 Zebra 打印机功能（如打印机格式存储和调用、打印机图像调用、非 USB 通信等）。它应该胜过其他通用打印库，因为它是为与 Zebra 打印机一起使用而设计的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-24T16:04:10.910

finnaly 找到了与 c# 或 VB.net 兼容的 .dll，您可以从 zebra 网站下载它： [ZSDK API](https://www.zebra.com/us/en/support-downloads/eula/sdk-eula.-227178c9720c025483893483886ea54dde80fe8dccd7408d4c2d1c0a955b4f3df08f07fb86b5e71b2e5f2562c0bae1a79f01e769fe7daa5d792252da6fb0be9a5e744b82b6e1c7b.html)

ZSDK_API.dll ZebraPlatformUtil.dll

我通过 LAN 网络斑马打印机 ZT400 亲自测试这些 .dll，这里使用了一些代码：

```
using ZSDK_API.Comm;
using ZSDK_API.ApiException;
using ZSDK_API.Printer;

public void SendZplOverTcp(String theIpAddress)
    {

        try
        {
            // Instantiate connection for ZPL TCP port at given address. 
            ZebraPrinterConnection thePrinterConn = new TcpPrinterConnection(theIpAddress, TcpPrinterConnection.DEFAULT_ZPL_TCP_PORT);

            // Open the connection - physical connection is established here.
            thePrinterConn.Open();

            // This example prints "This is a ZPL test." near the top of the label.
            String zplData = "^XA^FO20,20^A0N,25,25^FDThis is a ZPL test.^FS^XZ";

            // Send the data to printer as a byte array.
            thePrinterConn.Write(Encoding.Default.GetBytes(zplData));

            // Close the connection to release resources.
            thePrinterConn.Close();

        }
        catch (ZebraPrinterConnectionException e)
        {

            // Handle communications error here.
            MessageBox.Show(e.StackTrace);
        }

    } 
```

# caching - WebSphere 7：修改静态内容文件服务的 HTTP 头

> ID：15363942
> 
> 赞同：2
> 
> 时间：2013-03-12T14:26:11.127
> 
> 标签：caching, http-headers, websphere, servlet-filters, websphere-7

我正在使用`<enable-file-serving value="true" />`WebSphere Application Server v7.0 的特性为我的 Java Web 应用程序提供静态内容（图像、CSS、JavaScript）。

如何修改此静态内容的 HTTP 标头（例如，添加一个`Cache-Control`或`Expires`标头）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T15:54:01.403

我最终编写了一个`Filter`基于所请求资源的 URL 添加 HTTP 标头。这是一个简化版本：

**CacheFilter.java**

```
public class CacheFilter implements Filter {
    private static long maxAge = 86400 * 30; // 30 days in seconds

    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {
        HttpServletResponse httpResponse = (HttpServletResponse) response;
        httpResponse.setHeader("Cache-Control", "max-age=" + maxAge);
        chain.doFilter(request, response);
    }

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void destroy() {
    }
} 
```

**web.xml**

```
<filter>
    <filter-name>cache</filter-name>
    <filter-class>com.example.CacheFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>cache</filter-name>
    <url-pattern>*.png</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>cache</filter-name>
    <url-pattern>*.jpg</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>cache</filter-name>
    <url-pattern>*.gif</url-pattern>
</filter-mapping> 
```

# python - Python 是否有类似 wbo 的 SAT-Solver？

> ID：15363947
> 
> 赞同：4
> 
> 时间：2013-03-12T14:26:17.133
> 
> 标签：python, computer-science, solver

是否有解决 SAT 问题的 Python 模块/程序？可能是加权布尔值。（具体来说，类似[wbo](http://sat.inesc-id.pt/wbo/index.html)）

或者，如果没有，则可能存在绑定或 API 来使用这些求解器之一。

我不认为我现在可以自己编程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T18:37:26.000

为了解决 SAT 问题，我建议使用 MiniSat ( [http://minisat.se](http://minisat.se) )、Glucose ( [https://www.lri.fr/~simon/?page=glucose](https://www.lri.fr/~simon/?page=glucose) ) 或 Picosat ( [http://fmv. jku.at/picosat](http://fmv.jku.at/picosat)）还有其他的。在伪布尔优化的情况下，我知道 MiniSat+ ( [http://minisat.se/MiniSat+.html](http://minisat.se/MiniSat+.html) ) 和 Gurobi ( [http://www.gurobi.com](http://www.gurobi.com) )。我认为所有这些都是免费的，除了 Gurobi，它提供试用和学术许可）。

它们都提供了一个命令行界面，其中包含可以在 Python 中轻松生成/读取的输入和输出文件。此外，Gurobi 具有完整的 Python shell。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-11T18:55:27.973

Picosat 具有 python ( [pycosat](https://pypi.python.org/pypi/pycosat) )的绑定

# javascript - 什么会导致 Chrome 保存的密码失败？

> ID：15363948
> 
> 赞同：1
> 
> 时间：2013-03-12T14:26:24.793
> 
> 标签：javascript, forms, google-chrome, autofill

具体来说，在一个登录屏幕中，有两个可见输入（用户名的文本输入，名为“用户名”和密码的密码类型字段，名为“密码”）和两个隐藏字段（用于将成功或错误请求转发到之后的 URL验证），什么会导致 Chrome 无法自动填充凭据？

如果我进入 Chrome 的登录屏幕，之前已经保存了一组用户名和密码，它通常会正确地自动填充这些字段。但是，每加载 3-15 次页面（显然在慢速连接上更频繁），它就会无法做到这一点，从而使字段为空。我尝试直接在 HTML 中附加事件以侦听字段中的变化，但一无所获（从字面上看，事件没有触发）。

我使用 KnockoutJS，但这发生在 ko 被激活甚至加载之前很久。我使用 JQuery 1.7.1 和 RequireJS 1.0.5。（更新它们似乎不会影响问题。）

是否有已知的代码模式会产生这种效果？这可能是 Chrome 中的一个奇怪的错误吗？宇宙辐射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T09:09:19.047

这个问题是用JS改变表单的动作引起的。如果您这样做，Chrome 有时会认为这根本不是同一个表单，并拒绝自动填充凭据。

找到这个真是太糟糕了，所以我自己回答这个问题，然后也许某个地方的某个可怜的灵魂可以在这里找到解决他们问题的方法......

# php - 插入数据库时 字符损坏

> ID：15363954
> 
> 赞同：0
> 
> 时间：2013-03-12T14:26:34.493
> 
> 标签：php, mysql, utf-8, character-encoding

我有一个 PHP 脚本，它获取 XML、选择一些数据并将它们插入我的数据库（MySQL）。我所有的字段都是 utf8_bin。此 XML 为 ISO-8859-1，无法更改，因为是另一个网站将其发送给我。

示例：字符串“NG Contábil”在我的数据库中设置为“NG Contábil”。这是我的脚本：

```
<?php
header('Content-Type: text/html; charset=utf-8');
mysql_query("SET NAMES 'utf8'");
mysql_query('SET character_set_connection=utf8');
mysql_query('SET character_set_client=utf8');
mysql_query('SET character_set_results=utf8');

include '/PagSeguroLibrary/PagSeguroLibrary.php';
include '/PagSeguroLibrary/domain/PagSeguroAccountCredentials.class.php';
include 'conexao.php';
include 'alias_array.php';
include 'retorna_cpf.php';

$conexao = ConectaBD::get_instance();
$conexao->conectar_pronto();
$conexao->BD_pronto();

//(...)

$xml = simplexml_load_file('arquivo.xml');

if($xml === null)
    $xml = simplexml_load_string($resposta_transacao);

$status = $xml->status;
$nome = $xml->sender->name;
$email = $xml->sender->email;
$codigo = $xml->code;
$vetor = $xml->items->item;

$cpf = retorna_cpf($email);

foreach($vetor as $v)
{
    $nome_produto = $v->description;

    if($nome_produto != 'frete')
    {
        //Retorna o id do produto a partir da descrição
        $result = mysql_query('SELECT id_product
        FROM ps_product_lang
        WHERE name = "'.$nome_produto.'"');

        $array = Array();
        while($row = mysql_fetch_alias_array($result))
        {
            foreach($row as $linha)
                array_push($array, $linha);
        }         

        mysql_query('INSERT INTO pagamento(Status, Nome, Email, CPF, idproduto, Codigo, Inscrito, id, Enviado, NomeProduto) 
        VALUES ("'.$status.'", "'.$nome.'", "'.$email.'", "'.$cpf.'", "'.$array[0].'", "'.$codigo.'", 0, null, 0, "'.$nome_produto.'")');
    }
    }
fclose($arquivo);
unlink('arquivo.xml');
?> 
```

感谢您的任何回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:31:56.193

您忽略了一点细微差别：
`mysql_query("SET NAMES 'utf8'");`这不是为了进行正确编码而必须施放的魔法咒语，而是实际上是一个 SQL 查询，它需要在您实际用于运行 SQL 查询 **的同一实例中运行。**

因此，如果您使用 ConectaBD::get_instance(); 连接到您的 mysql 数据库；您必须在该呼叫**之后**而不是之前运行`SET NAMES utf8`查询。

 **> 我不知道为什么，但添加 utf8_decode() 解决了问题

我知道。
`simplexml`的输出**始终**为utf-8。
虽然，正如我上面指出的，您没有将客户端连接设置为`utf8`.
因此，它仍然是默认的`latin1`
（相当无用的） utf8_decode() 调用，您将`utf-8`数据转换回`latin1`并因此正确存储到数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:28:51.513

这应该可以解决您的问题：

```
...
$xml = simplexml_load_file('arquivo.xml');
$xml = iconv('ISO-8859-1', 'UTF-8', $xml);
... 
```**

# xml - 针对多个名称空间的 XQuery

> ID：15363959
> 
> 赞同：0
> 
> 时间：2013-03-12T14:27:04.370
> 
> 标签：xml, xpath, namespaces, xquery

我正在编写一个库来生成复杂的 XQuery 表达式，这些表达式以来自两个不同名称空间的文档为目标。但是，当我生成查询时，我不知道我必须查询的每个元素的特定命名空间，所以我目前正在生成两种可能组合的析取：

//*[ns1:foo/ns1:bar = "一些条件" or ns2:foo/ns2:bar = "一些条件"]

有没有什么方法可以更好地生成这个表达式并且在性能方面更优化？

我发现的一种可能的解决方案是使用：

声明默认元素命名空间“*”

在这种情况下，我可以简单地生成：

//*[foo/bar = "一些条件"]

但看起来这可能会增加额外的性能开销，因为我无法枚举那里的两个可能的命名空间并使用通配符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:32:47.703

我通常必须编写一个处理输入源的两个变体的查询的方法是首先有一个阶段，将输入标准化以消除变化，然后在标准化输入上运行主查询。

这样做的一个优点是标准化步骤是可重复使用的 - 它可以用于您想要执行的任何后续处理。

（在更改所有名称空间 URI 的同时复制文档 - 或者实际上任何此类算法转换 - 在 XSLT 中比在 XQuery 中更容易，但如果您真的需要，可以在 XQuery 中完成。）

# algorithm - Trie 迭代器，后缀排序

> ID：15363962
> 
> 赞同：0
> 
> 时间：2013-03-12T14:27:21.530
> 
> 标签：algorithm, search, trie

我需要为 trie 实现一个迭代器。假设我有

```
 a
    /\
   b  c
  /\
 d  e 
```

如果当前的iterator.state="abd"，我想有iterator.next.state="abe"，然后是"ac"。在每一层，节点按字典顺序排序（例如，在第 2 层，`c`在 之后`b`）。这也应该在 log(n) 时间内发生，其中 n 是节点数。

我能想到的一个解决方案是：考虑一个特殊情况，当每个分支具有相同的高度时。我认为一个相当酷的实现是为每个“级别”维护一个平衡的树。在询问：“abd 之后的字符串”时，当定位在 b 上时，可以在与第三级关联的树中搜索大于“b”的第一个元素，给出“abe”。

然而，由于必须创建树，这可能是不切实际的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:32:24.360

如果我正确理解了这个问题，迭代器状态可能是当前字符串和指向树中当前位置的指针。然后，移动到下一个元素：

1.  如果您当前的位置有兄弟，移动到它并用当前位置的字符替换当前字符串中的最后一个字符。

2.  否则，删除最后一个字符并上树。如果你试图从根部向上，你就完成了。否则，转到步骤 1。

因此，例如，当您在 abd（在您的示例中）时，当前字符串是“abd”并且指针指向“d”。要移动到下一个元素，请将字符串更改为“ab”，移动到兄弟节点（'e'）并将其添加到字符串中，产生“abe”。在那之后，你会因为没有兄弟姐妹而上升，然后到 b 的兄弟姐妹，产生正确的下一个值'ac'。

如您所见，最坏的情况是，这些步骤中的每一个都需要一直回到根目录才能找到兄弟节点。这就是您要的日志（n）。

# mysql - 0-1-2 表格热图中的矩阵

> ID：15363963
> 
> 赞同：4
> 
> 时间：2013-03-12T14:27:26.183
> 
> 标签：mysql, bash, matrix

我的目标是从 mysql 表中提供的信息中获取 0-1-2-Matrix。

例子：

表'Dom'

```
Origin|Species      |  Domain  

KMT1 |  blabla_1234 |  Kringel

KMT1 |  blabla_1234 |  Helix  

KMT1 |  wobble_4556 |  Kringel 

KMT2 |  blabla_1234  | Helix  

KMT2 | piffi_876    |  Kringel 
```

现在我想要以下矩阵：在 x 轴上将是所有物种 - 像这样：

```
blabla_1234 | wobble_4556 | piffi_876 
```

在 y 轴上将是表“Dom”中的所有域，但它们必须按其相应的 KMT（“Origin”）分组。例如，y 轴看起来像这样：

```
KMT1 Helix

KMT1 Kringel

KMT2 Helix

KMT2 Kringel 
```

结果应该是这样的： ![想要的热图](../Images/b070711b2730b8ca540e22eeb8e9d5ac.png)

橙色意味着域和原始蛋白质都存在于给定的物种中。黄色表示在物种中仅发现蛋白质，但在结构域中未发现。我才刚刚学会如何使用 MySQL，而且我从来没有写过脚本。你能告诉我我可以用什么**程序**/脚本来完成这项任务吗？

提前谢谢了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:34:34.960

鉴于您的 Dom 表仅包含正数而不包含负数，您需要生成负数，以便您的输出表可以映射它们。

此查询将为您提供来源、域和物种的所有可能组合：

```
SELECT ds.domain, os.origin, ss.species FROM
(SELECT DISTINCT domain FROM Dom) ds
CROSS JOIN
(SELECT DISTINCT origin FROM Dom) os
CROSS JOIN
(SELECT DISTINCT species FROM Dom) ss 
```

因此，要获取每个组合的“表达式值”，包括负数，请执行以下操作：

```
SELECT completelist.domain, completelist.origin, completelist.species, 
       COALESCE(Dom.species, FALSE) AS found
FROM
    (SELECT ds.domain, os.origin, ss.species
     FROM 
          (SELECT DISTINCT domain FROM Dom) ds
          CROSS JOIN
          (SELECT DISTINCT origin FROM Dom) os
          CROSS JOIN
          (SELECT DISTINCT species FROM Dom) ss
    ) AS completelist
LEFT JOIN Dom ON (completelist.domain = Dom.domain &&
                  completelist.origin = Dom.origin &&
                  completelist.species = Dom.species) 
```

一旦您从数据库中获得了一[组](/questions/tagged/array "显示标记为“数组”的问题")记录，您就可以将其输出为[html](/questions/tagged/html "显示标记为“html”的问题")表。您可以根据 expressionvalue 的值设置（使用[css](/questions/tagged/css "显示标记为“css”的问题")）元素的样式。`<td>`所以你的输出看起来像这样：

```
<table>
 <thead>
   <tr>
     <th>Origin</th>
     <th>Domain</th> 
     <th>Blahbla_1234</th>
     <th>wobble_4556</th>
     <th>piffi_876</th>
   </tr>
 </thead>
 <tbody>
   <tr>
     <th>KMT1</th>
     <th>Kringel</th> 
     <td class='bothexist'>&nbsp;</td>
     <td class='bothexist'>&nbsp;</td>
     <td class='onlyprotein'>&nbsp;</td>
   </tr> 
   <tr>
     <th>KMT1</th>
     <th>Helix</th> 
     <td class='bothexist'>&nbsp;</td>
     <td class='onlyprotein'>&nbsp;</td>
     <td>&nbsp;</td>
   </tr> 
   <!-- etc. -->
 </tbody>
 <tfoot></tfoot>
<table> 
```

繁琐的部分是将来自您的查询的数据重新组织成一个结构，以便从中轻松输出表。

无论如何，虽然您可以使用 shell 脚本来完成所有这些工作，但使用高级语言可能会更轻松。[perl](/questions/tagged/perl "显示标记为“perl”的问题")传统上用于生物信息学，并且有许多不错的库可用，其中可能最重要的是[BioPerl](http://www.bioperl.org/wiki/Main_Page)。[python](/questions/tagged/python "显示标记为“python”的问题")和[ruby](/questions/tagged/ruby "显示标记为“红宝石”的问题")​​ 也很受欢迎。[php](/questions/tagged/php "显示标记为“php”的问题")是一种非常流行和通用的语言，特别适用于网站并且被认为非常容易学习（但许多程序员反对它的各种松懈）。

我希望这能为您指明一个有用的方向。

# perl - bugzilla：如何在高级搜索中创建自定义字段以搜索通过管理员创建的自定义字段

> ID：15363967
> 
> 赞同：4
> 
> 时间：2013-03-12T14:27:34.667
> 
> 标签：perl, search, customization, bugzilla

我知道 Bugzilla 3.0 及更高版本支持为您的错误创建自定义字段，这可以通过管理员来完成。

我的问题是，有什么方法可以在高级搜索中创建一个自定义字段，以便能够搜索具有该自定义字段值的错误。

我知道当前 bugzilla 支持的解决方案是在高级搜索页面上的自定义搜索下使用布尔搜索，但我想创建自己的自定义字段。

到目前为止，我所做的当前修改是通过自定义文件夹下的 form.tmpl 文件进行的，该文件夹是默认文件夹的副本。我已经设法使用默认字段，但在创建自定义字段时没有运气。

来源：[http ://www.bugzilla.org/docs/2.18/html/cust-templates.html](http://www.bugzilla.org/docs/2.18/html/cust-templates.html)

我找到了另一个来源： http: [//mozilla.6506.n7.nabble.com/Adding-Custom-Field-drop-downs-to-Advanced-Search-Page-td80291.html](http://mozilla.6506.n7.nabble.com/Adding-Custom-Field-drop-downs-to-Advanced-Search-Page-td80291.html)

这在某种程度上引导我理解如何解决这个问题。截至目前，看来我需要转到 bugzilla 文件夹下的 search.pm 文件，该文件夹负责生成搜索报告的查询。这在文件本身和[https://wiki.mozilla.org/Bugzilla:Search.pm](https://wiki.mozilla.org/Bugzilla:Search.pm)源中进行了描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T03:08:23.920

是的，您可以通过 Search.pm 文件管理自定义 bugzilla 字段，该文件位于 Bugzilla 文件夹中。

为此，您需要将自定义选择字段推送到合法字段数组中并循环遍历，

```
my @legal_fields = (<enter whatever legal fields, you have with the comma seperator>);

push(@legal_fields, map { $_->name } @select_fields);

foreach my $field ($params->param()) {
    if (lsearch(\@legal_fields, $field) != -1) {
        push(@specialchart, [$field, "anyexact",
                         join(',', $params->param($field))]);
    }
} 
```

select_fields 数组应该包含您的自定义字段。和 legal_fields 包含您的法律领域。

# php - 在 Ubuntu 10.04 上将 PHP 5.4 降级到 5.3

> ID：15363969
> 
> 赞同：0
> 
> 时间：2013-03-12T14:27:37.700
> 
> 标签：php, ubuntu, ubuntu-10.04

我最近使用以下说明将我的 Ubuntu 10.04 服务器升级到 5.4：[http](http://www.upubuntu.com/2012/03/how-to-upgrade-install-php-540-under.html) ://www.upubuntu.com/2012/03/how-to-upgrade-install-php-540-under.html 。

我遇到了一些相当严重的错误，需要降级到 5.3。我找到了适用于更高版本 Ubuntu 的指南和脚本，但我尝试过的那些都抛出了错误。

我该如何降级？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:37:30.603

问题是你需要在完成后删除 PPA，你可以简单地再次从 ubuntu 安装原始包。有一个名为的工具`ppa-purge`可以执行此操作。默认情况下未安装，因此只需使用以下命令安装它：

```
$ sudo apt-get install ppa-purge 
```

然后删除 PPA。**您从此 PPA 安装的所有软件包也将被删除！**

```
$ sudo ppa-purge ppa:ondrej/php5 
```

再次从 ubuntu 安装官方软件包：

```
$ sudo apt-get install php5 # ... other PHP 5.3 stuff 
```

之后您可能不想删除`ppa-purge`：

```
$ sudo apt-get remove ppa-purge 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:49:28.837

您可以按照您提到的指南删除回购列表。通过执行以下操作删除您的 php

> apt-get 删除 php5
> 
> apt-get 清除 php5

之后更新您的 pkg 列表

> apt-get 更新
> 
> 现在安装 10.04 附带的默认版本的 php
> 
> apt-get 安装 php

请注意，您还可以强制安装可从 ubuntu 获得的 deb 包

> apt-get install somepackage=someversion

# vba - 有没有更优雅/更有效的方式来执行这个宏？

> ID：15363970
> 
> 赞同：0
> 
> 时间：2013-03-12T14:27:38.317
> 
> 标签：vba

我使用 VBA 开发了这个宏，它将填充仪表板上的许多图表，这些图表是从另一个工作表上的数据集中提取的。我设置它的方式是根据所需的报告期填充几个表格。这些表设置为过滤 = 0 的条目，以便图表仅显示相关信息。

我是编程新手，目前认为宏的工作原理有时会被挂断，并且总体上非常笨重且效率低下。有没有一种简单的方法可以让这件事运行得更顺畅/更快？

谢谢，

麦克风

```
 Private Sub Calendar1_Click()
    ActiveCell.Value = CDbl(Calendar1.Value)
    ActiveCell.NumberFormat = "mm/dd/yyyy"
    Calendar1.Visible = False
End Sub

Private Sub Calendar2_Click()
    ActiveCell.Value = CDbl(Calendar2.Value)
    ActiveCell.NumberFormat = "mm/dd/yyyy"
    Calendar2.Visible = False
End Sub

Private Sub Worksheet_SelectionChange(ByVal Target As Range)

Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual

Sheets("Supervisor NC").Range("supervisor_nc").AutoFilter Field:=2

Sheets("Customer NC").Range("customer_nc").AutoFilter Field:=2

Sheets("Captain NC").Range("captain_nc").AutoFilter Field:=2

Sheets("Commodity NC").Range("commodity_nc").AutoFilter Field:=2

Sheets("Customer Specific Supervisor").Range("customer_spec_super").AutoFilter Field:=2

    If Target.Cells.Count > 1 Then Exit Sub

    If Not Application.Intersect(Range("a2"), Target) Is Nothing Then

        Calendar1.Left = Target.Left + Target.Width - Calendar1.Width
        Calendar1.Top = Target.Top + Target.Height
        Calendar1.Visible = True
        ' select Today's date in the Calendar
        Calendar1.Value = Date
    ElseIf Calendar1.Visible Then Calendar1.Visible = False
    End If

   If Target.Cells.Count > 1 Then Exit Sub

    If Not Application.Intersect(Range("b2"), Target) Is Nothing Then

        Calendar2.Left = Target.Left + Target.Width - Calendar2.Width
        Calendar2.Top = Target.Top + Target.Height
        Calendar2.Visible = True
        ' select Today's date in the Calendar
        Calendar2.Value = Date
    ElseIf Calendar2.Visible Then Calendar2.Visible = False
    End If

Sheets("Supervisor NC").Range("supervisor_nc").AutoFilter Field:=2, Criteria1:="<>"

Sheets("Customer NC").Range("customer_nc").AutoFilter Field:=2, Criteria1:="<>"

Sheets("Captain NC").Range("captain_nc").AutoFilter Field:=2, Criteria1:="<>"

Sheets("Commodity NC").Range("commodity_nc").AutoFilter Field:=2, Criteria1:="<>"

Sheets("Customer Specific Supervisor").Range("customer_spec_super").AutoFilter Field:=2, Criteria1:="<>"

Application.Calculation = xlCalculationAutomatic

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:03:30.400

试试下面的代码：

```
Private Sub Calendar1_Click()
    ActiveCell.Value = CDbl(Calendar1.Value)
    ActiveCell.NumberFormat = "mm/dd/yyyy"
    Calendar1.Visible = False
End Sub

Private Sub Calendar2_Click()
    ActiveCell.Value = CDbl(Calendar2.Value)
    ActiveCell.NumberFormat = "mm/dd/yyyy"
    Calendar2.Visible = False
End Sub

Private Sub Worksheet_SelectionChange(ByVal Target As Range)

    If Target.Cells.Count > 1 Then Exit Sub

    'if Target.Column = 1 and Target.Row = 1 then    you can also specify rows and cols here

    With Application
        .ScreenUpdating = False
        .EnableEvents = False
        .Calculation = xlCalculationManual
    End With

    Sheets("Supervisor NC").Range("supervisor_nc").AutoFilter Field:=2

    Sheets("Customer NC").Range("customer_nc").AutoFilter Field:=2

    Sheets("Captain NC").Range("captain_nc").AutoFilter Field:=2

    Sheets("Commodity NC").Range("commodity_nc").AutoFilter Field:=2

    Sheets("Customer Specific Supervisor").Range("customer_spec_super").AutoFilter Field:=2

    If Not Application.Intersect(Range("a2"), Target) Is Nothing Then

        Calendar1.Left = Target.Left + Target.Width - Calendar1.Width
        Calendar1.Top = Target.Top + Target.Height
        Calendar1.Visible = True
        ' select Today's date in the Calendar
        Calendar1.Value = Date
    ElseIf Calendar1.Visible Then
        Calendar1.Visible = False
    End If

    If Not Application.Intersect(Range("b2"), Target) Is Nothing Then
        Calendar2.Left = Target.Left + Target.Width - Calendar2.Width
        Calendar2.Top = Target.Top + Target.Height
        Calendar2.Visible = True
        ' select Today's date in the Calendar
        Calendar2.Value = Date
    ElseIf Calendar2.Visible Then
        Calendar2.Visible = False
    End If

    Sheets("Supervisor NC").Range("supervisor_nc").AutoFilter Field:=2, Criteria1:="<>"

    Sheets("Customer NC").Range("customer_nc").AutoFilter Field:=2, Criteria1:="<>"

    Sheets("Captain NC").Range("captain_nc").AutoFilter Field:=2, Criteria1:="<>"

    Sheets("Commodity NC").Range("commodity_nc").AutoFilter Field:=2, Criteria1:="<>"

    Sheets("Customer Specific Supervisor").Range("customer_spec_super").AutoFilter Field:=2, Criteria1:="<>"

    With Application
        .ScreenUpdating = True
        .EnableEvents = True
        .Calculation = xlCalculationAutomatic
    End With

End Sub 
```

# c# - 使用绑定时动态数据显示线图未正确更新

> ID：15363978
> 
> 赞同：1
> 
> 时间：2013-03-12T14:27:54.223
> 
> 标签：c#, wpf, visual-studio-2010, data-binding, dynamic-data-display

此问题已得到解决。我在下面的代码中添加了修复，注释掉的部分来自旧代码。

原始问题：我正在尝试使用动态数据显示线图，但无法更新它（D3 链接：[http](http://dynamicdatadisplay.codeplex.com/) ://dynamicdatadisplay.codeplex.com/ ）

代码编译并运行，并将在构造函数中显示 Line，但是当我启动其中一条显示消息时，图表不会更新。我已验证显示消息已到达那里并且值列表已更新，如果单击图表或使用缩放功能，则数据将在屏幕上更新。

XXX_Display1_VM.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections.ObjectModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using XXX.BaseTypes;
using XXX.BaseClasses.BaseViewModels;
using XXX.InterfaceLibrary.Interfaces.Mediator;
using XXX.InterfaceLibrary.Interfaces.SystemController;
using System.Web;
using System.ComponentModel;
using Microsoft.Research.DynamicDataDisplay.DataSources;

namespace SystemController
{

    public class ModelData
    {
        public double XValue { get; set; }
        public double YValue { get; set; }
        public ModelData(double x, double y)
        {
            XValue = x;
            YValue = y;
        }
    }

    class XXX_Display1_VM : ViewModelBase, INotifyPropertyChanged, IXXX_Display1_VM
    {
        IXXX_Driver _Driver;
        IMediator _Messenger;

        public ObservableCollection<ModelData> Values { get; private set; }

        CompositeDataSource _Display1;
        public CompositeDataSource Display1
        {
            get
            {
                //Removed this and moved it to the areas where the values are being set
                //if (_Display1 == null)
                //{
                    //var xData = new EnumerableDataSource<double>(Values.Select(v => v.YValue));
                    //xData.SetXMapping(x => x);
                    //var yData = new EnumerableDataSource<double>(Values.Select(v => v.XValue));

                    //yData.SetYMapping(y => y);
                    //_Display1 = xData.Join(yData);              

                //}

                return _Display1;
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        //protected void RaisePropertyChanged(string propertyName)
        //{
        //    if (PropertyChanged != null)
        //    {
        //        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        //    }
        //}

        protected void OnPropertyChanged(PropertyChangedEventArgs e)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
               handler(this, e);
            }
        }

        protected void OnPropertyChanged(string propertyName)
        {
            OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
        }

        public XXX_Display1_VM(IXXX_Driver InDriver, IMediator InMessenger)
        {
            _Driver = InDriver;
            _Messenger = InMessenger;

            _Messenger.Register<DisplayMsgData>(ShellMessage.DISPLAY_MESSAGE_EVENT, OnReceiveDisplayMessage);

            Values = new ObservableCollection<ModelData>();
            _Display1 = new CompositeDataSource();

            Values.Add(new ModelData(1.0,1.0));
            Values.Add(new ModelData(1.5, 2.0));
            Values.Add(new ModelData(2.0, 2.5));

            var xData = new EnumerableDataSource<double>(Values.Select(v => v.YValue));
            xData.SetXMapping(x => x);
            var yData = new EnumerableDataSource<double>(Values.Select(v => v.XValue));
            yData.SetYMapping(y => y);

            _Display1 = xData.Join(yData);

        }

        private void OnReceiveDisplayMessage(DisplayMsgData Data)
        {
            if (Data.MsgType == "SetMode1")
            {
                Values.Clear();
                Values.Add(new ModelData(2.0, 1.0));
                Values.Add(new ModelData(1.5, 2.0));
                Values.Add(new ModelData(2.0, 2.5));

                var xData = new EnumerableDataSource<double>(Values.Select(v => v.YValue));
                xData.SetXMapping(x => x);
                var yData = new EnumerableDataSource<double>(Values.Select(v => v.XValue));

                yData.SetYMapping(y => y);
                _Display1 = xData.Join(yData);

                OnPropertyChanged("Display1");                    
            }
            else if (Data.MsgType == "SetMode2")
            {
                Values.Clear();
                Values.Add(new ModelData(3.0, 1.0));
                Values.Add(new ModelData(2.5, 2.0));
                Values.Add(new ModelData(5.0, 2.5));

                var xData = new EnumerableDataSource<double>(Values.Select(v => v.YValue));
                xData.SetXMapping(x => x);
                var yData = new EnumerableDataSource<double>(Values.Select(v => v.XValue));

                yData.SetYMapping(y => y);
                _Display1 = xData.Join(yData);

                OnPropertyChanged("Display1");
            }
            else if (Data.MsgType == "SetMode3")
            {
                Values.Clear();
                Values.Add(new ModelData(1.0, 3.0));
                Values.Add(new ModelData(2.5, 2.0));
                Values.Add(new ModelData(3.0, 1.5));

                var xData = new EnumerableDataSource<double>(Values.Select(v => v.YValue));
                xData.SetXMapping(x => x);
                var yData = new EnumerableDataSource<double>(Values.Select(v => v.XValue));

                yData.SetYMapping(y => y);
                _Display1 = xData.Join(yData);

                OnPropertyChanged("Display1");
            }
        }

        public string GetClassName()
        {
            return "XXX_DisplayController_VM";
        }

    }
} 
```

XXX_Display1.xaml.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using XXX.InterfaceLibrary.Interfaces.SystemController;

namespace SystemController
{
    /// <summary>
    /// Interaction logic for XXX_Display1.xaml
    /// </summary>
    public partial class XXX_Display1 : UserControl, IXXX_Display1
    {        
        IXXX_Display1_VM _VM;
        IXXX_Driver _Driver;

        public XXX_Display1(IXXX_Driver InDriver, IXXX_Display1_VM InVM)
        {
            _VM = InVM;
            _Driver = InDriver;
            DataContext = InVM; //new XXX_Display1_VM(_Driver);
            InitializeComponent();

        }

        public string GetClassName()
        {
            return "XXX_Display1";
        }  
    }
} 
```

XXX_Display1.xaml：

```
<UserControl x:Class="SystemController.XXX_Display1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:d3="http://research.microsoft.com/DynamicDataDisplay/1.0" 
             mc:Ignorable="d" 
             d:DesignHeight="550" d:DesignWidth="550">
    <Grid>
        <d3:ChartPlotter Name="Display1" Height="400" Width="400">
            <d3:Header>
                <TextBlock HorizontalAlignment="Center" FontSize="20">Very simple line plot</TextBlock>
            </d3:Header>
            <d3:VerticalAxisTitle>This is vertical axis</d3:VerticalAxisTitle>
            <d3:HorizontalAxisTitle>This is horizontal axis</d3:HorizontalAxisTitle>
            <d3:LineGraph DataSource="{Binding Path=Display1}" Stroke="Black"/>

        </d3:ChartPlotter>
    </Grid>
</UserControl> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:41:45.367

我发现做到这一点的最佳方法是在您的代码中包含一个表示 DataSource 的属性并将图表的 DataSource 绑定到该属性。每次更新或重新分配数据源时，让您的代码实现 INotifyPropertyChanged 并调用 OnPropertyChanged。这将迫使绘图仪观察绑定并重新绘制图表。

例子：

```
EnumerableDataSource<Point> m_d3DataSource;
public EnumerableDataSource<Point> D3DataSource {
    get {
        return m_d3DataSource;
    }
    set {                
        //you can set your mapping inside the set block as well             
        m_d3DataSource = value;
        OnPropertyChanged("D3DataSource");
    }
}     

protected void OnPropertyChanged(PropertyChangedEventArgs e) {
    PropertyChangedEventHandler handler = PropertyChanged;
    if (handler != null) {
        handler(this, e);
    }
} 

protected void OnPropertyChanged(string propertyName) {
    OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
} 
```

# javascript - 为查询数据库的 html 超链接创建函数

> ID：15363986
> 
> 赞同：0
> 
> 时间：2013-03-12T14:28:09.553
> 
> 标签：javascript, asp.net, html, linq-to-sql

我创建了一个`asp.net with C# and MySql Database at the backend`名为简单在线购物的 Web 应用程序，

我创建了一个`cascading dropdown horizontal navigation menu (navmenu) with unordered lists and html hyperlinks`. 我有 2 页`Homepage.aspx and ShowProducts.aspx`。

Navmenu 包含层次结构中的类别，产品和类别数据存储在数据库中。当在导航菜单上单击超链接时，我希望显示 ShowProducts.aspx 中的类别中包含的产品，我在 navmenu 的层次结构中的无序列表中有列表项

1.服装
1.1：男装
1.1.1：衬衫
1.1.2：裤子
1.1.3：冬装

1.2：女装
1.2.1：休闲装
1.2.2：牛仔裤
1.2.3 包包

我将超链接写为：

```
 <ul id="navmenu">
<li><a href="ShowProducts.aspx">Clothing</a>
<ul class="sub1">
                    <li><a href="ShowProducts.aspx">Mens</a>
                        <ul class="sub2">
   <li><a href="ShowProducts.aspx">Shirts</a></li>
                            <li><a href="ShowProducts.aspx">Mens Trousers</a></li>
                            <li><a href="ShowProducts.aspx">Jeans</a></li>
                            <li><a href="ShowProducts.aspx">Winter wear</a></li>
                            <li><a href="ShowProducts.aspx">Watches & Bags</a></li>
                            <li><a href="ShowProducts.aspx">Footwear for men</a></li>
  </ul>
                    </li>
                    <li><a href="ShowProducts.aspx">Womens</a>
                        <ul class="sub2">
                            <li><a href="ShowProducts.aspx">Sarees & Dresses</a></li>
                            <li><a href="ShowProducts.aspx">Jewellery</a></li>
                            <li><a href="ShowProducts.aspx">Womens Jeans</a></li>
                            <li><a href="ShowProducts.aspx">Womens Bags</a></li>
                            <li><a href="ShowProducts.aspx">Footwear for Women</a></li>
   </ul>
                    </li>
                </ul>
            </li> 
```

我正在使用 Devart **linqconnect(Linq To MySql)**。有人告诉我使用**查询字符串**在页面之间传递数据，但它包含**图像和数据**，所以我想使用**转发器**在层次结构中显示它们。可以添加一个**onlick 处理程序来`<a>`**标记 so 并编写一个**javascript 函数** ，例如

```
 <script type="text/javascript"> 
```

功能展示产品（）{

```
 -- Linq code to retrieve products based on id -- 
```

}

任何人都可以提出一个好的方法或告诉我如何实现这一目标。谢谢..请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:46:51.927

使用 Repeater 在您的页面上呈现链接列表。将 ShowProduct.aspx?id=1 之类的查询字符串值添加到每个链接。

在 ShowProduct 页面上，使用 linq 从 DB 中检索数据：

```
using(DataContext db = new DataContext())
{
    int id = Convert.ToInt32(Request.QueryString["id"]);
    var product = db.products.Where(p => p.id = id).FirstOrDefault();
    if(product != null)
    {
        //do your job here with product data
    }
} 
```

# ios - UIButton 框架大小始终为零

> ID：15363987
> 
> 赞同：0
> 
> 时间：2013-03-12T14:28:11.273
> 
> 标签：ios, objective-c

所以我可能遗漏了一些明显的东西，但我无法获得在我的

`- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`

功能：

```
callerPlayerBtn = [UIButton buttonWithType:UIButtonTypeCustom];
[callerPlayerBtn setImage:[UIImage imageNamed:@"callPlayerBtn"] forState:UIControlStateNormal];
[self.view addSubview:callerPlayerBtn];   
NSLog(@"SIZES ARE %f %f", callerPlayerBtn.bounds.size.width, callerPlayerBtn.bounds.size.height); 
```

我究竟做错了什么？日志总是`0`. 我想访问它的维度以使其居中。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T14:31:48.143

我看到您正在使用`buttonWithType:`方法而不是使用 nib 创建按钮。

如果你这样做，你需要自己设置框架。

```
callerPlayerBtn.frame = CGRectMake(originx, originy, width, height); 
```

对于宽度和高度，您可以使用按钮的图像大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:32:42.623

如果您希望按钮的大小与图像相同，您应该将按钮的框架也设置为图像的宽度和高度，或者您也可以设置自定义自定义大小

```
[callerPlayerBtn setFrame:CGRectMake(x,y,buttonImage.size.width,buttonImage.size.height)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:33:16.273

像这样设置按钮的框架：

```
UIButton * callerPlayerBtn = [UIButton buttonWithType:UIButtonTypeCustom];
callerPlayerBtn.frame = CGRectMake(60, 10, 220, 25); //here we are setting frame
[callerPlayerBtn setImage:[UIImage imageNamed:@"callPlayerBtn"] forState:UIControlStateNormal];
[self.view addSubview:callerPlayerBtn];
NSLog(@"SIZES ARE %f %f", callerPlayerBtn.bounds.size.width, callerPlayerBtn.bounds.size.height); 
```

日志值将是：

```
2013-03-12 20:02:30.394 SampleProject[591:16a03] SIZES ARE 220.000000 25.000000 
```

# python - Python Windows 将 HEX 写入 BIN 到文件中

> ID：15363989
> 
> 赞同：0
> 
> 时间：2013-03-12T14:28:12.470
> 
> 标签：python, windows, python-2.7, binary, hex

我有以下脚本将二进制文件作为 HEX 保存到变量中，并将其作为二进制文件转储到文件中，在 Linux 下一切正常，但在 Windows 下失败，我不知道为什么：

```
import os, os.path
from ctypes import *
import sys, binascii

current_dir = r".\\"
startup = "4d5a90000300000004000000ffff0000b800000000000000400000000000000000000000000000000000000000000000000000000000000000" # snipped, too big to have it here

def DumpStartupFile():
        startupbin=binascii.unhexlify(startup)
        o=open(current_dir+"\\startup.exe","w")
        o.write(startupbin)

if os.path.isfile(current_dir+"\\startup.exe"):
        True
else:
        DumpStartupFile() 
```

知道为什么它在 Windows 下会失败吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:29:39.227

在写入二进制数据时，您总是希望以二进制模式打开文件：

```
o=open(current_dir+"\\startup.exe","wb")
o.write(startupbin) 
```

特别是在 Windows 上，以文本方式打开文件会导致换行符在写入时被转换为平台原生值，但这对于二进制数据来说是不可取的行为。

从[`open()`功能文档](http://docs.python.org/2/library/functions.html#open)：

> 默认是使用文本模式，它可以`'\n'`在写入和读取时将字符转换为特定于平台的表示。因此，在打开二进制文件时，应附加`'b'`到*模式*值以二进制模式打开文件，这将提高可移植性。（即使在不区别对待二进制文件和文本文件的系统上，附加`'b'`也很有用，它用作文档。）

# design-patterns - DAO 模式和多个表中的选择

> ID：15363993
> 
> 赞同：3
> 
> 时间：2013-03-12T14:28:18.023
> 
> 标签：design-patterns, dao

在我的应用程序中，我需要创建一个在多个表上运行并从所有表中返回信息的复杂查询。

在这种情况下我如何使用 DAO 模式？

当你有一个用于 CRUD 的 DAO 时，它真的很简单，但是当你必须处理复杂的查询时，它就会令人困惑。

我是否为这个特定的业务操作创建了一个表示所有表的集合信息和 DAO 的对象？

或者我应该为每个表都有一个 DAO，并在每个返回一个对象的 DAO 上分离这个查询，最后我会有很多代表那个复杂查询的对象？

还是有另一种选择？

DAO 类应该与我的数据库中的表或业务类直接链接（表示）？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T02:11:29.613

您必须权衡以下因素，然后才能说出哪种模式有用。例如：

1.  将访问多少张表，性能有多重要？
2.  该对象是只读的还是需要更新？

考虑到这些因素，如果有性能要求并且需要对该对象执行 CRUD，您可以为该对象选择单个 DAO。而且，如果它的只读和性能不是主要约束，您可以从多个 DAO 构造这个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:44:55.640

您可以多解释一下您的业务对象是什么以及它们的关系是什么......

但就设计而言，一个常见的选择是为每个要从中进行 CRUD 的表创建和映射一个类。这些类将具有与其各自表中的列匹配的属性。

是否还为每个表创建 DAO 取决于您，但您也可以（可能取决于您的实现语言）创建实现 CRUD 方法的单个通用 DAO。

另一种考虑更复杂实体关系的设计是创建视图和存储过程，并映射到它们。这将使您能够创建一个没有用特定表以 1-1 清晰表示的对象。这种方法有一些优点（例如，您可以更好地将数据库设计封装在远离应用程序的地方），但它也可能有缺点（您可能不希望将业务逻辑移动到数据库中）。