# StackOverflow 问答 13008000-13008999

# android - 如何调试 YAFFS？

> ID：13008004
> 
> 赞同：4
> 
> 时间：2012-10-22T09:03:06.980
> 
> 标签：android, linux, filesystems, linux-kernel, embedded

我想打开 YAFFS 中可用的任何调试工具。我希望它能帮助我调试使用闪存时出现的问题。linux 内核中是否有任何配置可以帮助我调试 YAFFS？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:00:46.053

根据文档，有：

> Yaffs 有很多内置的跟踪来帮助调试和集成。跟踪由 yaffs_traceMask 位掩码控制，它允许在运行时禁用或启用各种跟踪集。
> 
> 跟踪位在 yaffs_trace.h 文件中指定。
> 
> The tracing mechanism has also been 'hijacked' to provide a control mask for extra verification code when the YAFFS_TRACE_VERIFYxxx trace bits are selected.
> 
> 跟踪机制很容易通过类似 printf 的语句集成到系统中。跟踪都是通过宏完成的，如果需要，这些宏允许将字符串转换为 unicode 或类似的。

它可以在运行时通过 proc 或 sysfs 接口进行操作，例如：

```
cat +os > /proc/yaffs # Enables YAFFS_TRACE_OS
cat -all+gc > /proc/yaffs # Disables everything then enable YAFFS_TRACE_GC
cat 0xf000 > /proc/yaffs # Set trace mask to specified bitmask. 
```

详情见：[http ://www.yaffs.net/yaffs-tuning-and-configuration#Tracing_mechanism](http://www.yaffs.net/yaffs-tuning-and-configuration#Tracing_mechanism)

# database - 数据库设计：在这种情况下复制信息有意义吗？

> ID：13008005
> 
> 赞同：1
> 
> 时间：2012-10-22T09:03:08.583
> 
> 标签：database, database-design, data-structures

我正在建立一种服务，一种社交网络，预计会吸引数万亿用户。这些用户将能够关注其他用户。对于这种情况，让我们假设我正在构建 Facebook。哈哈！

在每个用户的姓名旁边，将显示他拥有的关注者数量。就像是

```
SELECT COUNT(*) FROM users_vs_users 
  WHERE user_followed_id = 'xxx' GROUP BY user_followed; 
```

会起作用，但是为每个页面重新加载并检查数万亿用户会杀死我的服务器。

`num_of_followers`在表中为每个用户命名一个字段是否合理，`users`每次关注或取消关注某人时都会更新该字段？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:07:33.950

是的。实际上，出于性能原因，您正在反规范化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:18:06.650

我这里有另一种看法

一些数据库可以使用内存（加上磁盘同步），如 Oracle times 10 和 MySQL Cluster

仅将基于内存的数据库用于经常访问的数据通常会提供出色的性能，而只会使管理“计数”字段历史的麻烦

另一个重要提示，除非必须，否则永远不要优化，尝试预测未来几个月而不是几年的预期流量，然后您可以监控哪些查询实际上正在降低性能或进行过多的磁盘访问，然后您就可以了根据实际信息对表格进行反规范化，而不是猜测

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:08:06.930

在我看来，任何自尊的 DBMS 都应该在内部自行执行这样的优化。或者也许他们已经这样做了？COUNT(*) 真的很慢吗？我不知道。

无论如何，为什么不呢？只要确保“users_vs_users”和“users.num_of_followers”随时同步即可。

# java - 在 jbuttons 上以表格格式设置数据

> ID：13008007
> 
> 赞同：1
> 
> 时间：2012-10-22T09:03:16.537
> 
> 标签：java, mysql, swing, netbeans, jbutton

![要显示的 jbuttons 表](../Images/e1e5aac14647948d4139b0ae769db3a0.png)

我必须在从数据库（mysql）检索的 jbutton 上显示数据，但由于所涉及的字符串长度不同，呈现看起来很糟糕且无序。有没有办法获得对齐。这是我在 jbutton 'j' 上设置数据的代码是 jbutton 数组

```
 j[check].setText(rs.getString(1)+" "+rs.getString(2)+" "+rs.getString(3)+"  "+rs.getString(4)+" "+ws+rs.getString(5)+" "+rs.getString(6)+" "+rs.getString(7)); 
```

我为某些特定的数据集提供了一些空间，但在大多数情况下它会变坏。

这里有两种长度不同的情况

```
CSE201 Programming Fundamentals 3 Saritha V. SJT-401 A1 59
CSE201 Programming Fundamentals 3 Yokesh Babu SJT-402 A1 58 
```

现在在第三个字符串之后（即“CSE201 Programming Fundamentals 3”之后）长度不同并且格式变差。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:05:42.593

正如 kleopatra 评论，您需要选择[所需的布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。*如果没有明确说明bad 和 disordered*的含义，请考虑以下替代方案：

*   `FlowLayout`, 默认为`JPanel`, 将使用封闭组件的首选大小。

*   `GridLayout`将确保所附组件的尺寸相同且足够大以容纳最大的按钮。[这里](https://stackoverflow.com/a/3420431/230513)显示了一个实例网格的示例，`JPanel`每个实例包含一个`JButton`; 请注意，按钮默认居中。由于您想要具有任意数量列的单行，请使用`new GridLayout(1, 0)`.

*   `BoxLayout`with`LINE_AXIS`将尝试使用封闭组件的首选宽度，如此处[所示](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)。

一定要`pack()`附上`Window`. 如果这没有帮助，请编辑您的问题以包含一个显示您遇到的任何问题的[sscce 。](http://sscce.org/)

# java - 在 web gui 中运行独立的 java 应用程序

> ID：13008008
> 
> 赞同：0
> 
> 时间：2012-10-22T09:03:17.023
> 
> 标签：java, architecture

我有一个在 Linux 上运行的大型 Java 应用程序。这是一个长期运行的服务器端应用程序。我希望能够使用 Web GUI 运行此应用程序。

架构应该是什么？

*   java 应用程序是否应该是 Web GUI 项目（服务器端）的一部分？或者
*   它是否应该保留为我将以其他方式运行的外部项目（可能通过命令行`java -jar`或`ant`）

我很快将编写 REST 访问以允许其他客户端访问该应用程序。

编辑：该应用程序是 nutch - 一个具有我自己扩展的 apache 网络爬取/索引应用程序。我需要一个用作管理 GUI 的 Web GUI。

另外，我问的不是构建 Web GUI 的方法，而是关于将完整的 Java 应用程序集成到客户端-服务器应用程序中的架构，该应用程序将用作原始程序的管理应用程序。现有应用程序是否应该成为新客户端-服务器应用程序中服务器的一部分？或者它应该作为一个非依赖单元在外面，我会以其他方式与它沟通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:36:16.223

我曾经有过类似的情况。该应用程序是一个自定义数据传输协议代理，它侦听一个端口，并根据数据包前缀，将接收到的数据包转发到与该前缀绑定的另一个地址。它需要一直处于活动状态，并且所有提到的参数都是使用 Web UI 配置的。

为了使应用程序可以通过 Web UI 进行配置，我执行了以下操作：

我在应用程序中添加了一个控制端口，它侦听 START、STOP 和 STATUS 命令并为每个命令返回适当的响应。此端口只能在本地访问。在同一台机器上，有一个[Apache Tomcat](http://tomcat.apache.org/)服务于 Web UI。

登录后，具有足够角色/权限的用户可以加载 START/STOP/STATUS 页面，该页面通过套接字将足够的命令发送到代理控制端口。但是，使用 servlet 中的套接字需要设置 Java 安全权限。

我想你也可以通过 REST 做类似的事情，但是这种方法的敏感点是向控制端口发出命令——用户需要经过身份验证和授权才能执行这样的操作。

# jquery - 如何更新视频网址...使用 jquery 简单的方式？

> ID：13008009
> 
> 赞同：1
> 
> 时间：2012-10-22T09:03:40.750
> 
> 标签：jquery, video

我有这个html ..

```
<video id="task2ResultVideo" autobuffer poster="img/task2-results-host-poster.jpg">
   <source src="Video/webm/Task_2.4a_Host_treated.webm" type="video/webm" />
   <source src="Video/ogv/Task_2.4a_Host_treated.theora.ogv" type="video/ogg" />
   <source src="Video/MP4/Task_2.4a_Host_treated.mp4" type="video/mp4" />
</video> 
```

在页面中，如果用户单击按钮，我需要根据用户单击的选项更改视频。（当用户 lick 我生成 时`task2Video[username]`，请参见下面我声明的。）

我的视频库：

```
var task2Video = {
    jonkimpaulo : "Task_2.4a_Host_treated",
    jonpaulokim : "Task_2.4a_Host_treated",
    kimjonpaulo : "Task_2.5a_Host_treated",
    kimpaulojon : "Task_2.5a_Host_treated",
    paulokimjon : "Task_2.6a_Host_treated",
    paulojonkim : "Task_2.6a_Host_treated"
} 
```

使用上面的名称，我如何替换所有 3 种格式？使用类似：

`task2Video[task2Video]`……这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:10:34.667

假设您想保留特定的文件扩展名，您的脚本可能如下所示：

```
// TODO implement yourself according to your needs
var nextvideo = task2Video.paulokimjon; 

// iterate thru all video sources
$('video source').each(function() {

    // remember the suffix
    var suffix = $(this).attr('src').split('.').pop();

    // update src (using new value, appending suffix)
    $(this).attr('src', nextvideo + '.' + suffix);

}); 
```

请参阅此[演示](http://jsfiddle.net/WZ72Y/)。

# codeigniter - CodeIgniter 解析器插件

> ID：13008019
> 
> 赞同：0
> 
> 时间：2012-10-22T09:04:36.133
> 
> 标签：codeigniter, parsing, if-statement

无法加载 my_parser 类。将此[http://codepad.org/QtHsyRN3](http://codepad.org/QtHsyRN3)添加到应用程序/库中，而不是在我编写的控制器中

```
$this->load->library('my_parser'); 
```

但我得到

```
Unable to load the requested class: my_parser 
```

可以是什么？我需要这样的东西

```
{if 10 > 8}10 is greater then 8<br />{/if} 
```

但是没有smarty等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:13:54.930

用户指南指出在调用库时不应包含“MY_”，因此：

```
$this->load->library('parser'); 
```

应该工作 - 请参阅[http://codeigniter.com/user_guide/general/creating_libraries.html](http://codeigniter.com/user_guide/general/creating_libraries.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:32:12.527

.php 文件名称错误。解决方案是**“类名 = .php 文件名”**

# django - 另一个 NoReverseMatch 错误。尝试在模型层中使用 reverse()

> ID：13008020
> 
> 赞同：1
> 
> 时间：2012-10-22T09:04:40.860
> 
> 标签：django, django-models, django-urls

我试图找到类似的话题，但对我没有多大帮助。

我的错误（例如）：

> 使用参数“（u'pU6ARMPCgHeyTAGhBWYwxZqLSUtwqWHqnf9MNEfd'，）”和关键字参数“{}”反转“user_activate”

网址.py：

```
url(r'^user/activate/([A-Za-z0-9]+)$','users.views.activate', name='user-activate'), 
```

视图.py：

```
def activate(request, key):
    user = User.objects.select_related('profile').get(activation_key=key)
    if user is not None:
       if user.is_active:
           print 'already active'
       else:
          if user.get_profile().check_key_is_valid():
             user.is_active = True
             user.save()
          else:
             user.get_profile().reset_activation_data()
             send_activation_email(user.get_profile().activation_key, user.email)
             print 'key expired'
    else:
        print 'user not found'
    return HttpResponseRedirect(reverse('front')) 
```

模型.py：

```
def send_activation_email(key, email):
    from django.core.urlresolvers import reverse
    path = reverse('user_activate', args=[key])
    from django.contrib.sites.models import Site
    site = Site.objects.get_current().domain
    url = "http://%s%s" % (site, path)

    from django.core.mail import send_mail
    from my_app import settings
    send_mail('Account activation', url, settings.SITE_EMAIL,
        [email], fail_silently=False) 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:15:55.693

您已将 url 命名为`name='user-activate'`(with dash)，而您尝试使用`'user_activate'`with进行反向查找`'_'`。

改变

```
path = reverse('user_activate', args=[key]) 
```

至

```
path = reverse('user-activate', args=[key]) 
```

# git - GIT-SVN 每次尝试提交都会导致 需要更新

> ID：13008027
> 
> 赞同：1
> 
> 时间：2012-10-22T09:05:03.653
> 
> 标签：git, svn

我正在尝试使用 git-bash 将本地所做的更改提交到远程存储库

> git svn dcommit

结果是

```
 <filename>: needs update
 update-index --refresh: command returned error: 1 
```

我的机器上安装了 tortoiseGIT，如果我通过右键单击本地存储库和 Git Commit -> Master... 进行提交，那么提交工作正常。

2个问题，这和做一个 git svn dcommit 一样吗？

而且，为什么我从命令行收到错误？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:32:42.130

我并没有真正意识到提交提交所需的顺序。

我现在执行以下步骤来进行远程提交，它工作正常：

```
git commit -a 
```

然后我根据提示在提交中添加注释。我无法确定 VIM 格式，但添加注释的步骤是按“i”进入“插入”模式。添加我的笔记，按“esc”，输入 :x 保存我的笔记。

```
git svn dcommit 
```

瞧！一切正常！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-01T03:41:54.970

您应该阅读此[http://juststuffreally.blogspot.com/2008/10/how-to-git-svn-dcommit-with-local.html](http://juststuffreally.blogspot.com/2008/10/how-to-git-svn-dcommit-with-local.html) 如果您真的不想提交那些未暂存的文件，这是正确的解决方案

# java - 域名不指向安装的Java WebApplication并行plesk，删除端口号

> ID：13008029
> 
> 赞同：1
> 
> 时间：2012-10-22T09:05:20.300
> 
> 标签：java, dns, tomcat6, plesk

我已经通过 Plesk 11.0.4 在我的服务器上安装了一个 Java Web 应用程序。现在我希望我的域名指向我的网络应用程序。我的地址“www.domain.com”显示空白页。当我通过 plesk 安装我的应用程序时，我可以在“www.domain.com:9080/webapp”地址上访问它。但我想从我的域名访问我的 Web 应用程序，例如 www.domain.com 将访问我的应用程序。我的 webapp 应用程序的根路径是：'/usr/share/tomcat6/work/Catalina/PSA/webapp'

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-01-22T18:20:39.363

这适用于 Plesk 11.x：在您可以选择 Web 应用程序的页面上，“安装”按钮的右侧实际上有一个下拉菜单。在那里您可以选择“自定义安装”并安装到文档根目录中。

![在此处输入图像描述](../Images/1068dcdddb2c54211f95439821d6eb53.png)

# c# - 解决方案输出目录

> ID：13008031
> 
> 赞同：4
> 
> 时间：2012-10-22T09:05:25.497
> 
> 标签：c#, visual-studio-2010

我目前正在进行的项目由多个团队开发，每个团队负责项目的不同部分。他们都建立了自己的 C# 项目和解决方案，并使用特定于他们自己需求的配置设置。但是，现在我们需要创建另一个全局解决方案，它将所有项目组合并构建到同一个输出目录中。

我遇到的问题是，我发现只有一种方法可以让所有项目都构建到同一个输出目录中——我需要修改所有项目的配置。这是我们想要避免的。我们希望所有这些项目都不了解这种“全球”解决方案。每个团队都必须保留仅使用自己的子解决方案的可能性。

一种可能的解决方法是仅为此“全局”解决方案为所有项目创建一个特殊配置，但这可能会产生额外的问题，因为现在您必须不断地将此配置设置与该特定团队使用的常规设置同步。我们要做的最后一件事是花几个小时试图弄清楚为什么在全局解决方案下构建时某些东西不起作用，仅仅是因为开发人员在他们的配置中检查了一些复选框，但在全局配置中忘记了这样做。

因此，为简化起见，我们需要某种输出目录设置或构建后事件，这些设置仅在从该全局、包罗万象的解决方案构建时才会出现。有没有办法在不改变项目配置的情况下实现这一点？

**更新 1**
我想我需要提及一些额外的细节：

我们需要这个全局解决方案尽可能接近最终用户在安装我们的应用程序时获得的结果，因为我们打算在需要确定应用程序的哪个部分不工作时使用它来调试整个应用程序在将此错误发送给从事该部分工作的团队之前。

这意味着在全局解决方案下构建时，输出目录层次结构应该与安装后在 Program Files 中的目录层次结构相同，例如，如果我们有 Program Files/MyApplication/Addins 文件夹，其中包含由开发的所有插件不同的团队，我们需要全局解决方案来从插件项目中复制二进制文件并将它们相应地放置在输出目录中。

问题是，开发插件的团队不需要知道它是插件并且应该放在那个文件夹中，所以他们不能将他们的相对输出目录更改为 build/bin/Debug/Addins。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:19:37.850

这里的关键是团队负责交付。该可交付成果是二进制文件的集合。因此，“全球”解决方案……或“使用团队可交付成果的产品”有兴趣确保所有“当前可交付成果”协同工作。也就是说，您可以从协作工作中获得可交付成果。

所以这引出了几个问题。团队是否交付了他们认为是“发布”的内容。这在构建系统中可能是自动的。如果它构建并且所有测试都通过然后发布它。

您正在寻找的是一个发布或推广版本的团队。源代码是您到达那里的方式，二进制文件是结果。每个团队控制它认为是发布的二进制文件（这可能由构建系统自动执行）。

不完全是您所问的，但我希望它是导致正确问题的答案，从而产生良好的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:22:16.640

一种非常简单的方法是创建解决方案。包括所有项目并添加一个（或更多）项目来处理全局解决方案构建任务。然后，全局解决方案中的项目应该引用他们需要的项目，然后让 Visual Studio 处理如何从每个项目中获取二进制文件。它们将（在正常情况下）被复制到构建项目的输出文件夹中。因此，专门为全局构建任务添加的项目将拥有所有引用项目的副本

另一种方法是创建一个引用其余构建脚本的全局 MSBuild 脚本。每个项目都有自己的 MSBuild 脚本

**编辑**

从评论看来，有两类项目。一个需要建设，一个不需要。

对于那些需要构建的人，将它们作为聚合项目中的项目引用，对于那些不需要构建的人，将它们添加为引用或将 dll 作为资源添加。

使用后者将 Build 操作的属性更改为 None 并复制到输出目录以复制（如果较新）

在这两种情况下，您现在都在输出目录中拥有所有 dll，然后您可以对聚合项目执行构建后操作，**移动**应该位于特定文件夹中的 dll（即不在输出文件夹中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:22:06.133

看看[**持续集成**](http://en.wikipedia.org/wiki/Continuous_integration)的实践和**构建服务器**与脚本构建的使用。在团队开发应用程序的不同部分时，这是必不可少的工具，您的问题很好地说明了原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:46:25.420

您没有提到是否使用版本控制系统。我在实践中发现每个开发人员都维护他/她/他们的团队配置并在该机器上本地构建，因为您不检查 *.suo 或 *.user 文件，大多数个人配置只会影响单个团队成员。

在完全独立的机器上，从所有存储库中签出相同的代码，并在构建机器上编译项目（这可以完全自动化）。这可以保持您的构建服务器的独立性。

不要担心它是一个“解决方案”。您可以一个接一个地轻松构建多个解决方案。

由于输出路径是相对的（可能是“bin\Debug”），它会在您检查它的任何地方构建。如果您希望所有二进制文件都在同一个输出文件夹中，您可以调整每个配置的输出路径以匹配。像“....\bin\Debug”之类的东西（显然这会影响项目在本地机器上的构建位置，但它可能无关紧要）。这样，多个项目将构建相同的目标输出。

您还可以在构建服务器上包含一个单独的设置构建，该构建服务器不在每个开发人员的本地计算机上以打包最终产品。

# jquery - jQuery 中的附加事件

> ID：13008032
> 
> 赞同：0
> 
> 时间：2012-10-22T09:05:27.320
> 
> 标签：jquery, slidetoggle

我有一个简单的 jQuery 手风琴，它通过滑动效果切换 CSS 类（显示、隐藏）。我想在切换发生时使用 CSS 类模块表（从 padding-bottom：40px 到 padding-bottom：0）删除父 div 上的 CSS 填充，但到目前为止我没有成功。

这是CSS代码：

```
body {
    width: 300px;
    font-family: Arial;
    padding: 20px;
}
.moduletable {
    padding-bottom: 40px;
    background: #f5f5f5;
}
.accordion .module-title h3  {
    color: #930042;
    font-size: 1.5em;
    margin-bottom: 0.45em;
    margin-top: 1.6em;
    background: url(http://imageshack.us/a/img7/4521/hideoy.png) no-repeat right center transparent;
    cursor: pointer;
}
.accordion .module-title h3.show  {
    background: url(http://imageshack.us/a/img818/6398/showw.png) no-repeat right center transparent;
} 
```

这是 HTML 代码：

```
<article class="moduletable accordion" id="module-175">
  <header class="module-title">
    <h3>Categories</h3>
  </header>
  <section class="module-content">
    <div class="custom accordion">
      <ul>
        <li>
        <a href="#">Events</a>
        </li>
        <li>
        <a href="#">Shows</a>
        </li>
      </ul>
    </div>
  </section>
</article>​ 
```

这是 jQuery 代码：

```
$('.accordion .module-title h3').click(function () {
    $(this).toggleClass('show');
    $(this).parent().next('.module-content').slideToggle({duration:500});
}); 
```

​</p>

您可以在此处查看工作示例：http: [//jsfiddle.net/esedic/NQHax/](http://jsfiddle.net/esedic/NQHax/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:11:59.067

你可以使用`toggleClass()`：

```
$('.accordion .module-title h3').click(function () {
    $(this).toggleClass('show');
    $(this).parents(".moduletable").toggleClass("nopadding");
    $(this).parent().next('.module-content').slideToggle({duration:500});
});​

.moduletable.nopadding {
    padding-bottom: 0;
} 
```

[http://jsfiddle.net/NQHax/1/](http://jsfiddle.net/NQHax/1/)

# c# - 如何将没有参数的函数编组为本机代码？

> ID：13008036
> 
> 赞同：0
> 
> 时间：2012-10-22T09:05:46.897
> 
> 标签：c#

我有声明为：

```
 internal delegate bool readDelegate(out byte data); 
```

在某些时候，我想获得一个指向委托实例的函数指针：

```
 readDelegate reader = (out byte data) => 
            {
                Console.WriteLine("Managed output! opening");
                if (stream.CanRead)
                {
                    data = (byte)stream.ReadByte();
                    return true;
                }
                else
                {
                    data = 0;
                    return false;
                }
            }; 
```

如果可以的话，它会从流中读取一个单字节。

但是当我尝试获取函数指针时，如下所示：

```
IntPtr foo = Marshal.GetFunctionPointerForDelegate(reader); 
```

我得到一个例外：

```
System.NotSupportedException was unhandled
  Message="0x80131515"
  StackTrace:
    в System.Runtime.InteropServices.Marshal.GetFunctionPointerForDelegate(Delegate d)
... 
```

是什么原因？我应该如何更改我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:22:20.000

异常的其余信息是什么？应该有错误的解释。

无论如何，我认为这可能有效：

```
internal unsafe delegate bool readDelegate(byte* data); 
```

# c - 将 unsigned short int 初始化为有符号值

> ID：13008039
> 
> 赞同：0
> 
> 时间：2012-10-22T09:06:00.313
> 
> 标签：c, gcc, unsigned-integer, output

```
#include<stdio.h>
int main()
{
unsigned short a=-1;
printf("%d",a);
return 0;
} 
```

1.  **这给了我输出 65535。**为什么？
2.  当我在负侧增加 a 的值时，输出为 (2^16-1=)65535-a。
3.  我知道 unsigned short int 的范围是 0 到 65535。但是为什么在 0 到 65535 的范围内旋转。里面发生了什么？

    ```
    #include<stdio.h>
    int main()
    {
    unsigned int a=-1;
    printf("%d",a);
    return 0;
    } 
    ```

4.  输出为-1。
5.  %d 用于有符号十进制整数，而不是为什么这里不遵循打印其（int）范围的最大值的规则。
6.  **为什么这部分的输出是-1？**
7.  我知道 %u 用于打印无符号十进制整数。

    为什么行为在第二个代码中未定义，而不是在第一个代码中。？

    这是我在 gcc 编译器中编译的。这是一个 C 代码在我的机器上 sizeof short int 是 2 个字节，而 int 的大小是 4 个字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:30:30.827

在您的实现中，short 是 16 位，int 是 32 位。

```
unsigned short a=-1;
printf("%d",a); 
```

首先， -1 转换为`unsigned short`. 这导致值 65535。有关精确定义，请参见标准“整数转换”。总结一下：取值取模`USHORT_MAX+1`。

此值 65535 分配给`a`。

然后对于`printf`使用可变参数的 ，该值被提升回`int`。varargs 从不传递小于 int 的整数类型，它们总是被转换为 int。这将产生值 65535，并打印出来。

```
unsigned int a=-1;
printf("%d",a); 
```

第一行，与之前相同，但取模`UINT_MAX+1`。`a`是 4294967295。

对于 printf，`a`作为`unsigned int`. 由于`%d`需要`int`C 标准未定义行为。但是您的实现似乎已将所有位设置为无符号值 4294967295 重新解释为具有所有位设置的有符号整数，即二进制补码值 -1。这种行为很常见，但不能保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:30:12.833

对变量类型的内存量进行变量分配（例如，short 是 2 个字节，int 是 4 个字节，通常在 32 位硬件中）。变量的符号在赋值中并不重要。这里重要的是您将如何访问它。当您分配给“短”（有符号/无符号）时，您将值分配给“2字节”内存。现在，如果您要在 printf 中使用“%d”，printf 将认为它是“整数”（硬件中的 4 个字节）并且两个 MSB 将为 0，因此您得到 [0|0]（两个 MSB）[- 1]（两个 LSB）。由于新的 MSB（由 printf 中的 %d 引入，迁移），您的符号位隐藏在 LSB 中，因此 printf 认为它是无符号的（由于 MSB 为 0），您会看到正值。要在这方面得到否定，您需要在第一种情况下使用 '%hd'。在第二种情况下，您分配给“4 字节”内存，并且 MSB 在分配期间得到其 SIGN 位“1”（表示负数），因此您在 printf 的“%d”中看到负数。希望它能解释。如需更多说明，请评论答案。

注意：我使用“MSB”作为高阶字节的简写。请根据上下文阅读它（例如，'SIGN bit' 会让你读起来像'Most Significant Bit'）。谢谢。

# dropbox - 本地计算文件的保管箱哈希

> ID：13008040
> 
> 赞同：7
> 
> 时间：2012-10-22T09:06:02.997
> 
> 标签：dropbox, dropbox-api

Dropbox rest api，在 metatada 函数中有一个名为“hash”的参数[https://www.dropbox.com/developers/reference/api#metadata](https://www.dropbox.com/developers/reference/api#metadata)

我可以在本地计算此哈希而不调用任何远程 api 休息函数吗？

我需要知道这个值来减少上传带宽。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T18:09:07.200

元数据调用上的“哈希”参数实际上不是文件的哈希，而是元数据的哈希。其目的是避免在元数据请求期间通过提供元数据而无需重新下载请求中的元数据。它不打算用作文件哈希。

不幸的是，我看不到任何通过 Dropbox API 获取文件本身哈希的方法。我认为减少上传带宽的最佳选择是在本地跟踪文件的哈希值，并在确定是否上传文件时检测它们是否发生了变化。根据您的系统，您可能还希望跟踪元数据请求中返回的“rev”（修订）值，以便您可以判断 Dropbox 本身的版本是否已更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-03T22:42:26.120

[https://www.dropbox.com/developers/reference/content-hash](https://www.dropbox.com/developers/reference/content-hash)解释了 Dropbox 如何计算他们的文件哈希。下面是一个 Python 实现：

```
import hashlib
import math
import os

DROPBOX_HASH_CHUNK_SIZE = 4*1024*1024

def compute_dropbox_hash(filename):
    file_size = os.stat(filename).st_size
    with open(filename, 'rb') as f:
        block_hashes = b''
        while True:
            chunk = f.read(DROPBOX_HASH_CHUNK_SIZE)
            if not chunk:
                break
            block_hashes += hashlib.sha256(chunk).digest()
        return hashlib.sha256(block_hashes).hexdigest() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-04T16:42:29.187

这不会直接回答您的问题，而是更多地作为一种解决方法；dropbox sdk 提供了一个简单的 updown.py 示例，该示例使用文件大小和修改时间来检查文件的流通性。

取自[updown.py](https://github.com/dropbox/dropbox-sdk-python/blob/master/example/updown.py)的缩写示例：

```
dbx = dropbox.Dropbox(api_token)
...
# returns a dictionary of name: FileMetaData
listing = list_folder(dbx, folder, subfolder)
# name is the name of the file
md = listing[name]
# fullname is the path of the local file
mtime = os.path.getmtime(fullname)
mtime_dt = datetime.datetime(*time.gmtime(mtime)[:6])
size = os.path.getsize(fullname)
if (isinstance(md, dropbox.files.FileMetadata) and mtime_dt == md.client_modified and size == md.size):
    print(name, 'is already synced [stats match]') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-03T05:45:51.773

就我而言，不，你不能。唯一的方法是使用[这里](https://www.dropbox.com/developers/reference/content-hash)解释的 Dropbox API 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-27T19:17:31.500

来自[https://rclone.org](https://rclone.org)的 rclone go 程序正是您想要的：

`rclone hashsum dropbox localfile`

`rclone hashsum dropbox localdir`

它不能超过一个路径参数，但我怀疑这是你可以使用的东西......

```
t0|todd@tlaptop/p8 ~/tmp|295$ echo "Hello, World!" > dropbox-hash-demo/hello.txt
t0|todd@tlaptop/p8 ~/tmp|296$ rclone copy dropbox-hash-demo/hello.txt dropbox-ttf:demo
t0|todd@tlaptop/p8 ~/tmp|297$ rclone hashsum dropbox dropbox-hash-demo 
aa4aeabf82d0f32ed81807b2ddbb48e6d3bf58c7598a835651895e5ecb282e77  hello.txt
t0|todd@tlaptop/p8 ~/tmp|298$ rclone hashsum dropbox dropbox-ttf:demo
aa4aeabf82d0f32ed81807b2ddbb48e6d3bf58c7598a835651895e5ecb282e77  hello.txt 
```

# jsf - 使用带有 ActionParam 的枚举

> ID：13008047
> 
> 赞同：0
> 
> 时间：2012-10-22T09:06:13.153
> 
> 标签：jsf, richfaces

我在带有 RichFaces 4.0 的 JSF 2.0 中使用以下代码。我有一个有枚举的托管 bean。现在我想通过 ActionParam 分配枚举的值。我怎样才能做到这一点？这是代码：

```
<a4j:commandLink id="pendingTransactions"
        action="#{tellerBean.getPendingTransactions}" value="Show Pending"
        styleClass="button category-btn">
    <a4j:actionparam name="first" value=""
        assignTo="" />  
</a4j:commandLink> 
```

和我的托管 bean：

```
@ManagedBean
@SessionScoped
public class TellerBean implements Serializable{

    public enum TransactionType {
        PENDING,PROCESSED,ALL
    }

    private static final long serialVersionUID = -321111;
    private String recipientID;
    private String recipientName;
    private String transactionAmount;
    private TransactionType transactionType;

    public String getRecipientID() {
        return recipientID;
    }

    public void setRecipientID(String recipientID) {
        this.recipientID = recipientID;
    }

    public String getRecipientName() {
        return recipientName;
    }

    public void setRecipientName(String recipientName) {
        this.recipientName = recipientName;
    }

    public String getTransactionAmount() {
        return transactionAmount;
    }

    public void setTransactionAmount(String transactionAmount) {
        this.transactionAmount = transactionAmount;
    }

    public void searchTransactions() {}

    public TransactionType getTransactionType() {
        return transactionType;
    }

    public void setTransactionType(TransactionType transactionType) {
        this.transactionType = transactionType;
    }

    public void getTransactions() {}
} 
```

现在我想将`transactionType`变量的值分配给 Enum 值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:05:47.620

我不知道你想对变量做什么或者你想如何显示它，所以这里是一个通用的例子。

首先，JSF 页面必须能够“迭代”枚举以发现可能的值。我以`h:selectOneMenu`使用`f:selectItems`. `f:selectItems`期望 a`List<>`作为输入，因此我们需要在 中创建一个方法`TellerBean`：

```
public List<TransactionType> getTransactionTypes()
{
    List<TransactionTypes> tt = new ArrayList<TransactionType>();
    for (TransactionType t : TransactionType.values())
    {
        tt.add(new TransactionType(t, t.toString()))
    }
    return tt;
} 
```

然后是一个示例 JSF 页面：

```
<h:form>
    <h:selectOneMenu value="#{tellerBean.transactionType}">
        <f:selectItems value="#{tellerBean.transactionTypes}"/>
    </h:selectOneMenu>
    <h:commandButton value="Submit" action="#{tellerBean.someMethod}"/>
</h:form> 
```

JSF 页面应该显示一个包含枚举值的下拉列表。单击标有“提交”的按钮时，它会`someMethod()`在`TellerBean`. 当然这不起作用，因为该方法不存在，但这只是一个示例。;-)

# azure - SQL-Azure 数据库单元

> ID：13008051
> 
> 赞同：1
> 
> 时间：2012-10-22T09:06:24.450
> 
> 标签：azure

有人可以帮助我了解这些数据库单元是如何计算的吗？我有一台带有 5 个数据库的数据库服务器。每天我收取大约 0.06 DU 的费用 - 我如何确定这个数字的来源？

我有一个 MSDN 订阅，每月包含 1 个 DU。不过，这意味着我每月有一个可用的数据库实例。以每天 0.06 DU 的速度计算，我每月将用完 2 DU。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:58:50.307

通过专业或高级 MSDN 订阅，您有权使用 1 个 DU（数据库单元）：

> 此优惠使客户能够以我们的标准即用即付费率每月使用 9.99 美元的网络版数据库。这相当于每月一个**1 GB**网络版数据库或**两个 100 MB网络版数据库。**

那么您的数据库是否大于 1GB？或者您正在使用超过两个 100 MB 的数据库？

[您可以在数据管理](https://www.windowsazure.com/en-us/pricing/details/)下的定价页面上找到更多信息。

# canvas - 带有矢量图形的 SVG 到 CANVAS

> ID：13008052
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:06:26.100
> 
> 标签：canvas, svg, vector-graphics

您好我正在尝试使用[professorcloud](http://www.professorcloud.com/svg-to-canvas/)将svg 徽标转换为HTML 5 画布。

我的问题是画布结果不再像矢量图形图片。

你知道一些能够做到这一点的工具吗？

演示在`http://jsfiddle.net/Txzrw/`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:10:48.280

Canvas 不是矢量设备，它是光栅化器，仅对像素进行操作。如果您想继续对矢量进行操作，则应将它们单独存储并在每次更改源图像时在画布上重新绘制徽标。

# html-lists - Angular.js 过滤预制的 html 元素

> ID：13008054
> 
> 赞同：1
> 
> 时间：2012-10-22T09:06:31.250
> 
> 标签：html-lists, angularjs

前几天我在玩 angular.js，我发现了 angular.js 为我们提供的这个过滤器功能。

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span2">
      <!--Sidebar content-->

      Search: <input ng-model="query">

    </div>
    <div class="span10">
      <!--Body content-->

      <ul class="phones">
        <li ng-repeat="phone in phones | filter:query">
          {{phone.name}}
          <p>{{phone.snippet}}</p>
        </li>
      </ul>

    </div>
  </div>
</div> 
```

我的问题是：**我可以在预制的 html 元素上使用 angular.js 过滤器**，就像这样。

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span2">
      <!--Sidebar content-->

      Search: <input ng-model="query">

    </div>
    <div class="span10">
      <!--Body content-->

      <ul class="phones" ng-filter:query>
        <li>First element</li>
        <li>Second elementy/li>
        <li>Third element</li>
      </ul>

    </div>
  </div>
</div> 
```

谢谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:52:35.713

不，您的第一个示例使用*过滤器*- 称为“过滤器”！*过滤器*可以构成 Angular 绑定表达式的一部分。它放置在管道字符之后，并将“过滤器功能”应用于管道之前的表达式部分。一些过滤器还采用冒号右侧的附加参数。称为“*过滤*器”的过滤器作用于一个数组（管道之前的部分，在本例中是*电话*），通过由冒号右侧的参数确定的检查来传递每个项目。在您的情况下，使用名为查询的字符串变量，它返回一个数组，其中包含来自*手机*的任何项目，这些项目包含查询中的字符串。

*Angular 中过滤器*的其他示例包括货​​币、日期、大写和 orderBy。它们都接受一个输入（例如一个字符串）返回另一个值（例如字符串的大写版本），在某些情况下还有其他配置参数（例如日期或货币格式，或排序依据的字段）。但它们仅适用于“数据模型”中具有某些值的输入，而不是直接适用于 DOM 节点的内容。

您的第二个示例尝试使用名为“ngFilter”的*指令。**指令*是标准 HTML 语法的扩展，可以表示为连字符属性（在本例中）、数据属性（data-ng-filter）、命名空间属性（ng:filter）、css 类等。Angular 的默认值*指令*具有前缀“ng”。但是Angular 中没有像“ngFilter”这样的*指令。*您的示例可以正常加载，但添加此不存在的指令不会对 DOM 处理产生影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:29:37.353

对于这种 DOM 操作/过滤，通常使用Angular 指令[ngSwitch](http://docs.angularjs.org/api/ng.directive%3angSwitch)或[ngShow](http://docs.angularjs.org/api/ng.directive%3angShow) / [ngHide 。](http://docs.angularjs.org/api/ng.directive%3angHide)

```
<ul class="phones" ng-switch on="query">
<li ng-switch-when="Nexus S">First element</li> 
```

上面会寻找一个完全匹配的东西（所以它不如@tosh 的指令好）。ng-switch 通常与选择下拉菜单一起使用，其中可能的值是固定/已知的。

ngShow/ngHide 可能更适合您尝试做的事情。内联表达式或 $scope 函数可用于确定是否显示元素：

```
<li ngShow="some expression using query">First element</li>
<li ngShow="myFilter()">First element</li>

function MyCtrl($scope) {
    $scope.myFilter = function() {
       if($scope.query ...) {  // could use RegExp() here like @tosh
          return true
       }
       return false
    } 
```

以上不需要jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:50:14.257

我不认为这是默认指令的一部分，但这是一项有趣的任务。

我尝试使用自定义指令来实现。 [http://plnkr.co/edit/TOGbtq](http://plnkr.co/edit/TOGbtq)

```
app.directive('ngFilter', function() {
  return {
    link: function(scope, element, attr) {
      scope.$watch(attr.ngFilter, function(q){
        $(element).children().each(function(i,a){
          $(a).toggle((new RegExp(q)).test($(a).text()));
        });
      });
    }
  };
}); 
```

# jquery - 我如何显示弹出/警报然后 RedirectToAction()

> ID：13008056
> 
> 赞同：0
> 
> 时间：2012-10-22T09:06:39.660
> 
> 标签：jquery, asp.net-mvc, c#-4.0, razor

我希望显示一个 Javascript 类型的弹出窗口，以提醒用户他必须在前一个视图中填写一些附加数据，然后才能继续处理此视图，然后将用户实际重定向到该视图。

目前我的代码如下： -

```
 if (viewModel.compData.GG != "")
            CalcGradingPoints();
        else
        {
            Response.Write(@"<script language='javascript'>alert('You have to Select a Grading before doing this calculation');</script>");
            return RedirectToAction("Index", "Grading");
        }

        return View(viewModel); 
```

它重定向正确，但是我看不到错误消息，所以对于用户来说，就像他被卡在第一个视图上并且没有移动一样。

如何显示错误消息，允许用户通过单击消息确认他看到了该消息，然后重定向？

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:14:03.543

您应该使用该`confirm()`功能：[http ://www.javascripter.net/faq/confirm.htm](http://www.javascripter.net/faq/confirm.htm)

用法 ：

```
if (confirm("Your question")) { 
 window.location = "http://www.google.com/" //redirect HERE
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:27:13.510

`RedirectToAction`是 302 HTTP 重定向，您将永远不会看到任何带有`Response.Write`. 我也有相同的场景并使用逻辑单独视图创建，我在其中显示消息然后重定向用户。我的模型包含：标题、消息、控制器、操作等。然后您只需填充视图并使用`@Url.Action`.

元示例：

```
<meta http-equiv="REFRESH" content="0;url=http://www.your-link.com"> 
```

content="0; 可以更改为您希望浏览器在重定向之前等待的秒数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:30:49.003

您可以在 ACTION 方法中发出警报以通知相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:33:08.763

实际上，我认为有一个简单的方法可以做到这一点。我采取了不同的方法并将第一个视图上的所有内容都设置为默认值，这样第二个视图就永远不会是空白的。

谢谢你的帮助

# c - 编译C代码后出错

> ID：13008067
> 
> 赞同：2
> 
> 时间：2012-10-22T09:07:24.527
> 
> 标签：c, compiler-errors

我在编译代码时遇到了这个问题。

```
Error 14 error LNK2019: unresolved external symbol _findFuncs referenced in function _main H:\pshtoolkit_v1.4-src\whosthere\whosthere.obj whoisthere-alt 
```

为了解决错误，我应该将哪些库与 Visual Studio 链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:15:00.780

*我应该与 Visual Studio 链接哪些库*：包含 _findFuncs 的库。

好的，我知道没有帮助，但大概您知道 findFuncs 是什么，并且您调用它是有原因的。你是从哪里知道的？你有任何文件吗？

也许你有一个错误调用这个函数（案例？），例如它应该是 FindFuncs 吗？

还是在某处定义为静态函数？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T07:55:38.190

我已经解决了这个错误，这不是库的问题。包含 fincFuncs 方法的 .c 文件未被正确引用。感谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:11:18.597

实际上是链接器错误，您的编译器无法解析该名称，我认为只需对您在 main 中使用的符号进行前向声明。可能是您已经完成了前向声明但缺少定义本身。您的链接器正在寻找哪个这是您的功能`"findfunc"` 检查它是否有效

# php - 导出到 Excel 正在下降前导零

> ID：13008068
> 
> 赞同：1
> 
> 时间：2012-10-22T09:07:25.260
> 
> 标签：php, mysql, excel

我在网上找到了这段代码，用于将表从 Mysql 导出到 Excel。问题是导出到 excel 的数据缺少前导零。所以我得到的是 90888 而不是数字 090888。除了代码工作正常，所以我想更改这个特定的代码。

如果有人可以提供帮助，我将不胜感激。

编码：

```
header("Content-Type: application/xls");
header("Content-Disposition: attachment; filename=$filename.xls");
header("Pragma: no-cache");
header("Expires: 0");

/*******Start of Formatting for Excel*******/

//define separator (defines columns in excel & tabs in word)

$sep = "\t"; //tabbed character

//start of printing column names as names of MySQL fields

for ($i = 0; $i < mysql_num_fields($result); $i++) {

echo mysql_field_name($result,$i) . "\t";

}

print("\n");

//end of printing column names

//start while loop to get data

    while($row = mysql_fetch_row($result))
    {
        $schema_insert = "";

        for($j=0; $j<mysql_num_fields($result);$j++)

        {

            if(!isset($row[$j]))

                $schema_insert .= "NULL".$sep;

            elseif ($row[$j] != "")

                $schema_insert .= "$row[$j]".$sep;

            else

                $schema_insert .= "".$sep;

        }

        $schema_insert = str_replace($sep."$", "", $schema_insert);

 $schema_insert = preg_replace("/\r\n|\n\r|\n|\r/", " ", $schema_insert);

        $schema_insert .= "\t";

        print(trim($schema_insert));

        print "\n";
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:50:28.467

You can't add the '0' for integer when creating XLS. because the format of the column is integer only in the Excel you have created. so we need to change the format of the column. for this you can use this package [PHPEXCEL](https://github.com/PHPOffice/PHPExcel) for creating Excel.

and also you can refer this post:

[https://stackoverflow.com/a/3269351/1638375](https://stackoverflow.com/a/3269351/1638375)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:52:55.187

使用 PHPEXCEL 后，像这样使用：

```
$objPHPExcel->getActiveSheet()
    ->setCellValueExplicit("$row[$j]", "value" ,PHPExcel_Cell_DataType::TYPE_STRING); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:13:29.120

当您将其打印到 Excel 工作表中时，请在数字前加上单引号。这将**迫使它们被视为文本，而不是数字数据。**

例如， print`'090888`而不是 just `090888`，这将强制它将其视为字符串（但不会`'`在 excel.

另一种方法是调整格式，但我认为在上述情况下这是不可能的。

# ruby-on-rails - ruby on rails 检查数组中是否存在值始终返回 true

> ID：13008069
> 
> 赞同：0
> 
> 时间：2012-10-22T09:07:29.347
> 
> 标签：ruby-on-rails, arrays, include, exists

我正在尝试检查数组中是否存在集合 pset（又名问题集）以显示正确的页面，但以下代码始终返回 true...

```
 def c
    allowed_psets = [1]
    pset_id = 12323

    if allowed_psets.include?(pset_id)
        //do something here
    else
        render_404//error
    end
  end 
```

我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:24:04.350

工作代码：

```
 def c

    allowed_psets = [
        1
    ]

    pset_id = params[:pset_id]

    if allowed_psets.include?(pset_id.to_i)
        #do something here
    else
        render_404#error
    end

  end 
```

# php - rawurldecode 不解码欧元符号

> ID：13008071
> 
> 赞同：1
> 
> 时间：2012-10-22T09:07:35.933
> 
> 标签：php, urldecode, euro

我使用 jQuery 获取 textarea 值并使用 ajax 将其发布到服务器。

我正在使用 escape(textarea.val()) 对 jQuery 中的 URL 进行编码。

在我的 PHP 脚本中，我使用 rawurldecode 将其转换回来。

这适用于我键盘上的每个字符，除了欧元符号 (€)。相反，它返回十六进制代码 (%u20AC)。

我不知道如何解决这个问题，据我所知我所有的字符集设置都是有序的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:09:31.017

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:11:50.293

您的 jQuery 脚本没有根据[RFC3986](http://www.ietf.org/rfc/rfc3986.txt)发送数据。

`%u20AC`不是 URL 编码。

# android - 当viewswitcher的视图改变时如何启动一个动作？

> ID：13008073
> 
> 赞同：1
> 
> 时间：2012-10-22T09:07:36.087
> 
> 标签：android, viewswitcher

我正在使用 View Switcher 来显示 2 个不同的视图。我只想确定切换器正在动态显示哪个视图，并希望相应地启动一些操作。这是代码：

```
private ViewSwitcher switcher;
private GestureDetector gesturedetector = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    switcher = (ViewSwitcher)findViewById(R.id.viewSwitcher);

    gesturedetector = new GestureDetector(this, this);

    if(switcher.getDisplayedChild() == 1)
    {
        DisplayDots(0);
    }
    else
    {
        DisplayDots(1);
    }
}

private void DisplayDots(int paramInt)
{
    Bitmap localBitmap1;
    Bitmap localBitmap2;
    try
    {
        Resources localResources = this.getResources();
        localBitmap1 = BitmapFactory.decodeResource(localResources, R.drawable.whitedot);
        localBitmap2 = BitmapFactory.decodeResource(localResources, R.drawable.graydot);
        if (paramInt == 0)
        {
            ((ImageView)this.findViewById(R.id.home_dotimage1)).setImageBitmap(localBitmap1);
            ((ImageView)this.findViewById(R.id.home_dotimage2)).setImageBitmap(localBitmap2);
            //              ((ImageView)this.findViewById(R.id.home_dotimage3)).setImageBitmap(localBitmap2);
            //              ((ImageView)this.findViewById(R.id.home_dotimage4)).setImageBitmap(localBitmap2);
            //              ((ImageView)this.findViewById(R.id.home_dotimage5)).setImageBitmap(localBitmap2);
            return;
        }
        if (paramInt == 1)
        {
            ((ImageView)this.findViewById(R.id.home_dotimage1)).setImageBitmap(localBitmap2);
            ((ImageView)this.findViewById(R.id.home_dotimage2)).setImageBitmap(localBitmap1);
            //              ((ImageView)this.findViewById(R.id.home_dotimage3)).setImageBitmap(localBitmap2);
            //              ((ImageView)this.findViewById(R.id.home_dotimage4)).setImageBitmap(localBitmap2);
            //              ((ImageView)this.findViewById(R.id.home_dotimage5)).setImageBitmap(localBitmap2);
            return;
        }
    }
    catch (Exception localException)
    {
        localException.printStackTrace();
    }
    catch (Error localError)
    {
        localError.printStackTrace();
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    return gesturedetector.onTouchEvent(event);
}
int SWIPE_MIN_VELOCITY = 100;
int SWIPE_MIN_DISTANCE = 100;

public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,float velocityY) {

    float ev1X = e1.getX();
    float ev2X = e2.getX();

    final float xdistance = Math.abs(ev1X - ev2X);

    final float xvelocity = Math.abs(velocityX);

    if( (xvelocity > SWIPE_MIN_VELOCITY) && (xdistance > SWIPE_MIN_DISTANCE) )
    {
        if(ev1X > ev2X)
        {
            switcher.showNext(); //Error in this part
        }
        else
        {
            switcher.showPrevious(); //Error in this part
        }
    }

    return false;
} 
```

请帮助我。在此先感谢。

# jsp - 试图以war文件格式在我的jsp上显示图像

> ID：13008076
> 
> 赞同：0
> 
> 时间：2012-10-22T09:07:51.187
> 
> 标签：jsp, struts2, jfreechart

我正在制作一个 Web 应用程序，它根据数据库中的日期绘制图形我使用 jfreechart 并将图形保存为图像。并尝试通过指定图像路径在我的 jsp 页面上显示它。

在jsp中我给了这个

```
<img src="C:/Program Files/Apache Software Foundation/Tomcat 7.0/webapps/yeargraph.jpg" class="myimageclass" alt="Graph Cannot be Displayed Due to some internal error"/> 
```

在我的 jfreechart 程序中，我给出

```
String fileName="C:/Program Files/Apache Software Foundation/Tomcat 7.0/webapps/yeargraph.jpg"; 
```

要保存图表，如果我在 Eclipse Indigo 中运行项目，我可以保存图表并将其显示在我的 jsp 文件中，但如果我将其导出到 WAR 文件并将 WAR 文件粘贴到 Tomcat/webapps/文件夹中，然后运行 ​​brwoser "localhost :8080/projetcname/" 我可以看到我的项目工作正常但是如果我尝试绘制图形，它不会在我的 jsp 页面中显示图像是吗，所以我做错了什么，请提前感谢。

注意：基于用户输入，我的应用程序将通过覆盖相同的图像文件生成不同的图形，所以即使这也应该注意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:39:03.363

当您将其部署到生产服务器时，您将遇到各种问题。尝试不同的方法： - 找到一个您知道在生产中将拥有权限的文件夹；- 给 jfreechart 路径“[具有权限的文件夹]/charts_temp_folder/yeargraph.jpg”；- 编写一个小 servlet 来读取文件并提供服务；- 将您的 jsp 指向该文件夹；

让我们知道情况如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:17:20.903

要通过仅搜索文件名来获取绝对文件路径，您可以试试这个

```
 String yeargraph= new ClassPathResource("yeargraph.jpg").getFile().getAbsolutePath(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:12:54.910

我会推荐[Flot](http://www.flotcharts.org/)用于基于 Web 的图表，即使是在我自己的开源 API [XChart 上](http://xeiam.com/xchart.jsp)，它更适合桌面应用程序。[这](http://xeiam.com/helloflot.jsp)是一个 HelloWorld 类型的示例应用程序，其源代码演示了我曾经制作的 Flot。如果您对获取包含图表的 JPEG 更感兴趣，您可以查看[我是如何使用 XChart 进行操作的](http://xeiam.com/xchart_examplecode.jsp)（奖励示例，页面底部），您甚至可以做一些非常相似的事情，`JFreeChart`甚至不需要将 jpeg 保存到先盘。

# api - OpenTok - 如何手动发布/取消发布？

> ID：13008078
> 
> 赞同：8
> 
> 时间：2012-10-22T09:07:53.043
> 
> 标签：api, videochat, video-conferencing, tokbox

我看了这些链接

[http://www.tokbox.com/opentok/api/tools/js/documentation/overview/publish.html](http://www.tokbox.com/opentok/api/tools/js/documentation/overview/publish.html)

[http://www.tokbox.com/opentok/api/tools/js/tutorials/overview](http://www.tokbox.com/opentok/api/tools/js/tutorials/overview)

但它们不是手动发布取消发布的示例，即发布/取消发布而不分别使用 'streamCreated'/'streamDestroyed' 事件处理程序。

我想这样做的原因是我有一个发布/取消发布的按钮，以便用户可以随意进行。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T09:38:59.567

是的，而且非常简单。查看[预发布](http://www.tokbox.com/opentok/api/tools/js/tutorials/prepublish.html)源代码以了解如何操作。有两个函数 startPublishing() 和 stopPublishing() 可以实现这一点。

他们主要`session.publish(publisher);`用于发布和`session.unpublish(publisher);`取消发布。

这是我用来工作的代码：

```
// Called by a button to start publishing to the session
function startPublishing() {
    if (!publisher) {
        var parentDiv = document.getElementById("myCamera");
        var publisherDiv = document.createElement('div'); // Create a div for the publisher to replace
        publisherDiv.setAttribute('id', 'opentok_publisher');
        parentDiv.appendChild(publisherDiv);
        var publisherProps = {
            width : VIDEO_WIDTH,
            height : VIDEO_HEIGHT
        };
        publisher = TB.initPublisher(apiKey, publisherDiv.id, publisherProps); // Pass the replacement div id and properties
        session.publish(publisher);
        show('unpublishLink');
        hide('publishLink');
    }
}

//Called by a button to stop publishing to the session
function stopPublishing() {
    if (publisher) {
        session.unpublish(publisher);
    }
    publisher = null;

    show('publishLink');
    hide('unpublishLink');
} 
```

# java - 新手 Java EE，使用 Jersey SDK 获得 HTTP 404 的 Json Web 服务

> ID：13008079
> 
> 赞同：1
> 
> 时间：2012-10-22T09:07:57.960
> 
> 标签：java, json, jakarta-ee, jersey

刚开始为拼车引擎编写我的 JSON 网络服务。我在尝试编写注册 API 时收到 HTTP 404 错误。

这就是我的问题所在

```
"http://localhost:8081/mCruiseOnCarPool4All/carpool4all/Registration"
HTTP/1.1 405 Method Not Allowed
"http://localhost:8081/mCruiseOnCarPool4All/carpool4all/Registration/Request"
HTTP/1.1 500 Internal Server Error
"http://localhost:8081/mCruiseOnCarPool4All/Registration/Request"
HTTP/1.1 404 Not Found
"http://localhost:8081/mCruiseOnCarPool4All/Registration"
HTTP/1.1 404 Not Found 
```

我知道我在这里错过了一些非常愚蠢的东西。

Web.xml（泽西库）

```
<servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>com.mcruiseon.carpool4all</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/carpool4all/*</url-pattern> 
```

RegistrationService.java，只编写了 Post 方法。我在所有异常上都返回错误，`sessionkey`成功时就可以了。您可以忽略 post 方法中的代码，我只是想分享一下，以便您了解我的错误处理。

```
package com.mcruiseon.carpool4all;

@Path("/Registration")
public class RegistrationService {
    private ClientSession clientSession ;
    private String sessionKey ;
    private SessionManager sessionManager ;

    @Context
    UriInfo uriInfo;
    @Context
    Request request;

    @POST
    @Path ("Request")
    @Consumes({ MediaType.APPLICATION_JSON })
    public Response post(JAXBElement<AMessageStrategy> element) {
            try {
            clientSession = new ClientSession(God.mCruiseOnServer) ;
        } catch (InvalidServerDNSorIPException e) {
            e.printStackTrace();
            return Response.serverError().build() ;
        }
        sessionKey = sessionManager.setClientSession(clientSession) ;
        clientSession.setSessionKey(sessionKey) ;

        clientSession.getSendQueue().sendRequest(element.getValue()) ;
        try {
            clientSession.waitAndGetResponse(element.getValue()) ;
        } catch (WaitedLongEnoughException e) {
            return Response.serverError().build() ;
        } catch (UnableToResolveResponseException e) {
            return Response.serverError().build() ;
        }
    return Response.ok(sessionKey).build();
    }
} 
```

Junit 测试用例（去掉了所有的 HttpConnection 代码）

```
ClientIdentityConcrete clientIdentity = new ClientIdentityConcrete("username", "password", "secretkey") ;
RegistrationRequest register = new RegistrationRequest(clientIdentity);
String jsonStr = mapper.writeValueAsString(clientIdentity);
HttpPost request = new HttpPost("http://localhost:8081/mCruiseOnCarPool4All/Registration/Request"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:22:23.417

相关连接是`/mCruiseOnCarPool4All/carpool4all/Registration/Request` ，它返回 500 错误，因此您的服务器控制台上必须有错误堆栈跟踪。

您显示的其他 URL 命中 404 导致 URL 未指向您的 Jersey servlet，该 servlet 似乎已映射到`/carpool4all`

您的 URL 模式是：

```
 <host>/<app>/<jerseyservlet>/<xml resource>/<method path> 
```

和

```
 - host = localhost:8081/ (obviously)
 - app = mCruiseOnCarPool4All
 - jerseyservlet = carpool4all
 - xml resource = Registration
 - method path = Request 
```

# transactions - 带有 [AutoComplete] 的嵌套组件

> ID：13008080
> 
> 赞同：1
> 
> 时间：2012-10-22T09:08:02.500
> 
> 标签：transactions, com+, servicedcomponent

假设我有两个`ServiceComponent`这样使用的类：

```
using (var outer = new MyComponent1())
{
    string data;
    using (var inner = new MyComponent2())
    {
        data = inner.GetFromQueue();
    }

    outer.Process(data);
} 
```

两者都`MyComponent1`使用`MyComponent2`其`[AutoComplete]`方法的属性。

被处置时会`MyComponent2`提交还是会等待由 开始的事务`MyComponent1`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:25:05.857

`AutoComplete`不需要。只要您让异常向上传播调用堆栈，COM+ 就可以正常工作。

只需确保正确处理所有组件，否则事务将超时。

# html - 替代文字向后显示

> ID：13008086
> 
> 赞同：2
> 
> 时间：2012-10-22T09:08:26.210
> 
> 标签：html, css, right-to-left, alt

我`dir='rtl'`在 body 元素上使用从右到左的语言。

所以整个页面应该从右到左流动。

由于某种原因，图像中的 alt 文本向后显示。

这是一个[jsFiddle](http://jsfiddle.net/danield770/bbzsZ/)。

有什么简单的解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T12:35:30.583

这是 Chromium 中的一个错误，在 2010 年报告为[RTL：禁用图像时从左到右呈现希伯来语替代文本](http://code.google.com/p/chromium/issues/detail?id=47672)，显然没有进展。

`dir`根据规范，完全使用希伯来字母的文本将独立于属性设置从右到左显示。在某些浏览器中，有`dir=rtl`帮助，但不是在这里。出于某种原因，`alt`Chrome 中的文本呈现不像普通文本呈现那样应用方向性信息——毕竟，它可能在内部使用单独的例程。在属性值内使用控制字符作为方向性并没有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T09:24:51.543

在 Firefox 和 IE 中对我来说一切都很好。文本的问题`alt`似乎只存在于谷歌浏览器中。我怀疑这是 Chrome（或 WebKit，因为 Safari 也出现问题）中的某种错误。

您可以尝试在文档上设置字符编码，这应该可以解决问题，显然：

> ## 正确的页面编码
> 
> **症状：**
> 
> 您的页面在 Google Chrome 中看起来是乱码。可能会显示垃圾字符，并且 RTL 语言页面（例如希伯来语或阿拉伯语）可能会出现字母颠倒的情况。
> 
> **问题：**
> 
> 如果没有精确地指定字符编码，不同的浏览器可能会以不同的方式解释编码，或者根本不解释。对用户的影响是可怕的，因为它阻止他们查看该网站。
> 
> **建议：**
> 
> 正确声明页面的内容类型，可以在 HTTP 标头中，也可以在 HTML 中指定的 Meta 标记中。您的页面使用的字符集必须是官方 IANA 列表中的合法值，请仅使用旁边列出的文本（首选 MIME 名称）的编码，例如 ISO-8859-1、Shift_JIS。如果您为 HTTP Header 和 Meta 标签中的字符编码指定两个不同的值，Google Chrome 将使用 HTTP Header 中的值。HTTP Header 和 Meta 标记中的字符编码声明冲突是自找麻烦。可以在此处找到有关此主题的更多信息。我们建议对所有 Web 内容使用 UTF-8。如果您出于某种原因必须使用旧版编码，请确保如上所述正确识别编码。对于涉及希伯来语站点的遗留情况，请使用逻辑希伯来语编码 (ISO-8859-8-I)。我们强烈反对使用视觉希伯来语编码 (ISO-8859-8)。它不再在 Web 上占有一席之地，并且是缺乏用于呈现 RTL 文本的逻辑的旧系统的残余。它会导致许多错误和混乱。

以上摘自 > [http://www.chromium.org/Home/chromecompatfaq](http://www.chromium.org/Home/chromecompatfaq)

# android - Android 操作栏抽屉

> ID：13008088
> 
> 赞同：5
> 
> 时间：2012-10-22T09:08:30.300
> 
> 标签：android

我正在搜索有关此处描述的 Acion Bar Drawers 的一些信息：http: [//developer.android.com/design/patterns/actionbar.html](http://developer.android.com/design/patterns/actionbar.html) （“抽屉：抽屉是一个滑出式菜单，允许用户.. .")

似乎此功能是 Android 的一部分，没有外部库，但我找不到有关如何实现此功能的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:02:47.947

> 但似乎可以在这些 ActionBar Drawers 的帮助下，在没有外部库的情况下轻松做到这一点，

没有内置的小部件可以做到这一点。该站点只是在谈论您可以使用的模式，而不是可用的模式。这里的支持库中提供了最接近内置的一个（这是相当新的）[https://android.googlesource.com/platform/frameworks/support/+/master/v4/java/android/support/v4/小部件/SlidingPaneLayout.java](https://android.googlesource.com/platform/frameworks/support/+/master/v4/java/android/support/v4/widget/SlidingPaneLayout.java)

您的选择是：

1.  使用上面使用的支持库实现。
2.  使用第三方库[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)、[https://github.com/SimonVT/android-menudrawer](https://github.com/SimonVT/android-menudrawer)或[https://github.com/6wunderkinder/android-sliding-layer-lib](https://github.com/6wunderkinder/android-sliding-layer-lib)。
3.  实现你自己的。

# php - MySql 缓慢的数据获取

> ID：13008089
> 
> 赞同：3
> 
> 时间：2012-10-22T09:08:34.043
> 
> 标签：php, mysql, amazon-ec2, high-load

我有一个包含大量行的 MySql 表。我正在做一个简单的请求，它工作得非常快。当请求本身只需要 0.3 秒时，向客户端获取数据的唯一问题是大约 150 秒非常慢。

我在客户端和 Amazon EC2 MySql 实例上使用 php 5.3 + ZendFramework。PHP 代码和 MySql 位于不同的服务器上。

谁能告诉我如何提高数据获取速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:22:58.847

根据您最终提供的正在运行的查询的评论。

`select * from table`

你还说你有“大量的行”。这应该足够简单，您可以理解为什么需要永远传输到查询数据库的框。

而且，仅仅因为您的查询运行速度很快，您仍然必须处理网络限制。另外，假设您实际收到结果后，如果您使用的是 ORM，您可能会发现结果集的水合会增加您的请求的复杂性和时间。

总的来说，你自己回答了这个问题。不要`select * from table`在桌子“巨大”的地方做。

您应该考虑为查询添加[限制](http://dev.mysql.com/doc/refman/5.5/en/select.html)和偏移量，并且只选择您实际需要的行。

此外，“巨大”是非常主观的。对我来说，一张大表大约有 1000 万行。但对于其他人来说，1000 万是非常小的。我什至不想在一张巨大的桌子上加上一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:26:53.353

缓慢是因为您从表中检索所有数据，并且由于您的数据库和网站有两个不同的服务器，所有需要通过网络传输的数据都会引入额外的缓慢。

如果你问为什么在客户端运行会更快，那是因为大多数 sql 客户端会自动增加行数限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:30:12.033

正如所有评论所说：您必须提供更多信息才能获得准确（或至少不那么模糊）的答案。*但是对于您编写的每个*查询，您应该牢记一些经验法则：

*   `SELECT *`尽可能避免，尤其是像`SELECT COUNT(*)`，只选择您感兴趣的那些字段。
*   将数据拆分到巧妙索引的表中并使用`JOIN`. 好的`JOIN`可以提高性能，通常非常显着。
*   使用`EXPLAIN EXTENDED`，避免 MySQL 必须在磁盘上创建临时表的情况
*   使用 时`EXPLAIN`，还要检查隐式`CAST`' 或`COLLATION`转换。与 PHP 不同，an`UNSIGNED INTEGER`与`VARCHAR`. 认为它`$x = 123;`后面`if ($x === '123')`是错误的：一个字符串！==一个int ...
*   避免使用大数据字段（如`MEDIUMTEXT`），因为它们*总是*会导致磁盘访问
*   尽量避免`LIKE`，尤其是在使用通配符 ( `x LIKE 'y%z'`)时
*   请记住：`%`不是唯一的通配符：`_`是单个字符的*小丑*
*   你有一个索引，但你能用更多的索引来做，而不会变得愚蠢吗？不要索引太少，也不要索引太多
*   您是否选择了正确的*存储引擎*？
*   `EXPLAIN`，`EXPLAIN`再`EXPLAIN`一次……
*   如果*必须*使用慢查询，*缓存结果*
*   `LIMIT`*- “巨大”*数据集的结果是必须的。如果您要获取*大量*数据，您将如何处理它们？我无法想象*所有*数据都将作为一个大块发送给客户端的情况，是吗？

# ios - 当 UIWebView 框架改变时，scrollView 也改变了，我怎样才能只改变框架？

> ID：13008090
> 
> 赞同：4
> 
> 时间：2012-10-22T09:08:33.140
> 
> 标签：ios, uiwebview

我有一个关于`UIWebView`xcode 的问题，示例代码如下所示，将其添加到`UIWebView`.

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    webview.frame=CGRectMake(0, 200, 768, 1024);
    [webview.scrollView setContentSize:CGSizeMake(768, 5000)];
    [webview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.baidu.com"]]];
    webview.backgroundColor=[UIColor redColor];
}

- (IBAction)button2pressed:(id)sender {
    webview.frame=CGRectMake(0, 200, 768, 1024);
    NSLog(@"%f,%f",webview.scrollView.contentSize.height,webview.scrollView.contentSize.width);
}

- (IBAction)button1pressed:(id)sender {
    webview.frame=CGRectMake(0, 300, 768, 1024);
    NSLog(@"%f,%f",webview.scrollView.contentSize.height,webview.scrollView.contentSize.width);
} 
```

在我按下后`button1`，`button2`答案是 all `5000,768`。

但是当我将大小更改`(0,300,768,1024)`为`(0,300,768,1044)`然后答案更改为`1024,768`and`1044,768`时，这意味着滚动视图已`contentSize`更改。

谁能告诉我如何在不更改滚动视图大小的情况下更改 webview 的大小？我使用 xcode 4.3.2 和 IOS SDK 5.1。

我发现如果我将大小更改为`(0,300,200,200)`并使用“www.qq.com”，那么答案似乎总是 4218,1000，除非我将矩形大小更改为大于 (4218,1000)。所以我认为webview或者scrollview中存储了一些参数来控制scrollview的最小尺寸。谁知道我正在搜索的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:02:29.933

尝试`viewdidload`在`loadRequest`.

然后在更改框架后执行相同操作，这应该可以回答您的问题。

# c# - C# 中的标记问题

> ID：13008095
> 
> 赞同：0
> 
> 时间：2012-10-22T09:08:50.640
> 
> 标签：c#, asp.net

```
//This code will print the as per the request.
Response.Write("<<<<<<<=======>>>>>>>>>>");

//In this case its not writing as per the request.
Response.Write("<<<<<<<hello======>>>>>>>>>>"); 
```

在这种情况下，它只打印 <<<<<<>>>>>>>>>>>>。意味着它删除了所有文本，关联的所有 = 符号。

这是什么问题？我只写了文字。但没有得到。

有谁知道这个..帮帮我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T09:16:00.720

我相信 <hello 被视为标签。我建议使用

```
Response.Write(HttpUtility.HtmlEncode("<<<<<<<hello======>>>>>>>>>>")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T09:16:51.293

那*不是 html*（或 xml）。/应该转义到`<`/ 。为避免错误等（随着内容的变化），最好使用实用方法：`>``&lt;``&gt;`

```
string s = "<<<<<<<hello======>>>>>>>>>>";
Response.Write(HttpUtility.HtmlEncode(s)); 
```

# cuda - 对齐图像卷积 (OpenCL/CUDA) 内核的 GPU 内存访问

> ID：13008096
> 
> 赞同：12
> 
> 时间：2012-10-22T09:08:58.020
> 
> 标签：cuda, opencl, gpgpu, gpu, memory-alignment

为了了解如何确保满足对齐要求，我多次阅读 Heterogeneous Computing with OpenCL p.no: 157 一书中的以下段落。这显示了如何为图像卷积中的问题添加填充（假设工作组大小为 16 x 16）。

**内存访问对齐**

NVIDIA 和 AMD GPU 的性能都受益于全局内存中的数据对齐。特别是对于 NVIDIA，对齐 128 字节边界上的访问和访问 128 字节段将理想地映射到内存硬件。但是，在此示例中，16 宽工作组将仅访问 64 字节段，因此应对齐数据到 64 字节地址。这意味着每个工作组访问的第一列应该从一个 64 字节对齐的地址开始。在此示例中，选择让边界像素不产生值决定了所有工作组的偏移量将是工作组尺寸的倍数（即，对于 16 x 16 工作组，工作组将开始访问第 N*16 列的数据） . 为确保每个工作组正确对齐，

1-任何人都可以帮助我理解在填充每个工作组访问的第一列之后如何从 64 字节对齐的地址开始（上述段落中提到的要求，对吗？）？

2-同样，该图的陈述是正确的：对于 16 x 16 工作组，工作组将开始访问 N*16 列的数据。

如果正确，如图所示的工作组 1,2 应该开始访问第 1x16 列的数据，与图中所示相反。我完全糊涂了！！:(

**更新：** **我现在很清楚 Q-2。** 实际上图中显示的工作组是 2,1（在 opencl 约定中，第一列），所以它是完全正确的：2x16=32 而不是我想的 1x16。

**但问题没有。1 仍然没有答案。**

![在此处输入图像描述](../Images/ad85b51cd404ea2b53bd8fbfb7021a3d.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T05:09:07.183

对于卷积核，每个区域（例如区域 (0,1) 或区域 (2,1) 等）还必须包括围绕它的数据“光环”，以便当卷积核对数据元素进行操作时在该区域的边缘，它具有该数据元素的一组合适的邻居来计算该数据点处的卷积。这意味着对于左上角具有数据元素 (0,0) 的区域 (0,0)，我需要元素 (-1, 0)、(-2, 0) 等来计算卷积在元素 (0,0) 处。

现在，如果我正常存储图像，因此元素 (0,0) 位于内存位置 0（或其他一些 64 字节对齐地址），那么当我访问该点之前的元素进行卷积时，我将访问我的 64 字节对齐区域之外的数据。因此，我们可以“填充”图像的最左边一列“向左”，即在地址之前的附加数据元素，以便卷积内核拾取所有在 64 字节对齐区域内的值，而我不是跨越 64 字节边界。我们不是在内存位置 0 开始图像存储，而是在内存位置 0 开始光环存储，第一个图像数据元素从位置 0 + 光环宽度开始。这种填充也可以产生对齐其他区域的晕边框的影响，

现在我们还假设图像的宽度不是 2 的幂次方（例如，对于高清图像，宽度为 1920 像素）。如果我们只是将光晕宽度包含在图像右侧的填充中（即在像素行的末尾），然后我们紧随其后开始下一个像素行的光晕区域，我们会也不太可能从下一个像素行（包括光晕）开始有一个正确对齐的区域。因此，我们在每一行的末尾添加了额外的填充（任何卷积操作都不会触及，它只是浪费空间），这样当我们开始下一个像素行的光环区域时，它会从正确对齐的地址开始。

这个讨论和方法（和问题，我相信）实际上只关注确保每个工作组数据访问的*起始地址*是一致的。只要第一个工作组的起始地址对齐（通过适当的填充和调整内存中的图像存储），并且工作组具有适当的尺寸（例如 16 宽，每个工人 4 个字节），那么第一个工作组的起始地址下一个工作组也将对齐。相邻工作组的数据访问之间当然会有重叠，因为相邻工作组的光环区域是重叠的。

我在这里使用的[对齐有一个相当简单的定义。](http://www.geeksforgeeks.org/archives/9705)如果地址的最低有效 n 位全为零，则内存中的地址是 2**n 字节对齐的。因此，一个 64 字节对齐的区域具有一个起始地址，其中 6 个最低有效位全为零。这在这些架构上通常很有用，可以满足架构的内存加载和存储要求，尤其是它们包含的 DRAM 子系统。现代 DRAM 内存库访问总是返回多个字节，因此如果我们在代码中的同一位置同时使用所有这些字节，我们可以[最有效地利用传输。](https://stackoverflow.com/questions/12589416/cuda-coalescing-memory-accesses-and-bus-width)有关对齐的更多报道以及它对数据访问的合并和改进的影响，您可能[对此网络研讨会感兴趣](http://developer.download.nvidia.com/CUDA/training/Optimizing_Mem_limited_kernels.mp4)（和[幻灯片](http://developer.download.nvidia.com/CUDA/training/bandwidthlimitedkernels_webinar.pdf)）来自[nvidia 网络研讨会页面](https://developer.nvidia.com/gpu-computing-webinars)。为了快速浏览，[本演示文稿](http://developer.download.nvidia.com/CUDA/training/NVIDIA_GPU_Computing_Webinars_CUDA_Memory_Optimization.pdf)的幻灯片 26-33涵盖了基本思想。

# bazaar - bzr更新！是否只能更新分支的一部分？

> ID：13008097
> 
> 赞同：0
> 
> 时间：2012-10-22T09:08:58.783
> 
> 标签：bazaar

我在当地有一个分支机构，例如。`~/project`

我只想更新子目录`~/project/subdir1`并忽略`~/project`.

我怎么能那样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:21:40.610

使用 bazaar 的简单更新将更新整个分支，而不仅仅是文件夹。

也许**NestedTreesDesign**可以回答你的问题。

> 2 基本方法
> 
> 包含树的命令应该表现得好像子树是普通目录。子树中的命令不应影响包含的树（除非可能有用户干预）。

[http://wiki.bazaar.canonical.com/NestedTreesDesign](http://wiki.bazaar.canonical.com/NestedTreesDesign)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T19:42:41.777

您可以使用视图（请参阅“bzr 视图”）仅在工作树中检出磁盘上的部分分支。

然而，即使有视图，Bazaar 也会检索树的完整历史记录——即使工作树不需要该历史记录。换句话说，这不会增加 .bzr/ 目录的大小；它通常会减小工作树的大小。

# java - 我的tomcat启动时出现C3P0 APPARENT DEADLOCK

> ID：13008099
> 
> 赞同：6
> 
> 时间：2012-10-22T09:09:24.040
> 
> 标签：java, tomcat, c3p0

当我通过tomcat或resin启动我的项目时，我的项目会抛出错误：APPARENT DEADLOCK

我认为是c3p0导致的错误无法连接我的数据库，我更改了我的xml并用我的数据库的ip替换了域名，然后项目启动了！

我在c3p0工作之前使用了一个监听器，我可以得到正确的域名和ip，我找不到APPARENT DEADLOCK的原因。

```
012-10-22 16:53:04 24344    WARN  [Timer-0] com.mchange.v2.async.ThreadPoolAsynchronousRunner:624 - com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@1e79aa -- APPARENT DEADLOCK!!! Complete Status: 
    Managed Threads: 3
    Active Threads: 3
    Active Tasks: 
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@723a14 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0)
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@14313ff (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1)
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@d5f50d (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2)
    Pending Tasks: 
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@cb560b
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@17e107c
Pool thread stack traces:
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0,5,main]
        java.net.PlainSocketImpl.socketConnect(Native Method)
        java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:05:00.653

听起来您已经找到了原因：您遇到了 DNS 问题，因此尝试按名称查找数据库挂起，而通过 IP 连接到您的数据库很好。您看到的 c3p0 消息表明从数据库获取连接的尝试正在挂起（即，既没有成功也没有失败并出现异常）。最终，那些挂起的 tasak 耗尽了 c3p0 的线程池，您会看到明显的死锁警告。

user1516873 建议的设置 statementCacheNumDeferredCloseThreads 在您看到与 Statement 相关的任务导致死锁时很有用，但对您的情况不太可能有帮助。您正在等待池尝试从数据库获取连接。

您应该做的主要事情是在您的网络应用服务器上调试 DNS 问题。尝试使用 nslookup 或 dig 之类的工具，看看您是否可以按名称查找数据库服务器，以及结果是否及时出现，或者您是否在查找中挂起。根据您的描述，您很可能会在那里发现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:23:41.873

如文档中所述：[http](http://www.mchange.com/projects/c3p0/) ://www.mchange.com/projects/c3p0/ ，**配置语句池部分**

> 如果**statementCacheNumDeferredCloseThreads**大于零，则语句池将延迟物理关闭（）缓存的语句，直到其父连接未被任何客户端使用或池本身在内部（例如在测试中）使用。对于某些 JDBC 驱动程序（尤其是 Oracle），如果父连接正在使用，则尝试关闭语句冻结。此参数默认为 0。如果您观察到与连接关闭任务相关的**“APPARENT DEADLOCKS”** ，请将其设置为正值。几乎总是，该值应该是 1：如果您需要多个专门用于语句销毁的线程，您可能应该将 maxStatements 和/或 maxStatementsPerConnection 设置为更高的值，这样您就不会这么快地处理缓存的语句。

# git - How to short or hide the git repository's absolute path by ssh protocol?

> ID：13008102
> 
> 赞同：2
> 
> 时间：2012-10-22T09:09:34.183
> 
> 标签：git

I am building a git server on Ubuntu.

On the git server, I create a git repository on /opt/var/git/example.git. When a client wants to clone this git repository, he should use the command "git clone ssh://username@host-ip/opt/var/git/example.git"

I wonder if there is any way to short the ssh path and hide the absolute path.

For example, the client could clone "example.git" by "git clone ssh://username@host-ip/example.git".

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:53:59.953

另一种选择是添加一个[授权层](http://sitaramc.github.com/gitolite/auth.html)，比如[**gitolite**](https://github.com/sitaramc/gitolite)，它：

*   将控制谁可以克隆什么
*   始终为 git 存储库使用短地址

    git clone git@host:arepo

（不需要`.git`at then 结束）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:10:38.537

您只需将用户的主目录设置为 git 存储库所在的位置。

或者您可以将 repo 符号链接到用户主目录中`ln -s /path/to/repo ~/reponame.git`

# java - How Get Referer Information In IE

> ID：13008107
> 
> 赞同：1
> 
> 时间：2012-10-22T09:09:53.543
> 
> 标签：java, internet-explorer, http, servlets

How Get Referer Information In IE

request.getHeader("referer") return null in internet explorer??

im using Java Servlet

here is the code:

```
String vReferer="";

if(null != request.getHeader("referer")){
 vReferer = request.getHeader("referer").toString();
}else{
 vReferer = "nothing";
}

response.getWriter().print(vReferer); 
```

Output: nothing

how can i get referer value?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:18:04.150

从[这个网址](https://stackoverflow.com/questions/2648984/httpservletrequest-how-to-obtain-the-referring-url)

但是，您需要意识到**这是一个客户端控制的值**，因此可能会被欺骗为完全不同的东西，甚至被删除。因此，无论它返回什么值，您都不应该将它用于后端的任何关键业务流程，而只能用于表示控制（例如隐藏/显示/更改某些纯布局部分）和/或统计信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:48:57.237

我认为@chrome 是正确的。您的 IE 似乎已配置为秘密保存隐私数据。

试试下面的。曾几何时，我开发了 JSP，它打印所有可以从 servlet API 中提取的 HTTP 信息（包括标头）。这个 JSP 位于我以前工作的公司的网站上。

要使您的引荐来源标题不为空，请转到 google 并搜索“vringo headers.jsp”。单击第一个链接（类似于`vringo.com/Melrose/headers.jsp`. 向下滚动并查看引用标题。首先使用其他浏览器执行此操作，然后使用 IE。如果您看到标题您的浏览器配置正确，那么请尝试在您的测试场景中找到问题。如果它不会出现在浏览器的 IO 检查隐私配置中。

我希望这将有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:11:11.860

[请注意，此变量在许多情况下](https://stackoverflow.com/questions/6880659/in-what-cases-will-http-referer-be-empty)可以为空。

# windows - 带有 xl 数据的 Google 地图选项卡式信息窗口

> ID：13008109
> 
> 赞同：0
> 
> 时间：2012-10-22T09:09:56.740
> 
> 标签：windows, tabbed

我想在我的脚本中添加选项卡式信息窗口，但我不能......它不起作用。请帮我做这件事..

这是我的代码..我不知道我必须把字符串和事件监听器放在哪里工作....

```
 var gmarkers = [];
      var gicons = [];
       map = null;
var infowindow = new google.maps.InfoWindow(
  { 

content: contentString

  });

  var iconImage = new google.maps.MarkerImage('images/intake.png',

      new google.maps.Size(20, 34),
      new google.maps.Point(0,0),
      new google.maps.Point(9, 34));

  var iconShadow = new 
```

google.maps.MarkerImage('http://www.google.com/mapfiles/shadow50.png',

```
 new google.maps.Size(37, 34),
      new google.maps.Point(0,0),
      new google.maps.Point(9, 34));
  var iconShape = {

      coord: [9,0,6,1,4,2,2,4,0,8,0,12,1,14,2,16,5,19,7,23,8,26,9,30,9,34,11,34,11,30,12,26,13,24,14,21,16,18,18,16,20,12,20,8,18,4,16,2,15,1,13,0],
      type: 'poly'
  };

  var contentString = [   //  this my strings

      '<div id="tabs">',
      '<ul>',
        '<li><a href="#tab-1"><span>One</span></a></li>',
        '<li><a href="#tab-2"><span>Two</span></a></li>',
        '<li><a href="#tab-3"><span>Three</span></a></li>',
      '</ul>',
      '<div id="tab-1">',
        '<p>Tab 1</p>',
      '</div>',
      '<div id="tab-2">',
       '<p>Tab 2</p>',
      '</div>',
      '<div id="tab-3">',
        '<p>Tab 3</p>',
      '</div>',
      '</div>'
    ].join('');  

      // A function to create the marker and set up the event window

function createMarker(latlng,name,html,category) {

    var contentString = html;
    var marker = new google.maps.Marker({
        position: latlng,
        icon: gicons[category],
        shadow: iconShadow,
        map: map,
        title: name,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });
        // === Store the category and name info as a marker properties ===
        marker.mycategory = category;                                 
        marker.myname = name;
        gmarkers.push(marker);

  google.maps.event.addListener(infowindow, 'domready', function() {  //this my tab listener
      $("#tabs").tabs();
    });    

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
        });

      // == shows all markers of a particular category, and ensures the checkbox is checked ==
      function show(category) {
        for (var i=0; i<gmarkers.length; i++) {
          if (gmarkers[i].mycategory == category) {
            gmarkers[i].setVisible(true);
          }
        }
        // == check the checkbox ==
        document.getElementById(category+"box").checked = true;
      }
 // == hides all markers of a particular category, and ensures the checkbox is cleared ==
      function hide(category) {
        for (var i=0; i<gmarkers.length; i++) {
          if (gmarkers[i].mycategory == category) {
            gmarkers[i].setVisible(false);
          }
        }
  // == clear the checkbox ==
        document.getElementById(category+"box").checked = false;
        // == close the info window, in case its open on a marker that we just hid
        infowindow.close();
      }
      // == a checkbox has been clicked ==
      function boxclick(box,category) {
        if (box.checked) {
          show(category);
        } else {
          hide(category);
        }
      }
      // == rebuilds the sidebar to match the markers currently displayed ==
  function initialize() {
    var myOptions = {
      zoom: 8,
      center: new google.maps.LatLng(40.0000, 48.0000),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    map = new google.maps.Map(document.getElementById("map"), myOptions);
google.maps.event.addListener(map, 'click', function() {

        infowindow.close();

        });

// Read the data

      downloadUrl("xml/cat.xml", function(doc) {

  var xml = xmlParse(doc);

  var markers = xml.documentElement.getElementsByTagName("marker");
 for (var i = 0; i < markers.length; i++) {
          // obtain the attribues of each marker
          var lat = parseFloat(markers[i].getAttribute("lat"));
          var lng = parseFloat(markers[i].getAttribute("lng"));
          var point = new google.maps.LatLng(lat,lng);
         var address = markers[i].getAttribute("address");
          var name = markers[i].getAttribute("name");
          var html = "<b>"+name+"<\/b><p>"+address;
          var category = markers[i].getAttribute("category");
          // create the marker
          var marker = createMarker(point,name,html,category);
        }
    // == show or hide the categories initially ==
        show("intake");
        hide("reservoir");
        hide("wsps");
        show("wtp");
        hide("wwps");
        hide("wwtp");
        // == create the initial sidebar ==   
      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:36:42.963

您在其定义之前引用 contentString 。地方

```
 var infowindow = new google.maps.InfoWindow({
    content: contentString
}); 
```

后

```
var contentString=.... 
```

# deployment - 部署tomcat 6中的错误

> ID：13008113
> 
> 赞同：0
> 
> 时间：2012-10-22T09:10:13.803
> 
> 标签：deployment, tomcat6, netbeans-7

我正在尝试在 Netbeans 7.1.2 下使用 Struts 2 和 Hibernate 3 部署 Web 应用程序。

我在部署时收到以下错误：

```
Starting of Tomcat failed, the C:\Program Files\NetBeans 7.1.2 startup script is missing.
F:\Projects\CMS2\nbproject\build-impl.xml:794: Deployment error: Starting of Tomcat failed, the C:\Program Files\NetBeans 7.1.2 startup script is missing.
See the server log for details.
BUILD FAILED (total time: 4 seconds) 
```

我已经从 SVN(collabnet) 中检查了它。这可能是什么问题。我已经提到了一些链接，还有谷歌，但到目前为止还没有运气。我已经改变了`tomcat-users`但仍然没有改变。

# java - 在接口类中定义常量以避免意外丢失公共静态最终指令

> ID：13008115
> 
> 赞同：0
> 
> 时间：2012-10-22T09:10:15.837
> 
> 标签：java

虽然我们都知道在接口而不是类中声明常量（出于简洁的原因）是邪恶的，因为它会污染 Java 5 的命名空间并发布 Java 5，但您可以使用静态导入来减少冗长（有效的 Java 条款 17）。但是，我的一位同事指出，在类中定义变量时，开发人员可能会错过将变量声明为 final（public 和 static 可以忽略，因为没有它会是编译错误），而它们隐含地用于接口。有任何支持/反对的论据吗？我想这可能之前已经详细讨论过，因为它看起来很初级，但是我的 google-fu 今天对我没有帮助:)。如果有人可以在这里发表意见或将我指向可能已经讨论过的地方，将不胜感激。

提前致谢！

编辑：这样定义的接口文件不会在其客户端的类层次结构中使用，而是纯粹用于容纳常量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:28:39.213

我不认为在接口中定义常量是邪恶的。如果有的话，在公共类中实现常量接口是邪恶的。然而，这给我们留下了很多其他好的选择

*   您可以扩展接口以添加更多常量
    *   例如，接口定义了众所周知的属性名称。然后，您可以拥有一个添加特定于您的实现的属性的子接口。
    *   常量类通常有一个私有构造函数，这使得子类化变得不可能。
*   并非我实现的所有类都是（公共）API 的一部分。我认为内部类是否实现常量接口实际上并不重要。
*   假设一个方法需要常量作为方法参数： `myXmlProcessor.setProperty(XMLOptions.VALIDATING, true)`
    *   你怎么知道从哪里得到常量？通常，有几个常量类，这会留下使用错误类的风险。
    *   `myXmlProcessor.setProperty(MyXMLProcessor.VALIDATING, true)`: 你*知*​​道这是对的。
*   如果您有一个类层次结构并且基类实现了常量接口，它们会自动可供子类使用。同样，犯错的空间更小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:51:46.910

如果使用后 Java 5 SDK，那么为什么不评估 Enums 而不是使用接口来定义公共静态常量。尽管如此，这种方法并没有错。

# sql - 路由网络功能问题

> ID：13008116
> 
> 赞同：0
> 
> 时间：2012-10-22T09:10:18.237
> 
> 标签：sql, sql-server, postgresql, plpgsql

从[这个问题](https://stackoverflow.com/q/12990638/398670)开始，我在 PL/PgSQL 中成功运行了一些动态 SQL `EXECUTE`，但它似乎没有达到预期的效果。

以下代码是我创建的 plpgsql 函数的一部分。这打算去位于同一轨道上的每个点，并为每个点找到它最近的点，以便最终我将在所有轨道之间创建一个网络。对于某些共振，它无法正常工作。

i 代表当前曲目的编号。

```
 DECLARE
    _r record;
    i int := 0;
    source_geom character varying;
    target_geom character varying;

BEGIN

WHILE i < 3 --DEPENDS ON THE NUMBER OF TRACKS
LOOP

FOR _r IN EXECUTE ' SELECT a.'|| quote_ident(gid_cname) || ' AS id,'
|| ' st_astext( a.'||quote_ident(geo_cname)||') AS source,' 
|| ' st_astext(b.'||quote_ident(geo_cname)||') AS target, ' 
|| ' ST_Distance(a.'||quote_ident(geo_cname) || ' ,  b.'||quote_ident(geo_cname)||') As dist_ft'
|| ' FROM ' || quote_ident (geom_table) ||' AS a INNER JOIN ' || quote_ident(geom_table) || ' As b ON ST_DWithin(a.'||quote_ident(geo_cname)|| ', b.'||quote_ident(geo_cname)|| ',1000)'
|| ' WHERE b.'||quote_ident(gid_cname)|| ' > a.'||quote_ident(gid_cname)|| ' AND b.'||quote_ident(tid_cname)|| ' = '||i|| 'AND a.'||quote_ident(tid_cname)|| ' = '||i|| 
   ' ORDER BY dist_ft '
|| ' Limit 1 '

LOOP

source_geom := _r.source;
target_geom := _r.target;

EXECUTE 'update ' || quote_ident(geom_table) || 
    ' SET source = ''' || source_geom ||''' 
    , target = ''' || target_geom || ''' 
    WHERE ' || quote_ident(gid_cname) || ' =  ' || _r.id;
END LOOP;

i = i + 1;

END LOOP;

RETURN 'OK';
END; 
```

The thing is that I have tested the query in plain sql and it worked brilliantly. Now for some reason in plpgsql it is not working properly. Below you can find the same query in plain sql.

```
SELECT a.ogc_fid AS id, st_astext( a.wkb_geometry) AS source, st_astext(b.wkb_geometry) AS target, ST_Distance(a.wkb_geometry, b.wkb_geometry) As dist_ft
FROM track_points AS a INNER JOIN track_points As b
ON ST_DWithin(a.wkb_geometry , b.wkb_geometry, 1000)
WHERE b.ogc_fid > a.ogc_fid AND b.track_fid = 0 AND a.track_fid = 0 
order by dist_ft 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:04:43.733

而不是`||`，`quote_literal` `quote_ident`尝试使用`format()`and `EXECUTE ... USING`。

看到[这个最近的答案](https://stackoverflow.com/questions/12990638/correctly-inserting-literals-in-pl-pgsql-execute-dynamic-queries/12995424#12995424)。

当它们在普通 SQL 中工作时，在 PL/PgSQL 中查询失败的常见原因是名称与 PL/PgSQL 中声明的变量发生冲突，但这不适用于动态`EXECUTE`查询，因为它们不能引用在 PL/PgSQL 函数中声明的变量。

在这种情况下，我认为您在将其转换为动态查询时更有可能出错。

尝试更换：

```
EXECUTE 'SELECT ...' 
```

和：

```
query_text = 'SELECT ...'
RAISE NOTICE 'About to run: %',query_text;
EXECUTE query_text; 
```

d如前所述`query_text`。_ 查看您生成的查询文本是否*真的*与您手动运行的查询匹配。`DECLARE``text`

 *如果格式更好，调试动态 SQL 会容易得多。尝试更多类似的东西：

```
EXECUTE format(
  $query$
    SELECT a.%1$I AS id,
           st_astext(a.%2$I) AS source,
           st_astext(b.%2$I) AS target,
           ST_Distance(a.%2$I, b.%2$I) AS dist_ft
    FROM %3$I AS a INNER JOIN %3$I As b
      ON ST_DWithin(a.%2$I , b.%2$I, 1000)
    WHERE b.%1$I > a.%1$I 
      AND b.%4$I = 0 AND a.%4$I = 0 
    ORDER BY dist_ft
    LIMIT %5$L
  $query$,
  gid_cname, geo_cname, geom_table, tid_cname, 1
); 
```

不需要`USING`子句，因为没有传递文字参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:41:33.160

我看到了一个非常小的差异： LIMIT 1\. 如果你从动态 SQL 中省略它，那会解决它吗？

亲切的问候，

洛克*

# mod-rewrite - RewriteCond 和 RewriteRule 301 重定向 oscommerce htaccess

> ID：13008124
> 
> 赞同：0
> 
> 时间：2012-10-22T09:10:41.327
> 
> 标签：mod-rewrite

我有重复的网址。

第一个 URL [http://www.mydomain.com/product_info.php/cPath/34_128/products_id/2440](http://www.mydomain.com/product_info.php/cPath/34_128/products_id/2440)

第二个网址[http://www.mydomain.com/product_info.php/products_id/2440](http://www.mydomain.com/product_info.php/products_id/2440)

什么是 .htaccess 条目，以便第一个 url 中的所有 url 将 301 重定向到第二个 url

[http://www.mydomain.com/product_info.php/products_id/2440](http://www.mydomain.com/product_info.php/products_id/2440)

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:48:10.040

您可以尝试使用 mod_alias (Redirect/RedirectMatch) 或 mod_rewrite (RewriteRule)。如果您已经在某处有重写规则，您可能只想坚持使用 mod_rewrite 否则可能会发生冲突。

mod_alias:

```
Redirect 301 /product_info.php/cPath/ /product_info.php/ 
```

mod_rewrite：

```
RewriteEngine On
RewriteRule ^/?product_info.php/cPath/(.*)$ /product_info.php/$1 [L,R=301] 
```

# java - 通过 jnlp WebStart 启动 JavaFx 应用程序 - 不加载 jnlp 描述符中定义的系统本机库

> ID：13008127
> 
> 赞同：0
> 
> 时间：2012-10-22T09:10:55.650
> 
> 标签：java, javafx, jnlp, java-web-start

我正在开发一个使用网络摄像头的 JavaFX 应用程序。为了能够访问相机，我被迫使用 opencv 库和 javacv，它们使用本机 opencv 共享库。现在我希望本地 dll 以某种方式安装在用户机器上，以便 java 可以使用它们。我阅读了 javafx 的整个 ant 任务参考，并找到了一个示例，该示例解释了如何将本机系统库添加到应用程序包以使其工作。我正在使用 netbeans 构建 javafx 应用程序包。这是我如何自定义 netbeans 用于构建应用程序的 build.xml 文件。

```
 <import file="nbproject/build-impl.xml"/>

<target name="-post-jfx-jar" depends="-check-jfx-sdk-version">
   <echo message="Embedding native libraries..."/>
      <fx:jar destfile="${basedir}/build/native-libs-win-x86.jar">
        <fx:fileset dir="${basedir}/natives/windows/x86" includes="*"/>          
      </fx:jar>              
      <fx:jar destfile="${basedir}/build/native-libs-win-x64.jar">
         <fx:fileset dir="${basedir}/natives/windows/x64" includes="*"/>    
      </fx:jar>
   <echo message="Natives embedded..."/>           
</target>
<target name="-post-jfx-deploy" depends="-post-jfx-jar">
   <echo message="deploying ..."/>
     <fx:deploy width="600" height="400"
                outdir="${basedir}/${bundle.outdir}"
                outfile="AppName">
            <fx:info title="AppName"/>
            <fx:application name="${bundle.name}"
                            mainClass="pl.company.project.EntryClass"/>
            <fx:permissions elevated="true"/>
            <fx:resources>

                <fx:fileset dir="dist" includes="*.jar"/>
                <fx:fileset dir="dist/lib" includes="*.jar"/>

                <fx:fileset dir="build" type="native"
                            os="windows" arch="x86"
                            includes="native-libs-win-x86.jar"/>

                <fx:fileset dir="build" type="native"
                            os="windows" arch="x64"
                            includes="native-libs-win-x64.jar"/>

            </fx:resources>
     </fx:deploy>       
</target> 
```

现在，当我在 netbeans 中执行 clean 并构建时，我得到了一个包含一组 jar 的文件夹，这些 jar 是我的项目依赖 jar、一个 jnlp、html、可执行 jar，以及两个嵌入了 dll 库的 jar。一个 jar 是 native-libs-win-x64.jar，第二个是 native-libs-win-x86.jar。本机库位于顶层 - 因此在每个 jar 中，我们都有一组 dll 和 META-INF 文件夹，其中清单包含：Manifest-Version: 1.0, Created-By: JavaFX Packager, Main-Class: null

Jnlp 文件还包含以下条目：

```
 <resources os="windows" arch="x86">    <nativelib href="native-libs-win-x86.jar"/></resources> 
```

和

现在，当我启动 jnlp 时，未加载本机库，引发 UnsatisfiedLinkError。但是，当我将带有 dll 的 jar 解压到可执行 jar、依赖项和 jnlp 所在的文件夹中时，一切都像一个魅力。所以我的问题是..我错过了什么？我已经完成了 JavaFX 文档页面上的 ant 任务指南中显示的所有操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:25:31.660

具体来说，并遵循stackoverflow的规则，我将详细说明我如何设法解决我的问题：

Java 可以轻松加载 jnlp 描述符中指定的本机库，但我们必须：

**1) 在资源**元素中提供正确的**arch**属性值- 请注意，此值取自系统变量 os.arch，它并不总是在 64 位架构上为 x64 或在 32 位上为 x86。就我而言，我必须提供 amd64 值。

 **2) You jar file pointed by href attribute has to contain all native libraries, and all of them have to be in the top level of jar file.

3) Also os attribute starts with upper case - for me it doesnt work if I provide is="windows" it must be os="Windows"**

# c++ - 如何将关闭按钮工具提示的文本从“关闭”更改为其他 MFC 对话框 - C++

> ID：13008131
> 
> 赞同：1
> 
> 时间：2012-10-22T09:11:08.337
> 
> 标签：c++

> **可能重复：**
> [覆盖标题栏按钮的工具提示文本（关闭、最大化、最小化、帮助）](https://stackoverflow.com/questions/2548987/override-tooltip-text-for-titlebar-buttons-close-maximize-minimize-help)

在 Windows 窗体中，我们在右上角有三个按钮，例如 min、max、close。

默认情况下，关闭按钮的工具提示为“关闭”。我需要将此文本更改为“隐藏”。

似乎并不容易。请问你能帮帮我吗？

# asp.net - cmd.ExecuteNonQuery 后整数值从 0 变为 -1

> ID：13008133
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:11:15.403
> 
> 标签：asp.net

我在数据库中动态创建一个表。用户根据需要输入他们的姓名并使用`RadioButton`. 问题是执行后`cmd.ExecuteNonQuery`的值`i`变为`-1`from `0`。这表明无法创建表，但是当我转到数据库时，它已成功创建。请让我知道我哪里出错了？

```
protected void btnpaper_Click(object sender, EventArgs e)
    {
        try
        {                
                string conn = ConfigurationManager.ConnectionStrings["sqlconn"].ConnectionString;
                SqlConnection con = new SqlConnection(conn);
                con.Open();
                char[] arr = new char[] {'n','g','l','i','s','h'};
                string str = "CREATE TABLE " + Label1.Text.Trim() + 
                             txtpaperset.Text.Trim()+ rbtnEng.Text.TrimEnd(arr) +
                             "(" + "quesNo int NOT NULL PRIMARY KEY, " + 
                             "question varchar(1000) NOT NULL," + 
                             "ansA varchar(500) NOT NULL, " + 
                             "ansB varchar(500) NOT NULL, " + 
                             "ansC varchar(500) NOT NULL, " + 
                             "ansD varchar(500) NOT NULL, " + 
                             "rightAns varchar(50) NOT NULL " + ")";                    
                SqlCommand cmd = new SqlCommand(str, con);
                int i = cmd.ExecuteNonQuery();
                if (i > 0)
                {
                    lblerrormsg.Visible = true;
                    con.Close();
                }
                else
                {
                    lblerrormsg.Text = "Table Not Created Please Try with Different Name!";                        
                    con.Close();
                }                

        }
        catch (System.Exception excep)
        {
            MessageBox.Show(excep.Message);
        }      
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:31:32.073

您的代码没有任何问题，一切都是正确的。请检查此[链接](https://stackoverflow.com/questions/11619919/cmd-executenonquery-value-of-i-integer-is-going-1-from-0)，

**

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。

**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T09:21:13.433

用这个

SqlCommand cmd = new SqlCommand(str, con); cmd.CommandType = CommandType.Text;

# java - 带有 mousemotionlistener 的 JTree

> ID：13008138
> 
> 赞同：2
> 
> 时间：2012-10-22T09:11:42.513
> 
> 标签：java, swing, tooltip, jtree, mouse-listeners

我有一个`JTree`，当他将鼠标悬停在树节点上时，我想向用户显示一些描述。

我从文档中读到我们可以使用`MouseMotionListener`它。但是我怎样才能得到鼠标移动到的节点的值呢？

任何指针都会非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:10:34.207

`MouseEvent`从中获取节点值的一种方法是获取`TreePath`鼠标的 x,y 位置的 a 并从此路径获取最后一个路径组件。

这可能看起来像这样：

```
import javax.swing.tree.TreePath;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import javax.swing.JTree;
...

final JTree tree = new ...
tree.addMouseMotionListener(new MouseMotionListener() {

        @Override
        public void mouseMoved(MouseEvent e)
        {
            TreePath path = tree.getPathForLocation(e.getX(), e.getY());
            if(path == null || path.getLastPathComponent() == null)
            {
                return;
            }

            Object nodeHoveredOver = path.getLastPathComponent();
            System.out.println(path.getLastPathComponent());
        }

        @Override
        public void mouseDragged(MouseEvent e)
        {
            ...                
        }
}); 
```

但是，如果您想将您的描述显示为工具提示，那么[此解决方案](https://stackoverflow.com/questions/272124/best-way-to-implement-tooltips-for-jtree)可能更适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:40:10.783

看一下`JTree#getTooltipText`实现：

```
public String getToolTipText(MouseEvent event) {
    String tip = null;

    if(event != null) {
        Point p = event.getPoint();
        int selRow = getRowForLocation(p.x, p.y);
        TreeCellRenderer       r = getCellRenderer();

        if(selRow != -1 && r != null) {
            TreePath     path = getPathForRow(selRow);
            Object       lastPath = path.getLastPathComponent();
            Component    rComponent = r.getTreeCellRendererComponent
                (this, lastPath, isRowSelected(selRow),
                 isExpanded(selRow), getModel().isLeaf(lastPath), selRow,
                 true);

            if(rComponent instanceof JComponent) {
                //...

                tip = ((JComponent)rComponent).getToolTipText(newEvent);
            }
        }
    }
    // No tip from the renderer get our own tip
    if (tip == null) {
        tip = getToolTipText();
}
    return tip;
} 
```

因此，渲染器指定的工具提示文本受到尊重。

# joomla - 创建自定义用户配置文件 Joomla 2.5

> ID：13008139
> 
> 赞同：0
> 
> 时间：2012-10-22T09:11:44.233
> 
> 标签：joomla, field, profile

我创建了一些自定义用户配置文件字段，我只是创建了一个编辑用户配置文件插件（在 profile.xml 等中添加字段）。现在，当我创建或编辑用户时，我有经典的个人资料字段（城市、地址等）和我自己的字段。我创建了显示所有字段的用户个人资料页面，但我想编辑此页面。我想只显示我的字段或添加一些 css 类等。

我该如何编辑它？我在哪里可以找到它？

以另一种方式，我创建另一个页面，使用 php 插件我可以添加一些代码。如何访问我的自定义字段？我尝试使用 [http://docs.joomla.org/Accessing_the_current_user_object](http://docs.joomla.org/Accessing_the_current_user_object) 但我只能访问默认字段。

有谁知道如何访问这些变量？

ps 这是我在我的文章中用 php 写的：

```
    $user =& JFactory::getUser();

    $userId = $user->id;

    $db = &JFactory::getDbo();
        $db->setQuery(
            'SELECT * FROM phs_user_profiles WHERE user_id = '.$userId.' AND profile_key LIKE \'myfilevalue1.%\''
        );
    $results = $db->loadAssocList();
    if($results) echo $results[0]['profile_value'];
    否则回显“不工作”；

```

它显示“不工作”:(

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:05:06.247

首先，您错误地指定了数据库表。`#__`例如，您需要使用 定义前缀`#__content`。

您还应该更改以下代码：

```
if($results) echo $results[0]['profile_value'];
else echo "dont work"; 
```

对此：

```
if($results) { 
   echo $results[0]['profile_value'];
}
else { 
   echo "dont work";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:35:41.907

您需要编辑 com_users 视图（配置文件）的简单方法，在配置文件视图中，您可以通过以下方式访问用户：-

```
$user =& JFactory::getUser();

 //firstly check you got this.  
echo  $userId = $user->id;
// then you can access all fields using userid.
    $db = &JFactory::getDbo();
    $query = "SELECT * FROM phs_user_profiles WHERE user_id = ".$userId;
        $db->setQuery($query);
    $results = $db->loadAssocList();
// print result using print_r($results); if you get
    if($results) echo $results[0]['profile_value'];
    else echo "dont work"; 
```

还要检查链接[http://docs.joomla.org/Accessing_the_database_using_JDatabase](http://docs.joomla.org/Accessing_the_database_using_JDatabase)

# ruby - 如果相邻为空，ruby 如何选择相邻数组值

> ID：13008140
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:11:44.270
> 
> 标签：ruby

我试图弄清楚如何选择一个数组值，如果它与填充的数组值相邻并且为空。

因此，假设数组引用的网格是这样布置的。

```
 a1,a2,a3,
 b1,b2,b3,
 c1,c2,c3 
```

如果 a1 持有 X，则网格现在看起来像这样。

```
 X,a2,a3,
 b1,b2,b3,
 c1,c2,c3 
```

我希望该方法能够找到相邻的数组值，在本例中为 a2、b1 和 b2。

但是在下一个 O 保持中心值的情况下。

```
 X,a2,a3,
 b1,O,b3,
 c1,c2,c3 
```

...该方法将选择 a2, b1

任何人都可以提供解决方案或提示吗？

这是一个简单的井字游戏网格

这是网格所在的类。

```
class Board
attr_reader :grid

def initialize(cell_value = " ")
  @grid = {
    a1: cell_value, a2: cell_value, a3: cell_value,
    b1: cell_value, b2: cell_value, b3: cell_value,
    c1: cell_value, c2: cell_value, c3: cell_value
  }
end

def printgrid
  board = "\n"
  board << "a #{@grid[:a1]}|#{@grid[:a2]}|#{@grid[:a3]} \n"
  board << "----------\n"
  board << "b #{@grid[:b1]}|#{@grid[:b2]}|#{@grid[:b3]} \n"
  board << "----------\n"
  board << "c #{@grid[:c1]}|#{@grid[:c2]}|#{@grid[:c3]} \n"
  board << "----------\n"
  board << "  1 2 3\n"
end

def space_taken?(cell_location)
  cell_value = cell_location
  @grid[cell_value] != " "
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:20:47.303

您可以实现一种方法来确定一个单元格是否在一个`X`：

```
def next_to_x?(cell_location)
  case cell_location
  when :a1
    @grid[:a2] == 'X' or @grid[:b1] == 'X' or @grid[:b2] == 'X'
  when :a2
    @grid[:a1] == 'X' or @grid[:a3] == 'X' or @grid[:b1] == 'X' or @grid[:b2] == 'X' or @grid[:b3] == 'X'
  # ...
  end
end 
```

然后，查找所有空且位于 旁边的单元格`X`：

```
[:a1, :a2, :a3, :b1, :b2, :b3, :c1, :c2, :c3].find_all { |cell_location|
  !space_taken(cell_location) and next_to_x?(cell_location)
} 
```

# python - 将文档字符串转换为 xml 格式

> ID：13008143
> 
> 赞同：-3
> 
> 时间：2012-10-22T09:11:51.250
> 
> 标签：python, xml, docstring

我需要将文档字符串转换为 XML 数据，并将此 XML 数据附加到现有 XML 文件的开头。

要转换为 XML 的数据如下所示：

```
"""
Sample Description:
Sample author: abc
sample version: x.1
multiple lines like this
""" 
```

`string = __doc__`给了我 doc 字符串，但是如何进一步进行，转换为 XML 并附加到已经存在的 XML 文件的开头？

XML 文件应如下所示：

```
<sample-description
    sample-author="abc"
    sample-version="x.1">
    multiple-lines
</sample-description> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:08:22.460

你需要把问题分解成几个步骤——要解决的小问题会让你更接近你的目标：

1.  枚举字符串中的每一行；
2.  将每一行拆分为 (name, value) 对；
3.  如果该值为空，则创建一个名称为 nodeName 的 XML 元素并将其存储以供以后使用；
4.  否则，添加具有指定名称和值的属性。

您可以使用 minidom 在 XML 文件中创建元素和属性。

要将名称转换为 XML 可以使用的形式，您需要：

1.  用“-”字符替换空格；
2.  将字符串转换为小写。

使用 Google 搜索和 Python 文档获取有关如何执行这些步骤的示例。

此外，在每个点添加打印语句将帮助您验证您是否正确实施了该步骤。

# forms - Wicket 表单提交数据丢失

> ID：13008144
> 
> 赞同：1
> 
> 时间：2012-10-22T09:11:58.007
> 
> 标签：forms, validation, wicket

我们的登录页面有一个问题，它有一个使用 post 方法的表单，问题是有时 post 参数到服务器时为空，但它们不为空。表单验证器的行为就像未输入参数一样。我把我的表单代码放在下面。你有什么想法或直觉吗？

```
protected class LoginForm extends OurForm {

    private static final long serialVersionUID = -5813819309808445973L;

    public LoginForm(String id) {
        super(id);

        setDefaultModel(new CompoundPropertyModel<Map<Object , Object>>(iMap));
        TextField<String> userId=new TextField<String>("USERCODE" , String.class);
        userId.setOutputMarkupId(true);
        userId.setRequired(true);
        add(userId);

        PasswordTextField password = new PasswordTextField("USERPASSWORD");
        password.setOutputMarkupId(true);
        password.setRequired(true);
        add(password);

        add(new SubmitLink("SUBMIT"));
    } 
```

wicket 生成的 html 表单代码：

```
<form autocomplete="off" id="id2" method="post" action=";jsessionid=989511050F24C577A23CF7CC55BC9757.salacakEUPT?x=UYCQLoTt3sXylAFd5u7DPGpiOKN9Mx4oErlMwLtbLndItHXg9LDIrg"><div style="width:0px;height:0px;position:absolute;left:-100px;top:-100px;overflow:hidden"><input type="hidden" name="id2_hf_0" id="id2_hf_0" /></div>
<table width="100%">
<tr><td colspan="3"><h2>&nbsp; </h2></td></tr>
<tr><td width="10%">&nbsp;</td>
<td width="80%">
<table width="100%">
<tr><td colspan="2" height="100">&nbsp;</td></tr>
<tr>
<td align="right" width="50%"><label class="label" >Kullanıcı Kodu</label></td>
<td align="left" width="50%"><input type="text" value="" name="USERCODE" id="id3"/></td>
</tr>
<tr>
<td align="right"><label class="label" >Şifre</label></td>
<td align="left" ><input type="password" value="" name="USERPASSWORD" id="id4"/></td>
</tr>
<tr><td colspan="2" height="20">&nbsp;</td></tr>
<tr><td colspan="2" align="center"><input type="submit" id="id5" onclick="var wcall=euptWicketSubmitFormById('id2', ';jsessionid=989511050F24C577A23CF7CC55BC9757.salacakEUPT?x=UYCQLoTt3sXylAFd5u7DPIvNsZm6zLH4Nn8IO6OcpRl09M**bsF1rsqDb-hhJWazVdFfqhn-IWmQiM30HCroAnex3YAslQLnMwTnZBT5fO6Cuav6A95RGA', 'SUBMIT' ,function() { }.bind(this),function() { }.bind(this), function() {return Wicket.$$(this)&amp;&amp;Wicket.$$('id2')}.bind(this));;; return false;" submitlink="true" value="Giriş"/></td></tr>
<tr><td colspan="2" height="100">&nbsp;</td></tr>
</table>
</td>
<td width="10%"></td></tr></table>
</form> 
```

**注意：有时并非每次都会出现此问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:19:04.147

属于表单的模型在哪里？我的意思是在 Wicket 中你基本上总是使用模型，你永远不会访问原始的 Post 数据。在您的示例表单中，根本没有定义模型。这很奇怪。我建议使用模型。

例如，这是我们的 SignInForm：http: [//svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/web/pages/auth/](http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/web/pages/auth/)

它使用 PropertyModel 分配参数。

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:09:24.753

FWIK，在调用表单的方法之前，不会处理表单组件`onSubmit()`。在这一步，我通常会通过以下方式调用一些东西来保存我的数据：

```
 @Override
    protected void onSubmit() {
        Item item = (Item) getModelObject();
        dao.storeItem(item);
        setResponsePage(page);
    } 
```

我不熟悉`SubmitLink("id")`，所以我不能告诉你为什么这不起作用。只要您的 OurForm 类具有与 org.apache.wicket.markup.html.form.Form 相同的行为，上述方法就应该有效。`onSubmit()`在调用该方法之前，您的验证也不应检查组件输入。此外，seba 是正确的，您应该在 TextField 的构造函数中使用 Model 或 PropertyModel。

# iphone - 如何更高效地使用 UIPickerView？

> ID：13008147
> 
> 赞同：3
> 
> 时间：2012-10-22T09:12:01.220
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uipickerview

我在我的一个视图中使用 UIPickerView，在同一个视图中，我必须在 5 个以上的地方使用 UIPickerView。我所做的是，为 UIPickerView 创建了一个插座并在所有位置重复使用相同的插座......例如......

```
audio_cap_picker = nil;
// Creat picker view.
if (audio_cap_picker == nil) {
    audio_cap_picker = [[UIPickerView alloc] init];
    audio_cap_picker.delegate = self;
    audio_cap_picker.showsSelectionIndicator = YES;
    [self.view addSubview:audio_cap_picker];
} 
```

像上面一样，当单击按钮及其行标题时，我一直在创建选择器视图，相关信息是根据单击的按钮设置的，它工作正常。但是，问题是当我单击一个按钮时，因为我每次都在创建新的，它没有突出显示当前选定的行，而是将第一行显示为突出显示，所以我被迫为每个 UIPickerView 使用单独的插座。

有什么办法可以避免为 UIPickerView 创建不同的插座。或者这是唯一的方法？哪个更有效率？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:46:09.343

例如，当用户选择第 5 行时，您存储一个值，对吗？当您下次显示选择器时，您可以像这样移动它的选择：

```
int index = [valuessForFirstPicker indexOfObject:storeValueForFirstPicker];
[picker selectRow:index inComponent:0 animated:TRUE]; 
```

希望这有帮助。

干杯!

# jquery - 在 JavaScript/jQuery 中检测损坏的 CSS“背景图像”

> ID：13008150
> 
> 赞同：6
> 
> 时间：2012-10-22T09:12:13.147
> 
> 标签：jquery, image, detect, brokenimage

这是检测损坏图像的示例
[http://maisonbisson.com/blog/post/12150/detecting-broken-images-in-javascript/](http://maisonbisson.com/blog/post/12150/detecting-broken-images-in-javascript/)

但是是否可以检测到损坏的背景图像？
例如：

```
<div style="background-image:url('http://myimage.de/image.png');"></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:32:12.167

我认为您不需要 jQuery 或 javascript 来告诉您链接是否损坏。在 Firefox 中使用 Firebug，它将解决您的大部分问题：

[https://addons.mozilla.org/en-us/firefox/addon/firebug/](https://addons.mozilla.org/en-us/firefox/addon/firebug/)

**编辑：** 既然我知道它是用于自动修复，我很快就看了一下并想出了这个：

```
var imageURLs = $('div');
imageURLs.each(function(index, element){
    var imageURL = $(element).css('background-image').replace('url("', '').replace('")', '');
    if (imageURL != "none"){
        $.ajax({
           url: imageURL,
           type: 'HEAD',
           error: function(){
              //error handling for broken image url
           }
        });
    }
}); 
```

加载后将其添加到您的页面，它将扫描所有 div 元素以查找任何损坏的 css 背景图像。可能有更好或更快的方法来做到这一点，但这是一般的想法。

**编辑 2：**当我测试脚本时，我注意到 .css('background-image') 返回一个字符串，其中包含图像 url 的 "url()"。这导致所有 url 上的 ajax 调用失败。我更改了它并仅对具有 css 背景的元素执行 ajax 调用。上面的代码现在可以完美运行了！:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:39:55.460

您是否可以控制服务器上的“404 not found”页面？在这种情况下，您可以将其指向在请求的 URL 中查找 .jpg/.png/.gif 并相应记录的脚本，然后将 404 页面输出给用户。

# perl - Perl 中的许多文件和递归搜索

> ID：13008153
> 
> 赞同：0
> 
> 时间：2012-10-22T09:12:34.190
> 
> 标签：perl

我在目录结构中搜索文件时遇到了一点问题。例如，我有一个目录“页面”。在它里面我有两个目录：“a”和“b”。两个目录都包含文件：a.html 和 b.html。如何在 Perl 递归程序中编写找到这些文件，例如，将它们写入屏幕？

在更具体的。我不知道如何编写文件的“通用”路径。例如：

```
open (FILE, "page/ (find a and b) / find (a.html and b.html)" ) or die "Can't open!"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:25:10.573

您可以使用`glob`来查找文件：

```
for my $filename (glob 'page/{a,b}/{a,b}.html') {
    open my $FH, '<', $filename or die "Cannot open $filename: $!";
    # Process the file here.
} 
```

另请参阅[文件::查找](http://p3rl.org/File%3a%3aFind)。

# java - 使 JTable 只显示添加的行

> ID：13008155
> 
> 赞同：0
> 
> 时间：2012-10-22T09:12:38.397
> 
> 标签：java, mysql, swing, jdbc

现在我有一个使用 JDBC 访问 SQL 数据库的 AbstractTableModel 的 JTable。我这样做

```
stmt.executeUpdate(someStr);
fireTableRowsInserted(rowCount,rowCount+1); 
```

这显然在 JTable 上添加了行。但是，我希望 JTable 只显示添加的行。

我想也许创建一个只包含添加行的结果集，但我无法得到它，因为我没有增量 id 字段。

还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:20:44.697

1.  不要重新发明轮子，搜索`ResultsetTableModel`，`TableFromDatabase`（所有事件都打开`EDT`并`Swing GUI`等待/冻结直到所有事件结束，基于`AbstractTableModel`）

2.  重新发明轮子，

    a) 使用`Runnable#Thread()`或`SwingWorker`( `publish()`, `progress()`) 表示`JDBC`

    b）创建一个适当的`AbstractTableModel`，有覆盖适当的通知，

    c) 在模型中使用通知器，`"fireTableRowsInserted(rowCount,rowCount+1);"`

    `Swing GUI`d) , `JTable`,的所有更新`XxxTableModel`必须在`EDT`

3.  如果有要求严格覆盖其中的方法`AbstractTableModel`，则寻找正确的`AbstractTableModel`，否则使用`DefaultTableModel`和调用 from `Runnable#Thread()`or `SwingWorker`only `myModel.addRow()`，仅此而已

4.  为了获得更好的帮助，请尽快发布将数据硬编码到[instread](http://sscce.org/)`Array`中的 SSCCE`JDBC Connections`

# matlab - 我们可以在我们的matlab程序中使用“点”吗？

> ID：13008156
> 
> 赞同：0
> 
> 时间：2012-10-22T09:12:38.193
> 
> 标签：matlab

我想问一下是否有实现一个可以生成带有点分隔符“。”的ID的程序。例如：

```
a1.b2.c3 
```

请注意，我不想将 dot 当作一个字符来处理，它应该像一个分隔符。

如果你在你的名字和你父亲的名字和你祖父的名字之间加一个点也是一样的，比如：

```
John.Paul.Hit 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T10:26:04.733

正如所指出的，您已经可以这样做了。但是，您应该认识到它的效率会降低

```
A = 3;
B.C.D.E = 3;

whos A B
  Name      Size            Bytes  Class     Attributes

  A         1x1                 8  double              
  B         1x1               536  struct 
```

看到 B 比 A 占用了更多的存储空间。

此外，您需要认识到 AB 和 AC 不是 MATLAB 中的不同对象，而是同一个结构 A 的一部分。事实上，如果我现在尝试创建 AB，它会感到不安，因为 A 已经作为双精度存在。

```
A.B = 4
Warning: Struct field assignment overwrites a value with class "double". See MATLAB R14SP2 Release Notes, Assigning Nonstructure Variables As Structures
Displays Warning, for details. 
A = 
    B: 4 
```

原来的变量 A 不再存在。

还有时间问题。该结构的效率会降低。

```
timeit(@() A+2)
Warning: The measured time for F may be inaccurate because it is close to the estimated time-measurement overhead (3.8e-07 seconds).  Try measuring
something that takes longer. 

> In timeit at 132 
ans =
    9.821e-07

timeit(@() B.C.D+2)
ans =
   3.6342e-05 
```

看到将 2 添加到 A 是如此之快，以至于 timeit 无法测量它。但是在 BCD 上加 2 需要大约 30 倍的时间。

所以，最后，你可以用结构做你想做的事，但有充分的理由不这样做，除非你对点有非常有效的需求。在我展示的方面，备用分隔符效果更好。

```
A = 3;
A_B_C_D = 3;
whos A*
  Name         Size            Bytes  Class     Attributes

  A            1x1                 8  double              
  A_B_C_D      1x1                 8  double 
```

使用这些变量中的任何一个，计算都将同样快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:24:41.013

Matlab 已经在 ids 中使用点作为分隔符，特别是在结构及其字段的 ids 中。例如，执行

```
a.b = 3 
```

创建一个名为的结构体，其中包含一个名为`a`的字段，该字段`b`本身具有 value `3`。阅读有关 的主题`structures`和功能的文档`struct`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:47:12.030

不是你想要的方式。正如上面的答案所指出的，点在 ML 语法中具有特殊含义，不能用作标识符本身的一部分。

# javascript - Javascript - 需要识别包含更多而不是仅包含 2 个括号符号 () 的字符串

> ID：13008158
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:12:45.323
> 
> 标签：javascript, jquery, regex

我正在寻找一个特定的正则表达式，它可以帮助我识别我的字符串是否仅包含 2 种类型的字符 -

我需要的正则表达式应该识别特定字符串是否仅包含括号字符`(` `)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:14:35.710

您可以使用[字符类](http://www.regular-expressions.info/charclass.html)：

```
/^[()]+$/ 
```

请注意，这不会*检查*括号是否成对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:15:21.957

我认为这个常规例外是您正在寻找的：

```
^[()]*$ 
```

如果您想确保字符串中至少有一个字符，请将 * 替换为 + 。

# visual-studio-2010 - 用于 SQL Server 2008 的 c# 中的相对连接字符串

> ID：13008161
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:12:59.360
> 
> 标签：visual-studio-2010, c#-4.0, database-connection, connection-string

`.mdf`我在项目本身（和`.ldf`文件）的文件夹中有一个带有数据库的 Windows 窗体应用程序。`app.config`我在文件中有我的连接字符串。我想在`app.config`文件中使用相对路径，这样即使我将文件夹移动到其他驱动器或电脑，它也应该可以工作。请帮忙。

请理解，我想要`app.config`文件而不是文件中数据库文件的相对路径`.cs`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:14:30.127

只需使用`"directory/file"`即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:52:03.540

使用“~”。这表示您在当前工作目录中。您可以从该目录中形成相对关系。

# git - 当文件发生冲突时，我无法还原文件。混帐

> ID：13008170
> 
> 赞同：6
> 
> 时间：2012-10-22T09:13:20.477
> 
> 标签：git, revert

这是我所做的：

*   创建文件夹 testA
*   创建一个文件“a.txt”，其内容为“a”
*   Git init 进入文件夹 testA
*   混帐添加。
*   git commit -a -m “第一”
*   将文件的“a.txt”内容更改为“b”
*   混帐添加。
*   git commit -a -m "改成 b"
*   git log（获取“first”的提交ID）
*   git 还原 a90deafe08c9f8f0d7b94d3d74d40be2bd65b161

我进入控制台：

```
error: could not revert a90deaf... first
hint: after resolving the conflicts, mark the
hint: with 'git add <paths>' or 'git rm <paths
hint: and commit the result with 'git commit' 
```

好吧，我想让所有文件都处于上一次提交的状态，我应该知道什么？

更新 **我想要的：**

*   我想保留“更改为 b”的提交，并拥有与“第一个”提交完全相同的第三个提交。我从不想丢失任何文件。
*   处理二进制文件（见下一点）
*   我不在乎如何管理二进制文件，只要我可以让它们处于提交状态，因此在这种情况下不需要合并。我只是想要一些更简单的东西：将文件 A 从提交 X 替换为提交 Y，不需要合并的复杂性。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-22T09:37:33.187

首先，通过以下方式恢复良好状态：

```
git revert --abort 
```

接下来，看看你在问什么。 `git revert`获取要撤消的提交的提交 ID。第一个提交设置`a.txt`为：

```
a 
```

第二次提交使其具有：

```
b 
```

你想恢复第一次提交。所以这就是说你想删除添加的`a`行，以及添加的文件，这是一个冲突。第一次提交添加了文件，第二次提交修改了它。所以 git 不知道现在你要删除它该怎么做。

我通过“所有处于上一次提交状态的文件”假设您想要回到其中的`a.txt`状态`a`。

有几种方法可以恢复到以前的状态。如果提交尚未共享，您可以简单地使用`git reset`：

```
git reset --hard HEAD~1 
```

这表示“将我的工作副本和索引的状态重置为上一次提交”。此时，`a.txt`便已`a`在其中。

如果您共享了第二次提交，那么您*不想执行上述操作*，因为您将重写历史记录，这会导致一大堆其他问题。相反，请恢复提交，就像您在上面尝试做的那样，但使​​用正确的提交。在这种情况下，它是您要恢复的 HEAD 提交：

```
git revert HEAD 
```

有时恢复提交可能会发生冲突。在这种情况下，它非常类似于合并冲突。您需要处理它们，修复冲突，并使用`git add`修改后的文件或使用`git rm`删除文件。完成后，`git revert --continue`将让该过程完成。

## 更新

无需进行任何花哨的合并即可恢复先前状态的最简单方法是使用`git checkout`. 你可以做：

```
git checkout HEAD~1 -- a.txt
git commit -m "Reverted to the previous version." 
```

没有合并，没有大惊小怪。:-) `HEAD~1`当然可以是任何提交。我只是根据您的示例使用了它。

# c - c socket编程，接收线路出错

> ID：13008175
> 
> 赞同：0
> 
> 时间：2012-10-22T09:13:29.783
> 
> 标签：c, sockets

我已经使用 C 中的 Socket 编程修改了一个简单的聊天程序代码。我的问题是我必须在服务器或客户端输入两行才能接收另一行。我已经上传了一张图片来解释更多。任何帮助表示赞赏

```
SERVER
#include <stdio.h>
#include <sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<stdlib.h>
#include<strings.h>
#include<unistd.h>
#define SERVER_TCP_PORT 3000
#define BUFLEN 256

int main (int argc,char **argv)
{
    int n,bytes_to_read;
    int sd,new_sd,client_len,port;
    struct sockaddr_in server,client;
    char *bp,buf[BUFLEN];

    switch (argc) {
        case 1:
            port = SERVER_TCP_PORT;
            break;
        case 2:
            port = atoi (argv[1]);
            break;
        default:
            fprintf (stderr,"Usage: %s[port]\n",argv[0]);
            exit(1);
            }
    /*Create a system socket */

        if ((sd = socket(AF_INET,SOCK_STREAM,0))==-1){
            fprintf(stderr,"Can't create a socket\n");
            exit(1);
            }

    /*Bind an address to the socket*/

    bzero ((char*)&server,sizeof(struct sockaddr_in));
    server.sin_family = AF_INET;
    server.sin_port = htons(port);
    server.sin_addr.s_addr = htonl(INADDR_ANY);
    if(bind(sd,(struct sockaddr *)&server,sizeof(server))==-1){
        fprintf(stderr,"can't bind name to socket\n");
        exit(1);
    }
    /*queue up to 5 connect requests*/

    listen(sd,5);
    while(1){
        client_len = sizeof(client);
    if((new_sd = accept(sd,(struct sockaddr *)&client,&client_len))==-1){
        fprintf(stderr,"can't accept client \n");
        exit(1);
        }

if(fork())
{
printf("\n Server listening to clients on port 2000");
printf("\n Server got request from%s",inet_ntoa(client.sin_addr));
printf("\n SEND DATA<q or Q to quit> :%s",buf);
scanf("%s",buf);
while((strcmp(buf,"q")!=0)&&(strcmp(buf,"Q")!=0))
{
send(new_sd,buf,30,0);
scanf("%s",buf);

}
send(new_sd,"q",5,0);
}
else{
n = recv(new_sd,buf,30,0);
while((strcmp(buf,"q")!=0)&&(strcmp(buf,"Q")!=0))
{
printf("\nRECEIVED DATA =%s",buf);
n = recv(new_sd,buf,30,0);

}
printf("\n Bye");
send(new_sd,"EOF",4,0);
close(sd);
close(new_sd);
}
}
return 0;
} 

Client
#include <stdio.h>
#include <sys/types.h>
#include<sys/socket.h>
#include <netdb.h>
#include<stdlib.h>
#include<strings.h>
#include <netinet/in.h>

#define SERVER_TCP_PORT 3000
#define BUFLEN 256
int main(int argc,char **argv)
{

int n,bytes_to_read;
int sd,port;
struct hostent *hp;
struct sockaddr_in server;
char *host,*bp,rbuf[BUFLEN],sbuf[BUFLEN];
switch(argc) {
    case 2:
        host = argv[1];
        port = SERVER_TCP_PORT;
        break;
    case 3:
        host = argv[1];
        port = atoi(argv[2]);
        break;
    default:
        fprintf(stderr,"Usage: %s host[port] \n",argv[0]);
        exit(1);
        }

/*Create a stream socket*/

if ((sd=socket(AF_INET,SOCK_STREAM,0))==-1){
    fprintf(stderr,"Can't create a socket\n");
    exit(1);
    }
bzero ((char *)&server,sizeof(struct sockaddr_in));
server.sin_family = AF_INET;
server.sin_port = htons(port);
if((hp = gethostbyname(host))==NULL){
    fprintf (stderr,"Can't get server's address\n");
    exit(1);
    }
bcopy(hp->h_addr,(char *)&server.sin_addr,hp->h_length);
/*connecting to the server*/

if (connect (sd,(struct sockaddr *)&server,sizeof(server))==-1){
    fprintf(stderr,"Can't connect \n");
    exit(1);
    }
printf("Connected:server's address is %s\n",hp->h_name);

if(fork())
{
bzero(rbuf,30);
printf("\n SEND DATA<q or Q to quit> :%s",rbuf);
scanf("%s",rbuf);
while((strcmp(rbuf,"q")!=0)&&(strcmp(rbuf,"Q")!=0))
{
send(sd,rbuf,30,0);
scanf("%s",rbuf);

} 
send(sd,"q",5,0);
}

else{
n = recv(sd,rbuf,30,0);
while((strcmp(rbuf,"q")!=0)&&(strcmp(rbuf,"Q")!=0))
{
printf("\nRECEIVED DATA =%s",rbuf);
n = recv(sd,rbuf,30,0);

}
printf("\n Bye");
send(sd,"EOF",4,0);
close(sd);
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:51:44.303

As far as I understand, you want to read lines one by one. however, recv() function does not deliver the messages to you one by one since it only reads certain amount of data from the message stream. In order to differentiate between messages, there are two ways.

First, you send a fixed-size message -in this case 30 bytes- and always read 30 bytes from the otherside of the network.

Second, you encapsulate your data with a structure that contains the data length so as to provide various-sized messages. This method is better, because if you want to send -let's say- 1024-byte long string, otherside will know it and read 1024 bytes accordingly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:19:58.687

您每次只发送/接收 30 个字节。也许应该是BUFLEN？更好的是，在消息的前面有一个固定大小的块，其中包括`strlen`消息的。

例如：

```
int size = htonl(strlen(buf)+1);
send(new_sd, size, sizeof(size), 0);
send(new_sd, buf, size, 0); 
```

客户：

```
int size;
recv(sd, size, sizeof(size),0);
size = ntohl(size);
recv(sd, buf, size, 0); 
```

为清楚起见，省略了错误检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:49:43.467

我一定是做错了什么，我已将大小添加到标题消息中，现在没有从客户端和服务器接收任何数据。我正确使用它。这是我插入大小的代码的一部分。

服务器

```
if(fork())
{
printf("\n Server listening to clients on port 2000");
printf("\n Server got request from%s",inet_ntoa(client.sin_addr));
bzero(buf,256);
printf("\n SEND DATA<q or Q to quit> :%s",buf);
scanf("%s",buf);
while((strcmp(buf,"q")!=0)&&(strcmp(buf,"Q")!=0))
{
int size = htonl(strlen(buf)+1);
send(new_sd,size,sizeof(size),0);
send(new_sd,buf,size,0);
scanf("%s",buf);

}
send(new_sd,"q",5,0);
}
else{

int size;
recv(new_sd,size,sizeof(size),0);
size=ntohl(size);
n=recv(new_sd,buf,size,0);
while((strcmp(buf,"q")!=0)&&(strcmp(buf,"Q")!=0))
{
printf("\nRECEIVED DATA =%s",buf);
n = recv(new_sd,buf,size,0);
}
printf("\n Bye");
send(new_sd,"EOF",BUFLEN,0);
close(sd);
close(new_sd);
}
}
return 0;
} 
```

客户

```
if(fork())
{
printf("\n SEND DATA<q or Q to quit> :%s",rbuf);
scanf("%s",rbuf);
while((strcmp(rbuf,"q")!=0)&&(strcmp(rbuf,"Q")!=0))
{
int size = htonl(strlen(sbuf)+1);
send(sd,size,sizeof(size),0);
send(sd,sbuf,size,0);
scanf("%s",sbuf);

} 
send(sd,"q",5,0);
}

else{
int size;
recv(sd,size,sizeof(size),0);
size = ntohl(size);
recv(sd,rbuf,size,0);
while((strcmp(rbuf,"q")!=0)&&(strcmp(rbuf,"Q")!=0))
{
printf("\nRECEIVED DATA =%s",rbuf);
//n = recv(sd,rbuf,bytes_to_read,0);

}
printf("\n Bye");
send(sd,"EOF",4,0);
close(sd);
}

return 0;
} 
```

# c# - WPF将数据库中的常见数据绑定到列表视图

> ID：13008177
> 
> 赞同：0
> 
> 时间：2012-10-22T09:13:40.563
> 
> 标签：c#, wpf

我有一个数据网格。当我在数据网格中选择 3 个项目时，我右键单击并单击“显示位置”按钮。一个新的窗口来了。该新窗口中有一个列表视图。现在，我想在上一个窗口中绑定所选项目的常用 LOCATIONS。如果所选项目的位置是常见的，则它们将出现在那里，否则不会出现任何内容。你能给出一个组织的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:23:04.077

如果您使用[ViewModel](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)，您可以与您的数据网格以及弹出的新窗口共享此视图模型。

通过这种方式，您可以将列表视图绑定到所选项目。首先尝试在一个窗口中执行此操作，以确保您的代码有效，然后尝试在另一个窗口中执行此操作。您能否提供更多信息，也许是您现在使用的代码。

也可以使用[EventAggregator](http://msdn.microsoft.com/en-us/library/ff649187.aspx)在视图之间共享数据

# c# - 使用 C#/Powershell 设置 Active Directory“安全身份映射”/“名称映射”

> ID：13008188
> 
> 赞同：2
> 
> 时间：2012-10-22T09:14:17.270
> 
> 标签：c#, powershell, active-directory

我想在 Windows Server 2008R2（活动目录）的“名称映射”/“安全身份映射”中为用户添加证书。使用 GUI 执行此操作很容易，但我有一个用例，这是不可能的。

我可以毫无问题地从 powershell 访问电话号码等常规字段，但我不知道如何设置这个字段。

我还在 c# 中尝试了另一种使用“IADSUser”的方法，但也无法让它工作。

去这里的路是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:14:32.707

我相信 powershell 命令“New-ADUser”的“证书”参数是您正在寻找的：

[http://technet.microsoft.com/en-us/library/ee617253.aspx](http://technet.microsoft.com/en-us/library/ee617253.aspx)

这是一个站点，其中包含在 powershell 中创建证书的示例，然后使用“new-aduser”命令将该证书分配给新用户。还有一个使用“Get-ADUser”将证书分配给现有用户的示例：

[http://blogs.msdn.com/b/adpowershell/archive/2009/04/26/working-with-certificates.aspx](http://blogs.msdn.com/b/adpowershell/archive/2009/04/26/working-with-certificates.aspx)

# android - Android：我需要关闭 Cursor 对象吗？

> ID：13008191
> 
> 赞同：8
> 
> 时间：2012-10-22T09:14:30.250
> 
> 标签：android, sqlite

在我的数据库适配器类中，我有很多这样的方法：

```
public long getContactId(final String phoneNumber) throws SQLException {
    final Cursor cur = mDb.rawQuery(
            "select contact_id from contactphones where number=? limit 1;",
            new String[] { phoneNumber });
    return cur.moveToFirst() ? cur.getLong(0) : -1;
} 
```

我很欣赏这种方法的简洁性。但我没有调用 Cursor.close()，我不确定这是否有问题。游标是否会在 Cursor.finalize() 中关闭并释放其资源？否则我将不得不这样做：

```
public long getContactId(final String phoneNumber) throws SQLException {
    final Cursor cur = mDb.rawQuery(
            "select contact_id from contactphones where number=? limit 1;",
            new String[] { phoneNumber });
    final boolean retVal = cur.moveToFirst() ? cur.getLong(0) : -1;
    cur.close();
    return retVal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:06:04.127

是的，建议您在使用完该光标对象后关闭光标，以便光标可以在关闭时执行它想要执行的任何内务处理工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:14:30.250

游标不是一个类，而是一个接口。如果您的 Cursor 对象来自 SQLite 查询，则它是 SQLiteCursor。在该定义中`(\Android\android-sdk\source\android\database\sqlite\SQLiteCursor.java)`，`close()`在`finalize()`函数中调用。这在其他游标类型中可能有所不同，因为 Cursor 接口未指定此行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:07:05.183

不要关闭数据库。[没有必要](https://groups.google.com/forum/#!msg/android-developers/NwDRpHUXt0U/jIam4Q8-cqQJ)（无论如何，数据都会尽早安全地写入持久存储）。在应用程序启动时打开一次，并在应用程序的整个生命周期内重复使用相同的连接

请参考这个[链接](https://stackoverflow.com/questions/12618873/where-do-i-close-my-database-when-it-continuously-updates)

# jquery - 使用 ajaxSubmit 进行异步调用 - jquery.form

> ID：13008196
> 
> 赞同：4
> 
> 时间：2012-10-22T09:14:49.143
> 
> 标签：jquery, ruby-on-rails, forms

我有一个带有特定动作的表格。提交表单后，我发送一个调用此操作的 ajax 调用。另一方面，我正在发送另一个 ajax 调用来更新进度。我已经这样做了：

```
 $("form").submit(function() {               
      function callBack()
      {
            if( (this.readyState == 4) && (this.status == 200) )
            {
              console.log(this.responseText);
            }
      }

      function updateProgress (){
        asyncReq('/get_progress?progress='+progress, callBack);
      }

      function asyncReq(url, functionCallBack)
      {
            var request; //request must be a local var to avoid race condition
            try
            {   //for modern browsers
              request = new XMLHttpRequest;
            }
            catch (err)
            {// legacy IE
              request = new ActiveXObject("Microsoft.XMLHTTP");
            }
            request.onreadystatechange = callBack;
            request.open("GET", url, true);
            request.send();
      };
      var progress = $("#progress").val();
      asyncReq('/get_progress?progress='+progress, callBack);
      setTimeout(updateProgress, 2000);
      $(this).ajaxSubmit({async: true});
      return false;
   }); 
```

我在这里有 2 个异步 javascript 调用，一个用于提交表单，一个用于更新进度。当我打印出`responseText`in 时`callBack`，我只能看到 0.0 和 1.0。那是在`ajaxSubmit()`调用之前和完成之后的一个。我也想在中间获得所有进展的价值。据我了解，`asyncReq`仅在`ajaxSubmit`完成后才调用第二个 ajax 调用。谁能告诉我如何在完成之前进行另一个完整的 ajax 调用`ajaxSubmit()`？

**笔记：**

该表单由文件字段`ajaxSubmit`和解压缩、处理文件并在处理每个文件后更新进度表组成。该`get_progress`方法提取该表的进度值。我正在使用[jquery.form.js](http://jquery.malsup.com/form/)通过 ajax 调用提交表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:09:26.683

您在两秒后提交了 3 个并发 ajax 请求：

1.  `asyncReq('/get_progress?progress='+progress, callBack);`
2.  `setTimeout(updateProgress, 2000);`（稍后运行）
3.  `$(this).ajaxSubmit({async: true});`

您使用的是旧版浏览器吗？如果是这样，您将遇到两个连接限制。请参阅[浏览器中的最大并行 http 连接数？](https://stackoverflow.com/questions/985431/max-parallel-http-connections-in-a-browser)流行的浏览器[允许多少并发 AJAX (XmlHttpRequest) 请求？](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse)

如果对并发请求的数量有限制，您的超时请求将在浏览器上排队并仅在 ajax 表单或第一次进度完成后提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:48:00.247

我不清楚你试图达到什么目的。但是，这是您的代码的简化版本。

```
function updateProgress(){
    var progress = $("#progress").val();
    $.get('/get_progress?progress='+progress, function(data){
        //***you will get response in data
        //here you write how to handle progress and data
    }
    setTiemout('updateProgress()', 2000)

}
$('form').submit(function(){
    updateProgress();
    $(this).ajaxSubmit({async: true});
}) 
```

我不确定`ajaxSubmit()`实际上对您有什么功能！顾名思义，我猜它只是提交表单。现在，如果您想使用自己的逻辑来显示进度，只需将该逻辑放在`***`标记区域即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:54:09.513

请[检查这个](http://javascript.about.com/library/blstvsi.htm)。

> setTimeout 函数延迟指定的时间段，然后触发指定函数的执行。一旦函数被触发，setTimeout 就完成了。
> 
> setInterval 函数还会在触发执行特定函数之前延迟指定时间。不同之处在于，在触发该功能后，该命令并未完成。相反，它会再次等待指定的时间，然后再次触发该函数，并继续以指定的时间间隔重复触发该函数的过程，直到卸载网页或调用 clearInterval 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T18:24:14.000

在@HungryCoder 的回复之后，您只缺少一件事。您必须从表单提交中**返回 false 。**

```
$('form').submit(function(){
    updateProgress();
    $(this).ajaxSubmit({async: true});
    return false;
}); 
```

如果没有 return false，表单仍然会自然地做它做的事情。或者，您可以捕获提交事件变量。

```
$('form').submit(function( e ){
    e.preventDefault();
    updateProgress();
    $(this).ajaxSubmit({async: true});
    return false;
}); 
```

调用`e.preventDefault()`还将阻止表单执行其默认浏览器定义的活动（即提交到服务器）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T12:55:02.243

看起来您的代码仅在 2000 毫秒后更新进度一次。这一行：

```
setTimeout(updateProgress, 2000); 
```

您是否尝试过设置更新间隔？这将使该代码每 xxxx 毫秒运行一次。像这样：

```
myVar=setInterval(updateProgress,2000); 
```

然后，您需要使用`clearInterval`来停止该代码的运行。像这样：

```
clearInterval(myVar); 
```

请注意，我必须添加变量 myVar。它是该`clearInterval`功能所必需的，并且需要它才能工作。您可能必须将其全局定义为`var myVar`.

# eclipse - 使用 Eclipse 进行 CQ5 开发

> ID：13008208
> 
> 赞同：2
> 
> 时间：2012-10-22T09:15:18.970
> 
> 标签：eclipse, aem

我是 CQ5 的新手，在浏览文档时我发现它带有 2 个开发工具 - CRXDE Lite，它是一个基于浏览器的工具，另一个是 CRXDE，它基于 eclipse，我对这两个工具都非常满意. 问题是，在一些 CQ5 教程中，他们建议使用独立的 eclipse 来做某些事情，所以我很想知道如果我们有 CRXDE，为什么需要这样做。使用 CRXDE 有什么我们不能做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:01:00.483

CRXDE 和 CRXDE Lite 不支持强大的软件开发生命周期 (SDLC)，因为它们缺乏完整的 IDE 的许多工具。这些工具中比较困难或不支持的一些事情是：

1.  发布 - 您必须使用包管理器手动创建发布，这会导致更多错误空间，Maven + Eclipse 允许自动发布
2.  源代码控制管理 - 它们仅支持 SVN，与完整的 IDE 相比，集成相当原始
3.  持续集成 - CRXDE 和 CRXDE Lite 不使用可由 CI 服务器调用的构建脚本，您必须单独创建它们，在真正的 IDE 中，IDE 和 CI 服务器都可以使用相同的
4.  Java 开发 - 通过 CRXDE 的 Java 开发似乎次于 JSP 开发。以我的经验，这会导致网站构建的业务逻辑散布在混乱的 JSP 代码迷宫中。一个更好的方法是使用 IDE，它使编写和维护 Java 服务变得简单而高效。

为了让您开始，这是我做的关于使用 Apache Maven 构建 CQ 项目的网络研讨会（对不起插件）： [http ://www.6dlabs.com/blog/dklco/2012-06-05/webinar-cq5-development-设置-maven-build-and-deployment](http://www.6dlabs.com/blog/dklco/2012-06-05/webinar-cq5-development-setup-maven-build-and-deployment)

这是一篇关于使用 Maven 发布 CQ 项目的博客文章： [http ://www.6dlabs.com/blog/dan-klco/2012-09-18/releasing-adobe-cq5-project-apache-maven](http://www.6dlabs.com/blog/dklco/2012-06-05/webinar-cq5-development-setup-maven-build-and-deployment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:19:29.987

我不相信最新版本的 CQ（5.5 版）支持 CRXDE。但是仍然支持 CRXDE Lite。

一般来说，CRXDE Lite 只适合非常小的开发。它有一些用于代码版本控制的 SVN 集成，但我认为它相当不可靠。因此，对于团队项目，通常组合使用 Eclipse 作为 IDE，使用 SVN 进行版本控制，使用 Maven 将工作区更改推送到 CRX 存储库。

# javascript - 将字符串转换为 jQuery 对象并添加属性

> ID：13008211
> 
> 赞同：0
> 
> 时间：2012-10-22T09:15:53.120
> 
> 标签：javascript, jquery

我有以下 HTML：

```
<label>Lobby Template:</label> 
```

我想将其转换为 jquery 对象并添加一个值为 test 的属性 id：

```
<label id="test">Lobby Template:</label> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:17:45.320

```
var $el = $('<label>Lobby Template:</label>').attr('id', 'test'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:19:35.273

我喜欢这种语法：

```
var $el = $("<label>", {
    id: "test",
    text: "Lobby Template:"
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:18:02.637

使用 jQuery**`attr`**

```
$('label').attr('id', 'test'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:18:30.103

```
$('label')[0].id="test"; 
```

你需要有某种钩子来识别你的元素。[http://jsfiddle.net/RQ3vH/1/](http://jsfiddle.net/RQ3vH/1/)是一个演示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T09:18:31.843

你可以这样做

```
$('label').attr('id','test'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T09:22:56.060

```
labels = $('label')
$.each(labels, function(i, label){
    if($(label).html() == 'Lobby Template:' ){
    $(label).attr("id", "test")
    }
}) 
```

# php - 无法安装 Rock Mongo

> ID：13008212
> 
> 赞同：0
> 
> 时间：2012-10-22T09:15:54.337
> 
> 标签：php, mongodb, mongodb-php

我使用 ubuntu 作为我的开发机器。在本地主机上。我已经安装了阿帕奇

我按照此处给出的说明进行操作：

[http://code.google.com/p/rock-php/wiki/rock_mongo#Quick_Install](http://code.google.com/p/rock-php/wiki/rock_mongo#Quick_Install)

但我无法访问 localhost/rockmongo/index.php 上的站点

我的 apache 有我认为的默认配置。这是配置文件：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www
    <Directory />
        Options FollowSymLinks
        AllowOverride None
        Order allow,deny
        Allow from all
    </Directory>
    <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

我可以提供更多细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:30:11.513

看起来你的虚拟主机文件搞砸了。这就是我的虚拟主机，它可以工作：

```
<VirtualHost *:80>
    ServerAdmin scott@iosdeveloperforums.com
    DocumentRoot "/var/www/Sites/rockmongo/"
    ServerName local.rockmongo.com
    ServerAlias www.local.rockmongo.com
    ErrorLog "logs/local.rockmongo.com-error_log"
    CustomLog "logs/local.rockmongo.com-access_log" common

<Directory "/var/www/Sites/rockmongo">
        Options FollowSymLinks
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

# c# - C#数字文本框在控制面板中将语言从“En-Us”更改为任何全局语言后显示异常

> ID：13008216
> 
> 赞同：1
> 
> 时间：2012-10-22T09:16:13.103
> 
> 标签：c#, localization, type-conversion, numeric-textbox

我创建了一个应用程序，其中包含两个数字文本框，我已向其中添加了一个`StartValue`属性。

### 例子

```
public decimal SValue {
  get { return MValue; }
  set { MValue = value; }
} 
```

然后

```
const string VALUE = "1.000";
private NumericTextBox sVal; 
```

问题来了

```
sVal.StartValue = Convert.ToDecimal(VALUE); 
```

在我将控制面板中的语言从`EN-US`任何全局语言更改为我的应用程序后挂起。

# c++ - 将 deque max_size 设置为最大大小

> ID：13008218
> 
> 赞同：0
> 
> 时间：2012-10-22T09:16:17.130
> 
> 标签：c++, deque

据我了解， deque 是一个循环缓冲区，当它用完空间时，它会分配新空间（如果可以的话）。有没有办法限制双端队列可以增长到？或者确保它不会超过最大大小的唯一方法是每次我想将数据插入到双端队列时检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:19:38.177

是的，与每个 STL 集合一样，模板化参数之一是分配器。

因此，您可以编写自己的自定义分配器，该分配器将跟踪内存并`bad_alloc`在超出此限制时抛出，即使内存可用。

顺便说一句，a`std::deque`通常实现为“页面”的集合，其中每个页面包含固定数量的元素。

如果您想要一个可以在“任何地方”插入或删除的循环缓冲区实现，`std::deque`那么使用起来并不是最有效的`std::list`（尽管您可以使用 boost 中的循环集合）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:20:32.777

`deque`不是循环缓冲区；它通常实现为数组的链接集合。对于循环缓冲区，请查看[`circular_buffer`](http://www.boost.org/doc/libs/1_51_0/libs/circular_buffer/doc/circular_buffer.html)Boost。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:55:04.460

根据我的经验，最简单的方法是通过包装类封装双端队列并编写两个成员函数包装`push_back`和`push_front`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:22:20.297

双端队列不是循环缓冲区。它可以实现为循环缓冲区，但实现细节对用户是隐藏的。我建议您编写一个包装类或便利函数来为您进行大小检查。

# ios - ios多分辨率动画

> ID：13008222
> 
> 赞同：0
> 
> 时间：2012-10-22T09:16:33.743
> 
> 标签：ios, animation, cocos2d-iphone

使用 cocos2d 制作动画时，处理不同分辨率的最佳方法是什么？

每个设备和分辨率是否需要为每一帧提供不同的缩放图像？

这意味着我需要 4 个相同的图像只是不同的比例？

这是最有效的方法吗？

我正在创建像[ray wenderlich 教程中一样的动画](http://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:02:09.623

> 每个设备和分辨率是否需要为每一帧提供不同的缩放图像？

是的。

> 这意味着我需要 4 个相同的图像只是不同的比例？

是的。如果您支持标准和 Retina iPhone，以及标准和 Retina iPad。

> 这是最有效的方法吗？

对于作为开发人员的您：是的。如果您使用正确的工具，即 TexturePacker。

任何其他方式，例如即时放大/缩小图像，这些都不是真正的选择。一个导致性能问题，另一个导致图像模糊。

如果您将某些 iPad 图像设计为用户可能只能看到 1024x768 图像的 960x640 像素的图像，则您可能能够为 Retina iPhone 重复使用某些 iPad 图像。

# javascript - NULLify CTRL 按下链接点击

> ID：13008229
> 
> 赞同：1
> 
> 时间：2012-10-22T09:17:19.543
> 
> 标签：javascript, jquery

我需要防止我的应用程序中的链接通过 CTRL 键溢出到新窗口/选项卡。我现在在我的页面中有以下内容：

```
 $(document).click(function(e)
        {
            if (e.ctrlKey)
            {
                return (false);
            }
        }); 
```

这对于 DIV 点击似乎工作正常，但链接点击被完全忽略。我正在寻找是否可以单独 NULLIfy CTRL 按键并使其看起来像简单的单击。那可能吗？一种强制 ctrl 的事件 keyCode 单独为零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:20:35.383

您可以使用：

```
$('a').click(function(e) {
    if(e.ctrlKey) return false;
}); 
```

检查这个**演示**：http: [//jsfiddle.net/gTG6Q/](http://jsfiddle.net/gTG6Q/)

*注意：*用户仍然可以右键单击并在新选项卡中打开您的链接。为了防止这种情况，您还需要否定该`contextmenu`事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:29:18.337

通过“文档”，加上以后可能通过 AJAX 添加的元素，使用这个简单的单行：- 复制代码

```
$(document).on("click", "*", function(e)  { 
    if (e.ctrlKey) return false; 
}); 
```

If you're version of jQuery is lower than v1.7 then use .live() instead of .on() (just change the word from "on" to "live").

# node.js - 如何使用进度条快速上传大文件？

> ID：13008232
> 
> 赞同：13
> 
> 时间：2012-10-22T09:17:42.500
> 
> 标签：node.js, upload, express, progress-bar

目前我正在使用`socket.io`上传带有进度条的视频。这是教程

> [http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-resumable-video-uploade-in-node-js/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-resumable-video-uploade-in-node-js/)

但是 Internet Explorer 不支持这种方法，但我确实需要在所有浏览器中上传视频。

我检查了快递文件。由于 express 是基于`node-formidable`（它有一个进度事件），我认为有办法构建一个带有进度条的上传系统，对吧？我就是不知道怎么办！

是否启用了强大的 IE 浏览器？

有什么方法可以在带有进度条的纯 espress.js 中构建文件上传系统吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:51:27.263

它可以通过 xhr.upload 进度事件来完成。从 html5 开始支持它。

例如： [https ://github.com/zeMirco/express-upload-progress](https://github.com/zeMirco/express-upload-progress)

在 php 中，上传信息可以附加到会话中，因此它适用于 html4，也许也有一个 nodejs 扩展，我会谷歌它。

据此： [How to do upload with express in node.js](https://stackoverflow.com/questions/14028036/how-to-do-upload-with-express-in-node-js) 在 express 中通过文件上传有一个进度事件，因此您可以在会话中使用实际进度数据设置一个变量，并从客户端使用 ajax 读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-03T20:17:26.177

这是使用Angular js 和[ng-file-upload](https://github.com/danialfarid/ng-file-upload#spring)指令的[jsfiddle 。](https://jsfiddle.net/harshgupta0227/pk67g28k/)

jsfiddle 适用于图像和文件，但要上传视频，您需要将 POST url 更改到您的服务器。

```
//inject angular file upload directives and services.
var app = angular.module('fileUpload', ['ngFileUpload']);

app.controller('MyCtrl', ['$scope', 'Upload', '$timeout', function($scope, Upload, $timeout) {
  $scope.uploadFiles = function(file, errFiles) {
    $scope.f = file;
    $scope.errFile = errFiles && errFiles[0];
    if (file) {
      file.upload = Upload.upload({
        url: 'https://angular-file-upload-cors-srv.appspot.com/upload',
        data: {
          file: file
        }
      });

      file.upload.then(function(response) {
        $timeout(function() {
          file.result = response.data;
        });
      }, function(response) {
        if (response.status > 0)
          $scope.errorMsg = response.status + ': ' + response.data;
      }, function(evt) {
        file.progress = Math.min(100, parseInt(100.0 *
          evt.loaded / evt.total));
      });
    }
  }
}]);
```

```
.thumb {
  width: 24px;
  height: 24px;
  float: none;
  position: relative;
  top: 7px;
}

form .progress {
  line-height: 15px;
}

.progress {
  display: inline-block;
  width: 100px;
  border: 3px groove #CCC;
}

.progress div {
  font-size: smaller;
  background: orange;
  width: 0;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
<script src="https://angular-file-upload.appspot.com/js/ng-file-upload-shim.js"></script>
<script src="https://angular-file-upload.appspot.com/js/ng-file-upload.js"></script>

<body ng-app="fileUpload" ng-controller="MyCtrl">
  <h4>Upload on file select</h4>
  <button type="file" ngf-select="uploadFiles($file, $invalidFiles)"  ngf-max-height="1000" ngf-max-size="100MB">
    Select File</button>
  <br>
  <br> File:
  <div style="font:smaller">{{f.name}} {{errFile.name}} {{errFile.$error}} {{errFile.$errorParam}}
    <span class="progress" ng-show="f.progress >= 0">
          <div style="width:{{f.progress}}%"  
               ng-bind="f.progress + '%'"></div>
      </span>
  </div>
  {{errorMsg}}
</body>
```

# java - Nimbus 和备用行颜色

> ID：13008241
> 
> 赞同：5
> 
> 时间：2012-10-22T09:18:11.977
> 
> 标签：java, swing, jtable, render, nimbus

我不明白在 Nimbus 中交替行着色是如何工作的。看起来简直是疯了！！！我想在这里澄清一下。

对于演示，假设**我们想要一个交替红色和粉红色行的 JTable**（我不在乎第一个颜色是哪种颜色）。

**在不重新定义执行自己的“模 2”事情的**自定义 cellRenderer的情况下，并且不覆盖 JTable 中的任何方法，我想列出启动应用程序和****仅使用 Nimbus 属性**获取具有自定义备用行颜色的 JTable 之间的强制性步骤。**

 **以下是我希望遵循的步骤：

1.  安装 Nimbus PLAF
2.  自定义“Table.background”nimbus 属性
3.  自定义“Table.alternateRowColor”nimbus 属性
4.  使用简单的数据/标题创建 JTable
5.  将 jTable 包装在 JScrollPane 中并将其添加到 JFrame
6.  显示 JFrame

这里是源代码：

* * *

```
public class JTableAlternateRowColors implements Runnable {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new JTableAlternateRowColors());
    }

    @Override
    public void run() {
        try {
            UIManager.setLookAndFeel(new NimbusLookAndFeel());
        } catch (UnsupportedLookAndFeelException e) {
            e.printStackTrace();
        }

        UIManager.getDefaults().put("Table.background", Color.RED);
        UIManager.getDefaults().put("Table.alternateRowColor", Color.PINK);

        final JFrame jFrame = new JFrame("Nimbus alternate row coloring");
        jFrame.getContentPane().add(new JScrollPane(new JTable(new String[][] {
                {"one","two","three"},
                {"one","two","three"},
                {"one","two","three"}
        }, new String[]{"col1", "col2", "col3"}
        )));
        jFrame.setSize(400, 300);
        jFrame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        jFrame.setVisible(true);
    }
} 
```

这是JDK6代码。有人可以告诉我这里出错了吗？

* * *

根据@kleopatra 的评论和整个社区的贡献，这是一种仅使用 Nimbus 属性来获得替代行着色的方法

公共类 JTableAlternateRowColors 实现 Runnable {

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new JTableAlternateRowColors());
}

@Override
public void run() {
    try {
        UIManager.setLookAndFeel(new NimbusLookAndFeel());
    } catch (UnsupportedLookAndFeelException e) {
        e.printStackTrace();
    }

    UIManager.put("Table.background", new ColorUIResource(Color.RED));
    UIManager.put("Table.alternateRowColor", Color.PINK);
    UIManager.getLookAndFeelDefaults().put("Table:\"Table.cellRenderer\".background", new ColorUIResource(Color.RED));

    final JFrame jFrame = new JFrame("Nimbus alternate row coloring");
    final JTable jTable = new JTable(new String[][]{
            {"one", "two", "three"},
            {"one", "two", "three"},
            {"one", "two", "three"}
    }, new String[]{"col1", "col2", "col3"});
    jTable.setFillsViewportHeight(true);
    jFrame.getContentPane().add(new JScrollPane(jTable));
    jFrame.setSize(400, 300);
    jFrame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    jFrame.setVisible(true);
} 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T13:29:15.103

貌似是几个bug的干扰……

为了同时更改默认表格背景和默认条带化，UIManager 的预期（不仅是您的，我的也是）配置（对于所有尊重 alternateRow 属性的 LAF 相同）将是：

```
UIManager.put("Table.background", Color.RED);
UIManager.put("Table.alternateRowColor", Color.PINK); 
```

对 Metal 和 Nimbus 都不起作用

*   在金属中：没有条纹，桌子都是红色的
*   在 Nimbus 中：条纹白色/粉色，即表格背景被忽略

第一个的根本原因可以在 DefaultTableCellRenderer 中找到：

```
Color background = unselectedBackground != null
                        ? unselectedBackground
                        : table.getBackground();
if (background == null || background instanceof javax.swing.plaf.UIResource) {
    Color alternateColor = DefaultLookup.getColor(this, ui, "Table.alternateRowColor");
    if (alternateColor != null && row % 2 != 0) {
        background = alternateColor;
    }
} 
```

它的逻辑是错误的：仅当*table*的背景是 colorUIResource 时才采用备用颜色，这是一个相当弱的区别。无论如何，它引导我们进行下一次尝试：

```
UIManager.put("Table.background", new ColorUIResource(Color.RED));
UIManager.put("Table.alternateRowColor", Color.PINK); 
```

这看起来很好（除了复选框渲染器的典型问题，但这是另一个错误故事;-) 对于金属，对于 Nimbus 来说仍然没有运气。

下一步是查找可能相关的[Nimbus 默认值，并应用（在设置 LAF 之后）：](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html)

```
UIManager.getLookAndFeelDefaults().put("Table:\"Table.cellRenderer\".background", 
    new ColorUIResource(Color.RED)); 
```

**编辑**（正如评论中所要求的那样）

JXTable 试图完全回避这个问题——它的条带化方法是从 HighlighterFactory 中检索到的 Highlighter。需要通过从lookAndFeelDefaults 中删除alternateRowColor 属性并使用新键“UIColorHighlighter.stripingBackground”添加它来使用Nimbus

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T11:21:11.323

使用 Nimbus 属性（+1 到 @Kleopatra 以证明我错了 :() 您可以通过以下方式设置交替行颜色

```
UIManager.put("Table.alternateRowColor", Color.PINK);
UIManager.getLookAndFeelDefaults().put("Table:\"Table.cellRenderer\".background", Color.RED); 
```

或者通过：

扩展`JTable`和覆盖`prepareRenderer(TableCellRenderer renderer, int row, int column)`以便为单元格绘制所需的颜色（*红色*和*粉红色*）。

这是一个简短的例子，我希望它有所帮助。

**额外功能：** 它还覆盖`paintComponent(..)`which 将调用`paintEmptyRows(Graphics g)`which 将为视口的整个高度和宽度绘制行`JScrollPane`，但是这仅适用于`setFillsViewPortHeight`设置为`true`on `MyTable`：

![在此处输入图像描述](../Images/9c7434f1df73aad9568ab12192a73c27.png)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Rectangle;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.WindowConstants;
import javax.swing.plaf.nimbus.NimbusLookAndFeel;
import javax.swing.table.TableCellRenderer;

public class JTableAlternateRowColors {

    public JTableAlternateRowColors() {
        initComponents();
    }

    public static void main(String[] args) {

        try {
            UIManager.setLookAndFeel(new NimbusLookAndFeel());
        } catch (UnsupportedLookAndFeelException e) {
            e.printStackTrace();
        }

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JTableAlternateRowColors();
            }
        });
    }

    private void initComponents() {

        final JFrame jFrame = new JFrame("Nimbus alternate row coloring");

        MyTable table = new MyTable(new String[][]{
                    {"one", "two", "three"},
                    {"one", "two", "three"},
                    {"one", "two", "three"}
                }, new String[]{"col1", "col2", "col3"});

        table.setFillsViewportHeight(true);//will fill the empty spaces too if any

        table.setPreferredScrollableViewportSize(table.getPreferredSize());

        JScrollPane jScrollPane = new JScrollPane(table);

        jFrame.getContentPane().add(jScrollPane);
        jFrame.pack();
        jFrame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        jFrame.setVisible(true);
    }
}

class MyTable extends JTable {

    public MyTable(String[][] data, String[] fields) {
        super(data, fields);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        if (getFillsViewportHeight()) {
            paintEmptyRows(g);
        }
    }

    /**
     * Paints the backgrounds of the implied empty rows when the table model is
     * insufficient to fill all the visible area available to us. We don't
     * involve cell renderers, because we have no data.
     */
    protected void paintEmptyRows(Graphics g) {
        final int rowCount = getRowCount();
        final Rectangle clip = g.getClipBounds();
        if (rowCount * rowHeight < clip.height) {
            for (int i = rowCount; i <= clip.height / rowHeight; ++i) {
                g.setColor(colorForRow(i));
                g.fillRect(clip.x, i * rowHeight, clip.width, rowHeight);
            }
        }
    }

    /**
     * Returns the appropriate background color for the given row.
     */
    protected Color colorForRow(int row) {
        return (row % 2 == 0) ? Color.RED : Color.PINK;
    }

    /**
     * Shades alternate rows in different colors.
     */
    @Override
    public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
        Component c = super.prepareRenderer(renderer, row, column);
        if (isCellSelected(row, column) == false) {
            c.setBackground(colorForRow(row));
            c.setForeground(UIManager.getColor("Table.foreground"));
        } else {
            c.setBackground(UIManager.getColor("Table.selectionBackground"));
            c.setForeground(UIManager.getColor("Table.selectionForeground"));
        }
        return c;
    }
} 
```

**参考：**

*   [http://elliotth.blogspot.com/2004/09/alternating-row-colors-in-jtable.html](http://elliotth.blogspot.com/2004/09/alternating-row-colors-in-jtable.html)
*   [带条纹背景的 JTable](https://stackoverflow.com/questions/3184975/jtable-with-striped-background)**

# .htaccess - 使用 htaccess 禁止文本文件中的 IP

> ID：13008242
> 
> 赞同：17
> 
> 时间：2012-10-22T09:18:13.210
> 
> 标签：.htaccess, ip, text-files, block

我阅读并了解如何使用 htaccess 阻止 ip：

```
order deny,allow
deny from 111.222.33.44
deny from 55.66.77.88
...
allow from all 
```

但我的黑 IP 列表包括数千个 IP。我将所有 IP 保存到**blacklist.txt**文件中。

我可以使用 htaccess 调用**blacklist.txt**并阻止存储在此文件中的所有 IP 吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-22T10:12:35.893

您可以尝试使用[RewriteMap](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritemap)的变体。您需要访问 server/vhost 配置，因为该指令仅在那里有效。然后，您可以在 htaccess 文件中使用地图。

假设您的**blacklist.txt**文件如下所示：

```
111.222.33.44  deny
55.66.77.88    deny
192.168.0.1    allow 
```

您可以像这样定义地图：

```
RewriteEngine On
RewriteMap access txt:/path/to/blacklist.txt 
```

然后在您的 htaccess 中，您可以调用地图：

```
RewriteEngine On 
RewriteCond ${access:%{REMOTE_ADDR}} deny [NC]
RewriteRule ^ - [L,F] 
```

该条件调用映射并检查远程地址是否映射到“拒绝”一词，如果是，则重写规则完全禁止访问。

如果您的**blacklist.txt**只是一个 IP 列表，并且您不想在每个 IP 之后添加“拒绝”，则需要调用程序映射类型并编写脚本，如下所示：

```
#!/bin/bash

while true
do
    read INPUT
    MATCH=`grep $INPUT /path/to/blacklist.txt`
    if [ -z "$MATCH"  ]; then
        echo "allow"
    else
        echo "deny"
    fi
done 
```

哪个无限循环读取输入并 greps **blacklist.txt**文件。如果IP在文件中，则输出“拒绝”，否则输出“允许”。然后你会像这样创建地图：

```
RewriteEngine On
RewriteMap access prg:/path/to/blacklist.txt 
```

并且检查地图的重写规则也没有什么不同。

# java - 基于 TimeZones 计算时间

> ID：13008245
> 
> 赞同：3
> 
> 时间：2012-10-22T09:18:18.847
> 
> 标签：java

当我在印度的本地服务器上运行时，我的代码会正确计算日期和时间，包括 dayLightSaving 时间。但是当我从美国服务器运行相同的代码时，我得到的时间比不遵守 DST 的 timeZoneId 提前一小时。

```
TimeZone tz = TimeZone.getTimeZone("America/Phoenix");
Date currTime = getDateByTZ(new Date(), tz);
System.out.println("currTime" + currTime);

public static Date getDateByTZ(Date d, TimeZone tz) throws Exception {

    if (tz == null) {
        tz = TimeZone.getDefault();
    }
    Integer tzOffSet = tz.getRawOffset();
    Integer tzDST = tz.getDSTSavings();
    Integer defOffSet = TimeZone.getDefault().getRawOffset();
    Integer defDST = TimeZone.getDefault().getDSTSavings();
    Calendar cal = Calendar.getInstance(tz);
    cal.setTime(d);
    if (tz.inDaylightTime(d)) {
        cal.add(Calendar.MILLISECOND, -defOffSet);
        cal.add(Calendar.MILLISECOND, -defDST);
        cal.add(Calendar.MILLISECOND, +tzOffSet);
        cal.add(Calendar.MILLISECOND, +tzDST);
    } else {
        cal.add(Calendar.MILLISECOND, -defOffSet);
        cal.add(Calendar.MILLISECOND, tzOffSet);
    }
    return cal.getTime();
} 
```

本地服务器的结果：

> 当前时间：2012 年 10 月 22 日星期一 01:52:21 IST

美国服务器的结果：

> 当前时间：2012 年 10 月 22 日星期一 02:52:21 IST

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:25:18.247

这段代码没有多大意义。不必转换 Date 对象即可在另一个时区中使用。它代表一个普遍的瞬间。

有意义的是在显示（或格式化为字符串）日期对象时使用时区。在这种情况下，您只需在 DateFormat 实例上设置时区，构成日期的通用时刻将被格式化，以便对给定时区有意义。

```
Date now = new Date(); // now, whatever the timezone is

DateFormat df = DateFormat.getDateTimeInstance();

df.setTimeZone(TimeZone.getDefault());
System.out.println("Now displayed in the default time zone : " + df.format(now));
df.setTimeZone(TimeZone.getTimeZone("America/New_York"));
System.out.println("Now displayed in the New York time zone : " + df.format(now)); 
```

# mysql - 按降序对一列进行排序，并按插入顺序检索另一列。MYSQL

> ID：13008246
> 
> 赞同：0
> 
> 时间：2012-10-22T09:18:23.710
> 
> 标签：mysql

我有下表。

```
comment    postid    userid            tempid

c1         199       100003052455644    89
c2         193       100003052455644    2
c4         199       100003052455644    82
c5         198       100003052455644    5
c6         199       1097517748         65 
```

现在我想以这样一种方式检索数据，即数据首先根据`postid`列按降序排列，然后按插入行的顺序排列。现在，当我检索 postid 按降序排列的值时，它给了我结果是这样的。

```
comment    postid    userid            tempid

c6         199       1097517748         65
c4         199       100003052455644    69
c1         199       100003052455644    82
c5         198       100003052455644    5
c2         193       100003052455644    2 
```

正如您所看到的，最后评论的用户 ID 出现在第一个位置。在postid 中。我也通过按降序`199`对列进行排序来解决这个问题。`tempid`但是有没有办法让我不使用 tempid 列，因为这个表将很快填满，自动增量列将很快填满，所以我将来会删除这个临时列。所以我认为这样做不是一个好主意，还有其他解决方案吗？

现在我正在使用以下查询，它给了我正确的结果。

```
 SELECT comments.comment,comments.postid,user.name,comments.userid,comments.tempid 
 FROM
  user
   INNER JOIN comments ON user.userid=comments.userid
   INNER JOIN posts ON posts.postID = comments.postid
 WHERE 
 comments.postid <=  
 (SELECT MAX(postid) FROM
   (
     SELECT wall.postid FROM wall,posts WHERE  
     wall.postid = posts.postid AND posts.userid=?
     ORDER BY wall.postid DESC LIMIT 10 OFFSET ?
   )sq1
 )

 AND
 comments.postid >= 
 (SELECT MIN(postid) FROM
  (
    SELECT wall.postid FROM wall,posts WHERE
    wall.postid = posts.postid AND posts.userid=?
    ORDER BY wall.postid DESC LIMIT 10 OFFSET ?
  )sq2
 ) 

 AND
 posts.userid = ? 
 ORDER BY comments.postid DESC,comments.tempid DESC; 
```

只有最后一行是我们关心的。我想在删除`comments.tempid DESC`子句的同时获得相同的结果。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:20:30.803

> 我想在删除 comments.tempid DESC 子句时获得相同的结果。是否可以？

是的。您可以添加另一个带有时间戳而不是整数的列。但是有可能两行会有相同的时间戳，所以这不是一个完美的解决方案。

> 但是有没有办法让我不使用 tempid 列，因为这个表会很快填满，而自动增量列会很快填满，所以我将来会删除这个 tempid 列。所以我认为它不是这样做是个好主意，还有其他解决方案吗？

自动增量列的类型可以是`bigint`。这对你来说就足够了。

**有关的**

*   [如果我需要一个非常大的自动增量 ID 怎么办？](https://stackoverflow.com/questions/5762327/mysql-what-if-i-need-a-very-very-big-autoincrement-id)

# javascript - 附加到 window.open()

> ID：13008249
> 
> 赞同：0
> 
> 时间：2012-10-22T09:18:27.283
> 
> 标签：javascript, jquery

我想打开具有确认功能的预览窗口，所以我想使用 window.open() 并在文档底部附加一些复选框。我认为应该是这样的

```
var w = window.open("http://mypage.aspx", "_parent", "width=800,height=800");
w.document.write("<input type='checkbox' id='IsConfirmed' />"); 
```

但这段代码不起作用......它不会加载`http://mypage.aspx`.

所以问题是如何加载“http://mypage.aspx”的内容并在页面底部附加复选框？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:23:53.803

考虑到这`http://mypage.aspx`是一个有效的页面路径，加载需要一些时间，因此在开始时直接使用文档可能不是一个好主意。这也可能是它似乎没有加载的原因。

```
var w = window.open("http://mypage.aspx", "_parent", "width=800,height=800");
w.onload = function(){this.document.body.innerHTML+="<input type='checkbox' id='IsConfirmed' />";}; 
```

在窗口上使用 onload 将确保您在页面完全加载后附加复选框......这将防止一些错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:27:10.483

[http://mypage.aspx](http://mypage.aspx)看起来不对...主机名在哪里？

好的..即使该请求有效..请求完成后，我认为变量 w 不再可用...您在不同的页面上，并且 javascript 变量不会通过我认为的位置更改而持续存在..

# iphone - ALAssetsLibrary 太慢 - Objective-C

> ID：13008251
> 
> 赞同：2
> 
> 时间：2012-10-22T09:18:30.560
> 
> 标签：iphone, objective-c, ios, alassetslibrary

从相机胶卷中加载 10-20 张全屏图像、保存照片的快速方法是什么？

我正在使用此代码，但要加载 10 张照片，我需要等待大约 5-10 秒。我用的是 iPhone 4S。

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
    if(_savedPhotos.count>=11) *stop = YES;
    [group enumerateAssetsWithOptions:NSEnumerationReverse usingBlock:^(ALAsset *result, NSUInteger index, BOOL *needToStop) {
        NSLog(@"%d",index);
        if(_savedPhotos.count<11)
        {
            UIImage *image = [UIImage imageWithCGImage:result.defaultRepresentation.fullScreenImage];
            [_savedPhotos addObject:image];
        }
        else
        {
            *needToStop = YES;
        }
    }];
} failureBlock:^(NSError *error) {
    NSLog(@"%@",error.description);
}]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T09:43:57.923

ALAssetsLibrary库将在*单独*的线程**上运行。**因此，与[UI](http://en.wiktionary.org/wiki/UI#Initialism)相关和其他内容进行通信可能需要时间。

 *所以**`-performSelectorOnMainThread:withObject:waitUntilDone:`**在 ALAssetsLibrary 块内使用。

***更改您的代码如下***

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
    [group enumerateAssetsWithOptions:NSEnumerationReverse usingBlock:^(ALAsset *result, NSUInteger index, BOOL *needToStop) {
            NSLog(@"%d",index);
            UIImage *image = [UIImage imageWithCGImage:result.defaultRepresentation.fullScreenImage];
            [self performSelectorOnMainThread:@selector(usePhotolibraryimage:) withObject:image waitUntilDone:NO];
        }];
    }

    failureBlock:^(NSError *error) {
           NSLog(@"%@",error.description);
    }];

- (void)usePhotolibraryimage:(UiImage *)myImage{

    //Do your all UI related and all stuff here
} 
```

**注意**：也看[这个问题](http://www.daveoncode.com/2011/10/15/solve-xcode-error-invalid-attempt-to-access-alassetprivate-past-the-lifetime-of-its-owning-alassetslibrary/)。*

# windows - 如何在 Golang 中执行一个简单的 Windows 命令？

> ID：13008255
> 
> 赞同：29
> 
> 时间：2012-10-22T09:18:41.873
> 
> 标签：windows, go, cmd

**如何运行一个简单的*Windows 命令*？**

这个命令：

```
exec.Command("del", "c:\\aaa.txt") 
```

.. 输出此消息：

> del: 在 %path% 中找不到可执行文件

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-22T14:26:29.277

我得到了和你一样的错误。但是dystroy是正确的：您无法运行`del`或内置任何其他命令，`cmd`因为没有`del.exe`文件（或任何其他del-executable）。

我得到了它的工作：

```
package main

import(
    "fmt"
    "os/exec"
)

func main(){    
    c := exec.Command("cmd", "/C", "del", "D:\\a.txt")

    if err := c.Run(); err != nil { 
        fmt.Println("Error: ", err)
    }   
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-22T09:36:58.367

您需要一个 Windows cmd 来执行您的`dir`命令。

试试这个 ：

```
cmd := exec.Command("cmd", "/C", "dir").Output() 
```

（抱歉，目前没有 Windows 计算机可以检查）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T14:47:13.557

也找到了另一个解决方案。创建一个包含以下内容的批处理文件：del c:\aaa.txt

然后像这样调用它：

```
exec.Command("c:\\del.bat").Run() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-01T13:59:11.207

如果您需要 cmd 的输出：

```
if c, err := exec.Command("cmd","/c","del","a.txt").CombinedOutput(); err != nil {
        log.Fatal(err)
    } else {
        fmt.Printf("%s\n", c)
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-21T08:15:40.207

好的，让我们看看，根据[文档](https://golang.org/pkg/os/exec/#Cmd.Run)，在 Windows 中，进程以单行字符串的形式接收命令并自己进行一些解析。Exec 的 Command 函数通过使用 CommandLineToArgvW 将所有参数组合在一起来构建命令字符串，尽管它是最常见的引用算法，但并不适用于每个应用程序。msiexec.exe 和 cmd.exe 等应用程序使用不兼容的取消引用算法，因此需要额外的努力。这是使用 powershell 的不同示例

```
package main

import (
        "os/exec"
        "fmt"
        "log"
        )
func main() {
     out, err := exec.Command("powershell","remove-item","aaa.txt").Output()
     if err != nil {
         log.Fatal(err)
     } else {
         fmt.Printf("%s",out)
     } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-17T01:26:43.390

您可以尝试使用 github.com/go-cmd/cmd 模块。
因为 golang 默认不能使用 syscall。

例子：

```
import (
    "fmt"
    "time"
    "github.com/go-cmd/cmd"
)

func main() {
    // Start a long-running process, capture stdout and stderr
    findCmd := cmd.NewCmd("find", "/", "--name", "needle")
    statusChan := findCmd.Start() // non-blocking

    ticker := time.NewTicker(2 * time.Second)

    // Print last line of stdout every 2s
    go func() {
        for range ticker.C {
            status := findCmd.Status()
            n := len(status.Stdout)
            fmt.Println(status.Stdout[n-1])
        }
    }()

    // Stop command after 1 hour
    go func() {
        <-time.After(1 * time.Hour)
        findCmd.Stop()
    }()

    // Check if command is done
    select {
    case finalStatus := <-statusChan:
        // done
    default:
        // no, still running
    }

    // Block waiting for command to exit, be stopped, or be killed
    finalStatus := <-statusChan
} 
```

# javascript - 检查是否使用javascript选择了动态创建的复选框

> ID：13008258
> 
> 赞同：0
> 
> 时间：2012-10-22T09:18:58.427
> 
> 标签：javascript, html

我有一个包含复选框的表格。每当单击按钮时，我都会向表格添加复选框，如下所示：

```
 var cell3 = row.insertCell(2);
    cell3.innerHTML = '<input type="checkBox" value=\"selected?\" style="cursor:pointer" value="htcb"/>'; 
```

如何确定是否选中了单元格 3 中的复选框？

我试过这个

```
var myCheckBox = row.cells[2].innerHTML;
   if(myCheckBox .checked == true)
      // 
```

但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:24:30.080

该`innerHTML`属性只是一个字符串，您需要访问 DOM 对象本身。

看到`<input>`是单元格中唯一的东西，这应该有效：

```
var myCheckBox = row.cells[2].firstChild;
if (myCheckBox.checked) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:27:40.547

js函数：

```
function check() {
     if($(this).is(”:checked”))
     {
         alert(’checked’);
     }
} 
```

你必须添加 onchange 监听器：

```
cell3.innerHTML = '<input type="checkBox" value=\"selected?\" 
               style="cursor:pointer"value="htcb" onchange="check()"/>'; 
```

# html - H 标记或图像替代文本对 SEO 更友好？

> ID：13008259
> 
> 赞同：0
> 
> 时间：2012-10-22T09:19:16.850
> 
> 标签：html, seo

我的网站上有一个重要的标题。
对于 SEO，哪种解决方案比其他解决方案更好？

1.  带有替代文字的图像`"my important title"`

2.  `"my important title"``h1`带标签的文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:20:24.460

h 标签更重要，并确保您在页面中仅使用一个 h1 标签

# css - cakephp 和表单 css

> ID：13008261
> 
> 赞同：0
> 
> 时间：2012-10-22T09:19:27.373
> 
> 标签：css, forms, cakephp

大家好，我正在尝试为我已经创建并在文件 css 中使用的网站创建一个移动网站。

1.  我正在尝试将输入框设置为屏幕高度的 10%。我怎样才能做到这一点？
2.  如何使登录按钮更高？

这是视图文件中的代码

```
<?php echo $this->Html->docType('xhtml-trans'); ?>
<html>

<head>
<style>
body {
background-color:#ADD8E6;
height: 960px;
width:  640px;
}

table, td, th
{   
    background-color: #ADD8E6;
}
input
{
    height:233%;
    width:70%;  
}
</style>
    <title> <?php echo $title_for_layout; ?></title>
    <?php echo $this->Html->css($stylesheet_used); ?>
</head>
<body>
<div id = "headertwo" style="background-image:url(<?php echo $this->webroot; ?>img/BannerGradient2.jpg);">
<center>    
<?php echo $this->Html->image($image_used, array(
    "alt" => "eBox",
    'url' => array('controller' => 'Users', 'action' => 'login'))) ?>
</center>
    </div>  
 <?php echo $this->Form->create('User', array('url' => array('controller' => 'users', 'action' => 'login')));?>
<table border=0 style="width:640px;">
    <tr>
    <td >Username:
    <?php echo $this->Form->input('username',array('label'=>false,));?></td>
    </tr>       
    <tr>    
        <td>Password: <?php echo $this->Form->input('password',array('label'=>false,));?></td>
    </tr>

    </table>
<?php echo $this->Form->end('Login', array('width'=>100));?>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:57:49.920

用户1393064，

您现在正在使用 XHTML Doctype，这对于在 Targeted Mobile Device 中取得良好结果来说并不是一个好习惯。

相反，我建议您尝试 HTML5 Doctype，如下所示...

> <!DOCTYPE html>

此外，对于移动支持，您需要添加 Viewport Meta

> <元名称=“视口”内容=“初始缩放= 1.0，用户可缩放=无”>

然后你为 INPUT 定义你的 CSS

> input { /* 把你的代码放在这里 */ }
> 
> input#submit { /* 把你的风格放在这里 */ }

我还建议您对目标移动设备和屏幕使用 CSS 媒体查询。

> @media 屏幕和（最大宽度：640px）{
> 
>    body{ /* 把你的风格放在这里 */ }
> 
>    form{ /* 把你的风格放在这里 */ }
> 
>    input{ /* 把你的风格放在这里 */ }
> 
>    input#submit{ /* 把你的风格放在这里 */ }
> 
> }

如需进一步帮助，您可以参考这篇文章[http://www.yourinspirationweb.com/en/tips-tricks-how-to-optimize-a-website-for-mobile-devices/](http://www.yourinspirationweb.com/en/tips-tricks-how-to-optimize-a-website-for-mobile-devices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:26:04.323

1.

```
input
{
    font-size:200%;
    width:70%;  
} 
```

没有考虑在输入中包含字体大小，因为我不认为它是文本，duhhh

# multithreading - 如何在 QT 中创建一个断言窗口

> ID：13008264
> 
> 赞同：0
> 
> 时间：2012-10-22T09:19:36.443
> 
> 标签：multithreading, user-interface, qt4, embedded, assert

我目前在 QT 中有一个运行时间很长的 GUI 应用程序。稍后，该应用程序将在没有全屏键盘的嵌入式设备上进行测试和运行。

为了更容易调试，我有一个自定义断言宏，它允许我忽略某些断言（可能包括我现在必须解决的已知错误部分）等。暂时我只是在控制台上打印一些东西，例如“断言：XXXX失败；中止/忽略”。当我在控制台中启动应用程序时这很好，但当我在最终设备上运行它时最终失败。在这种情况下，断言只会阻塞等待输入的主线程并使 GUI 严重挂起而没有恢复的希望。

现在我正在考虑如何补救这种情况。一个想法是让断言崩溃，就像标准断言一样。但我不太喜欢这个想法，因为有很多已知问题，而且我总是发现可忽略的断言在测试应用程序时非常有用。此外，我必须将消息放入单独的文件中，以便稍后查看测试时发生的情况。事后阅读这些文件是可能的，但我更喜欢更简单的方法来找出问题所在。

另一个想法是做一个窗口。然而，断言可以在任何线程中触发，我只能在 GUI 线程中创建新窗口。主事件循环也可能被断言阻塞，所以我不能确定它会正确处理事件。我会在一个单独的线程中以某种方式需要一个完全响应的独立窗口，它只处理几个按钮。

这在QT4中有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:21:25.607

您可以将事件发布到主线程以显示对话框并等待非 gui 线程的回答，或者如果当前线程是应用程序线程，则仅显示对话框

```
int result = -1;
if ( QTrhead::currentThread() == QCoreApplication::instance()->thread() )
{
    result = AssertHandler->ShowDialog(where, what, condition);
}
else
{
    QMetaObject::invokeMethod(AssertHandler, "ShowDialog", Qt::QueuedBlockingConnection, Q_RETURN_ARG(int, result), Q_ARG(QString, where), Q_ARG(QString, what), Q_ARG(QString, condition);
}

if (result != 0)
{
     // handle assert
} 
```

AssertHandler 是基于 QObject 的带有 slot 的类`int ShowDialog(const QString &where, const QString what, const QString &condition)`。它应该显示带有断言数据和按钮断言/忽略的对话框。当用户按下忽略时返回 0，否则返回非零值。

# python - 将邮件从 Imap 复制到 Gmail 并保持组织日期

> ID：13008267
> 
> 赞同：0
> 
> 时间：2012-10-22T09:19:40.500
> 
> 标签：python, date, imaplib

我正在编写一个脚本，通过 imap 将邮件从 imap 服务器移动到 gmail。

我得到它来复制邮件并创建标签，但是当我查看 gmail 时，它将日期设置为现在而不是原始日期。

```
# fetch header of current mail form old server to get date
result, header = From.uid('fetch', num, '(BODY[HEADER.FIELDS (DATE SUBJECT)])')
headerdic = headerparser.parsestr(header[0][1])

# add dobble qoutes around date
date = '"' + headerdic["Date"] + '"'

# get mail content
result, data = From.uid('fetch', num, '(RFC822)')
mgs = data[0][1]
# append mail to server
To.append(folder_name, None, date, mgs) 
```

我在[文档](http://docs.python.org/library/imaplib.html#imaplib.Time2Internaldate)中读到了 dobble qoutes 很重要，但它并没有起到任何作用。

## 更新

我发现以下解决方案有效

```
result, header = From.uid('fetch', num, '(BODY[HEADER.FIELDS (DATE SUBJECT)])')
headerdic = headerparser.parsestr(header[0][1])

pz = email.utils.parsedate_tz(headerdic["Date"])
stamp = email.utils.mktime_tz(pz)

date = imaplib.Time2Internaldate(stamp)

result, data = From.uid('fetch', num, '(RFC822)')
mgs = data[0][1]

To.append(folder_name, None, date, mgs) 
```

可能我之前有正确的解决方案，但我的邮件仍然在 gmail 的垃圾箱中，所以它只是重用了我没有发送日期的早期测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:41:17.430

尝试转义引号。`date = '\"' + headerdic["Date"] + '\"'`

# ruby-on-rails - 在rails中使用数组类型字段的问题

> ID：13008270
> 
> 赞同：0
> 
> 时间：2012-10-22T09:20:02.590
> 
> 标签：ruby-on-rails, ruby, yaml

表中可能有一组记录，其中只有两个字段逐个记录不同，其余字段保持不变。这需要通过外键关联按表拆分来进行规范化。但是，在 Ruby-on-Rails 中，这意味着创建模型。那么，是否仍然可以减少磁盘空间的使用？

可能是，因为在记录中存储一列的多个值将要求该列是任何类型的数组是合理的。但是将字段声明为 :array 类型会导致错误。那么，有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:20:02.590

生成模型后，打开模型文件。为每个字段插入一行。

> 序列化：field_name

但请确保您要序列化的字段应该是类型

> ：文本

或者

> ：细绳

如果它们不是这种原始数据类型，即另一种类型，例如

> ：约会时间

那么它会返回一个错误。

这一步整体上是不完整的。您需要做一个补充步骤：反序列化，因为在模型级存储中，它存储为以“---\n-”开头的字符串，不适合数组类型的操作。

从模型中读取数据时，您需要执行以下步骤：

> YAML.load(field_name)

其中 field_name 是指被序列化的字段。

上述步骤将返回一个数组，您可以在该数组上执行正常的数组操作。

# objective-c - iOS 6 ActivityViewController 自定义微博等

> ID：13008277
> 
> 赞同：4
> 
> 时间：2012-10-22T09:20:25.087
> 
> 标签：objective-c, ios6, uiactivityviewcontroller, weibo, sinaweibo

我想实现iOS6的新ActivityViewController，但我想摆脱那些未使用的活动，如消息、复制、微博分享等。

是否可以对其进行自定义或子类化以删除这些图标？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T09:54:42.760

好的，我自己找到了一个自定义 UIActivityViewController 的解决方案：

如果你想摆脱微博、脸书等分享选项......它非常简单，只需设置 ExcludedActivityTypes 属性：

```
UIActivityViewController *actionCtrl = [[UIActivityViewController alloc]initWithActivityItems:act applicationActivities:nil];

[actionCtrl setExcludedActivityTypes:@[UIActivityTypeAssignToContact, UIActivityTypeCopyToPasteboard, UIActivityTypeMail, UIActivityTypePostToWeibo]];
[self presentViewController:actionCtrl animated:YES completion:nil]; 
```

如果要添加另一个 Activity（按钮或图像等），则需要子类化 UIActivity 并覆盖一些方法，如 activityType 和 activityImage。

IE

```
- (UIImage *)activityImage {
    return [UIImage imageNamed:@"icon"];
} 
```

这对你们也有帮助！

# asp.net - 如何在不同的 Web 应用程序中重用网页

> ID：13008281
> 
> 赞同：1
> 
> 时间：2012-10-22T09:20:34.837
> 
> 标签：asp.net

我在 ASP.NET 4.0 中创建了两个 Web 解决方案，A 和 B。我在解决方案 A 中添加了一个数据输入 Web 表单 (DataEntery.aspx)，其中包含第三方用户控件和表单身份验证。

我想在解决方案 B 中重新使用网页**DataEntery.aspx**。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:24:36.737

您可以创建名为解决方案 C 的第三个 Web 应用程序，它将包含具有共享功能的用户控件。在解决方案 A 和 B 中添加对解决方案 C 的引用。

示例：[如何：使用 Visual Basic .NET 在应用程序之间共享 ASP.NET 页面和用户控件](http://support.microsoft.com/kb/825996)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:25:18.993

执行此操作的方法之一是将您的 DataEntry.aspx 和类后面的代码作为*链接*添加到您的项目。此外，您将需要添加逻辑以将 DataEntry.aspx 页面从它所在的共享目录复制到它添加到项目的目录。您可以通过在项目的 PreBuild 事件中编写命令行命令来执行此操作，或者创建具有以下内容的 CopyLinkedContentFiles.targets 文件：

```
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <BuildDependsOn>
            CopyLinkedContentFiles;
            $(BuildDependsOn);
        </BuildDependsOn>
    </PropertyGroup>

    <Target Name="CopyLinkedContentFiles">
        <!-- Remove any old copies of the files -->
        <Delete Condition=" '%(Content.Link)' != '' AND Exists('$(WebProjectOutputDir)\%(Content.Link)') "
                Files="$(WebProjectOutputDir)\%(Content.Link)" />
        <!-- Copy linked content files recursively to the project folder -->
        <Copy Condition=" '%(Content.Link)' != '' " SourceFiles="%(Content.Identity)"
              DestinationFiles="$(WebProjectOutputDir)\%(Content.Link)" />
    </Target>
</Project> 
```

然后将此目标包含到您的项目中，该项目将引用作为链接添加的页面。您可以通过将以下行添加到您的 Web 应用程序 csproj 文件中：

```
<Import Project="$(MSBuildProjectDirectory)\[RELATIVE PATH TO FILE]\CopyLinkedContentFiles.targets" /> 
```

例如，应在您的 csproj 文件中的此行之后添加此行：

```
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:22:46.710

最好的方法是创建一个包含您的网页的 dll。
您可以引用此 dll 来获取项目中包含的代码。

您可以使用`VirtualFile`该类加载嵌入在 dll 中的资源。这是一个例子

```
public class SVirtualFile : VirtualFile
{
    private string m_path;

    public SVirtualFile(string virtualPath)
        : base(virtualPath)
    {
        m_path = VirtualPathUtility.ToAppRelative(virtualPath);
    }

    public override System.IO.Stream Open()
    {
        var parts = m_path.Split('/');
        var assemblyName = parts[1];
        var resourceName = parts[2];

        assemblyName = Path.Combine(HttpRuntime.BinDirectory, assemblyName);
        var assembly = System.Reflection.Assembly.LoadFile(assemblyName + ".dll");

        if (assembly != null)
        {
            return assembly.GetManifestResourceStream(resourceName);
        }
        return null;
    }
} 
```

您需要挂钩到应用程序生命周期并注册一个[`VirtualPathProvider`](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx#Y2622)，以便 asp.net 知道您正在提供虚拟文件。

```
 public static class AppStart
  {
    public static void AppInitialize()
    {
      SVirtualPathProvider sampleProvider = new SVirtualPathProvider ();
      HostingEnvironment.RegisterVirtualPathProvider(sampleProvider);
    } 
  }

public class SVirtualPathProvider : VirtualPathProvider
{

    public SVirtualPathProvider() 
    { 

    }

    private bool IsEmbeddedResourcePath(string virtualPath)
    {
        var checkPath = VirtualPathUtility.ToAppRelative(virtualPath);
        return checkPath.StartsWith("~/Succeed.Web/", StringComparison.InvariantCultureIgnoreCase);
    }

    public override bool FileExists(string virtualPath)
    {
        return IsEmbeddedResourcePath(virtualPath) || base.FileExists(virtualPath);
    }

    public override VirtualFile GetFile(string virtualPath)
    {
        if (IsEmbeddedResourcePath(virtualPath))
        {
            return new SVirtualFile(virtualPath);
        }
        else
        {
            return base.GetFile(virtualPath);
        }
    }

    public override CacheDependency GetCacheDependency( string virtualPath, IEnumerable virtualPathDependencies, DateTime utcStart)
    {
        if (IsEmbeddedResourcePath(virtualPath))
        {
            return null;
        }
        else
        {
            return base.GetCacheDependency(virtualPath, virtualPathDependencies, utcStart);
        }
    }
} 
```

参考： [如何使用虚拟路径提供程序从虚拟路径动态加载和编译内容](http://support.microsoft.com/kb/910441)

# mvvm - 程序更改不会反映在淘汰视图模型中

> ID：13008283
> 
> 赞同：3
> 
> 时间：2012-10-22T09:20:37.750
> 
> 标签：mvvm, knockout.js

用 javascript 改变复选框的状态不符合 MVVM 的精神。但我正在创建一个通用的 javascript 库，以便更好地查看标准控件，如复选框、单选按钮或选择框。基于以下视图模型：

```
function MyViewModel() {
  var self = this;

  self.ok = ko.observable();

};

var vm = new MyViewModel();
ko.applyBindings(vm); 
```

但是当我以编程方式更改复选框的选中状态时，我遇到了与敲除有关的问题：

```
document.getElementById('chk').checked = true 
```

更改不会出现在 viewmodel 的属性中。但是当我单击复选框时一切正常。

看看[http://jsfiddle.net/KWdZB/1/](http://jsfiddle.net/KWdZB/1/)

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T10:04:39.997

您的问题是 ko 订阅了已[检查绑定](https://github.com/SteveSanderson/knockout/blob/master/src/binding/defaultBindings/checked.js)`click`中的事件：

```
ko.utils.registerEventHandler(element, "click", updateHandler); 
```

但是更改`checked`属性不会触发点击事件，所以不会通知 ko。

如果您在属性更改后手动触发点击事件，它可以工作......

我不知道如何使用纯 javascript 但使用 jQuery 你可以编写：

```
$('#chk').attr('checked', true).triggerHandler('click') 
```

你可以在这个中测试它[`JSFiddle`](http://jsfiddle.net/nemesv/ZtDCK/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:05:42.647

这是正常的，因为检查的绑定处理程序不订阅检查的更改事件，而是订阅单击事件处理程序（您可以在检查的绑定处理程序代码的源文件中查看）。

如果您需要通过单击更改值，则必须使用 ok 可观察值。

有HTML

```
<div>
    <input type="checkbox" id="chk" data-bind="checked: ok"/><br>
    <input type="button" id="btnCheck" value="Check" data-bind="click: Check"/>&nbsp;&nbsp;    
    <input type="button" id="btnUnCheck" value="Uncheck" data-bind="click:Uncheck"/> 
</div>
<div>
    Value: <span data-bind="text: ok"></span>    
</div> 
```

和 javascript ：

```
function MyViewModel() {
    var self = this;

    self.ok = ko.observable();

    self.Check = function(){
      self.ok(true);      
    }

    self.Uncheck = function(){
        self.ok(false);            
    }
};

vm = new MyViewModel();
ko.applyBindings(vm); 
```

​​您可以在这个[小提琴](http://jsfiddle.net/muadhib/Z9h7S/)中看到它。

# iphone - 如何在 iPhone 中创建全局协议方法？

> ID：13008284
> 
> 赞同：2
> 
> 时间：2012-10-22T09:20:37.847
> 
> 标签：iphone, ios6, protocols, global

我创建了一个协议方法，我想在多个类中实现协议方法

```
@protocol XMLProtocol <NSObject>

- (BOOL) hasAllRequiredAttributes :(NSDictionary*)attributeMap;

@end 
```

我使用了以下类方法

```
#import "XMLProtocol.h"
@interface MachineA : NSObject<XMLProtocol> 
```

及其实现方法我将实现协议方法

```
- (BOOL) hasAllRequiredAttributes:(NSDictionary *)attributeMap {
  return false;
  } 
```

而且我在另一个类中使用这个协议方法

```
#import "XMLProtocol.h"
@interface MachineB : NSObject<XMLProtocol> 
```

及其实现方法我将实现协议方法

```
- (BOOL) hasAllRequiredAttributes:(NSDictionary *)attributeMap {
  return false;
 } 
```

我的想法是我应该在哪里调用协议方法。我完全糊涂了。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:30:07.950

您可以为您的协议方法定义全局实现的一种方法（如果我正确理解您的要求）是在 NSObject 上定义一个类别：

```
@implementation NSObject (XMLProtocol)

- (BOOL) hasAllRequiredAttributes:(NSDictionary *)attributeMap {
   return false;
} 
```

通过这样做，**每个**对象都将具有该方法。不知道这是否明智，但这是一种方式。

另一种方法是定义一个`Machine`基类，从中派生`MachineA`和`MachineB`；协议方法将在基类中定义：

```
@interface Machine : NSObject <XMLProtocol>
   ...
@implementation Machine
- (BOOL) hasAllRequiredAttributes:(NSDictionary *)attributeMap {
   return false;
}
    ....
@end

@interface MachineA : Machine
 ... 
```

如果需要，任何派生类都可以重新定义它。

这不像 NSObject 类别那样“全局”，但如果您可以为所有需要实现该协议的类定义一个基类，它可能是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:25:48.720

您必须在两个类中编写方法的实现，即使实现相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:27:57.817

在您的特殊情况下，通知将对您有很大的帮助。通知的工作方式与协议相同，只是它广播消息。这样您就可以在多个课程中收到该电话。

如果您想使用协议来完成，这也很容易。只需确保您当前的视图控制器被委托引用（即 obj.delegate = self）。您可以在 -viewWillAppear 上实现它。所以你当前的视图控制器只会被那个方法调用。委托一次只会在一个地方调用一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:44:48.907

恕我直言，对于像 XML 解析这样特定的东西，全局协议并不是很好的设计。

A`@protocol`本身没有任何实现部分。它只是一个 API 定义，可以将其视为合同。任何符合协议的类都必须实现其强制方法和属性（有一个`@optional`子句）。

例如，您可能有两种 XML 解析器实现，一种适用于 iOS 4，另一种适用于 iOS 5+。两者都声明为符合`XMLProtocol`协议。并且*两者都实施* `- (BOOL) hasAllRequiredAttributes :(NSDictionary*)attributeMap;`，让我们想象他们需要以不同的方式实施它。

由于符合您的要求，`XMLProtocol`您不关心实施细节。您知道您将传递一个属性映射，并且您将获得一个布尔值，指示它是否具有所有必需的属性。

您在使用这些类的地方调用该方法：

```
id <XMLProcotol> parser;
if (iOS4) {
    parser = [[OldXMLParser alloc] initWithString:<#...#>];
} else {
    parser = [[NewXMLParser alloc] initWithString:<#...#>];
}
/* you call the method without caring which parser class
 * has been actually created thanks to the protocol
 */
if ([parser hasAllRequiredAttributes:theMap]) {
    ...
} 
```

如果方法的实现是相同的，您可以将这两个公共父类都作为实现公共方法的公共父类的子类，无论是否存在于协议中。

# c# - 向谷歌电子表格添加一行时出现异常

> ID：13008293
> 
> 赞同：4
> 
> 时间：2012-10-22T09:21:15.150
> 
> 标签：c#, google-drive-api, google-docs-api, google-spreadsheet-api, google-cloud-storage

我遵循了文档列表（用于创建电子表格）和电子表格（用于创建工作表和添加行）的整个 API。但是，我可以在创建电子表格后将工作表添加到电子表格中，但是当我尝试添加行时，出现错误异常：**请求执行失败：[https ://spreadsheets.google.com/feeds/list/ tj0pIc6qpEB2LtZY9mwfT-A/od6/private/full](https://spreadsheets.google.com/feeds/list/tj0pIc6qpEB2LtZY9mwfT-A/od6/private/full)**

我已经提到了所有 OAuth 范围和所需的凭据，但无法解决此异常。其余的工作都很好，比如创建谷歌电子表格和添加工作表。我只是复制粘贴谷歌代码。

```
 // setUp the confirguration for OAuth 2.0
        string clientID = "********.apps.googleusercontent.com";
        string clientSecret = "*******************";
        string scope = "https://docs.google.com/feeds/ https://docs.googleusercontent.com/ https://spreadsheets.google.com/feeds/";
        string redirectURI = "urn:***:wg:oauth:2.0:oob";

        // setup the OAuth 2.0 object
        OAuth2Parameters parameters = new OAuth2Parameters();   // to hold all the parameters
        parameters.ClientId = clientID; // setup the clientID
        parameters.ClientSecret = clientSecret;  // setup the clientSecret
        parameters.RedirectUri=redirectURI; // setup the redirectURI

        //setup the authurization URL
        parameters.Scope = scope; // set the scope

        string authorizationURL = OAuthUtil.CreateOAuth2AuthorizationUrl(parameters);
        Console.WriteLine(authorizationURL);
        Console.WriteLine("Please visit the URL above to authorize your OAuth " + "request token.  Once that is complete, type in your access code to "
    + "continue...");
        parameters.AccessCode = Console.ReadLine();

        // get the access token
        OAuthUtil.GetAccessToken(parameters);
        string accessToken = parameters.AccessToken;
        Console.WriteLine("Cosole Access token " + accessToken);

        //make Auth Request to Google
        GOAuth2RequestFactory factory = new GOAuth2RequestFactory(null, "SampleSpreadSheetApp-V1", parameters);
       // DocumentsService service = new DocumentsService("SampleSpreadSheetApp-V1");
        service.RequestFactory = factory;

        //---------------------------------------------------------------------
        GOAuth2RequestFactory requestFactory =
            new GOAuth2RequestFactory(null, "MySpreadsheetIntegration-v1", parameters);
        SpreadsheetsService service = new SpreadsheetsService("MySpreadsheetIntegration-v1");
        service.RequestFactory = requestFactory;

        SpreadsheetQuery query = new SpreadsheetQuery();
        SpreadsheetFeed feed = service.Query(query);

        if (feed.Entries.Count == 0)
        {
            Console.WriteLine("no spreadsheets present here");
        }

        // TODO: Choose a spreadsheet more intelligently based on your
        // app's needs.
        SpreadsheetEntry spreadsheet = (SpreadsheetEntry)feed.Entries[0];
        Console.WriteLine(spreadsheet.Title.Text);

        // Get the first worksheet of the first spreadsheet.
        // TODO: Choose a worksheet more intelligently based on your
        // app's needs.
        WorksheetFeed wsFeed = spreadsheet.Worksheets;
        WorksheetEntry worksheet = (WorksheetEntry)wsFeed.Entries[0];

        if (wsFeed.Entries.Count == 0)
        {
            Console.WriteLine("no worksheets present here");
        }

        // Define the URL to request the list feed of the worksheet.
        AtomLink listFeedLink = worksheet.Links.FindService(GDataSpreadsheetsNameTable.ListRel, null);

        // Fetch the list feed of the worksheet.
        ListQuery listQuery = new ListQuery(listFeedLink.HRef.ToString());
        ListFeed listFeed = service.Query(listQuery);

        // Create a local representation of the new row.
        ListEntry row = new ListEntry();
        row.Elements.Add(new ListEntry.Custom() { LocalName = "firstname", Value = "Joe" });
        row.Elements.Add(new ListEntry.Custom() { LocalName = "lastname", Value = "Smith" });
        row.Elements.Add(new ListEntry.Custom() { LocalName = "age", Value = "26" });
        row.Elements.Add(new ListEntry.Custom() { LocalName = "height", Value = "176" });

        // Send the new row to the API for insertion.
        service.Insert(listFeed, row); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T12:48:14.310

我也为此苦苦挣扎，我发现了以下内容：

每列都有一个在第一行中指定的名称。在 Google API 示例中，第一列是“名字”，它在现有工作表的单元格 A1 中指示。

当您添加行时（如您在上面粘贴的示例代码中），“LocalName”属性必须完全匹配。此外，API 会小写并从列名中删除空格（上帝知道为什么？？），因此如果您将列名定义为“名称”，API 会将其小写为“名称”并尝试与之匹配。因此，当您添加一行时，您需要在代码中定义小写的列名，没有空格。

为了安全起见，创建一个包含一列的工作表并将第一行单元格设置为“名称”。现在使用您的身份验证运行示例代码，并尝试添加只有一个条目的行，如下所示：

```
ListEntry row = new ListEntry();
row.Elements.Add(new ListEntry.Custom() { LocalName = "name", Value = "John" }); 
```

这行不通

```
row.Elements.Add(new ListEntry.Custom() { LocalName = "Name", Value = "John" }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-10T04:53:35.230

您需要首先创建/确保工作表的标题行：

```
 CellQuery cellQuery = new CellQuery(worksheet.CellFeedLink);
        CellFeed cellFeed = service.Query(cellQuery);

        CellEntry cellEntry = new CellEntry(1, 1, "firstname");
        cellFeed.Insert(cellEntry);
        cellEntry = new CellEntry(1, 2, "lastname");
        cellFeed.Insert(cellEntry);
        cellEntry = new CellEntry(1, 3, "age");
        cellFeed.Insert(cellEntry);
        cellEntry = new CellEntry(1, 4, "height");
        cellFeed.Insert(cellEntry); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T18:42:35.057

经过几个小时的努力，我发现 Google API 似乎有一个错误。如果工作表底部有空白行，则添加一行可以正常工作，并且 API 会返回适当的响应。但是，如果工作表底部没有空白行，则您的数据已正确正确地添加到工作表底部的新行中，但 Google 仍会返回 HTTP 400 错误，其中包含文本“空白行不能书面。”
您可以通过捕获错误、检查错误是否属于“空白行”种类来解决此错误，如果是，则使用 listfeed 查询来检索您刚刚添加的行。如果该查询成功，则新行已正确添加并且可以忽略 400 错误。
我会给你我的代码，但我正在使用 PHP，所以可能没有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T18:37:20.850

如文档中所述，列表提要对数据在电子表格中的布局方式做出了一些假设。特别是，列表提要将工作表的第一行视为标题行：

[https://developers.google.com/google-apps/spreadsheets/#working_with_list-based_feeds](https://developers.google.com/google-apps/spreadsheets/#working_with_list-based_feeds)

在您的代码中，您尝试添加具有四个值的行：名字、姓氏、年龄和身高。如果工作表的第一行没有定义这些标题，您的请求将无效并且您的代码会引发异常。

请确保您的代码与电子表格的结构相匹配，或者如果您需要动态确定标题行的内容，请使用单元格提要。

# resize - FullCalendar 和 Flot 调整大小冲突

> ID：13008294
> 
> 赞同：0
> 
> 时间：2012-10-22T09:21:16.980
> 
> 标签：resize, fullcalendar, flot

我已经成功地将 Flot 线图和 FullCalendar 实例集成到我的站点中。它们都在不同的页面上（尽管这些页面是通过 AJAX 加载到 div 中的）。

我添加了 Flot Resize 插件，效果很好，可以按预期重新调整折线图的大小。但是，调整日历大小时似乎会导致错误。

即使我先加载日历页面，当我调整窗口大小时，我也会在控制台中收到此错误（此外，日历没有正确调整大小）：

```
TypeError: 'undefined' is not an object (evaluating 'r.w=o!==c?o:q.width()') 
```

我正在努力找出错误的来源，所以我删除了指向 Flot Resize JS 的链接并再次尝试。当然折线图不会调整大小，但是在调整日历大小时，它可以正常工作。

两个元素的 div 容器具有不同的名称，并且从函数内部调用 resize 函数以绘制折线图（根据需要）。

我尝试将指向 Flot Resize 插件的链接移动到不同的位置（即在 fullCalendar JS 上方/下方，移动到保存图表的模板中），但都无济于事。

有谁知道冲突可能在哪里以及我如何解决它？

非常感谢！

编辑：在全日历页面之后加载折线图（浮点）页面时，即使没有调整窗口大小，似乎也会触发错误......现在我很困惑！

编辑2：绘制折线图的代码。该函数在页面加载时调用，并从从服务器拉出的 JSON 接收数据。加载图表时，我仍然收到有关 shutdown() 未定义的错误。

```
function plotLineGraph(theData){
var myData = theData['data'];
var myEvents = theData['events'];
var myDates = theData['dates'];

var events = new Array();
for (var i=0; i<myEvents.length; i++) {
    events.push(
        {
            min: myEvents[i][0],
            max: myEvents[i][1],
            eventType: "Calendar Entry",
            title: myEvents[i][2],
            description:  myEvents[i][3]
        }

    );
}

  function showTooltip(x, y, contents) {
    $('<div id="tooltip">' + contents + '</div>').css( {
        position: 'absolute',
        display: 'none',
        top: y + 5,
        left: x + 5,
        border: '1px solid #fdd',
        padding: '2px',
        'background-color': 'black',
        opacity: 0.80
    }).appendTo("body").fadeIn(200);
}

 var previousPoint = null;
$("#placeholder").bind("plothover", function (event, pos, item) {
    $("#x").text(pos.x.toFixed(2));
    $("#y").text(pos.y.toFixed(2));

    if ($("#enableTooltip:checked").length == 0) {
        if (item) {
            if (previousPoint != item.dataIndex) {
                previousPoint = item.dataIndex;

                $("#tooltip").remove();
                var x = item.datapoint[0].toFixed(2),
                    y = item.datapoint[1].toFixed(2);

                if(item.series.label != null){
                showTooltip(item.pageX, item.pageY,
                            item.series.label + " of " + y);
                }
            }
        }
        else {
            $("#tooltip").remove();
            previousPoint = null;            
        }
    }
});

var d1 = [
          myData[0],  myData[1],  myData[2],  myData[3],  myData[4],
          myData[5],  myData[6],  myData[7],  myData[8],  myData[9],
          myData[10], myData[11], myData[12], myData[13], myData[14],
          myData[15], myData[16], myData[17], myData[18], myData[19],
          myData[20], myData[21], myData[22], myData[23], myData[24],
          myData[25], myData[26], myData[27], myData[28], myData[29]
          ];
var markings = [
    { color: '#FFBDC1', yaxis: { from: 0, to: 2 } },
    { color: '#F2E2C7', yaxis: { from: 2, to: 3.5 } },
    { color: '#B6F2B7', yaxis: { from: 3.5, to: 5 } }
];

$.plot($("#placeholder"), [
    {label: "Average Daily Rating", data: d1, color: "black"}
    ], {
        events: {
            data: events,
        },
        series: {
            lines: { show: true },
            points: { show: true }
        },
        legend: { show: true, container: '#legend-holder' },
        xaxis: {
            ticks:[
            myDates[0],  myDates[1],  myDates[2],  myDates[3],  myDates[4],
            myDates[5],  myDates[6],  myDates[7],  myDates[8],  myDates[9],
            myDates[10], myDates[11], myDates[12], myDates[13], myDates[14],
            myDates[15], myDates[16], myDates[17], myDates[18], myDates[19],
            myDates[20], myDates[21], myDates[22], myDates[23], myDates[24],
            myDates[25], myDates[26], myDates[27], myDates[28], myDates[29]
            ],
        },
        yaxis: {
            ticks: 5,
            min: 0,
            max: 5
        },
        grid: {
            backgroundColor: { colors: ["#fff", "#eee"] },
            hoverable: true,
            clickable: true,
            markings: markings
        },
        selection: {
            color: 'white',
            mode: 'x'
        },
});
$('#placeholder').resize();
$('#placeholder').shutdown();
} 
```

编辑 3：

日历是这样调用的：

```
 function showCalendar() {
  var date = new Date();
var d = date.getDate();
var m = date.getMonth();
var y = date.getFullYear();

$('#fullcalendar').fullCalendar({
    header: {
        left: 'prev',
        center: 'title',
        right: 'next'
    },
    clickable: true,
    firstDay: 1,
    eventSources: [
        {
            url: '/populate-calendar/{{theProductUuid}}/',
            color: 'black',
            data: {
                text: 'text'
            }
        }
    ],
    eventClick: function(calEvent, jsEvent, view) {
        var startDate = $.fullCalendar.formatDate(calEvent.start, 'yyyy-MM-dd');
        var endDate = $.fullCalendar.formatDate(calEvent.end, 'yyyy-MM-dd');
        var eventId = calEvent.uuid;
        $('#modal-event-title').text(calEvent.title);
        $('#edit-event-name').val(calEvent.title);
        $('#edit-start-date').val(startDate);
        $('#edit-end-date').val(endDate);
        $('#edit-event-text').val(calEvent.text);
        $('#edit-event-btn').attr('data-uuid', eventId);
        $('#modal-edit-event').on('click', '#delete-btn', function(){
            deleteCalendarEvent(eventId);
        });
        $('#modal-edit-event').modal();
        },
});

} 
```

加载包含浮动图表的页面的 AJAX：

```
function loadDetailedReports(uuid){
$('#product-content').fadeOut('slow', function(){
    $('#product-content').empty();
    $('#whole-product-sub-nav .active').removeClass('active');
    $('#detailed-reports-content').load('/detailed-reports/' + uuid + '/', function(){
        $('#detailed-reports-btn').addClass('active');
        $('#detailed-reports-content').fadeIn('slow', function(){
            if (authorized){
                setLocationHash('loadDetailedReports&' + uuid);
                getChartData(uuid);
            } else {
            setLocationHash('');
            }
        });
    });
});
} 
```

和 AJAX 加载包含日历的页面：

```
function loadCalendar(uuid){
$('#detailed-reports-content').empty().hide();
$('#product-content').fadeOut('slow', function(){
    $('#whole-product-sub-nav .active').removeClass('active');
    $('#product-content').load('/calendar/' + uuid + '/', function(){
        $('#calendar-btn').addClass('active');
        $('#product-content').fadeIn('slow', function(){
            if (authorized){
                setLocationHash('loadCalendar&' + uuid);
            } else {
                setLocationHash('');
            }
            showCalendar();
        });
    });
});
} 
```

对 .resize 和 .shutdown 的调用在那里是因为我的印象是它们是实现调整大小功能所必需的，并且响应您之前关于关机的评论......它们很可能是 n00b 错误...... ……？！？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:27:30.663

看起来这是在 jquery-resize 的第 198 行触发的：

```
data.w = w !== undefined ? w : elem.width(); 
```

这听起来像是一种竞争条件，源于您将不同内容加载到同一个 div 中的方式。Flot 将 resize 事件绑定到图表 div，并且只有在绘图被彻底销毁时才取消绑定。

编辑：查看您的代码，我的第一个建议是摆脱 plotLineGraph 末尾的调整大小和关闭调用。调整大小插件不需要任何设置；它连接到 Flot 以自动附加到任何新地块。因此，您对 resize 的调用实际上是对 jQuery 的 resize 事件触发器，这可能是导致错误的原因。

编辑＃2：我仍然不清楚您的结构，但概括地说：您可能要摆脱#placeholder（通过清空其父级或类似的东西）的任何地方，您都应该首先在绘图对象上调用shutdown。如果您不保留对它的引用，则可以这样做：`$("#placeholder").data("plot").shutdown();`但是必须考虑到在创建第一个图之前它是未定义的事实。

如果这仍然不起作用，我需要查看一个实时（简化）示例以提出任何进一步的建议。

# c# - 在递归生成器方法中（通过转换为状态机）摆脱“屈服”的最简单方法？

> ID：13008295
> 
> 赞同：4
> 
> 时间：2012-10-22T09:21:20.750
> 
> 标签：c#, state-machine, yield-return

我编写了一段漂亮、优雅 (IMO) 的代码，我想移植到其他语言，如 C++、Java 等。

我面临的问题是双重的：

*   代码使用`yield`
*   代码高度递归

手动摆脱`yield`是*可能的*，但*非常乏味*——这个过程非常机械化，显然是可自动化的。
同时，C# 编译器将其转换成的状态机*非常丑陋*——它实际上无法用于移植。（我试过反编译它；它只是不可读。）

我想知道，除了花几天时间手动摆脱之外，我还有其他选择`yield`吗？
或者是否有某种工具可以将`yield`块转换为（可读）状态机，然后我可以像普通代码一样移植？

* * *

如果你好奇我所说的“高度递归”是什么意思——下面的代码基本上是代码的结构（实际只有大约 66 行；它不是一个非常长的函数）：

```
static IEnumerable<ReturnType> MyRecursiveYielder(args)
{
    if (blah1) yield return foo;
    else if (blah2)
        foreach (var foo1 in foo2.Blah())
            foreach (var item in MyRecursiveYielder(moreArgs))
                yield return item;
    else
    {
        var state = new State();
        foreach (var item in blah)
            foreach (var item2 in MyRecursiveYielder(otherArgs))
                foreach (var item3 in blah3)
                {
                    foreach (var result in MyRecursiveYielder(yetMoreArgs)))
                        yield return result;
                    foobar1();
                }
        while (condition)
            foreach (var foo in blah)
                foreach (var result in MyRecursiveYielder(argh)))
                {
                    if (condition2)
                        foreach (var result in MyRecursiveYielder(almostThere)))
                            yield return result;
                    foobar2();
                }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:51:37.610

yield 完成的工作接近于协同程序。您应该能够移植到支持这些的语言。不幸的是，很少有语言可以做到。我相信艾达有他们。

下一步是纤维。Win32 API 暴露了纤程，因此对于 C++ 来说，这可能是一种选择。我认为不适用于Java。

所以，简短的回答：调查你的目标平台的协程或纤程的可用性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:27:44.333

我想我找到了一个解决方案：我可以在大多数情况下使用 LINQ。这样我就不需要`yield`在前几个案例中做任何事情，因为这些案例不是有状态的。

有状态的收益——即最后一个——是问题所在——但在睡了之后，我意识到我的“有状态”`yield`代码基本上只是树搜索（准确地说是广度优先搜索）。基本上喜欢[这段](http://weblogs.asp.net/marianor/archive/2011/03/21/recursively-traversing-ienumerable-lt-t-gt.aspx)代码。

所以我可以简单地创建我自己的`IEnumerable<T>`执行广度优先搜索的类——即，给定一个传递函数`(T parenet) => (IEnumerable<T> children)`，它会一个接一个地输出孩子，并继续搜索，直到一个都没有。

如果这样行得通，那将摆脱*所有*的`yield`s，同时保持代码结构基本相同——使其更具可读性和更容易移植。

# objective-c - IOS：如何在 iPad 上制作左侧标签栏

> ID：13008296
> 
> 赞同：4
> 
> 时间：2012-10-22T09:21:30.703
> 
> 标签：objective-c, ios, ipad

![在此处输入图像描述](../Images/7c3819f9516095264bd309206446c8ac.png)

![在此处输入图像描述](../Images/3c9ca546d9d3e3b79b817930de64563e.png)

我已经看到许多应用程序在左侧创建了一个侧边栏，如上图所示。显然这不是一个拆分视图控制器，因为它的大小是固定的。

有人知道该怎么做吗？我可以得到一些关于这方面的指导或建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T00:25:51.657

[在本教程](http://www.scott-sherwood.com/ios-5-creating-a-custom-side-tabbar-using-storyboards-and-custom-segues/)中展示了如何实现那种“自定义侧标签栏”，他也做了一个关于它的视频。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T09:26:04.393

这可以简单地通过在主视图中添加`UIView`一个“垂直”框架来完成，例如 (0, 0, 44, screenHeight)。然后应该用您需要的所有图标填充该视图...

就我所见，没有什么比这更重要的了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T09:27:49.767

您不能使用 iOS 中的默认 UITabBarController。你需要做你的自定义标签栏。您可以使用带有一些 UIButtons 添加为子视图的 UIView。

# jsp - 如何在 JSTL 中检查 isNumeric / isNumber？

> ID：13008298
> 
> 赞同：7
> 
> 时间：2012-10-22T09:21:37.600
> 
> 标签：jsp, jstl, el, isnumeric

如何在 JSTL 中进行这个简单的检查（不扩展任何 Java 类和额外的 JSP 函数）。我需要这样的：

```
<c:if test="${fn:isNumeric()}">
    // do something
</c:if> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T21:34:54.623

如果您的环境支持在 EL 对象上调用非 getter 方法的新 EL 2.2 功能（在所有 Servlet 3.0 兼容容器中可用，例如 Tomcat 7、Glassfish 3 等），那么您可以[`String#matches()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)直接在 EL 中使用该方法.

```
<c:set var="numberAsString">${someExpressionToTestForNumber}</c:set>
<c:if test="${numberAsString.matches('[0-9]+')}">
    It's a number!
</c:if> 
```

*（我将把减号`-`、千位和分数分隔符`,`和`.`外部考虑作为可能出现在技术上有效的数字中的字符）*

请注意，其*主体*`<c:set>`中的with 表达式将任何类型隐式转换为using 。否则，非类型的调用将失败。*`String``String#valueOf()``matches()``<c:if>``String`*

 ** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T15:42:12.847

如果你真的坚持

> （不扩展任何 java 类和额外的 JSP 函数）

那么您可以使用以下技巧。

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<c:set var="x" value="8" />
<c:catch var="isNumber">
   <c:set var="x" value="${x * 1}" />
</c:catch>
<c:if test="${isNumber == null}">
    ... do something ...
</c:if>
<c:if test="${isNumber != null}">
      ... do not do anything...
</c:if> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T15:10:02.547

您可以按照以下教程中的说明创建自定义函数：

1.  [使用 JSTL 在 JSP 中创建自定义函数](http://anshulsood2006.blogspot.in/2012/03/creating-custom-functions-in-jsp-using.html)
2.  [如何为 JSTL 创建自定义函数](http://www.noppanit.com/how-to-create-a-custom-function-for-jstl/)
3.  [另一个教程](http://www.javaworld.com/javaworld/jw-05-2003/jw-0523-calltag.html?page=2)

* * *

**从上述链接创建函数的步骤：**

1.  在下面创建一个`.tld`文件`/WEB-INF`：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <taglib version="2.1" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd">
         <tlib-version>1.0</tlib-version>
         <short-name>functionalTlds</short-name>
         <uri>http://www.rasabihari.com/functionalTlds</uri>
         <function>
             <name>isNumeric</name>
             <function-class>com.expressions.Functions</function-class>
             <function-signature>boolean isNumeric(java.lang.String)</function-signature>
         </function>
    </taglib> 
    ```

2.  用方法创建一个类（方法的逻辑取自[这里](http://www.zparacha.com/best-way-to-check-if-a-java-string-is-a-number/#.UIVZe0b9di0 "检查Java字符串是否为数字的最佳方法")，它使用[正则表达式](https://stackoverflow.com/tags/regex/info "StackOverflow 标签维基：正则表达式")）

    ```
    package com.expressions;

    /**
      *
      * @author rasabihari
      */
    public class Functions {
        public static boolean isNumeric(String number) {  
            boolean isValid = false;  
            /*
            Explaination: 
            [-+]?: Can have an optional - or + sign at the beginning. 
            [0-9]*: Can have any numbers of digits between 0 and 9 
            \\.? : the digits may have an optional decimal point. 
            [0-9]+$: The string must have a digit at the end. 
            If you want to consider x. as a valid number change  
            the expression as follows. (but I treat this as an invalid number.). 
            String expression = "[-+]?[0-9]*\\.?[0-9\\.]+$"; 
            */  

            String expression = "[-+]?[0-9]*\\.?[0-9]+$";  
            CharSequence inputStr = number;  
            Pattern pattern = Pattern.compile(expression);  
            Matcher matcher = pattern.matcher(inputStr);  

            if(matcher.matches()){  
                isValid = true;  
            }

            return isValid;  
        }
    } 
    ```

3.  然后在 JSP 中使用它作为：

    ```
    <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
    <%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
    <%@taglib uri="http://www.rasabihari.com/functionalTlds" prefix="ftld" %>
    <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <c:if test="${ftld:isNumeric('123')}">
           <!-- ... do something ...
               This block will run
            -->
        </c:if>
    </body>
    </html> 
    ```*

# c++ - 如何在 C++ 中对包含动态数组的结构数组进行排序？

> ID：13008300
> 
> 赞同：0
> 
> 时间：2012-10-22T09:21:42.450
> 
> 标签：c++, algorithm, sorting, struct

这是我的结构：

```
struct animal
{
    int position;
    int** shape;
    int rows, cols;
    int force;
    int minSafety;
    void init(int r,int c,int k, int t, int p)
    {
        shape = new int*[r];
        for(int i = 0; i < r; i++)
        {
            shape[i] = new int[c];
        }
        rows = r;
        cols = c;
        force = k;
        minSafety = t;
        position = p;
    }
    ~animal()
    {
        for(int i = 0; i < rows; i++)
        {
            delete[] shape[i];
        }
        delete[] shape;
    }
}; 
```

我有一个这样的结构数组，我想通过“力”按升序对该数组进行排序。这是我的数组和谓词函数，用于从 STL 传递给“排序”函数。

```
bool sortByForce(animal& animal1, animal& animal2)
{
    return animal1.force !=  animal2.force ?
        animal1.force < animal2.force : animal1.rows * animal1.cols > animal2.rows * animal2.cols;
}
animal* animals = new animal[P];
//sort(animals, animals+P, &sortByForce); 
```

当我取消注释排序功能时，代码会中断。我认为这是因为结构内部的动态数组。（它实际上对数组进行了排序，但“形状”数组在结构之外被破坏了。）谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:36:12.840

您的析构函数正在临时对象上调用：

```
animal a;
a.init(...);
{
    animal tmp = a;
} // tmp destructor called, frees memory belonging to a 
```

您需要通过[编写](https://stackoverflow.com/questions/4782757/rule-of-three-becomes-rule-of-five-with-c11)复制构造函数、移动构造函数、复制赋值操作符和移动赋值操作符，或者替换`shape`为托管容器（例如`std::vector<std::vector<int>>`.

# c - “没有这样的文件或目录”错误后如何停止（在makefile中）？

> ID：13008303
> 
> 赞同：4
> 
> 时间：2012-10-22T09:21:59.487
> 
> 标签：c, gcc, makefile

因此，大多数时候，我在测试给定 C/C++ 代码上的每个包含是否正确，我有一个带有 gcc/g++ 调用的生成文件，并带有适当的 -I 选项，用于在特定目录（如每个程序）上搜索头文件时我正在将源代码**编译**到标题中。

但是，如果包含的目录不正确并且出现了未定义的标头（例如 foo.h 有 #include 并且未找到），gcc/g++ 将为我拥有的该 foo.h 标头的每个包含吐出一堆错误对于我之后编译的所有其他来源（并且我已经在使用 -Werror -Wfatal-errors 使 gcc/g++ 停止）。

所以，我的问题很简单：如何在它找到“没有这样的文件或目录”类型的第一个错误之后告诉 makefile 停止？它继续编译源代码和源代码真的很烦人，仅仅因为我已经理解的重复错误就给了我数百个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:29:43.353

它可能会继续，因为你告诉它。请参阅 GNU make 的以下两个选项：

```
-k, --keep-going          Keep going when some targets can't be made.
-S, --no-keep-going, --stop
                          Turns off -k. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T09:32:45.827

将头文件放入变量中并将该变量用作依赖项。在指定的标头存在之前，以下代码段不会构建任何内容。

```
HEADERS=test.h other.h /usr/include/special.h

all: $(HEADERS) $(BINPROGS)

[... all other rules go here as usual ...]

*.h:
    echo found $@ 
```

“.h:”只是打印出在任何建筑物开始之前找到的每个标题。如果找不到头文件，makefile 本身就会停止（它**会**在尝试编译任何东西之前停止）。

我相信这就是你想要的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:26:56.723

您可以在运行 make 脚本之前编写一个 shell 脚本来检查错误情况。

# qt - 如何在 QTableWidget 中更改 QWidget 的颜色

> ID：13008308
> 
> 赞同：0
> 
> 时间：2012-10-22T09:22:11.263
> 
> 标签：qt, colors, paint, qwidget, qslider

我有一个 QTableWidget。在它的单元格中，我需要显示三态 QSlider，它们必须根据它们的状态改变它们的颜色。-1 = 红色，0 - 正常，1 - 绿色。我试图将 QPalette 设置为 QSlider - 没有成功。我试图将 QSlider 放入带有布局的 QWidget 并将调色板应用于 QWidget - 没有成功。怎么做？我需要任何颜色标志（边框或全背景等） 怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:45:01.297

你可以使用`QItemDelegate`，然后你就可以统治你的`QSlider`into `QTableWidget`。

细节。

首先，您应该从`QItemDelegate`. 一个好的文档`doc.qt.digia` [使用 qitemdelegate 举例说明](http://doc.qt.digia.com/4.4/itemviews-spinboxdelegate.html)

您应该替换`QSpinBox`为`QSlider`. 阅读本文档后，您可以根据需要为您的`QSlider`.

```
QTableWidget *table = new QTableWidget(this);
table->setItemDelegateForColumn(index_column, delegate);
// or table->setItemDelegateForRow(index_row, delegate);
// or table->setItemDelegate(delegate); 
```

To`editor`总是打开的，你应该使用`openPersistentEditor()`. 例如：

```
QTableWidgetItem *item = new QTableWidgetItem;
table->insertRow(row);
table->setItem(row, index_your_delegate, item);
table->openPersistentEditor(item); 
```

# android - Android IME 退格（删除）就像硬件后退键一样

> ID：13008316
> 
> 赞同：1
> 
> 时间：2012-10-22T09:22:49.480
> 
> 标签：android, events

如果我按软键盘 BACKSPACE 键，我的应用程序的行为就像我按了硬件 BACK 键一样。我注意到当我按下软键盘删除键时我的 onKeyDown() 被调用。这只发生在android 4.0上。在安卓 2.2 上。一切正常。

有谁知道如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:17:33.760

当用户按下软键盘上的删除按钮时，我没有找到如何避免调用该`onKeyDown()`方法，但我设法找到了有效的解决方案。我改变了`onKeyDown()`方法，如果 keyCode 是，她什么都不做`KEYCODE_DEL`

```
 public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(keyCode==KeyEvent.KEYCODE_DEL){
        return true;
    }
    else{
    Boolean result = overlayManager.onKeyDown();
    if (result) {
        return true;
    } else {
        return super.onKeyDown(keyCode, event);
    }
    }
} 
```

# objective-c - 是否可以将 Setter/Getter 与 Objective-C 属性中的数据解耦？

> ID：13008318
> 
> 赞同：1
> 
> 时间：2012-10-22T09:22:55.637
> 
> 标签：objective-c, properties

我了解 Objective-C 中的属性允许我们紧凑地定义：

1.  二传手
2.  吸气剂
3.  数据

我想使用属性，但如果我可以将数据与 getter/setter 分离，那就太好了。

换句话说，我喜欢 Properties 的**getter/setter 接口**，但我想定义自己**的 data 内部表示**。

例如，如果我要定义 MyOwnTime 类，我想要获取小时、日期和分钟等属性的获取器/设置器（作为消费者，我希望能够设置并获取它们）。但是，为了节省表示中的内存，而不是存储日期、月份、年份、小时、分钟、秒等......，我更喜欢将 secondsSinceEpoch 存储为无符号长整数。

*在我的情况下，我应该/我可以使用属性吗？我该怎么做？或者我应该手动滚动我自己的 setter 和 getter？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:27:50.000

你当然可以做到这一点。确实，这很常见。由于映射到数据不是直接的，因此您无法合成方法，您必须手动编写 getter 和 setter。但是该属性将像其他任何属性一样工作。

作为一个简单的虚拟示例：

```
@interface BytePair
{
    UInt16 data;
}

@property UInt8 loByte;
@property UInt8 hiByte;
@end

@implementation BytePair

- (UInt8) loByte
{
    return (UInt8) data & 0xff;
}

- (void) setLoByte:(UInt8)lo
{
    data = (data & 0xff00) | lo;
}

- (UInt8) hiByte
{
    return (UInt8) (data & 0xff00) >> 8;
}

- (void) setHiByte:(UInt8)lo
{
    data = (data & 0xff) | (lo << 8);
}

@end 
```

管他呢。你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:37:55.333

当然可以 ：

```
@interface MyObject : NSObject
{
  int toto;
}

@property(nonatomic, setter=mySetterMethod:, getter=myGetterMethod) int toto;

-(void) mySetterMethod:(int) t;
-(void) myGetterMethod; 
```

或者您也可以覆盖 setter 和 getter 默认方法，在我的情况下（在 .m 文件中）：

```
-(int) toto
{
  return toto;
}

-(void) setToto:(int) t
{
  toto = t;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:40:24.210

声明一个

```
@property (nonatomic, assign) sometype somename 
```

在界面中正常。然后代替写作

```
@sythesize somename = _somename 
```

在实现中，你写

```
-(sometype)somename {
    return whatever;
}

-(void)setSomename(sometype)newValue {
    whatever;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:44:56.617

您根本不需要使用 @property 表示法。只需这样做：

```
@interface MyObject

- (id)foo;
- (void)setFoo:(id)newFoo;

@end 
```

然后，你可以在其他地方做`myObject.foo = @"bar";`.

调用与or`myObject.foo`完全相同。它与属性无关，只是碰巧最常用于它们。`[myObject foo]``[myObject setFoo:foo]`

`@property`语法只是声明属性的一种正式方式，允许您执行更高级的操作（例如）`nonatomic`。如果您要定义自己的方法，而不是让编译器为您定义它们，那么使用`@property`.

如果您禁用了 ARC，那么您可能想研究如何正确地管理内存，因为在一些不明显的边缘情况下，您可能会在定义自己的数据存储代码时遇到麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T09:46:09.357

你可以，这很常见，而且很容易做到。

与标准属性一样，您甚至不需要为此声明实例变量并且仍然可以使用`@synthesize`您的属性（与其他答案所说的相反），您只需覆盖属性的设置器：

```
@interface MyObject : NSObject
@property(nonatomic, copy) NSString* myprop; // like any other property
@property(nonatomic, readonly) BOOL hasProp;
@end

@implementation MyObject
@synthesize myprop = _myprop; // optional with latest LLVM compiler, will generate the _myprop instance variable at compile time

// Override default setter for myprop
-(void)setMyprop:(NSString*)newvalue
{
    if (_myprop != newvalue)
    {
        [_myprop release]; // release only necessary if not using ARC
        _myprop = [newvalue retain]; // retain only necessary if not using ARC
        // And/Or whatever you want your custom setter to do
    }
}

// You can override default "-(NSString*)myprop" getter too if you want
// You you can keep the default getter implementation and only override the setter.
// Or vice-versa. It's really up to you

// Another example: we created a @property(readonly) hasProp and implement its getter by ourselves, without any dedicated instance variable

-(BOOL)hasProp
{
    return (self.myprop != nil);
}
@end 
```

# reporting-services - 复选框作为 SSRS 2208R2 报告中的参数

> ID：13008319
> 
> 赞同：2
> 
> 时间：2012-10-22T09:22:56.880
> 
> 标签：reporting-services, checkbox

如何在 SSRS 报告中使用复选框作为参数？没有内置的控制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:30:45.753

如果你必须有一个复选框，你就不能使用内置的 SSRS 接口来收集参数。Microsoft Connect 对此有[问题](http://connect.microsoft.com/SQLServer/feedback/details/669971/allow-option-for-a-checkbox-for-boolean-parameters-in-ssrs)。

您需要制作自己的 UI 来收集参数，然后 eitehr 重定向用户或将报告返回给他们。根据您的要求，最简单的方法可能是使用[带有 URL 访问的 SSRS](http://msdn.microsoft.com/en-us/library/ms153586.aspx)或使用[reportviewer webpart](http://technet.microsoft.com/en-us/library/bb326214.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T06:32:26.000

如果您需要在报告顶部实现复选框，则可以使用多值文本参数。您可以手动输入默认数据，然后它会显示一个带有所需复选框的组合框。可以使用相同的参数名称和索引访问每个复选框。例如，如果以下条件为 True，则表示 sombody 选择了一个值为 'value1' 的复选框： InStr(Join(Parameters!p_myMultipleValueParameter.Value,","), "value1")>0

注意：在这种情况下，请注意文本相似性。在相同的情况下，复选框的字符串值也可能是另一个值的子字符串，例如“no1”和“no12”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:04:30.763

虽然您不能做本机复选框，但您可以通过 Datatype Boolean 做单选按钮。

# memcached - 如何在龙卷风 IOLoop 上插入 txyam

> ID：13008322
> 
> 赞同：1
> 
> 时间：2012-10-22T09:22:59.403
> 
> 标签：memcached, twisted, tornado

我尝试使用 tornado.platform.twisted 来集成 txyam memcached 客户端，但是当我尝试检查它的功能时，会抛出下一个错误：

```
Traceback (most recent call last):
File "swcomet/tx_memcache_helper.py", line 32, in <module>
mem_helper = MemcacheHelper()
File "swcomet/tx_memcache_helper.py", line 19, in __init__
self.add(4)
File "/home/rustem/work/sw.services.swcomet.python/venv/local/lib/python2.7/site-packages/tornado/gen.py", line 117, in wrapper
gen = func(*args, **kwargs)
File "swcomet/tx_memcache_helper.py", line 25, in add
self.mem.getPickled(user_id, decompress=True)
File "/home/rustem/work/sw.services.swcomet.python/venv/lib/python2.7/site-packages/txyam/client.py", line 133, in getPickled
return self.get(key, **kwargs).addCallback(handleResult, uncompress)
File "/home/rustem/work/sw.services.swcomet.python/venv/lib/python2.7/site-packages/txyam/client.py", line 27, in wrapper
func = getattr(self.getClient(key), cmd)
File "/home/rustem/work/sw.services.swcomet.python/venv/lib/python2.7/site-packages/txyam/client.py", line 48, in getClient
raise NoServerError, "No connected servers remaining." 
```

txyam.client.NoServerError：没有剩余的连接服务器。

转储该错误的源代码：

```
import tornado.ioloop
import tornado.gen
from txyam.client import YamClient
from swtools.date import _ts
import tornado.platform.twisted

MEMHOSTS = ['127.0.0.1111']
USER_EXPIRATION_TIME = 61

class MemcacheHelper(object):
   def __init__(self, *a, **kw):
     try:
        self.mem = YamClient(["127.0.0.1"])
     except Exception, e:
        print "ERror", e
     self.clients = set()
     self.add(4)

  @tornado.gen.engine
  def add(self, user_id, expire=None):
     self.clients.add(user_id)
     expire = expire or USER_EXPIRATION_TIME
     self.mem.getPickled(user_id, decompress=True)
     print "hmmm"

  if __name__ == '__main__':
    print "trying to start on top of IOLOOP"
    ioloop = tornado.ioloop.IOLoop.instance()
    #reactor = TornadoReactor(ioloop)
    mem_helper = MemcacheHelper()
    #mem_helper.add(4)
    ioloop.start() 
```

请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:33:32.020

在至少建立一个连接之前，txyam 似乎不允许您执行任何 memcache 操作：

```
def getActiveConnections(self):
    return [factory.client for factory in self.factories if not factory.client is None]

def getClient(self, key):
    hosts = self.getActiveConnections()
    log.msg("Using %i active hosts" % len(hosts))
    if len(hosts) == 0:
        raise NoServerError, "No connected servers remaining."
    return hosts[ketama(key) % len(hosts)] 
```

它试图立即建立这些连接：

```
def __init__(self, hosts):
    """                                                                                                                                                                                       
    @param hosts: A C{list} of C{tuple}s containing hosts and ports.                                                                                                                          
    """
    self.connect(hosts) 
```

但是连接设置是异步的，它不会公开事件来指示何时至少建立了一个连接。

因此，您的代码失败，因为您`add`在任何连接存在之前立即调用。一个好的长期修复是针对 txyam 提交错误报告，因为这不是一个很好的界面。 `YamClient`可以有一个方法，当您实际被允许使用该实例时，该`whenReady`方法会返回`Deferred`触发。`YamClient`或者可能有一个替代构造函数返回一个`Deferred`与实例一起触发的`YamClient`，但只有在它可以使用之后。

# c# - Bitarray C# 序列化

> ID：13008324
> 
> 赞同：1
> 
> 时间：2012-10-22T09:23:01.513
> 
> 标签：c#, serialization, console

序列化：

```
 bool[] tempArray = new bool[MapWidth * MapHeight];
            for (int i = 0; i < MapWidth; i++)
            {
                for (int ii = 0; ii < MapHeight; ii++)
                {
                    tempArray[i * ii] = mapSolid[i, ii];
                }
            }
            BitArray bits = new BitArray(tempArray);
            byte[] bytes = new byte[32 * MapWidth];
            bits.CopyTo(bytes, 0);
            bin.Serialize(stream, Convert.ToBase64String(bytes)); 
```

反序列化：

```
byte[] bytes = new byte[255 * 255];
                    bytes=Convert.FromBase64String((string)bin.Deserialize(stream));
                    //mapSolid = ;
                    MapWidth = (int)bin.Deserialize(stream);
                    MapHeight = (int)bin.Deserialize(stream);
                    BitArray bits = new BitArray(bytes);
                    bool[] bytestemp = new bool[255*265];
                    bits.CopyTo(bytestemp, 0);
                    for (int i = 0; i < MapWidth; i++)
                    {
                        for (int ii = 0; ii < MapHeight; ii++)
                        {
                            mapSolid[i, ii] = bytestemp[i*ii];
                        }
                    } 
```

现在一切似乎都没有错误，但地图在反序列化后失去了它的结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:45:22.240

```
tempArray[i * ii] 
```

和

```
bytestemp[i * ii] 
```

是错的; 该索引应该类似于：

```
(i * MapWidth) + ii 
```

或者

```
i + (ii * MapHeight) 
```

取决于您是先写行还是先写列。

否则，例如，单元格 {1,4} 和 {4,1} 将存储*在同一个位置*。

如果你想避免数学，另一种常见的方法是：

```
int offset = 0;
for (int i = 0; i < MapWidth; i++)
{
    for (int ii = 0; ii < MapHeight; ii++)
    {
        tempArray[offset++] = mapSolid[i, ii];
    }
} 
```

和

```
int offset = 0;
for (int i = 0; i < MapWidth; i++)
{
    for (int ii = 0; ii < MapHeight; ii++)
    {
        mapSolid[i, ii] = bytestemp[offset++];
    }
} 
```

即每次都从/到“下一个位置”读/写。只需确保读取和写入循环就哪个是外部/内部循环达成一致（他们似乎如此）。

# node.js - Expressjs +车把格式化日期

> ID：13008326
> 
> 赞同：1
> 
> 时间：2012-10-22T09:23:04.077
> 
> 标签：node.js, express, handlebars.js, mustache, momentjs

我有这个对象

```
{ title: 'A TITLE',
  description: 'Lorem Ipsum...',
  _id: 50806930bbf612a858000013,
  __v: 0,
  screenings: 
   [ { venue: 'Venue1', dates: [Object] },
     { venue: 'Venue2', dates: [Object] } ] } 
```

从我的 mongoDB 出来。

`dates`是日期列表（dah！）。

我的问题是现在我想用 momentjs **server-side**格式化它们。

看起来我应该使用 mustache lambdas，但使用我的堆栈似乎是不可能的（**expressjs**，**consolidate**，**handlebars** ...）

有人解决了这个问题吗？

这就是我现在正在尝试的

```
Theatre.find({"screenings.dates":{$gte:lastSunday, $lte:nextSunday}}, function(err, entities){
    res.render('index', {
        entities: entities,
        giveitatry: function(a) {
            return moment(a).format("MMM Do YY")
        }
    });
}); 
```

在我的模板上我有：

```
{{#entities}}
<div class="span3">{{#giveitatry}} {{dates.0.}} {{/giveitatry}}</div>
{{/entities}} 
```

这是expressjs conf的一部分

```
var moment = require('moment');

var express = require('express')
  , cons = require('consolidate')
  , name = 'mustache';

app.configure(function(){
 app.set('view engine', 'hjs');
 app.engine('.hjs', cons.mustache);
 ... 
```

是的，扩展仍然是 hjs，因为我开始使用 hogan，但我无法使用 hogan，所以我转而使用巩固 + 小胡子。

我正在使用节点 v0.8.8 和 expressjs 3.0.0rc4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:08:03.093

如果您使用 mustache.js lambda，则需要返回一个函数。此函数的参数是`text`，其中包含模板内容的文本表示，并且`render`可以显式调用以呈现模板。

到目前为止我发现的最佳解决方案是您首先使用默认渲染器，然后将生成的日期字符串传递回新`Date`对象的构造函数，然后将其进一步传递给`moment`函数。最后，您只需返回所需格式的日期。

完整代码：

```
giveitatry: function() {
    return function(text, render) {
        var date = moment(new Date(render(text)));
        return date.format("MMMM Do YY");
    }
} 
```

同样适用于日期列表：

```
{{#entities}}
  {{#dates}}
    <div class="span3">{{#giveitatry}}{{.}}{{/giveitatry}}</div>
  {{/dates}}
{{/entities}} 
```

在这个问题上，你并不孤单。[mustache.js 的问题跟踪器（参见[1]](https://github.com/janl/mustache.js/pull/139)、[[2]](https://github.com/janl/mustache.js/pull/261) ）中正在进行对帮助程序/过滤器的介绍，它们将为这个问题提供更清洁的解决方案。

# silverlight - 避免第二次点击 silverlight 按钮 MVVM

> ID：13008327
> 
> 赞同：1
> 
> 时间：2012-10-22T09:23:09.997
> 
> 标签：silverlight, mvvm, double-click

我已经看到我有几个用于双击按钮的用户的问题。

我有几个按钮绑定到启动许多操作的命令。

例如，有两个窗口通过调解器在它们之间进行通信，因此当我单击“关闭另一个窗口”时，绑定命令会发送“CloseTheOtherWindowMessage”。问题在于，当用户双击时，它会再次尝试关闭窗口，并且正如预期的那样，它会崩溃。

当我按下按钮时，我尝试将窗口 BusyIndi​​cator 设置为 IsBusy，但我的手指比 MVVM 快，它仍然让我在开始显示 BusyIndi​​cator 之前双击。

我发现了很多关于如何使用interaction.Behaviors 只允许在MVVM 中双击的例子，但我想要的恰恰相反。这个问题有什么例子或其他好的和通用的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:36:28.180

1.  为什么它崩溃时“如预期”？崩溃永远不应该“像预期的那样”。

2.  你的手指不应该“比 MVVM 快”。Dispatcher 线程始终以确定性和顺序的方式运行。您是否使用多线程方法？

3.  在命令的`Execute`方法或处理程序中，引发其`CanExecuteChanged`事件，绑定引擎将立即调用`CanExecute(...)`. 使该方法`false`第二次返回。也许使用计时器，或者更好的是，您可以仅通过您的视图模型状态在逻辑上确定该操作现在是不可能的（即因为`IsOtherStuffAvailable`is current `false`）。

# leaflet - Leaflet & Mapbox：OpenPopup 不工作

> ID：13008328
> 
> 赞同：1
> 
> 时间：2012-10-22T09:23:12.277
> 
> 标签：leaflet, mapbox

我对传单 openPopup 方法有疑问。

```
showMap = function(elements) {
    var jsonp = 'http://a.tiles.mapbox.com/v3/blahblahblah.jsonp';
    var m = new L.Map("my_map").setView(new L.LatLng(51.5, -0.09), 15);

    var geojsonLayer = new L.GeoJSON();

    var PlaceIcon = L.Icon.extend({
        iconSize: new L.Point(25, 41),
        shadowSize: new L.Point(40, 35),
        popupAnchor: new L.Point(0, -30)
    });

    var icon = new PlaceIcon(__HOME__ + '/images/leaflet/marker.png');
    var marker;

    for (var i = 0; i < elements.length; i++) {
        var address = $("<div/>").html(elements[i].address).text();
        var latlng = new L.LatLng(elements[i].latitude, elements[i].longitude);
        marker = new L.Marker(latlng, {icon: icon}).bindPopup(address);

        if (i == 0) {
            marker.openPopup();
        }
        m.addLayer(geojsonLayer).addLayer(marker);
    }
    // Get metadata about the map from MapBox
    wax.tilejson(jsonp, function(tilejson) {
        m.addLayer(new wax.leaf.connector(tilejson));
    });
} 
```

当我点击一个标记时，我会打开弹出窗口。但是我想在加载地图时打开第一个弹出窗口。（并在单击标记时打开其他弹出窗口）

AnN 有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T18:08:33.600

**将标记添加到地图后**调用 openPopup应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T13:53:41.467

我假设当您单击标记时会看到弹出窗口，但是在加载地图时没有自动显示第一个标记的弹出窗口？

首先，看起来您实际上并没有使用 GeoJSON，因此不需要 GeoJSON 层（您可以只使用 FeatureLayer），但这不会导致任何问题。无论您使用什么图层组，您都应该只将其添加到地图一次，然后将所有子图层添加到图层组。您目前在“for”循环中多次添加 geojsonLayer，而您不想这样做。其次，您必须`marker.openPopup()`在标记添加到地图后调用。尝试将您的代码更改为如下所示：

```
var layerGroup = new L.FeatureGroup();
layerGroup.addTo( m );

for (var i = 0; i < elements.length; i++) {
    var address = $("<div/>").html(elements[i].address).text();
    var latlng = new L.LatLng(elements[i].latitude, elements[i].longitude);
    marker = new L.Marker(latlng, {icon: icon}).bindPopup(address);

    //You don't add the marker directly to the map.  The layerGroup has already
    //been added to the map so it will take care of adding the marker to the map
    layerGroup.addLayer( marker );

    if (i == 0) {
        marker.openPopup();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-21T11:01:48.877

我遇到了这个问题，并在我在地图上添加标记后立即添加了超时来修复它。

```
marker.addTo(this.map).bindPopup('Info');

setTimeout(() => {
  marker.openPopup();
}, 500); 
```

我不知道为什么，但在某些页面上，我需要申请超时。无论如何，这是我的解决方法，希望这也适用于你们中的一些人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-09T07:15:47.707

首先添加您的地图，然后输入`openPopup()`：

```
L.marker([lat, long]).bindPopup('Your message').addTo(map).openPopup(); 
```

# ruby-on-rails - 模型有许多附件

> ID：13008329
> 
> 赞同：1
> 
> 时间：2012-10-22T09:23:16.333
> 
> 标签：ruby-on-rails, associations

我有一个`Event`模型，我也希望添加一个可连接模型列表。这需要包括某种多态性，因为可附加的列表可以是其他任何一个`Contact` `User` `Post` `Import`或几个。

我不完全确定如何最好地实现这一目标。单个联系人也可以附加到许多事件。以以下为例：

```
event.attachables #=> [User, Contact, Contact, Import, ...]
user = event.attachables.first
user.attached_events #=> [Event, Event, Event, ...] 
```

在正确方向上的任何点可以最好地实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:50:18.630

我昨天也在找同样的东西。

我找到了一篇博客文章，其中详细描述了所有内容并帮助我实现了这一点。

[http://www.unixgods.org/~tilo/Rails/Rails_polymprphic_has_many_through_relationships.html](http://www.unixgods.org/~tilo/Rails/Rails_polymprphic_has_many_through_relationships.html)

这里的关键是在模型`source`的`has_many`声明中定义属性，以及`event``as``has_many``Contact``User``Post`

您只需要为`source`:)找到一个合适的描述性名称

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T09:25:34.430

我真的建议您阅读这份 Rails 指南： http: [//guides.rubyonrails.org/association_basics.html#polymorphic-associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。它准确地涵盖了你所追求的。

# java - Jmeter中的Junit测试套件

> ID：13008336
> 
> 赞同：1
> 
> 时间：2012-10-22T09:23:59.687
> 
> 标签：java, junit, jmeter

Jmeter 是否支持 Junit 测试套件？
这个问题困扰了我好几天，无论是junit 3还是4的风格，测试用例都运行良好。但测试套件无论如何都是愚蠢的。
有什么建议么？

我的代码如下：

```
public class LoginLogout extends TestCase {
    private static Logger log = Logger.getLogger(LoginLogout.class);

    public static Test suite() {
        try{
            log.info("test suite start!");

            TestSuite suite = new TestSuite(LoginLogout.class.getName());
            //$JUnit-BEGIN$
            suite.addTestSuite(Login.class);
            suite.addTestSuite(Logout.class);

            return new TestSetup(suite) {
                protected void setUp(){
                    log.info("test suite setup!");
                }
                protected void tearDown(){
                    log.info("test suite finished!");
                }
            };
        }catch(Exception e){
            log.error(e.getMessage());
        }
        return null;
    }

}

public class Login extends TestCase {
    private static Logger log = Logger.getLogger(Login.class);
    @Test
    public void testLogin() throws Exception {
        log.info("login start!");
        log.info("login end!");
    }
}

public class Logout extends TestCase {
    private static Logger log = Logger.getLogger(Logout.class);
    @Test
    public void testLogout() throws Exception {
        log.info("logout start!");
        log.info("logout end!");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:01:05.953

您可以转到[http://jmeter.apache.org/](http://jmeter.apache.org/)上的“下载 Apache JMeter”页面，并下载“apache-jmeter-2.8_src.zip”（或任何当前版本）。

解压后，在`apache-jmeter-2.8_src\apache-jmeter-2.8\src\junit\test`目录下可以找到如下java文件（jmeter 2.8版本）：

对于 JUnit4：

```
AfterAnnotatedTest.java
BeforeAnnotatedTest.java
DummyAnnotatedTest.java
Junit4AnnotationsTest.java 
```

对于 JUnit3：

```
RerunTest.java
SetupTestError.java
SetupTestFail.java
TearDownTestFail.java 
```

您可以在 JMeter 的 JUnit 请求的类名下拉菜单中看到它们（测试计划 --> 线程组 --> JUnit 请求）。

这些 JUnit 测试用例默认由 JMeter 提供，所以我假设他们的代码的简单复制和粘贴并从那里工作应该可以工作；但是，到目前为止，我无法在 Classname 下拉菜单中看到我的测试用例。

以下是我发现的其他有用链接；但是，它们都没有解决我遇到的当前问题：

*   [从 Jmeter 运行 Selenium 脚本](https://stackoverflow.com/a/7823777/993246)
*   [http://jmeter.apache.org/usermanual/junitsampler_tutorial.pdf](http://jmeter.apache.org/usermanual/junitsampler_tutorial.pdf)
*   [JUnit 测试类未出现在 JMeter 中](https://stackoverflow.com/questions/11687309/junit-test-classes-not-showing-up-in-jmeter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:35:55.913

对于 JUnit4，套件将是：

```
@RunWith(Suite.class)
@SuiteClasses({Login.class, Logout.class})
public class LoginLogout {
  private static Logger log = Logger.getLogger(LoginLogout.class.getName());
} 
```

TestClass 是：

```
public class Login {
    private static Logger log = Logger.getLogger(Login.class.getName());
    @Test
    public void testLogin() throws Exception {
        log.info("login start!");
        log.info("login end!");
    }
} 
```

对我来说工作得很好

# html - ID 是否总是必须与 CSS 中的一个元素相关联？如果该元素在页面上重复出现怎么办？

> ID：13008337
> 
> 赞同：0
> 
> 时间：2012-10-22T09:24:03.360
> 
> 标签：html, css

如果我有一个显示在长 HTML 页面顶部和底部的菜单，并且 DIV 设置为`<div id="menu"><ul><li>Home</li><li>About</li></ul></div>`

我可以在页面底部重复此代码吗？或者在这种情况下ID应该是一个类？

我读过该 ID 只能在页面上使用一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:26:38.330

是的，一个 ID 只能使用一次。如果您需要两个菜单来选择相同的 CSS 设置，您可以使用`<div class="menu"/>`如果它们的许多设置相同，但有些（例如位置）不同，您可以使用类似：`<div id="top-menu" class="menu" />`和`<div id="bottom-menu" class="menu" />`- 这是一个很常见的用法，其中 id 控制页面上对象的外部位置，通常可以是唯一的，而 class 控制其内部布局，可以与其他类似组件共享。

W3 Schools 对类和 id 选择器有很好的入门：http: [//www.w3schools.com/css/css_id_class.asp](http://www.w3schools.com/css/css_id_class.asp)

根据他们的描述：

> **id 选择器**
> 
> id 选择器用于为单个唯一元素指定样式。
> 
> **类选择器**
> 
> 类选择器用于指定一组元素的样式。与 id 选择器不同，类选择器最常用于多个元素。
> 
> 这允许您为具有相同类的许多 HTML 元素设置特定样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:25:41.070

ID 在元素中必须是唯一的。这就是类的用途，如果您出于某种原因需要重用 ID 名称，请将其更改为类。

[http://www.w3schools.com/tags/att_global_id.asp](http://www.w3schools.com/tags/att_global_id.asp)

```
<div class="menu"><ul><li>Home</li><li>About</li></ul></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:26:34.913

ID 被设计成完全一样的**标识符**。每个文件应该只有一个 ID。如果您需要将相同的样式应用于多个元素，正如您正确指出的那样，请改用类名。

```
<div class="menu">
    <ul>
        <li>Home</li>
        <li>About</li>
    </ul>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:30:56.973

我们不能在页面中重复相同的 ID...最好使用相同的类...:)

```
<div class="menu">
   <ul>
     <li>Home</li>
     <li>About</li>
   </ul>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T09:36:11.207

> ID 是否总是必须与 CSS 中的一个元素相关联？

每页一个元素

> 如果该元素在页面上重复出现怎么办？

那么 HTML 是无效的，你依赖于错误恢复而不是预期的行为。

> 如果我有一个显示在长 HTML 页面顶部和底部的菜单……我可以在页面底部重复此代码吗？

不在 HTML 文档中。

> 或者在这种情况下ID应该是一个类？

是的。一类是一组有共同点的事物。id 标识特定的事物。你有两个有共同点的菜单，使用一个类。

> 我读过该 ID 只能在页面上使用一次。

正确的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T09:37:46.033

您当然可以根据需要多次使用 id="" 属性，但属性的内容应该是唯一的。没有唯一值是 HTML 错误。

# windows - 尝试通过 Pcap.net 连接到某人时如何防止 Windows 发送 RST 数据包？

> ID：13008340
> 
> 赞同：6
> 
> 时间：2012-10-22T09:24:15.227
> 
> 标签：windows, sockets, tcp, pcap, pcap.net

我正在尝试使用 Pcap.Net 打开一个 tcp 连接。

我正在发送以下包裹：

![同步包](../Images/37e420e9401dc626e0d1704bea56634b.png)

服务器响应：

![同步确认](../Images/83493a5b3939e6ad525d0a6404e6f391.png)

之后，Windows 会自行发送重置数据包：

![RST](../Images/2a7bfc2b3ff4bf6c198ec514cd5038d9.png)

为什么会发生这种情况，如何阻止这种行为？

我在 Windows 7 上这样做

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T08:31:12.430

正如哈里斯先生所说，你可以使用[WinDivert](http://reqrypt.org/windivert.html)来做你想做的事。例如，只是进行 TCP 握手，您可以编写如下内容：

```
// TCP handshake using WinDivert:
HANDLE handle = DivertOpen("inbound && tcp.SrcPort == 80 && tcp.Syn && tcp.Ack", 0, 0, 0);
DivertSend(handle, synPacket, sizeof(synPacket), dstAddr, NULL);
...
DivertRecv(handle, synAckPacket, sizeof(synAckPacket), &srcAddr, &length);
...
DivertSend(handle, ackPacket, sizeof(ackPacket), dstAddr, NULL);
... 
```

DivertRecv() 函数将服务器响应重定向到用户空间，然后由 Windows TCP/IP 堆栈处理。所以不会产生讨厌的 TCP RST。DivertSend() 注入数据包。

这是 WinDivert 和 WinPCAP 之间的主要区别。后者只是一个数据包嗅探器，而前者可以拦截/过滤/阻止流量。

WinDivert 是用 C 语言编写的，因此您需要编写自己的 .NET 包装器。

（通常披露：WinDivert 是我的项目）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T12:42:44.797

本质上，问题是`scapy`在用户空间运行，windows内核会先收到SYN-ACK。您的 Windows 内核将发送 TCP RST，因为在您有机会对 scapy 执行任何操作之前，它不会在相关端口号上打开套接字。

典型的解决方案（在 linux 中）是在运行脚本时阻止内核在该 TCP 端口（12456）上接收 RST 数据包...问题是我认为 Windows 防火墙不允许您如此精细（即查看 TCP 标志）是否有丢包。

也许最简单的解决方案是在 linux VM 下执行此操作并用于`iptables`实现 RST drop。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T09:34:20.047

通过使用 Boring Old Winsock 与服务器建立 TCP 连接，而不是构建您自己的 TCP-over-IP-over-Ethernet 数据包并将它们发送到服务器，或者以某种方式说服 Windows Internet 协议栈忽略 SYN +ACK（以及所有后续数据包）从服务器获得，因此它看不到来自服务器的 SYN+ACK，请注意没有进程尝试建立从 192.168.1.3:12456 到 192.168 的 TCP 连接。 1.1:80 使用标准的内核内网络堆栈（即，没有人尝试使用 Boring Old Winsock 设置它），并返回一个 RST 告诉服务器在机器上的端口 12456 上没有人在监听。

您也许可以使用[WinDivert](http://reqrypt.org/windivert.html)来完成后者。它本身似乎没有 .NET 包装器，因此如果您要使用 .NET 而不是 Boring Old Unmanaged C 或 Boring Old Unmanaged C++，您可能需要寻找一个。

# ruby - 堆栈级别太深 - Ruby

> ID：13008342
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:24:17.110
> 
> 标签：ruby, stack-overflow, net-http

[我有一个在ruby​​ 项目](https://github.com/schatteleyn/Gimme-rate)中似乎无法解决的堆栈溢出问题。在文件movie.rb 的第44-47 行，我调用了包含在文件mmc.rb 中的函数。
当我单独测试文件时， mmc.rb 工作正常，但在循环中调用了几次，它会导致 SO。

我的堆栈跟踪位于以下[Gist](https://gist.github.com/3930583)中。

我真的不明白我为什么得到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:54:32.033

这不是一个确定的答案，而只是两个评论：

首先，在函数中定义方法/函数没有必要或好处，您的代码只会变得不必要地复杂。如果你能解决它，尽量避免这种模式（在你的情况下，绝对不需要这样的代码）。

第二：你的*堆栈级别太深*发生在`Net::HTTP`模块中的某个地方，所以我很快检查了你关于`Net::HTTP`调用的代码。您正在使用*open-uri*`open`库中的函数，但您没有正确使用它：每当您打开某个流进行阅读时，您必须在完成后关闭它。您可以使用以下技术实现此目的：

 *```
# sequential version -> you close the stream by yourself when
# you are done with it
stream = open('http://some.url/some/path')
data = stream.read
stream.close

# block version -> the open function closes the stream for you
# as soon as the passed block is evaluated.
data = open('http://some.url/some/path') {|stream| stream.read} 
```

`open(...).read`因此，您应该将代码中所有出现的 替换为`open(...) {|s| s.read}`... 这也可以将您的堆栈级别修复得太深，但我不能保证。但是一旦你重构了代码，调试你的问题就会更容易......*

# outlook - 分析 Outlook HANG 转储（安装了 GoogleCalendarSync 插件）

> ID：13008343
> 
> 赞同：3
> 
> 时间：2012-10-22T09:24:24.823
> 
> 标签：outlook, windbg, dump, freeze

自从我开始将 Outlook 与 GoogleCalendarSync 一起使用以来，我每隔一段时间就会遇到挂起。我使用 ADPlus 创建进程的挂起转储（使用`adplus -hang -pn outlook.exe -o c:\dumps`）。当我通过 WinDBG 读取转储时，我使用命令`!analyze -v -hang`，但我无法弄清楚到底出了什么问题。该命令的输出是：

```
*******************************************************************************
*                                                                             *
*                        Exception Analysis                                   *
*                                                                             *
*******************************************************************************

FAULTING_IP: 
+1d32faf00ffdf58 00000000 ??              ???

EXCEPTION_RECORD:  ffffffff -- (.exr 0xffffffffffffffff)
ExceptionAddress: 00000000    ExceptionCode: 80000007 (Wake debugger) 
ExceptionFlags: 00000000 NumberParameters: 0

BUGCHECK_STR:  HANG

PROCESS_NAME:  OUTLOOK.EXE

ERROR_CODE: (NTSTATUS) 0xcfffffff - <Unable to get error code text>

EXCEPTION_CODE: (NTSTATUS) 0xcfffffff - <Unable to get error code
text>

MOD_LIST: <ANALYSIS/>

NTGLOBALFLAG:  0

APPLICATION_VERIFIER_FLAGS:  0

MANAGED_STACK: !dumpstack -EE OS Thread Id: 0xd60 (37) Current frame: 
ChildEBP RetAddr  Caller,Callee

DERIVED_WAIT_CHAIN:  

Dl Eid Cid     WaitType
-- --- ------- --------------------------    0   ba0.6a4 Thread Handle          -->    37  ba0.d60 Event                  

WAIT_CHAIN_COMMAND:  ~0s;k;;~37s;k;;

BLOCKING_THREAD:  00000d60

DEFAULT_BUCKET_ID:  APPLICATION_HANG_BlockedOn_EventHandle

PRIMARY_PROBLEM_CLASS:  APPLICATION_HANG_BlockedOn_EventHandle

LAST_CONTROL_TRANSFER:  from 7c90df5a to 7c90e514

FAULTING_THREAD:  00000025

STACK_TEXT:   11f3f764 7c90df5a 7c8025db 00000458 00000000
ntdll!KiFastSystemCallRet 11f3f768 7c8025db 00000458 00000000 00000000
ntdll!NtWaitForSingleObject+0xc 11f3f7cc 7c802542 00000458 ffffffff
00000000 kernel32!WaitForSingleObjectEx+0xa8 11f3f7e0 77520197
00000458 ffffffff 00192888 kernel32!WaitForSingleObject+0x12 11f3f7fc
77602e50 00192888 001a3ab8 00000000 ole32!GetToSTA+0x6f 11f3f81c
7760208a 11f3f8e4 11f3f9f4 09b148b8
ole32!CRpcChannelBuffer::SwitchAptAndDispatchCall+0xf6 11f3f8fc
7752c982 09b148b8 11f3f9f4 11f3f9e4
ole32!CRpcChannelBuffer::SendReceive2+0xc8 11f3f968 7752c91a 09b148b8
11f3f9f4 11f3f9e4 ole32!CAptRpcChnl::SendReceive+0xab 11f3f9bc
77ef5db5 09b148b8 11f3f9f4 11f3f9e4
ole32!CCtxComChnl::SendReceive+0x113 11f3f9d8 77ef5ead 09b22354
11f3fa20 0600015b rpcrt4!NdrProxySendReceive+0x43 11f3fdbc 77ef5e42
774e6228 774e92da 11f3fdf4 rpcrt4!NdrClientCall2+0x1fa 11f3fddc
77e88519 00000010 00000005 11f3fe04 rpcrt4!ObjectStublessClient+0x8b
11f3fdec 7752d919 09b22354 00000001 145bf7b8 rpcrt4!ObjectStubless+0xf
11f3fe04 7752d8ba 09b22354 00192888 00000001
ole32!RemoteReleaseRifRefHelper+0x84 11f3fe2c 7752c558 09b22354
00192888 00000001 ole32!RemoteReleaseRifRef+0x74 11f3fe84 7752c351
0e8a3cfc 0e8a3cf8 00000000 ole32!CStdMarshal::DisconnectCliIPIDs+0x200
11f3feac 7750c880 00000002 0e8a3da0 0e8a3cf8
ole32!CStdMarshal::Disconnect+0x178 11f3fec8 7750c7ed 0e8a3cf8
11f3fee8 7750c967 ole32!CStdIdentity::~CStdIdentity+0x89 11f3fed4
7750c967 00000001 00440023 00520006 ole32!CStdIdentity::`vector
deleting destructor'+0xd 11f3fee8 77ef5ae8 80000000 11f3ff00 1112f31b
ole32!CStdIdentity::CInternalUnk::Release+0x4c 11f3fef4 1112f31b
0e8bd1fc 11f3ff14 1112a0e4 rpcrt4!IUnknown_Release_Proxy+0x11 WARNING:
Stack unwind information not available. Following frames may be wrong.
11f3ff00 1112a0e4 11f3ff80 00000000 11f3ff80 GoogleCalendarSync+0xf31b
11f3ff14 1112a0b1 00000000 11f3ff80 11f3ffb4 GoogleCalendarSync+0xa0e4
11f3ff24 11137c5e 555047c9 00020048 80578cb2 GoogleCalendarSync+0xa0b1
11f3ffb4 7c80b729 00000301 00440023 00520006
GoogleCalendarSync+0x17c5e 11f3ffec 00000000 111378c0 00000301
00000000 kernel32!BaseThreadStart+0x37

FOLLOWUP_IP:  GoogleCalendarSync+f31b 1112f31b 8b5508          mov    
edx,dword ptr [ebp+8]

SYMBOL_STACK_INDEX:  15

SYMBOL_NAME:  GoogleCalendarSync+f31b

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: GoogleCalendarSync

IMAGE_NAME:  GoogleCalendarSync.dll

DEBUG_FLR_IMAGE_TIMESTAMP:  4d9f0466

STACK_COMMAND:  ~37s ; kb

BUCKET_ID:  HANG_GoogleCalendarSync+f31b

WATSON_IBUCKET:  -1362224887

WATSON_IBUCKETTABLE:  1

FAILURE_BUCKET_ID: 
APPLICATION_HANG_BlockedOn_EventHandle_cfffffff_GoogleCalendarSync.dll!Unknown

WATSON_STAGEONE_URL: 
http://watson.microsoft.com/StageOne/OUTLOOK_EXE/14_0_6117_5001/4f3e2d20/unknown/0_0_0_0/bbbbbbb4/cfffffff/00000000.htm?Retriage=1

Followup: MachineOwner
--------------------------- 
```

我该如何进一步调查这个转储？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T10:39:41.630

GoogleCalendarSync 正在运行的线程试图释放一个 COM 对象，其公寓模型是 STA，即该对象存在于单个线程中。这种对象在 COM 之初就非常流行，因为 COM 层保证了对象不会同时被多个线程访问，从而避免了在对象实现中添加同步代码。

您可以获取 GetToSTA 的第一个参数（在本例中为 0x00192888），将内存的内容转储到此地址（dc 0x00192888）。结果，跳过前 2 个 DWORD ：下一个 DWORD 应该是目标进程 ID，下一个是目标线程 ID。这个目标线程很可能已经在另一个操作中被阻塞（参考[http://blogs.msdn.com/b/tess/archive/2008/06/12/asp-net-case-study-deadlock-waiting-in -gettosta.aspx](http://blogs.msdn.com/b/tess/archive/2008/06/12/asp-net-case-study-deadlock-waiting-in-gettosta.aspx)，如果你需要一个真实的例子）。

# apache - .htaccess 将所有页面重定向到新服务器上的同一页面

> ID：13008345
> 
> 赞同：0
> 
> 时间：2012-10-22T09:24:29.643
> 
> 标签：apache, .htaccess, mod-rewrite

我正在移动主机，并且有人建议我在进行 DNS 更改时设置重定向。我的新服务器上的站点结构与我当前的服务器相同，所以我只需要更改基本 url。例如

[http://www.mysite.com/Category1](http://www.mysite.com/Category1)

将重定向到：

http://[我的新IP地址]/Category1

非常感谢帮助

谢谢

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:14:06.597

或者，您可以坚持使用 mod_alias：

```
Redirect / http://{new ip address}/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:39:40.187

尝试这样的事情：

```
RewriteCond %{HTTP:Host} ^www\.mysite\.com$ [NC]
RewriteRule ^(.*)$ http://1.2.3.4/$1 [R=301,L,QSA] 
```

# java - 在java中说“实例变量没有被覆盖”是什么意思？

> ID：13008346
> 
> 赞同：0
> 
> 时间：2012-10-22T09:24:33.443
> 
> 标签：java, member-hiding

我知道`field hiding`java中调用的概念。但是我仍然对实例变量没有被覆盖感到困惑。

根据我目前的知识，覆盖超类的方法意味着JVM将调用子类的覆盖方法，尽管子类可以使用超类的方法。

我`field hiding`通过链接阅读了类似的内容：-[隐藏字段](http://docs.oracle.com/javase/tutorial/java/IandI/hidevariables.html)

因此，无论如何，如果我们更改子类中继承的实例变量的值，我们就会覆盖该实例。

我很困惑请帮忙。

* * *

我正在使用以下超类：-

```
public class Animal{
File picture;
String food;
int hunger;
int width, height;
int xcoord, ycoord;

public void makeNoise(){
.........
}

public void eat(){
.............
}

public void sleep(){
..........
}

public void roam(){
.............
} 
```

}

它有 Tiger、cat、dog、hippo 等子类。这些子类覆盖 makeNoise()、eat 和 roam() 方法。

但是每个子类也为实例变量使用一组不同的值。

因此，根据我的困惑，我有点重写超类 Animal 的所有实例变量和 3 个方法；`super`并且我仍然可以使用关键字为子类提供超类实例变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:39:13.947

这意味着如果您在超类中调用方法，它将解析为子类中的覆盖版本（如果您的实例是子类）。但是，对成员变量的引用将绑定到调用所在的类中该变量的声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:48:32.370

好吧，[重载](http://en.wikipedia.org/wiki/Function_overloading)通常是指*函数/方法重载*

> 允许创建多个具有相同名称的方法，这些方法在函数的输入和输出类型方面彼此不同。它被简单地定义为一个功能执行不同任务的能力。

您会看到，该术语与函数/方法有关 - 而不是实例变量（字段）。后者不能被重载或覆盖。参见例如[这个问题](https://stackoverflow.com/questions/427756/overriding-a-super-class-instance-variables?rq=1)。

关于您的示例：实际上，您并没有*覆盖*祖先的字段，而是*隐藏*了它们。

一个例子：

```
class Human {
    String name;
    int age;

    public Human(String n, int a) {
        this.name = n;
        this.age = a;
    }

    public void tell_age() {
        System.out.println("I am "+this.age);
    }
}

class Female extends Human {
    // We want to HIDE our real age ^^
    String age = 'not too old';

    public Female(String n, int a) {
        this.name = n;
        super.age = a;
    }

    // We override the parent's method to cloak our real age,
    // without this, we would have to tell our true age
    public void tell_age() {
        System.out.println("I am "+this.age);
    }

    // Ok, we give in, if you really need to know
    public void tell_true_age() {
        System.out.println("I am "+super.age);
    }
} 
```

```
public static void main(String[] args) {
    Female Jenna = new Female('Jenna', 39);

    Jenna.tell_age(); // => I am not too old
    Jenna.tell_true_age(); // I am 39
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:20:19.660

一般来说，我们用`override`描述方法而不是字段。但是你会说他们有类似的行为。

*   当它们具有相同的字段名称/方法签名时
*   除非您使用`super`.

# compiler-construction - 如何从 BNF 设计抽象语法树 (AST)

> ID：13008347
> 
> 赞同：3
> 
> 时间：2012-10-22T09:24:34.337
> 
> 标签：compiler-construction, translation, abstract-syntax-tree, bnf

我已经定义了我的语言的 BNF，但不知道如何从中设计 AST。

例如，从我的 BNF 的前几行：

```
<program> ::= <import declarations>? <class declaration>?
<import declarations> ::= <import declaration> | <import declarations> <import declaration>
<class declaration> ::= class <identifier> <class body>
<import declaration> ::= import <type name> ';' 
```

我如何从我的 AST 中表达这一点？我应该这样设计吗？

```
typedef vector<ImportDeclaration*> ImportDeclarationList;

class Program {
    ImportDeclarationList importDeclarations;
    ClassDeclaration classDeclaration;
};

class ImportDeclaration {
    TypeName typeName;
};

class ClassDeclaration {
    Identifier identifer;
    ClassBody classbody;
}; 
```

我需要在这些类之间添加一些继承吗？

是否有一些关于如何从 BNF 设计 AST 的书籍？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T12:02:01.577

你只需要实现一个树数据结构。这意味着您将需要某个类，例如 Node，AST 的所有其他可能元素都必须从该类继承。然后，您可以使用成员指针 (Node*)。如果孩子的数量可能不同，您可以将它们存储在 std::vector 中。例如。对于一个非常简单的产品（假设 IntLiteral 是一个终端）：

```
Addition := IntLiteral + IntLiteral 
```

可以为 AST 编写以下代码：

```
struct Node {
    virtual Node* clone() { return new Node(*this);};
    virtual ~Node() {}
};
class IntLiteral : Node {
    int value;
public:
    IntLiteral(int v) : value(v) {}
    virtual IntLiteral* clone()
    {
        return new IntLiteral(*this);
    }
};
class Addition : Node {
    Node* left;
    Node* right;
public:
    Addition(Node* l, Node* r)
        : Node(), left(l->clone()), right(r->clone()) {}
    virtual Addition* clone()
    {
        return new Addition(*this);
    }
}; 
```

假设您是手动实现的，您可以在解析器代码的接受函数中将节点添加到根节点（在本例中为 Addition* 类型）。

实际上，您可能希望`generate`每个节点都有一个函数。或者，这可能是一个更好的主意，您将需要访问器和树遍历器来生成代码。

有很多关于解析器的书籍，其中一本将是经典的“龙书”，尽管重点实际上是那里的编译器。

# horizontalscrollview - 当我在 android 4.1 上锁定屏幕时，Horizo ntalScrollView 消失了

> ID：13008348
> 
> 赞同：1
> 
> 时间：2012-10-22T09:24:36.040
> 
> 标签：horizontalscrollview, lockscreen

我的horizo​​ntalScrollView 显示为noraml。现在，我锁定屏幕，然后打开它，horizo​​ntalScrollView 消失了。但是在姜饼上它运行良好。是什么原因？有人可以帮助我吗？

这是java代码：

```
 View view = LayoutInflater.from(this).inflate(R.layout.shop_bottom_tips, null);
    RelativeLayout shopLayout (RelativeLayout)view.findViewById(R.id.shop_tips_layout_id);
    AsyncImageView imageView = (AsyncImageView) view.findViewById(R.id.shop_tips_img_id);
    for(...) {
      //add child to the view.
   } 
```

布局代码：

```
<HorizontalScrollView
    android:id="@+id/horizontalScrollView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scrollbars="none" >

    <LinearLayout
        android:id="@+id/poster_shop_layout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >
    </LinearLayout>
</HorizontalScrollView> 
```

# pdf - Quartz-2D：在 PDF 书页中发现其他主要文本的文本

> ID：13008352
> 
> 赞同：0
> 
> 时间：2012-10-22T09:24:44.897
> 
> 标签：pdf, text, quartz-2d, paragraph, page-numbering

我想知道是否有可能（Quartz2D）以编程方式识别和处理 PDF 页面中的上方（或下方）文本，该页面显示页码和段落标题或其他信息，以了解您在书中的位置。它只是像页面中的主要文本一样的文本还是可以以某种方式区分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:16:32.897

页码（如果打印在页面上）与页面上的任何其他文本没有什么不同（但是 PDF 文件中还有其他类型的页码）。

某些类型的 PDF（PDF/A-1a，'tagged' PDF）确实具有以单独方式标记的页码和标题之类的内容，但在一般情况下，PDF 文件都不是这些，并且页码或标题与文本的其余部分。

# iphone - iphone配对游戏

> ID：13008353
> 
> 赞同：0
> 
> 时间：2012-10-22T09:24:44.903
> 
> 标签：iphone, ios, cocos2d-iphone

任何人都可以帮助我了解匹配游戏或记忆游戏的基本逻辑是什么？这种游戏是否有任何教程或参考资料？请帮我解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:45:48.567

像这样？

*   [http://mobile.tutsplus.com/tutorials/corona/corona-sdk-create-a-memory-match-game/](http://mobile.tutsplus.com/tutorials/corona/corona-sdk-create-a-memory-match-game/)
*   [http://codecanyon.net/item/iphone-memory-game/243940](http://codecanyon.net/item/iphone-memory-game/243940)
*   [http://iphonedevsdk.com/forum/iphone-sdk-game-development/13001-tic-tac-toe-tutorial-a-walkthrough.html](http://iphonedevsdk.com/forum/iphone-sdk-game-development/13001-tic-tac-toe-tutorial-a-walkthrough.html)

轻松谷歌搜索你想要的东西。

# javascript - 为什么在页面加载时会触发“mousemove”事件以及如何防止这种情况（使用 jQuery 移动）？

> ID：13008358
> 
> 赞同：0
> 
> 时间：2012-10-22T09:25:08.677
> 
> 标签：javascript, jquery, jquery-mobile, jquery-events, mousemove

当我在 body 上绑定 mousemove-event

```
$("body").mousemove(function(e)... 
```

在文档就绪时，它也会在页面加载时触发，鼠标在浏览器窗口内但鼠标没有移动。这是为什么？我怎么能防止这种情况？

编辑：似乎这是一个 Safari 错误。在 Firefox 中，我无法重现此行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:40:15.053

**无论如何，这不应该是幸福的，只需尝试 bind() 或 live()。**

```
$("body").stop(true)
$("body").bind('mousemove', function(e){
 alert('mouse moved');
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T09:28:23.603

加载时，调用以下命令：-

```
document.onmousemove=return false;
window.onmousemove=return false; 
```

MouseDown 将不起作用

# java - 我需要帮助将 Thread 添加到 Web 服务的连接，否则它将无法运行

> ID：13008362
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:25:15.907
> 
> 标签：java, android

当我单击按钮时，我试图调用 Web 服务，按钮部分和输入工作现在我正在尝试实际调用 Web 服务，但我需要线程来这样做，但我不知道它们。人们说要使用 AsyncTask。

**callWS 的 LogCat 日志：** **callWS：** “ [http://pastebin.com/nuLnPQz8](http://pastebin.com/nuLnPQz8) ”

**callWS FUNCTION::** 它总是会崩溃，因为它需要线程。

**XML 代码：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button_one"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Pošlji "
        android:onClick = "callWS"/>

    <EditText
        android:id="@+id/Text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/button1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="35dp"
        android:ems="10" />

    <TextView
        android:id="@+id/output"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/Text1"
        android:layout_marginTop="23dp"
        android:layout_toLeftOf="@+id/Text1"
        android:text="Output: "
        tools:context=".Activity123" />

</RelativeLayout> 
```

**Activity123.java 代码：**

```
package com.test123;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import com.test123.R;

public class Activity123 extends Activity 
   {
      private static final String SOAP_ACTION = "http://192.168.0.25/webapplication1/ws.asmx";
      private static final String METHOD_NAME = "HelloWorld";
      private static final String NAMESPACE = "http://microsoft.com/webservices/";
      private static final String URL = "http://192.168.0.25/webapplication1/ws.asmx?WSDL";
      /** Called when the activity is first created. */

      @Override
      public void onCreate(Bundle savedInstanceState) 
         {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_activity123);
         }

      @Override
      public boolean onCreateOptionsMenu(Menu menu) 
         {
            getMenuInflater().inflate(R.menu.activity_activity123, menu);
            return true;
         }

  public void TEST(View button_one)
     {
        //int a = 2 + 3; // Runs fine
        //TextView text = (TextView) findViewById(R.id.output); // TextView text = (TextView) findViewById(R.id.button_one); // Runs fine
        //text.setText(String.valueOf(a)); IGNORE THIS ABOVE SECTION

        et = (EditText) findViewById(R.id.Text1); // et is our editText 
        String input = et.getText().toString(); // 

        TextView text = (TextView) findViewById(R.id.output); 
        text.setText( String.valueOf(input) ); 
        //setContentView(R.layout.secondary_activity);

        klicWS(input);
     }  

        public void klicWS(String input) // We receive input variable from TEST
           {
              //Thread networkThread = new Thread(); Threads like this... but this ain't correct....

              SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);                       
              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
              envelope.setOutputSoapObject(request);
              envelope.dotNet = true;
              envelope.encodingStyle = SoapSerializationEnvelope.XSD;

              HttpTransportSE HT = new HttpTransportSE(URL);

              try 
                 {
                    HT.call(SOAP_ACTION, envelope);
                    SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                    //Object result = (Object)envelope.getResponse(); // maybe important ?

                       {
                          TextView text = (TextView) findViewById(R.id.output);
                          text.setText( "Message from WS: "+response.toString()  );

                          //TextView tv = new TextView(this); this is from an example
                          //tv.setText( "Message :"+response.toString() ); // from example
                          setContentView(R.layout.secondary_activity); // The second one...
                       }
                 } 

             catch (Exception e) 
                {
                   e.printStackTrace();
                }
     } 
```

}

**IDE（Eclipse）内的东西的屏幕截图，以及用于帮助的strings.xml：** [http ://www.filedropper.com/ideplusstringsxml](http://www.filedropper.com/ideplusstringsxml) ![在此处输入图像描述](../Images/4ffa19d4b9758b13191d4437c21258d3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:03:45.463

这是一个常见的错误。您使用整数参数调用 TextView 的 setText 方法

```
int a = 2 + 3; // Runs fine
TextView text = (TextView) findViewById(R.id.button_one); 
text.setText(a); // makes ERROR 
```

带有整数参数的 setText 方法旨在获取资源 ID (R.string.some_string_key)。

这就是为什么日志说

> 原因：android.content.res.Resources$NotFoundException：字符串资源 ID #0x5

您尝试从生成的 R.java 文件中获取 ID 为 5 的 strings.xml 字符串

只需将失败的行替换为

```
text.setText(String.valueOf(a)); // should work 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:57:14.287

单击按钮时，您正在尝试执行一些与网络相关的操作。在 Android 中，任何与网络相关的操作都不应该在主 UI 线程中完成。

因此，在按钮上单击启动一个新线程并从网络获取信息或使用异步任务。

谢谢和问候， Rajamanickem。小号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:53:05.163

I think the problem is this line.

```
TextView text = (TextView) findViewById(R.id.button_one); 
```

You convert your BUTTON button_one to a TEXTVIEW. I don't know if this is possible.

Try to use

```
TextView text = (TextView) findViewById(R.id.output); 
```

and test if your code would work.

# boost - 什么是 64b 输入和 32b 输出的 CRC？

> ID：13008364
> 
> 赞同：3
> 
> 时间：2012-10-22T09:25:25.023
> 
> 标签：boost, fpga, crc

我正在开发一个软件实用程序来将一些数据传输到 pci-e 板。为了避免数据传输错误，我在每个数据包中添加了一个 CRC 字段，以便 pci-e 板可以使用 CRC 值验证接收到的数据。

然后我们发现CRC值没有通过验证。

我正在使用**boost::crc_32_type**生成 CRC 值，而硬件人员告诉我板上的 CRC 实现来自[http://www.easics.com/webtools/crctool](http://www.easics.com/webtools/crctool)并且他们正在使用**64**数据**CRC32**的总线宽度版本- ETHERNET / AAL5。

那么，是否可以使用 boost::crc_32_type 来使用他们正在使用的那个？

任何建议将不胜感激！

[**编辑 2013.02.20** ]

1.  工作 crc 模板应具有以下定义：
    boost::crc_optimal<32, 0x04C11DB7, 0xFFFFFFFF, 0x0, false, false>
2.  每8个字节的顺序在被处理之前需要颠倒
3.  使用 std::for_each 而不是 process_bytes 来获得结果，但我仍然不太了解它们之间的区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:09:15.620

您可以使用`crc_32_type`- 首先您必须确保您的字节与硬件人员的字节顺序相同。EASICS 代码使用的约定是流中的第一个字节进入 Data[63:56]。

# c# - C#：程序流程：尽管知道这显然很容易，但我找不到答案

> ID：13008370
> 
> 赞同：1
> 
> 时间：2012-10-22T09:25:35.117
> 
> 标签：c#

我倾向于自己解决大多数事情，但对于我的生活，尽管进行了相当多的搜索，但我无法找到一种专业的方式来做到这一点。

这是我的基本程序：

```
namespace ConsoleApplication1
{ 
class MonsterAttackRolls
     {
    public int GoblinAttack()
    {
        int AttackNumber = 0;
            Random rnd = new Random();
       AttackNumber = rnd.Next(1, 21);
        return(AttackNumber);            
    }

    public int OrcAttack()
    {
        int AttackNumber = 0;
        Random rnd = new Random();
        AttackNumber = rnd.Next(11, 31);
        return (AttackNumber);
    }

    public int OgreAttack()
    {
        int AttackNumber = 0;
        Random rnd = new Random();
        AttackNumber = rnd.Next(21, 41);
        return (AttackNumber);
    }

}

class ApplicationObject
{
    static void Main()
    {
      MonsterAttackRolls Goblin1 = new MonsterAttackRolls();
      MonsterAttackRolls Orc1 = new MonsterAttackRolls();
      MonsterAttackRolls Ogre1 = new MonsterAttackRolls();

        Console.WriteLine("These are the attack numbers for the Goblin and the Orc! {0} {1}", Goblin1.GoblinAttack(), Orc1.OrcAttack());
        Console.ReadLine();

        Console.WriteLine("This is the Ogre's attack number! {0}", Ogre1.OgreAttack());
        Console.ReadLine();
    }
}
} 
```

现在我想回到我的 Main() 程序并直接进入 Ogre 的攻击。我怎么做？带goto？大声笑，我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:36:06.150

您需要设置一个具有正确条件的循环，否则您的程序将从头到尾运行一次然后退出。如果你想让你的食人魔攻击一定次数，把它放在一个 for 循环中，例如：

```
for(int i = 0; i < 5; i++)
{

  attack code here;

} 
```

我建议添加一些用户输入来指示程序流程？还可以考虑将怪物放入他们自己的类中，例如拥有一个主 Moster 类，其中包含 montser 所需的所有共享属性，然后将每个怪物设置为派生类。

然后你可以设置你的攻击方法来接受怪物的类型。应该防止你不得不为每个怪物编写攻击方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:36:57.863

您的程序在打印输出后结束，因为您到达了您的方法的结尾，并且从所有意图和目的`Main`来看，该方法*就是您的程序。*为了让它重复你已经完成的过程，你需要一个**循环**。

在 C# 中有几种循环方式。您可以使用循环循环固定次数`for`，也可以在条件为真时使用`while`or循环进行`do`循环。例如，如果你想重复你的过程十次，你可以在你的主循环中使用它：

```
for (int i = 0; i < 10, i++)
{
    // put your original code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:00:37.593

我认为答案只是在每个 ReadLine 等待您的输入后按回车键。

哦，我认为这是一个非常酷的第一个程序，比“Hello World”要酷得多……你们这些强大的食人魔，为栅栏而战；-)

# java - 返回一个整数，其数字之和正好为 n

> ID：13008373
> 
> 赞同：0
> 
> 时间：2012-10-22T09:25:50.233
> 
> 标签：java, digits

我的问题与数字总和有关。

在数字和系统中，数字 39 = 3 + 9 = 12 的数字和。

但是在我的情况下，我想编写一个用户输入 12 的方法，并且该方法将返回 39，因为 39 是实现 12 位数总和的最小数字。

如果我们可以在伪代码中讨论这个会很好，因为我更感兴趣的是学习开发一种方法/算法/公式来解决这个难题。

给出了使用队列的提示。我还尝试了以下方法：

数字%9; number/9，这很接近，但似乎不适用于所有情况。

一个例子是：

12%9 = 3

12/9 = 1；如果（答案 = 1，返回 9）

因此 3 和 9 将是 39。我知道我很接近，但我尝试对 111 等数字使用相同的数字，但这不再适用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:28:48.720

最小的数字始终采用“x9...9999”的形式，其中 x 是单个数字（可能为 0）。

您需要做的就是找到：

*   x 的值：`n % 9`
*   有多少个 9：`n / 9`.

对于 111：

*   `n % 9`是 3。
*   `n / 9`是 12。

所以答案是 3999999999999。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:31:20.837

我认为`n`数字总和等于的最小数字`k`将始终是形式

```
i99999 
```

`i`某个数字在哪里。

使用这个，你有

```
i = n % 9
j = floor(n / 9) 
```

然后你通过连接`i`then`9` `j`时间来构造你的号码。

为此`n = 12`产生`39`.

为此`n = 111`产生`3999999999999`（`9`出现十二次）

# php - 客人必须在提交帖子之前登录或注册

> ID：13008381
> 
> 赞同：0
> 
> 时间：2012-10-22T09:26:17.350
> 
> 标签：php

我在实现这一点的正确方法上遇到了麻烦。我想要做的是来宾用户可以填写表格，但在提交表格之前，他们必须登录或注册。做这个的最好方式是什么？

1.  用户在访问表单之前是否已登录？
2.  用户是否可以填写表格但除非登录或注册才能提交？

我更喜欢第二种方式，因为用户有理由在他们费力贡献之后注册。我应该将表单数据存储在会话或 cookie 中吗？当用户激活帐户时，应提交表单。这样做的正确方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:28:42.107

将表单数据（连同表单位置）存储在会话中，然后将他重定向到注册/登录页面。登录成功后，检查是否有保存的表单数据并完成他的操作。

# bash - Bash - 如何遍历子目录并复制到文件中

> ID：13008382
> 
> 赞同：3
> 
> 时间：2012-10-22T09:26:25.460
> 
> 标签：bash, unix, copy

我是 bash 编码的新手。

我正在尝试创建将遍历所有子目录的东西，并且在每个子目录中它应该将一个文件复制到该目录。

例如，如果我有以下目录

```
/dir1/  
/dir2/  
/dir3/  
...  
...  
/dirX/ 
```

还有一个文件`fileToCopy.txt`

然后我想运行一些东西来打开每个`/dirX`文件并放在`fileToCopy.txt`那个目录中。留给我：

```
/dir1/fileToCopy.txt
/dir2/fileToCopy.txt
/dir3/fileToCopy.txt
...
...
/dirX/fileToCopy.txt 
```

我想在一个循环中执行此操作，然后我将尝试修改此循环以添加更多步骤，因为最终 .txt 文件实际上是一个 .java 文件，我想将其复制到每个目录中，编译它（其中包含其他类），然后运行它以收集输出。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T09:32:26.333

查找当前目录 (.) 下的所有目录并将文件复制到其中：

```
find . -type d -exec cp fileToCopy.txt '{}' \; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T09:29:42.027

```
for i in dir1, dir2, dir3, .., dirN
    do
        cp /home/user1068470/fileToCopy.txt $i
    done 
```

或者，您可以使用以下代码。

```
for i in *
    do                 # Line breaks are important
        if [ -d $i ]   # Spaces are important
            then
                cp fileToCopy.txt $i
        fi
    done 
```

# random - 生成 3 个总和为 0 的均匀随机变量

> ID：13008383
> 
> 赞同：4
> 
> 时间：2012-10-22T09:26:29.313
> 
> 标签：random, statistics, distribution

我想生成三个随机变量 a、b 和 c 使得 (i) a+b+c=0; (ii) 每个都均匀分布在 (-1,1) 中。

双变量版本很简单：a=2*rand()-1; b=-a。（注：rand() 均匀分布在 (0,1) 中）

以下解决方案不起作用，因为 c 的范围太大：a=2*rand()-1; b=2*rand()-1; c=-ab。

以下解决方案也不起作用，因为 c 不是均匀分布的： a=2*rand()-1; b=2*rand()-1; c=(-ab)/2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:49:01.703

在我们知道您的要求是否可能之前，您可能会对稍微不同的问题的答案感兴趣：

> 是否有可能拥有三个均匀分布的变量 a、b、c，使得它们总和为零？

答案是肯定的：例如，您采用三个均匀分布的变量 a0,b0,c0 和 s=a0+b0+c0 您可以得到 a=a0-s/3, b=b0-s/3 和 c=c0- s/3 具有所需的属性。如果您从`a0,b0,c0 = 1.5*rand()-0.75`结果 a,b,c 开始，将在 [-1,1] 中，a,b,c 的分布将约为。看起来像这样：

![在此处输入图像描述](../Images/40d3e6452a22188fb09e482e474fe74d.png)

现在，如果您希望 a,b,c 更接近 [-1,1] 上的均匀分布，您可以尝试类似`a0,b0,c0 = 0.75*(2*rand()-1)^(1/3)`的方法，它会为 a,b,c 产生类似于以下的分布：

![在此处输入图像描述](../Images/d2e3a87881c91e77611c57beeb42a04f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:35:43.620

它们会均匀分布吗？

我会说投掷 3 个骰子，但预期值是 10.5，这永远不会发生，所以我要说投掷 3 个仅从 1 到 5 的特殊骰子，它们的总和必须为 9。

可能的组合是：

*   1,3,5 (*6)
*   1,4,4 (*3)
*   2,2,5 (*3)
*   2,3,4 (*6)
*   3,3,3 (*1)

1,3,5和2,3,4的组合有6种，1,4,4和2,25的组合有3种，3,3,3的组合只有一种。这是 19 种可能的组合（在 125 种可能的场景中）。

在这些中，我们得到这些骰子被掷出的次数。（请记住，在 2、2、5 中，每 2 计算 3*，因此是 2 的 6 卷）。

*   1：9
*   2 : 12
*   3 : 15
*   4 : 12
*   5 : 9

因此，虽然原始分布是均匀的，但一旦你加入约束，你就会发现它不再是均匀的。（请注意，这些数字加到 57 以作为确认，19 种不同的组合，每种组合 3 次投掷）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T22:18:26.500

吴，你是对的，有一个解决办法。这里是建筑。生成 a = 2*rand()-1。现在如果 a < 0，则令 b = a + 1。否则，令 b = a - 1。最后，令 c = -(a+b)。

不难证明 a、b 和 c 在 [-1,1] 上均匀分布。有趣的是，解决方案是对称的，因为所有三个成对相关都是 -1/2。它只需要一次调用随机生成器。

# vb.net - DotNetBar中Gauge控制的动针

> ID：13008385
> 
> 赞同：0
> 
> 时间：2012-10-22T09:26:35.820
> 
> 标签：vb.net

在 DotNetBar 中，我想更改针值并使其在圆形仪表周围移动，但我做不到。在另一个组件（AGauge）中，它可以很容易地完成：AGauge1.Value += 1 但它有一些限制（例如，没有垂直仪表并且预览效果不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:19:56.270

看看这个：[http ://www.devcomponents.com/kb2/?p=989](http://www.devcomponents.com/kb2/?p=989)

我认为这包含了你所有的奇迹（如果这是好的控制）......

特别是这个：

> 值——指针的值。这是指针“指向”的间隔值。
> 
> 请注意，如果 DampeningSweepTime 已设置为非零值，则以编程方式设置此值将导致屏幕指针显示被抑制。如果不需要编程阻尼，您可以通过 ValueEx 属性设置指针值。
> 
> ValueEx – 指针的值。这是指针“指向”的间隔值。
> 
> 请注意，以编程方式设置此值将导致屏幕指针显示立即更新 - 无论 DampeningSweepTime 是否已设置为非零值。如果需要编程阻尼，您可以通过 Value 属性设置指针值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T14:38:37.953

试试这个，如果它适合你

```
MyGaugeControl.SetPointerValue("MyScaleName", "MyPointerName", (double)[Value To Set]); 
```

假设

Gauge Name、Scale Name和Pointer name分别是MyGaugeControl、MyScaleName和MyPointerName。

# android - 关于服务在后台执行刷新操作

> ID：13008388
> 
> 赞同：0
> 
> 时间：2012-10-22T09:26:41.180
> 
> 标签：android, service, background, onkeydown

我有 3 个活动：`Act_1, Act_2 and Act_3`和一个`service:RefreshService`.

我想当用户单击主页按钮时，`RefreshService`停止刷新操作。

现在，我重写了`Act_1.onStop()`停止刷新的方法，但是当`Act_1`开始时`Act_2`，刷新也停止了，这不是我想要的。

而且我重写了`Act_1.onKeyDown()`方法，它也不好。

你有什么好的设计吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:46:52.947

所以让我理解你的要求。我认为你想在你的应用程序进入后台时停止你的服务，无论它是从活动 A、B 还是 C 进入后台。

因此，为此您可以遵循这种方法。

Activity-A onPause() -> 启动定时器任务以停止服务，例如 15 秒。从这里开始，您的应用程序可以转到主屏幕或活动 B。

Activity-B onResume() -> 取消定时任务，服务将继续运行。

主屏幕 您的计时器任务将触发并停止服务。

# android - 可展开列表视图中的动态图像绑定

> ID：13008389
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:26:42.607
> 
> 标签：android

我必须使用可扩展列表，但每个孩子都会出现动态图像，并且正在使用简单的光标适配器，我不想将图像保存在我的数据库中。请问怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:01:24.317

如果要为子视图放置动态图像，则必须使用可扩展适配器。

参考以下 [http://developer.android.com/reference/android/widget/ExpandableListAdapter.html](http://developer.android.com/reference/android/widget/ExpandableListAdapter.html)

# php - 如何在 PHP 中打印从 SQL 获取的行中的对象值？

> ID：13008392
> 
> 赞同：0
> 
> 时间：2012-10-22T09:26:52.573
> 
> 标签：php, sql

我试图打印我的 PHP 对象 '$mon' 的值，它具有所有月份的平均值.....

我的数据获取代码是

```
$result = mysql_query("SELECT b_year, sum(m1) as m1, sum(m2) as m2, sum(m3) as m3, sum(m4) as m4, sum(m5) as m5, sum(m6) as m6, sum(m7) as m7, sum(m8) as m8, sum(m9) as m9, sum(m10) as m10, sum(m11) as m11, sum(m12) as m12  
            from s_budgets as b INNER JOIN users as u on b.u_id = u.id WHERE b_year=YEAR( CURDATE( ) )
GROUP BY b_year " );
$mon=mysql_fetch_array($result) 
```

我的显示这些值的代码如下......

```
 <?php echo $mon->m4;?>,
 <?php echo $mon->m5;?>,
 <?php echo $mon->m6;?>, 
```

如何打印具有多个属性的对象“$mon”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:28:22.137

这个`$mon=mysql_fetch_array($result) fetch a result row as an associative array, a numeric array, or both`..

```
echo $mon['m4']; 
```

如果要将结果作为对象，请使用以下方式

```
$mon = mysql_fetch_object($result)
$mon->m4 
```

> 请开始使用 Mysqli 或 PDO 进行新的开发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:29:18.533

您需要使用 mysql_fetch_object() 而不是 mysql_fetch_array() 才能访问对象格式的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:28:59.420

如果您需要它进行调试，一个简单的

```
var_dump($mon); 
```

为您提供`$mon`.

否则尝试迭代结果数组：

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
     echo $row['m4']; // etc.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T09:29:11.747

$mon 不是一个对象，因为 mysql_fetch_array 从 MySQL 资源中获取一个数组。您必须像这样访问您的数组：

```
<?php echo $mon['m4']; ?>,
<?php echo $mon['m5']; ?>,
<?php echo $mon['m6']; ?>, 
```

如果你想要一个对象，你需要使用[mysql_fetch_object 。](http://php.net/manual/en/function.mysql-fetch-object.php)

# c# - WPF 或 WinForms，MVC 类似查询字符串的值提供程序/绑定

> ID：13008398
> 
> 赞同：0
> 
> 时间：2012-10-22T09:27:06.083
> 
> 标签：c#, wpf, asp.net-mvc, winforms, model-binding

我正在使用第三方 Web 浏览器控件开发 WPF 项目。为了从网页传递数据，我在 JavaScript 中进行重定向，然后取消浏览器的“导航”事件 [请参阅使用 WebKit.NET 从 JavaScript 调用 C# 函数）。

在导航事件中，我正在做一些 URL 处理以从 URL 参数创建参数字典，然后调用特定方法（也基于 URL）。

使用看起来像这样的 URL = 'app-Method?arg1=5.3&arg2=3' 我最终得到一个包含以下信息的字典：

```
//var methodName = "Method";
//var dictionary = { { "arg1", "5.3" }, { "arg2", "3" } }; 
```

在这个阶段我无法进行转换，因为不同的方法会有不同类型的不同参数。

然后我会像这样调用另一个方法（来自 URL 的方法名称）：

```
switch(methodName)
{
     case "Method":
         Method(Convert.ToDecimal(dictionary["arg1"]), Convert.ToInt(dictionary["arg2"]));
         break;
} 
```

显然，在 MVC 中，HTTPGet 操作方法为我完成了所有这些转换、处理和方法调用。我想知道（使用 MVC 库或其他方法）是否可以在非 MVC 应用程序中复制这种行为，如果有很多不同的方法，只是为了更清晰的代码和更简单的目的。

我希望这是有道理的，我发现它有点难以解释。

**编辑：**

这是完整的示例代码：

```
this.browser.Navigating += (s, ev) =>
        {
            if (ev.Url.AbsoluteUri.Contains("app"))
            {
                var method = ev.Url.Host.Split('-')[1];
                var arguments = ev.Url.Query.TrimStart('?').Split('&');

                var dictionary = new Dictionary<string, string>();

                foreach (var arg in arguments)
                {
                    var split = arg.Split('=');

                    dictionary.Add(split[0], split[1]);
                }

                switch (method)
                {
                    case "add":
                        Add(Convert.ToInt32(dictionary["first"]), Convert.ToInt32(dictionary["second"]));
                        break;
                    default:                            
                        break;
                }

                ev.Cancel = true;
            }
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:34:14.983

我想出了一个非常灵活的方法来使用反射和 JSON.net 库来做到这一点。我更改了 URL，以便将参数作为 HTML 编码 JSON 传递。我遍历所需的参数并使用 JSON.net 的 ToObject 方法将它们转换为所需的类型。这甚至在传递数组和复杂类型时也有效。

```
var jsonString = HttpUtility.UrlDecode(ev.Url.Query.TrimStart('?'));

var json = JObject.Parse(jsonString);

var methodInfo = objWithMethodToRun.GetMethod(methodName);

var parameterInfoArray = methodInfo.GetParameters();
var parameters = new object[parameterInfoArray.Length];

//Add parameters as correct types to array.
for (var i = 0; i < parameterInfoArray.Length; i++)
{
    var methodParameterInfo = parameterInfoArray[i];

    //If there is nothing in the json we'll set it to null
    if (json[methodParameterInfo.Name] == null || json[methodParameterInfo.Name].Type == JTokenType.Null)
    {
        parameters[i] = null;
    }
    else
    {
        var convertMethod = json[methodParameterInfo.Name].GetType().GetMethod("ToObject", new Type[] { })
                            .MakeGenericMethod(methodParameterInfo.ParameterType);

        parameters[i] = convertMethod.Invoke(json[methodParameterInfo.Name], null);
    }
}

//Invoke the method
dynamic result = methodInfo.Invoke(objWithMethodToRun, parameters); 
```

# .htaccess - htaccess, url 必须有 www 或者重定向

> ID：13008402
> 
> 赞同：0
> 
> 时间：2012-10-22T09:27:23.497
> 
> 标签：.htaccess

我需要重定向我的网站的 url，如果它没有 www，因为如果 url 不完整，脚本不起作用，我如何使用 htacces 文件执行此操作，我在网上找不到示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:32:14.510

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\. 
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:32:17.907

这样的事情可能对你有用：

```
RewriteCond %{HTTP:Host} ^(?!www\.)(.+)$ [NC]
RewriteCond %{REQUEST_URI} (.+)
RewriteRule .? http://www.%1%2 [R=301,L] 
```

# mysql - 重复更新不适用于唯一索引

> ID：13008404
> 
> 赞同：3
> 
> 时间：2012-10-22T09:27:26.563
> 
> 标签：mysql, database-indexes

我试图插入/更新的我的 SQL 表有这个定义：

```
CREATE TABLE `place`.`a_table` (
`id` bigint(20) NOT NULL AUTO_INCREMENT,
`some_id` bigint(20) NOT NULL,
`someOther_id` bigint(20) NOT NULL,
`some_value` text,
`re_id` bigint(20) NOT NULL DEFAULT '0',
`up_id` bigint(20) NOT NULL DEFAULT '0',
PRIMARY KEY (`id`),
KEY `some_id_key` (`some_id`),
KEY `some_id_index1` (`some_id`,`someOther_id`),
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4; 
```

如您所见， some_id 和 someOther_id 共享一个索引。

我正在尝试执行我的插入/更新语句，如下所示：

```
INSERT INTO `a_table` (`re_id`,`some_id`,`someOther_id`,`up_id`,`some_value`) VALUES      
(100,181,7,101,'stuff in the memo wow') On DUPLICATE KEY UPDATE 
`up_id`=101,`some_value`='sampleValues' 
```

我希望因为我没有指定 id，所以它将回退到索引键 (some_id_index1) 作为插入/更新规则。但是，它只是插入。

显然这是不正确的。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T10:01:25.940

好的，首先帮助您提出更好的问题。对您的问题“我在这里做错了什么？”的字面回答 没什么。

您有一个具有自动增量主键和两个非唯一二级索引的表。您在没有指定主键值的情况下向该表插入行，因此 MySQL 将使用自动增量规则为其提供唯一键，因此该`ON DUPLICATE KEY`条件永远不会触发。事实上，有人可能会说这是多余的。

所以你必须问自己的问题是你认为应该发生什么。现在 Stack Overflow 不是一个论坛，所以不要回来为这个问题添加评论，试图澄清你原来的问题。而是制定一个新问题，让那些试图准确回答你所问问题的人清楚。

在我看来，有很多可能性：

1.  您希望将二级索引修改为唯一。你这样做会触发`ON DUPLICATE KEY`规则并切换到更新
2.  您实际上根本不想要自动增量列，`some_id`实际上应该是您的主键
3.  您不了解数据库索引的工作原理（特别是可能不需要至少一个二级索引，因为数据库通常可以组合多个索引或使用部分索引来优化您的查询，因此第二个二级索引更有用只有`someOther_id`字段的索引，*除非*您正在强制执行特定的唯一性约束。因此，例如，如果您期望多行具有相同但对于任何特定`some_id`的特定行只有一行，则需要第二个二级索引，但是在这种情况下第一个不会，因为数据库可以使用第二个作为部分索引来实现相同的性能优化）`someOther_id``some_id`

我建议你坐下来，用笔和纸*远离你的电脑*，试着准确地写下你想做的事情，这样[选择一个：你的祖母；一个十一岁] 可以理解。把那张纸揉成一团扔掉，直到你可以一口气把它写下来而不会出错。然后回到电脑前，试着编写你刚刚写的代码。

100 次中有 99 次你实际上会发现这可以帮助你解决你的问题，而无需问别人问题，因为 100 次中有 99 次我们的问题是由于我们自己**对问题本身**缺乏了解。试图（实际上）向你的祖母或 11 岁的孩子解释你的问题会迫使你抛弃一些让你眼花缭乱的假设，并在他们停止支付时让你目瞪口呆之前真正快速找到问题*的*核心注意力。[我不是说你实际上和你的祖母/一个十一岁的孩子结对编程]

这是我为您设想的此类问题陈述的一个示例。这可能是不正确的，因为我不知道您的具体问题是什么：

```
We need a table that provides cross-reference notes about two other tables. 
There are different types of cross-reference (we use the column 're_id' to 
identify the type of cross-reference) and there are different types of notes 
(we use the columns 'up_id' as well as 'someValue') to store the actual notes.
The cross-reference is indicated with two columns 'some_id' which is the id
of the row in the 'some' table and 'someOther_id' which is the id of the row
in the 'someOther' table. There can be only one cross-reference between any one
row in the 'some' table and any one row in the 'someOther' table, but there can
be multiple cross-references from one specific row in the 'some' table to different
rows in the 'someOther' table. 
```

使用上述问题陈述，我会将主键从自动增量切换为两列主键`(some_id,someOther_id)`并删除所有辅助键！

但我希望您意识到您的实际解决方案实际上可能不同，因为您的问题陈述与我的*猜测*不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T09:39:43.727

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

> 如果表包含一`AUTO_INCREMENT`列并`INSERT ... UPDATE`插入一行，则该`LAST_INSERT_ID()`函数返回该`AUTO_INCREMENT`值。如果语句改为更新一行，`LAST_INSERT_ID()`则没有意义。但是，您可以使用`LAST_INSERT_ID(expr)`. 假设 id 是`AUTO_INCREMENT`列。要使`LAST_INSERT_ID()`更新有意义，请按如下方式插入行：
> 
> ```
> INSERT INTO table (a,b,c) VALUES (1,2,3)
>    ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id), c=3; 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:38:17.707

相同的查询工作正常，将 `columns_value` DUPLICATE KEY UPDATE 更改为实际列 `some_value`

[小提琴演示](http://sqlfiddle.com/#!2/6755d)

问题是

他应该在列（up_id）上定义表上的唯一唯一约束。

我刚刚用 `unique constraint` up_id 列更改了你的表，

[Fiddle_demo](http://sqlfiddle.com/#!2/4fb6b/1)

# javascript - 为什么我的 Javascript 在 iOS 上会中断？

> ID：13008406
> 
> 赞同：0
> 
> 时间：2012-10-22T09:27:43.057
> 
> 标签：javascript, jquery, iphone, ios, ipad

我在 jsFiddle 上有这个代码，它在桌面浏览器上实现并且工作得很好，并且在某种程度上可以在移动设备上工作。[http://jsfiddle.net/heufT/](http://jsfiddle.net/heufT/)

**我的代码在做什么**

如果屏幕大于 960px 宽（或大约），将显示正常的水平导航，但是如果屏幕小于 960px 宽，导航将成为按钮的一部分，当单击该按钮时，会在垂直菜单中显示相同的链接。当您滚动页面时，标题将缩小到较小的高度，如果您返回顶部，标题将恢复到与以前相同的高度。还有一个 .load 脚本，即使您调整浏览器的大小（主要用于桌面），也能确保这一切都发生。

```
jQuery(document).ready(function($){

// prepend menu icon
$('nav').prepend('<div id="menu-icon"></div>');

/* toggle nav */
$("#menu-icon").on("click", function(){
    $("ul#prim").slideToggle();
    $(this).toggleClass("active");
});

});

// Navigation resize event on scroll
$(document).scroll(function(){

if($(window).width()>959){
      $("ul#prim").addClass("adjTop");
}

if($(window).width()<958){
      $("ul#prim").removeClass("adjTop");
}

if ($(this).scrollTop()>105){
    // animate fixed div to small size:
    $('header').stop().animate({ height: 90 },50, 'linear');
    $('ul#prim.adjTop').stop().animate({ top: '50%', 'margin-top': 18 },50, 'linear');
    $('ul#prim').stop().animate({ top: 62 },50, 'linear');
    $("img.logo").fadeOut();
    $("img.bao_logo").fadeIn(1000);
} else {
    //  animate fixed div to original size
    $('header').stop().animate({ height: 175 },50, 'linear');
    $('ul#prim.adjTop').stop().animate({ top: '50%', 'margin-top': 18 },50, 'linear');  
    $('ul#prim').stop().animate({ top: 105 },50, 'linear');
    $("img.logo").fadeIn(1000);
    $("img.bao_logo").hide();
}

});

$(window).resize(function() {
if($(window).width()>959){
    $("ul#prim").addClass("adjTop");
}

if($(window).width()<958){
      $("ul#prim").removeClass("adjTop");
}

// Showreel
$(window).resize(function(){
    // Resize video to fix aspect ratio when window resizes
    // Only do this if video is currently visible
    if ($('#showreel').height()!=0){
        $('#showreel').height(($('#showreel').width()/16)*9);
    }
});
});

(function($){

// Custom scrollbars for work feature on homepage
$(window).load(function(){
    $(".scroll-pane").mCustomScrollbar({
            horizontalScroll:true,
            mouseWheel: false
    });
});

})(jQuery);​ 
```

**问题**

我在 iPad 和 iPhone 上特别注意到的一件事是 JS 可以工作，但是当你捏/缩放 Javascript 完全中断并且导航按钮不起作用，我的标题的缩小/增长也不起作用。

我尝试使用元视口标签禁用捏合/缩放，这显然会阻止用户放大到页面，但即使您至少尝试捏合/缩放并且它没有做任何事情，我注意到 JS 仍然中断没有任何效果。

有没有人有任何指示？我的代码中是否有任何错误会导致这种情况？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:22:08.267

好的，经过几天的测试，我最终重新访问了元视口标签，并添加了一个与用户可缩放属性相结合的最大比例属性，它解决了这个问题。不确定这是否是正确的处理方式，因为防止用户捏/缩放并因此影响可用性，但这仍然是一个短期解决方案。

我的视口标签现在看起来像这样：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
```

# algorithm - 计算一个序列的总和

> ID：13008412
> 
> 赞同：0
> 
> 时间：2012-10-22T09:28:00.450
> 
> 标签：algorithm, math, sum

我需要使用混合和递归方法计算无限级数的总和。这两种方法有什么区别？

下面的代码显示了我是如何做到的。我使用哪种方法？

例如，计算系列

> 总和 = -X -(X^2/2) -(X^3/3) -(X^4/4)....等

我会使用这段代码

```
sum := -x;
numerator:= x;
n := 2;
current := -x; 

repeat
  numerator := numerator * x;
  previous := current;
  current := numerator/n;  
  n := n + 1;
  sum := sum - current;
until ( abs(previous-current) < eps ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:24:14.760

您的问题/问题太模糊/太笼统。因此，我只能提供一些一般性评论：

对于初学者来说，不存在对“任何”无限级数求和的通用方法。对于每个系列，您必须单独确定如何对特定的一个进行求和，这首先需要研究其收敛特性：一个系列可能会收敛、发散或有条件地收敛。简单地添加项直到项变得小于某个限制，或者直到连续项之间的差异变得小于某个限制并不能保证您接近限制总和。事实上，它甚至不能保证总和是有限的（例如，考虑级数 1 + 1/2 + 1/3 + 1/4 ...）。

现在，让我们看一下您的示例：-sum( x^n/n; n=1..inf )。这个特定系列对于任何 x>=1 和 x<-1 都没有有限和：除非 -1<=x<1，否则它不会收敛，项变得越来越大......（但是，请继续阅读！）。

对于`abs(x)<1`添加连续项的“直截了​​当”的方法，将“最终”为您提供正确的答案，但是您需要很长时间才能接近极限总和，除非 x 非常小，并且评估您的接近程度任何有限子和都不是微不足道的。此外，还有更好（=更快收敛）的方法来对这些类型的系列求和。

在这种特定情况下，您可能会注意到它是 log(1-x)，以 Maclaurin 级数展开式表示，因此根本不需要设置繁琐的求和，因为无限求和的结果是已知的。

现在，一方面我们可以很容易地看到，每当 abs(x) 大于 1 时，对于更高的 'n' 项将变得越来越大，因此任何简单的求和过程都必然会失败。另一方面，我们有 {log(1-x); 的 Maclaurin 展开式。-1<=x<1} 并且我们可能会思考这一切如何与 log(1-x) 肯定也存在并且对于 x=-4 是有限的知识相吻合：我们是否可以“定义”求和的极限这个对数也适用于 x<-1？！进入分析延续的奇妙世界。这个我就不多说了，太占篇幅了。

总而言之，对无限级数求和是一门艺术，而不是扔进标准求和机的东西。因此，如果不指定您希望对哪个系列求和，您就无法先验地说明应该应用哪种方法。

最后，我不知道你所说的“混合方法”是什么意思，所以我不能对此发表评论，也不能评论它与递归方法的比较。只要您可以以与原始形式非常相似但只是“稍微简单”的形式编写系列，就可能会出现递归方法。一个例子，不是来自无限级数，而是来自有限级数：斐波那契数 F(n) 可以定义为有限和 F(N-1)+F(n-2)。那是递归，你“只”需要知道一些基值 - ic: F(0)=F(1)=1 - 然后你就有了你的递归设置。以递归形式重写序列可能有助于找到解析解，或者拆分具有解析解的部分，留下“更方便”的序列，使其适合快速收敛的数值方法。

也许“混合方法”旨在表示分析求和的混合 - 就像你的系列：log（1-x） - 和一些（智能或蛮力）数值近似（正如其他人指出的那样，“递归”可能意味着“迭代”）。

总结：（a）阐明“混合”和“递归”方法的含义；(b) 具体说明您需要求和的系列类型，以免没有明智的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:33:32.773

您的问题的部分答案：

我不知道你所说的“混合”方法是什么意思，但如果你有 2 种方法并用它们的一部分制作一个新的方法，那么我想我可以看到你会有一个混合方法。但作为一个常用的、现成的术语，它对我来说毫无意义。既然您将其与“递归”进行了对比，并且由于我已经确定您不是以英语为母语的人，我想知道您是否打算写“迭代”？比较和对比发现“迭代”和“递归”方法是很常见的。

您向我们展示的是一种“迭代”方法；一个简单的观点是，迭代方法是一种依赖于循环（或循环）的方法，就像您的代码一样。

顺便说一句，如果您认识到系列中的第一项与所有其他项具有相同的形式，我认为您可以使您的代码更简单，您已将其简化`(X^1)/1`为`X`在数学上是正确的，但在计算上操作通常更简单相同项的序列，而不是第一项在形式上与其他所有项不同的序列。

递归方法是一种调用自身的方法。由于我怀疑我正在帮助您完成作业，因此我不会为您编写递归方法，但您应该寻找具有近似形式的函数：

```
sum([]) = 0
sum([a b c d ...]) = a + sum([b c d ...]) 
```

请注意，“功能” `sum`（在 2 个“子句”中定义）出现在第二个子句的左侧和右侧。另请注意，在右侧，它应用于输入参数的子集（左侧），这提供了函数在某个阶段终止的可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:55:54.113

您介绍的系列

> -X -(X^2/2) -(X^3/3) -(X^4/4)...

可以写成

> -(X^1/1) - (X^2/2) - (X^3/3) ... -(X^n/n)

这为我们提供

重复`-(X^i/i)`直到 n，其中 n`abs(previous-current) < eps`每次都增加 i

这给了我们：

![系列](../Images/6f58228d7cd50be2b752f0e84ad62d9f.png)

我希望下面的代码能满足你的期望。

```
i := 1;
sum := 0;
current := x;

repeat
  previous := current;
  current  := - exp(x, i) / i; {Here you call a function exp that realise x^i}
  sum      := sum + current;
  i        := i + 1;
until ( abs(previous-current) < eps ) 
```

# iphone - 如何在 UIImageView 上画线而不是 UIView？

> ID：13008419
> 
> 赞同：0
> 
> 时间：2012-10-22T09:28:45.757
> 
> 标签：iphone, ios, uiimageview

如何在 UIImageView 上画一条线？我正在使用 UIImageView 子类，它不支持`drawRect:`方法。我想在图像视图上画一条线。我怎样才能做到这一点？请帮我。我正在使用下面的代码绘制线。

```
- (void)drawRect:(CGRect)rect {
    CGContextRef c = UIGraphicsGetCurrentContext();

    CGFloat red[4] = {1.0f, 0.0f, 0.0f, 1.0f};
    CGContextSetStrokeColor(c, red);
    CGContextBeginPath(c);
    CGContextMoveToPoint(c, 5.0f, 5.0f);
    CGContextAddLineToPoint(c, 50.0f, 50.0f);
    CGContextStrokePath(c);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-10T07:28:44.463

以下代码的工作原理是创建一个与原始图像大小相同的新图像，将原始图像的副本绘制到新图像上，然后在新图像的顶部绘制一条 1 像素的线。

```
// UIImage *originalImage = <the image you want to add a line to>
// UIColor *lineColor = <the color of the line>

UIGraphicsBeginImageContext(originalImage.size);

// Pass 1: Draw the original image as the background
[originalImage drawAtPoint:CGPointMake(0,0)];

// Pass 2: Draw the line on top of original image
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(context, 1.0);
CGContextMoveToPoint(context, 0, 0);
CGContextAddLineToPoint(context, originalImage.size.width, 0);
CGContextSetStrokeColorWithColor(context, [lineColor CGColor]);
CGContextStrokePath(context);

// Create new image
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

// Tidy up
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:33:01.497

首先，我不会使用`UIImageView`. 事实上，文档说......

> 如果您的子类需要自定义绘图代码，建议您使用 UIView 作为基类。

使用`UIView`.

在`UIView`添加一个`UIImageView`子视图并将图像放在那里。现在您可以使用 的`drawRect`方法进行自定义绘图，`UIView`它将出现在图像的顶部。

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);

    CGContextSetLineWidth(context, 5.0);

    CGContextStrokeRect(context, self.bounds);
} 
```

如果这不起作用，则可能不会调用 drawRect 方法。设置一个断点来测试它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:58:22.133

在我看来，最好的方法是采用与 UIImageView 相同大小的不可见 UIView 进行绘图，并在 UIView 上实现触摸方法进行绘图。

你可以使用类似的东西：

```
CGPoint temp=[touch locationInView:self]; 
```

在以下方法中使用它：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
```

将所有点存储在一个数组中，然后按原样在 UIImageView 上绘制这些点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-19T07:33:19.533

请参阅[穆罕默德·萨阿德·安萨里](https://stackoverflow.com/a/17564782/4263646)

使用斯威夫特

```
func drawLines ( originalImage:UIImage, lineColor:CGColor ) -> UIImage{

UIGraphicsBeginImageContextWithOptions(originalImage.size,false,0.0)

originalImage.drawInRect(CGRectMake( 0, 0, originalImage.size.width, originalImage.size.height ))

let context = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(context, 5.0);
CGContextMoveToPoint(context, 0, 0);
CGContextAddLineToPoint(context, originalImage.size.width, 0);
CGContextSetStrokeColorWithColor(context,lineColor);
CGContextStrokePath(context);

// Create new image
var newImage = UIGraphicsGetImageFromCurrentImageContext();

// Tidy up
UIGraphicsEndImageContext();

return newImage 
```

}

# android - Android：选择项目时不显示自动建议列表

> ID：13008423
> 
> 赞同：2
> 
> 时间：2012-10-22T09:28:54.717
> 
> 标签：android, autocomplete, autosuggest

我在我的应用程序中使用自动完成文本视图做一些事情。当用户输入任何内容时，我会收到建议。但是，我有一个查询，当用户键入并点击自动完成文本视图上的建议列表时，会出现更多建议。当用户点击列表并且不想在那里显示更多选项时，我想限制搜索结果。我该如何克服这种情况。

这是我的完整课程，我正在学习：

```
public class WikiSuggestActivity extends Activity {
public String data;
public List<String> suggest;
public AutoCompleteTextView autoComplete;
public ArrayAdapter<String> aAdapter;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    suggest = new ArrayList<String>();
    autoComplete = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextView1);
    autoComplete.addTextChangedListener(new TextWatcher() {

        public void afterTextChanged(Editable editable) {
            // TODO Auto-generated method stub

        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            String newText = s.toString();
            new getJson().execute(newText);
        }

    });

}

class getJson extends AsyncTask<String, String, String> {

    @Override
    protected String doInBackground(String... key) {
        String newText = key[0];
        newText = newText.trim();
        newText = newText.replace(" ", "+");
        try {
            HttpClient hClient = new DefaultHttpClient();
            HttpGet hGet = new HttpGet(
                    "http://en.wikipedia.org/w/api.php?action=opensearch&search="
                            + newText + "&limit=8&namespace=0&format=json");
            ResponseHandler<String> rHandler = new BasicResponseHandler();
            data = hClient.execute(hGet, rHandler);
            suggest = new ArrayList<String>();
            JSONArray jArray = new JSONArray(data);
            for (int i = 0; i < jArray.getJSONArray(1).length(); i++) {
                String SuggestKey = jArray.getJSONArray(1).getString(i);
                suggest.add(SuggestKey);
            }

        } catch (Exception e) {
            Log.w("Error", e.getMessage());
        }
        runOnUiThread(new Runnable() {
            public void run() {
                aAdapter = new ArrayAdapter<String>(
                        getApplicationContext(), R.layout.item, suggest);
                autoComplete.setAdapter(aAdapter);
                aAdapter.notifyDataSetChanged();
            }
        });

        return null;
    }

}
} 
```

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:31:57.620

```
public class WikiSuggestActivity extends Activity {
    public String data;
    public List<String> suggest;
    public AutoCompleteTextView autoComplete;
    public ArrayAdapter<String> aAdapter;
    public TextWatcher mTextWatcher = new TextWatcher() {
        public void afterTextChanged(Editable editable) {
            // TODO Auto-generated method stub
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub
        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            String newText = s.toString();
            new getJson().execute(newText);
        }
    };
    public boolean watch = true;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        suggest = new ArrayList<String>();
        autoComplete = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextView1);
        autoComplete.addTextChangedListener( mTextWatcher );
        autoComplete.setOnItemClickListener( new OnItemClickListener(){
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                autoComplete.removeTextChangedListener( mTextWatcher );
                aAdapter.clear();
                watch = false;
            }
        });
    }

    class getJson extends AsyncTask<String, String, String> {

        @Override
        protected String doInBackground(String... key) {
            String newText = key[0];
            newText = newText.trim();
            newText = newText.replace(" ", "+");
            try {
                HttpClient hClient = new DefaultHttpClient();
                HttpGet hGet = new HttpGet(
                        "http://en.wikipedia.org/w/api.php?action=opensearch&search="
                                + newText + "&limit=8&namespace=0&format=json");
                ResponseHandler<String> rHandler = new BasicResponseHandler();
                data = hClient.execute(hGet, rHandler);
                suggest = new ArrayList<String>();
                JSONArray jArray = new JSONArray(data);
                for (int i = 0; i < jArray.getJSONArray(1).length(); i++) {
                    String SuggestKey = jArray.getJSONArray(1).getString(i);
                    suggest.add(SuggestKey);
                }

            } catch (Exception e) {
                Log.w("Error", e.getMessage());
            }
            if( watch )
                runOnUiThread(new Runnable() {
                    public void run() {
                        aAdapter = new ArrayAdapter<String>(
                            getApplicationContext(), R.layout.item, suggest);
                        autoComplete.setAdapter(aAdapter);
                        aAdapter.notifyDataSetChanged();
                    }
                });

            return null;
        }

    }
} 
```

# java - Android iText 文本提取

> ID：13008424
> 
> 赞同：1
> 
> 时间：2012-10-22T09:28:55.680
> 
> 标签：java, android, pdf, itext, pathing

伙计们，我在 android 中运行时遇到问题，但在 java 中运行时没有问题。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);   
    tv = (TextView) findViewById(R.id.txtview);
    Button bt = (Button) findViewById(R.id.button1);
    am = this.getAssets();
    bt.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // do something when the button is clicked
            try {
                parsePdf("android.resource://com.example.panalyzer_v1/raw/resume.pdf","android.resource://com.example.panalyzer_v1/raw/resume.txt");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
          }
      }
    );
}

public void parsePdf(String pdf, String txt) throws IOException {
    PdfReader reader = new PdfReader(pdf);
    PrintWriter out = new PrintWriter(new FileOutputStream(txt));
    for (int i = 1; i <= reader.getNumberOfPages(); i++) {
        out.println(PdfTextExtractor.getTextFromPage(reader, i));
    }
    out.flush();
    out.close();
} 
```

此代码将提取 PDF 中的整个文本并将其传输到文本文件中，但我不知道 Android 是否可以做到这一点。我认为我的问题是文件路径：`parsePdf("assets/Resume.pdf","assets/Resume.txt");`我无法使其工作。

我已经更改了路径，但错误没有解决。我调试了它，我仍然得到一个错误：

```
10-22 20:16:13.850: E/AndroidRuntime(657): FATAL EXCEPTION: main
10-22 20:16:13.850: E/AndroidRuntime(657): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.panalyzerdemo/com.example.panalyzerdemo.MainActivity}: java.lang.NullPointerException
10-22 20:16:13.850: E/AndroidRuntime(657):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-22 20:16:13.850: E/AndroidRuntime(657):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-22 20:16:13.850: E/AndroidRuntime(657):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-22 20:16:13.850: E/AndroidRuntime(657):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-22 20:16:13.850: E/AndroidRuntime(657):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 20:16:13.850: E/AndroidRuntime(657):  at android.os.Looper.loop(Looper.java:123)
10-22 20:16:13.850: E/AndroidRuntime(657):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-22 20:16:13.850: E/AndroidRuntime(657):  at java.lang.reflect.Method.invokeNative(Native Method)
10-22 20:16:13.850: E/AndroidRuntime(657):  at java.lang.reflect.Method.invoke(Method.java:521)
10-22 20:16:13.850: E/AndroidRuntime(657):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-22 20:16:13.850: E/AndroidRuntime(657):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-22 20:16:13.850: E/AndroidRuntime(657):  at dalvik.system.NativeStart.main(Native Method)
10-22 20:16:13.850: E/AndroidRuntime(657): Caused by: java.lang.NullPointerException
10-22 20:16:13.850: E/AndroidRuntime(657):  at com.example.panalyzerdemo.MainActivity.onCreate(MainActivity.java:36)
10-22 20:16:13.850: E/AndroidRuntime(657):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-22 20:16:13.850: E/AndroidRuntime(657):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-22 20:16:13.850: E/AndroidRuntime(657):  ... 11 more
10-22 20:16:16.831: I/Process(657): Sending signal. PID: 657 SIG: 9 
```

我知道问题所在`PdfReader reader = new PdfReader(pdf);`。我走错了吗？

PS：在调试方面，我是新手。如果它是错误的调试报告，请纠正我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:36:02.460

要在 Android 中打开资产文件，您应该使用`getAssets().open("Resume.txt")`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:36:18.010

您可以尝试 3 种解决方案。

1.  而不是将文件放在资产文件夹中，而是放在 res 下的原始文件夹中。并使用以下路径来引用它。“android.resource://[your_package_name]/raw/Resume.pdf”

2.  资产文件夹路径应该像这样给出 file:///android_asset/Resume.pdf

3.  无需将文件放在资产文件夹中，而是将其放在 SD 卡中，并且可以像这样获取 SD 卡根路径 Environment.getExternalStorageDirectory();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:10:52.110

啊是的！我解决了。而不是使用我使用的文件路径：

`reader = new PdfReader(getResources().openRawResource(R.raw.resume));`

# c# - 使用 RelativeSource 绑定到父对象属性

> ID：13008426
> 
> 赞同：3
> 
> 时间：2012-10-22T09:28:59.360
> 
> 标签：c#, wpf, binding, treeview, relativesource

我已经构建了一个基于 WPF 的 Treeview

项目
-子项目

如果选择了子项，我还想显示项的属性。

```
<StackPanel Grid.Column="2" DataContext="{Binding ElementName=myTreeView, Path=SelectedItem}">
  <TextBox Text="{Binding Path=Name, Mode=TwoWay}" />
  <TextBox Text="{Binding RelativeSource={???} Path=Name, Mode=TwoWay}" />
</StackPanel> 
```

我想我需要使用 RelativeSource 语句，但不太确定如何使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T09:44:43.570

```
 {Binding RelativeSource={RelativeSource AncestorType={x:Type typeOfAncestor}}, Path=Name, Mode=TwoWay} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T04:35:25.863

JesseJames 为您提供了使用 RelativeSource 的正确方法，但您可以使用 RelativeSource 做的最好的事情是绑定到 TreeViewItem 本身，它只是您的数据对象（即 ViewModel）的容器，这意味着您将无法访问您的数据对象属性（很容易）。

我认为在这种情况下绑定到容器对象会破坏您正在使用的 View-ViewModel 方法。您最好的选择是在您的 ViewModel 中创建一个 Parent 对象并绑定到该对象。所以现在你的集合中的每个对象都有一个对它的父对象的引用，现在可以直接绑定到它。

```
<StackPanel Grid.Column="2" DataContext="{Binding ElementName=myTreeView, Path=SelectedItem}">
  <TextBox Text="{Binding Path=Name, Mode=TwoWay}" />
  <TextBox Text="{Binding Parent.Name}" />
</StackPanel> 
```

另请注意，SelectedItem 属性返回您的数据对象而不是容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:44:09.853

我查看了您的代码，尝试简单地绑定到`Name`. `TreeViewItem`由于以下行，您的数据上下文似乎应该已经设置为： `<StackPanel Grid.Column="2" DataContext="{Binding ElementName=myTreeView, Path=SelectedItem}">`。绑定可能正在进一步查找逻辑树，这`RelativeResource`就是绑定失败的原因。

# c# - 如何使用索引 # 格式化 SelectSingleNode xPath？

> ID：13008427
> 
> 赞同：0
> 
> 时间：2012-10-22T09:29:07.287
> 
> 标签：c#, xml

我想选择带有索引 # 的 SelectSingleNode，因为我的路径相同的元素很少。

```
xDoc.DocumentElement.SelectSingleNode(xPath).InnerText = xValue.ToString(); 
```

当 xPath 是以下字符串时：

"/Parameter [@tag='tool_od']/Value/ValueSeries/ **Value[Index=1]** /value"

或“/Parameter [@tag='tool_od']/Value/ValueSeries/ **Value[1]** /value”

或“/Parameter [@tag='tool_od']/Value/ValueSeries/ **Value[@Index=1]** /value”

所有这些选项都给我一个错误：“对象引用未设置为对象的实例。”

这是 xml 的一部分：我希望能够使用 selectsinglenode 访问每个孩子。

```
<ValueSeries>
            <Value>
              <value>25</value>
            </Value>
            <Value>
              <value>999012.0</value>
            </Value>
            <Value>
              <value>999012.0</value>
            </Value>
</ValueSeries> 
```

如果我将删除索引部分，路径将正常工作，但它只会访问第一个元素而不是其他元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:56:07.410

我的错误是由于使用索引“0”，第一个索引是 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:45:32.307

如果无法看到您的输入 xml，就很难确定您的问题到底是什么。

请注意，您不需要使用`xDoc.DocumentElement`，因为您的 xpath 无论如何都是指根节点（/），所以您可以只使用`xDoc.SelectSingleNode(...`.

如果您正在寻找“ValueSeries”的第一个“Value”元素，那么您的第二个 xpath 看起来是正确的（值是否包含值？），但这取决于您的 xml 的样子。

“对象引用”错误是由于 SelectSingleNode 返回 null（因为找不到您的 xpath），并且您正在尝试设置属性 InnerText。

# clojure - 运行 clojure jar 时出现 ClassNotFoundException

> ID：13008429
> 
> 赞同：1
> 
> 时间：2012-10-22T09:29:15.660
> 
> 标签：clojure, netbeans-6.9, enclojure

我正在尝试运行 clojure jar 文件，但出现以下错误：

```
C:\Users\Nahashon>java -jar C:\Users\Nahashon\.m2\repository\org\enclojure\sample\0.0.1\sample-0.0.1.jar
Exception in thread "main" java.lang.NoClassDefFoundError: com/mode/mdzw

Caused by: java.lang.ClassNotFoundException: com.mode.mdzw
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: com.mode.mdzw. Program will exit. 
```

clojure 项目是在 netbeans 6.9.1 上使用 maven 创建的。并且clojure代码如下：

```
(ns com.mode.mdzw
(:gen-class))

(defn -main []
(println "Looks like it works!")) 
```

POM 文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<properties>
    <clojure.version>1.1.0</clojure.version>
</properties>
<modelVersion>4.0.0</modelVersion>
<groupId>org.enclojure</groupId>
<artifactId>sample</artifactId>
<version>0.0.1</version>
<name>mdzw</name>
<description>mdzw</description>
<build>
 <sourceDirectory>src/main/clojure</sourceDirectory>
 <testSourceDirectory>src/test/clojure</testSourceDirectory>
    <resources>
        <resource>
            <directory>src/main/clojure</directory>
        </resource>
        <resource>
            <directory>src/main/resources</directory>
        </resource>
    </resources>
    <testResources>
        <testResource>
            <directory>src/test/clojure</directory>
        </testResource>
    </testResources>
<plugins>
  <plugin>
    <groupId>com.theoryinpractise</groupId>
    <artifactId>clojure-maven-plugin</artifactId>
    <version>1.3.2</version>
    <configuration>
        <sourceDirectories>
            <sourceDirectory>src/main/clojure</sourceDirectory>
        </sourceDirectories>
        <clojureOptions>-Xmx1G</clojureOptions>
    </configuration>
    <executions>
      <execution>
        <id>compile-clojure</id>
        <phase>compile</phase>
        <goals>
          <goal>compile</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
      <source>1.5</source>
      <target>1.5</target>
    </configuration>
  </plugin>

  <!-- -->
   <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <configuration>
            <archive>
                <manifest>
                    <addClasspath>true</addClasspath>
                    <mainClass>classes.com.mode.mdzw</mainClass>
                    <classpathPrefix>dependency</classpathPrefix>
                </manifest>
            </archive>
        </configuration>
    </plugin>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <executions>
            <execution>
                <id>copy-dependencies</id>
                <phase>package</phase>
                <goals>
                    <goal>copy-dependencies</goal>
                </goals>
            </execution>
        </executions>
    </plugin>

</plugins>
</build>
<repositories>
  <repository>
  <id>central</id>
  <url>http://repo1.maven.org/maven2</url>
  </repository>
<repository>
  <id>clojure-releases</id>
  <url>http://build.clojure.org/releases</url>
</repository>
<repository>
  <id>incanter</id>
  <url>http://repo.incanter.org</url>
</repository>
<repository>
  <id>clojure-snapshots</id>
  <url>http://build.clojure.org/snapshots</url>
</repository>
<repository>
  <id>clojars</id>
  <url>http://clojars.org/repo/</url>
</repository>
</repositories>
<dependencies>
  <dependency>
   <groupId>org.clojure</groupId>
   <artifactId>clojure</artifactId>
   <version>${clojure.version}</version>
  </dependency>
  <dependency>
   <groupId>org.clojure</groupId>
   <artifactId>clojure-contrib</artifactId>
   <version>${clojure.version}</version>
  </dependency>
  <dependency>
   <groupId>swank-clojure</groupId>
   <artifactId>swank-clojure</artifactId>
   <version>1.1.0-SNAPSHOT</version>
    <exclusions>
      <exclusion>
        <groupId>org.clojure</groupId>
        <artifactId>clojure</artifactId>
      </exclusion>
      <exclusion>
        <groupId>org.clojure</groupId>
        <artifactId>clojure-contrib</artifactId>
      </exclusion>
    </exclusions>
   </dependency>
  </dependencies>
</project> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:51:56.627

如果您刚刚开始，我建议您使用[leiningen](https://github.com/technomancy/leiningen)，此时您可以尝试[上面的 Ankur 建议](https://stackoverflow.com/questions/13008429/classnotfoundexception-when-running-clojure-jar#comment17683817_13008429)或`:main`在 project.clj 中设置一个。

```
(defproject org.enclojure/sample "0.1.0-SNAPSHOT"
  :dependencies [[org.clojure/clojure "1.4.0"]]
  :main com.mode.mdzw) 
```

然后只需运行`lein run`即可启动您的程序。如果你想要一个 jar，你可以在没有 lein 的情况下执行，用`lein uberjar`.

有关更多信息，请参阅[leiningen 教程](https://github.com/technomancy/leiningen/blob/preview/doc/TUTORIAL.md)。

如果您想坚持使用 maven（我没有使用太多），您可能应该查看[clojure-maven-plugin](https://github.com/talios/clojure-maven-plugin)的文档，该文档已经在您的 pom 中，但可能设置不正确。它提供了一个`clojure:compile`可能满足您需要的目标。

我想一个明显的问题是，你在跑步之前要达到什么目标`java -jar C:\Users\Nahashon\.m2\repository\org\enclojure\sample\0.0.1\sample-0.0.1.jar`？

# java - DefaultMessageListenerContainer，让 sessionTransacted-property 工作？

> ID：13008431
> 
> 赞同：3
> 
> 时间：2012-10-22T09:29:20.447
> 
> 标签：java, transactions, jms, spring-transactions, spring-jms

进展如何，让 DefaultMessageListenerContainer 控制事务...据我所知，我只需向 DMLC 提供 sessionTransacted-property。我的目标是将消息放回队列，如果发生一些错误......

已经找了好久，但没有找到任何东西......

**我的 Spring-config（它的一部分）：**

```
<bean id="abstractMessageListenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer" abstract="true">
    <property name="connectionFactory" ref="connectionFactory" />
    <property name="maxConcurrentConsumers" value="5"/>
    <property name="receiveTimeout" value="10000" />
</bean>

<bean class="org.springframework.jms.listener.DefaultMessageListenerContainer" parent="abstractMessageListenerContainer">
    <property name="destinationName" value="MY.QUEUE" />
    <property name="messageListener" ref="myMessageListener" />
            <property name="sessionTransacted" value="true" />
</bean>

<bean id="myMessageListener" class="my.package.structure.ListenerClass"></bean> 
```

**我的听众班：**

```
public class ListenerClass implements MessageListener {

    public void onMessage(Message msg) {

    }

} 
```

是否只是通过抛出未经检查的异常（如 java.lang.IllegalStateException）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:28:51.213

如果抛出未经检查的异常，消息将回滚！无法抛出已检查的异常，因为在 MessageListener 接口的 onMessage 方法的方法签名中没有提及它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T19:39:08.237

您对 的假设是正确的`sessionTransacted`，如果设置为 true 以防侦听器发生任何故障，则消息将回滚 - 这基本上意味着消息将返回队列中进行重试。通常，代理允许的重试次数是有限制的，如果超过阈值，消息将最终进入 DLQ（死信队列）。

# android - 在 Fling 事件上制作动画

> ID：13008435
> 
> 赞同：3
> 
> 时间：2012-10-22T09:29:40.983
> 
> 标签：android, android-animation, android-gesture

```
package com.example.flingtry;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.graphics.drawable.AnimationDrawable;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.View.OnClickListener;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity implements OnClickListener 
{
    private static final int SWIPE_MIN_DISTANCE = 10;
    private static final int SWIPE_MAX_OFF_PATH = 50;
    private static final int SWIPE_THRESHOLD_VELOCITY = 10;
    private GestureDetector gestureDetector;
    TextView img;
    AnimationDrawable ribinclickanimation;
    Button btn1;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        gestureDetector = new GestureDetector(new MyGestureDetector());
        img= (TextView) findViewById(R.id.img);
        img.setBackgroundResource(R.anim.clickframeanimation);
        ribinclickanimation= (AnimationDrawable) img.getBackground();
        btn1= (Button) findViewById(R.id.btn1);
        btn1.setOnClickListener(this);
        // Set the touch listener for the main view to be our custom gesture listener
        img.setOnTouchListener(new View.OnTouchListener() 
        {
            public boolean onTouch(View v, MotionEvent event) 
            {
                if (gestureDetector.onTouchEvent(event)) 
                {
                    return true;
                }
                return false;
            }
        });
    }
    class MyGestureDetector extends SimpleOnGestureListener 
    {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) 
        {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH && Math.abs(velocityY) > SWIPE_THRESHOLD_VELOCITY) 
            {
                ribinclickanimation.stop();
                Toast.makeText(getApplicationContext(), "Helloooo", Toast.LENGTH_SHORT).show();
                img.setBackgroundResource(R.anim.clickframeanimation);
                ribinclickanimation= (AnimationDrawable) img.getBackground();
                ribinclickanimation.start();
                return false;
            }
            return false;
        }

        // It is necessary to return true from onDown for the onFling event to register
        @Override
        public boolean onDown(MotionEvent e) 
        {
                return true;
        }
        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2,float distanceX, float distanceY) 
        {
            // beware, it can scroll to infinity
            return true;
        }
    }
    public void onClick(View arg0) 
    {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), "Helloooo", Toast.LENGTH_SHORT).show(); 
    }
} 
```

此代码用于使用手势在投掷事件上为图像设置动画。但这里的问题是，在拖动完成后动画需要时间。我想要的是当我向下拖动时，图像应该同时动画。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-01T10:54:14.430

建议使用 onTouch 而不是手势监听器

为 MotionEvent.ACTION_DOWN 编写案例：MotionEvent.ACTION_UP: 和 MotionEvent.ACTION_MOVE

一旦你检测到在 MotionEvent.ACTION_MOVE 中移动的方向，根据你想要的方向使用 view.setTranslationX 或 view.setTranslationY .... 在某些拖动/移动后休息你想要的东西，你可以在 MotionEvent.ACTION_UP 中写入视图

这只是 google it 的指令，以获取可用代码的示例代码负载

# sass - 可以覆盖容器的默认装订线值吗？

> ID：13008440
> 
> 赞同：2
> 
> 时间：2012-10-22T09:29:51.400
> 
> 标签：sass, susy-compass

是否可以使用基本值覆盖容器的默认装订线值，例如：

```
$total-columns: 12;
$column-width: 60px;
$gutter-width: 20px;
$grid-padding: 10px; 
```

这样您就可以根据需要将装订线从 20px 最小化到例如仅 5px 或任何其他所需值。

```
.example{
    @include squish(1,1);
    li{
        @include span-columns(2,10);
        @include nth-omega(5n);
      }
} 
```

是否可以通过mixin，我必须放置另一个容器/布局还是应该坚持使用纯CSS来解决该任务？谢谢

***更新：*** 更具体地说，我不寻找排水沟的确切尺寸（据我目前所读，由于四舍五入，无论如何都会很困难），我只想最小化排水沟并扩大列间接宽度。

[https://dl.dropbox.com/u/8578/Boxes.png](https://dl.dropbox.com/u/8578/Boxes.png)

目前，我在包含的 7 列及其排水沟之前和之后挤压了 3 列。到目前为止，列及其图像的宽度太小。因此，我想缩小排水沟宽度并间接扩大列宽。

Susy 设置看起来是这样的：

```
$total-columns: 24;
$column-width: 3%;
$gutter-width: 1%;
$grid-padding: 0; 
```

到目前为止我还没有设置容器宽度，因为容器位于整个页面的包装器内。

```
.wrapper {
    @include container;
    overflow-x: hidden;
    width:100%;
    max-width: 100%;
} 
```

屏幕截图中显示的图像矩阵的具体选择器如下：

```
.projects {
    @include squish(3,3);
    li {
        @include span-columns(2,14);
        @include nth-omega(7n);
    }
} 
```

您需要更多详细信息吗？那么您是否仍然建议使用 with-grid-settings mixin 来解决该问题？set-container-width mixin 真的有必要吗？想过如果我设置相对的东西就不需要绝对值吗？谢谢拉尔夫

***更新 2：***

Ufff 我尝试了下面评论中提到的建议的小秘密方法。但到目前为止，我无法得到一个干净的显示，更像是一个混乱的“拼凑而成”......;) 有点令人困惑。基本上文章作者推荐了2个步骤。首先，他为包含元素的内容添加了 -100% margin-right，然后在下一步中将对象推回原位。我在一系列尝试中的最后一个设置现在看起来像这样，但仍然没有解决方案。

```
 .example{
    @include squish(3,3);
    @include with-grid-settings($gutter: 0.1%){
    margin-right: -100%;
        li{
            @include span-columns(6,18);
            @include nth-omega(3n);
            @include pre(9);
        }
    }
} 
```

我已将margin-right 放置在“li”的包含元素中的with-grid-settings mixin 中，如建议的那样。但问题是在哪里放置 pre mixin，尤其是它应该包含哪些数字（是否也考虑了 squish 数字的数字）？所有 li 的值是否相同，或者是否需要一个 for 循环将图像单独推送到它们的水平位置？li 元素中的 mixin 顺序是否正确？放在哪里重要吗？在跨度列和第 n 个欧米茄之间还是在最后或中间？总之，我仍然很困惑。网格、图像矩阵和 Susy 仍然让我的大脑不停转动。：/

***更新 3：***

谢谢！我终于让它工作了。最后，我对我的解决方案有两个问题：

```
 .test{
    @include with-grid-settings($gutter: 0.1%){
        li{
            margin-right: -100%;
            float:left;
            @include span-columns(6,18);
            @include nth-omega(3n);
            $count:0;
            @for $i from 1 through 9 {
            &:nth-child(#{$i}) {
                $count: $count + 1;
                @include push($count);
                @if $count == 2{ $count: 0;}
                }   
            }   
        }
    }
} 
```

for循环的布局会有更优雅的方式吗？其次，为什么这个版本和我注释掉 $count 时的版本一样：$count + 1; 语句导致相同的视觉结果？实际上注释掉了 push 变量没有第二个和第三个计数。知道为什么在没有 $count: $count + 1; 的情况下仍然有效吗？谢谢！

***更新 4：*** 我玩了更多，结果证明以下版本就像一个魅力。似乎 $count 变量根本不需要，以及 push/pre mixin 中包含的值的增量增长。一个简单的 0 成功了。再次感谢您的帮助！！！

```
 .test{
    @include with-grid-settings($gutter: 0.5%){
        li{
            margin-right: -100%;
            @include span-columns(6,18);
            @include nth-omega(3n);
            @for $i from 1 through 9 
            {
                &:nth-child(#{$i}) 
                {
                    @include push(0);
                }   
            }   
        }
    }
  } 
```

***更新 5***

我在下面的最后一条评论中已经提到，更新 4 中显示的示例并没有像乍一看那样好。我现在尝试完全重建 Palantir 文章中的建议。下面是 7x4 的 scss 部分以及视频中显示的 3x3 矩阵：[https ://dl.dropbox.com/u/8578/matrix.mov](https://dl.dropbox.com/u/8578/matrix.mov)

```
.7x3{
    @include with-grid-settings($gutter: 0.25%){
        li{
            margin-right: -100%;
            @include trailer(1);
            @include span-columns(2,14);
            @include nth-omega(7n);
            $y: 0;
            @for $x from 1 through 28
            {
                &:nth-child(#{$x}){
                margin-left: ($y * columns(2,14)) + ($y * gutter(14));
                $y: $y + 1;
                @if $y > 6{
                  $y: 0;
                }

                }
            }
        }
    }
}

.3x3{
    @include with-grid-settings($gutter: 1%){
        li{
            margin-right: -100%;
            @include trailer(1);
            @include span-columns(6,18);
            @include nth-omega(3n);
            $j: 0;
            @for $i from 1 through 9
            {
                &:nth-child(#{$i}){
                    margin-left: ($j * columns(6,18)) + ($j * gutter(18));
                    $j: $j + 1;
                    @if $j > 2{
                      $j: 0;
                    }
                }
            }
        }
    }
} 
```

乍一看，矩阵看起来很破碎，但如果您仔细查看视频中的检查器，似乎每个元素都被推到两个矩阵中的正确水平位置。唯一的问题是每个 li 都包含在单独的行中。这是我能得到的最接近的版本。：/现在我不知道如何将这些部分放在一起以获得适当的矩阵。我或多或少地尝试了浮动和显示属性的可能性。但没有运气。有人可能有提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:35:30.080

您可以使用`with-grid-settings()`（[参考文档](http://susy.oddbird.net/guides/reference/#ref-with-settings)）来包装您的代码：

由于您不想更改实际的容器宽度，我们可以不用管它。如果您希望`.projects`填充 (from `squish()`) 受到影响，这取决于您，但我假设您不会。在这里，只需更改`$gutter-width`s `li`：

```
@include with-grid-settings($gutter: .5%) {
  li {
    @include span-columns(2,14);
    @include nth-omega(7n);
  }
} 
```

而已。如果您确实想要其他任何东西来使用调整后的设置，只需将它们移动到 mixin 中。

# mysql - 如何显示结果并处理错误#1242？

> ID：13008450
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:30:16.427
> 
> 标签：mysql, mysql-error-1242

我想要：

```
if the value qty_out! = 0, then set qty_out = 0 
```

帮我显示结果

```
SELECT
    SUBSTR(stok_control.tgl_faktur,9,2) AS 'tanggal',
    SUBSTR(stok_control.tgl_faktur,6,2) AS 'bulan',
    CONCAT(
        (SELECT(
            IFNULL(stok_control.faktur_beli,''))
        )       
        ,
        (SELECT(
            IFNULL(stok_control.faktur_jual,''))
        )
    ) AS 'faktur',
    bahan.id AS 'kode_bahan',
    bahan.nm_bahan AS 'nama_bahan',

    stok_control.qty_in AS 'masuk',
    (
    SELECT IF(stok_control.qty_out != '',0,0) 
    FROM 
        stok_control
    WHERE 
        stok_control.faktur_beli !=''
    ) AS 'keluar'

FROM
    stok_control 
LEFT JOIN bahan ON stok_control.id_bahan=bahan.id 
```

* * *

@eggyal，我已将您的代码更改为：

```
SELECT 
    SUBSTR(sc.tgl_faktur, 9, 2) AS 'tanggal',
    SUBSTR(sc.tgl_faktur, 6, 2) AS 'bulan',
    CONCAT(
        IFNULL(sc.faktur_beli, ''),
        IFNULL(sc.faktur_jual, '')
        ) AS 'faktur',
    b.id        AS 'kode_bahan',
    b.nm_bahan  AS 'nama_bahan',
    (SELECT IFNULL(sc.qty_in,0))  AS 'masuk',
    (SELECT
        (
            IF(faktur_beli <> '',
                0,
                (SELECT sc.qty_out)
            ) 
        )

    ) AS 'qty_out'
FROM   
    stok_control sc LEFT JOIN bahan b ON sc.id_bahan = b.id 
```

我试图引用一个现有但仍然存在的错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:44:34.057

> 我想要：
> 
> ```
> if the value qty_out! = 0, then set qty_out = 0 
> ```

你的意思是你想`qty_out`成为 0 而不管它的原始值是多少？

```
SELECT SUBSTR(sc.tgl_faktur, 9, 2) AS tanggal,
       SUBSTR(sc.tgl_faktur, 6, 2) AS bulan,
       CONCAT(
         IFNULL(sc.faktur_beli, ''),
         IFNULL(sc.faktur_jual, '')
       )                           AS faktur,
       b.id                        AS kode_bahan,
       b.nm_bahan                  AS nama_bahan,
       sc.qty_in                   AS masuk,
       0                           AS qty_out
FROM   stok_control sc LEFT JOIN bahan b ON sc.id_bahan = b.id 
```

# php - 我们可以在 yii 中指定默认控制器和操作

> ID：13008453
> 
> 赞同：12
> 
> 时间：2012-10-22T09:30:32.410
> 
> 标签：php, yii

我在 yii 中创建了一个项目，我的默认控制器指向站点控制器。我想用其他一些来改变它，我可以在 yii 中指定默认控制器和操作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T09:41:22.157

在 config main.php 中添加配置

```
return array(
    'name' => 'Web Application',
    'defaultController' => 'home', 
    ......
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:19:12.030

更改默认控制器的完美解决方案。部分问题还在于更改默认操作。如果您设置`'defaultController' => 'home',`了默认操作`'index' (unless set otherwise)`，您可以在控制器中更改它，如下所示：

```
class HomeController extends CController
{

  public $defaultAction = 'someotheraction';

  public function actionSomeotheroaction()
  {

  }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-24T14:37:40.570

您可以在返回数组 protected/main.php 中添加任何位置

```
return array(
    ......
    'defaultController' => 'index', 
    ......
); 
```

如果您在模块库中工作，那么您可以添加

```
'defaultController' => 'shop/index', 
```

商店是模块，索引是控制器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-25T15:17:11.240

您可以在项目目录 protected/main.php 中将控制器设置为默认控制器，将此代码添加到数组中，如 $configArray = array()

```
$configArray =  array
(
    'name'=>'Web Appname',
    'defaultController'=>'index'
    ......
); 
```

并在Controller中设置默认动作

```
class NameController extends AdminCoreController
{
    public $defaultAction = 'index'; 
} 
```

# c# - 将双打加在一起

> ID：13008458
> 
> 赞同：1
> 
> 时间：2012-10-22T09:30:44.803
> 
> 标签：c#, double

我有一个文本文件，其中包含两个代表货币金额的数字。当我将它们读为双打时，假设： double a = 73.7926 double b = 1.1

并将它们加在一起，结果是：`74.892599999999987` 我希望有`74.8926`

知道为什么会这样以及我需要做什么才能在不四舍五入的情况下获得预期的结果吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T09:34:06.800

对于该特定任务，您可以使用[十进制](http://msdn.microsoft.com/en-us/library/364x0z75.aspx)类型而不是双精度类型。

```
decimal a = 73.7926M; 
decimal b = 1.1M;
decimal d = a + b; 
```

您应该看到：[理解 IEEE 浮点错误的教程](http://support.microsoft.com/kb/42980)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T09:33:46.893

> ## [每个程序员都应该知道的关于浮点运算的知识](http://floating-point-gui.de/)
> 
> 所以你写了一些荒谬的简单代码，例如：
> 
> ```
> 0.1 + 0.2 
> ```
> 
> 并得到了一个非常出乎意料的结果：
> 
> ```
> 0.30000000000000004 
> ```
> 
> 也许您在某个论坛上寻求帮助并被指向一篇长篇文章，其中包含许多似乎对您的问题没有帮助的公式。
> 
> 好吧，这个网站是为了：
> 
> *   简明扼要地解释为什么你会得到意想不到的结果
> *   告诉你如何处理这个问题
> *   如果您有兴趣，请深入解释为什么浮点数必须这样工作以及可能出现的其他问题
> 
> 您应该首先查看基本答案 - 但不要停在那里！

如果你想代表金钱，你应该使用小数（以 10 为底的浮点数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-10T11:42:09.177

```
result = Math.Round(result, 4, MidpointRounding.AwayFromZero); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:33:56.990

使用十进制而不是双精度。为什么，你可以在这里阅读：http: [//social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/921a8ffc-9829-4145-bdc9-a96c1ec174a5](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/921a8ffc-9829-4145-bdc9-a96c1ec174a5)

# ruby-on-rails - 使用自定义设计路线时，设计不会重定向到 after_sign_up_path

> ID：13008462
> 
> 赞同：0
> 
> 时间：2012-10-22T09:30:57.643
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2

我通过在继承的 registrations_controller 中定义 after_sign_up_path_for(resource) 来调用它：

```
class RegistrationsController < Devise::RegistrationsController

  protected

  def after_sign_up_path_for(resource)
    new_user_profile_path(resource)
  end

end 
```

如果我不自定义路由，此重定向工作正常。但是，当我这样做时，它不再起作用。我的路线文件有：

```
devise_for :users, skip: [:sessions], controllers: { registrations: "registrations" }

devise_scope :user do
  get 'signin' => 'devise/sessions#new', as: :new_user_session
  post 'signin' => 'devise/sessions#create', as: :user_session
  delete 'signout' => 'devise/sessions#destroy', as: :destroy_user_session
  get 'signup' => 'devise/registrations#new', as: :new_user_registration
  post 'signup' => 'devise/registrations#create', as: :user_registration
  root to: 'pages#home'
end 
```

具体来说，post 'signup' => 'devise/registrations#create', as: :user_registration 行把事情搞砸了。如果那不存在，它工作正常。但是，如果不存在，那么当由于验证错误导致注册失败时，URL 默认为 /users 而不是 /signup，这是不受欢迎的行为。

任何人都知道这是我做错了什么还是设计中有错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:28:05.953

您的自定义路由的问题是您被指向设计控制器：

```
post 'signup' => 'devise/registrations#create', as: :user_registration 
```

这显然行不通。改为指向您自己的控制器：

```
post 'signup' => 'registrations#create', as: :user_registration 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:58:25.093

只是简单地看一下你提供的代码，我不认为你想要的路线是 new_user_profile_path。您可能需要 user_profile_path，您可以运行 rake 路由并将输出粘贴到此处吗？

# sql - 如何从 sql server 2005 中的字符串/文本字段中提取日期字段

> ID：13008464
> 
> 赞同：1
> 
> 时间：2012-10-22T09:31:06.910
> 
> 标签：sql, tsql, sql-server-2005, stored-procedures, clrstoredprocedure

在称为描述的表中有一个文本文件。当使用 sql server 2005 存储过程出现“~”字符时，我想从该字符串中提取两个日期字段。在这种情况下帮助我。

示例：字符串：'租赁租赁；10/12 ~ 10/31/2012'。在出现 ~ 运算符时，我希望拥有从日期：20121001 和到日期：20121031。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:14:22.313

在这种情况下，您可以使用以下内容，但实际上您需要一个 exists 子句或类似的东西来测试波浪号 (~) 的字符串，正如其他所有人所说，这仅在字符串始终具有分号 (;) 和波浪号（~）。如果需要，您可以将字符串转换为日期时间字段。我已将字符串放在变量中以使其更易于阅读...

将@string 声明为 NVARCHAR(255)

SET @string = '延期租赁;10/1012 ~ 1/0/31/2012'

SELECT StartDate = SUBSTRING(@string,CHARINDEX(';',@string)+1,LEN(@string)-CHARINDEX('~',@string)-1) ,EndDate = LTRIM(RIGHT(@string,LEN( @string)-CHARINDEX('~',@string)))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:25:39.627

这是一个给出开始和结束日期的方法。我保留了大部分测试选择，但注释掉了。

```
DECLARE @string AS NVARCHAR(255)
DECLARE @Seperator as char(1) = '~'
declare @CharStartDate as varchar(10)
declare @CharStopDate as varchar(10)
declare @StartDate as date
declare @StopDate as date

declare @I int

--SET @string = 'xvvvvvvcc;1/09/2012 ~ 1/10/2012xx'
--SET @string = 'xvvvvvvcc;12/31/2012 ~ 1/1/2012xx'
--SET @string = 'xvvvvvvcc;12/1/2012 ~ 10/0/2012xx'
SET @string = 'xvvvvvvcc;1/2/2012 ~ 1/3/2012xx'
--longest date 12/31/2011 = 10
--shortest date 1/1/2012 = 8
-- width of seperator = 3 

SELECT 
@CharStartDate = substring (@string, CHARINDEX(@Seperator,@string)-11,10)
,@CharStopDate = substring (@string, CHARINDEX(@Seperator,@string)+2,10)

--SELECT  @CharStartDate,@CharStopDate

select @I = ascii(substring(@CharStartDate,1,1))
While @I > 57
BEGIN
set @CharStartDate = substring(@CharStartDate,2,10)
--select @CharStartDate
select @I = ascii(substring(@CharStartDate,1,1))
END

select @I = ascii(substring(REVERSE(@CharStopDate),1,1))
While @I > 57
BEGIN
set @CharStopDate = REVERSE(substring(REVERSE(@CharStopDate),2,10))
--select @CharStopDate
select @I = ascii(substring(REVERSE(@CharStopDate),1,1))
END

--select ascii(';'),ascii('9'),ascii('8'),ascii('7'),ascii('6'),ascii('6'),ascii('4'),ascii('3'),ascii('2'),ascii('1'),ascii('0')
SELECT  @StartDate = @CharStartDate,@StopDate = @CharStopDate
--SELECT  @I,@string,@Seperator,@CharStartDate,@CharStopDate,@StartDate,@StopDate
select datediff(dd,@StartDate,@StopDate) AS 'DateDiff',@StartDate as 'Start Date',@StopDate as 'Stop Date' 
```

我会把它留给你检查分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:05:47.667

```
CREATE FUNCTION [dbo].[RemoveAlphaCharacters](@Temp nvarchar(max))
RETURNS nvarchar(max)
AS
BEGIN
  WHILE PatIndex ('%[^0-9~/]%', @Temp) > 0
  SET @Temp = Stuff(@Temp, PatIndex('%[^0-9~/]%', @Temp), 1, '')
  RETURN @Temp
END

DECLARE @string nvarchar(max) = '长期租金;10/1/2012 ~ 10/31/2012'
SELECT CONVERT(date, SUBSTRING([dbo].[RemoveAlphaCharacters](@string), 0,
       CHARINDEX('~', [dbo].[RemoveAlphaCharacters](@string))), 101) AS BDate,
       CONVERT(date, SUBSTRING([dbo].[RemoveAlphaCharacters](@string),
       CHARINDEX('~', [dbo].[RemoveAlphaCharacters](@string)) + 1,
       CHARINDEX('~', REVERSE([dbo].[RemoveAlphaCharacters](@string)))), 101) AS EDate 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2021-05-29T14:18:31.223

我从未使用过旧版本的 SQL，因为我刚毕业，但它没有 EXTRACT() 函数吗？.. 语法如下所示。

```
SELECT First_Name ,    

    EXTRACT ( CAST(Created_date AS DATE) FROM Created_date ) AS Date_only ; 
```

您指定“First_name”以让 SQL 知道您希望将其作为一列，并且“created_date”是您尝试从中分隔日期的字段。cast 函数在提取之前将您的字段转换为 DATE 值。

我希望这有帮助 。谢谢你。如果我错了，请告诉我我想提高自己。

# javascript - 没有 javascript 的后备解决方案

> ID：13008465
> 
> 赞同：0
> 
> 时间：2012-10-22T09:31:09.987
> 
> 标签：javascript, css, twitter-bootstrap, fallback, noscript

Bootstrap 有自己的 javascript 版本的[复选框、单选按钮](http://twitter.github.com/bootstrap/javascript.html#buttons)、[折叠](http://twitter.github.com/bootstrap/javascript.html#collapse)等。

单选按钮示例：

```
<div class="btn-group" data-toggle="buttons-radio">
  <button type="button" class="btn">Left</button>
  <button type="button" class="btn">Middle</button>
  <button type="button" class="btn">Right</button>
</div> 
```

只要您启用了 JS，这看起来就很棒。我喜欢 JS，但我也是***NoScript***用户，我希望页面在没有 JS 的情况下也能正常工作。

正如我所见，twitter-bootstrap 没有内置的后备解决方案。我可以使用我自己的标签或仅在启用 JS 时显示引导按钮，但我以某种方式期望引导可以处理这个问题。

我想到的唯一解决方案是使用标准单选按钮、复选框等，如果启用了 JS，则用上面的类似代码替换/隐藏它们。

我也很失望地看到像[崩溃](http://twitter.github.com/bootstrap/javascript.html#collapse)这样的一些简单的事情没有备用解决方案，至少可以使用 css3 转换来处理它，或者至少只是打开所有子 div 并保持它们打开。

对于没有 JS 的引导程序，您是否有一些想法/解决方案，或者是唯一的解决方案编写一个函数来“隐藏单选按钮，如果启用了 javascript，则显示/创建 boostrap-divs”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:42:25.383

您可以在没有 javascript 的情况下处理它，但这需要它将它发送到服务器端脚本或至少一个表单来提交它。由于大多数用户（我认为大约 99%）都启用了 javascript，因此您应该在没有激活 javascript 时禁用该功能。

# jenkins - 如何在 pom.xml 文件中添加开发人员列表。每当构建失败时，它都会发送通知

> ID：13008467
> 
> 赞同：0
> 
> 时间：2012-10-22T09:31:12.090
> 
> 标签：jenkins, pom.xml

目前我正在使用 jenkins 进行持续集成，我将 poll scm 配置为 45 分钟。每当构建失败时，它都会向开发人员发送失败通知。现在我想在 pom.xml 中配置开发人员列表。从这里詹金斯应该阅读并发送失败通知，提交代码的人应该只收到失败通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:48:55.987

您需要的是一个名为“email-ext”的插件
[https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)

安装后，在构建后操作中，选中“可编辑电子邮件通知”然后，您可以选择“触发器”，例如“已修复”或“失败”或“成功”，以及让您选择发送对象的复选标记每个触发器的电子邮件。

您可以选择发送至：
收件人列表 - 预定义列表，全局或每个触发器
提交者 - 为本次结帐做出 SVN 更改的
人 罪魁祸首 - 自上次成功构建以来进行 SVN 更改的人
请求者 - 触发构建的用户

在您的特定情况下，您需要一个“失败”触发器，并且仅向“提交者”和可能的“罪魁祸首”发送电子邮件，并且不要选中收件人列表。

# svn - 我怎么知道我在哪里签出了这个工作副本？

> ID：13008469
> 
> 赞同：1
> 
> 时间：2012-10-22T09:31:16.687
> 
> 标签：svn

我有一个颠覆工作副本检出到目录`my-project/`中。

我签出`svn checkout URL`

我想在签出后找到 URL。有没有我可以在该工作副本目录中运行的命令来找出它被签出的身份？

我想使用命令行 SVN 客户端，而不是特定于任何操作系统的 GUI 程序。

如果可能的话，我想获得原始的结帐命令。但如果这不可能，我想获取 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:37:48.450

可能是你说的`svn info`？此命令显示您的 URL、工作副本路径、修订号等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:52:21.730

As mentioned before you can use

```
svn info . 
```

on your commandline client. On TortoiseSVN I use the **switch** command showing you as default your URL. You can enable in windows explorer(only win2k and XP) a special column "short URL" which shows you the information as well

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:36:21.077

您可以`svn info`在工作目录中使用来获取 URL 和各种其他存储库信息；

```
$ svn info
Path: .
URL: http://core.svn.wordpress.org/trunk
... 
```

# c# - 无法从 DataGrid 保存对上下文的更改

> ID：13008472
> 
> 赞同：1
> 
> 时间：2012-10-22T09:31:21.697
> 
> 标签：c#, entity-framework, wpfdatagrid

最近我安装了 VS2012 并尝试重新制作我的旧 WPF 项目。在 VS2010 中，该代码工作并且 Datagrid 中的所有更新或新行通过实体模型保存在 DB 中。在 VS2012 中，数据库中未添加新行。

```
 MyEntities context = new MyEntities();

    public MainWindow()
    {
        InitializeComponent();

    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        var selected = from row in context.Sources
                       select row;
        Datagrid.ItemsSource = selected.ToList();
    }

    private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        context.SaveChanges();
    } 
```

为什么没有添加新行？

# java - Java 部署、配置文件更改

> ID：13008473
> 
> 赞同：0
> 
> 时间：2012-10-22T09:31:31.023
> 
> 标签：java, jakarta-ee, deployment, configuration, configuration-files

我在服务器上部署了一个 java 项目。现在我想在“project/WebContent/WEB-INF/configuration.propertys”中进行一些更改。

我的问题是我是否需要在本地机器上进行更改并重新部署，或者我可以只在服务器目录中进行一些更改吗？正如我在服务器目录中看到的 configuration.propertys 文件，我怀疑我是否可以直接更改该文件，这是否会影响已部署的项目

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:36:04.973

是的，您不需要再次完成整个循环，只需更新服务器目录中已安装应用程序的属性文件并重新启动您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:47:49.687

我建议创建一个 DynamicMBean 对象来动态重新加载属性文件，它不需要重新启动服务器。我认为这是最好的生产质量解决方案之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:27:08.140

这取决于如何使用此属性文件。如果配置数据缓存在内部结构中，那么您必须启动这些结构的重新初始化以使更改生效。

但是，在某些容器中，如果您更改资源，您只会触发应用程序的自动重新部署。但这完全是特定于环境的。

# c# - 通过发送列表发送数据库

> ID：13008476
> 
> 赞同：1
> 
> 时间：2012-10-22T09:31:39.423
> 
> 标签：c#, database, list

我有一个 Windows 服务。它将每 5 分钟检查一次数据库，如果有新记录，它将发送到 Web 服务以将数据保存在另一个数据库中。

我的 WS 一个一个发送记录，现在我想发送一个列表。问题是如果有很多新记录，我想把它分成多个列表（每个列表有 50 条记录）并一一发送。

我想知道我该怎么做，有人有这个案例的解决方案吗？太感谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:43:00.807

1.  获取更改/新记录的列表。我们将其称为“要发送的列表”。
2.  创建一个仅包含要发送的列表的前 50 条记录的子列表。
3.  将该子列表发送到 Web 服务。
4.  从要发送的列表中删除这 50 条记录。
5.  如果要发送的列表不为空，请从步骤 2 开始重复。

# encoding - 如何避免在 symfony 1.1 中提交表单后字符集更改？

> ID：13008478
> 
> 赞同：0
> 
> 时间：2012-10-22T09:31:39.290
> 
> 标签：encoding, utf-8, character-encoding, symfony1

我有一个页面，一旦我提交，页面将加载相同的页面以显示错误消息，但页面提交后，我在页面中的日文文本没有正确解码，它显示了一些编码字符串. 我将使用 $this->forward 重定向到此页面，并且元标记中有 charset=UTF-8。

# unix - 比较 unix 中的 bz2 文件

> ID：13008482
> 
> 赞同：0
> 
> 时间：2012-10-22T09:31:47.910
> 
> 标签：unix, comparison, database-backups, stat, bzip2

我在 unix 服务器上管理多个数据库，并使用`mysqldump`. 由于（其中一些）这些数据库非常大（20+Gb），我通常使用`bzip2`, 压缩备份的 .sql 文件以获取压缩的 bz2 文件。

作为备份过程的一部分，我检查新备份文件的大小是否大于或等于先前备份文件的大小——我们每天都向这些数据库添加数据，但很少从这些数据库中删除数据数据库。

对备份文件大小的检查是对备份质量的检查 - 鉴于我们的数据库主要只是在大小上增长，如果新备份小于旧备份，则意味着 a) 某些内容已从数据库中删除（在这种情况下，我应该检查一下...）或 b）备份出了问题（在这种情况下，我应该检查一下原因...）。

但是，如果我比较 bz2 文件的大小 - 例如，使用比较（使用`test`） of `stat %s`，即使数据库的大小增加了，bz2 文件也可能缩小了 - 大概是因为更有效的压缩。

那么 - 我如何比较备份文件的大小？

*   一种选择是将之前的备份文件从 .bz2 解压缩为 .sql，然后比较这些 .sql 文件的大小。但是，鉴于这些文件非常大（20+Gb），压缩/解压缩可能需要一段时间......
*   另一种选择是将以前的备份文件保留为 .sql，然后再次比较 .sql 文件。这是我的首选选项，但需要注意确保我们最终不会出现大量 .sql 文件 - 因为这会很快耗尽我们的硬盘驱动器。

或者，SO 社区中的某个人可能有更好或更聪明的想法......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T19:34:33.197

可以将输入文件分成几部分（例如 100MB 块）并分别进行比较。由于即使输入不同，大小实际上也可能保持不变，因此您通常不应使用它来查找差异 - 而是使用 cmp 之类的东西来查看文件是否不同。

也可以将各个部分的 bz2 文件组合在一起，并获得一个完全有效的多流 bz2 文件，该文件可以再次整体解压缩而没有任何问题。您可能想查看 pbzip，它是 bzip 的并行实现，并使用这种机制将并行 bzip 并行化到多流 bz2 文件中，以加快 smp/多核系统上的进程。

至于为什么我建议将文件分成几部分：根据您的 mysql 设置，您的某些部分可能永远不会改变，并且数据实际上可能大部分会在最后附加 - 如果您可以确保这一点，您只需要比较整个转储的一小部分，这将加快进程。

不过，请注意，整个数据可能会在不添加或删除任何内容的情况下发生变化，因为 mysql 可能会在内存中使用数据（例如，OPTIMIZE 命令可能会导致这种情况）

如果您使用 InnoDB，则可以使用另一种拆分数据的方法 - 在这种情况下，您可以告诉 mysql（使用 my.cnf）每个表使用一个文件，因此您可以 a）单独 bzip 这些文件并仅比较可能的表实际上已经更改（如果您在某些表中有静态数据）和/或 b）保存表文件的最后修改日期，并事先比较（同样，这仅在您的表只有静态数据）

# tridion - Razor 帮助程序文件无法从 WebDAV URL 工作

> ID：13008486
> 
> 赞同：0
> 
> 时间：2012-10-22T09:31:59.040
> 
> 标签：tridion, razor-mediator

我在 Razor-Mediator 模板中使用了一些常用函数，

根据 Razor 文档，我们可以创建一个帮助文件并在其中定义所有常用函数。

```
<razor.mediator cacheTime="60" extractBinaries="true" adminUser="XXX\pgupta">
    <namespaces>
      <add namespace="System.Linq" />
      <add namespace="Tridion.Extensions.Mediators.Razor.Templating" />
    </namespaces>
    <assemblies>
      <!-- <add assembly="C:\Program Files\Assembly\Test.Sample.dll" /> -->
      <!--<add assembly="RazorSample.Test, Version=1.0.0.0, Culture=neutral, PublicKeyToken=60ad7434f03dfcdc" />-->
    </assemblies>
    <imports>
      <!--<add import="tcm:4-21631-2048" />-->
      <add import="/webdav/04 Vanilla Layout/Building Blocks/System/Template Building Blocks/Razor/razor.cshtml" />
      <add import="C:\Program Files (x86)\Tridion\Razor Mediator\helper.cshtml" />
      <!-- <add import="tcm:120-2200-2048" publications="020 Design Master,030 Another Web Design" />-->
    </imports>
    <importSettings includeConfigWhereUsed="true" includeImportWhereUsed="true" replaceRelativePaths="false" />
  </razor.mediator> 
```

当我在配置文件中定义物理路径时，我成功导入了这些所有功能。

但是，当我在配置文件中定义 wevDAV URL 时，它不起作用，

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:56:23.773

I see spaces in your webdav path - is it like this or do you have %20 and SO is stripping them out?

I usually write a small VBScript Page Template and put use this code to get the webdav URL:

```
[%
dim uri, item
uri = "tcm:0-0-0"  ' update this uri and use the item in the parent repository
set item = TDSE.GeTObject(uri, 1)
WriteOut item.info.WebdavUrl
%] 
```

Otherwise, the Razor 1.3 Mediator added Where Used functionality compatibility and this could be causing some issues. The source code was updated to 1.31 but a compiled version of it is not on the Google Code Downloads. You can grab the source and compile yourself to use the latest version: [http://code.google.com/p/razor-mediator-4-tridion/source/list](http://code.google.com/p/razor-mediator-4-tridion/source/list)

# actionscript - 如何生成 OpenLaszlo LZX SWF 运行时应用程序的 ActionScript 3 源代码

> ID：13008487
> 
> 赞同：1
> 
> 时间：2012-10-22T09:32:02.667
> 
> 标签：在开发 OpenLaszlo 应用程序时，生成用lzx, actionscript, openlaszlo, lzx

[在开发 OpenLaszlo 应用程序时，生成用lzx](/questions/tagged/lzx "显示标记为“lzx”的问题")编写的应用程序的 ActionScript 3 源代码有时会很有用，例如，当您想将 OpenLaszlo 编译成 Adob​​e AIR 应用程序时。

将 ActionScript 3 源代码生成到预定义文件夹中的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:55:23.100

`lzc`可以在has on 选项中找到的命令行工具`$LPS_HOME/WEB-INF/lps/server/bin/`：

```
--lzxonly
  for as3 runtime, emit intermediate as files, 
  but don't call backend as3 compiler 
```

默认情况下，OpenLaszlo 编译器会将 ActionScript 3 代码生成到系统特定的 Java 临时文件夹中，但`$JAVA_OPTS`环境变量可用于更改该文件夹。

`$JAVA_OPTS`以下是如何在 Linux 上结合使用该命令的示例：

**a) 创建一个简单的 LZX 文件，例如**

```
<canvas>  
  <button text="Hello world" />  
</canvas> 
```

并将其另存为`test.lzx`.

**b) 设置`$JAVA_OPTS`变量**
以下语法适用于 Linux 或 OS X：

```
export JAVA_OPTS="-Djava.io.tmpdir=./tmp -DXmx1024M" 
```

**c) 将 LZX 编译为 ActionScript 3**

```
> lzc --lzxonly test.lzx --runtime=swf10
Compiling: test.lzx to test.swf10.swf 
```

该`tmp`文件夹将包含生成的 ActionScript 3 文件

```
tmp
├── lzccache
└── lzswf9
    └── build
        └── test
            ├── app.swf
            ├── build.sh
            ├── LzApplication.as
            ├── $lzc$class_basebutton.as
            ├── $lzc$class_basecomponent.as
            ├── $lzc$class_basefocusview.as
            ├── $lzc$class_button.as
            ├── $lzc$class__componentmanager.as
            ├── $lzc$class_focusoverlay.as
            ├── $lzc$class__m2u.as
            ├── $lzc$class__m2v.as
            ├── $lzc$class__m2w.as
            ├── $lzc$class__m2x.as
            ├── $lzc$class__m2y.as
            ├── $lzc$class__m2z.as
            ├── $lzc$class__m30.as
            ├── $lzc$class__m31.as
            ├── $lzc$class__mm.as
            ├── $lzc$class__mn.as
            ├── $lzc$class__mo.as
            ├── $lzc$class__mp.as
            ├── $lzc$class_statictext.as
            ├── $lzc$class_style.as
            ├── $lzc$class_swatchview.as
            ├── LZC_COMPILER_OPTIONS
            ├── LzPreloader.as
            └── LzSpriteApplication.as 
```

文件夹结构遵循以下方案：

`{JAVA_TEMP_FOLDER}/lzswf9/build/{LZX_FILENAME_WITHOUT_ENDING}`，因此在我们的例子中

```
tmp/lzswf9/build/test/ 
```

主应用程序文件是`LzSpriteApplication.as`，您可以查看 build.sh 文件以了解如何使用 Flex SDK 的`mxmlc`命令来编译生成的源代码。

# grails - 如何使表单元素在 GSP 中只读？

> ID：13008489
> 
> 赞同：0
> 
> 时间：2012-10-22T09:32:09.063
> 
> 标签：grails, gsp

嗨，我在 GSP 中有一个表单，我想让所有表单元素在提交后只读。有没有办法做到这一点。我有表单元素，如文本框、下拉附件字段……我正在使用 G:Form

我也在我的 GSP 中使用 java 脚本。

请帮帮我

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:52:53.810

请记住，即使您在服务器端将标签设置为只读，用户仍然可以通过各种方式更改它们，并且无论表单上的值是什么，然后再将其发送回您。

您可以在表单标签中使用 onsubmit 事件，调用 JavaScript 函数，该函数将禁用您想要影响的任何表单元素。由于 GSP 是服务器页面，而不是浏览器，因此通常无法在这方面为您提供帮助。

当然，最简单的方法是使用 jQuery 的客户端：

```
$(function() {
  $('input, select, textarea').attr('disabled', 'disabled');
}); 
```

# iphone - 如何使用陀螺仪获得增强现实中两个近点之间的距离？

> ID：13008492
> 
> 赞同：2
> 
> 时间：2012-10-22T09:32:11.047
> 
> 标签：iphone, augmented-reality

我想知道是否有任何可能的方法可以通过使用陀螺仪来获得靠近的两点之间的距离。我正在使用相机在地板上的屏幕上指向两个点。我想获得两点之间的距离.有什么方法可以得到相同的

# android - 不幸的是 appname 已停止

> ID：13008495
> 
> 赞同：0
> 
> 时间：2012-10-22T09:32:16.293
> 
> 标签：android, android-emulator, android-mapview

我正在将 json 数据输入 mapview，但每当我运行我的应用程序时，不幸的是 appname 已停止，我在我的项目中使用 mapviewballoons 库，但我没有收到任何编程错误，代码工作正常，logcat 说：

```
 10-22 14:46:35.115: D/dalvikvm(718): GC_CONCURRENT freed 177K, 4% free 8260K/8519K, paused 32ms+5ms, total 87ms
10-22 14:46:35.115: D/dalvikvm(718): WAIT_FOR_CONCURRENT_GC blocked 44ms
10-22 14:46:35.124: W/CursorWrapperInner(718): Cursor finalized without prior close()
10-22 14:46:35.124: W/CursorWrapperInner(718): Cursor finalized without prior close()
10-22 14:46:35.274: D/AndroidRuntime(718): Shutting down VM
10-22 14:46:35.285: W/dalvikvm(718): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
10-22 14:46:35.314: E/AndroidRuntime(718): FATAL EXCEPTION: main
10-22 14:46:35.314: E/AndroidRuntime(718): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.json.mapview/com.example.json.mapview.Main}: android.os.NetworkOnMainThreadException
10-22 14:46:35.314: E/AndroidRuntime(718):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-22 14:46:35.314: E/AndroidRuntime(718):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-22 14:46:35.314: E/AndroidRuntime(718):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-22 14:46:35.314: E/AndroidRuntime(718):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-22 14:46:35.314: E/AndroidRuntime(718):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 14:46:35.314: E/AndroidRuntime(718):  at android.os.Looper.loop(Looper.java:137)
10-22 14:46:35.314: E/AndroidRuntime(718):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-22 14:46:35.314: E/AndroidRuntime(718):  at java.lang.reflect.Method.invokeNative(Native Method)
10-22 14:46:35.314: E/AndroidRuntime(718):  at java.lang.reflect.Method.invoke(Method.java:511)
10-22 14:46:35.314: E/AndroidRuntime(718):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-22 14:46:35.314: E/AndroidRuntime(718):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-22 14:46:35.314: E/AndroidRuntime(718):  at dalvik.system.NativeStart.main(Native Method)
10-22 14:46:35.314: E/AndroidRuntime(718): Caused by: android.os.NetworkOnMainThreadException
10-22 14:46:35.314: E/AndroidRuntime(718):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
10-22 14:46:35.314: E/AndroidRuntime(718):  at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
10-22 14:46:35.314: E/AndroidRuntime(718):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
10-22 14:46:35.314: E/AndroidRuntime(718):  at java.net.InetAddress.getAllByName(InetAddress.java:214)
10-22 14:46:35.314: E/AndroidRuntime(718):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
10-22 14:46:35.314: E/AndroidRuntime(718):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10-22 14:46:35.314: E/AndroidRuntime(718):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
10-22 14:46:35.314: E/AndroidRuntime(718):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
10-22 14:46:35.314: E/AndroidRuntime(718):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
10-22 14:46:35.314: E/AndroidRuntime(718):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
10-22 14:46:35.314: E/AndroidRuntime(718):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
10-22 14:46:35.314: E/AndroidRuntime(718):  at com.example.json.mapview.Main.onCreate(Main.java:64)
10-22 14:46:35.314: E/AndroidRuntime(718):  at android.app.Activity.performCreate(Activity.java:5008)
10-22 14:46:35.314: E/AndroidRuntime(718):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-22 14:46:35.314: E/AndroidRuntime(718):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-22 14:46:35.314: E/AndroidRuntime(718):  ... 11 more
10-22 14:46:35.433: D/dalvikvm(718): GC_CONCURRENT freed 130K, 3% free 8629K/8839K, paused 23ms+36ms, total 177ms
10-22 14:51:35.465: I/Process(718): Sending signal. PID: 718 SIG: 9
10-22 14:52:57.604: E/Trace(743): error opening trace file: No such file or directory (2)
10-22 14:52:58.524: D/dalvikvm(743): GC_CONCURRENT freed 181K, 4% free 8260K/8519K, paused 25ms+4ms, total 118ms
10-22 14:52:58.524: D/dalvikvm(743): WAIT_FOR_CONCURRENT_GC blocked 73ms
10-22 14:52:58.534: W/CursorWrapperInner(743): Cursor finalized without prior close()
10-22 14:52:58.534: W/CursorWrapperInner(743): Cursor finalized without prior close()
10-22 14:52:58.724: D/AndroidRuntime(743): Shutting down VM
10-22 14:52:58.724: W/dalvikvm(743): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
10-22 14:52:58.764: E/AndroidRuntime(743): FATAL EXCEPTION: main
10-22 14:52:58.764: E/AndroidRuntime(743): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.json.mapview/com.example.json.mapview.Main}: android.os.NetworkOnMainThreadException
10-22 14:52:58.764: E/AndroidRuntime(743):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-22 14:52:58.764: E/AndroidRuntime(743):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-22 14:52:58.764: E/AndroidRuntime(743):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-22 14:52:58.764: E/AndroidRuntime(743):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-22 14:52:58.764: E/AndroidRuntime(743):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 14:52:58.764: E/AndroidRuntime(743):  at android.os.Looper.loop(Looper.java:137)
10-22 14:52:58.764: E/AndroidRuntime(743):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-22 14:52:58.764: E/AndroidRuntime(743):  at java.lang.reflect.Method.invokeNative(Native Method)
10-22 14:52:58.764: E/AndroidRuntime(743):  at java.lang.reflect.Method.invoke(Method.java:511)
10-22 14:52:58.764: E/AndroidRuntime(743):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-22 14:52:58.764: E/AndroidRuntime(743):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-22 14:52:58.764: E/AndroidRuntime(743):  at dalvik.system.NativeStart.main(Native Method)
10-22 14:52:58.764: E/AndroidRuntime(743): Caused by: android.os.NetworkOnMainThreadException
10-22 14:52:58.764: E/AndroidRuntime(743):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
10-22 14:52:58.764: E/AndroidRuntime(743):  at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
10-22 14:52:58.764: E/AndroidRuntime(743):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
10-22 14:52:58.764: E/AndroidRuntime(743):  at java.net.InetAddress.getAllByName(InetAddress.java:214)
10-22 14:52:58.764: E/AndroidRuntime(743):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
10-22 14:52:58.764: E/AndroidRuntime(743):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10-22 14:52:58.764: E/AndroidRuntime(743):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
10-22 14:52:58.764: E/AndroidRuntime(743):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
10-22 14:52:58.764: E/AndroidRuntime(743):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
10-22 14:52:58.764: E/AndroidRuntime(743):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
10-22 14:52:58.764: E/AndroidRuntime(743):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
10-22 14:52:58.764: E/AndroidRuntime(743):  at com.example.json.mapview.Main.onCreate(Main.java:64)
10-22 14:52:58.764: E/AndroidRuntime(743):  at android.app.Activity.performCreate(Activity.java:5008)
10-22 14:52:58.764: E/AndroidRuntime(743):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-22 14:52:58.764: E/AndroidRuntime(743):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-22 14:52:58.764: E/AndroidRuntime(743):  ... 11 more
10-22 14:52:58.866: D/dalvikvm(743): GC_CONCURRENT freed 130K, 3% free 8629K/8839K, paused 30ms+5ms, total 162ms 
```

显现：-

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.json.mapview"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Main"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         <uses-library android:name="com.google.android.maps" />
    </application>

</manifest> 
```

Java代码：-

```
 public class Main extends MapActivity {
    public GeoPoint point;
    TapControlledMapView mapView; // use the custom TapControlledMapView
    List<Overlay> mapOverlays;
    Drawable drawable;
    SimpleItemizedOverlay itemizedOverlay;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mapView = (TapControlledMapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        mapView.setSatellite(false);
        // dismiss balloon upon single tap of MapView (iOS behavior) 
        mapView.setOnSingleTapListener(new OnSingleTapListener() {      
            public boolean onSingleTap(MotionEvent e) {
                itemizedOverlay.hideAllBalloons();
                return true;
            }
        });

        mapOverlays = mapView.getOverlays();        
        drawable = getResources().getDrawable(R.drawable.ic_launcher);
        itemizedOverlay = new SimpleItemizedOverlay(drawable, mapView);         
        itemizedOverlay.setShowClose(false);
        itemizedOverlay.setShowDisclosure(true);
        itemizedOverlay.setSnapToCenter(false);

        HttpClient client = new DefaultHttpClient();
        // Perform a GET request for a JSON list
        HttpUriRequest request = new HttpGet("https://dl.xxx.com/maps.json");
        // Get the response that sends back
        HttpResponse response = null;
        try {
            response = client.execute(request);
        } catch (ClientProtocolException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        // Convert this response into a readable string
        String jsonString = null;
        try {
            jsonString = StreamUtils.convertToString(response.getEntity().getContent());
        } catch (IllegalStateException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        // Create a JSON object that we can use from the String
        JSONObject json = null;
        try {
            json = new JSONObject(jsonString);
        } catch (JSONException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

                   try{

         JSONArray jsonArray = json.getJSONArray("maps");
         Log.e("log_tag", "Opening JSON Array ");
            for(int i=0;i < jsonArray.length();i++){                        

                JSONObject jsonObject = jsonArray.getJSONObject(i);

                    String latitude =  jsonObject.getString("latitude");
                    String longitude =  jsonObject.getString("longitude");
                    String title =  jsonObject.getString("title");
                    String country = jsonObject.getString("country");

                    double lat = Double.parseDouble(latitude);
                    double lng = Double.parseDouble(longitude);

                         Log.e("log_tag", "ADDING GEOPOINT"+title); 

                          point = new GeoPoint(
                                 (int) (lat * 1E6), 
                                 (int) (lng * 1E6));
                        OverlayItem overlayItem = new OverlayItem(point, title, 
                                country);
                        itemizedOverlay.addOverlay(overlayItem);

                        }
                   }catch(JSONException e)        {
                     Log.e("log_tag", "Error parsing data "+e.toString());
                } 

                   itemizedOverlay.populateNow(); 

                   mapOverlays.add(itemizedOverlay);
                        if (savedInstanceState == null) {

                            MapController controller = mapView.getController();
                            controller.setCenter(point);
                            controller.setZoom(7);

                        } else {

                            // example restoring focused state of overlays
                            int focused;
                            focused = savedInstanceState.getInt("focused_1", -1);
                            if (focused >= 0) {
                                itemizedOverlay.setFocus(itemizedOverlay.getItem(focused));
                            }
                        }    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

注意：- 每当我调试我的应用程序获取 ActivityThread....soure 未找到，行：- 2059

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:57:51.183

日志中明确提到了 Caused by: android.os.NetworkOnMainThreadException

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:42:07.440

网络相关活动不应在主 UI 线程中执行。如果这样做，应用程序将崩溃。

使用异步任务或启动新线程来获取 JSON 数据

要更具体，请尝试以下操作。在 onCreate 函数中，从 DefaultHttpClient 部分开始将它们包含在此处。

```
new Runnable() {
@Override
 public void run() {
   //Include the code here.
 } 
```

};

谢谢和问候， Rajamanickem。小号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:15:09.333

这个：

```
HttpClient client = new DefaultHttpClient();
        // Perform a GET request for a JSON list
        HttpUriRequest request = new HttpGet("https://dl.xxx.com/maps.json");
        // Get the response that sends back
        HttpResponse response = null;
        try {
            response = client.execute(request);
        } catch (ClientProtocolException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 
```

摆脱它。

读取[进程和线程](http://developer.android.com/guide/components/processes-and-threads.html) 这将描述如何处理诸如与网络通信或从流中写入/读取之类的事情。不要在 UI 线程上放置此类代码或期望休眠、超时或锁定获取（这是任何生命周期方法，onCreate()、onResume()、onPause() ...）。

# php - while循环形式删除mysql_entry

> ID：13008497
> 
> 赞同：0
> 
> 时间：2012-10-22T09:32:23.010
> 
> 标签：php, mysql, forms, while-loop, logic

我有这段代码，它显示在用户的日志页面上。他们可以添加一个条目，并且一旦条目出现在页面上，他们就可以选择删除它。

生病显示带有一些注释的代码，然后解释问题。

```
// Figures out how many recent posts to display
$posts = $config_journalposts + 1;
if($noposts!=1) {
    // Gets the data from the query
    while(($row = mysql_fetch_array($journalquery)) && ($posts > 1)) {
        // For each of the posts that were gathered, display the following:
        echo '<table border="0" width="100%">
            <tr>
                <td colspan="2" style="vertical-align:bottom;">
                    // Display the title as a link to be used as a permalink
                    <a href="?id='.$row['id'].'"><p class="fontheader">'.$row['title'].'</p></a>
                </td>
            </tr>
            <tr>
                // Show the o-so-important content
                <td width="100%" style="vertical-align:top;padding-left:10px;">
                    '.$row['content'].'
                </td>
            </tr>
            <tr>
                // Show the date
                <td style="font-size:8pt;padding-top:10px;">'.$row['date_day'].'/'.$row['date_month'].'/'.$row['date_year'].'</td>';
                    // Checks if the current user is the owner of the journal or an admin
                    if($_SESSION['user']==$pageowner || $_SESSION['user_rank']=='Admin') {
                        echo '<td align="right">

                            // FOCUS POINT
                            <form method="POST" id="deljournal">
                                <input type=\'hidden\' name=\'delete_id\' value=\''.$row['id'].'\' />
                                // A delete button that executes a bit of Javascript
                                <button type="button" class="button" name="delete" value="Delete" onClick="delete_journal()" />Delete</button>
                            </form>
                            // END FOCUS POINT

                        </td>';
                    }
                echo '</tr>
            </table>
        <hr>
        ';
    $posts --;
} 
```

这是按下按钮时触发的 Javascript

```
function delete_journal() {
    var answer = confirm("Are you sure you want to delete this journal entry?")
    if (answer){
        // Submits the form
        $("#deljournal").submit()
    }
} 
```

这个 javascript 在上面的 PHP 代码中触发论坛，它重新加载页面并在页面的最顶部，在标记之前触发它

```
if(($_POST['delete_id'])) {
    // Gets the post ID from the hidden forum tag
    $deleteid = addslashes(strip_tags($_POST['delete_id']));

    // Deletes the row that has the ID of the hidden form
    mysql_query("DELETE FROM `gamezoid_accounts`.`journal_$pageowner` WHERE `id`='$deleteid'");
} 
```

现在，对于问题。在 while 循环中，这种形式会一遍又一遍地重复。发生的情况是，在按下删除按钮时，它会触发 ID 为“deljournal”的表单。由于它们都有 ID“deljournal”，因此它会在页面顶部显示 ID。尝试将帖子 ID 嵌入到表单 ID 中会破坏代码，因为 mysql_query 不知道删除功能首先已被触发。

有什么办法吗？

我使用 Javascript 作为触发器的原因是为了在有人询问时弹出确认窗口。

无论如何，非常感谢您阅读本文！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:36:47.087

```
 <input type=\'hidden\' name=\'delete_id[]\' value=\''.$row['id'].'\' /> 
```

那么只有你会在发布时将所有值作为数组获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:40:30.457

```
 <input type=\'hidden\' name=\'delete_id[]\' value=\''.$row['id'].'\' /> 
```

那么只有你会在发布时将所有值作为数组获取。在服务器端你应该使用

```
$delete_values= implode (',',$_POST['delete_id']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:49:39.880

找到了解决方案。

我已将表格更改为

```
<form method="POST" id="deljournal_'.$row['id'].'">
    <input type=\'hidden\' name=\'delete_id\' value=\''.$row['id'].'\' />
</form>
<button type="button" class="button" name="delete" value="Delete" onClick="delete_journal_'.$row['id'].'()" />Delete</button> 
```

通过将日记帐分录 ID 添加到表单的 ID 和 onClick 函数中。javascript 就在表格单元格之外，如下所示：

```
<script type="text/javascript">
    function delete_journal_'.$row['id'].'() {
        var answer = confirm("Are you sure you want to delete this journal entry?")
        if (answer){
            $("#deljournal_'.$row['id'].'").submit()
        }
    }
</script> 
```

其中条目 ID 已添加到函数名称和表单 ID 标签中。通过将 Javascript 放入 while 循环而不是外部文件中，可以使用循环对其进行操作以具有相同的值。

它有点混乱，会稍微增加加载时间+执行时间，但这是我能找到的最快的方法。

希望这对遇到类似问题的其他人有所帮助。

# javascript - 是否有可能让这个 facebook 插件与纯 phonegap 应用程序一起使用

> ID：13008500
> 
> 赞同：1
> 
> 时间：2012-10-22T09:32:38.580
> 
> 标签：javascript, facebook, html, cordova

这可能真的是一个基本问题。我有点困惑。我不明白一件事。Phonegap 应用程序是纯 html5 和 javascript。但是为了让这个插件（[https://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/master/example/HackBook](https://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/master/example/HackBook)）工作，我们需要单独的 android java 代码和 ios 的 xcode。

我得到了使用模拟器的 android 教程的 java 版本，但是当我只是复制资产文件夹来构建一个纯 phonegap 应用程序时。这没用。

如果我仍然需要维护 2 行代码，那么它就达到了目的。

没有 java 或 xcode 的 phonegap 应用程序是否仅支持此插件中的 html 和 JavaScript 代码。

这是我的电话间隙应用程序。你可以下载它。[https://build.phonegap.com/apps/211586/share](https://build.phonegap.com/apps/211586/share)

我在 git 存储库中的代码在这里

[https://bitbucket.org/sunmeet/phonegab2.0_fbapi](https://bitbucket.org/sunmeet/phonegab2.0_fbapi)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:07:44.670

**PhoneGap Build 服务最近仅支持 ChildBrowser、Barcode Scanner、Google Analytics。**

如果您尝试使用任何需要 HTML / CSS / JS 以外的资产的外部插件，则不能将它们与 PhoneGap Build Service 一起使用。但是，PhoneGap 团队正试图在未来版本中推出不同的插件，例如 Facebook Connect。

因此，他们在这里为开发人员提供了两个选项。

*   使用子浏览器并处理 Facebook OAuth 身份验证。
*   本地构建。Andriod开发环境为“Eclipse” IOS开发环境为“XCode”(OS: MacOS)

我建议您使用第一个选项，一旦插件是我们的构建服务，它真的很容易随时集成。

# java - Java中的紧凑图像编码

> ID：13008503
> 
> 赞同：1
> 
> 时间：2012-10-22T09:32:54.040
> 
> 标签：java, encoding

我想对图像进行编码/解码，例如`base64`. 但是，我没有使用`base64`，因为编码结果太大：我希望编码大小很小。

我在 Google 上搜索了很多次，但没有找到任何符合我要求的有用信息。

谁能帮我找到比 更紧凑的编码`base64`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:02:04.013

如果您的要求是编码图像必须能够以 ASCII 格式打印，那么 Base64 可能是一个不错的通用选择。如果您确实要求图像的二进制表示尽可能小，请查看[JPEG](http://en.wikipedia.org/wiki/JPEG#Encoding)和[PNG](http://en.wikipedia.org/wiki/Portable_Network_Graphics)（取决于图像的类型、有损/无损的要求等）。如果您手头有很多时间并且想摆弄数学，请尝试[分形压缩](http://en.wikipedia.org/wiki/Fractal_compression)？

正如其他人评论的那样，如果您的要求是将图像存储在数据库中，大多数/所有 RDBMS 都提供某种形式的[BLOB](http://en.wikipedia.org/wiki/Binary_large_object)来实现这一点。

干杯，

# variables - eshell环境变量没有出现在eshell中

> ID：13008504
> 
> 赞同：0
> 
> 时间：2012-10-22T09:32:54.227
> 
> 标签：variables, emacs, eshell

我正在尝试使用 emacs，作为其中的一部分，我已经开始使用 eshell。我在 shell 中经常做的一件事是 maven 构建。为此，我需要设置某些环境变量。我在 .emacs 文件中使用 setenv 设置了一个环境变量，当我执行 Cx getnev 时，我可以看到它。但是，如果我在 eshell 中调用 echo $MY_VAR 我什么也得不到，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:39:56.717

您应该在启动 emacs的文件`bat`或文件中设置环境变量。`sh`在这种情况下，变量将在 eshell 中可见。

# c# - 对象作为属性？

> ID：13008505
> 
> 赞同：0
> 
> 时间：2012-10-22T09:32:56.567
> 
> 标签：c#

我（作为新的 oop 和 c# 爱好者）想就以下（简化）问题寻求一些指导：

我创建了一个小类（我们称之为 A），它有 4 个属性和几个方法。还有一个更大的类（B），有大约 10 个道具，它应该包含 12 个 A 类的对象，以及相当多的功能来使用这些道具。我有我的主类 M（它是一个 Windows 窗体），一个 Filereader 类 (F) 来处理所有 I/O。

我在 wm_devicechange 上创建了一个 windows 事件，应该读取 usb，创建一个 F 的对象。现在，当 F 读取文件时，它应该填充类 B 中的对象的属性，该对象是在类 F 中创建的。现在问题是，我无法从我的主类访问 B 的这个对象。问题是如何正确地做到这一点？

我应该创建 B 类型的 F 的属性吗？这是常见的做法吗？我应该在我的主课中制作 B 的对象吗？在 B 类型的 F 中创建属性时，如果从 M 中获取，它是否只存储和传递引用？

我想尽量避免对对象等进行无用的复制，但是现在这个 oop 的话题对我来说太难了，即使看了几本书，我什至不确定这个问题是否有意义。我已经阅读[了这篇](http://www.yoda.arachsys.com/csharp/parameters.html)文章 3 次，但我仍然很困惑处理这样的“问题”的好做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:46:02.387

您提到的所有方法都是合理的，但其中一种可能会更直观和优雅。

B类究竟是什么？如果它是读取文件的某种结果，您可能希望从执行读取的 F 的某些方法中返回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:47:16.627

```
public class Form
{
    USBReader reader;
    CollectedData data;
    public Form()
    {
        reader = new USBReader();
    }

    public void ReadUSBData() 
    {
        data = reader.ReadUSBData();
    }
}
// Type F
public class USBReader 
{
    public CollectedData ReadUSBData() 
    { // usb read logic.
    }
}

//Type B
public class CollectedData {
    List<A> list = new List<A>();   
}

public class A { } 
```

一个简单的实现可以像这样，您的 USB 阅读器返回数据。

通常，读取数据等操作是对象上的方法，其返回类型为数据模型（此处为 B 和 A）。而属性是对象的属性。例如，USBReader 可以有一个具有自我解释名称的属性，例如`int BufferSize`；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:40:19.827

您不会因为对象分配而浪费空间，因为 C# 中的所有~~对象~~类都是[引用类型](http://msdn.microsoft.com/en-us/library/9kkx3h3c.aspx)。但是在我看来，您应该在[继承](http://msdn.microsoft.com/en-us/library/ms173149.aspx)和 [嵌套类之间做出决定](http://msdn.microsoft.com/en-us/library/ms173120%28v=vs.100%29.aspx)

对于继承，您将执行以下操作：

```
public class F : B
{
    //class F definition here
} 
```

对于嵌套类，您将拥有：

```
public class F
{
    public class B
    {
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:41:09.437

如果你分配对象，它只是引用，所以是同一个实例。如果您需要在两个对象之间共享对象，请将对象作为参数传递给构造函数或某些方法/属性。然后具有此引用的所有对象都可以访问相同的实例（数据）。如果您需要不同的“数据集”-实例，只需创建其他对象实例...

# maven-3 - Resin 4 的 Maven 支持

> ID：13008507
> 
> 赞同：3
> 
> 时间：2012-10-22T09:33:02.957
> 
> 标签：maven-3, resin

我无法让*resin-maven-plugin*工作。实际上，我想通过执行`resin:run`. 我尝试了快照和最终版本，但都有问题。最新版本报告：

> 在 com.caucho.maven.MavenRun 中找不到“contextRoot”的设置器、加法器或字段

有一个关于这个问题的错误报告，但是 Caucho 不再支持这个插件了。

所以这里是我的问题：

1.  有可用的工作版本吗？
2.  如果没有，我在哪里可以找到源代码（然后自己修复它）

# android - 系统关闭内存不足的应用程序时保存状态

> ID：13008508
> 
> 赞同：0
> 
> 时间：2012-10-22T09:33:02.690
> 
> 标签：android, static, heap-memory, system, kill

是否可以拦截系统在内存不足时关闭我的应用程序的事件？我知道有一个方法“onLowMemory”，但这并不意味着我的应用程序在调用后会被关闭。

我的问题是我正在共同开发一个使用大量静态数据的应用程序（我知道应该避免这种情况，但这不是我的决定，在这一点上几乎不可能改变这个事实）。如果我按下主页并且不返回此应用程序，例如。当我这样做时，它可能会强制关闭 10 小时，因为静态数据不再存在（应用程序被系统杀死）。

是否有可能知道应用程序何时将被系统杀死？当我重新创建我的应用程序时，我会将静态数据存储在某个地方以便稍后获取它。有哪些可能的解决方案？

也许，如果不可能连接到这样的事件，我可以创建一个每隔几分钟保存一次状态的服务，所以当应用程序被杀死时，我可能会有最新的静态数据？

你遇到过这个问题吗？您的解决方案/建议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:47:04.717

您的应用程序是否在后台对这些静态数据执行任何操作？您可以将所有内容保存在`onPause()`. 一旦`onPause`被调用，您的应用程序就可以随时终止，无需任何进一步的回调，因此如果需要保存某些内容，`onPause`就是这样做的地方。

# python - 为什么 Popen.terminate() 终止子进程在 Windows 上使用命令解释器 (cmd.exe) 运行？

> ID：13008513
> 
> 赞同：2
> 
> 时间：2012-10-22T09:33:31.630
> 
> 标签：python, windows, shell, subprocess, kill-process

杀死在 Linux 下使用`shell=True`传递给`subprocess.Popen`的构造函数创建的子进程只会杀死 shell 而不会杀死由 shell 创建的进程（请参阅[如何终止使用 shell=True 启动的 python 子](https://stackoverflow.com/questions/4789837/)进程）。但是`python -c "import subprocess; subprocess.Popen(['ping', '-t', 'google.com'], shell=True).terminate()"`在 Windows Vista x64 SP3 和 Python 2.7.3 64bit 下运行会终止该`ping`进程。在 Windows 下`subprocess.Popen.terminate()` [调用](http://hg.python.org/cpython/file/70274d53c1dd/Lib/subprocess.py#l1019) `TerminateProcess`. 但是此功能的[文档说明](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714.aspx)

> 终止指定进程及其所有线程。

没有提到终止整个进程树。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:18:42.280

我认为这仅适用于您提供的单线，而我的观察表`ping`明甚至还没有开始。如果您作为脚本运行 (Windows 7)：

```
import subprocess

proc = subprocess.Popen(['ping', '-t', 'google.com'], shell=True)

raw_input("<RETURN> to terminate")
proc.terminate()

raw_input("<RETURN> to end") 
```

然后`proc.terminate()`唯一终止shell，它*不*终止`ping`！

但是，如果您设置，`shell=False`那么它会按预期运行 - 它会终止`ping`. Python 2.7 和 3.2 上的行为相同。

编辑：我也尝试将此代码作为单行代码，并得到与提问者相同的结果。我讨厌`sleep`黑客，但这有效：

```
python -c "import subprocess,time;proc = subprocess.Popen(['ping','-t', 'google.com'], shell=True);time.sleep(1);proc.terminate()" 
```

# c - recv() read() 和 send() 无需等待

> ID：13008514
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:33:39.563
> 
> 标签：c, linux, sockets

我正在学习如何编写服务器 TCP 套接字，其中客户端可以连接并等待命令......

```
fd = open("/tmp/myFIFO", O_RDWR);
if(fd<0){
    perror("open() error");
    exit(1);
}

do {
    while ((nbytes = read(fd, buffer, sizeof(buffer)-1)) > 0) {
        buffer[nbytes] = '\0';
        printf("%s\n", buffer);
    }
    err = recv(cFD, strbuf, sizeof(strbuf), 0);
    if (err < 0) {
        if (errno != EWOULDBLOCK) {
            perror("  recv() failed");
            state = TRUE;
        }
        break;
    }

    if (err == 0) {
        printf("  Connection closed\n");
        state = TRUE;
        break;
    }

    dSize = err;
    printf("  %d bytes received\n", dSize);
    err = send(cFD, buffer, strlen(buffer), 0);
    if (err < 0) {
        perror("  send() failed");
        state = TRUE;
        break;
    }
} while (TRUE); 
```

我只是得到了我遇到问题的代码部分。我正在从管道中读取。我正在使用它向客户端发送消息..但我的问题是recv。它在将从我的管道读取的数据发送到客户端之前等待客户端发送的数据。我想要发生的是每次我将数据发送到我的管道时，它会直接发送到客户端而无需等待接收。这怎么办？

这是完整的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/ioctl.h>
#include <sys/socket.h>
#include <sys/time.h>
#include <netinet/in.h>
#include <errno.h>
#include <string.h>
#include <sys/select.h>
#include <sys/types.h>
#include <unistd.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <pthread.h>

#define TRUE             1
#define FALSE            0

typedef struct SERVER_FD{

int sPort;
int serverFD;
int smaxFD; 
int newFD;

}sSD;

int cFD, 
    dSize, 
    err, 
    start = 1,
    state,
    DescRead,
    DCSERVER = FALSE;

struct sockaddr_in  addr, cli_addr;
unsigned long ip;
char strbuf[256];
socklen_t clilen;
fd_set fdin, fduse;

pid_t pid, sid;

int fd=-1;
int nbytes;
char buffer[256];

void process(int ServerFD, int Port, int sMax, int NewSFD);
void cleanUP(int i, int max);
void dlogs(unsigned long ip);
void daemonize();

main (int argc, char *argv[])
{
    sSD link;
    sSD *sCon;
    sCon = &link;
    sCon->sPort = 53234;

    fd = open("/tmp/myFIFO", O_RDWR);
    if(fd<0){
        perror("open() error");
        exit(1);
    }

    printf("Starting Server-G\n");

    fcntl(fd, F_SETFL,
    fcntl(fd, F_GETFL) | O_NONBLOCK);
    sCon->serverFD = socket(AF_INET, SOCK_STREAM, 0);
    if (sCon->serverFD != -1) {
        err = setsockopt(sCon->serverFD, SOL_SOCKET,  SO_REUSEADDR,(char *)&start, sizeof(start));
        if (err != -1) {
            err = ioctl(sCon->serverFD, FIONBIO, (char *)&start);
            if (err != -1){
                process(sCon->serverFD,sCon->sPort,sCon->smaxFD,sCon->newFD);
            }
            else{
                perror("ioctl() failed");
                close(sCon->serverFD);
                exit(EXIT_FAILURE);
            }
        }
        else{
            perror("setsockopt() failed");
            close(sCon->serverFD);
            exit(EXIT_FAILURE);
        }
    }
    else{
        perror("FAILED CONNECTING TO SOCKET");
        exit(EXIT_FAILURE);
   } 
}

void process(int ServerFD, int Port, int sMax, int NewSFD){
    bzero((char *) &addr, sizeof(addr));
    addr.sin_family      = AF_INET;
    addr.sin_addr.s_addr = 0;
    addr.sin_port        = htons(Port);

    err = bind(ServerFD,(struct sockaddr *)&addr, sizeof(addr));
    if (err < 0) {
        perror("bind() failed");
        close(ServerFD);
        exit(EXIT_FAILURE);
    }

    daemonize();
    err = listen(ServerFD, 32);
    if (err < 0) {
        perror("listen() failed");
        close(ServerFD);
        exit(EXIT_FAILURE);
    }
    clilen = sizeof(cli_addr);
    FD_ZERO(&fdin);
    sMax = ServerFD;
    FD_SET(ServerFD, &fdin);

    do {
        fduse = fdin;
        err = select(sMax + 1, &fduse, NULL, NULL, NULL);
        if (err < 0) {
            perror("  select() failed");
            break;
        }
        DescRead = err;
        for (cFD=0; cFD <= sMax  &&  DescRead > 0; ++cFD) {
            if (FD_ISSET(cFD, &fduse)) {
                DescRead -= 1;
                if (cFD == ServerFD) {
                    do {
                        NewSFD = accept(ServerFD,(struct sockaddr *) &cli_addr, &clilen);
                        if (NewSFD < 0) {
                            if (errno != EWOULDBLOCK) {
                                perror("  accept() failed");
                                DCSERVER = TRUE;
                            }
                            break;
                        }
                        ip = ntohl(cli_addr.sin_addr.s_addr);
                        printf("  Connection from %d.%d.%d.%d\n",
                            (int)(ip>>24)&0xff,
                            (int)(ip>>16)&0xff,
                            (int)(ip>>8)&0xff,
                            (int)(ip>>0)&0xff);
                            dlogs(ip);
                        FD_SET(NewSFD, &fdin);
                        if (NewSFD > sMax)
                            sMax = NewSFD;
                    } while (NewSFD != -1);
                }
                else {
                    state = FALSE;
                    do {
                       //PART WHERE I'm Having problems.
                        err = recv(cFD, strbuf, sizeof(strbuf), 0);
                        if (err < 0) {
                            if (errno != EWOULDBLOCK) {
                            perror("  recv() failed");
                            state = TRUE;
                            }
                            break;
                        }
                        if (err == 0) {
                            printf("  Connection closed\n");
                            state = TRUE;
                            break;
                        }
                        dSize = err;
                        printf("  %d bytes received\n", dSize);
                        while ((nbytes = read(fd, buffer, sizeof(buffer)-1)) > 0) {
                            buffer[nbytes] = '\0';
                            printf("%s\n", buffer);
                        }

                        err = send(cFD, buffer, strlen(buffer), 0);
                        if (err < 0) {
                            perror("  send() failed");
                            state = TRUE;
                            break;
                        }
                    } while (TRUE);

                    if (state) {
                        close(fd);
                        close(cFD);
                        FD_CLR(cFD, &fdin);
                        if (cFD == sMax) {
                            while (FD_ISSET(sMax, &fdin) == FALSE)
                                sMax -= 1;
                        }
                    }
                } 
            } 
        } 
    } while (DCSERVER == FALSE);
    cleanUP(cFD, sMax);
}

void cleanUP(int i, int max){
    for (i=0; i <= max; ++i) {
        if (FD_ISSET(i, &fdin))
        close(i);
    }
}

void dlogs(unsigned long ip){
    FILE* pFile = fopen("/sockF.txt", "a+");
    fprintf(pFile,"Connection from: %d.%d.%d.%d",
                    (int)(ip>>24)&0xff,
                    (int)(ip>>16)&0xff,
                    (int)(ip>>8)&0xff,
                    (int)(ip>>0)&0xff);
    fclose(pFile);
}

void daemonize(){
    pid = fork();
    if(pid<0){
        perror("fork() failed");
        exit(EXIT_FAILURE);
    }
    if(pid>0){
        exit(EXIT_SUCCESS);
    }

    umask(0);

    sid = setsid();
    if(sid<0){
        perror("setsid() failed");
        exit(EXIT_FAILURE);
    }

    if((chdir("/")) < 0){
        perror("failed changing directory");
        exit(EXIT_FAILURE);
    }
} 
```

示例输出：我正在使用 telnet 和 putty 来测试服务器

```
From Telnet: IP: 192.168.5.53
Telnet 192.168.5.55 53234

./socks
Starting Server-G
Connection from: 192.168.5.53 
```

现在，当连接 telnet 时，我使用 putty 将数据发送到管道，以便服务器读取它。

```
From Putty: 
echo "TEST" > /tmp/myFIFO 
```

这里的问题是，每当我将数据从腻子写入管道发送到管道时，服务器都会等待 telnet 在输出之前发送数据并将我写入的数据发送到管道。我怎样才能让recv和read在同一个时间工作，所以当我写到我的管道时，它会在不等待recv的情况下输出？

谢谢

**编辑：**我也使用线程来读取管道，但它仍然等待 recv() 在服务器输出已读取到管道的内容之前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:04:14.067

使用[`select`](http://linux.die.net/man/2/select)或[`poll`](http://linux.die.net/man/2/poll)等待两个文件句柄上的事件，例如。（使用`poll`）

```
#include <poll.h>

//...

struct pollfd pfds[2];
int rc;

/* Wait for input on either one of the fds */
pfds[0].fd = fd;
pfds[0].events = POLLIN;
pfds[1].fd = cFD;
pfds[1].events = POLLIN;

do {
    /* Wait forever for something to happen */
    rc = poll(&pfds, 2, -1);
    /* Error handling elided */
    if (pfds[0].revents & POLLIN)
    {
        /* Read from fd, change pfds[1].events to (POLLIN | POLLOUT) so you know when you
           can write without blocking. also clear pfds[0].events so we don't read until we
           write */
        pfds[0].events = 0;
        pfds[1].events = POLLIN | POLLOUT;
    }

    if (pfds[1].revents & POLLIN)
    {
        /* Read from socket */
    }

    if (pfds[1].revents & POLLOUT)
    {
        /* write to socket, reset events flags */
        pfds[0].events = POLLIN;
        pfds[1].events = POLLIN;
    }
} while (1) 
```

# asp.net - RDLC 报告服务在总和列时给出错误

> ID：13008515
> 
> 赞同：2
> 
> 时间：2012-10-22T09:33:42.090
> 
> 标签：asp.net, ms-access, reporting, rdlc

我正在使用 Access 数据库来提取数据并使用报告显示

在我的表格中，他们有一个包含佣金数据的列，但是每次我添加

`=Sum(Fields!Commission.Value)`在一个空单元格中显示总和值我得到一个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-23T15:47:31.730

尝试这个：

```
=Sum(int(Fields!Commission.Value)) 
```

可能是您正在使用`string`，所以首先将其转换为`int`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T00:51:28.053

确保该字段是 Int 而不是 String 如果将其转换为整数以求和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:43:19.310

[Sum()](http://msdn.microsoft.com/en-us/library/ms159134%28v=sql.90%29.aspx) in`SSRS`需要两个字段来求和，并且在你的函数之前必须有一个`=`符号..像这样

```
=Sum(Fields!Commission.Value) 
```

# jquery - 切换 jQuery 隐藏/显示

> ID：13008517
> 
> 赞同：1
> 
> 时间：2012-10-22T09:33:49.797
> 
> 标签：jquery, toggle, show-hide

我有一个导航，我正在使用 jQuery 幻灯片显示导航下的内容。当您单击不同的导航项时，我可以切换 div，但是当我单击相同的导航项以关闭它时，它只会弹跳关闭的选项卡然后再次打开。我现在正在关闭它的 div 内有一个关闭按钮。

打开 div 后如何关闭它>

示例链接在[这里](http://www.jesseshowalter.com/dbd/)

我的jQuery如下：

```
(function ($) {
    $.fn.showHide = function (options) {

        //default vars for the plugin
        var defaults = {
            speed: 1000,
            easing: '',
            changeText: 0,
            showText: 'Show',
            hideText: 'Hide'

        };
        var options = $.extend(defaults, options);

        $(this).click(function () { 

             $('.toggleDiv').slideUp(options.speed, options.easing);    
             // this var stores which button you've clicked
             var toggleClick = $(this);
             // this reads the rel attribute of the button to determine which div id to toggle
             var toggleDiv = $(this).attr('rel');
             // here we toggle show/hide the correct div at the right speed and using which easing effect
             $(toggleDiv).slideToggle(options.speed, options.easing, function() {
             // this only fires once the animation is completed
             if(options.changeText==1){
             $(toggleDiv).is(":visible") ? toggleClick.text(options.hideText) : toggleClick.text(options.showText);
             }
              });

          return false;

        });

    };
})(jQuery); 
```

我正在射击：

```
$(document).ready(function(){

    $('.show_hide').showHide({           
        speed: 300,  // speed you want the toggle to happen 
        easing: '',  // the animation effect you want. Remove this line if you dont want an effect and if you haven't included jQuery UI
        changeText: 0, // if you dont want the button text to change, set this to 0
        showText: 'View',// the button text to show when a div is closed
        hideText: 'Close' // the button text to show when a div is open
    }); 

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:38:49.330

好吧，您在单击时将所有 div 向上滑动，这意味着当前打开的 div 也会向上滑动。

```
$('.toggleDiv').slideUp(options.speed, options.easing); 
```

我建议给打开的 div 一个像“is_open”这样的类，当你打开另一个 div 时你会删除它。您可以在执行任何其他逻辑之前检查单击时的类：

```
if($(this).hasClass('is_open')) return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:07:00.910

只需添加一个类来完成这个技巧，并避免使用 $('.toggleDiv') 选择器对所有 div 进行额外操作。

最简单的方法是检查 toggleDiv 是否可见。只需将类中的“显示”属性从无更改为阻塞即可。

使用简单的 $(this).addClass('opened_div'); 打开 div 并稍后将其删除。

# linux - 复制文件保留文件夹结构

> ID：13008520
> 
> 赞同：1
> 
> 时间：2012-10-22T09:33:59.063
> 
> 标签：linux, file, shell

谁能帮我制作一个shell脚本来：

具有特定的文件夹和子文件夹结构，将所有从给定日期（或几天后）修改的文件从它复制到其他位置，并始终保留文件夹结构。

因此，结果将是原始的子集，其中仅包含与修改的日期条件匹配的文件。无需将此新子集放置在任何远程位置……只需同一文件系统中的另一个文件夹即可。

有什么想法吗？

我可以想到一些手动方法，但如果有更“自动”的方法，我想知道。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:02:28.893

你可以使用这个脚本：

```
#!/bin/bash
mkdir -p "$2" && find . -type f ! -mtime +$1 | tar -cT - -f - |tar -C "$2" -xf - 
```

用法：

```
copyscript <not-older-than-N-days> <destination dir> 
```

# regex - UDK 和 Mercurial - hgignore 正则表达式

> ID：13008524
> 
> 赞同：0
> 
> 时间：2012-10-22T09:34:26.857
> 
> 标签：regex, mercurial, hgignore, unreal-development-kit

我正在考虑在项目中使用 Mercurial 进行版本控制，并希望你们的堆栈器可以帮助我处理正则表达式，这样 .hgignore 就不会是令人作呕的 GLOB 混乱。

大的忽略目录很容易，但是跟踪某些子文件夹让我很难过。

这是我（相信）出于编码目的需要**包含的内容列表。**

```
Development/Src/OurGame
Development/Src/<all files in this directory, but not subfolders>
UDKGame/Config/DefaultGame.ini
UDKGame/Config/DefaultEngine.ini 
```

如果只有 .hginclude 而不是 .hgignore 的选项...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:41:06.283

您可以忽略所有内容，然后使用`hg add`添加所需的特定文件。该`.hgignore`文件仅用于忽略尚未添加到存储库中的内容。

除此之外，您确实需要指定要忽略的文件，所以我认为人们不会在不知道您不想跟踪的文件是什么的情况下帮助您解决这个问题。

# java - Runtime.getRuntime().exec(cmd) 挂起

> ID：13008526
> 
> 赞同：16
> 
> 时间：2012-10-22T09:34:34.617
> 
> 标签：java, process, runtime.exec, processbuilder

我正在执行一个返回文件修订号的命令；'文件名'。但是如果执行命令时出现问题，那么应用程序就会挂起。我能做些什么来避免这种情况？请在下面找到我的代码。

```
String cmd= "cmd /C si viewhistory --fields=revision --project="+fileName; 
Process p = Runtime.getRuntime().exec(cmd) ;  
BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));  
String line = null; 
while ((line = in.readLine()) != null) {  
System.out.println(line);  
} 

} catch (Exception e) {  
e.printStackTrace();  
 } 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-22T09:52:55.350

I guess the issue is that you are only reading InputStream and not reading ErrorStream. You also have to take care that both the streams are read in parallel. It may so happen that currently the data piped from the output stream fills up the OS buffer, your exec command will be automatically be suspended to give your reader a chance to empty the buffer. But the program will still be waiting for the output to process. Hence, the hang occurs.

You can create a separate class to handle both the Input and Error Stream as follows,

```
public class ReadStream implements Runnable {
    String name;
    InputStream is;
    Thread thread;      
    public ReadStream(String name, InputStream is) {
        this.name = name;
        this.is = is;
    }       
    public void start () {
        thread = new Thread (this);
        thread.start ();
    }       
    public void run () {
        try {
            InputStreamReader isr = new InputStreamReader (is);
            BufferedReader br = new BufferedReader (isr);   
            while (true) {
                String s = br.readLine ();
                if (s == null) break;
                System.out.println ("[" + name + "] " + s);
            }
            is.close ();    
        } catch (Exception ex) {
            System.out.println ("Problem reading stream " + name + "... :" + ex);
            ex.printStackTrace ();
        }
    }
} 
```

The way you use it is as follows,

```
String cmd= "cmd /C si viewhistory --fields=revision --project="+fileName; 
Process p = Runtime.getRuntime().exec(cmd) ;  
s1 = new ReadStream("stdin", p.getInputStream ());
s2 = new ReadStream("stderr", p.getErrorStream ());
s1.start ();
s2.start ();
p.waitFor();        
} catch (Exception e) {  
e.printStackTrace();  
} finally {
    if(p != null)
        p.destroy();
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-08T12:15:19.720

此代码基于相同的想法 Arham 的答案，但使用 java 8 并行流实现，这使其更加简洁。

```
public static String getOutputFromProgram(String program) throws IOException {
    Process proc = Runtime.getRuntime().exec(program);
    return Stream.of(proc.getErrorStream(), proc.getInputStream()).parallel().map((InputStream isForOutput) -> {
        StringBuilder output = new StringBuilder();
        try (BufferedReader br = new BufferedReader(new InputStreamReader(isForOutput))) {
            String line;
            while ((line = br.readLine()) != null) {
                output.append(line);
                output.append("\n");
            }
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        return output;
    }).collect(Collectors.joining());
} 
```

您可以像这样调用该方法

```
getOutputFromProgram("cmd /C si viewhistory --fields=revision --project="+fileName); 
```

请注意，如果您正在调用的程序挂起，则此方法将挂起，如果需要输入，则会发生这种情况。

# exchange-server - Exchange Server 2010 和活动目录

> ID：13008528
> 
> 赞同：0
> 
> 时间：2012-10-22T09:34:41.550
> 
> 标签：exchange-server

我在 Windows Server 2003 SP1 R2 上有 Active Directory，在 Windows Server 2008 上有 Exchange Server 2010

我可以将这些服务器、Exchange Server 与此 Active Directory 域连接在一起，否则会出现问题，哪个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:50:08.177

将 Active Directory 集成到您的 Exchange 基础结构中为您提供了相当多的选择和灵活性，因为 Active Directory 和 Exchange 可以很好地协同工作。

正如[Jaap Wesselius 所说](http://technet.microsoft.com/en-us/magazine/jj159096.aspx)：

> 当您将网络分成多个物理位置、通过“慢速”链接连接并分成多个 IP 子网时，您就创建了 Active Directory 术语中的“站点”。例如位于德国的办公室，其 IP 子网为 10.10.0.0/ 16\. 保加利亚可能有一个分支机构，其 IP 子网为 10.11.0.0/16。这两个位置都有自己的 Active Directory DC，并在自己的子网中处理客户端身份验证。Active Directory 站点链接控制站点之间的复制流量。每个站点的客户端使用DNS来查找自己站点中的DC等服务，从而防止通过WAN链路使用服务。
> 
> Exchange Server 2010 使用 Active Directory 站点在站点之间路由邮件。使用德国的 Exchange Server 2010 集线器传输服务器和保加利亚的 Exchange Server 2010 集线器传输服务器的相同示例，Active Directory 中的 IP 站点链接会将邮件从德国路由到保加利亚。
> 
> 传输和路由：- 使用 Exchange Server 2010，您可以实现跨界邮件路由。在混合托管环境中，Exchange Server 2010 可以完全透明地将消息从数据中心路由到本地环境。创建一个高度可用和可靠的路由模型 Active Directory 有助于与 Exchange 服务器的制定。
> 
> 统一消息：- Exchange Server 2010 统一消息服务器角色可以将专用自动分支交换机或 PABX 等电话系统与 Exchange Server 消息环境集成。这使您可以提供 Outlook Voice Access。

因此，由于这个原因，两者都可以很好地协同工作。

# xml - 在派生类中编组 XMLAttribute

> ID：13008531
> 
> 赞同：4
> 
> 时间：2012-10-22T09:34:51.963
> 
> 标签：xml, jaxb, superclass, derived-class

我想在派生类中编组一个 XMLAttribute，但我有一些问题。

我有 2 个派生类和 1 个超类，如下所示：

```
public class Dog extends Animal {

    @XmlAttribute(name = "type")
    private String type;

    @XmlElement
    private String name;
}

public class Cat extends Animal {

    @XmlAttribute(name = "type")
    private String type;

    @XmlElement
    private String name;
}

@XmlSeeAlso({Dog.class, Cat.class})
public class Animal {

}

@XmlRootElement(name="some_element_wrapper")
public SomeElementWrapper() {

    List<Animal> listAnimal;

    @XmlElement(name = "animals")
    public List<Animal> getListAnimal() {}
    public void setListAnimal(List<Animal> listAnimal) {}
} 
```

假设我有一个包含一些数据的列表。我想从我的类中生成 XML，如下所示：

```
<some_element_wrapper>
    <animals>
        <animal type="dog">....</animal>
        <animal type="cat">....</animal>
    </animals>
</some_element_wrapper> 
```

我的问题是我得到了我想要的，除了类型属性。我尝试了其他不同的解决方案，在超类中移动属性类型，或者覆盖派生类型字段，但没有结果。请问，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:15:00.750

**了解`JAXBContext`子类**

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现不会自动知道映射类的子类。您要么需要将它们包含在用于引导的类数组中，`JAXBContext`要么在其中一个映射类上使用`@XmlSeeAlso`注释。

```
@XmlSeeAlso(Dog.class, Cat.class)
public class Animal {

} 
```

**继承指标**

如果您希望使用 type 属性来指定正在使用的子类型，我建议您不要这样做，而是使用`xsi:type`属性来表示继承在 XML 中的表示方式（使用 XML 和 XML 模式）以及在 JAXB 中的默认表示。

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html)

如果您真的不想使用`xsi:type`属性，则可以利用 an`XmlAdapter`将`type`属性用作继承指示符。

*   [http://blog.bdoughan.com/2012/01/jaxb-and-inhertiance-using-xmladapter.html](http://blog.bdoughan.com/2012/01/jaxb-and-inhertiance-using-xmladapter.html)

[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)还提供了一个扩展 (`@XmlDescrinatorNode`/`@XmlDescrimatorValue`)，使这个用例更容易（我是 MOXy 的负责人）。

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-moxy-extension.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-moxy-extension.html)

# c# - 带有后台代理的动态磁贴

> ID：13008534
> 
> 赞同：0
> 
> 时间：2012-10-22T09:35:25.693
> 
> 标签：c#, windows-phone-7, xaml

我想为我的应用创建一些动态磁贴。我正在使用页面的 UIElemnt 通过可写位图创建这个动态磁贴。我想在定期任务及其单独的项目中制作这些瓷砖。我在所有视图都存在的主要项目中引用了该项目。但是在我的后台调度项目中，我想访问主项目视图以访问 UIelement 以制作具有可写位图的动态图块。我无法访问，因为它没有该项目的参考。当我想添加它时，它说由于循环依赖而无法添加引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:19:41.830

You just have to change the way you've organized your solution. Create a third project and reference it from the main project and from the background agent's project. Then move all the shared code and views in that new project.

# android - 我的 ListView 不滚动

> ID：13008535
> 
> 赞同：0
> 
> 时间：2012-10-22T09:35:25.980
> 
> 标签：android, listview, scroll

我正在尝试使用静态标题和可滚动的动态列表进行活动。这是布局：

```
<GridLayout
 android:id="@+id/GridLayout2"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:columnCount="1" >
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:paddingTop="5dp" 
    android:paddingLeft="5dp"
    android:paddingRight="5dp">
    <ListView
      android:id="@+id/listex"
      android:layout_width="match_parent" 
        android:layout_height="0dp"
        android:layout_weight="1" />
 </LinearLayout> 
```

我尝试使用 height=0dp & weight=1 解决方案，但结果是当我向列表中添加某些内容时，它没有显示任何元素。

如果我使用 height= match_parent & weight=1 元素会显示但不可滚动

请帮忙，我尝试了很多组合gettign没有结果。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T12:54:12.717

您可以尝试使用以下代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="static header" />

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T07:30:01.507

我一直在使用这个列表视图，它工作正常。也许您的列表视图中没有足够的项目来滚动？

```
 <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="290dp"
        android:layout_weight="0.50" >
    </ListView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-15T11:56:58.010

这是我的解决方案。

```
<ListView
            android:id="@+id/listView"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_gravity="fill_horizontal"
            android:fadeScrollbars="true"
            android:layout_weight="1" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-27T08:05:51.567

将 ListView 权重设置为 1。或者您可以这样做。就在你设置你的适配器之后调用这个方法并在 dat 之后设置 adapternotifydatasetchange()。

```
public static void setListViewHeightBasedOnChildren(ListView listView) {
        ListAdapter listAdapter = listView.getAdapter();
        if (listAdapter == null)
            return;

        int desiredWidth = View.MeasureSpec.makeMeasureSpec(listView.getWidth(), View.MeasureSpec.UNSPECIFIED);
        int totalHeight = 0;
        View view = null;
        for (int i = 0; i < listAdapter.getCount(); i++) {
            view = listAdapter.getView(i, view, listView);
            if (i == 0)
                view.setLayoutParams(new ViewGroup.LayoutParams(desiredWidth, ViewGroup.LayoutParams.WRAP_CONTENT));

            view.measure(desiredWidth, View.MeasureSpec.UNSPECIFIED);
            totalHeight += view.getMeasuredHeight();
        }
        ViewGroup.LayoutParams params = listView.getLayoutParams();
        params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
        listView.setLayoutParams(params);
        listView.requestLayout();
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-22T09:37:09.593

您在 GridLayout 中的列表删除列表视图的父 GridLayout 它将完美滚动。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:paddingTop="5dp" 
    android:paddingLeft="5dp"
    android:paddingRight="5dp">
    <ListView
      android:id="@+id/listex"
      android:layout_width="match_parent" 
        android:layout_height="fill_parent"
        android:layout_weight="1" />
 </LinearLayout> 
```

垂直滚动`GridLayout`不应包含另一个垂直滚动小部件（ListView）。您不应将 a`ListView`放入其中，`ScrollView`因为`ListView`该类实现了自己的滚动，并且它只是不接收手势，因为它们都由其父级处理`ScrollView`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-22T10:18:03.707

设置为线性布局`weightSum = 1`

# c# - FTP 与 DB - 动态情况

> ID：13008537
> 
> 赞同：1
> 
> 时间：2012-10-22T09:35:40.843
> 
> 标签：c#, sql, asp.net-mvc, database, ftp

我有很多小图片要存储，这些图片用户可以经常更改。图像的平均大小为**50Kb - 150Kb**。假设我有 5000 张这样的图像。FTP 最终会变得无法管理，还是 MsSQL 数据库会承受很大的负载，因为普通网页可能会使用**25**个这些图像。

我应该选择什么技术？顺便说一句，在我的情况下，我使用的是由 webfarm 组成的托管解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:43:38.500

您可能希望将这些图像托管在 CDN 或类似设备上。以 SO 使用的东西为例，[imgur](http://imgur.com/)。

我认为性能和用户体验需要很长时间才能匹配。您可能还想存储一些图像的参考。

当然，这可能不是您的选择，那么我仍然会将您的图像放在您网站的子域上，即设置为提供静态内容，再次查看[SO](http://sstatic.net/)的详细示例。

# objective-c - 我们可以做些什么来让自定义 UIView 的用户可以在 XIB 中自定义 UIView？

> ID：13008543
> 
> 赞同：3
> 
> 时间：2012-10-22T09:36:03.180
> 
> 标签：objective-c, xcode, uiview, custom-controls, xib

自定义 UIView 最大的问题是我们在 XIB 中看到的只是一个白色的矩形。

我们根本无法自定义某些属性。例如，如果我们的自定义 subView 有一个标签，那么能够直接在 XIB 中为该标签设置文本是一种很好的选择。

![在此处输入图像描述](../Images/502fe17637aaec1d40b7e866c259a47a.png)

像 UIButton 这样的东西。

这甚至可行吗？

XIB 设计是否仅仅是捷径，而真正的代码在代码中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:12:24.503

不幸的是，没有真正的方法可以在 Interface Builder 的“Attributes Inspector”面板（您捕获的那个）中添加条目，以允许您像对内置 Cocoa 类所做的那样自定义值。

* * *

*（确切地说，一些博客解释了一些将旧的 Xcode3 插件（能够在 Xcode3 中做到这一点）转换为 Xcode4 插件的方法，但这没有正式记录，而且设置一个需要专用 Xcode 项目的过程非常复杂，只是为了创建您的自定义视图，声明其 IB 调色板，编写一些关联代码并将其嵌入到 xcode 插件中……）*

* * *

但是，**您仍然有一种可能性**，即使不是很方便，也可以直接在 Interface Builder 中自定义 XIB 中任何对象的任何属性，而不是通过代码来实现。

只需进入“身份检查器”（属性检查器之前的选项卡`Cmd-Alt-3`）并使用“用户定义的运行时属性”表来填写您要更改的属性的名称/键路径并指示它们的值。

![从 keyPath 自定义 IB 中的值](../Images/c84c869695a49bb356e61522e9b6fa44.png)

然而，在实践中，我很少看到它在我使用的 XIB 文件中使用，因为它不如专用的“属性检查器”调色板好，并且您必须在表中键入属性的*确切*名称才能影响它的价值：没有为您构建的可修改属性列表，面板中有漂亮的文本字段和复选框来帮助您……但它仍然像魅力一样工作！

* * *

请随时向 Apple 发送请求（使用他们的反馈工具）以请求此功能，因为您不是第一个希望这可能实现的人，也不会是最后一个请求它的人，所以也许希望 Apple 会收到足够多的请求，他们就会执行它……</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:58:28.950

是的，这是可能的。

首先，在您的自定义视图中添加以下属性（猜测您使用 ARC 功能）：

```
@property(nonatomic, strong) IBOutlet UILabel myLabel; 
```

现在，在您的 xib 中，确保主视图是您的自定义视图。在视图中所需的位置添加标签。单击自定义视图，然后使用连接检查器将标签链接到 myLabel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:53:46.170

故事板/笔尖显示了代码运行之前界面的外观。如果你想在故事板中看到它，你必须在故事板中构建它。如果您有自定义对象，故事板中有一个基本对象可用作占位符，但它不会显示代码中加载的内容。

# vba - 过滤掉数据透视表中的奇数

> ID：13008551
> 
> 赞同：2
> 
> 时间：2012-10-22T09:36:16.740
> 
> 标签：vba, excel, excel-2007, pivot-table

在我的数据透视表的源表中；包含两列；一个是**名字**，另一个是**分数**。正如线程标题所暗示的，我想显示具有偶数分数的人的所有名称及其相应分数。

实现此目的的另一种方法是创建第三列并运行 IF 公式来检查哪些数字是奇数。然后将第三列包含到数据透视表中并将其用作过滤器。

但是有没有办法在不修改源的情况下做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:06:39.387

您可以遍历枢轴项目，然后将它们除以 2 以检查它们是否是偶数，如果不是，则简单地隐藏它们。请参阅此示例。请修改它以满足您的需要。另外，我还没有进行任何错误处理。我相信你可以照顾好它...

**代码**

```
Option Explicit

Sub HideOddNumbers()
    Dim ws As Worksheet
    Dim pvtItem As PivotItem
    Dim pvt As PivotTable
    Dim pvtFld As PivotField

    '~~> Change this to the respective sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    '~~> Change this to the respective pivot name
    Set pvt = ws.PivotTables("PivotTable1")

    '~~> This is the column
    Set pvtFld = pvt.PivotFields("Scores")

    With pvtFld
        .CurrentPage = "(All)"
        .EnableMultiplePageItems = True

        '~~> Loop through all items in the pivot and
        '~~> divide the values by 2 and check if they are even or not
        For Each pvtItem In pvtFld.PivotItems
            If Val(pvtItem.Value) Mod 2 <> 0 Then pvtItem.Visible = False
        Next
    End With
End Sub 
```

**截屏**

***之前***：

![在此处输入图像描述](../Images/f3454a5e04f962e7f87fb7c532a0d6b1.png)

***之后***：

![在此处输入图像描述](../Images/996e7769aa1d56163f45438a86457181.png)

# c# - 将数据从磁盘加载到gridview

> ID：13008569
> 
> 赞同：0
> 
> 时间：2012-10-22T09:37:10.887
> 
> 标签：c#, file, gridview, hard-drive

如何将本地磁盘中的数据加载到 gridview 中？数据是mp3文件。但是文本文件也应该是一种选择。这不是我想要的文本文件的内容，只是文件名。这也适用于 mp3 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:58:12.503

您可以使用此代码：

```
DirectoryInfo di = new DirectoryInfo("your DriverName://");
dataGridView1.DataSource = di.GetDirectories(); 
```

或者您可以使用 Linq 进行过滤，...

```
DirectoryInfo di = new DirectoryInfo("your DriverName://")
var query = from p in di.GetDirectories()
            where p.Extension=="*.mp3"
            select new {Name=p.FullName };
 dataGridView1.DataSource = query.ToList(); 
```

并获取目录名称：

```
DirectoryInfo di = new DirectoryInfo("your DriverName://");
var query = from p in di.GetDirectories()
            select new { DirectoryName=p.FullName};
dataGridView1.DataSource = query.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:40:02.433

使用`DirectoryInfo`class 查看目录中的文件。然后指定一个过滤器并获取所需文件的集合。将 gridView 的 ItemsSource 绑定到此集合并覆盖 GridView 的 ItemsTemplate 以正确显示项目。

# javascript - 无法再次请求全屏 chrome

> ID：13008570
> 
> 赞同：6
> 
> 时间：2012-10-22T09:37:14.847
> 
> 标签：javascript, google-chrome, fullscreen

我有个问题。全屏请求在 Firefox 中运行良好，但在 Chrome 中，当我请求并取消全屏时，我无法再次请求（F11 有效）。此外，当我重新加载页面时，它会取消全屏。

```
jQuery('.fullScreen').click(function(){ 
   var docElm = document.documentElement;

   if (docElm.requestFullscreen) {
      docElm.requestFullscreen();
   }

   else if (docElm.mozRequestFullScreen) {
      docElm.mozRequestFullScreen();          
   }

   else if (docElm.webkitRequestFullScreen) {
      docElm.webkitRequestFullScreen(); 
}   
      jQuery('.fullScreen').css({'display' : 'none'});
      jQuery('.minimize').css({'display' : 'block'});
   }); 
```

最小化：

```
jQuery('.minimize').click(function(){               

                            if (document.exitFullscreen) {
                            document.exitFullscreen();
                            }

                            else if (document.mozCancelFullScreen) {
                                document.mozCancelFullScreen();
                            }

                            else if (document.webkitCancelFullScreen) {
                                document.webkitCancelFullScreen();
                            }               

                        jQuery('.fullScreen').css({'display' : 'block'});
                        jQuery('.minimize').css({'display' : 'none'});
                }); 
```

此外，当我全屏按 esc 时，它会最小化，但我无法使用我的按钮返回全屏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:37:00.740

好的，有几个想法。

首先是按下退出按钮时它不起作用的原因。很简单，因为您的 jquery 没有被执行。要解决刷新问题，您可以放置​​一个 cookie，说明浏览器是否处于全屏状态，如果是，您可以在页面就绪事件中使其全屏显示。我想为你提出一个新想法

下面是全屏 api 的完全复制可粘贴演示

我想强调一个片段

```
 fsElement.addEventListener(fullScreenApi.fullScreenEventName, function() {
    if (fullScreenApi.isFullScreen()) {
        fsStatus.innerHTML = 'Whoa, you went fullscreen';
    } else {
        fsStatus.innerHTML = 'Back to normal';
    }
}, true); 
```

您可以在此事件中添加代码以在用户离开全屏模式时进行处理。并运行你的最小化方法

```
 <!DOCTYPE html>
            <html>
            <head>
            <title>FullScreen API</title>

            <style>
            body {
                background: #F3F5FA;
            }
            #container {
                width: 600px;
                padding: 30px;
                background: #F8F8F8;
                border: solid 1px #ccc;
                color: #111;
                margin: 20px auto;
                border-radius: 3px;
            }

            #specialstuff {
                background: #33e;
                padding: 20px;
                margin: 20px;
                color: #fff;
            }
            #specialstuff a {
                color: #eee;
            }

            #fsstatus {
                background: #e33;
                color: #111;
            }

            #fsstatus.fullScreenSupported {
                background: #3e3;
            }
            </style>
            </head>
            <body>
            <div id="container">
                <div id="specialstuff">
                    <p>Inside here is special stuff which will go fullscreen</p>
                    <p>As of 10/20/2011, you'll need Safari 5.1, <a href="http://tools.google.com/dlpage/chromesxs">Chrome Canary</a>, or <a href="http://nightly.mozilla.org/">Firefox Nightly</a>
                    <p>Status: <span id="fsstatus"></span>
                </div>

                <input type="button" value="Go Fullscreen" id="fsbutton" />
                <p>
                </p>
            </div>

            <script>

            (function() {
            var 
                fullScreenApi = { 
                    supportsFullScreen: false,
                    isFullScreen: function() { return false; }, 
                    requestFullScreen: function() {}, 
                    cancelFullScreen: function() {},
                    fullScreenEventName: '',
                    prefix: ''
                },
                browserPrefixes = 'webkit moz o ms khtml'.split(' ');

            // check for native support
            if (typeof document.cancelFullScreen != 'undefined') {
                fullScreenApi.supportsFullScreen = true;
            } else {     
                // check for fullscreen support by vendor prefix
                for (var i = 0, il = browserPrefixes.length; i < il; i++ ) {
                    fullScreenApi.prefix = browserPrefixes[i];

                    if (typeof document[fullScreenApi.prefix + 'CancelFullScreen' ] != 'undefined' ) {
                        fullScreenApi.supportsFullScreen = true;

                        break;
                    }
                }
            }

            // update methods to do something useful
            if (fullScreenApi.supportsFullScreen) {
                fullScreenApi.fullScreenEventName = fullScreenApi.prefix + 'fullscreenchange';

                fullScreenApi.isFullScreen = function() {
                    switch (this.prefix) {  
                        case '':
                            return document.fullScreen;
                        case 'webkit':
                            return document.webkitIsFullScreen;
                        default:
                            return document[this.prefix + 'FullScreen'];
                    }
                }
                fullScreenApi.requestFullScreen = function(el) {
                    return (this.prefix === '') ? el.requestFullScreen() : el[this.prefix + 'RequestFullScreen']();
                }
                fullScreenApi.cancelFullScreen = function(el) {
                    return (this.prefix === '') ? document.cancelFullScreen() : document[this.prefix + 'CancelFullScreen']();
                }       
            }

            // jQuery plugin
            if (typeof jQuery != 'undefined') {
                jQuery.fn.requestFullScreen = function() {

                    return this.each(function() {
                        var el = jQuery(this);
                        if (fullScreenApi.supportsFullScreen) {
                            fullScreenApi.requestFullScreen(el);
                        }
                    });
                };
            }

            // export api
            window.fullScreenApi = fullScreenApi;   
            })();

            </script>

            <script>

            // do something interesting with fullscreen support
            var fsButton = document.getElementById('fsbutton'),
            fsElement = document.getElementById('specialstuff'),
            fsStatus = document.getElementById('fsstatus');

            if (window.fullScreenApi.supportsFullScreen) {
            fsStatus.innerHTML = 'YES: Your browser supports FullScreen';
            fsStatus.className = 'fullScreenSupported';

            // handle button click
            fsButton.addEventListener('click', function() {
                window.fullScreenApi.requestFullScreen(fsElement);
            }, true);

            fsElement.addEventListener(fullScreenApi.fullScreenEventName, function() {
                if (fullScreenApi.isFullScreen()) {
                    fsStatus.innerHTML = 'Whoa, you went fullscreen';
                } else {
                    fsStatus.innerHTML = 'Back to normal';
                }
            }, true);

            } else {
            fsStatus.innerHTML = 'SORRY: Your browser does not support FullScreen';
            }

            </script>

            </body>
            </html> 
```

下面我有你的 jquery 的更新版本

```
jQuery('.fullScreen').click(function(){ 
    maximize();
});

jQuery('.minimize').click(function(){               
    minimize();
});

function maximize(){
    var docElm = document.documentElement;

    if (docElm.requestFullscreen) {
    docElm.requestFullscreen();
    }

    else if (docElm.mozRequestFullScreen) {
    docElm.mozRequestFullScreen();          
    }

    else if (docElm.webkitRequestFullScreen) {
    docElm.webkitRequestFullScreen(); 
    }   
    jQuery('.fullScreen').css({'display' : 'none'});
    jQuery('.minimize').css({'display' : 'block'});
}

function minimize(){
    if (document.exitFullscreen) {
    document.exitFullscreen();
    }

    else if (document.mozCancelFullScreen) {
    document.mozCancelFullScreen();
    }

    else if (document.webkitCancelFullScreen) {
    document.webkitCancelFullScreen();
    }               

    jQuery('.fullScreen').css({'display' : 'block'});
    jQuery('.minimize').css({'display' : 'none'});
} 
```

重要说明

FullScreenChanged 事件 – W3C 和 Webkit 在元素全屏时触发 fullscreenchanged 事件，但 Mozilla 在文档对象上触发事件。

# android - 在 Android 中显示本地文件

> ID：13008577
> 
> 赞同：0
> 
> 时间：2012-10-22T09:37:32.463
> 
> 标签：android, webview

我想显示这些文件的内容：pdf、word、excel、txt、jpeg、bmp、png、tiff，但我不知道该怎么做。在 iOS 上，例如 UIWebView 控件可以显示所有文件类型，但 Android 上的 WebView 控件不能，甚至 tiff 图像，但 tiff 对我来说是最重要的，或者最终是 pdf。我试图找到任何用于商业用途的免费库，但没有成功，我只找到了那个库[https://github.com/jblough/Android-Pdf-Viewer-Library](https://github.com/jblough/Android-Pdf-Viewer-Library)，但它不适用于我的示例 pdf。我在 Android 2.3.3 上对其进行了测试。有没有可能打开这些文件？

# joomla2.5 - 如何在不保存到 darabase 的情况下将产品添加到美德购物车？

> ID：13008580
> 
> 赞同：0
> 
> 时间：2012-10-22T09:37:40.380
> 
> 标签：joomla2.5, virtuemart

如何将表单中的值作为产品添加到 VM 购物车？

我有一个表格，然后当用户填写表格时，该表格中的值将被添加到我的购物车中以进行结帐？所有事务都应保存到不在数据库中的会话中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:16:20.627

我不完全确定我是否理解您的问题，但听起来您想为您的产品添加额外的字段。

在产品菜单下，有一个自定义字段选项。您可以定义所有不同类型的字段。只需为您要收集的每个值创建一个字段。然后，在您的产品信息中，有一个额外字段选项卡，您可以在其中添加您创建的额外字段类型的任意组合。

# javascript - javascript对象中的依赖

> ID：13008583
> 
> 赞同：3
> 
> 时间：2012-10-22T09:37:50.217
> 
> 标签：javascript

我有这个 JavaScript 代码：

```
var r = {
    a1:function() {
        alert('hey!');
    },
    a2:this.a1
    /*,
    a3:r.a1, //<--Make an error when running
    a4:a1 //<--Make an error when running
    */ 
}; 
```

执行时`r.a1()`我收到警报，但执行时`r.a2()`我收到消息：

```
TypeError: r.a2 is not a function 
```

为什么？我怎样才能在一个声明中完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:42:51.840

`this`，在您的定义中不是指 r，而是指实际上下文（可能`window`）

你应该这样定义它：

```
var r = {
   a1: function() {}
   /* a3: r, // Here r is not yet assigned. First the object is created, then its value
             // is assigned to r.
  */
};

r.a2 = r.a1;
r.a3 = r.a1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:45:29.113

如果你只想使用对象字面量，你可以这样做：

```
var r = {
    a1:function() {
        alert('hey!');
    },
    a2:function () {
        this.a1();
    }
}; 
```

解释是：在对象声明中，`this`指的是你当前的上下文——也就是`this`你声明的函数中的值`r`。

正如[BiAiB](https://stackoverflow.com/a/13008669/182629)所说，您不能在声明中使用对象的名称（`r`在这种情况下），因为在创建对象之前不会分配变量。

如果您将函数分配给对象的成员，则当调用该函数时，上下文将引用您的对象，`this`r 也是如此。

# java - 在 java 中访问 ${request.remoteUser}

> ID：13008585
> 
> 赞同：2
> 
> 时间：2012-10-22T09:37:55.123
> 
> 标签：java, jsf, xhtml

我可以`${request.remoteUser}`在我的`xhtml`-file 中访问：例如。登录为`${request.remoteUser}`。

但是如何`${request.remoteUser}`在我的 BackingBean.java 中访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:42:05.730

在 JSF 支持 bean 中，您可以通过以下方式访问它：

```
HttpServletRequest request=(HttpServeltRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest()
request.getRemoteUser(); 
```

[请参阅此处](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html)和[此处](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRemoteUser%28%29)的文档。

# css - 如何使用 CSS 将样式添加到前 2 个列表元素

> ID：13008589
> 
> 赞同：0
> 
> 时间：2012-10-22T09:38:21.200
> 
> 标签：css

我有以下格式的列表，如何使用 CSS 为前 2 个列表元素添加样式（应该在 IE8 中工作）：

```
<ul id="list1"  style="margin-left:-20%;font-weight:bold" >
   <li class="xyz"> Element1 </li>
   <li class="xyz"> Element2 </li>
   <li class="xyz"> Element3 </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:40:28.037

您可以使用 nth-child 伪类，但它不适用于 IE8 及更早版本。相反，我会为每个元素设置样式，就像您想要设置前两个样式一样

```
ul li {
color: red;
} 
```

然后以不同的方式设计最后一个，如下所示：

```
ul li + li + li {
color: blue;
} 
```

这也适用于较旧的 IE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:43:49.797

在您的 CSS 中尝试此代码

```
 ul li:first-child {
        //style
    }
    /* equivalent to li:nth-child(2) */
    ul li:first-child + li {
        //style
    } 
```

这是 jsfiddle 中带有另一个代码的示例，但在 IE8 中使用 downvote 在这种情况下是不合适的：

[JSFIDDLE](http://jsfiddle.net/thirtydot/LvvNL/64/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:31:32.383

试试这个方法

```
 #list1 li:first-child
{

//styles//
}
#list1 li:first-child+li
{
  //styles//

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:55:56.690

对于这个问题，您在 head 标记中使用此代码，然后将 1 类设置为元素 2

```
<!--[if IE 8]>
  <style>
     .Element2{
        Your Style
     }
  </style>
<![endif]--> 
```

此代码仅适用于 IE8

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T10:00:57.127

您可以使用以下选择器轻松添加它，它也适用于 IE8

`#list1 li:first-child, #list1 li:nth-child(2){ border:1px solid red; }`

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-10-22T09:44:08.777

```
$("li:lt(2)").css("color", "red"); 
```

使用 JQuery 选择器`:lt()`（小于）将针对前 2 `li`。

在这里阅读 - [http://api.jquery.com/lt-selector/](http://api.jquery.com/lt-selector/)

# wpf - 如何在按钮控件模板的数据触发器中绑定自定义类对象的属性？

> ID：13008590
> 
> 赞同：0
> 
> 时间：2012-10-22T09:38:23.410
> 
> 标签：wpf

切换按钮具有以下样式。

```
<Style x:Key="SearchDataControlStyle" TargetType="{x:Type ToggleButton}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate >
                    <Grid x:Name="grd" Height="80" Width="120" Margin="5">
                        <Rectangle x:Name="baseColor" RadiusY="15" RadiusX="15" Fill="{TemplateBinding Background}"/>
                        <Rectangle x:Name="Glow" RadiusY="15" RadiusX="15" Opacity="0">
                            <Rectangle.Fill>
                                <RadialGradientBrush GradientOrigin="0.505,1.291" RadiusY="0.853" RadiusX="0.853">
                                    <GradientStop Color="Black"/>
                                    <GradientStop Color="White" Offset="1"/>
                                    <GradientStop Color="#FF00BBFF"/>
                                    <GradientStop Color="#FF939393" Offset="1"/>
                                    <GradientStop Color="#00C1C1C1" Offset="0.996"/>
                                    <GradientStop Color="#A5A4E0EB" Offset="0.28"/>
                                    <GradientStop Color="#53818AD5" Offset="0.543"/>
                                    <GradientStop Color="#7C92B5E0" Offset="0.453"/>
                                </RadialGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>
                        <Rectangle x:Name="Glass" RadiusY="15" RadiusX="15" Opacity="0.8">
                            <Rectangle.Fill>
                                <LinearGradientBrush EndPoint="0.514,1.158" StartPoint="0.514,-0.101">
                                    <GradientStop Color="Black" Offset="0"/>
                                    <GradientStop Color="White" Offset="1"/>
                                    <GradientStop Color="Black" Offset="0.149"/>
                                    <GradientStop Color="#FFABABAB" Offset="1"/>
                                    <GradientStop Color="#FF7A7A7A" Offset="0.414"/>
                                    <GradientStop Color="#FF909090" Offset="0.61"/>
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>
                        <StackPanel Orientation="Horizontal">
                            <Image x:Name="imgDependent" Visibility="Visible" Source="D:\Elektra Main\SearchPanel\DynamicSearchPanel\SearchProvider\Dependent.png" HorizontalAlignment="Left" Height="20" Width="20" Margin="3" VerticalAlignment="Top" />
                            <Image x:Name="imgOptional" Visibility="Visible" Source="D:\Elektra Main\SearchPanel\DynamicSearchPanel\SearchProvider\Optional.png" HorizontalAlignment="Left" Height="20" Width="20" Margin="3" VerticalAlignment="Top" />
                        </StackPanel>
                        <ContentPresenter Content="{Binding Description}"  VerticalAlignment="Center" HorizontalAlignment="Center" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="Control.IsMouseOver" Value="True">
                            <Setter TargetName="Glow" Property="Opacity" Value="0.8" />
                        </Trigger>
                        <Trigger Property="ToggleButton.IsChecked" Value="True">
                            <Setter TargetName="baseColor" Property="Fill" Value="Black" />
                        </Trigger>
                        <DataTrigger Binding="{Binding IsDependentElement}" Value="{x:Null}" >
                            <Setter TargetName="imgDependent" Property="Visibility" Value="Collapsed"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding IsOptionalElement}" Value="{x:Null}" >
                            <Setter TargetName="imgOptional" Property="Visibility" Value="Collapsed"/>
                        </DataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Control.Foreground" Value="White" />
    </Style> 
```

问题是 Togglebutton DataContext 是一个自定义类，它具有 IsOptionalElement 和 IsDependentElement 属性。我设置了两个不起作用的数据触发器？

```
public class SearchData
{
    public string FieldName { get; set; }

    public string Description { get; set; }

    public SearchDataType Type { get; set; }

    public string Validator { get; set; }

    public object DefaultValue { get; set; }

    public object SelectedValue { get; set; }

    public Dictionary<string, object> ComboBoxItemSource
    {
        get;
        set;
    }

    public int DefaultSelectedIndex { get; set; }

    public bool IsYesOrNo { get; set; }

    public OnValidateText OnValidate { get; set; }

    public string OptionalElement { get; set; }

    public string DependentElement { get; set; }

    public bool IsDisplayed { get; set; }

    public bool HasValue { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:03:14.963

我想你可能`Value`在你的`DataTrigger`.

是`IsDependentElement`和`IsOptionalElement`普通的“布尔”变量，还是可以为空？

我创建了一个包含“bool”属性的 ViewModel，然后将 DataTrigger 更改为 Value="False"，它在 False 时折叠图像，并在 True 时显示。

# java - 使用spring mvc从子jsp到父选择值

> ID：13008593
> 
> 赞同：1
> 
> 时间：2012-10-22T09:38:27.473
> 
> 标签：java, javascript, jsp, spring-mvc

我有一个父jsp。

```
 <span> Operator</span>
  <form:select path="type" name="type" id="type" onChange="SelectType();">
  <form:option value="Select type">Select type</form:option>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option> 
```

选择类型后，将根据使用 javascript 函数 selectType() 选择的选项显示一个弹出窗口；

选择类型（）

```
 <script language="javascript">
 function SelectType() 
 {
    var opr = document.getElementById("type").value;
    window.open("vehicle?type=" + opr, "win1", 'width=500,height=300,status');
 }
 </script> 
```

弹出窗口包含一些关于从数据库中显示的车辆类型的规格。

窗口jsp是..

```
<c:forEach items="${list}" var="top" varStatus="loop">
<tr>
   <td width=25%><c:out value="${top.name}" /></td>
   <td width=25%><c:out value="${top.price}" /></td>
   <td width=15%><c:out value="${top.engine}" /></td>
</c:forEach> 
```

弹出 jsp 显示来自数据库的列表。现在我需要选择一个特定的行，并且该行的价格值应该传递到父 jsp 中的一个文本框。我尝试在这样的子jsp中编写一个javascript..

```
function showSelected(){

var i=document.getElementById("child_field_id").value;
opener.document.form.parent_name_id.value = i;
opener.document.form.submit();
window.close();    
} 
```

但它没有用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T21:31:21.403

请试试：

```
window.opener.document.getElementById('parent_name_id').value="Value changed..." 
```

# php - 如何在 Symfony2 中注入特定的 Doctrine Entity Manager？

> ID：13008594
> 
> 赞同：14
> 
> 时间：2012-10-22T09:38:39.207
> 
> 标签：php, symfony, doctrine-orm

在几个使用相同数据库的项目上工作，我们制作了一个 Symfony2 Bundle 来映射所有常用功能。

现在的问题是我们有第二个数据库，我们需要与第一个数据库相同的服务。

`**config.yml**`

```
doctrine:
  dbal:
    default_connection: main
    connections:
      main:
        /* ... */
      sub:
        /* ... */

  orm:
      default_entity_manager:   main
      entity_managers:
          main:
              connection:       main
              mappings:
                  AcmeMainBundle: ~
          sub:
              connection:       sub
              mappings:
                  AcmeSubBundle: ~
      auto_generate_proxy_classes: %kernel.debug% 
```

`**@AcmeMainBundle > services.yml**`

```
services:
    mainmanager:
      class: Acme\MainBundle\MainManager
      arguments: [ @doctrine.orm.entity_manager ] 
```

`**Acme\MainBundle\MainManager**`

```
class MainManager
{
    public function __construct(EntityManager $em)
    {
        $em->getRepository('AcmeMainBundle:Foo');
    }
} 
```

这组工作正常，我得到了所有预期的结果，因为`default_entity_manager`设置为`main`正确的 EntityManager。

但现在问题来了。

`**@AcmeSubBundle > services.yml**`

```
submanager:
  class: Acme\SubBundle\SubManager
  arguments: [ @doctrine.orm.entity_manager ] 
```

`**Acme\SubBundle\SubManager**`

```
class SubManager
{
    public function __construct(EntityManager $em)
    {
        $em->getRepository('AcmeSubBundle:Bar'); // Throws exception
    }
} 
```

> 未知实体命名空间别名 AcmeSubBundle

因为默认`EntityManager`进入`main`。

我的问题是，是否有一种*“干净”的方式可以在***services.yml**中注入特定的实体管理器作为参数？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-22T15:15:02.047

> 在 2013 年 2 月 18 日回答

这是一种从`services.yml`
Doctrine 传递特定实体管理器的方法，生成相对于其名称的新服务名称。

例子：

```
@doctrine.orm.default_entity_manager 
```

在这种情况下，它会生成另外 2 个实体管理器

```
@doctrine.orm.main_entity_manager
@doctrine.orm.sub_entity_manager 
```

传递的参数是一个`Doctrine\ORM\EntityManager`对象

就我而言：

`**services.yml**`

```
submanager:
    arguments: [ @doctrine.orm.sub_entity_manager ] 
```

* * *

> 更新 22/08/13

对此的替代方法是直接提供存储库而不是管理器。

为此，您必须创建一个保存存储库的服务。

`**services.yml**`

```
services:
    acme.foo_repository:
        class: Doctrine\Common\Persistence\ObjectRepository
        factory_service: doctrine.orm.main_entity_manager
        factory_method:  getRepository
        arguments:
            - "AcmeMainBundle:Foo" 
```

我们让教义生成给定的存储库。
然后我们可以将它注入到另一个服务中

```
services:
    mainmanager:
        class: Acme\MainBundle\MainManager
        arguments:
            - @acme.foo_repository 
```

# graphite - 将历史数据导入 Whisper 时手动汇总历史数据

> ID：13008599
> 
> 赞同：2
> 
> 时间：2012-10-22T09:39:02.013
> 
> 标签：graphite

我正在尝试将两年前的数据存档导入到耳语中，并且在尝试理解导入的数据时遇到问题，因为我认为某些值正在丢失。我是否需要手动聚合比第一个模式定义的保留时间更早的时间戳的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:51:48.303

我没有用最新版本（0.9.10）尝试过，但已经尝试过你用 0.9.9 所说的并且遇到了同样的问题。

假设您有 30 天每分钟一个项目，然后一年每天一个项目（60 秒：30 天，1 天：1 年），那么当您在两个月前提交一分钟 50 的值时，耳语将看到时间戳适合的位置，将看到它适合一维指标并将其值存储在该项目上，如果您在下一分钟发送，它将在耳语文件上获得相同的点，并且只会覆盖您的最后一个指标。

我发现的解决方法是更改​​您的架构，同时将您的架构支持的最长时间导入到您的架构上的较短时间段，在上面的示例中为 60 秒：1 年。然后导入所有数据，当您结束导入时，在您的 Whisper 文件上运行 Whisper-resize.py 以将其转换回正确的模式（60s:1d,1d:1y）。这样就可以解决问题，但请注意在执行此操作时选择正确的聚合方法。

祝你好运！

古兹曼

# javascript - jQuery单击警报（）

> ID：13008603
> 
> 赞同：2
> 
> 时间：2012-10-22T09:39:25.430
> 
> 标签：javascript, jquery

你知道为什么这个方法点击不显示警报吗？因为我无法赶上这个事件。

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script>
jQuery(function () {
    jQuery(".jtable-command-button.jtable-edit-command-button").click(function () {
        alert("asdas");
    });
});

</script>
</head>
<body>

<h1>My First JavaScript</h1>
<p id="demo">This is a paragraph.</p>

<button class="jtable-command-button jtable-edit-command-button" title="Edytuj pozycję">

</body>
</html> 
```

我给你们所有人的帮助点[关闭]谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T09:42:07.833

1.  您正在尝试使用一个`$`函数（可能来自 jQuery）而不定义它（例如通过加载 jQuery）
2.  您试图在创建绑定的元素之前找到事件处理程序
3.  您正在使用`id`选择器，但元素没有 id（它确实有一个类）（**注意：在第一次编辑问题后，情况不再如此**）
4.  您正在使用 a`descendant combinator`和 a `type selector`，但`type`应该是 a`class`并且您要定位的元素属于这两个类。它没有作为任一类成员的祖先元素。（注意：HTML 类属性采用*空格分隔*的类列表）
5.  缺少按钮的结束标签和标签

JS 部分的固定版本是：

```
<script src="jquery.js"></script> <!-- Set this path correctly -->
<script>
jQuery(function () {
    jQuery(".jtable-command-button.jtable-edit-command-button").click(function () {
        alert("asdas");
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:40:04.540

```
$(".jtable-command-button.jtable-edit-command-button").click(function () {
alert("asdas"); 
```

您需要在课程之后包含“ `.`” 。`.jtable-command-button``jtable-edit-command-button`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T09:41:53.400

你有类名，所以类选择器以 jquery 开头`.`。

```
$(".jtable-command-button.jtable-edit-command-button").click(function () {
    alert("asdas");
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T09:45:54.680

你应该使用 . 用于类和 # 用于 id

```
$(".jtable-command-button").click(function () {
   alert("asdas");
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T09:44:28.333

我希望你有 jQuery 声明？如果是这样，试试这个：

```
$(".jtable-command-button.jtable-edit-command-button").click(function () {
   alert("asdas");
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-22T09:44:38.440

根据您的代码，您已将 # 用于调用点击事件函数，但 # 用于 ID，点 (.) 用于类，因此您使用 .(dot) 而不是 #

```
 $(".jtable-command-button.jtable-edit-command-button").click(function () {
    alert("asdas");
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-22T09:45:25.087

假设你已经下载了 jquery，你必须导入 js 文件：

```
<script type="text/javascript" src="yourPath/jquery-1.7.2.js"></script>  //your jquery version 
```

然后您可以尝试上述答案或：

```
$("button[title='Edytuj pozycję']").click(function(){
alert("asdad");
}); 
```

# hadoop - 通过hadoop访问数据？一步一步的解释

> ID：13008606
> 
> 赞同：0
> 
> 时间：2012-10-22T09:39:36.723
> 
> 标签：hadoop, hdfs

我想了解需要通过 HDFS 访问数据时发生的每一个步骤。我在哪里可以找到 HDFS 上写/读操作的分步说明。

我很清楚名称节点包含文件系统特定元数据这一事实。但我想确切地知道存储在名称节点上的数据是什么。这是我的猜测：当单个数据节点使用它们托管的各个块的块信息更新名称节点时，当它们启动时，名称节点只有文件名（具有完整的目录结构）和数据所在的块号因为该文件存储在。每当读/写进入时，它都会从名称节点写入/读取块编号，并根据名称节点存储在内存中的反向映射接近数据节点（映射由数据节点构建并在它们出现时更新）告诉文件操作哪个块号由哪个数据节点托管，因此它需要向/从哪些数据节点写入/读取信息。这只是一个猜测，希望有人能证实这一点。此外，这是否是映射器从指定为 map reduce 作业的输入的文件中读取的方式，唯一的区别是作业跟踪器可以执行找出数据节点并在相应数据节点上生成映射器的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:54:17.440

> 我在哪里可以找到 HDFS 上写/读操作的分步说明。

查看[此](https://docs.google.com/file/d/0B-zw6KHOtbT4MmRkZWJjYzEtYjI3Ni00NTFjLWE0OGItYTU5OGMxYjc0N2M1/edit?pli=1)漫画以从 HDFS 读取/写入数据。它不处理 API 级别的详细信息，而是在较高级别进行描述。另外，[这篇](http://www.aosabook.org/en/hdfs.html)关于 HDFS 的文章很有趣。

> 我很清楚名称节点包含文件系统特定元数据这一事实。但我想确切地知道存储在名称节点上的数据是什么。

可以使用这些[说明](http://hadoop.apache.org/docs/hdfs/r0.21.0/hdfs_imageviewer.html)对 HDFS 元数据内容进行离线转储。

# c# - 在附加属性中绑定到 FrameworkElement 的属性

> ID：13008609
> 
> 赞同：0
> 
> 时间：2012-10-22T09:39:48.003
> 
> 标签：c#, binding, attached-properties, freezable

我现在已经如何解决我的问题，但我需要解释为什么它会这样工作。我创建了一个设置控件`Text`属性的测试附加属性。`TextBlock`由于我需要在附加属性中包含更多参数，因此我使该属性接受通用属性 ( `IGeneralAttProp`)，因此我可以像这样使用它：

```
 <TextBlock>
        <local:AttProp.Setter>
            <local:AttPropertyImpl TTD="{Binding TextToDisplay}" />
        </local:AttProp.Setter>
    </TextBlock> 
```

以下是`Setter`附加属性和`IGeneralAttProp`接口的实现：

```
public class AttProp {
    #region Setter dependancy property
    // Using a DependencyProperty as the backing store for Setter.
    public static readonly DependencyProperty SetterProperty =
        DependencyProperty.RegisterAttached("Setter", 
            typeof(IGeneralAttProp), 
            typeof(AttProp),
            new PropertyMetadata((s, e) => {
                IGeneralAttProp gap = e.NewValue as IGeneralAttProp;
                if (gap != null) {
                    gap.Initialize(s);
                }
            }));

    public static IGeneralAttProp GetSetter(DependencyObject element) {
        return (IGeneralAttProp)element.GetValue(SetterProperty);
    }

    public static void SetSetter(DependencyObject element, IGeneralAttProp value) {
        element.SetValue(SetterProperty, value);
    }
    #endregion
}

public interface IGeneralAttProp {
    void Initialize(DependencyObject host);
} 
```

和`AttPropertyImpl`类的实现：

```
class AttPropertyImpl: Freezable, IGeneralAttProp {
    #region IGeneralAttProp Members
    TextBlock _host;
    public void Initialize(DependencyObject host) {
        _host = host as TextBlock;
        if (_host != null) {
            _host.SetBinding(TextBlock.TextProperty, new Binding("TTD") { Source = this, UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged });
        }
    }
    #endregion

    protected override Freezable CreateInstanceCore() {
        return new AttPropertyImpl();
    }

    #region TTD dependancy property
    // Using a DependencyProperty as the backing store for TTD.
    public static readonly DependencyProperty TTDProperty =
        DependencyProperty.Register("TTD", typeof(string), typeof(AttPropertyImpl));

    public string TTD {
        get { return (string)GetValue(TTDProperty); }
        set { SetValue(TTDProperty, value); }
    }
    #endregion
} 
```

`AttPropertyImpl`如果继承自 ，一切正常`Freezable`。如果它只是一个`DependencyObject`比它无法与消息绑定：

**找不到目标元素的管理 FrameworkElement 或 FrameworkContentElement。绑定表达式：路径=TextToDisplay；数据项=空；目标元素是“AttPropertyImpl”（HashCode=15874253）；目标属性是“TTD”（类型“字符串”）**

当它是 a 时`FrameworkElement`，绑定没有错误，但是该值未绑定。

**问题是**：为什么`AttPropertyImpl`必须继承 from`Freezable`才能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:57:15.847

问题是它`AttPropertyImpl`不在元素树中，看看这篇[文章](http://drwpf.com/blog/2008/05/22/leveraging-freezables-to-provide-an-inheritance-context-for-bindings/)，它解释了 Freezable 对象在这种情况下的作用。

# iphone - UIImageView 中的高分辨率图像显示

> ID：13008612
> 
> 赞同：2
> 
> 时间：2012-10-22T09:39:49.860
> 
> 标签：iphone, memory-management, crash, uiimageview

我的要求是需要在 UIImageView 中显示 4000 x 2000 的图像，但我在 UIImageView 中显示了这个图像......在那次导航应用程序崩溃之后我收到了内存警告......谁能建议我如何摆脱这个问题......并且是的，我不想调整图像的大小

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:44:02.757

您应该使用[`CATiledLayer`](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CATiledLayer_class/Introduction/Introduction.html). 有关示例实现，请参阅 Apples [PhotoScroller](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T10:43:55.447

尝试使用此代码，它可能会解决您的问题

```
 CGSize initialImageSize = userimage.frame.size;

     CGSize imageSize = userimage.image.size;
     CGFloat aspectRatio = imageSize.width / imageSize.height;

     CGRect imageFrame = userimage.frame;

     if (initialImageSize.width / aspectRatio <= initialImageSize.height) {
     imageFrame.size.width = initialImageSize.width;
     imageFrame.size.height = imageFrame.size.width / aspectRatio;
     } else {
     imageFrame.size.height = initialImageSize.height;
     imageFrame.size.width = imageFrame.size.height * aspectRatio;
     }
     userimage.frame = imageFrame; 
```

其中 userimage 是`UIImageView` 您加载图像的位置。

# android - Proguard 函数名称不明确

> ID：13008613
> 
> 赞同：0
> 
> 时间：2012-10-22T09:39:55.460
> 
> 标签：android, proguard, deobfuscation

我需要知道是否有一些选项可以防止在混淆过程中为不同的函数赋予相同的名称。

**映射文件：**

```
org.apache.http.impl.client.cache.BasicHttpCacheStorage -> org.apache.http.impl.client.cache.f:
    67:68:void putEntry(java.lang.String,org.apache.http.client.cache.HttpCacheEntry) -> a
    78:78:org.apache.http.client.cache.HttpCacheEntry getEntry(java.lang.String) -> a 
```

我想为不同的功能使用不同的名称，而不是行间隔。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:04:46.630

该选项`-useuniqueclassmembernames`执行此操作，至少对于开头未重载的名称（只要参数类型不同，java 允许重载名称）。

# javascript - ext js 4窗口第一次不想更改选项

> ID：13008614
> 
> 赞同：0
> 
> 时间：2012-10-22T09:39:55.607
> 
> 标签：javascript, extjs, extjs4

我有窗户

```
Ext.define('SD.view.SDDetail', {
    extend: 'Ext.window.Window',
    alias: 'widget.sddetailwindow',
    height: 620,
    width: 850,
    layout: 'fit',
    border: false,
    modal: true,

    isDemandReadOnly: true,
    changeStatusOnly: true,
    isNew: true,
 initComponent: function () {}} 
```

当我打开它时，我想更改选项 isDemandReadOnly isNew changeStatusOnly 像这样，此代码来自控制器

```
, onAdd: function (item) {
        var win = this.getSdDetailWindow({
            isDemandReadOnly: false,
            changeStatusOnly: false,
            isNew: false
        });

        win.show();
} 
```

但是第一次 isDemandReadOnly isNew changeStatusOnly 不要在第二次更改它的值这一切都可以，为什么第一次我的值没有改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:59:46.597

使用这些属性集创建您的组件

```
var win = Ext.create('SD.view.SDDetail', {
    isDemandReadOnly: false,
    changeStatusOnly: false,
    isNew: false
}) 
```

或在您的吸气剂调用后设置它们

```
var win = this.getSdDetailWindow();

win.isDemandReadOnly = false;
win.changeStatusOnly = false;
win.isNew = false; 
```

# php - Twitter 状态更新：in_reply_to_status_id 始终为空

> ID：13008622
> 
> 赞同：0
> 
> 时间：2012-10-22T09:40:22.317
> 
> 标签：php, api, twitter

我正在使用 PHP Twitter API 更新 Twitter 上的状态。我已从 Tweet 检索到 in_reply_to_status_id 参数。当我尝试回复该推文时，我已将状态和 in_reply_to_status_id 参数传递给 twitter 发布函数。但在 curl 响应中，它始终显示 in_reply_to_status_id 参数为空。

任何想法我做错了什么？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:55:44.313

我可以通过在回复 Twitter 帖子时将 id 参数传递给 reply_to_status_id 来解决这个问题

# javascript - Dojo 移动和 dojox.mobile.ListItem 中的回调

> ID：13008629
> 
> 赞同：1
> 
> 时间：2012-10-22T09:40:38.490
> 
> 标签：javascript, mobile, dojo

我是道场新手，在移动版中遇到过这个问题：我尝试使用带有javascript函数的回调，但它不起作用。

我究竟做错了什么？

```
<script>
function My_function(){
    alert("Hello");
}
</script>

<div id="homepage_view" data-dojo-type="dojox.mobile.View">

  <h1 data-dojo-type="dojox.mobile.Heading">Mobile....</h1>

  <ul data-dojo-type="dojox.mobile.RoundRectList">
    <li data-dojo-type="dojox.mobile.ListItem"
        data-dojo-props='moveTo:"whereIam_view",
                         transition:"slide",
                         callback:"My_function()",
                         '>sth....</li>
    <li data-dojo-type="dojox.mobile.ListItem"
        data-dojo-props='moveTo:"places_aroud_me_view",
                         transition:"slide"'>sth else....</li>
    <li data-dojo-type="dojox.mobile.ListItem"
        data-dojo-props='moveTo:"places_in_koszalin_view",
                         transition:"slide"'>sth even more else....</li>                         
  </ul>

</div> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:34:51.510

您可以使用引用而不是函数名称字符串。代替：

```
function My_function(){
alert("Hello");
} 
```

采用：

```
functionName = function My_function(){
alert("Hello");
} 
```

然后在道具里面

```
 data-dojo-props='moveTo:"whereIam_view",
                         transition:"slide",
                         callback:functionName,
                         '>sth....</li> 
```

记住！没有在 functionName 周围的引号

# php - 将带有特殊字符的文件上传到 wampserver 上的 mediawiki

> ID：13008631
> 
> 赞同：0
> 
> 时间：2012-10-22T09:40:40.060
> 
> 标签：php, mysql, special-characters, mediawiki, wampserver

我尝试将文件上传到 WAMP 服务器上的语言环境 mediawiki，名称中带有特殊字符（例如 ö、ü、ä），但我只收到以下错误消息：

```
This wiki does not support filenames with special characters. 
```

我的配置：

*   Wampserver 2.2
*   MySQL：5.5.24
*   PHP：5.2.9-2
*   阿帕奇：2.2.22
*   媒体维基 1.19.2

我已经尝试将 php.ini、my.ini、httpd.conf 和 LocalSettings.php 中的默认字符集设置为 utf-8，但这有效果。有没有办法可以上传名称中包含特殊字符的文件？我已经在这个问题上花了几天时间，如果有人能给我一些提示，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:57:24.633

这是[MediaWiki 软件的问题](https://bugzilla.wikimedia.org/show_bug.cgi?id=1780)，而不是您的配置问题。

# cuda - 对全局内存的合并内存访问；CUDA 与 Opencl

> ID：13008632
> 
> 赞同：2
> 
> 时间：2012-10-22T09:40:40.467
> 
> 标签：cuda, opencl

CUDA 和 OpenCL 的合并访问是否有不同的要求？我认为它必须是硬件功能，所以API应该真的无关紧要。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:35:11.907

这是正确的。CUDA 本身对合并访问没有任何要求；硬件确实如此，而且无论您是使用 CUDA、OpenCL、DirectCompute、OpenGL 还是其他方式对其进行编程，硬件都具有相同的要求。在 CPU 硬件上，缓存行为也可以这样说；如果您使用的是 C、Java 或 Python，缓存行大小和缓存行为并不重要。

# jquery - .data() 查询

> ID：13008633
> 
> 赞同：2
> 
> 时间：2012-10-22T09:40:58.613
> 
> 标签：jquery

是否可以获取存储在元素上的数据数量然后遍历它们？

例如，我想做类似的事情：

```
for(;elmt.data().length<i++;){
   //iterate thro elmt.data
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T09:44:24.693

`.data()`返回一个没有属性的对象`length`，但这会起作用：

```
$.each($('#someElement').data(), function (key, value) {
    console.log(key,value);
}); 
```

# openjpa - 如何创建 EntityManager 对象？

> ID：13008639
> 
> 赞同：0
> 
> 时间：2012-10-22T09:41:09.250
> 
> 标签：openjpa

我是 Openjpa 的新手。我需要为名为 Draco-PU 的持久性单元显式创建一个 EntityManager 对象。我定义了以下持久性 xml。请帮忙！

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns
/persistence/persistence_1_0.xsd">
<persistence-unit name="Draco-PU" >
<provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
<jta-data-source>DracoDataSource</jta-data-source>
<non-jta-data-source>DracoUnmanagedDataSource</non-jta-data-source>
<class>dk.tdc.soa.smo.draco.db.model.DslServiceEntity</class>
<class>dk.tdc.soa.smo.draco.db.model.DslServiceCatalogEntity</class>
<class>dk.tdc.soa.smo.draco.db.model.History</class>
<class>dk.tdc.soa.smo.draco.db.model.ConfigEntity</class>
<properties>
  <property name="openjpa.Log" value="DefaultLevel=WARNING, Runtime=WARNING, Tool=WARNING, SQL=WARNING" />
  <!-- <property name="openjpa.jdbc.DBDictionary" value="org.apache.openjpa.jdbc.sql.OracleDictionary" />  -->     
  <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(ForeignKeys=true)" />
</properties>
</persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:45:00.653

两周前我是新来的，所以我的回答物有所值，但我确实喜欢这样：

```
EntityManager entityManager = 
Persistence.createEntityManagerFactory("nameofyourpersistenceunit").createEntityManager(); 
```

# php - 在数据库中保存和检索 DHTML 页面

> ID：13008645
> 
> 赞同：0
> 
> 时间：2012-10-22T09:41:38.203
> 
> 标签：php, database, dhtml

我有一个网页，它使用大量的 javascript 来调整大小、拖放、动态内容生成、文件上传等。
所以现在的问题是我能够成功地将整个 HTML 标记保存在数据库中，但是，当我检索并用新的（从数据库中检索到的）替换当前正文的内容，内容的所有动态属性都消失了。有什么办法可以保留页面的所有动态属性。ps 我没有保存 JS 或 CSS，因为它在服务器上保持静态。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:49:44.220

确保所有交互都由用户触发。

例如：$(document).ready() 的状态；使用 $(element).hover();

如果这不是一个选项，那么您总是可以重新加载页面。

# iphone - 如何在使用 UIPickerView 时禁用视图

> ID：13008646
> 
> 赞同：3
> 
> 时间：2012-10-22T09:41:38.610
> 
> 标签：iphone, objective-c, ios, uiview, uipickerview

我一直在使用`UIPickerView`，我的问题很简单，如何在显示选择器视图时禁用视图，以便我们可以确保用户不会更改视图中的任何内容。我尝试过`setuserInteractinEnabled`: 方法，但它也禁用了选择器视图..有什么想法..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:47:52.883

我不得不做一些类似的事情，并将 an 子类`UIActionSheet`化为它添加一个选择器视图。当 Action Sheet 启动时，您无法与底层视图交互。

您可以在此处找到一些关于如何将 a 添加`UIPickerView`到的示例`UIActionSheet`，例如[如何在 UIActionSheet 中添加 UIPickerView](https://stackoverflow.com/questions/1958920/how-to-add-uipickerview-in-uiactionsheet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:49:15.083

你有几个选择：

1.  如果您使用的是 Ipad，则在弹出窗口中显示选择器：[Popover](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)
2.  如果您使用的是 Iphone，请将其显示在操作表 (UIActionSheet) 中：[操作表](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html)
3.  使用当前模态视图控制器显示选择器

这 3 个选项可以阻止父视图触摸事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:56:46.033

取一个`UIView`名字 viewBack 如下所示

```
@interface ViewController : UIViewController{
    UIView *viewBack;
} 
```

在`viewDidLoad:`方法中，只需定义这个 viewBackwith 框架，即

```
- (void)viewDidLoad
{
        viewBack = [[UIView alloc] initWithFrame:CGRectMake(95, 230, 130, 40)];
        viewBack.backgroundColor = [UIColor blackColor];
        viewBack.alpha = 0.7f;
        viewBack.layer.masksToBounds = NO;
        viewBack.layer.cornerRadius = 8; 
        viewBack.hidden =YES;
} 
```

当您想`UIPickerView`在该方法上显示当时的显示屏幕时，像这样..

```
-(IBAction)btnPickerViewOpen_Clicked:(id)sender{ 
         viewBack.hidden = NO;
        [self.view bringSubviewToFront:viewBack];
        [self.view bringSubviewToFront:yourPickerView];
} 
```

当你想隐藏`UIPickerView`当时使用波纹管流程......

```
-(IBAction)btnPickerViewClosed_Clicked:(id)sender{ 
         viewBack.hidden = YES;
        // also hide pickerview with your requirement
} 
```

我希望这可以帮助你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:50:47.160

我通常会添加额外的具有 50% 透明度和黑色背景的 UIView - 这解决了三个问题：

*   自定义视图（pickerview 或任何其他用户输入字段）
*   背景变暗 - 让用户注意到需要做什么
*   仅在pickerview/文本输入/等上可用的用户交互

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T10:07:31.407

您只需要尝试@Rene Jennrich 的答案.. 您需要查看一些示例.. 如果您愿意，请尝试此代码..

```
 UIActionSheet *inputActionSheet = [[UIActionSheet alloc] initWithTitle:nil 
                                                   delegate:nil
                                          cancelButtonTitle:nil
                                     destructiveButtonTitle:nil
                                          otherButtonTitles:nil];
    [inputActionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

    UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0,320,40)];
    [pickerToolbar sizeToFit];
    pickerToolbar.barStyle = UIBarStyleBlackTranslucent;

    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelButtonPressed:)];
    [barItems addObject:cancelBtn];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    [barItems addObject:flexSpace];
    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(doneButtonPressed:)];
    [barItems addObject:doneBtn];
    [pickerToolbar setItems:barItems animated:YES];
    [inputActionSheet addSubview:pickerToolbar];

    UIPickerView fontPickerView = [[UIPickerView alloc]initWithFrame:CGRectMake(0, 40, 0, 0)];
    fontPickerView.showsSelectionIndicator = YES;
    [fontPickerView setTag:1];
    [fontPickerView setDelegate:self];
    [fontPickerView setDataSource:self];
    [inputActionSheet addSubview:fontPickerView]; 
    [inputActionSheet showInView:[[UIApplication sharedApplication] keyWindow]];
    [inputActionSheet setBounds:CGRectMake(0, 0, 320, 485)]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-09T12:16:04.537

我遇到过同样的问题。当我点击里面的pickerview时，UIPickerView后面的按钮会采取行动，尽管按钮不可见，只有pickerview可见。我使用按钮操作视图的隐藏属性对其进行了管理。像

```
 @IBAction func tapPrivacyPolicy(_ sender: Any) {
    if viewDatePicker.isHidden == false { // means UIPickerView is Visible
          return
    }
   //do other work 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-15T22:45:00.900

要禁用选择器被点击：

`fooPicker.isUserInteractionEnabled = false`

# javascript - 是否可以通过单击来循环 3 个不同的功能？

> ID：13008648
> 
> 赞同：0
> 
> 时间：2012-10-22T09:41:41.903
> 
> 标签：javascript, jquery

我目前正在研究一个小“滑块”。一个侧面有 3 个可点击的块的滑块。当您单击其中一个块时，“幻灯片”必须更改为相应的幻灯片。这对我来说不是什么大问题。

但我想要的第二个选项是幻灯片之间有一个循环动画。但那是我无法完成的事情。现在我的问题是：有没有简单的方法可以做到这一点？

```
$(document).ready(function() {
$("#button_1").css("background-color", "#0F0");

$("a#click_1").click(function() {
    $("#item_1").fadeIn(1000);
    $("#item_2").fadeOut(1000);
    $("#item_3").fadeOut(1000);
    $("#button_1").animate({
        backgroundColor: "#0F0"
    }, 1000);
    $("#button_2").animate({
        backgroundColor: "#000"
    }, 1000);
    $("#button_3").animate({
        backgroundColor: "#000"
    }, 1000);
});

$("a#click_2").click(function() {
    $("#item_1").fadeOut(1000);
    $("#item_2").fadeIn(1000);
    $("#item_3").fadeOut(1000);
    $("#button_1").animate({
        backgroundColor: "#000"
    }, 1000);
    $("#button_2").animate({
        backgroundColor: "#00F"
    }, 1000);
    $("#button_3").animate({
        backgroundColor: "#000"
    }, 1000);
});

$("a#click_3").click(function() {
    $("#item_1").fadeOut(1000);
    $("#item_2").fadeOut(1000);
    $("#item_3").fadeIn(1000);
    $("#button_1").animate({
        backgroundColor: "#000"
    }, 1000);
    $("#button_2").animate({
        backgroundColor: "#000"
    }, 1000);
    $("#button_3").animate({
        backgroundColor: "#FF0"
    }, 1000);
});
}); 
```

我已经有了这个小提琴：http: [//jsfiddle.net/Yauhnhan/VX9Qr/7/](http://jsfiddle.net/Yauhnhan/VX9Qr/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:38:16.363

我想这会对你有所帮助

```
 $(document).ready(function() {
  var delay = 1000;

    $("#button_3").css("background-color", "#FF0"); 

  $('.btn').click(function(){

   var item=$($(this).attr('href'));

    $('.item').each(function(i,v){

            $(v).fadeOut(delay);
            $('#button_'+(i+1)).css("background-color", "#000");

    });   

  item.fadeIn(delay);
             $('#button_'+(item.index()+1)).animate({
        backgroundColor: item.css("background-color")
    }, 1000);
    return false;

   });
});​ 
```

演示：http: [//jsfiddle.net/VX9Qr/14/](http://jsfiddle.net/VX9Qr/14/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:34:55.580

你可以让它更短。为您的按钮、项目和锚点提供通用类名称（例如“click”、“item”、“btn”）：

```
$('a.click').each(function(i){
   $(this).click(function(){
      $('.item').fadeOut(1000).eq(i).stop(true).fadeIn(1000);
      $('.btn').animate({backgroundColor:'#000'},1000)
         .eq(i).stop(true).animate({backgroundColor:'#0F0'},1000);
   }        
}).eq(0).click(); 
```

# java - 验证者最好的方法是什么？

> ID：13008650
> 
> 赞同：0
> 
> 时间：2012-10-22T09:41:42.060
> 
> 标签：java, zk

使用这样的验证器：

```
public class FormFieldValidator {

   [...]

   public Validator getCallsignValidator() {
        return new Validator() {

            [...]

        };
    }

   [...]

} 
```

这是否意味着 ZK 调用验证器总是会创建一个新的验证器实例，例如，当我们测试我们的验证器时，它们会留在内存中，或者更糟的是，它们仍然被 ZK 引用？

所以我的问题是：

有没有更好的办法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:56:38.997

是的，在这个代码片段中，每次都会创建一个新的验证器对象，并且只要对该验证器的引用存在于任何地方，它就会保留在内存中。

# spring - PrimeFaces 日历/休眠 - 仅将日期发送到数据库

> ID：13008652
> 
> 赞同：0
> 
> 时间：2012-10-22T09:41:52.213
> 
> 标签：spring, hibernate, calendar, primefaces, spring-webflow

我有一个将日期插入表格的表格。当使用 primefaces 日历时，日期是正确的，但也会添加时间（在我的情况下：00:00:00.0）

这是我的表格：

```
<h:form>
        <h:messages/>
        <h:inputText value="#{testBean.saveTabletest.first}"/><br/>
        <p:inputMask value="#{testBean.saveTabletest.second}" mask="99999"/><br/>
        <p:calendar id="testcal" value="#{testBean.saveTabletest.dates}" dateOnly="true" showOn="button"/><br/>
        <p:commandButton value="Send" action="save"/>
</h:form> 
```

以下是日期在数据库中的插入方式：2012-10-03 00:00:00.0

我想在没有时间的情况下将日期插入数据库。表中的列是“日期列”

我可以设置一个 primefaces 属性吗？还是我必须更改将数据保存在表中的函数（我使用的是休眠 saveOrupdate）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:03:43.023

设置 p:calendar 的模式属性，并将对应的 testBean 成员声明为 Date。

# javascript - 数字游戏算法

> ID：13008655
> 
> 赞同：4
> 
> 时间：2012-10-22T09:41:57.237
> 
> 标签：javascript, jquery

我目前正在做一些研究，为小学生创建一个新的数学游戏，其中 0-9 的 div 随机出现在容器内。

开头给出了一个问题。类似于 20 的倍数。然后，用户必须点击正确的，然后在最后计算它们并给出分数。

所以目前我有基本的结构，弹出 div 并单击它们，它会添加到正确答案中，这意味着此时没有错误答案。

我想知道确定正确和错误答案的最佳方法是什么。是否有我可以使用的算法来确定答案是对还是错，以及如何将其链接到 div？

```
<div id="container">
    <div id="char1" class="character right1" vaule="1"></div>
    <div id="char2" class="character right2" vaule="2"></div>
    <div id="char3" class="character right3" vaule="3"></div>
    <div id="char4" class="character right4" vaule="4"></div>
    <div id="char5" class="character right5" vaule="5"></div>
    <div id="char6" class="character right6" vaule="6"></div>
    <div id="char7" class="character right7" vaule="7"></div>
    <div id="char8" class="character right8" vaule="8"></div>
    <div id="char9" class="character right9" vaule="9"></div>
    <div id="char9" class="character right0" vaule="0"></div>
</div> 
```

与“.right”相对的错误答案将被赋予“.wrong”类

小提琴：http: [//jsfiddle.net/SKB3Q/10/](http://jsfiddle.net/SKB3Q/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:48:29.007

您需要做的第一件事是提出一个问题，以使任何正确或错误的概念都有意义。

例如：“点击所有大于 20 的数字”

您需要做的第二件事是将这个问题表达为一个布尔表达式，计算结果为真或假。

```
(selection>20) 
```

然后为每个选择评估这个表达式以确定它是对还是错。

[这](http://jsfiddle.net/cFKHq/show/)是我的意思的一个例子。在游戏开始之前，脚本会为每个元素添加适当的类。问题是“选择所有大于 5 的数字”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:08:31.610

其实我做过类似这样的气球游戏......

由于您已经完美地完成了设计和动画工作，70% 的工作已经完成：D，逻辑上的小修改将完成工作......

我的解决方案是：如果容器中的 div 是静态的，并且您已经为它们提供了 ID，那么第 1 步：检查哪个 div 被单击，然后分配给它什么值

Step2：检查布尔表达式（根据您的要求）并根据您的布尔表达式增加全局声明的正确标志或错误标志

可能对您有所帮助的示例代码

```
for(var i=0;i<8;i++)
{
    $("#char"+i).click(function(){
        //boolean expression comes here
        //increase the correct count or the incorrect count you want to do it
    })
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:07:06.297

如果 char1,char2,char3,.... 是随机创建的 div 并且 1,2,3,..... 是与之关联的值，那么我没有看到您的确切代码，然后尝试此代码并让我知道

```
<script type="text/javascript">
    for (var i = 0; i < 8; i++) {
        $("#char" + i).click(function () {
            var val = $("#char" + i).val(); // so by this you will get the which one is clicked
            if (val % 15 == 0)
                hit++;
            else
                miss++;

            $("#hit").html("correct: " + hit);
            $("#miss").html("Incorrect: " + miss);
        })
    }
</script> 
```

因此，当启用 div 并且用户单击它时，将调用此函数并将检查布尔表达式并适当地增加命中或未命中标志。

注意：假设 Char1,char2,... 是随机启用的 div，如果不为适当的随机创建的 div 编写条件，那将正常工作

“您可以通过更改布尔表达式来检查任何倍数，我在上面给出的是 (val%15 == 0)”

# vb.net - 参数匹配参数项无法从 DBNull 转换为 ListViewSubitem

> ID：13008656
> 
> 赞同：0
> 
> 时间：2012-10-22T09:42:00.123
> 
> 标签：vb.net, listview, isnull

```
 Dim dr As SqlDataReader = cmd.ExecuteReader

      Me.ListView1.Items.Clear()
      Do While dr.Read

        With Me.ListView1
            .Items.Add(dr(0))
            With .Items(.Items.Count - 1).SubItems
                .Add(dr.Item(1))
                .Add(dr.Item(2))
                .Add(dr.Item(3))
        End With
             End With
    Loop
    dr.Close()

   Me.Show()

    Me.ListView1.Columns.Add("Account ID", 100)
    Me.ListView1.Columns.Add("Managed by", 100)
    Me.ListView1.Columns.Add("Account Holder", 100)
    Me.ListView1.Columns.Add("Description", 100) 
```

'Public Function Add(text As String)As System.Windows.Forms.Listviewitem.Listview.Subitems)As System.Windows.Forms.Listviewitem.Listview.Subitem'：参数匹配参数项无法从 DBNull 转换为 ListViewSubitems

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:24:24.917

改成这个

```
.Items.Add(dr.Item(0).ToString()) 
```

这将忽略 null 并将空白字符串添加到项目

# php - 删除 表格前多余的标签

> ID：13008660
> 
> 赞同：0
> 
> 时间：2012-10-22T09:42:06.413
> 
> 标签：php, wordpress, plugins

我正在用 WordPress 设计一个页面。当我`<table>`在我的页面中使用它时，会在表格之前创建过多的`<br>`标签。

我确实检查了代码，但它没有任何`<br>`标签。如果我在 Firebug 5 中检查它，`<br>`标签会自动生成。

注意：我在删除它时使用了 izcalender 插件，我的代码可以正常工作。

这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:59:40.383

我提到了一个关于这个问题的链接。我希望这会对你有所帮助。但请确保您阅读了整篇文章。

[过多的中断标签](http://blogs.voxeo.com/behindtheblog/2008/08/13/getting-rid-of-extra-br-lines-in-wordpress-mu/)

我指的是其他一些问题。这将帮助你解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:38:55.227

1）可能有类似 $before_widget 的东西；$after_widget; 这使
izcalender 插件删除或评论那些

如果不

2) 添加您的 CSS，例如 {margin-top:-20px}

我认为这会奏效

# asp.net - 页面不使用 HttpContext.Current.Server.Transfer("transferedPageName.aspx") 重定向

> ID：13008662
> 
> 赞同：1
> 
> 时间：2012-10-22T09:42:10.280
> 
> 标签：asp.net

我正在尝试使用他们的 facebook id 对我的用户进行身份验证。为此，我有他们的 facebook id。注册时保存在我的数据库中。我正在为此使用 facebook 的 javascript API，它工作正常，使用用户基本信息将用户带回我的网站，成功时来自 .aspx 页面的位置我正在使用 jQuery ajax 调用

```
FB.Event.subscribe('auth.statusChange', function (response) {
if (response.authResponse) {                                                                                       FB.api('/me?email?dob', function (me) {                                                   if (me.name) {                                                       
   emid = me.email;
   $.ajax({
           url: 'index.aspx/checkuser',
           type: 'POST',
           contentType: 'application/json',
           data: JSON.stringify({ eid: emid }),
}
})
}); 
```

上面的代码在我的 masterpage.aspx 到我的代码中的一个 webMethod 后面是一个静态方法

```
[WebMethod]
    public static void checkuser(string eid)
    {
        checkFBDB objChk = new checkFBDB();
        objChk.isFBIDExists(eid);

    } 
```

此代码在内容页面 index.aspx 上，在该方法中，我通过创建类对象 public class checkFBDB 来调用类函数：System.Web.UI.Page {

```
 public void isFBIDExists(string fbID)
    {

        string cnString = string.Empty;

        cnString = ConfigurationManager.ConnectionStrings["connectionString"].ToString();

            SqlDataReader dR = SqlHelper.ExecuteReader(cnString,
         CommandType.Text, "SELECT * FROM smsUsers WHERE fbA='" + fbID + "' ");

            if (dR.Read())
            {

                Session["userName"] = dR["userName"].ToString();
                Session["smsCredit"] = int.Parse(dR["SMSCredit"].ToString());
                Session["sender"] = dR["FName"].ToString();
                Session["userMob"] = dR["MobileNo"].ToString();
                HttpContext.Current.Server.Transfer("AuthenticatedForms/sendMessage.aspx");

            }

            else
            {
                HttpContext.Current.Server.Transfer("~/mapFBID.aspx",true);
            }
       }
} 
```

它打开与数据库的连接，并使用提供的 facebook id 验证用户是否存在于我们的数据库中，然后 "HttpContext.Current.Server.Transfer("AuthenticatedForms/sendMessage.aspx");" 我正在使用这个语句，但问题是如果我使用来自正常页面的相同语句，它可以正常传输，但是从这个代码类它传输执行我在调试模式下看到的所有操作，但返回到 web 方法所在的页面调用它正在调用此代码类来转移控制权。我正在使用母版页。Visual Studio 2010，后端是 SQL SERVER 2000。以下是我的代码。提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:57:26.957

您需要考虑的事情很少。

1.  您正在进行 AJAX 调用，并且在成功时您希望将使用重定向到页面。
2.  `Server.Transfer`确实将目标页面的内容写入响应流中，这无助于我们将用户带到不同的页面，尤其是在 AJAX 调用期间。
3.  您可以执行`Response.Redirect`，但即使是这种情况也行不通，因为 AJAX 逻辑完全不知道理解 302 响应。

我建议遵循 SO 问题“[如何在 jQuery Ajax 调用后管理重定向请求](https://stackoverflow.com/questions/199099/how-to-manage-a-redirect-request-after-a-jquery-ajax-call)”

# ruby - 无法解决 gem 依赖

> ID：13008665
> 
> 赞同：2
> 
> 时间：2012-10-22T09:42:23.320
> 
> 标签：ruby, rubygems, sinatra, bundler

我似乎无法解决这种依赖关系。我已经尝试在 Gemfile 中明确设置版本，但似乎没有任何效果。有什么想法吗？

```
Gem::LoadError: Unable to activate activemodel-3.2.8, because builder-3.1.3 conflicts with builder (~> 3.0.0)
~/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:1637:in `raise_if_conflicts'
~/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:746:in `activate'
~/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:51:in `block in require'
~/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:50:in `each'
~/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:50:in `require' 
```

这是我的`Gemfile`：

```
# encoding: UTF-8
source :rubygems
source :gemcutter
source :rubyforge

gem 'sinatra'
gem 'mongoid', '~> 2.4'
gem 'mongo', '1.6.2'
gem 'bson_ext', '~> 1.5'
gem 'builder', '~> 3.0.0'
gem "mongoid-history"
gem "mongoid-rating"
gem "mongoid_vote"
gem "geocoder"
gem "slim"
gem "sidekiq"
gem "sprockets" #required by sidekiq for some reason...
gem "logger"
gem "carrierwave"
gem 'carrierwave-mongoid', :require => 'carrierwave/mongoid'
gem "mongoid-history"
gem "airbrake" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:22:48.617

发生主要是因为`Mongoid`（>3.0 是我遇到此错误的原因）具有 gem 的依赖关系，而`active_model ~> 3.1`gem 又依赖于`builder ~> 3.1`. 删除`builder`Gemfile 中的条目，删除`Gemfile.lock`并运行`bundle`.

# c++ - 使用缓冲区写入文件时c ++内存泄漏

> ID：13008666
> 
> 赞同：0
> 
> 时间：2012-10-22T09:42:30.503
> 
> 标签：c++, memory-leaks

我有一个系统，其中有许多线程正在 Linux 系统上被激活。每个线程分配一个特定大小的缓冲区，当该缓冲区已满时将其写入文件。每个线程都有自己的缓冲区并将缓冲区写入不同的文件。我发现当我将缓冲区大小设置为相对较大（1M 大小或更大）时，我开始遭受内存泄漏的困扰。然而，当缓冲区很小时——大约 1K 或更少——我没有这些内存泄漏。

任何人都知道它的原因是什么？更重要的是我该如何克服这个问题？使用较小的缓冲区会极大地影响我的系统性能。

写入缓冲区 - else if(m_bUseBuffer) { //数据缓冲区现在已满 if (m_nBufferSize+pi_nDataLength >= cMaxSizeQLoaderFileBuffer) { hRes = WriteDataToFile(); }

```
 if (SUCCEEDED(hRes)) 
        {
            if (m_nBufferSize+pi_nDataLength <= cMaxSizeQLoaderFileBuffer) 
            {
                memcpy(m_sBuffer+m_nBufferSize,pi_pData,pi_nDataLength);

                m_nBufferSize += pi_nDataLength;

                m_nBufferLinesCounter++;

                //need to write buffer to file otherwise next time we write the file will be too large.
                if (m_nBufferLinesCounter + m_nQLoaderFileLinesCounter >= m_nQLoaderFileMaxLines) 
                {
                    hRes = WriteDataToFile();
                }
            } 
```

将缓冲区写入文件-

```
 hRes = OpenFile();

    if (SUCCEEDED(hRes))
    {
        m_fQLoaderFile.write(m_sBuffer,m_nBufferSize);
        m_fQLoaderFile.flush();

        m_nBufferSize = 0;
        m_nQLoaderFileLinesCounter += m_nBufferLinesCounter;
        m_nBufferLinesCounter = 0;
    } 
```

何时来自 type-std::ofstream

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:57:41.993

如果没有更多细节，几乎不可能回答这个问题。正如@karoly 建议的那样，如果您的代码正确 - 缓冲区大小无关紧要。

当缓冲区大小很重要时，我能想到的一件事是，当缓冲区大小太大时，某些分配可能会失败。然后，当这种情况发生时，可能您的代码在这种情况下不能很好地清理（您没有捕获异常，或者没有测试错误条件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:46:40.333

因为你的问题太模糊，我只能给你一个笼统的答案：用 来检查你的代码`valgrind`，它会报告所有的内存泄漏。

顺便说一句，如果您的代码正确，则缓冲区大小无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:47:17.037

是否可以将线程（或其缓冲区）包装在[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)包装器中？也就是说，堆栈分配的包装对象具有重载的私有 new 运算符（以防止意外的堆分配），缓冲区的堆分配发生在构造函数中，而取消分配发生在析构函数中？

或者：固定长度（分配堆栈）缓冲区可能适合您的问题吗？

# sql - 在 SQL 中通过日期和时间执行聚合

> ID：13008674
> 
> 赞同：9
> 
> 时间：2012-10-22T09:43:18.047
> 
> 标签：sql, postgresql, timestamp, aggregation

我有一个数据集，其中包含数周的观察结果，频率为 2 分钟。我想将时间间隔从 2 分钟增加到 5 分钟。问题是，观察的频率并不总是相同的。我的意思是，理论上，每 10 分钟应该有 5 次观察，但通常情况并非如此。请让我知道如何根据平均函数以及观察的时间和日期汇总观察结果。换句话说，基于每 5 分钟的聚合，而每 5 分钟时间间隔的观察次数不同。此外，我有时间戳格式的日期和时间。

示例数据：

```
1 2007-09-14 22:56:12 5.39
2 2007-09-14 22:58:12 5.34
3 2007-09-14 23:00:12 5.16
4 2007-09-14 23:02:12 5.54
5 2007-09-14 23:04:12 5.30
6 2007-09-14 23:06:12 5.20 
```

预期成绩：

```
1 2007-09-14 23:00 5.29
2 2007-09-14 23:05 5.34 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T11:16:26.330

[这个问题](https://stackoverflow.com/questions/12921598/efficiently-querying-a-huge-time-series-table-for-one-row-every-15-minutes)的答案可能为您的问题提供了很好的解决方案，展示了有效地将数据聚合到时间窗口中的方法。

本质上，将`avg`聚合用于：

```
GROUP BY floor(extract(epoch from the_timestamp) / 60 / 5) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T20:12:37.987

编辑：我对此做了更多的思考，并意识到你不能只从 2 分钟到 5 分钟。它不加起来。我会跟进，但是一旦你有一些 1 分钟的数据要聚合，下面的代码就可以工作了！

--

如果数据是“开始”格式，您可以使用此函数中的代码，或在数据库中创建该函数以便于访问：

```
CREATE OR REPLACE FUNCTION dev.beginning_datetime_floor(timestamp without time zone,   
integer)  /* switch out 'dev' with your schema name */
RETURNS timestamp without time zone AS
$BODY$ 
SELECT
date_trunc('minute',timestamp with time zone 'epoch' + 
 floor(extract(epoch from $1)/($2*60))*$2*60
 * interval '1 second') at time zone 'CST6CDT' /* change this to your time zone */
$BODY$
LANGUAGE sql VOLATILE; 
```

你只需输入你想要聚合的整数分钟数（使用 1、2、3、4、5、6、10、12、15、20 或 30），这里有几个结果：

```
select dev.beginning_datetime_floor('2012-01-01 02:02:21',2) 
```

= '2012-01-01 02:02:00'

```
select dev.beginning_datetime_floor('2012-01-01 02:02:21',5) 
```

= '2012-01-01 02:00:00'

[只需对其进行测试并使用内置时间戳功能](http://www.postgresql.org/docs/9.2/static/functions-datetime.html)添加或减少处理开始和结束时间戳的时间。

当你得到你想要的时间戳时，按照克雷格所说的去做，然后对那个时间戳进行 GROUP BY，并结合你想要的[聚合函数](http://www.postgresql.org/docs/9.1/static/functions-aggregate.html)（可能是平均值）。

您可以使用以下方法对其进行测试/调整：

```
date_trunc('minute',timestamp with time zone 'epoch' + 
 floor(extract(epoch from your_datetime)/(interval_minutes*60))*interval_minutes*60
 * interval '1 second') at time zone 'CST6CDT' /* change this to your time zone */ 
```

结果可能是您想要平均时间戳 - 例如，如果您的间隔持续时间是不稳定的。为此，您可以创建一个类似的函数来舍入时间戳而不是占用地板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:51:22.513

到目前为止，最简单的选择是创建一个参考表。在该表中，您存储您感兴趣的时间间隔：

*（将此适应您自己的 RDBMS 的日期表示法。）*

```
CREATE TABLE interval (
  start_time    DATETIME,
  cease_time    DATETIME
);
INSERT INTO interval SELECT '2012-10-22 12:00', '2012-10-22 12:05';
INSERT INTO interval SELECT '2012-10-22 12:05', '2012-10-22 12:10';
INSERT INTO interval SELECT '2012-10-22 12:10', '2012-10-22 12:15';
INSERT INTO interval SELECT '2012-10-22 12:15', '2012-10-22 12:20';
INSERT INTO interval SELECT '2012-10-22 12:20', '2012-10-22 12:25';
INSERT INTO interval SELECT '2012-10-22 12:25', '2012-10-22 12:30';
INSERT INTO interval SELECT '2012-10-22 12:30', '2012-10-22 12:35';
INSERT INTO interval SELECT '2012-10-22 12:35', '2012-10-22 12:40'; 
```

然后你只需加入并聚合......

```
SELECT
  interval.start_time,
  AVG(observation.value)
FROM
  interval
LEFT JOIN
  observation
    ON  observation.timestamp >= interval.start_time
    AND observation.timestamp <  interval.cease_time
GROUP BY
  interval.start_time 
```

**注意：**您只需要创建和填充间隔表一次，然后您可以多次重复使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T21:27:46.937

好的，所以这只是处理此问题的一种方法。我希望这能让您思考如何转换数据以满足您的分析需求。

测试此代码有一个先决条件。您需要有一个包含所有可能的 1 分钟时间戳的表。有很多方法可以解决这个问题，我只使用我可用的，这是一张桌子：dim_time，每分钟 (00:01:00) 到 (23:59:00) 和另一张桌子都有可能日期（dim_date）。当您加入这些 (1=1) 时，您将获得所有可能日期的所有可能分钟数。

```
--first you need to create some functions I'll use later
--credit to this first function goes to David Walling
CREATE OR REPLACE FUNCTION dev.beginning_datetime_floor(timestamp without time zone, integer)
  RETURNS timestamp without time zone AS
$BODY$ 
SELECT
date_trunc('minute',timestamp with time zone 'epoch' + 
    floor(extract(epoch from $1)/($2*60))*$2*60
* interval '1 second') at time zone 'CST6CDT'
$BODY$
  LANGUAGE sql VOLATILE;

--the following function is what I described on my previous post  
CREATE OR REPLACE FUNCTION dev.round_minutes(timestamp without time zone, integer)
  RETURNS timestamp without time zone AS
$BODY$ 
  SELECT date_trunc('hour', $1) + cast(($2::varchar||' min') as interval) * round(date_part('minute',$1)::float / cast($2 as float)) 
$BODY$
  LANGUAGE sql VOLATILE;

--let's load the data into a temp table, I added some data points. note: i got rid of the partial seconds
SELECT cast(timestamp_original as timestamp) as timestamp_original, datapoint INTO TEMPORARY TABLE timestamps_second2
FROM
(
SELECT '2007-09-14 22:56:12' as timestamp_original, 0 as datapoint
UNION
SELECT '2007-09-14 22:58:12' as timestamp_original, 1 as datapoint
UNION
SELECT '2007-09-14 23:00:12' as timestamp_original, 10 as datapoint 
UNION
SELECT '2007-09-14 23:02:12' as timestamp_original, 100 as datapoint
UNION
SELECT '2007-09-14 23:04:12' as timestamp_original, 1000 as datapoint
UNION
SELECT '2007-09-14 23:06:12' as timestamp_original, 10000 as datapoint
) as data

--this is the bit of code you'll have to replace with your implementation of getting all possible minutes
--you could make some sequence of timestamps in R, or simply make the timestamps in Excel to test out the rest of the code
--the result of the query is simply '2007-09-14 00:00:00' through '2007-09-14 23:59:00'
SELECT * INTO TEMPORARY TABLE possible_timestamps
FROM
(
select the_date + beginning_minute as minute_timestamp
FROM datawarehouse.dim_date as dim_date
JOIN datawarehouse.dim_time as dim_time
ON 1=1
where dim_date.the_date = '2007-09-14'
group by the_date, beginning_minute
order by the_date, beginning_minute
) as data

--round to nearest minute (be sure to think about how this might change your results
SELECT * INTO TEMPORARY TABLE rounded_timestamps2
FROM
(
SELECT dev.round_minutes(timestamp_original,1) as minute_timestamp_rounded, datapoint
from timestamps_second2
) as data

--let's join what minutes we have data for versus the possible minutes
--I used some subqueries so when you select all from the table you'll see the important part (not needed)
SELECT * INTO TEMPORARY TABLE joined_with_possibles
FROM
(
SELECT *
FROM
(
SELECT *, (MIN(minute_timestamp_rounded) OVER ()) as min_time, (MAX(minute_timestamp_rounded) OVER ()) as max_time
FROM possible_timestamps as t1
LEFT JOIN rounded_timestamps2 as t2
ON t1.minute_timestamp = t2.minute_timestamp_rounded
ORDER BY t1.minute_timestamp asc
) as inner_query
WHERE minute_timestamp >= min_time
AND minute_timestamp <= max_time
) as data

--here's the tricky part that might not suit your needs, but it's one method
--if it's missing a value it grabs the previous value
--if it's missing the prior value it grabs the one before that, otherwise it's null
--best practice would be run another case statement with 0,1,2 specifying which point was pulled, then you can count those when you aggregate
SELECT * INTO TEMPORARY TABLE shifted_values
FROM
(
SELECT 
*,
case 
when datapoint is not null then datapoint
when datapoint is null and (lag(datapoint,1) over (order by minute_timestamp asc)) is not null
  then lag(datapoint,1) over (order by minute_timestamp asc)
when datapoint is null and (lag(datapoint,1) over (order by minute_timestamp asc)) is null and (lag(datapoint,2) over (order by minute_timestamp asc)) is not null
  then lag(datapoint,2) over (order by minute_timestamp asc)
else null end as last_good_value
from joined_with_possibles
ORDER BY minute_timestamp asc
) as data

--now we use the function from my previous post to make the timestamps to aggregate on
SELECT * INTO TEMPORARY TABLE shifted_values_with_five_minute
FROM
(
SELECT *, dev.beginning_datetime_floor(minute_timestamp,5) as five_minute_timestamp
FROM shifted_values
) as data

--finally we aggregate
SELECT
AVG(datapoint) as avg_datapoint, five_minute_timestamp
FROM shifted_values_with_five_minute
GROUP BY five_minute_timestamp 
```

# ipad - Spit 视图中的两个主视图（一个从左到一个从右）

> ID：13008682
> 
> 赞同：2
> 
> 时间：2012-10-22T09:43:58.803
> 
> 标签：ipad, uisplitviewcontroller

我想在我的应用程序中使用`Split View Controller`. 我不想弄乱拆分视图控制器的“哲学”——左边是一个薄的主视图，右边是一个厚的细节视图。但是，我想完成，当我单击详细视图中的按钮时，主视图将向左滑动并隐藏，而新的薄视图（类似于主视图，但带有一些次要数据）将从右侧滑动。我在 iPad 版 Google Drive App 中看到了它。

我的问题：

**1）** Apple可以做这样的事情吗？（Xcode有时会警告我，Split View需要是root VC等......）

**2）**实施起来很痛苦吗？

**3）**实施时是否有任何提示或解决方法？

# soa - 什么是 Tibco 堆栈

> ID：13008685
> 
> 赞同：1
> 
> 时间：2012-10-22T09:44:02.323
> 
> 标签：soa, business-process-management, tibco, complex-event-processing

我将使用 tibco，我对它的技术堆栈感到困惑。

BPM 引擎 - TIBCO iProcess | CEP 引擎 - TIBCO 商务活动 | TIBCO ActiveSpaces

这个对吗？BusinessWorks 将在哪里出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T21:45:02.097

要回答您关于 ActiveMatrix BusinessWorks (BW) 的具体问题：

BusinessWorks 包含一系列技术，这些技术共同提供了一个全面的企业服务总线 (ESB) 平台。

BusinessWorks Designer 提供了一个 5GL 开发 GUI，允许集成开发人员和架构师对端到端集成进行建模、设计、实施和测试。该工具集提供了一套极其全面的功能，可通过适配器或 JDBC、Web 服务、Java 消息传递服务 (JMS) 等与主要数据库平台集成。转换和逻辑主要通过使用 XSLT 和/或 XPATH 实现的“映射器”实现。

BusinessWorks (BW) 定义了随后作为作业运行的流程。它们在 BWEngine 运行时的 Java VM 上下文中运行，类似于 ASP.NET 工作进程。

管理和编组 BW 消息的中央服务器是 Enterprise Message Service（EMS，基于 JMS 的消息传递服务器）或 Rendezvous（早于 JMS 的 TIBCO 专有的对等消息传递平台）。此外，单独的 BW 服务器（可能会或可能不会利用 Hawk 监控）调度和控制各种 BW 进程/程序（可以跨分布式硬件运行）。

所有这些都在 TIBCO 域的上下文中运行，该域通常由 EMS 服务器控制。

TIBCO 系列产品具有不同程度的互操作性。将 ActiveMatrix BW 视为许多其他产品所依赖的支柱是一个公平的评估。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T06:26:12.413

获得 TIBCO 堆栈描述的最佳位置是[TIBCO 产品索引](https://www.tibco.com/products)

单击每个并浏览他们的两分钟视频（右侧的链接）以获得基本概述。

为了回答您的问题，

是的，他们有
BPM - 在 iProcess 中，Business Studio
CEP - 使用 TIBCO Business Events
EAI - 应用程序集成 - 使用 ActiveMatrix (AMX) 产品，其中包括 Business Works ESB - EMS、RV 等消息总线

# javascript - JQM 标题按钮难以点击

> ID：13008688
> 
> 赞同：1
> 
> 时间：2012-10-22T09:44:20.080
> 
> 标签：javascript, android, cordova, jquery-mobile

我的 JQM 标题上有多个小的无文本按钮，请参见下图，在我的 android phonegap 应用程序上。这些按钮很难在触摸屏设备上单击（它们在桌面浏览器上很好）。似乎要触发单击事件，我必须单击按钮的顶部 10-20%，单击按钮的中间或底部什么也不做。

![JQM 标题按钮](../Images/00427e21dbd0208aa20a9bdb303fc98d.png)

这是 HTML 中的代码：

```
<div data-role="header" data-position="fixed">
  <h1>Field Trip GB</h1>
  <div class="ui-header-buttons ui-btn-right" data-type="horizontal" >
    <a class="gpstrack-running"
       data-role="button"
       data-inline="true"
       data-transition="none"
       data-iconpos="notext"
       data-shadow="false"
       data-iconshadow="false"
       style="display: none;">
    </a>
    <a class="user-locate"
       data-role="button"
       data-inline="true"
       data-transition="none"
       data-iconpos="notext">
    </a>
    <a class="map-search"
       data-role="button"
       data-inline="true"
       data-transition="none"
       data-iconpos="notext">
    </a>
  </div>
</div> 
```

我正在用javascript听，比如：

```
$('.map-search').live('click', function(){
    console.log('map search');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:18:56.537

使用`tap`或`vclick`为您的绑定。即`.on('tap',function(){...})`。

`.live()`自 jquery 1.7 起已弃用。

来源：[jQM 事件文档](http://jquerymobile.com/test/docs/api/events.html)

# javascript - 将返回 false 附加到 jquery 绑定

> ID：13008689
> 
> 赞同：0
> 
> 时间：2012-10-22T09:44:21.563
> 
> 标签：javascript, jquery

我得到了这个代码：

```
$('#la_freccia_dx').bind('click', function(){
 boutique_next();   
}); 
```

在我的 html 标记中，我使用以下代码阻止页面向上滚动：

```
<a id="la_freccia_dx" href="#" onclick="boutique_next(); return false;"> 
```

但现在它只适用于我第一次点击链接。我需要将 return false 附加到上面的 jquery 函数中，并防止链接的默认操作。任何的想法？谢谢！

**已解决：我的错！我在标记中留下了一个 href="#"。谢谢大家！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:49:49.780

使用 jQuerys “event.preventDefault()”：

```
$('#la_freccia_dx').bind('click', function(event){
 event.preventDefault();
 boutique_next();
}); 
```

我会这样做：

```
$('#la_freccia_dx').click(function(event){
 event.preventDefault();
 boutique_next();
}); 
```

我的 HTML 为：

```
<a id="la_freccia_dx"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:46:53.063

试试这个代码：

```
$('#la_freccia_dx').on('click', function(){
 boutique_next(); 
 return false;  
}); 
```

# c# - 是否可以在 HTML 中的 C# 代码中使用 Javascript 变量？

> ID：13008695
> 
> 赞同：0
> 
> 时间：2012-10-22T09:44:41.670
> 
> 标签：c#, javascript, arrays

我有一个要迭代的集合，它保存在 C# 变量中。

我想使用 Javascript 中的 for 循环对其进行迭代；这可能吗？

例如：

```
@{ int questionCount = 0;
foreach(var q in Model.Questions){ 
questionCount++;
} 
```

...做一些 HTML ...

```
<script type="text/javascript">
jQuery(function () {

for (var i=1;i<=@questionCount;i++)
{        

    var d1 = @Model.Questions[i].Answers.Where(m => m.Answer == 1).Count(); 
    <-- this is where it breaks -->
}

}); 
```

我得到的错误说索引超出范围。我想这意味着一旦我将@符号放入该行，它就无法理解“i”。如何正确分隔字符串以使用变量 i（来自 Javascript）来迭代我的 C# 集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:47:32.667

这不起作用。您不能在服务器端代码块中访问客户端变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:47:44.803

您不能在您的服务器端模型中使用`javascript`这些模型，这些模型仅在服务器端用于生成`HTML`。

如果您确实需要`javascript`代码中的值，那么您可以将模型的值放在某个隐藏`html`元素中。

# ruby - 在 JRuby 中生成模型时出错

> ID：13008699
> 
> 赞同：0
> 
> 时间：2012-10-22T09:44:52.357
> 
> 标签：ruby, ruby-on-rails-3, jruby, jrubyonrails

嗨，我在生成模型时遇到错误。在我面临的错误堆栈之后。

```
 rails generate model id:string name:string userid:string groupid:string bookmarktype:string typeid:string additionaldata:string
    include_class is deprecated. Use java_import.
    include_class is deprecated. Use java_import.
    Resolved collector.newrelic.com to 204.93.223.153
          invoke  active_record
    NameError: wrong constant name Id:string
                const_defined? at org/jruby/RubyModule.java:2608
              class_collisions at /home/anand/.rvm/gems/jruby-1.7.0.preview2/gems/railties-3.2.3/lib/rails/generators/base.rb:267
                          each at org/jruby/RubyArray.java:1612
              class_collisions at /home/anand/.rvm/gems/jruby-1.7.0.preview2/gems/railties-3.2.3/lib/rails/generators/base.rb:249
         check_class_collision at /home/anand/.rvm/gems/jruby-1.7.0.preview2/gems/railties-3.2.3/lib/rails/generators/named_base.rb:183
                      __send__ at org/jruby/RubyBasicObject.java:1667
                          send at org/jruby/RubyKernel.java:2060
                           run at /home/anand/.rvm/gems/jruby-1.7.0.preview2/gems/thor-0.14.6/lib/thor/task.rb:21
                   invoke_task at /home/anand/.rvm/gems/jruby-1.7.0.preview2/gems/thor-0.14.6/lib/thor/invocation.rb:118
                    invoke_all at /home/anand/.rvm/gems/jruby-1.7.0.preview2/gems/thor-0.14.6/lib/thor/invocation.rb:124
                          each at org/jruby/RubyHash.java:1192
                           map at org/jruby/RubyEnumerable.java:715
                    invoke_all at /home/anand/.rvm/gems/jruby-1.7.0.preview2/gems/thor-0.14.6/lib/thor/invocation.rb:124
                      dispatch at /home/anand/.rvm/gems/jruby-1.7.0.preview2/gems/thor-0.14.6/lib/thor/group.rb:226
                      __send__ at org/jruby/RubyBasicObject.java:1694
                          send at org/jruby/RubyKernel.java:2072
                        invoke at /home/anand/.rvm/gems/jruby-1.7.0.preview2/gems/thor-0.14.6/lib/thor/invocation.rb:109
      _invoke_for_class_method at /home/anand/.rvm/gems/jruby-1.7.0.preview2/gems/thor-0.14.6/lib/thor/group.rb:269
                  with_padding at /home/anand/.rvm/gems/jruby-1.7.0.preview2/gems/thor-0.14.6/lib/thor/shell.rb:74 
```

以下是 rvm list 的输出

```
rvm list

rvm rubies

=* jruby-1.7.0.preview2 [ i386 ]
   ruby-1.9.3-p194 [ i686 ]

# => - current
# =* - current && default
#  * - default 
```

我正在使用 Ubuntu 12.04。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:34:48.887

您需要在使用字段生成时提供模型名称。例如，

```
rails generate model UserDetails id:string name:string userid:string groupid:string bookmarktype:string typeid:string additionaldata:string 
```

'UserDetails' 是模型名称。

这可能是问题所在。不知道你在问什么清楚。干杯!

# web-services - 如何将 R 集成到 Web 应用程序中

> ID：13008711
> 
> 赞同：13
> 
> 时间：2012-10-22T09:45:27.020
> 
> 标签：web-services, r, analytics

我正在开发一个 Web 应用程序，我想执行两种统计/建模操作。

(1) 对存储在我的应用程序后端（HBase 集群）中的数据进行批量分析。通常，此操作需要定期执行，例如每晚。数据的大小可能会超过本地内存可以存储的大小，因此这可能需要调用一些支持并行计算的包。(2) 在前端由用户请求触发的动态 R 执行。典型用例包括小时间序列的预测。用户可能会同时发出请求，因此应该有一些对并发的支持。性能至关重要，因为用户不能无限期地等待响应的到来。

我的问题是：解决这两个问题的技术/CRAN 包的最佳组合是什么？我目前的想法是：

*   将 Rserver 与 Ruby 客户端结合使用。或者，我正在考虑用 Java 编写自己的服务器并使用现有的 R/Java 绑定。
*   使用 RHadoop 处理大型数据集上的作业。

我看到 RevoDeployR 是一个很棒的工具，但不是开源的，不是吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T10:05:58.150

我建议将 RApache ( [http://rapache.net](http://rapache.net) /) 与 R 包 RJSONIO 或 rjson 一起使用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T10:10:39.850

看看[Rook 包](http://cran.r-project.org/web/packages/Rook/index.html)。它可以将任何 R 会话转换为 Web 服务器。它[非常简单](http://jeffreybreen.wordpress.com/2011/04/25/4-lines-of-r-to-get-you-started-using-the-rook-web-server-interface/)，事实上，在 Rapache 中使用。

*编辑*

自从我第一次回答以来，我已经开始使用[shiny](http://www.rstudio.com/shiny/)。它是一个很棒的包，用于创建具有高级 R 界面的动态、复杂、AJAX 驱动的网页，完全不需要或几乎不需要进入 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T08:22:28.303

我尝试过 RStudio 的闪亮，它就像一个魅力

# excel - 更改整个工作表的背景颜色

> ID：13008714
> 
> 赞同：5
> 
> 时间：2012-10-22T09:45:31.763
> 
> 标签：excel, vba, background-color

有没有办法将背景颜色更改为`xlNone`，例如整个工作表。我看到您可以放置​​背景图像...但是如何更改工作表中所有单元格的颜色？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T10:03:48.947

您可以使用以下代码轻松完成此操作：

```
Public Sub Demo()
  'set color
  WorksheetName.Cells.Interior.ColorIndex = 1 'black
  'clear color
  WorksheetName.Cells.Interior.ColorIndex = xlColorIndexNone
end sub 
```

或者，如果您不需要 VBA，只需单击角落里的这个小图标：

![在此处输入图像描述](../Images/0d805186b8a7578ef0c7c75e5b81f544.png)

并选择一种颜色，或者不使用颜色 - 使用右键菜单或功能区菜单。

只是因为其他答案，我想提醒一下 - 没有必要使用选择！这是糟糕的宏记录器风格。只有少数情况下，使用选择是必要的或一个好主意。你总是可以只使用一个特定的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:50:55.380

试试这个

```
Sheets("Sheet1").Select    
Cells.Select
With Selection.Interior
    .Pattern = xlNone
    .TintAndShade = 0
    .PatternTintAndShade = 0
End With 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T10:06:04.373

以下是如何更改当前工作表中所有单元格的背景颜色

```
 Cells.Select
    With Selection.Interior
        .Pattern = xlSolid
        .PatternColorIndex = xlAutomatic
        .ThemeColor = xlThemeColorDark1
        .TintAndShade = -0.14996795556505   'grey color
        .PatternTintAndShade = 0
    End With 
```

# jsf - Client-id : j_id10 在面孔树中重复。零件

> ID：13008715
> 
> 赞同：3
> 
> 时间：2012-10-22T09:45:33.730
> 
> 标签：jsf, runtime-error

对于我的 JSF1.2 应用程序的一部分，我正面临这个问题。我有上传功能和页面后面的文件列表。登录后，如果我做的第一个功能是上传文件，它会返回错误 - java.lang.IllegalStateException: Client-id : j_id10在面树中重复。零件。但是如果我浏览应用程序，先执行一些其他功能，然后尝试上传，它工作正常。上传功能也是使用 servlet 完成的，因为 JSF1.2 没有为文件/分段上传提供任何标签。

UI 有使用数据表的上传和文件列表。

剥离代码——

rowClasses="alt-color,alt-text1" styleClass="table-boder1" columnClasses="=alt-text1" >

```
<h:column  id="fileName" headerClass="head-1">
    <f:facet name="header">

        <h:outputText value="#{msg.filename}"/>
    </f:facet>
    <h:outputText value="#{filedata.fileName}"/>

</h:column>

<h:column id="controlTotal" headerClass="head-2" rendered="#{fileManager.selectedLobUser}">
    <f:facet name="header">
        <h:outputText value="#{msg.controltotal}"/>
    </f:facet>
........ 
```

,........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-04T05:24:19.563

您得到这个的原因可能是：-如果您使用多个表单元素，您需要为“cId”分配不同的值-请检查整个页面是否有重复的 ID（包括组成）

# c++ - 删除临时文件夹的内容

> ID：13008716
> 
> 赞同：0
> 
> 时间：2012-10-22T09:45:38.943
> 
> 标签：c++, visual-studio-2008, delete-file, directory

我的程序使用此代码删除其临时文件夹：

```
 // ...
    if (!RemoveDirectory(L"C:\\MyTemp"))
        return false;

    if (!CreateDirectory(L"C:\\MyTemp", NULL))
        return false;
    else
        return true;
    // ... 
```

但是，实际上我必须删除 temp 的内容（其中的子文件夹和文件），并且在删除某些文件时可能正在被程序使用。如何以更好的形式编写此代码？我很感激你的小代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:58:40.750

非便携式解决方案`SHFileOperation()`来自`<Shellapi.h>`. 使用的结构包含一个`fAnyOperationsAborted`成员，它将告诉您是否无法删除任何文件。

# php - 使用 php 读取 cookie 时遇到问题

> ID：13008718
> 
> 赞同：0
> 
> 时间：2012-10-22T09:45:46.203
> 
> 标签：php, cookies

我创建了一个 php 文件**order.php**，如下所示

```
<?php
$plan=$_POST['plan'];
$expire= time()+60*60;
if (empty($plan))
{

echo '<p align="center">You did not select any plan.</p>';
}
else
{
$str1= "http://techbr.duoservers.com/hosting-order/?plan=";
$ur=$str1.$plan;
usleep(1500);
setcookie("ur", $ur, $expire);
header( 'Location: http://cheap-webhosting.co.in/signup.php') ;

}
?> 
```

如您所见，脚本获取“计划”的值，使用该数据创建一个 cookie **ur**，其值为**http://techbr.duoservers.com/hosting-order/?plan=44**其中 44 是计划value 然后重定向到页面**signup.php signup.php**的代码如下

```
<?php
$ur = $_COOKIE['ur']; 
echo "<iframe frameborder='0'";
echo 'src="';
echo $ur;
echo '" width="100%" height="1100px"></iframe>';
?> 
```

出于某种原因，当我传递 order.php 文件时，会创建一个计划值，但是由于 order.php 中的重定向命令而自动加载的 signup.php 无法读取 cookie。但是，当我运行一个简单`<?php print_r($_COOKIE); ?>`的 cookie 时，会显示 ur 的正确值。最重要的是，如果我手动加载 signup.php 页面加载就好了。但是当它使用重定向命令自动加载时，它无法读取 cookie。知道有什么问题吗？我可能会补充说，大约 1 个月前它曾经可以正常工作的代码突然停止工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:59:47.353

您无法读取为其他 url/path 创建的 cookie：

您仅为目录创建了 cookie `http://techbr.duoservers.com/hosting-order/`（因为您省略了函数的第 4 个参数`path`，`set_cookie`php 选择当前目录，请参见下面的引用）

并尝试在另一个中访问它：`http://cheap-webhosting.co.in/`

你不能那样做。例如，你必须将 cookie 路径参数强制为“/”。

请参阅 php 文档：

> 小路：
> 
> cookie 可用的服务器上的路径。如果设置为“/”，cookie 将在整个域中可用。如果设置为 '/foo/'，则 cookie 将仅在 /foo/ 目录和域的 /foo/bar/ 等所有子目录中可用。**默认值是设置 cookie 的当前目录。**

来源： http: [//php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

# php - 根据两个下拉选择值在索引页面中获取图像和其他详细信息？

> ID：13008719
> 
> 赞同：2
> 
> 时间：2012-10-22T09:45:47.190
> 
> 标签：php, javascript, ajax

我是 php 新手。下拉列表有问题。让我稍微详细解释一下。我有一个包含两个表的数据库：firstCata 和 subCata。表 subCata 引用 firstCata ID。现在在我的 index.php 页面中，我有一个带有 2 个下拉菜单的表单。第一个用于 firstCata，第二个显示基于我数据库中第一个的值。我使用 Ajax 完成的所有这些工作。代码如下。问题是使用 ajax 我在 index.php 中的标签上显示了第二个下拉菜单。如何在 index.php 页面中显示 subCata 的其他详细信息？

```
<head>
<script type="text/javascript">
function getSubCata(str)
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("result").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getSunCata.php?q="+str.value,true);
xmlhttp.send();
}
</script>
</head>
<select onchange='getSubCata(this)'>
<?php 
$query=mysql_query("SELECT * FROM firstCata") or die(mysql_error());
while($rec=mysql_fetch_array($query))
{
?>
<option value="<?php echo $rec['firstCata_id'];?>"><?php echo $rec['firstCata_name'];?></option>
<?php } ?>
</select> 
```

我的 getSunCata.php 代码就像

```
<?php
mysql_connect('localhost','root','');
mysql_select_db('mainCata') or die(mysql_error());

?>
<select>
<?php
$id=$_GET['q'];
echo $id;
$query=mysql_query("SELECT * FROM subcata where firstCata_id=$id") or die(mysql_error());
while($rec=mysql_fetch_array($query))
{
echo $rec['subCata_name'];
?>
 <option id="a"value="echo $rec['subCata_id'];">
    <?php echo $rec['subCata_name']; ?>
</option>
    <?php
}
?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:53:32.290

如果我理解正确，您需要在 2-nd select 中打印所有 subCata 数据。那么，如果您还希望显示所有 subCata 值，为什么还需要 ajax 呢？这是我的解决方案：

```
// MySQL query
$sql = '
    SELECT
        *
    FROM
        firstCata
    JOIN
        subCata
    ON
        firstCata_id = subCata_id'; 
```

使用 jQuery 的模板 html 脚本

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
$(function(){
    var selects_pair = $('select[name="firstCata"], select[name="subCata"]')
    selects_pair.change(function(){
        // get selected id
        var selected_id = $(':selected', this).val();
        // set another selectd corresponding value
        $('[value="' + selected_id + '"]', selects_pair.not(this)).attr("selected", "selected");
    });
});
</script> 
```

模板 html 标记

```
// looping through the data like this, add foreach cycle as you want

<select name="firstCata">
    <option value="<?php echo $rec['firstCata_id'];?>"><?php echo $rec['firstCata_name'];?></option>
</select>

<select name="subCata">
    <option value="<?php echo $rec['subCata_id'];?>"><?php echo $rec['subCata_name'];?></option>
</select> 
```

# android - 安卓注解

> ID：13008723
> 
> 赞同：4
> 
> 时间：2012-10-22T09:46:01.920
> 
> 标签：android, android-annotations

自从我在 android 上工作以来，现在已经有 5-6 个月了。经历了几个点，仍在学习过程中。几天前我开始了解**android annotations**。减少代码并严格专注于 BL 的好方法。但是为了继续学习注释，我需要一些我没有详细介绍的东西。我发现很少有好东西，**比如[简单的注释示例](http://androidannotations.org/)**，而且**github**还为我提供了更多**示例，如[here](https://github.com/excilys/androidannotations/wiki/Cookbook)**。但就注释而言，我仍然真的想更深入地挖掘。 *我在哪里可以找到更多与注释相关的东西？*任何人都可以在这方面帮助我。我知道这与编程没有直接关系，但是你*仍然只需要程序员的帮助*。

***更新***：我刚刚获得了一个注释链接，粘贴以更新用户。[这里是链接。](https://stackoverflow.com/questions/7820463/is-androidannotaions-reliable)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T10:05:30.210

我不太确定你到底在问什么。AndroidAnnotation 会生成一个类 A_ 和一个带注释的类 A。你可以打开 A_ 看看生成了什么。

如果您不想更多地了解注释本身，可以查看这篇文章[http://today.java.net/pub/a/today/2008/04/10/source-code-analysis-using- java-6-compiler-apis.html](http://today.java.net/pub/a/today/2008/04/10/source-code-analysis-using-java-6-compiler-apis.html) 很快，注解处理就是这样工作的：

*   分析一个类以提取方法和属性列表
*   对于每个方法和属性，如果它们上有注释，请做一些东西（生成代码，...）

我希望我给了你一些答案。

编辑：如果你不想要一些反馈，我和我的同事现在正在为一家大公司使用 AndroidAnnotations 一年，它运行良好。我们可以真正专注于功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-01T06:07:40.157

[LightAndroidAnnotation](https://github.com/kim-wang-bj/LightAndroidAnnotation)是一个非常小的 Android 注释库。所有的注解实现代码都在一个类中：[Injector.java](https://github.com/kim-wang-bj/LightAndroidAnnotation/blob/93f9265d98552dc68b17526c53e8c1e01ba9b400/light-android-annotation/src/main/java/com/wq/android/lightannotation/Injector.java)

这只是Java反射和注解的一些基本用法。可以帮助你。

# java - 拖放同一网格中的行

> ID：13008728
> 
> 赞同：0
> 
> 时间：2012-10-22T09:46:13.210
> 
> 标签：java, jquery, struts2

我在同一个表中查看拖放行。目前我将 struts2 与 jqGrid 一起使用。这里一个表到另一个表正在工作。但在同一个网格中本身是不可能的。请给出建议最好使用拖放行明智在我的应用程序的同一个网格中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:03:41.697

我们可以选择 sortableRows="true" 然后我们可以使用 struts2-jquery-grid 插件上下移动。

# twitter-bootstrap - bootstrap 手风琴就像两个分开的 collaspe

> ID：13008729
> 
> 赞同：1
> 
> 时间：2012-10-22T09:46:13.930
> 
> 标签：twitter-bootstrap, accordion

我做了一个手风琴，但两个折叠分开工作。我希望有：当我点击一个标题时，打开的标题是关闭的，但是这里打开的没有关闭..我的错在哪里？

```
<div class="accordions_container">
<div class="accordion" id="accordions_491">
    <div class="accordion-group">
        <div class="accordion-heading"><a class="accordion-toggle" data-toggle="collapse" data-parent="#accordions_491"
            href="#accordion_title_toto491">accordion title toto</a>
        </div>
        <!-- .accordion-heading -->
        <div id="accordion_title_toto491" class="accordion-body collapse in">
            <div class="accordion-inner">Content of the accordion here</div>
            <!-- .accordion-inner -->
        </div>
        <!-- .accordion-body -->
    </div>
    <!-- .accordion-group -->
    <div class="accordion-group">
        <div class="accordion-heading"><a class="accordion-toggle" data-toggle="collapse" data-parent="#accordions_491"
            href="#accordion_titi491">accordion titi</a>
        </div>
        <!-- .accordion-heading -->
        <div id="accordion_titi491" class="accordion-body collapse ">
            <div class="accordion-inner">Content of the accordion here</div>
            <!-- .accordion-inner -->
        </div>
        <!-- .accordion-body -->
    </div>
    <!-- .accordion-group -->
</div>
<!-- .accordion --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:21:34.470

The provided markup works as intended on jQuery 1.8.2, BS 2.1.1.

Maybe other scripts are interfering.

# matlab - 在matlab中连接单元格数组的向量

> ID：13008730
> 
> 赞同：7
> 
> 时间：2012-10-22T09:46:18.237
> 
> 标签：matlab, matrix, concatenation, cell-array

在 matlab 中，我有一个 4x5 单元格数组，其中每个单元格由一个 121x1 向量组成。

什么是创建 3-dim 4x5x121 矩阵避免 2 倍循环的最简单方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T09:49:37.843

一种方式（不一定是最快的）

```
%# convert all arrays in the cell array inCell to 1x1x121
permCell = cellfun(@(x)permute(x,[3,2,1]),inCell,'uniformOutput',false);

%# catenate
array = cell2mat(permCell); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T09:54:15.847

Suppose

```
A = cellfun(@(~)rand(121,1), cell(4,5), 'uniformoutput', false) 
```

then normally I would say

```
cat(3, A{:}) 
```

but that would give a 121-by-1-by-20 array. For your case, an extra step is needed:

```
A = cellfun(@(x)permute(x,3,2,1), A, 'uniformoutput', false)
A = reshape([A{:}], size(A,1), size(A,2), size(A{1},3)) 
```

or, alternatively,

```
A = cellfun(@(x)permute(x,3,2,1), A, 'uniformoutput', false)
A = cell2mat(A); 
```

although

```
>> start = tic;
>> for ii = 1:1e3
>>     B1 = reshape([A{:}], size(A,1), size(A,2), size(A{1},3)); end
>> time1 = toc(start);
>> 
>> start = tic;
>> for ii = 1:1e3
>>     B2 = cell2mat(A); end
>> time2 = toc(start);
>> 
>> time2/time1
ans = 
     4.964318459657702e+00 
```

so the command `cell2mat` is almost 5 times slower than the `reshape` of the expansion. Use whichever seems best suited for your case.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:12:05.287

乔纳斯和罗迪的答案当然很好。一个小的性能改进是对`reshape`单元格中的向量而不是`permute`它们：

```
permCell = cellfun(@(x)reshape(x,[1 1 numel(x)]), inCell, 'uni',false);
A = reshape([permCell{:}], [size(inCell) numel(inCell{1,1})]); 
```

到目前为止，如果您可以放宽对输出尺寸的要求，最快的方法就是连接单元向量并重新整形

```
A = reshape([inCell{:}], [numel(inCell{1,1}) size(inCell)]); 
```

产生一个`[121 x 4 x 5]`矩阵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T18:36:03.797

怎么样，避免`cellfun`：

```
 output=permute(cell2mat(permute(input,[3 1 2])),[2 3 1]); 
```

不过，还没有将速度与其他建议进行比较。

# dll - 调试从另一个 DLL 调用的 DLL

> ID：13008736
> 
> 赞同：-2
> 
> 时间：2012-10-22T09:46:30.310
> 
> 标签：dll, visual-studio-debugging

你能帮我为我提供以下问题的解决方案吗？

我有一个我们为 Windows 服务框架编写的 1.DLL，我们正在从中调用另一个 2.DLL。我的 1.DLL 将被任何使用服务框架的应用程序调用。

是否有可能通过 2.dll 进行调试？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:53:21.353

如果您在 2.dll 的入口处设置断点，它会提示您输入代码的位置，您可以浏览到此并像任何普通项目一样执行。

**更新**。您添加了这是非托管代码。我没有尝试过非托管，但理论上它应该是一样的，只要你有源代码。

# visual-studio-2010 - 十字标记出现在图片框中

> ID：13008739
> 
> 赞同：0
> 
> 时间：2012-10-22T09:46:42.777
> 
> 标签：visual-studio-2010, visual-c++, exception

我制作了一个显示相机强度的仪表板。我的仪表板绘图功能是...

```
void drawImageMeter(float intensity_value,short * cambuff)
{

    //Read Image function***********************
                IplImage *Image;
                        FILE * fp;
                        fp=fopen("Imagebuffer.bin","rb");
                        short* Pattern_Data  = new short[width*height]; 
                        fread(Pattern_Data,sizeof(short),width*height,fp); 
                        fclose(fp); 

                Image=cvCreateImage( cvSize( width, height ), IPL_DEPTH_16S, 1 );
                cvSetData(Image,Pattern_Data, sizeof(short)*width);
                CvPoint minIntensityLoc, maxIntensityLoc;
                double maxIntensity,minIntensity;

                cvMinMaxLoc(Image, &minIntensity, &maxIntensity, &minIntensityLoc, &maxIntensityLoc, NULL);
                CvPoint2D32f roiStart;
                CvPoint2D32f roiEnd;
                roiStart.x =(width/2)-500;
                roiStart.y = 0;
                roiEnd.x = (width/2)+500;
                roiEnd.y = height;

                int roiWidth;
                int roiHeight;
                roiWidth = roiEnd.x - roiStart.x;
                roiHeight = roiEnd.y - roiStart.y;
                cvSetImageROI(Image, cvRect(roiStart.x, roiStart.y, roiWidth, roiHeight));

                IplImage *croped_image = cvCreateImage(cvGetSize(Image), IPL_DEPTH_16S,1);
                cvCopy(Image, croped_image, NULL);
                cvResetImageROI(Image);
                //cvSaveImage("roiIMage.bmp",croped_image);
                CvScalar result = cvSum(croped_image); 

                double sum = result.val[0]; 
                double average = sum / (roiWidth * roiHeight);
                int max_min = maxIntensity - minIntensity;

                Intensity_Values values = {maxIntensity,minIntensity,average,max_min};
                cvReleaseImage(&croped_image);
                cvReleaseImage(&Image);
                free(Pattern_Data);

                        if(count1 == 1)
                         {
                             count1++;
                            FocusExposure::label7->Text =  Convert::ToString(maxIntensity);
                         }
                        FocusExposure::label14->Text =  Convert::ToString(maxIntensity);

                     FocusExposure::label8->Text =  Convert::ToString(minIntensity);
                     FocusExposure::label9->Text =  Convert::ToString(average);
                     FocusExposure::label10->Text =  Convert::ToString(max_min);
    //******************************************

         IplImage  *Background=cvLoadImage("Dialer.bmp", 1);
        int width,height;
        width=Background->width;
        height=Background->height;
        if(counter==1)
        {
            counter++;
        needle_center.x=width/2;
        needle_center.y=height/2;

        needle_top.x=needle_center.x;
        needle_top.y=needle_center.y-140;
        }

            double const PI = 3.14159265358979323;
           int x1 = needle_top.x; 
           int y1 = needle_top.y;

           int x0=needle_center.x;
           int y0=needle_center.y;
           float angle;

           CurrIntensity = maxIntensity;
            angle = CurrIntensity-PreIntensity;
            angle= 0.0703125f * angle;

           // degrees, not radians
           float radians = angle * (PI / 180.0f);   // convert degrees to radians

           if (current_max==1)
            {
                current_max++;
                int N1x1 = needle_top.x; 
                int N1y1 = needle_top.y;
                needle1_top.x = ((N1x1-x0) * cos(radians)) - ((N1y1-y0) * sin(radians)) + x0; 
                needle1_top.y = ((N1x1-x0) * sin(radians)) + ((N1y1-y0) * cos(radians)) + y0;
            }
           needle_top.x = ((x1-x0) * cos(radians)) - ((y1-y0) * sin(radians)) + x0; 
           needle_top.y = ((x1-x0) * sin(radians)) + ((y1-y0) * cos(radians)) + y0;

           cvLine(Background, needle_center, needle1_top, CV_RGB(0, 0, 255), 1, 4, 0);

           cvLine(Background, needle_center, needle_top, CV_RGB(255, 0, 0), 1, 4, 0);
           FocusExposure::pictureBox1->Image= nullptr;
           FocusExposure::pictureBox1->Refresh();
         System::Drawing::Bitmap ^bmp = gcnew System::Drawing::Bitmap(Background->width,Background->height,Background->widthStep,System::Drawing::Imaging::PixelFormat::Format24bppRgb,(System::IntPtr)Background->imageData);
         System::IntPtr hbitmap = bmp->GetHbitmap();

         FocusExposure::pictureBox1->Image=FocusExposure::pictureBox1->Image->FromHbitmap(hbitmap );
         delete bmp;
         DeleteObject((HGDIOBJ)hbitmap );

         PreIntensity = CurrIntensity;
         cvReleaseImage(&Background);

} 
```

在这个函数中没有内存泄漏。当应用程序启动时，它运行良好，但经过一段时间后，米针会在某个点释放，然后在图片框中出现一个红十字标记，然后出现异常。

我不是为什么会出现这个异常。我也在谷歌上搜索过这个但没有找到任何解决方案。

异常来了...

```
************** Exception Text **************
System.ArgumentException: Parameter is not valid.
   at System.Drawing.Image.get_RawFormat()
   at System.Drawing.Graphics.DrawImage(Image image, Int32 x, Int32 y, Int32 width, Int32 height)
   at System.Drawing.Graphics.DrawImage(Image image, Rectangle rect)
   at System.Windows.Forms.PictureBox.OnPaint(PaintEventArgs pe)
   at System.Windows.Forms.Control.PaintWithErrorHandling(PaintEventArgs e, Int16 layer)
   at System.Windows.Forms.Control.WmPaint(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.269 (RTMGDR.030319-2600)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
----------------------------------------
PUMA_LED_TESTER
    Assembly Version: 1.0.4673.19390
    Win32 Version: 
    CodeBase: file:///D:/VS/FK/Puma_15_10_2012/PUMA_LED_TESTER/Release/PUMA_LED_TESTER.exe
----------------------------------------
System
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.269 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Windows.Forms
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.278 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.282 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled. 
```

请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:23:31.677

```
 delete bmp; 
```

不要破坏已分配给 PictureBox::Image 属性的位图。GDI+ 在尝试绘制已损坏的位图时急转直下。修补 hbitmap 也是不合适的，它应该类似于：

```
 // FocusExposure::pictureBox1->Image= nullptr;  Not this but:
     delete FocusExposure::pictureBox1->Image;
     FocusExposure::pictureBox1->Image = gcnew System::Drawing::Bitmap(...);
     PreIntensity = CurrIntensity;
     // etc.. 
```

# java - 如何将数字随机化几秒钟？

> ID：13008743
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:46:52.940
> 
> 标签：java, random, numbers

在java中人们可以输入随机数：

```
import java.util.Random; 
```

我正在开发一款游戏，它对我游戏中的随机发生器至关重要。但它改变数字对我来说很快，我真的很喜欢它变成一个新的随机数字的时间。我怎么做？我试图在谷歌上搜索，但什么也没给我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:53:40.130

I think perhaps you've misunderstood how it works. When you call, for example, `random.nextInt(10);` it returns a different number every time you call it. It is not 'always changing', it generates a sequence of numbers, and you are in control of when it does this. It will not generate new numbers until you ask it to.

You can assign it to a variable if you want to save it between calls to `nextInt()`, etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:48:30.933

谷歌什么都没给你？我对此表示高度怀疑。

```
public class Game {
    private Random random = new Random(System.currentTimeMillis());

    // Generate all the random numbers you need.
} 
```

如果您按计划需要它们，请使用 a`Timer`仅在闹钟响起时拨打下一个号码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:06:25.013

您可以使用`Timer`and`TimerTask`定期生成随机数，如下所示：

```
public class MyRandomNumberGenerator extends TimerTask{
int ramdomNumber =0;
Random r = new Random();
@Override
    public void run() {
        // TODO Auto-generated method stub
        randomNumber = r.nextInt(10);
        //Returns a pseudorandom, uniformly distributed int value between 0 (inclusive) and the specified value (exclusive) here it is 10,

    }
public int getRandomNumber(){
    return randomNumber;
} 

} 
```

现在在你想使用随机数的主类中

使用此代码

```
MyRandomNumberGenerator rng = new MyRandomNUmberGenerator();
Timer t = new Timer();
t.schedule(rng,System.getCurrentTimeMillis,10000);
int r = rng.getRandomNumber(); 
```

这里`System.getCurrentTimeMillis`的意思是从现在开始计时器，`10000`意味着每`10000`毫秒都会创建一个新的随机数并将其存储在实例变量中，然后您可以使用类的`getRandomNumber`方法访问该随机数`MyRandomNumberGenerator`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:57:56.487

`Random`每次调用对象的方法都会返回一个新的随机数。如果这不是您想要的，那么编写您自己的包含 的实例的类`Random`，并检查您上次调用它以获得新随机数的时间。如果是时候换一个新的，请返回一个新的。像这样的东西：

```
class TimedRandom {
    private final Random random = new Random();

    private int lastNumber;
    private long lastRefreshTime;

    public int getNumber() {
        long now = System.currentTimeMillis();

        // If it's more than 2 seconds ago, generate a new random number
        if (now - lastRefreshTime > 2000L) {
            lastNumber = random.nextInt();
        }

        lastRefreshTime = now;
        return lastNumber;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T09:58:29.077

```
public static void main(String[] args) throws Exception {
    Random random = new Random(System.currentTimeMillis());
    for (int i = 0; i < 10; i++) {
        int number = random.nextInt(10);
        System.out.println("number: " + number);
        // sleep 1s every generation
        TimeUnit.SECONDS.sleep(1);
    }
} 
```

# java - 检查 java.lang.reflect.Field 类型是否为字节数组

> ID：13008746
> 
> 赞同：9
> 
> 时间：2012-10-22T09:47:00.763
> 
> 标签：java, reflection

我没有做太多反思，所以这个问题可能很明显。例如，我有一堂课：

```
public class Document {

    private String someStr;    

    private byte[] contents;  

    //Getters and setters

} 
```

我正在尝试检查该字段`contents`是否是字节数组的实例。我尝试了什么：

```
Class clazz = Document.class;
Field[] fields = clazz.getDeclaredFields();
for (Field field : fields) {
    if (field.getType().isArray()) {
        Object array = field.getType();
        System.out.println(array);
    }
} 
```

这段代码的输出是：`class [B`. 我看到找到了字节数组，但如果我这样做：

```
if (array instanceof byte[]) {...} 
```

这种情况永远不会`true`。这是为什么？以及如何检查对象是否包含类型为的字段`byte[]`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-22T09:49:06.517

`array instanceof byte[]`检查是否`array`是类型的对象`byte[]`。但在你的情况下`array`不是 a `byte[]`，它是一个表示 的类型的`Class`对象`byte[]`。

您可以访问`Class`表示某种类型`T`的a `T.class`，因此您需要进行以下检查：

```
if (array == byte[].class) { ... } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T09:49:23.040

如果数组是一个类只有`instanceof Class`将是真的..

如果要检查可以使用的字段类型

```
if(field.getType() == byte[].class) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T09:51:52.593

试试这个：

```
Class<?> cls = field.getType();
if (cls.isAssignableFrom(byte[].class)) {
    System.out.println("It's a byte array");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T09:49:06.573

请参阅[Oracle 提供的这个有用的教程](http://docs.oracle.com/javase/tutorial/reflect/special/arrayComponents.html)

> 数组类型可以通过调用 Class.isArray() 来识别

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T09:48:56.677

如果你试试：

```
Class<?> array = field.getType();
System.out.println(array.getCanonicalName()); 
```

它打印`byte[]`。但是@axtavt 的答案更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-25T06:46:48.247

你只需要就是

```
field.getType().getTypeName().equals("byte[]") 
```

# c# - 如何更新数据集

> ID：13008748
> 
> 赞同：2
> 
> 时间：2012-10-22T09:47:11.757
> 
> 标签：c#, dataset

在我的项目中，有两个文本框`txtName`和`txtPopulation`一个按钮`btnClick`。每当用户单击 时`btnClick`，数据集的“人口”列中的`dsDetails`值应由 中的值更新`txtPopulation`，其中“名称”列等于`txtName`。我知道这可以使用`rowfilter`or`select`但我不知道要在其中实现什么。**请不要linq**

![在此处输入图像描述](../Images/5184f20e18bf1e8421a24f1613d5f236.png) 目前，我正在做这样的事情..（*工作*）

```
for (int intCount = 0; intCount < dsDetails.Tables[0].Rows.Count; intCount++)
{
    if (lblCountryName.Text.Equals(dsDetails.Tables[0].Rows[intCount][0].ToString()))
    {
         dsDetails.Tables[0].Rows[intCount][3] = txtPopulation.Text;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T09:49:01.833

您需要调用`.AcceptChanges()`DataTable 以便将更改提交给集合，如下所示：

```
for (int intCount = 0; intCount < dsDetails.Tables[0].Rows.Count; intCount++)
{
    if (lblCountryName.Text.Equals(dsDetails.Tables[0].Rows[intCount][0].ToString()))
    {
        dsDetails.Tables[0].Rows[intCount][3] = txtPopulation.Text;
    }
}  

dsDetails.Tables[0].AcceptChanges(); 
```

**使用选择行过滤器**

您可以使用`.Select`行过滤器来定位您的列，如下所示：

```
foreach (DataRow row in dsDetails.Tables[0].Select("Name = '" + txtName.Text + "'"))
{
    row[3] = txtPopulation.Text;
}

dsDetails.Tables[0].AcceptChanges(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:54:09.013

```
DataRow[] dr = dsDetails.Tables[0].Select("Something='"+lblCountryName.Text+"'");
if(dr.Length > 0)
{
 dr[0][0] = "ChangeValue";//Datarow is reference to datatable it will automatically update the datatable values
}
dsDetails.Tables[0].AcceptChanges(); 
```

# ruby-on-rails-3 - 活动模型 MassAssignmentSecurity 错误

> ID：13008751
> 
> 赞同：2
> 
> 时间：2012-10-22T09:47:18.063
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, omniauth

我遇到了一个错误：我正在使用 Facebook 集成开发一个网络。我是 ruby​​ on rails 的新手。你能帮我解决我的问题吗？

```
ActiveModel::MassAssignmentSecurity::Error in SessionsController#create

Can't mass-assign protected attributes: name 
```

**这是我的控制器：**

```
class SessionsController < ApplicationController
  def create
    #render :json => request.env['omniauth.auth'].to_yaml
   auth = request.env['omniauth.auth']
    unless @auth = Authorization.find_from_hash(auth)
      @auth = Authorization.create_from_hash(auth, current_user)
    end

    self.current_user = @auth.user  
    render :text => "Welcome, #{current_user.name}."
   end
end 
```

**这是我的用户模型：**

```
class User < ActiveRecord::Base
  has_many :authorizations
  attr_accessor :name, :uid, :provider

  def self.create_from_hash!(hash)
    #create(:name => hash['user_info']['name'])
   create(:name => hash.info.name)
  end
end 
```

**这是我的授权模型：**

```
class Authorization < ActiveRecord::Base
  belongs_to :user
  validates_presence_of :user_id, :uid, :provider
  validates_uniqueness_of :uid, :scope => :provider

  def self.find_from_hash(hash)
    find_by_provider_and_uid(hash['provider'], hash['uid'])
  end

  def self.create_from_hash(hash, user = nil)
    user ||= User.create_from_hash!(hash)
    Authorization.create(:user => user, :uid => hash['uid'], :provider => hash['provider'])
  end
end 
```

我该如何解决这个问题..提前谢谢:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T10:20:34.527

您当然已经启用了[批量分配保护](http://guides.rubyonrails.org/security.html#mass-assignment)（`config.active_record.whitelist_attributes = true`在您的配置文件中），因此您需要明确指出哪些属性可以通过`update_attributes`. 你用`attr_accessible`.

在`User`模型中，替换以下行（看起来没用）

```
attr_accessor :name, :uid, :provider 
```

经过

```
attr_accessible :name, :uid, :provider 
```

[在此处](https://stackoverflow.com/questions/2793098/usage-of-attr-accessor-in-rails)、[此处](https://stackoverflow.com/questions/1789996/attr-accessible-in-rails-active-record)或[此处](https://stackoverflow.com/questions/3136420/difference-between-attr-accessor-and-attr-accessible)查看与相关的问题`attr_accessor`和`attr_accessible`更多信息

# android - onClickListener 到键盘按钮

> ID：13008752
> 
> 赞同：3
> 
> 时间：2012-10-22T09:47:18.830
> 
> 标签：android, onclicklistener

我的活动中有一个 EditText 字段。用户可以使用虚拟键盘更改该字段中的文本。一旦用户按下键盘上的回车键，我想执行一些操作。那么，如何在键盘上的回车按钮上实现 setOnClickListener 呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T09:49:03.370

用于`onKeyListener`检查 Enter 按下

例如。

```
edittext.setOnKeyListener(new OnKeyListener() {
    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if (event.getAction()!=KeyEvent.ACTION_DOWN)
            return false;
        if(keyCode == KeyEvent.KEYCODE_ENTER ){
            //your necessary codes...
            return true;
        }
        return false;
    }
}); 
```

更多信息，查看[官方文档](http://developer.android.com/reference/android/view/View.OnKeyListener.html)

你也可以看到那个[例子](http://www.programcreek.com/java-api-examples/index.php?api=android.view.View.OnKeyListener)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:51:02.000

可能与以下重复，

[使用软键盘上的“ENTER”键而不是单击按钮](https://stackoverflow.com/questions/4451374/use-enter-key-on-softkeyboard-instead-of-clicking-button)

[软键盘上的输入按钮 - Android](https://stackoverflow.com/questions/6790672/enter-button-on-soft-keyboard-android)

希望这些帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T09:52:14.837

设置在文本视图上执行操作时要调用的特殊侦听器。这将在按下回车键或用户选择提供给 IME 的操作时调用。设置这个意味着普通的硬键事件不会在文本视图中插入换行符，即使是多行的；但是，按住 ALT 修饰符将允许用户插入换行符。

```
edittext.setOnEditorActionListener(new OnEditorActionListener() {

            @Override
            public boolean onEditorAction(final TextView v, final int actionId, final KeyEvent event) {
                if ((event != null && (event.getKeyCode() == KeyEvent.KEYCODE_ENTER)) || (actionId == EditorInfo.IME_ACTION_DONE)) {
                    //perform your action
                    //button.performClick();
                }
                return false;
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:50:11.040

我为您做了一些研究，发现了这一点： [How to override the <ENTER> key behavior of the virtual keyboard in Android](https://stackoverflow.com/questions/3272142/how-to-override-the-enter-key-behaviour-of-the-virtual-keyboard-in-android)

它解释了如何更改回车键的操作。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T09:50:21.250

尝试

KeyboardView.OnKeyboardActionListener ... 虚拟键盘事件的监听器。

采取进一步行动...

[http://developer.android.com/reference/android/inputmethodservice/KeyboardView.OnKeyboardActionListener.html](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.OnKeyboardActionListener.html)

# git - 添加遥控器会影响 Git 存储库的大小吗？

> ID：13008753
> 
> 赞同：1
> 
> 时间：2012-10-22T09:47:19.497
> 
> 标签：git, github

我在 Github 上有一个[大型项目](https://github.com/GarageGames/Torque3D)的分支，我想从其他人的分支中提取更改，并推荐他们可以提取我的更改的方法。

为我想[按照这个问题中的建议](https://stackoverflow.com/questions/5606048/git-merge-from-someone-elses-fork)从中提取代码的用户添加新的命名遥控器听起来是一个很好的解决方案，但是这样做会显着影响我的本地存储库的大小吗？

（我要继续尝试，但我找不到任何有关此的信息，所以我想我会问后代。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:55:49.947

（作为术语说明，这些是其他“远程”，而不是“起源”；“起源”只是为您克隆的存储库设置的远程的默认名称。）

如果您添加了一个远程，它是原始大型存储库的一个分支（并从那里获取），通常会使用很少的额外空间。这是因为 git 聪明的存储模型。每个文件（“blob”）由散列标识，每个目录（“树”）由 blob、树和其中包含的其他对象的散列的散列标识，提交由包含树的散列数据标识在源代码的顶层。因此，直到出现分叉的所有历史都将由具有相同 ID 的提交表示，因此没有额外的存储空间用于这些。在分歧之后，只有额外的存储空间用于已更改的文件 - 如果存储库中有大 blob，除非它们的内容发生更改，否则它们仍将具有相同的哈希，所以只会存储一次。（即便如此，git 在打包对象时会进行二进制增量压缩，因此将小更改存储到大文件应该仍然非常有效。）

如果分叉添加了原始存储库中不存在的大型新文件，那么这当然会显着增加使用的空间量。

# javascript - 如何使用 jquery 交换选择列表中的值？

> ID：13008759
> 
> 赞同：1
> 
> 时间：2012-10-22T09:47:46.737
> 
> 标签：javascript, jquery

我有两个简单的选择列表，并想添加一个选项来交换其中的值。因此，第一个列表的值为“ONE”，另一个列表的值为“TWO”。当您单击“交换”按钮时，第一个的值应为“TWO”，第二个的值应为“ONE”。

这是 jsFiddle：http: [//jsfiddle.net/YPyRF](http://jsfiddle.net/YPyRF)

这是HTML代码：

```
<div class="form-item-from">
  <label for="form-item-from">From </label>
 <select class="form-select" id="form-item-from"><option value="ONE">ONE</option></select>
</div>

<div class="form-item-to">
  <label for="form-item-to">From </label>
 <select class="form-select" id="form-item-to"><option value="TWO">TWO</option></select>
</div>

<a href="">Swap values</a> 
```

这是js代码（来自[Is there a native jQuery function to switch elements?](https://stackoverflow.com/questions/698301/is-there-a-native-jquery-function-to-switch-elements)）：

```
jQuery("#form-item-from").after(jQuery("#form-item-to")); 
```

但是，这在这种情况下不起作用。此外，该功能不应依赖于选择列表或交换按钮的位置（我找到了一种解决方案，其中交换按钮必须位于两个列表之间）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:53:52.370

像这样的东西会起作用：

```
$("#SwapButton").click(function(e) {
    e.preventDefault();//This prevents the A tag from causing a page reload

    //Get the values
    var fromVal = $("#form-item-from option:selected").val();
    var fromText = $("#form-item-from option:selected").text();
    var toVal = $("#form-item-to option:selected").val();
    var toText = $("#form-item-to option:selected").text();

    //Set the values
    $("#form-item-from option:selected").val(toVal);
    $("#form-item-from option:selected").text(toText);
    $("#form-item-to option:selected").val(fromVal);
    $("#form-item-to option:selected").text(fromText);
});​ 
```

[这是您的小提琴，已更新](http://jsfiddle.net/YPyRF/2/)

注意：这只会切换`option`选中的项目。如果这不是您想要的，那么我误解了，您可能会更好地使用亚当的解决方案。[这是一个更好的示例](http://jsfiddle.net/YPyRF/9/)，它说明了它仅交换所选值的事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:53:42.027

尝试这样的事情：[jsfiddle](http://jsfiddle.net/YPyRF/7/)

当您单击链接时...
1) 将 #form-item-from 中的
所有选项保存到变量中 2) 将 #from-item-to 中的所有选项保存到变量中
3) 使用来自的选项更新 #from #to
4) 使用来自 #from 的选项更新 #to

```
$(function() {
    $("a").click(function() {
        var selectOne = $("#form-item-from").html();
        var selectTwo = $("#form-item-to").html();

        $("#form-item-from").html(selectTwo);
        $("#form-item-to").html(selectOne);
        // stops the link going anywhere
        return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T09:58:11.123

试试这个，

```
$("a").click(function(e){
    e.preventDefault();        
    var a = jQuery("#form-item-from").html();
    var b = jQuery("#form-item-to").html();
    jQuery("#form-item-from").html(b);
    jQuery("#form-item-to").html(a);
})​ 
```

演示：http: [//jsfiddle.net/jQACe/3/](http://jsfiddle.net/jQACe/3/)

# c++ - 这段代码是否代表了一种设计模式？

> ID：13008780
> 
> 赞同：0
> 
> 时间：2012-10-22T09:48:44.840
> 
> 标签：c++, design-patterns

在我的基础框架中，我喜欢有可以在多个项目中重用的类。大多数情况下，这些都是通用的，以提供灵活性。

我有一个很小的标题，用于存储数据并轻松获取数据。

```
#pragma once
#include <map>
#include <string>

namespace BaseFrameWork
{
template<class TValue, class TKey = std::string>
class Provider
{
public:
  static TValue& Get(TKey const& key);
private:
  static std::map<TKey, TValue> _dataMap;
};
} 
```

是的，它只是地图的包装，但我喜欢它作为从中获取数据的中心位置。
例如，我可以`Provider<Room>::Get("U-18")`从谁在乎从哪里获取加载的对象。

我承认拥有这样的全局对象是多么不受欢迎，但这不是公共 API 的一部分，仅用于团队可以使用它的个人项目。

我想知道的是这种模式是否有一个名称，如果它甚至是一个。我总是称它为 Provider-Pattern，因为它就是这样做的，提供东西，但我看到那已经被采用了。

请不要告诉我这段代码有多糟糕以及我应该如何为它感到难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:54:03.460

这是一个单例模式，数据项是一个`map`（当访问是通过一个 getter 并且可能是 setter 时，实际上是一个不透明的关联容器）。关联容器本身通常不被视为设计模式。

如果您正在寻找简洁明了地传达此设计的短语，则类似于“初始化（何时/如何）的单例映射并且此后只读”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:06:22.640

好的，我在你的课上遇到的问题：

1.  真的`Get()`应该`TValue`通过非常量引用返回。这本质`Get()`上是一个 setter 和一个 getter。如果它通过`std::map`'s实现，`operator[]`那么它将插入并创建一个默认构造的 TValue，您可以愉快地分配给它或修改它。
2.  静态私有成员变量通常是错误的。无论何时拥有一个，最好将该成员完全隐藏在编译单元的匿名命名空间中。
3.  因为它是一个模板，你究竟在哪里实例化实例？每个实例都需要单独实例化。

# regex - htaccess 中的 mod_rewrite：防止循环的最佳方法？

> ID：13008782
> 
> 赞同：2
> 
> 时间：2012-10-22T09:48:48.327
> 
> 标签：regex, apache, mod-rewrite

我的 htdocs/MVC/ 文件夹中有一个 .htaccess 文件，看起来像这样

```
RewriteEngine On

# if its already been rewritten to the specific folder
RewriteCond %{REQUEST_URI} ^/MVC/public/img/(.*)$ [OR]
RewriteCond %{REQUEST_URI} ^/MVC/public/index.php$
# skip next two rules
RewriteRule .? - [S=2]

# rewrite image requests
RewriteRule (.*\.(jpg|png|gif))$ public/img/$1 [L]
# rewrite all other requests to the front controller index.php
RewriteRule (.*) public/index.php?url=$1 [QSA,L] 
```

我想要实现的是所有图像请求都转到文件夹 MVC/public/img 所有其他请求都转到 MVC/public 文件夹中的前端控制器 index.php。这是设置这些规则并防止 mod_rewrite 循环的最佳方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T10:45:00.267

使用`S`标志跳过很好，但缺点是：

1.  阅读起来有点困难（如果其他人在看）
2.  如果您需要附加新规则，则需要检查它的跳过方式
3.  如果您的规则变得越来越复杂，那么保持正确的跳过将变得越来越困难

防止循环的其他可能方法：

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L] 
```

如果在前一个循环中应用了规则（或应用了 mod_alias 重定向），将其放在规则的最顶部将立即完全停止重写。

所以它看起来像这样：

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

# rewrite image requests
RewriteRule (.*\.(jpg|png|gif))$ public/img/$1 [L]
# rewrite all other requests to the front controller index.php
RewriteRule (.*) public/index.php?url=$1 [QSA,L] 
```

优点：您永远不必担心循环，因为第二次立即以 ENV 检查结束 缺点：如果您碰巧需要创建循环规则，此方法将阻止它工作

# html - 列表框在 Chrome 中无法正确显示

> ID：13008783
> 
> 赞同：0
> 
> 时间：2012-10-22T09:48:51.790
> 
> 标签：html, css

您好我正在尝试向列表框添加一些背景颜色和边框，它在选项的右侧和底部显示了一些白色条。当我将鼠标悬停在每个项目上时，它们会正确重新排列。

```
 <select>
     <option>Hello</option>
     <option>World</option>
  </select>​ 
```

而CSS是

```
 select {
    background: Red;
    border: 1px solid #ccc;
    color: white;
    width: 100px;  
  }
  select option{
    margin : 0   
  }

  select:active {
    background: -webkit-linear-gradient(#666, white);
  } 
```

请在[此处](http://jsfiddle.net/CUA9p/524/)查看它的实际应用。我可以在每个选项的右侧和所有选项的底部看到白色条。如何摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:57:31.290

添加`option{background:red}`

**[演示](http://jsfiddle.net/CUA9p/525/)**

# scala - 如何使用完全限定名称导入类？

> ID：13008792
> 
> 赞同：4
> 
> 时间：2012-10-22T09:49:05.380
> 
> 标签：scala, scala-2.9

`test1.scala`使用以下代码创建文件：

```
package test
import java.io.FileInputStream
object Foo 
```

`test2.scala`使用以下代码创建另一个文件：

```
package test.java
object Bar 
```

现在编译为`scalac test1.scala test2.scala`：

我们得到错误：

```
test.scala:2: error: object io is not a member of package test.java
import java.io.FileInputStream
            ^
one error found 
```

我认为错误是因为 Scala 认为`java`上面指的是 package `test.java`。除了重命名包外，如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T09:53:20.777

```
import _root_.java.io.FileInputStream 
```

或者为了简化事情，您可以使用别名：

```
import _root_.java.{io => jio}
import jio.FileInputStream 
```

# objective-c - 如何通过点击地图识别国家？

> ID：13008795
> 
> 赞同：0
> 
> 时间：2012-10-22T09:49:16.580
> 
> 标签：objective-c, ios, mapkit

例如，触摸地图的某个区域并看到带有国家名称的警报，点击

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:32:38.807

谢谢大家想通了

```
CLLocation *location = [[CLLocation alloc] initWithLatitude:55.755773 longitude:37.617761];
CLGeocoder *geocoder = [CLGeocoder new];
[geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error) {
    CLPlacemark *placemark = [placemarks objectAtIndex:0];

    NSLog(@"%@ %@ %@ %@ %@ %@ %@ %@", placemark.country, placemark.ISOcountryCode, placemark.postalCode, placemark.administrativeArea, placemark.locality, placemark.subLocality, placemark.thoroughfare, placemark.subThoroughfare);
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:51:03.880

搜索“反向地理编码”

# sharepoint - 未部署到 GAC 的 Dll - SharePoint 2013、Visual Studio 2012、.Net FW 4.5

> ID：13008796
> 
> 赞同：16
> 
> 时间：2012-10-22T09:49:17.687
> 
> 标签：sharepoint, visual-studio-2012, .net-4.5, sharepoint-2013

当我在 Visual Studio 2012 中创建一个简单的 SharePoint 2013 项目并想部署它时，它部署得很好，但 Dll 不在全局程序集缓存中。在高级选项卡中，我添加了要部署的项目程序集。

![在此处输入图像描述](../Images/c213c8cf622d309b7e84708214bfe0ce.png)

在不同的测试中，我将**Assembly Deployment Target**选项设置为***GlobalAssemblyCache***，并将**Assembly In Package**设置为***True***，并从第一个场景中描述的包中删除 dll 。

![在此处输入图像描述](../Images/96eba81bc2459450deb3872285d3c28a.png)

项目 .NET 固件版本为 4.5。机器是 64 位虚拟机，Windows Server 2008。我还尝试将项目的平台目标更改为 X64 和任何 CPU，但没有运气。

我曾尝试使用 gacutil 工具手动添加 dll，但它也没有部署。它可能与4.5框架有关吗？我也不能手动部署 4.5 中制作的任何 Dll，但所有其他工作。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-22T12:49:16.913

> 我在 c:\windows\assembly 中检查它，它应该在那里，对吧？

不，这是 .NET 版本 1.0 到 3.5 中 GAC 的目录。它在 .NET 4.0 及更高版本中移动，现在位于 c:\windows\microsoft.net\assembly。您可以使用 Explorer 浏览该目录，不再使用扁平化 GAC 目录视图的 shell 扩展处理程序。如果程序集不包含任何非托管代码，则从 GAC_MSIL 目录开始，从那里定位实际文件几乎没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-27T14:37:54.543

我有这个问题，我认为 IISReset 修复了它？

我对我的事件接收器进行了更改。在包中，我像您一样从项目输出中添加了程序集。我在项目属性上将“在包中包含程序集”设置为 False。

我部署了，但我的事件接收器更改看起来不像正在发生。

我运行了 IIS 重置，然后可以看到我的更改。

# php - PHP 错误：mysql_fetch_assoc() .. 查询在 phpMyAdmin 中运行良好

> ID：13008798
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:49:23.343
> 
> 标签：php

执行页面时出现此错误：

> 警告：：`mysql_fetch_assoc()`提供的参数不是有效的 MySQL 结果资源...

我尝试在 phpMyAdmin 上运行 SQL 目录，它运行良好。

这是完整的代码：

```
<?php

$connect_error = 'Sorry, we have connection problems.';

mysql_connect('localhost','user','password') or die($connect_error);
mysql_select_db('mydb') or die($connect_error);

$result = mysql_query("SELECT * FROM tbl_main ORDER BY id desc limit 1");
 $rows = array();

   while($r = mysql_fetch_assoc($result)) {  //ERROR POINTS HERE
     $rows['id'][] = $r;
   } 

 print json_encode($rows);

?> 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:54:15.457

如果`mysql_query`返回 FALSE，那么你会得到一个错误。如果你的 SQL 有问题，或者你的数据库连接有问题，它可以返回 false。

调用[mysql_error](http://www.php.net/manual/en/function.mysql-error.php) () 以了解有关发生的错误的更多信息。

此外，您现在真的应该在 PHP 中使用[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)或[MySQLi](http://www.php.net/manual/en/book.mysqli.php)。

```
<?php

$connect_error = 'Sorry, we have connection problems.';

$link = mysql_connect('localhost','user','password') or die($connect_error);
mysql_select_db('mydb', $link) or die($connect_error);

$result = mysql_query("SELECT * FROM tbl_main ORDER BY id desc limit 1", $link);
if ($result) {
    $rows = array();

    while($r = mysql_fetch_assoc($result)) {  //ERROR POINTS HERE
        $rows['id'][] = $r;
    } 

    print json_encode($rows);
} else {
    print mysql_error($link);
}

?> 
```

# ios - 如何在 iPhone 上为 RTSP 流打开其他播放器？

> ID：13008799
> 
> 赞同：0
> 
> 时间：2012-10-22T09:49:25.397
> 
> 标签：ios, rtsp

我正在尝试在 iphone 上的应用程序中播放 rtsp 流。我不是想写一个球员。我想要这样的功能：当用户单击按钮时，会弹出一个窗口，显示每个支持播放 rtsp 的播放器。当用户单击播放器时，播放器将播放流。我有很多谷歌，但我什至找不到合适的 rtsp 播放器......所以我的问题是：

1.  哪个播放器真正适合玩rtsp？我一直在尝试oplayer，但它没有用......我尝试过的其他播放器甚至无法播放rtsp..

2.  如果我已经安装了可以播放rtsp的播放器，如何调用并将rtsp地址发送给播放器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:50:48.313

这是经典的 Android 意图行为，不幸的是，苹果移动设备不像 Android 那样多任务处理。

前段时间我们试图做一些非常相似的事情，只是任务是使用语音命令启动特定的应用程序。

如本文所述，我们为播放器应用程序实现了自定义 url 方案。 [http://sol3.typepad.com/tagalong_developer_journa/2012/01/in-this-segment-continuing-our-discussion-on-ios-external-accessories-and-multitasking-we-are-going-to-look- at-ways-an-applic.html](http://sol3.typepad.com/tagalong_developer_journa/2012/01/in-this-segment-continuing-our-discussion-on-ios-external-accessories-and-multitasking-we-are-going-to-look-at-ways-an-applic.html)

需要为您需要启动的每个播放器定义方案，如果这些是您开发的应用程序，请确保实现一些通过 url 将地址传递给应用程序的方法，如果这些是第三方播放器，那么您依赖作者是否包含某种机制。

现在搜索和发现玩家是另一个问题，如果我记得你可以遍历自定义 url 方案列表并获取附加的应用程序，这可能是相当有问题的，你最好以某种方式跟踪应用程序您的应用程序支持。

说真的，iPhone 在设计时并没有考虑到这种功能，我在这里给了你一些想法，但我没有一个好的解决方案来解决你的问题。

至于什么是好的rtsp播放器，应用商店里可能有一些不错的，或者使用ffmpeg编写自己的。

说真的，您最好只构建自己的播放器来支持您需要的格式，而不是尝试实施某种播放器发现和启动方案。

# qt4 - 过滤“..”和“.” 与 QDir？

> ID：13008803
> 
> 赞同：0
> 
> 时间：2012-10-22T09:49:33.950
> 
> 标签：qt4

除了手动过滤`..`和之外`.`，有没有“官方”的方式来做到这一点？

文档没多说，这里是我用的，

```
QDir dir (path);
foreach (const QFileInfo & fileInfo, dir.entryInfoList())
{
  if (fileInfo.fileName() != ".." && fileInfo.fileName() != ".")
  {
     blabla
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:55:52.460

您可以尝试使用以下`QDir::NoDotAndDotDot`选项`entryInfoList`：

```
foreach (const QFileInfo & fileInfo, dir.entryInfoList(QDir::NoDotAndDotDot | QDir::Files)) 
```

（这只会给你文件：`QDir::Dirs`为目录添加）

# .net - 基本类型如何存储在 asp.net 会话变量中

> ID：13008804
> 
> 赞同：1
> 
> 时间：2012-10-22T09:49:35.723
> 
> 标签：.net, session-variables

我需要知道基本类型 Int、enum、string 是如何存储在会话变量中的。它们是否在存储之前先被序列化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:55:47.360

这完全取决于会话状态的配置方式。

如果您只是将会话状态存储在内存中，则不需要序列化。变量直接存储到字典对象中。

如果您将会话状态存储在会话状态服务器或数据库中，那么变量确实会一直序列化和反序列化。

[您可以在http://msdn.microsoft.com/en-us/magazine/cc163730.aspx](http://msdn.microsoft.com/en-us/magazine/cc163730.aspx)找到更多信息。

# c# - Gridview BottomPagerRow 未找到

> ID：13008807
> 
> 赞同：1
> 
> 时间：2012-10-22T09:49:49.343
> 
> 标签：c#, asp.net, gridview, custompaging

我在 GridView 的 PagerTemplate 中放置了一个 ASP DataRepeater。我需要在我的代码中找到 DataRepeater

我正在尝试这个。

```
Repeater rptPager = (Repeater)gv_Inbox.BottomPagerRow.FindControl("rptPager"); 
```

但这是抛出异常

```
Object reference not set to an instance of an object. 
```

当我尝试

```
GridViewRow row = gv_Inbox.BottomPagerRow; 
```

它返回空值。

我正在尝试在 GridView 中自定义分页。这样我就可以将中继器放置在 GridView 下方并使用分页。但我想将中继器放在 GridView 的底部，即。寻呼机行。那么我该怎么做呢？

你能帮助我吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:54:25.383

> 仅当 GridView 控件在 RowCreated 事件中创建底部寻呼机行后，BottomPagerRow 属性才可用。

尝试DataBound之类的事件，您可以在BottomPagerRow中找到控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T05:38:53.037

将以下行添加到“RowDataBound”，然后您将可以访问。

```
If e.Row.RowType <> DataControlRowType.Pager Then Exit Sub 
```

# java - 获取泛型参数的泛型超类

> ID：13008811
> 
> 赞同：1
> 
> 时间：2012-10-22T09:50:14.523
> 
> 标签：java, reflection

```
class Super<T> {}

class Child<A, B> extends Super<B> {}

class Code {
  public void method(Child<String, Integer> child) {}
} 
```

我可以使用反射来获取参数类型：

```
ParameterizedType ptype = (ParameterizedType) Code.class.getMethod("method").getGenericParameterTypes()[0] 
```

但是我怎样才能得到 ptype 的泛型超类（意思不仅是`Super.class`，还有类型参数`Integer`）

我的用例是我想使用反射来确定方法的参数之一是否是 MyClass 对象的集合（我没有要检查的实际参数实例）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:55:44.210

类型参数在编译期间在 java 中被擦除。看[这里](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)或[那里](https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens)。所以你可能无法做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-29T11:12:10.227

好吧，从上面的例子中你可以做到。因为可以提取方法参数（Child）的第二个类型参数（Integer）的实际类型。

```
Method method = Code.class.getMethod("method", Child.class);
ParameterizedType parameterType = (ParameterizedType) method.getGenericParameterTypes()[0];
Type secondType = parameterType.getActualTypeArguments()[1];
System.out.println(secondType == Integer.class); 
```

退货`true`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:06:53.233

据我了解，你不能这样做。

您可以使用 提取`Child`(`String`和`Integer`)的类型参数`getActualTypeArguments()`，但不能将它们与`T`in相关联`Super<T>`。

您也可以从中提取`T`，`class Child extends Super<Integer>`但这不是您的情况。

这意味着如果你想`Collection<MyClass>`在参数中找到，你只能在有 时才能做到`method(Collection<MyClass>)`，但不能`method(ArrayList<MyClass>)`或其他。

# java - When using weak or soft reference with a ReferenceQueue when is the object really removed from memory?

> ID：13008813
> 
> 赞同：1
> 
> 时间：2012-10-22T09:50:21.040
> 
> 标签：java, weak-references, soft-references

When using weak or soft reference with a `ReferenceQueue` when is the object really removed from memory? Do I have to call `referancequeue.remove` or `referancequeue.poll()` methods?

Example:

```
ReferenceQueue q = new ReferenceQueue();
WeakReference wr = new WeakReference(object, referenceQueue);

if (pr.isenqueued()) {

   // do something

} 
```

or do I have to following?

```
WeakReference weakref=null;

if ((weakref=q.removed())!=null) {

   // do something

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:16:17.720

在您的示例中，WeakReference 将在无法访问时被垃圾收集器清理。另一方面，如果您使用 SoftReferences，只要有足够的内存，就会保留软可访问的对象。因此，如果您希望它持续存在，您应该使用 SoftReference。我想拥有控制，即第二种方式会让你高枕无忧。如果您想自己进行清理操作而不是 GC，则可以使用 PhantomReference 来确保进度。它们在入队之前不会被垃圾收集器自动清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:18:19.660

从 ReferenceQueue 中删除它们之后，对象可以被终结，并且在它们被终结之后，它们可以在下一次 GC 中被删除。

# ruby-on-rails-3 - Rails PayPal IPN notify_url 未被调用

> ID：13008814
> 
> 赞同：2
> 
> 时间：2012-10-22T09:50:22.990
> 
> 标签：ruby-on-rails-3, paypal, paypal-ipn

所以，我有一个具有全局 IP 地址的路由器（是的，我知道它不适用于本地地址，例如 192.168.xx.xx）地址，并且我已经三次检查它是否可以从外部访问。

我目前在沙盒环境中工作。

我在隐藏的 :encrypted 字段中拥有所有付款选项（请参阅相应的 railscast），这些选项将发布到 PayPal。在 PayPal 方面，一切都运行得非常顺利——我完成了付款等等，但从未调用过 IPN。我的操作根本没有被触发的日志条目（没有错误/警告或任何东西），但至少应该有一些东西。

我尝试通过两种方式传递 notify_url：1）在我的购买模型中的选项哈希中，然后被加密到 :encrypted 字段；`:notify_url => notify_url`2) notify_url 明确作为单独的隐藏字段 => `<%= hidden_field_tag :notify_url, notify_url %>`3) pts 1 和 2 的组合。

但这是没有希望的——似乎没有任何效果。:(

我还尝试在我的沙盒业务帐户设置中启用 IPN，但这也没有任何帮助。

在这种情况下我该怎么办？

PS 我也试过 IPN 模拟器服务，它似乎工作。那有什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:15:10.497

经过反复试验，我终于找到了解决方案！

千万不要，我再说一遍，千万不要使用“_cart”作为你的付款命令，如果你想使用：1）IPN，2）PDT 验证。改用“_xclick”！

这解决了我的问题，现在它们都可以正常工作了！

希望这对某人有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:02:04.920

就我而言，rails root_path 也有几个问题，所以我不得不使用：

```
(:notify_url => MyApp::Application.config.domain_url + Rails.application.routes.url_helpers.my_ipn_path) # 
```

确保 notify_url 格式正确，将其链接到值哈希（如果您使用类似于此 railcast [http://railscasts.com/episodes/141-paypal-basics](http://railscasts.com/episodes/141-paypal-basics)的内容）。

我无法让它在本地环境中工作，所以我必须直接在我的暂存环境中测试它，检查日志:)

希望能帮助到你！:)

# ios - 即使没有为我的应用启用 iCloud，我是否也必须遵循 iOS 数据存储指南

> ID：13008816
> 
> 赞同：3
> 
> 时间：2012-10-22T09:50:25.613
> 
> 标签：ios, app-store, icloud, appstore-approval, data-storage

我创建了一个不启用 iCloud 的应用 ID。但这是否意味着我必须遵循 iOS 数据存储指南才能让我的应用获得应用商店的批准？我正在使用应用程序的文档文件夹来存储大文件，例如照片。我已经在应用商店上传了我的应用，它正在等待审核。我担心它可能会被拒绝。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:44:26.983

是的。这是因为用户目录中的所有内容，除了 tmp 和 Library/cache 目录之外，都是默认备份的，Apple 不希望将容易重新生成/重新下载的内容复制到云中。

如果您可以证明您的大文件是“用户生成的内容”，那么它应该能够按原样获得批准。否则，您可以使用“不备份”标志来标记包含您的内容的文件或目录。

# c# - 在 Metro 中，如何在资源中定义我的实例？

> ID：13008818
> 
> 赞同：0
> 
> 时间：2012-10-22T09:50:30.790
> 
> 标签：c#, .net, xaml, microsoft-metro, windows-runtime

如果我在 xaml 中定义一个名为 MyClass 的类，我可以像这样在 .net 框架的代码隐藏中检索它，

```
Application.Current.FindResource("keyName") as MyClass; 
```

“keyName”是我对 xaml 中定义的 x:key 属性的赋值。

但是在地铁里它不再起作用了。有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:09:26.967

msdn论坛有人回答了。[解决方法](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/39810d22-9219-4fe4-b934-8d5a63427730)很简单，让我很尴尬。

```
MyClass myclass = (MyClass)Application.Current.Resources["keyName"]; 
```

这样就可以在 App.xaml 中获取自定义资源。

# mysql - CakePHP 2.1 表格中的日期属性

> ID：13008820
> 
> 赞同：0
> 
> 时间：2012-10-22T09:50:43.230
> 
> 标签：mysql, date, find, cakephp-2.1

我正在使用 cakephp 2.1 并且我创建了一个表`actor(id, first_name, last_name, dob)`。其中 dob 是出生日期，日期格式为 Ymd。我想获取在特定月份或特定日期过生日的用户。我已经尝试过了，但得到了解决方案。请帮我这样做。这项工作是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:57:17.173

如果特定月份（这里我采取了一年的第二个月）

```
select * from actor where MONTH(dob)='02' 
```

特定的第 02 天。

```
select * from actor where DAY(dob)='02' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:00:59.630

像下面的代码一样写下你的条件：

```
$conditions = array (
   'AND' => array (
      'MONTH(Actor.dob)' => '12',
      'DAY(Actor.dob)' => '1',
      'YEAR(Actor.dob)' => '2012',
   )
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T23:52:57.633

假设您想知道本月谁的生日：

```
$conditions = array(
    'Actor.dob LIKE ?' => CakeTime::format("\%-m\%")
); 
```

今天：

```
$conditions = array(
    'Actor.dob LIKE ?' => CakeTime::format("\%-m-d\%")
); 
```

您需要更清楚地了解您真正需要查询的内容。

# android - Edit Sound file in android

> ID：13008823
> 
> 赞同：2
> 
> 时间：2012-10-22T09:50:55.303
> 
> 标签：android, audio, editing

I need to edit a wave file(adjust the pitch,bass,etc) in android.How I can I achieve this? I had been searching for this in the net,but couldnt find any solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:13:35.557

我找到了解决方案，可以使用android中的默认均衡器播放文件[http://developer.android.com/reference/android/media/audiofx/Equalizer.html](http://developer.android.com/reference/android/media/audiofx/Equalizer.html)

# c# - C# How can I change the BackColor of a ToolTip with isBalloon = true?

> ID：13008830
> 
> 赞同：0
> 
> 时间：2012-10-22T09:51:14.277
> 
> 标签：c#, winforms, tooltip

I saw this question: [Change winform ToolTip backcolor](https://stackoverflow.com/questions/12990757/change-winform-tooltip-backcolor) but the top answer solution did not work...
I set `isBalloon = true`, is that the problem? How can I still change the `BackColor`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:56:11.873

诀窍是在 OnDraw 方法中修改 DrawToolTopEventArgs。看看 MSDN 论坛上的这篇文章：http: [//social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/77cf51ac-1c52-4f2e-8ab8-42c4ba864b7d](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/77cf51ac-1c52-4f2e-8ab8-42c4ba864b7d)

# performance - what is faster: one call to a function with many parameters or more calls to functions with fewer parameters?

> ID：13008832
> 
> 赞同：-3
> 
> 时间：2012-10-22T09:51:24.603
> 
> 标签：performance, function, parameters, call

I have 9 buffers that I need to send over CAN. I have a function that has 9 parameters, representing the code for which variables I want to have in each buffer. The function contains 9 switch-case. The question is: will this be faster if I have 3 functions each with 3 parameters? So instead of calling one function with 9 parameters, it's faster to call 3 functions with 3 parameters?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:31:51.440

也许有一点点，但是当你试图弄清楚要调用哪个方法时，你可能会失去更多。

此外，可能的增益比 IO（CAN 总线）小几个数量级，因此您应该专注于创建可读且正确的代码。

# .net - 声明多个类的影响

> ID：13008833
> 
> 赞同：1
> 
> 时间：2012-10-22T09:51:28.360
> 
> 标签：.net, performance

在我的 .Net 应用程序（MVVM 应用程序）中，我假设有 10 个下拉列表。所以我创建了 10 个不同的类（模型），只包含名称、值对。创建 10 个不同类的原因仅仅是因为这些下拉列表在功能上是独立的。

10个不同的类而不是只有1个类（其中包含名称值对并通过ViewModel绑定到视图）的优缺点是什么（包括内存影响）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:56:44.147

在一个类中包含多个不同的类几乎不可能对您的应用程序产生影响。简单类型的实例化非常快（每秒数十亿个对象）。

如果您进入数以百万计的对象，并且只有在实例化它们时正在工作时，您*可能会注意到问题。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:00:24.287

在您的应用程序中拥有额外的 10 个（甚至 100 个）小类（而不是 1 个具有共享角色的类）**对性能基本上没有影响**。

也就是说，更多的类意味着需要维护更多的代码，这意味着你需要做更多的工作。如果这些类实际上是不同的，那么为每个控件设置一个不同的类很可能是最好的决定，但是如果所有这些类本质上是相同的，那么我个人宁愿为自己节省一些输入并使用类似KeyValuePair [<TKey, TValue> 的](http://msdn.microsoft.com/en-us/library/5tbh8a42.aspx?ppud=4)东西.

# mod-rewrite - WAMP 中带有 mod_rewrite 和 mod_proxy 的外部 URL

> ID：13008837
> 
> 赞同：0
> 
> 时间：2012-10-22T09:51:48.347
> 
> 标签：mod-rewrite, redirect, wampserver, mod-proxy

我在本地服务器上使用 WAMP，我试图将本地目录重定向到外部域名，例如：

[http://myhost.dev/directory](http://myhost.dev/directory)应该重定向到[http://www.google.com](http://www.google.com)

但是，我希望将[http://myhost.dev/directory](http://myhost.dev/directory)保留在地址栏中。我知道我需要设置mod_proxy，在阅读文档后发现我需要这样做：

```
RewriteRule ^directory http://google.co.uk [P]
ProxyPassReverse /directory/ http://phvc.co.uk/schools/ 
```

但是，我收到以下错误：

```
[Mon Oct 22 10:41:22 2012] [alert] [client 127.0.0.1] C:/wamp/www/vhosts/path/.htaccess: ProxyPassReverse not allowed here 
```

如果有人可以提供帮助，那将不胜感激。

我已经打开了所有在 WAMP 中说代理的模块：

*   代理模块
*   proxy_ajp_module
*   proxy_balancer_module
*   proxy_connect_module
*   proxy_ftp_module
*   proxy_http_module

干杯。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T17:24:02.730

我最终实施了这个解决方案：

[http://nukoagency.co.uk/2012/11/accessing-an-iframe-using-a-proxy-server/](http://nukoagency.co.uk/2012/11/accessing-an-iframe-using-a-proxy-server/)

# ember.js - Ember 分页完整示例

> ID：13008838
> 
> 赞同：29
> 
> 时间：2012-10-22T09:51:48.870
> 
> 标签：ember.js

我想知道是否有一个完整的示例可以演示我们如何使用 ember.js 进行分页

我有一个有很多行的表，所以我想使用分页来帮助用户进行数据分析。

我已经看到了，`Ember.PaginationSupport.js`但我找不到在 html 视图中使用它的方法。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-23T15:01:28.050

**下面的更新示例适用于 ember.js RC1** -- 03/14/2013

首先，您需要添加一个类似 mixin 的分页，因为 ember 核心中尚不存在该分页

```
var get = Ember.get, set = Ember.set;

Ember.PaginationMixin = Ember.Mixin.create({

  pages: function() {

    var availablePages = this.get('availablePages'),
    pages = [],
    page;

    for (i = 0; i < availablePages; i++) {
      page = i + 1;
      pages.push({ page_id: page.toString() });
    }

    return pages;

  }.property('availablePages'),

  currentPage: function() {

    return parseInt(this.get('selectedPage'), 10) || 1;

  }.property('selectedPage'),

  nextPage: function() {

    var nextPage = this.get('currentPage') + 1;
    var availablePages = this.get('availablePages');

    if (nextPage <= availablePages) {
        return Ember.Object.create({id: nextPage});
    }else{
        return Ember.Object.create({id: this.get('currentPage')});
    }

  }.property('currentPage', 'availablePages'),

  prevPage: function() {

    var prevPage = this.get('currentPage') - 1;

    if (prevPage > 0) {
        return Ember.Object.create({id: prevPage});
    }else{
        return Ember.Object.create({id: this.get('currentPage')});
    }

  }.property('currentPage'),

  availablePages: function() {

    return Math.ceil((this.get('content.length') / this.get('itemsPerPage')) || 1);

  }.property('content.length'),

  paginatedContent: function() {

    var selectedPage = this.get('selectedPage') || 1;
    var upperBound = (selectedPage * this.get('itemsPerPage'));
    var lowerBound = (selectedPage * this.get('itemsPerPage')) - this.get('itemsPerPage');
    var models = this.get('content');

    return models.slice(lowerBound, upperBound);

  }.property('selectedPage', 'content.@each')

}); 
```

接下来，您需要像这样在 ArrayController 中使用上面的 mixin

```
PersonApp.PersonController = Ember.ArrayController.extend(Ember.PaginationMixin, {  
    itemsPerPage: 2
}); 
```

接下来，您可以添加一个简单的帮助视图以将页码显示为 li 标签

```
PersonApp.PaginationView = Ember.View.extend({
    templateName: 'pagination',
    tagName: 'li',

    page: function() {
        return Ember.Object.create({id: this.get('content.page_id')});
    }.property()
}); 
```

您的路线可能看起来像这样（父级下的嵌套页面）

```
PersonApp.Router.map(function(match) {
    this.resource("person", { path: "/" }, function() {
        this.route("page", { path: "/page/:page_id" });
    });
});

PersonApp.PersonPageRoute = Ember.Route.extend({
    model: function(params) {
        return Ember.Object.create({id: params.page_id});
    },
    setupController: function(controller, model) {
        this.controllerFor('person').set('selectedPage', model.get('id'));
    }
});

PersonApp.PersonRoute = Ember.Route.extend({
    model: function(params) {
        this.controllerFor('person').set('selectedPage', 1);
        return PersonApp.Person.find();
    }
}); 
```

最后，您需要添加一些 html 来显示它

```
<script type="text/x-handlebars" data-template-name="application">

  <div id="main">
    {{ outlet }}
  </div>

</script>

<script type="text/x-handlebars" data-template-name="person">

<table width="250px">                                                               
<thead>
<th>id</th>
<th>username</th>
</thead>
<tbody>
   {{#each person in controller.paginatedContent}}
    <tr>
      <td>{{person.id}}</td>
      <td>{{view Ember.TextField valueBinding="person.username"}}</td>
    </tr>
   {{/each}}
</tbody>
</table>

<div name="prev">{{#linkTo 'person.page' prevPage target="controller"}}Prev{{/linkTo}}</div>
<ul class="pagination gui-text">
  {{#each pages}}
    {{view PersonApp.PaginationView contentBinding="this"}}
  {{/each}}
</ul>
<div name="next">{{#linkTo 'person.page' nextPage target="controller"}}Next{{/linkTo}}</div>

</script>

<script type="text/x-handlebars" data-template-name="pagination">

{{#with view}}
{{#linkTo 'person.page' page}}
  {{content.page_id}}
{{/linkTo}}                                                                         
{{/with}}

</script> 
```

如果您想看到它的工作，这是一个完整的工作项目

[https://github.com/toranb/ember-pagination-example](https://github.com/toranb/ember-pagination-example)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-26T20:08:30.037

在我朋友 edgar 的一些改进和帮助下，我们想出了一个非常简单的解决方案，您可以在[GitHub中查看](https://github.com/juanjardim/ember-pagination)

基本上我们扩展了 Ember.ArrayProxy 以完成分页，还添加了操作来管理上一页和下一页。

感谢@Toran Billups 的解决方案和算法@Jeremy Brown

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T13:40:34.587

我在[https://github.com/notmessenger/emberjs-pageable](https://github.com/notmessenger/emberjs-pageable)上取得了巨大的成功，但 Ember 现在有一些内置在 ArrayController 中的东西，称为`arrangedContent`它。您还可以在模型的特定字段上指定默认排序顺序。 [Ember.js 和arrangedContent](https://stackoverflow.com/questions/12998138/ember-js-and-arrangedcontent)稍微谈了一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-23T12:47:55.500

您可能想查看这个 npm 模块，了解 Ember 中的简单分页实现： [Ember CLI Simple Pagination](http://npmjs.com/package/ember-cli-simple-pagination)

# windows-phone-7 - 我们可以从 wp7 上的 Applicationbar 捕获点击事件吗？

> ID：13008843
> 
> 赞同：0
> 
> 时间：2012-10-22T09:52:14.537
> 
> 标签：windows-phone-7

我正在开发一个 wp7 应用程序，我们可以从 wp7 上的 Applicationbar 捕获点击事件吗？我尝试了以下4种方法，但都失败了。

1.  鼠标事件
2.  操纵事件
3.  接触点
4.  手势服务/手势监听器

任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:10:37.563

您可以处理[ApplicationBar.StateChanged](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.applicationbar.statechanged%28v=vs.92%29.aspx)事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:55:36.840

应用程序栏没有`tap`事件，但您可以使用简单`click`事件

# c# - Function by using Recursion?

> ID：13008846
> 
> 赞同：1
> 
> 时间：2012-10-22T09:52:47.937
> 
> 标签：c#, c++

I want to make a function which will display numbers starting from 1 to 100 and 100 to 1 I am confused that how i can do this using Recursion?

I dont want to do this using any other loop. Please provide me hint and ignore my way of asking because i am new in c++ and c#.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T10:01:59.497

```
void Print100(int n)
{
   if (n > 100)
   {
       Console.WriteLine();  // cosmetic
       return;               // stop recursing
   }

   Console.WriteLine(n);     // 1-100
   Print100(n+1);            // recurse
   Console.WriteLine(n);     // 100-1, on the way out
}

void Main()
{
    Print100(1);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T09:57:51.277

用于打印 1 到 100 的数字

```
private void number(int n)
        {
            if (n == 100)
                return;
            Response.Write(n + "<br/>");
            number(n + 1);
        } 
```

称呼：

```
number(0); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T09:58:59.467

您可以对以下内容进行递归：

```
public static void For<T>(
    T initializer,
    Func<T, bool> condition,
    Func<T, T> iterator,
    Action<T> action)
{
    if (!condition(initializer)) return;
    action(initializer);
    For(iterator(initializer), condition, iterator, action);
} 
```

一到一百：

```
For(1, i => i <= 100, i => i + 1, i => Console.WriteLine(i)); 
```

剩下一百比一作为练习。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T09:59:30.117

你编写一个函数，它接受两个参数，基本上是：当前数字和方向（向上或向下）。然后输出该数字，增加或减少它并再次调用相同的函数，直到达到 0。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T10:04:11.130

您可以在 C++ 中使用此函数：

```
 void printNumbers(int number)
    {
       if (i >= 1) 
       {
          // 100 --> 1
          cout << number << " ";
          printNumbers(i-1);
          // 1 --> 100
          cout << number << " ";
       }
    } 
```

用 printNumbers(100) 调用你的函数

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T09:59:44.583

C＃

```
public void recurseInts( int start, int finish ){
 if( start > finish ) return;
 Console.WriteLine(start);
 Console.WriteLine(finish - start);
 recurseInts(start + 1 , finish);
}

recurseInts(0,100); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-22T10:12:44.830

我认为这就是你在 C++ 中想要的

```
#include <iostream>
using namespace std;

void recur(int start, int end,bool asc){
    cout << start << endl;
    if(!asc && start==0)return;
    if(start == end) asc = false;
    asc?start++:start--;
    recur(start, end, asc);
}

int main(){
    recur(0, 100,true);
    system("pause");
    return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-22T10:19:46.023

复制此代码并提交您的作业：

```
class Program
{

    public static bool forward = false;
    public static bool stop = false;
    static void Main(string[] args)
    {
        PrintNumbers(0);
        Console.ReadLine();

    }

    private static void PrintNumbers(int i)
    {
        if (i <= 100 && !forward)
        {
            Console.WriteLine(i);
            if (i == 100)
            {
                forward = true;
            }
            PrintNumbers(i + 1);

        }
        if (i >= 0  && i < 100 && forward && !stop)
        {

            Console.WriteLine(i);

            PrintNumbers(i - 1);
            if (i==0)
            {
                stop = true;
            }

        }

    }
} 
```

# php - PHP file doesn't write to current directory?

> ID：13008850
> 
> 赞同：1
> 
> 时间：2012-10-22T09:52:55.703
> 
> 标签：php, apache, web, web-hosting

I have a PHP file on a web-host that is as follows:

```
<?php

file_put_contents('test.txt','TEST');    
echo 'OK';

?> 
```

But the file `test.txt` is not created when I execute the page from a browser. Why not? Is it a permissions issue?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T09:56:38.987

是的，PHP Doc 说

> 如果文件名不存在，则创建文件。否则，现有文件将被覆盖，除非设置了 FILE_APPEND 标志。

仅当您写入对该文件夹具有权限时....尝试

```
error_reporting(E_ALL);
ini_set("display_errors", "on");

if (! is_writable(__DIR__)) {
    trigger_error("I don't have permission");
}

file_put_contents('test.txt', 'TEST'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:02:59.603

> 为什么不？是权限问题吗？

你应该问自己的问题是你为什么不知道？

代码将产生错误或警告 - 你为什么不知道那是什么？

这可能是权限问题 - 权限是什么？

顺便说一句：在您的文档根目录中写入内容到将执行 PHP 的目录是一个巨大的安全漏洞。即如果是权限问题，那么更改权限是解决问题的*错误方法。*

# php - mysql数据库的每个输入的php

> ID：13008851
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:52:58.547
> 
> 标签：php, mysql

我目前有 5 个输入名称框，我想将其插入 mysql 数据库。这是我的代码，我有 php 的基本知识，但知道会有更好的代码方式，因为我只是一个菜鸟。

```
<form action="result.php" method="POST">
  <input type="text" name="name1" value="" />
  <input type="text" name="name2" value="" />
  <input type="text" name="name3" value="" />
  <input type="text" name="name4" value="" />
  <input type="text" name="name5" value="" />
</form> 
```

在 result.php 上，我正在使用这个 mysql 代码

```
mysql_query("INSERT INTO users (name1, name2, name3\. name4, name5) 
VALUES ('$_POST["name1"]',  '$_POST["name2"]', '$_POST["name3"]', 
'$_POST["name4"]', '$_POST["name5"]'"); 
```

假设如果有 1000 个字段，我该如何管理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:59:42.693

> 我正在使用这个 mysql 代码

您发布的代码应该失败并产生错误 - 但您没有提及这些。它失败了吗？或者这*不是*您正在使用的代码？

（您尝试在不转义双引号的情况下嵌入双引号，双引号内的关联索引不应有额外的引号，您已使用句点作为字段分隔符）。

> 假设如果有 1000 个字段，我该如何管理它？

规范化您的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:57:39.933

您有大量错别字，并且没有使用任何转义符。如果您想拥有 1000 个字段，您如何期望用户分别键入每个名称？

# javascript - Stop Long Polling Function in JS

> ID：13008854
> 
> 赞同：3
> 
> 时间：2012-10-22T09:53:07.937
> 
> 标签：javascript, ajax, jquery, long-polling

I have a page where I have implemented a long polling function to check the timestamp of a record, so it will update if the data has been edited.

```
<script type="text/javascript">
var poll_url = 'http://mysite.com/poll/;
var my_ts = <?php $_SESSION['template_timestamp']; ?>;
(function poll(){
    $.ajax({ 
        url: poll_url,
        type: 'post',
        success: function(data){
            if ((data.ts > 0) {
                // check if expired
                if (data.ts > my_ts) {
                    // it has expired, so reload the page
                    $("#dialog-message").html('Record has been edited.');
                    // show popup
                    $("#dialog-message").dialog({
                        modal: true,
                        buttons: {
                            Reload: function() {
                                $(this).dialog("close");
                                $('#pleaseWait').show();
                                window.location.href = '/records/overview';
                            }
                        }
                    });
                }
            } else {
                // is still null
                console.log('error');
            }
        }, 
        dataType: "json", 
        complete: poll, timeout: 30000 
    });
})();
</script> 
```

The problem I have is that there is also another action which invokes a JS ajax call, which when called I would like to force the long polling function to stop.
Is there a way to do this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T14:55:00.183

以下 SO 问题可能会提供答案...[使用 jQuery 中止 Ajax 请求](https://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery)

将其应用于您的代码片段，您可能会得到类似...

```
<script type="text/javascript">
var poll_url = 'http://mysite.com/poll/';
var my_ts = <?php $_SESSION['template_timestamp']; ?>;
var poll_xhr;

(function poll(){
    poll_xhr = $.ajax({ 
        url: poll_url,
        type: 'post',
        success: function(data){
            // Code removed
        }, 
        dataType: "json", 
        complete: poll, 
        timeout: 30000 
    });
})();

// To kill the AJAX request, put this where it makes sense
poll_xhr.abort();
</script> 
```

# php - 如何使用 php 从字符串中获取所有高度值？

> ID：13008855
> 
> 赞同：2
> 
> 时间：2012-10-22T09:53:11.420
> 
> 标签：php

用户可以使用 WYSIWYG 为一段内容输入文本，该文本放置在变量 $body 中。这可能包括`style="[maybe stuff] height:xpx [maybe stuff]"`或的多个实例`height="xpx"`。

我需要获取所有存在的高度值（仅数字），以便我可以将它们加在一起。

请注意，字符串中可能还有其他整数值，因此它不能只抓取所有整数。

如果解决方案使用正则表达式，我永远无法理解它，并且我知道正则表达式存在安全问题，所以理想情况下我正在寻找一个安全的解决方案！

我敢肯定这一定很简单，但我很挣扎！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:13:09.933

如果我没记错的话，这应该可以解决问题：

```
preg_match_all('/height(\:|\=)"*\s*([0-9]+[^;"]+);*/i','<tr style="height: 123px; border: none;><tr height="125px"',$matches);
var_dump($matches[2]);//array('123px','125px'); 
```

但是由于您要让这个正则表达式在 HTML 上松散（如果我没记错的话），我会研究[*解析*](http://php.net/manual/en/class.domdocument.php)[DOM的](http://php.net/manual/en/class.domdocument.php)[方法](http://php.net/manual/en/class.domdocument.php)*并使用[DOMElement 的](http://php.net/manual/en/class.domelement.php)方法来获得我想要的东西。这是对这个问题的更强有力的看法。*

 *根据 OP 的要求：

```
function getDeepChildren($node,&$nodeArray)
{//recursive function to flatten dom
    $current = $node->getElementsByTagName('*');//get all children
    foreach($current as $node)
    {//loop through children
        $nodeArray[] = $node;//add child
        if ($node->hasChildNodes())
        {//if child node has children of its own
            getDeepChildren($node,$nodeArray);//get the children and append to nodeArray
        }
    }
}//no return value, $nodeArray is passed by reference
$dom = new DOMDocument();
$dom->loadHTML($body);
$nodes = array();
getDeepChildren($dom,$nodes);//$nodes is passed by reference
$height = array();
while($node = array_shift($nodes))
{//$height[i][0] === height value, $height[i][1] is reference to node
    if ($node->hasAttribute('height'))
    {
        $height[] = array($node->getAttribute('height'),$node);
        continue;//already got what we need, no need for slow preg_match
        //in case of <div height="123px" style="border:1px solid #F00;"> for example...
    }
    if ($node->hasAttribute('style') && preg_match('/height\s*\:\s*([0-9]+\s*[a-z]+)\s*;/i',$node->getAttribute('style'),$match))
    {
        $height[] = array($match[1],$node);
    }
}
var_dump($height);//should contain everything you're looking for 
```

对于更面向对象的方法，我建议查看几个[递归 domnode 迭代器类](http://www.php.net/manual/en/class.domnodelist.php)。
不鼓励通过引用传递数组，但这是获得所需内容的最简单方法。一个替代版本是：

```
function getDeepChildren($node)
{
    $nodes = array();
    $current = $node->getElementsByTagName('*');
    foreach($current as $node)
    {
        $nodes[] = $node;
        if ($node->hasChildNodes())
        {
            $nodes = array_merge($nodes,getDeepChildren($node));
        }
    }
    return $nodes;
}
//instead of getDeepChildren($dom,$nodes), usage is:
$nodes = getDeepChildren($dom); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:01:37.107

感谢大家的帮助！Elias Van Ootegem - 您的正则表达式运行良好，但是我决定在解析 DOM 时听取您的建议。这是我以这种方式找到的解决方案 -

```
$dom = new DOMDocument();
$dom->loadHTML($body);
$xpath = new DOMXPath($dom);

  $tags = $xpath->query('//div/@style');
$height = 'height:';
$totalheight = 0;
foreach ($tags as $tag) {

$str = trim($tag->nodeValue);
$height_str = strstr( $str, $height);
$totalheight = $totalheight + trim( substr( $height_str, strlen( $height), stripos(        $height_str, 'px;') - strlen( $height)));

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:25:28.080

我对正则表达式不太熟悉，但也许这会起作用？

```
<?php

$message = 'Hello world <p style="height: 80 px;width:20px">Some example</p><br />Second: DERP DERP <p style="color:#000;height:30 px;padding:10px;"> DERP</p>';
preg_match_all('#height\s?:\s?[0-9]+\s?px#', $message, $results);
$heights = str_replace(array('height', ':', ' ', 'px'), '', $results[0]);
echo array_sum($heights);

?> 
```*

# android - Android gmail 未出现在 nexus 设备（平板电脑和手机）上的邮件意图共享列表中

> ID：13008859
> 
> 赞同：2
> 
> 时间：2012-10-22T09:53:26.847
> 
> 标签：android, email, android-intent

我面临的问题是“Android gmail 没有出现在 nexus 设备（平板电脑和手机）上的邮件意图共享列表中”。

```
 Intent mailIntent = new Intent(Intent.ACTION_SEND_MULTIPLE);
      mailIntent.putExtra(Intent.EXTRA_EMAIL, mailTo);
      mailIntent.putExtra(Intent.EXTRA_SUBJECT, buildSubject());
      mailIntent.putExtra(Intent.EXTRA_TEXT, buildMessage());
      mailIntent.putExtra(Intent.EXTRA_STREAM, uris);
      // mailIntent.setType("image/jpg");
      mailIntent.setType("plain/text");
      // mailIntent.setType("message/rfc822");
      startActivity(Intent.createChooser(mailIntent, "send multiple datas")); 
```

我尝试了几种类型（“image/jpg”、“plain/text”、“message/rfc822”）但没有

有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:13:33.317

尝试： `Intent mailIntent = new Intent(android.content.Intent.ACTION_SEND); mailIntent.setType("text/plain");` 它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:30:38.407

这里的问题是您正在使用

```
mailIntent.putExtra(Intent.EXTRA_STREAM, uris); 
```

这只是旧版 gMail 应用程序中的一个错误。该应用程序未注册到意图的操作，因此它没有出现在建议的应用程序列表中。

到目前为止，此错误已得到修复，并且可以再次使用。

# node.js - Error: failed to serialize user into session. Wrong function passed to serializeUser()?

> ID：13008860
> 
> 赞同：8
> 
> 时间：2012-10-22T09:53:29.530
> 
> 标签：node.js, express, passport.js

I'm trying to do my first steps with the Express framework for Node. I was trying to implement a tiny authentication example, using Passport. However, I can't make it work; I keep getting the error: `Error: failed to serialize user into session`.

I installed node-inspector to try to see what's going on. Apparently, my serialization function is being called, and it executes `done(null, 0)` as expected. I tried taking a look at Passport code, but I couldn't understand what the problem is. This is pretty much my first attempt at a Node application so I'm not familiar with the code. Can someone give me a hint? Thanks.

```
var express = require('express');
var jade = require('jade');

var passport = require('passport');
var LocalStrategy = require('passport-local').Strategy;

var app = express();

/*
 * Settings
 */

app.configure(function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');

    app.use(express.logger());
    app.use(express.cookieParser());
    app.use(express.bodyParser());
    app.use(express.session({ secret: 'cat in the bag' }));
    app.use(passport.initialize());
    app.use(passport.session());

    passport.use(new LocalStrategy(
        function(username, password, done) {
            done(null, { id: 0, username: 'juancito' });
        }
    ));

    passport.serializeUser(function(user, done) {
        done(null, user.id);
    });

    passport.deserializeUser(function(id, done) {
        done(null, 'juancito');
    });
});

/*
 * Routes
 */

app.get('/', function(req, res) {
    res.render('index', { title: 'Welcome!' });
});

app.get('/login', function(req, res) {
    if (req.user)
        return res.redirect('/');

    res.render('login', { title: 'Log in' });
});

app.post('/login',
    passport.authenticate('local', {
        successRedirect: '/',
        failureRedirect: '/login'
    })
);

app.get('/logout', function(req, res) {
    req.logOut();
    res.redirect('/');
});

app.listen(3000);
console.log('Listening on port 3000.'); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T17:46:10.343

问题是这`0`是 JavaScript 中的 false-y 值，因此 Passport 认为您没有序列化您的用户。

```
done(null, 0)  // don't serialize users to a 0 number 
```

我建议从 1 开始用户 ID（这发生在 SQL 数据库中），或者（如果你真的需要从 0 开始的整数）将它们序列化为会话的字符串。

```
done(null, 0.toString()) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T06:43:22.517

也许你应该在调用 passport.initialize() 和 passport.session() 之前分配你的序列化/反序列化回调。

```
passport.use(new LocalStrategy(
    function(username, password, done) {
        done(null, { id: 0, username: 'juancito' });
    }
));

passport.serializeUser(function(user, done) {
    done(null, user.id);
});

passport.deserializeUser(function(id, done) {
    done(null, 'juancito');
});

app.configure(function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');

    app.use(express.logger());
    app.use(express.cookieParser());
    app.use(express.bodyParser());
    app.use(express.session({ secret: 'cat in the bag' }));
    app.use(passport.initialize());
    app.use(passport.session());

}); 
```

# objective-c - Popping a viewController only when specific view is not appearing

> ID：13008865
> 
> 赞同：0
> 
> 时间：2012-10-22T09:53:49.563
> 
> 标签：objective-c, ios, uiviewcontroller

I have a viewController that I want him to pop when I moving to another tab in the application. My problem is that when I'm inside this view I have a "plus" button for adding people with ABPeoplePickerNavigationController, than when the people picker becomes active, the view is popping as well, so when I finished of choosing people the application crushes, because it don't have any view to come back to.

this is the viewWillDisappear:

```
- (void)viewWillDisappear:(BOOL)animated
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

How can I solve it?

New code:

```
- (void)viewWillDisappear:(BOOL)animated
{
    NSArray *controllers =  self.darioTabController.childViewControllers;
    UIView *v;

    for (UIViewController *vc in controllers)
    {
        if ([vc isKindOfClass:[@"ModalPresnterViewController" class]]) // or even [ABPeoplePickerNavigationController class]
        {
            v = vc.view;
        }
        else
            [self.navigationController popViewControllerAnimated:YES];
    }
} 
```

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:05:23.083

如果您希望仅在您点击标签栏时发生动作，您可以使用 TabBarController 委托方法：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
  //The user click on the item corresponding to ABPeoplePickerNavigationController
  if([viewController isKindOfClass:[ABPeoplePickerNavigationController class]])
  {
    //Do something if you cant
  }
  else // The user click on an other view controller (pop the ABPeoplePickerNavCtrl)
  {
    [yourController.navigationController popViewControllerAnimated:YES];
  }
} 
```

**或者**，您可以检查选择了哪个 TabBarItem ：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
  //Check if the selected view controller (ABPeopleNavCtrl)
  if(tabBarController.selectedIndex == indexOfTheABPeoplePickNavigationController)
  {

  }
  else // Else the user tap on an other item, so pop the controller you want
  {
    [theViewControllerToPop.navigationController popViewControllerAnimated:YES];
  }
} 
```

注意：请记住设置 UITabBarController 委托；）

# php - zf2教义2关系属性不起作用

> ID：13008872
> 
> 赞同：1
> 
> 时间：2012-10-22T09:54:10.840
> 
> 标签：php, doctrine-orm, doctrine, zend-framework2

我在用户实体中有以下非列属性

```
/**
 *
 * @ORM\ManyToOne(targetEntity="\Auth\Entity\Company", inversedBy="user")
 * @ORM\JoinColumn(name="companyID", referencedColumnName="id")
 */
protected $company;

/**
 *
 * @ORM\ManyToOne(targetEntity="\Auth\Entity\Role", inversedBy="user")
 * @ORM\JoinColumn(name="roleID", referencedColumnName="id")
 */
protected $role; 
```

我在用户表中没有列角色或公司。但是我确实在用户表中的列 roleID 和 companyID 以及用户实体中的它们各自的属性如下

```
 /**
     * @ORM\Column(type="integer")
     * @ORM\ManyToOne(targetEntity="\Auth\Entity\Role", inversedBy="user") 
     * @ORM\JoinColumn(name="roleID", referencedColumnName="id")    
     */
    protected $roleID;

    /**
     * @ORM\Column(type="integer")
     * @ORM\ManyToOne(targetEntity="\Auth\Entity\Company", inversedBy="user")
     * @ORM\JoinColumn(name="companyID", referencedColumnName="id")     
     */
    protected $companyID; 
```

在用户控制器中，当我尝试使用以下行添加记录时，它成功添加了记录，但没有 roleID 和 companyID

```
 $userData = array("username" => $username, "pass" => $secPass,
                "salt" => $salt, "companyID" => $companyID,
                "roleID" => $roleID, "cost" => $cost
            );

            $user->populate($userData);
            $this->getEntityManager()->persist($user);
            $this->getEntityManager()->flush(); 
```

但是如果我从实体用户中删除这两个属性，那么它还会添加 roleID 和 companyID

```
protected $company;
protected $role; 
```

但我还需要以上属性。我无法理解为什么会发生这种冲突，

有人遇到过这个问题吗？以及如何解决这个问题？任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:21:53.623

如下更改用户实体中的属性

```
/**
 * 
 * @ORM\Column(type="integer")
 */
protected $roleID;

/**
 * 
 * @ORM\Column(type="integer")
 */
protected $companyID;

/**
 *
 * @ORM\ManyToOne(targetEntity="\Auth\Entity\Company", inversedBy="user")
 * @ORM\JoinColumn(name="companyID", referencedColumnName="id")
 */
protected $company;

/**
 *
 * @ORM\ManyToOne(targetEntity="\Auth\Entity\Role", inversedBy="user")
 * @ORM\JoinColumn(name="roleID", referencedColumnName="id")
 */
protected $role; 
```

然后在您的用户控制器中执行以下添加。它对我有用

```
 $company = $this->getEntityManager()->find('Auth\Entity\Company', $companyID);                
    $role = $this->getEntityManager()->find('Auth\Entity\Role', $roleID);                

    $user->username = $username;
    $user->pass = $secPass;
    $user->salt = $salt;
    $user->company = $company;
    $user->role = $role;
    $user->cost = $cost;                

    $this->getEntityManager()->persist($user);
    $this->getEntityManager()->flush(); 
```

# jquery - Tinymce 预览插件按钮

> ID：13008883
> 
> 赞同：2
> 
> 时间：2012-10-22T09:55:07.313
> 
> 标签：jquery, tinymce

我在我的 django 应用程序中使用 jquery tinymce。tinymce 中有一个名为“preview”的默认插件，它工作正常。

我想要 1 个名为“预览”的按钮靠近提交（在页面末尾），我希望这个新的预览按钮应该与插件“预览”执行相同的操作。任何人都可以帮助我如何在新按钮中提供与插件预览中相同的链接？

提前致谢！...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:06:50.400

创建您的按钮并将其提供给 onClick 事件：

```
tinymce.get('your_editors_id').execCommand('mcePreview'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T19:48:58.103

不一定是您要拍摄的确切内容；但是这个问题和答案让我找到了在工具栏上实现预览按钮的策略，如下所示：

```
tinymce.init({
    selector: "textarea.editor",
    plugins: 
    [
        "advlist autolink lists link image charmap print preview anchor",
        "searchreplace visualblocks code fullscreen",
        "insertdatetime media table contextmenu paste"
    ],
    allow_script_urls: true,
    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | styleselect ",
    toolbar2: "PreviewButton",
    setup: function(editor)
    {
        editor.addButton('PreviewButton',
        {
            text: "Preview",
            onclick: function()
            {
                editor.execCommand('mcePreview');
                return;
            }
        })
    }
} 
```

再一次 - 不是您正在寻找的外部按钮，但希望其他人在解决这个问题时会发现这个解决方案很有帮助。

# html - 如何检查 HTML 文件的语法是否正确？

> ID：13008886
> 
> 赞同：4
> 
> 时间：2012-10-22T09:55:09.913
> 
> 标签：html, c, syntax, tags

尽管我已经学习了 C 和 C# 以及其他一些次要语言，但我对 C 还是很陌生。我的问题是：如何检查 HTML 文件的语法是否正确？我是说：

```
<html><head></head><body>random stuff 
```

和

```
<tag></tag>random stuff</body></html> 
```

我想过做一个堆栈，但我迷路了。从文件 char 中读取 char 并放入这么多`if`s 听起来太复杂了。

有谁知道我怎么写这个？正如我所说，我是 C 的新手，因此如果您能在解释中附加一些代码，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:57:56.017

您需要为 HTML 编写一个简单的 Lexer 和 Parser。

查看 Lex（或 Flex）和 Yacc（或 Bison）以及如何使用它们。

有关旧版本 HTML 的[简单 Yacc 语法，请参阅此内容 用于 HTML 的简单 Yacc 语法](http://1997.webhistory.org/www.lists/www-html.1995q1/0019.html)

这是另一个简单的 XML 解析器：[XML 语法](http://www.w3.org/XML/9707/parser.y)和[XML 词法分析器](http://www.w3.org/XML/9707/scanner.l)

我的建议：不要从头开始编写所有内容。使用预先存在的工具来帮助您做您想做的事。使用 Lex 和 Yacc 比手写词法分析器/解析器更不容易出错

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T10:05:40.217

你为什么问这个？您想要挑战还是只是想检查您的 html 是否经过验证？如果是后者，您可以使用[http://sourceforge.net/projects/w3cmarkupvalida/](http://sourceforge.net/projects/w3cmarkupvalida/)。

它是用 C# 编写的，并使用 W3 HTML Validator 应用程序 (http://validator.w3.org/) 的 API 来验证 HTML 文档，并作为响应接收它是否有效以及错误和警告。

当然，您也可以直接使用http: [//validator.w3.org](http://validator.w3.org/) /...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:01:59.583

我认为使用堆栈是个好主意。您可以按照以下方法
1\. 读取缓冲区中的一行。（假设您的 HTML 文件格式正确）
2\. 在行中的 '<' 字符处停止。
3\. 读取另一个缓冲区中的字符，直到遇到'>'。
4\. 标签是否包含'/'。如果否，则转到 5，否则转到 6。
5\. 将此标签推入堆栈。
6\. 从堆栈中弹出一个标签，并与刚刚读取的标签进行比较..
7\. GOTO 1 直到文件被完全读取

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T05:24:22.573

使用 CSS/HTML 验证器

*   CSS 验证器：http: [//jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)
*   HTML 验证器：http: [//validator.w3.org/#validate_by_uri](http://validator.w3.org/#validate_by_uri) ...</li>

# javascript - 对 JSON 数据的 Ajax 调用适用于 FF，但不适用于其他浏览器

> ID：13008887
> 
> 赞同：1
> 
> 时间：2012-10-22T09:55:12.570
> 
> 标签：javascript, jquery, ajax, json, firefox

我已经完成了一个返回（有效）JSON 文档的 php 页面。jQuery 代码非常简单：

```
$.ajax({
   url: "http://localhost:8888/rkm/json-jc",
   dataType: "json",
   success: function(data) {
     console.log(data);
     $('li.jcarousel-item-1', context).html(
       '<img src="' + data.nodes['0'].node.vignette + '">'
     );
   }
}); 
```

它在 FF 中工作正常，返回的对象正常 => 请参阅附加的“FF_console”。但是......它在 Chrome、Safari 和 Opera 中不起作用，不会引发错误。返回的数据“小插图”只是未定义 => 请参阅附加的“Chrome_console”。在此先感谢您的帮助 ！

注意：jQuery 版本是 1.3.6 ![铬图像](../Images/22362bc416b7ebe06d10008cd1a9786f.png) ![FF 图像](../Images/88b22383590146f5c87ddac2baea9544.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:08:49.200

我建议你使用最新的 jquery 版本 1.7+

[http://code.jquery.com/jquery-1.8.2.js](http://code.jquery.com/jquery-1.8.2.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:27:15.607

```
 '<img src="' + data.nodes['0'].node.vignette + '">' 
```

应该是

```
 '<img src="' + data.nodes[0].node.vignette + '">' 
```

此外

```
 console.log(data); 
```

看看会很有帮助

```
 console.log(JSON.stringify(data)); 
```

# redis - 根据字段列表中的某个值获取哈希字段

> ID：13008889
> 
> 赞同：2
> 
> 时间：2012-10-22T09:55:23.000
> 
> 标签：redis

在使用哈希的redis中，如何根据条件或字段值获取键的所有相关字段？

像 hash key = details details 具有字段名称、类型 [student、teacher]、class、section 等。

当 type == "Student" 消除带有教师类型的字段时，我需要获取所有详细信息 [hash key] 字段？

redis中可以使用哪些属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T12:02:59.590

Redis 不是关系型数据库系统，没有对二级索引的隐式管理，也没有办法根据哈希字段的值来检索对象。

使用 Redis，您需要具体化您的访问路径。如果您需要按类型索引，那么您必须构建一个集合（每个类型值一个）来引用所有对象。

# c# - 我可以创建一个只接受 URL 中大写字母的 ASP MVC 路由吗？

> ID：13008904
> 
> 赞同：3
> 
> 时间：2012-10-22T09:56:01.917
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我有以下路线：

```
context.MapRoute(
    "content",
    "{page}/{title}",
    new { controller = "Server", action = "Index" },
    new { page = @"^[AFL][0-9A-Z]{4}$" }
); 
```

此路由用于以下页面：

```
/A1234
/F6789
/L0123 
```

然而它也抓住了：`/Admin`这是我不想要的。

我放置了一个临时解决方案，如下所示：

```
context.MapRoute(
    "content",
    "{page}/{title}",
    new { controller = "Server", action = "Index" },
    new { page = @"^[AFL][0-9][0-9A-Z]{3}$" }
); 
```

这只有效，因为现在我所有的页面在第二个数字中都有一个 0。

有没有一种方法可以配置我的路由以接受 A、F 或 L 后跟 4 个大写字符但它不能捕获“dmin”？

不确定是否是这种情况，但我认为正则表达式不应该接受“dmin”，因为它是小写的，我只指定 AZ。但是，当用作 MVC 路由时，它确实需要“dmin”。有谁知道 ASP MVC 是否在内部将其转换为全大写？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T10:13:14.000

## 方案一：自定义路由约束类

默认路由处理在匹配 URL 时会忽略大小写（参见下面的代码），这就是您的案例中的*Admin也匹配的原因。*您应该做的就是编写一个自定义路由约束类，该类实现`IRouteConstraint`接口并`Match`适当地实现方法以区分大小写。

[这是一个让您入门的教程](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-custom-route-constraint-cs)

## 解决方案 2：自定义`Route`类

如果您查看默认`Route`类如何处理约束，这是代码：

```
protected virtual bool ProcessConstraint(HttpContextBase httpContext, object constraint, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
{
    IRouteConstraint routeConstraint = constraint as IRouteConstraint;

    // checks custom constraint class instances
    if (routeConstraint != null)
    {
        return routeConstraint.Match(httpContext, this, parameterName, values, routeDirection);
    }

    // No? Ok constraint provided as regular expression string then?
    string text = constraint as string;
    if (text == null)
    {
        throw new InvalidOperationException(string.Format(CultureInfo.CurrentUICulture, SR.GetString("Route_ValidationMustBeStringOrCustomConstraint"), new object[]
        {
            parameterName,
            this.Url
        }));
    }
    object value;
    values.TryGetValue(parameterName, out value);
    string input = Convert.ToString(value, CultureInfo.InvariantCulture);
    string pattern = "^(" + text + ")$";

    // LOOK AT THIS LINE
    return Regex.IsMatch(input, pattern, RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant);
} 
```

最后一行实际上匹配提供的正则表达式路由约束。如您所见，它忽略了大小写。所以第二种可能的解决方案是编写一个`Route`继承自这个默认`Route`类的新类并覆盖`ProcessConstraint`方法以**不**忽略大小写。其他一切都可以保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:26:37.447

另一种选择是这样的正则表达式：

```
@"^(?!Admin)[AFL][0-9][0-9A-Z]{3}$" 
```

在尝试其余的正则表达式之前，这将排除 Admin 作为可能的匹配项。

# regex - 将 sed 与正则表达式一起用于空格

> ID：13008910
> 
> 赞同：1
> 
> 时间：2012-10-22T09:56:37.513
> 
> 标签：regex, linux, bash, sed

我正在尝试使用`sed`考虑空格来替换字符串。
例子：

```
Hello          World 
```

被替换为

```
Hello George 
```

我试过：

```
sed -e 's/Hello[:space]+World/Hello George/' ./infile > outFile 
```

但它不起作用。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:00:50.230

```
sed -e 's/Hello[[:space:]]\+World/Hello George/' ./infile > outFile 
```

或者

```
sed -e 's/Hello \+World/Hello George/' ./infile > outFile 
```

**注意**：在 OSX 中，您需要

```
sed -E 's/Hello +World/Hello George/' ./infile > outFile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:06:21.597

也许您可以使用 perl：

```
perl -pe 's/Hello\s*World/Hello Goerge/g' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:59:14.890

您可以使用

```
sed -e 's/Hello\s\+World/Hello George/' ./infile > outFile 
```

空格的代码是`\s`，与单词字符的代码相同`\w`。

# android - onPostExecute 的 java.lang.NullPointerException？

> ID：13008918
> 
> 赞同：0
> 
> 时间：2012-10-22T09:56:50.370
> 
> 标签：android, interface, android-asynctask

我有这些类，其中我将 SOAP 请求发送到服务器。我有我的主类、一个 AsyncTask 类、一个解析器类、一个接口。我的问题是我总是得到这个 NullpointerException。我正在尝试做的是在我的主活动中，我将向 AsyncTask 发送一个字符串，然后在 AsyncTask 中将 onPostExecute 的结果，我需要将它传递给 Parser 类，在这部分我遇到了问题。我使用了我之前问题中的接口，但它不起作用。

异步任务类：

```
public class TestAsyncTask extends AsyncTask<String, Void, String> {

public TestInterface delegate = null;
String soapString = "http://-------------"; 
String serverString = "https:-----------";

@Override
protected String doInBackground(String... sString) {
String yourValue = sString[0];
String resString = null; //This will be the storage of the response.

try {

    //Uses URL and HttpURLConnection for server connection
    URL url = new URL(serverString); 
    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection(); 
    urlConnection.setDoOutput(true); 
    urlConnection.setDoInput(true); 
    urlConnection.setUseCaches(false); 
    urlConnection.setChunkedStreamingMode(0); 
    urlConnection.addRequestProperty("SOAPAction", soapString); 
    urlConnection.addRequestProperty("Content-Type", "text/xml; charset=utf-8"); 
    urlConnection.addRequestProperty("Content-Length", "" + yourValue.length()); 
    urlConnection.setRequestMethod(HttpPost.METHOD_NAME); 

    // Using OutputStream and Writer to send a request to the server.
    OutputStream outputStream = urlConnection.getOutputStream(); 
    Writer writer = new OutputStreamWriter(outputStream); 
    writer.write(yourValue); 
    writer.flush(); 
    writer.close(); 

    //Using InputStream to get the response of the request from the server.
    InputStream inPutStream = urlConnection.getInputStream(); 
    BufferedReader buffReader = new BufferedReader(new InputStreamReader(inPutStream)); 
    ByteArrayBuffer byteBuffer = new ByteArrayBuffer(50);

    int resint = urlConnection.getResponseCode(); 

    while ((resint = buffReader.read()) != -1) {
        byteBuffer.append(resint); 
    }

    resString = new String(byteBuffer.toByteArray()); 

    } catch (Exception aException) {
    resString = aException.getMessage(); 
    }

    return resString; 
}

protected void onPostExecute(String aReturnValueString) {
    //I THINK HERE IS WHERE THE PROBLEM EXIST
            delegate.processFinish(aReturnValueString);
}
} 
```

接口，这个我不确定：

```
public interface TestInterface {
  void processFinish(String output);
} 
```

解析器类：

```
public class TestParser implements TestInterface {

TestAsyncTask a= new TestAsyncTask();
TextView oTextView[], aTextView[], pTextView[], dTextView[]; //Create a new TextView array to store the parsing results.
private LinearLayout linearLayout;
int pars;

Context contxt;

//Constructor
public TestParser(Context cContext){
    contxt = cContext; //Pass Context to constructor
}

//Getter for LinearLayout.
    public LinearLayout getLinearLayout(){
        return linearLayout;
    }
    //Setter for LinearLayout.
    public void setLinearLayout(LinearLayout aSetterLinearLayout){
        this.linearLayout = aSetterLinearLayout;
    }

    public void onCreate(Bundle savedInstanceState) {
     a.delegate = this;
    }

 public void processFinish(String output) {
    // TODO Auto-generated method stub
    linearLayout = new LinearLayout(this);

    //The try/catch statement encloses some code and is used to handle errors and exceptions that might occur in that code.
    try {

        //Use SAXParser(Simple API for XML) to handle the parsing of XML(Response). */

        SAXParserFactory saxParF = SAXParserFactory.newInstance(); 
        SAXParser sAXPar = saxParF.newSAXParser(); 
        XMLReader xMLReader = sAXPar.getXMLReader(); 

        // Create handler to handle XML Tags (GBXMLHandler extends DefaultHandler).         
        TestXMLHandler xMLHandler = new TestXMLHandler(); 
        xMLReader.setContentHandler(xMLHandler); 
        InputSource inputSource = new InputSource(new StringReader(output)); 
        xMLReader.parse(inputSource);

        TestData data = TestXMLHandler.aData; 

        int aone = data.getoName().size();
        int atwo = data.getDes().size();

        oTextView = new TextView[aone];  
        aTextView = new TextView[aone]; 
        dTextView = new TextView[atwo];
        pTextView = new TextView[atwo];

        //The for statement provides a compact way to iterate over a range of values.
        for (pars = 0; pars + 1 < atwo; pars++) {

        dTextView[pars] = new TextView(getApplicationContext()); 
        dTextView[pars].setText("Description = " + data.getDes().get(pars)); 
        linearLayout.addView(dTextView[pars]); 

        pTextView[pars] = new TextView(getApplicationContext()); 
        pTextView[pars].setText("RegularSellUnitPrice = " + data.getRegularSellUnitPrice().get(pars)); 
        linearLayout.addView(pTextView[pars]);
        }

        for (pars = 0; pars < aone; pars++){
        oTextView[pars] = new TextView(getApplicationContext()); 
        oTextView[pars].setText("OperatorName = " + data.getoName().get(pars)); 
        linearLayout.addView(oTextView[pars]);

        aTextView[pars] = new TextView(getApplicationContext()); 
        aTextView[pars].setText("type = " + data.getType().get(pars));
        linearLayout.addView(aTextView[pars]);      
        }
    } catch (Exception e) {
        System.out.println("XML Pasing Exception = " + e);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:49:41.327

在我看来，您的`delegate`对象从未被实例化。

您将其声明为`null`然后从不调用`delegate = new TestParser()`

# ruby-on-rails - 使用 Rspec v.1 测试响应 cookie

> ID：13008922
> 
> 赞同：8
> 
> 时间：2012-10-22T09:57:04.613
> 
> 标签：ruby-on-rails, ruby, rspec

当我登录到我的应用程序时，服务器会向我发送回 cookie（凭据和某些应用程序的 cookie）：

```
Response sent 170 bytes of Cookie data:
 Set-Cookie: user_credentials=val; path=/; HttpOnly; Secure

Response sent 554 bytes of Cookie data:
 Set-Cookie: _app_session=otherVal; path=/; HttpOnly; Secure 
```

...然后重定向到主页；

Cookie 包括一些标志：例如`httpOnly`、`Secure`等。

如何测试 cookie 是否包含带有 Rspec 的那些标志？

至少我在哪里可以找到那些饼干？

```
it "should generate cookies with proper flags" do    
    params = Factory.attributes_for(:user,
      :username => "uname",
      :password => "upass"
    )
    # login
    post 'create', params

    response.should redirect_to home_url # => pass

    puts "response cookie = #{response.cookies.inspect}" # => {} // no cookies in response, why?
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T18:30:28.860

控制器规范不会生成/调用*真正的*http 请求，它们只是设置被测控制器并在其上调用请求的操作。没有发出 http 请求，也没有生成*真正的*http 应答。所以你只能在更抽象的层次上测试 Rails 控制器的内部工作。

这些规范中的 cookie 处理相当简单，在如下操作中设置 cookie：

```
def set_cookies
  cookies[:foo]   = 'bar'
  cookies[:lorem] = {:value => 'ipsum', :expires => 3.days.from_now}

  render :nothing => true
end 
```

导致规范中可访问以下值：

```
it "should set some cookie values" do
  get :set_cookies

  # response.cookies looks like this:
  # {'foo' => 'bar', 'lorem' => 'ipsum'}     

  response.cookies['foo'].should == 'bar'
  response.cookies['lorem'].should == 'ipsum'
end 
```

要测试您在响应中看到的 cookie 标志类型，您必须使用执行*真正*http 请求的东西。也许你可以使用水豚宝石呢？

# vb.net - VB.net 数据绑定器

> ID：13008923
> 
> 赞同：1
> 
> 时间：2012-10-22T09:57:04.693
> 
> 标签：vb.net

我在 vb.net 中遇到了 DataBinder 的问题

```
<ItemTemplate><%#IIf(DataBinder.Eval(Container.DataItem, "NMKAR") > 1, "Yes", "No")%></ItemTemplate> 
```

我要选择，如果 NMKAR 有多个相同的值将返回“是”

前任 ：

> ## NMKAR
> 
> 一
> 
> 一
> 
> 二

所以结果将是

> 一个 | 是的
> 
> 二 | 不

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:20:17.807

我不太确定我是否正确理解了您的问题，所以我将假设您想查看 NMKAR 的 COUNT 值。如果是这种情况，请记住绑定的重复控件将显示结果集中可用的行数。

您需要更新获取数据的方法。因此，如果您使用的是 T-SQL，您应该更新您的选择以获取 NMKAR 的不同值以及它在结果集中出现的次数：

```
SELECT NMKAR, COUNT(NMKAR) AS NMKAR_COUNT FROM [TableName] GROUP BY NMKAR 
```

如果您使用的是集合，请遍历集合，获取每个值的第一个唯一实例并累积每个值的总计数。

我还建议在评估条件时将绑定的对象转换为正确的数字类型，以便不会“猜测”该类型。

```
<%#IIf(CInt(DataBinder.Eval(Container.DataItem, "NMKAR")) > 1, "Yes", "No").ToString()%> 
```

# c# - 以这种方式用 Ninject 注入当前用户 - 有什么缺点吗？

> ID：13008924
> 
> 赞同：7
> 
> 时间：2012-10-22T09:57:11.400
> 
> 标签：c#, asp.net-mvc, dependency-injection, ninject

我正在使用这个 ninject 绑定：

```
kernel.Bind<ICurrentUser>().To<CurrentUser>()
    .InRequestScope()
    .WithConstructorArgument("principal", 
        context => (RolePrincipal HttpContext.Current.User); 
```

在我的服务层装饰器之一中，我只需将“ICurrentUser currentUser”添加到构造函数以获取对象及其工作。

这种实现有什么缺点，还是有更好的方法来实现他的环境上下文？对于每个请求，都会创建用户对象——如果它是匿名用户也是如此。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T10:18:00.770

*环境上下文*的使用非常有限，使用构造函数注入通常会产生最佳结果。

*例如，想想环境上下文*的使用如何使单元测试复杂化。使用环境上下文通常意味着您需要在测试设置中更改该上下文并在测试拆解中将其删除。但是单元测试框架通常会在多个线程上运行一组测试（例如 MSTest），当您使用这样的静态变量时，这意味着您的测试会相互影响。

[更新] 由于这个和其他原因，[.NET 第二版中的依赖注入](https://manning.com/seemann2)一书将*环境上下文*称为反模式。

这一切都可以通过在构造函数中注入所有依赖项来简单地克服。或者让我们从不同的角度来看待它。如果你的类依赖于这个服务，为什么不注入到构造函数中呢？

唯一让我担心的是显式构造函数参数注册。这使您的配置更加脆弱。由于您`CurrentUser`依赖于 a `RolePrincipal`，因此直接注册它是合理的：

```
kernel.Bind<ICurrentUser>().To<CurrentUser>().InRequestScope();

kernel.Bind<RolePrincipal>()
    .ToMethod(c => (RolePrincipal)HttpContext.Current.User); 
```

# asp.net-mvc - 从对象中删除子对象以进行 JSON 序列化

> ID：13008927
> 
> 赞同：0
> 
> 时间：2012-10-22T09:57:14.067
> 
> 标签：asp.net-mvc, json, projection, javascriptserializer

我有一个带有孩子的对象，我正在使用 JavaScriptSerializer 将其转换为 JSON。我正在使用 MVC 并在视图中使用 JavaScriptSerializer，如下所示：

```
@Html.Raw(serializer.Serialize(Model.Designs) 
```

我的“设计”对象有子“DesignDeliveries”，但我需要从 JSON 字符串中删除这些，所以我尝试使用投影但无法获得我需要的格式

所以我的设计对象如下：

```
[{
"BookingDesignId": "e90e9500-0a6a-4d1b-a82a-fa7ca2d7c034",
"DesignName": "Design 600",
"Quantity": 100,
"DesignDeliveries": [{
    "BookingId": "3706a896-3b8f-454f-acc8-6540441a3e4a",
    "Quantity": 50,
    "BookingDesignId": "e90e9500-0a6a-4d1b-a82a-fa7ca2d7c034",
    "DepotId": "9"
},
{
    "BookingId": "3706a896-3b8f-454f-acc8-6540441a3e4a",
    "Quantity": 50,
    "BookingDesignId": "e90e9500-0a6a-4d1b-a82a-fa7ca2d7c034",
    "DepotId": "18"
}]
}]; 
```

但是，我需要：

```
[{
"BookingDesignId": "e90e9500-0a6a-4d1b-a82a-fa7ca2d7c034",
"DesignName": "Design 600",
"Quantity": 100,
"DesignDeliveries": []; 
```

有谁知道如何实现这一目标？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:21:53.903

克隆**Model.Designs**，清除您的 DesignDeliveries 集合，**再次**序列化克隆的设计。

# android - Android VideoView 不播放连续视频

> ID：13008929
> 
> 赞同：5
> 
> 时间：2012-10-22T09:57:16.580
> 
> 标签：android, surfaceview, android-videoview

我想连续播放 2 个视频。第一个视频总是播放得很好。完成后，您可以在日志中看到它设置了新的视频 URL，但是 SurfaceView 会抛出一个错误，并且 VideoView 只是冻结在第一个视频的最后一帧。没有其他事情发生。有什么想法吗 ？谢谢 ！

LE：令人惊讶的是，第二个视频调用了 OnPreparedListener。

LE2：有时第二个视频播放得很好，有时却没有……而且我没有在它工作和不工作之间更改一行代码。纯属随机...

LE3：快速解决方案是在设置新视频 URL 之前添加此行：

```
mVideoView.setVisibility(View.GONE); 
```

来自 OnCompletionListener 的代码：

```
setCurrentPlaybackUrl(); // sets mCurrentMediaUrl to the second video URL
mVideoView.setVideoPath(mCurrentMediaUrl);
mVideoView.start(); 
```

这是第一个视频完成播放时的日志输出：

```
10-22 12:32:35.762: I/AwesomePlayer(126): setDataSource_l('https://xx/TestingVideo_lo.mp4')
10-22 12:32:35.762: E/BufferQueue(123): [SurfaceView] connect: already connected (cur=3, req=3)
10-22 12:32:35.762: E/MediaPlayerService(126): setVideoSurfaceTexture failed: -22
10-22 12:32:35.762: E/BufferQueue(123): [SurfaceView] connect: already connected (cur=3, req=3)
10-22 12:32:35.762: E/MediaPlayerService(126): setVideoSurfaceTexture failed: -22 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:09:26.297

试试`onCompletion(MediaPlayer mp)`，添加`mp.stop()`，然后做你的东西。

编辑：我已经尝试过了，它正在工作：

```
videoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
@Override
public void onCompletion(MediaPlayer mp) {
       play_video();
}
});

play_video(); 
```

`play_video`以下方法在哪里：

```
void play_video() {
    Uri uri = Uri.parse(video_link);
    videoView.setVideoURI(uri);    
    videoView.requestFocus();
    videoView.setVisibility(View.VISIBLE);
    videoView.start();

 } 
```

唯一的区别是我播放了两次相同的视频，而不是两个不同的视频。

# .net - 服务引用更改时 app.config 不兼容

> ID：13008932
> 
> 赞同：0
> 
> 时间：2012-10-22T09:57:20.120
> 
> 标签：.net, vb.net, web-services

我收到有关项目中 app.config 文件的警告，因为我使用一些不同的方法和配置将服务引用升级到了较新的版本。有没有一种方法可以生成一个新的 app.config 文件，而不必更改它的所有绑定和端点，因为那会非常累人。我想一定有办法。

这是我的 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.diagnostics>
        <sources>
            <!-- This section defines the logging configuration for My.Application.Log -->
            <source name="DefaultSource" switchName="DefaultSwitch">
                <listeners>
                    <add name="FileLog"/>
                    <!-- Uncomment the below section to write to the Application Event Log -->
                    <!--<add name="EventLog"/>-->
                </listeners>
            </source>
        </sources>
        <switches>
            <add name="DefaultSwitch" value="Information" />
        </switches>
        <sharedListeners>
            <add name="FileLog"
                 type="Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL"
                 initializeData="FileLogWriter"/>
            <!-- Uncomment the below section and replace APPLICATION_NAME with the name of your application to write to the Application Event Log -->
            <!--<add name="EventLog" type="System.Diagnostics.EventLogTraceListener" initializeData="APPLICATION_NAME"/> -->
        </sharedListeners>
    </system.diagnostics>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="Apsis Newsletter Pro v3 APISoap" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
            <customBinding>
                <binding name="Apsis Newsletter Pro v3 APISoap12">
                    <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
                        messageVersion="Soap12" writeEncoding="utf-8">
                        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    </textMessageEncoding>
                    <httpTransport manualAddressing="false" maxBufferPoolSize="524288"
                        maxReceivedMessageSize="65536" allowCookies="false" authenticationScheme="Anonymous"
                        bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                        keepAliveEnabled="true" maxBufferSize="65536" proxyAuthenticationScheme="Anonymous"
                        realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false"
                        useDefaultWebProxy="true" />
                </binding>
            </customBinding>
        </bindings>
        <client>
            <endpoint address="http://api.anpdm.com/ExternalAPIService.asmx"
                binding="basicHttpBinding" bindingConfiguration="Apsis Newsletter Pro v3 APISoap"
                contract="Apsis5.ApsisNewsletterProv3APISoap" name="Apsis Newsletter Pro v3 APISoap" />
            <endpoint address="http://api.anpdm.com/ExternalAPIService.asmx"
                binding="customBinding" bindingConfiguration="Apsis Newsletter Pro v3 APISoap12"
                contract="Apsis5.ApsisNewsletterProv3APISoap" name="Apsis Newsletter Pro v3 APISoap12" />
        </client>
    </system.serviceModel>
</configuration> 
```

这些是警告：

**警告 1**：自定义工具警告：无法导入 wsdl：portType 详细信息：运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.XmlSerializerMessageContractImporter 错误：引用类型'http://schemas.xmlsoap.org/soap/encoding /:Array' 仅对编码的 SOAP 有效。错误源的 XPath：//wsdl:definitions[@targetNamespace='http://api.anpdm.com/']/wsdl:portType[@name='Apsis_x0020_Newsletter_x0020_Pro_x0020_v3_x0020_APIHttpGet'] C:\Users\Pedram\Desktop\Apsis5 ( Avanza)\Apsis5\Service References\Apsis5\Reference.svcmap 1 1 Apsis5

**警告 2**自定义工具警告：无法导入 wsdl:binding 详细信息：导入 wsdl:binding 所依赖的 wsdl:portType 时出错。wsdl:portType 的 XPath：//wsdl:definitions[@targetNamespace='http://api.anpdm.com/']/wsdl:portType[@name='Apsis_x0020_Newsletter_x0020_Pro_x0020_v3_x0020_APIHttpGet'] 错误源的 XPath：//wsdl:definitions [@targetNamespace='http://api.anpdm.com/']/wsdl:binding[@name='Apsis_x0020_Newsletter_x0020_Pro_x0020_v3_x0020_APIHttpGet'] C:\Users\Pedram\Desktop\Apsis5 (Avanza)\Apsis5\Service References\Apsis5\参考.svcmap 1 1 Apsis5

**警告 3**自定义工具警告：无法导入 wsdl:port 详细信息：导入 wsdl:port 所依赖的 wsdl:binding 时出错。XPath 到 wsdl:binding: //wsdl:definitions[@targetNamespace='http://api.anpdm.com/']/wsdl:binding[@name='Apsis_x0020_Newsletter_x0020_Pro_x0020_v3_x0020_APIHttpGet'] XPath 到错误源: //wsdl:definitions [@targetNamespace='http://api.anpdm.com/']/wsdl:service[@name='Apsis_x0020_Newsletter_x0020_Pro_x0020_v3_x0020_API']/wsdl:port[@name='Apsis_x0020_Newsletter_x0020_Pro_x0020_v3_x0020_APIHttpDesktop'] Apsis5 (Avanza)\Apsis5\Service References\Apsis5\Reference.svcmap 1 1 Apsis5

**警告 4**自定义工具警告：无法导入 wsdl:portType 详细信息：运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.XmlSerializerMessageContractImporter 错误：引用类型'http://schemas.xmlsoap.org/soap/encoding/ :Array' 仅对编码的 SOAP 有效。错误源的 XPath：//wsdl:definitions[@targetNamespace='http://api.anpdm.com/']/wsdl:portType[@name='Apsis_x0020_Newsletter_x0020_Pro_x0020_v3_x0020_APIHttpPost'] C:\Users\Pedram\Desktop\Apsis5 ( Avanza)\Apsis5\Service References\Apsis5\Reference.svcmap 1 1 Apsis5

**警告 5**自定义工具警告：无法导入 wsdl:binding 详细信息：导入 wsdl:binding 所依赖的 wsdl:portType 时出错。wsdl:portType 的 XPath：//wsdl:definitions[@targetNamespace='http://api.anpdm.com/']/wsdl:portType[@name='Apsis_x0020_Newsletter_x0020_Pro_x0020_v3_x0020_APIHttpPost'] 错误源的 XPath：//wsdl:definitions [@targetNamespace='http://api.anpdm.com/']/wsdl:binding[@name='Apsis_x0020_Newsletter_x0020_Pro_x0020_v3_x0020_APIHttpPost'] C:\Users\Pedram\Desktop\Apsis5 (Avanza)\Apsis5\Service References\Apsis5\参考.svcmap 1 1 Apsis5

**警告 6**自定义工具警告：无法导入 wsdl:port 详细信息：导入 wsdl:port 所依赖的 wsdl:binding 时出错。wsdl:binding 的 XPath：//wsdl:definitions[@targetNamespace='http://api.anpdm.com/']/wsdl:binding[@name='Apsis_x0020_Newsletter_x0020_Pro_x0020_v3_x0020_APIHttpPost'] 错误源的 XPath：//wsdl:definitions [@targetNamespace='http://api.anpdm.com/']/wsdl:service[@name='Apsis_x0020_Newsletter_x0020_Pro_x0020_v3_x0020_API']/wsdl:port[@name='Apsis_x0020_Newsletter_x0020_Pro_x0020_v3_x0020_APIHttpPost'P'] Apsis5 (Avanza)\Apsis5\Service References\Apsis5\Reference.svcmap 1 1 Apsis5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:51:52.453

我没有找到根本问题，但我尝试将我的服务添加为网络参考，一切都开始工作了。

# ios - iOS 可访问性 - 在自定义视图下禁用可访问性

> ID：13008937
> 
> 赞同：0
> 
> 时间：2012-10-22T09:57:34.520
> 
> 标签：ios, accessibility

我有可以是半屏大小的自定义视图。
它出现在用户界面的顶部。
我想禁用此视图涵盖的控件的可访问性。
而且我还想让自定义半屏视图上的控件可以访问。

有可能做到吗？

PS 我不想为自定义视图实现 UIAccessibilityContainer 协议 - 因为我希望它的子视图可以通过默认行为访问。

谢谢你。

更新：是否可以取消可访问性触摸？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-02-07T20:05:48.873

迅速：

```
view.isAccessibilityElement = false 
```

您也可以隐藏所有子视图：

```
view.accessibilityElementsHidden = true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T15:04:44.097

可以像这样禁用辅助功能：

```
[aView setIsAccessibilityElement:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-01T09:03:10.950

如果您确定视图不应该被辅助技术看到，最好的方法是`isAccessibilityElement`在您的自定义视图中覆盖并返回`NO`。

# php - 如何在 fwrite 中包含日期？

> ID：13008938
> 
> 赞同：0
> 
> 时间：2012-10-22T09:57:35.987
> 
> 标签：php, forms, email, fwrite

我目前有一个 fwrite 下面会在填写表格时发生，我想将表格填写的当前日期放在 fwrite 中，我该怎么做？

```
fwrite($fh, "$firstname\r\n $lastname\r\n $email\r\n $zipcode\r\n $feedback\r\n \r\n"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:59:30.763

试试这样：

```
$date=date("Y-m-d H:i:s");
fwrite($fh, "$firstname\r\n $lastname\r\n $email\r\n $zipcode\r\n $feedback\r\n $date\r\n \r\n"); 
```

# jsf - ICEfaces/Seam 文件上传组件不上传文件

> ID：13008943
> 
> 赞同：4
> 
> 时间：2012-10-22T09:57:50.213
> 
> 标签：jsf, jsf-2, seam, icefaces

**更新**

我目前正在 ICEfaces 论坛上解决我的问题 - 遗憾的是，提供的选项现在都没有导致解决方案，但它们确实让我对整个 JSF 主题有了更多的了解（为此归功于 BalusC，因为经常 ：-））。

如果问题最终得到解决，我会尽量保持这个线程最新并发布答案，以帮助可能遇到它的其他人。

到目前为止，我的发现是：

*   需要禁用 Seam Multipart Filter，因为它会阻止 fileEntry-component 正常工作
*   我的应用程序中仍然存在一些令人讨厌的库问题，导致（静默）类加载问题：存在 2 个 icefaces-ace.jar 文件，一个在 EAR/lib 中，一个在 EAR/WAR/WEB-INF/lib 中。从 WEB-INF 中删除一个会导致组件什么都不做，从 EAR/lib 中删除一个会导致我的应用程序不再部署。

将所有前端 jar（icefaces.jar、icefaces-ace.jar、icefaces-compat.jar）从 EAR/lib 移动到 WEB-INF/lib 时，我收到 EAR 的 jar 部分的各种 ClassNotFoundExceptions：ValueChangeEvent、RowSelectorEvent 等. 找不到（这意味着所有这些事件都从视图进入后端）。例子：

```
12:12:42,145 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-16) MSC00001: 
Failed to start service jboss.deployment.subunit."myApp.ear"."myApp.jar".POST_MODULE: 
org.jboss.msc.service.StartException in service 
jboss.deployment.subunit."myApp.ear"."myApp.jar".POST_MODULE: Failed to process phase 
POST_MODULE of subdeployment "myApp.jar" of deployment "myApp.ear"
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_06]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_06]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_06]

Caused by: java.lang.RuntimeException: Error getting reflective information for class my.company.myApp.myExampleBean with ClassLoader ModuleClassLoader for Module "deployment.myApp.ear.myApp.jar:main" from Service Module Loader
at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:70) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ee.metadata.MethodAnnotationAggregator.runtimeAnnotationInformation(MethodAnnotationAggregator.java:58)
at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.handleAnnotations(InterceptorAnnotationProcessor.java:85)
at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.processComponentConfig(InterceptorAnnotationProcessor.java:70)
at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.deploy(InterceptorAnnotationProcessor.java:55)
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
... 5 more

Caused by: java.lang.NoClassDefFoundError: com/icesoft/faces/component/ext/RowSelectorEvent
at java.lang.Class.getDeclaredMethods0(Native Method) [rt.jar:1.7.0_06]
at java.lang.Class.privateGetDeclaredMethods(Class.java:2442) [rt.jar:1.7.0_06]
at java.lang.Class.getDeclaredMethods(Class.java:1808) [rt.jar:1.7.0_06]
at org.jboss.as.server.deployment.reflect.ClassReflectionIndex.<init>(ClassReflectionIndex.java:65) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:66) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
... 10 more
Caused by: java.lang.ClassNotFoundException: com.icesoft.faces.component.ext.RowSelectorEvent from [Module "deployment.myApp.ear.myApp.jar:main" from Service Module Loader]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
... 15 more 
```

**整个故事**

我正在开发一个 Web 应用程序，使用 Seam 2.3 和 ICEfaces 3.1.0。这意味着，正在使用 JSF2。

我的应用程序作为 EAR 部署在 JBoss AS 7.1.0 上，包含一个用于应用程序逻辑的 JAR 和一个用于所有视图相关内容的 WAR。

我最近从 Seam 2.1.2 迁移到 Seam 2.3 和 ICEfaces 1.8.2 到 3.1.0。这一步很糟糕，但现在一切正常，抛开一些小问题。

唯一的大问题是，当我使用组件上传文件时，无论我使用 Seam 组件还是 ICEfaces 组件 - 在 Seam 中，上传的文件始终为空，而在 ICEfaces 中，我的 fileEntryListener-Method 永远不会被调用。

**使用 ICEfaces：**

在 2.X 之前的 ICEfaces 版本中，有一个`ice:inputFile`-component 已被 2.X 删除并替换为`ace:fileEntry`.

InputFile 运行良好，但 FileEntry 没有。我的问题与 JSF 中描述的完全相同 [：使用 Icefaces 组件上传文件](https://stackoverflow.com/questions/10031300/jsf-issues-with-file-upload-using-icefaces-component)的问题 - 从不调用 fileEntryListener。我在那里尝试了建议（在周围的表单上使用 enctype="multipart/form-data" ，`h:commandButton`用于表单提交），但它没有用。提供的唯一解决方案是切换到 Richfaces，这对我来说不是一个选择。

**接缝：**

很高兴，Seam 有它自己的内置文件上传组件，`s:fileUpload`.

它也不起作用，但至少向我展示了一个可以进一步观察的地方。在调试这个组件的doDecode-Methods时，发现我的请求没有MultipartRequest。疯狂的事！所有用于上传文件的表单都将 enctype 声明为 multipart/form-data。我认为，当我尝试使用 ICEfaces 组件时也会发生同样的情况 - 没有多部分请求，这导致没有调用任何侦听器。

所以：我怎样才能让它工作？没有请求作为 MultipartRequest 进来有什么意义？我错过了 web/components.xml 中的某些内容吗？

**网页.xml：**

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xmlns/
javaee/web-app_3_0.xsd"
version="3.0">
<listener>
    <listener-class>org.jboss.seam.servlet.SeamListener</listener-class>
</listener>

<filter>
    <filter-name>Seam Filter</filter-name>
    <filter-class>org.jboss.seam.servlet.SeamFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>Seam Filter</filter-name>
    <url-pattern>*.seam</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/icefaces/*</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.seam</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>Seam Resource Servlet</servlet-name>
    <servlet-class>org.jboss.seam.servlet.SeamResourceServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Seam Resource Servlet</servlet-name>
    <url-pattern>/seam/resource/*</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>Resource Servlet</servlet-name>
    <servlet-class>com.icesoft.faces.webapp.CompatResourceServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Resource Servlet</servlet-name>
    <url-pattern>/xmlhttp/*</url-pattern>
</servlet-mapping>

<session-config>
    <session-timeout>60</session-timeout>
</session-config>

<context-param>
    <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
    <param-value>true</param-value>
</context-param>

<context-param>
    <param-name>facelets.DEVELOPMENT</param-name>
    <param-value>true</param-value>
</context-param>

<context-param>
    <param-name>com.icesoft.faces.actionURLSuffix</param-name>
    <param-value>.seam</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.FACELETS_REFRESH_PERIOD</param-name>
    <param-value>-1</param-value>
</context-param>

<context-param>
    <param-name>com.icesoft.faces.synchronousUpdate</param-name>
    <param-value>false</param-value>
</context-param>

<context-param>
    <param-name>com.icesoft.faces.doJSFStateManagement</param-name>
    <param-value>true</param-value>
</context-param>

<context-param>
    <param-name>com.icesoft.faces.standardRequestScope</param-name>
    <param-value>true</param-value>
</context-param>

<context-param>
    <param-name>com.icesoft.faces.uploadDirectory</param-name>
    <param-value>upload</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.VALIDATE_EMPTY_FIELDS</param-name>
    <param-value>false</param-value>
</context-param> 
```

**components.xml（省略 Seam 2.3 命名空间声明**

```
<core:init jndi-pattern="java:app/myApp/#{ejbName}" debug="false"
    distributable="false" />

<component class="org.jboss.seam.transaction.EjbSynchronizations"
    jndi-name="java:app/jboss-seam/EjbSynchronizations" />

<core:manager concurrent-request-timeout="500"
    conversation-timeout="90000000" conversation-id-parameter="cid"
    parent-conversation-id-parameter="pid" />

<web:hot-deploy-filter url-pattern="*.seam" />

<web:multipart-filter create-temp-files="true" 
    max-request-size="1000000" 
    url-pattern="/*"/>

<persistence:managed-persistence-context
    name="entityManager" auto-create="true" persistence-unit-jndi-name="java:/myAppEntityManagerFactory" />

<security:identity authenticate-method="#{authenticator.authenticate}" />
<security:remember-me enabled="true" />

<security:rule-based-permission-resolver
    security-rules="#{securityRules}" />

<drools:rule-base name="securityRules">
    <drools:rule-files>
        <value>/security.drl</value>
    </drools:rule-files>
</drools:rule-base>

<async:quartz-dispatcher />

<factory name="sessionTimeoutSeconds" scope="SESSION"
    value="#{facesContext.externalContext.getSession(true).getMaxInactiveInterval()}" />

<factory name="basePath"
    value="#{facesContext.externalContext.request.scheme}://#{facesContext.externalContext.request.serverName}:
                #{facesContext.externalContext.request.serverPort}#{facesContext.externalContext.request.contextPath}" />

<factory name="contextPath"
    value="#{facesContext.externalContext.request.contextPath}" /> 
```

**示例 JSF 源代码（Seam）**

```
<h:form enctype="multipart/form-data">
    <s:decorate>
    <s:fileUpload data="#{uploadBean.fileData}"
        contentType="#{uploadBean.contentType}"
            fileName="#{uploadBean.fileName}" />
    <h:commandButton value="Upload File" type="submit" />
   </s:decorate>
</h:form> 
```

**示例 JSF 源代码（ICEfaces）**

```
<h:form enctype="multipart/form-data">
    <ace:fileEntry id="file-entry" relativePath="/files/"
            fileEntryListener="#{uploadBean.uploadFile}"
        useSessionSubdir="true" />

    <h:commandButton id="submit" type="submit" value="Send File" />
</h:form> 
```

JSF 映射到一个 Seam 组件，其中有一个用于 fileData 的 byte[] 和一个用于 fileName 和 contentType 的 String。fileEntryListener 映射到一个以 a`FileEntryEvent`作为输入的 void 方法。

* * *

**更新**

只是为了让您了解最新情况，到目前为止我的发现：

考虑到 BalusC 的回答，我更深入地研究了过滤器的东西。我已经尝试添加/删除 Seam Multipart Filter，但现在我发现当我将它添加到 components.xml 并通过显式**禁用**它时

```
<web:multipart-filter disabled="true"/> 
```

至少 ICEfaces 发生了一些事情：FileEntryPhaseListener 抛出异常，这是以前从未发生过的：

```
09:26:19,124 严重 [javax.enterprise.resource.webcontainer.jsf.context] (http-
localhost-127.0.0.1-8080-2) JSF1071: javax.faces.event.AbortProcessingException erfasst
während beforePhase()-Verarbeitung von RENDER_RESPONSE 6 : UIComponent-ClientId=, Message=/
模板/患者/文档/实例化/documentInsertPopup.xhtml @135,98
fileEntryListener="#{uploadBean.fileUploadListener}":
找不到方法：
my.company.package.stuff.UploadBean@313d
62f1.fileUploadListener(org.icefaces.ace.component.fileentry.FileEntryEvent)

09:26:19,126 严重 [javax.enterprise.resource.webcontainer.jsf.context] (http-
localhost-127.0.0.1-8080-2) /template/upload.xhtml @135,98 fileEntryListener="#
{uploadBean.fileUploadListener}”：找不到方法：
my.company.package.stuff.UploadBean@313d
62f1.fileUploadListener（org.icefaces.ace.component.fileentry.FileEntryEvent）：
javax.faces.event.AbortProcessingException: /upload.xhtml @135,98 fileEntryListener="#
{uploadBean.fileUploadListener}”：找不到方法：
my.company.package.stuff.UploadBean@313d
62f1.fileUploadListener(org.icefaces.ace.component.fileentry.FileEntryEvent)

    在 org.icefaces.ace.component.fileentry.FileEntry.broadcast(FileEntry.java:350)
[icefaces-ace.jar:]
    在 org.icefaces.ace.component.fileentry.FileEntryPhaseListener$1.visit(FileEntryPhaseListener.java:95) [icefaces-ace.jar:]
    在 com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183) [javax.faces.jar:2.1.4-FCS]
    在 javax.faces.component.UIComponent.visitTree(UIComponent.java:1612) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    在 javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    在 javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    在 javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    在 javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    在 javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    在 javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    在 javax.faces.component.UIForm.visitTree(UIForm.java:371) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    在 javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    在 javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    在 org.icefaces.ace.component.fileentry.FileEntryPhaseListener.beforePhase(FileEntryPhaseListener.java:100) [icefaces-ace.jar:]
    在 com.sun.faces.lifecycle.Phase.handleBeforePhase(Phase.java:228) [javax.faces.jar:2.1.4-FCS]
    在 com.sun.faces.lifecycle.Phase.doPhase(Phase.java:99) [javax.faces.jar:2.1.4-FCS]
    在 com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [javax.faces.jar:2.1.4-FCS]
    在 javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    在 org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83) [jboss-seam.jar:2.3.0.Final]
    在 org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60) [jboss-seam.jar:2.3.0.Final]
    在 org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.Final]
    在 org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64) [jboss-seam.jar:2.3.0.Final]
    在 org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.Final]
    在 org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45) [jboss-seam.jar:2.3.0.Final]
    在 org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.Final]
    在 org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40) [jboss-seam.jar:2.3.0.Final]
    在 org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.Final]
    在 org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158) [jboss-seam.jar:2.3.0.Final]
    在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    在 org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    在 org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    在 java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_06]

```

至少这是值得一看的。如果我像这样使用 fileEntryListener

```
fileEntryListener="#{uploadBean.fileUploadListener}" 
```

如果我使用，则会引发上述异常：

```
fileEntryListener="#{uploadBean.fileUploadListener()}" 
```

它抱怨该方法需要参数，如果我像这样使用它：

```
fileEntryListener="#{uploadBean.fileUploadListener(null)}" 
```

没有抛出异常，但由于事件为空，没有文件到达我的 UploadBean。闻起来像一些图书馆的问题，但至少还有别的东西要看。

**上传bean**

这里没有发生太多事情，很简单：

```
@Stateful
@Name("uploadBean")
@Scope(ScopeType.SESSION)
@JndiName(value = "java:app/myApp.jar/UploadBean")
public class UploadBean implements IUploadBean
{
public void fileUploadListener(FileEntryEvent event)
{
    System.out.println("listener called!");
}   
 } 
```

监听器也在 bean 的接口中声明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:31:14.400

首先是一些技术背景信息：在即将到来的 JSF 2.2 之前，JSF 本身并不支持`multipart/form-data`请求。所以提供文件上传组件的组件库必须自己来自定义`Filter`。这应该正确解析`multipart/form-data`请求并将所有必要的常规数据存储在 HTTP 请求参数映射和上传的文件中作为请求属性。这样，JSF 可以继续以`request.getParameter()`通常的方式用于常规数据，并且组件库本身可以获取上传的文件作为请求属性。

在 Seam 的情况下`<s:fileUpload>`，您需要`org.jboss.seam.web.MultipartFilter`执行`multipart/form-data`解析工作。我从来没有使用过 Seam（也没有 ICEfaces），但[谷歌](https://www.google.com/search?q=s%3afileupload+multipart+filter)告诉我你在 webapp 中基本上需要这个`web.xml`

```
<filter>
    <filter-name>Seam Multipart Filter</filter-name>
    <filter-class>org.jboss.seam.web.MultipartFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>Seam Multipart Filter</filter-name>
    <url-pattern>*.seam</url-pattern>
</filter-mapping> 
```

或者在 Seam 中`components.xml`：

```
<web:multipart-filter url-pattern="*.seam" /> 
```

ICEfaces 组件必须配置类似的过滤器。缺少 ICEfaces 3.x 文档（或者我的 Google/icefaces.com 搜索技能不好），所以我无法详细说明这一点。

需要记住的重要一点是，一个 HTTP 请求只能被解析一次（客户端只会发送一次，而不是多次），因此您不能`multipart/form-data`在同一个请求上同时使用两个解析器。*在第一个之后*启动的那个会得到一个空的请求体，它不能被解析成任何合理的东西。因此，如果您使用的是使用后一种过滤器的组件，那么您将不会在模型中得到任何东西。确保您没有意外或通过实验配置两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:05:43.933

也许它可能会有所帮助。我所做的是将我的耳朵项目重新部署为战争。

删除 web.xml 中的多部分过滤并将其添加到 components.xml ：

```
<web:multipart-filter disabled="true"/> 
```

我的组件示例：

```
<ace:panel id="pnl">
        <h:form> 
            <ice:panelGrid columns="2" bgcolor="#0063AA"> 
                <ace:fileEntry id="file-entry" useOriginalFilename="true" immediate="true"
                required="true" requiredMessage="The file is required to submit this form." 
                 fileEntryListener="#{imageHome.sampleListener}"/>
                <h:commandButton  type="submit" value="Upload" />
            </ice:panelGrid>
        </h:form>
    </ace:panel> 
```

我的 FileEntryEvent 已被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T20:58:00.713

我仍在调查这个，但它看起来像

```
<web:multipart-filter disabled="true" url-pattern="bleh"/> 
```

在我的测试用例 components.xml 中没有按预期工作，但是

```
<component class="org.jboss.seam.web.MultipartFilter">
    <property name="disabled">true</property>
</component> 
```

正在努力禁用接缝 MultipartFilter。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T21:09:41.837

我不使用 Seam，但我注意到我定义为 JSF bean 的 bean 使用的注释与您使用的不同。

对于 bean，我使用 @ManagedBean。对于范围，我使用@SessionScoped。

# mysql - 如何为重复记录编写更新查询

> ID：13008949
> 
> 赞同：0
> 
> 时间：2012-10-22T09:57:58.843
> 
> 标签：mysql

我对 MySQL 的了解非常基础，我在处理复杂的查询时遇到了困难——对我来说，以下问题很复杂——希望它不适合你！

我一直在将企业导入我的数据库，其中一些具有相同的公司名称。例如，我们在表中有两个 Subway 分行，它们都有不同的地址。

我想将公司名称设置为“公司名称”+“城镇”，所以我们最终得到了唯一的字段：

*   伦敦地铁
*   地铁 曼彻斯特

到目前为止，我所做的就是检查哪些公司名称出现在数据库中两次：

```
SELECT CompanyName , count( CompanyName )
FROM directorydata
GROUP BY CompanyName 
HAVING count( CompanyName ) >1 
```

如何使用当前值以及 Town 字段更新每个 CompanyName 字段？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:07:23.813

```
UPDATE directoryData 
   SET CompanyName = CONCAT(CONCAT(CompanyName, ' '), Town)
 WHERE CompanyName in (
                    SELECT CompanyName 
                      FROM directoryData
                      GROUP BY CompanyName
                      HAVING count(CompanyName)>1
                      ) 
```

编辑：你是对的，根据[MySQL #1093 - 你不能在 FROM 子句中为更新指定目标表“赠品”，](https://stackoverflow.com/questions/8333376/you-cant-specify-target-table-table-name-for-update-in-from-clause)如果更新更改了 where 中检查的值，引擎可能会中断（你更新了第一个地铁记录，然后第二个不再匹配 count()>1 子句...)

那么，让我们尝试另一种方式：

```
UPDATE directoryData 
   SET CompanyName = (
         CASE WHEN (
                    SELECT count(CompanyName) 
                      FROM directoryData
                      GROUP BY CompanyName
                      HAVING count(CompanyName)
                   )
              >1
              THEN CONCAT(CONCAT(CompanyName, ' '), Town)
              ELSE CompanyName
              END
         ) 
```

我不能尝试，我在这里手工写了这个，希望对你有帮助......

编辑2：

使用两个表进行一次性任务（因为以前的解决方案不适用于 MySql）：

```
UPDATE directoryData 
   SET CompanyName = CONCAT(CONCAT(CompanyName, ' '), Town)
 WHERE CompanyName in (
                    SELECT CompanyName 
                      FROM directoryData_CLONED
                      GROUP BY CompanyName
                      HAVING count(CompanyName)>1
                      ) 
```

# kernel - 如何为具有不同工作项的两个不同内核定义两倍全局大小？

> ID：13008950
> 
> 赞同：0
> 
> 时间：2012-10-22T09:58:01.647
> 
> 标签：kernel, opencl

如何创建两种不同类型的全局大小，我的问题是我有两个内核，因为两者的全局大小不同，例如对于第一个内核，我使用 16 个线程，对于第二个内核，我需要 96 个线程。我怎样才能根据这个标准分配我的 globalsize。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:33:46.050

查找函数 enqueuendrange 和 enqueuendrangekernel。由于您使用的是两个不同的内核，因此无论如何您都需要分别调用它们。您将在此函数的大小参数中传递不同的值。

但是，如果您尝试同时执行这些内核，则并非所有设备都支持设备裂变。查看扩展“cl_ext_device_fission”以及您的设备是否支持它。

# qt - 无法识别使用 qt-zlib 配置 qt

> ID：13008951
> 
> 赞同：1
> 
> 时间：2012-10-22T09:58:06.207
> 
> 标签：qt, zlib, configure

我正在尝试使用内置的 zlib 配置 qt。我运行以下命令：

./configure -qt-zlib

但是，在配置过程中，我看到以下内容：

TIFF 支持......插件（qt）
JPEG支持......插件（qt）
PNG支持............是（ qt）
MNG 支持......插件（qt）
zlib 支持......系统

这似乎表明我的配置使用系统 zlib，尽管有“-qt-zlib”选项。我想确保 QT 使用内置的 zlib。我正在使用以下规格在 Mac OSX 上配置 qt 4：

构建类型：macx-g++
架构：macosx ( x86_64 )
使用框架：Cocoa

在此先感谢您的帮助！
马克西姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:17:58.393

感谢您的回答！

我检查了配置脚本，它确实有一个条件强制使用 Mac 版本的 zlib。我评论了它，现在它可以工作了。脚本中要评论的部分是：

```
if [ "x$PLATFORM_MAC" = "xyes" ] && [ "$XPLATFORM_MINGW" != "yes" ] && [ "$XPLATFORM_SYMBIAN" != "yes" ];
then
 #On Mac we implicitly link against libz, so we never use the 3rdparty stuff.
 [ "$CFG_ZLIB" = "yes" ] && CFG_ZLIB="system"
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:43:17.477

配置脚本强制将构建链接到 Mac 上的系统 zlib 上。我相信有一个很好的理由，但我不知道是哪一个。您可以尝试编辑脚本以针对 qt-zlib 构建。

# android - ExpandableList 与谷歌地图

> ID：13008956
> 
> 赞同：1
> 
> 时间：2012-10-22T09:58:12.133
> 
> 标签：android, google-maps, expandablelistview

我看到的关于 ExpandableList 的所有示例都带有字符串。我需要制作一个 ExpandableList ，例如当您打开第一个组项目时，会出现一个谷歌地图地图，而当我打开第二个组项目时，会出现两个用户之间的对话（存储在数据库中）这可能吗？我只知道该结构如何在组项中出现另一个列表。我怎样才能使结构出现不同的东西，比如谷歌地图？

# android - Android MapVIew：如何通过简单的点击检测运动？

> ID：13008957
> 
> 赞同：0
> 
> 时间：2012-10-22T09:58:12.600
> 
> 标签：android, touch-event

我有一个问题，即如何定义何时具有移动操作以及何时只需点击 MapView 中的地理点。事情是，当我点击以下事件时，会出现：ACTION_DOWN(1 fire)、ACTION_MOVE(3 FIRES)、ACTION_DOWN(1 fire)。当我移动时出现以下事件：ACTION_DOWN(1 fire)、ACTION_MOVE(LOT FIRES)、ACTION_DOWN(1 fire)。

如何定义它并且它不会阻止 onTap 函数在哪里是地理点的 alertDialog？

我做了什么，但我有点混乱：

```
 @Override
    protected boolean onTap(int index) {
    Log.i("Tapped? ", "TAP!");
    if (mOverlays.get(index) != null && !touchStarted) {
        OverlayItem item = mOverlays.get(index);
        alert.showAlertDialog(mContext, item.getTitle(), item.getSnippet(), true);
        return true;
    } else {
        return false; // Null GeoPoint
    }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) {

    Log.e("Touch", Integer.toString(event.getAction()));

    int action = event.getAction();
    if (action == MotionEvent.ACTION_DOWN) {
        touchStarted = true;
    } else if (action == MotionEvent.ACTION_MOVE) {
        // movement: cancel the touch press

        touchStarted = false;

        if (event.getPointerCount() > 3)
        Log.e("Movement", "Yeee");
        return true;

    }
    return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:23:30.103

在您的活动中实现用于查找点击事件的 onDoubleTapListener 和在您所做的 onTouchEvent 中，您将能够处理 Move 事件。使用 switch case 来检查移动和其他动作，而不是 if 语句来提高性能

例如，如果 abc 是您的活动课程，那么，

```
public class abc extends Activity implements OnDoubleTapListener{
    //Double tap listener

    public boolean onSingleTapConfirmed(MotionEvent event) {
       //your code
    }
} 
```

# html - html5直接文件上传安全隐患？

> ID：13008962
> 
> 赞同：0
> 
> 时间：2012-10-22T09:58:30.170
> 
> 标签：html, security, file-upload

我正在使用带有 base64 编码（默认）的基于 html5 画布的图像上传。服务器端：当发布请求时，base64 标头被删除，base64_decode 函数（根本不使用 eval php 函数）被应用并以 jpg 格式直接保存到文件系统中。

因为我将上传的文件保存为上传内容的精确副本。如果用户上传伪装成 jpg 的恶意 php/js 文件，并且访问者查看该坏 jpg 是否存在安全风险？如果是，我将使用 gd 处理上传的文件。在 gd-processed 之后，我认为那些将会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:07:18.213

> 因为我将上传的文件保存为上传内容的精确副本。

然后，您在处理任何类型的文件上传时都会遇到所有问题。这里没有特定于 HTML 5 的内容。

> 如果用户上传伪装成 jpg 的恶意 php/js 文件，并且访问者查看该坏 jpg 是否存在安全风险？

假设您使用`image/jpeg`内容类型通过 HTTP 交付它 - 不。

但是，过去图像库中存在基于缓冲区溢出漏洞的问题，因此在理论上（尽管不太可能）特制的 JPEG 可以利用最终查看者系统中的安全漏洞。

# c# - WebProxy 错误：需要代理身份验证

> ID：13008964
> 
> 赞同：14
> 
> 时间：2012-10-22T09:58:39.633
> 
> 标签：c#, .net, webclient, networkcredentials, webproxy

我使用以下代码从互联网上获取 html 数据：

```
WebProxy p = new WebProxy("localproxyIP:8080", true);
p.Credentials = new NetworkCredential("domain\\user", "password");
WebRequest.DefaultWebProxy = p;
WebClient client = new WebClient();
string downloadString = client.DownloadString("http://www.google.com"); 
```

但出现以下错误：“需要代理身份验证”。我不能使用默认代理，因为我的代码在没有默认代理设置的特殊帐户下从 Windows 服务运行。所以，我想在我的代码中指定所有代理设置。请告诉我如何解决这个错误。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-06-19T09:02:16.480

这对我有用：

```
IWebProxy defaultWebProxy = WebRequest.DefaultWebProxy;
defaultWebProxy.Credentials = CredentialCache.DefaultCredentials;
client = new WebClient
    {
        Proxy = defaultWebProxy
    };
string downloadString = client.DownloadString(...); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-22T10:08:28.717

您必须设置 WebClient.Proxy 属性..

```
WebProxy p = new WebProxy("localproxyIP:8080", true);
p.Credentials = new NetworkCredential("domain\\user", "password");
WebRequest.DefaultWebProxy = p;
WebClient client = new WebClient();
**client.Proxy = p;**
string downloadString = client.DownloadString("http://www.google.com"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:05:35.850

试试这个代码

```
var transferProxy = new WebProxy("localproxyIP:8080", true);
transferProxy.Credentials = new NetworkCredential("user", "password", "domain");
var transferRequest = WebRequest.Create("http://www.google.com");
transferRequest.Proxy = transferProxy;
HttpWebResponse transferResponse = 
    (HttpWebResponse)transferRequest.GetResponse(); 
System.IO.Stream outputStream = transferResponse.GetResponseStream(); 
```

# iphone - 在多个视图控制器中使用委托

> ID：13008965
> 
> 赞同：0
> 
> 时间：2012-10-22T09:58:39.183
> 
> 标签：iphone, ios, delegates

我正在使用多个视图控制器并尝试使用委托将一个视图控制器中的 UITextfield 链接到另一个视图控制器中的标签。

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UITextFieldDelegate>
{
    IBOutlet UITextField *txtField;

}

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "ViewController2nd.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (BOOL)textFieldShouldReturn:(UITextField *)textField{

    lbl.text = [NSString stringWithFormat:@"Hello, %@",txtField.text]
    [txtField resignFirstResponder];
    return YES;
}

@end 
```

ViewController2nd.h

```
#import <UIKit/UIKit.h>

@interface ViewController2nd : UIViewController <UITextFieldDelegate> {

    IBOutlet UILabel *lbl;
}

@end 
```

ViewController2nd.m

```
#import "ViewController2nd.h"

@interface ViewController2nd ()

@end

@implementation ViewController2nd

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我得到的错误是：

在 Viewcontroller.m 中使用未声明的标识符 lbl

不知道如何解决这个问题。需要一些指导..谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:02:22.753

为此，您没有`ViewController2nd`'s`IBOutlet UILabel *lbl;`的范围/过多，`ViewController`您需要自定义委托、`ViewController`一个委托`ViewController2nd`并传回数据。看看[这篇文章](https://stackoverflow.com/q/5244830/593709)了解更多细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:05:46.610

的声明`lbl`是在错误的类中完成的。 `IBOutlet UILabel *lbl;` 在的接口内发布`viewcontroller.h`

如果您想使用其他类中的变量，请将代码更改为

```
#import <UIKit/UIKit.h>
#import "ViewController2.h"

@interface ViewController : UIViewController <UITextFieldDelegate>
{
    IBOutlet UITextField *txtField;
   ViewController2 *viewController2;

}
@property(nonatomic,retain)ViewController2 *viewController2;
@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "ViewController2nd.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize viewcontroller2;
- (void)viewDidLoad
{
    viewController2 = [[ViewController2 alloc]initWithNibName:@"ViewController2" bundle:nil];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (BOOL)textFieldShouldReturn:(UITextField *)textField{

    viewController2.lbl.text = [NSString stringWithFormat:@"Hello, %@",txtField.text]
    [txtField resignFirstResponder];
    return YES;
}

@end 
```

ViewController2nd.h

```
#import <UIKit/UIKit.h>

@interface ViewController2nd : UIViewController <UITextFieldDelegate> {

    IBOutlet UILabel *lbl;
}
@property(nonatomic,retain)IBOUTlet UILabel *lbl;
@end 
```

ViewController2nd.m

```
#import "ViewController2nd.h"

@interface ViewController2nd ()

@end

@implementation ViewController2nd
@synthesize lbl;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:08:49.543

错误是正确的

ViewController 中没有元素作为 lbl :)

您必须使用 ViewController2nd 对象来访问其实例属性

[这是](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/OOP_ObjC/Introduction/Introduction.html)使用 Objective-C 进行面向对象编程的起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T10:17:32.637

首先你必须初始化`ViewController2nd`.

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
ViewController2nd *objeView2nd = [[ViewController2nd alloc]init];
objeView2nd.lbl.text = [NSString stringWithFormat:@"Hello, %@",txtField.text]
[txtField resignFirstResponder];
return YES;
} 
```

还有一件事，`lbl`of`ViewController2nd`必须是`@property`and `@synthesize`。没有它，您将无法访问`lbl`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T05:21:46.567

您始终可以使用 Singleton Class 来回传递数据。例如 appDelegate 类是单例类。您可以使用该类的共享实例来回传递数据。

例子：

```
 Step 1: 

             yourAppDelegate.h

             @property (strong, nonatomic) NSString *txtLabelText;

             yourAppDelegate.m

             @synthesize txtLabelText;

      Step 2:

            viewController1.m

            #import viewController1.m
            #import yourAppDelegate.m

            -(void)viewDidLoad{

                 UILabel *txtLabel = [[UILabel alloc] initWithFrame:CGRectMake(50,50,100,20)];

                  txtLabel.text = @"Rebel Yell";

                  yourAppDelegate *appDelegate = (yourAppDelegate *)[[UIApplication sharedApplication] delegate]; 

                  appDelegate.txtLabelText = txtLabel.text;                

               }

     Step 3:

                  viewController2.m

                  #import viewController2.m
                  #import yourAppDelegate.m

                  -(void)viewDidLoad{

                      yourAppDelegate *appDelegate = (yourAppDelegate*)[[UIApplication sharedApplication] delegate];

                      NSLog(@"Passed UILabel Text from viewController 1 %@", appDelegate.txtLabelText);

                     } 
```

我建议您创建一个自定义单例类并使用该类的共享实例，而不是仅依赖 appDelegate 类。

希望这可以帮助您消除一些疑问

# c# - 屏幕上只有一颗子弹。我怎样才能解决这个问题？

> ID：13008966
> 
> 赞同：1
> 
> 时间：2012-10-22T09:58:42.087
> 
> 标签：c#, xna

我希望每个敌人都独立射出一颗子弹。如果敌人的子弹离开屏幕，敌人可以发射新的子弹。不是更早。但就目前而言，他们始终只是屏幕上的一颗子弹，而不是三颗。我有三个敌人，所以他们最多可以在屏幕上同时出现三颗子弹，而不仅仅是一颗。怎么了？

```
public class Map
{
    Texture2D myEnemy, myBullet;
    Player Player;
    List<Enemy> enemieslist = new List<Enemy>();
    List<Bullet> bulletslist = new List<Bullet>();

    float fNextEnemy = 0.0f;
    float fEnemyFreq = 3.0f;
    int fMaxEnemy = 3;

    Vector2 Startposition = new Vector2(200, 200);
    Vector2 currentEnemyPosition;

    GraphicsDeviceManager graphicsDevice; 

    public Map(GraphicsDeviceManager device) 
    { 
        graphicsDevice = device;

    } 

    public void Load(ContentManager content)
    {
    myEnemy = content.Load<Texture2D>("enemy");
    myBullet = content.Load<Texture2D>("bullet"); 
    Player = new Player(graphicsDevice);
    Player.Load(content);
    }

    public void Update(GameTime gameTime)
    {
        Player.Update(gameTime);
        float delta = (float)gameTime.ElapsedGameTime.TotalSeconds;

         for(int i = enemieslist.Count - 1; i >= 0; i--) 
        {
        // Update Enemy
        Enemy enemy = enemieslist[i];
        enemy.Update(gameTime, this.graphicsDevice, Player.playershape.Position, delta);
        currentEnemyPosition = enemy.Bulletstartposition;
        // Try to remove an enemy
        if (enemy.Remove == true)
        {
            enemieslist.Remove(enemy);
            enemy.Remove = false;
        }

        // Does the enemy shot?
        if ((enemy.Shot == true) && (bulletslist.Count < 1))
        // New bullet
          {
          Vector2 bulletDirection = Vector2.Normalize(Player.playershape.Position - currentEnemyPosition) * 200f;
          bulletslist.Add(new Bullet(currentEnemyPosition, bulletDirection, Player.playershape.Position));
          enemy.Shot = false;
          }
        }

        this.fNextEnemy += delta;
        //New enemy
        if (fMaxEnemy > 0)
        {
        if ((this.fNextEnemy >= fEnemyFreq) && (enemieslist.Count < 3))
        {
            Vector2 enemyDirection = Vector2.Normalize(Player.playershape.Position - Startposition) * 100f;
            enemieslist.Add(new Enemy(Startposition, enemyDirection, Player.playershape.Position));
            fMaxEnemy -= 1;
            fNextEnemy -= fEnemyFreq;
        }
        }

    for(int i = bulletslist.Count - 1; i >= 0; i--) 
    {
        // Update Bullet
        Bullet bullets = bulletslist[i];   
        bullets.Update(gameTime, this.graphicsDevice, delta);

        // Try to remove a bullet... Collision, hit, or outside screen.
        if (bullets.Remove == true)
            bulletslist.Remove(bullets);
        bullets.Remove = false;
    }              
  }

    public void Draw(SpriteBatch batch)
    {

        Player.Draw(batch);
        foreach (Enemy enemies in enemieslist)
        {
            enemies.Draw(batch, myEnemy);
        } 
        foreach (Bullet bullets in bulletslist)
        {
            bullets.Draw(batch, myBullet);
        } 
    }      
}

public class Enemy
{
 private float nextShot = 0;
 private float shotFrequency = 2.0f;  

    Vector2 vPos;
    Vector2 vMove;
    Vector2 vPlayer;
    public Vector2 Bulletstartposition;
    public bool Remove;
    public bool Shot;

    public Enemy(Vector2 Pos, Vector2 Move, Vector2 Player)
    {
        this.vPos = Pos;
        this.vMove = Move;
        this.vPlayer = Player;
        this.Remove = false;
        this.Shot = false;
    }

    public void Update(GameTime gameTime, GraphicsDeviceManager graphics, Vector2 PlayerPos, float delta)
    {           
        nextShot += delta;

        if (nextShot >= shotFrequency)
            {
            this.Shot = true;
            nextShot -= shotFrequency;
            }

        if (!Remove)
        {
            this.vMove = Vector2.Normalize(PlayerPos - this.vPos) * 100f;
            this.vPos += this.vMove * delta;
            Bulletstartposition = this.vPos;

            if (this.vPos.X > graphics.PreferredBackBufferWidth + 1)
            {
                this.Remove = true;
            }

            else if (this.vPos.X < -20)
            {
                this.Remove = true;
            }

            if (this.vPos.Y > graphics.PreferredBackBufferHeight + 1)
            {
                this.Remove = true;
            }

            else if (this.vPos.Y < -20)
            {
                this.Remove = true;
            }
        }
    }

    public void Draw(SpriteBatch spriteBatch, Texture2D myTexture)
    {
        if (!Remove)
        {
            spriteBatch.Draw(myTexture, this.vPos, Color.White);
        }
    }
}

public class Bullet
{
    Vector2 vPos;
    Vector2 vMove;
    Vector2 vPlayer;
    public bool Remove;

    public Bullet(Vector2 Pos, Vector2 Move, Vector2 Player)
    {
        this.Remove = false;
        this.vPos = Pos;
        this.vMove = Move;
        this.vPlayer = Player;
    }

    public void Update(GameTime gameTime, GraphicsDeviceManager graphics, float delta)
    {
            if (!Remove)
            {
                this.vPos += this.vMove * delta;                  

                if (this.vPos.X > graphics.PreferredBackBufferWidth +1)
                {
                    this.Remove = true;
                }

                else if (this.vPos.X < -20)
                {
                    this.Remove = true;
                }

                if (this.vPos.Y > graphics.PreferredBackBufferHeight +1)
                {
                    this.Remove = true;
                }

                else if (this.vPos.Y < -20)
                {
                    this.Remove = true;
                }
            }         
    }

    public void Draw(SpriteBatch spriteBatch, Texture2D myTexture)
    {
        if (!Remove)
        {
            spriteBatch.Draw(myTexture, this.vPos, Color.White);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:28:21.570

您需要将每个敌人与其射出的子弹联系起来。最简单的方法是在 type的-class 中添加一个字段，在`Enemy`-class 中添加一个 type`Bullet`的字段。`Enemy``Bullet`

（如果你想要一个更解耦的方法，你可以创建一个 interface `IFireBullet`）

不是检查子弹的数量是否少于一，而是检查敌人是否有活动的子弹。

```
// Does the enemy shot?
if ((enemy.Shot == true) && (enemy.Bullet == null))
{
    …
} 
```

并且不要忘记在子弹飞出屏幕时清除场地。（这是`Enemy`-field 有用的地方。）

# magento - Magento 将currency_id(int) 转换为货币代码(str)

> ID：13008968
> 
> 赞同：0
> 
> 时间：2012-10-22T09:58:51.167
> 
> 标签：magento

我有一个名为 cl_wholesaleunitprice_currency 的自定义属性，它返回货币的 Id，例如 553,554,556。[来自 eav_attributes]

这些分别与货币代码“EUR”、“USD”和“GBP”相关。

由于找不到相关表，我很难找出如何从货币 ID 中检索货币代码。

我的搜索无处可寻，因为它们使其他问题变得模糊不清，因此将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:29:27.920

因为它是我使用的 EAV 属性

```
$product->getAttributeText('cl_wholesaleunitprice_currency') 
```

获取 id 的文本值

# c# - 使用 TimeSpan 将 Textvalue 字符串（秒）值转换为双精度（秒）

> ID：13008970
> 
> 赞同：1
> 
> 时间：2012-10-22T09:59:01.133
> 
> 标签：c#, asp.net

我要将字符串值转换为双精度值...实际上我想使用`TimeSpan` 值将秒转换为分钟，我想转换的值为`780.0000000656558`780 秒，其余为毫秒...我想显示`13.00000000010942633333`或例如 13 分钟以防万一是没有准确的认知

我正在尝试使用以下代码

```
if (DownTime != null)
{
    DownTime.Text = sensor.DownTime;
    if (DownTime.Text.Length > 0)
    {
         //TimeSpan.FromSeconds(DownTime.Text).ToString()
         double DownTimeSeconds = Convert.ToDecimal(DownTime.Text).ToString();
         double DownTimeMints = DownTimeSeconds / 60;
         sensor.DownTime = Convert.ToString(DownTimeMints);
         DownTime.Text = sensor.DownTime;
         DownTime.ToolTip = DownTime.Text;
         if (DownTime.Text.Length >= 25)
         {
             DownTime.Text = DownTime.Text.Substring(0, 20) + "...";
         }
    }
} 
```

我想在几分钟内显示输出......我应该怎么做提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:13:46.360

[`TimeSpan.FromSeconds`](http://msdn.microsoft.com/en-us/library/system.timespan.fromseconds.aspx)采用 a`double`并包括小数部分（在此处添加 0.1 以使小数清晰）：

使用 PowerShell（它会自动进行`string`to`double`转换）

```
PS [64]> [时间跨度]::FromSeconds("780.1000000656558")

天数：0
小时 : 0
分钟 : 13
秒：0
毫秒：100
滴答声：7801000000
总天数：0.00902893518518519
总小时数：0.216694444444444
总分钟数：13.0016666666667
总秒数：780.1
总毫秒数：780100

```

但是，正如评论者指出的那样，分辨率有一个限制`TimeSpan`：滴答声或 100ns 间隔。你的小数部分小于那个。因此，在有关 Ticks 的示例中，包含七个小数位，但您的第一个非零小数位在位置*8*。

这可以通过使用`TimeSpan.FromTicks`手动将字符串转换为 a来看到`long`，同时（分钟、秒和毫秒），但第一个非零十进制数字仍然丢失：

```
PS [64]> [时间跨度]::FromTicks(7801000000)

天数：0
小时 : 0
分钟 : 13
秒：0
毫秒：100
滴答声：7801000000
总天数：0.00902893518518519
总小时数：0.216694444444444
总分钟数：13.0016666666667
总秒数：780.1
总毫秒数：780100

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:33:02.927

这段代码给了我 13 分钟：请在你的最后尝试。：

```
 double time = 780.0000000656558;
        TimeSpan ts = TimeSpan.FromSeconds(time);
        Console.WriteLine(ts.Minutes);
        //Console.WriteLine(ts.TotalMinutes);  // this will give u mintes.fractionalpart
        Console.ReadLine(); 
```

# php - 复制、详细说明和删除目录中的文件。使用哪个 php 迭代？

> ID：13008971
> 
> 赞同：1
> 
> 时间：2012-10-22T09:59:01.427
> 
> 标签：php

我承认，作为一个新手，我对如何为以下操作编写迭代过程感到非常困惑。

风景：我的文件 test.php 检查特定目录中最旧的 .txt 文件并将其复制到另一个名为“备份”的目录中。在此之后，同一文件由“elab.php”详细说明（使用文件中包含的一些数据更新 MySQL 数据库）并在 4 秒的休眠时间后连续删除它。

这是代码：

```
 $files = glob( '*.txt' );

 array_multisort(
 array_map( 'filemtime', $files ),
 SORT_NUMERIC,
 SORT_ASC,
 $files
 );

 $filename="$files[0]";

 copy($filename,"./backup/$filename");  
 echo "<b> $filename </b>copied<br>";   

 include ("/home/mysite/directory/elab.php");

 sleep(4);

 unlink($filename); 
```

由于目录中有多个 .txt 文件，我想执行一个递归过程。它应该对所有 .txt 文件重复该操作，直到目录变空。怎么做？我很困惑，因为我不知道使用“foreach”或“if”或“while”是否更好。哪个是最好的？如何使用递归检查修改文件？

预先感谢您的帮助。

垫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:08:13.297

`glob`有自己的迭代器`GlobIterator`，我也猜你也想根据日期对备份进行分组。

```
$backup = __DIR__ . "/backups/" . date("Y-m-d");

if (! is_dir($backup))
    mkdir($backup) or trigger_error("Can't create directory");

$files = new GlobIterator(__DIR__ . "/test/*.txt");

foreach ( $files as $file ) {
    copy($file, $backup . DIRECTORY_SEPARATOR . $file->getFilename()); //copy file
    printf("<b>%s</b>copied<br>", $file->getFilename());
    unlink($file); //delete file
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:09:46.230

```
$files = scandir('folder/');
foreach($files as $file) {
  //do your work here
} 
```

或者

```
$files = glob('folder/*.{txt}', GLOB_BRACE);
foreach($files as $file) {
  //do your work here
} 
```

# linux - PATH 和 COMPILER_PATH 的区别

> ID：13008976
> 
> 赞同：3
> 
> 时间：2012-10-22T09:59:21.177
> 
> 标签：linux, gcc, environment-variables

这些环境变量在 gcc 方面有什么区别。何时在 COMPILER_PATH 中设置路径优先于 PATH ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:21:39.027

从其[GCC 文档](http://gcc.gnu.org/onlinedocs/gcc/Environment-Variables.html)中，`COMPILER_PATH`可用于帮助编译器找到编译所需的内部程序（如`cc1`、`cc1plus`、`lto1`、`collect2`、`as`、`ld`）。

您通常不需要担心这一点（`COMPILER_PATH`即使在 GCC 中工作，我也从未让自己设置！）。（`gcc`或`gcc-4.7`）命令可以很好地找到这些内部程序。将标志传递给它`-v`以了解它正在运行的程序。例如尝试`gcc -Wall -v hello.c -o helloworld`；请记住，这`gcc`只是一个驾驶程序；编译器的真正工作由`cc1`其他内部程序完成（但您永远不想`cc1`直接运行）。

一个很好的阅读是[environ(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/environ.7.html) 手册页。它解释了`PATH`变量的（重要）作用，用于查找程序。另请参见[execvp(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/execvp.3.html)手册页。

我还建议阅读一本好书，例如[Advanced Linux Programming](http://advancedlinuxprogramming.com/)。

您还可以阅读[GCC 上的 Wikipedia 页面](http://en.wikipedia.org/wiki/GNU_Compiler_Collection)。

在实践中，不要担心，`COMPILER_PATH`但要确保你`PATH`包含包含你的目录`gcc`（通常`gcc`是`/usr/bin/gcc`你需要`/usr/bin`在你的早期`PATH`）。您也可能是[ccache](http://ccache.samba.org/)`gcc`的符号链接。

# c# - SQLite 中的异常“SQLite 错误 - 没有事务处于活动状态”

> ID：13008986
> 
> 赞同：1
> 
> 时间：2012-10-22T09:59:52.037
> 
> 标签：c#, sqlite, transactions

在我的项目中，我使用 sqlite 事务如下。

```
var trans = connection.BeginTransaction();

var sql = "delete from table1";
connection.ExecuteNonQuery(sql);

trans.Commit(); // Here, an exception occurred: "No transaction is active". 
```

导致问题的原因是什么？
谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-07T14:57:22.263

有同样的问题，我只是使用 BeginTransaction(IsolationLevel.ReadCommitted);

```
using (SQLiteConnection connection = new SQLiteConnection(DatabaseConnectionString))
{
    connection.Open();
    connection.BeginTransaction(IsolationLevel.ReadCommitted);

    SQLiteCommand command = connection.CreateCommand();
    command.CommandText = "delete from table1";
    command.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:16:29.613

```
using (SQLiteConnection connection = new SQLiteConnection(DatabaseConnectionString))
{
    connection.Open();
    SQLiteCommand command = connection.CreateCommand();
    command.CommandText = "delete from table1";
    command.ExecuteNonQuery();
    command.Dispose();
    connection.Close();
} 
```

# objective-c - 如何更改 UINavigationBar 标题标签大小？

> ID：13008993
> 
> 赞同：1
> 
> 时间：2012-10-22T10:00:29.807
> 
> 标签：objective-c, ios, uinavigationbar

我决定以正确的方式进行自定义导航栏设计。我的导航栏标题应该用自定义字体“Din Condensed”输入，大小为 23。所以我写了这段代码：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navigation_background.png"]
                                 forBarMetrics:UIBarMetricsDefault];

[[UINavigationBar appearance] setTitleTextAttributes:@{
                          UITextAttributeTextColor: [UIColor whiteColor],
                          UITextAttributeFont: [UIFont fontWithName:@"PFDinTextCondPro-Bold" size:23]
}]; 
```

但看起来标题标签不能适合这种字体的文本：

![标题标签大小](../Images/02aa86a3b3a9dde2c1b1ebf3fa4463dc.png)

如何使用外观 API 更改 UINavigationBar 标题的大小？我想避免使用自定义titleView。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:17:00.200

没有办法改变它的字体大小。至少据我所知不是。导航栏将自动调整默认标题标签的字体大小以适应纵向或横向。

因此，您需要一个自定义标题视图。但这很简单；只需要将导航项设置`titleView`为您的标签。

多行示例：[UINavigationBar 多行标题](https://stackoverflow.com/questions/2422383/uinavigationbar-multi-line-title)

单行但字体不同的示例：[https ://stackoverflow.com/a/10171426/894671](https://stackoverflow.com/a/10171426/894671)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:28:50.573

您是否尝试过`setTitlePositionAdjustment`解决此问题？如果这不起作用，我认为最好的方法是让您`UILabel`使用所需的字体进行自定义并将其用作`titleView`导航栏的（自定义视图）属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-04T01:59:11.437

在情节提要中设置标题字体。

1.  检查 UINavigationController
2.  打开它的 UINavigationBar
3.  在标题文本属性下设置标题字体。

现在它不应该削减你的标题标签。