# StackOverflow 问答 13230000-13230999

# java - 运行时的 Ehcache 缓存大小

> ID：13230003
> 
> 赞同：7
> 
> 时间：2012-11-05T10:17:06.863
> 
> 标签：java, ehcache

我正在生产中运行一个大型 VM，并且想在运行时更多地了解我的缓存大小。我的缓存都是基于 ehache

在运行时查看单个缓存大小的最佳方法是什么。使用 JMX 或 API

是否有任何选项可以通过对 CacheManager 的普通旧 java 调用进行配置，或者（暂时忽略 JMX）必须在一个大字符串中构建 XML 配置吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-08T12:56:45.757

是的，使用 Ehcache，您可以配置缓存并仅通过 Java 代码检索它们的大小（无 XML 配置）。集成一切的确切方式取决于您的特定架构；我将假设 Jersey 做 API 的东西，Guice 做依赖注入。

**定义缓存**

通过依赖注入使您的缓存管理器可用。这可以通过 Guice 模块完成：

```
@Provides
@Singleton
CacheManager provideCacheManager() {
  CacheManager cacheManager = CacheManager.create();

  /* very basic cache configuration */
  CacheConfiguration config = new CacheConfiguration("mycache", 100)
    .timeToLiveSeconds(60)
    .timeToIdleSeconds(30)
    .statistics(true);

  Cache myCache = new Cache(config);
  cacheManager.addCacheIfAbsent(myCache);

  return cacheManager;
} 
```

请注意，统计信息已为 开启`mycache`。

同样，使用缓存可以完全在 Java 代码中完成，但这取决于您的体系结构和设计。通常，我使用方法拦截（通过 AOP）来执行此操作，但这是另一个主题。

**通过 REST API 获取缓存统计信息**

鉴于您`CacheManager`可以通过依赖注入获得，您可以将其连接到 REST 端点并允许访问缓存统计信息：

```
@Path("stats")
@Produces("text/plain")
public class StatsResource {
  @Inject private CacheManager cacheManager;

  @GET
  public String stats() {
    StringBuffer sb = StringBuffer();

    /* get stats for all known caches */
    for (String name : cacheManager.getCacheNames()) {
      Cache cache = cacheManager.getCache(name);
      Statistics stats = cache.getStatistics();

      sb.append(String.format("%s: %s objects, %s hits, %s misses\n",
        name,
        stats.getObjectCount(),
        stats.getCacheHits(),
        stats.getCacheMisses()
      ));
    }
    return sb.toString();
  }
} 
```

现在您可以通过 REST 调用获取有关缓存的信息：

```
GET /stats

HTTP/1.1 200 OK
Content-Type: text/plain; charset=utf-8

mycache: 8 objects, 59 hits, 12 misses 
```

**JMX 呢？**

Ehcache 使向 MBean 服务器注册缓存管理器变得容易。它可以用Java代码完成。更新您的 Guice 模块，将您注册`cacheManager`到系统`MBeanServer`：

```
MBeanServer mBeanServer = ManagementFactory.getPlatformMBeanServer();
ManagementService.registerMBeans(cacheManager, mBeanServer, false, false, false, true); 
```

现在您可以将 JConsole 附加到您的 Java 进程并在 MBean 中找到您的缓存统计信息`net.sf.ehcache.CacheStatistics`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-15T16:27:39.890

在 EhCache 3 中（至少在我使用的 3.5 版本中），您可以通过缓存统计信息访问缓存大小。

首先，您需要在缓存管理器上注册统计服务：

```
StatisticsService statisticsService = new DefaultStatisticsService();
CacheManager cacheManager = CacheManagerBuilder.newCacheManagerBuilder()
        .using(statisticsService)
        .build();
cacheManager.init(); 
```

然后，您可以检索缓存上的统计信息，它包含按层排列的大小（在 EhCache 3 中，您有三个不同的层：堆、磁盘和堆外）

```
CacheStatistics ehCacheStat = statisticsService.getCacheStatistics("myCache");
ehCacheStat.getTierStatistics().get("OnHeap").getMappings();//nb element in heap tier
ehCacheStat.getTierStatistics().get("OnHeap").getOccupiedByteSize()//size of the tier 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:36:39.000

JMX 绝对是一个可行的解决方案。EhCache 文档有一个专门用于此的[页面。](http://www.ehcache.org/documentation/2.8/operations/jmx.html)

[这是一个通过 JMX 配置 EhCache 的示例](http://onjavahell.blogspot.com/2009/09/monitoring-ehcache-with-jmx-and-spring.html)。链接的文章包含一个 Spring 配置，但如果您不使用 Spring，它很容易转换为原生 Java。

# javascript - 自定义 html 标签——有没有更好的方法？

> ID：13230005
> 
> 赞同：2
> 
> 时间：2012-11-05T10:17:10.520
> 
> 标签：javascript, html

我正在尝试完成一个浏览器插件，它将分析文本并以某种方式对其进行标记。

基本上，假设您的浏览，您会在页面的某处看到此文本。

```
<p>and then Tom Cruise, devoured the planet.</p> 
```

该插件正在扫描文本并将找到“汤姆克鲁斯”。一旦鼠标悬停在我的服务器上吐出 AJAX 并返回一个 HTML 页面，将显示在工具提示中。

我最初是这样标记的

```
<p>and then <span class="ajax subtleShadow">Tom Cruise</span>, devoured the planet.</p> 
```

虽然我发现这可能会出错，但如果网页具有奇怪的跨度 css 或者它嵌套在具有奇怪事物（如边框）​​的跨度中。

我的解决方案是发明一个新的 html 标签。像这样...

```
<p>and then <fhwdgads class="ajax subtleShadow">Tom Cruise</fhwdgads>, devoured the planet.</p> 
```

虽然快速搜索让我得出结论，如果我这样做，“互联网”会用干草叉追随我。

是否有另一种方法来标记自定义标签的内联文本创建？

编辑：[链接到嵌套跨度中损坏按钮的视图。](http://i.imgur.com/RasEH.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:40:39.653

确实不能保证`<fhwdgads>`永远不会被识别为具有某些特殊语义或格式的标签。如果您使用非常混乱的标签名称，这可能是不可能的，但您真的会吗？人们在发明标签时倾向于使用助记名称，然后在某些当前或未来的规范或浏览器中很有可能与标签发生冲突。

此外，一些旧版本的 IE 完全忽略了无法识别的标签，例如，不让您设置它们的样式。不过，这可以避免`document.createElement()`为每个标签名称使用一次。

在实践中使用`span`or`div`是安全的。没有理由认为浏览器默认有一些花哨的格式。就像我们不会停止使用一样，`h1`即使理论上它可能会使内容变成粉红色并闪烁。如果您期望浏览器供应商完全疯了，就不可能万无一失。

使用类是另一回事，尽管只是在其他样式表使用与您相同的类名的意义上。您可能需要在其他作者样式表干扰您的环境中工作。但这只是需要谨慎。它不会使带有类的`span`or`div`元素成为错误的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:33:59.077

您可以改用`<DIV>`标签。根据我的“经验”， div 元素几乎可以在 html 层次结构中的任何位置（在输入标签内部`<body>`而不是在输入标签内部）出现。不过，您必须注意默认样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:35:09.933

我认为使用自定义 html 标签并不是一个坏方法。当然，我不能保证您在开发插件时没有任何相关的技术问题。但 Facebook 做到了：http: [//developers.facebook.com/docs/reference/fbml/](http://developers.facebook.com/docs/reference/fbml/)

我不知道为什么它被删除了。

您还可以添加您的特殊命名空间扩展（如 fb: 用于 Facebook）。Web 2.0 支持数据表示和用户定义标签的独立性：[http ://en.wikipedia.org/wiki/Web_2.0#Concepts](http://en.wikipedia.org/wiki/Web_2.0#Concepts)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:35:39.520

一个解决方案是定义一个 CSS 类，它首先重置*所有*样式属性，这样您就可以从头开始。

另一种解决方案是使用不经常使用的标签，例如`del`,`ins`和`blockquote`

# c# - 在新线程上使用 ObservableCollection

> ID：13230017
> 
> 赞同：3
> 
> 时间：2012-11-05T10:17:57.690
> 
> 标签：c#, wpf, multithreading, dispatcher

几天前我创建了[这个线程](https://stackoverflow.com/questions/13192247/view-is-not-updated-when-on-a-separate-thread)，因为我无法从另一个线程更新 ObservableCollection。这是来自线程的解决方案：

```
Dispatcher.CurrentDispatcher.BeginInvoke(new Action(delegate
{
    TheTVDB theTvdb = new TheTVDB();
    foreach (TVSeries tvSeries in theTvdb.SearchSeries("Dexter"))
    {
        this.Overview.Add(tvSeries);
    }
}),
DispatcherPriority.Background); 
```

但是，这似乎不是真正的解决方案，因为 UI 在执行委托时仍然冻结。我的猜测是，上面并没有真正在另一个线程上运行任何东西，而是将它全部分派给 UI 线程。所以我真正想做的是自己创建一个新线程并进行加载（这发生在`theTvdb.SearchSeries()`）。然后我将遍历结果并将其添加到我的`ObservableCollection`，这必须发生在 UI 线程上。

这种方法听起来对吗？

我想出了下面我认为会加载结果并将它们添加到 ObervableCollection 并在我的列表视图中显示它们而不会冻结 UI 的方法。

```
Thread thread = new Thread(new ThreadStart(delegate
{
    TheTVDB theTvdb = new TheTVDB();
    List<TVSeries> dexter = theTvdb.SearchSeries("Dexter");

    foreach (TVSeries tvSeries in dexter)
    {
        Dispatcher.CurrentDispatcher.BeginInvoke(new Action(delegate
        {
            this.Overview.Add(tvSeries);
        }),
        DispatcherPriority.Normal);
    }
}));
thread.SetApartmentState(ApartmentState.STA);
thread.Start(); 
```

以上不会产生任何错误。相反，什么也没有发生。UI 不会冻结，但不会更新。`Overview`UI 中没有显示其中的对象，我已经测试了绑定是否正确。如果我不加载它们并将它们添加到`ObservableCollection`另一个线程上，这些对象将正确显示。

我尝试过的另一个解决方案是使用[此答案中的 MTObservableCollection 来解决](https://stackoverflow.com/a/2104705/486845)类似问题。当使用 的那个子类时`ObservableCollection`，我自己没有发送任何东西。这给了我以下错误：

> 必须在与 DependencyObject 相同的线程上创建 DependencySource。

谁能告诉我我该怎么做：

1.  在单独的线程上加载一些东西
2.  使用步骤 1 的结果更新绑定到列表视图的 ObservableCollection
3.  在 UI 中显示结果而不冻结 UI

我希望你能进一步帮助我。

**更新**：

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:acb="clr-namespace:AttachedCommandBehavior"
    mc:Ignorable="d"
    x:Class="TVSeriesLibrary.OverviewView"
    x:Name="UserControl"
    d:DesignWidth="512"
    d:DesignHeight="480">

    <UserControl.Resources>
        <DataTemplate x:Key="CoverTemplate">
            <StackPanel Orientation="Horizontal">
                <Image Width="82" Height="85" Stretch="Fill" Source="{Binding Cover}" Margin="10,10,0,10"/>
            </StackPanel>
        </DataTemplate>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="#515050">
        <Grid.Resources>
            <ResourceDictionary>
                <Style x:Key="ItemContStyle" TargetType="{x:Type ListViewItem}">
                    <Setter Property="Background" Value="#282828" />
                    <Setter Property="Margin" Value="0,0,0,5" />
                    <Setter Property="Padding" Value="0" />
                </Style>
            </ResourceDictionary>
        </Grid.Resources>

        <ListView Height="112"
                  Width="488"
                  Margin="12,150,12,218"
                  Foreground="#ffffff"
                  Background="#515050"
                  VerticalContentAlignment="Center"
                  BorderThickness="0"
                  ItemTemplate="{StaticResource CoverTemplate}"
                  ItemsSource="{Binding Overview}">
            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>
        </ListView>

        <ListView Height="170"
                  Margin="10,298,10,0"
                  VerticalAlignment="Center"
                  Foreground="#ffffff"
                  Background="#515050"
                  VerticalContentAlignment="Center"
                  BorderThickness="0"
                  Width="488" ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                  ItemsSource="{Binding Path=Overview}"
                  SelectedItem="{Binding Path=SelectedTVSeries}"
                  ItemContainerStyle="{StaticResource ItemContStyle}">
            <ListView.Resources>
                <ResourceDictionary>
                    <Style x:Key="hiddenStyle" TargetType="GridViewColumnHeader">
                        <Setter Property="Visibility" Value="Collapsed"/>
                    </Style>
                </ResourceDictionary>
            </ListView.Resources>
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Cover" Width="auto" HeaderContainerStyle="{StaticResource hiddenStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Image Source="{Binding Path=Cover}" Height="50" Margin="-6,0,0,0" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Title" Width="200" HeaderContainerStyle="{StaticResource hiddenStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Name}" FontWeight="Bold"></TextBlock>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Year" Width="100" HeaderContainerStyle="{StaticResource hiddenStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=DisplayYear}"></TextBlock>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Button" Width="135" HeaderContainerStyle="{StaticResource hiddenStyle}">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Details" Width="100" Height="20" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                </GridView>
            </ListView.View>
        </ListView>
    </Grid>

</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:54:13.230

在您希望保持响应的应用程序中的任何“繁重”工作中的多线程方法是正确的思考方式，因此您走在正确的轨道上。

然而，当您在这里创建和使用其他线程时，您仍然过于依赖 Dispatcher。考虑一下，这里使用多线程，您的过程应该如下所示：

1.  在单独的线程上进行繁重的工作。
2.  完成后，要求 Dispatcher 根据需要更新 UI。

这可以减轻 Dispatcher 上的负载。

您是否考虑过使用任务？从“干净代码”的角度来看，它们很棒，但在这里也适用，因为使用任务继续，*一旦*繁重的工作在其线程上完成，您可以将任务链接在一起以调用 UI 上的相关代码。

看看[这里的答案](https://stackoverflow.com/questions/6075998/update-ui-label-when-using-task-factory-startnew)是一个好的开始。

如果您之后需要它，我会很乐意提供更详细的示例。

编辑：正如另一个答案中提到的，BackgroundWorker 在这里同样有效......从线程的角度来看，最终结果完全相同。我只是喜欢任务语法！

编辑：只是想我会提供一些代码。为了简单起见，我暂时避免继续。考虑以下可以完成繁重工作的方法：

```
 public void HeavyLifting(Action<List<Items>> callback)
    {
        Task<List<Items>> task = Task.Factory.StartNew(
            () =>
                {
                    var myResults = new List<Items>();

                    // do the heavy stuff.

                    return myResults;
                });

        callback.Invoke(task.Result);
    } 
```

然后对于您的 UI（例如在您的 ViewModel 中），您可以调用和处理回调。需要时，调用“繁重”并传入您的回调：

```
HeavyLifting(this.HandleHeavyLiftingCompleted); 
```

然后，您传递的方法是在任务完成时执行回调。请注意，这是我要求 Dispatcher 完成工作的地方：

```
private void HandleHeavyLiftingCompleted(List<Items> results)
{
    this._uiDispatcher.BeginInvoke(
        new Action(() => { this.MyItems = new ObservableCollection<Items>(results); }));
} 
```

请注意，在这种情况下，所涉及的 UI 工作是更新我从视图绑定到的 ObvservableCollection。对于这里的示例，我使用了一个随机的“项目”对象，它可以是你喜欢的任何东西！

我正在使用 Cinch，因此依靠服务来获取相关的 Dispatcher（您在这里看到的 this._uiDispatcher）。在您的情况下，您可以使用此处其他问题中提到的方法获得对它的参考。

此外，如果您有时间阅读，这里有一些关于 WPF 线程模型的重要[信息](http://msdn.microsoft.com/en-us/library/ms741870.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:39:59.353

您的方法很危险，在很短的时间内将大量作业推送到调度程序上可能会使您的应用程序停止或冻结。虽然您的一般方法很好，但您可能需要考虑使用批量添加元素到您的列表中。

您也不能使用[Dispatcher.CurrentDispatcher](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.currentdispatcher.aspx)因为您现在正在使用当前线程的调度程序。因此，您要求您的线程处理同一线程中的添加，而不是 ui 线程。您需要从 ui 线程中获取调度程序。例如，您可以使用 Application 对象。

根据我的经验，我还建议您使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)，它在 WPF 中比普通线程更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:46:12.070

你可以简单地做：

```
Task.Factory.StartNew(() => 
{
    var theTvdb = new TheTVDB();
    var dexterSeries = theTvdb.SearchSeries("Dexter");
    Application.Current.Dispatcher.Invoke(new Action(() => 
    {    
        foreach (var tvSeries in dexterSeries)
        {
            this.Overview.Add(tvSeries);
        }
    }));
}); 
```

# linq - 包含中的 Linq 索引

> ID：13230022
> 
> 赞同：1
> 
> 时间：2012-11-05T10:18:23.893
> 
> 标签：linq, entity-framework

我在 Linq To EF4 中编写程序我在数据库“项目”表中有它 FK 到“公司”表。
还有“地址”表，它对“公司”表和“城市”表进行了 FK。
我要退货的商品包括地址和城市。
但我不能这样写：

```
var items = context.Items.Include("Company.Address[0].City").ToList(); 
```

因为包含没有得到“[]”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:32:32.800

我得到错误：

“TrackableCollection`1”类型中不存在属性或字段“名称”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:47:16.817

不需要`[0]`部分：

```
var items = context.Items.Include("Company.Address.City").ToList(); 
```

# silverlight - 从在浏览器中运行的 Silverlight 应用程序安装 Out of Browser 应用程序

> ID：13230027
> 
> 赞同：3
> 
> 时间：2012-11-05T10:18:50.103
> 
> 标签：silverlight

最近我们正在做一个完全基于 Silverlight 5 的网站项目。我们的在线应用程序将是这个。现在我想向所有注册的用户免费提供一个应用程序（这个应用程序是在浏览器之外制作的，用户可以安装在他们的桌面上）。

一旦他们成功登录我的启用 Silverlight 的网站，就会有一个名为“下载”的链接，这将在客户端的桌面计算机中安装一个 OBBS（浏览器外应用程序）。

如何做到这一点，任何建议都会有所帮助。

# c# - 使用 MvvmCross 在本地存储中加载文件

> ID：13230028
> 
> 赞同：2
> 
> 时间：2012-11-05T10:18:52.710
> 
> 标签：c#, windows-runtime, mvvmcross

目前，我正在尝试使用便携式库中的 Web 服务从服务器上传文件。对于每个文件，我都这样做：

```
WebRequest request = WebRequest.Create("http://localhost:49364/" + url);

 request.BeginGetResponse((aResult) =>
 {
      var retour = aResult.AsyncState as WebRequest;
      WebResponse reponse = retour.EndGetResponse(aResult);
      callback(reponse);
 }, request); 
```

在我的回调方法中，我这样做：

```
byte[] bytes;
string currentFileName = fileName;
string categorie = currentFileName.Split('/').ElementAt(0);
string dir = currentFileName.Split('/').ElementAt(1);

using (var reader = new BinaryReader(reponse2.GetResponseStream()))
{
    bytes = new byte[reponse2.ContentLength];
    reader.Read(bytes, 0, (int)reponse2.ContentLength);
}
fileService.EnsureFolderExists(categorie);
fileService.EnsureFolderExists(fileService.PathCombine(categorie, dir));
fileService.WriteFile(currentFileName, bytes); 
```

我将整个文件作为字节数组获取。但是，使用 winRT，写入文件会很快停止，并且我的本地文件不完整。如果我尝试只上传一个文件，写入也会停止。但是，如果我尝试使用 Silverlight（我将 MvvmCross 扩展到 Silverlight），则编写完成。我还没有测试过 MonoDroid 和 MonoTouch。

所以，我的问题是：为什么写作停止了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:12:40.220

我查看了[MvxBlockingWinRTFileStoreService.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Plugins/File/Cirrious.MvvmCross.Plugins.File.WinRT/MvxBlockingWinRTFileStoreService.cs)中 WriteFile 的代码，但看不到任何明显的错误。

为了测试这一点，我刚刚使用[https://gist.github.com/4016898](https://gist.github.com/4016898)编写了一个快速的独立 WinRT 测试应用程序。

这完美地保存了 37kB 的 Bing 主页文件。它也适用于您的服务器吗？

在这个测试之后，我的猜测是您的网络传输代码中可能存在一些错误 - 甚至可能在 localhost 服务中。但是，该错误仍然可能存在于 StorageFile 保存中。

一些问题：

*   您可以添加额外的跟踪来找出下载过程中每个阶段报告的数据缓冲区长度吗？

*   您能否调整上面的简单测试工具以显示相同的结果？

* * *

一种可能的候选人是：

**您使用 ContentLength 作为流长度？你确定这是正确的长度吗？**

例如，如果您启用了 GZip 压缩，那么 ContentLength 将为您提供传输的压缩数据的长度，而不是数据本身的长度 - 请参阅[使用 http 压缩时的 content-length](https://stackoverflow.com/questions/3819280/content-length-when-using-http-compression)

我想得越多，这对我来说就越有意义——Silverlight 将使用浏览器堆栈，与 WinRT 堆栈相比，该堆栈将具有不同的 HTTP 接受标头。

* * *

一些好消息是 async/await 很快就会出现在 MonoTouch 和 MonoDroid 中——当它们出现时，我将尝试使文件 API 都可以作为 async 和 await 使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:28:05.927

斯图尔特，

首先，感谢您的回答！

我尝试了您的示例并适应了我的情况（通过网络服务从服务器上传文件），起初一切正常。所有文件均已正确上传。但是当我添加要上传的图像时，我遇到了同样的问题。图像文件和文本文件不完整。

但是查看您示例的代码，我找到了解决方案，以为我不太明白问题出在哪里。

对于写作作品，我替换了这个（在我的回调方法中）：

```
...

using (var reader = new BinaryReader(reponse2.GetResponseStream()))
{
    bytes = new byte[reponse2.ContentLength];
    reader.Read(bytes, 0, (int)reponse2.ContentLength);
}
...
fileService.WriteFile(currentFileName, bytes); 
```

这样 ：

```
...

var mem = new MemoryStream();
using (var stream = reponse2.GetResponseStream())
{
        stream.CopyTo(mem);
}
mem.Seek(0L, SeekOrigin.Begin);
...
fileService.WriteFile(currentFileName, mem.ToArray()); 
```

我不知道为什么，但它有效！（如果你知道为什么会这样，我很感兴趣）

所以，谢谢你的帮助！

# html - HTML：水平滚动条没有出现

> ID：13230033
> 
> 赞同：-1
> 
> 时间：2012-11-05T10:19:17.450
> 
> 标签：html

我需要在表格中包含滚动条窗格，为此我使用了 div 标签，如下所示

```
<table border="2" width="100%"><th></th><th></th><th></th></table

<div><div width="100%" style="overflow:scroll;height:100px;scrollbar-face-color: #fff;   
scrollbar-track-color: #eee;position:fixed;height:300px;">

<table border="2" width="100%"><td></td><td></td><td></td></table></div> 
```

只有垂直滚动条出现，而不是底部或水平滚动条，请提出一些答案。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:27:04.803

您没有为滚动指定宽度，要显示滚动，您需要为垂直滚动指定高度，为水平滚动指定宽度。

```
<div width="100%" style="overflow:scroll;scrollbar-face-color: #fff;scrollbar-track-color: #eee;position:fixed;height:300px;width:200px;"> 
```

作为旁注，你在你的内联样式中提到了两次高度。

## [演示](http://jsfiddle.net/deCMj/)

# django - 使用多个外键时 Django 管理下拉列表中的意外值

> ID：13230035
> 
> 赞同：1
> 
> 时间：2012-11-05T10:19:25.593
> 
> 标签：django, django-models, django-admin, django-south

下面是我的`models.py`。问题是在管理面板`User`中，模型中的列`Ingredience`指向`Ingredience Category`值而不是`User`值。

在`Ingredience`模型中我有**2 个外键**。我不确定这是否是问题所在。

**管理面板截图：**

![在此处输入图像描述](../Images/03600aea230f8ab444e8db01bd5fe14d.png)

**模型.py：**

```
from django.db import models
from django.contrib.auth.models import User

class IngredienceCategory(models.Model):
    name = models.CharField(max_length=30)
    user = models.ForeignKey(User, null=True, blank=True)

    class Meta:
        verbose_name_plural = "Ingredience Categories"

    def __unicode__(self):
        return self.name

class Ingredience(models.Model):
    name = models.CharField(max_length=30)
    category = models.ForeignKey(IngredienceCategory, null=True, blank=True)
    user = models.ForeignKey(User, null=True, blank=True)

    class Meta:
         verbose_name_plural = "Ingredients"

    def __unicode__(self):
        return self.name

class Food(models.Model):
    name = models.CharField(max_length=30)
    ingredients = models.ManyToManyField(Ingredience)
    html_id = models.CharField(max_length=30, null=True, blank=True)
    user = models.ForeignKey(User, null=True, blank=True)

    class Meta:
        verbose_name_plural = "Foods"

    def __unicode__(self):
        return self.name 
```

任何想法这里有什么问题？以下是我在出现此问题之前采取的步骤：

*   我`user`为所有 3 个模型添加了列并运行了南迁移
*   之后，我手动将值插入到所有 3 个表中的用户列
*   模型`IngredienceCategory`和`Food`工作正常（即在`User`下拉列表中显示用户列表
*   这是 SQL： http: [//pastebin.com/3mHpXA3F](http://pastebin.com/3mHpXA3F)

**编辑：** 要添加的东西（可能有助于解决此问题）：我注意到单击管理面板中 Ingredience Model 中 User 列旁边的加号 (+)，添加新用户的弹出表单是显示，这是正确的。

**编辑 2：** admin.py 文件的相关部分：

```
class IngredienceAdmin(admin.ModelAdmin):
    search_fields = ('name',)
    list_filter = ('category',)
    ordering = ('name',)

#    def formfield_for_foreignkey(self, db_field, request, **kwargs):
#        #if db_field.name == 'ingrediencecategory':
#        kwargs['queryset'] = IngredienceCategory.objects.order_by('name')
#        return super(IngredienceAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs)

    def formfield_for_foreignkey(self, db_field, request, **kwargs):
        if db_field.name == 'ingrediencecategory':
            kwargs['queryset'] = IngredienceCategory.objects.order_by('name')
            return super(IngredienceAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs)

        if db_field.name == 'user':
            kwargs['queryset'] = User.objects.order_by('name')
            return super(IngredienceAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:11:15.387

回答我自己的问题。如果有人遇到类似的问题，这里是工作解决方案（admin.py）：

```
class IngredienceAdmin(admin.ModelAdmin):
    search_fields = ('name',)
    list_filter = ('category',)
    ordering = ('name',)

    def formfield_for_foreignkey(self, db_field, request, **kwargs):
        if db_field.name == 'ingrediencecategory':
            kwargs['queryset'] = IngredienceCategory.objects.order_by('name')

        if db_field.name == 'user':
            kwargs['queryset'] = User.objects.order_by('username')

        return super(IngredienceAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:35:30.550

您的管理模型是什么样的？

你的模型看起来不错，我不明白你为什么会遇到这个问题。一个模型中可以有多个外键，这很正常。

我将它们放入一个项目中进行查看（使用空白管理模型），但我无法重现这一点。

# erlang - mnesia 相当于 ets:lookup_element()？

> ID：13230038
> 
> 赞同：0
> 
> 时间：2012-11-05T10:19:32.020
> 
> 标签：erlang

ets:lookup_element(Tab, Key, Pos) 的 mnesia 等价物是什么？我正在努力使用手册页和 mnesia 教程找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:35:21.217

我会在 mnesia [http://www.erlang.org/doc/man/mnesia.html#match_object-3](http://www.erlang.org/doc/man/mnesia.html#match_object-3)中使用 match_object(Tab, Pattern, LockKind) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:37:16.883

如果你只想要那个位置，那么你就无法避免`qlc:q/1`。查询列表理解是唯一可以让您操纵 mnesia 如何为您提供结果的读取方法。

```
-include_lib("stdlib/include/qlc.hrl")。

选择（Q）->
    案例记忆：is_transaction() 的
        假->
            F = fun(QH)-> qlc:e(QH) 结束，
            %% 失忆症：交易（F）；
            mnesia:activity(transaction,F,[Q],mnesia_frag);
        真-> qlc:e(Q)
    结尾。

-记录（书，{标题，​​isbn，价格，类别}）。

book_title({book,ISBN})->
    select(qlc:q([X#book.title || X <- mnesia:table(book),X#book.isbn == ISBN]))。

```

请参阅此[问题](https://stackoverflow.com/q/9347753/431620)及其[答案](https://stackoverflow.com/a/9356588/431620)

# iphone - 未找到适用于 i386 架构的 iOS 符号

> ID：13230040
> 
> 赞同：4
> 
> 时间：2012-11-05T10:19:43.457
> 
> 标签：iphone, xcode, frameworks, static

经过[http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)后，我制作了一个静态库。为了测试这个库，我创建了一个新项目并将静态库拖到项目中并尝试测试它的一种方法。但它给了我错误““_OBJC_CLASS__$_MyLib”，引用自：”。MyLib 是我创建的库的名称。

我在创建静态库时采取的步骤。1.新建一个Xcode项目。2\. 选择创建可可触摸静态库的选项。3\. 在 MyLib.h 中编写了两个函数，并编写了一个用于斐波那契数列的实现，另一个用于生成数字的阶乘。3\. 构建项目并点击MyLib.a 文件，在finder 中显示部分。4\. 将 MyLib.a 文件和 MyLib.h 拖到一个名为 MyLib 的新文件夹中。

请提供任何帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T11:11:11.900

在为 iOS 构建库、框架或应用程序时，XCode 只会为目标的构建设置中指定的体系结构编译目标代码。XCode 也将仅链接到具有内置指定架构的二进制文件。

在 XCode 中，如果您选择您的目标，您可以在构建设置选项卡下看到您的目标的架构。它将包含 arm6、arm7 和 i386 等值。

在 iOS 模拟器中运行代码时，您是在 i386 架构的桌面上运行代码。

在设备上运行时，二进制文件具有为该架构构建的“切片”。如果二进制文件中不存在正确的架构“切片”，它将不会运行。

如果您在模拟器中运行 iOS 应用程序时遇到缺少 i386 架构的错误，您需要确保您的应用程序及其所有依赖库都是针对 i386 架构构建的。

还要检查目标的构建设置中的“仅构建活动架构”是否设置为 NO。

如果您因为没有源而无法重建依赖库，则必须在支持 arm6 或 arm7 架构的设备上进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T05:07:25.837

当我尝试在 cpp 文件中添加 ac 标头时，我遇到了同样的问题，如下所示

```
//in c++ header file
#import "cHeader.h" 
```

经过长时间的挣扎后，我了解到要在 cpp 文件中导入 c 标头，您需要执行以下操作：

```
//in c++ header file
extern "C"{
    #import "cHeader.h"
} 
```

我的问题就解决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T01:36:57.790

当我阅读此线程上的答案时，我遇到了完全相同的问题，最终能够在 Xcode 4.5 和 iOS 6 中运行。@idz 的答案效果很好，但您必须将库的项目包含在应用程序的项目中，然后将其设置为依赖项，这并不理想。

步骤 1-8 非常简单明了。您还需要确保标题搜索路径项目设置是准确的。祝你好运！

[XCode 4.3：静态库生成](https://stackoverflow.com/questions/11655931/xcode-4-3-static-library-generation?rq=1)

# c# - 为什么 Int32 的最大值是 0x7FFFFFFF？

> ID：13230041
> 
> 赞同：24
> 
> 时间：2012-11-05T10:19:47.780
> 
> 标签：c#, types, int32

我在 MSDN 文档中看到 的[最大值`Int32`是`2,147,483,647`](https://docs.microsoft.com/en-us/dotnet/api/system.int32.maxvalue?redirectedfrom=MSDN&view=netframework-4.8)，十六进制`0x7FFFFFFF`。

我认为，如果它应该存储最终应该是和 hexadecimal的`Int32`32 位整数值。`4,294,967,295``0xFFFFFFFF`

我的问题是为什么要`Int32`存储 31 位整数值？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-05T10:21:33.747

这是因为它是一个有符号整数。一个无符号的 32 位整数为您提供您期望的值。

查看此 MSDN 页面 - [http://msdn.microsoft.com/en-us/library/exx3b86w(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/exx3b86w(v=vs.80).aspx)

要更深入地解释为什么会这样，请查看 Jackson Popes 答案中与 Two's Complement 数字表示相关的链接。

还有一些[进一步的阅读](http://kias.dyndns.org/comath/13.html)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-05T10:21:34.370

因为一位用于存储符号（Int32 可以小于零）。

[http://en.wikipedia.org/wiki/Two%27s_complement](http://en.wikipedia.org/wiki/Two%27s_complement)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-05T11:56:18.770

Int32 和 Int64 都是有符号的，因此它们可以处理从 -capacity/2 到 (capacity/2)-1（为零）的整数值，这就是为什么最大值不是您期望的值。但是你可以通过使用 unsigned int 只有正数来得到你想要的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-05T10:21:41.297

你没有考虑负数。 `Int32`有标志。

来自 MSDN： http : [//msdn.microsoft.com/en-us/library/system.int32.minvalue.aspx](http://msdn.microsoft.com/en-us/library/system.int32.minvalue.aspx)`MinValue`是`-2,147,483,648`；即十六进制`0x80000000`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-05T10:21:42.533

第一位是符号 - 一个 int32 是有符号的，即它可以是正数/负数（我可能不应该说“第一位”！）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-30T03:10:43.890

In a 2's complement signed n-bit type, the range is from -2^(n-1) to 2^(n-1)-1 because with n bits you can represent 2^n different values, half of which is used for signed numbers because of the sign bit. The remaining 2^(n-1) half is used for non-negative number. Since one is used for 0, there are only 2^(n-1)-1 remaining values for positive numbers

# c# - 动态更改字符串中的html表格标签宽度

> ID：13230044
> 
> 赞同：0
> 
> 时间：2012-11-05T10:20:08.947
> 
> 标签：c#, dynamic-html

我正在做一个发送邮件的CLR程序，我已经将html组合成我的字符串，绑定一些动态值后我就可以发送邮件了。

但现在的问题是，我得到一个包含 HTML 的字符串，所以我想找到第一个`<table>`，然后改变它的宽度。它。[由于模板宽度较大，令人不安]。这是电子邮件的正文。

```
 string StrHtml =" <table cellspacing='1' cellpadding='10' border='0'
style='width:880px'></table>" 
```

我想改变`style='width:880px' to style='width:550px'`

我只在类库中执行此代码。做这个的最好方式是什么？

我的代码是：

```
string ImgPath = string.Empty;
ImgPath = Convert.ToString(ds.Tables[0].Rows[i]["GroupMessage"]);
string pattern = string.Empty;
pattern = System.Text.RegularExpressions.Regex.(ImgPath, "(<table.*?>.*</table>", System.Text.RegularExpressions.RegexOptions.IgnoreCase).Groups[1].Value;  

MailMessage message = new MailMessage();
message.AlternateViews.Add(htmlMail);
message.Body = ImgPath ; //
message.IsBodyHtml = true;
//Other mail sending code here..... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:35:41.750

你可以使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/ "HtmlAgilityPack")，像这样：

```
HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();
htmlDoc.LoadHtml(StrHtml);

var tableNode = ( from node in htmlDoc.DocumentNode.Descendants()
                 where node.Name == "table"
                 select node ).FirstOrDefault();

if ( tableNode != null ) {
    tableNode.Attributes["style"].Value = 
        tableNode.Attributes["style"].Value.Replace("880px", "550px");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:37:35.473

你可以这样做`XDocument`：

```
 using (var reader = new StringReader(StrHtml))
    {
       var doc = XDocument.Load(reader);
       var table = doc.Descendants("table").FirstOrDefault();
       if (table != null)
       {
           var style = table.Attribute("Style");
           if (style != null)
               style.Value = "width:550px";
       }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:38:20.290

这有什么问题？

```
StrHtml = StrHtml.Replace("880px","550px"); 
```

或者这只是一个例子？抱歉，不清楚。

编辑：

使用正则表达式（使用 System.Text.RegularExpressions;）：

```
StrHtml = Regex.Replace(StrHtml, "width:[\d]*px", "width:550px"); 
```

请注意，“width:(numbers)px”文本*必须*存在（并且宽度必须与正则表达式的小写字母相同），否则您将遇到异常。但是，只要用 a 包围它就可以`try{StrHtml = Regex.Replace(StrHtml, "width:[\d]*px", "width:550px");}catch{}`了

最后的最终编辑：

您只想获取表格标签的样式宽度，我收集：

```
try{
StrHtml = Regex.Replace(StrHtml, @"(<table[\s\S]*)(width:[\d]*px)(.*?>)", @"$1width:550px$3");
}
catch{} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T10:26:24.230

我正在获取以下格式的 html 字符串，我只想获取 style="width: 880px" 的属性值，它总是在变化。[这只有在样式标签中提到宽度时才有效。这就是我的情况。]

图像路径 ==>

```
 <table border="0" cellpadding="10" cellspacing="1" style="width: 880px">
    // some other code goes here
    </html> 
```

答案 ==> 我在课堂上使用了正则表达式，[想从该类制作 DLL 文件]

```
string StrStyTag = string.Empty;
StrStyTag = System.Text.RegularExpressions.Regex.Match(ImgPath, "<table.+?style=(.+?)>", System.Text.RegularExpressions.RegexOptions.IgnoreCase).Groups[1].Value; 
```

我得到的值是==>“宽度：880px”，所以在做了一些字符串操作之后，我将 880px 设置为修复 550px。

感谢所有帮助我解决它的人。

# iphone - 如何在点击时显示和隐藏按钮标题

> ID：13230057
> 
> 赞同：1
> 
> 时间：2012-11-05T10:21:03.387
> 
> 标签：iphone, ios, uibutton

我有一组按钮，我想在单击时显示按钮标题并在再次单击时隐藏。这是我的代码，

```
 - (IBAction)buttonAction:(id)sender
{
UIButton *button = (UIButton *)sender;
int index = button.tag;
[temp replaceObjectAtIndex:index withObject:@"1"];
[self showing];
}

 -(void)showing
 {
 UIButton *button = nil;
 NSString *name = nil;
 int i = 0;
 for(UIView *view in self.view.subviews)
 {
    if([view isKindOfClass:[UIButton class]])
    {
        button= (UIButton *)view;
        if(button.tag >= 1 && button.tag <= 16)
        {
            name = [NSString stringWithFormat:@"%@",[texts objectAtIndex:i]];
            if ([[temp objectAtIndex:i] isEqualToString:@"1"])
            {
                [button setTitle:name forState:UIControlStateNormal];
                NSLog(@"current  name :%@",name);
            }
            else
            {
                [button setTitle:@"" forState:UIControlStateNormal];
            }
            i++;
        }
    }
 }
 } 
```

但它会在第一次单击时显示整个按钮标题，我只想显示单击的按钮标题。请帮助我应该对我的代码进行哪些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:29:05.020

```
- (IBAction)buttonAction:(id)sender
{    
    UIButton *button = (UIButton *)sender;
    if (![button.titleLabel.text isEqualToString:@""]) {

        [button setTitle:@"" forState:UIControlStateNormal];
    }
    else {
         // set title same like as you set in showing method
        [button setTitle:GiveTitleHere forState:UIControlStateNormal];        
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:02:44.857

我假设您已经设置了一个数组`temp`，它是视图控制器中的类级别变量。我建议给它一个合适的名字，比如**textArray**

因此，请尝试以下操作：

```
-(IBAction)buttonAction:(id)sender
{
    UIButton *button = (UIButton *)sender;
    int index = button.tag;
    [self showing:index]; //now, this method accepts a parameter.
}

-(void) showing:(NSInteger)index
{
    UIButton* btn = nil;
    index = index - 1; //this is because the array index start from 0, 
                            //but tags have to be more than 0 to be valid
    NSArray* subViewArray = [self.view subviews];

    NSInteger i = 0;

    for (UIView *view in subViewArray) 
    {
        if ([view isKindOfClass:[UIButton class]]) 
        {
            btn = (UIButton*) view;
            NSString* text;
            if (i == index) {
                text = [self.textArray objectAtIndex:i]; //put the array that you are using
                self.previousButtonTag = i; //make a class variable

            }
            else {
                text = @"";
            }
                //NEW EDIT 

                /*  1.fetch the title from self.textArray for "self.previousButtonTag"  
                    2.the title for the current button is there in "text" variable
                    3.compare both the strings and do things as per your liking
                */

            i++;
            [btn setTitle:text forState:UIControlStateNormal];
        }// end of IF
    } //end of FOR
} //end of METHOD 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:28:30.007

如果你设置`button.titlelabel.text=@"some string"`它会在按钮点击时自动消失

# c# - 正则表达式 regex 如何使“和”

> ID：13230058
> 
> 赞同：0
> 
> 时间：2012-11-05T10:21:07.117
> 
> 标签：c#, regex, split, find

我有一段文字，想用正则表达式查找一些字符串。我的问题是我不知道如何在这里制作“&&-and”。

我有这样的文字：

```
AB " something is here;
  and here...
";
...
AB "new line 
 continues ... "; 
```

我想找到所有以“;”结尾的AB

我用于“;”的代码 ：

```
var matches = Regex.Matches(tmp, "(AB) ([^;]*);", RegexOptions.Singleline); 
```

但我怎么能做 `"(AB) ([^(\";)]*)\";"`或只是`"(AB) ([^(\"&&;)]*)(\"&&;")`？

我想拥有：

```
AB

" something is here;
 and here ...
"

AB
"new line
 continues ..." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:28:43.510

`^`只能否定字符类，而字符类又不能包含字符串（但只能包含单个字符）。但是，对于字符串（或者实际上是成熟的正则表达式）有一个类似的概念，称为负前瞻：

```
@"(AB) (\"(?:(?!\";).)*\");" 
```

这现在将使用任意字符 ( `.`)，只要它们不标记 a 的开始`";`。当然，继续使用该`Singleline`选项。您可以在[此处阅读有关环视断言的](http://www.regular-expressions.info/lookaround.html)内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:28:26.643

我不认为`AND`运营商存在甚至是必需的。[阅读这个问题](https://stackoverflow.com/questions/469913/regular-expressions-is-there-an-and-operator)

但是，要完成您的字符串查找解决方案，此正则表达式指南可以为您提供很多帮助。希望能帮助到你。

[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:38:54.197

试试这个`Regex`：

```
AB\s+\"((?:.+\s*)+?(?=\";))\"; 
```

解释：

> ***`(?= subexpression)`*** 零宽度正向超前断言。
> 
> ***`(?: subexpression)`*** 定义一个非捕获组。
> 
> ***`.`*** 通配符：匹配除 . 之外的任何单个字符`\n`。
> 
> ***`\s`*** 匹配任何空白字符。

# php - 使用node.js替换apache/nginx并执行php安全

> ID：13230059
> 
> 赞同：5
> 
> 时间：2012-11-05T10:21:09.540
> 
> 标签：php, node.js, command-line, webserver

我有一个用 node.js 编写的网络服务器，它几乎只是为用户提供静态文件。要为其添加 PHP 支持，我想我可以下载 PHP 并将文件提供给 PHP.exe。如果它由单个用户使用，那将是有效的并且就足够了。然而，对于多个用户将他们的网站托管在服务器上的环境，它会带来一个巨大的安全问题。可以使用 PHP 脚本对任何其他网站甚至整个服务器执行任何他/她想要的操作。

哦，我有没有提到它是一个 Windows 服务器？

无论如何，所以我想要的是获得一些权限以将 php 脚本保存在特定目录中。我正在考虑为每个网站创建一个用户，我将在该网站上应用适当的权限，而不是在使用“运行方式”之类的东西执行 php.exe 时（假设它是可能的）。我还有其他方法可以实现我的目标吗？如果是这样，它们会更好吗？为什么这样？

另外，如果您有兴趣，我的代码如下所示： http: [//pastebin.com/gZjN1mnj](http://pastebin.com/gZjN1mnj)

此外，我知道在使用我的服务器时，$_POST、$_SERVER、$_COOKIE、$_SESSION 等都丢失了，但我已经考虑过如何解决这个问题并对其进行了一次成功的测试。

现在我已经感受到了回应：你为什么要那样做？或者不要，apache/nginx 更好，等等等等。把它当作一个学习过程，我只是对我是否可以让它真正工作很感兴趣^^

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:32:35.340

恭喜混合袋弗兰肯平台你的发展:)

**切换到 Linux 使用 process.setuid**

Node.js 是一个很棒的网络服务器，所以我可以看到它的吸引力。通过在 Windows 上运行 node 和 php，您正在上游游泳。如果你有控制权，我会切换到linux。

如果你在 Linux 中运行，Node 有一个内置函数 process.setguid 和 process.setuid 你必须是 root 才能运行这些，但是 node.js 程序可以作为 root 运行，为每个用户生成一个节点进程，然后监狱本身和将所有流量路由到被监禁特定用户的子节点进程。

**每个用户都有一个特定的 php.ini**

您可以使用 php 安全模式、base_dir 和其他 ini 命令来尝试将 php 锁定到特定的目录树。这是不稳定且不完整的，并且由于存在错误和解决这些问题的方法，其中许多功能已在最新版本中被弃用或删除。但是用你的 php 命令行调用传入一个 ini 文件是微不足道的。

**使用第三方 RUNAS 实用程序**

要在 Windows 中真正获得用户安全，您必须运行类似 autoIT RunAs [http://www.autoitscript.com/autoit3/docs/functions/RunAs.htm](http://www.autoitscript.com/autoit3/docs/functions/RunAs.htm)

与普通的 runas 命令相反，此命令允许您指定密码，以便可以从您的节点进程运行它。

# java - 为eclipse中的下拉菜单填充CommandContributionItem

> ID：13230064
> 
> 赞同：0
> 
> 时间：2012-11-05T10:21:32.623
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我可以以`CommandContributionItem`编程方式创建如下：

```
CommandContributionItemParameter param = new CommandContributionItemParameter(serviceLocator, id, commandId, CommandContributionItem.STYLE_PUSH);
CommandContributionItem item = new CommandContributionItem(this); 
```

如果我将样式更改`CommandContributionItem.STYLE_PUSH`为`CommandContributionItem.STYLE_PULLDOWN`然后我可以在工具栏中创建下拉菜单而不是按钮。

现在我的问题是我将如何填写`items`这个`ContributionItem`。对象上已经存在填充方法，`CommandContributionItem`但我想将其他`CommandContributionItem`对象输入为`menu items`. 我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:42:21.510

1.  添加菜单贡献：

    工具栏：org.eclipse.ui.main.toolbar?after=additions

2.  在上方工具栏下的下拉菜单中添加您希望显示的命令。例如新建下拉菜单。如果您直接单击按钮，它将引导您进入新向导。否则，您可以单击向下箭头。

    假设这个命令的 ID 是：com.org.new.mywizard

3.  添加另一个菜单贡献

    位置 uri 为：menu:com.org.new.mywizard

4.现在无论您想在下拉菜单中添加哪个命令，都将它们添加到上述菜单贡献下

# android - 构建自定义活动堆栈

> ID：13230082
> 
> 赞同：3
> 
> 时间：2012-11-05T10:22:34.353
> 
> 标签：android

从活动 A ，我需要启动 3 个活动；B、C和D；这样后堆栈看起来是：
A -> B -> C -> D
以便在每次后按时，用户进入 D -> C, C -> B 最后是 B -> A 。

B、C 和 D 具有主从关系。A 是一种快捷方式构建器。

`TaskStackBuilder` [不能在预 HoneyComb 构建上执行此操作](http://developer.android.com/reference/android/support/v4/app/TaskStackBuilder.html)。

任何可能的解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:29:50.043

A 应该发射 B. 在`B.onCreate()`发射 C. 在`C.onCreate()`发射 D.

# android - WebGl 支持 android & iphone webviews

> ID：13230088
> 
> 赞同：2
> 
> 时间：2012-11-05T10:22:59.717
> 
> 标签：android, iphone, webview, webgl

当我在网上浏览不同的 WebGL 演示时，我真的觉得它非常适合移动 GL 渲染，但由于它是一个不断发展的概念，它对移动设备的支持受到质疑。到目前为止，我发现只有少数安卓设备支持它，iPhone 也支持。

我发现几个链接：

1.  [安卓](http://developer.sonymobile.com/2011/11/29/xperia-phones-first-to-support-webgl/)
2.  [ios](https://discussions.apple.com/thread/3609881?start=0&tstart=0)等等，但图片不清楚。

任何人都可以更深入地找到确切的图片，因为我想在我的应用程序中的 android/ios 的 webview 上进行更多的 3D 渲染，尽管本机在运行时更加动态？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T13:22:45.897

某些 Android 设备在默认浏览器中支持 WebGL。例如，[索尼 Xperia 手机](http://developer.sonymobile.com/2011/11/29/xperia-phones-first-to-support-webgl/)。

在其他 Android 设备上，您可以使用 Firefox Mobile 或 Opera Mobile 应用程序尝试 WebGL。

iOS 仅通过其移动广告平台 iAds 支持 WebGL。（有可能[通过 WebView 破解你的方法来让它工作](http://atnan.com/blog/2011/11/03/enabling-and-using-webgl-on-ios/)，但只是为了个人演示；它永远不会通过应用商店的审查过程）。

检查您的设备和浏览器是否支持它的最快方法是访问： http: [//get.webgl.org](http://get.webgl.org)并查看您是否获得了旋转立方体。

希望我们很快就会看到 WebGL 出现在更多的移动设备上。

** 编辑 ** 自发布此消息以来，WebGL 现在可以在 Chrome Beta for Android 上启用。看：

[http://thenextweb.com/google/2013/01/25/google-finally-makes-it-easy-to-enable-webgl-support-in-latest-chrome-for-android-beta/](http://thenextweb.com/google/2013/01/25/google-finally-makes-it-easy-to-enable-webgl-support-in-latest-chrome-for-android-beta/)

** 另一个更新 ** iOS8 即将到来！对 Safari 和 WebView：

[http://www.i-programmer.info/news/86-browsers/7385-safari-on-ios8-supports-webgl-the-new-era-can-now-commence.html](http://www.i-programmer.info/news/86-browsers/7385-safari-on-ios8-supports-webgl-the-new-era-can-now-commence.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T20:34:34.310

我有一个带有 android 4.1 的 Galaxy Note 2。默认的 android 浏览器和 android 的 firefox 支持 webgl。它们都有些不稳定，但您至少应该能够运行一些简单的演示。

Firefox 有一个不错的远程调试选项，我发现在 android 上调试我的 webgl 代码时它非常有用。

# django - 删除相关模型django

> ID：13230091
> 
> 赞同：1
> 
> 时间：2012-11-05T10:23:01.770
> 
> 标签：django, django-models

我目前有这个模型我如何在不删除公司模型的情况下删除徽标。如果可能，请提供示例代码，谢谢。

```
class Picture(models.Model):
    owner = models.ForeignKey(User,blank = True)
    caption = models.CharField(max_length=150, blank=True, null=True)
    image = ImageField(upload_to='images/',blank = True, null = True)

class Company(GenericUser):
    company_name = models.CharField(max_length=150,blank = True,null = True)
    logo = models.ForeignKey(Picture,blank = True,null = True) 
```

这是一个模型，然后我将如何从模型看起来像这样的土地模型中删除照片。

```
class Land(Properies):
    photo = models.ManyToManyField(Picture,blank=True,related_name='Land_Pictures',null = True) 
```

我试过这个，它不起作用

```
checked_list = []
start = 1            
land_photos = sorted(list(land.photo.select_related()),reverse =True)
while start < 8:
    photo = 'photo%s' % start
    checked = form.cleaned_data[photo]
    if checked != None:
        checked_list.append(land_photos[start - 1])
        start += 1            
for a_foto in checked_list:
land.photo.remove(a_foto)
try:
    a_foto.remove_all_file()
    a_foto.delete()
except OSError:
    pass 
```

我不断收到一个错误，比如 id 设置为 none，如果我点击刷新，我认为它可以工作

```
Exception Type:     AssertionError
Exception Value:    
Picture object can't be deleted because its id attribute is set to None. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:35:51.413

以这种方式更改您的公司模型：

```
class Company(GenericUser):
    company_name = models.CharField(max_length=150,blank = True,null = True)
    logo = models.ForeignKey(Picture,blank = True,null = True, on_delete=models.SET_NULL) 
```

文档：[https ://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:46:49.240

您必须清除从任何公司对象到要删除的图片对象的引用。

```
logo = company.logo
company.logo = None
logo.delete() 
```

但是，如果图片被多家公司引用，请尝试以下操作：

```
logo = Picture.object.get(...) # the Picture you want to delete
logo.company_set.update(logo=None)
logo.delete() 
```

您还应该考虑将引用从 Company 更改为 Image，以便默认情况下不会删除相关实例。

```
class Company(GenericUser):
    company_name = models.CharField(max_length=150,blank = True,null = True)
    logo = models.ForeignKey(Picture,blank = True,null = True, on_delete=models.SET_NULL) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:35:29.090

有没有什么原因：

a）你正在使用`(GenericUser)`？这无疑会给你带来麻烦。

b）不能只删除属性（如下所示）然后迁移数据吗？

```
class Picture(models.Model):
    owner = models.ForeignKey(User,blank = True)
    caption = models.CharField(max_length=150, blank=True, null=True)
    image = ImageField(upload_to='images/',blank = True, null = True)

class Company(models.Model):
    company_name = models.CharField(max_length=150, blank=True, null=True)
    logo = models.ForeignKey(Picture, blank=True, null=True) 
```

或者您是否尝试在此处删除相关实例： [https ://docs.djangoproject.com/en/dev/ref/models/relations/#django.db.models.fields.related.RelatedManager.remove](https://docs.djangoproject.com/en/dev/ref/models/relations/#django.db.models.fields.related.RelatedManager.remove)

在这种情况下，您将使用`remove()`.

# yii - Yii ajax 验证并通过接收输入。阿贾克斯

> ID：13230092
> 
> 赞同：0
> 
> 时间：2012-11-05T10:23:07.823
> 
> 标签：yii

我想知道如何在 Yii 中做到这一点。

我有一个我希望能够在提交时验证的表单。如果表单有验证错误，则应显示常规表单摘要，但如果表单验证，我想从控制器接收一些数据，将其注入页面，然后重置表单。

到目前为止，我已经想出了这段代码。

```
$('#node-window form').submit(function(){
    var $form = $(this);
    $.ajax({
        type : 'POST',
        url : $form.attr('action'),
        data : $form.serialize(),
        dataType : 'json',
        success : function(data) {
            if(data.status=='error') {
                // Renders the validation summary
                $('#node-window').html(data.form);
            } else {
                // No errors, so inject the data.

            }
        }
    });
    return false;
}); 
```

这实际上是可行的，但是如果表单有错误，则会显示错误摘要，并且第二次按下“提交”，“提交”事件自然不会被拦截。

必须有一些方法可以在 Yii 中更轻松/更智能地做到这一点？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:05:39.693

在 Yii 中可能有更好的方法来做到这一点，但实际上你可以很快解决这个问题。只要您使用的是最新版本的 jQuery，请将您的第一行更改为：

```
$('#node-window').on('submit', 'form', function(){ 
```

这会将事件绑定到`#node-window`并在那里侦听表单提交。然后，当表格被替换时，它就无关紧要了。

# css - css 将不同大小的列表项排列成整齐的行

> ID：13230093
> 
> 赞同：0
> 
> 时间：2012-11-05T10:23:12.510
> 
> 标签：css, list, position

我有一堆作为列表加载的图像，有些具有垂直方向，有些具有水平方向，但我希望它们看起来整齐且左对齐。这是我的 CSS 代码：

```
#designgallery
{
    list-style-type:none;
    margin-top:15px;
    float:left;
}

#designgallery li
{
    display:block;
    margin:5px;
    background-color:#eee;
    padding:5px;
    float:left; 
}
.design-display 
{
    border:1px solid gray;
}
.Horizontal
{
    width:210px;
    height:122px;
}
.Vertical
{
    height:180px;
    width:122px;
} 
```

这是我的 HTML：

```
<ul id="designgallery">
<li> <img class="design-display Horizontal" src="1.jpg" /><!--some other stuff--> </li>
... many list items, some horizontal, some vertical
</ul> 
```

但这就是我得到的：

![右下角的垂直图像应该在左侧开始新的图像行，我该怎么做？](../Images/2e65fde6dd094e8cd21e6a52ab2b69e0.png)

右下角的垂直图像应该在左侧开始新的图像行，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:25:43.517

如果您想要“砌体”效果，Javascript 是解决方案。

如果 javascript 不是一个选项，并且如果您确实知道垂直和水平图像的最大宽度/高度，则可以通过在`li`元素上应用这些最大尺寸来强制对齐，[如 this fiddle](http://jsfiddle.net/3eCLf/)。

缺点是您在图像周围创建了额外的空间，根据您的设计要求，这可能是不受欢迎的，但您至少可以使用 css 使其看起来“不错”。

# html - 为什么即使我设置了属性'disabled="disabled"'，我的复选框也没有被禁用？

> ID：13230100
> 
> 赞同：0
> 
> 时间：2012-11-05T10:23:44.597
> 
> 标签：html, properties, checkbox

我有一个页面，我希望将几个复选框默认设置为禁用，但可以通过 JavaScript 启用。当我查看页面源代码时，复选框上的 HTML 如下所示：

```
<input type="checkbox" id="morning1" name="morning[]" class="morning" value="1" disabled="disabled" /> 
```

但是，这些框实际上已启用。更重要的是，当我在 Firebug 中检查它们时，禁用的属性甚至都没有出现。知道这里发生了什么吗？我的初始 HTML 代码是否存在某种缺陷？

好的，这是我的页面为整个表格单元格的内容生成的内容：

```
<span class="dayOfWeek">1</span>
<div class="cellContent"><input type="checkbox" id="allDay1" name=allDay[] class="allDay" value="1" checked="checked" /> <label for="allDay1">All Day</label><br />
<input type="checkbox" id="morning1" name="morning[]" class="morning" value="1" disabled="disabled" /> <label for="morning1">Morning</label><br />
<input type="checkbox" id="afternoon1" name="afternoon[]" class="afternoon" value="1" disabled="disabled" /> <label for="afternoon1">Afternoon</label><br />
<input type="checkbox" id="evening1" name="evening[]" class="evening" value="1" disabled="disabled" /> <label for="evening1">Evening</label><br />
<input type="checkbox" id="swingShift1" name="swingShift[]" class="swingShift" value="1" disabled="disabled" /> <label for="swingShift1">Swing Shift</label><br />
<input type="checkbox" id="earlyMorning1" name="earlyMorning[]" class="earlyMorning" value="1" disabled="disabled" /> <label for="earlyMorning1">Early Morning</label></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:26:04.883

```
<input 
    type="checkbox" 
    id="allDay1" 
    name=allDay[] 
    class="allDay" 
    value="1" 
    checked="checked" /> 
    <label for="allDay1">All Day</label><br /> 
```

这些属性都不是`disabled="disabled"`. 你实际上并没有添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:28:03.250

你应该做：

```
<input type="checkbox" id="allDay1" name=allDay[] class="allDay" value="1" checked="checked" disabled="disabled" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:15:30.670

我应该为此给自己-1。我在页面上有一些 JavaScript，出于某种我不记得的原因，它正在重新启用任何被禁用的东西。我以 FSM 的名义在想什么？

# java - Swing 中的 3D 组件动画

> ID：13230101
> 
> 赞同：6
> 
> 时间：2012-11-05T10:23:50.610
> 
> 标签：java, swing, 3d, geometry

我在 Swing 工作，我有以下要求。

**要求：**一个 3D 球体以一个`JInternalFrame`（`JPanel`或类似的）旋转，按钮和标签以同心对称的方式围绕球体旋转。单击每个按钮时都会将我带到不同的屏幕。

**问题：**是否有一个 3D API 经过一些“撞墙”后至少可以满足要求？

# javascript - 无法在标记上创建信息窗口

> ID：13230104
> 
> 赞同：1
> 
> 时间：2012-11-05T10:23:59.290
> 
> 标签：javascript, google-maps

```
var point = new google.maps.LatLng(lat, lang);//Code for one marker

        if (type == 'CONTROLLER') 
        {
            mark = new google.maps.Marker(
            {
                position: point,
                title: name,
                map: map,
                icon: "MapImages/controller.png"
            });

        }
function infowindow() //Code for InfoWindow

    {
        var i = 0;
        var j=0;
        var k=0;
        var l=0;
        var m = 0;
        var text =.....;
        alert(text);
        var AJAX = ob_create();
        alert("hello");
        AJAX.onreadystatechange = function () 
            {
            alert(AJAX.readyState);
            if (AJAX.readyState == 4 || AJAX.readyState == "complete") 
                 {
                document.getElementById("i").innerHTML = AJAX.responseXML.getElementsByTagName("name")[i].firstChild[0].nodeValue;
                document.getElementById("j").innerHTML = AJAX.responseXML.getElementsByTagName("add")[j].firstChild[0].nodeValue;
                document.getElementById("k").innerHTML = AJAX.responseXML.getElementsByTagName("mac")[k].firstChild[0].nodeValue;
                document.getElementById("l").innerHTML = AJAX.responseXML.getElementsByTagName("lat")[l].firstChild[0].nodeValue;
                document.getElementById("m").innerHTML = AJAX.responseXML.getElementsByTagName("long")[m].firstChild[0].nodeValue;
            }
            var url = 'Map3.aspx?Text=' +text.toString();
            AJAX.open("Get", url, true);
            AJAX.send(null);
        }
    }, 
```

我已经创建了自定义标记和自定义 InfoWindow，上面是我的代码，
在 Infowindow 中，我需要将标记从标记以字符串形式传递到变量文本中，以便我可以以查询字符串格式将其传递给 aspx 页面，但它被视为对象我无法解决这个问题，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:59:28.180

```
var text = mark.getTitle(); 
```

Mark 是marker 的对象，`getTitle()`是marker 获取通过数据库传递给marker 的设备名称的方法。

# c# - 保存搜索引擎的搜索结果

> ID：13230105
> 
> 赞同：0
> 
> 时间：2012-11-05T10:24:14.590
> 
> 标签：c#, vb.net, visual-studio, web, search-engine

我正在尝试编写一个应用程序来自动在搜索引擎上执行搜索（在搜索框中搜索指定的电话号码）并将结果页面作为任何内容（XML、文本）获取。我已经尝试了几个网络爬虫/爬虫，但我没有找到执行搜索并保存结果数据的东西。他们只能获取我不需要的请求的页面数据。

语言可以是 C#、VB.Net 或 Java，只要提供解决方案即可。谢谢。

我正在寻找执行此操作的工具或代码片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:39:01.483

像这样的函数会将数据提取为字符串，但您必须自己解析其中的数据：

```
Public Shared Function GetWebPageData(ByVal address As Uri) As String
    Dim request As HttpWebRequest
    Try
        request = DirectCast(WebRequest.Create(address), HttpWebRequest)

        Using response As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)
            Using reader As StreamReader = New StreamReader(response.GetResponseStream())
                Return reader.ReadToEnd
            End Using
        End Using
    Catch ex As Exception
        'TODO handle the error here....
        Return ""
    End Try
End Function 
```

用法：

```
Dim xml As String = Networking.GetWebPageData(New Uri("http://www.hitta.se/077-570%2005%2000/f%C3%B6retag_och_personer"))
Debug.WriteLine(xml) 
```

# css - CSS：居中 div 并混合像素和百分比

> ID：13230107
> 
> 赞同：0
> 
> 时间：2012-11-05T10:24:24.087
> 
> 标签：css, center, pixel, percentage

我想`<div>`在我的页面中有一个居中的`width = a % + b`像素。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:32:42.247

你可以给它的 parent `div`，`align="center"` 比如：

```
<div align="center">
   content
</div> 
```

# php - 正则表达式 - 如何使其接受阿拉伯语和英语 alpha

> ID：13230108
> 
> 赞同：2
> 
> 时间：2012-11-05T10:24:28.767
> 
> 标签：php, javascript, regex

我有这个正则表达式

```
'/^[-a-zàáâãäåæçèéêëìíîïðñòóôõöøùúûüý€0-9\s*\.\'\/",_()|& ]*$/i' 
```

它不接受阿拉伯字符。我怎样才能做到这一点？

或者我该如何编辑它以不接受`* & ^ % $`所有非字母英语和阿拉伯语字符？

[http://code.google.com/p/validformbuilder/](http://code.google.com/p/validformbuilder/)中的这个正则表达式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:51:14.890

You should check if it works for all your test cases, but as far as I can tell, the Arabic script is found in Unicode code points `0x0621` through `0x06FF`, `0xFB50` through `0xFDFB`, and `0xFE70` through `0xFEFC`, so if you don't want to use `XRegExp`, you can try (JavaScript)

```
var myregexp = /^[\wàáâãäåæçèéêëìíîïðñòóôõöøùúûüý€\s*.'\/",()|& \u0621-\u06FF\uFB50-\uFDFB\uFE70-\uFEFC-]*$/i; 
```

or (PHP)

```
regex = '%^[\wàáâãäåæçèéêëìíîïðñòóôõöøùúûüý€\s*.\'/",()|& \x{0621}-\x{06FF}\x{FB50}-\x{FDFB}\x{FE70}-\x{FEFC}-]*$%iu' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:45:42.447

将 XRegExp 与 Unicode Base Addon 一起使用：

[http://xregexp.com/plugins/](http://xregexp.com/plugins/)

# java - JPA EclipseLink 添加/更新实体

> ID：13230109
> 
> 赞同：0
> 
> 时间：2012-11-05T10:24:51.657
> 
> 标签：java, jpa, entitymanager

我对 JPA 处理添加/更新实体的方式有点困惑。

ATM，我有这段代码：

```
AltContact c = new AltContact("test");
save(c)
System.out.println("ENTITY: " + contains(c));
c.setEnterpriseName("test2");
save(c);
System.out.println("ENTITY: " + contains(c)); 
```

*save*方法是我的应用程序服务器端的一个简单方法，它请求在 EntityManager 上进行合并：

```
public void save (Object e) {
    em.merge(e);
    em.flush();
} 
```

其中*em*是`EntityManager`.

*contains*再次是服务器端的一种方法，它将询问实体管理器是否存在于当前持久上下文中的给定实体。

上面的代码在我的表中创建了两行，第一行的值为“test”，另一行的值为“test2”，这不是我想要的。

我想创建一个值为“test”的新行，然后在创建该行之后立即更新它并将其值设置为“test2”。我在两次调用*save*后打印出了*contains*的返回，被返回了两次。*`false`*

 *我猜问题来自这样一个事实，即我的实体在第一次调用*save*后不是持久上下文的一部分，所以当我再次调用*save*时，实体管理器认为它是一个新实体并创建一个新行。

怎样才能实现这个更新过程呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:59:40.260

一些东西。首先，为什么需要使用 merge() 来序列化实例，为什么？如果您只是编辑从持久性上下文返回的对象，那么您不需要进行任何合并或保存。

If you need to edit the object as serialized, or detached, then for a new object you need to return the Id of the object from your save, this is what will link the detached object with the managed one. Ideally you would execute a find() to get the object before you edit it.*

# iphone - 如何隐藏 UITabBar 选择样式？

> ID：13230110
> 
> 赞同：2
> 
> 时间：2012-11-05T10:24:58.050
> 
> 标签：iphone, uitabbar, uitabbaritem

在我的应用程序中，我有一个 UITabBar。我想隐藏/删除该选项卡栏项目选择样式，即光泽效果。是否可以通过编程方式进行操作？还有任何方法可以通过编程方式定位选项卡栏项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:33:40.083

试试这个代码可能对你有帮助......

```
// iOS 5.0+
[self.tabBar setSelectionIndicatorImage:[[[UIImage alloc] init]autorelease]];

// for earlier versions

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {
    [self customizeTabBar];
}

- (void)customizeTabBar {
    NSString *imageName = [NSString stringWithFormat:@"tabBackground%i.png", tabBarCtrl.selectedIndex + 1];

    for(UIView *view in tabBarCtrl.tabBar.subviews) {  
         if([view isKindOfClass:[UIImageView class]]) {  
              [view removeFromSuperview];  
         }  
    }  
    UIImageView *background = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:imageName]] autorelease];
    [tabBarCtrl.tabBar insertSubview:background atIndex:0]; 
    [tabBarCtrl.tabBar bringSubviewToFront:background];
    //if needed, here must be adding UILabels with titles, I didn't need it.
} 
```

# jsp - 如何在jsp中将行从一个表拖到另一个表

> ID：13230112
> 
> 赞同：2
> 
> 时间：2012-11-05T10:25:08.050
> 
> 标签：jsp, drag-and-drop, row

如何在jsp中将行从一个表拖到另一个表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:37:01.860

[HTML5是使用 javascript 实现](http://www.w3schools.com/html/html5_intro.asp)[拖放的](http://www.w3schools.com/html/html5_draganddrop.asp)前进方向，这里有一些链接可以帮助您开始使用它：

1.  [HTML5 拖放基础知识](http://www.html5rocks.com/en/tutorials/dnd/basics/)
2.  [HTML5 拖放演示](http://html5demos.com/drag)

但是，如果您不想使用它，那么[这个答案](https://stackoverflow.com/a/12671737/1761033)可能会对您有所帮助。答案最后还包括一个 jsfiddle（工作示例）链接，您可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:46:35.933

您可以使用 javascript 库来实现它。看到[这个](http://www.isocra.com/2007/07/dragging-and-dropping-table-rows-in-javascript/)

# c# - 使用 TimeSpan.ParseExact 解析时，输入字符串的格式不正确

> ID：13230113
> 
> 赞同：1
> 
> 时间：2012-11-05T10:25:09.727
> 
> 标签：c#, datatable, timespan

我有一个`DataTable` `dtTest`.

我想从该表的第 2 行和第 2 列解析一个单元格 此单元格的格式可以是`hh:mm:ss or h:mm:ss`

我想解析它以切换到格式 h.mm 或 hh.mm

在这里我验证是否有符号“ `:`”或不在位置`2`

```
string typeTime = dtTest.Rows[2][2].ToString().Substring(1, 1); 
```

现在我解析它们：

```
TimeSpan.ParseExact(dtTest.Rows[2][2].ToString(), 
    typeTime == "." ? "h'.'mm" : "hh'.'mm", CultureInfo.InvariantCulture); 
```

解析后它给了我一个错误“**输入字符串的格式不正确**”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:30:12.807

您正在尝试*准确*解析字符串- 您的字符串包含格式字符串中不存在的秒组件。您的字符串还包含`:`您指定的位置`.`。

以下应该有效：

```
TimeSpan.ParseExact(dtTest.Rows[2][2].ToString(), 
    "h':'mm':'ss", CultureInfo.InvariantCulture); 
```

请注意，`h`格式说明符将正确理解`8`or `08`。

此外，您可以简单地使用[标准`TimeSpan`格式字符串](http://msdn.microsoft.com/en-us/library/ee372286.aspx)之一- 特别是`g`OR`c`而不是自定义格式字符串：

```
TimeSpan.ParseExact(dtTest.Rows[2][2].ToString(), 
    "g", CultureInfo.InvariantCulture);

TimeSpan.ParseExact(dtTest.Rows[2][2].ToString(), 
    "c", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:29:38.460

试试这个：

```
TimeSpan s = TimeSpan.ParseExact(dtTest.Rows[2][2].ToString(), "g", CultureInfo.CurrentCulture); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T10:31:04.130

```
// zero based row and column index
var rows = dtTest.AsEnumerable();
var secondRow = rows.ElementAtOrDefault(1);
if (secondRow != null)
{
    String secondFieldText = secondRow.Field<String>(1);
    String format = secondFieldText.Length == 8 ? "hh:mm:ss" : "h:mm:ss";
    TimeSpan time = TimeSpan.ParseExact(secondFieldText, format, CultureInfo.InvariantCulture);
} 
```

# java - Java：简单的 BigDecimal 逻辑错误

> ID：13230115
> 
> 赞同：3
> 
> 时间：2012-11-05T10:25:16.617
> 
> 标签：java, bigdecimal

我有一段简单的代码，它的行为不正常。

这段代码试图添加一个 BigDecimals 数组，然后除以 array.length 以找到平均值。但是，算法的第一阶段未能正确地将数组相加在一起（在变量“sum”中）。

```
public BigDecimal getAverageHeight()
{
    BigDecimal sum = new BigDecimal(0);
    BigDecimal[] heights = getAllHeights();

    for (int a = 0; a < heights.length; a++)
    {
        sum.add(heights[a]);
        System.out.println("Height[" + a + "] = " + heights[a]);
        System.out.println("Sum = " + sum.setScale(2, BigDecimal.ROUND_HALF_UP));
    }        

    return sum.divide(new BigDecimal(heights.length));
} 
```

输出如下：

```
Height[0] = 24  
Sum = 0.00  
Height[1] = 24  
Sum = 0.00  
Height[2] = 24  
Sum = 0.00  
Height[3] = 26  
Sum = 0.00  
Height[4] = 26  
Sum = 0.00  
Height[5] = 26  
Sum = 0.00 
```

我确定这是一个简单的错误，但我已经厌倦了关注这个问题，提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T10:27:56.320

[`BigDecial.add()`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#add%28java.math.BigDecimal%29) *返回*总和，它不会*改变*它。做这个：

```
sum = sum.add(heights[a]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T10:27:58.900

[BigDecimal](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigDecimal.html)对象是不可变的，其所有修改其值的方法都返回一个新`BigDecimal`对象。新创建的对象包含修改的值。

你需要做这样的事情：

```
sum = sum.add(heights[a]); 
```

这也适用于`setScale()`and`divide()`操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T10:29:33.110

将 sum 加法运算的结果值赋回变量 sum

```
for (int a = 0; a < heights.length; a++)
    {
        sum = sum + heights[a];
        System.out.println("Height[" + a + "] = " + heights[a]);
        System.out.println("Sum = " + sum.setScale(2, BigDecimal.ROUND_HALF_UP));
    } 
```

# javascript - 在 OS X 上的 Safari 6 的主页上向左或向右移动 div 会创建工件

> ID：13230116
> 
> 赞同：1
> 
> 时间：2012-11-05T10:25:19.767
> 
> 标签：javascript, jquery, html

网站：[http](http://www.laederach.com/chde/sortiment.html) ://www.laederach.com/chde/sortiment.html 浏览器：OS X Lion 上的 Safari 6

在这里，您在页面中心有一个可滚动的内容。它在除 OS X 上的 Safari 之外的所有 Web 浏览器中都能完美运行。不知何故，当向左或向右滚动时，Safari 更新背景的速度不够快，并产生了白色伪影（主体背景为白色）。

如何阻止 Safari 移动页面背景？Chrome 做得对。

这就是神奇的代码：

```
 /*Slider at SortimentArea*/
function initSlider(){
     //$('#sortimentScrollbar').tinyscrollbar({ axis: 'x', size: 953 });
    //Scroll Drag
    var dragLimit = 1270;
    var scrollbarWidth = 945;
    var scrollbarThumbWith;
    var thumbPos;
    var thumbPosSave;
    thumbPos = $('.thumb').css("left");
    //thumbPosSave = $('.thumb').data('savePoint', thumbPos);

    //Calc size of scrollbar  
    if(scrollbarWidth > $('#sortimentScrollbar .overview').width()){
      $('.scrollbar .thumb').width(scrollbarWidth);  
    }else{
      $('.scrollbar .thumb').width( dragLimit * scrollbarWidth/$('#sortimentScrollbar .overview').width());     
      $('.thumb').css("left", 40);
    }  

  scrollbarThumbWidth = $('.scrollbar .thumb').width();

  //howAllImageInstant;

  //Set positions for scrollbar and sortiment if coming back from productpage
  setOldScrollbarAndSortimentPosition();
  if (($('.scrollbar .thumb').css("left").replace('px','')- -1*($('.scrollbar .thumb').css("width").replace('px',''))) > $('.scrollbar').css("width").replace('px',''))
    {
      //alert("bigger");
    }
    //Prevent Links from firing on move
    $('#sortimentScrollbar .overview a').click(function(){
      if($('#sortimentScrollbar .overview').data('down')){
        return false;
      }
  });

    //Set up the Moving Pane
    $('#sortimentScrollbar .overview').mousedown(function(event){
      event.preventDefault();
      $(this)
        .data('down', true)
        .data('x', event.clientX)
        .data('left', -1*$(this).position().left);
      return false;
    }).mouseup(function(event){
      event.preventDefault();
      $(this)
        .data('down', false);
    }).mousemove(function(event){      
      event.preventDefault();
      if($(this).data('down') == true){
        var pos = $(this).data('left') + $(this).data('x') - event.clientX;
        if(pos <= $(this).width()-dragLimit && pos >= 0){
          $(this).css('left', -1*(pos));
          $('.scrollbar .thumb').css('left', (scrollbarWidth/$('#sortimentScrollbar .overview').width())*pos);  
      savePositionsOfScrollingElements();
        }
      }
    }).mouseleave(function(event){
      $(this)
        .data('down', false);
    })

    .bind("touchstart", function(event){
      event.preventDefault();
      $(this)
        .data('down', true)
        .data('x', event.pageX)
        .data('left', -1*$(this).position().left);
      return false;
    }).bind('touchend', function(event){
      event.preventDefault();
      $(this)
        .data('down', false);
    }).bind('touchmove', function(event){
      event.preventDefault();
      if($(this).data('down') == true){
        var pos = $(this).data('left') + $(this).data('x') - event.pageX;
        if(pos <= $(this).width()-dragLimit && pos >= 0){
          $(this).css('left', -1*(pos));
          $('.scrollbar .thumb').css('left', (scrollbarWidth/$('#sortimentScrollbar .overview').width())*pos);          
          savePositionsOfScrollingElements();
        }
      }
    });

  //Set up the Scrollbar
  $(".scrollbar").click(function(event){
    window.setScrollbarViaClick = true;
    var x = event.pageX - $(this).offset().left;
    var windowWidth = $(window).width();
    var leftValueCorrention = 0;
  if (window.isSlide != true)
  {
    $newThumbLeftValue = 0
    if ((x-(leftValueCorrention +($(".thumb").css("width").replace('px','')/2))) < 0)
      {
      $newThumbLeftValue = 0;
      //$(".thumb").css("left",0);
        }
      else if((x-(leftValueCorrention +($(".thumb").css("width").replace('px','')/2)))-(-1*$(".thumb").css("width").replace('px','')) > $(".scrollbar").css("width").replace('px',''))
      {
      $newThumbLeftValue = $(".scrollbar").css("width").replace('px','')-$(".thumb").css("width").replace('px','')-10;
        //$(".thumb").css("left",$(".scrollbar").css("width").replace('px','')-$(".thumb").css("width").replace('px','')-10);
      }
      else
      {
      $newThumbLeftValue = x-(leftValueCorrention +($(".thumb").css("width").replace('px','')/2));
      //$(".thumb").css("left",x-(485+($(".thumb").css("width").replace('px','')/2)));   
     }
     $(".thumb").animate({
      left: $newThumbLeftValue
    }, 200, function(){});

    $newOverviewLeft = -1*($(".overview").css("width").replace('px','')/$(".scrollbar").css("width").replace('px','')*$newThumbLeftValue);
    $(".overview").animate({
      left: $newOverviewLeft
    }, 200, function(){savePositionsOfScrollingElements()});
    $(".overview").css("left",$newOverviewLeft);
    // $(".overview").css("left",-1*($(".overview").css("width").replace('px','')/$(".scrollbar").css("width").replace('px','')*$(".thumb").css("left").replace('px','')));
  }
    window.isSlide = false;
  });

  $('.scrollbar .thumb').mousedown(function(event){
    window.isSlide = true;
      event.preventDefault();
      $(this)
        .data('down', true)
        .data('x', event.clientX)
        .data('left', -1*$(this).position().left);
      return false;
    }).bind('touchstart', function(event){
      event.preventDefault();
      $(this)
        .data('down', true)
        .data('x', event.pageX)
        .data('left', -1*$(this).position().left);
      return false;
    }).bind('touchend', function(event){
      event.preventDefault();
      $('.scrollbar .thumb').data('down', false);
    }).bind('touchmove', function(event){
      event.preventDefault();
      if($('.scrollbar .thumb').data('down') == true){
        var posBar = -1*($('.scrollbar .thumb').data('left') + $('.scrollbar .thumb').data('x') - event.pageX);
        if(posBar <= scrollbarWidth-scrollbarThumbWidth && posBar >= 0){
          $('.scrollbar .thumb').css('left', posBar);
          var visPos = -1*(($('#sortimentScrollbar .overview').width()*posBar)/scrollbarWidth);
          $('#sortimentScrollbar .overview').css('left', visPos);
      savePositionsOfScrollingElements();
        }
      }
  });

    $('#bgDiv').mouseup(function(event){
      $('.scrollbar .thumb').data('down', false);
    }).mousemove(function(event){
      event.preventDefault();
      if($('.scrollbar .thumb').data('down') == true){
        var posBar = -1*($('.scrollbar .thumb').data('left') + $('.scrollbar .thumb').data('x') - event.clientX);
        if(posBar <= scrollbarWidth-scrollbarThumbWidth && posBar >= 0){
          $('.scrollbar .thumb').css('left', posBar);
          var visPos = -1*(($('#sortimentScrollbar .overview').width()*posBar)/scrollbarWidth);
          $('#sortimentScrollbar .overview').css('left', visPos);          
      savePositionsOfScrollingElements();
        }
      }
    });

  } 
```

你最好检查一下页面上的 html，这对这里来说太多了。

谢谢大家

我目前无法回答我的问题，但我偶然发现了问题。请参阅下面的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:28:59.380

试试这个：

```
background-position:fixed; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:52:23.863

问题是我用来修复 Chrome 错误的 -webkit-transform 导致有时不显示图像。这个“黑客”已经使用`-webkit-transform: scale(1);`

禁用此 CSS 属性可修复 Safari 中的问题，该问题无论如何都不需要此 hack。

# c++ - Message Protobuf 中的 Message 设置字段

> ID：13230117
> 
> 赞同：10
> 
> 时间：2012-11-05T10:25:21.723
> 
> 标签：c++, nested, protocol-buffers

我有以下 protobuf 定义：

```
message CBMessage {

    required int32 type = 1; //defines the kind of message that we send
    optional RepoMessage repomessage = 2;

    message RepoMessage { 
        optional int32 nodeid = 1;
        optional int32 timestampsec = 2;
        optional int32 timestampmicrosec = 3;
    }
} 
```

如您所见，`repomessage`归档是“外部”消息的归档`CBMessage`。

我想访问`nodeid`（“内部”消息的`RepoMessage`）归档以修改此参数。所以我创建了一个 CBMessage 对象：

```
CBTxMessages::CBMessage* cbmsg;
this->cbmsg = new CBTxMessages::CBMessage; 
```

我试图以`nodeid`这种方式修改文件：

```
this->cbmsg->repomessage().set_nodeid(message[0]); 
```

然而，我在编译时收到以下错误：

> 错误：pasar 'const CBTxMessages::CBMessage_RepoMessage' como el argumento 'this' de 'void CBTxMessages::CBMessage_RepoMessage::set_nodeid(google::protobuf::int32)' descarta a los calificadores [-fpermissive]

（错误是西班牙语，但我认为您可以理解）。可能的翻译是：

> “'void CBTxMessages :: CBMessage_RepoMessage :: set_nodeid (google :: protobuf :: int32)' 的 'this' 参数丢弃了限定符”）

我对其进行了调查，发现问题与`repomessage`归档返回 ( `repomessage()`) 的“基本 getter”作为 const 引用返回（因此不能直接修改）这一事实有关，但我确实希望对其进行修改。

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T10:43:42.043

代替

```
this->cbmsg->repomessage().set_nodeid(message[0]); 
```

你需要

```
this->cbmsg->mutable_repomessage()->set_nodeid(message[0]); 
```

直接设置`repomessage`字段。`repomessage()`将返回一个`const CBMessage_RepoMessage&`无法修改的。

# emacs - 在 markdown-mode 中打开 show-trailing-whitespace

> ID：13230119
> 
> 赞同：2
> 
> 时间：2012-11-05T10:25:30.577
> 
> 标签：emacs, markdown

我想知道`show-ws-toggle-show-trailing-whitespace`在`markdown-mode`使用`.emacs`文件或markdown文件头时如何打开，例如：`<!-- -*- mode: Markdown; [FooBar...] -*- -->`

**解决方案：**

```
; open all Markdown files with markdown-mode                                                        
(add-to-list 'auto-mode-alist '("\\.md$" . markdown-mode))

; set show-trailing-whitspaces in markdown-mode                                                     
(add-hook 'markdown-mode-hook 'show-ws-toggle-show-trailing-whitespace) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:14:30.787

把它放在你的初始化文件中，将为所有`markdown-mode`缓冲区打开尾随空格突出显示：

```
(add-hook 'markdown-mode-hook 'show-ws-highlight-trailing-whitespace) 
```

或者，使用`eval`伪局部变量允许您为特定文件打开它：

```
<!-- -*- eval: (show-ws-highlight-trailing-whitespace) -*- --> 
```

* * *

在任何情况下，您都必须将其放入您的 init 文件中，以确保`show-ws-highlight-trailing-whitespace`正确加载：

```
(require 'show-wspace) 
```

# sharepoint - 如何在 Sharepoint 2010 中将页面添加到 Web 模板

> ID：13230125
> 
> 赞同：1
> 
> 时间：2012-11-05T10:25:46.887
> 
> 标签：sharepoint, sharepoint-2010

我使用以下帖子创建了一个基本的 Web 模板，并向其中添加了一个自定义列表，这工作正常。[http://sebastiantegel.wordpress.com/2012/06/26/webtemplates-is-the-way-to-go/](http://sebastiantegel.wordpress.com/2012/06/26/webtemplates-is-the-way-to-go/)

我现在想向 Web 模板添加一个屏幕/页面，它将显示此列表以及 2 个可视 Web 部件，左侧的导航栏应链接到该页面（我知道如何执行此部分）。

我是一个新的共享点开发人员。

我需要向 Web 模板添加一个页面，该页面将显示一个列表以及 2 个自定义可视 Web 部件。

我如何在 Visual Studio 中执行此操作（必须在 Visual Studio 中完成）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:46:34.167

您可以在 SharePoint 中使用两种类型的页面。第一个称为应用程序页面。这些对于管理类型功能以及您可能希望为场中的每个站点公开的页面都很有用。它们易于设置，但请注意它们不能在 SharePoint 设计器中修改，也不能在沙盒解决方案中使用

[如何：创建应用程序页面](http://msdn.microsoft.com/en-us/library/ee231578.aspx)

第二种方法是将页面上传到页面库或其他文档库之类的库中。

[如何：使用模块包含文件](http://msdn.microsoft.com/en-us/library/ee231524.aspx)

应用程序页面位于硬盘驱动器上。使用模块上传的页面将存在于内容数据库中。

祝你好运

# c# - 过程 insertSerial 没有参数并且提供了参数

> ID：13230126
> 
> 赞同：0
> 
> 时间：2012-11-05T10:25:50.287
> 
> 标签：c#, asp.net, stored-procedures

下面是我存储在 MSSQL 服务器中的 SP。

```
USE [testdb]
GO
/****** Object:  StoredProcedure [dbo].[insertSerial]    Script Date: 11/05/2012 16:38:20 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[insertSerial]
AS

DECLARE @start int
DECLARE @end int
DECLARE @expdate datetime

BEGIN TRAN
WHILE @start < @end
BEGIN
 INSERT tbl_serial VALUES (@start, @expdate)
 SET @start = @start + 1
 END
 COMMIT TRAN 
```

然后我尝试像这样从我的 ASP.NET 应用程序调用 SP -

```
 SqlConnection sqlconn = new SqlConnection(ConfigurationManager.ConnectionStrings["connstr"].ConnectionString);
        SqlCommand cmd = new SqlCommand("insertSerial", sqlconn);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@start", txtStart.Text);
        cmd.Parameters.AddWithValue("@end", txtEnd.Text);
        cmd.Parameters.AddWithValue("@expdate", System.DateTime.Now);

        try
        {
            sqlconn.Open();
            cmd.ExecuteNonQuery();
        }
        catch (SqlException ex)
        {
            lblStatus.Text = ex.Message;
        }
        finally
        {
            sqlconn.Close();
        } 
```

然后我得到了这个`Procedure insertSerial has no parameters and arguments were supplied.`错误。是不是因为我在SP中声明参数的方式不对？如果是这样，我该如何解决它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:30:00.033

sp是无效的sql

这是如何声明参数

`ALTER PROCEDURE [dbo].[foo] @bar INT AS BEGIN`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:29:02.047

您的存储过程没有参数，因此您可以`declare your parameters`在存储过程`between brackets`中。

```
CREATE PROCEDURE dbo.insertSerial
(
    @start  varchar(1024),
    @end varchar(1024),
    @expdate datetime

)
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:01:45.370

你在这个 SP 中声明了 SQL 变量，你需要在这个 sp 中定义参数，比如

```
ALTER PROCEDURE [dbo].[insertSerial]
 @start int
 @end int
 @expdate datetime
AS 
```

# c# - 在图像的右上角绘制一个字符串

> ID：13230129
> 
> 赞同：0
> 
> 时间：2012-11-05T10:26:04.467
> 
> 标签：c#, image, graphics

我想获取点 X 和 Y 值，以便可以在右上角绘制一个字符串。我正在这样做：

```
string str = "A quick brown fox is absent";
pointX = Convert.ToInt32(img.Width - str.Length);
pointX = pointX - 20; //so that I have 20 pixels after the string
pointY = 20; // 20 pixels from the top 
```

生成的图像是：

![在此处输入图像描述](../Images/bf9b19b46d0ec1cf40edcd736fc7224c.png)

但我想要这个：

![在此处输入图像描述](../Images/f31dd456b0e5cd06025c9f863080c476.png)

（虽然字符串不清楚，用Paint编辑）

任何帮助表示赞赏。

更新：

```
font: Calibri
size: 20 
```

需要编辑我的代码或示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:30:28.247

您应该使用[Graphics.MeasureString](http://msdn.microsoft.com/en-us/library/6xe5hazb.aspx)而不是`str.Length`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:35:53.053

除了 LB 建议的内容之外，您还应该查看[StringAlignment](http://msdn.microsoft.com/en-us/library/system.drawing.stringalignment.aspx#Y651)和[LineAlignment](http://msdn.microsoft.com/en-us/library/system.drawing.stringformat.linealignment.aspx)。检查出。

# sql - 在 SQL Navigator 中选择表的所有大写值行

> ID：13230133
> 
> 赞同：4
> 
> 时间：2012-11-05T10:26:30.537
> 
> 标签：sql, oracle

我有一个带有电子邮件地址列的表格。表中的某些电子邮件地址包含大写字母。我想获取所有带有大写电子邮件的行（以便将它们设置为小写）。如何选择电子邮件地址包含大写字母的所有行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T10:29:34.350

我相信 Oracle[默认情况下区分大小写](https://stackoverflow.com/a/7425931/163495)？如果是这样，那么这应该工作：

```
SELECT *
FROM table_name
WHERE LOWER(email) <> email 
```

如果这有效，那么您可以简单地更新它们

```
UPDATE table_name
SET email = LOWER(email)
WHERE LOWER(email) <> email 
```

# java - addAll to Set 没有在java中添加值

> ID：13230134
> 
> 赞同：1
> 
> 时间：2012-11-05T10:26:31.183
> 
> 标签：java, collections, set, add

我在 Object(Obj1) 中有一个属性

```
Set<AssignedService> serviceList;
public Set<AssignedService> getServiceList(); 
```

在某些情况下，我正在执行以下操作

```
Obj1.getServiceList().clear();
Obj1.getServiceList().addAll(services); 
```

服务也设置在哪里

但我看到的最终结果是服务集有 4 个对象/数据元素，但 Obj1.getServiceList() 在 addAll 之后返回一个空集

这里有什么问题。AssignedService 对象是否有问题，因为它没有实现 IComparable

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:09:58.597

你应该首先阅读这篇[精彩的](http://www.javapractices.com/topic/TopicAction.do?Id=17)文章`.equals()`

然后，正如其他人指出的那样，检查您在课堂`equals()` **上的实现。** 最有可能在这里找到根本原因。`.hashcode()``AssignedService`

您还可以检查调用的返回值`.addAll(...)`-`false`表明底层`Set`没有被方法调用修改。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:30:32.540

检查 AssignedService 中 equals() 的实现。

[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)：不包含重复元素的集合。更正式地说，集合不包含一对元素 e1 和 e2 使得 e1.equals(e2)，并且最多包含一个空元素。正如它的名字所暗示的，这个接口模拟了数学集合抽象。

# android - 无法在 android 中使用城市飞艇获得推送通知

> ID：13230141
> 
> 赞同：0
> 
> 时间：2012-11-05T10:26:46.913
> 
> 标签：android, push-notification, urbanairship.com

我在 Google 控制台中创建了一个应用程序，并获取了 GCM 服务器 API 密钥。我已经按照 Urban Airship 的这个链接来配置推送通知的应用程序。[https://docs.urbanairship.com/pages/viewpage.action?pageId=1509252](https://docs.urbanairship.com/pages/viewpage.action?pageId=1509252)

我已经请求了 Urban Airship 并获得了在我的应用程序中使用 GCM 的权限，并在 Urban Airship 中创建了应用程序。我从 Urban Airship 下载了示例应用程序，并将包名称更改为我在 Urban Airship 应用程序中提供的名称。我在我的 Toshiba 选项卡中运行该应用程序，具有 Android 4.0.3 操作系统。我从示例代码中获得了 AppId。当我尝试从 Urban Airship 应用程序发送测试推送时，我没有收到通知。甚至没有收到任何错误。我也为 iphone 实现了这个，插入了证书。我得到了 iphone 的推送。我可以在 Urban Airship 的应用程序中看到设备令牌。但我在 AppId 列中看到，如“您没有任何注册的 AppId”。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:47:54.507

有一些事情会有助于看待这个问题。首先，您是否有显示成功注册到 Urban Airship 的 logcat 输出，响应为 200？

此外，有时 Web 控制台在 API 注册后可能需要一些时间来刷新自身，如果您的 APID 仍未在 Web 控制台中显示为已注册，我建议发送电子邮件`support@urbanairship.com`，他们可以查看您的应用程序密钥并更好地帮助您那里。

# c++ - ARM 上的 Windows 计算机视觉 (WinRT)

> ID：13230147
> 
> 赞同：0
> 
> 时间：2012-11-05T10:26:58.897
> 
> 标签：c++, image-processing, opencv, computer-vision, windows-store-apps

我正在[为 Windows RT 学习 FastCV (Alpha)](https://developer.qualcomm.com/mobile-development/mobile-technologies/computer-vision-fastcv/tools-and-resources)。根据[入门指南](https://developer.qualcomm.com/mobile-development/mobile-technologies/computer-vision-fastcv/getting-started-guide)：

> 第一个实现旨在在任何 ARM 处理器上高效运行，并命名为“FastCV for ARM”。第二个 FastCV 实现仅在 Qualcomm SoC 上运行，称为“FastCV for Snapdragon”。“FastCV for Snapdragon”与“FastCV for ARM”具有相同的 API，但它提供了库中包含的 CV 函数的硬件加速实现。

然后metro lib集成指南说：

> ***突出显示的配置管理器***应设置为发布模式（metro lib 已为此模式编译），平台应设置为 ARM。如果 ARM 默认没有出现，在配置管理器中点击添加新平台 -> ARM。

**问题：**

*   这是否意味着我们不能在 ia/x86 系统上运行的 Windows Store 应用程序上使用这个库？
*   FastCV 代码是否也只能在 Snapdragon 或其他 ARM 处理器（如 Tegra 3）上运行？
*   在 Windows RT 上是否有任何其他用于 OCR 的 CV 实现？

# c# - 如何强制 WPF 启动窗口到特定屏幕？

> ID：13230151
> 
> 赞同：9
> 
> 时间：2012-11-05T10:27:06.240
> 
> 标签：c#, wpf, xaml, window, startup

我有一个 WPF 应用程序，它将通过专用窗口在投影仪上显示信息。我想配置用于投影仪显示的屏幕以及用于主应用程序窗口的屏幕。

此代码将在指定屏幕上生成投影仪输出：

```
var screen = GetProjectorScreen();
_projectorWindow = new ProjectorWindow();
_projectorWindow.Left = screen.WorkingArea.Left;
_projectorWindow.Top = screen.WorkingArea.Top;
_projectorWindow.Owner = _parentWindow;
_projectorWindow.Show();

public static Screen GetProjectorScreen()
{
    var screens = Screen.AllScreens;
    if (screens.Length > 1 && Settings.Default.DisplayScreen < screens.Length)
    {
        return screens[Settings.Default.DisplayScreen];
    }
    return screens[0];
} 
```

我试图用启动形式做同样的把戏，但到目前为止还没有成功。我试图在 MainWindow 构造函数中设置 Top 和 Left 属性，但这不起作用。

通过设置 StartupUri 从 App.xaml.cs 启动启动窗口：

```
StartupUri = new Uri("Windows/MainWindow.xaml", UriKind.Relative); 
```

还有其他方法可以启动启动表格吗？我试图只调用构造函数，但这会导致崩溃，因为不再加载某些资源。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T12:50:01.100

我让它工作了。在设置窗口位置之前，需要将 WindowState 设置为 Normal。并且在创建窗口之前，即在构造函数调用之后，该设置将根本不起作用。因此，我在 Windows_Loaded 事件中调用了显式设置。如果需要移动窗口，这可能会导致闪烁，但这对我来说是可以接受的。

SetScreen 方法也应该在用户手动更改屏幕设置后调用。

```
private void SetScreen()
{
    var mainScreen = ScreenHandler.GetMainScreen();
    var currentScreen = ScreenHandler.GetCurrentScreen(this);
    if (mainScreen.DeviceName != currentScreen.DeviceName)
    {
        this.WindowState = WindowState.Normal;
        this.Left = mainScreen.WorkingArea.Left;
        this.Top = mainScreen.WorkingArea.Top;
        this.Width = mainScreen.WorkingArea.Width;
        this.Height = mainScreen.WorkingArea.Height;
        this.WindowState = WindowState.Maximized;
    }
} 
```

备份 ScreenHandler 实用程序非常简单：

```
public static class ScreenHandler
{
    public static Screen GetMainScreen()
    {
        return GetScreen(Settings.Default.MainScreenId);
    }

    public static Screen GetProjectorScreen()
    {
        return GetScreen(Settings.Default.ProjectorScreenId);
    }

    public static Screen GetCurrentScreen(Window window)
    {
        var parentArea = new Rectangle((int)window.Left, (int)window.Top, (int)window.Width, (int)window.Height);
        return Screen.FromRectangle(parentArea);
    }

    private static Screen GetScreen(int requestedScreen)
    {
        var screens = Screen.AllScreens;
        var mainScreen = 0;
        if (screens.Length > 1 && mainScreen < screens.Length)
        {
            return screens[requestedScreen];
        }
        return screens[0];
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-04T21:33:38.283

接受的答案不再适用于应用程序清单中具有每个监视器 DPI 的 Windows 10。

这对我有用：

```
public partial class MyWindow : Window
{
    readonly Rectangle screenRectangle;

    public MyWindow( System.Windows.Forms.Screen screen )
    {
        screenRectangle = screen.WorkingArea;
        InitializeComponent();
    }

    [DllImport( "user32.dll", SetLastError = true )]
    static extern bool MoveWindow( IntPtr hWnd, int X, int Y, int nWidth, int nHeight, bool bRepaint );

    protected override void OnSourceInitialized( EventArgs e )
    {
        base.OnSourceInitialized( e );
        var wih = new WindowInteropHelper( this );
        IntPtr hWnd = wih.Handle;
        MoveWindow( hWnd, screenRectangle.Left, screenRectangle.Top, screenRectangle.Width, screenRectangle.Height, false );
    }

    void Window_Loaded( object sender, RoutedEventArgs e )
    {
        WindowState = WindowState.Maximized;
    }
} 
```

仅设置左/上不起作用。根据我的测试，每个显示器的 DPI 意识只有在窗口已经创建并放置在某个显示器上之后才会启动。在此之前，显然窗口的左/上属性与主监视器的 DPI 一起缩放。

对于每个监视器 DPI 和监视器布局的某些组合，这会导致一个错误，即将 Left/Top 属性设置为 System.Windows.Forms.Screen 矩形的像素值会导致窗口位于其他位置。

上述解决方法仅适用于最大化，它并不总是设置正确的窗口大小。但至少它设置了正确的左上角，足以让最大化正常工作。

# android - 如何从安卓模拟器中删除谷歌帐户？

> ID：13230158
> 
> 赞同：1
> 
> 时间：2012-11-05T10:27:46.123
> 
> 标签：android, android-emulator

我想删除我在模拟器上为 Google API 8 级 AVD 创建的 Google 帐户。

我尝试将其从中删除`Settings -> Accounts & sync -> Selecting account -> Remove Account`，但收到此消息，

> 某些应用程序需要此帐户。您只能通过将手机重置为出厂默认设置来删除它。您可以在“设置”应用程序的“隐私”下执行此操作

我尝试通过将手机重置为出厂默认设置来做到这一点`Settings -> Privacy -> Factory data reset -> Reset data -> Erase everything`，它会显示一个`Power Off`消息对话框，带有不确定的进度条，后来模拟器卡住了。然后，稍后，当我关闭并重新启动模拟器时，该帐户不会被删除。

另外，我想知道是否可以通过代码删除帐户。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T10:32:37.477

转到 Android AVD Manager，启动您的 avd，然后检查`Wipe user data`.

这会将 AVD 恢复为其初始配置并擦除所有用户数据、帐户和应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-26T11:08:12.977

*   转到设置-> 帐户。
*   单击`google`写入的位置。您应该会看到帐户列表。
*   单击要删除的帐户。详细信息窗口将打开。
*   单击菜单栏的右上角。
*   单击删除帐户，将显示弹出窗口以供确认。
*   确认删除帐户。该帐户将被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:31:31.880

尝试从您的 sdk 中卸载 Google 软件，然后重新安装。

# javascript - ExtJS 4.1 - 饼图刷新

> ID：13230159
> 
> 赞同：2
> 
> 时间：2012-11-05T10:27:52.027
> 
> 标签：javascript, extjs4.1, pie-chart

我对 ExtJS 4.1 上的饼图有一些问题。

我通过 Ajax 和 Json 加载数据存储：

```
Ext.define('MyModel', {
    extend: 'Ext.data.Model',
    fields: ['status', 'data', 'data1', 'data2']
});

var store1 = Ext.create('Ext.data.JsonStore', {
    model: 'MyModel',
    proxy: {
        type: 'ajax',
        url : 'PieChartJsonServlet',
    },
    autoLoad: true
}); 
```

我想显示饼图，表示：1）状态数据 2）状态数据 3）状态数据 2

为了显示每个饼图，我单击面板上 tbar 中的按钮。

当我加载 HTML 页面时，第一个图表（按状态的数据）已正确加载并显示。

我的问题是单击 tbar 中的按钮后，数据似乎已加载但饼图未刷新！（当我突出显示切片时，我显示加载的数据并且我看到数据加载良好）

我的代码：

```
Ext.require('Ext.chart.*');
Ext.require(['Ext.layout.container.Fit', 'Ext.window.MessageBox']);
Ext.require('Ext.JSON.*');

Ext.onReady(function () {
Ext.define('MyModel', {
    extend: 'Ext.data.Model',
    fields: ['status', 'data', 'data1', 'data2']
});

var store1 = Ext.create('Ext.data.JsonStore', {
    model: 'MyModel',
    proxy: {
        type: 'ajax',
        url : 'PieChartJsonServlet',
    },
    autoLoad: true
});

var titlePieChart = 'Data by status',
dataToDisplay = 'data',
highlightToDisplay = ' data',
chart = Ext.create('Ext.chart.Chart', {
    xtype: 'chart',
    animate: true,
    store: store1,
    shadow: true,
    legend: {
        position: 'right'
    },
    insetPadding: 60,
    theme: 'Base:gradients',
    items: [{
        type  : 'text',
        text  : titlePieChart,
        font  : '18px Arial',
        width : 100,
        height: 30,
        x : 155,
        y : 30
     }],
     series: [{
        type: 'pie',
        field: dataToDisplay,
        showInLegend: true,
        tips: {
          trackMouse: true,
          width: 180,
          height: 35,
          renderer: function(storeItem, item) {
              var total = 0;
              store1.each(function(rec) {
                  total += rec.get(dataToDisplay);
              });
              this.setTitle(storeItem.get('status') + ' : ' + storeItem.get(dataToDisplay) + highlightToDisplay + '\n(' + Math.round(storeItem.get(dataToDisplay) / total * 100) + '%)');
          }
        },
        highlight: {
          segment: {
            margin: 20
          }
        },
        label: {
            field: 'status',
            display: 'rotate',
            font: '18px Arial',
        }
    }]
});

var panel1 = Ext.create('widget.panel', {
    width: 600,
    height: 500,
    renderTo: 'chartCmp',
    layout: 'fit',
    tbar: [{
        text: 'Data',
            handler: function(button, evt) {
            titlePieChart = 'Data by status',
            dataToDisplay = 'data';
            highlightToDisplay = ' data',
            chart.refresh(); // Doesnt' work !
        }
    }, {
        text: 'Data 1',
        handler: function(button, evt) {
            titlePieChart = 'Data1 by status',
            dataToDisplay = 'data1';
            highlightToDisplay = ' data1',
            chart.refresh(); // Doesnt' work !
        }
    }, {
        text: 'Data 2',
        handler: function(button, evt) {
            titlePieChart = 'Data2 by status',
            dataToDisplay = 'data2';
            highlightToDisplay = ' data2',
            chart.refresh(); // Doesnt' work !
        }
    }],
    items: chart
});
}); 
```

每行“chart.refresh();” from tbar 不起作用，而我想要一个刷新的图表。

有关信息，我在 java web 应用程序上使用 ExtJS 4.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:20:00.350

使用 tbar 的这些代码行，它可以工作：

```
tbar: [{
    text: 'Data',
        handler: function(button, evt) {
        titlePieChart = 'Data by status',
        dataToDisplay = 'data';
        chart.series.first().field = dataToDisplay,
        highlightToDisplay = ' data',
        chart.refresh();
    }
}, {
    text: 'Data 1',
    handler: function(button, evt) {
        titlePieChart = 'Data1 by status',
        dataToDisplay = 'data1';
        chart.series.first().field = dataToDisplay,
        highlightToDisplay = ' data1',
        chart.refresh();
    }
}, {
    text: 'Data 2',
    handler: function(button, evt) {
        titlePieChart = 'Data2 by status',
        dataToDisplay = 'data2';
        chart.series.first().field = dataToDisplay,
        highlightToDisplay = ' data2',
        chart.refresh();
    }
}], 
```

# android - Android 通知和服务振动

> ID：13230162
> 
> 赞同：0
> 
> 时间：2012-11-05T10:27:57.553
> 
> 标签：android, service, notifications, android-asynctask, vibration

我有服务，它使用 AsyncTask 连接到服务器。解析响应后，我需要发出通知和振动，但得到 NullpointerException。

```
@Override
protected void onPostExecute(String[] result) {
ReconnectCallback(result);
super.onPostExecute(result);
}

public void ReconnectCallback(String[] params) {
    Handler mHandler = new Handler();

    Notification notif = new Notification(R.drawable.ic_launcher, "Connection error", System.currentTimeMillis());

    Intent x = new Intent();
    PendingIntent pIntent = PendingIntent.getActivity(MyApplication.getAppContext() , 0, new Intent(), 0);

    notif.flags |= Notification.FLAG_AUTO_CANCEL;
    v.vibrate(new long[] { 300, 300 }, -1);
    notif.setLatestEventInfo(MyApplication.getAppContext(), "Taxi driver error!", "Err: parse exception", pIntent);
    nm.notify(9999, notif); 
```

日志

```
11-05 12:22:12.829: E/AndroidRuntime(13698): FATAL EXCEPTION: main
11-05 12:22:12.829: E/AndroidRuntime(13698): java.lang.NullPointerException
11-05 12:22:12.829: E/AndroidRuntime(13698):    at com.pkg.ReconnectCallback(NetworkService.java:240)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at com.pkg.NetworkService$startReconnection.onPostExecute(NetworkService.java:185)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at com.pkg.NetworkService$startReconnection.onPostExecute(NetworkService.java:1)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at android.os.AsyncTask.finish(AsyncTask.java:417)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at android.os.Looper.loop(Looper.java:130)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at android.app.ActivityThread.main(ActivityThread.java:3835)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at java.lang.reflect.Method.invokeNative(Native Method)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at java.lang.reflect.Method.invoke(Method.java:507)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
11-05 12:22:12.829: E/AndroidRuntime(13698):    at dalvik.system.NativeStart.main(Native Method)

    v.vibrate(new long[] { 300, 300 }, -1);
    nm.notify(9999, notif); 
```

导致 NPE。怎么了？

```
@Override
public void onCreate() {
    // TODO Auto-generated method stub
    nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    v = (Vibrator) getSystemService(VIBRATOR_SERVICE);
    super.onCreate();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:43:15.427

`v`和/或显然`nm`是`null`。当然，`null`如果要相信您的堆栈跟踪，则这两者之一是。

# iphone - 从 Documents 文件到 NSData

> ID：13230163
> 
> 赞同：9
> 
> 时间：2012-11-05T10:28:01.347
> 
> 标签：iphone, objective-c

我想从文档目录中抓取一个文件到一个`NSData`对象中，但如果我这样做，我`NSData`总是`NIL`：

```
filepath = [[NSString alloc] init];
filepath = [self.GetDocumentDirectory stringByAppendingPathComponent:fileNameUpload];
NSData *data = [[NSFileManager defaultManager] contentsAtPath:filepath];

-(NSString *)GetDocumentDirectory{
fileMgr = [NSFileManager defaultManager];
homeDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];

return homeDir; 
```

}

在这一点上，我总是得到一个例外，我的数据是`NIL`：

```
[request addRequestHeader:@"Md5Hash" value:[data MD5]]; 
```

我检查了，没有文件，但我不知道为什么！我之前创建了该文件：

```
NSMutableString *xml = [[NSMutableString alloc] initWithString:[xmlWriter toString]];

NSArray *paths = NSSearchPathForDirectoriesInDomains
(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

//make a file name to write the data to using the documents directory:
NSMutableString *fileName = [NSMutableString stringWithFormat:@"%@/7-speed-",
                      documentsDirectory];

[xml writeToFile:fileName
          atomically:NO
            encoding:NSStringEncodingConversionAllowLossy
               error:nil]; 
```

通过以下方式解决了它：

```
[xml writeToFile:fileName
          atomically:YES
            encoding:NSUTF8StringEncoding
               error:nil]; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-05T10:36:52.757

检查文件是否存在：

```
if([[NSFileManager defaultManager] fileExistsAtPath:filepath)
{
   NSData *data = [[NSFileManager defaultManager] contentsAtPath:filepath];
}
else
{
   NSLog(@"File not exits");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-02T07:20:53.650

**斯威夫特 3 版本**

```
let filePath = fileURL.path
if FileManager.default.fileExists(atPath: filePath) {
    if let fileData = FileManager.default.contents(atPath: filePath) {
        // process the file data
    } else {
        print("Could not parse the file")
    }
} else {
    print("File not exists")
} 
```

# iphone - iOS 6 中的法兰/回声/混响效果

> ID：13230175
> 
> 赞同：0
> 
> 时间：2012-11-05T10:28:38.453
> 
> 标签：iphone, ios, ipad, audio

我想对保存在 iphone 文档目录中的音频文件应用 Flange/Echo/Reverb 效果。很长一段时间以来我一直在互联网上搜索，但没有运气。有人可以建议我在 iphone 中实现这些效果的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T10:35:19.573

[https://stackoverflow.com/a/9444596/1648976](https://stackoverflow.com/a/9444596/1648976)用于混响

```
 AudioComponentDescription auEffectUnitDescription;
 auEffectUnitDescription.componentType = kAudioUnitType_Effect;
 auEffectUnitDescription.componentSubType = kAudioUnitSubType_Reverb2;
 auEffectUnitDescription.componentManufacturer = kAudioUnitManufacturer_Apple;

AUGraphAddNode(
                          processingGraph,
                          &auEffectUnitDescription,
                          &auEffectNode), 
```

[https://developer.apple.com/library/ios/#documentation/AudioUnit/Reference/AUComponentServicesReference/Reference/reference.html](https://developer.apple.com/library/ios/#documentation/AudioUnit/Reference/AUComponentServicesReference/Reference/reference.html)

这些是此处链接中的选项

效果音频单元子类型 Apple 提供的音频单元的效果（数字信号处理）音频单元子类型。

```
enum {
kAudioUnitSubType_PeakLimiter          = 'lmtr',
kAudioUnitSubType_DynamicsProcessor    = 'dcmp',
kAudioUnitSubType_Reverb2              = 'rvb2',
kAudioUnitSubType_LowPassFilter        = 'lpas',
kAudioUnitSubType_BandPassFilter       = 'bpas',
kAudioUnitSubType_HighShelfFilter      = 'hshf',
kAudioUnitSubType_LowShelfFilter       = 'lshf',
kAudioUnitSubType_ParametricEQ         = 'pmeq',
kAudioUnitSubType_Delay                = 'dely',
kAudioUnitSubType_Distortion           = 'dist',
kAudioUnitSubType_AUiPodEQ             = 'ipeq',
kAudioUnitSubType_NBandEQ              = 'nbeq'
}; 
```

# git - 如果重新设置已推送到远程的分支，会发出警告吗？

> ID：13230186
> 
> 赞同：2
> 
> 时间：2012-11-05T10:29:25.167
> 
> 标签：git, warnings, rebase

`git`如果您尝试重新设置已经推送的分支，有什么方法可以警告您？（即在您可能“改写历史”的情况下。）

（我意识到在某些情况下`git`不会知道您是否正在重写历史记录，但通常（通常？）它会有这些信息。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:50:45.153

You can use git's `pre-rebase` hook to produce a warning or error in that situation. (The documentation for [the various `githooks` is here](http://www.kernel.org/pub/software/scm/git/docs/githooks.html).) The [sample `pre-rebase` hook](https://github.com/git/git/blob/master/templates/hooks--pre-rebase.sample) does something very similar to what you want, although (as [http://git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks) points out) you'll need to change the branch name `next` to whatever your published branch is called.

It's probably also worth pointing out (as [pmr](https://stackoverflow.com/users/105672/pmr) mentions in a comment above) that if you've rewritten public history, then attempting to push that rewritten branch will not succeed - you'll get an error to avoid just this problem.

Furthermore, you should know that you can usually safely do:

```
git rebase <upstream-remote-tracking-branch> 
```

For example, if you're working on the `master` branch, and its upstream remote-tracking branch is `origin/master`, then:

```
git rebase origin/master 
```

... will only consider reapplying commits **that aren't contained in `origin/master`**, and that remote-tracking branch is updated when you push to `master` in `origin` as well as when you fetch from `origin`. (The reason I say "usually" above is that this is more complicated if you're using multiple remotes, or you've set up remote-tracking branches in an unusual way.)

# javascript - 任何人都可以解码这个javascript吗

> ID：13230190
> 
> 赞同：-3
> 
> 时间：2012-11-05T10:29:35.800
> 
> 标签：javascript, decode

我已经尝试了所有解码器，但这个 javascript 代码没有结果，我不知道这个 javascript 代码的编码类型，任何人都可以帮助我或者只是输入这个编码。我已尝试在线 javascript 解码、uri 解码和 base64 解码此代码没有结果。

```
<script type="text/javascript">
//<![CDATA[
<!--
var x="function f(x){var i,o=\"\",ol=x.length,l=ol;while(x.charCodeAt(l/13)!" +
"=48){try{x+=x;l+=l;}catch(e){}}for(i=l-1;i>=0;i--){o+=x.charAt(i);}return o" +
".substr(0,ol);}f(\")24,\\\"020\\\\230\\\\220\\\\100\\\\500\\\\030\\\\HVLD61" +
"0\\\\430\\\\qBo@%771\\\\uzvb:(-ku771\\\\mz\\\"\\\\0eV{T9tq+?\\\"\\\\! ^]\\\\"+
"\\\\[Z720\\\\$500\\\\*K020\\\\700\\\\]MNM29%&(<;E:X100\\\\620\\\\610\\\\000" +
"\\\\620\\\\771\\\\|100\\\\(27;-$tt\\\\i6\\\"\\\\($ol120\\\\8\\\"\\\\'+=4d13" +
"0\\\\y&/ .730\\\\430\\\\a700\\\\^TVV720\\\\410\\\\[[ZFPB@MHH600\\\\^QMS600\\"+
"\\630\\\\\\\\\\\\S420\\\\100\\\\Xo.=&|tp|swe4(ja >.7xcm`z*hlcqcl E500\\\\41" +
"0\\\\OHYB300\\\\630\\\\220\\\\530\\\\620\\\\230\\\\\\\\\\\\520\\\\100\\\\70" +
"0\\\\100\\\\LP220\\\\130\\\\\\\\\\\\UF_020\\\\310\\\\500\\\\010\\\\500\\\\7" +
"~f$+hhxm3/= 771\\\\%> (mw )&$%k **./)730\\\\400\\\\D]WJJQS620\\\\610\\\\QG[" +
"YG710\\\\420\\\\_CGEJ010\\\\430\\\\420\\\\720\\\\A520\\\\@220\\\\300\\\\?zt" +
"pti9`g'5.awub`l-7;?=IF0&$9fou120\\\\710\\\\330\\\\020\\\\130\\\\030\\\\230\\"+
"\\U*H120\\\\730\\\\310\\\\500\\\\300\\\\O230\\\\030\\\\430\\\\500\\\\300\\\\"+
"U600\\\\;420\\\\9Z120\\\\000\\\\]^;*a|{zyxwvuts<r\\\\\\\"\\\\320\\\\p)8dvw&" +
"&66k771\\\\| o300\\\\sr771\\\\520\\\\}w}xr{uqapd120\\\\410\\\\qGEKEJx400\\\\"+
"y130\\\\WGFR~j=>G5twt8rzv}u~nl~m771\\\\$~771\\\\p)*>svuh\\\\\\\\!A530\\\\73" +
"0\\\\310\\\\020\\\\W720\\\\IJ\\\\\\\\000\\\\320\\\\L330\\\\600\\\\n\\\\500\\"+
"\\130\\\\320\\\\130\\\\700\\\\$XG8X610\\\\r\\\\100\\\\2-p${`<\\\"\\\\>%x ==" +
"7r320\\\\s( 2>:h)'57771\\\\,530\\\\2c000\\\\O^700\\\\400\\\\]L310\\\\620\\\\"+
"520\\\\420\\\\320\\\\220\\\\120\\\\020\\\\710\\\\610\\\\r\\\\BwXu620\\\\UR1" +
"30\\\\J771\\\\P}630\\\\mj2 ;:987654}NcL1jy#74+Ts~`p!^<e610\\\\400\\\\010\\\\"+
"[X%CA@CBEDRPU430\\\\200\\\\000\\\\400\\\\t\\\\ISUT000\\\\R100\\\\QB@;713(z!" +
"(fvo&66#?-l120\\\\q.&0<4fg030\\\\spc430\\\\200\\\\[GUH230\\\\330\\\\d700\\\\"+
"600\\\\500\\\\500\\\\120\\\\n410\\\\UZBLZ310\\\\010\\\\u\\\\\\\\OALAT000\\\\"+
"}530\\\\zs|r;nlhy771\\\\)zO`M.}l12o~5('&%$#\\\"\\\\! ^320\\\\ t\\\\&G430\\\\"+
"300\\\\YI]630\\\\320\\\\300\\\\720\\\\GN9$,#,?t\\\\:720\\\\8]020\\\\300\\\\" +
"\\\\\\\\a:)`{zyxwvutsr?410\\\\=220\\\\s>?v'420\\\\5230\\\\{67m}`730\\\\630\\"+
"\\530\\\\430\\\\330\\\\230\\\\130\\\\VkDin\\\\WF630\\\\410\\\\120\\\\410\\\\"+
"qXSO]n\\\\{330\\\\@TZV100\\\\200\\\\C%+*-,/.46/f|~~s/5?>n<k;$&amomr 600\\\\" +
"r\\\\M[@310\\\\530\\\\320\\\\400\\\\230\\\\620\\\\Q.L520\\\\300\\\\720\\\\1" +
"30\\\\730\\\\KH5XUD9Y600\\\\030\\\\010\\\\320\\\\771\\\\|100\\\\~700\\\\g<-" +
";7#tq610\\\\$:::220\\\\$*8,)#d130\\\\y&/ .730\\\\JHLUS500\\\\VkDin\\\\APr\\" +
"\\610\\\\KZ120\\\\410\\\\310\\\\n\\\\t\\\\010\\\\700\\\\600\\\\500\\\\400\\" +
"\\300\\\\L}RC yh4&VLyJgH-`s,1jy0+*)('&%$#\\\"\\\\o\\\\\\\\410\\\\!Bt\\\\610" +
"\\\\E620\\\\+400\\\\)J100\\\\600\\\\^LONMLKJIHt\\\\:720\\\\8]600\\\\520\\\\" +
"Oc`771\\\\000\\\\/\\\"\\\\<,un\\\\h1#+%pm220\\\\vz}|771\\\\~qee~1--/\\\\\\\\"+
"630\\\\600\\\\610\\\\t\\\\_710\\\\Z400\\\\520\\\\520\\\\PZ^^C710\\\\V]530\\" +
"\\310\\\\020\\\\[MCTJF100\\\\~430\\\\Esgio;8E(%4I)vhxc/,Q.W7l}kgs$!^mar\\\\" +
"430\\\\#320\\\\330\\\\310\\\\530\\\\620\\\\220\\\\W(N720\\\\430\\\\120\\\\1" +
"00\\\\N130\\\\130\\\\330\\\\400\\\\000\\\\TGF120\\\\8720\\\\>710\\\\<-200\\" +
"\\c.9fg<#jutsrqponml%620\\\\;420\\\\y\\\"\\\\1k771\\\\710\\\\610\\\\220\\\\" +
"yPaNg400\\\\KZ310\\\\010\\\\Q@710\\\\220\\\\120\\\\020\\\\710\\\\610\\\\r\\" +
"\\410\\\\310\\\\n\\\\t\\\\F{Ty230\\\\QV530\\\\NClArGhE&5Jpzy0M-j{am}*+Tbv|p" +
"\\\\\\\\pdi410\\\\010\\\\320\\\\030\\\\X%E220\\\\330\\\\420\\\\230\\\\SP-63" +
"0\\\\n\\\\n\\\\t\\\\500\\\\300\\\\H5U200\\\\620\\\\430\\\\020\\\\C620\\\\42" +
"0\\\\020\\\\17a(700\\\\.500\\\\6310\\\\$t\\\\ 710\\\\&r\\\\>320\\\\<120\\\\" +
"r9>ftgfedcba`QbO`500\\\\^M720\\\\310\\\\010\\\\720\\\\h300\\\\100\\\\320\\\\"+
"l220\\\\ZEKBOA010\\\\500\\\\z520\\\\120\\\\100\\\\~430\\\\Hkztk;8Ewt771\\\\" +
";z|qxfnh\\\"\\\\771\\\\nmhen)am-mb.330\\\\320\\\\620\\\\TUC010\\\\300\\\\20" +
"0\\\\530\\\\V/O220\\\\200\\\\430\\\\Nn\\\\100\\\\200\\\\V700\\\\4520\\\\:[6" +
"20\\\\100\\\\^_400\\\\+b}|{zyxwvut=610\\\\#410\\\\q&9cw030\\\\000\\\\230\\\\"+
"220\\\\r\\\\e200\\\\500\\\\310\\\\320\\\\100\\\\k630\\\\vyxTeJk010\\\\GV710" +
"\\\\410\\\\320\\\\lJBIHBG310\\\\t230\\\\HBMOCW000\\\\=Biz~v;D*xr}771\\\\s1x" +
"{2-,+*)('&%$m^s\\\\\\\\@710\\\\010\\\\G420\\\\%n\\\\+H410\\\\020\\\\430\\\\" +
"020\\\\500\\\\LONMLKJIHYD9_710\\\\300\\\\010\\\\220\\\\630\\\\~%,oky46;';53" +
"0\\\\rk$!!+n720\\\\w,$>26da630\\\\qbc300\\\\OY_HVZ720\\\\SYVRFr\\\\^s\\\\\\" +
"\\q220\\\\t\\\\vBFFJG{100\\\\~430\\\\Tzyo}o:;D/;s`f0M-{k~~jbj%sv`g`c!\\\"\\" +
"\\\\\"\\\\t\\\\710\\\\420\\\\n\\\\[$J220\\\\230\\\\430\\\\700\\\\720\\\\430" +
"\\\\PM2130\\\\730\\\\400\\\\t\\\\6410\\\\t\\\\710\\\\300\\\\K600\\\\610\\\\" +
"010\\\\200\\\\03r3=40v%?>3==~771\\\\u>98#h520\\\\u)),0 #a-MQ[000\\\\130\\\\" +
"220\\\\WTRB\\\\\\\\FD430\\\\E^JCXODN\\\"(f};o nruter};))++y(^)i(tAedoCrahc." +
"x(edoCrahCmorf.gnirtS=+o;721=%y{)++i;l<i;0=i(rof;htgnel.x=l,\\\"\\\"=o,i ra" +
"v{)y,x(f noitcnuf\")"                                                        ;
while(x=eval(x));
//-->
//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:37:11.077

只需在控制台中输入代码并`eval`手动执行每个步骤，直到变量看起来像正确的 JavaScript。结果如下。

基本上，它只是（多次）转义了带有一些 Unicode 编码符号的 JavaScript。没什么特别的，我们在这里有更严格的编码，-)

**和往常一样警告：如果这个代码不是你添加的，你的网络服务器已经被黑客入侵了，你应该采取措施清理它并防止它在未来发生。**

```
document.writeln("<form action=\"http://ongkir.info/mobile/find_cost\" method=\"post\" accept-charset=\"utf-8\" target=\"_blank\">\r\n<table border=\"0\" style=\"font: Normal 14px Arial;\">        <tbody>\r\n<tr>\r\n          <th align=\"left\" valign=\"middle\"><br>\r\nCEK TARIFF KURIR</th>\r\n          <td><br>\r\n<img src=\"http://jne.co.id/images/favicon.ico\" width=\"50\" height=\"30\"></td>\r\n        </tr>\r\n\t\t\r\n\t\t<input type=\"hidden\" name=\"courier_type\" value=\"jne\">\r\n\r\n<tr>\r\n          <td><br>\r\nFROM</td>\r\n          <td><br>\r\n\t\t  <input name=\"daerah_asal\" value=\"\" size=\"20\" style=\"border: 1px solid #3b6e22; color: #666666;\" type=\"text\"></td>\r\n        </tr>\r\n<tr>\r\n          <td><br>\r\nTO</td>\r\n          <td><br>\r\n<input name=\"daerah_tuju\" value=\"\" size=\"20\" style=\"border: 1px solid #3b6e22; color: #666666;\" type=\"text\"></td>\r\n        </tr>\r\n<tr>\r\n          <td><br>\r\nWEIGHT (gram)</td>\r\n          <td><br>\r\n<input name=\"weight\" value=\"1000\" size=\"20\" style=\"border: 1px solid #3b6e22; color: #666666;\" type=\"text\"></td>\r\n        </tr>\r\n<tr>\r\n          <td><br>\r\n<span style=\"font-size: x-small;\">Copyright<br/><a href=\"http://www.tasbandoeng.com/\" target=\"_blank\">TASBANDOENG.COM</a></span></td>\r\n          <td><br>\r\n<input style=\"background: #6AA450; border: 1px solid #3b6e22; color: white; display: inline-block; font-size: 12px; height: 24px; line-height: 24px; margin-right: 10px; padding: 0px 6px; text-decoration: none;\" name=\"submit\" type=\"submit\" value=\"SUBMIT\"></td>\r\n        </tr>\r\n</tbody></table>\r\n</form>");0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:43:02.663

不要让`eval`运行循环，而是手动执行。第一次，你仍然得到一个转义代码，第二次运行后你得到一个`document.writeln`输出以下文档的代码：

```
<form action="http://ongkir.info/mobile/find_cost" method="post" accept-charset="utf-8" target="_blank">
<table border="0" style="font: Normal 14px Arial;">        <tbody>
<tr>
          <th align="left" valign="middle"><br>
CEK TARIFF KURIR</th>
          <td><br>
<img src="http://jne.co.id/images/favicon.ico" width="50" height="30"></td>
        </tr>

        <input type="hidden" name="courier_type" value="jne">

<tr>
          <td><br>
FROM</td>
          <td><br>
          <input name="daerah_asal" value="" size="20" style="border: 1px solid #3b6e22; color: #666666;" type="text"></td>
        </tr>
<tr>
          <td><br>
TO</td>
          <td><br>
<input name="daerah_tuju" value="" size="20" style="border: 1px solid #3b6e22; color: #666666;" type="text"></td>
        </tr>
<tr>
          <td><br>
WEIGHT (gram)</td>
          <td><br>
<input name="weight" value="1000" size="20" style="border: 1px solid #3b6e22; color: #666666;" type="text"></td>
        </tr>
<tr>
          <td><br>
<span style="font-size: x-small;">Copyright<br/><a href="http://www.tasbandoeng.com/" target="_blank">TASBANDOENG.COM</a></span></td>
          <td><br>
<input style="background: #6AA450; border: 1px solid #3b6e22; color: white; display: inline-block; font-size: 12px; height: 24px; line-height: 24px; margin-right: 10px; padding: 0px 6px; text-decoration: none;" name="submit" type="submit" value="SUBMIT"></td>
        </tr>
</tbody></table>
</form> 
```

# java - 整数数组（Java）

> ID：13230192
> 
> 赞同：3
> 
> 时间：2012-11-05T10:29:44.870
> 
> 标签：java, arrays, integer

我已经编程了很长时间，但是我遇到了一个问题。我要做的是实现一个与内置数据类型 int[] 具有相同功能的类。

为我提供了以下方法：

```
public ArrayOfInt(int size); 
public int length(); 
public int get(int index); 
public void put(int index, int value); 
```

主要方法是测试代码。

我几乎不知道从哪里开始。有人可以帮助我吗？

编辑：这是我更新的代码。当我尝试使用 d.put(0,1) 时，我得到一个 nullpointerexception 错误，这就是我现在感到困惑的地方。d.put(0,1) 不应该定义索引和值整数吗？

```
public class ArrayofIntegers

{

private int[] arr;

public  int ArrayOfInt(int size)

{

     arr = new int[size];

    return size;

}

public int length()
{

    return arr.length;

}

public int get(int index)

{

    return arr[index];

}

public void put(int index, int value)

{

    arr[index]=value;
    System.out.print(arr[index]=value);

}

public static void main(String[] args)

{
    ArrayofIntegers d = new ArrayofIntegers();
    d.put(0,1);

} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T10:31:04.900

我认为你不应该重新发明轮子，因为 java 有一些内置的可修改替代数组，比如`List`. `List`是通用的，所以你可以像这样创建一个`List`of `Integer`s：

```
List<Integer> intList = new ArrayList<Integer>(); // can be ArrayList<> in java 1.7 
```

并享受`List`界面带来的好处。如果内置实现（如`LinkedList`和`ArrayList`）对您来说不够好，那么您可以随时扩展`AbstractList`Java Collections Framework 中提供的实现。

如果您需要更多帮助，请查看官方文档：[Java List](http://docs.oracle.com/javase/tutorial/collections/interfaces/list.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T10:32:36.853

它已经在内置库中可用 -`java.util.ArrayList`这是一个 List 实现。
请查找[文档](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T11:59:45.960

如果您被允许使用另一个 int 数组作为后备数组，那么这段代码对您来说应该足够了：

```
public class ArrayOfInt{
    private final int[] array;

    public ArrayOfInt(int size) {
        array=new int[size];
    }

    public int length() {
        return array.length;
    }

    public int get(int index) {
        return array[index];
    }

    public void put(int index, int value) {
        array[index]=value;
    }

} 
```

`int[]`但是它会缺少一种内置数据类型的功能。那是`int[]`可迭代的，因此`for-each`循环可以应用于`int[]`，但不能高于类。因此，要使其可迭代，您必须将上面的代码更改为：

```
import java.util.Iterator;

public class ArrayOfInt implements Iterable<Integer>{
    private final int[] array;

    public ArrayOfInt(int size) {
        array=new int[size];
    }

    public int length() {
        return array.length;
    }

    public int get(int index) {
        return array[index];
    }

    public void put(int index, int value) {
        array[index]=value;
    }

    @Override
    public Iterator<Integer> iterator() {
        return new Iterator() {
            private int current_index;

            @Override
            public boolean hasNext() {
                return current_index<array.length;
            }

            @Override
            public Integer next() {
                return array[current_index++];
            }

            @Override
            public void remove() {
                throw new UnsupportedOperationException("Cannot Resize Underlying Array");
            }
        };
    }
} 
```

正如您在上面看到的，我们使用`Iterator<Integer>`的`Iterator<int>`as`int`不是引用类型，而是原始类型。这将在程序运行时强制进行一些自动装箱和拆箱。因此`for-each`，类上的循环`ArrayOfInt`不会像结束时那样有效`int[]`。

但是，如果不允许您将其`int[]`用作 int 的底层数组，那么您就必须`ArrayOfInt`以完全不同的方式对类进行编码。首先，您必须决定您将使用哪种数据结构`ArrayOfInt`。（我更喜欢平衡二叉搜索树，其节点在构建过程中仅按一次键排列，其中每个节点的键是它的索引。在这种情况下`iterator()`该类的方法`ArrayOfInt`将返回树的有序遍历。）然后您必须为该数据结构编写至少 2 个类： (1)`ArrayOfInt`和 (2) `NodeOfInt`。这些节点对象如何通过索引链接和搜索，取决于您选择的数据结构。祝一切顺利。

* * *

[这部分答案是在提问者添加更多信息后添加的]

更改这段代码：

```
public  int ArrayOfInt(int size)

{

     arr = new int[size];

    return size;

} 
```

对此：

```
public ArrayOfIntegers(int size)
{
    arr = new int[size];
} 
```

并更改这行代码：

```
ArrayofIntegers d = new ArrayofIntegers(); 
```

到这一行：

```
ArrayofIntegers d = new ArrayofIntegers(10); // Now your array size is fixed at 10
// For an array of size 15 , use statement: ArrayofIntegers d = new ArrayofIntegers(15); 
```

你得到一个 NullPointerException 因为；在 Java 中，每个数组（无论是`int[]`or `float[][]`or `String[]`or `AnyClass[]`or `SomeClass[][]`）都是`class Object`. 因此，当您的类`ArrayOfIntegers`创建了一个新对象时，一个名为`arr`（在名为的对象内`d`）的对象会自动初始化为`null`. `arr[index]=value;`因此，试图访问`arr`(a )的语句`null`引发了 NullPointerException。

[以下几行与您的 nullpointerexception 无关，但我仍在添加它们以获得有效的代码]

你的功能`public void put(int index, int value)`应该是这样的：

```
public void put(int index, int value)
{
    arr[index]=value;
    System.out.print(arr[index]);
} 
```

或这个：

```
public void put(int index, int value)
{
    System.out.print(arr[index]=value);
} 
```

但不是这个：

```
public void put(int index, int value)
{
    arr[index]=value;
    System.out.print(arr[index]=value);
} 
```

它在代码中创建冗余（重复语句）。

# python - 如何在 OpenERP 中从一个科目表转换到另一个科目表？

> ID：13230195
> 
> 赞同：8
> 
> 时间：2012-11-05T10:29:51.293
> 
> 标签：python, python-2.7, openerp, accounting

我已经为*company1安装**了科目表*A。这张图表用于会计几个月。如何转换为*科目表 B*并保留帐户的旧数据（借方、贷方等）？换句话说，是否可以将数据从一个科目表迁移到另一个科目表？解决方案可以是编程方式或通过 Web 客户端界面（不重要）。不能使用虚拟会计科目表。*会计科目表 B*必须成为旧数据的主图表。

 ***每个建议都会对我有很大帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:46:33.340

IMO 非常困难，我们目前正在迁移一些数据，事实证明这很困难。

我建议你选择一个未来的日期，并告诉大家只使用另一个具有正确会计科目表的数据库。

您的财务部门将建议什么日期是完美的。月经什么时候开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:44:19.267

在新数据库上运行初始配置向导后，我不知道有什么方法可以安装另一个科目表。但是，如果您只想更改帐号、姓名和父母以匹配不同的会计科目表，那么您应该能够通过大量数据库更新来做到这一点。如果帐户不多，可以手动编辑每个帐户，或者编写 SQL 或 Python 脚本来更新所有帐户。为此，您需要将每个旧帐户映射到新帐户代码、名称和父帐户，然后使用该映射生成脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T05:38:59.630

我需要做类似的事情。可以将图表从一种形式按摩到另一种形式，但最后我发现创建一个新数据库、引入模块、分配新图表然后导入所有关键元素是最好和最安全的路径。

如果您有很多交易将更难以进行导入。如果是这种情况，那么将您的图表从一种形式按摩到另一种形式。

我相信将来某个时候会有一些方法可以进行主动迁移。如果你能提供帮助，你绝对不想忍受糟糕的图表或没有你的历史。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-15T07:52:40.737

最快的方法是使用 Talend 或 Pentaho 之类的 ETL（前提是在此过程中有一个关于哪个帐户将映射到哪个帐户的逻辑）。如果没有，您将不得不手动操作。

如果有逻辑，您可以将其导出为可以转换和重新导入的格式。卸载您的帐户图表并安装新的。然后导入您使用这些工具格式化的所有数据。***

# java - Swing 中的动态 JOptionPane.showMessageDialog

> ID：13230197
> 
> 赞同：0
> 
> 时间：2012-11-05T10:29:57.037
> 
> 标签：java, swing, joptionpane

创建某种基本消息框并在其上刷新文本的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:39:41.233

您可以使用 javax.swing.JOptionPane 类创建和显示的最简单的对话框是消息对话框。这可以通过静态方法来完成：showMessageDialog(frame, message, title, type)，其中：

1.  "frame" 是用作父框架的框架对象。
2.  “message”是要在对话框中显示的消息字符串。3.“title”是要用作对话框标题的标题字符串。
3.  “类型”是表示特定消息对话框类型的整数代码。有效类型代码在 JOptionPane 类中预定义为常量：INFORMATION_MESSAGE、WARNING_MESSAGE、ERROR_MESSAGE 和 PLAIN_MESSAGE。

**这是一个示例程序**

```
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
public class JOptionPaneShowMessageDialog implements ActionListener {
   JFrame myFrame = null;
   public static void main(String[] a) {
      (new JOptionPaneShowMessageDialog()).test();
   }
   private void test() {
      myFrame = new JFrame("showMessageDialog Test");
      myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      myFrame.setBounds(50,50,250,150);
      myFrame.setContentPane(new JDesktopPane());
      JMenuBar myMenuBar = new JMenuBar();
      JMenu myMenu = getDialogMenu();
      myMenuBar.add(myMenu);
      myFrame.setJMenuBar(myMenuBar);
      myFrame.setVisible(true);
   }
   private JMenu getDialogMenu() {
      JMenu myMenu = new JMenu("Dialogs");
      JMenuItem myItem = new JMenuItem("Information");
      myItem.addActionListener(this);
      myMenu.add(myItem);
      myItem = new JMenuItem("Warning");
      myItem.addActionListener(this);
      myMenu.add(myItem);
      myItem = new JMenuItem("Error");
      myItem.addActionListener(this);
      myMenu.add(myItem);
      myItem = new JMenuItem("Plain");
      myItem.addActionListener(this);
      myMenu.add(myItem);
      return myMenu;
   }
   public void actionPerformed(ActionEvent e) {
      String menuText = ((JMenuItem) e.getSource()).getText();
      int messageType = JOptionPane.INFORMATION_MESSAGE;
      if (menuText.equals("Information")) {
         messageType = JOptionPane.INFORMATION_MESSAGE;
      } else if (menuText.equals("Warning")) {
         messageType = JOptionPane.WARNING_MESSAGE;
      } else if (menuText.equals("Error")) {
         messageType = JOptionPane.ERROR_MESSAGE;
      } else if (menuText.equals("Plain")) {
         messageType = JOptionPane.PLAIN_MESSAGE;
      }

      System.out.println("Before displaying the dialog: "+menuText);
      JOptionPane.showMessageDialog(myFrame, 
         "This is message dialog box of type: "+menuText,
         menuText+" Message", messageType);
      System.out.println("After displaying the dialog: "+menuText);
   }
} 
```

# solr - solr 4.0 中软提交的持久性保证？

> ID：13230198
> 
> 赞同：1
> 
> 时间：2012-11-05T10:29:58.503
> 
> 标签：solr

带有事务日志的 Solr 4.0 是否会确保成功的更新**始终是持久**的，即使是软提交的更改？

* * *

维基说：

> 软提交 = "真" | “假”——默认为假——执行软提交——这将以更高性能的方式刷新索引的“视图”，但**没有“磁盘上”保证**。

但新闻稿说：

> 更新持久性——事务日志确保**即使是未提交的文档**也不会丢失

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:16:49.260

我想这一切都取决于默认情况下未启用事务日志这一事实。如果您只使用软提交，则没有持久性保证，但如果您启用事务日志，所有更改都将在那里注册，这样更安全。事务日志还支持实时 GET。

# c# - 如何验证字符串是正确的日期时间

> ID：13230207
> 
> 赞同：2
> 
> 时间：2012-11-05T10:30:15.487
> 
> 标签：c#, validation, datetime

我从 excel 文件中提取了一些数据。

我想验证用户是否输入了有效的日期时间字符串。我曾尝试使用 DateTime.Parse 方法，但发现某些值似乎被接受。

例如，

如果我提交 3.3 作为日期时间，则 DateTime.Parse 方法将其接受为有效的日期时间并输出 03/03/2012 00:00:00

我想阻止这个。只允许用户输入格式正确的日期时间。

因此，例如，用户可以提供 03/03/2012 或 03/03/2012 12:30:00 但不能提供像 01022012 或 3.3.2012 这样的值

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:33:58.973

您想使用`DateTime.ParseExact`或`DateTime.TryParseExact`

这允许您从您选择的日期格式字符串进行解析。

[http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)

这里的例子： -

[http://msdn.microsoft.com/en-us/library/ms131044.aspx](http://msdn.microsoft.com/en-us/library/ms131044.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:33:21.650

您可以使用 RegEx 来做到这一点。这样的事情应该有助于 @"\d{2}/\d{2}/\d{4}(\s+\d{2}\:\d{2}\:\d{2})?"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T10:45:01.067

您可以在客户端使用各种类似的 jquery 插件/功能来处理它，[或者](http://docs.jquery.com/Plugins/Validation/Methods/date)简单的 Google 搜索可以返回许多其他有用的结果。

如果你想在服务器端处理它，（我不确定你在做什么项目）但取决于它你可以编写自己的方法/使用 Regex 或[Data Annotation MVC](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs)。

如果您仍然遇到问题，请尝试添加一些关于您的项目的详细信息，例如语言、架构等，这将有助于提供正确的解决方案。

希望能帮助到你。谢谢

# java - EclipseLink 对分布在多个 jar 中的实体进行静态编织失败

> ID：13230209
> 
> 赞同：4
> 
> 时间：2012-11-05T10:30:29.310
> 
> 标签：java, jpa, orm, eclipselink

我有几个实体分布在多个罐子里。位于 jar X 中的实体包含来自 jar Y 的实体集合。当我尝试在 jar XI 上进行静态编织时，出现以下错误：

> 异常描述：[class MyEntity] 使用非实体 [class MyOtherEntity] 作为关系属性 [method getMyOtherEntities] 中的目标实体。

该错误与以下堆栈有关：

> 在 org.eclipse.persistence.exceptions.ValidationException.nonEntityTargetInRelationship(ValidationException.java:1360) 在 org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.RelationshipAccessor.getReferenceDescriptor(RelationshipAccessor.java:538) 在 org.eclipse .persistence.internal.jpa.metadata.accessors.mappings.RelationshipAccessor.processJoinTable(RelationshipAccessor.java:692) 在 org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.ManyToManyAccessor.process(ManyToManyAccessor.java:160)在 org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage3(MetadataProject.java:1726) 上 org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processOwningRelationshipAccessors(MetadataProject.java:1489) .persistence.internal.jpa.metadata.MetadataProcessor。processORMMetadata(MetadataProcessor.java:535) at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:550) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:第1469章）

这两个实体都使用@Entity 进行了注释，并且可以在 Hibernate 中正常工作。
这两个类都在类路径中，并且我在调试器中检查了 MyOtherEntity 是否已找到并按预期进行了注释。

当实体分布在多个罐子中时，是否可以使用静态编织？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:05:13.397

您可以尝试在编织时指定依赖 jar

**来自 Ant [EclipseLink 的代码段编织 Ant 任务](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Performance/Weaving/Static_Weaving)**

```
 <weave  source="c:\myjar.jar"
        target="c:\wovenmyjar.jar"
        persistenceinfo="c:\myjar-containing-persistenceinfo.jar">
    <classpath>
        <pathelement path="c:\myjar-dependent.jar"/>
    </classpath>

</weave> 
```

# c# - 无法在其 onClick 事件中修改 ToolStripMenuItems 的属性

> ID：13230220
> 
> 赞同：1
> 
> 时间：2012-11-05T10:31:06.597
> 
> 标签：c#, .net, winforms

在我的 onClick 事件处理程序上，我正在做类似的事情：

```
private void myToolStripItem_Click(object sender, EventArgs e)
    {
        Form form = (Form)(((taskBarToolStripMenuItem)sender).formReference);

        if (form != this.ActiveMdiChild)
        {
            if (!form.Visible)
                form.Show();
            form.Activate();

            ((taskBarToolStripMenuItem)sender).isSelected = true; //set it to true, so the renderer will draw them differently
        }
    } 
```

taskBarToolStripMenuItem 是 ToolStripMenuItem 的子类。当我到达我的自定义 ToolStripSystemRenderer 时，我确定将其“isSelected”属性更改为 true 的项目仍然保留为 false。这发生在其他属性上，我尝试了标签、文本等……为什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:06:38.653

What you're trying to do is to cast the `sender` to an instance of the `ToolStripMenuItem`.
Try casting to the type instead like so.

```
((ToolStripMenuItem)sender).Selected = true; 
```

If you're going to use it in a number of places, you can set it to a temporary variable to avoid unboxing every time.

```
private void myToolStripItem_Click(object sender, EventArgs e)
{
    var item = (ToolStripMenuItem)sender; // temp variable
    Form form = (Form)(item.formReference);

    if (form != this.ActiveMdiChild)
    {
        if (!form.Visible)
            form.Show();
        form.Activate();

        item.Selected = true; //set it to true, so the renderer will draw them differently
    }
} 
```

# php - 即使在页面加载后更改数字？

> ID：13230221
> 
> 赞同：1
> 
> 时间：2012-11-05T10:31:10.227
> 
> 标签：php, javascript, html

即使在页面加载后，我如何才能在 html 页面上更改数字。

我的意思是我有一个网站，我想**在线显示用户**，所以在页面加载后，数字应该在特定毫秒后改变而不刷新页面，我该怎么做？

这些数字可以来自一个范围吗？比如从700到990

在 html 或 php 或 javascript 中，任何东西都会起作用。

* * *

**对于那些跳进来并说使用数学兰特的人的更新，请再次阅读该问题。**

**你没有得到我的问题，** 我知道我可以生成随机数，但这不是我想要的。我想要的是改变数字，冲浪者来到我的网站，他看到网页上的数字在变化，就像动画 gif 图像一样。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:35:06.570

试试这个：

```
setInterval(generate_random_number,2000);
function generate_random_number()
{
    var number = Math.floor(Math.random()*11)
    return number;
} 
```

其中 11 表示随机数将介于 0-10 之间。要将范围增加到 100，只需将 11 更改为 101。

setInterval 函数将每 2 秒调用一次 generate_random_number 函数，然后执行您想要的任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:36:33.163

为此目的使用 javascript：

用于`Math.random();`获取 0 到 1 之间的随机数。

过程以相应地获得所需的范围。

然后使用javascript更改包含数字的元素的内部html。

IE`document.getElementById('ID OF THE ELEMENT').innerHTML = 'THE NUMBER OBTAINED FORM THE ABOVE PROCESSING';`

是的，还有一件事是每隔几秒使用间隔方法

IE ：`setInterval`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T08:31:56.773

此处解决的问题是一个答案

你可以做这样的事情

[http://jsfiddle.net/ZDsMa/94/](http://jsfiddle.net/ZDsMa/94/)

使用此代码

```
var output, started, duration, desired;

// Constants
duration = 5000;
desired = '50';

// Initial setup
output = $('#output');
started = new Date().getTime();

// Animate!
animationTimer = setInterval(function() {
    // If the value is what we want, stop animating
    // or if the duration has been exceeded, stop animating
    if (output.text().trim() === desired || new Date().getTime() - started > duration) {
        console.log('animating');
        // Generate a random string to use for the next animation step
        output.text('' + Math.floor(Math.random() * 990)

        );

    } else {
        console.log('animating');
        // Generate a random string to use for the next animation step
        output.text('' + Math.floor(Math.random() * 990)

        );
    }
}, 1000); 
```

我知道代码并不完美，但它确实可以解决我修改了一些其他代码的问题。

谢谢

# cloudant - 用于 Cloudant 服务器和移动设备之间通信的中间服务器是否可取？

> ID：13230223
> 
> 赞同：1
> 
> 时间：2012-11-05T10:31:29.030
> 
> 标签：cloudant

我是服务器和在线数据库的新手，所以请多多包涵。

我有一个关于移动设备上的数据库服务器通信的问题，如下所示：

我目前正在 iOS 上开发游戏应用程序。[我在Cloudant](https://cloudant.com/)上设置了一个非 SQL 数据库，我想在我的 iOS 设备上访问该数据。每次完成一轮时，我都必须更新多个数据库条目，并且我还需要读取数据库中的多个条目以刷新排行榜。我之前曾尝试通过设备单独访问 Cloudant 上的多个条目，但其中大多数都以超时返回。

因此，现在我已经在我的应用程序服务器上编写了几个 PHP 脚本，这样我的设备只需要访问一次脚本，然后对我的数据库进行多次更新或过滤我需要来自 Cloudant 的数据。然而，这意味着我需要一台额外的服务器，这意味着更高的成本。我觉得应该有更好或更优雅的解决方案，因此我想向这里的每个人寻求帮助。是直接从设备进行所有更新，还是寻求第三方的帮助更好？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:02:40.663

仅出于安全原因，有必要在 cloudant 数据库前使用服务器。我假设您不希望您的应用程序的每个用户都能够访问整个数据库。另外，你给出的理由对我来说似乎是有效的。减少移动应用程序请求的数量和大小通常是一个好主意。此外，这可能允许您在 PHP 服务器中进行一些缓存，最终降低您的成本。

# c# - 在 windows server 2008 中创建传出队列

> ID：13230228
> 
> 赞同：2
> 
> 时间：2012-11-05T10:31:35.857
> 
> 标签：c#, msmq

这是一个相当愚蠢的问题。但是我找不到关于这个的好帖子。我想在 MSMQ 的传出队列中创建一个队列。我的任务是获取机器中的所有传出队列并清除消息（如果它符合条件）。

任何人都可以给出如何在 Windows server 2008 机器中创建传出队列的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:56:51.187

您不会“创建”传出队列。

当您将消息发送到队列时，MSMQ 子系统首先将消息写入本地、临时、传出队列，然后再将消息传输到目标队列。临时传出队列的生命周期由 MSMQ 子系统而不是开发人员控制。

这是因为 MSMQ 使用[*存储和转发*](http://en.wikipedia.org/wiki/Store_and_forward)模型来传输消息。

[John Breakwell在这里](http://blogs.msdn.com/b/johnbreakwell/archive/2008/11/12/how-do-i-create-an-msmq-outgoing-queue.aspx)谈到了这一点。

但是，您可以像处理要发送到的远程队列一样处理传出队列，但设置一个名为`MQ_ADMIN_ACCESS`.

[此处](http://www.yortondotnet.com/2010/04/accessing-outgoing-message-queues-with.html)描述了此技术。

# html - html img 标签有错误 - FF 显示问题

> ID：13230229
> 
> 赞同：0
> 
> 时间：2012-11-05T10:31:43.740
> 
> 标签：html, css, image

我正在使用 Html img 标签如下：

```
<img src="url_to_some_pic" alt="alternative error message"
    width="300" height="300">
</img> 
```

如果 URL 损坏，Chrome 和 IE 在图像原点维度内按预期显示此错误消息但 FF 不是。

FF 中发生的情况是 FF 显示错误消息，但在一行中而不是在图像区域 (300 x 300) 内。

任何人都知道如何解决这个问题？

我猜 css 将是解决方案，但如何？

谢谢，

约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:41:16.267

每个浏览器都以自己的方式处理 alt，并且没有一致的方式来格式化它。我会考虑将您的图像放入容器中。

至少这种方式 alt 将始终放置在左上角。

[http://jsfiddle.net/WjKxN/1/](http://jsfiddle.net/WjKxN/1/)

HTML：

```
<div id='image'>
    <img src="url_to_some_pic" alt="alternative error message" width="300" height="300">
</div> 
```

CSS：

```
#image {
    width: 300px;
    height: 300px;
    border: 1px solid black;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T10:37:37.080

你有一个标记错误。img 标签是一个自动关闭标签。你应该这样使用它：

```
<img src="url_to_some_pic" alt="alternative error message"
width="300" height="300" /> 
```

那应该可以解决您的问题。但是，也许很高兴知道为图像添加宽度和高度的更好、更标准的方法是使用 CSS，如下所示：

```
<img src="url_to_some_pic" alt="alternative error message"
style="height: 300px; width: 300px;" /> 
```

# java - 在黑莓中检测切换失败

> ID：13230230
> 
> 赞同：1
> 
> 时间：2012-11-05T10:31:44.273
> 
> 标签：java, blackberry

我正在使用`PhoneListener`该类来检测调用何时失败并根据失败的原因做一些事情。该类包括一些 . 形式的静态变量`PhoneListener.CALL_ERROR_DUE_TO_FADING`。我还需要检测由于切换失败而导致的错误，但不幸的是，我无法为这种情况找到任何东西。有谁知道如何检查这种特定情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:43:10.913

我不确定你到底想检测什么，但看看这些类：

[RadioStatusListener](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/system/RadioStatusListener.html)（通过调用注册它`Application.getApplication().addRadioListner`）

[CoverageStatusListener](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/system/CoverageStatusListener.html)（通过调用注册`CoverageInfo.addListener`）

[CoverageStatusListener](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/io/transport/CoverageStatusListener.html)（通过调用注册`TransportInfo.addListener`）

# streaming - mp4 视频未在网站上流式传输

> ID：13230231
> 
> 赞同：3
> 
> 时间：2012-11-05T10:31:44.390
> 
> 标签：streaming, video-streaming, mp4, jwplayer

我正在使用 jwplayer 在我的网站上播放 mp4 视频。文件很大。在整个视频缓冲之前，它们不会开始流式传输。我需要视频同时流式传输和缓冲。

我阅读了所有论坛，他们提到使用一些外部软件（如 qtfaststart）将元数据从文件的末尾移动到文件的开头。

除了使用像 qtfaststart 这样的软件之外，开发人员还有其他方法可以编码和制作 mp4 视频在现场流式传输吗？

也许在 FFmpeg 或其他方式的帮助下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:57:21.393

我不认为你可以单独使用 FFMPEG 来实现这一点，我们目前正在使用 MP4Box。如果您的开发团队正在使用 linux，那么有[几个](https://www.google.com.ar/search?q=mp4box+linux+install)关于编译和安装它的指南。

从[MP4Box 网站](http://gpac.wp.mines-telecom.fr/mp4box/)：

> MP4Box 可用于为不同的传输协议准备文件，主要是 HTTP 下载或 RTP 流。
> 
> 要为 HTTP 下载准备文件，以下指令将以 500 毫秒为单位交错文件数据，以便在下载文件时启用播放 (HTTP FastStart)：
> 
> **MP4Box -inter 500 文件.mp4**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T10:23:52.323

```
ffmpeg -i infile.mp4 -c copy -movflags faststart outfile.mp4 
```

或者

```
mp4box -ipod infile.mp4 
```

或者

```
qt-faststart infile.mp4 outfile.mp4 
```

# java - java.io.IOException：读取序列化对象时过早的 EOF

> ID：13230232
> 
> 赞同：0
> 
> 时间：2012-11-05T10:31:48.677
> 
> 标签：java, debugging, serialization, ioexception, httpserver

我正在做一个作业，我必须以序列化模式来回发送一个对象。我有一个 Client3.java 文件，它将一个对象发送到 Server3.java。而 Server3.java 做同样的事情。但是当我尝试读取 Client3 中的对象，他抛出了一个`java.io.IOException: Premature EOF`错误。通过广泛的搜索，我发现我的程序运行速度比 InputStream 读取速度快，但我不知道如何解决这个问题

这是我的 2 个文件

```
package server3;
import java.io.IOException;
import java.io.InputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.net.HttpURLConnection;
import java.net.URL; 

public class Client3 {
    public static void main(String[] args) throws Exception {
      try {
        URL url = new URL("http://localhost:3333");
        HttpURLConnection s = (HttpURLConnection) url.openConnection();
        s.setDoOutput(true);
        s.setDoInput(true);
        s.setRequestMethod("POST");
        s.setUseCaches(false);
        //here we send an serialized object
        Send obj = new Send();
        ObjectOutputStream objOut = new               
                ObjectOutputStream(s.getOutputStream());
        objOut.writeObject(obj);

        /*********this is the chunk of code that makes the error*****************/
        //here we read the serialized object
        InputStream in = s.getInputStream();
        ObjectInputStream ios = new ObjectInputStream(in);
        SendResponse oin = (SendResponse) ios.readObject();
        String gabim=oin.getGabim();
        String gabimNr =oin.getGabimNr();
        System.out.println(gabim);
        System.out.println(gabimNr);
        ios.close();
        s.disconnect();
        /***************************************************************************/
        //catch all the possible errors 
      } catch (IOException ex) {
        System.err.println("Gabim ne klient"+ex);
        ex.printStackTrace();
      }
    }
}

class Send implements Serializable {
    // the object to be send to the server
    private static final long serialVersionUID = 1L;
    int id = 1;
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public int getAmount() {
        return amount;
    }
    public void setAmount(int amount) {
        this.amount = amount;
    }
    public int getPaid() {
        return paid;
    }
    public void setPaid(int paid) {
        this.paid = paid;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    int amount = 2000;
    int paid = 800;
    String name = "Andi Domi";
} 
```

这里是 Server3.java 文件

```
package server3;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.io.Serializable;
import java.net.InetSocketAddress;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import com.sun.net.httpserver.HttpExchange;
import com.sun.net.httpserver.HttpHandler;
import com.sun.net.httpserver.HttpServer;

public class Server3 {

public static void main(String[] args) throws Exception {
    //create the server
    HttpServer server = HttpServer.create(new InetSocketAddress(3333), 0);
    server.createContext("/", new MyHandler());
    server.setExecutor(null); // creates a default executor
    server.start();
}
static class MyHandler implements HttpHandler {
    public void handle(HttpExchange t) throws IOException {

        /*******we start to read the object send from the client here*******/ 
        //create the sream
        ObjectInputStream ios = new ObjectInputStream(t.getRequestBody());
        //variables we need to connect to the database
        final String url = "jdbc:mysql://localhost/httpServer";
        final String user = "root";
        final String password = "";
        try {
            //create the object to be read
            Send oin = (Send) ios.readObject();
            int id = oin.getId();
            String emri = oin.getName();
            int amount = oin.getAmount();
            int paid = oin.getPaid();
            //jdbc try
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection(url, user,password);           
            //insert values into the first table
            PreparedStatement s = con
                    .prepareStatement("INSERT INTO      person(ID,Name,Amount,Paid) VALUES (?,?,?,?)");
            s.setInt(1, id);
            s.setString(2, emri);
            s.setInt(3, amount);
            s.setInt(4, paid);
            s.executeUpdate();
            //read the values from a table and add them to an array list
            ResultSet rs = s.executeQuery("SELECT * from personat ORDER BY ID");
            ArrayList<Personat> perList = new ArrayList<Personat>();
            if (rs != null) {
                while (rs.next()) {
                    Personat per = new Personat();
                    per.setID(rs.getInt("ID"));
                    per.setName(rs.getString("Name"));
                    per.setAmount(rs.getInt("Amount"));
                    perList.add(per);
                }
            }
            //send the serialized object
            String gabim="Ska asnje gabim";
            String gabimNr="1";
            t.sendResponseHeaders(200,0);
            OutputStream os = t.getResponseBody();
            SendResponse obj = new SendResponse(gabim,gabimNr,perList);
            ObjectOutputStream objOut = new ObjectOutputStream(os);
            objOut.writeObject(obj);
            objOut.close();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
            //ketu cojme nje object me keto te dhena
            String gabim=("Dicka nuk shkoi mire me marrjen e objektit");
            String gabimNr="3";
            rrayList<Personat> perList = null;
            t.sendResponseHeaders(200,0);
            OutputStream os = t.getResponseBody();
            SendResponse obj = new SendResponse(gabim,gabimNr,perList);
            ObjectOutputStream objOut = new ObjectOutputStream(os);
            objOut.writeObject(obj);
            objOut.close();
        } catch (SQLException e) {
            //ketu cojme nje objekt me keto te dhena
            e.printStackTrace();
            String gabim=("Dicka nuk shkoi mire ne lidhje me databasin");
            String gabimNr="4";
            ArrayList<Personat> perList = null;
            t.sendResponseHeaders(200,0);
            OutputStream os = t.getResponseBody();
            SendResponse obj = new SendResponse(gabim,gabimNr,perList);
            ObjectOutputStream objOut = new ObjectOutputStream(os);
            objOut.writeObject(obj);
            objOut.close();
        }
    }
}
}

class Personat {
int ID;
String Name;
int Amount;
public int getID() {
    return ID;
}
public void setID(int iD) {
    ID = iD;
}
public String getName() {
    return Name;
}
public void setName(String name) {
    Name = name;
}
public int getAmount() {
    return Amount;
}
public void setAmount(int amount) {
    Amount = amount;
}
}

class SendResponse implements Serializable {
private static final long serialVersionUID = 1L;

String gabim;
String gabimNr;
ArrayList<Personat> personList;
public SendResponse(String gabim, String gabimNr,
        ArrayList<Personat> personList) {
    super();
    this.gabim = gabim;
    this.gabimNr = gabimNr;
    this.personList = personList;
}
public String getGabim() {
    return gabim;
}
public void setGabim(String gabim) {
    this.gabim = gabim;
}
public String getGabimNr() {
    return gabimNr;
}
public void setGabimNr(String gabimNr) {
    this.gabimNr = gabimNr;
}
public ArrayList<Personat> getPersonList() {
    return personList;
}
public void setPersonList(ArrayList<Personat> personList) {
    this.personList = personList;
}
} 
```

`ex.printStackTrace();`在我从Client3 文件中运行它之后，我得到了这个：

```
java.io.IOException: Premature EOF
java.io.IOException: Premature EOF
at sun.net.www.http.ChunkedInputStream.readAheadBlocking(Unknown Source)
at sun.net.www.http.ChunkedInputStream.readAhead(Unknown Source)
at sun.net.www.http.ChunkedInputStream.read(Unknown Source)
at java.io.FilterInputStream.read(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(Unknown Source)
at java.io.ObjectInputStream$PeekInputStream.read(Unknown Source)
at java.io.ObjectInputStream$PeekInputStream.readFully(Unknown Source)
at java.io.ObjectInputStream$BlockDataInputStream.readShort(Unknown Source)
at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
at java.io.ObjectInputStream.<init>(Unknown Source)
at server3.Client3.main(Client3.java:29) 
```

我不知道如何更快地读取文件或让我的程序变慢，有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:54:06.790

我不认为这是由于您的程序的速度，如果没有要读取的内容，我希望 readObject() 会阻塞。相反，我认为您在尝试读取的数据中缺少终止符，您需要查看发送到程序的数据。一个类似的问题在[这里](https://stackoverflow.com/questions/13210108/reading-a-web-page-in-java-ioexception-premature-eof)得到了解决，虽然它使用的是 readLine()

# node.js - nodejs请求模块解析主体

> ID：13230236
> 
> 赞同：2
> 
> 时间：2012-11-05T10:32:09.723
> 
> 标签：node.js, request

我有以下代码：

```
var express = require('express');
var app = express.createServer();
var request = require('request');

app.use(myMiddleware);
app.listen(5010);

var payload = { id: 1 };

request({
  method: 'POST',
  body:JSON.stringify(payload),
  url: 'http://localhost:5000'
}, function(err, res, body) {
  console.info("Request Done");
}) 
```

在我的中间件代码中，我想解析正文并提取请求 ID，但由于某种原因，以下代码不起作用（有效负载未定义）：

```
 var myMiddleware= function (req, res, next){
  var payload = req.body;
  if (payload.id === 1) console.info("first request!!!!!");
  next();
} 
```

当我尝试打印“有效负载”时，我得到的只是`[object Object]`.

您能告诉我如何提取 id，以及如何打印有效负载对象的属性吗？

谢谢，李

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T10:40:37.903

通过添加解决：

```
app.use(express.bodyParser()); 
```

并将以下内容添加到请求代码中：

```
json: true 
```

添加 json=true 属性后，我还从请求正文中删除了 JSON.stringify(...) （现在我不需要对正文进行字符串化，因为它需要一个 json 对象）

谢谢。

# rest - 用于验证资源的 REST 实践

> ID：13230237
> 
> 赞同：2
> 
> 时间：2012-11-05T10:32:13.983
> 
> 标签：rest

我目前正在实施“令牌”REST 服务。

令牌只是一个字符串，由一些参数构建而成，然后经过哈希处理并在一定时间后过期。

我想在我的 REST 服务中有一个可以验证令牌的端点，但我不能 100% 确定如何以 RESTful 方式实现它

1.  我认为这应该通过 GET 完成，因为它不会更改状态，只要我正确设置缓存控件，它就可以缓存一段合理的时间。IE`mysite.com/token/kjfhwekjfwekj`
2.  什么是适当的返回码？如果它是有效的，我会假设 200，但如果它是无效的呢？我觉得 400 是错误的，因为尽管资源本身无效，但客户端并没有错误地调用端点。404在这里正确吗？如果我们认为代币是短暂的资源，我猜是吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T10:36:45.367

`GET`是检查令牌的正确 HTTP 动词。

假设令牌“无效”意味着：

1.  它从未存在过，或者
2.  它存在但不再存在。

您希望您的服务的客户能够*知道其中的区别*吗？

*   如果**是**，则返回`404 Not Found`案例 1 和`410 Gone`案例 2。
*   如果**没有**，返回`404 Not Found`。

如果令牌存在，`200 OK`则正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T10:43:33.250

如果你想Restful，可能最好使用HEAD方法，因为你不是在请求token，你只是想知道token是否存在。

HEAD 方法用于请求资源的元数据。GET 用于检索资源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:46:52.450

服务器具有对称散列密钥；它可用于验证传入令牌是否由其他人生成。

# javascript - 使用 javascript 创建新元素

> ID：13230238
> 
> 赞同：0
> 
> 时间：2012-11-05T10:32:15.317
> 
> 标签：javascript, spring, jsp

在我的 Spring Web 应用程序中，对于客户注册页面，我正在添加和删除包含文本、img 和 a-ref 元素的 div。当我在同一个jsp中编写代码时，页面可以完美运行，但是根据我的要求，当我尝试将javascript代码放入js文件并导入它并单击添加按钮时，将插入一个新的div以及下面给出的脚本代码，

![在下图中，当我按下“+”号按钮时，我打算调用一个 js 函数，该函数添加一行带有文本字段和一个关闭按钮和一个 img，但它不是显示代码](../Images/a0c088ddff8246c953f977846bdb2376.png)

我用来添加 div 的 js 函数是..

```
function addInputBox() { 
var ni = document.getElementById('myDiv'); 
var numi = document.getElementById('theValue');
var num = (document.getElementById('theValue').value -1)+ 2;
numi.value = num;
var newdiv = document.createElement('div');
var divIdName = 'my'+num+'Div';

newdiv.setAttribute('id',divIdName); 
var htmlString  = '<div style="margin-top: 5px"><input type="text"name="service_name" title="Service Name" maxlength="200" style="width:400px;vertical-align:middle;"/>'+ 
                            '<a href="javascript:removeInputBox(\''+divIdName+'\')"><img src="<c:url value="/resources/img/common/x.png" />" alt="" style="vertical-align:middle;margin-left: 5px"/></a>'+
                            '<img src="<c:url value="/resources/img/ope/new.png" />" style="vertical-align:middle;margin:2px 0 0 2px;margin-left: 5px" /> </div> ';

newdiv.innerHTML = htmlString; 
ni.appendChild(newdiv);} 
```

知道可能出了什么问题吗？任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:46:42.213

很确定脚本在那里，因为你没有逃避报价..试试这个

```
<img src="<c:url value=\"/resources/img/common/x.png\" />" alt="" style="vertical-align:middle;margin-left: 5px"/></a>'+
                        '<img src="<c:url value=\"/resources/img/ope/new.png\" />" style="vertical-align:middle;margin:2px 0 0 2px;margin-left: 5px" /> 
```

在您的 img 标签中缺少转义...“\”...

不确定 wat c:url 是...

希望这可以帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T10:35:15.337

我*认为*它试图将您的`<c:url`部分呈现为标签....您是否能够明确提供字符串中这些图像的路径？

# android - 应用程序进入后台时需要实现超时功能

> ID：13230239
> 
> 赞同：3
> 
> 时间：2012-11-05T10:32:17.227
> 
> 标签：android, android-lifecycle

当我的应用程序进入后台 5 分钟时，我需要创建一个超时功能（任何触发 onPause() 的东西，除非活动完成时）。如果用户返回应用程序，则应取消计时器。

另外，我需要计时器不依赖于手机中设置的时间，这意味着当应用程序进入后台然后用户更改应用程序仍将在 5 分钟内超时的时间。

查看 AlarmManager 的文档，它指出以下内容：

```
Note: The Alarm Manager is intended for cases where you want to have your application code       
run at a specific time, even if your application is not currently running. For normal 
timing operations (ticks, timeouts, etc) it is easier and much more efficient to use 
Handler. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:30:48.143

或者，您可以尝试设置[绑定服务](http://developer.android.com/guide/components/bound-services.html)- 即使用户切换最前面的应用程序，这些服务也可以在后台运行。您可以使用[Handler](http://developer.android.com/reference/android/os/Handler.html)与服务进行通信，就像使用线程一样。

最简单的方法是使用预定义类型的 sendEmptyMessageDelayed 并在您的应用程序回到顶部后使用对 removeMessages() 的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:25:10.143

你应该看看[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。[您可以使用PendingIntent](http://developer.android.com/reference/android/app/PendingIntent.html)轻松地将您的应用程序编程为在特定时间或每 5 分钟运行一次。您可以使用相同的 PendingIntent 取消它。

我不知道时间依赖性，但很容易测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:34:14.193

使用`onPause()`设置闹钟`AlarmManager`，如下所示：

```
AlarmManager alarmManager = getSystemService(Context.ALARM_SERVICE);
// Alarm time is elapsed time since boot (including sleep) plus 5 minutes
long alarmTime = SystemClock.elapsedRealtime() + 5 * 60 * 1000;
alarmManager.set(AlarmManager.ELAPSED_REALTIME, alarmTime, pendingIntent); 
```

为此，`pendingIntent()`您可以使用广播 Intent，也可以让它开始您的一项活动。取决于你想在闹钟响起时做什么。

**注意：使用`AlarmManager.ELAPSED_REALTIME`确保用户对其日期/时间设置所做的更改不会对您的 5 分钟超时产生任何影响。**

确保在您的应用程序恢复（in `onResume()`）和完成时（in `onDestroy()`）取消警报

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T11:35:50.763

我想知道最简单的解决方案是否不是仅在您的活动暂停时在 sharedPreferences 中设置一个值并在 onResume 上再次测试该值。为避免用户更改时钟破坏值，您可以使用 SystemClock.elapsedRealtime() 或 SystemClock.uptimeMillis()

# ios - 在 UITableView (iOS) 中显示 NSArray

> ID：13230240
> 
> 赞同：1
> 
> 时间：2012-11-05T10:32:25.130
> 
> 标签：ios, objective-c, uitableview, nsarray

我想在 UITableView 数组中显示，如：

```
(
    1,
        {
        date = 1351876762;
        ncom = 0;
        nid = 11739814;
        "read_ncom" = 0;
        text = "<div class=\"wikiText\"><!--4-->New note text </div>";
        title = lol;
        uid = 3795852;
    }
) 
```

单元格应该有一个来自这个数组的带有“标题”的标签。我怎样才能做到这一点？

PS：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    NSString *textCell = [[array objectAtIndex:indexPath.row] objectForKey:@"title"];
    cell.textLabel.text = textCell;
    return cell;
} 
```

返回信号 SIGABRT。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:40:52.130

[编辑]

你的数组似乎很奇怪。尝试关注并让我知道结果。

```
NSString *textCell = [[array objectAtIndex:1] objectForKey:@"title"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:40:21.107

您的表格中应该有标识符为“Cell”的单元格（如果您有情节提要）或手动创建此单元格

```
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:45:49.030

```
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

cell.textLabel.text  = [[array objectAtIndex:1] objectforkey:@"title"]; 
```

试试上面的代码

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T10:43:31.633

替换这个：

```
NSString *textCell = [[[array objectAtIndex:indexPath.row] objectForKey:@"1"]objectForKey:@"title"]; 
```

# css - Ext JS 4 Neptune 主题编号字段问题

> ID：13230244
> 
> 赞同：3
> 
> 时间：2012-11-05T10:32:37.660
> 
> 标签：css, extjs4

使用 Neptune 主题时，数字字段旁边的图标位于表单面板的右上角。所有图标都具有 CSS LEFT 和 TOP 属性 - 但是，对于数字字段图标，它占据相对于 From Panel 的位置。其他图标放置在正确的位置。检查附加的图像和 css 类：

![在此处输入图像描述](../Images/ec650933b67fb73938e0ebfba64034f0.png)

```
.x-form-trigger::after 
{
position: absolute;
top: 5px;
left: 6px;
width: 11px;
height: 11px;
content: "";
background: url('../../resources/themes/images/neptune/triggerfield.png') no-repeat;
} 
```

我想将图标放在正确的位置。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:39:23.773

您应该`position: relative`添加`.x-form-spinner-up`和`.x-form-spinner-down`。工作样本：http: [//jsfiddle.net/QfZQX/3/](http://jsfiddle.net/QfZQX/3/)

# c - 如何在 C 中解析字符串？

> ID：13230253
> 
> 赞同：4
> 
> 时间：2012-11-05T10:33:22.187
> 
> 标签：c

我是学习C的初学者；所以，请对我放轻松。:)

我正在尝试编写一个非常简单的程序，它将字符串的每个单词变成“Hi（输入）！” 句子（假设您输入名称）。另外，我使用数组是因为我需要练习它们。

我的问题是，一些垃圾被放入数组的某个地方，它弄乱了程序。我试图找出问题所在，但无济于事；所以，是时候寻求专家的帮助了。我在哪里犯了错误？

ps：它在某处也有无限循环，但很可能是放入数组的垃圾的结果。

```
#include <stdio.h>
#define MAX 500 //Maximum Array size.

int main(int argc, const char * argv[])
{
    int stringArray [MAX];
    int wordArray [MAX];
    int counter = 0;
    int wordCounter = 0;

    printf("Please type in a list of names then hit ENTER:\n");  
    // Fill up the stringArray with user input.
    stringArray[counter] = getchar();
    while (stringArray[counter] != '\n') {
        stringArray[++counter] = getchar();
    }

    // Main function.
    counter = 0;
    while (stringArray[wordCounter] != '\n') {     
        // Puts first word into temporary wordArray.
        while ((stringArray[wordCounter] != ' ') && (stringArray[wordCounter] != '\n')) {
            wordArray[counter++] = stringArray[wordCounter++];
        }
        wordArray[counter] = '\0';

        //Prints out the content of wordArray.
        counter = 0;
        printf("Hi ");
        while (wordArray[counter] != '\0') {
            putchar(wordArray[counter]);
            counter++;
        }
        printf("!\n");

        //Clears temporary wordArray for new use.
        for (counter = 0; counter == MAX; counter++) {
            wordArray[counter] = '\0';
        } 
        wordCounter++;
        counter = 0; 
    }
    return 0;
} 
```

解决了！当我增加 wordCounter 时，我需要将以下 if 语句添加到末尾。:)

```
 if (stringArray[wordCounter] != '\n') {
            wordCounter++;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:55:28.847

您正在使用`int`数组来表示字符串，可能是因为`getchar()`在`int`. 但是，字符串更好地表示为`char`数组，因为它们在 C 中就是这样。`getchar()`返回 an的事实`int`肯定令人困惑，这是因为它需要能够返回`EOF`不适合 a的特殊值`char`。因此它使用`int`, 这是一个“更大”的类型（能够表示更多不同的值）。因此，它可以拟合所有`char`值，*并且* `EOF`.

使用`char`数组，您可以直接使用 C 的字符串函数：

```
char stringArray[MAX];

if(fgets(stringArray, sizeof stringArray, stdin) != NULL)
   printf("You entered %s", stringArray); 
```

请注意，这`fscanf()`将在字符串中留下行尾字符，因此您可能希望将它们剥离。我建议实现一个就地函数来修剪前导和尾随空格，这也是一个很好的练习。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T10:40:09.773

```
 for (counter = 0; counter == MAX; counter++) {
        wordArray[counter] = '\0';
    } 
```

你永远不会进入这个循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T14:13:54.637

用户1799795，

对于它的价值（现在你已经解决了你的问题），我冒昧地向你展示了在“使用数组”的限制下我是如何做到这一点的，并解释了我为什么要这样做。 . 请注意，虽然我是经验丰富的程序员，但我不是 C 大师……我曾与那些绝对让我陷入 C 杂草（双关语）的人一起工作。

```
#include <stdio.h>
#include <string.h>

#define LINE_SIZE 500
#define MAX_WORDS 50
#define WORD_SIZE 20

// Main function.
int main(int argc, const char * argv[])
{
    int counter = 0;

    // ----------------------------------
    // Read a line of input from the user (ie stdin)
    // ----------------------------------
    char line[LINE_SIZE];
    printf("Please type in a list of names then hit ENTER:\n");
    while ( fgets(line, LINE_SIZE, stdin) == NULL )
        fprintf(stderr, "You must enter something. Pretty please!");

    // A note on that LINE_SIZE parameter to the fgets function:
    // wherever possible it's a good idea to use the version of the standard
    // library function that allows you specificy the maximum length of the
    // string (or indeed any array) because that dramatically reduces the
    // incedence "string overruns", which are a major source of bugs in c
    // programmes.
    // Also note that fgets includes the end-of-line character/sequence in
    // the returned string, so you have to ensure there's room for it in the
    // destination string, and remember to handle it in your string processing.

    // -------------------------
    // split the line into words
    // -------------------------

    // the current word
    char word[WORD_SIZE];
    int wordLength = 0;

    // the list of words
    char words[MAX_WORDS][WORD_SIZE]; // an array of upto 50 words of
                                      // upto 20 characters each
    int wordCount = 0;                // the number of words in the array.

    // The below loop syntax is a bit cyptic.
    // The "char *c=line;" initialises the char-pointer "c" to the start of "line".
    // The " *c;" is ultra-shorthand for: "is the-char-at-c not equal to zero".
    //   All strings in c end with a "null terminator" character, which has the
    //   integer value of zero, and is commonly expressed as '\0', 0, or NULL
    //   (a #defined macro). In the C language any integer may be evaluated as a
    //   boolean (true|false) expression, where 0 is false, and (pretty obviously)
    //   everything-else is true. So: If the character at the address-c is not
    //   zero (the null terminator) then go-round the loop again. Capiche?
    // The "++c" moves the char-pointer to the next character in the line. I use
    // the pre-increment "++c" in preference to the more common post-increment
    // "c++" because it's a smidge more efficient.
    //
    // Note that this syntax is commonly used by "low level programmers" to loop
    // through strings. There is an alternative which is less cryptic and is
    // therefore preferred by most programmers, even though it's not quite as
    // efficient. In this case the loop would be:
    //    int lineLength = strlen(line);
    //    for ( int i=0; i<lineLength; ++i)
    // and then to get the current character
    //        char ch = line[i];
    // We get the length of the line once, because the strlen function has to
    // loop through the characters in the array looking for the null-terminator
    // character at its end (guess what it's implementation looks like ;-)...
    // which is inherently an "expensive" operation (totally dependant on the
    // length of the string) so we atleast avoid repeating this operation.
    //
    // I know I might sound like I'm banging on about not-very-much but once you
    // start dealing with "real word" magnitude datasets then such habits,
    // formed early on, pay huge dividends in the ability to write performant
    // code the first time round. Premature optimisation is evil, but my code
    // doesn't hardly ever NEED optimising, because it was "fairly efficient"
    // to start with. Yeah?

    for ( char *c=line; *c; ++c ) {    // foreach char in line.

        char ch = *c;  // "ch" is the character value-at the-char-pointer "c".

        if ( ch==' '               // if this char is a space,
          || ch=='\n'              // or we've reached the EOL char
        ) {
            // 1\. add the word to the end of the words list.
            //    note that we copy only wordLength characters, instead of
            //    relying on a null-terminator (which doesn't exist), as we
            //    would do if we called the more usual strcpy function instead.
            strncpy(words[wordCount++], word, wordLength);
            // 2\. and "clear" the word buffer.
            wordLength=0;
        } else if (wordLength==WORD_SIZE-1) { // this word is too long
            // so split this word into two words.
            strncpy(words[wordCount++], word, wordLength);
            wordLength=0;
            word[wordLength++] = ch;
        } else {
            // otherwise: append this character to the end of the word.
            word[wordLength++] = ch;
        }
    }

    // -------------------------
    // print out the words
    // -------------------------

    for ( int w=0; w<wordCount; ++w ) {
        printf("Hi %s!\n", words[w]);
    }
    return 0;
} 
```

在现实世界中，人们不能对单词的最大长度做出如此严格的假设，或者会有多少单词，如果给出这样的限制，它们几乎都是任意的，因此很快就会被证明是错误的......所以直接解决这个问题，我倾向于使用链表而不是“单词”数组......等到你得到“动态数据结构”......你会喜欢他们的;-)

干杯。基思。

PS：你做得很好......我的建议是“继续卡车”......通过练习这会变得容易得多。

# java - 在 Swing 中覆盖 MouseWheelListener

> ID：13230254
> 
> 赞同：11
> 
> 时间：2012-11-05T10:33:29.340
> 
> 标签：java, swing, scroll, mousewheel

我想覆盖 Swing 中的鼠标滚轮侦听器，但前提是它们按下了 Control 按钮。侦听器将附加到 JPanel，这样当他们滚动滚轮时，它将滚动 JScrollPane，当他们按下控制按钮并滚动滚轮时，它将放大。 JScrollPane 的默认滚动（显然）在我覆盖它之前有效和我自己的听众。这是我的代码：

```
mainPanel.addMouseWheelListener(new MouseWheelListener(){
    @Override
    public void mouseWheelMoved(MouseWheelEvent e) {
        if ((e.getModifiers() & InputEvent.CTRL_MASK) == InputEvent.CTRL_MASK) {
            int notches = e.getWheelRotation();

            if (notches < 0) {
                redrawOnZoom(true);
            } else {
                redrawOnZoom(false);
            }
        }
    }
}); 
```

有没有办法说“如果鼠标自行滚动，则执行默认的 JScrollPane 滚动行为，但如果按下 Ctrl 则缩放”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T11:06:26.033

如果您不想处理它，可以将事件分派给它的父级：

```
final MouseWheelListener wheel = new MouseWheelListener() {

    @Override
    public void mouseWheelMoved(MouseWheelEvent e) {
        // handle some events here and dispatch others
        if (shouldHandleHere(e)) {
            LOG.info("do-my-own-stuff");
        } else {
            LOG.info("dispatch-to-parent");
            e.getComponent().getParent().dispatchEvent(e);
        } 
    }

    public boolean shouldHandleHere(MouseWheelEvent e) {
        return (e.getModifiersEx() & InputEvent.CTRL_DOWN_MASK) != 0;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:37:32.953

提示：覆盖`mouseWheelListener`.

两个功能：`scroll()`和其他`zoom`。

检查`CTRL` `keyPress`内部侦听器。

如果按下，则调用`zoom()`else`scroll()`

请参阅[如何编写摇摆监听](http://www.java2s.com/Tutorial/Java/0260__Swing-Event/HowtoWriteaMouseWheelListener.htm)器以获取指导。

# c# - 将德语特殊字符放入字节数组

> ID：13230259
> 
> 赞同：5
> 
> 时间：2012-11-05T10:33:42.733
> 
> 标签：c#, .net, winforms, encoding, special-characters

我现在正在加密算法，我还需要加密德语单词。所以我必须加密例如字符，例如：ü、ä 或 ö。

在里面我有一个功能：

```
private static byte[] getBytesArray(string data)
{
    byte[] array;
    System.Text.ASCIIEncoding asciiEncoding = new System.Text.ASCIIEncoding();
    array = asciiEncoding.GetBytes(data);            
    return array;
} 
```

但是当数据为“ü”时，数组中返回的字节为63（所以“？”）。如何返回 ü 字节？

我也试过：

```
private static byte[] MyGetBytesArray(string data)
{
    byte[] array;
    System.Text.ASCIIEncoding asciiEncoding = new System.Text.ASCIIEncoding();

    Encoding enc = new UTF8Encoding(true, true);
    array = enc.GetBytes(data);

    return array;
} 
```

但在这种情况下，我在数组中得到 2 个字节：195 和 188。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T10:40:38.407

请用**System.Text.UTF8Encoding**替换**System.Text.ASCIIEncoding**并在您的第一个示例中相应地重命名编码对象。ASCII 基本上不支持德语字符，所以这就是为什么你必须使用其他编码（UTF-8 似乎是这里最好的主意）。

请看这里：[ASCII 编码](http://en.wikipedia.org/wiki/ASCII)和这里：[UTF-8 编码](http://en.wikipedia.org/wiki/UTF-8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T10:03:06.197

你可以用这个

```
System.Text.Encoding utf_8 = System.Text.Encoding.UTF8;

// This is our Unicode string:
string s_unicode = "abcéabc";

// Convert a string to utf-8 bytes.
byte[] utf8Bytes = System.Text.Encoding.UTF8.GetBytes(s_unicode);

// Convert utf-8 bytes to a string.
string s_unicode2 = System.Text.Encoding.UTF8.GetString(utf8Bytes); 
```

# android - 如何将文本放置在底部中心

> ID：13230262
> 
> 赞同：2
> 
> 时间：2012-11-05T10:33:47.913
> 
> 标签：android, textview

**如何将文本放置在底部中心？**

我的实现

```
 @Override
            protected void onDraw(Canvas canvas) {

                Paint strokePaint = new Paint();
                strokePaint.setARGB(255, 0, 0, 0);
                //strokePaint.setTextAlign(Paint.Align.CENTER);

                strokePaint.setTextSize(20);
                strokePaint.setTypeface(Typeface.DEFAULT_BOLD);
                strokePaint.setStyle(Paint.Style.STROKE);
                strokePaint.setStrokeWidth(5);

                Paint textPaint = new Paint();
                textPaint.setARGB(255, 255, 255, 255);
                //textPaint.setTextAlign(Paint.Align.CENTER);
                textPaint.setTextSize(20);
                textPaint.setTypeface(Typeface.DEFAULT_BOLD);

                canvas.drawText("Some Text", 100, 100, strokePaint);
                canvas.drawText("Some Text", 100, 100, textPaint);

            } 
```

```
<ImageView
    android:id="@+id/myImageView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:src="@drawable/img_1" />

<vbright.usanin.salesRegion.Text.TextViewOutline
    android:id="@+id/myImageViewText"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignBottom="@+id/myImageView"
    android:layout_alignLeft="@+id/myImageView"
    android:layout_alignRight="@+id/myImageView"
    android:layout_alignTop="@+id/myImageView" /> 
```

![在此处输入图像描述](../Images/77ced938f2e23351b385a5e8df276978.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:38:30.813

用于`RelativeLayout`将文本放置在您想要的任何位置。在你的情况下`android:layout_alignParentBottom="true"`，`android:layout_centerHorizontal="true"`做魔术。

```
<RelativeLayout  
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:paddingTop="5dip" > 

  <TextView
        android:id="@+id/txtExistingService"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true">
 </TextView> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:38:22.427

您可以使用如下代码

```
<LinearLayout 
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center_horizontal"
        android:layout_marginBottom="1dip"
        >

    <Button 
        android:text="Bottom Center" 
        android:id="@+id/choose" 
        android:layout_width="wrap_content" 
        android:layout_gravity="center"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        />

 <LinearLayout /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-23T11:50:11.233

最简单的答案只需单击`"gravity"`您的 imageView 属性并检查`"bottom"`和`"center_horizontal"`.

# android - 检查 Sqlite 中单行占用多少空间

> ID：13230267
> 
> 赞同：1
> 
> 时间：2012-11-05T10:34:02.930
> 
> 标签：android, sqlite

有没有办法检查 Sqlite 中单行占用多少空间？

我试过用这种方式：

我的表中有 4 个字段：

```
id(int)
name(text)
pat(text)
is_default(bool) 
```

```
 select *, sum(length(id)+length(name)+length(pat)+length(is_default)) 
    from color; 
```

但它返回字符长度（例如：43）。如何确定以字节为单位的行长度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:29:23.910

SQLite 本身不会为您提供此信息，但该[`sqlite-analyzer`工具](http://www.sqlite.org/download.html)可以。

[如果您想从您的应用程序中执行此操作，您必须读取所有记录值并从中推断出磁盘记录格式](http://www.sqlite.org/fileformat2.html#record_format)中使用了多少字节。

# c# - 如何在 Linq 中使用 Sum()？

> ID：13230268
> 
> 赞同：4
> 
> 时间：2012-11-05T10:34:21.603
> 
> 标签：c#, mysql, linq

如何将此语句转换为 LINQ？

```
SELECT Sum(Balance) FROM account WHERE name='stocks' AND userid=290; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T10:35:59.667

```
decimal sumLineTotal = (from od in account
                        where name == 'stocks' && userid == 290
                        select Balance).Sum(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T10:36:26.280

```
var sum = db.account.Where(a => a.name == "stocks" && a.userid == 290)
                    .Sum(a => a.Balance); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:43:24.473

像这样：

```
myBalanceSum = account.Where(x => x.name == 'stocks' && x.userid == 290 ).Sum(x => x.Balance); 
```

# javascript - div标签对齐问题

> ID：13230272
> 
> 赞同：0
> 
> 时间：2012-11-05T10:34:44.747
> 
> 标签：javascript, html, css

我正在尝试创建一个网页，单击按钮可以添加`div`标签。我想做的是，我将`div`在一个标签中创建两个标签，`div`这样所有的展示都是统一的，类似于一个有两列和多行的表格，第一列只包含标签，第二列将包含`textbox`.

这是JS文件：

```
 var counter = 0;

function create_div(type){
        var dynDiv = document.createElement("div");

             dynDiv.id = "divid_"+counter;
             dynDiv.class="main";
             document.body.appendChild(dynDiv);
             question();
             if(type == 'ADDTEXTBOX'){
                ADDTEXTBOX();
             }

             counter=counter+1;
        }

    function question(){
        var question_div = document.createElement("div");
            question_div.class="question";
            question_div.id = "question_div_"+counter;
            var Question = prompt("Enter The Question here:", "");

            var node=document.createTextNode(Question);
            question_div.appendChild(node);
            var element=document.getElementById("divid_"+counter);   
            element.appendChild(question_div);
        }

    function ADDTEXTBOX(){
            var answer_div = document.createElement("div");
            answer_div.class="answer";
            answer_div.id = "answer_div_"+counter;
            var answer_tag = document.createElement("input");
                    answer_tag.id = "answer_tag_"+counter;
                    answer_tag.setAttribute("type", "text");
                    answer_tag.setAttribute("name", "textbox");
                        answer_div.appendChild(answer_tag);

            var element=document.getElementById("divid_"+counter);
            element.appendChild(answer_div);
        } 
```

这是css文件：

```
.question
{
    width: 40%;
    height: auto;
    float: left;
    display: inline-block; 
    text-align: justify;
    word-wrap:break-word;
}
.answer
{
    padding-left:10%;
    width: 40%;
    height: auto;
    float: left;
    overflow: auto;
    word-wrap:break-word;
}
.main
{   
    width: auto;
    background-color:gray;
    height: auto;
    overflow: auto;
    word-wrap:break-word;
} 
```

我的问题是代码工作正常，但两个部门都不是直线。在屏幕上打印第一个 div 后，第二个部门进入另一行。我怎样才能使两者`div's`都在同一行？

PS：我应该坚持当前使用 div 的想法还是应该尝试其他方法？像桌子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:58:01.373

不同行的原因在于您的 JS 代码，请尝试将您的类设置如下：

```
 //question_div.class="question";
        question_div.setAttribute("class", "question") ; 
```

和

```
 //answer_div.class="answer";
        answer_div.setAttribute("class", "answer"); 
```

**还有这个：**

```
//dynDiv.class="main";
dynDiv.setAttribute("class", "main"); 
```

您的 div 没有正确设置类属性。如果您使用 Firefox 来检查您构建的元素是否像您设计的那样，我建议开发人员使用 chrome 内置工具或 FireBug 插件。您可以在这里查看代码：http: [//jsfiddle.net/Nnwbs/2/](http://jsfiddle.net/Nnwbs/2/)

```
 var counter = 0;

function create_div(type){
    var dynDiv = document.createElement("div");

         dynDiv.id = "divid_"+counter;
         //dynDiv.class="main";
         dynDiv.setAttribute("class", "main"); 
         document.body.appendChild(dynDiv);
         question();
         if(type == 'ADDTEXTBOX'){
            ADDTEXTBOX();
         }

         counter=counter+1;
    }

function question(){
    var question_div = document.createElement("div");
       //question_div.class="question";
        question_div.setAttribute("class", "question") ;  
        question_div.id = "question_div_"+counter;
        var Question = prompt("Enter The Question here:", "");

        var node=document.createTextNode(Question);
        question_div.appendChild(node);
        var element=document.getElementById("divid_"+counter);   
        element.appendChild(question_div);

    }

function ADDTEXTBOX(){
        var answer_div = document.createElement("div");
        //answer_div.class="answer";
        answer_div.setAttribute("class", "answer");            
        answer_div.id = "answer_div_"+counter;
        var answer_tag = document.createElement("input");
                answer_tag.id = "answer_tag_"+counter;
                answer_tag.setAttribute("type", "text");
                answer_tag.setAttribute("name", "textbox");
                    answer_div.appendChild(answer_tag);

        var element=document.getElementById("divid_"+counter);
        element.appendChild(answer_div);

}
create_div("ADDTEXTBOX"); 
```

关于这种方法，我的意思是 div 或表格，您使用 div 是正确的，一般建议这样做。

此外，在您更正您的 JS 代码后，您还可以根据需要修复一些 css 样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:38:12.977

如果您使用 chrome 使用检查元素并找到相应的“div”标签并尝试调整样式（位置）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:48:44.600

尝试将两个绝对的 div 定位在一个可能是相对的主 div 内。就像是

```
#mainDiv {
    position:absolute; /* or relative depends how you have it*/
    width:80%;
    height:100%;
    left:10%;
}
#div1 {
    position:absolute;
    width: 40%;
    height:100%;
    left:0px;
    top:0px;
}

#div2 {
    position:absolute;
    width: 40%;
    height:100%;
    right:0px;
    top:0px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T11:02:24.037

这很简单。要将两个 div 对齐，请将两个 div 的位置指定为 display:inline-block;

```
display:inline-block; 
```

注意：两个 div 都必须具有此属性才能出现在一行中。

# video - 在黑莓应用程序中录制视频

> ID：13230276
> 
> 赞同：-1
> 
> 时间：2012-11-05T10:35:00.103
> 
> 标签：video, blackberry

我想在我的应用程序中录制并保存视频，论坛上没有很多关于此的信息。

我不想像“Invoke.invokeApplication(Invoke.APP_TYPE_CAMERA, new CameraArguments());”那样调用相机

下面的代码片段给了我一个空白屏幕[http://docs.blackberry.com/en/developers/deliverables/17968/Record_video_to_a_file_in_a_BB_device_app_1222784_11.jsp](http://docs.blackberry.com/en/developers/deliverables/17968/Record_video_to_a_file_in_a_BB_device_app_1222784_11.jsp)

我已经开始、停止和保存视频，当我尝试播放视频时显示“不支持格式”，有没有办法获得所有支持的格式，是否有所有视频格式的列表？我的代码：

```
public class MyScreen extends MainScreen{
String PATH;
RecordControl _recordControl;
Player _player;
MenuItem RecordVideo;
MenuItem StopVideo;
MenuItem SaveVideo;

    public MyScreen() {
     try {
         _player = javax.microedition.media.Manager.createPlayer("capture://video?encoding=video/3gpp");
         _player.realize();
         VideoControl videoControl = (VideoControl) _player.getControl("VideoControl");
         _recordControl = (RecordControl) _player.getControl( "RecordControl" ); 
         Field videoField = (Field) videoControl.initDisplayMode(VideoControl.USE_GUI_PRIMITIVE, "net.rim.device.api.ui.Field");
         try{
             videoControl.setDisplaySize( Display.getWidth(), Display.getHeight() );
         }catch( MediaException me ){
             Dialog.alert("Display size not supported");
         }
         add(videoField);
         _recordControl.setRecordLocation("file:///store/home/user/videos/VideoRecordingTest.3gpp" );   
         _player.start();
         _recordControl.startRecord();    
     }catch( IOException e ){
         Dialog.alert(e.toString());
     } catch( MediaException e ){
         Dialog.alert(e.toString());
     } 
     RecordVideo = new MenuItem("Start Recording", 0, 0){
         public void run() {
             try {
                _player.start();
                 _recordControl.startRecord(); 
            } catch (MediaException e) {
                Dialog.alert("Error Starting recording");
                e.printStackTrace();
            }
        }
    };
    StopVideo = new MenuItem("Stop Recording", 0, 0){
         public void run() {
            try {
                _player.stop();

            } catch (MediaException e) {
                Dialog.alert("Error Stopping recording");
                e.printStackTrace();
            }
        }
    };
    SaveVideo = new MenuItem("Save Video", 0, 0){
         public void run() {
            try {
                // Create an invocation instance with the specified URL where the file type is one of the media types supported by the media player.
                Invocation invocation = new Invocation("file:///SDCard/BlackBerry/music/001.mp3"); 

                // Get the Registry object using the class name of the application      
                Registry _registry=Registry.getRegistry(Application.getApplication().getClass().getName()); 

                //Invoke the content handler.
                _registry.invoke(invocation);
            } catch (IOException e) 
            {      }

        }
     };
 }
 public void stop() {
     if (_player != null){
          _player.close();
          _player = null;
     }

     if (_recordControl != null){
         _recordControl.stopRecord();
         try {
             _recordControl.commit();
         } 
         catch (Exception e) 
         {
             Dialog.alert(e.toString());
         }
         _recordControl = null;
     } 
 }
 protected void makeMenu(Menu menu, int instance) {
        ContextMenu contextMenu = ContextMenu.getInstance();
        contextMenu.setTarget(this);
        contextMenu.clear();
        this.makeContextMenu(contextMenu);
        menu.deleteAll();
        menu.add(contextMenu);
    }

    public void makeContextMenu(ContextMenu contextMenu) {
        contextMenu.addItem(MenuItem.separator(32));
        contextMenu.addItem(RecordVideo);
        contextMenu.addItem(StopVideo);
        contextMenu.addItem(SaveVideo);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:49:13.557

用于重新编码、停止和保存视频以及退出视频的完整代码：

帮手：

```
public static boolean SdcardAvailabulity() {
 String root = null;
 Enumeration e = FileSystemRegistry.listRoots();
 while (e.hasMoreElements()) {
     root = (String) e.nextElement();
     if( root.equalsIgnoreCase("sdcard/") ) {
         return true;
     }else if( root.equalsIgnoreCase("store/") ) {
         return false;
     }
 }
 class MySDListener implements FileSystemListener {
     public void rootChanged(int state, String rootName) {
         if( state == ROOT_ADDED ) {
             if( rootName.equalsIgnoreCase("sdcard/") ) {
             }
         } else if( state == ROOT_REMOVED ) {
         }
     }
 }
 return true;
} 
```

主班

```
String _encoding = "encoding=video/3gpp&mode=standard";
private static Player _player;
private static VideoControl _vc;
private RecordControl _rc;
private static boolean _locationSet = false;
private static OutputStream _out;
private static FileConnection _fc;
String  PATH;
String STREAM_VIDEO_FILE;
String StringVideofileName;
/*LabelField GetVideofileName = new LabelField("",LabelField.FOCUSABLE){
    protected boolean navigationClick(int status, int time){
        Dialog.alert("Clicked");
        return true;
    }
};*/
protected boolean keyChar( char c, int status, int time ){
    switch( c ) {
        case 's':
            startRecord();
            return true;
        case 'x':
            stopRecord();
            return true;
        case 'c':
            commit();
            return true;
        default:
            return false;
    }
}
private void startRecord(){
    try {
        if( !_locationSet ){     
            try {
                System.out.println("STREAM_VIDEO_FILE-------------"+STREAM_VIDEO_FILE);
                _fc = (FileConnection)Connector.open( STREAM_VIDEO_FILE ); 

                if( !_fc.exists() ){
                    _fc.create();
                }                            
                _fc.truncate( 0 );                         
                _out = _fc.openOutputStream();
            } catch ( Exception e ) {
                return;
            }
            _rc.setRecordStream( _out );
            _locationSet = true;
        }               
        _rc.startRecord();
    } catch ( Exception e ) {
    }
}
private void stopRecord(){
    try {             
        _rc.stopRecord();
    } catch ( Exception e ) {
    }
}
private void commit() {
    try {           
        _rc.commit();
        Dialog.alert( "Saved" );
        _locationSet = false;
        try {
            _out.close();
            _fc.close();
            StringVideofileName =_fc.getName();
            DefaultScreen.LF.setText(StringVideofileName);
             if(_player!=null)
                 _player.close();          
        }catch(Exception e){
            if(_player!=null){
                _player.close();
            }
            if(_fc!=null){
                try{
                    _fc.close();
                }catch (IOException e1){ 
                }
            }                    
        }
    } catch ( Exception e ) {
    }
}
public MyScreen(){
    if(Sh.SdcardAvailabulity()){
        PATH = System.getProperty("fileconn.dir.memorycard.photos")+"Video_"+System.currentTimeMillis()+".mp4";//here "str" having the current Date and Time;
    } else {
        PATH = System.getProperty("fileconn.dir.photos")+"Video_"+System.currentTimeMillis()+".mp4"; 
    }
    STREAM_VIDEO_FILE = PATH;
    try {           
        _player = javax.microedition.media.Manager.createPlayer( "capture://video?" + _encoding );               
        _player.start();
        _vc = (VideoControl)_player.getControl( "VideoControl" );
        _rc = (RecordControl)_player.getControl( "RecordControl" );              
        final Field videoField = (Field)_vc.initDisplayMode( VideoControl.USE_GUI_PRIMITIVE, "net.rim.device.api.ui.Field" );              
        _vc.setDisplaySize( Display.getWidth(), Display.getHeight() );
        add( videoField );
    } catch ( final Exception e ) {
        System.out.println( "Exception in VideoScreen constructor" );
    }
    addMenuItem( new MenuItem( "Start Video Recording", 0, 0 ){
        public void run(){
            startRecord();
        }
    });
    addMenuItem( new MenuItem( "Stop Video Recdording", 0, 0 ){
        public void run(){
            stopRecord();
        }
    });
    addMenuItem( new MenuItem( "Save Video Recording", 0, 0 ){
        public void run(){
            commit();
            UiApplication.getUiApplication().invokeLater(new Runnable() {                            
                    public void run() {
                    UiApplication.getUiApplication().popScreen(MyScreen.this);
                    }
                }); 
        }
    });
}
} 
```

# java - Paypal 和 Java：不显示订单摘要和确认失败

> ID：13230279
> 
> 赞同：3
> 
> 时间：2012-11-05T10:35:04.823
> 
> 标签：java, jsp, paypal, paypal-sandbox

在我的贝宝 JSP 应用程序中，当重定向到贝宝帐户时（[https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-50634332TM915520D](https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-50634332TM915520D)）它不显示帐户摘要（如图片）。最后在成功页面上也显示失败。 ![在此处输入图像描述](../Images/2a2dd6381906bb9dd9dfb4360f7f3977.png)

. setcheckout.jsp 是

```
<body>
        <%
            String url = "https://api-3t.sandbox.paypal.com/nvp";
            String charset = "UTF-8";
            String user = "cinewo_13895465_biz_api1.gmail.com";
            String pwd = "1233310405";
            String signature = "AbLJtIu5Xk-EeZNM1Qxyhl8A3UcjAXCXJk7gW24OlxsLXL3ORPJX5no3";

            //Get the amount here  

            String amount = "20";

            String amt = request.getParameter("amount");
            System.out.println("amt : "+amt);
            if ( amt != null) {
                amount = amt;                
                // Setting amount to  session 
                session.setAttribute("amount", amount);
            }

            // Please give your ip address here not localhost 
            //  if dont no ip addrress just take google on your sys and search what is my ip it shows give it here

            String returnurl = "http://192.168.0.230:8084/Payment/sucess.jsp";
            String cancelurl = "http://192.168.0.230:8084/Payment/canceled.jsp";

            String query = "USER=" + user + "&PWD=" + pwd + "&SIGNATURE=" + signature + "&PAYMENTREQUEST_0_PAYMENTACTION=Sale&"
                    + "PAYMENTREQUEST_0_AMT=" + amount + "&RETURNURL=" + returnurl + "&CANCELURL=" + cancelurl + "&METHOD=SetExpressCheckout"
                    + "&VERSION=84.0";

            URLConnection connection = new URL(url).openConnection();
            connection.setDoOutput(true); // Triggers POST.
            connection.setRequestProperty("Accept-Charset", charset);
            connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=" + charset);
            OutputStream output = null;
            try {
                output = connection.getOutputStream();
                output.write(query.getBytes(charset));
            } finally {
                if (output != null) {
                    try {
                        output.close();
                    } catch (IOException logOrIgnore) {
                        System.out.println("logOrIgnore : " + logOrIgnore);
                    }
                }
            }

            InputStream resp = connection.getInputStream();

            // StringBufferInputStream buf = new StringBufferInputStream(s);
            InputStreamReader reader = new InputStreamReader(resp);

            // Read from the input stream.
            int charRead;
            String outp = "";
            char tmp;
            while ((charRead = reader.read()) >= 0) {
                System.out.print((char) charRead);
                tmp = (char) charRead;
                outp += Character.toString(tmp);
                // out.print((char)charRead);
            }

            out.println("outp : " + outp);

            // Close the InputStreamReader and the
            // StringBufferInputStream objects.
            resp.close();
            reader.close();

            String decoded = URLDecoder.decode(outp, charset);
            //String n= URLEncoder.encode(outp, charset);

            String[] params = decoded.split("&");
            String[] eachpair;
            HashMap<String, String> hm = new HashMap<String, String>();
            for (int i = 0; i < params.length; i++) {
                eachpair = params[i].split("=");
                hm.put(eachpair[0], eachpair[1]);
            }

            String ack = "", token = "", version = "", tms = "", bld = "", corelid = "";

            out.println("ACK : " + hm.get("ACK"));

            ack = hm.get("ACK");

            if (ack.equals("Success")) {
                token = hm.get("TOKEN");
                version = hm.get("VERSION");
                tms = hm.get("TIMESTAMP");
                bld = hm.get("BUILD");
                corelid = hm.get("CORRELATIONID");
                String logurl = "https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=" + token;
                response.sendRedirect(logurl);
            }

            System.out.println("resp :" + resp);

            // final String PAYPAL_URL = "https://api-3t.sandbox.paypal.com/nvp";

        %>
        <h1>Hello World!</h1>
    </body> 
```

和 success.jsp 是

<%

```
 String user = "cinewo_13895465_biz_api1.gmail.com";
        String pwd = "1325310405";
        String signature = "AbLJtIu5Xk-EeZNM1Qxyhl8A3UcjAXCXJk7gW24OlxsLXL3ORPJX5no3";
        String payerID = request.getParameter("PayerID");
        String token = request.getParameter("token");
        String amount = "25";

        //Reading amount from session

        String amt = session.getAttribute("amount")+"";
        if(amt!=""){
            amount=amt;
        }

        String version = request.getParameter("VERSION");
        String build = request.getParameter("BUILD");
        String charset = "UTF-8";

        token = URLEncoder.encode(token, charset);
        payerID = URLEncoder.encode(payerID, charset);

        String query = "USER=" + user + "&PWD=" + pwd + "&SIGNATURE=" + signature + "&PAYMENTACTION=Sale&"
                + "PAYERID=" + payerID + "&TOKEN=" + token + "&AMT=" + amount + "&METHOD=DoExpressCheckoutPayment"
                + "&VERSION=84.0";

        String url = "https://api-3t.sandbox.paypal.com/nvp";

        URLConnection connection = new URL(url).openConnection();
        connection.setDoOutput(true); // Triggers POST.
        connection.setRequestProperty("Accept-Charset", charset);
        connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=" + charset);
        OutputStream output = null;

        try {
            output = connection.getOutputStream();
            output.write(query.getBytes(charset));
        } finally {
            if (output != null) {
                try {
                    output.close();
                } catch (IOException logOrIgnore) {
                    System.out.println("logOrIgnore : " + logOrIgnore);
                }
            }
        }

        InputStream resp = connection.getInputStream();

        InputStreamReader reader = new InputStreamReader(resp);

        // Read from the input stream.
        int charRead;
        String outp = "";
        char tmp;
        while ((charRead = reader.read()) >= 0) {
            System.out.print((char) charRead);
            tmp = (char) charRead;
            outp += Character.toString(tmp);
            // out.print((char)charRead);
        }
        String decoded = URLDecoder.decode(outp, charset);

        //out.println("decoded : " + decoded);

        String[] params = decoded.split("&");
        String[] eachpair;
        HashMap<String, String> hm = new HashMap<String, String>();
        for (int i = 0; i < params.length; i++) {
            eachpair = params[i].split("=");
            hm.put(eachpair[0], eachpair[1]);
        }

        String ack = "", corelid = "", tms = "", bld = "";

        out.println("ACK : " + hm.get("ACK"));

        ack = hm.get("ACK");
        if (ack.equals("Success")) {

            token = hm.get("TOKEN");
            version = hm.get("VERSION");
            tms = hm.get("TIMESTAMP");
            bld = hm.get("BUILD");
            corelid = hm.get("CORRELATIONID");

            out.println("token : " + token);
            out.println("version : " + version);
            out.println("tms : " + tms);
            out.println("bld : " + bld);
            out.println("corelid : " + corelid);

        } else {
            out.println("Sorry try again later");
        }

        // Close the InputStreamReader and the
        // StringBufferInputStream objects.
        resp.close();
        reader.close();
    %>

    <h1>Hello Sucess</h1>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:42:12.130

显示订单夏季`https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-50634332TM915520D`更改`https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=" + token+"&useraction=commit"`

# python - 将 mongodb 返回对象转换为字典

> ID：13230284
> 
> 赞同：36
> 
> 时间：2012-11-05T10:35:14.820
> 
> 标签：python, mongodb, python-2.7, bottle, mongoengine

我将瓶子框架与 mongoengine 一起使用。我有一个订单模型：

```
class OrderDetail(Option):
    orderDetailsQty = FloatField()

    def to_dict(self):
        return mongo_to_dict_helper(self)

class Order(Document):
    userName = StringField(required=True)
    orderDate = DateTimeField()
    orderStatus = ListField(EmbeddedDocumentField(Status))
    orderDetails = ListField(EmbeddedDocumentField(OrderDetail))
    orderComments = ListField(EmbeddedDocumentField(Comment))
    isActive = BooleanField()

    def to_dict(self):
        orderObj = mongo_to_dict_helper(self)
        orderDetailList = []
        for orderDetail in orderObj["orderDetails"]:
            orderDetailList.append(orderDetail.__dict__)
        orderObj["OrderDetails"] = orderDetailList
        return (self) 
```

当查询 mongodb 时，我得到一个对象，然后使用以下函数将其转换为 dict：

```
def mongo_to_dict_helper(obj):
    return_data = []
    for field_name in obj._fields:
        if field_name in ("id",):
            continue
        data = obj._data[field_name]

        if isinstance(obj._fields[field_name], StringField):
            return_data.append((field_name, str(data)))
        elif isinstance(obj._fields[field_name], FloatField):
            return_data.append((field_name, float(data)))
        elif isinstance(obj._fields[field_name], IntField):
            return_data.append((field_name, int(data)))
        elif isinstance(obj._fields[field_name], ListField):
            return_data.append((field_name, int(data)))
        else:
            # You can define your logic for returning elements
            pass
    return dict(return_data) 
```

我在网上找了很久才找到这个功能。后来发现这个函数在将成员定义为 ListField(EmbeddedDocumentField(obj)) 时也失败了。

我还尝试编写一个条件来捕获 EmbeddedDocumentField 的特定情况：

```
elif isinstance(obj._fields[field_name], EmbeddedDocumentField):
    return_data.append(mongo_to_dict_helper(data)) 
```

但这也没有任何好处。

有人有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-05T10:47:45.327

仅使用`to_mongo`对象的方法将其转换为字典怎么样？

```
object.to_mongo() 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-01-09T06:09:10.827

扩展@alexvassel 和@z0r 的答案，调用`.to_mongo()`将对象转换为[SON 实例](http://api.mongodb.org/python/current/api/bson/son.html)。一旦你有了它，你就可以调用它的[`.to_dict()`方法把它转换成字典](http://api.mongodb.org/python/current/api/bson/son.html#bson.son.SON.to_dict)。

例如...（`qset`是从 mongoengine 返回的查询集，在 eg 之后`Posts.objects.all()`）。

```
sons = [ob.to_mongo() for ob in qset]
for son in sons:
    print str(son.to_dict()) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-05-15T16:23:13.223

```
import json
json.loads(yourobj.to_json()) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-11-08T11:12:24.877

扩展@alexvassel 的答案，`to_mongo()`方法返回[SON object](https://api.mongodb.com/python/current/api/bson/son.html)，您可以通过调用其`to_dict()`方法将其转换为 dict

```
object.to_mongo().to_dict() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-10T06:31:21.420

您可以自定义方法将对象转换为 dict

```
class Order(Document):
    userName = StringField(required=True)
    orderDate = DateTimeField()
    orderStatus = ListField(EmbeddedDocumentField(Status))
    orderDetails = ListField(EmbeddedDocumentField(OrderDetail))
    orderComments = ListField(EmbeddedDocumentField(Comment))
    isActive = BooleanField()

    def as_dict(self):
        return {
            "user_name": self.userName,
            "order_date": self.orderDate.strftime("%Y-%m-%d %H:%M:%S"),
        } 
```

现在你可以使用 obj.as_dict() 来听写

```
orders = Order.objects.all()
datas = [each.as_dict() for each in orders] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-14T14:43:03.490

结合所有其他答案，

```
import json
dict = {'data':[json.loads(ob.to_json()) for ob in qset]} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-05T06:20:08.307

可以有两种情况。

1.  当查询返回 CommandCursor 对象时

```
 **records = list(CursorObject)**

    ex - Class.objects().aggregate({...}) 
```

2.  当查询返回 BaseQuerySet 对象时

```
 **import json**

   **records = json.loads(BaseQuerySetObject.to_json())**

   ex - Class.objects().filter(..) 
```

# jquery - JQUERY 验证插件错误 - 隐藏字段

> ID：13230288
> 
> 赞同：0
> 
> 时间：2012-11-05T10:35:21.663
> 
> 标签：jquery, jquery-plugins, field, hidden

我正在使用这个插件来验证一些 html 字段。

但是在第二次点击“btnGravar”之后，这些字段被隐藏了，只是随着“display:none”消失......

有人知道为什么吗？

[源代码](http://pastebin.com/kcpeygYx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:42:20.553

我建议您更改“btnGravar”的类型以提交，并且不要在单击此按钮时进行任何类型的事件处理，然后您的表单将被 jQuery 自动检查，直到它被完全验证。而不是这个：

```
 <input type="button" id="btnGravar" value="Gravar"/> 
```

用这个：

```
 <input type="submit" id="btnGravar" value="Gravar"/> 
```

# javascript - MVC3 Razor - 至少一个复选框检查了验证

> ID：13230292
> 
> 赞同：5
> 
> 时间：2012-11-05T10:35:34.613
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, razor, checkbox

我是 mvc3 和 razor 引擎的新手，我希望它至少选中一个复选框以触发提交按钮。

```
 <div class="editor-field">
      @Html.Label("item1")
      @Html.CheckBoxFor(Model => Model.item1)
      @Html.Label("item2")
      @Html.CheckBoxFor(Model => Model.item2)
      @Html.Label("item3")
      @Html.CheckBoxFor(Model => Model.item3)
 </div>
 <p>
     <input type="submit" value="Create" />
 </p> 
```

我知道如果选择了 0 个复选框，我需要某种标签来呈现文本，并且每个复选框都需要一个 id，以便我可以查看它们的值，但是 mvc3 razor 中有什么东西可以让这更简单吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T10:47:01.457

许多方法之一是

```
<input type="submit" value="Create" onclick="return submitWith();"/>
<span id="validationMessage" /> 
```

并在您的 javascript 中（您可能在这里有更多但保持简单）

```
function submitWith(){   
    var checkedCount = $("input:checked").length;
    var valid = checkedCount > 0;
    if(!valid){
         $('#validationMessage').html('You must select at least one option');
    }
    return valid ;        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:46:37.133

为复选框提供一些有效的名称属性。每个复选框的名称应该相同。让我们说： `Name="CheckBoxForItems"`

创建按钮的按钮`Click`事件：`(In js)`
声明数组并使用每个函数检查是否选中了任何复选框：

```
var arr = new Array();
$('input[name="CheckBoxForItems"]:checked').each(function (i) {
                arr.push($(this).attr("id"));
            });

 if(arr.length > 0)
$("#ButtonId").submit();
} 
```

# python - Windows 8 上 Python 3.3 上的 NumPy

> ID：13230302
> 
> 赞同：6
> 
> 时间：2012-11-05T10:36:00.103
> 
> 标签：python, numpy, windows-8

我正在尝试让 NumPy 在安装了 Python 3.3 的新 Windows 8 安装上工作。[当我从这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/)尝试（两个）安装程序时，当我单击“安装”时它们会崩溃。

有没有人用相同的设置成功？

* * *

编辑：错误图片：![在此处输入图像描述](../Images/9af2d015eb92904806b8257e20b4e040.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:35:32.747

从捕获看来，您尝试安装版本：

*numpy-unoptimized-1.6.2.win32- **py3.3** .‌exe*

但是，我今天早上刚刚检查了该[站点](http://www.lfd.uci.edu/%7Egohlke/pythonlibs/)，最新可用的版本是：

*numpy-unoptimized-1.6.2.win32- **py3.2** .‌exe*

您最近是否再次尝试过安装程序（使用最新版本）？

# android - Android 列表框

> ID：13230304
> 
> 赞同：0
> 
> 时间：2012-11-05T10:36:05.063
> 
> 标签：android, android-layout, android-listview

我想知道是否有教程或示例代码如何在 Android 中实现以下效果，或者是否有人已经为此发布了适配器......基本上基于返回的结果数量，屏幕填充有框，并且随着手指滑动down 更多的盒子将按需加载，直到结果用完。

![Skout 视图](../Images/327d8266d79cc31663369fa2fce0b06d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:30:05.553

这是一个[GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html)。您可以使用您的自定义加载更多 GridView。[这](http://mobile.dzone.com/news/android-tutorial-dynamicaly)是一个相同的自定义 ListView 示例。您可以实现与此类似的自己的自定义 GridView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:17:01.177

您正在寻找的是一个[惰性列表适配器](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)。

它有一个很好的实现。[你可以在这里查看](https://github.com/thest1/LazyList)。您接下来需要做的就是创建列表行的布局，即框。

# visual-c++ - 在图片控件中查找像素值绘制图形

> ID：13230307
> 
> 赞同：0
> 
> 时间：2012-11-05T10:36:12.927
> 
> 标签：visual-c++, mfc, gdi, cdc

我正在创建一个类似于任务管理器的项目，![在此处输入图像描述](../Images/681e52fde195459a8c2668d850f0f34e.png)

现在我想绘制一个图表来显示 cpu 使用情况。

我的问题是我对在 vc++ 中绘画一无所知，但我的想法是我应该先像在任务管理器中那样制作一个网格，但我没有任何像素信息，所以请告诉我如何找到图片中的像素值控制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:30:27.010

与其试图操纵屏幕上的内容，不如在 Windows 发送 WM_PAINT 消息时使用 CBitmap::CreateCompatibleBitmap 和 BitBlt 在内存中创建位图。

这个问题着眼于如何通过处理 WM_PAINT 消息子类化 CStatic 控件（即图片控件）以绘制到对话框上： [Handling WM_PAINT in a Subclassed CStatic Control](https://stackoverflow.com/questions/7187072/handling-wm-paint-in-a-subclassed-cstatic-control)

您只需要添加位图绘画位。

# c# - 为什么 MS Chart 只显示某些数据点的 x 轴标签？

> ID：13230311
> 
> 赞同：4
> 
> 时间：2012-11-05T10:36:21.897
> 
> 标签：c#, winforms, visual-studio-2008

当我将数据绑定到条形图时。对于某些条形，我无法在 X 轴上看到标签。例如：我将四个数据绑定到图表。该图表仅显示第二个和第四个数据标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T17:10:50.710

根据[http://msdn.microsoft.com/fr-fr/library/system.web.ui.datavisualization.charting.axis.interval.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.datavisualization.charting.axis.interval.aspx)你可以尝试类似的东西：

myArea.AxisX.Interval=1;

其中 myArea 是您的主要 ChartArea

注意：“轴的主要刻度线、网格线或标签的间隔属性优先于轴对象的间隔属性设置。”

# bash - nslookup 输出

> ID：13230318
> 
> 赞同：0
> 
> 时间：2012-11-05T10:36:49.823
> 
> 标签：bash, dns, ip-address, nslookup

这是 nslookup 的一些简单输出： nslookup www.go2linux.org 服务器：4.2.2.2 地址：4.2.2.2#53

那边是什么`#53`意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:23:38.503

53 是 DNS 服务器端口号。

# java - Android - 带有 TextView 自动滚动的 ScrollView

> ID：13230323
> 
> 赞同：1
> 
> 时间：2012-11-05T10:36:54.023
> 
> 标签：java, android, xml, textview, scrollview

我在 ScrollView 中有一个 TextView，它当前滚动到 TextView 的底部。

TextView 是动态填充的，不断更新（TextView 本质上是一个操作控制台）。

但是，我遇到的问题是，当动态文本添加到 ScrollView 时，用户可以将文本滚动到黑色空间，每次向 TextView 添加更多内容时，该空间都会增加。

我尝试了各种不同的方法，但是这些方法都没有给出正确的结果。我不能使用 maxLines 或定义布局的高度，因为我需要它对于各种屏幕尺寸是动态的，可见的行数不断变化。

我最初也以编程方式完成了此操作，但是这是随机崩溃的，因此希望将其保留在我的布局中（更好的可用性），示例代码如下：

```
final int scrollAmount = update.getLayout().getLineTop(update.getLineCount()) - update.getHeight();
if(scrollAmount > 0)
{
    update.scrollTo(0, scrollAmount);
} 
```

下面的代码是我当前的布局 xml，用于在添加内容时自动将我的 TextView 滚动到底部：

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/spacer2"
    android:layout_below="@+id/spacer1"
    android:fillViewport="true" >
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <TextView
            android:id="@+id/battle_details"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textSize="12dp"
            android:layout_gravity="bottom" />
    </LinearLayout>
</ScrollView> 
```

![在此处输入图像描述](../Images/540d63eb6d891df563e4beae106747af.png)

编辑 - 这是我用来向我的 TextView 添加文本的代码：

```
private void CreateConsoleString()
{
    TextView update = (TextView)findViewById(R.id.battle_details);
    String ConsoleString = "";
    // BattleConsole is an ArrayList<String>
    for(int i = 0; i < BattleConsole.size(); i++)
    {
        ConsoleString += BattleConsole.get(i) + "\n";
    }
    update.setText(ConsoleString);
} 
```

编辑 2 - 我向 BattleConsole 添加内容，如下所示：

```
BattleConsole.add("Some console text was added");
CreateConsoleString(); 
```

总而言之，我唯一的问题是 ScrollView 和/或 TextView 在底部添加空白区域，而不是阻止用户在文本的最后一行滚动。任何关于我哪里出错的帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:45:36.720

打电话的时候是这样的

```
BattleConsole.get(i) 
```

它有时会返回一个空`String`，因此您基本上只是在`TextView`.

例如，您可以这样做：

```
StringBuilder consoleString = new StringBuilder();
// I'm using a StringBuilder here to avoid creating a lot of `String` objects
for(String element : BattleConsole) {
    // I'm assuming element is not null
    if(!"".equals(element)) {
        consoleString.append(element);
        consoleString.append(System.getProperty("line.separator")); // I'm using a constant here.
    }
}
update.setText(consoleString.toString()); 
```

如果您可以发布我的代码，`BattleConsole`我可以为您提供更多帮助。

*作为脚注：鼓励在 java 中使用 camelCase。根据约定，java中只有类名以大写字母开头。*

# c# - 使用 Microsoft.Office.Interop 读取 excel 文件数据给出异常。WPF 应用程序

> ID：13230327
> 
> 赞同：0
> 
> 时间：2012-11-05T10:37:14.843
> 
> 标签：c#, wpf, c#-4.0, .net-4.0, excel-interop

我有 WPF 应用程序，它读取 excel 文件数据并将其显示在 UI 上。我`Microsoft.Office.Interop`主要用来读取excel文件数据`.xlsx`。在开发机器上应用程序工作正常，但在某些计算机上安装和运行这个应用程序给了我这个错误：

> Excel 检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败，原因是以下错误：80040154 未注册类（HRESULT 异常：0x80040154（REGDB_E_CLASSNOTREG）有什么可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:46:04.583

Interop 库有很多缺点。首先是您需要在目标计算机上安装一份 Excel 副本才能使其正常工作。

因此，我们的团队从不使用它。我建议以下替代方案。

[http://npoi.codeplex.com](http://npoi.codeplex.com)（用于 MS 2003 文件 .xls 的旧库）。

[http://epplus.codeplex.com](http://epplus.codeplex.com)（较新的库，API 更简单，可处理 2007 文件 .xlsx）

两者都不需要 Excel 在服务器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:52:55.047

Microsoft **[Access 数据库引擎 2010 可再发行组件](http://www.microsoft.com/en-us/download/details.aspx?id=13255)**

*   **允许对Excel**文件进行简单查询（Linq 也是） ，
*   它可以**免费**且**轻松地安装**在您部署应用程序的服务器上，
*   不需要在 terget 机器上安装**Office 。**

# expressionengine - MX Google 地图引发“无法打开目录”php 错误

> ID：13230335
> 
> 赞同：3
> 
> 时间：2012-11-05T10:37:37.760
> 
> 标签：expressionengine

我在 ExpressionEngine 网站上安装了[MX Google Maps 。](http://devot-ee.com/add-ons/mx-google-maps)

编辑字段（任何字段）时，我会遇到此错误：

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：opendir（/opt/www/old_site/themes/third_party/mx_google_map/maps-icons/）：无法打开目录：没有这样的文件或目录
> 
> 文件名：mx_google_map/ft.mx_google_map.php
> 
> 行号：212

MX google maps 尝试使用旧站点中指定的主题文件夹路径。我在常规配置和全局模板首选项中使用了正确的主题文件夹路径，但 MX 谷歌地图似乎坚持使用旧路径。

我是否必须在其他地方更改它，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:22:35.670

我想我以前遇到过这个问题，我很确定 Max Lazar 出于某种原因将路径保存在数据库中。在您的数据库中搜索 www/old_site/ 并查看是否有任何结果。

干杯，

抢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:59:35.593

在黑暗中拍摄：您是否查看了 exp_site 表和 site_system_preferences 字段？为了回应 Rob 的想法，我隐约记得在 MSM 网站上遇到过这个问题，尽管不是那个附加组件。它是 base 64 编码的，所以用它来解码。

[http://www.opinionatedgeek.com/dotnet/tools/base64decode/](http://www.opinionatedgeek.com/dotnet/tools/base64decode/)

如果您的“旧”theme_folder_path 值在那里，请更改它并对其进行 base 64encode 以查看它是否更改了某些内容。虽然，在 config.php 中指定 theme_folder_path 和 theme_folder_url 应该覆盖数据库中的任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T12:36:14.557

查看附加源代码，它似乎正在检查一个设置`path_markers_icons`，如果它是空白的，则默认为 EE 主题路径。

您应该能够`path_markers_icons`在全局字段类型设置下找到设置（在附加组件 > 字段类型下）。我建议您将设置设为空白，以便它使用内置的 EE 主题路径，并且不会在将来绊倒您。

此外，根据您的行号，您似乎没有运行最新版本（或者至少是我刚刚下载的版本），所以我建议您升级。

# c# - Web UI 自动化本地化/全球化测试

> ID：13230347
> 
> 赞同：2
> 
> 时间：2012-11-05T10:38:18.000
> 
> 标签：c#, localization, globalization, ui-automation, cultureinfo

我是本地化\全球化测试的新手。我想测试我当前的 Web UI 应用程序。

我正在使用 Selenium 驱动程序使用 C# 语言驱动我的自动化。

基本上，我想检查控件名称或标签名称等文本或与页面上的文本相关的任何内容。我添加了一个 .Resx 文件，其中包含文本字符串，例如考虑一个 Google 搜索页面，该页面有一个带有文本“Google 搜索”的按钮。所以我添加了一个字符串“GoogleSearch”，它的值为“Google Search”。我在我的 App.Config 文件中配置文化。

```
 public static CultureInfo GetCulture()
    {
        string selectedLanguage = ConfigurationManager.AppSettings["CurrentCulture"];

        CultureInfo cultureInfo = Thread.CurrentThread.CurrentUICulture = new CultureInfo(selectedLanguage);

        return cultureInfo;
    } 
```

根据配置设置，我选择了 ja-JP（日语）等文化。但是当我尝试选择 Google 搜索文本的文本时，它总是显示“Google 搜索”。

```
 string gSearch =  ResSearchPage.ResourceManager.GetString("GoogleSearch", GetCulture()); 
```

在这里，ResSearchPage 类是包含“GoogleSearch”字符串的文件。

任何帮助将不胜感激。

提前致谢， Sham_

# google-chrome-extension - 如何在chrome中打开一个新标签？

> ID：13230354
> 
> 赞同：-1
> 
> 时间：2012-11-05T10:38:34.987
> 
> 标签：google-chrome-extension

当用户处于固定标签（标签处于焦点）时，是否可以制作在新标签中打开书签链接的扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-29T23:02:06.187

此方法将允许您直接在新选项卡中打开所有书签。您所要做的就是将书签的网址替换为以下代码：

```
javascript:(function(){ 
   var str = this.location.toString();
   var url = 'http://INSERT_BOOKMARK_URL_HERE' ; 
   if ( !str.includes('/_/chrome/newtab') ) window.open(url); 
   else this.location.replace(url);
})(); 
```

将“ **INSERT_BOOKMARK_URL_HERE** ”替换为所需的 url，注意它必须以“ **http://** ”开头，例如：我的书签是 google 主页“google.com”，书签应该是这样的：

```
javascript:(function(){ 
   var str = this.location.toString();
   var url = 'http://google.com' ; 
   if ( !str.includes('/_/chrome/newtab') ) window.open(url); 
   else this.location.replace(url);
})(); 
```

**注意**：此代码由我编写，旨在与 chrome 的本机新选项卡一起使用，因此当您当前打开的选项卡是默认的新选项卡时，代码将在当前选项卡中打开页面，因此如果您使用自定义选项卡只需替换它的网址在代码中带有“ **/_/chrome/newtab** ”，或者如果您根本不喜欢这个想法，只需使用与前一个相同的代码，除了它总是在新标签中打开书签

```
 javascript:window.open('http://INSERT_BOOKMARK_URL_HERE'); 
```

就是这样，希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:41:01.260

新标签重定向！设置用户指定的 URL 以在新选项卡中加载的扩展。

# magento - 上传的产品图片仅在前端显示

> ID：13230359
> 
> 赞同：1
> 
> 时间：2012-11-05T10:38:45.813
> 
> 标签：magento, magento-1.7

我终于能够使用 magento 1.7.0.2 将产品图片上传到网站，但图片只出现在前端，无法通过管理面板看到。我觉得很奇怪。谁能告诉我如何解决这个问题？我已经刷新了缓存并重新索引了几次，但没有明显的变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T11:11:47.987

我知道这是一个老问题，但我们刚才遇到了同样的问题。

似乎我们所做的导入（.csv 文件）错过了一些字段，因此`media_gallery`Magento 的表中缺少条目。

我们无法再次重复导入，因为客户已经输入了新的并修复了很多进口产品。

我们按照[此处](http://www.blog.magepsycho.com/how-to-fix-the-issue-product-images-missing-in-backend-but-not-in-frontend/)的指南（thnx MagePsycho）进行了整理。

由于我们在 Magento 1.8 上进行修复，因此该指南需要一些修复（手动输入表名），并且在表前缀方面遇到了一些麻烦。

# javascript - 字符串日期到 javascript 日期：解析日期

> ID：13230360
> 
> 赞同：2
> 
> 时间：2012-11-05T10:38:48.807
> 
> 标签：javascript

我想解析日期（字符串日期格式为 javascript 日期格式），但我有各种字符串日期格式，如`YYYY-MM-DD`,`DD-MM-YYYY`等等`'DD/MM/YYYY'`..

是否有任何通用程序或方法可以将这些字符串日期格式转换为 javascript 日期格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:51:47.750

这是我使用的两个库：

*   [时刻.js](http://momentjs.com/)
*   [日期js](http://www.datejs.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:40:37.277

这里`userFormat`的字符串可以是这些格式`'DD-MM-YYYY'`，`'YYYY-MM-DD'`等等`'DD/MM/YYYY'`。

```
function parseDate(dateString, userFormat) {
    var delimiter, theFormat, theDate, month, date, year;
    // Set default format if userFormat is not provided
    userFormat = userFormat || 'yyyy-mm-dd';

    // Find custom delimiter by excluding
    // month, day and year characters
    delimiter = /[^dmy]/.exec(userFormat)[0];

    // Create an array with month, day and year
    // so we know the format order by index
    theFormat = userFormat.split(delimiter);

    //Create an array of dateString.
    theDate = dateString.split(delimiter);
    for (var i = 0, len = theDate.length; i < len; i++){
      //assigning values for date, month and year based on theFormat array.
      if (/d/.test(theFormat[i])){
        date = theDate[i];
      }
      else if (/m/.test(theFormat[i])){
        month = parseInt(theDate[i], 10) - 1;
      }
      else if (/y/.test(theFormat[i])){
        year = theDate[i];
      }
    }
    return (new Date(year, month, date));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:42:47.097

去拿datejs。

[http://www.datejs.com/](http://www.datejs.com/)

...再也不用为编写自己的 Javascript 日期函数而烦恼了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T11:46:53.720

```
function dateParsing(toDate, dateFormat) {
    var dt = Date.parseInvariant(todate, dateFormat); // pass date and your desired format e.g yyyy/M/dd            
    alert(dt); // to check date
} 
```

# c# - 动态编辑所有属性错误消息

> ID：13230362
> 
> 赞同：1
> 
> 时间：2012-11-05T10:38:53.897
> 
> 标签：c#, asp.net-mvc, attributes, asp.net-mvc-4, metadata

我已经制作了自己的翻译系统，我需要翻译验证属性产生的所有验证错误，我已经使用 DisplayNames 这样做了，如下所示：

```
public class MyCustomDataAnnotationModelProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata(IEnumerable<Attribute> attributes, Type containerType, Func<object> modelAccessor, Type modelType, string propertyName)
    {
        var data = base.CreateMetadata(attributes, containerType, modelAccessor, modelType, propertyName);

        if (data.DisplayName != null)
            data.DisplayName = Translator.TranslateOnce(data.DisplayName);

        return data;
    }
} 
```

这翻译了所有的 Display 属性::

```
[Required(ErrorMessage="message"), Display(Name="Language"), StringLength(10)]
public string LanguageName { get; set; } 
```

所以基本上我想对验证错误做同样的事情，但我不知道如何迭代它们。有一个叫做 data.GetValidators() 的东西，但它需要 ControllerContext，我找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:42:21.757

您可以通过创建派生自 ActionFilterAttribute 的属性并修改`OnResultExecuting`方法中的 ModelState 集合来实现此目的。然后使用`System.Web.Mvc.GlobalFilters`集合全局应用此属性。

修改模型状态：

```
public override void OnResultExecuting(ResultExecutingContext filterContext)
{
    foreach (var s in filterContext.Controller.ViewData.ModelState.Values)
    {
        for (var i = s.Errors.Count - 1; i >= 0; i--)
        {
            var e = s.Errors[i];
            if (e.Exception != null && !string.IsNullOrWhiteSpace(e.ErrorMessage))
                s.Errors.Add(new ModelError(Translate(e.Exception), Translate(e.ErrorMessage)));
            else if (e.Exception != null)
                s.Errors.Add(new ModelError(Translate(e.Exception)));
            else 
                s.Errors.Add(new ModelError(Translate(e.ErrorMessage)));

            s.Errors.RemoveAt(i);
        }
    }
} 
```

# php - 重定向到外部链接之前的中间页面

> ID：13230364
> 
> 赞同：1
> 
> 时间：2012-11-05T10:38:56.670
> 
> 标签：php, redirect, hyperlink, external

我是 php 的新手，已经在论坛上搜索过这个并找到了类似的东西，虽然我不明白

我有 2 个外部链接[http://www.hello.com](http://www.hello.com)和[http://www.bye.com](http://www.bye.com)

单击每个链接时，我想加载一个中间页面（例如：redirect.php）5 秒钟

消息：“你要离开 misite.com。再见。”

然后，对适用于每种情况的正确外部链接进行更正。

我需要：

1.- redirect.php 的内容

```
 <a href="<?php $hello.com = $_GET['link']; ?>">Continue to external link</a>
  <a href="<?php $link = $_GET['link']; ?>">Continue to external link</a> 
```

我确定这是错的。另外，我不知道如何放置 5 秒微调器（gif）然后进行重定向（步骤 3）

2.-链接用户点击它。可以吗？我有：

```
 <a href="http://redirect.php?link=hello.com" title="hello">hello</a> 
```

不确定用户点击的链接是否正确，尝试调用重定向页面中的链接，但我无法

好吧，我不知道如何使它工作，我真的很感谢一个例子

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-05T10:43:14.150

您应该创建指向redirect.php 的链接，并将“最终目的地”添加为URL 参数，就像您已经完成的那样。在redirect.php 上，在重定向的head 部分中使用元标记（请参见[此处](http://webdesign.about.com/od/metataglibraries/f/what-is-a-meta-redirect.htm)的示例）。

编辑：要求的代码...

在您的主 php 页面中，拥有您已经编写的链接：

```
<a href="http://redirect.php?link=hello.com">Hello</a>
<a href="http://redirect.php?link=goodbye.com">Goodbye</a> 
```

在redirect.php 中，您需要在`<head>...</head>`HTML 部分添加一个元标记：

```
<html>
    <head>
        ...
        <meta http-equiv="refresh" content="5;url=<?php echo $_GET['link'];?>" />
        ...
    </head>
    <body>
        <h1>You are leaving my site!</h1>
        <img src="/images/spinner.gif" alt="spinner" />
    </body>
</html> 
```

就是这样。元标记“内容”属性包含重定向前的秒数，以及重定向到的地址。

希望这可以帮助。

# iphone - 如何滚动照片厨房照片，如文件夹视图（例如在 Flipboard 应用程序中）

> ID：13230369
> 
> 赞同：0
> 
> 时间：2012-11-05T10:39:11.227
> 
> 标签：iphone, objective-c

我是 iphone 开发的新手。任何人都可以告诉我，我怎样才能像折叠视图一样一张一张地滚动厨房照片。

通过折叠视图，我的意思是折叠应该像 Flipboard 应用程序那样工作。与 Flipboard 所做的相反，视图通过从底部到顶部翻转屏幕视图（反之亦然）来更改，我想创建类似的屏幕视图更改，但发生在从右到左（或反之亦然），其中图像（在画廊中）从中心折叠以显示下一个图像。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:44:13.310

您正在寻找的想法在道德上被称为[封面流](http://www.chaosinmotion.com/flowcover.html)。请查看链接中的代码。希望这足以满足您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:44:16.163

做这件事真的不容易。但是**[gitHub](https://github.com/honcheng/PaperFold-for-iOS)**有一个非常好的库 。

如果您是iOS 开发**新手**，请首先阅读 Apple 文档并尝试从 iOS 重建本机图库视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:45:42.680

你会发现这个项目符合你的需要。

[树叶](http://www.cocoacontrols.com/platforms/ios/controls/leaves)

它显示了折叠视图的完整实现。

# node.js - Nodejs子进程：从已经初始化的进程写入标准输入

> ID：13230370
> 
> 赞同：65
> 
> 时间：2012-11-05T10:39:13.897
> 
> 标签：node.js, stdin, phantomjs, external-process, child-process

我正在尝试`phantomjs`使用节点生成一个外部进程`child_process`，然后在初始化后向该进程发送信息，这可能吗？

我有以下代码：

```
var spawn = require('child_process').spawn,
    child = spawn('phantomjs');

child.stdin.setEncoding = 'utf-8';
child.stdout.pipe(process.stdout);

child.stdin.write("console.log('Hello from PhantomJS')"); 
```

但我在标准输出上得到的唯一东西是 phantomjs 控制台的初始提示。

```
phantomjs> 
```

所以似乎`child.stdin.write`没有任何效果。

我不确定我是否可以在初始生成时向 phantomjs 发送其他信息。

提前致谢。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-11-05T11:17:44.050

您还需要传递`\n`符号才能使您的命令正常工作：

```
var spawn = require('child_process').spawn,
    child = spawn('phantomjs');

child.stdin.setEncoding('utf-8');
child.stdout.pipe(process.stdout);

child.stdin.write("console.log('Hello from PhantomJS')\n");

child.stdin.end(); /// this call seems necessary, at least with plain node.js executable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-13T03:35:33.927

您需要将您`write`的 by`cork`和包围起来`uncork`，该`uncork`方法会刷新自`cork`调用以来缓冲的所有数据。`child.stdin.end()`也会刷新数据，但不再接受数据。

```
var spawn = require('child_process').spawn,
    child = spawn('phantomjs');

child.stdin.setEncoding('utf-8');
child.stdout.pipe(process.stdout);

child.stdin.cork();
child.stdin.write("console.log('Hello from PhantomJS')\n");
child.stdin.uncork(); 
```

# tsql - 按字母数字值排序，如数字

> ID：13230372
> 
> 赞同：0
> 
> 时间：2012-11-05T10:39:16.737
> 
> 标签：tsql, sql-server-2005

MSSQL Server 2005 上有一个表的字段作为 VARCHAR。它包含字母数字值，例如“A,B,C,D ... 1,2,3,...,10,11,12”等。

当我使用以下代码时；

```
....   
ORDER BY TableFiledName 
```

**订购结果如下**11,12,1,2,3 等。

当我使用如下代码时，

```
....   
 ORDER BY
    CASE WHEN ISNUMERIC(TableFiledName) = 0 THEN CAST(TableFiledNameAS INT) ELSE TableFiledName END 
```

我收到如下错误消息；

> 消息 8114，级别 16，状态 5，第 1 行将数据类型 varchar 转换为浮点数时出错。

**怎样才能得到这样的排序结果：** 1,2,3,4,5,6,7,8,9,10,11,12 等。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:41:16.347

`ISNUMERIC`当字段为数字时返回 1。

所以你的第一个问题是它应该是......

```
 CASE WHEN ISNUMERIC(TableFiledName) = 1 THEN 
```

但仅此一项是行不通的。

您需要在值前面加上零并取最右边的

```
 order by 
      case when ISNUMERIC(FieldName) =1 
      then right('000000000'+FieldName, 5)
      else FieldName 
      end 
```

使用 5 允许最多 99999 的数字 - 如果您的数字更高，请增加该数字。

这会将数字放在字母之前。如果您想要数字之前的字母，那么您可以`isnumeric`在排序顺序中添加一个 - 即：

```
 order by
      isnumeric(FieldName),
      case... 
```

这不会处理小数，但你没有提到它们

# magento-1.7 - 处理您的请求 magento 1.7 时出错

> ID：13230373
> 
> 赞同：3
> 
> 时间：2012-11-05T10:39:17.397
> 
> 标签：magento-1.7, magento-1.6, magento

处理您的请求时出错 magento 1.7 出于安全原因，默认情况下禁用异常打印。

错误日志记录号：1116398732

有人对此错误有解决方案吗？请解决我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T11:44:28.833

**解决此问题的三个简单步骤**：
1- 在您的 magento 站点中创建 tmp 目录
2- 转到 magento 站点/错误目录并将 local.xml.sample 更新为 local.xml
3- 转到 magento 站点/lib/Zend/缓存/后端/File.php 并替换 'cache_dir' => null, 为 'cache_dir' => 'tmp'，
**注意：***tmp 目录权限应该是 #777*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T06:25:17.257

您可以通过转到 /var/report 查看报告

通常它是由于未清除的缓存而发生的。只需转到 /var/cache 并删除缓存文件夹中的所有文件。刷新页面，应该可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:29:18.247

报告编号代表 magento 根目录下 var/report 文件夹中的特定文件

在您的 magento 根目录中打开 var/report/，打开与您的报告编号相同的文件，在这种情况下：'1116398732' 在此处粘贴内容，我们将继续找出问题所在

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-14T10:54:23.593

删除生成的/code目录 rm -rf generated/code 然后运行 ​​php bin/magento setup:upgrade php bin/magento setup:di:compile php bin/magento cache:flush chmo -R 0777 var/ pub/ generated/

现在尝试运行该站点，它现在应该是完美的。干杯

# java - 为什么我的 drools 应用程序中没有多个任务？

> ID：13230374
> 
> 赞同：0
> 
> 时间：2012-11-05T10:39:27.137
> 
> 标签：java, hibernate, jpa, drools

我正在尝试制作一个基于spring mvc和hibernate的drools应用程序。

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("org.drools.task");   
Environment env = KnowledgeBaseFactory.newEnvironment();
env.set(EnvironmentName.ENTITY_MANAGER_FACTORY, emf);
TaskService taskService = new TaskService(emf, systemEventListener);

TaskServiceSession taskSession = taskService.createSession();
taskSession.addUser(new User("Administrator"));
taskSession.addUser(new User("Myuser"));// can be set to logged in user at runtime

MinaTaskServer server = new MinaTaskServer(taskService);
Thread thread = new Thread(server);
thread.start();

ksession.getWorkItemManager().registerWorkItemHandler("Log",humanTaskHandler);
ksession.getWorkItemManager().registerWorkItemHandler("Human Task", wsHumanTaskHandler);

 KnowledgeRuntimeLogger logger = KnowledgeRuntimeLoggerFactory.newFileLogger(ksession, "test");
// start a new process instance
ksession.startProcess("HumanTaskSample"); 
```

做什么`createEntityManagerFactory`？它会从数据库中删除我所有的表并每次都创建一个新表吗？

因为在我的任务表中，每次它只包含一行？

为什么？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:56:58.160

您的项目中有`persistence.xml`文件，其中包含行

```
<persistence-unit name="org.drools.task"> 
```

你的桌子被丢掉了，因为你有下一个财产`persistence.xml`

```
<property name="hibernate.hbm2ddl.auto" value="create-drop"/> 
```

`create-drop`意思是：在会话结束时删除模式

将值更改为`validate`或`update`

# .net - SetUp 不适用于 NUnit

> ID：13230375
> 
> 赞同：1
> 
> 时间：2012-11-05T10:39:36.077
> 
> 标签：.net, unit-testing, nunit

我有以下 NUnit 代码。我在 [SetUp] 中使用 switch case 语句

在测试运行之前，预计将数据插入数据库；但它没有插入数据。这里需要纠正什么？

参考：

1.  [https://softwareengineering.stackexchange.com/questions/173651/nunit-setup-and-teardown](https://softwareengineering.stackexchange.com/questions/173651/nunit-setup-and-teardown)

代码

```
 [SetUp]
    public void TestSetUp()
    {
        switch (TestContext.CurrentContext.Test.FullName)
        {
            case "GetApplicationsTest":
                GetApplicationsTestSETUPHElper();
                break;

            case "DeleteApplicationTest":
                GetApplicationsTestSETUPHElper();
                break;

        }

    }

    private void GetApplicationsTestSETUPHElper()
    {
        SqlConnection connection = new SqlConnection(connectionString);
        using (connection)
        {
            string commandText = "INSERT INTO Status_Type VALUES (889,'s2','UT s2')";
            SqlCommand command = new SqlCommand(commandText, connection);
            command.CommandType = System.Data.CommandType.Text;
            connection.Open();
            command.ExecuteNonQuery();
        }
    }

    private void DeleteApplicationTestSETUPHElper()
    {
        SqlConnection connection = new SqlConnection(connectionString);
        using (connection)
        {
            string commandText = "INSERT INTO Status_Type VALUES (890,'s3','UT s3')";
            SqlCommand command = new SqlCommand(commandText, connection);
            command.CommandType = System.Data.CommandType.Text;
            connection.Open();
            command.ExecuteNonQuery();
        }
    }

    [Test]
    public void GetApplicationsTest()
    {

        ApplicationBL application = new ApplicationBL(connectionString);
        ApplicationSearch applicationSearch = new ApplicationSearch();
        applicationSearch.ApplicationID = 1;
        //applicationSearch.ApplicationName = "Test1";
        //applicationSearch.ApplicationURL = "Test1";
        //applicationSearch.StatusCode = 1;
        Collection<Application> applications =  application.GetApplications(applicationSearch);
    }

    [Test]
    public void DeleteApplicationTest()
    {

        ApplicationBL application = new ApplicationBL(connectionString);
        ApplicationSearch applicationSearch = new ApplicationSearch();
        applicationSearch.ApplicationID = 1;
        //applicationSearch.ApplicationName = "Test1";
        //applicationSearch.ApplicationURL = "Test1";
        //applicationSearch.StatusCode = 1;
        Collection<Application> applications = application.GetApplications(applicationSearch);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:48:10.587

```
TestContext.CurrentContext.Test.FullName 
```

是测试的完全限定名称，而不仅仅是代码中的函数名称，因此解决方法应该是将测试的完全限定名称放在案例语句中。

# iphone - CGRectApplyAffineTransform 结果不正确？

> ID：13230405
> 
> 赞同：-1
> 
> 时间：2012-11-05T10:41:26.003
> 
> 标签：iphone, ios, cocoa-touch, geometry, core-graphics

我有一些代码试图找出旋转-5度的矩形的正确边界框：

```
CGRect rectangleToRotate = CGRectMake(0,0,104.949, 131.017);
CGAffineTransform rotateTransform = CGAffineTransformMakeRotation((M_PI * -5) / 180);
CGRectApplyAffineTransform (rectangleToRotate, rotateTransform); 
```

生成的结果是一个大小为：的矩形`{115.968, 139.664}`，由于某种原因，它太大并且没有紧紧地包围矩形。然而，当我在 Adob​​e Illustrator 中采用相同的场景时，边界框是：`{104.659, 132.143}`这是正确的。

我到底在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:50:11.177

我猜你在插画家做错了什么。旋转 5 度后，边界框应该如何变小（104.9 到 104.6）......那是错误的。

CGRect 结果非常正确。我在 Photoshop 中对其进行了测试。
一个 105x131px 的矩形将在 -5 度旋转后产生一个 117x141px 的边界框。

# c# - 使用变量创建多个按钮

> ID：13230406
> 
> 赞同：0
> 
> 时间：2012-11-05T10:41:27.933
> 
> 标签：c#, xamarin.android

我正在尝试构建一个 for 函数来创建多个带有随机案例的按钮。

我不知道如何使用我的变量来创建这些按钮？

这是我的代码的一部分：

位置字符串用于确定我正在创建哪个按钮。showButton 字符串用于确定我正在使用的按钮 ID。

```
string showButton, position;                
for(int i = 1; i<=12; i++)
        {

            showButton = "imagebutton" + i;
            position = "position" + i;

        Random random = new Random();
        int randomNum = random.Next(1,4);

        switch (randomNum)
        {
            case 1:

                ImageButton position = FindViewById<ImageButton>(Resource.Id.showButton);
                position1.SetImageResource(Resource.Drawable.buttonGreen);
                btnPosition.Click += (o, e) =>
                    {
                        Toast.MakeText(this, "Você venceu", ToastLength.Short).Show();
                    };
                break;
            case 2:
                SetContentView(Resource.Layout.Main);
                ImageButton position = FindViewById<ImageButton>(Resource.Id.showButton);
                position.SetImageResource(Resource.Drawable.buttonYellow);
                position.Click += (o, e) =>
                    {
                        Toast.MakeText(this, "Você Venceu", ToastLength.Short).Show();
                    };
                break;
            case 3:
                SetContentView(Resource.Layout.Main);
                ImageButton position = FindViewById<ImageButton>(Resource.Id.showButton);
                position.SetImageResource(Resource.Drawable.buttonRed);
                position.Click += (o, e) =>
                    {
                        Toast.MakeText(this, "Você Perdeu", ToastLength.Short).Show();
                    };
                break;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:31:40.393

我看到代码存在一些问题。首先，您声明两个类型的变量，`string`即`showButton`和`position`。然后后者在开关的内部范围内再次声明。因此，当您超出该范围并引用时，`position`您将获得`string`变量而不是按钮，我不确定这是否是有意的。

接下来，我认为您正在尝试将`showButton`变量 to 用作 and 的组合`Resource.Id.`，`showButton`这是行不通的！`Resource.Id.<someId>`都是在文件中定义的，该`Resource.Designer.cs`文件是在每次构建时生成的，来自您在 axml 文件中定义的 Id。从字符串名称中引用变量是不可能的。您可以做的是有一个方法，该方法从`showButton`变量返回按钮的正确 ID。

此外，您似乎已经将所有按钮添加到`Main.axml`文件中，我认为您想要做的是膨胀新按钮，然后在需要时将它们添加到`Main.axml`文件中，根据您的`position`变量定位。所以在这里你应该用你的按钮定义创建一个新的 axml 文件。在您的代码中膨胀它，然后将其添加到视图中。

# php - Onclick jQuery 不工作

> ID：13230408
> 
> 赞同：0
> 
> 时间：2012-11-05T10:41:33.033
> 
> 标签：php, jquery, ajax, onclick

我有一种情况，我正在使用 jQuery 生成动态 html，例如

```
var list_of_addressbook_entries = {};
var filter = []
function save(){
    var user = $("#addressbook_user").val();
    var desg = $("#desg").val();
    var ahtml='<div  id ="user_'+user+'"  class="addr_list" style=" font-size: 30px;display:block; background: none repeat scroll 0% 0% peachpuff;margin:1px 1px 1px 1px ;">'
    ahtml = ahtml + '<span style="display: block; float: left; font-size: 30px; margin: 2px 24px 2px 21px;" >'+user+'</span>'
    if(desg == 'M'){
        ahtml = ahtml + '<span style="display: block; float: left; font-size: 30px; margin: 2px 24px 2px 21px;">Moderator</span>'
    }
    else{
        ahtml = ahtml + '<span style="display: block; float: left; font-size: 30px; margin: 2px 24px 2px 21px;">Attendee</span>'
    }
    ahtml = ahtml + '<div  onclick="remove_video(\''+user+'\')"><span ><img src="/UI/user/img/delet.jpeg" alt="Smiley face" height="42" width="42"  /> </span></div></div>'
    var ua = "'"+user+"'"; 
    filter.push(ua);
    $.ajax({ 
        type: "GET",  
        url: "<?php echo SITE_URL;?>/UI/user/filterbox.php",  
        data: "list="+ filter+"&Where=addressbook" ,
        success: function(json){ 
               $('#addorguser').html(json);
              // if(!json.error) location.reload(true);
        },
        error: function (xhr, textStatus, errorThrown) {

            alert(json);
        }

    });

    $("#organization").append(ahtml);

}
    function remove_video(user){
        alert(user);
        $("#user_"+user).hide();
    } 
```

调用 save() 后，我将动态生成的 html 添加到 div 中，我还在动态 html 中定义了一个 remove_video 函数。

但是，当我单击动态 div 以删除 div 时，不会调用 remove_video 函数。

我也没有收到任何错误。

请帮帮我。

**更新的HTML **

```
 <div id="organization" name="organization">
    </div>

                 <div>Address Book</div><br>

                <div id="box1">
                        <?php
                        if (isset($_SESSION["user_name"])){
                            $get_user_name = $_SESSION["user_name"];
                            ?>
                <div id="addorguser" style="display: block; float: left;">
                        <select  id ="addressbook_user" name="addressboook_user">
                        <?php 

                            $asql = "SELECT *  from demo_addressbook WHERE user_created_id IN(SELECT id FROM demo_user WHERE user_name = '$get_user_name') AND type = 1 ";                      
                        //  $result = mysql_query($query);
                        //  mysql_real_escape_string($asql);
                            $aresult    = mysql_query($asql) or die (mysql_error());
                            while($arow_list=mysql_fetch_assoc($aresult)){
                                ?>                      
                                <option value="<?php echo $arow_list['guest_name']; ?>"><?php echo $arow_list['guest_name']; ?></option>
                                <?php                                   
                            }
                                ?>
                            </select>

                    </div>      
                            <select name="desg" id="desg">
                            <option value="A">Attendee</option>
                            <option value="M">Moderator</option>

                            </select>
                            <input type="button" id ="aadd" onclick="save()" name="button" value="Add"/>
                </div>

                <?php 
                        }
                ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:07:09.090

Try this exemple:

```
$('#aadd').on('click', function(e){
     alert('Click');
}); 
```

or this one

```
$('#aadd').click(function(e){
     alert('Click');
}); 
```

# c++ - 原型方法中的参数名称（头函数中的变量名称）

> ID：13230409
> 
> 赞同：4
> 
> 时间：2012-11-05T10:41:36.317
> 
> 标签：c++, methods

> **可能重复：**
> [函数声明是否应该包含参数名称？](https://stackoverflow.com/questions/7891526/should-function-declarations-include-parameter-names)

在 C++ 头文件中，您需要给出函数原型的名称、返回类型和参数类型。您无需指定参数的名称。例子：

```
double fraction(double numerator, double denominator); 
```

对比

```
double fraction(double, double); 
```

写一个论点的名字有好处吗？可读性？编译，效率或其他方面有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:45:30.810

在头文件中保留参数名称的主要原因是为了一致性和可读性。如果您有删除它们的政策，那么您不能再从您的 cpp 文件中复制/粘贴声明。

如果您使用的是像 doxygen 这样的文档引擎，这也可能为您提供保留参数名称的有力理由，因为文档引擎倾向于解析标题，并且如果您包含参数名称，则会提供更好的输出。

除此之外，没有严格的理由保留它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:46:30.130

效率没有区别。在标题中省略名称应该与在实现文件中省略它同步。如果您的 impl 不使用该 arg，您可以在此处省略它，然后每个人都可以通过查看参数列表来查看是否使用了 arg（并且当 arg 有名称时，一些编译器会发出警告，但不是t在实现中使用。希望对您有所帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T10:46:48.590

编译没有区别。（可能稍后解析会很快，因为它必须解析更少的代码，但谁在乎呢？）。

最大的优势在于可读性。在第二种情况下，用户如何区分哪个是分子，哪个是分母？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T10:55:31.547

正如您所说，您将它们放在那里，以便查看标题的人了解这些参数的用途。

# php - 使用 PHP 生成 Javascript 文件

> ID：13230411
> 
> 赞同：6
> 
> 时间：2012-11-05T10:41:49.433
> 
> 标签：php, javascript, api, minify, sinemacula

# 我当前的代码

我已经开始编写一个 API，它使用 PHP 加载、缩小和返回 javascript 文件到一个文件中。`script`这是通过从HMTL 中的标记指向 PHP 文件来实现的，如下所示：

```
<script type="text/javascript" src="https://libraries.sinemaculammviii.com/jsapi.php"></script> 
```

此`jsapi.php`页面处理 javascript 文件并输出缩小的 javascript，其标题为：

```
header("Content-Type: text/javascript"); 
```

# 我的问题

这是加载 javascript 文件的坏方法吗？通过简单地指向属性中的文件来单独加载javascript文件会**更快更可靠吗？**`.js``src`

如果您希望查看我的完整 API 代码，请查看[此](https://codereview.stackexchange.com/questions/18117/loading-javascript-libraries-with-php-api). 提到的链接还详细解释了我在做什么以及为什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T10:44:45.507

像 .js 一样快，是的，但只是微乎其微。原因是它将是一个静态文件，因此不需要 PHP 的处理时间。

也就是说，像这样通过 PHP 提供 JavaScript 并没有错。您甚至可以提出缓存方法来减少处理影响。

# c# - 通用字典的不区分大小写访问

> ID：13230414
> 
> 赞同：324
> 
> 时间：2012-11-05T10:42:05.173
> 
> 标签：c#, generics, dictionary

我有一个使用托管 dll 的应用程序。其中一个 dll 返回一个通用字典：

```
Dictionary<string, int> MyDictionary; 
```

字典包含大小写的键。

另一方面，我得到了一个潜在键（字符串）的列表，但是我不能保证这种情况。我正在尝试使用键获取字典中的值。但是，由于我的大小写不匹配，以下内容当然会失败：

```
bool Success = MyDictionary.TryGetValue( MyIndex, out TheValue ); 
```

我希望 TryGetValue 会有一个*忽略大小写标志，就像*[MSDN doc](http://msdn.microsoft.com/en-us/library/bb348919%28v=vs.90%29.aspx)中提到的那样，但这似乎对通用字典无效。

有没有办法在忽略关键情况的情况下获取该字典的值？*有没有比使用正确的StringComparer.OrdinalIgnoreCase*参数创建字典的新副本更好的解决方法？

* * *

## 回答 #1

> 赞同：671
> 
> 时间：2012-11-05T10:44:26.450

`StringComparer`在您尝试获取值的地方无法指定 a 。如果您考虑一下，`"foo".GetHashCode()`并且`"FOO".GetHashCode()`完全不同，那么没有合理的方法可以在区分大小写的哈希映射上实现不区分大小写的 get 。

但是，您可以首先使用以下方法创建不区分大小写的字典：-

```
var comparer = StringComparer.OrdinalIgnoreCase;
var caseInsensitiveDictionary = new Dictionary<string, int>(comparer); 
```

或者使用现有区分大小写的字典的内容创建一个新的不区分大小写的字典（如果您确定没有大小写冲突）：-

```
var oldDictionary = ...;
var comparer = StringComparer.OrdinalIgnoreCase;
var newDictionary = new Dictionary<string, int>(oldDictionary, comparer); 
```

然后，这个新字典使用so`GetHashCode()`上的实现并为您提供相同的值。`StringComparer.OrdinalIgnoreCase``comparer.GetHashCode("foo")``comparer.GetHashcode("FOO")`

或者，如果字典中只有几个元素，和/或您只需要查找一次或两次，则可以将原始字典视为 an`IEnumerable<KeyValuePair<TKey, TValue>>`并对其进行迭代：-

```
var myKey = ...;
var myDictionary = ...;
var comparer = StringComparer.OrdinalIgnoreCase;
var value = myDictionary.FirstOrDefault(x => String.Equals(x.Key, myKey, comparer)).Value; 
```

或者，如果您愿意，不使用 LINQ：-

```
var myKey = ...;
var myDictionary = ...;
var comparer = StringComparer.OrdinalIgnoreCase;
int? value;
foreach (var element in myDictionary)
{
  if (String.Equals(element.Key, myKey, comparer))
  {
    value = element.Value;
    break;
  }
} 
```

这为您节省了创建新数据结构的成本，但作为回报，查找的成本是 O(n) 而不是 O(1)。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2017-03-09T19:41:26.770

对于那些从不使用常规字典构造函数的 LINQers

```
myCollection.ToDictionary(x => x.PartNumber, x => x.PartDescription, StringComparer.OrdinalIgnoreCase) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2020-09-28T13:40:34.140

有更简单的方法：

```
using System;
using System.Collections.Generic;
....
var caseInsensitiveDictionary = new Dictionary<string, string>(StringComparer.OrdinalIgnoreCase); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-12-03T08:58:09.723

它不是很优雅，但如果你不能改变字典的创建，你所需要的只是一个肮脏的黑客，这个怎么样：

```
var item = MyDictionary.Where(x => x.Key.ToLower() == MyIndex.ToLower()).FirstOrDefault();
    if (item != null)
    {
        TheValue = item.Value;
    } 
```

# java - 将具有包含特定字符串的列表的对象与 Morphia 匹配

> ID：13230415
> 
> 赞同：4
> 
> 时间：2012-11-05T10:42:07.760
> 
> 标签：java, mongodb, morphia

想象一下，我有一个名为的类`SomeClass`，它有一个名为的字符串列表`aStringList`。

```
public Class SomeClass{

  List<String> aStringList;

  ...

} 
```

我想找到`aStringList`包含 String的 SomeClass 的所有对象`"sillyString"`。

我试过了：

```
Datastore ds = Dao.instance().getDatabase();
List<String> myResults = ds.find(SomeClass.class).
field("aStringList").hasThisElement("sillyString").asList(); 
```

但是，这给了我错误：

```
com.mongodb.MongoException: invalid parameter: expected an object ($elemMatch) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T00:53:35.293

使用`field(...).equal(...)`（假设您正在寻找完全匹配）。MongoDB 将匹配单个值以及数组中的任何值。

如果`.hasThisElement(...)`您有一个自定义文档实体列表 ( `@Reference List<MyEntity>`) 并且您想检查是否引用了特定的实体，请使用此选项。

# security - SIP通信中的窃听

> ID：13230416
> 
> 赞同：1
> 
> 时间：2012-11-05T10:42:15.267
> 
> 标签：security, networking, sip

对于一个学校项目，我需要在 SIP 用户代理和 SIP 服务器之间进行窃听实验。实验必须包括以下步骤：

```
 i)Establish a voice/data communication between two SIP agent.

  ii) Capture the signal (i.e. SIP packets) in wireshark.

  iii) Change the content of the signal via wireshark or some 
  other tool that fits better to this purpose.

  iv) Encrypting/securing the communication between the agents somehow 
  to avoid third parties (e.g. wireshark to eavesdrop the communication) 
   from eavesdropping. 
```

您能否告诉我是否有模拟上述场景的工具？实际上，我更喜欢以编程方式执行此操作，并且我知道有一个名为 resip (resiprocate.org) 的开源 SIP 堆栈，它提供了 C++ 中的示例用户代理和服务器。我可以以编程方式模拟这种情况，还是最好使用一些可以做到这一点的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:30:27.997

您可以为您的项目目的检查/使用许多可能性。

> i) 在两个 SIP 代理之间建立语音/数据通信

最好的方法是使用一些已经制定的解决方案（例如一些软 SIP 电话）。

> iii）通过wireshark或其他更适合此目的的工具更改信号的内容。

我认为根本不可能使用wireshark来改变流量。这只是数据包嗅探器，因此您无需对其进行任何修改即可抓取数据包。您将需要一些能够读取和修改数据包负载的工具（查看一些开源 IPS 代码以获得一些提示）。

> iv) 以某种方式加密/保护代理之间的通信
> 以避免第三方（例如，wireshark 窃听通信）窃听。

最简单的方法是在客户端和服务器之间建立一些隧道（例如 VPN）。这将加密和保护通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-16T20:33:53.453

如果设置正确，sip 代理将能够捕获、操作/修改 sip 数据包以及实施 SSL 加密。通常，这些服务器位于 2 个 sip UA 之间。一些流行的 sip 代理是

*   [https://www.kamailio.org/](https://www.kamailio.org/)

*   [https://www.opensips.org](https://www.opensips.org)

# mobile - 如何在容器中加载视图

> ID：13230419
> 
> 赞同：1
> 
> 时间：2012-11-05T10:42:24.937
> 
> 标签：mobile, touch, extjs, sencha-touch-2

这看起来很基本，但我是 Sencha Touch 的新手，仍然不知道如何实现它。

我想创建一个欢迎页面，它只在屏幕中央显示一个徽标。然后在 5 秒左右后，它会加载主页。

这是我的主视图代码：

```
Ext.define('Sencha.view.Main', {
extend: 'Ext.Container',
xtype: 'mainpanel',
requires: [
    'Sencha.view.Opening'
],

config: {
    items: [{
        xtype: 'opening'
    }]
}
}); 
```

这是Opening.js的代码：

```
Ext.define('Sencha.view.Opening', {
extend: 'Ext.Panel',
xtype: 'opening',

config: {
    scrollable: false,
    fullscreen: true,
    html: '<div id="opening-logo"><img src="resources/images/logo.png"/></div>'
}
}); 
```

它应该在屏幕中央显示一个徽标。但实际上，它什么也没显示。我使用了 Ext.Panel 而不是 Ext.Container，但它不起作用。

虽然它适用于 Ext.navigation.View，但对于欢迎页面，它不应该在屏幕顶部有导航标题。

我做错了什么？哦，对不起英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T08:18:30.067

您需要的听起来更像是[启动屏幕](http://en.wikipedia.org/wiki/Splash_screen)而不是视图...在已安装的应用程序上，启动屏幕会在应用程序启动和加载第一个视图之间自动显示...您可以在应用程序中配置启动屏幕属性.js 文件[链接](http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Application-cfg-phoneStartupScreen) 希望对您有所帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:09:17.070

使用 Sencha Touch 开发时的常见错误是忘记设置视图的布局。布局定义了您的内部组件将如何放置在视图上。[你可以在这里找到更多](http://www.sencha.com/learn/intro-to-layouts-in-sencha-touch-2)

对于一个想要占据整个屏幕的组件的视图，您应该像这样采用适合的布局：

```
Ext.define('Sencha.view.Main', {
extend: 'Ext.Container',
xtype: 'mainpanel',
requires: [
    'Sencha.view.Opening'
],

config: {
    layout: 'fit',
    items: [{
        xtype: 'opening'
    }]
}
}); 
```

希望这有帮助

# git - 如何让 Git 使用 cntlm

> ID：13230420
> 
> 赞同：9
> 
> 时间：2012-11-05T10:42:28.493
> 
> 标签：git, version-control, github, proxy

我在代理后面工作，我无法访问 github.com。我读到 cntlm 可以解决这个问题。我仍在努力填写代理信息。

所以我的问题是，如何让 Git 使用 cntlm 绕过代理？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-05T10:55:04.683

如果你真的想使用 CNTLM，它会被配置为像常规代理一样的 git。

因此，您可以像这样指定 NTLM 代理：

```
git config --global https.proxy https://user:password@proxy.com:port
git config --global http.proxy http://user:password@proxy.com:port 
```

对于 CNTLM，您只需使用 localhost 指定 CNTLM 监听的端口：

```
git config --global https.proxy https://127.0.0.1:port
git config --global http.proxy http://127.0.0.1:port 
```

我让它在本地端口 3128 上运行，所以对我来说是

```
git config --global https.proxy https://127.0.0.1:3128
git config --global http.proxy http://127.0.0.1:3128 
```

即使 git 支持 NTLM 代理，您也可能不想以这种方式使用它，因为它以明文形式存储您的用户/密码。[使用 CNTLM，您可以使用可以将密码存储为加密](http://cntlm.sourceforge.net/cntlm_manual.pdf)的集中位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T10:49:30.830

对于 git 版本 1.7.10 和更高版本，您不需要 CNTLM，因为这是您的情况。

有关详细信息，请在此处查看我的答案[https://stackoverflow.com/a/10848870/352672](https://stackoverflow.com/a/10848870/352672)，您可以这样配置/测试：

```
git config --global http.proxy http://user:password@proxy.com:port
git clone http://git.gnome.org/browse/gnome-contacts 
```

# php - 通过 PHP 在外部网页中搜索和提取特定文本？

> ID：13230422
> 
> 赞同：1
> 
> 时间：2012-11-05T10:42:34.343
> 
> 标签：php, dom

我一直在尝试从电视剧集跟踪网站中简单地提取“下一集编号”。这是一个示例页面：

[示例页面](http://next-episode.net/the-good-wife)

向下滚动，您会看到“倒计时”、“日期”、“季节”和“数字”。我想提取那个数字。

我一直在查看源代码以及 Simple HTML DOM 来尝试解决问题，但我多次失败。“数字”具有“nextEpInfo”类，但“倒计时”、“季节”……等也具有相同的类。

我将如何提取它？

另外，如果可能的话，我真的很感激一些很好的参考资料来解释你推荐的方法，因为我理想地想学习如何在将来我需要提取的内容被包装在不同的类中时处理这些情况，divs ...等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:54:45.363

如果您有要解析的页面的原始 HTML，则可以使用 preg_match 来查找它。

如果您没有 HTML，这应该可以帮助您：[如何在 PHP 中获取网页的 HTML 代码？](https://stackoverflow.com/questions/819182/how-do-i-get-the-html-code-of-a-web-page-in-php)

[preg_match()](http://php.net/manual/es/function.preg-match.php)

此函数允许您使用正则表达式模式解析字符串。建议只解析 HTML 的一小部分，而不是整个页面。例如，在这种情况下，我会尝试获取第一个表的 HTML（没有上一集信息的表）。

```
$subject="the HTML of the url you want to parse";
$pattern='/Number:<\/td><td.+?>(\d+)<\//';
if(preg_match($pattern, $subject, $hits)){
    echo "Number: $hits[0]";
} 
```

如果您不知道正则表达式的工作原理：

'。' 是一个保留字符，表示“任何字符”，紧随其后的“+”表示“一个或多个”和“？” 使正则表达式不贪婪。所以如果我们总结一下'.+?' 意思是“一个或多个任何字符，但尽可能短”。

'(' 和 ')' 表示我们要检索它们之间的内容，而 '\d' 表示一个数字。所以 '(\d+)' 的意思是'把这个数字组合放在 $hits 数组中'。

如果您使用相同的正则表达式但使用 preg_match_all 您将检索遵循相同模式的所有网络数字，它们将位于 $hits 数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:08:57.680

```
<?php
/*

<tr class="nextEpInfo">
<td width="160" align="right" nowrap="" class="nextEpInfo">Season:    </td>
<td class="nextEpInfo" width="300">4</td>
</tr>
*/
$url = 'http://next-episode.net/the-good-wife';
$ch = curl_init();
curl_setopt( $ch, CURLOPT_URL, $url );
curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, 1 );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1 );
curl_setopt($ch,CURLOPT_ENCODING, 1);
curl_setopt( $ch, CURLOPT_REFERER, $url );
$content = curl_exec ($ch);
//echo $content;
$matches = array();
preg_match_all( '/class="nextEpInfo">(.+):<\/td>\s*<td[^>]*>(\d*)</', $content, $matches );
print_r( $matches ); 
```

或类似的，这是最简单的，只要网站所有者不更改字符串即可。使用 xpath 或其他 xml/html 解析器可能是两个字符串匹配的开销，并且如果站点上的内容发生更改，可能会以相同的方式制动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:01:56.760

以下是您可以使用的示例伪代码：

1) 使用 nextEpInfo 类检索所有 tr：

`foreach($html->find('tr.nextEpInfo') as $tr)`

2) 对于每个 tr，使用 stristr 验证它们是否包含您的任何关键字。例子：`if(stristr($tr, 'Countdown') !== FALSE)`

3) 如果是这种情况，请提取 tr 下 2 个 tds 的文本内容： `$tds = $tr->find('td')`

4) 从第二个 td 获取所需的值： `$tds[1]->plaintext`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T12:54:12.520

这可以使用 Xpath 完成：

```
(//td[contains(text(), 'Number')])[1]/../td[2] 
```

此查询导航到文本等于的第一个 td `Number`。然后它转到`/../`该孩子的父节点 ( )，然后到第二个 td `(td[2])`，其中包含下一个情节编号。

Firebug 允许您在控制台中测试 Xpath 查询，使用`$x`：

```
$x("(//td[contains(text(), 'Number')])[1]/../td[2]"); 
```

要在 PHP 中使用它，请查看[DOMDocument](http://php.net/DomDocument)和[DOMXpath](http://php.net/DOMXpath)。更具体`DOMDocument.loadHtml`的和`DOMXpath.query`。

# c# - C# 监控用户退出应用程序时的行为

> ID：13230425
> 
> 赞同：2
> 
> 时间：2012-11-05T10:42:53.220
> 
> 标签：c#, asp.net, synchronization, try-finally

我将以下代码用于网页的关键部分

```
if(Monitor.TryEnter(lockObj,60000))
{
  try{
       //write some things to a file
     }
  finally
  {
    Monitor.Exit(lockObj);
  }
} 
```

在这里，lockObj 是类的静态成员。我的问题是，如果用户在执行关键部分时关闭网页或浏览器会发生什么？lockObj 是否对未来的页面请求保持锁定状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:07:17.890

Nothing automatically occurs when the user closes a browser window or navigates to another page, if the request is still processing. This is why the [`HttpResponse.IsClientConnected`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.isclientconnected.aspx) property exists - so your code can perform appropriate checks as and when you can do something useful.

If a timeout occurs on the server side, then the `finally` block should operate at around that time and the lock will be released. Whether it is *safe* for the lock to be released at this time is something only you can determine - the lock must have been put there for a reason, and if a timeout occurs, that may mean that the (shared, lock requiring state) isn't stable for whoever next acquires the lock.

But these are two very different sets of issues.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:00:42.530

如果你设法杀死里面的执行线程

```
try {
  //write some things to a file
} 
```

你可能有一些问题。但是对于所有有例外的实际情况，代码都会起作用。

实际上，只是避免`Thread.Abort`.

# c# - 在 C# 中的 DataGridView 中创建具有多个标题的表

> ID：13230427
> 
> 赞同：0
> 
> 时间：2012-11-05T10:43:01.240
> 
> 标签：c#, winforms, datagridview

我想`DataGridView`在 C# 中使用多个标题创建一个表。我可以创建一个表。但是，我需要表格中的多个标题。附件是我要创建的表格的屏幕截图。

任何想法如何做到这一点。

![在此处输入图像描述](../Images/91a589f496156f1f0782ea578bb61706.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:19:43.517

这是关于 DataGrid 中的 DataGrid 的概念。您首先必须绑定 MasterGrid，然后在 Master 网格中绑定子网格。此链接肯定会对您有所帮助：http: [//www.codeproject.com/Articles/22928/GridView-within -GridView](http://www.codeproject.com/Articles/22928/GridView-within-GridView) `

# sql - 使用 Openquery 从 SP 跨链接服务器插入表

> ID：13230430
> 
> 赞同：0
> 
> 时间：2012-11-05T10:43:10.270
> 
> 标签：sql, sql-server, stored-procedures, openquery

我想将数据从一台服务器发送到另一台服务器，我想提高我的性能，并想知道 OpenQuery 是否是一个很好的失败途径？

我试图做这样的事情；

```
INSERT INTO OPENQUERY (SERVERNAME, '(SELECT Num1, Num2, Num3 FROM [DBName].[dbo].TableName)')
(Num1, Num2, Num3)
SELECT Num1, Num2, Num3
 FROM #Temp 
```

但是，这会返回错误

```
The provider indicates that conflicts occurred with other properties or requirements. 
```

我不明白这一点，因为查询确实运行良好并在没有 OpenQuery 的情况下产生所需的结果......

请问有人可以给我建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:18:01.930

尝试这个：

```
INSERT INTO tablename 
SELECT * FROM OPENROWSET
    ('SQLOLEDB', 
     'Trusted_Connection=yes;Server=SERVERNAME','SELECT Num1, Num2, Num3 FROM [DBName].[dbo].TableName)') 
```

# java - JPA多对一：获取元素

> ID：13230435
> 
> 赞同：0
> 
> 时间：2012-11-05T10:43:31.057
> 
> 标签：java, jsp, servlets, many-to-many, relationship

我有一个问题，我想用下面的例子来解释：

JPA 类人：

```
 @ManyToMany(mappedBy = "persons")
    private List<Car> cars= new ArrayList<>();

    public void setCars(List<Car> cars) {
        this.cars= cars;
    }

    public List<Car> getCars() {
        return cars;
    } 
```

以及问题出现的地方：

小服务程序类：

```
Person person = genericDao.findOne(1);
request.setAttribute("person", person.getName());

List<Car> cars= new ArrayList<Car>();    
cars= person.getCars();
request.setAttribute("cars", cars); 
```

问题是，当试图让汽车。它们不会自动从数据库中检索并保存在 Person 类的数组中。如何设置具有多对多关系的 JPA 类，从中我可以轻松地检索具有关系的对象。

汽车.java

进口被遗漏了！

```
@Entity
@Table(name = "DSD_Cars")
public class Car extends ModifiableEntity {

    private String name;
    private String description;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    @ManyToMany
    @JoinTable(
            name="DSD_Persons_Cars",
            joinColumns = {@JoinColumn(name="IDCar", referencedColumnName = "ID")},
            inverseJoinColumns = {@JoinColumn(name = "IDPerson", referencedColumnName = "ID")}
    )
    private List<Person> persons= new ArrayList<>();

    public void setPersons(List<Person> persons) {
        this.persons= persons;
    }

     public List<Persons> getPersons() {
        return persons;
     }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:22:55.457

问题已解决：

Car 类有一个 @Table(name = "DSD_Cars") 注释。但是，@Table 使用了错误的导入规则。将 @Table 类型更改为 JPA 版本后，一切正常。如果 @Table 未正确定义，JPA 似乎使用类名。这解释了错误。

感谢所有花时间帮助我的人！

# javascript - Jquery UI Draggable：将助手对齐到鼠标位置

> ID：13230437
> 
> 赞同：17
> 
> 时间：2012-11-05T10:43:36.740
> 
> 标签：javascript, jquery, coffeescript, draggable

使用 jQuery，我有一个可拖动的元素。这是一个大小为 200 x 40 的 div。当然，用户可以通过单击 div 中的不同位置开始拖动此 div。我想要的是当 startdrag 事件发生时，帮助器（克隆）div 将始终以相同的方式与光标对齐，无论用户在 div 中的哪个位置开始拖动。

所以在 mousedown 之后，助手的 top 和 left 值需要与鼠标 x 和 y 相同。我用这个咖啡脚本代码试过这个：

```
onStartDrag: ( e, ui ) =>
    ui.helper.css
        left: e.clientX
        top: e.clientY

    console.log( e ) 
```

但它不起作用，我猜这是因为我输入的值由于鼠标移动而直接被可拖动插件覆盖。

有任何想法吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-09-25T22:53:35.263

在尝试了 Amar 的答案并意识到它破坏了与 的交互之后`droppable`，我深入挖掘，发现有一个专门支持这个的选项，称为`cursorAt`.

```
$('blah').draggable
  helper: ->
    ... custom helper ...
  cursorAt:
    top: 5
    left: 5 
```

这会将助手的左上角放置在光标左上方 5 个像素处，并与`droppable`.

[http://api.jqueryui.com/draggable/#option-cursorAt](http://api.jqueryui.com/draggable/#option-cursorAt)

让我们在应得的地方给予信任。谢谢，jquery-ui 邮件列表档案！

[https://groups.google.com/forum/#!topic/jquery-ui/Evb94G_QvNw](https://groups.google.com/forum/#!topic/jquery-ui/Evb94G_QvNw)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-05T13:38:28.810

试试这样设置，

```
 start: function (event, ui) {
                $(ui.helper).css("margin-left", event.clientX - $(event.target).offset().left);
                $(ui.helper).css("margin-top", event.clientY - $(event.target).offset().top);
            } 
```

看看这个[jqFAQ.com](http://jqfaq.com/)，它对你会更有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-03T01:22:26.003

我已经找到了一个解决方法，这很容易，如果您使用可排序插件，您可以像这样修复辅助位置：

```
sort: function(e, ui) {
    $(".ui-sortable-handle.ui-sortable-helper").css({'top':e.pageY});
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-11T14:44:25.080

我同意@roverv。

这对我来说很好。

[![滚动页面后鼠标光标后的图标示例](../Images/5fb930d708bb2119024ba0b9725c6307.png)](https://i.stack.imgur.com/MfKW9.gif)

```
$('.js-tire').draggable
      tolerance: 'fit',
      appendTo: 'body',
      cursor: 'move',
      cursorAt:
        top: 15,
        left: 18
      helper: (event) ->
        $('<div class="tire-icon"></div>').append($('<img src="/images/tyre_32_32.png" />'))
      start: (event, ui) ->
        if $(event.target).hasClass 'in-use'
          $('.js-send-to-maintenance-box').addClass 'is-highlighted'
        else
          $('.ui-droppable').addClass 'is-highlighted'
      stop: (event, ui) ->
        $('.ui-droppable')
          .removeClass 'is-highlighted'
          .removeClass 'is-dragover' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-01-10T09:09:32.510

这对我有用：

附加到：“正文”

像这样：

```
$(this).draggable({
    helper: "clone",
    cursor: "move",
    appendTo: 'body'
}); 
```

# c# - 用于将数据与文件系统路径相关联的有效数据结构？

> ID：13230439
> 
> 赞同：4
> 
> 时间：2012-11-05T10:43:37.390
> 
> 标签：c#, data-structures, dictionary, path, trie

我需要在内存中保留一些关于可能大量文件和目录（通常多达几十万）的数据。显而易见的做法是使用`Dictionary<string, Something>`带有路径的a作为key，但是这样做有两个问题：

*   许多文件将有很大一部分路径是相同的，因此存储每个文件的完整路径可能会浪费内存
*   我需要能够快速访问有关目录所有后代的数据；使用字典，唯一的方法是测试每个键并检查它是否以指定的路径开头，这是非常低效的

这个问题似乎是使用前缀树（或[trie](http://en.wikipedia.org/wiki/Trie)）的一个很好的候选，路径段作为“字符”。我尝试实现它，通过前缀查找性能并不算太差（大约比字典快 4 倍），但它有两个问题：

*   内存消耗没有减少，可能是因为每个节点的孩子列表的开销
*   构建时间比使用字典要差得多（填充集合要慢 4 倍）

我确定这一定是一个非常普遍的问题，所以也许有一些我不知道的众所周知的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:12:17.570

只是一些通用的想法：

首先，[Patricia trie](http://en.wikipedia.org/wiki/Radix_tree)可能是改善尝试的内存消耗的最著名方法——它将所有节点都有一个子节点的路径压缩到一个节点中，并沿路径连接字符。还有一个版本，您可以将数据视为二进制数字序列，其优点是您始终最多有 2 个子节点，并且更易于实现。

其次，内存消耗实际上取决于您如何存储给定节点的子节点 - 您是否维护一个 256 个节点的数组？这通常是直接查找最有效的方式，但如果您需要遍历所有子项，也会消耗最多的内存并且速度很慢。其他选项包括：

*   存储对数组`(letter, child node)`- 这可能是最节省内存的方法，因为它只存储您真正关心的对象，并且它在遍历所有子对象时也具有良好的性能。但是，您必须检查所有对以进行直接查找 - 这通常离根较远，但可能是根附近的问题。

*   在每个节点内存储某种字典，将字母映射到子节点。这在性能方面是最平衡的——它为所有操作提供了相当不错的速度，并且在一定程度上节省了内存。

此外，如果您预先构建整个集合然后只查询它，则有一种基于[Tarjan 表](ftp://reports.stanford.edu/pub/cstr/reports/cs/tr/78/683/CS-TR-78-683.pdf)存储子链接的方法，这可能会增加构建时间，但会节省内存和稍后的查询时间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T09:18:34.503

类似前缀树的方法怎么样。即如果你想存储

```
/root/x
/root/a/b
/root/a/c
/root/a/d
/root/a/e
/root/a/c/e
/root/a/c/f
Here is how your tree will look like. 
                       root
                     /    \
                    x   __ a __ 
                       /  / \   \ 
                     b   c    d   e
                        / \
                       e   f 
```

它将节省空间，因为每个目录名称将只存储一次。搜索和插入也是 O(log(n))

# c# - 在一个连接中保存一个表中的多行 IN sqlserver

> ID：13230441
> 
> 赞同：0
> 
> 时间：2012-11-05T10:43:44.083
> 
> 标签：c#, asp.net, sql-server

场景：假设我有一个表，其中包含 3 列 ID、QuestionId 和 optedAnswer。我有一个表格，其中包含 n 没有问题和一些答案选项。在保存按钮上，我想将数据保存在数据库中（在我的表中）。

问题：我想将所有答案保存在一个连接中。

我采取的步骤：我制作了一个具有结构 questionId:optedAnswwer | 的字符串 questionId : optedAnswer | 等等....我写了一个程序。开始了一个循环。根据 ':' 和 '|' 拆分数据 并在一个连接中保存数据。但这是一项艰巨的任务。有什么方法可以直接保存数据而不使用循环和拆分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:01:27.597

将您的每个 questionId 及其 OptedAnswer 保存在 Datatable 中，然后将您的数据表插入 SQL 表，如下所示：

```
DataTable dataTable = null; // your data needs to be here
        try
        {
            ConnectionStringSettings mConString = ConfigurationManager.ConnectionStrings["SiteSqlServer"];

            // Optional truncating old table
            using (SqlConnection connection = new SqlConnection(mConString.ConnectionString))
            {
                connection.Open();
                // Delete old entries
                SqlCommand truncate = new SqlCommand("TRUNCATE TABLE MYTABLE", connection);
                truncate.ExecuteNonQuery();
            }

            SqlBulkCopy bulkCopy = new SqlBulkCopy(mConString.ConnectionString, SqlBulkCopyOptions.TableLock)
                                          {
                                              DestinationTableName = "dbo.MYTABLE",
                                              BatchSize = 100, //set your required size
                                              BulkCopyTimeout = 360
                                          };
            bulkCopy.WriteToServer(dataTable);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:50:08.260

创建一个包含所有问题和答案的 XML 字符串，并将这些 xml 字符串传递给 sql 并使用
这些 sql 内置 proc 读取 XML 的 sp_xml_preparedocument 过程。

您可以获得有关[Bulk INsert的更多信息](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/ca8ce28f-294c-4b5c-bbaf-5ee32c80f394)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:18:05.350

还有另一种方法可以在一个连接中保存多个数据。创建一个像这样的表

```
CREATE TYPE [dbo].[YourTypeName] AS TABLE(
    [Col1] [bigint] NULL,
    [Col2] [datetime] NULL,
    [Col3] [bigint] NULL,
    [Col4] [bigint] NULL,
    [Col5] [datetime] NULL
) 
```

然后写一个这样的程序....

```
CREATE PROCEDURE [dbo].YOURPROCEDURENAME]
( 
    @yourDataTableName YourTypeName READONLY
)
AS
    INSERT INTO TableName
    (Col1,
     Col2,                        
     Col3,
     Col4,
     Col5)
    SELECT CP.Val1,
           CP.Val2,
           CP.Val3,
           CP.Val4,
           CP.Val15)
   FROM @yourDataTableName  CP
GO 
```

然后在后面的代码中创建一个数据表，并像这样在程序中传递该数据表......

```
SqlCommand cmd = new SqlCommand("YOURPROCEDURENAME");
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.Add("@yourDataTableName", SqlDbType.Structured).Value = datatable;
cmd.Parameters[0].TypeName = "YourTypeName "; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:08:55.833

我也会选择以 xml 为中心的解决方案，在 xmldocument 中准备数据，将其发布到数据库中，并使用 xml 中的 SELECT 作为插入源，例如：

```
declare @xml XML
DECLARE @docid int

set @xml = N'<?xml version="1.0" ?>
<Custs>
 <Cust>
  <name>Erik</name>
  <lastname>Stark</lastname>
 </Cust>
 <Cust>
  <name>Donald</name>
  <lastname>Duck</lastname>
 </Cust>
 <Cust>
  <name>Johnny</name>
  <lastname>Walker</lastname>
 </Cust>
</Custs>'

EXEC sp_xml_preparedocument @docid OUTPUT, @xml

SELECT    *
FROM  OPENXML (@docid, '/Custs/Cust',2)
            WITH (name varchar(50), lastname varchar(50))
exec sp_xml_removedocument @docid 
```

# phalcon - doc有错误？没有把握

> ID：13230449
> 
> 赞同：0
> 
> 时间：2012-11-05T10:44:23.197
> 
> 标签：phalcon

[http://docs.phalconphp.com/en/0.6.0/reference/odm.html](http://docs.phalconphp.com/en/0.6.0/reference/odm.html)

设置多个数据库¶

在 Phalcon 中，所有模型可以属于同一个数据库连接，也可以有一个单独的数据库连接。实际上，当 Phalcon\Mvc\Collection 需要连接到数据库时，它会请求应用程序服务容器中的“mongo”服务。您可以在初始化方法中覆盖此服务设置：

```
<?php

//This service returns a mongo database at 192.168.1.100
$di->set('mongo1', function() {
 $mongo = new Mongo("mongodb://scott:nekhen@192.168.1.100");
 return $mongo->selectDb("management");
});

//This service returns a mongo database at localhost
$di->set('mongo2', function() {
$mongo = new Mongo("mongodb://localhost");
return $mongo->selectDb("invoicing");
}); 
```

然后，在 Initialize 方法中，我们为模型定义连接服务：

```
<?php

class Robots extends \Phalcon\Mvc\Collection
{

    public function initialize()
    {
        $this->setConnectionService('management'); // here? 
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:38:54.687

你是对的。文档是错误的。正确的用法是使用`setConnectionService`.

[http://docs.phalconphp.com/en/latest/reference/odm.html](http://docs.phalconphp.com/en/latest/reference/odm.html)

```
<?php

// This service returns a mongo database at 192.168.1.100
$di->set(
    'mongo1', 
    function() 
    {
        $mongo = new Mongo("mongodb://scott:nekhen@192.168.1.100");
        return $mongo->selectDb("management");
    }
);

// This service returns a mongo database at localhost
$di->set(
    'mongo2', 
    function() 
    {
        $mongo = new Mongo("mongodb://localhost");
        return $mongo->selectDb("invoicing");
    }
); 
```

然后，在 Initialize 方法中，我们为模型定义连接服务：

.. 代码块:: php

```
<?php

class Robots extends \Phalcon\Mvc\Collection
{
    public function initialize()
    {
        $this->setConnectionService('mongo1');
    }

} 
```

# excel - 通过 VBA 将 Excel 连接到 PostgreSQL

> ID：13230456
> 
> 赞同：9
> 
> 时间：2012-11-05T10:44:51.887
> 
> 标签：excel, postgresql, vba, odbc, ado

是否可以`SELECT`从 Excel 中的 VBA 进行查询，以便我可以从 Excel 中查询 PostgreSQL 数据库？

如果可能，请解释我如何连接到数据库。我在谷歌中寻找，但没有找到任何结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T11:20:09.557

这里有一些代码可以作为参考。希望能帮助到你。

```
Sub SelectBasic()

        Dim objDb_con
        Dim strSomeValue As String

        Set objDb_con = CreateObject("ADODB.Connection")
        Set Rsdatatype = CreateObject("ADODB.RecordSet")

        glbConnString = Trim(ActiveSheet.Range("B1").Value)
        //Connection string format:Driver={PostgreSQL Unicode};Database=MyDB;server=192.16*.*.**;UID=USERID;Pwd=pasword //comment it
        If glbConnString = "" Then
         MsgBox "Enter the Connection String"
        Else:

        objDb_con.Open glbConnString

        strSql = "select strSomeValue  from SOMETABLE where Something=1"
        Rsdatatype.Open strSql, objDb_con, adOpenKeyset, adLockpessimistic
        If Rsdatatype.EOF = False Then strSomeValue = Rsdatatype.Fields(0).Value
        Rsdatatype.Close

        End If
        objDb_con.Close
    End Sub 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T10:56:06.770

在 PostgreSQL 中创建一个表或视图来描述您想要的数据。

使用来自 VBA 的 ODBC 或 ADO 连接来连接到 PostgreSQL。如果使用 ODBC，您需要创建一个 DSN，`odbcad32.exe`然后在 VB 中使用 DSN，直接连接并不容易。

看：

*   [在 VBA 中使用 ADO 连接到 PostgreSQL](https://stackoverflow.com/questions/9117516/using-ado-in-vba-to-connect-to-postgresql)
*   [PostgreSQL 查询到 Excel 表](https://stackoverflow.com/q/5509460/398670)
*   [http://jackdebear.blogspot.com.au/2011/11/connecting-to-postgres-from-excel.html](http://jackdebear.blogspot.com.au/2011/11/connecting-to-postgres-from-excel.html)
*   [在远程 postgres 数据库和 excel 工作簿之间启用导入/导出流](https://stackoverflow.com/questions/9351487/enabling-import-export-flows-between-a-remote-postgres-database-and-excel-workbo)
*   [ADO 是否适用于 ODBC 驱动程序或仅适用于 OLE DB 提供程序？](https://stackoverflow.com/questions/9187811/does-ado-work-with-odbc-drivers-or-only-ole-db-providers)
*   [如何使用 Excel VBA 和 ADO 将查询结果放入数据表中？](https://stackoverflow.com/questions/9204688/how-to-put-query-results-into-a-datatable-with-excel-vba-and-ado)

[使用 Oracle 编写的更好](http://blog.mclaughlinsoftware.com/microsoft-excel/how-to-query-oracle-from-excel-2007/)的示例，但原理相同 - ODBC/ADO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T09:51:12.340

即使是 64 位 Windows，Excel VBA 也需要[32 位 ODBC 驱动程序](https://www.postgresql.org/ftp/odbc/versions/msi/)。

通过创建 DSN `%windir%\SysWOW64\odbcad32.exe`。实际上，键入`odbcad32.exe`指向 64 位版本，默认情况下您找不到合适的 32 位驱动程序。

来源：[https ://github.com/windweller/postgresql-excel-addIn](https://github.com/windweller/postgresql-excel-addIn)

# ios - 二次幂大小纹理背后的实际原因是什么？

> ID：13230460
> 
> 赞同：0
> 
> 时间：2012-11-05T10:45:01.050
> 
> 标签：ios, opengl-es-2.0, textures

一方面，我可以理解 Mip-mapping（能够将大小递归减半）。还有别的事吗？

* * *

我只是在调查我是否无意调整纹理精灵运行时的大小，那么我不应该意识到这种二次方的考虑，或者出于某些性能/任何原因仍然应该知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:03:32.713

过去，GPU*需要*这样的纹理大小。然后他们改进了，您可以使用其他尺寸，但会降低性能。如今，这些限制已经放松到您可以忘记一切的程度。

另请参阅[https://gamedev.stackexchange.com/questions/26187/why-are-textures-always-square-powers-of-two-what-if-they-arent](https://gamedev.stackexchange.com/questions/26187/why-are-textures-always-square-powers-of-two-what-if-they-arent)

# oracle - ORA-2800: qtp 中的帐户被锁定错误

> ID：13230462
> 
> 赞同：4
> 
> 时间：2012-11-05T10:45:06.323
> 
> 标签：oracle, odbc, qtp

`QTP`连接到数据库以通过脚本检查数据库时间时出现以下错误：

```
"Cannot update system time with database time due to error: ERROR: [Oracle][ODBC][Ora]ORA-28000: the account is locked" 
```

但是给出的数据库`SID`和凭据是正确的，并且在某些数据库客户端中验证相同。我不确定为什么它会抛出错误`QTP`？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T11:13:50.640

1) 使用管理员权限登录到您的 Oracle 数据库：

`cmd> sqlplus / as sysdba`

或者

`cmd> sqlplus system/{systemPassword}@{OracleSID}`

2）使用以下命令解锁您的用户帐户：

`sql> alter user {yourDbUser} account unlock;`

3) 仍然在 SQL*Plus 命令提示符下，防止帐户锁定不再发生：

`sql> ALTER PROFILE "DEFAULT" LIMIT PASSWORD_LIFE_TIME UNLIMITED;`

`sql> ALTER PROFILE "DEFAULT" LIMIT FAILED_LOGIN_ATTEMPTS UNLIMITED;`

**编辑到期评论**

以上说明应该可以解决您的问题。我发布了一个我发现的与此主题相关的附加命令，您可以尝试（但我不确定它是否是解决方案）：

`sql> grant connect, resource to {yourDbUser};`

您还可以[检查数据库中其他锁定用户的状态](https://stackoverflow.com/questions/1547666/how-do-i-get-a-list-of-locked-users-in-an-oracle-database)。*也许*您的工具正在尝试与其他一些用户建立联系，除了您正在使用的用户之外，这些用户仍然存在此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T08:18:22.900

此解决方案适用于 Oracle 10g 和错误 ORA-28000:the account is locked 在 SQL 命令行中键入：

```
conn sys as sysdba 
```

输入密码

```
alter user system account unlock; 
```

# model-view-controller - 将 Ember.TextField 值绑定到另一个控制器的属性

> ID：13230463
> 
> 赞同：0
> 
> 时间：2012-11-05T10:45:13.183
> 
> 标签：model-view-controller, ember.js

我的 index.html 说：

```
 <script type="text/x-handlebars" data-template-name="loggedout">
 <label>Username: </label>{{view Ember.TextField placeholder="your username"  valueBinding="App.LoggedoutController.username"}}<br />
 <label>Password: </label>{{view Ember.TextField placeholder="your password" valueBinding="App.LoggedoutController.password" type="password"}}<br />
 <br /><button {{action login}}>Login</button>
 </script> 
```

该操作转到我的路由器，该路由器重定向到我的控制器

```
 App.LoggedoutController = Ember.Controller.extend({

    username: '',
    password: '',
    isError: false,

    tryLogin: function() {
      console.log("InController: launched");
      var username = this.get("username");
      console.log("Check:" + username);
      .... 
```

但支票是空的。

[小提琴](http://jsfiddle.net/wfabs/KsNaX/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:17:02.027

如果您在路由器中调用“connectOutlet”，那么您不必担心 App.loggedOutController 位（从 MVC 的角度来看，最好将“App.”尽可能地保留在模板之外）。

```
 loggedOut: Ember.Route.extend
      route: '/signin'
      connectOutlets: (router) ->
        router.get("applicationController").connectOutlet 'loggedOut' 
```

然后在您的模板中，您可以简单地拥有：

```
{{view Ember.TextField placeholder="your username"  valueBinding="username"}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:20:53.363

您的 valueBinding 中的路径 App.LoggedoutController.username 是错误的。使用 App.LoggedoutController，您可以引用您使用 Ember.Controller.extend() 定义的类。您可能在代码中的某个地方使用了 App.initialize()。这会导致控制器被框架实例化。然后您可以使用路径 App.router.loggedoutController 来检索它。

请记住：实例名称始终以小写字母开头。上课总是一个大的。

所以解决方案是：使用 valueBindung="App.router.loggedoutController.username"

**编辑**：您的小提琴不起作用，因为您没有链接所需的 ember 库。查看“添加资源”中的左侧。在那里，您必须为 Ember 和 Handlebars JS 文件指定正确的 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:31:33.893

问题在于camelCasing＆使用`router`关键字，您没有绑定路由器...
您使用 `App.outController.username`
而不是
`App.router.outController.username`
This is the working [fiddle](http://jsfiddle.net/LtXtM/)

# symfony - symfony2 中的模板本地化

> ID：13230464
> 
> 赞同：4
> 
> 时间：2012-11-05T10:45:16.200
> 
> 标签：symfony, localization, twig

波斯语（波斯语）等某些语言具有从右到左的结构。

要完全做 i18n 和 l10n，我应该翻译字符串和翻转布局。

我完全使用翻译组件翻译字符串。

现在我正在尝试翻转布局。如何在 symfony 项目中加载`rtl`基于`loacle`twig 文件的 CSS 版本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T14:41:22.773

换句话说，您想根据您的语言环境加载正确的 CSS 文件。

Twig 可让您顺利处理此问题。这是一个关于如何做到这一点的例子，

首先，创建一个全局**`app/Resources/views/base.twig.html`**模板，其中包含

```
{% block head %}
{% block direction %}
    <HTML>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
{% endblock %}
    <head>
    <!-- put here your head meta data -->
{% endblock %} 
```

然后，您可以添加基本模板的英语和波斯语（或任何您想要的语言）版本

**应用程序/资源/视图/base.en.html.twig**

```
{% extends '::base.html.twig' %} 
```

在基础模板的波斯语版本中，由于您需要 html 的 RTL 和专门的 CSS，因此您需要设置更多详细信息，

**app/Resources/views/base.fa.html.twig**（我猜“fa”是波斯语的语言代码）

```
{% extends '::base.html.twig' %}

{% block direction %}
    <HTML DIR="RTL">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
{% endblock %}
{% block stylesheet %}
    {{ parent() }}
    <!-- Add here your specified stylesheets -->
{% endblock %} 
```

然后，使用三级内在性，您可以根据您的语言环境从正确的基本模板继承。这是您的布局首先应包含的内容，

```
{% extends '::base.' ~ app.request.locale ~ '.html.twig' %} 
```

# c# - Linq 根据对象属性从列表中选择对象

> ID：13230468
> 
> 赞同：22
> 
> 时间：2012-11-05T10:45:23.040
> 
> 标签：c#, linq

我有一个对象列表

```
class Answer
{
   bool correct;
}

List<Answer> Answers = new List<Answer>(); 
```

linq 中是否有办法让我根据其属性选择对象？

到目前为止我有

```
Answer answer = Answers.Single(a => a == a.Correct); 
```

但它不起作用

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-05T10:47:09.770

首先，[`Single`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single.aspx)如果有多个元素满足条件，则抛出异常。其次，您的标准应该只检查`Correct`属性是否为`true`. 现在，您正在检查是否`a`等于`a.Correct`（甚至不会编译）。

您应该使用[`First`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx)（如果没有这样的元素，它将抛出），或者[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.firstordefault.aspx)（如果没有这样的元素，它将返回`null`引用类型）：

```
// this will return the first correct answer,
// or throw an exception if there are no correct answers
var correct = answers.First(a => a.Correct); 

// this will return the first correct answer, 
// or null if there are no correct answers
var correct = answers.FirstOrDefault(a => a.Correct); 

// this will return a list containing all answers which are correct,
// or an empty list if there are no correct answers
var allCorrect = answers.Where(a => a.Correct).ToList(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-05T10:47:25.063

[我假设你因为Single](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single.aspx)得到了一个例外。您的列表可能有多个标记为正确的答案，这就是为什么会使用[First](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx)或[FirstOrDefault()](http://msdn.microsoft.com/en-us/library/bb340482.aspx)`Single`引发异常；

```
Answer answer = Answers.FirstOrDefault(a => a.Correct); 
```

此外，如果您想获取标记为正确的所有项目的列表，您可以尝试：

```
List<Answer> correctedAnswers =  Answers.Where(a => a.Correct).ToList(); 
```

如果您想要的结果是`Single`，那么您在查询中所犯的错误是将项目与 bool 值进行比较。你的比较

```
a == a.Correct 
```

声明中是错误的。您的单个查询应该是：

```
Answer answer = Answers.Single(a => a.Correct == true); 
```

或简称为：

```
Answer answer = Answers.Single(a => a.Correct); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-05T10:49:42.243

你的表达永远不会评估。

您正在`a`与 的属性进行比较`a`。

`a`是答案类型。 `a.Correct`，我猜是一个布尔值。

长表：-

```
Answer = answer.SingleOrDefault(a => a.Correct == true); 
```

简写：-

```
Answer = answer.SingleOrDefault(a => a.Correct); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T10:47:13.087

如果`a.Correct`是`bool`正确答案的标志，那么您需要。

```
Answer answer = Answers.Single(a => a.Correct); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T10:47:55.983

我想你在找这个？

```
var correctAnswer = Answers.First(a => a.Correct); 
```

您可以通过键入来使用单一：

```
var correctAnswer = Answers.Single(a => a.Correct); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-05T10:49:07.090

当然！

用于`FirstOrDefault()`选择符合条件的第一个对象：

```
Answer answer = Answers.FirstOrDefault(a => a.Correct); 
```

否则用于`Where()`选择列表的子集：

```
var answers = Answers.Where(a => a.Correct); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T10:53:46.590

这里有几件事要解决：

1.  类声明中没有括号
2.  将“正确”的属性设为公开
3.  然后进行选择

你的代码看起来像这样

```
List<Answer> answers = new List<Answer>();
/* test
answers.Add(new Answer() { correct = false });
answers.Add(new Answer() { correct = true });
answers.Add(new Answer() { correct = false });
*/
Answer answer = answers.Single(a => a.correct == true); 
```

和班级

```
class Answer
{
   public bool correct;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-27T16:33:48.897

```
Answers = Answers.GroupBy(a => a.id).Select(x => x.First()); 
```

这将通过电子邮件选择每个唯一对象

# windows - 有没有像 Guake 一样的 windows 软件？

> ID：13230470
> 
> 赞同：18
> 
> 时间：2012-11-05T10:45:28.570
> 
> 标签：windows, terminal

我正在寻找类似于 Guake 的东西，但对于 windows。我希望能够通过 SSH 连接到我的虚拟 linux 机器并使用 1 个热键显示/隐藏终端。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T11:58:05.160

你可以试试这些

[Guake 与腻子](http://www.autohotkey.com/board/topic/78098-windows-guake-like-putty-session/)

就个人而言，我喜欢在另一个工作区上保持终端打开，我在 windows 中使用 windows pager [Windows pager](http://windowspager.sourceforge.net/)

使用

```
ctrl + win key + left arrow/right arrow 
```

您可以使用终端转移到您想要的工作区

# usb - 解释 mikroC 的 PIC18F4550 HID 示例为何有效

> ID：13230471
> 
> 赞同：0
> 
> 时间：2012-11-05T10:45:28.237
> 
> 标签：usb, microcontroller, pic, hid

[mikroC 编译器](http://www.mikroe.com/mikroc/pic/)有一个用于 HID（人机接口设备）USB 通信的库。在提供的示例中，他们指定以下缓冲区应位于 USB RAM 中，并使用 PIC18F4550 作为目标微控制器。

```
unsigned char readbuff[64] absolute 0x500;   // Buffers should be in USB RAM, please consult datasheet
unsigned char writebuff[64] absolute 0x540; 
```

但是 PIC18F4550 的数据表显示 USB RAM 的范围从 400h 到 4FFh。

那么，当他们的缓冲区似乎不在 400h 到 4FFh 之间时，为什么他们的示例有效？

[链接到完整的源代码](http://pastebin.com/RCNXGAdV)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:02:57.783

[数据表](http://ww1.microchip.com/downloads/en/DeviceDoc/39632e.pdf)实际上说：

> Bank 4（400h 到 4FFh）专门用于端点缓冲区控制，而 Bank 5 到 7 可用于 USB 数据。根据所使用的缓冲类型，Bank 4 的 8 个字节以外的所有字节也可用作 USB 缓冲空间。

因此，您引用的代码似乎是定义用于 USB 数据的缓冲区，而不是“端点缓冲区控制”，因为它们位于第 5 组而不是第 4 组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T15:07:34.197

当 USB HID 模式被激活时，从 400h 到 4FFh 的 USB RAM 存储器被分配给缓冲区描述符。为 USB 和用户数据分配了 500h 和 7ffh 之间的范围。重要的是所有描述符缓冲区和数据缓冲区都将在 bank 4-7 的 ram 内存范围内。谢谢

# c - 在c中将字符串转换为双倍节省时间

> ID：13230477
> 
> 赞同：1
> 
> 时间：2012-11-05T10:45:57.300
> 
> 标签：c, type-conversion

我正在为一个操作（在 Linux 下用 C 语言）做一个基准测试任务，在这个操作中，我们使用了从字符串到 double 的转换（使用 atof 或 sscanf 函数），但这里的问题是它们给出了一个相对较大的时间（分别为 145、270 ns），这不适合该操作。那么，您知道任何其他可以节省时间的转换机制吗？

我尝试使用强制转换，但它给了零

```
double d;

char ch[] = "123.154";

d = *((double *) ch);

printf ("%lf\n", d);         // result 0 (compiled using gcc) 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:56:11.153

`atof()`并且`sscanf()`是接受多种格式的通用方法。如果您知道浮点值遵循某种模式，您可以尝试针对预期格式优化转换。IE。无需支持 (+-)，无需支持 Inf、Nan 或 sci-notation (1.3e43) 等。

可以制作一个从字符串一次转换 3 个字符的查找表： table[a*256+b*16+c] = a*100+b*10+c; 其中一个简单地连接例如字符串“432”的 4 个 LSB 位；索引的十六进制值将是 0x432，内容将是 432。

强制转换意味着改变一些二进制数据的解释。双精度或浮点数和整数不兼容二进制（(+) 0 的值除外）。但是，以下演员可以检查字符串中的前三个字符是否为数字：

```
 char num[]="123.123";
 if ((*((int*)num) & 0x00f0f0f0) == 0x00303030) // can use faster conversion

 // this means interpreting the pointer to string as a pointer to integer
 // and then referencing the contents of the memory _as_ integer (+ some bitmasking) 
```

此外，如果浮点集相对较小，或者某个特定值非常频繁，则可能会以空间换取速度并选择哈希表。如果哈希表匹配，可以并行比较字符串 4 或 8 个字节以进行验证（或跳过该部分，如果已知输入有效）。人们还可以通过对前 4 个字符进行散列来进行初始猜测，然后一次从接下来的 4 个字符继续，来组合这些技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:54:58.333

```
double d;
char ch[] = "123.154";
d = atof(ch);
printf ("%f\n", d); 
```

或者：

```
printf ("%s\n", ch); 
```

# javascript - 在点击事件上使音频淡入淡出

> ID：13230478
> 
> 赞同：3
> 
> 时间：2012-11-05T10:46:03.063
> 
> 标签：javascript, jquery

在我的游戏中，我希望单击“start-btn”时背景音乐消失。目前它有效，但前提是音乐已经播放了很短的时间。如果您让音乐播放一段时间，单击按钮时它似乎不会消失。

```
$(".start-btn-wrapper").click(function() {
    startplay();
    $(bgMusic).on('timeupdate', function() {
        var vol = 1,
            interval = 100;
        if (Math.floor(bgMusic.currentTime) == 5) {
            if (bgMusic.volume == 1) {
                var intervalID = setInterval(function() {
                    if (vol > 0) {
                        vol -= 0.05;
                        bgMusic.volume = vol.toFixed(2);
                    } else {
                        clearInterval(intervalID);
                    }
                }, interval);
            }
        }
    });
}); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:26:43.407

此 if 语句`if (Math.floor(bgMusic.currentTime) == 5) {`意味着只有当您在音频播放 5 到 6 秒时设法单击按钮时，您的音量减小循环才会运行，删除 if 语句应该可以解决您的问题。

# c++ - auto&& 告诉我们什么？

> ID：13230480
> 
> 赞同：208
> 
> 时间：2012-11-05T10:46:05.350
> 
> 标签：c++, c++11, auto, forwarding-reference

如果您阅读类似的代码

`auto&& var = foo();`

`foo`任何按类型值返回的函数在哪里`T`。然后`var`是一个右值引用类型的左值`T`。但这意味着`var`什么？这是否意味着，我们可以窃取资源`var`？是否有任何合理的情况，您应该使用`auto&&`类似的方式告诉读者您的代码，就像您在返回 a`unique_ptr<>`以告知您拥有独占所有权时所做的那样？例如什么`T&&`时候`T`是类类型？

`auto&&`我只是想了解，除了模板编程之外，是否还有其他用例；就像Scott Meyers 的文章[Universal References中的示例中讨论的那样。](http://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers)

* * *

## 回答 #1

> 赞同：294
> 
> 时间：2012-11-05T23:37:02.893

By using `auto&& var = <initializer>` you are saying: **I will accept any initializer regardless of whether it is an lvalue or rvalue expression and I will preserve its constness**. This is typically used for *forwarding* (usually with `T&&`). The reason this works is because a "universal reference", `auto&&` or `T&&`, will bind to *anything*.

You might say, well why not just use a `const auto&` because that will *also* bind to anything? The problem with using a `const` reference is that it's `const`! You won't be able to later bind it to any non-const references or invoke any member functions that are not marked `const`.

As an example, imagine that you want to get a `std::vector`, take an iterator to its first element and modify the value pointed to by that iterator in some way:

```
auto&& vec = some_expression_that_may_be_rvalue_or_lvalue;
auto i = std::begin(vec);
(*i)++; 
```

This code will compile just fine regardless of the initializer expression. The alternatives to `auto&&` fail in the following ways:

```
auto         => will copy the vector, but we wanted a reference
auto&        => will only bind to modifiable lvalues
const auto&  => will bind to anything but make it const, giving us const_iterator
const auto&& => will bind only to rvalues 
```

So for this, `auto&&` works perfectly! An example of using `auto&&` like this is in a range-based `for` loop. See [my other question](https://stackoverflow.com/q/13241108/150634) for more details.

If you then use `std::forward` on your `auto&&` reference to preserve the fact that it was originally either an lvalue or an rvalue, your code says: **Now that I've got your object from either an lvalue or rvalue expression, I want to preserve whichever valueness it originally had so I can use it most efficiently - this might invalidate it.** As in:

```
auto&& var = some_expression_that_may_be_rvalue_or_lvalue;
// var was initialized with either an lvalue or rvalue, but var itself
// is an lvalue because named rvalues are lvalues
use_it_elsewhere(std::forward<decltype(var)>(var)); 
```

This allows `use_it_elsewhere` to rip its guts out for the sake of performance (avoiding copies) when the original initializer was a modifiable rvalue.

What does this mean as to whether we can or when we can steal resources from `var`? Well since the `auto&&` will bind to anything, we cannot possibly try to rip out `var`s guts ourselves - it may very well be an lvalue or even const. We can however `std::forward` it to other functions that may totally ravage its insides. As soon as we do this, we should consider `var` to be in an invalid state.

Now let's apply this to the case of `auto&& var = foo();`, as given in your question, where foo returns a `T` by value. In this case we know for sure that the type of `var` will be deduced as `T&&`. Since we know for certain that it's an rvalue, we don't need `std::forward`'s permission to steal its resources. In this specific case, *knowing that `foo` returns by value*, the reader should just read it as: **I'm taking an rvalue reference to the temporary returned from `foo`, so I can happily move from it.**

* * *

As an addendum, I think it's worth mentioning when an expression like `some_expression_that_may_be_rvalue_or_lvalue` might turn up, other than a "well your code might change" situation. So here's a contrived example:

```
std::vector<int> global_vec{1, 2, 3, 4};

template <typename T>
T get_vector()
{
  return global_vec;
}

template <typename T>
void foo()
{
  auto&& vec = get_vector<T>();
  auto i = std::begin(vec);
  (*i)++;
  std::cout << vec[0] << std::endl;
} 
```

Here, `get_vector<T>()` is that lovely expression that could be either an lvalue or rvalue depending on the generic type `T`. We essentially change the return type of `get_vector` through the template parameter of `foo`.

When we call `foo<std::vector<int>>`, `get_vector` will return `global_vec` by value, which gives an rvalue expression. Alternatively, when we call `foo<std::vector<int>&>`, `get_vector` will return `global_vec` by reference, resulting in an lvalue expression.

If we do:

```
foo<std::vector<int>>();
std::cout << global_vec[0] << std::endl;
foo<std::vector<int>&>();
std::cout << global_vec[0] << std::endl; 
```

We get the following output, as expected:

```
2
1
2
2 
```

If you were to change the `auto&&` in the code to any of `auto`, `auto&`, `const auto&`, or `const auto&&` then we won't get the result we want.

* * *

An alternative way to change program logic based on whether your `auto&&` reference is initialised with an lvalue or rvalue expression is to use type traits:

```
if (std::is_lvalue_reference<decltype(var)>::value) {
  // var was initialised with an lvalue expression
} else if (std::is_rvalue_reference<decltype(var)>::value) {
  // var was initialised with an rvalue expression
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-05T16:05:10.300

首先，我建议阅读我[的这个答案](https://stackoverflow.com/a/8527373/500104)作为边读，以逐步解释通用引用的模板参数推导如何工作。

> 这是否意味着，我们可以窃取资源`var`？

不必要。如果`foo()`突然返回一个引用，或者您更改了调用但忘记更新使用`var`怎么办？或者，如果您使用的是通用代码并且返回类型`foo()`可能会根据您的参数而改变？

认为与in`auto&&`完全相同，因为它（几乎^(†</sup>）正是如此。)^(当您需要传递它们或以任何方式使用它们时，您如何处理函数中的通用引用？)^(您用于)^(获取原始值类别。)^(如果在传递给你的函数之前它是一个左值，那么它在传递之后保持一个左值)^。^(如果它是一个右值，它将再次成为一个右值（请记住，命名的右值引用是一个左值）。)`T&&``template<class T> void f(T&& v);`^(`std::forward<T>(v)``std::forward`)

那么，您如何`var`以通用方式正确使用？使用`std::forward<decltype(var)>(var)`. 这将与上面的函数模板中的完全相同`std::forward<T>(v)`。如果`var`是 a `T&&`，你会得到一个右值，如果是`T&`，你会得到一个左值。

那么，回到主题：代码库`auto&& v = f();`和`std::forward<decltype(v)>(v)`在代码库中告诉我们什么？**他们告诉我们，这`v`将以最有效的方式获得和传递。**但是请记住，在转发了这样一个变量之后，它可能会被移出，所以如果不重置它就进一步使用它是不正确的。

就个人而言，`auto&&`当我需要一个可*修改*的变量时，我会在通用代码中使用。完美转发右值正在修改，因为移动操作可能会偷走它的胆量。如果我只是想偷懒（即，即使我知道也不拼写类型名称）并且不需要修改（例如，仅打印范围的元素时），我会坚持使用`auto const&`.

* * *

†`auto`到目前为止的不同之处在于，这`auto v = {1,2,3};`将是`v`一个`std::initializer_list`，而`f({1,2,3})`将是一个扣除失败。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-05T11:03:53.977

考虑一些`T`具有移动构造函数的类型，并假设

```
T t( foo() ); 
```

使用该移动构造函数。

现在，让我们使用中间引用来捕获来自 的返回`foo`：

```
auto const &ref = foo(); 
```

这排除了使用移动构造函数，因此必须复制返回值而不是移动（即使我们`std::move`在这里使用，我们实际上也不能通过 const ref 移动）

```
T t(std::move(ref));   // invokes T::T(T const&) 
```

但是，如果我们使用

```
auto &&rvref = foo();
// ...
T t(std::move(rvref)); // invokes T::T(T &&) 
```

移动构造函数仍然可用。

* * *

并解决您的其他问题：

> ...是否有任何合理的情况应该使用 auto&& 告诉读者您的代码...

正如 Xeo 所说，第一件事本质上是*我尽可能有效地传递 X*，无论 X 是什么类型。因此，看到`auto&&`内部使用的代码应该传达它将在适当的情况下在内部使用移动语义。

> ...就像您返回 unique_ptr<> 以告知您拥有独占所有权时所做的那样...

当函数模板接受 type 的参数时`T&&`，它表示它可能会移动您传入的对象。`unique_ptr`显式返回将所有权授予调用者；接受`T&&`可能会从调用者那里*删除*所有权（如果存在移动 ctor 等）。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-05T11:28:32.280

该`auto &&`语法使用了 C++11 的两个新特性：

1.  该`auto`部分让编译器根据上下文（本例中的返回值）推断类型。这没有任何参考限定（允许您指定是否需要`T`，`T &`或`T &&`推导类型`T`）。

2.  这`&&`是新的移动语义。支持移动语义的类型实现了一个构造函数，该构造函数`T(T && other)`以最佳方式移动新类型中的内容。这允许对象交换内部表示而不是执行深度复制。

这使您可以拥有类似的东西：

```
std::vector<std::string> foo(); 
```

所以：

```
auto var = foo(); 
```

将执行返回向量的副本（昂贵），但是：

```
auto &&var = foo(); 
```

将交换向量的内部表示（来自的向量`foo`和来自的空向量`var`），因此会更快。

这用于新的 for 循环语法：

```
for (auto &item : foo())
    std::cout << item << std::endl; 
```

其中 for 循环持有一个`auto &&`返回值 from`foo`并且`item`是对 中每个值的引用`foo`。

# ios - iPad 上的多个 UINavigationViewController

> ID：13230482
> 
> 赞同：0
> 
> 时间：2012-11-05T10:46:15.063
> 
> 标签：ios, ipad, uinavigationcontroller

我想构建如 MockUp 中所示的 UI。为此，我需要在 TabBarController 中并排放置两个 UINavigationViewController。在左侧，我需要一个 VerticalToolbar ...

处理这个问题的最佳方法是什么？

谢谢，斯特凡

![iPad模型](../Images/03d767d4464b468b890f7cdd730cb394.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:13:42.663

您可以使用 iOS ViewController 包含 API 来实现此目的。

[检查Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)中的“实现容器视图控制器”主题是否相同。

还要检查[这个](https://stackoverflow.com/questions/8379759/how-does-view-controller-containment-work-in-ios-5/8379894#8379894)帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:45:17.873

在这里我找到了一篇很好的文章，它指出了 UIViewController Containment 的正确使用:)

[使用 UIViewController 包含创建 iPad 仪表板](http://highoncoding.com/Articles/848_Creating_iPad_Dashboard_Using_UIViewController_Containment.aspx)

# javascript - 获取具有特殊字符的 id 的文本框的值

> ID：13230484
> 
> 赞同：0
> 
> 时间：2012-11-05T10:46:21.160
> 
> 标签：javascript, jquery, html

我有一些带有 id 的文本框，其中包含特殊字符，例如 '(' 和 ')' 。当我访问这个文本框的值时，我得到的值是未定义的。需要解决这个问题...

```
 <input type="text" id="header_COUNT(SUBJECT)"  onblur="javascript:setHeader();" disabled="disabled"> 
```

脚本是

```
function setHeader(){
var val=$('#header_COUNT(SUBJECT)').val();
console.log(val);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:50:21.567

这不是一个复杂的选择器。您可以使用`getElementById`：

```
var val=$(document.getElementById('header_COUNT(SUBJECT)')).val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:53:21.787

You can escape characters in jQuery with 2 backslashes `\\`

So reference it like:

```
$('#header_COUNT\\(SUBJECT\\)') 
```

[jsFiddle](http://jsfiddle.net/p6Qmj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:54:02.983

Use the following code

```
function setHeader(){
var val=$('input[id="header_COUNT(SUBJECT)"]').val();
console.log(val);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:55:47.587

[jsbin](http://jsbin.com/upomut/1/edit)

```
var id_with_special_chars = 'header_COUNT(SUBJECT)';
var value =  $('input[id="'+id_with_special_chars+'"]').val();

alert(value); 
```

# javascript - 在 Node.js 中将 Buffer 转换为 ReadableStream

> ID：13230487
> 
> 赞同：123
> 
> 时间：2012-11-05T10:46:25.810
> 
> 标签：javascript, node.js, stream, buffer

我对 Buffers 和 ReadableStreams 还很陌生，所以也许这是一个愚蠢的问题。我有一个将 a 作为输入的库`ReadableStream`，但我的输入只是一个 base64 格式的图像。我可以`Buffer`像这样转换我拥有的数据：

```
var img = new Buffer(img_string, 'base64'); 
```

但我不知道如何将其转换为 a`ReadableStream`或将`Buffer`我获得的转换为 a `ReadableStream`。

有没有办法做到这一点，还是我试图实现不可能？

谢谢。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2020-06-02T00:52:39.797

对于 nodejs 10.17.0 及更高版本：

```
const { Readable } = require('stream');

const stream = Readable.from(myBuffer.toString()); 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2017-05-20T22:52:53.260

像这样的东西......

```
import { Readable } from 'stream'

const buffer = new Buffer(img_string, 'base64')
const readable = new Readable()
readable._read = () => {} // _read is required but you can noop it
readable.push(buffer)
readable.push(null)

readable.pipe(consumer) // consume the stream 
```

在一般课程中，可读流的`_read`函数应该从底层源收集数据，并`push`逐步确保您不会在需要之前将大量源收集到内存中。

在这种情况下，尽管您已经在内存中拥有了源，所以`_read`不需要。

推送整个缓冲区只是将其包装在可读流 api 中。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-08-12T14:58:28.553

[Node Stream Buffer](https://github.com/samcday/node-stream-buffer)显然是为测试而设计的；无法避免延迟使其成为生产使用的糟糕选择。

[Gabriel Llamas](https://stackoverflow.com/users/458093/gabriel-llamas)在这个答案中 建议使用流化器：How to wrap a buffer as a [stream2](https://github.com/gagle/Node-Streamifier) [Readable stream?](https://stackoverflow.com/questions/16038705/how-a-wrap-a-buffer-as-a-stream2-readable-stream#16039177)

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2013-01-16T23:08:44.990

[您可以使用Node Stream Buffers](https://github.com/samcday/node-stream-buffer)创建 ReadableStream ，如下所示：

```
// Initialize stream
var myReadableStreamBuffer = new streamBuffers.ReadableStreamBuffer({
  frequency: 10,      // in milliseconds.
  chunkSize: 2048     // in bytes.
}); 

// With a buffer
myReadableStreamBuffer.put(aBuffer);

// Or with a string
myReadableStreamBuffer.put("A String", "utf8"); 
```

频率不能为 0，所以这会引入一定的延迟。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-05-04T13:28:31.170

您不需要为单个文件添加整个 npm 库。我将它重构为打字稿：

```
import { Readable, ReadableOptions } from "stream";

export class MultiStream extends Readable {
  _object: any;
  constructor(object: any, options: ReadableOptions) {
    super(object instanceof Buffer || typeof object === "string" ? options : { objectMode: true });
    this._object = object;
  }
  _read = () => {
    this.push(this._object);
    this._object = null;
  };
} 
```

基于[node-streamifier](https://github.com/gagle/node-streamifier/blob/master/lib/index.js)（如上所述的最佳选择）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-03-17T11:20:13.247

这是我的简单代码。

```
import { Readable } from 'stream';

const newStream = new Readable({
                    read() {
                      this.push(someBuffer);
                    },
                  }) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-01-09T03:22:38.220

*[这是一个使用流化](https://github.com/gagle/node-streamifier)*器模块的简单解决方案。

```
const streamifier = require('streamifier');
streamifier.createReadStream(new Buffer ([97, 98, 99])).pipe(process.stdout); 
```

您可以使用字符串、缓冲区和对象作为其参数。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2022-01-04T17:29:05.127

您可以为此使用标准的 NodeJS 流 API - [stream.Readable.from](https://nodejs.org/api/stream.html#streamreadablefromiterable-options)

```
const { Readable } = require('stream');
const stream = Readable.from(buffer); 
```

> `buffer.toString()`注意：如果缓冲区包含二进制数据，请勿将缓冲区转换为字符串 ( )。这将导致损坏的二进制文件。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-05-17T12:03:01.430

尝试这个：

```
const Duplex = require('stream').Duplex;  // core NodeJS API
function bufferToStream(buffer) {  
  let stream = new Duplex();
  stream.push(buffer);
  stream.push(null);
  return stream;
} 
```

资料来源：Brian Mancini -> [http://derpturkey.com/buffer-to-stream-in-node/](http://derpturkey.com/buffer-to-stream-in-node/)

# javascript - Handlebars.js 使用 ../ 来引用父上下文

> ID：13230494
> 
> 赞同：23
> 
> 时间：2012-11-05T10:46:45.987
> 
> 标签：javascript, templates, handlebars.js, mustache

假设我有以下 JSON 和 handlebars.js 模板：

## JSON

```
{ 
  rootPath: '/some/path/',
  items:[ {
    title: 'Hello World',
    href: 'hello-world'
  },  {
    title: 'About',
    href: 'about'
  },  {
    title: 'Latest News',
    href: 'latest-news'
  }
} 
```

## 模板

```
<script id="test-template" type="text/x-handlebars-template">

  <ul class="nav">
    {{#each items}}
      <li><a href="{{../rootPath}}{{href}}">{{title}}</a></li>
    {{/each}}
  </ul>

</script> 
```

上面的模板有效，直到我想过滤项目 - 假设有 2 个列表一个奇数和另一个偶数，这是一个简单的奇数模板：

```
<script id="test-template" type="text/x-handlebars-template">

  <ul class="nav">
    {{#each items}}
      {{#isOdd @index}}
        <li><a href="{{../rootPath}}{{href}}">{{title}}</a></li>
      {{/isOdd}}
    {{/each}}
  </ul>

</script> 
```

和注册的助手：

```
// isOdd, helper to identify Odd items
Handlebars.registerHelper('isOdd', function (rawValue, options) {
  if (+rawValue % 2) {
    return options.fn(this);
  } else {
    return options.inverse(this);
  }
}); 
```

助手按预期工作，只渲染奇数项，但是对父上下文的引用丢失了，所以`{{../rootPath}}`指令 ~~fails to render~~ 渲染一个空值。

有没有办法通过块助手传递父上下文？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-05T17:09:27.770

改变这个：

```
<a href="{{../rootPath}}{{href}}"> 
```

对此：

```
<a href="{{../../rootPath}}{{href}}"> 
```

为什么？因为 if 语句是在内部上下文中，所以首先你需要提升一个级别，这就是为什么你必须添加 ../

查看更多详细信息： [https ://github.com/wycats/handlebars.js/issues/196](https://github.com/wycats/handlebars.js/issues/196)

# php - Gantry Joomla模板配置错误

> ID：13230500
> 
> 赞同：0
> 
> 时间：2012-11-05T10:47:03.703
> 
> 标签：php, templates, joomla

我对作为 joomla 主题安装的框架龙门有问题。我第一次尝试在免费的虚拟主机上安装模板进行测试（altervista.org PHP 5.2.17）并且一切正常。

然后我将我所有的网站转移到另一个虚拟主机（非免费）register.it 网站运行良好，它显示没有错误，但在管理员内部，如果我想进入模板配置，它会显示：

```
Fatal error: Cannot instantiate abstract class GantryFormGroup in /htdocs/public/www/libraries/gantry/core/config/gantryformhelper.class.php on line 100 
```

这是altervista.org 信息：

```
Versione database    5.1.49-community-log
Collation database   utf8_general_ci
Versione PHP     5.2.17
Web Server   Apache
WebServer interfaccia PHP    apache2handler
Versione di Joomla!  Joomla! 2.5.6 Stable [ Ember ] 19-June-2012 14:00 GMT
Versione piattaforma Joomla!     Joomla Platform 11.4.0 Stable [ Brian Kernighan ] 03-Jan-2012 00:00 GMT
User Agent   Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4 
```

这是 register.it 信息：

```
PHP attivo su    Linux opus19 2.6.39.4 #1 SMP Tue Jun 19 17:52:27 CEST 2012 x86_64
Versione database    5.1.44-enterprise-gpl-advanced-log
Collation database   utf8_general_ci
Versione PHP     5.3.3-7+squeeze3
Web Server   Apache/2.2.14 (Unix)
WebServer interfaccia PHP    cgi-fcgi
Versione di Joomla!  Joomla! 2.5.6 Stable [ Ember ] 19-June-2012 14:00 GMT
Versione piattaforma Joomla!     Joomla Platform 11.4.0 Stable [ Brian Kernighan ] 03-Jan-2012 00:00 GMT
User Agent   Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4 
```

所有其他管理员后端工作，但我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:29:24.547

请注意，PHP 5.2.4 是最低要求（您满足）。

但建议使用 PHP 5.3+。

见[Joomla！技术要求](http://docs.joomla.org/Technical_requirements)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T11:04:36.800

将 Gantry 移动到新主机时，您需要清除 Gantry 的缓存。所以只需导航到站点=>维护=>清除缓存...并清除龙门、龙门管理员、龙门少的缓存..

# iphone - 如何强制 MapKit 在 iOS 5.1 之后使用 Google 移动地图 (GMM)

> ID：13230503
> 
> 赞同：0
> 
> 时间：2012-11-05T10:47:09.357
> 
> 标签：iphone, ipad, ios6, mapkit

地图工具包[框架参考](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html#//apple_ref/doc/uid/TP40008210)说：

> 在 iOS5.1 及更早版本中，Map Kit 框架使用 Google Mobile Maps (GMM) 服务来提供地图数据。

如果我使用`MapKit`显示地图的框架，它使用适用于 iOS 5.1 及更早版本的谷歌地图，对于 iOS 6，它使用苹果的新地图。我可以强制`MapKit`仍然使用 goggle 移动地图吗？

相关链接： [iOS6 中的新功能](https://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iOS6.html#//apple_ref/doc/uid/TP40011812-SW1)、[位置感知编程指南](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009497)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:57:22.380

不，不可能。

使用 iOS 6 及更高版本，您无法原生访问 Google 地图。如果您想在 iOS 6 上使用 MapKit，那么您将无法使用 Apple Maps。结束。这应该不是太大的问题。MapKit 应该与 iOS 5 上的 Google Maps 和 iOS 6 上的 Apple Maps 无缝协作，并且您在任一版本中都使用相同的 API 和代码。

您仍然可以通过 URL (http://maps.google.com/...) 访问 Google 地图，并通过 Safari 将用户发送给它，或者使用`UIWebView`.可以将 URL 作为参数传递）。如果您想在 iOS 6 中支持 Google 地图，您自己需要做很多工作。

# regex - 将 url 与正则表达式匹配，但不匹配特定字符串

> ID：13230506
> 
> 赞同：0
> 
> 时间：2012-11-05T10:47:21.960
> 
> 标签：regex

我想匹配以下网址

`/root/folder/123`

没有`/root`它的前面。我正在尝试使用`((?!root).)*$`在此答案中找到的这种模式：[https ://stackoverflow.com/a/406408/237312](https://stackoverflow.com/a/406408/237312)

但它也不起作用，因为它仍然匹配`oot/folder/123`. 我想到了一些`(?!(root)+.)*$`不匹配的东西，所以我在这里寻找答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:49:59.903

您可以使用[`lookbehind`](http://www.regular-expressions.info/lookaround.html)语法：`(?<=...)`

例如：

```
(?<=/root).*$ 
```

它会匹配`/folder/123`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:52:05.390

你可以这样做：

```
\/root(.+) 
```

第一组，即 $1 将是 /folder/123

# entity-framework - NHib 的 EF 存储库实现

> ID：13230509
> 
> 赞同：0
> 
> 时间：2012-11-05T10:47:39.447
> 
> 标签：entity-framework, nhibernate, repository, repository-pattern, specification-pattern

下面是设计用于实体框架的通用存储库的实现。忽略这个练习的“好”或“坏”......

NHibernate 中的代码会是什么样子？

干杯，
贝里尔

```
public class Repository<T> : IRepository<T> 
where T : class
{
protected ObjectContext Context;
protected ObjectSet<T> QueryBase;

public Repository(ObjectContext context)
{
    Context = context;
    QueryBase = context.CreateObjectSet<T>();
}

public IEnumerable<T> Matches(ICriteria<T> criteria)
{
    var query = criteria.BuildQueryFrom(QueryBase);
    return query.ToList();
}

public void Save(T entity)
{
    QueryBase.AddObject(entity);
} 
```

# 笔记

这不是关于如何设计存储库或是否使用存储库的问题。只是从 EF 到 NHib 的直接翻译......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:34:39.100

存储库的 Nhib 版本将是一个`ISession`对象。[请参阅ayende 的](http://ayende.com/blog/3955/repository-is-the-new-singleton)
这篇著名帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:18:55.053

存储库可能是这样的

```
public abstract class Repository<TEntity> : IRepository<TEntity>
        where TEntity : Entity
    {
        #region Members

        protected IContext Context;

        #endregion

        #region Constructor

        /// <summary>
        /// Create a new instance of repository
        /// </summary>
        /// <param name="context">Associated Unit Of Work</param>
        protected Repository(IContext context)
        {
            if (context == null)
                throw new ArgumentNullException("context");

            Context = context;
        }

        #endregion

        #region IRepository Members

        public virtual TEntity Add(TEntity item)
        {
            return Context.Add(item);
        }

        public virtual void Remove(TEntity item)
        {
            Set().Remove(item);
        }

        public virtual void Remove(Guid id)
        {
            var persisted = Get(id);

            if (persisted == null) throw new Exception(string.Format("Illegal parameter id:{0}", id));

            Remove(persisted);
        }

        public virtual void Update(TEntity item)
        {
            Context.Update(item);
        }

        public virtual TEntity Get(Guid id)
        {
            return (id != Guid.Empty) ? Query().SingleOrDefault(i => i.Id == id) : null;
        }

        public virtual IEnumerable<TEntity> GetAll()
        {
            return Query();
        }

        public TEntity FirstOrDefaultMatching(ISpecification<TEntity> specification)
        {
            return AllMatching(specification).FirstOrDefault();
        }

        public virtual IEnumerable<TEntity> AllMatching(ISpecification<TEntity> specification)
        {
            return Query().Where(specification.SatisfiedBy());
        }

        public virtual IEnumerable<TEntity> GetPaged<TKProperty>(int pageIndex, int pageCount,
            Expression<Func<TEntity, TKProperty>> orderByExpression, bool ascending)
        {
            var set = Query();

            if (ascending)
            {
                return set.OrderBy(orderByExpression)
                          .Skip(pageCount * pageIndex)
                          .Take(pageCount)
                          .AsEnumerable();
            }

            return set.OrderByDescending(orderByExpression)
                .Skip(pageCount * pageIndex)
                .Take(pageCount)
                .AsEnumerable();
        }

        public virtual IEnumerable<TEntity> GetFiltered(Expression<Func<TEntity, bool>> filter)
        {
            return Query().Where(filter).AsEnumerable();
        }

        public IQueryable<TEntity> CreateSet()
        {
            return Context.CreateSet<TEntity>();
        }

        public bool AnyMatching(ISpecification<TEntity> specification)
        {
            return Query().Any(specification.SatisfiedBy());
        }

        #endregion

        #region Protected Methods

        protected virtual IQueryable<TEntity> Query()
        {
            return Context.CreateSet<TEntity>().Where(EntitySpecification<TEntity>.ValidEntity().SatisfiedBy());
        }

        #endregion
} 
```

EF 情况下的上下文是 DBContext 在 NHibernate 中是 Session

这是我对 NHibernate 的 IContext 实现

```
public class NHibernateEntityContext : IContext
    {
        private readonly ISession _session;
        private static ISessionFactory _sessionFactory;

        public NHibernateEntityContext()
        {
            if (_sessionFactory == null)
            {
                //Your NHibernate Configuration
                //_sessionFactory = Fluently.Configure()
            }

            _session = _sessionFactory.OpenSession();
            _session.FlushMode = FlushMode.Auto;
        }

        #region Implementation of IDisposable

        /// <summary>
        /// Performs application-defined tasks associated with freeing, releasing, or resetting unmanaged resources.
        /// </summary>
        /// <filterpriority>2</filterpriority>
        public void Dispose()
        {
            if (_session.IsOpen)
                _session.Close();
        }

        #endregion

        public IUnitOfWork BeginTransaction()
        {
            return new UnitOfWork(_session);
        }

        #region Implementation of IContext

        public IQueryable<TEntity> CreateSet<TEntity>() where TEntity : class
        {
            return _exceptionHandler.TryCatch(() => _session.Query<TEntity>());
        }

        /// <summary>
        /// Add this item into the Context
        /// </summary>
        /// <typeparam name="TEntity"></typeparam>
        /// <param name="item">The item </param>
        public TEntity Add<TEntity>(TEntity item) where TEntity : class
        {
            return _exceptionHandler.TryCatch(() =>
                {
                    _session.Save(item);
                    return item;
                });

            //return _session.Merge(item);
        }

        /// <summary>
        /// Set object as modified
        /// </summary>
        /// <typeparam name="TEntity"></typeparam>
        /// <param name="item">The entity item to set as modifed</param>
        public void Update<TEntity>(TEntity item) where TEntity : class
        {
            _exceptionHandler.TryCatch(() => _session.Merge(item));
        }

        public void Delete<TEntity>(TEntity item) where TEntity : class
        {
            _exceptionHandler.TryCatch(() => _session.Delete(item));
        }

        #endregion
    } 
```

我的 UnitofWork 是这样的

```
public class UnitOfWork : IUnitOfWork
    {
        private readonly ITransaction _transaction;

        internal UnitOfWork(ISession session)
        {
            _transaction = session.BeginTransaction(IsolationLevel.ReadCommitted);
        }

        public void Commit()
        {
            if (!_transaction.IsActive)
            {
                throw new InvalidOperationException("Oops! We don't have an active transaction");
            }
            _transaction.Commit();
        }

        public void RollbackChanges()
        {
            if (_transaction.IsActive)
            {
                _transaction.Rollback();
            }
        }

        public void Dispose()
        {
            _transaction.Dispose();
        }
    } 
```

你可以像这样使用它：

```
using (var trans = UnitOfWorkFactory.Create())
            {
             ...
                trans.Commit();
            } 
```

# android - 如何以编程方式断开android 4.1.2 nexus中的呼叫

> ID：13230512
> 
> 赞同：6
> 
> 时间：2012-11-05T10:47:47.983
> 
> 标签：android, telephonymanager, nexus-s

我可以在 android 2.2 中以编程方式断开来电未知号码的呼叫。但在 android 4.1 中，它不起作用。

**在android 2.2中断开呼叫的工作代码：**

```
private Class c;    
private  Method m;    
private com.android.internal.telephony.ITelephony telephonyService;    
public void onReceive(Context context, Intent intent)     
{    
   Bundle b = intent.getExtras();    
   String state = b.getString(TelephonyManager.EXTRA_STATE);    
   if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))   
   {    
     TelephonyManager tm = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);    
     c = Class.forName(tm.getClass().getName());    
     m = c.getDeclaredMethod("getITelephony");    
     m.setAccessible(true);    
     telephonyService = (ITelephony) m.invoke(tm);    
     telephonyService.silenceRinger();   
     telephonyService.endCall();    
   }    
} 
```

请帮助我。在此先感谢

**最后我得到了 2.6 版本的解决方案。**

`MODIFY_PHONE_STATE`自 2.3+ 起，权限不再适用于 quietRinger()，但 endCall 就可以了。所以解决方案是注释掉对silenceRinger() 的调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T07:53:01.867

自 2.3+ 起，MODIFY_PHONE_STATE 不再在silenceRinger() 上工作，但 endCall 就好了。

所以解决方案是注释掉对silenceRinger() 的调用。

还有一个简单的例子：

```
 http://androidbridge.blogspot.ro/2011/05/how-to-answer-incoming-call-in-android.html 
```

干杯

# spring - 如何使用 inputStream 获取文件名和文件类型？

> ID：13230513
> 
> 赞同：3
> 
> 时间：2012-11-05T10:47:53.127
> 
> 标签：spring, jsf, primefaces

伙计们，我正在使用 inputStream 进行文件下载。现在我想将 fileName 和 fileType 传递给 DefaultStreamedContent 。现在我如何使用 inputStream 找到 fileName 和 FileType 。

```
InputStream inputStream = new BufferedInputStream(new FileInputStream(filePath));
fileDownload = new DefaultStreamedContent(inputStream,**fileType,fileName**); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T10:57:29.860

无法从中提取此信息`InputStream`。这些信息只能基于`filePath`（并且几乎没有帮助就`java.io.File`可以轻松获取文件名）来提取。

```
File file = new File(filePath);
InputStream inputStream = new FileInputStream(file);
String fileName = file.getName();
String fileType = FacesContext.getCurrentInstance().getEexternalContext().getMimeType(fileName);
fileDownload = new DefaultStreamedContent(inputStream, fileType, fileName); 
```

`ExternalContext#getMimeType()`是根据 中的条目`<mime-mapping>`确定的`web.xml`。servletcontainer 本身已经定义了一大堆（在 Tomcat 中，检查`/conf/web.xml`），但是您可以通过在 webapp 自己的（重新）定义它们来扩展和覆盖它，`/WEB-INF/web.xml`如下所示的 XLSX 类型：

```
<mime-mapping>
    <extension>xlsx</extension>
    <mime-type>application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</mime-type>
</mime-mapping> 
```

# c# - POST 后 ASP.NET MVC 公共静态列表不一样

> ID：13230520
> 
> 赞同：0
> 
> 时间：2012-11-05T10:48:18.823
> 
> 标签：c#, asp.net-mvc, post, static, visual-studio-2012

我是 MVC 的新手，我有一些我无法理解的问题。下面的代码是我想要达到的：

模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace testapplication.Models {
    public class testModel {

        public class SystemUser {
            public string Name { get; set; }
            public string Email { get; set; }
        }

        public static List<SystemUser> list1;
        public static void CreateList1() {
            list1 = new List<SystemUser>();
        }

        public static void FillList1() {
            SystemUser firstUser = new SystemUser();
            firstUser.Name = "name";
            firstUser.Email = "email@address.com";
            list1.Add(firstUser);
        }

        public static List<SystemUser> list2 = new List<SystemUser>();    
        public static void FillList2() { 
            SystemUser firstUser = new SystemUser();
            firstUser.Name = "name";
            firstUser.Email = "email@address.com";
            list2.Add(firstUser);
        }

        public static string list3 = "test";
    }
} 
```

控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using testapplication.Models;

namespace testapplication.Controllers {
    public class HomeController : Controller {

        public ActionResult Index() {
            testModel.CreateList1();
            testModel.FillList1();
            testModel.FillList2();
            var var1 = testModel.list1;
            var var2 = testModel.list2;
            var var3 = testModel.list3;
            return View();
        }

        [HttpPost]
        public ActionResult Index(string test) {
            var var1 = testModel.list1;
            var var2 = testModel.list2;
            var var3 = testModel.list3;
            return View();
        }
    }
} 
```

看法：

```
<h2>Index</h2>

@using (Html.BeginForm("Index", "Home", FormMethod.Post)) {
    <input type="submit" value="Submit" /> 
} 
```

在 POST 方法 list1 之前，list2 和 list3 可以，但在 Post list1 为 null 之后，list2 为空（创建实例）并且 list3 可以。这是为什么？我希望在 POST 之前和之后具有相同的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T19:25:11.973

您似乎没有使用强类型视图，也没有使用静态变量。因此，您的列表仅在您的 [HttpGet] 操作中“有效”。

你可以试试这个：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using testapplication.Models;

namespace testapplication.Controllers {
    public class HomeController : Controller {
        private static testapplication.Models.testModel testModel;

        public ActionResult Index() {
            testModel.CreateList1();
            testModel.FillList1();
            testModel.FillList2();
            var var1 = testModel.list1;
            var var2 = testModel.list2;
            var var3 = testModel.list3;
            return View();
        }

        [HttpPost]
        public ActionResult Index(string test) {                
            var var1 = testModel.list1;
            var var2 = testModel.list2;
            var var3 = testModel.list3;
            return View();
        }
    }
} 
```

# android - android中的复杂线程

> ID：13230523
> 
> 赞同：0
> 
> 时间：2012-11-05T10:48:29.363
> 
> 标签：android, multithreading, android-asynctask, threadpool

我正在制作一个必须执行大量后台操作的应用程序。

*   一个接一个地从 30 个相似的 JSON 中下载数据。
*   根据用户响应更改上述下载的优先级/顺序。
*   根据用户请求并行下载多个图像
*   停止线程/检查线程状态等。

哪个是执行上述操作的最佳类/API。我一直在使用`AsyncTask`，但我在某处读到它具有 10 个后台操作的默认限制，并且还超过了功能限制。

如果您能分享实现上述任务的代码，我也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:52:50.720

你想使用[ThreadPool](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html) s

ThreadPool 是一组托管线程，等待并行执行一组放在队列中的分配任务。

Java 提供了许多管理池的方法，从简单的固定大小的池到根据工作负载动态增长以最大化效率的池。

一个典型的模式是使用线程池来处理 android 不希望你在 UI 线程上执行的所有任务（例如：网络操作）。但是，大多数情况下，您的线程将需要在 UI 上发布结果——这在 UI 线程之外是被阻止的。这是您创建线程池的方式：

```
ExecutorService threadExecutor = Executors.newFixedThreadPool( 3 );
threadExecutor.execute(new Runnable(){
    public void run(){
        //put here your network code
        //when you get the result, either use
        //view.post(new Runnable...);
        //or
        //AsynchTask
   }
}); 
```

根据您的需要，您可以有多个线程池用于不同的目的，但总的来说，对于 Android，最好将活动线程的总数保持在较低水平。

根据您的硬件，建议每个内核 2 个线程，但这可能会根据 IO 绑定（例如网络）和 CPU 绑定（例如图形）活动的比例而有所不同。

为了优先考虑队列中的条目，我建议您创建自己的 ThreadPoolExecutor，如[http://www.javamex.com/tutorials/threads/thread_pools_queues.shtml](http://www.javamex.com/tutorials/threads/thread_pools_queues.shtml)但传递 PriorityQueue 代替：

```
BlockingQueue q = new PriorityQueue<Runnable>();
ThreadPoolExecutor ex = new ThreadPoolExecutor(4, 10, 20, TimeUnit.SECONDS, q); 
```

另请参阅：[如何使用 ThreadPoolExecutor 和自定义任务实现 PriorityBlockingQueue](https://stackoverflow.com/questions/3545623/how-to-implement-priorityblockingqueue-with-threadpoolexecutor-and-custom-tasks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:03:10.070

是的，线程池是一个很好的解决方案。但是为什么要自己做呢？我在 sourceforge.net 上管理一个开源项目，可以帮助你开始。我还写了这篇文章作为介绍：[Managing Threads in Android](http://coopsoft.com/ar/AndroidArticle.html)

# c# - 如何获取对象（数据）的计数

> ID：13230524
> 
> 赞同：0
> 
> 时间：2012-11-05T10:48:30.137
> 
> 标签：c#, javascript, jquery, razor, asp.net-mvc-4

我的代码：

```
$.post("@(Url.Action("SelectAction", "ControllerName"))", function(data){
    // How to get the count of the data(object)
}); 
```

如何获取**数据（对象）的计数**。我使用`data.count`但返回为“**未定义**”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:57:04.663

如果你想数数。对象中的属性，您可以使用：

> Object.keys(data).length

或者，如果您想要跨浏览器的方法，则需要使用以下方法遍历对象本身：

```
var count = 0;

for (i in data) {
    if (data.hasOwnProperty(i)) {
        count++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:01:56.520

按照其他答案（ ）[`Object.keys`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)中指出的方式使用。`Object.keys(data).length`

但是，如果您想要跨浏览器兼容性，请不要使用临时修复。使用垫片。它很简单，并且对于较新的浏览器会更好。旧浏览器只会使用 shim。

快速垫片：

```
if (!Object.keys) Object.keys = function(o) {
  if (o !== Object(o))
    throw new TypeError('Object.keys called on a non-object');
  var k=[],p;
  for (p in o) if (Object.prototype.hasOwnProperty.call(o,p)) k.push(p);
  return k;
} 
```

来源：[http ://tokenposts.blogspot.com.au/2012/04/javascript-objectkeys-browser.html](http://tokenposts.blogspot.com.au/2012/04/javascript-objectkeys-browser.html)

# java - 一个异步 Java Restlet webservice 的例子？

> ID：13230525
> 
> 赞同：1
> 
> 时间：2012-11-05T10:48:31.807
> 
> 标签：java, rest, asynchronous, restlet

是否有任何可用的**异步 Java Restlet webservice**示例？

我想用 Apache Tomcat 6 实现异步 Java Restlet webservice。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:52:22.240

异步 RESTFul 服务仅为[JAX-RS 2.0](http://jax-rs-spec.java.net/)定义。

Restlet 目前不支持 JAX-RS。

[Jersey](http://jersey.java.net/)是 JAX-RS 的参考实现，[也不支持](http://jersey.java.net/jersey20.html)异步服务。

# c# - 将参数传递给 mvvmcross 视图模型时出错

> ID：13230528
> 
> 赞同：1
> 
> 时间：2012-11-05T10:48:44.657
> 
> 标签：c#, mvvmcross

我在 Bestseller 示例中找到了这个示例

```
public ICommand ViewDetailCommand
{
    get { return new MvxRelayCommand(() => RequestNavigate<BookViewModel>(new { category= CategoryEncoded, book=ISBN })); }
}

public BookViewModel(string category = null, string book = null)
{
    category = category ?? string.Empty;
    book = book ?? string.Empty;

    AsyncFindBook(category, book);
 } 
```

所以我试过做

```
public IMvxCommand GetGpsCommand
{
    get
    {
        return new MvxRelayCommand<SetupViewModel>(type => RequestNavigate<GpsViewModel>(new {installedMeter = _installedMeter}));
    }
}

public GpsViewModel(InstalledMeter installedMeter = null)
{
    _installedMeter = installedMeter;

    Latitude = 0.0;
    Longitude = 0.0;
    ButtonStartReading = "Start";

    this.GetService<IGpsService>().CoordinatesFoundEvent += CoordinatesFound;
    //this.GetService<IGpsService>().StartReading();
} 
```

但是当我尝试这个时，我得到了

> Cirrious.MvvmCross.Exceptions.MvxException：无法从定位器 MvxDefaultVi 加载 Core.ViewModels.InstallUnit.GpsViewModel 类型的 ViewModel…</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:16:48.333

**更新：**这个答案对于 MvvmCross 不再是最新的

MvvmCross 现在支持整数、长整数、枚举、双精度和字符串。此外，您可以使用以下建议通过您自己的可序列化类型进行导航：http: [//slodge.blogspot.co.uk/2013/01/navigating-between-viewmodels-by-more.html](http://slodge.blogspot.co.uk/2013/01/navigating-between-viewmodels-by-more.html)

* * *

**原答案：**

* * *

这是经常遇到的错误。

> *MvvmCross 导航参数必须是字符串*

原因是导航本身需要序列化为 WP7/8 上的 Xaml Url 和 Android 上的 Intent。

有关详细信息，请参阅：

*   [将变量从 ViewModel 传递到另一个 View (MVVMCross)](https://stackoverflow.com/questions/10192505/passing-on-variables-from-viewmodel-to-another-view-mvvmcross)

和

*   [ViewModel 中的构造函数](https://stackoverflow.com/questions/10511853/constructor-in-viewmodel)

有关更常见的导航问题，请查看以下位置的导航部分：[http ://slodge.blogspot.co.uk/p/mvvmcross-quicklist.html](http://slodge.blogspot.co.uk/p/mvvmcross-quicklist.html)

如果您认为应该支持更多类型，那么有一个未解决的问题请求 - [https://github.com/slodge/MvvmCross/issues/45](https://github.com/slodge/MvvmCross/issues/45)

* * *

对于小型纯数据对象，您可以将它们序列化为文本并通过此构造函数机制传递它们。唯一的限制实际上是 Xaml Urls 上的大小限制（这些可能会变得非常小）。

但是，在大多数情况下，我希望 viewModel-viewModel 导航将传递某种查找键 - 用于持久服务。MvvmCross 可以帮助导航，但应用程序开发人员需要了解每个应用程序在其操作系统中的生命周期。

# android - Android 从 html 获取 xml

> ID：13230530
> 
> 赞同：1
> 
> 时间：2012-11-05T10:48:47.837
> 
> 标签：android, html, xml

我想在我的应用程序中解析 HTML 内容。我想使用 HtmlCleaner 来做到这一点。

我了解 HtmlCleaner 将 html 转换为 xml。我熟悉解析 xml，所以我想这样做。

我有这条线：

tagNode = new HtmlCleaner(props).clean(new URL("http://somewebsite.com"));

我得到 tagNode 内容。有没有办法查看 HtmlCleaner 返回的 XML 内容？写文件什么的，这样我就可以属性写XML解析器了。

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:55:48.673

您可以将其写入文件。这是来自[HtmlCleaner Java 使用](http://htmlcleaner.sourceforge.net/javause.php)：

```
final CleanerProperties props = new CleanerProperties();
final SimpleHtmlSerializer htmlSerializer = new SimpleHtmlSerializer(props);

htmlSerializer.writeToFile(tagNode, fileName, "utf-8"); 
```

您可能需要捕获`writeToFile()`可能抛出的 IOException。

# php - 从 csv 或逗号分隔的文件中读取数据

> ID：13230533
> 
> 赞同：-3
> 
> 时间：2012-11-05T10:48:53.140
> 
> 标签：php, csv, filereader, memory-limit

> **可能重复：**
> [将 CSV 文件直接导入 MySQL](https://stackoverflow.com/questions/4143938/import-csv-file-directly-into-mysql)

我尝试使用不同的方法（其中一种方法如下）从 csv 文件或逗号分隔的大文件大小（超过 250MB）的文件中读取数据，因此我可以将所需的数据从它插入到 mysql 数据库但程序每次在完成文件读取之前崩溃。我还尝试增加 php.ini 中的内存限制。面临以下错误：-

**1.----------------------------------------------------------**

memory_limit = 128M 致命错误：第 19 行 C:\wamp\www\site\files\plugin\agoda\agoda.plugin.php 中允许的内存大小为 134217728 字节已用尽（尝试分配 63 字节）

**2.----------------------------------------------------------**

memory_limit = 1000M 致命错误：第 19 行 C:\wamp\www\site\files\plugin\agoda\agoda.plugin.php 中允许的内存大小为 1048576000 字节已用尽（试图分配 1299 字节）

**3.----------------------------------------------------------**

memory_limit = 2000M

## 无效的

我需要一种在 php 中读取此类文件而不会导致程序崩溃的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:53:29.210

I provide this code modify it to meet your desire

```
$source = fopen('zipcode.csv', 'r') or die("Problem open file");
    while (($data = fgetcsv($source, 1000, ",")) !== FALSE)
    {
        $zip = $data[0];
        $city = $data[1];
        $state = $data[2];
        $latitude = $data[3];
        $longitude = $data[4];
        $timezone = $data[5];
        $dst = $data[6];

        mysql_query("INSERT INTO `latlong` (`zip`,`city`,`state`,`latitude`,`longitude`,`timezone`,`dst`) VALUES (".$zip.",'".$city."','".$state."','".$latitude."','".$longitude."',".$timezone.",".$dst.")");

    }
    fclose($source); 
```

# objective-c - 关闭键盘和按钮

> ID：13230534
> 
> 赞同：1
> 
> 时间：2012-11-05T10:48:54.390
> 
> 标签：objective-c, ios, xcode

我有两件事相互碰撞。每个单独工作都很好。但我不知道如何让它们同时工作。事情是这样的，我有一些文本字段和按钮，当用户触摸背景时，我添加了关闭键盘，但是这个方法也会被调用，然后用户尝试点击按钮。所以按钮不再起作用。这是我的键盘关闭的一些代码，也许有人会知道如何正确实现它。

```
-(void)dismissKeyboard {
    NSLog(@"resign");
    [[_textFields objectAtIndex:0] resignFirstResponder];
    [[_textFields objectAtIndex:1] resignFirstResponder];
    [[_textFields objectAtIndex:2] resignFirstResponder];
    [[_textFields objectAtIndex:3] resignFirstResponder];
}

UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                               initWithTarget:self
                               action:@selector(dismissKeyboard)];
[TableControll.view addGestureRecognizer:tap];

[TableControll.view addSubview:save];
[button addTarget:self action:@selector(goAdvanced)
 forControlEvents:UIControlEventTouchUpInside];
[save addTarget:self action:@selector(saveInfo)
     forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:53:34.073

尝试修改这部分代码

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                               initWithTarget:self
                               action:@selector(dismissKeyboard)];
tap.cancelsTouchesInView = NO;
[TableControll.view addGestureRecognizer:tap]; 
```

希望对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:54:25.213

可能是因为gestureRecognizer，为了区分点击事件和按钮事件使用this。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer 
       shouldReceiveTouch:(UITouch *)touch {

    if ([touch.view isKindOfClass:[UIButton class]]) {
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:54:17.013

嗨，只需在该按钮后面添加一个按钮，该按钮宽度将为 320，高度将为 480，根据 iphone 尺寸现在您在背景中有一个按钮，在该按钮上有其他按钮。所以现在您可以为这些按钮提供不同的方法。试试它并告诉我它是否有效。

快乐编码！！！！！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:55:36.890

在下面的委托方法中

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch 
```

包括条件

```
 if([touch.view isKindOfClass:[UIButton class]])
    {
        return NO;
    } 
```

以及激活触摸所需的其他控件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T11:08:33.630

而不是`addGestureRecognizer`你可以使用触摸开始功能：例如：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"resign");
    [textfield1 resignFirstResponder];
    [textFiled2 resignFirstResponder];

} 
```

希望这会帮助你。谢谢

# macos - 控制台未在 Apple 的快速启动中显示 Mac OS 应用沙箱违规

> ID：13230540
> 
> 赞同：2
> 
> 时间：2012-11-05T10:49:19.300
> 
> 标签：macos, cocoa, app-store, sandbox, appstore-sandbox

我正在逐步完成[这个 Apple 教程](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxQuickStart/AppSandboxQuickStart.html)以启用沙盒。我已经成功地完成了这些部分，创建了 Xcode 项目，启用了应用程序沙盒，创建了证书，指定了代码签名身份并确认了应用程序是沙盒的。

然后，当我尝试诊断故意违规时，控制台中没有像指南描述的那样出现任何内容。启用应用沙盒已勾选，但其下方没有任何内容（例如，允许传出连接）。权利文件表明沙盒已启用，该应用程序未显示 Apple 网站，活动监视器表示该应用程序已被沙盒化。

我正在使用`Console.app`，查看所有消息（如本教程的**诊断应用程序沙盒违规**部分中所述）。我希望看到来自 的消息`sandboxd`，但看不到与沙盒相关的任何内容。应用程序本身的行为与教程中描述的完全一样，在未沙盒时显示 Apple 网站，然后在沙盒时不显示。

我在 Mac OS 10.8.2、Xcode 4.5.1 上。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-15T02:47:29.643

我在 10.9.2 和 Xcode 5.1 上也经历过这种情况，但我很确定这些天操作系统和 Xcode 版本无关紧要（如果你使用的是 10.5 的旧版本可能很重要）。在我的情况下，实际`/var/log/system.log`文件仍会显示`sandboxd`消息，但它们不会出现在“**所有消息**”查询中，因此我无法访问教程中谈到的“**完整报告”按钮。**

在我的特定机器上，我确实发现如果我以管理员用户身份登录（我的系统上有两个用户，普通用户和管理员/root 用户），我可以在“所有消息”中看到日志消息，这让我能够检查沙盒消息并发现它们是使用 UID=0 发送的。我不确定这是如何控制的（为什么它只影响我们，但其他人都很好？），但如果你不是 root，控制台显然不会在系统日志中显示发送给 / 由 root 发送的消息你自己。

这导致了一个 hacky 解决方案：以 root 身份启动您的控制台。

为此，在终端类型中：

```
sudo -b /Applications/Utilities/Console.app/Contents/MacOS/Console 
```

现在您应该能够使用该控制台查看所有消息。

--

在弄清楚这一点时，我确实走入了死胡同，试图弄清楚日志记录配置文件可能会如何伤害我。事实证明它们与我无关，但它们最终可能会帮助你：

调查发现[这个帖子](http://www.windowslinuxosx.com/q/answers-mac-asl-unable-to-see-my-applications-log-messages-232677.html)有人遇到了类似的问题，并且看起来原因正在过滤`/etc/asl.conf`或`/etc/syslog.conf`

我还找到了 Apple 关于记录和过滤[记录错误和警告的文档：消息被过滤](https://developer.apple.com/library/mac/documentation/macosx/conceptual/bpsystemstartup/Chapters/LoggingErrorsAndWarnings.html#//apple_ref/doc/uid/10000172i-SW8-SW9)

如果您在 /var/log/system.log 中看不到沙盒消息，您可能需要考虑弄乱 .conf 文件，但如果您可以在那里看到它们，那么您的问题可能与它们无关。就我而言，它们是一条死胡同，我花了几个小时沿着这条路线走下去，然后才偶然发现“以 root 身份启动”解决方案。

# android - 在Android中加入两个表以在数据库中插入数据

> ID：13230542
> 
> 赞同：0
> 
> 时间：2012-11-05T10:49:24.793
> 
> 标签：android, join, insert

我在Android中有两个表（t1，t2），t1有一个主键，它是t2的外键，我想向这个表插入数据，有必要加入这两个表吗？如果是，加入这些表的代码是什么？

我在其中一个中插入数据，如下所示：

```
public long insertQuote(String Quote,int Count1 ) 
        {
            ContentValues initialValues = new ContentValues();
            initialValues.put(GoodName, Quote);
            initialValues.put(CartID, Count1);

            return db.insert(DATABASE_TABLE, null, initialValues);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:59:00.140

如果你确定你的输入不会破坏数据完整性的概念，你可以不加入就离开它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:27:15.300

您不需要连接这两个表。因此，您不需要这些代码。

相反，您需要在这两个表中创建一个包含两个插入的事务。首先，您需要插入到第一个表中，获取插入的结果并将该结果作为外键插入到第二个表中。如果这些步骤中的任何一个出现问题，您需要回滚您的更改。在这种情况下，您的数据库将保持一致。

# java - Java - 将单个字符串添加到数组的开头

> ID：13230543
> 
> 赞同：0
> 
> 时间：2012-11-05T10:49:27.480
> 
> 标签：java, android, arrays

这是一个android项目。我正在使用一个数组来构建一个一切正常的微调器。但是，我现在尝试将记录添加到数组的开头，以便在页面加载时不选择任何选项。

我试图只使用一个`myarray.add("---")`类型的东西，但它因以下错误而崩溃：

```
11-05 10:50:36.995: D/AndroidRuntime(16763): Shutting down VM
11-05 10:50:36.995: W/dalvikvm(16763): threadid=1: thread exiting with uncaught exception (group=0x412b42a0)
11-05 10:50:37.000: E/AndroidRuntime(16763): FATAL EXCEPTION: main
11-05 10:50:37.000: E/AndroidRuntime(16763): java.lang.NullPointerException
11-05 10:50:37.000: E/AndroidRuntime(16763):    at com.directenquiries.assessment.tool.AddAsset.updateLocalDesc(AddAsset.java:461)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at com.directenquiries.assessment.tool.AddAsset$3.onItemSelected(AddAsset.java:262)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at android.widget.AdapterView.fireOnSelected(AdapterView.java:892)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at android.widget.AdapterView.access$200(AdapterView.java:49)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:860)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at android.os.Handler.handleCallback(Handler.java:615)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at android.os.Looper.loop(Looper.java:137)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at android.app.ActivityThread.main(ActivityThread.java:4898)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at java.lang.reflect.Method.invokeNative(Native Method)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at java.lang.reflect.Method.invoke(Method.java:511)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
11-05 10:50:37.000: E/AndroidRuntime(16763):    at dalvik.system.NativeStart.main(Native Method)
11-05 10:50:37.020: D/dalvikvm(16763): GC_CONCURRENT freed 243K, 7% free 12989K/13831K, paused 1ms+3ms, total 25ms 
```

我的代码是：

```
 public void setupAssetType(Boolean beenSet){
         Log.e("CamDebug", "Loading asset type");
           Cursor c = db.rawQuery("select * from AssetTypes", null);  
           Log.e("Error Tracking", "Loading AssetTypes");
           if(c.getCount() != 0) {
             c.moveToFirst();
             final ArrayList<String> mAssetType = new ArrayList<String>();
             final ArrayList<String> mTypeID= new ArrayList<String>();

               c.moveToFirst();
               mAssetType.add("TEST");
               mTypeID.add("TEST");
               while(!c.isAfterLast()) {
                    mAssetType.add(c.getString(c.getColumnIndex("AssetType")));
                    mTypeID.add(c.getString(c.getColumnIndex("AssetTypeID")));
                    c.moveToNext();
               }

                ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this,   android.R.layout.simple_spinner_item, mAssetType);
                spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
                spnAssetType.setAdapter(spinnerArrayAdapter);
                int count = 0;
                if(beenSet == true) {
                    for (String mID : mTypeID) {

                        Log.e("Set asset type", mID);
                        if(mID.equals(orAssetTypeID)){
                            spnAssetType.setSelection(count);
                            Log.e("Set asset type FOUND", mID);
                            break;
                        }
                        count++;
                        }   
                    }
                    c.close();            
                spnAssetType.setOnItemSelectedListener(new OnItemSelectedListener() {

                    @Override
                public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
                     Log.e("CamDebug", "Selected asset type");
                        if(mAssetType.size() > 0){
                            setupGroup(mTypeID.get(position), false);   
                            AssetType = mTypeID.get(position);
                            updateLocalDesc();
                            Log.e("Error Tracking", "Before Asset Type set");
                            if(mTypeID.get(position) != null) {
                                AssetTypeID = mTypeID.get(position);
                                } else {
                                    AssetTypeID = "";
                                }
                            Log.e("Error Tracking", "After As");
                        }   
                }

                @Override
                public void onNothingSelected(AdapterView<?> parentView) {

                }

            });

           }
    } 
```

如您所见，我添加了：

```
mAssetType.add("TEST");
mTypeID.add("TEST"); 
```

去测试。但它不起作用。任何想法将不胜感激。

**编辑：**第 461 行是： `AssetGroup = spnAssetGroup.getSelectedItem().toString();`

**编辑 2** - 请不要在不说明原因的情况下投反对票。以往任何时候都没有生产力

**编辑 3**这似乎是错误出现的地方。这个块包括类似 461 并用于将文本从文本微调器创建到单行：

```
public void updateLocalDesc(){

    AssetType = spnAssetType.getSelectedItem().toString();
    AssetGroup = spnAssetGroup.getSelectedItem().toString();

   if(spnAssetSubGroup.getSelectedItem() != null && !spnAssetSubGroup.getSelectedItem().toString().equals("")){
       AssetSubGroup = spnAssetSubGroup.getSelectedItem().toString();
       tbLongDescription.setText(AssetType + "-" + AssetGroup + "-" + AssetSubGroup);
   } else
   {
       tbLongDescription.setText(AssetType + "-" + AssetGroup);
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:08:00.970

我猜第 461 行是

```
mAssetType.add(c.getString(c.getColumnIndex("AssetType"))); 
```

并且 NullPointer 必须来自

```
c.getString() 
```

检查 [光标的android javadocs](http://developer.android.com/reference/android/database/Cursor.html#getString%28int%29)

如果未找到该列 c.getColumnIndex("AssetType") 将返回 -1 导致 c.getString() 抛出 NullPointerException。

您应该将该行分成 3 行并对其进行调试以准确找到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:12:29.737

我解决了。当我没有向数组传递任何内容时，第二个光标返回为 0。因此，当它尝试为描述区域设置文本时，它是 null 和空的，这样做：

```
public void updateLocalDesc(){

    if(spnAssetType.getSelectedItem() != null){
          AssetType = spnAssetType.getSelectedItem().toString(); 
    } else {
        AssetType = " ";
    }

    if(spnAssetGroup.getSelectedItem() != null){
        AssetGroup = spnAssetGroup.getSelectedItem().toString();
    } else {
        AssetGroup = " ";
    }
   AssetType = spnAssetType.getSelectedItem().toString();     

       if(spnAssetSubGroup.getSelectedItem() != null && !spnAssetSubGroup.getSelectedItem().toString().equals("")){
           AssetSubGroup = spnAssetSubGroup.getSelectedItem().toString();
           tbLongDescription.setText(AssetType + "-" + AssetGroup + "-" + AssetSubGroup);
       } else
       {
           tbLongDescription.setText(AssetType + "-" + AssetGroup);
       }

} 
```

修复

# iphone - 对象的潜在泄漏，即使在 ARC 中？

> ID：13230545
> 
> 赞同：1
> 
> 时间：2012-11-05T10:49:31.703
> 
> 标签：iphone, ios, ipad, ios5

我正在使用以下代码并且正在使用 ARC

```
NSString *text;
static NSString *CellIdentifier=@"Cell";
FeedsCell *cell= [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[FeedsCell alloc] initWithStyle:UITableViewCellStyleSubtitle  reuseIdentifier:CellIdentifier];
}

if (indexPath.row == [feedsData count]-1)
{
    [spinner startAnimating];
    [spinner setHidesWhenStopped:YES];

    OnDemand_fetch *getData = [[OnDemand_fetch alloc] init];

    if(nextUrl != NULL)
    {

        NSString *nextfbUrl = [getData getnextFbfeedUrl];
        NSString *nexturlEdited = [nextfbUrl stringByReplacingOccurrencesOfString:@"|" withString:@"%7C"];
        [demandfetch getFeedsInBackground:nexturlEdited];

    }
    else
    {
        [spinner stopAnimating];
        self.myTableView.tableFooterView=nil;
     } 
```

在分析时，显示警告：“在第 267 行分配并存储到 'getData' 中的对象的潜在泄漏。”

谁能建议避免这种情况的方法？这会造成什么麻烦吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:22:25.957

> 没有错误！但我正在使用 ARC！为什么会出现这种奇怪的行为？

因为......你没有使用ARC。不知道为什么你认为你是。要转换为 ARC，请转到 Edit->Refactor->Convert to Objective-C ARC。

![如何转换为 Objective-C ARC](../Images/7219216d13749e657a505f3d81bb0f98.png)

如果您不想全力以赴，并且 ARC 一切，您可以将`-fobjc-arc`编译器标志添加到要使用 ARC 的文件中，项目是非 ARC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:10:05.150

您只使用块`getData`内的对象`if(nextUrl != NULL)`，您可以尝试将其移动到块并`nil`在最后制作，如下所示：

```
if(nextUrl != NULL)
{
    OnDemand_fetch *getData = [[OnDemand_fetch alloc] init];
    NSString *nextfbUrl = [getData getnextFbfeedUrl];
    NSString *nexturlEdited = [nextfbUrl stringByReplacingOccurrencesOfString:@"|" withString:@"%7C"];
    [demandfetch getFeedsInBackground:nexturlEdited];
    getData = nil;
} 
```

# jquery - 数据表重置搜索按钮 - 导致 IE7 中的 jQuery 错误

> ID：13230548
> 
> 赞同：0
> 
> 时间：2012-11-05T10:49:41.547
> 
> 标签：jquery, internet-explorer-7, datatables

我使用数据表和行分组向项目添加了重置搜索按钮。它在除 IE7 之外的所有浏览器中都能正常工作。在 IE7 中，重置搜索按钮和全部展开/全部合同按钮消失。

调试器（IE 控制台）显示此错误：

> SCRIPT87：无效参数
> 
> > jquery.min.js，第 2 行字符 31006

似乎调用函数 ResetSearchField(); 是违规来源。

有人可以帮我解决这个问题吗？我将衷心感谢您的帮助！我设置了一个 jsfiddle 来说明这个问题：http: [//jsfiddle.net/lbriquet/SG8Dm/4/](http://jsfiddle.net/lbriquet/SG8Dm/4/)

这是我正在使用的代码：

```
$(document).ready(function() {
var oTable = $('#example').dataTable({
    "oLanguage": {
        "sSearch": " Table search:"
    },
    "bPaginate": false,
    "iDisplayLength": 100,
    "bLengthChange": false,
    "bJQueryUI": true,
    "sDom": 'Tlfrtip'
}).rowGrouping({
    bExpandableGrouping: true,
    bExpandSingleGroup: false,
    iExpandGroupOffset: -1,
    asExpandedGroups: [""]
});
ResetSearchField();
$('.expandedOrCollapsedGroup').live('click', function() {
    if ($(this).hasClass('collapsed')) {
        $(this).addClass('expanded').removeClass('collapsed').val('Collapse All').parents('.dataTables_wrapper').find('.collapsed-group').trigger('click');
    }
    else {
        $(this).addClass('collapsed').removeClass('expanded').val('Expand All').parents('.dataTables_wrapper').find('.expanded-group').trigger('click');
    }
});
oTable.live('filter', function() {
    clearTimeout(oTable.data('timeout'));
    var timeoutId = setTimeout(function() {
        if ($('label:contains(Table search: ) input').val() != '') {
            $('.group-item-expander.collapsed-group').trigger('click');
        }
        else {
            $('.group-item-expander.expanded-group').trigger('click');
        }
    }, 1000);
    oTable.data('timeout', timeoutId);
});
$("#resetsearch").live('click', function(e) {
    oTable.fnFilter('');
    GridRowCount();
});
GridRowCount();
new FixedHeader(oTable);
});

function GridRowCount() {
$('span.rowCount-grid').remove();
$('input.expandedOrCollapsedGroup').remove();

$('.dataTables_wrapper').find('[id|=group-id]').each(function() {
    var rowCount = $(this).nextUntil('[id|=group-id]').length;
    $(this).find('td').append($('<div />', {
        'class': 'rowCount-grid'
    }).prepend($('<b />', {
        'text': "(" + rowCount + ")"
    })));
});

$('.dataTables_wrapper').find('.dataTables_filter').prepend($('<input />', {
    'type': 'button',
    'class': 'expandedOrCollapsedGroup collapsed',
    'value': 'Expand All'
}));
};

function ResetSearchField() {
$('.dataTables_wrapper').find('.dataTables_filter').append($('<input />', {
    'type': 'submit',
    'class': 'ui-icon ui-icon-closethick float-right',
    'id': 'resetsearch',
    'border': 'none'
}));
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:00:41.660

我找到了解决方案！在脚本调用之后，我禁用了函数 ResetSearchField，如下所示：

```
<!--[if IE 7]>
<script type="text/javascript">
  function ResetSearchField() { }
</script>
<![endif]--> 
```

# svg - 旋转 svg:line 在 d3 中以它的一端为轴

> ID：13230550
> 
> 赞同：4
> 
> 时间：2012-11-05T10:49:50.830
> 
> 标签：svg, rotation, d3.js

我试图`svg:line`在按下按钮时交换我的图表（元素）的轴。我希望过渡像时钟的表盘一样发生。

线

```
d3.select(".yAxis").transition().duration(500).attr("transform", function() { 
  var value = invert?0:90;
  return "rotate("+value+" "+x1+","+y1+")";
}); 
```

正在同时进行翻译和旋转，这不符合我的目的。

我希望这条线只是围绕 (x1,y1) 旋转而不是平移和旋转。

我该怎么做呢？

为了更清楚，这里是[小提琴](http://jsfiddle.net/uttamg911/U48x9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:36:51.287

好的，这个问题确实引起了我的好奇心，但我想我找到了解决方案。基本上，变换插值没有达到您的预期，您必须使用[字符串插值](https://github.com/mbostock/d3/wiki/Transitions#wiki-d3_interpolateString)。

```
d3.select(".xAxis")
      .transition()
        .duration(500)
        .attrTween("transform", function() {
            var startAngle = invert ?-90:0;
            var endAngle = invert?0:-90;
            return d3.interpolateString(
                "rotate("+startAngle+" "+ x +" "+ y +")", 
                "rotate("+endAngle+" "+ x +" "+ y +")"
            );                  
        }); 
```

由于它们具有相同的旋转中心，因此可以在两个轴之间考虑插值调用。

小提琴：http: [//jsfiddle.net/KVUUb/](http://jsfiddle.net/KVUUb/)

# rhomobile - Rhomobile - 应用程序在设备上意外停止

> ID：13230551
> 
> 赞同：0
> 
> 时间：2012-11-05T10:49:58.630
> 
> 标签：rhomobile

我的应用程序在 Rhosimulator 上运行良好，但在 android 设备上返回错误。它停止并显示错误“应用程序（com.process.rhomobile.app_name 已意外停止”

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T08:02:13.223

是的，我也遇到了同样的问题，现在我发布了一个关于[.apk 文件构建的新问题，Rhohub 无法在设备](https://stackoverflow.com/q/13270129/1542202)上使用所有详细信息。

但是我在从命令提示符构建时发现了一个解决方法，转到 applicationfolder/bin/target/android 并且在 buid 完成之前复制 appname_debug.apk 文件并在设备中运行它肯定会运行但问题再次开始它将是尺寸大约大 4 倍，css 可能会也可能不会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:26:00.457

如果您有任何旧版 APK，请从手机中卸载并重试。另外请在 Rake Run:android:device 之前运行 Rake clean:android

# java - 接口方法中的返回类型应该是什么

> ID：13230555
> 
> 赞同：3
> 
> 时间：2012-11-05T10:50:09.753
> 
> 标签：java

我有两节课。`Status1`和`Status2`

这两种状态有一个共同点：

```
protected A a; 
```

和一个不常见的：

```
class Status1 {
    protected A a;
    protected ListStatus1.B version;
} 
```

`B`在课堂`static class`内`Status1`

```
class Status2 {
    protected A a;
    protected Status2.C version;
} 
```

`C`在课堂`static class`内`Status2`

所以现在我想创建界面`Status`

在这里我可以补充`variable A`。现在我需要添加`getVersion`应该返回静态类的方法`Status1 / Status2`

```
protected abstract ?? getVersion(); 
```

但我不知道`return type`应该有什么

我尝试添加到这个接口静态类和这个类返回但没有成功

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:57:05.133

“正确的做法”是让两个静态类 B 和 C 实现一个共同的 empty `interface`，我们称之为“版本化”

```
public interface Versioned{}

static class B implements Versioned{
...
}
static class C implements Versioned{
...
} 
```

之后，您可以编写：

```
 protected abstract Versioned getVersion(); 
```

并且您的方法将被允许返回 B 或 C。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:52:37.880

I think `Object` should do the trick!

however, while accessing any fields of the object you might face problems. Thus, I suggest you to have an interface `Version` which is implemented by the inner classes of both the statuses.

Hope this helps,

Cheers

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T10:54:30.737

If the difference between `Status1.B` and `Status2.C` is essential for your object model, you can make `Status` generic:

```
public interface Status<V> {
    public V getVersion();
}

public class Status1 implements Status<Status1.B> {
    public Status1.B getVersion() { ... }
    ...
} 
```

Otherwise you can introduce an interface for both version classes, as suggested by other answers.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:54:30.083

One way is to create an interface (let's call it `IVersion`) and make both version classes implement that interface. The `getVersion()` method can then return this interface:

```
protected abstract IVersion getVersion(); 
```

# mysql - 如何导入mysql转储文件？

> ID：13230557
> 
> 赞同：0
> 
> 时间：2012-11-05T10:50:10.430
> 
> 标签：mysql, mysqldump

如何将 MySQL Dumpfile、SQL Datafile 导入我的数据库。我正在使用 MySql，基本上想将该转储文件附加到 drupal。

请指导，我没有使用 PhpMyadmin。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:04:58.917

```
mysql -h yourmysqlhost -u yourmysqlusername -pyourmysqlpassword yourdrupaldatabasename < /path/to/mysql_dump_file.sql 
```

# c# - how to compare full databases in c#

> ID：13230560
> 
> 赞同：-2
> 
> 时间：2012-11-05T10:50:28.193
> 
> 标签：c#

I have 2 SQL databases and I want to compare each and everything in it like no of tables, views, stored procedures, columns, primary keys etc. How do I do that programmatically, using C#?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:55:18.913

[http://www.codeproject.com/Articles/27122/Side-by-Side-SQL-Comparer-in-C](http://www.codeproject.com/Articles/27122/Side-by-Side-SQL-Comparer-in-C)

查看链接，它提供了一套很好的说明来帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:56:32.203

为什么要比较 C# 中的数据库，有很多现成的工具可用于此：

[代码项目](http://www.codeproject.com/Articles/205011/SQL-Server-Database-Comparison-Tool)

[红门](http://www.red-gate.com)

[数据库比较](http://dbcomparer.com/)

# ios - 水平 UIButton 中的垂直文本

> ID：13230567
> 
> 赞同：2
> 
> 时间：2012-11-05T10:51:05.943
> 
> 标签：ios, objective-c, text, uibutton, vertical-alignment

我在纵向应用程序中使用垂直 UIButton（只是一个宽度为 60 和高度为 160 的普通按钮）

我想将标签 Vetically 放在按钮上，而不是放在按钮上。

当我使用以下代码旋转标签时

```
 [workPackageButton.titleLabel setTransform:CGAffineTransformMakeRotation(M_PI / 2)]; 
```

它旋转标签，但长度似乎受到原始宽度的限制，所以我在中间得到了 ... 缩写。有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:12:43.003

您可以在按钮上添加标签并旋转标签，如下所示：

```
UILabel *lbl= [[UILabel alloc] initWithFrame:CGRectMake(button.frame.size.width*.3, button.frame.size.height*.5, button.frame.size.width,button.frame.size.height)];
lbl.transform = CGAffineTransformMakeRotation(M_PI / 2);
lbl.textColor =[UIColor whiteColor];
lbl.backgroundColor =[UIColor clearColor];
[button addSubview:lbl]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T05:01:39.393

我知道这是一个旧线程，但另一种方法是对按钮进行子类化并为按钮标签指定正方形大小。

```
@interface RotatingButton : UIButton

@end

@implementation RotatingButton

- (CGRect) titleRectForContentRect:(CGRect)bounds {
    CGRect frame = [super titleRectForContentRect:bounds];

    frame.origin.y -= (frame.size.width - frame.size.height) / 2;
    frame.size.height = frame.size.width;

    return frame;
}

@end 
```

在代码或 Storyboard 上创建的任何 RotatingButton 的标签都可以旋转而不会被截断。

```
[button.titleLabel setTransform:CGAffineTransformMakeRotation(M_PI / 2)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-08T15:22:11.237

我为堆栈视图中的按钮添加了同样的问题所以我需要一些动态的东西

斯威夫特 4.2

```
class VerticalButton: UIButton {

    override func titleRect(forContentRect bounds: CGRect) -> CGRect {
        var frame: CGRect = super.titleRect(forContentRect: bounds)

        frame.origin.y = 0
        frame.size.height = bounds.size.height

        return frame
    }
} 
```

```
extension UILabel {
    @IBInspectable
    var rotation: Int {
        get {
            return 0
        } set {
            let radians = CGFloat(CGFloat(Double.pi) * CGFloat(newValue) / CGFloat(180.0))
            self.transform = CGAffineTransform(rotationAngle: radians)
        }
    }
} 
```

和

```
 let button = VerticalButton.init(type: UIButton.ButtonType.custom)
    button.titleLabel?.textAlignment = .center
    button.titleLabel?.rotation = -90 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:59:04.897

我从来没有这样做过，但是您是否尝试过将按钮创建为水平按钮（160w x 60h）然后旋转整个按钮？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-13T10:08:39.787

为简便起见，请在属性检查器中对按钮进行以下设置：

*   类型：定制
*   标题：归因

接下来，选择左/中/右或两端对齐。不要使用“对齐自然”。

现在

```
[workPackageButton.titleLabel setTransform:CGAffineTransformMakeRotation(M_PI / 2)]; 
```

在标签未缩写的情况下按预期工作（但始终居中对齐......）。

使用 XCode 6.3 测试。

# jquery - Reset jquery tab

> ID：13230573
> 
> 赞同：0
> 
> 时间：2012-11-05T10:51:30.363
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs, javascript-framework, jquery-tabs

I'm using jquery ui tab version 1.9.1 and I do have content with scroller in second tab. What I'm trying to do is whenever I come back on second tab, tab should be reset(Should display content from top).

I've tried to find solution but what I got is to reset form fields on tabs and indexes not for this particular issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:02:17.593

鉴于您尚未提供任何代码，因此很难猜测，但如果您正在通过加载选项卡内容。ajax，在您的第二个选项卡的 HTML 底部，您可以添加如下脚本：

```
$(document).ready(function() {

    $('#secondTabID').animate({scrollTop:$('#secondTabID').offset().top}, 'slow');
}); 
```

如果您的 HTML 是静态的，那么您可能可以使用该[`activate`](http://api.jqueryui.com/tabs/#event-activate)函数做一些事情。

就像是：

```
$("#tabs").tabs({

    activate: function(event, ui) {

       ui.newTab.animate({scrollTop:ui.newTab.offset().top}, 'slow');
    }
}); 
```

# javascript - 通过 Javascript、Jquery 或 Ajax 插入 XML 文件

> ID：13230576
> 
> 赞同：1
> 
> 时间：2012-11-05T10:51:45.900
> 
> 标签：javascript, jquery, xml, ajax, insert

有没有办法将一些数据插入 XML 文件？例如，如果有这样的 XML 代码， `<charlist> <list> <title>gb</title> <chr>Goodbye</chr>` ``</list> <list> <title>ttyl</title> <chr>talk to you later</chr>` `</list> </charlist>` 我如何将更多的数据（如“”）插入 XML 文件。我使用“追加”将更多数据添加到 XML 文件中，但它不起作用。我需要使用 Ajax 还是其他的？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:56:07.850

简短的回答是你不能不使用服务器端语言 - 你可以将它附加到内存中，但你必须使用其他东西来永久存储它；）

**注意**您*可以*使用 HTML5 `LocalStorage()`，但这可能不是您想要的:(

# javascript - 如何将div显示为同一页面中多个图像的弹出窗口

> ID：13230580
> 
> 赞同：0
> 
> 时间：2012-11-05T10:52:02.223
> 
> 标签：javascript, jquery, html

我想在同一页面上显示不同的 div 作为不同图像的弹出窗口。贝娄是我的代码。脚本

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"/>
<script>

function showdialog(linkName, linkClass) {
    //select all the a tag
    $(linkName).click(function (e) {
        //Cancel the link behavior
        e.preventDefault();
        //Get the A tag
        var id = $(this).attr('href');

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set heigth and width to mask to fill up the whole screen
        $('#mask').css({ 'width': maskWidth, 'height': maskHeight });

        //transition effect     
        $('#mask').fadeIn(1000);
        $('#mask').fadeTo("slow", 0.8);

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        $(id).css('top', winH / 2 - $(id).height() / 2);
        $(id).css('left', winW / 2 - $(id).width() / 2);

        //transition effect
        $(id).fadeIn(2000);

    });

    //if close button is clicked
    $('.' + linkClass + ' .close').click(function (e) {
        //Cancel the link behaviors
        e.preventDefault();

        $('#mask').hide();
        $('.' + linkClass).hide();
    });

    $(window).resize(function () {

        var box = $('.' + linkClass);

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set height and width to mask to fill up the whole screen
        $('#mask').css({ 'width': maskWidth, 'height': maskHeight });

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        box.css('top', winH / 2 - box.height() / 2);
        box.css('left', winW / 2 - box.width() / 2);

    });

}

  </script> 
```

风格

```
 <style>
    #mask {
      position:absolute;
      left:0;
      top:0;
      z-index:9000;
      background-color:#ffffff;
      display:none;
    }

    .appDevClass,.productEngClass,.erpServClass,.testingClass,.portalMobClass,.legacyModClass {
      position:fixed;
      left:0;
      top:-100px;
      width:700px;
      height:auto;
      display:none;
      z-index:9999;
      padding:20px;
      box-shadow: 0 0 50px 10px #006357;
      border-radius: 12px;
    }

    #appDevLink,#productEngLink,#erpServLink,#testingLink,#portalMobLink,#legacyModLink {
      width:700px; 
      height:auto;
      padding:10px;
      background-color:#ffffff;
    }

    </style> 
```

HTML

```
 <div>
           <div> <img src="servicePort.png" style="position:relative;left:260px;padding-bottom:20px;"/>
           </div>
           <div >
         <a href="#appDevLink" id="appDevLinkId" name="appDev" style="position:relative;left:370px;height:100%;">   <img  onclick="javascript:showdialog('#appDevLinkId','appDevClass')" src="appDev.png" id="appDevImg"/></a>
            </div>
            <div>
         <a href="#productEngLink" id="productEngLinkId" name="productEng" style="position:relative;left:150px; ">   <img onclick="javascript:showdialog('#productEngLinkId','productEngClass')" src="productEng.png" id="productEngImg"/></a>
         <a href="#erpServLink" id="erpServLinkId" name="erpServ" style="position:relative;left:370px;">   <img onclick="javascript:showdialog('#erpServLinkId','erpServClass')" src="erpServ.png" id="erpServImg"/></a>
            </div>
            <div>
         <a href="#testingLink" id="testingLinkId" name="testing" style="position:relative;left:150px;">   <img onclick="javascript:showdialog('#testingLinkId','testingClass')" src="testing.png" id="testingImg"/></a>
         <a href="#portalMobLink" id="portalMobLinkId" name="portalMob" style="position:relative;left:370px;">   <img onclick="javascript:showdialog('#portalMobLinkId','portalMobClass')" src="portalMob.png"  id="portalMobImg"/></a>
            </div>
            <div>
         <a href="#legacyModLink" id="legacyModLinkId" name="legacyMod"  style="position:relative;left:370px;">   <img onclick="javascript:showdialog('#legacyModLinkId','legacyModClass')" src="legacyMod.png" id="legacyModImg"/></a>
            </div>
            <div>
            <img src="bottomline.png" style="position:relative;left:70px;padding-top:10px;"/>
            </div>
        </div> 

                <div  id="appDevLink" class="appDevClass">
            <a href="#"class="close" style="float:right;background-color:black;padding:3px;color:white;"/>Close </a>
            <h3>abc </h3> 
            <p>
                some ocntent here 
            </p>
        </div>

            <div id="productEngLink" class="productEngClass">
             <a href="#"class="close" style="float:right;background-color:black;padding:3px;color:white;"/>Close </a>
             <h3>abc </h3> 
            <p>
                some ocntent here 
            </p>
        </div>

            <div id="erpServLink" class="erpServClass">
             <a href="#"class="close" style="float:right;background-color:black;padding:3px;color:white;"/>Close </a>
             <h3>abc </h3> 
            <p>
                some ocntent here 
            </p>
        </div>

            <div id="testingLink" class="testingClass">
             <a href="#"class="close" style="float:right;background-color:black;padding:3px;color:white;"/>Close </a>
             <h3>abc </h3> 
            <p>
                some ocntent here 
            </p>
        </div>

            <div id="portalMobLink" class="portalMobClass">
             <a href="#"class="close" style="float:right;background-color:black;padding:3px;color:white;"/>Close </a>

            <h3>abc </h3> 
            <p>
                some ocntent here 
            </p>
        </div>

            <div id="legacyModLink" class="legacyModClass">
             <a href="#"class="close" style="float:right;background-color:black;padding:3px;color:white;"/>Close </a>
            <h3>abc </h3> 
            <p>
                some ocntent here 
            </p>
        </div> 
```

问题是它多次打开与弹出窗口相同的 div。即当我点击图像时间然后div打开一次。如果我再次单击相同的图像，则 div 会打开 2 次，并且会继续。

我不知道这个脚本有什么问题。谁能帮我这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:44:37.153

我解决了。刚刚在点击功能的末尾添加了波纹管代码

```
$(linkName).unbind('click'); 
```

# c# - 从文件名中获取路径

> ID：13230583
> 
> 赞同：2
> 
> 时间：2012-11-05T10:52:14.877
> 
> 标签：c#, file, path

所以我有一个文件（例如 index.html），我想得到它的路径。我的大部分文件都存储在 debug- 文件夹中。所以例如我想得到路径：

C:\documents and settings\administrator\My Documents\Visual Studio 2010\Projects\WebServer\WebServer\bin\Debug\index.html

我已经尝试过 Path.GetDirectoryname(filename); //不起作用，因为我没有得到任何回报

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:53:45.913

```
Path.GetFullPath(fileName); 
```

*   [**来源**](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:54:31.630

您可能正在搜索[Server.MapPath](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)。

> MapPath 方法将指定的相对或虚拟路径映射到服务器上相应的物理目录。

从文件名和*预期*结果中，我推断出您要求的`ASP.NET`.

# javascript - jQuery UI resizable changes height when resizing width

> ID：13230587
> 
> 赞同：7
> 
> 时间：2012-11-05T10:52:50.643
> 
> 标签：javascript, jquery-ui

I have a very simple DIV element that I'm trying to resize and drag horizontally. It works fine but the height of the DIV element is also changed by jQuery UI. I don't understand why.

Anyone an idea?

JS code:

```
$('.task')
    .draggable({
        axis: 'x'
    })
    .resizable({
        containment: 'parent',
        handles: 'e, w'
    });

```

HTML code:

```
<ul>
  <li>
    <div class="task status-green">
      <span class="handle-move"></span>
    </div>
  </li>
</ul>

```

CSS code:

```
li {
  height: 20px;
  line-height: 20px;
  list-style: none;
}

.task {
  height: 16px;
  margin-top: 2px;
  position: relative;
}

.task span {
  display: block;
  height: 16px;
  position: absolute;
  z-index: 10;
}

.task .handle-move {
  bottom: 0;
  cursor: move;
  left: 10px;
  right: 10px;
  top: 0;
  z-index:1;
}

.task .ui-resizable-handle {
  background-color: pink;
  cursor: e-resize;
  height: 16px;
  position: absolute;
  width: 10px;
}

.task .ui-resizable-w {
  left: 0;
}

.task .ui-resizable-e {
  right: 0;
}

.status-green {
  background-color: green;
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-03T11:07:14.783

根据我的经验， resizable-function 无法尝试管理“box-sizing”css-property。尝试使用

```
box-sizing: border-box; 
```

或为填充物制作一个内部容器。

# node.js - NodeJS 引用另一个 URL

> ID：13230588
> 
> 赞同：0
> 
> 时间：2012-11-05T10:52:52.473
> 
> 标签：node.js, url, cross-domain

我需要从我的网站隐藏对另一个域的引用。基本上，如果有人从我的网站上要求一些文件，如下所示：

[http://www.mydomain.com/file/12345](http://www.mydomain.com/file/12345)

它应该去亚马逊 s3，得到它并回馈。怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:31:24.997

您可以使用[请求模块](https://github.com/mikeal/request)充当外部文件的代理。

# php - struggling with simple php

> ID：13230589
> 
> 赞同：0
> 
> 时间：2012-11-05T10:52:54.207
> 
> 标签：php, html

having issues creating a simple working form, the html is all below, followed by the php. I have tried to find a decent yet simple tut for php forms but never found one which is crystal clear.

```
<form class="form-horizontal" method="post" action="mail.php">
                    <div class="control-group">
                        <label class="control-label" for="name">Name:</label>
                        <div class="controls">
                            <input class="input-xlarge" type="text" id="name" name="name">
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="email">Email:</label>
                        <div class="controls">
                            <input class="input-xlarge" type="text" id="email" name="email">
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="number">Number:</label>
                        <div class="controls">
                            <input class="input-xlarge" type="text" id="number" name="number">
                        </div>
                    </div>
                    <div class="controls">
                        <textarea class="input-xlarge" rows="6" id="message" name="message"></textarea>
                    </div>
                    <div class="controls">
                        <button class="btn btn-small btn-primary" id="send-mail-btn" type="submit">Send Message!</button>
                    </div>
                </form> 
```

with the following php

```
<? php

//import of user info
$name = $_POST['name'];
$email = $_POST['email'];
$number = $_POST['number'];
$message = $_POST['message'];

//mail input
$from = 'From: MissMoneyPenny.uk.com'
$to = 'paul@pb84.com';
$subject = 'Enquiry from Website'

//email content
$body = "From: $name\n E-Mail: $email\n Number: $number\n Message: $message";

//send mail
mail ($to, $subject, $body, $from);

?> 
```

But when running the form i get an error on line 4 with is the `$name = $_POST['name'];` any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:54:04.423

```
<? php
  ^ 
```

No space there. That isn't right. it is getting interpreted as a short script-open tag `<?` followed by `php` which isn't a valid token there.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:08:49.777

Please try this

Put the assignments(=) in if loop

```
<?php

    //import of user info

    if($_REQUEST['submit'])
    {
    $name = $_POST['name'];
    $email = $_POST['email'];
    $number = $_POST['number'];
    $message = $_POST['message'];
    }

    //mail input
    $from = 'From: MissMoneyPenny.uk.com'
    $to = 'paul@pb84.com';
    $subject = 'Enquiry from Website'

    //email content
    $body = "From: $name\n E-Mail: $email\n Number: $number\n Message: $message";

    //send mail
    mail ($to, $subject, $body, $from);

    ?> 
```

Also

```
<?php 
```

use this on starting

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:54:43.047

Should it be `<?php` instead of `<? php`? Or is that too basic...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T11:03:15.380

在 html 输入表单中尝试不同的名称，因为 id 和 name 在 html 输入表单中是相同的，所以请尝试不同的名称。例如，名称：和 mail.php。您可以通过以下方式获得价值，

$name = $_POST['txtName'];

# android - Android - 下载 JSON 数据并保存到共享首选项

> ID：13230594
> 
> 赞同：1
> 
> 时间：2012-11-05T10:53:03.470
> 
> 标签：android, json

我正在从 PHP 服务读取 JSON 数据，并且每次该 JSON 的版本发生变化时，我都想将其存储在 Android 上（用新数据替换旧数据），JSON 仅用于填充 Spinner。

我的问题是： - JSON 有 36KB，可以将其存储在 Shared Preferences 上吗？有一个字符串还是我应该使用 SQLite 来存储它？

每月会有一次更新

我的数据示例：http: [//zimp.hugo.webe.pt/api/occupations/list](http://zimp.hugo.webe.pt/api/occupations/list)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:57:54.777

如果它是一个 json 字符串，有很多记录、值，那么我建议将此字符串解析为记录，然后将这些记录保存到 sqlite，这样您就不需要再次解析这个字符串，而且是不必要的。否则，将字符串保存到共享首选项中没有任何问题。

根据您的数据，您应该选择 SQLite。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:54:09.633

可以将其存储在共享首选项中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:57:46.613

这实际上取决于您要存储的数据。

SQLite

大量相同的结构化数据应存储在 SQLite 数据库中，因为数据库是为此类数据设计的。由于数据是由数据库结构化和管理的，因此可以使用 SQL 等查询语言对其进行查询以获取符合特定条件的数据子集。这使得在数据中进行搜索成为可能。当然，管理和搜索大量数据会影响性能，因此从数据库读取数据可能比从 SharedPreferences 读取数据要慢。

共享首选项

SharedPreferences 是一个键/值存储，您可以在其中将数据保存在某个键下。要从存储中读取数据，您必须知道数据的键。这使得读取数据非常容易。但是，尽管存储少量数据很容易，但存储和读取大型结构化数据却很困难，因为您需要为每个数据定义键，而且您无法真正在数据中进行搜索，除非您有一定的概念命名键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:58:15.273

保存在共享首选项中不是问题..但请记住，SP主要将原始数据类型保存在键值对中......在您的情况下不是36kb的问题。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T11:00:58.520

这取决于您的数据。

*   如果您的数据应该是动态的并且经常更改，那么您必须使用 JOSN。
*   如果您的数据不是不定期更新且不是大尺寸，则存储在共享首选项中。
*   如果您的数据很大，则存储在数据库中。

现在你必须决定选择哪一个。

# facebook - Facebook 礼物：如何通过 Open Graph 访问有关赠送礼物的信息？

> ID：13230595
> 
> 赞同：1
> 
> 时间：2012-11-05T10:53:05.853
> 
> 标签：facebook, facebook-graph-api, social-networking

是否可以通过 Open Graph 访问有关赠送礼物的信息？我在开发人员文档中没有找到任何有关此的信息。一个简单的，（还）不可能的，将非常有用。

从开发人员的角度来看，我在哪里可以找到有关此 Facebook 新功能的更多信息？还没有开发人员考虑过这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:27:17.307

不，目前尚无法通过 Facebook 平台访问此类信息。由于礼品功能仍仅作为对少量用户的测试运行，我不希望它的 API 能够启动，如果有的话，直到它可供更大比例的用户使用。

# c# - C# Visual Studio 2012 does not produce a helpful compilation error when failing to return a value, while VS 2010 does

> ID：13230607
> 
> 赞同：2
> 
> 时间：2012-11-05T10:53:45.603
> 
> 标签：c#, visual-studio-2012

Steps to reproduce: Compile this piece of code:

```
 public string SomeMethod()
    {
        return;
    } 
```

Visual Studio 2012 produce this unhelpful compilation error:

```
 Could not copy the file "<insert path of executable>" because it was not found. 
```

Visual Studio 2010 produces this helpful compilation error:

```
 An object of a type convertible to 'string' is required 
```

Visual Studio Versions:

*   VS 2012: Version 11.0.50727.1
*   VS 2010: Version 10.0.40219.1

We upgraded to JetBrains ReSharper 7.0.1 C# Edition at the same time as upgrading to VS 2012, but reproducing this while suspending ReSharper produces the same results.

# php - 搜索数组并返回缺失值

> ID：13230609
> 
> 赞同：2
> 
> 时间：2012-11-05T10:53:48.130
> 
> 标签：php, arrays

我使用此代码检查数组中是否存在值：

```
if (!in_array(array("Product code","Price","Supplier","Cost Price"), $data)) {
        die("You are missing fields");
     } 
```

工作正常，但我希望它返回不存在的值，所以如果数组是这样的：

```
$data = array("Price","Supplier","Cost Price"); 
```

PHP 将返回“产品代码不在数组中”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:56:24.360

使用 array_diff 查找多个数组比较中的差异。

```
 $array1 = array("a" => "Product code","Price","Supplier","Cost Price");
if (!in_array($array1, $data)) {
        die("You are missing :" . print_r(array_diff($array1, $data)));
     } 
```

来自 PHP 手册：

```
<?php
$array1 = array("a" => "green", "red", "blue", "red");
$array2 = array("b" => "green", "yellow", "red");
$result = array_diff($array1, $array2);

print_r($result);     /* This will print: BLUE */
?> 
```

更多信息在这里： http: [//php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:55:59.173

您可以使用**[array_diff_assoc](http://www.php.net/manual/en/function.array-diff-assoc.php)** -通过附加索引检查计算数组的差异

```
<?php
  $array1 = array("a" => "green", "b" => "brown", "c" => "blue", "red");
  $array2 = array("a" => "green", "yellow", "red");
  $result = array_diff_assoc($array1, $array2);
   print_r($result);
?> 
```

或`in_array`像这样使用

```
$os = array("Mac", "NT", "Irix", "Linux");
if (in_array("Irix", $os)) {
    echo "Got Irix";
} 
```

要检查所有数组，您可以使用类似的东西

```
foreach($array as $val){
if (in_array($val, $os)) {
        echo "Got Irix";
    }

}else{
     //show error

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:56:31.660

看看[http://www.php.net/manual/en/function.array-diff.php](http://www.php.net/manual/en/function.array-diff.php)和[http://www.php.net/manual/en/function.array-intersect.php](http://www.php.net/manual/en/function.array-intersect.php)；使用这些函数，您可以检查两个数组的差异（或共同部分）并遍历差异（或共同部分）以准确告诉用户缺少什么/共同点。

# javascript - 在 iframe 中访问和调整 div 的高度

> ID：13230611
> 
> 赞同：1
> 
> 时间：2012-11-05T10:53:55.680
> 
> 标签：javascript, jquery, html, iframe

我目前正在为我的网站编写一个新主题，并且在动态调整 iframe 中 div 元素的高度时遇到了问题。iframe 中的源在我的域中，但我无法直接对其进行编辑。

我想做的是有一个脚本来读取 iframe 的高度（例如 1000px），读取 iframe 中两个 div 的高度（例如 #content height=200px 和 #question height =600px）。然后它会调整这两个高度以适应 iframe 页面。

所以我猜一些看起来像这样的东西：

```
var height = $('iframe').height();
var content_height = $('iframe').contents().find('#content').height();
var question_height =  $('iframe').contents().find('#question').height();
var diff = height - content_height - question_height
if diff > 0
   "new content height" = content_height + diff/2
    "new question height" = content_question + diff/2
end 
```

当谈到 javascript 时，我是一个完整的菜鸟，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:17:13.527

请参阅 rajesh 的回答。

对于 if 语句：不要忘记括号（以及所有分号）。

```
if (diff > 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:24:43.817

像这样的东西应该工作：

```
 $('iframe').height();
 $('iframe').contents().find('#content').height();
 $('iframe').contents().find('#question').height(); 
```

# jquery - Detecting multiple instances of a session

> ID：13230613
> 
> 赞同：0
> 
> 时间：2012-11-05T10:53:59.237
> 
> 标签：jquery, django

I'm building an application that serves as a web-based file editor. Users can select a file they want to edit, then that file is retrieved from the server and shown in a field. The user can then edit the file, and eventually save it.

This introduces a race-condition I'm trying to solve.

The client-side file is not always in sync with the server-side file. When a user opens a file that has already been opened and edited in another place, saving will overwrite any edits done by the other client. While this could be fixed using some form of merging, this is quite a bit outside the scope of this project.

When a user logs in on two different pc's or from two different browsers, and tries to open the same file twice, this can be detected using the session key. However, when a user opens a second tab, the session key will be identical.

Currently I periodically ping the file (say, every 2 seconds) and check if the previous ping is about 2 seconds ago. if it is less than that (minus some value accounting for lag) there *might* be two clients watching that file. This however breaks if a user quickly switches between a file and back, and is just plain ugly.

Is there a better, cleaner way of doing this?

I'm using a Django backend, and a frontend that relies heavily on jQuery, so any functionality based on these two would have my preference.

Some relevant code is shown below:

From the client-side, periodically dinging the file server-side:

```
setInterval(function(){
    opened = $('input[name=file]:checked', '#files').val();
    if(opened){
        $.post('./' + opened + '/ding').error(function(){
            alert('Something is awry.');
        });
    }
}, 2000); 
```

From the server-side, handling these dings:

```
def ding(request, user_id, project_id, file_id):
    user = User.objects.get(pk=user_id)
    project = Project.objects.get(pk=project_id)
    file = File.objects.get(pk=file_id)

    session_key = request.session.session_key

    can_claim = file.last_seen_open == None or timezone.now() - file.last_seen_open > datetime.timedelta(seconds=4)
    is_mine = file.last_opened_by == session_key
    is_iffy = file.last_seen_open != None and timezone.now() - file.last_seen_open < datetime.timedelta(seconds=1)

    if is_iffy:
        return HttpResponse(status=409, content="File is iffy")
    if can_claim or is_mine:
        file.last_opened_by = session_key
        file.last_seen_open = timezone.now()
        file.save()
        return HttpResponse(status=200, content="File ding'd")
    else:
        return HttpResponse(status=409, content="File claimed by someone else") 
```

The response "409: File is iffy" is returned if it seems that the file is opened twice on the same key

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T21:06:40.400

我偶然在这里发现了你的问题。由于这个问题已经有几个月了，我不确定你是否还在等待答案。不过，我认为有一个简单的解决方案：

当用户请求文件时，不仅获取文件的内容，还获取最后修改日期。将该值存储在客户端。当用户进行一些更改并选择保存文件时，将值与新内容一起发送。在服务器端，您可以将文件的当前修改日期与用户发送的值进行比较。如果它们不匹配，则该文件同时已被另一个用户更新。

# java - 当数据包含不可显示的字符时，JAXB 输出无效的 XML

> ID：13230620
> 
> 赞同：6
> 
> 时间：2012-11-05T10:54:13.723
> 
> 标签：java, xml, jaxb, eclipselink, moxy

我正在使用 JAXB 2.2.5 从 JAXB 模型输出 Xml，数据是从数据库中填充的，有时数据库包含不应该显示的不可显示字符，例如

```
0x1a 
```

如果是这样，那么 JAXB 通过按原样输出这个字符来输出无效的 Xml，它不应该转义它还是什么？

**更新**

我想知道是否有任何实现可以解决这个问题，也许 Eclipselink MOXy 可以？

**编辑**

我尝试了解决非法字符问题的解决方法，但是它以一种不受欢迎的方式改变了输出。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><metadata created="2013-02-27T11:40:04.009Z" xmlns="http://musicbrainz.org/ns/mmd-2.0#" xmlns:ext="http://musicbrainz.org/ns/ext#-2.0"><cdstub-list count="1" offset="0"><cdstub id="w237dKURKperVfmckD5b_xo8BO8-" ext:score="100"><title>fred</title><artist></artist><track-list count="5"/></cdstub></cdstub-list></metadata> 
```

到

```
<?xml version="1.0" ?><metadata xmlns:ext="http://musicbrainz.org/ns/ext#-2.0" xmlns="http://musicbrainz.org/ns/mmd-2.0#" created="2013-02-27T11:39:15.394Z"><cdstub-list count="1" offset="0"><cdstub id="w237dKURKperVfmckD5b_xo8BO8-" ext:score="100"><title>fred</title><artist></artist><track-list count="5"></track-list></cdstub></cdstub-list></metadata> 
```

即已`<track-list count="5"/>`成为`<track-list count="5"></track-list>`不可取的，我不确定它为什么这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:01:11.763

这显然是一个常见问题 - 并标记为错误[JAXB 生成非法 XML 字符](http://java.net/jira/browse/JAXB-614)。

[您可以在转义非法字符](http://blog.lesc.se/2009/03/escape-illegal-characters-with-jaxb-xml.html)中找到解决方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-05T21:30:11.643

另一种解决方案是使用 Apache Commons Lang 删除无效的 XML 字符：

```
import org.apache.commons.lang3.StringEscapeUtils;

String xml = "<root>content with some invalid characters...</root>";
xml = StringEscapeUtils.unescapeXml(StringEscapeUtils.escapeXml10(xml)); 
```

该`escapeXml10`方法将转义字符串并删除无效字符。该`unescapeXml`方法将撤消转义。最终结果是相同的 XML，但删除了无效的 XML 字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T12:12:10.807

只需将字符替换为消息内容中的任何字符或空格即可。如果您不想使用额外的 jar 或第三方的东西，您可以尝试以下方法：

```
String msgContent = "......";// string with some illegal character
msgContent = msgContent .replaceALL("\\P{Print}","_"); 
```

在这个例子中，replaceALL 方法用下划线替换不可打印的字符。因此，您的 msgContent 将只是可打印的字符，并且可以防止 JAXB 使用非法字符。

# ssrs-2008 - 如何将代码值返回到变量中

> ID：13230622
> 
> 赞同：0
> 
> 时间：2012-11-05T10:54:22.287
> 
> 标签：ssrs-2008, reporting-services, reportbuilder3.0

我的报告中有以下案例：

应收款：`RunningValue(Fields!Receivable.Value,SUM,Nothing)`

生产：`code.SumLookup(LookupSet(Fields!Currency_Type.Value, Fields!Currency_Type1.Value,Fields!Gross_Premium_Amount.Value, "DataSet2"))`

Rec/Prod：应收/生产。

```
Public Function SumLookup(ByVal items As Object()) As Decimal
    If items Is Nothing Then
        Return Nothing
    End If

    Dim suma As Decimal = New Decimal()
    Dim ct as Integer = New Integer()
    suma = 0
    ct = 0
    For Each item As Object In items
        suma += Convert.ToDecimal(item)
        ct += 1
    Next

    If (ct = 0) Then return 0 else return suma 
End Function 
```

问题在于 Rec/Prod，如果 prod = 0 我收到错误。

我试图提出以下条件：

```
IIF(code.SumLookup(LookupSet(Fields!Currency_Type.Value, Fields!Currency_Type1.Value,Fields!Gross_Premium_Amount.Value, "DataSet2"))=0,0,RunningValue(Fields!Receivable.Value,SUM,Nothing)/(code.SumLookup(LookupSet(Fields!Currency_Type.Value, Fields!Currency_Type1.Value,Fields!Gross_Premium_Amount.Value, "DataSet2")))) 
```

但是因为在错误的情况下，我正在调用 code.SumLookup 以获得重新获取 0 的值以用于生产，因此我得到了 Rec/Prod 的错误。

我如何才能按时调用 code.sumlookup 并将其值保存到变量中，这样我就不需要在每次需要检查值时调用它。

或者如果有任何其他解决方案，请告知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:55:55.010

我会尝试在报告中添加一个文本框并将其值设置为您的生产表达式。如果您将文本框命名为“Production”，则可以使用语法 ReportItems!Production.Value 引用该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:13:32.230

我确实尝试将文本框添加到报告中并将其值设置为您的生产表达式。我将文本框命名为“Production”，并使用语法 ReportItems!Production.Value 来引用该值，但它也给出了相同的错误。

我找到的解决方案如下：

对于以下函数，报表生成器将评估函数的所有部分。这意味着即使您的函数考虑了“如果 prod=0”，它仍然会继续执行 Rec/Prod 评估等错误。请尝试这个公式，额外的 'IF' 允许函数无错误地评估。

```
IIF(code.SumLookup(LookupSet(Fields!Currency_Type.Value, Fields!Currency_Type1.Value,Fields!Gross_Premium_Amount.Value, "DataSet2"))=0,0,RunningValue(Fields!Receivable.Value,SUM,Nothing)/IIF(code.SumLookup(LookupSet(Fields!Currency_Type.Value, Fields!Currency_Type1.Value,Fields!Gross_Premium_Amount.Value, "DataSet2"))=0,1, code.SumLookup(LookupSet(Fields!Currency_Type.Value, Fields!Currency_Type1.Value,Fields!Gross_Premium_Amount.Value, "DataSet2")))) 
```

# mysql - 如何优化 MySQL 数据库/查询

> ID：13230629
> 
> 赞同：1
> 
> 时间：2012-11-05T10:54:41.810
> 
> 标签：mysql, sql, optimization, database-indexes

嗨，我希望我能在如何优化我的数据库方面得到一些帮助，这样不需要一年。我知道要加快速度，我需要添加索引，但我不确定我应该在什么上添加它们。

这是我数据库中的三个表：

```
CREATE TABLE IF NOT EXISTS `journeyPattern2` (
  `journeyPatternId` int(11) NOT NULL AUTO_INCREMENT,
  `serviceId` int(11) NOT NULL,
  `direction` enum('inbound','outbound') NOT NULL,
  PRIMARY KEY (`journeyPatternId`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `journeyPatternTimingLink2` (
  `journeyPatternTimingLinkId` int(11) NOT NULL AUTO_INCREMENT,
  `journeyPatternId` int(11) NOT NULL,
  `from` varchar(15) NOT NULL,
  `to` varchar(15) NOT NULL,
  `direction` enum('inbound','outbound') NOT NULL,
  `runTime` varchar(15) NOT NULL,
  PRIMARY KEY (`journeyPatternTimingLinkId`),
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;

CREATE TABLE IF NOT EXISTS `line` (
  `lineId` int(11) NOT NULL AUTO_INCREMENT,
  `serviceId` int(11) NOT NULL,
  `lineName` tinytext NOT NULL,
  PRIMARY KEY (`lineId`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;

CREATE TABLE IF NOT EXISTS `service` (
  `serviceId` int(11) NOT NULL AUTO_INCREMENT,
  `serviceCode` varchar(50) NOT NULL,
  `registeredOperatorRef` varchar(50) NOT NULL,
  `origin` tinytext NOT NULL,
  `destination` tinytext NOT NULL,
  PRIMARY KEY (`serviceId`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1; 
```

表 JourneyPattern2 包含约 33000 行，journeyPatternTimingLink2 包含约 1300 万行，线路和服务约 70000 行。

我要优化的查询如下

```
SELECT DISTINCT lineName,line.serviceId  FROM `journeyPatternTimingLink2` 
INNER JOIN journeyPattern2
ON journeyPattern2.journeyPatternId=journeyPatternTimingLink2.journeyPatternId
INNER JOIN line
ON journeyPattern2.serviceId = line.serviceId
WHERE `from` = '13006785E' 
```

我以前从未真正使用过这种大小的桌子，所以我不确定我是否一开始就正确加入。我还上传了我在 phpmyadmin 的查询上运行 EXPLAIN 的[屏幕截图](http://i.imgur.com/eTO4v.png)，但我不确定如何解释结果，因此将不胜感激。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:48:07.953

您必须在下面提到的列上添加一些*外键*或*索引：*

1.  `jouurneyPatternId`在列上添加引用from `journeyPattern2`to`journeyPatternTimingLink2`
2.  `serviceId`在列上添加引用from `service`to`journeyPattern2`
3.  `serviceId`在列上添加引用from `service`to`line`

`from`在表中的列上添加索引`journeyPatternTimingLink2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:06:20.657

您应该为这些字段添加一些索引 -

*   JourneyPatternTimingLink2.journeyPatternId
*   JourneyPattern2.serviceId
*   line.serviceId
*   JourneyPatternTimingLink2.`from`

这些是在 JOIN-ON 子句和 WHERE 条件中使用的索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:30:11.327

最重要的索引应该是 on `journeyPatternTimingLink2.from`，因为它在您的 where 子句中，并且比所有其他表的总和多两个数量级。

您也可以考虑对所有表使用 InnoDB。从[优化概述](http://dev.mysql.com/doc/refman/5.5/en/optimize-overview.html)：

> **笔记**
> 
> 在 MySQL 5.5 及更高版本中，InnoDB 是新表的默认存储引擎。在实践中，高级 InnoDB 性能特性意味着 InnoDB 表通常优于简单的 MyISAM 表，尤其是对于繁忙的数据库。

# asp.net - Visual Studio 2010：强制语法高亮/智能感知特定文件

> ID：13230631
> 
> 赞同：0
> 
> 时间：2012-11-05T10:54:49.183
> 
> 标签：asp.net, visual-studio, visual-studio-2012, syntax-highlighting, intellisense

在 Web 应用程序中，我有一些动态**js**文件，扩展名为**aspx ；**我会在编辑时受益于 javascript 的语法突出显示/智能感知支持，但 Visual Studio 不会将该文件识别为 javascript。是否有某种方法可以强制 Visual Studio 使用自定义“编辑体验”来威胁文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-04T12:09:12.983

我正在使用与您正在做的事情类似的方法。我正在使用 Visual Studio 2013，我可以通过在未执行的代码块中添加 <script> 标记来欺骗它：

```
<%@ page language="C#" autoeventwireup="false" codefile="Script.aspx.cs" EnableViewState="false" inherits="Script" StyleSheetTheme="" %>

<% if (false){ %> <script type="text/javascript"> <% }%>

... Javascript goes here

<% if(false){ %> </script> <% }%> 
```

# php - magento - 可配置产品上的自定义属性显示

> ID：13230633
> 
> 赞同：1
> 
> 时间：2012-11-05T10:54:56.570
> 
> 标签：php, magento

我正在尝试改变可定制产品在前端的显示方式。而不是通过这样的下拉列表过滤属性：

![落下](../Images/dc8ada669a40ae9a870d6d7462e995ed.png)

我想通过一个单选按钮来做，像这样：

![电台列表](../Images/a69646071a76b6110916aa14b5df8cc9.png)

不幸的是，在 js/varien/product.js 中，下拉列表中充满了 JS。正确产品的购物车更新也必须在此 JS 文件中。有谁知道是否可以在不破坏购物车更新的情况下修改此显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:10:25.393

检查以下链接。

[Incho可配置产品下拉修改](http://inchoo.net/ecommerce/magento/configurable-product-modification-in-magento/)

[Magento 线程](http://www.magentocommerce.com/boards/viewthread/10396/)

# jquery - 如何使用 document.body

> ID：13230635
> 
> 赞同：-3
> 
> 时间：2012-11-05T10:54:59.337
> 
> 标签：jquery, html

我想将 .body 与 div 一起使用。
前 - 我有一个 div - **“mydiv”**
我想使用*(“mydiv”).body*就像*document.body*
任何人都可以在这里帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:58:51.247

`document.body`是一种访问文档`<body>`元素的方法。

A`<div>`不能包含`<body>`元素，因此尝试通过一个元素是没有意义的。

你可以找到a在里面的`<body>`元素`<div>`[`parents('body')`](http://api.jquery.com/parents/)

您可以修改 a 的内容，`<div>`就像`jQuery('#myDiv')...`您可以修改 body 的内容一样`jQuery(document.body)...`。

* * *

更新以回应评论：

加载到 an中的文档`<iframe>`是*不同的文档*。要访问其 DOM，您必须访问 iframe 并在 iframe 中获取文档（*然后*您可以访问其正文）。

```
jQuery('iframe#myIframe').contents().find('body') 
```

这*受*[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)的约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:56:22.597

如果要设置 mydiv 的 html，请尝试：-

```
$('#mydiv').html('your new text'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:12:36.950

`document.body`是指向[`<body>`](https://developer.mozilla.org/en-US/docs/DOM/document.body)DOM 中标记的指针。[`document.getElementById('mydiv')`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)您可以使用or，jquery 方式获得指向您的 div 的类似指针[`$("#mydiv")`](http://api.jquery.com/id-selector/)（假设 mydiv 是 div 的 ID）。稍后您可能会获取/设置其内部 html ( [`document.getElementById('mydiv').innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)or [`$("#mydiv").html()`](http://api.jquery.com/html/)) 或使用可用方法 (如[`element.children`](https://developer.mozilla.org/en-US/docs/DOM/Element.children)/ [`jQuery.children`](http://api.jquery.com/children/), [`element.appendChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)/ [`jQuery.append`](http://api.jquery.com/append/), [`element.attachEvent`](http://www.javascripter.net/faq/addeventlistenerattachevent.htm)/ [`jQuery.bind`or`jQuery.on`](http://api.jquery.com/on/) ) 执行某些操作。只需查看可用的方法并使用您需要的方法。

看看一些关于 JS 的书。假设您通过简单的 google 请求找到的任何一本书都可以帮助您从不问这样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:59:09.723

您能否指定要访问该元素的内容`myDiv`？
如果你想访问它的内容，你可以使用

```
$("#mydiv").html() 
```

# iphone - 多个摄像头视图显示相同的摄像头馈送

> ID：13230637
> 
> 赞同：1
> 
> 时间：2012-11-05T10:55:04.637
> 
> 标签：iphone, objective-c, ios, ios4

我想在一个屏幕上显示多个相机视图。但是当我创建 AVSession 或 imagepicker 的两个对象时，一个抓取相机，另一个显示空白屏幕。有什么办法可以显示多个摄像机视图显示相同的提要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:03:48.777

如果要显示同一提要的多个视图，则需要一个`AVSession`带有`AVCaptureVideoDataOutput`.

和这里描述的差不多：

[http://developer.apple.com/library/ios/#qa/qa1702/_index.html](http://developer.apple.com/library/ios/#qa/qa1702/_index.html)

在处理每个视频帧时，您将`UIImageView`在`CALayer`处理`captureOutput:didOutputSampleBuffer:fromConnection:`. 这样，您可以获得相同提要的多个渲染。

有关详细信息，请参阅[AVCaptureVideoDataOutput 类参考](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureVideoDataOutput_Class/Reference/Reference.html "AVCaptureVideoDataOutput 类参考")。还可以查看几乎所有使用`AVCaptureVideoDataOutput`并简单调整的示例代码`captureOutput:didOutputSampleBuffer:fromConnection:`。

# r - 如何在 lm 对象上仅获取特定的摘要行

> ID：13230640
> 
> 赞同：4
> 
> 时间：2012-11-05T10:55:15.383
> 
> 标签：r, summary, lm

这个问题来自我设法解决的更简单的问题。所以这是我原来的问题。

在我的数据中，我有很多类别，但我对估计所有类别的系数不感兴趣，我只是想检验一个假设，即类别没有区别。调用`summary`我的对象会产生我的报告不需要的大部分信息。

```
set.seed(42)
dat <- data.frame(cat=factor(sample(1:10, 100, replace=T)), y=rnorm(100))
l1 <- lm(y~cat-1, data=dat)
summary(l1) 
```

如何仅从 call to 中提取最后一行`summary(l1)`？

在这种特殊情况下，我可以只使用`anova`函数

```
anova(l1) 
```

并且只获得了我需要的信息，只是格式与`summary(l1)`生成的不同。

如果我对某个对象有某种摘要，而我只想提取其中的特定部分，`summary(object)`该怎么办？例如，如何`R`只打印 call 行`summary(l1)`？

ps 我知道`summary(l1)$fstatistic`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:02:49.623

尝试使用`str`探索。例如，看看

```
str(summary(l1)) 
```

其输出包括

```
$ fstatistic   : Named num [1:3] 1.32 10 90 
```

那你可以试试

```
summary(l1)$fstatistic

#   value     numdf     dendf 
#1.323275 10.000000 90.000000 
```

p 值有点小技巧。阅读[这篇文章](http://tolstoy.newcastle.edu.au/R/e2/help/07/08/23280.html)以获取更多信息，但这里有一个解决方案：

```
anova(l1)$"Pr(>F)"[1]
# [1] 0.2303172 
```

...不漂亮，但它似乎工作！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T11:17:36.033

好的，我在字面上的心情，但 using`capture.output`将返回评估对象的字符表示。例如，使用您的`l1`对象：

```
l1Out <- capture.output(summary(l1))
grep("^F-st", l1Out, value = TRUE)
# [1] "F-statistic: 1.323 on 10 and 90 DF,  p-value: 0.2303 " 
```

但是请注意，这不是输出的*最后一行*：

```
tail(l1Out, 1)
# [1] "" 
```

而对于摘要对象的很多组件，还有更好的方法来提取信息，比如@seancarmody 写的

```
l1$call
# lm(formula = y ~ cat - 1, data = dat) 
```

# c# - 如何使用来自 sqlserver 的 C# 在 xaml 中绑定数据

> ID：13230647
> 
> 赞同：2
> 
> 时间：2012-11-05T10:55:41.957
> 
> 标签：c#, wpf, xaml

如何在 xaml 中绑定数据？我正在使用以下逻辑：

```
SqlConnection conn = new SqlConnection("Data Source=mahendra;Initial Catalog=Win8App;User ID=sa;Password=*******");
conn.Open();
SqlCommand cmd = new SqlCommand("select * from tbl_Registration", conn);
SqlDataAdapter sda = new SqlDataAdapter(cmd);
DataSet ds = new DataSet();
DataTable dt = new DataTable();
sda.Fill(dt);
cmd.ExecuteNonQuery();      
dataGrid1.ItemsSource = dt.DefaultView;
conn.Close(); 
```

我的基本需求是显示与 gridview 相同的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:18:59.310

使用一些 ORM 软件而不是直接使用 SqlConnection/SqlCommand 是有意义的，顺便说一下，这些软件不会在您的代码中处理。考虑阅读这篇文章： http: [//msdn.microsoft.com/en-us/library/ee340709.aspx](http://msdn.microsoft.com/en-us/library/ee340709.aspx)，有一个使用实体框架在 WPF 中进行数据绑定的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:16:29.490

您不必执行命令。DataAdapter 为您完成（在“填充”方法中）。要显示结果，您可以使用 DataTable 作为源，并在 DataGrid 中将 Autopopulate 列设置为 true。我认为您不需要数据集。

# internet-explorer - ie9中tinymce中的光标

> ID：13230648
> 
> 赞同：1
> 
> 时间：2012-11-05T10:55:45.043
> 
> 标签：internet-explorer, tinymce

我应用 tinymce 的 textarea 有 id：testTiny。

我有这个事件：

```
ed.onKeyUp.add(function (ed, e) {
    if ($.browser.msie) {
                $($('#testTiny_ifr').contents()).find('body#tinymce')[0].innerText = $($('#testTiny_ifr').contents()).find('body#tinymce')[0].innerText.replace('something', '');
                ed.updatedSelectionBookmark = ed.selection.getBookmark(1);
            }
}); 
```

但我的光标总是转到文本区域的开头。这很烦人。有没有办法解决它？

我试过：

```
ed.selection.select(ed.dom.select('span#caret_pos_holder_ie')[0]);
ed.dom.remove(ed.dom.select('span#caret_pos_holder_ie')[0]); 
```

并且在视觉上设置了光标，但是当我开始输入时，什么也没有发生。我需要单击光标，然后我的字母将在键入后开始显示。

# vb.net - 如何使用 VSTO 捕获 MSword 中的按键事件？

> ID：13230652
> 
> 赞同：1
> 
> 时间：2012-11-05T10:55:58.690
> 
> 标签：vb.net, vsto, office-interop

我是 VSTO VB.Net 编程的新手。我正在开发一个单词应用程序级别的插件并想捕获按键事件。我尝试了各种挂钩代码，但没有一个有效。我想使用应用程序级挂钩`WH_KEYBOARD`而不是`WH_KEYBOARD_LL`. 我尝试过的以下代码在它停止后仅捕获一个键击。此外，我不明白在哪里设置击键陷阱。我将如何使用以下内容来处理关键事件。

```
Public Event KeyDown As KeyEventHandler

Public Event KeyPress As KeyPressEventHandler

Public Event KeyUp As KeyEventHandler 
```

我正在使用的代码是

```
Imports System.ComponentModel

Imports System.Windows.Forms

Imports System.Runtime.InteropServices

Public Class KeyBoardHook
    Inherits Component
    Dim PredictString As String

#Region "     keyboardHook"
    Private Declare Auto Function LoadLibrary Lib "kernel32" (ByVal lpFileName As String) As IntPtr
    Private Declare Function UnhookWindowsHookEx Lib "user32" (ByVal hhk As IntPtr) As Boolean
    Private Declare Function SetWindowsHookEx Lib "user32" Alias "SetWindowsHookExA" (ByVal idHook As Integer, _
    ByVal lpfn As KeyboardProc, ByVal hmod As IntPtr, ByVal dwThreadId As Integer) As IntPtr
    Private Delegate Function KeyboardProc(ByVal Code As Integer, ByVal wParam As Integer, ByRef lParam As KBDLLHOOKSTRUCT) As IntPtr
    Private Declare Function CallNextHookEx Lib "user32" (ByVal hHook As IntPtr, ByVal nCode As Integer, ByVal wParam As Integer, ByRef lParam As KBDLLHOOKSTRUCT) As IntPtr

    Private Structure KBDLLHOOKSTRUCT
        Public vkCode As Integer
        Public scanCode As Integer
        Public flags As Integer
        Public time As Integer
        Public dwExtraInfo As Integer
    End Structure

    'Keyboard Constants
    Private Const HC_ACTION As Integer = 0
    Private Const WM_KEYDOWN As Integer = &H100
    Private Const WM_KEYUP As Integer = &H101
    Private Const WM_SYSKEYDOWN As Integer = &H104
    Private Const WM_SYSKEYUP As Integer = &H105

    Private Const WH_KEYBOARD As Integer = 2
    Public hKeyboardHook As IntPtr

    Public Event KeyDown As KeyEventHandler
    Public Event KeyPress As KeyPressEventHandler
    Public Event KeyUp As KeyEventHandler

    Private Declare Function GetAsyncKeyState Lib "user32" (ByVal vKey As Integer) As Integer
    Private Declare Function GetKeyState Lib "user32" (ByVal nVirtKey As Integer) As Integer

    Private Const VK_ALT As Integer = &H12
    Private Const VK_CONTROL As Integer = &H11
    Private Const VK_SHIFT As Integer = 16

    <MarshalAs(UnmanagedType.FunctionPtr)> Private callback As KeyboardProc

    Public Sub HookKeyboard()
        callback = New KeyboardProc(AddressOf KeyboardCallback)
        Dim hInstance As IntPtr = LoadLibrary("User32")
        hKeyboardHook = SetWindowsHookEx(WH_KEYBOARD, callback, hInstance, 0)
        CheckHooked()
    End Sub

    Private Function KeyboardCallback(ByVal Code As Integer, ByVal wParam As Integer, ByRef lParam As KBDLLHOOKSTRUCT) As IntPtr
        Dim xy As System.Drawing.Point = Cursor.Position()
        Try
            If (Code = HC_ACTION Or Code = 3) Then
                Dim CapsLock As Boolean = GetKeyState(Keys.CapsLock) = 1
                Dim shifting As Boolean = False
                Dim modifiers As Keys
                If GetAsyncKeyState(VK_CONTROL) <> 0 Then
                    modifiers = modifiers Or Keys.Control
                End If
                If GetAsyncKeyState(VK_SHIFT) <> 0 Then
                    modifiers = modifiers Or Keys.Shift
                    shifting = True
                End If
                If GetAsyncKeyState(VK_ALT) <> 0 Then
                    modifiers = modifiers Or Keys.Alt
                End If
                Static lastKeys As Keys
                Select Case wParam
                    Case WM_KEYDOWN, WM_SYSKEYDOWN
                        RaiseEvent KeyDown(Me, New KeyEventArgs(DirectCast(Asc(Chr(lParam.vkCode)), Keys) Or modifiers))
                        If lastKeys <> (DirectCast(Asc(Chr(lParam.vkCode)), Keys) Or modifiers) Then
                            lastKeys = (DirectCast(Asc(Chr(lParam.vkCode)), Keys) Or modifiers)
                            If CapsLock AndAlso shifting Then
                                RaiseEvent KeyPress(Me, New KeyPressEventArgs(Char.ToLower(Chr(lParam.vkCode))))
                            ElseIf Not CapsLock AndAlso shifting Then
                                RaiseEvent KeyPress(Me, New KeyPressEventArgs(Char.ToUpper(Chr(lParam.vkCode))))
                            ElseIf Not shifting Then
                                If CapsLock Then
                                    RaiseEvent KeyPress(Me, New KeyPressEventArgs(Char.ToUpper(Chr(lParam.vkCode))))
                                Else
                                    RaiseEvent KeyPress(Me, New KeyPressEventArgs(Char.ToLower(Chr(lParam.vkCode))))
                                End If
                            End If
                        End If
                    Case WM_KEYUP, WM_SYSKEYUP
                        If CapsLock AndAlso shifting Then
                            RaiseEvent KeyUp(Me, New KeyEventArgs(DirectCast(Asc(Chr(lParam.vkCode)), Keys) Or modifiers))
                        ElseIf Not CapsLock AndAlso shifting Then
                            RaiseEvent KeyUp(Me, New KeyEventArgs(DirectCast(Asc(Chr(lParam.vkCode)), Keys) Or modifiers))
                        ElseIf Not shifting Then
                            If CapsLock Then
                                RaiseEvent KeyUp(Me, New KeyEventArgs(DirectCast(Asc(Chr(lParam.vkCode)), Keys) Or modifiers))
                            Else
                                RaiseEvent KeyUp(Me, New KeyEventArgs(DirectCast(Asc(Chr(lParam.vkCode)), Keys) Or modifiers))
                            End If
                        End If
                        lastKeys = Nothing
                End Select
            End If

            MsgBox("Keypressed is -> " & lParam.vkCode)
            Return CallNextHookEx(hKeyboardHook, Code, wParam, lParam)
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End Function

    Private Function keyboardHooked() As Boolean
        Return hKeyboardHook <> IntPtr.Zero
    End Function

    Public Sub UnhookKeyboard()
        If keyboardHooked() Then
            UnhookWindowsHookEx(hKeyboardHook)
        End If
    End Sub
#End Region
    Private Sub CheckHooked()
        If keyboardHooked() Then
            MsgBox("Keyboard hooked")
        Else
            MsgBox("Keyboard hook failed: " & Err.LastDllError)
        End If
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:50:54.043

您的问题可能与以下内容重复：

*   [如何从 Word 2010 插件（用 C# 开发）中获取“KeyPress”事件？](https://stackoverflow.com/questions/8120199/how-to-get-the-keypress-event-from-a-word-2010-addin-developed-in-c)
*   [如何在 MS word Keypress 上引发事件](https://stackoverflow.com/questions/13052123/how-to-raise-an-event-on-ms-word-keypress)
*   [使用 C# 捕获 MS Word 的 keydown 事件](https://stackoverflow.com/questions/13000645/capturing-keydown-event-of-ms-word-using-c-sharp)

...但是，答案仍然是一样的：*你根本不能:)*

在[我](https://stackoverflow.com/a/13034275/700926)对上面列出的最后一个问题的回答中，我更详细地解释了这背后的原因，并且还涵盖了涉及该[`WindowSelectionChange`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.applicationevents4_event.windowselectionchange%28v=office.14%29.aspx)事件的可能替代解决方案。

# qt - 发射和插槽订单执行

> ID：13230660
> 
> 赞同：4
> 
> 时间：2012-11-05T10:56:11.693
> 
> 标签：qt, signals

一个线程做一个`emit signal1();`

第二个线程`emit signal2();`在第一个线程发送其信号之后执行一个（在两个线程上的发出调用之前锁定了相同的互斥锁，我记录了它，我可以在我的日志中看到第一个线程在第二个线程之前获得锁）

第一个线程和第二个线程或不是 GUI 线程。

是否有任何保证 signal1 的 slot 会在 signal2 的 slot 之前被调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T23:14:10.590

由于发射器和接收器对象在不同的​​线程中运行，插槽不会同步执行：Qt 默认使用排队连接而不是直接连接。但是，您可以在连接时使用阻塞队列连接强制同步执行（另请参见[http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)以了解不同连接类型的描述）信号和插槽。

但是阻塞队列连接是有代价的：发射器线程被阻塞，直到所有连接的槽都被执行，这不一定是一个好主意。但是，如果您想使用非阻塞连接，则执行顺序取决于执行插槽的对象。

需要考虑的重要一点是每个 QThread 都有自己的事件队列。这意味着只保证给定线程的槽的执行顺序。这意味着您必须考虑以下情况：

*   signal1的slot和signal2的slot被定义在QObject的同一个线程中：在这种情况下，你可以确定slots是按照预期的顺序执行的，因为它们是由同一个事件队列触发的
*   两个插槽都在不同的线程中运行：在这里您无法控制执行顺序，因为信号被发布到 2 个独立的事件队列。如果是这种情况，您必须使用互斥锁或等待条件（或使用阻塞连接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:16:55.077

我不确定我是否理解正确，但这可能会对您有所帮助：

> 当一个信号发出时，连接到它的槽通常会立即执行，就像一个普通的函数调用一样。

来自[http://doc.qt.io/qt-5/signalsandslots.html](http://doc.qt.io/qt-5/signalsandslots.html)

因此，可以将调用 emit() 视为调用任何其他函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:21:39.677

`emit`只是语法糖，看看元对象编译器（moc）生成的.cpp。

因此，`emit signal1();`编译为`signal1();`，并且您的问题的答案是肯定的，但是您当然不能保证 signal1() 执行在 signal2() 调用之前结束。

# android - 在android的listview中以升序或降序对非NULL日期和null Date最后显示进行排序？

> ID：13230663
> 
> 赞同：0
> 
> 时间：2012-11-05T10:56:24.837
> 
> 标签：android, sorting, arraylist

我有arraylist，所有数据nulldate和date都添加到一个数组列表中。我在listview中显示所有数据。但我的问题是我首先得到nulldate，最后得到available date，我想在可用日期之前清空日期数据。我想对可用日期和空日期数据进行排序，不进行排序，只在添加中列出视图。请帮助我....!!!!!!!!!!!!

```
public class Approval extends Activity {
    protected static final All_Approval_data_dto All_Approval_data_dto = null;

    @Override
    public void onBackPressed() {
        super.onBackPressed();
        finish();
        list.clear();
    }

    private String assosiatetoken;
    ArrayList<All_Approval_data_dto> list = new ArrayList<All_Approval_data_dto>();
    ArrayList<All_Approval_Key_dto> alist = new ArrayList<All_Approval_Key_dto>();
    ArrayList<String> catState = new ArrayList<String>();
    ArrayList<String> uniCatState = new ArrayList<String>();
    ArrayList<ArrayList<All_Approval_data_dto>> masterState = new ArrayList<ArrayList<All_Approval_data_dto>>();
    private String req_id;
    ListView lv;
    Button back;
    ExpAdapter1 expAdapter;
    private Spinner spndata;
    String[] reqspinner = { "Request Date", "Last Update", "Submitter",
            "Owner", "State" };
    ArrayAdapter<String> adapter;
    private ExpandableListView exlistView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.approval);
        assosiatetoken = MyApplication.getToken();
        alist = DBAdpter.recursUserData(assosiatetoken);
        for (int i = 0; i < alist.size(); i++) {
            req_id = alist.get(i).requestId;
            list = DBAdpter.approvalUserData(assosiatetoken, req_id);

        }

        // setState();
        new doinbackground(this).execute();
        spndata = (Spinner) findViewById(R.id.list_all_quize);

        adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, reqspinner);
        spndata.setAdapter(adapter);
        lv = (ListView) findViewById(R.id.listapprovaldata);
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> a, View v, int position,
                    long id) {
                Intent edit = new Intent(Approval.this, Approval_webview.class);
                // edit.putExtra("Cat_url", url_link);

                startActivity(edit);
            }
        });
        exlistView = (ExpandableListView) findViewById(R.id.ExpList);
        spndata.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {

                switch (position) {
                case 0:
                    lv.setVisibility(View.VISIBLE);
                    exlistView.setVisibility(View.GONE);
                    Collections.sort(list, byDate);
                    for (int i = 0; i < list.size(); i++) {
                        Log.v("log_tag", "Data " + list.get(i).lastModifiedDate);
                        if (list.get(i).lastModifiedDate != null) {

                            Log.v("log_tag", "sorting "
                                    + list.get(i).lastModifiedDate);
                            lv.setAdapter(new MyListAdapter(
                                    getApplicationContext(), list));

                        }

                    }

                    break;
                case 1:
                    lv.setVisibility(View.VISIBLE);
                    exlistView.setVisibility(View.GONE);
                    Collections.sort(list, byDate1);
                    for (int i = 0; i < list.size(); i++) {
                        if (list.get(i).state != null) {
                            lv.setAdapter(new MyListAdapter(
                                    getApplicationContext(), list));
                        }
                    }
                    break;
                case 2:

                    break;

                case 3:

                    break;

                default:
                    break;
                }

            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub
            }

        });

    }

    static final Comparator<All_Approval_data_dto> byDate = new Comparator<All_Approval_data_dto>() {
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");

        @SuppressWarnings("unused")
        public int compare(All_Approval_data_dto ord1,
                All_Approval_data_dto ord2) {
            java.util.Date d1 = null;
            java.util.Date d2 = null;
            try {

                if (d1 == null) {
                    return (d2 == null) ? 0 : -1;
                } else if (d2 == null) {
                    return 1;
                }
                d1 = sdf.parse(ord1.lastModifiedDate);
                d2 = sdf.parse(ord2.lastModifiedDate);
            } catch (java.text.ParseException e) {
                // TODO Auto-generated catch block`
                e.printStackTrace();
            }
            // return (d1.compareTo(d2) > 0 ? 1 : -1);
            return (d1.getTime() > d2.getTime() ? -1 : 1); // descending
        }

    };

    /*
     * static final Comparator<AnalysisDto> byRatio = new
     * Comparator<AnalysisDto>() {
     * 
     * 
     * public int compare(Date date1, Date date2) { return
     * (date1.compareTo(date2)>0 ? 1 : -1); } };
     */
    static final Comparator<All_Approval_data_dto> byDate1 = new Comparator<All_Approval_data_dto>() {
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");

        @SuppressWarnings("unused")
        public int compare(All_Approval_data_dto ord1,
                All_Approval_data_dto ord2) {
            java.util.Date d1 = null;
            java.util.Date d2 = null;
            try {

                if (d1 == null) {
                    return (d2 == null) ? 0 : -1;
                } else if (d2 == null) {
                    return 1;
                }
                d1 = sdf.parse(ord1.submitDate);
                d2 = sdf.parse(ord2.submitDate);

            } catch (java.text.ParseException e) {
                // TODO Auto-generated catch block`
                e.printStackTrace();
            }
            // return (d1.compareTo(d2) > 0 ? 1 : -1);
            return (d1.getTime() > d2.getTime() ? -1 : 1); // descending
            // return (d1.getTime() > d2.getTime() ? 1 : -1); //ascending
        }
    };

    class doinbackground extends AsyncTask<Void, Void, Void> {
        ProgressDialog pd;
        private Context ctx;

        public doinbackground(Context c) {
            ctx = c;
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pd = new ProgressDialog(ctx);
            pd.setMessage("Loading...");
            pd.show();

        }

        @Override
        protected Void doInBackground(Void... params) {
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            pd.cancel();

        }

    }

    public class MyListAdapter extends BaseAdapter {
        private ArrayList<All_Approval_data_dto> list;

        public MyListAdapter(Context mContext,
                ArrayList<All_Approval_data_dto> list) {
            this.list = list;
        }

        public int getCount() {
            return list.size();
        }

        public All_Approval_data_dto getItem(int position) {
            return list.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflator = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
            convertView = inflator.inflate(R.layout.custom_approval_data, null);
            TextView req_id = (TextView) convertView.findViewById(R.id.req_txt);
            TextView date = (TextView) convertView.findViewById(R.id.date_txt);
            TextView owner = (TextView) convertView
                    .findViewById(R.id.owner_txt);
            TextView state = (TextView) convertView
                    .findViewById(R.id.state_txt);
            req_id.setText(list.get(position).requestId + " - "
                    + list.get(position).title);
            date.setText(list.get(position).lastModifiedDate + " - "
                    + list.get(position).submitDate);
            owner.setText(list.get(position).submitter);
            state.setText(list.get(position).state);
            return convertView;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:26:09.013

用你的数据试试这个，并按升序或降序进行管理

[Java数组降序排序？](https://stackoverflow.com/questions/1694751/java-array-sort-descending)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:15:41.637

用这个替换你的 try/catch 块

```
 try {

            if (ord1 == null) {
                return (ord2 == null) ? 0 : 1;
            } else if (ord2 == null) {
                return -1;
            }
            d1 = sdf.parse(ord1.lastModifiedDate);
            d2 = sdf.parse(ord2.lastModifiedDate);
        } catch (java.text.ParseException e) {
            // TODO Auto-generated catch block`
            e.printStackTrace();
        } 
```

# command - 如何在 vimrc 中禁用 vim 命令以保护 vim

> ID：13230672
> 
> 赞同：0
> 
> 时间：2012-11-05T10:57:00.013
> 
> 标签：command, vim

我正在尝试禁用 vim 中的 'r' 和 'o' 命令，这样使用它的人就无法从 vim 中打开其他文件。我尝试使用`cmap r <Nop>`and `cmap o <Nop>`，它可以工作但有不良副作用...这两个字母永远不能在 vim 命令行中使用，也不能在搜索某些东西时使用...如果您尝试搜索单词“word”搜索行显示：`/wd`。

那么还有另一种方法可以禁用从 vimrc 打开文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:09:39.373

You can launch Vim with a flag:

```
$ vim -R (readonly)
$ vim -Z (restricted)
$ vim -m (no writing)
$ vim -M (no text modification) 
```

But none of those will block `:e` or `:r` or any of the myriad of similar commands. And… the `~/.vimrc` could probably be edited with `nano` or whatever to remove any eventual command anyway.

What about completely sandboxing Vim or its user?

What about explaining why you would want that?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T11:40:02.327

如果你*真的*想保护 Vim（而不仅仅是提供某些不允许的特性的表面外观），你必须从源代码中删除这些特性并编译（和测试！）一个有限版本的 Vim。（或者也许你可以使用一个操作系统包装器来沙箱化 Vim 进程并过滤某些系统调用，但我不知道这样的事情。）

可以绕过任何 Vimscript 障碍：您可以通过 撤消重新映射，可以通过在正确的时间`:cunmap`按下来停止 Vimscript 中任何更精细的保护。`<C-c>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:52:45.787

如果您想允许编辑具有 root 权限的特定文件，而不允许命令或编辑其他文件（正如您现在在单独的评论中指出的那样），您为什么不按照以下所述执行此操作`man 8 sudoedit`：

> 1.  临时副本由要编辑的文件制成，所有者设置为调用用户。
>     
>     
> 2.  运行策略指定的编辑器来编辑临时文件。sudoers 策略使用 SUDO_EDITOR、VISUAL 和 EDITOR 环境变量（按此顺序）。如果没有设置 SUDO_EDITOR、VISUAL 或 EDITOR，则使用编辑器 sudoers(5) 选项中列出的第一个程序。
>     
>     
> 3.  如果它们已被修改，则将临时文件复制回其原始位置并删除临时版本。

在用户上下文而不是根上下文中启动编辑器要安全得多。（另外，用户获取的是他的 Vim 设置，而不是来自 root 帐户的未维护的设置！）只是编辑过的临时文件的同步返回必须使用 root 权限完成；在 的帮助下`sudo`，所有这些都可以在几行 shell 脚本中实现。

# html - 什么是 CSS 聚合？

> ID：13230675
> 
> 赞同：1
> 
> 时间：2012-11-05T10:57:21.910
> 
> 标签：html, css

我对 CSS 聚合感到困惑。谁能描述一下。

当我用谷歌搜索时，它会将我重定向到一些 drupal 的东西。

CSS Aggregation 是否处理 Sprites、css 内容的压缩？

请指导我。

谢谢，伊斯瓦尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:59:55.353

这只是将多个 CSS 文件组合成一个文件的过程。这通常与最小化 CSS 文件相结合。因此，您的页面只包含一个非常小的 CSS 文件，而不是许多大的 CSS 文件，从而加快了下载速度。

这通常是一个单独的过程，因为对于开发来说，拥有多个 CSS 文件更容易，每个文件都有特定的用途，并且每个都有丰富的注释。在部署到生产服务器期间，可以将此开发 CSS 聚合到单个文件中。

当然，您的服务器端模板必须足够聪明才能理解这一点。如果您的标题模板中有 CSS 引用，则很难替换它们。更好的解决方案是拥有一组文件，以便在旅途中包含并生成 HTML。这样，您的生产网站可以包含聚合的 CSS，而开发网站可以使用单独的 CSS。在它们之间切换只是一个配置设置。

类似的过程可用于 Javascript。

# iis - iis错误500.19，页面相关配置数据无效

> ID：13230683
> 
> 赞同：1
> 
> 时间：2012-11-05T10:57:40.327
> 
> 标签：iis

在我尝试访问我的主页时发布解决方案后，我收到以下错误。它在我的系统中本地工作，但是当我尝试发布它时，我收到以下错误。

![](../Images/a1c347ef88520fc65554035882517ae3.png)

请尽快回复，因为我现在处于危险之中

# mysql - 使用 deferend 名称两次获取结果

> ID：13230685
> 
> 赞同：0
> 
> 时间：2012-11-05T10:57:44.060
> 
> 标签：mysql, select, double, rename

我有 1 个表，其中包含名为 opentask 的任务：
列：id、title、description、expires、creator_id、creator_name、executer_id、executer_name、priority_id、status_id
1 个表，用户名为 user：
列：user_id、username
我想要的是创建一个查询 opentask 表中的所有列，其中 executer_id 将等于 user 表的 user_id 并且 creator_id 将再次等于 user_id。这造成了混乱，因为第一个相等排除了第二个。

因此，我需要以某种方式创建一个查询，其中我将包含执行者的用户名，其中包含“opentask.executer_id=user_user_id”之类的内容，同时我将再次包含创建者的用户名（作为不同的名称？）像“opentask.executer_id=user_user_id”这样的东西

所以我试试这个，当然我知道它缺少一些东西，你能帮忙吗？

> SELECT DISTINCT id, title, description, expires, creator_id, executer_id, oc_opentask.priority_id, oc_opentask.status_id, priority_name, status_name, user_id, username, (SELECT username FROM oc_opentask, oc_user WHERE oc_opentask.creator_id=oc_user.user_id) AS username2 FROM oc_opentask , oc_opentask_priority, oc_user, oc_opentask_status WHERE oc_opentask.priority_id=oc_opentask_priority.priority_id AND oc_opentask.executer_id=oc_user.user_id AND oc_opentask.status_id=oc_opentask_status.status_id ORDER BY oc_opentask.expires DESC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:07:07.940

使用不同的别名重新`JOIN`表`oc_user`两次，`creators`如下`executers`所示：

```
SELECT DISTINCT 
  t.*, 
  creators.user_name 'Creator name',
  executers.username 'Executor name', 
  tp.priority_name, 
  s.status_name
FROM oc_opentask t 
INNER JOIN oc_opentask_priority tp        ON t.priority_id = tp.priority_id
INNER JOIN oc_user              executers ON t.executer_id = executes.user_id
INNER JOIN oc_user              creators  ON t.creator_id  = creators.user_id
INNER JOIN oc_opentask_status   s         ON t.status_id   = s.status_id
ORDER BY t.expires DESC 
```

# java - 在 Rackspace for BlackBerry 上上传文件

> ID：13230693
> 
> 赞同：0
> 
> 时间：2012-11-05T10:58:12.270
> 
> 标签：java

我想在“机架空间云文件”上上传文件。有没有可用的api来做到这一点？或任何建议来实施此要求？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:52:35.853

Rackspace 的所有 API 文档都可以在[http://docs.rackspace.com](http://docs.rackspace.com)找到。

要为云文件上传文件，您需要先进行身份验证并获取令牌： [http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/POST_authenticate_v2.0_tokens_。 html](http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/POST_authenticate_v2.0_tokens_.html)

然后您需要使用该令牌来创建一个对象： [http ://docs.rackspace.com/files/api/v1/cf-devguide/content/Create_Update_Object-d1e1965.html](http://docs.rackspace.com/files/api/v1/cf-devguide/content/Create_Update_Object-d1e1965.html)

# php - JpGraph 饼图背景颜色

> ID：13230695
> 
> 赞同：1
> 
> 时间：2012-11-05T10:58:23.410
> 
> 标签：php, colors, jpgraph

我在 PHP 中使用 JpGraph。我可以为大多数图表设置背景颜色

`$graph->SetBackgroundGradient($bgcolor, $bgcolor, GRAD_HOR, BGRAD_MARGIN);`

但是如何为饼图设置背景颜色？

它是*最强大的 PHP 驱动图表*，但仍然没有`$graph->SetBackgroundColor($bgcolor)`功能。

溴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T06:47:58.950

你看过`SetMarginColor()`或`SetColor()`？

[http://jpgraph.net/download/manuals/classref/Graph.html#_GRAPH_SETMARGINCOLOR](http://jpgraph.net/download/manuals/classref/Graph.html#_GRAPH_SETMARGINCOLOR)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T14:08:23.153

```
<?php // content="text/plain; charset=utf-8"
require_once ('jpgraph/jpgraph.php');
require_once ('jpgraph/jpgraph_pie.php');
require_once ('jpgraph/jpgraph_pie3d.php');

// Some data
$data = array(
    array(80,18,15,17),
    array(35,28,6,34),
    array(10,28,10,5),
    array(22,22,10,17));

$piepos = array(0.2,0.4,0.65,0.28,0.25,0.75,0.8,0.75);
$titles = array('USA','Sweden','South America','Australia');

$n = count($piepos)/2;

// A new graph
$graph = new PieGraph(550,400,'auto');

// Specify margins since we put the image in the plot area
$graph->SetMargin(1,1,40,1);
$graph->SetMarginColor('navy');
$graph->SetShadow(false);

// Setup background
$graph->SetBackgroundImage('worldmap1.jpg',BGIMG_FILLPLOT);

// Setup title
$graph->title->Set("Pie plots with background image");
$graph->title->SetFont(FF_ARIAL,FS_BOLD,20);
$graph->title->SetColor('white');

$p = array();
// Create the plots
for( $i=0; $i < $n; ++$i ) {
    $d = "data$i";
    $p[] = new PiePlot3D($data[$i]);
}

// Position the four pies
for( $i=0; $i < $n; ++$i ) {
    $p[$i]->SetCenter($piepos[2*$i],$piepos[2*$i+1]);
}

// Set the titles
for( $i=0; $i < $n; ++$i ) {
    $p[$i]->title->Set($titles[$i]);
    $p[$i]->title->SetColor('white');
    $p[$i]->title->SetFont(FF_ARIAL,FS_BOLD,12);
}

// Label font and color setup
for( $i=0; $i < $n; ++$i ) {
    $p[$i]->value->SetFont(FF_ARIAL,FS_BOLD);
    $p[$i]->value->SetColor('white');
}

// Show the percetages for each slice
for( $i=0; $i < $n; ++$i ) {
    $p[$i]->value->Show();
}

// Label format
for( $i=0; $i < $n; ++$i ) {
    $p[$i]->value->SetFormat("%01.1f%%");
}

// Size of pie in fraction of the width of the graph
for( $i=0; $i < $n; ++$i ) {
    $p[$i]->SetSize(0.15);
}

// Format the border around each slice

for( $i=0; $i < $n; ++$i ) {
    $p[$i]->SetEdge(false);
    $p[$i]->ExplodeSlice(1);
}

// Use one legend for the whole graph
$p[0]->SetLegends(array("May","June","July","Aug"));
$graph->legend->Pos(0.05,0.35);
$graph->legend->SetShadow(false);

for( $i=0; $i < $n; ++$i ) {
    $graph->Add($p[$i]);
}

$graph->Stroke();
?> 
```

参考：http: [//jpgraph.net/download/manuals/chunkhtml/ch16.html](http://jpgraph.net/download/manuals/chunkhtml/ch16.html)

# r - 为不同的行组创建唯一标识符

> ID：13230696
> 
> 赞同：0
> 
> 时间：2012-11-05T10:58:23.930
> 
> 标签：r, data.table, sequences

我想对数据框中的某些行组合进行编号（按 ID 和时间排序）

```
tc <- textConnection('
id              time       end_yn   number
abc             10         0        1
abc             11         0        2
abc             12         1        3 
abc             13         0        1 
def             10         0        1
def             15         1        2
def             16         0        1
def             17         0        2
def             18         1        3
')

test <- read.table(tc, header=TRUE) 
```

目标是创建一个新列 (" `journey_nr`")，根据其所属的旅程为每一行提供一个唯一编号。旅程被定义为每行的序列，`id`直到`end_yn == 1`，如果`end_yn`从未变为 1，旅程也应该被编号（参见预期结果示例）。对于一个 ID ，只能`end_yn == 0`在行集合的末尾有旅程（如 id 3 的第 4 行所示）。因此，要么没有`end_yn == 1`发生该 ID，要么发生在`end_yn == 0`-journey 之前（参见`id == abc`示例）。

我知道如何使用`data.table`包进行编号，但我不知道要组合哪些列才能获得预期的结果。我`data.table`在 SO 上搜索了 -tag，但找不到类似的问题。

预期结果：

```
id              time       end_yn   number    journey_nr
abc             10         0        1         1
abc             11         0        2         1
abc             12         1        3         1
abc             13         0        1         2
def             10         0        1         3
def             15         1        2         3
def             16         0        1         4
def             17         0        2         4
def             18         1        3         4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:26:16.530

试试这个：

```
tc$journey <- cumsum(as.numeric(c(0, head(tc$end_yn, -1)) | c(0, diff(as.numeric(tc$id))))) + 1

tc
#    id time end_yn number journey
# 1 abc   10      0      1       1
# 2 abc   11      0      2       1
# 3 abc   12      1      3       1
# 4 abc   13      0      1       2
# 5 def   10      0      1       3
# 6 def   15      1      2       3
# 7 def   16      0      1       4
# 8 def   17      0      2       4
# 9 def   18      1      3       4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T12:06:17.767

另一个基本 R 答案：

```
test$journey <- cumsum(c(1,head(test$number,-1)) >= test$number) 
```

结果：

```
> test
   id time end_yn number journey
1 abc   10      0      1       1
2 abc   11      0      2       1
3 abc   12      1      3       1
4 abc   13      0      1       2
5 def   10      0      1       3
6 def   15      1      2       3
7 def   16      0      1       4
8 def   17      0      2       4
9 def   18      1      3       4 
```

# asp.net - 如何使用 Web 请求 GET 方法 asp.net 在 url 中传递值

> ID：13230699
> 
> 赞同：0
> 
> 时间：2012-11-05T10:58:44.650
> 
> 标签：asp.net, web-services

我是 .Net 和网络服务的新手..我喜欢通过 url 传递 id..如何做到这一点？无论是发布还是获取方法？指导我

```
string url = "http://XXXXX//"+id=22;

WebRequest request = WebRequest.Create(url);
request.Proxy.Credentials = new NetworkCredential(xxxxx);
request.Credentials = CredentialCache.DefaultCredentials;
//add properties
request.Method = "GET";
request.ContentType = "application/json";
//convert 
byte[] byteArray = Encoding.UTF8.GetBytes(data);
request.ContentLength = byteArray.Length;
//post data
Stream streamdata = request.GetRequestStream();
streamdata.Write(byteArray, 0, byteArray.Length);
streamdata.Close();
//response
WebResponse response = request.GetResponse();
// Get the stream containing content returned by the server.
Stream dataStream = response.GetResponseStream();
// Open the stream using a StreamReader for easy access.
StreamReader reader = new StreamReader(dataStream);
// Read the content.
string responseFromServer = reader.ReadToEnd();
// Clean up the streams and the response.
reader.Close();
response.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:09:28.387

If you just want to build the URL with parameters (ref: Query String) then you can simply do:

`string url = string.Format("http://www.google.com/?id={0}",22);`

[You can check this url, Passing variables between pages using QueryString at Code Project](http://www.codeproject.com/Articles/5876/Passing-variables-between-pages-using-QueryString)

# ruby-on-rails-3 - 从 DB rails 3 中选择收藏夹

> ID：13230702
> 
> 赞同：0
> 
> 时间：2012-11-05T10:58:51.193
> 
> 标签：ruby-on-rails-3

我有一个小应用程序，其中包含用户、食谱、配料和准备模型

一个用户有很多食谱，食谱属于用户，配料/准备属于食谱。

现在用户可以查看所有食谱，但我想要将特定食谱添加到收藏夹列表的选项。我是否需要设置一个新的数据库来保存它，然后通过关联进行链接，或者我是否可以在名为 fav 的配方模型中添加一个列？

我在这里寻找最佳实践，或者如果有人以前做过，并且可以提供任何建议，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:21:47.677

我会`favorited`在您的 UsersRecipe 表中添加一个布尔列。

然后，您可以在`User`模型中为此添加范围：

```
has_many :favorite_recipes, :through => :user_recipes, :class => Recipe, :conditions => ['user_recipes.favorited = ?',true] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:15:02.057

我认为您可以`has_may`像这样设置关联：

```
class User < ActiveRecord::Base

  has_many :favorite_recipes, foreign_key: "user_id", class_name: "Recipe", dependent: :destroy
end 
```

# c# - Javascript BigInt.Js 对于某些代码应该是等效的

> ID：13230705
> 
> 赞同：-1
> 
> 时间：2012-11-05T10:59:01.310
> 
> 标签：c#, javascript

[http://www.leemon.com/crypto/BigInt.js](http://www.leemon.com/crypto/BigInt.js)

我正在使用 leemon bigint.js 库

我要为[http://smart2.qred.fi/js/jknc.js编写一些 c# 等效类](http://smart2.qred.fi/js/jknc.js)

我很困惑我应该为这一行写什么 c#

```
 var bigInteger = new BigInt(convert); 
```

这样我就可以使我的 c# 类正确。

我要为此[http://www.jknc.eu/RFcalculator](http://www.jknc.eu/RFcalculator)编写 c# 类，这是需要用 c# [http://smart2.qred.fi/js/jknc.js](http://smart2.qred.fi/js/jknc.js)编写的 JS 文件，我写类但无法获得我通过创建者网站检查的写入结果。

我写了这个函数

```
 public string jknc_calculate_creditor_reference(string text)
    {
        //var bigInteger=new BigInt( convert_text_to_digits(text+'RF00') );     
        BigInteger biginteger = new BigInteger(Convert.ToInt16(convert_text_to_digits(text + "RF00")));
        //$('integer_calculate').innerhtml=biginteger.tostring();
        //var mod = bigint_mod(biginteger, new bigint(97));
        //var y = bigint_number(mod);

        //BigInteger big = new BigInteger(1222222);
        BigInteger mod;
        BigInteger.DivRem(biginteger, new BigInteger(97), out mod);

        var x = 98 - mod;
        var result = "";

        //$('x').innerhtml=x;
        //$('y').innerhtml=y;

        if (x < 10)
        {
            result = "0" + x;
        }
        else
        {
            result = Convert.ToString(x);
        }
        //$('result').innerhtml=result;
        var newstr = text.Replace(" ", ""); //remove white space
        string complete_result = "rf " + result + " " + format_string(newstr);
        return complete_result;
        //$('complete_result').innerhtml='rf '+result+ " "+format_string(newstr);
    } 
```

对于 JS 文件

```
function jknc_calculate_creditor_reference(text) {
    var bigInteger = new BigInt(convert_text_to_digits(text + 'RF00'));
    //$('integer_calculate').innerHTML=bigInteger.toString();
    var mod = bigint_mod(bigInteger, new BigInt(97));
    var y = bigint_number(mod);

    var x = 98 - y;
    var result = "";

    //$('x').innerHTML=x;
    //$('y').innerHTML=y;

    if (x < 10) {
        result = '0' + x;
    } else {
        result = x;
    }
    $('result').innerHTML = result;
    var newStr = text.replace(/\s/g, '');

    $('complete_result').innerHTML = 'RF ' + result + " " + format_string(newStr);
} 
```

并且有这个脚本的参考

```
http://www.onicos.com/staff/iz/amuse/javascript/expert/BigInt.txt 
```

但是我的函数没有给出正确的结果，因为我无法修复 BigInt js 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:55:55.827

至于 BigInt 类，有预制库。您将需要修改不匹配的算术 API。

.NET 4.0 添加对 System.Numerics.dllassembly 的引用以获取对 System.Numerics.BigInteger 的访问权限。

.NET 2.0 IntX 是一个任意精度整数库 [http://intx.codeplex.com/](http://intx.codeplex.com/)

# php - Tiny MCE如何获取标签属性？

> ID：13230707
> 
> 赞同：3
> 
> 时间：2012-11-05T10:59:03.510
> 
> 标签：php, editor, tinymce

我正在使用 TinyMCE 进行文本格式化。我有如下 HTML 代码：

```
<span class="ps_bonus_text_wide_t" style="font-family: Michroma;">
my text
</span> 
```

当我选择该文本并且`class="ps_bonus_text_wide_t"`我需要将其更改为

```
<div class="effect">
<span class="ps_bonus_text_wide_t" style="font-family: Michroma;">
my text
</span>
</div> 
```

我该如何验证`class="ps_bonus_text_wide_t"`？

我的插件代码是：

```
// Creates a new plugin class and a custom listbox
tinymce.create('tinymce.plugins.fonteffect', {
    createControl: function(n, cm) {
        switch (n) {
            case 'fonteffect':
                var mlb = cm.createListBox('fonteffect', {
                     title : 'Font effects',
                     onselect : function(v) {
                        // n.selection.setContent(v);                            
                         var ed=this.control_manager.editor;
                        ed.focus();
//to do something here

                     }
                });

                // Add some values to the list box
                mlb.add('anaglyph', 'anaglyph');
                mlb.add('brick-sign', 'brick-sign');
                mlb.add('canvas-print', 'canvas-print');
                mlb.add('crackle', 'crackle');
                mlb.add('decaying', 'decaying');
                mlb.add('destruction', 'destruction');                  
                // Return the new listbox instance
                return mlb;
        }

        return null;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:12:29.183

您将能够`ps_bonus_text_wide_t`使用此代码段检查课程

```
var node = ed.selection.getNode();

if (node.nodeNAme == "SPAN" && node.className == "ps_bonus_text_wide_t"){
  //do whatever you like here
} 
```

# php - 存储聊天消息和文件的最佳方式

> ID：13230708
> 
> 赞同：5
> 
> 时间：2012-11-05T10:59:08.630
> 
> 标签：php, doctrine, chat, storage, message

我想知道您对在数据库中存储聊天消息有何看法？

我需要能够将其他东西绑定到它们（如文件或联系人），并且使用数据库是我目前看到的最佳方式。

文件也有同样的问题，因为它们可以绑定到聊天消息，我也必须将它们存储在数据库中..

有成千上万的消息和文件，我想知道性能下降和数据库大小。

考虑到我将 PHP 与 MySQL/Doctrine 一起使用，你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:21:37.260

我认为只要您正确构建数据库，就可以在数据库中存储任何文本信息（名称、消息历史记录等）。我曾为大型网站（每天访问数公斤）和电信公司工作，这些公司将用户信息（包括流量统计）存储在数据库中，这些数据库已增长到数百 GB，并且应用程序运行良好。

但是对于像图像和文件这样的二进制信息，最好将它们存储在文件系统中，并且只将它们的路径存储在数据库中，因为从将数据库进程与读取多进程绑定的磁盘中读取它们会更便宜。兆字节文件。

正如我所说，做几件事很重要：

1.  正确构建信息 - 正确设计数据库非常重要，正确地将其划分为表格和表格，并牢记您的性能目标，因为这将构成您的应用程序和查询的基础。弄错了，你的查询会很慢。

2.  对与每个表相关的表引擎做出正确的决定。这是一个重要的步骤，因为它将极大地影响查询的性能。例如，MyISAM 在更新表时阻止对表的读取访问。对于像社交网络或新闻网站这样的 Web 应用程序来说，这将是一个问题，因为在许多情况下，您的用户基本上必须等待信息更新完成，然后才能看到生成的页面。

3.  创建适当的索引 - 对性能非常重要，尤其是对于具有快速增长的大型数据库的应用程序。

4.  随着数据的增长，衡量查询的性能并寻找改进方法 - 您总会发现必须消除的瓶颈，这是一个持续不断的过程。每个流行的 Web 应用程序都必须这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:01:06.730

我认为像 CouchDB 或 MongtoDB 这样的 NoSQL 数据库是一种选择。您还可以单独存储文件并通过已知文件名链接它们，但这取决于您的系统架构。

# batch-file - 批处理文件：替换功能字符

> ID：13230712
> 
> 赞同：1
> 
> 时间：2012-11-05T10:59:24.000
> 
> 标签：batch-file

我找到了一种从文件中删除文本的方法，例如：

```
set text=!text:^"~JP~"=! 
```

删除文本`~JP~`。这很好用，只要没有要删除的功能字符。现在我有了字符 →（如右侧箭头所示，ASCII 码 22，十六进制 1A）-

```
set text=!text:^"→  "=! 
```

导致错误（和一些哔声）。该行分为

```
set text=!text:^"
"=! 
```

有没有办法做到这一点？就像将文本与十六进制代码 22 1A 09 22 (22=", 1A=→, 09=tab) 进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:26:09.053

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:36:14.807

你甚至可以替换 0x1A 之类的字符，但是这个字符有点问题，因为它会在解析批处理文件时转换为换行符。

但是使用内容为 0x1A 的变量将起作用。

# java - 在`中使用`L`的想法是什么 ` 在类名之后？

> ID：13230715
> 
> 赞同：0
> 
> 时间：2012-11-05T10:59:47.410
> 
> 标签：java, generics

这是我为 Egit 找到的代码

我对`PlotCommitList<L extends PlotLane>`.

1.  用什么术语来形容它？
2.  它对编译器意味着什么？

`public class PlotCommitList<L extends PlotLane> extends RevCommitList<PlotCommit<L>> {`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:09:07.873

<> 运算符用于指定通用模板中的类。

图像一个通用的“列表”。在 Java 1.4 之前，“列表”只能包含泛型`Object`。如果您想确保仅将`String`s 保留在列表中，则必须使用大量强制转换和辅助方法，这使得代码几乎不可读。

Java 5 引入了泛型，这解决了这个问题——您可以创建一个模板类“列表”，并将用作参数或返回值的类参数化。

此外，您可以使用`<L extends ...>`和`<L super ...>`来限制模板使用的类的范围，将多个类作为参数`<class1,class2>`并随意组合`<class1,class2<class3>>`。

[http://www.javacodegeeks.com/2011/04/java-generics-quick-tutorial.html](http://www.javacodegeeks.com/2011/04/java-generics-quick-tutorial.html)有一个很好的教程

# knockout.js - 循环和重新排序 Observable 数组

> ID：13230716
> 
> 赞同：0
> 
> 时间：2012-11-05T10:59:50.070
> 
> 标签：knockout.js

我正在使用以下函数根据称为 sort 的整数值对 observableArray 进行排序：

```
model.sortColumns = function (a, b) {
  return a.Order > b.Order ? 1 : -1;
};

model.sortedColumns = ko.dependentObservable(function () {
  return this.reportFields.slice().sort(this.sortColumns);
}, model); 
```

我正在使用 foreach 在屏幕上显示它们并且一切正常，但我现在需要做的是在 foreach 中提供更改顺序的能力。我打算用点击事件放置简单的向上/向下箭头图标，但我不知道如何去改变它，以前有没有人做过这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:11:08.497

这是一篇关于排序和排序的精彩文章：[http ://www.knockmeout.net/2011/05/dragging-dropping-and-sorting-with.html](http://www.knockmeout.net/2011/05/dragging-dropping-and-sorting-with.html)

在本文中，所有魔法都是通过使用自定义绑定完成的：

```
 ko.bindingHandlers.sortableList = {
      init: function(element, valueAccessor) {
          var list = valueAccessor();
          $(element).sortable({
              update: function(event, ui) {
                  //retrieve our actual data item
                  var item = ui.item.tmplItem().data;
                  //figure out its new position
                  var position = ko.utils.arrayIndexOf(ui.item.parent().children(), ui.item[0]);
                  //remove the item and add it back in the right spot
                  if (position >= 0) {
                      list.remove(item);
                      list.splice(position, 0, item);
                  }
              }
          });
      }
  };

<div data-bind="foreach: sortedColumns, sortableList: sortedColumns"></div> 
```

# java - 如何找到我的 java jdk 文件夹并编辑路径变量 - 集成 maven

> ID：13230718
> 
> 赞同：4
> 
> 时间：2012-11-05T11:00:01.543
> 
> 标签：java, windows, maven, path, windows-vista

我有 Windows Vista，我正在尝试安装 maven 并对其进行测试。但我意识到我有 JAVA 的问题，我必须先解决。

我开始->运行->cmd

我在命令行中输入，

```
C:\>mvn clean 
```

我收到以下错误

**错误：在您的环境中找不到 JAVA_HOME。请在您的环境中设置 JAVA_HOME 变量以匹配您的 Java 安装位置**

所以我说：让我们为 Java 设置 PATH，我做到了：

开始->控制面板->系统->高级系统设置->环境变量->系统变量

编辑 PATH 变量

```
C:\Program Files\Java\jdk1.6.0_32;C:\apache-maven-3.0.4\bin; 
```

但是当我这样做时，我得到了**同样的错误**：

```
C:\>mvn clean 
```

然后我在cmd提示符下输入：

```
 C:\>java -version
  java version "1.7.0_07"
  Java(TM) SE Runtime Environment (build 1.7.0_07-b11) 
```

我意识到正在运行的 Java 版本**不在**“C:\Program Files\Java”目录下

我仅有的 JDK 是：jdk1.6.0_29 jdk1.6.0_32

然后我做了 Run->cmd

```
C:\>where java
C:\Windows\System32\java.exe 
```

*（最近我下载了 IDE Eclipse 和 IDE IntelliJ，我不知道这些应用程序是否带有 JDK）。*

我在哪里可以找到我在 Windows 中安装的 JDK 并在环境变量中设置路径？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T11:07:03.747

去

```
 Start->Control Panel->System->Advanced System Settings->Environment Variable->user variables 
```

点击新按钮

给

```
 variable name : JAVA_HOME
     variable value: C:\Program Files\Java\jdk1.6.0_32 
```

这样你设置你的java home并尝试

在对环境变量进行任何更改后，还要确保采用新的命令提示符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:15:38.607

Eclipse 捆绑了一个 JDK，我相信你需要一个单独的 JDK 来运行 maven。

我的环境变量看起来像这样。JAVA_HOME = C:\Program Files\Java\jdk1.6.0_33 路径 = （附在最后）;%JAVA_HOME%\bin;C:\Program Files\Spring Tools Suite\apache-maven-3.0.3\bin

这一切正常，但正如您所见，我通过安装 STS 获得了 Maven。它只是一个与 maven 捆绑在一起的日食发行版（除其他外）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:30:04.510

您还可以从命令行提示符设置 java home。但这仅在您的会话中有效，并且在您关闭命令行会话后它将消失。希望能帮助到你。

```
set JAVA_HOME=C:\Program Files\Java\jdk1.6.0_33 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-11T14:09:02.897

游戏迟到了，但在提升的命令提示符下运行它：

```
setx /M JAVA_HOME "path_to_Java" 
```

这将为您的*机器*而不是用户设置路径。删除`/M`以使其仅为用户帐户设置。

[SS64](http://ss64.com/nt/setx.html)（和）的指南`setx /?`说你应该`/M`在最后进行开关，但我个人的经验是它并不总是在最后起作用。

# linux - linux gettimeofday()的微秒时间是怎么得到的，它的精度是多少？

> ID：13230719
> 
> 赞同：24
> 
> 时间：2012-11-05T11:00:04.277
> 
> 标签：linux, time, linux-kernel

挂钟时间通常由系统 RTC 提供。这主要只提供毫秒范围的时间，并且通常具有 10-20 毫秒的粒度。然而，通常[报告](https://stackoverflow.com/a/4776133/1504523)[gettimeofday()](http://linux.die.net/man/2/gettimeofday)的分辨率/粒度在几微秒范围内。我假设微秒粒度必须取自不同的来源。

**gettimeofday() 的微秒级分辨率/粒度是如何实现的？**

当精确到毫秒的部分取自 RTC，而微秒取自不同的硬件时，就会出现两个源的定相问题。这两个来源必须以`synchronized`某种方式存在。

**这两个源之间的同步/定相是如何完成的？**

**编辑：**根据我在 amdn 提供的链接中阅读的内容，特别是以下[英特尔](http://software.intel.com/en-us/articles/best-timing-function-for-measuring-ipp-api-timing/)链接，我将在此处添加一个问题：

**是否`gettimeofday()`提供微秒级的分辨率/粒度？**

* * *

**编辑 2：用更多阅读结果总结 amdns[答案：](https://stackoverflow.com/a/13231654/1504523)**

Linux 仅在启动时使用实时时钟 (RTC) 与更高分辨率的计数器同步，例如时间戳计数器 (TSC)。启动后`gettimeofday()`返回一个时间，该时间完全基于 TSC 值和此计数器的频率。`frequency`通过将系统时间与外部时间源进行比较来校正/校准TSC 的初始值。调整由[adjtimex()](http://linux.die.net/man/2/adjtimex)函数完成/配置。内核运行锁相环以确保时间结果是单调一致的。

这样可以说`gettimeofday()`具有微秒级的分辨率。考虑到更现代的时间戳计数器在 GHz 范围内运行，可获得的分辨率可能在纳秒范围内。因此，这个有意义的评论

```
/**
407  * do_gettimeofday - Returns the time of day in a timeval
408  * @tv:         pointer to the timeval to be set
409  *
410  * NOTE: Users should be converted to using getnstimeofday()
411  */ 
```

可以在[Linux/kernel/time/timekeeping.c](http://lxr.free-electrons.com/source/kernel/time/timekeeping.c)中找到。这表明以后可能会有更高分辨率的功能可用。现在`getnstimeofday()`仅在内核空间中可用。

但是，查看所有涉及的代码以使其正确，显示出很多关于不确定性的评论。有可能获得微秒级的分辨率。该函数`gettimeofday()`甚至可以在微秒范围内显示粒度。**但是：***`drift`*由于无法准确校正 TSC 频率，因此对其准确性存在严重疑问。此外，在 Linux 中处理此问题的代码的复杂性暗示着要正确处理它实际上太难了。这是特别的，但不仅仅是由于 Linux 应该在其上运行的大量硬件平台造成的。

**结果：** `gettimeofday()`返回具有微秒粒度的单调时间，但它提供的时间几乎永远不会`one microsecond`与任何其他时间源相匹配。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T11:57:13.090

**gettimeofday() 的微秒级分辨率/粒度是如何实现的？**

Linux 在许多不同的硬件平台上运行，因此具体情况有所不同。在现代 x86 平台上，Linux 使用[时间戳计数器](http://en.wikipedia.org/wiki/Time_Stamp_Counter)，也称为`TSC`，它由运行在 133.33 MHz 的多个晶体振荡器驱动。晶体振荡器为处理器提供参考时钟，处理器将其乘以某个倍数 - 例如，在 2.93 GHz 处理器上，倍数是 22。`TSC`过去是不可靠的时间来源，因为实现会在处理器停止时停止计数器休眠，或者因为倍数不是恒定的，因为处理器移动乘数以改变[性能状态](http://en.wikipedia.org/wiki/Advanced_Configuration_and_Power_Interface)或在变热时减速。现代 x86 处理器提供了一个`TSC`那是恒定的，不变的，不间断的。在这些处理器上，这`TSC`是一个出色的高分辨率时钟，Linux 内核在启动时确定初始近似频率。为 gettimeofday() 系统调用提供微秒分辨率，`TSC`为 clock_gettime() 系统调用提供纳秒分辨率。

**这种同步是如何实现的？**

你的第一个问题是关于Linux时钟如何提供高分辨率的，第二个问题是关于同步的，这是[precision和accuracy](http://en.wikipedia.org/wiki/Accuracy_and_precision)之间的区别。大多数系统都有一个由电池备份的时钟，以在系统断电时保持一天中的时间。正如您可能期望的那样，这个时钟没有很高的准确度或精度，但它会在系统启动时“在球场上”获得一天中的时间。为了获得准确性，大多数系统使用可选组件从网络上的外部源获取时间。两种常见的是

1.  [网络时间协议](http://en.wikipedia.org/wiki/Network_Time_Protocol)
2.  [精确时间协议](http://en.wikipedia.org/wiki/Precision_Time_Protocol)

这些协议定义了网络上的主时钟（或由原子钟提供的时钟层），然后测量网络延迟以估计与主时钟的偏移。一旦确定了与主设备的偏移量，系统时钟`disciplined`将保持其准确。这可以通过

1.  步进时钟（相对较大、突然且不频繁的时间调整），或
2.  `Slewing`时钟（定义为在给定时间段内通过缓慢增加或减少频率来调整时钟频率的程度）

内核提供了[adjtimex 系统调用](http://linux.die.net/man/2/adjtimex)以允许时钟约束。有关现代 Intel 多核处理器如何在内核之间保持 TSC 同步的详细信息，请参阅[CPU TSC 获取操作，尤其是在多核-多处理器环境中](https://stackoverflow.com/questions/10921210/cpu-tsc-fetch-operation-especially-in-multicore-multi-processor-environment)。

时钟调整的相关内核源文件是[kernel/time.c](http://lxr.free-electrons.com/source/kernel/time.c)和[kernel/time/timekeeping.c](http://lxr.free-electrons.com/source/kernel/time/timekeeping.c)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:03:29.233

Linux 启动时，它使用硬件时钟初始化软件时钟。请参阅 Linux 如何在[时钟 HOWTO中](http://tldp.org/HOWTO/Clock.html)[跟踪时间](http://tldp.org/HOWTO/Clock-2.html)一章。

# opengl - 将整数纹理附加到帧缓冲区

> ID：13230721
> 
> 赞同：4
> 
> 时间：2012-11-05T11:00:26.630
> 
> 标签：opengl, graphics, textures, framebuffer, render-to-texture

我正在尝试将具有内部格式的纹理附加`GL_R32UI`到帧缓冲区，以用作 ID 缓冲区。但是，即使它是唯一的附件，也会`glCheckFramebufferStatus`不断出现。`GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT`

这对我来说很奇怪，因为 OpenGL 4.2 规范似乎声明这`GL_R32UI`是 OpenGL 实现在附加到帧缓冲区时必须支持的格式之一。我怀疑这是驱动程序错误。我是对的，还是谁能告诉我我忽略了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T11:24:55.820

我解决了我自己的问题。

```
void glTexImage2D(GLenum target,
    GLint level,
    GLint internalFormat,
    GLsizei width,
    GLsizei height,
    GLint border,
    GLenum format,
    GLenum type,
    const GLvoid * data); 
```

在调用`glTexImage2D`创建纹理时，第 7 个参数“format”需要对应于第 3 个“internalFormat”参数，即使您为 data 参数传递了一个空指针。如果您的内部格式是一个完整的格式，您需要提供类似的格式`GL_RED_INTEGER`，而不是类似的格式`GL_RED`。

# axapta - 如何将产品子类型转换为产品主子类型？

> ID：13230723
> 
> 赞同：2
> 
> 时间：2012-11-05T11:00:34.077
> 
> 标签：axapta, product, dynamics-ax-2012

我在 AX 2012 中工作，在产品信息管理列表页面中，有没有办法从产品子类型转换为产品主子类型？

发布产品/产品主子类型的过程是什么？

首先创建产品->然后将其移至产品主服务器->然后发布它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:45:02.350

产品子类型一旦创建就无法更改。

它们在不同的表 EcoResProductMaster 和 EcoResDistinctProduct 中创建。

这是创建和发布产品过程的一个很好的指南

[http://ramdynamicsax.wordpress.com/2011/11/17/creation-of-item-or-product-and-product-master-in-dynamics-ax-2012/](http://ramdynamicsax.wordpress.com/2011/11/17/creation-of-item-or-product-and-product-master-in-dynamics-ax-2012/)

# magento - Magento：如何重置可配置产品的可配置属性？

> ID：13230724
> 
> 赞同：0
> 
> 时间：2012-11-05T11:00:35.467
> 
> 标签：magento

在创建可配置产品时，有关于什么是可配置的选项，例如尺寸、颜色或尺寸和颜色（对于典型的服装产品）。

我的一些产品已设置为同时具有尺寸和颜色变体，但是，我需要它们只能按尺寸进行配置。我只想要页面上的尺寸下拉菜单，而不是尺寸和颜色的两个下拉菜单。

我如何“重置”错误的可配置产品，如刚刚导入的那样，即我可以选择尺寸/颜色选项？我可以从 phpmyadmin 中的这些产品中删除一些标志吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:57:42.650

我通过删除与我需要重置的产品的 product_id 对应的 catalog_product_super_attribute 中的条目解决了这个问题。

在那之后，我能够重建产品，使它们只有一个“尺寸”下拉菜单，而不是“尺寸”和“颜色”（这是我想要的）。

为了找到我需要“调查”的产品，我运行了这个查询：

```
SELECT product_id, COUNT( product_id ) AS cnt
FROM catalog_product_super_attribute
GROUP BY product_id
HAVING COUNT( * ) >1
ORDER BY product_id 
```

# c++ - 传递给此函数的参数的类型是什么

> ID：13230730
> 
> 赞同：1
> 
> 时间：2012-11-05T11:01:19.187
> 
> 标签：c++, parameters

我在 C++ 的库中找到了一个函数，但我无法分辨传入的参数的类型，所以我的知识和理解是完整的，我知道这对我有好处。

对我来说，它们看起来像函数指针数组，但没有 *，我的假设是否正确？

```
template < typename _Tp , size_t _Nm > 
inline void swap ( _Tp ( & __a ) [ _Nm ] , _Tp ( & __b ) [ _Nm ] ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:03:07.407

两个参数的类型相同。它们是对长度数组的引用，`_Nm`其中每个元素都是 type `_Tp`。两个参数中的元素类型和数组长度必须匹配。考虑以下示例中这些参数的类型与 arrRef 的类型之间的相似性：

```
int arr1[] = {1, 2, 3, 4, 5};
int (&arrRef)[5] = arr1; // arrRef is a reference to arr1 
```

例如，如果我们有以下内容：

```
int arr1[] = {1, 2, 3, 4, 5};
int arr2[] = {6, 7, 8, 9, 10};
swap(arr1, arr2); 
```

`swap`我们用签名实例化一个版本`void swap(int (&)[5], int (&)[5])`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:03:01.947

它们是对对象类型`_Tp`和大小数组的引用`_Nm`。

读取 C 或 C++ 类型的正确方法是声明反映使用。 `_Tp ( & __a ) [ _Nm ]`表示给定一个`__a`该类型的变量，您可以编写`(__a)[n]`、使用`0 <= n < _Nm`和获取类型的对象`_Tp`。类型修饰符的存在与`&`修饰符类似`*`；声明为的变量`_Tp ( * __a ) [ _Nm ]`将是指向数组的指针，因为您可以编写`(*__a)[n]`.

# ios6 - 使用 NSAttributedString iOS 自定义 heightForRowAtIndexPath (CGSize sizeWithFont)

> ID：13230731
> 
> 赞同：4
> 
> 时间：2012-11-05T11:01:20.193
> 
> 标签：ios6, uitableview, ios7

我有一个表格视图，其中我的单元格高度是根据它所代表的文本动态定义的。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //getting my text for this cell, the row etc ...
    ...
    //here is the part interesting us
    NSAttributedString* theText = [myTextForThisCell objectAtIndex:indexPath.row];

    NSInteger labelWidth = self.tableView.bounds.size.width-HORIZONTAL_CELL_PADDING;

    CGSize textSize = [theText sizeWithFont:[UIFont systemFontOfSize:customFontSize] constrainedToSize:CGSizeMake(labelWidth, MAXFLOAT) lineBreakMode:NSLineBreakByWordWrapping];

    return textSize.height+VERTICAL_CELL_PADDING;
} 
```

好的，现在我的问题。tableview 是搜索操作的结果，它在扫描 plist 文件后显示包含给定字符串的行。

到现在为止就是这样。但是现在有了 iOS 6 和 NSAttributedString 可以轻松地加粗部分字符串，我决定加粗搜索词。

它正在工作，它加粗了我想要的单词，但现在我不再能够计算单元格高度，因为 sizeWithFont 要求一个 NSString。由于粗体需要更宽的宽度，我不能简单地用没有属性的字符串计算单元格高度。

我只是被困在这里。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-16T10:44:37.580

事实上，我只需要阅读 NSAttributedText 的苹果文档。

就我而言，我必须将最后两行代码替换为

```
CGRect rectSize = [theText boundingRectWithSize:CGSizeMake(labelWidth, MAXFLOAT) 
                         options:NSStringDrawingUsesLineFragmentOrigin context:NULL];

return rectSize.size.height+VERTICAL_CELL_PADDING; 
```

**跟进 iOS 7**

我一直在努力使用属性文本在 iOS7 中进行这项工作。

苹果文档说

> 在 iOS 7 及更高版本中，此方法返回小数大小（在返回的 CGRect 的大小组件中）；要使用返回的大小来调整视图大小，您必须使用 ceil 函数将其值提高到最接近的更高整数。

哪种方式显然不适合我！对我来说，解决方案是将 +1 添加到高度的上限。这可能是苹果的一个错误，但对我来说，现在一切都像在 iOS6 中一样工作。

```
CGRect rectSize = [theAttributedText boundingRectWithSize:CGSizeMake(labelWidth, MAXFLOAT) 
                          options:NSStringDrawingUsesLineFragmentOrigin context:NULL];

return ceil(rectSize.size.height) + 1 + VERTICAL_CELL_PADDING; 
```

# java - 在 setVisible 之后创建 JComboBox 会使 JButton 消失

> ID：13230733
> 
> 赞同：1
> 
> 时间：2012-11-05T11:01:29.363
> 
> 标签：java, swing

在创建 JFrame 并添加一些组件时，我注意到如果在设置 JFrame 可见和添加按钮之间创建 JComboBox 的实例，则按钮会消失。

我首先创建一个 JFrame：

```
JFrame frame = new JFrame();
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setSize(200, 200); 
```

然后我添加设置可见的框架并添加一个 JButton：

```
frame.setVisible(true);
frame.add(new JButton("text")); 
```

它按预期工作并显示一个大按钮：

![带有按钮的 JFrame](../Images/88ef8f2dd24364ea5ce1d1aeabe7c976.png)

**但是**，如果我在这些行之间创建一个 JComboBox 实例：

```
frame.setVisible(true);
new JComboBox();
frame.add(new JButton("text")); 
```

现在按钮不见了..

![没有按钮的 JFrame](../Images/47c9176e779fcc36113bd61215a9f7c2.png)

我希望没有任何变化，因为我只是创建一个实例而不将它分配给任何东西。
**为什么按钮会消失？**

此外，如果移到`new JComboBox();`上方`frame.setVisible(true);`，按钮将再次可见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:07:17.860

Once you display the UI, it should not be modified from any thread except of the EDT. In the first case you had some "luck", and it worked. In the second case probably the time of creation of the JComboBox was long enough to prevent you from modifying the UI from a thread that is not the EDT.

What you should do, is invoking that code on the EDT:

```
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(200, 200);
        frame.add(new JButton("text"));
        frame.setVisible(true);
    }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:20:00.993

我发现问题出在`setSize();`您`setVisible(true);`在`JFrame`. 所以答案很简单，调用`setSize();`并`setVisible(true)`在代码末尾（或者更好的是，调用`pack();`而不是`setSize()`），一切都应该正常工作：

```
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;

public class Fnatte {

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        new JComboBox();
        frame.add(new JButton("Text"));
        //frame.setSize(200,200);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:28:41.793

来自 add() 方法的 JavaDoc：

```
If the container has already been
displayed, the hierarchy must be 
validated thereafter in order to
display the added component. 
```

改变：

```
frame.setVisible(true);
new JComboBox();
frame.add(new JButton("text")); 
```

至：

```
frame.setVisible(true);
new JComboBox();
frame.add(new JButton("text"));
frame.validate(); 
```

我认为您遇到的奇怪之处与其说是“new JComboBox();”的添加。但事实上调用“frame.add(new JButton("text"));” 在调用“frame.setVisible(true);”之后 无需调用“frame.validate();”即可工作。

# matplotlib - 为什么会出现菜单栏的延迟渲染（wxpython、matplotlib）？

> ID：13230735
> 
> 赞同：0
> 
> 时间：2012-11-05T11:01:39.477
> 
> 标签：matplotlib, wxpython

这是我在网上找到的代码的链接（在 wxpython 中嵌入 matplotlib）： [http ://eli.thegreenplace.net/files/prog_code/wx_mpl_bars.py.txt](http://eli.thegreenplace.net/files/prog_code/wx_mpl_bars.py.txt)

我的问题是有人知道为什么菜单栏会延迟出现吗？有没有办法摆脱这种延迟？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:47:04.093

阅读代码，问题可能是`self.draw_figure()`这里的罪魁祸首。wx 需要渲染帧，但只能在清除主线程（运行 wx）后立即执行此操作。我的猜测是，这`self.draw_figure()`是一个计算量大的方法调用并阻止了菜单栏的绘制。尝试使用`wx.CallAfter(self.draw_figure)`, 来释放线程。在所有其他渲染完成后，将绘制图形。

[PS：我没有安装 wx 2.8（matplotlib 需要），所以我无法验证这是否完全有效。]

# html - 将 div 对齐到另一个 div 的底部

> ID：13230738
> 
> 赞同：0
> 
> 时间：2012-11-05T11:01:50.153
> 
> 标签：html, css

我有一些 div 漂浮在另一个 div 中，我想将它们对齐到底部。这是 HTML：

```
<div class="magazinebookcase">        

    <div class="books">
    <a title="Mag1" style="height:286px;width:16px;" href="">
    </a>
    </div>
    <div class="books">
    <a title="Mag2" style="height:258px;width:48px;" href="">
    </a>
    </div>
    <div class="books">
    <a title="Mag3" style="height:252px;width:38px;" href="">
    </a>
    </div>
    <div class="books">
    <a title="Mag4" style="height:258px;width:50px;" href="">
    </a>
    </div>       
    <div class="books">
    <a title="Mag5" style="height:284px;width:14px;" href="">
    </a>
    </div>

    <div class="clearfix"></div>
</div> 
```

和CSS：

```
.magazinebookcase {
width: 100%;
padding: 3px;
vertical-align:bottom;

} 

.magazinebookcase .clearfix {
clear:both;
}

.magazinebookcase .books {
text-align:center;
float:left;
position: relative;
vertical-align:bottom;
}

.magazinebookcase a {
border: 1px solid #000;
display: block;
word-break: break-all;
}

.magazinebookcase a:hover {
background-color: #ccc;
} 
```

我尝试了很多方法，将位置从绝对位置更改为亲戚和其他东西，但我无法正确地做到这一点。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:17:35.370

您不应该在布局中使用表格。但是垂直对齐功能非常强大。你可以这样做：

```
display: table-cell;
vertical-align: bottom; 
```

我制作了一个[jsFiddle](http://jsfiddle.net/7vEdw/)来演示它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:05:04.840

CSS应该是这样的：

```
.left {
    display:block;
    position:relative;
    height:200px;
    float:left;
}

.bottom {
    position:absolute;
    bottom:0;
}

.clear {
    clear:both;
} 
```

HTML

```
<div class="left">
    <div class="bottom"></div>
</div>
<div class="left">
</div>
<div class="clear"></div> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-05T11:05:00.777

请改用表格。这是我的建议。在每个 td 上使用 valign:bottom。

# android - Android 应用程序通过电子邮件发送图像

> ID：13230739
> 
> 赞同：2
> 
> 时间：2012-11-05T11:01:51.893
> 
> 标签：android, android-camera, android-camera-intent

好的，我在学习 android 的时候有点不知所措。在最终开发出我的简单小应用程序之后，我正在尝试使用拥有原生应用程序的一些好处。

所以，项目一，制作一个可以通过电子邮件发送图像的页面（来自画廊或相机）

本质上它是通过电子邮件选择和发送的，但我什至不知道从哪里开始。

我发现了一些其他人正在询问的代码； [Android 应用拍摄/电子邮件照片](https://stackoverflow.com/questions/8231988/android-app-take-email-photo)

我试过这个，但是从 Eclipse 中得到了各种各样的错误，重新定位到**下载**的图片部分。

如果有人可以请看一下并建议我最好的方法来做到这一点，那将是惊人的。像往常一样为我的初学者愚蠢感到抱歉，但我想每个人都必须在某个地方学习

**这是我目前的 .JAVA**

```
public class Photos extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_photos);
    getActionBar().setDisplayHomeAsUpEnabled(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_photos, menu);
    return true;
} 
```

**这是我目前的 .XML**

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Please chose the options below to select and upload photos into the 
    DCC for the selected project..."
    tools:context=".Photos"
    android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:11:44.997

首先你应该做的是通过使用文件获取图像存储路径，

```
 File *photo = new File(Environment.getExternalStorageDirectory()+"/Android/data/"+getApplicationContext().getPackageName()+"/Fault", imagename+".png"); 
```

然后将该文件路径转换为`Uri`

```
Uri imageuri = Uri.fromFile(photo); 
```

最后使用您的电子邮件通过电子邮件发送图像`imageuri`

```
Intent send_report = new Intent(Intent.ACTION_SEND);
                                        send_report.putExtra(Intent.EXTRA_EMAIL, new String[]{ email_emailid}); 
                                        send_report.putExtra(Intent.EXTRA_SUBJECT, email_subject);
                                        send_report.putExtra(Intent.EXTRA_STREAM, imageuri);
                                        send_report.putExtra(Intent.EXTRA_TEXT, email_body);  
                                        send_report.setType("text/plain");
                                        send_report.setType("image/png");
                                        startActivityForResult(Intent.createChooser(send_report, "Choose an Email client"), 77); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:18:26.740

**首先获取您的图像：**

```
 // Get Image form mnt/sdcard/YOUR_FLODER/my_image.png    
    ImageView my_Image = (ImageView)findViewById(R.id.my_Image);    
    Imagepath="/sdcard/YOUR_FLODER/"+my_iamge+".png";
     bitmap = BitmapFactory.decodeFile(Imagepath); 
```

**获取邮件地址：**

```
// This Will fetch merchant's Email id from Deivce.
    Pattern emailPattern = Patterns.EMAIL_ADDRESS; // API level 8+

    AccountManager manager =(AccountManager)getSystemService(ACCOUNT_SERVICE);
    //Account[] accounts = AccountManager.get(getApplicationContext()).getAccounts();
    Account[] accounts = manager.getAccounts();

    for (Account account : accounts) 
    {
        if (emailPattern.matcher(account.name).matches()) 
        {
             possibleEmail = account.name;
        }
    } 
```

**发送点击事件：**

```
 Intent i = new Intent(android.content.Intent.ACTION_SEND);
        i.setType("image/png");
        i.putExtra(Intent.EXTRA_CC,new String[]{possibleEmail});  
        i.putExtra(android.content.Intent.EXTRA_SUBJECT, "Mail With Image attachment");
        startActivity(Intent.createChooser(i2, "Send Email...")); 
```

**最后的照片.java**

```
public class Photos extends Activity
{
     @Override
public void onCreate(Bundle savedInstanceState) 
{
     super.onCreate(savedInstanceState);
    setContentView(R.layout.Activity_Photos);

          // your image fetching code
          // fetch mail code 
          // write button click event 
               // put intent code in click event

    }
} 
```

**所以希望现在你得到完整的代码。**

# plugins - symfony2插件综合目录

> ID：13230743
> 
> 赞同：0
> 
> 时间：2012-11-05T11:02:10.560
> 
> 标签：plugins, symfony

有没有 symfony2 插件的综合网站，所以我们可以很容易地找到满足我们需求的工具——比如 Ruby on Rails（`rubytoolbox`和`rubygems`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:03:55.100

在 Symfony2 中，“插件”被称为“捆绑包”。您可以在网上找到它们，但一个很好的来源是[http://knpbundles.com](http://knpbundles.com)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:10:56.537

查询symfony 的[Packagist](https://packagist.org/) - 尽管您也可以在项目中使用非 symfony-strict 库。

# c# - 跨数据表集合的公共主键

> ID：13230744
> 
> 赞同：0
> 
> 时间：2012-11-05T11:02:10.783
> 
> 标签：c#, database-design, ado.net, datatable, database-normalization

我有一个类，我们称之为它`TableOwner`，它的一个字段是一个`DataTable`名称列（也是主键）和一个金额列。所以有一个主键列和第二个非主列。

`TableOwner`在我的程序中，我创建了一个实例集合。集合本质上是一个集合：逻辑上没有`TableOwner`' 的顺序，只关心每种存在多少。每个`DataTable`都填充了不同的数量值，但它们都具有相同的主键。

例如，imagine`TableOwner`用于存储银行账户上的数据。每个实例代表一个帐户，然后`DataTable`可能会记录帐户中每种货币的数量。对于每个帐户，该帐户中的美元、欧元或英镑的数量可能不同，但*对于每个帐户，都有这三种货币的数据，即使金额为 0（帐户中没有钱）或`null`（可能缺少数据） )* . 所以基本上我想要一个二维表或矩阵，但是我的类层次结构阻碍了我这样实现它。

处理这一切的明智方法是什么？我可以想到以下方法：

1）先做一个`DataColumn`，然后将它传递给所有新的实例，`TableOwner`用于他们自己`DataTable`的。缺点：如果我后来决定要从主键中删除一行（例如，用户决定“你知道吗，我不再关心欧元，转储所有数据并删除该列。”），我必须遍历整个集合并从每个`TableOwner`表中逐一删除该行。

2）使`DataTable`所有`TableOwner`实例都使用一个（也许使它成为一个静态字段）。该表将有许多列，而不是一个金额列，例如 Amount1、Amount2 等。每个`TableOwner`实例在初始化时都会创建自己的数量列，并记住它的名称以备后用——现在删除一行是一个基本的数据库操作。缺点：似乎不优雅和“错误”。

如您所见，两者都有缺点。有没有更好的办法？

如果问题非常基本或措辞奇怪，我深表歉意，因为我对数据库知之甚少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:08:01.030

您应该有一个包含所有者、货币和金额列的表

所以而不是

```
 Owner1 20$ £30 €40 
```

你有三个记录

```
 Owner | Currency | Amount
 Owner1  $          20
 Owner1  £          30
 Owner1  €          40 
```

（货币符号代表来自单独货币表的货币 ID）

如果一个人没有特定货币的金额，那么就没有个人和货币组合的记录。

这是[标准化过程的一部分](http://en.wikipedia.org/wiki/Database_normalization)

# sql - 如何从月份编号显示月份名称

> ID：13230750
> 
> 赞同：1
> 
> 时间：2012-11-05T11:02:42.103
> 
> 标签：sql, oracle, plsql

现在我处于一种状态，我只是显示月份名称和一些按月份编号分组的数据。有一个小问题。我需要从 Oracle 获取月份名称而不是月份编号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:08:10.920

try this:

```
SELECT TO_CHAR(TO_DATE(11, 'MM'), 'MONTH') FROM DUAL; 
```

**result:**

```
NOVEMBER 
```

# [SQL fiddle demo](http://www.sqlfiddle.com/#!4/d41d8/3896)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T09:43:35.613

This can be resolve your problem

```
SELECT TO_CHAR(TO_DATE(1, 'MM'), 'MON') FROM DUAL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:05:19.577

这个怎么样：

```
SELECT TO_CHAR(SYSDATE, 'Month') FROM DUAL; 
```

# sql - SPSS 连接数据库的语法

> ID：13230754
> 
> 赞同：2
> 
> 时间：2012-11-05T11:03:02.060
> 
> 标签：sql, syntax, db2, spss

我已使用连接向导成功连接到 SPSS 中的 IBM DB2 数据库。但是，我还没有找到使用 SPSS 语法执行此操作的工作方法。有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:16:36.733

通常您会通过以下语法访问它： `GET DATA /TYPE =`- 插入其中一种类型 -`ODBC,OLEDB,XLS,XLSX,XLSM,TXT` 无论您希望访问哪种类型，您也可以在 SPSS 语法编辑器中使用 SQL。这就是我从语法连接到我的数据库的方式： `GET DATA /TYPE=ODBC /CONNECT='DSN=MAVSQL;Description=SQL;UID=;APP=IBM SPSS Products: Statistics '+ 'Common;WSID=MAVNEW;DATABASE=Players;Trusted_Connection=Yes' /SQL='SELECT Id, Faction, Active, Level, Name, Allignment, CurQuest, '+ 'PrevQuest, DeathCount, LastDeath, LastLogon, Created, Class, RacAB, '+ 'Comments, Test, Age, RealName, Email FROM dbo.DSOL' /ASSUMEDSTRWIDTH=255. CACHE. EXECUTE. DATASET NAME DataSet1 WINDOW=FRONT.`

希望对您有所帮助，我知道我访问的数据库是 SQL 数据库，但也许您可以使用相同的方法来访问您的 IBM DB2 数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:41:05.187

除了粘贴数据库向导最后一个面板中显示的语法（包括连接字符串和与 GET DATA 命令一起使用的 SQL）之外，您还可以将最后一个面板中的查询保存为 spq 文件，然后在数据库中再次使用它向导通过在第一步中选择编辑查询。

# wxpython - 是否有任何谷歌代码的 python 包装器显示数值和饼图？

> ID：13230755
> 
> 赞同：1
> 
> 时间：2012-11-05T11:03:06.003
> 
> 标签：wxpython, pie-chart

我尝试过的所有包装器——pygooglecharts、pygocha——给出标签，但没有列出确切的百分比。谷歌图表列出了确切的百分比。任何机会我都可以在 Python 中获得它们，尤其是 wxPython！

# java - 本地化服务

> ID：13230756
> 
> 赞同：1
> 
> 时间：2012-11-05T11:03:06.330
> 
> 标签：java, soap, internationalization

我们在java中实现了soap服务，它将xml响应返回给soap客户端。目前我们只支持英语。我们希望支持所有语言。

我们还提供了肥皂客户端 API 来访问我们的服务。

因为我们希望在我们的服务中添加对音译支持的支持，以便它可以支持所有语言字符。

所以我有以下困惑，

1：我应该在服务器端添加对音译的支持并发送英文响应，以便客户端不会担心音译过程吗？
2：我是否应该在客户端添加对音译的支持，以便根据他的要求成为客户特定的？

请让我知道我应该使用哪种方法在我们的应用程序中实现音译功能。

# android - 如何在android中执行多个重复任务

> ID：13230760
> 
> 赞同：2
> 
> 时间：2012-11-05T11:03:16.897
> 
> 标签：android, sockets, timertask

我正在开发一个 android 应用程序，它需要打开多达 20 个套接字（并行），并每 4 秒从每个套接字获取更新（并分别更新 UI）。

这是我到目前为止所尝试的：

1.  为每个套接字连接创建一个 TimerTask 并使用处理程序和消息将更新发布到 UI 线程。 **这个解决方案的问题：**在创建了大约 15 个 TimerTask（每个都在不同的线程上）之后，我的应用程序的 UI（非常简单）开始运行。第二个问题是来自每个套接字的更新甚至没有远程同步（例如，一个每 4 秒更新一次，另一个每 20 秒更新一次）。
2.  创建一个使用异步套接字通道和选择器处理所有通信的线程。**这个解决方案的问题：** Java 没有内置对 SSL 的支持（而是他们只是提供了一个 SSL 引擎，而不是一个 SSLChannelSocket），我需要 SSL 套接字。

任何建议/其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:00:52.373

我相信您可能对您的应用程序中的 NIO（又名非阻塞 I/O）感兴趣。它应该使您能够以更有效的方式处理多个客户端-请参阅[这篇文章](https://stackoverflow.com/questions/4864719/one-server-multiple-clients/4864897#4864897)-它将为您提供一些有关如何有效和正确地执行此操作的信息。

[您可以在Google 的 Anymote 库](http://code.google.com/p/anymote-protocol/source/browse/java/src/com/google/anymote/common/RemoteWireAdapter.java#122)中找到如何处理此问题的示例。他们特别做我在评论中提到的 - 阅读专用线程：

```
 mReceiverThread = new Thread(new Runnable() {
  public void run() {
    boolean available = true;
    while (available) {
      available = getNextRemoteMessage();
    }
    stop();
  }}); 
```

尽管它使用直接回调（因此接口方法是从读取线程调用的，而不是通过 Handler.

祝你好运！

# css - 带水平滚动条的无序列表

> ID：13230761
> 
> 赞同：2
> 
> 时间：2012-11-05T11:03:24.747
> 
> 标签：css

我想要一个 UL 列表，但它的元素向左浮动，并且列表具有固定的高度和宽度。

我现在拥有的：

```
ul { 
width: 230px;
height: 30px;
overflow-x: scroll;
}

li { 
float: left;
display: inline 
} 
```

HTML：

```
<ul id="dev">
  <li>el</li>
  <li>el</li>
</ul> 
```

元素浮动正常，但滚动条不起作用（灰显）并且元素将进入新行。我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:14:32.883

将`white-space`属性设置为`nowrap`在列表上，然后`float: left`在列表元素上禁用。

```
ul { 
  /* ... */
  white-space: nowrap;
}

li { 
  display: inline;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T11:13:56.983

```
ul {
    width: 230px;
    height: 30px;
    overflow-x: scroll;
    white-space: nowrap;
}

li {
    display: inline-block;
} 
```

# javascript - 如何在 CRM 中使用 Soap Request 创建的换行电子邮件

> ID：13230764
> 
> 赞同：1
> 
> 时间：2012-11-05T11:03:40.887
> 
> 标签：javascript, email, crm

嗨伙计们，

我正在尝试几个小时来格式化使用 JavaScript 和肥皂请求创建的电子邮件。但是设置换行符不起作用

`\n`- 不工作 `<br />`- 不工作 `&#xD`；- 不工作 `\u000A \u000D`- 不工作

这是我的电子邮件正文的实际代码

```
 get_EmailBodyInformManager: function (projectNumber, topic, responsibleDepartment, potentialCustomer, KAMofCustomer, projectManager) {
    if (KAMofCustomer == null) {
        KAMofCustomer = "";
    }
    return "Dear Sir or Madam. &#xD;" +
           "A decision about the project leader for the following international project is necessary: &#xD" +
           "Project Number: " + projectNumber + "&#xD;" +
           "Topic: " + topic + " &#xD;" +
           "Responsible Department: " + responsibleDepartment + "&#xD;" +
           "Potential Customer: " + potentialCustomer + "&#xD;" +
           "KAM of Potential Customer: " + KAMofCustomer + "&#xD;" +
           "WILO Project Manager: " + projectManager + "";
}, 
```

和肥皂请求：

```
 var xml = "<?xml version='1.0' encoding='utf-8'?>" +
          "<soap:Envelope xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'" +
          " xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'" +
          " xmlns:xsd='http://www.w3.org/2001/XMLSchema'>" +
          authenticationHeader +
          "<soap:Body>" +
          "<Create xmlns='http://schemas.microsoft.com/crm/2007/WebServices'>" +
          "<entity xsi:type='email'>" +
          "<ownerid>" + userId + "</ownerid>" +
          "<regardingobjectid type='opportunity'>" + OpportunityId + "</regardingobjectid>" +
          "<subject>" + subject + "</subject>" +
          "<description>" + body + "</description>" +
          "<from>" +
            "<activityparty>" +
                "<partyid type='systemuser'>" + userId + "</partyid>" +
            "</activityparty>" +
          "</from>" +
          "</entity>" +
          "</Create>" +
          "</soap:Body>" +
          "</soap:Envelope>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:44:58.317

只要您通过描述字段传递的内容是为 XML 编码的，它就应该接受 HTML 格式。对于您要传递的数据，我建议将其格式化为 HTML 表格，内容显示在每一行。我会使用标准的 HTML 写出内容

```
var description = '<table><tr><td>...</td></tr></table>'; 
```

然后通过以下函数传递 this 和其他值（例如主题）以对其进行编码以传递 XML -

```
xmlEncode = function(strInput) {
    var c;
    var xmlEncode = '';

    if (strInput == null) {
        return null;
    }
    if (strInput == '') {
        return '';
    }

    for (var cnt = 0; cnt < strInput.length; cnt++) {
        c = strInput.charCodeAt(cnt);

        if (((c > 96) && (c < 123)) ||
            ((c > 64) && (c < 91)) ||
            (c == 32) ||
            ((c > 47) && (c < 58)) ||
            (c == 46) ||
            (c == 44) ||
            (c == 45) ||
            (c == 95)) {
            xmlEncode = xmlEncode + String.fromCharCode(c);
        } else {
            xmlEncode = xmlEncode + '&#' + c + ';';
        }
    }

    return xmlEncode;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:24:08.680

另一种可能更容易实施的方法是：

1.  创建创建电子邮件的按需工作流。这将允许您轻松地编辑和维护模板，例如，如果您想更改电子邮件的措辞，您将不必重新编码。
2.  从 JavaScript 启动工作流。

这将有效地实现与在 JavaScript 中创建整个电子邮件相同的效果，但可能更容易实现。

# java - 需要帮助以使用 java 中的超链接字段文件来扭曲 excel

> ID：13230767
> 
> 赞同：1
> 
> 时间：2012-11-05T11:03:45.087
> 
> 标签：java, excel, xls, xlsx

我正在尝试通过具有超链接字段的 java 编写 excel 文件。

我正在从对象列表中编写它。请检查我的代码。

当我给出对象列表时它正在工作。它正在编写 xls 文件。

但我也想在里面写超链接。我应该在下面的代码中改变什么。？

**只需从 exportToExcel 方法开始。**

```
package com.ksh;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.lang.reflect.Field;
import java.lang.reflect.Modifier;
import java.math.BigDecimal;
import java.text.DecimalFormat;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import org.apache.poi.xssf.usermodel.XSSFCell;
import org.apache.poi.xssf.usermodel.XSSFRow;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

import com.ksh.Final.Link;

public class OwnClass {

    private static SimpleDateFormat dateTimeFormatter = new SimpleDateFormat("yyyyMMddHHmmss");
    @SuppressWarnings({ "unchecked", "rawtypes" })
    private static Map<Class<?>, Class<?>> javaBasicObjectTypeMap = new HashMap();
    @SuppressWarnings({ "unchecked", "rawtypes" })
    private static Map<Class<?>, Class<?>> floatingPointTypeMap = new HashMap();

    static 
    {
        javaBasicObjectTypeMap.put(Integer.class, Integer.class);
        javaBasicObjectTypeMap.put(Long.class, Long.class);
        javaBasicObjectTypeMap.put(Float.class, Float.class);
        javaBasicObjectTypeMap.put(Double.class, Double.class);
        javaBasicObjectTypeMap.put(BigDecimal.class, BigDecimal.class);
        javaBasicObjectTypeMap.put(Character.class, Character.class);
        javaBasicObjectTypeMap.put(String.class, String.class);
        javaBasicObjectTypeMap.put(Date.class, Date.class);

        floatingPointTypeMap.put(Float.class, Float.class);
        floatingPointTypeMap.put(Double.class, Double.class);
        floatingPointTypeMap.put(BigDecimal.class, BigDecimal.class);
    }

    @SuppressWarnings("rawtypes")
    public static String exportToExcel(List<?> objectList, 
                                       ExcelFileParameter config, 
                                       Map<String, String> fieldNameTitleMap)throws Exception
    {
        String filePath = config.getExcelFileAbsolutePath();
        if (filePath.isEmpty()) 
        {
            filePath = dateTimeFormatter.format(new Date()) + ".xlsx";
        }
        File excelFile = new File(filePath);
        FileOutputStream fos = null;
        XSSFWorkbook workBook = new XSSFWorkbook();
        XSSFSheet sheet = workBook.createSheet();
        List rowlist = convertObjectToRowList(objectList, config, fieldNameTitleMap);

        System.out.println("Kshitij : "+rowlist.size()+"Type : ===="+rowlist.get(0).getClass().getName());

        for (int i = 0; (rowlist != null) && (i < rowlist.size()); i++) 
        {
            List row = (List)rowlist.get(i);
            XSSFRow excelRow = sheet.createRow(i);
            for (int j = 0; (row != null) && (j < row.size()); j++) 
            {
                XSSFCell cell = excelRow.createCell(j);
                cell.setCellValue((String)row.get(j));
            }
        }
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        workBook.write(bos);
        try
        {
            fos = new FileOutputStream(excelFile);
            fos.write(bos.toByteArray());
        } 
        catch (Exception ex) 
        {
            throw ex;
        } 
        finally 
        {
            fos.flush();
            fos.close();
        }

        return excelFile.getAbsolutePath();
    }

    @SuppressWarnings({ "rawtypes", "unchecked" })
    private static List<List<String>> convertObjectToRowList(List<?> objectList, 
                                                             ExcelFileParameter config, 
                                                             Map<String, String> fieldNameTitleMap) throws Exception

    {
        if (objectList == null) 
        {
            throw new Exception("objectList is null!");
        }
        if (objectList.size() == 0) 
        {
            throw new Exception("objectList is empty!");
        }

        List rowList = new ArrayList();
        Class itemClass = objectList.get(0).getClass();
        System.out.println("Object List Type is : "+itemClass.getName());

        if (javaBasicObjectTypeMap.containsKey(itemClass))
        {
              System.out.println("Non Primitive Type From Java Library");
              for (Iterator localIterator = objectList.iterator(); localIterator.hasNext(); ) 
              { 
                  Object obj = localIterator.next();
                  String value = convertFieldValueToString(itemClass, obj, config);
                  List row = new ArrayList();
                  row.add(value);
                  rowList.add(row);
              }
        }
        else
        {
              System.out.println("User Defined Class Type just got");
              List allFields = getFields(itemClass);
              Object excelFields = new ArrayList();
              List header = new ArrayList();
              String fieldName = null;

              for (int i = 0; (allFields != null) && (i < allFields.size()); i++) 
              {
                    fieldName = ((Field)allFields.get(i)).getName();
                    if ((fieldNameTitleMap != null) && (fieldNameTitleMap.keySet().size() > 0)) 
                    {
                        if (fieldNameTitleMap.containsKey(fieldName)) 
                        {
                            ((List)excelFields).add((Field)allFields.get(i));
                            header.add((String)fieldNameTitleMap.get(fieldName));
                        }
                    } 
                    else 
                    {
                        ((List)excelFields).add((Field)allFields.get(i));
                        header.add(fieldName);
                    }
              }
              rowList.add(header);
              for(Object object : objectList)
              {
                  List row = convertToRow(object, config, (List)excelFields);
                  rowList.add(row);
              }
        }
        return rowList;
      }

      private static String convertFieldValueToString(Class<?> fieldType, 
                                                      Object fieldValue, 
                                                      ExcelFileParameter config) throws Exception 
      {

            if (fieldValue == null) 
            {
                return config.getNullValueStrig();
            }
            if (fieldType.isAssignableFrom(Date.class)) 
            {
                SimpleDateFormat dateTimeFormat = config.getDateTimeFormat();
                if (dateTimeFormat == null) 
                {
                    return fieldValue.toString();
                }
                dateTimeFormat.format(fieldValue);
            }

            if ((fieldType == Float.TYPE)  || 
                (fieldType == Double.TYPE) || 
                (floatingPointTypeMap.containsKey(fieldType)))
            {
                  DecimalFormat decimalFormat = config.getDecimalFormat();
                  if (decimalFormat == null) 
                  {
                    return fieldValue.toString();
                  }
                  decimalFormat.format(fieldValue);
            }

            System.out.println("99999999999999999999999999999999999999999 : "+fieldType);
            if(fieldType == Link.class)
            {
                System.out.println("Link Value is Found...");
                System.out.println("Field Value : "+fieldValue.toString());
            }

            return fieldValue.toString();
      }

      @SuppressWarnings({ "rawtypes", "unchecked" })
      private static List<Field> getFields(Class<?> clazz)
      {
            List list = new ArrayList();
            Field[] fieldlist = clazz.getDeclaredFields();
            for (int i = 0; (fieldlist != null) && (i < fieldlist.length); i++)
            {
                Field field = fieldlist[i];
                Class type = fieldlist[i].getType();
                System.out.println("Type :" +type);
                int mod = fieldlist[i].getModifiers();
                System.out.println("Mode :" +mod);
                if ((!Modifier.isFinal(mod)) && (!Modifier.isStatic(mod))) 
                {
                    if (type.isPrimitive())
                    {
                        list.add(field);
                    }
                    else if (javaBasicObjectTypeMap.containsKey(type)) 
                    {
                        list.add(field);
                    }
                }
            }
            for(Object object : list)
            {
                Field field = (Field) object;
                System.out.println(field.getName());
            }
            return list;

      }

      @SuppressWarnings({ "rawtypes", "unchecked" })
      private static List<String> convertToRow( Object object, 
                                                ExcelFileParameter config, 
                                                List<Field> fieldList )
      {

          List row = new ArrayList();
          for (int i = 0; (fieldList != null) && (i < fieldList.size()); i++) 
          {
              try 
              {
                  Field field = (Field)fieldList.get(i);
                  field.setAccessible(true);
                  Class fieldType = field.getType();
                  Object fieldValue = field.get(object);
//                System.out.println("Field Type : "+fieldType +"FieldValue : "+fieldValue);
                  String value = convertFieldValueToString(fieldType, fieldValue, config);
                  System.out.println("--------------------------------------------------"+value);
                  row.add(value);

              } 
              catch (Exception ex) 
              {
                  row.add("ERROR:" + ex.toString());
              }
          }
          System.out.println("kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk"+row.size());
        return row;
      }

} 
```

意味着将对象链接写入excel文件。它正在工作，但需要编写超链接字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:39:14.817

基本上这段代码将在单元格中生成一个超链接：

```
Workbook wb = new XSSFWorkbook();
CreationHelper createHelper = wb.getCreationHelper();
Sheet sheet = wb.createSheet("AHyperLink");
Cell cell = sheet.createRow(0).createCell(0);
cell.setCellValue("Google");
Hyperlink link = createHelper.createHyperlink(Hyperlink.LINK_URL);
link.setAddress("http://www.google.com/");
cell.setHyperlink(link); 
```

将其放入代码中的一种简单方法是将 URL 模式与在以下位置获得的字段值进行匹配：

```
XSSFCell cell = excelRow.createCell(j);
cell.setCellValue((String)row.get(j)); //  match the result of row.get(j) 
```

如果是 URL，请使用上面的代码添加超链接，如果不只是使用您的代码

*编辑：

使用您的 Object 来识别链接可能会更好`Link`，您必须以您可以使用的方式`Link`或`String`在创建 Cell 时重写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:27:56.523

我认为此代码示例会对您有所帮助。

```
if(row.get(j) instanceof Link){
     Hyperlink link = createHelper.createHyperlink(Hyperlink.LINK_URL);
     link.setAddress("http://poi.apache.org/");
     cell.setHyperlink(link);
 }else{
     Your code..
 } 
```

将 String 类更改为 Object 类以避免错误。

参考链接：

[http://www.docjar.com/html/api/org/apache/poi/xssf/usermodel/examples/HyperlinkExample.java.html](http://www.docjar.com/html/api/org/apache/poi/xssf/usermodel/examples/HyperlinkExample.java.html)

# jenkins - 如何让詹金斯在从 SVN 轮询之前创建一个隧道

> ID：13230773
> 
> 赞同：1
> 
> 时间：2012-11-05T11:03:59.827
> 
> 标签：jenkins, continuous-integration, jenkins-plugins

`tunnel`在从 SVN 签出代码之前，我需要创建一个类似以下的内容：

```
ssh -L 9898:some_server.com:9898 user@another_server.com 
```

现在，我添加了`pre-scm-buildstep`插件并编写了一个脚本以在更新存储库之前打开隧道，如此[处](https://stackoverflow.com/questions/13198671/can-we-use-tunnelling-in-jenkins-before-connecting-to-the-svn-repository/13230638#13230638)所述，但它不适用于轮询。只有当我要求詹金斯' `Build now`'时它才有效。在我将其设置为轮询的设置中，它的红色表示它`unable to access the repository url`，只有在未创建隧道时才会发生这种情况。

是否有任何插件可以让我执行脚本`before it polls`，以便在隧道开始轮询之前打开隧道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:53:26.707

在您的 ssh 配置中使用[ProxyCommand](http://www.statusq.org/archives/2008/07/03/1916/)让 ssh 自动为您创建隧道。例如，

```
Host another_server.com
    ProxyCommand ssh some_server.com exec nc %h %p 
```

使用 ~jenkins/.ssh/config 中的上述内容（或任何 jenkins 运行的用户），当它尝试 ssh 到`another_server.com`它时，它实际上会 ssh 到`some_server.com`并运行`nc`以将 ssh 连接转发到`another_server.com`.

# iphone - 使用撇号时无法解析格式字符串 nspredicate 错误

> ID：13230776
> 
> 赞同：1
> 
> 时间：2012-11-05T11:04:04.270
> 
> 标签：iphone, objective-c, nspredicate

在搜索框中输入关键字时出现此错误：

> 由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'无法解析格式字符串“（title CONTAINS [c]'hj'”

我输入任何字符串（在这种情况下为“hj”），后跟一个撇号（或包含一个撇号）。没有撇号 - 没有错误。

这就是我所做的：

```
(void)filter:(NSString*)keyword{
    NSString* predicateString = [NSString stringWithFormat:@"(title CONTAINS[c] '%@')", keyword];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:predicateString];
    self.filteredArray = [self.initialArray filteredArrayUsingPredicate:predicate];
} 
```

正如我所说，如果关键字中不包含撇号字符，则代码有效。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T13:51:21.280

萨瓦，试试这个：

```
(void)filter:(NSString*)keyword{
    NSString *keywordWithBackslashedApostrophes = [keyword stringByReplacingOccurrencesOfString:@"'" withString:@"\\'"];
    NSString* predicateString = [NSString stringWithFormat:@"title CONTAINS[c] '%@'", keywordWithBackslashedApostrophes];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:predicateString];
    self.filteredArray = [self.initialArray filteredArrayUsingPredicate:predicate];
} 
```

与您的代码的主要区别在于关键字中的撇号被反斜杠撇号替换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-11T07:38:40.133

I too had problems with this predicate filter I had customer names like O'Connor and the query used to fail. The solution suggested by Alexey Golikov works fine, but I would like to know if there is any NSPredicate class level fix for this. String operations are always a costly thing you may not want to do it until necessary.

-anoop

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:10:19.933

试着看看这个[答案](https://stackoverflow.com/questions/2967400/using-nspredicate-to-determine-if-a-string-equals-another-string)`predicateWithFormat`你可以在没有引号的情况下 做所有事情

```
[NSPredicate predicateWithFormat:@"title CONTAINS[c] '%@'", keyword] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T00:21:49.310

The problem is creating an NSString when you don't need to do that. Notice here that we don't need an NSString variable, and we removed the apostrophes from `%@`.

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(title CONTAINS[c] %@)", keyword]; 
```

# android - Android过滤了来自相机的视频

> ID：13230777
> 
> 赞同：1
> 
> 时间：2012-11-05T11:04:27.703
> 
> 标签：android, camera

我不明白如何在 Android 上***正确***显示来自相机的过滤视频......

我为 sdk-8 写的，所以我使用了下面的方案：

1.  Camera.setPreviewDisplay( **null** ); // 使用空表面保持器来识别我不想看到原始相机预览的事实。
2.  Camera.setPreviewCallbackWithBuffer() + Camera.addCallbackBuffer() // 获取相机数据，修改它并在我的 GLSurfaceView 上绘制

这个方案在 2.2.* androids 上非常出色......我一直很高兴，直到没有在 4.* 上尝试应用程序 =) 我的接收帧数据的回调函数根本没有调用！

根据文档，我不应该使用**null**作为**setPreviewDisplay**的参数......没有表面实例，视频流将不会运行......但如果我给他表面，他将开始在该表面上绘制相机原始预览......

问题是：我怎样才能正确地自己绘制过滤后的摄像机视频？！

# iphone - id：找不到 -lMBProgressHUD 的库

> ID：13230783
> 
> 赞同：0
> 
> 时间：2012-11-05T11:04:48.343
> 
> 标签：iphone, ios, xcode

我在我的 Xcode 中遇到了这个错误。“id：找不到 -lMBProgressHUD 的库”。我用谷歌搜索它。但是没有人在谈论“lMBProgressHUD”。我添加了“libz.dylib”。但是，没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-22T11:55:16.727

这就是当您使用`$ProjectName.xcodeproj`文件而不是打开项目时发生的情况`$ProjectName.xcworkspace`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:34:25.327

问题是您添加`MBProgressHUD`到项目的构建设置中，这不是必需的，除非您将`MBProgressHUD`其用作外部库并且似乎并非如此，只需`MBProgressHUD`从构建设置中删除即可。

**PD**：如果您添加`libz.dylib`以检查这是否是错误，您也可以将其从依赖项中删除

# wpf - Visual Studio 2012 XAML 设计器 - 不能添加多个项目

> ID：13230785
> 
> 赞同：4
> 
> 时间：2012-11-05T11:05:03.760
> 
> 标签：wpf, xaml

我是 VS 2012 的新手，每次使用**XAML Designer**时都会遇到这个问题。

每次我向窗口添加一个项目（例如 RadioButton 和 Image、一个标签）时，它都会删除前一个项目。

结果，我的窗口中只能有一个项目，我知道这很荒谬，我错过了什么？

这是窗口的xaml

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:WpfViewers="clr-namespace:Microsoft.Samples.Kinect.WpfViewers;assembly=Microsoft.Samples.Kinect.WpfViewers" xmlns:Toolkit="clr-namespace:Microsoft.Kinect.Toolkit;assembly=Microsoft.Kinect.Toolkit" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d" x:Class="KinectSetupDev.MainWindow"
    Title="MainWindow" Height="400" Width="600">
    <Toolkit:KinectSensorChooserUI x:Name="SensorChooserUI" VerticalAlignment="Center" Height="40" Margin="277,2,275,328"/>
</Window> 
```

这是在窗口上拖动图像后的 xaml（来自工具箱）

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:WpfViewers="clr-namespace:Microsoft.Samples.Kinect.WpfViewers;assembly=Microsoft.Samples.Kinect.WpfViewers" xmlns:Toolkit="clr-namespace:Microsoft.Kinect.Toolkit;assembly=Microsoft.Kinect.Toolkit" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d" x:Class="KinectSetupDev.MainWindow"
    Title="MainWindow" Height="400" Width="600">
<Image HorizontalAlignment="Left" Height="86" Margin="77,188,0,0" VerticalAlignment="Top" Width="111"/>
</Window> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:26:15.130

正如@Hans 所说，我试图在 XAML 设计器中将多个内容项添加到一个窗口中。这是不可能的，所以我不得不：

1）在窗口中添加一个网格。

2) 将任何项目添加到网格中。

它有效，这是一个示例代码：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:WpfViewers="clr-namespace:Microsoft.Samples.Kinect.WpfViewers;assembly=Microsoft.Samples.Kinect.WpfViewers" xmlns:Toolkit="clr-namespace:Microsoft.Kinect.Toolkit;assembly=Microsoft.Kinect.Toolkit" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d" x:Class="KinectSetupDev.MainWindow"
    Title="MainWindow" Height="768" Width="1024" Loaded="Window_Loaded_1">
    <Grid HorizontalAlignment="Left" Height="736" VerticalAlignment="Top" Width="1012" Margin="2,2,0,0">
       <Image x:Name="Image01" HorizontalAlignment="Left" Height="240" Margin="136,27,0,0" VerticalAlignment="Top" Width="320"/>
       <TextBlock x:Name="tbMessages" HorizontalAlignment="Left" Height="60" Margin="10,606,-664,-426" TextWrapping="Wrap" VerticalAlignment="Top" Width="974"/>
       <WpfViewers:KinectColorViewer HorizontalAlignment="Left" Height="240" Margin="666,0,-666,0" VerticalAlignment="Top" Width="320"/>
    </Grid>
</Window> 
```

# ruby-on-rails - 在一种方法中传递时，使变量在控制器的所有方法中可用

> ID：13230787
> 
> 赞同：1
> 
> 时间：2012-11-05T11:05:09.553
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在这里，我将 user.id 作为参数 dd 发送

```
<h3><%= link_to("Lend Asset", {:controller => 'empassets', :action=> 'index', :dd => user.id})%></h3> 
```

在控制器 empassets 我通过

```
 def index
     @id = params[:dd]
     @empassets = Empasset.where(:ad => @id)
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @empassets }
    end
  end

  def show
     @id = params[:dd]
    @empasset = Empasset.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @empasset }
    end
  end

  def new
     @id = params[:dd]
    @empasset = Empasset.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @empasset }
    end
  end

  def edit
     @id = params[:dd]
    @empasset = Empasset.find(params[:id])
  end 
```

我在所有新的显示编辑方法中都需要这个@id。但它只包含索引，正如我在索引中提到的那样。如果单击 Lend 资产，我该如何做到这一点，那么 @id= params[:id] 在所有方法中都具有价值。怎么可能使它可用于另一个 @id = params[:id] 未在该控制器中发送？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:23:02.897

如果您将当前用户存储在会话中，然后在控制器中使用过滤器捕获用户模型，可能会更好，如下所示：

```
# controllers/application_controller.rb
class ApplicationController < ActionController::Base
  before_filter :set_current_user_in_model

  private
  def current_user
    @current_user ||= User.find(params[:dd]) || User.new
  end

  # This method save the current user in the user model, this is useful to have access to the current user from a model and not from the controller only
  def set_current_user_in_model
    User.current_user current_user if not current_user.nil?
  end
end

# models/user.rb
class User < ActiveRecord::Base
  #...
  # This is useful to get the current user inside a model
  def self.current_user(user = nil)
    @@current_user = (user || @@current_user)
  end
  #...
end 
```

基本上，我的想法是将该信息存储在带有过滤器的模型中，如果您想获取信息（用户 ID），可以使用会话。

```
def index
  session[:user_id] = params[:dd]
  @empassets = Empasset.where(:ad => session[:user_id])
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @empassets }
  end
end

def show
  @empasset = Empasset.find(session[:user_id] || params[:dd])

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @empasset }
  end
end 
```

注意我使用`session[:user_id] || params[:dd]`的原因可能是会话信息未建立并且您为其提供了`:dd`参数。但是如果你想稳定`@id`变量，你可以像以前一样使用过滤器。

但我不知道主要问题是什么。

**编辑**

```
# controllers/application_controller.rb
class ApplicationController < ActionController::Base
  before_filter :set_dd_param, :except => :index
  def index
    session[:dd] = params[:dd] # Here you write the session
    @current_user ||= User.find(params[:dd]) || User.new
  end
  # ...
  protected
  def set_dd_param
    params[:dd] = session[:dd] || -1 # Here you read the session a write the params variable
  end
end 
```

抱歉耽搁了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:10:51.083

除非您想将其存储到会话中，否则无法自动使 @id 可用于控制器中的每个方法。但是您可以将参数添加到每个链接/表单，如下所示：

```
<%= link_to("New Asset", {:controller => 'empassets', :action=> 'new', :dd => @id})%>

<%= link_to("Show Asset", {:controller => 'empassets', :action=> 'show', :dd => @id})%> 
```

这些链接在索引视图中并`@id`在 index 方法中设置。

不完全确定这里的目标是什么，但这样的事情可能会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:36:57.920

```
def index
 $id = params[:dd]
 @empassets = Empasset.where(:ad => @id)
respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @empassets }
end 
```

# http - 如果 HTTP 协议可以处理持久连接，为什么它是无状态的？

> ID：13230789
> 
> 赞同：6
> 
> 时间：2012-11-05T11:05:21.930
> 
> 标签：http

HTTP 协议是无状态的，但我在 Kurose-Ross 的书中发现了这一点：

```
The default HTTP method is with persistent connections and pipeling. 
```

这意味着它可以处理多个请求，因此它会一直打开想要请求多个请求的客户端的套接字。这是真的吗？如果是，为什么 HTTP 协议被认为是无状态的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T11:15:36.887

[HTTP 持久连接](http://en.wikipedia.org/wiki/HTTP_persistent_connection)与 TCP 连接保持打开状态有关。HTTP 在 TCP 之上运行 - 因此 TCP 可以连接和/或有状态，而 HTTP 不能。TCP 只是 HTTP 的传输。

如果您查看[OSI 模型](http://en.wikipedia.org/wiki/OSI_model)，您可以看到 TCP 在第 4 层（传输）上，而 HTTP 在第 7 层（应用程序）上。HTTP 不依赖于 TCP，也可以使用其他传输方式——作为一种协议，它不是从 TCP“继承”特性。

（另请注意，持久连接并不是真正持久的很长时间。对于 Apache 2，默认情况下它仅打开 5 秒，并且“根据 RFC 2616（第 46 页），单用户客户端不应维护与任何服务器或代理的连接超过 2 个”。）

# jquery - 设置隐藏字段数组的id

> ID：13230797
> 
> 赞同：0
> 
> 时间：2012-11-05T11:05:47.873
> 
> 标签：jquery

如何在里面设置隐藏字段数组的值

```
 $('#addbutton').click(function () {
        var txt = "<tr id='divs'><td><input type='hidden' id='hids[]' name='hifld' /> </td></tr> ";
        $('#systemconfig').append(txt);

        var dd = $("#hid").attr("value");
        var inthidden = parseInt(dd);
        var vl = parseInt(dd, '0') + 1;
        $("#hids[]").attr("value", vl); // this is not working 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:07:44.667

你的 id 不能是数组，你的名字可以是..

所以你的 id 应该`hids`和你的名字一样`hifld[]`，然后分配像这样的值

```
$("#hids").val(vl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:07:21.247

尝试 .val() 代替：

```
$("#hids[]").val( v1 ) 
```

# session - 当我们在 https 和 http 之间切换时，如何在 java springs 2.5.6 中传递/复制参数

> ID：13230799
> 
> 赞同：1
> 
> 时间：2012-11-05T11:06:01.940
> 
> 标签：session, https, spring-security, session-management

在我的代码中，我使用的是 spring 直接登录。

一旦控制器在 https 到 http 之间切换，就会创建一个新会话，一旦创建了新会话，我如何将会话属性传递/复制到由 http 创建的新会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:38:50.113

检查[Spring Security 常见问题解答](http://static.springsource.org/spring-security/site/faq/faq.html#faq-tomcat-https-session)。基本上，您无法复制会话属性 - 当您切换回 HTTP 时，之前的所有会话数据都会丢失。由于浏览器不会发送安全 cookie，因此您有一个新会话，就好像您根本没有登录一样。

有一些方法可以解决这个问题（有关更多详细信息，请参阅常见问题解答并搜索网络），但它们通常不是一个好主意。如果安全很重要，您应该从 HTTPS 开始并保持这种状态。

# java - 使用 Files.copy 时无法识别文件复制选项

> ID：13230802
> 
> 赞同：0
> 
> 时间：2012-11-05T11:06:10.347
> 
> 标签：java, groovy

我有一个 Groovy 脚本来复制一个工作正常的文件，直到我尝试添加复制文件属性的选项，即保留​​时间戳。

这有效：

```
import java.nio.file.*

def fileEx = new File(/Y:\Documents\Test File.txt/)
def fileDest = new File(/Y:\Documents\Test File copied with Groovy and Nio.txt/)

def fileExPath = fileEx.toPath()
def fileDestPath = fileDest.toPath()

Files.copy(fileExPath, fileDestPath) 
```

但这失败了：

```
import java.nio.file.*

def fileEx = new File(/Y:\Documents\Test File.txt/)
def fileDest = new File(/Y:\Documents\Test File copied with Groovy and Nio.txt/)

def fileExPath = fileEx.toPath()
def fileDestPath = fileDest.toPath()

Files.copy(fileExPath, fileDestPath, COPY_ATTRIBUTES) 
```

出现错误：

```
Caught: groovy.lang.MissingPropertyException: No such property: COPY_ATTRIBUTES for class: temp
groovy.lang.MissingPropertyException: No such property: COPY_ATTRIBUTES for class: temp
    at temp.run(temp.groovy:9) 
```

我尝试将 COPY_ATTRIBUTES 放在单引号和双引号中，但这没有帮助。请有人能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:30:44.353

您需要参考枚举类：

```
Files.copy(fileExPath, fileDestPath, StandardCopyOption.COPY_ATTRIBUTES) 
```

# iphone - 登录Iphone App后如何重定向到主页选项卡？

> ID：13230806
> 
> 赞同：1
> 
> 时间：2012-11-05T11:06:18.233
> 
> 标签：iphone, ios, login, tabbar

在我的`AppDelegate.m`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
    //Get uer ID from user defaults
    NSString *userid = [defaults objectForKey:@"UserId"];

    if([userid isEqualToString:@""]){

        login = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];
        [window addSubview:login.view];

    } else {

        [window addSubview:[rootTabBarController view]];

    }

    [self.window makeKeyAndVisible];
    return YES;
} 
```

登录成功后我有这个代码

```
 NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
 [defaults setObject:serverOutput forKey:@"UserId"];
 //show tabbar app
 NewClassMoonAppDelegate * appsDelegate =[[UIApplication sharedApplication] delegate];
 [appsDelegate.window addSubview:[appsDelegate.rootTabBarController view]]; 
```

所以问题是我如何重定向到特定选项卡**[Home tab FOR EXAMBLE]**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:08:21.667

```
[appDelegate.rootTabBarController setSelectedIndex:GiveIndexOfTab]; // give index of home tab for ex. 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:11:15.560

如果要跳转到特定选项卡而不拦截tabBar，而不是第一个默认选项卡

利用

```
[appsDelegate.rootTabBarController setSelectedIndex:2]; // 2 is a pseudo index i have assigned 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:37:04.623

对于标签栏控制器，

SelectedIndex 属性可帮助您管理其行为。

利用

```
setSelectedIndex:Index 
```

方法。它会解决你的目的。

谢谢。

# tfs - Visual Studio Team Services 和 Appharbor

> ID：13230809
> 
> 赞同：1
> 
> 时间：2012-11-05T11:06:32.013
> 
> 标签：tfs, appharbor, azure-devops

我知道您可以将[AppHarbor](https://appharbor.com/)配置为与 Team Foundation Server 一起运行，但是否可以对 Visual Studio Team Services ( [http://visualstudio.com](http://visualstudio.com) ) 执行相同的操作。我检查了 AppHarbor 的网站，也搜索过，但找不到任何相关信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:55:21.257

只是自己调查一下......看起来你只能通过 Codeplex 做到这一点

IE

*   创建 Codeplex 项目并进行配置
*   使用 TFS 将您的代码签入到 Codeplex
*   Codeplex 通知 Appharbor
*   Appharbor 提取代码并将其构建/部署到您的应用程序。

可以在此处找到 Codeplex 集成的说明：

[http://support.appharbor.com/kb/3rd-party-integrations/integrating-with-codeplex](http://support.appharbor.com/kb/3rd-party-integrations/integrating-with-codeplex)

# ios - storyboard push segue isn't properly animated

> ID：13230810
> 
> 赞同：1
> 
> 时间：2012-11-05T11:06:36.037
> 
> 标签：ios, cocoa-touch, uikit, storyboard, segue

I'm new to iOS development and don't get on well with storyboard.

screenshot of storyboard: [http://i.stack.imgur.com/s9VTB.png](http://i.stack.imgur.com/s9VTB.png)

I have got the push segue working now. But only pushing from the first tableViewController to the second one is animated and pushing back isn't animated.

In the first tableViewController:

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"xxx" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"xxx"]) {
        // set some properties of segue.destinationViewController
    }
} 
```

the second one is not modified.

* * *

Update: I deleted the storyboard, did all of them programmatically and now everything works well. Sometimes storyboard is just so confusing...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:19:55.880

转场是否动画将取决于你如何做。尝试：

```
 [self.navigationController popViewControllerAnimated:YES]; 
```

# javascript - 获取 ONE 属性的所有实例，而不仅仅是一个

> ID：13230817
> 
> 赞同：0
> 
> 时间：2012-11-05T11:06:56.687
> 
> 标签：javascript, jquery

所以我根据复选框的选择来显示图表并且遇到了一个小问题。

我目前正在循环并仅选择第一个图形，即使选中了全选复选框 - 这意味着我得到了许多相同的第一个图形而不是十个唯一图形。

正如您将在下面的代码中看到的那样，我使用的前一行已被注释掉：

```
//var fnInstance=$('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].attributes[1].value; 
```

**仅**在 Firefox 中完美运行 - 它显示所有图形正确等，但由于尝试访问元素的方式而在 Chrome/IE 中不起作用。

我用这两行替换了它：

```
$el = $('#counterTreeviewUL'+idTreeview).first();
var fnInstance = $el.find("input").attr("onclick"); 
```

我用它替换的两行导致所有三个浏览器中的所有内容都可以正常运行（IE 或 Chrome 中不再出现错误），**但是**唯一显示的图表是找到的第一个 - 如果选择了三个元素，则 3 个版本第一个图表将显示而不是 3 个唯一的。

**完整代码如下，console.logs 元素包含的内容如下：**

```
for (var i=0;i<$('#counterTreeviewUL'+idTreeview)[0].children.length;i++)
{

 if (!$('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].checked)
 {  
        $('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].checked=true;

//var fnInstance=$('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].attributes[1].value;

        $el = $('#counterTreeviewUL'+idTreeview).first();
        var fnInstance = $el.find("input").attr("onclick");

        fnInstance=fnInstance.substr(15).substr(0,fnInstance.length-2);

        var flagsInstance=fnInstance.split(new RegExp(","));

        var graph = {
                id: seqId,
                entityName: flags[6].substr(1).substr(0, flags[6].length - 2),
                entity: flags[5].substr(1).substr(0, flags[5].length - 2),
                idCounter: flags[4],
                counterName: flags[3].substr(1).substr(0, flags[3].length - 2),
                ivmanager: flags[7].substr(1).substr(0, flags[7].length - 2),
                chart: null,
                pointsToShowX: null,
                borneInf: null,
                unite: "",
                idInstance: flagsInstance[2].substr(1).substr(0, flagsInstance[2].length - 2),
                instanceName: flagsInstance[3].substr(1).substr(0, flagsInstance[3].length - 2),
                listPdsNull: new Array(),
                countInstance: idTreeview + "_" + i,
                countGraph: -1
            };

        seqId++;        
        graphs[graphsLastId]=graph;     
        graphsLastId++;
    }
} 
```

**Console.logs 元素：**

![在此处输入图像描述](../Images/dafc04a5bddaf3e216a253cb9d56f757.png)

任何帮助都会非常受欢迎，因为我花了几个小时试图制定（另一位前员工的）代码..

我基本上只需要这一行的浏览器友好版本 -

```
 var fnInstance=$('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].attributes[1].value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:28:51.753

原来的：

```
fnInstance=$('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].attributes1.value; 
```

我的建议：

```
var changedIforPsedoSelctor = i+1;
var nthChild = ":nth-child("+changedIforPsedoSelctor+")";
var fnInstance = $('#counterTreeviewUL'+idTreeview).children(nthChild).children(":first-child").attr("onclick"); 
```

我相信应该这样做，但是如果您为这个特定问题提供了 HTML 标记，那么回答您的问题会容易得多。我还假设属性[1] 等于选择器中的“onclick”。

# unit-testing - Grails metaclass modification not reliable within unit tests

> ID：13230823
> 
> 赞同：1
> 
> 时间：2012-11-05T11:07:10.313
> 
> 标签：unit-testing, grails, metaprogramming

In a grails 2 project I'm using groovy's metaclass programming to add some methods to my domain classes.

Everything is working fine at runtime and I can run my integration tests fine.

But for unit tests I have some issues.

I have created a test mixin that is in charge of initializing the metaclass programming part.

This mixin is not running reliably: the methods added to the metaclass are not available, or they are available after a first call, or they are available only after a previous `grails test-app unit:` command has been called.
This is quite a problem for continuous build.

You should be able to reproduce this issue (at least with grails 2.0.4) by
**0) create a new grails projects**

**1) add a domain object**

```
create-domain-class playground.Data 
```

**2) add this class to your src/groovy/playground dir**

```
 package playground

import grails.test.mixin.domain.DomainClassUnitTestMixin
import grails.test.mixin.support.GrailsUnitTestMixin
import org.codehaus.groovy.grails.commons.GrailsApplication
import org.codehaus.groovy.grails.commons.GrailsDomainClass
import org.junit.Before

class EnhanceDomainTestMixin {

  boolean enhancerMethodCalled = false;
  GrailsApplication application
  MetaMethod mockDomainMethod

  //replace the mockDomain Method from DomainClassUnitTestMixin with this closure
  def enhancedMockDomain = { Class cl, List list ->
    def enhanced =cl.metaClass.getMetaMethod("isEnhanced")
    try {
      //run the mockDomain method to have the mocked domain class registered in the grails application
      mockDomainMethod.invoke(delegate, cl, list)
    }
    finally {
      //enhance the grails domain with a new method
      def domain = application.getDomainClass(cl.name) as GrailsDomainClass
      domain.metaClass.isEnhanced = { return true; }
      assert domain.newInstance().isEnhanced();
    }
  }

  @Before void runDomainEnhancer() {
    enhancerMethodCalled = true;
    //GrailsUnitTestMixin.initGrailsApplication() should have already been called. (at least this was not an issue here)
    application = GrailsUnitTestMixin.grailsApplication

    //pick the mockDomain method
    mockDomainMethod = DomainClassUnitTestMixin.metaClass.pickMethod("mockDomain", Class, List)

    //if the picked mockDomain has never been enhanced, wrap it.
    if(mockDomainMethod != enhancedMockDomain) {
      DomainClassUnitTestMixin.metaClass.mockDomain = enhancedMockDomain
    }
  }
} 
```

**3) Add this small utils class (in test/unit/playground)**

```
package playground

class TestSetup {

  static Data d1

  static void setup() {
    d1 = new Data()
    assert d1.isEnhanced()
  }
} 
```

**4) Add these tests into the unit test already created by grails DataTests**

```
package playground

import grails.test.mixin.*

@TestFor(Data)
@TestMixin(EnhanceDomainTestMixin)
class DataTests {

  void testIsEnhancedLocal() {
    assert enhancerMethodCalled
    Data d = new Data()
    assert d.isEnhanced()
  }

  void testIsEnhancedLocalSecondTime() {
    assert enhancerMethodCalled
    Data d = new Data()
    assert d.isEnhanced()
  }

  void testIsEnhancedGlobalFirstTime() {
    assert enhancerMethodCalled
    TestSetup.setup()
    assert TestSetup.d1 != null
  }

  void testIsEnhancedGlobalSecondTime() {
    assert enhancerMethodCalled
    TestSetup.setup()
    assert TestSetup.d1 != null
  }

} 
```

Now run this command: `grails test-app unit:`

you should have something like this output:

```
| Completed 4 unit tests, 4 failed in 1651ms
| Tests FAILED  - view reports in target\test-reports 
```

Now run the this command again (sometime one more is needed):
`grails test-app unit: playground.DataTests`

```
testMixin> grails test-app unit: playground.DataTests
| Completed 4 unit tests, 0 failed in 1384ms
| Tests PASSED - view reports in target\test-reports 
```

So does anyone has a clue of why the metaClass modification is not reliable while running unit tests ? And how to workaround this issue ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:14:16.437

我必须在我的域类方法中使用 grailsApplication 配置。我遇到了同样的问题。尝试使用 Holders.config 而不是 grailsApplication.config。它对我有用。

# javascript - C++11 标准参考 ECMAScript (Javascript) 规范？

> ID：13230826
> 
> 赞同：3
> 
> 时间：2012-11-05T11:07:20.153
> 
> 标签：javascript, c++, c++11

在 C++11 标准文档中它说：

> 以下参考文件对于本文件的应用是必不可少的：
> 
> *   Ecma International，ECMAScript 语言规范，标准 Ecma-262，第三版，1999。

C++11 规范对 Javascript 规范的依赖到底是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:10:47.357

“28.13 修改 ECMAScript 正则表达式语法”部分依赖于 ECMA-262：

> ### 28.13 修改ECMAScript正则表达式语法`[re.grammar]`
> 
> 1 由 ECMAScript 标志构造的 basic_regex 对象识别的正则表达式语法是由 ECMA-262 指定的，但下面指定的除外。

正则表达式语法在 ECMA-262中的第[15.10 节 RegExp（正则表达式）对象](http://www.ecma-international.org/ecma-262/5.1/#sec-15.10)和[A.7 正则表达式中指定。](http://www.ecma-international.org/ecma-262/5.1/#sec-A.7)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T11:11:27.523

`regex`提供与 ECMAScript 兼容的正则表达式语法，默认情况下或由适当的标志启用：

```
#include <regex>

std::regex r{"...", std::regex_constants::ECMAScript}; 
```

ECMAScript 是默认的；其他语法包括`basic`, `extended`, `awk`, `grep`and `egrep`（全部由 POSIX 的相应部分指定）。

# php - imap_delete versus mails with .xls attachments

> ID：13230827
> 
> 赞同：1
> 
> 时间：2012-11-05T11:07:20.140
> 
> 标签：php, imap

We have a PHP script that opens a mailbox with `imap_open`, checks it for new messages, posts them onto our intranet, and then `imap_delete`s the message and `imap_expunge`s the mailbox.

Generally this works okay, but sometimes the script fails to evict the message from the mailbox. This usually seems to be when the mail has a `.xls` attachment, though there exists the possibility that that's a red herring.

I've tried reworking things several times to get this to work properly, but without any success. Most of the time `imap_delete` does exactly what we want it to. Is there any obvious reason why [`imap_delete`](http://php.net/imap_delete) / [`expunge`](http://php.net/imap_expunge) would fail to delete from a mailbox?

Or can anyone suggest a better way of deleting a mail that is being "difficult"?

ETA:

```
$check = imap_mailboxmsginfo($mailbox);
echo "Messages before delete: " . $check->Nmsgs . "<br />\n";

imap_delete($mailbox, $i);

$check = imap_mailboxmsginfo($mailbox);
echo "Messages after delete: " . $check->Nmsgs . "<br />\n";

imap_expunge($mailbox);

$check = imap_mailboxmsginfo($mailbox);
echo "Messages after expunge: " . $check->Nmsgs . "<br />\n"; 
```

Results in:

```
Messages before delete: 1
Messages after delete: 1
Messages after expunge: 1 
```

Both imap_delete and imap_expunge are giving a return value of true. imap_errors() is empty at all points during and after the process. Nothing looks out of the ordinary in the access log.

imap_fetch_overview after the imap_delete call does indicate that the delete flag has been correctly set. The imap_fetch_overview call after imap_expunge() returns just the same thing, delete flag still set. So I guess the expunge seems to be not expunging, in the case of certain mails... The results of imap_fetch_overview both times:

> array(1) { [0]=> object(stdClass)#16 (14) { ["subject"]=> string(23) "(Subject)" ["from"]=> string(40) "(Sender)" ["to"]=> string(24) "undisclosed-recipients: " ["date"]=> string(31) "Sun, 30 Dec 2012 23:36:34 +0000" ["message_id"]=> string(50) "" ["size"]=> int(89752) ["uid"]=> int(1) ["msgno"]=> int(1) ["recent"]=> int(1) ["flagged"]=> int(0) ["answered"]=> int(0) ["deleted"]=> int(1) ["seen"]=> int(1) ["draft"]=> int(0) } }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:13:26.130

服务器端可能存在导致此问题的某些情况。记录 imap_errors() 的结果以查看删除是否失败。查看 Excel 附件是否是原因，以及是否应归咎于特定的文件/文件格式也应该非常简单。也许帖子在内部网被拒绝，因此永远不会被删除？

# c# - 应用程序崩溃时的文件恢复 C#

> ID：13230830
> 
> 赞同：1
> 
> 时间：2012-11-05T11:07:24.120
> 
> 标签：c#, wpf, data-recovery, crash

我正在创建一个 WPF/C# 应用程序，该应用程序在关闭之前（从在线数据）删除文件并创建新文件。当应用程序在新文件创建过程完成甚至开始之前随机崩溃时，就会出现问题。

有没有可以在我的代码中使用的文件恢复方法（在应用程序中完成，而不仅仅是取消删除应用程序等），所以当应用程序崩溃时，被删除的文件不会丢失？

为了更准确，我在应用程序开始时删除了 4 个文件，并在应用程序结束时创建新文件。但是如果应用程序在中间崩溃，文件就会丢失。

我怎样才能防止这个问题？

我试图减少随机崩溃的可能性，但偶尔它仍然会发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:12:48.047

如果您担心文件丢失，您可以：

*   *在启动*时删除 `A.txt`（比如说）之前创建它的副本并**在**删除之后。*`A.tmp`*
****   关闭时，创建新文件并删除`tmp`目录中存在的所有文件。***

 ***这样，*如果程序运行过程中出现问题*，当程序再次启动时，它会找到`tmp`最后创建的，因此可以从中重建信息（如果需要）并继续程序循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:14:58.637

启动时，对文件不执行任何操作。

关机时，请按照以下步骤操作：

1.  创建新文件，命名`OLDNAME.tmp`或其他东西。如果它已经存在，请丢弃并重新创建它。
2.  `MoveFileTransacted()`通过（[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365241%28v=vs.85%29.aspx)）将新文件重命名为旧文件

如果您被困在[没有](http://blogs.msdn.com/b/adioltean/archive/2005/12/28/507866.aspx)`MoveFileTransacted()`.

* * *

注意：如果您发现自己在一个 POSIX 兼容的文件系统上，标准的重命名操作保证是原子的，使第 2 步变得微不足道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:11:27.053

考虑将文件移动到某个临时文件夹，而不是删除它们。您可以发明一些取消删除技术，但这并不可靠，因为文件系统可以随时重写未占用的空间。新文件到达后，您将删除以前移动的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T11:09:57.173

在创建新文件之前不要删除旧文件？而是重命名它们。当您启动应用程序时，您会知道它是否崩溃，因为旧的（重命名的）文件仍然存在，然后您可以执行任何整理操作。***

# vim - 如何在 vim 进程中共享寄存器

> ID：13230831
> 
> 赞同：6
> 
> 时间：2012-11-05T11:07:38.007
> 
> 标签：vim

我经常启动多个vim进程，如何在它们之间共享寄存器？我已经调查了 +clientserver 功能，但我认为这不是一个简单的方法。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T11:11:32.193

您可以使用`:wv`/`:rv`来写入/读取 viminfo 文件以跨进程共享寄存器内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:14:37.407

你不能。

至少不容易/看起来很轻松。要么你只使用一个实例，要么你使用多个实例，这些实例实际上不能共享任何东西，而无需大量工作（临时文件、向服务器发送命令和大量 `autocmd`s）。您仍然可以从多个实例访问系统剪贴板，但这可能不足以满足您的需求

# c# - 检测重复记录，仅先选择并使用 LINQ/C# 计数

> ID：13230835
> 
> 赞同：7
> 
> 时间：2012-11-05T11:07:44.130
> 
> 标签：c#, linq, duplicates

在使用 C#/LINQ 设计查询以满足以下要求时，我正在寻求一些帮助：

**我有一份公司名单：-**

```
Id  Name                Email       Address

1   Company A         a@a.com       abc

2   Company B         b@b.com       abc

3   Company C         c@c.com       abc

4   Company D         d@d.com       abc

5   Company A         a@a.com       abc 
```

我的目标是根据两个字段检测重复项目，在本例中为“名称”和“电子邮件”。

所需的输出是如下所示的客户列表：

1.  重复的客户只能显示一次
2.  应显示类似记录的数量。

**所需的重复列表：-**

```
Id  Qty Name        Email       Address

1   2   Company A       a@a.com     abc (Id/details of first)

2   1   Company B       b@b.com     abc

3   1   Company C       c@c.com     abc

4   1   Company D       d@d.com     abc 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T11:11:50.023

如果您明确希望在每组重复项中使用最低 ID 记录，则可以使用

```
var duplicates = companies
    .GroupBy(c => new { c.Name, c.Email })
    .Select(g => new { Qty = g.Count(), First = g.OrderBy(c => c.Id).First() } )
    .Select(p => new
        {
            Id = p.First.Id,
            Qty = p.Qty,
            Name = p.First.Name,
            Email = p.First.Email,
            Address = p.First.Address
        }); 
```

如果您不关心使用了哪个记录的值，或者您的源已按 ID 排序（升序），则可以挂断`OrderBy`电话。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T11:14:31.587

```
from c in companies
group c by new { c.Name, c.Email } into g
select new
{
   Id = g.First().Id,
   Qty = g.Count(),
   Name = g.Key.Name,
   Email = g.Key.Email,
   Address = g.First().Address
}; 
```

# jsp - i have some thing with my servlet page

> ID：13230837
> 
> 赞同：1
> 
> 时间：2012-11-05T11:07:45.540
> 
> 标签：jsp, jakarta-ee

Hello I have this code in a servlet in netbeans and I have a problem that when I login as a valid user or invalid it keeps this url `localhost:8080/LogIN123/login`. The login is the servlet and it doesn't response for the next page.

Can anyone help me?

The program must enter the username and password, then if the `Id` for user are the same for supervisor it will resend to another page that has employee under him and if he is just an employee it will redirect him to a page that have information about him without editing.

```
public class login extends HttpServlet {

    String url = "jdbc:mysql://localhost:3306/";
    String dbName = "employee";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "root";
    String password = "root";

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

        String name;
        String pass;
        Connection conn;
        Statement Stmt;
        ResultSet rs;

        try {

            name = request.getParameter("username");
            pass = request.getParameter("password");

            Class.forName(driver);
            conn = (Connection) DriverManager.getConnection(url + dbName, userName, password);
            Stmt = conn.createStatement();
            PreparedStatement ps = conn.prepareStatement("select * from emp_info where username=? && password=?");
            rs = ps.executeQuery(); 
```

**here I have class name userbean that contanis the data from the data base**

```
 UserBean userBean = new UserBean(); 
```

**and here a listof beans that will be sends to the other pages it contains the user info**

```
 List<UserBean> listOfUserBean = new ArrayList<UserBean>();

            if (rs.next()) {
                userBean.setUserID(rs.getString("id"));
                userBean.setUserName(rs.getString("username"));
                userBean.setUserGender(rs.getString("gender"));
                userBean.setUserSupervisour(rs.getString("supervisour"));
                userBean.setUserBirthDay(rs.getString("BirthOfDate"));
                userBean.setUserSalary(rs.getString("salary"));
            }

            listOfUserBean.add(userBean);

            response.sendRedirect("mangerpage.jsp");
            request.setAttribute("userlist", listOfUserBean); 
```

**the code below checks if the user id are the same supervisor it means that he is the manager of some employee and he will get new page that show all employees under his management**

```
 if (userBean.getUserID().equals(userBean.getUserSupervisour())) {
                Stmt = conn.createStatement();
                PreparedStatement ps2 = conn.prepareStatement("select * from emp_info where supervisour=?");
                ResultSet rs2 = ps2.executeQuery();

                if (rs2.next()) {
                    userBean.setUserID(rs2.getString("id"));
                    userBean.setUserName(rs2.getString("username"));
                    userBean.setUserGender(rs2.getString("gender"));
                    userBean.setUserSupervisour(rs2.getString("supervisour"));
                    userBean.setUserBirthDay(rs2.getString("BirthOfDate"));
                    userBean.setUserSalary(rs2.getString("salary"));
                }

                listOfUserBean.add(userBean);
                request.setAttribute("userlist",listOfUserBean);
                response.sendRedirect("mangerpage.jsp");
            } else {
                request.setAttribute("userlist",listOfUserBean);
                request.setAttribute("name", name);
                response.sendRedirect("mypage.jsp");
            }

            if (userBean.getUserID().equals("")) {
                response.sendRedirect("flogin.jsp");
            }

        } catch (ClassNotFoundException cnfe) {
            cnfe.printStackTrace();
        } catch (SQLException sqle) {
            sqle.printStackTrace();
        } finally {
            out.close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:29:41.367

由于您在设置属性之前重定向到页面，因此它显示为空白可能是因为列表为空。

只需设置`userlist`属性**，然后**再重定向到`managerpage.jsp`

```
request.setAttribute("userlist", listOfUserBean);
response.sendRedirect("mangerpage.jsp"); 
```

您可以在页面上检查用户列表是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:21:11.883

您必须已将您的 servlet 映射到 action `login`。

我认为您没有正确重定向到您的 JSP。

`response.sendRedirect("mangerpage.jsp");`您应该给出绝对路径或正确的相对路径。

对于相对路径将需要查看您的目录结构进行评论。

看看[这个](http://www.servletworld.com/examples/response-sendredirect-servlet.html)。

# wordpress - Wordpress url 重写

> ID：13230846
> 
> 赞同：-2
> 
> 时间：2012-11-05T11:08:11.417
> 
> 标签：wordpress, url, rewrite

我有一个用于搜索汽车列表的 wordpress 插件。汽车列表的 url 取决于公司的品牌和 ID。对于 alfa romeo 汽车，它看起来像[http://www.signaturecarleasing.co.uk/carsearch.php?a=man&man=1 。](http://www.signaturecarleasing.co.uk/carsearch.php?a=man&man=1)我需要为 alfa romeo重写可能类似于[http://www.signaturecarleasing.co.uk/carsearch/alfa-romeo的 url。](http://www.signaturecarleasing.co.uk/carsearch/alfa-romeo)我可以知道如何重写网址。wordpress 和 .htaccess 文件中的永久链接更改设置没有进行任何更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:32:41.337

你可以这样做：

```
RewriteRule ^carsearch/alfa-romeo$ /carsearch.php?a=man&man=1 [L] 
```

然后对每个 $_GET['man'] 值重复。但是您最好重写代码以接受制造商的名称而不是数字 id。

ps 与 WP 的永久链接无关

# php - doc有错误，我不确定

> ID：13230849
> 
> 赞同：0
> 
> 时间：2012-11-05T11:08:26.260
> 
> 标签：php, phalcon

[http://docs.phalconphp.com/en/0.6.0/reference/session.html](http://docs.phalconphp.com/en/0.6.0/reference/session.html)

在 Session 中存储/检索数据

从控制器、视图或任何其他扩展 Phalcon\DI\Injectable 的组件中，您可以访问会话服务并存储项目并通过以下方式检索它们：

```
<?php
    class UserController extends Phalcon\Mvc\Controller
    {
        public function indexAction()
        {
            //Set a session variable
            $this->session->set("user-name", "Michael");
        }

        public function welcomeAction()
        {

            //Check if the variable is defined
            if ($this->session->has("user-name")) {

                //Retrieve its value
                $name = $this->session->set("user-name"); //here, set or get?
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:40:28.283

你是对的。那应该是`get`（用于检索记录）。更正后的例子是：

[http://docs.phalconphp.com/en/latest/reference/session.html](http://docs.phalconphp.com/en/latest/reference/session.html)

```
<?php

class UserController extends Phalcon\Mvc\Controller
{

    public function indexAction()
    {
        //Set a session variable
        $this->session->set("user-name", "Michael");
    }

    public function welcomeAction()
    {

        //Check if the variable is defined
        if ($this->session->has("user-name")) 
        {

            //Retrieve its value
            $name = $this->session->get("user-name");
        }
    }
} 
```

# sql - How can i improve the performance of this oracle query?

> ID：13230850
> 
> 赞同：0
> 
> 时间：2012-11-05T11:08:25.600
> 
> 标签：sql, oracle

I have three database tables which contains large amount of data(6000). I wrote the following query for some operaton which is working fine.

```
UPDATE productlistprice prl SET prl.value = (
    SELECT minprice FROM(
       SELECT  MIN(prl.value) AS minprice, prv.productmasterid AS masterprid 
            FROM product pr , productlistprice prl, productvariation prv 
              WHERE prv.productmasterid = (
       SELECT prv.productmasterid  FROM  productvariation pv 
              WHERE pv.productid = pr.uuid) 
              AND prl.productid = pr.uuid AND prl.productid  = prv.productid 
                    GROUP BY prv.productmasterid) 
              WHERE masterprid = (SELECT prv.productmasterid
              FROM productvariation prv WHERE prv.productmasterid = prl.productid 
                    GROUP BY prv.productmasterid)) 
              WHERE prl.productid = (
       SELECT prv.productmasterid FROM productvariation prv 
              WHERE prv.productmasterid = prl.productid 
GROUP BY prv.productmasterid ); 
```

But the performance of this query is bit slow. it is taking 21 seconds to update the records. Where can i improve this query. Any suggestions will be greatly appriciated

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:25:50.913

不了解底层数据模型会使此查询难以理解。比如我看不懂update语句的where子句：

```
update productlistprice prl
   ...
 where prl.productid = (select prv.productmasterid
                          from productvariation prv
                         where prv.productmasterid = prl.productid
                         group by prv.productmasterid); 
```

这是否意味着您只想更新 ID 等于 productmasterID 的记录？group by 子句的目的是什么？

为了更好的可读性：

```
update productlistprice prl
   set prl.value =
       (select minprice
          from (select min(prl.value) as minprice
                      ,prv.productmasterid as masterprid
                  from product          pr
                      ,productlistprice prl
                      ,productvariation prv
                 where prv.productmasterid = (select prv.productmasterid
                                                from productvariation pv
                                               where pv.productid = pr.uuid)
                   and prl.productid = pr.uuid
                   and prl.productid = prv.productid
                 group by prv.productmasterid)
         where masterprid = (select prv.productmasterid
                               from productvariation prv
                              where prv.productmasterid = prl.productid
                              group by prv.productmasterid))
 where prl.productid = (select prv.productmasterid
                          from productvariation prv
                         where prv.productmasterid = prl.productid
                         group by prv.productmasterid); 
```

# opengl - DXT5 的预乘 alpha

> ID：13230851
> 
> 赞同：1
> 
> 时间：2012-11-05T11:08:33.200
> 
> 标签：opengl, textures, alpha, premultiplied-alpha

我将具有透明 alpha 的 DDS 图像 (DXT5) 加载到 OpenGL 中。因为 alpha 没有预乘并且不能根据 DXT5[规范](http://directxtex.codeplex.com/workitem/667)进行预乘，所以我在纹理的可见部分周围出现了薄薄的黑色光晕，因为我在 GPU 上进行了一些混合操作。我的问题是：什么是最好的解决方法为此。我的 OpenGL 渲染器在从 IO 加载的每一帧上更新场景纹理，所以如果我解压缩 DDS 然后 pre-muliply ，然后压缩回来我会得到巨大的开销。我认为的另一个选择是添加另一个渲染通道并做 pre - 在片段着色器中相乘并渲染到纹理，然后将其用于主通道。这增加了整个管道的开销，因为我已经有一个下降通道数。这里有哪些额外的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:58:25.483

为什么不让你的着色器在原位做 alpha 的预乘，然后做你通常要做的事情？

无需将其渲染为纹理。*对于需要预乘的所有*纹理，始终在着色器中进行预乘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:37:02.023

问题解决了。我的 DDS 纹理损坏。我在片段着色器中默认执行的手动预乘法与有效的 DXT5 完美配合。

# android - Abstract Android screen to 320x480 dp?

> ID：13230853
> 
> 赞同：1
> 
> 时间：2012-11-05T11:08:43.010
> 
> 标签：android, screen-resolution

is there something I could do to tell the Android that it should abstract the whole screen to 320x480 dp?

Yes, I'm porting an iOS app.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:14:15.873

通过使用 dp，您已经被告知 Android 转换基于 320x480 的像素

320x480 是 dp 的基线，这意味着在 mdpi 设备上 320dp x 480dp = 320px x 480px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:23:10.457

看看这里，我认为它应该有助于[http://developer.android.com/design/style/devices-displays.html](http://developer.android.com/design/style/devices-displays.html)

编辑 - 我实际上是想把你指向[这里](http://developer.android.com/training/multiscreen/screendensities.html)，但你也可以从上面的链接中找到它

我不知道您是否在阅读链接或其他方面有困难，但这是从第二个链接中获取的必要部分

> **支持不同的密度**
> 
> 本课向您展示如何通过提供不同的资源和使用与分辨率无关的测量单位来支持不同的屏幕密度。
> 
> 使用与密度无关的像素 在设计布局时必须避免的一个常见陷阱是使用绝对像素来定义距离或大小。用像素定义布局尺寸是一个问题，因为不同的屏幕具有不同的像素密度，因此相同数量的像素可能对应不同设备上的不同物理尺寸。因此，在指定尺寸时，请始终使用 dp 或 sp 单位。dp 是与密度无关的像素，对应于 160 dpi 像素的物理尺寸。sp 是相同的基本单位，但按用户首选的文本大小（它是与比例无关的像素）进行缩放，因此在定义文本大小时应使用此测量单位（但绝不用于布局大小）。
> 
> 例如，当您指定两个视图之间的间距时，请使用 dp 而不是 px：

```
 <Button android:layout_width="wrap_content" 
     android:layout_height="wrap_content" 
     android:text="@string/clickme"
     android:layout_marginTop="20dp" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:23:36.790

如果您希望**设备**中的输出尺寸为 320 X 480，您可以直接从您的项目中运行该应用程序。默认情况下，android 项目始终适合 320 X 480 尺寸。如果您想在模拟器中使用它，请转到**AVD 管理器**，创建一个新的模拟器，然后在**皮肤**部分中，选择**内置**为**HVGA**类型。你会得到这个。谢谢。

# c# - 引导 WPF

> ID：13230854
> 
> 赞同：2
> 
> 时间：2012-11-05T11:08:48.077
> 
> 标签：c#, wpf, bootstrapping

我正在寻找关于 WPF 中引导的良好教程或文章。我是 WPF 新手，不熟悉引导程序。

谢谢马胡斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:12:46.840

MSDN 上有一篇关于引导的文章：

[http://msdn.microsoft.com/en-us/library/ff921139(v=pandp.20).aspx](http://msdn.microsoft.com/en-us/library/ff921139(v=pandp.20).aspx)

祝 WPF 好运。

# javascript - 手机上的js内存泄漏

> ID：13230861
> 
> 赞同：0
> 
> 时间：2012-11-05T11:09:30.277
> 
> 标签：javascript, jquery, jquery-mobile, memory-leaks, socket.io

因此，我们的移动 Web 应用程序中存在内存泄漏。它在桌面上看不到，但它会使移动 Safari 浏览器（iOS 4、5、6）崩溃，并使整个 Android 操作系统崩溃（在 2.2.x 版本上检查）。

当网站长时间打开时，通常会发生崩溃。

我们用：

1.  headjs（用于js加载）
2.  yepnope（用于 CSS 加载）
3.  套接字.io
4.  jQuery手机

所以我有以下问题：

1.  以下哪个库会导致内存泄漏？
2.  我们应该审查使用 jquery 选择器的代码，还是应该仔细使用 socket.io？
3.  如果我们在其中加载 20 多个短脚本，脚本加载器（headjs，yepnope）可能会导致内存泄漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:35:40.373

众所周知，如果您不小心， jQ mobile 会[导致泄漏。](https://github.com/jquery/jquery-mobile/issues/4419)总而言之，我认为您列出的所有 4 个工具包都可能导致问题，尤其是当您一起使用它们时。
也许您能做的最好的事情就是尽可能地坚持一个库，并专注于以将泄漏保持在最低限度的方式使用它。移动浏览器的问题在于，还有更多的闭包魔法在发生，而且 JS 引擎还没有那么广为人知/理解。如果您曾经涉足为触摸设备编写 JS 事件委托代码，您一定已经注意到，闭包数量惊人，并且 DOM 引用可能无法及时被 GC 处理。您对此无能为力。

一般来说，我倾向于避免使用太多的库（老实说，我是那些会爬起来避免使用任何库的人之一），所以我可能会有偏见。但是无论你怎么写：headjs 和 jQuery 以`ready`你可以想象的所有方式检查事件的倾向的结合可能会很麻烦：你正在动态加载新元素，你检查过这是否会`ready`多次触发 jQ 的事件？如果是这样，您几乎肯定会一遍又一遍地绑定相同的处理程序。每个 ajax 请求也可能触发其他工具包做同样的事情，这可能会再次触发 jQuery，进而可能再次触发其他库，这...
你得到了图片。尽管我远非专家，但我的猜测是一个库可能会触发另一个库，反之亦然，从而导致死锁场景。我基于对我不久前遇到的类似问题的模糊回忆，以及您使用各种库动态加载脚本/CSS的事实，以及 jQ 没有`ready`最后解除绑定其所有侦听器的事实我检查的时间。如果我的预感是*正确的*，您可以使用一个邪恶的全局变量作为快速修复：

```
var jQReady = false;
jQuery(document).load(function()
{
    if (jQReady === true)
    {//was loaded
        return;
    }
    jQready = true;//<-- set to true on first invocation of callback
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:16:15.597

很酷，您发现了问题，但正如 Elias 所说，尝试减少您使用的框架数量。

由于 JQ Mobile 无论如何都依赖 jQuery（所以当你需要它时它就在那里），我强烈建议删除 HeadJS 和 YepNope，并使用 jQuery 的 $.get() 加载你的资源。

无需包含冗余功能。

也就是说，我在最新版本的 head 中添加了 css 加载，但老实说，如果你已经使用 jquery 并且不使用响应式设计部分，那么你并不需要它。

# c# - 当文本的宽度大于列的宽度时，跨越一个 DataGridCell

> ID：13230866
> 
> 赞同：2
> 
> 时间：2012-11-05T11:09:38.433
> 
> 标签：c#, wpf, wpfdatagrid

如果左侧单元格的内容大于其宽度，如何在 DataGrid 中使用右侧空单元格来显示继续文本？

如果正确的单元格有数据，则可以使用`TextTrimming="CharacterEllipsis"`

```
------------------------------
| 姓名 | 姓氏 |
-------------------------------------------
| 呜呜呜……| 姓氏|
-------------------------------------------

但如果右侧单元格为空，则类似于：

-------------------------------------------
| 姓名 | 姓氏 |
-------------------------------------------
| Loooooooong Nameeeeee |
-------------------------------------------

```

是否有任何属性可以使文本像这样？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:44:57.123

一种选择是使用 Grid 而不是 DataGrid。

然后向您的类添加一个属性，例如 TextIsLong

向 ItemTemplate 添加 DataTrigger，检查 TextIsLong 是否为真，如果为真，则将该 TextBlock 的 Grid.ColumnSpan 设置为 2

# php - 解析的 SimpleXMLElement 缺少属性

> ID：13230868
> 
> 赞同：2
> 
> 时间：2012-11-05T11:09:49.390
> 
> 标签：php, xml, simplexml

我有一小块希望在 PHP 中解析的 XML。标签没问题，`Works`我可以解析所有属性就好了。我遇到的问题是`Doesnt`标签，似乎因为它具有我无法访问属性的文本内容。

```
<Export id="123" apples="pears">
    <Works foo="bar" id="234"/>
    <Doesnt bar="foo" id="345">Stack Exchange</Doesnt>
</Export> 
```

我运行以下（非常简单的）代码：

```
$plain = '<Export id="123" apples="pear....esnt></Export>'; // as above
$sxe = simplexml_load_string($plain);
$json = json_encode($sxe);
$native = json_decode($json);
print_r($sxe, true);
print_r($native, true); 
```

我最终得到以下输出：

```
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [id] => 123
            [apples] => pears
        )
    [Works] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [foo] => bar
                    [id] => 234
                )
        )
    [Doesnt] => Stack Exchange
)

stdClass Object
(
    [@attributes] => stdClass Object
        (
            [id] => 123
            [apples] => pears
        )

    [Works] => stdClass Object
        (
            [@attributes] => stdClass Object
                (
                    [foo] => bar
                    [id] => 234
                )

        )

    [Doesnt] => Stack Exchange
) 
```

如您所见，`SimpleXMLElement`对象和`stdClass`对象都缺少`<Doesnt>`标签的所有属性。**是否有一些解决方法或替代方法来解决它们？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:16:33.740

正如@Gordon 所说，您无法通过`print_r`and了解全部情况`var_dump`:`SimpleXMLElement Object`具有一些不寻常的属性，因此这些转储函数将无法正确表示其结构。

不过，如果您改用它：

```
$sxe = simplexml_load_string($plain);
var_dump($sxe->Doesnt); 
```

...您会看到这些属性及其值完好无损。

但仔细看看输出：

```
object(SimpleXMLElement)[3]
  public '@attributes' => 
    array (size=2)
      'bar' => string 'foo' (length=3)
      'id' => string '345' (length=3)
  string 'Stack Exchange' (length=14) 
```

这有点不寻常，你不觉得，`string`只是挂在那里有价值——没有任何相应的财产拥有它吗？但这正是直接转换成问题的原因。JSON（原样）处理简单的结构——对象和数组——并且这种结构不能在它们中正确表示：您至少必须引入一些额外的属性来存储文本内容。

不过，这种方法似乎很受欢迎（在某种程度上），而且您肯定并不孤单：这是 PHP 错误跟踪系统中的一张*公开* [票](https://bugs.php.net/bug.php?id=54632)。

# java - 拆分文本文件的字符串并将其存储在HashMap中

> ID：13230872
> 
> 赞同：0
> 
> 时间：2012-11-05T11:10:11.263
> 
> 标签：java, hashmap

我有一个文本文件，其数据如下：

```
Surrender~abc~nov@2012
Surrender~bnc~bhdgvx
Surrender~nkhjb~bcdjh
.
.
. 
```

我想逐行分隔数据，并将 Hashmap 中的第二列和第三列值存储为 2nd -> key 和 3rd -> value，并检查用户输入的值是否存在于 Hashmap 中并返回 true。

我试过跟随但得到`java.lang.ArrayIndexOutOfBoundsException: 3`..请指导。

```
HashMap hm = new HashMap();
FileInputStream fstream = new FileInputStream("Surrender.txt");
DataInputStream in = new DataInputStream(fstream);
BufferedReader br = new BufferedReader(new InputStreamReader(in));

String strLine;
while ((strLine = br.readLine()) != null)   {
    String[] parts = strLine.split("~");
    for (int i = 0; i <= parts.length; i++) {
       if(!parts[i].equalsIgnoreCase("Surrender")){
    String key=parts[i];
    String value=parts[i++];
    if(key!=null && value!=null)
    hm.put(key,value);
}
    }
}

System.out.println("HashMap size..." + hm.size());
in.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:12:39.810

由于您的每一行都如下所示：

```
Surrender~abc~nov@2012 
```

拆分后有三个部分`~`：

*   `Surrender`
*   `abc`
*   `nov@2012`

这些部件的编号从`0`到`2`。

**解决方案：**不要遍历`parts`. 改为这样做：

```
hm.put(parts[1], parts[2]); 
```

**删除**这些行：

```
for (int i=0;i<=parts.length;i++) {
    if (!parts[i].equalsIgnoreCase("Surrender")) {
        hm.put(parts[i], parts[++i]);
    }
} 
```

**注意：**使用泛型`Map`：

```
Map<String, String> hm = new HashMap<>(); // Java 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:14:52.447

替换这个：

```
for (int i = 0; i <= parts.length; i++) {
    if (!parts[i].equalsIgnoreCase("Surrender")) {
        hm.put(parts[i], parts[++i]);
    }
} 
```

和

```
if (parts.length > 2 && !parts[0].equalsIgnoreCase("Surrender")) {
    hm.put(parts[1], parts[2]);
} 
```

如果问题中提供的数据总是三个部分，您可以跳过`parts.length > 2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:17:18.357

首先，请在您的 HashMap 上使用类型...

```
HashMap<String, String> hm = new HashMap<String, String>(); 
```

其次，如果拆分数组的大小固定，为什么要遍历它？我还相信，当您使用 [++i] 访问元素时，您会为自己制造问题，这会增加您的计数器。在通过拆分的循环的最后一次迭代中，这可能会使其超出范围。

尝试类似：

```
if (parts[0].equalsIgnoreCase("Surrender")) {
    hm.put(parts[1], parts[2]);
} 
```

# php - 像帖子中的评论一样抛出异常

> ID：13230876
> 
> 赞同：0
> 
> 时间：2012-11-05T11:10:22.427
> 
> 标签：php, facebook, facebook-like

当我尝试使用 facebook php api 点赞评论时遇到问题

要“喜欢”我使用的[这条评论](http://www.facebook.com/MultiApps/posts/414687428597397?comment_id=3722461&offset=0&total_comments=1)

```
try {
    $temp = $facebook->api('/3722461/likes?access_token="' . $facebook->getAccessToken() . '"', 'POST');
    echo "ok";
} catch (Exception $e) {
    var_dump($e);
} 
```

但这会引发异常

```
["error"]=>
    array(3) {
      ["message"]=>
      string(36) "(#100) The parameter url is required"
      ["type"]=>
      string(14) "OAuthException"
      ["code"]=>
      int(100)
    } 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T18:32:19.847

某些帖子（例如活动）不符合获得赞的条件（即您可以关注它但不能赞） - 在这些情况下，您会收到此错误

# iphone - 如何使用 iPhone 或 iPad 在另一个 iframe 中滚动 iframe

> ID：13230877
> 
> 赞同：2
> 
> 时间：2012-11-05T11:10:37.230
> 
> 标签：iphone, ipad, iframe, scroll, touch

我正在用 iWeb 创建一个网站。我在我的网络上使用了一些 iframe，我也希望能够使用触摸设备滚动内容，比如 iPhone 或 iPad。

我已经使用这个脚本（[https://gist.github.com/2388015 ）找到了这个问题的解决方案（](https://gist.github.com/2388015) [iframe和ipad上的safari，用户如何滚动内容？](https://stackoverflow.com/questions/4599153/iframes-and-the-safari-on-the-ipad-how-can-the-user-scroll-the-content)）。

它有效，但我发现了另一个问题。当要滚动的 iframe 在另一个 iframe 内时，它不会一直正常工作。有时可以在 iPad 或 iPhone 上用一根手指很好地滚动它，但有时不能。

我创建了一个 TEST 页面来向您展示它是如何工作的：

[http://www.davidpratsjuan.com/TESTS](http://www.davidpratsjuan.com/TESTS)

请尝试一下，如果您知道究竟是什么问题以及如何解决它，请告诉我。

# c# - 将图像添加到画布时得到空白结果

> ID：13230880
> 
> 赞同：1
> 
> 时间：2012-11-05T11:10:47.403
> 
> 标签：c#, windows-phone-7, windows-phone, windows-phone-7.1.1

我是 Windows Phone Dev. 的新手，我打算这样做：

1.  用图像A设置画布背景；
2.  在图像 A 上添加另一个图像 B。

**我所取得的成就**：

通过使用`ImageBrush`，我可以设置画布背景图像，但是在尝试使用`Canvas.Children.Add(imageB)`将 imageB 放在图像 A 上时遇到问题。运行应用程序时，它只显示图像 A，顶部没有图像 B。

没有空引用异常，我确信图像 A 和 B 都已加载。

**我的问题**是：如何设置画布以显示 ImageB 并保持 imageB 响应 Manipulation 事件，以便我以后可以触摸和移动它？

这是我的相关代码：

```
ImageBrush brush = new ImageBrush();
Image imageB = new Image();
imageB.Source = new BitmapImage(new Uri("/Assets/imageB.png", UriKind.Relative));

//...here I set the ImageBrush as imageA
canvas.Background = brush; // Can display imageA 

canvas.Children.Add(imageB);
imageB.ManipulationDelta += ImageB_ManipulationDelta;
imageB.ManipulationCompleted += ImageB_ManipulationCompleted; 
```

我之所以坚持将图像 B 放在图像 A 之上，是因为我打算在图像 B 上设置 EventHandler，以便我可以使用图像 B 来响应`ManipulationDelta`事件。

我对此做了一些研究：

[Windowsphone 极客：使用图像](http://www.windowsphonegeek.com/tips/wp7-working-with-images-content-vs-resource-build-action)

[Windows Phone 7 拖拽UI](http://geekswithblogs.net/TechTwaddle/archive/2010/12/19/windows-phone-7--dragging-and-flicking-ui-controls.aspx)

但没有运气。

谢谢您的帮助 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:58:55.447

您的代码看起来像您创建了一个`Image`被调用`imageB`但您从未设置它。线

```
Image.Source = new BitmapImage(new Uri("/Assets/imageB.png", UriKind.Relative)); 
```

看起来很奇怪，不是吗？

```
imageB.Source = new BitmapImage(new Uri("/Assets/imageB.png", UriKind.Relative)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:44:07.600

我想我刚刚发现问题出在哪里：

我没有设置`Canvas.SetLeft`and `Canvas.SetTop`，我应该在使用之前添加两行`canvas.Children.Add()`：

```
...
Canvas.SetLeft(imageB, point.X);
Canvas.SetTop(imageB, point.Y);
canvas.Children.Add(imageB);
... 
```

和中提琴，问题解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T15:09:00.600

我和你有同样的问题。经过大量搜索，我终于找到了解决方案。此代码将按您的预期工作：

```
BitmapImage img = new BitmapImage(new Uri("Assets/imageB.png", UriKind.Relative));
img.CreateOptions = BitmapCreateOptions.None;
Image imageB = new Image();
imageB.Source = img;
img.ImageOpened += (s, e) =>
{
    canvas.Children.Add(imageB);
}; 
```

# android - android sqlite 数据库磁盘映像格式错误

> ID：13230881
> 
> 赞同：1
> 
> 时间：2012-11-05T11:10:46.973
> 
> 标签：android, database, sqlite

我在 android 应用程序中的数据库有问题。

之后，我将数据库从资产文件夹复制到数据库路径，一些查询工作只是 find & 其他查询返回：

数据库磁盘映像格式错误。但是当我使用 sqlbrowser 检查这些表时，它工作得很好。注意：所有查询都只是选择语句。

# .net - 获取请求：具有相同键的多个标头选项？

> ID：13230883
> 
> 赞同：1
> 
> 时间：2012-11-05T11:10:54.240
> 
> 标签：.net, api, rest, authorization, restsharp

我正在使用 API，它需要这样的标头：

> 授权：ClientKey keyhere
> 授权：UserKey key2here

当我将此参数添加到 RestSharp 的请求时，如下所示：

```
request.AddHeader("Authorization", "ClientKey 111111");
request.AddHeader("Authorization", "UserKey 222222"); 
```

我明白了，只写了最后一个。这是因为他们有相同的密钥。但是我该如何避免呢？

我知道，这是服务器端的错误行为，但此代码已在其他平台的生产中使用。

**更新**

我找到了解决方案：

```
request.AddHeader("Authorization", "ClientKey 111111, UserKey 222222"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:10:59.673

请参阅第[14.8](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)节HTTP RFC 的授权：

> 希望通过服务器验证自己的用户代理（通常但不一定在收到 401 响应后）通过在请求中包含 Authorization 请求头字段来实现。

另见[3.2.2](https://www.ietf.org/rfc/rfc2617.txt) RFC 2617 的授权请求标头部分：

> 客户端将重试请求，传递一个根据上述框架定义的 Authorization 标头行，使用如下。

**两个引文都**谈到**an**和标题。根据 RFC，*可以*多次设置标头。但是服务器将无法根据 RFC 选择包含凭据的*一个标头。****`Authentication`***

 *****服务器*仅使用一个（最后一个此类标头）即可正常工作。你的*客户*坏了。****

# android - 如何在适用于 iOS 和 Android 的 Adob e Flex Mobile 应用程序中通过 Bonjour(Zeroconf) 发现设备

> ID：13230896
> 
> 赞同：0
> 
> 时间：2012-11-05T11:11:36.857
> 
> 标签：android, ios, flex3, flash-builder, bonjour

我正在编写针对 iOS 和 Android 平台的 Adob​​e Flex 框架中的应用程序。我的应用程序假设与网络上的其他硬件设备“对话”，例如打印机、游戏机、计算机等。

我保证 Bonjour 会为我做这件事。[我在这里](http://www.opentekhnia.com/?p=227)找到了 Bonjour 的本地扩展名 (.ane)

问题是这仅适用于 iOS 设备，不适用于 android。

我的问题：有没有其他方法可以在 Adob​​e Flex 框架中为这两个平台实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:47:13.177

我找不到通过 Bonjour 执行此操作的方法，但我找到了一种方法...只需将 UDP ane 文件安装到您的项目中，您就可以在端口 1900 上对网络的多播 IP 地址进行自己的 uPNP 调用。
您可以在 xml 中发现设备和解析服务，
这里是 ane 的链接： [https ://github.com/wouterverweirder/AIR-Mobile-UDP-Extension](https://github.com/wouterverweirder/AIR-Mobile-UDP-Extension)

祝你好运！

# asp.net - 使用 Code First 迁移发布我的数据库（包部署）

> ID：13230902
> 
> 赞同：6
> 
> 时间：2012-11-05T11:12:08.623
> 
> 标签：asp.net, asp.net-mvc, visual-studio, visual-studio-2012, entity-framework-migrations

我有一个 VS2012 MVC4 解决方案（EF5）。编码时，我使用我的个人计算机和安装在同一台机器上的 SQL Express。每次我需要向公司发布更新时，我都会创建一个包 (.zip)，然后将这个包导入公司的 IIS（无法从我的开发计算机访问）。每次我在公司的 IIS 服务器上发布我的解决方案时，我都会重新创建整个数据库。那是过去...

现在，我更改了我的解决方案并使用 Code First 迁移。需要时（实体更改），我通过“包管理器控制台”（更新数据库）更新我的本地数据库。

**我的问题**：我需要做什么来更新公司 IIS 上的数据库？

我在解释页面（[http://msdn.microsoft.com/en-us/library/dd465337.aspx](http://msdn.microsoft.com/en-us/library/dd465337.aspx)）上看到了下面的屏幕截图，但是当我在我的 VS2012 上打开发布向导时，我没有相同的屏幕。

下面是在文档页面上看到的屏幕：

![在此处输入图像描述](../Images/19a79e4bc04f9c4e323018aadd6fd4de.png)

下面是我的屏幕：

![在此处输入图像描述](../Images/72107f727919aa4c4c285e188e6b8aad.png)

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T22:13:51.797

您可以通过编辑 Properties\YourProject - WebDeploy.pubxml 来启用该复选框以查找 PublishDatabaseSettings

```
<PublishDatabaseSettings>
  <Objects xmlns="">
    <ObjectGroup Name="Namespace.Models.YourDBClass" Order="1" Enabled="True">
      <Destination Path="your-connection-string-goes-here" />
      <Object Type="DbCodeFirst">
        <Source Path="DBMigration" DbContext="Namespace.Models.YourDBClass, AssamblyName" MigrationConfiguration="Namespace.Migrations.Configuration, Assambly" Origin="Convention" />
      </Object>
    </ObjectGroup>
  </Objects>
</PublishDatabaseSettings> 
```

通过继承 DbContext 的类更改 Namespace.Models.YourDBClass，更改 Namespace.Migratins.Configuration 以适应您的迁移配置命名空间，并使用您的 Assambly 名称更改 Assambly。

保存并打开发布向导，您将拥有该复选框。

希望有所帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T13:49:39.330

我也见过这种情况。我不确定部署工具使用什么启发式方法来识别 EF 的存在，但该选项偶尔会出现。

发布工具所做的事情很容易复制。您可以在 web.config 文件（或 web.config.release 中的转换）中指定数据库初始化程序来运行迁移。它看起来类似于以下内容（用于转换）：

```
 <entityFramework>
     <contexts xdt:Transform="Insert">
       <context type="PlantonDbContextName, PlantonAssemblyName">
         <databaseInitializer
           type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[
               [PlantonDbContextName, PlantonAssemblyName], 
               [PlantonConfigurationName, PlantonAssemblyName]
             ], EntityFramework" />
       </context>
     </contexts> 
 </entityFramework> 
```

泛型在配置文件中很难看，但您也可以在代码中设置初始化程序：http: [//msdn.microsoft.com/en-us/library/hh829293 (v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/hh829293(v=vs.103).aspx)

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T02:01:25.017

让我试一试，问一个问题：

这以前是 VS2010 项目吗？:-)

我问是因为转换过程无法将 VS2010 升级到 VS2012 并保持发布配置文件完整。只是编辑太多。

最好的办法是删除您拥有的任何现有发布配置文件（文件）并重新创建新的发布配置文件。

不过，请确保首先通过 Ode 的答案指定正确的 EF 上下文。发布向导需要能够在创建配置文件之前查看您的上下文。

[实体框架代码优先数据迁移不适用于 VS2012 Web 部署](https://stackoverflow.com/questions/12514521/entity-framework-code-first-data-migrations-not-working-with-vs2012-web-deploy)

# html - 仅颜色定位：悬停不只是锚点

> ID：13230904
> 
> 赞同：-1
> 
> 时间：2012-11-05T11:12:09.907
> 
> 标签：html, css

使用伪选择器 :hover 时，颜色会发生变化（注意大样式表，但它不会被覆盖）；但是当我将它应用于锚标签本身时，它并不适用。

CSS：

```
#testimonialContent {
    width:640px;
    position: relative;
    height: auto;
    padding-top: 15px;
    font-size: 18px;
    font-family: Gotham-Book, Arial;
    color: #4d4d4f;
    *padding-top: 0;
}
#testimonialContent span {
    width: 600px;
    letter-spacing: -1px;
    letter-spacing: 0px\9;
    float: right;
    margin-top: -3px;
    *margin-top: -30px;

}

#testimonialContent span strong {
    position: relative;
    letter-spacing: 0px;
    display: block;
    top: 8px;
    font-size: 14px;
}
#testimonialContent a{
    font-size: 12px;
    letter-spacing: 0px;
    position: relative;
    color: #86a53e;
    margin-top: -10px;
    float: right;   
}
#testimonialContent a:hover{
    color: red;
} 
```

HTML：

```
<div id="testimonialContent">
    <br /><br /><br /><br /><br /><img id="quoteOne" src="http://www.qwertyuiop.co.uk/wp-content/themes/designworks2012/images/quote1.png">
    <span><?php
        query_posts(array(
            'cat' => 39,
            'order' => 'ASC', // ASCEND
            'orderby' => 'rand',
            'showposts' => 1,
            ));
        $wp_query->is_archive = true; $wp_query->is_home = false;
        if (have_posts()) : while (have_posts()) : the_post();
        the_content();
        endwhile; endif;

    ?>
    <a href="#" id="nextQ">NEXT QUOTE</a>
    </span>
    <script>
        var str = $('#testimonialContent').html();
        var x = str.replace("<p>","");
        $('#testimonialContent').html(x);
        var x = str.replace("</p>","");
        $('#testimonialContent').html(x);
    </script>
</div> <!-- end testimonialContent --> 
```

正如我所说，它不会在样式表的某个地方被覆盖。（放在底部）。

编辑：

我有一个链接，这个链接显示为黑色，但是 css`color: #86a53e;`应该以它为目标。它不是。然而，伪选择器的目标是锚点，而普通的锚点不是。它将悬停在红色上，但显示为黑色。它不应该是黑色的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:16:33.097

那是因为您正在应用与它之前完全相同的颜色：悬停：

```
#testimonialContent a{
...
color: #86a53e;
...
}

#testimonialContent a:hover{
**color: #86a53e;**
} 
```

如果你改变第二个，你会注意到你想要的行为。

# java - 性能测试已部署的 servlet 应用程序？

> ID：13230907
> 
> 赞同：1
> 
> 时间：2012-11-05T11:12:25.867
> 
> 标签：java, servlets, jmeter, performance-testing, requestdispatcher

目前，我有一个基于 servlet 的应用程序，它从存档数据库中检索数据并将其作为 XML 通过 HTTP 发送回客户端。

我想创建一个“X”测试客户端来测试我的数据库检索 servlet 的以下内容：

*   最短 HTTP 响应时间
*   最大 HTTP 响应时间
*   从服务器收到的错误

该应用程序几乎处于开发的部署阶段，但是我需要一个测试客户端，我可以在其部署后使用它来检查应用程序是否正常执行，或者如果我需要在其环境中进行维护（例如重新索引数据库），例如 6个月。

我希望它为应用程序生成数千个 HTTP 请求（垃圾邮件）。

到目前为止，我可以想到两种方法来做到这一点：

1.  多线程 Java 控制台应用程序，可通过我的计算机的多个线程同时发送多个 HTTP 请求。
2.  一个单独的 java servlet，它通过多个线程同时从一台服务器向另一台服务器发送 HTTPS 请求。

我认为 servlet 测试应用程序将是最适合这项工作的，因为默认情况下它已经是多线程的。

我将如何实现这一点，我只是使用**requestDispatcher**类来调用另一个 servlet 还是有更好的方法？

欢迎任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:38:15.307

Maybe you can try [apache benching tool (ab)](http://httpd.apache.org/docs/2.2/programs/ab.html). It's simple and useful. You just need to specify client threads number, total request count, and the URL you want to test, then you can get what you need.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:23:56.907

我建议您查看[JMeter](http://jmeter.apache.org/)。它是模拟 Web 应用程序/servlet（和其他）负载的好工具。您可以定义（分支）工作流、多个线程、线程组、延迟、加速时间等。

我认为它完全符合您的选择 1) 标准。

干杯，

# c# - 将所有流量压缩到 WCF

> ID：13230910
> 
> 赞同：4
> 
> 时间：2012-11-05T11:12:31.980
> 
> 标签：c#, .net, wcf, compression

我们有几个 WCF（数据）服务。由于我们的客户很少通过糟糕的网络连接连接到这些服务，我们希望确保**所有**流量都被压缩。所以，我们想**自动**压缩每个请求和响应到服务器。

我们现在使用 IIS 8 和**.NET 4+**。

我们怎样才能以最自然的方式做到这一点？（通过 XML 配置等）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:24:08.713

.NET 4.5 引入了开箱即用的 GZIP 压缩 [http://msdn.microsoft.com/en-us/library/aa751889.aspx](http://msdn.microsoft.com/en-us/library/aa751889.aspx)

查看 CompressionFormat 值

# asp.net-mvc - 实体框架 - 向父表插入重复的多对多关系

> ID：13230918
> 
> 赞同：3
> 
> 时间：2012-11-05T11:12:48.393
> 
> 标签：asp.net-mvc, entity-framework-5

我正在尝试使用 Entity Framework 5 进行具有多对多关系的简单插入。

我有两个 POCO 课程如下。

```
public class Category
{
    public virtual string Title { get; set; }
    public virtual DateTime EntryDate { get; set; }
    public virtual DateTime LastUpdated { get; set; }
    public virtual ICollection<Article> Articles { get; set; }
}

public class Article
{
    public virtual string Title { get; set; }
    public virtual string Content { get; set; }
    public virtual DateTime EntryDate { get; set; }
    public virtual DateTime LastUpdated { get; set; }
    public virtual ICollection<Category> Categories { get; set; }
} 
```

以及下面流畅的api映射代码...

```
public class CategoryMap : EntityTypeConfiguration<Category>
{
    public CategoryMap()
    {
        this.ToTable("Categories");
        this.HasKey(x => x.ID);

        this.Property(x => x.Title).IsRequired().HasMaxLength(255);
    }
}

public class ArticleMap : EntityTypeConfiguration<Article>
{
    public ArticleMap()
    {
        this.ToTable("Articles");
        this.HasKey(x => x.ID);

        this.HasMany(x => x.Categories)
            .WithMany(x => x.Articles)
            .Map(x =>
            {
                x.ToTable("MapArticleCats");
                x.MapLeftKey("CategoryID");
                x.MapRightKey("ArticleID");
            });

        this.Property(x => x.Title).IsRequired().HasMaxLength(255);
        this.Property(x => x.Content).IsRequired().HasMaxLength(4000);
    }
} 
```

然后，实体框架将生成 Category 和 Article 表以及第三个映射表，其详细信息在 ArticleMap 代码 (MapArticleCats) 中指定，在 SQL Server 中如下所示。

ArticleID - int
CategoryID -int

下面的代码（给或取几行）将类别添加到我的控制器中的文章中。

```
IEnumerable<Category> GetCats = CategoryRepository.GetAll();

//DO SOME CODE TO FIGURE WHICH CATEGORIES I NEED.
IEnumerable<Category> Categories = InferCategoriesFromPostedData(Model.Categories, GetCats);

foreach (Category c in Categories)
{
    Article.Categories.Add(c);
} 
```

这似乎在插入时产生了一些奇怪的行为。它将向类别表 (DUPLICATE) 中插入一个新类别，并将新创建的 CategoryID（而不是原始 id）和正确的 ArticleID 插入到 MapArticleCats 表中。

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:16:44.010

好的，在提交这篇文章（以及以前的文章......非常有罪）之前我应该​​做的是搜索 StackOverflow 并更彻底地搜索。

我在[这里找到了我的问题的答案](https://stackoverflow.com/questions/11646299/entity-framework-duplicate-records-in-many-to-many-relationship)

发生的事情与上面的代码完全无关。这是因为我实际上将两个数据上下文注入到我的控制器中（一个在文章存储库中，另一个在类别存储库中），因此创建了重复记录。

**==================================================== =================================**
**重要编辑**
**================ ==================================================== =================**

只是为了详细说明我的答案...

即使在完成上述修复后，这仍然没有解决我无法更新导航属性（类别）的原始问题。解决方法如下...

我正在使用 AsNoTracking() 对实体（文章）进行模型绑定，如果您只想更新主实体本身但您不能对导航属性执行任何操作，则可以这样做。例如，在我的情况下，从文章中添加/删除类别。

这让我有点不知所措，因为我尝试了一种类似的方法，将实体从上下文中分离出来，但两种方式最终都给我留下了同样的问题，即无法操作导航属性。

解决此问题的方法是简单地建模绑定/正常选择实体。没有 AsNoTracking()，没有分离。并将实体附加回上下文时，请使用以下代码...

```
 public bool Attach(T entity)
    {
        T original = _dbSet.Find(entity.ID);
        _dbContext.Entry(original).CurrentValues.SetValues(entity);
        _dbContext.Entry(original).State = EntityState.Modified;

        return this.Commit();
    } 
```

这样你就可以在不做任何 AsNoTracking/Detaching 垃圾的情况下选择它，它会更新得很好。这对我来说没问题，有些人可能会觉得额外的 db 之旅有点令人反感，但为了所有适合我的悲伤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T13:41:56.110

在您的 dbcontext CaveChanges 调用中：

```
ChangeTracker.DetectChanges()

If ChangeTracker.HasChanges Then
    ChangeTracker.DetectChanges()
End If 
```

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T10:50:36.723

对我来说问题是我试图为导航属性设置新实例。

我在做：

```
IList<Category> categories = _categoryService.GetSomeCategories();
article.Categories = categories;
_articleService.UpdateArticle(article); 
```

相反，您应该像这样保留现有的 ICollection 实例：

```
IList<Category> categories = _categoryService.GetSomeCategories();
article.Categories.Clear();
foreach (var category in categories) {
  article.Categories.Add(category);
}
_articleService.UpdateArticle(article); 
```

重复的 PRIMARY KEY 错误消失了。

# android - 来自相机的身体/面部识别信息点击图片

> ID：13230923
> 
> 赞同：-9
> 
> 时间：2012-11-05T11:13:17.793
> 
> 标签：android, camera, face-recognition, picturegallery

请任何人给我想法/代码，显示有关从相机点击的图片的身体/面部识别的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:23:50.570

希望这可以帮到你。

```
 package com.detectcamera;
    import java.io.FileNotFoundException;
    import java.io.IOException;
    import java.io.OutputStream;

    import android.app.Activity;
    import android.content.ContentValues;
    import android.content.pm.ActivityInfo;
    import android.graphics.Canvas;
    import android.graphics.Matrix;
    import android.graphics.Paint;
    import android.graphics.PixelFormat;
    import android.graphics.RectF;
    import android.hardware.Camera;
    import android.hardware.Camera.AutoFocusCallback;
    import android.hardware.Camera.Face;
    import android.hardware.Camera.FaceDetectionListener;
    import android.hardware.Camera.PictureCallback;
    import android.hardware.Camera.ShutterCallback;
    import android.net.Uri;
    import android.os.Bundle;
    import android.provider.MediaStore.Images.Media;
    import android.util.Log;
    import android.view.LayoutInflater;
    import android.view.Menu;
    import android.view.SurfaceHolder;
    import android.view.SurfaceView;
    import android.view.View;
    import android.view.ViewGroup.LayoutParams;
    import android.widget.Button;
    import android.widget.LinearLayout;
    import android.widget.TextView;

    public class MainActivity extends Activity implements SurfaceHolder.Callback {

Camera camera;
SurfaceView surfaceView;
SurfaceHolder surfaceHolder;
boolean previewing = false;
LayoutInflater controlInflater = null;

Button buttonTakePicture;
TextView prompt;
final int RESULT_SAVEIMAGE = 0;
    Paint paint = new Paint();
  //  List<Camera.Face> faces = new ArrayList<Camera.Face>();
Matrix matrix = new Matrix();
RectF rect = new RectF();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    getWindow().setFormat(PixelFormat.UNKNOWN);
    surfaceView = (SurfaceView) findViewById(R.id.camerapreview);
    surfaceHolder = surfaceView.getHolder();
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    controlInflater = LayoutInflater.from(getBaseContext());
    View viewControl = controlInflater.inflate(R.layout.control, null);
    LayoutParams layoutParamsControl = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    this.addContentView(viewControl, layoutParamsControl);

    buttonTakePicture = (Button) findViewById(R.id.takepicture);
    buttonTakePicture.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            camera.takePicture(myShutterCallback, myPictureCallback_RAW,
                    myPictureCallback_JPG);
        }
    });

    LinearLayout layoutBackground = (LinearLayout) findViewById(R.id.background);
    layoutBackground.setOnClickListener(new LinearLayout.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            buttonTakePicture.setEnabled(false);
            camera.autoFocus(myAutoFocusCallback);
        }
    });

    prompt = (TextView) findViewById(R.id.prompt);
}

FaceDetectionListener faceDetectionListener = new FaceDetectionListener() {

    @Override
    public void onFaceDetection(Face[] faces, Camera camera) {

        Canvas canvas = new Canvas();
        rect.set(faces[0].rect);
           // dumpRect(rect, "before");
            matrix.mapRect(rect);
         //   dumpRect(rect, "after");
            canvas.drawRect(rect, paint);

        if (faces.length == 0) {
            prompt.setText(" No Face Detected! ");
        } else {
            prompt.setText(String.valueOf(faces.length)
                    + " Face Detected :) ");

        }

    }
};

AutoFocusCallback myAutoFocusCallback = new AutoFocusCallback() {

    @Override
    public void onAutoFocus(boolean arg0, Camera arg1) {
        // TODO Auto-generated method stub
        buttonTakePicture.setEnabled(true);
    }
};

ShutterCallback myShutterCallback = new ShutterCallback() {

    @Override
    public void onShutter() {
        // TODO Auto-generated method stub

    }
};

PictureCallback myPictureCallback_RAW = new PictureCallback() {

    @Override
    public void onPictureTaken(byte[] arg0, Camera arg1) {
        // TODO Auto-generated method stub

    }
};

PictureCallback myPictureCallback_JPG = new PictureCallback() {

    @Override
    public void onPictureTaken(byte[] arg0, Camera arg1) {
        // TODO Auto-generated method stub
        /*
         * Bitmap bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0,
         * arg0.length);
         */

        Uri uriTarget = getContentResolver().insert(
                Media.EXTERNAL_CONTENT_URI, new ContentValues());

        OutputStream imageFileOS;
        try {
            imageFileOS = getContentResolver().openOutputStream(uriTarget);
            imageFileOS.write(arg0);
            imageFileOS.flush();
            imageFileOS.close();

            prompt.setText("Image saved: " + uriTarget.toString());

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        camera.startPreview();
        Log.v("MainActivity","start camera preview..........................");
        camera.startFaceDetection();
    }
};

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,int height) {
    // TODO Auto-generated method stub
          if(previewing){
           camera.stopFaceDetection();
           camera.stopPreview();
           previewing = false;
          }

          if (camera != null){
           try {
            camera.setPreviewDisplay(surfaceHolder);
            camera.startPreview();

            prompt.setText(String.valueOf(
              "Max Face: " + camera.getParameters().getMaxNumDetectedFaces()));
            camera.startFaceDetection();
            previewing = true;
           } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
           }
          }

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub

    camera = Camera.open();
    camera.setFaceDetectionListener(faceDetectionListener);

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub
    camera.stopFaceDetection();
      camera.stopPreview();
      camera.release();
      camera = null;
      previewing = false;

} 
```

这将适用于 ICS 及以上 API。

# jquery - jQuery动画“正确”位置问题

> ID：13230924
> 
> 赞同：1
> 
> 时间：2012-11-05T11:13:21.723
> 
> 标签：jquery, jquery-animate

我有一个菜单，可以在我的网站的几个部分左右滑动。

最初我有一个函数'goto（）'，它被触发'onClick'，并且动画完全按预期工作。

我想清理 HTML，所以我在 JS 文件中的 click 事件中添加了一个绑定处理程序。

```
var navanchors = $('#navMain a');
var slider = $('#slider');

init = function() {

navanchors.bind('click', function() {

    var t = $(this);
    var id = t.attr('href');
    var dist = $(id).position().left;

    //animate to the div id.
    slider.animate({
        "right": (dist)
    }, 600);

});
};

init();​ 
```

左侧动画似乎按预期工作，但右侧动画已关闭。在第一次单击时，动画似乎移动了预期距离的两倍。在第二次单击时，它会在没有动画的情况下重置。

请在此处查看问题：http: [//jsfiddle.net/Kj4bU/1](http://jsfiddle.net/Kj4bU/1)

我已经搜索并尝试过，但不知所措。任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:04:12.583

您不会阻止`click`您处理的事件的默认行为发生。由于单击发生在锚元素上，因此浏览器将在动画期间尝试滚动到单击的锚的位置，从而导致您遇到问题。

您可以使用[event.preventDefault()](http://api.jquery.com/event.preventDefault)来禁止这种行为：

```
navanchors.on("click", function(e) {
    e.preventDefault();

    var t = $(this);
    var id = t.attr("href");
    var dist = $(id).position().left;

    //animate to the div id.
    slider.animate({
        "right": dist
    }, 600);
}); 
```

[你会在这里](http://jsfiddle.net/Kj4bU/4/)找到一个更新的小提琴。

（注意上面的代码使用[on()](http://api.jquery.com/on/)而不是[bind()](http://api.jquery.com/bind/)，从 jQuery 1.7 开始，前者优先于后者）。

# java - TimeZone.setTimeZone("est") 是否与 TimeZone.setTimeZone("EST") 不同

> ID：13230937
> 
> 赞同：3
> 
> 时间：2012-11-05T11:14:07.713
> 
> 标签：java, calendar

当我写这段代码时：

```
 Calendar cal = Calendar.getInstance();
   cal.setTimeZone(TimeZone.getTimeZone("EST"));
   System.out.println(cal.getTimeZone().getDisplayName()); 
```

输出是

```
 Eastern Standard Time 
```

但是当我写这段代码时：

```
 Calendar cal = Calendar.getInstance();
   cal.setTimeZone(TimeZone.getTimeZone("est"));
   System.out.println(cal.getTimeZone().getDisplayName()); 
```

我得到的输出是：

```
 GMT-05:00 
```

在设置时给出像“EST”和“est”这样的参数有什么区别`TimeZone.setTimeZone(String str)` （`str`在调用被认为是CASE SENSITIVE时要传递）？

API 没有提及任何相关内容：

```
getTimeZone

public static TimeZone getTimeZone(String ID)

Gets the TimeZone for the given ID.

Parameters:  
ID - the ID for a TimeZone, either an abbreviation such as "PST", a full name such as "America/Los_Angeles", or a custom ID such as "GMT-8:00".   
Note that the support of abbreviations is for JDK 1.1.x compatibility only and full names should be used.

Returns:
the specified TimeZone, or the GMT zone if the given ID cannot be understood. 
```

注意：我尝试使用`IST`和`ist`字符串。对于它给出的`IST`字符串`Indian Standard Time`，对于`ist`它给出`Greenwich Mean Time`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:59:09.643

简而言之，是的，它区分大小写。

按照您的示例`ist`为您提供，`GMT`因为找不到具有此类 ID 的时区，因此为您提供默认结果

它与`est`( `GMT-05:00`is `EASTERN STANDARD TIME`) 一起使用，肯定是因为这两个 ID 都是已知的，但我不会指望它（不太确定如果更改平台它是否仍然存在）。

此外，正如 API 所说，您不应使用那些缩写的 ID，而应直接使用全名或自定义 ID。

您可以使用 获得平台可用 ID 的列表`TimeZone.getAvailableIDs()`，然后您可以选择正确的 ID。

我自己会考虑使用`GMT-5:00`格式，在我看来，这种格式更具可读性且不易出错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-08T21:28:21.687

getTimeZone(String id) 的实现实际上从 JDK 7 更改为 8。

在 JDK 7 中，“est”实际上是返回一个 id 为“est”的时区。在 java 7 上运行以下测试用例将成功（在 java 8 上失败）：

```
@Test
public void estTimeZoneJava7() {
    TimeZone timeZone = TimeZone.getTimeZone("est");
    assertEquals("est", timeZone.getID()) ;
} 
```

在 Java 8 中，时区“est”实际上是作为未知时区处理的，实际上会返回 ID 为“GMT”的 GMT 时区。以下测试用例将在 Java 8 上成功（在 Java 7 上失败）。

```
@Test
public void estTimeZoneJava8() {
    TimeZone timeZone = TimeZone.getTimeZone("est");
    assertEquals("GMT", timeZone.getID());
} 
```

# sqlplus - 在 sqlplus 中执行立即截断表

> ID：13230941
> 
> 赞同：2
> 
> 时间：2012-11-05T11:14:20.717
> 
> 标签：sqlplus, truncate, execute-immediate

为什么`execute immediate 'truncate table trade_economics';`在 sqlplus 脚本中会出现以下错误？

```
 BEGIN immediate 'truncate table trade_economics'; END;
                    *
    ERROR at line 1:
    ORA-06550: line 1, column 17:
    PLS-00103: Encountered the symbol "truncate table trade_economics" when
    expecting one of the following:
    := . ( @ % ;
    The symbol ":=" was substituted for "truncate table trade_economics" to
    continue.` 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:15:59.430

您需要先添加`execute`才能`immediate`使其正常工作。

就像是：

```
begin
    execute immediate 'truncate table foo';
end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T10:04:52.453

TRUNCATE 是 DDL（数据定义语言）。您不能从 PL/SQL 中执行 DDL。也就是说，您不能直接但可以通过动态 SQL。

所以

使用这个：删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-18T12:45:43.377

这个执行可以包含在一个过程中

```
EXECUTE IMMEDIATE ('truncate table name');
--next--
INSERT
    / * + append * /
    INTO table .. 
```

# android - 按下 Android 后退按钮时，子浏览器不会关闭

> ID：13230942
> 
> 赞同：2
> 
> 时间：2012-11-05T11:14:26.623
> 
> 标签：android, back-button, trigger.io

如果我没记错的话，子浏览器（**forge.tabs**模块）总是通过按下 Android 上的后退按钮来关闭。但是，这似乎在当前的 API 版本中被破坏了。

更糟糕的是，在后台，应用程序一直在处理后退按钮事件，就好像根本没有子浏览器一样。因此，当用户在多次尝试使用后退按钮后最终单击关闭按钮时，他最终会进入应用程序的完全不同的部分。

还有谁能重现这个？

我正在使用`Trigger.io`当前平台版本来构建我的 android 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:27:58.800

这应该在 v1.4.20 中修复（发行说明：[http](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-20) ://docs.trigger.io/en/v1.4/release-notes.html#v1-4-20 ）。

如果您还有任何问题，请告诉我们。

# java - 无法从 fileDownloadActionListener 中的 ADF 组件获取值

> ID：13230945
> 
> 赞同：0
> 
> 时间：2012-11-05T11:14:31.270
> 
> 标签：java, nullpointerexception, download, oracle-adf

我面临一个找不到任何解决方案的问题...我有一个这样的 selectManyChoice 组件：

```
<af:selectManyChoice value="#{bindings.my_VO1.inputValue}" 
                     label="myLabel" id="smc1"
                     binding="#{pageFlowScope.myBean.myMultiSelection}"
                     autoSubmit="true">
  <f:selectedItems value="#{bindings.my_VO1.items}" id="si1"/>
</af:selectManyChoice> 
```

为了获取这些值，我使用 2 个按钮进行了测试，如下所示：

```
<af:commandButton text="First Button" 
                  id="cb1" 
                  action="#{pageFlowScope.myBean.saveSelection}>
  <af:fileDownloadActionListener method="#{pageFlowScope.myBean.exportReport}"/>
</af:commandButton> 
```

和：

```
<af:commandButton text="Second Button" 
                  id="cb2" 
                  action="#{pageFlowScope.myBean.saveSelection}/> 
```

第二个按钮可以成功获取选定的值并将它们打印到屏幕上。但是，第一个按钮不能。当我尝试在这行代码中调用 myMultiSelection.getValue() 时，它总是会抛出 NullPointerException：

```
public String saveSelection() {
    if (myMultiSelection.getValue() != null) { 
```

它们之间的唯一区别是 fileDownloadActionListener 标记。我想知道该标签是否影响了第一个按钮的内部工作......但是，我仍然需要该标签，因为该按钮的目的是根据所选值生成一个 pdf 文件，并让浏览器下载该文件. 谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:26:59.760

您可以这样尝试：使用第二个按钮，在他的 actionlistener 中调用 fileDownloadActionListener。这样您就可以确定所选值是否正确。

示例：[http ://adfwithejb.blogspot.be/2012/08/calling-affiledownloadactionlistener_2.html](http://adfwithejb.blogspot.be/2012/08/calling-affiledownloadactionlistener_2.html)

**编辑：您可以这样做，而不是使用 JS 来调用 actionlistener：**

将这些添加到您的页面：

```
<af:commandButton text="Hidden Button" binding="#{pageFlowScope.myBean.btnHiddenButton}"
                  id="cb1" visible="false">
  <af:fileDownloadActionListener method="#{pageFlowScope.myBean.exportReport}"/>
</af:commandButton>

<af:commandButton text="Visible Button" 
                  id="cb2" 
                  action="#{pageFlowScope.myBean.saveSelection}/> 
```

然后在您的 bean 中，转到 saveSelection 方法并做一些事情来获取正确的数据。之后添加：

```
ActionEvent event = new ActionEvent(btnHiddenButton);
event.queue(); 
```

这将触发隐藏按钮而不按下它。（当然要确保你有绑定）

# javascript - 更改事件多次触发

> ID：13230952
> 
> 赞同：1
> 
> 时间：2012-11-05T11:14:59.073
> 
> 标签：javascript, jquery

我有这个由 php 代码生成的 HTML 代码

```
<tr class="edit_tr">
<td>a1</td>
<td class="edit_td">
<span id=" " class="text"></span>
<input id="144" class="25" type="text" value="">
</td>
<td class="edit_td">
<span id=" " class="text"></span>
<input id="144" class="26" type="text" value="">
</td>
<td class="edit_td">
<span id=" " class="text"></span>
<input id="144" class="27" type="text" value="">
</td>
</tr> 
```

这是我正在使用的 Javascript：

```
$(document).ready(function(e) {
    $(".edit_tr").click(function(){
        var id = $(this).attr("id");
        // we have here tow states :#1 and #2 
        //#1  there is no Id, and thats mean we want to insert to database
        if(typeof id == 'undefined'){
            $(this).children("td").children("input").change(function(){
                var stateId = $(this).attr("class");
                var alternativeId = $(this).attr("id");
                alert("state is :"+ stateId);
                alert("alternativeId is :"+ alternativeId);
                //return false;         
            }); 

        }
        //#2 there is an id, so we want to update the value 
        else{
            alert("there is id ");

        }
    });
}); 
```

当我第一次更改输入值时的问题它工作正常，但是当我尝试再次更改值时，更改事件会触发多次

请任何帮助，我很感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:18:49.620

每次单击 $(".edit_tr") 时，都会添加另一个事件处理程序，这就是代码多次触发的原因

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T11:29:15.367

试试这个代码

```
$(document).ready(function(e) {

    $(".edit_tr").click(function(){
        var id = $(this).attr("id");
        // we have here tow states :#1 and #2 
        //#1  there is no Id, and thats mean we want to insert to database
        if(typeof id != 'undefined'){
            alert("there is id ");

        }
    });

    $(".edit_tr").find("input").change(function(){
       var stateId = $(this).attr("class");
       var alternativeId = $(this).attr("id");
       alert("state is :"+ stateId);
       alert("alternativeId is :"+ alternativeId);
       //return false;         
   });

}); 
```

# java - 条件左外连接 SQL 查询到 JPQL

> ID：13230956
> 
> 赞同：5
> 
> 时间：2012-11-05T11:15:11.803
> 
> 标签：java, sql, database, hibernate, jpql

[此数据的 SQL FIDDLE 链接](http://sqlfiddle.com/#!4/c3902/19/11)

什么是**jpql**等价于以下**SQL**查询：

```
select * from App left outer join App_Child on (App.id=App_Child.id and App_Child.status = 'active') where App.status='active' and App.id=1; 
```

**样本数据：**

```
ij> select * from App;
ID         |STATUS
----------------------
1          |active
2          |active1
3          |active3
5          |active

4 rows selected
ij> select * from App_Child;
ID         |STATUS    |D
----------------------------------
1          |active    |1
2          |active11  |2
1          |active111 |3
1          |active    |4

4 rows selected
ij> select * from App left outer join App_Child on (App.id=App_Child.id and App_Child.status = 'active') where App.status='active' and App.id=1;
ID         |STATUS    |ID         |STATUS    |D
---------------------------------------------------------
1          |active    |1          |active    |1
1          |active    |1          |active    |4

2 rows selected
ij> select * from App left outer join App_Child on (App.id=App_Child.id and App_Child.status = 'active') where App.status='active' and App.id=5;
ID         |STATUS    |ID         |STATUS    |D
---------------------------------------------------------
5          |active    |NULL       |NULL      |NULL

1 row selected 
```

编辑：我们正在使用**jpa 2.0**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T11:43:46.670

由于关系，条件`App.id=App_Child.id`会自动添加`@ManyToOne`。`on`在 JPA 2.1 中，您可以使用显式子句添加附加条件：

```
select a 
from App a left outer join 
     a.children c on (c.status = 'active') 
where a.status='active' and a.id=1; 
```

参见例如[EclipseLink 文档](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#ON)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:42:15.153

如果您想要一个 SQL 查询来查找所有具有“活动”App_Child 的应用程序，您可以尝试存在而不是加入。

```
-- Alternative SQL to join
select a.* from App a where a.ID = 1 and exists (select * from App_Child b where a.id=b.id AND b.STATUS = 'active') 
```

在您的示例中，您发生了两件事。在本页的 SQL 示例中，您只是从 App 表中获取列。尽管您从 App 表以及 App_Child 中获取列，但仅显示“活动”子行，但在您的小提琴中。此 exists 方法适用于您只想检索应用程序的第一个查询，但如果您想同时获取应用程序和子项，则它无济于事。

不过，您可以做的是向 App 实体添加一个方法，以获取 Active App_Child 的集合并映射适当的属性。您可以使用此“存在”查询获取所需的应用程序，然后在每个应用程序上调用 getActiveChildren。

我在你的小提琴上测试了 SQL，这里是编辑：[http ://sqlfiddle.com/#!4/0f39a/6/2](http://sqlfiddle.com/#!4/0f39a/6/2)

此参考表明您存在于 JPQL 中。 [http://openjpa.apache.org/builds/1.2.0/apache-openjpa-1.2.0/docs/manual/jpa_langref.html#jpa_langref_exists](http://openjpa.apache.org/builds/1.2.0/apache-openjpa-1.2.0/docs/manual/jpa_langref.html#jpa_langref_exists)

希望这些信息足以让您尝试一下。

# ruby-on-rails - 在浏览器中维护自定义 url

> ID：13230957
> 
> 赞同：2
> 
> 时间：2012-11-05T11:15:21.510
> 
> 标签：ruby-on-rails, routing

我已经尝试这样做了两个星期，但我仍然被卡住了。现在，我的情况是这样的：

在没有启动用户会话的情况下，如果我在浏览器中输入此 URL：`http://localhost.../something?a=1&b=2`它会显示具有属性 a = 1 和 b = 2 的订阅。一切正常。

如果我编辑订阅中的某些内容，一切正常，但问题是 url 更改为`http://localhost.../subscription/id`.

我想要的是，当我修改订阅中的某些内容时，url 必须是`http://localhos.../something?a=1&b=2` 而不是`http://localhost.../subscription/id`.

路线.rb

```
 …
 match "/something" => "subscriptions#show"
 … 
```

订阅控制器.rb

```
…
def show
  @subscription = Subscription.find(params[:id] || Subscription.find_by_token_and_networkId!(params[:t], params[:nwk]))
… 
```

我不想让 /subscription/id 网址变得无用，因为我想从网页的另一部分访问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:23:22.733

在控制器更新方法中，在结束标记之前试试这个：

```
redirect_to :back 
```

目前，您可能有类似的东西：

```
redirect_to @subscription 
```

# ios - 如何根据标签或类似的东西以特定顺序获取 UIScrollview 中子视图的内容？

> ID：13230958
> 
> 赞同：0
> 
> 时间：2012-11-05T11:15:22.177
> 
> 标签：ios, xcode, uiscrollview, subview

我怎样才能`label.text`将视图的内部添加到`UIScrollview`但以特定顺序添加，每个标签都有一个连续的标签 1、2、3、4、5，这很重要，因为每个标签都需要保存在一个数组中命令。

问题是，当使用搜索时，它以不同的顺序发送标签，我该如何控制呢？

我要搜索的代码是：

```
for (UIView *addedView in [self.scrollView subviews]){
    for (UIView *sub in [addedView subviews])
    {
        if([sub isKindOfClass:[UILabel class]])
        {
            UILabel *myLabel = (UILabel *)sub;
            [array addObject:mylabel.text];
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:38:09.180

```
for (int i = 1 ;i <= [self.scrollView.subviews count] ;i++){
        UIView *myView = (UIView *) [addedView viewWithTag:i];

           if(myView && [myView isKindOfClass:[UILabel class]]){
           UILabel *label = (UILabel *)myView;
            [array addObject:label.text]; );
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:31:31.403

您为什么不根据他们携带的标签访问您的视图？

```
UIView* view = [self.scrollView viewWithTag:tag]; 
```

如果您遍历您定义的所有标签，这将允许您控制处理视图的顺序。否则，我怀疑这`subviews`将反映子视图的堆叠顺序。您可以尝试：

```
for (NSUInteger i = 1; i <= 5; ++i) {
    UIView* view = [self.scrollView viewWithTag:i];
    ...
} 
```

更好的是，您还可以分配标签的标签，然后使用：

```
for (NSUInteger i = 1; i <= 5; ++i) {
    UIView* view = [self.scrollView viewWithTag:i];
    UILabel* myLabel = (UILabel*)[view viewWithTag:kLabelTag];
    ...
} 
```

# windows - 批处理脚本中嵌套 IF 语句中的 GEQ

> ID：13230959
> 
> 赞同：2
> 
> 时间：2012-11-05T07:53:15.067
> 
> 标签：windows

我想要一个变量在每个 GOTO 语句中分配 1 到 5 的值。下面是我的示例代码，它工作正常 -

```
@ECHO OFF

SET a=10
SET b=15
SET /A INDEX=1

:START

IF [%INDEX%] GEQ [6] (
    SET /A INDEX=1
)

ECHO %INDEX%

SET /A INDEX+=1

GOTO START 
```

输出 - 1 2 3 4 5 1 2 3 4 5 1

但是，在制作嵌套的 IF 语句后，它没有按预期工作。以下是示例代码 -

```
@ECHO OFF

SET a=10
SET b=15
SET /A INDEX=1

:START

REM a and b are calculated dynamically, here for making the code easy, I am just assigning static values to them.
IF [%a%] LSS [%b%] (

    IF [%INDEX%] GEQ [6] (
        SET /A INDEX=1
    )

    ECHO %INDEX%

    SET /A INDEX+=1
)

GOTO START 
```

输出 - 1 2 3 4 5 6 2 3 4 5 6 2 3

为什么要打印 6？由于我将索引重置为 1，只要它大于或等于 6。它不应该打印 6。

我的目标是让 INDEX 从 1 到 5，在每个 GOTO 语句中增加 1（与第一个代码中的完全相同）。

# php - 访问子类中抽象类的静态变量

> ID：13230960
> 
> 赞同：0
> 
> 时间：2012-11-05T11:15:29.203
> 
> 标签：php, class, static

**生产线**：`return 'Static hello ' . self::static_user . '...<br />';` **生产：** `Fatal error: Undefined class constant 'static_user' in ....`

注意：逻辑可能很愚蠢，但我现在只是在开玩笑。问题是如何访问子类中抽象类的静态变量？我可以在儿童班访问公共`$public_user`的。`$this->public_user`

```
abstract class UserAbstract
{
protected $public_user = null;
    static protected $static_user = null;

    public function __construct($name)
    {
    $this->public_user = $name;
        self::$static_user = $name;
    }

    abstract static function static_hello();
}

class User extends UserAbstract
{
    static function static_hello()
    {
        return 'Static hello ' . self::static_user . '...<br />';
    }
}

$obj_user = new User('Voodoo');
echo $obj_user->static_hello(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:16:56.823

用这个：

```
return 'Static hello ' . parent::$static_user . '...<br />'; 
```

# html - 如何在链接图像下停止边框？

> ID：13230961
> 
> 赞同：1
> 
> 时间：2012-11-05T11:15:29.480
> 
> 标签：html, css

我将大部分 html 文本链接定义为：

```
a:hover {text-decoration:none; border-bottom:2px dotted #DB8D41} 
```

[但我在http://communitychessclub.com/rabren/](http://communitychessclub.com/rabren/games.php)也有图片，它们是链接。我不希望在这些图像下显示“border-bottom:2px dotted #DB8D41”。

很明显，下面这行不通：

```
a:hover img {border:none}
img, img:active { border: none } 
```

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:27:12.013

这似乎工作：http: [//jsfiddle.net/44Pwr/](http://jsfiddle.net/44Pwr/)

html

```
<div><a href=#"><img src="http://static.jquery.com/files/rocker/images/logo_jquery_215x53.gif"></a><p>This is <a href="#">another link</a></p></div> 
```

css

```
body { padding: 10px; background: #003; color: #999; }

a:link, a:visited { border-bottom: 1px solid #009; text-decoration: none; color: #CCC; }

a:hover, a:active { border-bottom: 1px solid #CCC; text-decoration: none; color: #CCC; }

a > img { display: block; border-bottom: 0; } 
```

# erlang - 如何通过指定模块和方法名称在 Elixir 中动态调用方法？

> ID：13230965
> 
> 赞同：43
> 
> 时间：2012-11-05T11:15:44.587
> 
> 标签：erlang, metaprogramming, elixir

我想知道长生不老药中的方法名称到底是什么：

```
array = [1,2,3]
module_name = :lists
method_name = :nth                  # this not working
module_name.method_name(1, array)   # error, undef function lists.method_name/2
module_name.nth(1, array)           # returns 1, module_name is OK. It's an atom 
```

但我可以在 erlang 中做几乎相同的事情：

```
A = [1,2,3].
X = lists.
Y = nth.
X:Y(1,A).  #  returns 1 
```

我怎么能在长生不老药中做到这一点？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-05T17:38:40.950

您可以使用`apply/3`which 只是`:erlang.apply/3`. 它只是简单地[从 的](https://github.com/elixir-lang/elixir/blob/master/lib/elixir/lib/kernel.ex#L307-333)[数组中](https://github.com/elixir-lang/elixir/blob/master/lib/elixir/lib/kernel.ex#L307-333)[调用给定的. `function``module``arguments`](https://github.com/elixir-lang/elixir/blob/master/lib/elixir/lib/kernel.ex#L307-333)由于您将参数作为模块和函数名称传递，因此您可以使用变量。

```
apply(:lists, :nth, [1, [1,2,3]])
apply(module_name, method_name, [1, array]) 
```

如果您想了解更多有关 elixir 如何处理函数调用（以及其他所有内容）的信息，您应该查看`quote`and `unquote`。

```
contents = quote do: unquote(module_name).unquote(method_name)(1, unquote(array)) 
```

它返回函数调用的同音表示。

```
{{:.,0,[:lists,:nth]},0,[1,[1,2,3]]} 
```

您可以`unquote`使用引用的函数调用[`Code.eval_quoted/3`](https://github.com/elixir-lang/elixir/blob/master/lib/elixir/lib/kernel/special_forms.ex#L207-330)

```
{value, binding} = Code.eval_quoted(contents) 
```

编辑：这是一个使用 Enum.fetch 和 var 的示例。

```
quoted_fetch = quote do: Enum.fetch([1,2,3], var!(item));             
{value, binding} = Code.eval_quoted(quoted_fetch, [item: 2]) 
```

# google-chrome - Chrome 扩展程序正在显示/隐藏

> ID：13230967
> 
> 赞同：1
> 
> 时间：2012-11-05T11:15:52.660
> 
> 标签：google-chrome, google-chrome-extension

我正在编写一个能够管理 Chrome 扩展的小应用程序。目前我能够列出所有已安装的扩展及其状态（启用/禁用）。问题在于找出导致扩展程序隐藏在 Chrome 的扩展程序管理 UI 中的原因。

实际上，当扩展程序在 Chrome UI 中显示/隐藏时，我无法弄清楚背后的逻辑。

有人可以帮我吗？

# php - 结帐数量未在结帐时更新小计

> ID：13230971
> 
> 赞同：1
> 
> 时间：2012-11-05T11:16:07.417
> 
> 标签：php, checkout

嘿，我有一个 PHP 站点的问题，如果您在结帐中更改数量，小计不会改变。我对 PHP 不是很胜任，所以它可能很简单。这是更新数量的代码；

```
<?php include_once($_SERVER["DOCUMENT_ROOT"].'/vuengine/viewerlib.php'); ?>

<?php
$listing_num         = $_REQUEST['pd_id'];
$listing_qty         = $_REQUEST['pd_qty'];
$order_num           = $_COOKIE['ordernum'];

echo $order_num;

//Get order details
$order_details     = mysql_select('orders', 'num='.$order_num);
$listings_subtotal = $order_details[0]['listings_subtotal'];

//Get listing details
$listing_details = mysql_select('listings', 'num='.$listing_num);
$seller_num      = $listing_details[0]['member_num'];

//Update order with new shipping
//Get orders_sellers_items unit_price and qty
$order_sellers_item_details = mysql_select('orders_sellers_items',        
'order_num='.$order_num.' AND listing_num='.$listing_num);

//Get unit price
$unit_price     = $order_sellers_item_details[0]['unit_price'];
$qty            = $order_sellers_item_details[0]['qty'];
$shipping_num   = $order_sellers_item_details[0]['shipping_num'];
$shipping_price = $order_sellers_item_details[0]['shipping_price'];

 //Get shipping price
$shipping_price = mysql_select('shipping_rates', 'num='.$shipping_num);
$shipping_price = $shipping_price[0]['charge'];

$new_shipping_total = $shipping_price*$listing_qty;

$new_subtotal = ($unit_price*$listing_qty);

//Update orders_sellers_items with new subtotal
mysql_update('orders_sellers_items', null, 'order_num='.$order_num.' AND     
listing_num='.$listing_num, array('subtotal' => $new_subtotal+$new_shipping_total, 
'qty' => $listing_qty, 'shipping_price' => $shipping_price));

//Update order with new listing_subtotal
$orders_items = mysql_select('orders_sellers_items','order_num='.$order_num);   
$order_subtotal    = 0;    
$shipping_subtotal = 0;
foreach($orders_items as $order_item){
$order_subtotal    +=$order_item['unit_price']*$order_item['qty'];
$shipping_subtotal +=$order_item['shipping_price']*$order_item['qty'];
}

mysql_update('orders', $order_num, null,     
array('listings_subtotal'=>$order_subtotal,     'shipping_subtotal' => 
$shipping_subtotal, 'total' => $order_subtotal+$shipping_subtotal, 'updatedDate=' => 
'NOW()'));

//Get orders_sellers_items for order and seller
$orders_items_seller =     
mysql_select('orders_sellers_items','order_num='.$order_num.'     AND     
seller_num='.$seller_num);  
$order_subtotal2     = 0;
$order_shipping      = 0;
foreach($orders_items_seller as $order_item_seller){
$order_subtotal2 += $order_item_seller['unit_price']*$order_item_seller['qty'];
$order_shipping  += $order_item_seller['shipping_price']*$order_item_seller['qty'];
}

//Update orders_sellers table with new subtotal 
mysql_update('orders_sellers', null, 'order_num='.$order_num.' AND
seller_num='.$seller_num, array('listing_subtotal' => $order_subtotal2, 
'shipping_subtotal' => $order_shipping, 'seller_total' => 
$order_subtotal2+$order_shipping)); 

echo json_encode(array('subtotal' => number_format($new_subtotal+    
($shipping_price*$listing_qty),2), 'cart_total' => 
number_format($order_subtotal+$shipping_subtotal,2)));
?> 
```

# gwt - 如何正确地为 svg 图像创建一个 gwt 小部件？

> ID：13230972
> 
> 赞同：1
> 
> 时间：2012-11-05T11:16:17.183
> 
> 标签：gwt

我知道如何将 svg-images 加载到 gwt：[这里的最后一个答案](https://stackoverflow.com/questions/12858907/how-to-load-a-svg-in-gwt-widget-from-an-url)

有了这个，我只是想创建一个“SvgImage”类。它应该像 gwt 的 image(url) 一样工作：我可以添加独立于加载状态的图像，一旦加载完成，图像就会变得可见。如何做到这一点？（我试图读取图像的源代码，但这很糟糕——既找不到加载 url 的位置，也找不到触发 LoadEvent 的位置）

或者一般来说，创建通过给定 url 加载其内容的小部件的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T06:45:58.660

我在 gwt 图像源中挖了一点点，发现有“replaceElement(Node)”——一种专门为图像制作的受保护方法，但这种方法基于

```
Widget.getElement().replaceChild(newElement, oldElement); 
```

这是我完整的 SvgWidget 类：

```
public class SvgWidget implements IsWidget {

    private String svgUrl;
    private ADBTexte strings;
    private IsWidget thisW;
    private Loading loadingWidget;

    @Inject
    private SvgWidget(@Assisted final String svgUrl, final ADBTexte strings, final Loading loadingWidget) {
        this.svgUrl = svgUrl;
        this.strings = strings;
        this.loadingWidget = loadingWidget;

    }

    @Override
    public Widget asWidget() {
        thisW = new SimplePanel(loadingWidget);
        RequestBuilder rB = new RequestBuilder(RequestBuilder.GET, svgUrl);
        rB.setCallback(new RequestCallback() {
            @Override
            public void onResponseReceived(final Request request, final Response response) {
                Widget result = new HTML(response.getText());
                thisW.asWidget()
                     .getElement()
                     .replaceChild(result.getElement(), thisW.asWidget().getElement().getChild(0));
            }

            @Override
            public void onError(final Request request, final Throwable exception) {
                Widget result = new Label(strings.chartError());
                thisW.asWidget()
                     .getElement()
                     .replaceChild(result.getElement(), thisW.asWidget().getElement().getChild(0));
                GWT.log("Error on loading chart: ", exception);

            }
        });
        try {
            rB.send();
        } catch (RequestException e) {
            Widget result = new Label(strings.chartError());
            thisW.asWidget().getElement().replaceChild(result.getElement(), thisW.asWidget().getElement().getChild(0));
            GWT.log("Error on sending request for chart: ", e);
        }

        return thisW.asWidget();
    }

    /**
     * Use this to get an instance of {@link SvgWidget}.
     * 
     */
    public interface Factory {
        /**
         * 
         * @param svgUrl
         *            url for svg graphic
         * @return instance of {@link SvgWidget} displaying the svg accessible via the given url
         */
        SvgWidget get(@Assisted String svgUrl);
    }

} 
```

相关的东西在 asWidget() 中。但我不确定这是否是一个好的/最好的解决方案：

*   SimplePanel 是一个很好的容器吗（我只需要容器来替换一个元素）
*   也许我应该实现 HasLoadHandlers？！
*   小部件显示一个加载小部件 - 可能它放置得更好
*   还有什么要考虑的？

（对于那些不知道依赖注入（使用 gin）的人：忽略所有未知的注释和工厂接口）

# c++ - sizeof() 是否显示 C++ 类开销？

> ID：13230973
> 
> 赞同：3
> 
> 时间：2012-11-05T11:16:21.410
> 
> 标签：c++

```
#include <iostream>
using namespace std;

class Test {
    int a;
public:
    int getA() {
        return a;
    }

Test(): a(1){}
Test(int i): a(i){}

};

int main() {
    Test t1(100);
    cout << sizeof(t1) << " " << sizeof(1) << endl; // 4 4
    return 0;
} 
```

似乎 c++ 中的类根本没有开销。t1 的大小为 4，类似于整数。如果我向 Test 添加另一个 int 成员，它的大小将增加到 8。

我本来期望大于 4 的东西

课程没有开销是真的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:21:04.267

> 似乎 c++ 中的类根本没有开销。

只要一个类没有虚函数，就可以。你期望什么样的开销？无虚拟类只是变量的集合，具有与该类型关联的一组函数。

```
class Foo {
    int a;
    int bar() const { return a*a; }
}; 
```

可以简单地替换为

```
struct Foo {
    int a;
}

int Foo_bar(Foo const *that) {
    return (that->a) * (that->a);
} 
```

如果您编译了这些片段中的每一个，您会看到，汇编代码看起来几乎相同。

* * *

但是，如果您添加一个虚拟功能，游戏就会发生巨大变化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T11:22:32.773

如果您使用`virtual`方法或`virtual`继承，则会涉及开销。

```
class foo {
public:
    virtual void bar() { }
    int i;
} 
```

在 32 位系统上，每个实例占用 8 个字节，4 个用于 vtable 指针，4 个用于`int`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-05T11:28:06.787

在 C++ 中，对象的大小不能为零。这就是为什么大多数编译器会在没有数据的类实例中插入一个冗余字节。但是，如果您从此类继承并包含数据，编译器可以优化一个字节。

```
#include <iostream>

class Empty
{
};

class Derived : public Empty
{
    int data_;
};

int main(int argc, char** argv)
{
    Empty empty;
    Derived derived;
    int x;
    std::cout << sizeof(empty) << std::endl;    // 1
    std::cout << sizeof(derived) << std::endl;  // 4
    std::cout << sizeof(x) << std::endl;        // 4

    return 0;
} 
```

这是在 gcc 4.6.3 上完成的，它被称为“空基优化”。拥有数据和性能开销的方式要少得多。在大多数情况下，虚函数是最重要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T11:33:23.637

有一些开销，例如下面的示例说明了一些事情：

```
class Test {
    char a;
public:
    virtual int getA() {
        return a;
    }    

Test(): a('a'){}
Test(char i): a(i){}
}; 
```

1.  向类添加虚函数将为类大小添加一个指针（vptr）大小。

2.  对齐约束。Test 的大小是 8 而不是 5。 注意：我将成员 a 从 int 更改为 char 类型。

你的班级布局是这样的：

```
class Test  size(8):
    +---
   0    | {vfptr}
   4    | a
        | <alignment member> (size=3)
    +---

  Test::$vftable@:
    | &Test_meta
    |  0
   0    | &Test::getA

  Test::getA this adjustor: 0 
```

# javascript - d3.js 如何在条形图中添加线条

> ID：13230979
> 
> 赞同：7
> 
> 时间：2012-11-05T11:16:42.380
> 
> 标签：javascript, charts, d3.js, bar-chart

我有一个包含 4 个值的数据集。[A B C D]。目前，它们显示在条形图中，每个值一个条形。现在由于值 c 和 d 是平均值，我想将它们显示为 a 和 b 的条后面的线。d3可以做到这一点吗？如何在同一个数据数组中切换条形或线形显示？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-11T00:37:26.627

我在这里发布一个示例，因为没有一个答案在 jsbin 或 jsfiddle 等中提供带有线条的条形图的工作示例。
[http://jsbin.com/gisinomo/1/edit](http://jsbin.com/gisinomo/1/edit)

该示例是 d3 wiki 上简单条形图的一个分支。
[http://bl.ocks.org/mbostock/3885304](http://bl.ocks.org/mbostock/3885304)

**CSS**

```
body {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.bar {
  fill: steelblue;
}

.x.axis path {
  display: none;
}

.line {
  fill: none;
  stroke: #444;
  stroke-width: 1.5px;
} 
```

**JavaScript**

```
var data = [{ "letter": "A", "frequency": .08167},
{ "letter": "B", "frequency": .01492},
{ "letter": "C", "frequency": .02780},
{ "letter": "D", "frequency": .04253},
{ "letter": "E", "frequency": .12702},
{ "letter": "F", "frequency": .02288},
{ "letter": "G", "frequency": .02022},
{ "letter": "H", "frequency": .06094},
{ "letter": "I", "frequency": .06973},
{ "letter": "J", "frequency": .00153},
{ "letter": "K", "frequency": .00747},
{ "letter": "L", "frequency": .04025},
{ "letter": "M", "frequency": .02517},
{ "letter": "N", "frequency": .06749},
{ "letter": "O", "frequency": .07507},
{ "letter": "P", "frequency": .01929},
{ "letter": "Q", "frequency": .00098},
{ "letter": "R", "frequency": .05987},
{ "letter": "S", "frequency": .06333},
{ "letter": "T", "frequency": .09056},
{ "letter": "U", "frequency": .02758},
{ "letter": "V", "frequency": .01037},
{ "letter": "W", "frequency": .02465},
{ "letter": "X", "frequency": .00150},
{ "letter": "Y", "frequency": .01971},
{ "letter": "Z", "frequency": .00074}];

var margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var formatPercent = d3.format(".0%");

var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .1);

var x2 = d3.scale.ordinal()
  .rangeBands([0, width], 0);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom"); 

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .tickFormat(formatPercent);

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  data.forEach(function(d) {
    d.frequency = +d.frequency;
  });

  x.domain(data.map(function(d) { return d.letter; }));
  x2.domain(data.map(function(d) { return d.letter; }));
  y.domain([0, d3.max(data, function(d) { return d.frequency; })]);

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Frequency");

  svg.selectAll(".bar")
      .data(data)
    .enter().append("rect")
      .attr("class", "bar")
      .attr("x", function(d) { return x(d.letter); })
      .attr("width", x.rangeBand())
      .attr("y", function(d) { return y(d.frequency); })
      .attr("height", function(d) { return height - y(d.frequency); });

var dataSum = d3.sum(data, function(d) { return d.frequency; }); 

 var line = d3.svg.line()
    .x(function(d, i) { 
      return x2(d.letter) + i; })
    .y(function(d, i) { return y(dataSum/data.length); }); 

  svg.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:54:32.700

从您的数据中创建一个具有两个属性的对象列表：

```
var data = [1,2,3,4];
var objects = data.slice(0, data.length/2).map(
  function(d,i) { return { value:d, average:data[i+data.length/2] }; } 
); 
```

然后你可以做这样的事情（未经测试）：

```
var bars = chart.selectAll("g.bar")
   .data(objects)
  .enter().append("g")
    .attr("class", "bar")
    .attr("transform", function(d,i) { return "translate("+(i*10)+",0)"; });

bars.append("rect")
    .attr("x", 0)
    .attr("y", function(d,i) { return height - d.value; })
    .attr("width", 10)
    .attr("height", function(d,i) { return d.value; });

bars.append("line")
    .attr("x1", 0)
    .attr("y1", function(d,i) { return height - d.average; })
    .attr("x2", 10)
    .attr("y2", function(d,i) { return height - d.average; }); 
```

# .htaccess - .htaccess 将包含路径设置为 document_root 变量

> ID：13230984
> 
> 赞同：3
> 
> 时间：2012-11-05T11:16:54.513
> 
> 标签：.htaccess

这让我整个早上都发疯了。

我们正在使用 git 在多台机器上开发一个网站。

在大多数情况下，我们可以将我们的计算机设置为与开发服务器具有相同的设置。不幸的是，团队中的一个人在窗户上，它正在造成各种破坏。

我要解决的主要问题是：

在我正在使用的 .htaccess 文件中`php_value auto_prepend_file default_roots.php`

并且在编写自动前置语句时，我知道您必须使用您正在调用的文件的绝对路径。这就是导致问题的原因，Windows 机器上的绝对路径将不同于办公室中任何其他机器上的路径，它们都已设置为匹配。

解决我的问题的方法是能够将 .htaccess 中的 include_path 设置为 %{DOCUMENT_ROOT} 然后我可以将文件放在任何机器上的文档根目录中，并且文件的绝对路径总是正确的。

不幸的是，这看起来不可能（或者我希望我的语法错误，有人可以告诉我它是如何完成的）

我曾考虑在不同的机器和环境中编写不同的 .htaccess 文件，并使用 gitignore 来阻止它们相互干扰。这就是我开始的地方，但是让人们真正使用 gitignore 并阻止他们干扰似乎是一个问题，我不得不多次进入并修复它。在我看来，它也不太优雅。

所以我希望社区中的某个人能为我提供解决方案，因为我在这里发疯了。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-11T06:33:42.503

当涉及到使用 Git 时，尤其是在团队中，这一切都与工作流有关。这里有两个解决方案：

1.  **同意根设置：**从技术上讲，如果您从 Web 服务器的根（例如：local.website.dev 或 localhost）运行 PHP 应用程序，您应该不会遇到问题，其中 .htaccess 文件将始终位于根。因此没有问题。

2.  **同意工作流程：**有一种解决方法，不是`.htaccess`动态调用值，而是每次实际动态构建文件，并且在您的`Git`工作流程中，改为更新原始文件。

我刚刚为您的问题创建了一个小解决方案，`.htaccess`每次您签出主分支时都会生成一个新的解决方案。因此，在您的工作流程中，您可以在每个`git pull`.

您需要`.htaccess`在 PHP 中维护您的规则。所以这里是一个较小的团队合作挑战。但是问题解决了！

在[Github 上查看：mchebib/git-dyno-htaccess](http://github.com/mchebib/git-dyno-htaccess)

或者直接跳进去：

```
$ git clone https://github.com/mchebib/git-dyno-htaccess.git 
```

希望这对你有用。

干杯!

# css - 如何使用 CSS 使 div 居中？

> ID：13230986
> 
> 赞同：-2
> 
> 时间：2012-11-05T11:16:58.867
> 
> 标签：css, center, centering

我正在学习 HTML/CSS，到目前为止，我在 CSS 方面仍然存在困难，尤其是在定位方面。

例如，谁能向我解释为什么以下不起作用？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <style type="text/css">
    ​#main{
        background-color : blue;   
        height : 50px;
        width : 30px;
    }
    .centerer{
        margin : 0 auto;}

    ​
    </style>
</head>

<body>
    <div class="centerer">
        <div id="main">
        </div>
    </div>​​​​​
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:18:42.990

***[演示](http://tinkerbin.com/b1yPPTXP)***

现在定义您的`#main` **ID** 并在您的**班级**`display:inline-block`中给予`text-align:center``.centerer`

 **像这样写

**CSS**

```
#main {
    background-color: blue;
    height: 50px;
    width: 30px;
  display:inline-block;
  vertical-align:top;
}
    .centerer{
        margin : 0 auto;
width:200px;
  background:red;
  text-align:center;
} 
```

**你的 html**

```
<div class="centerer">
        <div id="main">fgasdfds fsd ds fsd
        </div>
    </div> 
```

***[演示](http://tinkerbin.com/b1yPPTXP)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:19:28.000

为此，您需要给出`.center`明确的宽度，否则浏览器无法计算左右边距。以下应该有效：

```
.centerer{
        margin : 0 auto;
   width:100px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:19:43.707

您可以通过`margin:auto;`

**HTML**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body>

        <div id="main">afdafdaf
        </div>

</body>
</html> 
```

**CSS**

```
#main {
margin:auto;
  width:500px;
  height:100px;
  background:red;
  text-align:center;
} 
```

[演示](http://tinkerbin.com/xrpfEm0b)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T11:20:56.343

尝试给`centerer`div 一个宽度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T11:24:29.613

`.centerer` *居中，它具有*（*`width: auto`默认值），因此与其容器一样宽，并且看起来与左对齐或右对齐一样。*

 *如果要居中，`#main`则必须`#main`自行设置自动边距。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T12:09:14.490

您希望#main 处于中心位置，因此您必须给予`margin:0 auto;`#main。

这是一个[演示](http://jsfiddle.net/DeepakKamat/Ceuhn/5/)

的HTML：

```
<div class="centerer">
        <div id="main"></div>
</div>​ 
```

和 CSS ：

```
.centerer {background-color : red;}

#main {
        background-color : blue;   
        height : 50px;
        width : 30px;
        margin : 0 auto;
    }
​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T19:34:49.197

使用`margin:0 auto`将使 DIV 居中，但您必须提供宽度才能使其正常工作。

例如，在 CSS 中：

```
div {
    width: 900px;
    margin:0 auto;
} 
```

这是更新的 HTML/CSS 代码，以便 DIV 居中对齐。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<style type="text/css">
#main {
    background-color: blue;
    height : 50px;
    width : 30px;
}

.centerer {
    margin : 0 auto;
    width: 30px;
}
</style>
</head>

<body>
    <div class="centerer">
        <div id="main">
    </div>
</div>​​​​​

</body>
</html> 
```

或者，您可以摆脱`.centerer`div，而只是`#main`通过应用相同的 CSS 使 div 自身居中 - 您已经定义了宽度，因此只需添加`margin:0 auto;`. 但是，如果您希望其他项目在`.centerer`容器内居中，请保持原样。***

# c# - 即使有 ID，Selenium webdriver 脚本也无法找到按钮

> ID：13230989
> 
> 赞同：1
> 
> 时间：2012-11-05T11:17:07.803
> 
> 标签：c#, selenium, automation, webdriver, selenium-webdriver

我希望这比看起来更容易，我刚刚变得雪盲试图修复它！您的帮助将不胜感激。

我正在使用 PageObject 模型（我认为！）来创建我的测试。我有一个对象可以复制图像的浏览和上传，我必须调用 AutoIt 脚本来完成。这可行，但是在上传图像后，即使它具有 ID 属性，也找不到“上传”按钮。

它在文件选择后正确启用，因此不确定我缺少什么。

PageObject 的代码是：

```
public void AddImage(string FileDescription, int DocNo, int Revision, string StatusLstItem, string CreationDate)
{

    driver.FindElement(By.Id("Button1")).Click();
    driver.SwitchTo().Window("FileDetails");
    driver.FindElement(By.Id("Description1")).Clear();
    driver.FindElement(By.Id("Description1")).SendKeys(FileDescription);
    driver.FindElement(By.Id("DocNo1")).Clear();
    driver.FindElement(By.Id("DocNo1")).SendKeys(DocNo.ToString());
    driver.FindElement(By.Id("revision1")).Clear();
    driver.FindElement(By.Id("revision1")).SendKeys(Revision.ToString());
    new SelectElement(driver.FindElement(By.Id("FileStatus1"))).SelectByText(StatusLstItem);
    driver.FindElement(By.Id("creationDate1")).Clear();
    driver.FindElement(By.Id("creationDate1")).SendKeys(CreationDate);
    IWebElement element = driver.FindElement(By.Id("Filename1"));
    element.Click();
    Process.Start("C:\\Users\\Tom\\Desktop\\FileUploadCr.exe");
    driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(10));
    IWebElement upload = driver.FindElement(By.Id("action1"));
    upload.Click();
} 
```

然后我`AddImage`使用以下方法从测试类中调用 ' ' 方法：

```
[Test]
public void ItemChecks()
{
    InformationObject informationObject = new InformationObject(driver);

    informationObject.ExpandAllButton();
    driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(5));
    informationObject.AddImage("SampleDesc", 01, 01, "Approved", "01/10/2012");
    informationObject.ClickUpdateButtonOne();
} 
```

由于某种原因，它没有找到/单击“action1”上传按钮。我尝试切换回“FileDetails”窗口，但这也不起作用。

任何想法我错过了什么？？？

仅供参考 - 上传按钮的代码是：

```
<input type="Submit" value="Upload" id="action1" disabled=""/> 
```

更新 - 修改后的 + 工作 PageObject 方法现在看起来像这样：

```
public void AddImage(string FileDescription, int DocNo, int Revision, string StatusLstItem, string CreationDate)
{
    driver.FindElement(By.Id("Button1")).Click();
    driver.SwitchTo().Window("FileDetails");
    IWebElement element = driver.FindElement(By.Id("Filename1"));
    element.Click();
    Process.Start("C:\\Users\\Tom\\Documents\\Visual Studio 2010\\Projects\\AutoIt_Files\\FileUploadCr.exe");
    Thread.Sleep(1000);
    driver.FindElement(By.Id("Description1")).Clear();
    driver.FindElement(By.Id("Description1")).SendKeys(FileDescription);
    driver.FindElement(By.Id("DocNo1")).Clear();
    driver.FindElement(By.Id("DocNo1")).SendKeys(DocNo.ToString());
    driver.FindElement(By.Id("revision1")).Clear();
    driver.FindElement(By.Id("revision1")).SendKeys(Revision.ToString());
    new SelectElement(driver.FindElement(By.Id("FileStatus1"))).SelectByText(StatusLstItem);
    driver.FindElement(By.Id("creationDate1")).Clear();
    driver.FindElement(By.Id("creationDate1")).SendKeys(CreationDate);
    driver.SwitchTo().Window("FileDetails");
    Thread.Sleep(1000);
    IWebElement upload = driver.FindElement(By.Id("action1"));
    upload.Click();
    Thread.Sleep(1000);
    driver.SwitchTo().Alert().Dismiss(); //Ignore this, just an alert that displays following upload and not part of the solution
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:58:33.363

尝试使用

```
driver.FindElement(By.id("action1")).submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T00:47:38.380

我们在这里面临的问题是 Selenium Web 驱动程序找不到“上传按钮”。

您使用的方法是 FindBy。ID。

我也面临同样的问题。

尝试使用不同的标识符。对我来说 CSSSelector 有效。

例如：driver.FindElement(By.CssSelector("CssSelectorName")).Click();

注意：您可以使用 firepath / firebug 来获取 Xpath、CSS Selector 以获得更多便利。

# wordpress - qTranslate 保存上次打开的语言编辑选项卡？

> ID：13230992
> 
> 赞同：0
> 
> 时间：2012-11-05T11:17:17.967
> 
> 标签：wordpress, editor, tinymce, multilingual, qtranslate

我想我在这里有一个常见的问题：

我正在使用 Wordpress 3.4.1 和 qTranslate 2.5.31。目前我激活了 2 种语言。

我的问题如下：

当我编辑我的第二语言（视觉或 HTML）并保存页面/帖子时，编辑器会在保存时跳回我的默认语言。

保存帖子/页面后是否有可能保存当前的语言编辑器状态？

这很烦人......

# php - 多个 OU 上的 Ldap 查询

> ID：13230994
> 
> 赞同：2
> 
> 时间：2012-11-05T11:17:21.590
> 
> 标签：php, active-directory, ldap-query

我在 PHP 中编写了一个 ldap 查询类来对用户进行身份验证。我需要向多个 OU 查询 ldap 服务器，这是一个示例：

```
DC=mydomain,DC=com
    OU=MyBusiness
        CN=MyGroup

DC=mydomain,DC=com
    OU=Users
        CN=Domain Users 
```

在这个域中，我有两个 OU，一个是我的自定义 OU 和一个组。另一个是标准的 Windows OU。我想创建一个查询来获取两个组，一个在 OU=Users 内部，一个在 OU=MyBusiness... 但似乎不可能。我试过这个连接：

```
$r=ldap_connect($ldap_host,$ldap_port);
ldap_bind($r,$user,$passw);
$domain="OU=MyBusiness,DC=mydomain,DC=com";
$sr=ldap_search($r, $domain ,"(&(objectClass=user)(sAMAccountName=".$user."))"); 
```

但只获得 MyBusiness 的组，我也尝试了这些：

```
$domain="OU=Users,DC=mydomain,DC=com"; //gets only the other group
$domain="DC=mydomain,DC=com"; //error
$domain="OU=*,DC=mydomain,DC=com"; //error 
```

但没有人工作。我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-08T14:47:00.937

给你 - 这应该这样做。（顶级“DC=mydomain,DC=com”搜索需要这些 ldap_options）

```
$r=ldap_connect($ldap_host,$ldap_port);
ldap_set_option($r, LDAP_OPT_PROTOCOL_VERSION, 3);
ldap_set_option($r, LDAP_OPT_REFERRALS, 0);
ldap_bind($r,$user,$passw);
$search = "(&(objectClass=user)(sAMAccountName=$user))";
$attributes = array("cn","displayName","dn");
$sr=ldap_search($r,$domain,$search,$attributes);
$results = ldap_get_entries($r,$sr);
foreach ($results as $result) {
  echo $result['cn'];
} 
```

# android - 如何在特定时间段后开始活动？

> ID：13230996
> 
> 赞同：13
> 
> 时间：2012-11-05T11:17:24.513
> 
> 标签：android, timer

我需要在某个时间段后从当前活动开始一项活动。我编码如下。

```
public class FirstActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_first);

    new Timer().schedule(new TimerTask(){
        public void run() { 
            startActivity(new Intent(FirstActivity.this, SecondActivity.class));
        }
    }, 2000); 
} 
```

但它不起作用..它一直在崩溃..我的方法正确吗？我的清单文件如下

`

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".FirstActivity"
        android:label="@string/title_activity_first" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".SecondActivity"
        android:label="@string/title_activity_second" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.first.FirstActivity" />
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-05T11:25:55.773

您可以使用**`Handler`类`postDelayed()`方法**来执行此操作：

```
Handler mHandler = new Handler();
mHandler.postDelayed(new Runnable() {

    @Override
    public void run() {
        //start your activity here  
    }

}, 1000L); 
```

其中 1000L 是以毫秒为单位的时间，之后将调用 Runnable 类中的代码。

尝试使用这个。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-05T11:22:42.627

使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html)从 Timer 启动活动：

```
new Timer().schedule(new TimerTask(){
        public void run() { 
         FirstActivity.this.runOnUiThread(new Runnable() {
            public void run() {
            startActivity(new Intent(FirstActivity.this, SecondActivity.class));
          }
        });
       }
    }, 2000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T10:18:16.180

谢谢大家......它现在正在工作......问题在于第二个活动而不是计时器。当我注释掉“getActionBar().setDisplayHomeAsUpEnabled(true);” 这些行在第二个活动中，它开始工作。这些行在编译时不会给出任何错误，但是在运行时这将是一个问题。谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T11:23:52.990

试试这个。我在我的应用程序中使用它作为*启动画面*并且工作得很好。此外，正如@Venture 在评论中指出的那样，确保将活动添加到您的清单文件中。

```
new Handler().postDelayed(new Runnable() {
    @Override
    public void run() {
        Intent startActivity = new Intent(FirstActivity.this, SecondActivity.class);
        startActivity(startActivity);
        finish();
    }
}, 2000); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-27T15:19:38.427

我在网上找到了这个。您已经创建了一个接口，并在您的类中以匿名方法实现它

```
public static void delay(int timeMillisecond , final DelayCallBack delayCallBack){
    Handler handler = new Handler();
    handler.postDelayed(new Runnable() {
        @Override
        public void run() {
            delayCallBack.postDelay();
        }
    } , timeMillisecond );
}

public interface DelayCallBack{
    void postDelay();
} 
```

Util，这就是我拥有静态方法的地方

```
Util.delay( delay , new Util.DelayCallBack() {
    @Override
    public void postDelay() {
        startActivity( new Intent( [currentContext] , [nextActivity] );
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T11:21:59.223

我不知道您的代码有什么问题，但这应该可以：

```
private Handler mHandler = new Handler();
mHandler.postDelayed(mStartActivityTask, 2000);
private Runnable mStartActivityTask= new Runnable() {
    public void run() {
       // Start the Activity
    }
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T11:23:03.677

你可以试试这个：

```
Thread toRun = new Thread()

        {
               public void run()
               {
                   try {                      
                    sleep(500);

                     Intent intent = new Intent (FirstActivity.this, SecondActivity.class);
                     startActivity(intent);

                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
               }
        };
        toRun.start(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-11T13:12:19.013

```
Better to use CountDownTimer. Inside Finish() method launch your activity.Check below:-

 private void Start_Timer(String duration) {
        Log.d(TAG,"duration value"+Long.parseLong(duration));
        new CountDownTimer(Long.parseLong(duration), 10000){
            public void onTick(long millisUntilFinished){
                Log.d(TAG,"counting");
            }
            public  void onFinish(){
                Log.d(TAG,"inside finish");
                Intent intent =new Intent(getApplicationContext(),Result_Summary.class);
                startActivity(intent);
            }
        }.start();
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-10T06:42:10.370

```
@Override
protected void onStart() {
    super.onStart();

    try {
    Runnable myRunnable = new Runnable(){

        public void run(){

        try{
           sleep(SPLASH_TIME_OUT);
            finish();

        }catch (Exception e){
            System.exit(1);
        }
            Intent i = new Intent(SplashScreen.this, MainActivity.class);
            startActivity(i);
        }
    };

    Thread thread = new Thread(myRunnable);
    thread.start();

    }catch (Exception e){
        System.exit(1);
    }

} 
```